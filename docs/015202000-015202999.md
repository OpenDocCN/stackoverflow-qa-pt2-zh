# StackOverflow 问答 15202000-15202999

# checkstyle - Java的checkstyle，MagicNumberCheck

> ID：15202001
> 
> 赞同：5
> 
> 时间：2013-03-04T12:49:22.027
> 
> 标签：checkstyle, magic-numbers

我正在使用[*checkstyle*](http://checkstyle.sourceforge.net/)来获取有关我的源代码的报告。这个问题是关于[*MagicNumberCheck*](http://checkstyle.sourceforge.net/config_coding.html)的。

我`Date/(org.joda.)DateTime`在我的源代码中使用这样的：

```
DateTime dateTime = new DateTime(2013, 2, 27, 23, 0):
dateTime.plusHours(57); 
```

如果幻数在日期或日期时间内，有没有办法抑制*MagicNumberCheck 通知？*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-14T19:45:19.957

您可以使用**SuppressionCommentFilter**检查来执行此操作。

配置属性值，例如（在您的[checkstyle 配置](http://checkstyle.sourceforge.net/config.html)文件中）

```
<module name="SuppressionCommentFilter">
  <property name="offCommentFormat" value="Check\:OFF\: ([\w\|]+)"/>
  <property name="onCommentFormat" value="Check\:ON\: ([\w\|]+)"/>
  <property name="checkFormat" value="$1"/>
</module> 
```

现在对于所需的行，您可以这样做

```
//Check:OFF: MagicNumber
DateTime dateTime = new DateTime(2013, 2, 27, 23, 0):
dateTime.plusHours(57);
//Check:ON: MagicNumber 
```

这只会抑制`MagicNumber checks`，其余检查将在这里工作。

您也可以禁止多次检查，例如

```
//Check:OFF: MagicNumber|Indentation
Code Here
//Check:ON: MagicNumber|Indentation 
```

这只会压制`MagicNumber and Indentation Checks`。其他检查将正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:53:29.293

您可以使用评论来禁止 CheckStyle 通知

```
//CHECKSTYLE:OFF 
```

在那些行之前

```
//CHECKSTYLE:ON 
```

之后重新启用它。

这需要启用模块**SuppressionCommentFilter 。**

当然，您也可以创建自己的模块来完全满足您的需求。

# oracle - oracle sql 上次取消记录

> ID：15202002
> 
> 赞同：0
> 
> 时间：2013-03-04T12:49:25.517
> 
> 标签：oracle, plsql

我有以下数据：

命令

```
order_id    order_name        order_date         order_status 

1            iphone        20130102 13:20:00        cancelled
1            blackberry    20130102 13:00:00        cancelled
1            ipad          20130102 13:00:00        cancelled 
```

人

```
person_id     person_name       order_id

1             harshini          1 
```

我想在 20130102 13:00:00 到 2013 13:20:00 之间根据 order_date 查询时检索以下数据。这意味着最后取消订单。

```
person_name     order_name   order_date     

harshini        blackberry   20130102 13:00:00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:12:26.987

试试这个...
`select p.person_name ,o.order_name,o.order_status from order_1 o,person p where orderdate=(select max(orderdate) from order_1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:40:36.957

```
select person_name, order_name, order_date 
from(
  select 
   o.order_id, o.order_name, o.order_date, o.order_status,
   p.person_id, p.person_name, p.order_id,
   row_number() over (/*partition by person_id*/ order by order_date desc) as rnk
  from order o join person p on (o.order_id = p.order_id)
  where o.order_status = 'canceled'
   and o.order_date between 
       to_date('20130102 13:00:00','yyyymmdd hh24:mi:ss') and
       to_date('20130102 13:00:00','yyyymmdd hh24:mi:ss')
)
where rnk = 1; 
```

但是看评论，你的设计有一些问题。

# json - ExtJS 4.1.1 中的持久存储加载回调

> ID：15202004
> 
> 赞同：1
> 
> 时间：2013-03-04T12:49:34.923
> 
> 标签：json, load, store, extjs4.1

每次我的数据存储加载时，我都需要一种方法来捕获 JSON 响应。我的第一次尝试是使用该`autoLoad`属性，但回调仅在首次加载时触发：

```
autoLoad: {
    callback: function (records, operation) {
        // do something with operation.response.responseText
    }
} 
```

所以，我决定扩展这个`load`方法：

```
load: function (options) {
    var callback = options && options.callback;
    return this.callParent([Ext.apply(options || {}, {
        callback: function (records, operation) {
            // do something with operation.response.responseText
            if (callback) {
                return callback.apply(this, arguments);
            }
        }
    })]);
} 
```

它有效，但我想知道框架是否已经提供了更优雅的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:58:36.870

您可以向存储添加一个负载侦听器，并在触发加载事件时从其代理中获取当前请求。

```
var myStore = Ext.create("Ext.data.store", {
   ...whatever here
   listeners: {
       load: function(store){
           store.getProxy().activeRequest.options.operation.response.responseText;
       }
   }
}); 
```

那就是如果您特别想要响应文本。如果您希望将响应作为 JSON 对象，您可以使用`store.getProxy().reader.rawData;`更简单的

# c++ - 构造函数中的虚函数调用

> ID：15202011
> 
> 赞同：1
> 
> 时间：2013-03-04T12:50:04.973
> 
> 标签：c++, virtual-functions

我有这个布局

```
class Base {
   public:
   virtual void Initialize() { // base Implementation }
   Base() { Initialize(); }
};

class der_1 : public Base
{
    public:
    der_1() : Base() {}
    virtual void Initialize() { // der_1 Implementation }
};

class der_2 : public Base
{
    public:
    der_2() : Base() {}
    virtual void Initialize() { // der_2 Implementation }
}; 
```

现在，每当我创建 der_1 或 der_2 类的新对象时，我最终都会调用 Initialize() 的基本实现。显然，在创建对象时我不能调用虚函数。

到目前为止，我在创建 der_1 或 der_2 类型的对象后调用 Initialize 函数，这对我来说似乎不是正确的做法，因为这会将 Initialize 函数调用与每次创建对象时结合起来。

有人可以建议我更好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:54:02.977

在构造函数调用期间，对象“仍然”只是基类的一个实例，因此它确实知道您重载的 Initialize() 函数。

这里有一些处理这种情况的建议：

[来自构造函数的 C++ 虚函数](https://stackoverflow.com/questions/496440/c-virtual-function-from-constructor)

# python - 使用python或excel查找每组连续值的长度

> ID：15202025
> 
> 赞同：2
> 
> 时间：2013-03-04T12:51:08.687
> 
> 标签：python, excel

我有一个看起来像的 python 列表/excel 范围

```
[0,0,0,0,1,1,0,0,1,1,1,1,1,0,1,0,0,0,0,0,0,0,1,1,0,0,0] . 
```

我想要以下输出：

```
length of 1st set of zeros - 4

length of 2nd set of zeros - 2

length of 3rd set of zeros - 1

length of 4th set of zeros - 7

length of 5th set of zeros - 3 
```

我`" COUNTIF($D2:D$2,D2)"`在 Excel 中尝试了帮助我找到第 n 个值的公式，但我不确定如何找到每组连续值的长度。

以上如何在 Excel 和 Python 中实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:52:53.710

您可能应该使用[`itertools.groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
counter = 1
suffixes = {1: 'st', 2:'nd', 3:'rd'}
for key, group in itertools.groupby(the_sequence):
    if key == 0:
        print 'The length of {}{} sequence of zeros is: {}'.format(counter,
                                                                   suffixes.get(counter, 'th'),
                                                                   len(tuple(group)))
        counter += 1 
```

输出：

```
The length of 1st sequence of zeros is: 4
The length of 2nd sequence of zeros is: 2
The length of 3rd sequence of zeros is: 1
The length of 4th sequence of zeros is: 7
The length of 5th sequence of zeros is: 3 
```

不幸的是，我不是 Excel 用户，无法帮助您使用 Excel 解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T13:13:51.337

在 Excel 中，假设您有数据，`D2:D20`您可以在 F2 中使用此“数组公式”

`=IFERROR(INDEX(FREQUENCY(IF($D$2:$D$20=0,ROW($D$2:$D$20)),IF(OFFSET($D$2:$D$20,1,0)<>0,IF($D$2:$D$20=0,ROW($D$2:$D$20)))),ROWS(F$2:F2)),"")`

用 CTRL+SHIFT+ENTER 确认并复制下来 - 这将为您提供所有零序列长度的列表 - 当数字用完时，您会得到空白

If data is in a row rather than a column you need to revise that slightly.....

# mapreduce - 在 mapreduce 中从 DistributedCache 读取 HAR 文件

> ID：15202026
> 
> 赞同：1
> 
> 时间：2013-03-04T12:51:09.513
> 
> 标签：mapreduce, hdfs, cloudera, distributed-cache

我编写了一个 oozie 工作流，它创建 HAR 存档，然后运行需要从该存档中读取数据的 MR-job。1\. 创建存档 2\. 当作业运行时，映射器确实在分布式缓存中看到存档。3\. ？？？我怎样才能阅读这个档案？从这个档案中逐行读取数据的 API 是什么（我的 har 是一批多个换行符分隔的文本文件）。注意：当我使用存储在 DistirubtedCache 中的常用文件（不是 HAR 存档）时，它工作得很好。尝试从 HAR 读取数据时遇到问题。

这是一个代码片段：

```
 InputStream inputStream;
    String cachedDatafileName = System.getProperty(DIST_CACHE_FILE_NAME);
    LOG.info(String.format("Looking for[%s]=[%s] in DistributedCache",DIST_CACHE_FILE_NAME, cachedDatafileName));

    URI[] uris = DistributedCache.getCacheArchives(getContext().getConfiguration());
    URI uriToCachedDatafile = null;
    for(URI uri : uris){
        if(uri.toString().endsWith(cachedDatafileName)){
            uriToCachedDatafile = uri;
            break;
        }
    }
    if(uriToCachedDatafile == null){
        throw new RuntimeConfigurationException(String.format("Looking for[%s]=[%s] in DistributedCache failed. There is no such file",
                DIST_CACHE_FILE_NAME, cachedDatafileName));
    }

    Path pathToFile = new Path(uriToCachedDatafile);
    LOG.info(String.format("[%s] has been found. Uri is: [%s]. The path is:[%s]",cachedDatafileName, uriToCachedDatafile, pathToFile));

    FileSystem fileSystem =  pathToFile.getFileSystem(getContext().getConfiguration());
    HarFileSystem harFileSystem = new HarFileSystem(fileSystem);
    inputStream = harFileSystem.open(pathToFile); //NULL POINTER EXCEPTION IS HERE!
    return inputStream; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:40:50.020

```
protected InputStream getInputStreamToDistCacheFile() throws IOException{
        InputStream inputStream;
        String cachedDatafileName = System.getProperty(DIST_CACHE_FILE_NAME);
        LOG.info(String.format("Looking for[%s]=[%s] in DistributedCache",DIST_CACHE_FILE_NAME, cachedDatafileName));

        URI[] uris = DistributedCache.getCacheArchives(getContext().getConfiguration());
        URI uriToCachedDatafile = null;
        for(URI uri : uris){
            if(uri.toString().endsWith(cachedDatafileName)){
                uriToCachedDatafile = uri;
                break;
            }
        }
        if(uriToCachedDatafile == null){
            throw new RuntimeConfigurationException(String.format("Looking for[%s]=[%s] in DistributedCache failed. There is no such file",
                    DIST_CACHE_FILE_NAME, cachedDatafileName));
        }

        //Path pathToFile = new Path(uriToCachedDatafile +"/stf/db_bts_stf.txt");
        Path pathToFile = new Path("har:///"+"home/ssa/devel/megalabs/kyc-solution/kyc-mrjob/target/test-classes/GSMCellSubscriberHomeIntersectionJobDescriptionClusterMRTest/in/gsm_cell_location_stf.har" +"/stf/db_bts_stf.txt");
        //Path pathToFile = new Path(("har://home/ssa/devel/megalabs/kyc-solution/kyc-mrjob/target/test-classes/GSMCellSubscriberHomeIntersectionJobDescriptionClusterMRTest/in/gsm_cell_location_stf.har"));

        LOG.info(String.format("[%s] has been found. Uri is: [%s]. The path is:[%s]",cachedDatafileName, uriToCachedDatafile, pathToFile));
        FileSystem harFileSystem = pathToFile.getFileSystem(context.getConfiguration());
        FSDataInputStream fin = harFileSystem.open(pathToFile);
        LOG.info("fin: " + fin);
//        FileSystem fileSystem =  pathToFile.getFileSystem(getContext().getConfiguration());
//        HarFileSystem harFileSystem = new HarFileSystem(fileSystem);
//        harFileSystem.exists(new Path("har://home/ssa/devel/mycompany/my-solution/my-mrjob/target/test-classes/HomeJobDescriptionClusterMRTest/in/locations.har"));
//        LOG.info("harFileSystem.exists(pathToFile):"+ harFileSystem.exists(pathToFile));
//        harFileSystem.initialize(uriToCachedDatafile, context.getConfiguration());

        FileStatus[] statuses = harFileSystem.listStatus(new Path("har:///"+"har://home/ssa/devel/mycompany/my-solution/my-mrjob/target/test-classes/HomeJobDescriptionClusterMRTest/in/locations.har"));
        for(FileStatus fileStatus : statuses){
            LOG.info("fileStatus isDir"+fileStatus.isDirectory() +" len:" + fileStatus.getLen());
        }

//        String tmpPathToFile = "har:///"+pathToFile.toString(); //+"/stf/db_bts_stf.txt";
//        Path tmpPath = new Path(tmpPathToFile);
//        LOG.info("KILL ME PATH TO FILE IN ARCHIVE: " +tmpPath);
//        inputStream = harFileSystem.open(tmpPath);
//        return inputStream;
        return fin;
    } 
```

如您所见，这很可怕。您已手动读取存储在存档中的索引文件并使用索引文件元数据重建路径。如果您知道存档中存储的文件的确切名称（例如在我的示例中），则可以手动构建路径。

这不方便。我确实期待像 Zip->zipEntry 这样的东西，当您可以在不知道其结构的情况下迭代存档条目时。

# jquery - .submit() 中的 jQuery 淡出

> ID：15202038
> 
> 赞同：1
> 
> 时间：2013-03-04T12:51:48.390
> 
> 标签：jquery, fadeout, preventdefault, double-submit-prevention

下面的代码是为了防止双击提交，它似乎工作。它防止了数据的双重提交，但不执行fadeOut。有谁知道为什么？提交后，提交按钮，如果按下将导致淡出执行。

```
$("#form1").submit(function() { 
     $("#form1Submit").click(function(event){ 
         event.preventDefault();
         $("#form1Submit").fadeOut("slow"); 
     });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:25:07.543

淡出没有执行，因为在提交`#form1`点击事件时才被绑定到`#form1submit`. 第一次点击提交按钮，提交表单，然后绑定事件。（如果表单只是做一个回发，由于页面刷新，事件永远不会被绑定）

您可以简单地交换`submit`and `click`，一旦单击提交按钮，按钮就会消失，然后继续提交表单。

```
$("#form1Submit").click(function(event) {
    event.preventDefault();
    $(this).fadeOut("slow", function(){
        //Once button has faded, invoke the form submission
        $("#form1").submit();
    });
}); 
```

# jquery - 为什么 Jquery 跳过验证并显示成功？

> ID：15202039
> 
> 赞同：0
> 
> 时间：2013-03-04T12:51:52.863
> 
> 标签：jquery, html, jquery-validate

我有我用来验证的 jquery，它跳过验证并显示成功，但我没有在文本字段中键入任何值，因为它必须是。任何可以帮助的人请做。

这是我的jQuery。

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/zjquery.validate.js">
</script>
<script type="text/javascript" src="js/jquery-1.2.6.min.js"></script>
<script type="text/javascript" src="js/jquery-easing-1.3.pack.js"></script>
<script type="text/javascript" src="js/jquery-easing-compatibility.1.2.pack.js"></script>
<script type="text/javascript" src="js/coda-slider.1.1.1.pack.js"></script>

<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js">
</script>

</script>
<style type="text/css">
  label.valid {
    color: green !important; // !important added  
  } 
  label.error { 
    float: none; 
    color: red; 
    padding-left: .5em; 
    vertical-align: top;  
  }

</style>

<script>
  $(document).ready(function() {
    $('#results').hide();
    $("#contactform").validate({
      debug: false,
      rules: {
        fname: "required",
        subject: "required",
        email: "required",
        message: "required",
        email: {
          required: true,
          email: true
        }
      },
      messages: {
        Paymentfrequency: "Select frequency",
        fname: "Type name ",
        subject: "Type surname ",
        email: "invalid email",     
        message: "Select loan type",                
      },
      submitHandler: function(form) {
        $.post('mailmeform.php', $("#contactform").serialize(), function(data) {
          $('#contactform').fadeOut("slow");  
          $('#results').fadeIn(2000);
        });
      }
    });
  });
</script> 
```

下面是HTML

```
<table name="contacttable" border="0" width="100%">
<form id="contactform" action="mailmeform.php" method = "post">
<table>
  <tr><td><label>Name:</label></td><td><input type = "text" name = "fname"></td></tr>
  <tr><td><label>Subject:</label></td><td><input type = "text" name = "subject"></td></tr>
  <tr><td><label class="required">Email:</label></td><td><input type = "text" name = "email" ></td></tr>
  <tr><td><label>message:</label></td><td><textarea cols = 40 rows=5 name = "message"></textarea></td></tr> 
  <tr><td><input type = "submit" value = "send"></td></tr>
  </h3>
</form><tr>
<td><div id ="results"><p>Thanks We will be back to you soon</p></div></td>
</tr>
</div>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:13:52.883

**无效的 HTML**是验证被破坏的原因。不匹配的标签、未闭合的标签、杂散`</h3>`和`</div>`标签内的标签`table`，但关键错误是您如何将`<form>`标签包裹在`<table>`...

```
<table name="contacttable" border="0" width="100%">
    <form id="contactform" action="mailmeform.php" method = "post">
        <table>
            <tr>...</tr>
            <tr>...</tr>
    </h3>
    </form>
        <tr>...</tr>
    </div>
</table> 
```

清理完这个 HTML 后，jQuery Validate 插件就可以正常工作了：

**演示：http: [//jsfiddle.net/p2kLR/](http://jsfiddle.net/p2kLR/)**

* * *

此外，您已经两次包含该插件。删除第二个实例...

```
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js"> 
```

并且您已经包含了 jQuery 两次，请删除旧版本...

```
<script type="text/javascript" src="js/jquery-1.2.6.min.js"></script> 
```

更像这样的东西：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js"></script>
<script type="text/javascript" src="js/jquery-easing-1.3.pack.js"></script>
<script type="text/javascript" src="js/jquery-easing-compatibility.1.2.pack.js"></script>
<script type="text/javascript" src="js/coda-slider.1.1.1.pack.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:58:03.017

您使用 Jquery Validate 插件[Jquery Validate](http://docs.jquery.com/Plugins/Validation)

只需尝试在演示中添加类：

```
class="required"
class="required email" 
```

您添加了两次 Jquery Validation 脚本。删除一个：

```
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T13:16:23.163

在按钮单击时尝试表单验证

```
 $('#submit').click(function(){

//your code

and if true 
$('#results').show();
}); 
```

和

```
$(document).ready(function(){
  $('#results').hide();
}); 
```

# java - 如何在android中使用JavaCv的cvSaveImage

> ID：15202040
> 
> 赞同：2
> 
> 时间：2013-03-04T12:51:55.630
> 
> 标签：java, android, javacv

我已经使用 javaCv 创建了一个应用程序，我正在尝试使用将图像保存在 android 中

```
cvSaveImage("/storage/sdcard0/watermarked/test.jpg", yCrCb);
cvSaveImage("/storage/extSdCard/test.jpg",yCrCb); 
```

其中 yCrCb 是 IplImage。

没有异常错误，程序运行顺利，但文件没有保存到上面提到的路径中。我想问一下可能会出现什么问题？它是文件名的命名约定吗？

如果有帮助，我有一个与此应用程序对应的 java 应用程序，当我使用该行时，java 版本可以正常工作

```
cvSaveImage("C:\\testing123.jpg", yCrCb); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:18:02.753

嗨，我用同样的东西来存储图像。

为了获取 sdcard 的路径，我使用了 Environment.getExternalStorageDirectory().toString();

将文件夹名称附加到要存储图像的路径

试试这个，并确保您在 xml 文件中具有写入权限。

# ios - C-array 作为 iOS 中的属性

> ID：15202041
> 
> 赞同：4
> 
> 时间：2013-03-04T12:51:59.780
> 
> 标签：ios, objective-c, cocoa-touch

我正在为 iOS 编程，并使用 ARC。

我正在尝试使用 c 数组作为属性，但它报告错误。

```
@property (strong, nonatomic)NSString *mappingTable[70][254]; 
```

错误是`"Property cannot have array or function type NSString *[70][254]"`。我怎么解决这个问题？如何将 c-array 声明为属性？

*注意：*
这是一个二维数组，我认为只使用 c-array 会容易得多，所以我没有使用 NSArray。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-21T16:16:14.677

很惊讶这还没有被建议，但您可以将 c-array 存储在 NSData 对象中。我只是使用这种方法来存储一组帧。

```
@property (nonatomic) NSData *framesArray;

// Create and initialize your c-style frames array
CGRect frames[numberOfFrames];
...
self.framesArray = [NSData dataWithBytes:frames length:(sizeof(CGRect) * numberOfFrames)];

// To Access the property
NSUInteger arraySize = [self.framesArray length] / sizeof(CGRect);
CGRect *frames = (CGRect *) [self.framesArray bytes]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T12:58:19.070

您不能以这种格式声明它。正如错误消息所述，您不能在属性声明中使用 C 样式的数组。

新的更短的数组语法使 NSArray 和 NSMutableArray 不那么痛苦。代替

```
[array objectAtIndex:3] 
```

你可以简单地使用

```
array[3] 
```

我认为从长远来看，使用 Objective-C 对象的好处将超过使用 C 样式数组的舒适度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T12:59:08.693

您不能将`c/c++`数组声明为属性，您可以使用`objective-c NSArray/NSMutableArray`属性，也可以声明 c++ 数组。

```
@property (strong,nonatomic)NSArray *mappingTable; 
```

或者像这样声明纯c风格的字符数组

```
char mappingTable[70][224]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-14T20:49:17.840

如果您只打算将它用作班级的私有财产。然后保持简单。跳过 YourClass.h 文件。并像这样直接写在YourClass.m文件中。

```
//YourClass.m file

#import "YourClass.h"

@interface YourClass()

@property (strong,nonatomic)NSArray *mappingTable;

@end

@implementation YourClass
@synthesize mappingTable;
@end 
```

# android - android中SupportMapFragment上的动画

> ID：15202042
> 
> 赞同：1
> 
> 时间：2013-03-04T12:52:01.230
> 
> 标签：android, android-support-library

我想在按钮单击时在 SupportMapFragment 上添加淡入和淡出动画。我不能这样做..！任何人都可以帮助我解决这种情况或指导教程吗？

# c - 如何使用文件将 printf 作为输入提供给 C 程序？

> ID：15202044
> 
> 赞同：0
> 
> 时间：2013-03-04T12:52:05.473
> 
> 标签：c, linux

我知道你可以像这样在 linux 中为 C 程序提供输入

```
me $ printf "some input" | ./someProgram 
```

我想使用来自文件的输入做同样的事情，像这样

```
me $ myProgram < myFile.txt 
```

myProgram 有两个获取语句，我想用 printfs 填充它们作为输入。

```
 printf("...."); fflush(stdout);
  gets(var1);
  printf("...."); fflush(stdout);
  gets(var2); 
```

当我从这样的输入文件中填充变量时，程序的行为与预期相同

```
"12345"  //expect to fill var1 w/ 12345 and it does
"12345"  //expect to fill var2 w/ 12345 and it does 
```

但是当我的输入文件看起来像这样时，程序的行为并不像预期的那样

```
printf "12345"  //expect to fill var1 w/ 12345 but it does not
printf "12345"  //expect to fill var2 w/ 12345 but it does not 
```

显然，C 并没有像我将命令作为输入然后将其通过管道传输到程序中那样解释打印命令。

这是怎么回事？我要修复什么？如何从文件中提供 printf 输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:02:23.780

C 根本不解释任何命令。当您使用`... < file`重定向`stdin`时，该文件的内容将成为您程序的输入 - 逐字逐句。所以如果文件包含

```
"12345"  
"abc" 
```

, 然后`var1`将是`"12345"`(not `12345`) 并且`var2`将是`"abc"`(not `abc`)。同样，如果文件包含

```
printf "12345"
printf "12345" 
```

, 那么`var1`将会是`printf "12345"`并且`var2`将会是`printf "12345"`.

在我看来，你有两个选择：要么你放

```
12345
12345 
```

在文件中并使用`./someProgram < myFile.txt`，或者你把

```
printf "12345\n"
printf "12345\n" 
```

在文件中并使用`sh myFile.txt | ./someProgram`（将 myFile.txt 的内容作为 shell 脚本执行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:55:51.177

您缺少尾随换行符。

`printf "12345\n"`应该运作良好。

# python - 如果通过 Firebug 更改数量如何处理？

> ID：15202045
> 
> 赞同：0
> 
> 时间：2013-03-04T12:52:12.750
> 
> 标签：python, django, firebug, payment-gateway

请帮我提供建议。

我正在我的网站上集成 2Checkout 网关，我面临着有趣的情况。我有一个名为“从 2CO 购买”的按钮，它是购买表格的一部分。

```
<form method="post" action="https://www.2checkout.com/checkout/purchase">
    <p>
        <input type="hidden" value="1952334" name="sid">
        <input type="hidden" value="1" name="quantity">
        <input type="hidden" value="Y" name="fixed">
        <input type="hidden" value="4" name="product_id">
        <input type="submit" value="Buy from 2CO" name="submit">
    </p>
</form> 
```

表单具有隐藏的数量输入，但可以使用 Firebug 进行更改。并且可以提交表格。之后，您将被指向付款页面，如下所示：

[http://img42.imageshack.us/img42/918/cce262e54eb645bb98aa7e3.png](http://img42.imageshack.us/img42/918/cce262e54eb645bb98aa7e3.png)

在这里你可以看到“数量”是“1”。如果我在我的购买表格中设置数量，例如，设置为“5”，它也会被提交，我会得到这张图片：

[http://i.imgur.com/K5iQhXf.png](http://i.imgur.com/K5iQhXf.png)

用户可以进入下一部分并付款。

总而言之：用户可以为我的订阅支付两倍的价格，可以手动设置数量然后请求退款，给我和支付网关带来很多问题。

如何处理这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:55:53.617

简短的回答是**你不能**。*任何*客户端代码都可以使用 Firebug 或纯 JavaScript 进行操作和提交。

在将它们提交到服务之前，您需要在服务器端保留或验证您的值，以确保它们是正确的。

# android - Android - 内部有广播接收器的异常终结类

> ID：15202048
> 
> 赞同：0
> 
> 时间：2013-03-04T12:52:13.980
> 
> 标签：android

我已经创建了一个类，并在类**构造函数**中为 SMS创建了一个**broadcastreceiver ，并在****finalize**方法类中**注销**了接收器。

现在：我的应用程序有 3 个选项卡，每个选项卡都有活动，当活动的**OnCreate**我创建我的类的实例（为当前活动创建 BroadcastReceiver）和**OnStop**我完成了类。

问题是当我在标签中移动很多次时，我会强制关闭应用程序，但本文最后一次展示的除外。

分类代码：

```
package com.example.tawasol1;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.Toast;

import com.example.tawasol1.Cls_stringManager.MessageType;
import com.example.tawasol1.Cls_stringManager.QueryMessge;

abstract class RecieverEvents{
    abstract void OnAccountNotRegistered(String Sender,String Message,String Provider);
    abstract void OnAccountNoBalance(String Sender,String Message,String Provider);
    abstract void OnAccountActivatedOk(String Sender,String Message,String Provider);
    abstract void OnAccountRegisterNoMoney(String Sender,String Message);
    abstract void OnMessage(String Sender,String Message,String FromNumber);
    abstract void OnEnvitationMessage(String Sender,String Message,String FromNumber);

}

public class Cls_CreateReceiver  {
    private Context mContext ;
    private RecieverEvents mReceiverEvnts ;
    private BroadcastReceiver CurrentReceiver ;
    private String smsSender  ;
    private String smsBody  ;
//  private Intent CheckPage ;

    Cls_CreateReceiver(Context c ,int Priority,  RecieverEvents RecEvents){
        mContext =c ;
        mReceiverEvnts = RecEvents ;

        //====================== Body Of receiver 

        IntentFilter fp=new IntentFilter();
        fp.addAction("android.provider.Telephony.SMS_RECEIVED");
        fp.setPriority(Priority);

        CurrentReceiver = new BroadcastReceiver(){

            @Override
            public void onReceive(Context conx, Intent recIntent) {

                    //===================== Get Message Extras  
                Bundle IntExtras = recIntent.getExtras() ;
                 if (IntExtras == null)
                       return;
                Object[] pdus = (Object[]) IntExtras.get("pdus");

                // get message from bundle intent 
                for (int i = 0; i < pdus.length; i++) {

                      SmsMessage SMessage = SmsMessage.createFromPdu((byte[]) pdus[i]);
                      smsSender = SMessage.getOriginatingAddress();
                      smsBody = SMessage.getMessageBody().toString();

                        }    

                    //======================End Message Extras      

                Boolean isSystemMessage = false ;
                QueryMessge retMsgQuery = QueryMessge.None ;    

                cls_database smsCheck =  new cls_database(mContext) ;
                Cls_stringManager StrManager = new Cls_stringManager();

                isSystemMessage = smsCheck.isOurSystemMessage(smsSender);

                //================= isSystemMessage     
                if (isSystemMessage)
                {
                this.abortBroadcast() ; 

                        if (StrManager.isQueryMessage(smsBody))
                        {

                            Log.d("isQueryMessage:", "YES");

                            retMsgQuery = StrManager.GetQueryMsg(smsBody) ;

                            switch (retMsgQuery) {
                            case None:
                                // Toast.makeText(c,"Error Message Query Type" , Toast.LENGTH_LONG).show();
                            break;

                            case NoBalance :
                                mReceiverEvnts.OnAccountNoBalance(smsSender, smsBody, "");
                                    break ; 
                            case AccountActivated :

                                mReceiverEvnts.OnAccountNotRegistered(smsSender, smsBody, "");
                                break ;
                            case NoRegisteredAccount :
                                mReceiverEvnts.OnAccountNotRegistered(smsSender, smsBody, "") ;

                                break ;
                            default :
                                Log.d("Receiver Other Msg:", smsBody);
                                Log.d("Receiver Other Msg:", smsSender);

                                if(smsSender.equals("TASHBIK"))
                                {
                                    Log.d("Receiver Other Msg:Tashbik", smsBody);
                                    mReceiverEvnts.OnAccountRegisterNoMoney(smsSender, smsBody) ;

                                }

                            } //switch Case 

                        }//StrManager.isQueryMessage
                        else
                        {
                            Log.d("isQueryMessage:", "NOT");

                            if (StrManager.isAccountExpireNoRegistered(smsBody)){
                                mReceiverEvnts.OnAccountNotRegistered(smsSender, smsBody, "") ;
                            return;
                            }

                            if (StrManager.isNoBalaceMessage(smsBody)){
                                mReceiverEvnts.OnAccountNoBalance(smsSender, smsBody, "") ;
                            return;
                            }

                            String ChatterMobile = "" ;
                            String ChatterMessage="" ;

                            MessageType MsgType = MessageType.None ;

                            MsgType = StrManager.GetMessageType(smsBody);

                            Log.d("Reciver>HasBody:", StrManager.hasBody(smsBody).toString());
                            Log.d("Reciver>HasMobile:", StrManager.hasMobile(smsBody).toString());

                            Log.d("Reciver>Mobile:", StrManager.GetMobileFromMessage(smsBody));
                            Log.d("Reciver>Msg:", StrManager.GetMessageBody(smsBody));

                            if(StrManager.hasMobile(smsBody))
                                ChatterMobile = StrManager.GetMobileFromMessage(smsBody);

                            if (StrManager.hasBody(smsBody))
                                ChatterMessage = StrManager.GetMessageBody(smsBody);

                            switch (MsgType) {
                            case Chatting:
                                mReceiverEvnts.OnMessage(smsSender, smsBody, "CHAT");
                                break;
                            case DirectMessage:
                                mReceiverEvnts.OnMessage(smsSender, ChatterMessage.trim(), ChatterMobile.trim());
                                break;
                            case Invitation :
                                mReceiverEvnts.OnEnvitationMessage(smsSender, smsBody, ChatterMobile.trim());
                                break ;
                            default:

                                if(smsSender.equals("TASHBIK"))
                                {
                                    Log.d("Receiver Other Msg:Tashbik", smsBody);
                                    mReceiverEvnts.OnAccountRegisterNoMoney(smsSender, smsBody) ;

                                }

                                break;
                            }

                        }//StrManager.isQueryMessage

                }//================= isSystemMessage or Not

            } // End onReceive event

 };
//====================End Of Receiver 

        mContext.registerReceiver(CurrentReceiver,fp);

} //End Of Constructor 

public void UnregisterReceiver(){
    mContext.unregisterReceiver(CurrentReceiver);

}   

@Override
protected void finalize() throws Throwable {

    mContext.unregisterReceiver(CurrentReceiver);

    super.finalize();
} 

} 
```

错误日志：

```
03-04 14:48:57.331: E/System(22346): Uncaught exception thrown by finalizer
03-04 14:48:57.331: E/System(22346): java.lang.IllegalArgumentException: Receiver not registered: com.example.tawasol1.Cls_CreateReceiver$1@41d64278
03-04 14:48:57.331: E/System(22346):    at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:654)
03-04 14:48:57.331: E/System(22346):    at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1297)
03-04 14:48:57.331: E/System(22346):    at com.example.tawasol1.Cls_CreateReceiver.finalize(Cls_CreateReceiver.java:223)
03-04 14:48:57.331: E/System(22346):    at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:186)
03-04 14:48:57.331: E/System(22346):    at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:169)
03-04 14:48:57.331: E/System(22346):    at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:01:14.037

该`onCreate`方法仅在第一次创建 Activity 时调用（或者如果这个已经完成）

但是`onStop`一旦`Activity`不再可见，就会调用该方法

因此，下次您`Activity`未显示时，请尝试取消注册已取消注册的接收器

您可以将您的`Receiver`创作移动到`onResume`每次`Activity`显示时调用的方法

您可以在[此处](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)`Activity`查看生命周期

# r - 在堆积条形图中编辑颜色

> ID：15202049
> 
> 赞同：0
> 
> 时间：2013-03-04T12:52:16.187
> 
> 标签：r, graphics, colors

我有一个基于矩阵的堆叠条形图，默认情况下，列形成条形图，行形成条形图的段。现在我想做的是为矩阵中的每个单元格分配堆叠条形图中的特定颜色和/或图案。也就是说，我不希望每一行在条形图中都有相同的颜色。这似乎是由`barplot()`. 这有可能吗？怎么做？

示例（默认情况下为矩阵的每行分配颜色）：

```
barplot(matrix(c(1:12),ncol=3,nrow=4),col=c(1,2,3,4)) 
```

示例（我愚蠢的直观解决方案不起作用）：

```
barplot(matrix(c(1:12),ncol=3,nrow=4),col=matrix(c(1:12),ncol=3,nrow=4)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:03:17.360

首先，我调整了一个数据集，使其可用于 ggplot，因此它计算某个值出现的次数。另请注意，重要的是每个“因子”（1 到 3、4 到 6、7 到 9）的数字都会发生变化，否则它将不起作用：

```
Test1 <- sample(1:3,40,replace=T)
Test2 <- sample(4:6,60,replace=T)
Test3 <- sample(7:9,80,replace=T)
Test  <- cbind(c(Test1,Test2,Test3),c(rep("A",40),rep("B",60),rep("C",80)))
Test  <- as.data.frame(Test) 
```

下一部分现在相当容易：

```
require(ggplot2)
Q <- ggplot(Test, aes(V2, fill=as.factor(V1))) + geom_bar()
Q 
```

如果您想要使用可以使用的颜色（发现标志）：

```
Q + scale_fill_manual(values=c("Blue", "White", "Red",
                               "Yellow","Red","Black",
                               "Darkgreen","White","Orange")) 
```

我同意它可能看起来不那么漂亮，但我认为绘制这样的东西也相当罕见......

# c - linux 和 macOS 之间的不同打印行为

> ID：15202051
> 
> 赞同：0
> 
> 时间：2013-03-04T12:52:17.413
> 
> 标签：c, linux, macos, printing

我正在尝试在控制台中打印出包含一些元素的表格。我有一个 macbook pro，用 linux mint 分区。在 linux 中，这完美地工作，一切都正确打印。

但是，在 macOS 中，我没有得到预期的结果。我将链接底部的源代码。源代码是用 linux 编写的，但我只是使用标准 C 的东西。

这是我得到的。

[MacOS 终端：](https://www.dropbox.com/s/7vts6ivwwsqb0bg/macOS.jpg?m)

[Linux终端：](https://www.dropbox.com/s/adj7tnl9f03hkg7/linux.jpg?m)

我对使用 linux 和在两个不同的操作系统之间进行编译非常陌生。有什么我在这里俯瞰的吗。

[来源：Ctables.h](https://www.dropbox.com/s/wkv1yh926wwymav/Ctables.h?m)

## 源代码

```
/**************************************************************
*
*   Ctables.h
*
*
**/

#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>

#define MAX_OPS 3

enum {
    FREELY = 2,
    STRICT,
    COLORFUL,
    RAINBOW,
    CENTER,
    LEFT,
    RIGHT,
    NONE
};

typedef enum{FALSE,TRUE}bool;

typedef struct {
    char *str;
    char *color;
    int width;
    int cell_width;
    int max_cell_w;
}table_cell;

typedef struct {
    int row_dimension;
    int col_dimension;
    int index_i;
    int index_j;
    int options[MAX_OPS];
    table_cell **info;
    int capacity;

}table_t;
/*Extra functions*/
void ms(int space, char symbol); /*prints space or a given symbol*/
int return_biggest(table_t *table, int row); /*finds the biggest string in a given row*/
int *calculate_width(table_t *table);

/*Operations*/
table_t *initialze_table(int op[], int dim_i , int dim_j);
void add(table_t *table, char *str);
void print(table_t *table);
void free_table(table_t *table);

/*initialize a table, what kind it is

    Op: fill in the array with your options, pass it to the struct

    0\. STRICT - User adds dimensions, table handles the indexing
       FREELY - Data is added to table and user
            handles indexing
    1\. Options - COLORFUL : make table sensitive to color and higlighting
             RAINBOW : print table in rainbow colors, this will
                automatically turn on colors as well
    2\. Alignment - CENTER, LEFT, RIGHT

    example:
        int options[3] = {STRICT, COLORFUL, CENTER};
    --create new table
        table_t neu_tableu = initialize_table(options,5,5);
            makes a colorful new table of size 5 * 5

*/
void ms(int space, char symbol) {
int i;

    if(symbol == 's') {

    for(i = 0; i < space; i++) {
        printf(" ");
        }
    }

    else {

    for(i = 0; i < space; i++) {
        printf("%c",symbol);
        }

    }

}

int return_biggest(table_t *table, int row) {
int i;
int biggest = table -> info[0][row].width;
    for(i = 0; i < table -> row_dimension; i++) {
        if(table -> info[i][row].width > biggest) {
            biggest = table -> info[i][row].width;
        }
    }

    return biggest;

}

int *calculate_width(table_t *table) {
int i,j;
/*Nr of elements to calculate*/  
int elements = table -> col_dimension;
    /*make container*/
    int *array_biggest = (int *)malloc(elements * sizeof(int));

    /*Fill container with biggest element in each row*/
        for(i = 0; i < elements; i++) {
            array_biggest[i] = return_biggest(table,i);
        }

/*
    LEFT: Has no space at the beginning, 4 columns at the end
        |example    |
    RIGHT:
          4 columns at the beginning
        |    example|
    CENTER:
        2 columns at beginning, 2 at the end
        |  example  |

Note: this is compared to the longest string, to make everything fit
    we have to calculate each space needed for each smaller string
    added to the table in terms of formatting specs

*/
    if(table -> options[2] > 6)  {
        for(i = 0; i < table -> col_dimension;i++) {
        for(j = 0; j < table -> row_dimension; j++) {
            if(table -> info[j][i].width < array_biggest[i]) {
                table -> info[j][i].cell_width = ((array_biggest[i] + 4) - table -> info[j][i].width);
            }
            else {
                table -> info[j][i].cell_width = 4;
            }
            table -> info[j][i].max_cell_w = array_biggest[i] + 4;
            }
        }
        }
    else {
        for(i = 0; i < table -> col_dimension; i++) {
            for(j = 0; j < table -> row_dimension; j++) {
                if(table -> info[j][i].width < array_biggest[i]) {
                    table -> info[j][i].cell_width = ((array_biggest[i] + 4) - table -> info[j][i].width) / 2;
    }
                else {
                    table -> info[j][i].cell_width = 2;
                }
              table -> info[j][i].max_cell_w = array_biggest[i] + 4;
            }
        }
        }

        return array_biggest;
}

table_t *initialize_table(int op[], int dim_i,int dim_j) {
int i,j;
int mul = dim_i * dim_j;
    table_t *new_table = (table_t *)malloc(sizeof(table_t));        
        new_table -> info = (table_cell **)malloc(sizeof(table_cell *) * dim_i);
    for(i = 0; i < dim_i; i++) {
        new_table -> info[i] = (table_cell *)malloc(sizeof(table_cell) * dim_j);
    }
        new_table -> capacity = dim_i * dim_j;
        new_table -> row_dimension = dim_i;
        new_table -> col_dimension = dim_j;
        new_table -> index_i = 0;
        new_table -> index_j = 0;

    for(j = 0; j < MAX_OPS;j++) {
        new_table -> options[j] = op[j];
    }

    /*Set default for every cell in the table*/
    for(i = 0; i < new_table -> row_dimension; i++) {
        for(j = 0; j < new_table -> col_dimension; j++) {
            new_table -> info[i][j].str = "";    
            new_table -> info[i][j].color = "None";  
            new_table -> info[i][j].width = 0;
            new_table -> info[i][j].cell_width = 4;
        }
    }

    return new_table;
}

void add(table_t *table, char *in_str) {

    table -> info[table -> index_i][table -> index_j].str = in_str;
    table -> info[table -> index_i][table -> index_j].width = strlen(in_str);

    table -> index_j++;
        if(table -> index_j == table -> col_dimension) {
            table -> index_j = 0;
            table -> index_i++;
        }   
}

void print(table_t *table) {
int i,j;
int *width_arr = calculate_width(table);
int wide = 0;
int check_size;
    /*Get overall table width, add together biggest
      strings from all rows*/
    for(i = 0; i < table -> col_dimension; i++) { 
        wide += width_arr[i] + 4;
    }
    /*On top of this, add */
        wide += table -> col_dimension - 1;

    printf("+");
    ms(wide,'-');
    printf("+\n");

    for(i = 0; i < table -> row_dimension; i++) {
        printf("|");
        for(j = 0; j < table -> col_dimension; j++) {
        switch(table -> options[2]) {
        case LEFT:
            printf("%s",table -> info[i][j].str);
            ms(table -> info[i][j].cell_width,'s');
            printf("|");
            break;
        case RIGHT:
            ms(table -> info[i][j].cell_width,'s');
            printf("%s", table -> info[i][j].str);
            printf("|");
            break;
        case CENTER:
        check_size = (table -> info[i][j].cell_width + table -> info[i][j].width + table ->info[i][j].cell_width);
        if(check_size < table -> info[i][j].max_cell_w) 
         {
            ms(table -> info[i][j].cell_width,'s');
            printf("%s", table -> info[i][j].str);
            ms(table -> info[i][j].cell_width + table -> info[i][j].max_cell_w - check_size,'s');
        }
        else {
            ms(table -> info[i][j].cell_width,'s');
            printf("%s", table -> info[i][j].str);
            ms(table -> info[i][j].cell_width,'s');
        }
            printf("|");
            break;

        }
        }
        printf("\n");
    }

    printf("+");
    ms(wide,'-');
    printf("+");

        printf("\n");

    /*FREE CONTAINER*/
        free(width_arr);

}

void free_table(table_t *table) {
int i;
    for(i = 0; i < table -> row_dimension; i++) {
        free(table ->info[i]);
    }
    free(table -> info);
        free(table);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T12:57:53.500

var 宽线 220 不是初始化 :(

请将其初始化为零或其他

```
int wide; //<------- DECLARATION
int check_size;
    /*Get overall table width, add together biggest
      strings from all rows*/
    for(i = 0; i < table -> col_dimension; i++) { 
        wide += width_arr[i] + 4; //<----------- USE
    }
    /*On top of this, add */
        wide += table -> col_dimension - 2; //<----------- USE

    printf("+");
    ms(wide,'-'); //<----------- USE
    printf("+\n"); 
```

你有声明但没有初始化

你在 linux 上很幸运，因为 Wide 等于 0，但在 Mac OS 中不是

# jquery - 移动 Safari 上高度为 100% 的 div

> ID：15202057
> 
> 赞同：0
> 
> 时间：2013-03-04T12:52:24.833
> 
> 标签：jquery, iphone, ios, css, mobile-safari

我正在尝试制作一个页面，其中堆叠了“幻灯片”并且用户必须滚动。每张幻灯片都应该填满整个视口。所以我有这个CSS：

```
html,
body,
.slide {
  height: 100%;
} 
```

在我的 HTML 中，我只有

```
<div class="slide">
  <!-- Content Slide #1 here -->
</div>
<div class="slide">
  <!-- Content Slide #2 here -->
</div> 
```

而且效果很好。问题是在我的 iPhone 上，第二张幻灯片不够高。
它的大小似乎是用顶部的滚动条计算的，但是当我向下滚动时，没有滚动条。我想我需要 jQuery 来解决这个问题，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:10:13.937

如果你想使用 jQuery，你可以这样做

```
if( /iPhone|iPad|iPod/i.test(navigator.userAgent) ) {
   $('.slide').css({'height':'100%'});
} 
```

# java - org.apache.struts2.json.annotations.JSON 不显示正确的格式

> ID：15202062
> 
> 赞同：4
> 
> 时间：2013-03-04T12:52:57.840
> 
> 标签：java, struts2, struts2-json-plugin

我的网络应用程序使用`struts2-json-plugin-2.2.1`

我有一个操作可以公开从数据库加载的对象（通过休眠）。

这个对象包含一个 java.util.Date 字段，它是这样注释的：

```
 @JSON(format = "dd-MM-yyyy")
  @Column(name = "DATA_CREAZIONE", nullable = false)
  public Date getDataCreazione() {
    return this.dataCreazione;
  } 
```

而不是得到：

```
"dataCreazione":"15-02-2013" 
```

我明白了：

```
"dataCreazione":"2013-02-15T16:51:06" 
```

在调试中，我注意到`org.apache.struts2.json.JSONWriter`该类没有在该`getDataCreazione`方法上找到任何注释，并且*代理*类属于该`"$$_javassist"`类型而不是`"$$EnhancerByCGLIB$$"`其他情况......

在同一个应用程序中，我有很多这种情况，并且注释工作正常。我不明白其他课程的问题（或区别）是什么。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:39:56.163

您没有指定`name`注释属性。默认情况下，空名称的注释不会反序列化。如需进一步参考，请查看[Apache 文档](http://struts.apache.org/release/2.2.x/docs/json-plugin.html#JSONPlugin-CustomizingSerializationandDeserialization)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T09:12:49.150

顺便说一句，我确认了问题的根源。正如我之前所说，它位于使用的代理类中。在我的情况下 - 如果我**加载**对象（通过休眠），那么使用的代理是 $$_javassist - 如果我**得到**对象（通过休眠），那么对象不会被代理，然后 JSonWriter 可以恢复注释 -> 所以它能够按照我注释的格式进行格式化 –</p>

# vhdl - VHDL中的指针解引用

> ID：15202066
> 
> 赞同：4
> 
> 时间：2013-03-04T12:53:11.173
> 
> 标签：vhdl

我无法理解如何取消引用 VHDL 中的指针。

我想到的是一个 C 代码，例如：

```
 int a;
  int* ptr_a;

  a = 42;
  ptr_a=&a;
  *ptr_a=451;// how can I do this ? 
```

我试图在 VHDL 中模仿这段代码：

```
ptr_test : process
    type     ptr_integer is access integer;
    variable a     : integer;
    variable ptr_a : ptr_integer;
  begin
    a         := 42;
    ptr_a     := new integer'(a);
    report "ptr now points to a : ptr=" & str(ptr_a.all);
    ptr_a.all := 451;
    report "ptr modified        : ptr=" & str(ptr_a.all);
    report "a   is NOT modified : a  =" & str(a);
    wait;
  end process; 
```

那么如何通过指针正确修改值呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T14:02:18.930

你不能直接。访问类型不是“就像指针一样”——它们至少在某种程度上是不同类型的数据存储。

此行不会创建指向以下内容的指针`a`：

```
ptr_a     := new integer'(a); 
```

它创建一个具有相同值的数据对象，`a`并设置`ptr_a`为引用它。

如果您要创建另一个访问类型变量：

```
variable ptr_b : ptr_integer; 
```

并将其设置为指向`ptr_a`：

```
ptr_b := ptr_a; 
```

然后更改为`ptr_b.all`将反映在`ptr_a.all`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T14:09:09.323

“new”相当于（C++ 而不是 C）“new”操作；调用在堆上分配整数并将其初始化为“a”的构造函数。（当然，您可以在完成后“解除分配”它）

您正在寻找的是`ptr_a := a'access;`通过指针访问全局或局部（堆栈）变量的 Ada 方式：仅当所述变量已被声明为“别名”时才合法，以提醒编译器可能存在多个变量查看它（因此，阻止了一些不错的优化）。在 C 中，无论您是否愿意，一切都是“别名”的。

这是 Ada 的一个方面，它没有通过简化过程变成 VHDL：而且很难看到它有什么用处。所以在 VHDL 中没有完全等价的。

马丁的回答刚刚弹出：正如他所说，你可以有 2 个或更多指向同一个堆对象的指针。

或者，解释你试图以这种方式实现的目标；可能有一种 VHDL 替代方法可以做到这一点。

# c++ - OpenGL着色器忽略纹理

> ID：15202076
> 
> 赞同：0
> 
> 时间：2013-03-04T12:53:45.113
> 
> 标签：c++, opengl, textures, shader, awesomium

我最近在 OpenGL 应用程序中实现了 Awesomium。当我将 Awesomium 加载到纹理中时，无论我是否将纹理绘制到表面上，OpenGL 都会将其包含在其着色过程中。

我正在尝试追踪将纹理处理到着色器中的代码行，是否有 OpenGL 用于访问所有纹理的特定函数或告诉 OpenGL 忽略纹理的方法？

更新纹理块

```
glBindTexture(GL_TEXTURE_2D, SkypeHUD);
glTexImage2D(GL_TEXTURE_2D, 0, 4, AwesomiumW, AwesomiumH, 0, GL_BGRA, GL_UNSIGNED_BYTE, surface->buffer()); 
```

创建纹理块

```
glBindTexture(GL_TEXTURE_2D, SkypeHUD);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT );
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT );
glBindTexture(GL_TEXTURE_2D, 0); 
```

在没有加载纹理的情况下绘制场景：[http](http://puu.sh/2bVTV) ://puu.sh/2bVTV 在加载纹理后绘制场景：http: [//puu.sh/2bVUb](http://puu.sh/2bVUb)

你可以看到它融合了谷歌纹理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:26:18.433

纹理启用/禁用应该由着色器代码控制，而不是某些客户端绑定状态。无论如何，您很可能会使用多个纹理单元（glActiveTexture）；纹理绑定对每个单元都是单独的，所以如果你想走这条路，你必须做一些腿工作并从每个单元解开纹理。

# php - 在 PHP 中将十六进制颜色转换为 RGB 值

> ID：15202079
> 
> 赞同：103
> 
> 时间：2013-03-04T12:53:49.343
> 
> 标签：php, colors, hex, rgb

使用 PHP将十六进制颜色值`#ffffff`转换为单个 RGB 值的好方法是什么？`255 255 255`

* * *

## 回答 #1

> 赞同：330
> 
> 时间：2013-03-04T12:56:43.367

如果要将十六进制转换为 rgb，可以使用[sscanf](https://www.php.net/manual/en/function.sscanf.php)：

```
<?php
$hex = "#ff9900";
list($r, $g, $b) = sscanf($hex, "#%02x%02x%02x");
echo "$hex -> $r $g $b";
?> 
```

输出：

```
#ff9900 -> 255 153 0 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-03-04T12:58:25.157

查看 PHP 的`hexdec()`和`dechex()`函数： http: [//php.net/manual/en/function.hexdec.php](http://php.net/manual/en/function.hexdec.php)

例子：

```
$value = hexdec('ff'); // $value = 255 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2015-08-11T06:05:56.430

我做了一个函数，如果 alpha 作为第二个参数提供，它也返回 alpha，代码如下。

**功能**

```
function hexToRgb($hex, $alpha = false) {
   $hex      = str_replace('#', '', $hex);
   $length   = strlen($hex);
   $rgb['r'] = hexdec($length == 6 ? substr($hex, 0, 2) : ($length == 3 ? str_repeat(substr($hex, 0, 1), 2) : 0));
   $rgb['g'] = hexdec($length == 6 ? substr($hex, 2, 2) : ($length == 3 ? str_repeat(substr($hex, 1, 1), 2) : 0));
   $rgb['b'] = hexdec($length == 6 ? substr($hex, 4, 2) : ($length == 3 ? str_repeat(substr($hex, 2, 1), 2) : 0));
   if ( $alpha ) {
      $rgb['a'] = $alpha;
   }
   return $rgb;
} 
```

**函数响应示例**

```
print_r(hexToRgb('#19b698'));
Array (
   [r] => 25
   [g] => 182
   [b] => 152
)

print_r(hexToRgb('19b698'));
Array (
   [r] => 25
   [g] => 182
   [b] => 152
)

print_r(hexToRgb('#19b698', 1));
Array (
   [r] => 25
   [g] => 182
   [b] => 152
   [a] => 1
)

print_r(hexToRgb('#fff'));
Array (
   [r] => 255
   [g] => 255
   [b] => 255
) 
```

如果您想以 CSS 格式返回 rgb(a)，只需将`return $rgb;`函数中的行替换为`return implode(array_keys($rgb)) . '(' . implode(', ', $rgb) . ')';`

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2013-06-14T19:00:05.437

对于任何有兴趣的人来说，这是另一种非常简单的方法。此示例假定正好有 6 个字符，并且前面没有井号。

```
list($r, $g, $b) = array_map('hexdec', str_split($colorName, 2)); 
```

这是一个支持 4 种不同输入（abc、aabbcc、#abc、#aabbcc）的示例：

```
list($r, $g, $b) = array_map(
  function ($c) {
    return hexdec(str_pad($c, 2, $c));
  },
  str_split(ltrim($colorName, '#'), strlen($colorName) > 4 ? 2 : 1)
); 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2018-02-28T15:30:23.237

您可以使用该函数`hexdec(hexStr: String)`获取十六进制字符串的十进制值。

请参阅下面的示例：

```
$split = str_split("ffffff", 2);
$r = hexdec($split[0]);
$g = hexdec($split[1]);
$b = hexdec($split[2]);
echo "rgb(" . $r . ", " . $g . ", " . $b . ")"; 
```

这将打印`rgb(255, 255, 255)`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-11-24T02:54:57.843

你可以试试下面这段简单的代码。

```
list($r, $g, $b) = sscanf(#7bde84, "#%02x%02x%02x");
echo $r . "," . $g . "," . $b; 
```

这将返回 123,222,132

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-09-21T22:44:04.513

我处理带或不带散列、单个值或对值的十六进制颜色的方法：

```
function hex2rgb ( $hex_color ) {
    $values = str_replace( '#', '', $hex_color );
    switch ( strlen( $values ) ) {
        case 3;
            list( $r, $g, $b ) = sscanf( $values, "%1s%1s%1s" );
            return [ hexdec( "$r$r" ), hexdec( "$g$g" ), hexdec( "$b$b" ) ];
        case 6;
            return array_map( 'hexdec', sscanf( $values, "%2s%2s%2s" ) );
        default:
            return false;
    }
}
// returns array(255,68,204)
var_dump( hex2rgb( '#ff44cc' ) );
var_dump( hex2rgb( 'ff44cc' ) );
var_dump( hex2rgb( '#f4c' ) );
var_dump( hex2rgb( 'f4c' ) );
// returns false
var_dump( hex2rgb( '#f4' ) );
var_dump( hex2rgb( 'f489' ) ); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2021-04-29T21:42:59.113

我写了一个像这样的简单函数，它支持带或不带开头的输入值，`#`也可以输入 3 或 6 个字符的十六进制代码：

```
 function hex2rgb( $color ) {

    if ($color[0] == '#') {
        $color = substr($color, 1);
    }
    list($r, $g, $b) = array_map("hexdec", str_split($color, (strlen( $color ) / 3)));
    return array( 'red' => $r, 'green' => $g, 'blue' => $b );
} 
```

这将返回一个关联数组，可以访问为`$color['red']`, `$color['green']`, `$color['blue']`;

另请参阅CSS 技巧[。](https://css-tricks.com/snippets/php/convert-hex-to-rgb/)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-05-22T07:59:07.933

我已将@John 的答案和@iic 的评论/想法放在一个函数中，该函数可以同时处理通常的十六进制颜色代码和速记颜色代码。

一个简短的解释：

使用[scanf](http://php.net/manual/en/function.sscanf.php)，我从十六进制颜色中读取 r、g 和 b 值作为字符串。不像@John的答案那样的十六进制值。在使用速记颜色代码的情况下，r、g 和 b 字符串在转换为小数之前必须加倍（“f”->“ff”等）。

```
function hex2rgb($hexColor)
{
  $shorthand = (strlen($hexColor) == 4);

  list($r, $g, $b) = $shorthand? sscanf($hexColor, "#%1s%1s%1s") : sscanf($hexColor, "#%2s%2s%2s");

  return [
    "r" => hexdec($shorthand? "$r$r" : $r),
    "g" => hexdec($shorthand? "$g$g" : $g),
    "b" => hexdec($shorthand? "$b$b" : $b)
  ];
} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-08-24T05:32:51.603

**将颜色代码 HEX 转换为 RGB**

```
$color = '#ffffff';
$hex = str_replace('#','', $color);
if(strlen($hex) == 3):
   $rgbArray['r'] = hexdec(substr($hex,0,1).substr($hex,0,1));
   $rgbArray['g'] = hexdec(substr($hex,1,1).substr($hex,1,1));
   $rgbArray['b'] = hexdec(substr($hex,2,1).substr($hex,2,1));
else:
   $rgbArray['r'] = hexdec(substr($hex,0,2));
   $rgbArray['g'] = hexdec(substr($hex,2,2));
   $rgbArray['b'] = hexdec(substr($hex,4,2));
endif;

print_r($rgbArray); 
```

**输出**

```
Array ( [r] => 255 [g] => 255 [b] => 255 ) 
```

我从这里找到了这个参考 - [Convert Color Hex to RGB and RGB to Hex using PHP](http://www.codexworld.com/convert-color-hex-to-rgb-and-rgb-to-hex-using-php/)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-07-23T17:13:33.570

借用@jhon的答案-这将以字符串格式返回rgb，并带有不透明度选项。

```
function convert_hex_to_rgba($hex, $opacity = 1){
    list($r, $g, $b) = sscanf($hex, "#%02x%02x%02x");
    return sprintf('rgba(%s, %s, %s, %s)', $r, $g, $b, $opacity);
}

convert_hex_to_rgba($bg_color, 0.9) // rgba(2,2,2,0.9) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-03-04T13:01:33.217

试试这个，它将其参数 (r, g, b) 转换为十六进制 html-color 字符串 #RRGGBB 参数转换为整数并修剪到 0..255 范围

```
<?php
function rgb2html($r, $g=-1, $b=-1)
{
    if (is_array($r) && sizeof($r) == 3)
        list($r, $g, $b) = $r;

    $r = intval($r); $g = intval($g);
    $b = intval($b);

    $r = dechex($r<0?0:($r>255?255:$r));
    $g = dechex($g<0?0:($g>255?255:$g));
    $b = dechex($b<0?0:($b>255?255:$b));

    $color = (strlen($r) < 2?'0':'').$r;
    $color .= (strlen($g) < 2?'0':'').$g;
    $color .= (strlen($b) < 2?'0':'').$b;
    return '#'.$color;
}
?> 
```

哦，反过来

# 开头的字符可以省略。函数返回范围 (0..255) 内的三个整数的数组，如果无法识别颜色格式，则返回 false。

```
<?php
function html2rgb($color)
{
    if ($color[0] == '#')
        $color = substr($color, 1);

    if (strlen($color) == 6)
        list($r, $g, $b) = array($color[0].$color[1],
                                 $color[2].$color[3],
                                 $color[4].$color[5]);
    elseif (strlen($color) == 3)
        list($r, $g, $b) = array($color[0].$color[0], $color[1].$color[1], $color[2].$color[2]);
    else
        return false;

    $r = hexdec($r); $g = hexdec($g); $b = hexdec($b);

    return array($r, $g, $b);
}
?> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-06-02T11:05:57.293

```
//if u want to convert rgb to hex
$color='254,125,1';
$rgbarr=explode(",", $color);
echo sprintf("#%02x%02x%02x", $rgbarr[0], $rgbarr[1], $rgbarr[2]); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-02-07T12:32:15.697

```
function RGB($hex = '')
{
    $hex = str_replace('#', '', $hex);
    if(strlen($hex) > 3) $color = str_split($hex, 2);
    else $color = str_split($hex);
    return [hexdec($color[0]), hexdec($color[1]), hexdec($color[2])];
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-03-21T01:08:41.110

```
Enjoy    

public static function hexColorToRgba($hex, float $a){
        if($a < 0.0 || $a > 1.0){
            $a = 1.0;
        }
        for ($i = 1; $i <= 5; $i = $i+2){
            $rgb[] = hexdec(substr($hex,$i,2));
        }
        return"rgba({$rgb[0]},{$rgb[1]},{$rgb[2]},$a)";
    } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-10-29T15:57:04.210

我的解决方案：（支持简写）

```
$color = "#0ab";
$colort = trim( $color );
if( $colort and is_string( $color ) and preg_match( "~^#?([abcdef0-9]{3}|[abcdef0-9]{6})$~ui", $colort ))
{
    if( preg_match( "~^#?[abcdef0-9]{3}$~ui", $colort ))
    {
        $hex = trim( $colort, "#" );
        list( $hexR, $hexG, $hexB ) = str_split( $hex );
        $hexR .= $hexR;
        $hexG .= $hexG;
        $hexB .= $hexB;
    }
    else
    {
        $hex = trim( $colort, "#" );
        list( $hexR, $hexG, $hexB ) = str_split( $hex, 2 );
    }

    $colorR = hexdec( $hexR );
    $colorG = hexdec( $hexG );
    $colorB = hexdec( $hexB );
}

// Test
echo $colorR ."/" .$colorG ."/" .$colorB;
// → 0/170/187 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-02-23T17:10:38.640

如果您想将十六进制转换为 RGB，您可以按照以下步骤操作：

```
class RGB
{        
    private $color; //#ff0000
    private $red;
    private $green;
    private $blue;

    public function __construct($colorCode = '')
    {
        $this->color = ltrim($colorCode, '#');
        $this->parseColor();
    }
    public function readRGBColor()
    {
        echo "Red = {$this->red}\nGreen = {$this->green}\nBlue = {$this->blue}";
    }
    private function parseColor()
    {
        if ($this->color) {
            list($this->red, $this->green, $this->blue) = sscanf($this->color, '%02x%02x%02x');
        } else {
            list($this->red, $this->green, $this->blue) = array(0, 0, 0);
        }
    }
}

$myColor = new RGB("#ffffff");
$myColor->readRGBColor(); 
```

# java - 如何在没有 JButton 的情况下使 ImageIcon（或任何类型的图像）可见？

> ID：15202080
> 
> 赞同：0
> 
> 时间：2013-03-04T12:53:54.333
> 
> 标签：java, swing, jbutton, imageicon, minesweeper

我正在开发一款扫雷游戏，我想让炸弹（或者在这种情况下是我创建的熊猫图像）在按下时显示在游戏空间下。在这一点上，我只想让它出现在每个空间下，我知道如何随机化它之后出现的位置，问题是让它出现。

现在我的代码中适用于这个主题的部分属于 2 个不同的类：

一级

```
public class MSBoard extends JPanel implements ActionListener
{
    int x = 8;
    int y = 8;

    public GridLayout gl = new GridLayout(x,y,0,0);
    public MSBoxes boxarray[][] = new MSBoxes[x][y];

   MSBoard()
   {
        super();
        setLayout(gl);

        for(int i=0;i<x;i++)
        for (int j=0;j<y;j++)

        {
             boxarray[i][j] = new MSBoxes();
             add(boxarray[i][j]);
        }   

   }    

   public void actionPerformed(ActionEvent ae){}
} 
```

第二个

```
public class MSBoxes extends JPanel implements ActionListener
{   
public JButton b1;
ImageIcon panda;

MSBoxes()
{
          super();
          panda = new ImageIcon("panda.gif");
          b1 = new JButton();
          add(b1);
          b1.addActionListener(this);
          b1.setVisible(true);

}

public void actionPerformed(ActionEvent ae)
{
           if(b1 == ae.getSource())
           {
               b1.setVisible(false);
           }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:57:47.543

*   使用[JToggleButton 进行扫雷游戏](https://stackoverflow.com/a/7877817/714968)

*   使用[putClientProperty](https://stackoverflow.com/a/10385302/714968)

*   对[JToggleButton](http://docs.oracle.com/javase/7/docs/api/javax/swing/JToggleButton.html)使用[ItemListener](http://docs.oracle.com/javase/tutorial/uiswing/events/itemlistener.html)

# mootools - 获取UL中锚标签的属性值

> ID：15202089
> 
> 赞同：0
> 
> 时间：2013-03-04T12:54:15.280
> 
> 标签：mootools

```
<div class="content">
    <ul class="clean menu" id="topics">
        <li class="drop png">
            <div>
                <span href="#" id="phone" style="BACKGROUND-POSITION: 13px -79px">Phone</span>
            </div>
            <ul class="clean menu sub">
               <li>
                   <a cat="tech" class="sec_phone_0" href="javascript:void(0);" name="&amp;lid=choose_category_phone_digital" rel="1">FiOS Digital Voice</a>
               </li>
               <li class="last">
                   <a cat="tech" class="sec_phone_1" href="javascript:void(0);" name="&amp;lid=choose_category_phone_dialup" rel="1">Home Phone(Copper)</a>
               </li>
               <li class="last">
                   <a cat="tech" class="sec_phone_2" href="javascript:void(0);" name="&amp;lid=choose_category_phone_fiosVoice" rel="1">FiOS Voice</a>
               </li>
               <li class="last" style="margin-bottom:7px;">
                   <a cat="tech" class="sec_phone_2" href="javascript:void();" name="&amp;lid=choose_category_phone_wireless" rel="1">Verizon Wireless</a>
               </li>
           </ul>
       </li>
    </ul>
</div> 
```

现在我需要选择 Fios Voice 的“cat”值。如何在 Mootools v1.3.2 中做到这一点？需要在cookie中设置值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:02:08.100

该脚本在点击事件中获取链接的属性。

```
window.addEvent('domready',function(){
    $$('ul.sub')[0].getElements('a').each(function(el,ind){
        el.addEvent('click',function(){
            var cat = el.getProperty('cat');
            alert(cat)
        })
    })
}) 
```

如果`<a cat="tech1" class="sec_phone_0 active" href="javascript:void(0);" name="&amp;lid=choose_category_phone_digital" rel="1">FiOS Digital Voice</a>`有`class="active"`

```
window.addEvent('domready',function(){
    if($$('ul.sub')[0].getElements('a.active')[0]){
        var cat = $$('ul.sub')[0].getElement('a.active').getProperty('cat');
        alert(cat);
    }
}) 
```

# c# - 无法使用 c# 序列化 Neurotec NTemplate - protobuf-net

> ID：15202095
> 
> 赞同：1
> 
> 时间：2013-03-04T12:54:36.717
> 
> 标签：c#, serialization, protobuf-net

我有一个带有一个手指记录的 Neurotec NTemplate。现在我想用 c# - protobuf-net 序列化它。我没有得到任何例外，但我的 MemoryStream 是空的。可能是什么问题？

代码如下：（其中tenPrintTemplate是一个NTemplate）

```
 tenPrintTemplate.AddFingers(fingerPrintTemplate.Save());
     //start Proto Buffer serialization  
 MemoryStream stream = new MemoryStream();
 RuntimeTypeModel.Default.InferTagFromNameDefault = true;  
 RuntimeTypeModel.Default.Add(typeof(NTemplate), false);    
 ProtoBuf.Serializer.Serialize<NTemplate>(stream, tenPrintTemplate); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:49:21.723

在这里，您告诉它不要应用任何标准模式/配置逻辑：

```
RuntimeTypeModel.Default.Add(typeof(NTemplate), false); 
```

所以你基本上已经告诉它“什么都不序列化”。如果您指定`false`，它希望*您*告诉它您希望它如何工作，例如使用返回的`Add`on `MetaType`。我怀疑您也可以指定`true`它是否具有合适的属性。

请注意，对于 protobuf-net 而言，0 是一个完全合理的长度，并且该对象在网络上没有任何有趣的内容可提及。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:06:31.090

我得到了使用 C# Protobuf-net 序列化 Neurotec 的 NTemplate 的解决方案。我在下面添加解决方案代码。如果有人遇到同样的问题，请使用它作为您的解决方案。

```
//Its a NTemplate of TenPrint
tenPrintTemplate.AddFingers(fingerPrintTemplate.Save());
//start Proto Buffer serialization
MemoryStream stream = new MemoryStream();

int tenpritnTemplateSize = tenPrintTemplate.GetSize();
NBuffer buffer = new NBuffer(tenpritnTemplateSize);
// saving fingers template to buffer.
tenPrintTemplate.Save(buffer);
ProtoBuf.Serializer.Serialize<byte[]>(stream, buffer.ToArray()); 
```

# qt - 以非阻塞方式使用 QApplication

> ID：15202098
> 
> 赞同：1
> 
> 时间：2013-03-04T12:54:50.587
> 
> 标签：qt

我想使用“连接”，但如果我写

```
QApplication a(argc, argv);
connect ....
a.exec(); 
```

我在最后一个命令后被阻止（`a.exec`）之后我被阻止了。但是如果我不使用这个命令，那么回调就不起作用。

重要的是说我不打开任何窗口。我想要工作的只是“连接”选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:05:17.330

你不必打电话`app.exec()`。您可以做的是定期调用`QCoreApplication::processEvents()`. 但是，除非您要移植非 Qt 应用程序，否则不建议这样做。Qt 中的很多功能都依赖于事件循环，如果你试图绕过它，就会遇到问题。如果可能的话，让您自己的代码与事件循环一起工作是一个更好的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:07:56.360

如果您不使用 GUI，请使用 QCoreApplication 而不是 QApplication。

对不起，不是一个好的答案。

您应该考虑将您的连接移动到 Qt 主事件循环中的某些内容中。如果这真的不是一个选项，您可能需要分拆另一个运行 QCoreApplication 调用的线程。

# java - 如何获取网络活动连接列表（进程名称、ID、PID、stat、TCp 或 UDP ......）并将它们写入 java 中的 XML 文件

> ID：15202103
> 
> 赞同：1
> 
> 时间：2013-03-04T12:54:59.127
> 
> 标签：java, sockets, network-programming

我想获取所有网络活动连接，以及它们的进程名称`PID number, tcp or udp, stat (listen, connect..) local Ip address`和`remote ID address`它们的详细信息（就像你`netstat f` 在 linux bash 上运行命令时一样），然后将它们写入 a `XML file`，有人知道我应该怎么做吗？java中的哪些函数可以完成这些任务。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-19T13:20:09.480

没有 java 库/API 可以做到这一点。但是您可以调用操作系统服务，例如在 windows 中： import java.io.BufferedReader; 导入 java.io.InputStreamReader；

```
public class TCPConnections
{
public static void main(String[] args){
try{
ProcessBuilder pb = new ProcessBuilder("netstat","-a","-n","-o");
Process process = pb.start();
BufferedReader br = new BufferedReader(new InputStreamReader(process.getInputStream()));
String line;
while((line=br.readLine())!=null){
System.out.println(line);
}
br.close();
}catch(Exception e){
throw new RuntimeException(e);
}
 }
} 
```

希望能帮助到你

# android - Fragment 的 onCreateView() 方法中的 NullPointerException

> ID：15202107
> 
> 赞同：3
> 
> 时间：2013-03-04T12:55:19.493
> 
> 标签：android, android-fragments, view, nullpointerexception

我的代码：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // t-alk és impresszumhoz
    LinearLayout layout = (LinearLayout) getActivity().findViewById(
            R.layout.impresszum);
    ((TextView) layout.findViewById(R.id.impresszumtext1)).setText(" v.");... 
```

这是一个片段的oncreateview方法，我在最后一行有一个nullpointerexception

```
03-04 13:48:20.149: E/AndroidRuntime(32586):    at com.myapp.TestFragment.onCreateView(TestFragment.java:53) 
```

这是整个 onCreateView()：

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        // feltételekhez és folyamatokhoz
        WebView wv = new WebView(getActivity());
        FrameLayout flayout = new FrameLayout(getActivity());

        flayout.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
                LayoutParams.MATCH_PARENT));
        flayout.setBackgroundResource(R.drawable.gradient_gray_light);

        wv.setInitialScale(100);
        wv.setScrollBarStyle(View.SCROLLBARS_OUTSIDE_OVERLAY);
        wv.setBackgroundColor(getResources().getColor(R.color.transparent2));
        wv.setPadding(5, 5, 5, 5);

        wv.setWebViewClient(new WebViewClient() {
            public void onReceivedError(WebView view, int errorCode,
                    String description, String failingUrl) {
                Toast.makeText(getActivity(), description, Toast.LENGTH_SHORT)
                        .show();
                Toast.makeText(getActivity(), "Hiba történt a betöltés során",
                        Toast.LENGTH_LONG).show();
            }

            @Override
            public void onPageFinished(WebView view, final String url) {

                progressDialog.cancel();

            }

            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                progressDialog = ProgressDialog.show(getActivity(), "",
                        "Loading...");
                progressDialog.setCancelable(true);
                progressDialog.setCanceledOnTouchOutside(false);
            }
        });

        // feltételek
        if (mContent.equalsIgnoreCase("Feltételek")) {
            getActivity().getWindow().setFormat(PixelFormat.RGBA_8888);
            wv.loadUrl("file:///android_asset/conditions.htm");
            flayout.addView(wv);
            return flayout;

        }
        // folyamatok
        else if (mContent.equalsIgnoreCase("Folyamatok")) {
            getActivity().getWindow().setFormat(PixelFormat.RGBA_8888);
            wv.loadUrl("file:///android_asset/process.htm");
            flayout.addView(wv);
            return flayout;
        }
        // T-alkalmazások
        else if (mContent.equalsIgnoreCase("T-alkalmazások")) {

        }
        // Impresszum
        else if (mContent.equalsIgnoreCase("Impresszum")) {

            final String TAG = "Impresszum";
            String versionName;
            String appName;

            appName = getResources().getString(R.string.app_name);
LinearLayout layout = (LinearLayout) getActivity().findViewById(
                R.layout.impresszum);
            try {

                versionName = getActivity().getPackageManager().getPackageInfo(
                        getActivity().getPackageName(), 0).versionName;

        ((TextView)layout.findViewById(R.id.impresszumtext1)).setText(appName
                 + " v." + versionName);

            } catch (NameNotFoundException ex) {
                Log.e(TAG + ".1", "error: " + ex.getMessage(), ex);
            }
            return layout;
        }

        return layout;
    } 
```

我正在使用 ViewPagerIndicator。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T13:00:26.247

以下是 Fragment 生命周期的内部结构：

* * *

`FragmentManager`设置`Fragment`执行[状态转换](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/app/FragmentManager.java#FragmentManagerImpl.moveToState%28android.app.Fragment,int,int,int,boolean%29)的活动值：

```
f.mActivity = mActivity;
f.mFragmentManager = mActivity.mFragments;
f.mCalled = false;
f.onAttach(mActivity); 
```

此外，它在分离后将此值设置为 null `Fragment`：

```
f.mCalled = false;
f.onDetach();

. . .

f.mActivity = null;
f.mFragmentManager = null; 
```

因此，如果其他一切都很好，则该值不应为 null、介于`onAttach()`和之间。`onDetach()`

* * *

为了安全起见，请将所有此类代码移至`onActivityCreated()`;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T14:06:42.730

首先，我需要扩展布局，以便能够使用 findViewById() 。

最后解决方案：

这不是必需的：

```
LinearLayout layout = (LinearLayout) view
                .findViewById(R.layout.impresszum); 
```

相反，应该使用它：

```
View view = inflater.inflate(R.layout.impresszum, container, false); 
```

这一行的另一个修改：

```
((TextView) **view**.findViewById(R.id.impresszumtext1))
                        .setText(appName + " v." + versionName); 
```

我也找到了一些解释：如果我的想法是正确的，**首先我需要扩展布局以便能够使用“findViewById”访问对象**......这是偷偷摸摸的，因为 setcontentview() 为我们做了这个。

# jquery - 如何使用 JQuery inArray 检查不同的值是否不在数组中？

> ID：15202109
> 
> 赞同：0
> 
> 时间：2013-03-04T12:55:35.863
> 
> 标签：jquery, arrays

我编写了一些代码来检查数组是否存在，如果不存在，则创建一个名为 window.list

然后它检查数组是否包含 2 或 3 值，如果没有，则将它们添加到列表中。

如果它们已经在列表中，它会输出“值已经在列表中！” 然后突破功能。

当我执行代码时，它只识别检查 2 值的 inArray 的第一个子句。3 不起作用。我希望能够在未来添加更多价值。我不确定这是编写此查询的最有效方法。

```
if (typeof window.list == "undefined" || !(window.list instanceof Array)) {
    window.list = new Array;
}

if ($.inArray(2, window.list) == -1 || $.inArray(3, window.list) == -1) {
    window.list.push(presentationId);
} else {
    console.log("Value is already in the list!")
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:09:08.893

如果presentationID 是2 或3，为什么不试试这样的代码：

```
...
if ($.inArray(presentationID, window.list) == -1) {
    window.list.push(presentationId);
} else {
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:40:23.433

您可以合并数组并使用 jQuery 仅保留唯一值

```
window.list = [2,3];

window.list = $.merge(window.list, [2,3,7,2,60]);
window.list = $.unique(window.list);

//OUTPUT: window.list = [2,3,7,60]; 
```

[在这里提琴](http://jsfiddle.net/codepic/gFmqt/)

* * *

**或者，如果您想根据数组检查数组并对找到/未找到的实例进行操作。**你可以在这里制作一个简单的插件[Fiddle](http://jsfiddle.net/codepic/vbkEC/)

你的插件

```
(function ($) {
  $.fn.Contains = function(value, success, failure) {
      var arr = this;
      if(value instanceof Array){
          $(value).each(function(i,item){
              var found = $.inArray(item, arr) > -1;
              if (found){
                  success(item);
              } else {
                  failure(item);
              }
        });
      }
  };
})(jQuery); 
```

然后这样称呼它：

```
window.list = [2,3];

$(window.list).Contains([2, 3, 6, 7], function(foundValue){
    // Handle the foundValue here
    alert('found: ' + foundValue);
}, function(missingValue){
    // Handle the missingValue here
    alert('missing: ' + missingValue);
}); 
```

* * *

**或者，如果您想使用自定义插件通过一次调用将不同的值合并到一个数组**，您可以在此处执行以下[小提琴](http://jsfiddle.net/codepic/nkhQa/)：

```
// Your plugin to merge the distinct values
(function ($) {
  $.fn.MergeDistinct = function(value) {
      var arr = this;
      if(value instanceof Array){
          $(value).each(function(i,item){
              var found = $.inArray(item, arr) > -1;
              if (!found) arr.push(item);
        });
      }
      return arr;
  };
})(jQuery);

// Your list of items
window.list = [2,3];

// Merge the new values without creating duplicates
window.list = $(window.list).MergeDistinct([2, 3, 6, 7]);

//OUTPUT: window.list = [2,3,6,7]; 
```

# c# - 自定义 DocumentPaginator 和 DocumentViewer WPF

> ID：15202110
> 
> 赞同：0
> 
> 时间：2013-03-04T12:55:44.920
> 
> 标签：c#, wpf, pagination, documentviewer, xpsdocument

我有一个 custom `DocumentPaginator`，它创建一个包含一些值的表格，并在每页的开头重复表格标题。（与[此处](http://tech.pro/tutorial/888/wpf-printing-part-2-pagination)类似。）如何在其中显示由它生成的页面`DocumentViewr`？

我相信首先我需要创建一个`XpsDocument`. 所以我尝试使用`XpsDocumentWriter`：

```
var xpsw = XpsDocument.CreateXpsDocumentWriter(xpsDocument);
xpsw.Write(paginator); 
```

但它不起作用。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:37:41.277

事实证明，`Paginator.PageCount`被覆盖的属性没有正确实现。它曾经返回一个负数，因此`Paginator.GetPage`方法无法提供任何页面。

# java - Java 解析值直到行尾

> ID：15202113
> 
> 赞同：0
> 
> 时间：2013-03-04T12:55:52.717
> 
> 标签：java, regex, pattern-matching

简单的问题 - 可能 - 但我找不到没有解决方法的解决方案。

我想解析某事。喜欢

```
1) item1;; item3
2) item1;item2;
3) ; item2;
4) ;;
... 
```

我有一个匹配函数，它匹配并返回给定索引处的所有项目作为字符串列表：

```
public static List<String> getAllMatchings(String input, String reg, int groupIndex) {
    Pattern pattern = Pattern.compile(reg);     
    Matcher matcher = pattern.matcher(input);   

    List<String> ls = new ArrayList<String>();

    while (matcher.find()) {
        if (groupIndex <= matcher.groupCount()) {
            ls.add(matcher.group(groupIndex));
        }
    }

    return ls;
} 
```

现在，有了这样的一行，我想要一个像 {“item1”、“item2”、“item3”} 这样的字符串列表。但我得到 - 使用我的解决方案 - {“item1”，“item2”，“item3”，“”}：

```
List<String> strList = getAllMatchings(line, "([^;]*)(;|\\z)",1); 
```

因此，我必须做出一个丑陋的解决方法：

```
strList.remove(strList.size()-1); 
```

不太好。但我没有找到解决该问题的方法。有人能帮我吗？

**补充**：顺便说一句。在某些情况下，此解决方法不起作用。案例 4) 只给了我 2 个空元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:58:34.237

为什么不只用分号拆分？

更新：计算分号以确保正确的元素数量

```
int count = StringUtils.countMatches("item1;item2;;;;", ";");
String[] values = input.split(";",count); 
```

（需要[Commons Lang](http://commons.apache.org/lang/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:57:30.463

只有当它们不为空时，您才能添加项目：

```
String item = matcher.group(groupIndex).trim();
if (!item.isEmpty()) {
    ls.add(item);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:59:44.280

如果引号不是您的字符串的一部分，您可以`split`在 String 上使用该方法：

```
String input = "item1; item2; item3";
List<String> list = Arrays.asList(input.split("; "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T12:59:50.367

您可以过滤空字符串或 matcher.start/end 是否相等。

# c# - 无法在 Web 应用程序中获取连接/断开远程连接的 .net 套接字状态？

> ID：15202114
> 
> 赞同：1
> 
> 时间：2013-03-04T12:55:53.367
> 
> 标签：c#, asp.net, sockets

套接字编程、ASP.Net C#、VS2008

我正在尝试通过计时器控制每 5 秒确定远程（客户端）的状态是连接还是断开连接。每当我第一次启动服务器时，我得到的套接字状态是 connected=true。但是下次我得到套接字状态时为空。

注意：我通过创建类的对象来访问从类到 Aspx 页面的 Socket 状态。

这是我的代码：

页面：

```
 protected void Timer1_Tick1(object sender, EventArgs e)
{
Communication obj=new communication();
bool Rexits=obj.listen();
if(Rexits)
Response.write("Remote is On");
else
Response.write("Remote is Off");
}
**************************************************************************
Communication class:

Socket  listener=new Socket();
Socket connection;
  public bool listen()
        {
        listener.SetSocketOption(SocketOptionLevel.Socket,  

SocketOptionName.ReuseAddress, true);
        bool RemoteExits = false;
        try
        {

            if (connection== null)
            {
                listener.Bind(endPoint);
                listener.Listen(pendingConnectionQueueSize);
                listener.BeginAccept(AcceptConnection, null);
                RemoteExits = IsConnected(connection);

            }
            return  RemoteExits;
        }
        catch (Exception ex)
        {

            a = IsConnected(connection);
            return  RemoteExits;
         }
    }

//callback method

 protected void AcceptConnection(IAsyncResult res)
    {

       // Make sure listener doesn't go null on us.
        lock (this)
        {
           connection = listener.EndAccept(res);
           listener.BeginAccept(AcceptConnection, null);
        }

        // Close the connection if there are no handlers to accept it!
        if (Connected == null)
        {
            connection.Close();

        }
        else
        {
          TcpServer tc=new TcpServer();
           Clifton.TcpLib.ConnectionState cs=new    

Clifton.TcpLib.ConnectionState(connection,cs);
            OnConnected(new TcpServerEventArgs(cs));
        }
    }
//Poll Mehod
 public static bool IsConnected(Socket client)
    {
        try
        {

            bool connected = !(client.Poll(1, SelectMode.SelectRead) &&     

client.Available == 0);
            return connected;
        }
        catch
        {
            return false;
        }
    } 
```

# ios - 从 self 创建 NSMutableString 时出现 NSString+Extension 警告

> ID：15202116
> 
> 赞同：0
> 
> 时间：2013-03-04T12:55:53.940
> 
> 标签：ios, objective-c, nsstring, class-extensions

在我创建的 iphone 应用程序和 NSString 的扩展类中。

`NSString+Extensions.m`班级

在其中一种方法中，我需要将字符串转换为 NSMutableString。

我试着用这个：

```
NSMutableString * stringToManipulate = [NSMutableString stringWithString:self]; 
```

但它发出警告：

```
Incompatible pointer types sending 'const Class' to parameter of type 'NSString *' 
```

据我所知，self 是对我调用该方法的字符串的引用，对吧？那么为什么它不应该是 NSString* 类型呢？知道我可以对自己使用通常的 NSString 方法。

对这个问题有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:58:11.800

检查该方法是声明为类方法（带有 + 符号）还是实例方法（带有 - 符号）。如果是第一种情况，编译器警告是正常的。然后将方法转换为实例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:10:54.590

在 Objective-C 中，当您`self`在类方法中调用时，它会引用类对象。对于`NSString`类方法，调用`self`与调用[NSString类]是一样的。

因此，您的行与以下内容相同：

`NSMutableString * stringToManipulate = [NSMutableString stringWithString:[self class]];`

如果您将方法从类一（+ 符号）更改为对象一（- 符号），它将起作用，但您必须以不同的方式调用它（从`NSString`对象）。

如果您想进一步解释，您可以发布整个方法声明吗？您还可以查看 NSObject 协议参考以获取有关 +class 方法的更多信息：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)

希望这会有所帮助，

# android - appwidgetprovider 可以实现 onactivityresult 怎么用呢？

> ID：15202120
> 
> 赞同：0
> 
> 时间：2013-03-04T12:56:11.947
> 
> 标签：android

我需要在 appwidget 上使用 onactivityresult 但我该如何使用它？它不叫

公共类 MainActivity 扩展 AppWidgetProvider 实现 OnActivityResultListener { Context context;

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    this.context = context;
    for (int i = 0; i < appWidgetIds.length; i++) {
        int appWidgetId = appWidgetIds[i];
        Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
        intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
        PendingIntent pending = PendingIntent.getActivity(context, 0, intent, PendingIntent.PARCELABLE_WRITE_RETURN_VALUE);
        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.activity_main);

        views.setOnClickPendingIntent(R.id.imageButton1, pending);
        appWidgetManager.updateAppWidget(appWidgetId, views);
    }

}
@Override
public void onReceive(Context context, Intent intent) {
    super.onReceive(context, intent);
}

@Override
public boolean onActivityResult(int requestCode, int resultCode, Intent data) {} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:00:56.353

`onActivityResult()`仅适用于`Activity`及其子类。那是因为`startActivityForResult()`仅在`Activity`及其子类上可用。

# ruby-on-rails - Rails 使用单例类语法在类方法中自动加载同名类

> ID：15202128
> 
> 赞同：1
> 
> 时间：2013-03-04T12:56:33.300
> 
> 标签：ruby-on-rails, ruby, autoload

假设我在 Rails 应用程序的不同模块（全局命名空间/无命名空间和“Foo”）中有两个同名的类（“Bar”）。这两个类分别位于“app/models/bar.rb”或“app/models/foo/bar.rb”中，因此由rails自动加载。

```
# "app/models/foo/bar.rb"
module Foo
  class Bar
    def self.some_method
    end
  end
end

# "app/models/bar.rb"
class Bar
end 
```

我在 Foo 命名空间中有另一个类，它在类方法中使用 Bar 类。

```
module Foo
  class Qux
    class << self
      def something
        Bar.some_method # This raises a NoMethod error because
                        # it uses the Bar defined in the global namespace
                        # and not the one in Foo
      end
    end
  end
end 
```

Rails 自动加载尝试使用单例类中的当前类加载 Bar `name`，`nil`默认为“Object”。

```
klass_name = name.presence || "Object"  # from active_support/dependencies.rb 
```

这会导致 Rails`Bar`从“app/models/bar.rb”而不是“app/models/foo/bar.rb”加载。如果我`Qux.something`用`def self.something`then定义`.name`是 "Foo::Qux" 而不是 nil 并且自动加载正常工作。

我目前看到 3 个选项可以解决此问题：

1）重命名其中一个`Bar`类
2）在`self.`任何地方都使用语法
3）在任何地方`Bar`都`Foo::Bar`显式地 命名空间

我不喜欢这些选项中的任何一个，因为：

1)`Bar`只是最适合的名称
2)`class << self`本身非常好，并且被大多数 ruby​​ 开发人员使用，所以下一个可怜的人很快就会再次遇到同样的问题的可能性很高
3) 与 2) 相同，它没有并没有真正解决潜在的“问题”，将来有人会浪费一些时间来弄清楚为什么他的代码不能按预期工作。

您能想到其他更好的选择吗？

# c# - 如何创建一个自动执行的扩展

> ID：15202131
> 
> 赞同：0
> 
> 时间：2013-03-04T12:56:47.013
> 
> 标签：c#, wpf, automation, wpf-controls, extension-methods

是否可以创建一个自动调用或执行的扩展？

.

## 以下情况

我有一个`System.Windows.Control`应该在初始化后执行一些逻辑而不调用这个扩展手册`Control.myExtension();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:21:27.093

将我的评论转换为答案：

[类级事件处理程序](https://stackoverflow.com/questions/5364580/class-level-event-handler-in-wpf)

但是，这取决于您想要什么，这可能是一个好主意，也可能不是一个好主意。

# javascript - 将属性转移到对象方法中的事件函数

> ID：15202132
> 
> 赞同：0
> 
> 时间：2013-03-04T12:56:54.890
> 
> 标签：javascript, events, properties

我正在尝试获取对象属性并将其转移到按键事件中 - 问题是您只能添加事件本身并且使用 this.x_point 在子函数中不起作用。这是我的代码。我也可以将 this.x_point 转移到 var.x_point 然后使用它，但这完全破坏了它作为对象的意义。

```
function ninja(name, speed){
this.name = name;
this.speed = speed;
this.x_point = 0;
this.y_point = 0;
loadImages("n_main", 0, 0);
loadImages("n_armL", -5, 8);
loadImages("n_armR", 25, 8); 
```

}

```
ninja.prototype.move = function(){
window.addEventListener("keydown", keyPress, false);
function keyPress(e){
    if(e.keyCode == 68){ //d
        alert(this.x_point);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:01:27.743

您可以为此使用绑定：

```
ninja.prototype.move = function(){
window.addEventListener("keydown", keyPress.bind(this), false);
function keyPress(e){
    if(e.keyCode == 68){ //d
        alert(this.x_point);
    }
} 
```

或者，如果您使用 jQuery，请尝试使用 jQuery.proxy(keyPress, this)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:59:58.570

例如，如果您使用`that`：

```
ninja.prototype.move = function(){
 var that = this;
 window.addEventListener("keydown", keyPress, false);
 function keyPress(e){
  if(e.keyCode == 68){ //d
    alert(that.x_point);
 }
} 
```

# android - 通知未在 2.3.6 上显示

> ID：15202137
> 
> 赞同：-1
> 
> 时间：2013-03-04T12:57:25.220
> 
> 标签：android, notifications

我的程序正在从服务调用此代码以显示通知：

```
NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(this).setSmallIcon(icon)
        .setContentTitle("BU").setOngoing(true).setContentText("BU is the biggest!!!");
  mNM.notify(mNotificationId, mBuilder.build()); 
```

它正在使用具有 4.1+ 版本的 Galaxy S-III，但它无法正常工作，也不会在 android v2.3.6 上出现错误。

我已经阅读了 api，但我可能会错过一些东西。有什么问题，我该如何解决？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:09:30.777

试试[Notification Compat 2](https://github.com/JakeWharton/NotificationCompat2)。它已被开发用于处理此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:09:55.553

试试这个代码，因为这对我有用（2.2 及更高版本）。我在我创建的单独服务类中运行此方法。发现没有后台服务我的通知不起作用。

```
 final NotificationManager manager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    final Notification notification = new Notification(R.drawable.notification_popup, message, System.currentTimeMillis());

    // used to call up this specific intent when you click on the notification
    final PendingIntent contentIntent = PendingIntent.getActivity(context, 0, 
            new Intent(context, MyActivity.class), Notification.FLAG_AUTO_CANCEL);

    notification.setLatestEventInfo(context, title, message, contentIntent);
    notification.defaults = Notification.DEFAULT_ALL;
    manager.notify(new Random(100).nextInt(), notification); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:10:03.660

来自官方文档[Android](http://developer.android.com/reference/android/app/Notification.Builder.html)

> > 此类需要 API 级别 11 或更高级别。
> 
> This document is hidden because your selected API level for the documentation is 10\. You can change the documentation API level with the selector above the left navigation.
> 
> For more information about specifying the API level your app requires, read Supporting Different Platform Versions.

to confrim this select api level 10 from left side on the [page](http://developer.android.com/reference/android/app/Notification.Builder.html) you will get this dialog poped up

# c++ - C++简单迭代中list over map的性能比较

> ID：15202141
> 
> 赞同：1
> 
> 时间：2013-03-04T12:57:38.027
> 
> 标签：c++, algorithm, stl

我有一张清单和一张地图。它们中的每一个都包含相同的元素，只是在地图中，它由一个整数索引（我认为这与这个问题无关）。如果我从`container.begin()`to进行简单的迭代`container.end()`，列表和地图之间的复杂性会有所不同吗？list 和 map 之间的实际性能会有差异吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T13:00:49.207

该标准要求迭代器为 摊销常数复杂度`operator++`，因此复杂度没有差异。

几乎可以肯定，实际花费的时间会有所不同。`map`如果它们完全相同，那将是某种巧合（或不寻常的实现）。差异可能很小。

# java - 如何更改 JXGraph 网格线的粗细

> ID：15202142
> 
> 赞同：1
> 
> 时间：2013-03-04T12:57:43.383
> 
> 标签：java, swing, grid

我想用 JXGraph 组件制作方格纸。我使用 JXGraph 的下一个方法来创建网格线：`setMajorX`, `setMinorCountX`, `setMajorY`, `setMinorCountY`as `(1.0, 10, 1.0, 10)`。最后，我得到了一个不正确的网格：

[网格 http://img29.imageshack.us/img29/5761/graphuv.png](http://img29.imageshack.us/img29/5761/graphuv.png)。

我有两个问题：

*   有没有办法显示相同的单元格？

*   是否可以更改次要线条和主要线条的粗细？

在 JXGraph 中，线的粗细定义为：

```
private static final float STROKE_AXIS = 1.2f; 
private static final float STROKE_GRID = 1.0f; 
```

# perl - 创建数组哈希：显示数组引用

> ID：15202144
> 
> 赞同：0
> 
> 时间：2013-03-04T12:57:48.333
> 
> 标签：perl

下面是我的代码（只是玩哈希），我想在其中创建数组的哈希（分配给数组的键）。但我将输出作为数组引用。为什么显示此数组引用？

```
 #!/usr/bin/perl
 my @result = (0,0,0);
 my @operator = ('AP', 'MP', 'UP');
 my %operator_res;

 for ( $i = 0; $i <= $#operator; $i++ ) {
     if ( $i == 2 ) {
         @result = (4,5,6);
     } elsif ( $i == 1 ) {
         @result = (1,2,3);
     }
     @{$operator_res{$operator[$i]}} = @result;
 }
 foreach $keys (%operator_res) {
     print "$keys:";
     #print "@{$operator_res{$keys}}\n";
     print "$operator_res{$keys}[0], $operator_res{$keys}[1], $operator_res{$keys}[2]\n";
 } 
```

输出是

```
UP:4, 5, 6
ARRAY(0x17212e70):, ,   Why is this array reference printing?
AP:0, 0, 0
ARRAY(0x17212e00):, ,
MP:1, 2, 3
ARRAY(0x17212e20):, , 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T13:04:25.113

```
foreach $keys (%operator_res) 
```

应该

```
foreach $keys (keys %operator_res) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:11:16.333

您的`foreach`循环遍历 的每个元素`%operator_res`，而不仅仅是键。正如 ikagim 已经回答的那样，您必须使用`keys`仅获取散列的键。

如果你看一下`Data::Dumper`输出`%operator_res`是：

```
$VAR1 = 'UP';
$VAR2 = [
          4,
          5,
          6
        ];
$VAR3 = 'AP';
$VAR4 = [
          0,
          0,
          0
        ];
$VAR5 = 'MP';
$VAR6 = [
          1,
          2,
          3
        ]; 
```

如您所见，每个元素将始终获得两次迭代：一次用于键，一次用于数组 ref。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:04:14.337

Perl 中的哈希值必须是标量。要模拟多维散列，请使用对散列或数组的*引用的值。*

线

```
@{$operator_res{$operator[$i]}} = @result; 
```

在你的问题中相当于

```
$operator_res{ $operator[$i] } = [ @result ]; 
```

也就是说，此时与键关联的值`$operator[$i]`是对内容相同的新数组的*引用*`@result`。

对于许多示例，请阅读[perllol 文档](http://perldoc.perl.org/perllol.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T13:05:03.823

您可以使用 Data::Dumper 以格式良好的方式打印出您的数据：

```
use Data::Dumper;
print Dumper(\%operator_res); 
```

问：为什么要打印这个数组参考？

A：因为这一行： print "$keys:";

# java - 如果组合框的值保持空白，则必须插入 MS Access

> ID：15202145
> 
> 赞同：0
> 
> 时间：2013-03-04T12:57:51.800
> 
> 标签：java, ms-access, ms-access-2010

我在数据库中有 4 列，我必须在这些列中插入组合框项。我尝试了下面的代码，但它仅在插入组合框中的 4 个项目时才有效。如果我只将 2 个项目插入组合框，那么剩余的两个必须插入 NULL。

```
if(e.getSource()==btn_save)
{
try{

     Connection con;

     DriverManager.registerDriver(new sun.jdbc.odbc.JdbcOdbcDriver());

     Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

     con = DriverManager.getConnection("jdbc:odbc:dsnproj","","");

     Statement s1 = con.createStatement();

     String q1="insert dest,route1,route2,route3,route4 into trans_dest values(
                '"+cmb_dest.getSelectedItem()+"',
                '"+cmb_route.getItem(0)+"',
                '"+cmb_route.getItem(1)+"',
                '"+cmb_route.getItem(2)+"',
                '"+cmb_route.getItem(3)+"')";

     s1.execute(q1);

     }

     catch(Exception ae)
     {
         System.out.println(ae);
     }
  }
} 
```

当我插入两个项目并且两个项目保持空白时，我收到此错误：

> java.lang.ArrayIndexOutOfBoundsException: 3 >= 2
> java.lang.StackTraceElement;@1d8957f

# php - javascript中的php vars

> ID：15202153
> 
> 赞同：0
> 
> 时间：2013-03-04T12:58:08.387
> 
> 标签：php, javascript

我有一些代码来记录某个动作

```
$('#record').click(function(){
$.get("../confirm.php", { "id": '<?php echo $record; ?>' }, function(data){});
}); 
```

哪个工作正常，但我不希望页面充满javascript，比如我也有其他类似的东西，所以我试图将它移动到一个js文件。

在 php 文件中

```
<script type="text/javascript">var record = "<?= $record ?>";</script>
<script type="text/javascript" src="jsfile.js"></script> 
```

在js文件中

```
$('#record').click(function(){
$.get("../confirm.php", { id: record}, function(data){});
}); 
```

但它不想打球，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:17:10.917

将“记录”作为 div 的类并将 php 变量 $record 分配为其 id。使用 event.target.id 从 div 获取变量 $record。

```
<div class="record" id="<?php echo $record;?>">
 Your code here
</div> 
```

并使用这个 $('.record').click(function(event){ var record=event.target.id; //你的代码在这里 });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:04:10.210

如果我可以给你一个建议。在视图上设置元素的 ID。然后当点击动作时，获取数据的 id。

例子：

```
<input type="text" name="inputName" id="<?php echo $record; ?>" class="btnToRecord" />

$('.btnToRecord').click(function(){
    var clickedElement = $(this);
    $.get("../confirm.php", { id: clickedElement.attr("id") }, function(data){});
}); 
```

编辑：对 $(this) 的更正指向 get 而不是指向元素，放入 var 将解决问题

# google-drive-api - 通过 Google Drive API 获取共享链接

> ID：15202163
> 
> 赞同：25
> 
> 时间：2013-03-04T12:58:58.827
> 
> 标签：google-drive-api

我正在使用 Google Drive 开发一个应用程序。我希望用户能够通过链接共享文件，并将权限设置`anyone`为`withLink`Google [Developers 文档](https://developers.google.com/drive/v2/reference/permissions/insert)中所述。

但是，我无法弄清楚要分享什么链接。当我在 Google Drive 浏览器界面中共享文件时，我看到`Link to share`的格式如下：

[https://docs.google.com/presentation/d/[...]/edit?usp=sharing](https://docs.google.com/presentation/d/[...]/edit?usp=sharing)

这种格式的链接不是文件资源对象的一部分，也不是从设置权限的 http 调用返回的。我希望有人可以向我解释如何通过 REST api 获取此链接？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-05T05:53:31.697

您可以使用`alternateLink`File 资源中的属性来获取可以共享的链接，以便在相关的 Google 编辑器或查看器中打开文件：

[https://developers.google.com/drive/v2/reference/files](https://developers.google.com/drive/v2/reference/files)

### 更新

[使用 API V3]( [https://developers.google.com/drive/api/v3/reference/files](https://developers.google.com/drive/api/v3/reference/files)建议使用该`webViewLink`属性。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-02-26T20:31:40.767

要使用[Google Drive API](https://developers.google.com/drive/api/v3/quickstart/nodejs)实际**启用链接共享**：

```
drive.permissions.create({
  fileId: '......',
  requestBody: {
    role: 'reader',
    type: 'anyone',
  }
}); 
```

使用以下方法获取`webLinkView`值：

```
const webViewLink = await drive.files.get({
    fileId: file.id,
    fields: 'webViewLink'
}).then(response => 
    response.data.webViewLink
); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-23T13:50:18.047

在我使用 PHP Api v3 的情况下，要使链接不为空，您必须定义您请求此字段......并且如果您拥有正确的权限：

所以是这样的：

```
$file =self::$service->files->get("1ogXyGxcJdMXt7nJddTpVqwd6_G8Hd5sUfq4b4cxvotest",array("fields"=>"webViewLink")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-07T15:02:45.990

这是一个关于如何获取**WebViewLink**文件属性（AKA*文件编辑链接*）的实际示例：

```
$file = $service->files->get($file_id, array('fields' => 'webViewLink'));
$web_link_view = $file->getWebViewLink(); 
```

或者

```
$sheetsList = $drive_service->files->listFiles([
  'fields' => 'files(id, name, webViewLink, webContentLink)',
]);

$web_link_view = $sheetsList->current()->getWebViewLink(); 
```

Pay attention that you should load the file specifying which fields you wanna bring with it (In this case, `webViewLink`). If you don't do that, only `id` and `name` will be available.

In case you need to adjust the file sharing settings, this is how you do it:

```
$permissions = new \Google_Service_Drive_Permission();
$permissions->setRole('writer');
$permissions->setType('anyone');

$drive_service->permissions->create($file_id, $permissions); 
```

Possible values for `setRole()` and `setType()` can be found here: [https://developers.google.com/drive/api/v3/reference/permissions/create](https://developers.google.com/drive/api/v3/reference/permissions/create)

# apache-flex - tinymce 弹出窗口在 Adob e flex air 应用程序中不起作用

> ID：15202164
> 
> 赞同：1
> 
> 时间：2013-03-04T12:59:03.593
> 
> 标签：apache-flex, tinymce, adobe

[我从http://coderscollective.com/code_samples.aspx?page_id=620](http://coderscollective.com/code_samples.aspx?page_id=620)下载了这个 flex air 应用程序 。tinymce richTextEditor 确实出现在 swif 中。但是，当单击所有 tinymce 弹出窗口时，什么也没有发生。任何想法 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:02:59.937

以防万一：这似乎是由于空中运行时强加的安全沙盒限制而发生的。

此链接解释了一些避免这些问题的技术：http: [//help.adobe.com/en_US/AIR/1.5/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7f0e.html#WS5b3ccc516d4fbf351e63e3d118666ade46-7ef8](http://help.adobe.com/en_US/AIR/1.5/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7f0e.html#WS5b3ccc516d4fbf351e63e3d118666ade46-7ef8)。

示例（在表格插件中，我必须修改验证列表器，如下所示：document.getElementById("insert").addEventListener("click", function() { insertTable();return
false; });

# php - 我应该如何在 php 脚本中比较两种不同的产品价格？

> ID：15202169
> 
> 赞同：1
> 
> 时间：2013-03-04T12:59:17.353
> 
> 标签：php, mysql, xhtml, phpmyadmin

`$comapre`是一个具有从上一页传递的唯一产品 ID 的数组。所以在下一页中，我想使用它查看数据库`productid`，获取信息并比较与每个`productid`来自`array($compare)`.

到目前为止，我可以使用`productid`from `$compare(array`) 以以下格式显示相关产品信息

产品ID | 产品名称| 价格 |
20_ ***_* __ *_* _** |****__iphone5_ *_*** |_529 |**

 **我正在使用代码：

```
foreach($compare as $value) {

   $query = mysql_query("SELECT * FROM `product_info` WHERE `productid`=".$value.""); 
    echo "<table border='1' bordercolor='#000066'> 
                <tr>
                    <th>productid</th>
                    <th>product name</th><br />
                    <th>price</th> 
                </tr>"; 

    while ($query_row=mysql_fetch_assoc($query)) {
        echo "<tr bgcolor='#F5FFFF'>";
            echo "<td>". $query_row['productid']. "</td>";
            echo "<td>". $query_row['title']. "</td>";
            echo "<td>". $query_row['price']."</td>";
        echo "</tr>";
    }           
    echo "</table>";    
} 
```

请给我任何建议如何比较每种产品的价格，并说“productA比*productB*便宜”，类似的东西也可以。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:21:29.307

UNRELATED - 你可以通过使用 mysql 的 IN 子句摆脱那个 foreach 循环。

```
$query = mysql_query("SELECT * FROM `product_info` WHERE `productid` IN (.join(",", $value).")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:24:01.493

将价格移动到一个新数组中，比如 product_prices[]。

```
$product_prices['$productID'] = $query_row['price']; 
```

然后，您可以通过增加/减少价格顺序对该数组进行排序，然后在各个键之间减去价格。

如何使用 product_prices 数组完全取决于您和您拥有的用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:45:44.680

```
 SELECT * FROM your_table WHERE price_a <= price_b; 
```**

# android - Android - 忽略 Catch 条款？

> ID：15202173
> 
> 赞同：0
> 
> 时间：2013-03-04T12:59:30.253
> 
> 标签：android, try-catch, notepad

可以忽略“catch”子句吗？我有这段代码，我想做的是扫描所有包含特定字符串的单词并将它们存储在 String res 中。

但是我现在拥有的代码不会遍历循环，因为它会在“catch”子句中断时停止。有没有办法忽略 catch 子句，让“try”继续循环，直到它到达文件末尾？

```
String delimiter = " - ";
String[] del;
String res = new String();

if(curEnhancedStem.startsWith("a"))
{
InputStream inputStream = getResources().openRawResource(R.raw.definitiona); 
try {
      BufferedReader in = new BufferedReader(new InputStreamReader(inputStream));
      String s = in.readLine();
      while(s != null)
        {
             s = in.readLine();
             del = s.split(delimiter);
             if (del[0].contains(curEnhancedStem))
             {
                 res = res + s + "\n\n";
             }
        }
          return res;
    }
    catch (Exception e) {
                // nothing to do here
            }   
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:06:38.343

如果您真的希望它在发生错误后继续在内循环中，您可以在其中放置另一个 try 块。

```
String delimiter = " - ";
String[] del;
String res = new String();

if(curEnhancedStem.startsWith("a"))
{
InputStream inputStream = getResources().openRawResource(R.raw.definitiona); 
try {
  BufferedReader in = new BufferedReader(new InputStreamReader(inputStream));
  String s = in.readLine();
  while(s != null)
    {
         try {
             s = in.readLine();
             del = s.split(delimiter);
             if (del[0].contains(curEnhancedStem))
             {
                 res = res + s + "\n\n";
             }
         }
         catch (Exception e) {
            // Error in string processing code (as opposed to IO) - Don't care... Continue
        }   
    }

    }
    return res;
}
catch (Exception e) {
        // nothing to do here
        }   
    } 
```

另一个想法是使用更具体的异常——不仅仅是一般的捕获所有异常

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T13:02:36.987

我觉得你一定会在里面出现异常，所以试试这个。

```
 try {
  BufferedReader in = new BufferedReader(new InputStreamReader(inputStream));
  String s = in.readLine();
  while(s != null)
    {
     try{
         s = in.readLine();
         del = s.split(delimiter);
         if (del[0].contains(curEnhancedStem))
         {
             res = res + s + "\n\n";
         }
        } catch(Exception e){
            // Do Something
      }
    }
      return res;
}
catch (Exception e) {
            // nothing to do here
        }   
    } 
```

如果您遇到异常，它将在循环内处理，但您的循环将继续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T13:04:06.193

`catch`您的条款中没有任何内容。尝试添加类似下面的 for`while`循环（将其保留在`try`块中）以及找出`exception`你得到的内容：

```
catch(Exception e)
{
   Log.e("Exception here: "+ e.getMessage());
} 
```

# php - 每个成员组的 PHP 和 MySQL 限制区域

> ID：15202175
> 
> 赞同：0
> 
> 时间：2013-03-04T12:59:35.903
> 
> 标签：php, mysql, permissions

我有一个表 $members 有 4 个列（$id、$username、$password、$usergroup），意思是（1、john、123、admin）。我喜欢用户组管理员可以访问一个页面，而用户组成员和访客没有它。

这是我在索引页面上的登录表单：

```
 <table width="300" border="0" align="center" cellpadding="0" cellspacing="1"      bgcolor="#CCCCCC">
 <tr>
 <form name="form1" method="post" action="checklogin.php">
 <td>
 <table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
 <tr>
 <td colspan="3"><strong>Member Login </strong></td>
 </tr>
 <tr>
 <td width="78">Username</td>
 <td width="6">:</td>
 <td width="294"><input name="myusername" type="text" id="myusername"></td>
 </tr>
 <tr>
 <td>Password</td>
 <td>:</td>
 <td><input name="mypassword" type="password" id="mypassword"></td>
 </tr>
 <td>&nbsp;</td>
 <td>&nbsp;</td>
 <td><input type="submit" name="Submit" value="Login"></td>
 </tr>
 </table>
 </td>
 </form>
 </tr>
 </table> 
```

这是我的 checklogin.php

```
<?php
////// 
////// Checks for members 
//////
$host="localhost"; // Host name 
$username="#"; // Mysql username 
$password="#"; // Mysql password 
$db_name="#"; // Database name 
$tbl_name="members"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword'];  

// encrypt password 
$encrypted_mypassword=md5($mypassword);
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and                password='$encrypted_mypassword'";
$result=mysql_query($sql);

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "manage-post.php"
session_register("myusername");
session_register("mypassword"); 
header("location:../admincp/manage-post.php");
}
else {
echo "Wrong Username or Password";
}
?> 
```

这放置在我的每个页面上，以检查一个人是否已登录并允许访问已登录的用户并限制访问未登录的用户：

```
<?php
////////
//////// Checks are you logged in or logged out
////////
session_start();
if(!session_is_registered(myusername)){
header("location:main_login.php");
}
?> 
```

那么上面最后一段代码中应该调整什么，以便某些页面只允许具有 $usergroup = admin 的成员并阻止具有 $usergroup = member 或 guest 的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:09:54.333

将 $usergroup 存储在 SESSION 中。
`$_SESSION['usergroup']=$usergroup` 在这段代码中，只需添加您想要的条件， `if($_SESSION['usergroup']==admin) { //condition }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:18:18.027

将权限列添加到您的表中，将（管理员、经理）权限分配给您希望他们有权访问的成员。然后添加会话权限变量：

```
/* in login validation form */   
$data = mysql_fetch_array($results);
$priv = $data['privilege'];

$(!$_SESSION){
$_SESSION(start);
$_SESSION['user'] = $myusername;
$_SESSION['priv'] = $priv;
}
/* in the file which you want to restrict access to */
if($_SESSION['priv'] != 'manager' || $_SESSION['priv'] != 'admin'){
header("location:main_login.php");
} 
```

# javascript - 是否有任何可靠的插件可用于在移动设备上进行跨浏览器 div 滚动，还是我需要自己扮演角色？

> ID：15202176
> 
> 赞同：1
> 
> 时间：2013-03-04T12:59:37.073
> 
> 标签：javascript, jquery, html, mobile

我正在寻找一种在移动设备上进行跨浏览器 div 滚动的可靠方法。任何解决方案都需要在 Android、IOS 和 Windows 手机上得到支持。

我在寻找圣杯吗？创建自己的解决方案对我来说是最好的，还是我在尝试不可能的事情？

# c - C 编程开关盒

> ID：15202179
> 
> 赞同：-3
> 
> 时间：2013-03-04T12:59:50.333
> 
> 标签：c, switch-statement, case, if-statement

C 编程

如何更改此 if else 条件以切换案例？

```
 if(n >= 10 && n <= 20){price=2.00;}
    else if(n > 20){price=3.00;}
    else {price=1.00;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:02:37.453

你不能，至少不能以任何有意义的方式改进代码。当案例数量有限并且值本身有意义时，切换是最好的。

由于您的代码有两个“开放式”案例（`n > 20`和`else`，ie `n < 10`），因此您无法使用`switch`仅支持一个这样的包罗万象的`default`案例来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:06:02.300

这不可以。switch 语句中的 case 参数只能是精确值，不接受比较

# java - Java抽象类实现了一个接口，两者具有相同的方法

> ID：15202185
> 
> 赞同：5
> 
> 时间：2013-03-04T13:00:09.403
> 
> 标签：java, oop, interface, abstract-class, multiple-inheritance

在查看一些 OOP 资料时，我想到了一个让我有点困惑的问题：

考虑具有以下接口、抽象类和具体类：

```
package one;

public interface A {

    void doStuff();
}

package one;

public abstract class B implements A {

    public abstract void doStuff();

}

class C extends B{

    public void doStuff() {

    }
 } 
```

**C**类不会编译，除非它提供了 method 的实现`doStuff()`。这里的问题：

1-`doStuff()`类**C**中的方法是接口**A**的方法的实现，还是用于类**B**中的抽象方法？更具体地说：JVM如何将函数视为接口或抽象类的调用函数？

2-`doStuff()`抽象类**B**`doStuff()`中的抽象方法是否被认为是接口**A**中方法的“实现” ？所以这使得**C**类必须实现抽象类的版本`doStuff()`而不是接口的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T13:33:49.110

对于问题 #1：类 C 中的 doStuff 方法是对 B 和 C 的 doStuff 方法声明的实现。因为抽象类 B 和接口 A 中的 doStuff 方法声明具有彼此相同的签名。实际上，如果 B 实现了 C，则不需要再次声明 doStuff 方法。

对于问题 #2：不，B 中的 doStuff 只是一个声明，而不是方法实现。如果B没有方法实现或额外的方法声明，则不需要B类。抽象类基本上是一种包含高级逻辑的模板，以方便其子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:45:09.983

例如 B 类，C.doStuff() 覆盖 B.doStuff() 并实现 A.doStuff()。java中的所有方法都是虚拟调用的。事实上，对于用户来说，C.doStuff() 是否覆盖 B 的方法或 A 的方法是没有区别的。对于 jvm，它会有所不同，因为基于接口的调用与基于类的调用不同。

**UPD：**这取决于您从中调用的链接类型。javac会生成不同的opcode：[invokevirtual](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.10.1.9.invokevirtual)或[invokeinterface](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.10.1.9.invokeinterface)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T18:21:06.617

在一个接口中，所有方法都是`public`and `abstract`。

知道了这一点，接口A的doStuff*其实* `public abstract void doStuff()`就是. 这应该看起来很熟悉，因为抽象类 B 具有相同的方法签名。

回答问题 1，B 类`doStuff()`与接口 A*相同*`doStuff()`。由于 Java 中的所有方法都是[虚拟](http://en.wikipedia.org/wiki/Virtual_function)`doStuff()`的，因此无论您的 C 被声明为 A、B 还是 C ，调用都是相同的。

至于问题2，没有。B`doStuff()`是冗余代码，实际上并没有做任何事情。`doStuff()`无论 B 是否声明， C 都在执行`doStuff()`A。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T13:08:00.743

如果您删除

```
 public abstract void doStuff(); 
```

在你的抽象类中，继承这个类的孩子必须实现这个方法。

尝试在 B 类中删除此方法，并在 C 类中查看结果

[请参阅http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)中的抽象类实现接口部分

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T13:40:52.450

我认为您正在寻找的解释可以在[这里](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)找到。

问题 1：C 类中的方法实现了两者。但是由于它只扩展了 B，它只需要实现 B 抽象方法和未实现的接口。

问题2：它不被认为是一种实现。抽象类不必实现所有接口方法。C 类中的实现是强制性的（即使 B 类中没有抽象类）。

# javascript - 多行 jquery 工具提示

> ID：15202186
> 
> 赞同：1
> 
> 时间：2013-03-04T13:00:12.643
> 
> 标签：javascript, jquery, html, css

如何使自定义 jquery 工具提示显示为调整为固定宽度的多行？所以它不会排成一行（如果'title'属性很长）。因为现在如果我写长的'title'属性，工具提示会显示在一条长线上，并且设置工具提示元素的宽度无关紧要。

我的代码可以更好地理解我的要求：

[http://jsfiddle.net/8XttH/](http://jsfiddle.net/8XttH/)

jQuery代码：

```
$(document).ready(function() {
  $("body").append("<div class='tip'></div>");
  $("p[title]").each(function() {
      $(this).hover(function(e) {
        $().mousemove(function(e) {
            var tipY = e.pageY + 16;
            var tipX = e.pageX + 16;
            $(".tip").css({'top': tipY, 'left': tipX});
         });
      $(".tip")
        .html($(this).attr('title'))
        .stop(true,true)
        .fadeIn("fast");
        $(this).removeAttr('title');
    }, function() {
      $(".tip")
        .stop(true,true)
        .fadeOut("fast");
         $(this).attr('title', $(".tip").html());
    });
  });   
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:03:29.877

`max-width`在工具提示框上设置一个？

```
max-width: 100px; 
```

还将高度设置为自动，以便根据需要增加

```
height: auto; 
```

然后文本将换行到下一行。

看到这个[小提琴](http://jsfiddle.net/8XttH/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:04:22.607

用这个`css`

```
div.tip{
  position: absolute;
  top: 100px;
  left: 100px;
  width:100px;

  border: 2px solid #FF0000; 
  background-color: #FF9999;
  display: none;
  padding: 3px;
} 
```

小提琴：http: [//jsfiddle.net/8XttH/2/](http://jsfiddle.net/8XttH/2/)

# javascript - MooTools：父对象调用子方法

> ID：15202188
> 
> 赞同：0
> 
> 时间：2013-03-04T13:00:18.170
> 
> 标签：javascript, mootools

我正在开始一个项目，我将主要为 Web 应用程序开发前端 GUI，并决定使用 MooTools 而不是 jQuery，因为它具有更好的 OOP 功能。但是，在进行测试时，从我作为 Java 开发人员的角度来看，我遇到了一些奇怪的事情。这是问题所在：

```
var Parent = new Class({
    initialize: function() {
        console.log("Parent constructor call!");
    },
    show: function() {
        console.log("From Parent!");
    },
    someParentMethod: function() {
        console.log("Some parent method");
        this.show();
    }
});

var Child = new Class({
    Implements: Parent,
    initialize: function() {
        console.log("Child constructor call!");
    },
    show: function() {
        console.log("From Child!");
    },
    display: function() {
        this.show();
        this.someParentMethod();
    }
});

var c = new Child();
c.display(); 
```

其输出内容如下：

```
Parent constructor call!
Child constructor call!
From Child!
Some parent method
From Child! 
```

现在我在这里有点困惑......最后一行不应该是“来自父母！”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:11:22.523

不，这就是多态应该如何工作的。即使您正在调用在 Parent 类中定义的方法，您仍然在 Child**实例**中，因此将调用 Child 中的覆盖方法。

# php - 从 SQL db 获取顶级标签

> ID：15202189
> 
> 赞同：-1
> 
> 时间：2013-03-04T13:00:21.840
> 
> 标签：php, sql

我有下表：

```
id tag   imgID ts
1  funny   1   2013-03-03 09:56:56
1  boring  5   2013-03-03 09:56:56
1  cute    3   2013-03-03 09:56:56
1  funny   67   2013-03-03 09:56:56 
```

对于图像的标签。所以这是我能想到的最好的解决方案，所以每当添加一个标签时，就会在这个表上添加一个新行。所以可能有很多行带有许多相同的标签。我要做的是在主页上显示前十个最常用的标签。所以如果有很多有趣的标签，而且很流行，我希望它是第一。我怎样才能用 SQL 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:02:57.053

用于`GROUP BY`按标签对所有行进行分组，然后在表格中按频率顺序列出它们。

```
SELECT tag
FROM theTable
GROUP BY tag
ORDER BY COUNT(*) DESC
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:02:50.447

通过分组和计数：

```
SELECT    tag, COUNT(*) occurrences
FROM      yourtable
GROUP BY  tag
ORDER BY  occurrences DESC 
```

然而，在字符串列上执行`GROUP BY`语句并不是一个很好的解决方案。您应该标准化您的数据库结构并将标签提取到单独的表中。

# session - H2 数据库 WebServer 会话超时

> ID：15202190
> 
> 赞同：3
> 
> 时间：2013-03-04T13:00:23.033
> 
> 标签：session, webserver, timeout, h2

如何更改 H2 数据库 WebServer 的会话长度？我仅将它用于本地机器上的开发，默认的 30 分钟会话长度太短，因为它经常超时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:52:05.130

恐怕您需要更改 H2 的源代码，因为会话超时是硬编码的。类是`org.h2.server.web.WebServer`，常量是`SESSION_TIMEOUT`。

在 H2 的下一个版本中，这将是可配置的。

# java - 从源代码中检索 ResourceBundle Java .properties

> ID：15202192
> 
> 赞同：0
> 
> 时间：2013-03-04T13:00:27.167
> 
> 标签：java, properties, resourcebundle

我想编写一个脚本，通过扫描源代码来列出要翻译的 Java 属性文件（即由 ResourceBundle 使用）。

只是想知道它是否可以通过正则表达式模式完成，还是只能从运行时获得？

# xpages - 使用 XPage 需要 Freemarker 帮助

> ID：15202195
> 
> 赞同：1
> 
> 时间：2013-03-04T13:00:40.510
> 
> 标签：xpages, velocity, freemarker

我想在我的 XPages 应用程序中使用 Freemarker 模板引擎，但无法让它在 XPages 环境中工作。我遇到的问题与我不知道如何正确设置的模板路径有关。Freemarker 只是假设模板位于文件系统的某个位置。我将模板文件放入与相关 java 类存在的目录相同的目录中。这种文件的路径是这样的`xspnsf://server:0/xpages_tests.nsf/WEB-INF/classes/tcl/`，对我不起作用。有没有人有这方面的经验？我只需要 File() 构造函数接受的 nsf 目录路径。`xspnsf://....`对于 java File 对象，这个虚拟是无法理解的。

这是 Freemarker 的模板路径代码：

```
Configuration cfg = new Configuration();
cfg.setDirectoryForTemplateLoading(new File("??????"));
Template temp = cfg.getTemplate("tmp.ftl"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:29:27.303

由于您将模板与类一起存储（如果我理解得很好），您不能使用`cfg.setClassForTemplateLoading(SomeClassFromThere.class, "/com/example/yourapplication/templates")`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:44:24.643

尝试改用 Velocity ( [http://velocity.apache.org/](http://velocity.apache.org/) )。它允许您创建自定义资源加载器，可以轻松地从任何地方加载模板（例如从 notes db 中的文档）。

我已经看到它在不同的 xpage 项目中多次使用并且效果很好。

# c# - 值不能为空，参数名称子或后代

> ID：15202197
> 
> 赞同：0
> 
> 时间：2013-03-04T13:00:48.567
> 
> 标签：c#, wpf, user-controls

这些代码行导致我的用户控件在设计器中返回提到的错误。
我在这里错过了什么吗？

```
 private void renewContext()
    {
        if (context != null)
        {
            context.Dispose();
            context = new SM_Context();
        }
        else
        {
            context = new SM_Context();
        }
    }
    private void tabPasswords_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (e.Source is TabControl)
        {
            TabControl tab = (TabControl)e.Source;
            switch (tab.SelectedIndex)
            {
                default:
                    break;
                case 0:
                    btnAP_Reset_Click(null, null);
                    btnEP_Reset_Click(null, null);
                    break;
                case 1:
                    btnEP_Reset_Click(null, null);
                    break;
                case 2:
                    btnAP_Reset_Click(null, null);
                    headEditPassword_Loaded(null, null);
                    break;
            }
        }
    } 
```

问题不在于按钮，我敢肯定，问题仅在于上下文。
出于某些安全原因，发现选项卡更改后将不允许我更新其中的上下文。
那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:09:45.707

`btnAP_Reset_Click`正如lazyberezovsky 建议的评论：尝试从事件处理程序（等）中提取要执行的逻辑。它可能看起来像这样：

```
private void tabPasswords_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (e.Source is TabControl)
    {
        TabControl tab = (TabControl)e.Source;
        switch (tab.SelectedIndex)
        {
            default:
                break;
            case 0:
                context = new SM_Context();
                ResetAp();
                ResetEp();
                break;
            case 1:
                context = new SM_Context();
                ResetEp();
                break;
            case 2:
                context = new SM_Context();
                ResetAp();
                WhatEverThisDoes();
                break;
        }
    }
}

private void ResetAp()
{
    // ...
}

private void ResetEp()
{
    // ...
}

private void WhatEverThisDoes()
{
    // ...
}

private void btnAP_Reset(object sender, EventArgs e)
{
    ResetAp();
}

private void btnEP_Reset(object sender, EventArgs e)
{
    ResetEp();
}

private void headEditPassword_Loaded(object sender, EventArgs e)
{
    WhatEverThisDoes();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:29:39.807

你应该听听那些对这个问题写了一些评论的人 - 但如果你决心使用按钮点击 - 你可以打电话`button.PerformClick()`

它看起来像这样：

```
 btnAP_Reset.PerformClick(); 
```

这不会将空值作为参数发送到您的点击事件实现。

# windows-phone-7 - 动态磁贴图像未按时更新

> ID：15202202
> 
> 赞同：1
> 
> 时间：2013-03-04T13:01:11.783
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone

所以简而言之，我的问题是我的动态磁贴的背景图像没有更新。

我知道正确的图像在独立存储中，并且我也知道它被设置为磁贴的图像，但是只有当前未查看的磁贴大小会更新。对于当前用于更新的图块大小，用户必须在图块大小之间循环数次。我认为这个问题与正在构建的切片缓存有关，并且不容易被清除。但是，我尝试了几种不同的方法来清除它 - 清除磁贴上的所有属性，为每个图标设置唯一的文件名，但都没有奏效 - 我仍然被迫循环浏览磁贴或取消固定并重新固定图标更新。

是否有任何解决方案或解决方法可以强制更新？

编辑：我使用的代码是：

```
Canvas canvasIcon = DrawCanvas(100, 172, 30, 30, brushWhite, brushWhite, PenLineCap.Square, 10);
WriteableBitmap wbIcon = new WriteableBitmap(canvasIcon, null);
wbIcon.Invalidate();

var stream = new IsolatedStorageFileStream("Shared/ShellContent/icon.png", FileMode.OpenOrCreate, isoStore);
wbIcon.WritePNG(stream);
stream.Close();

IconicTileData iconicTile = new IconicTileData() {
    SmallIconImage = new Uri("isostore:/Shared/ShellContent/smallicon.png", UriKind.Absolute),
    Title = "Placeholder",
    IconImage = new Uri("isostore:/Shared/ShellContent/icon.png", UriKind.Absolute)
};

ShellTile tile = ShellTile.ActiveTiles.First();
tile.Update(iconicTile); 
```

# django - 我可以在 Stackoverflow 找到 django Web 开发导师吗？

> ID：15202209
> 
> 赞同：-3
> 
> 时间：2013-03-04T13:01:28.770
> 
> 标签：django

我是一个初学者程序员，不仅仅是 django 开发。它变得越来越复杂，无法继续单独工作。

想知道是否可以在这里找到 django 导师（stackoverflow），这里有这么多优秀的开发人员。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:16:17.173

这个问题很可能会被关闭，但我的建议是：

按以下顺序学习这些技术：

*   HTML
*   CSS
*   JavaScript
*   SQL
*   一种服务器端语言。Python 可能是最容易上手的。查看[深入 Python](http://www.diveintopython.net/)

称我为老式的，但我发现纸质书籍仍然比数字书籍更容易学习。对我来说，它们只是更具触觉，更快。如果您只是想先深入了解，并且想使用 Django，请从[The Definitive Guide to Django](http://djangobook.com/)开始，然后是[Practical Django Projects](https://rads.stackoverflow.com/amzn/click/com/1430219386)，然后是[Django Testing](https://rads.stackoverflow.com/amzn/click/com/1847197566)，最后是[Pro Django](https://rads.stackoverflow.com/amzn/click/com/1430210478)。

# ios - 带有 Xcode 4.5.2 的 iOS 4 模拟器

> ID：15202212
> 
> 赞同：-2
> 
> 时间：2013-03-04T13:01:36.487
> 
> 标签：ios, simulator

我正在 Xcode 4.5.2 中构建一个应用程序，我想在 iOS 4 上对其进行测试，但似乎复制粘贴方法不起作用。我尝试了一切，但似乎没有任何效果。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:27:50.623

好吧，如果你想要 iOS 4 模拟器，那么你必须安装它的 SDK。您可以使用 xcode 下载。从上方的 ToolBar > Preference > Downloads > Components > 中选择 Xcode，在这里您可以看到所有新旧模拟器下载 ios 4 模拟器，它会自动添加到您的 xcode 中。 [在这里](http://i45.tinypic.com/2uhb88m.png)。

是的，您必须在项目目标中将部署目标设置为 ios 4 才能使用 ios 4 模拟器。

快乐编码。

# java - 将字符串用户输入转换为数组

> ID：15202216
> 
> 赞同：3
> 
> 时间：2013-03-04T13:01:48.943
> 
> 标签：java, arrays, string

好的，所以我正在尝试创建一个程序，要求用户输入一个单词，然后将该单词存储为变量，然后将其显示为数组。

这是我到目前为止所拥有的：

```
package coffeearray;

    import java.util.Arrays;
    import java.util.Scanner;
    import java.lang.String;
    import java.util.ArrayList;

    public class Main {

    public static void main(String[] args) {

        String drink;
        String  coffee;

        int [] a =new int[6];

        Scanner in = new Scanner(System.in);
        System.out.println("Please input the word coffee");
        drink = in.next(); 
```

所以基本上我需要一些代码，以便将存储的单词显示为变量。例如，“Coffee”将被显示，但每个字母都在其自己的行上。

我已经到处搜索了，似乎无法找到如何做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T13:08:12.613

给定字符串 str ：

```
String str = "someString"; //this is the input from user trough scanner
char[] charArray = str.toCharArray(); 
```

只需遍历字符数组即可。我不会向你展示这个，因为这很容易被谷歌搜索。再一次，如果你真的被困住了，请告诉我，但你真的应该知道这一点。

**更新** 因为您是 Java 新手。这是每个 Jeff Hawthorne 评论的代码：

```
(for int i=0, i < charArray.getlength(); i++){
   System.out.println(charArray[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:12:01.187

您可以将字符串转换为 CharSequence：

```
CharSequence chars = inputString.subSequence(0, inputString.length()-1); 
```

然后，您可以遍历序列，或使用 charAt() 方法获取单个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T13:07:10.387

您可以使用`String.split("")`

尝试这个：

```
String word = "coffee"; //you get this from your scanner
if(word.length()>0)
   String [] characterArray = Arrays.copyOfRange(word.split(""), 1, word.length()+1); 
```

# r - 使用名为“x”的变量时更新公式时出现 R 错误：

> ID：15202218
> 
> 赞同：2
> 
> 时间：2013-03-04T13:01:55.010
> 
> 标签：r, formula

我正在尝试编写一个使用公式表达式的模型构建函数，但我在理解模型`update`函数的工作原理时遇到了一些问题。

这是一个精简的函数，它在使用`update`函数时会导致错误：

```
modelx <- function(formula) {         
  mf <- mc <- match.call()                         
  mf <- mf[c(1L,  match("formula", names(mf), 0L))]      
  mf[[1L]] <- as.name("model.frame")
  mf <- eval(mf, parent.frame())
  y <- model.response(mf, "numeric")
  mt <- attr(mf, "terms")      
  X <- model.matrix(mt, mf)
  out<-list(y=y,X=X)
  out$call<-mc
  out
} 
```

代码几乎是从`lm`函数的开头复制的。一些示例数据和两个模型：

```
y<-x<-x1<-x2<-1:10
model<-modelx(y ~ x)
model1<-modelx(y ~ x1) 
```

现在更新第一个模型不起作用，但第二个可以：

```
 model<-update(model, . ~ . + x2)
    Error in model.frame.default(formula = y ~ x + x2) : 
    invalid type (list) for variable 'x'
 model1<-update(model1, . ~ . + x2) 
```

如果我在`out$terms <- mt`的输出中添加一个组件，那么`modelx`在这两种情况下一切正常。为什么需要这个组件，为什么更新功能在第二种情况下没有它但在第一种情况下不能工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T13:19:37.450

如果您查看`update`( `?update`) 的帮助，它会告诉您：

> **描述**
> 
> update 将更新并（默认情况下）重新拟合模型。它通过提取存储在对象中的调用、更新调用和（默认情况下）评估该调用来做到这一点。有时仅使用一个参数调用更新很有用，例如，如果数据框已被更正。
> 
> update() 和类似函数中的“提取调用”使用 getCall()，它本身是一个 (S3) 泛型函数，具有简单获取 x$call 的默认方法。
> 
> 因此，update() 通常会（通过其默认方法）在新模型类上工作，要么自动，要么为该类提供简单的 getCall() 方法。
> 
> **用法**
> 
> 更新（对象，...）
> 
> 调用（x，...）

在我看来，冲突正在发生，因为信息正在传递给参数名称`getCall`所在的函数，`x`然后这会与您的名称发生冲突，`x`并且语言正在选择本地`x`而不是您的`x`.

# search - 按相关型号字段搜索

> ID：15202220
> 
> 赞同：0
> 
> 时间：2013-03-04T13:02:02.643
> 
> 标签：search, model, yii, relation

我知道这方面有很多主题，但我搜索并尝试了很多，但仍然无法正常工作。

我有桌子：团队和工人。任何工人都可以被分配到一个团队。所以在工人经理我也想按团队名称搜索工人。

我得到了列等，但是当我输入团队名称的一部分时 - 搜索开始但书面文本消失并且搜索不关心该字段。我用 Firebug 检查了 AJAX 调用，并且有一个名为 teamName 的字段（我在我的 Worker 模型类中添加了公共字段）。但是当我在我的搜索方法中 print_r 条件时 - 没有条件。这怎么可能？如何按相关领域进行搜索？

编辑（我的 serach() 方法）：

```
public function dsearch()
{
    // Warning: Please modify the following code to remove attributes that
    // should not be searched.

    $criteria=new CDbCriteria;

    $criteria->compare('idWorker',$this->idWorker);
    $criteria->compare('idLeaderType',$this->idLeaderType);
    $criteria->compare('t.idTeam',$this->idTeam);
    $criteria->compare('idVoip',$this->idVoip);
    $criteria->compare('workLogin',$this->workLogin,true);
    $criteria->compare('workPass',$this->workPass,true);
    $criteria->compare('name',$this->name,true);
    $criteria->compare('surname',$this->surname,true);
    $criteria->compare('madeCalls',$this->madeCalls);
    $criteria->compare('deleted',$this->deleted);
    $criteria->compare('liveChanges',$this->liveChanges);
    $criteria->compare('confirmer',$this->confirmer);
    $criteria->compare('oldWorkerNum',$this->oldWorkerNum);
    $criteria->compare('idDepart',$this->idDepart);
    $criteria->compare('Team.name', $this->teamName, true);
    $criteria->with=array('Team');
    $criteria->together = true;

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:49:55.900

使用 mergeWith: 希望它有效。

```
 if($merge!==null){
            $criteria->mergeWith($merge);
            } 
```

参考：[http ://www.yiiframework.com/doc/api/1.1/CDbCriteria#mergeWith-detail](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#mergeWith-detail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:47:39.240

我找到了有用的扩展来做到这一点： [http ://www.yiiframework.com/extension/relatedsearchbehavior/](http://www.yiiframework.com/extension/relatedsearchbehavior/)

我无法让它以某种方式工作。我下载了新版本，现在很好。它工作得很好。不过，感谢您的时间。

# iphone - iPhone 无法正确显示背景图像

> ID：15202221
> 
> 赞同：0
> 
> 时间：2013-03-04T13:02:07.133
> 
> 标签：iphone, css, background-image

我刚刚建立了一个站点，其中有四个内容块相互重叠，以创建一个较长的页面。

每个块都是屏幕的全宽和屏幕的高度，并具有背景图像。

现在，当站点加载时，它会显示第一个块，并且背景图像会正确显示。当用户滚动到第二个块时，背景图像不会显示，直到该块的大部分位于视口中，然后才会加载。

有谁知道为什么会这样，是iOS问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:32:25.637

如果您从后台声明中删除“固定”，它将按您的意愿工作。

# php - facebook打开图表签入

> ID：15202225
> 
> 赞同：2
> 
> 时间：2013-03-04T13:02:20.660
> 
> 标签：php, facebook, facebook-opengraph

我的应用程序中有 Open Graph 功能。我必须在我的 Facebook 帐户中维护总签到。并且必须在一张地图上显示所有签到的地方。Foursquare 应用程序在他们的应用程序中使用了这个。但我不知道，如何实现这样的。他们在聚合中使用了两种显示方式，第一种是[Image1](http://demo.greatinnovus.com/parii/screenshot/Checkins.png)第二种是[Image2](http://demo.greatinnovus.com/parii/screenshot/FourSquare.png) 所以，我必须像 Foursquare 应用程序那样做这两种方式。请帮助我。

# java - 获取内容提供者中所有名称的列表

> ID：15202230
> 
> 赞同：0
> 
> 时间：2013-03-04T13:02:38.650
> 
> 标签：java, android, android-contentprovider

我正在使用“Calls.CONTENT_URI”内容提供者。我已经检索了列名，但现在我想获取此内容提供程序中列名“name”中的所有名称。

我有以下代码：

```
uri = Calls.CONTENT_URI;

    String[] projection = {"name"};
    String selection = null;
    String[] selectionArgs = null;
    String sort = null;

    resolver = getContentResolver();

    cursor = resolver.query(uri, projection, selection, selectionArgs, sort);
    Log.i("TUTORIAL", "counts :"+cursor.getCount());    

    String s;
    cursor.moveToFirst();

    for(int x=0; x<cursor.getCount(); x++){

        s = cursor.getString(x);
        Log.i("TUTORIAL", ""+s);

        //cursor.moveToNext();

    } 
```

但这只会检索一个名称。我想在我的手机中保存所有名称的列表，例如：

约翰彼得马克苏西。. X

但现在我只有一个名字，比如：

彼得。希望我已经足够清楚了。

有什么问题？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:09:52.700

我认为这会对你有所帮助

```
 ArrayList<String> nameList = new ArrayList<String>();
    String[] projection = {"name"};
    String selection = null;
    String[] selectionArgs = null;
    String sort = null;
    resolver = getContentResolver();
    cursor = resolver.query(uri, projection, selection, selectionArgs, sort);
    Log.i("TUTORIAL", "counts :"+cursor.getCount());    
    String s;
    if(cursor.moveToFirst()) {
        do {
            nameList.add(cursor.getString(0));
            //your code
            //s = cursor.getString(x);
            Log.i("TUTORIAL", ""+cursor.getString(0));
        }while(cursor.moveToNext());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:34:43.393

你可以试试这个，它对我有用：

```
public void readContacts() {
        Cursor cur = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null,
                null, null, null);
        if (cur.getCount() > 0) {
            while (cur.moveToNext()) {
                if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {

                    // Get contact id (id)
                    String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));

                    // Get contact name (displayName)
                    String displayName = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

                }
            }
        }
        cur.close();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-09T07:06:41.893

这是代码。

```
 public class MainActivity extends AppCompatActivity {
SimpleCursorAdapter mAdapter;
MatrixCursor mMatrixCursor;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // The contacts from the contacts content provider is stored in this cursor
    mMatrixCursor = new MatrixCursor(new String[] { "_id","name","photo","details"} );

    // Adapter to set data in the listview
    mAdapter = new SimpleCursorAdapter(getBaseContext(),
            R.layout.lv_layout,
            null,
            new String[] { "name","photo","details"},
            new int[] { R.id.tv_name,R.id.iv_photo,R.id.tv_details}, 0);

    // Getting reference to listview
    ListView lstContacts = (ListView) findViewById(R.id.lst_contacts);

    // Setting the adapter to listview
    lstContacts.setAdapter(mAdapter);

    // Creating an AsyncTask object to retrieve and load listview with contacts
    ListViewContactsLoader listViewContactsLoader = new ListViewContactsLoader();

    // Starting the AsyncTask process to retrieve and load listview with contacts
    listViewContactsLoader.execute();
}

/** An AsyncTask class to retrieve and load listview with contacts */
private class ListViewContactsLoader extends AsyncTask<Void, Void, Cursor> {

    @Override
    protected Cursor doInBackground(Void...  params) {
        Uri contactsUri = ContactsContract.Contacts.CONTENT_URI;

        // Querying the table ContactsContract.Contacts to retrieve all the contacts
        Cursor contactsCursor = getContentResolver().query(contactsUri, null, null, null,ContactsContract.Contacts.DISPLAY_NAME + " ASC ");

        if(contactsCursor.moveToFirst()){
            do{
                long contactId = contactsCursor.getLong(contactsCursor.getColumnIndex("_ID"));

                Uri dataUri = ContactsContract.Data.CONTENT_URI;

                // Querying the table ContactsContract.Data to retrieve individual items like
                // home phone, mobile phone, work email etc corresponding to each contact
                Cursor dataCursor = getContentResolver().query(dataUri, null,
                        ContactsContract.Data.CONTACT_ID + "=" + contactId,
                        null, null);

                String displayName="";
                String nickName="";
                String homePhone="";
                String mobilePhone="";
                String workPhone="";
                //String photoPath="" + R.drawable.blank;
                byte[] photoByte=null;
                String homeEmail="";
                String workEmail="";
                String companyName="";
                String title="";

                if(dataCursor.moveToFirst()){
                    // Getting Display Name
                    displayName = dataCursor.getString(dataCursor.getColumnIndex(ContactsContract.Data.DISPLAY_NAME ));
                    do{

                        // Getting NickName
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Nickname.CONTENT_ITEM_TYPE))
                            nickName = dataCursor.getString(dataCursor.getColumnIndex("data1"));

                        // Getting Phone numbers
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)){
                            switch(dataCursor.getInt(dataCursor.getColumnIndex("data2"))){
                                case ContactsContract.CommonDataKinds.Phone.TYPE_HOME :
                                    homePhone = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;
                                case ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE :
                                    mobilePhone = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;
                                case ContactsContract.CommonDataKinds.Phone.TYPE_WORK :
                                    workPhone = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;
                            }
                        }

                        // Getting EMails
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE ) ) {
                            switch(dataCursor.getInt(dataCursor.getColumnIndex("data2"))){
                                case ContactsContract.CommonDataKinds.Email.TYPE_HOME :
                                    homeEmail = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;
                                case ContactsContract.CommonDataKinds.Email.TYPE_WORK :
                                    workEmail = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;
                            }
                        }

                        // Getting Organization details
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE)){
                            companyName = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                            title = dataCursor.getString(dataCursor.getColumnIndex("data4"));
                        }

                        // Getting Photo
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE)){
                            photoByte = dataCursor.getBlob(dataCursor.getColumnIndex("data15"));

                            if(photoByte != null) {
                                Bitmap bitmap = BitmapFactory.decodeByteArray(photoByte, 0, photoByte.length);

                                // Getting Caching directory
                                File cacheDirectory = getBaseContext().getCacheDir();

                                // Temporary file to store the contact image
                                File tmpFile = new File(cacheDirectory.getPath() + "/wpta_"+contactId+".png");

                                // The FileOutputStream to the temporary file
                                try {
                                    FileOutputStream fOutStream = new FileOutputStream(tmpFile);

                                    // Writing the bitmap to the temporary file as png file
                                    bitmap.compress(Bitmap.CompressFormat.PNG,100, fOutStream);

                                    // Flush the FileOutputStream
                                    fOutStream.flush();

                                    //Close the FileOutputStream
                                    fOutStream.close();

                                } catch (Exception e) {
                                    e.printStackTrace();
                                }
                               // photoPath = tmpFile.getPath();
                            }
                        }
                    }while(dataCursor.moveToNext());
                    String details = "";

                    // Concatenating various information to single string
                    if(homePhone != null && !homePhone.equals("") )
                        details = "HomePhone : " + homePhone + "\n";
                    if(mobilePhone != null && !mobilePhone.equals("") )
                        details += "MobilePhone : " + mobilePhone + "\n";
                    if(workPhone != null && !workPhone.equals("") )
                        details += "WorkPhone : " + workPhone + "\n";
                    if(nickName != null && !nickName.equals("") )
                        details += "NickName : " + nickName + "\n";
                    if(homeEmail != null && !homeEmail.equals("") )
                        details += "HomeEmail : " + homeEmail + "\n";
                    if(workEmail != null && !workEmail.equals("") )
                        details += "WorkEmail : " + workEmail + "\n";
                    if(companyName != null && !companyName.equals("") )
                        details += "CompanyName : " + companyName + "\n";
                    if(title != null && !title.equals("") )
                        details += "Title : " + title + "\n";

                    // Adding id, display name, path to photo and other details to cursor
                    mMatrixCursor.addRow(new Object[]{ Long.toString(contactId),displayName,null,details});
                }
            }while(contactsCursor.moveToNext());
        }
        return mMatrixCursor;
    }

    @Override
    protected void onPostExecute(Cursor result) {
        // Setting the cursor containing contacts to listview
        mAdapter.swapCursor(result);
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

# matlab - MATLAB：如何使用 ButtonDownFcn 存储单击的坐标

> ID：15202236
> 
> 赞同：2
> 
> 时间：2013-03-04T13:02:57.443
> 
> 标签：matlab, save, coordinates

**目标：**在一个图形中执行多次单击，包含使用 imshow 显示的图像并保存“单击”点的坐标，以用于进一步的操作。

**注意：**我知道这些功能`getpts`/`ginput`但我想在不使用它们的情况下执行此操作。这可以使用`ButtonDownFcn`吗？（见以下代码）

```
function testClicks
img = ones(300); % image to display
h   = imshow(img,'Parent',gca);
set(h,'ButtonDownFcn',{@ax_bdfcn});

function ax_bdfcn(varargin)
a = get(gca,'CurrentPoint');
x = a(1,1);
y = a(1,2); 
```

在这个阶段，变量`x`也`y`只有“活”在里面`ax_bdfcn`。如何使它们在`testClicks`函数中可用？这可以使用`ButtonDownFcn`吗？这是一个好方法吗？

非常感谢。

***EDIT1：*** 感谢Shai的回答。但我仍然无法完成我的意图。

```
function [xArray, yArray] = testClicks()
img = ones(300); % image to display
h   = imshow(img,'Parent',gca);
x = [];
y = [];
xArray = [];
yArray = [];
stop = 0;
while stop == 0;
    set(h,'ButtonDownFcn',{@ax_bdfcn});
    xArray = [xArray x];
    yArray = [yArray y];
        if length(xArray)>15
            stop = 1;
        end
end

    function ax_bdfcn(varargin)
        a = get(gca, 'CurrentPoint');
        assignin('caller', 'x',  a(1,1) );
        assignin('caller', 'y',  a(1,2) );
    end
end % must have end for nested functions 
```

这段代码（有问题！）是我能得到的最接近我想要的代码（在所有点击之后，有一个带有点击点的 x 和 y 坐标的数组）。我显然不了解执行此任务的机制。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:11:26.983

有几种方法

1.  使用[嵌套函数](http://www.mathworks.com/products/matlab/examples.html?file=/products/demos/shipping/matlab/nesteddemo.html)

    ```
    function testClicks
       img = ones(300); % image to display
       h   = imshow(img,'Parent',gca);
       set(h,'ButtonDownFcn',{@ax_bdfcn});
       x = []; % define "scope" of x and y 
       y = [];  

       % call back as nested function
       function ax_bdfcn(varargin)
           a = get(gca,'CurrentPoint');
           x = a(1,1); % set x and y at caller scope due to "nested"ness of function
           y = a(1,2);
       end  % close nested function
    end % must have end for nested functions 
    ```

2.  使用[`assignin`](http://www.mathworks.com/help/matlab/ref/assignin.html)

    ```
    function ax_bdfcn(varargin)
         a = get(gca, 'CurrentPoint');
         assignin('caller', 'x',  a(1) );
         assignin('caller', 'y',  a(2) ); 
    ```

3.  使用`'UserData'`图形句柄的属性

    ```
    function ax_bdfcn(varargin)
         a = get(gca, 'CurrentPoint');
         set( gcf, 'UserData', a(1:2) ); 
    ```

    `'UserData'`可以使用 . 访问（只要图还活着）`cp = get( gcf, 'UserData');`。

**编辑：**
将单击的位置“传达”到`'base'`工作区的方法示例

```
function ax_bdfcn(varargin)
   a = get(gca,'CurrentPoint');
   % the hard part - assign points to base
   if evalin('base', 'exist(''xArray'',''var'')')
      xArray = evalin('base','xArray');
   else 
      xArray = [];
   end
   xArray = [xArray a(1)]; % add the point
   assignin('base','xArray',xArray); % save to base
   % do the same for yArray 
```

调用后工作区`testClicks`中没有`xArray`或`yArray`变量（至少不应该有）。第一次单击后，这两个变量将“奇迹般地”创建。每隔一次单击后，这两个数组将增加它们的大小，直到您关闭该图。

# vb.net - CovrageInfo.CreateFromFile 给出错误

> ID：15202238
> 
> 赞同：0
> 
> 时间：2013-03-04T13:03:10.000
> 
> 标签：vb.net, unit-testing, code-coverage

我已经复制了示例中的代码以从[这里](http://blogs.msdn.com/b/phuene/archive/2009/12/01/programmatic-coverage-analysis-in-visual-studio-2010.aspx)收集代码覆盖率的结果，除了我的代码是 vb.net

这是我的代码

```
Imports Microsoft.VisualStudio.Coverage.Analysis

Module Module1

    Sub Main()
        Using info As CoverageInfo = CoverageInfo.CreateFromFile("C:MyFile\data.coverage")

            Dim lines As New List(Of BlockLineRange)()

            For Each [module] As ICoverageModule In info.Modules

                Dim coverageBuffer As Byte() = [module].GetCoverageBuffer(Nothing)
                Using reader As ISymbolReader = [module].Symbols.CreateReader()

                    Dim methodId As UInteger = 0
                    Dim MethodName As String = ""
                    Dim undecoratedMethodName As String = ""
                    Dim ClassName As String = ""
                    Dim NameSpaceName As String = ""

                    lines.Clear()

                    While reader.GetNextMethod(methodId, MethodName, undecoratedMethodName, ClassName, NameSpaceName, lines)

                        Dim stats As CoverageStatistics = CoverageInfo.GetMethodStatistics(coverageBuffer, lines)
                        Console.WriteLine("Method {0}{1}{2}{3}{4} has:" & NameSpaceName & ClassName & undecoratedMethodName)

                        Console.WriteLine(" blocks covered are {0}", stats.BlocksCovered)
                    End While
                End Using
            Next

        End Using
    End Sub

End Module 
```

当我在线运行它时，`CreateFromFile`我得到一个`ImageNotFoundException`

```
Image File "C:\SomeAddress\MyServer\UnitTest.dll" could not be found 
```

我已经按照说明将必要的 dll 添加到复制的项目中，另外 2 个作为参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:09:58.313

还有另一个风滚草时刻......

基本上问题是包含我的覆盖文件的文件夹还必须包含在该程序集中使用的所有 dll，在这些程序集中运行测试以创建该对象。

如果您偶然发现此问题，希望这对您有所帮助:)

# c# - 删除链接表中具有多个值的 Id

> ID：15202240
> 
> 赞同：1
> 
> 时间：2013-03-04T13:03:22.700
> 
> 标签：c#, asp.net, linq

我正在尝试执行删除，其中 UserId 属于链接表，该链接表具有用户可以属于的许多不同区域。Linked 表有一个 userAreaID 和一个 serviceAreaID，当我尝试从与 UserAreaID 匹配的 userID 中删除时，它说`Sequence contains more than one ...`我已经进行了一个查询`LINQPad`，该查询选择了我想要删除的内容，但无法让它在实际项目中正确运行。

```
from t in Tbl_User
where t.UserId == 21
select new {
     t.UserId,
     ServiceArea = new {t.UserAreaTbl_UserServiceAreaDetails},
     userInfo = new{t.UserName,t.Email}
} 
```

我已经尝试对查询进行 foreach ，但它不可枚举。我应该如何尝试实现这一目标？

这是我将 Deleted 标志设置为的全部查询`True`。

```
var deleteRecord = (from t in db.tbl_UserServiceAreaDetails
                    where ((t.tbl_User.UserId == id) && (t.serviceAreaID == id))
                    )**** no method showing up?

if (deleteRecord != null)
{
    deleteRecord.tbl_User.Deleted = true;

    // Submit
    // ======
    db.SubmitChanges();

    // Reload the Grid
    // ===============
    LoadGrid(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:29:57.083

试试这个：

```
foreach (var dr in db.tbl_UserServiceAreaDetails.Where(t => (t.tbl_User.UserId == id) && (t.serviceAreaID == id)))
{
    dr.tbl_User.Deleted = true;
} 
```

# c# - C# Winform 应用程序中的 System.Data.SqlClient.Sql 错误

> ID：15202247
> 
> 赞同：1
> 
> 时间：2013-03-04T13:03:41.670
> 
> 标签：c#, winforms, sql-server-2005

当我尝试在客户端计算机上运行我的 C# Winform 应用程序时出现以下错误

```
Description:
  Stopped working

Problem signature:
  Problem Event Name:   CLR20r3
  Problem Signature 01: ics.exe
  Problem Signature 02: 1.0.0.0
  Problem Signature 03: 5134926a
  Problem Signature 04: System.Data
  Problem Signature 05: 2.0.0.0
  Problem Signature 06: 4a275e65
  Problem Signature 07: 2755
  Problem Signature 08: 29
  Problem Signature 09: System.Data.SqlClient.Sql
  OS Version:   6.1.7600.2.0.0.768.2
  Locale ID:    1033

Read our privacy statement online:
  http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409

If the online privacy statement is not available, please read our privacy statement     offline:
  C:\Windows\system32\en-US\erofflps.txt 
```

这是 Application.Run 代码

```
 [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new frmLogin2());
        } 
```

这是表单登录代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using DevComponents.DotNetBar;
using ICS.Classes;
using System.Threading;
using Microsoft.Win32;

namespace ICS.Forms
{
    public partial class frmLogin2 : Office2007Form
    {
        static DataAccess da = new DataAccess();
        static DataTable dt = new DataTable();
        int num = 0;
        public frmLogin2()
        {
            Thread t = new Thread(new ThreadStart(SplashScreen));
        t.Start();
        Thread.Sleep(5000);
        InitializeComponent();
        t.Abort();
    }

    void Registries()
    {
        try
        {
            RegistryKey regKey;
            regKey = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\ICS\POS", true);
            string activated = EncDec.Decrypt(regKey.GetValue("Activated").ToString(), "A!11").ToString();
            if (activated != "TRUE")
            {
                string coder1;
                coder1 = regKey.GetValue("ICSPOS").ToString().Trim();
                num = int.Parse(EncDec.Decrypt(coder1, "A!11"));
                if (num < 30)
                {
                    num++;
                    regKey.SetValue("ICSPOS", EncDec.Encrypt(num.ToString(), "A!11"));
                    lblNum.Text += (30 - num).ToString();
                }
            }
        }
        catch (Exception ex)
        {
            string coder1 = "";
            try
            {
                RegistryKey regKey;
                regKey = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\ICS\POS", true);
                coder1 = regKey.GetValue("ICSPOS").ToString().Trim();
            }
            catch
            {

            }
            RegistryKey creator;
            creator = Registry.LocalMachine.OpenSubKey("SOFTWARE", true);
            creator.CreateSubKey(@"ICS\POS");
            creator.Close();
            RegistryKey REG2;
            REG2 = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\ICS\POS", true);
            REG2.SetValue("AppName", "POS");
            REG2.SetValue("Version", 1.0);
            REG2.SetValue("Activated", EncDec.Encrypt("No", "A!11"));
            if (string.IsNullOrEmpty(coder1))
            {
                REG2.SetValue("ICSPOS", EncDec.Encrypt("1", "A!11"));
                lblNum.Text += (30 - 1).ToString();
            }
            REG2.Close();
        }
    }

    private void frmLogin2_Load(object sender, EventArgs e)
    {
        try
        {
            ICS_Auth aut = new ICS_Auth();
            Registries();
            //MessageBox.Show(aut.CreatSerial());
            if (num == 1)
            {
                da.ExecuteNonQuery("sp_admin_user");
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    private void btnLogin_Click(object sender, EventArgs e)
    {
        dt = da.GetDataTable("User_Login", da.CreateSqlParamter("@User_Name", txtUsername.Text)
                                       , da.CreateSqlParamter("@User_Pass", txtUserpass.Text));
        if (dt.Rows.Count == 1)
        {
            //this.Close();
            frmMain main = new frmMain(dt);
            main.Show();
            this.Hide();
        }
        else
        {
            MessageBox.Show("اسم المستخدم او كلمة المرور غير صحيحة");
        }
    }

    private void btnClose_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    public void SplashScreen()
    {
        Application.Run(new frmSplash());
    }

    public static DataTable LOGIN()
    {
        frmLogin2 log = new frmLogin2();
        log.ShowDialog();
        return dt;
    }

    private void frmLogin2_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (e.KeyChar == (char)27)this.Close();
    }
}
} 
```

这是 app.config 中的连接字符串

```
<add key="ConnStr" value="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\POS.mdf;Integrated Security=True;User Instance=True"/> 
```

我正在使用 Visual Studio 2008 和 SQL Server 2005 Express

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-24T15:10:38.037

实际上，问题出在连接字符串内，而不是该`Data Source=`部分。它是`User Instance=True`

除非您对它的需要非常肯定，否则我建议将其删除 - 默认`User Instance`值为`False`.

我假设问题归结为权限/磁盘配额和其他与系统管理员相关的问题。[在这里](https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/sql/sql-server-express-user-instances)您可以找到更多关于它是什么`User Instance`以及如何使用它的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-24T00:18:43.603

您的数据源是问题所在。您目前拥有：

```
Data Source=.\SQLEXPRESS 
```

但是你需要的是（本地）这样的：

```
Data Source=(local) 
```

# android - 以质量压缩的位图=比原始文件大 100 的文件大小

> ID：15202248
> 
> 赞同：7
> 
> 时间：2013-03-04T13:03:45.327
> 
> 标签：android, bitmap, compression

我正在尝试将图像发送到服务器。在发送之前，我会减小它的尺寸和质量，然后修复任何旋转问题。我的问题是，旋转图像后，当我保存它时，文件比以前大。旋转前大小为 10092，旋转后大小为 54226

```
// Scale image to reduce it
Bitmap reducedImage = reduceImage(tempPhotoPath);

// Decrease photo quality
FileOutputStream fos = new FileOutputStream(tempPhotoFile);
reducedImage.compress(CompressFormat.JPEG, 55, fos);
fos.flush();
fos.close();

// Check and fix rotation issues
Bitmap fixed = fixRotation(tempPhotoPath);
if(fixed!=null)
{
    FileOutputStream fos2 = new FileOutputStream(tempPhotoFile);
    fixed.compress(CompressFormat.JPEG, 100, fos2);
    fos2.flush();
    fos2.close();
}

public Bitmap reduceImage(String originalPath)
{
    // Decode image size
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    o.inPurgeable = true;
    o.inInputShareable = true;
    BitmapFactory.decodeFile(originalPath, o);

    // The new size we want to scale to
    final int REQUIRED_SIZE = 320;

    // Find the correct scale value. It should be the power of 2.
    int width_tmp = o.outWidth, height_tmp = o.outHeight;
    int scale = 1;
    while (true) {
        if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE) {
            break;
        }
        width_tmp /= 2;
        height_tmp /= 2;
        scale *= 2;
    }

    // Decode with inSampleSize
    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inPurgeable = true;
    o2.inInputShareable = true;
    o2.inSampleSize = scale;
    Bitmap bitmapScaled = null;
    bitmapScaled = BitmapFactory.decodeFile(originalPath, o2);

    return bitmapScaled;
}

public Bitmap fixRotation(String path)
{
    Bitmap b = null;
    try
    {
        //Find if the picture is rotated
        ExifInterface exif = new ExifInterface(path);
        int degrees = 0;
        if(exif.getAttribute(ExifInterface.TAG_ORIENTATION).equalsIgnoreCase("6"))
            degrees = 90;
        else if(exif.getAttribute(ExifInterface.TAG_ORIENTATION).equalsIgnoreCase("8"))
            degrees = 270;
        else if(exif.getAttribute(ExifInterface.TAG_ORIENTATION).equalsIgnoreCase("3"))
            degrees = 180;

        if(degrees > 0)
        {
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inPurgeable = true;
            o.inInputShareable = true;
            Bitmap bitmap = BitmapFactory.decodeFile(path, o);

            int w = bitmap.getWidth();
            int h = bitmap.getHeight();

            Matrix mtx = new Matrix();
            mtx.postRotate(degrees);

            b = Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, true);
        }
    }
    catch(Exception e){e.printStackTrace();}

    return b;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T17:17:26.513

您正在使用不同的质量度量对其进行压缩。旋转后，您使用的是质量 100，因此它将比前一个文件更大，质量为 55。

压缩图像时，当前文件的大小/质量是什么并不重要。这对结果没有真正的影响。以 55 质量压缩，然后以 100 质量压缩，**不会**产生与简单的 55 质量压缩相同大小的文件。它会生成一个大小为 100 质量压缩的文件，因为这是对它做的最后一件事。

* * *

对于您的特定代码，我不确定我是否看到压缩它两次的原因。压缩（文件大小）不是导致旋转时出现 OOM 问题的原因，图像尺寸很可能是罪魁祸首。在旋转之前缩小图像应该可以解决这个问题，不需要保存临时文件。

您需要做的就是运行`reduceImage()`，然后使用`fixRotation()`. 修复您的旋转方法，使其接受 a`Bitmap`而不是路径，因此您不需要在两者之间保存文件。最后，以您想要的任何质量保存/压缩它。

如果出于某种原因*确实需要临时文件，请使用 PNG 进行第一次压缩。*这种方式是无损的，所以当您重新压缩最终图像时，您不会以低质量使用两次 JPG（有损）。

# ember.js - 如何知道一个方法是我的代码还是来自观察者的调用

> ID：15202250
> 
> 赞同：0
> 
> 时间：2013-03-04T13:03:49.240
> 
> 标签：ember.js, ember-observable

我在视图中有一个方法，如下所示。

```
testMethod : function() {
   //run code
}.observes('property1') 
```

该方法既可以通过调用直接触发，也可以由property1观察者触发。是否有可能在方法内部知道调用被触发的方式。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:39:34.813

当调用观察者时，它接收 2 个参数：控制器对象，以及已更改并触发观察者的观察到的属性。

所以你可以像这样检查它：

```
testMethod : function() {
    if(arguments.length === 2 && arguments[1] === 'property1'){
        // you're triggered by property observer
    } else {
        // triggered directly
    }
}.observes('property1') 
```

当然，这可以被调用者欺骗..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:16:27.610

我自己偶然发现了这一点，但没有办法这样做。我最终做了这样的事情：

```
testMethod : function() {
   //run code
},
propertyObserver : function(){
   this.testMethod();
}.observes('property1') 
```

# java - Java：calendar.setTimeInMillis() 返回错误的 HOUR_OF_DAY 值

> ID：15202254
> 
> 赞同：5
> 
> 时间：2013-03-04T13:04:06.533
> 
> 标签：java, time, milliseconds

我正在尝试将我的时间以分钟为单位转换为 HH:MM。例如 418 分钟 = 6:58。我正在使用以下代码：

```
 long milli = PriemCas*60000;
 Calendar calendar1 = Calendar.getInstance();       
 calendar1.setTimeInMillis(milli);
 int hours3 = calendar1.get(Calendar.HOUR_OF_DAY);
 int minutes3 = calendar1.get(Calendar.MINUTE);

 System.out.println(hours3+":"+minutes3); 
```

当我的变量 PriemCas = 418 而不是 6:58 时，我得到 7:58。这里有什么问题？非常感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-04T13:08:24.737

使用正确的时区创建您的日历：

```
Calendar calendar1 = Calendar.getInstance(TimeZone.getTimeZone("UTC")); 
```

# android - 如何从最近的导出活动中排除？

> ID：15202259
> 
> 赞同：7
> 
> 时间：2013-03-04T13:04:16.300
> 
> 标签：android, android-activity, back-stack, android-recents

我有一个可以从其他应用程序调用的导出活动的应用程序（特别是共享操作 - `android.intent.action.SEND`）

**如何从最近的活动中排除导出的活动？**

我看不到设置`FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS`标志的方法，因为它是从外部调用的。

我想这样做的原因是因为这个意图成为我的活动堆栈中的最后一个，因此当点击最近时，一个文件被重新共享而不是主要活动弹出。

*注意*：`android:launchMode="singleTask"`解决特定情况下的问题，仅在另一个活动位于顶部的情况下。但是，这不是一个选项，因为它会破坏用户任务流程，并且如果根目录下没有其他应用程序的活动，它就不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T13:11:14.450

您可以将[android:excludeFromRecents](http://developer.android.com/guide/topics/manifest/activity-element.html#exclude)属性添加到`<activity>`清单中的元素，其值为 true：

```
<activity
    android:name="XYZ"
    android:excludeFromRecents="true"> 
```

# ruby-on-rails - HTTPI::SSLError 和 Yodlee

> ID：15202266
> 
> 赞同：0
> 
> 时间：2013-03-04T13:04:29.937
> 
> 标签：ruby-on-rails, ruby, soap, savon

我遇到了一个奇怪的问题。我正在使用 Savon 连接到 Yodlee 的 API，但是在尝试启动客户端对象时，我得到：

HTTPI::SSLError: SSL_connect SYSCALL 返回=5 errno=0 状态=未知状态

我已经尝试过诸如 ssl_verify_mode: :none 之类的东西。但似乎没有任何效果。我在网上看到的大多数类似的错误都有…… 就像错误结束时的 state=SSLv3 但我的不同。有没有人知道这里发生了什么？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T21:35:18.940

我不确定您的环境是什么样的，但这里有一些事情要检查......

1.  您需要一条通往 ca-bundle.crt 的路径 .... 这是来自您的证书提供者的信任关系包。
2.  我不是绝对肯定的，但我相信 Yodlee 只处理 peer 的 ssl_verify_mode。

以下是我生成 Savon v2 客户端以连接到 Yodlee 的部分代码：

```
 Savon.client do

      ... Lots of configurations here ....

      ssl_cert_file CERT_PATH
      ssl_verify_mode :peer
      open_timeout 90
      read_timeout 90

    end 
```

其中 CERT_PATH 指向我的 ca-bundle.crt 文件。

# c++ - 使用 boost 库的简单哈希表

> ID：15202268
> 
> 赞同：0
> 
> 时间：2013-03-04T13:04:56.477
> 
> 标签：c++, boost, hashtable

是否有使用 boost lib 实现哈希表的简单示例。我从文档中阅读了以下内容

```
boost::hash<int,std::string> input; 
```

我需要知道我是否可以使用哈希表，例如：

```
input.add<key,instance_of_input_class>  //pseudo code 
```

其中输入类为：

```
class Input
{
    int id;
    std::String name;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:08:07.233

你需要的是 boost::unordered_map: [http://www.boost.org/doc/libs/1_53_0/doc/html/boost/unordered_map.html](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/unordered_map.html)

顺便说一句，现在 unordered_map 包含在 C++11 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T13:10:06.557

`boost::hash`不是哈希表，它只是计算哈希值。请参阅 Boost[文档](http://www.boost.org/doc/libs/1_53_0/doc/html/hash/tutorial.html)以了解如何将其与无序容器组合，并阅读容器[文档](http://en.cppreference.com/w/cpp/container/unordered_map)以了解如何插入值。

您的评论声明了一个类型`map`，而不是该类型的实例，因为您正在使用`typedef`。

您的帖子还表明，也许您甚至不想要/不需要`boost::hash`，试试

```
std::unordered_map< int, std::string > my_map; 
```

当然，您也可以使用`boost::unordered_map`代替，`std::unordered_map`以防后者不起作用或您根本*不想*使用它。

现在向您的类添加一个方法以允许访问这些值：

```
class Input
{
  int id;
  std::string name; // note: lowercase string, not String

public:
  std::pair< int, std::string > values() const
  {
    return std::make_pair( id, name );
  }
}; 
```

并使用它将实例`Input`插入地图：

```
Input my_input;
my_map.insert( my_input.values() ); 
```

# java - 检查命令行上是否没有参数

> ID：15202270
> 
> 赞同：1
> 
> 时间：2013-03-04T13:05:01.120
> 
> 标签：java

当我正在阅读一些教程时，其中一个源代码文件有以下内容来检查是否没有命令行参数：

```
if (null==args[0]) {
  System.err.println("Properties file not specified at command line");
  return;
} 
```

出于显而易见的原因，它会抛出 ArrayIndexOutOfBoundsException 并且不打印消息。

那么，如何在不引发异常的情况下检查并打印消息呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T13:05:52.190

```
if (args.length == 0) {
  System.err.println("Properties file not specified at command line");
  return;
} 
```

当命令行上没有参数时，参数数组将为空。所以，你检查它的长度`args.length==0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:06:06.317

```
 if (args.length == 0) 
```

只需检查长度。

# .htaccess - 使用 .htaccess 进行重定向

> ID：15202271
> 
> 赞同：-2
> 
> 时间：2013-03-04T13:05:01.610
> 
> 标签：.htaccess, redirect

我想从以下位置重定向：

```
http://www.mydomain.com/historical/category 
```

至：

```
http://www.mydomain.com/category 
```

我怎样才能用.htaccess 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:13:49.183

使用类似的东西

> 重定向/historical/category/index.html [http://www.mydomain.com/category](http://www.mydomain.com/category)

[在这里](http://www.htaccessredirect.co.uk/)查看更多

# c# - .net 中的网络打印机监控

> ID：15202273
> 
> 赞同：3
> 
> 时间：2013-03-04T13:05:04.430
> 
> 标签：c#, .net, wmi, network-printers

我正在.net 中开发打印机监控系统。我需要跟踪所有网络打印机以进行监控，并允许或限制打印特定打印机将只打印带有日志数据的作业，例如哪个用户为哪个客户完成了作业。

管理员可以允许和禁止来自 .Net 应用程序的特定打印机。

任何想法，如何在.net 中实现该代码。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:24:16.983

我在 2 或 3 年前对 .net 做过同样的事情，这对我有很大帮助

[http://www.merrioncomputing.com/Programming/VBDotNet/WatchPrinter.htm](http://www.merrioncomputing.com/Programming/VBDotNet/WatchPrinter.htm)

# c# - C# - 高效的随机字符串/整数生成器

> ID：15202281
> 
> 赞同：-2
> 
> 时间：2013-03-04T13:05:38.220
> 
> 标签：c#, algorithm, random

我正在寻找高效的随机发生器。我更喜欢成为字符串/整数生成器，即使它并不那么重要。我需要复制图像并将其名称保存在数据库中。因为我从数据库中提取名称，所以不需要有一些有意义的名称，但是因为我需要将图像复制到一个目录中，所以我必须为我的图像名称选择唯一的名称。因为每次检查都是对数据库的新查询，所以我需要一些高效的随机生成器，以便在获得唯一名称之前需要最少数量的查询。我知道有很多算法，但快速搜索并没有帮助我找到一个。我不想要一些过分的东西，毕竟我没有加密任何我只需要唯一名称的东西，但是当图像数量变大时我仍然不'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T13:06:44.457

尝试

```
string uniqueName = Guid.NewGuid().ToString("N"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:08:53.150

除了[马修的回答](https://stackoverflow.com/a/15202298/107625)，您还可以尝试：

```
string uniqueName = System.DateTime.Now.Ticks.ToString(); 
```

由于[`Ticks`](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)总是在增长，因此您具有独特的价值，至少在一个过程中这样做时是这样。

在寻找整数而不是字符串时，当然是：

```
long uniqueValue = System.DateTime.Now.Ticks; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T13:11:17.787

对于真正的随机生成器，请使用 RNGCryptoServiceProvider。看看那个例子：[随机数生成](http://www.c-sharpcorner.com/uploadfile/logisimo/random-number-generation-and-windows-forms-encryption-via-C-Sharp-parallel-programming/)

# android - 在移动设备上自定义谷歌图片搜索

> ID：15202285
> 
> 赞同：0
> 
> 时间：2013-03-04T13:05:41.860
> 
> 标签：android, search, google-api

我只需要正确的请求格式 - [https://www.googleapis.com/customsearch/v1](https://www.googleapis.com/customsearch/v1)？键=插入您的键&cx=013036536707430787589:_pqjad5hr1a&q=花&alt=json。

我的应用程序将简单地使用搜索短语发出请求并获得 JSON 回调。我已经将 Google 自定义搜索连接到我的帐户，填写付款详细信息并获取所有密钥。我将密钥用于 Android 应用程序（带有证书），但在浏览器中调用请求后得到响应“未配置访问”。

如何创建查询字符串来请求 API？如何获取参数 cx？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:04:12.530

这是谷歌的一个错误。仅完全删除默认项目并创建一个新项目即可解决问题。

# javascript - 使用提示/回调 UI 替换正则表达式

> ID：15202288
> 
> 赞同：1
> 
> 时间：2013-03-04T13:05:55.700
> 
> 标签：javascript, regex, templates, callback

我正在尝试编写一个函数，该函数需要一长串文本，识别文本中的占位符，并提示用户提供一个应该代替占位符的值。占位符的标记看起来类似于用于图像或链接的降价：

```
some text, some more text, ?[name][description] more text, not just commas 
```

Where`name`和`description`是任意的文本运行。当我找到这些占位符时，我想弹出一个格式很好的对话框，使用名称和描述，并让用户提供一个替换值。

我已经有一个不错的函数`htmlPrompt`（`null`称为被按下），具有以下签名：

```
function (htmlText, inputStartValue, callback) 
```

在插入这个函数之前，我写了粗略的准备：

```
myText = myText.replace(/(\?\[(.+)\][ ]?(?:\n[ ]*)?\[(.+)\])/g,
   function (wholematch, m1, m2, m3) {
  var repValue = prompt(m2);
  if (repValue == null)
  {
    return m1;
  }
  return repValue;
}); 
```

它使用了 DOM 内置`prompt`方法——在格式化方面，这对我来说确实做得不够好。

但是，我想不出一种插入方式`htmlPrompt`——它只*模拟*一个模态对话框，并通过调用`callback`.

我确实想过尝试手动进行替换，使用结果`match`而不是`replace`- 但据我所知，返回的值`match`只是字符串 - 它们没有给你任何有用的东西（例如匹配的位置在整个文本中）。

或者你认为我完全错了？我想要的整体流程是：

*   查找文本中的每个占位符
*   提示用户进行替换，同时使用`name`和`description`值
*   将文本中的占位符表达式替换为用户提供的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:40:25.933

对于每个`name`和`description`元组：

首先用于`match`阅读`name`和`desription`。用户提示。然后`replace`用来替换那些。

# java - 为什么 java.util.Comparator 中的 equals() 方法被抽象化了？

> ID：15202292
> 
> 赞同：3
> 
> 时间：2013-03-04T13:06:06.627
> 
> 标签：java

`equals()`如果该方法`java.util.Comparator`已经在类中实现，为什么它是抽象的`Object`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T13:10:00.187

首先，值得注意的是该方法不是“抽象的”。如果您实施`Comparator<T>`而不实施`equals()`，您的代码*将*编译。您的课程将简单地使用由`Object`.

至于为什么要重新声明方法，这样做是因为contract on`Comparator<T>.equals()`比contract on 更严格`Object.equals()`。这在[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html#equals%28java.lang.Object%29)中进行了解释：

> 此外，只有当指定的对象也是一个比较器并且它强制执行与此比较器相同的排序时，此方法才能返回 true。因此，对于每个对象引用 o1 和 o2，comp1.equals(comp2) 意味着 sgn(comp1.compare(o1, o2))==sgn(comp2.compare(o1, o2))。

如果`Comparator`没有 override `equals()`，就没有好的方法来指定它的合约`equals()`与`Object`'s 不同。

# glassfish - 我可以将域从一个 glassfish 安装备份到另一个吗？

> ID：15202294
> 
> 赞同：1
> 
> 时间：2013-03-04T13:06:25.817
> 
> 标签：glassfish

我有两台机器，它们安装了相同版本的 glassfish，比如 A 和 B。它们是基于 nix 的。在两台机器上 glassfish 都托管相同的应用程序。glasfish B 面临一些我们无法解决的问题。glassfish A 及其上的应用程序运行良好。我可以在 glassfish A 上获取备份域并在 glassfish B 上恢复它吗？换句话说，域配置是否包含机器特定信息或任何可能使这件事成为不可能的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:22:49.393

是的。你应该能够做到这一点。我们竭尽全力使配置不是特定于机器的。

为了安全起见，我建议您先备份 GF "B"。

如果您在另一台机器上运行 GF 服务器实例（不是域），它们有一个指向域主机的配置文件。如果域名主机更改，您将需要编辑该文件。

# html - 在 div 标签之间使用 head 标签

> ID：15202297
> 
> 赞同：1
> 
> 时间：2013-03-04T13:06:43.217
> 
> 标签：html

这是我尝试过的示例代码

```
 <html>
 <head>
 <style>
 <!--
  .execute { background-color: red; height: 25px; }
 -->
 </style>
  <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dojo/dojo.xd.js">
  </script>

<!-- Let's register a onClick handle for any .execute div. -->

</head>
 <body>
<div class="execute">
  <head>
   <script>
  dojo.ready(function()  // Dojo will run this after being initialized
  {
      // Get A list of all tags with id execute and add a event onClick
      dojo.query(".execute").connect("onclick", function(evt)
      {
          alert("Event triggered!");
          // ...
      });
  });
</script>
  </head>
<body>
  Click me 1
 </body>
  </div>
<br /><br />
<div class="execute">Click me 2</div>
 </body>
 </html> 
```

但如果我将它合并到另一个代码中，它会突出显示并作为无效代码。这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:22:28.700

有几个代码问题。双`<head>`标签，标签后的 HTML 元素`<body>`。

清理代码：

```
<html>
 <head>
 <style>
  .execute { background-color: red; height: 25px; }
 </style>
  <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dojo/dojo.xd.js"></script>
  <script>
  dojo.ready(function() { // Dojo will run this after being initialized
    // Get A list of all tags with id execute and add a event onClick
    dojo.query(".execute").connect("onclick", function(evt) {
      alert("Event triggered!");
      // ...
    });
  });
  </script>
</head>
 <body>
  <div class="execute">Click me 1</div>
  <br><br>
  <div class="execute">Click me 2</div>
 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:07:43.677

`<head>`应该只出现一次，直接在 下`<html>`，而不是在 内`<body>`。

嵌入在现有页面中的 iframe 除外，它们有自己的文档结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T13:08:54.647

只需删除第二个`<head>`.

为什么有两个头？`<script>`s 不必在`<head>`s 中。

`<head>`您的文档中应该只有一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T13:20:13.467

HTML页面的结构应该如下：

```
<html>
<head>
<title></title>
</head>
<body>
</body>
</html> 
```

尽管它们不是必须的，但大多数人将脚本标签放在开始和结束标题标签中。例如：

```
<html>
<head>
<title></title>
<script>

<!--This is where all your functions should be.-->

</script>
</head>
<body>
</body>
</html> 
```

# html - 如何使用 ruby 在 html 上显示代码？

> ID：15202299
> 
> 赞同：0
> 
> 时间：2013-03-04T13:06:49.463
> 
> 标签：html, ruby-on-rails, gem

我希望能够在我的网站上显示代码，就像在 stackoverflow 上一样。例如：

```
 public class Test{
   public static void main(String[] args){
        System.out.println("Hello world");
        //TODO do something here
   }
 } 
```

有高光和颜色的有宝石吗？我搜索了一个 gem vut 我找不到任何东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:15:22.210

那里的宝石很少：

检查[redcarpet](https://github.com/vmg/redcarpet/)是否有降价。

请参阅[pygments](http://pygments.org/)以了解语法高亮。

您还可以查看一个很棒的 Railscast，了解您正在寻找什么[语法突出显示（修订版）](http://railscasts.com/episodes/207-syntax-highlighting-revised)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:18:28.247

宝石[码雷](http://coderay.rubychan.de/doc/)。

如前所述——

“用 Ruby 编写的选定语言的快速简单的语法突出显示。带有 RedCloth 集成和 LOC 计数器。”

# java - HttpGet 与请求体 android

> ID：15202300
> 
> 赞同：3
> 
> 时间：2013-03-04T13:06:51.947
> 
> 标签：java, android, json, http-get

我尝试通过 HttpGet 在服务器上发出请求。但在消息正文中应该是一个 json 对象。下面的代码不起作用，因为 unit_id 和 sercret_key 未在服务器上以正文消息发送。我该怎么做？

JSON对象：

```
{
"unit_id": 12345,
"secret_key": "sdfadfsa6as987654754"
} 
```

我的代码：

```
private HttpResponse makeRequest(int id, String secretKey) throws Exception {
    BasicHttpParams params = new BasicHttpParams();
    params.setParameter("id", id);

    params.setParameter("secret_key", secretKey);

    httpget.setHeader("Accept", "application/json");

    httpget.setParams(params);
    httpget.setHeader("Content-type", "application/json");

    // Handles what is returned from the page
    return httpclient.execute(httpget);
} 
```

**编辑：**在php中这个请求是这样的

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://0101.apiary.io/api/reservations/");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_HEADER, FALSE);
curl_setopt($ch, CURLOPT_POSTFIELDS, "{\n    \"unit_id\": 12345,\n    \"secret_key\":     \"sdfadfsa6as987654754\"\n}");
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json"));
$response = curl_exec($ch);
curl_close($ch);

var_dump($response); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-17T06:25:53.703

基本上，您不能使用**HTTP/GET**请求在正文（JSON 或任何内容）中发送行数据。**该协议根本不允许您这样做。**显然，您也必须在 Android 中使用**POST**来执行此操作。:)

**更新**

我错了。事实上，该协议确实允许您将实体放入请求对象中。这个类可以用来代替 Apache `HttpGet`。

```
public class HttpGetWithEntity extends HttpEntityEnclosingRequestBase {

    public HttpGetWithEntity() {
        super();
    }

    public HttpGetWithEntity(URI uri) {
        super();
        setURI(uri);
    }

    public HttpGetWithEntity(String uri) {
        super();
        setURI(URI.create(uri));
    }

    @Override
    public String getMethod() {
        return HttpGet.METHOD_NAME;
    }
} 
```

并像下面这样使用它，

```
HttpClient client = new DefaultHttpClient();
HttpGetWithEntity myGet = new HttpGetWithEntity("Url here");
myGet.setEntity(new StringEntity("This is the body", "UTF8"));
HttpResponse response = client.execute(myGet); 
```

来源`HttpGetWithEntity`在[这里](http://grepcode.com/file/repo1.maven.org/maven2/io.searchbox/jest/0.0.4/io/searchbox/client/http/apache/HttpGetWithEntity.java?av=h)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T13:39:32.303

如果您想将 JSON 对象添加到您的请求中，它必须是一个 Post 请求，这就是您执行它的方式：

```
public static String sendComment (String commentString, int taskId, String sessionId, int displayType, String url) throws Exception{

    //creating map object to creat Json object from it
    Map<String, Object> jsonValues = new HashMap<String, Object>();
    jsonValues.put("sessionID", sessionId);
    jsonValues.put("NewTaskComment", commentString);
    jsonValues.put("TaskID" , taskId);
    jsonValues.put("DisplayType" , displayType);
    JSONObject json = new JSONObject(jsonValues);

    //creating a post request.
    DefaultHttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(url + SEND_COMMENT_ACTION);

    //setting json object to post request.
    AbstractHttpEntity entity = new ByteArrayEntity(json.toString().getBytes("UTF8"));
    entity.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
    post.setEntity(entity);

    //this is your response:
    HttpResponse response = client.execute(post);
    return getContent(response);    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T14:44:09.820

这是一个很好的例子，如何做到这一点并且它正在工作。

[带有正文的 Apache HttpClient GET](https://stackoverflow.com/questions/12535016/apache-httpclient-get-with-body)

但是我认为这种方法是针对 RESTFUL api 的。

# c++ - 相机标定示例代码（bigmat 矩阵）

> ID：15202301
> 
> 赞同：0
> 
> 时间：2013-03-04T13:06:55.127
> 
> 标签：c++, opencv, camera, calibration

我正在查看 opencv 中的相机校准示例代码。

现在，我很难理解一些代码行。此代码位于 Opencv 2.4.3 的示例代码文件夹中。

我的问题是关于 C++ 而不是 opencv。

这是opencv中的示例代码。

```
if( !rvecs.empty() && !tvecs.empty() )
{   
  CV_Assert(rvecs[0].type() == tvecs[0].type());
  Mat bigmat((int)rvecs.size(), 6, rvecs[0].type());

  for( int i = 0; i < (int)rvecs.size(); i++ )
  {
     Mat r = bigmat(Range(i, i+1), Range(0,3));
     Mat t = bigmat(Range(i, i+1), Range(3,6));

     CV_Assert(rvecs[i].rows == 3 && rvecs[i].cols == 1);
     CV_Assert(tvecs[i].rows == 3 && tvecs[i].cols == 1);
     //*.t() is MatExpr (not Mat) so we can use assignment operator
     r = rvecs[i].t();
     t = tvecs[i].t();
  }
  cvWriteComment( *fs, "a set of 6-tuples (rotation vector + translation vector) for each view",       0 );
  fs << "Extrinsic_Parameters" << bigmat; 
```

我的问题是如何将数据放入“bigmat”中。要为变量设置值，'bigmat' 应该位于右侧，但没有。

有没有人熟悉这种代码？帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:40:01.807

`r``t`矩阵实际上是为 bigmat 数据子集构建的标头。所以当你把东西放进去时`r`，你实际上是在 bigmat 上操作。为了防止这样的事情发生，您需要使用`cv::MAt::clone()`. [查找 mat, Fourth bullet 的文档](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat)。

# android - Android：检测用手指在 ImageView 上行驶？

> ID：15202302
> 
> 赞同：1
> 
> 时间：2013-03-04T13:06:58.950
> 
> 标签：android

使用哪个 onTouchListener 事件我可以检测到“用手指在 ImageView 上驾驶”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:09:47.103

您需要实现[View.OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)。

然后`onTouch()`在你的 Activity 中覆盖，并在 ACTION_DOWN 和 ACTION_UP 中，从 MotionEvent 检查触摸点的坐标，看看它们是否在 ImageView 覆盖的区域内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T11:11:24.073

这就是赋予对象责任的冲突原则。ImageView 应该知道它的触摸事件，而不是活动或片段。

# python - 如何消除撇号前的空格（python）

> ID：15202310
> 
> 赞同：0
> 
> 时间：2013-03-04T13:07:27.530
> 
> 标签：python

例如：

```
print Var1,"'s value is X." 
```

当我执行它时，我得到了这个：

```
Variable 's value is X. 
```

你看到“变量”单词末尾的 e 字母后面的空格了吗？我怎样才能消除它？昏迷和昏迷之间没有任何空间。引号。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:08:05.830

不要使用逗号分隔的参数来打印多个项目。相反，明确构建您想要的字符串：

```
print "%s's value is X." % Var1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T13:09:37.373

使用[字符串格式](http://docs.python.org/2/library/string.html#string-formatting)：

```
 print "{0}'s value is X.".format(Var) 
```

或者您也可以使用`print()`函数（来自 py3.x）并通过`sep=""`（默认值为`sep`is `" "`）：

```
In [6]: Var1="foo"

In [7]: from __future__ import print_function

In [8]: print(Var1,"'s value is X.", sep="")
foo's value is X. 
```

# lucene - java lucene索引和搜索每行创建一个文档的示例代码

> ID：15202314
> 
> 赞同：3
> 
> 时间：2013-03-04T13:07:47.223
> 
> 标签：lucene

我对 lucene 很陌生。我有一个包含 100 条记录的文本文件，每行有两列。第一列是用户 ID，第二列是 url_list（我想这些将是我的文档字段）

我需要使用 lucene 提供搜索功能，该功能将提供包含输入 url 或用户 ID 的文档。为此，我需要为我的文本文件的每一行创建一个 lucene 文档。

**请为此建议我一些示例代码**..

**我正在使用 lucene 版本 3.6.2**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:19:45.597

这是一个简短但很棒的关于 Lucene 的初学者教程。

[Lucene 5 分钟](http://www.lucenetutorial.com/lucene-in-5-minutes.html)

* * *

脚步

1）我假设您正在预先解析文本文件以获取用户 ID、相应的 url 列表。你必须这样做。Lucene 无济于事。Lucene 确实破坏了属于单个字段的文本，但不会破坏文本并将用户 ID 添加到用户 ID 字段并将 urls 添加到 URL 字段。

2）阅读上面的教程。我强烈建议您使用截至目前 4.1的[最新版本的 Lucene。](http://lucene.apache.org/)

3）要记住的特定于您的用例的事情

*   每个文档有两个字段：USER_ID、URL（当然你可以更改这些名称）

*   不要分析（分解成标记）USER_ID 字段的内容。

*   我不确定你想如何存储 URL 字段。您可能不想分析它或使用 StandardAnalyzer 识别 URL 而不进行标记。

4）您可以在教程中找到索引、查询、搜索、检索结果的示例代码。

# android - 如何设置 MediaCodec 创建的编码器缓冲区大小

> ID：15202315
> 
> 赞同：7
> 
> 时间：2013-03-04T13:07:49.857
> 
> 标签：android, buffer, encoder

我正在尝试使用 Nexus 来测试使用 Mediacodec API 的编码。我可以看到编码器提供的 inputBuffers 是 119040（通过记录 inputBuffers.capacity）。但是框架的大小，即输入，是 460800。我在`inputBuffer.put`with收到错误消息`buffer overflow`。所以我正准备将输入缓冲区设置为 460800。我能找到的 API 是`BufferInfo.set`. 但是，我找不到将此设置附加到编码器的方法。有人可以帮忙吗？谢谢！！！

```
encoder = MediaCodec.createByCodecName(codecInfo.getName());
ByteBuffer[] inputBuffers = encoder.getInputBuffers();
if (inputBufferIndex >= 0) {
    ByteBuffer inputBuffer = inputBuffers[inputBufferIndex];
    inputBuffer.clear();
    inputBuffer.put(input);
encoder.queueInputBuffer(inputBufferIndex, 0, input.length, 0, 0);} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-11T00:09:03.137

我迟到了，但基于：[Android MediaCodec Documentation](https://developer.android.com/reference/android/media/MediaFormat.html#KEY_MAX_INPUT_SIZE)我认为更改缓冲区的正确方法是调整 MAX_INPUT_SIZE，例如：

```
int width=800;
int height=480;
encoder = MediaCodec.createByCodecName(codecInfo.getName());
format = MediaFormat.createVideoFormat ("video/avc", width, height);
format.setInteger(MediaFormat.KEY_MAX_INPUT_SIZE,655360); // 0.5MB but adjust it as you need. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T22:52:15.707

您不设置输入缓冲区的大小。大小由 确定`MediaFormat`，特别是宽度、高度和颜色格式。如果您的输入数据具有不同的大小，您需要将其转换为编解码器期望的格式。

这并非完全微不足道，而是可行的。例如，请参阅 CTS [EncodeDecodeTest](http://bigflake.com/mediacodec/#EncodeDecodeTest)中的缓冲区到缓冲区测试。测试查询编解码器以查看支持的颜色格式，生成该格式的帧，将它们提交给编码器，然后解码视频并确认输出的内容与输入的内容相同。

该测试通常需要 API 18 (Android 4.3)，但缓冲区到缓冲区的代码将在 API 16 中运行。它是否适用于任何给定的设备是一个不同的问题——因为 CTS 测试直到 API 才存在从 18 开始，4.3 之前的设备可能会出错。

# php - .htaccess 重定向除 css 和 javascript 之外的所有扩展

> ID：15202316
> 
> 赞同：3
> 
> 时间：2013-03-04T13:07:52.473
> 
> 标签：php, html, apache, .htaccess, web-applications

我有一个**.htaccess**文件，它将任何扩展名重定向到非扩展名 url 并显示*请求的文件名 + .php*。它适用于条件的**(.*)**部分。

当我输入*domain.com/file.html*或*domain.com/file.xml*时，它会显示*file.php*并且 url 看起来像*domain.com/file*。

我只是想知道如何从表达式中排除 .js 和 .css 之类的扩展名。我不想将它们重定向到任何其他 php 文件。

我尝试了类似：**(.*!.(js|css))**而不是**(.*)**但我找不到有效的解决方案...

当前代码是这样的：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

#
# to display the name.php file for any requested extension (.*)
#
RewriteRule ^(.*)\.(.*) $1\.php

#
# to hide all type of extensions (.*) of urls
#
RewriteCond %{THE_REQUEST} ^[A-Z]+\s.+\.(.*)\sHTTP/.+
RewriteRule ^(.+)\.php $1 [R=301,L]

#
# no extension url to php
#
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule (.*) $1\.php [L]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T13:28:41.040

如果您的 Apache 版本支持它，您可以使用“负前瞻”并像这样编写第一个 RewriteRule：

```
RewriteRule ^(.*)\.(?!js|css)([^.]*)$ $1\.php 
```

The `[^.]`part makes sure the `(.*)\.` matches everything until the last `.`, "positioning" the negative lookahead at the right spot.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:11:19.220

重定向的主要思想是转发一些不存在的东西，所以重定向只会在请求的 url 不存在的情况下起作用。如果您有一个`http://mysite.com/js/script.js`文件，它将始终像普通文件一样打开该文件。

因此，在您的情况下，如果 css 和 js 文件确实存在，则不需要特定的重定向。

您可能需要做的是指出这些文件的**完整**路径。例如：

*   [http://mysite.com/js/script.js](http://mysite.com/js/script.js)（有效）
*   /js/script.js（作品）
*   js/script.js （如果您在不同的重定向目录下，则将失败，然后是 root ）

ETC...

# javascript - Plone 中的 Galleria 动态 Javascript/jQuery 问题

> ID：15202321
> 
> 赞同：1
> 
> 时间：2013-03-04T13:08:02.863
> 
> 标签：javascript, slider, plone, galleria, theming

所以这是交易。我在 plone 中的真正画廊遇到了很多麻烦，所以我买了带有十二主题的 Galleria 幻灯片。我做了正常的事情来运行 Galleria，但现在出现了问题。

这是 HTML 部分：

```
<div id="content"> 
    <!-- GALLERIA -->
    <div id="galleria">
    </div>
    <!-- /GALLERIA -->
</div> 
```

使用这条规则，我会抓取所有带有图像的链接并将它们放入我的 Galleria DIV 中：

```
<replace css:content=".item a" css:theme-children="#galleria" /> 
```

所以这是这个操作的结果：

```
<!-- GALLERIA -->
    <div id="galleria">
        <a href="...">
            <img src="..." />
        </a>
        <a href="...">
            <img src="..." />
        </a>
        <a href="...">
            <img src="..." />
        </a>
    </div>
<!-- /GALLERIA --> 
```

所以这就是问题所在。虽然来自 Galleria 的所有 js 和 css 文件都已成功加载，但没有任何反应。Galleria 应该在图像周围放置一些 div 来创建幻灯片。

Javascript 已打开。jQuery 正在工作。

有没有人知道为什么这在 plone 中不起作用？

编辑：Chrome 在他的控制台中删除此错误消息：

```
Uncaught SyntaxError: Invalid regular expression: /http://localhost:8080/lox/home/++theme++lox.responsive/galleria/themes/twelve/galleria.twelve.css/: Nothing to repeat galleria-1.2.9.js:847
(anonymous function) galleria-1.2.9.js:847
jQuery.extend.each jquery.js:648
jQuery.fn.jQuery.each jquery.js:270
Utils.loadCSS galleria-1.2.9.js:846
(anonymous function) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:22:50.380

转动这个：

```
$('link[rel=stylesheet]').each(function() {
    if ( new RegExp( href ).test( this.href ) ) {
        link = this;
        return false;
    }
    return false;
}); 
```

进入这个：

```
$('link[rel=stylesheet]').each(function() {
    /*if ( new RegExp( href ).test( this.href ) ) {
        link = this;
        return false;
    }*/
    return false;
}); 
```

达成协议。:)

# javascript - 如何摆脱 windows.open 的弹出窗口阻止程序

> ID：15202330
> 
> 赞同：1
> 
> 时间：2013-03-04T13:08:27.183
> 
> 标签：javascript, jquery

我正在使用 windows.open 打开这样的页面：

```
 window.open("PlayAPI?CallIDno=" + CallIDno + "&PASSWORD='" + encodeURIComponent(PASSWORD) + "'"); 
```

但我收到弹出窗口阻止程序错误。

在其他页面上，我得到了此代码，但没有弹出窗口阻止程序错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:15:48.547

您可以使用以下脚本来检查弹出窗口是否被阻止

```
var w = window.open('http://google.com');
if(!w) { 
   //an alert in this example
   alert(' pop-up blocker is enabled. ');
} 
```

但是如果弹出窗口被阻止，您将无法打开窗口，因此为避免它，您可以使用 jquery 创建自己的自定义弹出窗口，如下所示：[**Jquery Dialog**](http://jqueryui.com/dialog/)或[Top 10 jQuery Modal Box Plugins](http://web.enavu.com/tutorials/top-10-jquery-modal-box-plugins/)，它们将允许您向用户提供模型弹出窗口。

# unity3d - 如何扩展 Unity 应用程序？

> ID：15202338
> 
> 赞同：2
> 
> 时间：2013-03-04T13:09:21.123
> 
> 标签：unity3d, extend, urbanairship.com

我知道我应该在 Unity 的问答中发布这个问题，但不幸的是他们反应迟钝。:P 无论如何，Urban Airship 要求我扩展**Application**而不是（像往常一样）**Activity**。在 Unity 中有没有办法做到这一点？

我尝试扩展 Activity ，但它只能部分工作。它可以工作，我会在手机上收到通知，但只有在应用程序实际运行时（如果不是也应该工作）并且当我点击通知时它会崩溃我的应用程序。正如我在这里读到的：[Re-launching android application when user clicks Urban Airship notification](https://stackoverflow.com/questions/14849388/re-launching-android-application-when-user-clicks-urban-airship-notification)问题是我扩展了 Activity 而不是 Application。如果在 Unity 中扩展 Application 是不可能的，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:57:24.090

终于找到了（应该几天前，但谷歌一直给我错误的结果:()：http: [//forum.unity3d.com/threads/126833-Can-the-Application-class-be-overridden-or-extended-in -a-插件](http://forum.unity3d.com/threads/126833-Can-the-Application-class-be-overridden-or-extended-in-a-plugin)

# java - Android 中的 XML 到 Java 代码

> ID：15202341
> 
> 赞同：-6
> 
> 时间：2013-03-04T13:09:25.623
> 
> 标签：java, android

我想做什么将 xml 转换为 android 代码。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/screen"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/connectBtn"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Connect" />

        <TextView
            android:id="@+id/space"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <Button
            android:id="@+id/disconnectBtn"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Disconnect" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

       <Button 
           android:id="@+id/btn1" 
           android:layout_width="0dp"
           android:layout_height="wrap_content"
           android:layout_weight="1"
           android:text="@string/btn1_txt" />

        <Button 
           android:id="@+id/btn2" 
           android:layout_width="0dp"
           android:layout_height="wrap_content"
           android:layout_weight="1"
           android:text="@string/btn2_txt" />

         <Button 
           android:id="@+id/btn3" 
           android:layout_width="0dp"
           android:layout_height="wrap_content"
           android:layout_weight="1"
           android:text="@string/btn3_txt" />
        </LinearLayout> 
```

以上代码需要转换为java代码。

为此，我需要在 java 中创建多个线性布局。这是正确的方法吗？如果不是正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:15:45.347

您可以通过执行以下操作来夸大其视图：

```
LayoutInflater inflater = (LayoutInflater)context.getSystemService
  (Context.LAYOUT_INFLATER_SERVICE);
inflater.inflate(...); 
```

或者，您可以简单地创建一个视图，如

```
final LinearLayout l = [...]
//add stuff
l.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
//etc... 
```

# javafx-2 - Javafx分页更改pageCount问题

> ID：15202354
> 
> 赞同：3
> 
> 时间：2013-03-04T13:09:56.993
> 
> 标签：javafx-2

*   我创建分页

    ```
    pagination = PaginationBuilder.create().pageFactory(new Callback<Integer, Node>() {
        @Override
        public Node call(Integer pageIndex) {
            return createChartPage(pageIndex);
        }
    }).build(); 
    ```

*   我希望总页数可以改变。

*   当我设置PageCount（totalPages）时。更改 pageCountproprety 通知 pageFactory 并使用 index = 0 进行回调；

    ## - 我的问题。

*   当我更改 PageCount 时，我希望页面索引不会改变。

*   换句话说，我如何从 pageCountProperty 中删除ChangeListener。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-18T06:40:55.800

在工厂方法上使用此解决方法，直到它在 JDK 中得到修复：

```
 private Parent createPage(Integer pageIndex) {

    // Fix for Pagination.getPageCount resetting the current index to 0
    if (Math.abs(previousPageIndex - pageIndex) > 1) {
        mainPagination.setCurrentPageIndex(previousPageIndex);
        return root.get(previousPageIndex);
    } else {
        // Normal navigation
        previousPageIndex = pageIndex;
        return root.get(pageIndex);
    }

} 
```

# javascript - CKEditor 结束/开始标签检测

> ID：15202361
> 
> 赞同：0
> 
> 时间：2013-03-04T13:10:21.143
> 
> 标签：javascript, html, ckeditor

在我的上一篇文章： [Finding Touched elments CKEDITOR](https://stackoverflow.com/questions/15084648/finding-touched-elments-ckeditor)中，我正在寻找被触动的元素。那篇文章的答案运行良好。

但现在我遇到了另一个问题。当插入符号设置为标签/块的前面或末尾时。我只能看到父级是跨度。但可能是用户试图将插入符号放在标签之外。例子：

```
this ^<span>^test</span> text 
```

插入符号可以设置为两个“^”，而不会看到任何区别。

（单选（startContainer == endContainer））

上一篇文章中的 anwser 确实会检测到跨度是否位于标签之外。但只是在标签内部，它不会检测到哪个给出了新场景。我需要一种方法来避免新场景并让它像触摸块一样处理。

我想检测插入符号是否在跨度内并触摸开始。结尾也一样，只有这样它才会触及结尾。函数 range.checkStartOfBlock 返回 false，这不是解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:54:08.457

我找到了 Mozilla 的修复程序，现在我也想要 IE7 及更高版本的修复程序。

Mozilla 修复：开始检查：

```
range.startOffset === 0 //Means StartOfBlock 
```

检查结束：

```
range.endOffset === range.startContainer.getText().length //Means EndOfBlock 
```

==== 编辑 ====

来自 rangy.googlecode.com 的 rangy range 库提供了一个可接受的解决方案。（提供了某种兼容的 startOffset 和一些其他功能。）我需要对 Internet Explorer 进行大约 3 次检查，而对于 Mozilla 只需要 1 次检查。但它似乎是万无一失的。

仍然非常欢迎所有想法。

# jquery-mobile - 如何使用 jQuery Mobile 创建合适的多页结构？

> ID：15202362
> 
> 赞同：0
> 
> 时间：2013-03-04T13:10:23.437
> 
> 标签：jquery-mobile

我想创建一个多页 jQuery Mobile 应用程序，但不知道如何以正确的方式做到这一点。

是更好地为每个页面使用一个 HTML 文件，还是更好地将所有页面放在一个文件中？如何更改页面并对初始化、停止、启动、返回页面等事件做出反应？

我想知道使用 jQuery Mobile 中的所有事件构建页面更改的完美方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:33:59.663

这取决于您的应用程序，您可以将所有页面放在一起或将它们分开。所有 Jquery 事务都使用这两种方法。

在此处阅读有关此主题的更多信息：[页面](http://view.jquerymobile.com/1.3.0/docs/widgets/pages/)

# java - 如何从其他数组中获取相同的索引值？

> ID：15202364
> 
> 赞同：1
> 
> 时间：2013-03-04T13:10:26.387
> 
> 标签：java, arrays, indexing, compare

我有两个数组，我想从其他数组访问相同索引值的数据。

两个数组列表：

```
ArrayList<Integer> Position = new ArrayList<Integer>();
ArrayList<String> List_Data = new ArrayList<String>(); 
```

现在我的`Position`数组包含整数值，如数据`i.e 0,3,5 out of 10`记录的索引。我只想得到那些索引应该是的字符串 `i.e 0,3,5 out of 10`。

例子 ：

```
String Array >> [A,B,C,D,E,F,G,H,J,K]; 

Index >> Now i am selecting 2 ,5 index data.

Final Output as string >> C,F 
```

所以最后我从数组中得到实际的字符串。

我也得到[了这个](http://mantascode.com/wp-content/uploads/2011/01/twoarray.jpg)和其他一些链接，但不知道如何做到这一点。

请任何人帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:14:40.820

试试这个，如果我正确理解你想要什么（否则让我知道）

```
String sr=Lista_Data.get(Position.get(INDEX YOU NEED; EG 1, 5, 1000...)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:18:53.513

`ArrayList`您可以通过使用`get`函数获取对象。然后，您可以将其用作另一个`ArrayList`.

```
String res = "";
for (Integer pos : Position) {
    res += List_Data.get(Position.get(pos));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T13:30:59.820

您唯一需要的是方法`indexOf(...)`。`List`

```
public String getStringByIndex(Integer index) {
    return List_Data.get(Position.indexOf(index));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T14:39:01.710

我并不是说上面的代码是错误的，但它不能根据我的需要工作。或者由于我的其他代码限制，我无法处理。

最后，我得到了我想要的：

```
for (int i = 0; i < Poisition.size(); i++)
{

 System.out.println("Selected Data --->"+ List_Data.get(Poisition.get(i)));

} 
```

# c# - 关于属性的论点

> ID：15202367
> 
> 赞同：0
> 
> 时间：2013-03-04T13:10:33.560
> 
> 标签：c#, properties

假设有一个枚举定义如下：

```
public enum Beep
{
  HeyHo,
  LetsGo
} 
```

我想知道是否有可能改善以下属性：

```
public Dictionary<Beep, String> Stuff{ get; set; }
...
String content = Stuff[Beep.HeyHo] 
```

因为现在的方式是，我检索字典，然后挑选出我需要的元素。我想知道（a）是否有可能，如果可以（b）建议创建类似这样的**伪**代码。

```
public String Stuff{ get<Beep>; set<Beep>; }
...
String content = Stuff[Beep.HeyHo] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:16:21.690

您可以将[索引器](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)应用于您的课程。

推荐使用，因为它改进了封装。例如，完全有可能使用原始代码将 Dictionary 完全替换为不同的字典——这可能是不可取的。

```
public class MyClass
{
    // Note that dictionary is now private.
    private Dictionary<Beep, String> Stuff { get; set; }

    public String this[Beep beep]
    {
        get
        {
            // This indexer is very simple, and just returns or sets 
            // the corresponding element from the internal dictionary. 
            return this.Stuff[beep];
        }
        set
        {
            this.Stuff[beep] = value;
        }
    }

    // Note that you might want Add and Remove methods as well - depends on 
    // how you want to use the class. Will client-code add and remove elements,
    // or will they be, e.g., pulled from a database?
} 
```

用法：

```
MyClass myClass = new MyClass();
string myValue = myClass[Beep.LetsGo]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:20:02.957

您还可以使用[索引器](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)。

```
class MyClass
{
    private readonly Dictionary<Beep, string> _stuff = new Dictionary<Beep, string>();

    public string this[Beep beep]
    {
        get { return _stuff[beep]; }
        set { _stuff[beep] = value; }
    }
} 
```

现在，而不是打电话

```
var obj = new MyClass();
string result = obj.Stuff[Beep.HeyHo]; 
```

你可以打电话

```
var obj = new MyClass();
string result = obj[Beep.HeyHo]; 
```

索引器的工作方式与属性非常相似，但至少有一个参数用作索引。每个类只能有一个索引器，但是可以创建它的不同重载。与方法相同的[重载](http://csharpindepth.com/Articles/General/Overloading.aspx)规则适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:18:07.297

像这样使用[`Indexer`](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)

```
public class Stuff
{
    public Dictionary<Beep, String> _stuff { get; set; }
    public enum Beep
    {
        HeyHo,
        LetsGo
    }

    public Stuff()
    {
        _stuff = new Dictionary<Beep, string>();
        // add item
        _stuff[Beep.HeyHo] = "response 1";
        _stuff[Beep.LetsGo] = "response 2";
    }

    public string this[Beep beep]
    {
        get { return _stuff[beep]; }
    }
} 
```

样品用法：

```
public static class Program
{
    private static void Main()
    {
        Stuff stuff = new Stuff();

        string response;
        response = stuff[Stuff.Beep.HeyHo]; // response 1
        response = stuff[Stuff.Beep.LetsGo]; // response 2

    }
} 
```

# c++ - 用 C++ 组织代码

> ID：15202368
> 
> 赞同：6
> 
> 时间：2013-03-04T13:10:33.870
> 
> 标签：c++

我刚从 java 转到 c++。我对组织源代码有点困惑。

在 Java 中，我们有包来组织每个模块。

组织 c++ 源代码的常用方法有哪些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T13:25:58.687

如果您查看 C 或 C++ 中的大型开源项目，您会发现组织源代码的方式多种多样。然而，一些常见的场景`module`是`component`在每个. 或者，您可以反过来使用它，并使用and 。`src``include``module``src\module``include\module`

如果您有测试代码，通常会进入 a`module\test`或`test\module`.

大型 C++ 项目的一个有趣挑战是“在哪里放置组件之间共享的头文件”。有时有一个`include\public`（或`public\include`），有时它们带有各自的组件。

将组件中“可供其他人使用”的部分与仅在内部使用的组件分开可能非常有用 - 因为可以轻松更改内部的某些内容而对其他组件没有影响或影响很小在组件外部“可见”的组件将需要更多注意 - 如果组件作为 DLL 发布并且您更新 DLL 而不重新编译使用该组件的部分中的源代码 [如果您有第三方客户端不这样做'如果您没有源代码（或者至少不太可能定期构建它），您不一定希望每次进行一些更改时都强制他们重新构建他们的项目。

对于大型项目，`namespaces`用于防止名称冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:14:54.563

部分回应：

您可以首先将文件组织在不同的文件夹中，例如在 Java 中。当你#include 一个头文件时，你将输入 relative/path/from/src 而不是 path.of.the.package。

C++ 还支持命名空间概念：[http ://www.cplusplus.com/doc/tutorial/namespaces/](http://www.cplusplus.com/doc/tutorial/namespaces/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:24:16.207

第一个也是显而易见的规则：如果您正在从事团队/协作项目，请遵循项目的明确（组织的书面最佳实践）或隐含的（研究如何完成）规则。

如果您自己在一个项目中，由于不同的互补组织概念，您在 C++ 中有很多自由：

*   命名空间，
*   类，
*   文件系统文件夹，
*   源文件

因为你比在 java 中拥有更多的自由，所以我建议将文件夹映射到命名空间，并将文件映射到合理的类：

*   为每个类使用 .h / .cpp 对，但如果看起来合乎逻辑并且避免有很多小文件，您也可以包含帮助程序类或其他链接类。
*   将命名空间中的类和相关文件分组到具有命名空间名称的文件夹中。

这样，客户端可以编写如下内容：

```
#include "groupA/subgroupB/classC.h"
using namespace groupA;
subgroupB::classC object; 
```

# jquery-ui - 如何隐藏此“关闭”按钮

> ID：15202371
> 
> 赞同：-2
> 
> 时间：2013-03-04T13:10:42.983
> 
> 标签：jquery-ui, dialog

我正在使用这个 jquery-ui 来显示一个对话框，但它带有一个名为“close”的 freebee，我不想要它，

你可以在这里找到其余的代码，[为什么我的对话框不起作用](https://stackoverflow.com/questions/15199779/why-my-dialog-box-isnt-working)

在 html 中，它的出现是

```
<a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button">
<span class="ui-icon ui-icon-closethick">close</span>
</a> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T13:14:12.160

你看过文档吗？

[http://api.jqueryui.com/dialog/](http://api.jqueryui.com/dialog/)

> 隐藏关闭按钮
> 
> 在某些情况下，您可能想要隐藏关闭按钮，例如，如果按钮窗格中有关闭按钮。实现这一点的最佳方法是通过 CSS。例如，您可以定义一个简单的规则，例如：

```
.no-close .ui-dialog-titlebar-close { display: none; } 
```

> 然后，您可以简单地将 no-close 类添加到任何对话框中以隐藏它的关闭按钮：

```
$( "#dialog" ).dialog({   dialogClass: "no-close",   buttons: [
    {
      text: "OK",
      click: function() {
        $( this ).dialog( "close" );
      }
    }   ] }); 
```

# mysql - 哪种索引更适合简单检查

> ID：15202379
> 
> 赞同：0
> 
> 时间：2013-03-04T13:11:14.773
> 
> 标签：mysql, performance

我有一个客户表，其中包含 customer_id、customer_name、email、password、status 等字段。

目前只有 customer_id 被索引（因为它是主键）

我有几个选择客户的查询如下

```
select * from customer 
where status=1 and email<>'' 
and email is not null 
and password<>'' 
and password is not null 
```

这运行缓慢，因为我有 130 万条记录所以我正在考虑在电子邮件字段上添加索引。我想知道哪个索引会使简单索引更好，或者我必须使用 FULLTEXT 索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:37:08.917

索引有助于在`FULLTEXT`列中搜索单词。

如果您真的只是搜索**空**（和非空）电子邮件和密码，那么一个简单的索引就足够了。

对于这个查询，更相关的索引将是：

```
ALTER TABLE customer ADD INDEX (status, email, password); 
```

[编辑]

*正如 Dukeling等人*正确指出的那样。`customers`，如果您的大多数人确实设置了电子邮件或密码，那么这样的索引可能毫无用处。

假设上述情况（您的大多数客户确实有电子邮件和密码设置），那么您的查询返回许多记录，任何索引都将无济于事（如 nos 和 raina77ow 所建议的那样）。

唯一可以确定的是，`FULLTEXT`在这种情况下索引是无用的。

# android - Android 中的声音跟踪

> ID：15202382
> 
> 赞同：0
> 
> 时间：2013-03-04T13:11:17.757
> 
> 标签：android, audio

Android 应用程序[Sound Track](https://play.google.com/store/apps/details?id=com.schematiclabs.soundtracking&hl=en)正在做以下工作。

*   听歌曲/音轨
*   从服务器搜索曲目
*   提供有关曲目的完整详细信息，例如电影名称、专辑名称、歌手等

我的问题是**他们使用哪种类型的机制来跟踪声音/歌曲？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:15:25.783

*   使用麦克风录制一小段歌曲。
*   上传到服务器
*   针对您的摘录和您制作的包含数千首歌曲的预编译数据库运行匹配算法。
*   找到最佳匹配，并将结果发送回设备。
*   向用户显示信息

# sql - 星型模式中我的时间维度表的属性

> ID：15202389
> 
> 赞同：3
> 
> 时间：2013-03-04T13:11:34.607
> 
> 标签：sql, uml, data-warehouse, star-schema

我正在使用星型模式建模构建 DW。我会将它用于 pentaho 的 BI 项目。我当然会有一个时间维度表。我将以不同的粒度（日、周、月、年，也许其他）分析我的事实表

我应该在我的维度表中为每个粒度放置一个属性（所以我有一天属性、一个月属性、一年属性......）还是应该只写日期然后用这个日期计算所有内容（获取日期的月份，日期的年份...）？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:56:35.477

除了日、周、月和年，您还应该考虑其他属性，例如“公司假期”或“财政季度”。这可能是一个巨大的资源，用于驱动不同时间窗口的相同查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T14:04:39.027

我会将日期的属性添加为它们自己的列。这不会占用更多空间，并且通常可以让查询优化器更好地计算出有多少维度表记录与给定标准匹配（例如，day_of_month = 31）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-05T18:36:55.127

通常，越多越好。

这是我正在使用的示例...

> ledger@localhost-> select * from date_dimension where date = '2015-12-25';
> 
> -[ 记录 1 ]----+--------
> 
> 日期 | 2015-12-25
> 
> 年份 | 2015
> 
> 月 | 12
> 
> 月名 | 十二月
> 
> 天 | 25
> 
> 一年中的一天 | 359
> 
> 工作日名称 | 星期五
> 
> 日历周| 52
> 
> 格式化日期 | 25\. 12\. 2015
> 
> 夸脱| 第四季度
> 
> 年季| 2015/Q4
> 
> 年月 | 2015/12
> 
> 年历周| 2015/52
> 
> 周末 | 平日
> 
> 美国假日 | 假期
> 
> 奥地利假日| 假期
> 
> 加拿大假日| 假期
> 
> 期间 | 圣诞季节
> 
> 启动 | 2015-12-21
> 
> 温德 | 2015-12-27
> 
> 月开始 | 2015-12-01
> 
> 月末 | 2015-12-31 00:00:00

它基于来自 PostgreSQL wiki 的查询... [https://wiki.postgresql.org/wiki/Date_and_Time_dimensions](https://wiki.postgresql.org/wiki/Date_and_Time_dimensions)

用更多的东西来增加它会很有趣：

*   宗教日（复活节、许多圣徒日、斋月、犹太节日等）

*   相关司法管辖区的法定假日。我工作的公司最终公布了爱尔兰银行假期，因为许多客户通过银行转账付款。

*   如果您在法国经营，您可能需要 Lundi、Mardi、Mercredi ……而不是英文日期名称。

*   夏令时（真/假）将是一个很好的补充。

# c# - 我找不到包含特定单词 c# linqtotwitter 的推文列表

> ID：15202394
> 
> 赞同：0
> 
> 时间：2013-03-04T13:11:49.000
> 
> 标签：c#, twitter, find, word

我必须找到一个包含用户给出的特定单词的推文列表。我没有找到执行此操作的特定功能。

我尝试了以下但没有奏效：

```
 public List<Status> TrouverMot()
        {
            var srch =
                (from search in MainPage.twitterCtxProp.Status         //a voir!
                 where search.Type ==StatusType.User &&
                       search.Text.Contains(MainPage.texte)
                 select search).ToList();
            List<Status> liste = new List<Status>();
            liste = srch;

            return liste;
        } 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:15:28.797

您可以在 LinqToTwitter API 中使用此方法： [http ://linqtotwitter.codeplex.com/wikipage?title=Searching%20Twitter&referringTitle=Performing%20Searches%20and%20Finding%20Trends](http://linqtotwitter.codeplex.com/wikipage?title=Searching%20Twitter&referringTitle=Performing%20Searches%20and%20Finding%20Trends)

# android - java.lang.ArrayIndexOutOfBoundsException：长度=0；索引=1

> ID：15202395
> 
> 赞同：-1
> 
> 时间：2013-03-04T13:11:50.137
> 
> 标签：android

我正在做消息传递平台。Msgdesc 是我的消息，但有人发送消息，有人不发送。所以我在 msgdesc 中有一些日期。如果我不存在任何数据，我什么也不想做，但如果我想看到带有名字的 msgdesc surname.But 我得到**java.lang.ArrayIndexOutOfBoundsException: length=0; index=1** 有人可以帮帮我吗？

代码：

```
for (int i = 0; i < midArr.length; i++) {
    //getting desc from db
    getMessagedbXML = messagedbInstance.getMessages(mid,midArr[i]);             
    parseXMLDB(getMessagedbXML);
    UserList=new String[midArr.length];
    **//getting error here**    
    if((msgdesc[i].length()==0)) {
        UserList[i] = nameArr[i]+" "+surnameArr[i];
    } else {
        UserList[i] = nameArr[i]+" "+surnameArr[i]+" "+msgdesc[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:16:42.460

改成这样？

```
if(msgdesc.length() == 0 || msgdesc[i].length() == 0) 
```

*（不知道是什么类型`msgdesc`）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T13:16:20.410

我的猜测是您使用了错误的变量（msgdesc）。

或者更确切地说，您使用了错误的测试。

采用

```
if (msgdesc.length()!=0 && msgdesc[i].length()!=0)) 
```

代替

```
if (msgdesc[i].length()!=0)) 
```

# vim - vim shell 命令集成

> ID：15202401
> 
> 赞同：2
> 
> 时间：2013-03-04T13:12:15.993
> 
> 标签：vim

好的，我有一个相当简单的问题：如何绑定`vim`命令/热键来执行一些复杂的 shell 脚本？

例如，我想优化 css 文件中的 base64 内联图像。我知道，在 shell 中它会是这样的：

```
echo `selection` > /tmp/img.png.b64
base64 -d /tmp/img.png.b64 > /tmp/img.png
optipng -o7 /tmp/img.png
base64 -w 0 /tmp/img.png > `selection` 
```

我想放入`selection`脚本，然后获取脚本执行的结果并用该结果替换选定的内容。我将工作流程视为在可视块模式下选择 base64 部分并键入例如`:'<,'>optipng`或按一些热键。问题是如何设置 vim 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:34:04.007

Vim 允许通过外部命令*过滤*行`:[range]!{cmd}`。如果你的`optipng`命令可以从 stdin 获取输入并打印到 stdout，你可以直接使用它；否则，在一个小的 shell 脚本包装器的帮助下。详情请参阅`:help :range!`。

一个限制是这仅适用于**整行**，而不是部分，即使在视觉上选择时也是如此。您可以使用[vis 插件](http://vim.sourceforge.net/scripts/script.php?script_id=1195)解决此问题；然后它会是这样的：

```
:'<,'>B !optipng -o7 
```

# python - 用于排除特定字符串的 REGEX 模式

> ID：15202407
> 
> 赞同：0
> 
> 时间：2013-03-04T13:12:44.207
> 
> 标签：python

我有一个具有这种格式的字符串：

```
some text <br>septembar 1989<br> 
```

我正在使用这个正则表达式找到月份和年份部分

```
<br/?>(?!=b\.)(.*?\b\d{4}\b) 
```

我得到了我想要的——`septembar 1989`

但是，我现在有`<br>`插入时的情况

```
<br>some text <br>septembar 1989<br> 
```

结果：`some text <br>septembar 1989`

您能否建议如何修改我现有的模式以支持这两种情况？我想我需要以某种方式排除`<br>`匹配`.*?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:52:52.107

我写了一个简单的代码，可能对您有所帮助：

```
import re
def getDate(str):
 m = re.match("[\<br>]*[\w\s]*\<br>([\w\s]*[12][0-9]{3})",str);
 return m.group(1)

print getDate("some text <br>dec 1989<br>");
print getDate("<br> some text <br>septembar 1989<br>");
print getDate("grijesh chuahan <br>feb 2009<br>"); 
```

输出：

```
dec 1989
septembar 1989
feb 2009 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:15:46.793

尝试这个

```
<br/?>([^<]+)\d{4} 
```

`[^<]`表示匹配除您想要的开始标签之外的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:24:29.407

```
import re

ss = 'dfgqeg<br>some text <br>septembar 1989<br>'

reg = re.compile('<br(?: /)?>'
                 '(?!.+?<br(?: /)?>.+?<br(?: /)?>)'
                 '(.+?\d{4})'
                 '<br(?: /)?>')

print reg.search(ss).group(1) 
```

.

*   `'<br(?: /)?>'`捕获`<br>`和`<br />`发生

.

*   `'(?!.+?<br(?: /)?>.+?<br(?: /)?>)'`是一个前瞻断言，
    它验证在它在分析文本中开始的位置之后，没有描述为连续的字符集：

    *   `.+?` 任何类型的字符，但`?`该部分必须在遇到`<br>`或`<br />`遇到时 立即停止的命令
    *   `<br>`或者`<br />`
    *   再次出现任何类型的字符之前`<br>`或`<br />`
    *   `<br>`或者`<br />`

# linux - 如何读取位于 Ubuntu 终端本地的 json 文件的属性值

> ID：15202408
> 
> 赞同：4
> 
> 时间：2013-03-04T13:12:45.243
> 
> 标签：linux, shell, ubuntu

我有一个如下的 json 文件：

```
{
  "result": {
    "covered_percent": 47.06
  }
} 
```

以及如何在 Ubuntu 终端上读取此值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-05T09:50:02.973

作为较短的一个衬里，您可以使用以下内容：

```
cat some_file.json | python -mjson.tool 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T13:17:35.253

您没有提到哪个版本的 ubuntu，但是作为终端的 1 班轮，这对我有用（假设 json 文件在同一目录中并称为 json_file.json）

```
python -c "import json;print json.loads(open('json_file.json', 'r').read())['result']['covered_percent']" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-19T20:34:11.003

使用`jq`是另一种选择：

```
$ val=( $(jq '.result.covered_percent' my_file.json))
$ echo $val
47.06 
```

# oracle - 单个查询中的 Oracle SQL 百分比

> ID：15202420
> 
> 赞同：1
> 
> 时间：2013-03-04T13:13:53.727
> 
> 标签：oracle

到目前为止，我有：

```
SELECT bike_no, maint_fault_details, maint_action_taken, 
       maint_fault_date, maint_action_date
FROM mainthistory
WHERE (maint_fault_date + 5) < maint_action_date ; 
```

试图让它以百分比的形式显示结果，即 10% 的自行车需要超过 5 天才能修复。有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:21:37.093

这将计算条件为真的所有条目并将其除以行数。

```
SELECT 100 * SUM( CASE WHEN (maint_fault_date + 5) < maint_action_date
                   THEN 1
                   ELSE 0 END
       ) / COUNT(*) AS percentage
FROM mainthistory; 
```

# jquery - 拖动 JQuery UI 上的可排序元素的缩放大小

> ID：15202422
> 
> 赞同：1
> 
> 时间：2013-03-04T13:14:00.357
> 
> 标签：jquery, jquery-ui, scale, jquery-ui-sortable

在可排序的 jQuery UI 中拖动项目时，我想缩小/放大我的图像/div

这个[小提琴](http://jsfiddle.net/tdhulster/sr5QM/)几乎显示了我想要的东西，而不是我想以百分比调整图像的大小，以便将图像相对于它自己的大小向上或向下缩放 50%。

```
$(".icon").draggable({
start: function() {
    $(this).height(100).width(100);
},
stop: function() {
    $(this).height(50).width(50);        
} 
```

});

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:23:25.703

不清楚你的意思是它放大/缩小 50% 是什么意思？相对于什么？自己的尺寸？任何容器的大小？

这显示了如何让它相对于自己的大小按比例放大/缩小。[小提琴](http://jsfiddle.net/sr5QM/1/)

对脚本进行了更改：

```
$(".icon").draggable({
    start: function() {
        $(this).height($(this).height()+ ($(this).height()/2)).width($(this).width()+ ($(this).width()/2));
    },
    stop: function() {
        $(this).height($(this).height() - ($(this).height()/3)).width($(this).width() - ($(this).width()/3));
    }
}); 
```

# django - 摆脱 django 测试套件中的空模型.py

> ID：15202424
> 
> 赞同：9
> 
> 时间：2013-03-04T13:14:05.277
> 
> 标签：django, django-models, django-testing

我有两个纯服务应用程序，它们充当我的核心模型的仆人。因此，他们没有任何自己的模型。

虽然第一个服务的测试套件运行良好，但第二个服务会引发以下错误：

```
django.core.exceptions.ImproperlyConfigured: 
App with label location is missing a models.py module. 
```

如果我添加一个空的 models.py，套件运行良好。

我无法发现应用程序之间在架构/结构方面的差异。但我想摆脱空的、不需要的models.py。

我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T23:31:41.813

**更新：**你问什么现在是可能的。使用 Django 1.7，您不再需要`models.py`文件。-[发行说明](https://docs.djangoproject.com/en/1.7/releases/1.7/#app-loading-refactor)

*以前*：Django 测试要求每个应用程序都有一个`models.py`文件。可以将其留空（或提供有用的评论！）。[关于没有模型的应用程序问题的票务讨论](https://code.djangoproject.com/ticket/7198)。直接来自代码（在[1.4](https://github.com/django/django/blob/1.4/tests/modeltests/empty/tests.py#L28-L29) / 仍然在[1.5](https://github.com/django/django/blob/1.5/tests/modeltests/empty/tests.py#L29-L30)中添加）：

> 测试运行器当前不会加载没有 models.py 文件的测试模块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:00:16.253

据我所知，有必要在每个 Django 应用程序中包含一个“models.py”模块以使其正常运行

# review-board - 审查委员会是否支持对附加源文件中的个别行进行评论？

> ID：15202427
> 
> 赞同：0
> 
> 时间：2013-03-04T13:14:16.673
> 
> 标签：review-board

我下载并安装了[Review Board](http://www.reviewboard.org/)，以评估它是否适合我们团队的工作流程。我看到您可以将文件附加到评论中。当我去查看附件时，Review Board 允许我为整个文件添加评论，但我没有看到对文件中的各个行发表评论的方法。

***如何评论附加源文件中的个别行？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T14:49:01.277

根据当前版本的[官方文档](http://www.reviewboard.org/docs/manual/1.7/)（更具体的，请参见[创建审核请求](http://www.reviewboard.org/docs/manual/1.7/users/review-requests/creating/)和[审核文件附件](http://www.reviewboard.org/docs/manual/1.7/users/reviews/reviewing-files/)页面），只能对非差异文件**整体**进行评论。我试图找到一种解决方法，但我没有成功。

[这个包含 2.0 版本想法的 wiki 页面](http://code.google.com/p/reviewboard/wiki/IdeasFor2_0)说如下：

> 有一些要求审查除差异以外的文件。屏幕截图一直是主要的，尽管有人建议对某些文本文档进行 Wiki 更改和专门的视图。

所以也许这在 2.0 中是可能的，但从 1.7 开始，**这是不可能的**。

# java - Spring如何在工厂获取bean

> ID：15202429
> 
> 赞同：-1
> 
> 时间：2013-03-04T13:14:26.270
> 
> 标签：java, spring

我有以下代码：

```
public interface CreatorFactory<E extends Vehicle> {

    public VehicleType<E> getVehicle();

    public boolean supports(String game);
}

public abstract AbstractVehicleFactory<E extends Vehicle>  implements CreatorFactory {

        public VehicleType<E> getVehicle() {

           // do some generic init        

          getVehicle();

        }

        public abstract getVehicle();

        public abstract boolean supports(String game);

} 
```

我有多家工厂，用于汽车、卡车等。

```
@Component
public CarFactory extends AbstractVehicleFactory<Car> {

   /// implemented methods

}

@Component
public TruckFactory extends AbstractVehicleFactory<Truck> {

   /// implemented methods

} 
```

我想做的是将实现的工厂作为一个列表拉到一个单独的类中，但我不确定泛型在这种情况下是如何工作的......我知道在春天你可以获得特定类型的所有bean......这会不会还上班吗？...

通过擦除，我猜泛型类型将被删除.. ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:58:31.403

首先，我认为可能不需要获取 bean 列表。而且您只想获得使用泛型类型声明的确切 bean。

在 Spring 框架的 BeanFactory 接口中，有一个方法可以满足您的要求：

```
public interface BeanFactory {

    /**
     * Return the bean instance that uniquely matches the given object type, if any.
     * @param requiredType type the bean must match; can be an interface or superclass.
     * {@code null} is disallowed.
     * <p>This method goes into {@link ListableBeanFactory} by-type lookup territory
     * but may also be translated into a conventional by-name lookup based on the name
     * of the given type. For more extensive retrieval operations across sets of beans,
     * use {@link ListableBeanFactory} and/or {@link BeanFactoryUtils}.
     * @return an instance of the single bean matching the required type
     * @throws NoSuchBeanDefinitionException if there is not exactly one matching bean found
     * @since 3.0
     * @see ListableBeanFactory
     */
    <T> T getBean(Class<T> requiredType) throws BeansException;
} 
```

您可以使用如下代码：

```
Car carFactory = applicationContext.getBean( CarFactory.class );
Trunk trunkFactory = applicationContext.getBean( TrunkFactory.class ); 
```

或者只是查看@Qualifier 注解自动注入。

```
@Component("carFactory")
public CarFactory extends AbstractVehicleFactory<Car> {

   /// implemented methods

}

@Component("truckFactory ")
public TruckFactory extends AbstractVehicleFactory<Truck> {

   /// implemented methods

} 
```

在客户端代码中：

```
@Qualifier("carFactory")
@Autowired
private CarFactory carFactory ;

@Qualifier("truckFactory")
@Autowired
private TruckFactory TruckFactory; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:22:04.627

看起来你需要：

```
@Autowired
List<AbstractVehicleFactory> abstractVehicleFactories; 
```

# php - 添加对查找表的引用，如果需要插入查找表

> ID：15202436
> 
> 赞同：0
> 
> 时间：2013-03-04T13:14:58.750
> 
> 标签：php, mysql, codeigniter

我想知道是否有更优雅的方式（和更好的效率）来处理查找表。

假设我有一个表 ITEM(i_id, i_name,...) 一个表 KEYWORD (k_id, k_name,...) 和一个表来链接它们 ITEM_KEYWORD(i_id, k_id)。

用户正在添加/更新一个项目，他们正在添加几个关键字（表单上的自由文本）。我会用PHP做...

```
foreach (keyword being added)
    SQL to find keyword in KEYWORD table
    if found we have the k_id
    if not, we SQL insert into KEYWORD table and get the new k_id
    now we can run an SQL to insert into ITEM_KEYWORD the i_id and k_id 
```

每个添加的关键字最多 3 个 SQL 查询。有没有人有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:26:33.987

首先进行所有查找，然后以某种方式对其进行测试。

```
array keywords from query: 
  SELECT id,name from KEYWORD WHERE KEYWORD.name IN (list of keywords being added)

new = array_diff(keywords_to_add, keywords)

insert: INSERT INTO keyword (name) VALUES ( values of new keywords as multi-insert)

for each keyword being added:

INSERT INTO ITEM_KEYWORD i_id, k_id VALUES (?, (SELECT id FROM KEYWORD WHERE KEYWORD.name = ?)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:19:16.743

```
// foreach
$this->db->query("
INSERT INTO KEYWORD (keyword)
VALUES ('hello')
ON DUPLICATE KEY UPDATE k_id = LAST_INSERT_ID(k_id)
");

$kid = $this->db->insert_id(); 
```

如果您将列`k_id`设置为索引`PRIMARY`并且设置为 UNIQUE `AUTO_INCREMENT`，`keyword`则只需要这个（两个计数 insert_id）查询。要么它不存在并且被插入，要么它只是做一个虚拟更新，但不管它返回`k_id`.

[参考](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html#c8755)

# eclipse - 如何用bat重启Eclipse

> ID：15202438
> 
> 赞同：0
> 
> 时间：2013-03-04T13:15:12.650
> 
> 标签：eclipse, batch-file

大多数 Eclipse 应用程序的菜单中都有 File -> Restart。是否可以在 Windows 中使用一些 bat 脚本重新启动应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:25:35.847

尝试以下操作：

1.  杀死eclipse进程

    ```
    taskkill /im eclipse.exe 
    ```

2.  等待几秒钟，直到进程终止

    ```
    sleep 10 
    ```

3.  启动eclipse应用程序

    ```
    start "C:\eclipse\eclipse.exe" 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:09:47.287

不，如果没有不良的副作用，这通常是不可能的。重启 Eclipse 的代码是几百行 Java 代码，用所有正确的设置小心地创建了一个新的虚拟机进程。

# ios - iOS 6.x 在越狱时打开命令行

> ID：15202441
> 
> 赞同：3
> 
> 时间：2013-03-04T13:15:26.190
> 
> 标签：ios, command, jailbreak

在 iOS 6.x 之前，我曾经`open package_id`在 iOS 设备上从命令行打开应用程序。在 iOS 6.x 上，如果我使用此命令 SpringBoard 会崩溃。Open 可从 BigBoss 获得，作者是 Conrad Kramer。

`open`BigBoss的命令是否有替代方案或修复方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T23:13:12.407

## 更新：

看起来原版`/usr/bin/open`已经在 Cydia 上针对 iOS 6 进行了更新，所以我建议您先尝试一下。

* * *

## 原答案：

我也想念`open`！但是，在它为 iOS 6 更新之前，您可以构建自己的非图形应用程序（只是一个`main`程序，而不是一个`UIApplicationMain()`）并自己做同样的事情。

我将跳过从 解析命令行参数`int main(int argc, char *argv[]`，但是一旦您知道要打开的应用程序的*Bundle Id* ( )，打开**SpringBoardServices**私有框架，并使用它来启动应用程序：`CFBundleIdentifier`

 **```
#include <dlfcn.h>
#define SBSERVPATH "/System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices"

-(void) openApp: (NSString*) bundleId {

    // the SpringboardServices.framework private framework can launch apps,
    //  so we open it dynamically and find SBSLaunchApplicationWithIdentifier()
    void* sbServices = dlopen(SBSERVPATH, RTLD_LAZY);
    int (*SBSLaunchApplicationWithIdentifier)(CFStringRef identifier, Boolean suspended) = dlsym(sbServices, "SBSLaunchApplicationWithIdentifier");
    int result = SBSLaunchApplicationWithIdentifier((__bridge CFStringRef)bundleId, false);
    dlclose(sbServices);
} 
```

此代码需要`com.apple.springboard.launchapplications`您的命令行程序以`mobile`用户身份成功使用它的权利。 [有关添加权利的信息，请参见此处](https://stackoverflow.com/a/14885266/119114)。您的可执行文件需要一个 entitlements.xml 文件，如下所示：

```
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <dict>
        <key>com.apple.springboard.launchapplications</key>
        <true/>
    </dict>
</plist> 
```

然后用

```
ldid -Sentitlements.xml MyCommandLineTool 
```

**注意：**我没有对此进行测试，但[这个答案表明使用权利的替代方法是以 root 身份运行命令](https://stackoverflow.com/a/10211200/119114)。**

# asp.net-mvc-4 - 在 MVC4 Razor 视图中隐藏 URL 的参数

> ID：15202445
> 
> 赞同：0
> 
> 时间：2013-03-04T13:15:33.163
> 
> 标签：asp.net-mvc-4

*   当我单击表中的 ActionLink 时，它会生成以下 URL

    [http://www.xyz.com/LotNumber/Index/1234_307150451322](http://www.xyz.com/LotNumber/Index/1234_307150451322)

1234_307150451322 是 LotNumber 的 ID，我不想在 URL 中显示 ID 我需要做什么，

从数据库加载数据并以表格格式设置我的 URL 是

[http://www.xyz.com/FieldInspection/SearchIndex](http://www.xyz.com/FieldInspection/SearchIndex)

当我单击 Perticular LotNumber 时，它会生成以下 URL

[http://www.xyz.com/LotNumber/Index/1234_307150451322](http://www.xyz.com/LotNumber/Index/1234_307150451322)

请帮助我，在此先感谢，对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:11:14.653

看来您有这样的 MapRoute：

```
routes.MapRoute(
 "Default",
 "{controller}/{action}/{id}",
 new { controller = "Home", action = "Index", id = "" }
); 
```

因此，现在您的项目 ID 对应于 id 参数。
这些网址同样有效：
www.xyz.com/LotNumber/Index/1234_307150451322
www.xyz.com/LotNumber/Index?id=1234_307150451322

这意味着您在调用控制器以提取有关当前项目的信息时使用方法 GET。

如果您不想将商品 ID 作为 url 字符串中的参数查看，您可以使用 POST 方法发送您的商品 ID。

您可以使用一些 javascript 函数作为点击事件来发送 POST 请求。

# excel - 当工作表 1 中的单元格值更改时，将 Excel 宏自动在工作表 2 上运行

> ID：15202446
> 
> 赞同：0
> 
> 时间：2013-03-04T13:15:34.117
> 
> 标签：excel, vba

我正在尝试为我的老板创建一个简单的 Excel 报价表，它必须隐藏不适用的行是某个单元格值 = 0，但如果它是 = 1，则显示在表 2 中。

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Not Intersect(Target, Me.Range("H5")) Is Nothing Then Macro
End Sub

Sub HURows()
BeginRow = 17
EndRow = 34
ChkCol = 4

For RowCnt = BeginRow To EndRow
    If Cells(RowCnt, ChkCol).Value = 1 Then
        Cells(RowCnt, ChkCol).EntireRow.Hidden = False
    Else
        Cells(RowCnt, ChkCol).EntireRow.Hidden = True
    End If
Next RowCnt

BeginRow = 37
EndRow = 44
ChkCol = 4

For RowCnt = BeginRow To EndRow
    If Cells(RowCnt, ChkCol).Value = 1 Then
        Cells(RowCnt, ChkCol).EntireRow.Hidden = False
    Else
        Cells(RowCnt, ChkCol).EntireRow.Hidden = True
    End If
Next RowCnt

BeginRow = 48
EndRow = 51
ChkCol = 4

For RowCnt = BeginRow To EndRow
    If Cells(RowCnt, ChkCol).Value = 1 Then
        Cells(RowCnt, ChkCol).EntireRow.Hidden = False
    Else
        Cells(RowCnt, ChkCol).EntireRow.Hidden = True
    End If
Next RowCnt
End Sub 
```

请你告诉我如何让这个宏在单元格值更改时自动运行....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:53:29.723

如果您的`Worksheet_Change`子和`If`语句实际上用于`Macro`宏，那么您需要将`If`我的示例中的语句复制到您的示例中，如果它没有使用，那么您可以替换它。

它不是最有效的，因为此列中的某些单元格不会隐藏/取消隐藏行，因此子程序的调用次数可能比需要的次数多，但应该不会造成伤害。

以下代码应放入工作表代码中`Sheet1`

```
Private Sub Worksheet_Change(ByVal Target As Range)
  If Not Intersect(Target, Sheet1.Columns(4)) Is Nothing Then
      ' Target Intersects
      HURows
  Else
      ' No Intersection
  End If
End Sub 
```

此代码应放入新的`Module`（而不是工作表或工作簿模块）

```
Sub HURows()
Dim Sheet As Worksheet
BeginRow = 17
EndRow = 34
ChkCol = 4

Set Sheet = ThisWorkbook.Worksheets("Sheet2")
For RowCnt = BeginRow To EndRow
    If Sheet.Cells(RowCnt, ChkCol).Value = 1 Then
        Sheet.Cells(RowCnt, ChkCol).EntireRow.Hidden = False
    Else
        Sheet.Cells(RowCnt, ChkCol).EntireRow.Hidden = True
    End If
Next RowCnt

BeginRow = 37
EndRow = 44
ChkCol = 4

For RowCnt = BeginRow To EndRow
    If Sheet.Cells(RowCnt, ChkCol).Value = 1 Then
        Sheet.Cells(RowCnt, ChkCol).EntireRow.Hidden = False
    Else
        Sheet.Cells(RowCnt, ChkCol).EntireRow.Hidden = True
    End If
Next RowCnt

BeginRow = 48
EndRow = 51
ChkCol = 4

For RowCnt = BeginRow To EndRow
    If Sheet.Cells(RowCnt, ChkCol).Value = 1 Then
        Sheet.Cells(RowCnt, ChkCol).EntireRow.Hidden = False
    Else
        Sheet.Cells(RowCnt, ChkCol).EntireRow.Hidden = True
    End If
Next RowCnt
End Sub 
```

# iphone - 在 asp.net 中从 iPhone 上传图片

> ID：15202447
> 
> 赞同：1
> 
> 时间：2013-03-04T13:15:35.190
> 
> 标签：iphone, asp.net

我对Objective C一无所知。我正在asp.net中为移动版本开发一个网站。在这个应用程序中，我需要从手机上传一张图片。但从 iPhone 上传不起作用。搜索后我找到了这个链接

[将图像和文本从 iPhone 发布到 asp.net](https://stackoverflow.com/questions/6136288/post-image-and-text-from-iphone-to-asp-net)

使用 xcode 的地方。

问题是我不知道如何在我的应用程序中使用此代码。我可以理解用于上传的处理程序，但不能理解 Objective C 代码。任何人都可以帮助我如何在 IIS 服务器上使用此代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T10:47:38.647

我有一个关于从 iOS 将文件发布到 asp.net 站点的相当古老的博客。您可以在 -

[http://mahmudulislam.me/2011/09/14/uploading-files-from-iphone-to-asp-net-web-site/](http://mahmudulislam.me/2011/09/14/uploading-files-from-iphone-to-asp-net-web-site/)

这可能会帮助你。

# forms - Go - formFile for multiple files

> ID：15202448
> 
> 赞同：12
> 
> 时间：2013-03-04T13:15:39.247
> 
> 标签：forms, http, go

The formFile function works perfectly but [in the docs](http://golang.org/pkg/net/http/#Request.FormFile) it´s said that the "FormFile returns the first file for the provided form key". Is there a way of obtaining the several files that an html form with an input like:

```
<input type="file" name="myfiles" multiple="multiple"> 
```

might return?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-04T14:55:19.330

FormFile is a convenience function. You can manually parse and find the files you are looking for in the MultipartForm.

```
req.ParseMultipartForm(32 << 20) // 32MB is the default used by FormFile
fhs := req.MultipartForm.File["myfiles"]
for _, fh := range fhs {
    f, err := fh.Open()
    // f is one of the files
} 
```

# jquery - 如何将primefaces按钮悬停效果添加到html按钮

> ID：15202452
> 
> 赞同：2
> 
> 时间：2013-03-04T13:15:50.850
> 
> 标签：jquery, css, jsf, primefaces

我有一个 html`<button>`并根据 primefaces 对其进行样式设置`<p:commandButton>`。但我没有得到悬停和主动效果。我尝试使用 javascript onmouse 添加效果，但仍然无法获得它。

```
<button type="submit" id="submit" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" onmouseover="$(this).addClass('ui-state-hover')" onmouseout="$(this).removeClass('ui-state-hover')" onmousedown="$(this).addClass('ui-state-active')">
       <h:outputText styleClass="ui-button-text" value="Login" />
</button> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-22T07:32:46.703

添加onmouseup后，它适用于我的项目；

```
<input jsfc="h:commandButton"
    class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only yourCSSClass"
    onmouseover="$(this).addClass('ui-state-hover')"
    onmouseout="$(this).removeClass('ui-state-hover')"
    onmousedown="$(this).addClass('ui-state-active')"
    onmouseup="$(this).removeClass('ui-state-active')"
    value="New Button" onclick="alert('Hello World!');">
    <f:ajax execute="@form" render="@none" />
</input> 
```

# ios - NSLocaleCountryCode 返回 nil

> ID：15202454
> 
> 赞同：15
> 
> 时间：2013-03-04T13:15:51.970
> 
> 标签：ios, foundation, country, nslocale

我有一个错误报告，在以下行中说明了崩溃，其中客户端是`NSMutableDictionary`

```
[client setObject:[[NSLocale currentLocale] objectForKey:NSLocaleCountryCode] forKey:@"country"]; 
```

我的猜测是，`NSLocaleCountryCode`这会在这一行中返回 nil，这会导致向 an 添加一个 nil 对象，`NSDictionary`这会导致崩溃。问题是，以前有人遇到过这样的问题吗？是否有任何理由`NSLocaleCountryCode`可以为零`currentLocale`？该文档没有说明返回 nil 值，我认为这将始终返回一个有效的国家/地区。

最好的问候，迈克尔

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-09-14T15:56:20.723

我的情况是，出于调试目的，我在 Xcode 的运行方案中选择了自定义语言。我有EN，而不是系统语言。

[![Xcode 方案语言](../Images/da2b89e161e2078fc9df48878a332bb0.png)](https://i.stack.imgur.com/mYRt7.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-04T13:20:27.447

还有[其他](http://www.cocoabuilder.com/archive/cocoa/142160-what-wrong-with-nslocale-systemlocale.html)人遇到过这个问题，什么时候`NSLocale`是“系统语言环境”。你需要在你的编码中更加防御，要么不填充密钥，`nil`要么使用`[NSNull null]`：

```
NSLocale *locale = [NSLocale currentLocale];
NSString *country = [locale objectForKey:NSLocaleCountryCode];
if (country != nil)
{
    [client setObject:country forKey:@"country"];
} 
```

# python - 最佳实践：在 Django 中预填充 SlugField（没有管理模块）

> ID：15202455
> 
> 赞同：2
> 
> 时间：2013-03-04T13:15:52.023
> 
> 标签：python, django, slug

在 Django 的早期，可以在模型中预填充 SlugField。

在管理模块中，我会使用

```
prepopulated_fields = {'slug':('title',),} 
```

我找到了一个处理它[Unique Slugify](http://djangosnippets.org/snippets/690/)的片段，但我怀疑它是最好的方法。

那么在不使用 Admin 模块的情况下自动生成 SlugField 的最佳实践是什么？

我想使用 ModelForm 来集成首页中的表单，它应该为 URL 自动生成一个唯一的 slug。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:25:56.003

这只是从我的一个较旧的（如编码不太好的）模型中剪切和粘贴的。它应该向您展示一个想法，只需稍加润色即可。

```
from django.template.defaultfilters import slugify
def get_nickname(self):
    nick = self.name
    vowels = ('a','e','i','o','u')
    first_letter = nick[:1]
    nick = nick[1:]

    for vowel in vowels: nick = nick.replace(vowel,'')
    nick = first_letter + nick
    if len(nick) > 8:
        nick = nick[:7]
    return nick

def save(self, force_insert=False, force_update=False, using=None):
    if not self.nickname:
        self.nickname = self.get_nickname() if len(self.name)>8 else self.name
    self.slug = slugify(self.nickname)
    slug_test = SomeModel.objects.filter(slug=self.slug, id=self.id) # corrected to use a generic model name
    if slug_test:
        count = slug_test.count
        self.slug = "{}{}".format(self.slug[:len(self.slug)-1], count)

    super(SomeModel, self).save() 
```

更新：get_nick 方法的更严格的代码......

```
>>> name = 'alabama'
>>> vowels = {'a', 'e', 'i', 'o', 'u'}
>>> nick = name[0] + ''.join(l for l in name[1:] if l not in vowels)
>>> nick
'albm' 
```

FWIW：我刚刚更新了我的模型，去掉了方法，并在方法的顶部`get_nickname`添加了一个简单的：`lambda``save`

```
vowels = {'a','e','i','o','u'}
create_nick = lambda name: name[0] + ''.join(l for l in name[1:] if l not in vowels)[:7]
if not self.nickname:
    self.nickname = create_nick(self.name) if len(self.name)>8 else self.name
... 
```

# .htaccess - htaccess 301 重定向不适用于新的子域站点

> ID：15202456
> 
> 赞同：-1
> 
> 时间：2013-03-04T13:15:52.027
> 
> 标签：.htaccess

我正在移动我的网站，所以想测试一个页面并在 htaccess 文件中重定向：

我想重定向

> [http://www.martinspencephotography.co.uk/blog/yes/mini-photo-series-minimalism-gallows-hill-outside-cloughmills](http://www.martinspencephotography.co.uk/blog/yes/mini-photo-series-minimalism-gallows-hill-outside-cloughmills)

到

> [http://landscape.martinspencephotography.co.uk/minimalism-at-gallows-hill/](http://landscape.martinspencephotography.co.uk/minimalism-at-gallows-hill/)

在 .htaccess 文件中使用以下内容：

```
Redirect 301 /blog/yes/mini-photo-series-minimalism-gallows-hill-outside-cloughmill http://landscape.martinspencephotography.co.uk/minimalism-at-gallows-hill 
```

它没有工作，有任何理由为什么这可能不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:21:31.537

尝试

```
RewriteRule your_page.html
http://your.url.fr/yournewpage.html [R=301] 
```

还有呢

```
http://www.martinspencephotography.co.uk/blog/yes/mini-photo-series-minimalism-gallows-hill-outside-cloughmills http://landscape.martinspencephotography.co.uk/minimalism-at-gallows-hill/ [R=301] 
```

所以答案是使用 DRUPAL NODE ......

# data-structures - 编程概念

> ID：15202457
> 
> 赞同：1
> 
> 时间：2013-03-04T13:15:53.007
> 
> 标签：data-structures, python-3.x, string-matching

我想制作一个程序，使用点系统对垃圾邮件中的邮件进行分类。

对于邮件中的一些单词，
我希望程序为我在程序中归类为“垃圾词”的每个单词给出不同的分数，我也为不同的单词分配不同的分数，这样每个单词都值得一些的点。

我的伪代码：

1.  从文件中读取文本
2.  寻找“垃圾词”

    *   对于出现的每个单词，给出该单词的价值。
3.  如果每个垃圾词的总分是 10，则打印“SPAM”，然后是文件中的单词列表并分类为垃圾词及其分数。

示例（文本文件）：

```
Hello!  
Do you have trouble sleeping? 
Do you need to rest?
Then dont hesitate call us for the absolute solution- without charge! 
```

因此，当程序运行并分析上面的文本时，它应该如下所示：

```
SPAM 14p
trouble 6p
charge 3p 
solution 5p 
```

所以我打算这样写：

```
class junk(object):
    fil = open("filnamne.txt","r")
    junkwords = {"trouble":"6p","solution":"3p","virus":"4p"}
    words = junkwords

    if words in fil:
        print("SPAM")
    else:
        print("The file doesn't contain any junk") 
```

所以我现在的问题是如何为文件中出现的列表中的每个单词打分？
以及如何对总分求和，以便`if total_points are > 10`程序应该`print "SPAM"`，然后
是在文件中找到的“垃圾词”列表以及每个单词的总分..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:31:14.893

这是一个快速脚本，可能会让您接近那里：

```
MAXPOINTS = 10
JUNKWORDS={"trouble":6,"solution":5,"charge":3,"virus":7}
fil = open("filnamne.txt", "r")

foundwords = {}

points = 0

for word in fil.read().split():
   if word in JUNKWORDS:
       if word not in foundwords:
           foundwords[word] = 0
       points += JUNKWORDS[word]
       foundwords[word] += 1

if points > 10:
    print "SPAM"
    for word in foundwords:
        print word, foundwords[word]*JUNKWORDS[word]
else:
    print "The file doesn't contain any junk" 
```

您可能希望`.lower()`在单词上使用并使所有字典键小写。也许还删除所有非字母数字字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:38:06.323

这是另一种方法：

```
from collections import Counter

word_points = {'trouble': 6, 'solution': 5, 'charge': 3, 'virus': 7}

words = []

with open('ham.txt') as f:
   for line in f:
      if line.strip(): # weed out empty lines
         for word in line.split():
             words.append(word)

count_of_words = Counter(words)

total_points = {}
for word in word_points:
    if word in count_of_words:
       total_points[word] = word_points[word] * count_of_words[word]

if sum(i[0] for i in total_points.iteritems()) > 10:
   print 'SPAM {}'.format(sum(i[0] for i in total_points.iteritems()))
   for i in total_points.iteritems():
      print 'Word: {} Points: {}'.format(*i) 
```

您可以进行一些优化，但它应该让您了解一般逻辑。[`Counter`](http://docs.python.org/2/library/collections.html)可从 Python 2.7 及更高版本获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:46:57.760

我假设每个单词都有不同的点，所以我使用了[字典](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)。
您需要查找单词中的单词在文件中出现的次数。
您应该将每个单词的点存储为整数。不作为`'6p'`或`'4p'`

所以，试试这个：

```
def find_junk(filename):
    word_points = {"trouble":6,"solution":3,"charge":2,"virus":4}
    word_count = {word:0 for word in word_points}
    count = 0
    found = []
    with open(filename) as f:
        for line in f:
            line = line.lower()
            for word in word_points:
                c = line.count(word)
                if c > 0:
                    count += c * word_points[word]
                    found.append(word)
                    word_count[word] += c
    if count >= 10:
        print '  SPAM'*4
        for word in found:
            print '%10s%3s%3s' % (word, word_points[word], word_count[word])
    else:
        print "Not spam"
find_junk('spam.txt') 
```

# tomcat - 404 处理程序挂在 ColdFusion 10 上，在 ColdFusion 8 上完美运行

> ID：15202458
> 
> 赞同：3
> 
> 时间：2013-03-04T13:15:54.207
> 
> 标签：tomcat, coldfusion, iis-7.5, coldfusion-10, fusionreactor

我的 ColdFusion 10 服务器上的 404 处理程序页面出现了一个奇怪的间歇性问题。这是背景故事：

1.  多年来，我们一直在运行 2 台负载平衡的 ColdFusion 8 服务器，没有出现任何问题。

2.  我们已将这两台服务器中的一台升级到 ColdFusion 10，以便软启动我们的 ColdFusion 10 升级。

3.  我已经在 CF10 服务器上安装了 Update 8，并删除并重新添加了连接器。

4.  两台服务器都运行 Windows 2008 R2。

我已经阅读了几篇论坛帖子，说明人们在 404 页面上遇到连接重置问题，但我没有看到那个特定问题。我看到的是 FusionReactor 中 404.cfm 文件的挂起线程。以下是从这些挂起线程之一获取的堆栈跟踪示例：

```
Thread Stack Trace
Trace Time:   07:02:14.638 04-Mar-2013
Request ID:   179934
Script Name:  http://example.com/404.cfm?404;http://example.com:80/somemissingfile
Started:      06:07:17.581 04-Mar-2013
Exec Time:    3297057ms
Memory Used:  (32%)1,669,600KB
Memory Free:  3,539,295KB
Thread ID:    0x53de (21470)
Thread Name:  ajp-bio-8012-exec-86
Priority:     5
Hashcode:     1636847260
State:        RUNNABLE

"ajp-bio-8012-exec-86" daemon prio=5 runnable

java.net.SocketInputStream.socketRead0(SocketInputStream.java:???)[Native Method]
java.net.SocketInputStream.read(SocketInputStream.java:129)
org.apache.coyote.ajp.AjpProcessor.read(AjpProcessor.java:319)
org.apache.coyote.ajp.AjpProcessor.readMessage(AjpProcessor.java:445)
org.apache.coyote.ajp.AjpProcessor.receive(AjpProcessor.java:341)
org.apache.coyote.ajp.AbstractAjpProcessor.finish(AbstractAjpProcessor.java:1032)
org.apache.coyote.ajp.AbstractAjpProcessor.action(AbstractAjpProcessor.java:386)
org.apache.coyote.Response.action(Response.java:170)
org.apache.coyote.Response.finish(Response.java:276)
org.apache.catalina.connector.OutputBuffer.close(OutputBuffer.java:288)
org.apache.catalina.connector.CoyoteOutputStream.close(CoyoteOutputStream.java:108)
com.intergral.fusionreactor.plugin.amf.InterposerOutputStream.close(InterposerOutputStream.java:104)
com.intergral.fusionreactor.trackedstream.TrackedStream.close(TrackedStream.java:113)
com.intergral.fusionreactor.filter.softkill.SoftKillResponseStream.close(SoftKillResponseStream.java:146)
com.intergral.fusionreactor.filter.FusionReactorResponseWrapper.finish(FusionReactorResponseWrapper.java:192)
com.intergral.fusionreactor.core.FusionReactor.finish(FusionReactor.java:683)
com.intergral.fusionreactor.filter.FusionReactorCoreFilter.doHttpServletRequest(FusionReactorCoreFilter.java:575)
com.intergral.fusionreactor.filter.FusionReactorCoreFilter.doFusionRequest(FusionReactorCoreFilter.java:337)
com.intergral.fusionreactor.filter.FusionReactorCoreFilter.doFilter(FusionReactorCoreFilter.java:246)
com.intergral.fusionreactor.filter.FusionReactorFilter.doFilter(FusionReactorFilter.java:121)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:414)
org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:204)
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
java.lang.Thread.run(Thread.java:662) 
```

我试过通过 FusionReactor 手动杀死这些线程，但它们不会死。清除挂起线程的唯一方法是重新启动 ColdFusion 服务（自从我升级到 ColdFusion 10 以来，我每天至少必须这样做一次。

除了运行我们的标准布局自定义标签并显示未找到页面通知外，404 并没有做任何特别的事情。

查看线程转储，ColdFusion 似乎已经完成了处理并完成了用输出填充缓冲区，但它还没有完成发送到浏览器？

```
org.apache.coyote.ajp.AbstractAjpProcessor.finish(AbstractAjpProcessor.java:1032)
org.apache.coyote.ajp.AbstractAjpProcessor.action(AbstractAjpProcessor.java:386)
org.apache.coyote.Response.action(Response.java:170)
org.apache.coyote.Response.finish(Response.java:276)
org.apache.catalina.connector.OutputBuffer.close(OutputBuffer.java:288)
org.apache.catalina.connector.CoyoteOutputStream.close(CoyoteOutputStream.java:108) 
```

那里有很多关于关闭和完成的东西，但它后面的步骤有更多的阅读和响应。所以我不确定这里可能会发生什么，但这肯定会阻碍我们的 ColdFusion 10 迁移的完成。我需要找出导致这些挂起线程的确切原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:14:58.270

您遇到的问题与我在一月份遇到的错误相同。我已经在 Adob​​e 的错误库中记录了该错误：

[https://bugbase.adobe.com/index.cfm?event=bug&id=3494728](https://bugbase.adobe.com/index.cfm?event=bug&id=3494728)

他们的工程团队已经承认了这个问题，但没有关于实际修复的预计时间。Adobe在CF10中的IIS连接器对我们来说已经相当麻烦了。您可以按照我的解决方法中列出的设置超时来终止这些挂起的线程，这至少可以让您不必每天重新启动服务器。祝你好运！

# c++ - 只返回传递值的默认函数？

> ID：15202474
> 
> 赞同：13
> 
> 时间：2013-03-04T13:16:58.763
> 
> 标签：c++, templates, c++11, lambda, std-function

作为一个懒惰的开发者，我喜欢使用这个技巧来指定一个默认函数：

```
template <class Type, unsigned int Size, class Function = std::less<Type> >
void arrange(std::array<Type, Size> &x, Function&& f = Function())
{
    std::sort(std::begin(x), std::end(x), f);
} 
```

但在一个非常特殊的情况下，我遇到了一个问题，如下所示：

```
template <class Type, unsigned int Size, class Function = /*SOMETHING 1*/>
void index(std::array<Type, Size> &x, Function&& f = /*SOMETHING 2*/)
{
    for (unsigned int i = 0; i < Size; ++i) {
        x[i] = f(i);
    }
} 
```

在这种情况下，我希望默认函数相当于：（`[](const unsigned int i){return i;}`一个只返回传递值的函数）。

为了做到这一点，我必须写什么而不是`/*SOMETHING 1*/`and `/*SOMETHING 2*/`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-04T13:25:53.763

没有标准的函子可以做到这一点，但它很容易编写（尽管确切的形式存在争议）：

```
struct identity {
    template<typename U>
    constexpr auto operator()(U&& v) const noexcept
        -> decltype(std::forward<U>(v))
    {
        return std::forward<U>(v);
    }
}; 
```

这可以按如下方式使用：

```
template <class Type, std::size_t Size, class Function = identity>
void index(std::array<Type, Size> &x, Function&& f = Function())
{
    for (unsigned int i = 0; i < Size; ++i) {
        x[i] = f(i);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T13:22:45.850

这称为[`identity`](https://en.wikipedia.org/wiki/Identity_function)函数。不幸的是，它不是 C++ 标准的一部分，但您可以轻松地自己构建一个。

* * *

如果你碰巧使用 g++，你可以用`-std=gnu++11`然后激活它的扩展

```
#include <array>
#include <ext/functional>

template <class Type, std::size_t Size, class Function = __gnu_cxx::identity<Type> >
void index(std::array<Type, Size> &x, Function&& f = Function())
{
    for (unsigned int i = 0; i < Size; ++i) {
        x[i] = f(i);
    }
} 
```

* * *

也许它将在 C++20 中可用，请参阅[`std::identity`](https://en.cppreference.com/w/cpp/utility/functional/identity). [在那之前，您可以在boost::compute::identity](https://www.boost.org/doc/libs/release/libs/compute/doc/html/boost/compute/identity.html)查看 boost 的版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T15:14:56.187

boost::phoenix 提供了一个完整的功能工具箱，这里的 'arg1' 是身份的 ident ;-)

```
#include <boost/phoenix/core.hpp>

template <class X, class Function = decltype(boost::phoenix::arg_names::arg1)>
void index(X &x, Function f = Function()) {
    for (std::size_t i = 0; i < x.size(); ++i) {
            x[i] = f(i);
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T13:24:03.427

您可以构建自己的身份函子：

```
template <typename T>
class returnIdentifyFunctor
{
  public:
     auto operator ()(  T &&i ) -> decltype( std::forward<T>(i) )
    {
      return std::move(i);
    }
};

template <class Type, unsigned int Size, class Function = returnIdentifyFunctor<Type>>
void index(std::array<Type, Size> &x, Function&& f = Function() )
 {
    for (unsigned int i = 0; i < Size; ++i) {
            x[i] = f(i);
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-11T18:18:22.510

boost 有以下变体：

```
template <class Type, unsigned int Size, class Function = boost::function<Type(Type)>>
void index(std::array<Type, Size> &x, Function&& f = boost::bind(std::plus<Type>(), 0, _1)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-25T00:15:43.757

解决此问题的一种方法是具有两个不同的功能。我发现*不*使用默认参数是很明智的。

```
template <class Type, unsigned int Size, class Function>
void index(std::array<Type, Size> &x, Function&& f){
    for(unsigned int i = 0; i < Size; ++i) x[i] = f(i);
}

template<class Type, unsigned int Size>
void index(std::array<Type, Size> &x){
    return index(x, [](unsigned int i){return i;});                      // C++11 in this case
                //, [](auto&& e){return std::forward<decltype(e)>(e)};); // C++14 in a more general case
                //, std::identity); // C++20 in general
} 
```

# python - 运行 python-tesseract 示例的问题

> ID：15202475
> 
> 赞同：3
> 
> 时间：2013-03-04T13:17:06.823
> 
> 标签：python, opencv, ocr, tesseract

你好。我是使用 Tesseract 的新手，我最近在运行 Ubuntu 的计算机上安装了 python-tesseract。

[此处](http://code.google.com/p/python-tesseract/)的示例 1 代码运行良好，但是当我使用相同的图像 (eurotext.jpg) 运行示例 2 时，我得到以下输出：

```
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
res=1 
```

为什么我得到不同的结果，“res = 1”是什么意思？如果我将 eurotext.jpg 替换为另一张图片 bike1.jpg，我会得到：

```
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
res=1
Test blob assigned to no row on pass 2
Test blob assigned to no row on pass 3 
```

这是什么意思？我在安装时犯了任何错误吗？我安装了最新版本的 OpenCV。如果你能帮助我，那就太棒了，在此先感谢。

# applescript - 如何制作已发送电子邮件的副本，以便编辑并再次发送

> ID：15202479
> 
> 赞同：0
> 
> 时间：2013-03-04T13:17:12.727
> 
> 标签：applescript

我在 Mac OS X 10.7.5 上使用 Outlook for Mac 2011 版本 14.3.1。我想获取已发送的电子邮件，复制，打开，编辑并再次发送。我曾经有一个applescript来执行此操作，但下载它的链接似乎不再起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:53:28.437

我怀疑是这样的。

在发送的 iTems 中选择您的电子邮件并运行脚本

```
 tell application "Microsoft Outlook"
    set theMessage to item 1 of (get selection) # get the first email message

    set subj to subject of theMessage
    set recip to (email address of to recipient of theMessage)

    set cont to content of theMessage
    set newMail to make new outgoing message with properties {subject:subj, content:cont}

    repeat with i from 1 to number of items in recip
        set this_item to item i of recip
        tell newMail to make new recipient at newMail with properties {email address:this_item}
    end repeat

    open newMail
end tell 
```

该脚本使用所有以前的收件人、主题和内容创建一条新消息。然后打开它准备编辑

# java - eclipse中的Tomcat WTP：将所有请求路由到同一个Servlet

> ID：15202481
> 
> 赞同：2
> 
> 时间：2013-03-04T13:17:20.583
> 
> 标签：java, tomcat, servlets, tomcat7

我在 Eclipse 中使用 Tomcat 作为 WTP，我想将所有传入请求路由到我自己的 Servlet。

仅将 Servlet 映射到 时，仅重定向`"/"`以下请求：`"http://localhost:8080/myServletName/anyUrlPattern"`

但我想要： `"http://localhost:8080/anyUrlPattern"`也重定向。

Tomcat 将 default-servlet 映射到，`"/"`所以我想必须在那里做一些事情。

**如下所述，解决方案是在 server.xml 中设置 Context**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:25:29.083

据我记得这是不可能和/或不鼓励的，因为`<display-name>`它用于区分（可能）在您的tomcat上运行的多个WebApp。

# php - 没有页面刷新且没有 AJAX 的动态内容？例如使用元数据？

> ID：15202484
> 
> 赞同：0
> 
> 时间：2013-03-04T13:17:30.830
> 
> 标签：php, javascript, ajax

我前段时间读过一些东西（但已经丢失了源代码），它解释了如何（使用 PHP）通过 cookie、标题字段等传输数据（内容）......

PHP脚本会将内容写入cookie，然后浏览器将从cookie中读取并使用javascript显示内容。通过这种方式，您可以在不向网络服务器发出另一个请求并且不刷新页面的情况下交付内容。

那可能吗？如果是这样，有哪些选择，有什么限制？（例如，在 php 脚本中默认超时为 30 秒...）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:23:49.073

我不明白您为什么要这样做，因为它会大大增加页面加载时间。虽然有可能做这样的事情。

不过，我不会使用 cookie。如果我必须构建这样的结构，我会在具有 ID 的 DIV 中加载不同的页面，并将它们的 CSS 显示默认设置为 none 并“加载”不同的页面，我只需将前一个页面 DIV 设置为 display: none和新加载的 DIV 显示：块。

但我想这个问题有很多解决方案。

# android - 将源文件添加到android

> ID：15202485
> 
> 赞同：0
> 
> 时间：2013-03-04T13:17:34.403
> 
> 标签：android, eclipse

好吧，我已经浪费了一个小时试图弄清楚，即使这很简单。

我已经从 github 下载了一些代码。我想在我的 android 应用程序中使用它。我该如何添加它？它不是一个jar文件，我尝试拖放它并链接文件，但它不起作用。导入和刷新/清理项目不起作用。

我不确定我哪里出错了。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:40:58.080

如果这是要在eclipse中导入的项目，右键eclipse左窗格（项目列表），import，android project from files，选择repository文件夹。

如果这是您想在您的应用程序中使用的库，还有另一个步骤：转到项目的属性，android 选项卡，然后在库部分单击添加，然后选择库项目。
按照设计，包含布局资源（例如 ActionBar Sherlock）的 android 代码不能嵌入到 jar 中。因此，您必须将其用作库项目。虽然它非常方便，因为它允许您非常快速地查看或修改库代码。

您可能还需要让 Eclipse 知道您的库项目是库而不是应用程序。为此，在同一个属性/Android 屏幕中，您只需选中“是库”复选框。

关于该主题的参考：[官方文档](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:23:59.383

在 Eclipse 中：File->New->Other->"Android Project from exiting Code"

# android - 如何在我的应用程序中将标记添加到我的当前位置？

> ID：15202490
> 
> 赞同：0
> 
> 时间：2013-03-04T13:17:59.383
> 
> 标签：android, map

如何将自定义标记添加到地图中的当前位置？在这个阶段，我的位置没有显示任何标记。

我正在使用 Google map api v2 和 android 版本 4.0.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:19:59.757

假设当前位置的纬度和经度是 lat 和 lng。（您可以通过编程方式找到）。

```
 GoogleMap mMap;
 // Initialize your map ...And
 mMap.addMarker(new MarkerOptions().position(
            new LatLng(lat , lng)).title("Marker")); 
```

对图像使用**icon()**方法。

# javascript - 让这个用于 jQuery 插件的小部件工作？

> ID：15202492
> 
> 赞同：1
> 
> 时间：2013-03-04T13:18:03.440
> 
> 标签：javascript, jquery, html, gridster

我正在使用 jQuery 插件 Gridster。

我制作了一个 add_widget 按钮，它添加了一个新的小部件。这个小部件也可以再次删除。

所有这些都正常工作。但是，当您单击标题时，它应该会触发一个滑动框。但是这个滑动框不适用于新添加的小部件，仅适用于从一开始就存在的小部件。

帮助！！！！

看到这个小提琴：http: [//jsfiddle.net/ygAV2/](http://jsfiddle.net/ygAV2/)

我怀疑：

添加框部分

```
//add box
$('.addbox').on("click", function() { 
gridster.add_widget('<li data-row="1" data-col="1" data-sizex="2" data-sizey="1"><div class="box"><div class="menu"><header class="box_header"><h1>HEADER 5</h1></header><div class="deleteme"><a  href="JavaScript:void(0);">delete me ;(</a></div></div></li>', 2, 1)

}); 
```

和滑动盒部分：

```
// widget sliding box

 $("h1").on("click", function(){
   if(!$(this).parent().hasClass('header-down')){
      $(this).parent().stop().animate({height:'100px'},{queue:false, duration:600, easing: 'linear'}).addClass('header-down');
   } else{
      $(this).parent().stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
   }
});

$(document).click(function() {
    if($(".box_header").hasClass('header-down')){
        $(".box_header").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
}
});

$(".box_header").click(function(e) {
    e.stopPropagation(); // This is the preferred method.
           // This should not be used unless you do not want
                         // any click events registering inside the div
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:57:16.673

The use of `.live()` is deprecated. [http://api.jquery.com/live/](http://api.jquery.com/live/)

So using the correct way, `.on(event, selector, handler)` on all your `click` events.

You will achieve your desired result.

Here is a code snippet

```
$(document).on("click", 'h1', function() {
    if (!$(this).parent().hasClass('header-down')) {
        $(this).parent().stop().animate({
            height: '100px'
        }, {
            queue: false,
            duration: 600,
            easing: 'linear'
        }).addClass('header-down');
    } else {
        $(this).parent().stop().animate({
            height: '30px'
        }, {
            queue: false,
            duration: 600,
            easing: 'linear'
        }).removeClass('header-down');
    }
}); 
```

and here

```
//remove box
$(document).on('click', ".deleteme", function () {
    $(this).parents().eq(2).addClass("activ");
    gridster.remove_widget($('.activ'));
    $(this).parents().eq(2).removeClass("activ");
}); 
```

and also here

```
$(document).on("click", ".box_header", function (e) {
    e.stopPropagation(); // This is the preferred method.
    // This should not be used unless you do not want
    // any click events registering inside the div
}); 
```

I have updated your jsfiddle: [http://jsfiddle.net/ygAV2/2/](http://jsfiddle.net/ygAV2/2/)

# php - CI Active Record API 的 $this->db->select 部分有什么作用？

> ID：15202502
> 
> 赞同：0
> 
> 时间：2013-03-04T13:18:43.237
> 
> 标签：php, codeigniter-2

我有这样的代码：

```
$this->db->select('title')->from('entries')->where('id', 1);
$query = $this->db->get();
echo $query->row('title'); 
```

这与 id 等于 1 的条目表中的标题相呼应。

为什么没有 'title in row 功能它不能工作？

```
echo $query->row(); 
```

因为它返回第一行？

为什么我必须在两个地方（`$query->row`和`$this->db->select`）都有“标题”才能使它起作用？这对我来说没有意义。

任何人都可以解释这是如何工作的，据说提供了从数据库中获取价值的替代方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:26:05.317

```
$this->db->select('title')->from('entries')->where('id', 1); 
```

生成

```
SELECT title FROM entries WHERE id = 1 
```

$query 在数组中检索结果：

```
array( [0] => array( [title] => 'your title' )) 
```

`row('title')`从结果数组的第一行返回标题列。

您需要告诉它要获取哪一列的原因是因为`row`并且`get`可以与许多列一起使用。

# python - 如何在 Python 3.3 和 Django 1.5 中使用 MySQL？

> ID：15202503
> 
> 赞同：1
> 
> 时间：2013-03-04T13:18:45.003
> 
> 标签：python, mysql, django

Django 需要 MySQL-python 包来操作 MySQL，但是 MySQL-python 不支持 Python 3.3。我已经尝试过 MySQL-for-Python-3，但它不起作用。请帮忙！非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:46:04.313

Django 1.5 在 Python 2.7 下工作，所以你需要 MySQL-python 包来支持 Python 的分发；做就是了：

```
sudo apt-get install python-mysqldb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-05T03:08:52.877

Oracle 现在有一个适用于 Django 的 Python 3.3 的 MySQL 连接器。请参阅[此链接](https://dev.mysql.com/downloads/connector/python/)。

安装后，在`mysql.connector.django`您的.`ENGINE``DATABASES``settings.py`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:48:50.147

正如其他人所指出的，Django 1.5 中对 Python 3 的支持是“实验性的”，因此，并非所有东西都可以正常工作。

话虽这么说，如果您绝对需要让它工作，您可以在`2to3`MySQL-python 的源版本上运行该工具以将其转换为 Python 3（如果需要，还可以针对 Python 3 头文件进行构建）。

# javascript - 为什么需要在对象中使用 this.property=property？

> ID：15202504
> 
> 赞同：0
> 
> 时间：2013-03-04T13:18:49.730
> 
> 标签：javascript, oop, object, this

为什么需要在对象中使用 this.property = property？它是用来定义对象“外部世界”的属性吗？

```
function Person(property) {
this.property = property;
}
var john = new Person(true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:20:01.610

如果你没有，`john.property`将是未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:25:00.243

`this`关键字用于引用所执行函数的所有者：

[http://www.quirksmode.org/js/this.html](http://www.quirksmode.org/js/this.html)

如前所述，您需要它来定义`john.property`，因为`property`传递给函数的变量将在函数执行后过期。

# youtube-api - YouTube iFrame API：为 TrueView InStream 广告（视频广告）触发的事件

> ID：15202506
> 
> 赞同：3
> 
> 时间：2013-03-04T13:18:54.127
> 
> 标签：youtube-api, youtube-javascript-api

[TrueView InStreams 广告](http://support.google.com/youtube/bin/answer.py?hl=en&answer=1205675)开始和结束时会触发哪些事件？

[YouTube iFrame API 参考](https://developers.google.com/youtube/iframe_api_reference)没有给出任何提示。

我需要知道真正的视频何时开始。

由于这些广告是“随机”显示的，我无法进行任何测试。

一个可能的答案可能是系统地展示这些广告（并因此允许测试）的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:54:49.040

前贴片广告期间 YouTube 的 PlayerState 是什么似乎已经回答了[？](https://stackoverflow.com/questions/12464499/what-is-the-youtubes-playerstate-during-pre-roll-ad).

基本上，当广告开始时，状态会从`-1`（未定义）变为`5`（提示），然后是`2`（暂停）。

`setInterval`我想可以通过循环（等等）并检查状态是否严格从`-1`,`5`和 finally来知道广告是否打开`2`。

开始检查以`-1`防止混淆广告的开始/结束与其他事件（如“提示下一个视频”等）。

然而，这并不是一个完美的解决方案，因为广告可以在视频结尾开始......

# c - C - 我正在计算摊销，但我的结果不正确

> ID：15202513
> 
> 赞同：1
> 
> 时间：2013-03-04T13:19:16.970
> 
> 标签：c, amortization

我正在尝试计算贷款的每月还款额，但结果总是错误的。

公式如下，其中 i 感兴趣

```
((1 + i)^months /
(1 + i)^months - 1)
* principal * i 
```

假设年利率和本金是一个无形的浮点数，你能告诉我我的公式有什么问题吗？

```
double calculatePaymentAmount(int annualInterestRate, 
     int loanSize,                          
     int numberOfPayments;
{
double monthlyInterest = annualInterestRate / 1200.0;
return 
    (
        pow(1 + monthlyInterest, numberOfPayments) /
        (pow(1 + monthlyInterest, numberOfPayments) - 1)
    )
    * (loanSize / 100)
    * monthlyInterest;
} 
```

例如：1.25 的利率和 250 的 12 个月贷款规模给出 22.27 而不是 20.97。

先感谢您。

编辑 1：将每月利息更改为年利率 / 1200

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:55:27.467

我发现出了什么问题。月利率 = 年利率 / 1200.0 / 100

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:26:09.840

转换

```
double monthlyInterest = (double)annualInterestRate / 
    1200 / 100; 
```

至

```
double monthlyInterest = (double)annualInterestRate / 12.0; 
```

会成功的。

[您可以从http://en.cppreference.com/w/c/language/operator_precedence](http://en.cppreference.com/w/c/language/operator_precedence)阅读更多关于 c 中运算符优先级的信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:26:52.930

假设`annualInterestRate`是百分比，那么你应该`monthlyInterest`这样计算：

```
double monthlyInterest = pow(1+(double)annualInterestRate / 100, 1/12.0) - 1.0; 
```

# ibm-doors - 显示来自其他模块的 DXL 列

> ID：15202514
> 
> 赞同：1
> 
> 时间：2013-03-04T13:19:19.137
> 
> 标签：ibm-doors

我正在使用一种类型的内链接在正式模块中工作。这些链接（我们称之为 X 型链接）是由 4 个不同的正式模块以 4 个深度级别制作的。例如，我在模块 A 中工作，该模块具有来自模块 B 的内链接，具有来自模块 C 的内链接，具有来自模块 D 的内链接。

我有一个视图在不同的列中显示每个链接级别：第 1 列：深度 1 链接（AB），第 2 列：深度 2 链接（BC），第 3 列：深度 3 链接（CD）。

每一列都是由这样的脚本生成的：

```
 pragma runLim, 0
    int lines[4] = {0, 0, 0, 0}
    void adjustLines(int depth, showAtDepth) {
    int count
    for (count = 0; count < 4; count++) {
    while (lines[depth-1] < lines[count]) {
        if (depth == showAtDepth) displayRich("\\pard " " ")
        lines[depth-1]++
    }
  }
}
void showIn(Object o, int depth) {
Link l
LinkRef lr
ModName_ otherMod = null
Module linkMod = null
ModuleVersion otherVersion = null
Object othero
string disp = null
string s = null
string plain, plainDisp
int plainTextLen
int count
bool doneOne = false

    string linkModName = "../links/TYPE X"
    for lr in all(o<-linkModName) do {
        otherMod = module (sourceVersion lr)
        if (!null otherMod) {
            if ((!isDeleted otherMod) && (null data(sourceVersion lr))) {
                load((sourceVersion lr),false)
            }
        }
    }
    for l in all(o<-linkModName) do {
        otherVersion = sourceVersion l
        otherMod = module(otherVersion)
        if (null otherMod || isDeleted otherMod) continue
        othero = source l
        if (null othero) {
            load(otherVersion,false)
        }
        othero = source l
        if (null othero) continue
        if (isDeleted othero) continue
        int oldLines = lines[depth-1]
        adjustLines(depth, 1)
        bool kick = (doneOne) && (lines[depth-1] == oldLines)
        if (kick) {
            lines[depth-1]++
            if (depth == 1) displayRich("\\pard " " ")
        }
        if (depth < 4) {
            showIn(othero, depth+1)
        }
        doneOne = true
        if (depth == 1) {
            s = name(otherMod)
            if (isBaseline(otherVersion)) {
                s = s " [" versionString(otherVersion) "]"
            }

        s = "{\\b " s " : }"
        s = s " " probeRichAttr_(othero,"Object Heading", false)
        s = s " " probeRichAttr_(othero,"Object Text", false)

        displayRich s

        }
        lines[depth-1] += 3
    }
}
showIn(obj,1) 
```

但是现在，我必须添加一个新列，其中包含在模块 C 之间定义的其他类型的链接 (Type Y)，而其他新模块不直接与我的模块 (A) 链接。幸运的是，我在模块 C 的列中有这些关系（作为布局 dxl）。

如何在我的模块 (A) 中显示保存在模块 (C) 视图中的列以保存在我的当前视图中？

预先感谢您的合作和帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T07:19:51.727

Follow the Type X links to module C, and then follow Type Y links.

Change:

```
string linkModName = "../links/TYPE X" 
```

To:

```
string linkModName = (depth<3) ? "../links/TYPE X" : "../links/TYPE Y" 
```

You may need a different number as I'm not sure of you structure.

# onclick - reddit : onclick window.location

> ID：15202517
> 
> 赞同：1
> 
> 时间：2013-03-04T13:19:31.260
> 
> 标签：onclick, wordpress, reddit

我在我的博客中使用**reddit**共享按钮，但是当单击共享按钮时，它会在同一个窗口中打开，而不是在新窗口中打开。

需要更改哪些内容才能使 reddit 在新窗口中打开。

我在stackoverflow中搜索了类似的问题和答案，但它们似乎与我的问题不匹配。

下面是代码

```
<a href="http://www.reddit.com/submit" onclick="window.location = 'http://www.reddit.com/submit?url=' + encodeURIComponent(window.location); return false">

<img src="http://www.reddit.com/static/spreddit8.gif" 
alt="submit to reddit" border="0" /> </a> 
```

# javascript - 在移动会话中模拟会话 cookie？

> ID：15202521
> 
> 赞同：16
> 
> 时间：2013-03-04T13:19:49.897
> 
> 标签：javascript, jquery, mobile, cookies, weinre

乍一看，我惊讶地发现，我对会话 cookie 在移动设备上的行为方式的想法被现实所推翻。

在普通桌面浏览器上，只要浏览器会话处于活动状态，行为就是存储会话 cookie。如果最后一个浏览器窗口/进程已关闭，则应关闭会话。

现在在移动设备上，您几乎不会关闭浏览器应用程序，只需将其发送到后台即可。

我在装有 Android 4 的 Sony Xperia Ray 上发现会话 cookie 没有过期，即使我清除了浏览器进程。但在三星平板设备上它会。我不知道，iOS 设备的行为方式如何。

这是个问题！？我应该怎么做才能解决它？

现在，我决定让 cookie 在一天内过期。但我对此不太满意。
我应该降低寿命吗？也许到 8 小时？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:53:58.900

我对类似问题的解决方案是`document.referrer`将 cookie 与 cookie 结合使用。如果用户在您的站点内浏览，则继续使用 cookie（如果存在），否则过期或替换 cookie。

但是，当用户在您的网站上将浏览器置于后台时，问题仍然存在。如果他们继续浏览并仅使用您网站中的链接，则仍将使用 cookie。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T16:45:53.573

*采用 HTML5 方式并使用sessionStorage*对您来说有意义吗？

这样您就可以独立于不同设备处理浏览器会话的方式，因为 HTML5 会话存储是按窗口进行的，因此它仅限于浏览器*窗口*的生命周期。

基本上所有的移动设备都支持 sessionStorage（见[这里](http://dev-test.nemikor.com/web-storage/support-test/)），你可以有一个框架/插件，比如 jQuery-Session-Plugin（点击[**这个链接**](https://github.com/AlexChittock/JQuery-Session-Plugin)）为你处理会话数据（并为不支持的旧浏览器提供*回退到*会话 cookie支持会话存储）。

**编辑**：为了显示 sessionStorage 与 localStorage 的行为，我创建了一个小提琴（用于演示目的）使用 sessionStorage 存储 div 的宽度和 localStorage 存储同一 div 的高度：

```
var randomWidth,
    randomHeight;
if (!(randomWidth= $.session.get("randomWidth"))) {    // assignment
    randomWidth = Math.random() * 300;
    $.session.set("randomWidth", randomWidth, true);
    console.log("just assigned and stored in sessionStorage: randomWidth: " + randomWidth);
} else {
    console.log("from sessionStorage: randomWidth: " + randomWidth);
}
if (!(randomHeight= $.domain.get("randomHeight"))) {    // assignment
    randomHeight = Math.random() * 300;
    $.domain.set("randomHeight", randomHeight, true);
    console.log("just assigned and stored in localStorage: randomHeight: " + randomHeight);
} else {
    console.log("from localStorage: randomHeight: " + randomHeight);
}
$(".test").css({width: randomWidth, height: randomHeight}); 
```

看看控制台。您会看到，当您启动客户端浏览器的新会话时，宽度会发生变化，而高度将保持不变（因为*本地*存储是每个域的）。

这是[**jsfiddle的链接**](http://jsfiddle.net/martyk/x48Kw/7/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T20:49:19.577

此问题不仅限于移动设备。如果用户不断选择“恢复上一个会话”，会话 cookie 也可能在桌面浏览器上“永远”持续（我很难学到这一点）。

将会话限制为一天的客户端解决方案如下：

设置两个cookie：

*   （浏览器）会话 cookie，以及
*   cookie 在用户半夜（例如凌晨 4 点或凌晨 5 点）过期，在设置后的 2 小时到 26 小时之间（通常，它应该在窗口 btw.x 和x+24 小时）

如果缺少任何一个 cookie，请启动一个新会话并重置它们。

要设置第二个 cookie，您可以使用[`Date.getTimezoneOffset()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset). 或者，如果您能够可靠地定位用户，以便您至少可以粗略估计他们的经度，您可以使用经度来计算“用户的午夜”预计的时间（1 小时是 15 度经度）。两种可能性是：通过 IP 地址（尽管知道国家/地区可能还不够：在像美国这样的国家，您至少需要州级别），或者通过使用 CDN 提供的信息（如果您使用一个）。

请记住，如果某些东西必须在一段时间后过期（例如，服务器上的会话），那么您不能依赖 cookie，您也必须在服务器端检查过期。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T21:04:25.943

我会询问用户是否想记住该位置。如果未将 cookie 的过期时间设置为服务器的超时时间。您将为用户提供选择用户体验的选择。

您可以尝试附加到 onbeforeunload 事件并发布到服务器以更改 cookie 的到期时间，或者如果 cookie 不是安全类型，则将其从 java 脚本中删除。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T21:22:39.753

这是一个有点*肮脏*的建议，绝不是万无一失的——但我认为值得一提。我从来没有一部手机在空闲时保持连接到互联网（它们都切断以节省电池和诸如此类的东西） - 并且移动网络非常迅速地回收IP地址。

可能值得将 IP 地址存储在会话数据中，并且可能与*上次访问*的时间戳一起 - 如果 IP 地址更改，则销毁/重新启动会话？

显然，这假设客户端是通过移动网络而不是 wifi 连接的。

# javascript - 每x分钟调用一次php函数

> ID：15202522
> 
> 赞同：0
> 
> 时间：2013-03-04T13:19:51.880
> 
> 标签：javascript

得到这个代码：

```
<?php
function test ($url){
$starttime = microtime(true);
$valid = @fsockopen($url, 80, $errno, $errstr, 30);
$stoptime = microtime(true);
echo (round(($stoptime-$starttime)*1000)).' ms.';

if (!$valid) {
   echo "Status - Failure";
} else {
   echo "Status - Success";
}
}
    test('google.com');
?> 
```

我想使用这样的东西：

```
<script>
setInterval(function(){<?php  test('google.com'); ?>},3000);
</script> 
```

我如何用 setInterval 调用 php 函数“测试”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:20:53.380

您可以在 x 秒后向服务器发送 AJAX 请求以执行该脚本。

```
var milliSeconds = 1000; // <-- As an example
setInterval( function() {
  // <-- Your AJAX request here
}, milliSeconds); 
```

# jquery - 如何在jquery中停止排序？

> ID：15202527
> 
> 赞同：1
> 
> 时间：2013-03-04T13:20:07.950
> 
> 标签：jquery, jquery-ui-sortable

我 `$("#images").sortable();`
用于在儿童小游戏中对一些图像进行排序，我想删除排序能力。怎么做 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:22:21.763

尝试这个

```
 $( ".selector" ).sortable( "disable" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:20:07.950

解决方案是使用具有“destroy”属性的相同功能

```
$( "#images" ).sortable('destroy'); 
```

# php - Symfony 1.4，Doctrine 加速

> ID：15202529
> 
> 赞同：0
> 
> 时间：2013-03-04T13:20:10.953
> 
> 标签：php, symfony-1.4

我将 Symfony 1.4 与 Doctrine 一起使用。我的问题是：只有这个数据库请求：

```
UserTable::getInstance()->find (1) 
```

占用 1 秒，我发现这很慢。我认为持久连接可能会有所帮助，但我没有经历任何变化。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:25:37.580

其实一个简单的select 1秒似乎挺长的……一些问题可以查查麻烦的根源：

*   你的表的 id 列上有索引吗？
*   你的表有多少行？为了更快，直接在您的数据库上发出相同请求的时间（尝试从 xxx where id = 1 中选择 * 到 phpmyadmin 或其他数据库管理器）。

如果在这种情况下请求很快，您必须查看以下元素：

*   您的数据库距离远吗？您的网络速度如何？
*   返回数据（UserTable 字段）的大小是多少？

# jquery - 如何为多个div“显示和隐藏带有切换按钮的内容”？

> ID：15202532
> 
> 赞同：-2
> 
> 时间：2013-03-04T13:20:13.733
> 
> 标签：jquery

我正在尝试为多个 div 创建切换按钮。我找到了一个很好的教程，分享下面的代码：

```
<script type="text/javascript">
$(document).ready(function(){   
$('.example2').hide().before('<a href="#" id="toggle-example2" class="button">Open/Close</a>');
    $('a#toggle-example2').click(function() {
        $('.example2').slideToggle(1000);
        return false;
    });
});
</script> 
```

如何更改多个 div 类的代码，例如 .example2、.example3、....

这是教程：[http ://rpardz.com/blog/show-hide-content-jquery-tutorial/](http://rpardz.com/blog/show-hide-content-jquery-tutorial/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:25:59.150

如果您已经知道 div 类，那么您可以将以下代码写入单独的函数中：

```
 function applytoggle(divclass) {
    var linkId = 'toggle-'+divclass; 
    $('.'+divclass).hide();
    $('.'+divclass).before('<a href="#" id="'+linkId+'" class="button">Open/Close</a>');
    $('a#toggle-' + divclass).live('click', function () {
        $('.'+divclass).slideToggle(1000);
        return false;
    });
} 
```

然后您可以为所有 div 调用注册切换事件

applytoggle('example1'); applytoggle('example2');

编辑：小提琴[http://jsfiddle.net/QLGwr/6/](http://jsfiddle.net/QLGwr/6/)

# jquery - 如何使用 jQuery 获取具有特定 CSS 属性的第一个父级？

> ID：15202542
> 
> 赞同：5
> 
> 时间：2013-03-04T13:21:04.247
> 
> 标签：jquery, css

我需要找到第一个拥有`position:relative`. 类似于下面的示例，但我的真实内容将动态生成。

```
<div id="parent1" style="position:relative">
    <div id="parent2">
        <div id="my-element" style="position:absolute"></div>
    </div>
</div> 
```

你知道使用 jQuery 的简单方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T13:24:46.157

您可以`filter`设置`parents()`, 并获取与您的过滤器匹配的第一个元素：

```
$('#my-element')
    .parents()
    .filter(function() { 
        return $(this).css('position') == 'relative'; 
    }).first(); 
```

[演示](http://jsfiddle.net/AEmjH/)（[也适用于类](http://jsfiddle.net/AEmjH/1/)）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-04T13:24:10.633

我建议您添加一个类，而不是直接更改样式，然后使用 jQuery 查找该类。更加简单直观。

CSS：

```
.active{
    position:relative;
} 
```

HTML：

```
<div id="parent1" class="active">
    <div id="parent2">
        <div id="my-element"></div>
    </div>
</div> 
```

jQuery：

```
//getting the first element with .active class
$('#my-element').closest('.active') 
```

# php - CodeIgniter 连接两个表

> ID：15202543
> 
> 赞同：1
> 
> 时间：2013-03-04T13:21:08.170
> 
> 标签：php, codeigniter, join

我正在尝试使用 CodeIgniter 将两个表连接在一起。我使用 CodeIgniter 用户指南寻求帮助。我遇到了一些问题，即只显示一个表的数据，我不知道为什么。有人可以帮我吗？

这是我的代码：

**控制器**

```
function getall(){      
    $this->load->model('result_model');
    $data['query'] =
    $this->result_model->result_getall();
    $this->load->view('result_view', $data);
    } 
```

**模型**

```
 function result_getall(){

    $this->db->select('*');
    $this->db->from('tblanswers');
    $this->db->join('credentials', 'tblanswers.answerid = credentials.cid', 'left'); 
    $query = $this->db->get();
    return $query->result();

    } 
```

**看法**

```
 <div>    

 <?php foreach ($query as $row): ?>      
                     //tblanswers
                   <?php echo $row->answerA;?><br>
               <?php echo $row->answerB;?><br>
               <?php echo $row->answerC;?><br>
                   <?php echo $row->comment;?><br>
                  //credentials
                    <?php echo $row->name; ?>
         <?php endforeach; ?>  

   </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:38:56.263

```
function result_getall(){

$this->db->select('tblanswers.*,credentials.*');
$this->db->from('tblanswers');
$this->db->join('credentials', 'tblanswers.answerid = credentials.cid', 'left'); 
$query = $this->db->get();
return $query->result();

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T17:46:04.633

在控制器中试试这个，看看结果如何。另外，如果你遇到任何错误，请告诉我们，并确保你的表中有数据:)。

**控制器**

```
function getall(){      
    $this->load->model('result_model');
    $data['query'] =$this->result_model->result_getall();
    print_r($data['query']);
    die();
    $this->load->view('result_view', $data);
    } 
```

# ios - Facebook 应用程序 - iPad/iPhone 中找不到的页面在桌面上运行良好

> ID：15202551
> 
> 赞同：1
> 
> 时间：2013-03-04T13:21:50.610
> 
> 标签：ios, facebook, facebook-page

如果之前有人问过这个问题，我提前道歉，但我花了 2 天时间在谷歌上搜索/尝试不同的方法都无济于事。

1.  我为客户构建了一个应用程序。
2.  它在桌面上运行良好。没问题。
3.  当我在我的 iPhone iPad 上单击应用程序的链接时，它显示“找不到页面”

客户页面（添加了“Win With Parade”应用程序： [https ://www.facebook.com/ParadeSwindon](https://www.facebook.com/ParadeSwindon)

有问题的应用程序： [https ://www.facebook.com/ParadeSwindon/app_155622657928426](https://www.facebook.com/ParadeSwindon/app_155622657928426)

我尝试了身份验证“本机/桌面”，但没有任何改进。

我附上了设置的屏幕截图，在桌面上也可以正常工作，只是在 iOS Facebook 应用程序中失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:26:25.487

您必须先在 iPhone 中登录。转到 -> 设置和 Facebook 输入用户名和密码，然后运行您的应用程序。它会起作用的。在IOS 6.0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:26:55.630

您无法从移动本机应用程序访问页面应用程序（无论如何还没有）

见： http: [//facebook.stackoverflow.com/a/7226742/910325](http://facebook.stackoverflow.com/a/7226742/910325)

# php - 检查PHP数组是否为空的最佳方法

> ID：15202553
> 
> 赞同：10
> 
> 时间：2013-03-04T13:21:55.743
> 
> 标签：php, optimization

这主要是肤浅的，但检查数组是否为空的**最佳方式（执行速度更快，而不是个人偏好或可读性）是什么：**

1.  `count($arr) == 0`
2.  `empty($arr)`
3.  `$arr === array()`
4.  其他？

我的猜测是

1.  尽可能迭代然后返回
2.  检查变量是否为数组后只需执行 1
3.  似乎它应该很慢，因为它必须构造一个新对象来比较

但这并没有考虑到它在此处执行的任何编译时优化。

## 免责声明

我不打算通过我的代码库将所有实例更改为最快的方法，所以请不要提醒我这是微优化。这是简单的好奇心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:26:43.927

```
 if(empty($arr))
    echo "Empty";
    else
    echo "Ok..!"; 
```

这是检查数组是否为空的最快和安全的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:35:59.903

一个空数组是：

```
 $emptyArray = array(); 
```

检查它的空：

```
 if( empty( $emptyArray ) ){

         echo 'array is empty';

    } 
```

如果数组不为空：

```
 $notEmptyArray = array( 'item' ); 
```

检查它不为空：

```
 if( !empty( $notEmptyArray ) ){

         echo 'array not empty';

    } 
```

还有其他方法可以做到这一点，但是为这类事情构建的空函数。

# java - 从 Java 开发工具包运行 Amazon EMR 作业

> ID：15202555
> 
> 赞同：4
> 
> 时间：2013-03-04T13:22:03.317
> 
> 标签：java, amazon-emr

我正在尝试通过 Java SDK 运行 EMR 作业。

但它根本没有启动。

我正在粘贴我正在使用的代码。

我还查看了[文档](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/calling-emr-with-java-sdk.html)。但这并没有太大帮助。

```
 package com.zedo.aws.emr;

     import com.amazonaws.auth.AWSCredentials;
     import com.amazonaws.auth.BasicAWSCredentials;
     import com.amazonaws.services.elasticmapreduce.AmazonElasticMapReduceClient;
     import com.amazonaws.services.elasticmapreduce.model.JobFlowInstancesConfig;
     import com.amazonaws.services.elasticmapreduce.model.RunJobFlowRequest;
     import com.amazonaws.services.elasticmapreduce.model.RunJobFlowResult;
     import com.amazonaws.services.elasticmapreduce.model.StepConfig;
     import com.amazonaws.services.elasticmapreduce.util.StepFactory;

public class ExampleEMR {

    /**
     * @param args
     */
    public static void main(String[] args) {

        AWSCredentials credentials = new BasicAWSCredentials("<my key>", "<my secret key>");
        AmazonElasticMapReduceClient emr = new AmazonElasticMapReduceClient(credentials);

        StepFactory stepFactory = new StepFactory();

        StepConfig enableDebugging = new StepConfig()
            .withName("Enable Debugging")
            .withActionOnFailure("TERMINATE_JOB_FLOW")
            .withHadoopJarStep(stepFactory.newEnableDebuggingStep());

        StepConfig installHive = new StepConfig()
            .withName("Install Hive")
            .withActionOnFailure("TERMINATE_JOB_FLOW")
            .withHadoopJarStep(stepFactory.newInstallHiveStep());

        StepConfig hiveScript = new StepConfig().withName("Hive Script")
            .withActionOnFailure("TERMINATE_JOB_FLOW")
            .withHadoopJarStep(stepFactory.newRunHiveScriptStep("s3://<path to script>"));

        RunJobFlowRequest request = new RunJobFlowRequest()
            .withName("Hive Interactive")
            .withSteps(enableDebugging, installHive)
            .withLogUri("s3://myawsbucket/")
            .withInstances(new JobFlowInstancesConfig()
                .withEc2KeyName("<my key>")
                .withHadoopVersion("0.20")
                .withInstanceCount(5)
                .withKeepJobFlowAliveWhenNoSteps(true)
                .withMasterInstanceType("m1.small")
                .withSlaveInstanceType("m1.small"));

        RunJobFlowResult result = emr.runJobFlow(request);

    }

} 
```

或者有人可以指出一些示例链接吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-25T16:19:44.590

这对我有用：

```
public void runScriptClientes(Calendar executionDate) {

    // creacion credecencial s3
    BasicAWSCredentials awsCreds = new BasicAWSCredentials(rb.getString("awsAccessKey"),
            rb.getString("awsSecretKey"));

    // creacion cliente para conectarse s3
    AmazonElasticMapReduceClient emr = new AmazonElasticMapReduceClient(awsCreds);
    emr.setRegion(Region.getRegion(Regions.EU_WEST_1));

    // calculo de las carpeta a procesar
    Map<String, FolderS3> s3DataToProcessInput = getRutasInput(executionDate);
    //Map<String, Boolean> s3DataToProcessOut = getRutaInput();

    for (Entry<String, FolderS3> bucket_ : s3DataToProcessInput.entrySet()){
        String nameBucket = bucket_.getKey();
        FolderS3 folderS3 = bucket_.getValue();
        // verificar existencia bucket
        if(folderS3.getExistInBucket()){
            listaConcurrente.add(folderS3);
            StepFactory stepFactory = new StepFactory();

            StepConfig stepHive = new StepConfig()
                    .withName(rb.getString("nameStepClientesS3")+":"+nameBucket)/*nombre del step a ejecutar*/
                    .withActionOnFailure(ActionOnFailure.CONTINUE) /*accion a seguir si el step falla*/
                    .withHadoopJarStep(
                            stepFactory.newRunHiveScriptStep(rb.getString("scriptClienteS3"), 
                                    "-d", "s3DataToProcess=s3://"+rb.getString("bucketPropio")+"/"+rb.getString("ruta_input_c1")+folderS3.getNameKey(),
                                    "-d", "s3DataToProcessOut=s3://"+rb.getString("bucketPropioOUT")+"/"+rb.getString("ruta_output_c1")+folderS3.getOutputFolder(),
                                    "-d", "windowTime=tablaparametro"));

            AddJobFlowStepsRequest jobFlow = new AddJobFlowStepsRequest().withJobFlowId(rb.getString("jobflowID"))
                    .withSteps(stepHive);

            //mientras el estado sea pending o running
            AddJobFlowStepsResult result = emr.addJobFlowSteps(jobFlow);
            List<String> id = result.getStepIds();
            DescribeStepRequest describe = new DescribeStepRequest().withStepId(id.get(0));
            describe.setClusterId(rb.getString("jobflowID"));
            describe.setRequestCredentials(awsCreds); 
            DescribeStepResult res = emr.describeStep(describe);
            StepStatus status = res.getStep().getStatus();
            String stas = status.getState();

            while (stas.equals(StepExecutionState.PENDING.name()) || stas.equals(StepExecutionState.RUNNING.name())){
                try {
                    Thread.sleep(5000);
                    res = emr.describeStep(describe);
                    status = res.getStep().getStatus();
                    stas = status.getState();
                    log.info(stas);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }

            if (stas.equals(StepExecutionState.COMPLETED.name())) {
                folderS3.setProcessedInput(Boolean.TRUE);
                listaConcurrente.remove(folderS3);
                log.info("Step finalizado ok : "+folderS3 );
            }else if(stas.equals(StepExecutionState.FAILED.name()) || stas.equals(StepExecutionState.CANCELLED.name())){
                listaConcurrente.remove(folderS3);
                folderS3.setProcessedInput(Boolean.FALSE);
                listaConcurrente.add(folderS3);
                log.info("Step Fallo o fue Cancelado : "+folderS3 );
            }

            // leer datos del resultado y cargar en BBDD

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:11:35.443

以下是您可以参考的链接，

[http://mpouttuclarke.wordpress.com/2011/06/24/how-to-run-an-elastic-mapreduce-job-using-the-java-sdk/](http://mpouttuclarke.wordpress.com/2011/06/24/how-to-run-an-elastic-mapreduce-job-using-the-java-sdk/)

注意：上述方法中使用的一些方法已弃用。有关更新版本，请参阅 aws[参考指南。](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/elasticmapreduce/AmazonElasticMapReduceClient.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T12:21:47.883

我已经通过更正最后的密钥来解决这个问题。

# ios - 检测 NSUserDefaults 上的更改

> ID：15202562
> 
> 赞同：26
> 
> 时间：2013-03-04T13:22:25.597
> 
> 标签：ios, objective-c, nsuserdefaults

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我想知道一个属性何时`NSUserDefaults`改变它的值。

我找到[了这个](https://stackoverflow.com/questions/1141388/cocoa-notification-on-nsuserdefaults-value-change)，但它特定于 macOS：

```
[[NSUserDefaultsController sharedUserDefaultsController] addObserver:self
    forKeyPath:[@"values." stringByAppendingString: @"MyPreference"]
    options:NSKeyValueObservingOptionNew
    context:NULL]; 
```

**我怎样才能在 iOS 上做到这一点？**

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-04T13:25:20.717

试试`NSUserDefaultsDidChangeNotification`这个代码片段：

```
- (id)init {

  self = [super init];

  if(self) {
     [[NSNotificationCenter defaultCenter] addObserver:self
                                              selector:@selector(defaultsChanged:)
                                                  name:NSUserDefaultsDidChangeNotification
                                                object:nil];
  }
  return self;    
}

- (void)defaultsChanged:(NSNotification *)notification {
  // Get the user defaults
  NSUserDefaults *defaults = (NSUserDefaults *)[notification object];

  NSLog(@"%@", [defaults objectForKey:@"yourIntrestedObject"]);
}

- (void)dealloc {
 [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-04T13:33:36.630

使用 NSUserDefaultsDidChangeNotification 通知用户默认值的变化：

```
[[NSNotificationCenter defaultCenter] addObserver:self
    selector:@selector(defaultsDidChange:) name:NSUserDefaultsDidChangeNotification
    object:nil];

// notification
- (void)defaultsDidChange:(NSNotification *)aNotification
{
     //
} 
```

使用 KVO 通知有关用户默认值的特定更改：

```
[[NSUserDefaults standardUserDefaults] addObserver:self 
    forKeyPath:@"APXMyPropertyIamInterestedInKey" options:NSKeyValueObservingOptionNew
    context:NULL];

// KVO handler
-(void)observeValueForKeyPath:(NSString *)aKeyPath ofObject:(id)anObject
    change:(NSDictionary *)aChange context:(void *)aContext 
{
    // 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-03T16:29:52.347

如果您需要在 Swift 4 项目中使用它，您可以使用以下内容：

```
override func viewDidLoad() {
    super.viewDidLoad()
    NotificationCenter.default.addObserver(self, selector: #selector(defaultsChanged), name: UserDefaults.didChangeNotification, object: nil)
}

@objc func defaultsChanged() {
    // Your code
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-09T17:15:52.000

在 Xcode 帮助中，`UserDefaults`类的概述（的 swifty 名称`NSUserDefaults`）清楚地指出：

> 您可以使用键值观察来为感兴趣的特定键注册观察者，以便在本地默认数据库的所有更新时收到通知。有关详细信息，请参阅键值观察编程指南。”

我会看看我是否能想出一个快速的代码示例，但是堆栈溢出必须在 swift 中充满 KVO 示例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-15T16:35:32.957

这是我发布的关于如何在 Swift 中执行此操作并获取 userInfo 的解决方案：

[如何确定 iOS 上的设置何时更改](https://stackoverflow.com/questions/3927402/how-to-determine-when-settings-change-on-ios/33722059#33722059)

# mysql - 如何从 mysql 获取 utf-8 字符到 visual fox pro

> ID：15202563
> 
> 赞同：0
> 
> 时间：2013-03-04T13:22:25.850
> 
> 标签：mysql, utf-8, visual-foxpro

我有一个单列的 MYSQL 表。数据库、表和列排序规则设置为：utf8_general_ci。
使用浏览器，我在该字段中插入字符串。如果我插入如下字符：şţăîâ 或 ŞŢĂÎÂ，则插入正常。我可以使用 Phpmyadmin 看到它们。
我的问题是当我想要 Visual Fox Pro 中的那个表时。
我正在使用这个：

```
conn_str="Driver={MySQL ODBC 5.1 Driver};Server=localhost;Database=database_name;User=user_name;Password=pass;Option=71305256"
conn=SQLSTRINGCONNECT(conn_str)    

SQLEXEC(conn,"SET CHARACTER SET utf8")
SQLEXEC(conn,"SET COLLATION_CONNECTION='utf8_general_ci'")

SQLEXEC (conn,"select * from table_name","Cursor") 
```

但是在 vfp 光标中，像 şţăîâ 这样的字符串看起来像 ???îâ 有
什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:32:38.180

我认为您必须将 MySQL 更改为 CP-1252 之类的 ANSI 字符集，因为 visual frox pro 似乎不支持 utf-8。请参阅 [Visual FoxPro 中的 Unicode 支持有什么问题](http://www.west-wind.com/presentations/foxunicode/foxunicode.asp#WhatProblem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-24T14:38:03.773

您需要转换`strings`为`binary`. 例如：

```
SQLEXEC(conn,"select cast(lastname as binary) as lastname from table_name","Cursor") 
```

# java - 从 git 导入的项目到 eclipse 中每行显示错误

> ID：15202566
> 
> 赞同：0
> 
> 时间：2013-03-04T13:22:40.723
> 
> 标签：java, eclipse

我正在使用 eclipse 在 linux 中工作。我将一个 java 项目从 git 导入到 eclipse 中。从 git eclipse 导入后，每一行都显示错误。我尝试搜索错误，但我认为它很少见。

有人可以告诉我如何解决这个问题。

# ember.js - 挣扎于 Ember-data 的 REST 适配器和嵌套资源

> ID：15202570
> 
> 赞同：6
> 
> 时间：2013-03-04T13:23:17.873
> 
> 标签：ember.js, ember-data

我真的在使用 Ember-data 的 REST 适配器和嵌套资源苦苦挣扎，希望能得到任何帮助……我正在使用 Ember 和 Ember-data 的最新（1.0.4pre）版本（修订版：11）。

我有 2 个简单的模型：

```
App.User = DS.Model.extend({
  name:     DS.attr('string'),
  email:    DS.attr('string'),
  schemes:  DS.hasMany('App.Scheme')
});

App.Scheme = DS.Model.extend({
  name: DS.attr('string'),
  users: DS.hasMany('App.User')
}); 
```

和简单的嵌套路线：

```
Router.map(function() {
  this.resource("user", { path: "users/:user_id" }, function() {
    this.resource("schemes");
  });
}); 
```

我有一个 Rails 3 JSON API，它具有以下端点：

```
/users/:user_id
/users/:user_id/schemes 
```

当我在我的 ember 应用程序中导航到`users/:user_id/schemes`时，我想检索所有用户的方案，但是默认情况下 Ember-data requests `/schemes`，它不是我的 API 中的端点 - 我可以添加它，但我需要按用户来确定方案的范围，我不有 current_user 的概念，因为我想查看任何用户和她的方案。

有没有办法强制 Ember 查看`/users/:user_id/schemes`或将查询参数附加到 Ember 的默认 ajax 调用，例如：`/schemes?user_id=:user_id`？

或者，有没有办法添加到 ajax 请求标头，而我的 rails API 可以相应地读取和设置`/schemes`响应？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:17:13.273

似乎这个功能已经讨论了很多，但还没有实现。[此问题](https://github.com/emberjs/data/issues/186)包含用于快速解决的示例代码。

您还可以使用：

```
var userSchemes = App.Scheme.find({ used_id: 'id' }); 
```

来查询`/schemes?user_id=id`。

# linux - 无法在厨师中安装食谱

> ID：15202572
> 
> 赞同：3
> 
> 时间：2013-03-04T13:23:24.347
> 
> 标签：linux, ubuntu, chef-infra, ubuntu-12.10

我刚刚开始了我的厨师之旅，我运行了几个 ubuntu ec2 实例，我已经安装了 chef-client 并配置了节点。[我正在尝试运行我正在关注此wiki](http://wiki.opscode.com/display/chef/Fast+Start+Guide)的入门食谱

```
knife cookbook site install getting-started 
```

但是，当我运行此命令时，我在运行 ubuntu 12.10 的笔记本电脑中遇到此错误

```
Installing getting-started to /var/chef/cookbooks
ERROR: The default branch 'master' does not exist
If this is a new git repo, make sure you have at least one commit before installing cookbooks 
```

我只是一个初学者，我无法弄清楚如何将一个简单的说明书部署到我的所有实例。

请帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:12:06.860

你必须

```
> git add --all
> git commit -a -m "updates"
> git stash save 
```

您必须查看 [https://docs.chef.io/errors.html](https://docs.chef.io/errors.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-20T00:28:21.767

我必须提交到 git /var/chef/cookbooks 目录，首先添加一个 readme.txt 文件，这样 git repo 中实际上有一些东西。

之后，运行 weblogic 的安装

```
 sudo su -
    cd /var/chef/cookbook
    git init
    echo "New repo!" > readme.txt
    git add readme.txt
    git commit -a -m "initializing repo for chef"
    cd /home/your-username/chef-repo
    knife cookbook site install weblogic 
```

# javascript - 无法连接 Node-mysql

> ID：15202575
> 
> 赞同：4
> 
> 时间：2013-03-04T13:23:29.247
> 
> 标签：javascript, mysql, configuration, node-mysql

我正在尝试使用 node-mysql 连接到我的 mysql 数据库。当我尝试以下代码时，我收到此错误：

错误：错误：连接 ETIMEDOUT

有谁知道怎么了？顺便说一句，数据库已启动并正在运行。

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/');

var mysql = require('mysql');

var connection = mysql.createConnection({
    host: "correct_host",
    user: "correct_user",
    password: "correct_password",
    database: "correct_database",
    debug: true, 
});

connection.connect(function(err) {
    if (err) {
        console.log('ERROR: ' + err);
    } else {
        console.log('Connected to ' + server.hostname + ' (' + server.version + ')');
    };
});

connection.query('SELECT 1', function(err, rows) {
  // connected! (unless `err` is set)
});

connection.query('SELECT * FROM Effect', function(err, rows, fields) {
  if (err) console.log('ERROR: ' + err);

  for (x in rows) {
    console.log('Row: ', x);
  }
});

// Handle disconnect

function handleDisconnect(connection) {
  connection.on('error', function(err) {
    if (!err.fatal) {
      return;
    }

    if (err.code !== 'PROTOCOL_CONNECTION_LOST') {
      throw err;
    }

    console.log('Re-connecting lost connection: ' + err.stack);

    connection = mysql.createConnection(connection.config);
    handleDisconnect(connection);
    connection.connect();
  });
}

handleDisconnect(connection); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T19:35:42.007

它可能不是节点。如果是节点，则检查`host: "correct_host"`实际上是正确的主机。否则，请尝试从节点外部的命令行连接到您的 mysql 服务器。

# emacs - Emacs：符号作为变量的值是 void：custom-theme-load-path

> ID：15202577
> 
> 赞同：4
> 
> 时间：2013-03-04T13:23:34.660
> 
> 标签：emacs, configuration, themes, aquamacs

我正在尝试将 Aquamacs 配置为使用日晒主题。我已经将 aquamacs 配置为使用 erlang 并且效果很好。然而，在尝试将自定义主题添加到加载路径后，启动 aquamacs 时出现以下错误：

```
Symbol's value as variable is void: custom-theme-load-path 
```

我对 emacs 很陌生，而且我仍然在为几乎所有事情做准备，这让我惊呆了。我已经仔细检查了无数次路径，所以我可能只是不明白如何正确添加主题路径。

这是我`~/.emacs-old.el`的 aquamacs 使用的文件：

```
(setq load-path (cons"/usr/local/Cellar/erlang/R15B01/lib/erlang/lib/tools-2.6.7/emacs" load-path))
(setq erlang-root-dir "/usr/local/Cellar/erlang/R15B01/lib/erlang/lib")
(setq exec-path (cons "/usr/local/Cellar/erlang/R15B01/lib/erlang/bin" exec-path))
(require 'erlang-start)

(add-to-list 'custom-theme-load-path "~/.emacs.d/emacs-color-theme-solarized/")
(load-theme 'solarized-[light|dark] t) 
```

这是从我的终端打印出来的文件列表和路径：

```
Daniel:emacs-color-theme-solarized daniel$ pwd
/Users/daniel/.emacs.d/emacs-color-theme-solarized
Daniel:emacs-color-theme-solarized daniel$ ls -l
total 208
-rw-r--r--  1 daniel  staff   1061 Mar  4 14:04 LICENSE
-rw-r--r--  1 daniel  staff   8744 Mar  4 14:04 README.md
drwxr-xr-x  7 daniel  staff    238 Mar  4 14:20 color-theme-solarized-20130304
-rw-r--r--  1 daniel  staff  36864 Mar  4 14:20 color-theme-solarized-20130304.tar
-rw-r--r--  1 daniel  staff    109 Mar  4 14:04 color-theme-solarized-pkg.el
-rw-r--r--  1 daniel  staff   1846 Mar  4 14:04 color-theme-solarized.el
-rwxr-xr-x  1 daniel  staff    309 Mar  4 14:04 makepkg.sh
-rw-r--r--  1 daniel  staff    169 Mar  4 14:04 solarized-dark-theme.el
-rw-r--r--  1 daniel  staff  28902 Mar  4 14:04 solarized-definitions.el
-rw-r--r--  1 daniel  staff    170 Mar  4 14:04 solarized-light-theme.el
Daniel:emacs-color-theme-solarized daniel$ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T15:42:32.893

`custom-theme-load-path`在 Emacs 24 中添加（参见 [NEWS 文件](http://www.gnu.org/software/emacs/NEWS.24.1)）。您必须拥有 Emacs 23 或更早版本，这意味着您必须以旧方式加载主题。

如果您还没有它（`M-x color-theme-select`如果不确定，请尝试），下载并安装[color-theme](http://www.nongnu.org/color-theme)。

然后，使用完整路径加载日晒主题：

```
(load-file "~/.emacs.d/emacs-color-theme-solarized/color-theme-solarized.el") 
```

加载后，您可以`M-x color-theme-solarized` 直接从`.emacs`文件中运行或加载它

```
(color-theme-solarized) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T15:43:50.823

你不见了`custom-theme-load-path`。不，你不能只是“添加”它。这个变量是 Emacs **24**中新的主题基础设施的一部分。但是，您显然使用的是 Emacs **23**的 Aquamacs 。

要在 Emacs 中安装此版本的 Solarized，请使用[emacs-color-theme-solarized并按照](https://github.com/sellout/emacs-color-theme-solarized)[Emacs 24 之前](https://github.com/sellout/emacs-color-theme-solarized#color-theme-pre-emacs-24)的安装说明进行操作。

但是帮自己一个忙，放弃 Aquamacs，并使用[普通的 GNU Emacs 24.2](http://emacsformacosx.com/)。

# testing - 在构建过程中运行 Chrome

> ID：15202585
> 
> 赞同：0
> 
> 时间：2013-03-04T13:24:08.200
> 
> 标签：testing, jenkins, functional-testing

我正在尝试在 Windows 上运行 Chrome 作为一组自动化测试工具的一部分，同时构建 Chrome 扩展。

下面的命令在 chrome 中加载 about:blank，强制加载扩展，指定用户目录并启用日志记录。

```
"c:\PATHTO\chrome.exe" --enable-logging --v=1 --load-extension=c:\JenkinsBuild --user-data-dir=c:\ChromeBuildTest about:blank 
```

我的意图是然后查看日志文件中的错误。

当我将它作为手动过程运行时，这有效，但通过 Jenkins 运行构建只是挂起。

我认为这是因为`chrome.exe`永远不会完成，因此永远不会发出返回码。有没有办法让它按我的意愿工作？

谢谢

# java - 在 Java 中使用工厂模式

> ID：15202590
> 
> 赞同：-2
> 
> 时间：2013-03-04T13:24:23.087
> 
> 标签：java, swing, design-patterns, factory-pattern

我正在研究工厂模式，我对构建它的最佳方式有些疑问。我开发了两个完全相同的程序，唯一的区别是实现相关模式的代码。经过比较可以帮助我找到：

1.  对于可重用性、JVM、性能等，哪个代码更好，数字 1 还是 2？

2.  3.er 是做更多事情的最佳方式吗？

**共享课程**

**艺术家**

```
 public class ArtistFrame extends AbstractFactoryJInternalFrame {

public ArtistFrame(String title, int x, int y) {
    super(title, x, y);
}

@Override
void makeButtons() {

    JButton addBtn = new JButton("Add");
    addBtn.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent actionEvent) {
            //to do
        }
    });

    JButton saveBtn = new JButton("Save");
    saveBtn.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent actionEvent) {
            //to do
        }
    });

    JButton deleteBtn = new JButton("Delete");
    deleteBtn.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent actionEvent) {
            //to do
        }
    });

    JButton cancelBtn = new JButton("Cancel");
    cancelBtn.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent actionEvent) {
            //to do
        }
    });

    add(addBtn, BorderLayout.SOUTH);
    add(saveBtn, BorderLayout.NORTH);
    add(deleteBtn, BorderLayout.EAST);
    add(cancelBtn, BorderLayout.WEST);

}
} 
```

**追踪**

```
public class TrackFrame extends AbstractFactoryJInternalFrame {

    public TrackFrame(String title, int x, int y) {
        super(title, x, y);

    }

    @Override
    void makeButtons() {

        JButton addBtn = new JButton("Add");
        addBtn.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent actionEvent) {
                //to do
            }
        });

        JButton saveBtn = new JButton("Save");
        saveBtn.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent actionEvent) {
                //to do
            }
        });

        JButton deleteBtn = new JButton("Delete");
        deleteBtn.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent actionEvent) {
                //to do
            }
        });

        JButton cancelBtn = new JButton("Cancel");
        cancelBtn.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent actionEvent) {
                //to do
            }
        });

        add(addBtn, BorderLayout.NORTH);
        add(saveBtn, BorderLayout.CENTER);
        add(deleteBtn, BorderLayout.EAST);
        add(cancelBtn,BorderLayout.WEST);

    }
} 
```

**专辑**

```
public class AlbumFrame extends AbstractFactoryJInternalFrame {

    public AlbumFrame(String title, int x, int y) {
        super(title, x, y);

    }

    @Override
    void makeButtons() {

        JButton addBtn = new JButton("Add");
        addBtn.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent actionEvent) {
                //to do
            }
        });

        JButton saveBtn = new JButton("Save");
        saveBtn.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent actionEvent) {
                //to do
            }
        });

        JButton deleteBtn = new JButton("Delete");
        deleteBtn.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent actionEvent) {
                //to do
            }
        });

        JButton cancelBtn = new JButton("Cancel");
        cancelBtn.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent actionEvent) {
                //to do
            }
        });

        add(addBtn, BorderLayout.EAST);
        add(saveBtn, BorderLayout.WEST);
        add(deleteBtn, BorderLayout.NORTH);
        add(cancelBtn, BorderLayout.SOUTH);

    }
} 
```

**案例一**
主类

```
public class TestSwing extends JFrame {

    JDesktopPane desktop;
    AbstractFactoryJInternalFrame artistFrame;
    AbstractFactoryJInternalFrame albumFrame;
    AbstractFactoryJInternalFrame trackFrame;

    public TestSwing() {

        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        setSize(500,300);

        desktop = new JDesktopPane();

        artistFrame = AbstractFactoryJInternalFrame.getFrame("Artist",10,10);
        albumFrame = AbstractFactoryJInternalFrame.getFrame("Album", 20, 20);
        trackFrame = AbstractFactoryJInternalFrame.getFrame("Track", 30,30);

        desktop.add(artistFrame);
        desktop.add(albumFrame);
        desktop.add(trackFrame);

        setContentPane(desktop);

        setVisible(true);

    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                TestSwing ts = new TestSwing();
            }
        });

    }
} 
```

工厂类公共抽象类 AbstractFactoryJInternalFrame 扩展 JInternalFrame {

```
protected AbstractFactoryJInternalFrame(String title, int x, int y) {
    super(title, true, true, true, true);
    setLocation(y,y);

}

public static AbstractFactoryJInternalFrame getFrame(String title, int x, int y) {

    AbstractFactoryJInternalFrame frame = null;

    if (title.equals("Artist")) {
        frame = new ArtistFrame(title, x, y);

    } else if (title.equals("Album")) {
        frame = new AlbumFrame(title, x, y);

    } else {
        frame = new TrackFrame(title, x, y);
    }

    frame.makeButtons();
    frame.pack();
    frame.setVisible(true);

    return frame;

}

abstract void makeButtons();
} 
```

**案例2**
主要类

```
public class TestSwing extends JFrame {

    JDesktopPane desktop;

    AbstractFactoryJInternalFrame artistFrame;
    AbstractFactoryJInternalFrame albumFrame;
    AbstractFactoryJInternalFrame trackFrame;

    public TestSwing() {

        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        setSize(500,300);

        desktop = new JDesktopPane();

        artistFrame = new ArtistFrame("Arist",10,10);
        albumFrame = new AlbumFrame("Album", 20, 20);
        trackFrame = new TrackFrame("Track", 30,30);

        desktop.add(artistFrame);
        desktop.add(albumFrame);
        desktop.add(trackFrame);

        setContentPane(desktop);

        setVisible(true);
    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                TestSwing ts = new TestSwing();
            }
        });

    }
} 
```

工厂类

```
 public abstract class AbstractFactoryJInternalFrame extends JInternalFrame {

protected AbstractFactoryJInternalFrame(String title, int x, int y) {
    super(title, true, true, true, true);
    setLocation(y,y);
    makeButtons();
    pack();
    setVisible(true);

}

abstract void makeButtons();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:31:51.530

实际上，您的案例#2 似乎不是“工厂”，因为您正在使用 operator *new*来创建实例。另一方面，case#1 似乎是正确的，但我不知道 getFrame(..) 做了什么，因为没有发布代码。

```
 artistFrame = AbstractFactoryJInternalFrame.getFrame("Artist",10,10); 
```

无论如何，你应该检查这个链接[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)

# mongodb - 在 MongoDB 中嵌套 $and 或分组 $and

> ID：15202591
> 
> 赞同：0
> 
> 时间：2013-03-04T13:24:24.227
> 
> 标签：mongodb

考虑以下文档：

```
{
    "_id" : ObjectId("5130f9a677e23b11503fee55"),
    "ItemType" : "Bicycle"
     "Attributes" : [{
         "AttributeName" : "Spare Tire",
         "AttributeValue" : "1"
     }, {
         "AttributeName" : "With helmet?",
         "AttributeValue" : "0"
     }, {
         "AttributeName" : "Number of Locks",
         "AttributeValue" : "1"
     }]
} 
```

如何编写查询以获取*带备用轮胎且不带头盔的自行车*？

我尝试了以下，但它没有给我我想要的。

```
{ 
"$and" : 
[ 
    { "ItemType" : "Bicycle" }, 
    { "$and": 
        [{ "Attributes.AttributeName" : "With helmet?" }, 
         { "Attributes.AttributeValue" : "0" }
   ]},
    { "$and": 
        [{ "Attributes.AttributeName" : "Spare Tire" }, 
         { "Attributes.AttributeValue" : "1" }
   ]}
]} 
```

似乎只要有一个匹配的值`Attributes.AttributeValue`——不管伴随的如何`Attributes.AttributeName`——它就会返回该文档。就像有这个查询：

```
{ 
"$and" : 
[ 
    { "ItemType" : "Bicycle" },                        //true
    { "Attributes.AttributeName" : "With helmet?" },   //true 
    { "Attributes.AttributeName" : "Spare Tire" },     //true
    { "Attributes.AttributeValue" : "0" },             //any
    { "Attributes.AttributeValue" : "1" }              //any
]} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:28:53.853

我相信你在这里寻找`$elemMatch`，从而确保对应的`AttributeName`和`AttributeValue`在多值字段的相同元素中（[http://docs.mongodb.org/manual/reference/operator/elemMatch/](http://docs.mongodb.org/manual/reference/operator/elemMatch/)）：

```
{
    ItemType: 'Bicycle', 
    $and:[
        {"Attributes": {$elemMatch:{AttributeName: 'With helmet?', AttributeValue: 0 }}},
        { //Next match }
    ]
} 
```

尝试类似的东西

# yeoman - 将 Foundation 与 Yeoman 一起使用

> ID：15202593
> 
> 赞同：3
> 
> 时间：2013-03-04T13:24:28.213
> 
> 标签：yeoman, gruntjs

我正在尝试使用 Yeoman 和 Foundation 构建一个 Web 项目。我已经创建了基本项目并包含了 Foundation 组件，`bower install foundation`但是当我运行`grunt server`它时无法编译 Foundation 或将其移动到应用程序树中。如何让 Yeoman（或 grunt）识别和编译 Foundation？

我正在使用 Yeoman 1.0.0-beta.3。运行以设置项目的命令是：

```
npm install generator-angular generator-testacular
bower install foundation
yo angular --minsafe
npm install
bower install --dev
grunt server 
```

但是 compass:server 任务报告`Nothing to compile. If you're trying to start a new project, you have left off the directory argument.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T04:44:24.533

我刚刚习惯了约曼和基金会。但是您不应该添加 < script > 标签以便 grunt 识别您打算使用“基础”吗？

[从约曼开始](http://yeoman.io/learning/)。

```
yo angular 
bower install angular-ui
# then add <script src="components/angular-ui/build/angular-ui.js"></script>
# and <link rel="stylesheet" href="components/angular-ui/build/angular-ui.css"/>
grunt 
```

# iphone - 发布通知的 OCUnit 测试用例

> ID：15202611
> 
> 赞同：0
> 
> 时间：2013-03-04T13:25:48.670
> 
> 标签：iphone, ipad, ocunit

```
- (id)init
{
    if (self = [super init])
    {

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(onDidFinishLaunchingNotification:)
                                                     name:UIApplicationDidFinishLaunchingNotification
                                                   object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(onWillEnterForegroundNotification:)
                                                     name:UIApplicationWillEnterForegroundNotification
                                                   object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(onDidBecomeActiveNotification:)
                                                     name:UIApplicationDidBecomeActiveNotification
                                                   object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(onWillTerminateNotification:)
                                                     name:UIApplicationWillTerminateNotification
                                                   object:nil];
    }

    return self;
}

// Notification Observers
- (void)onDidFinishLaunchingNotification:(NSNotification*)notification
{
    NSLog(@"onDidFinishLaunchingNotification");

}

- (void)onWillEnterForegroundNotification:(NSNotification*)notification
{
    NSLog(@"onWillEnterForegroundNotification");

}
- (void)onDidBecomeActiveNotification:(NSNotification*)notification
{
    NSLog(@"::onDidBecomeActiveNotification");
}

- (void)onWillTerminateNotification:(NSNotification*)notification
{
    NSLog(@"onWillTerminateNotification");
} 
```

通知测试用例

```
 -(void)setup{
        [super setUp];

    mClassObj = [[ClassA alloc]init];

    }

-(void)teaddown{

mClassObj = nil;
    [super tearDown];

}
 -(void)testUIApplicationDidFinishLaunchingNotification {

        [[NSNotificationCenter defaultCenter]postNotificationName:UIApplicationDidFinishLaunchingNotification object:nil];    
        } 
```

**期待这会奏效！**

但是测试用例失败了

```
-[__NSCFString onDidFinishLaunchingNotification:]: unrecognized selector sent to instance 
```

我正在尝试涵盖上述通知方法的测试用例，但它给了我错误，说无法识别的选择器已发送到实例！

任何人都建议我涵盖通知方法的测试用例

@提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:31:29.720

除了我认为`setUp`和`tearDown`（注意大写）的意外拼写错误之外，这段代码没有任何问题。我放了一个断点`onDidFinishLaunchingNotification:`，它被测试触发了。

问题是，一个常量 NSString 是如何潜入其中的？

# java - 为什么我的 Java 首选项代码不能在所有计算机上运行？

> ID：15202620
> 
> 赞同：1
> 
> 时间：2013-03-04T13:26:09.197
> 
> 标签：java, preferences

我正在使用首选项来保存 JFrame 的位置，因此当它再次出现时，它应该与之前退出的位置相同。我让它在我的电脑上工作，但它似乎不适用于我测试过的其他 3 台电脑。我将我的项目导出为 jar 文件，并让人们使用 jar 文件执行程序。

框架的位置没有保存，它总是出现在屏幕的左上角。

这是我第一次使用首选项，我多次查看 API，但似乎看不出我做错了什么。有人可以解释为什么它只适用于我的电脑吗？

首选项设置位于类的底部。

**SSCCE：**

```
public class PreferencesTest implements ActionListener {
private JButton wrongButton, level1Button, level2Button, level3Button,
        level4Button, level5Button, dontInterruptButton, reviewCardButton;
private JLabel frontTextLabel, reverseTextLabel, frontLabel;
private JPanel frontOfCardPanel, reverseOfCardPanel, buttonPanel,
        reverseButtonPanel, reverseTextPanel, frontLabelPanel;
private JFrame frame;
private String windowTitle;
private int windowX;
private int windowY;
private Preferences preferences = null;

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            new PreferencesTest();
        }
    });
}

public PreferencesTest() {

    this.windowX = getPreferences().getInt("window_x", -1);
    this.windowY = getPreferences().getInt("window_y", -1);

    frame = new JFrame();
    frontOfCardPanel = new JPanel(new BorderLayout());
    reverseOfCardPanel = new JPanel(new BorderLayout());

    wrongButton = new JButton("Wrong");
    level1Button = new JButton("Almost");
    level2Button = new JButton("OK");
    level3Button = new JButton("Good");
    level4Button = new JButton("Great");
    level5Button = new JButton("Excellent");
    dontInterruptButton = new JButton("Don't interrupt this program");
    reviewCardButton = new JButton("Review");

    frontTextLabel = new JLabel("test", JLabel.CENTER);
    reverseTextLabel = new JLabel("test", JLabel.CENTER);
    frontLabel = new JLabel("test", JLabel.CENTER);

    frontTextLabel.setFont(new Font("Serif", Font.PLAIN, 20));
    frontLabel.setFont(new Font("Serif", Font.PLAIN, 40));
    reverseTextLabel.setFont(new Font("Serif", Font.PLAIN, 40));

    buttonPanel = new JPanel(new FlowLayout());
    reverseButtonPanel = new JPanel(new FlowLayout());
    reverseTextPanel = new JPanel(new GridLayout(2, 1));

    reverseButtonPanel.add(wrongButton);
    reverseButtonPanel.add(level1Button);
    reverseButtonPanel.add(level2Button);
    reverseButtonPanel.add(level3Button);
    reverseButtonPanel.add(level4Button);
    reverseButtonPanel.add(level5Button);

    frontLabelPanel = new JPanel();
    frontLabelPanel.add(frontLabel);

    frontOfCardPanel.add(buttonPanel, BorderLayout.SOUTH);
    frontOfCardPanel.add(frontLabelPanel, BorderLayout.NORTH);

    frame.pack();
    frame.setContentPane(frontOfCardPanel);

    reverseTextPanel.add(reverseTextLabel);
    reverseTextPanel.add(frontTextLabel);

    buttonPanel.add(reviewCardButton);
    buttonPanel.add(dontInterruptButton);

    reverseOfCardPanel.add(reverseTextPanel, BorderLayout.CENTER);
    reverseOfCardPanel.add(reverseButtonPanel, BorderLayout.SOUTH);

    wrongButton.addActionListener(this);
    level1Button.addActionListener(this);
    level2Button.addActionListener(this);
    level3Button.addActionListener(this);
    level4Button.addActionListener(this);
    level5Button.addActionListener(this);
    dontInterruptButton.addActionListener(this);
    reviewCardButton.addActionListener(this);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    frame.setSize(500, 220);
    frame.setResizable(false);

    frame.toFront();
    frame.repaint();

    frame.addWindowListener(new java.awt.event.WindowAdapter() {
        public void windowClosing(java.awt.event.WindowEvent e) {
            setWindowXY();

            frame.setVisible(false);
        }
    });

    frame.setLocation(windowX, windowY);
    frame.setVisible(true);

}

@Override
public void actionPerformed(ActionEvent event) {
    if (event.getActionCommand() == "Review") {
        frame.remove(frontOfCardPanel);
        frame.setContentPane(reverseOfCardPanel);
        frame.validate();
        frame.repaint();
    } else if (event.getActionCommand() == "Wrong") {
        setWindowXY();
        System.exit(1);
        flashcardAction(0);
    } else if (event.getActionCommand() == "Almost") {
        setWindowXY();
        System.exit(1);
        flashcardAction(1);
    } else if (event.getActionCommand() == "OK") {
        setWindowXY();
        System.exit(1);
        flashcardAction(2);
    } else if (event.getActionCommand() == "Good") {
        setWindowXY();
        System.exit(1);
        flashcardAction(3);
    } else if (event.getActionCommand() == "Great") {
        setWindowXY();
        System.exit(1);
        flashcardAction(4);
    } else if (event.getActionCommand() == "Excellent") {
        setWindowXY();
        System.exit(1);
        flashcardAction(5);
    } else if (event.getActionCommand() == "Don't interrupt this program") {
        System.exit(1);
        System.out.println(" window title in event = " + windowTitle);
        frame.setVisible(false);
    }
}

public void flashcardAction(int userResponse) {
    System.out.println(frame.getLocationOnScreen());
    setVisible(false);
}

public void setVisible(Boolean visible) {

    frame.setVisible(visible);
}

// ////// preferences

public Preferences getPreferences() {
    if (preferences == null) {
        preferences = Preferences
                .systemNodeForPackage(PreferencesTest.class);
    }
    return preferences;
}

public int getWindowX() {
    return windowX;
}

public int getWindowY() {
    return windowY;
}

public void setWindowXY() {
    windowX = frame.getX();
    getPreferences().putInt("window_x", windowX);

    windowY = frame.getY();
    getPreferences().putInt("window_y", windowY);
}
} 
```

编辑：我没有解释它的行为有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:32:46.163

您正在使用[systemNodeForPackage](http://docs.oracle.com/javase/6/docs/api/java/util/prefs/Preferences.html#systemNodeForPackage%28java.lang.Class%29)。这将返回系统首选项，而不是用户首选项。

它在一个系统上运行的原因可能是因为您在那里以管理员用户身份运行它（我猜您正在使用 WinXP 或类似的东西，通常以管理员用户身份运行）。管理员用户可以毫无问题地写入系统首选项树。

在其他更成熟的操作系统上，如果没有提升的访问权限，就无法写入系统节点。正确的方法是使用**用户节点**（方法[userNodeForPackage](http://docs.oracle.com/javase/6/docs/api/java/util/prefs/Preferences.html#userNodeForPackage%28java.lang.Class%29)）。

Java 有两个单独的偏好根，一个用于系统，一个用于用户。根据您的情况使用正确的。窗口位置显然是用户偏好。

请参阅[https://blogs.oracle.com/CoreJavaTechTips/entry/the_preferences_api](https://blogs.oracle.com/CoreJavaTechTips/entry/the_preferences_api)

# java - 如何访问正在执行的 Jar 的绝对文件路径？

> ID：15202626
> 
> 赞同：0
> 
> 时间：2013-03-04T13:26:23.897
> 
> 标签：java, jar, absolute-path

我知道这个问题已经被问了很多，但以前的答案似乎都不适合我。

如果我让我的应用程序成为一个可执行的 Jar，有没有办法知道 Jar 在执行时在文件系统上的位置？我的应用程序需要知道，所以它可以从它的 jar 中提取一个文件夹（通过将其视为一个 zip 文件）到指定的目录。

编辑：感谢所有做出贡献的人，但我认为这是一个死胡同。我得试试别的。很抱歉浪费了大家的时间。我会继续检查这个问题，所以如果有人破解它，请回答：D

对于它的价值，这是我的测试代码：

```
 package jarProblem;

import java.io.File;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;

public class Main {

    public Main () {

        ClassLoader loader = Main.class.getClassLoader();

        String path = loader.getResource("jarProblem/Main.class").getPath();

        File file = new File(path);

        String pathToJar = file.getParentFile().getAbsolutePath();

        JOptionPane.showMessageDialog(new JFrame(), new JLabel(pathToJar),"CurrentFolder", JOptionPane.PLAIN_MESSAGE);

        System.exit(0);
    }

    public static void main (String[] args) {

        new Main();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:34:43.410

您是否尝试过 Path 课程？它拥有您正在寻找的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:32:31.613

```
System.getProperty("user.dir"); 
```

# c++ - OpenCV：使用 ORB 比较多个图像

> ID：15202628
> 
> 赞同：8
> 
> 时间：2013-03-04T13:26:29.280
> 
> 标签：c++, opencv, orb

我正在尝试创建一个 C++ 程序，与一个输入图像相比，列表中有很多图像。我得到了整个工作，程序正在创建`DMatch`匹配项。

现在我正在尝试确定与源图像进行比较的图像列表中的哪一个是最佳匹配。我首先尝试通过比较图像之间有多少匹配来做到这一点，但问题是当生成的图像有很多关键点时；他们也往往有很多比赛，至少在我的节目中。

那么如何确定图像数组中的哪一个与源图像最匹配？我正在使用此循环来确定匹配项，但它并没有真正起作用：

```
vector< vector<DMatch> > filteredMatches;
vector<int> goodIds;
Ptr<DescriptorMatcher> matcher(new BFMatcher(NORM_HAMMING, false));

printf("bad matches: ");

for(size_t i = 0; i < images.size();i++){
    vector<DMatch> matches, good_matches;

    matcher->clear();
    matcher->match(images[i], tex_des, matches);
    if(matches.size() < 8){
        printf("F%d,", (int)i + 1);
        continue;
    }

    double min_dist = 100;

    for(size_t j = 0; j < matches.size(); j++ ){ 
        double dist = matches[j].distance;
        if( dist < min_dist ) 
            min_dist = dist;
    }

    if(min_dist > 50.0){
        printf("D%d,", (int)i + 1);
        continue;
    }

    double good_dist = min_dist * 3;
    for(size_t j = 0; j < matches.size(); j++ ){
        if(matches[j].distance < good_dist)
            good_matches.push_back(matches[j]);
    }

    size_t size = good_matches.size();
    if(size < 8){
        printf("M%d,", (int)i + 1);
        continue;
    }

    vector<Point2f> srcPoints(size);
    vector<Point2f> dstPoints(size);

    for(size_t j = 0; j < size; j++){
        srcPoints[j] = destination[good_matches[j].trainIdx].pt;    
        dstPoints[j] = keyPoints[i][good_matches[j].queryIdx].pt;   
    }

    vector<unsigned char> inliersMask(srcPoints.size());
    Mat H = findHomography(srcPoints, dstPoints, CV_FM_RANSAC, 3.0, inliersMask);

    vector<DMatch> inliers;
    for(size_t j = 0; j < inliersMask.size(); j++){
        if(inliersMask[j]){
            inliers.push_back(good_matches[j]);
        }
    }
    if(inliers.size() < 4){
        printf("S%d,", (int)i + 1);
        continue;
    }

    filteredMatches.push_back(inliers);
    goodIds.push_back((int)i);

    H.release();
}

printf(" good matches: ");

int best = -1;
int amount = 0;
for(size_t i = 0; i < filteredMatches.size(); i++){
    int size = (int)filteredMatches.at(i).size();
    if(size < 8) continue;

    printf("%d,", goodIds[i] + 1);

    if(amount < size){
        amount = size;
        best = i;
    }
}

if(best >= 0) printf(" best match on image: %d, keypoints: %d, ", goodIds[best] + 1, amount); 
```

如果有人能指出我必须使用的功能或逻辑，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:51:30.500

没有任何直截了当的答案。为了获得更好的结果，您必须实施某种变换并在变换后的地图上进行聚类，而不仅仅是对距离求和。这很困难，甚至可以[发表](http://computerresearch.org/stpr/index.php/gjcst/article/download/763/670)。

否则，您将不得不使用更实用的技术，例如维度和直方图过滤。你可以看看OpenCV的[stitcher](http://docs.opencv.org/modules/stitching/doc/introduction.html#stitching-pipeline)，隔离你感兴趣的模块，并根据你的需要定制源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:42:46.343

It depends what are the image in the list. You can't have one solution for every vision problem in the world. For example, the project I work on needs to recognize material in pictures of walls. You can't just compare it to different picture of wall with different material and hope to get a match.

In my case, I needed to create descriptors. [Descriptors](http://en.wikipedia.org/wiki/Visual_descriptors) are algorithm that output value that can be compared to other value of another picture. There are a lot of descriptors already available in openCV like LBP, SURF, etc.. To put it simply, you don't compare the image anymore, you compare the output value of the descriptor of image 1 to the descriptor value of all the image in the list.

You need to pick up the descriptors that your eyes/brain use to find a match in real life. For example, if the matching is based on color, you could use CLD or DCD. If the matching is based on texture, use LBP. You can also do like I did in my project and use a lot of descriptor and use Machine Learning with trained data algorithms to find the best match.

So, to summarize, there is no silver bullet that can fix all vision problem. You need to adapt your solution to the problem.

Hope it helps!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:47:53.743

你应该只选择真正稳定的对应关系。我建议阅读：OpenCV 2 Computer Vision Application Programming Cookbook - 第 9 章 - 使用随机样本共识匹配图像（[http://opencv-cookbook.googlecode.com/svn/trunk/Chapter%2009/](http://opencv-cookbook.googlecode.com/svn/trunk/Chapter%2009/)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T07:57:22.730

对您的问题的简短搜索为我提供了 opencv 答案部分中的以下条目：

/[简历答疑论坛](http://answers.opencv.org/question/15/how-to-get-good-matches-from-the-orb-feature/)

这似乎为您似乎遇到的问题提供了答案。要按照答案中的建议过滤您得到的结果，我会查看 RANSAC 算法，以在您的匹配选择中找到最佳结果。

[RANSAC 说明维基百科](http://en.wikipedia.org/wiki/RANSAC)

至少这应该为您指明正确的方向。

# c# - 即时生成 pdf 并使用 webmatrix 发送电子邮件

> ID：15202632
> 
> 赞同：1
> 
> 时间：2013-03-04T13:26:38.020
> 
> 标签：c#, razor, webmatrix-2

我有一个 Web 应用程序，它目前使用模板生成证书。由于我最初是用 php 编写的，因此我使用 str_replace 内置函数将模板中的值替换为查询中的值。

现在我已更改为 asp.net 网页，我的目标是生成 pdf 格式的证书并邮寄。

我正在使用 iTextSharp 和 webmatrix。

以下是我的代码的一部分：

```
 var sql = "SELECT CustomerID, CompanyName, ContactName, Address, City, Country, Phone FROM Customers WHERE CustomerID = 'ALFKI'";
var data = db.Query(sql);

  foreach(var item in data){ var companyname = item.CompanyName;}

PdfPCell certify1 = new PdfPCell(new Phrase("companyname"));
certify1.Colspan = 2;
certify1.Border = 0;
certify1.PaddingTop = 40f;
certify1.HorizontalAlignment = 1;//0=Left, 1=Centre, 2=Right
table.AddCell(certify1); 
```

从这段代码中，我试图显示数据库表中的数据。上面的代码不起作用。我正在尝试获取查询值，然后在 certify1 单元格中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T21:07:36.967

尝试这个：

```
var sql = "SELECT CustomerID, CompanyName, ContactName, Address, City, Country, Phone FROM Customers WHERE CustomerID = 'ALFKI'";
var data = db.Query(sql);

foreach(var item in data){ 
    var companyname = item.CompanyName;
    PdfPCell certify1 = new PdfPCell(new Phrase(companyname));
    certify1.Colspan = 2;
    certify1.Border = 0;
    certify1.PaddingTop = 40f;
    certify1.HorizontalAlignment = 1;//0=Left, 1=Centre, 2=Right
    table.AddCell(certify1);
} 
```

# vb.net - QBXML 的指定版本不支持此功能

> ID：15202636
> 
> 赞同：0
> 
> 时间：2013-03-04T13:26:43.660
> 
> 标签：vb.net, quickbooks

我正在编写一个小函数来将帐户数据保存到 Quick Books 示例产品中，当我尝试保存它时会出现类似错误

```
 **This Feature is not supported in the Specified version of QBXML** 
```

当我使用 Quick books 2010 (US) 运行相同的功能时，它正在工作。但是，当我尝试使用澳大利亚 QB2012 运行时，我遇到了错误。

我该如何解决这个问题，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:40:24.213

这非常简单 -*您尝试使用的功能不受澳大利亚 QuickBooks 2012 支持，使用您请求的 qbXML 版本*。

由于您没有发布您的 qbXML 请求或有关您正在使用的 qbXML 版本的任何其他详细信息，因此任何人都无法为您提供太多其他帮助。

**更新以反映您的新评论**：

根据您的评论：

> 我正在使用 QBXML 6.0 版

和

> 当调用此 ItemInventoryAssemblyMod.IncomeAccountRef.ListID.SetValue(cmbIncomeAct.SelectedI‌​tem(3).ToString) 时。然后它给出错误

如果您参考文档：

*   [http://developer.intuit.com/qbsdk-current/common/newosr/index.html](http://developer.intuit.com/qbsdk-current/common/newosr/index.html)

你会注意到它表明这个标签/节点：

```
ItemInventoryAssemblyMod/IncomeAccountRef/ListID 
```

仅在 qbXML *7.0*及更高版本中受支持。您正在使用*6.0*。因此，问题与错误消息完全相同：*您尝试使用的功能不受您请求的 qbXML 版本的支持*。

要么使用更高版本的 qbXML（如果您的 QuickBooks 版本支持它），否则您将无法执行您想要执行的操作。

# ruby - lambda vs proc 或 Struct vs Class 区别的正确术语是什么？

> ID：15202639
> 
> 赞同：3
> 
> 时间：2013-03-04T13:26:52.333
> 
> 标签：ruby

在 Ruby 中，我开始将 Structs 视为“struct-flavored classes”，将 lambdas 视为“lambda-flavored procs”。这些区别有更正确的术语吗？

为了说明我的意思：

```
p = proc { |text| puts text }
p.inspect
                              #=> #<Proc:0x007fd9c135fd98@(irb):5>
# vs

l = lambda { puts 'foo' }
l.inspect                     #=> "#<Proc:0x007fbf33ad2830@(irb):7 (lambda)>" 
```

...同样：

```
Point = Class.new
Point.class                #=> Class
p = Point.new
p.class                    #=> Point
p.inspect                  #=> #<Point:0x007fd9c1038ef8>

# vs

Point = Struct.new(:x, :y)
Point.class                #=> Class
p = Point.new
p.class                    #=> Point
p.inspect                  #=> "#<struct Point x=nil, y=nil>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:33:15.080

区分类与结构或 lambda 与 procs 的最佳方法是将它们视为具有不同刚性级别的相关数据结构。

在 Ruby 中，类和结构都是旨在将数据绑定到代码的数据结构。该结构以非常松散的方式执行此操作，相当于使用内部散列来存储数据。通常，它们被认为比类更短暂，因为您在它们中放置的逻辑更少。该类允许您创建一个更具体的数据结构，您打算在代码库的多个位置使用它。在 Ruby 中创建结构确实会创建一个新的类对象（它`rb_class_new`在 C 中调用）。

Ruby 中 procs 和 lambdas 的区别在主题上是相似的。lambda 是一个更严格的过程（具有参数检查和不同的返回行为）。它也不会扩展数组参数或使用`nil`来代替缺少的参数。

这一切都相当于您希望在您选择的数据结构中为您提供多少结构。如果您只想对数据进行键/值访问，则哈希可以做类可以做的事情。Ruby 中的另一个重要考虑因素是您希望如何组织代码库。您通常可以在 Ruby 中做任何您想做的事情，因此您可以创建一个哈希，使用基于原型的方法声明，通过您的代码重复克隆该哈希。不过，这可能会让你的同事想要伤害你。通常，类是选择的数据结构或任何重要的数据和逻辑绑定。当参数很重要或者您想确保仅从本地范围返回时，将选择 Lambda。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:09:14.773

“lamdaness”没有正式的术语。

该[文档](http://ruby-doc.org/core-2.0/Proc.html#method-i-lambda-3F)讨论了 lambdas 具有“*严格的参数处理*”并且没有“*技巧*”！除了参数处理之外，一个重要的区别是`return`关键字的处理。例如看[这篇文章](http://yehudakatz.com/2012/01/10/javascript-needs-blocks/)。

至于`Struct`，重要的是要意识到它`Struct.new`不会返回一个实例，`Struct`而是一个`Class`继承自的新实例`Struct`。

# sql - postgresql 和 oracle 递归选择语句

> ID：15202641
> 
> 赞同：0
> 
> 时间：2013-03-04T13:26:54.407
> 
> 标签：sql, oracle, oracle10g, postgresql-9.2

我想知道如何找到所有菜单及其子菜单。

我有表格“菜单”，其中包含：

1.  标识为 PK
2.  parent_id 作为 menu.id 的 FK
3.  标题字符

我已经在我的数据库记录中获得了例如：

```
id: 2 parent_id = 1
id: 3 parent_id = 2
id: 4 parent_id = 2
id: 5 parent_id = 3
id: 6 parent_id = 5
id: 7 parent_id = 4
id: 8 parent_id = 7
id: 9 parent_id = 8
id: 10 parent_id = 1
id: 11 parent_id = 10 
```

我需要创建选择语句并获取菜单 id = 2 的所有子菜单？所以它类似于recur-ency select ...我唯一的1个参数是id = 2，结果我必须得到带有id的菜单：3、4、5、6、7、8、9没有10和11菜单。

此语句必须与 postgresql 和 oracle 数据库一起使用

在 oracle 我尝试写这样的东西：

```
 with q(id, parent_id) as (
  select 
    t1.id , t1.parent_id
    from menu t1
    where t1.id = 454

    union all
    select 
    q.id , q.parent_id
      from q
      join menu t2 on q.id = t2.parent_id
)
select * from q 
```

但我有循环错误 ORA-32044 我不知道 oracle 数据库版本所以这个语句必须是正确的所有 oracle 数据库版本> = ver 9

# javascript - 使用 javascript 创建和编写文件

> ID：15202644
> 
> 赞同：-4
> 
> 时间：2013-03-04T13:27:03.410
> 
> 标签：javascript

有没有办法在javascript中创建一个文件（.txt）？我们可以通过javascript访问文件系统吗？并写文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:30:49.010

有实验性的 HTML5 文件系统[API](http://www.html5rocks.com/en/tutorials/file/filesystem/)，但尚未得到广泛支持。

它们有一些限制：

> 如果您是`requestFileSystem()`第一次调用，则会为您的应用创建新的存储空间。重要的是要记住这个文件系统是沙盒的，这意味着一个 Web 应用程序无法访问另一个应用程序的文件。这也意味着您无法将文件读/写到用户硬盘上的任意文件夹（例如*My Pictures*、*My Documents*等）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T13:29:38.173

是的，使用 Javascript FileReader 可以轻松**读取文件。**你可以看到`[**documentation**](https://developer.mozilla.org/en-US/docs/DOM/FileReader)`

# blender - 从搅拌机导出到 mogre/ogre（.mesh 和 .scene 格式）时如何修复错误？

> ID：15202647
> 
> 赞同：1
> 
> 时间：2013-03-04T13:27:08.510
> 
> 标签：blender, ogre

[我一直在尝试使用 blender2OGRE ( https://code.google.com/p/blender2ogre/](https://code.google.com/p/blender2ogre/) )导出带有纹理的搅拌机对象

我去 export->OGRE3D (.mesh .scene)，它开始导出。然后它使用以下日志触发断点

```
Error
Traceback(most recent call last):
File"/home/team/.config/blender/2.65/scripts/addons/io_export_ogreDotScene.py", line 3159, in execute self.ogre_export(Self.filepath, context)
File"/home/team/.config/blender/2.65/scripts/addons/io_export_ogreDotScene.py", line 3514, in ogre_export_material_files = self.dot_material(meshes + force_matrial_update, path, matherial_file_name_base)
File"/home/team/.config/blender/2.65/scripts/addons/io_export_ogreDotScene.py", line 3356,in dot_material_data = generate_material(mat, path=path, copy_programs = true, touch_textures=CONFIG('TOUCH_TEXTURES'))
File"/home/team/.config/blender/2.65/scripts/addons/io_export_ogreDotScene.py", line 6993, in generate_material_passes = w.get_passes()
File"/home/team/.config/blender/2.65/scripts/addons/io_export_ogreDotScene.py", line 3349, in get_passes_r.append(Self.generate_pass(self.material))
File"/home/team/.config/blender/2.65/scripts/addons/io_export_ogreDotScene.py", line 6677, in_generate_pass if slote.texture.use_alpha: usealpha = True; break
AttributeError: 'ImageTexture' object has no attribute 'use alpha'
location:<unknown location> 
```

它似乎试图为一个不存在的变量赋值。

如果有人能对这个问题有所了解，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:06:54.320

有几件事...

1.  查看[Google Code repo](https://code.google.com/p/blender2ogre/source/browse/io_export_ogreDotScene.py#6677)中的脚本，第 6677 行似乎已更改为`if slot.texture.use_alpha: usealpha = True; break`. 请注意，您提供的错误输出中的“slot”拼写为“slote”。我会更新到脚本的最新版本，看看是否可以修复它。

2.  如果失败，请查看 [Python AttributeError: Object has no attribute](https://stackoverflow.com/questions/11685936/python-attributeerror-object-has-no-attribute)。`python -tt`继续 运行`/home/team/.config/blender/2.65/scripts/addons/io_export_ogreDotScene.py` 会告诉您缩进是否是问题所在。

如果您没有看到任何缩进错误，那么我会在 Google Code 上针对该项目提交错误报告。

# ios - 以编程方式设置/取消设置_AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_（在运行时）

> ID：15202652
> 
> 赞同：0
> 
> 时间：2013-03-04T13:27:15.847
> 
> 标签：ios, afnetworking

我正在使用 AFNetworking 库来执行我的请求。现在我面临着证书不受信任的问题。如果我设置 _AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_ 所有不受信任的证书工作，我就有一个常量类。如果我删除该常量，我会收到 -1202 代码错误（“此服务器的证书无效....”）。

我的问题是我需要允许用户决定他们是否愿意接受无效证书。

我有办法以编程方式插入/删除#define 吗？提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:42:50.530

看看这个问题。[我想通过 AFNetworking 允许无效的 SSL 证书](https://stackoverflow.com/questions/12967220/i-want-to-allow-invalid-ssl-certificates-with-afnetworking)

它有如何做到这一点的例子。此外，如果您使用的是 CocoaPods，请务必在 Pods pch 文件中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:58:02.660

这里已经有一个拉取请求[https://github.com/AFNetworking/AFNetworking/pull/873](https://github.com/AFNetworking/AFNetworking/pull/873)。我希望这可以包含在下一个 AFNetworking 版本中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T20:32:57.020

回到上面 Carlos 的帖子，我的拉取请求进入了 AFNetworking 1.2.1，所以从那里抓取一些内容:)

# opengl - 程序状态下如何存储纹理制服？

> ID：15202657
> 
> 赞同：0
> 
> 时间：2013-03-04T13:27:38.717
> 
> 标签：opengl, glsl, textures, state, uniform

我已经了解到统一值存储在着色器程序的状态中。

```
// GLSL code
uniform mat4 projection;

// C++ code
GLuint location = glGetUniformLocation(program, "projection");
glUniformMatrix4fv(location, 1, GL_FALSE, pointer); 
```

但这似乎不适用于纹理制服，因为它们受纹理槽的编号而不是它们的 id 约束。

```
// GLSL code
uniform sampler2D albedo;

// C++ code
int slot = 3;
glActiveTexture(GL_TEXTURE0 + slot);
glBindTexture(GL_TEXTURE_2D, id);
GLuint location = glGetUniformLocation(program, "albedo");
glUniform1i(location, slot); 
```

有没有办法将纹理 ID 绑定到`sampler2D`着色器的制服？这样我就不必为每个通道手动绑定所有纹理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:28:58.230

> 有没有办法将纹理 id 绑定到着色器的 sampler2D 制服？

不，不是真的，因为采样器访问的是纹理单元，而不是纹理对象。然而，NVidia 的 Kepler GPU 可以使用无绑定纹理，OpenGL 可以作为供应商特定的扩展使用，这实际上实现了您的要求。

# c# - ViewModel MVC4 的 FK 约束

> ID：15202659
> 
> 赞同：1
> 
> 时间：2013-03-04T13:27:39.260
> 
> 标签：c#, asp.net-mvc, viewmodel

我在使用 MVC4 和实体框架时遇到了一点问题。我有一个实体“Person”，它由另一个名为“ProductPackageCategories”的实体组成。我还有一个 ViewModel“PersonViewModel”。在“创建人员”视图中，我可以创建我的新人员并使用下拉列表组件指定类别。通常，当我单击提交按钮时，数据会存储在数据库中。就我而言，我检索了所有数据，但没有检索 ProductPackageCategory Id。有人知道这个问题吗？

异常消息：

```
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_bm_Persons_bm_ProductPackageCategories". The conflict occurred in database "C:\USERS\MAARAB\DESKTOP\PROJECT\2013-03-01_4-9_MA-OS_BUSI MATERIAL PROJECT\BUSIMATERIAL\BUSIMATERIAL\APP_DATA\BUSIMATERIAL.MDF", table "dbo.bm_ProductPackageCategories", column 'Id_ProductPackageCategory'. 
```

该语句已终止。

我在 PersonController 中的创建操作：

```
public ActionResult Create()
        {
            ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name");
            return View();
        }

        //
        // POST: /Person/Create

        [HttpPost]
        public ActionResult Create(PersonViewModel personViewModel)
        {

            if (ModelState.IsValid)
            {

                db.Persons.AddObject(personViewModel.person);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name", personViewModel.person.Id_ProductPackageCategory);

            return View(personViewModel);
        } 
```

我的视图模型：

```
public class PersonViewModel
{
    public Person person { get; set; }

    public PersonViewModel()
    {
        person = new Person();
    }

    public PersonViewModel(Person person)
    {
        this.person = person;
    }

} 
```

我的创建视图：

```
@model BuSIMaterial.Models.PersonViewModel

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Person</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.person.FirstName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.person.FirstName)
            @Html.ValidationMessageFor(model => model.person.FirstName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.person.LastName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.person.LastName)
            @Html.ValidationMessageFor(model => model.person.LastName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.person.NumNat)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.person.NumNat)
            @Html.ValidationMessageFor(model => model.person.NumNat)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.person.StartDate)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.person.StartDate)
            @Html.ValidationMessageFor(model => model.person.StartDate)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.person.EndDate)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.person.EndDate)
            @Html.ValidationMessageFor(model => model.person.EndDate)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.person.Upgrade)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.person.Upgrade)
            @Html.ValidationMessageFor(model => model.person.Upgrade)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.person.Id_ProductPackageCategory, "Category")
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_ProductPackageCategory", "Choose one...")
            @Html.ValidationMessageFor(model => model.person.Id_ProductPackageCategory)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.person.HouseToWorkKilometers)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.person.HouseToWorkKilometers)
            @Html.ValidationMessageFor(model => model.person.HouseToWorkKilometers)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:32:44.887

代替：

```
@Html.DropDownList("Id_ProductPackageCategory", "Choose one...") 
```

和：

```
@Html.DropDownListFor(
    model => model.person.Id_ProductPackageCategory,
    (SelectList)ViewBag.Id_ProductPackageCategory,
    "Choose one..."
) 
```

以便`person.Id_ProductPackageCategory`在将表单提交到 HttpPost 操作时，模型上的属性与下拉列表中的选定值正确绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:32:46.443

使用 strong-typed-html-helpers 将属性绑定到模型。使用`DropDownListFor`代替`DropDownList`

控制器

```
public ActionResult Create()
{
    ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name");
    return View();
} 
```

看法

```
@Html.DropDownListFor(model => model.person.Id_ProductPackageCategory, ViewBag.Id_ProductPackageCategory as SelectList, "--- Select Category ---", new { @class = "some_class" }) 
```

# eclipse - vaadin 6 中的错误

> ID：15202660
> 
> 赞同：3
> 
> 时间：2013-03-04T13:27:40.443
> 
> 标签：eclipse, browser, render, vaadin, browser-cache

我在 Vaadin 6 中创建了一个项目并运行它。它完美地在浏览器中呈现文本“Hello Vaadin user”。

然后我更改了标签消息。

```
public void init() {
    Window mainWindow = new Window("Edojimav6 Application");
    Label label = new Label("Vaadin 6"); // changed text
    mainWindow.addComponent(label);
    setMainWindow(mainWindow);
} 
```

但它仍然在浏览器“你好 Vaadin 用户”上显示相同的文本，我清除了浏览器中的浏览历史记录（cookies、缓存......但是，我清除了所有内容）并运行了代码。现在它完美地呈现了文本“Vaadin 6”。

每次我需要清除浏览器历史记录来运行我的代码。我在我的网络中启用了代理设置。

我正在使用 Eclipse 靛蓝。我在 Chrome 24.0.1312.57、Firefox 15.0.1 和 Safari 6.0 浏览器中进行了测试。

但是，Vaadin 7 运行完美。它不需要任何“历史清除”来运行代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:54:19.940

在 Vaadin 6 中，您必须将 ?restartApplication 添加到应用程序的 url，例如

```
 http://localhost:8080/myapp?restartApplication 
```

# c# - 使用扩展方法添加事件

> ID：15202666
> 
> 赞同：5
> 
> 时间：2013-03-04T13:27:59.027
> 
> 标签：c#, events, extension-methods

我发现了几篇关于使用扩展方法引发事件的帖子，但是我的问题有点不同：

我有一个这样的界面：

```
public interface IStateMachine 
{
    void SetState(IState NewState);
    IState GetState();
} 
```

使用这个接口，我可以创建一个扩展方法，如下所示：

```
public static void ChangeState(this IStateMachine StateMachine, IState NewState) 
{
    StateMachine.GetState().Exit();
    StateMachine.SetState(NewState);
    StateMachine.GetState().Enter();
} 
```

我真正想要的是会有需要触发的事件，例如： a `statechange-event`.

但是我不希望`StatechangeEvent`成为界面的一部分`IStateMachine`，但似乎这是唯一的方法。我有几个实现 的类，`IStateMachine`因此我每次都必须重做相同的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T13:32:04.857

在 C# 中，只有扩展方法。没有扩展属性或事件。

您必须在界面上声明事件。
为了避免一遍又一遍地编写相同的事件代码，您可以创建一个基类。

另一种可能性是“手动”实现[发布-订阅](http://en.wikipedia.org/wiki/Publish/subscribe)模式。这就是 C# 中的事件。

您可以将扩展方法`Subscribe`和添加`Unsubscribe`到`IStateMachine`.

他们将使用一个可能的静态类`StateMachineSubscribers`，该类也公开`Subscribe`and`Unsubscribe`方法。此外，它还公开了`Raise`您的`ChangeState`扩展方法使用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:31:35.947

具有相应委托的事件可以是实现该接口的具体*类*的一部分*。*因此，如果您在接口上调用 ，则会调用某个*具体类的**具体*实现，其中会引发您想要的事件。*`IStateMachine``SetState`*

# java - 异常处理弹簧

> ID：15202670
> 
> 赞同：-1
> 
> 时间：2013-03-04T13:28:13.270
> 
> 标签：java, spring, exception, dependency-injection, aop

我们正在将我们的应用程序从 Struts 1.2 转换为 Springs 3.0。因此，我们正在对 Struts 2 代码中的异常处理进行更改。

根据我的理解，这是我们需要做的。

1.  @ExceptionHandler 只能在 Springs 的 Controller 层使用。
2.  我们可以使用 AOP 来处理未经检查的异常。
3.  Struts 中的 Checked Exceptions 将保持原样，并且可以转换为 unchecked exceptions

现在我有以下问题。

1.  除了不需要在我的代码中处理未经检查的异常之外，使用 AOP 处理未经检查的异常有什么好处？
2.  将已检查异常转换为未检查异常有什么好处？
3.  我是否应该继续将我在 struts 中的已检查异常转换为未检查异常，然后将 AOP 转换为 AOP？
4.  在 Spring 3.0 中处理异常的更好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T14:37:29.580

看看 Spring 的异常处理工具：

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-exceptionhandlers](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-exceptionhandlers)

这个想法类似于您使用 AOP 的方法，但需要的配置要少得多。本质上，您为代码抛出的任何类型的未经检查的异常注册一个处理程序。这使您可以通过断言是否引发异常并将该逻辑与处理和从异常恢复中解耦来测试您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-25T21:52:17.143

@ExceptionHandler 值可以设置为异常类型数组。如果抛出的异常与列表中的类型之一匹配，则将调用使用匹配的 @ExceptionHandler 注释的方法。如果未设置注释值，则使用作为方法参数列出的异常类型。

Spring 在内部使用 AOP，您不需要使用它。它为您提供所有螺栓和螺母代码。

# android - 表面视图在 android 4.0 中被活动破坏

> ID：15202672
> 
> 赞同：1
> 
> 时间：2013-03-04T13:28:17.380
> 
> 标签：android, service, android-camera, surfaceview, video-recording

我正在开发一个在后台录制视频的应用程序，我的程序在 android 2.3 中完美运行，但是当我在 android 4.0 中运行相同的代码时它崩溃，我的日志给出`surface view null`并显示`Surface View destroyed`。我的问题是如何在不破坏表面视图的情况下在后台运行活动，因为我正在服务中进行记录代码。

我的代码类似于此[站点](http://pickerwengs.blogspot.in/2011/05/android-background-video-recorder-on.html)代码

如果有人遇到过这样的问题，请帮助我提前致谢。

# python - 使用其他列表中的关键字搜索列表？

> ID：15202673
> 
> 赞同：0
> 
> 时间：2013-03-04T13:28:17.387
> 
> 标签：python, python-2.7

说我有这个清单

```
some_list = [
    "red apple",
    "red banana",
    "house is green",
    "blue road",
    "blue hat"
] 
```

我想在另一个列表中指定我的关键字。

```
search_strings = ["red", "green"] 
```

有没有办法在没有太多循环的情况下获得这个最终结果？

```
# search some_list using keywords from search_strings
red = ["red apple", "red bana"]
green = ["house is green"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:20:14.790

以下问题中的一些答案可以根据您的目的进行调整：
• [python：在另一个列表中的一个列表中搜索字符串，然后将整个列表条目附加到新列表中](https://stackoverflow.com/questions/4785403)，
•[从一个字符串中搜索任何单词或单词组合列表 (python)](https://stackoverflow.com/questions/14264163)，
• [如何在 Python 2 中搜索另一个字符串中的列表的字符串成员](https://stackoverflow.com/questions/9711963)，
•[删除与另一个列表中的任何条目匹配的列表条目](https://stackoverflow.com/questions/10559465)，
•[在字符串列表中搜索另一个列表中的任何子字符串](https://stackoverflow.com/questions/749342)，
• [Python：从另一个文本文件中搜索一个文件中列出的字符串？](https://stackoverflow.com/questions/12370342),
• [如果 string 不包含 python 中的任何字符串列表](https://stackoverflow.com/questions/9611524)
这些问题的答案包括各种循环或列表理解技术（如 phg 对当前问题的回答），还包括`filter`您可能会发现有用的插图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:34:19.183

```
[[words for words in some_list if kw in words.split()] for kw in search_strings] 
```

这给了你：

```
[['red apple', 'red banana'], ['house is green']] 
```

此外，如果其中的“句子”`some_list`或长度`search_strings`变大，将它们转换为集合（如`search_strings = set(search_strings)`）可能是值得的。

# sql - 选择特定行的问题

> ID：15202674
> 
> 赞同：0
> 
> 时间：2013-03-04T13:28:19.990
> 
> 标签：sql, sql-server, rows

我有下表：

```
Id      revenue LogAt       playlog LogAt     creds playlog Id
9673648 26.02.2013 13:46    26.02.2013 13:37    13  178849374
9673648 26.02.2013 13:46    26.02.2013 13:38    13  178849795
9673648 26.02.2013 13:46    26.02.2013 13:39    13  178850630
9673648 26.02.2013 13:46    26.02.2013 13:41    13  178851326
9673648 26.02.2013 13:46    26.02.2013 13:33    13  178847056
9673648 26.02.2013 13:46    26.02.2013 13:34    13  178847796
9673648 26.02.2013 13:46    26.02.2013 13:36    13  178848715
9673648 26.02.2013 13:46    26.02.2013 13:32    13  178846609
9673648 26.02.2013 13:46    26.02.2013 13:32    13  178846250 
```

它实际上要长得多，有更多的 Id“组”，像这个一样多次列出，每个组的唯一区别是播放日志登录时间和播放日志 ID。

现在在给定的示例中，我需要选择 playlog logat 的时间为 13:41 的行。此外，对于所有其他 id 组，我需要具有“最新”播放日志 logat 行的行。在所有这些行中，信用应该总结起来。

我认为我必须通过时间为每组 id 过滤这 1 行，但我不知道如何。也许有 min()/max() 的东西？

我的 rdbms 是 Microsoft sql server management studio。

该表是以下联接的结果：

```
select *
from credits
inner join user on credits.userid = user.id
inner join sessionlog on user.id = sessionlog.userid
inner join playlog on sessionlog.id = playlog.sessionlogid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:01:34.170

我会计算`playlog logat`CTE 或子查询的最大值，然后将其连接到整个表以获取其余的行数据。

```
WITH max_cte
AS
(
  SELECT Id, MAX([playlog LogAt]) AS MaxLogAt
  FROM tablename
  GROUP BY Id
)
SELECT max_cte.Id, max_cte.MaxLogAt, 
  tablename.[revenue LogAt], tablename.creds, tablename.[playlog Id]
FROM max_cte
INNER JOIN tablename
  ON max_cte.Id = tablename.Id
  AND max_cte.MaxLogAt = tablename.[playlog LogAt] 
```

# c++ - 将 C++ 对象实例化并传递给 Node.js 函数 V8

> ID：15202676
> 
> 赞同：3
> 
> 时间：2013-03-04T13:28:28.900
> 
> 标签：c++, node.js, asynchronous, v8, cvv8

我希望能够实例化 C++ 类的实例并将其作为参数传递给 JavaScript 回调。该类继承自`ObjectWrap`，可用于 Node.js 并在其中使用。

*如果所述实例来自 JavaScript*，我可以将同一类的实例传递给回调。

这是我需要做的一个基本示例：

```
MyClass *instance = new MyClass();

// If was passed as the first param to this method, commit is set as below, this code works.
// MyClass *instance = ObjectWrap::Unwrap<MyClass>(args[0]->ToObject());

// Assign some property values to commit
Handle<Value> argv[] = { instance->handle_ };
ar->callback->Call(Context::GetCurrent()->Global(), 1, argv); 
```

这不起作用，而是出现段错误。`gdb`告诉我：

```
Program received signal EXC_BAD_ACCESS, Could not access memory. 
```

我如何修改我的代码以允许我将我的传递`instance`给回调？

* * *

**更新**：有问题的课程可以在 Github 上查看：[commit.cc](https://github.com/tbranyen/nodegit/blob/master/src/commit.cc)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:05:30.357

答案是我做错了。

正确的代码：

```
Local<Value> instance = MyClass::constructor_template->NewInstance();

// Assign some property values to commit
Handle<Value> argv[] = { instance };
ar->callback->Call(Context::GetCurrent()->Global(), 1, argv); 
```

获取`MyClass`实例：

```
MyClass *instanceOfMyClass = ObjectWrap::Unwrap(instance); 
```

# git - 在具有 ssh 访问权限的服务器上设置 git 存储库

> ID：15202678
> 
> 赞同：5
> 
> 时间：2013-03-04T13:28:31.643
> 
> 标签：git

按照此[链接](http://www.mindfuzz.net/?p=250)中的说明，我设法`$HOME`在 uni 的服务器上创建了一个存储库。我使用 .clone/pull/push 到服务器上的这个存储库`SSH`。

我的问题是：*是否可以授予其他人`clone/push/pull`从此存储库的访问权限？*显然我在服务器端没有root权限。此外，我不想将它作为公共存储库......我想知道谁在克隆并推送到这个存储库。

我可以在我帐户的网络存储部分做类似的事情吗？我的网站存储在哪里，然后使用类似的东西`htaccess`来管理访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:42:22.547

您可以在存储库上设置 POSIX ACL，以允许更多用户访问它。但这并不能保证有人以另一个用户的身份提交/配置非常麻烦/ ...

相反，我建议您使用 gitolite：[https](https://github.com/sitaramc/gitolite) ://github.com/sitaramc/gitolite 。

它的工作方式与 github 上的 pull/push 机制非常相似：一个 ssh 用户，一个自定义 shell，它根据用于登录的 ssh 密钥对用户进行身份验证。

如果您想要更复杂的东西（类似于 github，具有提供许多功能的 Web UI），请查看 gitlab ( [http://gitlabhq.org/](http://gitlabhq.org/) ) 或 gitorious ( [http://getgitorious.com/](http://getgitorious.com/) )。

## 更新

为了能够以安装 gitolite 的用户身份在服务器上正常登录：

*   创建一个新的 SSH 密钥并保留它，比方说，就像`~/.ssh/id_rsa-git_admin`在您的工作站上一样
*   `~/.ssh/authorized_keys`将其添加为机器上文件中的第一个键
*   安装 gitolite 并确保密钥仍然存在（退出前等待）
*   从另一个终端，运行 a `git clone git@yourhost:gitolite-admin`，并确保它工作正常。
*   从另一个终端，尝试登录机器`ssh -i ~/.ssh/id_rsa-git_admin git@yourhost`

如果最后两个步骤没问题，那么你的安装就很好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:52:06.677

这是一个棘手的问题，因为大多数 git 设置都依赖于用户帐户。我看到了两个选项，除非您可以按照@redShadow 的回答中的描述安装 Gitolite。

## 所有开发人员在服务器上都有帐户

如果其他人在同一个 mashine 上拥有帐户，则您冷使用 linux/unix 组权限并使存储库只能由该组读取/写入。如果该组不存在也不存在，则需要具有 root 访问权限的人创建它。

## 通过 HTTP 进行只读访问，通过 htaccess 进行您自己的用户管理

如果有限组的仅克隆访问对您来说是可以的，并且您愿意接收补丁形式的更改，您可以将您的存储库移动到您的网站根文件夹并使用 htaccess 来限制对文件的访问。但这将是只读的。

你的 htaccess 看起来像

```
AuthType Basic
AuthName "Password Required"
AuthUserFile /www/passwords/password.file
AuthGroupFile /www/passwords/group.file
Require Group admins 
```

参考：

*   [http://git-scm.com/book/en/Git-on-the-Server-The-Protocols](http://git-scm.com/book/en/Git-on-the-Server-The-Protocols)
*   [http://httpd.apache.org/docs/2.2/howto/htaccess.html](http://httpd.apache.org/docs/2.2/howto/htaccess.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:52:53.683

我假设你做了一个`git init --bare ...`

默认情况下，当您初始化一个裸仓库时，您授予组写入权限，其他任何人都可以读取。这是在帮助文档中讨论的`git init`：

[http://www.kernel.org/pub/software/scm/git/docs/git-init.html](http://www.kernel.org/pub/software/scm/git/docs/git-init.html)

您可以使用 umask 选项对访问进行更严格的控制：

```
0xxx: 0xxx is an octal number and each file will have mode 0xxx. 
0xxx will override users' umask(2) value (and not only loosen permissions 
as group and all does). 0640 will create a repository which is group-readable, 
but not group-writable or accessible to others. 0660 will create a 
repo that is readable and writable to the current user and group, but 
inaccessible to others. 
```

# php - PHP Echo char 变量错误

> ID：15202679
> 
> 赞同：3
> 
> 时间：2013-03-04T13:28:34.567
> 
> 标签：php

我有这个代码

```
<?php
for($i="a";$i<="z";$i++)    {
echo $i;
}
?> 
```

我有一个问题，如果

```
$i <="y" 
```

它仍然是正确的并且回声

```
a->y 
```

但如果 `$i<="z"`像上面那样，结果将是：

> abcdefghijklmnopqrstuvwxyzaaabacadaeafagahaiajakalamanaoapaqarasatauavawaxayazbabbbcbdbebfbgbhbibjbkblbmbnbobpbqbrbsbtbubvbwbxbybzcacbcccdcecfcgchcicjckclcmcncocpcqcrcsctcucvcwcxcyczdadbdcdddedfdgdhdidjdkdldmdndodpdqdrdsdtdudvdwdxdydzeaebecedeeefegeheiejekelemeneoepeqereseteuevewexeyezfafbfcfdfefffgfhfifjfkflfmfnfofpfqfrfsftfufvfwfxfyfzgagbgcgdgegfggghgigjgkglgmgngogpgqgrgsgtgugvgwgxgygzhahbhchdhehfhghhhihjhkhlhmhnhohphqhrhshthuhvhwhxhyhziaibicidieifigihiiijikiliminioipiqirisitiuiviwixiyizjajbjcjdjejfjgjhjijjjkjljmjnjojpjqjrjsjtjujvjwjxjyjzkakbkckdkekfkgkhkikjkkklkmknkokpkqkrksktkukvkwkxkykzlalblcldlelflglhliljlklllmlnlolplqlrlsltlulvlwlxlylzmambmcmdmemfmgmhmimjmkmlmmmnmompmqmrmsmtmumvmwmxmymznanbncndnenfngnhninjnknlnmnnnonpnqnrnsntnunvnwnxnynzoaobocodoeofogohoiojokolomonooopoqorosotouovowoxoyozpapbpcpdpepfpgphpipjpkplpmpnpopppqprpsptpupvpwpxpypzqaqbqcqdqeqfqgqhqiqjqkqlqmqnqoqpqqqrqsqtquqvqwqxqyqzrarbrcrdrerfrgrhrirjrkrlrmrnrorprqrrrsrtrurvrwrxryrzsasbscsdsesfsgshsisjskslsmsnsospsqsrssstsusvswsxsysztatbtctdtetftgthtitjtktltmtntotptqtrtstttutvtwtxtytzuaubucudueufuguhuiujukulumunuoupuqurusutuuuvuwuxuyuzvavbvcvdvevfvgvhvivjvkvlvmvnvovpvqvrvsvtvuvvvwvxvyvzwawbwcwdwewfwgwhwiwjwkwlwmwnwowpwqwrwswtwuwvwwwxwywzxaxbxcxdxexfxgxhxixjxkxlxmxnxoxpxqxrxsxtxuxvxwxxxyxzyaybycydyeyfygyhyiyjykylymynyoypyqyrysytyuyvywyxyyyzxqxrxsxtxuxvxwxxxyxzyaybycydyeyfygyhyiyjykylymynyoypyqyrysytyuyvywyxyyyzxqxrxsxtxuxvxwxxxyxzyaybycydyeyfygyhyiyjykylymynyoypyqyrysytyuyvywyxyyyz

我不知道为什么，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T13:32:16.903

看看[PHP 文档](http://php.net/manual/en/language.operators.increment.php)中关于递增字符的说明：

> PHP 在处理字符变量而不是 C 的算术运算时遵循 Perl 的约定。例如，在 PHP 和 Perl 中 $a = 'Z'; $a++; 将 $a 变成 'AA'，而在 C 中 a = 'Z'; 一个++；将 a 转换为 '['（'Z' 的 ASCII 值是 90，'[' 的 ASCII 值是 91）。请注意，字符变量可以递增但不能递减，即使如此，也仅支持纯 ASCII 字符（az 和 AZ）。增加/减少其他字符变量没有效果，原字符串不变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T13:31:40.203

如果你想打印 az 那么 PHP 的[range](http://php.net/manual/en/function.range.php)函数会很有用

[http://php.net/manual/en/function.range.php](http://php.net/manual/en/function.range.php)

```
foreach (range('a', 'z') as $letter) {
    echo $letter;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:33:01.833

你也可以试试这个：

```
for($i="a"; $i != "aa"; $i++)
{
  echo $i;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T13:33:57.923

我不知道为什么会发生这种情况，或者为什么你会这样做。但如果你只想要一个包含所有字符 az 的数组（？），请尝试：

$myArray = range('a', 'z');

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T13:44:23.417

`"aa" <= "z"``true`由于词法比较（这不是您期望的比较）而返回，因此您的循环将继续直到`"za"`.

如其他答案中所述，使用`range('a', 'z')`或`for($i="a"; $i != "aa"; $i++)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T13:55:45.123

在从第二次开始的for循环中，增量首先工作，然后检查条件，所以最后在 $i="Z", ($i<="z") 在 ($i++) 之后检查时，它增加了它值，$i 变成 "z" 到 "aa"，它再次小于 "z"，所以循环仍然继续到 "yz"。

# ios - 数组下标不是整数错误

> ID：15202682
> 
> 赞同：1
> 
> 时间：2013-03-04T13:28:42.380
> 
> 标签：ios, objective-c, xcode, opengl-es-2.0, shader

只是想知道是否有人可以帮助我使用以下代码：

```
// Get uniform locations.
GLint m_nUniforms = 0;
glUniformMatrix4fv(uniforms, 1, 0, _modelViewProjectionMatrix.m);

glGetProgramiv(_program, GL_ACTIVE_UNIFORMS, &m_nUniforms);
for(unsigned i = 0; i < m_nUniforms; i++)
{
    char *uniformName = NULL;
    GLint size;
    GLenum type;

    glGetActiveUniform(_program, i, max_length + 1, NULL, &size, &type, uniformName);
    uniforms[uniformName] = glGetUniformLocation(_program, uniformName);
} 
```

我想为 for 循环的每次迭代分配带有“char* uiformName”类型下标的制服。我收到错误“数组下标不是整数”。

如何使用 char 作为数组下标？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:34:46.190

那么你想要的是一个字典，其中键和值都是字符串：

```
NSMutableDictionary *uniforms = [[NSMutableDictionary alloc] init];

for (blah)
{
    glGetActiveUniform(_program, i, max_length + 1, NULL, &size, &type, uniformName);
    char *uniform = glGetUniformLocation(_program, uniformName);
    [uniforms addObject:[NSString stringWithUTF8String:uniform]
                 forKey:[NSString stringWithUTF8String:uniformName]];
} 
```

# javascript - 如何在three.js onMouseClick 中向结构添加标签？

> ID：15202683
> 
> 赞同：-2
> 
> 时间：2013-03-04T13:28:48.103
> 
> 标签：javascript, three.js, webgl

如何使用three.js 库onMouseClick 向结构添加标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:30:33.963

在 onmousedown 事件中射出一条射线并检测相交的对象。然后你可以打开一个div。请按照我之前提出的[这个问题进行。](https://stackoverflow.com/questions/13683727/three-js-text-next-to-line)

# java - apache poi - 从空白和缺失（空）单元格中读取评论

> ID：15202690
> 
> 赞同：0
> 
> 时间：2013-03-04T13:29:10.927
> 
> 标签：java, null, comments, apache-poi, cell

我正在尝试从所有 Excel 文档单元格中读取注释（使用 Apache POI）。当空（或缺失）单元格包含评论时，我遇到了问题。

目前我发现的唯一解决方案是：

*   将每一行迭代到最后一个非空列
*   获取所有（甚至是空的）单元格
*   检查单元格的注释是否不为空
*   如果为真：处理评论

一些代码：

```
if (row != null) {
  cell = row.getCell(cellNum, Row.CREATE_NULL_AS_BLANK);
  cellComment = cell.getCellComment();
  if (cellComment != null)
    ...
} 
```

主要问题是我无法从空行和最后一个非空单元格之后的评论中读取评论。提高性能（与读取所有行单元格相比）会很好，但重点是读取所有文档注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T01:06:56.770

您可以使用missingCellPolicy阅读空白单元格或空单元格的注释，`row.getCell(int cellnum, MissingCellPolicy policy)`它允许您处理空白或空单元格。

例如，在您的工作表中，假设第 7 行是空白的，并且它的第 5 列有一些评论（比如“Hello”），您需要阅读该评论。只需执行以下操作：

```
 Comment comment = sheet.getRow(7).getCell(5, Row.CREATE_NULL_AS_BLANK).getCellComment();

 System.out.println(comment.getString()); 
```

将打印“你好”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-16T13:56:39.850

对于所有使用 Apache POI 并尝试做 OP 想要的事情的烈士：使用 sheet.getCellComments() 方法 - 它返回一个 TreeMap，其中键是 CellAddress 并且值是 Comment 实例，即使处理它们的单元格为空或缺失.

要使这种单元格对 POI 迭代器可见，只需使用 MissingRowPolicy.CREATE_NULL_AS_BLANK 询问 getCell 方法。

例如（对于 Java 1.8+）：

```
sheet.getCellComments().forEach((cellAddress, o) ->
             sheet.getRow(cellAddress.getRow()).getCell(cellAddress.getColumn()
                        , Row.MissingCellPolicy.CREATE_NULL_AS_BLANK)); 
```

# java - 一个简单的文件传输客户端服务器的实现

> ID：15202691
> 
> 赞同：-3
> 
> 时间：2013-03-04T13:29:18.497
> 
> 标签：java, multithreading, client-server

嗨，我有以下代码到客户端-服务器通过线程，我有一个错误，

无法在此端口号上设置服务器。

无法在此端口号上设置服务器。

但为什么？

班级客户：

```
import java.io.*;
import java.net.Socket;

// create class client
public class Client extends Thread {

Socket socket = null;
Socket socket1 = null;
 // create send method 
public  void sendFile() throws IOException {

String host = "127.0.0.1";
String host1 = "127.0.0.2";

socket = new Socket(host, 4444);
socket1 = new Socket(host1, 444);

File file = new File("/home/reza/Desktop/link help");
File file1 = new File("/home/reza/Desktop/hi");
long length = file.length();
long length1 = file1.length();
byte[] bytes = new byte[(int) length];
byte[] bytes1 = new byte[(int) length1];

FileInputStream fis = new FileInputStream(file);
FileInputStream fis1 = new FileInputStream(file1);

BufferedInputStream bis = new BufferedInputStream(fis);
BufferedOutputStream out = new BufferedOutputStream(socket.getOutputStream());
BufferedInputStream bis1 = new BufferedInputStream(fis1);
BufferedOutputStream out1 = new BufferedOutputStream(socket1.getOutputStream());

int count;
int count1;

  while ((count = bis.read(bytes)) > 0) {
    out.write(bytes, 0, count);

}
 while ((count1 = bis1.read(bytes1)) > 0) {
    out1.write(bytes1, 0, count1);

}

 Thread t = new Thread(new Runnable() {

 public void run()
 {
  while(socket.isConnected())
  {

 Wait2();

   try {
 sendFile();
 } catch (IOException e) {

e.printStackTrace();
 }
 }
 }
 });

 Thread t1 = new Thread(new  Runnable() {
 public void run() {
 while(socket1.isConnected())
    {

     Wait2();

       try {
    sendFile();
    } catch (IOException e) {

    e.printStackTrace();
    }
    }

   }
  });
  t.start();
  t1.start();

 fis.close();
 fis1.close();

 out.close();
 bis.close();
 out1.close();
 bis1.close();
 socket.close();
 socket1.close();
 }

  public void Wait2()

 {

  try {

  Thread.currentThread().sleep(3000);

   } catch (InterruptedException x) {

  System.out.println("Interrupted!");

   }

   }
  } 
```

//类服务器

```
 import java.io.*;
  import java.net.*;
  public class Server {

public  void recivefile() throws IOException {
ServerSocket serverSocket = null;
ServerSocket serverSocket1 = null;

try {

   serverSocket = new ServerSocket(4444);
   //serverSocket1 = new ServerSocket(444);

} catch (IOException ex) {
    System.out.println("Can't setup server on this port number. ");
}
try {
     serverSocket1 = new ServerSocket(444);

    } catch (IOException ex) {
        System.out.println("Can't setup server on this port number. ");
    }

Socket socket = null;
Socket socket1 = null;

InputStream is = null;
InputStream is1 = null;

FileOutputStream fos = null;
FileOutputStream fos1 = null;

BufferedOutputStream bos = null;
BufferedOutputStream bos1 = null;

int bufferSize = 0;
int bufferSize1 = 0;

try {
    socket = serverSocket.accept();
   socket1 = serverSocket1.accept();

} catch (IOException ex) {
    System.out.println("Can't accept client connection. ");
}

try {
    is = socket.getInputStream();
    is1 = socket1.getInputStream();

    bufferSize = socket.getReceiveBufferSize();
    bufferSize1 = socket1.getReceiveBufferSize();

    System.out.println("Buffer size: " + bufferSize);
    System.out.println("file recieved");
    System.out.println("Buffer size1: " + bufferSize1);
    System.out.println("file recieved");

    System.out.println("file recieved");
} catch (IOException ex) {
    System.out.println("Can't get socket input stream. ");
}

try {
    fos = new FileOutputStream("/home/reza/Desktop/reza");
    bos = new BufferedOutputStream(fos);
    fos1 = new FileOutputStream("/home/reza/Desktop/ali");
    bos1 = new BufferedOutputStream(fos1);

} catch (FileNotFoundException ex) {
    System.out.println("File not found. ");
}

byte[] bytes = new byte[bufferSize];

int count;

while ((count = is.read(bytes)) > 0) {
   bos.write(bytes, 0, count);

}
byte[] bytes1 = new byte[bufferSize1];

int count1;
while ((count1 = is1.read(bytes1)) > 0) {
       bos1.write(bytes1, 0, count1);
    }

bos.flush();
bos.close();
bos1.flush();
bos1.close();
is.close();
is1.close();
socket.close();
serverSocket.close();
socket1.close();
serverSocket1.close();

}

public static void main(String[] args)  throws IOException 
{
System.out.println("server is run, please send file");

Server s = new Server();
s.recivefile();

}
} 
```

错误是：无法在此端口号上设置服务器。无法在此端口号上设置服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:46:51.023

您无法在 127.0.0.2 上启动服务器 - 这就是您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:37:32.417

假设您的代码在 unix 平台上运行，您的服务器代码会尝试两次打开端口 444 上的套接字，该端口是系统保留端口。为了能够成功，您的程序必须以管理权限运行，并且您必须确保该端口尚未被其他进程使用。

一种可能的解决方法是：

*   使用 1024 以上的端口。这些端口可免费用于用户级程序

*   如果发生故障，有一个备用端口，也高于 1024。您必须修改服务器和客户端代码以尝试这两个端口，当然您的通信协议必须包括某种形式的握手，以确保他们正在与正确的对话者交谈。

其他答案中列出的代码还有许多其他问题。

*   您不需要将每个对象制作两次。在大多数情况下，只需一个实例就足够了，

*   如果您的服务器连续运行并且必须接受许多连接，则不应在一个接收会话结束时关闭接受套接字。

*   服务器还应该在服务器套接字接受调用上运行一个循环，并为每个传入连接启动一个新线程，其工作是处理该连接。

虽然我理解您愿意学习和尝试，但对于您想要实现的目标，有现有的解决方案。例如，您可以简单地使用 FTP 服务器来实现您的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:22:16.430

我猜你编写客户端 - 服务器程序的方式是错误的。以下是你犯的错误...

1）在 Client 类中，您具有`sendFile`创建两个线程的函数 - `t`& `t1`。在运行函数中，您再次调用相同的`sendFile`函数。所以它像递归一样不断地在线程下创建线程。

2）在 Server 类中，您正在侦听同一`recieveFile`函数中的两个端口。由于这`socket = serverSocket.accept()`是一个阻塞调用，它不会执行其余的代码，直到它找到一个要连接的客户端。

所以这里到底发生了什么......一旦第一个客户端连接，然后它立即期望第二个客户端连接。同时，您的客户端线程可能会尝试访问尚未建立连接的端口。

简而言之，您的服务器应该处于线程环境而不是客户端。而且我建议对于不同的端口，您应该使用不同的服务器。即为 1024 和 1025 端口创建不同的服务器类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T06:54:03.503

**网络统计-ano | 找到“1024”**

如果您在 Windows 环境中运行 java 文件，请尝试上述命令，这将帮助您找到使用与您相同的端口号的任何进程，并使用 ex.printStackTrace() 以及

```
System.out.println("Can't setup server on this port number."); 
```

# wpf - 小型 wpf 应用程序和 localdb 的安装项目

> ID：15202694
> 
> 赞同：1
> 
> 时间：2013-03-04T13:29:29.710
> 
> 标签：wpf, installation, localdb

我建立了一个使用 LocalDB 的小项目，现在是时候将它转移给客户了，我想了解如何构建安装文件？我像往常一样尝试使用 InstallShield 软件，但没有成功。有区别吗？还有如何放置数据库（它没有在这个项目中本地化，只是在 V11 中）希望我能解释这个问题，并提前感谢任何回复

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T13:36:12.660

要在您的客户端机器上使用 LocalDB，您需要做两件事：

1.  在客户端机器上安装 LocalDB。它是一个小型安装程序，可以使用以下命令静默运行： `msiexec /i SqlLocalDB.msi /qn IACCEPTSQLLOCALDBLICENSETERMS=YES`. 您应该将此安装程序包含在应用程序的安装程序中。你可以在[这里找到更多信息](http://blogs.msdn.com/b/sqlexpress/archive/2011/11/28/simple-installer-for-localdb-has-shipped.aspx)

2.  找到您创建的 *.mdf 和 *.ldf 文件（默认情况下在 中找到`%userprofile%`，请[在此处](http://blogs.msdn.com/b/sqlexpress/archive/2011/10/28/localdb-where-is-my-database.aspx)查看更多信息）并使它们在客户端计算机上可用。将它们放在您的进程可以访问的目录中，并在应用程序的连接字符串中使用该路径。例如：`Data Source=(LocalDB)\v11.0;AttachDbFileName=C:\ProgramData\MyApp\Data\MyData.mdf;`

# ios - NSMutableArray 丢失添加的数据

> ID：15202695
> 
> 赞同：0
> 
> 时间：2013-03-04T13:29:33.847
> 
> 标签：ios, objective-c, nsmutablearray

出于学习目的，我正在创建一个简单的应用程序来计算两个日期之间的周数。为此，我创建了

*   BITInputViewController : UITableViewController （包含 2 行，每行一个日期）
*   BITSelectDateViewController : UIViewController (包含一个 UIDatePicker 来选择日期)

我 BITInputViewController 我创建了一个带有对象“开始日期”和“结束日期”的 NSMutableArray datesArray。

```
-(id)init
{
    // Call the superclass's designated initializer
    self = [super initWithStyle:UITableViewStyleGrouped];
    if (self) {
        self.title = @"Calculate weeks";

    datesArray = [NSMutableArray arrayWithObjects:@"Start date", @"End date", nil];
}
return self; 
```

}

如果我转到 BITSelectDateView 控制器，则应将所选日期添加到此数组中。BITSelectDateViewController 中的 NSLogs 显示日期已添加到 datesArray。但是，如果我返回 BITInputViewController，则该条目会丢失，并且数组中只有开始和结束日期。

那么我错过了什么？

BITInputViewController.h

```
#import <UIKit/UIKit.h>
#import "BITSelectDateViewController.h"

@interface BITInputViewController : UITableViewController 

@property (nonatomic, copy) NSMutableArray *datesArray;

-(void)passDate:(NSString *)dateString;

@end 
```

BITInputViewController.m

```
-(void)passDate:(NSString *)dateString {

   [datesArray addObject:dateString];

    NSLog(@"<IVC> passdate:(NSString *)dateString %@",dateString);

    NSLog(@"<IVC> rowcount datesArray %d", [datesArray count]);

    for (NSObject *d in datesArray) {
        NSLog(@"<IVC> Dump of passdate:(NSString *)dateString %@",d);
    }
}

-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    for (NSString *d in datesArray) {
        NSLog(@"<IVC> viewWillAppear: datesArray: %@",d);
    }

    NSLog(@" %p", datesArray);

} 
```

BITSelectedDateViewController.m

```
- (void)LabelChange:(id)sender{
    NSLog(@"<SDV> LabelChange: method");

    BITInputViewController *vc = [[BITInputViewController alloc]init];

    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    df.dateStyle = NSDateFormatterMediumStyle;

    dateLabel.text = [NSString stringWithFormat:@"%@",
                      [df stringFromDate:datePicker.date]];

    [vc passDate:dateLabel.text];

    NSLog(@"<SDV> LabelChange: to passDate %@:",dateLabel.text);

     if (vc.datesArray) {

    for (NSString *d in vc.datesArray) {
        NSLog(@"<SDV> Dump of datesrray in labelChange: %@",d);
    }
    }
    else
        NSLog(@"<SDV>!ivc.datesArray");

}

-(void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

    [[self view] endEditing:YES];

    NSLog(@"<SDV>dateLabel in viewWillDisappear: %@", dateLabel.text);

} 
```

如果您查看 LOG，您会看到日期已添加到数组中，但在 InputViewController 中它会丢失。

```
2013-03-04 14:06:11.713[28900:c07] <IVC> viewWillAppear: datesArray: Start date
2013-03-04 14:06:11.714[28900:c07] <IVC> viewWillAppear: datesArray: End date
2013-03-04 14:06:11.717[28900:c07] set dates
2013-03-04 14:06:11.719[28900:c07] set dates
2013-03-04 14:06:13.533[28900:c07] <SDV> datelabel viewWillAppear Mar 4, 2013
2013-03-04 14:06:14.895[28900:c07] <SDV> LabelChange: method
2013-03-04 14:06:14.897[28900:c07] <IVC> passdate:(NSString *)dateString Mar 5, 2013
2013-03-04 14:06:14.897[28900:c07] <IVC> aantal rijen in datesArray 3
2013-03-04 14:06:14.898[28900:c07] <IVC> Dump of passdate:(NSString *)dateString Start date
2013-03-04 14:06:14.898[28900:c07] <IVC> Dump of passdate:(NSString *)dateString End date
2013-03-04 14:06:14.899[28900:c07] <IVC> Dump of passdate:(NSString *)dateString Mar 5, 2013
2013-03-04 14:06:14.899[28900:c07] <SDV> LabelChange: to passDate Mar 5, 2013:
2013-03-04 14:06:14.900[28900:c07] <SDV> Dump of datesrray in labelChange: Start date
2013-03-04 14:06:14.900[28900:c07] <SDV> Dump of datesrray in labelChange: End date
2013-03-04 14:06:14.901[28900:c07] <SDV> Dump of datesrray in labelChange: Mar 5, 2013
2013-03-04 14:06:16.489[28900:c07] <SDV>dateLabel in viewWillDisappear: Mar 5, 2013
2013-03-04 14:06:16.489[28900:c07] <IVC> viewWillAppear: datesArray: Start date
2013-03-04 14:06:16.490[28900:c07] <IVC> viewWillAppear: datesArray: End date 
```

.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T13:33:46.077

```
@property (nonatomic, copy) NSMutableArray *datesArray; 
```

在这里，您制作数组的副本。您的第二个控制器在其自己的副本上运行。您需要将数组作为`strong`/传递`retain`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:09:26.713

终于找到了。NSMutableArray 正在丢失它的数据，因为我没有在 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { // 导航逻辑中设置属性。创建并推送另一个视图控制器。

```
 BITSelectDateViewController  *selectDateViewController = [[BITSelectDateViewController alloc] init];    
 selectDateViewController.vc = self;// Set this property as you prepare the selectDateViewController

 // Pass the selected object to the new view controller.
 [self.navigationController pushViewController:selectDateViewController animated:YES]; 
```

}

# c++ - 在条件下使用提取运算符的返回值？

> ID：15202697
> 
> 赞同：1
> 
> 时间：2013-03-04T13:29:36.173
> 
> 标签：c++

为什么`ss >> aa >> bb >> cc >> dd`可以用于条件检查？如果我使用`ss >> aa >> bb >> cc >> dd >> ee`这个操作的返回值是什么？

```
ifstream inputFile("source.txt", ifstream::in);
string aa, bb, cc, dd;
char line[1024];

while(!inputFile.eof())
{
    inputFile.getline(line, 1023);
    stringstream ss(stringstream::in | stringstream::out);
    ss.str(line);

    if(ss >> aa >> bb >> cc >> dd)
    {
        cout << aa << "-" << bb << "-" << cc << "-" << dd << endl;
    }
} 
```

像这样使用**source.txt**：

```
1aaa ddd eee asd
2dfs dfsf sdfs fd     
3sdf sdfsdfsdf d s 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T13:30:54.237

流输入操作的返回值是流。

表达方式

```
ss >> aa 
```

等于

```
operator>>(ss, aa) 
```

并且`operator>>()`函数返回第一个参数。

使用多个输入操作只是链接函数调用。例如

```
ss >> aa >> bb; 
```

变成

```
operator>>(ss, aa).operator>>(ss, bb); 
```

流可以用作布尔表达式的原因是因为它有一个特殊的转换*运算*[符](http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool)，可以这样使用它。

* * *

顺便说一句，你不应该使用`while (!stream.eof())`. 而是使用返回流的事实`getline`，并且流可以在布尔表达式中使用：

```
while (inputFile.getline(line, 1023))
{
    // ...
} 
```

# iphone - 两种方式都使用委托时导入循环？

> ID：15202701
> 
> 赞同：1
> 
> 时间：2013-03-04T13:29:39.683
> 
> 标签：iphone, objective-c, loops, import, delegates

在我的应用程序中，我发现自己需要在视图控制器之间使用委托。

因此视图控制器 1 委托用于视图控制器 2，视图控制器 2 委托用于视图控制器 1。

要实现委托，我需要在其他视图控制器头文件中导入头文件。但是，这会导致导入循环，那么如果我想双向发送信息，我该如何解决呢？

谢谢。

# vb.net - 莲花笔记开始会话

> ID：15202705
> 
> 赞同：1
> 
> 时间：2013-03-04T13:30:01.253
> 
> 标签：vb.net, lotus-notes, system.net.mail

我正在寻找一种方法来启动 Lotus Notes 并从 vb.net 项目控制其利用率。

通过控制，我的意思是获取窗口位置、关闭活动文档和其他内容。

但主要目标是开始一个会话。

我很困惑，因为我尝试使用 Lotus Notes Automation Classes dll，但没有任何效果......

如果有人对我有一些建议，我会非常感激！谢谢！（顺便说一句，抱歉英语不是我的主要语言）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:51:41.327

在 Notes 中，会话是后端对象，而不是 UI 对象。您所描述的（更改窗口位置、关闭活动窗口等）是 UI 功能。

Notes 支持 COM，您可以完全访问所有后端类。但是您无权访问 UI 类。

为什么要自动化实际的 Notes 客户端？如果您描述了您最终想要做的事情，也许我们可以提供帮助。我确信解决您正在尝试做的事情的正确方法是使用后端类......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:42:19.550

我找到了一种启动 Notes 的方法，我需要使用流程：

```
 Private Sub StartNotes()
    Dim p As Process = New Process()

    p.StartInfo.FileName = "C:\Program Files\Notes\notes.exe"
    p.StartInfo.Arguments = ""

    p.Start()

  End Sub 
```

我在使用 lotus 和 domino dll 的后端类后将其自动化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-11T12:26:26.587

```
Sub Send_Email_via_Lotus_Notes()
Dim Maildb As Object
Dim MailDoc As Object
Dim Body As Object
Dim Session As Object
'Start a session of Lotus Notes
    Set Session = CreateObject("Lotus.NotesSession")
'This line prompts for password of current ID noted in Notes.INI
    Call Session.Initialize
'or use below to provide password of the current ID (to avoid Password prompt)
    'Call Session.Initialize("<password>")
'Open the Mail Database of your Lotus Notes
    Set Maildb = Session.GETDATABASE("", "D:\Notes\data\Mail\eXceLiTems.nsf")
    If Not Maildb.IsOpen = True Then Call Maildb.Open
'Create the Mail Document
    Set MailDoc = Maildb.CREATEDOCUMENT
    Call MailDoc.REPLACEITEMVALUE("Form", "Memo")
'Set the Recipient of the mail
    Call MailDoc.REPLACEITEMVALUE("SendTo", "Ashish Jain")
'Set subject of the mail
    Call MailDoc.REPLACEITEMVALUE("Subject", "Subject Text")
'Create and set the Body content of the mail
    Set Body = MailDoc.CREATERICHTEXTITEM("Body")
    Call Body.APPENDTEXT("Body text here")
'Example to create an attachment (optional)
    Call Body.ADDNEWLINE(2)
    Call Body.EMBEDOBJECT(1454, "", "C:\dummy.txt", "Attachment")
'Example to save the message (optional) in Sent items
    MailDoc.SAVEMESSAGEONSEND = True
'Send the document
'Gets the mail to appear in the Sent items folder
    Call MailDoc.REPLACEITEMVALUE("PostedDate", Now())
    Call MailDoc.SEND(False)
'Clean Up the Object variables - Recover memory
    Set Maildb = Nothing
    Set MailDoc = Nothing
    Set Body = Nothing
    Set Session = Nothing
End Sub 
```

# javascript - 新运营商缺少这个

> ID：15202707
> 
> 赞同：0
> 
> 时间：2013-03-04T13:30:14.450
> 
> 标签：javascript, ajax, new-operator

我在 AJAX 调用返回时错过了这个。我有

# interar.js

```
interar.Remoter = function (data) {
  this.server = data.server;
  this.init(data);
};

interar.Remoter.prototype.init = function (data) {
    var succeedCB, errorCB, lPayload, promiseCB;
    succeedCB = function (result) {
        // When return the called the this is === window not in.
        this.uuid = result.uuid;
        console.log("UUID v4 From Server " +  this.uuid);
    };
    errorCB = function () {
        console.error("Not Allow to Connect to Server ");
    }
    // This execute a XHTTPRequest Async call
    interar.execute(succeedCB, errorCB, {'w' : data});
}; 
```

# 索引.html

```
var W = new interar.Remoter("mydata"); 
```

在**succeedCB**返回时，this is ***window*** not **interar** instance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:47:18.950

`this`实例初始化时缓存：

```
interar.Remoter.prototype.init = function (data) {
    var succeedCB, errorCB, lPayload, promiseCB, self = this;
    succeedCB = function (result) {
        // When return the called the this is === window not in.
        self.uuid = result.uuid;
        console.log("UUID v4 From Server " +  self.uuid);
    };
    errorCB = function () {
        console.error("Not Allow to Connect to Server ");
    }
    // This execute a XHTTPRequest Async call
    interar.execute(succeedCB, errorCB, {'w' : data});
}; 
```

此外，您可能想要设置`prototype.init`of`Remoter`而不是`Remote`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:47:34.070

它应该是

```
interar.Remote.prototype.init = function (data) {
    var succeedCB, errorCB, lPayload, promiseCB;
    var self = this; <-- Assign this to a variable for closure bases access
    succeedCB = function (result) {
        // When return the called the this is === window not in.
        self.uuid = result.uuid;
        console.log("UUID v4 From Server " +  self.uuid);
    };
    errorCB = function () {
        console.error("Not Allow to Connect to Server ");
    }
    // This execute a XHTTPRequest Async call
    interar.execute(succeedCB, errorCB, {'w' : data});
}; 
```

当您`succeedCB`作为回调传递时，`succeedCB`执行的上下文将不知道该`this`实例。

所以我们可以利用闭包来`this`访问内部`succeedCB`

# javascript - 测试使用交互式 DOM 的 JavaScript 函数

> ID：15202715
> 
> 赞同：0
> 
> 时间：2013-03-04T13:30:40.893
> 
> 标签：javascript, unit-testing, javascript-framework

我想写一些js测试，但是所有的测试框架都使用fixtures——自定义DOM元素。就我而言，视图 - 它是 erb 和 haml 文件。页面加载后（当我编译 arb 和 haml 时），我的 js 脚本对 API 执行许多 AJAX 请求并在我的页面上重建 DOM。

我如何测试与这个 DOM 交互的 js 脚本 - 我不能做一些固定装置......

也许，我可以从我的页面中获取 DOM？

哪个框架允许它这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:50:07.557

您在这里有几个不同的选择。

我个人使用[jasmin 和 jquery 插件](https://github.com/velesin/jasmine-jquery)来测试我的应用程序的 dom 和 javascript。

或者您可以使用[selenium](https://github.com/velesin/jasmine-jquery)或[easy B进行更多 Qa 风格的 DOM 测试](http://code.google.com/p/easyb/)

希望有帮助

# asp.net - DropDownList-Items 在回发时为空

> ID：15202717
> 
> 赞同：0
> 
> 时间：2013-03-04T13:30:47.880
> 
> 标签：asp.net, drop-down-menu

我有 DropDownList ，我必须在与另一个控件的单击事件关联的事件中填充它。数据已填充并存在，但是当我选择一个值并回发时，这些值为空。这意味着视图状态不起作用。解决方案说在 Init() 中填充 DropDown 但我不能，因为要求不允许这样做。我必须在点击事件上填充它.. Viewstates 已启用.. 以下代码填充了 DropDown..

```
if (e.CommandName == "Add Friend")         
{
   HtmlGenericControl divMySub = (HtmlGenericControl)GridViewUserSubjects.Rows[Convert.ToInt32(e.CommandArgument)].FindControl("divMySubjects");
   divMySub.Style["display"] = "block";

   DropDownList mySub = (DropDownList)GridViewUserSubjects.Rows[Convert.ToInt32(e.CommandArgument)].FindControl("DropDownListMySubjectz");
   UpdatePanel mySubPanel = (UpdatePanel)GridViewUserSubjects.Rows[Convert.ToInt32(e.CommandArgument)].FindControl("UpdatePanelRequestAction");
   DataView SubjectTableView = ProfileDataAccess.GetUserUnusedSubjectsForRequest(UserId ,RequesterId).DefaultView;
   if (SubjectTableView.Count > 0)
   {
       mySub.DataSource = SubjectTableView;
       mySub.DataTextField = "Name";
       mySub.DataValueField = "Id";
       mySub.DataBind();

   } 
   else
   {
       divMySub.InnerText = "Requests Complete";
       LinkButton buttonlink= (LinkButton)sender;
       buttonlink.Enabled = false;
   }
      mySubPanel.Update();
} 
```

以下是从下拉列表中检索值的回发代码。下拉列表位于 Gridview 行内。

```
protected void LinkButtonAddFriend_Command(object sender, CommandEventArgs e)
{
    Guid RequestedId = new Guid(Membership.GetUser().ProviderUserKey.ToString());
    Guid UserId = new Guid(HiddenFieldUserId.Value.ToString());
    int UserSubjectId = Convert.ToInt32 (GridViewUserSubjects.DataKeys[Convert.ToInt32(e.CommandArgument)].Value);
    DropDownList DDL = (DropDownList)GridViewUserSubjects.Rows[Convert.ToInt32(e.CommandArgument)].FindControl("DropDownListMySubjectz");
    LinkButton RequestAction = (LinkButton)GridViewUserSubjects.Rows[Convert.ToInt32(e.CommandArgument)].FindControl("LinkButtonFriendAction");
    int RequesterSubjectId = Convert.ToInt32(DDL.SelectedItem.Value);

    if (FriendsDataAccess.InsertRequest(UserId, RequestedId, UserSubjectId, RequesterSubjectId))
    {
        RequestAction.Text = "Remove Request";
        RequestAction.Enabled = true;
    }
} 
```

DDL 是有麻烦的下拉菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:07:09.203

你什么时候数据绑定`GridView`哪个是容器`DropDownList`？您是否已将其包装在`if(!IsPostBack)`-check 中？当您数据绑定时`GridView`，子控件总是“重置”。

如果您使用像这样的声明性数据绑定控件，则在不必要`ObjectDataSource`时应避免使用。`this.databind()`

# asp.net-mvc-3 - 是否可以保护使用 CloudConfigurationManager 引用的 Azure 连接字符串？

> ID：15202726
> 
> 赞同：0
> 
> 时间：2013-03-04T13:31:15.250
> 
> 标签：asp.net-mvc-3, azure, azure-sql-database

我已经阅读了有关通过加密内容并在 Azure 上设置证书以便可以读取它们来保护 web.config 中的敏感数据的[MSDN 博客文章。](http://blogs.msdn.com/b/sqlazure/archive/2010/09/07/10058942.aspx "MSDN 博客")

但是，在 Visual Studio Azure 部署项目中我的“服务配置”.cscfg 文件中有绝密数据。我们在此处存储连接字符串和其他敏感数据，以便同样在 Azure 上的测试系统可以定向到等效的测试后端服务。

此数据通过 CloudConfigurationManager（例如 .GetSetting("AwsSecretKey")）而不是博客文章中讨论的 WebConfigurationManager 访问。

是否可以以类似的方式保护这些数据？重要的是我们在测试和生产中拥有不同的 AWS 和 SQL 连接字符串，并且生产密钥对我和其他开发人员都是隐藏的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T02:13:48.690

是的，我们使用在部署配置中上传的 x509 证书来执行此操作。但是，这些设置仅与您保护私钥的策略/程序一样安全！下面是我们在 Azure 角色中用于解密 ServiceConfiguration 中的值的代码：

```
/// <summary>Wrapper that will wrap all of our config based settings.</summary>
public static class GetSettings
{
    private static object _locker = new object();

    /// <summary>locked dictionary that caches our settings as we look them up.  Read access is ok but write access should be limited to only within a lock</summary>
    private static Dictionary<string, string> _settingValues = new Dictionary<string, string>();

    /// <summary>look up a given setting, first from the locally cached values, then from the environment settings, then from app settings.  This handles caching those values in a static dictionary.</summary>
    /// <param name="settingsKey"></param>
    /// <returns></returns>
    public static string Lookup(string settingsKey, bool decrypt = false)
    {
        // have we loaded the setting value?
        if (!_settingValues.ContainsKey(settingsKey))
        {
            // lock our locker, no one else can get a lock on this now
            lock (_locker)
            {
                // now that we're alone, check again to see if someone else loaded the setting after we initially checked it
                //  if no one has loaded it yet, still, we know we're the only one thats goin to load it because we have a lock
                //  and they will check again before they load the value
                if (!_settingValues.ContainsKey(settingsKey))
                {
                    var lookedUpValue = "";
                    // lookedUpValue = RoleEnvironment.IsAvailable ? RoleEnvironment.GetConfigurationSettingValue(settingsKey) : ConfigurationManager.AppSettings[settingsKey];
                    // CloudConfigurationManager.GetSetting added in 1.7 - if in Role, get from ServiceConfig else get from web config.
                    lookedUpValue = CloudConfigurationManager.GetSetting(settingsKey);
                    if (decrypt)
                        lookedUpValue = Decrypt(lookedUpValue);
                    _settingValues[settingsKey] = lookedUpValue;
                }
            }

        }

        return _settingValues[settingsKey];
    }

    private static string Decrypt(string setting)
    {
        var thumb = Lookup("DTSettings.CertificateThumbprint");
        X509Store store = null;

        try
        {
            store = new X509Store(StoreName.My, StoreLocation.LocalMachine);

            store.Open(OpenFlags.ReadOnly);
            var cert = store.Certificates.Cast<X509Certificate2>().Single(xc => xc.Thumbprint == thumb);

            var rsaProvider = (RSACryptoServiceProvider)cert.PrivateKey;
            return Encoding.ASCII.GetString(rsaProvider.Decrypt(Convert.FromBase64String(setting), false));
        }
        finally
        {
            if (store != null)
                store.Close();
        }
    }
} 
```

然后，您可以利用`RoleEnvironment.IsAvailable`仅解密模拟器或部署环境中的值，从而在本地 IIS 中使用未加密的应用程序设置运行 Web 角色，其中 key="MyConnectionString" 进行本地调试（没有模拟器）：

```
ContextConnectionString = GetSettings.Lookup("MyConnectionString", decrypt: RoleEnvironment.IsAvailable); 
```

然后，为了完成示例，我们使用以下代码创建了一个简单的 WinForsm 应用程序，以使用给定的证书加密/解密值。我们的生产团队维护对生产证书的访问权限，并使用 WinForms 应用程序加密必要的值。然后，他们向 DEV 团队提供加密值。您可以[在此处找到解决方案的完整工作副本](http://www.falconwebtech.com/post/2013/03/04/Securing-Azure-ServiceConfiguration-values-for-Enterprise-Deployment.aspx)。这是 WinForms 应用程序的主要代码：

```
 private void btnEncrypt_Click(object sender, EventArgs e)
    {
        var thumb = tbThumbprint.Text.Trim();
        var valueToEncrypt = Encoding.ASCII.GetBytes(tbValue.Text.Trim());

        var store = new X509Store(StoreName.My, rbLocalmachine.Checked ? StoreLocation.LocalMachine : StoreLocation.CurrentUser);
        store.Open(OpenFlags.ReadOnly);
        var cert = store.Certificates.Cast<X509Certificate2>().Single(xc => xc.Thumbprint == thumb);

        var rsaProvider = (RSACryptoServiceProvider)cert.PublicKey.Key;
        var cypher = rsaProvider.Encrypt(valueToEncrypt, false);
        tbEncryptedValue.Text = Convert.ToBase64String(cypher);
        store.Close();
        btnCopy.Enabled = true;
    }

    private void btnDecrypt_Click(object sender, EventArgs e)
    {
        var thumb = tbThumbprint.Text.Trim();
        var valueToDecrypt = tbEncryptedValue.Text.Trim();

        var store = new X509Store(StoreName.My, rbLocalmachine.Checked ? StoreLocation.LocalMachine : StoreLocation.CurrentUser);
        store.Open(OpenFlags.ReadOnly);
        var cert = store.Certificates.Cast<X509Certificate2>().Single(xc => xc.Thumbprint == thumb);

        var rsaProvider = (RSACryptoServiceProvider)cert.PrivateKey;
        tbDecryptedValue.Text = Encoding.ASCII.GetString(rsaProvider.Decrypt(Convert.FromBase64String(valueToDecrypt), false));
    }

    private void btnCopy_Click(object sender, EventArgs e)
    {
        Clipboard.SetText(tbEncryptedValue.Text);
    } 
```

# joomla2.5 - JoomGallery with Avatar Slide Galleria Unlimited

> ID：15202727
> 
> 赞同：0
> 
> 时间：2013-03-04T13:31:26.230
> 
> 标签：joomla2.5, slide, galleria, avatar

我正在使用 Joomla 2.5 JoomGallery 2.xx 我已经下载并安装了 Avatar Slide Galleria Unlimited

我正在尝试在 JoomGallery 之上使用 Avatar Slide Galleria Unlimited。

在我设置时在 JoomGallery 中：

详细视图 --> 常规设置 --> 打开原始图像

我看到许多已安装的插件，除了头像。

任何建议我如何让“JoomGallery”与“Avatar Slide Galleria”一起工作

任何帮助都会很合适。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:49:53.993

在无限版中，Avatar Slide Galleria 是 Joomla 的模块扩展，可以从 JoomGallery 中滑动图像。它不是 JoomGallery 插件。Galleria 只会被 Joomla 网站调用，而不是 JoomGallery。您可以将模块添加到您的站点并将其设置为显示 JoomGallery 图像。

设置模块以管理员身份登录到 Joomla 控制面板页面

选择扩展>模块管理器。单击新建。选择阿凡达幻灯片画廊。从 Joomgallery 为您的 Module silde 图像设置参数

Avatar幻灯片画廊可以按类别和子类别滑动JoomGallery图像。您可以为 Galleria 选择类别或子类别以滑动它们。

谢谢

# jsp - 需要注销代码

> ID：15202729
> 
> 赞同：2
> 
> 时间：2013-03-04T13:31:34.203
> 
> 标签：jsp, servlets, login, logout

我对编程很陌生，需要一些关于注销的指导。我正在制作一个可以在后端服务器上运行的基于 Web 的应用程序。我的登录工作正常，但不确定如何实现注销。任何帮助是极大的赞赏。这是登录的 servlet 代码：

```
protected void processRequest(HttpServletRequest request
                    , HttpServletResponse response)
        throws ServletException, IOException {

    String address = "";
    String operation = request.getParameter("operation");
    //  System.out.println(operation);
    HttpSession session = request.getSession(true);

    UserModel u = null;
    if (operation != null) {

        if (operation.equalsIgnoreCase("login")) {

            u = new UserModel();

            String Username = request.getParameter("username");
            String Password = request.getParameter("password");
            System.out.println("userModel" + u);
            u = u.find(Username, Password);
            System.out.println("i" + u.getUsername());

            if (u.getUsername() != null) {

                session.setAttribute("user", u);
                address = "Homepage.jsp";
            } else {
                address = "InvalidLogin.jsp";
            } 
```

这是我的 JSP 页面代码：

```
<form id="login1" action="Servlet">
    <input type="hidden" name="operation" value="login" />
    <h1>Log In</h1>
    <fieldset id="inputs">
        <input id="username" type="text" placeholder="Username" 
               name="username"autofocus required>   
        <input id="password" type="password" placeholder="Password"
               name="password" required>
    </fieldset>
    <fieldset id="actions">
        <button type="submitm"  value="Login" 
               class="IR" id="IRButton"><em></em></button>
    </fieldset>
</form>
<form action="Register1.jsp">
    <button type ="submitn" value="Register" class="IR2"
               id="IRButton2"><em></em></button>
</form> 
```

....如果有人能告诉我我在两个页面中需要什么代码，那就太好了！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:41:53.807

试试这个...请考虑`Session Management`登录和注销操作

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <servlet>
        <servlet-name>ServletLogic</servlet-name>
        <servlet-class>model.ServletLogic</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ServletLogout</servlet-name>
        <servlet-class>model.ServletLogout</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ServletLogic</servlet-name>
        <url-pattern>/ServletLogic</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ServletLogout</servlet-name>
        <url-pattern>/ServletLogout</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

**索引.jsp**

```
<%@page import="java.util.Map"%>
<%@page import="java.util.HashMap"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <form action="ServletLogic" method="post">
            USER:<input type="text" name="user" id="user"/><br>
            PASS:<input type="password" name="pass" id="pass"/><br>
            <input type="submit" value="Login"/>
        </form>
    </body>
</html> 
```

**登录.jsp**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>My Page</h1>
        <form action="ServletLogout" method="post">
              <input type="submit" value="Logout"/>
        </form>
    </body>
</html> 
```

**ServletLogic.java** //servlet

```
package model;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class ServletLogic extends HttpServlet {

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();

        String user=request.getParameter("user");
        String pass=request.getParameter("pass");
        String res;
        if(user.equals("admin")&&pass.equals("admin"))
         res="Success!!!";
        else
          res="Failure!!!";
        request.getRequestDispatcher("login.jsp").forward(request, response); 

        try {

        } finally {            
            out.close();
        }
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    public String getServletInfo() {
        return "Short description";
    }
} 
```

**ServletLogout.java** // servlet

```
package model;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class ServletLogout extends HttpServlet {

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {

        request.getRequestDispatcher("index.jsp").forward(request, response); 
        } finally {            
            out.close();
        }
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    public String getServletInfo() {
        return "Short description";
    }
} 
```

# android - 如何通过共享安卓屏幕进行现场演示？

> ID：15202731
> 
> 赞同：0
> 
> 时间：2013-03-04T13:31:36.310
> 
> 标签：android, presentation, screensharing

[在这里](https://www.youtube.com/watch?feature=player_detailpage&v=64JulxSOjzc#t=1411s)，您可以看到在三星 Galaxy Nexus 发布期间，演示者显示了一个实时安卓屏幕。我一直在寻找任何可以做同样事情的软件。

我见过像 droid@screen 这样的应用程序，但是在流式传输手机屏幕时会有很大的延迟。在使用 hdpi 设备时，滞后变得巨大并成为阻碍因素。

有什么办法可以达到同样的质量和速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:34:38.493

将 Galaxy Nexus 连接到 HDMI 投影仪（或者，对于兼容的硬件，使用 Miracast，又名 Samsung AllShare）。

或者，根您的 Galaxy Nexus 并找到一些可以直接使用帧缓冲区的软件。

Droid@Screen 与使用半支持技术一样快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T16:18:19.260

如果您没有数据线，[TeamViewer QuickSupport](https://play.google.com/store/apps/details?id=com.teamviewer.quicksupport.market.samsung&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS50ZWFtdmlld2VyLnF1aWNrc3VwcG9ydC5tYXJrZXQuc2Ftc3VuZyJd)也是一种替代方案，只需在三星 Galaxy S3 上试用过，效果就很迷人。

# c++ - 如何将使用 VS 编译器构建的 dll 中的全局变量/数组导出到使用 MingW 编译器构建的客户端？

> ID：15202736
> 
> 赞同：0
> 
> 时间：2013-03-04T13:31:56.773
> 
> 标签：c++, visual-studio-2010, mingw, compatibility, dllimport

**一般信息 [可选]：**
我最近熟悉静态和动态库。
现在我正在尝试学习如何使用 DLL，我尝试模仿所有可能的使用变体，以便遇到可能的瓶颈和防止它们的方法。

**我的目标**
是：找出**如何从用一个编译器编译的 DLL 中导出全局变量。VS 编译器（IDE Visual Studio 2010）到使用另一个编译器 MingW（IDE Qt Creator 5.0）编译的客户端。**实际上，我对特定案例感兴趣，而不是常见案例，但是如果提供常见案例的信息-那就太好了。
同样**重要的是 dll 到客户端的连接是隐式的**（不是显式的，然后我们手动连接库）。
我也提出了这样的问题，因为我很感兴趣**如何通过提供更新的 dll 来支持客户的应用程序**，因为在项目开始时客户端和dll使用的编译器版本可以相同，但随着时间的推移它们可能会有所不同，那么如何解决这个二进制兼容性问题呢？
**我试图将 dll 中定义的数组导出到客户端时遇到了困难。**
DLL & 客户端

```
 /* header file. Is used by both: dll and client */
#ifdef EXPORT
    #define MYLIB __declspec(dllexport)
#else 
    #define MYLIB __declspec(dllimport)
#endif

extern "C" { // My be this directive not supported by MingW???

#ifdef VS2010 
    extern MYLIB char ImplicitDLLName[];
#else
    Q_DECL_IMPORT extern char ImplicitDLLName[];
#endif
} 
```

动态链接库

```
/* .cpp file in dll: */
#define EXPORT ""
#define VS2010 ""
char ImplicitDLLName[] = "MySUMoperator"; 
```

客户端 /* 客户端 .cpp */

```
void MainWindow::on_pushButtonAdd_clicked()
{
    // ...
    printf("%s",ImplicitDLLName);

} 
```

尝试在客户端中使用数组会导致链接器引发以下错误：

```
 error: undefined reference to `_imp__ImplicitDLLName' 
```

我知道可能由此产生的名称修改和兼容性问题，但我试图通过使用禁用它来解决它

```
extern "C"{} 
```

通过从客户端返回的错误`s linker I can tell that I have failed to disable it, because it reports that reference on _imp__ImplicitDLLName wasn`t 发现，所以我猜它是 ImplicitDLLName 仅用额外的符号修饰（名称修饰）。
我想知道这个问题可能是由于不同编译器中数组的不同实现或内存中数组的对齐方式引起的？
**问题：如何解决这个二进制兼容性问题？**

# regex - Notepad++ 正则表达式 -> 新行

> ID：15202737
> 
> 赞同：6
> 
> 时间：2013-03-04T13:32:03.730
> 
> 标签：regex, notepad++

我使用记事本++，我需要删除所有以“abc”开头的行。

注意，我不需要用空行替换以“abc”开头的行，但我需要完全删除这些行。

我该如何继续（我想使用正则表达式）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T13:39:24.183

尝试更换

```
^abc.*(\r?\n)? 
```

和

```
nothing 
```

`^`表示一行的开始。

`.`表示通配符。

`.*`表示零个或多个通配符。

`x?`手段`x`是可选的。

`\r?\n`涵盖（通常是`\r\n`Windows）和`\n`（通常是 Unix），但必须是可选的以涵盖最后一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T13:41:00.797

搜索这个正则表达式

```
^abc.*\r\n 
```

什么都换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:38:07.287

`\nabc.*`在“查找和替换”->“替换”中尝试正则表达式将
“替换为”字段留空。

编辑：这不适用于第一个喜欢（因为 '\n' 表示“新行”）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T13:40:56.367

在 Notepad++ 中对正则表达式进行更多搜索后，我发现换行符不是`\n`我所期望的（Windows），而是`\n\r`.

所以，我的正则表达式替换表达式应该是：
**查找：** `abc.*\r\n`
**替换为：（**无，空字段）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T13:45:08.483

按 `Ctrl`+`H`调出`Replace`窗口。放

```
^abc.*(\r?\n)? 
```

中`Find what`并`Replace with`留空。选择`Reqular expression`并点击`Replace All`。

这个正则表达式处理所有边缘情况：

*   当文件的第一行以`abc`
*   当文件的最后一行以开头`abc`并且文件末尾没有新行时。

# jsp - org.apache.jasper.JasperException：处理 JSP 页面时发生异常

> ID：15202740
> 
> 赞同：1
> 
> 时间：2013-03-04T13:32:06.027
> 
> 标签：jsp, nullpointerexception

我使用 tomcat server 7 和 Mysql 在 jelastic 上部署了我的 jsp Web 应用程序。我的代码在我的本地服务器上运行良好，但是在我将它部署到 jelastic 上之后，它给出了以下错误：

> org.apache.jasper.JasperException：在第 11 行处理 JSP 页面 /loginService.jsp 时发生异常
> 
> 8：字符串错误=空；9: String sql = "SELECT * FROM login_details WHERE user_id='"+user_id+"'"; 10:11:ResultSet 结果 = statement.executeQuery(sql); 12: if(result.next()){ 13: if(result.getString("password").contentEquals(password)){ 14: session.setAttribute("user_session_id", user_id);
> 
> 堆栈跟踪：org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:568) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470) org.apache.jasper.servlet.JspServlet.serviceJspFile( JspServlet.java:390) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334) javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 根本原因
> 
> java.lang.NullPointerException org.apache.jsp.loginService_jsp._jspService(loginService_jsp.java:91) org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) javax.servlet.http.HttpServlet.service(HttpServlet .java:728) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390) org.apache.jasper.servlet.JspServlet .service(JspServlet.java:334) javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

# javascript - jQuery addClass() removeClass() 方法

> ID：15202745
> 
> 赞同：1
> 
> 时间：2013-03-04T13:32:16.700
> 
> 标签：javascript, jquery

我在使用 jQuery 方法 .addClass() .removeClass 时遇到问题

JsFiddle：http: [//jsfiddle.net/HEM7Q/4/](http://jsfiddle.net/HEM7Q/4/)

```
$(document).ready(function () {
  $(".button").click(function(e) {
  $(".position1").animate({left:"400px"},2000, function(e){
     $(".position1").addClass("position2").removeClass("position1");
     })
  });
}); 
```

看，最初 css.left 是 20 px（因为它在类 .position1 中定义）。现在，我为 div 设置动画，直到它的左边变成 400px。动画完成后，我addClass position2（左边是50px）和removeClass position1。

那么 div 不应该在动画完成后回到左边 == 50 px 吗？为什么它没有发生，它的正确代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:34:54.847

我会说该`animate`方法正在修改内联样式以获得所需的效果，即使动画完成（除非您主动还原），该效果仍然存在，这优先于您定义的样式类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:35:51.627

因为内联样式比外部样式具有更高的优先级。您可能希望将您的`left`属性更改`.position2`为`left: 10px !imporant`以强制使用属性值。

[http://jsfiddle.net/HEM7Q/6/](http://jsfiddle.net/HEM7Q/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:38:27.390

您需要`left`从样式中删除内联，因为内联样式优先于 CSS 类：

```
$(".position1").animate({left:"400px"},2000, function(e){
    $(".position1").css("left","");  //Removing 'left' which was added by animation

    $(".position1").addClass("position2").removeClass("position1");
}) 
```

[演示](http://jsfiddle.net/HEM7Q/9/)

# visual-studio-2010 - 使用opencv进行阈值处理

> ID：15202746
> 
> 赞同：2
> 
> 时间：2013-03-04T13:32:17.633
> 
> 标签：visual-studio-2010, opencv

我正在使用 opencv 库用 Visual C++ 编写代码。我需要用一条明显的线对一些不同的图像进行阈值处理（更清晰），但我遇到了一些问题，因为每个图像中的照明都会发生变化，而且我使用了一个固定的阈值，所以这非常困难。有人知道opencv的功能能够面对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:07:08.233

采用 ：`threshold(imageIn, imageOut, 100, 255, CV_THRESH_OTSU);`

OTSU 方法是 Matlab 中使用的一种方法，它适应图像的直方图并取最佳值将其分成两个不同的 bin。不要担心“100”值，OTSU 会覆盖它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T14:02:10.023

是的，试试 AdaptiveThreshold。对于实际阈值参数，选择一个*负数。* 祝你好运！

# python - 如何在主管中使用 virtualenvwrapper？

> ID：15202760
> 
> 赞同：25
> 
> 时间：2013-03-04T13:33:31.410
> 
> 标签：python, deployment, virtualenv, supervisord, virtualenvwrapper

在我开发和测试我的项目时，我曾经使用 virtualenvwrapper 来管理环境并运行它：

```
workon myproject
python myproject.py 
```

当然，一旦我在正确的 virtualenv 中，我就使用了正确版本的 Python 和其他相应的库来运行我的项目。

现在，我想使用 Supervisord 来管理准备好部署的同一个项目。问题是在执行脚本之前告诉 Supervisord 激活正确的 virtualenv 的正确方法是什么？我是否需要编写一个单独的 bash 脚本来执行此操作，并在 Supervisord 配置文件的命令字段中调用该脚本？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-04T14:09:26.377

从命令行使用 virtualenv 的一种方法是使用位于 virtualenv 内部的 python 可执行文件。

对我来说，我在`.virtualenvs`目录中有我的虚拟环境。例如

`/home/ubuntu/.virtualenvs/yourenv/bin/python`

没有必要`workon`

对于`supervisor.conf`管理龙卷风应用程序，我这样做：

```
command=/home/ubuntu/.virtualenvs/myapp/bin/python /usr/share/nginx/www/myapp/application.py --port=%(process_num)s 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-02-05T16:21:36.787

将您的 virtualenv/bin 路径添加到您`supervisord.conf`的 's `environment`：

```
[program:myproj-uwsgi]
process_name=myproj-uwsgi
command=/home/myuser/.virtualenvs/myproj/bin/uwsgi
    --chdir /home/myuser/projects/myproj
    -w myproj:app
environment=PATH="/home/myuser/.virtualenvs/myproj/bin:%(ENV_PATH)s"
user=myuser
group=myuser
killasgroup=true
startsecs=5
stopwaitsecs=10 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-11T16:51:11.363

首轮

```
$ workon myproject
$ dirname `which python`
/home/username/.virtualenvs/myproject/bin 
```

添加以下内容

```
environment=PATH="/home/username/.virtualenvs/myproject/bin" 
```

到 [program:blabla] 部分下的相关 supervisord.conf。

# c# - 获取我们收到 UDP 多播请求的 IpAddress

> ID：15202761
> 
> 赞同：2
> 
> 时间：2013-03-04T13:33:31.793
> 
> 标签：c#, networking, network-programming, multicast, udpclient

我正在使用一个`UdpClient`从多播组中读取数据。

它是这样配置的：

```
m_udpClientReceiver = new UdpClient();
m_receivingEndPoint = new IPEndPoint(IPAddress.Any, m_port);
m_udpClientReceiver.ExclusiveAddressUse = false;
m_udpClientReceiver.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
m_udpClientReceiver.ExclusiveAddressUse = false;
m_udpClientReceiver.Client.Bind(m_receivingEndPoint);
m_udpClientReceiver.JoinMulticastGroup(m_multicastAddress, 255); 
```

我读了它：

```
Byte[] data = m_udpClientReceiver.Receive(ref m_receivingEndPoint); 
```

我有几个网卡（两个 LAN，一个 wifi），绑定在不同的子网上。我需要知道在哪个网卡（实际上是哪个 ip）上收到了请求。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:53:13.173

作为替代方案，您是否考虑过不加入多播组？您可以使用标准的 UDPClient 类轻松地发送和接收多播数据包。IE

```
UdpClient.Send(byte[] dgram, int bytes, IPEndPoint endPoint) 
```

哪里`endPoint = new IPEndPoint(IPAddress.Broadcast, <port number>)`。并且在接收时仍在使用：

```
Byte[] data = m_udpClientReceiver.Receive(ref m_receivingEndPoint); 
```

m_receivingEndPoint 现在在哪里正确设置？我刚刚对此进行了测试，并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:21:34.567

我终于使用[BeginReceive](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.beginreceive.aspx)方法（异步），并且我将其绑定的 ip 作为上下文提供

# javascript - 更改日期选择器月份后未触发 Jquery 工具提示 ON 事件

> ID：15202763
> 
> 赞同：0
> 
> 时间：2013-03-04T13:33:40.487
> 
> 标签：javascript, jquery, jquery-ui, events

我已经向 jquery datepicker 插件添加了一些基本的工具提示，但是在我更改月份之后，事件不再绑定到它们的选择器。如何在月份更改时重新绑定这些事件？

我正在使用的精简版如下。

```
<script>

$(function() {
    $("#scene").datepicker();
    var evtd = { 
        March312013: {title: "Ladies Night"}, 
        March302013: {title: "Lilly Allen Tribute Band"}
    }

    $(".ui-state-default").on("mouseenter", function(e) {
        var month = $(".ui-datepicker-month").text();
        var year = $(".ui-datepicker-year").text();
        var day = $(this).text();
        ix = month + day + year;
        if(typeof(evtd[ix])!="undefined")
        {
            var html = '<h5>'+evtd[ix]["title"]+'</h5>';
            var eleft = $(this).position().left;
            var etop = $(this).position().top;
            $("#tt").html(html).css({
                left:  Math.max(eleft-($(this).width()/2),0),
                top:   Math.max(etop+$(this).height()+7,0)
            }).show();
        }
    }).mouseleave(function(){
        $("#tt").hide();
    });
});

</script>
<style>
.nm{
    margin:0;
}

#tt{
    max-width:250px;
    position:absolute;
    border:1px solid black;
    background-color:#E9EAEE;
    padding:8px;
    display:none;
    -webkit-border-radius: 6px;
    -moz-border-radius: 6px;
    border-radius: 6px;
    font-family:Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;
}
</style>

<div id="scene">MobeScene Events</div>
<div id="tt"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:37:04.343

尝试像这样绑定您的事件：

```
$(document).on("mouseenter",".ui-state-default",function(e){
   //Your stuff
}); 
```

请参阅[此答案](https://stackoverflow.com/questions/8021436/jquery-1-7-turning-live-into-on)以获取更多说明！

# c# - 如何在反射中使用索引属性的 SetValue？

> ID：15202769
> 
> 赞同：0
> 
> 时间：2013-03-04T13:33:52.857
> 
> 标签：c#, .net, generics, reflection

我有一个 C# Converter 方法，它使用反射来转换通用列表。

当我尝试调用 Item 属性的 SetValue 方法时，会出现问题，它会引发以下内部异常（ArgumentOutOfRangeException）：

> 指数超出范围。必须是非负数且小于集合的大小。参数名称：索引。

这是我的代码：

```
internal class Program
{
    private static void Main()
    {
        List<ClassA> classA = new List<ClassA>();
        classA.Add(new ClassA { Data = "value1" });
        classA.Add(new ClassA { Data = "value2" });

        List<ClassB> classB = Converter<List<ClassA>, List<ClassB>>(classA);
    }

    public static TOut Converter<TIn, TOut>(TIn request)
    {
        var response = Activator.CreateInstance<TOut>();
        PropertyInfo propertyA = typeof(TIn).GetProperty("Item");
        PropertyInfo propertyB = typeof(TOut).GetProperty("Item");

        int count = (int)typeof(TIn).GetProperty("Count").GetValue(request);
        for (int i = 0; i < count; i++)
        {
            var value = propertyA.GetValue(request, new object[] { i });
            var b = CreateBFromA(propertyB, propertyA, value);
            propertyB.SetValue(response, b, new object[] { i });
        }

        return response;
    }

    private static object CreateBFromA(PropertyInfo propertyB, PropertyInfo propertyA, object value)
    {
        var b = Activator.CreateInstance(propertyB.PropertyType);
        object o = propertyA.PropertyType.GetProperty("Data").GetValue(value);
        propertyB.PropertyType.GetProperty("Data").SetValue(b, o);
        return b;
    }
}

internal class ClassA
{
    public string Data { get; set; }
}

internal class ClassB
{
    public string Data { get; set; }

    public object Other { get; set; }
} 
```

这是一个更大的泛型方法的小示例代码（我需要使用反射），因此您可以尝试运行它以重新生成异常。

如何使用 SetValue 方法避免此异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:04:26.820

这是我的方法：

```
public static TCollectionOut ConvertCollection<TCollectionIn, TCollectionOut, TIn, TOut>(TCollectionIn input)
        where TCollectionIn : IEnumerable<TIn>
        where TCollectionOut : ICollection<TOut>, new()
        where TOut : new()
    {
        var res = new TCollectionOut();

        foreach (dynamic item in input)
        {
            dynamic o = new TOut();
            ConvertItem(item, o);
            res.Add(o);
        }
        return res;
    }

    public static TCollectionOut ConvertCollectionMoreDynamic<TCollectionIn, TCollectionOut>(TCollectionIn input)
        where TCollectionIn : IEnumerable

    {
        dynamic res = Activator.CreateInstance(typeof (TCollectionOut));

        var oType = typeof (TCollectionOut).GetMethod("Add").GetParameters().Last().ParameterType;

        foreach (dynamic item in input)
        {
            dynamic o = Activator.CreateInstance(oType);
            ConvertItem(item, o);
            res.Add(o);
        }
        return res;
    }

    public static void ConvertItem(ClassA input, ClassB output)
    {
        output.Data = input.Data;
    } 
```

如果您想支持更多类型，只需创建具有正确重载的 ConvertItem 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:12:20.697

这是因为您试图将索引传递给未索引的属性（数据）。

如果您发布 ClassA 代码，我可以尝试您的帮助。无论如何，您可以使用 LINQ 来执行这种转换。它更快（编写和执行）并且类型安全。

# java - 安卓。onEditorAction 从未调用过

> ID：15202771
> 
> 赞同：7
> 
> 时间：2013-03-04T13:33:54.940
> 
> 标签：java, android, xml, android-edittext

我试图捕捉从屏幕上移除键盘的事件，我正在使用`OnEditorActionListener`类。但是，它的`onEditorAction`方法永远不会被调用。

这是我在 XML 中的 EditText：

```
<EditText
    android:id="@+id/editTextSearch"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="20dp"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="50dp"
    android:layout_weight="0.05"
    android:background="@color/white"
    android:ems="10">
</EditText> 
```

这就是我在 java 文件中使用它的方式：

```
private void createTextEdit()
{
    EditText searchTextField = (EditText)findViewById(R.id.editTextSearch);
    searchTextField.addTextChangedListener(new TextWatcher()
    {
        public void afterTextChanged(Editable s)
        {
           System.out.println("AFTER TEXT CHANGED");                                                             
        }
        public void beforeTextChanged(CharSequence s,
        int start, int count, int after)
        {
             System.out.println("BEFORE TEXT CHANGED " + s);
        }

        public void onTextChanged(CharSequence s,
                int start, int before, int count)
        {
            System.out.println(s);
        }
    });

    searchTextField.setOnEditorActionListener(new OnEditorActionListener()
    {
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event)
        {

            System.out.println("ACTION ID " + actionId);//NEVER CALLED

            if(actionId == EditorInfo.IME_ACTION_DONE)
            {
                System.out.println("ACTION DONE!!!!!!!!!!");
                return true;
            }

            return false;
        }
    });

    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.showSoftInput(searchTextField, InputMethodManager.SHOW_IMPLICIT);
} 
```

无论我`searchTextField`是开始编辑还是完成它，都不会触发所需的方法。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-13T15:29:07.563

在 Nexus 7 上也有同样的问题。

我以为是imeOptions，但不是。

如果我设置它可以在我的平板电脑中使用`android:inputType="text"`。

我假设它适用于其他 inputType。

我认为这是 Nexus 上的一个错误。

# jquery - jquery json 对象

> ID：15202772
> 
> 赞同：1
> 
> 时间：2013-03-04T13:33:56.840
> 
> 标签：jquery, json

我有一个 jquery json 对象，例如：

```
{"meta":{"limit":20,"next":null,"offset":0,"previous":null,"total_count":2},
"objects":[
{"body":"Body 1","date":"2013-01-15},
{"body":"Body 2","date":"2013-02-25}
 ]} 
```

我想显示循环数据：

```
body 1, date
body 2, date 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:39:08.227

试试这个

```
var data= "yourjson";
$.each(data.objects,function(i,v){ 
    alert(v.body);
      alert(v.date);
}); 
```

不得不纠正 json 中的一些问题 .. 就像丢失了`"`......所以请检查小提琴。

[在这里摆弄](http://jsfiddle.net/bipen/UCUJY/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T13:40:14.860

首先，您的 JSON 无效。日期后缺少括号。这是一个有效的 JSON：

```
var json = {"meta":{"limit":20,"next":null,"offset":0,"previous":null,"total_count":2},
"objects":[
{"body":"Body 1","date":"2013-01-15"},
{"body":"Body 2","date":"2013-02-25"}
]}; 
```

请注意 '2013-01-15' 和 '2013-02-25' 之后的 " 符号。

[您可以使用JQuery 的 .each()](http://api.jquery.com/jQuery.each/)显示“正文”和“日期” ：

```
$.each(json.objects, function (index, obj) {
  console.log(obj.body + " " + obj.date);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T13:41:16.753

您需要先修复您的 json，因为它是无效的，因为您没有使用 "

```
{
    "meta": {
        "limit": 20,
        "next": null,
        "offset": 0,
        "previous": null,
        "total_count": 2
    },
    "objects": [
        {
            "body": "Body 1",
            "date": "2013-01-15"
        },
        {
            "body": "Body2",
            "date": "2013-02-25"
        }
    ]
} 
```

那么这样的事情应该可以工作

```
 $.each(data.objects[0],function(i,v){ 
        alert(v.body+" - "+v.date);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T13:43:04.757

```
var data = {"meta":{"limit":20,"next":null,"offset":0,"previous":null,"total_count":2},
    "objects":[
        {"body":"Body 1","date":"2013-01-15"},
        {"body":"Body 2","date":"2013-02-25"}
 ]};

for(var i = 0; i < data.objects.length; i++){
    alert(data.objects[i].body);
    alert(data.objects[i].date);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T13:40:48.243

JSON 对象就像键值对。

假设整个 JSON 对象在变量中，`data`然后要读取内容，请执行以下操作。

`meta`是一个`object`包含不同的数据，所以要阅读`limit`，`next`其他的你必须使用`data.meta.limit`等等。

现在`objects`是`array`其中有不同对象的类型。

所以要读取`body`，执行`data.objects[0].body`等等。

# ruby-on-rails - 在 POST/PUT 到数据库之前将时间 (MM:SS) 转换为浮点数（秒）

> ID：15202775
> 
> 赞同：0
> 
> 时间：2013-03-04T13:34:01.797
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我希望用户能够选择或输入时间（例如：“您早上刷牙多长时间？”）并且在“创建”或“更新”操作中，我想转换时间在发布/放入数据库之前的几秒钟内浮动。

我现在有一个模块中的方法（试图学习如何使用模块），但我不确定它是否适合这种情况......

浮动时间查看（作品）

```
<%= MyModule.float_to_time(task.task_length) %> 
```

**模块**

```
module MyModule

  def self.float_to_time(secs)       # task.task_length (view)
     ...
     ...
  end

  def self.time_to_float(tim)        # :task_length (controller)
     m = tim.strftime("%M").to_f
     s = tim.strftime("%S.%2N").to_f
     t = ((m*60) + s)
     return t.round(2)
  end

end 
```

**控制器**

```
def create
  # "time_to_float" (Convert task_time to seconds float)
  # Create new task after conversion
  @task = Task.new(params[:task])

  respond_to do |format|
    if @task.save
      format.html { redirect_to @task, notice: 'Task was successfully created.' }
      format.json { render json: @event, status: :created, location: @task }
    else
      format.html { render action: "new" }
      format.json { render json: @task.errors, status: :unprocessable_entity }
    end
  end
end 
```

* * *

如何在发布（或放置）到数据库之前进行转换？

另外，我应该将这些方法移到 application_controller，还是我的模块可以？

- 谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:11:25.467

对我来说，这似乎是模型的工作，而不是控制器的工作。该模型应该关注数据的存储方式和适当的数据类型转换。

由于您正在尝试学习如何使用模块，您可以将这些方法作为实例方法保存在模块中并将它们混合到您的模型类中：

```
module TimeConversions
  def time_to_float(time)
    # ...
  end

  def float_to_time(seconds)
    # ...
  end
end

class Task
  extend TimeConversions
  before_save :convert_length

  # ...

private

  def convert_length
    self.length = self.class.time_to_float(length) if length.to_s.include?(':')
  end
end 
```

然后你仍然可以`float_to_time`在视图中使用：

```
<%= Task.float_to_time(task.length) %> 
```

你可能会在你的`before_save`过滤器中做一些更复杂的事情，但这也许会给你一些想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:11:56.513

我认为您正在寻找[ActiveRecord Callback](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)。

在这种情况下，您可能会遇到以下情况：

```
class Task < ActiveRecord::Base
  before_save :convert_task_length_to_float

  def convert_task_length_to_float
    # do the conversion. set `self.task_float =` to update the value that will be saved
  end
end 
```

`before_save`回调将在保存到数据库之前调用`Task`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T14:14:15.040

此外，您可以覆盖 task_length 访问器的 setter 和 getter。像这样（在任务模型中）：

```
class Task < ActiveRecord::Base

  def task_length=(tim)
    m = tim.strftime("%M").to_f
    s = tim.strftime("%S.%2N").to_f
    t = ((m*60) + s)
    write_attribute(:task_length, t.round(2))
  end

  def task_length_to_time
    tl = read_attribute(:task_length)
    # ... float-to-time stuff
  end
end 
```

然后在视图中使用它`<%= task.task_length_to_time %>`。`task.task_length`如果你需要它在浮动中使用。

# delphi - 将列表视图中的数据插入数据库delphi

> ID：15202777
> 
> 赞同：0
> 
> 时间：2013-03-04T13:34:07.467
> 
> 标签：delphi, delphi-xe, delphi-xe3

我正在搜索如何将列表视图中的数据保存到数据库中的示例。

我有一个包含一些数据的列表视图：

[![在此处输入图像描述](../Images/023d78359d1446cc310c5ea45f9899f8.png)](https://i.stack.imgur.com/2AEht.jpg)

和数据库mysql：

ID、姓名、职位、销售、日期

有人可以给我举个例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:33:29.437

不知道 TUNIQuery 是否有 ExecSql 方法，但这将适用于 TADOQuery，在我的情况下，ListView.ViewStyle 设置为 vsReport，它包含 4 个列。

我认为如果您使用 StringGrid 或 Dbgrid 会更容易处理

```
procedure TForm1.PostData;
const
  SQLCMD = 'INSERT INTO MYTABLE (NAME, POSITION, SALL, DATE) VALUES '+
  '(%s, %s, %s, %s)';
var
//  IL: TListItem;
  I, J, ItemsCount, SubItemsCount: integer;
  LineItem: array of string;
begin

  ItemsCount:= ListView1.Items.Count;
  for I := 0 to ItemsCount - 1 do // looping thru the items
  begin
    SubItemsCount:= ListView1.Items[I].SubItems.count;
    SetLength(LineItem, SubItemsCount + 1);
    LineItem[0]:= ListView1.Items[0].Caption; // the first item caption (first col)
    for J := 0 to SubItemsCount - 1 do   // looping thru the subitems of each line
      LineItem[J+1]:= ListView1.Items[I].SubItems.Strings[J];
//
//  just to see the sql command
//    ShowMessage(
//    Format(SQLCMD, [ QuotedStr(LineItem[0]),
//                     QuotedStr(LineItem[1]),
//                     LineItem[2], //int field no need to quote the parameter
//                     QuotedStr(LineItem[3])]
//    ));

//
    with TAdoQuery.Create(nil) do
    try
      ConnectionString:= 'Your Connection String';
      SQL.Text:=
      Format(SQLCMD, [QuotedStr(LineItem[0]),
                      QuotedStr(LineItem[1]),
                      LineItem[2], //int field no need to quote the parameter
                      QuotedStr(LineItem[3]));
      ExecSql; // you might handel execsql to know the row was affected, also not sure if unidac have the same method
    finally
      Free;
    end;

    SetLength(LineItem, 0);

  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:23:57.723

以下解决方案使用 TSQLQuery，这意味着我正在连接到 Firebird。我确信还有其他查询组件会为您提供相同的结果。

```
 with dstlist do  // this is the list view
  for i:= 1 to items.count do
   with qInsert do   // this is the query component
    begin
     dstlist.itemindex:= i - 1;
     lvitem:= dstlist.selected;   // select the correct node
     close;
     parambyname ('p1').asstring:= lvitem.caption;  // name
     parambyname ('p2').asstring:= lvitem.subitems[0];  // position
     parambyname ('p3').asinteger:= strtoint (lvitem.subitems[1]);  // sall
     parambyname ('p4').asdate:= strtodate (lvitem.subitems[2]);
     execsql;
    end; 
```

查询本身将类似于

```
insert into table (name, position, sall, adate)
values (:p1, :p2, :p3, :p4) 
```

# java - 如何设置复选标记不可见

> ID：15202778
> 
> 赞同：-1
> 
> 时间：2013-03-04T13:34:10.097
> 
> 标签：java, android

我想在类代码而不是 xml 文件中的复选框按钮中隐藏复选标记。因为如果选中 true 设置背景，我使用两个背景 .. 如果 false 设置背景“checkbox.png”

公共类 ListActivity 扩展 Activity {

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list);

    AbsoluteLayout ff = (AbsoluteLayout) this.findViewById(R.id.AbsoluteLayout1);

    ScrollView myScrollView =  (ScrollView) findViewById(R.id.scrollView1);
    TableLayout tl =(TableLayout) findViewById(R.id.h103);
    TableRow tr = (TableRow) findViewById(R.id.TableRow18);
    CheckBox cb =  (CheckBox) findViewById(R.id.CheckBox18);
    TextView tv = (TextView) findViewById(R.id.TextView34);

//  ScrollView myScrollView1 = new  ScrollView(this);
    TableLayout tl1 =new TableLayout(this);
    TableRow tr1 = new  TableRow(this);
    final CheckBox buttonView = new CheckBox(this) ;
    TextView tv1 = new  TextView(this);

    /*myScrollView.getLayoutParams();
    ViewGroup.LayoutParams iv_params_b = myScrollView1.getLayoutParams();
    myScrollView1.setLayoutParams(iv_params_b);*/

    //buttonView.setVisibility(1);
    buttonView.setBackground(getResources().getDrawable(R.drawable.checkbox));
    //buttonView.setVisibility(View.GONE);
    buttonView.setFocusable(false);

    buttonView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if(((CheckBox) v).isChecked())
            {           

                //buttonView.setChecked(false);
                buttonView.setBackground(getResources().getDrawable(R.drawable.star));

            }else
            {
                //buttonView.setChecked(true);
                buttonView.setBackground(getResources().getDrawable(R.drawable.checkbox));

            } 

        }
    });

     /* if(isChecked)
        {               
            buttonView.setBackground(getResources().getDrawable(R.drawable.star));
        }else
        {
            buttonView.setBackground(getResources().getDrawable(R.drawable.checkbox));
        }   */

    ViewGroup.LayoutParams iv_params_b = tl.getLayoutParams();
    tl1.setLayoutParams(iv_params_b);

    ViewGroup.LayoutParams iv_params_b1 = tr.getLayoutParams();
    tr1.setLayoutParams(iv_params_b1);

    ViewGroup.LayoutParams iv_params_b2 = cb.getLayoutParams();
    buttonView.setLayoutParams(iv_params_b2);

    ViewGroup.LayoutParams iv_params_b3 = tv.getLayoutParams();
    tv1.setLayoutParams(iv_params_b3);

    tl.addView(tr1);
    tr1.addView(buttonView);

  }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:38:00.990

您可能应该使用框架的常量，例如[View.Gone](http://developer.android.com/reference/android/view/View.html#GONE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:42:28.080

将其保存为可绘制文件夹中的 xml。

```
<?xml version="1.0" encoding="utf-8"?>
<selector
  xmlns:android="http://schemas.android.com/apk/res/android">
  <item
     android:state_checked="true" android:state_focused="true"
  android:drawable="@drawable/checked"/>
  <item
    android:state_checked="false" android:state_focused="false" 
     android:drawable="@drawable/notchecked" 
     />
</selector> 
```

并将其设置为您的复选框`andriod:button="@drawable/yourxmlfile.`

您不需要以编程方式更改图像。

希望这会帮助你。

**checkbox.setVisibility(View.INVISIBLE)**这是您所要求的答案。

**编辑**

```
final CheckBox checkBox1=new CheckBox(MainActivity.this);

checkBox1.setOnCheckedChangeListener(new OnCheckedChangeListener() {

    @Override
    public void onCheckedChanged(CompoundButton paramCompoundButton,
            boolean paramBoolean) {
        // TODO Auto-generated method stub

        if (paramBoolean) {

            checkBox1.setButtonDrawable(R.drawable.ic_launcher);
            //here you can change 
        }
        else
        {
            checkBox1.setBackgroundColor(Color.BLUE);
        }
    }
}); 
```

查看代码...

# javascript - 如何创建矩形，用鼠标拖动它的角来创建四边形，并用图像填充它

> ID：15202785
> 
> 赞同：0
> 
> 时间：2013-03-04T13:34:35.183
> 
> 标签：javascript, html, image-processing, transformation

我有一个朋友，他要建一个网站，需求是这样的：

他希望用户能够绘制四边形（无论是逐点绘制还是创建矩形，然后通过拖动来变换每个角），然后用任何图像填充它。图像必须包含与绘制四边形相同的变换。

在 HTML5 上可以吗？也许一些带有库的JS？

感谢您的任何帮助。

注意：这是我所说的一个[例子..](https://lh3.googleusercontent.com/-pxpBjwuM6-Q/UTSmsHNS7YI/AAAAAAAABlM/PsoNEnvlo74/w497-h373/image-transformation.jpg)

PS - 找到解决方案 - [http://www.html5.jp/test/perspective_canvas/demo1_en.html](http://www.html5.jp/test/perspective_canvas/demo1_en.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:43:33.180

看看[https://github.com/edankwan/PerspectiveTransform.js](https://github.com/edankwan/PerspectiveTransform.js)。我认为这正是您所需要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:41:45.233

对的，这是可能的。是的，您将需要使用一些 JavaScript 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:48:50.497

这是一个很好的起点（接近页面末尾）：

[http://www.w3schools.com/html/html5_canvas.asp](http://www.w3schools.com/html/html5_canvas.asp)

有点不清楚他到底想做什么。我不知道有任何方法可以裁剪或修改（实际更改）仅使用 HTML5 和 Javascript 的图像。但仅出于显示目的，您可以使用 HTML5 和 JS 使其在网站上看起来不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-17T01:08:28.810

您正在寻找的是所谓的[射影变换](http://en.wikipedia.org/wiki/Projective_transformation)。

[![在此处输入图像描述](../Images/07adac9228eff7efb749275ba25d9c9e.png)](https://i.stack.imgur.com/eoLVR.png)

> 点 A、B、C、D 和 A'、B'、C'、D' 通过透视关系关联，透视关系是射影变换。

Martin von Gagern 已经在这里给出了很好的解释：[https ://math.stackexchange.com/a/339033/332080](https://math.stackexchange.com/a/339033/332080)

基本上，您只需要这些辅助函数和一点时间来阅读 Martin 已经写过的内容：

*   `Mat3#transform`
*   `Mat3#adjugate`
*   `Mat3#multiply`

# c# - ASP.Net MVC 发送没有内容大小的文件。传输完成前浏览器不会提示保存对话框

> ID：15202789
> 
> 赞同：1
> 
> 时间：2013-03-04T13:34:41.630
> 
> 标签：c#, asp.net, asp.net-mvc

我正在写文件拉链。

我无法计算未来存档的正确文件大小，因此可以指定 Content-Length。

在两个 Thread.Sleep() 方法返回之前，此代码不会提示保存文件对话框。

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult Download()
    {
        return new DelayedUnsepcifiedLengthZipArchiveResult();
    }
}

public class DelayedUnsepcifiedLengthZipArchiveResult : ActionResult
{
    public override void ExecuteResult(ControllerContext context)
    {
        context.HttpContext.Response.ContentType = "application/zip";
        context.HttpContext.Response.CacheControl = "private";
        context.HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        context.HttpContext.Response.AddHeader("content-disposition", string.Format("attachment; filename=\"{0}\"", "test.zip"));
        context.HttpContext.Response.Flush();

        Thread.Sleep(10000);

        context.HttpContext.Response.Write("hello world");
        context.HttpContext.Response.Flush();

        Thread.Sleep(10000);

        context.HttpContext.Response.Write("hello world2");
        context.HttpContext.Response.Flush();

        context.HttpContext.Response.End();
    }
} 
```

在 Chrome 和 IE 10 中，20 秒后我得到了保存对话框......

这是一种解决方法吗？

更新：

菲德勒发疯了。不确定，也许 Fidler 会自动添加 Conent-Length。这是我从提琴手那里得到的原始数据

在开始时

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Transfer-Encoding: chunked
Content-Type: application/zip
Expires: -1
Server: Microsoft-IIS/8.0
X-AspNetMvc-Version: 4.0
content-disposition: attachment; filename="test.zip"
X-AspNet-Version: 4.0.30319
X-SourceFiles: =?UTF-8?B?RDpcV29ya1xBY2FkZW15XEhpZ2hMb2FkQ2hhblxEb3dubG9hZGVyXGhvbWVcZG93bmxvYWQ=?=
X-Powered-By: ASP.NET
Date: Mon, 04 Mar 2013 13:39:24 GMT 
```

下载完成后：

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Content-Type: application/zip
Expires: -1
Server: Microsoft-IIS/8.0
X-AspNetMvc-Version: 4.0
content-disposition: attachment; filename="test.zip"
X-AspNet-Version: 4.0.30319
X-SourceFiles: =?UTF-8?B?RDpcV29ya1xBY2FkZW15XEhpZ2hMb2FkQ2hhblxEb3dubG9hZGVyXGhvbWVcZG93bmxvYWQ=?=
X-Powered-By: ASP.NET
Date: Mon, 04 Mar 2013 13:39:24 GMT
Content-Length: 23

hello worldhello world2 
```

更新 2：

```
fiddler coused such veird behaviour, problem closed. Turn off your debug proxies bros... 
```

# http - 如何在没有网络延迟的情况下计算 HTTP 请求处理时间？

> ID：15202790
> 
> 赞同：7
> 
> 时间：2013-03-04T13:34:42.070
> 
> 标签：http, tcp, latency

由于服务器和客户端之间的地理距离，网络延迟可能会有很大差异。所以我想得到“纯”的req。没有网络延迟的服务处理时间。

我想将网络延迟作为 TCP 连接时间。据我了解，这个时间很大程度上取决于网络。

主要思想是计算：

*   TCP连接时间，
*   TCP第一个数据包接收时间，
*   获取“纯”服务时间 = TCP 第一个数据包接收（等待时间）- TCP 连接。

我将 TCP 连接除以 2，因为实际上有 2 个请求响应（3 次握手）。

我有两个问题：

1.  我应该计算 TCP 所有数据包的接收时间而不是只计算第一个数据包吗？
2.  这种方法一般可以吗？

PS：作为工具，我使用 Erlang 的 gen_tcp。我可以显示代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:26:44.657

如果有的话，我猜“纯”服务时间 = TCP 第一个数据包接收 - TCP 连接.. 你已经写了其他方式。

您的第一个问题的一个可能答案是，理想情况下，您应该通过考虑许多数据包的纯服务时间而不仅仅是第一个数据包来计算至少某种平均值。

理想情况下，它还可以有最坏情况、平均情况、最佳情况服务时间。

要回答第二个问题，我们需要您为什么只需要纯服务时间。我的意思是，既然它是一个网络应用程序，网络延迟（连接时间等......）也应该包含在“响应时间”中，而不仅仅是纯粹的服务时间。这是我基于给定信息的观点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-06T15:01:17.860

在过去为网络性能监控供应商工作时，我曾研究过类似的问题。恕我直言，在继续之前有一些问题要问：

*   连接时间和延迟：如果您基于网络延迟指标，请注意它考虑了 3 个步骤：客户端发送 TCP/SYN，服务器以 TCP/SYN-ACK 响应，客户端以最终 ACK 响应以设置TCP 连接。这意味着 CT 相当于 1.5 RTT（往返时间）。这验证了您提到的在帐户中执行 TCP 设置过程的前两个步骤。
*   考虑到后来的 TCP 交换：虽然这听起来像是在会话过程中不断评估网络延迟的好主意，但这变得更加棘手。原因如下： 1\. 并非所有数据包都必须得到确认（RFC1122 或[https://en.wikipedia.org/wiki/TCP_delayed_acknowledgment](https://en.wikipedia.org/wiki/TCP_delayed_acknowledgment)），当它发生时会产生错误的测量结果，因此您需要启发式方法来取消这些数据包你的计算。2\. 并非所有系统都将确认数据包视为高优先级任务。这意味着一些高值会污染您的网络延迟数据，并仅反映服务器的负载水平。

因此，如果您只使用第一个（且可靠的）测量，您可能会错过一些网络延迟变化（尤其是在使用持久 TCP 会话的应用程序中）。

# python - gmpy 源代码

> ID：15202796
> 
> 赞同：0
> 
> 时间：2013-03-04T13:34:51.673
> 
> 标签：python, primes, gmp

有什么办法可以查看源代码`gympy`吗？具体来说，`gmpy2.is_prime`.

我尝试了各种链接

*   [https://code.google.com/p/gmpy/source/checkout](https://code.google.com/p/gmpy/source/checkout)
*   [https://code.google.com/p/gmpy/source/browse/#svn%2Ftrunk%2Fsrc](https://code.google.com/p/gmpy/source/browse/#svn%2Ftrunk%2Fsrc)
*   [https://github.com/qsnake/gmpy](https://github.com/qsnake/gmpy)

我在任何地方都找不到它。

我已经下载了 gmpy2，并在我的本地驱动器上进行了检查，但文件扩展名为`.pyd`. 当我打开它（在记事本中）时，以下是我看到的前几行 -

```
MZ       ÿÿ  ¸       @                                   ð   º ´  Í!¸LÍ!This program     cannot be run in DOS mode. 
```

其余的都是胡言乱语。

我想编写一个非常快速的素数检查器，它是迄今为止我遇到的最好的 谁能告诉我如何获得源代码？或者可能链接到其他一些快速素数检查器的源代码（或讨论）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T14:35:47.357

我维护 gmpy 和 gmpy2。@cartman 和 @DJV 已经将您定向到源代码，但我将添加一些评论。

`mpz_probab_prime_p`进行试验分解，然后多次迭代 Miller-Rabin 测试。Miller-Rabin 检验并不能证明一个数是素数，它只是非常擅长证明一个数是合数。如果您将测试重复足够多次，则该数字很可能是素数。在已知的情况下，`mpz_probab_prime_p`当仅完成 12 到 15 次迭代时，报告复合是素数。

一个更有趣的素数测试是 BPSW 测试。没有已知的复合材料被报道为素数，但它推测它们存在。

`gmpy2`还包含几个素数算法，可用作完整测试的构建块。它们基于以下位置的代码：

[http://sourceforge.net/projects/mpzlucas/](http://sourceforge.net/projects/mpzlucas/)

[http://sourceforge.net/projects/mpzprp/](http://sourceforge.net/projects/mpzprp/)

一些有用的链接：

[http://www.trnicely.net/misc/bpsw.html](http://www.trnicely.net/misc/bpsw.html)

[http://www.pseudoprime.com/pseudo.html](http://www.pseudoprime.com/pseudo.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T13:38:41.457

它映射到`Pympz_is_prime`C 函数，请参阅[此链接](https://code.google.com/p/gmpy/source/search?q=Pympz_is_prime&origq=Pympz_is_prime&btnG=Search%20Trunk)以获取函数的源代码。

# variables - Powershell变量未传递到过滤器

> ID：15202797
> 
> 赞同：1
> 
> 时间：2013-03-04T13:34:53.973
> 
> 标签：variables, powershell, filter, foreach

我需要创建将用户从列表（包含用户显示名称）添加到组的脚本我遇到的问题是：当我发出命令时：

```
PS C:\Users\pskwarek> foreach ($a in $csv) {(get-aduser -f "DisplayName -like 'Piotr Skwarek'").samaccountname}
pskwarek
pskwarek 
```

但如果我使用 $a 变量它不起作用：

```
PS C:\Users\pskwarek> foreach ($a in $csv) {(get-aduser -f "DisplayName -like '$a.name'").samaccountname} 
```

下一步我想将它传递给：

```
Add-adgroupMember -identity "groupname" -member samaccountname 
```

但我无法迈出那一步

编辑

```
PS C:\Users\pskwarek> $csv
Name
----
Piotr Skwarek
Renata Skwarek 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:45:24.443

您需要将 $a.name 放在子表达式中：

```
foreach ($a in $csv) 
{
    $user = Get-ADUser -Filter "DisplayName -like '$($a.name)'" 
    Add-ADGroupMember groupname -Members $user
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:47:35.300

```
foreach ($a in $csv) 
{
 $sb = [scriptblock]::create("DisplayName -like '*$a*'")
 (get-aduser -f $sb).SamAccountName
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:47:50.460

尝试这个：

```
foreach ($a in $csv) {(get-aduser -f ("DisplayName -like '{0}'" -f $a.name)).samaccountname} 
```

您不能像以前那样直接在字符串中使用变量的成员。使用字符串格式（我建议的“-f”语法）总是有效的。另一种解决方案是使用临时变量来存储 $a.name

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T13:43:35.183

尝试这个：

```
$csv | % { Add-ADGroupMember -Identity "Groupname" -Member $_.Name  } 
```

# css - Jekyll 和自定义 CSS

> ID：15202799
> 
> 赞同：5
> 
> 时间：2013-03-04T13:35:00.107
> 
> 标签：css, ruby, blogs, jekyll

有没有办法在对入口文件使用降价时在 jekyll 站点中包含自定义 css 标签；例如，当我想突出某个段落时？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T14:07:23.500

Markdown 和 YAML FrontMatter 都内置了这个。但你可以自己制作。

假设您有 foo.css 想要包含在某些帖子中。

在`_posts/2013-02-03-higligting-foo.markdown`：

```
---
css: foo
title: "Drupal Imagecache security vulnarability with DDOS attack explained"
tags: [drupal, imagecache, security, ddos]
--- 
```

然后，在`_layouts/default.html`：

```
{% if post && post.css %}
  <link rel='stylesheet' type='text/css' href='public/assets/{{ post.css }}.css' />
{% endif %} 
```

如果显示了一个帖子，并且该帖子定义了一个变量 css，则使用它来包含带有名称的 css 文件。请注意，这不会测试文件名是否正确、css 文件是否存在等等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T04:52:56.553

如果你的意思是你能给你的 Markdown 文档中的特定段落一个特定的类，你技术上可以，只需按照你想要的方式输入段落标签：

```
My **first** paragraph

<p class="mySpecialClass">My **second** paragraph</p>

My **third** paragraph 
```

Markdown 会将您的`p`标签传递给生成的 HTML。

但是，Markdown 放弃解析您自己键入的标签内的内容，因此您的段落内容不会被视为 Markdown — 例如`**second**`，该段落中的单词不会显示为粗体。

由于这种行为，我为 Jekyll 的帖子切换到 Textile。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T14:06:24.150

您应该能够将 html 标签放在您的降价文档中，并且它应该可以毫无问题地解析它们。例如：

```
#This

is a paragraph <span style="background-color:yellow">with highlighting</span> 
```

# php - 修改抓取网页中包含的 JavaScript 的最佳方法是什么？

> ID：15202803
> 
> 赞同：1
> 
> 时间：2013-03-04T13:35:06.417
> 
> 标签：php, javascript, curl, preg-replace, screen-scraping

在一次站点抓取期间，我发现 JavaScript 中的几个抓取函数需要修改，因为代码使用相对路径：

```
/UserControl/bla 
```

我需要修改它以使用绝对路径：

```
www.domain-name.com/UserControl/bla 
```

问题是，那些写在被抓取页面包含的单独文件中的函数。到目前为止，我只能使用 PHP 函数流式传输该文件`file_get_contents()`，更改我需要使用的部分`preg_replace`，然后将该脚本插入到抓取的 HTML 的头部。我无权修改包含的 JavaScript 文件，因为它位于我无权访问的服务器上。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:42:51.677

在这种情况下，我所做的是声明 JavaScript 全局变量，目标是常量值，然后，我可以从包含的 JS 文件中访问这些变量，例如：

```
<script>
    Globals = {
        absoluteUrlPrefix: "<?= getAbsoluteUrlPrefix(); ?>"
    };
</script>
<script src="myjsfile.js"></script> 
```

上`myjsfile.js`

```
...
var absoluteUrl = Globals.absoluteUrlPrefix+"/UserControl/bla";
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:37:33.703

preg_replace 是一个选项，如果只是为了在你的机器上显示网页，你也可以插入一个基本路径标签： [http ://www.w3schools.com/tags/tag_base.asp](http://www.w3schools.com/tags/tag_base.asp)

# php - PHP 在 XSLT1 中注册了函数，如何用 PHP 返回一个 XML 片段？

> ID：15202805
> 
> 赞同：2
> 
> 时间：2013-03-04T13:35:14.797
> 
> 标签：php, xml, xslt-1.0

我将[PHP 与 XSL](http://php.net/manual/en/book.xsl.php)和[registerPHPfunctions](http://www.php.net/manual/en/xsltprocessor.registerphpfunctions.php)一起使用。

可以返回 PHP 字符串值`xsl:value-of`，但我不知道如何从 PHP 返回 XML 片段。

* * *

XSLT 的示例：

```
 <xsl:template match="table">
     <xsl:copy-of select="php:function('myfunc',.)"/>
 </xsl:template> 
```

PHP 示例：

```
 function myfunc($x) {return '<table><tr><td>ok</td></tr></table>';} 
```

结果不是 XML，而是“lt/gt/amp enconded XML”。在 XSL 中使用`copy-of`or `value-of`，不修改返回行为。是演员阵容问题吗？

PS：即使使用身份功能，我也测试过，它不返回 XML 节点，

```
 function myfunc($x) {return $x;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:11:45.860

只需返回任何子类`DOMNode`：

```
$xml = '<root/>';
$xsl = <<<'EOL'
<xsl:stylesheet version="1.0" 
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:php="http://php.net/xsl">
    <xsl:template match="/root">
        <xsl:copy-of select="php:function('myXMLFunc', .)"/>
    </xsl:template>
</xsl:stylesheet>
EOL;

function myXMLFunc($m) { // $m is always an array of DOMNodes
    $d = new DOMDocument();
    $e = $d->createElement('newroot');
    $e->appendChild($d->createTextNode('inner text'));
    return $e;
}

$xmldoc = DOMDocument::loadXML($xml);
$xsldoc = DOMDocument::loadXML($xsl);

$proc = new XSLTProcessor();
$proc->registerPHPFunctions('myXMLFunc');
$proc->importStyleSheet($xsldoc);

echo $proc->transformToXML($xmldoc); 
```

以上将产生 xml `<newroot>inner text</newroot>`。

您还可以使用 构造您的 xml`SimpleXMLElement`并将其转换为 DOM 树[`dom_import_simplexml()`](http://www.php.net/manual/en/function.dom-import-simplexml.php)，然后您可以将其返回。使用 SimpleXML 构造 xml 通常不会那么痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:16:58.293

OPS，这是某种魔法！现在@hek2mgi 提示正在工作！

我在用

```
 <xsl:template match="table">
  <xsl:copy-of select="php:function('myfunc',.)" disable-output-escaping="yes" />
 </xsl:template> 
```

...我会在几天后回到这里，就“稳定的解决方案”和结论多说一些...

# ruby-on-rails - 将 ruby 表单 1.8.7 升级到 1.9.3 导致服务器崩溃

> ID：15202807
> 
> 赞同：0
> 
> 时间：2013-03-04T13:35:23.810
> 
> 标签：ruby-on-rails, ruby, apache, passenger

我的`rails 3.2.8`应用程序正在使用`ruby1.8.7`并且运行良好。最近，我将`ruby`版本升级到`1.9.3`，导致服务器崩溃。我更新了所有 gem 以与 ruby​​ 的最新版本兼容。但从那时起，apache 就不再运行我的应用程序了。如果我运行 rails webrick 服务器，则可以使用 IP 地址和端口访问站点。但是使用域名无法访问它，因为 Apache 的配置似乎不正确。之前挺好的，没换什么的。我刚刚升级了Ruby。有人知道我在这里缺少什么吗？请帮忙。

apache配置文件如下。

**apache2.conf**

```
LockFile ${APACHE_LOCK_DIR}/accept.lock
PidFile ${APACHE_PID_FILE}
Timeout 300
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 5
<IfModule mpm_prefork_module>
  StartServers          5
  MinSpareServers       5
  MaxSpareServers      10
  MaxClients          150
  MaxRequestsPerChild   0
</IfModule>
<IfModule mpm_worker_module>
  StartServers          2
  MinSpareThreads      25
  MaxSpareThreads      75 
  ThreadLimit          64
  ThreadsPerChild      25
  MaxClients          150
  MaxRequestsPerChild   0
</IfModule>
<IfModule mpm_event_module>
  StartServers          2
  MinSpareThreads      25
  MaxSpareThreads      75 
  ThreadLimit          64
  ThreadsPerChild      25
  MaxClients          150
  MaxRequestsPerChild   0
</IfModule>
User ${APACHE_RUN_USER}
Group ${APACHE_RUN_GROUP}
AccessFileName .htaccess
<Files ~ "^\.ht">
  Order allow,deny
  Deny from all
  Satisfy all
</Files>
DefaultType None
HostnameLookups Off
ErrorLog ${APACHE_LOG_DIR}/error.log
LogLevel warn
Include mods-enabled/*.load
Include mods-enabled/*.conf
Include httpd.conf
Include ports.conf
LogFormat "%v:%p %h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" vhost_combined
LogFormat "%h %l %u %t \"%r.. 
```

**test.myapplication.com**

```
<VirtualHost *:80>

  ServerName test.myapplication.com

  ServerAlias XX.XX.XX.X/mytest

  DocumentRoot /home/XXXX/public_html/public 

  ErrorLog /var/log/apache2/XXXXX_errors.log

  LogLevel warn

  CustomLog /var/log/apache2/XXXXX_access.log combined

  SetEnv RAILS_ENV production

  <Directory /home/XXXXX/public_html/public>

    Allow from all

    Options -MultiViews

  </Directory>

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:27:42.697

我猜你需要更新 apache 配置才能使用新的 ruby​​。

所以在你的 apache conf 中你应该有这样的东西：

```
LoadModule passenger_module /usr/lib/ruby/gems/1.9.2@rails3/gems/passenger-3.0.2/ext/apache2/mod_passenger.so
PassengerRoot /usr/lib/ruby/gems/1.9.2/gems/passenger-3.0.2
PassengerRuby /usr/bin/ruby1.9.2 
```

你应该只需要修复路径..

# ios - 以编程方式单击xcode中的（触发）html按钮？

> ID：15202809
> 
> 赞同：1
> 
> 时间：2013-03-04T13:35:25.853
> 
> 标签：ios, objective-c, ios5, ios6, ios4

我有一个带有一些按钮的 HTML 页面，我希望我的 Objective C 代码以编程方式触发该按钮，以便我可以获得下一个响应（下一个 HTML 页面）..

我正在尝试获取和发布方法，但我不知道在哪里更改 html 内容并将其发布回来..

按钮的 HTML 部分是：

```
<input name="xyz" type="button" value="abc" onclick="validate(this.name)" > 
```

有什么办法可以找到更改 html 页面的位置并将其发布回来..？

以及此链接如何帮助我..

[如何以编程方式单击按钮 - WebBrowser (IE) 中的按钮](https://stackoverflow.com/questions/8987983/how-to-click-a-button-programmatically-button-in-webbrowser-ie)

注意：HTML 页面是 INTERNET 中的一些 URL 内容，我想要下一个响应，即单击某个按钮后的 html 页面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T13:43:44.087

您可以使用以下方法来评估带有 UIWebView 对象的 javascript：

`stringByEvaluatingJavaScriptFromString`：

所以在你的情况下：如果你有一个`UIWebView`名为 webview 的对象：

```
NSString *jsStat = @"document.getElementsByName('xyz')[0].click()";

[webView stringByEvaluatingJavaScriptFromString:jsStat]; 
```

该方法返回脚本的结果；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:38:59.227

如果您正在使用objective-c制作ios应用程序，那么您需要为此目的使用[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)，并在UIWebView中加载您的html并使用它的委托方法检查按钮是否被点击像这样

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

    if (navigationType == UIWebViewNavigationTypeFormSubmitted) {
 // form is submitted or button is clicked , perform your actions here
 }
return YES;

} 
```

# c++ - 如何在 C++ 运行时选择和打开文件？

> ID：15202811
> 
> 赞同：0
> 
> 时间：2013-03-04T13:35:32.407
> 
> 标签：c++, textures, openfiledialog

目前我正在为纹理创建一个编辑器，我想在运行时选择纹理。稍后我想为新纹理选择保存目录。

我找到了 [如何：使用 OpenFileDialog 组件打开文件](http://msdn.microsoft.com/en-us/library/61097ykx.aspx)。但我认为这不是解决方案。 ![打开文件对话框](../Images/c02d1458c1fb72c279fdda0decaca82b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:38:34.500

（假设您在 Windows 上，根据屏幕截图）如果您只是想选择一个文件夹，您可以使用 SHBrowseForFolder。

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb762115%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762115%28v=vs.85%29.aspx)

M。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:44:39.073

您需要查看通用对话框库。

[http://msdn.microsoft.com/en-gb/library/windows/desktop/ms645524(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms645524(v=vs.85).aspx)

或者，如果您只对 Vista/Windows 7 支持感兴趣，您可以考虑使用 Common Item Dialogs。

[http://msdn.microsoft.com/en-gb/library/windows/desktop/bb776913(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb776913(v=vs.85).aspx)

对于“本机”C++，您将无法轻松使用链接所引用的 .NET 组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:39:08.723

我已经解决了使用 dirent.h 文件的问题。我通过创建这篇文章来确认该文件[如何使用 C 或 C++ 获取目录中的文件列表？](https://stackoverflow.com/questions/612097/how-can-i-get-a-list-of-files-in-a-directory-using-c-or-c)

我已经使用 dirent.h 和 SFML 编写了自己的文件浏览器。

对不起，如果我不能说明我的问题。

但感谢您的回复（：

# ubuntu - 无法使用 Chef 和 Knife 创建 ec2 ubuntu 实例节点

> ID：15202812
> 
> 赞同：0
> 
> 时间：2013-03-04T13:35:33.020
> 
> 标签：ubuntu, amazon-ec2, chef-infra

我是刀和厨师配置管理系统的新手，我也尝试使用刀命令行创建一个 ec2 ubuntu 实例节点。

我能够运行刀节点列表和刀节点显示节点名称。但是当我运行以下命令时，我也会收到一条错误消息，它说使用 -i 而不是 -I。

```
knife ec2 server create -I ami-10206d42 -S ~/key.pem -i ~/key.pem  --region ap-southeast-1  --flavor t1.micro --ssh-user ubuntu --groups default 
```

这是错误信息

```
Fog::Compute::AWS::NotFound: The key pair '~/key.pem' does not exist 
```

认为密钥存在于主文件夹中。

请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:30:14.290

如前所述，波浪号扩展将无法在没有特定代码的 Ruby 环境中工作，因为这是[shell 的一个特性](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_04.html)。您将需要一个绝对路径来处理它。

所以试着`~`换成`$HOME`.

顺便提一句。Ruby 可以通过[File.expand_path](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-expand_path)处理这种扩展。

# preg-replace - 转换 eregi_replace

> ID：15202817
> 
> 赞同：-2
> 
> 时间：2013-03-04T13:35:46.370
> 
> 标签：preg-replace

我迁移到一个新的 PHP 版本。现在我有很多 eregi_replace 语句抛出错误：

```
$text = eregi_replace("([ \r\n])http://([^ ,\r\n]*)","\\1[url]http://\\2[/url]", $text);
$text = eregi_replace("([ \r\n])https://([^ ,\r\n]*)","\\1[url]https://\\2[/url]", $text);
$text = eregi_replace("([ \r\n])ftp://([^ ,\r\n]*)","\\1[url]ftp://\\2[/url]", $text);
$text = eregi_replace("([ \r\n])www.([^ ,\r\n]*)","\\1[url]http://www.\\2[/url]", $text);
$text = eregi_replace("^http://([^ ,\r\n]*)","[url]http://\\1[/url]", $text);
$text = eregi_replace("^https://([^ ,\r\n]*)","[url]https://\\1[/url]", $text);
$text = eregi_replace("^ftp://([^ ,\r\n]*)","[url]ftp://\\1[/url]", $text);
$text = eregi_replace("^www.([^ ,\r\n]*)","[url]http://www.\\1[/url]", $text); 
```

我知道我必须使用 preg_replace。当另一个人编写此代码时，我不知道如何实现这一点。也许有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:46:25.767

这相当于您拥有的第一个 eregi_replace

```
$text = preg_replace("#([ \r\n])http://([^ ,\r\n]*)#i","$1[url]http://$2[/url]", $text); 
```

概括地说，这意味着：

```
$text = preg_replace('#'.$yourCurrentRegexString.'#i',str_replace('\\','$',$yourCurrentReplacement), $text); 
```

# c# - 未捕获或吞下异步异常

> ID：15202820
> 
> 赞同：0
> 
> 时间：2013-03-04T13:35:52.843
> 
> 标签：c#, asynchronous, task-parallel-library

**未来更新：** TL;DR 以捕获异步方法中的表达式，您必须使用`await`、`Task.WaitAll`或`.Result`.

我创建了一个有点复杂的异步方法，它只运行其他异步方法。您可以忽略其中的大部分内容，因为只有行 var mSpekTask... 是有趣的，而且，我不关心逻辑，我只想知道我的异常去了哪里。我的主要问题是 ex.ToString() 永远不会被命中，即使在 mSpecTask 中肯定会发生异常。

```
public async Task LoadAsync(IEnumerable<ProductRequest> feed, int? customerId,
    IProgress<int> mSpecProgress, Action<Task> mSpecCompletionHandler)
{
    var ids = feed.Select(x => x.ProductId.ToString()).Distinct().ToList();

    try
    {
        var mSpecTask = this.LoadMSpecAsync(mSpecProgress, ids);
    }
    catch (Exception ex)
    {
        ex.ToString();
    }
} 
```

这是 LoadMSpecAsync 的代码

```
public Task<ResultSet> LoadMSpecAsync(IProgress<int> prg, IEnumerable<string> ids)
{
    return this.LoadAsync(prg, ids, Selector.M, SPMS, x => x.Order);
} 
```

下面是LoadAsync的代码，await db.ExecuteTVP(progress, spName, ids, parameters) 产生异常。

```
private async Task<Dictionary<Pair, dynamic>> LoadAsync(IProgress<int> progress,
    IEnumerable<string> ids, Selector s, string spName, Func<dynamic, int> k,
    Func<dynamic, dynamic> f = null, object parameters = null)
{
    parameters = new ExpandoObject().CopyFromSafe(parameters);
    if (spName != SPMAP) ((dynamic)parameters).lang = this.languageCode;

    using (var db = new SqlConnection(this.connectionString))
    {
    await db.OpenAsync();

    var results = await db.ExecuteTVP(progress, spName, ids, parameters);

    db.Close();
    }

    return this.data[s];
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T14:00:44.807

当`async`方法抛出异常时，该异常被放置在返回的`Task`. 它不会直接向调用者提出。这是设计使然。

因此，您必须返回 from或检查其`await`异常参数。它会出现在那里。`Task``LoadMSpecAsync``mSpecCompletionHandler``Task`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:40:55.663

您可以按如下方式处理未观察到的任务异常：

```
TaskScheduler.UnobservedTaskException += (object sender, UnobservedTaskExceptionEventArgs eventArgs) =>
{
      eventArgs.SetObserved();
      ((AggregateException)eventArgs.Exception).Handle(ex =>
      {
          //TODO: inspect type and handle exception
          return true;
      });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:54:39.447

我将为我自己的问题添加一个答案，因为我发现了一条有用的信息。中间方法 LoadMSpecAsync 正在处理异常。为了避免这种情况发生，它需要一点柚木。您需要在返回类型之前添加 async 关键字，在“return”之后添加“await”关键字。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2021-12-03T20:12:11.387

我有一个异常被*myTask.Wait()*（或 WaitAsync）吞没，但这是一个任务嵌套问题。也就是说，当我执行*myTask.Wait()*时，*myTask*有一个*传入的参数 Task*，它也称为*myParameterTask.Wait()*。*参数任务*有自己的Exception **-catch 并且没有*throw***，所以最初抛出的 Exception 没有传播回调用线程。

我认为*myTask.Wait()*抛出异常存在问题，但事实并非如此。

# c# - Monitor.pulse 方法

> ID：15202828
> 
> 赞同：1
> 
> 时间：2013-03-04T13:36:30.567
> 
> 标签：c#

任何人都可以对这段代码有所了解。一步一步的工作？我的理解是代码的关键部分被锁定为一次只能由单个线程访问。

```
lock (buf)
{
    buf.AddRange(ary);
    Monitor.Pulse(buf);
} 
```

PS：Msdn 将脉冲解释为

> 脉冲（信号），PulseAll

向一个或多个等待线程发送信号。该信号通知一个等待线程被锁定对象的状态已经改变，并且锁的所有者准备释放锁。等待线程被放置在对象的就绪队列中，这样它最终可能会收到对象的锁。一旦线程获得了锁，它就可以检查对象的新状态以查看是否已达到所需的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:55:40.330

Monitor 类为每个锁定对象维护两个队列：“就绪”队列和“等待”队列。

```
lock (buf) 
```

当前线程被放置在“buf”就绪队列的后面，并等待轮到它来获取锁。

我们必须假设您有其他线程在使用 buf，并且其中至少有一个调用了

```
Monitor.Wait(buf); 
```

然后 Monitor 会将另一个线程放在 buf 的等待队列中，它被卡住了。

现在，当当前线程获得锁时，继续执行：

```
Monitor.Pulse(buf); 
```

这向 Monitor 发出信号以获取 Waiting 队列前面的线程，并将其移动到 Ready 队列的后面。被卡在等待队列中的另一个线程现在排队等待锁定 buf。

在锁块结束时，Monitor.Exit 被自动调用，当前线程不再处于 buf 的 Ready 或 Waiting 队列中。

如果不查看其余代码，就不可能在 lock 语句中说明为什么需要 Monitor.Pulse 调用。

**编辑**

这是我对正在发生的事情的猜测：这可能是生产者/消费者队列模式的实现。

当消费者线程查看 buf 并看到没有可供他们消费的项目时，他们调用 Monitor.Wait(buf) 并坐在等待队列中，直到被告知有新项目可供消费。

您显示的代码是生产者线程将项目添加到 buf 时。然后它调用 Monitor.Pulse(buf) 来唤醒一个消费者线程并将该消费者线程移动到就绪队列，以等待轮到它锁定 buf。

# c# - Windows Phone 8 和 Microsoft Expression Blend 4

> ID：15202829
> 
> 赞同：1
> 
> 时间：2013-03-04T13:36:30.603
> 
> 标签：c#, windows-phone-8, blend

我想编写一个 Windows Phone 应用程序的模型。我安装了 WP8 SDK，但软件 Microsoft Expression Blend 4 没有显示 Windows Phone。你知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:09:30.367

Expression blend 4 通常支持 windows phone 7。随着 WP8，微软转向 Blend for Visual Studio。请参阅此链接[宣布 WINDOWS PHONE 8 SDK](http://blendinsider.com/news/announcing-windows-phone-8-sdk-design-great-apps-with-blend-2012-10-30/)

# android - 保存图像，在图库应用中显示

> ID：15202837
> 
> 赞同：0
> 
> 时间：2013-03-04T13:37:15.347
> 
> 标签：android, image, gallery

我目前正在开发一个通过套接字接收多个图像的应用程序。为了保存它们，我编写了以下方法：

```
public static boolean saveTempImageToGallery(Context c) {
    try {
        FileInputStream fis = c.openFileInput(Settings.TEMP_PHOTO_STORAGE);
        // create name of file: [date]-[time]-baby
        final String tFilename = new SimpleDateFormat("dd-MM-yyyy_hh-mm-ss")
                .format(new Date()) + ".png";

        String state = Environment.getExternalStorageState();
        if (Environment.MEDIA_MOUNTED.equals(state)) {
            Log.d(TAG, "External storage available.");
            // sd card available
            File dir = getExternalStorageDir("Photos");
            if (dir.mkdirs() || dir.isDirectory()) {
                Log.i(TAG, "Directory: "+dir.getAbsolutePath());
                File newImage = new File(dir, tFilename);
                if (newImage.createNewFile() && newImage.isFile()) {
                    Log.i(TAG, "Saving image to "+newImage.getAbsolutePath());
                    final Bitmap bmp = BitmapFactory.decodeStream(fis);
                    ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    // compress image to png
                    bmp.compress(Bitmap.CompressFormat.PNG, 40, baos);
                    FileOutputStream fo = new FileOutputStream(newImage);
                    fo.write(baos.toByteArray());
                    fo.close();
                    Log.i(TAG, "Image saved!");
                    return true;
                }
            } else {
                Log.d(TAG, "Could not create directory.");
            }
        } else {
            Log.d(TAG, "External storage not available.");
        }
    } catch (Exception e) {

    }
    return false;
}

public static File getExternalStorageDir() {
    File sdCard = Environment.getExternalStorageDirectory();
    File dir = new File(sdCard.getAbsolutePath() + "/"
            + Settings.EXT_STORAGE_DIRECTORY);
    return dir;
}

public static File getExternalStorageDir(String subdir) {
    File sdCard = Environment.getExternalStorageDirectory();
    File dir = new File(sdCard.getAbsolutePath() + "/"
            + Settings.EXT_STORAGE_DIRECTORY + "/" + subdir);
    return dir;
} 
```

保存它们后，我想为用户提供在默认图库应用中查看它们的可能性。在阅读了一些帖子后，我修改了以下代码：

```
MediaScannerConnectionClient mScanClient = new MediaScannerConnectionClient() {
            @Override
            public void onScanCompleted(String path, Uri uri) {
                try {
                    Log.d("onScanCompleted", uri + "success");
                    if (uri != null) {
                        Intent intent = new Intent(Intent.ACTION_VIEW);
                        intent.setData(uri);
                        startActivity(intent);
                    }
                } finally {
                    if (mScanCon != null)
                        mScanCon.disconnect();
                    mScanCon = null;
                }
            }

            @Override
            public void onMediaScannerConnected() {
                Log.i(TAG, "Media Scan Connected.");
                String[] files = Support.getExternalStorageDir("Photos")
                        .list();
                Log.i(TAG,
                        Support.getExternalStorageDir("Photos").list().length
                                + " elements in dir.");
                if (files.length > 0) {
                    for (String cur : files) {
                        if (cur.equals(".") || cur.equals(".."))
                            continue;
                        Log.i(TAG, "Using "
                                + cur
                                + " to scan stuff. "
                                + Support.getExternalStorageDir("Photos")
                                        .getAbsolutePath() + "/" + cur);
                        Log.i(TAG, "Not using "
                                + cur
                                + " to scan stuff. "
                                + Support.getExternalStorageDir("Photos")
                                        .toString() + "/" + cur);
                        mScanCon.scanFile(
                                Support.getExternalStorageDir("Photos")
                                        .getAbsolutePath() + "/" + cur,
                                "image/*");
                        break;
                    }
                } else {
                    Toast.makeText(getApplicationContext(),
                            "No images available.", Toast.LENGTH_LONG)
                            .show();
                }

            }
        };
        if (mScanCon != null)
            mScanCon.disconnect();
        mScanCon = new MediaScannerConnection(getApplicationContext(),
                mScanClient);
        mScanCon.connect(); 
```

奇怪的事情：似乎 onMediaScannerConnected 从未被解雇 - 有人知道吗？最近一个小时我一直在搜索网络和stackoverflow ..

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:53:27.380

您真的不必连接到媒体扫描仪来开始扫描，您可以改用[这种静态方法](http://developer.android.com/reference/android/media/MediaScannerConnection.html#scanFile%28android.content.Context,%20java.lang.String%5B%5D,%20java.lang.String%5B%5D,%20android.media.MediaScannerConnection.OnScanCompletedListener%29)。

```
MediaScannerConnection.scanFile(context, new String[] {dir.getAbsolutePath()}, null, null); 
```

**编辑：**

```
Uri uri = Uri.parse(filePath);
Intent i = new Intent(Intent.ACTION_VIEW);
i.setDataAndType(uri, "image/*");
startActivity(i); 
```

# osx-snow-leopard - pdfcairo输出中的GNUplot实垂直线

> ID：15202839
> 
> 赞同：0
> 
> 时间：2013-03-04T13:37:28.480
> 
> 标签：osx-snow-leopard, gnuplot

我的 Aqua 终端输出在我想要的位置显示实线：底部边框和 x 和 y 网格。

当我将输出更改为 pdfcairo 时，我找不到使 xgrid 线成为实线的方法。这是一个已知的问题？

```
set terminal pdfcairo size 13.5,9.8 solid screen 0,.3 lt 1 lw 2 
```

GNUplot 4.6.1
OSX 10.6.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:16:40.863

如果您想要网格的实线，我会为网格使用实线类型，而不是依赖终端设置：

```
set term pdfcairo size 13.5,9.8 solid
set output 'foo.pdf'
set grid lt 1 lc rgb 'black'
plot sin(x) 
```

作为旁注，我 对你的命令部分`pdfcairo`感到窒息。我不确定它在那里做什么，但我很确定这不是你想要的。`screen 0,.3``set term`

# jsp - ArrayList IndexOutOfBoundException JSP

> ID：15202841
> 
> 赞同：-1
> 
> 时间：2013-03-04T13:37:31.163
> 
> 标签：jsp, arraylist, indexoutofboundsexception

我从我的数据库中获取 12 条记录并将其存储在 ResultSet 中，因为我无法从 ResultSet 中获取我想要的每个元素。我正在使用 arrayList 来存储 ResultSet 数据，然后使用 ArrayList.get() 方法来检索每个元素。

但问题是来自数据库的数据有时可能少于 12 条记录，但我已经访问了 arraylist.get(12)，所以它抛出了 IndexOutOfBoundException。现在我想要的是在打印它的值之前检查 array.get(12)th 元素是否超出界限。

我已经尝试过 if(arraylist.get(12)!=null) 但它不起作用可能是因为我再次尝试访问 arraylist 中不存在的第 12 条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:46:23.783

如果您的列表包含 12 个项目并且您想要获取最后一个项目，则必须使用`.get(11)`，因为列表、数组、集合等在 JAVA 中是从 0 开始索引的。另一方面，如果你想获得第一个，你必须使用`.get(0)`而不是`.get(1)`（返回第二个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:52:07.487

硬编码诸如“我想要收藏的第 12 条记录”之类的东西是个坏主意。如果要检查集合的大小。您应该获取集合大小，而不是尝试访问任意值并查看它是否有效。

看一下

[http://blog.smartkey.co.uk/2009/01/how-to-access-the-size-of-a-collection-in-a-jsp-page-using-jstl-el/](http://blog.smartkey.co.uk/2009/01/how-to-access-the-size-of-a-collection-in-a-jsp-page-using-jstl-el/)

有关如何执行此操作的更多详细信息。

# java - 记录任意对象

> ID：15202842
> 
> 赞同：3
> 
> 时间：2013-03-04T13:37:31.313
> 
> 标签：java, jvm, log4j, slf4j, logback

我正在为企业系统开发日志框架，并且一直将 logback 和 log4j 作为日志后端，但尝试使用 slf4j 来阻止后端实现。

我们想以 JSON 格式记录消息，我找到了一个用于 log4j 的 Layout 类和一个用于 logback 的编码器。但是，我们希望能够将任意键/值对添加到 JSON 输出。

我希望 Layout/Encoder 能够检测到正在记录的对象类型，并且在 Map 的情况下，它会将键/值对添加到 JSON，但对于其他任何东西，它只会 toString() 它。

然而，这似乎是不可能的，因为 slf4j 接口似乎仅限于记录 String 对象。

我已经阅读了 Markers、MDC 和 NDC，但这些似乎都不能很好地满足我的需求。

为了澄清，这是一个最佳的代码片段：

```
Map m = new HashMap();
m.put("foo", "bar");
m.put("baz", "fluffbunny");
log.info(m); 
```

这将输出如下内容：

```
{ "timestamp": "2013-03-04T13:33:40", "foo": "bar", "baz": "fluffbunny" } 
```

或者

```
{ "timestamp": "2013-03-04T13:33:40", "message": { "foo": "bar", "baz": "fluffbunny" } } 
```

会有一些解决方法，例如将 JSON 字符串呈现为消息或在日志语句周围使用 MDC（我的布局/编码器类正确呈现 MDC 和 NDC），但这两种情况都会使日志行变得混乱。

所以我的问题是是否有一些方便的方法可以做到这一点。坚持使用 SLF4J 无疑是一个优势，但如果使用特定后端的好处超过与后端无关的好处，则可能没有必要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:55:17.943

我只需要一个`LoggableMap`输出 JSON 作为它的`toString`，使用 SLF4J

```
Map m = new Loggable();
m.put("foo", "bar");
m.put("baz", "fluffbunny");
// Note the use of {} to log an arbitrary object rather than a String
log.info("{}", m); 
```

# intellij-idea - 删除 IntelliJ 中的空格

> ID：15202848
> 
> 赞同：3
> 
> 时间：2013-03-04T13:37:52.100
> 
> 标签：intellij-idea

有谁知道如何删除代码中的空格。我通常会重新格式化代码，但这不会删除所有双空格等。我认为偏好中有一种方法，但我找不到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T14:00:52.190

假设这适用于 Java 代码（尽管一般机制适用于大多数文件类型），您可以修改代码中何时/如何使用空格。

转到文件->设置->代码样式-> Java

如果然后单击 Spaces 选项卡，则可以指定所需的代码布局。完成此操作后，如果您重新格式化代码，它应该根据您的偏好进行格式化。

您也可以为其他类型指定此项（常规、CSS、JavaScript 等）

# jquery-mobile - AngularJS + Twitter Bootstrap：更改后仍保留部分更改（jQuery Mobile）

> ID：15202854
> 
> 赞同：1
> 
> 时间：2013-03-04T13:38:08.903
> 
> 标签：jquery-mobile, twitter-bootstrap, angularjs, views, partials

我正在尝试使用 angular 和 bootstrap 构建一个具有三个视图的单页应用程序。我是 Angular 的新手，我想实现以下功能：

在 jQuery Mbile 中，可以在三个不同的页面上进行三个不同的聊天。如果我目前在页面 A，页面 B 和 C 中的聊天仍在进行中。因此，浏览页面不会停止其他页面上的进程。

如果我错了，请纠正我。我想知道如何在 jQuery Mobile 中使用 data-role="page" 在 div 之间导航的方式在同一个部分/页面上的多个视图/模板之间进行切换？将 jQuery Mobile 与 angular 和 bootstrap 结合起来是个好主意吗？（我真的不这么认为）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:18:47.200

首先，每当路线改变时，角度都会刷新视图。防止这种情况的唯一方法是将路由中的“reloadOnSearch”参数设置为 false。完成此操作后，您可以将查询字符串参数传递给视图，而无需重新加载视图。还有一个额外的警告是你必须明确地监听“$routeUpdate”。以下是 Angular 代码，下面是一个小提琴，可以实现在多个聊天之间切换而不刷新视图的目标。我使用 ng-show 根据传递的查询字符串参数显示适当的聊天。

```
angular.module('app',[]).config(function($routeProvider){

    $routeProvider.when('/', {templateUrl: 'view.html', reloadOnSearch:false});

}).controller('controller', function($scope, $routeParams){
    $scope.$on('$routeUpdate', function(value) {
        $scope.id =   $routeParams.id;
    }); 
}).directive('chat', function(){
    return{
        restrict:'E',
        replace:true,
        scope:{},
        controller: function($scope){
            $scope.items = [];
            $scope.submit = function(text){
                $scope.items.push(text);
            };
        },
        templateUrl:'chat.html'
    }
}); 
```

[http://jsfiddle.net/jwanga/u2RrU/](http://jsfiddle.net/jwanga/u2RrU/)

# python - 根据python中的某些列表删除特定字符串

> ID：15202856
> 
> 赞同：2
> 
> 时间：2013-03-04T13:38:18.053
> 
> 标签：python, string, replace

我有字符串，来自一些 xml 元素：

```
source = "<![CDATA[<p><span stylefontfamily times new romantimesserif fontsize large>Is important ?</span></p>]] 
```

"

我想根据这个列表删除指定的字符串：

`mustDelWord=["<p>","</p>","<span stylefontfamily times new romantimesserif fontsize large>","</span>"]`

所以，预期的输出是：

```
<![CDATA[Is important ?]]> 
```

到目前为止的代码是：

```
mustDelWord=["<p>","</p>","<span stylefontfamily times new romantimesserif fontsize large>","</span>"]  

for i in mustDelWord:
        source = source.replace(mustDelWord[i],"")
print source 
```

但是出现这个错误：

```
source = source.replace(mustDelWord[i],"") 
```

TypeError：列表索引必须是整数，而不是 str

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:39:04.837

只需将行更改为：

```
source = source.replace(i,"") 
```

这是因为循环`for i in mustDelWord`已经遍历列表中的元素，*而不是*列表中的索引，所以你不必做`mustDelWord[i]`.

# static-analysis - 如何让 checkstyle 在我的应用程序中忽略 xml 文件

> ID：15202858
> 
> 赞同：2
> 
> 时间：2013-03-04T13:38:24.933
> 
> 标签：static-analysis, checkstyle

我已经使用自定义的 checkstyle.xml 配置了我的 checkstyle 插件，它适用于 java 类，但是对于 xml 文件有很多警告，任何人都可以建议如何从我的应用程序中的任何 xml 文件中禁用检查样式。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:43:23.680

我可以想到两种方法来做到这一点：

*   您可以[抑制来自非 Java 文件的发现](https://stackoverflow.com/questions/10386364/is-there-a-way-to-run-checkstyle-only-on-java-files-without-ant)。这在您的 IDE 内部和外部都非常有效。

*   如果您使用的是 Eclipse，您还可以将 Eclipse 配置为不将非 Java 文件提供给 Checkstyle。为此，请右键单击您的项目并单击*Checkstyle*。取消选中*使用简单配置*。`\.java$`使用as regexp指定文件集。您将看到对话窗口下半部分的文件列表更改为仅 Java 文件。

在 Checkstyle 的早期版本中，我想我记得在配置 XML 中也有一个文件名过滤器，但我现在似乎无法在文档中找到它，所以也许这个功能已经不复存在了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-04T12:56:28.353

在检查样式配置文件中的 Checker 模块的开头有一个 basedir 属性。如果有评论，请取消评论。将它的值设置为要应用检查样式规则的文件夹。例如，任何 Eclipse 项目的 src 文件夹只包含 java 文件。

```
<!-- If you set the basedir property below, then all reported file names 
    will be relative to the specified directory. See http://checkstyle.sourceforge.net/5.x/config.html#Checker --> 
    <property name="basedir" value="/MyEclipeProject/src"/> 
```

# excel - 仅将可见单元格从 Excel 保存到 CSV

> ID：15202862
> 
> 赞同：5
> 
> 时间：2013-03-04T13:38:38.123
> 
> 标签：excel, vbscript, autoit

如何仅将 xls 的可见单元格保存为 CSV？我有一个大的 .xls 文件，我想将它提供给一些旧的 UNIX Perl 脚本。我有一些代码将监视文件进行修改，重新生成 CSV 文件并将它们 FTP 到我需要它们的位置。

维护电子表格的人不想删除旧数据（他们只是将其隐藏起来）。我保存到 CSV 的方法包括并排的所有隐藏数据，无法知道最初隐藏了什么。以下是我正在使用的代码；用作答案的起点将使我更容易理解：

**VBScript**

```
Dim oExcel
Set oExcel = CreateObject("Excel.Application")
Dim oBook
Set oBook = oExcel.Workbooks.Open("S:\NetowrkFolder\SpreadSheet.xls")
Dim oSheet

If oBook.Sheets.count = 1 Then
  oBook.SaveAs "D:\output.csv", 6
else
  i=1
  aname=split("D:\output.csv",".",-1,1)
  For Each oSheet In oBook.WorkSheets
    fname = aname(0) & "_sheet" & Cstr(i)
    oSheet.SaveAs fname, 6
    i=i+1
  Next
End If

oBook.Close True
oExcel.Quit
WScript.Quit 
```

我实际上是在**AutoIt**中做这个项目，下面是 AutoIt 代码：

```
Local $oExcel = ObjCreate("Excel.Application")
Local $oBook = $oExcel.Workbooks.Open("Y:\NetworkLocation\File.xls")
Local $oWorkSheets = $oBook.WorkSheets
Local $i = 1
For $oSheet In $oWorkSheets
    $oSheet.Auto
    $oSheet.SaveAs(@ScriptDir & '\csv\Sheet' & $i & '.dat', 6)
    $i += 1
Next
$oBook.Close(False)
$oExcel.Quit() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T17:00:40.707

也许这太简单了，但它可以完成您想要完成的工作：

```
Sub Macro1()
    Selection.SpecialCells(xlCellTypeVisible).Select
    Selection.Copy
    Workbooks.Add
    ActiveSheet.Paste
    Application.CutCopyMode = False
    ActiveWorkbook.SaveAs Filename:="D:\DOCUMENTS\visible.csv", FileFormat:= _
        xlCSV, CreateBackup:=False
End Sub 
```

上面的代码是使用宏记录器生成的。线索是我们只选择工作表上的**可见单元格**，将其复制/粘贴到新工作簿，然后将其保存为 CSV。原始数据仍然完好无损。其余代码很简单，也可以使用宏记录器生成。

有关更多想法，请参见 SO 线程：[如何仅将可见单元格从 Excel 导出到 CSV？](https://superuser.com/questions/476504/how-do-i-export-only-visible-cells-from-excel-to-csv)

# php - 带有连接表的 PDO FETCH_CLASS

> ID：15202864
> 
> 赞同：11
> 
> 时间：2013-03-04T13:38:42.097
> 
> 标签：php, mysql, join, pdo

假设我有 2 个 php 对象：

```
<?php
class Post {
    public $id;
    public $text;
    public $user_id;
}
?> 
```

和

```
<?php
class User {
    public $id
    public $name
}
?> 
```

每个帖子都有一个唯一的约束，数据库中有 1 个用户。

我想使用适用于所有“发布”属性的 PDO“FETCH_CLASS”方法将数据填充到“发布”对象中，但是如何填充“用户”中的属性？

我的 SQL 语句如下所示：

```
SELECT post.id, 
       post.text, 
       post.user_id, 
       user.id, 
       user.name 
FROM POST INNER JOIN User on post.user_id = user.id 
```

谢谢！

**更新：**

ATM 我这样填写我的“邮政”类：

```
 $statement = $db -> prepare($query);
    $statement -> execute();
    $statement -> setFetchMode(PDO::FETCH_CLASS, 'Post');
    $posts = $statement -> fetchAll(); 
```

那么我将如何更改它以填充另一个类“用户”？

**解决方案：**

```
$statement = $db -> prepare($query);
$statement -> execute();
$posts = array();
while (($row = $statement->fetch(PDO::FETCH_ASSOC)) !== false) {
    $post           = new Post();
    $post->id       = $row['post_id'];
    $post->text     = $row['post_text'];
    $post->created  = $row['post_created'];
    $post->image    = $row['post_image'];
    $post->url      = $row['post_url'];
    $post->weight   = $row['post_weight'];
    $post->likes    = $row['post_likes'];
    $user           = new User();
    $user->id       = $row['user_id'];
    $user->nickname = $row['user_nickname'];
    $user->created= $row['user_created'];
    $user->locked   = $row['user_locked'];
    $post->user     = $user;
    $posts[] = $post;
}
return $posts; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-06-04T17:42:53.343

您可以尝试使用 __set 方法，如下所示：

```
<?php

include 'connection.php';

class Post {

    public $id;
    public $text;
    public $user;

    public function __construct() {
        $this->user = new User();
    }

    public function __set($name, $value) {

        if (array_key_exists($name, get_object_vars($this->user))) {
            $this->user->$name = $value;
        } else {
            $this->$name = $value;
        }
    }

}

class User {

    public $id;
    public $name;

}

$statement = $pdo->prepare("SELECT * FROM post "
        . "LEFT JOIN user "
        . "ON post.user_id = post.id");
$statement->execute();

$result = $statement->fetchAll(\PDO::FETCH_CLASS | \PDO::FETCH_PROPS_LATE, Post::class);
echo "<pre>";
var_dump($result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T13:40:54.853

据我所知，不支持直接在 PDO 中。通常，如果您需要从查询结果创建复杂的对象图，那是 ORM 的职责。

如果你需要这个功能，我会推荐使用[Doctrine](http://www.doctrine-project.org/)或[Propel](http://propelorm.org/)，而不是自己写东西。还有其他可能更轻的重量，但我没有使用它们的经验。

**编辑：**

我想也许我误解了这个问题，因为我相信其他人可能会。我认为真正的问题是如何访问连接的列，而不是如何从它们创建对象。

在这种情况下，只需使用标准的 arry fethc 方法，例如`PDO::FETCH_ASSOC`, `PDO::FETCH_NUMERIC`or`PDO::FETCH_BOTH`就会为您提供您查询的所有列。

所以如果你想把它变成一个“对象图”，你必须手动而不是使用`PDO::FETCH_CLASS`.

例如：

```
//$db is pdo:
// also notice im aliase the columns prefixing the name so that we can tell what belongs to
// post and what belongs to user, an alternative approach would be to use FETCH_NUMERIC,
// which just uses the column positions from the seelct statement as the keys
// so in this case post.id would be in the array as key 0, and user.name would be in the
// array as key 4
$stmt = $db->prepare('SELECT post.id as p_id, 
       post.text as p_text, 
       post.user_id as p_user_id, 
       user.id as u_id, 
       user.name as u_name
FROM POST INNER JOIN User on post.user_id = user.id');

$stmt->execute();

while (($row = $stmt->fetch(PDO::FETCH_ASSOC)) !== false) {
   print_r($row);
   /* will output:
      Array (
         'p_id' => 'value'
         'p_text' => 'value'
         'p_user_id' => 'value'
         'u_id' => 'value',
         'u_name' => 'value'
      )
   So now you need to decide how to create your objects with the information returned
   */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-15T07:36:06.467

不是对 OQ 的真正回应，而是因为它不断在 Google 上弹出（是的，我知道它已经有一年多了）。您会发现跳过循环并分别查询每个表会快得多。

```
    选择 post.id，
           post.text,
           post.user_id,
    FROM POST INNER JOIN 用户在 post.user_id = user.id
      $statement = $db -> 准备($query);
        $语句->执行（）；
        $statement -> setFetchMode(PDO::FETCH_CLASS, 'Post');
        $posts = $statement -> fetchAll();

    选择用户 ID，
           用户名
    FROM POST INNER JOIN 用户在 post.user_id = user.id
      $statement = $db -> 准备($query);
        $语句->执行（）；
        $statement -> setFetchMode(PDO::FETCH_CLASS, 'User');
        $users = $statement -> fetchAll();

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-23T14:26:38.457

如果您处理多个表，则可能使用 PDO::FETCH_NAMED 。或者使用 PDO::ATTR_FETCH_TABLE_NAMES。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-01T08:54:33.050

我的解决方法：

```
function groupQueryJoinClasses(\PDOStatement $stmt, $joinInfo = [], $idProperty = 'id')
{
    $result = [];

    $records = $stmt->fetchAll();

    if ( !empty($joinInfo) ) {
        foreach ($records as $record) {
            if ( !isset($result[$record->$idProperty]) ) {
                $result[$record->$idProperty] = $record;
            }
            foreach ($joinInfo as $target => $classInfo) {
                $vars = get_object_vars($record);
                $class = new $classInfo['class']();
                foreach ($vars as $key => $value) {
                    $keyData = explode('.', $key);
                    if ( $keyData[0] == $classInfo['prefix']) {
                        $class->$keyData[1] = $value;
                        unset($result[$record->$idProperty]->$key);
                    }
                }
                if ( !is_array( $result[$record->$idProperty]->$target) ) {
                    $result[$record->$idProperty]->$target = [];
                }
                $targetArray = &$result[$record->$idProperty]->$target;
                $targetArray[] = $class;
            }
        }
    } else {
        $result = $records;
    }

    return $result;
}

function getModel($query, $data, $entryClass, $joinInfo, $idProperty = 'id') {
    $pdo = new PDO(...);
    $stmt = $pdo->prepare($query);
    $stmt->execute($data);

    $stmt->setFetchMode(\PDO::FETCH_CLASS, $entryClass);

    return groupQueryJoinClasses($stmt, $joinInfo , $idProperty);
}

// Sample request

$query =
    'SELECT
        u.id as "id",
        p.id as "Post.id",
        p.name as "Post.name"
    FROM `user` u
    LEFT JOIN `posts` p ON p.user_id = u.id
    where id = :id'
;
$data = [ ':id' => 1 ];

$joinInfo = [
    'posts' => [
        'class' => Post::class,
        'prefix'=> 'Post'
    ]
];
$flowRules = getModel($query, $data, User::class, $joinInfo); 
```

也许对任何人来说都很有趣，或者也许有人会在这种方法中看到问题

# regex - 常规 exp 匹配字符串从开始直到满足某些字符

> ID：15202865
> 
> 赞同：0
> 
> 时间：2013-03-04T13:38:42.590
> 
> 标签：regex

我有一些长字符串，我试图捕获一个子字符串，直到遇到某个字符。假设我有以下字符串，并且我想在第一个＆符号之前获取文本。

```
abc.8965.aghtj&hgjkiyu5.8jfhsdj 
```

我想提取＆符号之前存在的内容：abc.8965.aghtj W 认为这会起作用：

```
grep'^.*&{1}' 
```

我会将其翻译为

```
^ start of string
.* match whatever chars
&{1} until the first ampersand is matched 
```

有什么建议吗？恐怕这需要我几个星期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:42:18.427

`{1}`与第一次出现不匹配；相反，它的意思是“完全匹配前面的模式/字符之一”，这与仅匹配字符（`&{3}`将匹配`&&&`）相同。

为了匹配 的*第一次*出现`&`，您需要使用`.*?`：

```
grep'^.*?&' 
```

通常，`.*`是贪婪的，意味着它尽可能匹配。这意味着您的模式将匹配*最后一个*＆符号而不是第一个。 `.*?`是非贪婪版本，在满足模式的同时尽可能少地匹配。

**更新：** grep 可能不支持该语法。这是另一种选择：

```
'^[^&]*&' 
```

它匹配任何不是 & 符号的东西，直到第一个 & 符号。

`-E`您可能还必须在 grep ( )中启用扩展正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:47:05.560

试试这个：

```
^.*?(?=&) 
```

它不会得到＆符号，只是它前面的文字

# php - Php 无法跨页面传递会话值（webmatrix）

> ID：15202866
> 
> 赞同：0
> 
> 时间：2013-03-04T13:38:51.020
> 
> 标签：php, session, session-variables, webmatrix

我开始使用 webmatrix，现在 iam 使用 php 入门网站模板。

在此模板中您无法登录。我搜索了所有代码，但发现它没有通过会话。也许它会创建但不会传递给其他页面。

如果有 user(logon.php):// 这个工作会话有价值

```
if ($statement->num_rows == 1)
{

    $statement->bind_result($uid,$uname);
    $statement->fetch();
    $_SESSION['userid']=$uid;
    $_SESSION['username']=$uname;
    echo $_SESSION['username']; // yes its printing username
    header ("Location: index.php");
} 
```

检查（header.php）：

```
 if (logged_on())
    {
        echo '<li><a href="/logoff.php">Sign out</a></li>' . "\n";
    } 
```

登录函数：//这不起作用

```
function logged_on()
{
    return isset($_SESSION['userid']); //empty
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:20:20.847

如果您使用 webmatrix 或类似的东西，您需要指定会话存储文件夹。

只需将此代码粘贴到页面顶部即可。webmatrix 创建会话但不存储它。

```
session_save_path($_SERVER[DOCUMENT_ROOT]."/tmp"); 
```

在此之后，您需要创建 tmp 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:40:33.083

您需要`session_start()`在您希望能够使用会话变量的任何脚本的顶部。

# controls - Mahout 的综合控制数据示例

> ID：15202876
> 
> 赞同：3
> 
> 时间：2013-03-04T13:39:14.353
> 
> 标签：controls, mahout, synthetic

Mahout 的 wiki 包含一个在合成控制数据上使用集群的示例（[此处](https://cwiki.apache.org/MAHOUT/clustering-of-synthetic-control-data.html)）。

该示例包含一个数据样本，其中包含 100 行数据，用于数据中的 6 个模式中的每一个。当我运行示例代码时，我期望某些聚类方法会提供更好或更差的聚类，但它们或多或少会提供对 6 种模式进行分组的聚类。

这根本不是我在运行示例时看到的。作为初学者，这非常令人困惑。*此外，由于数据未标准化且循环数据的周期不*匹配，因此很难看出这些原始数据如何正确聚类。

我错过了什么吗？一个更有经验的 Mahout-er 能否为人们在这个特定示例中的预期提供一些指导？

我对可以对时间序列数据中的模式进行聚类的场景非常感兴趣。我尝试对数据进行规范化并使用点对点增量作为聚类的基础，并获得了稍微好一点的结果。更有经验的数据分析师是否对更好的方法有建议？

# python - python中的直接连接（DC）库

> ID：15202880
> 
> 赞同：3
> 
> 时间：2013-03-04T13:39:18.977
> 
> 标签：python, networking, p2p

Python中是否有任何库可用于编写方向连接（DC）客户端？我正在查看 DC 客户端，它们中的大多数都基于 c、c++ 和 java，并且在 Python 中没有（[除非有一个小的实现）。](http://pydc.sourceforge.net/)

# foursquare - 从foursquare页面获取市长和最后评论

> ID：15202884
> 
> 赞同：0
> 
> 时间：2013-03-04T13:39:27.137
> 
> 标签：foursquare

我怎样才能从foursquare page获得最后的评论和市长是谁？

假设这是网址：

[https://foursquare.com/v/anatomska-centrala/4dab1ba55da3ba8a479999b2](https://foursquare.com/v/anatomska-centrala/4dab1ba55da3ba8a479999b2)。

我需要以某种方式获取这些数据：

**最后评论：**

Damir P. August 23, 2011 najjači Fitness centar u gradu

**市长：**

市长：Mrgud N. 过去 60 天内有 17 次签到

我尝试使用foursquare的**Venue Detail**并将其与url的值（4dab1ba55da3ba8a479999b2）结合，但没有成功。

我没有使用foursquare API的经验，所以任何帮助都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:19:54.603

您确实可以从场地详细信息端点检索市长和所有提示（“评论”）。试试这个：[https ://developer.foursquare.com/docs/explore#req=venues/4dab1ba55da3ba8a479999b2](https://developer.foursquare.com/docs/explore#req=venues/4dab1ba55da3ba8a479999b2)

在响应中，寻找`response.venue.mayor`和`response.venue.tips`。

# objective-c - 在 AlertView 之前显示加载符号或 ActivityIndi cator

> ID：15202888
> 
> 赞同：0
> 
> 时间：2013-03-04T13:39:39.523
> 
> 标签：objective-c, xcode

在我的应用程序中，当单击保存按钮时，我需要显示一个加载符号，直到我得到`alertView`：

> 联系人已成功保存。

我用`UIActivityIndicator`了哪个不起作用。

```
spinner = [[UIActivityIndicatorViewalloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
[spinner startAnimating];
[alertView addSubview:spinner]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:21:39.543

您必须在之后设置微调器的位置`[alertView show]`；例如：`spinner.center = CGPointMake(alertView.frame.size.width/2,alertView.frame.size.height/2);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:52:39.330

很难理解你的代码到底是什么，但是在你想显示动画的地方试试这个：

```
[NSThread detachNewThreadSelector:@selector(threadStartAnimating:) toTarget:self withObject:nil] 
```

这是启动动画的方法 - 将它定位在同一个类中。

```
- (void) threadStartAnimating:(id)data {
 spinner = [[UIActivityIndicatorViewalloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
[spinner startAnimating];
[alertView addSubview:spinner];
} 
```

# sql - 如何在两个表之间的组中实现递归连接？

> ID：15202890
> 
> 赞同：3
> 
> 时间：2013-03-04T13:39:54.160
> 
> 标签：sql, oracle, join, oracle11g

我在一个名为`AVAILABLE_TEMPLATES`. 这是一个简单的例子：

```
TEMPLATE_GROUP TEMPLATE_NAME LOCALE
-------------- ------------- ------
RO              LTRU          fi_FI  
RO              LTRU          se_SE  
RO              LTRU          en_US  
BL              V1PRO         se_SE  
BL              V1PRO         en_US 
```

我有另一个表，其中包含名为`SYSTEM_LOCALES`.

```
SYS_LOCALE
------
lv_LV  
fi_FI  
sv_SE  
en_US 
```

我希望通过加入这两个表来获得的数据应该具有表中行的笛卡尔积和表中的`SYS_LOCALE`不同`TEMPLATE_GROUP`/ 。`TEMPLATE_NAME``AVAILABLE_TEMPLATES`

我们的默认语言环境是`fi_FI`. 对于`TEMPLATE_NAME`a 中的每个`TEMPLATE_GROUP`，我想检查一个匹配的语言环境是否可用，如果是，它应该返回为`USE_LOCALE`. 如果找不到匹配的语言环境，我想返回系统的默认语言环境，即`fi_FI`它是否存在于`TEMPLATE_NAME`and `TEMPLATE_GROUP`as 中`USE_LOCALE`。

以下是加入这两个表应该返回的内容：

```
TEMPLATE_GROUP TEMPLATE_NAME SYS_LOCALE  USE_LOCALE
-----------    ------------- ------      ----------
RO             LTRU          lv_LV       fi_FI      --There's a fi_FI locale but no lv_LV 
RO             LTRU          fi_FI       fi_FI    
RO             LTRU          se_SE       se_SE    
RO             LTRU          en_US       en_US    
BL             V1PRO         lv_LV       NULL       --There's no lv_LV or a fi_FI locale 
BL             V1PRO         fi_FI       NULL       --There's no fi_FI locale
BL             V1PRO         se_SE       se_SE    
BL             V1PRO         en_US       en_US 
```

我一直无法弄清楚这一点，并且对此一无所知。是否必须通过递归来完成？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T14:16:50.253

允许您在不多次读取表的情况下执行此操作的唯一构造是[分区外连接](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#i2177515)。

这是您的数据集的示例：

```
SQL> create table available_templates (template_group,template_name,locale)
  2  as
  3  select 'RO', 'LTRU', 'fi_FI' from dual union all
  4  select 'RO', 'LTRU', 'se_SE' from dual union all
  5  select 'RO', 'LTRU', 'en_US' from dual union all
  6  select 'BL', 'V1PRO', 'se_SE' from dual union all
  7  select 'BL', 'V1PRO', 'en_US' from dual
  8  /

Table created.

SQL> create table system_locales (sys_locale)
  2  as
  3  select 'lv_LV' from dual union all
  4  select 'fi_FI' from dual union all
  5  select 'se_SE' from dual union all
  6  select 'en_US' from dual
  7  /

Table created. 
```

和分区外连接：

```
SQL> select at.template_group
  2       , at.template_name
  3       , sl.sys_locale
  4       , nvl
  5         ( at.locale
  6         , max(decode(at.locale,'fi_FI',at.locale)) over (partition by at.template_group, at.template_name)
  7         ) use_locale
  8    from system_locales sl
  9         left outer join available_templates at
 10           partition by (at.template_group,at.template_name)
 11           on (at.locale = sl.sys_locale)
 12  /

TEMPLATE_GROUP TEMPLATE_NAME SYS_LOCALE USE_LOCALE
-------------- ------------- ---------- ----------
BL             V1PRO         en_US      en_US
BL             V1PRO         fi_FI
BL             V1PRO         lv_LV
BL             V1PRO         se_SE      se_SE
RO             LTRU          en_US      en_US
RO             LTRU          fi_FI      fi_FI
RO             LTRU          lv_LV      fi_FI
RO             LTRU          se_SE      se_SE

8 rows selected. 
```

这是表只被扫描一次的证据：

```
 SQL> select * from table(dbms_xplan.display_cursor(null,null,'allstats last'))
      2  /

    PLAN_TABLE_OUTPUT
    ---------------------------------------------------------------------------------------------------------------------------------------
    SQL_ID  57br33gc6n1sc, child number 0
    -------------------------------------
    select at.template_group      , at.template_name      , sl.sys_locale
       , nvl        ( at.locale        ,
    max(decode(at.locale,'fi_FI',at.locale)) over (partition by
    at.template_group, at.template_name)        ) use_locale   from
    system_locales sl        left outer join available_templates at
     partition by (at.template_group,at.template_name)          on
    (at.locale = sl.sys_locale)

    Plan hash value: 921719364

-----------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                    | Name                | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
-----------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT             |                     |      1 |        |      8 |00:00:00.01 |       6 |       |       |          |
|   1 |  WINDOW BUFFER               |                     |      1 |      1 |      8 |00:00:00.01 |       6 |  2048 |  2048 | 2048  (0)|
|   2 |   VIEW                       |                     |      1 |      1 |      8 |00:00:00.01 |       6 |       |       |          |
|   3 |    MERGE JOIN PARTITION OUTER|                     |      1 |      1 |      8 |00:00:00.01 |       6 |       |       |          |
|   4 |     SORT JOIN                |                     |      3 |      4 |      9 |00:00:00.01 |       3 |  2048 |  2048 | 2048  (0)|
|   5 |      TABLE ACCESS FULL       | SYSTEM_LOCALES      |      1 |      4 |      4 |00:00:00.01 |       3 |       |       |          |
|*  6 |     SORT PARTITION JOIN      |                     |      9 |      5 |      5 |00:00:00.01 |       3 |  2048 |  2048 | 2048  (0)|
|   7 |      TABLE ACCESS FULL       | AVAILABLE_TEMPLATES |      1 |      5 |      5 |00:00:00.01 |       3 |       |       |          |
-----------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   6 - access("AT"."LOCALE"="SL"."SYS_LOCALE")
       filter("AT"."LOCALE"="SL"."SYS_LOCALE")

Note
-----
   - dynamic sampling used for this statement (level=2)

35 rows selected. 
```

问候，
罗布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T14:03:52.780

您可以执行以下操作：

```
select t_base.template_group, t_base.template_name, l.sys_locale, 
      nvl( t.locale, default_locale)  use_locale
  from system_locales l
       cross join (select t.template_group, t.template_name, 
                          max(case t.locale when 'fi_FI' then  t.locale end) default_locale
                     from available_templates t
                    group by t.template_group, t.template_name) t_base
       left outer join available_templates t
               on t.template_group = t_base.template_group
              and t.template_name = t_base.template_name
              and t.locale = l.sys_locale
 order by 1, 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T14:01:54.687

```
select
   dat.template_group,
   dat.template_name,
   sl.sys_locale,
   nvl(at.locale, dat.fi_fi) as use_locale
from
   (
      select
         template_group,
         template_name,
         max(decode(locale, 'fi_FI', 'fi_FI')) as fi_fi
      from
         AVAILABLE_TEMPLATES
      group by
         template_group,
         template_name
   ) dat
   cross join SYS_LOCALE sl
   left join AVAILABLE_TEMPLATES at
      on at.template_group = dat.template_group
      and at.template_name = dat.template_name
      and at.locale = sl.sys_locale 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T14:03:16.820

尝试：

```
with templates as 
(select template_group, template_name, max(case locale when 'fi_FI' then locale end) available_default
 from available_templates
 group by template_group, template_name),
template_combinations as
(select t.*, s.sys_locale
 from templates t
 cross join sys_locale s)
select c.template_group, c.template_name, c.sys_locale, coalesce(a.locale, c.available_default) use_locale
from template_combinations c
left join available_templates a 
on c.template_group = a.template_group and c.template_name = a.template_name and c.sys_locale = a.locale 
```

从提供的信息来看，您的数据库似乎没有正确规范化 - 至少应该有一个额外的表用于 template_group 和 template_name 的组合。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T14:03:23.470

像这样的东西？

它制作了区域设置和所有组/名称星座的笛卡尔积。然后它为每个组/名称/语言环境返回一行。

CASE 语句返回：

*   区域设置，当它存在于该组时
*   fi_FI 存在时
*   如果没有，则为 null

* * *

```
select
  sl.SYS_LOCALE,
  at.TEMPLATE_GROUP,
  at.TEMPLATE_NAME,
  CASE 
    WHEN EXISTS (SELECT 1 FROM AVAILABLE_TEMPLATES at_loc 
      WHERE 
        at_loc.TEMPLATE_GROUP = at.TEMPLATE_GROUP, 
        at_loc.TEMPLATE_NAME = at_fi.TEMPLATE_NAME
        at_loc.LOCALE = sl.SYS_LOCALE) 
      THEN sl.SYS_LOCALE

    WHEN EXISTS (SELECT 1 FROM AVAILABLE_TEMPLATES at_fi 
      WHERE 
        at_fi.TEMPLATE_GROUP = at.TEMPLATE_GROUP, 
        at_fi.TEMPLATE_NAME = at_fi.TEMPLATE_NAME
        at_fi.LOCALE = 'fi_FI') 
      THEN 'fi_FI'
    ELSE NULL
  END as USE_LOCALE
from SYSTEM_LOCALES sl,
    (select 
      TEMPLATE_GROUP, 
      TEMPLATE_NAME
    from AVAILABLE_TEMPLATES
    GROUP BY TEMPLATE_GROUP, TEMPLATE_NAME)
    allgroups 
```

# timeout - BITS 上传响应超时

> ID：15202891
> 
> 赞同：0
> 
> 时间：2013-03-04T13:39:57.210
> 
> 标签：timeout, microsoft-bits

在我们的 Windows 应用程序中，我们使用 BITS 上传协议（带有上传回复）将文件上传到我们的服务器，处理它们，然后等待响应。有时服务器细化可能会很长（>=10 分钟），我们会遇到超时问题。

根据文件[http://download.microsoft.com/download/9/5/E/95EF66AF-9026-4BB0-A41D-A4F81802D92C/[MC-BUP].pdf](http://download.microsoft.com/download/9/5/E/95EF66AF-9026-4BB0-A41D-A4F81802D92C/%5BMC-BUP%5D.pdf)

> 3.1.2.2 上传响应超时 该计时器限制从服务器接收第 2.2 节中提到的任何响应所花费的时间，无论涉及的状态转换如何。默认值为 5 分钟；合法范围是任何正值。

有没有办法改变5分钟的默认值？如何将其设置为更高的值？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T13:40:23.953

我们尝试修改一些注册表项（如`TimeQuantaLenght`），但并没有解决问题。

为了解决，首先我们扩大[`request timeout`](https://stackoverflow.com/questions/2414441/how-to-increase-request-timeout-in-iis7-0)网站。

[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362818%28v=vs.85%29.aspx)中报告的第二个：

> 服务器应用程序必须在五分钟内提供响应。如果服务器应用程序在五分钟内没有回复，则作业进入瞬态错误状态。当重试延迟到期时，BITS 服务器将向服务器应用程序发送另一个通知（应编写服务器应用程序来处理重复通知）。

所以我们处理重复的请求！如果是`Transient Error`BITS 协议，请尝试在为`MinimunRetryDelay`.

我们自己处理问题；我们用一个 GUID 标识每个传输，如果传输的 GUID 进入瞬态错误状态，然后重新启动，我们检查传输是否已经发生并处理相应的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:45:32.893

来自维基百科，对于上传作业[BITS 需要具有 BIT 服务器扩展的 IIS Web 服务器](http://en.wikipedia.org/wiki/Background_Intelligent_Transfer_Service#Technology)：

> BITS 1.0 版仅支持下载。从 1.5 版开始，BITS 支持下载和上传。上传需要在接收端使用带有 BITS 服务器扩展的 IIS Web 服务器。

我不知道您是如何使用 BITS 协议的，但是，[此页面](http://msdn.microsoft.com/en-us/library/aa362813.aspx)说明了如何使用 BITS Admin 命令行工具来创建下载或上传作业并监控其进度。下面的这个开关可能会对您有所帮助：

> **/SetNoProgressTimeout** *作业超时*
> 
> 设置 BITS 在出现第一个暂时性错误后尝试传输文件的时间长度（以秒为单位）。

[这个其他页面](http://msdn.microsoft.com/en-us/library/aa362818%28v=vs.85%29.aspx)描述了BITS IIS 扩展属性。我引用了你可能需要的那个。

> 后台智能传输服务 (BITS) 使用 ISAPI 扩展 IIS 以支持上传作业。BITS 使用这些属性来确定如何上传文件。
> 
> **BITSSessionTimeout**数据类型：**DWORD**
> 
> 如果上传文件没有进展，则保持连接的秒数；当取得进展时，计时器会重置。如果达到超时，BITS 会关闭连接并清理与会话关联的数据。

# android - 当应用程序进入前台时，保持 EditText 的键盘打开/关闭状态

> ID：15202895
> 
> 赞同：28
> 
> 时间：2013-03-04T13:40:07.903
> 
> 标签：android, android-widget

我有一个`Activity`在配置更改（需要）时重新创建的。我有一个在其布局中使用单个`DialogFragment`调用的哪个。`setRetainInstance(true)``EditText`

在 DialogFragment 中，`onActivityCreated`我调用：

```
getDialog().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE); 
```

A）如果我打开键盘，那么当我将应用程序放入后台然后将其带到前台时，**我希望键盘仍然显示**。

B）如果我关闭键盘（EditText 仍然具有焦点并显示所需行为的光标），那么如果我将应用程序置于后台然后将其置于前台，**我希望键盘仍然关闭。**

我似乎无法同时实现 A) 和 B)。当我将应用程序带到前台时，键盘总是关闭。我试过 .SOFT_INPUT_STATE_ALWAYS_VISIBLE 但是键盘总是打开的。

提前感谢您对我如何实现这一目标的任何建议。我也希望在旋转过程中保持这种键盘状态，但我将把它留到另一天。彼得。

**编辑** 请注意，我**不想**阻止在配置更改时重新创建活动。

我还尝试了`WindowManager.LayoutParams.SOFT_INPUT_STATE_UNCHANGED`在手机旋转期间保持键盘打开/关闭状态（单窗格布局）但 a) 不适用于双窗格布局 b) 将应用程序置于前台时不保持键盘状态。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T10:05:16.097

您好首先感谢您提出一个有趣的问题。它让我尝试了代码。在这里，我正在描述我的解决方案。

**为了找到解决方案，我必须知道两件事**

**1.**如何检测软键盘是否可见

**2.**如何设置软键盘可见或隐藏。

**经过一番搜索后，我在以下步骤中得到了解决方案，** 我意识到检测`softkeyboardstate`（可见/隐藏）的最佳解决方案是使用[ViewTreeObserver](http://developer.android.com/reference/android/view/ViewTreeObserver.html)。如果您不知道，我直接指向一个如此答案以了解它。这是[链接](https://stackoverflow.com/a/9108219/931982)。

并设置`softkeyboardstate`我刚刚使用的`Window.setSoftInputMode`方法。

并了解用户交互我覆盖`onUserInteraction`方法

保留了两个标志。一个标志是保存`keyboardstate`另一个是知道应用程序是否进入后台

**代码：**

**1\. 变量声明**

```
int lastDiff = 0;
volatile boolean flag = false;
volatile int flag2 = 0; 
```

**2.`ViewTreeObserver`**

```
activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(
    new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            Rect r = new Rect();
            activityRootView.getWindowVisibleDisplayFrame(r);

            int heightDiff = activityRootView.getRootView()
                    .getHeight() - (r.bottom - r.top);
            if (lastDiff == heightDiff)
                return;
            lastDiff = heightDiff;
            Log.i("aerfin","arefin "+lastDiff);
            if (heightDiff > 100) { // if more than 100 pixels, its
                                    // probably a keyboard...
                flag2 = 0;
            } else {
                if (flag == false)
                    flag2 = 1;
            }
        }
    }); 
```

**3.处理用户交互**

```
 @Override
 public void onUserInteraction() {
     super.onUserInteraction();
     flag = true;
 } 
```

**4\. 最后`onPause`和`onResume`**

```
@Override
protected void onPause() {
    super.onPause();
    flag = true;
}

@Override
protected void onResume() {
    flag = false;

    switch (flag2) {
    case 0:
        getWindow().setSoftInputMode(
                WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
        break;
    case 1:
        getWindow().setSoftInputMode(
                WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);

        break;
    default:
        break;
    }

    super.onResume();
} 
```

**解释：**

这里我使用了两个标志（`flag2`和`flag`）。`flag2`保留`keyboardstate`并`flag`保留应用程序是否进入后台或是否有任何用户交互。`flag`之所以使用，是因为当应用程序进入后台时，首先它会隐藏键盘。从上面的代码中可以很容易地理解其他事情。

**测试：**

在 s2(ics)、desire s (ics)、galaxy y (2.3.6) 中测试

**最后评论：**

我写的代码很快，所以可能会错过一些其他的优化。也有可能出现特殊情况。如果屏幕因键盘以外的其他原因发生变化，则可能无法检测到键盘状态。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T10:58:13.003

您应该使用一个标志`(boolean kbShowing)`来保持当前的键盘状态，例如`kbShowing = true`在键盘显示时设置，否则设置`kbShowing = false`。

`onCreate`

```
 showKB(); // if keyboard is not showed automatically. 
```

`onRestart`

```
 if(kbShowing)
        showKb(); // if keyboard is not showed automatically. 
    else 
        hideKb(); // if keyboard is showed automatically. 
```

如果您不知道如何检测键盘何时显示或隐藏，请查看 Stefan 对此主题的回答[How to capture the "virtual keyboard show/hide" event in Android?](https://stackoverflow.com/questions/4312319/howto-capture-the-virtual-keyboard-show-hide-event-in-android)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T06:44:21.207

I'd extend Wayne's approach by overwriting and creating your own `EditText` widget that you should use throughout your whole app.

```
public class PJLsEditText extends EditText 
{
    public PJLsEditText(Context context) {
        super(context);
        saveKbState();
    }

    public PJLsEditText(Context context, AttributeSet attrs) 
    {
        super(context, attrs);
        saveKbState();
    }

    private void saveKbState() 
    {
        //get keyboard state and set a flag either in a static class or as SharedPreference
    }

    // I'm not sure if EditText objects get destroyed on configuration change. 
    // If so, you might need to overwrite the onConfigurationChanged method here, 
    // as well...
} 
```

I assume this should help you to always know the last state of the keyboard, even if changed through Dialogs. You can hide or show the keyboard then according to this flag in your `onResume` and `onPause` methods.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T16:36:34.000

您是否尝试在活动的清单文件中添加键盘状态：

```
 android:windowSoftInputMode="stateAlwaysVisible|adjustPan"> 
```

这将处理您问题的轮换部分，并且也应该在 onResume 上工作。stateAlwaysVisible 将在 onCrate 上启动键盘，而 adjustPan 将处理旋转。

这是我的清单文件中的一项活动的示例：

```
<activity
        android:name=".GMax3Main"
        android:label="@string/app_name" 
        android:windowSoftInputMode="stateAlwaysVisible|adjustPan">
        <intent-filter>
            <action android:name="com.medeasy.GMax3.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

希望这可以帮助。

在我的活动类中，我在类的 onCreate 方法上打开我的软键盘，如下所示：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    new UserSync().execute();
    setContentView(R.layout.main);

    InputMethodManager imm = (InputMethodManager)
            GMax3Main.this.getSystemService(Context.INPUT_METHOD_SERVICE);

        if (imm != null){
            imm.toggleSoftInput(InputMethodManager.RESULT_SHOWN, 0);
        } 
```

然后我`android:windowSoftInputMode="stateAlwaysVisible|adjustPan">`在我的清单文件中调用我上面显示的内容。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-07T13:31:13.817

在**类级别**声明您的**EditText** ...

 **`EditText editText;`

现在覆盖活动的**onResume()**和**onPause()**方法...

```
 @Override
    protected void onResume() 
    {
        // TODO Auto-generated method stub
        super.onResume();
        editText.requestFocus();

        editText.postDelayed(new Runnable() {
            @Override
            public void run() {
                InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.showSoftInput(editText, InputMethodManager.SHOW_FORCED);
            }   
        }, 100);
    }

    @Override
    protected void onPause() 
    {
        // TODO Auto-generated method stub
        super.onPause();
        editText.postDelayed(new Runnable() {
            @Override
            public void run() {
                InputMethodManager imm = (InputMethodManager)getSystemService(
                          Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(editText.getWindowToken(), 0);
            }   
        }, 200);
    } 
```

* * *

这段代码非常适合我。

享受 - ：D

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-07T15:20:55.897

如果键盘打开并设置一个标志，我可能会检查 onPause （我认为只有像下面的示例这样的骇人听闻的方法）：

```
final View activityRootView = findViewById(R.id.activityRoot);
activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
@Override
public void onGlobalLayout() {
    int heightDiff = activityRootView.getRootView().getHeight() - activityRootView.getHeight();
    if (heightDiff > 100) { // if more than 100 pixels, its probably a keyboard...
        ... do something here
    }
 }
}); 
```

根据这里的答案： [如何检查Android中软件键盘的可见性？](https://stackoverflow.com/questions/2150078/how-to-check-visibility-of-software-keyboard-in-android)

在 onResume() 中设置：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

或者：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE); 
```**

# android - 性能不佳的 Lint 警告 - 80 多次查看

> ID：15202900
> 
> 赞同：1
> 
> 时间：2013-03-04T13:40:24.717
> 
> 标签：android, xml, performance, lint

我收到此 lint 警告错误： `highscores.xml has more than 80 views bad for performance`. 这是我的高分表，有 15 行和 3 列。这是我的应用程序的精简版，我的付费版本将容纳 30 行。

我的问题是如何优化这段代码？一定有更好的方法。

**高分.xml**

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/relativelayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:stretchColumns="*"
    android:orientation="vertical"
    android:paddingLeft="16dp"
    android:paddingRight="16dp"
    android:paddingTop="5dp"
    android:paddingBottom="65dp"
    android:background="@drawable/scroll" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:textStyle="bold"
        android:textSize="18sp"
        android:paddingBottom="10dp"
        android:paddingTop="65dp" />

    <LinearLayout
        android:id="@+id/linearlayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:paddingTop="5dp" >

        <Button 
            android:id="@+id/homeBtn"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:textSize="14sp" />

        <Button 
            android:id="@+id/clearHS"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:textSize="14sp" />
    </LinearLayout>

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="8dp"
        android:paddingRight="8dp"
        android:paddingTop="8dp"
        android:paddingBottom="8dp"
        android:background="@drawable/scrollviewborder"
        android:layout_below="@id/title"
        android:layout_above="@id/linearlayout"
        android:fillViewport="true"
        android:scrollbars="none" >

        <TableLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r1s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r1c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r1b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>

            <View 
                android:layout_width="fill_parent"
                android:layout_height="1dp"       
                android:background="#C2BEBF" />

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r2s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r2c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r2b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>

            <View 
                android:layout_width="fill_parent"
                android:layout_height="1dp"       
                android:background="#C2BEBF" />

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r3s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r3c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r3b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>

            <View 
                android:layout_width="fill_parent"
                android:layout_height="1dp"       
                android:background="#C2BEBF" />

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r4s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r4c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r4b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>

            <View 
                android:layout_width="fill_parent"
                android:layout_height="1dp"       
                android:background="#C2BEBF" />

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r5s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r5c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r5b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>

            <View 
                android:layout_width="fill_parent"
                android:layout_height="1dp"       
                android:background="#C2BEBF" />

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r6s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r6c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r6b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>

            <View 
                android:layout_width="fill_parent"
                android:layout_height="1dp"       
                android:background="#C2BEBF" />

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r7s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r7c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r7b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>

            <View 
                android:layout_width="fill_parent"
                android:layout_height="1dp"       
                android:background="#C2BEBF" />

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r8s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r8c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r8b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>

            <View 
                android:layout_width="fill_parent"
                android:layout_height="1dp"       
                android:background="#C2BEBF" />

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r9s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r9c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r9b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>

            <View 
                android:layout_width="fill_parent"
                android:layout_height="1dp"       
                android:background="#C2BEBF" />

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r10s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r10c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r10b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>

            <View 
                android:layout_width="fill_parent"
                android:layout_height="1dp"       
                android:background="#C2BEBF" />

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r11s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r11c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r11b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>

            <View 
                android:layout_width="fill_parent"
                android:layout_height="1dp"       
                android:background="#C2BEBF" />

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r12s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r12c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r12b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>

            <View 
                android:layout_width="fill_parent"
                android:layout_height="1dp"       
                android:background="#C2BEBF" />

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r13s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r13c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r13b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>

            <View 
                android:layout_width="fill_parent"
                android:layout_height="1dp"       
                android:background="#C2BEBF" />

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r14s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r14c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r14b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>

            <View 
                android:layout_width="fill_parent"
                android:layout_height="1dp"       
                android:background="#C2BEBF" />

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/r15s"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="25"
                    android:gravity="center"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/r15c"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="75"
                    android:gravity="center"
                    android:textSize="14sp" />

                <Button
                    android:id="@+id/r15b"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:gravity="center"
                    android:textSize="14sp" />
            </TableRow>
        </TableLayout>
    </ScrollView>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T13:42:07.097

使用 a`ListView`而不是 a 的`TableLayout`内部`ScrollView`。这不仅允许您根据可用的屏幕大小仅拥有实际需要的行数，而且您可以摆脱按钮，根据单击列表项执行按钮应该执行的任何操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-13T19:50:50.943

在您开始考虑应用程序的精简/付费版本之前，我是否可以建议您创建一些应用程序来学习所涉及的过程和语言？

想要为他们的应用程序收费的开发人员正在询问如何使用 ListView，这一事实几乎让我想哭。这正是我不再从事开发工作的原因，因为许多没有经验的程序员提出了先赚钱，然后再学习如何编程的想法。

我也很好奇你所有额外的 1dp 大小的 View 元素。使用布局，您可以定义 paddingTop=1dp 或 marginTop=1dp 并删除整个元素。

此外，您应该在使用 layout_weight 之前了解它的作用。当每个布局没有兄弟时，将每个布局设置为 layout_weight=1 是没有意义的。

此外，在每个视图上使用重力=中心也不好。您可以在父布局中使用 layout_gravity 或重力标签来影响子布局的重力。

看起来这个 XML 是由 WYSIWYG 生成的，对后端语言没有真正的了解。我们都从这里的提问中学习，但你必须问问自己，考虑到经验丰富的作者发布的免费软件数量，你会为初学者支付软件费用吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T13:47:15.093

如果您非常喜欢创建`TableLayout`唯一的，那么您可以`TableRow`以编程方式添加您的而不是在您的中创建所有内容`layout.xml`（这将避免`Lint`警告并且您可以根据自己的意愿更改表格行）。这是有关如何执行此操作的片段。

```
TableLayout table = new TableLayout(this);

FrameLayout.LayoutParams lp = new FrameLayout.LayoutParams(
        ViewGroup.LayoutParams.FILL_PARENT,
        ViewGroup.LayoutParams.FILL_PARENT);
table.setLayoutParams(lp);
table.setStretchAllColumns(true);

TableLayout.LayoutParams rowLp = new TableLayout.LayoutParams(
        ViewGroup.LayoutParams.FILL_PARENT,
        ViewGroup.LayoutParams.FILL_PARENT,
        1.0f);
TableRow.LayoutParams cellLp = new TableRow.LayoutParams(
        ViewGroup.LayoutParams.FILL_PARENT,
        ViewGroup.LayoutParams.FILL_PARENT,
        1.0f);
for (int r = 0; r < 2; ++r)
{
    TableRow row = new TableRow(this);
    for (int c = 0; c < 2; ++c)
    {
        Button btn = new Button(this);
        btn.setText("A");
        row.addView(btn, cellLp);
    }
    table.addView(row, rowLp);
}
setContentView(table); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-16T10:20:29.567

有一些方法可以避免这种情况：

**1.使用RecyclerView**

如果您的设计有许多彼此相似的 UI 组件，那么您应该使用`RecyclerView`，这是这种情况下的最佳方法，并在需要时处理视图的回收。

**2.使用复合Drawable**

如果您的 UI 在`TextView`or附近有图像，那么您可以使用属性将图像添加到`EditText`or`Button`的左侧、右侧、顶部、底部。您只需要使用复合可绘制对象，无需使用and 。`TextView``Button``EditText``drawable``LinearLayout``ImageView`

如果要在左侧添加图像，则可以像这样使用drawable left：

```
android:drawableLeft="@drawable/image" 
```

`TextView`这会将图像添加到或`Button`或`EditText`取决于您使用此属性的左侧。

**3.使用约束布局**

这种强大的布局确实可以帮助您在这个单一布局中设计复杂的 UI，从而帮助您消除布局的嵌套。

# c# - C#：无法调试 ASHX 处理程序

> ID：15202903
> 
> 赞同：1
> 
> 时间：2013-03-04T13:40:26.803
> 
> 标签：c#, debugging, handler, ashx

我有一个 ASP.net C# 4.0 网站项目。我正在使用 jQuery AJAX 回发调用 ASHX 处理程序。通常当我调试 C# 时，我使用此方法 Debug > Attach to Process > 选择 w3wp.exe 并开始调试。

当我使用我的 ASHX 处理程序执行此操作时，Visual Studio 显示“不会命中断点。没有为此文档加载任何符号。” 果然，当我对处理程序运行 AJAX 调用时，没有命中断点。

令我困惑的是，我可以调试 C# 文件，即 ASPX 文件的代码隐藏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:03:12.557

事实证明，Visual Studio 在实际尝试运行 ASHX 处理程序之前，实际上不会加载用于调试的符号。我的问题原来出在其他地方——调用处理程序的 jQuery 代码中的一个错误。

起初我没有看到这个错误，所以假设处理程序被击中。调用处理程序后，VS 将允许您对其进行调试。我没有意识到 ASHX 处理程序的行为方式是这样的，我认为它们会像普通的 C# 文件一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:44:09.933

这通常是因为您正在查看的（代码）不是您正在运行的。

尝试投入`Debugger.Launch();`并查看是否正确附加了调试器。如果确实如此，那么您的问题只是您正在查看与调试无关的代码的不同副本/版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:45:26.460

是否只有一个 w3wp.exe 尝试右键单击您的 asp.net 项目，从上下文菜单中选择“调试”和“启动新实例”。

# documentation - Doxygen 分组

> ID：15202909
> 
> 赞同：4
> 
> 时间：2013-03-04T13:40:44.593
> 
> 标签：documentation, doxygen

我对 doxygen 中的页面和组有疑问。我有一个项目，我用@defgroup 和@ingroup cmds 对类等进行了分组。到目前为止，这工作正常。

现在，我想通过降价页面向项目中添加特殊文档。这些页面应该出现在专用模块（组）中。我尝试使用@page 和@subpage cmds 创建页面。这很好用，但页面在菜单中显得很简单。

所以我尝试使用@ingroup 将它们添加到组中。但这并不像我猜的那样工作。是否可以将页面添加到模块（组）？

结果应如下所示：

```
Project
|-- Modules
| |-- "Module1"
| | |-- documentation page1 (from *.md file)
| | |-- class documentation
| |-- "Module2"
| | |-- documentation page2
| | |-- class documentation 
```

我希望你能帮帮我！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-10T05:21:04.370

在所描述的情况下，我们有两种类型的组文档：

1.  来自源文件的文档
2.  降价文件中的文档

我们需要为这个组创建树结构。

例如，我们创建 2 个组：

1.  *带有源代码文档的*主应用程序**
**   *文件*library.md中带有文档的**库***

 ****主应用程序*组源代码（用于 C++）可能如下所示：

```
/** @defgroup app Main Application */

/** @addtogroup app
  * @brief Main application description.
  *
  * @{
  */

int main() { return 0; } //do nothing

/** @} */ 
```

MarkDown 文件*library.md*包含简单的文本：

```
Library File {#library}
============

Library Page Content from library.md. 
```

现在要定义结构，我们创建包含内容的*mainpage.md*文件：

```
Pages {#mainpage}
============

Content:

- @subpage library

@defgroup Library
@addtogroup Library
@copydoc library
@{
@} 
```

`@subpage`mainpage.md 中的标记用于将所有页面从树隐藏到一个根项目（页面）。 `@defgroup`标记为降价文档创建新组。 `@copydoc`标签将内容从库页面复制到库组。

在屏幕截图上，您可以看到结果结构：

![Doxygen 组和页面](../Images/72670f7664a5c50f490f91c3c676513b.png)

请注意，在这种情况下，*模块组*名称和*页面*名称可能不同。您还可以使用`@copydoc`标记将 MarkDown 文件中的内容粘贴到源代码文档中。

参考： http: [//www.doxygen.nl/manual/grouping.html](http://www.doxygen.nl/manual/grouping.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:16:22.127

我已经使用 @{ 和 @} 命令完成了它，它的工作原理是这样的 -

```
/**  
 * @defgroup module_name Sample Module   
 * @{   
 *     @page page_name [Optional Page Heading]   
 *     here will be the texts for the page ...    
 * @}   
 */ 
```

如果您已经在某个地方定义了模块，则可能需要使用@addtogroup 而不是@defgroup。

希望这可以帮助。***

# python - python正则表达式重复模式匹配整个字符串

> ID：15202913
> 
> 赞同：2
> 
> 时间：2013-03-04T13:40:55.197
> 
> 标签：python, regex

我正在使用 python 正则表达式基础知识。我有一个字符串

> **开始***abcsd***结束***sff***开始***sdfsdf***结束***s***开始***dfsf***结束**。

如何在 不匹配整个字符串的情况下获取连续**开始**和**结束之间的字符串？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T13:42:04.963

在重新使用`start.*?end`。问号的意思是“尽可能少”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T14:04:59.707

```
>>> s = "startabcsdendsffstartsdfsdfendsstartdfsfend."
>>> import re
>>> p = re.compile('start(.*?)end')
>>> p.findall(s)
['abcsd', 'sdfsdf', 'dfsf'] 
```

# android - 计算的可用大小与系统统计数据不同

> ID：15202923
> 
> 赞同：2
> 
> 时间：2013-03-04T13:41:13.187
> 
> 标签：android

我正在尝试计算 Android 中使用的文件存储总量。我使用了[这里使用的递归函数](https://stackoverflow.com/questions/4040912/how-can-i-get-the-size-of-a-folder-on-sd-card-in-android)

当我从我的 SD 卡的总存储空间中减去这个大小时，我得到的数字与 Android 使用 StatFs 提供的数字不同。

```
StatFs stat = new StatFs(path);
long blockSize = stat.getBlockSize();
long availableBlocks = stat.getFreeBlocks();
return Formatter.formatFileSize(ctx, availableBlocks * blockSize); 
```

这不是几 Kb 的差异，而是在 16GB SD 卡中高达 2GB。

我检查了市场上的几个存储分析应用程序，它们也有同样的问题。他们说我有 8.3 Gb 空闲空间，而 Android 一直告诉它是 6 Gb（这与我将手机连接到 PC 时获得的值相同）。

我们在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:59:16.520

如果您只对总分区大小（而不是某个文件夹）感兴趣，您也可以使用 Java 的`File`类：

```
File f = new File("/mnt/sdcard/");

long free = f.getFreeSpace();
long total = f.getTotalSpace();
long usable = f.getUsableSpace(); 
```

此外，Android 可能会阻止 sd-apps 和数据的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:06:46.473

> 我使用了[这里使用的递归函数](https://stackoverflow.com/questions/4040912/how-can-i-get-the-size-of-a-folder-on-sd-card-in-android)

该函数计算包含的文件的大小：

> > 只需浏览所有文件并总结它们的长度：

...但是文件的大小不一定等于它在磁盘上占用的空间量。

> 这不是几 Kb 的差异，而是在 16GB SD 卡中高达 2GB。

此增量应随文件计数缩放。

# django - 发布一对多关系

> ID：15202924
> 
> 赞同：10
> 
> 时间：2013-03-04T13:41:15.060
> 
> 标签：django, one-to-many, django-rest-framework

我正在尝试通过 Django REST 框架向我的 Django 模型公开一个 API。

我有一个对象`Observation`。一个观察可以包含多个已观察到的事物。所以我这样表示：

```
class Observation(models.Model):

    photo_file = models.ImageField( upload_to=img_dir,   blank=True, null=True )
    titestamp = models.DateTimeField(blank=True, null=True)
    latitude = models.FloatField()
    longitude = models.FloatField()

class ObservedThing(models.Model):
    thing = models.ForeignKey(Thing) # the thing being observed
    observation = models.ForeignKey(Observation, related_name='observed_thing')
    value = models.FloatField() 
```

据我了解，这是一对多的关系。

我现在有一个 API 视图：

```
class ObsvList(generics.ListCreateAPIView):
    """
    API endpoint that represents a list of observations.
    """
    model = Observation
    serializer_class = ObsvSerializer 
```

和相应的序列化器：

```
class ObsvSerializer(serializers.ModelSerializer):

    observed_thing = serializers.PrimaryKeyRelatedField(many=True)

    class Meta:
        model = Observation 
```

我必须做些什么才能发布一个检测到几件事的观察结果？我想不明白。非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T10:18:01.427

（答案或多或少是从另一个[类似但不太清楚的问题](https://stackoverflow.com/questions/14978464/django-rest-nested-object-add-on-create-post-not-just-update-put)中复制的）

要在单个 POST 中创建多个相关对象，需要*可写的嵌套序列化*程序，但该序列化程序尚不可用。

完全支持是一项[正在进行](https://github.com/tomchristie/django-rest-framework/issues/395)的工作，但同时一个（hacky）解决方案是`create`在每种情况下覆盖视图中的方法：

```
class FooListCreateView(ListCreateAPIView):
    model = Foo
    serializer_class = FooSerializer

    def create(self, request, *args, **kwargs):
        data=request.DATA

        f = Foo.objects.create()

        # ... create nested objects from request data ...  

        # ...
        return Response(serializer.data, 
                        status=status.HTTP_201_CREATED,
                        headers=headers) 
```

可能并不理想，但它对我有用，直到出现正确的方法。

`Observation`另一种选择是使用单独的 POST 单独创建相关对象，并使用[PrimaryKeyRelatedField 或 HyperlinkedRelatedField](http://django-rest-framework.org/api-guide/relations.html)在最终`ObservedThing`POST 中建立关联。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-22T15:19:34.320

我知道这个帖子已经有了答案，但我开始努力解决这个问题，因为这篇文章是我的灵感之一，所以我想分享我的最终解决方案。它可能对某人有用。我有模型，所以父类：

```
#parent model class
class Parent(models.Model):

    id = models.AutoField(primary_key=True)
    field = models.CharField(max_length=45)

    class Meta:
        managed = False
        db_table = 'parent' 
```

然后，子类：

```
#child model class
class Child(models.Model):

    id = models.AutoField(primary_key=True)
    field = models.CharField(max_length=45)
    parent = models.ForeignKey(Parent, related_name='children')

    class Meta:
        managed = False
        db_table = 'child' 
```

我必须定义序列化程序，因为我不想创建一个路由器可访问的 url 来直接管理 Children 对象，但我想通过父 ModelViewSet 的 ModelViewSet 创建它们，这就是我需要的：

```
class ChildSerializer(serializers.ModelSerializer):
    class Meta:
        model = Child
        read_only_fields = ('id',)

class ParentSerializer(serializers.ModelSerializer):
    class Meta:
        model = Banner
        read_only_fields = ('id',)

class ParentSerializerNested(ParentSerializer):
    children = ChildSerializer(many=True) 
```

然后我准备创建 ModelViewSet，覆盖/扩展 create/update mixins，并使其通用，以便在其他情况下重用它：

```
class ParentChildViewSet(viewsets.ModelViewSet):

    def create(self, request, *args, **kwargs):
        serializer = self.serializer_parent(data=request.DATA,
                                            files=request.FILES)

        try:
            if serializer.is_valid():
                with transaction.commit_on_success():
                    self.pre_save(serializer.object)
                    parent = serializer.save(force_insert=True)
                    self.post_save(parent, created=True)

                    # need to insert children records
                    for child in request.DATA[self.child_field]:
                        child[self.parent_field] = parent.id
                        child_record = self.serializer_child(data=child)
                        if child_record.is_valid():
                            child_record.save(force_insert=True)
                        else:
                            raise ValidationError('Child validation failed')

                    headers = self.get_success_headers(serializer.data)

                    serializer.data[self.child_field] = self.serializer_child(
                        self.model_child.objects.filter(
                            **{self.parent_field: parent.id}).all(),
                            many=True).data
                    return Response(serializer.data,
                                    status=status.HTTP_201_CREATED,
                                    headers=headers)
        except ValidationError:
            pass
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST) 
```

因此，我可以在我的应用程序中的每个嵌套关系案例中重用它，如下所示：

```
class ParentViewSet(ParentChildViewSet):
    child_field = 'children'
    parent_field = 'parent'
    model = Parent
    model_child = Child
    serializer_class = ParentSerializerNested
    serializer_parent = ParentSerializer
    serializer_child = ChildSerializer 
```

最后，路由：

```
router = routers.DefaultRouter()
router.register(r'parents', ParentViewSet) 
```

它就像一个魅力！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:20:10.867

```
thing = models.ManyToManyField('Thing') 
```

您需要使用多对多关系来创建一个临时表，该表将自动存储键和关联数据。

# android - 触摸标记时的Android应用地图中心

> ID：15202928
> 
> 赞同：3
> 
> 时间：2013-03-04T13:41:18.977
> 
> 标签：android, google-maps, marker, google-maps-android-api-2

当我触摸地图片段（v.2）上的标记时，地图集中在触摸的标记位置上。我怎样才能放弃这种行为？是否可以？我想保留标题，但没有集中化。

非常感谢，

胡里奥

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T14:16:19.920

从[文档](https://developers.google.com/maps/documentation/android/marker#marker_click_events)中：

> 您可以使用 OnMarkerClickListener 来侦听标记上的点击事件。要在地图上设置此侦听器，请调用 GoogleMap.setOnMarkerClickListener(OnMarkerClickListener)。当用户单击标记时，将调用 onMarkerClick(Marker) 并将标记作为参数传递。此方法返回一个布尔值，指示您是否已使用该事件（即，您想要抑制默认行为）。如果它返回 false，那么除了您的自定义行为之外，还将发生默认行为。标记单击事件的默认行为是显示其信息窗口（如果可用）并移动相机以使标记位于地图的中心。

这样，您可以使用自定义行为（显示信息窗口）覆盖默认行为（中心标记+显示信息窗口）。像这样的东西应该工作：

在你的`OnMarkerClickListener`：

```
public boolean onMarkerClick(Marker marker) {
    marker.showInfoWindow();
    return true;
} 
```

# android - 如何在 Android 应用中为 Facebook 登录创建自定义登录按钮？

> ID：15202935
> 
> 赞同：4
> 
> 时间：2013-03-04T13:41:52.667
> 
> 标签：android, facebook-graph-api, facebook-android-sdk

我已经使用 Facebook 的自定义登录按钮 ( `com.facebook.widget.LoginButton`) 实现了 fb 登录。

现在我想在自定义按钮单击时打开 Facebook 登录对话框。有可能这样做吗？或者，我是否需要每次都需要实施 Fb `LoginButton`？

根据 Facebook SDK 3.0 文档的建议，它总是自行打开对话框`LoginButton`，这很奇怪。

# android - 在片段类中发送/获取意图附加信息

> ID：15202937
> 
> 赞同：0
> 
> 时间：2013-03-04T13:41:59.383
> 
> 标签：android, android-fragments, android-listfragment, android-fragmentactivity, android-support-library

问题在标题中。在正常活动中我使用：

发送数组：

```
b.putParcelable(Activity.EXTRA_ARRAY, xy);
i.putExtras(b);
startActivity(i); 
```

要获取数组：

```
Bundle b = getIntent().getExtras();
Array... xy = b.getParcelable(xy); 
```

如何在片段类中使用它？发送和接收此意图。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T05:16:23.683

获得捆绑包有三种不同的场景。

1.  如果要使用 Bundle 参数来初始化片段，则必须`myfragment.setArguments(mybundle);`在第一次创建片段时使用。

2.  如果您希望您的片段使用传递给活动的意图，您可以调用：

    getActivity().getIntent()

3.  如果您只希望您的片段拦截一个意图，那么您必须使用 LocalBroadcastManager 注册您的片段。
    您可以在此处查看如何创建此设置：[如何使用 LocalBroadcastManager？](https://stackoverflow.com/questions/8802157/how-to-use-localbroadcastmanager)

# javascript - 带有名称的 Javascript 动态函数调用

> ID：15202942
> 
> 赞同：2
> 
> 时间：2013-03-04T13:42:11.870
> 
> 标签：javascript, jquery

所以我有以下伪Javascript代码：

```
var Class = (function(window, document, $) {
    function meth_1()
    {
        //some code
    }

    function meth_2()
    {
        //some code
    }

    function meth_3()
    {
        //some code
    }

    function meth_4()
    {
        //some code to call other three functions dynamically
    }

    Class = {
        meth_1: meth_1,
        meth_2: meth_2,
        meth_3: meth_3,
        meth_4: meth_4
    };
    return Class;

})(window, document, jQuery); 
```

在`meth_4`函数中，我想通过将函数名作为字符串传递来动态调用其他 3 个函数。我怎样才能做到这一点？！

在这个[相关的 StackOverflow 问题](https://stackoverflow.com/questions/10419538/javascript-dynamic-function-name)中，答案提供了如何在窗口范围内完成此操作的解决方案，即`window[function_name]()`。但是，我想知道如何在我的特定情况下做到这一点。

谢谢。

**编辑**

我选择的答案可以。您还可以执行以下操作：

```
var Class = (function(window, document, $) {
    var meth_func = {
        meth_1: function(){/**your code**/},
        meth_2: function(){/**your code**/},
        meth_3: function(){/**your code**/}            
    }

    function meth_4(func_name)
    {
        meth_func[func_name]();
    }

    Class = {
        meth_4: meth_4
    };
    return Class;

})(window, document, jQuery); 
```

如果您想将动态调用的这三个函数设为私有，这可能会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:44:45.813

由于您想在对象范围而不是窗口范围内使用方括号表示法调用函数，因此您可以使用`this`代替`window`：

```
function meth_4()
{
    this["meth_1"]();
    this["meth_2"]();
    this["meth_3"]();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:51:29.703

我不知道你为什么想要那个（'Class' 作为变量名也不好），但可以这样做：

```
var Class = (function (window /*, ... */) {
  return {
    func1: function () {console.log('1')}
  , func2: function () {console.log('2')}
  , func3: function () {console.log('3')}
  , func4: function (funcName) {
      console.log('4+')
      this[funcName]()
    }
  }
})(window)

Class.func4('func3') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:51:55.490

这是一个可以做你想做的事情的实现。如果您传递一个字符串，它将简单地查找适当的函数并执行它。但是，由于 JS 中的函数确实是它们自己的对象，因此您可以将它们传递给周围，并表明与您所要求的相比，我已经扩展了一些功能。如果您传递一个函数（实际上是字符串以外的任何内容），它将（尝试）调用它

```
meth_4 = function(fun){
   if(typeof fun === 'string'){
       this[fun](args.slice(1));
   } else { //assuming it's a function
       if(arguments.length == 1)
          fun.call(this,[])
       } else {
          fun.apply(this,arguments.slice(1))  
       }
   }
} 
```

JavaScript 对象是或可以被视为键/值对集合。任何函数或属性都可以通过两种语义等效的方式访问

`obj.key`或者`obj["key"]`在某些情况下只能使用后者。例如，如果属性被调用`property name`，你不能做`obj.property name`但可以做`obj["property name"]`

# visual-studio-2010 - 为什么 Visual Studio 抱怨我的 web.config 跟踪侦听器配置？

> ID：15202945
> 
> 赞同：5
> 
> 时间：2013-03-04T13:42:24.820
> 
> 标签：visual-studio-2010, iis, azure, web-config, azure-diagnostics

在我的 web.config 中，我有以下设置：

```
<system.diagnostics>
  <trace>
    <listeners>
       <add name="AzureDiagnostics"
          type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
          <filter type="" />
       </add>
    </listeners>
  </trace>
</system.diagnostics> 
```

这与[此处](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.diagnostics.diagnosticmonitortracelistener.aspx)的 MSDN 示例相同：

```
<system.diagnostics>
  <trace>
     <listeners>
        <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, 
           Microsoft.WindowsAzure.Diagnostics, 
           Version=1.0.0.0, 
           Culture=neutral, 
           PublicKeyToken=31bf3856ad364e35"
           name="AzureDiagnostics">
          <filter type="" />
       </add>
    </listeners>
 </trace> 
```

然而，Visual Studio 会`type`在里面的属性下划线`<filter type=""`，当我将鼠标移到那里时，它会显示`the 'type' attribute is not allowed`. 如果我尝试使用 IntelliSense 来查找它所允许的内容`lockItem`，`lockElements`、`lockAttributes`、`lockAllElementsExcept`和`lockAllAttributesExcept`.

为什么 Visual Studio 不喜欢`type`里面`filter`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-13T16:31:22.517

Visual Studio 使用架构来验证配置文件中的 XML。在这种情况下，它看不到为模式中的过滤器元素定义的类型属性。这可能只是模式中的一个疏忽/错误，因为过滤器配置的使用显然需要它并且没有它就无法工作。这根本不是 Windows Azure 特有的。

如果您打开 app.config/web.config 文件并检查属性窗口，您将看到 Schemas 属性。这些是用于验证您的配置文件的所有模式，并且有几个。这里感兴趣的架构是 DotNetConfig.xsd（在我的机器上，它位于 C:\Program Files (x86)\Microsoft Visual Studio 11.0\xml\Schemas\1033\DotNetConfig.xsd 下，使用 VS 2012）。如果您熟悉 XSD，您可以打开它，如果您深入到元素定义（configuration/system.diagnostics/trace/listeners/ListenerElement/filter），您会看到没有指示类型元素。但是，如果您查看共享侦听器（configuration/system.diagnostics/sharedListeners/ListenerElement/filter）下的过滤器元素，则属性类型在那里并且是必需的。

如果您使用下面的配置，您将不会在 VS 中看到下划线，因为在共享侦听器部分的过滤器下需要输入类型。再次指出，这里的下划线真的无所谓，只是VS说它不认为你应该把type属性放在filter下面，但是如果你想在trace下面定义filter，显然是必须的侦听器，只是架构中的一个错误。我不会担心的。

```
<system.diagnostics>
      <sharedListeners>
        <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
            name="AzureDiagnostics">
          <filter type="" />
        </add>

      </sharedListeners>
        <trace>
            <listeners>
              <add name="AzureDiagnostics" />
            </listeners>
        </trace>
    </system.diagnostics> 
```

# wpf - 如何在应用程序关闭并使用用户设置重新启动时使 TextBox 保存文本

> ID：15202947
> 
> 赞同：0
> 
> 时间：2013-03-04T13:42:28.503
> 
> 标签：wpf, database, data-binding

在我开始我的问题之前，我一直在阅读关于这个主题的所有可以想象的链接，但我仍然被困住了。

我正在使用 C# 和 Visual Studio 组合一个 WPF。当应用程序关闭并重新启动时，我希望 TextBox 在其中保留文本，并且文本是读/写的，因为文本会经常更改。

我已经设置了一个新的 .settings 文件，并将它放在我项目的 Properties 文件夹中。我使用漂亮的网格创建了这个，我可以在其中创建名称、类型和值等。

到目前为止，几个小时后，我想我离得更近了，但不确定。这是 Designer.cs -

```
namespace PRX.Properties {

    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator", "10.0.0.0")]
    internal sealed partial class saveData : global::System.Configuration.ApplicationSettingsBase {

        private static saveData defaultInstance = ((saveData)(global::System.Configuration.ApplicationSettingsBase.Synchronized(new saveData())));

        public static saveData Default {
            get {
                return defaultInstance;
            }
        }

        [global::System.Configuration.UserScopedSettingAttribute()]
        [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [global::System.Configuration.DefaultSettingValueAttribute("mainSource")]
        public string Setting {
            get {
                return ((string)(this["Setting"]));
            }
            set {
                this["Setting"] = value;
            }
        }
    }
} 
```

.settings 文件称为 saveData.settings，我将表设置为名称：设置，类型：字符串，值：mainSource。范围设置为用户。它位于 Properties 文件夹中，就像默认的 Settings.settings 文件一样。

有问题的 TextBox 有这样的连接：

```
 <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <TextBox DockPanel.Dock="Top" Margin="10" Background="Black" Name="tb1" TextWrapping="Wrap" AcceptsReturn="True" Text="{Binding Source={x:Static p:saveData.Default}, Path=Default.Setting, Mode=TwoWay}"></TextBox>

                        </ScrollViewer> 
```

为了更好地衡量，这是它在 app.config 中的样子：

```
 <PRX.saveData>
   <setting name="Setting" serializeAs="String">
    <value>mainSource</value>
   </setting>
  </PRX.saveData>
 </userSettings> 
```

我知道它已连接到 .Settings 文件，因为当我调试时，文本框中存在值“mainSource”

我已经阅读了十几个关于这个主题的链接，但最值得注意的是这两个：

[http://blogs.msdn.com/b/patrickdanino/archive/2008/07/23/user-settings-in-wpf.aspx](http://blogs.msdn.com/b/patrickdanino/archive/2008/07/23/user-settings-in-wpf.aspx) [http://msdn.microsoft.com/en-us/library/k4s6c3a0.aspx](http://msdn.microsoft.com/en-us/library/k4s6c3a0.aspx)

我对此特别困惑，我正在阅读的文档似乎非常简单，但我似乎无法掌握它。非常感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:34:41.883

问题是您没有在设置上调用“Save（）”，为什么它没有保留，您可以尝试在窗口初始化时加载文本并在退出时将其保存到设置中，您必须调用 Save（）才能持久你的设置

**编辑**

正如您所说，文本框已连接到设置但未保存更改，为此，您必须在设置上调用“保存”，并且在哪里执行此操作都没有关系，例如，您可以为更改的文本添加处理程序：

```
 <TextBox DockPanel.Dock="Top" Margin="10" Background="Black" Name="tb1" TextWrapping="Wrap" AcceptsReturn="True" Text="{Binding Source={x:Static p:saveData.Default}, Path=Default.Setting, Mode=TwoWay} TextChanged="tb1_TextChanged""></TextBox> 
```

并将处理程序添加到后面的代码中：

```
 private void tb1_TextChanged(object sender, TextChangedEventArgs e)
    {
        Properties.saveData.Default.Save();
    } 
```

检查此链接： http: [//blogs.msdn.com/b/patrickdanino/archive/2008/07/23/user-settings-in-wpf.aspx](http://blogs.msdn.com/b/patrickdanino/archive/2008/07/23/user-settings-in-wpf.aspx) [在 C# 中将 WPF 属性绑定到 ApplicationSettings 的最佳方法？](https://stackoverflow.com/questions/154533/best-way-to-bind-wpf-properties-to-applicationsettings-in-c)

# c# - 如何使用 facebook c# sdk 注销

> ID：15202950
> 
> 赞同：5
> 
> 时间：2013-03-04T13:42:42.123
> 
> 标签：c#, facebook, windows-phone-8

我正在编写一个使用 [facebook c# sdk 的](http://csharpsdk.org/)wp8 应用程序。一切进展顺利，但有一件事不起作用（这让我发疯）：我无法注销用户。

我试过：

```
var logoutParameters = new Dictionary<string, object>
                  {
                      { "next", loginUrl }
                  };
var logoutUrl = _facebookClient.GetLogoutUrl(logoutParameters); 
```

还，

```
var logoutUrl = fb.GetLogoutUrl(new {access_token = "...", next = "...." }); 
```

和，

```
https://www.facebook.com/logout.php?next=[redirect_uri]&access_token=[access_token] 
```

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:03:55.840

在 WP8 中，您可以使用 WebBrowser.ClearCockiesAsync() 清除 cookie
也许此链接会有所帮助： http:
[//www.developer.nokia.com/Community/Wiki/Integrate_Facebook_to_Your_Windows_Phone_Application](http://www.developer.nokia.com/Community/Wiki/Integrate_Facebook_to_Your_Windows_Phone_Application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:09:47.533

替换`loginUrl`为“ [http://www.facebook.com](http://www.facebook.com) ”：

像这样：

```
var logoutParameters = new Dictionary<string, object>
                  {
                      { "next", "http://www.facebook.com" }
                  };

var logoutUrl = _facebookClient.GetLogoutUrl(logoutParameters); 
```

# xml - 当月份/日期只能是一位数时，在 xsl (1.0) 中格式化 DateTime

> ID：15202951
> 
> 赞同：0
> 
> 时间：2013-03-04T13:42:44.383
> 
> 标签：xml, xslt, xslt-1.0

我正在尝试格式化以下给定的日期时间

> 2013-3-4 12:57:49

到

> 20130304

实际上我正在使用这个 xsl 代码

```
<xsl:variable name="OrderDate"><xsl:value-of select="Belegexport/Beleg/Kopf/Header_Datum" /></xsl:variable>
<xsl:value-of select="concat(substring($OrderDate, 1, 4),substring($OrderDate, 6, 1),substring($OrderDate, 8, 1))"/> 
```

结果是

> 201334

.

但是当月份或日期长度为 1 位时，我需要零，而当月份或日期长度为 2 位时，我需要零。

我怎么能处理这个？我无法更改`Datasource`并且我绑定到 xslt 1.0 版。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:03:28.317

这个怎么样：

```
<xsl:variable name="year" select="substring($OrderDate, 1, 4)" />
<xsl:variable name="afterYear" select="substring($OrderDate, 6)" />
<xsl:variable name="month" select="substring-before($afterYear, '-')" />
<xsl:variable name="day" select="substring(substring-after($afterYear, '-'), 1, 2)" />
<xsl:value-of select="$year * 10000 + $month * 100 + $day" /> 
```

# c# - 将 2 个表映射到实体框架中的单个实体

> ID：15202956
> 
> 赞同：4
> 
> 时间：2013-03-04T13:42:52.207
> 
> 标签：c#, entity-framework, ef-code-first, code-first, fluent-interface

我希望你能帮助我。

我在数据库中有 2 个表：Bill 和 BillItem。这些表在数据库中配置为一对一关系，其中 bill 是主表，而 BillItem 是依赖表

表 Bill 的结构：

```
Int BillId (PK)
Int BillTypeId Not Null
Varchar(5) Usr Not Null
DateTime Tm Not Null 
```

表 BillItem 的结构：

```
Int BillItemId (PK)
Int ItemId Not Null 
Varchar(5) Usr Not Null
DateTime Tm Not Null 
```

我想使用 Fluent API 和 Entity Framework 4.1 Code First 方法将这两个表映射到单个 POCO 类中

我还想配置表列名称以在 POCO 类中使用不同的属性名称（即 Id 而不是 BillId，User 而不是 Usr）

这是一个遗留数据库，我无法修改它的任何对象。

怎样才能做到这一点？

谢谢你们。

结果类应该是（如果可以的话）：

```
public int Id {get;set;}
public int BillTypeId {get;set;}
public int ItemId {get;set;}
public string User {get;set;}
public string User1 {get;set;}
public DateTime Tm {get;set;}
public DateTime Tm1 {get;set;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:44:49.213

我认为您可以使用实体拆分功能来实现这一点，但您需要使用一些数据注释（没有 esacpe）：
**警告**：*我尚未尝试此方法，但它可能有效，如果您愿意，请检查一下* **首先：**注释属性属于带有`HasColumnName`数据注释的单域模型类中的 BillItem 表。
**第二：**使用此代码示例

```
public class YourSingleModelClassNameConfiguration : EntityTypeConfiguration<YourSingleModelClassName> {
    public YourSingleModelClassNameConfiguration() {

        ToTable("Bill"); Property(param => param.Id).IsRequired().HasColumnName("BillId");

        // NOW REPEAT THAT FOR ALL BILL PROPERTIES WITH YOUR REQUIRED ATTRIBUTES (ISREQUIRED OR NOT, LENGTH ...)

        // NOW THE PROPERTIES YOU NEED TO MAP TO THE BILL ITEMS TABLE GOES INTO THE MAP FUNCTION
        Map(
        param =>
            { param.Properties(d => new {d.ItemId, d.User1}); m.ToTable("BillItem");
            }
        );

        // DON'T FORGET TO MENTION THE REST OF THE PROPERTIES BELONGING TO THE BillItem TABLE INSIDE THE PROPERTIES METHOD IN THE LAST LINE.

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T13:13:48.270

对于这个问题，你可以很容易地做到这一点，你有 2 个选择。第一种是使用实体框架[映射类（将多个表映射到实体框架中的单个实体类](https://stackoverflow.com/questions/6670580/mapping-multiple-tables-to-a-single-entity-class-in-entity-framework)）。

第二种选择是手动进行： 2 个表必须遵循的限制是 1 必须是强表，而第二个必须是弱表（通过这样做，您应该只有从强表到弱）否则，这将不起作用，因为结果将是对象的集合，然后您需要确定第一个对象是否是您需要的对象，而不是其他对象。

如果您想使用稍微快一点的方法，我建议您使用自己的逻辑来映射 POCO 对象。创建 2 个将与数据库表映射并从服务对象构建对象的类。

这种方法很好，因为生成的 LINQ 查询不会使用 INNER JOINS，这使得它更快。但加入应该从你身边保持。

例子

```
int i=0;
// this 2 refer to the 2 different mapped tables in your context database
var pbdata = _pbdata.GetSingle(p=>p.StrongTableID == StrongTableID);
var pb = _pb.GetSingle(p=>p.WeakTableID == pbdata.WeakTableID);
// you can see that i am looking for the StrongTableID in order to select the entity value

// this is optional but usefull! you can do the
// "copy" inside a function where in future if the 
// object changes, you can update easily
ObjectComposite.Map(body, ref pb, ref pbdata);

// the following proccess needs to be done like this...
// first save the value in the weak object so 
// the WeakTableID is recorded
// UPDATE: maybe these 2 should go into a transact for more security... but... ok...
Save(pb);
i += this.unitOfWork.Save();
pbdata.ProfessionalBodyID = pb.ProfessionalBodyID;

// once the values for the second objects are set, save it all again.
Save(pbdata);
i += this.unitOfWork.Save();
return i > 0 ? true : false; 
```

这种方法更快，但您需要自己控制一切。好消息是，您可以在这里映射任意数量的表格

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T14:00:27.487

对于重命名列，这很容易：

```
[Table("SomeHorribleTableName")]
    public class MyNiceTableName
    {
        [Column("Usr")]
        public string User { get; set; }
    } 
```

在这里，我也重命名了实体。无需保留可怕的表名。关于将 2 个表映射到 1 个实体。我认为这是不可能的。请参阅此处：[将数据从 2 个表映射到 1 个实体 - 实体框架 4](https://stackoverflow.com/questions/3880237/mapping-data-from-2-tables-to-1-entity-entity-framework-4)

流线型：

```
public class Bill
    {
        public int ID { get; set; }
        public int BillTypeID { get; set; }
        public string UserName { get; set; }
        public DateTime Time { get; set; }
    }

    public class BillItem
    {
        public int ID { get; set; }
        public int ItemID { get; set; }
        public string UserName { get; set; }
        public DateTime Time { get; set; }
    }

    internal class BillMap : EntityTypeConfiguration<Bill>
    {
        public BillMap()
        {
            ToTable("Bills");
            HasKey(x => x.ID);
            Property(x => x.ID).HasColumnName("BillId");
            Property(x => x.BillTypeID).IsRequired().HasColumnName("BillTypeId");
            Property(p => p.UserName).IsRequired().HasColumnName("Usr");
            Property(x => x.Time).IsRequired().HasColumnName("Tm");
        }
    }

    internal class BillItemMap : EntityTypeConfiguration<BillItem>
    {
        public BillItemMap()
        {
            ToTable("BillItems");
            HasKey(x => x.ID);
            Property(x => x.ID).HasColumnName("BillItemId");
            Property(x => x.ItemID).IsRequired().HasColumnName("ItemId");
            Property(p => p.UserName).IsRequired().HasColumnName("Usr");
            Property(x => x.Time).IsRequired().HasColumnName("Tm");
        }
    } 
```

这可能是我能做的最好的了。至于处理两个表中的 Usr 列，这可能是您应该在自己的控制器类/业务逻辑层中处理的事情。

还有一件事：对于上面的配置类.. 在您的 DbContext 中调用它们，如下所示：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Configurations.Add(new BillMap());
    modelBuilder.Configurations.Add(new BillItemMap());
} 
```

# c# - 错误1 只有assignment、call、increment、decrement、await和new对象表达式可以作为语句使用

> ID：15202957
> 
> 赞同：0
> 
> 时间：2013-03-04T13:42:56.070
> 
> 标签：c#, .net, properties, frameworks, windows-applications

```
public partial class frmManager : Form
{
    public String Name
    {
        get 
        {
            txtName.Text;
        }
        set;
    }
} 
```

错误1 只有assignment、call、increment、decrement、await和new对象表达式可以作为语句使用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:46:54.237

如果要使用 getter 和 setter 并定义自定义 getter，还需要定义自定义 setter。例如：

```
 public String Name
    {
        get { return txtName.Text; }
        set { txtName.Text = value; }
    } 
```

或者您可以创建“getonly”属性：

```
 public String Name
    {
        get { return txtName.Text; }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:43:49.590

您需要将其更改为：

```
public partial class frmManager : Form
{
    public String Name
    {
        get 
        {
            return txtName.Text;
        }
        set;  // you may also want to change this to set the value of txtName.Text (txtName.Text = value)
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T12:06:00.143

`return`在 get 方法中需要一个：

```
public partial class frmManager : Form
{
    public String Name
    {
        get 
        {
            return txtName.Text;
        }
        set;
    }
} 
```

错误（CS0201）：

> 只有 assignment、call、increment、decrement、await 和 new 对象表达式可以用作语句

发生是因为方法中的语句`txtName.Text;`实际上`get`并没有做任何事情。C 和 C++ 中的类似语句是合法的，但可能会触发编译器警告，例如“语句无效”。C# 通过强制禁止这些语句的语法限制来防止这种编程错误。

# java - 在 Java 中将 16 位十六进制字符串转换为带符号的 int

> ID：15202958
> 
> 赞同：12
> 
> 时间：2013-03-04T13:42:57.857
> 
> 标签：java, parsing, signed, hex

我在 Java 中有一个字符串，表示十六进制的有符号 16 位值。这个字符串可以是从`"0000"`到的任何东西`"FFFF"`。

我`Integer.parseInt("FFFF",16)`用来将其转换为整数。但是，这会返回一个无符号值 ( `65535`)。

我希望它返回一个有符号的值。在这个特定的例子中`"FFFF"`应该返回`-1`.

我怎样才能做到这一点？因为它是一个 16 位的值，我想使用`Short.parseShort("FFFF",16)`，但这告诉我我超出了范围。我想`parseShort()`预计会出现负号。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T13:46:06.203

您可以将`int`返回的 from`Integer.parseInt()`转换为 short：

```
short s = (short) Integer.parseInt("FFFF",16);
System.out.println(s); 
```

结果：

```
-1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T13:46:08.670

尝试

```
int i = (short) Integer.parseInt("FFFF", 16); 
```

# javascript - i18n 本地化问题；无法在 Backbone javascript 页面中初始化 i18n 库

> ID：15202961
> 
> 赞同：0
> 
> 时间：2013-03-04T13:43:23.057
> 
> 标签：javascript, backbone.js, internationalization

我对 javascript / Backbone.js 很陌生，对 i18n 本地化完全陌生。我必须使用 i18n 开始复杂站点的本地化。我不知道如何使用 i18n 来做到这一点。i18next.amd-1.5.10.js 库包含在项目中，但我无法初始化它并稍后使用它。我注意到所有必需的库都包含在登录页面的定义中，除了 i18next，如下所示：

```
define([ 
```

'jquery'、'underscore'、'backbone'、
'backboneForms'、'message'、'auth'、'models/LoginModel'、'views/footer/FooterView'、'text!templates/login/loginTemplate.html'] , 函数 ($, _, Backbone, BackboneForms, message, AuthModel, LoginModel, FooterView, loginTemplate, i18n)

此外，也曾有过使用此库进行本地化的较早尝试，但没有奏效，初始化代码已被注释掉：

```
var LoginViewModel = Backbone.Model.extend({
    schema: {}
});

var LoginView = Backbone.View.extend({
    model: undefined,
    el: $("#container"),
    //i18n: t.initialize('login', 'loginTemplate').i18n, 
```

鉴于我什至无法初始化它，我如何使用 i18n 本地化站点？如何成功初始化 i18n 并用于本地化登录页面？
谢谢，屋大维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:31:14.183

首先你需要初始化 i18next。在您的项目中的某个地方，您将引导应用程序并启动主干。您可能希望在 i18next 初始化后启动骨干网：

```
i18n.init(options, function(t) {
  Backbone.history.start();
}); 
```

现在你可以使用 i18next：

*   使用 jquery 函数`$(mySelector).i18n();` [http://i18next.com/pages/doc_jquery.html#jqueryfc](http://i18next.com/pages/doc_jquery.html#jqueryfc)
*   使用 objectTree 功能获取模板资源 [http://i18next.com/pages/doc_features.html#objecttree](http://i18next.com/pages/doc_features.html#objecttree)
*   或使用一些高级模板助手[http://i18next.com/pages/doc_templates.html](http://i18next.com/pages/doc_templates.html)

# asp.net - SQL 缓存依赖关系：轮询一天中的特定时间

> ID：15202963
> 
> 赞同：0
> 
> 时间：2013-03-04T13:43:24.380
> 
> 标签：asp.net, outputcache

我们希望通过引入输出缓存来提高 WCF 服务的性能。

对于每个不同的 URL ( `varyByParam="none" varyByCustom="RawUrl"`)，只要数据库表 FooBar 没有更改，我们就希望缓存结果。

但是，我们希望每天仅检查一次此类更改（上午 6:20）。如果表在白天发生变化，我们不希望在第二天早上 6:20 之前清除缓存。

我们知道这会导致输出不一致，但是，在我们的应用场景中，这不是问题。

如何告诉 outputCache 仅在每天早上 6:20 检查更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T21:41:14.397

将您的 IIS 应用程序池设置为每天早上 6:20 重置，而不是将此作为代码解决方案。

某些浏览器会忽略上面建议的 HTTP 缓存标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:09:20.747

我认为您可以使用[How to: Cache Versions of a Page Using Parameters 中描述的](http://msdn.microsoft.com/en-us/library/y96218s9%28v=vs.100%29.aspx)`Response.Cache.SetExpires`方法。

代码将类似于：

```
var tomorrow = DateTime.Today.AddDays(1);
Response.Cache.SetExpires(new DateTime(tomorrow.Year, tomorrow.Month, tomorrow.Day, 6, 20, 0, DateTimeKind.Local)
Response.Cache.SetCacheability(HttpCacheability.Public);
Response.Cache.SetValidUntilExpires(true);
Response.Cache.SetVaryByCustom("RawUrl") 
```

# c++ - 带有 constexpr 函数的模板作为参数返回

> ID：15202970
> 
> 赞同：3
> 
> 时间：2013-03-04T13:43:51.257
> 
> 标签：c++, templates, c++11

给出一些声明：

```
template <class T, T t>
struct foo {};

template <class T>
constexpr T ident(T t) {
   return t;
}

constexpr int bar() {
   return 0;
}

int main(int argc, const char *argv[])
{
    foo<bool, true> a;
    foo<int, bar()> b;
    foo<int, ident(0)> c;
    foo<int (*)(), bar> d;

    foo<int(*)(), ident(&bar)> e; // not accepted (gcc 4.7.2 crashes here, even)

    return 0;
} 
```

另外：有趣的是，这导致了 gcc 4.7.2 的段错误。我不得不通过我的 4.8.0 快照的 svn 构建运行它，甚至得到一条错误消息（“必须是具有外部链接的函数地址”）......

为什么第一个是好的，最后一个是不允许的——这个 constexpr 不像 case ad 吗？似乎编译器完全有能力确定`ident(&bar)`正在谈论的函数，因为它可以为其他类型做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-16T03:36:14.927

从 C++17 开始，这将被允许；请参阅[N4198](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4198.html)（以及最近被投票纳入 C++ 标准的相应措辞文件[N4268](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4268.html)）。Clang trunk 在`-std=c++1z`模式下接受您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:49:46.037

E 的问题在于，对于非类型模板参数，类型为指向函数的指针，获取它的地址必须是有效的（14.3.2）。例如，`foo<int(*)(), &ident(bar)>`无效。因此，即使返回的`ident(bar)`是指向具有有效外部链接的函数的指针，对于非类型模板参数，整个表达式也是无效的。如果您从 中返回 0（或 nullptr）`ident(bar)`，它将被编译（也在 14.3.2 中定义）。

该标准允许您在一种函数指针类型上省略 &，但它仍然必须有效才能获取它的地址。这就是为什么`foo<int (*)(), bar>`有效，因为`foo<int (*)(), &bar>`它是有效的。另一个函数要求 B、C（和 A）计算为整数常量，它属于不同的类别。

# jquery - Jquery条件正则表达式返回输出

> ID：15202972
> 
> 赞同：0
> 
> 时间：2013-03-04T13:43:55.007
> 
> 标签：jquery, regex

是否可以使用正则表达式和 jQuery 来返回条件输出，我想用方括号替换图像中的数字：

`[1]`会成为`<span><img src="1.png"></span>`

我有`[11]`它的地方将其替换为

`<span><img src="1.png"><img src="1.png"></span>`

我有`[1e1]`它的地方将其替换为

`<span><img src="1.png"><img src="e.png"><img src="1.png"></span>`

但是，如果它只是文本，无论长度如何，它都会保持原样

`[qu]`会成为`<span><img src="qu.png"></span>`

这是我到目前为止的代码：

```
$('p').each(function() {
    var txt = $(this).text();               
    var html = txt.replace(/\[(.*?)\]/g, function($1){

        if($1.length<=3) {
            return $1.replace(/\[(.*?)\]/g,'<span class=\'rehMark\'><img src="img/$1.png" alt="$1" /></span>')
        }else{

// this is the bit I would like help with!
// and how to deal with text rather than numbers

            return '<span class=\'lngRehMark\'>'

            for (i=0; i<$1.length; i++ )
            {
                return '<img src="img/' + $1 + '.png" alt="' + $1.length + '" /></span>'
            }
            return '</span'>'
        }
    });

    $(this).html(html);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:12:41.413

您可以使用`split`,`map`和`join`转换为元素`[12]`数组。`<img>`

另请注意，replace 回调的第一个参数包含完全匹配的字符串（例如`[11]`），而不是第一个匹配的组（例如`11`）。

```
$('p').each(function() {
    var txt = $(this).text();               
    var html = txt.replace(/\[([^\]]*)\]/g, function(match, chars){
        var images;
        if (chars.match(/^[^0-9]*$/))
            images = '<img src="img/' + chars + '.png" />';
        else
            images = $(chars.split(''))
              .map(function() { return '<img src="img/' + this + '.png" />'; })
              .get().join('');
        return '<span class=\'lngRehMark\'>' + images + '</span>';
    });

    $(this).html(html);
}); 
```

# c - C语言中的Shell排序遇到问题，无限循环

> ID：15202974
> 
> 赞同：1
> 
> 时间：2013-03-04T13:44:03.167
> 
> 标签：c, sorting, segmentation-fault, shellsort

我的程序的一小部分有问题，它制作了一个随机数列表，然后 shell 对它们进行排序，现在它不会完成计算，这让我认为循环没有完成。我遇到了分段错误错误，但我设法通过解决我访问数组的一些问题来解决这个问题。无论如何，一双新鲜的眼睛可能对我有好处。

谢谢！

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main()
{

    printf("How long would you like to make the list? \n");

    int list_length;
    scanf("%d", &list_length);

    int *number_list[list_length];
    int random_number;
    int i;
    for(i=0; i<list_length; i++){
        srand ( time(NULL) );
        random_number = rand();
        number_list[i] = random_number; 
    }

    printf("Before: ");
    printf("%d", &number_list[0]);
    printf("\n");
    shellSort(*number_list, list_length);

    printf("After: ");
    printf("%d", &number_list[0]);
    printf("\n");

    return 0;
}

void shellSort(int *A, int n){
int gap , i , j , temp; 

for (gap = n/2; gap>0; gap /=2)
    for (i=gap; i<n; i++)
        for(i = i-gap; j>=0 && &A[j] > &A[j+gap]; j-=gap){
            temp = &A[j]; 
            A[j] = &A[j + gap]; 
            A[j + gap] = temp; 
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:46:42.490

也许你应该在这一行中使用`j`而不是：`i`

```
 for(j = i-gap; j>=0 && &A[j] > &A[j+gap]; j-=gap) // <- first i is replaced by j
//   ^ 
//   Here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:48:57.260

在这一行 中，`for(i = i-gap; j>=0 && &A[j] > &A[j+gap]; j-=gap){`您正在初始化`i`，但是您递减并检查`j`。您应该将赋值运算符的左侧从 更改`i`为`j`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T14:15:54.753

你的代码甚至不应该编译。您声明`number_list`为一个指针数组，`int`然后为其分配一个`int`. 您也不能在 C89 中声明非常量大小的数组。

# sql - 复杂的聚合视图如何

> ID：15202975
> 
> 赞同：0
> 
> 时间：2013-03-04T13:44:08.190
> 
> 标签：sql, sql-server, pivot, unpivot

复杂的聚合视图如何

我有一个表 ( `Table A`) `[payment type]`，`[Agent],[Amount Credit]`和`[Amount Debit]`。现在我正在寻找这些数据的特定视图。

我想为每个代理提供他/她的活动摘要。

因此，代理沿 x 轴，付款类型沿 y 轴，每个代理的总计也如此。

```
Transaction type      Agent 1   Agent 2 

Amount Credit                 

Cash                20   40
Credit Card         20   20 

Total               40   60

Amount Debit                

Cash                20   40
Credit Card         10   10 

Total               30   50 
```

尝试了一切，但还没有得到这个视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:41:21.087

您可以通过同时应用`UNPIVOT`和`PIVOT`函数来获得所需的结果。如果您有已知数量的`agent`要转换为列的值，则可以对查询进行硬编码：

```
select 
  case when TransactionType is null then 'Total' else [Credit/Debit] end [Credit/Debit],
  case when TransactionType is null then '' else TransactionType end TransactionType,
  Sum([Agent 1]) Agent1, 
  sum([Agent 2]) Agent2
from
(
  select  [Agent], 
    [Credit/Debit], 
    PaymentType as TransactionType, 
    value
  from TableA
  unpivot
  (
    value
    for [Credit/Debit] in ([AmountCredit], [AmountDebit])
  ) unpiv
) src
pivot
(
  sum(value)
  for agent in ([Agent 1], [Agent 2])
) piv
group by GROUPING SETS ([Credit/Debit], TransactionType), ([Credit/Debit]); 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/6db72/32)。

如果您的数量未知，`agents`那么您将需要使用动态 SQL，但不能在视图中使用动态 SQL，您必须将代码放在存储过程中。动态 SQL 将是：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colSum AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Agent) 
                    from TableA
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colSum = STUFF((SELECT distinct ', Sum(' + QUOTENAME(Agent)+') as ' +QUOTENAME(Agent)
                    from TableA
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'select 
                case when TransactionType is null then ''Total'' else [Credit/Debit] end [Credit/Debit],
                case when TransactionType is null then '''' else TransactionType end TransactionType,
                '+@colSum +'
              from
              (
                select  [Agent], 
                  [Credit/Debit], 
                  PaymentType as TransactionType, 
                  value
                from TableA
                unpivot
                (
                  value
                  for [Credit/Debit] in ([AmountCredit], [AmountDebit])
                ) unpiv
              ) src
              pivot
              (
                sum(value)
                for agent in ('+@cols+')
              ) piv
              group by GROUPING SETS ([Credit/Debit], TransactionType), ([Credit/Debit])'

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/6db72/36)。查询的结果将是：

```
| CREDIT/DEBIT | TRANSACTIONTYPE | AGENT 1 | AGENT 2 |
------------------------------------------------------
| AmountCredit |            Cash |      20 |      40 |
| AmountCredit |     Credit Card |      20 |      20 |
|        Total |                 |      40 |      60 |
|  AmountDebit |            Cash |      20 |      40 |
|  AmountDebit |     Credit Card |      10 |      10 |
|        Total |                 |      30 |      50 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:51:50.690

听起来你正在尝试做类似[**PIVOT**](http://msdn.microsoft.com/en-us/library/ms177410%28v=SQL.105%29.aspx)的事情：

```
CREATE TABLE #Table 
(
    [PayType] VARCHAR(100),
    [Name] VARCHAR(100),
    [Amt1] INT,
    [Amt2] INT
)

INSERT INTO #Table VALUES
('Cash','michaeljackson',1,9),
('Credit','michaeljackson',1,9),
('Cash','jq',10,20),
('Credit','jq',7,9),
('Cash','phil',1,2),
('Credit','phil',3,4),
('Cash','simplesimon',99,1),
('Credit','simplesimon',101,2);

SELECT *
FROM 
    ( 
    SELECT  PayType,
        Name,
        Amt1
    FROM    #Table
    ) AS sourceTable
    PIVOT
    (
    SUM(Amt1) FOR Name IN ("michaeljackson","jq","phil", "simplesimon") 
    ) AS pivotTable;

SELECT *
FROM 
    ( 
    SELECT  PayType,
        Name,
        Amt2
    FROM    #Table
    ) AS sourceTable
    PIVOT
    (
    SUM(Amt2) FOR Name IN ("michaeljackson","jq","phil", "simplesimon") 
    ) AS pivotTable; 
```

# c++ - 比较向量 ::带有向量的迭代器 ::reverse_iterator

> ID：15202978
> 
> 赞同：25
> 
> 时间：2013-03-04T13:44:19.283
> 
> 标签：c++, vector, stl, iterator

我正在做一个练习，我有一个向量，我正在编写自己的反向算法，方法是使用反向和正常（正向）迭代器来反转向量的内容。但是，我无法比较迭代器。

```
int vals[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 0 };
vector<int> numbers(vals, vals + 10);

vector<int>::iterator       start = numbers.begin();
vector<int>::reverse_iterator end = numbers.rend(); 
```

我有一个先前的算法，用于通过使用两个迭代器来反转向量，但是在这个任务中，我无法使用它们之间的 != 运算符来比较它们。我的猜测是获取向量中的底层指针或索引，但我如何获取指针/索引？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-04T13:48:03.220

使用[`base()`](http://en.cppreference.com/w/cpp/iterator/reverse_iterator/base):返回的迭代器进行比较`it == rit.base() - 1`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-04T13:46:04.410

您可以通过调用将 a 转换`reverse_iterator`为。`iterator`[`base()`](http://www.cplusplus.com/reference/iterator/reverse_iterator/base/)

但是要小心，因为有一些警告。@Matthieu M. 的评论特别有帮助：

> 注意：`base()`实际上返回一个`iterator`指向元素*后面*的元素`reverse_iterator`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T13:46:29.793

结帐[http://en.cppreference.com/w/cpp/iterator/reverse_iterator/base](http://en.cppreference.com/w/cpp/iterator/reverse_iterator/base)

```
rit.base() 
```

返回一个“正常”迭代器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-16T03:30:49.210

您可以使用`(&*start == &*(end - 1))`直接比较迭代器指向的地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-10T03:47:31.497

这两种类型无法比较（这是一个非常好的主意），并且`.base()`在我看来调用不是很优雅（或通用）。您可以转换类型并比较结果。考虑到涉及 的一对一规则`reverse_iterators`。

从`iterator`to的转换`reverse_iterator`需要明确（幸运），但是，从 reverse_iterator 到迭代器的转换是不可能的（不幸的是）。所以只有一种方法可以进行转换然后进行比较。

```
 std::vector<double> vv = {1.,2.,3.};
    auto it = vv.begin();
    auto rit = vv.rend();
//  assert( it == rit ); // error: does not compile
    assert(std::vector<double>::reverse_iterator{it} == rit); 
```

# php - 从一个复杂的数组创建一个简单的数组

> ID：15202980
> 
> 赞同：1
> 
> 时间：2013-03-04T13:44:28.997
> 
> 标签：php, arrays, merge

我有一个来自数据库的数组（$query）：

```
Array
(
[0] => Array
    (
        [category] => Mercedes
    )

[1] => Array
    (
        [category] => BMW
    )

[2] => Array
    (
        [category] => Bentley
    )

) 
```

我想让它成为一个数组 $category：

```
Array
(
    [0] => Mercedes
    [1] => BMW
    [2] => Bentley
) 
```

我用 array_merge() 尝试了一些东西，但结果看起来不像我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:48:29.553

您必须遍历您的数组，然后选择每个“类别”值。

```
foreach ($query as $array) {
    $newArray[] = $array['category'];
} 
```

`$newArray`将包含您需要的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:48:59.667

你可以尝试这样的事情，它会递归地展平任意深度的多维数组（从[这里](http://www.php.net/manual/en/function.array-values.php#104184)）：

```
function array_flatten($array) { 
    if (!is_array($array)) { 
        return FALSE; 
    }

    $result = array(); 

    foreach ($array as $key => $value) { 
        if (is_array($value)) { 
            $result = array_merge($result, array_flatten($value)); 
        } else { 
            $result[$key] = $value; 
        } 
    } 

    return $result; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T13:49:49.017

您想循环访问从数据库返回的数组中的每个数组：

```
foreach($query as $row)
{
    $category[] = $row['category'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T13:50:12.157

最明显的解决方案：

```
$res = array();

foreach ($tab as $val) {
    $res[] = $val['category'];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T13:50:27.510

```
$new_array = array_map(function($v){return $v['category'];}, $old_array); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T14:00:28.230

我刚刚提出的内联解决方案：

```
$new = end(call_user_func_array('array_merge_recursive', $arr)); 
```

请注意，如果您有多个元素，则这将无法正常工作，除了`category`. 如果是这样，您可以像这样采用此解决方案：

```
$new = call_user_func_array('array_merge_recursive', $arr);
$new = $new['category']; 
```

但这并不是那么酷，最好按照通常的`foreach`方式进行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T14:09:36.110

问题解决了 ！！。

```
 $query = array
    (
    array
        (
            'category' => 'Mercedes'
        ),

    array
        (
            'category' => 'BMW'
        ),

    array
        (
            'category' => 'Bentley'
        )

    );

    $category = array();

    foreach( $query as $queryArray ){

        foreach( $queryArray as $key => $value ){

             $category[] = $value;

        }

    }

    //echo '<br />';
    print_r( $category ); 
```

# java - Spring Security 和自定义外部身份验证

> ID：15202981
> 
> 赞同：8
> 
> 时间：2013-03-04T13:44:33.257
> 
> 标签：java, spring, spring-security, single-sign-on

我有这样的任务 - 将我的 Web 应用程序与外部单点登录服务集成。它是基于设置特定 cookie 并重定向回应用程序的 SSO 的自定义非标准实现。SSO 和应用程序在同一个域中。

目前我正在使用 Spring Security 过滤器来检查特定 URL 上的这个 cookie。这适用于场景：

Web 应用程序 -> SSO [提供回调 url] -> 重定向回我的应用程序。

但是当用户访问提供身份验证服务的应用程序然后“跳转”到我的应用程序的任何 url 时它显然会失败（并且没有检查 cookie，因为没有触发“特殊”url）。

使用 Spring Security 解决此类问题的推荐方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T15:58:36.980

解决问题的最简单方法是实现自己的 PreAuthenticatedProcessingFilter： [http ://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#d0e6167](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#d0e6167)

您的身份验证提供商是否在 cookie 中提供用户名的问题。如果它提供 - 您可以使用此过滤器：[http ://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#d0e6295](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#d0e6295)

如果您需要任何其他说明，请告诉我。

此致，

迈克尔

# google-chrome - 为什么 Chrome 会提示在超链接上将页面下载为 .gz 文件，但我没有手动输入 URL？

> ID：15202986
> 
> 赞同：6
> 
> 时间：2013-03-04T13:45:05.243
> 
> 标签：google-chrome, gzip, http-compression

我刚刚在尝试访问某些页面时在 Chrome 上发现了一个非常奇怪的行为。它将提示将它们作为`.gz`文件下载而不是加载它们。

这只发生在当前的 Chrome 和所有平台上。

当页面正确加载时，我可以在 Inspector 上看到这个

`Resource interpreted as Document but transferred with MIME type application/x-gzip:`“ [https://confluence.example.com/display/engp/PR-1221](https://confluence.example.com/display/engp/PR-1221) ”。

我知道这些是由配置为使用 gzip 压缩的 nginx 服务器提供的，但这并没有错。

```
 gzip  on;  # that's on nginx part 
```

我几乎可以肯定这是 nginx 配置有问题，但是什么？

使问题更有趣（也更烦人）的是，如果您从超链接复制 URL 并将其粘贴到浏览器，它将正确打开页面。是的，这只发生在超链接上。

我试图在这方面找到关于 chrome 的错误报告，但我唯一能找到的是其他人确实报告了与 reddit 页面或其他页面类似的问题，如果不是相同的问题`github.com`。

```
Request URL:https://confluence.example.com/display/engp/PR-1221
Request Method:GET
Status Code:200 OK
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:UTF-8,*;q=0.5
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
DNT:1
Host:example.com
Referer:https://example.com/browse/PR-1221
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22 
```

```
响应标头view source
访问控制允许凭据：true
Access-Control-Allow-Headers:DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type
访问控制允许方法：GET、POST、OPTIONS、HEAD
访问控制允许来源：*
呸：呸
缓存控制：无缓存，必须重新验证
连接：保持活动
内容编码：gzip
内容类型：文本/html；字符集=UTF-8
日期：2013 年 3 月 4 日星期一 13:29:48 GMT
过期时间：周四，1970 年 1 月 1 日 00:00:00 GMT
富：酒吧
服务器：nginx/1.2.6
传输编码：分块
X-Confluence-Request-Time:1362403788150
X-Seraph-登录原因：OK

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T14:14:37.727

我遇到了同样的行为，并向 chrome 开发人员发送了一份报告。同时，我已经禁用了我所有的 chrome 扩展，并且不再识别这种行为。我觉得有点奇怪，因为昨天效果很好。

编辑：我发现 chrome 导致扩展。就我而言，它是“悬停缩放”。任何其他已安装的扩展程序（Adblock、PageSpeed、Tweetdeck 等）都可以正常工作，并且不会出现“下载 .gz 文件”问题。开发人员正在解决这个问题（[https://code.google.com/p/hoverzoom/issues/detail?id=489](https://code.google.com/p/hoverzoom/issues/detail?id=489)）

EDIT2：我不再使用 HoverZoom，因为扩展现在是间谍软件（看看[https://code.google.com/p/hoverzoom/issues/detail?id=489#c16](https://code.google.com/p/hoverzoom/issues/detail?id=489#c16)）。而不是 Hover-Zoom 我现在使用 Hover-Free ( [https://chrome.google.com/webstore/detail/hover-free/hcmnnggnaofmhflgomfjfbndngdoogkj/related](https://chrome.google.com/webstore/detail/hover-free/hcmnnggnaofmhflgomfjfbndngdoogkj/related) )。希望对您有所帮助。感谢Caschy（[http://stadt-bremerhaven.de/chrome-erweiterung-hoverzoom-sendet-heimlich-daten/](http://stadt-bremerhaven.de/chrome-erweiterung-hoverzoom-sendet-heimlich-daten/)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-22T05:53:15.153

也有这个问题。通过编辑我的 Wordpress 网站的 htaccess 找到了解决方案，强制特定文件类型按原样加载；

```
<IfModule mod_mime.c>
AddCharset utf-8 .html
AddCharset utf-8 .json
AddEncoding gzip .gz
</IfModule>
<FilesMatch "(\.html|\.html\.gz)$">
ForceType text/html
</FilesMatch>
<FilesMatch "(\.json|\.json\.gz)$">
ForceType text/javascript
</FilesMatch> 
```

我认为这是网站缓存插件的问题。就我而言，WPSuperCache

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-29T13:20:31.940

我有同样的问题，只是`Content-Type`响应头中的错误。要检查`Content-Type`转到 Google Chrome 开发人员工具 (F12) 中的网络选项卡并查看`Type`列。很可能它类似于`binary`or `gzip`。

要解决您的问题，请在 NGINX 配置中添加两件事：

1.  我有预压缩文件，所以必须确保服务器发送正确的文件`Content-Type`（Apache Web 服务器上的[`ForceType`指令](https://httpd.apache.org/docs/2.4/mod/core.html#forcetype)是什么）。请参阅[如何使用 nginx 提供预压缩文件，以便它们在浏览器中显示为文本？](https://serverfault.com/questions/241347/how-do-i-serve-pre-gzipped-files-with-nginx-so-that-theyll-be-shown-as-text-in)

    > 你需要这个[`HttpGzipStatic`](http://nginx.org/en/docs/http/ngx_http_gzip_static_module.html)模块。

2.  添加`gzip_vary on`. 请参阅[StackPath：Accept-Encoding：这很重要](https://blog.stackpath.com/accept-encoding-vary-important)：

    > 想象一下两个客户端：一个没有压缩的旧浏览器，一个有压缩的现代浏览器。如果他们都请求同一个页面，那么根据谁先发送请求，压缩或未压缩版本将存储在 CDN 中。现在问题开始了：旧浏览器可能会请求常规的“index.html”并获取缓存的压缩版本（随机垃圾数据），或者新浏览器可能会获取缓存的未压缩版本并尝试“解压缩”它。坏消息，不管怎样。
    > 
    > 修复是让源服务器发回**Vary: Accept-Encoding**

**参考**

*   [如何判断我的服务器是否在提供 GZipped 内容？](https://stackoverflow.com/questions/9140178/how-can-i-tell-if-my-server-is-serving-gzipped-content)
*   [提供 gzip 文件时使用什么“Content-Type”标头？](https://stackoverflow.com/questions/23600229/what-content-type-header-to-use-when-serving-gzipped-files)
*   [Google Developers：Web Fundamentals：优化基于文本的资产的编码和传输大小](https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/optimize-encoding-and-transfer?hl=en)
*   [NGINX：模块 ngx_http_gzip_module](http://nginx.org/en/docs/http/ngx_http_gzip_module.html)
*   [NGINX：压缩和解压](https://www.nginx.com/resources/admin-guide/compression-and-decompression/)
*   [Vary: Accept-Encoding 是否矫枉过正？](https://stackoverflow.com/questions/14540490/is-vary-accept-encoding-overkill)

# c# - MediaElement控件不显示视频只播放Grid App中视频的音频

> ID：15202987
> 
> 赞同：1
> 
> 时间：2013-03-04T13:45:05.267
> 
> 标签：c#, xaml, windows-8, windows-store-apps

我在 windows 8 商店应用程序的 GridApp 的 itemsdetail 页面的翻转视图中使用 MediaElement Control，我在使用它时遇到了一种特殊类型的问题。MediaElement 不显示视频，预期的视频输出上只有黑屏，但它可以很好地播放视频的音频。

现在我的问题的特殊部分是，在网格应用程序中有一组项目的集合（我知道每个人都可能知道这一点，只是为了让自己清楚），每个组的第一个项目只播放视频很好，我的意思是它可以很好地显示视频和音频，但是该组的其余项目只是不显示视频，只是播放视频的音频。有谁知道为什么会这样？

这是 XAML 代码：

```
 <FlipView
x:Name="flipView"
AutomationProperties.AutomationId="ItemsFlipView"
AutomationProperties.Name="Item Details"
TabIndex="1"
Grid.RowSpan="2"
ItemsSource="{Binding Source={StaticResource itemsViewSource}}">

<FlipView.ItemContainerStyle>
    <Style TargetType="FlipViewItem">
        <Setter Property="Margin" Value="0,137,0,0"/>
    </Style>
</FlipView.ItemContainerStyle>

<FlipView.ItemTemplate>
    <DataTemplate>
        <UserControl Loaded="StartLayoutUpdates" Unloaded="StopLayoutUpdates">
            <ScrollViewer x:Name="scrollViewer" Style="{StaticResource VerticalScrollViewerStyle}" Grid.Row="1">
                <Grid Margin="120,0,20,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="400" />
                        <ColumnDefinition Width="40" />
                        <ColumnDefinition Width="360" />
                        <ColumnDefinition Width="40" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Border BorderBrush="Black" BorderThickness="1" Width="350" HorizontalAlignment="Left" Grid.Row="0">
                        <MediaElement x:Name="VideoSource" AutomationProperties.Name="VideoSource" Source="/Assets/Big_Buck_Bunny.mp4" HorizontalAlignment="Center" VerticalAlignment="Stretch" Height="250" Width="350" AutoPlay="False" IsLooping="True" />
                    </Border>
                    <Border BorderBrush="Black" BorderThickness="1" Height="65" Width="350" HorizontalAlignment="Left" Grid.Row="1">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Button x:Name="playButton" Margin="0,0" Click="playButton_Click" Style="{StaticResource PlayAppBarButtonStyle}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            <Button x:Name="pauseButton" Margin="0,0" Click="pauseButton_Click" Style="{StaticResource PauseAppBarButtonStyle}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </ScrollViewer>
        </UserControl>
    </DataTemplate>
</FlipView.ItemTemplate> 
```

这是后面的代码：

```
 private void playButton_Click(object sender, RoutedEventArgs e)
    {
        MediaElement media = FindControl<MediaElement>(this, "VideoSource") as MediaElement;
        media.Play();
    }

    private void pauseButton_Click(object sender, RoutedEventArgs e)
    {
        MediaElement media = FindControl<MediaElement>(this, "VideoSource") as MediaElement;
        media.Pause();
    }

    private void stopButton_Click(object sender, RoutedEventArgs e)
    {
        MediaElement media = FindControl<MediaElement>(this, "VideoSource") as MediaElement;
        media.Stop();
    }

    private DependencyObject FindControl<T>(DependencyObject controlType, string ctrlName)
    {
        int childNumber = VisualTreeHelper.GetChildrenCount(controlType);
        for (int i = 0; i < childNumber; i++)
        {
            DependencyObject child = VisualTreeHelper.GetChild(controlType, i);
            FrameworkElement fe = child as FrameworkElement;
            // Not a framework element or is null
            if (fe == null) return null;

            if (child is T && fe.Name == ctrlName)
            {
                // Found the control so return
                return child;
            }
            else
            {
                // Not found it - search children
                DependencyObject nextLevel = FindControl<T>(child, ctrlName);
                if (nextLevel != null)
                    return nextLevel;
            }
        }
        return null;
    } 
```

我希望我清楚地说明了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:21:09.287

因此，您正在尝试的将起作用。不过，为了提供帮助，我编写了一个小型原型。

在后面使用此代码：

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        // pause
        var _Media = GetMediaElement(sender as Button);
        _Media.Pause();
    }

    private void Button_Click_2(object sender, RoutedEventArgs e)
    {
        // play
        var _Media = GetMediaElement(sender as Button);
        _Media.Play();
    }

    MediaElement GetMediaElement(Button button)
    {
        var _Parent = button.Parent as Grid;
        var _GrandParent = _Parent.Parent as Grid;
        return _GrandParent.Children.First() as MediaElement;
    }

    private void FlipView_SelectionChanged_1(object sender, SelectionChangedEventArgs e)
    {
        var _FlipView = sender as FlipView;
        foreach (var item in _FlipView.Items)
        {
            var _Container = _FlipView.ItemContainerGenerator.ContainerFromItem(item);
            var _Children = AllChildren(_Container);
            foreach (var media in _Children)
                media.Pause();
        }
    }

    public List<MediaElement> AllChildren(DependencyObject parent)
    {
        if (parent == null)
            return (new MediaElement[] { }).ToList();
        var _List = new List<MediaElement> { };
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(parent); i++)
        {
            var _Child = VisualTreeHelper.GetChild(parent, i);
            if (_Child is MediaElement)
                _List.Add(_Child as MediaElement);
            _List.AddRange(AllChildren(_Child));
        }
        return _List;
    }
} 
```

并使用此 XAML：

```
<FlipView SelectionChanged="FlipView_SelectionChanged_1">
    <FlipView.ItemTemplate>
        <DataTemplate>
            <Grid>
                <MediaElement Source="{Binding}" AutoPlay="False" />
                <Grid Margin="20" VerticalAlignment="Bottom" Background="Black">
                    <Button Click="Button_Click_1" HorizontalAlignment="Left">Pause</Button>
                    <Button Click="Button_Click_2" HorizontalAlignment="Right">Play</Button>
                </Grid>
            </Grid>
        </DataTemplate>
    </FlipView.ItemTemplate>
    <x:String>ms-appx:/Assets/BestSingingVideoEver.wmv</x:String>
    <x:String>ms-appx:/Assets/BestSingingVideoEver.wmv</x:String>
    <x:String>ms-appx:/Assets/BestSingingVideoEver.wmv</x:String>
    <x:String>ms-appx:/Assets/BestSingingVideoEver.wmv</x:String>
</FlipView> 
```

请务必使用您自己的视频更新路径。当然，您也可以对列表进行数据绑定。我的代码只是一个原型，用来证明你想做的事情是可能的。祝你好运！

我还认为我可能已经解决了代码中的一两个错误。尤其是您在列表中寻找子控件的部分。这是我的参考：[http ://blog.jerrynixon.com/2012/09/how-to-access-named-control-inside-xaml.html](http://blog.jerrynixon.com/2012/09/how-to-access-named-control-inside-xaml.html)

# php - PHP 类别与子类别与子子

> ID：15202992
> 
> 赞同：0
> 
> 时间：2013-03-04T13:45:18.310
> 
> 标签：php, mysql, loops, categories

我正在尝试制作一个类别树系统来显示无尽的类别。数据库设置如下：

ID PARENT_ID CATEGORY_NAME

PHP代码：

```
$cat_array = array();
$subcat_array = array(); 
if (mysqli_connect_errno())
          {
          echo "Failed to connect to MySQL: " . mysqli_connect_error();
          }         

$sql = mysqli_query($con, "SELECT * FROM `documents_category` WHERE ISNULL(parent_id)    ");
while($row = mysqli_fetch_array($sql))
{      $cat_array[] = $row;  
//echo $row['category_name'];
}  

// print_r($cat_array);

 $sql2 = mysqli_query($con, "SELECT * FROM `documents_category`
 WHERE parent_id IS NOT NULL ");
 while($row2 = mysqli_fetch_array($sql2))
 {      $subcat_array[] = $row2;  
 }  

 foreach ($cat_array as $value)

 {
    echo "{$value['category_name']}<br/>";  

    foreach ($subcat_array as $value2)

    {
            if($value2['parent_id'] == $value['id'])

            {
            echo "{$value2['category_name']}<br/>";
            }

    } 
```

}

子类别将仅使用父母 ID。我可以把这个工作交给一个父母和一个孩子，但之后什么都没有出现。我已经尝试了几种不同的方法，但没有运气。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:59:11.740

您需要使用递归。通常我使用 PDO，但我试图做一个工作示例：

```
<?php
$cat_array = array();
$subcat_array = array(); 
if (mysqli_connect_errno())
{
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
}         

function GetCategories($parent_id, $counter = 0)
{

    $sql = mysqli_query($con, "SELECT * FROM `documents_category` WHERE parent_id = " . (int)$parent_id);
    while($row = mysqli_fetch_array($sql))
    {
        echo str_repeat("&nbsp;", $counter) . $row["id"] . " - " . $row["parent_id"] . " - " . $row["category_name"];
        $sub_category = mysqli_query($con, "SELECT * FROM `documents_category` WHERE parent_id = " . (int)$row["id"]);
        $counter++;
        if(count($sub_category) > 0)
            GetCategories($row["id"], $counter);
    }
}

$parent_categories = GetCategories(0);
?> 
```

如您所见，我通过调用该函数来选择“根”。它将呼应类别。然后它检查当前 id 上是否有子类别，如果找到则再次调用该函数，但现在使用当前行的 parent_id。如果没有找到，它会走得更远......你可以使用计数器来添加空格或其他东西......

# ios - UITableViewController 滚动有额外的空间（如 Notes 应用程序）

> ID：15202995
> 
> 赞同：10
> 
> 时间：2013-03-04T13:45:26.200
> 
> 标签：ios, objective-c, uitableview, user-interface, scroll

如何复制 Notes 应用程序中的这种行为：

1.  你有一个`UITableViewController`与物品，
2.  您可以向下滚动列表（有很多项目），
3.  当您点击列表底部时，您可以“过度滚动”一点，但列表不会一直向后滚动。最后一项下方会有一些空间。Notes 中使用此空间来显示一些布局图像。

用照片演示： ![照片 1](../Images/d028e8cc932dea9066fa658996620652.png)

这是一个“未滚动”列表。它很容易创建这样的使用`UITableViewController`。当您“拉”列表时，默认值`UITableViewController`只会反弹回此状态。

但是，Notes 允许这样做： ![照片 2](../Images/f894cffd06dd091808fa2e9a73c098a5.png)

例如。滚动后留出一点空间，不要让它一直弹回来。

你如何复制这种行为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T13:52:40.913

您可以像这样更改 tableView 的内容插图：

```
[_tableView setContentInset:UIEdgeInsetsMake(0, 0, 100, 0)]; 
```

滚动时，您最终会在 tableView 底部插入一个 100 像素的插图。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T14:48:39.647

这是一个简单的方法。

只需（可能在您的 ViewDidLoad 中）添加一个空白 UIView 作为 UITableView 的表页脚。

像这样的东西：

```
UIView *footer = [[UIView alloc] init];
footer.frame = CGRectMake(0, 0, 0, 100); // The only one that matters here is the height
self.tableView.tableFooterView = footer; // tableView is an outlet to the tableView 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-17T18:55:31.200

**迅速：**

我认为在 Swift 中执行此操作的方法是这样的。

```
tableView.contentInset = UIEdgeInsetsMake(0, 0, 100, 0) 
```

我知道这是一个老问题，但它可能会使某人受益。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-22T14:33:57.357

迅速：

```
 let footer:UIView = UIView(frame: CGRectMake(0, 0, 0, 44))
    tableView.tableFooterView = footer 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-01T13:41:20.503

更新 Kirualex 响应：

理想放置：*UITableViewController viewDidLoad*

## 斯威夫特 3：

```
// Add 50 extra pixels at bottom of the list when scrolling
self.tableView.contentInset = UIEdgeInsets(top:0, left: 0, bottom: 50, right: 0) 
```

# java - Java Class 中的规范名、简单名和类名有什么区别？

> ID：15202997
> 
> 赞同：1103
> 
> 时间：2013-03-04T13:45:28.763
> 
> 标签：java

在Java中，这些有什么区别：

```
Object o1 = ....
o1.getClass().getSimpleName();
o1.getClass().getName();
o1.getClass().getCanonicalName(); 
```

我已经多次检查了 Javadoc，但这从来没有很好地解释它。我还进行了一个测试，这并没有反映出调用这些方法的方式背后的任何真正含义。

* * *

## 回答 #1

> 赞同：1253
> 
> 时间：2013-03-04T14:07:27.310

如果您不确定某事，请先尝试编写测试。

我这样做了：

```
class ClassNameTest {
    public static void main(final String... arguments) {
        printNamesForClass(
            int.class,
            "int.class (primitive)");
        printNamesForClass(
            String.class,
            "String.class (ordinary class)");
        printNamesForClass(
            java.util.HashMap.SimpleEntry.class,
            "java.util.HashMap.SimpleEntry.class (nested class)");
        printNamesForClass(
            new java.io.Serializable(){}.getClass(),
            "new java.io.Serializable(){}.getClass() (anonymous inner class)");
    }

    private static void printNamesForClass(final Class<?> clazz, final String label) {
        System.out.println(label + ":");
        System.out.println("    getName():          " + clazz.getName());
        System.out.println("    getCanonicalName(): " + clazz.getCanonicalName());
        System.out.println("    getSimpleName():    " + clazz.getSimpleName());
        System.out.println("    getTypeName():      " + clazz.getTypeName()); // added in Java 8
        System.out.println();
    }
} 
```

印刷：

```
int.class (primitive):
    getName():          int
    getCanonicalName(): int
    getSimpleName():    int
    getTypeName():      int

String.class (ordinary class):
    getName():          java.lang.String
    getCanonicalName(): java.lang.String
    getSimpleName():    String
    getTypeName():      java.lang.String

java.util.HashMap.SimpleEntry.class (nested class):
    getName():          java.util.AbstractMap$SimpleEntry
    getCanonicalName(): java.util.AbstractMap.SimpleEntry
    getSimpleName():    SimpleEntry
    getTypeName():      java.util.AbstractMap$SimpleEntry

new java.io.Serializable(){}.getClass() (anonymous inner class):
    getName():          ClassNameTest$1
    getCanonicalName(): null
    getSimpleName():    
    getTypeName():      ClassNameTest$1 
```

最后一个块中有一个空条目，其中`getSimpleName`返回一个空字符串。

看这个的结果是：

> *   **name**是您用于动态加载类的名称，例如，使用`Class.forName`default调用`ClassLoader`。在一定的范围内`ClassLoader`，所有的类都有唯一的名字。
> *   **规范名称**是在导入语句中使用的名称。`toString`在或记录操作期间它可能很有用。当`javac`编译器拥有类路径的完整视图时，它通过在编译时冲突完全限定的类和包名称来强制其中规范名称的唯一性。但是 JVM 必须接受这种名称冲突，因此规范名称不能唯一标识`ClassLoader`. （事后看来，这个 getter 的一个更好的名字应该是`getJavaName`；但这个方法可以追溯到 JVM 仅用于运行 Java 程序的时候。）
> *   简单的**名称**松散地标识类，在或记录操作期间可能很有用，`toString`但不能保证是唯一的。
> *   **类型名称**返回“此类型名称的信息字符串”，“就像`toString`：它纯粹是信息性的，没有合同价值”。（由 sir4ur0n 撰写）

您还可以通常参考 Java 语言规范文档以了解这些类型的技术 Java API 详细信息：

> *   这是有关此主题 的`Java 11` **规范：** [https ://docs.oracle.com/javase/specs/jls/se11/html/jls-6.html#jls-6.7](https://docs.oracle.com/javase/specs/jls/se11/html/jls-6.html#jls-6.7)
> 
> `Example 6.7-2.`并分别`Example 6.7-2.`过去`Fully Qualified Names`和`Fully Qualified Names v. Canonical Name`

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2015-04-08T23:33:18.897

添加本地类、lambdas 和`toString()`方法来完成前两个答案。此外，我添加了 lambda 数组和匿名类数组（尽管在实践中没有任何意义）：

```
package com.example;

public final class TestClassNames {
    private static void showClass(Class<?> c) {
        System.out.println("getName():          " + c.getName());
        System.out.println("getCanonicalName(): " + c.getCanonicalName());
        System.out.println("getSimpleName():    " + c.getSimpleName());
        System.out.println("toString():         " + c.toString());
        System.out.println();
    }

    private static void x(Runnable r) {
        showClass(r.getClass());
        showClass(java.lang.reflect.Array.newInstance(r.getClass(), 1).getClass()); // Obtains an array class of a lambda base type.
    }

    public static class NestedClass {}

    public class InnerClass {}

    public static void main(String[] args) {
        class LocalClass {}
        showClass(void.class);
        showClass(int.class);
        showClass(String.class);
        showClass(Runnable.class);
        showClass(SomeEnum.class);
        showClass(SomeAnnotation.class);
        showClass(int[].class);
        showClass(String[].class);
        showClass(NestedClass.class);
        showClass(InnerClass.class);
        showClass(LocalClass.class);
        showClass(LocalClass[].class);
        Object anonymous = new java.io.Serializable() {};
        showClass(anonymous.getClass());
        showClass(java.lang.reflect.Array.newInstance(anonymous.getClass(), 1).getClass()); // Obtains an array class of an anonymous base type.
        x(() -> {});
    }
}

enum SomeEnum {
   BLUE, YELLOW, RED;
}

@interface SomeAnnotation {} 
```

这是完整的输出：

```
getName():          void
getCanonicalName(): void
getSimpleName():    void
toString():         void

getName():          int
getCanonicalName(): int
getSimpleName():    int
toString():         int

getName():          java.lang.String
getCanonicalName(): java.lang.String
getSimpleName():    String
toString():         class java.lang.String

getName():          java.lang.Runnable
getCanonicalName(): java.lang.Runnable
getSimpleName():    Runnable
toString():         interface java.lang.Runnable

getName():          com.example.SomeEnum
getCanonicalName(): com.example.SomeEnum
getSimpleName():    SomeEnum
toString():         class com.example.SomeEnum

getName():          com.example.SomeAnnotation
getCanonicalName(): com.example.SomeAnnotation
getSimpleName():    SomeAnnotation
toString():         interface com.example.SomeAnnotation

getName():          [I
getCanonicalName(): int[]
getSimpleName():    int[]
toString():         class [I

getName():          [Ljava.lang.String;
getCanonicalName(): java.lang.String[]
getSimpleName():    String[]
toString():         class [Ljava.lang.String;

getName():          com.example.TestClassNames$NestedClass
getCanonicalName(): com.example.TestClassNames.NestedClass
getSimpleName():    NestedClass
toString():         class com.example.TestClassNames$NestedClass

getName():          com.example.TestClassNames$InnerClass
getCanonicalName(): com.example.TestClassNames.InnerClass
getSimpleName():    InnerClass
toString():         class com.example.TestClassNames$InnerClass

getName():          com.example.TestClassNames$1LocalClass
getCanonicalName(): null
getSimpleName():    LocalClass
toString():         class com.example.TestClassNames$1LocalClass

getName():          [Lcom.example.TestClassNames$1LocalClass;
getCanonicalName(): null
getSimpleName():    LocalClass[]
toString():         class [Lcom.example.TestClassNames$1LocalClass;

getName():          com.example.TestClassNames$1
getCanonicalName(): null
getSimpleName():    
toString():         class com.example.TestClassNames$1

getName():          [Lcom.example.TestClassNames$1;
getCanonicalName(): null
getSimpleName():    []
toString():         class [Lcom.example.TestClassNames$1;

getName():          com.example.TestClassNames$$Lambda$1/1175962212
getCanonicalName(): com.example.TestClassNames$$Lambda$1/1175962212
getSimpleName():    TestClassNames$$Lambda$1/1175962212
toString():         class com.example.TestClassNames$$Lambda$1/1175962212

getName():          [Lcom.example.TestClassNames$$Lambda$1;
getCanonicalName(): com.example.TestClassNames$$Lambda$1/1175962212[]
getSimpleName():    TestClassNames$$Lambda$1/1175962212[]
toString():         class [Lcom.example.TestClassNames$$Lambda$1; 
```

所以，这里是规则。首先，让我们从原始类型和开始`void`：

1.  如果类对象表示原始类型 or `void`，则所有四个方法都只返回其名称。

现在该`getName()`方法的规则：

2.  每个非 lambda 和非数组类或接口（即顶级、嵌套、内部、本地和匿名）都有一个名称（`getName()`由)，后跟编译器生成的类文件的名称（没有后缀`.class`）。如果没有包，它只是类文件的名称。`$`如果该类是内部、嵌套、本地或匿名类，编译器应在其类文件名中至少生成一个。请注意，对于匿名类，类名将以美元符号后跟一个数字结尾。
3.  Lambda 类名称通常是不可预测的，无论如何您都不应该关心它们。确切地说，它们的名称是封闭类的名称，后面是`$$Lambda$`，后面是一个数字，后面是一个斜线，然后是另一个数字。
4.  原语的类描述符是`Z`for `boolean`, `B`for `byte`, `S`for `short`, `C`for `char`, `I`for `int`, `J`for `long`, `F`for`float`和`D`for `double`。对于非数组类和接口，类描述符`L`后面是给定的，`getName()`后面是`;`. 对于数组类，类描述符`[`后面是组件类型的类描述符（它本身可能是另一个数组类）。
5.  对于数组类，该`getName()`方法返回其类描述符。这条规则似乎只对组件类型为 lambda 的数组类（这可能是一个错误）无效，但希望这无论如何都不重要，因为即使存在组件类型为 lambda 的数组类也没有意义。

现在，`toString()`方法：

6.  如果类实例表示一个接口（或注解，它是一种特殊类型的接口），则`toString()`返回`"interface " + getName()`. 如果它是一个原语，它会简单地返回`getName()`。如果它是别的东西（一个类类型，即使它很奇怪），它会返回`"class " + getName()`.

`getCanonicalName()`方法：

7.  对于顶级类和接口，该`getCanonicalName()`方法只返回该`getName()`方法返回的内容。
8.  该`getCanonicalName()`方法返回`null`匿名或本地类以及它们的数组类。
9.  对于内部和嵌套类和接口，该`getCanonicalName()`方法返回该`getName()`方法将用点替换编译器引入的美元符号的内容。
10.  对于数组类，如果组件类型的规范名称为，则该`getCanonicalName()`方法返回。否则，它返回组件类型的规范名称，后跟.`null``null``[]`

`getSimpleName()`方法：

11.  对于顶级、嵌套、内部和本地类，`getSimpleName()`返回源文件中写入的类的名称。
12.  对于匿名类，`getSimpleName()`返回一个空的`String`.
13.  对于 lambda 类，`getSimpleName()`它只`getName()`返回没有包名的返回值。这没有多大意义，对我来说看起来像是一个错误，但是从调用`getSimpleName()`lambda 类开始是没有意义的。
14.  对于数组类，该`getSimpleName()`方法返回组件类的简单名称，后跟`[]`. 这具有有趣/奇怪的副作用，即组件类型为匿名类的数组类`[]`就像它们的简单名称一样。

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2014-05-08T15:06:45.987

除了 Nick Holt 的观察之外，我还针对`Array`数据类型运行了一些案例：

```
//primitive Array
int demo[] = new int[5];
Class<? extends int[]> clzz = demo.getClass();
System.out.println(clzz.getName());
System.out.println(clzz.getCanonicalName());
System.out.println(clzz.getSimpleName());       

System.out.println();

//Object Array
Integer demo[] = new Integer[5]; 
Class<? extends Integer[]> clzz = demo.getClass();
System.out.println(clzz.getName());
System.out.println(clzz.getCanonicalName());
System.out.println(clzz.getSimpleName()); 
```

上面的代码片段打印：

```
[I
int[]
int[]

[Ljava.lang.Integer;
java.lang.Integer[]
Integer[] 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2016-05-02T09:15:39.977

我也对各种不同的命名方案感到困惑，当我在这里发现这个问题时，我正要问和回答我自己的问题。我认为我的发现非常适合它，并补充了已经在这里的内容。我的重点是寻找有关各种术语的*文档*，并添加一些可能在其他地方出现的更相关的术语。

考虑以下示例：

```
package a.b;
class C {
  static class D extends C {
  }
  D d;
  D[] ds;
} 
```

*   的**简单**`D`名称是`D`。这只是你在声明类时写的部分。[匿名类](https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.9)没有简单的名称。[`Class.getSimpleName()`](http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getSimpleName--)返回此名称或空字符串。`$`如果您这样写，简单名称可能包含 a ，因为根据[JLS 第 3.8 节](https://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.8)`$`，它是标识符的有效部分（即使有些不鼓励）。

*   根据[JLS 第 6.7 节](http://docs.oracle.com/javase/specs/jls/se8/html/jls-6.html#jls-6.7)，两者`a.b.C.D`和`a.b.C.D.D.D`都是完全**限定名称****，**但只是. 因此，每个规范名称都是完全限定名称，但反过来并不总是正确的。将返回规范名称或.`a.b.C.D`**`D`[`Class.getCanonicalName()`](http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getCanonicalName--)`null`**

***   [`Class.getName()`](http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getName--)记录返回**二进制名称**，如[JLS 13.1 节](https://docs.oracle.com/javase/specs/jls/se8/html/jls-13.html#jls-13.1)中所指定。在这种情况下，它返回`a.b.C$D`for`D`和`[La.b.C$D;`for `D[]`。

    *   [这个答案](https://stackoverflow.com/a/13343540/1468366)表明，由同一个类加载器加载的两个类可能具有相同的**规范名称**但不同的**二进制名称**。两个名称都不足以可靠地推断出另一个名称：如果您有规范名称，您不知道名称的哪些部分是包，哪些部分包含类。如果您有二进制名称，您不知道哪些`$`是作为分隔符引入的，哪些是一些简单名称的一部分。（类文件存储[类本身](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.1)及其[封闭类](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.6)[的二进制名称](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.1)，这允许运行时[进行区分](https://hg.openjdk.java.net/jdk8/jdk8/jdk/file/5be9c5bfcfe9/src/share/classes/java/lang/Class.java#l1280)。）

    *   [匿名类](https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.9)和[本地类](https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.3)没有**完全限定的名称**，但仍然有一个**二进制名称**。嵌套在这些类中的类也是如此。*每个*类都有一个二进制名称。

    *   运行`javap -v -private`on`a/b/C.class`显示字节码引用 as 的类型`d`和`La/b/C$D;`数组`ds`as的类型`[La/b/C$D;`。这些被称为**描述符**，它们在[JVMS 4.3 节](http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3)中指定。

    *   `a/b/C$D`这两个描述符中使用的类名是`.`通过`/`在二进制名中替换为得到的。JVM 规范显然将此称为**二进制名称的内部形式**。[JVMS 第 4.2.1 节](http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.2.1)对其进行了描述，并指出与二进制名称的差异是出于历史原因。

    *   如果您将二进制名称的内部形式解释为目录分隔符，并将文件扩展名附加到它，则在典型的基于文件名的类加载器之一中的类的文件名是您得到**的**。它是相对于相关类加载器使用的类路径解析的。`/``.class`** 

 *** * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-06-02T23:12:25.070

这是我找到的描述 getName()、getSimpleName()、getCanonicalName() 的最佳文档

[https://javahowtodoit.wordpress.com/2014/09/09/java-lang-class-what-is-the-difference-between-class-getname-class-getcanonicalname-and-class-getsimplename/](https://javahowtodoit.wordpress.com/2014/09/09/java-lang-class-what-is-the-difference-between-class-getname-class-getcanonicalname-and-class-getsimplename/)

```
// Primitive type
int.class.getName();          // -> int
int.class.getCanonicalName(); // -> int
int.class.getSimpleName();    // -> int

// Standard class
Integer.class.getName();          // -> java.lang.Integer
Integer.class.getCanonicalName(); // -> java.lang.Integer
Integer.class.getSimpleName();    // -> Integer

// Inner class
Map.Entry.class.getName();          // -> java.util.Map$Entry
Map.Entry.class.getCanonicalName(); // -> java.util.Map.Entry
Map.Entry.class.getSimpleName();    // -> Entry     

// Anonymous inner class
Class<?> anonymousInnerClass = new Cloneable() {}.getClass();
anonymousInnerClass.getName();          // -> somepackage.SomeClass$1
anonymousInnerClass.getCanonicalName(); // -> null
anonymousInnerClass.getSimpleName();    // -> // An empty string

// Array of primitives
Class<?> primitiveArrayClass = new int[0].getClass();
primitiveArrayClass.getName();          // -> [I
primitiveArrayClass.getCanonicalName(); // -> int[]
primitiveArrayClass.getSimpleName();    // -> int[]

// Array of objects
Class<?> objectArrayClass = new Integer[0].getClass();
objectArrayClass.getName();          // -> [Ljava.lang.Integer;
objectArrayClass.getCanonicalName(); // -> java.lang.Integer[]
objectArrayClass.getSimpleName();    // -> Integer[] 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-08-23T01:27:28.183

有趣的是，当类名格式错误时，`getCanonicalName()`并且`getSimpleName()`可以引发。`InternalError`这发生在一些非 Java JVM 语言上，例如 Scala。

考虑以下内容（Java 8 上的 Scala 2.11）：

```
scala> case class C()
defined class C

scala> val c = C()
c: C = C()

scala> c.getClass.getSimpleName
java.lang.InternalError: Malformed class name
  at java.lang.Class.getSimpleName(Class.java:1330)
  ... 32 elided

scala> c.getClass.getCanonicalName
java.lang.InternalError: Malformed class name
  at java.lang.Class.getSimpleName(Class.java:1330)
  at java.lang.Class.getCanonicalName(Class.java:1399)
  ... 32 elided

scala> c.getClass.getName
res2: String = C 
```

对于混合语言环境或动态加载字节码的环境，例如应用服务器和其他平台软件，这可能是一个问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-07T03:54:31.450

**getName()** – 以字符串形式返回此 Class 对象表示的实体（类、接口、数组类、原始类型或 void）的名称。

**getCanonicalName()** – 返回 Java 语言规范定义的基础类的规范名称。

**getSimpleName()** – 返回底层类的简单名称，即在源代码中给出的名称。

```
package com.practice;

public class ClassName {
public static void main(String[] args) {

  ClassName c = new ClassName();
  Class cls = c.getClass();

  // returns the canonical name of the underlying class if it exists
  System.out.println("Class = " + cls.getCanonicalName());    //Class = com.practice.ClassName
  System.out.println("Class = " + cls.getName());             //Class = com.practice.ClassName
  System.out.println("Class = " + cls.getSimpleName());       //Class = ClassName
  System.out.println("Class = " + Map.Entry.class.getName());             // -> Class = java.util.Map$Entry
  System.out.println("Class = " + Map.Entry.class.getCanonicalName());    // -> Class = java.util.Map.Entry
  System.out.println("Class = " + Map.Entry.class.getSimpleName());       // -> Class = Entry 
  }
} 
```

一个区别是，如果您使用*匿名类*，则在尝试使用`getCanonicalName()`

另一个事实是`getName()`方法的行为不同于*内部类*`getCanonicalName()`的方法。使用美元作为封闭类规范名称和内部类简单名称之间的分隔符。*`getName()`*

 *要了解有关[在 Java 中检索类名的](https://www.baeldung.com/java-class-name)更多信息。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-09T14:15:30.300

```
 public void printReflectionClassNames(){
    StringBuffer buffer = new StringBuffer();
    Class clazz= buffer.getClass();
    System.out.println("Reflection on String Buffer Class");
    System.out.println("Name: "+clazz.getName());
    System.out.println("Simple Name: "+clazz.getSimpleName());
    System.out.println("Canonical Name: "+clazz.getCanonicalName());
    System.out.println("Type Name: "+clazz.getTypeName());
}

outputs:
Reflection on String Buffer Class
Name: java.lang.StringBuffer
Simple Name: StringBuffer
Canonical Name: java.lang.StringBuffer
Type Name: java.lang.StringBuffer 
```***

# jquery - Wordpress Skitter Slideshow - 控制 Skitter 幻灯片中标签的动画

> ID：15202998
> 
> 赞同：1
> 
> 时间：2013-03-04T13:45:29.203
> 
> 标签：jquery, wordpress, plugins, slideshow, skitter-slider

我正在为 wordpress 使用名为 SKitt 的幻灯片插件。

幻灯片显示带有标签的图像，其中提及图像的任何描述。标签在图像更改时动画进（出）。

有没有办法控制标签的动画？

基本上，即使图像发生更改，我也希望显示标签的条带保持完整。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:53:36.813

在高度属性下面试试这个 CSS 代码

```
.box_skitter .label_skitter {
z-index: 99999;
position: absolute;
bottom: 0px;
left: 0px;
color: #fff;
display: block!important;
opacity: 0.8;
background: #000;
height: 44px !important;
} 
```

# file - 存档（例如游戏）中的文件如何引用同一存档中另一个文件中的偏移量？

> ID：15202999
> 
> 赞同：1
> 
> 时间：2013-03-04T13:45:29.613
> 
> 标签：file

我目前正在尝试对游戏文件进行逆向工程，以便为该游戏中的所有武器/盔甲/食谱等建立一个数据库。

基本上，游戏将所有内容存储在一个 DAT 文件中，我已经能够找到存储所有字符串存档（.strs 文件）的 DAT 部分。

例如，在 931092.strs 你可能有：

偏移 2B5E：巨人杀戮之戒，偏移 375E：强盗的徽章

以及这种事情。

但是，物品的统计数据（例如 +100 力量、+50 耐力等）在 DAT 的其他地方（我还不知道在哪里）。

据推测，在 DAT 中某处有某种索引，上面写着“项目 id 90151，名称存储在这里：[文件名，偏移量]，统计信息存储在这里：[文件名，偏移量]，图标存储在这里...... “ ETC。

我的问题是，因为我有项目名称的确切位置（即“狂暴之剑”在 example101.strs 中的 x 偏移处），我如何使用这些数据来确定 DAT 中的统计信息保存在哪里？

提前感谢任何人可以提供的任何帮助。