# StackOverflow 问答 14925000-14925999

# javascript - Javascript getElemtsByClass 选择 [全部]

> ID：14925001
> 
> 赞同：0
> 
> 时间：2013-02-17T19:16:48.347
> 
> 标签：javascript, html, css

我想用 css 类选择所有元素

```
.arrow-down 
```

抱歉，对于我的问题，我根本找不到正确的答案！

我有一个javascript代码：

```
document.getElementsByClassName("arrow-down")[0].style.borderTopColor=""+blu+""; 
```

那么我如何选择不是第一个而是[全部]，或者有没有办法[1; 2; 3;]？

```
getElementsByClassName("arrow-down")[all]

getElementsByClassName("arrow-down")[1;2...] 
```

我尝试了很多东西，但就是不明白！

来自德国的问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:19:08.803

您需要遍历返回的结果列表。

```
var elements = document.getElementsByClassName("arrow-down");

for (var i = 0, len = elements.length; i < len; i++){
  elements[i].style.borderTopColor = blu;
} 
```

如果您只想根据索引做一个特定的子集，那么您可以添加一个检查 的值的条件`i`。我还假设这`blu`是您在某处定义的变量？

```
for (var i = 0, len = elements.length; i < len; i++){
  if (i === 1 || i === 2 || i === 3){
    elements[i].style.borderTopColor = blu;
  }
} 
```

不幸的是，JavaScript 没有用于访问特定数组值子集或一次将更改应用于多个元素的简写。这是 jQuery 自动为您做的事情。例如，使用 jQuery 你可以这样写：

```
$('.arrow-down').css('borderTopColor', blu); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:18:15.507

`document.getElementsByClassName("arrow-down")`确实选择*了所有*这些元素。

这些在节点列表中返回（可以被视为数组），这就是使用`[0]`on 返回第一个元素的原因。

遍历表达式返回的不同元素并对其进行操作：

```
var elements = document.getElementsByClassName("arrow-down");
var elementsNum = elements.length)

for(var i = 0; i < elementsNum; i++)
{
  var anElement = elements[i];

  // do something with anElement
} 
```

# jquery - 特定图像上的 html 警报消息

> ID：14925002
> 
> 赞同：0
> 
> 时间：2013-02-17T19:16:48.677
> 
> 标签：jquery, html, image

我最近用这段代码发布了一个问题并解决了它，但现在我遇到了其他问题。如果用户尝试单击包含“go.gif”的图像，我怎么能发出警报？我希望能够单击并更改所有其他图像，但如果用户尝试单击该图像，它应该会发出警报并保持原样。

```
<table>
 <tr>
<td class='change' id='c1'><img src='images/on.gif'/></td>
<td class='change' id='c2'><img src='images/on.gif'/></td>
<td class='change' id='c3'><img src='images/on.gif'/></td>
<td class='change' id='c4'><img src='images/go.gif'/></td>
<td></td>    
</tr>
</table> 
```

和这个：

```
$(function() {
$(document).on('click', '.change', function () {
    var img = $(this).find('img');
    img.attr('src', (img.attr('src') == 'images/on.gif' ? 'images/off.gif' : 'images/on.gif'));
});
}); 
```

编辑：事实上，是否有某种方法可以列出包含该图像的所有 id。或者，如果它更容易，任何包含该图像的 id 都应该在用户点击它时引发警报。

我希望这很容易理解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:04:18.393

你可以这样做：

```
$(function () {
    $(document).on('click', '.change', function () {
        var img = $(this).find('img').not('[src$=go.gif]');
        img.attr('src', (img.attr('src') == 'images/on.gif' ? 'images/off.gif' : 'images/on.gif'));
    });
});

$('table td img[src$=go.gif]').click(function () {
    alert('Something that you like');
}); 
```

[http://jsfiddle.net/micka/Ngs3T/](http://jsfiddle.net/micka/Ngs3T/)

查看此页面以获得不错的 jquery 选择实践：[http ://docs.jquery.com/Tutorials:How_to_Get_Anything_You_Want](http://docs.jquery.com/Tutorials:How_to_Get_Anything_You_Want)

# macos - 解压 gradle 以安装在 macosx - 需要 GNU 兼容解压

> ID：14925004
> 
> 赞同：-1
> 
> 时间：2013-02-17T19:17:09.733
> 
> 标签：macos, installation, gzip, gradle

为了可以使用 gradle 编译和测试我的代码，我正在尝试安装 gradle。

我想解压缩打包为 ZIP 的 Gradle 发行版。然而，有一个警告说 Mac OS X 用户应该得到一个 GNU 兼容的解压缩器。

请参阅[http://www.gradle.org/docs/current/userguide/installation.html](http://www.gradle.org/docs/current/userguide/installation.html)

> “..需要一个 GNU 兼容的工具来解压缩 Gradle...一些 Mac OS X 的 zip 前端无法正确恢复文件权限。”

我在哪里可以得到一个 GNU 兼容的工具来解压 Gradle？

我记得在其他系统上使用 gzip（gunzip 解压缩），这是 gnu 的事情。我的 MacOSX 上有 gzip / gunzip 。

所以，我尝试了以下方法：

```
gunzip gradle-1.4-bin.zip 
```

它给了我这个错误：

```
gradle-1.4-bin.zip: unknown suffix -- ignored 
```

我关注了几篇谷歌帖子并尝试了几种不同的方法。在这一点上列出这些尝试可能不会起作用。

一个人如何在 Mac OS X 上正确解压缩 gradle 以使文件权限正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:38:56.547

他们的笔记毫无意义。没有 GNU 解压缩，也没有任何可以称为“GNU 兼容”的解压缩器。zip 格式与 GNU 无关，并且我知道没有 GNU 实用程序可以处理 zip 文件。也许他们认为 gzip 是 GNU，它不会处理 .zip 文件（正如您所发现的那样）。gzip 仅适用于完全不同的 .gz 文件。该页面需要更正。

至于前端，我不知道他们指的是哪一个。Mac OS X 自带的命令行解压总是能正确恢复权限和其他属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T20:10:29.467

`gunzip`用于解压缩`.gz`文件，通常使用`gzip`命令创建。`.zip`文件应该使用`unzip`命令解压缩，使用类似`unzip gradle-1.4-bin.zip`.

# go - Golang 中 net/http 和 net/http/fcgi 的区别

> ID：14925005
> 
> 赞同：12
> 
> 时间：2013-02-17T19:17:10.297
> 
> 标签：go, fastcgi

有什么不同？如果我使用 net/http/fcgi 包，每个请求都将在新的 goroutine 中执行。net/http ListenAndServe 似乎是一样的……不是吗？有什么优点和缺点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-17T19:25:18.913

`net/http/fcgi`允许您通过 FastCGI 协议侦听新连接，而ListenAndServe`net/http`用于侦听传入的 http 连接。使用 FastCGI 侦听器，您需要一个位于 Go 进程前面的 http 服务器，该服务器代理传入连接并通过 FastCGI 向您的 Go 进程发送请求。

如果您需要在同一个端口上公开多个服务，FastCGi 会很有用。您可以运行 Apache 或 Nginx 之类的东西作为前端，并通过 FastCGI 向您的 Go 进程公开某些 url。

如果这不是您的情况，并且您只想在端口上运行 Go Web 服务器，请坚持使用`net/http`.

# javascript - 获取窗口调整大小函数的值并将其放入另一个函数中

> ID：14925013
> 
> 赞同：0
> 
> 时间：2013-02-17T19:18:02.983
> 
> 标签：javascript, jquery, html

以下情况：

```
var height = $(window).height();
$(window).resize(function() {
var getfactor1 = 680 / 697
var posval1 = height*getfactor1
}); 
```

在另一个函数中，我有以下内容：

```
if($firstBG.hasClass("inview")){
$firstBG.css({'backgroundPosition': newPos(0, windowHeight, pos, posval1, 0.3)});   
    } 
```

每次用户缩放浏览器窗口时，如何将 window.resize() 函数中的 posval1 的值放入 firstBG.css 中。

谢谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:31:07.807

或者您可以尝试通过函数传递它：

```
var height = $(window).height();
 $(window).resize(function() {
 var getfactor1 = 680 / 697
 var posval1 = height*getfactor1

 myFunction(posval1);

});

 function myFunction(posval1){
  if($firstBG.hasClass("inview")){
   $firstBG.css({'backgroundPosition': newPos(0, windowHeight, pos, posval1, 0.3)});   
  }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:35:27.027

或者，更简单，为什么不在窗口调整大小函数之外声明 posval1 呢？

```
var height = $(window).height(),
    posval1;

$(window).resize(function() {
   var getfactor1 = 680 / 697;
   posval1 = height*getfactor1;
});

if($firstBG.hasClass("inview")){
    $firstBG.css({'backgroundPosition': newPos(0, windowHeight, pos, posval1, 0.3)});   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T19:24:32.977

为什么不将 $firstBG.css() 放入 window.resize()？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T19:49:43.133

```
function newPos(x, windowHeight, pos, adjuster, inertia){
    return x + "% " + (-((windowHeight + pos) - adjuster) * inertia)  + "px";
}

function Move(){ 
    var pos = $window.scrollTop(); 

    if($firstBG.hasClass("inview")){
         var getfactor1 = 680/697;
        var posval1 = height*getfactor1;
        console.log(posval1);
        $firstBG.css({'backgroundPosition': newPos(0, windowHeight, pos, posval1, 0.3)});   
    }

    if($secondBG.hasClass("inview")){   
        var getfactor2 = 1255/697;
        var posval2 = height*getfactor2; 
```

....... 等等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T19:39:28.510

每次用户调整窗口大小时都会发生调整大小事件。如果要更改某些内容，则必须从该事件的处理程序中完成，否则值将不会更新。但一般来说，如果你的`posval1`变量在比调整大小事件处理程序更高的范围内，你也可以从其他地方访问它，但正如我所说，除非在事件处理程序中，否则代码的其他部分将不会再次执行。

范围示例：

```
var posval1;

$(window).on('resize', function() {
  posval1 = height * (680 / 697);
});

// somewhere else
console.log(posval1); 
```

`posval1`然而，在执行到达时，的值很可能是未定义的`console.log()`，因为窗口尚未调整大小。您*可以*做的只是将 CSS 更新外包给另一个函数，并从事件处理程序中调用它以及在开始时调用一次。

```
var windowHeight, pos, posval1; // etc

var updateBg = function () {
  if($firstBG.hasClass("inview")){
    $firstBG.css({'backgroundPosition': newPos(0, windowHeight, pos, posval1, 0.3)});   
  }
};

updateBg(); // once

$(window).on('resize', function () {
  // calculate posval1
  updateBg(); // every time on resize
}); 
```

# mysql - mysql子查询使用laravel的雄辩

> ID：14925018
> 
> 赞同：0
> 
> 时间：2013-02-17T19:18:19.147
> 
> 标签：mysql, laravel, eloquent

我想知道如何以雄辩的方式执行子查询。这是包含我要执行的子查询和我正在使用的雄辩模型结构的数据库的要点。

```
//the query I want to execute
select p.title, c.total
from posts as p,
(select post_id as id, count(*) as total from comments group by post_id) as c
where p.id=c.id

//my table structures
table posts -
id title content

table comments -
id post_id content

//eloquent models
class Post extends Eloquent{
    public static $timestamps = false;

    public function comments(){
        return $this->has_many('Comment', 'post_id');
    }
}

class Comment extends Eloquent{
    public static $timestamps = false;

    public function post(){
        return $this->belongs_to('Post', 'post_id');
    }
} 
```

基本上我想使用 eloquent 来执行包含子查询的查询。我知道我可以使用 DB::query(); 执行原始查询的方法，或者可以尝试使用连接，但我想坚持雄辩。任何类型的架构建议也受到欢迎，因为我可能会错过一种方法，可以使用 eloquent 来获得相同的结果，而无需使用完全相同的查询。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:57:38.220

到目前为止，Eloquent 中可能还没有子查询支持。但是你可以尝试：

1.  执行子查询并将结果放在临时表中，然后执行引用该表的主查询（不要忘记删除临时表）
2.  以不需要使用子查询的方式重写查询（我认为这并不总是可能的）。

对于第二种选择，您的查询可能变为：

```
select p.title, count(c.id) as total
  from posts as p
  left join comments as c on p.id=c.id
group by p.id 
```

我认为它是等效的并且通常更快。

PS：我没有测试查询，因为我没有表，但我经常使用这种方法。如果有任何错别字，请告诉我。

# php - 简单的 HTML DOM 解析器迭代每个节点

> ID：14925021
> 
> 赞同：1
> 
> 时间：2013-02-17T19:18:20.240
> 
> 标签：php, html, dom

我需要一些简单的 HTML DOM 解析器的帮助。我想遍历 DOM 中的每个节点。我想要类似于 jquery '*' 的东西。

目前我的代码如下：

```
 $style_array = array();
 foreach($doc1->find('*') as $element)
 {
 array_push($style_array,$element->getAttribute('src'));
 };
 print_r($style_array); 
```

这只是一个例子，我知道每个节点都不会有 src 属性，但在这种情况下，我准备好处理我的数组中的空白元素。我不仅需要它，而且还需要我需要运行的其他几个函数，迭代文档中的每个节点。

目前，这会产生一个里面绝对没有任何东西的数组。

# c# - Mongodb C# GeoNEar 很慢

> ID：14925022
> 
> 赞同：0
> 
> 时间：2013-02-17T19:18:27.940
> 
> 标签：c#, mongodb

我用 Mongodb C# 添加了一个 GeoNear 函数，如下所示：

```
` var options = GeoNearOptions.SetMaxDistance(rangeInKm / earthRadius /* to radians */)
                                                    .SetSpherical(true).SetDistanceMultiplier(6378.137);
                    collection.EnsureIndex(IndexKeys.GeoSpatial("PlacePoint"));'

 MongoDB.Driver.GeoNearResult<MongoPlace> Georesults = collection.GeoNear(Query.Null, coordinates[0], coordinates[1], TakeNum,options); 
```

我在数据中有超过 3000 个位置......这需要的时间太长了。我怎样才能让它变得更好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:21:53.173

知道“太长”有多长会很有用，因为这可能是高度相关的。它还可以帮助您了解您正在运行的版本以及您正在运行的硬件类型。

但是仅考虑到您上面的信息，一个潜在的放缓是您的

```
collection.EnsureIndex(IndexKeys.GeoSpatial("PlacePoint")); 
```

看起来您可能会在每次查询之前运行它，这将是一个禁忌，因为您应该只在您的集合上创建一次索引，我猜这可能会减慢您的速度。

您可以尝试从 mongo shell 运行您的命令，就像这样（当然，用您的实际值代替我的占位符）：

```
db.runCommand( { geoNear: "<collectionName>", near: [<lon>,<lat>], num: <num>, spherical:true } ) 
```

然后查看“统计”信息，看看是否有什么地方看起来不对劲。我个人有一个包含 234107 个带有地理空间索引的地点的集合，我运行了一个 geoNear 命令，其坐标故意远离我集合中的任何地点，以帮助确保它能够扫描每个地点。我得到了以下结果（在中等强大的硬件上运行 2.2.3 版：Core i5、16 GB RAM、7200 RPM HDD - 数据集由相当小的文档组成，其中包括纬度/经度点 + 少量附加数据）：

```
 "stats" : {
            "time" : 261,
            "btreelocs" : 0,
            "nscanned" : 234107,
            "objectsLoaded" : 133,
            "avgDistance" : 1.380670166668938,
            "maxDistance" : 1.3807179692447809
    }, 
```

在一个更接近我收藏中的地方的查询中，我得到：

```
 "stats" : {
            "time" : 15,
            "btreelocs" : 0,
            "nscanned" : 6211,
            "objectsLoaded" : 29,
            "avgDistance" : 0.003811909711576418,
            "maxDistance" : 0.003919781450489085
    }, 
```

这里的“时间”以毫秒为单位，这对我来说似乎很合理。在 C# 中运行 GeoNear 函数对我来说总是几乎立即返回，所以我不认为你的缓慢结果将是由于 C# 驱动程序的任何低效率。

# php - 如果尚未选择文件，则不要上传

> ID：14925025
> 
> 赞同：0
> 
> 时间：2013-02-17T19:18:40.327
> 
> 标签：php, forms, file, upload

我在处理这个表格时遇到了问题。我希望用户能够编辑数据库中的项目。他们在一个页面上选择了要编辑的项目，并通过 GET 将其发送到编辑页面。GET 具有他们需要编辑的项目的 ID。

编辑页面加载插入到用户表单中的项目的详细信息（除了文件名），此字段留空。我正在尝试执行一些逻辑来检查用户是否选择了文件。

如果他们没有，那么这个字段应该被忽略，因为我认为用户对已经上传的文件很满意。

如果他们选择了一个文件，那么这意味着他们希望这是新图片。只有这样我才想运行逻辑来上传图片并将其名称插入数据库。

我通过以下方式获取我的 POST 详细信息：

```
$clean_pic = $_POST['pic']; 
```

然后我说如果它是空白的，那么什么都不做，否则运行上传：

```
if($clean_pic = ''){}
    else{ 
```

它不工作。任何想法我应该如何找出它是否为空白？删减代码：

```
if (isset($_POST['add'])) 
{

    // validate 'pic': must consist of alphanumeric characters only.
    $_POST['pic'] = isset($_POST['pic']) ? $_POST['pic'] : '';
    //if(preg_match('/\.(jpg|gif|jpeg)$/i',$_POST['pic']))
        //{
        $clean_pic = $_POST['pic'];
        //}
    //else
        //{$error++; $errmsg .= 'Invalid pic. ';}

}

if (isset($_POST['add']) && ($error==0)) 
{                   

    if (!isset($_POST['pic'])) { echo"test1";}
else {echo"test222";}

    /*tied this too but it didnt work (it will always display result 1):
       if (!isset($_POST['pic'])) { echo"test1";}
   if (isset($_POST['pic']))  {echo"test222";}*/

}

else //output error messages 
{
/////////render form
?>
<form enctype="multipart/form-data" action="" method="post" id="save"><fieldset>
<table id="site-form">
    <tr>
    <td class="one_of_three"><label>Item Name:&nbsp;&nbsp;</label></td>
    <td class="two_of_three"><input type="text" name="fileName" id="fileName" value="<?php echo"$db_name";?>"/></td>
    <td><label class="errors" id="fileNameError">&nbsp;</label></td>
    </tr>
    <tr>
    <td class="one_of_three"><label>Picture:&nbsp;&nbsp;</label></td>
    <td class="two_of_three"><input type="file" name="userfile[]" id="pic"/></td>
    <td><label class="errors" id="picError">&nbsp;</label></td>
    </tr>

    <tr>
        <td class="one_of_three">&nbsp;</td>
        <td class="two_of_three"><input name="add" id="save_button" type="submit" value="Update"/>&nbsp;&nbsp;<a href="../">Cancel</a>.</td>
        <td>&nbsp;</td>
    </tr>
</table>
</fieldset></form>
<?php }?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:26:06.967

怎么样`if (!isset($_POST['pic']))`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:31:28.123

您无法使用“id”属性（“pic”）访问该文件。您必须使用“名称”属性（“用户文件”）的值。您可以使用 php.ini 中的 $_FILES 数组检查文件是否已上传。

if(isset($_FILES) && isset($_FILES['userfile']) && (trim($_FILES['userfile']['name']) != '') ) {

//你的上传代码在这里

}

别的

{

//没有上传文件

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:37:46.863

你需要检查一下：一个是 $_POST['pic'] 是一个数组，第二个是你必须使用 enctype="multipart/form-data" 属性的形式。

# vb.net - vb.net 如何退出验证将焦点返回到空文本框？

> ID：14925027
> 
> 赞同：0
> 
> 时间：2013-02-17T19:18:49.453
> 
> 标签：vb.net

我在 vb.net 中工作，我想退出验证并将焦点返回到带有错误的文本框。

它会引发错误，但只要我单击确定，它就会继续执行程序的其余部分。有任何想法吗？谢谢你。

我还应该提到这是在课堂上吗？

```
 'number of tickets property
Public Property NumberOfTickets() As String
    Get
        Return NumTickets
    End Get
    Set(value As String)
        If (String.IsNullOrEmpty(value)) Then
            MessageBox.Show("Please Enter Number of Tickets")
            Exit Property
        Else
            NumTickets = value
        End If
    End Set
End Property 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:41:26.063

您可以使用文本框的[验证](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)事件，并在其中说：

```
e.Cancel = True 
```

这将阻止用户离开文本框。但是，这也会阻止用户关闭表单并执行任何其他操作。一些人认为这样限制用户是不好的做法。

请考虑改用[ErrorProvider](http://msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider.aspx)并将错误通知用户。

总是尽力让他们完成他们正在做的事情。

# sql - 更新数据而不修改旧数据

> ID：14925028
> 
> 赞同：0
> 
> 时间：2013-02-17T19:19:06.193
> 
> 标签：sql, oracle, oracle-apex

我想知道如何在不修改数据的情况下更新我的表。我有一个允许用户输入数据的应用程序，但如果他们犯了错误，他们可以修改输入的数据。但是当用户修改数据时，它会覆盖之前输入的数据。

有没有办法保留旧数据，但如果用户确实修改了数据，它将显示在另一个添加的列上，可能会说“数据已修改”。

这是我从我在区域源中的应用程序中获取的内容

```
select "PROBLEM_ID", 
"PROBLEM_TYPE_ID",
"DATE_REPORTED",
"DESCRIPTION",
"POSTCODE"
from "#OWNER#"."CS_PROBLEMS" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:28:05.903

您可以编写“每行更新后”触发器以将旧日期保存在历史记录表中。或“每行的预更新”触发器以在现有表中设置额外的列。然后您可以创建一个屏幕或程序来检索历史数据。或通过手动过程恢复。

# javascript - 仅使用 Javascript 捕获 ESC 键

> ID：14925036
> 
> 赞同：9
> 
> 时间：2013-02-17T19:19:42.413
> 
> 标签：javascript, html, html5-video

我有一个带有自己控件的自定义视频播放。当用户进入并存在全屏时，我有一个脚本来更改控件。问题是当我使用 ESC 键而不是按钮退出全屏时，控件的样式更改不会恢复。我需要确保使用 ESC 或按钮退出全屏会导致相同的行为。

CSS：

```
function toggleFullScreen() {

  elem = document.getElementById("video_container");
  var db = document.getElementById("defaultBar"); 
  var ctrl = document.getElementById("controls");

  if (!document.fullscreenElement &&    // alternative standard method
      !document.mozFullScreenElement && !document.webkitFullscreenElement) {  // current working methods
    if (document.documentElement.requestFullscreen) {

          ctrl.style.width = '50%';
          ctrl.style.left = '25%';
          full.firstChild.src = ('images/icons/unfull.png');
          elem.requestFullscreen();          
        } else if (document.documentElement.mozRequestFullScreen) {
          full.firstChild.src = 'images/icons/unfull.png';
          ctrl.style.width = '50%';
          ctrl.style.left = '25%';
          elem.mozRequestFullScreen();
        } else if (document.documentElement.webkitRequestFullscreen) {

          ctrl.style.width = '50%';
          ctrl.style.left = '25%';
          full.firstChild.src = 'images/icons/unfull.png';
          elem.webkitRequestFullscreen();

        }
  } else if (document.exitFullscreen) {
        full.firstChild.src = 'images/icons/full.png';
        ctrl.style.width = '100%';
        ctrl.style.left = '0';        
        document.exitFullscreen();
        }
        else if (document.mozCancelFullScreen) {
        full.firstChild.src = 'images/icons/full.png';
        ctrl.style.width = '100%';
        ctrl.style.left = '0'; 
        document.mozCancelFullScreen();
        }
        else if (document.webkitCancelFullScreen) {

        ctrl.style.width = '100%';
        ctrl.style.left = '0';
        full.firstChild.src = 'images/icons/full.png';
        document.webkitCancelFullScreen();
        } 
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-12-03T01:05:08.890

# event.key === "逃脱"

更新和更清洁：使用`event.key`. 没有更多的任意数字代码！

```
document.addEventListener("keydown", function(event) {
    const key = event.key; // Or const {key} = event; in ES6+
    if (key === "Escape") {
        // Do things
    }
}); 
```

### 现代风格，带有 lambda 和解构

```
document.addEventListener("keydown", ({key}) => {
    if (key === "Escape") // Do things
}) 
```

[Mozilla 文档](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key)

[支持的浏览器](http://caniuse.com/#feat=keyboardevent-key)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-17T19:36:42.237

***编辑：****这个答案已经过时了。对于现代浏览器，[@Gibolt 的答案](https://stackoverflow.com/a/47614261/2012396)更好。如果需要支持 IE11，可以回退到旧的 event.keyCode。有关更多详细信息，请参阅[本文](https://medium.com/@uistephen/keyboardevent-key-for-cross-browser-key-press-check-61dbad0a067a)。*

听起来您想将按键事件附加到文档。像这样的东西应该可以解决问题。

```
document.onkeypress = function(evt) {
    evt = evt || window.event;
    if (evt.keyCode == 27) {
        alert("Esc was pressed");
    }
}; 
```

有关更多信息，请查看[这篇文章](http://unixpapa.com/js/key.html)

# sql - Oracle/Sql 中的文件扩展名查询

> ID：14925037
> 
> 赞同：1
> 
> 时间：2013-02-17T19:19:46.180
> 
> 标签：sql, oracle, oracle10g, oracle11g

我有一个表 tblAttachmentDetails，其中包含 ID、文件名和 LastUpdated。

```
ID    FileName     LastUpdated
 1    Abc.txt      12/12/2011
 2    dsa.doc      12/12/2008
 3    ddd.xls      12/12/2003
 4    Accbc.xlsx   12/12/2006
 5    cc.txt       12/12/2006
 6    cc.doc       12/12/2006
 7    cc.xls       12/12/2008
 8    cc.xlsx      12/12/2012 
```

我想要按 LastUpdated 排序的前 10 行 .xls 和 .xlsx 文件。

甲骨文：

```
SELECT * 
FROM tblAttachmentDetails 
where ROWNUM <= 10 
and FileName Like '%.xls%' 
order by LastUpdated Desc 
```

请在这个查询中纠正我，因为从这个查询中我只得到 .xls 文件而不是 xlsx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:39:46.857

`ROWNUM`过滤应该在按类型和排序过滤之后应用。

```
SELECT *
  FROM ( SELECT *
           FROM tblAttachmentDetails
           WHERE FileName Like '%.xls%'
           ORDER BY LastUpdated DESC
       )
  WHERE ROWNUM <= 10 
```

# node.js - 第一个主要网站的新技术（CouchDB、Node.js）

> ID：14925040
> 
> 赞同：0
> 
> 时间：2013-02-17T19:19:55.687
> 
> 标签：node.js, couchdb, couchbase, nodejitsu, cloudant

所以这是我第一次真正地制作一个网站并在线托管它——我所做的大部分工作都是教程和课堂作业。现在我和一个朋友想做一些专业的事情，也许会发展成一家企业。

1.）我想长期规划，但有点害怕致力于我有基本知识的事情。您如何看待从这些技术（CouchDB、Node.js）入手？长期目标是它将成为社交网络并使用搜索，因此使用 noSQL。将使用 Linux + RoR。Node.js 对我来说仍然有点难以捉摸，尽管我已经阅读了很多关于它的内容。

2.) 大多数网络托管服务是否支持这些技术，还是我必须找到专门的托管服务或自己托管它们？

3.) Cloudant 和 Nodejitsu/CloudOne 怎么样——我应该考虑使用这些吗？其他建议非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:32:00.983

我肯定会推荐一个完善的 PAAS 提供商。就像 Heroku 或 AppFog 一样。他们将确保您只需担心开发下一个很酷的应用程序，而不是成为系统管理员。

Heroku 还支持通过 git 进行部署，这很好。另一个很大的优势是，如果您的应用程序真正启动并且您需要扩展，那么使用这些 PAAS 提供程序进行扩展通常就像玩几个滑块一样简单！

**1** . 有很多可用的 noSQL 数据库 MongoDB 和 CouchDB 都不错。他们有很好的文档。但在选择任何一个之前，请确保它们符合您的确切需求。RoR 又是一个很棒的框架。尤其被推特使用。当然，将实际的服务器管理留给 PAAS 提供商！

**2** . 查看 Heroku 或 AppFog。他们俩都支持 RoR，并且凭借良好的文档和社区可用而享有盛誉。

**3** . 如果您计划构建一个处理大量并发连接的应用程序，我建议您使用 Node.js。例如，就像一个聊天应用程序，这基本上是 Node.js 大放异彩的地方。

最后，不要过多考虑*时髦*技术是什么。选择你熟悉和舒服的。最重要的是选择适合您确切需求的产品。

# date - squeryl 日期到长转换 - 查询挂起简单操作

> ID：14925042
> 
> 赞同：0
> 
> 时间：2013-02-17T19:20:14.880
> 
> 标签：date, playframework-2.0, long-integer, squeryl

对我之前的问题的一种跟进问题： [squeryl date to long conversion](https://stackoverflow.com/questions/14407269/squeryl-date-to-long-conversion)

如该线程中所述，我实现了 DateTime(model) 到 Long(DB) 的转换。
我写了一个简单的查询来删除所有过期的记录：

```
println("deleting expired")
val now: DateTime = new DateTime()
inTransaction {
  MyDB.loginTokens.deleteWhere(t =>
    t.expires lt now.getMillis
  )
}
println("finished deleting") 
```

但是查询只是挂在那里并且什么都不做，没有抛出错误......我只看到打印了“删除过期”并且从未“完成”。
我还尝试了“t.expires lt now”和其他一些变体，但没有成功。

知道是什么原因造成的以及如何解决吗？

将 lt 更改为 .~ < 时进行编辑，将 lt 更改为 === 时仍然存在问题，现在和 now.getMillis 的查询都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:16:50.620

t.expires.~ 现在

注意点 tilda。
不知道为什么“lt”本身不起作用，例如 === 起作用。
也许它是别的东西的同义词......

# javascript - Twitter引导轮播中页面加载后如何隐藏左键？

> ID：14925043
> 
> 赞同：4
> 
> 时间：2013-02-17T19:20:20.393
> 
> 标签：javascript, jquery, twitter-bootstrap

Twitter引导轮播中页面加载后如何隐藏左键？

[http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)

我的尝试（它在第一次行动后起作用，我需要所有时间）：

```
$('#myCarousel').on('slid', '', function() {
    var $this = $(this);

    $this.children('.carousel-control').show();
    if($('.carousel-inner .item:first').hasClass('active')) {
      $this.children('.left.carousel-control').hide();
    } 
    else if($('.carousel-inner .item:last').hasClass('active')) {
      $this.children('.right.carousel-control').hide();
  }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:56:21.760

只需在页面加载后隐藏左侧按钮即可。因为它总是从第一张幻灯片开始。

```
$('#myCarousel > .left.carousel-control').hide(); 
```

或者，在页面加载后手动触发`slid`事件。

```
$('#myCarousel').on('slid', '', function () {
  ...
}).trigger('slid'); 
```

# mysql - How implementation my wants with MySQL JOIN

> ID：14925044
> 
> 赞同：0
> 
> 时间：2013-02-17T19:20:24.027
> 
> 标签：mysql

_

Hello everyone!

I have table

```
CREATE TABLE `labels` (
  `id` INT NULL AUTO_INCREMENT DEFAULT NULL,
  `name` VARCHAR(250) NULL DEFAULT NULL,
  `score` INT NULL DEFAULT NULL,
  `before_score` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
); 
```

And I Have This Table

```
CREATE TABLE `scores` (
  `id` INT NULL AUTO_INCREMENT DEFAULT NULL,
  `name_id` INT NULL DEFAULT NULL,
  `score` INT NULL DEFAULT NULL,
  `date` DATETIME DEFAULT NULL,
  PRIMARY KEY (`id`)
); 
```

And i want have result where **labels.score** - have value last **scores.score** sorted by **scores.date** and **labels.before_score** where have value penultimate **scores.score** sorted by **scores.date**. Can I do This Only on Mysql slq and how?

Thanks.

**ADD**

For example i have this data on first table:

```
INSERT INTO `labels` (id, name, score, before_score) VALUES (1, 'John', 200, 123);
INSERT INTO `labels` (id, name, score, before_score) VALUES (2, 'Eddie', 2000, 2000);
INSERT INTO `labels` (id, name, score, before_score) VALUES (3, 'Bob', 400, 3101); 
```

And second table

```
INSERT INTO `scores` (`id`,`name_id`,`score`,`date`) VALUES ('1','1','12','2013-07-10');
INSERT INTO `scores` (`id`,`name_id`,`score`,`date`) VALUES ('2','2','2000','2013-05-04');
INSERT INTO `scores` (`id`,`name_id`,`score`,`date`) VALUES ('3','3','654','2012-09-12');
INSERT INTO `scores` (`id`,`name_id`,`score`,`date`) VALUES ('4','1','123','2013-12-17');
INSERT INTO `scores` (`id`,`name_id`,`score`,`date`) VALUES ('5','1','200','2014-04-25');
INSERT INTO `scores` (`id`,`name_id`,`score`,`date`) VALUES ('6','3','3101','2013-12-02');
INSERT INTO `scores` (`id`,`name_id`,`score`,`date`) VALUES ('6','2','2000','2015-12-02');
INSERT INTO `scores` (`id`,`name_id`,`score`,`date`) VALUES ('6','3','400','2013-12-02'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:49:00.543

If I understand correctly, you need the last *two* scores for each `name_id`.

I would tackle this with temporary tables:

**Step 1.** Last score:

```
create temporary table temp_score1
    select name_id, max(`date`) as lastDate
    from scores
    group by name_id;
-- Add the appropriate indexes 
alter table temp_score1
    add unique index idx_name_id(name_id),
    add index idx_lastDate(lastDate); 
```

**Step 2.** Penultimate score. The idea is exactly the same, but using `temp_score1` to filter the data:

```
create temporary table temp_score2
    select s.name_id, max(`date`) as penultimateDate
    from scores as s
        inner join temp_score1 as t on s.nameId = t.nameId
    where s.`date` < t.lastDate
    group by name_id;
-- Add the appropriate indexes
alter table temp_score2
    add unique index idx_name_id(name_id),
    add index idx_penultimateDate(penultimateDate); 
```

**Step 3.** Put it all together.

```
select 
    l.id, l.name,
    s1.lastScore, s2.penultimateScore
from
    `labels` as l
    left join temp_score1 as s1 on l.id = s1.name_id
    left join temp_score2 as s2 on l.id = s2.name_id 
```

You can put this three steps inside a stored procedure.

Hope this helps you.

# javascript - 需要对javascript中的所有字段发出警报

> ID：14925048
> 
> 赞同：0
> 
> 时间：2013-02-17T19:20:38.510
> 
> 标签：javascript

如何获得所有空字段的警报。在下面的代码中，我可以得到用户名字段的警报。如何获得所有领域的警报。

JavaScript 代码

```
function null_field(form_name, field_name) {
  var field = document.forms[form_name][field_name].value;

  if (field == null || field == "") {
    alert("All Field Are Required");

    return false;
  }
} 
```

登录表单

```
<form action="login_code.php" method="post" onSubmit="return null_field('login_form', 'username')" name="login_form">
<b>Username: </b><input type="text" name="username" class="field">
<b>Password: </b><input type="password" name="password" class="field">
<input type="submit" value="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:26:48.167

而是为整个表单创建一个函数：

```
function valid_form(form_name) {
    var form = document.forms[form_name],
        fields = form.elements, i = 0, l = fields.length;
    for (; i < l; i++)
        if (fields[i].value === "") {
            alert("All Field Are Required");
            return false;
        }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:23:49.590

对于每个字段，您必须调用该函数。因此，对于每个输入标签，调用`onsubmit="not_null"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T19:26:17.630

我认为链接会帮助您满足您的需求。希望你正在寻找相同的

[http://www.c-sharpcorner.com/blogs/8702/validation-summary-in-javascript.aspx](http://www.c-sharpcorner.com/blogs/8702/validation-summary-in-javascript.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T19:28:47.777

如果在有任何空字段时需要一个警报，则可以使用以下内容：

```
function validate_fields(form_name) {      
  var has_empty_fields = false;

  for (var field in document.forms[form_name].elements) { 
    if(field == null || field.value == "") {
      has_empty_fields = true;
      break;
    }
  }

  if (has_empty_fields) {
    alert("All Fields Are Required");
    return false;
  }

  return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T19:30:08.473

在原始 javascript 中，您可以执行以下操作：

```
function null_field(form_name)
  {
    for(i=0; i<document.forms[form_name].elements.length; i++){
       if (document.forms[form_name].elements[i] == null ||document.forms[form_name].elements[i].value == "" || document.forms[form_name].elements.value == undefined)
              {
                  alert("All Field Are Required");
                  return false;
              }
    }
    return true;
} 
```

# android - 丑陋的片段过渡到带有覆盖的surfaceview

> ID：14925060
> 
> 赞同：3
> 
> 时间：2013-02-17T19:21:18.787
> 
> 标签：android, overlay, fragment, surfaceview, transition

我的应用程序其中一个片段在表面视图中绘制了一张地图，上面覆盖了按钮和文本。

大多数其他片段都是列表。我的问题是，在地图和另一个片段之间的过渡期间，丑陋的黑色矩形会暂时出现在放置文本和按钮视图的地图视图中。这在返回地图的过渡时显得更加明显，尽管它确实发生在两个方向上。我正在使用左滑/右滑动画，它在所有其他方面都很好用。我试过其他动画，没有动画。在过渡之前将文本和按钮设置为不可见也无济于事，因为视图仍然存在于叠加层中。

如果有人对如何实现干净的片段转换有任何想法，将不胜感激。我正在使用支持片段管理器。

这是我的代码（文本和按钮比我在下面显示的要多得多）：

布局xml文件：

```
<?xml version="1.0" encoding="utf-8"?>

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapframeview"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
 >

<com.mypackage.MapView 
    android:id="@+id/maptileview"  
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
</com.mypackage.MapView>

<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapoverlay"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" >

   <TextView
    android:id="@+id/titletext"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_alignParentTop="true"
    android:paddingTop="10dp"
    android:textColor="#FFFFFF"
    android:textSize="24dp"
    android:textStyle="bold" />

    <ImageButton
    android:id="@+id/bookButton"
    android:onClick="onClickBookButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_alignParentRight="true"
    android:paddingTop="15dp"
    android:paddingRight="15dp"
    android:background="@android:color/transparent"
    android:src="@drawable/bookbutton">
    </ImageButton>

  </RelativeLayout>

 </FrameLayout> 
```

片段转换代码：

```
 private void startNextFragment(Fragment newFragment, String fragment tag) {

FragmentManager fragmentManager = getSupportFragmentManager();

    FragmentTransaction transaction = 
            fragmentManager.beginTransaction();

    transaction.setCustomAnimations(R.layout.slideinright,
                                        R.layout.slideoutleft,  
                                        R.layout.slideinleft, 
                                        R.layout.slideoutright);

    transaction.replace(R.id.fragment_container, newFragment, fragmentTag);
    transaction.addToBackStack(null);

    // Commit the transaction
    transaction.commit();
} 
```

动画xml：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
/* //device/apps/common/res/anim/slide_in_right.xml */
-->

<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate android:fromXDelta="50%p" android:toXDelta="0"
        android:duration="@android:integer/config_mediumAnimTime"/>
<alpha android:fromAlpha="0.0" android:toAlpha="1.0"
        android:duration="@android:integer/config_mediumAnimTime" />
</set>

<?xml version="1.0" encoding="utf-8"?>
<!--
/* //device/apps/common/res/anim/slide_out_left.xml*/
-->

<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate android:fromXDelta="0" android:toXDelta="-50%p"
        android:duration="@android:integer/config_mediumAnimTime"/>
<alpha android:fromAlpha="1.0" android:toAlpha="0.0"
        android:duration="@android:integer/config_mediumAnimTime" />
</set> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:31:01.210

如果您使用的是 SurfaceView，请使背景透明。

```
android:background="@android:color/transparent" 
```

这对我有用，闪烁消失了。

# android - 如何从 android.webkit.CookieManager 获取所有 cookie 或 cookie 的 url

> ID：14925061
> 
> 赞同：2
> 
> 时间：2013-02-17T19:21:30.447
> 
> 标签：android, jsoup, cookiemanager

主要是，我使用 webview 登录了 facebook。所以，我不知道哪些 url 的哪些 cookie 保存到 CookieManager 中。我不知道这是否可能，但我知道该怎么做。

现在，我需要使用 Jsoup 获取一个页面。但我还需要传递一些 cookie 来获取页面，否则服务器将返回一个错误寻呼机。

我想要 Jsoup，因为我需要页面中的一些信息

我尝试过这样的事情，但我一直收到错误页面：

```
Map<String, String> cookies = new HashMap<String, String>();
cookies.put(domain1, my_cookie1);
cookies.put(domain2, my_cookie2);
cookies.put(domain3, my_cookie3);
cookies.put(domain4, my_cookie4);

Document doc = Jsoup.connect(uri.toString())
                            .cookies(cookies)
                            .timeout(10000)
                            .get();
Log.e("title", doc.title()); 
```

`my_cookie`是从 CookieManager 获取的。而且它们不是空的，因为我已经打印了它们。

我认为问题出在 cookie 上。或不？有什么解决办法吗？我想我错过了 CookieManager 中的一些 cookie。

我需要获取页面。

**编辑：**

或者，是否可以将 cookimanager 传递给 Jsoup ？因此，它可以直接从 cookiemanager 获取 cookie。或者，我可以知道获取我的愿望页面需要哪些 cookie？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:08:58.780

我已经解决了这个问题。首先，我一直得到正确的饼干。那么问题是什么。要么是我将 cookie 集成错误，`Jsoup`要么 Jsoup 做错了什么。所以，首先我得到了页面，`HttpUrlConnection`然后用 Jsoup 解析它。像这样：

```
URL form = new URL(uri.toString());
HttpUrlConnection connection1 = (HttpURLConnection)form.openConnection();
connection1.setRequestProperty("Cookie", my_cookie);
connection1.setReadTimeout(10000);
StringBuilder whole = new StringBuilder();
BufferedReader in = new BufferedReader(
new InputStreamReader(new BufferedInputStream(connection1.getInputStream())));
String inputLine;
while ((inputLine = in.readLine()) != null)
      whole.append(inputLine);
in.close();
Document doc = Jsoup.parse(whole.toString()); 
```

任何有关此代码的建议将不胜感激。

# android - OpenLayers KML 远程图标不显示在移动设备上

> ID：14925062
> 
> 赞同：1
> 
> 时间：2013-02-17T19:21:33.427
> 
> 标签：android, iphone, mobile, openlayers

您好我正在使用 OpenLayer 创建 HTML5 移动应用程序。我使用包含 KML 的矢量图层和下一部分代码：

```
<IconStyle>
        <Icon>
            <href>//23.23.23.23/images/img.png</href>
            <href>//23.23.23.23/images/img.png</href>
            <scale>2.1</scale>
        </Icon>
        <hotSpot x="14" y="14" xunits="pixels" yunits="pixels"/>
 </IconStyle> 
```

我的笔记本电脑上的所有作品，但是当我在我的手机上测试而不是这个图像时，显示带有问号的图像....我已经搜索过这个但我没有找到任何解决方案....问题是仅当在移动设备上查看时:(

*   此示例中的 URL 不是真实的，但在原始代码中这是可以的，并且图像存在于服务器上....（正如我所说，它在我的笔记本电脑上没问题，并且显示正确）。

# android - Android：理解使用一个 IntentService 和多个操作

> ID：14925063
> 
> 赞同：3
> 
> 时间：2013-02-17T19:21:34.037
> 
> 标签：android, intentservice

我有一个问题，意图没有被传递到`IntentService`特定活动流​​下：这是场景：

1.  考虑 3 个活动，Home、B 和 C。C 有 2 个片段 CF1 和 CF2。
2.  B、CF1 和 CF2 使用相同的 IntentService 类，但动作不同。
3.  IntentService 开始使用`startService(Intent)`. （getActivity().startService(Intent) 用于片段）
4.  无论 IntentService 在哪里启动，我都会确保它`stopService(intent)`在 Activity/Fragment 中运行时停止使用`onStop()`。
5.  如果活动流程是 Home -> C -> CF1 - >CF2，则一切正常。
6.  如果活动流是 Home -> B -> C -> CF1 -> CF2，则`onHandleIntent`在从 CF2 的 startService(Intent) 之后永远不会调用。处理 B 和 CF1 意图。为了调试，我尝试在Activity B中等待IntentService完成，然后转到CF1 -> CF2，仍然是同样的问题。CF1 在启动相同的意图服务时似乎从来没有任何问题。当我尝试`IntentService`为 CF2 创建一个新类时，它起作用了。

我的理解是 IntentService 有一个意图队列。如果服务是第一次运行，则调用 onStartCommand（我们不应该为 IntentService 处理）。如果服务已在运行，则每次后续调用 startService 都会调用 onHandleIntent。

显然，我做错了什么，但不清楚是什么。我曾尝试研究其他 stackoverflow 问题，但没有帮助。我使用的代码非常简单：

**AndroidManifest.xml**

```
<service android:name=".service.ExampleIntentService" /> 
```

**活动 B**

```
@Override
public void onCreate(Bundle savedInstanceState)
{
       .......
       intent = new Intent(getApplicationContext(), ExampleIntentService.class);
       intent.setAction(StringConstants.ACTION_B);
       serviceRunning = true; //set to false in onReceiveResult 
       startService(intent);
}

@Override
public void onStop()
{
      if(serviceRunning && intent != null)
          stopService(intent)
} 
```

**片段 CF1**

```
@Override
public void onResume()
{
    super.onResume();

    intent = new Intent(getActivity(), ExampleIntentService.class);
    intent.setAction(StringConstants.ACTION_CF1);
    serviceRunning = true; //set to false in onReceiveResult 
    startService(intent);
}

@Override
public void onStop()
{
      if(serviceRunning && intent != null)
          stopService(intent)
} 
```

片段的代码完全相同，CF2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T19:42:18.983

> 我的理解是……如果服务是第一次运行，则调用 onStartCommand（我们不应该为 IntentService 处理）。如果服务已在运行，则每次后续调用 startService 都会调用 onHandleIntent。

`onStartCommand()`每次通话都会拨打号码`startService()`。`onHandleIntent()`每次`startService()`调用 an时都会调用它`IntentService`，除非您采取`onStartCommand()`措施改变正常行为。

> IntentService 使用 startService(Intent) 开始。

您将命令发送到`IntentService`using `startService()`。

> 无论 IntentService 在哪里启动，我都会使用 stopService(intent) 确保它停止

这是一个非常糟糕的主意。[如文档](http://developer.android.com/reference/android/app/IntentService.html)中所述，在处理完所有呼叫`IntentService`后将自行停止：`startService()`

> IntentService 将接收 Intent，启动工作线程，并酌情停止服务。

# c++ - 递归函数中的类变量访问

> ID：14925065
> 
> 赞同：0
> 
> 时间：2013-02-17T19:21:43.263
> 
> 标签：c++, class, variables, recursion

对于一个介绍程序，我们被要求构建一个程序，该程序可以找到给定大小的每个可能的工作幻方。我无法从递归函数中修改类变量。每次我尝试的数字组合产生一个幻方时，我都试图增加找到的幻方的数量。

更具体地说，我正在尝试修改函数 recursiveMagic() 中的 numSquares。在该特定行设置断点后，变量 numSquares 不会更改，即使我正在递增它。我认为这与递归有关，但是，我不确定。如果您想提供一些建议，我将不胜感激。

```
//============================================================================
// Name        : magicSquare.cpp
// Author      : 
// Version     :
// Copyright   : Your copyright notice
// Description : Hello World in C++, Ansi-style
//============================================================================

#include <iostream>
using namespace std;

/**
 * MagicSquare
 */
class MagicSquare {
private:
    int magicSquare[9];
    int usedNumbers[9];
    int numSquares;
    int N;
    int magicInt;
public:

    MagicSquare() {
        numSquares = 0;
        for (int i = 0; i < 9; i++)
            usedNumbers[i] = 0;
        N = 3; //default is 3
        magicInt = N * (N * N + 1) / 2;
    }

    MagicSquare(int n) {
        numSquares = 0;
        for (int i = 0; i < 9; i++)
            usedNumbers[i] = 0;
        N = n;
        magicInt = N * (N * N + 1) / 2;
    }

    void recursiveMagic(int n) {
        for (int i = 1; i <= N * N + 1; i++) {
            if (usedNumbers[i - 1] == 0) {
                usedNumbers[i - 1] = 1;
                magicSquare[n] = i;
                if (n < N * N)
                    recursiveMagic(n + 1);
                else {
                    if (isMagicSquare()) {
                        numSquares++; //this is the line that is not working correctly
                        printSquare();
                    }
                }
                usedNumbers[i - 1] = 0;
            }
        }
    }
    //To efficiently check all rows and collumns, we must convert the one dimensional array into a 2d array
    //since the sudo 2d array looks like this:
    //        0 1 2
    //        3 4 5
    //        6 7 8
    //the following for-if loops convert the i to the appropriate location.

    bool isMagicSquare() {
        for (int i = 0; i < 3; i++) {
            if ((magicSquare[i * 3] + magicSquare[i * 3 + 1] + magicSquare[i * 3 + 2]) != magicInt) //check horizontal
                return false;
            else if ((magicSquare[i] + magicSquare[i + 3] + magicSquare[i + 6]) != magicInt) // check vertical
                return false;
        }
        if ((magicSquare[0] + magicSquare[4] + magicSquare[8]) != magicInt)
            return false;
        if ((magicSquare[6] + magicSquare[4] + magicSquare[2]) != magicInt)
            return false;
        return true;
    }

    /**
     * printSquare: prints the current magic square combination
     */
    void printSquare() {
        for (int i = 0; i < 3; i++)
            cout << magicSquare[i * 3] << " " << magicSquare[i * 3 + 1]
                << " " << magicSquare[i * 3 + 2] << endl;
        cout << "------------------" << endl;
    }

    /**
     * checkRow: checks to see if the current row will complete the magic square
     * @param i - used to determine what row is being analyzed
     * @return true if it is a working row, and false if it is not
     */
    bool checkRow(int i) {
        i = (i + 1) % 3 - 1;
        return (magicSquare[i * 3] + magicSquare[i * 3 + 1] + magicSquare[i * 3 + 2]) == magicInt;
    }

    int getnumSquares() {
        return numSquares;
    }
}; //------End of MagicSquare Class-----

int main() {
    MagicSquare square;
    cout << "Begin Magic Square recursion:" << endl << "------------------"
            << endl;
    square.recursiveMagic(0);
    cout << "Done with routine, returned combinations: " << square.getnumSquares() << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:55:39.740

数组被覆盖导致覆盖 numSquares 字段。

```
class MagicSquare {
private:
    int magicSquare[9];
    int usedNumbers[9]; 
```

更改为

```
class MagicSquare {
private:
    int magicSquare[10];
    int usedNumbers[10]; 
```

同样在你的初始化程序中，循环说< 9，但你想说的是< 10。或者只是使用 memset 更好地达到这个目的。

# objective-c - 可能发生动画时释放窗口

> ID：14925066
> 
> 赞同：1
> 
> 时间：2013-02-17T19:21:46.113
> 
> 标签：objective-c, cocoa, appkit, nswindowcontroller

我`AppDelegate`维护了一个活动窗口控制器列表，以避免 ARC 过早地释放它们。所以我有一个这样的通知处理程序：

```
- (void) windowWillClose: (NSNotification*) notification {
    [self performSelectorOnMainThread: @selector(removeWindowControllerInMainThread:)
        withObject: windowController
        waitUntilDone: NO];
}

- (void) removeWindowControllerInMainThread: (id) windowController {
    [windowControllers removeObject: windowController];
} 
```

我使用主线程是因为在通知线程上进行处理可能会在控制器准备好之前释放控制器。

现在，这工作得很好——除非当前有动画师正在运行。我在某些地方使用动画师，通过`NSAnimationContext`. 我看过[这个 QA](https://stackoverflow.com/questions/1077793/how-to-wait-for-an-animator-to-finish)，答案是不可接受的。等一会，只是为了做动画，真的是粗制滥造，不保证能干；确实没有。我尝试使用`performSelector:withObject:afterDelay`，即使延迟大于当前动画持续时间，它仍然会导致动画师针对 nil 对象运行。

像这样进行控制器清理的首选方法是什么？不使用`NSAnimationContext`而是使用`NSAnimation`，哪个有`stopAnimation`方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:29:57.490

我没有使用过`NSAnimationContext`（总是使用`NSAnimation`，但主要是出于历史原因）。但我喜欢管理与此类似的事情的典型方式是创建短暂的保留循环。

马克的回答完全是正确的想法，但不需要投票。您在完成处理程序中引用的事实`self`意味着`self`在完成处理程序运行之前无法解除分配。你是否读过书实际上并不重要`animating`。ARC 必须让你一直待在完成块运行之前，因为该块引用了你。

另一种类似的技术是使用`objc_setAssociatedObject`. 这将保留您，直到完成块运行。在完成块中，`self`作为关联对象删除，然后您就可以自由地解除分配。这种方法的好处是它不需要像`animating`.

当然，有时合适的最后的、绝望的措施是创造短暂的自我参照。例如：

```
- (void)setImmortal:(BOOL)imortal {
  if (immortal) {
    _immortalReference = self;
  }
  else {
    _immortalReference = nil;
  }
} 
```

我不提倡最后一种选择。但很高兴知道它存在，更重要的是知道它为什么起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T19:30:49.207

首先，如果你的一些动画无限期地运行——或者很长时间——你将不得不有办法阻止它们。

但是对于视图上的隐式动画之类的东西，您可以简单地使用完成方法。

```
 self.animating=YES;
  [NSAnimationContext runAnimationGroup:^(NSAnimationContext *context){
    [[v animator] setAlphaValue: 1];
} completionHandler:^{
    self.animating=NO;
}]; 
```

现在，您只需要轮询您的动画是否正在运行，如果它没有运行，则继续关闭您的窗口。

进行轮询的一种好方法是设置一个具有固定延迟的计时器。如果动画仍在运行，只需重置计时器并等待另一个间隔。

或者，您可以从完成处理程序发送通知。

# c++ - 级联和信号/插槽

> ID：14925067
> 
> 赞同：6
> 
> 时间：2013-02-17T19:21:47.990
> 
> 标签：c++, signals, qml, blackberry-cascades, slots

我在这个圈子里跑来跑去。只是无法将我的头绕在信号和插槽上。

只是寻找一些可以在我的 C++ 中出现信号时自动更新我的 UI 的机制。

例子：

我在 Qml 中有两个带有文本的标签： _app.method 返回一个值。

我有一个 onClicked 运行 Q_INVOKABLE 方法的按钮。该方法在完成时会发出一个信号，例如，获取地理坐标并更新上述文本：分配所依赖的值。

我想要的是更新文本：一旦这些值发生变化，分配。

我只需要清楚地解释这些信号/插槽。文档中唯一的示例似乎只假设 QML 或 C++，但不是两者的混合。示例代码有示例，但未在文档中具体说明。

如果你有简单的描述，我相信我可以适应它。例如，1：在 QML 中定义，2：在 hpp 文件中定义，3：在 cpp 文件中定义。

我试过使用 QObject 的 setPropery("text","value") 但是我的应用程序在尝试这个时崩溃了。

告诉我如果我错了...

1) 在 QML 中：

```
Button { 
    id: aButton 
    text: _app.value 
    onClicked: {
        _app.valueChanged.connect(aButton.onValueChanged); 
        _app.value = _app.value + 1;
    } 
    function onValueChanged (val) {
        aButton.text = "New value: " + val;
    }
} 
```

2) 在 HPP 中：

```
 Q_PROPERTY(int value READ value WRITE setValue NOTIFY valueChanged)
public:
    int value();
    void setValue(int i);
signals:
    void valueChanged(int);
private:
    int m_iValue; 
```

3) 在 CPP 中：

```
int class::value()
{
    return m_iValue;
}

void class::setValue(int i)
{
// name is same as HPP WRITE Q_PROPERTY statement
    m_iValue = i;
    emit valueChanged(m_iValue);
} 
```

所以，发生的事情是，在 QML 中，onClick 方法将信号与 QML 函数连接起来；这意味着，现在我们正在监听值的变化，当它发生时，该函数将被调用。然后，我们更改值...由于 Q_PROPERTY 将写入值设置为名为 setValue 的函数，因此使用新值调用 setValue；在内部，m_iValue 发生了变化，并且发生了一个发射，它告诉正在收听 valueChanged 的​​人有一个新值。

嘿，我的 QML 正在听那个！（通过 _app.valueChanged.connect 脚本）。因此，正在监听的 QML 对象（按钮）调用了 onValueChanged 函数，并带有新值（因为发出 valueChanged(m_iValue)。

请告诉我我已经想通了？？！？！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T06:01:08.477

如果您使用的是 Q_PROPERTY 宏，则无需将 onValueChanged 信号与明确的函数绑定来更改按钮的文本。而且你不需要用 m_iValue 发出 valueChanged 信号。在相应文件中进行以下提到的更改

QML：

```
Button {
    horizontalAlignment: HorizontalAlignment.Center
    verticalAlignment: VerticalAlignment.Center
    id: aButton
    text: _app.value
    onClicked: {
        _app.value = _app.value + 1
    }
} 
```

高压钠灯：

```
signals:
    void valueChanged(); 
```

共产党：

> 发出 valueChanged();

# java - Tomcat：如何找出正在运行的 Tomcat 版本？

> ID：14925073
> 
> 赞同：207
> 
> 时间：2013-02-17T19:22:20.593
> 
> 标签：java, tomcat, appfuse

我正在尝试让 Appfuse + Tomcat + jRebel 工作。

Appfuse 默认使用 Cargo 下载 tomcat（版本 7.0.33）并将应用程序部署到它。我希望使用已安装的 tomcat（版本 7.0.27）而不是下载的。[我在appfuse FAQ](http://appfuse.org/display/APF/FAQ#FAQ-useexistingtomcat)之后进行了更改。

用 部署后`mvn cargo:run`，怎么知道实际运行的tomcat确实是7.0.27？

我曾经输入错误的 URL（例如*localhost:8080/dfsfsdf*）以在错误页面中看到它，但现在它什么也没显示。

我的`$CATALINA_HOME`观点是我自己的tomcat 7.0.27。抱歉忘了提，它适用于 Windows。

更新：

由于这个问题已经变得流行起来，我想解释一下为什么这个被接受的答案。很简单，这是第一个解决了我的问题。

我在看问题的标题， [@Tech Junkie](https://stackoverflow.com/a/21773359/247869)和[@CPU 100](https://stackoverflow.com/a/14925114/247869)确实有最好的答案，但不是针对我遇到的场景。（我想知道是`mvn cargo:run`运行我安装的tomcat还是“嵌入项目”的tomcat） `:)`

* * *

## 回答 #1

> 赞同：593
> 
> 时间：2014-02-14T07:35:35.050

虽然这不是最近的，但我想，我的回答仍然可以帮助其他人：

```
cd tomcat/lib 
java -cp catalina.jar org.apache.catalina.util.ServerInfo 
```

就是这样。

```
Server version: Apache Tomcat/7.0.30
Server built:   May 23 2013 02:54:10
Server number:  7.0.30.0
OS Name:        Linux
OS Version:     3.13.0-36-generic
Architecture:   amd64
JVM Version:    1.7.0_65-b32
JVM Vendor:     Oracle Corporation 
```

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2013-02-17T19:27:09.117

1.  尝试解析或执行 Tomcat_home/bin 目录并根据您的操作系统查找名为**version.sh**或**version.bat的脚本。**
2.  执行脚本`./version.sh`或`version.bat`

如果没有 version.bat 或 version.sh，则使用工具解压缩 JAR 文件 (\tomcat\server\lib\catalina.jar) 并查看文件 org\apache\catalina\util\lib\ServerInfo.properties。在“server.info=”下定义的版本。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2014-04-14T12:42:40.023

`tomcat/bin`在您的目录中执行脚本：

```
sh tomcat/bin/version.sh

Server version: Apache Tomcat/7.0.42
Server built:   Jul 2 2013 08:57:41
Server number:  7.0.42.0
OS Name:        Linux
OS Version:     2.6.32-042stab084.26
Architecture:   amd64
JVM Version:    1.7.0_21-b11
JVM Vendor:     Oracle Corporation 
```

* * *

## 回答 #4

> 赞同：52
> 
> 时间：2013-02-18T14:42:47.300

如果您可以上传 JSP 文件，您可以打印出一些信息，如本例所示：[bestdesigns.co.in/blog/check-jsp-tomcat-version](http://www.bestdesigns.co.in/blog/check-jsp-tomcat-version)

将此代码保存到名为 tomcat_version.jsp 的文件中：

```
 Tomcat Version : <%= application.getServerInfo() %><br>    
    Servlet Specification Version : 
<%= application.getMajorVersion() %>.<%= application.getMinorVersion() %> <br>    
    JSP version :
<%=JspFactory.getDefaultFactory().getEngineInfo().getSpecificationVersion() %><br> 
```

当您访问[http://example.com/tomcat_version.jsp](http://example.com/tomcat_version.jsp)时，输出应类似于：

```
Tomcat Version : Apache Tomcat/5.5.25
Servlet Specification Version : 2.4
JSP version: 2.0 
```

* * *

## 回答 #5

> 赞同：43
> 
> 时间：2013-09-05T23:32:35.773

您可以简单地`http://localhost:8080/`在您的网络浏览器中打开，这将打开显示正在运行的 Tomcat 版本的 Tomcat 欢迎页面，如下所示：

```
Apache Tomcat/7.0.42 
```

*   我假设您的 Tomcat 在端口 8080 上运行

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2016-02-19T12:56:21.650

## 使用发行说明

在 Tomcat 主文件夹中，您可以找到**RELEASE-NOTES**文件，其中包含以下几行（~第 20-21 行）：

> ```
>  Apache Tomcat Version 8.0.22
>                         Release Notes 
> ```

或者您可以使用**命令行**获得相同的信息：

*   **窗户**：

    ```
    type RELEASE-NOTES | find "Apache Tomcat Version" 
    ```

    输出：

    ```
     Apache Tomcat Version 8.0.22 
    ```

*   **Linux**：

    ```
    cat RELEASE-NOTES | grep "Apache Tomcat Version" 
    ```

    输出：

    ```
     Apache Tomcat Version 8.0.22 
    ```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2016-02-19T13:06:21.373

```
For windows machine 
Go to the tomcat directory C:\apache-tomcat-x.0.xx\bin
    bin>version.bat
    Using CATALINA_BASE:   "C:\apache-tomcat-x.0.xx"
    Using CATALINA_HOME:   "C:\apache-tomcat-x.0.xx"
    Using CATALINA_TMPDIR: "C:\apache-tomcat-x.0.xx\temp"
    Using JRE_HOME:        "C:\Program Files\Java\jdk1.8.0_65"
    Using CLASSPATH:       "C:\apache-tomcat-x.0.xx\bin\bootstrap.jar;C:\apache-tomcat-x.0.xx\bin\tomcat-juli.jar"
    Server version: Apache Tomcat/7.0.53

For Linux Machine 
Go to the tomcat directory /usr/mack/apache-tomcat-x.0.xx/bin
    # ./version.sh
    Using CATALINA_BASE:   /usr/mack/apache-tomcat-x.0.xx
    Using CATALINA_HOME:   /usr/mack/apache-tomcat-x.0.xx
    Using CATALINA_TMPDIR: /usr/mack/apache-tomcat-x.0.xx/temp
    Using JRE_HOME:        /usr/java/jdk1.7.0_71/jre
    Using CLASSPATH:       /usr/mack/apache-tomcat-x.0.xx/bin/bootstrap.jar:/usr/mack/apache-tomcat-x.0.xx/bin/tomcat-juli.jar
    Server version: Apache Tomcat/7.0.56 
```

如果 Tomcat 作为服务安装：

```
#sudo /etc/init.d/tomcat version 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2017-05-25T13:39:38.767

当前运行的Tomcat版本

如果您设置环境变量 - %CATALINA_HOME%，则 Windows ：

```
>> cd %CATALINA_HOME%\bin
>> version 
```

或者，

```
java.exe -cp lib\catalina.jar org.apache.catalina.util.ServerInfo 
```

* * *

MY SETTING --- 希望您的设置类似于以下

```
%CATALINA_HOME% --- C:\Program Files\Tomcat\apache-tomcat-8.0.28 
```

输出

服务器版本：Apache Tomcat/8.0.28 服务器构建：2015 年 10 月 7 日 18:25:21 UTC 服务器编号：8.0.28.0 操作系统名称：Windows 7 操作系统版本：6.1 架构：amd64 JVM 版本：1.8.0_111-b14 JVM 供应商：甲骨文公司

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2019-05-13T13:52:52.620

这个命令几乎可以检查所有内容：

```
java -cp tomcat/lib/catalina.jar org.apache.catalina.util.ServerInfo 
```

或者

```
tomcat/bin/catalina.sh version 
```

输出看起来像这样

```
Server version: Apache Tomcat/8.5.24
Server built:   Nov 27 2017 13:05:30 UTC
Server number:  8.5.24.0
OS Name:        Linux
OS Version:     4.4.0-137-generic
Architecture:   amd64
JVM Version:    1.8.0_131-b11
JVM Vendor:     Oracle Corporation 
```

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2015-11-24T11:40:05.157

要找出 Tomcat 的版本，请找到这个文件——对于 *nix 的 version.sh 或对于 Windows 的 version.bat。此 version.sh 文件通常位于 Tomcat bin 文件夹中。

```
phpmongodb@kumar:/usr/share/tomcat7/bin$ ./version.sh 
```

**笔记**

如果您不确定 version.sh 文件在哪里，请尝试以下命令：

```
sudo find / -name "version.sh" 
```

了解有关 Tomcat7 的所有信息。

```
sudo find / -name "tomcat7" 
```

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2020-09-09T13:48:03.553

在 Ubuntu 18.04 Linux 服务器上工作时，我遇到了这个挑战。

**这是我修复它的方法**：

运行以下命令以确定`version.sh`文件的位置：

```
sudo find / -name "version.sh" 
```

对我来说，输出是：

```
/opt/tomcat/bin/version.sh 
```

然后，使用输出，将文件 ( `version.sh`) 作为 shell 脚本 ( `sh`) 运行：

```
sh /opt/tomcat/bin/version.sh 
```

就这样。

**我希望这有帮助**

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2015-05-27T22:34:53.617

运行以下

```
/usr/local/tomcat/bin/catalina.sh version 
```

它的响应将类似于：

```
Using CATALINA_BASE:   /usr/local/tomcat
Using CATALINA_HOME:   /usr/local/tomcat
Using CATALINA_TMPDIR: /var/tmp/
Using JRE_HOME:        /usr
Using CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar
Using CATALINA_PID:    /var/catalina.pid
Server version: Apache Tomcat/7.0.30
Server built:   Sep 27 2012 05:13:37
Server number:  7.0.30.0
OS Name:        Linux
OS Version:     2.6.32-504.3.3.el6.x86_64
Architecture:   amd64
JVM Version:    1.7.0_60-b19
JVM Vendor:     Oracle Corporation 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2017-06-19T22:26:59.503

我知道这可能为时已晚，但这可能很有用：如果您尝试从 Java 代码中了解 Apache Tomcat 服务器版本，您可以使用：

来自 HttpServlet：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    getServletContext().getServerInfo()
} 
```

来自 ServletContextListener：

```
public void contextInitialized(ServletContextEvent event)  { 
    event.getServletContext().getServerInfo();      
} 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2018-07-11T05:31:43.707

另一种选择是从 tomcat 查看发行说明，适用于 linux/window

```
{Tomcat_home}/webapps/ROOT/RELEASE-NOTES.txt 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2015-04-15T18:20:53.530

如果 Tomcat 作为服务安装，请尝试：

```
sudo /etc/init.d/tomcat version 
```

将“tomcat”替换为服务的实际名称。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2019-06-13T11:00:36.323

在Linux中查看tomcat版本

```
cd /opt/tomcat/bin

./catalina.sh version 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2016-04-27T05:22:51.157

输入`404.jsp`或`non-existent.jsp`。

在页面底部获取 Tomcat/JBoss 版本号。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-12-18T17:35:32.950

打开你的tomcat主页（通常`localhost:8080`）

你会看到这样的东西：

[![在此处输入图像描述](../Images/59f90da88beeaac62854a84a6ad0c44c.png)](https://i.stack.imgur.com/vrzpO.png)

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-08-15T17:08:37.187

对于检查 Tomcat 服务运行版本的 Windows PowerShell 命令行方法：

```
(get-service Tomcat*).DisplayName 
```

样本输出...

```
Apache Tomcat 8.5 Tomcat8 
```

如果还想了解其他详细信息，包括服务运行所在的文件夹的位置：

```
Get-WmiObject win32_service | Where-Object {$_.Name -like 'Tomcat*'} | select Name, DisplayName, State, PathName 
```

样本输出...

```
Name    DisplayName               State   PathName
----    -----------               -----   --------
Tomcat8 Apache Tomcat 8.5 Tomcat8 Running "C:\Program Files\Apache Software Foundation\Tomcat 8.5\bin\Tomcat8.exe" /... 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2014-02-16T14:28:44.763

您可以通过其状态页面找到服务器信息：

```
{running-tomcat-url}/manager/status 
```

在该页面上，您可以看到运行 Tomcat 的 Java 版本

注意：我还在[Tomcat6 和 JRE7 兼容性问题上粘贴了这个答案。不支持的 major.minor 版本 51.0](https://stackoverflow.com/questions/17478093/tomcat6-and-jre7-compatibility-issue-unsupported-major-minor-version-51-0/21812446#21812446)

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2015-06-09T12:12:44.807

在 Unix 服务器的终端上运行

```
w3m http://localhost:8080/ 
```

退出按 q 和下一个 y

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-06-30T05:53:04.337

为了保护 Tomcat 免受黑客攻击，建议我们尝试几个步骤来隐藏 Tomcat 版本信息。OWASP 项目建议了几个步骤。[https://www.owasp.org/index.php/Securing_tomcat](https://www.owasp.org/index.php/Securing_tomcat)。如果一个 tomcat 安装因此受到保护，那么上述答案中只有 1 个会显示 tomcat 的版本。
即通过清楚地宣布版本号的$TOMCAT_HOME\RELEASE-NOTES 文件。

我有一个这样的受保护服务器，只有 RELEASE-NOTES 文件显示了 tomcat 的版本。所有其他技术都未能揭示版本信息。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2017-10-31T14:19:36.887

我们在 Windows 环境中运行，我必须想办法在 Java 环境之外获取 Tomcat 版本。在不知道版本的情况下，我无法确定目录。我终于发现最好的方法是使用以下方法查询 Tomcat 服务：

> C:\temp>sc 查询 | 查找 /I "tomcat"
> SERVICE_NAME: Tomcat6
> DISPLAY_NAME: Apache Tomcat 6.0 Tomcat6

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2021-02-18T11:22:56.103

在 Windows 上只需 cmd

C:\Program Files (x86)\Extensis\Portfolio Server\applications\tomcat\bin>版本

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2022-02-04T02:08:14.677

检查你的tomcat日志目录。

```
goto  /var/log/tomcat8/ 
```

查看文件：catalina.out 它将显示下面的 tomcat 版本：

> 服务器版本名称：Apache Tomcat/8.5.72 04-Feb-2022 04:00:58.537 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log 服务器构建：2021 年 10 月 28 日 00:54:01 UTC 04-Feb -2022 04:00:58.537 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log 服务器版本号：8.5.72.0 04-Feb-2022 04:00:58.537 INFO [main] org.apache.catalina.startup .VersionLoggerListener.log 操作系统名称：Linux 04-Feb-2022 04:00:58.537 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log 架构：amd64 04-Feb-2022 04:00:58.537 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM 版本：1.8.0_312-b07

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2013-02-17T19:58:31.900

Windows 任务管理器 > 进程 > 查找 tomcat > 右键单击​​ > 打开文件位置 > 如果您运行 Tomcat7w.exe，它在描述中可见。

如果不在 Windows Vista/7 上，Tomcat 应该运行以在进程中可见，请转到任务管理器 > 选项卡（服务）找到 tomcat 启动它然后进程。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2018-10-16T13:21:13.643

在类 Unix 环境中，我还建议检查实际运行的进程命令行：

```
$ ps aux | grep java

...
/usr/lib/jvm/java-8-openjdk-amd64/bin/java -Djava.util.logging.config.file=/srv/tomcat-instances/bla/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.awt.headless=true -Xmx4096M -XX:+UseConcMarkSweepGC -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -agentlib:jdwp=transport=dt_socket,address=8000,server=y,suspend=n -Xmx4096m -Xms4096m -XX:MaxPermSize=2048m -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.port=8090 -Dcom.sun.management.jmxremote.rmi.port=8090 -Djava.rmi.server.hostname=localhost -Djava.endorsed.dirs=/opt/apache-tomcat-8.0.47/endorsed -classpath /opt/apache-tomcat-8.0.47/bin/bootstrap.jar:/opt/apache-tomcat-8.0.47/bin/tomcat-juli.jar -Dcatalina.base=/srv/tomcat-instances/bla -Dcatalina.home=/opt/apache-tomcat-8.0.47 -Djava.io.tmpdir=/tmp/tomcat8-bla-tmp org.apache.catalina.startup.Bootstrap start
... 
```

由于（操作系统）环境变量和（Java）系统属性被设置为意外值，人们可能会在微妙的奇怪行为上运行。我有一种情况，由于过时的 Tomcat `setenv.sh`，一个 Tomcat 8 从类路径上的一个 Tomcat 7 的类开始。确保在进程中的命令行选项如`-Dcatalina.base`,`-Dcatalina.home`和`-classpath`有意义。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-03-07T06:00:15.290

只需启动 tomcat 并在其中搜索“**服务器版本名称**” `catalina.logs`，您将获得 tomcat 的版本。例如：

> “2019 年 3 月 7 日上午 11:25:40 org.apache.catalina.startup.VersionLoggerListener 日志信息：服务器版本名称：Apache Tomcat/ **9.0.16** ”

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-06-14T03:07:33.433

要单独了解确切的 tomcat 版本，只需访问`vi tomcat/BUILDING.txt`

# ruby - 具有许多数组的哈希

> ID：14925076
> 
> 赞同：2
> 
> 时间：2013-02-17T19:22:37.927
> 
> 标签：ruby, arrays

我正在尝试定义一种可以创建一对多关系的结构。例如，假设一个名为“ACO”的组织有一些东西：

```
KEY_PERF_INDS = [ {'ACO' => [2,3,4] , [2,34,5]} ] 
```

但这在语法上是错误的。是否有可能写出实现这一目标的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:35:56.603

如果您的其他组`HOSPITAL, BLAH, ETC`（根据评论）都与 处于同一级别`ACO`，那么整个结构`KEY_PERF_INDS`应该是一个哈希`{}`而不是一个数组`[]`。将它们中的每一个都设为主哈希的键，并且每个都是包含子数组的数组。

```
# The main structure is a hash {}
KEY_PERF_INDS = { 
  'ACO' => [
    [1,2,3],
    [4,5,6]
  ], 
   'HOSPITAL' => [
    [3,2,1],
    [9,8,7]
  ],
  'BLAH' => [
    [99,88], 
    [11,22],
    [33,44]
  ]
} 
```

然后访问这些：

```
KEY_PERF_INDS['HOSPITAL'][1][2]
# prints 7

KEY_PERF_INDS['BLAH'].last.first
# prints 33 
```

# batch-file - 将一个文件夹中的文件复制到另一个文件夹但只复制指定的文件，*.rar

> ID：14925087
> 
> 赞同：-1
> 
> 时间：2013-02-17T19:24:14.537
> 
> 标签：batch-file, copy, paste

我需要与 move 函数工作方式相同的代码：

```
move "rar\*.rar" %rarfolder" 
```

该文件夹`rar`不仅包含 *.rar 文件，而且我不想移动文件，我想复制文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:45:51.217

假设您有`set rarfolder=_YourDestinationFolder_`，请尝试：

```
 robocopy rar %rarfolder% *.rar 
```

我更喜欢使用[Robocopy](http://en.wikipedia.org/wiki/Robocopy)，因为它允许您执行比普通复制/移动命令更多的操作。

# python - Django 模型中的默认过滤器

> ID：14925090
> 
> 赞同：18
> 
> 时间：2013-02-17T19:24:35.520
> 
> 标签：python, django, model

是否可以在 Django 模型中设置默认过滤器？

就像是：

```
class MyModel(models.Model):
    timestamp = models.DateTimeField(default=datetime.utcnow)
    active = models.BooleanField(default=True)

    class Meta:
        ordering = ['-timestamp']
        filtering = [active=True] 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-17T19:30:34.590

您必须覆盖[经理](https://docs.djangoproject.com/en/dev/topics/db/managers/)：

```
class MyModelManager(models.Manager):
    def get_queryset(self):
        return super(MyModelManager, self).get_queryset().filter(active=True)

class MyModel(models.Model):
    timestamp = models.DateTimeField(default=datetime.utcnow)
    active = models.BooleanField(default=True)

    objects = MyModelManager()

    class Meta:
        ordering = ['-timestamp'] 
```

*`get_queryset`在`get_query_set`Django 1.6 之前*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-05T15:56:05.713

通过将经理添加到模型中，我能够完成我想要的。我还创建了一个抽象基类，以便更轻松地将其添加到其他模型而无需复制相同的代码 - 这是修改后的示例：

```
class MyActiveManager(models.Manager):
    def get_queryset(self):
        return super(MyModelManager, self).get_queryset().filter(active=True)

class MyInactiveManager(models.Manager):
    def get_queryset(self):
        return super(MyModelManager, self).get_queryset().filter(active=False)

class AbstractModel(models.Model):
    timestamp = models.DateTimeField(default=datetime.utcnow)
    active = models.BooleanField(default=True)

    objects = MyActiveManager()
    objects_inactive = MyInactiveManager()
    objects_all = models.Manager()

    class Meta:
        abstract = True
        ordering = ['-timestamp']

class MyModel(AbstractModel):
    # Define active-enabled model here 
```

现在，我想拥有“活动”（在本例中为“时间戳”）字段的任何模型都可以从基本模型继承。当我使用 MyModel.objects.all() - 我得到所有具有 active=True 的对象 - 如果我已经有很多使用对象管理器的代码，这将特别有用。如果我只想要非活动结果，我使用 MyModel.objects_inactive.all()，如果我想要所有记录而不考虑 active 的值，我使用 MyModel.objects_all.all()

# c# - 如何使用复选框列表向 SQL 选择查询添加多个参数？

> ID：14925091
> 
> 赞同：0
> 
> 时间：2013-02-17T19:24:37.750
> 
> 标签：c#, asp.net, sql-server, checkboxlist

我希望使用带有复选框列表作为控制参数的查询从数据库中检索数据行。问题是复选框列表上的多个选定值仅返回一个值，如此处所示...

[插图](https://docs.google.com/file/d/0B2RTzYL2BUHvSTJxbzR1bF9NS0k/edit)

```
<asp:CheckBoxList ID="CheckBoxList1" runat="server" RepeatDirection="Horizontal" DataSourceID="SqlDataSource1" DataTextField="Fruit" DataValueField="Fruit" ></asp:CheckBoxList>
<asp:SqlDataSource runat="server" ID="SqlDataSource1" ConnectionString='<%$ ConnectionStrings:f-StopConnectionString %>' SelectCommand="SELECT [Fruit] FROM [Table_1]"></asp:SqlDataSource>

<br />

<asp:Button ID="Button1" runat="server" Text="Select" OnClick="Button1_Click" />

<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource4">
    <Columns>
        <asp:BoundField DataField="ID" HeaderText="ID" SortExpression="ID"></asp:BoundField>
        <asp:BoundField DataField="Fruit" HeaderText="Fruit" SortExpression="Fruit"></asp:BoundField>
    </Columns>
</asp:GridView>

<asp:SqlDataSource runat="server" ID="SqlDataSource4" ConnectionString='<%$ ConnectionStrings:f-StopConnectionString %>' 
    SelectCommand="SELECT * FROM [Table_1] WHERE ([Fruit] LIKE '%' + @Fruit + '%')">
    <SelectParameters>
        <asp:ControlParameter ControlID="CheckBoxList1" PropertyName="SelectedValue" Name="Fruit" Type="String"></asp:ControlParameter>
    </SelectParameters>
</asp:SqlDataSource> 
```

有没有办法传递多个选择，以便查询读取：

```
(WHERE [Fruit] LIKE '%'Apples'%') OR (WHERE [Fruit] LIKE '%'Oranges'%') 
```

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:00:51.643

据我了解，由于您没有提供任何代码，因此您想使用 linq（或实体框架）来查询数据库。

然后，您需要根据用户选择构建 lambda 表达式并将其传递给您的查询。

请参阅此处的 Lambda 表达式树开始： http: [//www.codeproject.com/Articles/17575/Lambda-Expressions-and-Expression-Trees-An-Introdu](http://www.codeproject.com/Articles/17575/Lambda-Expressions-and-Expression-Trees-An-Introdu)

这也有帮助： [我可以在实体框架的 Where 方法中使用自定义委托方法吗？](https://stackoverflow.com/questions/3784005/can-i-use-custom-delegate-method-in-where-method-of-entity-framework)

如果您只想传递 sql select 命令字符串，那么您应该根据用户选择构建自定义 where 子句。

# django - 如何正确处理 KeyErrors

> ID：14925094
> 
> 赞同：0
> 
> 时间：2013-02-17T19:24:46.877
> 
> 标签：django

作为 Django 的新手，我仍在学习技巧，我的问题不是直接与语法有关，而是最好的方法。

当 url 中没有传递任何值时，你将如何处理类似下面的事情。我得到一个错误。

```
 cat_id = self.request.GET.get('cat_id', '')
        return Product.objects.filter(category=cat_id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:34:28.487

```
from django.shortcuts import get_object_or_404

cat_id = self.request.GET.get('cat_id', '')

# 404 if the category deosn't exist
category = get_object_or_404(Category, pk=cat_id)

# filter for products based on a known existing category
products = Product.objects.filter(category=category) 
```

在其他情况下，我可能会做这样的事情

```
if 'cat_id' in self.request.GET:
    cat_id = self.request.GET.get('cat_id')
    # now do stuff with cat_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:34:06.100

使用 0 作为默认值而不是空字符串。

# asp.net-mvc - MVC4 中 Create() 方法的奇怪行为 - 新对象设置为 ID = 0，另存为其他内容

> ID：14925096
> 
> 赞同：2
> 
> 时间：2013-02-17T19:24:49.417
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

我正在为两种情况调试此方法：一种是有父级，另一种是没有父级。

如果没有父级，则新 Person 的 id 为 0，但实际上从未保存到数据库中。

如果有父级，则在此方法中，新 Person 的 id 为 0，但会以正确的值（比表中的最高值多一个）将新记录插入到 db 中。

这里发生了什么？我知道我做错了什么，我只是不确定是什么。

我正在使用 EF Codefirst。

控制器方法的代码：

```
[HttpPost]
public ActionResult Create(CreatePersonViewModel viewModel)
{
    if (ModelState.IsValid)
    {

        var parent = _db.Persons.FirstOrDefault(s => s.PersonId == viewModel.ParentId);

        var person = new Person() { Name = viewModel.Name };

        // if it has a parent, build new relationship
        if (parent != null)
        {
            person.Parent = parent;
            parent.Children.Add(person);
        };

        _db.Save();

        return RedirectToAction("detail", "person", new { personId = person.PersonId });
    }
    return View(viewModel);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:26:15.967

您所指的事实是您对象的自动递增 ID。它由您的 ORM 控制。你可能想检查这个[问题](https://stackoverflow.com/questions/3188194/c-entity-framework-auto-increment-problem)

您可能想从[msdn检查此链接](http://msdn.microsoft.com/en-us/library/bb896255.aspx)

> 备注 Refresh 具有双重目的，即允许使用来自数据源的数据刷新对象，并且是解决冲突的机制。有关更多信息，请参阅保存更改和管理并发（实体框架）。刷新对象的顺序是不确定的。调用 Refresh 方法后，对象的原始值将始终使用数据源值更新，但当前值可能会或可能不会使用数据源值更新。这取决于 RefreshMode。StoreWins 模式意味着应该更新对象以匹配数据源值。ClientWins 值意味着只有对象上下文中的更改将被持久化，即使数据源中有其他更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:43:17.820

> 如果没有父级，则新 Person 的 id 为 0，但实际上从未保存到数据库中。

那是因为您从不告诉 EF 它应该保留实体。你只创建一个`new Person()`，就是这样。

你应该做：

```
dbContext.AddToPersons(person); 
```

打电话之前`dbContext.SaveChanges()`。

在有父对象的情况下，`person`由于与 的关系而被保存`parent`。

### 更新

我突然想到：如果您先编写代码，您可能没有`AddToPersons(...)`在数据上下文中可用的方法。如果是这样，您可以`dbContext.Persons.AddObject(person)`改用。

# assembly - 负跳转操作码

> ID：14925104
> 
> 赞同：3
> 
> 时间：2013-02-17T19:25:49.573
> 
> 标签：assembly, x86, opcode, shellcode

我正在尝试创建一些需要跳回的shellcode（负跳转）。我想跳回 2400 字节。这是我使用的操作码：

```
\x90\xE9\x98\xef 
```

这首先是a `nop`，然后是接近跳跃到-4200。0xef98 = -4200（至少我认为是这样）。但是在调试器中它看起来像这样：

```
0:142> t
eax=00000000 ebx=7c9032a8 ecx=02a8eb70 edx=7c9032bc esi=00000000 edi=00000000
eip=02a8ffac esp=02a8ea94 ebp=02a8eaa8 iopl=0         nv up ei pl zr na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000246
02a8ffac 90              nop
0:142> t
eax=00000000 ebx=7c9032a8 ecx=02a8eb70 edx=7c9032bc esi=00000000 edi=00000000
eip=02a8ffad esp=02a8ea94 ebp=02a8eaa8 iopl=0         nv up ei pl zr na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000246
02a8ffad e998efcccc      jmp     cf75ef4a 
```

正如预期的那样，首先是 nop，然后是 jmp，但跳转到的地址不是我所期望的（就像`jmp 02A8EF45`我所想的那样）。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T19:43:54.797

`e9`意味着`jmp rel32`你需要一个**双字**操作数，两个字节是不够的：

```
jmp $-4200    ; e9 93 ef ff ff 
```

当您尝试这些事情时，使用汇编程序通常更容易：

```
$ cat shellcode.asm
bits 32
jmp $-4200
$ nasm -o shellcode shellcode.asm
$ hexdump -C shellcode
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T19:42:24.000

在我看来，好像您正在编写一个 32 位偏移量的跳转代码。查看生成的代码字节（示例的最后一行）：

```
02a8ffad e998efcccc      jmp     cf75ef4a 
```

处理器将使用该值`0xccccef98`作为跳转偏移量。如果你想要一个 16 位的偏移量，你必须明确地指定它。或者（已经有一段时间了），您必须提供一个 32 位操作数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-13T20:10:33.690

努力制作一个新的 ASM 编译器和 66 前缀似乎对我不起作用。

[66 E9 XX XX] 总是导致 GPF。

看来您不能将 66 用于 JXX（JMP、JNE、JBE 等）

查看推送：

```
6A 12          = PUSH 12    (IM8 as a 32bits)
68 34 12 00 00 = PUSH 1234  (32 bits)

66 6A 00       = PUSH 0     (IM8 as a 16 Bits)
66 68 34 12    = PUSH 1234  (16 bits) 
```

您注意到也没有 OPCode 将 16 位立即推送为 32 位 =D

我现在的猜测是 Martin 一开始是对的，你不能使用它，因为它会将 CPU 与 REAL MODE 混淆。

# c++ - 构造函数主体前的冒号是否表示继承

> ID：14925111
> 
> 赞同：0
> 
> 时间：2013-02-17T19:26:49.493
> 
> 标签：c++, inheritance, struct

我想了解下面的代码是如何运行的。代理是从 mPtr 继承的吗？struct array 是否在 struct aproxy 中返回方法 aproxy？

```
struct aproxy {
    aproxy( int & r ) : mPtr( & r ) {}  // is this inheritance? 
    void operator = ( int n ) {
        if ( n > 1 ) {
            throw "not binary digit";
        }
        *mPtr = n;
    }
    int * mPtr;
};

struct array {      
    int mArray[10];
    aproxy operator[]( int i) {      
        return aproxy( mArray[i] );   // what does this line do?
    }
};

int main() {
    try {
        array a;
        a[0] = 1;   
        a[0] = 42;      
    }
    catch( const char * e ) {
        cout << e << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:28:27.647

> 这是继承吗？

```
aproxy( int & r ) : mPtr( & r ) {} 
```

这不是继承，它是`mPtr`构造函数初始化列表中数据成员的初始化。`int`您正在初始化一个指向`int`.

```
return aproxy( mArray[i] );   // what does this line do? 
```

它创建一个`aproxy`实例，用 的值初始化`mArray[i]`，并按值返回它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T19:31:28.863

不，这里没有继承。而且您不能“返回方法”；“方法”是“成员函数”的俗称。

# android - Boost text_oarchive 构造函数在 Android 上崩溃，而不是 Windows

> ID：14925118
> 
> 赞同：2
> 
> 时间：2013-02-17T19:27:32.723
> 
> 标签：android, boost, file-io, storage

我正在尝试将游戏移植到 Android，并且我一直在使用 boost 来进行保存/加载行为。现在调用保存代码时应用程序崩溃。尝试制作 text_oarchives 时发生崩溃，如以下示例代码所示：

```
void OHRMapArchiver::saveMap()
{
// copy some boost-incompatible data structures into ivar vectors
mapInstance->preSave();

CCLog("preSave");
std::ofstream outStream(MAP_SAVE_FILE);

CCLog("creating archive");
boost::archive::text_oarchive outputArchive(outStream);

CCLog("Outputting archive");
outputArchive << mapInstance;

// destroy all that stuff copied during pre-save
mapInstance->tileLoader.erase(mapInstance->tileLoader.begin(), mapInstance->tileLoader.end()); 
```

}

我当然可以使用一些建议来说明为什么情况并非如此。我已经放弃了能够在设备上进行调试，但是我得到的具体错误是什么时候

```
boost::archive::text_oarchive outputArchive(outStream); 
```

被称为“致命信号 11 (SIGSEGV) at 0xdead (code=1), thread 1969 (Thread-112)”。所以段错误，但我无法想象为什么，据我所知，它只是在 ostream 周围创建一个包装器。

其他有用的线索...嗯，我知道我可以创建实现序列化的对象（Archive &ar, int version），尽管我不能确定任何对象已经成功调用它。可能的联动问题？

此外，还为 App 启用了文件访问权限。至少，“uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" 已添加到清单中，我可以使用 std::ostream.write 制作和输出文件而不会崩溃。此外，正如标题所暗示的，win32 版本完美运行，按预期输出数据并在没有崩溃的情况下回读。

在使用 Jelly Bean 的设备上使用 crystaX ndk r7。

关于为什么这会在 Android 上崩溃的任何想法？

编辑：对此进行更新。根据 Boost 爱好者的说法，我认为 Boost 与最新的 Android NDK 官方版本不兼容的假设是错误的。如果正确定义了用户配置文件，boost 应该可以针对最新版本进行编译。

相反，我听到的隆隆声提高 iostreams 经常与 Kit 崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:03:15.123

这真的不是答案。我没有找到/找不到其中之一。我只能建议您不要尝试做我正在做的事情。至少，不是 android NDK r8d。

在研究了正确配置 Boost 以在没有 wchar 支持的情况下构建的方法之后，NDK 有点半信半疑，在 windows 上工作的代码在 boost 中的序列化/存档库中的某处崩溃。我不知道在哪里。

所以是的，答案是“放弃，最好在浪费四个月的跟踪解决方案之前放弃”。

# com - 使用 IPersistStream::Load 从 .GRF 文件加载 IFilterGraph 无法实例化使用 CoRegisterClassObject 注册的私有进程内过滤器

> ID：14925119
> 
> 赞同：2
> 
> 时间：2013-02-17T19:27:38.027
> 
> 标签：com, directshow

从应用程序中的 GRF 文件加载 Directshow IFilterGraphs 对于在 DLL 中全局注册的普通过滤器效果很好。

```
 // open structured storage file...
    hr = pStorage->OpenStream(L"ActiveMovieGraph", 0, STGM_READ | STGM_SHARE_EXCLUSIVE, 0, &pStream);
if (SUCCEEDED(hr)) {
    hr = pPersistStream->Load(pStream);
    pStream->Release();
} 
```

然而，一些过滤器是使用从 IClassFactory 实现调用的 CoRegisterObject 在 EXE 中本地注册的。当 IClassFactory 实现收到 IClassFactory::CreateInstance 调用时，这些过滤器是用 C++ new 创建的。

```
 HRESULT hr = CoRegisterClassObject(*m_pTemplate->m_ClsID, this, CLSCTX_INPROC_SERVER, REGCLS_MULTI_SEPARATE, &m_RegisterKey); 
```

当直接通过 CoCreateInstance 创建时，本地过滤器工作正常。当直接使用 C++ new 创建时，它们也可以正常工作。

```
CoCreateInstance(clsid, NULL, CLSCTX_INPROC_SERVER, IID_IBaseFilter, (void**)&instance); 
```

加载包含这些本地过滤器的 GRF 文件不起作用并返回 HRESULT 0x80040154 未从 IPersistStream::Load 注册的类。

未调用应用程序的 IClassFactory::CreateInstance 函数，但在 IPersistStream::Load 期间使用正确的 CLSID 调用 CoCreateInstance API，但它是从与 IPersistStream::Load 调用不同的线程调用的（在使用 COM 单元线程初始化的主应用程序线程上）。另一个区别是从 IPersistStream::Load 调用时 dwContext 是 CLSCTX_INPROC_SERVER|CLSCTX_INPROC_HANDLER。然而，来自主线程的 CoCreateInstance 调用仍然使用这个 dwContext 值。包括 CLSCTX_INPROC_HANDLER 标志的 CoRegisterClassObject 调用因 E_INVALIDARG 而失败。

```
ole32.dll!CoCreateInstance(const _GUID & rclsid, IUnknown * pUnkOuter, unsigned long dwContext, const _GUID & riid, void * * ppv)  Line 96  C++
quartz.dll!_CoCreateFilter@8()  + 0x1a bytes    
quartz.dll!CFilterGraph::OnCreateFilter()  + 0x55 bytes 
quartz.dll!CFGControl::CGraphWindow::OnReceiveMessage()  + 0x2d05 bytes 
quartz.dll!WndProc()  + 0x3e bytes  
user32.dll!_InternalCallWinProc@20()  + 0x23 bytes  
user32.dll!_UserCallWinProcCheckWow@32()  + 0xb7 bytes  
user32.dll!_DispatchMessageWorker@8()  + 0xed bytes 
user32.dll!_DispatchMessageW@4()  + 0xf bytes   
quartz.dll!ObjectThread()  + 0x65 bytes 
kernel32.dll!@BaseThreadInitThunk@12()  + 0x12 bytes    
ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes    

rclsid  {CA6B3460-28B3-4A6E-A7FC-A83CF1DEEC49}  const _GUID &
pUnkOuter   0x00000000  IUnknown *
dwContext   3   unsigned long
riid    {IID_IBaseFilter}   const _GUID & 
```

应用程序按照 MFC 应用程序的建议调用 CoInitializeEx(NULL, COINIT_APARTMENTTHREADED)。我尝试在对 CoRegisterClassObject 的调用中使用不同的上下文和标志值，但没有成功。GRF 文件肯定包含进程本地过滤器的正确 CLSID。

该行为与应用程序的 Win32 和 x64 版本相同。主机操作系统是 Windows 7 x64。

IFilterGraph 序列化是否支持使用 CoRegisterClassObject 注册的进程本地过滤器？如果是这样，应用程序正在做什么有问题吗？我可以采取任何步骤来进一步诊断此问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:46:17.760

我会说整个`.GRF`文件故事不应该用于生产用途。它只是调试、开发和故障排除的有用选项。在这里，由于最初的预期用途有限，您遇到了文档中没有很好地概述的限制之一。

过滤器图期望过滤器由 DLL 托管（使用`Both`公寓模型标记的类），因此它`CoCreateInstance`使用您看到的参数发出调用。此外，如果您使用`CLSID_FilterGraph`过滤器图，如 MSDN 所说，它：

> 在共享工作线程上创建 Filter Graph Manager。

然后你会在一个你不期望它们的线程上看到实例化调用。

我会说你仍然可以通过合理的努力使其工作。首先，您需要尝试`CLSID_FilterGraphNoThread`解决线程问题，并让实例化调用发生在调用线程上，在您已经准备好`CoRegisterClassObject`调用的单元中。

一旦线程问题解决了，`CLSCTX`应该不是问题。`CLSCTX_INPROC_SERVER`已经足够好了，并且您在`CoRegisterClassObject`调用中选择上下文标志，因此准备 COM 上下文并让您的类工厂从 .GRF 加载内部调用就足够了。

如果您是从 UI 线程创建图形，或者以其他方式将消息循环作为其正常操作的一部分的线程，则`CLSID_FilterGraphNoThread`应该像常规一样工作`CLSID_FilterGraph`。`CLSID_FilterGraphNoThread`基本上是一种稀有的鸟，但 Windows Media Player 内部确实使用它，也许这就是过滤器图形类的这种变体根本存在的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T11:38:51.107

为了未来读者的利益，这解决了这个问题：

从将 CoCreateInstance 处理本地 COM 对象的每个单元调用 CoRegisterClassObject。

要使用 CLSID_FilterGraph 加载 GRF 文件并实例化本地注册的过滤器，这也意味着从应用程序中的任何一个 MTA 线程调用 CoRegisterClassObject 并确保至少有一个 MTA 线程始终在运行，否则注册似乎会终止。

在 STA 应用程序中执行此操作的最简单方法（尽管可能很浪费）是启动一个线程，该线程调用 CoInitializeEx(NULL, COINIT_MULTITHREADED) 然后 CoRegisterClassObject 然后休眠并且永不退出。

[在理解和使用 COM 线程模型](http://msdn.microsoft.com/en-us/library/ms809971.aspx)中有一个有用的关于 COM 单元的 MSDN 解释

# telerik - Kendo Ui Grid - 在初始请求中仅获取页码行数

> ID：14925122
> 
> 赞同：4
> 
> 时间：2013-02-17T19:27:53.673
> 
> 标签：telerik, kendo-ui, kendo-grid

我在这里阅读了几篇文章以及 Telerik 网站上的教程，但缺少它们 - 并且文档已关闭。希望在阅读数小时后快速修复。

我正在尝试使用具有大量行（1M）的剑道网格。在网站上的示例中，我看到视图控制器操作正在返回整个数据集。获取所有行是非常昂贵的过程，并且数据集非常庞大。

我的问题是如何配置网格，以使每个后续回调都返回下一页**并且**初始调用不会一次获取所有行？

我的代码类似于：

```
//Main controller action
    public ActionResult Index()
    {
                List<items> listItems = GetAllItems(); // very expensive call!

                return View(listItems);
    }

// my view for that action
    @(Html.Kendo().Grid(Model)
        .Name("grid")
        .Columns(columns =>
          {
              //some columns...
          })

        .Pageable(page=>page.PageSizes(true)) //Enable paging - I suspect here I can fix
         .DataSource(datasource =>datasource.Ajax().PageSize(20).Read(read => read.Action("MoreItems", "Index")).ServerOperation(true)) // tried all sorts of things here
         .Sortable()
         .Filterable()
    )

// the callbacks for the ajax
    public ActionResult MoreItems([DataSourceRequest] DataSourceRequest request)
            {
                return Json(GetAllItems().ToDataSourceResult(request));
    }
    //add some cache just to see what was holding the thing up
    [OutputCache(Duration = 3600, VaryByParam = "none")]
    private static List<items> GetAllItems()
    {
        //some code to retrieve items
    } 
```

（从示例看来，初始调用正在返回完整模型 - 并且对 Products_Read 的后续调用在过滤器对象上。如何过滤初始调用但允许将来分页 - 在我的情况下，我有 100k+ 行并且不可能做到“返回视图（模型”））谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T19:53:59.187

似乎对剑道信息不太幸运......您正在寻找的东西被称为（[此处](http://docs.kendoui.com/api/framework/datasource#serverpaging-booleandefault)`serverPaging`框架 DataSource 下的文档）。

对于您的服务器将收到的每个请求：

*   `take`包含要检索的记录数
*   `skip`从数据集的前面开始读取多少条记录
*   `page`当前数据页的索引
*   `pageSize`每页的记录数

您也可以考虑使用`scrollable.virtual`（[此处](http://docs.kendoui.com/api/web/grid#scrollablevirtual-boolean-default)的文档，当您在网格中向下滚动时会加载以下页面。

此示例 ( [http](http://demos.kendoui.com/web/grid/remote-data.html) ://demos.kendoui.c​​om/web/grid/remote-data.html ) 使用`serverPaging`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T20:04:09.440

看来您对[LINQ 表达式引擎](http://msdn.microsoft.com/en-us/library/bb397951.aspx)并不熟悉。永远不会检索整个集合。**ToDataSourceResult**方法正是这样做的——在**数据库级别应用分页/排序/分组**（感谢该表达式引擎）。

您不必做任何事情 - 只需将 IQueryable 集合（包含所有记录）传递给 DataSourceResult，不要在此之前调用 ToList（或类似的东西），否则魔法将被打破:)

# python - pymongo 中的 Upsert 和 Multi 标志

> ID：14925134
> 
> 赞同：12
> 
> 时间：2013-02-17T19:28:50.317
> 
> 标签：python, mongodb, pymongo

我正在研究 pymongo，这是我的文档：

```
{
   "_id": ObjectId("51211b57f07ddaa377000000"),
   "assignments": {
     "0": {
       "0": {
         "_id": ObjectId("5120dd7400a4453d58a0d0ec") 
      },
       "1": {
         "_id": ObjectId("5120dd8e00a4453d58a0d0ed") 
      },
       "2": {
         "_id": ObjectId("5120ddad00a4453d58a0d0ee") 
      } 
    } 
  },
   "password": "my_passwd",
   "username": "john" 
} 
```

我想取消设置所有此类文档的“分配”属性。我可以通过以下方式在 mongo shell 上实现这一点：

```
db.users.update({}, {$unset: {"assignments": 1}}, false, true) 
```

即，我将 upsert 和 multi 标志作为最后两个参数传递给用户集合上的更新函数函数。但是我用 pymongo 做到了这一点：

```
db.users.update({}, {"$unset": {"assignments": 1}}, False, True) 
```

但是python解释器抛出如下错误：

```
File "notes/assignment.py", line 34, in <module>
    db.users.update({}, {"$unset": {"assignments": 1}}, False, True)
  File "/usr/local/lib/python2.7/dist-packages/pymongo/collection.py", line 481, in update
    check_keys, self.__uuid_subtype), safe)
  File "/usr/local/lib/python2.7/dist-packages/pymongo/mongo_client.py", line 852, in _send_message
    rv = self.__check_response_to_last_error(response)
  File "/usr/local/lib/python2.7/dist-packages/pymongo/mongo_client.py", line 795, in __check_response_to_last_error
    raise OperationFailure(details["err"], details["code"])
pymongo.errors.OperationFailure: Modifiers and non-modifiers cannot be mixed 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-18T02:04:08.150

问题是您传入的两个标志不是`upsert`和`multi`。根据 PyMongo 的文档`Collection.update`（在[此处](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.update)找到），看起来您可能正在传递`upsert`and`manipulate`选项的值，尽管我不确定。

要解决这个问题，你所要做的就是使用 Python 最棒的特性之一：命名参数。通过指定要传递给的选项`update`，除了确保不会发生此类事故之外，还可以增加代码的清晰度。

在这种情况下，我们要传递选项`upsert=False`和`multi=True`。

```
db.users.update({}, { "$unset": { "assignments": 1 } }, upsert=False, multi=True) 
```

# java - 在linux上拦截HTTP请求

> ID：14925135
> 
> 赞同：7
> 
> 时间：2013-02-17T19:28:54.047
> 
> 标签：java, linux, http, https

我需要能够拦截 HTTP 请求、提取它们的信息（内容、目的地……），执行各种分析任务，并最终确定是否应该丢弃请求的东西。然后必须将法律请求转发给应用程序。

基本上，与 IDS 具有相同的功能。但请注意，我不是在寻找数据包嗅探器/过滤器。我想要一些在 HTTP 级别上运行的东西。

它应该可以在 linux 上实现，并在与请求所针对的应用程序相同的系统上运行。

作为奖励，可以支持 https（请求内容的未加密查看）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T19:32:40.203

试试[mitmproxy](http://mitmproxy.org/doc/intro.html)。

*   mitmproxy 是一个支持 SSL 的 HTTP 中间人代理。它提供了一个控制台界面，允许即时检查和编辑流量。

*   mitmdump 是 mitmproxy 的命令行版本，具有相同的功能，但没有用户界面。想想 HTTP 的 tcpdump。

### 特征

*   拦截 HTTP 请求和响应并即时修改它们。
*   保存完整的 HTTP 对话以供以后重放和分析。
*   重播 HTTP 对话的客户端。
*   重放先前记录的服务器的 HTTP 响应。
*   反向代理模式将流量转发到指定的服务器。
*   使用 Python 对 HTTP 流量进行脚本更改。
*   用于拦截的 SSL 证书是即时生成的。

### 截屏

![在此处输入图像描述](../Images/874f4a9a0c6899b63ad215afe91e7adb.png)

### 例子

我设置了一个示例[Jekyll Bootstrap](http://jekyllbootstrap.com/)应用程序，它在我的本地主机上的端口 4000 上进行监听。要拦截它的流量，我会执行以下操作：

```
% mitmproxy --mode reverse:http://localhost:4000 -p 4001 
```

`http://localhost:4001`然后从我的网络浏览器（

![带 JB #1 的 mitmproxy ss](../Images/058d3a6944f025322421774d903e88ac.png)

然后，您可以选择任何`GET`结果以查看与该结果相关的标题信息`GET`：

![带 JB #2 的 mitmproxy ss](../Images/f687e0f53d1f1579ee432691af5122a7.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-18T19:01:34.803

尝试使用 [Burp Proxy](https://portswigger.net/burp/proxy.html)，听起来像你需要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T19:34:14.367

我为此使用[Wire Shark](http://www.wireshark.org/)，如果您提供所有服务器证书，它甚至可以解密 HTTPS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T19:31:22.700

您应该可以为此使用 squid 代理（[https://en.wikipedia.org/wiki/Squid_(software)](https://en.wikipedia.org/wiki/Squid_(software))）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T19:53:40.333

为什么不使用 Apache HTTP 客户端[http://hc.apache.org/httpclient-legacy/tutorial.html](http://hc.apache.org/httpclient-legacy/tutorial.html) 这个简单的库很有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T07:09:01.417

我最终使用了[LittleProxy](https://github.com/adamfisk/LittleProxy)，因为它是 java、快速且轻量级的。它最初是一个正向代理，所以我不得不通过将每个请求转发到本地主机来调整它以适应反向代理功能。我只是通过编辑 HttpRequestHandler 来做到这一点。我硬编码了主机和端口地址。

```
hostAndPort = "localhost:80"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-17T19:31:45.087

您应该了解有关[ICAP](http://en.wikipedia.org/wiki/Internet_Content_Adaptation_Protocol)的更多信息，然后为您的 HTTP 过滤应用程序创建一个 ICAP 服务器。

# javascript - 当事件（发泄）完成时，backbone.js 会做些什么？

> ID：14925141
> 
> 赞同：2
> 
> 时间：2013-02-17T19:29:28.757
> 
> 标签：javascript, jquery, events, backbone.js

```
$('button').click(function(){
  App.vent.trigger("box:change");
});

App.BoxView = Backbone.View.extend({
  initialize: function(options) {

    this.listenTo( App.vent, "box:change", this.alter ); // animate, etc.
  },

  ...

}); 
```

我有一个主要观点，我希望在（和/或）时做一些改变：

1.  该事件由我所有的盒子处理
2.  我所有的盒子都做了一些动画

无法解决这个问题（漫长的工作日）......请帮助=）更好的做法是什么？

我正在寻找这样的东西：

```
App.MainView = Backbone.View.extend({
      initialize: function(options) {

        // when all the events are complete
        this.listenTo( App.vent, "box:change" ).onComplete( this.rearrange_stuff );

        // when all the animations are complete
        this.listenTo( App.animationBuffer, "box:fadeOut" ).onComplete( this.rearrange_stuff );

      },

      ...

}); 
```

更新：如果我的应用程序中有很长的事件链 - 完成 - 事件 - 完成（不是循环），那么设置此队列的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:43:00.330

使用 jquery 我发现了承诺，只需要弄清楚我如何将它应用于我的所有视图..

[http://api.jquery.com/promise/](http://api.jquery.com/promise/)

（更新）

现在，我已经这样做了...... [http://jsfiddle.net/Antonimo/YyxQ3/2/](http://jsfiddle.net/Antonimo/YyxQ3/2/)

```
App.vent = _.extend(Backbone.Events, {
    promise: function(name){
        if(typeof this._bills[name] === "undefined"){
            this._bills[name] = 0;
        } else {
            this._bills[name] ++;
        }
    },
    keepPromise: function(name){
        var that = this;
        setTimeout( function(){
            if(typeof that._checks[name] === "undefined"){
                that._checks[name] = 0;
            } else {
                that._checks[name] ++;
            }
            if(typeof that._bills[name] !== "undefined"){                    
                if( that._checks[name] >= that._bills[name] ){
                    that._checks[name] = 0; // reset
                    that._bills[name] = 0; // reset
                    that.trigger(name); // emit event
                }
            }

        }, 30);
    },
    _bills: {},
    _checks: {}
});

// usage:

alter: function() {
        App.vent.promise('some:event');
        // Animate, or not..
        App.vent.pay('some:event');
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T03:02:16.880

我一直在寻找解决方案，并在 Backbone 中找到了这个插件，它向 Backbone.Events 和其他 Backbone 对象添加了一个“triggerThen”方法，它允许您触发一个事件，然后在所有事件侦听器完成后调用一个函数。

[https://github.com/bookshelf/trigger-then](https://github.com/bookshelf/trigger-then)

如果有一个官方的 Backbone 解决方案会很好，尽管它在整个 Backbone.Events 框架中使用了 Promise。

# python - X11 Tkinter + PIL + py2app = IOError 无法识别图像文件

> ID：14925144
> 
> 赞同：1
> 
> 时间：2013-02-17T19:29:50.770
> 
> 标签：python, tkinter, python-imaging-library, py2app, ioerror

我尝试导出到 py2app 的 python 程序（python 2.7.3、X11 Tkinter、py2app 0.6.4、MacOS X 10.7.4）有问题。该问题仅在程序的独立 py2app-ified 应用程序版本中开始出现。当我运行创建应用程序的python源文件时，**问题不存在**，所以我觉得它一定与py2app导出有关。

问题：当我启动 GUI 时，我第一次尝试加载有效的图像文件时，图像无法加载，并且我从 PIL Image 模块收到以下错误：

```
File "Image.pyc", line 1980, in open
IOError: cannot identify image file 
```

当我然后（不关闭 GUI 或任何东西）尝试打开**完全相同的文件**时，它加载完美，没有错误或问题。每次尝试使用任何图像文件都会发生这种情况-第一次尝试加载失败，随后的尝试成功。我应该补充一点，在第一个错误之后，**没有图像文件无法加载**——即使它们与第一个不同。

一些注意事项： - 图像文件是一个序列，并且非常大（大约 300 MB），所以为了加快加载过程，我使用了 mmap。我试过去掉mmap步骤，直接把一个普通的文件对象交给ImagePIL.open，问题不受影响。
- 在将文件提供给 ImagePIL.open 之前，我还尝试寻找文件的开头，但这没有效果。- py2app 设置文件非常普通 - 它只包含一些配置文件和一个图标。

这是有问题的图像加载功能的相关部分：

```
import Image as ImagePIL
import mmap as m
...
...
def loadImage(self):
    errorLog.debug("Attempting to open image \""+self.filenameVar.get()+"\"")
    try:
        if self.fileMap is not None:
            self.fileMap.close()
        imageFile = open(self.filenameVar.get(), 'r')
        self.fileMap = m.mmap(imageFile.fileno(), 0, prot=m.PROT_READ)
#       self.fileMap.seek(0)
        self.imageSeries = ImagePIL.open(self.fileMap)
        imageFile.close()
    except(IOError):
        errorLog.exception("Failed to open image \""+self.filenameVar.get()+"\"")
        return 
```

我很困惑 - 有什么想法吗？提前致谢！

编辑：我应该补充一点，Tkinter、PIL 和 py2app 是使用 MacPorts 2.1.2 安装的，这很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:59:14.570

py2app 似乎没有将 PIL 的图像插件包含到应用程序包中，即使其中一个 py2app 配方试图确保它们被包含在内。

您可以尝试的一件事是使用“python setup.py py2app --packages=PIL”构建，然后使用“import PIL.Image as ImagePIL”来使用它。

我还不明白为什么 PIL 配方不起作用，这可能是 MacPorts 构建 python 包的方式（我自己不使用 MacPorts）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-05T20:31:40.450

问题是 Pillow 版本 3.0.0 和 py2app 不一致的结果。

我建议两种解决方案来避免 PIL（枕头）

1.  使用 opencv 而不是 PIL。
2.  卸载当前版本的 Pillow 并安装以前的版本，如 1.7.8

# asp.net - 在视图中使用 RenderPartial 时不显示 ValidationSummary()

> ID：14925148
> 
> 赞同：4
> 
> 时间：2013-02-17T19:30:15.447
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

当我使用

```
 @{Html.RenderPartial("Login");} 
```

在我的主视图中， `@Html.ValidationSummary()`它不起作用，但是当我从主视图中的“登录”复制代码时，它起作用了。

为什么会这样，如何从局部视图显示验证消息？

这是部分视图“登录”：

```
@model NyNo.Models.LoginModel

@using (Html.BeginForm())
{
    <fieldset>
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)

        @Html.TextBoxFor(m => m.UserName, new { @placeholder = "Username" })
        @Html.ValidationMessageFor(m => m.UserName)

        @Html.PasswordFor(m => m.Password, new { @placeholder = "Password" })
        @Html.ValidationMessageFor(m => m.Password)

        @Html.CheckBoxFor(m => m.RememberMe)
        @Html.LabelFor(m => m.RememberMe, new { @class = "checkbox" })

        <input type="submit" class="button" value="Log in" />
    </fieldset>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

希望您能理解，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T19:38:02.380

不幸的是，这行不通。Partial 只是一个字符串。

虽然 RenderPartial 实际上是“写入”部分标记而不是将字符串发送回视图生成器，但它不会将您的视图重新绑定到新模型。如果您希望验证摘要起作用，它必须绑定到主视图中的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T23:00:19.953

您的问题可能与此有关（也许您没有显示传入的 ViewData `RenderPartial()`）：[在传播 ModelState 错误时将附加的 ViewData 传递给 ASP.NET MVC 4 Partial View](http://www.codenoevil.com/pass-additional-viewdata-asp-net-mvc-4/)

我遇到了类似的问题，我用这种方式解决了：[ValidationSummary inside a partial view not show errors](https://stackoverflow.com/a/17935586/1204249)

# javascript - 从父页面发回 IFrame 内的禁用表单

> ID：14925149
> 
> 赞同：0
> 
> 时间：2013-02-17T19:30:19.363
> 
> 标签：javascript, asp.net, iframe, postback

我有一个页面，其中包含一个复选框集合、左侧的关联标签和右侧的 Iframe 分区。

点击复选框分割（包括标签）时，会在iframe中加载相应的页面。此外，当单击另一个文本复选框时，应保存当前页面中的页面值，并应在 IFrame 中加载新页面。

我通过从父页面调用 Iframe 页面的 Javascript 函数来完成此操作，该函数反过来执行回发并触发事件内的保存 loic（例如：我在每个页面内都有一个按钮，该按钮隐藏但有一个事件） .

我的问题是，当复选框未选中时，IFrame 上显示的表单被清除并禁用。因此，当我单击其他部分时，将执行当前禁用表单的回发，并且由于整个表单被禁用，因此不会发生回发。

如何为禁用的表单触发回发或以另一种方式保存数据？

注意：我什至尝试在调用回发之前启用该页面，但它仍然没有触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:12:52.770

我会尝试用 Ajax 控制的动态部分替换您的 iframe 结构。如果这不可行，请重新考虑禁用该表单。如果您这样做的原因是为了防止两次发布值，也许不是禁用表单，而是隐藏按钮。

# mysql - MySQL 或 PostgreSQL 的汉明距离优化？

> ID：14925151
> 
> 赞同：5
> 
> 时间：2013-02-17T19:30:31.173
> 
> 标签：mysql, sql, query-optimization, hamming-distance, phash

我试图改进在 MySQL 数据库中搜索相似图像 pHashed。现在我像这样比较 pHash 计数汉明距离：

```
SELECT * FROM images WHERE BIT_COUNT(hash ^ 2028359052535108275) <= 4 
```

选择结果*（引擎 MyISAM）*

*   20000 行；查询时间 < 20ms
*   100000 行；query time ~ 60ms # 这很好，直到达到 150000 行
*   300000 行；查询时间 ~ 150ms

因此查询时间增加取决于表中的行数。

* * *

我还尝试了 [在 SQL 中二进制字符串的 stackoverflow 汉明距离上找到的解决方案](https://stackoverflow.com/questions/4777070/hamming-distance-on-binary-strings-in-sql)

```
SELECT * FROM images WHERE 
BIT_COUNT(h1 ^ 11110011) + 
BIT_COUNT(h2 ^ 10110100) + 
BIT_COUNT(h3 ^ 11001001) + 
BIT_COUNT(h4 ^ 11010001) + 
BIT_COUNT(h5 ^ 00100011) + 
BIT_COUNT(h6 ^ 00010100) + 
BIT_COUNT(h7 ^ 00011111) + 
BIT_COUNT(h8 ^ 00001111) <= 4 
```

行 300000 ; 查询时间 ~ 240ms

* * *

我将数据库引擎更改为 PostgreSQL。[将此 MySQL 查询转换为 PyGreSQL](https://stackoverflow.com/questions/5459487/translate-this-mysql-query-to-pygresql) 没有成功。行 300000 ; 查询时间~18s

* * *

**有没有优化上述查询的解决方案？** 我的意思是优化不取决于行数。

我有有限的方法（工具）来解决这个问题。到目前为止，MySQL 似乎是最简单的解决方案，但我可以在每个可以在专用机器上与 Ruby 一起使用的开源数据库引擎上部署代码。[MsSQL https://stackoverflow.com/a/5930944/766217](https://stackoverflow.com/a/5930944/766217)有一些现成的解决方案（未测试）。也许有人知道如何为 MySQL 或 PostgreSQL 翻译它。

请根据一些代码或观察发布答案。我们在 stackoverflow.com 上有很多关于汉明距离的理论问题

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T03:27:28.010

在考虑算法的效率时，计算机科学家使用表示为 O(something) 的*顺序*的概念，其中 something 是 n 的函数，n 是正在计算的事物的数量，在这种情况下是行。因此，随着时间的推移，我们得到：

*   O(1) - 与项目数无关
*   O(log(n)) - 随着项目的对数增加
*   O(n) - 增加项目的比例（你有什么）
*   O(n^2) - 随着项目的平方增加
*   O(n^3) - 等等
*   O(2^n) - 呈指数增长
*   O(n!) - 随着数字的阶乘而增加

对于任何合理数量的 n (80+)，最后 2 个实际上是不可计算的。

只有最重要的项很重要，因为这在大 n 中占主导地位，所以 n^2 和 65*n^2+787*n+4656566 都是 O(n^2)

请记住，这是一个数学结构，算法在使用真实数据的真实硬件上使用真实软件所花费的时间可能会受到其他因素的严重影响（例如，O(n^2) 内存操作可能比 O( n) 磁盘操作)。

对于您的问题，您需要遍历每一行并计算`BIT_COUNT(hash ^ 2028359052535108275) <= 4`. 这是一个 O(n) 操作。

唯一可以改进的方法是利用索引，因为 b-tree 索引检索是 O(log(n)) 操作。

但是，由于您的列字段包含在函数中，因此无法使用该列的索引。你有两种可能性：

1.  这是一个 SQL 服务器解决方案，我不知道它是否可以移植到 MySQL。使用公式在表中创建一个持久计算列`BIT_COUNT(hash ^ 2028359052535108275)`并在其上放置一个索引。如果您需要更改位掩码，这将*不合适。*
2.  找出一种不使用 BIT_COUNT 函数进行按位运算的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-12T20:22:33.507

这个解决方案让我的事情变得更快了。它为每个哈希比较创建一个派生表，并仅返回小于 ham 距离的结果。这样，它就不会对已经超过 ham 的 pHash 执行 BIT_COUNT。它会在大约 2.25 秒内返回 260 万条记录的所有匹配项。

它是 InnoDB，我的索引很少。

如果有人可以让它更快，我会很感激你。

```
SELECT *, BIT_COUNT(pHash3 ^ 42597524) + BC2 AS BC3 
FROM ( 
    SELECT *, BIT_COUNT(pHash2 ^ 258741369) + BC1 AS BC2 
    FROM ( 
        SELECT *, BIT_COUNT(pHash1 ^ 5678910) + BC0 AS BC1 
        FROM ( 
            SELECT `Key`, pHash0, pHash1, pHash2, pHash3, BIT_COUNT(pHash0 ^ 1234567) as BC0 
            FROM files 
            WHERE  BIT_COUNT(pHash0 ^ 1234567) <= 3 
        ) AS BCQ0 
        WHERE BIT_COUNT(pHash1 ^ 5678910) + BC0 <= 3 
    ) AS BCQ1 
    WHERE BIT_COUNT(pHash2 ^ 258741369) + BC1 <= 3 
    ) AS BCQ2 
WHERE BIT_COUNT(pHash3 ^ 42597524) + BC2 <= 3 
```

这是等效的查询，但没有派生表。它的返回时间几乎是它的 3 倍。

```
SELECT `Key`, pHash0, pHash1, pHash2, pHash3 
FROM Files 
WHERE BIT_COUNT(pHash0 ^ 1234567) + BIT_COUNT(pHash1 ^ 5678910) + BIT_COUNT(pHash2 ^ 258741369) + BIT_COUNT(pHash3 ^ 42597524) <=3 
```

请记住，第一个的火腿值越低，它运行得越快。

# javascript - javascript循环错误

> ID：14925153
> 
> 赞同：0
> 
> 时间：2013-02-17T19:30:41.767
> 
> 标签：javascript, loops, for-loop, mapbox

我被我的循环困住了。一切正常，除了`markerLayer.markers()[i].showTooltip();` 不知何故它显示错误的标记。我是否传递了错误的论点？我错过了这里的逻辑吗？

```
for (var i = 0; i < features.length; i++) {
    var a = side.appendChild(document.createElement('a'));
    a.onclick = (function (feature, i) {
        return function () {
            markerLayer.interaction.hideTooltips()
            map.ease.location({
                lat: feature.geometry.coordinates[1],
                lon: feature.geometry.coordinates[0]
            }).zoom(zoomPlaces).optimal(null, null, function (feature) {
                markerLayer.markers()[i].showTooltip();
            })
        }
    })
    (features[i], i);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T19:13:57.743

最新版本的 MapBox 和 Leaflet 的 JavaScript API 用于`map.markerLayer.getLayers()`返回包含唯一`_leaflet_id`. 请使用该 ID 号来帮助指定您想要的标记`togglePopup`。

# css - 左右流的 CSS 列

> ID：14925157
> 
> 赞同：37
> 
> 时间：2013-02-17T19:31:07.757
> 
> 标签：css, css-multicolumn-layout

假设我有一个`div`包含一组元素（div）的元素，它们可能具有不同的高度，但它们都将具有相同的宽度。

我目前使用同位素 + masonry 实现了这一点，但由于一些浏览器已经支持 CSS3 多列，我希望为这些浏览器提供唯一的 CSS 解决方案，其余的回退到 Javascript。

这是我一直在尝试的 CSS：

```
.div-of-boxes {
  -webkit-column-count: 3;
  -webkit-column-gap:   10px;
  -moz-column-count:    3;
  -moz-column-gap:      10px;
  column-count:         3;
  column-gap:           10px;
} 
```

然而，这使得元素的流动是自上而下的从左到右。我想要一个左右自上而下的流程。这是我想要的一个例子：

```
1 2 3
4 5 6
7 8 9 
```

但这就是我得到的：

```
1 4 7
2 5 8
3 6 9 
```

在[Flow 多列元素中，在自上而下之前从左到右](https://stackoverflow.com/questions/12481337/flow-multi-column-elements-left-right-before-top-down)询问了类似的问题，但我对答案不满意，并且它不适用于不同高度的元素。这对于 CSS 列是否可能，或者它是一个限制？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-17T20:10:46.043

多列规范没有提供改变列之间元素分布的属性：http: [//www.w3.org/TR/css3-multicol/](http://www.w3.org/TR/css3-multicol/)。这样的属性似乎违背了模块的设计目的（重新创建报纸或杂志文章的布局方式）。

没有其他纯 CSS 解决方案可以让您实现您正在寻找的效果。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-17T20:14:36.970

如果您的布局总是 3 列宽，您可以尝试`nth`在内部 div 上使用选择器。
您可以通过清除第 4 项来做到这一点。

```
#container {
    overflow: hidden;
    width: 440px;
}
#container div {
    background-color: gray;
    width: 110px;
    margin: 5px;
    float: left;
}
#container div:nth-child(4) {
    clear: both;
}
```

```
<div id="container">
    <div id="widget1">1</div>
    <div id="widget2">2</div>
    <div id="widget3">3</div>
    <div id="widget4">4</div>
    <div id="widget5">5</div>
    <div id="widget6">6</div>
    <div id="widget7">7</div>
    <div id="widget7">8</div>
</div>
```

**[JS小提琴](http://jsfiddle.net/R8GRp/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-14T18:22:23.413

这是解决方案[的链接](https://codepen.io/petro-tsurkevych/pen/ZEWRxEJ?editable=true)！仅使用弯曲。

html

```
- var n = 0;
ul
  while n < 40
    li= n++
  li 
```

css

```
ul {
    list-style: none;
    padding: 30px;
    background: #28285e;

    li {
        padding: 20px;
        margin: 6px;
        background: white;
        width: calc(50% - 52px);
        height: 100px;
        display: inline-block;
        border: {
            radius: 4px
        }

        &:nth-child(3n) {
            height: 40px;
        }

        &:nth-child(2n + 1) {
            height: 80px;
        }

        &:nth-child(even) {
            float: right;
        }

        &:nth-child(odd) {
            float: left;
        }

        &:last-child {
            clear: both;
            float: none;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-19T17:50:25.053

[如Tobias Ahlin](https://tobiasahlin.com/blog/masonry-with-css/)的这篇博文中所述，有一个使用`flexbox`、`:nth-child()`和的纯 CSS 解决方案。`order`

这个想法很简单。`flex-flow: column`with`wrap`可以精确地做什么`column-count`。你需要两个条件才能让它工作： 1\. flexbox 容器需要有一个固定的高度，并且它需要比你最高的列高。2.flex children需要宽度，2列布局50%，3列布局33%等。

```
.flex-container {
  display: flex;
  flex-flow: column wrap;
  height: 600px; /* You'll need to play with this value to distribute items correctly */
}

.flex-child {
  width: 33%; /* Creates 3-column layout */
} 
```

这种方法有同样的问题`column-count`：元素按列排序，自上而下。但是由于我们使用的是 flexbox，现在我们可以访问该`order`属性。

使用`:nth-child()`and`order`我们可以覆盖默认顺序。

```
.flex-child:nth-child(3n+1) { order: 1; }
.flex-child:nth-child(3n+2) { order: 2; }
.flex-child:nth-child(3n)   { order: 3; } 
```

带有的项目`order: 1`将进入第一列，`order: 2`将进入第二列和`order: 3`第三列。

在`(an + b)`公式`a`中表示一个周期大小，`n`是一个计数器（从 0 开始），并且`b`是一个偏移值。所以选择从**第**`(3n+1)`一个开始的每第三个项目。选择每第三个项目，但从**第二个**项目开始。并选择从该项目开始的每第三个项目，因为索引 0 处没有任何内容。**`(3n+2)`**`(3n)``third`****

 ****在某些布局中，列可能会合并。为了解决这个问题，Tobias 在列之间插入了伪元素：

```
/* Force new columns */
.flex-container::before,
.flex-container::after {
  content: "";
  flex-basis: 100%;
  width: 0;
  order: 2;
} 
```

我不会在这里解释它是如何工作的，但是你可以[在这里阅读更多关于它的信息](https://tobiasahlin.com/blog/masonry-with-css/#preventing-columns-from-merging)。

这是 Tobias 的[CodePen](https://codepen.io/tobiasahlin/pen/JVmLRa)，用于 3 列布局。如果您使用的列超过三列，[请在此处阅读如何进行调整](https://tobiasahlin.com/blog/masonry-with-css/#working-with-more-than-three-columns)。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-08-18T16:51:39.720

您可以使用 jQuery 重新排列列中的项目。如果是 2 个 cols，它将是：

```
$('.your-columns-container .your-item:nth-child(even)').appendTo('.your-columns-container'); 
```

[https://jsfiddle.net/hzvp7sgf/](https://jsfiddle.net/hzvp7sgf/)

3列更复杂：

```
$('.your-columns-container .your-item:nth-child(3n - 1)').addClass('container-col2');
$('.your-columns-container .your-item:nth-child(3n)').addClass('container-col3');

$('.container-col2').appendTo('.your-columns-container').removeClass('container-col2');
$('.container-col3').appendTo('.your-columns-container').removeClass('container-col3'); 
```

[https://jsfiddle.net/d4LeLyu5/](https://jsfiddle.net/d4LeLyu5/)****

# erlang - 如何将erlang记录从字符串表示形式转换回记录

> ID：14925158
> 
> 赞同：2
> 
> 时间：2013-02-17T19:31:10.907
> 
> 标签：erlang

以下允许将元组或对象转换回 erlang 中的对象：

```
{ok, Tokens, _} = erl_scan:string("{'abc',123}."),
{ok, X} = erl_parse:parse_term(Tokens). 
```

但是当您将记录表示为字符串时，例如：

```
-record(myrecord,{firstname,lastname,age}).
...
RecString = "#myrecord{firstname='john',lastname='doe',age=22}.",
{ok, Tokens, _} = erl_scan:string(RecString),
{ok, X} = erl_parse:parse_term(Tokens). 
```

...以上将失败并显示以下消息：

** 异常错误：右侧值不匹配 {error,{1,erl_parse,["syntax error before: ",[]]}}

关于如何实现这一目标的想法？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T21:23:39.080

首先，您必须记住，记录不作为数据类型存在，内部记录是元组，其中第一个元素是记录的名称。因此，根据您的记录定义：

```
-record(myrecord,{firstname,lastname,age}). 
```

创建记录

```
#myrecord{firstname='john',lastname='doe',age=22} 
```

将导致元组

```
{myrecord,john,doe,22} 
```

它只包含实际数据。这就是记录的定义方式，请参见[此处](http://www.erlang.org/doc/reference_manual/records.html#id81418)。

Second point is that records are **purely compile-time** syntactic constructions which compiler transforms in tuple operations. So the definition of a record does not exist as such as data anywhere. Only the compiler knows of record definitions. So when you print a record all you see is the tuple. However you can define record inside the shell so you can use record syntax in the shell, see in the [shell documentation](http://www.erlang.org/doc/man/shell.html).

So in this sense you cannot really convert a record to/from its string representation. You can parse the string but this only returns the abstract syntax which is not what you are after. They are expressions so you need to end the string with a `.` and use `erl_parse:exprs/1`.

希望这可以帮助。你想做什么？或者更确切地说，你*为什么*要这样做？

# c++ - 我有一个基类和派生类对象的向量，但我无法访问存储在向量中的派生对象继承的数据成员

> ID：14925164
> 
> 赞同：0
> 
> 时间：2013-02-17T19:31:46.023
> 
> 标签：c++, inheritance, vector

请耐心等待，我在 C++ 方面相对较新。

这是我的项目。我想从本质上创建一个简单的国际象棋游戏。

我有一个基类 gamePiece，我认为它最终会成为一个抽象类（但现在不是）

基类 gamePiece 中有一堆数据成员：colorOfPiece、rankOfPiece、fileOfPiece 等。它还有一个函数 void displayPieceInfo()，它通过 cout 在控制台上简单地显示所有这些值。

我计划从这个派生一些派生类。现在我有一个“车”子类。

我想在单个向量中添加各种类型的片段，以便稍后使用迭代器遍历它。

这是我遇到的问题。

```
vector<gamePiece> vectorOfAllGamePieces;
vector<gamePiece>::iterator itGamePieces; 
```

我将 Rook 作为第一个元素推入向量中。所有的构造函数看起来都运行良好，正在初始化变量。然而，当我尝试在第一个元素上运行显示功能时，字符串为空/未初始化。

```
itGamePieces=vectorOfAllGamePieces.begin();
itGamePieces->displayPieceInfo(); 
```

如果我将通用 gamePiece 推入向量中，一切都会正确显示。

我什至可以有一个这样的向量与混合类型的对象 - 例如，派生类的对象，父类的对象，从同一个父类派生的第二个类的对象

如果是这样，你为什么认为数据成员的值没有正确显示，即使我已经在构造函数中设置了它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:33:46.367

不是真的，因为切片。当您将派生对象添加到 a`vector<gamePiece>`时，它会被切片，并且`gamePiece`对象实际上会添加到向量中。

您需要使用（智能）指针向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:46:53.177

问题是这样的，`Rook` **是一个** `GamePiece`. 但是您不能将 Rook 存放在 GamePieces 的地方。您只能**将**a`Pointer to Rook`转换为 a `Pointer to GamePiece`。因此，您的向量必须保存**NOT** `GamePieces`而是`GamePiece *`（指向 GamePieces 的指针）。

```
std::vector<GamePiece *> vectorOfAllGamePieces; 
```

但这可能会给您的内存管理带来麻烦。另一种方法是`Handles`不使用指针进行存储。（句柄类似于指向指针的指针）。或者当然你可以使用智能指针。

一个快速的黑客将是（这是一个“黑客”，在某些人眼中是“邪恶的”），

```
std::vector<Rook> allRooks;
std::vector<Pawns> allPawns;
.....
std::vector<Queen> allQueens;
King theKing;

std::vector<GamePiece *> allPieces; 
```

将`allPieces`包含指向其他向量中对象的指针。我认为当你确切地知道所有类型的棋子（我猜这是国际象棋）时，这还不错。

# java - 删除 ArrayList 中第一个元素的所有出现

> ID：14925167
> 
> 赞同：0
> 
> 时间：2013-02-17T19:32:12.903
> 
> 标签：java, arraylist

我想删除 ArrayList 中与第一个元素重复的所有元素，但我希望第一个元素保留在 ArrayList 中。我尝试使用 for 循环来做到这一点，但它并没有删除所有重复项。

```
for(int i = 1; i < arraylist.size(); i++) {
    if(arraylist.get(i) == v1)
       arraylist.remove(i);
} 
```

v1 等于数组列表的第一个元素。我也尝试使用 ListIterator，但它删除了第一个元素

```
ListIterator<Integer> iterator = arraylist.listIterator();
while(iterator.hasNext()) {
  if(iterator.next().intValue() == v1)
  iterator.remove();
} 
```

你能帮我么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:37:48.283

您需要在 之外单独读取第一个元素`while loop`，并将其存储在某个变量中，您可以将其与其余元素进行比较，以删除：

```
ListIterator<Integer> iterator = arraylist.listIterator();
int first = 0;
// Check if there is a first element
if (iterator.hasNext()) {
    first = iterator.next();

    // Iterate over the rest of the elements
    while(iterator.hasNext()) {
        // If this value is equal to `first`, remove it
        if(iterator.next().intValue() == first) {
            iterator.remove();
        }
    }
}
System.out.println(arrayList); 
```

`iterator.next()`将返回一个类型的值`Integer`。使用`intValue()`将给出你的*原始*价值。

但由于我正在与`int`原语本身进行比较，因此您根本不需要调用`intValue()`。在比较之前，您`Integer`将自动将其*拆箱*为原始状态。`int`因此，将`if`while 中的语句替换为以下语句也可以：

```
if(iterator.next() == first) {
    iterator.remove();
} 
```

* * *

就您的第一种方式而言，我想说，`Iterator`如果您想修改`List`您正在循环的内容，请始终使用。这样可以防止你面对尴尬`ConcurrentModificationException`。

* * *

**也可以看看：**

*   [遍历集合，在循环中删除时避免 ConcurrentModificationException](https://stackoverflow.com/q/223918/1679863)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:36:20.263

倒计时（不倒计时）*：*

```
Object v1 = arraylist.get(0);
for (int i = arraylist.size() - 1; i > 1; i--) {
    if (arraylist.get(i).equals(v1))
       arraylist.remove(i);
} 
```

你必须倒计时，因为当你删除元素时，剩下的元素就会被拖下来。

此外，您应该更改`==`为`.equals()`（如图所示）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T19:37:45.577

您正在通过使用`Iterator`和它的方法做正确的方法`remove`。但是你应该在循环本身之前添加一个调用`next()`，以便遍历第一个元素而不是删除它。

```
ListIterator<Integer> iterator = arraylist.listIterator();
iterator.next(); // pass the first element.
while(iterator.hasNext()) {
  if(iterator.next().intValue() == v1)
  iterator.remove();
} 
```

与其他人所说的相反，如果 v1 是 an ，您不必使用“等于” `int`，这似乎是这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T19:53:13.803

最好在迭代数组（或可迭代列表）时小心从数组（或可迭代列表）中删除元素。

根据我的经验，最简单的方法是创建一个新列表。你可以考虑这样做吗？

查看您的代码，首先请记住使用“等于”而不是“==”进行比较（因为 .equals 表示“有意义的等效”，我认为这是您需要的）。（编辑：由于自动装箱在这里可能无关紧要，但这仍然是一个好习惯）

但即使这样也行不通：

```
for (int i = 1; i < arraylist.size(); i++) {
    if (arraylist.get(i).equals(v1))
        arraylist.remove(i);
} 
```

因为想象你有一个三个整数的 ArrayList，都是一样的。当 i == 1 时，将索引 1 处的元素与索引 0 处的值进行比较，然后将其删除。但随后索引 2 处的元素变为索引 1 处的元素，for 循环计数器递增，从而“丢失”以删除列表中的最后一个条目。

我可以推荐这样的东西吗？

```
List<Integer> newlist = new ArrayList<Integer>();
newlist.add(v1);
for (Integer integer : arraylist) {
    if (!integer.equals(v1))
        newlist.add(integer);
} 
```

祝你好运！

PS如果你觉得勇敢，你可以做一个简洁的单行： [CollectionUtils.filter(Collection,Predicate)](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html#filter%28java.util.Collection,%20org.apache.commons.collections.Predicate%29)

```
CollectionUtils.filter(arraylist.subList(1, arraylist.size()), new Predicate() {
    @Override
    public boolean evaluate(Object o) {
        return !v1.equals(o);
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T19:39:10.830

```
int v1 = arraylist.get(0);
for(int i = 0; i < arraylist.size(); i++) {
    if(arraylist.get(i) == v1){
       arraylist.remove(i);
       i--;
    }
} 
```

如果您不想使用迭代器方法：其他答案是正确的，因为您需要从零开始索引（如果您也想删除第一个），但您还需要减少迭代变量（`i--`行) 每次从列表中删除元素时，因为您正在使用 remove() 更改列表的长度。

# c# - 按钮上的图片的 XmlParseException

> ID：14925168
> 
> 赞同：1
> 
> 时间：2013-02-17T19:32:16.100
> 
> 标签：c#, wpf, exception, image

我想在按钮上插入一张图片，当我运行我的应用程序时，我有一个 XmlParseException。

我不知道为什么:(

```
<Button Grid.Column="2" HorizontalAlignment="Left" Height="20" Margin="15,2,0,0" VerticalAlignment="Top" Width="41">
    <Button.Background>
         <ImageBrush ImageSource="Images/search.png" Stretch="None"></ImageBrush>
    </Button.Background>
</Button> 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:44:14.073

确保您的 Visual Studio 项目包含一个`Images`文件夹，该文件夹又包含图像文件`search.png`。此外，图像文件的[Build Action](http://msdn.microsoft.com/en-us/library/0c6xyb66.aspx)必须设置为`Resource`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:41:58.973

您必须检查您的图像是否已将`Build Action`属性设置为`Resource`：

![在此处输入图像描述](../Images/e5c6680367d0a57b84067a23b97a02d2.png)

# php - 在 PHP 中使用 preg_match 提取价格

> ID：14925169
> 
> 赞同：1
> 
> 时间：2013-02-17T19:32:17.410
> 
> 标签：php, regex, preg-match

我有一个来自 file_get_contents() 调用的字符串，其中包含以下内容：

```
 <span class="cb_price_countdown cb_lot_price_1439066">$40.65</span> 
```

我想提取价格 40.65。我不熟悉 regex 或 preg_match 所以我很难。到目前为止，我已经尝试过：

```
 $pattern = "/\\\$?((\d{1,3}(,\d{3})*)|(\d+))(\.\d{2})?$/";
    preg_match ($pattern, $subject, $matches);
    print_r ($matches); 
```

这没有返回任何有用的东西，我已经尝试过：

```
 $pattern = "/[\d+|\d+,\d+]\.\d{0,2}/"; 
```

但这是同一个故事。有人可以告诉我我正在寻找的正确 preg_match 模式吗？

谢谢你，
贾斯汀

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T19:35:52.417

用这个：

```
preg_match ( '/\$(\d+\.\d+)/', $subject, $matches ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:39:22.243

```
$result = array();
$str = '<span class="cb_price_countdown cb_lot_price_1439066">$40.65</span>';
preg_match('/<span[^>]*>\$(.*)<\/span>/', $str, $result);
var_dump($result); 
```

产量：

```
array(2) { [0]=> string(61) "$40.65<" [1]=> string(5) "40.65" } 
```

# iphone - 设置最大和最小修剪长度 IOS

> ID：14925176
> 
> 赞同：1
> 
> 时间：2013-02-17T19:33:49.610
> 
> 标签：iphone, ios, objective-c, avfoundation

我正在使用 AVFoundation 框架中的 UIImagePickerController 从 iPhone 相机胶卷中选择一个视频剪辑，我已经对其进行了设置，以便用户能够通过修剪来调整视频的长度。有没有办法设置用户能够拥有视频的最大和最小长度，例如，我希望视频剪辑的最大长度为 15 秒，最小长度也为 15 秒。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-13T09:41:40.950

```
`imagePickerController.videoMaximumDuration = 15.0f;` // limits video length to 15 seconds. 
```

其中 imagePickerController 是`UIImagePickerController`.

使用`videoMaximumDuration`方法，您可以从两种方式限制视频的长度。就像您正在录制视频一样，会弹出一个警报，说您无法录制超过 15 秒的视频，并且如果您从库中选择任何视频文件，首先它会检查您的视频长度（如果长度超过 15 秒）。再次警报会弹出说视频大于 60 秒，但会有两个选项，即使用或取消。如果您选择使用，那么它将从头开始裁剪视频长度最多 15 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:43:54.747

UIImagePickerController 有一个可以设置的属性 videoMaximumDuration。

# google-chrome-extension - Chrome 扩展后台页面中的 Firebase 身份验证

> ID：14925179
> 
> 赞同：5
> 
> 时间：2013-02-17T19:33:54.103
> 
> 标签：google-chrome-extension, firebase

如何在 chrome 扩展中使用 Firebase 进行身份验证？我需要在 Forge 中指定允许的域列表。扩展的 Chrome 域只是一个大的类似哈希的字符串。

我确实读过这个：[authClient.login 问题](https://stackoverflow.com/questions/14299364/authclient-login-problems)

但是 Firebase forge 不接受基于散列的 chrome 扩展域。还有其他方法吗？目前我只是在读取 cookie`firebaseSessionKey`以假设我已登录。但这肯定不如让 Firebase 验证此会话密钥那样安全。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T01:41:03.823

As Rob points out, authentication cannot work in an environment that does not enforce origin restrictions. The fundamental problem here is that any authentication provider (Facebook, Twitter, Persona, or your own service) cannot issue an identity to a browser - i.e. it is meaningless to use Facebook to login to your browser (or extension).

The F1 add-on for Firefox ran into a similar problem ([http://f1.mozillamessaging.com/](http://f1.mozillamessaging.com/)) - where you would authorize F1 to post on twitter/facebook on your behalf. The extension had a website to along with it, from where you would serve the login page and proceed as you would normally in a web page. You'll need some code to communicate between the web page and your extension, chrome provides the tools necessary.

I would recommend the same approach - create a web page on a real domain (Github pages is awesome for this) to go along with your extension. This means your extension can't work offline, but neither can your login or writing to Firebase!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-02T20:36:12.683

这将使用 Google Plus Login Flow 工作，我相信这是唯一允许交叉身份验证的，因此范围是 Google Plus Login。

“www[dot]googleapis[dot]com/auth/plus.login”

所以这里发生的事情是，您将从您将使用 authwihtoauthtoken 指定 google 作为提供者的请求发送到 firebase 的扩展程序中获取 access_token 以及从 chrome.identity.getAuthToken() 获取的 access_token！

[https://www.firebase.com/docs/web/api/firebase/authwithoauthtoken.html](https://www.firebase.com/docs/web/api/firebase/authwithoauthtoken.html)

现在的事实是这个访问令牌可以由任何其他应用程序发出，所以我们需要确保它是有效的并且已经为我们的应用程序发出，基本上我们需要知道中间没有人试图访问我们的数据库。

该验证由火力基地进行。

他们将检查此令牌是否属于与该令牌已发行的应用程序相同的应用程序。

因此，您需要在 google 开发人员控制台中的同一应用程序下为您的扩展程序创建另一组凭据。我们将基本上做与为我们的网页做同样的事情，但我们将在他们的安全部分将这组新的凭据插入到 firebase 的 google oAuth。

他们会在那里为我们做这项检查。如果令牌是发给同一个应用程序的，他们将与谷歌进行验证。

而已。

背景信息。

[https://developers.google.com/identity/protocols/OAuth2UserAgent#validatetoken](https://developers.google.com/identity/protocols/OAuth2UserAgent#validatetoken)

**用例**

发送带有需要验证的请求的 ID 令牌。例如，如果您需要将数据传递到您的服务器，并且您希望确保特定数据来自特定用户。

**何时验证访问权限** 所有令牌都需要在您的服务器上进行验证，除非您知道它们直接来自 Google。您从客户端应用程序收到的任何令牌都必须经过验证。

谷歌有一个如何为 python 执行此操作的教程，位于：

“github[dot]com/googleplus/gplus-verifytoken-python”

所以基本上这里发生的事情是；相反，您在服务器上进行验证，当您将 CLIENT_ID 和 APP_SECRET 输入到 firebase 并启用 Google 身份验证时，firebase 会为您执行此验证。

正确执行此操作的方法是验证向谁发出 client_secret 的组合或相同样式。Chrome 会给你一个 access_token，然后这个 access_token 将在 firebase 的后端进行检查。

# magento - 如何配置多个 Tablerates 模块

> ID：14925183
> 
> 赞同：0
> 
> 时间：2013-02-17T19:34:10.063
> 
> 标签：magento

我正在尝试配置`Multiple Tablerates`模块。这是应该如何完成的：

如果`weight < 350`比`Shipping costs = 20`
如果`weight > 350 AND weight < 500`比`Shipping costs = 25`
如果`weight > 500 AND weight < 1000`比`Shipping costs = 45`

这是我的 CSV 内容：

```
USA,*,*,350.0000,20.0000,pp-ppp,Priority Mail International,Poczta Polska,value
USA,*,*,500.0000,25.0000,pp-ppp,Priority Mail International,Poczta Polska,value
USA,*,*,1000.0000,45.0000,pp-ppp,Priority Mail International,Poczta Polska,value 
```

但它不想不工作。很难解释确切的问题是什么，因为它是完全不可预测的（例如，重量为 0.3 和 0.7 的物品的运输成本是`45`）。谁能告诉我我的 CSV 文件是否正确？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:06:57.427

我不知道您是什么意思“多个 Tablerates”，但是对于标准的“Table Rate” ，CSV**中缺少标题行**。此外，最后三列是不必要的。

尝试导入这样的东西：

```
Country,Region,Zip,Weight,Price
USA,*,*,350.0000,20.0000
USA,*,*,500.0000,25.0000
USA,*,*,1000.0000,45.0000 
```

您还可以在数据库中的“shipping_tablerate”表中检查导入的数据。

# c# - 上传文件到asp服务器

> ID：14925185
> 
> 赞同：1
> 
> 时间：2013-02-17T19:34:20.483
> 
> 标签：c#, asp.net, webclient, webclient.uploaddata

我需要将文本文件从我的桌面应用程序上传到我托管的网络服务器，我已经按照本教程（[http://msdn.microsoft.com/en-us/library/36s52zhs.aspx](http://msdn.microsoft.com/en-us/library/36s52zhs.aspx)）但是当我运行我的代码。远程服务器返回错误 (500) 内部服务器错误。

客户端代码，即桌面应用程序。

```
String uriString = "http://localhost:3045/WebForm1.aspx";

// Create a new WebClient instance.
WebClient myWebClient = new WebClient();

string fileName = @"C:\Users\Administrator\Documents\Visual Studio 2010\Projects\FYP Modules\FileUploader\abc.txt";
MessageBox.Show("Uploading " + fileName + " To " + uriString);

// Upload the file to the URI. 
// The 'UploadFile(uriString,fileName)' method implicitly uses HTTP POST method. 
byte[] responseArray = myWebClient.UploadFile(uriString, fileName);

// Decode and display the response.
MessageBox.Show("\nResponse Received.The contents of the file uploaded are:\n{0}",
                System.Text.Encoding.ASCII.GetString(responseArray)); 
```

服务器端代码即asp.net webform

```
<%@ Import Namespace="System"%>
<%@ Import Namespace="System.IO"%>
<%@ Import Namespace="System.Net"%>
<%@ Import NameSpace="System.Web"%>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<Script language="C#" runat="server">

void Page_Load(object sender, EventArgs e) {

foreach(string f in Request.Files.AllKeys) {
    HttpPostedFile file = Request.Files[f];
    file.SaveAs("c:\\inetpub\\test\\UploadedFiles\\" + file.FileName);
}   
}

</Script>

<p> Upload complete.  </p>

</asp:Content> 
```

# c++ - 使用 Qt Creator 运行错误

> ID：14925188
> 
> 赞同：5
> 
> 时间：2013-02-17T19:34:37.553
> 
> 标签：c++, qt

我刚刚下载并安装了 Qt Creator。我没有弄乱 PATH 或任何其他设置。但是当我尝试运行一个 Qt GUI 应用程序项目时，它给出了以下错误：

```
cc1plus.exe:-1: error: error: unrecognized command line option "-fno-keep-inline-dllexport" 
```

输出说：

> 构建/部署项目 ProjectFirst 时出错（套件：Desktop Qt 5.0.1 MinGW 32bit）执行步骤“Make”时

我不明白为什么会这样。在问之前我在网上查了很多，但找不到任何东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T21:17:11.813

我刚刚在我朋友的电脑上发现了和你一样的问题。

键入 g++ --version 以查看 g++ 默认从您的路径中获取的内容。如果是 4.4.* (<= 4.7.2) 则找到旧的 g++ 并将其删除到垃圾箱。通常它与 Qt 配置所需的 Perl 包一起使用。

然后返回控制台并再次尝试 g++ --version 如果不是 4.7.2 然后再次查找旧的 g++ 并将其删除。

如果它写成 g++ : command not found 或类似的东西 - 改变你的 PATH 变量。更改后不要忘记重新启动计算机。

当您获得带有 4.7.2 的 g++ --version 时，期待获得成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:50:33.737

问题是您使用了错误的 mingw32 安装（旧版本）。

为了解决这个问题，请检查您使用的 Kit 是否检测到了正确的 Mingw 版本（应该是 4.7，它位于 qt 安装工具目录中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T23:19:28.073

尝试使用 nmake，而不是 mingw32-make

# php - 将 MySQL 查询结果拆分为多维数组

> ID：14925191
> 
> 赞同：0
> 
> 时间：2013-02-17T19:34:57.010
> 
> 标签：php, mysql, arrays, multidimensional-array, split

我从带有两个连接的 MySQL 查询中得到以下结果。

```
Array ( 
[0] => Array ( [place_id] => 1 [place] => Berlin [lat] => 52.519 [lon] => 13.406 [id] => 1 [pname] => Firstschool [typ] => 0 [s_id] => 32 [fac] => history) 

[1] => Array ( [place_id] => 1 [place] => Berlin [lat] => 52.519 [lon] => 13.406 [id] => 1 [pname] => Secondschool [typ] => 0 [s_id] => 33 [fac] => math)

[2] => Array ( [place_id] => 1 [place] => Berlin [lat] => 52.519 [lon] => 13.406 [id] => 1 [pname] => Secondschool [typ] => 0 [s_id] => 33 [fac] => english)
) 
```

数据在某些时候是多余的，我需要这样：

```
Array ( 
  [Berlin] => Array ( [lat] => 52.519 
                      [lon] => 13.406  
                      [schools] => Array([0]=> Firstschool [1]=>Secondschool)
  )

  [OtherCity] => Array ( ... )
) 
```

首先，这是可以的还是存在更好的解决方案？=）其次..如何将其拆分为所需的结果。

我尝试了类似以下代码片段的方法，但它没有按预期工作。

```
foreach($viewmodel as $item) { 
   $data[$item['place']][] = $item['pname'];
} 
```

结果是：

```
Array ( [Berlin] => Array ( [0] => Firstschool [1] => Firstschool [2] => Firstschool )) 
```

没那么有用。;)

我希望它可以理解我的需要。也许有人对如何解决这个问题有一个好主意。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:50:20.887

我认为您走在正确的道路上，只需要填写更多细节：

```
$cities = Array (
     Array ( 'place_id' => 1, 'place' => 'Berlin', 'lat' => 52.519, 'lon' => 13.406, 'id' => 1, 'pname' => 'Firstschool', 'typ' => 0, 's_id' => 32, 'fac' => 'history'),
     Array ( 'place_id' => 1, 'place' => 'Berlin', 'lat' => 52.519, 'lon' => 13.406, 'id' => 1, 'pname' => 'Secondschool', 'typ' => 0, 's_id' => 33, 'fac' => 'math'),
     Array ( 'place_id' => 1, 'place' => 'Berlin', 'lat' => 52.519, 'lon' => 13.406, 'id' => 1, 'pname' => 'Secondschool', 'typ' => 0, 's_id' => 33, 'fac' => 'english'),
);

// gather the transformed array in a new array 
$out = array();
foreach ($cities as $city) {
    // the first time we see the place
    if (!isset($out[$city['place']])) {
        // copy over what you want to keep
        $out[$city['place']] = array(
            'lat' => $city['lat'],
            'lon' => $city['lon'],
            'schools' => array($city['pname']),
        );
    } // only add $city['pname'] if we don't have it already
    elseif (!in_array($city['pname'], $out[$city['place']]['schools'])) {
        // we already seen this place, just add to the schools
        $out[$city['place']]['schools'][] = $city['pname'];
    }
} 
```

* * *

对于收集学院的问题，使用学校名称作为顶级数组的“学校”键中的数组键，像这样填充它们：（仍然跳过重复项）：

```
foreach ($a as $city) {
    if (!isset($out[$city['place']])) {
        $out[$city['place']] = array(
            'lat' => $city['lat'],
            'lon' => $city['lon'],
            'schools' => array($city['pname'] => array($city['fac'])),
        );
    } else {
        // for convenience and readability, introducing some variables
        $schools = &$out[$city['place']]['schools'];
        $pname = $city['pname'];
        $fac = $city['fac'];

        // if we didn't see this school yet, add it with it's faculty
        if (!isset($schools[$pname])) {
            $schools[$pname] = array($fac);
        } // if we did see this school before but the faculty is new, add it under the school's key
        else if (!in_array($fac, $schools[$pname])) { 
            $schools[$pname][] = $fac;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:49:50.143

你是对的，你必须以某种方式遍历数组。从我看到的数组中，假设所有学校的所有经纬度都相同，覆盖不会造成伤害，否则需要额外的逻辑

```
foreach($viewmodel as $item) {
  $data[$item['place']['lat']=$item['lat'];
  $data[$item['place']['long']=$item['lon'];
  $data[$item['place']['schools'][]=$item['pname'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T19:50:31.657

如果您使用的是 php 5.3+，则可以使用 lambda 函数映射数组

```
$output = array();

$sort_schools = function($value, $key)
{
    if ( ! is_array($output[$value['place'])
    {
        $output[$value['place'] = array();
    }

    if ( ! isset($output[$value['place']['lat'] && ! isset($output[$value['place']]['lon'])
    {
        $output[$value['place']]['lat'] = $value['lat'];

        $output[$value['place']]['lon'] = $value['lon'];
    }

    $output[$value['place']]['schools'][] = $value['pname'];
};

array_map($sort_schools, $viewmodel); 
```

或者，您可以在 foreach 循环或匿名函数中的 lambda 函数中使用类似的结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T20:05:16.467

以下应产生所描述的预期结果

```
$arr =  array( 
            array(  'place_id'  => 1,  'place'  => 'Berlin',  'lat'  => 52.519,  'lon'  => 13.406,  'id'  => 1,  'pname'  => 'Firstschool',  'typ'  => 0,  's_id'  => 32,  'fac'  => 'history'),
            array(  'place_id'  => 1,  'place'  => 'Berlin',  'lat'  => 52.519,  'lon'  => 13.406,  'id'  => 1,  'pname'  => 'Secondschool',  'typ'  => 0,  's_id'  => 32,  'fac'  => 'history'),
            array(  'place_id'  => 1,  'place'  => 'Berlin',  'lat'  => 52.519,  'lon'  => 13.406,  'id'  => 1,  'pname'  => 'Secondschool',  'typ'  => 0,  's_id'  => 32,  'fac'  => 'history')
            );

$result = array();

foreach($arr as $item) {
    if (array_key_exists($item['place'], $result)) {
        if (!in_array($item['pname'], $result[$item['place']]['schools'])) {
            array_push($result[$item['place']]['schools'], $item['pname']);
        }
    } else {
        $result[$item['place']]['lat'] = $item['lat'];
        $result[$item['place']]['lon'] = $item['lon'];
        $result[$item['place']]['schools'][] = $item['pname'];
    }
}

print_r($result); 
```

哪个应该输出

```
 Array (
     [Berlin] => Array
     (
         [lat] => 52.519
         [lon] => 13.406
         [schools] => Array
             (
                 [0] => Firstschool
                 [1] => Secondschool
             )

     )
) 
```

# netty - Netty 4.0.0.Beta1 ChannelHandlerContext.readable(boolean) 不见了，需要更换

> ID：14925199
> 
> 赞同：1
> 
> 时间：2013-02-17T19:36:06.270
> 
> 标签：netty

在 netty 4.0.0.AlphaX 中有`ChannelHandlerContext.readable(boolean)`暂停传入流量的方法。4.0.0.Beta1 的新文档仍然说：

> 在 4.0 中，每个 ChannelHandler 在其 ChannelHandlerContext 中都有自己的布尔标志，称为“可读”。该标志告诉处理程序是否希望 Netty 读取入站流量。

问题： readable(boolean) 方法没了，现在只能找到一个`ChannelHandlerContext.fireChannelReadSuspended()`方法。恢复交通怎么办？

有谁知道如何在 Beta1 升级后暂停/恢复 netty 4 管道上的传入流量？

谢谢你。

注意：“代理”示例仍然有一个 TODO：

```
// TODO: Suspend incoming traffic until connected to the remote host.
//       Currently, we just keep the inbound traffic in the client channel's outbound buffer. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:43:18.763

您现在可以为此使用 ChannelOption.AUTO_READ。如果要挂起，只需在 Channel 的 ChannelConfig 上将其设置为 false，并在您想自动重新开始读取时将其设置回 true。

现在，您甚至可以通过一直触发手动读取来走得更远，这有助于在编写代理示例时将内存占用降至最低。我今天早上刚刚更新了代理示例 [1] 以展示这一点。

[1] [https://github.com/netty/netty/tree/master/example/src/main/java/io/netty/example/proxy](https://github.com/netty/netty/tree/master/example/src/main/java/io/netty/example/proxy)

# c# - “T : new()”对泛型意味着什么？

> ID：14925211
> 
> 赞同：2
> 
> 时间：2013-02-17T19:37:30.233
> 
> 标签：c#, generics

我想了解该代码。我认为`T`必须`IContinentFactory's`实现类，但我不明白`new()`关键字的结尾。

```
class AnimalWorld<T> : IAnimalWorld where T : IContinentFactory, new()
{
.....
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T19:39:00.967

`T: new()`意味着类型 T 必须有一个无参数的构造函数。

通过您实际指定您可以`T param = new T();`在您的实现中编写`AnimalWorld<T>`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T19:39:03.380

`new()`意味着`T`必须有默认（无参数）ctor。

**[类型参数的约束（C# 编程指南）](http://msdn.microsoft.com/en-us/library/d5x73970%28v=vs.80%29.aspx)**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-17T19:39:45.723

约束`new()`意味着该类型`T`必须有一个公共的无参数实例构造函数。这包括所有值类型，但不是所有类。没有接口或委托类型可以有这样的构造函数。当`new()`约束存在时，`T`永远不能是抽象类。

当`new()`存在时，类中允许使用以下代码：

```
T instance = new T(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-17T19:40:16.047

```
class AnimalWorld<T> : IAnimalWorld where T : IContinentFactory, new() 
```

以下是声明的含义：

*   `AnimalWorld`是`class`带有泛型类型参数的`T`
*   该类`AnimalWorld`必须实现`IAnimalWorld`
*   类型参数`T`必须实现`IContinentFactory`
*   类型参数的类`T`必须有一个无参数的构造函数（这就是它的`new`用途）。

# iphone - 如何使用 `UIFileSharingEnabled=YES` 设置自定义文件夹？

> ID：14925214
> 
> 赞同：0
> 
> 时间：2013-02-17T19:37:39.313
> 
> 标签：iphone, ios, ipad, itunes

我已添加`UIFileSharingEnabled = YES`到应用程序的 .plist 文件中。现在我可能会在 iTunes 上的设备设置中看到一个文件夹（选项卡“应用程序”）：

```
My Folder 
```

但我需要访问此文件夹中的文件。

```
File1.txt
File2.txt 
```

如何在 iTunes 上将文件夹从根目录更改为我的文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:40:52.287

你不能。iTunes 仅显示应用程序`Documents`目录的内容。iTunes 不允许用户查看`Documents`.

# data-migration - 将数据迁移与 SSDT 发布相结合？

> ID：14925216
> 
> 赞同：1
> 
> 时间：2013-02-17T19:37:42.417
> 
> 标签：data-migration, sql-server-data-tools

是否有系统的方法将数据迁移脚本与 SSDT 发布相结合？

例如，部署需要新权限的新功能以一系列插入的形式添加到数据库中。

我知道我可以只编辑生成的发布脚本，但是如果需要重新生成脚本，您必须记住重新添加数据迁移脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:07:52.060

推荐的做法是使用部署后脚本。这篇博文进一步描述了这种方法：

[http://blogs.msdn.com/b/ssdt/archive/2012/02/02/including-data-in-an-sql-server-database-project.aspx](http://blogs.msdn.com/b/ssdt/archive/2012/02/02/including-data-in-an-sql-server-database-project.aspx)

# java - java扫描仪输入

> ID：14925220
> 
> 赞同：0
> 
> 时间：2013-02-17T19:37:49.807
> 
> 标签：java, input, java.util.scanner

我可以使用 java 的扫描仪从一个类中获取输出并将其用作另一个类的输入吗？我有一个 JFrame 打印这样的消息：

```
if(jButton1.getText().compareTo("SEND")>=0){
        String msg;
        int cod=0;
        if(jRadioButton1.isSelected()){ 
            if(jTextField1.getText().length()>=2) cod = Integer.parseInt(jTextField1.getText().substring(0, 2));
            if (codes.get(cod)!=null){
                msg=codes.get(cod).concat(jTextField1.getText().substring(2));
                System.out.println(msg);
            }
            jTextField1.setText("");
        }
        else{
            msg=jTextField1.getText();
            jTextField1.setText("");
            System.out.println(msg);
        }
    } 
```

和一个使用扫描仪从控制台获取消息的类：

```
Scanner scanIn = new Scanner(System.in);
for (int i = 0; i < NUM_MSGS; i++) {
    s = scanIn.nextLine();
    message.setText( "This is message " +s );
    System.out.println("Sending message: " + message.getText());
    producer.send(message);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:05:01.423

我认为你可以用一些复杂的方式做到这一点，但我可以建议只调用一个方法。假设您想要来自控制台和其他类的输入。然后，您可以创建一个`doSomethingWithInput(String msg)`从扫描仪类和 JFrame 调用的方法。

# string - VB6 >>从网站表中获取字符串

> ID：14925224
> 
> 赞同：1
> 
> 时间：2013-02-17T19:38:11.663
> 
> 标签：string, vb6, webpage

如何在指定的行和列中获取网站表中的字符串（不在数据库中！仅来自页面！），例如。从第 3 行和第 1 列和我的**VB6**程序得到那个字符串！：

姓名 | 年龄 | 网站 | 注意（原始 1）
亚历克斯 | 17 | 堆栈 | ------ ( 原始 2 )
**弗雷德**| 24 | 没有网站 | 你好（生3）

该表在网页上，我想从该表中获取存储在 raw 3 和列 1（名称列）中的字符串（这里的字符串是“ **Fred** ”）并将其保存在一个变量中。

请告诉我最简单的方法，因为我必须用大约 100 张桌子来做！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T06:31:44.890

在这里找到你正在寻找的东西：http: [//vbcity.com/forums/t/29011.aspx](http://vbcity.com/forums/t/29011.aspx)

甚至还有一个如何读取和遍历 HTML 表格的附加示例。您需要做的就是根据您的需要修改代码。

在此处下载示例：[VB6 HTML 示例](http://vbcity.com/cfs-file.ashx/__key/CommunityServer.Components.PostAttachments/00.00.12.13.88/ReadHTMLTable.zip)

# jquery - 为什么我的 jquery 脚本动画不起作用？

> ID：14925225
> 
> 赞同：0
> 
> 时间：2013-02-17T19:38:21.240
> 
> 标签：jquery, jquery-animate, browser-support

这是简单的背景位置动画。为什么鼠标移开的 IE 8 不对其进行动画处理？Opera 和 Firefox 不显示任何操作，只有 Chrome 做得很好。如何让它在所有最新版本的浏览器中工作？

```
$(function(){
$(".call_order").hover(function() {
    $(this).stop().animate({
        backgroundPositionX: "-300"
    }, 100);
} , function() { 
    $(this).stop().animate({
        backgroundPositionX: "0"
    }, 100);
}); 
```

});

[这是一个示例](http://selen-dar.ru/alexqem/Buhuchet/index2.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:29:52.683

Firefox 和 Opera 不支持`backgroundPositionX`and `backgroundPositionY`（因为它不在相应的规范中。）并且[IE8 似乎](http://reference.sitepoint.com/css/background-position#compatibilitysection)即使带有`background-position`.

**浏览器**支持**`backgroundPositionX`和`backgroundPositionY`：**

 **```
    浏览器版本
    ----------------------------
    不支持歌剧  
    不支持火狐  
    野生动物园 3+  
    浏览器 4+  
    Chrome 是（版本未知）  

```

所以，我建议你使用[**Brandon Aaron 的 jQuery 插件**](https://github.com/brandonaaron/jquery-cssHooks/blob/master/bgpos.js)来支持背景位置的跨浏览器。

如果您检查代码；它首先测试`backgroundPositionX`属性并查看浏览器是否支持它。如果不; `backgroundPosition`它从属性中解析出 X 和 Y 值。

*注意：与评论中建议的不同，CSS3 转换对您[**没有帮助**](http://caniuse.com/#feat=transforms2d)，因为您需要 IE8 支持。***

# linux - Unix返回电话号码，需要格式化

> ID：14925230
> 
> 赞同：1
> 
> 时间：2013-02-17T19:38:40.743
> 
> 标签：linux, bash, unix

我有这样的形式的数据

```
JSD4863 XXX-XX-XXXX DOE, JOHN C JR-II BISS CPSC BS INFO TECH 412/779-9445 

```

它是一个很大的列表，所以我做了一个循环来读取特定的行。看起来像这样

```
#!/bin/bash
for linePosition in {11..22}
do
  holder=`sed -n "${linePosition}p" $1|awk '{print $12}'`
  echo "$holder"
done 
```

它打印出数字`412/779-9445`。适用于所有行 但是，我只对最后 4 个数字感兴趣（例如`9445`）我可以在我的循环中添加什么来将其定界？我试过`cut`了，也许我的语法错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:44:08.663

请看以下内容。通过第一个命令，我将向您展示工作脚本的外观。使用第二个命令，我将向您展示示例脚本的输出。

```
$ cat a.sh
#!/bin/sh
sed -n '11,22p' $1 | grep -o '[0-9]*$'

$ ./a.sh a.txt
9445
9445
9445
9445
9445
9445
9445
9445
9445
9445
9445
9445 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:50:54.773

`sed -rn 's/.*-([0-9]{4})$/\1/p'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T20:16:55.750

仅限 awk：

```
awk 'FNR>=11 && FNR<=22 {print $12}' file 
```

sed + awk：

```
sed -n '11,22p' | awk '{print $12}' 
```

# .net - 什么是托管资源和非托管资源？

> ID：14925232
> 
> 赞同：1
> 
> 时间：2013-02-17T19:38:55.940
> 
> 标签：.net

我们什么时候应该进行内存管理以及我​​们如何对这两种类型的资源进行管理？托管和非托管资源的列表是什么？我们真的需要担心内存泄漏吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T19:40:57.327

托管资源是完全用 .NET 编写的资源。尽管通常不会发生经典的内存泄漏，但仍然可以通过不取消引用未使用的资源来泄漏内存（[最常见的原因是不取消注册事件处理程序](https://stackoverflow.com/questions/2526037/why-can-net-not-have-memory-leaks)）。

非托管资源通常是那些不是纯 .NET（并且在同一进程中）的资源 - 例如：

*   COM 组件
*   数据库连接/事务
*   窗把手
*   文件系统句柄
*   注册表句柄
*   网络连接
*   等等……等等……

对于这些，您需要[`Dispose`正确实施该模式，](https://stackoverflow.com/questions/574019/calling-null-on-a-class-vs-dispose/574659#574659)并确保在使用完它们后正确处理它们。

> 我们真的需要担心内存泄漏吗？

是的，我们确实需要担心它们，尤其是在 .NET 之外时。

# php - 使用宽度和高度在php中调整HTML大小？

> ID：14925233
> 
> 赞同：-1
> 
> 时间：2013-02-17T19:38:59.027
> 
> 标签：php, html, image, resize

我以为这会奏效，但事实证明这是不行的。

```
"<img src="images/'.$id'.jpg" width="244" height="182"/>" 
```

简单的 html 在这种情况下可以工作还是必须是 php 脚本？

附加信息：最初我将图像作为大图像上传，我想用调整大小来调用它，但它没有给我调整大小。

```
$dynamicList .= '<div class="productHead"><a href="product.php?id='.$id.'">'.$product_name.'</a></div>
<div class="productPicture"><a href="product.php?id='.$id.'"><img src="inventory_images/'.$id'.jpg" width="244" height="182"/></a></div>
<div class="goToProduct"><a href="product.php?id='.$id.'">Check Out Product</a></div>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:42:00.570

```
<?php

$element = '<img src="images/' . $id . '.jpg" width="244" height="182"/>'; 
```

肯定会工作。在您最初的问题中，您有未转义的引号。由于 HTML 使用双引号，因此在回显 HTML 时更容易使用单引号。所以你不必一直逃避它们。

如果您想稍后在某个地方使用它们，您可以将 HTML 元素作为字符串存储在变量中。

# python - Python：如何使用 getattr 获取对象属性的属性？

> ID：14925239
> 
> 赞同：8
> 
> 时间：2013-02-17T19:39:35.220
> 
> 标签：python, object, attributes

我如何评价

```
a = myobject.id.number 
```

如果 myobject 是，则返回 None`None`

内置`getattr`？也许`getattr(myobject, "id.number", None)`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T19:51:38.197

```
getattr(getattr(myobject, "id", None), "number", None) 
```

应该管用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-17T20:58:28.300

这应该可以很好地扩展到任何深度：

```
reduce(lambda obj, attr : getattr(obj, attr, None), ("id","num"), myobject) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-26T19:23:47.910

我最喜欢的是

```
from functools import reduce
try:
  a = reduce(getattr, ("id", "number"), myobject)
except AttributeError:
  a = None 
```

或者

```
from operator import attrgetter
try:
  a = attrgetter('id.number')(myobject)
except AttributeError:
  a = None 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T20:53:12.893

这是一个单行

```
a = myobject is not None and myobject.id.number or None 
```

它不检查 id 是否为 None，但这不是原始问题的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T19:51:04.377

考虑所有成员的稍微过于通用的解决方案：

```
if myobject and myobject.id and myobject.id.number:
    a = myobject.id.number
else:
    a = None 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-17T20:57:47.977

```
return myobject.id.number if myobject else None 
```

# wpf - 在 WPF 树视图中使用 SelectedItem

> ID：14925247
> 
> 赞同：1
> 
> 时间：2013-02-17T19:40:08.683
> 
> 标签：wpf, xaml, treeview, selecteditem

如何在树视图中使用 SelectedItem？我想将 i 绑定到我的模型。为什么树视图中的这个属性是只读的？是否有没有代码隐藏的 xaml 解决方案？

# grails - Grails 问题在关联列表中列出重复的姓氏

> ID：14925248
> 
> 赞同：0
> 
> 时间：2013-02-17T19:40:11.463
> 
> 标签：grails, groovy, grails-orm

我有一个带有两个域的脚手架 Grails 应用程序，Person 和 Course。Person 属于 Course，Course 有很多 Person。我已经修改了课程的 show.gsp 以列出与所选课程相关的所有人员。

我遇到的问题是显示给定课程中所有人员的列表没有显示数据库中姓氏重复的人员。例如，如果我有 4 个人：“John Doe”、“Jane Doe”、“Joe Doe”、“Edward Smith”，那么列表将只显示：

*   简·多伊
*   爱德华·史密斯

然而，所有 4 个人都存在于数据库中。此外，/person/list 将显示所有名称。所以问题只在于与课程相关的人员列表。请参阅下面的相关代码。有什么想法吗？

**个人域：**

```
class Person implements Comparable {

    static mapping = { sort lastName: "asc" }

    // Needed to sort association in Course domain (due to Grails bug)
    int compareTo(obj) {
        lastName.compareToIgnoreCase( obj.lastName );
    }

    String firstName
    String lastName
    String email

    Course course

    static belongsTo = [ course:Course ]

    static constraints = {
        firstName size: 1..50, blank: false
        lastName size: 1..50, blank: false
        email email: true
        course()
        firstName(unique: ['lastName', 'email'])
    }

    String toString() {
        return this.lastName + ", " + this.firstName;
    }
} 
```

**课程领域：**

```
class Course {

    int maxAttendance
    SortedSet persons

    static hasMany = [ persons:Person ]

    static mapping = {
        persons cascade:"all-delete-orphan"
    }

    def getExpandablePersonList() {
        return LazyList.decorate(persons,FactoryUtils.instantiateFactory(Person.class))
    }

    static constraints = {
        maxAttendance size: 1..3, blank: false
    }
} 
```

**为课程修改 show.gsp：**

```
<g:if test="${courseInstance?.persons}">
                <br />
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <g:sortableColumn property="person"
                                title="${message(code: 'person.lastName.label', default: 'Person')}" />

                        </tr>
                    </thead>
                    <tbody>
                        <g:set var="counter" value="${1}" />
                        <g:each in="${courseInstance.persons}" status="i" var="p">
                            <tr class="${(i % 2) == 0 ? 'even' : 'odd'}">
                                <td>
                                    ${counter}
                                </td>
                                <td class="property-value" aria-labelledby="persons-label"><g:link
                                        controller="person" action="show" id="${p.id}">
                                        ${p?.encodeAsHTML()}</td>

                            </tr>
                            <g:set var="counter" value="${counter + 1}" />
                        </g:each>
                    </tbody>
                </table>
            </g:if> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:54:36.947

您已使用 SortedSet 进行关联，并且 Person's`compareTo`认为具有相同姓氏的两个人是相同的，因此第二个和后续具有相同姓氏的人不会首先添加到集合中。

# android - android对话框将图标设置为标题

> ID：14925250
> 
> 赞同：5
> 
> 时间：2013-02-17T19:40:21.130
> 
> 标签：android, android-dialog

我有这个对话框类，我想将图标设置为它的标题：

```
public class DialogMealInformation extends Dialog implements
        android.view.View.OnClickListener {
    Context context;
    private TextView tv_information;
    private Button b_ok;
    private String information;

    public DialogMealInformation(Context context, String information) {
        // TODO Auto-generated constructor stub
        super(context);
        this.context = context;
        this.information = information;
        setContentView(R.layout.dialog_meal_information);
        getWindow().setLayout(android.view.ViewGroup.LayoutParams.FILL_PARENT,
                android.view.ViewGroup.LayoutParams.WRAP_CONTENT);
        setTitle("Info !");

        initialize();
    } 
```

它试过这样：

```
setTitle(R.layout.dialog_simple_header); 
```

### dialog_simple_header.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/tv_dialog_simple_header_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/tv_information"
        android:drawableLeft="@drawable/more_information" />

</LinearLayout> 
```

但之后的标题是“res/layout/dialog_simple_header.x”只是文本，没有出现图标，请问为什么，解决方案是什么，非常感谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-17T20:11:59.763

在任何`button`单击或`onActivity`您希望此对话框显示的任何位置上进行操作。以后一定要阅读我的评论`//`

```
AlertDialog alertDialog = new AlertDialog.Builder(
                    this).create();
            alertDialog.setTitle("TITLE"); // your dialog title 
            alertDialog.setMessage("Your message"); // a message above the buttons
            alertDialog.setIcon(R.drawable.ic_home); // the icon besides the title you have to change it to the icon/image you have. 
            alertDialog.setButton("Got IT", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) { // here you can add a method  to the button clicked. you can create another button just by copying alertDialog.setButton("okay")
                }

            });
alertDialog.show(); 
```

* * *

帮我个忙，删除这个

```
 public DialogMealInformation(Context context, String information) {
    // TODO Auto-generated constructor stub
    super(context);
    this.context = context;
    this.information = information;
    setContentView(R.layout.dialog_meal_information);
    getWindow().setLayout(android.view.ViewGroup.LayoutParams.FILL_PARENT,
            android.view.ViewGroup.LayoutParams.WRAP_CONTENT);
    setTitle("Info !");

    initialize();
} 
```

并添加我的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T19:54:21.003

这是一个带有自定义主题和视图的对话框

```
 final Dialog dialog = new Dialog(mContext,android.R.style.Theme_Translucent_NoTitleBar);
        dialog.setContentView(R.layout.dialog_layout_third);
        ImageView image = (ImageView) dialog.findViewById(R.id.image2);
        //image.setImageResource(R.drawable.ic_launcher);
        image.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                dialog.dismiss();
            }
        });

        dialog.show();
        dialog.setCancelable(false); 
```

在这里，我将主题设置为透明，然后`dialog.SetContentView`用于添加布局。在我的布局中，我只使用了一个`imageview`，这是我的对话框布局。

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:id="@+id/onetimeedit"
    android:visibility="visible"
    >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ImageView
            android:id="@+id/image2"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"

            android:src="@drawable/drag" />

    </RelativeLayout>

</FrameLayout> 
```

然后，您可以添加`textView`为标题，只需将其添加到布局中。和或使用`dialog.setTitle("MyTitleShouldByHere");`

希望我的示例为您清除它，如果您想要什么，请接受答案，以便其他人可以轻松解决。谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T19:47:08.657

如果您希望将标题文本设置为字符串资源，则使用 Dialog.setTitle(int resId)。

您正在寻找的是您已经在做的事情 - setContentView。在您的自定义 xml 中，使标题看起来像您喜欢的那样，或者 - 如果您希望在运行时设置它，只需获取对 ImageView 的引用并在代码中设置它。

希望这可以帮助。

# java - 在优化的情况下精确测量时间

> ID：14925251
> 
> 赞同：1
> 
> 时间：2013-02-17T19:40:25.203
> 
> 标签：java, optimization, time

```
long start = System.nanoTime ();           // 1
//whatever operations                      // 2
long elapsed = System.nanoTime () - start; // 3 
```

语句 1 和 3 是否有可能混在一起，以致我们无法精确测量时间？

--------------感谢所有反馈，让我们将代码更改为：

```
long start = System. currentTimeMillis ();           // 1
try { Thread.sleep (1000); } catch (Exception e) {}  // 2
long elapsed = System. currentTimeMillis () - start; // 3 
```

并将问题更改为：可以将 1 2 3 的执行重新排序为 1 3 2 吗？如果是这样，我们如何衡量 2 需要多长时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:47:16.993

即使您没有调用`System.nanotTime()`，JVM 或 CPU 也不会重新排序这些指令，因为您正在使用`start`分配给的表达式`elapsed`。在任何情况下，`System.nanoTime()`都必然会生成一个本机系统调用，这会阻止重新排序。

也就是说，对于任何有意义的时间测量，我希望调用之间的任何内容都`System.nanoTime()`至少包含数十万条指令，因此无论如何重新排序都是不可能的。

如果定时代码太短，任何计算机定时器固有的精度问题——包括某些操作系统提供的高分辨率定时器——将无法产生可用的定时结果。

# php - 服务器忽略 ini_set("log_errors_max_len", 20000)

> ID：14925252
> 
> 赞同：1
> 
> 时间：2013-02-17T19:40:29.247
> 
> 标签：php, logfiles

根据[手册](http://php.net/manual/en/errorfunc.configuration.php)log_errors_max_len

> 以字节为单位设置 log_errors 的最大长度。在 error_log 中添加了有关源的信息。默认值为 1024，0 允许根本不应用任何最大长度。此长度适用于记录的错误、显示的错误以及 $php_errormsg。
> 
> 使用整数时，该值以字节为单位。也可以使用本常见问题解答中描述的速记符号。

然而，即使我设置了这个设置，php 仍然允许这个文件达到无限的文件大小。在我的 php.ini 文件中，文件大小仍然限制为 1024，如手册中所述。它可能有什么问题或可能覆盖它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:56:43.083

`log_errors_max_len`设置单个错误消息的最大长度，它与日志文件大小无关。如果您不希望它增长太多，则需要设置日志轮换

# html - 1px 边框显示在 chrome 上

> ID：14925260
> 
> 赞同：-2
> 
> 时间：2013-02-17T19:41:01.977
> 
> 标签：html, google-chrome, css

在以下网页[http://achi.co/about.php](http://achi.co/about.php)

在页脚之前的底部，有许多框，每个框内都显示一个数字。在谷歌浏览器中，“+”和“6”在右边框上有一条 1px 的小线。

所有这些框在语义上与其他没有此 1px 行的框相同，并且此问题仅限于 chrome 和 firefox

我不确定它为什么被渲染以及如何摆脱它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:53:57.967

这不是一个边界。这是因为后面的元素（在悬停时显示）比前面的元素宽 1px。您应该尝试将这两个元素都设置为`width: 106px`.

事实上，如果您将浏览器窗口的大小调整为大约 760 像素宽，您会注意到红色突出部分远大于 1 像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:04:35.390

底层洋红色盒子的奇怪行为是因为：

> 在第 27 行的[1140.css](http://achi.co/css/1140.css)

```
.row .twocol {
    width: 13.44%;
} 
```

`width`将值更改为`13.48%`似乎可以解决此问题。

如果视口足够小，关于变得可见的边框：

如果不是故意的，一个简单的解决方法是在`margin-right`此处更改：

> 在第 452 行的[styles.css](http://achi.co/css/styles.css)

```
.lense {
    ...
    margin-right: -15px;
    ...
} 
```

至`-20px`

# java - 在这种情况下我应该使用继承还是组合？

> ID：14925261
> 
> 赞同：6
> 
> 时间：2013-02-17T19:41:02.443
> 
> 标签：java, oop, inheritance, composition

我正在编写一个简单的游戏，许多游戏对象共享属性。我有两个潜在的实现。

第一种是使用下图中指定的继承：

![类层次结构](../Images/20207105336ffa8ab80795f096c471fb.png)

如您所料，粗体类是抽象类。分支是实际使用的派生类。重要的是要注意这些类包含有关对象的数据，没有与它们关联的功能。

例如，Troop 和 Vehicle 有一个共同的接口，它们都用它来执行诸如 attack() 和 move() 之类的事情。上面概述的类层次结构只是原始统计信息。此外，它们都是真正的 ISA 关系。

第二种实现使用组合。每个抽象类都不是上面的类层次结构，而是包含某些数据成员的“模块”。因此，SpecialAbility 有一个名为 PointsValueObject 的数据成员（尽管我更改了抽象类的名称（尽管它们不再是抽象类）以反映它们的模块化/属性性质）。Troop 有数据成员：PointsValueObject、PhysicalObject、PhysicalAttackObject 和 BattleOBject，它们中的每一个都是包含有关部队数据的模块。同样，这些模块中不存在任何功能，它们仅用于存储数据。行为和功能仍然通过接口类实现。

我的问题是：人们通常更喜欢组合而不是继承，但在这种情况下，我倾向于坚持继承，因为 ISA 关系保持不变，层次结构不包含行为，只包含数据。这个层次结构是好的 OOD 还是使用属性“模块”更好地构建类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T19:55:23.773

如果没有代码被重用，你认为使用继承有什么好处？当行为相同时，继承对于 DRY（不要重复自己）很有用，但如果没有行为，您所做的一切可能会限制自己——如果您后来决定有一个需要较少数据的子层次结构，那么就没有一个好的解决方案这样做。

# javascript - 最小化对象

> ID：14925262
> 
> 赞同：0
> 
> 时间：2013-02-17T19:41:09.433
> 
> 标签：javascript

我有这样的代码：

```
var methods = {
    collapse: function(element) {
         modify(element);
    },
    other_method: function() {
         // ...
    }
};

function modify(element)
{
     console.log('collapse method');
} 
```

是否可以将方法缩小`collapse`到一行？所以它应该总是调用`modify`函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:43:06.393

试试这个：

```
var methods = {
    collapse: modify,
    other_method: function() {
         // ...
    }
};

function modify(element) {
     console.log('collapse method');
} 
```

因为我们有函数声明（不是表达式），`modify`所以在声明对象时是可见的`methods`。这里所做的只是设置`collapse`为等于`modify`' 的参考。

这与以下内容相同：

```
var modify = function (element) {
     console.log('collapse method');
}

var methods = {
    other_method: function() {
         // ...
    }
};
methods.collapse = modify; 
```

# html - Bootstrap流体布局，错误的边距？

> ID：14925263
> 
> 赞同：2
> 
> 时间：2013-02-17T19:41:26.003
> 
> 标签：html, css, twitter-bootstrap

**编辑：我意识到这可能是 Safari 的问题？我在 Firefox 中没有看到相同的内容**

下图取自 Bootstrap 文档，[此处](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)为。我想知道为什么最右边的“Fluid 6”元素右侧有 2px 的边距。该元素不应该一直向右对齐吗？我能做些什么来解决它？

![在此处输入图像描述](../Images/134ea4b35a50a002913c658533814d6e.png)

增强图像：![在此处输入图像描述](../Images/5e3feccff4dafb7258e9a19ee9c37596.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:25:51.080

不仅仅是`span6`，而是任何不是宽度的 100% 的东西。

![在此处输入图像描述](../Images/4caaa9043a62d9054f17390eedac7957.png)

请注意除了最后一行之外的所有内容都有这个问题。问题是 Bootstrap 将宽度指定为百分比。

例如，对于`span6`，

```
.span6 {
    width: 48.717948717948715%;
} 
```

两个span元素之间也有一个空格，

```
margin-left: 2.564102564102564%; 
```

将这些相加并不会产生一个很好的偶数，所以我们有时会在下一个像素。除了为宽度和边距设置固定值之外，没有什么可以做的。

`span12`有 100% 的宽度：

```
.span12 {
    width: 100%;
} 
```

正是这样，所以四舍五入没有问题。

# javascript - 优先于事件处理程序

> ID：14925265
> 
> 赞同：1
> 
> 时间：2013-02-17T19:41:30.637
> 
> 标签：javascript, jquery, events, handlers, operator-precedence

我不确定这是否是一个好问题，但我很想听听对此的一些意见。

想象有两种事件：

```
A: a mouse click
B: mouse is currently inside a box 
```

另外，假设有 2 种事件处理函数：

```
f: console.log("mouse is clicked")
g: console.log("mouse is clicked inside the box") 
```

现在我想要代码做的是，当鼠标在框内的任何地方单击时，显示消息“鼠标被单击”。但是，当鼠标在框内单击时，会显示消息“鼠标在框内单击”。

我目前的实现方式如下：

```
if (A) then {f()}
if (A and B) then {g()} 
```

简而言之，我将 f 注册为 A 的侦听器，并创建了一个在 A 和 B 都保持时触发的新事件，并将 g 注册为该事件的侦听器。

当然，当鼠标在框内单击时，我收到两条消息：“鼠标在框内单击”“鼠标被单击”

而不是我正在寻找的单个“鼠标在框内单击”。

是否有任何正式的方式来定义正在发生的事情，以及解决它的最佳方式是什么？简而言之，我希望事件处理程序 g 优先于处理程序 f，这样当 g 被调用时，它会抑制 f 的调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:46:47.980

您需要阅读的是 jQuery 中的事件冒泡和传播。

jQuery 事件处理程序回调将作为参数传递一个事件对象。这包含一个方法，可以调用该方法来停止事件传播，或“冒泡”到任何父处理程序。

对于您的示例，这意味着您可以将事件绑定到“鼠标被单击”的窗口/整个文档，然后仅将事件绑定到“鼠标在框内单击”的框 - 但阻止此事件到达父处理程序。

```
$(body).click(function() {
    console.log("mouse is clicked");   
});

$("#box").click(function(e) {
    e.stopPropagation();
    console.log("mouse is clicked inside the box");
}); 
```

## 在父处理程序上（事件冒泡）

更具体地说，处理程序本身没有父/子关系——它们只是直接绑定到 DOM 元素。具有父/子关系的是 DOM 元素本身。

在此示例中，`#box`是元素的子`body`元素（尽管可能与其他元素之间存在）。当在 上触发点击时`#box`，处理程序将检查元素，然后是元素的父级，然后是元素的父级的父级等......一直到 DOM 树。这将一直持续到事件停止冒泡或到达树的顶部。

通过这种方式，您可以在 box 内添加另一个元素并添加另一个处理程序来执行相同的操作，即`#button`- 如果您停止了事件的传播，则不会出现`#box`or`body`消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:52:15.963

这可以通过一个事件监听器来实现：

```
window.addEventListener('click', function (e) {
    if (document.getElementById('box').contains(e.target)) {
        alert('Box clicked!');
    } else {
        alert('Not box clicked!');
    }
}, false); 
```

或 jQuery：

```
$(window).click(function (e) {
    if ($('#box')[0].contains(e.target)) {
        alert('Box clicked!');
    } else {
        alert('Not box clicked!');
    }
}); 
```

# javascript - 将文本附加到用户鼠标“闪烁”的 iFrame 正文

> ID：14925267
> 
> 赞同：0
> 
> 时间：2013-02-17T19:41:32.727
> 
> 标签：javascript, jquery

我需要将面部图标附加到 iframe 的正文中。我遇到的问题是它放在正文的末尾，而不是用户插入点的位置。

这是我到目前为止的代码，

```
 <iframe style=""name="content" id="content" width="758" height="200" onload="javascript:load();"></iframe>

function angleFace()
{
$("#content").contents().find("body").append('<img title="Angle" src="/media/angle.png" alt="Angle">');
} 
```

我希望将脸放在用户插入点所在的任何位置。现在，这张脸被放在文件的末尾。

旁注 - 您输入 iFrame，然后在提交时将其传输到 textarea，然后输入数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:47:58.280

替换`.find("body")`为`.find("*:focus")`。这应该为您提供在 iframe 中具有焦点的元素。

然后使用该`.after()`方法在其后添加一个元素。

```
$("#content").contents().find("*:focus").after('<img title="Angle" src="/media/angle.png" alt="Angle">'); 
```

# database - 有没有办法在不使用触发器的情况下定义值的范围？

> ID：14925272
> 
> 赞同：0
> 
> 时间：2013-02-17T19:42:07.467
> 
> 标签：database, oracle

我被要求为表中的一个属性添加一个约束，以便该属性的值应该是介于 0 和 1 之间的浮点数。据我所知，float(a,b) 不适用于该任务。 .... 那么除了在 Oracle 中为这个问题编写触发器之外，还有更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:56:39.300

是的，使用检查约束。

```
SQL> alter table test modify id check (id between 0 and 1);

Table altered.

SQL> insert into test values (1.0);

1 row created.

SQL> insert into test values (1.01);
insert into test values (1.01)
*
ERROR at line 1:
ORA-02290: check constraint (SYS.SYS_C0013632) violated 
```

如果需要，您可以命名检查约束：

```
SQL> alter table test modify id constraint id_between_0_1 check (id between 0 and 1);

Table altered.

SQL> insert into test values (1.01);
insert into test values (1.01)
*
ERROR at line 1:
ORA-02290: check constraint (SYS.ID_BETWEEN_0_1) violated 
```

# android - 通过集成到您的应用程序中的 ZXing 获取 QR 扫描结果

> ID：14925276
> 
> 赞同：1
> 
> 时间：2013-02-17T19:42:25.800
> 
> 标签：android, android-intent, qr-code, zxing

我使用[这个答案](https://stackoverflow.com/a/4825803/1103584)创建了一个独立的 Android 库项目，其中包含 ZXing 源代码（ZXing v2.1）。它编译得很好，如果我运行 CaptureActivity，我可以按预期读取 QR 码。

我有另一个 Android 项目，我想从中提取这个库。我已经正确设置了该库关系。

我遇到的问题是，如何通过 IntentIntegrator（在[此处](http://code.google.com/p/zxing/wiki/ScanningViaIntent)提到）启动 ZXing 扫描仪的本地副本。

我尝试修改 IntentIntegrator.initiateScan() 方法以使用 CaptureActivity 的本地副本，并正确加载 QR 扫描仪。 **但是，一旦扫描了二维码，二维码信息就会显示在屏幕上，而不是在 onActivityResult 中将结果发送回我的调用活动。**

**如何让它将 QR 扫描结果发送到我的呼叫活动的 onActivityResult？**

作为参考，我将 IntentIntegrator.initiateScan() 方法更改为：

```
 public AlertDialog initiateScan(Activity act, Collection<String> desiredBarcodeFormats) {       

  //Hardcoding name of activity to call --> is this where I've gone wrong?
    Intent intentScan = new Intent(act, CaptureActivity.class);

    intentScan.addCategory(Intent.CATEGORY_DEFAULT);

    // check which types of codes to scan for
    if (desiredBarcodeFormats != null) {
      // set the desired barcode types
      StringBuilder joinedByComma = new StringBuilder();
      for (String format : desiredBarcodeFormats) {
        if (joinedByComma.length() > 0) {
          joinedByComma.append(',');
        }
        joinedByComma.append(format);
      }
      intentScan.putExtra("SCAN_FORMATS", joinedByComma.toString());
    }

//Commented this out because it didn't seem to find my class...

//    String targetAppPackage = findTargetAppPackage(intentScan);
//    if (targetAppPackage == null) {
//      return showDownloadDialog();
//    }
//    
//    
//    intentScan.setPackage(targetAppPackage);
    intentScan.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    intentScan.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
    attachMoreExtras(intentScan);
    startActivityForResult(intentScan, REQUEST_CODE);
    return null;
  } 
```

我正在像这样开始扫描：

```
IntentIntegrator integrator = new IntentIntegrator(getActivity());
integrator.initiateScan(getActivity()); 
```

我觉得我在这里错过了一些简单的东西，任何朝着正确方向的推动都会很棒。

**解决方案**

这就是最终的工作。我仍然以相同的方式调用它：

```
IntentIntegrator integrator = new IntentIntegrator(getActivity());
integrator.initiateScan(getActivity()); 
```

但是initialScan 方法现在看起来像这样：

```
 public AlertDialog initiateScan(Activity act, Collection<String> desiredBarcodeFormats) 
  {

    Intent intentScan = new Intent(BS_PACKAGE + ".SCAN");

    intentScan.addCategory(Intent.CATEGORY_DEFAULT);

    // check which types of codes to scan for
    if (desiredBarcodeFormats != null) {
      // set the desired barcode types
      StringBuilder joinedByComma = new StringBuilder();
      for (String format : desiredBarcodeFormats) {
        if (joinedByComma.length() > 0) {
          joinedByComma.append(',');
        }
        joinedByComma.append(format);
      }
      intentScan.putExtra("SCAN_FORMATS", joinedByComma.toString());
    }

    //THIS WAS THE KEY
    setSingleTargetApplication(act.getPackageName());

    String targetAppPackage = findTargetAppPackage(intentScan);
    if (targetAppPackage == null) {
      return showDownloadDialog();
    }

    intentScan.setPackage(targetAppPackage);
    intentScan.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    intentScan.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
    attachMoreExtras(intentScan);
    act.startActivityForResult(intentScan, REQUEST_CODE);
    return null;
  } 
```

重要的事情是确保 BS_PACKAGE 指向 CaptureActivity 包，您调用“act.startActivityForResult...”而不是“startActivityForResult...”，并且您调用 setSingleTargetApplication 的应用程序的包名称将调用扫描器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:10:23.020

尝试换行`startActivityForResult(intentScan, REQUEST_CODE);`

到`act.startActivityForResult(intentScan, REQUEST_CODE);`

您不需要注释包含的代码`findTargetAppPackage`，只需通过调用设置目标应用程序的包`setSingleTargetApplication()`（如果您是唯一使用此库的应用程序）

# c# - 布尔逻辑/真值表和输出

> ID：14925277
> 
> 赞同：3
> 
> 时间：2013-02-17T19:42:30.333
> 
> 标签：c#, winforms

我目前正在尝试复制一种将真值表转换为 C# 中的布尔表达式的方法。我已经能够生成一个 3 变量 (a,b,c) 真值表并将其显示在多行文本框中。我为每个输入的输出创建了另外八个文本框供用户决定：要么`true(1)` 或`false(0)`. 但是在生成表格之后，我如何才能显示所有具有`true`值的输出？

```
public partial class Form1 : Form
{
    public Form1() => InitializeComponent();

    string newLine = Environment.NewLine;
    bool a, b, c, d;

    private void Form1_Load(object sender, EventArgs e)
    {
        textBox1.AppendText(newLine + "A" + "\t" + "B" + "\t" + "C" + newLine);
        textBox1.AppendText("______________________________" + newLine);
        a = true; b = true; c = true;

        textBox1.AppendText(newLine + a + "\t" + b +  "\t" + c +newLine);
        textBox1.AppendText("______________________________" + newLine);
        a = true; b = true; c = false;

        textBox1.AppendText(newLine + a + "\t" + b + "\t" + c + newLine);
        textBox1.AppendText("______________________________" + newLine);
        a = true; b = false; c = true;

        textBox1.AppendText(newLine + a + "\t" + b + "\t" + c + newLine);
        textBox1.AppendText("______________________________" + newLine);
        a = true; b = false; c = false;

        textBox1.AppendText(newLine + a + "\t" + b + "\t" + c + newLine);
        textBox1.AppendText("______________________________" + newLine);
        a = false; b = true; c = true;

        textBox1.AppendText(newLine + a + "\t" + b + "\t" + c + newLine);
        textBox1.AppendText("______________________________" + newLine);
        a = false; b = true; c = false;

        textBox1.AppendText(newLine + a + "\t" + b + "\t" + c + newLine);
        textBox1.AppendText("______________________________" + newLine);
        a = false; b = false; c = true;

        textBox1.AppendText(newLine + a + "\t" + b + "\t" + c + newLine);
        textBox1.AppendText("______________________________" + newLine);
        a = false; b = false; c = false;

        textBox1.AppendText(newLine + a + "\t" + b + "\t" + c + newLine);
        textBox1.AppendText("______________________________" + newLine);

    }

    private void button1_Click(object sender, EventArgs e)
    {
        //Grab true value outputs and display in string
    }
} 
```

![在此处输入图像描述](../Images/53cb2a6cea68a04f377e596b35648da6.png)

![在此处输入图像描述](../Images/e7378599293037804a0f0655ad6f7f29.png)

上表是一个例子。我想以某种方式显示真实的输出值：

结果如下： FALSE TRUE TRUE TRUE FALSE TRUE TRUE TRUE FALSE TRUE TRUE False

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:55:13.240

尝试封装您的 TruthItem（以及计算 TruthValue 的逻辑）。那么使用真值表会很容易（生成、迭代、计算等）

这是示例控制台应用程序。它没有你的文本框，但你会明白的。

```
public abstract class ThreeItemTruthRow
{
    protected ThreeItemTruthRow(bool a, bool b, bool c)
    {
        A = a; B = b; C = c;
    }

    public bool A { get; protected set; }
    public bool B { get; protected set; }
    public bool C { get; protected set; }

    public abstract bool GetTruthValue();
}

public class MyCustomThreeItemTruthRow : ThreeItemTruthRow
{
    public MyCustomThreeItemTruthRow(bool a, bool b, bool c)
        : base(a, b, c)
    {
    }

    public override bool GetTruthValue()
    {
        // My custom logic
        return (!A && B && C) || (A && !B && C) || (A && B && !C) || (A && B && C);
    }
}

class Program
{
    static void Main(string[] args)
    {
        var myTruthTable = GenerateTruthTable().ToList();
        //Print only true values
        foreach (var item in myTruthTable)
        {
            if (item.GetTruthValue())
                Console.WriteLine("{0}, {1}, {2}", item.A, item.B, item.C);
        }
        ////Print all values
        //foreach (var itemTruthRow in myTruthTable)
        //{
        //    Console.WriteLine("{0}, {1}, {2}", itemTruthRow.A, itemTruthRow.B, itemTruthRow.C);
        //}
        ////Print only false values
        //foreach (var item in myTruthTable)
        //{
        //    if (!item.GetTruthValue())
        //        Console.WriteLine("{0}, {1}, {2}", item.A, item.B, item.C);
        //}
        Console.ReadLine();
    }
    public static IEnumerable<MyCustomThreeItemTruthRow> GenerateTruthTable()
    {
        for (var a = 0; a < 2; a++)
            for (var b = 0; b < 2; b++)
                for (var c = 0; c < 2; c++)
                    yield return new MyCustomThreeItemTruthRow(
                        Convert.ToBoolean(a),
                        Convert.ToBoolean(b),
                        Convert.ToBoolean(c));
    }
} 
```

**编辑（包括 WinForm 的示例代码）：**
使用和引用上面的类（ThreeItemTruthRow 和 MyCustomThreeItemTruthRow）。

```
public partial class MainForm : Form

{
    public MainForm()
    {
        InitializeComponent();
    }

private void GenerateButton_Click(object sender, EventArgs e)
{
    OutputTextBox.Clear();
    OutputTextBox.Text += "A\tB\tC\r\n";
    OutputTextBox.Text += GetHorizontalLineText();

    var myTruthTable = GenerateTruthTable().ToList();
    foreach(var item in myTruthTable)
    {
        OutputTextBox.Text += GetFormattedItemText(item);
        OutputTextBox.Text += GetHorizontalLineText();
    }
}
private void ShowTrueValuesButton_Click(object sender, EventArgs e)
{
    OutputTextBox.Clear();
    OutputTextBox.Text += "True Values\r\n";
    OutputTextBox.Text += "A\tB\tC\r\n";
    OutputTextBox.Text += GetHorizontalLineText();

    var myTruthTable = GenerateTruthTable().ToList();
    foreach(var item in myTruthTable)
    {
        if(item.GetTruthValue())
            OutputTextBox.Text += GetFormattedItemText(item);
    }
}
private static string GetHorizontalLineText()
{
    return "-----------------------------------------------\r\n";
}
private static string GetFormattedItemText(MyCustomThreeItemTruthRow item)
{
    return string.Format("{0}\t{1}\t{2}\r\n", item.A, item.B, item.C);
}
private static IEnumerable<MyCustomThreeItemTruthRow> GenerateTruthTable()
{
    for (var a = 0; a < 2; a++)
        for (var b = 0; b < 2; b++)
            for (var c = 0; c < 2; c++)
                yield return new MyCustomThreeItemTruthRow(
                    Convert.ToBoolean(a),
                    Convert.ToBoolean(b),
                    Convert.ToBoolean(c));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T21:16:10.290

创建将保存传感器输入并产生输出的类：

```
public class SensorInput
{
    public SensorInput(bool a, bool b, bool c)
    {
        A = a;
        B = b;
        C = c;
    }

    public bool A { get; private set; }
    public bool B { get; private set; }
    public bool C { get; private set; }
    public bool Output
    {
        // output logic goes here
        get { return A || B || C; }
    }
} 
```

然后将输入列表绑定到 DataGridView 控件：

```
var inputs = new List<SensorInput>()
{
    new SensorInput(true, true, true),
    new SensorInput(true, true, false),
    new SensorInput(true, false, true),
    new SensorInput(true, false, false),
    new SensorInput(false, true, true),
    new SensorInput(false, true, false),
    new SensorInput(false, false, true),
    new SensorInput(false, false, false)
};

dataGridView1.DataSource = inputs; 
```

默认情况下，布尔值将绑定到 CheckBoxColumns。如果您想将 True/False 作为文本，则手动添加四列。将它们的类型选择为（只读）TextBoxColumns，并提供用于绑定的属性名称。结果将如下所示：

![数据网格视图](../Images/d0e167715589ff12d56b98c066c87ce0.png)

对于输出等于*true*的过滤表，您可以使用 Linq。像这样：

```
dataGridView1.DataSource = inputs.Where(i => i.Output); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T21:49:37.413

创建几个类来保存您的数据。

```
public class TruthTable {

    public TruthTable(int sensorCount) {
      if (sensorCount<1 || sensorCount >26) {
        throw new ArgumentOutOfRangeException("sensorCount");
      }
      this.Table=new Sensor[(int)Math.Pow(2,sensorCount)];
      for (var i=0; i < Math.Pow(2,sensorCount);i++) {
          this.Table[i]=new Sensor(sensorCount);
          for (var j = 0; j < sensorCount; j++) {
              this.Table[i].Inputs[sensorCount - (j + 1)] = ( i / (int)Math.Pow(2, j)) % 2 == 1;
          }
       }
    }   

    public Sensor[] Table {get; private set;}

    public string LiveOutputs {
      get {
        return string.Join("\n", Table.Where(x => x.Output).Select(x => x.InputsAsString));
      }
    }

    public string LiveOutPuts2 {
    get { 
        return string.Join(" + ", Table.Where(x => x.Output).Select (x => x.InputsAsString2));
    }
  }
}

// Define other methods and classes here
public class Sensor {

  public Sensor(int sensorCount) {
    if (sensorCount<1 || sensorCount >26) {
      throw new ArgumentOutOfRangeException("sensorCount");
    }
    this.SensorCount = sensorCount;
    this.Inputs=new bool[sensorCount];
  }

  private int SensorCount {get;set;}
  public bool[] Inputs { get; private set;}
  public bool Output {get;set;}

  public string InputsAsString {
    get {
        return string.Join(" ",Inputs.Select(x => x.ToString().ToUpper()));
    }
  }

  public string InputsAsString2 {
   get {
      var output=new StringBuilder();
      for (var i=0; i < this.SensorCount; i++) {
        var letter = (char)(i+65);
        output.AppendFormat("{0}{1}",Inputs[i] ? "" : "!", letter);
      }
      return output.ToString();
    }
  }
} 
```

然后您可以创建一个真值表实例；

```
var table = new TruthTable(3); 
```

然后将适当的输出设置为 true

```
table.Table[3].Output=true;
table.Table[5].Output=true;
table.Table[6].Output=true;
table.Table[7].Output=true; 
```

然后`table.LiveOutputs`会给你

```
FALSE TRUE TRUE
TRUE FALSE TRUE
TRUE TRUE FALSE
TRUE TRUE TRUE 
```

会给`table.LiveOutputs2`你字符串

```
!ABC + A!BC + AB!C + ABC 
```

我用过！指示错误输入而不是上划线

编辑---关于winforms的评论后

自从我编写 winforms 代码以来已经有很长时间了，我通常使用 WPF。

如果您在代码级别添加控件，则某些代码取决于表单的生成方式...

```
private CheckBox[] checkBoxes;
private TruthTable table;
private int sensors;

//Call this function from the constructor....
void InitForm() {
   this.sensors = 3;
   this.table= new TruthTable(this.sensors);
   this.checkBoxes = new CheckBox[this.sensors];
   for (Var i = 0; i < this.sensors; i++) {
     this.checkBox[i] = new CheckBox();
     // set the positioning of the checkbox - eg this.checkBox[i].Top = 100 + (i * 30);
     this.Controls.Add(this.checkBox[i]);

     // You can perform similar logic to create a text label control with the sensors in it.
   }
}

private void button1_Click(object sender, EventArgs e) {
   for (var i=0; i<this.sensors;i++) {
      this.table.Table[i].Output = this.checkBoxes[i].IsChecked;
   }
   this.outputTextBox.Text = this.table.LiveOutputs2;
} 
```

# javafx-2 - 在不先保存到文件的情况下查看 FXML 代码？

> ID：14925279
> 
> 赞同：1
> 
> 时间：2013-02-17T19:42:40.153
> 
> 标签：javafx-2, scenebuilder

在 JavaFX 场景生成器中，是否可以在不保存到文件的情况下查看当前布局的 FXML 代码并查看保存的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:06:30.237

右键单击场景生成器中的根节点，然后选择复制。并将其粘贴到任何文本编辑器中。

![在此处输入图像描述](../Images/81ed5d881b6e4efdc07116152f808915.png)

输出 ：

```
<Group id="sb-clipboard" xmlns:fx="http://javafx.com/fxml">
  <fx:define>
    <AnchorPane id="AnchorPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0">
      <children>
        <Button id="button1" layoutX="140.0" layoutY="104.0" mnemonicParsing="false" text="Button" />
        <RadioButton id="radioButton1" layoutX="283.0" layoutY="172.0" mnemonicParsing="false" text="RadioButton" />
        <ToggleButton id="toggleButton1" layoutX="94.0" layoutY="234.0" mnemonicParsing="false" text="ToggleButton" />
      </children>
    </AnchorPane>
  </fx:define>
</Group> 
```

# objective-c - 如何将消息从实例方法发送到另一个类的对象

> ID：14925287
> 
> 赞同：0
> 
> 时间：2013-02-17T19:43:47.123
> 
> 标签：objective-c, class, inheritance, methods

我试图寻找关于这个（简单）问题的答案，但似乎没有什么效果很好，甚至书籍也不是那么具体（至少我读过的书），或者我可能只是错过了一些重要的东西，因为我有点困惑我决定在这里试试。

这是问题：

假设我有一个包含一个或多个实例变量的 ClassA。然后我有一个 ClassB，它包含一个修改 ClassA 变量的实例方法（这可能对吗？）这些类没有相互继承，都继承自 NSObject

然后我想在 UIViewController 上的 ClassA 对象上调用 ClassB 的方法。我相信我需要类之间的参考，但我不确定如何设置它们以使它们工作。想象一下，我有一张纸，其中包含写入或数字（在本例中为数字）和一个擦除类来修改它的变量和擦除数字（例如通过减法）。

这是一些代码：

纸.h

```
@interface Paper : NSObject

@property (nonatomic) int numbers;

@end 
```

论文.m

```
#import "Paper.h"

@implementation Paper

@synthesize numbers;

@end 
```

和 Eraser.h

```
@interface Eraser : NSObject

-(void)eraseMethod;

@end 
```

橡皮擦.m

```
#import "Eraser.h"

@implementation Eraser

-(void)eraseMethod {
//here I want to make a subtraction of the ivar declared in Paper
}

@end 
```

最后我试图像这样在 UIViewController 上调用它

```
[paperObject eraseMethod]; 
```

我尝试在每个文件中声明@class，就像我在某处读过的那样，但这对任何方式都没有帮助......我希望这是一个明确的问题

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-17T20:01:05.500

Ivars 只是存储槽，在没有指定访问条件的情况下它们是类私有的。您可以使用属性来从另一个类访问。[更多信息在这里](https://stackoverflow.com/questions/843632/is-there-a-difference-between-an-instance-variable-and-a-property-in-objecti)

为了实现您所说的，使该方法成为类方法， [请参见此处](https://stackoverflow.com/questions/1053592/objective-c-class-vs-instance-methods)

```
#import "Eraser.h"
@implementation Eraser

+(void)eraseMethod {
//here I want to make a subtraction of the ivar declared in Paper
}

@end 
```

因此您可以在您的 VC 中实现该方法。

# c++ - 多线程 - 在数组中我应该保护什么？

> ID：14925294
> 
> 赞同：2
> 
> 时间：2013-02-17T19:44:18.653
> 
> 标签：c++, c, multithreading, thread-safety, pthreads

我正在研究一些具有全局数组的代码，两个线程可以访问该数组以进行读写。

在读取或写入一系列索引的情况下不会进行批处理，因此我试图确定是应该锁定整个数组还是只锁定我当前使用的数组索引。

最简单的解决方案是将数组视为 CS 并在其周围放置一个大锁，但我可以避免这种情况并只锁定一个索引吗？

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T19:55:45.173

锁定一个索引意味着您可以跟踪哪个线程正在访问数组的哪个部分。跟踪在读取和写入线程之间共享的此信息意味着您对该信息有一个锁定。所以，你最终还是会得到一个全局锁。在这种情况下，我认为最有效的方法是： - 使用读取器/写入器锁 - 或将大数组分成几个子集，每个子​​集使用不同的锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:01:09.957

除非您在真实的运行条件下进行分析，否则无法知道什么是最佳的。我建议实现一个类似数组的类，您可以在其中锁定组中不同数量的元素。然后微调这些组的大小。

[另一种选择是使用活动对象](http://en.wikipedia.org/wiki/Active_object)将所有读/写操作排入队列。这将使所有访问都是顺序的，并且意味着您可以使用非并发数组类型来存储数据。它需要某种并发队列数据结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T19:56:05.660

如果这是 C++，我建议您使用 STL 容器。`std::vector`或其他适合您工作的东西。它们快速，易于使用，没有内存泄漏。

如果您想自己完成这一切，那么当然一种方法是使用单个互斥锁（这很糟糕）。或者你可以为整个数组使用一些[读写器。](http://en.wikipedia.org/wiki/Readers-writers_problem)

我认为用自己的锁使数组线程的每个元素都安全是不可行的！那会吃掉你的记忆。检查链接，有 3 种不同的解决方案。测试它们并为您的情况使用最好的。（不要想“好吧，我认为我的程序需要读者偏好算法”。尝试在你的系统中使用它并决定。因为我们*有时*真的不能假设这样的事情）

# jquery - 对于每个奇数表行，使用 jQuery 切换表单元格

> ID：14925295
> 
> 赞同：3
> 
> 时间：2013-02-17T19:44:20.010
> 
> 标签：jquery, html-table, drupal-6

我在 CMS 中工作，几乎无法控制 HTML。我依靠 jQuery 来操作这个表。我的客户想要为每一行交替标题和图像。

所需的布局看起来有点像这样：

```
[Image][Title]
[Title][Image]
[Image][Title]
[Title][Image] 
```

这是我正在使用的简化版本：

```
<tbody>
<tr class="odd">
    <td class="views-field-title"></td>
    <td class="views-field-field-services-image-fid"></td>
    <td class="views-field-value0"></td>
</tr>
<tr class="even">
    <td class="views-field-title"></td>
    <td class="views-field-field-services-image-fid"></td>
    <td class="views-field-value0"></td>
</tr>
<tr class="odd">
    <td class="views-field-title"></td>
    <td class="views-field-field-services-image-fid"></td>
    <td class="views-field-value0"></td>
</tr>
<tr class="even">
    <td class="views-field-title"></td>
    <td class="views-field-field-services-image-fid"></td>
    <td class="views-field-value0"></td>
</tr>
</tbody> 
```

我是 jQuery 新手，一直在努力使用 .each() 函数。这是我所能得到的：

```
$(".views-field-title").after($(".views-field-field-services-image-fid")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:54:47.857

您可以这样做来更改赔率的顺序，只需更改孩子的顺序

```
 $(function() {
        jQuery.each($(".odd"), function() { 
            $(this).children(":eq(1)").after($(this).children(":eq(0)"));
        });
    }); 
```

这是它工作的小提琴。[http://jsfiddle.net/77pHb/](http://jsfiddle.net/77pHb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:57:26.197

怎么样：

```
$("tr.odd .views-field-field-services-image-fid").after(function () {
    return $(this).prev();
}); 
```

这是发生了什么：

*   选择器返回每个奇数表行的每个“图像”列。
*   该[`.after`](http://api.jquery.com/after)函数可以带一个函数。该函数对 jQuery 对象中的每个项目执行一次。
*   在我们传递给的函数中，我们在迭代的当前项目*之后*`.after`返回我们想要插入的元素。在我们的例子中，我们希望元素直接位于我们正在查看的元素之前（“title”元素）。我们可以使用.*[`.prev`](http://api.jquery.com/prev)*

 ***示例：http:** [//jsfiddle.net/6zAN7/10/](http://jsfiddle.net/6zAN7/10/)*

# ruby-on-rails - 如何在 %a 标签中嵌套元素？

> ID：14925296
> 
> 赞同：2
> 
> 时间：2013-02-17T19:44:34.647
> 
> 标签：ruby-on-rails, tags, haml

我想在`%a`标签中包装一个事件 div 以使整个可点击。

这个块：

```
= link_to event_path(event.id) do
    .flipper
        .event-inner
            ... 
```

编译为：

```
<div class="event-container flip-container" ontouchstart="this.classList.toggle('hover');">
    <a href="/events/21"></a>
    <div class="flipper">
        <a href="/events/21"></a>
            <div class="event-inner"><a href="/events/21"></a>            
                ... 
```

我怎样才能得到一个独特的`%a`包装整体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:52:48.290

注意 HAML 中的缩进：

```
= link_to(event_path(event.id)) do 
  .flipper
    .event-inner
      your_code_here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:56:28.597

似乎 haml 不能编译良好的嵌套块。特别是，我在 .event-inner 中有辅助块。

我找到的解决方案是切换到能很好地管理这个问题的[苗条。](http://slim-lang.com/)此外，它的编译速度似乎快了 2 倍，并且它存在 haml 到 slim 转换器。

# objective-c - Cordova mac 默认窗口高度宽度

> ID：14925299
> 
> 赞同：0
> 
> 时间：2013-02-17T19:45:13.353
> 
> 标签：objective-c, xcode, cordova

[我刚刚从https://github.com/apache/incubator-cordova-mac](https://github.com/apache/incubator-cordova-mac)下载了 Cordova for mac 。

我没有做任何更改，所以我只是在 Xcode 中加载它并点击运行，但我想做的第一件事是指定窗口大小。我对 xcode 不是很熟悉，找不到对窗口大小的引用，我也找不到任何 nib 文件。

我将如何设置窗口大小？

*编辑*我使用了[如何以编程方式设置 NSView 大小？](https://stackoverflow.com/questions/4472920/how-to-set-nsview-size-programmatically)在我的 contentView 实现文件中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-17T19:49:59.720

Cordova 运行全屏，并且根据项目中包含的启动屏幕的大小将扩展到所有相应的设备。

如果您想在您的应用程序中嵌入 Cordova，您必须查看此处：[http ://docs.phonegap.com/en/2.4.0/guide_cordova-webview_index.md.html#Embedding%20WebView](http://docs.phonegap.com/en/2.4.0/guide_cordova-webview_index.md.html#Embedding%20WebView)

# macos - 更改崇高文本2中的键盘快捷键

> ID：14925302
> 
> 赞同：12
> 
> 时间：2013-02-17T19:45:34.127
> 
> 标签：macos, sublimetext2

如何将使用多个光标选择所有的当前键更改为 CMD + G？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-17T20:29:38.750

键盘快捷键在 Sublime Text 2 中被称为键绑定。[这里](http://docs.sublimetext.info/en/latest/customization/key_bindings.html)和[这里](http://www.sublimetext.com/docs/key-bindings)都有文档，将向您展示如何操作它们。单击“首选项”>“默认键绑定”以查看它们。将要编辑的内容复制并粘贴到“首选项”>“用户键绑定”中

例如

```
 <binding key="cmd+t,u" command="upperCase"/> 
```

如评论中所述，配置现在为 json 格式，用于更新的 Sublime Text。

例如

```
 { "keys": ["cmd+t,u"], "command": "snake_case" } 
```

# java - 分叉两个交互式 bash 进程会导致父进程停止或第二个 bash 进入后台

> ID：14925304
> 
> 赞同：1
> 
> 时间：2013-02-17T19:45:58.880
> 
> 标签：java, bash, process, fork, interactive

如果您在同一父进程（来自不同线程）中分叉（执行）两个交互式 bash 进程，则会导致父进程停止或第二个交互式 bash 进入后台，这进一步导致第二个 bash 由于交互式和后台属性的冲突而消耗 100% CPU .

这在 Linux 中发生，但在 Cygwin 中没有。

例子：

在同一个 Java 进程中（同样的事情发生在其他编程语言中）：

1.  线

    ```
    Process process1;
    String[] command1 = new String[] { "bash", "-l", "-c", "bash -i -l  2>&1" };
    process1 = Runtime.getRuntime().exec(command1); 
    ```

2.  线

    ```
    Process process2;
    String[] command2 = new String[] { "bash", "-l", "-c", "bash -i -l  2>&1" };
    process2 = Runtime.getRuntime().exec(command2); 
    ```

是什么导致了这种行为？

如果上面的示例在两个单独的进程中执行，则没有问题。因此，这些 bash 进程具有相同的根父进程（并且可能混淆 tty 和控制信号）似乎与事实有关。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:33:02.423

像这样使用单引号： bash -l -c 'exec bash -i -l 2>&1'

# javascript - 在链接文本本身旁边添加指向网站外部的链接的 URL

> ID：14925308
> 
> 赞同：1
> 
> 时间：2013-02-17T19:46:33.773
> 
> 标签：javascript, jquery, manual

我正在阅读*“JavaScript Missing Manual”*，并且有这个脚本会自动在这个链接本身旁边添加一个链接的 URL。

```
$('a[href^="http://"]').each(function(){
    var href = $(this).attr('href');
    href = href.replace('http://', '');
    $['a'].after(' (' + href + ') ');
}); // end each 
```

问题是它根本不起作用。有人可以解释一下这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:49:35.633

更改此行

```
$['a'].after(' (' + href + ') '); 
```

到

```
$('a').after(' (' + href + ') '); 
```

$ 应该作为函数调用，而不是数组。

虽然查看您的代码，但您可能想要这个：

```
$(this).after(' (' + href + ') '); 
```

* * *

编辑：

这是完整的代码：

```
$('a[href^="http://"]').each(function(){
var href = $(this).attr('href');
href = href.replace('http://', '');
$(this).after(' (' + href + ') ');
}); // end each 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:16:47.857

我可以建议一个类似但更短的版本吗？

```
$('a[href^="http://"]').each(function(){
    $(this).after(" ("+$(this).attr('href').replace("http://",'')+")");
}); // end each 
```

几乎 fmsf 的解决方案 + 一个小的修改，使代码有点短。o/

# ios - 函数 glGenFramebuffers 的隐式声明

> ID：14925309
> 
> 赞同：1
> 
> 时间：2013-02-17T19:46:34.087
> 
> 标签：ios, opengl-es

刚开始使用 Xcode 和 Open GL，我在我的 GL View 类中得到“函数 glGenFramebuffers 的隐式声明”。我正在进口

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>
#import <OpenGLES/ES1/gl.h> 
```

我也试过

```
#import <OpenGLES/EAGL.h>
#import <OpenGLES/ES1/gl.h>
#import <OpenGLES/ES1/glext.h> 
```

并清理所有目标，但警告仍然存在！这是什么意思？我必须导入什么才能让它消失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:06:10.813

您需要 import `OpenGLES/ES2/gl.h`，该`glGenFramebuffers`功能在 OpenGL ES 1 中不可用。如果您真的想使用 OpenGL ES 1，您需要使用`glGenFramebuffersOES`OES_framebuffer_object 扩展的一部分。

# php - Codeigniter：将用户输入传递给控制器 的推荐方法

> ID：14925310
> 
> 赞同：2
> 
> 时间：2013-02-17T19:46:48.397
> 
> 标签：php, codeigniter

我是 codeigniter 的新手，只是想确保我以正确的方式传递参数。

codeigniter 可以接受常规的 GET/POST 输入参数，可以使用输入类在控制器中访问。

1.  例如：$this->input->get/post('param1', TRUE);

2.  另一种方法是将其作为 [http://xyz.com/ci/index.php/cont/func/param1](http://xyz.com/ci/index.php/cont/func/param1)传递， 其中 param1 可用于 cont 中的方法作为 'func($param1){ }'

一个。在第二种情况下，CI 是自动清理用户输入还是由我决定（我猜是后者）？如果我必须这样做，那该怎么做？

湾。哪种是传递用户输入的推荐方式（1 vs 2）？

C。“启用/禁用查询字符串”的优缺点是什么？

d。在 CI 中，有没有办法像 Inspekt 那样清理/验证用户输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:07:43.553

**答案**

**A** 在第二种情况下，CI 是自动清理用户输入还是由我决定（我猜是后者）？如果我必须这样做，那么该怎么做？：

> **输入类** 第二个可选参数允许您通过 XSS 过滤器运行数据。通过将第二个参数设置为布尔值 TRUE 来启用它；

您可能*仍*需要对其进行消毒，具体取决于您将如何使用它。但对我来说，我仍然以我自己的方式对其进行消毒。关于我想要的样子。

**B**推荐的传递用户输入的方法（1 vs 2）是什么？：

我认为您使用输入的方式或选择没有限制，当数据来自时，`FORM input`您将使用`POST`，因为您无法传递表单输入`URL`，（或者您可能只是不推荐）样式，例如示例`2`，如果它来自一个`API`或其他一些来源，最好的方法是通过`GET`或 CI 的`$this->uri->segment()`功能。或者`function(param1)`方法

**C** '启用/禁用查询字符串'的优点/缺点是什么？：

好吧，即使它被禁用，您仍然可以使用查询字符串，我没有看到禁用或启用它的任何缺点或优点，

但是您可以简单地传递`www.example.com/?param1=foo&param2=bar`URI 并简单地使用`#this->input->get('param1')`来检索它，我使用了这么多，因为我必须在`URI`.

**D**在 CI 中，有没有办法像 Inspekt 那样清理/验证用户输入？：

如果您想要 inspekt 的功能，您可以将 inspekt 集成到 CI。

# java - oracle 11g r1数据库连接方法

> ID：14925312
> 
> 赞同：0
> 
> 时间：2013-02-17T19:46:50.680
> 
> 标签：java, jdbc, oracle11g

我正在尝试使用 Eclipse IDE 将 oracle 数据库与我的 java 程序连接，我已将 JDBC 驱动程序**ojdbc6.jar**添加到类路径中。

我正在使用：数据库是：**Oracle 11g r1 企业版**。操作系统：**windows 7 64bit**。JDK 版本：**1.7.0**。

我已经在浏览器中使用 url 为“localhost:1158”进行了测试，它打开了 oracle 登录页面，并使用用户名和密码成功登录为“SYSTEM”和“12345”，在我的代码中使用相同，但是在尝试运行 java 程序时一个例外。

我用于测试数据库连接的 java 程序是：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class Connect 
{
    public static void main(String[] args) {
        try {
            Class.forName("oracle.jdbc.OracleDriver");
            Connection con = DriverManager.getConnection("jdbc:oracle:thin:@//localhost:1158:v$instance","SYSTEM","12345");
            System.out.println("connected.."+con);
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

**例外情况是**：

```
java.sql.SQLException: The Network Adapter could not establish the connection
    at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:70)
    at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:133)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:199)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:480)
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:413)
    at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:508)
    at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:203)
    at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:33)
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:510)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at abhishek.Connect.main(Connect.java:12)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
    at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:328)
    at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:421)
    at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:630)
    at oracle.net.ns.NSProtocol.connect(NSProtocol.java:206)
    at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:966)
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:292)
    ... 7 more
Caused by: java.net.UnknownHostException: //localhost
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:127)
    at oracle.net.nt.ConnOption.connect(ConnOption.java:126)
    at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:306)
    ... 12 more 
```

谁能告诉我我做错了什么以及异常的含义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:52:27.813

端口`1158`用于 DbConsole 接口，不适用于 JDBC。

JDBC 应连接到的 Oracle 侦听器的默认端口是 port `1521`。

# c - C 二进制文件作为数组处理

> ID：14925322
> 
> 赞同：0
> 
> 时间：2013-02-17T19:47:31.703
> 
> 标签：c, file, binary

我想像访问数组一样访问文件，而不是使用 fopen() 和 fgetc()/fputc() 等。

我正在寻找一种方法，它会给我一个指向文件的指针，然后我可以将其视为一个大字符串（EOF 终止或给定长度，无论如何），我希望整个文件都在内存中，并且需要快速访问特定部分.

这可能吗？如果可以，您能推荐一种方法吗？我也很好奇为什么这不是在 c 中访问文件的默认方式，是因为文件通常不存储在连续的内存中吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:48:32.623

您正在寻找称为内存映射文件的东西。例如，如果您使用的是 Unix，请查找[`mmap`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/mmap.html).

```
fd = open(...);    
p = mmap(NULL, buf.st_size, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);

/* Use `p` like a pointer to some memory and fstat to find size. */ 
```

如果你在 Win32 上寻找[`CreateFileMapping`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366537)和[`MapViewOfFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366761).

# hadoop - 在 hdfs hadoop 中查看文件内容

> ID：14925323
> 
> 赞同：38
> 
> 时间：2013-02-17T19:47:36.560
> 
> 标签：hadoop

可能是一个菜鸟问题，但是除了复制到本地并通过 unix 读取之外，还有其他方法可以读取 hdfs 中的文件内容吗？

所以现在我正在做的是：

```
 bin/hadoop dfs -copyToLocal hdfs/path local/path

  nano local/path 
```

我想知道我是否可以直接将文件打开到 hdfs 而不是在本地复制它然后打开它。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-02-17T19:54:06.970

我相信`hadoop fs -cat <file>`应该做这项工作。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-04-20T06:33:59.473

如果文件很大（大多数时候都是这种情况），通过执​​行“cat”，您不想通过抛出文件的全部内容来炸毁终端。相反，使用管道并只获取文件的几行。

要获取文件的前 10 行，**hadoop fs -cat 'file path' | 头-10**

要获取文件的最后 5 行，**hadoop fs -cat 'file path' | 尾-5**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-12-30T02:09:38.163

如果您使用的是 hadoop 2.x ，则可以使用

```
hdfs dfs -cat <file> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-18T09:52:33.703

```
hadoop dfs -cat <filename>  or    hadoop dfs -cat <outputDirectory>/* 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-21T21:02:38.080

1.  SSH 到您的 EMR 集群`ssh hadoop@emrClusterIpAddress -i yourPrivateKey.ppk`
2.  运行此命令`/usr/lib/spark/bin/spark-shell --conf spark.eventLog.enabled=true --conf spark.eventLog.dir=hdfs://yourEmrClusterIpAddress:8020/eventLogging --class org.apache.spark.examples.SparkPi --master yarn --jars /usr/lib/spark/examples/jars/spark-examples_2.11-2.4.0.jar`
3.  列出我们刚刚创建的那个目录的内容，它现在应该有一个来自我们刚刚运行的新日志文件

    [hadoop@ip-1-2-3-4 bin]$ hdfs dfs -ls /eventLogging 找到 1 项 -rwxrwx--- 1 hadoop hadoop 53409 2019-05-21 20:56 /eventLogging/application_1557435401803_0106

4.  现在查看文件运行`hdfs dfs -cat /eventLogging/application_1557435401803_0106`

**资源**： [https ://hadoop.apache.org/docs/r2.7.3/hadoop-project-dist/hadoop-hdfs/HDFSCommands.html](https://hadoop.apache.org/docs/r2.7.3/hadoop-project-dist/hadoop-hdfs/HDFSCommands.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-21T10:56:39.110

我通常使用

```
$ hdfs dfs -cat <filename> | less 
```

这也有助于我在查看内容时搜索单词以找到我感兴趣的内容。

对于上下文无关的目的，例如了解文件中是否存在特定单词或计算单词出现次数，我使用。

```
$ hdfs dfs -cat <filename> | grep <search_word> 
```

注意：`grep`还有`-C`上下文选项，匹配后/前的行`-A`和行。`-B`

# asp.net - “/”应用程序中的服务器错误 - .ASPX Web 表单应用程序

> ID：14925324
> 
> 赞同：0
> 
> 时间：2013-02-17T19:47:46.493
> 
> 标签：asp.net

[http://cinicraft.com/VB/WebForm1.aspx](http://cinicraft.com/VB/WebForm1.aspx)

我无法让 .aspx 页面在线工作，当我调试时它们在离线模式下工作得很好。

我在 Visual Studio 2010 中发布了我的项目，但无论我尝试什么，我都被这个解析器错误所困扰。

有人可以向我解释这是什么意思吗？

```
Parser Error Message: Could not load type 'Assignment_1_MattAndrzejczuk.WebForm1'. 
```

为什么我会得到这个？

我已经编译了许多简单的 WebForm 应用程序，但我似乎无法让它们在线工作。为什么不能加载类型？整个周末我一直在为这个问题而烦恼，请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:51:02.170

您并没有给我们很多东西，但是如果我不得不猜测的话，我会说您缺少部署站点所需的东西。根据您完成部署的方式，我想您要么缺少 bin 目录，要么缺少该 .aspx 文件随附的 .vb 文件。

# java - JTextField 在事件处理的 JFrame 中太大

> ID：14925328
> 
> 赞同：0
> 
> 时间：2013-02-17T19:48:09.903
> 
> 标签：java, jtextfield

我是 JAVA 编程的新手，我正在尝试制作一个内存修改 GUI 程序，下面是代码。我的 JTextField 太大了有关如何解决此问题的任何建议？如果找到另一种方法来完成上述任务，我将不胜感激。感谢您的时间

```
JMenuBar menubar;
JMenu data,array,linkedlist,strings,stacks,tree,graphs,queues;
JMenuItem dtypeint,dtypefloat,dtypechar;

public GUI(){
    super("Data Structures Assignment");
    System.out.println("Select the Above mentioned Options for Memory Modification");
    setLayout(new FlowLayout());
    menubar = new JMenuBar();
    add(menubar);

    data = new JMenu("Basic Data Types");
    menubar.add(data);

    array = new JMenu("Arrays");
    menubar.add(array);

    linkedlist = new JMenu("Linked List");
    menubar.add(linkedlist);

    strings = new JMenu("Strings");
    menubar.add(strings);

    stacks = new JMenu("Stacks");
    menubar.add(stacks);

    tree = new JMenu("Tree");
    menubar.add(tree);

    graphs = new JMenu("Graphs");
    menubar.add(graphs);

    queues = new JMenu("Queues");
    menubar.add(queues);

    dtypeint = new JMenuItem("Integer");
    data.add(dtypeint);

    dtypefloat = new JMenuItem("Float");
    data.add(dtypefloat);

    dtypechar = new JMenuItem("Character");
    data.add(dtypechar);

    setJMenuBar(menubar);

    thehandler handler = new thehandler();
    dtypeint.addActionListener(handler);
    dtypefloat.addActionListener(handler);
    dtypechar.addActionListener(handler);
}
private class thehandler implements ActionListener{
    public void actionPerformed(ActionEvent event){

        if(event.getSource()==dtypeint){
            setLayout(new GridLayout());
            Frame F = new JFrame();
            F.setVisible(true);
            F.setSize(200,200);
            final JTextField item1;
            item1 = new JTextField("Word Size");
            item1.setColumns(15);
            F.add(item1);

        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:25:54.323

JFrame 的默认布局是 BoderLayout。默认情况下，一个组件被添加到 BorderLayout 的 CENTER 并且将调整大小以占用所有可用空间。所以你需要使用适当的布局管理器组合来获得你想要的效果。

也许有点像：

```
//F.add(item1);
JPanel panel = new JPanel(); // uses FlowLayout by default
panel.add(item1);
F.add(panel, BorderLayout.NORTH); 
```

阅读有关[布局管理](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)器的 Swing 教程以获取更多信息和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:08:15.337

*   删除`F.setSize(200,200)`.
*   在您的`F.add(item1)`行之后，添加`F.pack()`.
*   最后，移动这`F.setVisible(true)`条线，让它在这`F.pack()`条线之后；在完成构建之前，您不应该显示框架。

该`pack()`方法设置窗口的大小以适应它所包含的组件的首选大小。

# java - 我如何为java导入multimap？

> ID：14925329
> 
> 赞同：1
> 
> 时间：2013-02-17T19:48:17.007
> 
> 标签：java, map, multimap

这有点愚蠢，但我该如何安装[MultiMap](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/MultiMap.html)？

我需要一种将多个值存储到键的方法，而我的地图实现不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T20:11:30.237

那个类，`MultiMap`不是 Java 标准库的一部分。它是 Apache Commons 的一部分，[Apache Commons](http://commons.apache.org/)是许多 Java 开发人员认为有用的一组单独的实用程序类。Google 的实用程序库[Guava](https://github.com/google/guava)中提供了另一种`Multimap`实现（我会推荐） 。

无论哪种情况，为了使用这些类，您都需要下载项目分发的 jar，并在运行程序时将其添加到类路径中。您可以在命令行中执行此操作：在[命令行（javac 或 apt）](https://stackoverflow.com/questions/2096283/including-jars-in-classpath-on-commandline-javac-or-apt)或 Eclipse 中的类路径中包含 jars：[将 JAR 添加到 Eclipse Java 库](https://stackoverflow.com/questions/179024/adding-a-jar-to-an-eclipse-java-library)

如果您在 Google 上搜索诸如“安装 jars”和“将 jars 添加到 eclipse”之类的短语，那么如果您仍在苦苦挣扎，您会发现许多资源可以帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:49:01.057

多重映射类似于映射，但它可以将每个键映射到多个值。如果您自己的不起作用，您可以将[apache commons 集合](http://commons.apache.org/collections/)添加到您的类路径中。下载 jar 并将其包含在您的类路径中。

但是您也可以将自己的多图实现为：`HashMap<SomeObject, List<YourObject>>()`
Check example here under [multimaps](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T16:00:35.087

它不是 MultiMap 类，但我通过使用集合作为值来解决这个问题：

```
HashMap<String, ArrayList<Integer>> metrics = new HashMap<String, ArrayList<Integer>>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-27T15:47:14.590

multimap 实用程序的 Maven 依赖项

```
 <dependency>
    <groupId>org.solovyev</groupId>
    <artifactId>common-collections-multimap</artifactId>
    <version>1.0.3</version>
</dependency> 
```

# backbone.js - 访问骨干模型中的其他集合

> ID：14925343
> 
> 赞同：0
> 
> 时间：2013-02-17T19:50:15.710
> 
> 标签：backbone.js, collections, model, coffeescript

我有 2 个帖子集和一个模型，如下所示。

```
# router file
@posts = new MyApp.Collections.PostsCollection()
@posts.reset options.posts

@followed_posts = new MyApp.Collections.PostsCollection()
@followed_posts.reset options.followed_posts

# Post model file
class MyApp.Models.Post extends Backbone.Model
  paramRoot: 'post'

  follow_post: ->
    # ajax call
    console.log "_________Index:#{this.collection.indexOf(this);}"
    console.log this.collection
    console.log "_________Followed:"
    console.log @followed_posts

class MyApp.Collections.PostsCollection extends Backbone.Collection
  model: MyApp.Models.Post
  url: '/posts_all' 
```

我想做的是当一个模型中的一个模型在一个集合中更改时，我也想**更新另一个集合中的另一个模型**。

这些集合可能包含也可能不包含相同的模型。

因此，假设@posts 中的模型在我的 Post 模型中发生了变化，我也想在 @followed_posts 中更新该模型。如果@followed_posts 没有该模型，我需要将**模型的副本**添加到@followed_posts 集合。

我可以访问该模型所属的集合，但无法访问其他集合。任何想法表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T23:00:08.260

如果这两个集合是反社会的并且不能直接相互交谈，这通常是好的设计，那么你需要一个中介——一个全局事件调度器。当模型更改时，将该事件连同对该模型的引用一起传播到调度程序。侦听其他集合中的事件并使用传递的模型来检查是否存在并根据需要进行响应。

编辑：

Backbone 的[文档](http://backbonejs.org/#Events)提到了这种模式：

> 例如，要制作一个方便的事件调度器，它可以在应用程序的不同区域之间协调事件： var dispatcher = _.clone(Backbone.Events)

但事实上，这是一种常见的模式，[Backbone 对象本身是用 Events 扩展的](http://backbonejs.org/docs/backbone.html#section-26)。所以你可以这样做：

```
// In your Post model
@on "change", -> Backbone.trigger "post:change", this, @collection

// And then something like this in the collection class definition:
@listenTo Backbone, "post:change", (model, collection) => 
  if post = @get model.cid
    post.set model.toJSON()
  else
    @add model 
```

另外，关注的帖子是帖子的子集吗？如果是这样，为什么不在模型上添加一个属性来指定它呢？然后，您可以使用简单的过滤功能找到所有关注的帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T06:03:57.973

我强烈建议您应该考虑拥有一个集合并在模型中添加某种属性来区分它们是什么类型的帖子。

# linux - 无需密码即可访问 SMB 共享

> ID：14925345
> 
> 赞同：3
> 
> 时间：2013-02-17T19:50:25.540
> 
> 标签：linux, windows, ubuntu, smb, shared-directory

访问受密码保护的 SMB 共享时，`smbclient`工作正常。

但是当我尝试访问没有密码保护的共享（公共共享）时，`smbclient`打印：

```
tree connect failed: NT_STATUS_ACCESS_DENIED 
```

如何访问这些共享？

我正在尝试从我的 Ubuntu 12.10 访问 Windows 7

# jqgrid - jqgrid 列顺序

> ID：14925351
> 
> 赞同：3
> 
> 时间：2013-02-17T19:51:00.173
> 
> 标签：jqgrid

我有从 json 服务读取数据的 jqgrid

```
$('#list').jqGrid({
    url: 'jsonservice',
    datatype: 'json',
    mtype: 'GET',
    colNames: ['Id', 'Name', 'Street', 'City'],
    colModel: [
    { name: 'Id', index: 'Id', width: 55, align: 'center', width: '25' }
    { name: 'Name', index: 'Name', width: 120 },
    { name: 'Street', index: 'Street', width: 90 },
    { name: 'City', index: 'City', width: 50 },
    ]
}); 
```

json 服务返回这样的数据

```
{"page":1,
"total":37,
"records":722,
"rows":
[
    {"id":1,"cell":[1, "Sample name 1","Sample Street 2","Sample City 3"]},
    {"id":2,"cell":[2, "Sample name 2","Sample Street 2","Sample City 3"]}
]
} 
```

如何在不更改json数据顺序的情况下将显示列的顺序更改为例如名称、城市、街道、ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:02:56.783

在表单中使用[jsonReader](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data)的最简单方法

```
jsonReader: {repeatitems: false, id: "Id"} 
```

在这种情况下，表示行的数据应该是具有命名属性的对象：

```
{
    "page": 1,
    "total": 37,
    "records": 722,
    "rows": [
        {"Id":1, "Name":"Sample name 1", "Street":"Sample Street 2", "City":"Sample City 3"},
        {"Id":2, "Name":"Sample name 2", "Street":"Sample Street 2", "City":"Sample City 3"}
    ]
} 
```

该格式的主要缺点是增加了传输数据的大小。尽管如此，这将是解决您的问题的最简单方法。

另一种方法是`repeatitems: false`结合使用`jsonmap`. 它允许指定如何从数据行中读取每一列的数据。可以使用带点的名称`jsonmap`：

```
$('#list').jqGrid({
    url: 'Marcin.json',
    datatype: 'json',
    colNames: ['Name', 'Street', 'City', 'Id'],
    colModel: [
        { name: 'Name', width: 120, jsonmap: "cell.1" },
        { name: 'Street', width: 190, jsonmap: "cell.2" },
        { name: 'City', width: 90, jsonmap: "cell.3" },
        { name: 'Id', width: 55, align: 'center', jsonmap: "cell.0" }
    ],
    height: "auto",
    gridview: true,
    jsonReader: { repeatitems: false, id: "Id" }
}); 
```

[相应的演示](http://www.ok-soft-gmbh.com/jqGrid/Marcin.htm)看起来像

![在此处输入图像描述](../Images/872d01a4e575e6866b9551d0a07e16f0.png)

在更复杂的情况下，可以使用`jsonmap`作为函数从表示行的对象中读取列的项目。例如，可以将列`'Id'`的定义重写为以下

```
{ name: 'Id', width: 55, align: 'center',
    jsonmap: function (obj) { // "cell.0"
        return obj.cell[0];
    }} 
```

[修改后的演示](http://www.ok-soft-gmbh.com/jqGrid/Marcin_.htm)显示相同的结果。

# assembly - 理论上溢出堆栈..和组装

> ID：14925356
> 
> 赞同：2
> 
> 时间：2013-02-17T19:51:49.767
> 
> 标签：assembly, stack-overflow, buffer-overflow, shellcode

假设一个没有 aslr 的 x86 系统我想问以下问题；

1) 理论上说，当我们执行堆栈溢出攻击时，ebp 寄存器指向的值也会被新的返回地址覆盖。

现在，由于我们从不返回调用者函数，我们实际上并不需要 ebp 的原始值来恢复先前的堆栈帧，但是，ebp 寄存器必须始终指向某个地方。在 eip 寄存器开始指向我们的新 shellcode 之后，ebp 是如何设置的？更具体地说，两条汇编指令（leave-ret）中的哪一条会引发进一步的微指令，将 ebp 恢复为一个值？

2）最后但同样重要的是，我还想问一下，我们如何确保在我们的 shellcode 需要将几个值压入堆栈的情况下，这些值不会覆盖 shellcode 的任何部分？换句话说，我们如何确定任何 shellcode 生成的变量只会放在 shellcode 开始之前，而不是介于两者之间？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:12:51.480

1.当一个函数被调用时， 的值`esp`被复制到`ebp`，然后通过减少`esp`（通过`ENTER`指令或`push ebp`; `mov ebp,esp`;`sub esp, SIZE`指令序列）的值来分配该特定函数的堆栈帧。从这一点开始， 的值`esp`严格向上增长，因此不会干扰当前函数的堆栈帧。

当函数到达其末尾时，它通过上述步骤释放堆栈帧，但向后，即通过`LEAVE`指令，或`mov esp, ebp`；`pop ebp`; 指令序列。此时， 的值`esp`指向了返回地址，这就是攻击者要修改的地址。一旦这个值被修改，在`RET`指令执行时，修改后的返回地址被弹出，`eip`现在指向修改后的地址。

2\. 由于您的 shellcode 之上的任何内容都已“释放”，您只需通过上述相同步骤为您的 shell 代码分配堆栈帧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:42:58.323

回答您问题的第 2 部分：根据您正在制作的系统调用，您可能必须将一个值放入`esp`（作为 arg 数组）。如果这是 shellcode 的结尾，那么你很好。但是，如果 shell 代码还有更多内容，而您碰巧做了 a`push` *并且*碰巧指向了其余 shellcode 中的`esp`某个地方，那么您可能会遇到麻烦（因为此时您将编写自己的指令）。`sub $0x99, %esp`一个简单的解决方法是在 shellcode 的开头做一些事情。

编辑（回应评论）

也许我误解了你的问题。当您说“堆栈溢出”时，我认为您的意思是缓冲区溢出。如果我假设正确，请继续阅读。假设您确实在谈论经典的破坏堆栈类型的利用（根据您链接到的图片似乎就是这种情况），那么您正在用`nop`雪橇填充缓冲区，`shellcode`最后覆盖返回指针。外壳代码是“位置无关代码”。这意味着它是一系列指令，无论寄存器、标志等的当前状态如何，都可以执行。

通常，（这也是您发布的链接描述它的方式）您用 nop 填充缓冲区，然后是 shellcode，最后是指向 nop 雪橇中某处的返回地址。执行指令时`ret`，地址 in`%esp`被弹出`%eip`并`%esp`增加 4（在 x86 中）。问题是，如果你的 shellcode 有多个指令，这会产生*递减*`push`的副作用。如果你有足够的它们*并且*你的shellcode一直在最后（即与返回地址相邻），那么你最终可能会用指令覆盖你的shellcode。 *`%esp`*`push`**

 **所以，要真正回答你的问题。不，没有“机制”可以将你的 shellcode 与“它的堆栈”分开。这是因为您的 shellcode 本身没有堆栈。请记住，它是与位置无关的代码。无论机器状态如何，它都必须能够运行。任何需要进行的堆栈管理都必须由 shellcode 本身执行。这就是为什么如果代码中有很多语句，我建议`sub $0x99, %esp`在 shellcode 的开头使用a。`push`另一种选择是确保返回地址（`%esp-4`将指向）和您的 shellcode 之间有足够的空间。**

# javascript - 将文件读入 javascript 数组

> ID：14925357
> 
> 赞同：1
> 
> 时间：2013-02-17T19:51:53.650
> 
> 标签：javascript, webview

我知道 JS 不是服务器端脚本，但我正在构建一个移动应用程序，我将在 android 上使用 web 视图控制器，并希望能够将文件读入数组使用 JS。反正有这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:54:47.373

您可以使用[HTML5 FileReader API](https://developer.mozilla.org/en-US/docs/DOM/FileReader)。有了它，您可以将文件读取为：

```
void readAsArrayBuffer(in Blob blob); //Requires Gecko 7.0
void readAsBinaryString(in Blob blob);
void readAsDataURL(in Blob file);
void readAsText(in Blob blob, [optional] in DOMString encoding); 
```

这里有几个[例子](http://www.html5rocks.com/en/tutorials/file/dndfiles/)。

# ios - 对 Passbook 使用 Apple 推送通知 (APN) 时令牌无效

> ID：14925358
> 
> 赞同：10
> 
> 时间：2013-02-17T19:51:57.660
> 
> 标签：ios, push-notification, apple-push-notifications, passbook

我正在尝试为存折 APN 创建服务器端实现，但服务器不喜欢设备给我的推送令牌。如果我将令牌发送到 Apple 的沙盒服务器，它会向我发送“无效令牌”响应。如果我将令牌发送到 Apple 的生产服务器，它会将反馈服务中的令牌作为我应该从列表中删除的令牌返回。至少我知道 APN 证书和与服务器的连接工作正常。

我的 iPhone 4s 已启用开发。为开发和生产启用了 APP ID，并且在配置文件中启用了设备。我已经验证了 32 字节二进制令牌数据对于从设备发送的字符串令牌是正确的。

我的一个问题是，设备中的存折如何确定使用哪个令牌（开发与生产）？我现在更喜欢使用沙盒环境，但我不确定如何“选择”它。

我已经看到了类似的主题，但似乎没有一个问题的答案。这真的很令人沮丧，因为我觉得我离完成这项工作如此之近！提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-17T20:28:42.337

如果您使用生产证书连接到 APN 生产服务器，则必须使用生产令牌。

在向沙盒服务器发送通知时收到“无效令牌”这一事实意味着您正在使用生产令牌，该令牌仅适用于生产服务器。

将令牌发送到生产服务器会在反馈服务中返回令牌这一事实意味着与证书匹配的应用程序（您的服务器用于发送通知）要么从设备上卸载，要么已禁用推送通知。也许您使用了错误的证书（可能属于从设备上卸载的不同应用程序的证书）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T00:08:36.947

对于 Passbook 推送，您需要使用**Pass Type ID**证书而不是 App 证书连接到**生产服务器。**

 **所有 Passbook 推送都通过生产服务器，没有办法使用沙盒。

此外，对于 Passbook 推送，推送有效负载应该为空。您发送的任何内容都将被忽略。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-11T11:10:09.460

找到了这个问题的根本原因，这是因为私钥不正确。要解决此问题，只需使用 .pem 生成 .p12 证书。要使用 .pem 文件创建 p12 文件，请按照以下方法

[![脚步](../Images/cdd6157035268867d8bf0969a852e08a.png)](https://i.stack.imgur.com/IBqVk.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-04T22:43:08.863

以文本格式重写上述语句，以便您可以复制/粘贴它们。这对我有用，PushSharp 4.0.10 返回一个关于无效证书的错误，但是在原始公钥和私钥上执行这些命令可以解决问题：

```
openssl x509 -in aps.cer -inform DER -out aps.pem -outform PEM
openssl pkcs12 -nocerts -in mykey.p12 -out mykey.pem
openssl pkcs12 -export -inkey mykey.pem -in aps.pem -out iphone.p12 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-29T00:32:55.960

我坚持了一个小时，然后找到了解决方法：在 xcode 11 中：项目设置-> 唱歌和功能-> (+)-> 背景-> 勾选远程通知。**

# java - 从后端异步更新 UI

> ID：14925359
> 
> 赞同：0
> 
> 时间：2013-02-17T19:51:57.713
> 
> 标签：java

我正在处理一个有 java 进程的项目。这个过程每隔几个小时更新一次我的后端数据库表。每次完成表更新时，我都需要刷新我的 UI。我的 UI 是一个带有 html 表的简单 jsp，其中包含来自数据库表的数据。

知道我该怎么做吗？我在我的项目中使用 java.util.concurrent 包。据我了解，这更像是一个异步推送过程。任何想法都会受到赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:05:30.317

我认为这将帮助您[使用动态 UI 更新实现异步服务启动](http://docs.oracle.com/cd/E28271_01/fusionapps.1111/e15524/uc_async_dynamic.htm)

# java - Java JComboBox 抑制更改侦听器

> ID：14925361
> 
> 赞同：0
> 
> 时间：2013-02-17T19:52:18.463
> 
> 标签：java, swing, actionlistener, jcombobox

我的 JComboBox 上有一个 ActionListener，但我希望它仅在按 Enter 时触发，而不是在更改项目时触发，例如

```
comboBox.trigerActionListenerOnChange(false); 
```

希望这样的事情存在:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:21:49.960

使用以下客户端属性，ActionListner 只会在单击或使用 Enter 键选择项目时触发。

```
JComboBox comboBox = new JComboBox(...);
comboBox.putClientProperty("JComboBox.isTableCellEditor", Boolean.TRUE);
comboBox.addActionListener(...); 
```

# javascript - IE8 中缺少 PIE 线性渐变行为（但在 IE7 和 IE9 中工作）

> ID：14925362
> 
> 赞同：0
> 
> 时间：2013-02-17T19:52:20.833
> 
> 标签：javascript, jquery, css3pie

我正在使用 CSS3 属性来设置导航样式。我正在使用 background-image: linear-gradient 它适用于所有现代浏览器，但在 IE7-8 中缺乏支持。我依靠 PIE（v1，[http://css3pie.com](http://css3pie.com)）在旧的 IE 7 和 8 中实现。我尝试了 PIE 2 beta，但它对我不起作用。

问题是 PIE CSS3 属性的其余部分在站点上的所有浏览器中都有效，除了这个元素，在一个浏览器 (IE8) 中。

一个“last”类应用于容器中的最后一个顶级`<li>`元素`#navigation`。这发生在 JavaScript 中，`document.ready()`并且在 CSS 中 li.last 具有绿色渐变背景。我尝试将 JS 移到 document.ready() 之外，使其立即触发，并尝试将其放入其中，`window.load()`以便在 TypeKit 之后触发，对结果均无影响。

此元素的`background-image`属性在 IE9 中按预期工作。它甚至可以在 IE7 中按预期工作。但在 IE8 中，nada。页面中依赖 PIE 实现线性渐变和其他 CSS3 属性的所有其他元素都可以正常加载。

但是对于这个特定的元素，由于某种原因没有应用线性渐变背景图像。我在想这是因为 PIE 行为在我的 JavaScript 可以应用最后一个类之前运行，因为当我检查时，我确实看到其余属性（字体大小、颜色、浮点数）都已应用。这不是类继承的问题，因为其他`<li>`元素的样式没有任何背景属性。

以下是堆叠的屏幕截图（IE9、IE8、IE7）：

![在此处输入图像描述](../Images/749c0a8712f5b89aa82e7276ddf7a8b8.png)

**有任何想法吗？**有没有办法在 JS 可以应用最后一个类之前延迟加载 PIE 行为？这甚至是问题吗？我很困惑，因为它在 IE7 中工作......感谢您可能拥有的任何见解。

**这是我的 HTML（由 WordPress 生成）：**

```
<div id="navigation">
<ul>
<li id="menu-item-117" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-2 current_page_item"><a href="#">Home</a></li>
<li id="menu-item-118" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="#">Who We Are</a></li>
<li id="menu-item-123" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="#">Tree Projects</a></li>
<li id="menu-item-130" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="#">News + Resources</a></li>
<li id="menu-item-136" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="#">Order Online</a></li>
<li id="menu-item-139" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="#">Contact</a></li>
<li id="menu-item-140" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="#">Give Now</a></li>
</ul>
</div> 
```

**`<li>`这是 JavaScript（用于将“last”类应用于中的最后一个顶层`#navigation`）：**

```
$(document).ready( function(){
    $("#navigation > ul > li:last").addClass("last");
}); 
```

**CSS 和脚本按以下顺序加载：**

style.css > Typekit > JQuery > site.js（应用了“last”）

**这是我的相关CSS：**

```
#navigation ul,
#navigation li {
    display: inline-block;
    list-style-type: none;
    padding: 0;
    margin: 0;
}

#navigation > ul {
    width: 100%;
}

#navigation ul li ul {
    display: none;
}

#navigation li {
    margin: 0 6px;
    text-decoration: none;
    text-transform: uppercase;
    font-weight: bold;
    font-weight: 600;
    float: left;
    border-radius: 3px;
    zoom: 1;
}

#navigation a {
    color: #55D600;
    display: inline-block;
    padding: 11px 11px;
}

#navigation li.current-page-ancestor > a,
#navigation li.current-menu-ancestor > a,
#navigation li.current-menu-item > a {
    color: #fff;
}

#navigation li.last {
    margin: 0;
    float: right;
    background: rgb( 51, 171, 0 );
    background-image: linear-gradient(bottom, rgb(51,171,0) 0%, rgb(86,214,0) 75%);
    background-image: -o-linear-gradient(bottom, rgb(51,171,0) 0%, rgb(86,214,0) 75%);
    background-image: -moz-linear-gradient(bottom, rgb(51,171,0) 0%, rgb(86,214,0) 75%);
    background-image: -webkit-linear-gradient(bottom, rgb(51,171,0) 0%, rgb(86,214,0) 75%);
    background-image: -ms-linear-gradient(bottom, rgb(51,171,0) 0%, rgb(86,214,0) 75%);

    background-image: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0, rgb(51,171,0)),
        color-stop(0.75, rgb(86,214,0))
    );
    -pie-background: linear-gradient( rgb(86,214,0), rgb( 51, 171, 0) );
    color: #eee;
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.3) inset, 0 1px 0 0 rgba(255, 255, 255, 0.3);
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.4);
    border-radius: 3px;
    width: 116px;
    font-size: 1.2em;
}

#navigation li.last a {
    color: #fff;
}

#navigation a:hover {
    color: #fff;
}

#navigation li.last:hover {
    background: rgb( 58, 193, 0 );

    background-image: linear-gradient(bottom, rgb(58,193,0) 0%, rgb(94,223,3) 75%);
    background-image: -o-linear-gradient(bottom, rgb(58,193,0) 0%, rgb(94,223,3) 75%);
    background-image: -moz-linear-gradient(bottom, rgb(58,193,0) 0%, rgb(94,223,3) 75%);
    background-image: -webkit-linear-gradient(bottom, rgb(58,193,0) 0%, rgb(94,223,3) 75%);
    background-image: -ms-linear-gradient(bottom, rgb(58,193,0) 0%, rgb(94,223,3) 75%);

    background-image: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0, rgb(58,193,0)),
        color-stop(0.75, rgb(94,223,3))
    );
    -pie-background: linear-gradient( rgb(94,223,3), rgb( 58, 193,0) );
    font-size: 1.2em;
    color: #fff;
}

#navigation,
#navigation li {
    behavior: url(js/PIE.htc);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:54:41.480

感谢@FelipeAls 和@Spudley 在评论中的见解，我能够解决这个问题。

使用@FelipeAls 的建议，我将该类硬编码到WordPress 的菜单编辑器中，并删除了应用该类的JavaScript。这有助于确保应用类并呈现 PIE 行为。但是，问题依然存在。

@Spudley 走在了正确的轨道上，它让我找到了这个PIE 的[已知问题文档](http://css3pie.com/documentation/known-issues/ "已知问题文档")。就像添加`position: relative;`到`#navigation li.last`.

```
#navigation li.last {
    [...]
    position: relative;
} 
```

我不知道我是怎么错过的，因为我实际上是在今天早些时候的“已知问题”页面上试图诊断为什么 v2.0 无法识别自定义 JavaScript 路径。

感谢大家的帮助！

# ruby-on-rails-3 - delay_job - NameError - 未初始化的常量

> ID：14925364
> 
> 赞同：0
> 
> 时间：2013-02-17T19:52:30.723
> 
> 标签：ruby-on-rails-3, delayed-job, nameerror

我有这个位于`/lib/jobs/MessageNotificationJob.rb`

```
class MessageNotificationJob < Struct.new(:user_id, :message_id)  

  def perform

        @user = User.find(user_id)
        @message = Message.find(message_id)
    if !message.reciever_open
        MessagesMailer.message_notification(@user, @message ).deliver

    end

  end
end 
```

`MessagesController`我从with中的方法调用它

```
Delayed::Job.enqueue(MessageNotificationJob.new(@user.id, @msg.id)) 
```

在我的`application.rb`我有

```
config.autoload_paths += Dir["#{config.root}/lib/**/"] 
```

但我得到了错误

```
 NameError - uninitialized constant MessagesController::MessageNotificationJob: 
```

我该如何解决？我尝试了几种变体，这是最新的变体，作为类似问题的解决方案。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:33:18.140

I haven't used the latest DelayedJob, but it looks an awful like the delayed job doesn't have the MessageNotificationJob class loaded when it runs. Try the following:

```
# file: config/initializers/custom.rb
require 'message_notification_job' 
```

See also [this wiki entry](https://github.com/collectiveidea/delayed_job/wiki/Common-problems#wiki-jobs_are_silently_removed_from_the_database) -- I think newer versions of DJ improved the error message (rather than silently failing), but the underlying cause is the same.

# networking - 在 NS-3 中使用跟踪文件

> ID：14925370
> 
> 赞同：0
> 
> 时间：2013-02-17T19:53:29.860
> 
> 标签：networking, network-programming, ns-3

我想知道如何在 ns-3 示例文件夹中给出的示例中使用您自己的视频跟踪。

我需要在这行代码中进行更改吗？

UdpTraceClientHelper 客户端（服务器地址，端口，“该视频跟踪的 URL 地址”）

我正在寻找来自该站点的视频痕迹：

[http://trace.eas.asu.edu/mpeg4/single/SonyCIF_G16B1Mp/SonyCIF_G16B1Mp01/](http://trace.eas.asu.edu/mpeg4/single/SonyCIF_G16B1Mp/SonyCIF_G16B1Mp01/)

在 url 地址中，我使用的是详细跟踪文件的地址。这是正确的方法吗？

当我这样做时，它仍然使用默认的硬编码文件作为跟踪文件。

简而言之，我想知道如何在 ns3 中使用视频跟踪文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:30:59.220

这很简单，您下载文件并将其保存到项目中的某个位置（您可以替换您命名的“默认硬编码文件”）；）

# wpf - 如何实现转换器

> ID：14925371
> 
> 赞同：0
> 
> 时间：2013-02-17T19:53:34.120
> 
> 标签：wpf, silverlight, xaml, winrt-xaml

我有一个绑定到屏幕的对象列表。属性之一是 isPurchased。它是一个布尔类型。

我对转换器没有太多经验，所以我觉得这有点困难。我有 2 个问题。

第一个问题是关于语法的。[我从这里](http://www.irisclasson.com/2012/10/10/winrt-app-guide-step-11-using-a-valueconverter-to-work-with-element-visibility/)复制了这个例子。

```
 public class purchasedConverter : IValueConverter
    {
       public object Convert(inAppPurchases value, Type targetType, object parameter, string language)
        {
            return;
        }
    } 
```

如果`isPurchased == true`那么我想将我的堆栈面板的背景颜色设置为不同的颜色。

我改为`object value`使用`inAppPurchases value`Convert 方法。但是，无论我尝试什么，我都无法获得对背景的引用。

我想我想`return Background="somecolor"`

我的第二个问题（假设我可以做第一部分），我正在使用 Microsoft WinRT 项目附带的 StandardStyles.xaml 所以我的转换器会存在那里。

```
 <StackPanel Grid.Column="1" VerticalAlignment="Top"
 Background="CornflowerBlue" Orientation="Vertical" Height="130"
 Margin="0,0,5,0"/> 
```

但是，就像我说的那样，我之前已经尝试过，但我无法弄清楚如何将转换添加到我的 .xaml 文件中。我会在哪里引用转换器？它是在 StandardStyls.xaml 上还是在我正在查看的主要 .xaml 上？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:08:37.803

`Background`的属性`StackPanel`是`Brush`（[Panel.Background msdn](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.background.aspx)）的类型，因此我们可以`SolidColorBrush`从`Convert`方法返回类型的对象。

您的转换器应如下所示：

```
class PurchasedConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        // isPurchased is bool so we can cast it to bool
        if ((bool)value == true)
            return new SolidColorBrush(Colors.Red);
        else
            return new SolidColorBrush(Colors.Orange);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

接下来，您必须在 XAML 中创建此转换器的实例：

```
<Window.Resources>
    <con:PurchasedConverter x:Key="pCon" />
</Window.Resources> 
```

现在你可以使用这个转换器来绑定`Background`属性`StackPanel`：

```
<StackPanel VerticalAlignment="Top" Orientation="Vertical" Height="130"
         Background="{Binding isPurchased, Converter={StaticResource pCon}}" 
         Margin="0,0,5,0" >            
</StackPanel> 
```

# iphone - 转换为以编程方式查看 ios

> ID：14925377
> 
> 赞同：0
> 
> 时间：2013-02-17T19:54:00.247
> 
> 标签：iphone, ios, objective-c, uiview, uistoryboardsegue

我有一个执行任务的视图，当任务完成时，活动指示器将被隐藏，我想在活动完成时将用户发送到另一个视图，或者如果不成功则给用户一个错误。到目前为止，我正在使用 If Else 语句来发出成功警报或错误警报。没有可单击的按钮或任何东西，只需在活动完成后，用户将被发送到另一个视图，并在此过程中传递一些变量。

完成后如何将用户发送到另一个视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:01:01.630

如果您使用导航控制器：

```
 [self.navigationController pushViewController:theNextViewController animated:YES]; 
```

对于 Storyboard，请在文档中查找方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T05:07:32.087

稍微详细说明一下 AlexWien 的回答......

*   创建您希望用户在完成后转到的视图控制器或表视图控制器类。
*   为要传入的数据创建一些属性。

* * *

```
@protocol UpdatePricesDelegate;

@interface NXUpdatePricesViewController : UITableViewController

@property (strong, nonatomic)   NSArray *calculationProducts;
@property (strong, nonatomic)   NSArray *filteredCalculationProducts;

@property (weak, nonatomic)     id<UpdatePricesDelegate>delegate;

@end

@protocol UpdatePricesDelegate <NSObject>

- (void)updatePricesController:(NXUpdatePricesViewController *)controller didUpdateCalculationProducts:(NSArray *)calculationProducts;

@end 
```

* * *

*   当您准备好显示您的控制器时（大概在您的 If/Else 语句中），实例化该类（不要忘记#import "MyClassName.h"）并将属性设置为您要传递的变量。
*   以模态方式呈现类（示例包括导航控制器），或者如果您想推送视图，请使用导航控制器。

* * *

```
NXUpdatePricesViewController *updatePricesController = [[NXUpdatePricesViewController alloc] initWithStyle:UITableViewStyleGrouped];
updatePricesController.delegate = self;
updatePricesController.calculationProducts = self.calculationProducts;

UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:updatePricesController];
navigationController.modalPresentationStyle = UIModalPresentationFormSheet;

[self.navigationController presentViewController:navigationController animated:YES completion:nil]; 
```

* * *

```
NXCalculationViewController *calculationController = [[NXCalculationViewController alloc] init];
calculationController.calculation = calculation;
[self.navigationController pushViewController:calculationController animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:16:29.630

我实际上让它工作了，同时使用这个方法将一个变量传递给另一个视图：

```
DetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailView"];
[detail setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
detail.videoURL = outputURL; 
```

# django - 在 Django 模板中显示查询字符串值

> ID：14925382
> 
> 赞同：12
> 
> 时间：2013-02-17T19:54:25.423
> 
> 标签：django, templates, query-string

我想在查询字符串的帮助下将一些成功消息从 get 方法打印回索引页面（home.html），即模板页面。我已使用重定向到索引页面

```
 return HttpResponseRedirect("/mysite/q="+successfailure) 
```

现在我想打印字符串成功以及索引文件（或模板文件/home.html 文件）中的其他内容。

我已经搜索了解决方案，发现应该将“ django.core.context_processors.request context ”添加到设置中。但是我没有找到添加它的地方。我目前正在使用 python 2.7 和 django 1.4.3。

我也尝试使用

```
 render_to_response("home.html",{'q':successfailure}) 
```

但是，结果打印在当前页面中（addContent.html- 我不想要），但我想将 url 发送到 '/mysite/' 并在那里打印结果。

请提出适当的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-17T20:09:37.973

这些是默认的上下文处理器： [https ://docs.djangoproject.com/en/dev/ref/templates/api/#using-requestcontext](https://docs.djangoproject.com/en/dev/ref/templates/api/#using-requestcontext)

```
TEMPLATES = [ {"OPTIONS": { "context_processors": [
    'django.template.context_processors.debug',
    'django.template.context_processors.request',
    'django.contrib.auth.context_processors.auth',
    'django.contrib.messages.context_processors.messages',
]}}] 
```

如果它不在您的设置中，那么您还没有覆盖它。现在就这样做。

然后在您的模板中，如下所示：

```
{% if request.GET.q %}<div>{{ request.GET.q }}</div>{% endif %} 
```

另外，我在您的链接网址中注意到您没有使用查询字符串运算符，`?`. 你应该：

```
return HttpResponseRedirect("/mysite/?q="+successfailure) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:09:06.960

我不确定我是否理解这个问题，但您可以使用`request.GET`.

因此，您可以通过将 successfailure 变量添加到上下文中来调整呈现 home.html 的视图。就像是 -

```
def home_view(request):
    #....
    successfailure = request.GET
    return render(request, 'home.html', {'succsessfailure': successfailure.iteritems()}) 
```

然后遍历模板中的变量

```
{% for key, value in successfailure %}
    <p>{{ key }} {{ value }}</p>
{% endfor %} 
```

如果查询字符串中有一个特定的键，您可以获取该值`request.GET['your_key']`并删除调用`iteritems()`（连同模板中的迭代）。

# iis - HTTP 错误 500.23 - 内部服务器错误 本地 IIS Web 服务器

> ID：14925383
> 
> 赞同：7
> 
> 时间：2013-02-17T19:54:33.803
> 
> 标签：iis, visual-studio-2012, httphandler

我正在尝试在 Visual Studio 2012 上创建我的异步 HTTP 处理程序。我花了大约 10 个小时来找出为什么服务器不断给我“ **HTTP 错误 500.23 - 内部服务器错误**”响应。可怜的老我。

最后我发现如果我将我的 Web 服务器切换到 Visual Studio 开发服务器。一切正常。并且当我切换回 IIS Web 服务器时，它不再工作了。我尝试使用 IIS 管理器进行一些配置。我只是不知道我应该做什么以及本地主机如何链接到我的开发文件夹。没有关于它使用的端口和它映射的文件夹的信息。

有人可以提供一些帮助吗？我应该怎么做才能使 IIS Web 服务器为我工作？谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-06-23T19:07:16.420

可以在将应用程序池保持在集成模式的同时解决此问题，

将以下标记添加到应用程序的**web.config**

```
<system.webServer>
  <validation validateIntegratedModeConfiguration="false"/>
</system.webServer> 
```

# php - 上传后将.PNG图像转换为.JPEG

> ID：14925388
> 
> 赞同：-2
> 
> 时间：2013-02-17T19:54:48.480
> 
> 标签：php

```
 $file_extension= explode('.', $file_name); 
    $file_extn= strtolower(end($file_extension));  
    $old_file_path = $user_data['profile_pic'];

      function change_profile_image($user_id, $file_temp, $file_extn, $old_file_path){
            $file_path = 'core/images/profile/'.  substr(md5(time()), 0, 20) . '.' . $file_extn;
            move_uploaded_file($file_temp, $file_path);
            if(file_exists($old_file_path) === true){unlink($old_file_path);}
            mysql_query("UPDATE `users` SET `profile_pic` = '". mysql_real_escape_string($file_path) ."' WHERE `user_id` = " . (int)$user_id);

            if($file_extn == 'png'){
            list($width, $height) = getimagesize($old_file_path);
            $new_width = $width;
            $new_height = $height;
            $image_p = imagecreatetruecolor($new_width, $new_height);
            $image = imagecreatefrompng($old_file_path);

            imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);
            imagejpeg($image_p, $file_path);
if(file_exists($old_file_path) === true){unlink($old_file_path);}           
mysql_query("UPDATE `users` SET `profile_pic` = '". mysql_real_escape_string($file_path) ."' WHERE `user_id` = " . (int)$user_id);
            }

            if($file_extn == 'jpg' || $file_extn == 'jpeg'){
            list($width, $height) = getimagesize($file_path);
            $new_width = $width;
            $new_height = $height;
            $image_p = imagecreatetruecolor($new_width, $new_height);
            $image = imagecreatefromjpeg($file_path);

            imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);
            imagejpeg($image_p, $file_path);
if(file_exists($old_file_path) === true){unlink($old_file_path);}           
mysql_query("UPDATE `users` SET `profile_pic` = '". mysql_real_escape_string($file_path) ."' WHERE `user_id` = " . (int)$user_id);
            }
        } 
```

图片正在上传，但问题是上传后没有转换图片。问题是什么？我相信 if 语句不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:31:33.500

```
...
move_uploaded_file($file_temp, $file_path);
if(file_exists($old_file_path) === true){unlink($old_file_path);}
...
if($file_extn == 'png'){
        list($width, $height) = getimagesize($old_file_path);
... 
```

我相信，由于您`$old_file_path`在使用它之前删除`getimagesize($old_file_path)`它失败，所以`imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);`没有什么可做的。

尝试在 . 之后评论第一个文件删除`move_uploaded_file`。很确定是这个问题...

# jquery - IE 的 jQuery 多选问题

> ID：14925391
> 
> 赞同：0
> 
> 时间：2013-02-17T19:55:00.420
> 
> 标签：jquery

我一直在努力实现一个多选解决方案，它不需要用户按 CTRL 来选择多个值，但我遇到了两个问题，我希望能得到一些帮助。因此我有**两个问题**要问:-)

1) 该解决方案似乎不适用于 Internet Explorer。**我如何让它在 IE 下工作？**

2）**我将如何实现一个清除按钮，取消**选择除“任何”之外的所有选项？

这是我到目前为止的代码：

```
$('option').mousedown(function (e) {
    e.preventDefault();
    $(this).prop('selected', $(this).prop('selected') ? false : true);
    return false;
}); 
```

我在这里上传了工作小提琴：http: [//jsfiddle.net/cC45d/](http://jsfiddle.net/cC45d/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:09:52.307

假设`Any`将始终是列表中的第一个选项，请尝试以下操作：

```
<button class="clear">Clear</button>
...
$('.clear').click(function(e) {
    $('#roomFac option').prop('selected', false);
    $('#roomFac option:first').prop('selected', true);
}); 
```

# nginx - 静态文件的 nginx try_files 帮助

> ID：14925392
> 
> 赞同：0
> 
> 时间：2013-02-17T19:55:16.907
> 
> 标签：nginx

假设我有一个文件：

/www/public/mysite/blog/4554/some-page-title.html

我怎样才能让 nginx 基本上忽略该数字（id）之后的所有内容

所以它实际上是 /www/public/mysite/blog/4554.html

所以基本上如果用户尝试访问 /blog/[any number]/[any title] 他们实际上将被交付 /blog/[any number].html

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:38:54.270

重写“/blog/([A-Za-z0-9_-]*)/?” /blog/$1.html;

感谢朋友的帮助。

# java - 无法从活动启动地图视图

> ID：14925393
> 
> 赞同：0
> 
> 时间：2013-02-17T19:55:23.420
> 
> 标签：java, android, api, google-maps, android-mapview

我正在尝试从我的代码中的地图视图加载 googlemaps。

在活动尝试加载的那一刻，将产生以下错误，如下所示在 LogCat 中。

我在我的代码中看不到任何明显的东西，我没有导入任何额外的 JAR 文件，因为我使用 dosent 的教程说在这个简单的阶段需要它们。

希望有些人可以看到我哪里出错了。：

来自 logcat 的错误：

```
02-17 19:47:01.889: E/AndroidRuntime(300): FATAL EXCEPTION: main
02-17 19:47:01.889: E/AndroidRuntime(300): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.mapdb/com.example.mapdb.GoogleMapsActivity}: java.lang.ClassNotFoundException: com.example.mapdb.GoogleMapsActivity in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.example.mapdb-2.apk]
02-17 19:47:01.889: E/AndroidRuntime(300):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
02-17 19:47:01.889: E/AndroidRuntime(300):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-17 19:47:01.889: E/AndroidRuntime(300):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-17 19:47:01.889: E/AndroidRuntime(300):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-17 19:47:01.889: E/AndroidRuntime(300):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-17 19:47:01.889: E/AndroidRuntime(300):  at android.os.Looper.loop(Looper.java:123)
02-17 19:47:01.889: E/AndroidRuntime(300):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-17 19:47:01.889: E/AndroidRuntime(300):  at java.lang.reflect.Method.invokeNative(Native Method)
02-17 19:47:01.889: E/AndroidRuntime(300):  at java.lang.reflect.Method.invoke(Method.java:521)
02-17 19:47:01.889: E/AndroidRuntime(300):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-17 19:47:01.889: E/AndroidRuntime(300):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-17 19:47:01.889: E/AndroidRuntime(300):  at dalvik.system.NativeStart.main(Native Method)
02-17 19:47:01.889: E/AndroidRuntime(300): Caused by: java.lang.ClassNotFoundException: com.example.mapdb.GoogleMapsActivity in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.example.mapdb-2.apk]
02-17 19:47:01.889: E/AndroidRuntime(300):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
02-17 19:47:01.889: E/AndroidRuntime(300):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
02-17 19:47:01.889: E/AndroidRuntime(300):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
02-17 19:47:01.889: E/AndroidRuntime(300):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
02-17 19:47:01.889: E/AndroidRuntime(300):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
02-17 19:47:01.889: E/AndroidRuntime(300):  ... 11 more 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.mapdb"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".GoogleMapsActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
  <uses-library android:name="com.google.android.maps" />
</application>
</manifest> 
```

主要活动类：

```
package com.example.mapdb;

import android.os.Bundle;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

public class MainActivity extends MapActivity {

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //fetch the map view from the layout
    MapView mapView = (MapView) findViewById(R.id.mapview);

    //make available zoom controls
    mapView.setBuiltInZoomControls(true);
}

@Override
protected boolean isRouteDisplayed() {

    return false;

 }
} 
```

activity_main.xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

   <com.google.android.maps.MapView
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="0xxxxxxxxxxxxxxxxxxxxg"
    android:clickable="true" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:00:45.943

在您的 Java 代码中，您有：

```
public class MainActivity extends MapActivity 
```

在您的清单中，您有：

```
<activity
    android:name=".GoogleMapsActivity" 
```

`MainActivity`不是`GoogleMapsActivity`。请通过重命名类或编辑清单来同步这两个值。

# c++ - 将字符串添加到列表框会导致奇怪的字符

> ID：14925395
> 
> 赞同：1
> 
> 时间：2013-02-17T19:55:30.607
> 
> 标签：c++, windows, winapi, visual-studio-2012

我制作了一个使用 WIN32 将字符串发送到列表框的函数

```
char data[] = "abcd";

addToList(hWnd,data);

void addToList(HWND hWnd,char data[] ){
  SendMessage(GetDlgItem(hWnd,IDC_LISTBOX),LB_ADDSTRING,0,(LPARAM)data);    
} 
```

当我执行此操作时，它会将数据发送到列表框，但问题出现在奇怪的字符中，我也尝试过 wchar_t 但问题仍然存在

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T20:06:04.700

首先，您应该检查 API 调用是否有错误。您需要检查对 API 函数的所有调用的返回值。

也就是说，鉴于问题中的代码，

```
SendMessage(GetDlgItem(hWnd,IDC_LISTBOX),LB_ADDSTRING,0,(LPARAM)data); 
```

如果这导致一个项目被添加到列表框中，那么这意味着它`GetDlgItem`确实返回了一个有效的窗口句柄，并且`data`确实指向了有效的内存。在这种情况下，您报告的唯一解释是编码的文本不匹配。

因此，我们可以假设`SendMessage`宏的计算结果为`SendMessageW`。而且由于您传递的是 ANSI 编码的文本，因此这种不匹配说明了症状。该函数将文本视为 UTF-16 编码。

一种明显的解决方案是`SendMessageA`改用。但是，在我看来，更好的解决方案是传递 UTF-16 编码的数据。

```
wchar_t data[] = L"abcd";
....
void addToList(HWND hWnd, const wchar_t *data)
{
    SendMessage(GetDlgItem(hWnd,IDC_LISTBOX), LB_ADDSTRING, 0, (LPARAM)data);    
} 
```

显然，您的代码会添加我在开始时提到的错误检查。

# android - 新鲜活动从 Intent 开始

> ID：14925396
> 
> 赞同：0
> 
> 时间：2013-02-17T19:55:39.670
> 
> 标签：android, android-intent, android-activity

我有以下启动活动的代码，该代码用于当用户单击Android设备中的菜单按钮时出现的子菜单，问题是当单击按钮时，新的活动开始，这会丢失以前形成蓝牙连接！

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Intent serverIntent = null;
        Intent PassIntent;
        Intent PassIntent1;
        switch (item.getItemId()) {
        /*case R.id.home:
            // Launch the DeviceListActivity to see devices and do scan
            serverIntent = new Intent(this, engineStarter.class);
            startActivity(serverIntent);
            return true;*/
        /*case R.id.insecure_connect_scan:
            // Launch the DeviceListActivity to see devices and do scan
            serverIntent = new Intent(this, DeviceListActivity.class);
            startActivityForResult(serverIntent, REQUEST_CONNECT_DEVICE_INSECURE);
            return true;*/
        /*case R.id.discoverable:
            // Ensure this device is discoverable by others
            ensureDiscoverable();
            return true;*/
        case R.id.setpassword:
            PassIntent = new Intent(this, SetPassword.class);
            startActivity(PassIntent);
            return true;
        case R.id.home:
            // Launch the DeviceListActivity to see devices and do scan
            serverIntent = new Intent(this, engineStarter.class);
            startActivity(serverIntent);
            return true;
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:55:12.583

你有两个选择：

1-将活动的启动模式更改为`android:launchMode="singleTask"`，因此每次调用时它都不会创建新实例`startActivity`

2-保持`Bluetooth`连接`service`

还有另一种可能的解决方案，但可能不是优雅的解决方案，即定义一个自定义`application`类，您可以在其中维护`Bluetooth`连接，在这种情况下，该连接将与`applicationContext`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:59:07.680

另一种方法是保留相同的 Activity，但将新[片段](http://developer.android.com/guide/components/fragments.html)加载到替换当前片段的 Activity 中。使用 FragmentManager 时，您可以将新片段推送到堆栈上以向前导航，并将它们弹出以向后导航。这将允许您导航内容并保持蓝牙连接。

# preg-replace - 用目录路径字符串上的 preg_replace() 替换混合模式

> ID：14925398
> 
> 赞同：0
> 
> 时间：2013-02-17T19:55:48.123
> 
> 标签：preg-replace

我想从全文中删除“Documents/1/project/1/sub/15/”
“Documents/1/project/1/sub/15/Project 1_1/2012-09-10/0a/0ad0175615742c7a3142cd0ecc4c3277/19 -50-24-10233310.txt"

但数字 1,1 和 15 并不总是相同。它会改变。

期望的结果：“项目 1_1/2012-09-10/0a/0ad0175615742c7a3142cd0ecc4c3277/19-50-24-10233310.txt”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:14:25.707

解决了。

preg_replace('/(Documents/.+?)+(/project/.+?)+(/sub/.+?)+(/)/i','',$str)

# php - 无法关闭 FastCGI 输出缓冲

> ID：14925402
> 
> 赞同：2
> 
> 时间：2013-02-17T19:56:17.160
> 
> 标签：php, fastcgi

此脚本在 10 秒后输出，而不是增量输出：

```
ob_start(); // Start output buffer (if not enabled in php.ini)
for ($i = 0; $i < 10; $i++) {
    echo $i, ' ';
    ob_flush();
    flush();
    sleep(1);
} 
```

我安装了 IIS 和 FastCGI。在 PHP.ini 中，我有

```
zlib.output_compression = Off
output_buffering = off 
```

在`C:\Windows\System32\inetsrv\Config\applicationHost.config`我有

```
<add name="PHP_viaFastCGI" 
path="*.php" 
verb="*" 
modules="FastCgiModule" 
scriptProcessor="C:\php\php-cgi.exe" 
resourceType="Unspecified" 
ResponseBufferLimit = "0"/> 
```

似乎都没有效果。

我需要找到在 FastCGI 中关闭输出缓冲的正确方法

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T01:26:03.987

我也遇到了同样的问题，也运行 FastCGI PHP，并通过在我的索引文件（包括所有其他文件的位置）中放入以下行来修复它：

```
while (@ob_end_flush()); 
```

[我在PHP 文档](http://php.net/manual/en/function.ob-end-flush.php)中找到了这个命令。.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T21:45:29.583

不了解 IIS，但在 CentOS 中我必须将以下内容添加到 /etc/httpd/conf.d/fcgid.conf：

```
OutputBufferSize 0 
```

搜索一个小时后在这里找到了答案：http: [//forum.odin.com/threads/mod_fcgid-php-flush-function.91876/](http://forum.odin.com/threads/mod_fcgid-php-flush-function.91876/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-31T13:11:48.720

解决方案在这里：[PHP 刷新 - 用户贡献的注释](https://www.php.net/manual/en/function.flush.php#113360)

> 对于使用 IIS 的 Windows 系统，`responseBufferLimit`优先于 PHP 的`output_buffering`设置。因此，您还必须将 设置为`responseBufferLimit`低于其默认值。

简而言之，对于 IIS7+，编辑`%windir%\System32\inetsrv\config\applicationHost.config`文件并添加`responseBufferLimit="0"`到`PHP_via_FastCGI`处理程序。

所以整行看起来像：

`<add name="PHP_via_FastCGI" path="*.php" verb="*" modules="FastCgiModule" scriptProcessor="C:\PHP\php-cgi.exe" resourceType="Either" responseBufferLimit="0" />`

之后，`ob_flush()`将`flush()`开始按预期工作。

# javascript - Trying to display a value when the select list option changes with onchange

> ID：14925406
> 
> 赞同：0
> 
> 时间：2013-02-17T19:56:25.910
> 
> 标签：javascript, onchange

我要做的是：当从下拉列表中选择工作时，我想用金额填充总计表中的 hourlyRate 字段。
这是我的下拉列表：

```
 <fieldset>
      <legend>What is your position?</legend>
      <select name="job" id="job">
        <option value="job0">Please select a position:</option>
        <option value="job1">Server/Bartender</option>
        <option value="job2">Greeter/Busser</option>
        <option value="job3">Kitchen Support</option>
      </select>
    </fieldset> 
```

这是我的总计表：

```
<div id="totals">
<table width="408">
<tr>
  <td width="214">Hourly Rate:</td><td width="57" id="hourlyRate"></td></tr>
</table>
</div> 
```

这是我的 JavaScript：

```
var $ = function (id) {
return document.getElementById(id); 
}

function rateChange () {

var rate="";
    if ($('job').value == 'job0') {
    rate = '0';
    }
    if ($('job').value == 'job1') {
    rate = '12';
    }

    if ($('job').value == 'job2') {
    rate = '10';
    }

    if ($('job').value == 'job3') {
    rate = '11';
    }

$('hourlyRate').innerHTML = "$ " + rate;
}
window.onload = function () {
$('job').onchange = rateChange();
} 
```

因此，如果有人从下拉列表中选择服务器/调酒师，我希望总计表中的 hourlyRate 字段显示 12 美元。我无法弄清楚我做错了什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:02:42.963

看起来您正在立即调用您的函数，而不是告诉它在`onchange`事件中被调用：

```
$('job').onchange = rateChange(); 
```

所以 (nothing) 的返回值`rateChange`被分配给 onchange 事件。

试试这个：

```
$('job').onchange = rateChange; 
```

现在该函数是事件触发`rateChange`时将运行的函数。`onchange`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:05:36.933

如果你想为你的事件添加一个处理函数，你不能添加括号......

你必须写：

```
$('job').onchange = rateChange; 
```

刚刚尝试...工作正常。`window.onload`如果您要添加方括号，则该函数将仅在...中调用一次

# c# - 表格上的透明背景

> ID：14925409
> 
> 赞同：0
> 
> 时间：2013-02-17T19:56:46.673
> 
> 标签：c#, winforms

我尝试了很多方法来在表单上设置透明背景。透明度键确实有效，但是当您放置具有不透明度的图像时会出现问题。我试图覆盖`OnPaintBackground`它只删除了我的背景图像。我尝试了这个`SetStyle`方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:07:11.933

假设您使用的是 Windows 窗体，请尝试：

```
this.TransparencyKey = Color.Red;
this.BackColor = Color.Red; 
```

当表单上的颜色与透明度键相同时，它将是透明的。另一方面，由于红色仅用于透明度，您将无法使用它。

（并`this`指形式）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:25:25.493

您可以设置窗体的不透明度。100% 是 Windows 窗体的默认值，较低的值更透明。

# solr - 如何解决 Apache Solr 中的 org.apache.lucene.index.CorruptIndexException 错误？

> ID：14925410
> 
> 赞同：0
> 
> 时间：2013-02-17T19:56:56.237
> 
> 标签：solr, lucene, indexing

我正在使用 Apache Solr 3.1.0 和 Lucene 3.1.0。索引服务器由于硬件故障而停止。我重新启动了我的服务器，但没有发生 solr 索引。

我得到

```
SEVERE: java.lang.RuntimeException: org.apache.lucene.index.CorruptIndexExceptio n: document count mismatch: deleted docs count 0 vs segment doc count 148 segmen t=_otm 
```

这似乎是 3.6 以下版本[参考](http://www.h-online.com/open/news/item/Lucene-and-Solr-updates-fix-index-corruption-bug-1343798.html)中的错误。但是如何在不丢失旧索引的情况下升级到更高版本。

如何解决这个问题。任何机构都可以告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:31:44.593

升级不会解决您的问题。

看看[CheckIndex](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/index/CheckIndex.html)类。您可以首先运行`checkIndex()`将提供状态信息 ( ) 的方法（只读`CheckIndex.Status`），然后您可以运行`fixIndex(CheckIndex.Status status)`以尝试修复它。祝你好运！

# php - jquery .submit() 没有将值传递给操作页面

> ID：14925411
> 
> 赞同：0
> 
> 时间：2013-02-17T19:57:04.723
> 
> 标签：php, jquery

我正在尝试使用 jquery 中的 .submit 在 div“内容”中加载 php 页面的内容。我面临一个问题，当我按下提交 btn 时，值不会传递到操作页面。这是表单代码

```
<form id="f1" action="attandace/students/take_attandance.php" method="post" enctype="multipart/form-data" >
    <table>
        <tr>
            <td><label id="sb">Subject Name</label></td>
            <td>
                <select id="s_b" name="subject_name">
                    <option value="0">Select</option>
                    <?php echo $option; ?>
                </select>
            </td>
            <td><label id="cn">Class Name</label></td>
            <td>
                <select id="c_n" name="class_name">
                    <option value="0">Select</option>
                    <?php echo $option2; ?>
                </select>
            </td>
        </tr>
        <tr>
            <td colspan="4"><div align="center"><input id="btn" type="submit" name="tk" value="Take Attandance" /> 
           </div></td>
        </tr>
    </table>
</form> 
```

jquery脚本：

```
$(document).ready(function(e) 
{
    $('form').submit(function(e)
    {
        e.preventDefault();
        $('#content').load($(this).attr('action'));
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:03:29.837

您需要使用参数传递值`data`。

你可以利用[`.serializeArray()`](http://api.jquery.com/serializeArray/)它。

```
$(document).ready(function (e) {
    $('form').submit(function (e) {
        var $form = $(this);
        e.preventDefault();
        $('#content').load($form.attr('action'), $form.serializeArray());
    });
}); 
```

# javascript - javascript if 语句可以在没有函数的情况下运行吗？

> ID：14925412
> 
> 赞同：0
> 
> 时间：2013-02-17T19:57:10.287
> 
> 标签：javascript, html, if-statement

我对javascript不太了解，我想知道这个脚本是否会运行，还是我需要将“if语句”放在某种onPageLoad函数中来运行它？请帮忙。

```
<script>
if (time<20)
{
    alert("Hello World!");
}
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T19:58:05.367

当然它会运行——但它取决于首先运行的其他东西，因此它`time`具有价值。

例如，这会起作用（即使这是不好的做法，因为它在 上设置了一个属性`window`）：

```
<script>
time = 10;
</script>

<script>
if (time<20)
{
    alert("Hello World!");
}
</script> 
```

您还会发现无法保证临时处理所需的任何变量都不受其他脚本的影响。为了克服这个限制，您可以（并且除了在最微不足道的网站中，应该）将代码包装在一个匿名函数中，该函数会被当场调用：

```
<script>
(function() {
    // your code here
})();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:05:05.873

如果在服务器端设置了“时间”，那么，您可以像这样动态地编写 onload 属性主体：

```
<body onload="functionName(<?php echo()?>)"> 
```

接着：

```
<script type="text/javascript">
function functionName(time) {
        if(time < 30) { ... }
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T20:00:59.157

如果你想访问 DOM 元素，你必须将 script 标签放在页面的末尾。或者您使用类似 onload 的 body 标签（或 JS 框架中的等效功能）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T20:01:11.713

它将运行，实现`time`未定义，生成错误并从那时起停止操作。

# python - Gevent-Websocket 检测关闭的连接

> ID：14925413
> 
> 赞同：6
> 
> 时间：2013-02-17T19:57:20.027
> 
> 标签：python, websocket, bottle, gevent

我正在使用带有 bottle.py 的 gevent-websocket 来提供日志文件。如何检测到 websocket 连接已从客户端关闭？

目前我只是在写，直到我得到一个损坏的管道错误：

```
return sock.send(data, flags)
error: [Errno 32] Broken pipe 
```

但是我想在服务器上正确检测客户端是否关闭了 websocket 连接。

我的代码如下所示：

```
from geventwebsocket.handler import WebSocketHandler
from gevent.pywsgi import WSGIServer
import gevent.monkey
gevent.monkey.patch_all()
from bottle import route, Bottle, view, request, static_file
import json
import os
import time

app = Bottle()

# Other code

@app.route('/websocket/<filename>')
def ws_logfile(filename):
    if request.environ.get('wsgi.websocket'):
        ws = request.environ['wsgi.websocket']
        try:
            filename = os.path.join(os.getcwd(), "logfiles", filename)
            logfile = file(filename)
            lines = logfile.readlines()
            for line in lines:
                ws.send(json.dumps({'output': line}))

            while True:
                line = logfile.readline()
                if line:
                    # Here detect if connection is closed 
                    # form client then break out of the while loop
                    ws.send(json.dumps({'output': line}))
                else:
                    time.sleep(1)
             ws.close()   

         except geventwebsocket.WebSocketError, ex:
             print "connection closed"
             print '%s: %s' % (ex.__class__.__name__, ex)

if __name__ == '__main__':
     http_server = WSGIServer(('127.0.0.1', 8000), app, handler_class=WebSocketHandler)
     http_server.serve_forever() 
```

和相应的客户端javascript代码：

```
jQuery(document).ready(function(){
      ws = $.gracefulWebSocket("ws://" + document.location.host + "/websocket" + document.location.pathname);

      ws.onmessage = function (msg) {
        var message = JSON.parse(msg.data);
        $("#log").append(message.output + "<br>" );
      };

      window.onbeforeunload = function() {
        ws.onclose = function () {console.log('unlodad')};
        ws.close()
      };
}); 
```

欢迎对我的代码或解决方案进行任何其他改进。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T04:43:31.153

`if ws.socket is not None:`在套接字上发送数据之前尝试测试。

# c# - 将希伯来字符转换为英语

> ID：14925415
> 
> 赞同：0
> 
> 时间：2013-02-17T19:57:43.120
> 
> 标签：c#, asp.net, .net, wpf

为了防止将我的问题标记为“重复” [，这里](https://stackoverflow.com/questions/3649904/how-to-convert-hebrew-unicode-to-ascii-in-c) 是类似问题的“答案”，不幸的是它不起作用。所以我有一种情况，我在 TextBox 中输入希伯来语文本，我需要将每个输入的字母转换为标准字符类似于英语的 ASCII 表（十进制）中的代码。因为直接转换希伯来字符会返回完全不同的代码（那些似乎是 Unicode），所以我需要将希伯来输入转换为英语。我为希伯来语输入转换尝试了不同的编码器类型：Unicode、UTF8、UTF16、“Windows-1255”。我总是得到“？” .

因此，例如，上述问题的可能解决方案是：

```
 public static string convertUTF8ASCII(string initialString)
  {
     byte[] unicodeBytes = Encoding.Unicode.GetBytes(initialString);
     byte[] asciiBytes = Encoding.Convert(Encoding.Unicode, Encoding.ASCII, unicodeBytes);
     return Encoding.GetEncoding("Windows-1255").GetString(asciiBytes);
  } 
```

它不起作用。

我也尝试过这样的事情：

```
 public static int GetASCIICodeFromUnicode(string letter){
     Encoding ascii = Encoding.GetEncoding("Windows-1252");
     Encoding unicode = Encoding.GetEncoding("Windows-1255");

     byte[] unicodeBytes = unicode.GetBytes(letter);

     byte[] asciiBytes = Encoding.Convert(unicode, ascii, unicodeBytes);

     char[] asciiChars = new char[ascii.GetCharCount(asciiBytes, 0, asciiBytes.Length)];
     ascii.GetChars(asciiBytes, 0, asciiBytes.Length, asciiChars, 0);
     asciiBytes.Length, asciiChars, 0);
     string asciiString = new string(asciiChars);

     return (int)Convert.ToChar(asciiString);
 } 
```

也不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:15:44.177

当您在 .NET 中出现字符串时，要找出键盘发出的内容为时已晚。

为了找出点击了哪个*键盘*位置，您需要将希伯来语位置映射到英语位置 - a`Dictionary<char,char>`是一个很好的候选数据结构。

# datatables - 带有数据表的流星：Meteor._atFlush TypeError

> ID：14925420
> 
> 赞同：3
> 
> 时间：2013-02-17T19:58:00.090
> 
> 标签：datatables, meteor

我正在尝试将 DataTables（通过`mrt add datatables`）与 Meteor 一起使用。我已经尝试将, 和- 添加`$('#mytableid').dataTable()`到`Meteor.subscribe`回调中，`Meteor.autorun`所有这些都会导致以下异常和一条消息。`Meteor.startup``Template.mytemplate.rendered``No data available in table`

任何指针？

```
 Exception from Meteor._atFlush: TypeError: Cannot call method 'insertBefore' of null
        at http://localhost:3000/packages/liverange/liverange.js?bc1d62454d1fefbec95201344b27a7a5a7356293:405:27
        at LiveRange.operate (http://localhost:3000/packages/liverange/liverange.js?bc1d62454d1fefbec95201344b27a7a5a7356293:459:11)
        at LiveRange.replaceContents (http://localhost:3000/packages/liverange/liverange.js?bc1d62454d1fefbec95201344b27a7a5a7356293:403:17)
        at http://localhost:3000/packages/spark/spark.js?c202b31550c71828e583606c7a5e233ae9ca50e9:996:37
        at withEventGuard (http://localhost:3000/packages/spark/spark.js?c202b31550c71828e583606c7a5e233ae9ca50e9:105:16)
        at http://localhost:3000/packages/spark/spark.js?c202b31550c71828e583606c7a5e233ae9ca50e9:981:9
        at http://localhost:3000/packages/deps/deps-utils.js?f3fceedcb1921afe2b17e4dbd9d4c007f409eebb:106:13
        at http://localhost:3000/packages/deps/deps.js?1df0a05d3ec8fd21f591cfc485e7b03d2e2b6a01:71:15
        at Array.forEach (native)
        at Function._.each._.forEach (http://localhost:3000/packages/underscore/underscore.js?47479149fe12fc56685a9de90c5a9903390cb451:79:11) 
```

**更新：**可能与[这个问题](https://stackoverflow.com/questions/13168806/calling-a-function-on-a-table-of-async-populted-data-in-meteor)有关，为此找到的最佳解决方案是为每一行调用 dataTable() ——在这种情况下并不理想，并且考虑到行数非常多，这对我来说可能是灾难性的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T20:03:10.330

Dror 的回答肯定是正确的开始。这是我目前看到的最佳实践：

HTML

```
<template name="data_table">
    {{#constant}}
        <table class="table table-striped" id="tblData">
        </table>
    {{/constant}}
</template> 
```

JS：

```
Template.data_table.created = function() {
    var _watch = Collection.find({});
    var handle = _watch.observe({
        addedAt: function (doc, atIndex, beforeId) {
            $('#tblData').is(":visible") && $('#tblData').dataTable().fnAddData(doc);
        }
        , changedAt: function(newDoc, oldDoc, atIndex) {
            $('#tblData').is(":visible") && $('#tblData').dataTable().fnUpdate(newDoc, atIndex);
        }
        , removedAt: function(oldDoc, atIndex) {
            $('#tblData').is(":visible") && $('#tblData').dataTable().fnRemove(atIndex);
        }
    });
};

Template.data_table.rendered = function () {

    if (!($("#tblData").hasClass("dataTable"))) {
        $('#tblStudents').dataTable({
            "aaSorting": []
            , "sDom": "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>"
            , "sPaginationType": "bootstrap"
            , "oLanguage": {
                "sLengthMenu": "_MENU_ records per page"
            }
            , "aoColumns": [
                { "sTitle": "First Data", "mData": function (data) { return data.firstData },
            ]
        });

        $('#tblData').dataTable().fnClearTable();
        $('#tblData').dataTable().fnAddData(Collection.find().fetch());
    }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T00:12:15.973

由于 Meteor 是响应式的，因此您需要先创建一个空表，然后再添加行。

创建表：

```
$('#myTable').dataTable( {
    "aoColumns": cols, //the column titles
    "sDom": gridDom
} ); 
```

添加行应类似于：

```
 var myCursor = myCollection.find({});
 var handle = myCursor.observe({
  added: function (row) {
   //Add in here the data to the table
  }, 
```

});

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-09T10:26:21.800

已回答的方法仍然有效，但需要在两年后进行一些更改。

1.  不再有恒定不变的东西。
2.  而不是一个空表，放 thead 而不是 tbody。这样，列就被正确定义了。
3.  将观察者放入 onRendered（不再渲染）而不是 onCreated（不再创建）。否则，表格仅在第一次创建时填充，而不是在您返回时填充。
4.  onRendered 上的 clear 和 fill 方法不是必需的。
5.  在 observe 方法中，确保添加的是数组而不是对象。否则 fnAdd 无法呈现内容
6.  fnRemove 已不复存在。改用 fnDeleteRow
7.  我不确定是否需要“可见检查”。当你删除它时似乎没有问题，所以我删除了它。

有了上面的注释，下面是代码：

```
Template.creamDealsList.onRendered(function () {
   if (!($("#tblData").hasClass("dataTable"))) {
      $('#tblStudents').dataTable({
        // Those configuration are not really important, use it as they are convenient to you
        "aaSorting": []
        , "sDom": "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>"
        , "sPaginationType": "bootstrap"
        , "oLanguage": {
            "sLengthMenu": "_MENU_ records per page"
        }
        , "aoColumns": [
            { "sTitle": "First Data", "mData": function (data) { return data.firstData },
        ]
    });
   }
  var _watch = Collection.find({});
  var convertDocToArray = function (doc) {return [doc._id, doc.name]}
  var handle = _watch.observe({
    addedAt: function (doc, atIndex, beforeId) {
        $('#tblData').dataTable().fnAddData(convertDocToArray(doc));
    }
    , changedAt: function(newDoc, oldDoc, atIndex) {
        $('#tblData').dataTable().fnUpdate(convertDocToArray(newDoc), atIndex);
    }
    , removedAt: function(oldDoc, atIndex) {
        $('#tblData').dataTable().fnDeleteRow(atIndex);
    }
  });
}) 
```

简单的 HTML 就像：

```
<template name="data_table">
    <table class="table table-striped" id="tblData">
        <thead>
            <th>Id</th>
            <th>Name</th>
        </thead>
    </table>
</template> 
```

这至少对我有用。我不再看到刷新错误。而且，当您稍后渲染时，有时，数据表中没有可用的数据消息，并且该消息也消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-26T22:47:14.310

这是我在 Meteor 中使用 CoffeeScript 和 HTML 实现的数据表。它可以工作，而且更简单，但可能比现有的大型表答案效率低（但在我的情况下它很快）。

**模板功能**

```
Template.dashboard.rendered = ->

  # Tear down and rebuild datatable
  $('table:first').dataTable
    "sPaginationType": "full_numbers"
    "bDestroy": true 
```

**HTML**

```
<template name="dashboard">
  <table class="table table-bordered" id="datatable_3" style="min-width:1020px">
    <thead>
      <!-- code removed to save space -->
    </thead>
    <tbody id="previous-jobs-list">
      {{#each jobs}}
        {{> jobRow}}
      {{/each}}
    </tbody>
  </table>
</template>

<template name="jobRow">
  <tr>
    <td><a href="/jobs/{{number}}">{{number}}</a></td>
    <td>{{normalTime date}}</td>
    <!-- more code removed to save space -->
  </tr>
</template> 
```

其中dashboard.jobs 是集合上的一个简单的.find(...)。

# java - 此 logback.xml 正在记录到文件但无法登录到控制台？

> ID：14925423
> 
> 赞同：6
> 
> 时间：2013-02-17T19:58:15.430
> 
> 标签：java, logging, logback

此 logback.xml 正在记录到文件但无法登录到控制台？我希望有人能在这个配置中发现配置错误？这是我的基本记录器配置：

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
...
public static Logger logger = LoggerFactory.getLogger( "JUnit" );
...
logger.info("This comment fails to show in console but it shows in log file"); 
```

这是 logback.xml ：

```
<configuration>

  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <!-- encoders are assigned the type
         ch.qos.logback.classic.encoder.PatternLayoutEncoder by default -->
    <encoder>
      <pattern>%-4relative [%thread] %-5level %logger{35} - %msg %n</pattern>
    </encoder>
  </appender>

  <appender name="FILE" class="ch.qos.logback.core.FileAppender">
    <file>junitOut.log</file>
    <append>false</append>
    <!-- encoders are assigned the type
         ch.qos.logback.classic.encoder.PatternLayoutEncoder by default -->
    <encoder>
      <pattern>%-4r %-5level %logger{35}: %msg%n</pattern>
    </encoder>
  </appender>

  <root level="DEBUG">
    <appender-ref ref="FILE" />
  </root>

  <!-- We want error logging from this logger to go to an extra appender 
       It still inherits CONSOLE STDOUT from the root logger -->
  <logger name="junitOut" level="INFO">
      <appender-ref ref="STDOUT" />
  </logger>  

</configuration> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T11:18:45.130

您没有明确定义名为“JUnit”的记录器，因此记录消息将直接发送到根记录器。根记录器只有一个附加程序，即“FILE”，因此记录消息将仅写入文件。您可以在您的情况下将“STDOUT”附加程序添加到根记录器：

```
 <root level="DEBUG">
         <appender-ref ref="FILE" />
         <appender-ref ref="STDOUT" />
      </root> 
```

# asp.net - ASP.NET 响应过滤器

> ID：14925433
> 
> 赞同：3
> 
> 时间：2013-02-17T19:59:20.910
> 
> 标签：asp.net, filter, response.filter

我需要创建过滤器，将`<h2>`HTML 中的标签替换为`<h3>`：

我的过滤器

```
public class TagsFilter:Stream
{
    HttpContext qwe;

    public TagsFilter(HttpContext myContext)
    {
        qwe = myContext;
    }

    public override void Write(byte[] buffer, int offset, int count)
    {
        string html = System.Text.Encoding.UTF8.GetString(buffer);
        html = html.Replace("<h2>", "<h3>");
        qwe.Response.Write(html.ToCharArray(), 0, html.ToCharArray().Length);
    } 
```

我的模块

```
public class TagsChanger : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.Response.Filter = new TagsFilter(context.Context);
    } 
```

我收到错误 System.Web.HttpException：在这种情况下，答案不可用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T15:58:32.987

查看 Rick Strahl 关于[“使用 Response.Filter 捕获和转换 ASP.NET 输出”](http://www.west-wind.com/weblog/posts/2009/Nov/13/Capturing-and-Transforming-ASPNET-Output-with-ResponseFilter)的帖子。

> **Response.Filter 内容被分块**。因此，要有效地实现 Response.Filter 只需要您实现自定义流并处理 Write() 方法以在写入时捕获响应输出。乍一看，这似乎很简单——您在 Write 中捕获输出，对其进行转换，然后一次性写出转换后的内容。这确实适用于少量内容。但是你看，问题是输出是写在小的缓冲区块中（看起来比 16k 小），而不是一个单一的 Write() 语句到流中，这对于 ASP.NET 将数据流式传输回非常有意义IIS 在较小的块中以最大程度地减少途中的内存使用。
> 
> 不幸的是，这也使得实现任何过滤例程变得更加困难，因为您不能直接访问所有有问题的响应内容，特别是如果这些过滤例程要求您查看整个响应以转换或捕获输出我会议中的绅士所要求的解决方案所需的输出。
> 
> 因此，为了解决这个问题，需要一种稍微不同的方法，该方法基本上捕获传递到缓存流中的所有 Write() 缓冲区，然后仅在流完成并准备好刷新时才使流可用。
> 
> 当我考虑实现时，我也开始考虑使用 Response.Filter 实现的少数实例。每次我都必须创建一个新的 Stream 子类并创建我的自定义功能，但最终每个实现都做了同样的事情——捕获输出并对其进行转换。我认为应该有一种更简单的方法来做到这一点，方法是创建一个可重用的 Stream 类，该类可以处理 Response.Filter 实现常见的流转换。

Rick Strahl 编写了自己的流过滤器实现，允许以正确的方式替换文本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T21:05:38.197

我做了一个小例子。我认为您必须**访问原始流**，而不是访问 httpContext。

```
public class ReplacementStream : Stream
{
    private Stream stream;
    private StreamWriter streamWriter;

    public ReplacementStream(Stream stm)
    {
        stream = stm;
        streamWriter = new StreamWriter(stream, System.Text.Encoding.UTF8);
    }
    public override void Write(byte[] buffer, int offset, int count)
    {
        string html = System.Text.Encoding.UTF8.GetString(buffer);
        html = html.Replace("<h2>", "<h3>");
        streamWriter.Write(html.ToCharArray(), 0, html.ToCharArray().Length);
        streamWriter.Flush();
    }

    // all other necessary overrides go here ...
}

public class FilterModule : IHttpModule
{
    public String ModuleName
    {
        // Verweis auf Name in Web.config bei Modul-Registrierung
        get { return "FilterModule"; }
    }
    void context_BeginRequest(object sender, EventArgs e)
    {
        HttpContext context = HttpContext.Current;
        context.Response.Filter = new ReplacementStream(context.Response.Filter);
    }
    public void Init(HttpApplication context)
    {
       context.BeginRequest += new EventHandler(context_BeginRequest);
    }
} 
```

在 SO上的[这篇文章](https://stackoverflow.com/questions/4433386/creating-multiple-15-http-response-filters-inheritance-vs-composition-w-in)中找到了解决方案。为我工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-10T06:36:15.437

问题是您在 Init 事件中应用过滤器，每个应用程序实例仅发生一次（它基本上接近 App_Start）。

您需要做的是从 Init 事件中挂钩 BeginRequest 事件，然后在 BeginRequest 上应用过滤器。

```
public void Init(HttpApplication application)
{
    application.BeginRequest += BeginRequest;
}

private void BeginRequest(object sender, EventArgs e)
{
    var app = (HttpApplication)sender;
    var context = app.Context;
    context.Response.Filter = new TagsFilter(context);
} 
```

# c - 如何在 C 程序中将 shell 变量作为命令行参数传递

> ID：14925434
> 
> 赞同：1
> 
> 时间：2013-02-17T19:59:26.177
> 
> 标签：c, shell, command

我想将 shell 变量作为命令行参数传递给 C 程序。为了实践这一点，我编写了一个基本的 C 程序，如下所示：

```
#include<stdio.h>  
#include<stdlib.h>
int main(int argc, char **argv){  
    int i, a, prod=1 ;
    if(argc==2)
    a = atoi(argv[1]);
    else 
    a = 8 ; 
    printf("value of cmd: %d\n",a);
    for(i=1; i <= a ; i++)
        prod *= i ;
    printf("factorial %d!= %d\n",a, prod);
} 
```

现在要通过 shell 脚本变量传递参数，我编写了一个小脚本，如下所示：

```
#!/bin/bash  
echo "Welcome to the small shell scripting!!!"
for ((i=4; i<9;i++))
do
        "../programming/ctest/arg $i"
done 
```

其中**../programming/ctest/arg**是上述 C 程序的可执行文件。但是当我运行脚本输出是**../programming/ctest/arg 4 no such file or directory**等等。在没有 shell 变量的情况下运行它会给出正确的输出。请看一下，如果这个问题解决了，我会用它来进一步自动化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:02:09.337

```
"../programming/ctest/arg $i" 
```

你需要删除引号好先生

```
../programming/ctest/arg $i 
```

详细地说，在不删除引号的情况下，Bash 会将整个字符串解释为命令，而不是您想要的命令和参数。

# c++ - C++ 搜索的所有地方都在哪里？

> ID：14925436
> 
> 赞同：1
> 
> 时间：2013-02-17T19:59:31.997
> 
> 标签：c++, include, include-path

有没有办法检查 C++ 搜索包含的所有位置？我想了解为什么找到了一些包含而没有找到其他包含。

编辑：平台是 Linux，g++

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:04:25.557

这取决于编译器：您在尖括号中传递标头的位置，并且双引号中的标头应位于以当前文件位置为根的路径中；编译器还允许您为这些文件指定其他位置。

例如，`gcc`有两个选项 -`-I`和`-i`用于指定指定为`<header.h>`和的标题的位置`"header.h"`。如果`-I`未指定，则默认位置

```
 /usr/local/include
 libdir/gcc/target/version/include
 /usr/target/include
 /usr/include 
```

被搜索，如[文档中](http://gcc.gnu.org/onlinedocs/cpp/Search-Path.html)[所`gcc`](http://gcc.gnu.org/onlinedocs/cpp/Search-Path.html)指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:51:57.493

16.2 [cpp.include] 为 C++ 定义了这个；C中的语言几乎相同。

`#include <header.h>`在一组实现定义的位置中搜索具有该名称的“标题”。这个“头文件”不必是文件；它可能是编译器神奇地知道的东西。

`#include "header.h"`还搜索一组实现定义的位置，但它会查找名为“header.h”的文件。如果该搜索失败，它会将指令视为`#include <header.h>`.

许多编译器通过查看“当前目录”来实现第二次搜索，对于某些编译器来说，这意味着启动编译器的目录，而对于其他编译器来说，则意味着包含`#include`指令的文件所在的目录。

一般来说，您应该为您的标题使用引用的表格；尖括号，因为它们不需要文件，应该留给实现使用。并不是说为您自己的标题使用尖括号不起作用，但它是反主题的。

# java - 如何解决这个难题？

> ID：14925443
> 
> 赞同：-2
> 
> 时间：2013-02-17T20:00:44.230
> 
> 标签：java, c++, c, math, puzzle

免责声明：这不是作业问题。[我在这里](https://mathoverflow.net/questions/36552/how-to-tackle-this-puzzle-closed)偶然发现了这个谜题，我也有答案。但是，我无法找到解决方案的方法。

谜题如下：

大卫孩子年龄的乘积是他们年龄之和的平方。大卫有不到八个孩子。他的孩子没有一个年龄相同。他的孩子都没有超过14岁。他所有的孩子都至少两岁。大卫有几个孩子，他们的年龄是多少？

答案恰好是 2,4,6,12。

请提出一种以编程方式解决此问题的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T21:00:29.667

在 Python 中（这不是您所要求的，但您更需要一种算法）：

```
import operator
import itertools

possible_ages = range(2,15)

# If the list of ages passed to this function returns true, then this solves the puzzle.
def valid(ages):
    product_of_ages = reduce(operator.mul, ages, 1)
    square_of_sum_of_ages = reduce(operator.add, ages, 0) ** 2
    return product_of_ages == square_of_sum_of_ages

for number_of_children in range(1, 9):
    for ages in itertools.combinations(possible_ages, number_of_children):
        if valid(ages):
            print ages 
```

几乎立即打印出来：

```
(2, 4, 6, 12) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:45:55.237

您没有指定年龄都是整数，但我会假设这是真的。如果是这样，那么 8 个孩子中这些年龄的可能组合只有大约 1e9 种。只需枚举 ( `for(age1=2; age1<15; age1++) { for(age2=2; age2<15; age2++) { ...`) 它们并进行测试。即使在脚本解释器中，您的计算机也应该在几分钟内完成该任务。

有一些优化可以应用，因为硬编码“8”循环很笨拙，而且因为年龄列表是顺序无关的（有“4 和 2”的孩子与“2 和 4”是一样的），但坦率地说我认为这里不值得。您编写额外步骤所花费的时间将比您在运行时节省的时间更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T21:16:52.963

我使用递归方法在java中解决了它。首先程序打印所有的组合，然后给出正确的组合（匹配指定的标准）最后。

该程序立即给出输出

```
(2, 4, 6, 12) 
```

正如您在问题中指定的那样。

```
public class Tackle {
static int[] ages = {2,3,4,5,6,7,8,9,10,11,12,13,14};   // Since the program uses a recursive function,
static StringBuffer sb = new StringBuffer("");          // the variables are declared as static
static int x=0,occurances=0;
static int sum,pdt=1,count=0;
static String[] instances = new String[100];
static void recurse(int a[], int k, int n) throws Exception
{
    if(k==n)    // This program obtains various combinations using binary technique
    {
        for(int i=0;i<n;i++)
            if(a[i] == 1){
                    System.out.print(ages[i]+" ");   // Displays all the combinations available             
                    sum = sum + ages[i];
                    pdt = pdt * ages[i];  
                    count++;                                        
                    sb.append(String.valueOf(ages[i]+" "));
                    }
                    if(Math.pow(sum, 2) == pdt && count<8){     // Checking the criteria
                        instances[occurances++] = sb.toString();
                    }

                    sb = new StringBuffer("");
                    count = 0;
                    sum = 0;
                    pdt = 1;
                    System.out.println("");
    }
    else for(int i=0;i<=1;i++)
    {       
        a[x++] = i;
        recurse(a,k+1,n);
        x--;
    }
}

public static void main(String[] args) throws Exception {
    int[] a = new int[10000];
    recurse(a,0,ages.length);
    if(occurances>0)
    {
        System.out.println("No of combinations matching: " + occurances);
        for(int i=0;i<occurances;i++)
        System.out.println("The combination of ages is [ " + instances[i] + "]");
    }
    else
        System.out.println("No combination matches the criteria. ");
}
} 
```

获得的输出是

```
[All possible combinations are listed here]
No of combinations matching: 1
The combination of ages is [ 2 4 6 12 ] 
```

# asp.net-mvc-4 - 如何在没有隐藏输入的情况下获取 AntiForgeryToken 值

> ID：14925446
> 
> 赞同：28
> 
> 时间：2013-02-17T20:00:47.550
> 
> 标签：asp.net-mvc-4

@Html.AntiForgeryToken() 呈现隐藏的输入

```
<input name="__RequestVerificationToken" type="hidden" value="GuiNIwhIJZjINHhuS_8FenaFDXIiaE" /> 
```

我怎样才能只获得代币价值？没有像这样丑陋的代码：

```
public static IHtmlString AntiForgeryTokenValue(this HtmlHelper htmlHelper) {
        var field = htmlHelper.AntiForgeryToken().ToHtmlString();
        var beginIndex = field.IndexOf("value=\"") + 7;
        var endIndex = field.IndexOf("\"", beginIndex);
        return new HtmlString(field.Substring(beginIndex, endIndex - beginIndex));
    } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-20T07:31:36.477

MVC 的 anti-CSRF 能力实际上依赖于*两个*令牌：一个是隐藏的表单元素，另一个是 cookie。所以 Html.AntiForgeryToken() 帮助器不仅仅返回一个 HTML 片段。 *它还具有设置此 cookie 的副作用。* 请注意，cookie 值和表单值不相等，因为它们各自编码不同的信息片段。

如果您使用[AntiForgery.GetTokens](http://msdn.microsoft.com/en-us/library/system.web.helpers.antiforgery.gettokens%28v=vs.111%29.aspx) API，此方法将返回原始令牌，而不是生成 HTML 片段。这个方法的参数是：

*   **oldCookieToken：**如果请求中已经包含反 CSRF cookie 令牌，请在此处提供。此参数可能为空。
*   **newCookieToken（out 参数）：**如果*oldCookieToken*为 null 或不代表有效的反 CSRF cookie 令牌，则此参数将填充您应放入响应 cookie 的值。如果*oldCookieToken*代表一个有效的 anti-CSRF 令牌，那么*newCookieToken*在方法返回时将包含 null，您不必设置响应 cookie。
*   **formToken（out 参数）：**此参数将填充回发回服务器时应出现在表单正文中的令牌。这是在调用 Html.AntiForgeryToken() 时最终被隐藏输入元素包装的值。

如果您使用此 API 手动生成 cookie 和表单令牌，则需要调用AntiForgery.Validate[的相应重载](http://msdn.microsoft.com/en-us/library/jj158363%28v=vs.111%29.aspx)来验证令牌。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-05-13T16:02:42.840

我意识到这个问题很老，但根据我在这里读到的内容，我想出了一个似乎对我有用的相当简单的解决方案。我在使用部分模板的 AngularJS SPA 上使用它，其中只有一些涉及 POST 提交。

我把这段代码放在视图的顶部：

```
@{
    string cookieToken, formToken;
    string oldCookieToken = Request.Cookies[AntiForgeryConfig.CookieName] == null ? null : Request.Cookies[AntiForgeryConfig.CookieName].Value;
AntiForgery.GetTokens( oldCookieToken, out cookieToken, out formToken );

    if( oldCookieToken == null ) 
    {
        Request.Cookies.Add( new HttpCookie( AntiForgeryConfig.CookieName,     cookieToken ) );
    }
    else 
    {
        Request.Cookies[AntiForgeryConfig.CookieName].Value = cookieToken;
    }
} 
```

然后在我需要表单的防伪令牌的任何地方（例如，在 ajax 或 angularjs POST 中）我只在标题中包含“@formToken”：

```
$http.post(route, JSON.stringify(args), {
     headers: {
        '@AntiForgeryConfig.CookieName':  '@formToken',
        'Content-Type': 'application/json; charset=utf-8',
     },
}); 
```

请注意，因为在此示例中，我希望从我的操作方法返回 JSON 数据，所以我还必须基于标头而不是表单字段来实现防伪验证。在[http://johan.driessen.se/posts/Updated-Anti-XSRF-Validation-for-ASP.NET-MVC-4-RC 上有一篇很好的帖子。](http://johan.driessen.se/posts/Updated-Anti-XSRF-Validation-for-ASP.NET-MVC-4-RC). 这是实现：

```
[AttributeUsage( AttributeTargets.Method | AttributeTargets.Class,
                AllowMultiple = false, Inherited = true )]
public sealed class ValidateJsonAntiForgeryTokenAttribute
                            : FilterAttribute, IAuthorizationFilter
{
    public void OnAuthorization( AuthorizationContext filterContext )
    {
        if( filterContext == null )
        {
            throw new ArgumentNullException( "filterContext" );
        }

        var httpContext = filterContext.HttpContext;
        var cookie = httpContext.Request.Cookies[AntiForgeryConfig.CookieName];
        AntiForgery.Validate( cookie != null ? cookie.Value : null,
                             httpContext.Request.Headers[AntiForgeryConfig.CookieName] );
    }
} 
```

以下是它的使用方法：

```
 [HttpPost]
    [ValidateJsonAntiForgeryToken]
    public JsonResult RecordVisit( VisitInfo info ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-01T05:08:46.410

这有点旧，但我没有找到真正的答案。我四处张望，找到了这个解决方案。我需要 javascriptobject 中的 formtoken，所以这个助手派上了用场。

`public static class AntiForgeryHtmlExtensions { public static string AntiForgeryFormToken(this HtmlHelper helper) { string cookieToken, formToken; AntiForgery.GetTokens(null, out cookieToken, out formToken); HttpContext.Current.Response.Cookies.Set(new HttpCookie(AntiForgeryConfig.CookieName, cookieToken)); return formToken; } }`

正如@Levi 提到的，调用 GetTokens 有副作用，所以我们必须在返回令牌之前设置 response-cookie。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-09T23:46:45.490

对于 asp.net core 使用依赖注入来获取 IAntiforgery 然后调用 GetAndStoreTokens

```
public class TestController
{
    public TestController(IAntiforgery antiforgery)
    {
        var tokens = antiforgery.GetAndStoreTokens(HttpContext);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-15T11:49:11.740

如果使用核心，您可以在布局或剃须刀页面中执行此操作，如下所示：

```
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Antiforgery
@{
    var afToken = Antiforgery.GetAndStoreTokens(HttpContextAccessor.HttpContext!).RequestToken;
}

<html lang="en">
<head></head>
<body>
    <script type="text/javascript">
        window.XCSRF = '@afToken';
        console.log(window.XCSRF);
    </script> 
```

现在您可以使用 javascript **window.XCSRF**变量访问令牌

# ios - 为什么不在我的应用程序中使用 scrollView 方法？

> ID：14925450
> 
> 赞同：0
> 
> 时间：2013-02-17T20:01:01.350
> 
> 标签：ios, cocoa-touch, uiscrollview

在我的一个视图控制器（使用 Storyboard 和 ARC 模式）中，我添加了两个 scrollView 方法？

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView 
{
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
} 
```

它们都不适用于我的应用程序。

我已经将滚动视图添加为 self.view 的子视图
但是，为什么这些滚动视图方法不起作用？请给我一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:04:48.413

这些是 UIScrollViewDelegate 方法。您必须正确地将 VC 设置为滚动视图委托并将委托从 xib 连接到 VC

1.  添加`<UIScrollViewDelegate>`到您的 VC

**.h 文件**

`@interface ExampleVC <UIScrollViewDelegate>`

使 exampleVC 成为 UIScrollViewDelegate 方法的接收者。

1.  从 Xib 将滚动视图代表连接到文件所有者（右键单击情节提要中的滚动视图，然后将代表拖动到视图控制器对象，仅此而已）

**编辑** 如果您以编程方式创建滚动视图

> [scrollView setDelegate:self];

能胜任

# java - 在内部类中找不到方法

> ID：14925458
> 
> 赞同：0
> 
> 时间：2013-02-17T20:01:38.440
> 
> 标签：java

我的代码：

```
 public class MyPanel extends JPanel {
   private Thread spawnRnn = new Thread(new SpawnRnn());

   public MyPanel() {
     spawnRnn.start();
   }

   public class SpawnRnn implements Runnable {
     public void loadData() {}
     public void run() {}
   }
   public class MainRnn implements Runnable {
     public void run() {
       spawnRnn.loadData(); //<--cannot find symbol. symbol: method loadData()
                            //location: variable spawnRnn of type Thread
     }
   }
} 
```

我指出了发生错误的地方。是什么原因以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:05:09.417

嗯，这很容易。“spawnRnn”是“Thread”类型，而不是“SpawnRnn”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T20:05:41.360

正如编译器所说，`spawnRnn`is of type `Thread`， not of type `SpawnRnn`...它没有`loadData`方法。你可能想要这样的东西：

```
public class MyPanel extends JPanel {
   private final Thread thread;
   private final SpawnRnn spawnRnn;

   public MyPanel() {
      spawnRnn = new SpawnRnn();
      thread = new Thread(spawnRnn);
      thread.start();
   }

   public class SpawnRnn implements Runnable {
     public void loadData() {}
     public void run() {}
   }

   public class MainRnn implements Runnable {
     public void run() {
       spawnRnn.loadData();
     }
   }
} 
```

这样您就可以访问`SpawnRnn`用于创建线程的实例。目前尚不清楚您是否真的需要该`thread`变量，或者您是否可以在构造函数中使用局部变量。

（此外，我将变量设置为 final 是因为当你*可以*这样做时，它会使代码更容易推理。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T20:06:31.107

问题是 spawnRnn 的类型是 Thread 而不是 SpawnRnn。

# ios - 无法使用 UIWebView 打开网页

> ID：14925459
> 
> 赞同：0
> 
> 时间：2013-02-17T20:01:46.933
> 
> 标签：ios

我正在编写一个应用程序，让用户可以从表格视图中打开 youtube 锻炼/健身视频。所以，我想为表格视图中的每个单元格传递一个给定的网站地址。代码执行没有错误，但是当我选择一个单元格时，在模拟器中没有打开任何网页。下面是实现文件的代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];

//Create a URL object
NSURL *url = [NSURL URLWithString:urlAddress];

//Switch values based on exerciseNumber
switch (exerciseNumber) {
    case 0:{
        self.title = @"Straight Leg Raise";
        urlAddress = @"http://www.youtube.com/watch?v=sb_2OVC4TuM";
    }
        break;
    case 1:{
        self.title = @"Supine Hip Abduction with Elastic Band";
        urlAddress = @"http://www.youtube.com/watch?v=9gnmbjrjEuM";
        break;
    }
    default:{
        self.title = @"No Exercise Selected";
        urlAddress = @"http://www.rehabview.com";
        break;
    }
}

//Create a URL request object
NSURLRequest *request = [NSURLRequest requestWithURL:url];

//load the request in the UIWebView
[webView loadRequest:request];  

} 
```

知道我做错了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:10:37.050

在设置字符串`NSURL`的 switch 语句之后创建对象。`urlAddress`

# java - 列计数与第 1 行的值计数不匹配

> ID：14925463
> 
> 赞同：1
> 
> 时间：2013-02-17T20:01:55.997
> 
> 标签：java, mysql

将java表单中的数据插入个人表中的MySql数据库详细信息

但我收到错误列计数与第 1 行的值计数不匹配

我正在使用 Netbeans 6.9、MySql 5.6

我已将 ID 声明为带有主键的 int，Phone 和 mobile 声明为 int，所有其他声明为 char。

```
 import java.sql.*;
 import javax.swing.*;

  public class Personal_Details extends javax.swing.JFrame{

   Connection conn;
   String url;
   Statement stmt;
   ResultSet rs;

  public javax.swing.table.DefaultTableModel tableview;
    public Personal_Details() {
    initComponents();
          tableview= new javax.swing.table.DefaultTableModel();
          jTable1 = new javax.swing.JTable(tableview);
           tableview.addColumn("ID");
           tableview.addColumn("Name");
           tableview.addColumn("Address");
           tableview.addColumn("Gender");
           tableview.addColumn("Education");
           tableview.addColumn("Phone");
           tableview.addColumn("Mobie");
           tableview.addColumn("DOB");
           jScrollPane1.setViewportView(jTable1);
      try{
      url = "jdbc:mysql:///Details";
      Class.forName("com.mysql.jdbc.Driver");
      conn = DriverManager.getConnection(url,"root","anand");
      stmt = conn.createStatement();

        }catch(Exception e){
     JOptionPane.showMessageDialog(null,e);
    }
    }

    private void btnSubmitActionPerformed(java.awt.event.ActionEvent evt) {                                          
    {
    try{
    stmt.executeUpdate("insert into
    personal(ID,Name,Address,Gender,Education,Phone,Mobile,DOB) values
    ("+tfIDNo.getText()+
         ",'"+tfName.getText()+"','"+tfAddress.getText()+"','"+tfGender.getText()+"','"
         +                                                                        
      "','"+tfEducation.getText()+"',"+tfPhone.getText()+","+tfMobile.getText()+",'"+
     tfDob.getText()+"')");

   rs = stmt.executeQuery("select * from personal where ID="+tfIDNo.getText()+" and   
   Name='"+tfName.getText()+"' and Addess='"+tfAddress.getText()+"'"
         + "' and Gender='"+tfGender.getText()+"' and  
    Education='"+tfEducation.getText()+"' and phone="+tfPhone.getText()+" "
         + " and Mobile="+tfMobile.getText()+" and DOB='"+tfDob.getText()+"'");
    }catch(Exception e){
   JOptionPane.showMessageDialog(null,e);
   }
   }
   }

   public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new Personal_Details().setVisible(true);
        }
    });
}

// Variables declaration - do not modify
private javax.swing.JButton btnClear;
private javax.swing.JButton btnClose;
private javax.swing.JButton btnSubmit;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JTable jTable1;
private javax.swing.JLabel lblAddress;
private javax.swing.JLabel lblDob;
private javax.swing.JLabel lblDobFormat;
private javax.swing.JLabel lblEducation;
private javax.swing.JLabel lblEnterYourDetails;
private javax.swing.JLabel lblGender;
private javax.swing.JLabel lblIDNo;
private javax.swing.JLabel lblMobile;
private javax.swing.JLabel lblName;
private javax.swing.JLabel lblPhone;
private javax.swing.JTextField tfAddress;
private javax.swing.JTextField tfDob;
private javax.swing.JTextField tfEducation;
private javax.swing.JTextField tfGender;
private javax.swing.JTextField tfIDNo;
private javax.swing.JTextField tfMobile;
private javax.swing.JTextField tfName;
private javax.swing.JTextField tfPhone;
}

  Database - ID, Name, Address, Gender, Education, Phone, Mobile, DOB. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:06:00.410

用这个更正你的`INSERT`陈述：

```
String s = "insert into 
            personal(ID, Name,Address, Gender, Education, Phone, Mobile, DOB) 
            values (" + "'" + t.getText() + "','" + t.getText() + "','" 
            + t.getText() + "','" + t.getText() + "','" + t.getText() + "','"
            + t.getText() + "','" + t.getText() + "','" + t.getText() + "')"; 
```

用你的替换我`t.getText()`的，现在它应该可以工作了。

**注意：**但我建议您使用`PreparedStatement`istead`Statement`和使用 placeholders **`?`**。这个解决方案更干净、更安全！( [**`SQL injection`**](http://en.wikipedia.org/wiki/SQL_injection)) 并且更易于阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-23T09:02:17.780

@Prince 使用 PreparedStatement 而不是简单的 Statement，因为这会提高程序的性能。像这样：

```
PreparedStatement Pstatement=Your_Connection_Object.prepareStatement("insert 
into mydb.Stock values(?,?,?,?,?,?,?,?)");

            //Specifying the values of it's parameter
Pstatement.setString(1,tfIDNo.getText());
Pstatement.setString(2,tfName.getText());
Pstatement.setString(3,tfAddress.getText());
Pstatement.setString(4,tfGender.getText());
Pstatement.setString(5,tfEducation.getText());
Pstatement.setString(6,tfPhone.getText());
Pstatement.setString(7,tfMobile.getText());
Pstatement.setString(8,tfDob.getText());

Pstatement.executeUpdate(); 
```

如您所见，我们正在为值传递参数 (?)。它的值将通过调用 PreparedStatement 的 setter 方法来设置。

# php - 在 windows 中安装或使用 php composer (失败)

> ID：14925466
> 
> 赞同：2
> 
> 时间：2013-02-17T20:02:39.487
> 
> 标签：php, installation, composer-php, packagist

所以基本上我在我的windows安装上使用了composer，没有任何问题。突然我在每个项目上都遇到了这个错误（手动安装 composer.phar）：

```
 [RuntimeException]                                                           
  Could not rename "Xampp\htdocs\symfony.dev\vendor/twig/twig/fabpot-Twig-  
  70fff8b" to "Users\xxx\AppData\Local\Temp/23cd0cd163431d8305983511f9  
  b1c2af". 
```

我尝试在不同的 php 应用程序上安装或更新。总是一样的结果。

我还尝试通过 Windows 安装程序安装作曲家，这导致我收到此错误消息：

```
Internal Error [ERR_LOGIC]: An internal script did not run correctly (exit code 1) 
```

到目前为止，我无法获得任何官方帮助。还有其他人遇到过这个错误吗？感谢您的帮助...提前非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-15T03:15:39.590

当您运行任何命令或启动 cmd. 您已收到：

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved. 
The system cannot find the path specified. 
```

如果有，请尝试以下操作。

```
Open the Registry Editor, type regedit and hit Enter
Navigate to HKEY_CURRENT_USER\Software\Microsoft\Command Processor\AutoRun 
and clear the values. 
```

# django - 如果没有上传文件，Django 表单文件字段未设置为无

> ID：14925474
> 
> 赞同：1
> 
> 时间：2013-02-17T20:03:30.940
> 
> 标签：django, forms, file

鉴于此模型

```
class ScrapbookItem(models.Model):
    scrapbook = models.ForeignKey(Scrapbook)
    photo = models.ImageField(upload_to="uploads/scrapbook", blank=True, null=True, default=None)
    comment = models.TextField(null=True, blank=True)

class ScrapbookItemDesignIdeaForm(forms.ModelForm):
    class Meta:
        model = ScrapbookItem
        fields = ['scrapbook', 'comment'] 
```

当我提交表单时，照片字段没有设置为无，为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:17:57.757

我猜这是因为你有`blank=True`你的字段定义。你可能不需要这个，因为你有一个默认值。

# java - Java LWJGL - 垂直射击错误

> ID：14925475
> 
> 赞同：0
> 
> 时间：2013-02-17T20:03:32.433
> 
> 标签：java, rotation, position, lwjgl

所以我制作了自己的 FPS、图形和枪支以及所有这些很酷的东西；当我们开火时，子弹应该在十字准线内随机移动，定义如下：

```
 float randomX=(float)Math.random()*(0.08f*guns[currentWeapon].currAcc)-(0.04f*guns[currentWeapon].currAcc);
    float randomY=(float)Math.random()*(0.08f*guns[currentWeapon].currAcc)-(0.04f*guns[currentWeapon].currAcc);

    bulletList.add(new Bullet(new float[]{playerXpos, playerYpos, playerZpos}, new float[]{playerXrot+randomX, playerYrot+randomY}, (float) 0.5)); 
```

我们计算 X 和 Y 的随机性（假设你的十字准线大小 (guns[currentWeapon].currAcc) 为 10，那么子弹可以向任何一侧移动 0.4 并且它会保留在十字准线内。计算完之后，我们发送玩家位置作为子弹的起始位置，以及它打算采取的方向（具有额外随机性的玩家方向），最后是速度（不是重要的 atm，tho）。

现在，每一帧，子弹都必须移动，所以对于每个子弹，我们调用：

```
position[0] -= (float)Math.sin(direction[1]*piover180) * (float)Math.cos(direction[0]*piover180) * speed;
position[2] -= (float)Math.cos(direction[1]*piover180) * (float)Math.cos(direction[0]*piover180) * speed;

position[1] += (float)Math.sin(direction[0]*piover180) * speed; 
```

因此，对于 X 和 Z 位置，子弹根据玩家在 Y 和 X 轴上的旋转移动（假设您水平观察 Z，X 为 0 度，Y 为 0；X 将移动 0*1*speed 和 Z将移动 1*1* 速度）。

对于 Y 位置，子弹根据 X 轴上的旋转移动（在 -90 和 90 之间变化），这意味着如果玩家水平看，它会保持在相同的高度，如果玩家垂直看，它会完全向上移动。

现在，问题如下：如果我水平拍摄，一切都很好。子弹散布在十字准线周围，如[https://dl.dropbox.com/u/16387578/horiz.jpg所示](https://dl.dropbox.com/u/16387578/horiz.jpg)

问题是，如果我开始向上看，子弹开始集中在中心周围，并使这条垂直线越靠近我看的天空。 [https://dl.dropbox.com/u/16387578/verti.jpg](https://dl.dropbox.com/u/16387578/verti.jpg) 第一张图片在 X 轴上大约 40º，第二张稍微高一点，最后一张是我垂直看的时候。

我在这里做错了什么？我自己设计了这个解决方案，我很确定我在某个地方搞砸了，但我想不通：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:14:15.283

基本上垂直偏移计算 (float)Math.cos(direction[0]*piover180) 搞砸了 X 和 Z 的运动，因为它们都会被减少到 0。子弹会形成一条垂直线，因为它们会旋转X 轴具有随机性。我的解决方案是在垂直偏移计算之后添加随机性，因此在您触发它们后它们仍然会左右上下移动。

我还必须添加一个额外的随机值，否则你只会画一条对角线或一个十字。

```
 float randomX=(float)Math.random()*(0.08f*guns[currentWeapon].currAcc)-(0.04f*guns[currentWeapon].currAcc);
    float randomY=(float)Math.random()*(0.08f*guns[currentWeapon].currAcc)-(0.04f*guns[currentWeapon].currAcc);
    float randomZ=(float)Math.random()*(0.08f*guns[currentWeapon].currAcc)-(0.04f*guns[currentWeapon].currAcc);

    bulletList.add(new Bullet(new float[]{playerXpos, playerYpos, playerZpos}, new float[]{playerXrot, playerYrot}, new float[]{randomX,randomY, randomZ},(float) 0.5)); 
```

和移动代码...

```
 vector[0]= -((float)Math.sin(dir[1]*piover180) * (float)Math.cos(dir[0]*piover180)+(float)Math.sin(random[1]*piover180)) * speed;
    vector[1]= ((float)Math.sin(dir[0]*piover180)+(float)Math.sin(random[0]*piover180)) * speed;
    vector[2]= -((float)Math.cos(dir[1]*piover180) * (float)Math.cos(dir[0]*piover180)+(float)Math.sin(random[2]*piover180)) * speed; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-16T17:52:01.870

您不需要进行任何复杂的数学运算，您的问题是，当您围绕 y 轴旋转子弹以进行枪支传播时，如果您直接向上看（也就是说，通过 y 轴，子弹正在旋转绕着它前进的路径，这意味着没有任何旋转（想象一下将手臂向前伸向墙壁并转圈和将手臂伸向天空并转圈之间的区别。请注意，您的手没有当指向天空（y轴）时根本不动，所以你会得到那些“对角线”子弹传播。

**诀窍是在按玩家注视的方向旋转之前**进行子弹散布，因为这样您就知道当您旋转散布时，矢量保证垂直于 x 轴和 y 轴。

```
 this.vel = new THREE.Vector3(0,0,-1);
  var angle = Math.random() * Math.PI * 2;
  var mag = Math.random() * this.gun.accuracy;
  this.spread = new THREE.Vector2(Math.cos(angle) * mag,Math.sin(angle) * mag);
  this.vel.applyAxisAngle(new THREE.Vector3(0,1,0),this.spread.y / 100); //rotate first when angle gaurenteed to be perpendicular to x and y axes
  this.vel.applyAxisAngle(new THREE.Vector3(1,0,0),this.spread.x / 100); 
  this.vel.applyAxisAngle(new THREE.Vector3(1,0,0),player.looking.x); //then add player looking direction
  this.vel.applyAxisAngle(new THREE.Vector3(0,1,0),player.looking.y);
  this.offset = this.vel.clone() 
```

我不使用 java，但我希望你能通过这个 javascript 了解我在做什么。我通过spread.y 和spread.x 沿负z 方向（相机的默认方向）旋转一个矢量，然后我通过玩家面对的角度的俯仰和偏航旋转。

# unity3d - 如何让 Unity 3D 中的第三人称控制器连续运行

> ID：14925477
> 
> 赞同：1
> 
> 时间：2013-02-17T20:03:42.070
> 
> 标签：unity3d, unityscript

我正在制作一个统一的赛车游戏，比如 Temple Run，玩家需要不断地奔跑并收集水果/能量提升。我正在使用第三人默认建筑工人来完成这项工作。但是无法弄清楚要在脚本中调整什么以使其连续运行..帮助我在哪里需要更改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T23:26:30.610

Ok first of all you need animations. Then change them to loop and call them run or turn. then for part of the script.

```
function Update ()
{
     animation.Play("run");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T05:05:26.553

看看类似的[问题](http://answers.unity3d.com/questions/316685/changeing-walk-script-to-always-move.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T07:52:39.320

我相信你应该看看这个脚本：`Standard Assets\Character Controllers\Sources\Scripts\CharacterMotor.js`.

最简单的部分是改为`var sprint : boolean = false;`设置`true`。

如果您不需要步行代码，则必须清理该脚本中的更多代码以避免使用不必要的代码行。

# asp.net-mvc - 如何强制 MVC4/Razor 在 SelectListItem 内呈现标签？

> ID：14925479
> 
> 赞同：0
> 
> 时间：2013-02-17T20:03:53.877
> 
> 标签：asp.net-mvc, razor, twitter-bootstrap, asp.net-mvc-4, font-awesome

我可以在选项标签中添加标签，并且它可以工作（不知道它是否是有效的 HTML4/5，但它至少在 Firefox 中有效）：

```
<select>
  <option><i class="icon-plus"></i>Add item</option>
  <option><i class="icon-remove"></i>Remove item</option>
  <option><i class="icon-edit"></i>Edit item</option>
</select> 
```

我在这些选项标签中放置了 Bootstrap/FontAwesome 网络字体图标。

但是我使用的是 MVC4/Razor，我无法获得正确的语法来使其正确呈现。它对所有这些内部标签进行编码，我得到`&lt;`,`&gt;`等。

这就是我正在做的事情：

```
// first I make a new list with the icons inside
var items = Model.Items.Select(q => new SelectListItem() {
  Selected = q.Selected,
  Text = "<i class=\"icon-add\"></i>" + q.Text,
  Value = q.Value
  });
// then render the dropdown
Html.DropDownListFor(m => m.SelectedItem, items, "All") 
```

我如何让这个工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:24:42.323

你不能开箱即用。根据您需要使用它的频率 - 我个人建议通过循环手动进行。

如果需要，您可以为下拉列表编写扩展方法/帮助程序。

我在这里找到了一个类似的例子，虽然这个人用它来自定义'select'标签，你会想要自定义'options'标签：[Fun (?) with Linq Expressions in extension methods](https://stackoverflow.com/questions/7936579/fun-with-linq-expressions-in-extension-methods/7938038#7938038)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:46:37.390

好的，我*选择*了一个简单的*选项*...

只需将 FontAwesome 类放在`<option>`标签上，而不是嵌套的子`<i>`标签上。这样标记是有效的。

当然，这需要在循环中手动完成。

# actionscript-3 - 在 Flash Professional 中添加其他类作为子类

> ID：14925480
> 
> 赞同：0
> 
> 时间：2013-02-17T20:04:07.523
> 
> 标签：actionscript-3, flash, flash-cs5

使用 Flash Professional CS5，我试图在我的脚本中添加一个子对象。我想在创建时将创建子对象的类作为参数提供。问题是当我尝试测试项目时，我收到一条错误消息`Incorrect number of arguments. 0 expected.`

我的`MainClass.as`：

```
package  {

import flash.display.MovieClip;
import flash.events.Event;
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;

public class MainClass extends MovieClip {

    var menuClass:MenuClass;
    var gameClass:GameClass;
    var highClass:HighscoreClass;

    public function Main() {
        this.StartOfProject();
    }

    public function StartOfProject() {
        menuClass = new MenuClass(this);
        this.addChild(menuClass);
        highClass = new HighscoreClass();
    } 
```

我的`MenuClass.as`：

```
package  {

public class MenuClass extends MovieClip {
    var mainClass:MainClass;

    public function Menu(mainClass:MainClass) {
        this.mainClass = mainClass;
        ...
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:11:00.640

您错误地命名了 MenuClass 的构造函数。它应该是“MenuClass”而不是“Menu”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:12:57.960

改变：

`public function Main() { this.StartOfProject(); }`

至：

`public function MainClass() { this.StartOfProject(); }`

和： `public function Menu(mainClass:MainClass)`

至：`public function MenuClass (mainClass:MainClass)`

看看这是否已经解决了你的问题

# php - f将php脚本写入文件

> ID：14925482
> 
> 赞同：0
> 
> 时间：2013-02-17T20:04:11.003
> 
> 标签：php, fwrite

基本上，我可以将 html 标签/文本等写入文件。这一切都很好。但是，我需要能够将一些实际的 php 写入文件，而我完全不知道应该如何去做。

无论如何，我必须帮助更好地展示我的情况：

```
$path = substr(md5(time() . md5(rand())), 0, 8);
$dir = substr(md5($_SERVER['REMOTE_ADDR']), 0, 4);
$fpath = "b/" . $dir "/" . $path;
$file = 'index.php';

$handle = fopen($fpath . '/' . $file, 'w') or die ('cannot create the file'); 
include template.php;
fwrite($handle, $pt1 . $pt2 . $pt3); 
```

在 template.php 中，我有变量在 $pt1,$pt2,$pt3 中保存了很多 html 但是，在每个 'pt' 之间我需要有一些实际的 php。

因此，例如，我需要在每个 'pt' 和 $this 之间存在 $this ：

```
<?php 
if(isset($_SESSION['user'])){
echo "hello";
}else{
echo "bye";
} 
?> 
```

我该怎么做？

*虽然文件和路径的实际创建很好，但是，我知道它可能看起来很不寻常，但是我喜欢这样。它只是将 php 脚本添加到 php 文件中。

*   我也尝试将脚本粘贴在变量中，但似乎只是将它们作为纯文本打印在文件中，而不是执行它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:13:59.973

每个 pt 之间是否意味着`$p1 . $var . $pt2`？

尝试这样的事情：

```
<?PHP
$var = '<?php 
if(isset($_SESSION["user"])){
echo "hello";
}else{
echo "bye";
} 
?>';
echo $pt1 . $var . $pt2;
?> 
```

**编辑：**

此外，您可以使用将长内容包装到变量中

```
<?PHP
$var = <<< 'PHP'
<?php 
if(isset($_SESSION["user"])){
echo "hello";
}else{
echo "bye";
} 
?>
PHP;
$pt1 = 'before';
$pt2 = 'after';
echo "$pt1 $var $pt2";
?> 
```

# clojure - 是否可以将特定 JAR 添加到 nrepl 服务器使用的 Clojure 类路径？

> ID：14925483
> 
> 赞同：2
> 
> 时间：2013-02-17T20:04:12.570
> 
> 标签：clojure, classpath

我使用 Emacs 和 nrepl.el 进行 Clojure 开发，我想在类路径中包含一个 JAR 文件（在 Leiningen/Maven 上不可用的专有 JDBC 驱动程序），以便在 REPL 中使用。

我无意将此 JAR 作为项目的一部分发布。我只是在编写一些实用程序函数供我自己使用，所以我宁愿根本不让它与 Leiningen/Maven 一起使用，而只是坚持使用类路径。

是否可以手动将 jar 添加到`nrepl-jack-in`使用的依赖项集中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:54:39.930

这是可能的，但不是通过 nrepl.el，因为它将类路径管理卸载到 Leiningen。

您可以使用`mvn deploy:deploy-file`将 JAR 文件部署到本地 Maven 存储库中。之后，只需将标识符添加到 :dependencies in 中`project.clj`，Leiningen 就会很好地获取它。

如果这看起来太多的手动工作，请查看 lein-localrepo 插件：[https](https://github.com/kumarshantanu/lein-localrepo) ://github.com/kumarshantanu/lein-localrepo 。

请注意，为您的项目做出贡献的每个人都需要手动执行此操作。请参阅[https://github.com/technomancy/leiningen/wiki/Repeatability](https://github.com/technomancy/leiningen/wiki/Repeatability)以了解为什么采用这种方式通常是一个坏主意并且与 Leiningen 背道而驰的扩展讨论。如果您在团队中工作，从长远来看，设置私有存储库是最佳解决方案。

# c++ - 多线程环境中的函数错误

> ID：14925490
> 
> 赞同：0
> 
> 时间：2013-02-17T20:04:57.797
> 
> 标签：c++, multithreading, memory, singleton

我的函数所做的是遍历一个布尔数组，并在找到一个设置为 false 的元素时，将其设置为 true。该函数是我的内存管理器单例类中的一个方法，它返回一个指向内存的指针。我收到一个错误，我的迭代器似乎循环并最终从头开始，我相信这是因为多个线程正在调用该函数。

```
void* CNetworkMemoryManager::GetMemory()
{
        WaitForSingleObject(hMutexCounter, INFINITE);

    if(mCounter >= NetConsts::kNumMemorySlots)
    {
       mCounter = 0;
    }

    unsigned int tempCounter = mCounter;

    unsigned int start = tempCounter;

    while(mUsedSlots[tempCounter])
    {
        tempCounter++;

        if(tempCounter >= NetConsts::kNumMemorySlots)
        {
            tempCounter = 0;
        }

        //looped all the way around
        if(tempCounter == start)
        {
            assert(false);
            return NULL;
        }
    }

    //return pointer to free space and increment

    mCounter = tempCounter + 1;
        ReleaseMutex(hMutexCounter);

    mUsedSlots[tempCounter] = true;
    return mPointers[tempCounter];
} 
```

我的错误是在循环中发出的断言。我的问题是如何修复该功能，并且该错误是由多线程引起的吗？

编辑：添加了一个互斥锁来保护 mCounter 变量。没变。错误仍然出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:30:20.137

我不能说错误是否是由多线程引起的，但我可以说你的代码不是线程安全的。

你释放锁

```
ReleaseMutex(hMutexCounter); 
```

然后访问 tempCounter 和 mUsedSlots：

```
mUsedSlots[tempCounter] = true;
return mPointers[tempCounter]; 
```

两者都不是 const。这是一场数据竞争，因为您没有正确序列化对这些变量的访问。

将其更改为：

```
mUsedSlots[tempCounter] = true;
const unsigned int retVal = mPointers[tempCounter];
ReleaseMutex(hMutexCounter);
return retVal; 
```

那么至少你的代码是线程安全的，这是否解决了你的问题我不能说，试试看。在具有多核的机器上，由于数据竞争，会发生非常奇怪的事情。

作为一般的最佳实践，我建议查看一些 C++11 同步功能，例如`std::mutex`and `std::lock_guard`，这会让你摆脱自我，因为 std::lock_guard 会自动释放该锁定，因此你不会忘记，并且在这种情况下，你不能不经意间做得太早。这也将使您的代码更具可移植性。如果您还没有 C++11，请使用 boost 等价物。

# java - 未使用导入的 OWL 文件

> ID：14925492
> 
> 赞同：1
> 
> 时间：2013-02-17T20:05:03.637
> 
> 标签：java, import, jena, ontology, owl

我从 Protege 以 TURTLE 表示法创建了一个 OWL 文件，它使用两个导入：

```
owl:imports <http://localhost/imported1.owl> ,
<http://localhost/imported2.owl> . 
```

我已经在 J​​ena 上加载了这个。当我查询文件时，我没有从导入中得到任何答案，而只是从文件本身中得到答案。例如，如果我有一个类“Person”并且我查询模型（使用 SPARQL 或使用推理器）以查找该类的个人，我只会在我的文件中获取个人，而不是从导入的文件“imported1.owl”和“imported2.owl”。

我已阅读默认加载导入的文件（[导入处理](http://jena.apache.org/documentation/ontology/index.html#compound-ontology-documents-and-imports-processing)）我还有什么需要做的吗？

例如，如果我将三个文件合二为一，而不是使用导入，我会得到预期的结果。

**==== 编辑 ====**

这两个文件（imported1.owl 和imported2.owl）都可以通过Web 服务器访问（如果我输入了URL，我就可以正确地得到文件）。

这是代码：

```
 Model model = ModelFactory.createDefaultModel();
        OntModel ontology = ModelFactory.createOntologyModel();
        InputStream in = FileManager.get().open(file);
        if (in == null) {
            return;
        } else {
            ontology.read(in, null, "TURTLE");
        }
        Reasoner owlReasoner = ReasonerRegistry.getOWLReasoner();
        Reasoner reasoner = owlReasoner.bindSchema(ontology);
        InfModel infModel = ModelFactory.createInfModel(reasoner, ontology);

        String queryString = " PREFIX eg: <http://eg.owl#>"
                + " SELECT ?p WHERE { ?p <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> eg:Person }";

        Query query = QueryFactory.create(queryString);
        QueryExecution qe = QueryExecutionFactory.create(query, ontology);
        ResultSet results = qe.execSelect();
        ResultSetFormatter.out(System.out, results, query); 
```

如果此代码使用“owl:imports”针对 owl 文件运行，我将仅获得文件本身中定义的 Person 实例，但忽略导入文件中定义的实例。

**==== 编辑 2====**

[无关]

似乎我做错了什么 - 由于原始 .owl 文件中的错误而未加载导入，或者 Jena 仅使用基本文档。

**==== 编辑 3====**

似乎模型已正确加载（我还检查了 hasLoadedImport()）：

本体.countSubModels(): 2

所以我丢弃了没有正确加载的导入。不知何故，Jena 似乎只使用基本文件而不是导入的文件......

# javascript - 为什么函数的 this 关键字设置为 window 但 window 没有函数作为属性

> ID：14925495
> 
> 赞同：0
> 
> 时间：2013-02-17T20:05:12.437
> 
> 标签：javascript

```
(function() {
  var testFnk = function() {
    console.log(this);
  }

  console.log(window.testFnk);
  testFnk();
})(); 
```

这段代码的输出是：

*   不明确的
*   窗户

你能解释为什么在函数内部 this 指的是 Window，但检查 window.testFnk 是未定义的吗？

编辑：当我查看答案时，我的问题没有明确说明。我要说的是：为什么在这两种情况下记录的值都是“未定义”或“窗口”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:11:51.293

因为在非严格模式下，`this`默认为`window`在浏览器中。在严格模式下，它将是`undefined`.

`window.testFnk`未定义，因为您尚未将`testFnk`方法添加到`window`对象。您可以通过分配来显式执行此操作`window`，也可以通过隐式全局隐式执行此操作（这将在严格模式下引发异常，仅供参考）；

```
(function() {
  window.testFnk = function() {
    console.log(this);
  }

  console.log(window.testFnk);
  testFnk();
})(); 
```

# java - 递归地创建新对象是否比创建引用慢？

> ID：14925497
> 
> 赞同：2
> 
> 时间：2013-02-17T20:05:32.560
> 
> 标签：java, recursion, instantiation

假设我有以下代码：

```
 public static ArrayList<Integer> doSomething(int n) {

    ArrayList<Integer> list = new ArrayList<Integer>();
    if (n <= 0)
        return list ;
    list = ListMethods.doSomething(n - 1);
    list.add(n);

    return list; 
```

这比这段代码慢吗：

```
 public static ArrayList<Integer> doSomething(int n) {

    ArrayList<Integer> list = null;
    if (n <= 0)
        return list = new ArrayList<Integer>();
    list = ListMethods.doSomething(n - 1);
    list.add(n);

    return list; 
```

我问是因为我的一位讲师在他的笔记中使用后一种代码，而我看到其他在线指南使用前者。只是个人喜好，还是有速度差异？另外，如果存在速度差异，是否太小而无需担心？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T20:12:33.337

是的，第一个代码比较慢。对于大于 0的*每个*值，您最终得到的第一部分相当于：`n`

```
ArrayList<Integer> list = new ArrayList<Integer>();
list = ListMethods.doSomething(n - 1); 
```

创建一个新`ArrayList`对象并立即为同一个变量分配不同的值是没有意义的。

第二个代码更好，但在可读性方面仍然可以显着提高：

```
public static ArrayList<Integer> doSomething(int n) {
    if (n <= 0) {
        return new ArrayList<Integer>();
    }
    ArrayList<Integer> list = doSomething(n - 1);
    list.add(n);
    return list;
} 
```

`list`这仅在实际*需要*时才使用变量。甚至为`n <= 0`您要返回一个新*的*`ArrayList<Integer>`.

# c++ - 从外部文件向 ROS 中的 OpenCV C++ 程序提供参数

> ID：14925499
> 
> 赞同：0
> 
> 时间：2013-02-17T20:05:36.253
> 
> 标签：c++, file, opencv, parameters, ros

我想在**ROS中使用****OpenCV C++**接口编写一个程序。我想从外部文件提供程序使用的参数（不确定哪种格式适合）。

 **说，我在程序中使用阈值函数，**而不是每次在程序中更改阈值，make 然后运行**，我希望程序从文件中获取阈值，以便**如果我想更改任何值，我可以在外部文件中做到这一点**。

我想要这个，因为我认为**这对第三人会有所帮助，他可以只更改文件中的各种参数并观察结果，**而不是打开程序，更改值，制作和运行（*有时第三人可能不是程序员，只是希望看到结果，在这种情况下，他将不知道在哪里更改程序中的参数的技术细节*）

有没有办法在**ROS**中做到这一点？也可以建议任何仅用于需要多个参数的**C++程序的方法。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:16:54.543

好吧，如果它只是简单的参数：

```
#include <fstream>

// write:
int param1 = 17;
float param2=2.5f;
ofstream o("params.txt");
o << param1 << endl;
o << param2 << endl;

// read:
int param1;
float param2;
ifstream i("params.txt");
i >> param1;
i >> param2; 
```

类似的想法，更先进一点，对于 opencv 的东西，使用 FileStorage，它是一个键值存储：

```
Mat face_labels;
Mat face_features;

cv::FileStorage fs("face.yml",cv::FileStorage::WRITE);
fs << "L" << face_labels;
fs << "F" << face_features;

cv::FileStorage sf("face.yml",cv::FileStorage::READ);
sf["L"] >> face_labels;
sf["F"] >> face_features; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:11:19.647

您可以通过 ROS 参数执行此操作。请参阅[roscpp 参数教程](http://www.ros.org/wiki/roscpp_tutorials/Tutorials/Parameters)和更详细的[roscpp 参数概述](http://www.ros.org/wiki/roscpp/Overview/Parameter%20Server)。您可能希望继续使用 NodeHandle::param(...) 表单，因为它可以轻松指定默认值。**

# java - Spring Security 并不总是执行注销

> ID：14925506
> 
> 赞同：1
> 
> 时间：2013-02-17T20:06:11.580
> 
> 标签：java, spring, security, spring-security

这是我的 Spring Security 配置：

*网页.xml*：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
              http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5" xmlns="http://java.sun.com/xml/ns/javaee">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            classpath:applicationContext-security.xml
        </param-value>
    </context-param>

    <context-param>
        <param-name>webAppRootKey</param-name>
        <param-value>tutorial.root</param-value>
    </context-param>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <listener>
        <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
    </listener>

    <servlet>
        <servlet-name>greetServlet</servlet-name>
        <servlet-class>ru.andrew.springsecuregwt.server.GreetingServiceImpl</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>greetServlet</servlet-name>
        <url-pattern>/springsecuregwt/greet</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>Springsecuregwt.html</welcome-file>
    </welcome-file-list>
</web-app> 
```

*applicationContext-security.xml*：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <debug />

    <global-method-security pre-post-annotations="enabled" />

    <http pattern="/static/**" security="none"/>
    <http pattern="/loggedout.jsp" security="none"/>

    <http use-expressions="true">
        <intercept-url pattern="/" access="isAuthenticated()" />
        <intercept-url pattern="/secure/extreme/**" access="hasRole('supervisor')"/>
        <intercept-url pattern="/secure/**" access="isAuthenticated()" />
        <intercept-url pattern="/**" access="isAuthenticated()" />
        <form-login />
        <logout logout-success-url="/loggedout.jsp" delete-cookies="JSESSIONID"/>
        <remember-me />
    </http>

    <beans:bean id="encoder" class="org.springframework.security.crypto.password.StandardPasswordEncoder"/>

    <authentication-manager>
        <authentication-provider>
            <password-encoder ref="encoder"/>
            <user-service>
                <user name="rod" password="4efe081594ce25ee4efd9f7067f7f678a347bccf2de201f3adf2a3eb544850b465b4e51cdc3fcdde" authorities="supervisor, user, teller" />
                <user name="dianne" password="957ea522524a41cbfb649a3e293d56268f840fd5b661b499b07858bc020d6d223f912e3ab303b00f" authorities="user,teller" />
                <user name="scott" password="fb1f9e48058d30dc21c35ab4cf895e2a80f2f03fac549b51be637196dfb6b2b7276a89c65e38b7a1" authorities="user" />
                <user name="peter" password="e175750688deee19d7179d444bfaf92129f4eea8b4503d83eb8f92a7dd9cda5fbae73638c913e420" authorities="user" />
            </user-service>
        </authentication-provider>
    </authentication-manager>

</beans:beans> 
```

当我点击注销链接时，我成功登陆了注销页面，但是如果我进入

```
localhost:8080/projectname 
```

在新的 Chrome 选项卡中，我无需任何身份验证页面即可访问该应用程序。

我做错了什么，如何解决此类安全问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:26:12.393

Spring remembeMe 功能创建一个名为“SPRING_SECURITY_REMEMBER_ME_COOKIE”的 cookie。然后它使用它来进行身份验证。如果您的注销仅删除 webapp 容器会话 ID，则身份验证将检查该 ID，然后检查此 cookie 的存在。因此，您需要确保在注销时删除此 cookie。

# scala - 我希望我的函数返回一个 Stream[T]，但我不知道如何对其进行类型检查

> ID：14925509
> 
> 赞同：2
> 
> 时间：2013-02-17T20:06:47.307
> 
> 标签：scala

为了更好地学习 Scala，我正在玩一些基本的编程练习，但我一直在试图弄清楚为什么我的代码不会进行类型检查。

症结在于`possibilities`功能。我想要一个函数，它返回一个流，其中包含给定数字列表的所有可能的数字排列和数学运算符。

我很困惑，因为将函数的返回类型更改为`Stream[Object]`可以很好地读取类型检查并返回似乎是方程流的结果。但是，下面包含的版本**没有**类型检查，返回类型`possibilites`设置为`Stream[Equation]`。

附带说明一下，我知道在 opsMix 中附加卡片不会将`Operation`s 置于正确的顺序，但我想先解决这部分问题。我想我会使用`flatMap`or `zipAll`with`flatten`来完成那部分。

另外 -**这不是家庭作业！**

```
abstract class Operation
case class Add() extends Operation
case class Subtract() extends Operation
case class Multiply() extends Operation
case class Divide() extends Operation
case class Num(val valu: Float) extends Operation

type Equation = List[Operation]

def calc(equa: Equation): Float =
  equa match {
    case Num(x) :: List() => x
    case Num(x) :: y :: Num(z) :: xs => y match {
      case Add() => calc( Num(x + z)::xs )
      case Subtract() => calc( Num(x - z)::xs )
      case Multiply() => calc( Num(x * z)::xs )
      case Divide() => calc( Num(x / z)::xs )
    }
    case _ => 0
  }

// from http://stackoverflow.com/questions/1070859/listing-combinations-with-repetitions-in-scala
def mycomb[T](n: Int, l: List[T]): List[List[T]] =
  n match {
    case 0 => List(List())
    case _ => for(el <- l;
              sl <- mycomb(n-1, l dropWhile { _ != el } ))
              yield el :: sl
}
def comb[T](n: Int, l: List[T]): List[List[T]] = mycomb(n, l.removeDuplicates)

val ops = List(Add, Subtract, Multiply, Divide)
def possibilities(cards: List[Num]) : Stream[Equation] =
  { for {
      hand <- cards.permutations
      opMix <- comb(cards.length-1, ops)
    } yield hand ++ opMix
  }.toStream

// test value:
val ppp = possibilities(List(Num(20), Num(3), Num(7), Num(100))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T20:50:42.197

问题是您将操作案例类声明为`Add()`etc.，但在`val ops`您使用`List(Add, ...)`. 如果您尝试`ops`使用正确的类型声明：

```
val ops: List[Operation] = List(Add, Subtract, Multiply, Divide) 
```

你会看到错误。（这就是为什么自己添加类型而不是依赖类型检查器通常很有帮助 - 它有助于发现错误。）

我建议您更新您的类层次结构以`case object`用于单例操作：

```
 abstract class Operation
  case object Add extends Operation
  case object Subtract extends Operation
  case object Multiply extends Operation
  case object Divide extends Operation
  case class Num(val valu: Float) extends Operation 
```

当然，您还需要更新您的模式：

```
 def calc(equa: Equation): Float =
    equa match {
      case Num(x) :: List() => x
      case Num(x) :: y :: Num(z) :: xs => y match {
        case Add => calc( Num(x + z)::xs )
        case Subtract => calc( Num(x - z)::xs )
        case Multiply => calc( Num(x * z)::xs )
        case Divide => calc( Num(x / z)::xs )
      }
      case _ => 0
    } 
```

然后`possibilities`按预期工作，无需任何更改。

或者，您可以保留课程的方式，只需更改`ops`为

```
val ops: List[Operation] =
    List(Add(), Subtract(), Multiply(), Divide()) 
```

* * *

**更新：** 关于交错，您可以执行以下操作：

```
def interleave[T](xs: List[T], ys: List[T], padX: T, padY: T): List[T] =
  xs.zipAll(ys, padX, padY).flatMap(pair => List(pair._1, pair._2)) 
```

但请注意，结果将始终包含偶数个元素。也许更好的解决方案是实现`interleave`自己，例如：

```
def interleave[T](xs: List[T], ys: List[T]): List[T] = {
  import collection.mutable._;
  @annotation.tailrec
  def f(xs: List[T], ys: List[T], r: Buffer[T]): Buffer[T] =
    xs match {
      // By swapping the arguments, we get interelaving:
      case x :: xrest   => f(ys, xrest, r += x);
      case Nil          => r ++= ys;
    }
  return f(xs, ys, new ArrayBuffer[T]).toList;
} 
```

但是，我想说更好的解决方案是不要混合操作和数字。相反，您可以为由符号形成的格式良好的表达式声明一个特殊类，例如（未经测试）：

```
sealed abstract class Symbol
sealed abstract class Operation extends Symbol
case object Add Operation
case object Subtract extends Operation
case object Multiply extends Operation
case object Divide extends Operation
case class Num(val valu: Float) extends Symbol

sealed abstract class Expression;
case class App(val op: Operation, val arg1: Expression, val arg2: Expression)
  extends Expression;
case class Const(val n: Num)
  extends Expression; 
```

而不是创建交错列表，而是创建`Expression`.

# java - Neo4J 创建关系挂在远程，但节点创建成功

> ID：14925511
> 
> 赞同：1
> 
> 时间：2013-02-17T20:06:55.100
> 
> 标签：java, neo4j

我的关系创建挂起，但下面的节点设法坚持到我的远程客户端。

```
public class Baz 
{  
    private static enum CustomRelationships implements RelationshipType {
        CATEGORY
    }

     public void foo()  
     {    
         RestGraphDatabse db = new RestGraphDatabase("http://remoteIp:7474/db/data",username,password);
         Transaction tx = db.beginTx();
         try{  
         Node a = db.createNode();
            a.setProperty("foo", "foo");  // finishes
            Node b = db.createNode();
            b.setProperty("bar", "bar"); //finishes
            a.createRelationshipTo(b, CustomRelationships .CATEGORY); // hangs
            System.out.println("Finished relationship");
            tx.success();
        } finally {
            tx.finish();
        }
     }  
} 
```

我不知道为什么。没有堆栈，连接不会超时。

```
a.createRelationshipTo(b, DynamicRelationshipType.withName("CATEGORY")); 
```

也挂了

此查询可以从管理 shell 正确执行：

> start first=node(19), second=node(20) 创建 first-[r:RELTYPE { links : first.Baz + '<-->' + second.BazCat }]->second return r

然而，当以这种方式运行时：

```
ExecutionResult result = engine.execute("start first=node("
                    + entityNode.getId() + "), second=node("
                    + categoryNode.getId() + ") "
                    + " Create first-[r:RELTYPE { linkage : first.Baz"
                    + " + '<-->' +  second.BazCat" + " }]->second return r"); 
```

也挂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:19:10.093

1.  休息时没有真正的交易。
2.  Java-Rest-Binding 中的一个错误是内部线程没有作为守护线程启动。它实际上并没有挂起只是程序没有结束。您可以`System.exit(0)`结束程序作为解决方法。

# certificate - 由于不存在的过期证书，代码签名身份无效

> ID：14925517
> 
> 赞同：3
> 
> 时间：2013-02-17T20:07:29.617
> 
> 标签：certificate, app-store-connect, provisioning-profile

我被我的应用程序困住了。我无法将其上传到 iTunes，因为在“存档”步骤之后，当我必须选择应用程序记录和代码签名身份时，它会显示：

> “我的名字”是一个有效的身份。但是，关联的包裹标识“我的名字”已过期。

查看代码签名身份的弹出菜单，我注意到问题来自“MyProgram_production”证书，实际上在供应门户中，当我为生产创建开发人员证书配置文件时，我收到此错误：

> 您必须拥有有效的 Mac 应用程序证书才能创建配置文件。

![您必须拥有有效的 Mac 应用程序证书才能创建配置文件](../Images/d20611f2f77ee7db5d8ec354574a1e10.png)

但是我已经创建了一个有效的配置文件，正如您在图像中看到的那样，它在那里，但过期的也在那里。我的问题是，在 Apple 网站的证书页面中，旧的过期证书不存在。有一些旧证书，但我没有机会删除它们：

![证书页面](../Images/e5db89d6d884ebd32aeab7dbeebfa31e.png)

我能做些什么呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T18:57:29.803

经过2天的绝望......（我应该被用作Apple Dev几年了......）我终于解决了我的问题......对于谁遇到同样的困难问题是我看不到过期的我的钥匙串访问中的证书，那是因为我的组合中有（奇怪的）选项“隐藏过期的证书”......我改变了 Mac，不知道有这个选项......为什么有人应该想要隐藏过期的证书而不仅仅是删除它？？？无论如何，删除过期的证书并在 Apple 网站上再次执行所有证书就可以了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:39:51.557

您必须撤销并且必须创建新证书。它清楚地表明“您必须拥有有效的 Mac 应用程序证书才能创建配置文件。因此您必须从钥匙串开始生成有效的证书。

# ruby-on-rails - 在导航中获取正确的值 - 基于 url

> ID：14925518
> 
> 赞同：-1
> 
> 时间：2013-02-17T20:07:34.150
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我的模型是：

```
class Country < ActiveRecord::Base
    extend FriendlyId
    friendly_id :name, use: :slugged
    has_many :regions

end

class Region < ActiveRecord::Base
    belongs_to :country
end 
```

部分路线

```
resources :countries, :path => ''
 resources :countries, :path => '', :only => [] do
  resources :regions, :path => ''
    resources :regions, :path => '', :only => [] do
     resources :houses do
  collection do
    get 'tags/:tag', to: 'houses#index', as: :tag
    end
  end 
```

区域控制器：

```
def show
    @country = Country.find(params[:country_id])
    @region = Region.find(params[:id])
end 
```

主导航：

```
 %ul.nav
        %li
          = link_to "home", root_path
        %li.dropdown
          %a.dropdown-toggle{"data-toggle" => "dropdown", :href => "/nl"}
            = t('navigation.nav.houses')
            = @region.name 
```

主导航的区域名称（@region.name）由控制器变量填充。这很好用..所以我每个地区都得到了很好的“自定义”主导航。但是现在我也想按国家/地区路径进行操作...所以当访问者在 /locale/italy 上时，主导航中会显示名称“italy”。我该怎么做？视图层中的条件？

在主导航中，变量@region.name 根据控制器逻辑显示正确的区域名称。但是当访问者在国家页面上时我怎么办？主要导航代码是@region.name。

谢谢..remco

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:32:48.073

```
# app/helpers/region_helper.rb
module RegionHelper

  def region_name
    return session[:region] if session[:region].present?
    @region ||= Region.find('however you find')
    @region.name
  end

end 
```

或者

```
# app/controllers/application_controller.rb
class ApplicationController < ActionController::Base

  before_filter :prepare_region

  protected

  def prepare_region
    @region_name = session[:region] || Region.find('however you find')
    session[:region] = @region_name
  end

end 
```

然后在您看来，如果您修改第二个示例，请使用`region_name`or`@region_name`或 or 。`@region.name`使用您认为适合您的任何代码的组合。

# c++ - 自定义目标的cmake依赖项

> ID：14925519
> 
> 赞同：4
> 
> 时间：2013-02-17T20:07:35.087
> 
> 标签：c++, cmake

我使用python脚本（gen_instantiations.py）生成一个cpp文件（autogen_instantiations.cpp），该文件包含在另一个cpp文件（foo.cpp）中所以我希望CMake在foo.hpp或gen_instantiations.py发生变化时重新生成这个文件。按照 CMake 常见问题解答中的说明，这就是我所做的

```
add_custom_command(
  COMMAND "./gen_instantiations.py" 
  OUTPUT "autogen_instantiations.cpp"
  WORKING_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}" 
  DEPENDS gen_instantiations.py foo.hpp
)
add_custom_target(instantiations ALL DEPENDS autogen_instantiations.cpp)

add_library(foo
   foo.cpp  
 )
 add_dependencies(foo instantiations) 
```

但是这个运行每次都会运行脚本。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:23:13.150

更好的方法是不`#include`生成`autogen_instantiations.cpp`，而是将其作为另一个源文件添加到`foo`库中，因此 cmake 可以看到它`foo`依赖于它并在 smth 发生更改时调用您的生成器

```
set(GENERATED_SOURCES autogen_instantiations.cpp)
add_custom_command(
    OUTPUT ${GENERATED_SOURCES}
    COMMAND "./gen_instantiations.py"
    WORKING_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}"
    DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/gen_instantiations.py ${CMAKE_CURRENT_SOURCE_DIR}/foo.hpp
  )

add_library(
    foo
    foo.cpp
    ${GENERATED_SOURCES}
  ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T20:25:32.937

确保`autogen_instantiations.cpp`在`CMAKE_CURRENT_BINARY_DIR`. 如果输出名称是相对路径，它将被解释为相对于`CMAKE_CURRENT_BINARY_DIR`.

如果该命令实际上并未`autogen_instantiations.cpp`在当前二进制目录中创建，则该规则将始终运行。

# highcharts - 柱形图上的highcharts特殊标记

> ID：14925520
> 
> 赞同：1
> 
> 时间：2013-02-17T20:07:49.410
> 
> 标签：highcharts

我的问题类似于 [Highcharts 中的问题：Show special marker on column chart](https://stackoverflow.com/questions/8163556/highcharts-show-special-marker-on-column-chart)

我有一个柱形图，它是特定时期共同基金回报的直方图。我想用特殊标记突出显示感兴趣的共同基金下跌的位置。

例如，我的 x 轴上有 -50 到 -25、-25 到 0、0 到 10、10 到 20、20 到 30 和 30 到 50，以及相应的 Y 值。我想在“20 到 30”上用标记突出显示感兴趣的共同基金属于该类别。我知道我们可以使用像[http://www.highcharts.com/demo/spline-symbols](http://www.highcharts.com/demo/spline-symbols)这样的样条图来做到这一点。

有没有办法对柱形图做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:35:49.250

一般来说，您不能将自定义标记添加到柱形图中，但您可以添加类似的行为。我已经为分散系列创建了带有自定义标记的简单示例，如果您想在图例中添加更多系列，这很有用：http: [//jsbin.com/oyudan/37/edit](http://jsbin.com/oyudan/37/edit)（如果没有，只需设置`showInLegend: false`）

```
Highcharts.updateMarketMarkers = function (chart) {
    /* get category width */
    var catWidth = chart.xAxis[0].width / chart.xAxis[0].categories.length;
    /* get padding of each column (two sides) */
    var catPadding = chart.series[0].options.pointPadding * catWidth;
    /* actual value - padding - symbol width/2 */ 
    chart.series[2].markerGroup.translate(chart.series[2].markerGroup.translateX - 2 * catPadding - chart.series[2].data[0].shapeArgs.r / 2);
};
chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'column',
        showAxes: false,
        events: {
            load: function () {
                Highcharts.updateMarketMarkers(this);
            },
            redraw: function () {
                Highcharts.updateMarketMarkers(this);
            }
        }
    },
    ... 
```

另一种解决方案是使用 Highcharts 渲染器在特定位置绘制自定义形状。在这里您可以找到有关渲染器的更多信息：http: [//api.highcharts.com/highcharts#Renderer](http://api.highcharts.com/highcharts#Renderer)

# c++ - 如何立即对键盘输入进行操作

> ID：14925521
> 
> 赞同：1
> 
> 时间：2013-02-17T20:07:52.997
> 
> 标签：c++, opengl, glut

我正在用 C++ 编写并在 Windows 中使用 OpenGL。
我创建了一个立方体，我希望它通过按“4”或“6”小键盘键绕 y 轴旋转（*使用 glRotate3f()，而不是 gluLookat() ）。*
问题是当我按下任何键时，都会有轻微的旋转，然后停止一段时间，然后它开始连续旋转。

有没有办法通过使用 glutkeyboardfunc 来实现这一点？

如果没有，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:59:51.913

维护您自己的键状态映射并在计时器上触发重绘：

```
// g++ main.cpp -o main -lglut -lGL -lGLU && ./main
#include <GL/glut.h>
#include <map>

bool paused = false;
std::map< unsigned char, bool > state;
void keyboard_down( unsigned char key, int x, int y )
{
    if( key == 'p' )
        paused = !paused;

    state[ key ] = true;
}

void keyboard_up( unsigned char key, int x, int y )
{
    state[ key ] = false;
}

void display()
{
    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    double ar = w / h;
    glOrtho( -2 * ar, 2 * ar, -2, 2, -1, 1);

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    static float angle = 0;
    if( state[ '6' ] )  angle -= 3;
    if( state[ '4' ] )  angle += 3;
    if( !paused )
        angle += 0.5;

    glPushMatrix();
    glRotatef( angle, 0, 0, 1 );

    glColor3ub( 255, 0, 0 );
    glBegin( GL_QUADS );
    glVertex2i( -1, -1 );
    glVertex2i(  1, -1 );
    glVertex2i(  1,  1 );
    glVertex2i( -1,  1 );
    glEnd();

    glPopMatrix();

    glutSwapBuffers();
}

void timer( int extra )
{
    glutPostRedisplay();
    glutTimerFunc( 16, timer, 0 );
}

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE );
    glutInitWindowSize( 640, 480 );
    glutCreateWindow( "Keyboard" );
    glutDisplayFunc( display );
    glutKeyboardFunc( keyboard_down );
    glutKeyboardUpFunc( keyboard_up );
    glutTimerFunc( 0, timer, 0 );
    glutIgnoreKeyRepeat( GL_TRUE );
    glutMainLoop();
    return 0;
} 
```

# cocos2d-iphone - 模糊 CCLayerColor（用于暂停菜单）

> ID：14925522
> 
> 赞同：5
> 
> 时间：2013-02-17T20:08:13.307
> 
> 标签：cocos2d-iphone

我很好奇是否有人知道已经实现的模糊整个 CCLayer 的方法。我使用一个简单的 CCLayerColor 设置为黑色，有点不透明度，但我希望能够将背景模糊到无法区分的斑点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:38:30.773

你可以用 CCLayerColor 做到这一点。

```
-(void)fadeBackground
{
    ccColor4B color = {0,0,0,255};
    CCLayerColor *fadeLayer = [CCLayerColor layerWithColor:color];
    [self addChild:fadeLayer z:7];
    fadeLayer.opacity = 0;

    id fade   = [CCFadeTo actionWithDuration:1.0f opacity:160];//200 for light blur
    id calBlk = [CCCallBlock actionWithBlock:^{
        //show pause screen buttons here 
        //[self showPauseMenu];
    }];
    id sequen = [CCSequence actions:fade, calBlk, nil];

    [fadeLayer runAction:sequen];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T02:13:39.327

难道你不能只创建一个半透明的小图块，其中有一些噪点，然后创建一个覆盖屏幕的精灵，其中设置了纹理参数以重复它吗？

```
CCSprite *blurSprite = [CCSprite spriteWithFile:@"blurtile.png" rect:CGRectMake(0, 0, 1024, 768)];
blurSprite.position = ccp(512,384);
ccTexParams params = {GL_LINEAR,GL_LINEAR,GL_REPEAT,GL_REPEAT};
[blurSprite .texture setTexParameters:&params];
[self addChild:blurSprite]; 
```

我可能有这些参数略有错误，但它应该给出一般的想法。

# xpages - 重复控件内的动态字段绑定

> ID：14925523
> 
> 赞同：0
> 
> 时间：2013-02-17T20:08:22.153
> 
> 标签：xpages

我有一件奇怪的事情，我在自定义控件中使用动态字段绑定。

字段绑定是这样创建的。

*   XPage（数据源“文档”放在这里）
    *   自定义控件（传入的字符串）（如果有错误，则获取错误）
        *   重复（CompositeData 被传递给返回 Rows、columns 字符串的 bean）
            *   重复（重复 1 个用于列的变量）
                *   自定义控件（传入字段名）

字段绑定是这样完成的 **#{document[compositeData.fieldName]}**

问题是当我保存 XPage 时，消息控件中出现错误

文档已被另一个用户保存 - 保存创建了一个新文档作为对该修改文档的响应。

并且所有字段都被清除。

有什么想法可以调试这个还是我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:30:57.610

“文档已被另一个用户保存”错误只是冰山一角——repeats 存在一些非常奇怪的问题，即重复绑定的字段并且 repeatControls 属性设置为 false。xpages 生命周期的解码部分无法正确处理 - 控件将丢失数据。您应该按照 Martin 的建议将 repeatControls 设置为 true 。

“重复控制变量不存在”可能是由删除重复设置为 true 的属性引起的。您可以通过将其更改为 false 或添加将保持重复值的附加数据上下文来解决此问题。

最后为此添加/删除功能您可以使用动态内容控制和 show(null) hack 来重建重复内容。

为了更好地管理这种复杂性，我建议您停止使用文档数据源并开始创建一些托管 bean。

如果您遵循我的建议，我保证您将获得您正在寻找的功能，因为我几乎没有运行良好的应用程序并且其中包含这种复杂的数据编辑器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:40:08.737

我不知道它是否会帮助你，但我将文档数据源和字段名称作为参数传递给 DynamicField 控件，并像这样使用它：

```
compositeData.dataSource[compositeData.fieldName] 
```

数据源的类型是 com.ibm.xsp.model.DataSource，它在 Data Sources 下列为 dataInterface。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:36:10.960

听起来您已经在 XPage 上多次定义了数据源（加上自定义控件）。该按钮或保存按钮具有 save="true" 但代码保存文档后端，或者多个位置的代码保存同一个文档。我使用了相同的方法将数据源传递给自定义控件，但这可能只是因为那是我在博客上看到的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T20:38:33.270

您是否为重复控件设置了 repeatControls="true"？

# mysql - 获取每个帖子的最后三个用户的所有操作

> ID：14925524
> 
> 赞同：0
> 
> 时间：2013-02-17T20:08:31.467
> 
> 标签：mysql, sql, database, greatest-n-per-group

在[最后一个问题](https://stackoverflow.com/questions/14879676/get-all-actions-of-the-last-three-users)中，我询问了如何从历史表中获取最后三个用户的所有操作，该表存储用户在延期帖子上所做的所有操作，现在我想要的是获得相同的东西，但**对于每个帖子**。

***最后三个用户对每个帖子所做的所有操作***

```
history table
     id     | post_id | action    |  user_id
     1      |  5      | 1         |  3
     1      |  23     | 2         |  1
     2      |  24     | 2         |  6
     3      |  34     | 1         |  7
     4      |  35     | 1         |  1
     5      |  36     | 1         |  1
     6      |  23     | 2         |  3
     7      |  24     | 2         |  1
     8      |  23     | 1         |  4
     9      |  24     | 1         |  5
     10     |  24     | 1         |  1
     11     |  23     | 1         |  2
     12     |  23     | 4         |  1 
```

谢谢，对不起，如果它似乎是重复的帖子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:24:43.463

我认为这会起作用：

```
SELECT  a.user_ID, a.post_id, a.action
FROM    tableName a
        INNER JOIN
        (
            SELECT  DISTINCT 
              @curRow:=IF(@prevRow=post_Id,@curRow+1,1) rn,
              user_ID, 
              Post_Id, 
              @prevRow:=Post_Id
            FROM    (
                SELECT DISTINCT Post_Id, User_Id
                FROM TableName
                ORDER   BY Post_Id, ID DESC 
              ) t  
              JOIN (SELECT @curRow:= 0) r

        ) b ON a.post_id = b.post_id AND a.user_id = b.user_id
WHERE b.rn <= 3
ORDER   BY a.post_id, a.User_ID 
```

还有[小提琴](http://www.sqlfiddle.com/#!2/f899e1/11)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:24:03.037

这可能是您要找的东西吗？

*   [SQLFiddle](http://www.sqlfiddle.com/#!2/7d153/13)

代码：

```
SELECT  a.user_ID,
group_concat(a.post_id),
group_concat(a.action)
FROM    tableName a
        INNER JOIN
        (
            SELECT  DISTINCT user_ID
            FROM    tableName   
            ORDER   BY ID DESC
            LIMIT   3
        ) b ON a.user_ID = b.user_ID
group by a.user_id
ORDER   BY a.User_ID;

| USER_ID | GROUP_CONCAT(A.POST_ID) | GROUP_CONCAT(A.ACTION) |
--------------------------------------------------------------
|       2 |                       7 |                      3 |
|       3 |                   5,5,4 |                  1,2,5 |
|       6 |                       7 |                      2 | 
```

# ios - 停止播放目标 c 的声音？

> ID：14925528
> 
> 赞同：0
> 
> 时间：2013-02-17T20:08:39.333
> 
> 标签：ios, objective-c, avaudioplayer

```
- (void)viewDidLoad {
[super viewDidLoad];
[audioPlayer stop];
NSString *Path = [[NSBundle mainBundle] pathForResource:@"Keep the Shoes Moving" ofType: @"m4a"];
NSURL *URL = [[NSURL alloc] initFileURLWithPath: Path];
NSError *error;
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:URL error:&error];
audioPlayer.numberOfLoops = -1;
[audioPlayer play];
[[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications]; } 
```

每次我导航回这个 viewController 时，都会发生这种情况，它会播放另一个音轨。所以我有两首曲目相互播放。我怎样才能让它停止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:12:12.743

将您的`AVAudioPlayer`实例存储在一个属性中，并`stop`在您希望它停止播放时调用它的方法。

# c# - 裁剪图像不同格式

> ID：14925530
> 
> 赞同：-2
> 
> 时间：2013-02-17T20:08:56.273
> 
> 标签：c#, image, resize, clone, crop

我想请你帮忙解决一个问题。

我用克隆裁剪图片。但是有一个细节会影响模块的运行。

详细信息：我的图片分辨率为 1600x900。我需要一个 400x300 的拇指。图片 1 的类型为 16:9，图片 2 的比例为 4:3。

在我的版本中，第二张图片的解决方案是从第一张剪下来的。我需要第一个图像更小，然后切断。所以它们看起来很相称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:28:39.627

您需要确定调整大小的决定因素（高度或宽度），然后调整大小并最终裁剪。

像这样的东西：

```
thumbHeight = 300;
thumbWidth = 400;
heightRatio = (thumbHeight / img1.Height);
widthRatio = (thumbWidth / img1.Width)

if (heightRatio < widthRatio)
{
 resizedHeight = img1.Height * heightRatio;
 resizedWidth = img1.Width * heightRatio;
} 
else
{
 resizedHeight = img1.Height * widthRatio;
 resizedWidth = img1.Width * widthRatio;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:21:06.437

您必须将照片调整为 533x300，然后将其裁剪为 400x300。这将保留您的图像比例。

# java - 第二次单击时按钮崩溃，removeView() 异常

> ID：14925534
> 
> 赞同：0
> 
> 时间：2013-02-17T20:09:23.467
> 
> 标签：java, android, logcat

当我第一次单击计算按钮时，它工作正常，但在结果对话框被关闭后第二次单击时，应用程序崩溃。`logcat`显示错误指定的孩子已经有一个父母。你必须打电话给`removeView on the child's parent first.`我现在该怎么办？以及如何添加removeView？

```
public class MainActivity extends Activity {
    float Remaining,Departure,TotUplift,SG,DiscResult;
    int CalUpliftResult;

    TextView RemainingTV,DepartureTV,UpliftTV,SGtv,CalcUpliftTV,DiscrepancyTV,resultOne,resultTwo;
    EditText RemainingET,DepartureET,TotUpliftET,SGet,CalcUpliftET,DiscrepancyET;
    Button calculateButton,okButton;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        setupView();

         final AlertDialog.Builder alert = new AlertDialog.Builder(this); 
            LayoutInflater factory = LayoutInflater.from(this);        
            final View textEntryView = factory.inflate(R.layout.dialog,null);
        resultOne=(TextView)textEntryView.findViewById(R.id.resultOne); //resultone is a textview in xml dialog
        resultTwo=(TextView)textEntryView.findViewById(R.id.resultTwo);
        alert.setTitle("RESULT");
        alert.setIcon(R.drawable.ic_launcher);
        alert.setView(textEntryView);

        alert.setNeutralButton("OK", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {

                dialog.dismiss();

            }
        });

        calculateButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                if(validationET())
                {

                getETvalue();
                evaluation();
                CalcUpliftTV.setText(String.valueOf(CalUpliftResult));
                DiscrepancyTV.setText(String.valueOf(DiscResult));
                resultOne.setText("Calc. Uplift (KG)= "+String.valueOf(CalUpliftResult));
                resultTwo.setText("Discrepancy(%)= "+String.valueOf(DiscResult));
                    alert.show();

                }
                else
                    Toast.makeText(getApplicationContext(), "please give all inputs", Toast.LENGTH_SHORT).show();

            }

        });

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:35:18.070

我修复了它，alertdialog 必须在计算按钮的 onclick 内创建，以便每次单击它时，都会重新创建对话框，从而防止先前对话框值的干扰。这是更正后的代码段：

```
calculateButton.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View arg0) {

        if(validationET())
        {

             final AlertDialog.Builder alert = new AlertDialog.Builder(context); 
                LayoutInflater factory = LayoutInflater.from(context);        
                final View textEntryView = factory.inflate(R.layout.dialog,null);
            resultOne=(TextView)textEntryView.findViewById(R.id.resultOne); //resultone is a textview in xml dialog
            resultTwo=(TextView)textEntryView.findViewById(R.id.resultTwo);
            alert.setTitle("RESULT");
            alert.setIcon(R.drawable.ic_launcher);
            alert.setView(textEntryView);

            alert.setNeutralButton("OK",null);

        getETvalue();
        evaluation();
        CalcUpliftTV.setText(String.valueOf(CalUpliftResult));
        DiscrepancyTV.setText(String.valueOf(DiscResult));
        resultOne.setText("Calc. Uplift (KG)= "+String.valueOf(CalUpliftResult));
        resultTwo.setText("Discrepancy(%)= "+String.valueOf(DiscResult));
        AlertDialog alertD = alert.create();
        alertD.show();

        }
        else
            Toast.makeText(getApplicationContext(), "please give all inputs", Toast.LENGTH_SHORT).show();

    }

}); 
```

# floating-point - 使用 IEEE 754 32 位浮点格式可以实现的最接近 1/3 的值是多少？

> ID：14925535
> 
> 赞同：2
> 
> 时间：2013-02-17T20:09:35.820
> 
> 标签：floating-point

尽管对浮点格式的工作原理有相当好的了解，但我在完成问题时遇到了麻烦。有人可以引导我完成获得答案所需的步骤吗？为什么不可能完全表示 1/3，我们怎么知道我们已经得到了最接近 1/3 的数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:24:43.617

*IEEE 754 中浮点数*的小数部分由 2 的负幂之和构成。

例如， 0.5 是 2 ^(-1)， 0.75 是 2 ^(-1) +2 ^(-2)等等......

为了帮助您的工作，请考虑

*   [什么数通过将N 位](http://steve.hollasch.net/cgindex/coding/ieeefloat.html)2 的负幂相加接近 1/3 ？

*   并且 1/3 是无限的，在有限的位数 (32) 浮点数内不能恰好有 1/3

要完成这个问题，您可以实现一个相当简单的算法来达到接近 1/3 的值

```
N = 23    // mantissa bits
T = 1/3   // target
p = 0.5   // first negative power of 2
r = 0.0   // resultat

do N times 
  if ( r + p <= T ) r = r + p // add power of 2 if result is not bigger than target
  p = p / 2  // next power of 2
done 
```

*要以二进制形式可视化结果，您可以在将p*添加到*r*时打印“1”，如果不是，则打印“0”。最后一位可能是“1”，以使结果更接近目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T05:22:04.257

回答“我们能走多远？” 浮点数的问题，将有效数（小数部分）更改为整数通常很有用。为此，请从普通 32 位二进制 IEEE 浮点数的惯用浮点格式开始：

*   符号 s（0 或 1 表示 + 或 -）、指数 e 和以“1”开头的分数 f。小数点后有 23 位。这三个部分组合起来表示数字 (–1) ^s •2 ^e •f。

然后缩放格式，使分数 f 改为整数 F。为此，我们从指数中减去 23 并将分数 f 乘以 2 ^(23)。然后我们有这种格式：

*   符号 s、指数 e–23 和等于 2 ^(23) •f 的整数 F（因此 2 ^(23) ≤ F < 2 ^(24)）。这些部分组合起来表示数字 (–1) ^s •2 ^(e–23) •F = (–1) ^s •2 ^e •f。

现在，计算出 1/3 在习惯格式中的指数。要使 f 以“1.”开头，e 必须为 -2。^(我们可以从 1/3 = 2 –2) •4/3 和 1 ≤ 4/3 < 2的事实中看出这一点，因此，在二进制中，4/3 以“1.”开头。

然后，考虑缩放格式。在这种格式中，我们必须有： 符号 s 是 0，指数是 –2–23 = –25，并且 F 是某个整数，使得 (–1) ⁰ •2 ^(–25) •F ≈ 1/3。

这很容易解决，F ≈ 2 ^(25) •1/3 = 33554432/3 = 11184810.666…。与该值最接近的整数是 11184811，因此 F = 11184811。

现在我们可以看到 F 中的误差是 1/3（F 必须是整数与我们希望的值之间的差），并且该误差按比例缩放 2 ^(-25)，因此误差为 2 ^(-25) /3 ≈ 9.934e-09。该值本身为 2 ^(–25) •11184811，约为 0.3333333433。

（请注意，我只处理了普通数字。对于接近浮点格式限制的数字，还必须考虑上溢和下溢。）

# jquery - Msdropdown - 通过函数创建 - 附加 onchange 事件

> ID：14925538
> 
> 赞同：3
> 
> 时间：2013-02-17T20:10:05.683
> 
> 标签：jquery, function, select

我正在使用 msdropdown 并且我正在通过如下函数创建下拉列表：

```
$("#select_holder_"+$_returnvalue.id+"").msDropDown({byJson:{data:jsonData, name:'change_member_status_'+$_returnvalue.id, width:'90'}}).data("dd"); 
```

现在我准备好了文件：

```
$('select').on('change', function() {
alert( this.value ); 
}); 
```

但这不会在更改通过函数创建的下拉菜单时触发，（它在 documentready 之前创建的下拉菜单上触发）并且该行为是有意义的（因为这实际上是在 documentready 之后注入的），但是有没有办法为创建的下拉菜单附加 onchange 事件通过功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:13:21.090

您可以委托事件：

```
$(document).on('change', 'select', function() {
    alert(this.value); 
}); 
```

# c++ - 如何确定任意 C++ 数值类型的实部类型？

> ID：14925544
> 
> 赞同：1
> 
> 时间：2013-02-17T20:10:38.363
> 
> 标签：c++, templates

给定一个可能是也可能不是类型的任意数字类型`std::complex`，我想获得代表该类型“真实部分”的类型。例如， is 的实部， `std::complex<double>`is的实`double`部。下面的示例使用 C++ 部分模板特化来完成此操作。@mfontanini 在下面发布了一个更简单的方法。`double``double`

我的问题：Boost 库中是否有直接的方法可以做到这一点？如果是这样，我一直找不到它。

```
#include <complex>
#include <boost/type_traits/is_complex.hpp>

template <typename T>
class RealPart
{
private:
    template <bool, typename>
    class ResultType;

    // complex type -> real type
    template <typename T1>
    class ResultType<true, T1>
    {
    public:
        typedef typename T1::value_type type;
    };

    // real type -> real type
    template <typename T1>
    class ResultType<false, T1>
    {
    public:
        typedef T1 type;
    };

public:
    // define result_type, making use of the template specialization above
    typedef typename ResultType<boost::is_complex<T>::value, T>::type result_type;
};

// both will become doubles
RealPart<std::complex<double> > a;
RealPart<double> b; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:17:03.437

不需要使用类型特征，您可以仅使用模板特化来完成相同的操作：

```
// general case
template <typename T>
struct RealPart {
    typedef T type;
};

// std::complex
template <typename T>
struct RealPart<std::complex<T> > {
    typedef T type;
}; 
```

这是否已经在 boost 中的某个地方实现了，我真的不知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-07T04:34:16.170

这在编译时有效：

```
// arr has type std::complex<T>
using RealType = decltype((*arr).real());

// or even
using RealType = decltype((U {}).real()); // U is std::complex<T> 
```

# java - 如何通过 Java (Android) 更改 strings.xml 中的值

> ID：14925550
> 
> 赞同：0
> 
> 时间：2013-02-17T20:11:02.093
> 
> 标签：java, android, xml, string

我正在尝试使用 Java 更改我的 strings.xml 中的值。这是在某些事件上动态更改应用程序中的某些标签。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T20:15:06.547

您不能更改 strings.xml 中的值，因为字符串是不可变的（除非您进行一些动态编译）。您可以拥有可以根据传入变量更改答案的字符串枚举

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:17:57.247

我认为满足您需求的最佳解决方案是在 XML 文件中定义所有可能的字符串。然后，您可以根据应用程序中的事件选择正确的字符串。如果事件类似于用户输入，则无法更改 XML 文件。但在这种情况下，直接更改字符串而不使用 XML 引用应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T20:15:41.727

您可能想看看[Java String Formatter](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)它只是让您格式化 string.xml 中的字符串，但不更改整个 String ，正如其他答案所说，您无法更改 strings.xml 中 String 的值你的java代码。

# ruby - 类 << self 是什么意思？

> ID：14925551
> 
> 赞同：7
> 
> 时间：2013-02-17T20:11:04.443
> 
> 标签：ruby, metaprogramming

关于：

```
class Test
  class << self
    def hi
      puts "Hi there"
    end
end 
```

我在脑海中想出了以下图像：

因为在 Ruby 中一切都是对象，所以类本身就是 class 的对象`Class`。通过调用`class << self`您从内部打开`Class`定义`Test`并注入一些实例方法。由于`Test`是 的一个实例`Class`，因此您可以像在对象上调用实例方法一样调用这些方法：`Test.hi`.

以下是有助于可视化我上一句的伪代码：

```
class Class
    def hi
        puts “Hi there”
    end
end

Test = Class.new(class Test
end)
Test.hi 
```

我做对了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T20:18:47.187

假设我们有一个`obj`类对象`A`。此时， 的`obj`类的祖先层次结构为：

```
[A, ...] 
```

它的作用是`class << obj; ... end`创建一个`B`唯一实例为的类`obj`，并将其放入 的祖先层次结构中，`obj`以便`obj`的类的祖先层次结构变为：

```
[B, A, ...] 
```

如果您`class << self; ... end`在 的上下文中编写`Test`，那么它的主体将是一个类，其唯一实例是`Test`。如果您`hi`在该主体中定义一个实例方法，那么它将应用于该类的实例，即`Test`. 因此，您将能够做到`Test.hi`。

# java - 所有的 javax jar 都在哪里？

> ID：14925554
> 
> 赞同：22
> 
> 时间：2013-02-17T20:11:30.250
> 
> 标签：java, jakarta-ee, jar

**编辑**：几个 SOers 同事建议只去 Maven 存储库，这当然与使用 Maven 作为构建的一部分无关。我明白这一点。这个问题的重点很简单：**我可以去哪些网站（由 Oracle 拥有和维护）来获取我所有的`javax`jar？**不是 Maven 存储库。不是任何其他 3rd 方回购。甲骨文回购。

假设我不喜欢 Maven，并且不想去 Maven 存储库找到我的罐子。我怎么得到`javax.injection`？怎么样`javax.validation`？还是其他`javax`罐子？

它们似乎无法通过 Oracle 的 Java EE 下载网站获得（这*令人震惊*）。所以我问：一个人必须做些什么才能获得官方的、Oracle 祝福的`javax`jar，而无需咨询 Maven 存储库？

任何可以向我解释为什么这些 JAR 似乎故意难以找到的人都会得到奖励。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-17T20:40:33.720

'javax' jar 由它们所属的 JCP 项目（[http://www.jcp.org/en/home/index](http://www.jcp.org/en/home/index)）拥有和维护，因为它们代表 Java 标准。所以严格来说，他们不是 Oracle 祝福的，而是 JCP 祝福的。所以JCP页面也是官方可以看的地方。

例如，如果您导航到 JDO2 规范 -> [http://jcp.org/en/jsr/detail?id=243](http://jcp.org/en/jsr/detail?id=243)并单击最终版本的下载页面。在“参考实现和技术兼容性工具包：”下是一个项目符号，它指出：“API jar 可从...获得”，它链接到包含“javax”API 接口的 Jar。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T20:26:08.893

给你：

*   [javax.验证](http://jcp.org/en/jsr/detail?id=303)
*   [javax.inject](http://jcp.org/en/jsr/detail?id=330)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-09T18:53:10.140

如果您下载 Tomcat，您可以从 lib 文件夹中获取 servlet-api.jar。

# php - 使用 CHtml::link 时出现入口脚本

> ID：14925564
> 
> 赞同：0
> 
> 时间：2013-02-17T20:12:50.263
> 
> 标签：php, yii

我在和 Yii 一起玩。我使用 .htaccess 和主配置删除了 URL 中存在的条目脚本，但是当我使用 CHtml::links() 时它再次出现。我该如何解决？例如：

```
<?php echo CHtml::link(CHtml::encode($data->id), array('view', 'id'=>$data->id)); ?> 
```

更新：我的 urlManager 配置：

```
'urlManager'=>array(
        'urlFormat'=>'path',
        'rules'=>array(
        '<controller:\w+>/<id:\d+>'=>'<controller>/view',
        '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
        '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
        'commentfeed'=>array('comment/feed','urlSuffix'=>'.xml', 'caseSensitive'=>false),
        'showScriptName'=>false,
        'caseSensitive'=>false,
        '<pid:\d+>/commentfeed'=>array('comment/feed','urlSuffix'=>'.xml', 'caseSensitive'=>false),
        ), 
```

我的 .htaccess

```
Options +FollowSymLinks
IndexIgnore */*
<IfModule mod_rewrite.c>
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:44:13.517

您必须在配置文件中将 showEntryScript 设置为 false。

请按照框架的官方说明进行操作： [http ://www.yiiframework.com/doc/guide/1.1/en/topics.url#hiding-x-23x](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#hiding-x-23x)

# iis - IIS HTTP 到 HTTPS web.config 重写不返回整个 URL

> ID：14925566
> 
> 赞同：2
> 
> 时间：2013-02-17T20:12:52.150
> 
> 标签：iis, url-rewriting, web-config

所以我一直在尝试使用以下内容进行重写：

```
<rules>
  <rule name="HttpToHttps" stopProcessing="true"/>
    <match url="(.*)"/>
    <conditions>
      <add input="{HTTPS}" pattern="off" ignoreCase="true"/>
    </conditions>
    <action type="Redirect" url="https://{HTTP_HOST}{URL}"/>
  </rule>
<rules> 
```

在两种环境中，这会像它应该的那样重定向。在第三种环境中，它不起作用。从某种意义上说，它不起作用，查看提琴手日志，我看到带有完整 url 的 http 调用。当它重定向到 https 时，它会删除 HTTP_HOST 之后的所有内容。

所以使用以下网址：

> 不安全的：//www.mysite.com/page.aspx?var1=1&var2=2

在两种环境下，它变成

> 安全：//www.mysite.com/page.aspx?var1=1&var2=2

在第三个中它变成：

> 安全：//www.mysite.com

我尝试将其重写为 https://{HTTP_HOST}{HTTP_URL} 并且在前两个环境中将 {URL} 加倍：

> 安全：//www.mysite.com/page.aspx?var1=1&var2=2&var1=1&var2=2

我对 web.configs 不是很有经验，我边走边学，所以如果有人对这里发生的事情有任何意见，将不胜感激。如果它对任何事情有任何影响，那么第三个环境位于两台负载平衡的服务器上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T20:21:17.050

Ruslany 在他的博客上有几个 IIS URL Rewrite 示例，HTTP to HTTPS 就是其中之一：

```
<rule name="Redirect to HTTPS" stopProcessing="true">
  <match url="(.*)" />
  <conditions>
    <add input="{HTTPS}" pattern="^OFF$" />
  </conditions>
  <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="Permanent" />
</rule> 
```

有关更多信息，请参阅[http://ruslany.net/2009/04/10-url-rewriting-tips-and-tricks/](http://ruslany.net/2009/04/10-url-rewriting-tips-and-tricks/)。

# linux - 降低linux内核定时器频率

> ID：14925568
> 
> 赞同：19
> 
> 时间：2013-02-17T20:13:07.053
> 
> 标签：linux, timer, linux-kernel

当我使用 Gentoo 作为访客运行我的虚拟机时，我发现有相当大的开销来自`tick_periodic`函数。（这是在每个定时器中断时运行的函数。）该函数更新全局`jiffy`使用`write_seqlocks`，这会导致开销。

这是我的内核配置文件中的 grep`HZ`和相关内容。

```
sharan013@sitmac4:~$ cat /boot/config | egrep 'HZ|TIME'

# CONFIG_RCU_FAST_NO_HZ is not set
CONFIG_NO_HZ=y
# CONFIG_HZ_100 is not set
# CONFIG_HZ_250 is not set
# CONFIG_HZ_300 is not set
CONFIG_HZ_1000=y
CONFIG_HZ=1000
# CONFIG_MACHZ_WDT is not set
CONFIG_TIMERFD=y
CONFIG_HIGH_RES_TIMERS=y
CONFIG_X86_CYCLONE_TIMER=y
CONFIG_HPET_TIMER=y 
```

显然它已将配置设置为 1000，但是当我这样做时`sysconf(_SC_CLK_TCK)`，我得到 100 作为我的计时器频率。那么我的系统的定时器频率是多少？

我想要做的是将频率降低到 100，如果可能的话甚至更低。虽然它可能会影响`poll`/`select`和调度程序时间片的交互性和精度，但我准备牺牲这些东西来减少定时器中断，因为它会加速 VM。

当我试图找出必须做的事情时，我在某个地方读到了你可以通过更改配置文件来做到这一点，否则我读到在引导参数中添加 divider=10 就可以了，在其他地方我读到了如果即使不增加定时器频率也可以设置为`CONFIG_HIGH_RES_TIMERS`实现低延迟定时器，则不需要任何东西，并且在无滴答系统中也可以做到这一点`CONFIG_NO_HZ`。

我对什么是正确的方法感到非常困惑。

我想要的只是将定时器中断降到尽可能低。

我能知道这样做的正确方法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-18T20:52:41.343

不用担心！你的困惑不过是意料之中的。Linux 定时器中断非常令人困惑，并且有着悠久而令人兴奋的历史。

**CLK_TCK**

Linux 没有`sysconf`系统调用，glibc 只是返回常量值 100。抱歉。

**HZ** <-- 你可能想要什么

配置内核时，您可以选择 100Hz、250Hz、300Hz 或 1000Hz 的定时器频率。所有这些都受支持，虽然 1000Hz 是默认值，但它并不总是最好的。

人们通常会在重视延迟（桌面或 Web 服务器）时选择高值，而在重视吞吐量 (HPC) 时会选择低值。

**CONFIG_HIGH_RES_TIMERS**

这与定时器中断无关，它只是一种允许您拥有更高分辨率定时器的机制。这基本上意味着调用超时`select`可以比 1/HZ 秒更准确。

**分隔线**

此命令行选项是 Red Hat 提供的补丁。您可能可以使用它（如果您使用的是 Red Hat 或 CentOS），但我会小心。它引起了很多错误，您可能应该使用不同的 Hz 值重新编译。

**CONFIG_NO_HZ**

这实际上并没有多大作用，它是为了省电，这意味着当什么都不执行时，滴答声将停止（或至少变得不那么频繁）。这可能已经在您的内核上启用。当至少一个任务可以运行时，它没有任何区别。

Frederic Weisbecker 实际上有一个待处理的补丁，它把它推广到只有一个任务正在运行的情况，但还差一点。

# ajax - 使用 ajax 处理所有链接和表单 - Zepto

> ID：14925580
> 
> 赞同：1
> 
> 时间：2013-02-17T20:14:32.920
> 
> 标签：ajax, forms, hyperlink, zepto

默认情况下，jquery mobile 通过 ajax 调用处理链接上的所有点击和表单提交。我如何使用 Zepto 库实现相同的目标？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T13:31:57.963

尚未对其进行测试，但它应该像这样工作

```
$(function() {
    $("a").click(function(){ 
        var link = $(this).attr("href") 
        $.get(link, function(response){
            $("#myContainer").append(response)
        })

        return false
    })
}) 
```

# php - 奇怪的 php 上传问题与非图像文件导致 403 提交错误为什么？- 图像文件正常

> ID：14925582
> 
> 赞同：0
> 
> 时间：2013-02-17T20:14:52.313
> 
> 标签：php

遇到这种奇怪的情况：

我的 php 脚本正确上传图像文件并重命名它们，只要它们是指定的 png/gif/jpeg 文件。

但！当我上传非图像文件时，例如。.php 或 .html [用于测试/黑客] 第一次上传按预期被拒绝，并发出我自己的构造错误 - 到目前为止一切顺利，但如果发生以下情况，接下来会发生以下情况：

1）我上传 nxt/2nd 文件，如果下一个文件是允许的图像文件没有问题。2）我上传下一个/第二个文件，如果这个第二个文件也是不允许的图像文件，即。两次连续的不允许上传脚本停止执行，并在浏览器中正确调用脚本/url，并出现 403 - 提交错误？？？

*   如果我刷新浏览器，同样的 403 错误仍然存​​在。
*   如果我单击 url 并按返回，则脚本将运行“一个新的”，所有以前的字段值都被清空。

（我已更改上传到 777 的非图像文件的权限，只是为了确保这不是原因 - 但同样的错误仍然存​​在）

我该如何解决这个问题？？？- 这可能是我自己的代码的问题吗？- 还是 html/php 内部工作有问题？- 这还能是什么，任何人都面临类似的问题？

谢谢你。

--- 对于那些想要代码的人 - 只显示重要的部分..

```
<form name="sellerscript" action="" method="POST" enctype="multipart/form-data">

<input type="file" name="upload3" id="f3" size="40" />
<input value="Image Upload/Adjust" name="imgupload" type="submit"> <br>

<input type="hidden" name="turn" value="<?php echo $round;?>" />
<input name="fn3h" type="hidden" value="<?php echo $fn3; ?>"  />
    <input name="uf3h" type="hidden" value="<?php echo $uf3; ?>"  /> 
```

--- php --

//================上传文件变量=[仅使用照片/图像3 ===========

$allowed = array( 'image/gif' , 'image/png' , 'image/jpeg' , 'image/pjpeg' );
$fname=$fname2=$fname3=''; $uploaded1=$uploaded2=$uploaded3=$auto_insertid=FALSE；

```
 $uid1=$uid2=$uid3='';       // id for uploads table

    $currentf1=$currentf2=$currentf3=''; //-- present loaded fname 
```

//-- 上传处理

if ( !isset($_POST['rmp3']) && $removep3h!='Yes') //不进入 whn prev.file.beng remvd
{

```
//-- echo '<br>image 3 being uploaded:name+'.$_FILES['upload3']['name'].'<br>' ; 
```

if ( isset($_FILES['upload3']) )
{

if ( ( ($_FILES['upload3']['name']!="" ) || ($_FILES['upload3']['name']!=NULL ) ) && ($_FILES['upload3'] ['size'] <= 1524288 ) ) { $uf3=$_FILES['upload3']['name']; // 用户自己的最后上传文件的名称；

```
//--echo "<br> _________ file under 520k --upload permitted file---------"; 
```

///////////////////////////

最重要的是似乎正在工作，除了：当两个文件不是 png/gif/jpeg 连续上传一个接一个后 - 发生 403 错误。

文件是： [root@myhost Desktop]# ls -l *.png -rwxrwxrwx 1 root root 27342 Oct 30 18:46 a1-banner5.png -rwxrwxrwx 1 root root 31812 Nov 11 23:31 a1-credit.png # - rwxrwxrwx 1 arif arif 1418 2011 年 10 月 8 日 2851auto.gif -rwxrwxrwx 1 根 2321 2011 年 10 月 8 日 btf2.gif

-rwxrwxrwx 1 根 46321 Oct 22 23:35 ez-calc.html

-rwxrwxrwx 1 根 25958 10 月 25 日 23:58 dixonhome.html -rwxrwxrwx 1 根 24883 10 月 26 日 00:01 dixons-home.html

注意：除了 [a1-banner5.png] 之外，所有图像文件在所有序列中上传都没有问题 - 如果在非图像上传之后作为第二个文件上传，这会产生相同的问题，即。403 错误。yploaded 的其他 hrml 文件会产生 403 错误。

文件上传自：drwxr-xr-x 26 root www-data 4096 Feb 13 20:38 桌面文件上传至：drwxrwxrw-2 www-data www-data 4096 Feb 17 23:45 上传临时目录：drwxrwxrwx 47 root www-data 12288 2 月 18 日 00:25 tmp（尝试 root 作为 grp - 相同的错误）

错误：网址 + 403

www.testdomain/domainsite/sellerscript.php

403 Forbidden 拒绝访问服务器上的该资源！由 LiteSpeed Web 服务器提供支持 LiteSpeed Technologies 不对本网站的管理和内容负责！

* * *

当脚本运行完美时，仅上传图片：url：

www.testdomain/domainsite/sellerscript.php

文件 > Photo-3/btf2.gif 已上传！

[注意：两个网址相同！]

我希望这足以让某人发现问题。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:03:28.143

好吧，检查您的权限，如果您可以在目录中搜索以及您的读/写权限。

# javascript - 电力单位计算器

> ID：14925591
> 
> 赞同：2
> 
> 时间：2013-02-17T20:15:55.777
> 
> 标签：javascript, function, parameters, units-of-measurement

我基本上使用函数和 if else if 语句来构建电量读数计算器。

给出的单位是 1236，它是名为 elecReading 的函数的参数。这将用作使用的单位数量，并将计算必须支付的金额。

但是，前 0-500 个单位按每单位 1 美元计费。接下来的 500-1000 个单位按每单位 1.10 美元计费，超过 1000 个单位按每单位 3.20 美元计费。例如，如果我使用 1000 个单位，我的账单将是 1050 美元。

我不确定如何在不手动将 1236 分解为单数的情况下使其工作。如何用 JavaScript 编写这样的计算器？

显然我不是在要求完整的答案，但在这个阶段朝着正确的方向推进会非常有帮助！

我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T20:36:23.900

静态版本将类似于：

```
var UNIT_PRICE_1001_OVER = 3.20;
var UNIT_PRICE_501_1000 = 1.10;
var UNIT_PRICE_UNDER_500 = 1.00;
function elecReading(units) {
    var price = 0;

    if (units > 1000) {
        price += (units-1000) * UNIT_PRICE_1001_OVER;
        units = 1000;
    }
    if (units > 500) {
        price += (units - 500) * UNIT_PRICE_501_1000;
        units = 500;
    }
    price += units * UNIT_PRICE_UNDER_500;

    return price;
} 
```

这是假设单价范围为 1-500、501-1000、1001-Inf。显然，这可以更普遍/使用更少的硬编码来完成，使用代表价格范围+所述范围内每单位价格的对象列表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T20:51:11.197

尝试以下功能。假设高峰费率来自 1000+ 单位，中等费率来自 501-1000，非高峰费率来自 0-500。

您可以根据您的要求/理解更改变量名称。

**已编辑：** 添加了 While 循环以不断减少总单位，直到它们大于 1000

```
 function elecReading(units){

        var totalUnits=units;
        var offPeakRate=1;
        var mediumRate=1.10;
        var peakRate=3.20;
        var totalCharges=0;

        if(totalUnits>1000){
            PeakUnits = totalUnits-1000;
            totalCharges = totalCharges + (PeakUnits * peakRate);
            totalUnits = 1000;
        }

        if(totalUnits > 500){
            totalUnits = totalUnits-500;
            totalCharges =  totalCharges + (totalUnits * mediumRate);
        }  

        totalCharges = totalCharges + (totalUnits * offPeakRate); 

        return totalCharges;
    } 
  console.log(elecReading(2000)); 
```

# c - 句子之间有两个空格

> ID：14925593
> 
> 赞同：5
> 
> 时间：2013-02-17T20:16:16.913
> 
> 标签：c

我有一个代码可以确定单词之间是否有多个空格，在这种情况下将它们更改为一个。我需要添加一些额外的功能，它应该在句子之间留出两个空格。
（一个句子的最后一个符号是 . ）

例如。

如果我有文本文件：

```
这是我的第一个程序。你好世界

```

程序应该打印我：

```
这是我的第一个程序。你好世界

```

代码：

```
# include <stdio.h>
# include <stdlib.h>

int main()
{
FILE *in;
char myStr[100],newStr[100];
int ch;
int j,i,k,z=0;

in=fopen("duom.txt","r");

if(in){
while(EOF != ch){
ch=fgetc(in);
myStr[z] = ch;
z++;
k=0;
for(i=0; myStr[i] != '\0'; i++) {     
    if(myStr[i-1] != '.' && myStr[i] == ' ' && myStr[i+1] == ' ' ) 
      continue;          
   newStr[k]= myStr[i]; 
   k++;      
}   
}
}

for(j=0;j<k;j++){       

     printf("%c",newStr[j]);                               
    }
printf("\n");

fclose(in);

system("pause");
return 0;
} 
```

我不要求你写我的整个代码，只是给我一些想法。

对不起，我的英语不好 ：/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T20:26:17.520

此循环遵循您在块中处理文件的一般方法：

**您的方法已修改：**

```
# include <stdio.h>
# include <stdlib.h>

int main() {
  FILE *in;
  char myStr[100],newStr[100];
  int ch;
  int j,i,k,z=0;

  in=fopen("duom.txt","r");

  if(!(in)) { fprintf(stderr,"Error opening file!\n"); }
  else {        //the file was opened
    int go = 1; //master loop control
    while(go) { //master loop
      z  = 0;   //set sub loop
      ch = '\0';//control variables
      while(z < 100 && EOF != ch){ //process file in 99 character blocks
        ch=fgetc(in);              //getting one character at a time 
        if(EOF == ch) { go = 0; }  //break master loop
        else { myStr[z++] = ch; }  //or process char
      }
      myStr[z] = '\0';             //null terminate the string
      for(i=0; myStr[i] != '\0'; i++) {
        //i=99='\0' <-- assumed is highest string size

        //if i=0; Do you really want that leading space?
        if(i== 0 && myStr[i] == ' ' ) { continue; }

        //if i=98 it is the last char in the string i=99 should be '\0'
        //So do you really want that trailing space?
        if(i==98 && myStr[i] == ' ' ) { continue; }

        //Same rational as above.
        //So do you really want those trailing 2 spaces?
        if(i==97 && myStr[i] == ' ' && myStr[i+1] == ' ') { continue; }

        //if i=0; myStr[i-1] will likely cause a segmentation fault
        if(i > 0 && myStr[i] == ' ' && myStr[i+1] == ' ' && myStr[i-1] != '.') { continue; }
        newStr[k] = myStr[i]; 
        k++;      
      }
      for(j=0;j<k;j++){ printf("%c",newStr[j]); } //print the 99 char block
    }
    printf("\n"); //print a newline for good measure
    fclose(in);   //close file
  }
  return 0;
} 
```

请注意，对于大小大于 99 字符的文件，代码将出现异常，因为不会从一个 99 字符块的末尾到另一个块的开头进行间距格式比较。您可以通过不删除前导/尾随空格来实现此目的，将 i=1 和 i=2 处的值与前一个块中 i=97 和 i=98 处的最后两个字符进行比较。

这是一个不同的、更好的循环。它解决了其他方法的块屏障问题，并且使用更少的内存

**更好的方法：**

```
# include <stdio.h>
# include <stdlib.h>
int main() {
  FILE *in;
  in=fopen("duom.txt","r");

  if(!(in)) { fprintf(stderr,"Error opening file!\n"); return -1; }
           //the file was opened
  int x; //stores current  char
  int y; //stores previous char
  for(y='\0'; (x=fgetc(in)) != EOF; y=x) { //read in 'x' until end of file
// The following conditions cover all cases:
// is 'x' not a space? Then print 'x'
// is 'x' a space but 'y' a period? Then print two spaces
// is 'x' a space and 'y' not a period but also not a space? Then print a space
// Otherwise 'x' is part of extra spacing, do nothing
         if(x != ' ')                         { printf("%c",x); }
    else if(x == ' ' && y == '.')             { printf("  ");   }
    else if(x == ' ' && y != '.' && y != ' ') { printf(" ");    }
    else { ; }  //do nothing
  }   
  printf("\n"); //print a newline for good measure
  fclose(in);   //close file
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T20:54:54.030

我建议使用`strtok()`正确数量的空格分隔的标记并将它们连接在一起。如果标记以句点结尾，请使用两个空格。否则，只能使用一个。这样你甚至不需要检查单词之间有多少空格。

# html - 被 html5、utf-8 和 8859-1 混淆了

> ID：14925596
> 
> 赞同：0
> 
> 时间：2013-02-17T20:16:40.570
> 
> 标签：html, utf-8, iso-8859-1

昨天我将一个html页面从“4.01 strict”升级到了html5。
* [http://r0k.us/rock/games/CoH/HallsOfHeroes/](http://r0k.us/rock/games/CoH/HallsOfHeroes/)
字符编码为iso-8859-1。[http://validator.w3.org](http://validator.w3.org)失败并且当utf-8 被指定为字符集时甚至不会解析它，显然是因为我使用了脚注字符，例如 ² 。它们位于字符集的高 128 个字节中。让我困惑的是，我一直读到 utf-8 的前 256 个字节**是**8859-1。

有谁知道为什么页面不会验证为 utf-8 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:19:33.317

实际上，在 UTF-8 中只有前 128 个码点被编码为 ASCII，但 UTF-8**不是**ASCII，尤其是接下来的 128 个码点不同。

如果您希望文件以 UTF-8 格式提供，则需要将文件重新保存为 UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:23:05.140

字符 ²（“SUPERSCRIPT TWO”）由数字 0xb2（十进制 178）表示——但它在 8859-1 和 UTF-8 中的*表示方式不同。*

在 8859-1 中，它表示为值为 0xb2 的单个字节。

在 UTF-8 中，它表示为两个连续的字节，其值为 0xc2、0xb2。有关编码的说明，请参见[此处](http://en.wikipedia.org/wiki/Utf-8)。

（对于包含 8 位字符的文件，8859-1 比 UTF-8 更紧凑，但它无法表示超过 255 的任何内容。UTF-8 与 ASCII 兼容，对于 7 位字符与 8859-1 兼容，对于大多数文本，并且可以表示超过一百万个不同的字符。）

仅包含 7 位字符的文件可以解释为 ASCII、8859-1 或 UTF-8。包含 8 位字符的文件不能；它必须被翻译。

如果您在安装了命令的类 Unix 系统上`iconv`，则：

```
iconv -f iso-8859-1 -t utf-8 
```

将执行适当的翻译。

# asp.net-mvc - TryValidateModel 未分配对象，返回所有空值，MVCStore 示例

> ID：14925602
> 
> 赞同：1
> 
> 时间：2013-02-17T20:16:55.783
> 
> 标签：asp.net-mvc, asp.net-mvc-4, data-annotations

在结帐控制器中，我有代码

```
 [HttpPost]
    public ActionResult AddressAndPayment(FormCollection values)
    {
        var order = new Order();
        TryValidateModel(order);
     .... 
```

模型看起来像这样

```
[Bind(Exclude="OrderId")]
public partial class Order
{
    [ScaffoldColumn(false)]
    public int OrderId { get; set; }

    [ScaffoldColumn(false)]
    public string Username { get; set; }

    [Required(ErrorMessage= "First Name is required")]
    [DisplayName("First Name")]
    [StringLength(160)]
    public string FirstName { get; set; }

    [Required(ErrorMessage = "Last Name is required")]
    [DisplayName("Last Name")]
    [StringLength(160)]
    public string LastName { get; set; }

    [Required(ErrorMessage="Address is required")]
    [StringLength(70)]
    public string Address { get; set; }

    [Required(ErrorMessage = "City is required")]
    [StringLength(40)]
    public string City { get; set; }

    [Required(ErrorMessage = "State is required")]
    [StringLength(40)]
    public string State { get; set; }

    [Required(ErrorMessage = "Postal Code is required")]
    [DisplayName("Postal Code")]
    [StringLength(10)]
    public string PostalCode { get; set; }

    [Required(ErrorMessage="Country is required")]
    [StringLength(40)]
    public string Country { get; set; }

    [Required(ErrorMessage= "Phone is required")]
    [StringLength(24)]
    public string Phone { get; set; }

    [Required(ErrorMessage="Email Address is required")]
    [DisplayName("Email Address")]
    [RegularExpression(@"[A-za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}", ErrorMessage="Email is not valid.")]
    [DataType(DataType.EmailAddress)]
    public string Email { get; set; }

    [ScaffoldColumn(false)]
    public decimal Total { get; set; }

    [ScaffoldColumn(false)]
    public DateTime OrderDate { get; set; }
    public List<OrderDetail> OrderDetails { get; set; }
} 
```

我可以在 TryValidateModel 行之前停下来查看表单值，例如

```
? Request.Form["FirstName"]
 "Michael"
 ? values["FirstName"]
   "Michael" 
```

那么为什么 TryValidateModel(order); 返回 false 并且订单对象没有被填充？

**更新** 为了澄清我的问题，我知道 false 意味着它不能绑定，但我不知道为什么它不能绑定。或者它应该通过 TryValidateModel（甚至是 ValidateModel）

但有趣的是，如果我将方法签名更改为

```
 public ActionResult AddressAndPayment(Order order) 
```

订单被正确填充。因此，如果它能够在方法调用中绑定，为什么不使用 TryValidateModel（甚至是 ValidateModel）呢？

我正在使用 MVC 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:33:30.227

`TryValidateModel``false`当验证`Form Model`您的失败时返回`Orders Model`，因此绑定失败。

我讨厌使用

```
TryValidateModel(order); 
```

并且更喜欢

```
 ValidateModel(order); 
```

在开发我的页面的早期，因为装订是一个微妙的过程。这样，如果模型无法绑定，我会收到异常和指示性错误消息。

# scheme - 如何从var转换为字符串

> ID：14925605
> 
> 赞同：1
> 
> 时间：2013-02-17T20:17:14.020
> 
> 标签：scheme

我尝试做这样的事情：

```
assume x=

(define foo 5) 
```

我需要去做：

```
(string-append "a" "b" (cadr  x)) 
```

（当 x 不知道时..）

如何将 var (cadr x) 转换为字符串或有其他问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:24:20.070

要将数字转换为字符串，请使用以下[`number->string`](http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._%7E23%7E25kernel%29._number-%7E3estring%29%29)过程：

```
(number->string 5)
=> "5" 
```

并且要将符号转换为字符串，请使用以下[`symbol->string`](http://docs.racket-lang.org/reference/symbols.html#%28def._%28%28quote._%7E23%7E25kernel%29._symbol-%7E3estring%29%29)过程：

```
(symbol->string 'x)
=> "x" 
```

举一些例子，选择一个更能反映您的需求的例子——因为根本不清楚您打算在问题中问什么：

```
(define foo 5)
(string-append "a" "b" (number->string foo))
=> "ab5"

(define x '(1 5))
(string-append "a" "b" (number->string (cadr x)))
=> "ab5"

(define x '(define foo 5))
(string-append "a" "b" (number->string (caddr x)))
=> "ab5"

(define x '(define foo 5))
(string-append "a" "b" (symbol->string (cadr x)))
=> "abfoo" 
```

# wcf - 通过 HTTPS 以编程方式连接到 WCF 服务

> ID：14925606
> 
> 赞同：1
> 
> 时间：2013-02-17T20:17:23.833
> 
> 标签：wcf, iis, service, https, connect

我正在开发一个使用 WCF 服务的项目。我已经构建了服务，配置了 web.config 文件，并将其部署在 IIS 7 服务器上。该服务是通过 HTTPS 访问的（在我的开发机器上，我已经自行创建了证书）。在 Visual Studio 2010 中创建 ServiceReference 时一切都很好，它会创建客户端并且工作正常。

我需要的是以编程方式创建一个客户端（需要一点灵活性），所以当我尝试“手动”连接时，它给了我这样的错误：

> 提供的 URI 方案“https”无效；预期的“http”。参数名称：via

web.config 的代码是：（我希望它没有错）

```
<system.serviceModel>    
    <services>           
      <service name="WcfService1.Service1" behaviorConfiguration="WcfService1.Service1Behavior">
        <endpoint address="" binding="wsHttpBinding" bindingConfiguration="TransportSecurity" contract="WcfService1.IService1" />
        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
      </service>

    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="WcfService1.Service1Behavior">
          <serviceMetadata httpsGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="True"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <bindings>
      <wsHttpBinding>
        <binding name="TransportSecurity">
          <security mode="Transport">
            <transport clientCredentialType="None"/>
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>

  </system.serviceModel> 
```

我编写的访问 WCF 服务的过程是：

```
 void proc()
 {
        string ADRESASSL = "https://localhost/ServiciuSSLwsBind/Service1.svc";
        WSHttpBinding bind= new WSHttpBinding();

        EndpointAddress ea = new EndpointAddress(ADRESASSL);
        var myChannelFactory = new ChannelFactory<IService1>(bind, ea);

        IService1 client = null;
        try
        {
            client = myChannelFactory.CreateChannel();
            client.RunMethod1();
            client.Close();                
            //((ICommunicationObject)client).Close();
        }
        catch (Exception exc)
        {
            MessageBox.Show(exc.Message);
            if (client != null)
                client.Close();
        }
    } 
```

IService1 的代码

```
[ServiceContract]
public interface IService1 : IClientChannel
{
    [OperationContract]
    int RunMethod1();

 //....................................
} 
```

看来我在这里做错了，该程序引发了我提到的异常。我必须做更多的事情才能工作，但我没有弄清楚。

提前感谢您能给我的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T06:23:29.480

我没有测试过这个，但我相信你需要在创建工厂之前为绑定设置安全模式。的默认安全模式`WSHttpBinding`是`SecurityMode.Message`，并且您想要`SecurityMode.Transport`。

您可以通过以下三种方式之一解决此问题，如下所示。

首先，您可以使用`WSHttpBinding`构造函数的重载版本来指定安全模式，如下所示：

```
WSHttpBinding bind= new WSHttpBinding(SecurityMode.Transport);
bind.Security.Transport.ClientCredentialType = HttpClientCredentialType.None; 
```

其次，您可以使用无参数构造函数并指定安全模式（和客户端凭据类型），如下所示：

```
WSHttpBinding bind= new WSHttpBinding();
bind.Security.Mode = SecurityMode.Transport;
bind.Security.Transport.ClientCredentialType = HttpClientCredentialType.None; 
```

第三，您可以`binding`在客户端配置中放置一个配置部分，并在构造函数中引用该部分，如下所示：

```
WSHttpBinding bind = new WSHttpBinding("TransportSecurity"); 
```

第三个示例假定`wsHttpBinding`客户端配置文件中有一个名为“TransportSecurity”的部分。

有关详细信息，请查看以下 MSDN 文章：

[如何：设置安全模式](http://msdn.microsoft.com/en-us/library/ms731884.aspx)

[WSHttpBinding 构造函数](http://msdn.microsoft.com/en-us/library/system.servicemodel.wshttpbinding.wshttpbinding.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:43:05.007

好吧，解决了自创证书的问题。我已经更改了 Viosual Studio 2010 中编程连接和服务引用的端点地址。

```
string ADRESASSL = "https://localhost/ServiciuSSLwsBind/Service1.svc"; 
```

现在是

```
string ADRESASSL = "https://eu-pc/ServiciuSSLwsBind/Service1.svc"; 
```

我已将地址从 localhost 更改为 pc "eu-pc" 的名称。它与颁发证书的域有关。使用 localhost 或 127.0.0.1 仅适用于一种方法或另一种方法。

希望这会帮助其他可能遇到此问题的人。

# nhibernate - NHibernate.Caches.EnyimMemcached, protobuf-net.Enyim 想要 Enyim.Caching 的冲突版本

> ID：14925607
> 
> 赞同：3
> 
> 时间：2013-02-17T20:17:29.100
> 
> 标签：nhibernate, memcached, protobuf-net, enyim.caching

我正在尝试连接 NHibernate 以使用 Enyim.Memcached 提供程序进行二级缓存。此外，我希望 Enyim.Memcached 使用 protobuf-net 作为其序列化程序。

查看 nuget 和 web，我可以找到几乎所有我需要的部分：

核桃：

*   `protobuf-net.Enyim`
*   `protobuf-net` （protobuf-net.Enyim 的依赖关系）
*   `EnyimMemcached (Enyim.Caching)`v2.12 (protobuf-net.Enyim 的依赖)

网络：（[http://sourceforge.net/projects/nhcontrib/files/NHibernate.Caches/](http://sourceforge.net/projects/nhcontrib/files/NHibernate.Caches/) - 我找不到 NHibernate.Caches.EnyimMemcached 的 nuget 包）

*   `NHibernate.Caches.EnyimMemcached`
*   `Enyim.Caching`v2.3

然而，当我把所有东西都连接起来时，我得到了一个`The located assembly's manifest definition does not match the assembly reference.`错误。问题似乎是：

*   `NHibernate.Caches.EnyimMemcached`想要`Enyim.Caching`v2.3
*   `protobuf-net.Enyim`想要`Enyim.Caching`v2.12

他们玩得不好。我尝试添加程序集重定向，但无济于事：

```
 <dependentAssembly>
    <assemblyIdentity name="Enyim.Caching" publicKeyToken="cec98615db04012e" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-2.3.0.0" newVersion="2.3.0.0" />
  </dependentAssembly> 
```

~~“最新”的 Enyim.Caching 程序集（通过 EnyimMemcached 包）只有 v2.12。~~哦！2.12*比*2.3 更新。（感谢您指出马克！）

有什么想法吗？是否有我不知道的 NHibernate.Caches.EnyimMemcached nuget 包？还是使用 2.3 而不是 2.12 的 protobuf-net.Enyim？我无法想象我是唯一一个尝试使用这个 NHibernate-Enyim-Protobuf-net 堆栈的人。我很惊讶程序集绑定重定向没有解决这个问题。

**更新：**我很乐意听从 Marc 的建议。我只是下载了 NHibernate.Caches.EnyimMemcached 的源代码并将其 Enyim.Caching 引用从未签名的 v2.3 程序集更改为已签名的 2.12 程序集。一切都是肉汁！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:28:23.717

“只有 v2.12”——这让我一时不知所措，但 2.12 比 2.3 更新得多；2.7 是 2011 年 1 月；2.12 是 2012 年 10 月。我似乎根本无法获得 2.3（即使通过命令行工具）。没有“仅... v2.12”之类的东西，因为在撰写本文时，v2.12*是最新版本*。

不过，我可以建议的最简单的事情是尝试手动构建 protobuf 转码器，直接引用 NHibernate 使用的任何版本。

enyim 工具周围似乎有一些……*奇怪的地方；*在野外至少有 2 个不同的版本（具有不同的强名称 IIRC）-它们甚至具有稍微不同的界面（`Int16`vs`Int32`在一些地方，和`Flag`vs `Flags`，来自内存）。*可能*是NHibernate 正在使用“其他”的。我选择了 nuget 的构建；但是 - 如果这是“错误的”，我很乐意重新评估。

编辑：

我从您的链接中下载了 NHCH-3.2.0.GA-bin.zip，并用于`sn -T <path>`检查公钥；这给出了：

> {路径已删除}\Enyim.Caching.dll 不代表强命名程序集

然后我用从 nuget via 新下载的版本尝试了这个`Install-Package EnyimMemcached`，它给出了：

> 公钥令牌是 cec98615db04012e

所以基本上，在 2.3 和 2.12 之间的某个时间点，它已经开始使用强名称。

这意味着这些 dll 将始终具有根本不同的身份，并且永远不能互换。可悲的是，我对此无能为力。如果您无法更新 NH，那么您将不得不针对非强命名 dll 执行 protobuf 工具的本地构建。如果您在构建它时遇到与缺少成员相关的问题`Flags`，请尝试将代码本地更改为`Flag`.

就我个人而言，如果是我，添加、删除或更改公钥令牌是值得进行“重大”修订更新的——即升级到 3.0；因为这从根本上是一个突破性的变化。

# mysql - MySQL：在全文搜索中使用加号和通配符

> ID：14925612
> 
> 赞同：0
> 
> 时间：2013-02-17T20:18:03.533
> 
> 标签：mysql, full-text-search, wildcard

我尝试了以下查询但没有成功；由于某种原因，每个单词的初始通配符都被忽略了。

```
SELECT * FROM table WHERE MATCH(field) AGAINST("+*foo* +*bar*" IN BOOLEAN MODE) 
```

我也尝试过使用括号，但没有不同的结果：

```
SELECT * FROM table WHERE MATCH(field) AGAINST("+(*foo*) +(*bar*)" IN BOOLEAN MODE) 
```

这些都不应该工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:10:37.070

Mysql全文索引只支持搜索前缀。所以你可以搜索“foo*”，但不能搜索“*foo*”

[更多信息](http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html)

# python - 添加数字会导致奇怪的结果 - 例如“90.005.25”

> ID：14925615
> 
> 赞同：0
> 
> 时间：2013-02-17T20:18:25.127
> 
> 标签：python, floating-point, addition

```
float(time)
if time == '90.00':
    added = added.getText()
    if not added == '':
        added = added.replace(':', '.')
        added = added.replace('+', '')
        added = ' '.join(added.split())
        float(added)
        time1 = time+added
        print time1 
```

从足球比赛开始，试图将“伤病时间”增加到 90 分钟。知道为什么这不起作用。我只是让他们俩并排打印

```
90.005.25 
```

我觉得我是笨蛋，已经盯着这个太久了。

谢谢

埃文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:25:43.750

```
if time == '90.00':
    time = float(time)
    added = added.getText()
    if not added == '':
        added = added.replace(':', '.')
        added = added.replace('+', '')
        added = ' '.join(added.split())
        added = float(added)
        time1 = time+added
        print time1 
```

`float`不是就地操作，`float(added)`返回`added`转换为浮点数，但不更改`added`。您不保存返回的值，所以它转到以太，并且`added`仍然是一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:31:19.250

问题是您不是在添加数字，而是在添加字符串。在 Python 中，将 + 运算符应用于字符串将它们连接起来：

```
>>> 12 + 34
46
>>> '12' + '34'
'1234'
>>> 'Hello ' + 'world!'
'Hello world!' 
```

@tcaswell 已经使用浮点数而不是字符串添加提供了修复。

另一种选择是使用时间模块。这样做的好处是有内置的函数可以做一些事情，比如将秒转换为分钟到小时等等。

# python - 是否可以使用字典作为参数参考来最小化 PyMinuit

> ID：14925618
> 
> 赞同：0
> 
> 时间：2013-02-17T20:18:37.697
> 
> 标签：python

是否可以通过将参数字典传递给最小化器来执行[PyMinuit](http://code.google.com/p/pyminuit/)函数最小化？

例如，PyMinuit 的常用用法会使用如下方式调用：

```
def f(x, a, b): return a + b*x

def chi2(a,b):
    c2 = 0.
    for x, y, yerr in data:
        c2 += (f(x, a, b) - y)**2 / yerr**2
    return c2

m = minuit.Minuit(chi2)
m.migrad() 
```

从[这个问题](https://stackoverflow.com/questions/7927670/how-to-define-a-chi2-value-function-for-arbitrary-function)，我了解 PyMinuit 使用自省来确定参数 x 和 y （但我不完全确定这意味着什么）。理想情况下，我希望能够执行以下操作：

```
p = dict()
p['x'] = 0.
p['y'] = 0.

def f(x,a,b): return a + b*x

def chi2():
    c2 = 0.
    for x, y, yerr in data:
        c2 += (f(x, a, b) - y)**2 / yerr**2
    return c2

m = minuit.Minuit(chi2,**p)
m.migrad() 
```

甚至：

```
p = <dictionary of parameters + initial values>

model = <list containing strings representing functions e.g. 'a*b+a**2*x'>

data = x, y, yerr, model

def chi2():
    c2 = 0.
    for x, y, yerr, model in data:
        c2 += (eval(model,{"__builtins__":None},p) - y)**2 / yerr**2
    return c2

m = minuit.Minuit(chi2)
m.migrad() 
```

[我在谷歌群组问题页面](http://code.google.com/p/pyminuit/issues/detail?id=6)上看到了一个类似问题的解决方法，他们从整数输入中生成了“假代码”和“假函数”（点击链接查看）。我用我的字典 p 尝试了类似的东西：

```
class fake_code:
    def __init__(self,p):
        self.co_argcount = len(p)
        self.co_varnames = tuple(p.keys())
        print tuple(p.keys())

class fake_function:
    def __init__(self,p):
        self.func_code = fake_code(p)
    def __call__(self,*args):
        c2 = 0.
        print args
        for x, y, yerr in data:
            c2 += (f(x, a, b) - y)**2 / yerr**2
    return c2 
```

但由于某种原因，所有参数都被归类为“固定”，我似乎无法“取消固定”它们。

我认为应该可以这样做，但是我对 python 的了解还不够，不能说这是否是最好的方法，或者即使应该尝试。如果有人能对此有所了解，我将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:08:45.757

可能回答迟了。试试这个。我之所以写它是因为缺少此特定功能等。

[http://iminuit.github.com/iminuit/](http://iminuit.github.com/iminuit/)

请参阅示例如何在此处编写通用成本函数：

[http://nbviewer.ipython.org/urls/raw.github.com/iminuit/iminuit/master/tutorial/hard-core-tutorial.ipynb](http://nbviewer.ipython.org/urls/raw.github.com/iminuit/iminuit/master/tutorial/hard-core-tutorial.ipynb)

然而，虽然写 chi^2/似然函数很容易，但它已经在 probfit 中为你写好了

[http://iminuit.github.com/probfit/](http://iminuit.github.com/probfit/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:30:21.403

好的，我不喜欢回答自己的问题，但我想我已经找到了使用`exec`. 如果`chi2`在模板中定义函数并在运行时使用函数构建它，`make_chi_squared`那么这是可能的。我设法提出的解决方案如下所示。

```
import minuit
import numpy

chi_squared_template = """
def chi_squared(%(params)s):
    li = [%(params)s]
    for i,para in enumerate(li):
        p[l[i]] = para
    return (((f(data_x, p) - data_y) / errors) ** 2).sum()
"""

l = ['a1','a2','a3','a4']

p = dict()
p['a1'] = 1.
p['a2'] = 1.
p['a3'] = 1.
p['a4'] = 1.

def make_chi_squared(f, data_x, data_y, errors):
    params = ", ".join(l)
    exec chi_squared_template % {"params": params}
    return chi_squared

def f(x,p):
    return eval('a1 + a2*x + a3*x**2 + a4*x**3',
                {"__builtins__":locals()},
                p)

data_x = numpy.arange(50)
errors = numpy.random.randn(50) * 0.3
data_y = data_x**3 + errors

chi_squared = make_chi_squared(f, data_x, data_y, errors)

m = minuit.Minuit(chi_squared)
m.printMode = 1
m.migrad()
print m.values
p = m.values
print p 
```

这有点混乱，我不确定它是否是处理此类问题的最佳方法，但它确实有效！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T19:55:54.443

以下内容在很大程度上未经测试，我通常会尽量避免这样做，但我例外，以便更好地向您解释我在评论中提到的可能适用于此的简化方式。它基于[此处](http://code.google.com/p/pyminuit/#Examples)显示的第一个示例。

```
import minuit

def minuit_call(func, **kwargs):
    CALL_TEMPLATE = "minuit.Minuit({0.__name__}, {1})"
    arg_str = ', '.join('{}={}'.format(k, v) for k,v in kwargs.iteritems())
    return eval(CALL_TEMPLATE.format(func, arg_str))

def f(x, y):
    return ((x-2) / 3)**2 + y**2 + y**4

m = minuit_call(f, x=0, y=0)
m.migrad() 
```

如您所见，使用的模板相当简单，创建它不需要手动将函数主体中的任何代码转换为最小化格式字符串。

# asp.net - ASP.NET MVC - 在发布模式下生成奇怪的样式

> ID：14925619
> 
> 赞同：1
> 
> 时间：2013-02-17T20:18:46.570
> 
> 标签：asp.net, asp.net-mvc

我有这个：

```
bundles.Add(new StyleBundle("~/Content/Styles/Default").Include("~/Content/Styles/Default/Site.css")); 
```

在我的网站上，我有这个：

```
@section Styles
{
    @Styles.Render("~/Content/Styles/Default"))
} 
```

我的 _Layout.cshtml 看起来像这样：

```
@RenderSection("Styles", true) 
```

一切看起来都不错，嗯？嗯，不是真的。当我在发布模式下编译我的应用程序并决定发布它时，它呈现的是：

```
<link href="/Content/Styles/Default?v=78dkNySP_xsiuzsgxCx_GGnnHzYS-B8nNdnXqcl47XI1" rel="stylesheet"> 
```

它不是生成文件的href，而是生成某种id？指导？为什么？哦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T00:53:56.420

这就是捆绑包的工作方式。它的主要目的是让您将多个 CSS（以及 JS 文件）文件组合到一个包中。例如，您不再需要将所有 css（和 js）放入一个巨大的文件中。只需将其拆分为多个部分，然后将其添加到您的捆绑包中，然后将其打包成一个项目。网络请求越少，页面加载时间越快。

例如，假设您有 2 个 css 文件。一个是主要的，但你的菜单系统有一个。

```
bundles.Add(new StyleBundle("~/Content/Styles/Default").Include(
        "~/Content/Styles/Default/Site.css",
        "~/Content/Styles/Default/Menu.css")); 
```

这将在 URL 上显示为带有 GUID 类型代码（以防止缓存文件更改）的单个调用。此 URL 将链接到缩小和捆绑的 css。

> 但我的浏览器无法读取！文件没有物理路径！

这是一种虚拟文件。MVC 的捆绑使用路由引擎将其指向粒子捆绑的组合和缩小版本。

# android - Android Holo 选定列表项颜色

> ID：14925621
> 
> 赞同：14
> 
> 时间：2013-02-17T20:18:49.213
> 
> 标签：android, android-theme

有人可以告诉我 Holo 中选定列表项的相应颜色代码吗？另外，在 Holo 中生成长按列表项过渡的颜色是什么？我知道 Holo 颜色是在 colors.xml 中定义的，但我不确定哪些颜色用于选择和长按列表项转换。提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-20T20:39:24.847

如果您查看 Android 的平台框架库，尤其是`themes.xml`文件，您会找到问题的答案：

[https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml)

除其他外，该文件定义了以下两个 Holo 主题及其对应项目：

**主题.Holo：**

```
<style name="Theme.Holo">
    ...
    <item name="colorPressedHighlight">@color/holo_blue_light</item>
    <item name="colorLongPressedHighlight">@color/holo_blue_bright</item>
    ...
</style> 
```

**主题.全息.光：**

```
<style name="Theme.Holo.Light" parent="Theme.Light">
    ...
    <item name="colorPressedHighlight">@color/holo_blue_light</item>
    <item name="colorLongPressedHighlight">@color/holo_blue_bright</item>
    ...
</style> 
```

我认为这是您正在寻找的两种颜色。
颜色被翻译成以下十六进制代码：

```
<!-- A light Holo shade of blue -->
<color name="holo_blue_light">#ff33b5e5</color>

<!-- A really bright Holo shade of blue -->
<color name="holo_blue_bright">#ff00ddff</color> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-25T11:40:08.610

你可以试试这个：

```
android:background="?android:attr/selectableItemBackground" 
```

你也可以参考

[你如何在Android中获得选择颜色？](https://stackoverflow.com/questions/7745573/how-do-you-get-the-selection-color-in-android/14942479#14942479)

和

[可点击视图中的默认选择器背景](https://stackoverflow.com/questions/9250215/default-selector-background-in-clickable-views)

# c# - 非连续编号数组.NET

> ID：14925622
> 
> 赞同：1
> 
> 时间：2013-02-17T20:18:52.013
> 
> 标签：c#, .net, collections

对于索引不连续（但仅按升序添加）的数组，我将在 C# 中使用哪种集合类型，并且我需要按索引和按位置访问（例如“连续索引”）？

例如，如果我添加索引为 2、4 和 7 的对象 A、B 和 C，我需要按索引 (2/4/7) 或按位置访问 (1/2/3 或 0/1/2 两者工作）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:31:44.727

您应该使用 a`Dictionary`来存储对象以供其索引访问，但您还需要某种方式`List`来存储“地点”，因为`Dictionary`不存储地点。在您自己的班级中将它们一起加入，并将添加作为一个操作处理，以确保它们同步。

如果您只想使用一个，您可以使用`List`and 循环来查找密钥，但这将花费线性 O(N) 时间。

**编辑**

正如 Matthew Strawbridge 指出的那样，该`BinarySearch`方法将在 O(log N) 中找到元素，因此您可以跳过使用字典。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:26:14.470

使用`Dictionary`：

```
using System.Collections.Generic;

Dictionary<int, type> dict = new Dictionary<int, type>();

// Add values:
dict.Add(2, A);
dict.Add(4, B);
dict.Add(7, C);

// by index:
var A = dict[2];
var B = dict[4];
var C = dict[7];

// by place:
var A = dict.ElementAt(0);
var B = dict.ElementAt(1);
var C = dict.ElementAt(2); 
```

# python - Python 2.7 - 字典中重复项的总和值

> ID：14925624
> 
> 赞同：0
> 
> 时间：2013-02-17T20:19:20.693
> 
> 标签：python, dictionary, python-2.7

我有一个字典列表，例如：

```
list1=[{'a':'apples', 'b':'snack','count':2},{'a':'apples','b':'lunch','count':3},{'a':'apples','b':'snack','count':3}] 
```

我需要在“a”和“b”的列表中对重复项进行分组，并将它们的“计数”相加，这样：

```
list2=[{'a':'apples','b':'snack','count':5},{'a':'apples','b':'lunch','count':3}] 
```

在此处搜索存储库，但没有找到解决方案。非常感谢您的任何指点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:27:21.223

您可以使用`defaultdict`带有 2 元组的 a 来累积计数，然后将其推回列表...

```
list1=[{'a':'apples', 'b':'snack','count':2},{'a':'apples','b':'lunch','count':3},{'a':'apples','b':'snack','count':3}]

from collections import defaultdict
dd = defaultdict(int)
for d in list1:
    dd[d['a'], d['b']] += d['count']

list2 = [{'a': k[0], 'b': k[1], 'count': v} for k, v in dd.iteritems()]

[{'a': 'apples', 'count': 3, 'b': 'lunch'}, {'a': 'apples', 'count': 5, 'b': 'snack'}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:08:16.250

另一种解决方案，使用 groupby 和 list、dict 和生成器理解：

```
list1=[{'a':'apples', 'b':'snack','count':2},{'a':'apples','b':'lunch','count':3},{'a':'apples','b':'snack','count':3}]

from itertools import groupby
list1.sort()
group_func = lambda x: {key:val for key, val in x.iteritems() if key!='count'}
list2 = [dict(k, count = sum(item['count'] for item in items)) for k, items in groupby(list1, group_func)]

[{'a': 'apples', 'count': 3, 'b': 'lunch'}, {'a': 'apples', 'count': 5, 'b': 'snack'}] 
```

解释：

*   grouper 函数接受一个项目并使用 dict-comprehension 返回一个没有“count”项目的子词典。
*   然后 groupby 收集所有具有相同 subdict 的原始列表项
*   最后，列表推导迭代这些组并对计数项求和（现在使用生成器推导）。

缺点：

*   可读性较差。
*   要使 groupby 工作，它需要进行排序，这样可能会使事情变慢。

优点：

*   如果 list1 已经排序，这可能会更快。（因为理解在 python 中通常更快）
*   更短。（甚至可以写在一条几乎无法理解的行中:)）

# java - 不是原始类型的 java 类型

> ID：14925627
> 
> 赞同：-1
> 
> 时间：2013-02-17T20:19:36.283
> 
> 标签：java, types, type-conversion

我熟悉以下链接 [http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)中描述的 java 原始类型， 但我的问题是以下类型与哪种类型相关

```
BigDecimal ,
java.util.Date
String 

.... 
```

我在哪里可以找到描述非原始类型且与列表 hashMap 等无关的文档，我在谈论可以定义为类成员的类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:25:43.703

您可以在 java api 中找到这些信息。例如`BigDecimal`：

[http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)

任何类型都可以定义为类成员的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:29:50.667

> 以下类型与哪种类型有关

`int`例如，如果将其理解为和之间的“关系” `Integer`，那么您提到的类没有任何“相关”原始类型。

但如前所述，任何类都可以是类成员。

可以在[此处找到原始类型及其包装类之间的对应关系列表](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)

```
Primitive type  Wrapper class

boolean         Boolean
byte            Byte
char            Character
float           Float
int             Integer
long            Long
short           Short 
```

# android - 线程不工作。应用程序意外关闭。

> ID：14925629
> 
> 赞同：1
> 
> 时间：2013-02-17T20:19:45.033
> 
> 标签：android

当按下刷新按钮时，我试图在我的程序中显示进度对话框，但应用程序在调试器中因错误而关闭，即创建 ui hierachy 的线程只能触摸它。

```
 public class MainActivity extends Activity {
    Handler handler = new Handler();
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        this.refreshView();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void refreshView(){
        ImageView img = (ImageView) findViewById(R.id.imageView1);
        Bitmap bm = null;
        InputStream is = null;
        BufferedInputStream bis = null;
        try 
        {
            URLConnection conn = new URL("http://technomoot.edu.pk/$Common/Image/Content/ciit_logo.jpg").openConnection();
            conn.connect();
            is = conn.getInputStream();
            bis = new BufferedInputStream(is, 8192);
            bm = BitmapFactory.decodeStream(bis);
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
        finally {
            if (bis != null) 
            {
                try 
                {
                    bis.close();
                }
                catch (IOException e) 
                {
                    e.printStackTrace();
                }
            }
            if (is != null) 
            {
                try 
                {
                    is.close();
                }
                catch (IOException e) 
                {
                    e.printStackTrace();
                }
            }
        }
        img.setImageBitmap(bm);
}

    public void onRefresh(View view) {

        final ProgressDialog dialog = ProgressDialog.show(this,"Loading","Loading the image of the Day");
        Thread th = new Thread(){
            public void run(){
                refreshView();
                handler.post(new Runnable(){
                    public void run(){
                        dialog.dismiss();
                    }
                }
                        );
            }

        };th.start();   
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:22:30.060

您正在从非 ui 线程调用 ui 操作，您可以使用`runOnUiThread`..
或更好地使用`AsynchTask`

```
public YourTask extends AsyncTask<Object,Object,Object>{ //change Object to required type
    ProgressDialog dialog;
    Context context;

public YourTask(Context context){
    this.context=context;
}

protected void onPreExecute(Object o){
     dialog = ProgressDialog.show(this,"Loading","Loading the image of the Day");
}

protected void doInBackground(Object o){
    refreshView();
}

protected void onPostExecute(Object o){
    img.setImageBitmap(bm);
    dialog.dismiss();
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:22:38.273

您不能使用`UI`from worker进行操作`Thread`！它是被禁止！如果你想更新`UI`只是使用

*   **`runOnUiThread()`**
*   **`AsyncTask`**

所以试试这样：

```
runOnUiThread(new Runnable() {

   @Override
   public void run() {
      // do your work.

   }
}); 
```

`AsyncTask`更复杂，也是泛型类型，它提供了一些好处，如类型控制等。您可以在此处查看示例：

*   [**`Android application (performance and more) analysis tools - Tutorial`**](http://www.vogella.com/articles/AndroidPerformance/article.html)

# weka - 使用 weka 加载数据时的问题

> ID：14925631
> 
> 赞同：0
> 
> 时间：2013-02-17T20:19:46.653
> 
> 标签：weka

我正在尝试在 weka 中加载一些 csv 数据。12 名患者的一些基因表达特征。大约有 22,000 个特征。但是，当我加载 csv 文件时，它说

```
not recognized as an "CSV data files' file 
```

到我的 csv 文件。

我想知道是因为功能的大小还是其他原因。我检查了 csv 文件，它很好地用逗号分隔。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T12:58:54.637

我不鼓励您在 Weka 中使用 CSV 文件。虽然这是完全可能的（[http://weka.wikispaces.com/Can+I+use+CSV+files%3F](http://weka.wikispaces.com/Can+I+use+CSV+files%3F)），但它会导致一些严重的缺陷。尝试从您的 CSV 生成 ARFF 文件。

# linux - 在 Linux 内核源代码中更改版本字符串

> ID：14925632
> 
> 赞同：2
> 
> 时间：2013-02-17T20:19:52.317
> 
> 标签：linux, linux-kernel

我已经下载并解压了 Linux 内核。内核源文件中的哪些文件负责显示版本字符串？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T20:34:09.630

它位于顶层 Makefile 的前四行。

# c++ - 区分字符串文字和运行时生成的字符串的方法

> ID：14925635
> 
> 赞同：-4
> 
> 时间：2013-02-17T20:20:06.560
> 
> 标签：c++, templates, c++11, string-literals

假设我有一个将字符串作为输入的函数：

```
SomeOutputType f_impl(const char* s); 
```

大多数呼叫站点仅使用字符串文字作为输入，例如`f("Hello, world")`. 假设我已经实现了以下函数来在编译时计算结果

```
template <char...> SomeOutputType f_impl(); 
```

我的问题是，有没有办法让呼叫站点像`f("Hello, world")`调用模板表单一样，而对于一般呼叫站点，像`string s="Hello, world"; f(s.c_str());`调用一般表单？为了澄清起见，`auto s = "Hello, world"; f(s);`不必调用模板化表单，因为`s`现在是一个变量，不再是编译时常量。

这个问题的一个有用案例是优化`printf`. 在大多数情况下，`format`它将是字符串文字，因此可以在编译时完成很多事情来优化事情，而不是`format`在运行时解析。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-17T20:24:01.307

不，像这样的字符串文字`"foo"`的类型`const char[S + 1]`是`S`您编写的字符数。它的行为就像没有特殊规则的那种类型的数组。

在 C++03 中，有一条特殊规则表示字符串文字可以转换为`char*`. 这让你可以说

```
#define isStringLiteral(X) \
  isConvertibleToCharStar(X) && hasTypeConstCharArray(X) 
```

例如`isStringLiteral(+"foo")`会产生`false`，并且`isStringLiteral("foo")`会产生真。即使这种可能性也不允许您使用字符串文字参数调用函数并表现不同。

C++11 删除了特殊的转换规则，字符串文字的行为与任何其他数组一样。在 C++11 中，你可以编写一些宏，匹配一些简单的字符串文字而不处理转义序列

```
constexpr bool isStringLiteral(const char *x, int n = 0) {
  return *x == '"' ? 
           n == 0 ?
             isStringLiteral(x + 1, n + 1)
             : !*(x + 1) 
           : (*x && n != 0 && isStringLiteral(x + 1, n + 1));
}

#define FastFun(X) \
  (isStringLiteral(#X) ? fConstExpr(X, sizeof(X) - 1) : f(X)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:36:16.017

虽然我没有对此进行测试，但我认为如果您只声明函数 constexpr 并进行高度优化编译，编译器将尽可能在编译时进行计算。作为奖励，您不需要编写两次代码。另一方面，您必须以 constexpr 样式编写一次。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-17T20:45:35.627

如果我正确理解了这个问题，我实际上认为使用函数重载是可能的。 [这是一篇](http://www.altdevblogaday.com/2011/10/27/quasi-compile-time-string-hashing/)展示基本思想的文章。在你的情况下，我认为有以下两个重载就足够了：

```
void f(char const *);

template<unsigned int N>
void f(char const (&)[N]); 
```

当字符串是字符串文字时应该调用后者，其他时候应该调用后者。如果编译器足够擅长优化，则可以在编译时评估对后者的调用。

编辑：

好吧，上面的解决方案不起作用让我很困扰，所以我做了一些尝试，我想我想出了一个解决方案：

```
#include <string>
#include <boost/utility/enable_if.hpp>

template<typename T>
struct is_string_literal {
  enum { value = false };
};

template<unsigned int N>
struct is_string_literal<char const (&)[N]> {
   enum { value = true };
};

template<typename T>
typename boost::disable_if<is_string_literal<T> >::type
foo(T) {
  std::cout << "foo1" << std::endl;
}

template<int N>
void foo(char const (&)[N]) {
  std::cout << "foo2" << std::endl;
}

int main( ) {
  std::string bar = "blah";
  char const str[] = "blah";

  foo(str);
  foo("blah");

  foo(bar.data());
} 
```

输出（在带有 -O3 的 GCC 4.4 上）是：

```
foo2
foo2
foo1 
```

我承认我不完全理解为什么当以前的解决方案不起作用时它会起作用。也许有一些关于重载决议的东西我不完全理解。

# java - 寻找用于从值/XPath 对列表创建 XML 文档的 Java 解决方案

> ID：14925641
> 
> 赞同：0
> 
> 时间：2013-02-17T20:21:12.503
> 
> 标签：java, xml, xslt

我在电子表格中有两列。

一列是用于从现有 XML 文档中获取值的 XPath 表达式。另一列是一个 XPath 表达式，我需要从中创建我的 XSLT/输出 XML 文档。从第一列抓取的值将是放置在第二列元素中的值。

例如，如果第二列有 XPath /A/B/C，我会创建

```
<A>
  <B>
    <C><xsl:value-of select = "corresponding value from 1st column"/></C>
  </B>
</A> 
```

如果下一个 XPath 是 /A/B/D，我会添加

```
<D><xsl:value-of select = "corresponding value from 1st column"/></D> 
```

作为 C 的兄弟姐妹。

我希望手动创建这个输出 XML/XSLT 结构。但是有数千行。

我正在寻找有关如何在 Java 中以编程方式执行此操作的建议。我从来没有混合过 Java/XML/XPath，所以也许有一些库可以帮助解决这个问题？如果这是一项艰巨的任务，我将无法证明它的合理性，而不是手工完成。如果我能写出能让我大部分时间到达那里的东西，我会很高兴。这是白日梦吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:16:00.787

当然，大多数 Java XML 库都支持通过 XPath 轻松检索 DOM 节点。他们经常使用[Jaxen](http://jaxen.codehaus.org/)作为后端，因此请确保您的类路径中有 Jaxen JAR。[请参阅JDOM](http://www.jdom.org/docs/apidocs/org/jdom2/xpath/XPathFactory.html)、[DOM4J](https://stackoverflow.com/questions/1669625/using-xpath-in-dom4j)和[XOM](http://www.xom.nu/tutorial.xhtml#d0e1828)中的 XPath 支持。

# c# - HTTPClient 返回 HttpRequestException WinRT

> ID：14925643
> 
> 赞同：2
> 
> 时间：2013-02-17T20:21:13.027
> 
> 标签：c#, json, windows-runtime, httpclient

出于某种原因，当我尝试从我正在使用的 Web API 获取 JSON 结果时，我在 Visual Studio 中收到**403: Forbidden异常。**当我尝试在我的 Web 浏览器中使用 Web API URL 时，一切都按原样显示。有任何想法吗？

*主要代码：*

```
 theURI = "http://isitup.org/duckduckgo.com.json";
        HttpClient httpClient = new HttpClient();
        httpClient.MaxResponseContentBufferSize = Int32.MaxValue;
        var jsonResponse = await httpClient.GetStringAsync(theURI);

        var rootObject = JsonConvert.DeserializeObject<StatusMessage.RootObject>(jsonResponse);
        int statuscode = rootObject.status_code;

        if (statuscode == 1)
        {
            txtStatus.Text = "Website is UP!";
        }
        else if (statuscode == 2)
        {
            txtStatus.Text = "Website is DOWN!";
        }
        else
        {
            txtStatus.Text = "Invalid domain!";
        } 
```

*和类文件*

```
class StatusMessage
{
    public class RootObject
    {
        public string domain { get; set; }
        public int port { get; set; }
        public int status_code { get; set; }
        public object response_ip { get; set; }
        public object response_code { get; set; }
        public object response_time { get; set; }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T02:05:14.600

如果您使用默认用户代理，服务器似乎会响应您 403。如果您将其更改为 chrome 用户代理，则服务器正在正确应答。

```
var url = new Uri("http://isitup.org/duckduckgo.com.json");
var req = new HttpClient();
var message = new HttpRequestMessage(HttpMethod.Get, url);
message.Headers.Add("User-Agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1309.0 Safari/537.17");
var response = await req.SendAsync(message);
var responseString = await response.Content.ReadAsStringAsync(); 
```

# r - 将索引函数应用于矩阵行中的每个值

> ID：14925647
> 
> 赞同：3
> 
> 时间：2013-02-17T20:21:33.943
> 
> 标签：r

我想将该函数`exp(-r*(i/500))`应用于矩阵行中的每个值（其中`i`表示列号）。我知道如何使用循环来做到这一点，但我正在尝试学习 R 中的“正确”方法。

我想过：

```
apply(st,1,function(v) { exp(-r * (i/500)*v }) 
```

但我不知道如何定义 value `i`，这样它就会为每一列增加。

我知道一个循环会完成这个，但我相当肯定这不是 R 中的最佳方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:37:24.720

试试这个，因为将返回一个与填充列`col(st)`相同维度的矩阵`st`

```
st* exp(-r * (col(st)/500)) 
```

毫不奇怪，还有一个行功能，它们一起可以很有用。乘法表：

```
m <- matrix(NA, 12,12)
m=col(m)*row(m) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T20:31:46.063

如果你必须使用`apply`，那么像这样的东西？

```
> apply(as.matrix(seq_len(ncol(m))), 1, function(x) exp(-r * m[,x]/500)) 
```

`m`你的矩阵在哪里。

当然，这里没有必要使用`apply`。您只需要构造一个适当的矩阵。

```
exp(-r * matrix(rep(1:ncol(m), nrow(m)), nrow=nrow(m), byrow=T)/500) * m 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T20:28:22.613

也许是这样的？

```
## m is the matrix with your data
m <- matrix(1:50,ncol=10,nrow=5)
## m2 is a matrix with same dimensions and each element is the column number
m2 <- matrix(rep(1:ncol(m),nrow(m)),ncol=ncol(m),nrow=nrow(m),byrow=TRUE)
## Compute m2 such as each value is equal to expr(-r*(i/500))
m2 <- exp(-r*(m2/500))
## multiply m and m2
m*m2 
```

# android - Eclipse 中的 Android 错误：无法解析目标“android-xx”

> ID：14925651
> 
> 赞同：11
> 
> 时间：2013-02-17T20:21:50.303
> 
> 标签：android, version, android-sdk-tools

我知道有某种重复，但到目前为止，没有一个答案能够帮助我。

在通过SVN与一些朋友共享的项目中，我总是收到以下错误：

> 无法解析目标“android-10”

当我更改`project.properties`以更改目标版本时，错误消息将保留，除非我使用 android-16。

我已经检查了我的项目的 Android 会话，看看我是否可以在那里更改目标，但它只给了我 16 和 17 作为选项。

在我的 SDK 管理器中，我安装了整个“SDK 10”分支以及其他几个分支。

有人知道这里可能是什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-15T06:10:00.250

另一种方法是不使用相同的 SDK，而是使用您计算机中的 SDK。

1.  右键单击项目并选择Android，检查目标名称，单击“应用”和“确定”。
2.  然后右键单击项目-> Android 工具-> 修复项目属性。
3.  清理并构建项目。

![设置属性添加sdk](../Images/cce0c74cadcd0840f3ef3865c1fe8a06.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-11T01:36:49.557

这个答案为时已晚，但对于遇到相同问题的任何人，请尝试从 SDK 管理器安装 API 10。然后像以前一样运行所有内容。

或者，如果您使用的是 Windows 操作系统，这也可能会有所帮助：[http ://sagistech.blogspot.ca/2010/05/android-sdk-error-unable-to-resolve.html](http://sagistech.blogspot.ca/2010/05/android-sdk-error-unable-to-resolve.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-17T21:18:26.407

如果您没有在属性视图中选择 android-10，那么显然您的安装有问题。

好吧，显而易见的事情是仔细检查 Window >> Preferences >> Android 中的 SDK 位置是否正确设置并指向正确的 ADT 安装。如果是这样，首选项中的视图还应该包括 SDK10 作为已安装的平台之一（在这种情况下，确实不应该有任何问题）。

如果没有，则说明出现了问题——在 Eclipse 或 ADT 安装中。我会检查——只是为了确定——你有正确的 Java SDK——在这种情况下，我自己在 Eclipse/ADT 上遇到了问题。

但是，如果这两件事看起来井井有条，我能给出的最好建议是重新安装 eclipse 和 ADT。如果您只使用 Android 安装，那么我建议您使用来自 developers.android.com 的“官方”Google Eclipse 包。

除非您在 Eclipse 环境中设置了很多很难更改的东西，否则我不建议您花时间尝试识别任何被搞砸的变量（从这里的痛苦经历说起；））。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-22T07:43:37.527

导入项目时，在选择项目后勾选“将项目复制到工作区”复选框。希望这对您有所帮助，因为此选项已为我修复。

# python - 使用 json 渲染器将记住标头添加到 json 响应

> ID：14925652
> 
> 赞同：4
> 
> 时间：2013-02-17T20:21:56.090
> 
> 标签：python, json, authentication, pyramid

这是我用来添加记忆头响应的当前方式：

```
@view_config(route_name='login', renderer='json', request_method='POST')
def post_login(request):
   ...
   ... authentication logic
   ...
   headers = remeber(request, login)
   return HTTPFound(location=came_from, headers=headers) 
```

但我的 js 正在等待响应 {successful: True, message: 'auth OK'}。HTTPFound 将重定向到 came_from。我要js重定向

所以我尝试了这个

```
@view_config(route_name='login', renderer='json', request_method='POST')
def post_login(request):
   ...
   ... authentication logic
   ...
   return { 'successful': True, 'message': 'auth OK'} 
```

但由于记住标头从未添加到响应中，因此永远不会在 moooon 的另一侧进行身份验证。

所以我的问题是如何使用 json 渲染器添加那些记忆标题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T21:25:40.593

您可以直接在响应中设置该信息，如Pyramid 手册的[Vary Attributes of Rendered Responses 部分所述：](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/renderers.html#varying-attributes-of-rendered-responses)

```
@view_config(route_name='login', renderer='json', request_method='POST')
def post_login(request):
   ...
   ... authentication logic
   ...
   headers = remeber(request, login)
   request.response.headerlist.extend(headers)
   return { 'successful': True, 'message': 'auth OK'} 
```

# java - 我未能使用此 java 代码获取 facebook 资源页面：

> ID：14925654
> 
> 赞同：-1
> 
> 时间：2013-02-17T20:22:04.647
> 
> 标签：java, php, html, facebook

对于测试，我想尝试使用该 java 代码获取 facebook 资源页面：它适用于除 facebook\twitter 之外的任何其他网站，有什么解决方案吗？

```
public class ReadWebPage {
  public static void main(String[] args) {

String urltext = "http://www.facebook.com";
BufferedReader in = null;
try {
  URL url = new URL(urltext);
  in = new BufferedReader(new InputStreamReader(url.openStream()));

  String inputLine;
  while ((inputLine = in.readLine()) != null) {
    System.out.println(inputLine);
  }
} catch (Exception e) {
  e.printStackTrace();
} finally {
  if (in != null) {
    try {
      in.close();
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
}
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:26:25.223

返回什么错误？我怀疑它与“ [http://www.facebook.com/](http://www.facebook.com/) ”重定向到“ [https://www.facebook.com](https://www.facebook.com) ”有关。我建议尝试 https 地址并查看是否可以解决问题。

# ruby-on-rails - 在表格中选择belongs_to父母？

> ID：14925655
> 
> 赞同：0
> 
> 时间：2013-02-17T20:22:06.157
> 
> 标签：ruby-on-rails

想象一下我有这样的事情：

```
class Employer < ActiveRecord::Base
  has_many :employees
end

class Employee < ActiveRecord::Base
  belongs_to :employer
end 
```

我想创建一个新员工，并提供一个带有下拉框的表单，我可以在其中选择我希望与之关联的雇主。下拉列表应列出系统中的每个雇主。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:10:24.080

我想你还没有理解这个协会是做什么的。或者我还没明白你真正想要什么。

如果您想在视图中显示所有雇主，您只需在相应的控制器操作中获取它们并将其保存在实例变量中。然后您可以在视图中访问其内容。

控制器动作：

```
@employers = Employer.all
... 
```

对应视图：

```
<%= collection_select @employers %> 
```

# android - 如何通过使用 Robotium 调用 onDestroy 来自动测试 onResume 行为？

> ID：14925656
> 
> 赞同：5
> 
> 时间：2013-02-17T20:22:06.093
> 
> 标签：android, functional-testing, robotium, onresume, ondestroy

我正在使用 Robotium 对 Android 应用程序进行功能测试。我想在调用 onDestroy 后测试 onResume 行为。 [这篇文章](https://stackoverflow.com/questions/7838197/testing-onpause-ondestroy-using-robotium)提示使用 Instrumentation，但我无法让它工作。我包括了以下内容，但这失败并出现 IllegalStateException。是否可以销毁应用程序并重新启动它？

```
public class MainActivityFunctionalTest extends ActivityInstrumentationTestCase2<MainActivity> {
private Solo solo;

public MainActivityFunctionalTest() {
    super(MainActivity.class);
}

public void testActionList() {
    getInstrumentation().callActivityOnDestroy(solo.getCurrentActivity());
    ...
} 
```

导致以下异常：

```
java.lang.IllegalStateException: Must be called from main thread of process at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1373) at android.app.FragmentManagerImpl.dispatchDestroy(FragmentManager.java:1825) at android.app.Activity.performDestroy(Activity.java:5171) at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1109) at nl.handypages.trviewer.test.MainActivityFunctionalTest.testActionList(MainActivityFunctionalTest.java:81) at java.lang.reflect.Method.invokeNative(Native Method) at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:214) at android.test.InstrumentationTestCase.runTest(InstrumentationTestCase.java:199) at android.test.ActivityInstrumentationTestCase2.runTest(ActivityInstrumentationTestCase2.java:192) at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190) at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175) at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555) at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-14T11:45:18.637

您可以像这样模拟配置更改：

```
 getInstrumentation().runOnMainSync(new Runnable() {
        @Override
        public void run() {
            activity.recreate();
        }
    });
    setActivity(null);
    activity = getActivity(); 
```

这将导致创建 Activity 的新实例，并且它应该正确地经历生命周期（包括传递捆绑包以从新 Activity 恢复）。请注意，这只适用于 Honeycomb（API 级别 11）及更高版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T19:25:30.190

我认为您无法恢复已经被破坏的活动。如果您的活动没有被破坏，而只是停止，那么您可以重新启动并恢复它。OnResume 需要在 UI 线程上调用，因此假设您想在 Activity 已经运行后测试恢复状态，您可以这样做：

```
@UiThreadTest
public void testResumeAfterStop() {
    Instrumentation instr = this.getInstrumentation();

    // here, test or record down whatever should be tested 
    // when the activity is in resume state the first time

    instr.callActivityOnPause(getActivity());
    instr.callActivityOnStop(getActivity());
    instr.callActivityOnRestart(getActivity());
    instr.callActivityOnStart(getActivity());
    instr.callActivityOnResume(getActivity());

    // Now you are in the resume state again. 
    // Test whatever you need here.

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T22:07:53.893

谢谢。我添加并调用了这个。

```
public void callActivityOnDestroy(final Activity activity){
    getInstrumentation().runOnMainSync(new Runnable() {
            public void run() {
                activity.finish();
            }
        });
}
public void callActivityStart(final Activity activity){
    getInstrumentation().runOnMainSync(new Runnable() {
            public void run() {
                activity.startActivity(new Intent(activity, MainActivity.class));
            }
        });
} 
```

或者（在我的情况下）我可以打电话（如果我不想完成终止进程）：

```
getInstrumentation().callActivityOnStop(getActivity());
getInstrumentation().callActivityOnRestart(getActivity()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T11:59:47.990

好吧，这里有两个问题，第一个问题是检测 callactivityondestroy 方法要求您从主线程调用它。有关如何执行此操作的详细信息，请参阅[runOnUiThread 使用提示。](https://stackoverflow.com/questions/14830273/runonuithread-usage-tips)

第二个问题是（我在这里可能错了）永远不会假设从 onDestroy 到 onResume [http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)说在 ondestroy 之后活动实际上被破坏了. 您必须创建一个新的活动实例才能获得另一个 onResume。你可以通过再次启动你的活动来做到这一点。我想您可以按照自己的方式进行操作，但我不确定它的有效性，如果您想以这种方式进行操作，只需以与我链接到的问题中所述的 onDestroy 相同的方式调用 onResume 即可。

# r - R中的时间戳转换

> ID：14925658
> 
> 赞同：-1
> 
> 时间：2013-02-17T20:22:20.107
> 
> 标签：r, timestamp

我有一个时间戳数据，它具有以下结构，其中日期和时间以下列方式显示：

```
timestamp
January 22,2013 20:56
January 22,2013 08:53
January 22,2013 20:59 
```

我该怎么做才能使它成为 R 中的时间对象？我打算编写一个 perl 脚本将数据转换为 YEAR-MONTH-TIME HH:MM:SS 格式并使用 POSIXct 将其导入日期时间对象，但我想知道是否有捷径可以这样做R。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T20:27:48.697

您可以使用`strptime`

```
strptime('January 22,2013 20:56','%b %d,%Y %H:%M')
[1] "2013-01-22 20:56:00" 
```

PS：这取决于您当地的情况：

```
Sys.setlocale('LC_TIME','FRENCH')
[1] "French_France.1252"

strptime('January 22,2013 20:56','%b %d,%Y %H:%M')
[1] NA
 Sys.setlocale('LC_TIME','ENGLISH')
[1] "English_United States.1252"
 strptime('January 22,2013 20:56','%b %d,%Y %H:%M')
[1] "2013-01-22 20:56:00" 
```

# android - 缺少 Android Draw9patch？

> ID：14925661
> 
> 赞同：10
> 
> 时间：2013-02-17T20:22:35.533
> 
> 标签：android

谁能解释一下为什么我的电脑上没有draw9patch，尽管有ADT等等？对 jar 文件的搜索没有给出任何结果。

我相信它应该默认安装。AFAIK，没有其他人遇到过这个问题。

任何人都可以帮忙吗？我尝试使用 Paint.NET 自己制作 9 个补丁，方法是在图像的左侧和顶部添加一个黑色像素，但由于我是 Android 新手，我无法让它工作。我什至尝试了一个名为 better9patch 的实用程序，但无济于事。我现在非常沮丧，因为我认为程序的图形应该是您在编程时最不关心的问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-04-18T08:33:30.187

事实上，流行的`draw9patch`应用程序现在可以作为 android studio 应用程序本身的一项功能使用。如果您尝试在项目中打开任何带有`.9.png`扩展名的文件，它将以 9 个补丁抽屉的视角打开。这是一个屏幕截图。![在此处输入图像描述](../Images/9aac202fcbd81a818d95140db588feee.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-17T14:37:15.787

You should download "draw9patch" folowing this link: [https://androidstudio.io/downloads/tools/download-the-latest-version-of-draw9patch.jar.html](https://androidstudio.io/downloads/tools/download-the-latest-version-of-draw9patch.jar.html).

Afterwards you extract the file and it will work.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-05T17:12:35.757

您可以使用[Android Asset Studio Simple 九补丁生成器](https://romannurik.github.io/AndroidAssetStudio/nine-patches.html)。这是网络应用程序。

> 一组工具，可轻松为您的 Android 应用生成资源，例如启动器图标。

项目页面：[https ://romannurik.github.io/AndroidAssetStudio/](https://romannurik.github.io/AndroidAssetStudio/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-29T08:34:59.727

打开终端导航到 sdk/tools。并输入

```
chmod +x draw9patch 
```

`./draw9patch`

希望它可以修复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T20:28:57.393

该程序应在`android-sdk/tools/draw9patch`. 如果要手动创建图像，则需要在图像周围设置 1px 宽的透明边框，在这些空白处用黑点表示补丁

# wordpress - 为什么托管 Wordpress 时没有样式（css）？

> ID：14925663
> 
> 赞同：-1
> 
> 时间：2013-02-17T20:22:45.420
> 
> 标签：wordpress, apache, xampp

嗨，我在 xampp 堆栈上本地托管了一个由 wordpress 提供支持的站点。查看`http://localhost`我可以看到样式和 css，但是当我转到我托管的网站时，内容在那里，但没有样式或 css。

是不是配置不正确，应该去哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:55:46.093

从 Wordpress 管理员转到*Settings* > *General*并检查*Wordpress 地址*和*站点地址*

# opencv - OpenCV 为 ARM 配置 TBB（Ubuntu，3.0.63）

> ID：14925664
> 
> 赞同：2
> 
> 时间：2013-02-17T20:22:51.333
> 
> 标签：opencv, arm, tbb, odroid

我正在尝试为[odroid U2](http://www.hardkernel.com/renewal_2011/products/prdt_info.php)（使用四核 ARM Cortex-A9 MPCore）编译具有 TBB 支持的 OpenCV 库。我在没有 TBB 的情况下编译当前的 OpenCV（来自 github）没有问题。而且我从源代码编译 TBB 库也没有问题 - [tbb41_20130116oss_src.tgz](http://threadingbuildingblocks.org/sites/default/files/software_releases/source/tbb41_20130116oss_src.tgz)并且我已经成功构建了 TBB 库：

```
root@odroid:~/src/tbb41_20130116oss/build/linux_armv7l_gcc_cc4.6_libc2.15_kernel3.0.63_release# ls
arena.d                    concurrent_queue.o      frontend.d           libtbbmalloc.so.2        proxy.d               scheduler.o           task_v2.d                   tbb_thread.d
arena.o                    concurrent_queue_v2.d   frontend.o           libtbbmalloc_proxy.so    proxy.o               semaphore.d           task_v2.o                   tbb_thread.o
backend.d                  concurrent_queue_v2.o   governor.d           libtbbmalloc_proxy.so.2  queuing_mutex.d       semaphore.o           tbb.def                     tbbmalloc.d
backend.o                  concurrent_vector.d     governor.o           market.d                 queuing_mutex.o       spin_mutex.d          tbb_function_replacement.d  tbbmalloc.def
backref.d                  concurrent_vector.o     itt_notify.d         market.o                 queuing_rw_mutex.d    spin_mutex.o          tbb_function_replacement.o  tbbmalloc.o
backref.o                  concurrent_vector_v2.d  itt_notify.o         mutex.d                  queuing_rw_mutex.o    spin_rw_mutex.d       tbb_main.d                  tbbmallocproxy.def
cache_aligned_allocator.d  concurrent_vector_v2.o  itt_notify_malloc.d  mutex.o                  reader_writer_lock.d  spin_rw_mutex.o       tbb_main.o                  tbbvars.csh
cache_aligned_allocator.o  condition_variable.d    itt_notify_malloc.o  observer_proxy.d         reader_writer_lock.o  spin_rw_mutex_v2.d    tbb_misc.d                  tbbvars.sh
concurrent_hash_map.d      condition_variable.o    large_objects.d      observer_proxy.o         recursive_mutex.d     spin_rw_mutex_v2.o    tbb_misc.o                  version_string.ver
concurrent_hash_map.o      critical_section.d      large_objects.o      pipeline.d               recursive_mutex.o     task.d                tbb_misc_ex.d
concurrent_monitor.d       critical_section.o      libtbb.so            pipeline.o               rml_tbb.d             task.o                tbb_misc_ex.o
concurrent_monitor.o       dynamic_link.d          libtbb.so.2          private_server.d         rml_tbb.o             task_group_context.d  tbb_statistics.d
concurrent_queue.d         dynamic_link.o          libtbbmalloc.so      private_server.o         scheduler.d           task_group_context.o  tbb_statistics.o
root@odroid:~/src/tbb41_20130116oss/build/linux_armv7l_gcc_cc4.6_libc2.15_kernel3.0.63_release# 
```

我可以使用这个 TBB 库用 g++ 编译我自己的程序，但是我不能配置 OpenCV 来查看这个 TBB 库：

```
root@odroid:~/src/work/opencv/release# cmake -D CMAKE_BUILD_TYPE=RELEASE -D  WITH_TBB=ON -D CMAKE_INSTALL_PREFIX=/usr/local ..
-- Detected version of GNU GCC: 46 (406)
-- Found OpenEXR: /usr/lib/libIlmImf.so
-- checking for module 'gstreamer-app-0.10'
--   package 'gstreamer-app-0.10' not found
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- checking for module 'tbb'
--   package 'tbb' not found
[...] 
```

你能解释一下我该怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T21:05:28.567

尝试使用包含的 TBB 构建 (BUILD_TBB=true) 构建 opencv，在 odroid-x2 上为我工作：

```
cmake -D CMAKE_BUILD_TYPE=RELEASE -DCMAKE_INSTALL_PREFIX=/usr/local/opencv-2.4-ec15d6f383e0aae -DBUILD_TBB:BOOL="1" -DWITH_TBB:BOOL="1" ..
make -j 4 
```

如果您进行 make install，请务必将 ./lib/libtbb.so 复制到可以找到的地方，否则 opencv 只会将其保留在那里。

# netbeans - 如何使用netbeans 7.2.1复制和粘贴彩色代码，保留行号

> ID：14925665
> 
> 赞同：6
> 
> 时间：2013-02-17T20:23:03.977
> 
> 标签：netbeans, copy, paste

我需要打印出学校的代码。我想保留netbeans的行号和它的自动着色。有我可以使用的插件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T20:57:08.517

如果你可以使用 html，你可以这样做：

打开你需要的文件 -> **`file`**-> **`Print to HTML ...`**-> 选择**`print to file`**或**`print to clipboard`**-> 勾选**`show linenumbers`**

通过打印机打印：**`file`**->**`print ->`**自定义**`print options`**

# android - 一次有更多片段实例-资源引用了android中的错误视图

> ID：14925668
> 
> 赞同：1
> 
> 时间：2013-02-17T20:23:08.960
> 
> 标签：android, view, resources, instance, fragment

这对我来说是一个。我有一个扩展 FragmentAnctivity 的 MainActiviy。我有 1 FrameLayout 和下面的按钮来更改框架的内容。我通过在 OnCreate 中为之前添加到 FrameLayout 的已创建片段切换显示/隐藏来做到这一点。

我还在 1 个片段中嵌套了更多片段（因为我有 1 个片段用于 1 种类型的内容，其中有 listFragment 在 OnItemClick 之后更改为 DetailFragment... 再次使用显示/隐藏方法）。

问题是在 2 个不同的内容中，我有 1 个 Fragment 类的 2 个不同实例，因此这 2 个实例使用 1 个相同的布局文件。尽管这些片段中的第一个被隐藏并显示了第二个，但当我通过第二个实例更改某些视图时，第一个实例的布局发生了变化，第二个保持与以前相同。（希望可以理解）

我想在管理和理解片段的生命周期方面完全是一个错误，所以请有人帮我解决这个问题吗？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:19:22.143

我想您可以通过练习获得片段的要点。你的问题很简单。我几乎可以肯定您使用`getActivity().findViewById(...)`调用来访问您的`Fragment`（或嵌套`Fragment`的）中的视图。在这种情况下，Activity 会从整个视图层次结构中返回具有已定义 ID 的第一个视图。

解决方案非常简单——您只需要避免构造并在回调`getActivity().findViewById(...)`中获取所有指向视图的链接，并在所有未来操作中使用**该链接。**一切都会好起来的。这是一个简单的例子：`onCreateView()`

 **```
 private TextView mDummyText;

 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.layout_name, container, false);
    initMembersViews(v);
    return v;
}

private void initMembersViews(View v) {
    mDummyText = (TextView) v.findViewById(R.id.fr_houses_list_text);
} 
```

希望对您有所帮助！祝你好运！**

# api - 使用会话与令牌进行 API 身份验证

> ID：14925679
> 
> 赞同：6
> 
> 时间：2013-02-17T20:24:09.150
> 
> 标签：api, cakephp

我为 CakePHP 应用程序构建了一个简单的测试 API，它允许用户从移动设备（或任何设备）登录并获得 JSON 响应。此 API 可用于在 PhoneGap 中构建的移动应用程序。

登录方法如下所示：

```
public function login()
{
    if($this->request->is('post'))
    {
        // Use custom method in Model to find record with password params
        $findUser = $this->User->findUser(
            $_POST['username_or_email'],
            AuthComponent::password($_POST['password'])
        );

        // If a user exists and matches params
        if($findUser)
        {                           
            $this->User->id = $findUser['User']['id'];

            $this->autoRender = false;
            $this->response->type('json');
            $this->response->body(json_encode(array('authenticated'=>true,'message'=>__('You have been logged in successfully'))));
        }
        else
        {
            $this->autoRender = false;
            $this->response->type('json');
            $this->response->body(json_encode(array('authenticated'=>false,'message'=>__('Username or password is incorrect'))));
        }

    }
    else
    {
        $this->autoRender = false;
        $this->response->type('json');
        $this->response->body(json_encode(array('message'=>'GET request not allowed!')));
    }
} 
```

移动设备（或任何 API 用户）可以发送他们的登录详细信息，然后他们将请求以 JSON 格式作为 true 或 false 进行身份验证。*此布尔值不用于授予用户访问权限，而是告诉移动应用程序他们是否可以看到某些屏幕，并且他们只能获取数据或如果会话存在则可以发送数据！*

**如前所述，他们实际上也登录到设备上的 API 本身，因此如果他们直接（从该设备）访问网站，他们将有一个会话并看到相同的 JSON 响应。**

因此，从本质上讲，用户在与服务器通信的设备上的会话期间保持登录状态。这与需要为每个请求传递的令牌不同，在此示例中它们有一个会话。

现在问题...

1.  用户使用如上所示的会话“实际”登录到 API 是不好的做法吗？这似乎是处理设备身份验证的最安全方法，因为它使用与直接 Web 根目录相同的逻辑。

2.  我已经看到一些 API 使用访问令牌，而不是我也实现了（用户返回他们的令牌而不是布尔值，并且没有创建会话）。但据我所知，这似乎需要更多工作，因为每次发出请求时，我都需要根据用户记录检查访问令牌。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-26T15:38:39.850

**编辑**
为了清楚起见，我不是 REST 的支持者，我是 RESTful/REST 类服务的支持者。如果您查看互联网上的所有 API，实际上很少有人坚持一个标准。您选择哪种方案将取决于您的特定问题空间。只需尝试确保安全并使用直观的设计选择（即，如果服务返回有关“狗”的信息，则不要将其命名为“猫”）
**结束编辑**

在 RESTful API 中管理*某种*形式的会话/令牌化方案是一种很好的做法。真正理想的（至少在我看来，关于这个问题有很多思想流派）设置涉及滚动令牌。

如果您完全关心 API 的安全性，那么权限应该在您的数据库层之外进行管理。是的，这会造成瓶颈，但这**实际上是一件好事**。每次都需要访问数据库来验证客户端的令牌会在整个过程中增加一个额外的步骤。这会减慢 API 的速度，而这实际上是安全系统所需要的。您不希望恶意个人能够每秒访问您的 API 3000 次，您希望他们的请求在（有点）相当大的几分之一秒内挂起。

这类似于[MD5](http://en.wikipedia.org/wiki/MD5)散列算法。他们中的许多人重新计算了几百次哈希，中间有随机的停顿。这有助于防止恶意客户端尝试暴力破解密码（通过使测试密码字符串的每个变体花费更多时间）。这同样适用于您的 API。

另一个好处是，如果您确实*有*恶意用户试图一遍又一遍地登录，如果您是从数据库层管理他们，那么您可以标记他们的 IP 地址/用户名/what-have-you 并且只是在第 1 步放弃他们的请求。

无论如何，对于建议的过程（使用滚动令牌，如果看起来有点过分，您可以删除其中的一部分，但这是非常安全的）：

1.  用户点击“登录”服务，这需要用户名/密码，并返回两个令牌，一个私有访问令牌和一个公共请求令牌（服务器将这些令牌存储在数据库中）。
2.  客户端将这些令牌存储在安全的地方
3.  用户访问另一个端点以推/拉一些数据
    *   请求包含时间戳
    *   请求包括公共请求令牌
    *   请求包含访问令牌=> 此令牌应该是字符串的 MD5 散列，由将时间戳字符串连接到私有访问令牌字符串的末尾产生
4.  服务器获取公共请求令牌，使用它来查找存储的私有访问令牌
    *   服务器获取该私有访问令牌，并连接时间戳字符串，然后获取该字符串的 MD5
    *   如果新的访问令牌与客户端发送给服务器的访问令牌匹配，HURRAY，此客户端已验证，因此推送/拉取数据
5.  （可选）服务器在每个请求上生成新的令牌，并将它们返回给客户端。这样每笔交易都会使旧令牌失效，并且如果发生某种中间人攻击，如果 VALID 用户已经完成了他们的请求，恶意用户现在拥有无效令牌并且无法开始搞乱你的 API。该方案试图确保恶意用户不会期望拦截服务器和客户端之间的单个通信，并且仍然可以访问系统。如果他们这样做了，那么真正的用户应该立即获得无效的令牌。然后应该触发他们的 API 客户端再次点击“登录”服务，获取新的有效令牌。这再次将恶意用户踢出系统。

这个方案不是 100% 安全的，任何用户访问系统都不会。通过在令牌上添加到期日期可以使其更加安全。此方案还具有额外的好处，您可以为用户/令牌分配特定权限（即只读访问，只能看到某些端点等）

这不是您做事的唯一方法，我会查找其他身份验证方案并从它们中获取您想要的内容（[OAUTH](http://oauth.net/)是一个很好的起点，然后我会查看 Facebook/Twitter/Instagram）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T00:23:47.880

让您的应用程序每次都登录，但不要像 Swayok 最后建议的那样使用登录密码对。当您登录时，服务器会生成一个令牌并将其返回给客户端。然后，客户端在发出请求时使用此令牌。对于每个请求，服务器都会检查令牌是否有效，如果有效，则执行请求。

这与会话的工作方式非常相似，服务器端框架在内部对其进行管理，并且这些令牌会不时过期。但是，正如 Swayok 正确指出的那样，您不需要会话，主要是因为您的 RESTful API 应该没有状态。您可以获得相同的实用程序，而无需存储有关用户的任何用户特定数据，并在每个请求中登录用户。

这是一篇[很好的文章](http://www.sociallipstick.com/?p=239)，或者您可以尝试使用 Facebook Graph API explorer 来查看它的实际效果

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T17:20:43.880

Restful API 完全限制使用会话和保存系统状态。每个请求都必须登录用户。访问令牌很棒，但也需要额外的处理。
最简单的方法是通过 HTTP Basic Auth（“授权”HTTP 标头）发送授权数据
[http://www.httpwatch.com/httpgallery/authentication/](http://www.httpwatch.com/httpgallery/authentication/)
移动应用程序可以轻松做到这一点，并且很容易为每个请求添加此标头到 API。
在服务器端：

```
$username = env('PHP_AUTH_USER');  
$password = env('PHP_AUTH_PW'); 
```

并在 ApiAppController->beforeFilter() 中使用此数据处理用户登录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T20:45:52.840

回答您的问题

1.  只要您在应用程序关闭时关闭他们的会话并在需要时重新创建它，这不是一个坏习惯。这就像他们在他们知道的浏览器上登录并且可以注销一样，但是应用程序上也应该有相同的功能，否则他们可能已经关闭了应用程序，但实际上并没有结束他们的会话。您可以通过要求他们在关闭应用程序时注销自动检查来以多种方式处理此问题
2.  令牌是执行上述操作的增强方式，但是您必须考虑令牌在传输时的安全性，并且服务器需要在每个请求上验证令牌。您已经说过这似乎需要更多的工作，所以是的，它需要更多的工作，如果您有时间或金钱限制并寻找答案来说明会话样式是否会在将来损害您的应用程序，只要您控制会话就不会并且在不结束会话的情况下不离开用户。如果你有时间，那么实施令牌，你会喜欢的。

# php - 使用 CI 路由加载新页面

> ID：14925680
> 
> 赞同：1
> 
> 时间：2013-02-17T20:24:22.830
> 
> 标签：php, codeigniter, codeigniter-routing

我是 CodeIgniter 的新手，它的路由让我感到困惑，我试图简单地加载一个不同的页面（每个页面都有单独的控制器和视图）。

我有以下代码：

```
<li class="active"><a href="/homepage">Home</a></li> 
```

我的 routes.php 是：

```
$route['default_controller'] = "homepage";
$route['404_override'] = '';
$route['homepage'] = "homepage"; 
```

即将

```
http://demo 
```

加载主页页面（我在 Apache 中配置了虚拟主机），但是单击主页链接给了我

> 在此服务器上找不到请求的 URL /homepage。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:35:42.127

有几件事可以尝试：

*   检查`mod_rewrite`已安装
*   检查**httpd.conf**是否配置为`AllowOverride`来自 .htaccess

请记住，您也不需要显式声明所有路由，CI 将完成将 URL 中指定的名称指向`application/controllers/`文件夹内控制器的工作。

# python - 另一个xml python提取

> ID：14925685
> 
> 赞同：0
> 
> 时间：2013-02-17T20:24:54.590
> 
> 标签：python, xml

我迷路了，我想从 python 中的 url xml 文件中提取一个值，我看到那里有很多库，但无法取得一些成功。

```
<?xml version="1.0"?>
<root LoadTime="1360991134" DataVersion="991138826" UserData_DataVersion="991134040"   
TimeStamp="1361131034" ZWaveStatus="1" LocalTime="2013-02-17 14:57:14 D">
<Device_Num_82 status="-1">
<states>
<state id="72" service="urn:upnp-org:serviceId:XBMCState1" variable="Port" value="80">   
</state>
<state id="73" service="urn:upnp-org:serviceId:XBMCState1" variable="PingInterval"    
value="180"></state>
<state id="74" service="urn:upnp-org:serviceId:XBMCState1" variable="PingStatus"  
value="up"></state>
<state id="75" service="urn:upnp-org:serviceId:XBMCState1" variable="IdleTime" 
value="program"></state>
<state id="76" service="urn:upnp-org:serviceId:XBMCState1" variable="PlayerStatus"   
value="Video_end"></state>
<state id="77" service="urn:micasaverde-com:serviceId:HaDevice1" variable="CommFailure" 
value="1"></state>
<state id="78" service="urn:micasaverde-com:serviceId:HaDevice1" variable="LastUpdate" 
value="0"></state>
<state id="79" service="urn:micasaverde-com:serviceId:HaDevice1" variable="Configured" 
value="0"></state>
</states>
<Jobs></Jobs>
<tooltip display="0"></tooltip>
</Device_Num_82>
</root> 
```

我想要 id=75 的值（程序）

谢谢

这里的代码

```
import xml.etree.ElementTree as ET
import urllib.request

VERA = 'http://192.168.2.19:3480/data_request?id=status&output_format=xml&DeviceNum=82'

xml = urllib.request.urlopen(VERA).read()
tree = ET.fromstring(xml)
print (tree.find('.//state[@id="75"]').attrib['service'])
# urn:upnp-org:serviceId:XBMCState1 
```

这里的错误

```
Traceback (most recent call last):
File "/Users/Michael/Desktop/test.py", line 8, in <module>
print (tree.find('.//state[@id="75"]').attrib['service'])
AttributeError: 'NoneType' object has no attribute 'attrib' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:36:20.680

`xml`您的数据字符串在哪里，然后使用`lxml`，您可以执行以下操作：

```
import lxml.etree as ET

tree = ET.fromstring(xml)
print tree.xpath('//state[@id="75"]/@service')
# ['urn:upnp-org:serviceId:XBMCState1'] 
```

或者，您可以使用内置`xml`库执行以下操作：

```
import xml.etree.ElementTree as ET

tree = ET.fromstring(xml)
print tree.find('.//state[@id="75"]').attrib['service']
# urn:upnp-org:serviceId:XBMCState1 
```

# c++ - 管理 HLSL 效果

> ID：14925688
> 
> 赞同：1
> 
> 时间：2013-02-17T20:25:20.980
> 
> 标签：c++, directx, hlsl, directx-10

假设，对于这个例子，我有**世界**级。世界有**模型**集合：

```
class World
{
    public:
      map<string, Model*> Models;
}; 
```

模型将是应用程序中所有实体的抽象类，例如汽车、球、山或立方体。

问题是 - 管理该模型的效果的最佳实践是什么。假设我有 4 个效果文件：**base1.fx、base2.fx、base3.fx、bas4.fx**。它们每个都有类接口，可能绑定到模型（**IBaseEffect1、IBaseEffect2、IBaseEffect3、IBaseEffect4**）。

现在，我是否应该独立考虑每个模型，并执行以下操作：

```
Cube1.Bind(IBaseEffect2);
Car.Bind(IBaseEffect3); 
```

模型有能力管理效果的地方，所以我会：

```
World::Render()
{
    foreach model -> Render();
} 
```

这是我的引擎的实际解决方案。

或者更好的是独立管理效果，并执行以下操作：

```
IBaseEffect1.SetAsActual();

foreach Model which should be considered for effect1 -> Render();

IBaseEffect2.SetAsActual();

foreach Model which should be considered for effect2 -> Render(); 
```

ETC...

也许我的整个观点都是错误的，应该换个方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:11:47.920

我认为您应该使用这两种方法。那是：

1.  每个模型都有自己的效果界限：`model->Bind(effect);`
2.  您单独管理效果（出于效率原因）：
    1.  按模型使用的效果对模型进行排序
    2.  对于每个效果：
        *   设置效果
        *   渲染与当前效果关联的所有模型

必须以固定顺序渲染的模型（例如透明对象）应该以不同的方式处理，除非它们都具有相同的效果。

# clojure - 是否可以将函数的结果作为输入传递给 Clojure 中的两个函数？

> ID：14925694
> 
> 赞同：2
> 
> 时间：2013-02-17T20:25:43.157
> 
> 标签：clojure, functional-programming

我有在 Clojure`generate-code`中循环运行的函数：`while`

```
; ...
(with-local-vars [code nil]
    (while true
        (var-set code (generate-code @code))
        (write-to-file @code)
        (execute-code @code))) 
```

显然这不是很像 Clojure 式的——有没有更好的方法来做到这一点而不引入局部变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T21:22:45.357

您可能正在寻找`let`：

```
(let [code (generate-code)]
    (write-to-file code)
    (execute-code code)) 
```

你也可以

```
((fn [code] 
    (write-to-file code)
    (execute-code code))
 (generate-code)) 
```

或者，如果你想

```
(last ((juxt write-to-file execute-code) (generate-code))) 
```

# php - 通过 form-submit提交非表单元素

> ID：14925696
> 
> 赞同：0
> 
> 时间：2013-02-17T20:25:46.740
> 
> 标签：php, jquery, forms

我有一个包含几十个问题的调查。该调查分为多个部分，每个部分通过一个提交按钮分别提交。

大多数问题应该通过复选框来回答。现在我不想使用，因为它的 css 样式存在一些问题。现在我如何提供问题？我有以下方法：

*   每个答案选项创建一个跨度，其中每个跨度都包含一个隐藏的复选框，该复选框在单击跨度时被激活。

*   或者忽略复选框部分，只寻找点击的跨度。这对我来说似乎更干净，更少hackier，但是我如何将多个单击范围中的每个值提交到我的表单/php脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:33:20.550

你可以这样做：

```
data = [];
$('.my-form .ui-mycheckbox.checked').each(function(index, element){
   data.push(element.value);
}
$.post('my-url', data, mycallback); 
```

没有尝试代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:35:15.467

就像使用可访问的自定义复选框一样简单：

*   [http://www.filamentgroup.com/examples/customInput/](http://www.filamentgroup.com/examples/customInput/)
*   [http://www.456bereastreet.com/archive/201211/accessible_custom_checkboxes_and_radio_buttons/](http://www.456bereastreet.com/archive/201211/accessible_custom_checkboxes_and_radio_buttons/)

从第一个链接：

> *（复选框）直接位于样式标签的后面*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:29:43.783

有很多方法可以做到这一点，一种方法是使用允许您自定义元素的库。

[http://customformsjs.com](http://customformsjs.com)

允许您将自定义元素设置为跨度、div、锚点或您希望的任何内容。

其他选项是创建隐藏输入并在表单提交之前将每个值分配给跨度文本值。

我个人建议您使用 customforms 或 uniforms 之类的库，因为如果浏览器上未启用 javascript，它将降级为普通表单字段，并且如果启用了 javascript，它将允许您自定义样式。

# ios - 在继续之前等待 AFHTTPRequestOperation 完成

> ID：14925702
> 
> 赞同：0
> 
> 时间：2013-02-17T20:26:48.560
> 
> 标签：ios, nsurlconnection, afnetworking, nsoperation

我正在尝试制作一个使用`AFHTTPClient`. 第一步是对用户进行身份验证，为此，我使用以下代码：

```
-(void)authorize
{
    NSURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"login.php" parameters:@{@"login": account.username, @"passwd":account.password}];

    AFHTTPRequestOperation *operation = [httpClient HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject) {
        [httpClient setDefaultHeader:@"Token" value:[[operation.response allHeaderFields] objectForKey:@"CSRF-Token"]];
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"%@",error.localizedDescription);
    }];
    [httpClient enqueueHTTPRequestOperation:operation];
    [httpClient.operationQueue waitUntilAllOperationsAreFinished];
} 
```

如您所见，我的代码从服务器响应中获取了一个令牌，并将其设置为所有未来请求的默认标头。

然后我继续使用其他请求`- (void)postPath:(NSString *)path parameters:(NSDictionary *)parameters success:success failure:failure`

但是当我使用调试器时，我发现那些在授权操作完成之前执行的其他请求，因此它们失败了，因为它们没有授权令牌。我添加了`[httpClient.operationQueue waitUntilAllOperationsAreFinished];`，但它似乎不起作用......

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:34:36.940

使用[调度信号量](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)。

```
-(void)authorize
{
    dispatch_semaphore_t done = dispatch_semaphore_create(0);
    NSURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"login.php" parameters:@{@"login": account.username, @"passwd":account.password}];

    AFHTTPRequestOperation *operation = [httpClient HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject) {
        [httpClient setDefaultHeader:@"Token" value:[[operation.response allHeaderFields] objectForKey:@"CSRF-Token"]];
        dispatch_semaphore_signal(done);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"%@",error.localizedDescription);
    }];
    [httpClient enqueueHTTPRequestOperation:operation];
    [httpClient.operationQueue waitUntilAllOperationsAreFinished];
    dispatch_semaphore_wait(done, DISPATCH_TIME_FOREVER);
} 
```

请注意，这将阻止该方法返回，因此您需要确保它不在主/UI 线程上。

# blackberry - 黑莓CheckBoxField勾选“换色”可以实现吗？

> ID：14925706
> 
> 赞同：0
> 
> 时间：2013-02-17T20:27:27.860
> 
> 标签：blackberry, checkbox, java-me

[CheckboxField](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/component/CheckboxField.html)默认为蓝色勾号，如下图所示。勾号的颜色可以改成绿色吗？

`paint()`我认为，必须在方法上做一些工作。但是，我不知道具体是什么。我的代码片段以及默认的复选框外观如下：

![在此处输入图像描述](../Images/9a5bf4b432fd2dcb330013ce90d2804b.png)

```
CheckboxField checkBoxComments = new CheckboxField("CheckBox",true) {
    protected void paint(Graphics g) {
        // what to do here?
        super.paint(g);
    }
    protected void applyTheme(Graphics arg0, boolean arg1) {
        // do something here? 
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:55:03.133

我希望我知道一种*更简单*的方法，但是肯定会起作用的一种方法是简单地使您`CheckBoxField`的自定义字段，这实际上是一个*按钮*字段。对于选中和未选中状态，此自定义字段将具有不同的图像。

作为此自定义字段的基础，我从 BlackBerry Advanced UI 开源项目中的[BitmapButtonField作为模板开始。](https://github.com/blackberry/Samples-for-Java/blob/master/Advanced%20UI/src/com/samples/toolkit/ui/component/BitmapButtonField.java)这是创建具有自定义行为的字段的一个很好的例子。在项目中`BitmapButtonField`，他们维护了两张图片，一张为按钮的**正常**状态，一张为**焦点**状态。在我们的例子中，我们可以维护**选中**和**未选中**状态的图像。你当然也可以添加更多的状态，通过检查-未聚焦、已检查-聚焦、未检查-未聚焦和未检查-聚焦。但是，我会把它留给你。这个例子应该告诉你如何做到这一点。

首先，[将 BaseButtonField 类添加](https://github.com/blackberry/Samples-for-Java/blob/master/Advanced%20UI/src/com/samples/toolkit/ui/component/BaseButtonField.java)到您的项目中。然后，用这个类扩展它：

```
public class ImageCheckboxField extends BaseButtonField {

   private boolean _checked = false;
   private Bitmap[] _bitmaps;
   private static final int UNCHECKED = 0;
   private static final int CHECKED = 1;
   //private static final int FOCUS_UNCHECKED = 2;
   //private static final int FOCUS_CHECKED = 3;

   public ImageCheckboxField( boolean checked )
   {
      this( checked, 0 );
   }

   public ImageCheckboxField( boolean checked, long style ) 
   {
      // TODO: if you're going to use multiple instances, you 
      //  may want to optimize to avoid loading these PNGs each time
      this( checked, Bitmap.getBitmapResource("box-unchecked.png"), Bitmap.getBitmapResource("box-checked.png"), style);
   }

   protected ImageCheckboxField( boolean checked,  Bitmap uncheckedState, Bitmap checkedState )
   {        
      this( checked, uncheckedState, checkedState, 0 );
   }

   protected ImageCheckboxField( boolean checked, Bitmap uncheckedState, Bitmap checkedState, long style ) {
      super( Field.FOCUSABLE | style );

      if( (uncheckedState.getWidth() != checkedState.getWidth())
            || (uncheckedState.getHeight() != checkedState.getHeight()) ){

         throw new IllegalArgumentException( "Image sizes don't match" );
      }

      _bitmaps = new Bitmap[] { uncheckedState, checkedState };
   }

   public void clickButton() {
      // override this to toggle state on click
      setChecked(!getChecked());
      super.clickButton();
   }

   public void setChecked(boolean checked) {
      _checked = checked;
      invalidate();
   }

   public boolean getChecked() {
      return _checked;
   }        

   private void setImage( Bitmap uncheckedState ){
      _bitmaps[UNCHECKED] = uncheckedState;
      invalidate();
   }

   private void setCheckedImage( Bitmap checkedState ){
      _bitmaps[CHECKED] = checkedState;
      invalidate();
   }

   public int getPreferredWidth() {
      return _bitmaps[UNCHECKED].getWidth();
   }

   public int getPreferredHeight() {
      return _bitmaps[UNCHECKED].getHeight();
   }

   protected void layout( int width, int height ) {
      setExtent( _bitmaps[UNCHECKED].getWidth(), _bitmaps[UNCHECKED].getHeight() );
   }

   protected void paint( Graphics g ) {
      // TODO: uncomment this if you draw different images based on focus
      //boolean focused = g.isDrawingStyleSet( Graphics.DRAWSTYLE_FOCUS );
      int index = UNCHECKED;
      //if (focused) {
      //   index = getChecked() ? FOCUS_CHECKED : FOCUS_UNCHECKED;
      //} else {
      index = getChecked() ? CHECKED : UNCHECKED;
      //}      
      g.drawBitmap( 0, 0, _bitmaps[index].getWidth(), _bitmaps[index].getHeight(), _bitmaps[index], 0, 0 );
   }

   /**
    * With this commented out the default focus will show through
    * If an app doesn't want focus colours then it should override this and do nothing
    **/
   /*
       protected void paintBackground( Graphics g ) {
           // Nothing to do here
       }
    */

   protected void drawFocus( Graphics g, boolean on ) {
      // Paint() handles it all
      g.setDrawingStyle( Graphics.DRAWSTYLE_FOCUS, true );
      paintBackground( g );
      paint( g );
   }
} 
```

我试图模仿一些原生`CheckboxField`API，所以这个新`ImageCheckboxField`类可以放在你通常使用标准`CheckboxField`. 我没有模仿标签功能，因为我经常发现我无法使用内置标签，并且最终还是将自己的标签分开`LabelField`了。

请参阅下面我用于此的两张图片。如果需要，您可以调整它们的大小（它们实际上来自我构建的 iPhone Retina 应用程序）。如果我选择的绿色不是你想要的，[这里是我用来获取图像绿色的 Photoshop 教程](http://www.photoshopessentials.com/photo-effects/gradient-map/)，从一个基本的黑白图像，也显示：

![在此处输入图像描述](../Images/60944de91d9c5694c663a3f2049e016c.png) ![在此处输入图像描述](../Images/127ead7b881be24d10d9ec26096e6c8b.png)

![在此处输入图像描述](../Images/87c93673e8f9349fe48556cdd34df33f.png)

## 限制

我没有在这里讨论焦点绘图。我不知道你想要什么。目前，根本没有焦点绘制。您可以通过创建两个新的 PNG 图像来绘制来处理这个问题。或者，您可以注释掉 中的`drawFocus()`方法`BaseButtonField`，它将在透明复选框边缘周围显示默认的 BlackBerry 蓝色焦点渐变。或者，您可以使图像的白色背景透明，以显示更多的蓝色渐变。或者，您可以使用`Graphics#drawShadedFilledPath()`in`paint()`或自己实现绘图`drawFocus()`。由你决定。

# ios - 如何使用 Core Graphics 右对齐文本

> ID：14925707
> 
> 赞同：2
> 
> 时间：2013-02-17T20:27:31.197
> 
> 标签：ios, text, core-graphics

在使用 Core Graphics 绘图时，我想右对齐几个文本。下面是我现在用来绘制文本的代码。如何绘制几个右对齐的文本？

```
CGContextSelectFont(context, "Helvetica-Light", 10.0f,kCGEncodingMacRoman);
CGContextSetTextDrawingMode(context, kCGTextFill);
CGContextSetFillColorWithColor(context, _privateColor.CGColor);
CGContextShowTextAtPoint(context, point.x, point.y, [text cStringUsingEncoding:NSUTF8StringEncoding], text.length); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T20:40:55.380

也许你正在寻找这样的东西......

```
[@"Any text what you like to show" drawInRect:CGRectMake(0.f, 0.f, 320.f, 80.f) withFont:[UIFont fontWithName:@"Helvetica-Light" size:10.f] lineBreakMode:NSLineBreakByWordWrapping alignment:NSTextAlignmentRight]; 
```

# 更新

不幸的是，这种方式在 iOS7+ 中已被弃用。[来源](https://developer.apple.com/library/ios/documentation/uikit/reference/NSString_UIKit_Additions/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/NSString/drawInRect%3awithFont%3alineBreakMode%3a)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-28T07:13:30.487

```
[@"your Text" drawInRect:CGRectMake(0.f, 0.f, 320.f, 80.f) withAttributes:"dictionary with text attributes"]; 
```

这里的属性是指文本字体、文本大小、对齐方式等。

可以使用带有文本 ielineBreakMode 等的 NSMutableParagraphStyle 对象设置对齐方式

# mysql - 回流 INT UNSIGNED 系列

> ID：14925709
> 
> 赞同：1
> 
> 时间：2013-02-17T20:28:06.420
> 
> 标签：mysql, arrays, insert

我有一个名为 BoxPeg 的链接表，它将一系列 Pegs 绑定到 1 个 Box。

问题是 Pegs 是有序的，并且在客户端软件中被视为一个数组。

所以我们在 BoxPeg 表中有一个名为 'position' 的 INT UNSIGNED 列。

每次有人将 Peg 添加到 Box 时，我们都会这样做：

```
UPDATE BoxPeg SET position = position+1 WHERE box = '{BOXID}' AND position >= {NEWPEGPOSITION};
INSERT INTO BoxPeg(box, peg, position) VALUES('{BOXID}', '{PEGID}', {NEWPEGPOSITION}); 
```

这工作正常，直到客户以某种方式通过一个太大的新挂钩位置：

```
before:
0
1
2
3

after insert 9
0
1
2
3
9 
```

我知道我可以在这两行之前的单独 SQL 语句中获得 MAX(position) WHERE box = '{BOXID}' 并基于此调整新的挂钩位置，但我想简单地重新排列整个系列在插入后一次拍摄。通过这种方式，我 100% 确定该系列从头到尾没有任何空白。

UPDATE 会是什么样子？

考虑这种情况：

```
before:
0
2
5
8

after insert 5
0
2
5
6
9

after reflow
0
1
2
3
4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:20:21.823

您可以像这样重新排列行：

```
UPDATE BoxPeg bp
INNER JOIN (
  SELECT *, @n := @n + 1 AS newpos
  FROM BoxPeg, (SELECT @n := -1) x
  WHERE box = '{BOXID}'
  ORDER BY position
) s
 ON bp.box = s.box
AND bp.peg = s.peg
SET bp.position = s.newpos
WHERE bp.position <> s.newpos
; 
```

子选择使用变量来计算`position`由特定 定义的子集的新值`{BOXID}`。然后 UPDATE 语句将子选择连接到`BoxPeg`并使用新值更新匹配的行。（因此，当加入 时`BoxPeg`，子选择也充当过滤器，将更新的行限制为属于给定框的行。）

此查询的 SQL Fiddle 演示[可用](http://sqlfiddle.com/#!2/d0ced/1)。

请注意，如果`position`列是唯一约束的一部分，则此方法[可能并不总是有效](http://sqlfiddle.com/#!2/4823f/1)。尽管此查询生成的新值是唯一的，但 MySQL 似乎在更新*期间*而不是在语句执行结束时评估唯一约束。因此，根据更新行的顺序，如果一行接收到的值与另一个尚未更新的行中的值相同，则查询可能会失败。

# c# - 使用相应的函数解析地址并打印出完整的主机信息

> ID：14925712
> 
> 赞同：0
> 
> 时间：2013-02-17T20:28:28.963
> 
> 标签：c#, dns

***编辑的代码***这是我到目前为止所拥有的。无论我输入什么网站，IP地址都是一样的。我必须做什么才能解决主题标题中的所有问题？我感谢任何帮助，因为我真的不知道如何进行！***编辑代码***

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Net;
using System.Net.Sockets;

namespace CSDNS
{
    class Program
    {
        static void PrintHostInfo(String host)
        {
            {
                IPHostEntry hostinfo;

                try
                {
                    IPHostEntry hostInfo;

                    //Attempt to resolve DNS for given host or address
                    hostInfo = Dns.GetHostAddresses(host);

                    //Display the primary host name
                    Console.WriteLine("\tCanonical Name: " + hostInfo.HostName);

                    //Display list of IP addresses for this host
                    Console.WriteLine("\tIP Addresses:  ");
                    foreach (IPAddress ipaddr in hostInfo.AddressList)
                    {
                        Console.WriteLine("\t\t\t{0} ", ipaddr);
                    }
                    Console.WriteLine();

                    //Display list of alias names for this host
                    Console.Write("\tAliases:       ");
                    foreach (String alias in hostInfo.Aliases)
                    {
                        Console.Write(alias + " ");
                    }
                    Console.WriteLine("\n-------------------------------------\n\n");
                }
                catch (Exception)
                {
                    Console.WriteLine("\tUnable to resolve host: " + host + "\n");
                }
            }
        }

        static void Main()
        {
            //Get and print local host info
            try
            {
                Console.WriteLine("Local Host:");
                String localHostName = Dns.GetHostAddresses();
                Console.WriteLine("\tHost Name:      " + localHostName);

                PrintHostInfo(localHostName);
            }
            catch (Exception)
            {
                Console.WriteLine("Unable to resolve local host\n");
            }

            //Get and print info for hosts given on command line 
            foreach (String arg in new[] { "www.sunybroome.edu" })
            {
                Console.WriteLine(arg + ":");
                PrintHostInfo(arg);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:49:38.720

```
 static void PrintHostInfo(String host)
    {
        {
            IPHostEntry hostinfo;

            try
            {
                //Attempt to resolve DNS for given host or address
                IPAddress[] hostInfo = Dns.GetHostAddresses(host);

                //Display list of IP addresses for this host
                Console.WriteLine("\tIP Addresses:  ");
                foreach (IPAddress ipaddr in hostInfo)
                {
                    Console.WriteLine("\t\t\t{0} ", ipaddr);
                }

                Console.WriteLine("\n-------------------------------------\n\n");
            }
            catch (Exception)
            {
                Console.WriteLine("\tUnable to resolve host: " + host + "\n");
            }
        }
    }

    static void Main()
    {
        //Get and print local host info
        try
        {
            Console.WriteLine("Local Host:");
            String localHostName = Dns.GetHostAddresses("localhost")[0].ToString();
            Console.WriteLine("\tHost Name:      " + localHostName);

            PrintHostInfo(localHostName);
        }
        catch (Exception)
        {
            Console.WriteLine("Unable to resolve local host\n");
        }

        //Get and print info for hosts given on command line 
        foreach (String arg in new[] { "www.sunybroome.edu" })
        {
            Console.WriteLine(arg + ":");
            PrintHostInfo(arg);
        }
    } 
```

# ruby-on-rails - Rails update_attributes 不更新记录

> ID：14925713
> 
> 赞同：1
> 
> 时间：2013-02-17T20:28:31.093
> 
> 标签：ruby-on-rails, ruby, http-post, update-attributes

我的“entries_controller.rb”中有以下代码

```
 def update
     @entry = Entry.find(params[:id])
     puts "received HTTP request to update old entry:#{@entry.inspect} with"
     puts "new parameters: #{params}"
     if @entry.update_attributes(params[:entry])
       puts"Update was successful"
       @entry2 = Entry.find(params[:id])
       puts "Here is the new value #{@entry2.inspect}"
     end
  end 
```

当我从客户端向服务器发送 put 请求时，我的控制台会显示：

```
 2013-02-17T20:12:25+00:00 app[web.1]: received HTTP request to update old 
  entry:#<Entry id: 1, created_at: "2013-02-17 19:17:40", updated_at: "2013-02-17 19:17:40", 
  description: "Test", title: "Home", category: "-1", latitude: "49.258061", longitude: "-123.153972", hasPhoto: false> with

  2013-02-17T20:12:25+00:00 app[web.1]: new parameters: {"description"=>"Test", "id"=>"1", "category"=>"-1", "hasPhoto"=>"0", "latitude"=>"49.258061", "longitude"=>"-123.153972", 
  "title"=>"Updated home", "action"=>"update", "controller"=>"entries", "format"=>"json"}

  2013-02-17T20:12:25+00:00 app[web.1]: Update was successful

  2013-02-17T20:12:25+00:00 app[web.1]: Here is the new value #<Entry id: 1, created_at: "2013-02-17 19:17:40", updated_at: "2013-02-17 19:17:40", description: "Test", 
  title: "Home", category: "-1", latitude: "49.258061", longitude: "-123.153972", hasPhoto: false> 
```

如您所见，旧记录并未真正更新。即使 if 子句被评估为真。查看“title”的值没有从“Home”更改为“Updated Home”。

我想知道这是什么错误？它说它更新了，但它并没有真正更新。

有人可以帮我理解这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:58:03.417

发生的事情是在您的视图文件中，您没有在视图中设置适当的表单。您的参数正在返回

```
{"description"=>"Test", "id"=>"1", "category"=>"-1", "hasPhoto"=>"0", "latitude"=>"49.258061", "longitude"=>"-123.153972", 
  "title"=>"Updated home", "action"=>"update", "controller"=>"entries", "format"=>"json"} 
```

当实际上他们应该像这样返回时......

```
{"entry" => {"description"=>"Test", "id"=>"1", "category"=>"-1", "hasPhoto"=>"0", "latitude"=>"49.258061", "longitude"=>"-123.153972", 
  "title"=>"Updated home"}, "action"=>"update", "controller"=>"entries", "format"=>"json"} 
```

注意到区别了吗？您有关条目的参数被包装并附加到属性条目。这样，当 Rails 查看您的参数时，它就知道哪些参数适用于您新更新的条目。如果不查看您的表单，就无法告诉您如何专门修复它，但这是一个很好的[起点](http://guides.rubyonrails.org/form_helpers.html)。

# python - 对初学者的 Python 编程帮助？

> ID：14925714
> 
> 赞同：0
> 
> 时间：2013-02-17T20:28:35.560
> 
> 标签：python, methods, area

所以我需要找到矩形的面积。我必须在 Rectangle 类中放置一个名为“CalcArea()”的方法，该方法乘以宽度 * 高度。我不知道如何做到这一点，而且我很迷茫，这本书根本没有解释如何做到这一点。这是我的代码：

```
class Point():
    x = 0.0
    y = 0.0

    def __init__(self, x, y):
        self.x = x
        self.y = y
        print("Point Constructor")

    def ToString(self):
        return "{X:" + str(self.x) + ",Y:" + str(self.y) + "}"

class Ellipse(Point):
    radiusV = 0.0
    radiusH = 0.0

    def __init__(self, x, y, radiusV, radiusH):
        super().__init__(x,y)
        self.radiusV = radiusV
        self.radiusH = radiusH
        print("Ellipse Constructor")

    def ToString(self):
        return super().ToString() + \
                ",{Radius: Vertical = " + str(self.radiusV) + ", Radius: Horizontal = " +     str(self.radiusH) + "}"
p = Point(50,50)
print(p.ToString())
e = Ellipse(80,80,60,80)
print(e.ToString())

class Size():
    width = 0.0
    height = 0.0

    def __init__(self, width, height):
        self.width = width
        self.height = height
        print ("Size Constructor")

    def ToString(self):
        return "{Width = " + str(self.width) + \
               ", Height = " + str(self.height) + "}"

class Rectangle(Point, Size):
    area = 0.0

    def __init__(self, x, y, width, height):
        Point.__init__(self,x,y)
        Size.__init__(self,width,height)
        print("Rectangle Constructor")

    def ToString(self):
        return Point.ToString(self) + "," + Size.ToString(self) + 
s = Size (80,70)
print(s.ToString())

r = Rectangle(200,250,40,50)
print(r.ToString()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:34:33.503

在您的`Rectangle`班级中使用以下方法

```
def calcArea(self):
    return self.width * self.height 
```

要打印该区域，只需调用 `print mRectangle.calcArea()`

where`mRectangle`是`Rectangle`类的一个实例。

`self.width`并且由于从类继承并具有实例变量并在其构造函数中适当设置，`self.height`因此可供您使用。这些值可供您使用，因为它是.`Rectangle``Size``Size``width``height``Rectangle``Size`

此外，你的`width = 0`和`height = 0`在 Size 类中可能不会完全按照你的想法做。`self.width`它们是 Python 中的静态变量或类变量，与和完全不同。`self.height`这里有一个例子来说明

```
>>> class MyClass():
...     a = 0
...     def __init__(self):
...         self.a = 5
...     def echo(self):
...         print MyClass.a, self.a
... 
>>> instance = MyClass()
>>> instance.echo()
0 5
>>> instance.a
5
>>> MyClass.a
0
>>> 
```

在 python 中，您可以使用语法访问类或静态变量，`ClassName.Variable`并且无需创建该类的对象即可访问。其中作为实例变量只能用类的实例调用。

# java - App Engine 1.7.5 不会创建新的 local_db.bin 数据存储文件

> ID：14925721
> 
> 赞同：4
> 
> 时间：2013-02-17T20:29:17.497
> 
> 标签：java, google-app-engine, google-cloud-datastore

我刚刚从 1.6.1 更新到 GAE SDK 1.75。我删除了 local_db.bin，以便应用引擎创建一个新的。我的应用程序可以很好地部署到本地开发应用程序服务器。但是，当我向需要从数据存储区获取数据的应用程序发送请求时，我在控制台中得到以下信息：

INFO：后备存储 C:...\war\WEB-INF\appengine-generated\local_db.bin 不存在。它将被创建。

local_db.bin 数据存储永远不会被创建，我得到以下异常：

org.apache.jasper.JasperException: java.lang.IllegalStateException: 响应已经提交

当我恢复到 1.6.1 时，本地数据存储文件被创建，一切似乎又可以正常工作了。

有人对这个问题有任何见解吗？-谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T18:02:45.727

升级到 GAE 1.8.1 或更高版本，将 Java 升级到 1.7.X。来到数据存储区，您必须使用为您提供 JDO 3.0 的 Data nucleus V2 运行您的项目

# ruby-on-rails - 在 rails 3.2 中使用 nginx 而不是 rails 服务 static_assets

> ID：14925722
> 
> 赞同：0
> 
> 时间：2013-02-17T20:29:34.483
> 
> 标签：ruby-on-rails, nginx, ruby-on-rails-3.2, spree

我最近部署了一个基于[SpreeCommerce](http://spreecommerce.com/)平台的网站。我正在使用 nginx 并希望 nginx 为我的静态资产提供服务。我遇到的问题是，当用户在网站上为产品上传新照片时，图像似乎可以正确保存（文件位于服务器上），但不会提供给浏览器。

我可以通过将我的 production.rb 更改为读取`config.serve_static_assets = true`而不是`false`重新上传图片到现有产品来临时解决此问题。但这有为资产而不是 nginx 提供服务的 rails - 这不是我想要发生的事情。

**这是我当前的 nginx 配置文件：**

```
user spree;

worker_processes 4;
pid /var/run/nginx.pid;

events {
    worker_connections 1024;
    multi_accept on;
}

http {
    types_hash_bucket_size 512;
    types_hash_max_size 2048;

    sendfile on;
    tcp_nopush on;
    tcp_nodelay off;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    gzip on;
    gzip_disable "msie6";

    gzip_proxied any;
    gzip_min_length 500;
    gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;

    ##
    # Virtual Host Configs
    ##

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
} 
```

**然后我的 /etc/nginx/sites-enabled/[我的应用程序名称]：**

```
upstream 50.57.75.156 {
  # fail_timeout=0 means we always retry an upstream even if it failed
  # to return a good HTTP response (in case the Unicorn master nukes a
  # single worker for timing out).

  # for UNIX domain socket setups:
  server unix:/tmp/angel_wood.socket fail_timeout=0;
}

server {
    # if you're running multiple servers, instead of "default" you should
    # put your main domain name here
    listen 80 default;

    # you could put a list of other domain names this application answers
    server_name 50.57.75.156;

    root /home/spree/angel_wood/current/public;
    access_log /var/log/nginx/50.57.75.156_access.log;
    rewrite_log on;

    location / {
        #all requests are sent to the UNIX socket
        proxy_pass  http://50.57.75.156;
        proxy_redirect     off;

        proxy_set_header   Host               $host;
        proxy_set_header   X-Real-IP          $remote_addr;
        proxy_set_header   X-Forwarded-For    $proxy_add_x_forwarded_for;
        proxy_set_header   X-Forwarded-Proto  $scheme;

        client_max_body_size       10m;
        client_body_buffer_size    128k;

        proxy_connect_timeout      90;
        proxy_send_timeout         90;
        proxy_read_timeout         90;

        proxy_buffer_size          4k;
        proxy_buffers              4 32k;
        proxy_busy_buffers_size    64k;
        proxy_temp_file_write_size 64k;
    }

    # if the request is for a static resource, nginx should serve it directly
    # and add a far future expires header to it, making the browser
    # cache the resource and navigate faster over the website
    # this probably needs some work with Rails 3.1's asset pipeline
    location ~ ^/(system|assets)/  {
      root /home/spree/angel_wood/current/public;
      expires max;
      break;
    }
} 
```

**此外，供参考 - 以下是在服务器上保存图像时的日志：**

```
Started GET "/admin/products/basket/images/new?authenticity_token=y5rw7G9ihZ6aFQa8tzC1q07DFyTW0f9iJ7MTxGxVZ5k%3D" for 24.155.210.182 at 2013-02-17 01:00:26 +0000
Processing by Spree::Admin::ImagesController#new as */*
  Parameters: {"authenticity_token"=>"y5rw7G9ihZ6aFQa8tzC1q07DFyTW0f9iJ7MTxGxVZ5k=", "product_id"=>"basket"}
  Rendered /home/spree/angel_wood/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/admin/images/_form.html.erb (2.7ms)
  Rendered /home/spree/angel_wood/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/admin/images/new.html.erb (6.3ms)
Completed 200 OK in 19ms (Views: 7.0ms | ActiveRecord: 2.2ms)
Started POST "/admin/products/basket/images" for 24.155.210.182 at 2013-02-17 01:00:43 +0000
Processing by Spree::Admin::ImagesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"y5rw7G9ihZ6aFQa8tzC1q07DFyTW0f9iJ7MTxGxVZ5k=", "image"=>{"attachment"=>#<ActionDispatch::Http::UploadedFile:0x00000007b822f0 @original_filename="basket3.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"image[attachment]\"; filename=\"basket3.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130217-965-39199t>>, "viewable_id"=>"1", "alt"=>"basket 3"}, "button"=>"", "product_id"=>"basket"}
Command :: identify -format %wx%h '/tmp/stream20130217-965-1fn7d3c.jpg[0]'
Command :: convert '/tmp/stream20130217-965-1fn7d3c.jpg[0]' -resize "48x48>" -strip -auto-orient '/tmp/stream20130217-965-1fn7d3c20130217-965-wmlyai'
Command :: identify -format %wx%h '/tmp/stream20130217-965-1fn7d3c.jpg[0]'
Command :: convert '/tmp/stream20130217-965-1fn7d3c.jpg[0]' -resize "x190" -crop "190x190+31+0" +repage -strip -auto-orient '/tmp/stream20130217-965-1fn7d3c20130217-965-13z6pr7'
Command :: identify -format %wx%h '/tmp/stream20130217-965-1fn7d3c.jpg[0]'
Command :: convert '/tmp/stream20130217-965-1fn7d3c.jpg[0]' -resize "575x575>" -strip -auto-orient '/tmp/stream20130217-965-1fn7d3c20130217-965-znyfd4'
Command :: identify -format %wx%h '/tmp/stream20130217-965-1fn7d3c.jpg[0]'
Command :: convert '/tmp/stream20130217-965-1fn7d3c.jpg[0]' -resize "600x600>" -strip -auto-orient '/tmp/stream20130217-965-1fn7d3c20130217-965-pyrv7a'
Command :: identify -format %wx%h '/tmp/stream20130217-965-1fn7d3c.jpg[0]'
[paperclip] Saving attachments.
[paperclip] saving /home/spree/angel_wood/releases/20130216235942/public/spree/products/5/original/basket3.jpg
[paperclip] saving /home/spree/angel_wood/releases/20130216235942/public/spree/products/5/mini/basket3.jpg
[paperclip] saving /home/spree/angel_wood/releases/20130216235942/public/spree/products/5/small/basket3.jpg
[paperclip] saving /home/spree/angel_wood/releases/20130216235942/public/spree/products/5/product/basket3.jpg
[paperclip] saving /home/spree/angel_wood/releases/20130216235942/public/spree/products/5/large/basket3.jpg
Redirected to http://50.57.75.156/admin/products/basket/images
Completed 302 Found in 4334ms (ActiveRecord: 5.1ms)
Started GET "/admin/products/basket/images" for 24.155.210.182 at 2013-02-17 01:00:47 +0000
Processing by Spree::Admin::ImagesController#index as HTML
  Parameters: {"product_id"=>"basket"}
  Rendered /home/spree/angel_wood/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/admin/shared/_product_sub_menu.html.erb (2.6ms)
  Rendered /home/spree/angel_wood/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/admin/shared/_product_tabs.html.erb (2.8ms)
  Rendered /home/spree/angel_wood/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/admin/images/index.html.erb within spree/layouts/admin (38.1ms)
  Rendered /home/spree/angel_wood/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/admin/shared/_translations.html.erb (1.8ms)
  Rendered /home/spree/angel_wood/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/admin/shared/_routes.html.erb (1.2ms)
  Rendered /home/spree/angel_wood/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/admin/shared/_head.html.erb (5.1ms)
  Rendered /home/spree/angel_wood/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/admin/shared/_alert.html.erb (0.0ms)
  Rendered /home/spree/angel_wood/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/admin/shared/_tabs.html.erb (2.1ms)
Completed 200 OK in 62ms (Views: 43.2ms | ActiveRecord: 9.5ms) 
```

**服务器尝试显示图像时的错误：**

```
ActionController::RoutingError (No route matches [GET] "/spree/products/5/mini/basket3.jpg"):
  actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.11) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.11) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.11) lib/rails/engine.rb:479:in `call'
  railties (3.2.11) lib/rails/application.rb:223:in `call'
  railties (3.2.11) lib/rails/railtie/configurable.rb:30:in `method_missing'
  unicorn (4.6.0) lib/unicorn/http_server.rb:552:in `process_client'
  unicorn (4.6.0) lib/unicorn/http_server.rb:632:in `worker_loop'
  unicorn (4.6.0) lib/unicorn/http_server.rb:500:in `spawn_missing_workers'
  unicorn (4.6.0) lib/unicorn/http_server.rb:142:in `start'
  unicorn (4.6.0) bin/unicorn_rails:209:in `<top (required)>'
  /home/spree/angel_wood/shared/bundle/ruby/1.9.1/bin/unicorn_rails:23:in `load'
  /home/spree/angel_wood/shared/bundle/ruby/1.9.1/bin/unicorn_rails:23:in `<main>' 
```

关于向 nginx 发出指令以使其服务于我的资产，我有一些不明白的地方。有人看到我在这里做错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T23:50:21.623

通过更改以下`location`行来解决此问题：

`location ~ ^/(system|assets)/ {`

对此：

`location ~ ^/(spree|system|assets)/ {`

这是因为资产位于“spree”目录内的公共根目录中。“系统”是典型的 Paperclip 上传的地方，资产用于 Rails 资产。

# jquery - 如何使用 jQuery 将 div 设置为可见性：隐藏以显示？

> ID：14925726
> 
> 赞同：2
> 
> 时间：2013-02-17T20:29:58.190
> 
> 标签：jquery, css, animation, html, fadeto

我有一个 div 设置为可见性：隐藏在我想稍后显示的 CSS 中。这是我到目前为止的jQuery，它不起作用：

```
$(document).ready(function() {
    $('#start').click(function() {
        $(this).fadeOut(1000, function() {
             $('body').css('background-color','#999', function() {
                    $('.menu').fadeTo('slow',1);
             });
        });
    });
}); 
```

以下应按顺序发生：

1.  用户单击“#start”，“#start”消失。（有时候是这样的。）
2.  页面的背景颜色从原来的颜色变为灰色。（有时候是这样的。）
3.  div '.menu' 应该淡入。（这不会发生。）

我究竟做错了什么？如果它有所作为，'.menu' 只会填充一堆子 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:32:13.323

`fadeTo`更改`opacity`元素的属性，您应该使用`opacity`而不是使用`visibility`或将`display`元素的属性设置为`none`和使用`fadeIn`方法。

另请注意，`css`不接受 3 个参数。

```
.menu { display: none } 
```

```
$(document).ready(function() {
    $('#start').click(function() {
        $(this).fadeOut(1000, function() {
             $('body').css('background-color','#999');
             $('.menu').fadeIn('slow');
        });
    });
}); 
```

但是，如果要更改`visibility`属性，可以使用`css`方法：

```
$('.menu').css('visibility', 'visible'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:42:20.433

[http://api.jquery.com/css/](http://api.jquery.com/css/) .css() 没有第三个参数，它要么接受一个 css 属性和值的 2 个参数，要么接受一个 css 属性-值对的对象。

同样正如“未定义”指出的那样，您必须注意不透明度、可见性和显示。每个都可以使对象不可见，但在 jquery 动画中表现不同。

.fadeTo() 只改变对象的不透明度。.fadeIn() 用`display:none`to改变一个对象，`display:block`然后改变不透明度。

如果你有一个对象，`visibility:hidden`你实际上必须首先将可见性设置`visible`为 0 并将不透明度设置为 0，然后使用 fadeTo()。

我建议（如“未定义”写道）使用`display:none`代替`visibility:hidden`和使用`fadeIn()`代替`fadeTo()`

```
$('body').css('background-color','#999');
$('.menu').fadeIn('slow',1); 
```

# wpf - 从父元素触发

> ID：14925727
> 
> 赞同：1
> 
> 时间：2013-02-17T20:30:04.383
> 
> 标签：wpf, triggers, custom-controls

我在 WPF 中编写了一个小型用户控件，以便使用带有文本和图像的按钮。它被称为图标按钮。现在我添加了一个属性“Orientation”以允许图像位于文本的左侧或顶部。但是，图像边距必须不同。但我不能告诉图像根据父 StackPanel 的方向设置其边距。

这是 XAML 代码：

```
<Button
    x:Class="MyNamespace.IconButton"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    x:Name="_this">

    <Button.Template>
        <ControlTemplate>
            <Button
                Padding="{TemplateBinding Padding}"
                Style="{TemplateBinding Style}"
                Command="{TemplateBinding Button.Command}">

                <StackPanel Name="StackPanel" Orientation="{Binding Orientation, ElementName=_this}">
                    <Image Name="Icon"
                        Source="{Binding IconSource, ElementName=_this}"
                        VerticalAlignment="Center"
                        Margin="0,0,10,0">
                        <Image.Style>
                            <Style>
                                <Style.Triggers>
                                    <Trigger Property="Button.IsEnabled" Value="False">
                                        <Setter Property="Image.Opacity" Value="0.3"/>
                                    </Trigger>
                                    <Trigger Property="StackPanel.Orientation" Value="Vertical">
                                        <Setter Property="Image.Margin" Value="0,0,0,10"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Image.Style>
                    </Image>
                    <ContentPresenter
                        Visibility="{Binding ContentVisibility, ElementName=_this}"
                        RecognizesAccessKey="True"
                        Content="{Binding Content, ElementName=_this}"
                        VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
        </ControlTemplate>
    </Button.Template>
</Button> 
```

这是代码隐藏的 C# 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace MyNamespace
{
    public partial class IconButton : Button
    {
        public static DependencyProperty IconSourceProperty = DependencyProperty.Register(
            "IconSource",
            typeof(ImageSource),
            typeof(IconButton));

        public static DependencyProperty ContentVisibilityProperty = DependencyProperty.Register(
            "ContentVisibility",
            typeof(Visibility),
            typeof(IconButton),
            new PropertyMetadata(Visibility.Collapsed));

        public static DependencyProperty OrientationProperty = DependencyProperty.Register(
            "Orientation",
            typeof(Orientation),
            typeof(IconButton),
            new PropertyMetadata(Orientation.Horizontal));

        public ImageSource IconSource
        {
            get { return (ImageSource) GetValue(IconSourceProperty); }
            set { SetValue(IconSourceProperty, value); }
        }

        public Visibility ContentVisibility
        {
            get { return (Visibility) GetValue(ContentVisibilityProperty); }
            set { SetValue(ContentVisibilityProperty, value); }
        }

        public Orientation Orientation
        {
            get { return (Orientation) GetValue(OrientationProperty); }
            set { SetValue(OrientationProperty, value); }
        }

        public IconButton()
        {
            InitializeComponent();
        }

        protected override void OnContentChanged(object oldContent, object newContent)
        {
            base.OnContentChanged(oldContent, newContent);
            ContentVisibility = (newContent is string ? !string.IsNullOrEmpty((string) newContent) : newContent != null) ? Visibility.Visible : Visibility.Collapsed;
        }
    }
} 
```

我不知道如何使它工作。我对 WPF 还是很陌生，这些触发器让我发疯。

我的尝试是在第 26 行的 XAML 代码中，我想在其中查询 StackPanel.Orientation 值。它编译，但它不会触发任何东西。

此示例中的边距太大，但只是为了更好地了解问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:09:59.193

似乎您已经明确设置了`Margin`on `Image`，您应该将其移至 a`Style` `Setter`否则`Trigger`不会更改值，因为它不会覆盖明确设置的值。

由于您在类中有依赖属性，因此使用 a`DataTrigger`设置可能更容易。`Margin``Orientation`

像这样的东西应该适用于您的`Image` `Style`.

```
<Image Name="Icon" Source="{Binding IconSource, ElementName=_this}" VerticalAlignment="Center">
    <Image.Style>
        <Style TargetType="{x:Type Image}">
            <!-- move set margin to here -->
            <Setter Property="Margin" Value="0,0,10,0"/>
            <Style.Triggers>
                <Trigger Property="Button.IsEnabled" Value="False">
                    <Setter Property="Opacity" Value="0.3"/>
                </Trigger>
                <!-- set a DataTrigger to bind to the value of  Orientation-->
                <DataTrigger Binding="{Binding Orientation, ElementName=_this}" Value="Vertical">
                    <Setter Property="Margin" Value="0,0,0,10"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Image.Style>
</Image> 
```

![在此处输入图像描述](../Images/cbcacf88709cdcaa099fddafb6aef129.png)

# javascript - 如何在 AngularJS 中观察自定义事件？

> ID：14925728
> 
> 赞同：14
> 
> 时间：2013-02-17T20:30:12.263
> 
> 标签：javascript, angularjs, angularjs-directive

简单示例：我有一个 textarea 并想为其提供额外的行为：在`enter`键上做一些事情并转到下一行`shift + enter`

我想我应该提供额外的指令来添加该行为。我已经这样做了：http: [//jsbin.com/oruvuy/1/edit](http://jsbin.com/oruvuy/1/edit)

PS 一件 hackie 事情对我来说似乎很奇怪：我`$digest()`手动调用。可以吗？有什么想法吗？

JS：

```
angular.module('Chat', [])
  .directive('enterSubmit', function () {
    return {
      restrict: 'A',
      link: function (scope, element, attrs) {
        var submit;

        $(element).on({
          keydown: function (e) {
            submit = false;

            if (e.which === 13 && !e.shiftKey) {
              submit = true;
              e.preventDefault();
            }
          },

          keyup: function () {
            if (submit) {
              scope.$eval( attrs.enterSubmit );

              // flush model changes manually
              scope.$digest();
            }
          }
        });
      }
    };
  });

function ChatCtrl($scope) {
  $scope.messages = [{
    text: 'Sample Message',
    datetime: new Date()
  }];

  $scope.add = function () {
    $scope.messages.push({
      text: $scope.message,
      datetime: new Date()
    });
    $scope.message = '';
  };

  $scope.message = '';
} 
```

```
<body ng-controller="ChatCtrl">

  <h1>Leave message:</h1>
  <form>
    <div class='hint'>Click &lt;Enter&gt; to submit :)</div>
    <textarea
      cols="30"
      rows="5"
      ng-model="message"
      enter-submit='add()'
    ></textarea>
    <br />
    <button type="submit" ng-click="add()">Send message!</button>
  </form>

  <h3>Messages list:</h3>
  <table>
    <tr>
      <th>Text</th>
      <th>Date</th>
    </tr>
    <tr ng-repeat="message in messages">
      <td class='text'>{{message.text}}</td>
      <td class='date'>{{message.datetime | date:"HH:mm:ss"}}</td>
    </tr>
  </table>

</body> 
```

但这样做是正确的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-17T21:47:46.570

是的，指令链接函数中的绑定事件正是您想要做的。

调用 $digest 并不难 - 您示例中的消息正在添加到模型中`keyup`，并且 Angular 不会消化这些更改，直到有东西告诉它。它实际上会在 next 被消化`keydown`，但由于您需要在 $digest 之后发生 your `keyup`，因此您必须手动调用它。

# ruby-on-rails-3 - page.should have_content('以 subscribem@example.com 身份登录')

> ID：14925730
> 
> 赞同：1
> 
> 时间：2013-02-17T20:30:22.067
> 
> 标签：ruby-on-rails-3, rspec, warden

我正在按照**Ryan Bigg**的《 **Multitenancy with Rails** 》一书中的步骤进行操作，我遇到了这个错误，但我找不到我做错了什么。

 **错误：

```
 1) Accounts Creating an account
     Failure/Error: page.should have_content('Signed in as subscribem@example.com')
       expected there to be text "Signed in as subscribem@example.com" in "Your account has been successfully created. Account Sign Up"
     # ./spec/features/accounts/sign_up_spec.rb:13:in `block (2 levels) in <top (required)>' 
```

sign_up_spec.rb

```
require 'spec_helper'
feature 'Accounts' do 
  scenario "Creating an account" do
    visit subscribem.root_url
    click_link 'Account Sign Up'
    fill_in 'Name', :with => "Test"
    fill_in 'Email', :with => 'subscribem@example.com'
    password_field_id = 'account_owner_attributes_password'
    fill_in 'Password confirmation', :with => 'password'
    click_button 'Create Account'
    success_message = 'Your account has been successfully created'
    page.should have_content(success_message)
    page.should have_content('Signed in as subscribem@example.com')
  end
end 
```

账户模型

```
module Subscribem
  class Account < ActiveRecord::Base
    attr_accessible :name, :owner_attributes

    belongs_to :owner, :class_name => 'Subscribem::User'
    accepts_nested_attributes_for :owner
  end
end 
```

用户模型

```
module Subscribem
  class User < ActiveRecord::Base
    attr_accessible :email, :password, :password_confirmation
    has_secure_password

  end
end 
```

应用控制器

```
module Subscribem
  class ApplicationController < ActionController::Base

    def current_user
      if user_signed_in?
        Subscribem::Account.find(env['warden'].user(:scope => :account))
      end
    end

    helper_method :current_account

    def current_user
      if user_signed_in?
        Subscribem::User.find(env['warden'].user(:scope => :user))
      end
    end

    helper_method :current_user

    def user_signed_in?
      env['warden'].authenticated?(:user)
    end

    helper_method :user_signed_in?

  end
end 
```

帐户控制器

```
require_dependency "subscribem/application_controller"

module Subscribem
  class AccountsController < ApplicationController

    def new
      @account = Subscribem::Account.new
      @account.build_owner
    end

    def create
      account = Account.create(params[:account])
      env['warden'].set_user(account.owner.id, :scope => :user)
      env['warden'].set_user( account.id, :scope => :account)
      flash[:success] = "Your account has been successfully created."
      redirect_to subscribem.root_url
    end

  end
end 
```

应用程序.html.erb

```
<body>                                                                             
<% flash.each do |k,v| %>
<div class='flash <%= k %> '><%= v %></div>
<% end %>

<% if current_user %>
Signed in as <%= current_user.email %>
<% end %>

<%= yield %>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T08:54:03.277

我遇到了同样的问题并以不同的期望解决了它：

```
require 'rails_helper'

feature 'Accounts' do
  scenario 'creating an account' do
    visit subscribem.root_path
    click_link 'Account Sign Up'
    fill_in 'Name', with: 'Test'
    click_button 'Create Account'
    success_message = 'Your Account has been successfully created.'
    expect(find('.flash.success')).to have_content(success_message)
  end
end 
```

解决方案是找到成功消息的闪存消息而不是页面。希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T23:17:17.067

也许错误在视图中（subcribem/accounts/show.html.[template_engine]）？似乎只打印了闪存消息。**

# actionscript-3 - 事件处理程序的 2 个参数？

> ID：14925731
> 
> 赞同：1
> 
> 时间：2013-02-17T20:30:37.500
> 
> 标签：actionscript-3, parameters, event-handling, helpers

`

```
public class names extends MovieClip
{
   public function names(YourName:String)
    {
      this.addEventListener(Event.ENTER_FRAME,doThis);
    }
    public function doThis(e:event,Name:String)
    {
      trace(Name);
    }
} 
```

我试图将值“YourName”从构造函数传递给 doThis 类。我不知道我是否真的很愚蠢，但我不明白该怎么做。有没有办法我可以为 doThis 类设置 2 个参数？还是有其他解决方案

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:44:57.257

此代码可以帮助您：

```
package {

public class Names extends MovieClip
{
   private var name:String ;

   public function Names(name:String)
    {
      this.name = name ;
      this.addEventListener(Event.ENTER_FRAME, doThis);
    }

    public function doThis(event:Event):void
    {
      trace(this.name);
    }
}
} 
```

在调度事件后调用的所有函数仅接受 1 个参数：`Event`.

您所做的只是使用`instance variables`. 祝你好运，希望它有帮助:)

# c# - 基于类注解或继承类型扫描程序集和自动绑定

> ID：14925740
> 
> 赞同：1
> 
> 时间：2013-02-17T20:32:19.747
> 
> 标签：c#, ninject-extensions

我需要扫描所有程序集以查找具有特定属性的类（或从抽象类**ColorTest**继承的类）并将它们自动绑定到**ColorTest**。然后我需要实例化和枚举**ColorTest的所有实现**

组装 1：

```
public abstract class ColorTest { 
    public abstract string GetColorString();
} 
```

组装 2：

```
//[ColorImplementation] // attributes are not necessary
public class BlueColor() : ColorTest {...} 
```

组装 3：

```
//[ColorImplementation] //not necessary
public class RedColor() : ColorTest {...} 
```

装配 4：

```
class Program{
    public static Main(){

        #region Problem area :)
        var kernel = new StandardKernel();

        kernel.Bind(x => x
            .FromAssembliesMatching("*")
            .SelectAllClasses()
            .InheritedFrom<ColorTest>// or .WithAttribute<ObsoleteAttribute>()
            .BindAllInterfaces() // I'd like to Bind it only to ColorTest
            .Configure(b => b.InSingletonScope()));
        #endregion

        // Enumerate
        kernel
            .GetAll<ColorTest>()
            .ToList()
            .ForEach(t=>Console.WriteLine(t.GetColorString()));
} 
```

示例是对更复杂问题的抽象和简化。

Ninject 可以帮我处理描述的场景吗？如果是怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:28:56.530

解决方案非常简单！

我不得不替换 2 行：

```
.FromAssembliesMatching("*") -> .FromAssembliesMatching(".") //mistake 
```

和

```
.BindAllInterfaces() -> .BindBase() // because I'm implementing 
                                    // abstract class, not interface 
```

不涉及属性

# java - codepro analytix - 列出规则集中的所有当前规则

> ID：14925742
> 
> 赞同：1
> 
> 时间：2013-02-17T20:32:37.783
> 
> 标签：java, eclipse, eclipse-plugin, rad, codepro

我需要分析我的 codePro 安装中的规则。它还有一些自定义规则集，而不是默认规则集，这些规则集可能有冗余实例。我需要列出所有规则、它们的描述和规则集。

我知道导出规则功能，但这并没有削减超过 50 条左右的规则或描述。您能否提供比浏览每条规则并添加到报告中更智能的解决方案？

谢谢

# android - Android Switch 小部件 textOn 和 textOff 无法按预期工作

> ID：14925743
> 
> 赞同：2
> 
> 时间：2013-02-17T20:32:39.917
> 
> 标签：android, android-widget

我有一个 UI，其中添加了一个 Switch 小部件（在 API 14 中引入）。XML 如下所示：

```
<Switch
    android:id="@+id/togglebutton"
    android:layout_margin="10dp"
    android:layout_gravity="center"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textOff="No"
    android:textOn="Yes" /> 
```

你可以看到我已经指定了textOn和textOff。所以我希望开关小部件上有这个文本。

但是，我得到的是： ![在此处输入图像描述](../Images/89fc81557094726d1637a0de3c48f6de.png) ![在此处输入图像描述](../Images/fd3b621277e10d9678f13d2250fee934.png)

已经检查了调试中的所有内容......仍然不明白为什么我的自定义文本没有出现！

此外，自定义文本出现在 Galaxy S2 (Android 4.0.4) 上，但在 10" Galaxy Tab 上也没有出现在 Android 4.0.4 上！！

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T09:28:58.860

我解决了...

问题是 Galaxy 选项卡的默认主题是别的东西......它不是 Holo.Light 例如！

一旦我强制主题（在我的应用程序中）从 Holo.Light 继承，我得到了想要的结果......

# java - 缩放图像数组 Java

> ID：14925744
> 
> 赞同：-1
> 
> 时间：2013-02-17T20:32:51.913
> 
> 标签：java, image, scale

我正在尝试重新缩放一组图像，以使它们都具有相同的宽度和高度。我无法返回数组。任何帮助都会很棒。

```
 public static Picture[] resize(Picture[] slides, String[] args) {

    int w = 298;
    int h = 298;

    Picture [] source =  new Picture [Integer.parseInt(args[0])];

    for ( int ti = 0; ti < w; ti++){
        for (int tj = 0; tj < h; tj++){
            Picture [] target = new Picture[ti+1];
            int si = tj * source[ti].width()/w;
            int sj = tj * source[tj].height()/h;
            target[ti].set(ti, tj, source[0].get(si, sj));
        }
    }
    return target;   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:43:06.553

您的问题有点不清楚，并且您的源代码令人困惑。看来您只需要编辑传入的数组。您可以对其进行修改，以便它复制输入数组并创建一个新数组，即可`System.arraycopy()`完成此操作。

我试图回答我认为您需要的内容，但是我不知道您的 Picture 类的 API。您可以`set(...)`像在示例中一样使用，而不是我使用的 API 调用。

```
public static Picture[] resize(Picture[] slides, String[] args) {
    int w = 298;
    int h = 298;

    for(Picture i : slides) {
        i.setHeight(h);
        i.setWidth(w);
    }
    return slides;   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:59:13.290

`Pictures`被调用的数组`target`只存在于声明它的块的范围内。`target`可以引用数组的范围由最内层 for 循环的左括号和右括号标记。

为了能够`target`在您拥有 return 语句的行处引用，您需要在两个 for 循环之外声明它。

至于代码的其余部分，正如其他人所指出的那样，目前尚不清楚发生了什么。

该`slides`参数未使用：如果您不使用它，请将其删除。

该`args`参数命名不当：重命名它以指示其内容。

执行这些步骤将使我们更容易为您提供进一步的帮助。

# java - 数组列表删除（）

> ID：14925749
> 
> 赞同：-1
> 
> 时间：2013-02-17T20:33:46.470
> 
> 标签：java, arraylist

我对 ArrayList 的 remove() 方法有疑问。如果我正确使用它，我想做。所以我有一个对象的 ArrayList，我想从 Arraylist 中删除一个特定的对象。bool remove(obj) 是正确的使用方法吗？据我了解， remove 方法基于 equals 方法比较对象。如果对象是用户定义的类并且equals方法没有被覆盖，那么它应该使用==比较对象，这是比较地址而不是内容？在这种情况下，比较地址而不是内容是合适的，因此 remove 方法是从 ArrayList 中删除特定对象的正确方法。

我的理解正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T20:39:12.807

如果您知道对象，则使用它是正确的方法 -**迭代时不能使用它！**. 你会得到一个`ConcurrentModificationException`.
如果要在迭代时删除元素，则需要使用`Iterator`

```
final Iterator<Something> listIter = arrayList.iterator();
while(listIter.hasNext()) {
  final Something thing = listIter.next();
  if(someTest) {
    listIter.remove();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T20:36:29.177

> 据我了解， remove 方法基于 equals 方法比较对象。如果对象是用户定义的类并且equals方法没有被覆盖，那么它应该使用==比较对象，这是比较地址而不是内容？

如果你不覆盖你的`equals()`，它将使用类中的默认等于`Object`

并且比较参考

```
 public boolean equals(Object obj) {
   return (this == obj);
 } 
```

如果您的类不是 Object 的直接子类，它将使用覆盖的`equals()`

例如：

```
Object
|
|--Animal (overrides `equals()`)
    |
    |
  Human (Doesn't override `equals()`, it will use `Animal`'s version of `equals()` not `Object`'s 
```

# javascript - 你如何使用 parseInt()？

> ID：14925750
> 
> 赞同：-3
> 
> 时间：2013-02-17T20:33:53.030
> 
> 标签：javascript

我是 Javascript 的新手，我很难编码。我现在正在做一个 BMI 计算器的项目。我无法完成的唯一步骤是“使用 parseInt() 函数将值转换为整数”。我应该把`parseInt()`函数放在哪里？

这是我的代码：

```
<script type="text/javascript">
    function calcBMI (form) {
        var h = form.height.value;
        var lbs = form.weight.value;
        parseInt(form.result.value);
        form.result.value = (lbs*lbs)/(h*h);
    }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T20:36:33.983

这是一种使用方式[`parseInt`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)（基数在哪里`10`）：

```
var h = parseInt(form.height.value, 10),
    lbs = parseInt(form.weight.value, 10); 
```

所以函数*返回*转换后的值。

**注意：**重要的是要知道，对于您的情况，实际上不需要将变量转换为整数，因为乘法`*`会自动将字符串转换为数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:53:52.280

我认为这里的大多数答案都是正确的。
除了 parseInt 之外，您的 JavaScript 中可能还缺少其他内容。
这是我使用您的代码构建的示例（有一些小的更改）：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <form id="myform">
    Height: <input type="text" name="height" value="" /><br />
    Weight: <input type="text" name="weight" value="" /><br />
    Result: <input type="text" name="result" value="" /> <br />
    <input type="button" onclick="calcBMI()" value="Calculate" />
  </form>
  <script>
    function calcBMI () {
       var form = document.getElementById('myform');
       var h = parseInt(form.height.value, 10);
       var lbs = parseInt(form.weight.value, 10);
       //parseInt(form.result.value);
       form.result.value = (lbs*lbs)/(h*h);
 }

  </script>
</body>
</html> 
```

[试试这个代码。](http://jsbin.com/avetuv/3/)

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T20:38:14.957

> `parseInt(string, radix)`
> 
> *   `string` - 必需的。要解析的字符串，
> *   `radix`- 可选的。表示要使用的数字系统的数字（从 2 到 36）

取自：[w3schools`parseInt()`](http://www.w3schools.com/jsref/jsref_parseint.asp "w3schools")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T20:39:28.150

请改用 Number() 函数。 [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)

```
function calcBMI (form) {
    var h = Number(form.height.value),
        lbs = Number(form.weight.value);

     form.result.value = ( lbs*lbs )/( h*h );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T20:45:42.873

```
<script type="text/javascript">
    function calcBMI (form) {
        var h = parseInt(form.height.value),
            lbs = parseInt(form.weight.value);
        form.result.value = (lbs*lbs)/(h*h);
    }
</script> 
```

# c++ - 如何将 char 和 char* 附加到现有字符串？

> ID：14925753
> 
> 赞同：0
> 
> 时间：2013-02-17T20:34:14.553
> 
> 标签：c++, char, string-concatenation

初始化一个字符串后，是否可以在同一行中添加一个 char 和一个 char*：

```
char mod;//this comes in as a parameter
string line = "text";
line += mod;
line += "more text"; 
```

有没有更有效和/或可能的单线方式来做到这一点？就像是

```
string line = "text" + mod + "more text"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:38:26.787

你的单行代码不起作用，因为`char *`s 不是字符串，所以你不能用来`+`将它们与`char`s 连接；你最终会得到一个指针添加。如果你想要一个单线，你可以使用

```
string line = string("text") + mod + "more text"; 
```

但这不会比你的 3 行更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T20:37:53.120

你可以做你的第一个片段（你会发现它只是通过编译！），但不是你的第二个。

您还可以考虑使用[`std::stringstream`](http://en.cppreference.com/w/cpp/io/basic_stringstream)：

```
std::stringstream ss;
ss << "text" << mod << "more text"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T20:37:56.630

您只需要确保的第一个操作数`+`是 a `std::string`：

```
string line = string("text") + mod + "more text"; 
```

然后结果`string("text") + mod`是 a`std::string`并且也可以`"more text"`附加到它上面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T20:41:54.880

运算符`+=`返回一个非常量引用，因此您*可以*stack `+=`。这有点尴尬和不寻常，看起来像这样：

```
string line = "text";
(line += mod) += "more text"; 
```

# windows-8 - 如果我有 VS 2012 Professional，我是否需要 VS 2012 Express for Windows 8 应用程序？

> ID：14925754
> 
> 赞同：1
> 
> 时间：2013-02-17T20:34:19.120
> 
> 标签：windows-8, visual-studio-2012, windows-store-apps

我在尝试学习如何开发 Win8 应用程序时似乎指向的每个页面（例如[这个 MS Page](http://msdn.microsoft.com/library/windows/apps/br211386#part_1_setup)）都指向一个下载包，其中包括“Visual Studio Express 2012 for Windows 8”。

但是，我已经有了 VS 2012 Pro。

出于某种原因，我是否仍需要获取适用于 Windows 8 的 VS 2012 Express，或者是否有其他途径可以继续使用现有的 VS 2012 来构建 Windows 8 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:37:38.707

Express 是 VS 的精简版，因此它的功能不如 Pro 版。因此，您应该坚持使用 VS 2012 Pro，它能够开发 Windows 8 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T19:11:31.747

不。

适用于 Windows 8 的 Visual Studio 2012 Express Edition 可以创建和编辑 Windows 应用商店项目。这些相同的项目可以在 Visual Studio 2012 Pro 和 Ultimate 中打开和编辑。但是，Visual Studio 2012 Pro 和 Ultimate 可以创建 VS 2012 Express Edition 无法打开的其他类型的项目（如 Windows Phone、WCP、WPF），因为 Express for Windows 8 应用程序有意限制为仅构建 Windows 8 应用程序。

您的问题的答案是否定的，如果您有 Pro，则不需要 Express。Pro 是 Express 版本的超集。其他 Express 版本包括 Windows Phone、Web 和 Windows 应用程序。它们是 Visual Studio 的免费版本，仅出于这个原因，它们的功能就受到限制。

# c - C- 插入排序链表

> ID：14925755
> 
> 赞同：-1
> 
> 时间：2013-02-17T20:34:29.230
> 
> 标签：c, linked-list, insertion-sort

下面是我使用链表代码的插入排序。我已经像其他人一样调试过这个，但不知道如何让它排序。就像它现在一样，它进入一个无限循环，进入 insert() 中的 if 语句。我需要改变什么？

```
//Sort function to call insertion sort function
void sortEmps()
{
temp = NULL;
struct EMP* next = top;

while(top != NULL)
{
    next = top -> next;
    insert(temp);
    temp = next;
}

top = temp;
}

//Insertion sort function
void insert(struct EMP *emp)
{
prev = NULL;
current = temp;

while (current != NULL && current->id < emp->id)
{
    prev = current;
    current = current->next;
}

if (prev == NULL)
{
    temp = emp;
}
else
{
    emp -> next = prev -> next;
    prev -> next = emp;
}
} 
```

这是我的结构和添加功能。几乎是排序前唯一使用的东西。我能够初始化一堆员工，所以他们被存储了。

```
 typedef struct EMP
 {
int id;
char name [MAX];
double salary;
struct EMP* next;

} EMPLOYEE;                                                        
int addEmployee(char* name, double salary)
{
struct EMP* emp = createEmployee(name, salary);
emp -> next = top;
top = emp;

numEmps++;
//employees[numEmps++] = emp;
return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:52:35.077

想想如果您尝试插入现有列表和 current->id > emp->id 会发生什么（您永远不会进入 while 循环并且您的 prev == null，因此通过将指向列表头部的指针更改为指向某个东西否则，结果会在内存中未释放的某个位置丢失您的列表，您是在玩火。

顺便说一句：它与您的插入排序无关

我不会在这里给你写这种类型代码的正确方法，你可以在网上找到足够的资料。

一些建议，放松你的全局指针，并阅读如何设计一个支持从头部轻松插入和删除的链表（它可能会在另一个你应该使用的结构上说些什么）

# c++ - 增强 glsl 解析器的波浪或精神

> ID：14925760
> 
> 赞同：3
> 
> 时间：2013-02-17T20:34:53.890
> 
> 标签：c++, boost, glsl, boost-spirit

我想在 OpenGL 着色语言 (GLSL) 代码中解析自定义标签，这是一种非常类似于 C 的语言。一般用例如下所示：

```
#version 150

@bind ProjectionMatrix
uniform mat4 projMatrix;
@bind ViewMatrix
uniform mat4 viewMatrix;

in vec4 position;
in vec3 color;

out vec3 Color;

void main()
{
    Color = color;
    gl_Position = projMatrix * viewMatrix * position;
} 
```

我想这样做以使用`@bind`标签“注释”变量，以便我可以将它们连接到我的实际应用程序中的变量（即我可以将值从我的应用程序传递到 glsl）。所以我会解析 glsl 代码，每当我找到一个`@bind`标签时，我就会将`ProjectionMatrix`(or `ViewMatrix`) 解析为从 c++ 传递给 glsl 的变量，然后将`projMatrix`(or `viewMatrix`) 解析为应该存储从 c++ 发送的值的变量.

我想知道的是-为此使用增强波或精神会更好吗？这些是我正在寻找解决这个问题的两个库。

我已经让 boost wave lexer 工作了，因为它迭代了所有令牌。所以我必须编写代码来解析返回的令牌并寻找模式。

我不确定我将如何用精神来做到这一点，但它似乎是一个更强大的词法分析器/解析器。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:40:37.520

我仍然不确定您希望我们如何了解 glsl 的全部内容。所以我真的只能对实际的输入格式做一个大致的*猜测。*

假设我以我认为合适的最简单的方式来解释这一点（没有荒谬的无用）：

```
annot       = "@bind" >> ident >> eol;
declaration = 
   omit [ +(ident >> !char_(';')) ] // omit the type, TODO
    >> ident >> ';' >> eol; 
```

现在，我们只需要一种简单的方法来忽略整行，直到找到包含注释的行：

```
ignore = !annot >> *(char_ - eol) >> eol; 
```

^(*如果您想忽略`@bind`后面没有声明的行，您可能需要使用`!combi`而不是`!annot`.*)

这对你来说只是一个开始。此外，并非所有这些对可*忽略*行的“隐含”定义都可能导致大量回溯。所以不要指望一流的性能。

```
#define BOOST_SPIRIT_DEBUG
#include <boost/spirit/include/qi.hpp>
#include <boost/fusion/adapted.hpp>
#include <map>

namespace qi = boost::spirit::qi;

typedef std::map<std::string, std::string> Map;

template <typename It>
  struct grammar : qi::grammar<It, Map(), qi::blank_type>
  {
    grammar() : grammar::base_type(start)
    {
        using namespace qi;
        ident = lexeme [ alpha >> *alnum ];
        annot = "@bind" >> ident >> eol;
        declaration = 
            omit [ +(ident >> !char_(';')) ] // omit the type, TODO
            >> ident >> ';' >> eol;

        ignore = !annot >> *(char_ - eol) >> eol;

        combi = annot >> declaration;
        start = *ignore >> combi % *ignore;

        BOOST_SPIRIT_DEBUG_NODE(start);
        BOOST_SPIRIT_DEBUG_NODE(combi);
        BOOST_SPIRIT_DEBUG_NODE(ignore);
        BOOST_SPIRIT_DEBUG_NODE(declaration);
        BOOST_SPIRIT_DEBUG_NODE(annot);
        BOOST_SPIRIT_DEBUG_NODE(ident);
    }
  private:
    qi::rule<It, qi::blank_type> ignore;
    qi::rule<It, std::string(), qi::blank_type> ident, declaration, annot;
    qi::rule<It, std::pair<std::string, std::string>(), qi::blank_type> combi;
    qi::rule<It, Map(), qi::blank_type> start;
  };

template <typename It>
void test(It f, It l)
{
    grammar<It> p;

    Map mappings;
    bool ok = qi::phrase_parse(f, l, p, qi::blank, mappings);

    if (ok)
    {
        for (auto it = mappings.begin(); it!=mappings.end(); ++it)
            std::cout << "'" << it->second << "' annotated with name '" << it->first << "'\n";
    }

    if (f!=l)
        std::cerr << "warning: remaing unparsed: '" << std::string(f,l) << "'\n";
}

int main()
{
    const std::string input(
        "#include <reality>\n"
        "@bind VarName\n"
        "uniform int myVariable;\n"
        "// other stuff\n"
        "@bind Var2Name\n"
        "uniform int myVariable2;\n");

    test(input.begin(), input.end());
} 
```

这将打印：

```
'myVariable2' annotated with name 'Var2Name'
'myVariable' annotated with name 'VarName' 
```

**在****[liveworkspace.org](http://liveworkspace.org/code/1lQLQ4%240)**上实时查看详细 (DEBUG) 输出

# ember.js - 如何在 ember.js 中为重复标记创建可重用部分？

> ID：14925763
> 
> 赞同：8
> 
> 时间：2013-02-17T20:35:18.713
> 
> 标签：ember.js, partial-views, reusability

鉴于这段 HTML：

```
<div id="email_field" class="control-group">
  <label class="control-label" for="account.email">Email</label>
  <div id="email_input" class="controls">
    <input id="account.email" name="account.email" type="text" placeholder="jpublic@example.com">
    <span class="help-block">We just need a valid email address.</span>
  </div>
</div> 
```

对于我想要的任何属性，我如何将其变成可重用的部分？IE：邮箱、密码、密码确认等

我会假设某种视图层次结构，但我不太确定。

**编辑**：经过进一步的探索，我已经淘汰`{{view}}`并`{{render}}`弄清楚了我需要什么：

我想： 1\. 使用特定视图（InputView） 2\. 使用特定控制器（最好类似命名：InputController）（`{{view}}`我认为不这样做） 3\. 能够多次使用（`{{render}}`不能这样做) 4\. 能够传入值（`{{render}}`不能这样做）

例子：

```
<!-- templates/application.hbs -->
{{foo "input" name="Email" id="account.email" placeholder="jpublic@email.com"}} 
```

* * *

```
// controllers/input.js
Application.InputController = Ember.ObjectController.extend({
  type: "text"
}); 
```

* * *

```
// views/input.js
Application.InputView = Ember.View.extend({
  templateName: "form/input"
}); 
```

* * *

```
<!-- templates/form/input.hbs -->
<input {{bindAttr id="id" name="name" type="type" placeholder="placeholder"}}> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:12:54.417

我将创建一个包含所有可变参数的视图。如：

```
{{view App.FormEntity
    name="email"
    placeholder="My placeholder..."
    help="We just need a valid email address."
    valueBinding="value"
}} 
```

从那里您可以提取标签、各种类名，然后用于`Ember.TextField`将值绑定到。

`bindAttr`一旦您将所有这些参数传递到视图中，使用s、几个计算属性和 Ember 助手（例如）的混合创建标记应该会很容易`Ember.TextField`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:30:43.600

我是 Emberjs 的新手，正在寻找几乎相同的东西，但你不能也简单地使用[http://emberjs.com/guides/templates/writing-helpers/](http://emberjs.com/guides/templates/writing-helpers/)吗？我会自己尝试一下，如果成功的话可以提供更多更新。

**更新：** 好的，我让它工作了。我使用 FormgeneratorHelper.js 和以下代码创建了一个新的 Helpers 文件夹：

```
Ember.Handlebars.registerBoundHelper('control-group', function (options) {
    var name = options.hash.test.capitalize();
    console.log(name);
    return new Handlebars.SafeString('<div class="control-group"> \
            <label class="control-label" for="input' + name + '">' + name + '</label> \
            <div class="controls"> \
                <input type="text" id="input' + name + '" placeholder="' + name + '" /> \
            </div> \
        </div>');
}); 
```

然后，无论您可以在哪个模板中执行以下操作：

```
{{control-group test="email"}} 
```

我真的很喜欢使用助手的想法，但是如果你使用的是纯 Javascript（而不是 CoffeScript）并且有不止一行代码，那么不幸的是它会变得有点难看。但可能仍会使用该方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T05:22:20.033

> 对于我想要的任何属性，我如何将其变成可重用的部分？IE：邮箱、密码、密码确认等

你想要的是实验`{{control}}`助手。控制助手目前正在开发中，被认为是实验性的。要启用它，`ENV.EXPERIMENTAL_CONTROL_HELPER = true`请在需要 Ember 之前进行设置。

> 我想： 1\. 使用特定视图（InputView） 2\. 使用特定控制器（最好类似命名：InputController）（我认为 {{view}} 不会这样做）

开箱即用的控件帮助程序期望传递一个模板名称。该模板名称用于查找匹配的视图和控制器。例如：

```
App.InputView = Ember.View.extend()
App.InputController = Ember.Controller.extend()
{{control input}} 
```

看：

*   [控件使用命名控制器和视图的新实例呈现模板](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/tests/helpers/control_test.js#L80)
*   [通过模板名称查找控件的控制器和视图](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/tests/helpers/control_test.js#L91)

> 1.  可以多次使用（{{render}} 不能这样做）

[一个控件可以多次使用](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/tests/helpers/control_test.js#L150)

> 1.  能够传入值（{{render}} 不能这样做）

像`{{view}}`助手一样，`{{control}}`将接受任意名称/值对。因此，在您的示例中，可以手动将选项传递给控制助手。像`{{view}}`助手一样，这些选项成为视图实例的属性：

```
<!-- templates/form/input.hbs -->
<label class="control-label" {{bindAttr for="view.inputId"}}>
  {{view.label}}
</label>
<div class="controls">
  <input {{bindAttr id="view.inputId" name="view.name" type="type" placeholder="view.placeholder"}}>
  <span class="help-block">{{view.help}}</span>
</div>

// controllers/form_input.js
App.FormInputController = Ember.ObjectController.extend({
  type: "text"
});

// views/form_input.js
App.FormInputView = Ember.View.extend({
  classNames: ["control-group"]
});

<!-- templates/application.hbs -->
{{control "form/input" 
    inputId="account.email" 
    name="email"
    label="Email" 
    placeholder="jpublic@email.com" 
    help="We just need a valid email address."
}} 
```

有关工作示例，请参[见此 jsbin](http://jsbin.com/uwifev/6/edit)

还要记住，[控件可以指定要在其模板中使用的模型](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/tests/helpers/control_test.js#L136)- 有了这个，我们可以将属性绑定到模型数据。此外[，如果控制器的模型发生更改，则其子控制器将被销毁](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/tests/helpers/control_test.js#L198)，因此如果模型被换出，控件将按预期重置。

# android - 通用图像加载器 inSampleSize 选项

> ID：14925765
> 
> 赞同：1
> 
> 时间：2013-02-17T20:35:23.547
> 
> 标签：android, universal-image-loader

我在我的应用程序中使用 Uinversal Image Loader，我需要加载图像 inSampleSize，怎么做？我从作者那里读到这个

> 为 DisplayImageOptions 添加了 DecodingType 参数

但我不打算这样做，一个剪断的代码会很棒！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:48:18.983

`DecodingType`改名为`ImageScaleType`很久以前。 `ImageScaleType`有下一个选项：

*   **无**（inSampleSize = 1）
*   **IN_SAMPLE_POWER_OF_2** (inSampleSize = 1,2,4,8,16,...)
*   **IN_SAMPLE_INT** (inSampleSize = 1,2,3,4,5,...)
*   **完全**正确（位图将根据 ImageView 大小精确缩放）
*   **EXACTLY_STRETCHED**（如果图像小于 ImageView 则将被拉伸）

# asp.net-mvc - 在尊重单一职责的同时为 MVC4 应用程序创建服务层

> ID：14925767
> 
> 赞同：2
> 
> 时间：2013-02-17T20:35:32.727
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在尝试学习一些最佳实践，同时我正在学习 MVC4。我有一个包含三个项目的解决方案：

1.  网络：MVC 的东西
2.  核心：数据模型
3.  测试：测试类

我现在正在尝试添加：

4：服务：业务逻辑

这将从我的控制器中获取诸如“GetFilteredItems()”之类的逻辑，并将它们放入依赖于 Core 和 Web 的服务项目中。当我开始这样做时，我想履行单一职责并为每个方法创建一个类。我的问题：

1）这是一个好方法吗？
2) 假设我需要一个获取 ID 并返回列表的 GetFilteredItems 方法。就命名类和方法而言，这里的约定是什么？我不能有一个带有返回某些东西的方法 SampleClass() 的类 SampleClass，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:52:26.947

[这里有一个关于在 MVC 中创建服务层](https://stackoverflow.com/questions/14887871/creating-a-service-layer-for-my-mvc-application/14896644#14896644)的很好的讨论。

单一职责不需要具有单一方法的类。我以前从未听说过这种方法。哪里有关于这种方法及其好处的讨论？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:33:12.950

是的，这似乎是一个很好的方法，尽管单一职责原则并不一定意味着您需要为每个方法创建一个单独的类。

只需确保您的服务类具有单一职责即可。

对于您的 GetFilteredItems 方法，您可以创建一个名为 ItemService 的类来包含它。该服务还将包含用于返回项目集合的任何其他方法。

然后，您可以将与持久化项目有关的方法放在不同的服务中，等等......

# asp.net - 无法将 Web 服务引用添加到 mvc 4 项目

> ID：14925769
> 
> 赞同：1
> 
> 时间：2013-02-17T20:35:40.650
> 
> 标签：asp.net, wcf, web-services, asp.net-mvc-4, service-reference

我使用 WCF 服务应用程序模板在 Visual Studio 2012 中创建了一个 Web 服务。

一切正常，但前提是主机应用程序与您在这张图片中看到的解决方案相同：

*   `Bank`项目是网络服务
*   `BankHost`项目是 Windows 窗体项目

![在此处输入图像描述](../Images/14bcb8bb24df88c2c615ed62b008eb98.png)

但是当我试图从 ASP.NET MVC 4 项目中获取对服务的引用时，我收到了这个错误：

![在此处输入图像描述](../Images/d62939449ebe211a81a2ec7a0608adcf.png)

这是`web.config`Web 服务项目的文件

```
<configuration>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <protocolMapping>
        <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>    
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <directoryBrowse enabled="true"/>
  </system.webServer>
</configuration> 
```

这是我`web.config`的 MVC 4 项目文件：

```
<configuration>
  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
  </system.web.webPages.razor>
  <appSettings>
    <add key="webpages:Enabled" value="false" />
  </appSettings>
  <system.web>
    <httpHandlers>
      <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
    </httpHandlers>
    <pages
        validateRequest="false"
        pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <controls>
        <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
      </controls>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="BlockViewHandler"/>
      <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
    </handlers>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:58:17.253

检查您的`.svc`文件 - 它是否具有`HostingFactory`属性？

```
Factory="WebApplication1.MyServiceHostFactory" 
```

工厂的名称是`Your service name + HostFactory`，整个路径是`.svc`文件所在的实际名称空间。

# php - 访问 Laravel 4 作曲家包资产

> ID：14925787
> 
> 赞同：3
> 
> 时间：2013-02-17T20:36:53.203
> 
> 标签：php, twitter-bootstrap, laravel, laravel-4

我刚刚通过 Laravel 4 中的作曲家添加了 Twitter Bootstrap，但我不确定如何在我的刀片模板中实际链接到诸如 等`bootstrap-tooltip.js`文件。`bootstrap-transition.js`

这不是关于`{{HTML::}}`类的问题，我知道它已在版本 4 中删除。我只想知道如何访问未存储在`/public/`目录中的媒体。

我想如果我手动执行此操作，我会将 js 放在`/public/js/`目录中，但是当通过 composer 安装包时，文件存储在`/vendor/twitter/bootstrap/js/`

这是一个很长的镜头，甚至感觉不对，但我尝试了：

```
<script src="{{ path('vendor/twitter/bootstrap/js/bootstrap-transition.js') }}"></script> 
```

希望这是有道理的，有人可以提出建议（我也希望我不会愚蠢并且错过了一些非常明显的东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:19:09.013

这可能会有所帮助...

它需要运行某种 composer post 脚本，类似于 Symfony Bootstrap 使用的那种

```
https://github.com/phiamo/MopaBootstrapBundle/blob/master/Composer/ScriptHandler.php 
```

有一个 Artisan 命令可以移动包的资产，但我不确定它是否适用于通用供应商

```
php artisan asset:publish vendor/package 
```

# python - 解析XML时python中的属性错误

> ID：14925789
> 
> 赞同：0
> 
> 时间：2013-02-17T20:37:05.003
> 
> 标签：python, xml, xml-parsing

我对 Python 有点陌生。我正在开发一个在 Python 中解析 XML 的项目，我的 Python 代码是：

```
from xml.dom import minidom
from copy import copy

class Xmlparse:

    def __init__(self, xmlfile):
        self = minidom.parse(xmlfile)

    def findadress(self):
        itemlist =self.getElementsByTagName('addresses')
        return itemlist[0].attributes['firstname'].value

if __name__ == '__main__':
    with open("sample.xml") as f:

        parse = Xmlparse(f)
        print parse.findadress() 
```

但是当我运行这段代码时，我得到一个输出错误：

```
AttributeError: Xmlparse instance has no attribute 'findadress' 
```

并且 findadress 函数主要拼写正确，但由于某种原因，我得到了这个错误。

非常感谢任何帮助。

而且我还想知道，如何在 python 中使用 XSD 模式验证 xml？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:40:01.490

邪恶在`self = minidom.parse(xmlfile)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:21:36.703

“self = minidom.parse(xmlfile)”覆盖您刚刚创建的 Xmlparse 对象。您想将 xml 文档分配给变量：

```
from xml.dom import minidom
from copy import copy

class Xmlparse:

    def __init__(self, xmlfile):
        self.doc = minidom.parse(xmlfile)

    def findadress(self):
        itemlist =self.doc.getElementsByTagName('addresses')
        return itemlist[0].attributes['firstname'].value 
```

# object - 对象存储和文件存储的区别

> ID：14925791
> 
> 赞同：36
> 
> 时间：2013-02-17T20:37:28.753
> 
> 标签：object, storage, persistent-object-store

有人可以解释一下对象存储和文件存储有什么区别吗？

[我在wiki](http://en.wikipedia.org/wiki/Object_storage_device)上阅读了有关对象存储的信息，还阅读了[http://www.dell.com/downloads/global/products/pvaul/en/object-storage-overview.pdf](http://www.dell.com/downloads/global/products/pvaul/en/object-storage-overview.pdf)，还阅读了 amazons docs(S3)、openstack swift等等。但是有人可以给我一个例子来更好地理解吗？

所有的区别仅在于我们为“对象存储”对象添加了更多元数据？

例如，如何使用某种编程语言（例如 python）来存储像对象一样的图像？

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-22T13:51:17.703

IMO，对象存储与规模无关，因为有人可以构建一个能够存储大量文件的 FS，即使在单个目录中也是如此。

它也与访问方法无关。对文件系统中数据的 HTTP 访问已在许多著名的 NAS 系统中可用。

按 OID 存储/访问是一种无需为数据命名而处理数据的方法。它也可以在文件上完成。我相信有一个 NFS 协议扩展允许这样做。

我要强调一点：对象存储是一种（新的/不同的）“以对象为中心”的数据、访问和管理方式。

想想以下几点：

今天的快照是什么？它们是卷的时间点副本。拍摄快照时，卷中的所有文件也会被快照。不管大家喜不喜欢，不管大家是否需要。一个完整的卷快照可以使用（浪费？）大量空间，而只需要快照几个文件。

在对象存储系统中，您很少会看到卷的快照，对象将被快照，也许是自动的。这是对象版本控制。所有对象都不需要版本化，每个单独的对象都可以判断它是否被版本化。

如何保护文件/卷免受灾难？通常，在灾难恢复 (DR) 设置中，会设置整个卷/卷集以复制到 DR 站点。同样，这并不影响是否要复制单个文件。灾难防护的单位是体积。文件是小菜一碟。

在对象存储系统中，DR 不是以卷为中心的。对象元数据可以决定应该存在多少副本以及在哪里（地理位置/故障域）。

其他功能类似：

1.  分层 - 基于其元数据放置在存储层/类中的对象，独立于其他不相关的对象。

2.  生命 - 对象在层之间移动，更改副本数量等，单独而不是作为一个组。

3.  身份验证 - 如果需要，可以从不同的身份验证域对单个对象进行身份验证。

如您所见，思想的变化在于，在对象存储中，一切都与对象有关。

将此与传统的思考和管理方式进行对比，并访问更大的容器，如卷（包含文件）不是对象存储。

上述特征及其以对象为中心的特性非常适合非结构化数据的要求，因此也很受关注。

如果一个存储系统在其思想上是以对象（或文件）为中心而不是以卷为中心（无论访问协议或规模如何），那么它就是一个对象存储系统。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-27T01:40:43.783

文件存储和对象存储之间有一些非常根本的区别。

文件存储将自身呈现为具有目录、子目录和文件的文件系统层次结构。当文件数量不是很大时，它很棒并且工作得很好。当您确切知道文件的存储位置时，它也能很好地工作。

另一方面，对象存储通常通过。一个 RESTful API。没有文件系统的概念。相反，应用程序将通过将对象（文件 + 附加元数据）保存到对象存储中。PUT API 和对象存储会将对象保存在系统的某个位置。对象存储平台将为应用程序将存储在应用程序数据库中的该对象提供唯一的密钥（类似于代客票）。如果应用程序想要获取该对象，他们需要做的就是将密钥作为 GET API 的一部分提供，然后对象存储将获取该对象。

希望这现在很清楚。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-11-28T04:53:43.987

披露 - 我为一家开发和销售大型文件系统和对象存储平台的供应商 (NetApp) 工作，我会尽量保持实现中立，但我的认知偏见可能会不知不觉地影响我的回答。

从访问、可编程性和实现的角度来看，存在许多差异，但是考虑到这可能主要由程序员而不是基础设施或存储人员阅读，我将在此重点关注这方面。

从外部/编程的角度来看，主要区别在于对象存储中的对象是作为一个完整单元创建、删除或更新的，您不能将数据附加到对象，也不能更新对象的一部分对象“就地”，但是您可以在保持相同对象 ID 的同时替换它。创建、读取、更新和删除对象通常是通过相对简单的 API 完成的，这些 API 几乎总是基于 REST 或基于 REST，并鼓励一种思维方式，即存储是可编程资源或可能作为多租户远程服务。虽然我知道大多数对象存储都支持对象内的字节范围读取，但总的来说，对象存储最初设计用于处理整个对象。对象存储 API 的良好示例是 Amazon S3（对象存储访问的默认标准）、OpenStack Swift 和 Azure Blob 服务 REST API 使用的那些。描述这些 API 背后的后端实现本身就是一本书。

另一方面，文件系统中的文件具有可应用于它们的更广泛的功能集，包括附加数据和更新数据。编程模型比对象存储更复杂，现在几乎总是通过“POSIX”风格的接口以编程方式访问，并且通常尝试最有效地利用 CPU 和内存，并鼓励文件系统是私有本地资源的心态. NFS 和 SMB 确实允许将文件系统作为多租户资源提供，但是这些通常会受到程序员的怀疑，因为尽管它们完全支持 POSIX，但与“本地”文件系统相比，它们有时在反应方式上存在细微差别语义。要更新本地文件系统中的文件，您可能会使用 API，例如[https://www.classes.cs.uchicago.edu/archive/2017/winter/51081-1/LabFAQ/lab2/fileio.html](https://www.classes.cs.uchicago.edu/archive/2017/winter/51081-1/LabFAQ/lab2/fileio.html)或[https://msdn.microsoft.com/en-us/library/mt794711( v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/mt794711(v=vs.85).aspx)。谈论文件系统实现的相对优点，例如 NTFS、BTRFS、XFS、WAFL 和 ZFS，往往会导致一场几乎不值得任何人花时间的宗教战争，但如果你给我买啤酒，我会很乐意与你分享我的意见.

从用例的角度来看，如果您想保留大量照片、视频或二进制构建工件，那么对象存储通常是一个不错的选择。另一方面，如果您想将数据持久存储在二叉树中并在存储介质上更新该数据，那么对象存储根本无法工作，而使用文件系统会更好（您也可以为此使用原始块设备，但自 90 年代初以来我还没有看到有人这样做）

另一个很大的区别是文件系统被设计为强一致性，并且通常通过低到中等延迟（50 微秒 - 50 毫秒）的网络访问，而对象存储通常最终是一致的，并且分布在一个无共享的基础设施上，这些基础设施通过低延迟连接在一起。带宽高延迟广域网及其到第一个字节的时间有时可以以整秒的倍数来衡量。从对象存储执行大量小（4K - 16K）随机读取可能会导致挫败感和性能问题。

对象存储与文件系统的另一个主要好处是，您可以合理地确定您放入对象存储中的任何内容都会保留在那里，直到您再次请求它，并且只要您继续付费，它就永远不会耗尽空间每月收费。这些资源通常通过内置复制、版本控制、自动恢复等大规模运行，而且飓风哈维式的灾难会使数据消失（即使那样，您也可以轻松地选择在另一个位置制作另一个副本）。对于一个文件系统，尤其是您希望您或您的本地操作人员管理的文件系统，您必须希望一切都得到备份，并且当您无法更新数据时它不会意外填满并导致一切崩溃。

我试图简洁，但为了增加混淆，“文件系统”和“对象存储”这两个词被应用于与我上面使用的描述完全不同的东西，例如 NFS，网络文件系统实际上并不是一个文件系统，它是通过远程过程调用实现 posix 存储 API 的一种方式，而 VMware 的 VSAN 将其数据存储在他们称为“对象存储”的东西中，它允许对虚拟机映像进行高速就地更新。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-24T00:18:53.093

简单的答案是对象访问存储系统或服务利用 API 和其他对象访问方法来存储、检索和查找数据，而不是传统的文件或 NAS。例如，对于文件或 NAS，您使用 NFS（网络文件系统）或 CIFS（例如 windows 文件共享）又名 SMB 又名 SAMBA 访问存储，其中文件具有名称/句柄以及由文件系统确定的关联元数据。

元数据包括关于创建、访问、修改和其他日期、权限、安全性、应用程序或文件类型或其他属性的信息。文件在大小以及每个文件系统的文件数量方面受到文件系统的限制。同样，文件系统在空间容量和文件系统中的文件数量方面受到其总大小或总大小的限制。

对象访问的不同之处在于，虽然文件或 NAS 前端或网关或插件可用于许多解决方案或服务，但主要访问是通过 API 进行的，其中对象可以是任意大小（最多为对象系统的最大值）具有可变大小的元数据（取决于对象系统/服务实现）。对于大多数对象存储系统/服务，您可以指定从几 KB 的用户定义元数据或 GBytes 的任何位置。你会用 GBytes 的元数据做什么？除了普通信息之外，如何为策略、管理、其他副本所在的位置、视频、音频的缩略图或小预览等添加更多数据。

对象访问 API 或接口的一些示例包括 Amazon Web Services (AWS) 简单存储服务 (S3) 或其他基于 HTTP 和 REST 的服务，SNIA CDMI。不同的解决方案还将支持 IOS（例如 iphone/ipad）访问、SOAP、Torrent、WebDav、JSON、XAM 等以及 NFS/CIFS。此外，许多对象存储系统或服务支持 python 的编程绑定等。API 允许您从本质上打开流，然后获取或放置、列出 API/系统支持的其他功能，以确定您将如何使用它。

例如，我使用 Rackspace Cloud 文件和 Amazon S3（除了 EBS 和 Glacier）来备份、存储和归档数据。我可以通过 Web 浏览器或工具访问存储的对象，包括 Jungle 磁盘 (JD)，这是我备份和同步文件的工具。JD 为我处理对象管理并将数据移动到 Rackspace 和 Amazon。如果我愿意，我还可以使用 API 进行一些编程，然后直接访问提供我的安全凭证的任何一个站点，以使用我存储的对象进行操作。

这是我去年在荷兰举办的一次会议中的对象和云存储入门的链接，其中包含一些简单的对象和访问示例。 [http://storageio.com/DownloadItems/Nijkerk_Nov2012/SIO_IndustryTrends_CloudObjectStorage.pdf](http://storageio.com/DownloadItems/Nijkerk_Nov2012/SIO_IndustryTrends_CloudObjectStorage.pdf)

使用编程绑定，您可以在程序中定义数据结构或对象，然后使用 API 或调用来存储、检索、列出数据、访问元数据等。如果存在特定的对象存储系统、软件或服务您正在寻找或需要知道如何编程，访问他们的网站，您应该找到他们的 SDK 或 API 信息以及示例。对于对象，一旦您在服务或产品/系统上创建了初始存储桶或容器，您就可以随时创建和存储其他对象。

以下是 AWS S3 API/编程示例的链接：http: [//docs.aws.amazon.com/AmazonS3/latest/API/IntroductionAPI.html](http://docs.aws.amazon.com/AmazonS3/latest/API/IntroductionAPI.html)

理论上，对象存储系统被谈论具有无限数量的对象或对象大小，实际上，大多数系统、解决方案、软件或服务都受到它们测试或当前支持的内容的限制，可能是数十亿个对象，具有对象大小为 5GByte 或更大。请注意特定服务或产品的限制，例如实际测试、支持的内容与架构上可能的内容或在 webex 或 powerpoint 上实施的内容。

同样，它的服务和产品/服务/软件取决于对象的数量、对象的大小、元数据的大小以及可以通过其 API 移入/移出的数据量。但是，通常可以安全地假设对象存储可以比文件系统（不使用全局名称空间、联合、文件虚拟化或其他技术）更具可扩展性（取决于实现）。

此外，在我的英特尔推荐读物 Cloud and Virtual Data Storage Networking (CRC Press) 一书中，您将找到有关云和对象存储的更多信息。

我将很快向 www.objectstorage.us 添加更多相关材料。

干杯

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-21T21:08:11.457

[这个答案](https://stackoverflow.com/a/17251470)甚至没有解释任何关于差异的事情。

> 文件存储和对象存储之间有一些非常根本的区别。

文件存储将自身呈现为具有目录、子目录和文件的文件系统层次结构。当文件数量不是很大时，它很棒并且工作得很好。当您确切知道文件的存储位置时，它也能很好地工作。

> 另一方面，对象存储通常通过。一个 RESTful API。没有文件系统的概念。相反，应用程序将通过将对象（文件 + 附加元数据）保存到对象存储中。PUT API 和对象存储会将对象保存在系统的某个位置。对象存储平台将为应用程序将存储在应用程序数据库中的该对象提供唯一的密钥（类似于代客票）。如果应用程序想要获取该对象，他们需要做的就是将密钥作为 GET API 的一部分提供，然后对象存储将获取该对象。

这解释了其中很大一部分。但你争论元数据。

对象存储没有文件夹的意义，也没有任何使人易于组织的组织结构。当然，文件存储确实拥有所有这些文件夹，这些文件夹使人们可以轻松地组织和随机浏览......在文件数量达到天文数字的服务器环境中，文件夹只是浪费空间和时间。

你说的数据库？好吧，他们不是在谈论对象存储本身，而是在说您的 http 服务（php、webmail 等）在其数据库中具有唯一 ID，以引用可能具有人类可识别名称的文件。

元数据，你说这个文件存储在哪里？这就是元数据的用途。您的单个文件被分成一堆小块，分布在地理位置、服务器和硬盘驱动器之外。这些小片段还包含更多数据，它们包含其他数据片段的奇偶校验信息，甚至可能完全重复。

元数据用于定位该文件在不同地理位置、数据中心、服务器和硬盘驱动器上的每条数据，并用于从硬件故障中恢复任何被破坏的数据。它会自动执行此操作。它甚至可以流畅地移动这些碎片以实现更好的传播。它甚至会重新创建一个已经消失的片段并将其存储在一个新的好硬盘上。

这可能是一个简单的解释；但我认为它可能会帮助您更好地理解。我相信文件存储可以对元数据做同样的事情；但是文件存储是您可以像人一样组织的存储（文件夹，层次结构等），而对象存储没有层次结构，没有文件夹，只是一个平面存储容器。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-02-06T10:49:28.457

对象存储 = 块存储 + 丰富的元数据 - 文件层次结构

块存储使用文件系统来指向​​存储内容的位置。对象存储使用标识符来指向内容及其上下文。这是我对阅读[内容寻址与位置寻址的理解](https://en.wikipedia.org/wiki/Content-addressable_storage)

块存储需要一个文件系统和结构，因此更大的文件系统会带来更多的开销。对象存储有很多关于文件的上下文，不需要文件层次结构。[戴尔论文](http://www.dell.com/downloads/global/products/pvaul/en/object-storage-overview.pdf)第 7 页上的解释清楚地表明了这一点。让我感到困扰的是，在硬盘本身的规模上没有解释。我发现硬盘本身总是使用块存储机制（尽管似乎正在更改为）（尽管似乎正在更改为）

可以在[这里找到其他一些见解](https://www.ddn.com/download/resource_library/whitepapers/ddn_whitepapers/DDN-BeginnersGuidetoObjectStorage-Whitepaper_2.pdf)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-12T02:34:38.287

实际上，您可以挂载存储桶/容器并从 Linux 访问对象或子文件夹（及其对象）。例如，我在 Ubuntu 上安装了 s3fs，我已经为我的一个 S3 存储桶设置了一个挂载点，并且能够执行常规的 cp、ls 和其他功能，就好像它是另一个文件系统一样。关键是获取软件工具，其中有很多允许您映射存储桶/容器并将其显示为挂载点。除了作为 NAS 之外，还有一些软件工具允许您通过 iSCSI 访问 S3 和其他存储桶/容器。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-14T18:43:40.357

大多数拥有基于对象的解决方案的公司都根据性能/成本要求选择混合块/文件/对象存储。

从用例的角度来看：

最终，创建对象存储是为了解决爆炸性增长的非结构化数据，比结构化数据快得多。

例如，如果数据库是结构化数据，则非结构化数据将是 word doc 或 PDF。

如何在文件系统中搜索 10 亿个 PDF？（如果它甚至可以首先存储那么多）。

仅搜索 10 亿个文件的元数据的速度有多快？

对象存储目前更多地用于长期或存档、廉价和深度存储，以跟踪数据的更多细节。当搜索或挖掘非常大的数据集时，此元数据变得非常强大。有时，您甚至无需访问数据本身就可以从元数据中获得所需的信息。对象存储解决方案通常可以通过内置的地理故障转移自动复制。

问题是必须重新编写应用程序以使用对象访问方法而不是文件层次结构（从应用程序开发的角度来看这更简单）。这确实是数据存储理念的改变，从管理和使用的角度存储有关该数据的更多可操作信息。

快速示例可能是 MRI 扫描图像。在文件系统上，您有所有者/创建日期，但没有太多其他内容。如果它是一个对象，则 MRI 周围的所有信息都可以与它一起存储在元数据中，例如患者姓名、MRI 中心位置、请求的医生、保险公司等。

块/文件更适合性能比保留和成本更重要的本地访问或 OTLP。

例如，您不想等待几分钟来打开 Word 文档，但您可以等待几分钟来完成数据挖掘/商业智能流程。

另一个例子是法律搜索，您必须搜索从 5 年前到现在的所有内容。使用保留策略来减少活动数据集和成本，如果不从磁带恢复，您将如何做到这一点？

对象存储是替代磁带等长期归档方法的绝佳解决方案。

为块和文件设置复制和故障转移在企业中可能会变得非常昂贵，并且通常需要非常昂贵的软件和服务。

注意：在较低级别，对象存储访问通过 RESTful API 发生，这更像是一个 Web 请求，而不是访问路径末尾的文件。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-04-26T22:56:39.717

这是一篇值得一读的好文章： [https](https://cloudian.com/blog/object-storage-vs-file-storage/) ://cloudian.com/blog/object-storage-vs-file-storage/ 引用自文章：

> 首先，对象存储克服了文件存储面临的许多限制。将文件存储视为仓库。当您第一次将一盒文件放在那里时，似乎您有足够的空间。但随着数据需求的增长，您会在不知不觉中将仓库填满。另一方面，对象存储就像仓库，只是没有屋顶。您可以无限地添加数据——没有限制。如果您主要检索较小的或单个文件，那么文件存储的性能会大放异彩，尤其是在数据量相对较少的情况下。但是，一旦开始缩放，您可能会开始想，“我将如何找到我需要的文件？” 在这种情况下，您可以将对象存储视为代客泊车，而文件存储更像是自助泊车（是的，另一个类比，但请耐心等待！）。当你把你的车开进一个小地方时，你就知道你的车在哪里。然而，想象一下那块土地要大一千倍——找到你的车会更难，对吧？因为对象存储具有可自定义的元数据，并且所有对象都存在于平面地址空间中，所以这类似于将您的钥匙交给代客。您的汽车将存放在某个地方，当您需要时，代客泊车会为您取车。取回您的汽车可能需要更长的时间，但您不必担心四处寻找它。您的汽车将存放在某个地方，当您需要时，代客泊车会为您取车。取回您的汽车可能需要更长的时间，但您不必担心四处寻找它。您的汽车将存放在某个地方，当您需要时，代客泊车会为您取车。取回您的汽车可能需要更长的时间，但您不必担心四处寻找它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-19T22:34:44.767

我认为白皮书很好地解释了对象存储的概念。我不知道从用户应用程序使用对象存储设备（在 SCSI OSD 的意义上）的任何标准方法。

对象存储在一些大型存储产品中使用，例如[Panasas](http://www.panasas.com/)的存储设备。但是，这些设备随后会将文件系统导出给最终用户。恕我直言，T10 OSD 的想法从未真正流行起来。

与 OSD 标准相关的想法可以在[S3](http://aws.amazon.com/s3/)和[RADOS](http://ceph.com/docs/master/rados/)等云存储系统中找到。

# javascript - 将 django 与 ajax 相结合——在不刷新整个页面的情况下更改表条目

> ID：14925798
> 
> 赞同：0
> 
> 时间：2013-02-17T20:38:07.483
> 
> 标签：javascript, jquery, ajax, django, django-templates

目前，我有一个显示查询结果的巨型表。我根据条目的“类型”显示条目的背景颜色。我还为用户添加了两个链接来更改条目的类型，如果他们愿意的话。

下面是非常简单的模板代码。可以看到用户可以通过访问`/changetype/`url来改变entry的类型。更改类型后，我将用户重定向回原始页面，并使用新类型（当然还有不同的背景颜色）。用户也可以删除该条目

```
<table>
    {% for entry in entries %}
            {% if entry.type == 1 %}
                <tr bgcolor= '#007f7f'>
            {% elif entry.type == -1 %}
                <tr bgcolor= '#f5cbe1'>    
            {% endif %}
                <td width="90 pixels">{{ entry.field1 }}</td>  
                <td width="60 pixels">{{ entry.field2 }}</td>
                <td>
                    <a href="/changetype/?pk={{entry.pk}}&newtype=1">newtype1</a>
                    <a href="/changetype?pk={{entry.pk}}&newtype=-1">newtype2</a>
                    <a href="/changetype?pk={{entry.pk}}&action=delete">delete</a>
                <td>
</table> 
```

烦人的问题是，当类型改变时，浏览器必须刷新整个页面以反映背景颜色的变化。

我想将此与 ajax 结合使用，因此无需刷新整个页面即可反映更改。

听说dajax是django和ajax结合的最好的框架之一。我想知道如何在 dajax 中实现这一点？我在ajax方面经验很少（而且我也认为django比ajax更容易维护），所以我想写尽可能少的ajax...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:06:38.677

我不了解 dajax，但以下是如何使用 jquery 执行此操作的示例。您不需要更改 django 视图（尽管您可能应该）。在对表进行更改之前，ajax 从 django 视图中检查 http 200。

```
$('document').ready(function() { 
    $('td a').click(function(e) {
        e.preventDefault()
        var href = $(this).attr('href');
        var tableRow = $(this).parents('tr');
        var action = $(this).html();
        $.ajax({
            url: href,
            success: function() {
                  if (action == 'newtype1') {
                      tableRow.attr('bgcolor', '#007f7f');
                  } else if (action == 'newtype2') {
                      tableRow.attr('bgcolor', '#f5cbe1');
                  } else if (action == 'delete') {
                      tableRow.remove();
            },
        )};
    }
} 
```

您可以将此代码添加到`<head>`您的页面。

1.  代码等待页面完全加载（这就是`ready()`函数）。
2.  它将点击事件添加到表格单元格 ( `$('td a').click()`) 中的每个锚标记。
3.  事件的默认动作是停止（即我们不点击链接打开新页面）
4.  然后对锚标记的 href 进行 ajax 调用。
5.  当收到带有 200 状态码的 http 响应时，根据锚点中文本的值更新该行（即`success:`回调）

# c - 在文件范围错误中可变修改“variable_name”？

> ID：14925803
> 
> 赞同：2
> 
> 时间：2013-02-17T20:38:33.260
> 
> 标签：c, struct, compiler-errors

C 新手。编译时出现以下错误：

```
error: variably modified 'header' at file scope
error: variably modified 'sequence' at file scope 
```

代码：

```
struct list{
  char header[list_header_size];
  char sequence[list_sequence_size];
  struct list *next;
}; 
```

我认为这个错误意味着编译器需要从一开始就知道这些变量是什么。因此，我将调用结构体的 main() 移到了程序的末尾。我也尝试在程序开始时声明变量，但我不确定我是否正确地这样做了。我试过 `char header;` 了 `char header[];`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:42:59.653

你是对的，编译器需要知道结构成员的类型。它需要知道类型的一个原因是它可以计算大小。但是，在您的情况下，它无法知道大小，因为在您的结构中，您已经定义了两个不是恒定大小的数组。因此，编译器不知道结构的总大小，这违背了了解类型的目的。

最接近您想要的是`char`用两个指针替换两个数组`char`并动态分配它们将指向的内存。

# xml - 如何正确使用 XSD Duration？

> ID：14925805
> 
> 赞同：1
> 
> 时间：2013-02-17T20:38:38.033
> 
> 标签：xml, xsd

我试图在我的 XML 中存储一个时间间隔，该时间间隔由我的 XSD 定义为我的 XSD 文件中的持续时间。我不知道如何使用它，以下是我正在尝试的：

```
<duration>PT5H30M</duration> 
```

这等于 5 小时 30 分钟。我在想，当 XSLT 文件将 XML 转换为 HTML 时，它会将持续时间转换为时间格式吗？

应该这样使用吗？：

```
<duration duration="PT5H30M"></duration> 
```

这是我在 XSLT 文件中获得持续时间的地方：

```
<tr>
<td><xsl:attribute name="class">lside</xsl:attribute>Duration</td>
<td colspan="2"><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/duration"/></td>
</tr> 
```

任何建议都将不胜感激，XSD 文档根本没有帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:54:48.400

在没有看到您的架构的情况下，我不知道是否（或两者，或两者都不是）

```
<duration>PT5H30M</duration> 
```

和

```
<duration duration="PT5H30M"></duration> 
```

是有效的实例，但前者似乎更有可能。

但是，我根据第二种形式提供了我的答案，这就是我认为问题在我回答时的样子——它随后被编辑过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T21:48:34.043

好吧，如果您使用 XSLT 2.0，您可以像这样轻松地将持续时间转换为时间：

```
<xsl:template match="duration">
  <xsl:value-of select="xs:dayTimeDuration(@duration) + xs:time('00:00:00')"/>
</xsl:template> 
```

但是 XSLT 处理器不会这样做，除非它是您的样式表要求的。

# javascript - JavaScript 是否有等效的方法来实现 c# 样式的自动属性而无需大量开销？

> ID：14925808
> 
> 赞同：4
> 
> 时间：2013-02-17T20:39:22.657
> 
> 标签：javascript, automatic-properties

我很好奇 JavaScript 是否有一种方法可以在更改属性时绑定函数，而不会产生巨大的开销，例如使用计时器观察所有自动属性，但无需通过函数调用来设置它们。例如，我知道您可以执行以下操作：

```
var c = new (function () {
    this.Prop = 'test';
    this.Prop_get = function (value) {
        return('Prop = ' + this.Prop);
    };
    this.Prop_set = function (value) {
        if (value != 'no') {
            this.Prop = value;
        }
    };
})();

document.write(c.Prop_get());
document.write('<BR />');
c.Prop_set('no');
document.write(c.Prop_get());
document.write('<BR />');
c.Prop_set('yes');
document.write(c.Prop_get());
document.write('<BR />'); 
```

但我正在寻找某种方法来允许以下产生相同的结果：

```
document.write(c.Prop);
document.write('<BR />');
c.Prop = 'no';
document.write(c.Prop);
document.write('<BR />');
c.Prop = 'yes';
document.write(c.Prop);
document.write('<BR />'); 
```

除了添加计时器以观察 Prop 属性的更改或类似的高开销解决方案之外，对伪类进行任何更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T23:29:26.600

这个问题的任何解决方案都归结为你需要支持什么。

如果您需要 IE6-IE8，那么求助于计时器或可怕地滥用 DOM 来更改隐藏的 DOM 对象可能更明智，这将触发可侦听的事件等......

有一些博客谈到了他们努力使这些浏览器与某种突变感知库保持一致。
结果和注意事项各不相同。

如果您谈论的是符合 ES5 的浏览器，大多数浏览器直接在对象内部支持“get”和“set”关键字。这可能会导致比 C#更清晰的构造函数/接口，
因为构造函数可以像一个属性，当你到达界面时。`var a = {};``getX``getY``z`

说真的，这有点漂亮：

```
var person = {
    person_name : "Bob",
    get name () { return this.person_name; },
    set name (value) {
        console.log("But my parents named me " + this.person_name + "!");
    }
};

person.name;
person.name = "Mark"; 
```

但是这里有一个问题：`person.person_name`根本不是私人的。
任何人都可以突袭并改变这一点。

不要担心——实际上`get`也`set`不必对对象的属性进行操作。

```
var Person = function (name, age) {
    // we don't need to save these; closures mean they'll be remembered as arguments
    // I'm saving them as `private_*` to illustrate
    var private_name = name,
        private_age  = age;

    var public_interface = {
        get name () { return private_name; },
        set name (value) { console.log("Nope!"); },
        get age () { return private_age; },
        set age (value) { console.log("Nope!"); },
        set court_appointed_name (value) {
            console.log("If I must...");
            private_name = value;
        }
    };

    return public_interface;
};

var mark = Person("Mark", 32);
mark.name; // "Mark";
mark.name = "Bubba"; // log: "Nope!";
mark.name; // "Mark";
mark.court_appointed_name = "Jim-Bob"; // log: "If I must..."
mark.name; // "Jim-Bob" 
```

您还可以使用 auth-tokens 等强制分配传递对象。

```
mark.name = {
    value : "Jimmy Hoffa",
    requested_by : system.user.id,
    auth : system.user.auth.token
}; 
```

这一切都太棒了，不是吗？
我们为什么不这样做？

浏览器支持。

问题是这需要全新的语法：所有对象都定义为键值对。
弄乱语法意味着任何不支持的浏览器都会崩溃和烧毁，除非您将整个程序包装在 try/catch 中（这是性能自杀）。

您可以进行一次 try-catch 测试，并在页面加载时延迟加载令人敬畏的界面，而不是丑陋的变通方法，这是正确的方法，但现在您正在开发应用程序的两个版本。

或者三个版本，视情况而定（新浏览器、FF3 等中级浏览器以及 Ghetto_IE 的 hack）。

使用的中间浏览器`{}.__defineGetter__`和`{}.__defineSetter__`.
`Object.prototype.defineProperty`(/ `.defineProperties`) 是灌输 IE 兼容性希望的方法，直到您意识到旧版本的 IE 仅支持 DOM 对象的突变（附加到实际的 DOM 树），因此令人头疼。万岁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T22:29:18.303

[在遇到与 getters 和 setters 相关的链接](http://ejohn.org/blog/javascript-getters-and-setters/)后，我找到了解决方案。如果有人对此感兴趣，这是一种将属性应用于我放在一起的对象的通用方法：

```
Object.prototype.Property = function (name, fn) {
    if (fn.hasOwnProperty('get')) { this.__defineGetter__(name, fn.get); }
    else { this.__defineGetter__(name, function () { throw ('Cannot read property ' + name + '.'); }); }
    if (fn.hasOwnProperty('set')) { this.__defineSetter__(name, fn.set); }
    else { this.__defineSetter__(name, function () { throw ('Cannot write property ' + name + '.'); }); }
};

function C() {
    var _Field = 'test';
    this.Property('Field', {
        get: function () {
            return ('Field = ' + _Field);
        },
        set: function (value) {
            if (value != 'no') {
                _Field = value;
            }
        }
    });
};
C.prototype.constructor = C;

var c = new C();
document.write(c.Field);
document.write('<BR />');
c.Field = 'no';
document.write(c.Field);
document.write('<BR />');
c.Field = 'yes';
document.write(c.Field);
document.write('<BR />'); 
```

编辑：一个 JQuery 友好的 Object.prototype.Property 函数，如上：

```
Object.defineProperty(Object.prototype, 'Property', {
    enumerable: false,
    value: function (name, fn) {
        if (fn.hasOwnProperty('get')) { this.__defineGetter__(name, fn.get); }
        else { this.__defineGetter__(name, function () { throw ('Cannot read property ' + name + '.'); }); }
        if (fn.hasOwnProperty('set')) { this.__defineSetter__(name, fn.set); }
        else { this.__defineSetter__(name, function () { throw ('Cannot write property ' + name + '.'); }); }
    }
}); 
```

和一个[工作的 JSFiddle](http://jsfiddle.net/CoryG/XvaDn/)。

# javascript - 清单版本 2 并尝试图像和打开弹出链接

> ID：14925814
> 
> 赞同：1
> 
> 时间：2013-02-17T20:39:44.710
> 
> 标签：javascript, jquery, html, google-chrome-extension

显现：

```
{
   "background": {
    "scripts": ["jquery-1.4.1.min.js"]   
   },
   "manifest_version": 2,
   "browser_action": {
      "default_icon": "icon.png",
      "default_title": "Roblox Hat Notifier",
      "default_popup": "newbackground.html"
   },
   "description": "This tells you if Roblox is online and it checks for the most recently updated hats.  It keeps a list of up to 3 items.",
   "icons": {
      "16": "16.png",
      "48": "48.png"
   },
   "name": "Roblox Hat Notifier",
   "permissions": [ "http://www.roblox.com/", "tabs", "notifications" ],
   "version": "2.0.86"
} 
```

后台脚本：

`This is the jquery script plus underneath of it is the rest of the script to run all of the code.`

弹出html：

```
<body>
    <div id="Main">
        <div class="Column">
            <a id="link1" class="linkc" onClick="gotoHat1(1)">
                <img id="img1" class="specimg" src="http://t7ak.roblox.com/585fcc1ac09e8dd42c50fb4874210283" />
                <span id="t1" class="TextEffect">Woodland Hooded Disguise</span>
            </a>
        </div>
        <div class="Column">
            <a id="link2" class="linkc" onClick="gotoHat2(2)">
                <img id="img2" class="specimg" src="http://t7ak.roblox.com/585fcc1ac09e8dd42c50fb4874210283" />
                <span id="t2" class="TextEffect">BlARG</span>
            </a>
        </div>
        <div class="Column">
            <a id="link3" class="linkc" onClick="gotoHat3(3)" >
                <img id="img3" class="specimg" src="http://t7ak.roblox.com/585fcc1ac09e8dd42c50fb4874210283" />
                <span id="t3" class="TextEffect">BlARG</span>
            </a>
        </div>
        <div class="Box">
            <center><h2 class="tt">Most Recently Updated Hat</h2></center>
            <center><h4 id="t4" class="tt">BLARG<h4>
            <img id="bigimg" class="bigimg" src="http://t7ak.roblox.com/585fcc1ac09e8dd42c50fb4874210283" /></center>
            <center><button value="EPIC" type="button" class="specbut" onClick="gotoHat(4)">Go To Most Recently Updated Hat</button></center>
            <center><h3 style="color:white;">Roblox Hat and Gear Notifier</h3>
            <b style="color:white;">Status: Alpha (No Public Version Available)</b></center>
            <center><button value="troll" type="button" class="specbut" onClick="BlogLink()"><b style="font-weight:bolder;"><i>Donate</i></b></button></center>
        </div>
    </div>
    <script>
        document.getElementById("t1").innerHTML = localStorage['LatestHatTitle1'];
        document.getElementById("img1").src = localStorage['LatestHatPic1'];
        document.getElementById("link1").href = localStorage['LatestHatLink1'];

        document.getElementById("t2").innerHTML = localStorage['LatestHatTitle2'];
        document.getElementById("img2").src = localStorage['LatestHatPic2'];
        document.getElementById("link2").href = localStorage['LatestHatLink2'];

        document.getElementById("t3").innerHTML = localStorage['LatestHatTitle3'];
        document.getElementById("img3").src = localStorage['LatestHatPic3'];
        document.getElementById("link3").href = localStorage['LatestHatLink3'];

        document.getElementById("t4").innerHTML = localStorage['LatestHatTitle'];
        document.getElementById("bigimg").src = localStorage['LatestHatPic'];
    </script>
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-28313791-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>
</body> 
```

我完全知道我不能在最新的清单安全更新中使用脚本，但我来找你们看看我们如何能找到解决这个问题的方法。您可以看到我正在尝试更新图像，而且我还有可以打开其他窗口的按钮。有谁知道这样做的方法？

# magento - Magento：将产品添加到购物车后减少库存

> ID：14925816
> 
> 赞同：1
> 
> 时间：2013-02-17T20:39:51.200
> 
> 标签：magento

我想请你帮忙解决一个问题。我需要知道如何减少库存，而不是在下订单后而是在产品添加到购物车后。我该怎么做这个编程？有人有想法吗？是的，我知道这是不推荐的，这很疯狂，但是我正在开发一个在线商店，客户（店主）向我的老板提出了这个要求，我必须这样做，简单地说。拜托，有人可以帮我解决这个该死的想法吗？

万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:02:00.203

即使我强烈不建议这样做。这里有一些建议。

1°) 创建您自己的模块，并在 add_to_cart_after 上使用事件处理程序。

当您成功将商品添加到购物车时会触发此事件。

2°) 然后看`Mage_CatalogInventory_Model_Observer`:`subtractQuoteInventory`函数，看看如何减少库存。

3°）现在您必须通过重写来替换此观察器，以避免在下订单时再次从库存中删除物品。

# php - 为什么我的 CSS 没有按应有的方式改变？

> ID：14925826
> 
> 赞同：3
> 
> 时间：2013-02-17T20:40:48.670
> 
> 标签：php, html, css

我将以下 HTML 与一些 PHP 结合使用：

```
echo "<a href='" . $_SERVER["PHP_SELF"] . "?guess=" . $value . "' class='already-guessed'>" . $value . "</a>\n"; 
```

如果它已经被猜到，它会应用一个特殊的类，正如类所暗示的那样。如果没有猜到，我有这个：

```
echo "<a href='" . $_SERVER["PHP_SELF"] . "?guess=" . $value . "'>" . $value . "</a>\n"; 
```

这是相关的CSS：

```
.letters a {
    display: inline-block;
    width: 40px;
    height: 40px;
    margin: 0 3px 6px 0;

    background: #5ac9ff;
    color: #fff;
    line-height: 2.5em;
    text-align: center;
    text-decoration: none;
}

    .letters a:nth-child(10n) {
        margin: 0 0 8px 0;
    }

    .letters a:hover {
        background: #54bff3;
    }

    .letters a:active {
        background: #4fb4e4;
    }

.already-guessed {
    background: green;
} 
```

所以我只是让它检测所有锚点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:42:26.587

锚点的选择器具有优先权。更改`.already-guessed`类的代码如下：

```
.already-guessed {
    background: green !important;
} 
```

或者，如果您愿意，可以更新选择器：

```
.letters a.already-guessed {
    background: green;
} 
```

# mysql - 将 mySQL 备份文件还原到不同的服务器（使用不同的名称）

> ID：14925831
> 
> 赞同：0
> 
> 时间：2013-02-17T20:41:29.320
> 
> 标签：mysql

我备份了从一台主机获取的所有 SQL 文件。现在由于 FTP/CPANEL 的帐户名称不同，SQL 文件的前缀包含此名称。现在将这些与从旧服务器创建的数据库相关的所有相应用户名和密码恢复到另一台服务器是可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:49:54.033

这是不可能的。您应该将 cpanel zip 提供给您的提供商，以便通过新服务器上的 cPanel/WHM 将其导入，然后您将拥有与旧主机上相同的用户/文件。

# java - 在主视图模板的头部创建表单

> ID：14925833
> 
> 赞同：1
> 
> 时间：2013-02-17T20:41:51.513
> 
> 标签：java, playframework-2.1

我有一个包含头部、菜单、页脚的视图模板（我将把这个文件称为主模板）。该模板被其他具有某些内容的页面调用。我决定将登录表单添加到菜单中。我的第一个想法是从视图文件中传递表单，该表单通过控制器通过参数呈现到主模板中，但我不需要每次在每个页面上都显示登录表单，所以这不是我的解决方案。

我有两个解决方案，但我都有一个问题：

1.  我在主模板中创建了表单，带有表单和输入助手以及纯 html 按钮

    ```
    @helper.form(routes.Application.loginPosted,'class -> "navbar-form pull-right"){                                
    <input class="span2" type="text" placeholder="email" name="email">
    <input class="span2" type="password" placeholder="passwd" name="passwd">
    <button type="submit" class="btn btn-primary">Login</button>
    } 
    ```

    我在控制器中将它作为 DynamicForm 处理，并希望它转换为代表模型的表单以便于验证

    ```
    DynamicForm requestData = form().bindFromRequest();
    Form<User_Login> loginFormFilled = form(User_Login.class);
    loginFormFilled.fill(new User_Login(requestData.get("email"), requestData.get("passwd"))); 
    ```

    但是 loginFormFilled.get().email （和 passwd 也是）总是空白，我不明白为什么。

2.  我想在主模板中创建表单作为模型表示，但我无法编写将被编译的代码（logForm 有问题我知道它不正确但我尝试了很多组合但我无法创建有效的表单）

    ```
    @val logForm = new Form[User_Login]
    @helper.form(routes.Application.loginPosted,'class -> "navbar-form pull-right"){
    @helper.inputText(
            logForm("email")
    )
    @helper.inputPassword(
            logForm("passwd")
    )
    <button type="submit" class="btn btn-primary">Login</button>
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:14:46.703

您不需要使用`DynamicForm`绑定来填充`Form<User_Login>`您可以立即执行此操作（这可能是您的解决方案）：

```
public static Result loginApproach(){
    Form<User_Login> loginForm = form(User_Login.class).bindFromRequest();

    String formToString =
            loginForm.get().email + " with pass: " + loginForm.get().passwd;

    return ok(formToString);
} 
```

# bash - bash脚本没有捕获标准输出，只是标准错误

> ID：14925836
> 
> 赞同：1
> 
> 时间：2013-02-17T20:41:56.443
> 
> 标签：bash

我有以下脚本（我们称之为 move_site.sh）将网站目录结构复制到另一台服务器

```
#!/bin/bash
scp -r /usr/local/apache2/htdocs/$1 http@$2:/local/htdocs 1>$1$2.out 2>&1 
```

所以从命令行调用它，我将网站目录名称和目标服务器传递给它：

```
nohup ./move_site.sh site1 server1 & 
```

但是，在名为 site1server1.out 的结果中，只有 stderr 消息（如果有）。

有人可以告诉我如何获取复制的文件和目录名称，包含在输出文件中，以便我有某种记录吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:24:56.547

快速尝试：也许是因为当一切顺利时，`scp`没有将任何内容打印到标准输出（？）。

试一试：在脚本之外运行你的 scp 命令，很可能你在标准输出上没有任何东西。（什么都不重定向到 $1$2.out，它仍然什么都不是 :)）

我认为 scp 不可能，但使用 rsync 您可以跟踪已传输到标准输出的内容。所以改变应该`scp -r`是`rsync -r -v -e`诀窍。（至少如果你可以选择 rsync 而不是 scp）。

# android - 从插件调用代码时出现问题：“org.eclipse.jface” - 无法创建运行配置

> ID：14925837
> 
> 赞同：3
> 
> 时间：2013-02-17T20:41:55.997
> 
> 标签：android, eclipse

> 我正在使用 Eclipse IDE 开发 Android 开发工具，但无法正确运行我的应用程序。

当我调用运行配置时，我检索到以下空指针：

> 会话数据 - eclipse.buildId=v21.0.1-543035 java.version=1.7.0_13 java.vendor=Oracle Corporation BootLoader 常量：OS=win32, ARCH=x86, WS=win32, NL=en_US 框架参数：-product com. android.ide.eclipse.adt.package.product 命令行参数：-os win32 -ws win32 -arch x86 -product com.android.ide.eclipse。> adt.package.product-clean

```
java.lang.NullPointerException
at                 com.android.ide.eclipse.adt.internal.launch.EmulatorConfigTab.createControl(EmulatorConfigTab.java:245)
at org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationTabGroupViewer.showInstanceTabsFor(LaunchConfigurationTabGroupViewer.java:806)
at org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationTabGroupViewer.displayInstanceTabs(LaunchConfigurationTabGroupViewer.java:737)
at org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationTabGroupViewer$8.run(LaunchConfigurationTabGroupViewer.java:624)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationTabGroupViewer.inputChanged(LaunchConfigurationTabGroupViewer.java:641)
at org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationTabGroupViewer.setInput0(LaunchConfigurationTabGroupViewer.java:603)
at org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationTabGroupViewer.setInput(LaunchConfigurationTabGroupViewer.java:579)
at org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationsDialog.handleLaunchConfigurationSelectionChanged(LaunchConfigurationsDialog.java:941)
at org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationsDialog$3.selectionChanged(LaunchConfigurationsDialog.java:560)
at org.eclipse.jface.viewers.StructuredViewer$3.run(StructuredViewer.java:888)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
at org.eclipse.jface.viewers.StructuredViewer.firePostSelectionChanged(StructuredViewer.java:886)
at org.eclipse.jface.viewers.StructuredViewer.handlePostSelect(StructuredViewer.java:1226)
at org.eclipse.jface.viewers.StructuredViewer$5.widgetSelected(StructuredViewer.java:1251)
at org.eclipse.jface.util.OpenStrategy.firePostSelectionEvent(OpenStrategy.java:262)
at org.eclipse.jface.util.OpenStrategy.access$5(OpenStrategy.java:256)
at org.eclipse.jface.util.OpenStrategy$3.run(OpenStrategy.java:433)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4144)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761)
at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
at org.eclipse.jface.window.Window.open(Window.java:801)
at org.eclipse.debug.internal.ui.launchConfigurations.LaunchConfigurationsDialog.open(LaunchConfigurationsDialog.java:1132)
at org.eclipse.debug.ui.DebugUITools$2.run(DebugUITools.java:600)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.debug.ui.DebugUITools.openLaunchConfigurationDialogOnGroup(DebugUITools.java:608)
at org.eclipse.debug.ui.DebugUITools.openLaunchConfigurationDialogOnGroup(DebugUITools.java:542)
at org.eclipse.debug.ui.actions.OpenLaunchDialogAction.run(OpenLaunchDialogAction.java:81)
at org.eclipse.debug.ui.actions.OpenLaunchDialogAction.runWithEvent(OpenLaunchDialogAction.java:89)
at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:241)
at org.eclipse.ui.internal.WWinPluginAction.runWithEvent(WWinPluginAction.java:229)
at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:48:18.533

我得到了类似的错误。检查你的eclipse是否有以下情况：

转到：Window > Preferences > Android，SDK 列表为空

如果是，我做了以下技巧来解决它：

*   停止日食
*   打开文件：打开文件.metadata/.plugins/org.eclipse.core.runtime/.settings/com.android.ide.eclipse.adt.prefs
*   清理属性值：com.android.ide.eclipse.adt.sdk（当前包含您的 SDK 路径）
*   开始日食
*   转到：Window > Preferences > Android，再次输入 SDK 路径 > 单击 Apply。应重新加载 SDK 列表。

一切都应该恢复正常

# playframework-2.0 - 用于 Play 框架 2.0.4 和 2.1 的新 Relic Monitoring

> ID：14925842
> 
> 赞同：3
> 
> 时间：2013-02-17T20:42:34.997
> 
> 标签：playframework-2.0, newrelic

我尝试为基于 Play 2.X 构建的应用搜索监控工具。但是，我找到的大多数答案都指向这个线程。

[https://groups.google.com/forum/#!topic/play-framework/AE1INL1iqrs](https://groups.google.com/forum/#!topic/play-framework/AE1INL1iqrs)

还有另一个 SO 评论提到 New Relic 目前不支持 Play 2.X。

[https://stackoverflow.com/a/12735426/772481](https://stackoverflow.com/a/12735426/772481)

New Relic 文档仅提及 Play 1.2.4。

[https://newrelic.com/docs/java/new-relic-for-java](https://newrelic.com/docs/java/new-relic-for-java)

Play 2.X 上的 New Relic 有什么解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-08T07:15:51.327

我们在 Play 2.1/Scala 2.10 中使用 New Relic。在 New Relic 2.19.0 中引入了 Play/Scala/Netty 支持。此版本存在一些稳定性问题（内存消耗、检测期间的性能问题）。与此同时，这些问题已得到修复（New Relic Agent 2.20）。

请参阅我们的博客文章了解如何设置。 [http://techblog.nezasa.com/2013/08/performance-monitoring-of-nezasa-with.html](http://techblog.nezasa.com/2013/08/performance-monitoring-of-nezasa-with.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-31T12:35:16.323

New relic 刚刚更新了他们的 java 代理以使用 Netty 服务器并播放 2 框架： [https ://newrelic.com/docs/java/new-relic-for-java](https://newrelic.com/docs/java/new-relic-for-java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T22:52:23.077

不幸的是，我认为目前没有从 Play 2.x 应用程序中获取 New Relic 统计数据的好方法。

# javascript - __proto__ 为什么以及如何记住构造函数未定义原型成员的旧属性？

> ID：14925845
> 
> 赞同：2
> 
> 时间：2013-02-17T20:42:46.173
> 
> 标签：javascript, prototype

快速说明：请不要在答案中解释 javascript 继承的基础知识。

这是一个简单的构造函数，它的原型成员附加了一些属性。

```
function Foo() { 
    this.relationship = "Love"; 
};

Foo.prototype.name = "Natalie";
Foo.prototype.age = 22;
Foo.prototype.country = "France"; 
```

现在我们用 Foo 创建新对象并测试一些基础知识。一切都很酷。

```
var girl = new Foo();

girl.hasOwnProperty("relationship"); //=> true
girl.hasOwnProperty("name");         //=> false

girl.relationship;  //=> "Love"
girl.name;          //=> "Natalie", this comes from Foo.prototype

girl.__proto__ === Foo.prototype;            //=> true
girl.__proto__.name === Foo.prototype.name;  //=> true
girl.name === Foo.prototype.name;            //=> true 
```

如果我们更新 Foo.prototype.name 属性的值，girl.name 应该会指向新值。

```
Foo.prototype.name = "Lucia";
girl.name;  //=> "Lucia", this comes from Foo.prototype 
```

当我们更改 Foo.prototype 并将其设为 null、未定义、空对象等时，会发生神秘的事情。

```
Foo.prototype = null; 
```

如果我们的**女孩**对象有一个隐藏的`__ proto__`(ECMA [[Prototype]]) 链接到 Foo.prototype，那么在使 Foo.prototype为*null之后，***女孩**应该没有机会获得*name*属性，但确实如此！

```
girl.name;     //=> "Lucia"
girl.age;      //=> 22
girl.country;  //=> "France" 
```

现在，如果我们此时使用 Foo 创建另一个对象。它没有*name*、*age*和*country*，因为当然 Foo.prototype 是空的。

```
var new_girl = new Foo();
new_girl.name;     //=> undefined
new_girl.age;      //=> undefined
new_girl.country;  //=> undefined 
```

所以我的问题是，**在我们将 Foo.prototype 分配给*****null*****之后，之前的对象（*女孩*）和他的隐藏链接如何记住这些属性？`__ proto__`**

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:54:06.010

一点都不神秘，也和传承无关。
它与对象指针/引用有关。

```
var a = { name : "Bob", age : 32 };
var b = a;

b.name; // "Bob";
a.name = "Jim";
b.name; // "Jim";
a = null;
b.name; // "Jim"; 
```

发生了什么？

`a`并`b`获得指向同一个对象的指针。
当您更改*object 的属性时*`a`，通过引用一个或另一个（更改它们 on或 on都没有关系`b`），另一个引用也会看到更改。

您并没有创建具有相同属性和值的新对象，您只是给它们两个相同对象的地址，并且每次您询问它们时它们都会查找属性。

然后你重新分配`a`.

您没有更改对象，而是`a`将地址提供给其他地方。
`b`地址还是有的。

所以现在这样想：

```
function Foo () { }
Foo.prototype = { name : "Bob", age : 32 };

var a = new Foo();
var b = new Foo();

a.__proto__ === Foo.prototype;
b.__proto__ === Foo.prototype;

Foo.prototype.age = 35;

a.age; // 35
b.age; // 35

// now we're replacing the `.prototype` reference with a brand new object
Foo.prototype = { name : "Sally", age : 16 };

a.__proto__ !== Foo.prototype;
b.__proto__ !== Foo.prototype;

a.name; // "Bob"
b.age;  // 35 
```

构造函数在后台所做的所有事情都是说：

```
this.constructor = arguments.callee;
this.__proto__   = this.constructor.prototype; 
```

因此，当您更改两者引用的对象的属性时，对任一对象的`this.constructor.prototype`查找`this.__proto__`都会找到新值。
但是从一个中删除一个引用不会删除另一个的对象。

如果这是您想要的结果，那么您需要删除原型的每个属性（无论您从哪里执行它 - 从函数或任何实例），然后`.prototype`通过将其设置为空对象（null 会在较小的浏览器上导致错误），因此未来的对象无法访问。*

# ruby-on-rails - Ruby on Rails 性能

> ID：14925846
> 
> 赞同：2
> 
> 时间：2013-02-17T20:42:54.567
> 
> 标签：ruby-on-rails, performance, html, rendering, jsonp

我目前正在开发 HTML5 手机游戏的后端。我们使用 JSONP 与应用程序通信（因为跨域策略）。

但是 Heroku 上的托管真的很慢，我们的平均响应时间为 900 毫秒。我已经在使用包含来加速数据库访问和生产数据库。我也在运行新的遗物来分析服务器。

大部分时间都用在 Controller 本身。Controller方法中需要800ms中的650ms。

```
Category     Segment    % Time   Avg calls
(per txn)    Avg 
time (ms)
Controller   TasksController#update  63.4    1.0     650 
```

没错，控制器正在做很多事情，但有没有可能，一些 ruby​​ 代码会花费这么多时间？或者可能是 jsonp 返回的东西？

Newrelic 告诉我，我们的用户最多等待 5 秒才能得到响应。这真的很多！

我们的 ApplicationController 如下所示：

```
# encoding: utf-8
class ApplicationController < ActionController::Base
  protect_from_forgery

  include ApplicationHelper

  include ProfilesHelper

  before_filter :authenticate, :set_locale

  after_filter :check_for_kpi

  def check_for_kpi
    if (params[:kpi])
      case params[:kpi]
        when Hash
          params[:kpi].each do |k, v|
             #all done in delayed jobs
             Kpi.delay.add(k, :value => v)
          end
        when String
          Kpi.delay.add(params[:kpi])
        when Array
          params[:kpi].each do |k|
            Kpi.delay.add(k)
          end
        else
          logger.warn("Parameters for Kpi not detected. #{params[:kpi]} ")
      end
    end
  rescue
    logger.warn("Something went wrong in the check for kpis. ")
  end

  def set_locale
    I18n.locale = params[:locale] || I18n.default_locale
  end

  def authenticate
    authkey = params[:session_key]

    @error = {}

    @profile = Profile.includes(#some more includes).find_by_authkey(authkey)
    if (@profile.nil?)
          render_json(
              {
                  :authentication_error => true
              }
          )
    else
      if (params[:version]!= @profile.version)
        @profile.delay.update_attributes(:version => params[:version])
      end
    end

  end

  protected

  def render_json(json, profile = nil)
    profile ||= @profile
    respond_to do |format|
      format.js {
        render :js => build_result_string(json, profile, params[:controller], params[:callback])
      }
      format.json {
        render :json => json.merge(profile.try(:getSessionData))
      }
    end
  end
end 
```

您对如何提高性能有任何想法吗？

谢谢！

# python - Imgur API 未更改现有图像的描述

> ID：14925849
> 
> 赞同：5
> 
> 时间：2013-02-17T20:43:05.567
> 
> 标签：python, imgur

我在 Python 2.7 中使用请求来尝试使用 API 更改先前上传的图像的描述。根据[Imgur 的 API 手册](https://api.imgur.com/endpoints/image#image-update)，我使用了这个：

```
r = requests.post('https://api.imgur.com/3/image/'+submission['id'], \
               headers={'Authorization':'Bearer '+access_token}, \
               data={'description':'blahblahblah'}, verify=False) 
```

我得到的回报是：

```
{u'status': 200, u'data': False, u'success': True} 
```

所以，据我所见，OAUTH 工作得很好，但 API 本身返回“False”，并且描述没有改变。我在任何地方都找不到关于这个特定端点的任何进一步的指导。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T17:45:49.637

我遇到了同样的问题（使用 perl），在尝试通过 imgur API v3 更改标题/描述时收到“成功”消息，尽管实际上没有发生任何更改，最后发现了问题：我必须手动设置“内容-Type: application/json" 待处理请求的标头。不这样做会返回 200/success 消息，但没有进行实际更改。在更正之前，同样的问题阻止了我使用新 API 上传图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T11:30:32.877

也许尝试 requests.put 而不是 requests.post （您想修改现有资源，而不是创建一个）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-11T14:26:49.163

我知道这是个老问题，但也许它会对某人有所帮助。对我来说它有效。

添加标题：

```
'Content-Type': 'application/json' 
```

并在`requests.post`使用中`json`代替`data`

```
r = requests.post(url,
     headers={'Authorization':'Bearer '+access_token, 'Content-Type': 'application/json'},
     json={'description':'blahblahblah'}, verify=False) 
```

# youtube-api - 如何使用 Youtube Data API V3 使用 chanel 的用户名获取频道上传？

> ID：14925851
> 
> 赞同：3
> 
> 时间：2013-02-17T20:43:10.683
> 
> 标签：youtube-api

我已经使用上一个问题探索了这个主题的大部分内容，[如何使用新的 YouTube 数据 API (V3) 获取某个频道的上传视频列表？](https://stackoverflow.com/q/13504899/1402315)，但我想要一些基于给出的答案的细节。

是否可以使用频道的用户名而不调用搜索查询来获取频道 ID？我有一个 https 请求，可以获得如下所示的搜索列表，但是当我知道确切的频道用户名时，我宁愿不浪费 API 配额。

```
https://www.googleapis.com/youtube/v3/search?q={channel_username}&key={my_api_key}&part=snippet 
```

我的 hack 只是从频道中获取一个 videoid 并从那里提取一个上传者 ID，但它并不优雅，如果上传被删除，它将无法工作。

此外，一旦我努力获取上传密钥，我怎样才能获得一个显示所有上传的 json 而不仅仅是 25 个列表？如果我必须递归调用上传页面，我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T02:27:58.163

I think that to get a channel, using the channel's username, the only option is to use the search, and the best strategy to minimize the use of quota is to use a cache, or save the channel ID.

For a full list of videos uploaded, as JSON, you can use contentDetails.relatedPlaylists.uploads (the ID of the playlist that contains the channel's uploaded videos) and retrieve the PlaylistItems, using pages with 50 items per page, and using the nextPageToken value to retrieve each page in the result set.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T23:31:40.397

我找到了答案。正确的做法是使用搜索查询站点，但直接说明要响应的列表类型，实际上只搜索频道。这是由

```
https://www.googleapis.com/youtube/v3/search?q={search_term}&key={API_key}&type=channel&part=snippet 
```

如您所见，类型是频道。通过使用确切频道用户名的搜索词进行搜索，您将获得一个返回列表，其中第一个 item 对象作为频道，您可以从那里存储频道 ID 和上传 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-09T15:21:30.753

要更新此答案，您需要识别“配额限制”。
因此，使用“ **search?q=[search]** ”将导致使用 100 个配额。
最好使用“ **channels?part=id&forUsername={username]** ”，因为只有 1 个配额。

然后你可以使用“ **channels?part=id,snippet ....... &id={channel_ID]** ”来获取你所有的数据

# jquery - JQuery UI 菜单右浮动图标导致 Internet Explorer 中的新行

> ID：14925852
> 
> 赞同：2
> 
> 时间：2013-02-17T20:43:25.690
> 
> 标签：jquery, html, css, jquery-ui, internet-explorer

我的 JQuery UI 菜单很容易构建，如下所示：

```
<ul id="menu">
  <li><a href="..."><img src="icon.png" /></a>
  <ul>
    <li><a href="..."><img src="anotherIcon.png" /></a>
    <li><a href="..."><img src="thridIcon.png" /></a>
  </ul>
</ul> 
```

菜单是用脚本创建的：

```
$(function() {
  $("#menu").menu();
}); 
```

它应该是什么样子（在 Chrome 和 Firefox 中的作用）：

![正确显示的菜单](../Images/0c58ffac11de78a746463ff6760fc053.png)

它在 Internet Explorer 中的外观：

![显示错误的菜单](../Images/6d740f69bbab7a530a7408412f881c31.png)

我相信它与浮动右侧菜单图标有关，但我不知道如何解决它。如果有人有解决方案或至少知道如何处理，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T23:28:03.557

好的，自己找到了解决方案：

HTML：

```
<li>
  <a href="...">
    <img src="icon.png" />
    <div class="clear"></div>
  </a> 
```

CSS：

```
li a img {
  float: left;
}

.clear {
  clear: both;
} 
```

CSS 是对 JQuery UI 提供的 CSS 的补充。

# php - Mysql查询无法从查询中删除单词

> ID：14925853
> 
> 赞同：2
> 
> 时间：2013-02-17T20:43:25.630
> 
> 标签：php, sql, word

```
$terms = $db->GetAll("SELECT `TITLE`, `HITS` FROM `{$tables['category']['name']}` WHERE `STATUS` = '2' && `TITLE` NOT LIKE '%and%' ORDER BY `HITS` DESC LIMIT 0, $limit"); 
```

试图从 MYSQL 查询中删除单词“and”。

在我的数据库中，我有：商业和经济体育和娱乐

我希望我的查询显示商务、经济、体育、娱乐，但不包含“和”一词。

该查询不完全按照我的想法工作，而是删除了其中包含“and”一词的任何 TITLE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:55:22.933

`$terms = $db->GetAll("SELECT REPLACE(`TITLE`, 'and', '') AS `TITLE`, `HITS` FROM `{$tables['category']['name']}` WHERE `STATUS` = '2' ORDER BY `HITS` DESC LIMIT 0, $limit");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:00:37.587

```
SELECT replace(title,'and',','), hits
FROM {$tables['category']['name']}` 
WHERE STATUS = '2'
ORDER BY hits DESC
LIMIT 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T21:03:40.780

```
$terms = $db->GetAll("SELECT replace(`TITLE`, 'and', ',') as title `HITS` FROM `{$tables['category']['name']}` WHERE `STATUS` = '2' ORDER BY `HITS` DESC LIMIT 0, $limit"); 
```

未经测试，但应该可以工作。此处记录了[替换功能](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)。

# php - 处理太多mysql连接的最佳实践

> ID：14925855
> 
> 赞同：3
> 
> 时间：2013-02-17T20:43:57.693
> 
> 标签：php, mysql, web-services, http

```
<?php
// Connect to mysql server
$link = mysql_connect(HOST, USER, PASSWORD);
if(!$link) {
    die('Could not connect to server: ' . mysql_error());
}

// Select database
$db = mysql_select_db(DATABASE);
if(!$db) {
    die('Cannot use the database');
}
mysql_set_charset('charset=utf8', $link); 

//code

?> 
```

我是 php 初学者。我编写了一个简单的 php HTTP API，它从数据库中读取一些数据并返回正文。该 API 被许多应用程序**异步**访问。当我们每秒增加超过 200 个用户时，我会收到以下警告

```
PHP Warning:  mysql_connect() [<a href='function.mysql-connect'>function.mysql-connect</a>]: Too many connections in /home/ws/public_html/include/get_details.php on line 3 
```

我想知道它的最佳解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:28:08.840

首先，您可以使用[mysqltuner](https://github.com/rackerhacker/MySQLTuner-perl)检查您的数据库状态。其他解决方案，使用 redis 或 memcache 来减少连接。如果您将会话存储在数据库中，请尝试更改并使用 redis。[phpredis](https://github.com/nicolasff/phpredis)

# ruby-on-rails - 通过提供 id 在我的模型中获取属性

> ID：14925856
> 
> 赞同：-1
> 
> 时间：2013-02-17T20:44:02.540
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我如何在模型中获取返回特定模型值的方法。

代码如下

示范文章

```
def article_title(id)
    art = Article.find_by_id(id)
    return art.title
end 
```

视图如下

```
<% arttitle = Article.article_title(id) %> 
```

这不起作用，但我不确定该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:58:52.060

您已经定义了一个实例方法，如果您在文章实例上调用它，它实际上应该可以工作（但这没有多大意义，设计方面）。将其定义为`self.article_title(id)`使其成为类方法。

此外，在视图中定义变量和执行查找通常不是一个好习惯。视图是显示信息的模板——仅此而已。您的业​​务逻辑以不可预测的方式在您的应用程序中传播得越多，未来开发和更改的难度就越大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:58:41.700

该方法应定义为类方法，带有`self`关键字

```
def self.article_title(id)
    Article.find(id).title
end 
```

# ios - aes解密\0字符ios

> ID：14925860
> 
> 赞同：0
> 
> 时间：2013-02-17T20:44:56.740
> 
> 标签：ios, encryption, aes

我有一个问题..当我解密从我的 php 页面返回的数据时，如果字符串的长度小于 16，则 char \0 将附加到字符串。原始字符串是：**100000065912248** 我用这个函数解密加密的字符串：

```
#define FBENCRYPT_ALGORITHM     kCCAlgorithmAES128
#define FBENCRYPT_BLOCK_SIZE    kCCBlockSizeAES128
#define FBENCRYPT_KEY_SIZE      kCCKeySizeAES256

+ (NSData*)decryptData:(NSData*)data key:(NSData*)key iv:(NSData*)iv;
{
    NSData* result = nil;

    // setup key
    unsigned char cKey[FBENCRYPT_KEY_SIZE];
    bzero(cKey, sizeof(cKey));
    [key getBytes:cKey length:FBENCRYPT_KEY_SIZE];

    // setup iv
    char cIv[FBENCRYPT_BLOCK_SIZE];
    bzero(cIv, FBENCRYPT_BLOCK_SIZE);
    if (iv) {
        [iv getBytes:cIv length:FBENCRYPT_BLOCK_SIZE];
    }

    // setup output buffer
    size_t bufferSize = [data length] + FBENCRYPT_BLOCK_SIZE;
    void *buffer = malloc(bufferSize);

    int length = [data length];

    // do decrypt
    size_t decryptedSize = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt,
                                          FBENCRYPT_ALGORITHM,
                                          0,
                                          cKey,
                                          FBENCRYPT_KEY_SIZE,
                                          cIv,
                                          [data bytes],
                                          [data length],
                                          buffer,
                                          bufferSize,
                                          &decryptedSize);

    if (cryptStatus == kCCSuccess) {
        result = [NSData dataWithBytesNoCopy:buffer length:decryptedSize];
    } else {
        free(buffer);
        NSLog(@"[ERROR] failed to decrypt| CCCryptoStatus: %d", cryptStatus);
    }

    return result;
} 
```

我向函数发送一个 nil“iv”参数，在函数中使用“cIv”之后，它包含以下内容： ![文明描述](../Images/f7f2b62dc1a22718a2fe8ac890ae756b.png)

结果是完全一样的，但是字符串的长度是 16 而不是 15（字符串：100000065912248）。事实上，最后一个字符是\0。

为什么？我该如何解决？

编辑：

PHP加密函数：

```
function encrypt($plaintext) {

    $key = 'a16byteslongkey!a16byteslongkey!';

    $base64encoded_ciphertext = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $plaintext, MCRYPT_MODE_CBC));
    $base64encoded_ciphertext = trim($base64encoded_ciphertext);

    return $base64encoded_ciphertext;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:51:08.123

AES 是一种块密码，可加密/解密长度为 128 位（16 字节）的块。因此，如果数据不是块大小，则必须添加一些填充。Apple 最受欢迎和支持的是 PKCS7。

与 PHP 的接口必须考虑填充和可能的 base64 编码。

解决方案是在 PHP 和 iOS 两侧使用相同的填充。

AES 总是在 16 个字节上运行，没有选项——所以，如果你有 15 个字节，则必须添加一个字节，即填充。据我了解（对 PHP 加密知之甚少）PHP 不会做真正的 PCKS7padding，最好自己填充。在 Wikipedia 中查找 PKCS7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:58:24.360

如果您只对字符串进行操作，您应该可以使用零填充（默认值），但如果只是出于互操作性的原因，我建议使用 PKCS#7 填充。

使用零填充，明文用`00`有价值的字节填充，但仅在需要时。这与始终部署的 PKCS#7 填充不同。解密后，您可以在解密后的*结果明文*`trim`上使用该函数。然后你应该得到原始字符串。

 *这显然不适用于二进制数据，因为它可能以函数删除的字符结尾`trim`。请注意，`trim`在 PHP 中似乎剥离了`00`字节。这不是给定的，正式`00`地不是空格，尽管许多运行时都以这种方式对待它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-12-22T10:49:45.350

您必须从解密数据中删除填充

```
function removePadding($decryptedText){
    $strPad = ord($decryptedText[strlen($decryptedText)-1]);
    $decryptedText= substr($decryptedText, 0, -$strPad);
    return $decryptedText;
} 
```*

# javascript - Javascript：调用没有eval的变量中定义的函数

> ID：14925862
> 
> 赞同：-1
> 
> 时间：2013-02-17T20:45:00.330
> 
> 标签：javascript, jquery, jquery-plugins

我正在编写一个 jQuery 插件，它钩住滚动和拖动事件，并在触发相关事件时旋转一个元素以指向另一个元素。基本上我的插件只是检测事件，计算正确的角度，并使用第三方插件相应地旋转元素。为了更好的解释，您可以查看[我的插件的演示](http://pointat.idenations.com/demo/)。

我不想强制使用某个旋转插件，所以旋转函数的名称可能会有所不同。目前我正在使用 eval 来允许自定义函数名称，但我想找到另一种方法来做到这一点。我试过谷歌搜索，但到目前为止还没有找到解决方案。

那么，有没有办法解决这个问题？旋转函数的名称存储在 settings.rotateFunction 中：

```
eval("$(this)." + settings.rotateFunction + "(angle)"); 
```

到目前为止，我已经尝试过“new Function(codeToEval)”方法，但是由于某种原因，这破坏了 $(this) 的使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T20:47:00.513

在 Javascript 中，可以使用以下两种表示法访问对象成员（属性或函数）：

*   `object.memberName`
*   `object["memberName"]`

当成员在设计时而不是在运行时未知时，第二个特别有用。这就是为什么你可以这样调用你的旋转函数：

```
$(this)[settings.rotateFunction](angle); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T20:46:51.090

使用以下语法：

```
$(this)[settings.rotateFunction](angle); 
```

# javascript - 检查所有复选框jquery

> ID：14925874
> 
> 赞同：6
> 
> 时间：2013-02-17T20:45:54.807
> 
> 标签：javascript, jquery, checkbox

为什么在我的 js 代码中可以一键`name:check_all`选中所有复选框？

**HTML：**

```
<div id="ss">
    <input type="checkbox" name="check_all">
</div>
<input type="checkbox" name="checked" class="idRow">
<input type="checkbox" name="checked" class="idRow">
<input type="checkbox" name="checked" class="idRow">
<input type="checkbox" name="checked" class="idRow">
<input type="checkbox" name="checked" class="idRow">
<input type="checkbox" name="checked" class="idRow">
<input type="checkbox" name="checked" class="idRow">
<input type="checkbox" name="checked" class="idRow"> 
```

**jQuery：**

```
$(document).on('click change','input[name="check_all"]',function() {
    var checkboxes = $('.idRow');
    if($(this).is(':checked')) {
        checkboxes.attr("checked" , true);
    } else {
        checkboxes.attr ( "checked" , false );
    }
}); 
```

**演示：http:** [//jsfiddle.net/KdaZr/](http://jsfiddle.net/KdaZr/)

**我的 jQuery 版本是 1.9。**

如何解决？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-17T20:48:36.567

使用`prop` 方法。当您的标记呈现属性成为元素的属性时，您应该使用 JavaScript 修改元素的属性。

```
$(document).on('change','input[name="check_all"]',function() {
    $('.idRow').prop("checked" , this.checked);
}); 
```

[http://jsfiddle.net/GW64e/](http://jsfiddle.net/GW64e/)

请注意，如果`input[name="check_all"]`不是动态生成的，则无需委托事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T20:48:30.200

使用`.prop`, not`.attr`来更改元素的属性。 `.attr`用于 HTML 属性。

[http://jsfiddle.net/KdaZr/1/](http://jsfiddle.net/KdaZr/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T07:03:54.860

修复如下：-

```
$(document).on('click change','input[name="check_all"]',function() {
    var checkboxes = $('.idRow');
    if($(this).is(':checked')) {
        checkboxes.each(function(){
            this.checked = true;
        });
    } else {
        checkboxes.each(function(){
            this.checked = false;
        });
    }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-06T06:05:37.567

完整的解决方案选择 || 取消选中复选框 jQuery ：

```
$(document).ready(function() {
  $("#checkedAll").change(function(){
    if(this.checked){
      $(".checkSingle").each(function(){
        this.checked=true;
      })              
    }else{
      $(".checkSingle").each(function(){
        this.checked=false;
      })              
    }
  });

  $(".checkSingle").click(function () {
    if ($(this).is(":checked")){
      var isAllChecked = 0;
      $(".checkSingle").each(function(){
        if(!this.checked)
           isAllChecked = 1;
      })              
      if(isAllChecked == 0){ $("#checkedAll").prop("checked", true); }     
    }
    else {
      $("#checkedAll").prop("checked", false);
    }
  });
}); 
```

html应该是：

选中三个复选框的单个复选框将被选中和取消选中。

```
<input type="checkbox" name="checkedAll" id="checkedAll"></input>

<input type="checkbox" name="checkAll" class="checkSingle"></input>
<input type="checkbox" name="checkAll" class="checkSingle"></input>
<input type="checkbox" name="checkAll" class="checkSingle"></input> 
```

希望这对某人有所帮助，就像对我一样。

# php - 如何从 url 获取页面的完整尺寸

> ID：14925875
> 
> 赞同：-1
> 
> 时间：2013-02-17T20:46:14.147
> 
> 标签：php, javascript

是否有可能（在 php 或 javascript 中）从 url 的页面获取完整大小？包含所有图像、js 和 css

file_get_contents 只给我 html 的大小

我需要创建一个通过参数传递 URL 的 PHP 返回我的完整大小。

很多谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:37:39.610

简短的回答：您需要解析页面以计算出将加载的所有依赖项，并检查每个依赖项的大小。

这将需要几个步骤。幸运的是，已经发布了开源类来帮助解决这个问题，看看：

[http://www.phpclasses.org/package/2223-PHP-Determine-the-size-of-Web-page-and-its-elements.html](http://www.phpclasses.org/package/2223-PHP-Determine-the-size-of-Web-page-and-its-elements.html)

此类应涵盖您需要的所有功能。

# php - 为什么不使用引号选择？

> ID：14925878
> 
> 赞同：1
> 
> 时间：2013-02-17T20:46:42.073
> 
> 标签：php, mysql

再会。

我在数据库中有一行：

![数据库](../Images/3a0d74548b0728bd3f51a34bfab47e0b.png)

当我第一次选择时：

```
SELECT * FROM `table` WHERE `name` Like '%Коляска \"Balmoral\" Silver Cross%' 
```

我得到 null(num rows = 0)... 但是如果我进行第二次选择：

```
SELECT * FROM `products` WHERE `name` Like '%Balmoral%' 
```

我得到 num 行 = 1。

为什么不首先选择以及如何正确选择？

**数据库和选择中的斜线，因为我在插入新行并使用选择时使用 mysql_real_escape_string**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:47:40.887

反斜杠是转义字符。如果你想寻找它，你需要逃避它。（换句话说，您需要转义转义字符。）：

```
SELECT * FROM `table` WHERE `name` Like '%Коляска \\"Balmoral\\" Silver Cross% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T21:15:51.860

用这个：

```
SELECT *  FROM `titles` WHERE `title` LIKE '%Коляска \\\\"Balmoral\\\\%" Silver Cross' 
```

**说明：对于 SQL，\ 必须用 \ 转义，但对于 PHP，我们还需要额外的 \ 来转义。**

或者简单地说：

```
SELECT *  FROM `titles` WHERE `title` = 'Коляска \\"Balmoral\\" Silver Cross' 
```

但是，不知道为什么！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T23:29:57.067

好像在这个操作中不是个好主意。需要使用全文。

例子

```
SELECT *, MATCH (name) AGAINST
    ('Коляска \"Balmoral\" Silver Cross') AS score
    FROM products WHERE MATCH (name) AGAINST
    ('Коляска \"Balmoral\" Silver Cross'); 
```

# iphone - 模态/菜单从顶部滑入

> ID：14925880
> 
> 赞同：0
> 
> 时间：2013-02-17T20:46:56.727
> 
> 标签：iphone, ios, uimodaltransitionstyle

我想创建一个带有选项列表的从顶部滑动的菜单。更具体地说，当用户单击导航栏时，我希望一种模态视图会从状态栏滑到底部。模态将是一个表格视图。

我想要类似于应用程序 Foursquare 的东西，其中（在探索选项卡中）

![点击导航栏会显示一种菜单](../Images/354e9b694de04c86af480cb0c048676e.png)

如果您单击导航栏，则从上方滑动的菜单将如下所示：

![显示菜单的模式从上到下滑动](../Images/e0019b997636fb11a5e533f566dc9036.png)

如何构建这样的模式/菜单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:48:25.607

查看 github 上的 DDSlidingPanels。有一个示例项目可以帮助您入门。是 iOS 6+，因为它使用嵌套视图控制器和自动布局。

[DDSlidingPanels](https://github.com/deem0n/DDSlidingPanels)

我喜欢它因为：

1.  它是可定制的（拉出标签，位置左，右，上，下，拉出的大小，支持下拉，推回等拖动手势）。
2.  在您自己的项目中很容易实现（示例项目很有帮助）。

我已经成功地在我的一个项目中使用了它并对其进行了相当多的定制。我和作者没有任何关系。

# ruby-on-rails - 如何为 Sidekiq 工作人员设置 default_url_options？

> ID：14925881
> 
> 赞同：7
> 
> 时间：2013-02-17T20:46:57.413
> 
> 标签：ruby-on-rails, routing, worker, sidekiq

我有一个 Sidekiq 工作人员，旨在执行社交活动（例如：像 Facebook 上的页面）。其中一部分需要知道被喜欢对象的 URL。

`Rails.application.routes.url_helpers`幸运的是，Rails 3 通过在需要访问 path/url 辅助方法的任何类或模块中包含任何类或模块，使访问特定于应用程序的路由变得容易。

我遇到的问题是我的默认 url/端口无法从我的 Sidekiq 工作程序中访问，尽管有各种尝试在我的`development.rb`or中定义它们`production.rb`。

```
class Facebook::LikeRecipeWorker
  include Sidekiq::Worker
  include Rails.application.routes.url_helpers

  sidekiq_options queue: :facebook

  def perform(recipe_id, user_id)
    recipe = Recipe.find(recipe_id)
    user = User.find(user_id)

    if user.facebook_token
      api = Koala::Facebook::API.new(user.facebook_token)
      api.put_connections 'me', 'my_namespace:like', object: recipe_url(recipe)
    end
  end
end 
```

当`recipe_url`方法被访问时，`ArgumentError`会引发 an 消息：

> ArgumentError：缺少要链接的主机！请提供 :host 参数，设置 default_url_options[:host]，或设置 :only_path 为 true

我知道我可以在特定于环境的配置文件中指定或指定，`default_url_options`例如`ActionController`：`ActionMailer`

```
config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }
config.action_controller.default_url_options = { host: 'localhost', port: 3000 } 
```

然而，这些（理所当然地）似乎对我的 Sidekiq 工人阶级没有影响。我应该如何定义`default_url_options`这些类？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-15T17:23:25.970

我们所做的是这样的：

在您的配置文件（例如 config/application.rb、config/production.db 等）中，有一行设置默认值：

```
 routes.default_url_options = { host: 'www.example.org' } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T21:23:42.627

我找到了一个潜在的解决方案，虽然感觉有点像黑客。我绝对愿意接受更好的答案。

首先，在我的环境文件（例如：）中，我为我的控制器`config/environments/development.rb`指定：`default_url_options`

```
config.action_controller.default_url_options = { host: 'localhost', port: 3000 } 
```

然后在我的工人类中，我在`default_url_options`那里定义了一个实例方法：

```
class Facebook::LikeRecipeWorker
  # ...

  private

  def default_url_options
    ActionController::Base.default_url_options
  end
end 
```

# css - Chrome 和 Firefox 是否支持伪类选择器 :checked？

> ID：14925891
> 
> 赞同：0
> 
> 时间：2013-02-17T20:47:57.227
> 
> 标签：css, css-selectors

我在这个问题上得到了一些相互矛盾的答案，所以我希望有人提供一些澄清。

基本上根据一些网站，Chrome和FF完全支持 :checked ：

*   [http://reference.sitepoint.com/css/pseudoclass-checked](http://reference.sitepoint.com/css/pseudoclass-checked)
*   [http://css3test.com/](http://css3test.com/)
*   [http://tools.css3.info/selectors-test/test.html](http://tools.css3.info/selectors-test/test.html)

但是，如果您深入到最后一个站点上的测试，您会注意到，第一个测试在 Chrome (v24) 和 FF (v18) 上失败，但在 IE10 上成功

*   [http://tools.css3.info/selectors-test/test-checked.html#checked](http://tools.css3.info/selectors-test/test-checked.html#checked)

此简约示例重现了该问题：

```
<!DOCTYPE html">
<html>
<head>
<style>
      :checked { background-color: royalblue;}
</style>
</head>
<body>
    <input type="radio" checked />
    <input type="radio"/>
    <input type="checkbox" checked />
    <input type="checkbox" />
</body>
</html> 
```

Chrome 和 Firefox 是否支持 :checked 伪类（也许那些只是不允许对这些元素进行样式设置）？

我不是网页设计师，所以也许我错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T23:39:06.083

简单地说，是的，他们都这样做。

但是，您遇到的问题源于某些浏览器呈现表单元素（例如复选框和单选按钮）的方式。

选择输入时，您无法看到背景颜色的变化，因为浏览器正在用它自己的默认行为覆盖您的自定义。

幸运的是，对于 Chrome、Safari（Webkit）来说，修复很简单，您只需设置一个“外观：无”；值清除所有默认样式，然后添加您自己的特殊混合。

Firefox (Gecko) 有一个与渲染复选框和收音机相关的已知错误，因此您将有限地使用外观值。

这是小提琴[http://jsfiddle.net/traxp/的链接](http://jsfiddle.net/traxp/)

希望有帮助:)

```
<!DOCTYPE html>
<html>
    <head>
        <style>
            input {
                -webkit-appearance:none;
                -moz-appearance:none;
                appearance:none;
                background:white;
                width:20px;
                height:20px;
                border:2px solid grey;
                border-radius:10px;
            }
            input:checked {
                background:red;  
            }
        </style>
    </head>
    <body>
        <input type="radio" checked />
        <input type="radio"/>
        <input type="checkbox" checked />
        <input type="checkbox" />
    </body>
</html> 
```

# string - 在 As3 中创建具有类名字符串的实例

> ID：14925893
> 
> 赞同：1
> 
> 时间：2013-02-17T20:48:14.047
> 
> 标签：string, class, actionscript, instantiation

我有 xml 结构，可以在其中加载程序的大部分数据。在这种情况下，我想实例化一个在 xml 中指定的类。我想我可以在 xml 中编写类的名称，然后实例化它并将参数传递给它。原来这并不容易！

我试过这样的代码：

```
 //special objects
        for each (o in xml.Objects[0].special) 
        { 
            p.x = o.@x;
            p.y = o.@y;
            s.x = o.@width;
            s.y = o.@height;
            trace(o.@classname);
            //var type:Class = o.@classname as Class;
            var type:Class = getDefinitionByName(String(o.@classname)) as Class;

            trace(type);
            objectArray.push(new type(p, s)); 
            trace("special");
        } 
```

如您所见，我在 xml 文件的类名属性中有我的类的名称。我设法用 getDefinitionByName 获得了定义（至少下一个跟踪显示正确的类名）但是当我尝试实例化它并将它推入数组时，我得到一堆开始的错误

> 错误 #2136：SWF 文件 file:///Users/tuomas/Dropbox/Flash/ScorpionBox/bin-debug/ScorpionBox.swf 包含无效数据。

知道我应该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T21:36:35.000

假设您的 XML 类型定义由 获得的限定名称组成`getQualifiedClassName()`，实例化类型并根据需要应用属性。

由 xml 定义的显示对象的示例实例化：

```
package
{
    import flash.display.DisplayObject;
    import flash.display.Sprite;
    import flash.utils.getDefinitionByName;

    public class XmlParser extends Sprite
    {
        public var xml:XML = <objects>
                                <object type="flash.display::Sprite" x="0" y="0" width="100" height="100" />
                                <object type="flash.display::MovieClip" x="0" y="0" width="100" height="100" />
                             </objects>;

        public function XmlParser()
        {
            for each (var object:XML in xml.children())
            {
                var type:Class = getDefinitionByName(object.@type) as Class;
                var instance:DisplayObject = new type();
                instance.x = object.@x;
                instance.y = object.@y;
                instance.width = object.@width;
                instance.height = object.@height;

                addChild(instance);
            }
        }
    }
} 
```

您还可以在序列化为 XML 时描述类型对象，然后通过迭代 XML 的属性将属性应用回对象实例，例如：

```
package
{
    import flash.display.DisplayObject;
    import flash.display.Sprite;
    import flash.utils.getDefinitionByName;

    public class XmlParser extends Sprite
    {
        public var xml:XML = <objects>
                                <object type="flash.display::Sprite" x="0" y="0" width="100" height="100" />
                                <object type="flash.display::MovieClip" x="0" y="0" width="100" height="100" />
                             </objects>;

        public function XmlParser()
        {
            for each (var object:XML in xml.children())
            {
                var type:Class = getDefinitionByName(object.@type) as Class;
                var instance:DisplayObject = new type();
                addChild(instance);

                for each (var attribute:XML in object.@*)
                {
                    if(attribute.name() == "type") { continue; }

                    trace("setting: " + attribute.name() + " = " + attribute.toXMLString());
                    instance[attribute.name().toString()] = attribute.toXMLString();
                }
            }
        }
    }
} 
```

# c++ - argc 和 argv 的问题

> ID：14925894
> 
> 赞同：0
> 
> 时间：2013-02-17T20:48:14.497
> 
> 标签：c++, argv, argc

试图向我的程序添加命令行参数。所以我在做实验，无法为我的一生找出这个智能警告。它一直说它期待一个'）'，但我不知道为什么。

这是它不喜欢的代码：

```
 // Calculate average
    average = sum / ( argc – 1 ); 
```

然后它强调减法运算符。以下是完整的程序。

```
#include <iostream>

int main( int argc, char *argv[] )
{
    float average;
    int sum = 0;

    // Valid number of arguments?
    if ( argc > 1 ) 
    {
       // Loop through arguments ignoring the first which is
       // the name and path of this program
       for ( int i = 1; i < argc; i++ ) 
       {
           // Convert cString to int 
           sum += atoi( argv[i] );    
       }

       // Calculate average
       average = sum / ( argc – 1 );       
       std::cout << "\nSum: " << sum << '\n'
              << "Average: " << average << std::endl;
   }
   else
   {
   // If invalid number of arguments, display error message
       // and usage syntax
       std::cout << "Error: No arguments\n" 
         << "Syntax: command_line [space delimted numbers]" 
         << std::endl;
   }

return 0; 
```

}

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T20:50:50.277

你认为是减号的字符是别的东西，所以它不会被解析为减法运算符。

你的版本：

```
average = sum / ( argc – 1 ); 
```

正确的版本（剪切并粘贴到您的代码中）：

```
average = sum / ( argc - 1 ); 
```

请注意，使用整数计算平均值可能不是最好的方法。您在 RHS 上有整数运算，然后`float`在 LHS 上分配给它。您应该使用浮点类型执行除法。例子：

```
#include <iostream>

int main()
{
  std::cout << float((3)/5) << "\n"; // int division to FP: prints 0!
  std::cout << float(3)/5 << "\n";   // FP division: prints 0.6
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T20:58:44.823

我试图在我的机器上用 g++ 4.6.3 编译你的代码并得到以下错误：

```
pedro@RovesTwo:~$ g++ teste.cpp -o  teste
teste.cpp:20:8: erro: stray ‘\342’ in program
teste.cpp:20:8: erro: stray ‘\200’ in program
teste.cpp:20:8: erro: stray ‘\223’ in program
teste.cpp: Na função ‘int main(int, char**)’:
teste.cpp:16:33: erro: ‘atoi’ was not declared in this scope
teste.cpp:20:35: erro: expected ‘)’ before numeric constant 
```

看起来那行中有一些奇怪的字符。删除并重新编写修复错误的行。

# susy-compass - 网格宽度不是 960px

> ID：14925897
> 
> 赞同：0
> 
> 时间：2013-02-17T20:48:38.487
> 
> 标签：susy-compass

我可能遗漏了一些基本的东西，但为什么 susy 网格不等于 960px？

```
$total-columns  : 12;             // a 12-column grid
$column-width   : 60px;            // each column is 4em wide
$gutter-width   : 10px;            // 1em gutters between columns
$grid-padding   : $gutter-width;  // grid-padding equal to gutters

$container-style: static;

.susy-container {
   @include container;
} 
```

我得到宽度 830px。知道为什么它不像其他网格那样是 960px 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:12:52.320

再试一次你的数学：

```
(12*60) + (11*10) = 830 
```

官方的 960 网格系统使用`20px`排水沟和`10px`网格填充：

```
$total-columns  : 12;
$column-width   : 60px;
$gutter-width   : 20px;
$grid-padding   : 10px; 
```

那应该给你你正在寻找的东西。

```
(12*60) + (11*20) + (2*10) = 960 
```

# c++ - 将字符串添加到 MySQL++ 查询

> ID：14925899
> 
> 赞同：0
> 
> 时间：2013-02-17T20:49:00.917
> 
> 标签：c++, mysql, mysql++

我正在尝试[MySQL++](http://tangentsoft.net/mysql++/)并正在调查查询。我希望能够将字符串变量插入到我的查询中，这样就可以了：

```
query << "CREATE TABLE beer (" 
      << "beerID smallint(3) unsigned NOT NULL AUTO_INCREMENT,"
      << "beerName varchar(30) NOT NULL,"
      << "PRIMARY KEY (beerID));"; 
```

可能是这样的：

```
query << "CREATE TABLE " << tableName << " (" 
      << fieldName1 << " smallint(3) unsigned NOT NULL AUTO_INCREMENT,"
      << fieldName2 << " varchar(30) NOT NULL,"
      << "PRIMARY KEY (" << fieldName1 << "));"; 
```

其中*tableName*、*fieldName1*和*fieldName2*都是可以在运行时修改的某种类型的字符串变量，以便用户可以在应用程序运行时定义表和字段名称（以及以后的表数据）。这样的事情可能吗？如果是这样，怎么做？我看到的文档对此不是很清楚，而且我使用 C++ 字符串没有任何成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:33:15.357

> 我使用 c++ 字符串没有任何成功。

当您尝试此操作时，您不会显示遇到的错误。

我只是`examples/resetdb.cpp`这样修改来做你正在尝试的事情：

```
--- examples/resetdb.cpp    (revision 2716)
+++ examples/resetdb.cpp    (working copy)
@@ -132,14 +132,17 @@
        // Send the query to create the stock table and execute it.
        cout << "Creating stock table..." << endl;
        mysqlpp::Query query = con.query();
+       string table_name("stock");
+       string f1("item"), f2("num"), f3("weight"), f4("price"),
+               f5("sdate"), f6("description");
        query <<
-               "CREATE TABLE stock (" <<
-               "  item CHAR(30) NOT NULL, " <<
-               "  num BIGINT NOT NULL, " <<
-               "  weight DOUBLE NOT NULL, " <<
-               "  price DECIMAL(6,2) NULL, " << // NaN & inf. == NULL
-               "  sdate DATE NOT NULL, " <<
-               "  description MEDIUMTEXT NULL) " <<
+               "CREATE TABLE " << table_name << " (" <<
+               f1 << " CHAR(30) NOT NULL, " <<
+               f2 << " BIGINT NOT NULL, " <<
+               f3 << " DOUBLE NOT NULL, " <<
+               f4 << " DECIMAL(6,2) NULL, " << // NaN & inf. == NULL
+               f5 << " DATE NOT NULL, " <<
+               f6 << " MEDIUMTEXT NULL) " <<
                "ENGINE = InnoDB " <<
                "CHARACTER SET utf8 COLLATE utf8_general_ci";
        query.execute(); 
```

我用这些更改重建了 MySQL++，重新运行了它的自测套件，它给出了与以前完全相同的测试结果。如果表结构*发生了*变化，我预计许多测试都会失败。

因此，您必须在做其他事情，但我无法从您的问题中猜出是什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T20:55:58.673

你应该看看[http://tangentsoft.net/mysql++/doc/html/userman/tutorial.html#qescape](http://tangentsoft.net/mysql++/doc/html/userman/tutorial.html#qescape)

例如生产：

```
SELECT * FROM stock WHERE item = 'Hotdog Buns' 
```

您可以使用 ：

```
string s = "Hotdog Buns";
query << "SELECT * FROM stock WHERE item = " << quote_only << s; 
```

# arrays - 将向量转换为数组

> ID：14925900
> 
> 赞同：-1
> 
> 时间：2013-02-17T20:49:04.370
> 
> 标签：arrays, matlab, vector, type-conversion

我正在跑步`matlab R2008b`，并愿意将 a 转换`vector`为`array`. 有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:51:46.280

在 Matlab 中，向量本质上是一个维度为 1xN（行向量）和 Nx1 列向量的数组（矩阵）。您使用转置将一个转换为另一个：

```
a=zeros(1,5); % row vector of zeros
a = 1:5; % row vector with numbers 1..5 in it
aCol = a' ; % column vector
aCol2 = a(:); % turns it into a column vector as well... 
```

顺便说一句 - “Matlab”中的“Mat”代表“矩阵”，而不是“数学”。Matlab 中的一切都是矩阵......即使它的维度是 1x1。

# javascript - 简单的图像相似性搜索功能（我的学习网络项目需要脚本或插件）

> ID：14925901
> 
> 赞同：1
> 
> 时间：2013-02-17T20:49:09.720
> 
> 标签：javascript, jquery, image, html, similarity

我正在为我的网络项目寻找一个简单的脚本。例如：有一个简单的网站，您可以在其中上传图片，如果您单击“查找相似图片”-按钮，它会向您显示相似图片（相似颜色的图片）（来自包含许多其他图片的文件）。

是否有一个免费且简单的脚本可以用于我的网络项目（HTML5/JavaScript）？

我找到了这个，但我不确定它是否足够好使用它：[http ://tcorral.github.com/IM.js/](http://tcorral.github.com/IM.js/)

欢迎提出好的建议:)

# regex - 使用 perl 作为更好的 grep 以使用单行模式 m/RE/s 匹配多行

> ID：14925902
> 
> 赞同：5
> 
> 时间：2013-02-17T20:49:23.520
> 
> 标签：regex, perl

我正在尝试 grep 表达式（例如`BEGIN`和`END`）之间的文本，这些文本可能与以下内容不在同一行：

```
perl -wln -e 'm/BEGIN.+END/s and print;' < file.txt 
```

请注意，由于`s`修饰符 (in `m/RE/s`)，`"."`允许匹配换行符（以及其他任何内容）。

这使模式可以将特定顺序的单词与它们之间的任何内容匹配（即模式`BEGIN`在一行上，而模式`END`在下面的几行上）。如果这两个模式在同一行上，这可以正常工作，但当它跨越多行时则不行。我在这里想念什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T20:51:49.980

其实我确实发现了缺失的部分！我需要使用该`-0777`选项来搜索记录的整个文件，并使用以下方法打印匹配的表达式`print $&`：

```
perl -wln -0777 -e 'm/BEGIN.+END/s and print $&;' < file.txt 
```

# python - Emacs 为内联（行尾）注释设置间距

> ID：14925905
> 
> 赞同：7
> 
> 时间：2013-02-17T20:50:00.330
> 
> 标签：python, emacs, emacs23, dot-emacs

在 Python 的 PEP 8 样式指南中，建议内联注释由行的其余部分用[两个空格](http://www.python.org/dev/peps/pep-0008/#inline-comments)分隔。但是，Emacs 中的默认设置是运行`comment-dwim`或`indent-for-comment`在行尾和注释之间只放置一个空格。有没有办法改变emacs中的这种默认行为？

我正在运行 Emacs 23.3.1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-22T02:35:25.860

这应该做你想要的：

```
 (add-hook 'python-mode-hook
      (lambda () (set (make-local-variable 'comment-inline-offset) 2))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-08T15:14:00.797

您可以通过查看emacs的文档`C-h v RET comment-inline-offset`，然后您将找到@And所说的答案。

这是一个简化版本：

```
(add-hook 'python-mode-hook
  (lambda () (setq-local comment-inline-offset 2))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T21:38:20.947

尝试设置`comment-start`为`" # "`（前一个空格，后一个空格）。

```
M-x set-variable comment-start " # " 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T05:48:05.343

我认为这可能会做你想要的：

```
(defun my-comment-indent ()
  (interactive)
  (end-of-line)
  (let ((comment-column (+ 2 (current-column))))
    (comment-indent))) 
```

# asp.net - ASP.NET：将复选框添加到表格单元格

> ID：14925911
> 
> 赞同：0
> 
> 时间：2013-02-17T20:50:49.450
> 
> 标签：asp.net, vb.net, server-side

这是我的桌子：

```
<asp:Table ID="Table1" runat="server">
    <asp:TableRow>
        <asp:TableCell>number</asp:TableCell>
        <asp:TableCell ID="webCell"></asp:TableCell>
    </asp:TableRow>
</asp:Table> 
```

这是我的服务器端代码：

```
For i = 0 To IDsList.Length - 1
    Dim chk As CheckBox = New CheckBox()
    chk.ID = "webCatID" & Convert.ToString(i)
    chk.Text = Convert.ToString(CatsName(i))
    chk.BorderStyle = BorderStyle.None
    chk.CssClass = "checkBox"
    webCell.Controls.Add(chk) 'does not work, it does not webCell
Next 
```

如何将这些复选框添加到该单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:53:34.747

`WebCell`is not `runat=server`，所以你不能在代码隐藏中引用它，添加它：

```
<asp:TableCell ID="webCell" runat="server"></asp:TableCell> 
```

# javascript - 如何设置 Openlayers 以使用backbone.js？

> ID：14925913
> 
> 赞同：4
> 
> 时间：2013-02-17T20:50:58.837
> 
> 标签：javascript, backbone.js, openlayers

我正在尝试构建一个基于 Openlayers 和backbone.js 的应用程序。我应该让每一层都成为一个视图吗？到目前为止，我有一个地图视图、标记视图，并且正在考虑让每一层也成为一个视图。我有一个标记模型和地图模型。任何人都可以帮我设置这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-14T17:50:59.627

在与@Gagan 过去的回答类似之后，下次我会这样做：

将 OpenLayers Map 视为特殊的渲染表面 - 与 DOM 不同，类似于您对待`<canvas>`. 认识到 Backbone 围绕您的视图在 DOM 中呈现的想法做了一些（轻）假设：

1.  `view.el`Views 和它们对应的 DOM 节点（和`view.$el`魔法）之间有一种特殊的关系。

2.  `events`哈希会自动转换为在 DOM 节点上触发的事件的处理程序。

我们将要为我们的 OpenLayers 视图重新创建这些概念。一些想法：

1.  在 Backbone 中，视图是模型和 DOM 的一部分之间的中介。在 OpenLayers 中，我们有一个 OpenLayers Feature、Vector、Marker、Popup 等，而不是 DOM 的一部分。我们可以在 View 和它的 OpenLayers 对象之间重新创建这种特殊关系。监听模型变化和更新 OpenLayers 对象的视图是自然而然的。监听和响应 OpenLayers 对象上的事件怎么样？

这是 OpenLayers 的难点之一。假设你有一个`SelectControl`. 您可以在层级监听事件，这将为您提供对`event.feature`. 但是您如何将该功能映射回您的视图以保持良好的职责分离？选择你的毒药。在下面的示例中，我将（重新）直接在视图已经有句柄的功能上触发事件。然后视图将不得不监听功能上的那些事件。请注意，OL 功能没有内置事件。我们将使用`_.extend(object, Backbone.Events);`.

1.  您可以创建一个 featureEvents 哈希，但这可能是过度设计的。视图已经接收到模型对象并显式绑定到它的事件。在下面的示例中，我将对视图创建的 OL 功能执行相同的操作。

现在用于构建您的视图。我倾向于将 OpenLayers`Layer`视为*项目的集合*。假设您要渲染一组特征。您可以创建一个`FeatureCollectionView`用对象初始化的类`Map`。然后它将`Layer`为其集合创建一个。

```
FeatureCollectionView = Backbone.View.extend({
    initialize: function(options) {
        // requires options.map, an OpenLayers Map object.
        // requires options.collection, a FeatureCollection object.
        options = options || {};

        this.map = options.map;

        this.initLayer();
        this.initSelectControl();

        this.collection.on('add', this.addFeatureModel, this);
        this.collection.on('remove', this.removeFeatureModel, this);
        this.collection.each(this.addFeatureModel, this);

        // ...
    },

    initLayer: function() {
        this.layer = new OpenLayers.Layer.Vector('a collection of features', {/* options */});
        this.map.addLayers([this.layer]);
    },

    initSelectControl: function() {
        this.selectControl = new OpenLayers.Control.SelectFeature(this.layer, {
            hover: true,
            multiple: false,
            highlightOnly: true
        });

        this.map.addControl(this.selectControl);
        this.selectControl.activate();
        this.layer.events.on({
            featurehighlighted: function(event) {
                // requires that you've extended your view features with Backbone.Events
                if (event.feature.trigger) {
                    event.feature.trigger('featurehighlighted', event);
                }
            },
            featureunhighlighted: function(event) {
                // requires that you've extended your view features with Backbone.Events
                if (event.feature.trigger) {
                    event.feature.trigger('featureunhighlighted', event);
                }
            },
            scope: this
        });
    },

    addFeatureModel: function(model) {
        if (!this.views) this.views = {};

        this.views[model.cid] = new FeatureItemView({
            layer: this.layer,
            model: model
        });
    },

    removeFeatureModel: function(model) {
        this.views && this.views[model.cid] && this.views[model.cid].remove();
    },

    // ...

}); 
```

然后我们需要一个`FeatureItemView`用 OL 初始化的`Layer`来渲染自己。

```
MyFeatureView = Backbone.View.extend({
    initialize: function(options) {
        // requires options.layer, an OpenLayers Layer that is already added to your map.
        options = options || {};

        this.layer = options.layer;
        this.initSelectControl();

        // ...

        this.render();

        _(this.feature).extend(Backbone.Events);
        this.feature.on('featurehighlighted', this.showPopup, this);
        this.feature.on('featureunhighlighted', this.hidePopup, this);
    },

    render: function() {
        this.feature = // ...

        this.layer.addFeatures([this.feature]);

        // ...
    },

    remove: function() {
        this.layer.removeFeatures([this.feature]);
    },

    // ...

}); 
```

* * *

我通过搜索与“骨干和画布”相关的讨论找到了一些其他有趣的解决方案，因为它有一些相似的方面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T00:27:51.653

这个要点可能会对你有所帮助。对于使用 OpenLayers 理解 Backbone，它非常有用。 [https://gist.github.com/bwreilly/2052314](https://gist.github.com/bwreilly/2052314)

# list - 可以让 R5RS 代码与 SchemeUnit 一起使用吗？

> ID：14925915
> 
> 赞同：3
> 
> 时间：2013-02-17T20:51:09.623
> 
> 标签：list, scheme, racket, r5rs

在我上的一堂课中，我们使用旧的 R5RS 标准方案来解决 SICP 作业。我喜欢先测试开发，所以我认为单元测试框架会很好，我选择了 SchemeUnit 来编写小测试。

到目前为止，这工作得很好，只是在输出中测试原语（字符串、数字等），但是在尝试测试列表时遇到了障碍。这可能与用于运行测试的 Scheme 方言的差异有关：

**foo.scm：** `(define a-list (list 2))`

**foo-tests.scm:** `(check-equal? a-list (list 2))`

运行测试时的结果：

```
Unnamed test 
FAILURE
name:       check-equal?
location:   tester.scm:22:3
actual:     {2}

expected:   (2) 
```

为了使测试套件运行，我必须添加`"#lang scheme/base` 到 foo-tests.scm 和`require`schemeunit 包的顶部。在 foo.scm 中，我需要在顶部拥有`#lang r5rs`和。`(#%provide (all-defined))`

我猜列表在 R5RS 和“方案/基础”中的实现方式有所不同。有什么办法让他们一起工作吗？为什么会失败（{} vs ()）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T21:04:00.147

是的，正如您所注意到的，列表在`#lang r5rs`vs中的实现方式不同`#lang scheme/base`。如果可以在您`foo-tests.scm`的 r5rs 中编写测试，那将有助于消除可能的混淆。

您应该可以通过将其放在文件顶部来执行此`foo-tests.scm`操作。

```
#lang r5rs

(#%require schemeunit)
(#%require "foo.scm")

;; Now you can add your tests here:
(check-equal? a-list (list 1 2 3)) 
```

如果测试套件是用相同的语言编写的，那么结构——尤其是列表的表示——应该匹配。上面的测试应该有望通过。

`r5rs`详细说明列表与`#lang scheme`(and ) 中的列表之间的区别`#lang racket`：Racket 使用不可变的 cons 对来表示列表。不可变的 cons 对不支持 r5rs 的`set-car!`and`set-cdr!`函数，因此`#lang r5rs`使用内置的不可变对将不忠实于该语言的标准。为了支持 r5rs 标准，Racket 包含一个单独的[可变对](http://docs.racket-lang.org/reference/mpairs.html)数据类型，并在 r5rs 中一致地使用它。但这意味着 Racket 中的标准对和可变对的比较不同。

# android - 文本颜色传递到我的适配器中的回收列表项

> ID：14925918
> 
> 赞同：0
> 
> 时间：2013-02-17T20:51:13.377
> 
> 标签：android, android-listview, textview, simplecursoradapter

如果文本是 5 以下的数字，我正在尝试更改 listitem 中文本视图的文本颜色。但是当我向上/向下滚动时，颜色适用于回收项目。我环顾四周，我真的不明白这些回收物品是如何工作的。

片段类

```
ListAdapter adapter = new RacesAdapter(getActivity(), racesList,
            R.layout.list_item,
            new String[] { TAG_NAME, TAG_GOAL, TAG_NUMENTRANTS }, new int[] {
                    R.id.gameLabel, R.id.goalLabel, R.id.entrantsLabel});
    setListAdapter(adapter); 
```

RacesAdapter 类（是修改后的 SimpleAdapter）**（在 bindView() 中查找我的代码）**

```
public View getView(int position, View convertView, ViewGroup parent) {
    return createViewFromResource(position, convertView, parent, mResource);
}

private View createViewFromResource(int position, View convertView,
        ViewGroup parent, int resource) {

    View v;
    if (convertView == null) {
        v = mInflater.inflate(resource, parent, false);
    } else {
        v = convertView;
    }

    bindView(position, v);
    return v;
}

public void setDropDownViewResource(int resource) {
    this.mDropDownResource = resource;
}

@Override
public View getDropDownView(int position, View convertView, ViewGroup parent) {
    return createViewFromResource(position, convertView, parent, mDropDownResource);
}

@SuppressWarnings("rawtypes")
private void bindView(int position, View view) {
    final Map dataSet = mData.get(position);
    if (dataSet == null) {
        return;
    }

    final String[] from = mFrom;
    final int[] to = mTo;
    final int len = to.length;

    for (int i = 0; i < len; i++) {
        final View v = view.findViewById(to[i]);
        if (v != null) {

            final Object data = dataSet.get(from[i]);
            String text = data == null ? "" : data.toString();
            if (text == null) {
                text = "";
            }

            boolean bound = false;
            if (mViewBinder != null) {
                bound = mViewBinder.setViewValue(v, data, text);
            }

            if (!bound) {
                if (v instanceof TextView) {
                    if(v.getId()==R.id.entrantsLabel){
                        if(Integer.parseInt(text) < 5){((TextView) v).setTextColor(Color.RED);}
                    }
                    setViewText((TextView) v, text);
                } 
                else if (v instanceof ImageView) {
                    if (data instanceof Integer) {
                        setViewImage((ImageView) v, (Integer) data);                            
                    } else {
                        setViewImage((ImageView) v, text);
                    }
                } else {
                    throw new IllegalStateException(v.getClass().getName() + " is not a " +
                            " view that can be bounds by this SimpleAdapter");
                }
            }
        }
    }
}

public ViewBinder getViewBinder() {
    return mViewBinder;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:54:26.400

您应该做的是，在 中`bindView()`，将您的文本颜色设置为默认值。然后，它可能会或可能不会更改为`Color.RED`. 如果是，则为红色，否则为默认值。

所以，像这样：

```
private void bindView(int position, View view) {
    // ...

    for (int i = 0; i < len; i++) {
        final View v = view.findViewById(to[i]);
        if (v != null) {

            v.setTextColor(Color.BLACK); // For example
            // ...

            if (!bound) {
                if (v instanceof TextView) {
                    if(v.getId()==R.id.entrantsLabel){
                        if(Integer.parseInt(text) < 5){((TextView) v).setTextColor(Color.RED);}
                    }
                    // ...
                } 
                // ...
            }
        }
    }
} 
```

# google-analytics - 错误的目标完成数字

> ID：14925920
> 
> 赞同：0
> 
> 时间：2013-02-17T20:51:25.407
> 
> 标签：google-analytics, goal-tracking

我在谷歌分析中设定了 10 个目标。它们都共享相同的完成 URL，但在完成之前都有不同的渠道/步骤。

今天我知道我有一个目标完成，但查看报告有 10 个报告。所以我的所有目标都计算完成。

有没有人遇到过同样的情况并想出了解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:52:35.023

是否有可能为所有这些都使用不同的完成 url？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:57:02.863

渠道步骤仅适用于渠道报告。目标完成仅基于目标 URL。因此，如果您对所有这些目标 URL 都具有相同的目标 URL，那么无论您为每个目标设置的步骤是什么，您都将拥有 10 个目标完成。

# javascript - 使用 PhoneGap 在 Android 和 iPhone 上的“touchmove”事件

> ID：14925925
> 
> 赞同：1
> 
> 时间：2013-02-17T20:52:31.243
> 
> 标签：javascript, android, cordova, mousemove, touchmove

所以基本上我希望能够在有人在由 iOS 或 Android 驱动的触控设备的屏幕上滑动时获得触控坐标。

到目前为止，我尝试做的事情如下。

```
$('element').bind("touchmove", function(e) {
    $(element2).html(e.pageX + "," + e.pageY);
} 
```

另外，我已经尝试过使用“vmousemove”（jquery mobile 等价物，或者应该是这样），“mousemove”，但无济于事。我只得到初始和结束触摸的坐标。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T22:30:42.360

iOS 和 Android 是多点触控设备。交互是使用触摸事件处理的：

[https://developer.mozilla.org/en-US/docs/DOM/Touch_events](https://developer.mozilla.org/en-US/docs/DOM/Touch_events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-05T09:53:51.293

你非常接近......你所需要的只是原始事件。jQuery 为您包装了这些。

例如

```
$('element').bind("touchmove", function(event) {
   var e = ev.originalEvent;
   var touch = e.touches[0];
   $(element2).html(touch.pageX + "," + touch.pageY);
} 
```

编辑：我忘记了触摸阵列......我的错。

# vim - 视觉块插入/追加不起作用

> ID：14925932
> 
> 赞同：32
> 
> 时间：2013-02-17T20:53:16.810
> 
> 标签：vim

`Ctrl`我使用-选择了一个文本块`V`，但是当我输入`Shift`-`A`或`Shift`-`I`时，我的 vim 编辑器仅在我开始可视块模式的位置进入插入模式。

例如，

```
Here
is 
text 
```

我想

```
#Her 
#is 
#text 
```

但我得到：

```
#Here
is 
text 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-17T20:56:29.693

确保使用 退出视觉块`ESC`，而不是`Ctrl C`。

此外，Vim 不会在可视块模式下实时更新，您必须离开可视块模式才能显示其他行的更改。

你只会看到：

```
#Here
is 
text 
```

在你进入视觉块并插入一个`#`之后，但是一旦你离开视觉块模式，按下`ESC`它应该看起来像：

```
#Here
#is 
#text 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-17T20:56:56.053

`Ctrl`- `V`-> 选择块 -> 按`I`-> 输入`#`

**然后按`ESC`**

更多详情：

```
:h v_b_I 
```

你可以看到：

```
Visual-block Insert                     *v_b_I* 

With a blockwise selection, I{string}<ESC> will insert {string} at the start 
of block on every line of the block, provided that the line extends into the block. 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-06-23T18:16:21.917

对我来说，问题是我使用的是逐行视觉模式（即通过按 进入视觉模式`V`），而不是按块视觉模式（即通过使用进入视觉模式`Ctrl-v`）。另请注意，您必须通过使用`<Esc>`（或等效地通过`Ctrl-[`在英文键盘上使用）而不是通过使用来退出可视模式`Ctrl-c`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-14T11:48:44.213

```
rpm -qa | grep vim

vim-enhanced-7.4.160-1.el7.x86_64
vim-common-7.4.160-1.el7.x86_64
vim-filesystem-7.4.160-1.el7.x86_64

1/just remove vi and use vim instead
or
2/alias vim='vi' in your bashrc
or
3/ln -s $(which vim) $(which vim|sed 's/vim/vi/g') 
```

# r - 特征值与 PVE（解释百分比方差）

> ID：14925942
> 
> 赞同：0
> 
> 时间：2013-02-17T20:54:31.927
> 
> 标签：r, pca, eigenvalue

有了`prcomp()`函数，我已经解释了估计的百分比方差

```
prcomp(env, scale=TRUE) 
```

的第二列`summary(pca)`显示所有 PC 的这些值：

```
 PC1    PC2     PC3     PC4     PC5     PC6     PC7
Standard deviation     7.3712 5.8731 2.04668 1.42385 1.13276 0.79209 0.74043
Proportion of Variance 0.5488 0.3484 0.04231 0.02048 0.01296 0.00634 0.00554
Cumulative Proportion  0.5488 0.8972 0.93956 0.96004 0.97300 0.97933 0.98487 
```

现在我想找出每台 PC 的特征值是什么：

```
pca$sdev^2
[1] 5.433409e+01 3.449329e+01 4.188887e+00 2.027337e+00 1.283144e+00
[6] 6.274083e-01 5.482343e-01 
```

但这些值似乎只是 PVE 本身的另一种表示。那么我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T21:08:53.810

我不确定这是否是您的困惑。

```
pca$sdev^2 -> eigen values -> variance in each direction
pca$sdev^2/sum(pca$sdev^2) = proportion of variance vector 
```

所以他们是相关的。

**编辑：**只是一个例子（说明这种关系），如果这会有所帮助。

```
set.seed(45) # for reproducibility
# set a matrix with each column sampled from a normal distribution
# with same mean but different variances
m <- matrix(c(rnorm(200,2, 10), rnorm(200,2,10), 
               rnorm(200,2,10), rnorm(200,2,10)), ncol=4)
pca <- prcomp(m)

> summary(pca) # note that the variances here equal that of input
# all columns are independent of each other, so each should explain
# equal amount of variance (which is the case here). all are ~ 25%
                           PC1     PC2     PC3    PC4
Standard deviation     10.9431 10.6003 10.1622 9.3200
Proportion of Variance  0.2836  0.2661  0.2446 0.2057
Cumulative Proportion   0.2836  0.5497  0.7943 1.0000

> pca$sdev^2
# [1] 119.75228 112.36574 103.27063  86.86322

> pca$sdev^2/sum(pca$sdev^2)
# [1] 0.2836039 0.2661107 0.2445712 0.2057142 
```

# javascript - 计算结果未显示在总计表 javascript 中

> ID：14925944
> 
> 赞同：1
> 
> 时间：2013-02-17T20:54:43.537
> 
> 标签：javascript

我正在尝试创建一个薪水计算器，但是当我输入每小时费率和小时数并点击计算时，我得到的只是在我的总计表中*未定义。*这是我的javascript：

```
var $ = function (id) {
return document.getElementById(id); 
}

function updateTotal () {

var rate;
var hours = parseFloat( $("numHours").value);
var regularHours;
var overtime;
var doubletime;

    //begin determine hourly rate 
    function checkJob () {
    if ($('job').value == 'job0') {
    rate = 0;
    }
    if ($('job').value == 'job1') {
    rate = 12;
    }
    if ($('job').value == 'job2') {
    rate = 10;
    }
    if ($('job').value == 'job3') {
    rate = 11;
    }
    }

    //calculate hours breakdown
    function checkHours () {
    if (hours.value <= 40) {
    regularHours = hours.value;
    overtime = 0;
    doubletime = 0;
    }

    if (hours.value < 60) {
    regularHours = 40;
    overtime = hours.value-40;
    doubletime=0;
    }

    if (hours.value >=60) {
    regularHours = 40;
    overtime = 20;
    doubletime = hours.value-60;
    }
    }

    checkJob();
    checkHours();

    var salary = (regularHours * rate) + (overtime * (rate * 1.5)) + (doubletime * (rate * 2))

    //display amounts
    $('regularHours').innerHTML = regularHours;
    $('overtime').innerHTML = overtime;
    $('doubletime').innerHTML = doubletime;
    $('salary').innerHTML = "$ " + salary;
} 
```

我确定我错过了一些愚蠢的东西，但我已经盯着这段代码好几天了，无法弄清楚我做错了什么。感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:06:45.593

**编辑**

有问题的代码是这样的：

```
hours.value 
```

它的问题是它`hours`已经是一个数字，而数字没有`value`可用的方法。`hours.value`更改to的所有实例`hours`将解决问题并正确输出计算结果。

看这个演示：http: [//jsfiddle.net/gLthv/](http://jsfiddle.net/gLthv/)

* * *

~~问题是您实现 jquery 选择器的方式。您应该`document.getElementById()`改用，或者记住要选择一个 id，您需要在 id 名称前加上`#`~~

 ~~```
$("#id") 
```~~ 

不过，这只是问题的第一部分。下一部分是您正在使用 jquery，但需要 dom 元素。要解开 jquery 对象，您需要使用`[0]`它才能访问包含的 dom 元素。

```
$("#id")[0] 
```

进行这些更改后，您应该能够看到反映的计算。例如，`$('job').value`真的应该是，`$('#job')[0].value`或者如果您更喜欢坚持使用 jquery 的实现，那么您可以使用它`$('#job').val()`来获取值。

~~与此类似，您还可以访问 jquery 的`innerHTML`. 这将改变这一点`$('overtime').innerHTML = overtime`：`$('#overtime').html(overtime)`~~

# wordpress - 默认循环在 Wordpress 3.5 中不起作用

> ID：14925948
> 
> 赞同：0
> 
> 时间：2013-02-17T20:54:57.577
> 
> 标签：wordpress, loops

我在默认文章页面以外的 Wordpress 页面上调用循环时遇到了一些麻烦。

这是我正在使用的代码：

```
<div <?php post_class(); ?> id="post-<?php the_ID(); ?>">
    <h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>
    <?php the_content(); ?>
</div> 
```

```
<div class="navigation">
    <div class="next-posts"><?php next_posts_link(); ?></div>
    <div class="prev-posts"><?php previous_posts_link(); ?></div>
</div> 
```

```
<div <?php post_class(); ?> id="post-<?php the_ID(); ?>">
    <h1>Not Found</h1>
</div> 
```

这并没有显示任何东西。

但如果我只使用查询：

```
 <?php query_posts('showposts=10'); 
                        $ids = array(); while (have_posts()) : the_post(); 
                        $ids[] = get_the_ID(); the_title(); the_content(); endwhile;
                    ?> 
```

它有效，但我 - 当然不能设置条目的样式。

有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:17:34.300

尝试这个：

```
<?php query_posts('showposts=10'); ?>
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>
    <div <?php post_class(); ?> id="post-<?php the_ID(); ?>">
        <h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>
        <?php the_content(); ?>
    </div>
<?php endwhile; ?>
    <div class="navigation">
        <div class="next-posts"><?php next_posts_link(); ?></div>
        <div class="prev-posts"><?php previous_posts_link(); ?></div>
    </div>
<?php else : ?>
    <div <?php post_class(); ?> id="post-<?php the_ID(); ?>">
        <h1>Not Found</h1>
    </div>
<?php endif; ?>
<?php wp_reset_query(); // reset the query ?> 
```

# php - Web Crawler - 从 2000 多个网页中获取数据（TED 网站示例）

> ID：14925949
> 
> 赞同：2
> 
> 时间：2013-02-17T20:55:03.967
> 
> 标签：php, html, web-crawler

我正在编写一个每周运行一次的 php crone 作业脚本

此脚本的主要目的是从 TED we 网站上提供的所有 TED 演讲中获取详细信息（例如，使这个问题更容易理解）

这个脚本运行大约需要 70 分钟，它会运行超过 2000 个网页

我的问题是：

1）是否有更好/更快的方式来每次获取网页，我使用以下功能：

> file_get_contents_curl($url)

2) 把所有的谈话放在一个数组中是一个好习惯吗（可能会变得很大）

3) 一般来说，有没有更好的方法可以从网站上获取所有 ted 会谈的详细信息？在 TED 网站上“爬行”以获得所有演讲的最佳方式是什么

**我已经检查了使用 rss 提要的选项，但它缺少我需要的一些细节。

谢谢

```
<?php
define("START_ID", 1);
define("STOP_TED_QUERY",20);
define ("VALID_PAGE","TED | Talks");
/**
 * this script will run as a cron job and will go over all pages
 * on TED http://www.ted.com/talks/view/id/ 
 * from id 1 till there are no more pages
 */

/**
 * function get a file using curl (fast)
 * @param $url - url which we want to get its content
 * @return the data of the file
 * @author XXXXX
 */
function file_get_contents_curl($url)
{
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
}

//will hold all talks in array
$tedTalks = array();

//id to start the query from
$id=START_ID;

//will indicate when needed to stop the query beacuse reached the end id's on TED website
$endOFQuery=0;

//get the time
$time_start = microtime(true);

//start the query on TED website
//if we will query 20 pages in a row that do not exsist we will stop the querys and assume there are no more
while ($endOFQuery < STOP_TED_QUERY){

    //get the page of the talk
    $html = file_get_contents_curl("http://www.ted.com/talks/view/id/$id");

    //parsing begins here:
    $doc = new DOMDocument();
    @$doc->loadHTML($html);
    $nodes = $doc->getElementsByTagName('title');

    //get and display what you need:
    $title = $nodes->item(0)->nodeValue;

    //check if this a valid page
    if (! strcmp ($title , VALID_PAGE ))
        //this is a removed ted talk or the end of the query so raise a flag (if we get anough of these in a row we will stop)
        $endOFQuery++;
    else {
        //this is a valid TED talk get its details

        //reset the flag for end of query
        $endOFQuery = 0;

        //get meta tags
        $metas = $doc->getElementsByTagName('meta');

        //get the tag we need (keywords)
        for ($i = 0; $i < $metas->length; $i++)
        {
            $meta = $metas->item($i);
            if($meta->getAttribute('name') == 'keywords')
                $keywords = $meta->getAttribute('content');
        }

        //create new talk object and populate it
        $talk = new Talk();
        //set its ted id from ted web site
        $talk->setID($id);
        //parse the name (name has un-needed char's in the end)
        $talk->setName( substr($title, 0, strpos( $title, '|')) );

        //parse the String of tags to array
        $keywords = explode(",", $keywords);
        //remove un-needed items from it
        $keywords=array_diff($keywords, array("TED","Talks"));

        //add the filters tags to the talk
        $talk->setTags($keywords);

        //add to the total talks array
        $tedTalks[]=$talk;
    }

    //move to the next ted talk ID to query
    $id++;
} //end of the while

$time_end = microtime(true);
$execution_time = ($time_end - $time_start);
echo "this took (sec) : ".$execution_time;

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:08:08.233

在 github.com 上有一个网络爬虫 php 示例

如果有人在寻找它是如何工作的

[https://github.com/Nimrod007/TED-talks-details-from-TED.com-and-youtube](https://github.com/Nimrod007/TED-talks-details-from-TED.com-and-youtube)

我已经在 Mashape 上发布了一个免费增值 api，实现了这个脚本[https://market.mashape.com/bestapi/ted](https://market.mashape.com/bestapi/ted)

请享用！

# html - css更改同一父项中的元素

> ID：14925950
> 
> 赞同：2
> 
> 时间：2013-02-17T20:55:12.637
> 
> 标签：html, css, input

我想更改与输入相同的父元素中的元素。当我`<input>`专注时，我想改变`<p>`元素的颜色。

```
<div id="sample">
<input type="text">
<p>Hello</p>
</div> 
```

有办法吗？

问候克里斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T20:57:19.160

[相邻兄弟组合](http://www.w3.org/TR/selectors/#adjacent-sibling-combinators)器 CSS 选择器用于以下情况：

```
input:focus + p 
```

这是一个使用您的 HTML 和我的 CSS 选择器的[JSFiddle 示例](http://jsfiddle.net/nf5fV/)，可以满足您的要求。

# c# - 如何将 HQL 内连接转换为 LINQ 连接

> ID：14925957
> 
> 赞同：1
> 
> 时间：2013-02-17T20:55:33.313
> 
> 标签：c#, linq, nhibernate, join, hql

如何在 Linq 中编写此 HQL：

```
select a from A a
join a.childrenList b
where b = 1 
```

`childrenList`是一个枚举列表，它没有按类型映射到数据库，而是与其整数值一起保存。

这个 HQL 工作正常，但我想用 Linq 编写它。我不能写可以编译的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:41:39.900

我认为你可以做到

```
var results = 
    from a in db.Query<A>() 
    where a.childrenList.Any(b => b == (B)1)
    select a; 
```

或者，使用链式方法：

```
var results = db.Query<A>().Where(a => a.childrenList.Any(b => b == (B)1)); 
```

关于我们上面的评论，我认为你可以放弃这些`from A a in ... select a`陈述，因为它们是多余的。

# php - PHP OOP 将类声明为类

> ID：14925958
> 
> 赞同：0
> 
> 时间：2013-02-17T20:55:39.897
> 
> 标签：php, oop

我有 2 节课，为了舒适，我想再上 1 节课 :)

所以我有数据库和系统的课程。我想为函数开设第三堂课。这个类必须使用数据库中的函数，因为有 SQL 查询。这就是我的结尾：

```
class database {
   public function __construct() {

      $this->mysqli = new mysqli('localhost', 'root', '', 'roids');
      $this->func = new functions();
        }
}

class functions {

    function __construct(){
        $db = new database();
    }

    public function banned() {
        $q = $db->select($this->prefix."banned", "*", "banned_ip", $this->getIP());

        if (0 == 0) {
            header('Location: banned.php'); // For testing
        }

    }
} 
```

而我这种版本以循环结束。有什么解决办法吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:12:28.307

您的某些类必须是源，因此其他类可能会使用它的实例。

让我给你看一个例子：

```
class DataBase { //THIS class is a source.
  public $mysqli ;

  public function __construct(){
    $this->mysqli = new mysqli('localhost', 'root', '', 'roids');
    $this->mysqli->set_charset("utf-8") ;
  }

  public function ready(){
    return ($this->mysqli instanceof MySQLi && $this->mysqli->ping()) ;
  }
}

class User {
  protected $db;
  public function __construct(DataBase $db){
    $this->db = $db ; //Now you can use your source
  }

  public function isBanned(){
    if ($this->db->ready()){
      $result = $this->db->mysqli->query("SELECT id FROM banned WHERE name='Hacker' ; ") ;
      return ($result && $result->num_rows >= 1) ;
    }
    return false ;
  }
} 
```

然后实例化源并将其提供给用户实例：

```
$database = new DataBase() ;
$user = new User($database) ; 
```

现在您可以使用更复杂的函数：

```
if ($user->isBanned()) exit("You are banned") ; 
```

您可以使用相同的方式创建类 Functions 并将其（其他类可能使用它）作为源。

# ios - 插入记录时sqlite数据库不改变

> ID：14925959
> 
> 赞同：-1
> 
> 时间：2013-02-17T20:55:43.860
> 
> 标签：ios, sqlite

在这个*非常简单的*iPad 应用程序中，我试图将记录插入到数据库中的表中，然后检索它们。插入操作完成但数据库没有变化，我看不出问题出在哪里。

这是带有数据库的项目。 [http://www.4shared.com/zip/qTmrrpcc/ghadeer1.html](http://www.4shared.com/zip/qTmrrpcc/ghadeer1.html)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:49:59.863

我看到两个`sqlite3_open`命令，一个在`Documents`文件夹中打开数据库，另一个在包中打开它。前者在`Documents`从那里打开之前正确地将数据库从捆绑包复制到。但显然，当您随后打开捆绑包中的副本时，您在该数据库中所做的任何插入都不会反映。两个`sqlite3_open`命令应该遵循相同的过程：从 bundle 复制到`Documents`（如果还没有的话），然后在`Documents`.

* * *

您的`getschools`方法也有一个错误。它说：

```
- (IBAction)getschools:(id)sender {
    static NSInteger currentIndex = 0;
    if (++currentIndex == [self.schools count]) {
        currentIndex=0;
    } else {
        school *aschool = (school *) [self.schools objectAtIndex: currentIndex];
        [self.idview setText:aschool.schoolid];
        [self.nameview setText:aschool.schoolname];
    }
} 
```

大概应该说：

```
- (IBAction)getschools:(id)sender {
    static NSInteger currentIndex = 0;
    if (++currentIndex == [self.schools count]) {
        currentIndex=0;
    } 

    school *aschool = (school *) [self.schools objectAtIndex: currentIndex];
    [self.idview setText:aschool.schoolid];
    [self.nameview setText:aschool.schoolname];
} 
```

我之所以提到它，是因为该错误可能会阻止您查看刚刚插入的记录，当您在其他地方诊断真正的数据库错误时，这会令人困惑。

# php - php会话数据丢失

> ID：14925961
> 
> 赞同：-3
> 
> 时间：2013-02-17T20:55:52.363
> 
> 标签：php, session

我创建了一个进入新页面的登录页面。当我登录时，会话确实被创建但是当我打开一个新页面时，它说登录以查看。在我尝试创建注销脚本之前，代码工作正常。

```
if($_SESSION['user_name'])
{
    echo '<h3> Hello ' . $_SESSION['user_name'] . '. Not you?</h3> <a href="signout.php">Sign out</a>';
}
else
{
    echo '<a href="signin.php">Sign in</a> or <a href="sign up">create an account</a>.';
} 
```

这是重定向页面上的脚本。它总是显示第二句话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:57:28.273

放在`session_start();`脚本的顶部

请注意，在使用`session_start()`.

`UTF-8 without BOM`此外，我建议您使用可以帮助您解决一些神秘的空字符串问题的编码。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:00:12.997

您需要输入“session_start();” 在每个脚本文件的开头。

# c++ - 将浮点数转换为 wchar_t win32

> ID：14925967
> 
> 赞同：2
> 
> 时间：2013-02-17T20:56:18.223
> 
> 标签：c++, windows, winapi, visual-studio-2012

让我感到害怕的是，无论如何我都找不到将 float 转换为 wchar_t 的方法，或者我可能找错了地方！

```
 float cNumbers[9]  = {1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0};
 float x            = 3.0;
 float temp     = 0.0;
 wchar_t data[]     = {0};

 for(int i=0; i < sizeof(cNumbers); i++){

    temp = x / cNumbers[i];
    bool isInt = temp == static_cast<int>(temp);

    if(isInt){
        data =  temp; //this is a big fail
        addToList(hWnd,data);
    }
  }

void addToList(HWND hWnd,const wchar_t * data ){

  SendMessage(GetDlgItem(hWnd,IDC_LISTBOX),LB_ADDSTRING,0,(LPARAM)data); 
} 
```

问题是我想将浮点值转换为 wchar_t 以将其发送到列表框

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T21:05:46.067

在 C++ 中，转换 POD 会将二进制数据重新解释为转换为的类型，而不是进行您想要完成的类型转换。

你有几个选择：

*   您可以`boost::lexical_cast`用于类似演员的转换
*   您可以使用`wsprintf`or`std::wstringstream`来处理从浮点到宽字符串的转换
*   如果您使用的是 MFC/ATL，则可以使用 CString::Format 将浮点数转换为字符串

第二个选项是唯一不使用第三方库的选项，因此如果您在可以使用库方面受到限制，那么您将被困在`wsprintf`std::wstringstream 中。通常，在这种情况下，我的建议是出于类型安全原因和防止缓冲区溢出的保护而使用 std::wstringstream。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T21:07:12.370

已经有了答案：[你可以用什么来将 int/float 转换为 wchar_t*？](https://stackoverflow.com/questions/1860945/what-can-you-use-to-cast-an-int-float-to-a-wchar-t)

只需使用：

```
float x = 0.0f;

std::wostringstream woss;
woss << x;       
std::wstring ws = woss.str();
const wchar_t* cwc = ws.c_str();
std::vector<wchar_t> buf( cwc , cwc + (ws.size() + 1) );
wchar_t* x2 = &buf[0]; 
```

# ruby-on-rails - Rails Paperclip gem错误的参数数量错误

> ID：14925970
> 
> 赞同：2
> 
> 时间：2013-02-17T20:56:25.470
> 
> 标签：ruby-on-rails, paperclip

我正在处理我的第一个 RoR 项目并尝试使用 Paperclip gem，但我遇到了一个我似乎无法弄清楚的错误：

> 参数数量错误（1 代表 0）
> app/controllers/events_controller.rb:43:in `create'
> 参数：

```
{"utf8"=>"✓",
 "authenticity_token"=>"OBYHA0M+TA93sNF3uqrJ/zvnnEyWJUREn4NcOl0ExfA=",
 "event"=>{"title"=>"",
 "image"=>#<ActionDispatch::Http::UploadedFile:0x007f803802b1f0 @original_filename="icon.png",
 @content_type="image/png",
 @headers="Content-Disposition: form-data; name=\"event[image]\"; filename=\"icon.png\"\r\nContent-Type: image/png\r\n",
 @tempfile=#<File:/tmp/RackMultipart20130217-21480-1molvwa>>,
 "description"=>"",
 "date"=>"",
 "time"=>""},
 "commit"=>"Create Event"} 
```

我知道在 create 方法的 events_controller.rb 中，传入了太多参数。但是，我按照 Paperclip 的 Github 上的快速入门说明进行操作，所以我不确定为什么会收到此错误。

这是我的 events_controller.rb 代码

```
def create
    @event = Event.create( params[:event] )
 end 
```

只是为了调试，我尝试将行更改为 Event.create(params[])，此时错误从错误数量的参数（1 代表 0）变为错误数量的参数（0 代表 1）。

这是我的 event.rb 代码

```
class Event < ActiveRecord::Base
    attr_accessible :date, :description, :time, :title, :image
    has_attached_file :image, :styles => { :medium => "300x300>", :thumb => "100x100>" }
end 
```

我已经检查过我正在为所有内容运行正确的版本。我有 Paperclip 3.4.0、Rails 3.2.12、Ruby 1.9.3 和 ImageMagick 6.8.3-1。我正在使用 Ubuntu 12.04 LTS。

我看过不少类似的问题，但大多数似乎发生在几年前，并在随后的 Paperclip 更新中得到解决。我在类似帖子中找到的解决方案都没有为我工作，不幸的是我只是有足够的 Rails 经验还不知道发生了什么。我意识到我可能犯了一个完全新手错误，在这种情况下，我道歉，但仍然非常感谢一些帮助让我走上正轨。

请让我知道是否有任何其他代码或信息对调试有用。

谢谢你的时间！

应用程序跟踪：

> 可卡因 (0.3.2) lib/cocaine/command_line.rb:63:in `run' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/helpers.rb:31:in` run' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/geometry_detector_factory .rb:18:in `block in geometry_string' activesupport (3.2.12) lib/active_support/core_ext/kernel/reporting.rb:43:in`quiet_stream' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/geometry_detector_factory.rb:17:in `geometry_string' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/geometry_detector_factory.rb:9:in` make' /home/用户/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/geometry.rb:26:in `from_file' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/thumbnail.rb:35:in` 初始化'/home/user/.rvm/gems/ruby-1.9。 3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/processor.rb:33:in `new' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/processor.rb:33:in` make' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913 /lib/paperclip/attachment.rb:431:in `block in post_process_style' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/attachment.rb:430:in` 每个'/home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/attachment.rb:430:in `inject' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/attachment.rb:430:in` post_process_style'/home/user/.rvm/gems /ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/attachment.rb:423:in `block in post_process_styles' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/attachment.rb:422:in` each' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/ gems/paperclip-dcd2774e7913/lib/paperclip/attachment.rb:422:in `post_process_styles' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/attachment.rb:415:in` block (2 levels) in post_process' activesupport (3.2.12) lib/active_support/callbacks.rb:403:in `_run__3384881169595487878__image_post_process__96086910066492375__callbacks' activesupport (3.2.12) lib/active_support/callbacks.rb:405:in` __run_callback' activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_image_post_process_callbacks' activesupport (3.2.12) lib/active_support/callbacks.rb:81:in`run_callbacks' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/callbacks.rb:26:in `run_paperclip_callbacks' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/attachment.rb:414:in` 阻止 post_process 的 activesupport (3.2.12) lib/active_support/callbacks.rb:403： 在`_run__3384881169595487878__post_process__96086910066492375__callbacks' activesupport (3.2.12) lib/active_support/callbacks.rb:405:in` __run_callback' activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_post_process_callbacks' activesupport (3.2.12) lib/active_support/callbacks.rb:81:in` run_callbacks' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip /callbacks.rb:26:in `run_paperclip_callbacks' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/attachment.rb:413:in` post_process' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip/attachment.rb:108:in `assign' /home/user/.rvm/gems/ruby-1.9.3-p385/bundler/gems/paperclip-dcd2774e7913/lib/paperclip.rb:200:in`block in has_attached_file ' activerecord (3.2.12) lib/active_record/attribute_assignment.rb:85:in `block in assign_attributes' activerecord (3.2.12) lib/active_record/attribute_assignment.rb:78:in`each' activerecord (3.2.12) lib/active_record/attribute_assignment.rb:78:in `assign_attributes' activerecord (3.2.12) lib/active_record/base.rb:497:in`initialize' activerecord (3.2.12) lib/active_record/persistence .rb:44:in `new' activerecord (3.2.12) lib/active_record/persistence.rb:44:in`create' app/controllers/events_controller.rb:43:in `create' actionpack (3.2.12) lib/action_controller/metal/implicit_render.rb:4:in` send_action' actionpack (3.2.12) lib/abstract_controller/base.rb:167:in`process_action' actionpack (3.2.12) lib/action_controller/metal/rendering.rb:10:in` process_action' actionpack (3.2.12) lib/abstract_controller/callbacks.rb:18:in `block in process_action' activesupport (3.2.12) lib/active_support/callbacks.rb:414:in` *run* _3332570171411252513__process_action_ *3320642634939127128* _callbacks' activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `__run_callback' activesupport (3.2.12) lib/active_support/callbacks.rb:385:in`_3_process_action_callback (support.21) libs' active. /active_support/callbacks.rb:81:in `run_callbacks' actionpack (3.2.12) lib/abstract_controller/callbacks.rb:17:in`process_action' actionpack (3.2.12) lib/action_controller/metal/rescue.rb:29:in `process_action' actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:30:in`block in process_action' activesupport (3.2.12) lib/active_support/notifications.rb:123 :in `block in instrument' activesupport (3.2.12) lib/active_support/notifications/instrumenter.rb:20:in`instrument' activesupport (3.2.12) lib/active_support/notifications.rb:123:in `instrument' actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:29:in`process_action' actionpack (3.2.12) lib/action_controller/metal/params_wrapper.rb:207:in`process_action' activerecord (3.2.12) lib/active_record/railties/controller_runtime.rb:18:in` process_action' actionpack (3.2.12) lib/abstract_controller/base.rb:121:in `process' actionpack (3.2.12) lib/abstract_controller/rendering.rb:45:in`process' actionpack (3.2.12) lib/action_controller/metal.rb:203:in `dispatch' actionpack (3.2.12) lib/action_controller/metal/rack_delegation.rb:14:in` dispatch' actionpack (3.2.12) lib/action_controller/ metal.rb:246:in `block in action' actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:73:in`call' actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:73:in `dispatch' actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:36:in` call' Journey (1.0.4) lib/journey/router.rb:68:in `block in call' journey (1.0.4) lib/journey/router.rb:56:in`each' Journey (1.0.4) lib/journey/router.rb:56:in `call' actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:601:in`call' actionpack (3.2.12) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call' rack (1.4.5) lib/rack/etag.rb:23:in`call' rack (1.4.5) lib/rack/conditionalget .rb:35:in `call' actionpack (3.2.12) lib/action_dispatch/middleware/head.rb:14:in`call' actionpack (3.2.12) lib/action_dispatch/middleware/params_parser.rb:21:in `call' actionpack (3.2.12) lib/action_dispatch/middleware/flash.rb:242:in` call' rack (1.4.5) lib/rack/session/abstract/id.rb:210:in`context' rack (1.4.5) lib/rack/session/abstract/id.rb:205:in`call' actionpack (3.2.12) lib/action_dispatch/middleware/cookies.rb:341:in `call' activerecord (3.2.12) lib/active_record/query_cache.rb:64:in`call' activerecord (3.2.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call' actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:28:in`block in call' activesupport ( 3.2.12) lib/active_support/callbacks.rb:405:in `_run__1281245379307539657__call__96086910066492375__callbacks' activesupport (3.2.12) lib/active_support/callbacks.rb:405:in` __run_callback' activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_call_callbacks' activesupport (3.2.12) lib/active_support/callbacks.rb:81:in` run_callbacks' actionpack (3.2.12) lib/action_dispatch/middleware/callbacks。 rb:27:in `call' actionpack (3.2.12) lib/action_dispatch/middleware/reloader.rb:65:in`call' actionpack (3.2.12) lib/action_dispatch/middleware/remote_ip.rb:31:in `call' actionpack (3.2.12) lib/action_dispatch/middleware/debug_exceptions.rb:16:in`call' actionpack (3.2.12) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call' railties (3.2.12) lib/rails/rack/logger.rb:32:in`call_app' railties (3.2.12) lib/rails/rack/logger.rb:16:in`block in call' activesupport (3.2.12) lib/active_support/tagged_logging.rb:22:in`标记'railties (3.2.12) lib/rails/rack/logger.rb:16:in`call' actionpack (3.2.12) lib/action_dispatch/middleware/request_id.rb:22:in`call' rack (1.4.5) lib/rack/methodoverride.rb:21:in `call' rack (1.4.5) lib/rack/runtime.rb:17:in`call' activesupport (3.2.12) lib/active_support/cache/strategy/local_cache.rb:72:in `call' rack (1.4.5) lib/rack/lock.rb:15:in`call' actionpack (3.2.12) lib/action_dispatch/middleware/static.rb:62:in `call' railties (3.2.12) lib/rails/engine.rb:479:in`call' railties (3.2.12) lib/rails/application.rb:223:in `call' rack (1.4.5) lib/rack/content_length.rb:14:in`call' railties (3.2.12) lib/rails/rack/log_tailer.rb: 17：在`call' rack (1.4.5) lib/rack/handler/webrick.rb:59:in`服务中'/home/user/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/webrick/httpserver.rb:138 :在`service' /home/user/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/webrick/httpserver.rb:94:in` 运行中'/home/user/.rvm/ rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:15:18.260

You are using the wrong version of cocaine. Run `bundle install` then make sure you are using `bundle exec rails s` to start your rails server.

The run method in the newer version of cocaine (~> 0.4.0) takes an optional argument (`def run(interpolations = {})`) that the older version (0.3.2) didn't.

See comments above.

# ruby-on-rails-3 - 带有 Rails 模型的 stub_chain 缺少 Rspec 方法

> ID：14925972
> 
> 赞同：2
> 
> 时间：2013-02-17T20:56:28.140
> 
> 标签：ruby-on-rails-3, rspec, rspec2, stub

我试图用来`stub_chain`模拟控制器操作中的一系列调用。但是它抱怨找不到方法错误。经过大量搜索，我并没有真正找到与此特定错误相关的任何信息，所以我认为我遗漏了一些相当明显的东西。有任何想法吗？

谢谢。

这是错误：

```
Admin::AccountsController GET #index with accounts 
 Failure/Error: before(:each) { Account.stub_chain(:scoped, :page, :order).returns([account]) }
 NoMethodError:
   undefined method `stub_chain' for #<Class:0x007f96c6448158>
 # ./spec/controllers/admin/accounts_controller_spec.rb:11:in `block (4 levels) in <top (required)>' 
```

规范来源：

```
#spec/controllers/admin/accounts_controller.rb
describe 'GET #index' do

  context 'with accounts' do

    let(:account) { FactoryGirl.build_stubbed(:account) }
    before(:each) { Account.stub_chain(:scoped, :page, :order).returns([account]) }

    subject { get :index }

    it { should render_template(:index) }
    it { should assign_to(:accounts) }
    it { should respond_with(:success) }
    it { should_not set_the_flash }
  end
end 
```

# ios - 如何测试 Facebook 移动应用安装广告“Last Mobile Install Reported”字段？

> ID：14925974
> 
> 赞同：9
> 
> 时间：2013-02-17T20:56:33.623
> 
> 标签：ios, facebook, sdk, ads

我已经集成了 Facebook SDK，并将代码 [FBSettings publishInstall:YOUR_APP_ID]; 在，它在返回值 true 的情况下工作得很好。

我正在使用 ad hoc 分发对其进行测试，由于某种原因，上次报告的移动安装字段未显示。而且我得到的 Facebook 应用摘要页面似乎与其他人不同。

![这是我的摘要页面](../Images/ffa575dc0f56e152980309c1552b0135.png)

![这是别人得到的](../Images/d63691d274d79bd4cab100196ca95416.png)

我的问题是：

1.  我是否需要先将应用程序发布到 Apple 商店，然后通过 Facebook 广告下载才能显示“上次报告的移动安装”？

2.  我的猜测是，由于我将该应用程序作为 Ad Hoc 安装到我的设备上，而不是通过 Facebook，因此“报告的上次移动安装”不起作用。如果是这样的话就足够公平了，因为我希望 Facebook 只有在人们通过 Facebook 广告下载和安装应用程序时才会向我收费。但我不确定我的猜测是否正确。谁能澄清 facebook 移动应用安装广告的工作原理？顺便说一句，我已经阅读了[https://developers.facebook.com/docs/tutorials/mobile-app-ads/](https://developers.facebook.com/docs/tutorials/mobile-app-ads/)。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-12T01:33:21.857

我知道我回答这个问题有点晚了，但也许这会对其他人有所帮助。我刚刚在 fb 上为我的应用投放了我的第一个广告活动并跟踪了安装。

首先，您测试您的应用是否正确安装了 fb 框架并报告安装的方式是：

在 App Dashboard -> Insights -> App Events -> Overview 中查找“fb_mobile_activate_app”事件以显示在 fb 中。它应该会在应用程序打开后的一分钟内出现。

1.  您的应用程序不必发布。我正在从模拟器中获取安装数据。
2.  FB 会跟踪所有打开情况，如果同一用户在过去 28 天内点击了您的一个广告，则将其计为一次安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T10:21:40.037

1.  您的应用无需发布即可看到该功能。即使是我们的开发状态应用程序，我们也看到了统计数据。

2.  Last Mobile Install Reported 也适用于非 Facebook 广告相关的安装。他们基本上接受任何安装。

似乎您已经有了 Mobile Install Reported 值。如果您按照以下文章中的说明正确设置 Info.plist，我认为它不会报告重复的设备。在“移动测量的高级步骤”下，转到第 2 步。

[https://developers.facebook.com/docs/tutorials/mobile-app-ads/](https://developers.facebook.com/docs/tutorials/mobile-app-ads/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-05T08:52:21.877

查看您的安装有一个“技巧”。

是的，您可以在模拟器或您的设备上测试“应用安装”……但是……您可能在 Facebook 仪表板上看不到它们。

相反，首先转到应用仪表板左侧菜单中的 INSIGHTS 选项卡。您可能会在此处看到应用安装 - 但您可能不会。

其次，如果您没有看到任何应用安装的实时数据，请查看名为“应用启动”的部分。这可以用作您的应用程序正在运行的替代指标。

第三，如果您没有看到“应用启动”的实时数据，请查看日期范围。更改日期范围以扩展到明天的日期。给 Facebook 1-2 分钟的时间来更新您的数据。此时，您现在可以看到正在发生实时应用程序启动 - 因此您将知道您与 FB 的连接正在工作。

# ruby-on-rails - 从 Rails 3 中的单个 csv 导入关联模型

> ID：14925975
> 
> 赞同：1
> 
> 时间：2013-02-17T20:56:49.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3, csv, import

我一直在关注 rails cast 剧集[Importing CSV and excel](http://railscasts.com/episodes/396-importing-csv-and-excel?view=asciicast)，但我的设置略有不同。

我有两个模型，用法（数量）和价格（数量）。我已经设置好了，所以使用 has_one price 和 price belongs_to a usage。在我的 csv 中，我有两列，如下所示：

```
usage,price
1000,0.1
1500,0.11 
```

我正在尝试导入数据，以便将usage.amount 和usage.price.amount 获取到我的数据库中。

我看了一下[here](https://stackoverflow.com/questions/14642121/when-importing-a-csv-how-do-i-handle-data-in-a-row-that-corresponds-to-an-assoc?rq=1)，并尝试了那里的一切。需要注意的一件事是我没有 id 列（尽管我尝试使用 id 列并且该问题的代码仍然无效）。

这是我模型中的代码：

```
class Usage < ActiveRecord::Base
  has_one :price, dependent: :destroy

  accepts_nested_attributes_for :price

  def self.import(file)
    CSV.foreach(file.path, headers: true) do |row|
      Usage.create! row.to_hash
    end
  end
end 
```

注意：我知道上面没有提到导入 price.amount，但是我尝试过的任何东西都行不通。

对此的任何帮助将不胜感激，谢谢！

**更新**

以下是我的工作方式：（感谢**alalani**帮助编写以下代码。）

```
CSV.foreach(file.path, headers: true) do |row|
  u = Usage.create(amount: row[0])
  u.create_price(amount: row[1])
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:07:44.330

为什么不简单地创建类的新实例并手动添加呢？

所以你可以这样做：

```
def self.import(file)    
    CSV.foreach(file.path, headers: true) do |row|
        u = Usage.new(:amount => row[0])
        u.save
        p = Price.new(:amount => row[1])
        p.save
        u.price << p
    end
end 
```

这似乎需要更多的工作，但很容易理解这里发生了什么

# javascript - 在函数中捕获提示值以进行 SVG 转换

> ID：14925976
> 
> 赞同：0
> 
> 时间：2013-02-17T20:56:50.173
> 
> 标签：javascript, jquery, svg, jquery-svg

我有这个函数，我想从 prmpts 中获取值并将它们插入到转换矩阵中。由于某种原因，这不起作用。我认为问题是因为我需要在每个 var 之前和之后使用 "" ，但是因为它已经在转换矩阵的 " " 中，所以我不能嵌套它们。有任何想法吗？

这是我的代码。

```
<script>
function output() {
    var transformw = prompt("Enter your new width");
    var transformh = prompt("Enter your new height");
    var newnew = 4;
    svgCanvas.changeSelectedAttribute("transform", "matrix( transformw, 0, 0, transformh, 0, 0)");
    svgCanvas.recalculateAllSelectedDimensions();
}
</script> 
```

我有这个函数，我想从 prmpts 中获取值并将它们插入到转换矩阵中。由于某种原因，这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:00:09.310

它不起作用，因为这是一个字符串：

```
"matrix( transformw, 0, 0, transformh, 0, 0)" 
```

您应该将字符串与变量连接起来，如下所示：

```
svgCanvas.changeSelectedAttribute("transform", "matrix(" + transformw + ", 0, 0, " + transformh + ", 0, 0)"); 
```

# ruby-on-rails - RoR - 构建一长串对象

> ID：14925985
> 
> 赞同：0
> 
> 时间：2013-02-17T20:57:48.830
> 
> 标签：ruby-on-rails

快速提问：

是否可以构建多级嵌套对象？这该怎么做？

```
@main_object = Object.new
@main_object.build_anotherobject 
```

问题是：如何在这些子对象中构建更多对象？在 Rails 中这样做是正确的吗？

```
@main_object.another.others.build?? 
```

我不知道该怎么做，以及这是否是实现多级嵌套对象的好方法。另一个问题是关于处理这些嵌套对象中的外键。一些光如何获得正确的FK？我看到我需要以正确的顺序保存对象，因为我需要验证父表中是否存在一行，然后在具有 parent_id 的子表中插入有效的 FK。

我可以忘记这个问题的很大一部分，而是将许多信息放在一张表中，但我想以专业的方式学习，避免在 DB 中重复信息不是一个好点吗？例如，许多人/用户生活在同一个州、同一个城市，所以我认为我不应该一遍又一遍地保存相同的字符串。

感谢大家的关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:15:03.693

您需要将其分配给一个变量：

```
another_object = @main_object.build_anotherobject 
```

进而：

```
another_object.even_more_objects.build 
```

根据需要重复。

# jquery - 如何使用 JQuery 淡化 div

> ID：14925987
> 
> 赞同：2
> 
> 时间：2013-02-17T20:58:09.190
> 
> 标签：jquery, html, fadein, fade, fadeout

我是 jQuery 的新手。我开发了一个有 1 个标题、2 个 DIVS 和 2 个超链接的网页。我在做什么是当用户点击第一个链接时，div 的文本被交换，例如第一个 div 的文本变成了第二个的文本，第二个的文本变成了第一个的文本。这是代码：

**HTML5：**

```
 <h1 style="text-align: center;">Div Content Changer</h1>
  <div id="content-wrapper">
     <div id="contentarea-1">
        <wbr><p>Donizzle posuere auctor maurizzle. Phasellizzle uhuh ... yih! elizzle izzle bow wow wow that's the shizzle tincidunt. Sheezy shizznit own yo'. Vestibulizzle izzle lacizzle maurizzle elementizzle tristique. Nunc ghetto i'm in the shizzle sheezy amet erizzle ultricizzle porta. In velizzle boom shackalack, ultricizzle at, hendrerit bling bling, adipiscing quis, shiz. Etiam velizzle daahng dawg, aliquam consequizzle, pharetra shizzle my nizzle crocodizzle, dictizzle shut the shizzle up, turpizzle. Yo neque. Cras lorizzle. For sure vitae erat izzle libero commodo check out this. Fusce rizzle augue eu nibh ullamcorper mattizzle. Phasellizzle fermentum sapien nizzle fo shizzle. Suspendisse mofo that's the shizzle, fo shizzle sizzle, mattis shizznit, hizzle nec, justo. Donizzle ma nizzle porttitor ligula. Brizzle feugizzle, tellizzle i saw beyonces tizzles and my pizzle went crizzle ornare tempor, da bomb metizzle break yo neck, yall i saw beyonces tizzles and my pizzle went crizzle, egizzle dapibus pede yo mamma dope check out this. Phasellus quam leo, dawg id, tempus izzle, boofron ma nizzle, sapien. Ut i'm in the shizzle magna vizzle ipsizzle. Sizzle ante nibh, suscipizzle vitae, vestibulizzle check out this, brizzle, velizzle. Mauris fizzle tellivizzle. Sizzle fizzle own yo' fo shizzle amet risizzle iaculizzle crazy.</p></wbr>
     </div>
     <div id="contentarea-2">
        <wbr><p>In sagittizzle leo non nisi. Fo shizzle rhoncus, owned shit malesuada facilisizzle, fizzle nulla ghetto phat, gangster auctizzle nulla felizzle dizzle. Suspendisse volutpat izzle shiz. Ass egestizzle lectus crazy sure. Prizzle consectetuer its fo rizzle break it down. Etizzle bow wow wow, dizzle sizzle amet nizzle owned, nizzle sizzle ultrices sizzle, izzle vestibulizzle my shizz fo shizzle sizzle amizzle sizzle. Maecenizzle hendrerit tortizzle brizzle bling bling. Phasellizzle lobortizzle. Gizzle we gonna chung lacus, you son of a bizzle nec, aliquizzle sit amet, da bomb egestas, augue. Fo gangster. Vestibulizzle ipsizzle pizzle in da bomb ma nizzle luctizzle i'm in the shizzle nizzle fo shizzle mah nizzle fo rizzle, mah home g-dizzle its fo rizzle Curae; Ass eu you son of a bizzle eu enim mammasay mammasa mamma oo sa break it down. Fusce est tortizzle, shit dizzle, semper doggy, commodo izzle, nisi. Crackalackin feugizzle, fo shizzle egizzle vehicula crunk, mammasay mammasa mamma oo sa justo izzle lorem, izzle shit mi shizzlin dizzle vitae erizzle.</p></wbr>
     </div>
     <div id="clear"></div>
  </div>
  <nav>
     <ul>
        <li><a href="#1" id="pg1">Page 1</a></li>
        <li><a href="#2" id="pg2">Page 2</a></li>
     </ul>
  </nav> 
```

**CSS3：**

```
 #content-wrapper{
    margin-left: 150px;
 }
 #contentarea-1{
    width: 450px;
    float: left;
 }

 #contentarea-2{
    width: 450px;
    float: left;
    margin-left: 50px;
 }

 #clear{
    clear: both;
 }

 nav{
    text-align: center;
 }

 nav ul{
    list-style: none;
 }

 nav ul li{
    display: inline-block;
    padding: 15px;
 } 
```

**jQuery：**

```
 $(document).ready(function() {
    txt1 = $("#contentarea-1").text();
    txt2 = $("#contentarea-2").text();
    $("#pg1").on('click', function() {
       $("#contentarea-1").text(txt2);
       $("#contentarea-2").text(txt1);
    });
    $("#pg2").on('click', function() {
       $("#contentarea-1").text(txt1);
       $("#contentarea-2").text(txt2);
    });
 }); 
```

**这是工作[演示](http://jsfiddle.net/mareebsiddiqui/KBGp7/)**

但我想做的是，每当用户单击链接时，应该通过 FADE 的效果来交换 DIVS 的文本。

**我希望它足够清楚！**

**任何帮助将不胜感激！:)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:01:41.657

你必须淡出div。你想要的这个东西并没有改变文本，而是改变了 div ......

**编辑**：我以为你想切换它们。这是代码:)

你会像这样褪色：

```
$("#id").fadeOut(500); //where 500 is milliseconds 
```

并淡入：

```
$("#id").fadeIn(500); 
```

试试这个代码：

```
$("#pg1").on('click', function() {
    $("#contentarea-1").fadeOut(500, function() {
        $("#contentarea-2").fadeIn();
    });
});
$("#pg2").on('click', function() {
    $("#contentarea-2").fadeOut(500, function() {
        $("#contentarea-1").fadeIn();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T21:04:52.073

```
txt1 = $("#contentarea-1").text();
txt2 = $("#contentarea-2").text();
$("#pg1").on('click', function() {
    $('#contentarea-2').fadeOut(500);
    $('#contentarea-1').fadeOut(500, function(){
        $("#contentarea-1").text(txt2);
        $("#contentarea-2").text(txt1);
        $('#contentarea-1').fadeIn(500);
        $('#contentarea-2').fadeIn(500);
    });
});
$("#pg2").on('click', function() {
    $('#contentarea-2').fadeOut(500);
    $('#contentarea-1').fadeOut(500, function(){
        $("#contentarea-1").text(txt1);
        $("#contentarea-2").text(txt2);
        $('#contentarea-1').fadeIn(500);
        $('#contentarea-2').fadeIn(500);
    });
}); 
```

在你的小提琴上试试这个。希望对你有效。再见。

# r - Fminuc Matlab 到 Optim R 的转换 - 增加 R 中的优化能力

> ID：14925988
> 
> 赞同：0
> 
> 时间：2013-02-17T20:58:09.783
> 
> 标签：r, matlab, optimization

我目前正在将一组使用优化器计算对数似然度的 matlab 模型转换为`fminunc`使用`optim 'BFGS'`.

我有所有 matlab 模型的初始值、最大似然值和最终参数结果。大多数 R 转换模型可以使用与 matlab 相同的初始参数找到使用 optim、相同的对数似然和相同的最终参数值。然而，有些人陷入了局部最优，可以通过将 matlab 结束参数值作为初始值来修复，然后这些模型找到 matlab 最大似然值。

是否对 R 有更强大的优化，与 matlab 相提并论，或者只是 R 更有可能陷入局部最优，因此初始参数值在它们实现卡住的最大对数可能性方面变得更加关键局部优化？

```
res<-optim(par=x,fn=BOTH4classnochange,hessian=TRUE,method='BFGS',control=list(maxit=MaxIter,abstol=TolFun,reltol=TolX)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:23:00.230

您是否知道[CRAN Task View on Optimization](http://cran.r-project.org/web/views/Optimization.html)列出了每个相关的包？是的，有几十个。

# objective-c - 为什么抛出异常的范围没有显示为 gcov/CoverStory 中的内容？

> ID：14925990
> 
> 赞同：4
> 
> 时间：2013-02-17T20:58:25.993
> 
> 标签：objective-c, xcode, gcov, coverstory

我正在使用 Xcode 4.6 中的覆盖工具并使用 CoverStory 进行可视化。无论我做什么，CoverStory 都不会显示我抛出 Objective-C 异常的范围，即使在这些行上运行带有断点的单元测试时，我遇到了断点，并且测试（预计会抛出）全部通过。

是否需要设置一些设置才能使覆盖工具看到这一点？

编辑：我在这里找到了 CoverStory 的排除标志[。](http://code.google.com/p/coverstory/wiki/NonFeasibleCode)对我来说仍然很奇怪，它没有看到这条线被执行。这是为什么？

# r - 如何使用 rpy2 中的 ggplot 注释子图？

> ID：14925992
> 
> 赞同：1
> 
> 时间：2013-02-17T20:58:28.287
> 
> 标签：r, ggplot2, pandas, rpy2

我正在使用 Rpy2 用 ggplot2 绘制数据帧。我制作了以下情节：

```
p = ggplot2.ggplot(iris) + \
    ggplot2.geom_point(ggplot2.aes_string(x="Sepal.Length", y="Sepal.Width")) + \
    ggplot2.facet_wrap(Formula("~Species"))
p.plot()
r["dev.off"]() 
```

我想用一些关于情节的统计数据来注释每个子情节。例如，我想计算每个 x/y 子图之间的相关性并将其放在图的右上角。如何才能做到这一点？理想情况下，我想将数据帧从 R 转换为 Python 对象，计算相关性，然后将它们投影到散点上。以下转换不起作用，但这就是我正在尝试的方式：

```
# This does not work 
#iris_df = pandas.DataFrame({"Sepal.Length": rpy2.robjects.default_ri2py(iris.rx("Sepal.Length")),
#                            "Sepal.Width": rpy2.robjects.default_ri2py(iris.rx("Sepal.Width")),
#                            "Species": rpy2.robjects.default_ri2py(iris.rx("Species"))})
# So we access iris using R to compute the correlation
x = iris_py.rx("Sepal.Length")
y = iris_py.rx("Sepal.Width")
# compute r.cor(x, y) and divide up by Species
# Assume we get a vector of length Species saying what the
# correlation is for each Species' Petal Length/Width
p = ggplot2.ggplot(iris) + \
    ggplot2.geom_point(ggplot2.aes_string(x="Sepal.Length", y="Sepal.Width")) + \
    ggplot2.facet_wrap(Formula("~Species")) + \
    # ...
    # How to project correlation?
p.plot()
r["dev.off"]() 
```

但是假设我实际上可以从 Python 访问 R 数据框，我该如何绘制这些相关性呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:40:37.067

解决方案是为每个绘制的样本创建一个带有标签的数据框。数据框的列应与数据框的相应列名与原始数据匹配。然后可以用以下方式绘制：

`p += ggplot2.geom_text(data=labels_df, mapping=ggplot2.aes_string(x="1", y="1", mapping="labels"))`

其中`labels_df`是包含标签的数据框，是要绘制的标签`labels`的列名。在这种情况下，将是每个子图中标签的坐标位置。`labels_df``(1,1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-28T19:51:48.290

我发现@user248237dfsf 的答案对我不起作用。ggplot 在我正在绘制的数据框和我用于标签的数据框之间感到困惑。

相反，我使用 ggplot2_env = robjects.baseenv'as.environment'

```
class GBaseObject(robjects.RObject):
  @classmethod
  def new(*args, **kwargs):
    args_list = list(args)
    cls = args_list.pop(0)
    res = cls(cls._constructor(*args_list, **kwargs))
    return res

class Annotate(GBaseObject):
  _constructor = ggplot2_env['annotate']
annotate = Annotate.new 
```

现在，我有了一些像标准注释一样的东西。

```
annotate(geom = "text", x = 1, y = 1, label = "MPC") 
```

一个小评论：我不知道这是否适用于刻面。

# android - Android：自定义 SeekBar 图层列表未按预期工作

> ID：14925993
> 
> 赞同：1
> 
> 时间：2013-02-17T20:58:29.127
> 
> 标签：android, seekbar

我有一个自定义的 SeekBar：

```
<SeekBar 
   android:id="@+id/seekBar"
    android:layout_width="@dimen/seekbar_width"
    android:layout_height="wrap_content"
    android:paddingTop="15px"
    android:paddingBottom="15px"
    android:secondaryProgress="0"
    android:progress="0"
    style="@style/CustomSeekBar"/> 
```

这种风格：

```
<style name="CustomSeekBar">
    <item name="android:layout_width">@dimen/seekbar_width</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:progressDrawable">@drawable/custom_seekbar_progress</item>
    <item name="android:thumb">@drawable/slider_bar_grip</item>
</style> 
```

如果图层列表带有它，我已经尝试了两种类型。首先有九个补丁图像：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background"           android:drawable="@drawable/slider_bar_track"></item>
    <item android:id="@android:id/secondaryProgress"    android:drawable="@drawable/slider_bar_track"></item>
    <item android:id="@android:id/progress"             android:drawable="@drawable/slider_bar_hlt"  ></item>
</layer-list> 
```

其次是项目和渐变：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background">
        <shape>
            <corners android:bottomLeftRadius="4px" android:topLeftRadius="4px" android:topRightRadius="4px" android:bottomRightRadius="4px"/>
            <gradient android:startColor="@color/dark_grey" android:endColor="@color/light_grey" android:angle="-90.0" />
        </shape>
    </item>
    <item android:id="@android:id/secondaryProgress">
        <clip>
            <shape>
                <corners android:bottomLeftRadius="4px" android:topLeftRadius="4px" android:topRightRadius="4px" android:bottomRightRadius="4px"/>
            <gradient android:startColor="@color/dark_grey" android:endColor="@color/light_grey" android:angle="-90.0" />
            </shape>
        </clip>
    </item>
    <item android:id="@android:id/progress">
        <clip>
            <shape>
                <corners android:bottomLeftRadius="4px" android:topLeftRadius="4px" android:topRightRadius="4px" android:bottomRightRadius="4px"/>
                <gradient android:startColor="@color/orange" android:endColor="@color/orange" android:centerColor="@color/light_orange" android:angle="90.0" />
            </shape>
        </clip>
    </item>
</layer-list> 
```

它应该是这样的：![在此处输入图像描述](../Images/ec7c869d996671907310b2bab28b3261.png)

图片如下所示：![在此处输入图像描述](../Images/35782171bfa16bd45e9f34795f727297.png) 高度太高（进度、背景和拇指 png 均为 12 像素高，背景和进度 png 在顶部和底部具有透明像素以使它们具有相同的高度）![在此处输入图像描述](../Images/8278017929503d5ce36a75eb4266b513.png) ![在此处输入图像描述](../Images/1a42acc00de67da0ba5bd9c3575037d0.png) ![在此处输入图像描述](../Images/90cdaef8e9676c14f9ec99d7102e87fa.png)我将这三个文件放在 res 文件夹中，用于所有具有相同大小的密度（如我所愿）。此外，进度总是延伸到 SeekBar 的整个宽度。我试图更改图层列表的顺序，但无济于事。

使用图层列表中的形状时，它看起来像这样：![在此处输入图像描述](../Images/4ff7ea5a70611d08078f5a280a0c7845.png) 至少在这里，进度是正确的，但高度仍然太高。

在这种情况下，我需要所有密度的高度相同（12px，而不是 dp）。屏幕截图来自 xhdpi 设备。可绘制进度的高度与 mdpi 设备上的拇指相同。我怎样才能让它们在所有设备上看起来都一样，并且让可绘制的进度小于拇指？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:19:30.357

问题是在进度和背景 png 的左边框上定义的可拉伸区域。

可拉伸区域目前大约是 1 像素宽，正好位于左边缘的中间。这意味着您的 png 的水平中心线将被拉伸。但是您需要的是“拉伸透明区域”。

这样做：

*   删除左边缘中间的黑色像素。
*   在大约 y=3 和 y=9 的左边缘添加 2 个黑色像素（确保它们都在 png 的透明区域中）