# StackOverflow 问答 12923000-12923999

# linux - csh 内联数学

> ID：12923004
> 
> 赞同：3
> 
> 时间：2012-10-16T20:36:36.940
> 
> 标签：linux, shell, csh

我需要在**csh**中做一些整数数学运算（不，其他 shell 不是一个选项，bc 也不是，perl 也不是，python 句号也不是）。

在**bash**我的任务看起来像

```
seq 1 1 10 > m.txt  #supplied from elsewhere
a=2                 #supplied from elsewhere
b=3                 #supplied from elsewhere
head -n $[$a*$b] m.txt # the line in question 
```

那么问题是*csh 中是否有一个计算* `$[$a*$b]` *内联的表达式？*
我知道我可以`@ c = $a * $b`在 csh 中做，但这不是内联的。我做了一些谷歌搜索和搜索，但到目前为止没有成功，所以非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:16:30.237

您使用方括号是为了表示数组符号或矩阵数学吗？csh 没有这样的内置功能。

否则，如果您的意思是 bash `$(($a * $b))`，您可以使用带有反引号的 csh cmd-substitution 来给您

```
head -n `expr $a \* $b` m.txt 
```

请注意，如果您的目标是避免产生额外的进程，这不符合您的目标，但它是“在线”的

**编辑**我看到我输错了`$( $a * $b )`，请参阅上面的内联更正。

IHTH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T21:12:23.223

不使用外壳之外的东西，不。

旧学校 shell 脚本中数学的常见罪魁祸首是`expr`：

```
head -n `expr $a \* $b` m.txt 
```

但是，如果这与*et al*一样*严格*，那么您就不走运了。时期。`bc`

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T23:24:20.310

是的，但它并不漂亮：

```
% seq 1 1 10 > m.txt
% set a = 2
% set b = 3
% head -n `@ tmp = $a * $b ; echo $tmp ; unset tmp` m.txt
1
2
3
4
5
6 
```

请注意，`$tmp`如果您碰巧有一个具有该名称的变量，这将导致崩溃，因此请选择一个唯一的名称。

（虽然我想知道为什么 bc、perl 和 python 不是一个选项。）*

# c# - 蛮力 - c#

> ID：12923007
> 
> 赞同：2
> 
> 时间：2012-10-16T20:36:56.177
> 
> 标签：c#, textbox, brute-force

我尝试制作简单的蛮力算法。它工作正常。但我正在看这个视频

[http://www.youtube.com/watch?v=v2xwfiggRYk&feature=relmfu](http://www.youtube.com/watch?v=v2xwficgRYk&feature=relmfu)

（时间 10:30）正如您在 textbox2 中看到的那样，可能性发生了变化。但在我的程序中。我创建 1323 作为密码，然后当我点击暴力时，我等了 5 秒，在 textbox2 中得到 99999，在 textbox3 中得到 1323。为什么我看不到textbox2 中的数字流与视频一样吗？

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    } 

    int a, b;

    private void button1_Click(object sender, EventArgs e)
    {
        a = Convert.ToInt16(textBox1.Text);
    }

    private void button2_Click_1(object sender, EventArgs e)
    {
        for (int i = 0; i < 100000; i++) 
        {
            textBox2.Text = "" + i;
            if (a == i) textBox3.Text = "" + i; 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:43:53.890

那是因为视频中的程序在单独的线程中运行暴力循环。

在您的程序中，循环在主线程中运行，因此只要它在运行，就没有线程监视所有用户界面更新发生的消息泵。

每当`Text`更改文本框的属性时，都会在消息队列中删除一条消息，需要重新绘制文本框以显示该值，但主线程正忙于运行循环并且不会对消息进行操作，直到循环完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T20:44:41.743

在 Windows 窗体中，用户界面有一个线程，后面代码中的所有代码也在这个线程上处理，所以当它运行你的`for`循环时，它不会重新绘制屏幕中的更改。

解决此问题的方法是使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)在单独的线程上进行处理，并允许用户界面线程将更改重新绘制到屏幕上。

关于您的代码示例的几点，您应该像这样声明您的字段：

```
public partial class Form1 : Form
{
    private int a;
    private int b;

    ...
} 
```

你也应该给他们更有意义的名字！

此外，您应该`.ToString()`在 int 上使用该方法，而不是将其与空字符串连接来获取文本值。

```
textBox2.Text = i.ToString(); 
```

# scala - 如何根据现有数组值创建唯一值的集合

> ID：12923008
> 
> 赞同：1
> 
> 时间：2012-10-16T20:37:12.303
> 
> 标签：scala

下面的代码打印一个文件名数组。

```
 val pdfFileArray = getFiles()
  for(fileName <- pdfFileArray){
    println(fileName)
  } 
```

我正在尝试将此数组（pdfFileArray）转换为包含唯一文件扩展名的数组。

在 scala 中执行此操作的正确方法如下？

```
 Set<String> fileNameSet = new HashSet<String>
  val pdfFileArray = getFiles()
  for(fileName <- pdfFileArray){
    String extension = fileName.substring(fileName.lastIndexOf('.'));
    fileNameSet.add(extension)
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:51:12.610

这将正确处理没有扩展名的文件（通过忽略它们）

```
val extensions = getFiles().map{_.split('.').tail.lastOption}.flatten.distinct 
```

所以

```
Array("foo.jpg", "bar.jpg", "baz.png", "foobar") 
```

变成

```
Array("jpg", "png") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:41:40.497

scala 的集合中有一个名为 的方法`distinct`，它会删除集合中的所有重复条目。例如：

```
scala> List(1, 2, 3, 1, 2).distinct
res3: List[Int] = List(1, 2, 3) 
```

那是你要找的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T20:45:39.153

你可以这样做：

```
val fileNameSet = pdfFileArray.groupBy(_.split('.').last).keys 
```

这假设您所有的文件名都将具有扩展名，并且您只需要最后一个扩展名。即 something.html.erb 的扩展名为 'erb'

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T20:59:54.380

为了完整起见：

```
List("foo.jpg", "bar.jpg").map(_.takeRight(3)).toSet 
```

在这里，我假设所有扩展都是 3 个字符长。转换为 Set，就像其他答案中的 .distinct 方法（顺便说一下，它在下面使用可变集）一样，为您提供了独特的项目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T02:17:29.090

您也可以使用正则表达式来执行此操作，它提供了更通用的解决方案，因为您可以重新定义表达式以匹配您想要的任何内容：

```
val R = """.*\.(.+)""".r
getFiles.collect{ case R(x) => x }.distinct 
```

# python - 如何在 Django 中预加载 Python 库？

> ID：12923009
> 
> 赞同：1
> 
> 时间：2012-10-16T20:37:18.967
> 
> 标签：python, django, django-admin, django-views, libraries

在我的一个 Django 应用程序中，views.py 中的代码如下所示：

```
import myLib

resultOne = myLib.myFunction('Some data')
resultTwo = myLib.myFunction('Some more data')
resultThree = myLib.myFunction('Even more data') 
```

每当我访问该页面时，加载都需要一分钟。原因是它`myLib`占用了大量内存，并且每次加载页面时都在加载。我知道这一点，`resultTwo`并`resultThree`会在执行后迅速`resultOne`执行。

我想`myLib`在 Django 中预加载，以便将其存储在内存中，所以`resultOne`，，`resultTwo`并且`resultThree`都可以快速执行。我怎样才能做到这一点？

**编辑：** 这可能属于缓存类别。、 和每次都会更改的输入，`resultOne`并且它们经常运行。`resultTwo``resultThree`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:23:01.327

在 Django 中，您可以将其导入`__init__.py`并作为变量访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:48:02.520

如果需要时间的是数据的加载/处理，您应该查看 Django 的[缓存框架](https://docs.djangoproject.com/en/dev/topics/cache/)，它使用[memcached](http://memcached.org)将常用数据存储在单独的进程中。

# internet-explorer - Selenium Internet Explorer 点击功能无法正常工作

> ID：12923011
> 
> 赞同：1
> 
> 时间：2012-10-16T20:37:27.010
> 
> 标签：internet-explorer, selenium, click, webdriver

所以我正在使用 selenium 的 click 函数，它返回成功，但没有发生，我的代码看起来像这样

*`m_Selenium.click(p_TestData.m_saData[TestData.OBJECT]);`* p_TestData.m_saData[TestData.OBJECT] 可能看起来像 link=something 或 css=something...

我知道已经有很多关于这个的话题，但我尝试了所有这些，唯一有效的是 *`m_Driver.findElement(By.xpath(object)).sendKeys("\n");`*

但问题是我有很多使用不同值的测试，而且我不喜欢嵌套 if\else。

所以我尝试了缩放 *`DesiredCapabilities caps = DesiredCapabilities.internetExplorer();
caps.setCapability("ignoreZoomSetting", true);
m_Driver = new InternetExplorerDriver(caps);`*

我尝试将 IE 中的所有安全设置设置为相同的值。

所以我想知道是否有更好的选择？我的代码在 FF、chrome、safari 上运行良好，但在 IE 上不起作用。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:25:55.860

IE 驱动程序无法正确单击的原因有很多。默认情况下，IE 驱动程序使用所谓的“本机事件”来单击元素。有关本地事件的历史及其一些潜在问题的讨论，您可以阅读[这篇博](http://jimevansmusic.blogspot.com/2012/06/whats-wrong-with-internet-explorer.html)文或观看2012 年 Selenium 会议的演示[视频](http://youtube.com/watch?feature=plcp&v=myffo8o67OA)。作为一种解决方法，您可以尝试关闭原生事件，尽管这会带来一系列挑战。

# variables - prolog - 打印变量的值

> ID：12923018
> 
> 赞同：18
> 
> 时间：2012-10-16T20:37:44.910
> 
> 标签：variables, prolog, return-value

我只是不知道如何打印`X`. 这是我在顶层尝试过的：

```
59 ?- read(X).
|: 2.
X = 2.

60 ?- write(X).
_G253
true. 
```

是什么`_G253`？我不想要索引号，我想要 X 绑定的值。我应该怎么做才能打印 的值`X`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-17T17:03:53.447

当您`write(X).`在交互式提示符下键入时，X 不会特别绑定到任何东西。如果您想从用户那里读取 X 然后写入它，请尝试`read(X), write(X).`在提示符处输入。

```
?- read(X), write(X).
|: 28.
28
X = 28. 
```

SWI Prolog 确实保留了顶级绑定的历史；键入`help.`进入手册，然后搜索`bindings`或导航到手册的第 2.8 节“顶层绑定的重用”。在那里，您可以了解到绑定在成功的顶级目标中的任何变量的最新值都将被保留，并且可以使用以美元符号为前缀的变量名称来引用。所以像下面这样的交互是可能的：

```
?- read(X).
|: 42.
X = 42.

?- write($X).
42
true. 
```

但是恰好使用变量名 X 的顶级目标将被解释为使用新变量；否则会违反 Prolog 的正常语义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-12T09:33:46.057

prolog - 作为输入并打印变量的值。

```
go:- write('Enter a name'),nl,
  read(Name),nl,
  print(Name).
print(Name):- write(Name),write(', Hello !!!'). 
```

# java - 将弹簧配置存储在类与 xml 文件中

> ID：12923020
> 
> 赞同：2
> 
> 时间：2012-10-16T20:38:00.807
> 
> 标签：java, spring, spring-mvc

目前我的弹簧配置在一个 xml 文件中（传统方式）。

我喜欢的一件事是在部署期间我可以部署具有我的生产设置的不同版本，或者说在测试环境中我可以在那里进行测试设置。

我喜欢在一个类中配置东西的想法，但这会被编译到我的战争中，然后它就不会那么灵活了。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:44:51.743

Java 配置很棒，它有几个优点：

*   重构友好

*   类型安全

*   更加灵活（您可以编写任何 Java 代码，不受 XML 语义和功能的约束）。

> 我可以部署具有我的生产设置的不同版本，或者说在测试环境中我可以在那里进行测试设置。

调查[Spring `@Profile`s](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/)。它们与您的问题正交（适用于 XML 和`@Configuration`），但最适合您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:39:20.637

这是唯一可用的两种方式。如果您不想在代码中烘焙配置，那么您必须使用 xml。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T20:50:30.767

spring 参考手册包括一个关于结合 Java 和 XML 配置的部分。见[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-java-combining](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-java-combining)

如果您更倾向于以 XML 为中心，您可以使用 XML 引导您的应用程序，然后根据需要以特别的方式引入 Java 配置。这可能是缓和它的好方法。您可能决定一直使用 Java 配置。

# jquery - 即使加载了 jQuery，jQuery 函数也根本不起作用

> ID：12923021
> 
> 赞同：1
> 
> 时间：2012-10-16T20:38:03.893
> 
> 标签：jquery, content-management-system, boonex-dolphin

我为 Boonex Dolphin 7 CMS 开发了一个扩展，该扩展在我的服务器上运行正常，但是当我将它安装在客户端服务器上时，jQuery 函数停止工作。

我查看了文档头，看到正在加载 jQuery。我还尝试在扩展中插入 jQuery 库，但仍然没有任何效果。

在查看我的扩展程序时，它们是在网站和同一页面上正常工作的其他 jQuery 函数，但除了我的扩展程序之外，没有一个 jQuery 函数也不起作用。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:18:19.020

阅读：[http ://css-plus.com/2010/03/6-steps-to-take-if-your-jquery-is-not-working/](http://css-plus.com/2010/03/6-steps-to-take-if-your-jquery-is-not-working/)

我错过了很多次的一件事是脚本的实际加载顺序。它的工作原理很像一般的编程。未声明的变量不能使用。它行不通。

确保加载 jQuery “高于”所有其他脚本，具体取决于它。还要确保 jQuery 在某个时候实际加载。

大多数浏览器都包含某种控制台。只需键入“jQuery”，如果已定义，您将获得返回的 jQuery 对象。

![在此处输入图像描述](../Images/0b2f2c0157961bec17f127f04a59298b.png)![在此处输入图像描述](../Images/d77e55497a4e41aa779e3a91e68b7abf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T10:06:31.400

据我所知 Dolphin Boonex 使用它自己的 jQuery 并且不允许使用另一个。您必须根据您的 dolphin 版本使用的 jQuery 版本来查找 jQuery 应用程序。我相信它是 Dolphin 7 上的 jQuery 1.3.2（但必须经过验证）。

# c# - 当前上下文中不存在注册表单

> ID：12923024
> 
> 赞同：1
> 
> 时间：2012-10-16T20:38:34.523
> 
> 标签：c#, asp.net, sql-server-2012, scope

嘿，伙计们仍在忙于我找到的注册表单文章，我按照伙计们的步骤插入了他发布的代码，但我似乎收到错误“在当前上下文中不存在”我做错了什么还是他的代码有问题？

[http://www.c-sharpcorner.com/uploadfile/rohatash/simple-user-login-in-Asp-Net-using-C-Sharp/](http://www.c-sharpcorner.com/uploadfile/rohatash/simple-user-login-in-Asp-Net-using-C-Sharp/)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;

public partial class StudentLogin : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

}
protected void btnRegister_Click(object sender, EventArgs e)
{
    string strcon = "Data Source=.;uid=sa;pwd=Password$2;database=master";
    SqlConnection con = new SqlConnection(strcon);

    SqlCommand com = new SqlCommand("VC-Temps", con);
    com.CommandType = CommandType.StoredProcedure;
    SqlParameter p1 = new SqlParameter("StudCode", TextBox3.Text);
    SqlParameter p2 = new SqlParameter("Password", TextBox4.Text);
    SqlParameter p3 = new SqlParameter("FirstName", TextBox5.Text);
    SqlParameter p4 = new SqlParameter("LastName", TextBox6.Text);
    SqlParameter p5 = new SqlParameter("Telephone", TextBox7.Text);
    SqlParameter p6 = new SqlParameter("Course", TextBox8.Text);
    SqlParameter p7 = new SqlParameter("Availability", DropDownList1.Text);
    SqlParameter p8 = new SqlParameter("JobSkill", DropDownList2.Text);
    SqlParameter p9 = new SqlParameter("Experience", DropDownList3.Text);
    com.Parameters.Add(p1);
    com.Parameters.Add(p2);
    com.Parameters.Add(p3);
    com.Parameters.Add(p4);
    com.Parameters.Add(p5);
    com.Parameters.Add(p6);
    com.Parameters.Add(p7);
    com.Parameters.Add(p8);
    com.Parameters.Add(p9);
    con.Open();
    com.ExecuteNonQuery();

}
} 
```

错误是：错误 3 当前上下文中不存在名称“CommandType” C:\Website\StudentLogin.aspx.cs 21 27 C:\Website\

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:42:44.997

您需要提供完整的命名空间或添加`using System.Data.SqlClient`.

右键单击`CommandType`并从菜单中选择一个项目`Resolve`..

当 carret 位于有问题的单词上时，您也可以按`Ctrl`+ 。`.`

编辑：`System.Data`需要参考，先检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T13:29:48.567

我收到此错误是因为我在 using 语句中有一个分号。我花了一段时间才看到它。

```
 using (System.Data.SqlClient.SqlCommand cmd = new SqlCommand(sql, sqlConn)); <=no no
    {
        cmd.CommandType = CommandType.Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T01:44:02.347

通过明确包括以下内容以及以下内容来解决我的问题`using System.Data.SqlClient`：

```
using System.Data; 
```

结果`using System.Data.SqlClient`还不够。

# cron - Opencart google_sitemap 网址

> ID：12923032
> 
> 赞同：0
> 
> 时间：2012-10-16T20:39:12.463
> 
> 标签：cron, sitemap, opencart

我在我的网站上使用打开购物车。我想为这些 url 运行一个 cron 作业

*   `http://www.mywebsite.com/index.php?route=feed/google_sitemap`
*   `http://www.mywebsite/index.php?route=feed/google_sitemap/mainIndexXml`

如何将这些 URL 指定到 cron 管理器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:45:23.620

最简单的方法是`wget`根据您的权限使用。这就是说我不明白你为什么要运行这些，尽管我猜你想定期更新它们的缓存？

# c - 如何将C转换为汇编

> ID：12923033
> 
> 赞同：-3
> 
> 时间：2012-10-16T20:39:12.313
> 
> 标签：c, assembly

所以我不懂汇编，但我有一些简单的 c 函数需要转换为汇编。有谁知道如何将这些 c 函数转换为程序集？

```
void printChar( char ch )
{
    printf("%c",ch);
}

int checkRange( long value, long minRange, long maxRange )
{
    if(value >= minRange && value <= maxRange)
        return true;
    else
        return false;
}

int isOdd( long value )
{
    if(value % 2 == 0)
    {
        return false;
    }
    else
    {
         return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T20:39:50.190

将您的函数放在一个`tst.c`文件中并使用以下命令：

```
gcc -c tst.c -S -o - 
```

# c# - 仅将任务 ID 存储在数组中

> ID：12923034
> 
> 赞同：2
> 
> 时间：2012-10-16T20:39:13.863
> 
> 标签：c#, asana

我正在创建一个程序，该程序将使用 Asana 为我的工作场所自动执行某些功能，但有点卡住了。我能够将多个任务提交到工作区并检索每个任务的 ID，但想知道如何仅获取响应的 ID 部分并将其存储到 C# 中的数组或列表中。

GET 上的响应`/tasks?workspace=<workspace-id>&assignee=me`是：

```
{"data":[{"id":2177890732156,"name":"<name of my task>"}]} 
```

我想将我所有任务的 id 号存储到一个数组中，以便我可以对每个任务执行 addProject PUT。

我正在使用序列化程序将数据元素放入正确的字典中以进行 POST，但我想知道是否有办法反转它并仅解析响应的 int 部分，将其存储在数组中并调用它。

序列化程序代码如下：

```
public static string GetJsonByObject(object _object)
    {
        /// Serialize to JSON
        DataContractJsonSerializer serializer = new DataContractJsonSerializer(_object.GetType());
        MemoryStream ms = new MemoryStream();
        serializer.WriteObject(ms, _object);
        return Encoding.Default.GetString(ms.ToArray());
    } 
```

我一直将我的请求存储在一个字节数组中，如下所示：

```
string content;

content = GetJsonByObject(t);
bArrContent = Encoding.UTF8.GetBytes(content);
            request.GetRequestStream().Write(bArrContent, 0, bArrContent.Length);
            request.GetRequestStream().Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:13:16.813

当然可以使用一些 Regex-fu 来解析 ID 字段并存储它们。但是，这有点令人讨厌 - 存在诸如 JSON 和 XML 之类的结构化数据格式的目的是让其他人的解析库为您完成繁琐的工作。

所以，建议 1：使用[JSON.Net](http://james.newtonking.com/projects/json-net.aspx)而不是 DataContractSerializer。吸的少了。

这导致了建议 2：使用库干净地反序列化您的数据，然后使用 Linq 获取 ID 元素：

```
JObject jobj = JObject.Parse(serializedData);
UInt64[] idArr = ((JArray)jobj["data"]).Select(jItem => UInt64.Parse((string)((JObject)jItem["id"]))).ToArray(); 
```

现在您应该在 idArr 中将 ID 列表作为一个数组。

# jquery - 如何为 jQuery 浮动 div 设置下限

> ID：12923038
> 
> 赞同：0
> 
> 时间：2012-10-16T20:39:31.190
> 
> 标签：jquery, jquery-animate, fixed

我有一个像你`div`一样`animate`上下的`scroll`，这是代码，

```
$(document).ready(function(){
    $(window).scroll(function () {
      set = $(document).scrollTop()+"px";
            $('#bymail-inner').animate({top:set},{duration:500,queue:false});
    });
}); 
```

它真的很好用，但是一旦它接近页面底部，有没有办法阻止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:46:04.903

您可以获取视口高度并对照 scrollTop 进行检查。如果你想让它离底部不超过 100 像素......

```
$(window).scroll(function () {
    // added a var so set won't be a global variable
    var set = $(window).height() - 100 > $(document).scrollTop() ? $(document).scrollTop() : $(window).height() - 100;
    $('#bymail-inner').animate({top:set},{duration:500,queue:false});
}); 
```

它使用三元运算符来查看视口 - 100 是否大于滚动顶部，如果是则使用滚动顶部，否则将其设置为视口高度 - 100。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:48:17.527

有一个很好的方法可以使用一点 DOM 数学来检测用户是否在页面底部附近滚动：

```
$(window).scroll(function() {
    if($(window).scrollTop() + $(window).height() > $(document).height() - 100) {
        //User near the bottom, fix it where you want the element to be
        $('#bymail-inner').animate({top:($(window).height()/2)},{duration:500,queue:false});
    }else{
        set = $(document).scrollTop()+"px";
        $('#bymail-inner').animate({top:set},{duration:500,queue:false});
    }
}); 
```

# c - MPI 发送/接收程序永远不会完成

> ID：12923039
> 
> 赞同：3
> 
> 时间：2012-10-16T20:39:33.013
> 
> 标签：c, mpi, deadlock

*我只是花了一段时间为别人的问题写了一个很长的答案，只是为了在我发布答案之前将其删除。不想浪费精力，所以我在这里发布问题和答案。*

*这不仅仅是关于发送/接收死锁的标准答案，因为我还发现了一个有趣的半解决方案，它只适用于某些编译器*

在并行课程中，我们需要做一个基于主从设计模式的练习，其中主进程 0 向他的所有从属进程发送一条消息，这些从属进程将向它们的左右邻居重新发送消息（处理器 id +/- 1，除了没有左邻居的处理器 0 和没有右邻居的最后一个处理器 id）。在将消息重新传递给邻居之后，从处理器向主处理器发送作业结束的确认。

练习很简单，但我的代码存在问题，因为我在程序开始时收到确认结束消息......我不明白这里有什么问题。我尝试使用 fflush，但实际上程序的最后一行应该在接收之后才写入控制台。

有人有什么想法吗？我是 MPI/C 概念的新手，所以我的工作可能有问题？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <mpi.h>

int main(int argc, char *argv[]){
    int np, myId;
    char send[100], recv[100];

    MPI_Init(&argc, &argv);

    MPI_Comm_size(MPI_COMM_WORLD, &np);
    MPI_Comm_rank(MPI_COMM_WORLD, &myId);

    MPI_Status stat;
    if(myId == 0){
        int t = sprintf(send, "hey!"); //MPI_get_processor_name
        for(int i = 1; i < np; i++){
            printf("send %d => %d\n", myId, i);
            fflush(stdout);
            MPI_Send(send, 50, MPI_CHAR, i, 0, MPI_COMM_WORLD);
        }

        for(int i = 1; i < np; i++){
            MPI_Recv(recv, 50, MPI_CHAR, i, 0, MPI_COMM_WORLD, &stat);
            printf("%s\n", recv);
            fflush(stdout);
        }

    }else{
        if(myId < (np - 1)){
            printf("send %d => %d\n", myId, myId + 1);
            fflush(stdout);
            MPI_Send(send, 50, MPI_CHAR, myId + 1, 0, MPI_COMM_WORLD);
        }

        if(myId > 1){
            printf("Envoie %d => %d\n", myId, myId - 1);
            fflush(stdout);
                    MPI_Send(send, 50, MPI_CHAR, myId - 1, 0, MPI_COMM_WORLD);
        }

        MPI_Recv(send, 50, MPI_CHAR, MPI_ANY_SOURCE, 0, MPI_COMM_WORLD, &stat); 

        printf("Réception %d <= %d\n", myId, 0);
        fflush(stdout);

        if(myId != (np - 1)){
            MPI_Recv(send, 50, MPI_CHAR, myId + 1, 0, MPI_COMM_WORLD, &stat);
            printf("Receive %d <= %d\n", myId, myId + 1);
            fflush(stdout);
        }

        if(myId != 1){
            MPI_Recv(send, 50, MPI_CHAR, myId - 1, 0, MPI_COMM_WORLD, &stat);
            printf("Receive %d <= %d\n", myId, myId - 1);
            fflush(stdout);
        }

        int t = sprintf(recv, "End for %d.", myId);
        MPI_Send(recv, 50 , MPI_CHAR, 0, 0, MPI_COMM_WORLD); 
    }

    MPI_Finalize();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T20:39:33.013

## 解决方案 1

让我们比较一下所有非 0 的“从属”内核实际上在做什么和你说他们应该做什么。

你希望他们做什么：

> 主进程 0 向他的所有从属进程发送一条消息，该从属进程将向其左右邻居重新发送消息（处理器 id +/- 1，除了没有左邻居的处理器 0 和最后一个没有左邻居的处理器 id '没有正确的邻居）。在将消息重新传递给邻居之后，从处理器向主处理器发送作业结束的确认。

代码大纲：

```
Send_To_Right_Neighbour();

Send_To_Left_Neighbour();

Receive_From_Master();

Receive_From_Right_Neighbour();

Receive_From_Left_Neighbour();

Send_To_Master(); 
```

看到不同？奴隶在重新发送给他们的邻居之前没有收到来自主人的信息。将代码更改为：

```
Receive_From_Master();

Send_To_Right_Neighbour();

Send_To_Left_Neighbour();

Receive_From_Right_Neighbour();

Receive_From_Left_Neighbour();

Send_To_Master(); 
```

将解决该问题，然后代码为我运行完成。

## 出了什么问题

`MPI_Send` *可以*是一个阻塞函数——即调用`MPI_Send`不会返回，直到另一个进程调用了一个匹配`MPI_Recv`（尽管它不一定*是*一个阻塞函数）。您应该假设在编写代码时它总是会阻塞。

现在让我们想象一下当您使用 >5 个进程运行时，非 0 进程会做什么。

*   进程 1 发送到它的右邻居（进程 2），并在那里等待直到进程 2 调用`MPI_Recv`。
*   进程 2 发送到它的右邻居（进程 3），并在那里等待直到进程 3 调用`MPI_Recv`。
*   进程 3 发送到它的右邻居（进程 4），并在那里等待直到进程 4 调用`MPI_Recv`。
*   ...
*   进程 n-2 发送到它的右邻居（进程 n-1），并在那里等待直到进程 n-1 调用`MPI_Recv`
*   进程 n-1 没有右邻居，因此继续发送到左邻居，并在那里等待直到进程 n-2 调用`MPI_Recv`。

这永远不会发生，因为进程 n-2在尝试从 n-1 接收数据之前正忙于等待进程 n-1 接收**其数据。**这是一个僵局，任何一个进程都不会让步。

## 为什么解决方案有效

我已经说过上述解决方案对我有用——但它并不完美。我所做的唯一更改是将接收从进程 0 移到第一步——为什么这会影响死锁？

答案是它根本不应该影响死锁。我的猜测是编译器已经足够聪明地意识到每个核心都在向同一个邻居发送和接收，并将对左右邻居的单独`MPI_Send`和调用组合成调用。这在同一步骤中向邻居发送和接收，从而摆脱了死锁问题。以前，从 0 开始的接收调用是在发送和接收到同一个邻居之间进行的，因此编译器无法将其优化为单个操作。`MPI_Recv``MPI_Sendrecv`

但是我们不想依赖一个好的编译器——你的代码应该在任何符合标准的编译器上工作——所以我们应该自己手动修复死锁问题，而不是依赖编译器的聪明。

## 解决方案 2

首先，对您目前在课程中可能涵盖或未涵盖的内容的一些评论

*   进程 0 正在向所有其他核心发送相同的信息。如果你知道`MPI_Bcast`你应该使用它而不是所有这些发送和接收。
*   进程 0 最后从所有其他核心接收。如果您愿意接收多个 char 数组，您可以非常简单地使用`MPI_Gather`.
*   我真的不明白主进程向每个其他进程发送一些数据的逻辑，然后每个进程将相同的数据共享给它的每个邻居（主进程已经给了它）。如果共享的数据有所不同，或者主进程仅将数据发送给*某些*从属进程，并且它们必须在彼此之间共享，那对我来说会更有意义。

也就是说，让我们谈谈避免僵局。因此，根本问题是我们必须确保无论`MPI_Send`一个进程调用什么，另一个进程都可以同时调用匹配`MPI_Recv`，**而不必等待发送进程执行其他任何操作**。问题出在每个核心试图同时发送。

因此，我们可以解决的一种方法是首先确定信息将完全朝一个方向移动。我选择了从左到右。在这种情况下，每个从内核必须执行以下操作：

```
Receive_From_Master();

// Make sure all info is sent from left to right
Send_To_Right_Neighbour();
// Make sure any info is received from left to right
Receive_From_Left_Neighbour();

// Now send all info from right to left
Send_To_Left_Neighbour();
// Make sure any info is received 
Receive_From_Right_Neighbour();

Send_To_Master(); 
```

现在发生的事情是这样的：

*   进程 2 开始发送到进程 3
*   进程 3 开始发送到进程 4
*   ...
*   进程 n-2 开始发送到进程 n-1
*   进程 n-1 没有右邻居，因此继续从进程 n-2 接收
*   进程 n-2 完成向进程 n-1 的发送，因此继续从进程 n-3 接收
*   ...
*   进程 3 完成向进程 4 的发送并继续从进程 2 接收。

从左到右发送时也会发生同样的情况，除了现在，进程 1 没有左邻居要发送到 ，因此可以直接从进程 2 接收。在任何一种情况下都不会出现死锁。

# java - 如何使 Swing JTextArea 响应 KeyEvents？

> ID：12923058
> 
> 赞同：0
> 
> 时间：2012-10-16T20:40:40.317
> 
> 标签：java, swing, jtextarea, keyevent

我的 Swing 代码中有一个[`JTextArea`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html)组件，我想添加一个处理程序/侦听器，只要用户在`JTextArea`.

根据上面的 JavaDocs，我可以在`DocumentListener`它的内部添加一个；`Document`模型。但是，当我实现时`DocumentListener`，我必须为以下内容编写实现：

*   `removeUpdate`
*   `insertUpdate`
*   `changedUpdate`

这些**不是**我期望看到的方法类型！我*期待*看到像`onKeyDown(KeyEvent e)`,`onKeyUp(KeyEvent e`等方法。

所以我问：我怎样才能让我`JTextArea`响应按键向上/向下事件？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:43:27.377

这可能是使用键绑定的好情况。稍后，我将为您提供有关此的更多信息。一般来说，您会尽量避免使用 KeyListener，因为这被认为是低级别的构造，并且对于此类事情可能太低，并且通常首选键绑定（根据键绑定教程）。

* * *

**编辑 1**
给你：[如何使用键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

Swing 教程中的直接引用：

> 键绑定的替代方法是使用键侦听器。按键侦听器作为键盘输入的低级接口有它们的位置，但是对于响应单个按键，按键绑定更合适，并且往往会导致更容易维护的代码。如果要在组件没有焦点时激活键绑定，则键侦听器也很困难。键绑定的一些优点是它们在某种程度上是自我记录的，考虑到包含层次结构，鼓励可重用的代码块（Action 对象），并允许轻松删除、自定义或共享操作。此外，它们使更改绑定到动作的键变得容易。动作的另一个优点是它们具有启用状态，这提供了一种简单的方法来禁用动作，而无需跟踪它附加到哪个组件。
> 
> * * *

**编辑 2**
请注意，有时您需要*过滤*输入到组件中的文本，并且您会在其中使用`DocumentFilter`. 我认为您当前的问题对我们有些阻碍，因为您尚未告诉我们此功能的总体目标是什么。请告诉我们更多，以便我们给您一个更好更完整，更正确的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:43:17.057

使用`addKeyListener`（它继承自[Component](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#addKeyListener%28java.awt.event.KeyListener%29)）

# python - python中的“变量，变量=”语法？

> ID：12923059
> 
> 赞同：2
> 
> 时间：2012-10-16T20:40:42.017
> 
> 标签：python

我刚刚开始使用python，或者没有读过这个，或者错过了它，我不知道要搜索什么来找到我的答案。

在玩 IMAP 模块时，我遇到了这行代码。

```
result, data = mail.search(None, "ALL") 
```

这里的两个变量发生了什么？这是在方法以某种方式返回时使用的语法，还是总是有效？有人可以解释一下这里发生了什么，或者指向我一些文档吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T20:42:42.220

这是序列解包的一种形式。如果 RHS 是长度为 2 的可迭代对象（因为 LHS 上有 2 个对象），则可以使用它。例如：

```
a,b = (1, 2)  #The RHS here is a tuple, but it could be a list, generator, etc.
print a #1
print b #2 
```

Python3 以一种有趣的方式扩展了这一点，允许 RHS 比 LHS 具有更多的值：

```
a,b,*rest = range(30) 
print(a) #0
print(b) #1
print(rest == list(range(2,30))) #True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T20:42:30.390

您可以在一行中在 Python 中分配多个变量：-

```
a, b, c = 1, 2, 3 
```

将三个值 1、2、3 分别分配给 a、b、c。

同样，您可以将列表中的值分配给变量。

```
>>> li = [1, 2, 3]    
>>> a, b, c = li
>>> a
1
>>> b
2 
```

这会将您的列表解压缩为 3 个变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T20:47:46.480

这是多重赋值：变量 result 和 data 同时获得从 mail.search(none, ALL) 返回的新值。

在任何赋值发生之前，右侧的表达式都首先被评估。右侧的表达式从左到右计算。

多重分配文件在这里

[http://docs.python.org/tutorial/introduction.html](http://docs.python.org/tutorial/introduction.html)

# css - iPad 2 网站大小问题

> ID：12923069
> 
> 赞同：0
> 
> 时间：2012-10-16T20:41:35.310
> 
> 标签：css, ipad, web, responsive-design, media-queries

好的，在我开始之前，我首先要说我不是一个经验丰富的 Web 开发人员！

我正在写这个网站： http: [//leydencarcentre.co.uk](http://leydencarcentre.co.uk)

在桌面浏览器上看起来很合理，但我正在努力让 iPad (2) 正确显示它。

在纵向的 iPad 上，当您打开“主页”页面时，它会放大一点，但您无法缩小以获取屏幕上的整个页面宽度。“MOT”页面被完全缩小，因此整个宽度都适合。

在 iPad 上，它们看起来都是正确的。

我的网站基本上是 960 像素的固定宽度，但请注意，我尝试使用媒体查询使其有点响应。（这不是一个流畅的布局，但不同尺寸的 div 宽度略有不同 - 台式机、平板电脑、手机）。我为每种类型的布局设置了不同的主背景颜色，这样您就可以看到每种媒体类型的 CSS 何时生效。（桌面是白色，平板电脑是古董白色，移动设备是橙色）。

有人能帮忙吗？我用谷歌搜索了“iPad 网站宽度”之类的东西，但我不知道最好的方法是什么。

任何关于这个特定 iPad 问题的帮助或关于我的 CSS 和布局的建议都非常受欢迎！

我知道完全响应的流体布局是城里的话题，但我希望能很快完成这个网站。我*真的*需要一个完全流畅的布局吗？

谢谢，

保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T21:13:45.720

简单的修复：

```
<meta name="viewport" content="width=1000"> 
```

这将缩放 iPad 视口以完全适合您的页面（chrome 告诉我 body 是 1000px 宽）。

就移动网络的良好做法而言，我还添加了一些缩放选项，以便用户可以放大/缩小页面的不同部分。例如：

```
<meta name="viewport" content="width=1000, minimum-scale=.5, initial-scale=1, maximum-scale=2.5"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:09:44.883

最后我选择了cale_b，因为我尝试了许多视口设置，它要么在iPad上显示OK，但在Android下的Chrome上不显示，反之亦然。

所以我为我的主体 div 添加了一个最小高度。

谢谢 cal_b

# c# - 如何在 WebMatrix C# 中声明一个充当整数或布尔值的（全局？）变量

> ID：12923071
> 
> 赞同：1
> 
> 时间：2012-10-16T20:41:37.440
> 
> 标签：c#, javascript, jquery, variables, webmatrix

全部，

我只是想知道是否有一种逻辑方法可以在每次页面加载时不重新分配变量 pageCount，但仍然没有得到未命名的变量 YSOD 屏幕。

我试图在每次加载页面时增加 pageCount，以便我可以强制“history.go(pageCount * -1)”（在 JavaScript 中）。

如果我通常将 pageCount 分配为 0（例如 int pageCount = 0;），它会在每次页面加载时将其重置为 0，但如果我在分支中对其进行初始化，则它超出了绘制的隐藏输入字段值的范围在 C# 中（让 JavaScript 在另一边接受）。

我已经尝试过 AppState 但它不喜欢作为 int （或 bool ）工作，即使我尝试将它转换为：

```
(int)AppState["pageCount"]; 
```

关于如何将全局（因为缺少更好的词）变量声明为 int 或 bool 的任何建议，或者可能应用逻辑来声明不会在每次页面加载时重置为其初始化值的常规变量？

```
var username = "";
var user = "";
var password = "";
var errorMessage = "";
var loginSuccess = "not";
AppState["gActionMessage"] = "";
int pageCount;
if(!IsPost)
{
    pageCount = 1;
}
if(IsPost)
{
    pageCount++;
    username = Request.Form["username"];
    password = Request.Form["password"];

    if(username.IsEmpty() || password.IsEmpty())
    {
        errorMessage = "You must specify both a username and password.";
    }
    else
    {
        if (WebSecurity.UserExists(username) && WebSecurity.GetPasswordFailuresSinceLastSuccess(username) > 4 && WebSecurity.GetLastPasswordFailureDate(username).AddSeconds(120) > DateTime.UtcNow) {
            AppState["gActionMessage"] = "You're account has been locked due to too many failed login attempts. " +
                                        "Please try again in 2 minutes.";
            AppState["gActionMessageDisplayed"] = "not";
            Response.Redirect("~/");
            return;
        }

        if(WebSecurity.Login(username, password, false))
        {
            var db = Database.Open("Users");
            user = (db.QuerySingle("SELECT firstName FROM UserProfile WHERE LOWER(Email) = LOWER(@0)", username)).firstName;

            AppState["gActionMessage"] = "Hello, " + user + "!";
            AppState["gActionMessageDisplayed"] = "not";
            loginSuccess = "is";
            //Response.Redirect("~/");
        }
        else
        {
            errorMessage = "Login failed. Please check your user name and password for errors.";
            loginSuccess = "not";
        }
    }
} 
```

由于 pageCount 未分配，上述代码在第 7 行出现错误。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:56:45.993

`AppState`集合是`object`引用的集合。要存储`int`or`bool`值，它将被装箱。

要阅读它，您只需将其拆箱，就像您尝试过的那样。但是，如果您不知道它是否已经设置，则必须将其作为对象引用并检查是否有引用。一旦你检查了你确实有一个参考，你可以取消装箱值：

```
int pageCount;
object p = AppState["pageCount"];
if (p != null) {
  pageCount = (int)p;
} else {
  pageCount = 1; // some default value that you want to use
} 
```

# powershell - 如何在 PowerShell 中加载程序集？

> ID：12923074
> 
> 赞同：162
> 
> 时间：2012-10-16T20:41:47.900
> 
> 标签：powershell, powershell-3.0

以下 PowerShell 代码

```
#Get a server object which corresponds to the default instance
$srv = New-Object -TypeName Microsoft.SqlServer.Management.SMO.Server
... rest of the script ... 
```

给出以下错误消息：

```
New-Object : Cannot find type [Microsoft.SqlServer.Management.SMO.Server]: make sure 
the assembly containing this type is loaded.
At C:\Users\sortelyn\ ... \tools\sql_express_backup\backup.ps1:6  char:8
+ $srv = New-Object -TypeName Microsoft.SqlServer.Management.SMO.Server
+        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : InvalidType: (:) [New-Object], PSArgumentException
+ FullyQualifiedErrorId : TypeNotFound,Microsoft.PowerShell.Commands.NewObjectCommand 
```

互联网上的每个答案都写着我必须加载程序集 - 很确定我可以从错误消息中读取:-) - 问题是：

你如何加载程序集并使脚本工作？

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2012-10-16T22:11:44.477

`LoadWithPartialName`已被弃用。PowerShell V3 的推荐解决方案是使用[`Add-Type`](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/add-type)cmdlet，例如：

```
Add-Type -Path 'C:\Program Files\Microsoft SQL Server\110\SDK\Assemblies\Microsoft.SqlServer.Smo.dll' 
```

有多个不同的版本，您可能想要选择一个特定的版本。:-)

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2012-10-16T20:43:48.407

```
[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.SqlServer.Smo") 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2016-02-29T14:40:53.140

Most people know by now that `System.Reflection.Assembly.LoadWithPartialName` is deprecated, but it turns out that `Add-Type -AssemblyName Microsoft.VisualBasic` [does not behave much better than `LoadWithPartialName`](http://www.madwithpowershell.com/2013/10/add-type-vs-reflectionassembly-in.html):

> Rather than make any attempt to parse your request in the context of your system, [Add-Type] looks at a static, internal table to translate the "partial name" to a "full name".
> 
> If your "partial name" doesn't appear in their table, your script will fail.
> 
> If you have multiple versions of the assembly installed on your computer, there is no intelligent algorithm to choose between them. You are going to get whichever one appears in their table, probably the older, outdated one.
> 
> If the versions you have installed are all newer than the obsolete one in the table, your script will fail.
> 
> Add-Type has no intelligent parser of "partial names" like `.LoadWithPartialNames`.

What Microsoft's .Net teams says you're *actually* supposed to do is something like this:

```
Add-Type -AssemblyName 'Microsoft.VisualBasic, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' 
```

Or, if you know the path, something like this:

```
Add-Type -Path 'C:\WINDOWS\Microsoft.Net\assembly\GAC_MSIL\Microsoft.VisualBasic\v4.0_10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualBasic.dll' 
```

That long name given for the assembly is known as the **strong name**, which is both unique to the version and the assembly, and is also sometimes known as the full name.

But this leaves a couple questions unanswered:

1.  How do I determine the strong name of what's actually being loaded on my system with a given partial name?

    `[System.Reflection.Assembly]::LoadWithPartialName($TypeName).Location;` `[System.Reflection.Assembly]::LoadWithPartialName($TypeName).FullName;`

These should also work:

```
Add-Type -AssemblyName $TypeName -PassThru | Select-Object -ExpandProperty Assembly | Select-Object -ExpandProperty FullName -Unique 
```

2.  If I want my script to always use a specific version of a .dll but I can't be certain of where it's installed, how do I determine what the strong name is from the .dll?

    `[System.Reflection.AssemblyName]::GetAssemblyName($Path).FullName;`

Or:

```
Add-Type $Path -PassThru | Select-Object -ExpandProperty Assembly | Select-Object -ExpandProperty FullName -Unique 
```

3.  If I know the strong name, how do I determine the .dll path?

    `[Reflection.Assembly]::Load('Microsoft.VisualBasic, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a').Location;`

4.  And, on a similar vein, if I know the type name of what I'm using, how do I know what assembly it's coming from?

    `[Reflection.Assembly]::GetAssembly([Type]).Location` `[Reflection.Assembly]::GetAssembly([Type]).FullName`

5.  How do I see what assemblies are available?

I suggest the [GAC PowerShell module](https://www.powershellgallery.com/packages/Gac). `Get-GacAssembly -Name 'Microsoft.SqlServer.Smo*' | Select Name, Version, FullName` works pretty well.

6.  How can I see the list that `Add-Type` uses?

This is a bit more complex. I can describe how to access it for any version of PowerShell with a .Net reflector (see the update below for PowerShell Core 6.0).

First, figure out which library `Add-Type` comes from:

```
Get-Command -Name Add-Type | Select-Object -Property DLL 
```

Open the resulting DLL with your reflector. I've used [ILSpy](http://ilspy.net/) for this because it's FLOSS, but any C# reflector should work. Open that library, and look in `Microsoft.Powershell.Commands.Utility`. Under `Microsoft.Powershell.Commands`, there should be `AddTypeCommand`.

In the code listing for that, there is a private class, `InitializeStrongNameDictionary()`. That lists the dictionary that maps the short names to the strong names. There's almost 750 entries in the library I've looked at.

**Update:** Now that PowerShell Core 6.0 is open source. For that version, you can skip the above steps and see the code directly [online in their GitHub repository](https://github.com/PowerShell/PowerShell/blob/184a9bc85eac793f86c3e0ad46e2136ffd0ba2ce/src/Microsoft.PowerShell.Commands.Utility/commands/utility/AddType.cs#L2133-L2895). I can't guarantee that that code matches any other version of PowerShell, however.

**Update 2:** Powershell 7+ does not appear to have the hash table lookup any longer. Instead they use [a `LoadAssemblyHelper()` method](https://github.com/PowerShell/PowerShell/blob/master/src/Microsoft.PowerShell.Commands.Utility/commands/utility/AddType.cs#L839-L860) which the comments call "the closest approximation possible" to LoadWithPartialName. Basically, they do this:

```
loadedAssembly = Assembly.Load(new AssemblyName(assemblyName)); 
```

Now, the comments also say "users can just say `Add-Type -AssemblyName Forms` (instead of System.Windows.Forms)". However, that's not what I see in Powershell v7.0.3 on Windows 10 2004.

```
# Returns an error
Add-Type -AssemblyName Forms

# Returns an error
[System.Reflection.Assembly]::Load([System.Reflection.AssemblyName]::new('Forms'))

# Works fine
Add-Type -AssemblyName System.Windows.Forms

# Works fine
[System.Reflection.Assembly]::Load([System.Reflection.AssemblyName]::new('System.Windows.Forms')) 
```

So the comments appear to be a bit of a mystery.

I don't know exactly what the logic is in `Assembly.Load(AssemblyName)` when there is no version or public key token specified. I would expect that this has many of the same problems that LoadWithPartialName does like potentially loading the wrong version of the assembly if you have multiple installed.

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2016-05-26T18:23:42.300

如果要**在 PowerShell 会话期间加载程序集而不锁定它**，请使用以下命令：

```
$bytes = [System.IO.File]::ReadAllBytes($storageAssemblyPath)
[System.Reflection.Assembly]::Load($bytes) 
```

`$storageAssemblyPath`程序集的文件路径在哪里。

如果您需要清理会话中的资源，这将特别有用。例如在部署脚本中。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2013-03-12T09:14:06.177

以下是一些博客文章，其中包含大量在 PowerShell v1、v2 和 v3 中加载程序集的示例。

方式包括：

*   从源文件动态
*   从程序集中动态地
*   使用其他代码类型，即 F#

v1.0[如何在 PowerShell 会话中加载 .NET 程序集](http://www.old.dougfinke.com/blog/index.php/2010/08/29/how-to-load-net-assemblies-in-a-powershell-session/)
v2.0[在 PowerShell 脚本中使用 CSharp (C#) 代码 2.0](https://blogs.technet.microsoft.com/stefan_gossner/2010/05/07/using-csharp-c-code-in-powershell-scripts/)
v3.0[在 Windows PowerShell 中使用 .NET Framework 程序集](https://blogs.technet.microsoft.com/heyscriptingguy/2013/01/21/using-net-framework-assemblies-in-windows-powershell/)

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2013-03-12T13:31:35.220

您可以加载整个 *.dll 程序集

```
$Assembly = [System.Reflection.Assembly]::LoadFrom("C:\folder\file.dll"); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-11-08T20:33:55.373

没有一个答案对我有帮助，所以我发布了对我有用的解决方案，我所要做的就是导入 SQLPS 模块，当我偶然运行 Restore-SqlDatabase 命令并开始工作时，我意识到了这一点，这意味着该程序集以某种方式在该模块中被引用。

赶紧跑：

```
Import-module SQLPS 
```

注意：感谢 Jason 注意到 SQLPS 已被弃用

而是运行：

```
Import-Module SqlServer 
```

或者

```
Install-Module SqlServer 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-04-01T12:07:44.023

`[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.SqlServer.Smo")`为我工作。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-07-12T08:28:28.383

你可以使用`LoadWithPartialName`. 但是，正如他们所说，这已被弃用。

您确实可以使用`Add-Type`，除了其他答案之外，如果您不想指定 .dll 文件的完整路径，您可以简单地执行以下操作：

```
Add-Type -AssemblyName "Microsoft.SqlServer.Management.SMO" 
```

对我来说，这返回了一个错误，因为我没有安装 SQL Server（我猜），但是，以同样的想法，我能够加载 Windows 窗体程序集：

```
Add-Type -AssemblyName "System.Windows.Forms" 
```

您可以在 MSDN 站点上找到属于特定类的确切程序集名称：

[![找出属于特定类的程序集名称的示例](../Images/9e3f3f7e01e10454579011f64a3e26c5.png)](https://i.stack.imgur.com/6PuKE.png)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-11-07T00:37:13.043

确保您按顺序安装了以下功能

1.  SQL Server 的 Microsoft System CLR 类型
2.  Microsoft SQL Server 共享管理对象
3.  Microsoft Windows PowerShell 扩展

此外，您可能需要加载

```
Add-Type -Path "C:\Program Files\Microsoft SQL Server\110\SDK\Assemblies\Microsoft.SqlServer.Smo.dll"
Add-Type -Path "C:\Program Files\Microsoft SQL Server\110\SDK\Assemblies\Microsoft.SqlServer.SqlWmiManagement.dll" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-27T11:07:47.267

**在顶部添加程序集引用。**

```
#Load the required assemblies SMO and SmoExtended.
[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.SqlServer.SMO") | Out-Null
[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.SqlServer.SmoExtended") | Out-Null 
```

# php - 打开购物车管理界面开发

> ID：12923075
> 
> 赞同：0
> 
> 时间：2012-10-16T20:41:58.217
> 
> 标签：php, opencart

我的任务是将 Open Cart 安装与订单履行供应商集成（通过供应商的 API）。这将需要我在 OC 中的管理员用户的管理界面，以便对与 API 相关的订单执行各种操作。

API 本身很简单，如果不与 Open Cart 集成，那将完全没有挑战。

我的问题是：

1.  那里有什么好的开发人员文档吗？我在 Google 搜索优秀的开发人员文档时一无所获。

2.  如何将管理菜单项添加到管理标题菜单？理想情况下，我会在“销售”下创建一个名为“履行”之类的子菜单。但是，似乎没有一种方法可以在不修改“核心”打开购物车文件的情况下添加管理菜单。如果我必须修改`admin/view/template/common/header.tpl`才能添加管理菜单项，将来升级 OC 不会覆盖这些更改吗？

3.  是否有存储设置的功能？这意味着如果我将其开发为扩展/模块，是否有一组简单的函数/方法可以调用来创建、读取、更新和删除设置？（例如我需要使用的 API 凭证）

4.  我一直在考虑编写模块，但是我看到的每个 OC 模块示例（当我在仪表板中查看它时，在 Extensions->Modules->[Module Name] 下似乎涉及布局、位置等. 在前端，除了通过“模块”菜单项之外没有管理界面。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:52:12.073

1.  可用的最好的东西是 opencart 网站上的标准文档，尽管还有很多不足之处
2.  目前有两种方法。直接编辑文件或使用[vQmod](http://vqmod.com)
3.  是的，您可以使用`$this->model_setting_setting->editSetting()`模型方法来保存您的设置。查看`admin/model/setting/setting.php`它运行的代码。另外，您应该查看管理员中默认模块的控制器文件如何使用它
4.  您不一定必须**有**前端版本。您可以创建一个模块，只是确保您的 mod`key_enabled`不会`1`通过您的设置变为（换句话说，`0`当您保存时强制它始终存在，并且永远不会在客户端调用该模块）

# amazon-product-api - 为什么即使请求所有 3 个报价组，ItemLookup 也不返回任何价格信息？

> ID：12923080
> 
> 赞同：11
> 
> 时间：2012-10-16T20:42:15.457
> 
> 标签：amazon-product-api

我正在使用产品广告 API 对有效的 ASIN 执行 ItemLookup，请求所有三种风格的商品组，但我没有返回任何价格信息。然而，当我在亚马逊上查看相同的产品时，它有货并且价格有效。我相信我需要描述该问题的所有内容都将在为响应我的 ItemLookup 请求而返回的 ItemLookupResponse 中，因为它回显了所有参数：

```
<ItemLookupResponse>
    <OperationRequest>
        <HTTPHeaders>
            <Header Name="UserAgent"
                Value="Mozilla/5.0 (Windows NT 6.1; rv:14.0) Gecko/20100101 Firefox/14.0" />
        </HTTPHeaders>
        <RequestId>09872c13-5297-4401-ad15-e631b05c7a8f</RequestId>
        <Arguments>
            <Argument Name="Condition" Value="All" />
            <Argument Name="Operation" Value="ItemLookup" />
            <Argument Name="Service" Value="AWSECommerceService" />
            <Argument Name="Signature"
                Value="<omitted>" />
            <Argument Name="MerchantId" Value="All" />
            <Argument Name="AssociateTag" Value="<omitted>" />
            <Argument Name="Version" Value="2011-08-01" />
            <Argument Name="ItemId" Value="B00828J7PG" />
            <Argument Name="IdType" Value="ASIN" />
            <Argument Name="AWSAccessKeyId" Value="<omitted>" />
            <Argument Name="Timestamp" Value="2012-10-16T20:30:28.000Z" />
            <Argument Name="ResponseGroup" Value="Offers,OfferFull,OfferSummary" />
        </Arguments>
        <RequestProcessingTime>0.0194200000000000</RequestProcessingTime>
    </OperationRequest>
    <Items>
        <Request>
            <IsValid>True</IsValid>
            <ItemLookupRequest>
                <Condition>All</Condition>
                <IdType>ASIN</IdType>
                <MerchantId>Deprecated</MerchantId>
                <ItemId>B00828J7PG</ItemId>
                <ResponseGroup>Offers</ResponseGroup>
                <ResponseGroup>OfferFull</ResponseGroup>
                <ResponseGroup>OfferSummary</ResponseGroup>
                <VariationPage>All</VariationPage>
            </ItemLookupRequest>
        </Request>
        <Item>
            <ASIN>B00828J7PG</ASIN>
            <ParentASIN>B00828J7PG</ParentASIN>
            <OfferSummary>
                <TotalNew>0</TotalNew>
                <TotalUsed>0</TotalUsed>
                <TotalCollectible>0</TotalCollectible>
                <TotalRefurbished>0</TotalRefurbished>
            </OfferSummary>
            <Offers>
                <TotalOffers>0</TotalOffers>
                <TotalOfferPages>0</TotalOfferPages>
                <MoreOffersUrl>0</MoreOffersUrl>
            </Offers>
        </Item>
    </Items>
</ItemLookupResponse>< 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-14T01:18:40.523

# 编辑：

亚马逊产品 API 返回的商品可以表示**单个变体商品**（单一尺寸和/或单一颜色）或**变体父**项。当返回单个变体项目时，您只需使用与最初相同的方法即可获取价格。

但是，**父变体项目**（您的情况）与任何报价（价格）无关，因为它是产品的抽象，并充当现有产品变体（不同尺寸、颜色）的容器。

在这种情况下，变体父项中包含的每个变体都有自己的价格，您可以简单地遍历变体集并获取所需的价格。

将**Variations**响应组添加到您的搜索/查找请求中至关重要，因此请不要忽略它。

请求正文：

```
<env:Envelope xmlns:env='http://schemas.xmlsoap.org/soap/envelope/'>
   <env:Header/>
   <env:Body>
       <ns1:ItemLookup xmlns='http://webservices.amazon.com/AWSECommerceService/2011-08-01' xmlns:ns1='http://webservices.amazon.com/AWSECommerceService/2011-08-01'>
           <AWSAccessKeyId>xxxxxxxxxxxxxxxxxxx</AWSAccessKeyId>
           <AssociateTag>xxxxxxxx</AssociateTag>
           <Request>
               <IdType>ASIN</IdType>
               <MerchantId>All</MerchantId>
               <ItemId>B008M4TB9C</ItemId>
               <ResponseGroup>Variations</ResponseGroup>
           </Request>
           <Signature>xxxxxxxx</Signature>
           <Timestamp>2012-12-13T23:49:27Z</Timestamp>
       </ns1:ItemLookup>
   </env:Body>
</env:Envelope> 
```

响应体。

可以在以下位置找到单个变体的价格：

**项目->变体->项目->报价->报价列表->价格**。

```
<env:Envelope xmlns:env='http://schemas.xmlsoap.org/soap/envelope/'>
    <env:Body>
       <ItemLookupResponse xmlns='http://webservices.amazon.com/AWSECommerceService/2011-08-01'>
         <OperationRequest>
           <HTTPHeaders>
             <Header Name='UserAgent' Value='JBossRemoting - 2.5.1 (Flounder)'/>
           </HTTPHeaders>
           <RequestId>05c3ecdd-60ae-4a87-8bcb-70f80a5f5d5b</RequestId>
           <Arguments>
             <Argument Name='Service' Value='AWSECommerceService'/>
           </Arguments>
           <RequestProcessingTime>0.1092920000000000</RequestProcessingTime>
         </OperationRequest>
         <Items>
           <Request>
            <IsValid>True</IsValid>
            <ItemLookupRequest>
              <IdType>ASIN</IdType>
              <MerchantId>Deprecated</MerchantId>
              <ItemId>B008M4TB9C</ItemId>
              <ResponseGroup>Variations</ResponseGroup>
              <VariationPage>All</VariationPage>
            </ItemLookupRequest>
          </Request>
          <Item>
            <ASIN>B008M4TB9C</ASIN>
            <ParentASIN>B008M4TB9C</ParentASIN>  
            <VariationSummary>
              <LowestPrice>
                <Amount>49500</Amount>
                <CurrencyCode>USD</CurrencyCode>
                <FormattedPrice>$495.00</FormattedPrice>
              </LowestPrice>
              <HighestPrice>
                <Amount>49500</Amount>
                <CurrencyCode>USD</CurrencyCode>
                <FormattedPrice>$495.00</FormattedPrice>
              </HighestPrice>
            </VariationSummary>  
            <Variations>
                  ...
              <Item>
                <ASIN>B007HQYIBW</ASIN>
                <ParentASIN>B008M4TB9C</ParentASIN>
                   ...
                <ImageSets>
                   ...
                </ImageSets>
                <ItemAttributes>
                    ....
                </ItemAttributes>
                <VariationAttributes>
                  <VariationAttribute>
                    <Name>Color</Name>
                    <Value>Black</Value>
                  </VariationAttribute>
                  <VariationAttribute>
                    <Name>Size</Name>
                    <Value>6 B(M) US</Value>
                  </VariationAttribute>
                </VariationAttributes>
                <Offers>
                  <Offer>
                    <Merchant>
                      <Name>Amazon.com</Name>
                    </Merchant>
                    <OfferAttributes>
                     <Condition>New</Condition>
                    </OfferAttributes>
                    <OfferListing>
                      <OfferListingId>xxxxxxxxxx</OfferListingId>
                      <Price>
                        <Amount>49500</Amount>
                        <CurrencyCode>USD</CurrencyCode>
                        <FormattedPrice>$495.00</FormattedPrice>
                      </Price>
                      <Availability>Usually ships in 24 hours</Availability>
                      <AvailabilityAttributes>
                       <AvailabilityType>now</AvailabilityType>
                       <MinimumHours>0</MinimumHours>
                       <MaximumHours>0</MaximumHours>
                      </AvailabilityAttributes>
                    <IsEligibleForSuperSaverShipping>1</IsEligibleForSuperSaverShipping>
                    </OfferListing>
                  </Offer>
                </Offers>
              </Item>
          </Variations>
        </Item>
         ...
       </Items>
      </ItemLookupResponse>
     </env:Body>
   </env:Envelope> 
```

# java - Academic Java int[] 合并排序反转一半的输出

> ID：12923084
> 
> 赞同：2
> 
> 时间：2012-10-16T20:42:35.910
> 
> 标签：java, mergesort

我在这里脱发，试图在 Java 中的合并排序实现中找到错误：

```
 Input: 10 9 8 7 6 5 4 3 2 1   
Output: 5 4 3 2 1 10 9 8 7 6 
```

我在合并函数中打印了数组之间的中间值，它给了我这个：

```
10 9 8 7 6 5 4 3 2 1 
9 10 
6 7 
7 6 8 
8 7 6 10 9 
4 5 
1 2 
2 1 3 
3 2 1 5 4 
5 4 3 2 1 10 9 8 7 6 
```

我很确定错误一定出在我的合并功能中。但我很难找到它。

这是我的代码：

```
class merge1 
{
//the array which will get sorted
static int N = 10;
static int[] A = new int[N];

static int[] cropArray(int[] a)
{
    int[] b = new int[a.length-1];
    System.arraycopy(a, 1, b, 0, b.length);
    return b;

}

static int[] merge(int[] left, int[] right)
{
    int[] merged = new int[left.length + right.length];
    int i = 0;

    //loop must go on until both arrays are emptied into merged
    while(left.length > 0 || right.length > 0) 
    {
        //first case: both arrays are still filled with elements to compare
        if(left.length > 0 && right.length > 0) 
        {
            if(left[0] <= right[0]) //check for the bigger one
            {
                merged[i] = left[0];
                left = cropArray(left);
            }
            else
            {
                merged[i] = right[0];
                right = cropArray(right);
            }

        } 
        else //second case: one of the arrays is empty
        {
            if(left.length > 0)
            {
                merged[i] = left[0];
                left = cropArray(left);

            }
            else if(right.length > 0)
            {
                merged[i] = right[0];
                right = cropArray(right);
            }
        }

        i++;
    } //while

    printA(merged, merged.length);
    return merged;
} //merge()

//merg sort recursivly splits the array in half until only one element is left and then merges each half back together in sorted order
static int[] mergeSort(int[] a)
{

    //STEP 1
    //exit case if only one element to sort return this element
    if(a.length <= 1) return a;

    //STEP 2
    // split array into half
    int len = a.length/2;
    int[] left, right;

    //check if length is even, if not even integer division will cause loss of data
    if(a.length % 2 == 0)
    {
        //devide into two even halfs
        left = new int[len];
        right = new int[len];
    } 
    else 
    {
        //devide into two uneven halfs
        left = new int[len];
        right = new int[len+1];
    }

    //cycle through a and save out each half
    //could also use System.arraycopy here as in the merge function
    for(int i = 0; i < left.length; i++)
    {
        left[i] = a[i];
    }

    for(int i = 0; i < right.length; i++)
    {
        right[i] = a[i+len];
    }

    //split each half recursivley until only one element is left
    mergeSort(left);
    mergeSort(right);

    //STEP 3
    //merge sorted halfs and return
    return merge(right, left);

} //mergeSort()

//initalizes the array for the worst case
//the worst case for merge sort is an array sorted in reverse
static void init()
{
    int k = N;

    for(int i = 0; i < A.length; i++)
    {
        A[i] = k;
        k--;
    }

}//init()

//prints the array, used to check if mergeSort is working
static void printA(int[] a, int n)
{
    for(int i = 0; i < n; i++)
    {
        System.out.print(a[i] + " ");
    }
    System.out.println(); //break

} //printA

public static void main(String[] args)
{

    //test code
    init();
    printA(A,A.length);
    int [] sorted = mergeSort(A);
    //printA(sorted, sorted.length);

    /*//does 2000 sorts with arrays going from 0 to 1999 elements
    for(int i = 0; i < 2000; i++)
    {
        init();
        long x = System.nanoTime();
        mergeSort(A, i);
        System.out.println(i + " " + (System.nanoTime() - x));
    }*/

} //main()

}//merge1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:01:41.803

我将在这里为 merge() 函数编写一些伪代码

```
merge(int[] left, int[] right)
{
    int l = 0;
    int r = 0;

    int[] merged = new int[left.lentgh+right.length];

    for(int i=0; i<merged.length; i++)
    {
        // this condition is dependant of the fact that merged.length is equal to the sum of left.length and right.length
        if(r >= right[r].length || (l < left.length && left[l] < right[r]))
        {
            merged[i] = left[l];
            l++;
        }
        else
        {
            merged[r] = right[r];
            r++;
        }
    }   
    return merged
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:19:35.247

你没有重新分配`right`和`left`在你的电话中`mergeSort()`，所以实际的“排序”并没有携带链条：

代替

```
mergeSort(left);
mergeSort(right); 
```

你要

```
left = mergeSort(left);
right = mergeSort(right); 
```

# php - 无法在 Symfony2 中加载固定装置“找不到要加载的固定装置”

> ID：12923086
> 
> 赞同：5
> 
> 时间：2012-10-16T20:42:41.230
> 
> 标签：php, symfony, doctrine, osx-mountain-lion, fixtures

我拼命尝试将 Doctrine 固定装置加载到我的数据库中。当我调用全局 cli 加载函数时，一开始看起来没什么不好的：

```
> purging database
> loading [1] namespace_of_my_first_fixture_file
> loading [2] namespace_of_my_second_fixture_file
... 
```

但是当它尝试重新使用以前加载的夹具中的对象（错误的索引）时，它会在过程中间失败：

```
[ErrorException]                                                                                                                                                          
Notice: Undefined index: my_object_index in /Users/Swop/project/vendor/doctrine/data-fixtures/lib/Doctrine/Common/DataFixtures/ReferenceRepository.php line 145 
```

我查看数据库，在任何表中都没有插入任何内容。如果我尝试仅加载第一个夹具（似乎是根据上面的粘贴加载的），则会出现错误：

```
[InvalidArgumentException]                                          
Could not find any fixtures to load in:                             

- src/MyOrg/MyBundleBundle/DataFixtures/ORM/MyFirstFixtureFileData.php 
```

顺便说一句，我只是在我的 MacOS X (Mountain Lion) 上使用自编译的 PHP 5.4 实例运行它。

设备数据加载在我的 Linux 机器上运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-20T20:35:00.847

I could not find a good example in the docs and finally found that this works. Just use the folder location and do not specify the fixture file.

```
doctrine:fixtures:load --fixtures=src/MyOrg/MyBundleBundle/DataFixtures/ORM --append 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T11:24:56.177

也碰到这个。我的固定装置在我的本地 Windows 环境中工作，但在我的 linux 生产环境中失败。

我的问题是区分大小写（因为它在 windows-linux 中很常见）。

我命名了数据夹具目录

```
Datafixtures 
```

当脚本寻找

```
DataFixtures 
```

> 在第二个目录名称中发现大写 F，我没有；-)

我希望这可以节省一些人的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:28:08.913

查看[DoctrineFixturesBundle 文档](http://symfony.com/doc/2.0/bundles/DoctrineFixturesBundle/index.html#sharing-objects-between-fixtures)。

您的数据夹具类需要实现`OrderedFixtureInterface`，以便以预设的顺序加载它们。

然后，您可以使用 设置引用`$this->addReference('ref-name', $variable)`并在另一个夹具中使用`$this->getReference('ref-name')`.

我猜测为什么它似乎可以在您的 linux 机器上运行是因为这些修复程序是以不同的顺序加载的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-24T08:53:13.677

升级学说/教义固定装置捆绑包时遇到了同样的问题

这帮助了我：

> 删除了目录（例如 AppBundle\DataFixtures\ORM）中固定装置的自动加载。相反，将您的fixture 类注册为服务，然后使用doctrine.fixture.orm 进行标记。

来源：[https ://github.com/doctrine/DoctrineFixturesBundle/blob/master/UPGRADE.md](https://github.com/doctrine/DoctrineFixturesBundle/blob/master/UPGRADE.md)

# php - edit current month PHP code in MediaWiki

> ID：12923090
> 
> 赞同：1
> 
> 时间：2012-10-16T20:42:55.870
> 
> 标签：php, calendar, mediawiki

I'm working on a wiki and I'm building a community calendar. I'm using the SimpleCalendar extension and I'd like to display the current month, the previous, and next month. The current month feature works fine, but I'm having trouble figuring out how to display the previous and following month

Wiki

```
{{#calendar: month=$prevMonth | dayformat=%A | format=%A %B %d %Y }}
{{#calendar: month={{CURRENTMONTH}} | dayformat=%A | format=%A %B %d %Y }}
{{#calendar: month=$nextMonth | dayformat=%A | format=%A %B %d %Y }} 
```

PHP

```
function wfRenderMonth($m,$y,$prefix = '',$query = '',$format = '%e %B %Y',$dayformat = false) {
$thisDay   = date('d');
$thisMonth = date('n');
$thisYear  = date('Y');
if (!$d = date('w',$ts = mktime(0,0,0,$m,1,$y))) $d = 7;
$month = wfMsg(strtolower(strftime('%B',$ts)));
//I've been editing these two lines to try to create a variable for the previous and following months
$prevMonth = "strftime(%m - 1)"; 
$nextMonth = "strftime(%m + 1)";
$days = array();
foreach (array('M','T','W','T','F','S','S') as $i => $day)
    $days[] = $dayformat ? wfMsg(strftime($dayformat,mktime(0,0,0,2,$i,2000))) : $day;
$table = "\n{| class=\"month\"\n|- class=\"heading\"\n|colspan=\"7\"|$month\n|- class=\"dow\"\n";
$table .= '|'.join('||',$days)."\n";
if ($d > 1) $table .= "|-".str_repeat("\n|&nbsp;\n",$d-1);
for ($i = $day = $d; $day < 32; $i++) {
    $day = $i - $d + 1;
    if ($day < 29 or checkdate($m,$day,$y)) {
        if ($i%7 == 1) $table .= "\n|-\n";
        $t = ($day == $thisDay and $m == $thisMonth and $y == $thisYear) ? ' class="today"' : '';
        $ttext = $prefix.trim(strftime($format,mktime(0,0,0,$m,$day,$y)));
        $title = Title::newFromText($ttext);
        if (is_object($title)) {
            $class = $title->exists() ? 'day-active' : 'day-empty';
            $url = $title->getFullURL($title->exists() ? '' : $query);
        } else $url = $ttext;
        $table .= "|$t|[$url <span class='$class'>$day</span>]\n";
    }
}
return "$table\n|}"; 
```

}

You will have to forgive my noobness. I'm very new to PHP.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:54:45.257

Your code is very difficult to read IMHO. You appear to be messing around with "29" days etc... what you in fact want to do is simply construct a time (using mktime) with $month-1 for the month parameter. This wonderful little function will handle all the "month=0 therefore month=12 and year=year-1" stuff for you. It will equally handle if the date you give is 31 May 2012 being sent to the fn as "31 April 2012" and will return "30 April 2012" :) I think your code could easily be less than a 5th of the size if you do this in preference. If you want any further help, please do post back, and I'll see what I can do.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:06:06.340

I figured it out! I just needed to add ParserFunction capabilities to my LocalSettings.php and then use

```
{{#calendar: month={{#expr:{{formatnum:{{CURRENTMONTH}}|R}}-1}} | dayformat=%A |format=%A %B %d %Y }}
{{#calendar: month={{CURRENTMONTH}} | dayformat=%A | format=%A %B %d %Y }}
{{#calendar: month={{#expr:{{formatnum:{{CURRENTMONTH}}|R}}+1}} | dayformat=%A | format=%A %B %d %Y }} 
```

# iphone - 对 iPhone 通知区域的更多控制以用于第 3 方日历应用程序

> ID：12923091
> 
> 赞同：3
> 
> 时间：2012-10-16T20:42:59.670
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我正在为 iOS 5.0+ 编写一个日历应用程序，并希望警报/通知像默认的日历应用程序一样工作。**在没有越狱的情况下**，我对这些项目有什么控制（如果有的话）（关于下拉通知区域）：

1.  在闹钟响起之前显示即将出现的项目（日历应用程序会在明天显示项目，可能是未来几天）。

2.  当我的项目确实出现在通知区域时，将其显示在右侧的日期/时间设为事件的时间，而不是事件的提醒/警报时间。

如果无法做到上面的#2，这是非常具有误导性的，用户会认为事件是“现在”，但实际上那只是警报时间。因此，如果不可能，我可以：

保持弹出式通知的声音，但我的项目**永远不会**出现在通知中心。

我知道当我的应用程序运行时我可以从通知中心清除项目，但如果用户选择“关闭”选项或只是忽略它们，我的应用程序不会运行，因此没有机会删除项目 -并且用户可能处于这种误导状态。

如果以上都不可能，我想我会在文本中包含事件时间，但是当涉及到苹果不允许我们做的一些事情时，我的应用程序与默认的日历应用程序相比会很糟糕。当然，我的用户也不会明白，为什么有些应用程序可以做这些事情，而我的却不能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T08:32:07.210

你没有真正的办法。只有苹果能做到

1.  可以通过在最后一个通知之前安排另一个通知来实现

2.  我没办法看到

# c# - Farseer - 粒子只是穿过另一个身体

> ID：12923098
> 
> 赞同：0
> 
> 时间：2012-10-16T20:43:18.447
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, farseer

我正在像这样创建我的迷宫：

```
agentBody = BodyFactory.CreateBody(world, position);
_agentBody.BodyType = BodyType.Dynamic;
_agentBody.IgnoreGravity = true;
_agentBody.Restitution = 0.1f;
_agentBody.Friction = 1f;

_offset = ConvertUnits.ToDisplayUnits(1.5f);

FixtureFactory.AttachRectangle(3f, 0.1f, 1f, new Vector2(0, 1.55f), _agentBody);
FixtureFactory.AttachRectangle(3f, 0.1f, 1f, new Vector2(0f, -1.55f), _agentBody);
FixtureFactory.AttachRectangle(width, 3f, 1f, new Vector2(-1.55f, 0f), _agentBody);
FixtureFactory.AttachRectangle(width, 3f, 1f, new Vector2(1.55f, 0f), _agentBody); 
```

我的沙粒是这样的：

```
for (int i = 0; i < 8; i++){
    _sands[i] = BodyFactory.CreateRectangle(_world, 0.05f, 0.05f, 1f);
    _sands[i].IsStatic = false;
    _sands[i].Restitution = 0.1f;
    _sands[i].Friction = 0.1f;
    _sands[i].Position = new Vector2(1.8f + i * 0.2f, 2.2f);
}

_sand = new Sprite(
    ScreenManager.Assets.TextureFromShape(
        _sands[0].FixtureList[0].Shape,
        MaterialType.Dots,
        Color.SandyBrown, 0.8f
    )); 
```

我在调试视图中检查了夹具，它看起来不错。但事实并非如此。当粒子出现在屏幕上时，它们会掉下来（由于重力）并毫无问题地穿过我的迷宫边界，它们会停在有静止物体的底部。这是为什么？为什么粒子不会在我的迷宫中停下来？

有关上下文，请参阅我之前的问题：
[Farseer - Particles doesn't move/bounceaccord to borders](https://stackoverflow.com/questions/12833724/farseer-particles-doesnt-move-bounce-accord-to-borders)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:14:35.510

我对 farseer 不是很流利，但我能从不久前的一个项目中记得我们使用了夹具的“CollidesWith”属性

就像是 ：

```
fixture.CollisionFilter.CollidesWith = CollisionCategories.All; 
```

否则codeplex项目的讨论板可以提供很多信息。

# firefox - 完整的日历事件超链接在 Firefox 中自动触发

> ID：12923099
> 
> 赞同：5
> 
> 时间：2012-10-16T20:43:18.593
> 
> 标签：firefox, calendar, click, drag

我正在使用带有[可拖动事件的](http://arshaw.com/fullcalendar/docs/event_ui/)[完整日历](http://arshaw.com/fullcalendar/)。我在事件对象中指定了一个 url，它导致事件链接到页面。每当我在 IE 或 Chrome 中拖动事件时，click 事件都不会触发（这很好）。但它在 Firefox 中确实如此。Full Calendar 提供了一个名为 eventClick 的事件，但显然在超链接重定向之前不会触发。有没有办法在不使用一些 jQuery hack 的情况下防止拖动触发点击事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T00:19:28.747

问题出在 event.url

将您的活动从 url: 更改为 hackurl:

然后在您的点击事件中，而不是：

```
if (event.url)
{ execute code } 
```

有

```
if (event.hackurl)
{ execute code } 
```

我有完全相同的问题，只需使用不同的自定义属性即可解决 - 现在它是一个干净且非常简单的解决方法，不需要破解 jquery 或 fullcalendar javascript。

希望能帮助到你

# php - 使用 PHP 获取远程 URL 内容的其他类型有哪些？

> ID：12923108
> 
> 赞同：1
> 
> 时间：2012-10-16T20:44:16.637
> 
> 标签：php, curl, file-get-contents, fread, fsockopen

在 PHP 中是否有任何其他类型的获取远程数据，除了：`"cURL"`并且`"allow_url_fopen"`在**php.ini**中设置为，`"On"`以便能够使用或流式传输远程内容？`"fopen"``"fsockopen"``"file_get_contents"`

我正在开发一个自定义 PHP 远程内容流媒体，并且我正在寻找任何其他方式来流式传输远程内容，如果`"cURL"`or`"allow_url_fopen"`是`"Off"`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:19:52.620

“allow_url_fopen”不影响“fsockopen”。

即使是这样，在网络服务器中启用系统调用也是比“allow_url_fopen=On”更大的安全威胁。

要禁用 fsockopen，可以将其添加到 php.ini 中的“disable_functions”中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:54:53.903

运行系统调用呢？喜欢`passthru()`或`exec()`或`system()`并在命令行上调用`curl`或[`wget`](http://www.gnu.org/software/wget/manual/wget.html)并捕获数据

Linux 示例：

```
ob_start();
passthru("wget -U 'CustomUserAgent' -q -O - 'http://www.example.com/'");
$output = ob_get_clean(); 
```

Windows 7+ 示例（通过 powershell）。取自[这里](https://superuser.com/a/330754/147810)

```
(new-object System.Net.WebClient).DownloadFile('http://www.example.come','C:\tmp\output.tx‌​t') – 
```

要扩展 windows 方法，请参阅[从 php 执行 Powershell 脚本](https://stackoverflow.com/questions/5317315/executing-a-powershell-script-from-php)

# javascript - a href 链接在手风琴内不起作用，似乎 Javascript 覆盖了点击功能

> ID：12923109
> 
> 赞同：2
> 
> 时间：2012-10-16T20:44:19.247
> 
> 标签：javascript, jquery, html

单击 a href 链接时，a href 链接在手风琴内不起作用。似乎手风琴的JS功能覆盖了a href链接。现在点击链接，不是打开另一个页面，而是进出扩展（这是JS的功能），这是JS的原始功能。我想要做的是保持手风琴功能，并使 a href 链接工作。这是示例代码：http: [//jsfiddle.net/mrPWa/](http://jsfiddle.net/mrPWa/)

```
 <script type="text/javascript"     src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
 <script type="text/javascript">

$(function() { 
height = $(window).height();
 $('.Accord').css({height: height});

    $('.Accord').toggle(function() {
   $('.Accord').animate({width: "20%"}, 500 );
      $(this).removeClass('deSelect');
         $(this).animate({ width: "40%"}, {duration: 500, queue: false});
            $('.deSelect').animate({width: "15%"}, {duration: 500, queue: false});
               $(this).addClass('deSelect');

  }, function() {   
       $('.deSelect').animate({width: "20%"}, 500);

  });
 }); 
```

a href 链接在这里。

```
 <body>

      <div id="Sponsorships_index">

<div id="accordionWrapper">

    <ol>
        <li id="snow" class="Accord deSelect">
        <a href="http://www.apple.com/"> 
        <h1>Apple link is not working!!!!!</h1></a>

        </li>

        <li id="street" class="Accord deSelect">
              <a href="http://www.apple.com/"> 
        <h1>Apple link is not working!!!!!</h1></a>
        </li>

        <li id="water" class="Accord deSelect">

        </li>

        <li id="dirt" class="Accord deSelect">

        </li>

        <li id="sound" class="Accord deSelect">

        </li>
    </ol>
</div>​

  </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:33:46.840

将此添加到切换功能的末尾

```
.on('click', 'a', function(e) { e.stopPropagation(); }) 
```

以防止事件冒泡。

所以你最终得到

```
$('.Accord').toggle(function() {
    $('.Accord').animate({ width: "20%" }, 500)
    $(this).removeClass('deSelect')
    $(this).animate({ width: "40%" }, { duration: 500, queue: false })
    $('.deSelect').animate({ width: "15%" }, { duration: 500, queue: false })
    $(this).addClass('deSelect')
}, function () {
    $('a').click(function(e) { e.stopPropagation(); })
    $('.deSelect').animate({ width: "20%" }, 500)
}).on('click', 'a', function(e) { e.stopPropagation(); }) 
```

在这里测试它：http: [//jsfiddle.net/RASG/sSG2f/](http://jsfiddle.net/RASG/sSG2f/)

# zend-framework - 用激活一个菜单项的两个动作配置 Zend_Navigation？

> ID：12923111
> 
> 赞同：0
> 
> 时间：2012-10-16T20:44:28.047
> 
> 标签：zend-framework, zend-navigation

我的情况是我在 XML 中定义了 Zend_Navigation 菜单。在菜单中，设计需要一个页面来显示用户数据。管理员可以查看其他用户的数据。由于显示的数据和视图布局存在细微差别，因此需要有两种操作，一种用于普通用户，一种用于管理员。

如何定义 Zend_Navigation XML 文件，以便同一控制器上的两个操作都将同一页面设置为活动页面？最好只使用 XML。甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T06:14:13.867

```
<?xml version="1.0" encoding="UTF-8" ?>
<configdata>
  <nav>
    <home>
      <label>Home</label>
      <controller>test</controller>
      <action>menu</action>
      <module>default</module>
      <pages>
        <why>
          <label>why</label>
          <controller>test</controller>
          <action>menu</action>
          <module>default</module>
          <visible>false</visible>
        </why>
        <who>
          <label>who</label>
          <controller>test</controller>
          <action>quake</action>
          <visible>false</visible>
        </who>
      </pages>
    </home> 
```

这个想法是让两个页面都不可见，并且两者都应该是可见页面的子页面，该页面将显示为活动页面。

# tsql - 使用 Row_Number() 修改 SQL 查询和 SQL Server 2000 的分区函数

> ID：12923117
> 
> 赞同：0
> 
> 时间：2012-10-16T20:45:00.473
> 
> 标签：tsql, ssis, sql-server-2000, row-number

这是我当前的 SQL 查询：

```
SELECT 
   ROW_NUMBER() OVER(PARTITION BY [Machine_ID] ORDER BY Version DESC) AS ROW, 
   MachineList.*
FROM  
   MachineList 
```

基本上，我想获得不同的机器信息。如果多台机器相同`ID`，则选择最新版本的一台。

但是，SQL Server 2000 不支持该`ROW_Number`功能。上面的 SQL 有什么替代方法吗？

PS 我在网上找到的大多数解决方案都是使用临时表。但是我不能使用临时表，因为这个查询将在 SSIS 中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:50:33.077

您可以使用内联临时表来计算每个 machineID 的最高版本。大概 SSIS 对临时表的限制适用于 # 表而不是内联临时表

```
SELECT  M.*
FROM  MachineList M inner join
(select Machine_ID, max(Version) from MachineList 
group by Machine_ID ) Z on M.Machine_id = Z.Machine_id 
and M.Version = Z.Version 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:53:50.510

```
 select m.*
 from machinelist as m
        inner join (
               select
                     t.machine_id, max(t.version) as version
               from machinelist as t
               group by t.machine_id
        ) as mm on
              mm.machine_id = m.machine_id and mm.version = m.version 
```

# android - android系统服务器缓存应用数据

> ID：12923118
> 
> 赞同：0
> 
> 时间：2012-10-16T20:45:03.953
> 
> 标签：android, android-framework

我正在研究一个android框架。我实现了一个工作正常的系统服务器，即一个示例应用程序可以与该服务通信。现在我希望我的服务器能够读取和写入数据到文件或类似数据库的 sqlite 中。我对 android 框架开发很陌生，所以我不确定它是如何工作的。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:02:26.280

要在 Android 中处理数据库（存储一些应用程序/服务数据），您应该使用 ContentProviders 类。

developer.android.com 页面上有一个很棒的教程：Content Providers [http://developer.android.com/guide/topics/providers/content-providers.html](http://developer.android.com/guide/topics/providers/content-providers.html) 及其子章节：

*   Content Provider Basics（如何使用已有的 Android 数据库）
*   创建内容提供者（如何创建新的 sql 数据库和访问它的简单界面）

android SDK 示例中还有 Note Pad 示例应用程序（在硬盘驱动器 /samples/android-/ - [http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)上）。请查看此示例应用程序中的类 NotePadProvider (com.example.android.notepad)。

BR 帕维尔·鲁特科夫斯基

PS。我认为这个问题很久没有得到回答，因为标题具有误导性 - 它应该更多地关于在 Android 中存储用户/应用程序配置或关于在 Android 中使用 sql 数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:19:14.837

在服务中使用标准的 android sqlite 数据库与在活动中使用它是相同的。android 文档和示例向您展示了如何做到这一点。

# perl - 按组织单位在 AD 中搜索电子邮件地址

> ID：12923121
> 
> 赞同：-1
> 
> 时间：2012-10-16T20:45:24.343
> 
> 标签：perl, active-directory

我有一个用于在 AD 中搜索电子邮件地址的 Perl 脚本。

[我从这里使用了这个脚本，](https://www.itefix.no/i2/content/extracting-e-mail-addresses-active-directory)但是我想修改它以在特定的组织单位中搜索所有以 .com 结尾的电子邮件地址，而不是一般地抓取所有电子邮件地址。

注意：我的 Perl 经验为零，我通常只使用 Python，但在 Python 中无法弄清楚，谷歌搜索了如何在 Perl 中做到这一点，并得到了一个有效的即时结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:04:31.633

更改此行将为您提供电子邮件地址@domain.com - 如果这是您需要的！

```
my @adrlist = ($line =~ /smtp:(\w+\@domain.com)\;/g); 
```

# emacs - org-mode 中的一行中的表或一行中的表和图像

> ID：12923124
> 
> 赞同：4
> 
> 时间：2012-10-16T20:45:40.270
> 
> 标签：emacs, org-mode

我知道在将 org-mode 导出为 html 时如何将图像放在一行中：

```
#+ATTR_HTML: style="display:inline;"
[[image1.png]]
#+ATTR_HTML: style="display:inline;"
[[image2.png]] 
```

这将产生这种效果：

```
Image 1 Image 2 
```

如果我想要两个**表**连续，或者**一个表和一个图像**连续，比如：

```
Table 1   Table 2 
```

或者

```
Image 1 Table 1 
```

那我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T23:39:16.897

以下通过将 2 个表格浮动到左侧来工作：

```
#+attr_html: style="float:left;width:30%;margin:3ex;"
| 1 | 2 |
| 3 | 4 |

#+attr_html: style="float:left;width:30%;margin:3ex"
| 5 | 6 |
| 7 | 8 |

#+html: <br style="clear:both;" />
This goes beneath 
```

需要该`clear`属性才能在 2 个浮动元素下方继续。

# stored-procedures - 如何仅获取存储过程中最后执行的查询结果？

> ID：12923126
> 
> 赞同：1
> 
> 时间：2012-10-16T20:45:43.373
> 
> 标签：stored-procedures, multiple-resultsets

我创建了一个存储过程，其中包含 5 个或更多 SELECT 查询。但是，写入最后一个 SELECT 查询以在调用存储过程时返回结果集。当我从 VB.Net 调用这个存储过程时，它返回所有 5 个 SELECT 查询结果。如何让它只返回第 5 个 SELECT 查询结果？

# java - Java 中搜索和连接函数的使用

> ID：12923131
> 
> 赞同：1
> 
> 时间：2012-10-16T20:46:14.240
> 
> 标签：java, algorithm, search

编辑：我听取了您的想法并决定使用 HashMaps 而不是 ArrayLists，这在执行搜索时被证明要快得多。不幸的是，我在实现 Join 函数时遇到了困难，因为它没有加入来自两个不同文本文件的数据。相反，它只输出我正在寻找的数据的索引号。谁能告诉我我做错了什么？

我有一些文本文件，其中包含大约 200,000 条数据。

文件如下： - Artists.txt（包含歌曲 ID 和艺术家姓名） - Albums.txt（包含歌曲 ID、歌曲名称、制作年份、艺术家 ID、制作人 ID、成本） - Production.txt（包含歌曲 ID、艺术家 ID，参与的艺术家数量）- studio.txt（包含工作室位置和制作人 ID）

我需要实现一个算法，它将在最短的时间内扫描文档以找到指定的数据。

我给你举个例子：我想找到艺术家的名字（来自artist.txt），他在特定年份制作了名为（来自albums.txt）的歌曲。我还想加入这两个表，因此输出将显示两个文件中的选定数据。

当前的实现需要很长时间才能找到指定的条目（显示所有以 A 开头的艺术家姓名需要 40 秒），因为它会扫描整个文档。我被告知我的代码应该能够在几分之一秒内解决这个问题。我正在考虑添加 HashMaps/TreeMaps 而不是 ArrayList，但我不确定这是否会改变任何东西。

您能否推荐一种更好的实施方式？我想知道我应该使用什么数据类型，以及处理这个问题的最快和最合适的算法是什么。

我需要说我对 JAVA 很陌生，因此我对这个话题了解不多，但我很想尝试你的建议。

我不是在寻找一个现成的解决方案，我只是想知道你对这个话题的看法，并希望得到一些关于如何获得预期效果的提示。

编辑代码：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.Comparator;
import java.util.HashMap;
import java.util.LinkedHashMap;

public class Table {
    String line;
    int columns;
    HashMap<String,ArrayList<String>> grid;

    public Table(int columns)
    {
        grid = new HashMap<String,ArrayList<String>>();
        this.columns = columns;
    }

    public Table(int columns, String filename) throws Exception
    {
        grid = new HashMap<String,ArrayList<String>>();
        this.columns = columns;

        BufferedReader fh =
            new BufferedReader(new FileReader(filename));

        int lineNum = 0;

        //Add all the lines from text file
        while(null != (line=fh.readLine()))
        {
            String[] parts = line.split("\t");
            //Separate the text file into parts
            String name = parts[0];
            String id = parts[1];
            //Create new ids
            if(!grid.containsKey(id))
                grid.put(id,new ArrayList<String>());

            //Add a name to each id
            grid.get(id).add(name);
        }
    }

    public class comp implements Comparator<ArrayList<String>> { 
        int whichCol;

        public int compare(ArrayList<String> o1, ArrayList<String> o2) { 
            return o1.get(whichCol).compareTo(o2.get(whichCol));
        } 
    }

    public Table SelectAll(int colNum, String val)
    {
        Table result = new Table(this.columns);
        for(ArrayList<String> row:this.grid.values())
        {
            if (row.size()<=colNum)
                System.out.println("Error: "+row.toString());
            if (!row.get(colNum).startsWith(val))
            {
                result.grid.put(row.get(colNum), row);
                System.out.println(row);
            }
        }
        return result;
    }

    public Table Join(int col1, Table r, int col2)
    {
        Table result = new Table(this.columns+r.columns);
        HashMap<String,ArrayList<String>> sorrid = (HashMap<String,ArrayList<String>>) this.grid.clone();
        comp mycomp = new comp();
        mycomp.whichCol = col1;

        //For everyone in the first one, check everyone in second one
        for(ArrayList<String> i: this.grid.values())
        {
            for(ArrayList<String> j: r.grid.values())
            {
                if(i.get(col1).equals(j.get(col2)))
                {
                    ArrayList<String> newrow = new ArrayList<String>();
                    newrow.addAll(i);
                    newrow.addAll(j);
                    result.grid.put(newrow.get(0), newrow); 
                }   
            }
        }
        return result;
    }

    public void displayAll()
    {
        for(String r : grid.keySet())
        {
            System.out.println(r);
            for(String n : grid.get(r))
                System.out.println(" " + n);
        }
    }

    public void displaySelected(String value)
    {
        for(String r : grid.keySet())
        {
            if(r.startsWith(value))
                System.out.println(r);
        }
    }

    public Table SelectEq(int colNum, String val)
    {
        Table result = new Table(this.columns);
        for(ArrayList<String> row:this.grid.values())
        {
            if (row.size()<=colNum)
                System.out.println("Error: "+row.toString());
            if (row.get(colNum).equals(val))
                result.grid.put(row.get(0), row);
        }
        return result;
    }

    public int size()
    {
        return this.grid.size();
    }

    public Table StartsWith(int colNum, String val)
    {
        Table result = new Table(this.columns);
        for(String r : grid.keySet())
        {
            if (grid.size()<=colNum)
                System.out.println("Error: "+r.toString());
            if (r.startsWith(val))
                result.grid.put(r, new ArrayList<String>());
        }
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:39:45.623

这是我的方法/设计：

*   创建类艺术家{歌曲，艺术家}
*   创建类专辑{歌曲，标题，年份，艺术家，制作人，成本}
*   创建类 Production {歌曲，艺术家，艺术家数量}
*   创建类工作室 { 位置，生产者 }

加载器实例化这些类并将对象引用添加到几个[NavigableMaps](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html)中。

例如：查看专辑中的艺术家姓名，由年份和歌曲名称指定：

```
NavigableMap<Integer,Album> matchYear = albumsByYear.subMap( 2004, true, 2005, false );
NavigableMap<String,Album> matchTitle    = albumsBySongTitle.tailMap( title );
Set<Album> matchYearAndTitle = year2004.values().retainAll( titled.values());
for( Album a : matchYearAndTitle )
{
   System.out.println( a.getArtist());
} 
```

等等...

您必须按索引列定义所有地图。

# json - JS 不允许破折号（-）；有任何想法吗？

> ID：12923132
> 
> 赞同：0
> 
> 时间：2012-10-16T20:46:27.680
> 
> 标签：json, dojo, getjson

我在数据库上有一个名为 CONTEST 的字段名，具有以下值：

```
50 - DE - HOUSE 5 -D
47 - SHERIFF - M 
```

其中有几行。

fieldname 是一个文本字段。

我使用以下 JavaScript 尝试在表格上显示这些值：

```
//Create list of available contest to display.
function CreateResultSet(featureSet) {
    demVoteCount = 0;
    repVoteCount = 0;
    otherVoteCount = 0;
    RemoveChildren(dojo.byId("race"));
    resultsDataGroup = new Object();
    var controlIndex = 0;
    if (featureSet.length == 0) {
        return;
    }
    else {
        for (var i = 0; i < featureSet.length; i++) {
            if (!resultsDataGroup[featureSet[i].attributes.CONTEST]) {
                resultsDataGroup[featureSet[i].attributes.CONTEST] = new Array();
                var divRaceData = document.createElement("div");
                divRaceData.className = "divData";
                divRaceData.id = "divRaceName" + (controlIndex);
                divRaceData.innerHTML = featureSet[i].attributes.CONTEST;
                divRaceData.setAttribute("controlIndex", controlIndex);
                divRaceData.onclick = function () { DisplayChart(this); };
                dojo.byId("race").appendChild(divRaceData);
                controlIndex++;
            }

            if (featureSet[i].attributes.PARTY == "DEM") {
                demVoteCount += featureSet[i].attributes.VOTES;
            }
            else if (featureSet[i].attributes.PARTY == "REP") {
                repVoteCount += featureSet[i].attributes.VOTES;
            }
            else {
                otherVoteCount += featureSet[i].attributes.VOTES;
            }
            resultsDataGroup[featureSet[i].attributes.CONTEST].push({ ContestName: featureSet[i].attributes.CONTEST, CandidateName: featureSet[i].attributes.CANDIDATE, VoteTotal: featureSet[i].attributes.VOTES, Party: featureSet[i].attributes.PARTY });
        }
        dojo.byId("race").scrollTop = 0;
        currentRaceIndex = 0;
        DisplayChart(dojo.byId("race").childNodes[0]);
        dojo.byId('divSelectedGeometry').innerHTML = dojo.query(".divSelectedGeo", dojo.byId('geometry'))[0].innerHTML + " - ";
    }
} 
```

当我运行代码时，找不到“CONTEST”。

但是，如果我删除破折号，结果会正确显示，但破折号需要在那里。

知道如何修改名为 CONTEST 的字段名来解释破折号吗？

如果措辞不当，请提前道歉。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:49:25.347

sql 使用破折号的方法只是将它放在您正在执行的括号之间，因此破折号不应该破坏您的 sql。

我唯一的解释是您的对象在来自服务器端时缺少一些值。

您能否更改发生错误的行以添加一些额外的检查，以便：

```
divRaceData.innerHTML = (featureSet[i] && featureSet[i].attributes && featureSet[i].attributes.CONTEST)?featureSet[i].attributes.CONTEST : "VALUE MISSING"; 
```

如果你得到“VALUE MISSING”，那么你的服务器端代码有问题，并且一个或多个对象没有你期望的层次结构。

就像 Beetroot 在评论中所说的那样，像这样注入 SQL 是一种非常糟糕的做法，所以即使你继承了应用程序，也值得改变它

# php - 需要递归正则表达式帮助

> ID：12923137
> 
> 赞同：1
> 
> 时间：2012-10-16T20:47:09.403
> 
> 标签：php, regex, recursion

我正在制作一个模板系统，我可以在其中输入：

```
<t:category:item:parameter1:parameter2...> 
```

并将其替换为文件中的文本。可选参数被放置在替换字符串中，如`%1`, `%2`...

到目前为止，我有这个：

```
$data = preg_replace_callback("/<t:([^:]+):([^>]+)>/",function($m) use (&$userdata) {
    static $fcache = Array();
    $parse = function($file) use (&$fcache,&$lang) {
        // parse the file if it's a new one. False indicates success, otherwise error message is returned
        if( !isset($fcache[$file])) {
            if( !file_exists("text/".$lang."/".$file.".html")) $lang = "en";
            if( !file_exists("text/".$lang."/".$file.".html")) return "<div class=\"alert\">ERROR: File ".$file." not found.</div>";
            $k = "";
            foreach(file("text/".$lang."/".$file.".html") as $l) {
                if( substr($l,0,1) == "|") $k = rtrim(substr($l,1));
                else $fcache[$file][$k] .= $l;
            }
        }
        return false;
    };
    $lang = $userdata && $userdata['language'] ? $userdata['language'] : "uk";
    list(,$file,$d) = $m;
    $params = explode(":",$d);
    $section = array_shift($params);
    if( $e = $parse($file)) return $e;
    if( !$fcache[$file][$section]) {
        $lang = "uk";
        if( $e = $parse($file)) return $e;
    }
    return preg_replace_callback("/%(\d+)/",function($i) use ($params) {
        return htmlspecialchars_decode($params[$i[1]-1]);
    },trim($fcache[$file][$section]));
},$data); 
```

文本文件的格式为：

```
|key
replacement text
|otherkey
more text %1 
```

无论如何，切入正题：如果其中一个参数本身就是替换字符串怎么办？例如，如果我想要一个像“快来拜访他！”这样的字符串怎么办？- 我希望它是这样的：

```
<t:person:visit:<t:grammar:pronoun_object_m>> 
```

该文件将具有：

```
|visit
Come and visit %1 soon!

|pronoun_object_m
him 
```

但是，当前函数会将参数作为文字，并且在短语末尾`<t:grammar:pronoun_object_m`会显示一个额外的内容：`>`

> 快来参观<t:grammar:pronoun_object_m！>

实际上会显示为：

> 前来参观

由于未解析的替换看起来像一个 HTML 标记......

我相当确定我需要一个递归正则表达式，但是我对它们的工作方式感到非常困惑。谁能解释我如何“递归”我的正则表达式以允许这样的嵌入参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:00:03.957

递归解决方案的问题是，它们不能很好地与`preg_replace`. 它们主要用于`preg_match`. 原因是您将只能访问在递归中重用的模式的最后（最内部）捕获。因此，即使`preg_replace_callback`在这里也无济于事。

这是另一种可能性：

在`<t:person:visit:<t:grammar:pronoun_object_m>>`，你得到你提到的输出的原因是，你的正则表达式将匹配这个：

```
<t:person:visit:<t:grammar:pronoun_object_m> 
```

（它不能走得更远，因为您`>`在占位符中不允许。）

有几种方法可以解决这个问题。对于初学者，您也可以在占位符中禁止`<`（不仅是）：`>`

```
"/<t:([^:]+):([^<>]+)>/" 
```

现在您的模式将始终只找到最里面的占位符。因此，您可以简单地`preg_replace_callback`反复调用您的电话，直到不再进行替换为止。如何找到这个？添加可选的第四个和第五个参数：

```
do
{
    preg_replace_callback("/<t:([^:]+):([^<>]+)>/", $function, $data, -1, $count);
} while($count); 
```

我还建议（为了易读性）您在`preg_replace_callback`函数之外定义回调。

# authentication - 授权后CakePHP白屏死机

> ID：12923139
> 
> 赞同：2
> 
> 时间：2012-10-16T20:47:16.593
> 
> 标签：authentication, cakephp-2.0

我似乎遇到了与许多其他人非常相似的问题，但我找不到好的解决方案。

用户登录应用程序后，会自动重定向到另一个控制器的 index() 函数。尽管已成功重定向（根据地址栏）并将调试级别设置为高，但我得到的只是一个白屏。

使问题进一步复杂化的是，我已经与其他用户（他们被重定向到不同控制器的不同功能）登录并且这些用户运行良好。即使我清除缓存并使我的 index() 函数只回显“Hello World！”，我也会得到一个白屏。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T01:28:02.140

原来文件末尾的空格（在 ?> 标记之后）是问题所在。

# mysql - php/mysql查询连接

> ID：12923140
> 
> 赞同：0
> 
> 时间：2012-10-16T20:47:18.747
> 
> 标签：mysql, syntax

我正在尝试为项目实施标签系统。标签包含在一个名为 tags 的表中，我有另一个表 tagitem 将项目链接到标签。一个项目可以有多个标签。当我显示该项目时，我想列出所有标签。我的问题是，有没有办法用一个查询来做到这一点？如果我将项目结果加入标签表，我会为一个项目获得多条记录（对应于多个标签），或者如果我按标签包含一个分组，我会得到一条记录但只有第一个标签。

另一种方法是进行第二次查询以获取标签，但这似乎效率低下。

```
Item table
Id | name

Tag table
Id | tag

Tagitem table
Id|itemid|tagid

Php

$sql = "select i.*,ti.*,t.*
FROM 'items' i
LEFT JOIN 'tagitem' ti
ON i.id=ti.itemid
LEFT JOIN  'tag' t
On ti.tagid=t.id
WHERE i.id='2'";

//returns multiple records

$sql.="group by i.id";

//returns only first tag 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:51:04.580

尝试[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)。

您应该能够选择您的标签作为子查询并将它们组合在一起以形成一个数组。

```
SELECT
    Item.name,
    GROUP_CONCAT (Tags.tag SEPERATOR ',') AS tags
FROM
    Item
    LEFT JOIN Tagitem ON Tagitem.itemid = Item.Id
    LEFT JOIN Tag ON Tagitem.tagus = Tag.Id
WHERE
    Item.Id = 2 
```

试一试，让我知道会发生什么。我猜测表结构有点，所以它可能需要一些调整。

# javascript - jQuery 照片库

> ID：12923141
> 
> 赞同：0
> 
> 时间：2012-10-16T20:47:19.000
> 
> 标签：javascript, jquery, html, css

我已经实现了一个相册，它在网页中显示了一系列图像缩略图（200 像素），但我还希望允许用户通过单击缩略图来显示图片的全尺寸视图。通过隐藏缩略图索引，应在同一页面中显示全尺寸视图。因此，一旦用户关闭全尺寸图像，缩略图索引就会再次显示。我有以下代码从 JSON 文件中读取所有图片并将它们附加到 div#images 并使用 img {height:200px, width:200px} 将 CSS 应用于它们。

```
var imageList;
$.getJSON('images.json', function(data) {
    imageList = data;
    for (var i = 0; i < imageList.length; i++) {
        $('<img>').attr({src: imageList[i].img_src, 
                    title: imageList[i].title}).appendTo('#images');    
    }
}); 
```

我是 jQuery 的新手，想完成上面的任务，所以任何关于如何做的答案都将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:05:55.173

请试试这个：

```
Replace <img> as img. 
```

改变这个，

```
$('<img>').attr({src: imageList[i].img_src, 
                    title: imageList[i].title}).appendTo('#images'); 
```

用这个，

```
$('img').attr({src: imageList[i].img_src, 
                title: imageList[i].title}).appendTo('#images'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:52:18.140

看看我在这里做什么并对其进行逆向工程以满足您的需求： http: [//oregonadventuretours.com/](http://oregonadventuretours.com/)

请注意我只是如何显示和隐藏一个包含更多内容的 div，在你的情况下，它将是更大的照片。

# symfony - 基于 ArrayCollection() 在 Symfony2 中填充复选框

> ID：12923142
> 
> 赞同：4
> 
> 时间：2012-10-16T20:47:21.527
> 
> 标签：symfony

**编辑**- 重新定义问题并包含其他特定代码

在我的 Symfony2 项目中，我有一个实体（**Configurations**），其中包含与另一个实体（**ConfigurationsFeatures**）的 OneToMany 关系。我正在尝试构建一个表单，该表单允许用户更改 Configurations 实体中的值，并选择要持久保存到 ConfigurationsFeatures 实体的值。表单的使用场景有两种：

1)*创建一个新配置*-> 呈现一个空白表单，其中包含 Configurations 中的值字段和 ConfigurationsFeatures 中潜在值的复选框集合；潜在价值的来源实际上是第三个实体，**CoreCodes**。验证后，表单的配置值将保存到配置实体，选定的复选框将保存到配置功能。

2)*更新现有配置*-> 使用字段中显示的现有配置值呈现表单，并为所有可能的 ConfigurationsFeatures 值呈现复选框集合，但已选择现有值。

我已经为场景 #1 构建了表单类型和控制器操作，对其进行了测试，一切正常。但是，我似乎无法解决表单复选框部分中的“已选择现有值”。我意识到，当我目前设置了我的控制器时，我基本上是在比较苹果和橘子，因为 $entity->getFeatures() 返回一个 ConfigurationsFeatures 实体的 ArrayCollection 并且在表单中没有什么可以映射的，因为表单使用CoreCodes 实体的集合。

那么我该如何弥补这个差距呢？

* * *

**Entity\Configurations**（存储单个配置）

```
use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * Lynux\AssetBundle\Entity\Core\Configurations
 * ... ORM declarations ...
 */
class Configurations
{
    // ... plain old properties, nothing fancy here... 

    /**
     * @ORM\OneToMany(targetEntity="Lynux\AssetBundle\Entity\Core\ConfigurationsFeatures", mappedBy="configurationFk")
     */
    private $features;

    public function __construct()
    {
        $this->features = new ArrayCollection();
    }

    // getters and setters

    /**
     * Set features
     */
    public function setFeatures(ArrayCollection $features)
    {
        $this->features = $features;
    }

    /**
     * Get features
     */
    public function getFeatures()
    {
        return $this->features;
    }
} 
```

* * *

**Entity\ConfigurationsFeatures**（存储每个配置的选定特征）

```
use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;

/**
 * Lynux\AssetBundle\Entity\Core\ConfigurationsFeatures
 * ... ORM declarations ...
 */
class ConfigurationsFeatures
{
    /**
     * @var Codes
     *
     * @ORM\ManyToOne(targetEntity="Lynux\AssetBundle\Entity\Core\Codes")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="feature_fk", referencedColumnName="id")
     * })
     */
    private $featureFk;

    /**
     * @var Configurations
     *
     * @ORM\ManyToOne(targetEntity="Lynux\AssetBundle\Entity\Core\Configurations", inversedBy="features")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="configuration_fk", referencedColumnName="id")
     * })
     */
    private $configurationFk;

    /**
     * Set featureFk
     *
     * @param Lynux\AssetBundle\Entity\Core\Codes $featureFk
     * @return ConfigurationsFeatures
     */
    public function setFeatureFk(\Lynux\AssetBundle\Entity\Core\Codes $featureFk = null)
    {
        $this->featureFk = $featureFk;

        return $this;
    }

    /**
     * Get featureFk
     *
     * @return Lynux\AssetBundle\Entity\Core\Codes
     */
    public function getFeatureFk()
    {
        return $this->featureFk;
    }

    /**
     * Set configurationFk
     *
     * @param Lynux\AssetBundle\Entity\Core\Configurations $configurationFk
     * @return ConfigurationsFeatures
     */
    public function setConfigurationFk(\Lynux\AssetBundle\Entity\Core\Configurations $configurationFk = null)
    {
        $this->configurationFk = $configurationFk;

        return $this;
    }

    /**
     * Get configurationFk
     *
     * @return Lynux\AssetBundle\Entity\Core\Configurations
     */
    public function getConfigurationFk()
    {
        return $this->configurationFk;
    }
} 
```

* * *

**Entity\CoreCodes**（ConfigurationsFeatures->featureFk 的潜在值的来源）

```
use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * Lynux\AssetBundle\Entity\Core\Codes
 *
 * @ORM\Table(name="core_codes")
 */
class Codes
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false, unique=true)
     * @ORM\Id
     * @Assert\NotBlank(message="ID cannot be blank!")
     * @Assert\Regex(pattern="/^\d+$/", match=true, message="ID must be an integer!")
     * @Assert\MinLength(limit=8, message="ID must be 8 digits in length!")
     * @Assert\MaxLength(limit=8, message="ID must be 8 digits in length!")
     */
    private $id;

    // ... various properties, not applicable to question ...

    /**
     * Set id
     *
     * @param integer $id
     * @return Codes
     */
    public function setId($id)
    {
        $this->id = $id;

        return $this;
    }

    /**
     * Get id
     *
     * @return integer
     */
    public function getId()
    {
        return $this->id;
    }

    // ... getters and setters for other properties ...
} 
```

* * *

**类型\表单配置**

```
use Doctrine\ORM\EntityRepository;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class FormConfigurations extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $features = $this->features;

        // ... builders for other properties ...

        $builder->add(
            'features',
            'entity',
            array(
                'class'         => 'LynuxAssetBundle:Core\Codes',
                'property_path' => false,
                'query_builder' => function(EntityRepository $er) use ($features)
                    {
                        return $er->createQueryBuilder('u')
                            ->where('u.submodule = :submodule')
                            ->setParameter('submodule', 'feature');
                    },
                'expanded' => true,
                'multiple' => true,
                'property' => 'title',));
    }

    public function getName()
    {
        return 'FormConfigurations';
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(
            array(
                'data_class' => 'Lynux\AssetBundle\Entity\Core\Configurations',));
    }
} 
```

* * *

**控制器\配置控制器::createAction()**

```
public function createAction(Request $request)
{
    $config = $request->getSession()->get('configuration');
    $manage = $this->getDoctrine()->getEntityManager();

    $entity = new Configurations();
    $form   = $this->createForm(new FormConfigurations($features), $entity);
    $failed = null;

    $features = $manage
        ->getRepository('LynuxAssetBundle:Core\Codes')
        ->findBySubmodule('feature');

    if ('POST' == $request->getMethod()) {
        $form->bind($request);

        if ($form->isValid()) {
            $status = $manage
                ->getRepository('LynuxAssetBundle:Core\Codes')
                ->findOneById(10103022);

            $entity->setToken($entity->getName());
            $entity->setStatusFk($status);
            $entity->setCreateAccountFk($this->getUser());

            $features = $form->get('features')->getData();
            foreach($features as $feature) {
                $addFeature = new ConfigurationsFeatures();
                $addFeature->setConfigurationFk($entity);
                $addFeature->setFeatureFk($feature);
                $manage->persist($addFeature);
            }
            $manage->persist($entity);
            $manage->flush();

            return $this->redirect($this->generateUrl(
                'CoreConfigurationsConfirm',
                array(
                    'code'  => 'create',
                    'token' => $entity->getToken(),)));
        } else {
            $failed = true;
        }
    } 
```

* * *

**控制器\配置控制器::updateAction()**

```
public function updateAction(Request $request, $token)
{
    $manage = $this->getDoctrine()->getEntityManager();
    $entity = $manage
        ->getRepository('LynuxAssetBundle:Core\Configurations')
        ->findOneByToken($token);

    $form   = $this->createForm(new FormConfigurations($features), $entity);

    if ('POST' == $request->getMethod()) {
        $form->bind($request);

        if ($form->isValid()) {
            $currentFeatures = $manage
                ->getRepository('LynuxAssetBundle:Core\ConfigurationsFeatures')
                ->findByConfigurationFk($entity);
            foreach($currentFeatures as $currentFeature) {
                $manage->remove($currentFeature);
            }

            $features = $form->get('features')->getData();
            foreach($features as $feature) {
                $addFeature = new ConfigurationsFeatures();
                $addFeature->setConfigurationFk($entity);
                $addFeature->setFeatureFk($feature);
                $manage->persist($addFeature);
            }

            $manage->flush();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T21:13:31.687

啊，耐心和坚持……我突然想到，在持久化到数据库时，我正在将 CoreCodes 的集合转换为 ConfigurationsFeatures 的集合。同样，在显示表单时从 ConfigurationsFeatures 转换为 CoreCodes 也是有意义的。

```
// ConfigurationsController::updateAction()

$formFeatures    = new ArrayCollection();
$currentFeatures = $entity->getFeatures();
foreach($currentFeatures as $feature) {
    $formFeatures->add($feature->getFeatureFk());
}

if ('POST' != $request->getMethod()) { // first time the form is loaded
    $form->get('features')->setData($formFeatures);
} 
```

# php - 将变量从 javascript 传递到 PHP

> ID：12923145
> 
> 赞同：5
> 
> 时间：2012-10-16T20:47:25.720
> 
> 标签：php, javascript, ajax, google-maps

我正在使用 Google Maps 制作一张地图，该地图可以加载带有存储在数据库中的 lat/lng 数据的标记。我希望用户可以通过单击按钮加载三个不同的“层”。单击该按钮时，将在服务器上执行一个 php 函数，根据数据库上的信息创建一个 xml 文件。然后调用 AJAX 函数来提取此 xml 数据，然后使用该数据创建地图标记。有没有办法将变量从 AJAX 中的 javascript 传递给 PHP，而不是为每个“层”使用单独的 PHP 函数（除了 SQL 查询行之外，这将是同一件事）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T21:21:51.583

如果您使用 AJAX 请求，将变量传递给 php 文件非常容易。这是一个简单的例子。

```
 $('#your-button').on("click", function(){
       var somevar1 = "your variable1";
       var somevar2 = "your variable2";
    $.ajax({
        type:"POST",
        url: "your-phpfile.php",
        data: "variable1=" + somevar1 + "\u0026variable2="+ somevar2,
        success: function(){
        //do stuff after the AJAX calls successfully completes
    }

    });
}); 
```

然后在您的 php 文件中，您可以使用简单地访问变量

```
 $ajax_var1 = $_POST['variable1'];
 $ajax_var2 = $_POST['variable2']; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T20:54:38.050

请试试这个：

我们可以将值从 javascript 传递给 PHP。

我们可以使用，

```
$getValue = "<script>document.write(your script variable);</script>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T20:50:47.383

如果您使用以下 url 执行 ajax get 请求

```
somePhpFile.php?varName=10 
```

在你的 somePhpFile.php 中，你可以做

```
$v = $_GET['varName']; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T21:21:33.247

这是 Mike Williams 的 (v2) 关于[“AJAX 哲学”的](http://econym.org.uk/gmap/basic11.htm)教程，他完全按照您的要求进行操作。

（我应该注意地图使用 Google Maps API v2，但这个概念不是特定于 API 版本的）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-16T09:44:31.710

> 引用 Vijay S 的话：
> 
> 请试试这个：
> 
> 我们可以将值从 javascript 传递给 PHP。
> 
> 我们可以使用，
> 
> `$getValue = echo "<script>document.write(your script variable);</script>";`

稍微修改了一下，对我来说效果很好：

```
$getValue = "<script>document.write(YourVarHere);</script>";
echo $getValue; 
```

# c++ - 在 c++11 中，虚函数可以通过移动语义有效地返回一个大值吗？

> ID：12923147
> 
> 赞同：5
> 
> 时间：2012-10-16T20:47:36.790
> 
> 标签：c++, c++11, virtual, move-semantics, copy-elision

通常，这将被优化为不涉及复制大值（因为 a`std::vector`启用了移动语义）：

```
std::vector<int> makeABigThing(){
    std::vector<int> large_thing(1000, 0);
    return large_thing;
} 
```

如果函数是虚方法，是否也可以以相同的方式进行优化：

```
struct Foo{
    virtual std::vector<int> makeABigThing(){
        std::vector<int> large_thing(1000, 0);
        return large_thing;
    }
}; 
```

即，即使在运行时选择了被调用的函数，移动语义是否也有效？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T20:55:06.893

函数是静态解析还是动态解析不影响移动结果的可能性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T20:56:23.270

`virtual`与没有相比没有任何改变。编译器在编译时仍然知道返回类型。事实上，这（几乎*）保证使用向量的移动语义。

*它可以通过 NRVO 完全忽略它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:01:33.163

这种优化称为复制省略 (http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)，它在 c++11 之前。移动语义和复制省略都是同一种解决方案，都是标准的一部分，但是复制省略是由编译器实现的，而移动语义由程序员提供对这种优化的控制。

行为应该是相同的，无论是否虚拟。

# php - Mysql真正的转义字符串和SQL选择

> ID：12923148
> 
> 赞同：0
> 
> 时间：2012-10-16T20:47:42.733
> 
> 标签：php, mysql, sql

问题，如果您使用 mysql_real_escape_string 您的变量，它如何仍然与您一起使用 SELECT SQL 查询。例如：

我的行有一列包含 value `'s-Gravenmoer`。现在用户`'s-Gravenmoer`输入，为了安全起见，我将转义这个输入的值。但是，包含值`'s-Gravenmoer`的列永远不会弹出，它在单引号之前添加了斜线。如果有办法**用 mysql_real_escape_string**做到这一点？

多谢你们！桑德

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T20:56:13.277

您误解了为 SQL 使用转义数据的意义。它不会永久修改数据。把它想象成包裹礼物的纸。您正在向数据库赠送一些数据，这样您就可以很好地包装它（real_escape_string）。一旦它到达数据库，数据库服务器就会打开礼物（移除转义）并将“礼物”放入它的存储区。

您添加的反斜杠永远不会出现在存储的数据中，因为它们在执行实际插入时被数据库服务器删除。转义纯粹是为了确保您插入到查询中的任何数据都不会“破坏” SQL 语句，例如

```
$name = "Miles O'Brien"; // <---note the '
$sql = "INSERT INTO people (names) VALUES ('$name')"; 
```

生成的sql：

```
INSERT INTO people (names) VALUES ('Miles O'Brien')
                                           ^--- oops, string terminated earlier, what's this "Brien" field/keyword? 
```

使用 real_escape_string，您的查询看起来像

```
... VALUES ('Miles O\'Brien')
                    ^^---no longer an SQL string delimiter, treat it like any other char now. 
```

# javascript - xml onreadystatechange javascript没有格式化

> ID：12923150
> 
> 赞同：0
> 
> 时间：2012-10-16T20:47:52.303
> 
> 标签：javascript, jquery, css, xmlhttprequest, horizontal-scrolling

我有一个图像数据库，我的网站正在使用一个小的 ajax 函数来戳服务器，检索图像列表并相应地格式化。

您可以在此处查看现场版本：http: [//tbremer.com](http://tbremer.com)（现场链接为建筑和音乐会）。

我的两个问题如下：

1.  数据（图像）未按我希望的方式格式化（水平显示）
2.  当图像正确显示时，正文不会滚动。

现在来谈谈奇怪之处。第一次单击时，图像始终垂直显示，但如果再次单击相同的链接，图像格式正确、水平和所有 DIV 的大小都适当。

我将在下面发布代码。

**HTML**

```
<div id="contentWrapper">
    <div id="imageViewer"></div>
</div> 
```

**JAVASCRIPT**

```
//___ Ajax call for images
function loadXMLDoc() {
    //___ Variables
    var xmlhttp;

    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById("imageViewer").innerHTML=xmlhttp.responseText;

            var div = document.getElementById("imageViewer");
            var newDivWidth = 0;
            var imageViewerDivWidth = 290;

            for (i=0;i<div.children.length;i++) {
                //console.log(div.children[i]);

                var imageWidth = $("#portImage"+i).width();
                newDivWidth = imageWidth + newDivWidth + 4;
                console.log(imageWidth+" px.");
                console.log(newDivWidth);
            }

            imageViewerDivWidth = imageViewerDivWidth + newDivWidth;
            $("#contentWrapper").width(imageViewerDivWidth);
            $("#imageViewer").css("width", imageViewerDivWidth);
            console.log("");
        }

    }
    console.log(portLink); //Display link clicked
    xmlhttp.open("GET","includes/displayimagesLive.php?portname="+portLink,true);
    xmlhttp.send();
} 
```

**PHP**

```
<?php
require("connect.php");

#___ Get variables from navigation
$portname = $_GET['portname'];
$queryMain = "SELECT id, portfolioName, filename FROM portfolio WHERE portfolioName='".$portname."' AND filename IS NOT NULL";
$getPortSQL = mysql_query($queryMain);

#___ Display!
$i = 0;
while ($nt = mysql_fetch_array($getPortSQL)) {
        echo "<div id='portImage".$i."' class='portImage'>";
            echo "<img src='images/portfolio/$nt[portfolioName]/$nt[filename]' height='500px'>";
        echo "</div>";
    $i++;
}
unset($i);
?> 
```

**相对 CSS**

```
/* Content Wrapper */
#contentWrapper {
    padding: 0px;
    margin: 0px;

    z-index: 0;

    border: 0px solid #600;
}

/* Image Viewer */

#imageViewer{
    position: fixed;
    left: 0px;
    top: 0px;

    padding: 0px;
    padding-left: 350px;
    margin: 0px;

    border: 0px solid #F0F;
}

.portImage {
    padding: 0;
    margin: 4px;

    border: 1px solid #000;

    float: left;
} 
```

# javascript - Google CDN 上的跨域请求

> ID：12923158
> 
> 赞同：4
> 
> 时间：2012-10-16T20:48:28.320
> 
> 标签：javascript, dojo, jsonp, cors, google-cdn

我正在尝试从 Google CDN 加载扩展名为 .json 的文件：

//ajax.googleapis.com/ajax/libs/dojo/1.8/dojox/geo/charting/resources/data/USStates.json

由于跨域策略，标准 xhr 请求失败。Google CDN 是否支持任何类型的跨域请求，例如 JSONP 或 CORS？你能告诉我一个如何获取上述文件的例子吗？

上面的文件是 Dojo 的一部分，但我可以使用任何其他库或纯 JavaScript。唯一的限制是从 Google CDN 获取文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:08:51.550

根据我获得的（缺乏）信息，Google CDN 不支持任何类型的跨域访问，例如 JSONP 或 CORS。这意味着使用 CDN .json 文件的唯一方法是通过服务器代理。

对于客户端 JavaScript，我必须存储文件的本地副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-25T06:31:31.053

我知道这个问题被问到已经很久了，但现在谷歌存储允许我们更改 CORS 配置。

我在 CORS 方面遇到了同样的问题，并按照这些步骤来解决它。

1.  使用 CORS 配置创建 JSON 文件 cors-config.json

```
[
    {
        "origin": ["*"],
        "method": ["GET"],
        "maxAgeSeconds": 3000,
        "responseHeader": ["Authorization", "Content-Range", "Accept", "Content-Type", "Origin", "Range"]
    }
] 
```

2.将此文件上传到bucket

```
gsutil cp cors-config.json gs://[bucket_name] 
```

3.现在更新bucket cors配置

```
gsutil cors set cors-config.json gs://[bucket_name] 
```

您的 CORS 配置已更新。现在，您可以通过运行此命令在存储桶上查看新更新的 CORS 配置。

```
gsutil cors get gs://[bucket_name]/ 
```

关于 CORS 配置的[Google 文档](https://cloud.google.com/storage/docs/cross-origin)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-15T07:50:22.223

在撰写本文时，@Yogesh Patil 的回答确实解决了这个问题。

我想指出，我使用的是 Windows Google Cloud SDK。

您无需将 json 文件上传到您的存储桶。但是您需要将 json 文件复制到本地 Google Cloud SDK 目录中。然后你可以运行命令：

```
gsutil cors set cors-config.json gs://[bucket_name] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-08-19T13:06:44.500

它似乎不再是这种情况了：

```
$.ajax('//ajax.googleapis.com/ajax/libs/dojo/1.8/dojox/geo/charting/resources/data/USStates.json').
  then(function(data) { console.log(data) })

// {"layerExtent": …} 
```

# java - GWT :: 在客户端的单个位置处理服务器错误

> ID：12923172
> 
> 赞同：0
> 
> 时间：2012-10-16T20:49:39.073
> 
> 标签：java, security, gwt, exception-handling, client-server

可以使用具有 Guice 支持的特殊类型的处理程序定义单点请求处理，如下所示：

```
@Singleton
public class GuiceRemoteServiceServlet extends RemoteServiceServlet {
    @Inject
    private Injector injector;

    @Override
    public String processCall(String payload) throws SerializationException {
        RPCRequest req = RPC.decodeRequest(payload, null, this);

        RemoteService service = getServiceInstance(
                req.getMethod().getDeclaringClass());

        return RPC.invokeAndEncodeResponse(service, req.getMethod(),
                req.getParameters(), req.getSerializationPolicy());

    }

    @SuppressWarnings({"unchecked"})
    private RemoteService getServiceInstance(Class serviceClass) {
        return (RemoteService) injector.getInstance(serviceClass);
    }
} 
```

基本上，这是做一些与安全相关的事情的理想场所，比如检查用户是否经过身份验证。我需要确保对服务器的**任何请求都对用户进行身份验证。**所以一般我会添加方法*validateUser*，它将返回真/假或抛出异常。该方法将在上面代码的**processCall**中调用。

现在的问题是 - 我如何在**客户端**处理此身份验证响应？我想把它放在**一个地方**，并确保任何服务都会默认启用此用户验证。任何新服务都必须是“安全的”而不添加任何与安全相关的代码。因此，不要在“onFailure”方法或类似方法中复制/粘贴此代码。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:13:43.337

如果你使用的是基本的 RPC 机制（例如不是[gwtp](http://code.google.com/p/gwt-platform/wiki/GettingStartedDispatch)），你可以创建一个抽象的 AsyncCallback 并实现 onFailure 方法来处理你的全局服务器故障。对于其他异常，您可以委托给调用者可以实现的其他方法。

每次调用服务器时，只需使用这个新的回调而不是 AsyncCallback。这也是一件好事，因为您现在不必每次都实现 onFailure 方法。

RequestFactory 使用它，[接收器](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/web/bindery/requestfactory/shared/Receiver.java)是抽象的，所以当你创建一个时，你只需要定义 onSuccess 方法。

# javascript - 推入对象数组属性也会为对象类的未来实例设置值

> ID：12923173
> 
> 赞同：2
> 
> 时间：2012-10-16T20:49:46.097
> 
> 标签：javascript, ember.js

我在 Ember 对象上看到了这种奇怪的行为，当我更改 I 的数组时`instance.get`，更改将应用​​于类默认值（因此，应用于对象的任何新实例）。

但是，如果我将 alter 设置为计算属性，它会很好地工作（因为它确保我总是发送一个新的数组实例）。

我想知道这是正常行为吗，在我看来它不应该是这样，但我很可能误解了一些事情。

这是一个示例（可在[此 jsfiddle](http://jsfiddle.net/midu/atjVu/)中获得）：

```
A = Ember.Object.extend
  array: []

a = A.create()
a.get('array').pushObject('something') # same with push

b = A.create()
b.get('array') # ['something']

B = Ember.Object.extend
  array: ( ->
    []
  ).property()

a = B.create()
a.get('array').pushObject('something else')

b = B.create()
b.get('array') # [] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:12:03.747

这是一个很好的解释：[http](http://codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds/) ://codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds/第 6 章。tl;dr：当你想要一个数组作为属性时，在构造函数中初始化它，比如

```
A = Ember.Object.extend
  array: null
  init: (->
     @_super()
     @set('array', [])
  ) 
```

更新小提琴：http: [//jsfiddle.net/Sly7/atjVu/4/](http://jsfiddle.net/Sly7/atjVu/4/)

# business-catalyst - Business Catalyst 动态菜单将“选定”设置应用于博客子项

> ID：12923175
> 
> 赞同：2
> 
> 时间：2012-10-16T20:49:49.483
> 
> 标签：business-catalyst

如何让 BC 为模块的所有子级应用相同的 CSS 设置？

我有一个博客，我已将菜单项设置为仅适用于博客主页的博客，我希望所有子页面都保留相同的菜单设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T23:47:59.470

更多信息会有所帮助，但我想我理解你的问题。

Business Catalyst 菜单模块使用无序列表。“selected”类应用于与用户当前所在页面相关的列表项。

您想将应用于“选定”菜单项的相同样式应用于子菜单项？

为此，您可以使用 CSS 后代选择器。

**CSS：**

```
.selected ul li {
    required styling
} 
```

如果这不能回答您的问题，请提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T13:53:35.050

我认为克里斯要问的是：

与博客儿童类似。Business Catalyst 照片库模块的工作方式是，如果每页的照片数量超过分配的数量，它会添加分页。

现在，当用户第一次选择一个带有画廊模块的页面时，菜单应该正常运行，假设该页面在 Business Catalyst 菜单上有一个位置并且`.selected`应用了适当的 CSS。

当用户单击任何分页链接（下一个或上一个）时，就会出现问题。

网址从此更改：

[http://www.YourSite.com/gallery-page](http://www.YourSite.com/gallery-page)

对此 - 或一些变体：

[http://www.YourSite.com/Default.aspxPageID=143342&Page=2&A=PhotoGallery&PID=12350&Items=24](http://www.YourSite.com/Default.aspxPageID=143342&Page=2&A=PhotoGallery&PID=12350&Items=24)

由于 CSS 中引用的父列表项不再是活动链接，因此不再呈现菜单样式。通常，菜单会显示为好像没有选择任何页面。

我们需要一个包含这些动态分页页面的解决方案，并允许 CSS 从原始图库页面向下渗透到它们。我想这与多个帖子发生的博客分页非常相似。

# google-bigquery - BigQuery 错误增加？

> ID：12923178
> 
> 赞同：0
> 
> 时间：2012-10-16T20:49:51.860
> 
> 标签：google-bigquery

我们发现 BigQuery 错误一整天都在增加。大约每 10 个左右的作业都因“作业执行期间遇到错误。意外。请重试”而失败。

一些工作ID是：

```
job_9d954736de884aa4a69adc3f10d296f1
job_b1ed9c2953f3460fb9f205080d05e204
job_410130a620674625a7e87f7d8608cdce
job_b38e3b0bd75a4fcea46aa278fddea319 
```

知道发生了什么，是否有解决时间表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:53:19.557

您正在使用的特定表正在处理我们的查询执行引擎中的错误。我们已经解决了这个问题。如果您再次遇到它，请告诉我们。

# ada - Ada 中的未定义过程

> ID：12923179
> 
> 赞同：1
> 
> 时间：2012-10-16T20:49:52.920
> 
> 标签：ada

当我去编译我正在处理的这个 Ada 程序时，我完全不明白为什么我会得到一个未定义的错误。我仔细看了一遍……没有拼写错误或任何类似的错误。这是我所拥有的，然后是我得到的错误。

```
Get_Score(CandidateVotes, CurrentCandidate);
                end loop;
        end Get_Input;

procedure Get_Score(CandVotes: in CurrentCandidate_Votes; 
            Candidate: in Character) is
-- get the score for the candidate and store it into CandidatesArray
            SameAnswers: Integer;
            DifferentAnswers: Integer;
            CandidateScore: Integer;
    begin
            for I in VoterArray_Index loop
                    if Voter(I) /= 0 And CandVotes(I) /= 0 Then
                            if Voter(I) /= CandVotes(I) Then
                                    DifferentAnswers := DifferentAnswers + 1;
                            else
                                    SameAnswers := SameAnswers + 1;
                            end if;
                    end if;
            end loop;
            CandidateScore := SameAnswers - DifferentAnswers;
            Candidates(Candidate) := CandidateScore;

    end Get_Score; 
```

代码块的顶部是我从另一个过程调用 Get_Score 过程的地方。CandidateVotes 和 CurrentCandidate 的类型是正确的。如果我应该发布更多，请告诉我。

此外，错误显示为： Candidates.adb:37:25: "Get_Score" is undefined

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T21:33:57.510

您需要`Get_Score`在使用它之前进行定义。

懒惰的方法是重新排序代码，以便子程序主体以适当的顺序出现。

Ada 方法是先编写子程序规范（以您喜欢的任何顺序），然​​后再以您喜欢的任何顺序实现主体。

的规格`Get_Score`是

```
procedure Get_Score(CandVotes: in CurrentCandidate_Votes; 
                    Candidate: in Character); 
```

顺便说一句，当你写

```
DifferentAnswers: Integer; 
```

你认为从什么价值`DifferentAnswers`开始？

# silverstripe - 使用 write() 更新的 DataObject 未反映在 CMS 中

> ID：12923181
> 
> 赞同：0
> 
> 时间：2012-10-16T20:50:01.837
> 
> 标签：silverstripe

我有一个类“列表”，其中包含以下字段：

```
static $db = array(
            ...
            'Left' => 'Varchar',
            'Top' => 'Varchar'
            ...
    ); 
```

我正在抓取这些以显示在地图上：

```
function getListings(){
        $sqlQuery = new SQLQuery();
        $sqlQuery->setFrom('ListingCategory_Listings');
        $sqlQuery->selectField('STLC.Title AS cTitle, STLL.Title AS lTitle, Listing_Live.ID AS lID, ListingCategory.ID as cID, Phone, Email, Website, Filename, Top, Listing_Live.Left, STLC.ID AS catID');
        $sqlQuery->addLeftJoin('Listing_Live', '"ListingCategory_Listings"."ListingID" = "Listing_Live"."ID"');
        $sqlQuery->addLeftJoin('SiteTree_Live', '"Listing_Live"."ID" = "STLL"."ID"', 'STLL');
        $sqlQuery->addLeftJoin('ListingCategory', '"ListingCategory_Listings"."ListingCategoryID" = "ListingCategory"."ID"');
        $sqlQuery->addLeftJoin('SiteTree_Live', '"ListingCategory"."ID" = "STLC"."ID"', 'STLC');
        $sqlQuery->addLeftJoin('File', '"ListingCategory"."IconID" = "File"."ID"');
        $sqlQuery->addWhere('"Listing_Live"."ID" IS NOT NULL');
        $sqlQuery->setOrderBy('ListingCategory.ID', 'ASC');
        $result = $sqlQuery->execute();
        $dataObject = new ArrayList();
        foreach($result as $row) { 
            $dataObject->push(new ArrayData($row)); 
        }
        return $dataObject;
    } 
```

我有一个函数来更新对象的左值和上值（通过在前端拖放对象的实例通过 AJAX 触发）：

```
function updatePoi(){
        $left = $_POST['left'];
        $top = $_POST['top'];
        $id = $_POST['ID'];
        if ($poi = DataObject::get_one('Listing', '"Listing"."ID" = '.$id)){
            $poi->Left = $left;
            $poi->Top = $top;
            $poi->write(); 
            return 'success';
        }else{
            return 'error';
        }
    } 
```

这些肯定会更新，因为在页面刷新时，对象反映了更新的 Top 和 Left 值，但是我在 CMS 中显示了这些字段，但它们在这里显示为空白。此外，当我在 CMS 中保存对象时，Left 和 Top 值被清除，我必须在前端重新定位它们。

有谁明白为什么会这样？

更新：似乎 write() 只更新 Listing_Live 表，而不是 Listing 表，如果不使用原始 SQL 执行此操作，我怎样才能让它同时更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:25:31.730

我建议使用

```
$poi->Top = $top;
$poi->write(); 
$poi->publish("Live", "Stage"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:27:16.420

作为快速修复，我已将更新功能更改为：

```
function updatePoi(){
        $left = $_POST['left'];
        $top = $_POST['top'];
        $id = $_POST['ID'];
        DB::query('UPDATE "Listing" SET "Left"='.$left.', "Top"='.$top.' WHERE "ID"='.$id);
        DB::query('UPDATE "Listing_Live" SET "Left"='.$left.', "Top"='.$top.' WHERE "ID"='.$id);
        return 'success';
    } 
```

我很高兴听到这样做的更整洁的方式。

# c# - 泛型重载歧义

> ID：12923182
> 
> 赞同：1
> 
> 时间：2012-10-16T20:50:02.087
> 
> 标签：c#, generics, overloading

在阅读了[Skeet 的文章](http://csharpindepth.com/Articles/General/Overloading.aspx)后，我接受了一般建议：“..考虑重命名一些方法以减少重载程度。当它跨越继承层次结构时，这个建议会加倍......”

但我想更多地理解歧义（看看我是否可以保持过载！）

这些只是一些测试助手，用于帮助排除繁琐测试的一部分，这些测试可能需要各种风格的视图模型首先处于某种有效或无效状态。

我开始在两个没有继承关系的视图模型上使用这些助手，它们工作得很好。

然后我决定另一个对 ViewModelWrapper 的另一个超载有用，它是其他视图模型类型的基类。所以编译器抱怨它不知道要为以前工作的 VmWrapper 子类使用哪个扩展。

在这种情况下，这是下面代码中的第 3 次重载和第 1 次重载。就像我暗示的那样，我已经消除了重载，但是

有谁知道我如何让这些工作作为重载工作？

干杯，
贝里尔

```
// SatVm
public static void MakeValid<TParentModel, TModel>(this ISatelliteVm<TParentModel, TModel> instance, IEntityValidator validator) {...}

// HubVm
public static void MakeValid<TParentModel>(this HubViewModel<TParentModel> instance, IEntityValidator validator, bool bValid = true)
where TParentModel : Entity {   ... }

// VmWrapper    
public static void MakeValid<TModel>(this ViewModelWrapper<TModel> instance, IEntityValidator validator) { ... } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:06:08.090

您可以简单地按 vm 类型为每组扩展使用单独的命名空间。

```
namespace Extensions.Satellite
{
    // SatVm
    public static void MakeValid<TParentModel, TModel>(this ISatelliteVm<TParentModel, TModel> instance, IEntityValidator validator) {...}
}

namespace Extensions.Hub
{
    // HubVm
    public static void MakeValid<TParentModel>(this HubViewModel<TParentModel> instance, IEntityValidator validator, bool bValid = true)
        where TParentModel : Entity {   ... }
}

namespace Extensions.Wrapper
{
    // VmWrapper    
    public static void MakeValid<TModel>(this ViewModelWrapper<TModel> instance, IEntityValidator validator) { ... }
} 
```

然后只需使用正确的命名空间。

在相关新闻中，您可能需要查看：[Overriding Extension Methods](https://stackoverflow.com/questions/474074/overriding-extension-methods/12826700#12826700)

# objective-c - 只能得到以前的轮换

> ID：12923185
> 
> 赞同：0
> 
> 时间：2012-10-16T20:50:14.637
> 
> 标签：objective-c, ios, uideviceorientation

在我的对象初始化方法中

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
        [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(didRotate:)
                                                    name:@"UIDeviceOrientationDidChangeNotification" 
                                                  object:nil]; 
```

做旋转方法

```
- (void) didRotate:(NSNotification *)notification {

    NSLog(@"rotate notification");

    //MA_MobileAppDelegate *appDelegate = (MA_MobileAppDelegate *)[[UIApplication sharedApplication] delegate];

    //UIInterfaceOrientation orientation = appDelegate.tabBarController.interfaceOrientation;
    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation]; 
```

由于某种原因，didRotate 似乎在实际旋转之前被调用。因此，当我尝试获取当前/最终旋转时，我得到了最后一个。只有 1 个视图控制器似乎并非如此。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:05:44.323

我不得不延迟我的代码

```
[self performBlock:^(id sender) {

//rotation code

} afterDelay:0.1f]; 
```

短暂的延迟就是给 UIApplication 更新状态栏方向属性的时间:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:04:53.933

iOS 跟踪两个独立的方向：设备方向 ( `[[UIDevice currentDevice] orientation]`) 和界面方向 ( `[[UIApplication sharedApplication] statusBarOrientation]`)。设备方向的改变可能会触发界面方向的改变。在系统更改界面方向之前，您会收到设备方向更改通知。

尝试观察[`UIApplicationDidChangeStatusBarOrientationNotification`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006728-CH3-SW40)。它是由 发布的`[UIApplication sharedApplication]`。

# sql - 使用两个标识符连接表，而不仅仅是一个

> ID：12923188
> 
> 赞同：1
> 
> 时间：2012-10-16T20:50:27.683
> 
> 标签：sql, intersystems-cache

我一直在尝试找到一种方法来连接两个列标识符上的两个表。即在“伪查询”中：

```
 join table1 to table2 where table1.x = table2.y and table1.a = table2.b 
```

我可以在不明确使用 where 语句的情况下使用 join 语句来做到这一点吗？还是最好从 x=y 和 a=b 的 table1,table2 中选择？感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:55:10.243

您可以使用这样的 from 子句：

```
from table1 inner join table2 on table1.x = table2.y and table1.a = table2.b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:56:56.753

你当然可以：

```
select
 *
from
    table1 a join table2 b on 
       (a.some_column = b.some_column and a.other_column = b.other_column) 
```

# visual-studio - 为任何 IP 地址保留 netsh http url 的语法

> ID：12923189
> 
> 赞同：5
> 
> 时间：2012-10-16T20:50:29.600
> 
> 标签：visual-studio, iis-express, netsh

我使用 IIS Express 作为 Visual Studio 2012 的开发 Web 服务器。我希望能够从无线设备（智能手机、平板电脑等）访问我的站点以进行测试和调试。无线设备与工作站位于单独的 LAN 上，并且不是我的 Windows AD 的一部分。由于我办公室局域网的设置方式，他们无法通过主机名解析我的工作站；他们必须使用 IP 地址。

为了使 IIS Express 可以通过非本地主机 URL 访问，我必须在 applicationhost.config 中更改其配置以添加使用 IP 地址的绑定，然后用于`netsh http add urlacl...`进行 URL 保留。

如果我在保留和 applicationhost.config 中使用 IP 地址，我可以让它正常工作。但是 IP 地址偶尔会发生变化。有什么方法可以使用通配符语法，使其适用于任何 IP 地址？我试过这些：

`netsh http add urlacl url=http://+:49197/ user=everyone`

和

`netsh http add urlacl url=http://*:49197/ user=everyone`

但是当我尝试启动 IIS Express 时，它抱怨它无法启动，因为访问被拒绝。

什么是正确的语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T09:55:46.210

尝试使用管理员用户。因为你可能没有权利

netsh http 添加 urlacl url=链接用户=BUILTIN\Administrators

# c# - 使用数据库中的数据填充 RadioButtonList

> ID：12923194
> 
> 赞同：1
> 
> 时间：2012-10-16T20:50:36.937
> 
> 标签：c#, asp.net, radio-button, radiobuttonlist

我正在尝试组合一个轮询应用程序，我需要显示一个单选按钮列表，其中包含从数据库中提取的选项（Option_1、Option_2 等），但我需要单选按钮的值为 1、2、3、4，就像它一样提交后，它将被插入到另一个保存投票结果的数据库中。我一直在这里玩这个代码，我无法让选项文本显示在单选按钮旁边。有什么建议么？

```
 <asp:RadioButtonList ID="Answers" runat="server">
                <asp:ListItem Value="1" Text="<% prs['Option_1'].ToString() %>"></asp:ListItem>
                <asp:ListItem Value="2" Text="<% prs['Option_2'].ToString() %>"></asp:ListItem>
                <asp:ListItem Value="3" Text="<% prs['Option_3'].ToString() %>"></asp:ListItem>
                <asp:ListItem Value="4" Text="<% prs['Option_4'].ToString() %>"></asp:ListItem>
              </asp:RadioButtonList> 
```

也搞砸了这个

```
var op1 = prs["Option_1"].ToString();
                var op2 = prs["Option_2"].ToString();
                var op3 = prs["Option_3"].ToString();
                var op4 = prs["Option_4"].ToString();

                if (op1 != "")
                {
                    Answers.Items.Add("1");
                }
                if (op2 != "")
                {
                    Answers.Items.Add("2");
                }
                if (op3 != "")
                {
                    Answers.Items.Add("3");
                }
                if (op4 != "")
                {
                    Answers.Items.Add("4");
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:00:45.190

这是一种方法。将 for 循环替换为遍历您要显示的答案的循环。为每个项目创建一个 ListItem 并将其放入列表中。然后将该列表设置为单选按钮列表的数据源。

```
var optionList = new List<ListItem>();

for (var i = 0; i < 4; i++)
{
  var newItem = new ListItem()
  {
      Value = count.ToString(),
      Text = string.Format("Option {1}", count.ToString());
  };

  optionList.Add(newItem);
}

Answers.DataSource = optionList;
Answers.DataBind(); 
```

# php - 无法从 SimpleXML 返回命名空间

> ID：12923195
> 
> 赞同：0
> 
> 时间：2012-10-16T20:50:42.697
> 
> 标签：php, xml, simplexml, xml-namespaces

我正在使用谷歌定义的格式和 SimpleXML 从头开始​​创建一个新的 xml 文档。我在让它返回命名空间标签时遇到问题。为了测试，我写了这个：

```
<?php

  $output_xml = new SimpleXMLElement('<?xml version="1.0" ?> <rss xmlns:g="http://base.google.com/ns/1.0" version="2.0"><channel></channel></rss>');

  var_dump($output_xml->getNameSpaces(TRUE)); 
```

它返回这个：

```
array(0) {
} 
```

我究竟做错了什么？我正在运行 PHP 5.3.3 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:21:56.397

您还没有使用任何定义的命名空间。如果您将“g”命名空间添加到“通道”，那么您将获得[http://base.google.com/ns/1.0](http://base.google.com/ns/1.0)

```
$output_xml = new SimpleXMLElement('<?xml version="1.0" ?> <rss xmlns:g="http://base.google.com/ns/1.0" version="2.0"><g:channel></g:channel></rss>');

var_dump($output_xml->getNameSpaces(TRUE)); 
```

# java - 如何在 eclipse 中使用 karel.jar 而不安装斯坦福版本的 eclipse 和 JRE7？

> ID：12923199
> 
> 赞同：1
> 
> 时间：2012-10-16T20:51:03.793
> 
> 标签：java, eclipse, karel

我正在尝试按照斯坦福大学 CS106A 在线课程中的建议与机器人 Karel 一起玩。我不想按照文档的建议安装旧版本的 Java 和 eclipse。我找到了解释如何做到这一点的教程，在独立的 eclipse 安装上，甚至是 stackoverflow 中的一个线程，但它们都基于 JRE6。

有没有办法让它与 JFE7 一起工作？

提前致谢。

其他问题，我可能会在接下来的几周内发现这些问题很明显：

*   为什么这个库不能与 JRE7 一起使用？（我希望较新的 lib 不能与较旧的 JRE 一起使用，但事实并非如此）
*   如何在 Eclipse 中强制使用较旧的 JRE 进行编译？不安装JRE6可以吗？
*   我如何知道 .jar 文件的兼容性？

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:17:25.547

我想做同样的事情，但没有用，你可以使用新的 eclipse 但不能使用新的 jre。如果您想使用新的 Eclipse，您必须将旧 Eclipse 中的所有插件复制到新的 Eclipse 中。

# java - 向量值到数据库

> ID：12923201
> 
> 赞同：0
> 
> 时间：2012-10-16T20:51:15.573
> 
> 标签：java, jsp

如何将向量值存储到数据库？简单的例子会帮助我（初学者）

我有一个如下的向量，并希望将其内容保存到数据库中可用的 11 列中。向量包含 11 个值：

```
Vector cellStoreVector = new Vector(); 
```

下面是我尝试过的代码。结构或语法有什么问题吗？它没有提供任何错误，也没有将值保存到 DB。

```
String sql = "INSERT INTO table name (EMP_ID,FNAME, LNAME, CATEGORY, DEPARTMENT, Title, REASON, TL, START_DATE, END_DATE, ID) VALUES(?,?,?,?,?,?,?,?,?,?,?)";
    PreparedStatement pst1 = conn.prepareStatement(sql);
    pst1.setString(1, cellStoreVector .get(0) );
    pst1.setString(2, cellStoreVector .get(1));
    pst1.setString(3, cellStoreVector .get(2));
    pst1.setString(4, cellStoreVector .get(3);
    pst1.setString(5, cellStoreVector .get(4));

            pst1.setString(11, cellStoreVector .get(10)     ; 
```

pst1.execute();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:08:21.587

[http://www.tutorialspoint.com/jdbc/jdbc-sample-code.htm](http://www.tutorialspoint.com/jdbc/jdbc-sample-code.htm)

如果您提供的上述代码就是您所拥有的，我可以明白为什么它没有提供任何错误，也没有提交到数据库。您需要执行准备好的语句，以便 jdbc 运行并返回结果，或者执行插入或更新。上面的链接是一个超级简单的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:01:03.037

由于sql请求是

```
INSERT INTO table_name VALUES (value1, value2, value3,...) 
```

您只需构建一个字符串并将其提供给 SQL 引擎。

```
Vector< String > v = new Vector<>();
v.add( "riri" );
v.add( "fifi" );
v.add( "loulou" );
String insert =
   String.format(
      "INSERT INTO table_name VALUES ( '%s', '%s', '%s' )",
      v.get(0), v.get(1), v.get(2));
System.out.println( "SQL statement: " + insert );
statement.execute( insert ); 
```

# ruby - 高性能 ETL 平面文件提取的更好解决方案？

> ID：12923204
> 
> 赞同：2
> 
> 时间：2012-10-16T20:51:26.330
> 
> 标签：ruby, open-source, etl, text-parsing, flat-file

我有一个结构如下的数据集：

```
[TIMESTAMP] FIXED POSITION       DATA STRING
[TIMESTAMP] FIXED POSITION       DATA STRING
[TIMESTAMP] tag1=9324, tag2=19, tag3=55, etc
[TIMESTAMP] FIXED POSITION       DATA STRING 
```

这两种类型的记录混合在一起，基于标签的字段定期包含汇总数据。对于单个文件，这些数据文件可以大到 1000 万行。此外，一些固定位置的行可能有几千字节长 - 在我处理它们时会导致内存管理问题。

我需要从头开始处理文件，当我点击摘要条目时对每个条目进行分组，并记录这些摘要条目以及来自固定位置条目的某些字段的聚合。具体来说，固定位置段的一个特定部分包含一个 4 位的状态码。我需要将该数据添加到摘要记录中 - 自上次摘要记录以来出现的每个摘要代码的出现次数。每个摘要条目，包括汇总数据和时间戳的字段，都应转换为 CSV 中的一行。

我目前仅使用 ruby​​ 代码/标准库来执行此操作。对于较小的数据集，这很好，但对于较大的数据集，性能会迅速下降。在我看来，这似乎是一个常见的 ETL 类型问题。稍后我将对这些数据进行更复杂类型的操作，并且似乎会不断地重新访问这些日志文件以对它们进行更复杂的报告。

是否有现有的 ETL 工具或库（首选 Ruby）

1.  高性能混合（正则表达式/固定位置）提取是否良好。
2.  很容易学习。
3.  抽象出内存管理。
4.  是免费/开源或低成本（低于 200 美元）商业的。

我愿意接受关于使用什么来解决这个问题的替代建议——我只是在寻找比原始标准库 ruby​​ 代码更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:43:42.740

我已经完成了一个 java 库调用[http://jrecordbind.org/](http://jrecordbind.org/)使用 xml 模式来定义输入/输出文件的格式

我想你的情况可以用“选择”元素的形式表达

```
<xs:complexType name="Choice">
<xs:choice>
  <xs:element name="one" type="One"/>
  <xs:element name="two" type="Two"/>
</xs:choice>
</xs:complexType>
<xs:complexType name="One">
  <xs:sequence>
    <!-- fixed row definition -->
  </xs:sequence>
</xs:complexType>
<xs:complexType name="Two">
  <xs:sequence>
    <!-- tag row definition -->
  </xs:sequence>
</xs:complexType> 
```

这段 xsd 取自与[此输入文件](http://java.net/projects/jrecordbind/sources/svn/content/trunk/jrecordbind-test/src/test/resources/it/assist/jrecordbind/test/choice.txt?rev=279)一起运行[的测试之一](http://java.net/projects/jrecordbind/sources/svn/content/trunk/jrecordbind-test/src/test/resources/choice.def.xsd?rev=279)。

然后，您应该使用已解析的 java bean 并根据结果方法 getOne() 和 getTwo() 之一是否返回 null 来选择要执行的操作。

JRecordBind 具有“流”方法（即使它确实取决于模式），因此内存消耗保持在最低限度。

# android - 如何在 Adob e Flex 移动（火花）上使用 ToggleSwitch 静音音频（声音）？

> ID：12923205
> 
> 赞同：0
> 
> 时间：2012-10-16T20:51:35.643
> 
> 标签：android, apache-flex, audio, mute

我想学习如何使用 Adob​​e Flash Builder 4.6 中的 ToggleSwitch 组件关闭（静音）声音。我打算使用 Android 应用程序。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:04:03.913

只需将“ **ToggleButton** ”添加到舞台并右键单击它并选择“ **Generate click handler** ”，然后粘贴此代码。

```
protected function ToggleBtn_clickHandler(event:MouseEvent):void
{
    switch(ToggleBtn.label)
        {
            case "Mute":
                SoundMixer.soundTransform = new SoundTransform(0);
                ToggleBtn.label="UnMute";
                break;
            case "UnMute":
                SoundMixer.soundTransform = new SoundTransform(1);
                ToggleBtn.label="Mute";
                break;
        }
} 
```

# debugging - 在谷歌浏览器调试器中为事件设置断点

> ID：12923206
> 
> 赞同：1
> 
> 时间：2012-10-16T20:51:46.163
> 
> 标签：debugging, google-chrome-devtools

抱歉，如果提到了这个问题。我有一堆 javascript 文件的网页。其中之一具有为 HTML 文件上的某些输入设置值的功能。是否可以通过调试器查看哪个 javascript 函数调用更改输入 HTML 元素的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T04:03:52.963

右键单击`input`您愿意观察的标签并选择**Break On**，然后选择**Attribute Modifications**。如果他们尝试修改输入值，您的脚本将停止。

![在此处输入图像描述](../Images/54ee0936171a4065bdac76a9cf96006e.png)

# playframework - 如何在 Play 的模板中获取迭代器的索引？

> ID：12923208
> 
> 赞同：0
> 
> 时间：2012-10-16T20:51:58.857
> 
> 标签：playframework, playframework-1.x

我想在循环中使用计数器，因此每个表的行都有其唯一`id`属性，该属性指示当前循环迭代。如何访问当前索引？（在标记为的示例代码中`ITERATOR_HERE`）

```
<table id="table_id" class="display">
<thead>
    <th>Key</th>
    <th>Value</th>      
    <th></th>
</thead>
<tbody>
    #{list items:paras, as:'elem' }
    <tr>
        <td id="ITERATOR_HERE">${elem.sendAllKey}</td>
        <td>${elem.sendAllValue}</td>               
        <td>button</td>             
    </tr>       
    #{/list}
</tbody>    
</table> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T22:08:47.353

list 标签创建一个`varname_index`包含当前迭代次数的变量。有关更多信息，请参阅[标签参考](http://www.playframework.org/documentation/1.2.5/tags#list)；）

所以，你的片段变成：

```
#{list items:paras, as:'elem' }
<tr>
    <td id="ITERATOR_${elem_index}">${elem.sendAllKey}</td>
    <td>${elem.sendAllValue}</td>               
    <td>button</td>             
</tr>       
#{/list} 
```

# r - 使用 ggplot 的列线图

> ID：12923214
> 
> 赞同：1
> 
> 时间：2012-10-16T20:52:24.037
> 
> 标签：r, ggplot2

我正在尝试重现 Mozina 在[Nomograms for Visualization of Naive Bayesian Classifier](http://iccle.googlecode.com/svn/trunk/share/pdf/mozina04.pdf)中给出的 Naive Bayes 列线图。这是查看贝叶斯概率的绝佳可视化。我一直在搜索和尝试各种事情，但没有运气。（我无法将所有点放在一行的一列中。）我计算了概率并将它们放在一个名为的数据框中`df`

```
structure(list(.id = c("outlook", "outlook", "outlook", "windy", 
"windy"), variablevalue = structure(c(1L, 2L, 3L, 5L, 6L), .Label = c("sunny", 
"overcast", "rainy", "'All'", "FALSE", "TRUE"), class = "factor"), 
prob = c(0.222222222222222, 0.444444444444444, 0.333333333333333, 
0.666666666666667, 0.333333333333333)), .Names = c(".id", 
"variablevalue", "prob"), row.names = c(1L, 3L, 5L, 11L, 13L), class = "data.frame") 
```

这是图表的样子（这个图表都是剪切和粘贴的）： ![列线图](../Images/f68407c5973ebbf0eb958f6c1c647dde.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:14:44.933

这行得通吗？

```
ggplot(df, aes(prob,.id,label=variablevalue)) + 
  geom_text() + 
  xlim(c(0,1)) 
```

![在此处输入图像描述](../Images/cd20a14343f653ffd42491ad2c19b07f.png)

# javascript - 将 (AJAX) 数据发布到另一个页面

> ID：12923218
> 
> 赞同：0
> 
> 时间：2012-10-16T20:52:37.993
> 
> 标签：javascript, ajax, snackjs

我正在尝试一个小型 JavaScript 库[SnackJS](http://www.snackjs.com/)，并且做得很好。但是我碰壁了，似乎无法弄清楚这一点：

小吃：

```
<script type="text/javascript">
    snack.ready(function () {
        var parameters = {
            node: document.body,
            event: 'change',
            delegate: function (node) {
                return node.getElementsByClassName("qty")
            }
        }

        snack.listener(parameters, postToOtherPage);

        function postToOtherPage() {
            var options = {
                method: 'post',
                url: '/InlineEditing',
                data: {
                    qty: 5,
                    id: "hi"
                }
            }
        }
    });
</script> 
```

我的问题是，在输入元素的更改事件中，如何将元素的 id 以及该元素的值（数量）发布到另一个页面？

我确实浏览了文档，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:54:21.437

你错过了一个

```
snack.request(options, callback); 
```

称呼。其中的一部分，您的代码看起来不错..有什么问题？

## 更新

哦，我看到你没有从元素中检索 id.. 从文档中：事件回调的第一个参数是触发事件的节点，所以：

```
snack.ready(function () {
    var parameters = {
        node: document.body,
        event: 'change',
        delegate: function (node) {
            return node.getElementsByClassName("qty")
        }
    }

    snack.listener(parameters, postToOtherPage);

    function postToOtherPage(event) {
        var options = {
            method: 'post',
            url: '/InlineEditing',
            data: {
                qty: 5,
                id: this.id
            }
        }
        snack.request(options, function(){
          // do something with response..
        });
    }
}); 
```

应该工作正常..

## 更新

`callback.apply(this, [event])`不，抱歉，像往常一样，进一步阅读我发现他们正在使用的文档......更新了上面的代码。

顺便说一句，我没有看到使用这种微型库而不是 jQuery/Zepto 等成熟库的意义，因为微型库在大小方面的优点不值得 IMO 的缺点。

考虑“更大”的库：

*   拥有更多功能：您决定扩展应用程序功能的那一天怎么样？
*   拥有更大的社区/基于商业的支持：书籍、参考资料、指南……
*   更有可能已经解决了微型库中仍然存在的问题/问题。想想数百个跨浏览器兼容性黑客......

但是，这只是我的意见，仅作为我的个人建议。

# ruby - Sinatra / Ruby：从模型访问集合变量

> ID：12923219
> 
> 赞同：1
> 
> 时间：2012-10-16T20:52:38.227
> 
> 标签：ruby, sinatra

我定义了一些变量：

```
class App < Sinatra::Base

  set :public_folder, relative('public')
  set :views, relative('views') 
```

我试图从我的模型中访问它们

```
options.public_folder 
```

和

```
settings.public_folder 
```

它们似乎都不存在于模型的范围内。我怎样才能访问它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T13:10:32.497

这是工作示例：

```
class App < Sinatra::Base
…
  configure do
    set :public_folder, File.expand_path(File.join(File.dirname(__FILE__), "public"))
    set :root, File.expand_path(File.dirname(__FILE__))
  end
…
end 
```

这是一个如何在视图中访问此设置的示例。就我而言，这是 HAML：

```
%p= settings.public_folder
%p= settings.root 
```

页面显示：

```
/Users/sashaegorov/Development/ruby/rvs/public
/Users/sashaegorov/Development/ruby/rvs 
```

在我的系统中哪些是正确的路径。

**注意：** `File.expand_path()`效果很好，它总是有助于获得文件或文件夹的真实路径。**__ *FILE* __**在这里也很有用。

# c# - 用高效的代码（可能是 linq）替换 3 层嵌套的 for 循环

> ID：12923220
> 
> 赞同：1
> 
> 时间：2012-10-16T20:52:40.317
> 
> 标签：c#, linq

有没有办法将以下 3 级嵌套 for 循环替换为更高效或更简洁的代码？linq 是否能够使其更高效且易于阅读？

请帮忙。谢谢

```
bool myMatch = false;

foreach (MyEntityClass entitySmallerSet in entitiesSmallerSet)
{
    if (entityLargerSet.Key.Equals(entitySmallerSet.Key))
    {
        foreach (var stringResValLarge in entityLargerSet.StringResourceValues)
        {
            foreach (var stringResValSmall in entitySmallerSet.StringResourceValues)
            {
                if (stringResValSmall.Culture.Equals(stringResValLarge.Culture)
                    && stringResValSmall.Value.Equals(stringResValLarge.Value))
                {
                    myMatch = true;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T20:59:44.580

```
bool myMatch = entitiesSmallerSet
    .Where(e => entityLargerSet.Key.Equal(e.Key))
    .SelectMany(e => e.StringResourceValues)
    .Join(entityLargerSet.StringResourceValues, small => new { Culture = small.Culture, Value = small.Value }, large => new { Culture = large.Culture, Value = large.Value }, (s, l) => new object())
    .Any(); 
```

您可以使用以下方式代替 join `Intersect`：

```
bool myMatch = entitiesSmallerSet
    .Where(e => entityLargerSet.Key.Equal(e.Key))
    .SelectMany(e => e.StringResourceValues)
    .Select(e => new { Culture = e.Culture, Value = e.Value })
    .Intersect(entityLargerSet.StringResourceValues.Select(l => new { Culture = l.Culture, Value = l.Value }))
    .Any(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:59:36.753

Resharper 这样做：

```
 bool myMatch = false;
    foreach ( var stringResValLarge in 
    from entitySmallerSet 
    in entitiesSmallerSet.Where(entitySmallerSet => entityLargerSet.Key.Equals( entitySmallerSet.Key )) 
    from stringResValLarge in entityLargerSet 
    from stringResValSmall in entitySmallerSet 
    where stringResValSmall.Equals( stringResValLarge )&& stringResValSmall.Equals( stringResValLarge ) 
    select stringResValLarge )
    {
      myMatch = true;
    } 
```

（必须删除一些点道具才能更清晰地做到这一点。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:02:16.720

你可以使用这个想法（伪代码）：

```
var myMatch = (from se in entitiesSmallerSet
               where e.Key.Equals(entitySmallerSet.Key)
               from seVal in se.StringResourceValues
               from leVal in entityLargerSet.StringResourceValues
               where seVal.Culture.Equals(leVal.Culture)
                  && leVal.Value.Equals(leVal.Value)
               select seVal).Any(); 
```

# mysql - MySQL 触发器 - 使用逻辑插入表插入另一个表

> ID：12923221
> 
> 赞同：1
> 
> 时间：2012-10-16T20:52:42.477
> 
> 标签：mysql, triggers, insert, phpmyadmin

我目前正在 PHPmyadmin 中的 MySQL 中编写我的第一个触发器。我想要这样当一个表中的项目被更新时，另一个表中的一行被插入。要插入到第二个表中的行的几列由第一个表中正在更新的值确定。

因此，当表 A 发生更新时，我需要在表 B 中插入一个新行。表 B 中的某些列的值将由更新的表 A 行中的值定义，这导致触发器运行.

请在下面找到触发器。

```
CREATE TRIGGER `before_categoryiteminstance_update` BEFORE UPDATE ON `TABLEA`
FOR EACH ROW BEGIN
declare f_guidcategoryiteminstance int; 
declare f_guidcategory int; 
INSERT INTO TABLEB
SET
f_guidcategoryiteminstance =(SELECT guidcategoryiteminstance FROM inserted),
f_guidcategory =(SELECT guidcategory FROM inserted),
guiduser= f_guidcategory,
guidcategoryinstance= f_guidcategoryiteminstance,
number= number +1,
dateofaction= NOW(); END 
```

触发器可以很好地添加到数据库中。但是，当我尝试更新表 A 上的一行时（这应该会导致触发器运行），我收到一条错误消息，指出插入的表不存在。但是，我的印象是 Inserted 应该是一个包含触发器初始部分结果的逻辑表。仅当触发器在插入而不是更新上运行时才会出现这种情况？如果是这样，更新触发器是否有等价物？

# javascript - ShareThis 插件在 FancyBox 标题中不起作用

> ID：12923229
> 
> 赞同：2
> 
> 时间：2012-10-16T20:53:25.550
> 
> 标签：javascript, fancybox, sharethis

我对 JavaScript 的所有东西都很陌生，所以请多多包涵 :) 我正在尝试将 ShareThis 插件添加到 FancyBox 的标题中，以便用户可以分享某张图片。它显示得很好，但是当我单击“共享”按钮时没有任何反应。相同的插件在常规页面上工作得很好，所以我猜它是冲突的脚本（FancyBox 脚本中的插件脚本）。不幸的是，我对 JavaScript 的了解不够，无法自己解决它，但我真的需要它来工作......

如果有人知道如何解决它，我将不胜感激！这是我到目前为止的代码：

FancyBox 的脚本（包括[在 Fancybox 标题中显示元素](http://jsfiddle.net/b9Ts8/)）：

```
$(document).ready(function() {
$(".wrap").fancybox({
    closeClick  : false,
    nextEffect: 'fade',
    prevEffect: 'fade',
    beforeLoad: function() {
        var el, id = $(this.element).data('title-id');

        if (id) {
            el = $('#' + id);

            if (el.length) {
                this.title = el.html();
            }
        }
    },
    helpers : {
    title: {
        type: 'inside'
    }}
});

}); 
```

这是我需要在标题中显示的内容：

```
<div id="title1" class="hidden">
<div class='share'>
<span class='st_facebook_hcount' displayText='Facebook'></span> 
<span class='st_twitter_hcount' displayText='Tweet'></span> 
<span class='st_pinterest_hcount' displayText='Pinterest'></span> 
<span class='st_email_hcount' displayText='Email'></span>
</div>
<p>Some description</p>
</div> 
```

我也包括了他们网站上的[ShareThis 脚本](http://w.sharethis.com/button/buttons.js)。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T20:48:01.367

深入研究这个问题，ShareThis 按钮似乎不适用于返回 HTML 的 Ajax 调用，这意味着 ShareThis 按钮是在同步数据中定义的。因为无论 ShareThis 按钮的 html 是否完美呈现，将内容从`<div id="title1">`fancybox中移动/复制`title`都不会起作用。

`title`解决方法是在打开 fancybox 时动态构建按钮，并提示 ShareThis 脚本使用它们的函数`stButtons.locateElements();`read mroe [HERE](http://forums.sharethis.com/topic.php?id=3279)再次放置这些按钮（在 内部） 。当然，我们必须使用fancybox的回调来同步任务。

首先，因为我们要分享的是fancybox中的内容（我假设）而不是整个页面，所以我们需要创建构建ShareThis按钮的函数并传递URL来分享所以

```
function buildShareThis(url){
 var customShareThis  = "<div class='share'>"; // class for styling maybe
     customShareThis += "<span class='st_facebook_hcount' displayText='Facebook' st_url='"+url+"'></span> ";
     customShareThis += "<span class='st_twitter_hcount' displayText='Tweet' st_url='"+url+"'></span>";
     customShareThis += "<span class='st_pinterest_hcount' displayText='Pinterest' st_url='"+url+"' st_img='"+url+"' ></span>";
     customShareThis += "<span class='st_email_hcount' displayText='Email' st_url='"+url+"'></span>";
     customShareThis += "</div>";
     return customShareThis;
} 
```

... 上面的函数基本上构建了与您想要在`title`. **请注意**，我添加了一些 ShareThis 属性（[在 pinterest 的情况下为 st_url 和 st_img](http://forums.sharethis.com/topic.php?id=78490) ...查看有关共享属性和信息的[ShareThis 文档）](http://support.sharethis.com/customer/portal/articles/475079-share-properties-and-sharing-custom-information)

然后html可以是这样的

```
<a href="images/01.jpg" class="fancybox" data-fancybox-group="gallery" data-caption="some description 01"><img src="images/01t.jpg" alt="thumb 01" /></a>
<a href="images/07.jpg" class="fancybox" data-fancybox-group="gallery" data-caption="description two" ><img src="images/07t.jpg" alt="thumb 02" /></a>
<a href="images/08.jpg" class="fancybox" data-fancybox-group="gallery" data-caption="third description 03" ><img src="images/08t.jpg" alt="thumb 03" /></a> 
```

**注意**为每个锚点设置的`data-*`属性，以便我们可以将附加信息传递给 fancybox。

然后，fancybox 回调：

1）`beforeShow`用于构建`title`调用`buildShareThis(url)`并从`data-caption`属性添加标题（如果有）：

```
 beforeShow: function() {
     var caption =  $(this.element).data("caption") ? $(this.element).data("caption") : "";
     this.title = this.title ? this.title + buildShareThis(this.href) + caption : buildShareThis(this.href) + caption;
  } 
```

`stButtons.locateElements()`2)使用以下方法调用 ShareThis' `afterShow`：

```
 afterShow: function(){
     stButtons.locateElements();
  } 
```

.... 这应该够了吧。

**注意**：您仍然需要在文档中绑定 ShareThis 脚本，例如

```
<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "ur-7957af2-87a7-2408-5269-db75628d3a14"});</script> 
```

（使用您自己的`publisher`身份证）

这是使用迄今为止最新的fancybox版本（v2.1.2）进行测试的，请参阅[此处的工作演示](http://www.picssel.com/playground/jquery/shareThisInTitle_17oct12.html)。随意检查源代码并修改它以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:45:01.520

我猜它不适合这个原因。

当文档准备好使用 $(document).ready （这很好）时，您正在加载精美的框代码。初始化 sharethis 元素的代码可能已经运行（在加载它时从代码示例中不清楚）。因此，当您使用 $(document).ready 创建一组新的 sharethis 元素时，它们不会被 sharethis 代码处理。

试试这个：

```
$(document).ready(function() {
    $(".wrap").fancybox({
        ## no change to your code above ##
    });
    // put your publisher code in below
    stLight.options({publisher:'12345'});
}); 
```

# hibernate - 如何使用 Hibernate 的 ClassLoaderService 注册自定义类加载器？

> ID：12923232
> 
> 赞同：6
> 
> 时间：2012-10-16T20:53:31.627
> 
> 标签：hibernate, groovy, classloader

## 背景

我有一组 Groovy 文件，我使用 Groovy 的类加载器将其解析为类：

```
 GroovyClassLoader gcl = new GroovyClassLoader();
    while (groovyIter.hasNext()) {
      File groovyFile = (File) groovyIter.next();
      try {
        Class clazz = gcl.parseClass(groovyFile);
      } catch (IOException ioe) {
        log.error("Unable to read file " + groovyFile + " to parse class ", ioe);
      }
    } 
```

GroovyClassLoader 完成后，我使用 XStream 解析 XML 文件，将 XML 反序列化为 Groovy 对象的不同实例。我现在从一种类型开始：发票。为了让 XStream 可以看到 groovy 类，我将类加载器设置为 GroovyClassLoader 的实例。

```
 XStream xstream = new XStream();
  xstream.setClassLoader(gcl); 

  // Read the file and get objects
  Object deserialized = xstream.fromXML(file); 
```

一旦我有了反序列化的对象，我想使用 Hibernate 将它存储在数据库中。在我的 hibernate.config.xml 我有一个映射条目

<mapping class="发票"/>

映射到我带注释的 groovy 类

```
import javax.persistence.Entity
import javax.persistence.GeneratedValue
import javax.persistence.Id
import javax.persistence.GenerationType
import groovy.transform.ToString
import groovy.transform.EqualsAndHashCode
import javax.persistence.Table
import javax.persistence.Column

@ToString
@EqualsAndHashCode
@Entity
@Table(name="invoice")
class invoice {
  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  Long id

  String invoicedate
  String invoicenumber

  String ponumber
  String salesrep
  String servicedate
  String terms
  String duedate

  String notes
  String subtotal
  String discountpercent
  String discountamount
  String total
  String paid
  String totaldue

} 
```

## 问题：

当我尝试打开会话时，找不到课程。

```
 Configuration hibernateConfig = new Configuration();

    Properties hibernateConfigProps = hibernateConfig.getProperties();
    hibernateConfigProps.put("hibernate.classLoader.application", gcl);
    hibernateConfig.setProperties(hibernateConfigProps);

    SessionFactory sf = hibernateConfig.configure(new File("hibernate.config.xml")).buildSessionFactory();        
    Session sess = sf.openSession(); 
```

原因：org.hibernate.MappingException：无法加载在 Hibernate 配置条目中声明的类 [invoice]。

我尝试将 hibernate.classLoader.application 属性设置为 GroovyClassLoader 实例，然后在配置中设置该属性，但没有运气。

我的搜索结果表明我可能需要使用 org.hibernate.service.classloading.spi.ClassLoaderService 但我不确定如何使用 Hibernate 执行此操作。

请参阅下面的堆栈跟踪：

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.simontuffs.onejar.Boot.run(Boot.java:342)
    at com.simontuffs.onejar.Boot.main(Boot.java:168)
Caused by: org.hibernate.MappingException: Unable to load class [ invoice] declared in Hibernate configuration <mapping/> entry
    at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:2139)
    at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:2087)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2067)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2020)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1993)
    at com.referencelogic.xmlormupload.main.XmlormuploadMain.run(XmlormuploadMain.java:101)
    at     com.referencelogic.xmlormupload.main.XmlormuploadMain.main(XmlormuploadMain.java:54)
    ... 6 more
Caused by: java.lang.ClassNotFoundException: invoice
    at com.simontuffs.onejar.JarClassLoader.findClass(JarClassLoader.java:713)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at com.simontuffs.onejar.JarClassLoader.loadClass(JarClassLoader.java:630)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at org.hibernate.internal.util.ReflectHelper.classForName(ReflectHelper.java:192)
    at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:2136)
    ... 12 more 
```

尝试按照建议设置线程的上下文类加载器，但 Hibernate 忽略了它。

```
 ClassLoader oldcl = Thread.currentThread().getContextClassLoader();        
    System.out.println("Old classloader is " + oldcl);
    Thread.currentThread().setContextClassLoader(gcl);
    ClassLoader newcl = Thread.currentThread().getContextClassLoader();
    System.out.println("New classloader is " + newcl);

    Configuration hibernateConfig = new Configuration();

    System.out.println("Hibernate config class loader is: " + hibernateConfig.getClass().getClassLoader()); 
```

结果是

```
Old classloader is com.simontuffs.onejar.JarClassLoader@5c58d6b0
New classloader is groovy.lang.GroovyClassLoader@3ed4b480
Hibernate config class loader is: com.simontuffs.onejar.JarClassLoader@5c58d6b0 
```

其次是前面提到的堆栈跟踪。

有什么建议么？

# javascript - 如何将文本框中的值添加到 javascript 或 jquery 中的表中？

> ID：12923233
> 
> 赞同：-1
> 
> 时间：2012-10-16T20:53:36.780
> 
> 标签：javascript, jquery

我有两个`text_fields`和一个`table`三列。通过单击按钮，我希望将这两个`text_field`值添加到前两列中的表中。因此，用户可以`text_field`一次又一次地更改值，并通过单击 add 将值添加到下一行`button`。

两者`text_fields`如下：

```
<input class="cross-reference-question-value" type="text" style="border: 1px solid gray;  ">
<input class="cross-reference-answer-value" type="text" style="border: 1px solid gray;  "> 
```

这里是`table`

```
<table class="gridView" id="selected_units">
  <thead>
    <tr class="gridViewHeader">
      <th>Question</th>
      <th>Answer</th>
      <th>Action</th>
    </tr>
  </thead>

  <tbody> 
    <tr class="<%= cycle('gridViewclickableRowDialog', 'gridViewAltclickableRowDialog') %>">
      <td></td>
      <td></td>
      <td><a href="#">Delete</a></td>
    </tr>
  </tbody>
</table> 
```

`button_link`是_

```
<a href="#" , class="button" >hello</a> 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:58:06.880

尝试从这个开始：

```
​$('.button').click(function() {
    var question = $('.cross-reference-question-value').val();
    var answer = $('.cross-reference-answer-value').val();
    var newrow = '<tr><td>' + question + '</td><td>' + answer + '</td></tr>';
    $('#selected_units tr:last').after(newrow);
});​​​​​ 
```

检查[演示](http://jsfiddle.net/JM9qX/)。添加对空输入、重复行等的检查。

# c++ - 组织源代码 (C++)

> ID：12923235
> 
> 赞同：1
> 
> 时间：2012-10-16T20:53:50.160
> 
> 标签：c++, code-organization, project-organization

对于一个科学项目，我有一个模板化分析工具（模块 A），它使用一种统计测试（模块 B）。分析工具（模块 A）用于解决两种类型的问题（模块 C 和 D）。模块 C 和 D 定义了用于从不同文件类型进行序列化的函数。

所有模块（A、B、C 和 D）都使用通用实用程序（模块 E）。每个模块由几个文件组成。我真的很想组织模块，使每个模块都有自己的名称空间，因此源文件位于不同的目录中（即强调组织中的模块化）。

在每个文件中定义命名空间很简单。但我希望使用某种源代码树，其中每个模块的#include 文件将在其自己的命名空间中包含所有其他文件。

我不太确定组织这个的好方法。我应该每个模块只使用一个文件夹并使用相对路径#include 吗？每个模块是否应该有自己的 git 存储库，并编译成单个库文件，该文件位于指定的 UNIX 文件夹中（这需要真正安装才能运行项目）。

现在我正在使用 gcc-4.7、make 和 emacs。

您知道组织这些文件以实现模块化的方法吗？

请原谅我并建议是否有其他更适合此问题的 StackOverflow 附属机构。我的项目运行了，但它比它需要的要混乱得多！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:53:27.710

> 但我希望使用某种源代码树，其中每个模块的#include 文件将在其自己的命名空间中包含所有其他文件。

这是错误的做法。即使 A 在模块级别依赖于 E，也不一定意味着 A 中的所有组件都依赖于 E 中的所有组件，并且您不应该通过包含来强制它。

包含应该是明确的（包括你真正需要的一切）和精确的（不要包括你不依赖的任何东西）。

话虽如此，我会将代码组织在模块中，其中每个模块都有一个单独的目录。如果一个模块变得足够复杂以至于需要拆分为子模块，那么您可以添加嵌套目录，但单个两级层次结构就足够了。

# android - Android 推送通知 - 如何提取设备 ID？

> ID：12923237
> 
> 赞同：1
> 
> 时间：2012-10-16T20:53:49.693
> 
> 标签：android

从谷歌云推送教程中，我在用户首次启动应用程序时运行此代码：

```
 GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);
    final String regId = GCMRegistrar.getRegistrationId(this);
    if (regId.equals("")) 
    {
        GCMRegistrar.register(this, "566530471892");
    } 
    else 
    {
        //Log.v(TAG, "Already registered");
    } 
```

但我不明白的是如何将该 regId 变量发送到服务器，以便我可以将它与新的用户 ID 一起保存。

还是我误解了这应该如何工作？这不是在这里做的正确事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:56:36.893

> 但我不明白的是如何将该 regId 变量发送到服务器，以便我可以将它与新的用户 ID 一起保存。

您可以通过与服务器通信的任何方式来执行此操作，例如 Web 服务调用。

# iphone - 启用 iCloud 时 iOS 应用程序在首次启动时冻结

> ID：12923238
> 
> 赞同：3
> 
> 时间：2012-10-16T20:53:57.437
> 
> 标签：iphone, objective-c, ios, core-data, icloud

我在我的 iOS 应用程序中启用了 iCloud，并且在第一次启动应用程序时，当我按下应用程序中的任何视图时，应用程序会冻结大约 5 秒钟。我按照[本](http://timroadley.com/2012/04/03/core-data-in-icloud/)教程在我的应用程序中启用 iCloud 并使用核心数据同步数据。在添加 iCloud 同步之前我没有这个问题。这只发生在首次启动时，不会在应用程序的其他启动时发生。确实会发生 iCloud 同步。问题是应用程序冻结。

这是在我的应用委托中管理同步的代码。

```
- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    /*if (persistentStoreCoordinator == nil) {
        NSURL *storeURL = [NSURL fileURLWithPath:[self dataStorePath]];

        persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:self.managedObjectModel];

        NSError *error;
        if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
            NSLog(@"Error adding persistent store %@, %@", error, [error userInfo]);
            abort();
        }
    }
    return persistentStoreCoordinator;*/

    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

    if ((persistentStoreCoordinator != nil)) {
        return persistentStoreCoordinator;
    }

    persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    NSPersistentStoreCoordinator *psc = persistentStoreCoordinator;

    // Set up iCloud in another thread:

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // ** Note: if you adapt this code for your own use, you MUST change this variable:
        NSString *iCloudEnabledAppID = @"48S27G4A2S.com.maxned.iDownloadBlog";

        // ** Note: if you adapt this code for your own use, you should change this variable:
        NSString *dataFileName = @"DataStore.sqlite";

        // ** Note: For basic usage you shouldn't need to change anything else

        NSString *iCloudDataDirectoryName = @"Data.nosync";
        NSString *iCloudLogsDirectoryName = @"Logs";
        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSURL *localStore = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:dataFileName];
        NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier:nil];

        if (iCloud)
        {
            //NSLog(@"iCloud is working");

            NSURL *iCloudLogsPath = [NSURL fileURLWithPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]];

            /*NSLog(@"iCloudEnabledAppID = %@",iCloudEnabledAppID);
            NSLog(@"dataFileName = %@", dataFileName);
            NSLog(@"iCloudDataDirectoryName = %@", iCloudDataDirectoryName);
            NSLog(@"iCloudLogsDirectoryName = %@", iCloudLogsDirectoryName);
            NSLog(@"iCloud = %@", iCloud);
            NSLog(@"iCloudLogsPath = %@", iCloudLogsPath);*/

            if ([fileManager fileExistsAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]] == NO) {
                NSError *fileSystemError;
                [fileManager createDirectoryAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]
                       withIntermediateDirectories:YES
                                        attributes:nil
                                             error:&fileSystemError];

                if (fileSystemError != nil) {
                    NSLog(@"Error creating database directory %@", fileSystemError);
                }
            }

            NSString *iCloudData = [[[iCloud path]
                                     stringByAppendingPathComponent:iCloudDataDirectoryName]
                                    stringByAppendingPathComponent:dataFileName];

            //NSLog(@"iCloudData = %@", iCloudData);

            NSMutableDictionary *options = [NSMutableDictionary dictionary];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];
            [options setObject:iCloudEnabledAppID forKey:NSPersistentStoreUbiquitousContentNameKey];
            [options setObject:iCloudLogsPath forKey:NSPersistentStoreUbiquitousContentURLKey];

            [psc lock];

            [psc addPersistentStoreWithType:NSSQLiteStoreType
                configuration:nil
                URL:[NSURL fileURLWithPath:iCloudData]
                options:options
                error:nil];

            [psc unlock];

        } else {

            NSLog(@"iCloud is NOT working - using a local store");
            NSMutableDictionary *options = [NSMutableDictionary dictionary];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

            [psc lock];

            [psc addPersistentStoreWithType:NSSQLiteStoreType
                configuration:nil
                URL:localStore
                options:options
                error:nil];

            [psc unlock];

        }

        dispatch_async(dispatch_get_main_queue(), ^{
            [[NSNotificationCenter defaultCenter] postNotificationName:@"SomethingChanged" object:self userInfo:nil];
        });
    });

    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    return persistentStoreCoordinator;
}

/*- (NSManagedObjectContext *)managedObjectContext
{
    if (managedObjectContext == nil) {
        NSPersistentStoreCoordinator *coordinator = self.persistentStoreCoordinator;
        if (coordinator != nil) {
            managedObjectContext = [[NSManagedObjectContext alloc] init];
            [managedObjectContext setPersistentStoreCoordinator:coordinator];
        }
    }
    return managedObjectContext;
}*/

- (NSManagedObjectContext *)managedObjectContext
{
    if (managedObjectContext != nil) {
        return managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];

    if (coordinator != nil) {
        NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];

        [moc performBlockAndWait:^{
            [moc setPersistentStoreCoordinator: coordinator];
            [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(mergeChangesFrom_iCloud:) name:NSPersistentStoreDidImportUbiquitousContentChangesNotification object:coordinator];
        }];
        managedObjectContext = moc;
    }

    return managedObjectContext;
}

- (void)mergeChangesFrom_iCloud:(NSNotification *)notification
{
    //NSLog(@"Merging in changes from iCloud...");

    NSManagedObjectContext* moc = [self managedObjectContext];

    [moc performBlock:^{

        [moc mergeChangesFromContextDidSaveNotification:notification];

        NSNotification* refreshNotification = [NSNotification notificationWithName:@"SomethingChanged"
            object:self
            userInfo:[notification userInfo]];

        [[NSNotificationCenter defaultCenter] postNotification:refreshNotification];
    }];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:04:15.927

为了解决这个问题，我更改了代码以将其放在另一个线程中。

```
dispatch_queue_t mainQueue = dispatch_get_main_queue();
        dispatch_async(mainQueue, ^{

            NSFileManager *fileManager = [NSFileManager defaultManager];
            NSURL *localStore = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:dataFileName];
            NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier:nil];

            if (iCloud)
            {
                //NSLog(@"iCloud is working");

                NSURL *iCloudLogsPath = [NSURL fileURLWithPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]];

                /*NSLog(@"iCloudEnabledAppID = %@",iCloudEnabledAppID);
                 NSLog(@"dataFileName = %@", dataFileName);
                 NSLog(@"iCloudDataDirectoryName = %@", iCloudDataDirectoryName);
                 NSLog(@"iCloudLogsDirectoryName = %@", iCloudLogsDirectoryName);
                 NSLog(@"iCloud = %@", iCloud);
                 NSLog(@"iCloudLogsPath = %@", iCloudLogsPath);*/

                if ([fileManager fileExistsAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]] == NO) {
                    NSError *fileSystemError;
                    [fileManager createDirectoryAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]
                           withIntermediateDirectories:YES
                                            attributes:nil
                                                 error:&fileSystemError];

                    if (fileSystemError != nil) {
                        NSLog(@"Error creating database directory %@", fileSystemError);
                    }
                }

                NSString *iCloudData = [[[iCloud path]
                                         stringByAppendingPathComponent:iCloudDataDirectoryName]
                                        stringByAppendingPathComponent:dataFileName];

                //NSLog(@"iCloudData = %@", iCloudData);

                NSMutableDictionary *options = [NSMutableDictionary dictionary];
                [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
                [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];
                [options setObject:iCloudEnabledAppID forKey:NSPersistentStoreUbiquitousContentNameKey];
                [options setObject:iCloudLogsPath forKey:NSPersistentStoreUbiquitousContentURLKey];

                [psc lock];

                [psc addPersistentStoreWithType:NSSQLiteStoreType
                                  configuration:nil
                                            URL:[NSURL fileURLWithPath:iCloudData]
                                        options:options
                                          error:nil];

                [psc unlock];

            } else {

                NSLog(@"iCloud is NOT working - using a local store");
                NSMutableDictionary *options = [NSMutableDictionary dictionary];
                [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
                [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

                [psc lock];

                [psc addPersistentStoreWithType:NSSQLiteStoreType
                                  configuration:nil
                                            URL:localStore
                                        options:options
                                          error:nil];

                [psc unlock];
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T15:42:36.627

自己做一些搜索，看起来这实际上是预期的行为。正如其他人所说[，应用程序在更改隐私设置时被 SIGKILL 杀死](https://stackoverflow.com/questions/12652502/app-killed-by-sigkill-when-changing-privacy-settings)：[https ://devforums.apple.com/message/715855](https://devforums.apple.com/message/715855)

它的文档记录很差，但按设计工作。“在任何权限更改中，iOS 都会终止您的应用程序，这样您就不会在假设之前的任何权限的情况下进行操作。例如，假设用户授予您联系人权限。然后他们将您的应用程序置于后台并进行更改那个。你会在你有权限的想法下操作，而现在你没有权限。所以 iOS 只是终止了应用程序。

“但它不会崩溃，它只是强制重启。你会收到一条 SIGKILL 消息，但没有崩溃日志。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:01:33.350

如果此代码在主线程上运行，那可能是您的问题。

第一次（或任何一次）启动时从哪里调用此代码？

# jquery - 真正简单的ajax + codeigniter

> ID：12923240
> 
> 赞同：0
> 
> 时间：2012-10-16T20:54:02.107
> 
> 标签：jquery, ajax, codeigniter

我正在尝试学习 ajax 的基础知识，但我无法真正让它发挥作用。这就是我正在尝试的。

文件：create_comment.php（查看）

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>

<script>
   $(function(){
       $("#comment").submit(function(){

         var name = $("#name").val();

         $.ajax({
           type: "POST",
           url: "<?php echo base_url(); ?>index.php/comment/create",
           data: "name="+name,
           dataType: 'json',

           success: function(result){    
                $('#write').html(result.returnValue);
           },
           error: function(xhr, status, error) { 
                alert('Error: '+ xhr.status+ ' - '+ error); },

         });

         return false;  

      });
   });
</script>

<title>Untitled Document</title>
</head>

<body>
<h3>New Comment</h3>
<form id="comment" method="post">
<label>Name: </label><input type="text" id="name" name="name" /><br
<label>&nbsp;</label><input type="submit" value="Submit" />
</form>

<div id="write" ></div>
<!-- here is the script that will do the ajax. It is triggered when the form is submitted --></body></html> 
```

文件：comment.php（控制器）

```
<?php

class Comment extends CI_Controller{

function  __construct() {

    parent::__construct();
    $this->load->helper('url');
}

function index(){

    $this->load->view('create_comment');

}

function create(){

    if($_POST) {
           echo json_encode(array("returnValue"=>"This is returned from PHP")); 
    }
}

}
?> 
```

当我提交 for 时，我总是得到：错误：0 - OK 这意味着我什至没有获得“成功”功能。如果我不使用回显，而是使用“返回”，那么我将进入成功函数（但显然我无法输出结果）。

我知道这一定是有史以来最简单的问题，但我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:06:41.047

伙计们，我找到了解决方案。

我已经设置 $config['compress_output'] = TRUE;

如果我将其设置为 FALSE 一切正常！！

谢谢大家的时间！！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-07-21T14:39:16.557

![在此处输入图像描述](../Images/399f784ebac71227e0c59f6566896ae5.png)

要修复压缩问题，您必须在 php.ini 中启用它而不禁用 codeigniter 的压缩。

# salesforce - 可用于用户个人报告的指标

> ID：12923241
> 
> 赞同：0
> 
> 时间：2012-10-16T20:54:17.727
> 
> 标签：salesforce, apex-code

我们正在尝试对我们组织的个人报告进行一些基本分析，例如从一个配置文件与所有其他配置文件的报告分布，甚至是组织范围的计数。真的什么都……

无论如何，在个人报告方面是否有一些分析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:03:41.460

Got the answer from SF:

even by using the MetaData API- you can't do squat. The only thing you can do is log in as the user, and get the number of reports by counting the number they have in their personal folders. Thats provided you have access to login as that user

Ew Salesforce. Just ew.

# php - 添加 PHP 问题

> ID：12923242
> 
> 赞同：-2
> 
> 时间：2012-10-16T20:54:17.977
> 
> 标签：php

下面我有很多使用 PHP 创建的添加和值。

一切正常！它可以在这里看到：http: [//universitycompare.com](http://universitycompare.com)

除了 - 第一组 PHP 中包含“$totalcost”。我似乎无法弄清楚为什么我在下面创建的值不能用于创建总数。

有什么意见吗？

```
<?php
$totalcost = $totalcost2 + $totalcost3; 
$totalcost2 = $li444 + $tuitionTotal;
$totalcost3 = $li4 + $li44;
?>

<!-- WORKING OUT TOTAL TCE -->

<p>
<b class="TCE">
<?php echo $totalcost; ?>
<?php echo array_sum($a); ?>
</b> 
</p>

<!-- END OF WORKING OUT TOTAL TCE -->

<br /><br />
<h2>
Below is a a breakdown of the total cost of Education:
</h2>

<?php
$li2 = get_field('average_drinks_spenditure_per_night');
$li3 = ($li2 * 28) * 2.1;
$li4 = $li3 * 3;
?>

<div class="TCE">
<br />
<h2>Average spent on socialising</h2>
<ul class="TCE">
<li><span>Average drink cost</span>&nbsp;&nbsp;£<?php echo the_field('average_drink_price'); ?></li>
<li><span>Average drinks spenditure per night</span>&nbsp;&nbsp;£<?php echo $li2; ?></li>
<li><span>Average drinks spenditure for the year</span>&nbsp;&nbsp;£<?php echo $li3;?><!-- JAVA BIT --></li>
<li><span>Average drinks spenditure for 3 years</span>&nbsp;&nbsp;£<?php echo $li4;?><!-- JAVA BIT --></li>
</ul>

<?php
$li22 = (get_field('average_housing_costs_per_week') * 4 );
$li33 = $li22 * 12;
$li44 = $li33 * 3;
?>

<h2>Average spent on living costs</h2>
<ul class="TCE">
<li><span>Housing per week</span>&nbsp;&nbsp;£<?php echo the_field('average_housing_costs_per_week'); ?></li>
<li><span>Housing per month</span>&nbsp;&nbsp;£<?php echo $li22; ?></li>
<li><span>Housing per year</span>&nbsp;&nbsp;£<?php echo $li33; ?></li>
<li><span>Housing for 3 years</span>&nbsp;&nbsp;£<?php echo $li44; ?></li>
</ul>

<div class="clear"></div>   
<p><br /></p>

<?php
$li222 = (get_field('average_shopping_trip_price') * 2.25 );
$li333 = $li222 * 12;
$li444 = $li333 * 3;
?>

<h2>Average spent on food shopping</h2>
<ul class="TCE">
<li><span>Average shopping trip </span>&nbsp;&nbsp;£<?php echo the_field('average_shopping_trip_price'); ?></li>
<li><span>Average shopping for the month</span>&nbsp;&nbsp;£<?php echo $li222; ?></li>
<li><span>Average shopping for the year</span>&nbsp;&nbsp;£<?php echo $li333; ?></li>
<li><span>Average shopping for 3 years</span>&nbsp;&nbsp;£<?php echo $li444; ?></li>
</ul>

<?php
$tuitionClass = (get_field('tuition_fees') /28 );
$tuitionTotal = (get_field('tuition_fees') * 3 );
?>

<h2>Average spent on tuition</h2>
<ul class="TCE">
<li><span>Price per Week</span>&nbsp;&nbsp;£<?php echo $tuitionClass; ?></li>
<li><span>Average tuition fee</span>&nbsp;&nbsp;£<?php echo the_field('tuition_fees'); ?></li>
<li><span>Average tuition fee for 3 years</span>&nbsp;&nbsp;£<?php echo $tuitionTotal; ?></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:15:47.950

终于解决了，因为我之前似乎不知道定义总数是不可能的，我认为它会传递回来的一些奇怪的原因，吸取了教训！

```
<?php
// AVERAGE DRINK COSTS 
$li2 = get_field('average_drinks_spenditure_per_night');
$li3 = ($li2 * 28) * 2.1;
$li4 = $li3 * 3;

// HOUSING COSTS 
$li22 = (get_field('average_housing_costs_per_week') * 4 );
$li33 = $li22 * 12;
$li44 = $li33 * 3;

// SHOPPING COSTS 
$li222 = (get_field('average_shopping_trip_price') * 2.25 );
$li333 = $li222 * 12;
$li444 = $li333 * 3;

// TUITION FEES 
$tuitionClass = (get_field('tuition_fees') /28 );
$tuitionTotal = (get_field('tuition_fees') * 3 );

// PHP TCE 
$totalcost2 = $li444 + $tuitionTotal;
$totalcost3 = $li4 + $li44;
$totalcost = $totalcost2 + $totalcost3; 
?> 
```

这就是我最后使用的，只是把它放在需要回显的任何值之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:01:26.810

PHP 脚本**从上到下**执行。在定义变量值之前，您不能只计算变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:04:45.323

据我了解，PHP 解释器在程序上逐行处理 PHP 文件，并在解释器解析变量时将其分配到内存中。由于您尚未定义`$totalcost2`并且`$totalcost3`当您尝试将它们相加时，PHP 解释器没有引用任何值并且无法将它们相加。

如果您将此初始代码块放在页面底部，我想它会按您的预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T21:01:57.697

我不确定我是否理解你的问题。您似乎试图在计算 $totalcost2 （可怕的名字顺便说一句！）和 $totalcost3*之前*打印 $totalcost 值......这些仅设置在脚本的底部，因此仅在那时可用。如果您希望将这些值打印在页面顶部，那么您需要将所有 html 缓冲到一个字符串中（而不是将其转储到客户端），一旦您获得了您的值，将它们转储出来，然后是您捕获的页面其余部分的 html 字符串。那有意义吗？是否解决了您的问题？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T21:02:09.490

在定义整体之后，您正在定义组件。

它应该是这样的：

```
$totalcost2 = $li444 + $tuitionTotal;
$totalcost3 = $li4 + $li44;
$totalcost = $totalcost2 + $totalcost3; 
//This line should only come after $totalcost2 and 3 were defined! 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T21:02:13.497

在它们有价值之前添加它们。

```
<?php
$totalcost2 = $li444 + $tuitionTotal;
$totalcost3 = $li4 + $li44;
$totalcost = $totalcost2 + $totalcost3; 
?> 
```

# java - 与 Java 中的多处理相比，多线程性能较差

> ID：12923245
> 
> 赞同：1
> 
> 时间：2012-10-16T20:54:22.953
> 
> 标签：java, multithreading, multiprocessing

假设我们有几百万行必须解析的长文本。
在我的 i7 2600 CPU 上，每 1000 行解析大约需要 13 毫秒。
因此，解析 1,000,000 行大约需要 13 秒。
为了减少执行时间，我已经使用多个线程进行了管理。
使用阻塞队列，我将 1,000,000 行推送为一组 1000 个块，每个块包含 1000 行，并使用 8 个线程使用这些块。代码很简单，似乎可以正常工作，但是性能并不令人鼓舞，大约需要 11 秒。
这是多线程代码的主要部分：

```
 for(int i=0;i<threadCount;i++)
    {
        Runnable r=new Runnable() {
            public void run() {
                try{
                    while (true){
                        InputType chunk=inputQ.poll(10, TimeUnit.MILLISECONDS);
                        if(chunk==null){
                            if(inputRemains.get())
                                continue;
                            else
                                return;
                        }
                        processItem(chunk);
                    }
                }catch (Exception e) {
                    e.printStackTrace();  
                }
            }
        };
        Thread t=new Thread(r);
        threadList.add(t);
        for(Thread t: threads)
            t.join(); 
```

我也使用过 ExecutorService 但性能更差！
更改块大小也无济于事，性能也没有提高。
这意味着阻塞队列不是瓶颈。
另一方面，当我同时运行 4 个串行程序实例时，所有 4 个实例只需要 15 秒即可完成。这意味着我可以在 15 秒内使用 4 个进程处理 4,000,0000 行，因此，与多线程的 1.2 加速相比，速度提升在 3.4 左右，这是非常有希望的。

我想知道有人对此有任何想法吗？
问题很简单：阻塞队列中的一组行和几个线程从队列中轮询项目并并行处理它们。队列最初已填满，因此线程完全忙碌。
我以前也有类似的经历，但我不明白为什么多处理更好。
我还应该提到我在 Windows 7 上运行测试并使用 1.7 JRE。
欢迎任何想法，并在手前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:59:27.127

**编辑：**

所以我最初认为你的时间安排是围绕你的整个程序。如果您*只是*在将行读入内存*后*对它们的处理进行计时，那么可能是您的`processItem(chunk);`方法正在执行自己的 IO，或者正在将信息写入`synchronized`对象或其他阻止它的共享变量能够同时满载运行。

* * *

> 我想知道有人对此有任何想法吗？

您的问题可能是您受[IO 限制](http://en.wikipedia.org/wiki/IO_bound)而*不是*CPU 板。通过添加更多线程来显着提高速度的唯一方法是，如果您执行的 CPU 处理量比读取（或写入）磁盘的量多。一旦将磁盘子系统的 IO 功能发挥到极致，就无法提高处理速度。正如您所展示的，添加更多线程实际上会减慢 IO 绑定程序。

我会添加一个额外的线程（即 2 个处理线程），看看是否有帮助。如果您得到的只是 2 秒的速度提升，那么您将不得不将文件划分到多个驱动器上，或者如果这是一项重复任务，则必须将其移动到内存驱动器才能更快地读取它。

> 我也使用过 ExecutorService 但性能更差！

这可能是因为您使用了太多线程，或者每次迭代/块处理的行太少。

> 另一方面，当我同时运行 4 个串行程序实例时，所有 4 个实例只需要 15 秒即可完成

我怀疑这是因为他们每个人都可以从操作系统中使用彼此的磁盘缓存。当第一个应用程序读取块 #1 时，其他 3 个应用程序不必这样做。尝试复制文件 4 次并尝试在各自的文件上同时运行 4 个串行应用程序。你应该看到区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:35:02.380

2600 为 8 个线程使用 HT（超线程）.. 解析主要是内存工作，因此从 HT 中获益很少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:58:02.033

我会责怪你的代码并行化。如果项目可用于处理，则多个线程将竞争相同的资源（队列）。同步锁的争用是一个性能杀手。如果项目的处理速度比它们添加到队列中的速度快，那么被饿死的线程几乎只是繁忙的循环，例如。`while (true) {}`. 这是因为您的轮询时间很短，当轮询失败时，您只需立即重试。

关于同步的一点说明。首先，JVM 使用繁忙循环来等待资源可用，因为（通常）编写代码以尽快释放同步锁，而替代方案（进行上下文切换）非常昂贵。最终，如果 JVM 发现它大部分时间都在等待同步锁，那么如果它无法获取锁，它将默认切换到不同的线程。

更好的解决方案是让一个线程读取数据并在同时有可用的线程插槽和新线程的数据时分派一个新线程。在这里 Executor 会很有用，因为它可以跟踪哪些线程已经完成，哪些仍然很忙。但是伪代码看起来像：

```
int charsRead;
char[] buffer = new char[BUF_SIZE];
int startIndex = 0;

while((charsRead = inputStreamReader.read(buffer, startIndex, buffer.length)
                != -1) {
    // find last new line so don't give a thread any partial lines
    int lastNewLine = findFirstNewLineBeforeIndex(buffer, charsRead);

    waitForAvailableThread(); // if not max threads running then should return 
    // immediately
    Thread t = new Thread(createRunnable(buffer, lastNewLine));
    t.start();
    addRunningThread(t);

    // copy any overshoot to the start of a new buffer
    // use a new buffer as the another thread is now reading from the previous 
    // buffer
    char[] newBuffer = new char[BUF_SIZE];
    System.arraycopy(buffer, lastNewLine+1, newBuffer, 0, 
        charsRead-lastNewLine-1);
    buffer = newBuffer;
}
waitForRemainingThreadsToTerminate(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T22:00:55.413

> 每 1000 行解析大约需要 13 毫秒。因此，解析 1,000,000 行大约需要 13 秒。

JVM 在完成 10,000 次之后才会预热，之后它可以快 10-100 倍，因此它可能是 13 秒，也可能是 130 毫秒或更短。

> 使用阻塞队列，我将 1,000,000 行推送为一组 1000 个块，每个块包含 1000 行，并使用 8 个线程使用这些块。代码很简单，似乎可以正常工作，但是性能并不令人鼓舞，大约需要 11 秒。

我建议你重新测试一个线程，你很可能会发现不到 11 秒。

瓶颈是将字符串解析为一行并创建字符串对象所花费的时间，其余的只是开销，没有解决真正的瓶颈。

* * *

如果您读取不同的文件，每个 cpu 一个，您可以接近线性加速。阅读行的问题是您必须一个接一个地阅读，而您从并发中获得的好处很少。

# regex - 重写 lighthttpd QSA

> ID：12923249
> 
> 赞同：0
> 
> 时间：2012-10-16T20:54:40.237
> 
> 标签：regex, apache, rewrite, lighttpd

帮助重写标志 apache - lighttpd 的 QSA。现在可用：

```
RewriteRule ^([^?]*) index.php?_route_=$1 [L, QSA] 
```

尝试此案例，但无法正常运行：

```
url.rewrite-if-not-file = ("^/(?:\?(.*))?" => "/index.php?_route_=$1") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:24:29.703

根据我对 lighttpd 的了解：

```
url.rewrite-if-not-file = ("^/([^\?]*)$" => "/index.php?_route_=$1") 
```

.. 应该管用。如果没有，那么以下将：

```
url.rewrite-if-not-file = ("^([^\?]*)$" => "/index.php?_route_=$1") 
```

# .net - 如何将字符串连接到 MVC4 中模型返回的数据

> ID：12923251
> 
> 赞同：2
> 
> 时间：2012-10-16T20:54:51.003
> 
> 标签：.net, asp.net-mvc, string, asp.net-mvc-4, razor

我对 .NET 非常陌生，并且正在使用 MVC 4。我有一个 double 类型的变量“AvgAnnualGrowth”。此变量可以具有正值或负值。当它为负时，我应该在数据前显示“-”，当它为正时，我应该在数据前显示“+”。负数数据没有问题，因为双变量默认显示“-”。对于正值，它不会显式显示“+”。关于如何在数据前连接“+”的任何想法？

以下是我的（查看）cshtml 文件中的代码片段。

```
@foreach (var item in Model)
{

    <tr>                
        <td align="right">                    
            @Html.DisplayFor(modelItem => item.AvgAnnualGrowth)
        </td>   
    </tr>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:00:04.440

您可以在 DisplayFor 之前添加标签

```
@Html.Label(item.AvgAnnualGrowth > 0 ? "+" : "")@Html.Display... 
```

# json - 杰克逊序列化过滤字段

> ID：12923252
> 
> 赞同：0
> 
> 时间：2012-10-16T20:54:54.710
> 
> 标签：json, serialization, tree, jackson, field

Jackson 序列化库中的注释对象。在每个序列化的基础上，我想告诉杰克逊哪些字段和子字段要序列化。

我有一些字段名称树，我只想包括那些：

```
root
  |-sub_field_1
  |-sub_object_1
    |-sub_field_2
  |-sub_object_2 
```

如果没有这个功能，我会得到类似的东西：

```
{
  "sub_field_1":123,
  "sub_field_2":456,
  "sub_object_1":{
    "sub_field_1":123,
    "sub_field_2":456
  },
  "sub_object_2":{
    "sub_field_1":123,
    "sub_field_2":456
  }      
} 
```

有了这个功能，我会得到类似的东西：

```
{
  "sub_field_1":123,
  "sub_object_1":{
    "sub_field_2":456
  },
  "sub_object_2":{
    "sub_field_1":123,
    "sub_field_2":456
  }      
} 
```

我不能使用 SimpleBeanPropertyFilter，因为不同级别的不同字段可能共享相同的名称。

谢谢，

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:00:21.343

如果您想要实现的是从特定类中排除特定字段（例如：仅从类 Bar 中排除“foo”），那么您可以尝试[genson library](http://owlike.github.io/genson/)。

```
Genson genson = new Genson.Builder().exclude("foo", Bar.class).create();
genson.serialize(yourObject); 
```

# python - 编写函数的两种不同方法（映射与循环）

> ID：12923254
> 
> 赞同：2
> 
> 时间：2012-10-16T20:55:05.590
> 
> 标签：python

忙于一些代码，并且有一个函数基本上采用字典，其中每个值都是一个列表，并返回具有最大列表的键。

我写了以下内容：

```
def max_list(dic):
    if dic:
        l1 = dic.values()
        l1 = map(len, l1)
        l2 = dic.keys()
        return l2[l1.index(max(l1))]
    else:
        return None 
```

其他人写了以下内容：

```
def max_list(dic):
    result = None
    maxValue = 0
    for key in dic.keys():
        if len(dic[key]) >= maxValue:
            result = key
            maxValue = len(dic[key])
    return result 
```

如果有的话，这将是执行此操作的“正确”方法。我希望这不被视为社区 wiki（即使代码有效），试图找出解决问题的最佳模式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T20:59:18.583

另一个有效选项：

```
maxkey,maxvalue = max(d.items(),key=lambda x: len(x[1])) 
```

在上述两个中，我可能更喜欢显式 for 循环，因为您不会生成各种中间对象只是为了将它们丢弃。

* * *

作为旁注，此解决方案对于空字典效果不是特别好......（它引发了 a `ValueError`）。因为我认为这是一个不寻常的情况（而不是正常情况），所以将其封闭在一个`try-except ValueError`块中应该不会有什么坏处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T20:59:26.923

最蟒蛇会是`max(dic,key=lambda x:len(dic[x]))`......至少我会认为......

最大化可读性和最小化代码行是pythonic ...通常

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T21:14:55.687

我认为您应该问自己的问题是，您认为最重要的是：代码可维护性还是计算速度？

正如其他答案所指出的，这个问题有一个使用地图的非常简洁的解决方案。对于大多数人来说，这个实现可能比带有循环的实现更容易阅读。

就计算速度而言，地图解决方案的效率会较低，但仍处于相同的[Computational Magnitute](http://en.wikipedia.org/wiki/Big_O_notation)中。

因此，我认为 map 方法的性能不太可能明显降低。我建议您在程序完成后使用分析器，这样如果您的程序运行速度比预期的慢，您就可以确定真正的问题出在哪里。

# javascript - 使用 jQuery 设置模式对话框会阻止下拉菜单工作

> ID：12923259
> 
> 赞同：0
> 
> 时间：2012-10-16T20:55:29.543
> 
> 标签：javascript, jquery, dom-manipulation

假设我有以下 HTML：

```
<select>
    <option>a</option>
    <option>a</option>
    <option>a</option>
    <option>a</option>
</select>​ 
```

以及以下 javascript：

```
$("<div>").dialog({
    modal: true
});
//... some other code
$(".ui-widget-overlay").remove(); //remove what makes the modal dialog `modal` 
```

出于某种原因，当我尝试从下拉列表中进行选择时，它不再起作用...

我该如何解决？

我正在使用 Chrome 22.0.1229.94（官方版本 161065）m

演示：http: [//jsfiddle.net/maniator/gATRg/](http://jsfiddle.net/maniator/gATRg/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T21:09:09.463

创建覆盖时，某些事件会绑定到文档以防止单击。叠加层本身就是一个小部件，对话框存储对它的引用。如果您以“正确”的方式破坏覆盖，那么您将获得您正在寻找的行为。

看到这个小提琴：http: [//jsfiddle.net/Waxen/gATRg/6/](http://jsfiddle.net/Waxen/gATRg/6/)

代码：

```
var div = $("<div>")

div.dialog({
    modal: true
});

div.data().dialog.overlay.destroy(); 
```

# python - Python TypeError：-：'int'和'function'不支持的操作数类型

> ID：12923264
> 
> 赞同：8
> 
> 时间：2012-10-16T20:55:52.180
> 
> 标签：python, typeerror

我是 Python 的初学者，正在做作业。`TypeError: unsupported operand type(s) for -: 'int' and 'function'`即使在研究了错误并应用了建议的修复程序之后，我也会继续努力。我不是在寻找任何人给我一个解决方案，但我会很感激再看一眼。我错过了一些东西，但我不知道是什么。这是我遇到问题的代码部分：

```
month = 0
interestYDT = 0
balance = int(raw_input ("Enter balance on credit card: "))
annualInterestRate = float(raw_input ("Enter annual interest rate as a decimal: "))
monthlyPaymentRate = float(raw_input ("Enter minimum monthly payment rate as a decimal: "))
previousbalance = balance
#
def monthlyInterestRate(annualInterestRate):
    return float(annualInterestRate/12)
#
if month <= 12:
    def minimumMonthlyPayment(previousbalance):
        return (previousbalance * monthlyPaymentRate)
    def monthlyInterest(monthlyInterestRate):
        return (1 + monthlyInterestRate)
    minMonPay = minimumMonthlyPayment
    monInt = monthlyInterest
    newbalance = ((previousbalance - minMonPay) * (monInt))
    interestYDT = (interestYTD + montInt)
    previousbalance = (newbalance)
    print ''
    print ('Month:' (month))
    print ('Minimum monthly payment: $ ' (round(minimumMonthlyPayment, 2)))
    print ('Remainging balance: $ ' (round(newbalance, 2)))
    print ' '
    month = (month + 1) 
```

这是我得到的全部错误：

```
Traceback (most recent call last):
  File "C:/Users/Karla/Documents/_MIT 600X Introduction to CS and Prog/Assignments/Week2/kmarciszewski_week2_Problemset_Problem1.py", line 33, in <module>
    newbalance = ((previousbalance - minMonPay) * (monInt))
TypeError: unsupported operand type(s) for -: 'int' and 'function' 
```

我真的很感激任何见解。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T21:05:10.323

为了调用函数，您必须在函数名称之后添加括号以及任何必需的参数。

在这两行

```
minMonPay = minimumMonthlyPayment
monInt = monthlyInterest 
```

您将函数分配给名称 minMonPay、monInt，但实际上并未调用它们。相反，您需要编写如下内容：

```
minMonPay = minimumMonthlyPayment(previousBalance)
monInt = monthlyInterest(monthlyInterestRate) 
```

这个定义

```
def minimumMonthlyPayment(previousbalance):
    return (previousbalance * monthlyPaymentRate) 
```

给你一个函数，它接受一个参数并将其称为previousBalance。它与您之前在代码中创建的变量无关。事实上，我建议你重命名它，它只会让你作为初学者感到困惑。

此外，您创建的函数非常简单，每个函数只使用一次，您可能会感兴趣，删除它们并内联代码。

```
# OLD CODE
def minimumMonthlyPayment(previousbalance):
    return (previousbalance * monthlyPaymentRate)
def monthlyInterest(monthlyInterestRate):
    return (1 + monthlyInterestRate)
minMonPay = minimumMonthlyPayment
monInt = monthlyInterest

# NEW CODE
minMonPay = previousbalance * monthlyPaymentRate
monInt = 1 + monthlyInterestRate 
```

如果您这样做，请不要忘记更新错误地使用 minimumMonthlyPayment 函数的行。

```
# OLD CODE
print ('Minimum monthly payment: $ ' (round(minimumMonthlyPayment, 2)))

# NEW CODE
print ('Minimum monthly payment: $ ' (round(minMonPay, 2))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:01:39.730

我认为问题在于这一行`minMonPay = minimumMonthlyPayment`，在我看来，您正在将变量分配给方法而不是调用该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:03:19.240

查看您的代码，您似乎正在将一个函数分配给一个变量，然后尝试从一个值中减去一个函数。

您定义了函数“minimumMonthlyPayment(previousbalance)”，然后将该函数分配给变量“minMonPay = minimumMonthlyPayment”。然后稍后你说previousBalance - minMonPay。我认为你的意思是：

minMonPay = minimumMonthlyPayment(previousbalance)

希望有帮助。

# gwt - 删除了我的 *.gwt.xml 文件

> ID：12923266
> 
> 赞同：0
> 
> 时间：2012-10-16T20:56:10.060
> 
> 标签：gwt

我删除了我的 *.gwt.xml 文件。当我重新创建它时，我的 gwt 应用程序在调试模式下运行良好，但是当我在生产中打开它时，它给了我一个空白屏幕。我相信遗漏了遗产有没有办法找出哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:09:23.030

它编译吗？

如果没有，请使用`--logLevel DEBUG`java 编译调用（或者您可以直接在 eclipse 项目设置中设置）查找丢失的模块。

如果它编译，只需使用调试模式来跟踪它崩溃的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:13:50.903

发现我有

```
<module rename-to='AppName'> 
```

但显然你不能使用它需要的大写字母

```
<module rename-to='appname'> 
```

# python - 我的 beautifulsoup.py 文件在哪里？

> ID：12923269
> 
> 赞同：-5
> 
> 时间：2012-10-16T20:56:15.487
> 
> 标签：python, beautifulsoup

我买了一本关于数据可视化的书，下载 Python 后被引导下载美丽的汤和“将美丽的汤 python.py 文件保存在我计划保存代码的目录中”。

美丽的汤下载中没有美丽的汤.py文件只是一堆其他文件。这就像一个残酷的书呆子笑话。

在 Beautiful Soup 下载的众多文件中，我应该将哪个文件保存为“beautifulsoup.py”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:04:09.160

我会忽略这些说明 - 将常用的 3rd 方库与您自己的代码一起放入并不是真正的方法。

你现在想要使用`beautifulsoup4`，所以你应该`pip`或者`easy_install`那个......然后你就可以将它用作`from bs4 import BeautifulSoup`.

# authentication - WebForms - 使用什么事件来验证请求正文中传递的票证？

> ID：12923270
> 
> 赞同：2
> 
> 时间：2012-10-16T20:56:15.750
> 
> 标签：authentication, webforms, forms-authentication

这听起来可能很微不足道，但我找不到一个好的答案：当请求在请求正文中带有验证票时，什么事件最适合验证请求（然后为后续创建 FormsAuthenticationTicket 和 auth cookie电话）？

一个选项在 BasePage 的 Page_PreInit 中，在 Global.asax 中的另一个 Application_AuthenticateRequest 和 Global.asax 中的另一个 FormsAuthentication_OnAuthenticate。

任何指向解决方案的链接都将非常有帮助。

帕维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:10:13.143

我无法找到关于此问题的明确答案的链接，但从个人经验和阅读[ASP.NET 应用程序生命周期](http://msdn.microsoft.com/en-us/library/bb470252%28v=vs.100%29.aspx)来看，Application_BeginRequest 似乎是最佳选择。对于您描述的场景（将特定于应用程序的票证转换为 ASP.NET 表单身份验证票证），我有一个应用程序在生产中使用了几年。

使用 Application_AuthenticateRequest 和您提到的其他问题的问题是，在同一个请求周期的后期控制使用您创建的表单身份验证 cookie 为时已晚。

这是一个简单的例子。您需要为票证的验证方式填写自定义逻辑。

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
    if (!GetRequestHasValidTicket() )
    {
        string bodyToken = Request.Form["MyTokenName"];
        //custom logic to authenticate token
        bool tokenIsValid = true;
        if (tokenIsValid)
        {
            System.Web.Security.FormsAuthentication.SetAuthCookie("myusername", false);
        }
    }
}

private bool GetRequestHasValidTicket()
{
    FormsAuthenticationTicket ticket = null;
    try
    {
        ticket = System.Web.Security.FormsAuthentication.Decrypt(Request.Cookies[FormsAuthentication.FormsCookieName].Value);
    }
    catch { }
    return ticket != null;
} 
```

BeginRequest 的一个小问题是 Context.User 尚未设置，因此您必须手动检查有效票证以避免将表单身份验证票证添加到每个响应中。如果您的应用程序逻辑是票证只显示在第一个请求的正文中，那么您可能不需要这个额外的检查。

# c# - 更改数据集的连接字符串

> ID：12923272
> 
> 赞同：2
> 
> 时间：2012-10-16T20:56:18.923
> 
> 标签：c#, dataset

使用数据集时如何为数据库创建身份验证窗口 - MyDatabaseDataSet？

当我不使用数据集时，我只需为每个操作打开新的 SqlConnection 并使用一些在我编写登录名和密码后创建的连接字符串。但是数据集使用一些默认的连接字符串。如何改变它？

我想使用连接字符串连接到数据库和表，`Data Source=XXXX-PC\MSSQLSERVER2;Initial Catalog=MyDatabase;User ID={0};Password={1}`其中 {0} 和 {1} - 来自身份验证窗口的参数。

我不明白将连接字符串放在哪里，然后将其用作默认连接字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:14:36.483

过去我在使用默认连接字符串的 DataSet 对象方面遇到过问题。

为了解决这个问题，我将连接字符串传递给我的 SqlConnection 构造函数。

在我的情况下，我使用 web.config 来保存连接字符串。

```
var dt1 = new CustomDataSet.CustomDataTable();
var connectionString = ConfigurationManager.ConnectionStrings["connectionStringName"].ConnectionString
using (var connection = new SqlConnection(connectionString))
{
    using (var da1 = new GetCustomDataTableAdapter() { Connection = connection })
    {
        da1.Fill(dt1, id);
    }   
} 
```

# git - 可以更好地控制 Github For Windows 中的合并吗？

> ID：12923273
> 
> 赞同：1
> 
> 时间：2012-10-16T20:56:19.247
> 
> 标签：git, version-control, github-for-windows

我在 git-tfs 的上下文中使用 git。然而，就 Github For Windows 而言，这并不重要。对我来说主要的痛点是有一些文件我必须更新并且基本上从不签入。现在我的结构是一个工作分支，我在其中工作，然后主分支与 TFS 的源代码完全相同. 所以当然，当我进行更改时，我需要从 Work 合并到 Master。

Github For Windows 是否可以不合并某些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:52:14.457

我不这么认为，但你可以看看：http: [//gitready.com/intermediate/2009/02/18/temporarily-ignoring-files.html](http://gitready.com/intermediate/2009/02/18/temporarily-ignoring-files.html)

如果您的主分支中的文件有修改，您将遇到问题......

# .net - TeamCity + NuGET - 无法恢复到 .NET 4.0

> ID：12923284
> 
> 赞同：3
> 
> 时间：2012-10-16T20:56:57.377
> 
> 标签：.net, teamcity, nuget

我有一个依赖于许多项目/构建的 .NET 应用程序。我们使用 TeamCity 作为我们的持续集成服务器。我根据依赖关系成功设置了构建顺序，并最终正确编译了应用程序。这是使用 Visual Studio 2010。我们最近切换到 2012，我犯了一个错误，试图将构建从 .NET 4.0 移动到 .NET 4.5，同时我将构建切换为使用 VS 2012。一切仍然有效，但是客户无法在其环境中使用 .NET 4.5。现在我尝试仍然使用 VS 2012，但将所有内容恢复到 4.0。

DLL 1 正在成功编译，我正在创建一个 .NUPKG 供 DLL2 使用。我看到了 DLL1 的工件，它们表明 .NUPKG 确实是 .NET 4.0。但是当我尝试编译 DLL2 时，它无法“找到”DLL 1。我查看了我的包文件夹，似乎已安装的是 DLL1 的 .NET 版本 4.5。

我曾尝试直接安装 dll，作为“依赖项”，发现它被擦除（进入 bin/Release 并且我正在执行 Clean/Build），修复了该问题，但系统似乎仍然不认为它是正确的版本。我尝试过使用 NUGET 安装程序，我得到的似乎是 4.5 版本。我尝试使用从 VS 2012 设置的“恢复丢失的包”，但我仍然得到 4.5。

从日志中：

```
[install] NuGet command: C:\TeamCityBuildAgent\tools\NuGet.CommandLine.2.1.0.nupkg\tools\NuGet.exe install C:\TeamCityBuildAgent\work\52d92aca0070dc48\OurLibrary\packages.config -OutputDirectory C:\TeamCityBuildAgent\work\52d92aca0070dc48\packages -Source http://localhost/guestAuth/app/nuget/v1/FeedService.svc/
[install] Starting: C:\TeamCityBuildAgent\temp\agentTmp\custom_script2900382890103739900.cmd
[install] in directory: C:\TeamCityBuildAgent\work\52d92aca0070dc48\OurLibrary
[install] All packages listed in packages.config are already installed. 
```

如果我运行此命令并且软件包已被删除，则它已正确重新安装。但是重新安装的版本是net45。

是的，我的 package.config 确实需要 4.0：

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="MyCompany.Metadata.Interfaces" version="1.0.0" targetFramework="net40" />
</packages> 
```

建议？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:56:38.903

如果我正确理解了问题，您可以尝试从包管理器控制台运行 update-package -reinstall -Source`http://localhost/guestAuth/app/nuget/v1/FeedService.svc/`并查看它是否已正确更新？

# magento - Magento 1.7 中的 FedEx 设置，加拿大邮政编码

> ID：12923288
> 
> 赞同：0
> 
> 时间：2012-10-16T20:57:05.387
> 
> 标签：magento, module, shipping, fedex

我正在尝试在我的 Magento 购物车 1.7.0.2 上设置 FedEx 运输，并且我已经输入了所有信息，例如产品重量、我自己的送货地址，以及我从 Fedex 收到的所有信息。 com/developer（KEY、Meter #、ID 和 Pass），但我似乎无法在结帐时将 FedEx 视为一个选项。

我已经查看了其他线程，但我似乎无法找到解决我的问题的方法。

另外，我的邮政编码也应该是 A3B 2C1 还是 A3B2C1（之间没有空格）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:49:58.500

您可能应该仔细检查以确保您的 FedEx 帐户能够提交国际货件。

我以前遇到过这种情况，但我不记得是 FedEx 还是 UPS。

打开“调试模式”也会对您有所帮助，这将在 /var/log/ 下生成发货请求/响应的日志。

# coldfusion - 通过 CFLOOP 动态设置单选按钮状态

> ID：12923290
> 
> 赞同：0
> 
> 时间：2012-10-16T20:57:17.193
> 
> 标签：coldfusion, cfloop

我正在使用`cfloop`动态创建/填写三组输入字段，以及一些用于评级系统的单选按钮。输入字段按预期工作。但是我在使用单选按钮时遇到了问题。

出于某种原因（我假设这是一个简单的原因），单选按钮不反映发送给它们的值。例如：假设我有 3 件事要评分。如果循环值是`5,4,3`单选按钮，则所有显示的值都好像传递给它们的值是`5`。就好像所有的字段集都是首先创建的，并且都取第一个值（例如，被检查），而不是创建第一个字段集，插入值，然后创建第二个字段集等等（就像我会假设在一个循环中）。同样，它适用于除单选按钮之外的所有内容。任何见解将不胜感激。

这是我的代码：

```
<cfloop query="postedBy" startrow="1" endrow="4">
    <cfquery name="score" datasource="myDB">
    SELECT Round(sum(leadership)/Count(leadership)) as leadership
           ,  Round(sum(communication)/Count(communication)) as communication
           ,  Round(sum(fairness)/Count(fairness)) as fairness
           , Round(sum(ethics)/Count(ethics)) as ethics
           , Round(sum(competence)/Count(competence)) as competence 
    FROM  score_base 
    WHERE score_ID = '#postedBy.score_id#'
    </cfquery>

    <cfset score_ID=#postedBy.score_id#>
    <cfoutput>id: #postedBy.score_id#</cfoutput>
    <cfoutput>My score: #score.leadership#, #score.communication#, #score.fairness#, #score.ethics#, #score.competence#</cfoutput>

    <cfset counter = counter+1>
    <cfset "currentScore#score.leadership#" = "checked">
    <cfset "currentScoreb#score.communication#" = "checked">
    <cfset "currentScorec#score.fairness#" = "checked">
    <cfset "currentScored#score.ethics#" = "checked">
    <cfset "currentScoree#score.competence#" = "checked">   

     ...
    <div class="rating-wrapper">
        <cfform>
        <label>Leadership</label>
        <cfinput type="radio" class="star" name="leadership" value="1" disabled="disabled" checked = '#currentScore1#'/>
        <cfinput type="radio" class="star" name="leadership" value="2" disabled="disabled" checked = '#currentScore2#'/>
        <cfinput type="radio" class="star" name="leadership" value="3" disabled="disabled" checked = '#currentScore3#'/>
        <cfinput type="radio" class="star" name="leadership" value="4" disabled="disabled" checked = '#currentScore4#'/>
        <cfinput type="radio" class="star" name="leadership" value="4" disabled="disabled" checked = '#currentScore5#'/>
        </cfform>
   </div><!--    END div class="rating-wrapper"    -->
   <div class="rating-wrapper">
       <cfform>
           <label>Communication</label>
           <cfinput type="radio" class="star" name="communication" value="1" disabled="disabled" checked = '#currentScoreb1#'/>
           <cfinput type="radio" class="star" name="communication" value="2" disabled="disabled" checked = '#currentScoreb2#'/>
           <cfinput type="radio" class="star" name="communication" value="3" disabled="disabled" checked = '#currentScoreb3#'/>
           <cfinput type="radio" class="star" name="communication" value="4" disabled="disabled" checked = '#currentScoreb4#'/>
           <cfinput type="radio" class="star" name="communication" value="5" disabled="disabled" checked = '#currentScoreb5#'/>
      </cfform>
   </div><!--    END div class="rating-wrapper"    -->
   <div class="rating-wrapper">
       <cfform>
        <label>Fairness</label>
        <cfinput type="radio" class="star" name="fairness" value="1" disabled="disabled" checked = '#currentScorec1#'/>
        <cfinput type="radio" class="star" name="fairness" value="2" disabled="disabled" checked = '#currentScorec2#'/>
        <cfinput type="radio" class="star" name="fairness" value="3" disabled="disabled" checked = '#currentScorec3#'/>
        <cfinput type="radio" class="star" name="fairness" value="4" disabled="disabled" checked = '#currentScorec4#'/>
        <cfinput type="radio" class="star" name="fairness" value="5" disabled="disabled" checked = '#currentScorec5#'/>
    </cfform>
   </div><!--    END div class="rating-wrapper"    -->
   <div class="rating-wrapper">
      <cfform>
       <label>Ethics</label>
       <cfinput type="radio" class="star" name="ethics" value="1" disabled="disabled" checked = '#currentScored1#'/>
       <cfinput type="radio" class="star" name="ethics" value="2" disabled="disabled" checked = '#currentScored2#'/>
       <cfinput type="radio" class="star" name="ethics" value="3" disabled="disabled" checked = '#currentScored3#'/>
       <cfinput type="radio" class="star" name="ethics" value="4" disabled="disabled" checked = '#currentScored4#'/>
       <cfinput type="radio" class="star" name="ethics" value="5" disabled="disabled" checked = '#currentScored5#'/>
      </cfform>
   </div><!--    END div class="rating-wrapper"    -->
....
</cfloop> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:39:33.023

想通了：问题出在我的动态变量上。我需要在循环结束时重置它们：

```
<cfset "currentScore#score.leadership#" = "0">
<cfset "currentScoreb#score.communication#" = "0">
<cfset "currentScorec#score.fairness#" = "0">
<cfset "currentScored#score.ethics#" = "0">
<cfset "currentScoree#score.competence#" = "0"> 
</cfloop> 
```

# java - 获取四键的边界区域

> ID：12923291
> 
> 赞同：3
> 
> 时间：2012-10-16T20:57:26.753
> 
> 标签：java, latitude-longitude, spatial

我有一堆quadkeys，想得到边界框坐标，它是所有quadkeys 的范围，即包含所有quadkeys 的最小/最大纬度和长度。有没有图书馆可以帮助获得这个？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:13:03.067

Quadkeys 只是显示 MapTile 系统的 X/Y/Zoom 坐标的另一种方式。

让我们假设您的四键都具有相同的分辨率（缩放级别），即它们都具有相同的位数。

如果将四键的回转换为 X/Y 坐标，那么它就变成了一个简单的几何问题：找到包含一系列 X、Y 点的框的左上角和右下角的 X、Y 坐标。如果您需要帮助，请告诉我，尽管它应该是基本的欧几里得几何。

找到这两个角点后，将它们转换回纬度/经度，您将获得包含四键的边界框的纬度/经度点。

[MSDN 有示例源代码](http://msdn.microsoft.com/en-us/library/bb259689.aspx)显示 Lat/Long、X/Y/Zoom 和 QuadKeys 之间的转换。

# silverstripe - SilverStripe 从父数据对象继承元素

> ID：12923292
> 
> 赞同：1
> 
> 时间：2012-10-16T20:57:27.187
> 
> 标签：silverstripe

我在 Page.php 中设置了一个名为 Color 的字段，对于任何孩子，我都想获取父颜色或循环，直到找到一个确实设置了颜色字段的父。

我有一个下面的函数，它似乎在 2.4 中工作，但我无法在 SS3 中工作，我在模板中的循环中将其调用为 $Inherited(Colour)。

感谢您的帮助

```
public function Inherited($objName) {
    $page = $this->owner->Data();
    do {

        if ($obj = $page->obj($objName)) {

            if ($obj instanceof ComponentSet) {
                if ($obj->Count()) {
                    return $obj;
                }
            } elseif ($obj instanceof DataObject) {

                if ($obj->exists()) {
                    return $obj;
                }
            } elseif ($obj->exists()) {
                return $obj;
            }
        }
    } while ($page->ParentID != 0 && $page = $page->Parent());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:20:00.403

我想你已经在一些 DataObjectDecorator 中定义了这个函数，因为你`$this->owner`用来引用当前页面。

SilverStripe 3 中不再有 DataObjectDecorator（请参阅[http://www.robertclarkson.net/2012/06/dataextension-class-replacing-dataobjectdecorator-silverstripe-3-0/](http://www.robertclarkson.net/2012/06/dataextension-class-replacing-dataobjectdecorator-silverstripe-3-0/)），因此有两种可能的解决方案：

a) 用 DataExtension 替换 DataObjectDecorator

b）只需将`Inherited`功能移动到您的 Page 类，并替换`$this->owner`为`$this`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:02:27.470

假设您的 Color 字段是一个数据库字段而不是与另一个数据对象的关系，请将以下方法添加到您的`Page`类中。

```
公共函数 getColour() {

    // 尝试返回此页面的横幅
    $color = $this->getField('颜色');
    如果（$颜色）{
        返回$颜色；
    }

    // 这个页面没有颜色？循环通过父母。
    $parent = $this->Parent();
    if ( $parent->ID ) {
        返回 $parent->getColour();
    }

    // 仍然需要一个后备位置（由模板处理）
    返回空值；
}

```

如果颜色是一个相关的数据对象，您可以做很多相同的事情，但使用[`getComponent`](http://api.silverstripe.org/2.4/sapphire/model/DataObject.html#methodgetComponent)or[`getComponents`](http://api.silverstripe.org/2.4/sapphire/model/DataObject.html#methodgetComponents)方法代替`getField`上面的代码。这应该适用于 Silverstripe 版本 2.4.x 和 3.0.x。

这种操作虽然有用，但可能应该谨慎执行或大量缓存，因为它的递归可能会在大多数页面加载时发生，并且很少更改。

# git - git push heroku 大师。代理后面的错误

> ID：12923293
> 
> 赞同：2
> 
> 时间：2012-10-16T20:57:28.813
> 
> 标签：git, heroku, ssh, proxy

> **可能重复：**
> [如何推送到代理后面的heroku？](https://stackoverflow.com/questions/9648559/how-to-push-to-heroku-behind-a-proxy)

我在我的 Win7 上安装了带有 Ubuntu 的 Oracle VM 代理。我使用 git。我尝试在 Heroku 中部署，但出现错误：

```
$ git push heroku master 
ssh: connect to host heroku.com port 22: Connection timed 
out fatal: The remote end hung up unexpectedly 
```

`export http_proxy=http://proxyuser:proxypass@proxy:port`帮助`$ git clone`。但不是为了`git push`。

我努力了：

```
ssh-keygen -t rsa heroku 
keys:add 
```

它没有帮助。

我无法更新`git_config`或`heroku_config`- 权限被拒绝！

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T21:39:44.903

[http://www.agroman.net/corkscrew/README](http://www.agroman.net/corkscrew/README)

> Corkscrew 是一个通过 HTTP 代理建立 SSH 隧道的工具
> 
> 使用 SSH/OpenSSH 设置 Corkscrew 非常简单。将以下行添加到您的 ~/.ssh/config 文件中通常可以解决问题（将 proxy.example.com 和 8080 替换为正确的值）：
> 
> ```
> ProxyCommand /usr/local/bin/corkscrew proxy.work.com 80 %h %p ~/.ssh/myauth 
> ```
> 
> 您需要创建一个`myauth`包含您的用户名和密码的文件，格式如下：
> 
> ```
> username:password 
> ```

# c++ - 使用（n 个空）基类可以在同一个容器中存储不同的对象

> ID：12923294
> 
> 赞同：1
> 
> 时间：2012-10-16T20:57:30.983
> 
> 标签：c++, containers

假设我有两个完全不同的对象，Sprite 和 PhysicsData。

我编写了一个空基类和一个容器类，它们可以将对象推入/从容器中删除。

我创建了两个这样的容器来存储两个不同的对象——Sprite 和 PhysicsData。（不同的对象不在同一个类中）

```
class base
{
};

class ContainerManager
{
public:
    std::vector<base*> list;
    void Push(base *object);
    void Remove(base *object);
};

class PhysicsData : public base
{
    void applyGravity();
};

class Sprite : public base
{
    void Draw();
};

ContainerManager SpriteContainer;
ContainerManager PhysicsDataContainer;

Sprite aSprite;
SpriteContainer.Push(&aSprite);

PhysicsData SomeData;
PhysicsDataContainer.Push(&SomeData); 
```

这是应该下注的方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:02:17.200

这**不是**C++ 方式。您应该使用模板。

如您所知，STL（您在使用`std::`命名空间前缀时调用它）实际上是标准模板库:)。许多模板类已经存在，例如对于推送/删除操作，请参见`std::list<T>`

你像这样使用它：

```
std::list<Sprite> SpriteContainer;
std::list<PhysicsData> PhysicsDataContainer; 
```

等等。

如果您仍然想编写自己的类以获得更多功能，那么[有一个关于 C++ 模板的很酷的指南。](http://www.codeproject.com/Articles/257589/An-Idiots-Guide-to-Cplusplus-Templates-Part-1)
如果问题是您想要做的实际事情，[还有](http://www.cplusplus.com/reference/stl/list/)对 , 的引用`std::list`（我认为我不需要为您解释用法）。`std::vector`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T21:02:41.440

您在 C++ 中使用模板，但仍然担心有一个普通容器的通用基类？

```
template <class T>
class Container{
  private:
    vector<T> list;
  public:
    void Push(T data);
    T Pop();
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T21:04:27.060

如果您将单个虚函数放入基类中，如果您在同一个容器中混合不同类型，您将能够使用它`dynamic_cast`来取回正确的指针。虚拟析构函数将是一个好主意，因为如果它是动态分配的，您可以删除该对象，而不必将其转换回原始指针。

如果您*不*打算在单个容器中混合类型，我[同意 dreamzor](https://stackoverflow.com/a/12923366/5987)的观点，即模板类会更好。这就是所有标准容器的实现方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T21:20:50.650

这看起来像是技术上正确的代码，但您没有进行任何类型检查。如您所见，PhysicsData 显示在您的 SpriteContainer 中。你可能不想要这个。

将 PhysicsData 排除在 SpriteContainer 之外的方法不止一种。一种方法是使用模板。使用模板，您可以在编译时声明容器应该使用哪种类型的基础对象。

另一种方法是从您的 ContainerManager 继承两种类型的 ContainerManager，一种称为 PhysicsContainerManager，另一种称为 SpriteContainerManager。这两个子类可以进行类型检查以验证传递的对象实际上是 SpriteContainer 还是 PhisicsData。此链接显示了如何在[与 instanceof 等效的 c++ C++中进行类型检查](https://stackoverflow.com/questions/500493/c-equivalent-of-instanceof)

谢谢何塞

# jquery - 在jQuery中使用页面滚动百分比更改输入值

> ID：12923300
> 
> 赞同：0
> 
> 时间：2012-10-16T20:58:16.203
> 
> 标签：jquery, scroll

我正在使用 jQuery 计算当前滚动的页面数量，并在每次滚动页面时将该值写入输入。

```
var scrollAmount = $(window).scrollTop();
var documentHeight = $(document).height();
var scrollPercent = (scrollAmount / documentHeight) * 100;

$(window).scroll(function (event) {
 $(".box").val(scrollPercent);
});​ 
```

小提琴：http: [//jsfiddle.net/x3jXK/](http://jsfiddle.net/x3jXK/)

然而，当我尝试这个时，输入总是显示为零。

我记得读过一些关于使用`.attr()`而不是`.val()`因为显示的值不会改变的东西，但不确定我如何在这里实现它，因为它是动态变化的，而不仅仅是从一秒到一秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:00:54.347

您的 vars 应该在您的函数中，因此可以在每次滚动时计算它们。

```
$(window).scroll(function(event) {
    var scrollAmount = $(window).scrollTop();
    var documentHeight = $(document).height();
    var scrollPercent = (scrollAmount / documentHeight) * 100;

    $(".knob").val(scrollPercent);
}); 
```

在这里测试它：http: [//jsfiddle.net/RASG/x3jXK/1/](http://jsfiddle.net/RASG/x3jXK/1/)

# java - Java 异常处理的良好实践

> ID：12923302
> 
> 赞同：7
> 
> 时间：2012-10-16T20:58:27.423
> 
> 标签：java, performance, exception, checked, unchecked

我有一些关于在 Java 中处理异常的问题。我读了一些关于它的内容，并得到了一些相互矛盾的指导方针。

[异常处理的最佳实践](http://onjava.com/pub/a/onjava/2003/11/19/exceptions.html?page=1)

让我们看一下上面提到的文章：

它指出，*如果“客户端代码无能为力”* ，通常应该避免使用检查异常。但这究竟是什么意思？在 GUI 中显示错误消息是冒泡检查异常的充分理由吗？但它会迫使 GUI 程序员记住捕获 RuntimeExceptions 及其后代以显示潜在的错误信息。

本文提出的第二种观点是，除非我想在其中实现一些自定义字段/方法，否则应该避免发明自己的异常类。我通常不同意这一点，我今天的实践正好相反：我将异常包装在我自己的异常结构中，以反映我编写的类实现的目标，即使它们只是扩展 Exception 而不添加任何新方法。我认为它有助于在抛出时在更高层更灵活地处理它们，而且对于将使用这些类的程序员来说，它通常更清晰易懂。

我今天实现了一些代码，文章中介绍的“新方法”在这里和那里抛出 RuntimeException，然后我让[Sonar](http://www.sonarsource.org/)分析它。为了让我更加困惑，Sonar 将我的 RuntimeExceptions 标记为重大错误，并带有一条消息，例如*“避免抛出根类型异常，将它们包装在您自己的类型中”。*

所以看起来很有争议，你怎么看？

我今天还从一位技术负责人那里听说，仅仅包装异常是不好的，“因为这对 JVM 来说是一项非常昂贵的操作”。对我来说，另一方面，到处抛出 SQLExceptions 或 IOExceptions 看起来有点破坏封装..

**那么你对我在这里提出的问题的一般态度是什么？**

1.  **什么时候在我自己的类型中包装异常，什么时候我不应该这样做？**

2.  ***'客户端对此无能为力，抛出运行时异常*****？***'*

3.  **性能问题呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:15:49.787

看起来你的技术主管经常因为不擅长开发而逃脱了他的开发角色。

我的建议是：

*   更喜欢运行时异常而不是检查异常，特别是如果您不是 API 的唯一客户端。使用已检查异常会强制每个客户端处理异常，即使它对此无能为力。如果这确实是您想要做的（即强制调用者处理它），那么检查异常就是您想要的。
*   如果发生异常时客户端唯一能做的就是显示或多或少的通用错误消息，例如“哎呀，发生了不好的事情，请重试或返回欢迎页面”，那么一定要使用运行时异常。大多数表示框架都提供了一种使用通用错误处理程序的方法。
*   绝对使用链接到您的抽象层的异常。从高级服务抛出 SQLException 是不够的。在适当的时候使用现有的异常类型（例如 IllegalArgumentException 来表示非法参数）。否则，将低级异常包装到更高级别的适当异常类型中。代价高昂的是抛出异常。它是否包裹另一个并不重要。无论如何，它应该只在例外情况下发生。

# android - Android 4.0.3 Stock 浏览器 z-index 问题的解决方法/polyfill

> ID：12923305
> 
> 赞同：11
> 
> 时间：2012-10-16T20:58:45.593
> 
> 标签：android, z-index, android-4.0-ice-cream-sandwich, css-position

我正在为此报告中描述的 z-index 错误寻找解决方法或 polyfill： [http ://code.google.com/p/android/issues/detail?id=31862](http://code.google.com/p/android/issues/detail?id=31862)

我的标记和 CSS 看起来与错误报告中给出的基本相同。

如果有人能给我一个关于如何解决这个问题的正确方向的提示，那就太好了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T17:32:00.747

我遇到了同样的问题，并通过在弹出窗口中添加以下 css 来修复它：

```
-webkit-transform:translateZ(0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-28T10:36:28.097

替代解决方案（在此处找到：[https](https://coderwall.com/p/7gjkug) ://coderwall.com/p/7gjkug ）：

`-webkit-backface-visibility: hidden;`

# javascript - 每次用户单击链接时，标题中的菜单都会重新加载。如何更改当前链接的颜色？

> ID：12923308
> 
> 赞同：-1
> 
> 时间：2012-10-16T20:59:05.317
> 
> 标签：javascript, html, css, colors, hyperlink

我有一个 header.jsp，它包含在我的应用程序的所有页面中。标题还包含带有 4 个页面链接的导航菜单。当用户单击这些链接之一转到相应页面时，整个页面会重新加载。如何更改标题中当前页面的链接颜色。下面是标题。

```
<td class="navBtn"  onClick="className='navBtnSel';"><a href="ReportingTemplate.jsp"     class="bannerHeader" title="Reporting Search"  target="_parent">Customer</a></td>
                <td class="navBtn"  onClick="className='navBtnSel';"><a href="BraTemplate.jsp" class="bannerHeader" title="Reporting Search"  target="_parent">Branch</a></td>
                <td class="navBtn"  onClick="className='navBtnSel';"><a href="DDReportTemplate.jsp" class="bannerHeader" title="Reports"  target="_parent">Reports</a></td>
                <td class="navBtn"  onClick="className='navBtnSel';"><a href="CreateUserprf.do" class="bannerHeader" title="Create User"  target="_parent">Create User</a></td>
                <td class="navBtn"  onClick="className='navBtnSel';"><div style="padding-right: 14px;"><a href="LogOutAction.do" class="bannerHeader" title="Log Out"  target="_parent">Log Out</a></div></td> 
```

并且此标题包含在其他页面中，如下所示..

```
 <tr>
      <td colspan="2" align="left"><iframe src ="Header.jsp?stflg=C" name="head" scrolling="no" frameborder="0" id="head" style="height: 150px; width: 100%;"></iframe></td>
  </tr>
    <tr>
      <td id="searchCell" width="21%" align="left"><iframe style="height: 590px; margin-left: 10px; margin-right: 0px; width: 250px;" frameborder="0" id="search" name="search" src ="SearchFill.do" scrolling="no"></iframe></td>
      <td id="bodyCell"width="79%"><iframe style="height: 590px; border-collapse: collapse; width: 100%;" frameborder="0" id="body" name="body" scrolling="auto" src="body.jsp"></iframe></td>
  </tr> 
```

我是前端的初学者。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:15:06.157

您首先需要一种可靠地识别当前页面的方法。我发现为每个正文标签添加一个唯一 ID 并为每个链接添加一个 ID 是有效的，结果如下：

```
<body id="about">
  ....
  <nav>
    <a class="n-main" href="main.html">
    <a class="n-about" href="about.html">
  </nav> 
```

然后，您可以使用如下规范重新设置当前链接的样式：

```
body#main a.n-main, body#about a.n-about { color: red; } 
```

只有里面的链接`body#about`会变成红色。

使用后端代码，您还可以将`.current`类添加到适当的链接，然后为此编写样式规范。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:17:36.183

您需要研究一些服务器端技术来处理您尝试使用`iframe`. （如 PHP、ASP.NET 等）

使用您的`iframe`方法，您将使页面之间的导航变得比需要的复杂得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:06:58.380

您可以在每个菜单链接中添加类似 menu_id 的内容。例子：

```
<a href="BranchTemplate.jsp?menu_id=2" ... </a> 
```

menu_id 变量将用于识别活动菜单。

# asp.net - Ajax UpdatePanel 在 IE9 中不起作用

> ID：12923309
> 
> 赞同：1
> 
> 时间：2012-10-16T20:59:10.277
> 
> 标签：asp.net, ajax

我正在使用 updatepanel 来避免回发，并且代码在 IE8 和 firefox 中运行良好，但在 IE9 中却不行。我也尝试从 codeplex 安装最新的 ajax 工具包，但它也没有帮助我。请帮助我。我的代码如下/....

```
<table width="800px">
                                <tr>
                                <asp:UpdatePanel runat="server" ID="upCountry">
                                <ContentTemplate>
                                    <td class="TextLabelForHeader" width="300px">
                                        Country:
                                        <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" ControlToValidate="ddlCountry"
                                            ErrorMessage="*" InitialValue="Select.." ValidationGroup="VGHeader"></asp:RequiredFieldValidator>
                                    </td>
                                    <td align="left">
                                        <asp:DropDownList ID="ddlCountry" runat="server" OnSelectedIndexChanged="ddlCountry_SelectedIndexChanged"
                                            AutoPostBack="true" OnDataBound="ddlCountry_DataBound" onchange="SelectCurrency(this);"
                                            ValidationGroup="VGHeader">
                                        </asp:DropDownList>
                                    </td>
                                    <td align="left">
                                        &nbsp;
                                    </td>
                                    </ContentTemplate>
                                    </asp:UpdatePanel>
                                </tr>
                                <tr>
                                <asp:UpdatePanel runat="server" ID="upCurrency">
                                <ContentTemplate>
                                    <td class="TextLabelForHeader" width="300px">
                                        Currency:&nbsp;&nbsp;&nbsp;
                                    </td>
                                    <td align="left">
                                        <asp:DropDownList ID="ddlCurrency" runat="server" ValidationGroup="VGHeader">
                                        </asp:DropDownList>
                                    </td>
                                    <td align="left">
                                        &nbsp;
                                    </td>
                                    </ContentTemplate>
                                    </asp:UpdatePanel>
                                </tr>
                                <tr>
                                    <td class="TextLabelForHeader" width="300px">
                                        Client:
                                        <%--<asp:RequiredFieldValidator ID="RequiredFieldValidator5" runat="server" 
                                                        ControlToValidate="ddlClient" ErrorMessage="*" InitialValue="Select.." 
                                                        ValidationGroup="VGHeader"></asp:RequiredFieldValidator>--%>
                                        <asp:RequiredFieldValidator ID="RequiredFieldValidator5" runat="server" ControlToValidate="txtClient"
                                            ErrorMessage="*" ValidationGroup="VGHeader"></asp:RequiredFieldValidator>
                                    </td>
                                    <td align="left">
                                        <%--    <asp:DropDownList ID="ddlClient" runat="server" Height="16px" Width="143px" Enabled="false"
                                                        OnDataBound="ddlClient_DataBound" onchange="DisplayTextbox(this);" ValidationGroup="VGHeader">
                                                    </asp:DropDownList>--%>
                                        <asp:TextBox ID="txtClient" runat="server" Width="143px" ReadOnly="true" ValidationGroup="VGHeader"></asp:TextBox>
                                        <%--<div id="form_ProductContainer" style="display: none;">
                                                        <asp:TextBox ID="txtNewClientName" runat="server"></asp:TextBox>
                                                    </div>--%>
                                    </td>
                                    <td class="TextLabelForHeader" style="text-align: left;">
                                        <asp:Button ID="btnContinue" runat="server" OnClick="btnContinue_Click" Text="Continue"
                                            ValidationGroup="VGHeader" />
                                    </td>
                                </tr>
                            </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:42:32.033

**讨论：**按原样使用 IE9 至关重要吗？如果不是，那么您可以强制它呈现为 IE8，并在页面或母版页的头部插入以下代码。

**可能的解决方案：**

```
<meta http-equiv="X-UA-Compatible" content="IE=IE8" /> 
```

**更新的响应已**
**识别问题：**我查看了您的代码，您在最后一个 TR 元素内没有更新面板。我现在想象代码最初在 IE8 中工作，因为您可能有另一个覆盖整个表格的更新面板。

# java - 在启动时启动 Android 通知

> ID：12923311
> 
> 赞同：0
> 
> 时间：2012-10-16T20:59:16.613
> 
> 标签：java, android, broadcastreceiver, android-service, android-notifications

这个问题基于我之前的问题：[Android - 将通知设置为永不消失](https://stackoverflow.com/questions/12906332/android-set-notification-to-never-go-away)

我现在意识到我需要在启动时触发一些东西来触发通知。

从我之前的问题来看，我可以采取两条路线。要么启动服务，要么使用广播接收器。我认为启动服务有点矫枉过正（但我知道什么）。我在使用 BroadcastReceiver 路由时被卡住了。它通常可以工作，但是当我将代码用于通知时，我会收到一堆错误。

这是我的代码：

```
NotificationCompat.Builder mBuilder =
                    new NotificationCompat.Builder(this)
                    .setSmallIcon(R.drawable.ic_launcher)
                    .setContentTitle("My notification")
                    .setContentText("Hello World!");
            // Creates an explicit intent for an Activity in your app
            Intent resultIntent = new Intent(this, ResultActivity.class);
            //Intent.putExtra("My Notification");
            // The stack builder object will contain an artificial back stack for the
            // started Activity.
            // This ensures that navigating backward from the Activity leads out of
            // your application to the Home screen.
            TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
            // Adds the back stack for the Intent (but not the Intent itself)
            stackBuilder.addParentStack(ResultActivity.class);
            // Adds the Intent that starts the Activity to the top of the stack
            stackBuilder.addNextIntent(resultIntent);
            PendingIntent resultPendingIntent =
                    stackBuilder.getPendingIntent(
                        0,
                        PendingIntent.FLAG_UPDATE_CURRENT
                    );
            mBuilder.setContentIntent(resultPendingIntent);
            NotificationManager mNotificationManager =
                (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
            // mId allows you to update the notification later on.
            mNotificationManager.notify(i, mBuilder.build()); 
```

我的错误： ![在此处输入图像描述](../Images/2efa7cd671067e386f276c160f6ab840.png)

对此有什么想法吗？

摘要：服务或广播接收器更好（在这种情况下）？如何解决我的代码中的这些错误（当您将鼠标悬停时，他们说它们未定义）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T21:02:49.380

`this`将on 错误行的所有实例替换为`context`。

BroadcastReciever 没有实现与 Activity 和 Service 不同的上下文。您有错误的所有方法都需要一个上下文实例

# c# - Android View 实例化顺序

> ID：12923312
> 
> 赞同：-1
> 
> 时间：2012-10-16T20:59:16.627
> 
> 标签：c#, android, mobile, xamarin.android

**编辑：**我在创建自定义视图并尝试在不使用它的情况下更新视图时错过了一个关键概念，即消息队列，结果证明这是我遇到的问题的根源。这在这里得到了澄清：

[Android：编写支持消息队列的自定义视图](https://stackoverflow.com/questions/12955899/android-writing-custom-views-that-support-the-message-queue)

事实证明，您需要让运行时/android 在 OnCreate 退出后调用 OnMeasure（“像正常一样”​​），同时通过 .post 方法将任何更新放入消息队列中。

因此，您可以像往常一样在 OnCreate 中通过 FindViewById 获取视图的句柄，然后在可运行文件中发布任何更新（通过 setText 之类的覆盖或您自己的设置函数）（参见上面的链接）。

* * *

我在 android 中开发自定义视图已经有一段时间了，并且已经彻底试验了构造函数、属性、布局参数和绘图方法（OnMeasure、OnLayout，...）。

最父视图组（在布局文件中声明用于渲染的视图组）继承自 RelativeLayout 并包含三个子视图，以及所有自定义/继承的视图组，等等。

我正在实现一个自定义日历（我知道，非常原始且令人兴奋），我将调用 CustomCalendar。所以，在我的布局文件中，我有声明

```
<MonoDroid.CustomViews.CustomCalendar
  xmlns:calendar="http://schemas.android.com/apk/res/net.monocross.appname"
  android:id="+id/Calendar1"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  calendar:row_count="5"
  calendar:col_count="7"
 ...
/> 
```

这个视图与布局文件中定义的其他一些视图一起存在，因此是我的复杂性的来源，现在将说明。

我试图弄清楚如何在调用 OnMeasure 之前获取该视图的尺寸（在那里我可以得到它们没有问题，但是因为子视图的布局尺寸是由该视图尺寸确定的，所以我无法实例化子视图，直到第一次调用 OnMeasure，这证明是在我需要它之后；在 OnCreate 退出之后）。

也就是说，在 OnCreate 中调用 SetContentView，然后通过 FindViewById(Resource.Id.Calendar1) 从中实例化自定义视图后，如果从 OnMeasure 覆盖完成子视图（再次，b/c OnMeasure直到 OnCreate 返回后才被调用）。

如果我读取传递给构造函数的属性，我从 layout_width 和 layout_height 得到的都是 fill_parent 的常量 -1。我也不能只使用整个屏幕，因为还有其他视图需要补偿。

* * *

因此，我正在寻找从其构造函数中确定自定义视图尺寸的最佳方法，以便我可以使用适当的布局尺寸从它（构造函数）实例化所有视图的子项，以便视图可以从在调用 SetContentView 之后和从 OnCreate 返回之前的 OnCreate（用于更新内容）。

达到同一目的的另一种方法对我来说很好，尽管我有点希望按照基础设施的预期方式来做这件事（如果有这样的事情）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:08:19.837

您无法在构造函数中获取尺寸。充其量，如果它们是在 XML 中定义的，您可以从 AttributeSet 中获取布局的宽度和高度。

您应该做的是覆盖 onMeasure 和 onLayout。您可以在 onMeasure 中进行所需的任何计算和设置，然后将计算值传递给`measureChild(view, widthSpec, heightSpec)`. 你可以在 onLayout 中弄乱布局，然后调用`childView.layout(left, top, right, bottom)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:10:54.643

我想我有这个问题。我自己不确定时间，但我做了以下操作来获得尺寸

```
ViewTreeObserver viewTreeObserver = mOverlayFrameLayout.getViewTreeObserver();
                if (viewTreeObserver.isAlive()) {
                  viewTreeObserver.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
                    public void onGlobalLayout() {
                        mOverlayFrameLayout.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                        //do some things
                    }
                  });
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:01:03.883

**编辑**不要这样做（参见 OP 的编辑说明）。

* * *

它最终是 onMeasure 是解决这个问题的地方......

Ya 只需从 OnCreate 调用视图上的 Measure，这需要构造 Measure 使用的宽度和高度 MeasureSpec 参数：

```
public class Activity1 : Activity
{
    ...

    private CustomCalendar _calendar;

    public override void OnCreate()
    {
        SetContentView(Resource.Layout.Calendar);

        _calendar = FindViewById<CustomCalendar>(Resource.Id.Calendar1);           

        int widthMeasureSpec = View.MeasureSpec.MakeMeasureSpec(Resources.DisplayMetrics.WidthPixels, MeasureSpecMode.Exactly);
        int heightMeasureSpec = View.MeasureSpec.MakeMeasureSpec(Resources.DisplayMetrics.HeightPixels, MeasureSpecMode.Exactly);

        _calendar.Measure(widthMeasureSpec, heightMeasureSpec);

        ...
    }
} 
```

然后对所有嵌套/子视图递归地执行相同的操作。

我在每个自定义视图中都有一个静态布尔变量，用于跟踪视图是否已初始化，并在 onMeasure 中检查它以确定我是否应该初始化和测量它们。

```
 protected override void OnMeasure(int widthMeasureSpec, int heightMeasureSpec)
    {
        base.OnMeasure(widthMeasureSpec, heightMeasureSpec);

        if (!_initialized)
        {
            _WIDTH = MeasureSpec.GetSize(widthMeasureSpec);
            _HEIGHT = MeasureSpec.GetSize(heightMeasureSpec);

            InitViews();

            MeasureSpecMode widthMode = MeasureSpec.GetMode(widthMeasureSpec);
            MeasureSpecMode heightMode = MeasureSpec.GetMode(heightMeasureSpec);

            widthMeasureSpec = MeasureSpec.MakeMeasureSpec(_childView.LayoutParameters.Width, widthMode);
            heightMeasureSpec = MeasureSpec.MakeMeasureSpec(_childView.LayoutParameters.Height, heightMode);

            _childView.Measure(widthMeasureSpec, heightMeasureSpec);

            _initialized = true;
        }
    } 
```

# python - 如何在supervisord中设置一个组？

> ID：12923320
> 
> 赞同：29
> 
> 时间：2012-10-16T20:59:42.413
> 
> 标签：python, configuration, supervisord

所以我正在设置 supervisord 并尝试控制多个进程并且一切正常，现在我想设置一个组，以便我可以启动/停止不同的进程集，而不是全部或全部。这是我的配置文件的片段。

```
[group:tapjoy]
programs=tapjoy-game1,tapjoy-game2

[program:tapjoy-game1]
command=python tapjoy_pinger.py -g game1
directory=/go/here/first
redirect_stderr=true
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true

[program:tapjoy-game2]
command=python tapjoy_pinger.py -g game2
directory=/go/here/first
redirect_stderr=true
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true 
```

现在从阅读文档来看，这在我看来应该可以工作，但是调用 `supervisorctl restart tapjoy:` 没有任何作用。

我错过了什么吗？

添加星号不会出错，但也不会执行任何操作。

```
supervisorctl restart tapjoy:*
supervisorctl status
tapjoy_game1                     RUNNING    pid 4697, uptime 1 day, 21:56:23
tapjoy_game2                     RUNNING    pid 4698, uptime 1 day, 21:56:23
tapjoy_game3                     RUNNING    pid 4699, uptime 1 day, 21:56:23
tapjoy_game4                     RUNNING    pid 4700, uptime 1 day, 21:56:23
tapjoy_game5                     RUNNING    pid 4701, uptime 1 day, 21:56:23 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-17T13:12:10.987

您需要使用`*`通配符来选择组中的所有程序：

```
supervisorctl restart tapjoy:* 
```

注意：您的 shell 可能要求您转义`*`，通常使用`\*`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-18T11:21:59.760

我知道这是一个旧线程，但我遇到了同样的问题，在这里找到答案会很好。因此，以供将来参考，而不是：

```
program=tapjoy-game1,tapjoy-game2 
```

你需要：

```
programs=tapjoy-game1,tapjoy-game2 
```

文档：[http ://supervisord.org/configuration.html#group-x-section-values](http://supervisord.org/configuration.html#group-x-section-values)

# javascript - 有没有办法通过 JS/jQuery/asp.net mvc 在用户本地机器上打开文件？

> ID：12923337
> 
> 赞同：0
> 
> 时间：2012-10-16T21:00:36.890
> 
> 标签：javascript, jquery, asp.net-mvc-3, razor

这是背景——

用户在其他信息中输入文件路径。我的应用程序会将所有信息显示给用户。我需要一种方法将此文件路径显示为链接，以便用户可以通过单击链接直接打开此文件。

该文件将驻留在用户本地计算机上。

到目前为止我尝试过的 -

将文件路径添加为链接->

```
<a href="file:///H|\US\Connecticut\Stamford\Test\9.9 MB.doc">File to open</a> 
```

但是，当我单击此链接时，没有任何反应。有什么建议么？

# javascript - D3 - 轴位于页面中间时的网格

> ID：12923338
> 
> 赞同：3
> 
> 时间：2012-10-16T21:00:40.180
> 
> 标签：javascript, svg, d3.js, data-visualization

我有以下 D3 图表（使用 12842311 作为输入）： [http ://www.uscfstats.com/deltas](http://www.uscfstats.com/deltas)

加载图表后，单击网格按钮（仅在加载后）。将出现一个网格。明显的问题是垂直线只在图表的上半部分。

这是因为据我所知，D3 只允许您为刻度线的开头指定一个偏移量，这就是我的做法，然后不允许您指定一个结束偏移量。我还认为你必须用刻度线来做，否则你不知道刻度线的位置，除非你做一些复杂的事情。

我怎样才能绕过这个限制并在 x 轴上做一个垂直线的网格？好像应该不难。我什至会以正确的方式创建网格吗？

```
var xAxis = d3.svg.axis().orient("bottom").scale(x).ticks(15);

svg.append("g").attr("class","x axis").call(xAxis).attr("transform","translate(60, " + height + ")"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:45:51.363

我可以让它工作的最简单方法是手动调整大小和翻译`tick`标记。

```
 svg.selectAll(".y line")
      .attr("x2", width);

  svg.selectAll(".x line")
      .attr("y2", height)
      .attr("transform", "translate(0," + (-y(0)) + ")"); 
```

[您可以在http://jsfiddle.net/2y3er/2/](http://jsfiddle.net/2y3er/2/)看到一个工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:36:55.940

您可以制作两组刻度 SVG 元素，一组朝正方向延伸，另一组朝负方向延伸。

修改您的 d3 设置以包含另一个或两个轴，但这次在您的方法中包含修改后的`tick`参数：`call`

```
Dim xAxis = d3.svg.axis().scale(...).ticks(... // define your xAxis generator

Dim xAxisSVG = d3.selectAll(...)... // and your standared axis
        .call(xAxis);

Dim xPositiveTicks = d3.selectAll(...)... // positive grid lines
        .call(xAxis.tickSize(height));

Dim xNegativeTicks = d3.selecatAll(...)... // negative grid lines
        .call(xAxis.tickSize(-1 * height)); 
```

我知道这不是非常彻底，但这种方法过去对我来说效果很好。

# linux - Linux/Cygwin 递归复制文件更改扩展名

> ID：12923341
> 
> 赞同：2
> 
> 时间：2012-10-16T21:00:51.627
> 
> 标签：linux, find, rsync, xargs, cp

我正在寻找一种方法来递归查找扩展名为 X ( *.js) 的文件，并在同一目录中复制扩展名为 Y (* .ts) 的文件。

例如 /foo/bar/foobar.js --> /foo/bar/foobar.js 和 /foo/bar/foobar.ts

/foo/bar.js --> /foo/bar.js 和 /foo/bar.ts 等等

我的尽职调查：我正在考虑使用 find & xargs & cp 和大括号扩展 ( `cp foobar.{js,ts}`)，但 xargs 使用大括号来表示从 xargs 传递的文件列表。这让我很伤心，因为我最近才发现了大括号扩展/替换的真棒酱。

我觉得必须有一个单一的解决方案，但我正在努力想出一个。

我找到了执行任务的想法：将所需的复制到一个新目录，然后将该目录与新目录合并；在每个目录中递归运行重命名脚本；使用 rsync 复制；使用 find、xargs 和 cpio。

[就目前而言，运行像这样](http://www.debianadmin.com/rename-multiple-files-to-another-extension-in-linux.html)的重命名脚本脚本似乎是我最终要做的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T21:27:16.947

```
find . -name "*.js" -exec bash -c 'name="{}"; cp "$name" "${name%.js}.ts"' \; 
```

使用[`find`](http://pubs.opengroup.org/onlinepubs/007908799/xcu/find.html)，您可以使用`-exec`选项直接对找到的文件执行命令；您不需要通过 xargs 进行管道传输。它采用命令名称，后跟命令的参数，然后是单个参数`;`，您必须对其进行转义以避免 shell 解释它。`find`将用`{}`找到的文件替换命令名称或参数中出现的任何 。

为了调用替换了适当结尾的命令，您可以采用多种方法，但一种简单的方法是使用 Bash 的[参数扩展](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)。您需要定义一个包含名称的shell参数（在这种情况下，我创造性地选择了`name={}`），然后您可以对其进行参数扩展。`${variable%suffix}`剥离;`suffix`的值 `$variable`然后我添加`.ts`到最后，并有我正在寻找的名字。

# apache - .htaccess 文件导致站点进入 403

> ID：12923344
> 
> 赞同：0
> 
> 时间：2012-10-16T21:01:18.217
> 
> 标签：apache, .htaccess

为什么空白的 .htaccess 文件会导致站点进入 403？它在子目录中工作正常，但如果我将 .htaccess 文件放在我网站的公共根目录中，它会变为 403。

# php - 在 Wordpress 模板中使用 $wpdb 时出现空白页

> ID：12923355
> 
> 赞同：0
> 
> 时间：2012-10-16T21:01:56.277
> 
> 标签：php, mysql, wordpress

我正在尝试使用自定义 php 代码创建一个 Wordpress 模板，该模板连接 Wordpress 数据库中的自定义表，但它显示此代码的空白页

```
<?php
/*
Template Name: JNTU
*/
?>

<?php
function doSomething() {
global $wpdb;
$current_user = wp_get_current_user();
if ( 0 == $current_user->ID ) {
// Not logged in.
} else {
$id = $_POST['ID'];

 $add = $wpdb->prepare("SELECT SUM(tech) AS tech4 FROM (
(SELECT SUM(tm) AS tech FROM jbit WHERE id = :id)
UNION ALL
(SELECT SUM(tm) AS tech FROM hmm WHERE id = :id))t1");
$add -> execute(array(':id'=>$id));
echo " <center><table id='mytable' cellspacing='0'  border=3 align=center> 
<tr><TH scope='col'>Total Marks</TH> </tr><center>"; 
while ($row1 = $add->fetch(PDO::FETCH_ASSOC))
{
 echo "<tr>"; 
 echo "<td align=center>" . $row1['tech4']. "</td>";
 echo "</tr>";
  }
}
}
?> 
```

任何想法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:15:17.410

这不是如何`$wpdb->prepare`工作的。`$wpdb->prepare`接受一个字符串并返回一个字符串。并且类中没有执行方法`$wpdb`。[检查法典。](http://codex.wordpress.org/Class_Reference/wpdb)你想要的是：

```
$wpdb->get_results(
    $wpdb->prepare("SELECT SUM(tech) AS tech4 FROM (
      (SELECT SUM(tm) AS tech FROM jbit WHERE id = %d)
      UNION ALL
      (SELECT SUM(tm) AS tech FROM hmm WHERE id = %d)
    )",$id,$id)
); 
```

基本上它是[`printf`语法](http://php.net/manual/en/function.printf.php)，但没有“值编号/值交换”部分——即这种类型的东西—— `%2$s`。`$wpdb->prepare`是有用的，但不是很好，因此。

# javascript - 在网页中嵌入条形码

> ID：12923367
> 
> 赞同：0
> 
> 时间：2012-10-16T21:02:20.363
> 
> 标签：javascript, web-applications, web

在单个 html 页面中提供大量（例如 500 个）条形码图像（代码 128，黑白）的最佳方式是什么。根据我有限的经验，我看到了不同的选择

1.  生成一个嵌入了条形码（base64 编码）的静态 html 页面。
2.  将条形码作为图像提供（500 个单独的请求！）
3.  使用客户端 JS 条码生成器（不确定可用库的质量和大小。我看到的很少，不想使用它们）

我使用 AngularJS 作为前端，条形码是在后端生成的。我主要针对现代浏览器（主要是最新的chrome）

有更好的办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:52:34.773

将条形码生成为 1px 高的 png 精灵。包含 500 个条形码、每个 100 像素宽的 png 的文件大小应小于 20KB。在 using 中显示它`background-repeat: repeat-y`并将`background-position-x`值设置为`(barcodeIndex * -100) + "px"`：

```
.barcode
{
    background-image: url(barcodes.png);
    background-repeat: repeat-y;
    height: 35px;
    width: 100px;
    display: inline-block;
    margin: 0 17px 14px 0;
} 
```

来自 png sprite 演示的 250 个条形码：http: [//jsfiddle.net/agFvK/4/](http://jsfiddle.net/agFvK/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:20:42.877

关于#2，这只是图像优化加载。您是正确的，500 个单独的请求是不可取的。关于这种方法，您有几个选择。

1) 一张包含所有图像的巨型图像。使用 css 定位来显示它们中的每一个。这种技术称为精灵

2）你真的需要一次显示所有的图像吗？如果您仅按需使用它们，则仅在用户执行应显示它们的操作时动态添加它们。

3）如果您确实需要显示所有这些，请考虑涉及页面滚动的动态加载方法。您可能会在页面加载时加载前 10 个，然后当用户滚动到屏幕底部时，您会加载接下来的 10 个。

关于生成它们的 javascript 库，请再考虑一下。如果可能的话，那将是最好的方法。听起来您可能是许多用户的成千上万个独特的条形码。如果这确实是您的情况，那么将其推送到客户端将意味着您的服务器上的负载要少得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-21T15:01:53.530

我在使用服务器端生成的大条形码中的图像时遇到了很多问题。我发现解决这个问题的唯一方法是在客户端生成条形码，使用 HTML 和 CSS。

您可以使用 PHP 来生成 DIV，而不是生成图像。

这个小提琴说明了如何使用 js：http: [//jsfiddle.net/u7uPJ/2/](http://jsfiddle.net/u7uPJ/2/)

该解决方案不使用 js 库，仅使用条形码类。使用库，您可以使用以下内容生成大量条形码：

```
$('div.barcodeC').each(function(){
    this.appendChild(Barcode(this.className.match(/barcode\-([A-Za-z0-9\-]+)/)[1], "code128",{barWidth:2, barHeight:50}));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T00:50:41.003

我会找到算法并编写自己的客户端生成器。为此，我会考虑几个选项：对垂直线使用左浮动 div（您可以使用左边界、宽度、右边界、右边界）、使用画布或使用 css3 线性渐变。

UPD：我通过使用 base64 编码的图像将我的投票更改为 #1，我认为客户端显示它们会更快（因为生成条形码需要一些 cpu）并且您可以将图像存储在数据库中。如果它们是 svg 格式可能会更好，因此它们的打印效果会更好，并且在视网膜屏幕上看起来更清晰（顺便说一句，内联 svg 也不错）。

我不喜欢提到的将图像组合成精灵的解决方案，我认为维护和更新这样的文件并不容易。

# sql - 查询中周数形式的序列号

> ID：12923370
> 
> 赞同：0
> 
> 时间：2012-10-16T21:02:43.037
> 
> 标签：sql, sql-server, sql-server-2005

我用它来获取每周不同 RepID 的序列号和计数。但是我希望序列号值不是序列号（1、2、3），而是第 1 周、第 2 周、第 3 周。这怎么可能？这是使用 SQL Server 2005。谢谢！

```
Select ROW_NUMBER() OVER (ORDER BY Date) As SlNo, count(distinct(RepID))
from Reptable   
where Month(Date) = @Month
group by Datepart(week, Date) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:08:33.713

您需要做的就是`cast()`作为`row_number`字符串，然后`Week`在它的开头连接：

```
Select 
  'Week ' + cast(ROW_NUMBER() OVER (ORDER BY Date) as varchar(10)) As SlNo, 
  count(distinct(RepID))
from Reptable   
where Month(Date) = @Month
group by Datepart(week, Date) 
```

# ruby-on-rails-3 - Rails 启动性能：如何跟踪和调试

> ID：12923373
> 
> 赞同：0
> 
> 时间：2012-10-16T21:02:48.290
> 
> 标签：ruby-on-rails-3, performance, passenger

我们的 Rails 3.2.8 应用程序在重新启动后需要大约 30 秒才能加载，而`rails console`. `m1.small`这是在具有 Ubuntu 11、64 位的 Amazon EC2实例上。服务器在负载下似乎非常合适（我们有几个）。仅在部署之后才有效发生的启动时间是一个问题。

有没有办法在 Rails 实例加载时获取加载内容的定时跟踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T02:38:14.913

`pry`您可以通过将和添加`pry-nav`到您的 Gemfile来获得一个很好的演练

```
# Gemfile
gem 'pry'
gem 'pry-nav' 
```

一旦这到位，您可以简单地添加`binding.pry`到早期加载的文件之一的顶部，例如`environment.rb`或`boot.rb`. （这假设您在 localhost:3000 上运行，否则事情会变得更加复杂。）重新启动您的应用程序，您应该进入一个 pry 会话。我们`next`将逐步检查您的应用在启动时遇到的每一行代码！`binding.pry`如果您想从一行跳转到另一行，您可以在整个代码中添加多行，只需键入`exit`以移动到下一行。

这不会对您的应用程序进行基准测试，但它可以让您逐步了解您的应用程序正在做什么，这本身可能会让您真正体验到花费这么长时间的事情。

# ios - 发疯 - 如何设置一个 fb 应用程序，以便我的 iOS 应用程序可以发布到它的墙上？

> ID：12923374
> 
> 赞同：0
> 
> 时间：2012-10-16T21:02:49.287
> 
> 标签：ios, facebook, post, facebook-wall

好的，我知道如何发布到用户的墙上（时间线？），效果很好。

我想要的是当用户在他的 iPhone 上做某些事情时，它应该作为一个帖子出现在 APP 的墙上。该帖子应以用户的名义。

就像是：

幸运的卢克 说：大家好

Zaphod Beeblebrox 开始使用 Awesomeapp

加：只有应用程序的用户应该能够发布到应用程序的墙上（我看到页面的«管理权限»部分的设置，我可以设置谁可以发布到墙上。我不希望每个人都发帖)

如果我是对的，该帖子也会自动出现在用户的提要中，不是吗？还是我必须在用户的墙上发第二个帖子？

当用户首次使用该应用程序时，我请求以下权限：@"user_photos",@"user_videos",@"manage_pages",@"read_stream",@"publish_stream",@"user_checkins",@"friends_checkins",@"电子邮件",@"user_location"

（最近我在某处读到时添加了 read_stream 和 manage_pages ——但没有帮助：）

这是我用来发帖的一段代码：

```
NSString *graphPath = [NSString stringWithFormat: @"/%@/feed?access_token=%@", FBAppID, [FBAccessToken stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]];
    NSLog(@"graph path %@", graphPath);
    NSDictionary *postParams =
    @{
        @"Test": @"message"
    };

    [FBRequestConnection
     startWithGraphPath:graphPath
     parameters:postParams
     HTTPMethod:@"POST"
     completionHandler:^(FBRequestConnection *connection,
                         id result,
                         NSError *error) {

         if (error) {
             NSLog(@"error: domain = %@, code = %d, %@",
                          error.domain, error.code, error.description);
         } else {
             NSLog(@"Posted action, id: %@",
                          [result objectForKey:@"id"]);
         }
         // Show the result in an alert
     }]; 
```

返回错误 100（缺少消息或附件 - OAuthException）

我现在用谷歌搜索了两天，找不到任何合适的指导方针......帮助！:)

[编辑]我可能正在做一些事情......

似乎`NSDictionary *postParams @{@"Test": @"message"};`是问题所在。当我使用正确`[[NSDictionary alloc] initWithObjectsAndKeys: ...];`时，它似乎工作......我们会看到:)

[编辑]好吧-我应该休息一下，看来...

使用 @{...} 初始化字典首先需要键，然后是对象，而 [NSDictionary dictionaryWithObjectsAndKeys:...] 首先设置对象，然后是键...

我现在觉得有点傻...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:36:07.010

这就是我在我的代码中这样做的方式：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"My app's name", @"name",
                               @"Some cool caption", @"caption",
                               @"Super description", @"description",
                               @"http://stackoverflow.com//", @"link",
                               nil];

[FBRequestConnection startWithGraphPath:@"me/feed"
                             parameters:params
                             HTTPMethod:@"POST"
                      completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

       .....
 }]; 
```

请注意`GraphPath`，它与您的略有不同。在我的`Info.plist`还有一个 facebookId 值：

```
<key>FacebookAppID</key>
<string>123456789876543</string> 
```

和 facebook url 方案：

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>fb123456789876543</string> (fb + your app id)
        </array>
    </dict>
</array> 
```

我已经`facebookSDK`添加到项目中（我想你已经这样做了）

所以这些东西至少足以让我贴到我的墙上

所以请看看你的`facebookAppID`，也许里面有东西，以防万一这是[官方的 facebook 教程](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)

# python - 为什么 RelatedManager.add() 不接受可迭代作为参数？

> ID：12923376
> 
> 赞同：1
> 
> 时间：2012-10-16T21:02:59.760
> 
> 标签：python, django, django-queryset

这个问题是关于[RelatedManager.add()](https://docs.djangoproject.com/en/1.4/ref/models/relations/#django.db.models.fields.related.RelatedManager.add)的，它用于将模型对象实例添加到多对一或多对多关系。为了说明我的问题，假设我有以下两个模型：

```
class Book(models.Model):
    title = models.CharField()

class Author(models.Model):
    name = models.CharField()
    books = models.ManyToManyField(Book) 
```

现在，对于每个对象，`Author`我都有一个`Book`要添加到关系中的对象列表。目前，我正在这样做：

```
book_objects = [
    <Book: Harry Potter and the Philosopher's Stone>, 
    <Book: Harry Potter and the Chamber of Secrets>,
    <Book: Harry Potter and the Prisoner of Azkaban>
]

jk_rowling = Author.objects.get(name='J. K. Rowling')

for book in book_objects:
    jk_rowling.books.add(book)
jk_rowling.save() 
```

但是，这不是很有效，因为我必须处理要添加到此类关系中的数千个对象，并且需要很长时间。相反，Django 文档[建议](https://docs.djangoproject.com/en/1.4/topics/db/optimization/#insert-in-bulk)`add()`使用多个模型对象作为参数进行调用。也就是说，我必须这样做：

```
jk_rowling.books.add(book1, book2, book3) 
```

但我不能这样做，因为我事先不知道添加到关系中的对象数量。我不明白为什么我不能执行以下操作：

```
jk_rowling.books.add(book_objects) 
```

为什么不`add()`接受可迭代作为参数？`add()`以及如何比单独调用每个对象更有效地将大量对象添加到这样的关系中？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T21:27:21.920

您可以将数组扩展为可变参数：

```
book_objects = [
    <Book: Harry Potter and the Philosopher's Stone>, 
    <Book: Harry Potter and the Chamber of Secrets>,
    <Book: Harry Potter and the Prisoner of Azkaban>
]

jk_rowling = Author.objects.get(name='J. K. Rowling')

jk_rowling.books.add(*book_objects)   # <---------------

jk_rowling.save() 
```

# cakephp - CakePHP 上传插件 - 行为设置

> ID：12923377
> 
> 赞同：3
> 
> 时间：2012-10-16T21:03:12.033
> 
> 标签：cakephp, amazon-s3, uploader

我正在使用这个插件：[MileJ CakePHP Uploader](http://milesj.me/code/cakephp/uploader)，它工作得非常好，但是我只能让它通过控制器工作，而不是作为我需要工作的模型中的一种行为，所以我可以使用该功能将文件传递到亚马逊s3。

我的代码如下，谁能看到我哪里出错了？目前数据库记录已生成，但仅与我在表单上的其他字段（标题，card_id，user_id）无关，但与文件无关。该文件也没有上传。

**模型：DataFile.php**

```
public $actsAs = array(
    'Uploader.FileValidation' => array(
        'file1' => array(
            'required' => true
        ),
        'file2' => array(
            'required' => false
        ),
        'file3' => array(
            'required' => true
        )
    ),
    'Uploader.Attachment' => array(
        'file' => array(
            'name' => '',
            'uploadDir' => 'files/data_files/',
            'dbColumn' => 'path',
            'maxNameLength' => 30,
            'overwrite' => true,
            'stopSave' => false,
            's3'        => array(
                                'accessKey' => 'MYACCESSKEY',
                                'secretKey' => 'MYSECRETKEY',
                                'ssl' => true,
                                'bucket' => 'testfilespath',
                                'path' => '/'
                            ),                  // Array of Amazon S3 settings              
            'metaColumns' => array(
                    'ext' => 'extension',
                    'size' => 'bytesize',
                    'group' => 'group',
                    'width' => 'width',
                    'height' => 'height',
                    'filesize' => 'filesize'
            )
        )
    )
); 
```

**控制器：DataFileController.php**

```
// ADD BY BEHAVIOUR NEW FILE(S) - NOT WORKING
// ---------------------------------------------------------->
function add_behavior() 
{
    if (!empty($this->request->data)) 
    {

        if ($this->DataFile->save($this->request->data)) 
        {
            debug($this->request->data);

            $this->Session->setFlash(__('The File has been uploaded');
            $this->redirect(array('action' => 'index'));
        } 
        else 
        {
            $this->Session->setFlash(__('The DataFile could not be saved. Please, try again.'));
        }
    }
} 
```

**查看：add_behavior.ctp**

```
<?php echo $this->Form->create('DataFile', array('type' => 'file')); ?>
    <?php
    echo $this->Form->input('user_id', array('value' => $this->Session->read("Auth.User.id"),  'type' => 'text'));
    echo $this->Form->input('card_id', array('value' => '1',  'type' => 'text'));
    echo $this->Form->input('caption', array('label' => 'File Title'));
    echo $this->Form->input('file1', array('type' => 'file', 'label' => 'File'));
    ?>
    <?php echo $this->Form->end(__('Upload'));?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:07:02.380

```
Uploader.Attachment => array(
        'file1' => array(...),
        'file2' => array(...),
        'file3' => array(...),
); 
```

使用该行为时，您必须在`Uploader.Attachment`数组中指定文件字段的名称。

你的表单域被调用`file1`，行为当前正在寻找`file`。

# php - 提交不正确的验证码时 reCaptcha 验证用户

> ID：12923381
> 
> 赞同：0
> 
> 时间：2012-10-16T21:03:26.493
> 
> 标签：php, codeigniter, recaptcha

我正在尝试为我的 Codeigniter 项目设置 reCaptcha。recaptchalib.php 文件保存在views 文件夹中。

我的注册视图页面包括以下内容：

```
<form method="post" action="cyoa/verify.php">
<?php
require_once('recaptchalib.php');
$publickey = "correct_public_key_inserted_here";
echo recaptcha_get_html($publickey);
?>
<input type="submit" />
</form> 
```

我的 cyoa 控制器包括以下验证功能：

```
public function verify()
{
    require_once('views/recaptchalib.php');
    $privatekey = "correct_private_key_inserted_here";
    $resp = recaptcha_check_answer ($privatekey,
                                $_SERVER["REMOTE_ADDR"],
                                $_POST["recaptcha_challenge_field"],
                                $_POST["recaptcha_response_field"]);

    if (!$resp->is_valid) {
    // What happens when the CAPTCHA was entered incorrectly
    die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
         "(reCAPTCHA said: " . $resp->error . ")");
    } else {
        redirect('cyoa/index');
    // Your code here to handle a successful verification
    }
} 
```

我遇到的问题是页面总是重定向到 cyoa/index.html。我究竟做错了什么？

# ruby-on-rails - 您如何隔离 javascript 以及何时包含它，具体取决于您在 Ruby on Rails 中所在的页面？

> ID：12923386
> 
> 赞同：0
> 
> 时间：2012-10-16T21:03:50.307
> 
> 标签：ruby-on-rails

我有将在我的 application.js 中运行 onload 的 javascript，但是我可以将其隔离为仅在某个页面上运行而不将其内联在页面本身上吗？如果可能的话，我不希望它在每个页面上运行。
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:40:06.823

基本上有两种方法：

1.）使用 content_for 根据您所在的页面呈现特定的 js。这不会内联呈现，而是会根据需要与您的其余 js 一起呈现。有关此检查的更多信息，请查看[在 Rails 3 应用程序中添加页面特定 javascript 的最佳方法？](https://stackoverflow.com/questions/3437585/best-way-to-add-page-specific-javascript-in-a-rails-3-app)

2.) 添加一个带有类或 id 的包装器 div 或直接在主体上执行此操作。然后，您可以正确地确定所有 js 的范围。IE

```
$(document).ready(function() { 
    if ($('body').hasClass('my_page')) {
        //do the stuff you want
    }
}); 
```

# matlab - Matlab 函数生成带有误差线的 x 和 y 的最佳拟合线（r2 和 m）

> ID：12923388
> 
> 赞同：0
> 
> 时间：2012-10-16T21:04:05.953
> 
> 标签：matlab, linear-regression

有谁知道接受 csv 数据（对于列：x、x_err、y、y_err）、执行最佳拟合线性回归并生成 r2 和 m 的 MATLAB 函数？这里的一个关键是它除了数据之外还接受数据错误。

[http://en.wikipedia.org/wiki/Total_least_squares](http://en.wikipedia.org/wiki/Total_least_squares)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:22:00.400

这里有 2 个单独的问题。

要读取文件，请使用函数[csvead](http://www.mathworks.com/help/matlab/ref/csvread.html;jsessionid=b73edf729ec683a552c0621041f3)。为了拟合线并提取`R^2`信息，请使用[polyfit](http://www.mathworks.com/help/matlab/ref/polyfit.html)。

# python - 服务器的时区

> ID：12923402
> 
> 赞同：0
> 
> 时间：2012-10-16T21:04:56.017
> 
> 标签：python, django, timezone

我正在构建一个应用程序，客户端应该传递一个日期时间字段来查询数据库。但是客户端将在不同的时区，那么如何解决这个问题。我是否应该指出客户端的时区对于每个用户或每个用户的服务器都被用作默认时区。如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:07:15.677

通常，服务器设置为 UTC 运行，没有夏令时等，每个用户的设置都包含他们喜欢的时区。然后你做时差计算。您的数据库可能具有该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:11:14.137

只需使用[django 时区](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/)功能来获取用户的时区并将其转换为您的本地时区以进行 db-query。

# javascript - Facebook OAuth 编程，试图让用户进行身份验证

> ID：12923403
> 
> 赞同：0
> 
> 时间：2012-10-16T21:04:58.217
> 
> 标签：javascript, facebook, oauth

我正在尝试做本教程[https://developers.facebook.com/docs/howtos/login/getting-started/](https://developers.facebook.com/docs/howtos/login/getting-started/)

我已经完成了本教程所提供的一切必要（我认为）。它的目标是让您的网页使用 OAuth 验证用户的 Facebook 信息。

我的HTML代码如下...

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
function main(){ // runs all the other methods when needed, and maintains the proper path from making the form to posting to Facebook
    var imageURL = getImageURL();
    $("img[src='" + imageURL + "']").after("</br><form><input type=\"checkbox\" name=\"geo\" value=\"geolocation\"><b>Use Geolocation?</b> </br> <b>Additional Information About the Image: </b> <input type=\"comment\" name=\"cmnt\"></form>");
    alert("Form should have been placed.");
}

function getImageURL(){
    var url = "http://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Solid_black.svg/200px-Solid_black.svg.png";
    return url;
}

function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // connected
            testAPI();
        } else {
            // cancelled
        }
    });
}

function testAPI() {
    alert('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
        alert('Good to see you, ' + response.name + '.');
    });
}
</script>
</head>
<body onload="main()">
    <div id="fb-root"></div>
    <script>
  //-----------------------------
  // This is an initilization script created by Facebook. 
  //-----------------------------
  // Additional JS functions here
  window.fbAsyncInit = function() {
FB.init({
  appId      : 'hiddenappid', // App ID
  channelUrl : 'hiddenwebpage', // Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
});

    // Additional init code here
    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            // connected
        } else if (response.status === 'not_authorized') {
            // not_authorized
            login();
        } else {
            // not_logged_in
            login();
        }
    });
   };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>

<b> Page </b>
<img src="http://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Solid_black.svg/200px-Solid_black.svg.png">

</body>
</html> 
```

这是一些代码，但主要是教程中的所有代码。你基本上可以忽略其余的。

我只是想知道如何使此身份验证脚本运行？当我启动页面时，什么也没有发生。

此外，我不是从实际网页运行它，我只是运行 html 文件。如果这可能会影响它，我也支持代理。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:13:19.150

该页面必须可公开访问，并且您在 Facebook 应用程序中定义的 URL 必须与正在访问的 url 匹配。前几天我的测试站点[http://omgtrolls.com也遇到了同样的设置](http://omgtrolls.com)

# android - 在以下代码运行时，GC 因 GC_CONCURRENT 而发疯

> ID：12923406
> 
> 赞同：3
> 
> 时间：2012-10-16T21:05:18.737
> 
> 标签：android, garbage-collection, android-listview, android-viewpager

我正在使用以下方法通过电话号码提取联系人姓名和缩略图。当它运行时，GC 会发疯。Methos 在实用程序类中，并从适配器调用以填充列表视图。列表有 20 多个项目/号码来查询联系人数据库。

我是 Java 和 Android 的新手，我似乎无法弄清楚哪里出了问题，或者如果没有问题，如何优化它。

主要问题是 listview 在 ViewPager 中，这使得水平滚动非常缓慢和生涩。

```
public static Contact getContact(Context ctx, String phoneNumber)
{
    String contactName = "";
    Long contactId= 0L;
    Bitmap contactPhoto =null;
    ContentResolver localContentResolver = ctx.getContentResolver();
    Cursor contactLookupCursor =  
       localContentResolver.query(
                Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, 
                Uri.encode(phoneNumber)), 
                new String[] {PhoneLookup.DISPLAY_NAME, BaseColumns._ID}, 
                null, 
                null, 
                null);
    try {
    while(contactLookupCursor.moveToNext()){
        contactName = contactLookupCursor.getString(contactLookupCursor.getColumnIndexOrThrow(PhoneLookup.DISPLAY_NAME));
        contactId = contactLookupCursor.getLong(contactLookupCursor.getColumnIndexOrThrow(BaseColumns._ID));
        Uri uri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, contactId);
        InputStream input = ContactsContract.Contacts.openContactPhotoInputStream(ctx.getContentResolver(), uri);
        contactPhoto = BitmapFactory.decodeStream(input);
        }
    }
    finally {
    contactLookupCursor.close();
    } 

    return new Contact(contactName,contactId,contactPhoto);
} 
```

这是来自 logcat 的示例

```
 10-16 22:05:39.745: D/dalvikvm(29171): GC_CO

NCURRENT freed 322K, 6% free 15200K/16071K, paused 1ms+11ms
10-16 22:05:40.005: D/dalvikvm(29171): GC_FOR_ALLOC freed 1428K, 12% free 14170K/16071K, paused 15ms
10-16 22:05:40.080: D/dalvikvm(29171): GC_CONCURRENT freed 70K, 12% free 14303K/16071K, paused 1ms+8ms
10-16 22:05:40.230: D/dalvikvm(29171): GC_CONCURRENT freed 305K, 10% free 14476K/16071K, paused 2ms+1ms
10-16 22:05:40.315: D/dalvikvm(29171): GC_EXPLICIT freed 169K, 11% free 14348K/16071K, paused 4ms+12ms
10-16 22:05:40.660: D/dalvikvm(29171): GC_CONCURRENT freed 329K, 10% free 14495K/16071K, paused 1ms+3ms
10-16 22:05:40.850: D/dalvikvm(29171): GC_CONCURRENT freed 543K, 11% free 14416K/16071K, paused 1ms+1ms
10-16 22:05:40.980: D/dalvikvm(29171): GC_CONCURRENT freed 380K, 10% free 14497K/16071K, paused 1ms+4ms
10-16 22:05:41.135: D/dalvikvm(29171): GC_CONCURRENT freed 521K, 11% free 14440K/16071K, paused 2ms+2ms
10-16 22:05:41.375: D/dalvikvm(29171): GC_CONCURRENT freed 406K, 11% free 14444K/16071K, paused 1ms+2ms
10-16 22:05:41.470: D/dalvikvm(29171): GC_CONCURRENT freed 270K, 10% free 14583K/16071K, paused 2ms+2ms
10-16 22:05:41.680: D/dalvikvm(29171): GC_CONCURRENT freed 290K, 9% free 14774K/16071K, paused 2ms+4ms
10-16 22:05:41.760: D/dalvikvm(29171): GC_EXPLICIT freed 98K, 9% free 14749K/16071K, paused 3ms+2ms
10-16 22:05:41.900: D/dalvikvm(29171): GC_CONCURRENT freed 199K, 7% free 14973K/16071K, paused 1ms+3ms
10-16 22:05:42.070: D/dalvikvm(29171): GC_CONCURRENT freed 277K, 7% free 15086K/16071K, paused 1ms+3ms
10-16 22:05:42.335: D/dalvikvm(29171): GC_CONCURRENT freed 416K, 6% free 15158K/16071K, paused 1ms+3ms
10-16 22:05:42.430: D/dalvikvm(29171): GC_CONCURRENT freed 1235K, 11% free 14315K/16071K, paused 1ms+2ms
10-16 22:05:42.525: D/dalvikvm(29171): GC_CONCURRENT freed 452K, 11% free 14364K/16071K, paused 2ms+3ms
10-16 22:05:42.925: D/dalvikvm(29171): GC_CONCURRENT freed 371K, 11% free 14445K/16071K, paused 2ms+1ms
10-16 22:05:43.045: D/dalvikvm(29171): GC_CONCURRENT freed 495K, 11% free 14335K/16071K, paused 2ms+2ms
10-16 22:05:43.190: D/dalvikvm(29171): GC_CONCURRENT freed 295K, 11% free 14431K/16071K, paused 2ms+3ms
10-16 22:05:43.315: D/dalvikvm(29171): GC_EXPLICIT freed 236K, 11% free 14329K/16071K, paused 2ms+3ms
10-16 22:05:43.575: D/dalvikvm(29171): GC_CONCURRENT freed 316K, 11% free 14436K/16071K, paused 1ms+1ms
10-16 22:05:43.660: D/dalvikvm(29171): GC_CONCURRENT freed 281K, 10% free 14585K/16071K, paused 1ms+2ms
10-16 22:05:43.905: D/dalvikvm(29171): GC_CONCURRENT freed 309K, 9% free 14754K/16071K, paused 2ms+3ms
10-16 22:05:44.070: D/dalvikvm(29171): GC_CONCURRENT freed 270K, 7% free 14968K/16071K, paused 2ms+2ms
10-16 22:05:44.300: D/dalvikvm(29171): GC_CONCURRENT freed 265K, 7% free 15103K/16071K, paused 1ms+4ms
10-16 22:05:44.495: D/dalvikvm(29171): GC_CONCURRENT freed 400K, 6% free 15176K/16071K, paused 2ms+5ms
10-16 22:05:44.695: D/dalvikvm(29171): GC_CONCURRENT freed 447K, 6% free 15137K/16071K, paused 3ms+6ms
10-16 22:05:44.780: D/dalvikvm(29171): GC_EXPLICIT freed 354K, 7% free 15037K/16071K, paused 2ms+3ms
10-16 22:05:45.075: D/dalvikvm(29171): GC_CONCURRENT freed 422K, 7% free 15104K/16071K, paused 1ms+2ms
10-16 22:05:45.140: D/AbsListView(29171): Get MotionRecognitionManager
10-16 22:05:45.340: D/dalvikvm(29171): GC_CONCURRENT freed 293K, 6% free 15252K/16071K, paused 2ms+6ms
10-16 22:05:45.340: D/AbsListView(29171): [unregisterDoubleTapMotionListener]
10-16 22:05:45.340: I/MotionRecognitionManager(29171):   .unregisterListener : / listener count = 0->0, listener=android.widget.AbsListView$4@41a600c8
10-16 22:05:45.530: D/dalvikvm(29171): GC_CONCURRENT freed 849K, 8% free 14799K/16071K, paused 2ms+7ms
10-16 22:05:45.720: D/dalvikvm(29171): GC_CONCURRENT freed 394K, 8% free 14908K/16071K, paused 3ms+5ms
10-16 22:05:45.940: D/dalvikvm(29171): GC_CONCURRENT freed 452K, 8% free 14845K/16071K, paused 2ms+3ms
10-16 22:05:46.085: D/dalvikvm(29171): GC_CONCURRENT freed 374K, 8% free 14917K/16071K, paused 1ms+3ms
10-16 22:05:46.335: D/dalvikvm(29171): GC_CONCURRENT freed 457K, 8% free 14892K/16071K, paused 1ms+2ms
10-16 22:05:46.390: D/dalvikvm(29171): GC_EXPLICIT freed 148K, 8% free 14870K/16071K, paused 1ms+3ms
10-16 22:05:46.550: D/dalvikvm(29171): GC_CONCURRENT freed 415K, 8% free 14844K/16071K, paused 2ms+4ms
10-16 22:05:46.680: D/dalvikvm(29171): GC_CONCURRENT freed 223K, 7% free 15046K/16071K, paused 2ms+3ms
10-16 22:05:46.825: D/AbsListView(29171): Get MotionRecognitionManager
10-16 22:05:46.965: D/dalvikvm(29171): GC_CONCURRENT freed 346K, 6% free 15124K/16071K, paused 1ms+3ms
10-16 22:05:46.965: D/AbsListView(29171): [unregisterDoubleTapMotionListener]
10-16 22:05:46.965: I/MotionRecognitionManager(29171):   .unregisterListener : / listener count = 0->0, listener=android.widget.AbsListView$4@41a49d90
10-16 22:05:47.095: D/dalvikvm(29171): GC_CONCURRENT freed 755K, 9% free 14758K/16071K, paused 2ms+5ms
10-16 22:05:47.375: D/dalvikvm(29171): GC_CONCURRENT freed 416K, 8% free 14835K/16071K, paused 2ms+5ms
10-16 22:05:47.565: D/dalvikvm(29171): GC_CONCURRENT freed 415K, 8% free 14888K/16071K, paused 2ms+5ms
10-16 22:05:47.975: D/dalvikvm(29171): GC_CONCURRENT freed 475K, 8% free 14814K/16071K, paused 2ms+3ms
10-16 22:05:48.105: D/dalvikvm(29171): GC_CONCURRENT freed 411K, 8% free 14867K/16071K, paused 2ms+3ms
10-16 22:05:48.155: D/dalvikvm(29171): GC_EXPLICIT freed 114K, 9% free 14760K/16071K, paused 2ms+4ms
10-16 22:05:48.280: D/dalvikvm(29171): GC_CONCURRENT freed 284K, 8% free 14902K/16071K, paused 1ms+3ms
10-16 22:05:48.435: D/dalvikvm(29171): GC_CONCURRENT freed 332K, 7% free 15000K/16071K, paused 3ms+4ms
10-16 22:05:48.655: D/dalvikvm(29171): GC_CONCURRENT freed 415K, 7% free 14985K/16071K, paused 1ms+2ms
10-16 22:05:48.805: D/dalvikvm(29171): GC_CONCURRENT freed 451K, 7% free 15002K/16071K, paused 3ms+5ms
10-16 22:05:49.150: D/dalvikvm(29171): GC_CONCURRENT freed 417K, 7% free 14985K/16071K, paused 1ms+2ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:16:07.727

您正在迭代整个结果集，为所有缩略图创建位图，然后将所有这些结果扔掉，除了最后一个。如果您只想要最后一个，只需处理最后一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T21:13:09.580

一种选择是在 Activity 启动时进行光标查找并将缩略图和电话号码保存到一个对象中，然后在缓存中保存这些对象的列表。

然后，当您显示 ListView 时，您可以从本地缓存中读取，而不是每次都为每个项目进行数据库查找。

* * *

另外，创建一个返回所有联系人的查询，然后查询此游标结果以获取电话号码并因此查询该行不是更好吗？

# dns - DNS A 记录重定向是否会降低加载速度？（举例）

> ID：12923408
> 
> 赞同：0
> 
> 时间：2012-10-16T21:05:41.407
> 
> 标签：dns, webserver, zone

我有一个托管在我的服务器上的网站，尽管它的构建方式相同，但它的加载时间比我们的其他网站要长。为了进一步测试，我制作了网站的精确副本并将其放在子域中。

我注意到子域副本的加载速度每次都快 10%-70%。我能想到的唯一区别是实时站点的 DNS 指向其他地方，并且只使用 A 记录重定向到我们的服务器。

这是原因吗？如果是这样，有什么方法可以避免这种情况吗？

您可以在 whichloadsfaster.com 上查看该网站及其克隆并测试其速度

[http://tinyurl.com/9vmebl9](http://tinyurl.com/9vmebl9)与[http://tinyurl.com/8dg6evt](http://tinyurl.com/8dg6evt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:11:10.277

DNSrequest 的差异很小。每次从 0.1 秒变为 0.2 秒。

我检查了您的链接，现在我实际上可以看到差异。似乎子域加载速度更快。这可能是服务器配置问题。但是，缺少几个链接文件（内部和外部）（reset.css、uclass.css、body-bg.gif、museoslab-500-webfont.ttf 等），FB 链接的加载时间也非常不同。

我还注意到 /british-columbia/ 的 HTTP GET 在子域上为 23.7 KB，但在主域上为 23.9 KB（我没有检查原因，但文件似乎不同？）

我在优化速度方面的一些技巧是：

*   使用 gzip 压缩
*   对不同的内容使用巧妙的缓存
*   在之前放尽可能多的javascript`</body>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:17:56.127

加载时间仅受极端级别的 DNS 解析影响。这似乎不是你的情况。

这更有可能是您主机上的配置问题，以及流量如何在 Web 服务器的网络中被引导。

# git - Git 从现有的远程源创建

> ID：12923414
> 
> 赞同：1
> 
> 时间：2012-10-16T21:06:38.630
> 
> 标签：git

这可能很简单，但我刚刚开始使用 git。

我已经将它安装在我的服务器和 PC 上。

服务器已经有一个正常运行的网站，但我想将其用作主存储库并将其分支到我的本地计算机。这是我到目前为止在服务器上所做的：

```
> cd /path/to/website/
> git init
> git add . 
```

在我的开发机器上，我尝试了这个：

```
> git init
> git pull ssh://user@server/path/to/website 
```

但这给了我错误“找不到远程参考头”

我确定我遗漏了一些非常简单的东西，但我不确定如何设置它以使用现有的文件夹结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:08:21.577

你实际上并没有提交任何东西。在服务器上，尝试`git commit`.

# gridview - 如何处理 Yii CGridView 中的选定行？

> ID：12923415
> 
> 赞同：2
> 
> 时间：2012-10-16T21:06:41.477
> 
> 标签：gridview, checkbox, yii

我有一个带有 CCheckBoxColumn 和 selectableRows = 2 的 CGridView。用户可以选择我的网格视图的多行。

网格视图用于未批准的评论列表，我希望能够选择要批准的评论，点击“批准”按钮并为每个已批准的评论更新评论表中的字段。

我怎样才能做到这一点？

我对 ajax 解决方案持开放态度，但我真正想知道的是如何通过普通帖子获取控制器操作代码中的评论 ID 列表。我更喜欢不涉及 javascript 的解决方案，除非这是唯一的选择。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T07:36:23.487

我能够在不依赖 javascript 的情况下完成这项工作。步骤如下：

***将表单添加到您的视图文件***

这将允许将作为 html 输入元素的复选框值发布到您的控制器。

```
<?php echo CHtml::beginForm(); ?>

<?php $this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'=>$dataProvider,
    'selectableRows' => 2,
    'columns' => array(
        array(
            'id' => 'selectedIds',
            'class' => 'CCheckBoxColumn'
        ),
        'id',
        'username',
        'content',
        array(
            'name' => 'created',
            'value' => '$data->created'
        ),
    ), 
));
?>

<div>
<?php echo CHtml::submitButton('Approve', array('name' => 'ApproveButton')); ?>
<?php echo CHtml::submitButton('Delete', 
array('name' => 'DeleteButton',
'confirm' => 'Are you sure you want to permanently delete these comments?'));
?>
</div>

<?php echo CHtml::endForm(); ?> 
```

请注意，通过将“名称”选项传递给 submitButton，它可以知道在控制器中单击了哪个按钮。

***给你的复选框列一个 id***

以前我有：

```
'columns' => array(
    array(
        'class' => 'CCheckBoxColumn'
    ), 
```

我将其更改为：

```
'columns' => array(
    array(
        'id' => 'selectedIds',
        'class' => 'CCheckBoxColumn'
    ), 
```

现在，您可以通过 将所选行作为数组引用`$_POST['selectedIds']`。默认情况下，`CCheckBoxColumn`将使用网格视图中模型项的主键（但您可以更改此设置），因此 selectedIds 将是所选主键的数组。

***修改控制器以处理选定的行***

```
public function actionApprove()
{
    if (isset($_POST['ApproveButton']))
    {
        if (isset($_POST['selectedIds']))
        {
            foreach ($_POST['selectedIds'] as $id)
            {
                $comment = $this->loadModel($id);
                $comment->is_published = 1;
                $comment->update(array('is_published'));
            }
        }
    }

    // similar code for delete button goes here

    $criteria = new CDbCriteria();
    $criteria->condition = 'is_published = 0';
    $criteria->order = 'created DESC';

    $dataProvider = new CActiveDataProvider('Comment');
    $dataProvider->criteria = $criteria;

    $this->render('approve', array(
        'dataProvider' => $dataProvider,
    ));
} 
```

我使用这篇 Yii wiki 文章来帮助我提出这个解决方案：[在管理面板中使用 CGridView](http://www.yiiframework.com/wiki/353/working-with-cgridview-in-admin-panel/)

不确定这是否是理想的方法，但它有效。我愿意接受改进或其他方法的建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T01:13:43.950

看看[文档](http://www.yiiframework.com/doc/api/1.1/CGridView#selectableRows-detail)：

*选定的行将有一个名为“selected”的 CSS 类。您也可以调用 JavaScript 函数 $.fn.yiiGridView.getSelection(containerID) 来检索所选行的键值。*

所以我想JS是你的唯一方法。

# asp.net - 重定向（？）从一个pdf，复制/粘贴到URL栏中，到一个完全不同的pdf？

> ID：12923421
> 
> 赞同：1
> 
> 时间：2012-10-16T21:07:04.467
> 
> 标签：asp.net, pdf, redirect

**简短版**：如果有人将 PDF URL 复制/粘贴到网络浏览器中（例如：[http](http://domain.com/pdfs/test.pdf) ://domain.com/pdfs/test.pdf ），有没有办法让它自动重定向到完全不同的 pdf在同一台服务器上（例如：[http](http://domain.com/pdfs/alt/difTest.pdf) ://domain.com/pdfs/alt/difTest.pdf ），最好没有他们甚至看到复制/粘贴的版本？这是一个 ASP.net 环境。谢谢。

**长版**：请原谅我，这可能是一个简单的解决方案，但我似乎无法确定一个。我认为这与 301 重定向有关（我对此一无所知），但据我所知，这一切都与 SEO 有关。我尝试使用 .htaccess ，但这是特定于 Linux 的。

我一直在为一个在 asp.net 环境中构建的医疗网站进行站点更新。我不太了解asp，而且我一直在做的大部分事情通常都是HTML。反正，因为这是一个医疗网站，事情要经过一定的渠道，审批过程需要时间，所以我保证，他们要求我做的就是需要做的，免得他们再受60天的限制审批流程，所以请不要问我为什么要这样做。在过去几天的阅读中，我遇到了可能是解决方案的许多不同变体，但通常相同问题的变体略有不同，但在不同的环境和不同的标准下。

从这里，参考简短版本。谢谢大家。我希望你能让我直截了当。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:31:04.440

您可以尝试在 Gloabal.asax 文件中添加此代码：

```
void Application_BeginRequest(object start, EventArgs e)
{
    if (Request.FilePath == "//pdfs/test.pdf")
    {
        Response.RedirectPermanent("~/pdfs/alt/difTest.pdf");
    }
} 
```

注意：如果您使用的是 4.0 之前的版本，您可能需要替换

`Response.RedirectPermanent("~/pdfs/alt/difTest.pdf");`

和

```
Response.StatusCode = 301;
Response.StatusDescription = "Moved Permanently";
Response.RedirectLocation = "~/pdfs/alt/difTest.pdf";
HttpContext.Current.ApplicationInstance.CompleteRequest(); 
```

# c# - 将数据访问层连接到 wcf 数据服务的问题

> ID：12923423
> 
> 赞同：1
> 
> 时间：2012-10-16T21:07:14.970
> 
> 标签：c#, wcf-data-services

我不确定如何表达这个问题，但我得到的错误是在尝试访问 Web 服务 api 的应用程序的数据访问层中。我收到的错误是`InvalidOperatioException`由用户代码处理的。

当我尝试加载应加载用户字符网格视图的页面时，会发生此错误。错误所在的 DAL 中的代码如下。

```
Public Function SelectAllCharactersByUserId(userId As Integer) As List(Of CharacterDto) Implements ICharacterDao.SelectCharactersByUserId
    Dim characterDtos As New List(Of CharacterDto)
    Using wcf As New PyritegoldWCF.ServiceClient()
        For Each wfcCharacter In wcf.SelectCharactersByUserId(userId)
            characterDtos.Add(FromWcfCharacter(wfcCharacter))
        Next
    End Using
    Return characterDtos
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:12:55.610

> 在 ServiceModel 客户端配置部分中找不到引用合同“PyritegoldWCF.IService”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。

例外情况是您的 app.config 缺少某些配置，您的应用配置中应该有一个部分，类似于[此处](http://msdn.microsoft.com/en-us/library/ms733932.aspx)显示的示例。

# c++ - 无法读取 MIDI 文件？【扩展规格？】

> ID：12923425
> 
> 赞同：4
> 
> 时间：2012-10-16T21:07:20.027
> 
> 标签：c++, binaryfiles, midi

我正在尝试读取 C++ 中的 midi 文件，但我遇到了一个错误，这似乎是标准 midi 规范中未定义的事件（从许多网站检索，包括： http: [//www.sonicspot.com/指南/midifiles.html](http://www.sonicspot.com/guide/midifiles.html) )

我在十六进制编辑器中打开了 midi 并查明了错误。它发生在第一个“注释”事件之前。该文件是使用 Sibelius 6 软件生成的，我想知道如果我在这里发布文件部分，有人会帮助我解决这个问题。

这是第 3 首曲目的开头：

```
4D 54 72 6B (MTrk magic number)
00 00 1F F5 (track size in bytes - 8181)
00 FF 03 04 (4 bytes follows) (track sequence name)
00 FF 04 0B (11 bytes follows) (instrument name)
00 C0 34 (program change event)
00 B0 79 00 (controller event)
00 5B <- (what the heck is that?!) 
```

它不能是增量滴答，因为第一个值是 00（没有 MSB 设置为 1），它也不是可识别的事件。10 个字节后，我识别出一个“注释”事件它是：

00 5B 30 00 40 00 00 07 64 00 0A 10 **00 90 3E 47** <- 注意

我不知道“注释”之前的那 12 个字节代表什么，因此无法读取文件。我知道第一个音符很长，也许这就是原因。我还注意到我找不到代表“条形”暂停的事件。也许这就是条形+长度的代码？我应该把它们读成蜱虫吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T21:54:58.443

MIDI 文件的一种复杂性是[运行状态](http://dogsbodynet.com/fileformats/midi.html#RUNSTATUS)。如果有相同类型和通道的消息序列（例如所有控制器或所有音符），则 MIDI 可以通过省略状态字节来节省一些字节。如果这不使用运行状态，那么您将看到的字节是：

```
00 B0 79 00 - controller 121: controller reset
00 B0 5B 00 - controller 91: reverb
00 B0 40 00 - controller 64: sustain
00 B0 07 64 - controller 7: volume
00 B0 0A 10 - controller 10: pan
00 90 3E 47 - note message 
```

因为所有的控制器消息都是连续的并且用于相同的通道，所以可以省略状态字节。一旦消息类型发生变化，就必须再次添加状态字节。

如果您试图理解 MIDI 文件，那么我建议在您无法理解 MIDI 事件时使用单独的工具（例如[Python-MIDI](https://github.com/vishnubob/python-midi)或[GNMidi ）作为完整性检查器。](http://www.gnmidi.com/)这些可以将其显示为文本，以便您可以模仿它在做什么。

编辑：另一个需要注意的问题是任何带有长度或持续时间参数的 MIDI 消息（例如 PPQN 中的 MIDI 文件中的事件之间的时间，或者 sysex 消息或元事件的长度）都使用可变长度，所以不要不要假设所有长度字段总是固定长度。

免责声明：我在 Sibelius 6 中编写了 MIDI 导出代码...

# url - Facebook 分享者从 HTML 元素的内容中获取标题

> ID：12923427
> 
> 赞同：0
> 
> 时间：2012-10-16T21:07:27.513
> 
> 标签：url, facebook-sharer, facebook-opengraph, hashbang

我正在开发一个带有多个 Facebook“分享”按钮的单页网站。主要网址是：

[http://wishdesign.nl/fora/fb.sharer.htm](http://wishdesign.nl/fora/fb.sharer.htm)（工作演示 URL）

Facebook 共享者 URL 将是：

[http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwishdesign.nl%2Ffora%2ffb.sharer.htm](http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwishdesign.nl%2Ffora%2ffb.sharer.htm)

单击最后一个链接，您将看到共享标题是在元标记中设置的 Open Graph 标题“测试标题”。到目前为止，一切都很好。

但是页面上的每个部分都有一个按钮，该按钮通过一个带有井号的 URL 共享该特定部分，如下所示：

[http://wishdesign.nl/fora/fb.sharer.htm#section-b](http://wishdesign.nl/fora/fb.sharer.htm#section-b)

Facebook 分享 URL 将变为：

[http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwishdesign.nl%2Ffora%2ffb.sharer.htm%23section-b](http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwishdesign.nl%2Ffora%2ffb.sharer.htm%23section-b)

添加“#section-b”有助于将访问者自动重定向到页面上的正确部分，但是...... **Facebook 也使用该部分的内容作为共享标题！**当该部分有相当多的内容时，标题会很长。

有什么办法可以影响这个吗？我在 ID 为“section-b”的 HTML 元素上尝试了设置标题、og:title 和 property:og:title 属性，但似乎不起作用。

有人有线索吗？提前致谢！

# java - 动态类声明和实例化？

> ID：12923428
> 
> 赞同：-1
> 
> 时间：2012-10-16T21:07:40.260
> 
> 标签：java, class, dynamic

java是否可以在运行时声明和实例化一个类？

我正在尝试以下代码：

```
 public static void t4() {
    Object o = new Object() {
        private String uid = "1";
        private String name = "2";

        public String getName() {
            return name;
        }

        public String getUid() {
            return uid;
        }

        public void setName(String name) {
            this.name = name;
        }

        public void setUid(String uid) {
            this.uid = uid;
        }

        @Override
        public String toString() {
            return uid + " " + name;
        }
    }; 
```

但是，我希望使用反射来实现这一点，因为我将从 xml 源将属性注入 pojo。

还有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:15:14.360

好吧，互联网上都有答案……给你一个

[“Class.forName()”和“Class.forName().newInstance()”有什么区别？](https://stackoverflow.com/questions/2092659/what-is-difference-between-class-forname-and-class-forname-newinstance)

上面帖子的答案演示了如何在运行时创建一个新实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:11:40.977

在某种程度上，可以使用 JDK6.0 的 Java Compiler API 从 String 对象（保存代码）动态编译类。

[http://www.java2s.com/Code/Java/JDK-6/CompilingfromMemory.htm](http://www.java2s.com/Code/Java/JDK-6/CompilingfromMemory.htm)参考这里。

该代码还向您展示了如何从类文件（使用 Class.forName()）方法动态实例化“新编译的”类。

# scala - scala中元组的简单并行评估？

> ID：12923429
> 
> 赞同：5
> 
> 时间：2012-10-16T21:07:42.530
> 
> 标签：scala, concurrency, parallel-processing

如果两个表达式 e1 和 e2 只处理不可变的数据结构，那么并行计算元组 (e1, e2) 应该非常简单，只需在不同的处理器上计算这两个表达式，不要担心任何交互，因为应该不是。

Scala 有很多不可变的数据结构，所以我希望有一种超级简单（编写）的方式来并行评估该元组。就像是

`par_tuple : ( Unit -> T1) -> (Unit -> T2) -> (T1, t2)`

它并行评估两个函数并在两者都完成时返回。

不过，我还没有看到它。它存在吗？如果不是，你会怎么写？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T21:23:21.567

这取决于被评估的表达式的**成本。**在当前的架构上，两个表达式涉及几条到几十条甚至数百条指令，无法有效地并行计算。因此，您应该始终确保您正在执行的工作量不会被并行化本身的成本所掩盖。

考虑到这个免责声明，在 Scala 2.10 中，您可以使用`Future`s 来完成此操作：

```
val f = future { e1 }
val g = future { e2 }
(Await.result(f), Await.result(g)) 
```

请注意，不鼓励这种类型的计算（上面故意过于冗长！），因为它涉及阻塞，并且在没有有效延续概念的 JVM 等平台上阻塞通常代价高昂（尽管在它的适用范围超出了这个答案的范围，可能也超出了这个回答者的范围）。在大多数情况下，您应该在 future 上安装一个回调，一旦它的值可用，就会调用它。你可以这样做：

```
val h = for {
  x <- f
  y <- g
} yield (x, y) 
```

上面是`h`一个新的未来，一旦两者都可用，它将包含一个值元组。

您可以将函数重写`par_tuple`为：

```
def par_tuple[E1, E2](e1: =>E1, e2: =>E2): Future[(E1, E2)] = {
  val f = future { e1 }
  val g = future { e2 }
  val h: Future[(E1, E2)] = for {
    x <- f
    y <- g
  } yield (x, y)
  h
} 
```

这个方法返回一个`Future`你想要的元组——一个最终将用你的表达式保存元组的对象。你可以用其他计算进一步组合这个未来，或者如果你确定要阻止，你可以有另一个变体：

```
def par_tuple_blocking[E1, E2](e1: =>E1, e2: =>E2): (E1, E2) = Await.result(par_tuple(e1, e2)) 
```

在元组将来可用之前阻塞。

在此处查看[有关期货、回调和阻塞的更多信息](http://docs.scala-lang.org/overviews/core/futures.html)。

# dynamics-crm - 在 CRM 2011 中保存实体时添加自定义值

> ID：12923434
> 
> 赞同：2
> 
> 时间：2012-10-16T21:08:06.690
> 
> 标签：dynamics-crm, dynamics-crm-2011

来自[关于 JS Xrm 对象的 MSDN 文章](http://msdn.microsoft.com/en-us/library/gg334720.aspx#BKMK_getDataXml)

```
getDataXml

Returns a string representing the XML that will be sent to the server when the record is saved. 
Only data in fields that have changed are sent to the server.

<account>
    <name>Contoso</name>
    <accountnumber>55555</accountnumber>
    <telephone2>425 555-1234</telephone2>
</account> 
```

有谁知道是否有等效的设置方法或任何模仿它的方法？我只是在试验，想知道是否有人尝试过类似的东西？

最终，我对动态地将信息传递给插件感兴趣。显然，一种方法是在表单上隐藏一个字段，并在何时填充它。很可能我必须这样做。但是，如果我可以将标志“foo”传递给插件，在那里检测它并根据它执行逻辑 A、B 或 C，而不依赖于具有标志字段的实体，那会容易得多。

我知道这不是*一个*典型的堆栈问题，所以我会理解投票结束！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:47:13.827

我不相信 Xrm 对象暴露了任何额外的功能，它只是显示表单上设置的内容以及保存消息将传递的内容。尽管在底层可能略有不同，但最终我认为这与 Create 服务调用没有什么不同。

正如您建议实现“将数据传递给插件”，您必须将其作为字段放在表单上。

我知道如何将数据传递给插件的唯一另一种方法是在事件执行管道上，但这需要另一个插件来添加信息，所以我认为这对你没有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T02:26:21.330

我还没有从 Javascript 和表单提交中研究它。但是对于我们使用组织 Web 服务的某些任务，我们会向插件读取的 Http 请求添加额外的标头（使用 WCF 客户端消息检查器）。

# html - CSS 悬停导航/大理石菜单

> ID：12923435
> 
> 赞同：0
> 
> 时间：2012-10-16T21:08:14.607
> 
> 标签：html, css, navigation, hover

我有一个垂直导航栏，它有按钮，当悬停在哪里时，我希望选项水平显示在该按钮旁边。

我有 HTML，我只是不确定如何使用 CSS 实现悬停效果。实现这一目标的最佳方法是什么？

HTML

```
<nav>
        <ul>
            <li><a href="index.php?page_id=7"><img src="<?php bloginfo('url'); ?>"><img src="<?php echo get_template_directory_uri(); ?>/img/about.png" alt="about ZOPA" /></a></li>
                <ul class="subs">
                    <li><a href="#">Realty</a></li>
                    <li><a href="#">RA</a></li>
                    <li><a href="#">WM + SB</a></li>
                    <li><a href="#">Vendors</a></li>
                </ul><!-- end subs -->
            <li><a href="index.php?page_id=16"><img src="<?php bloginfo('url'); ?>"><img src="<?php echo get_template_directory_uri(); ?>/img/blog.png" alt="ZOPA blog" /></a></li>
            <li><a href="index.php?page_id=13"><img src="<?php bloginfo('url'); ?>"><img src="<?php echo get_template_directory_uri(); ?>/img/share.png" alt="share with ZOPA" /></a></li>
            <li><a href="index.php?page_id=9"><img src="<?php bloginfo('url'); ?>"><img src="<?php echo get_template_directory_uri(); ?>/img/contact.png" alt="contact ZOPA" /></a></li>
            <li><a href="http://www.thezopateam.com/"><img src="<?php bloginfo('url'); ?>"><img src="<?php echo get_template_directory_uri(); ?>/img/properties.png" alt="ZOPA properties" /></a></li>
                <ul class="subs">
                    <li><a href="#">Buying</a></li>
                    <li><a href="#">Selling</a></li>
                </ul><!-- end subs -->
            <li><a href="index.php?page_id=11"><img src="<?php bloginfo('url'); ?>"><img src="<?php echo get_template_directory_uri(); ?>/img/gallery.png" alt="ZOPA gallery" /></a></li>
        </ul>
    </nav> 
```

更新的 CSS

```
nav li {
    width: 100px;
    margin: 1px;
    list-style-type: none;
}

nav > ul > li {
    position: relative; 
}

nav li ul {
    position: absolute;
    top: 0;
    left: 120px;
}

nav li ul li { 
    display: inline; 
}

nav li:not(:hover) ul { 
    display: none; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:17:00.627

这是一个子菜单的简单演示：http: [//jsbin.com/iyijed/1/edit](http://jsbin.com/iyijed/1/edit)

关键规则是`nav li:not(:hover) ul { display: none; }`- 这就是隐藏您的子菜单直到其父项悬停的原因。

如果您有（旧浏览器）问题`:not`，您可以简单地放在`display: none`子菜单上，然后用`nav li:hover ul { display: block; }`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:14:24.363

这样的事情应该让你接近：

```
nav > ul > li {
    position: relative;
}

nav > ul > li > ul.subs { 
    display:none;
    position:absolute;
    right: 5%;
}

nav > ul > li:hover > ul.subs {
    display:block;
} 
```

# c - strstr() 在 C 中是否有大小限制？

> ID：12923440
> 
> 赞同：0
> 
> 时间：2012-10-16T21:08:26.707
> 
> 标签：c

我`strstr()`用来比较 XML 响应与预期响应。在较短的测试中，这可以正常工作，但现在在较大的字符串上，我看到两个缓冲区彼此完全相等，但`strstr()`未能捕捉到它。

我失败的 XML 字符串响应大小为 502 字节，因此我希望`strstr()`在 502 字节字符串中找到 502 字节字符串的出现。

例子：

```
if( strstr(msgPointer, xmlcheckstring) )
{
    printf("Good response!\n");
}
else
{
    printf("Bad response :(\n");
} 
```

Where`msgPointer`指向我的接收缓冲区并`xmlcheckstring`包含一个要检查的常量字符串。同样，这适用于较小的测试（大小约为 200 字节）。

我只是好奇是否有人对此有任何经验。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:15:23.377

如果有限制，它不可能远低于 MAXINT

我猜测您正在从 TCP 流套接字读取的数据中搜索字符串？如果是这样，请注意`read()`返回的字节数可能少于您请求的字节数，并且您可能需要`read()`多次调用才能获取您正在寻找的整个 XML 消息......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:18:52.643

如果您想检查标准 C 函数的实现，[FreeBSD可能是一个有用的资源。](http://www.freebsd.org/)

他们的[strstr](http://svn.freebsd.org/base/user/eri/pf45/head/lib/libc/string/strstr.c)版本看起来与其他标准库实现非常相似，并确认没有任何限制会影响您正在处理的相对较小的字符串。

# asp.net - 如何检测一个人所处的时区？

> ID：12923441
> 
> 赞同：0
> 
> 时间：2012-10-16T21:08:28.107
> 
> 标签：asp.net, vb.net, visual-studio-2008, timezone, utc

> **可能重复：**
> [来自地理位置的时区](https://stackoverflow.com/questions/4669366/timezone-from-geolocation)

我有一个网站，人们基本上可以在那里登记。我按照他们签到的日期和时间来记录签到。好吧，我将日期/时间保存为 UTC 格式。

他们是否可以通过访问网站的位置来判断某人所在的时区？我想在某种程度上默认为时区。当用户创建配置文件时，他们可以设置时区。

我正在使用带有 VB.Net 的 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:37:43.803

我建议从他们的浏览器中获取时间/日期，然后将其与 GMT 进行比较。您甚至可以使用`getTimezoneOffset()`，它内置在`Date()`对象中。这是[DOCS](http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp)
如果差值为 180，则您知道它们与 GMT 相差三个时区。大多数旅行的人都有手机，可以自动调整到他们所在的时区。我很确定他们当前的时区是基于最近的手机信号塔。因此，如果这对您来说足够近，那么您不必担心获取他们的 GPS 位置以及随之而来的所有安全问题。

# python - 如何让程序打印一个数字在列表中出现的次数？

> ID：12923442
> 
> 赞同：0
> 
> 时间：2012-10-16T21:08:32.287
> 
> 标签：python, list, element

这是我所知道的，不知道我是否正确地做。

```
L = [4, 10, 4, 2, 9, 5, 4 ]

n = len(L)
element = ()

if element in L:
    print(element)

print("number occurs in list at the following position, if element not in list")
print("this number does not occur in the list") 
```

如何获取多次出现的元素以打印为

```
4 occurs in L at the following positions:  [0, 2, 6] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:23:30.713

强制性`defaultdict`职位：

```
from collections import defaultdict

el = [4, 10, 4, 2, 9, 5, 4 ]
dd = defaultdict(list)
for idx, val in enumerate(el):
    dd[val].append(idx)

for key, val in dd.iteritems():
    print '{} occurs in el at the following positions {}'.format(key, val)

#9 occurs in el at the following positions [4]
#10 occurs in el at the following positions [1]
#4 occurs in el at the following positions [0, 2, 6]
#2 occurs in el at the following positions [3]
#5 occurs in el at the following positions [5] 
```

然后`dd`就可以使用普通的字典...`dd[4]`或`dd.get(99, "didn't appear")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:11:48.730

您可以使用列表理解：

```
>>> L = [4, 10, 4, 2, 9, 5, 4]
>>> [i for i,x in enumerate(L) if x==4]
[0, 2, 6] 
```

`enumerate(L)`给你一个迭代器，它为 .的每个元素`L`生成一个元组。所以我在这里所做的是，如果值 ( ) 等于，则获取每个索引 ()，并从中构造一个列表。无需查看列表的长度。`(index, value)``L``i``x``4`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:16:16.760

您可以使用`Counter`计算列表中的不同元素，然后使用列表推导来查找每个元素的索引：-

```
>>> l = [4, 10, 4, 2, 9, 5, 4 ]
>>> from collections import Counter
>>> count = Counter(l)
>>> count
Counter({4: 3, 9: 1, 10: 1, 2: 1, 5: 1})

>>> lNew = [[(i,x) for i,x in enumerate(l) if x == cnt]  for cnt in count]
>>> 
>>> lNew[0]
[(4, 9)]
>>> lNew[1]
[(1, 10)]
>>> lNew[2]
[(0, 4), (2, 4), (6, 4)]
>>> 
```

其实这里不需要`Counter`。你可以下车`Set`

使用工厂函数创建一组列表： -`set(l)`然后你可以用它做同样的事情..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T21:18:51.407

```
def print_repeated_elements_positions(L):
    for e in set(L): # only cover distinct elements
        if L.count(e) > 1: #only those which appear more than once
            print(e, "occurs at", [i for i, e2 in enumerate(L) if e2 == e])

L = [4, 10, 4, 2, 9, 5, 4]
print_repeated_elements_positions(L)
# prints: 4 occurs at [0, 2, 6] 
```

# network-protocols - 计算停止等待协议中的利用率

> ID：12923445
> 
> 赞同：13
> 
> 时间：2012-10-16T21:08:45.240
> 
> 标签：network-protocols, transmission, utilization, network-utilization

我的书中有一个关于计算*利用率*的问题，但我无法找到有关该主题的任何实质性信息来解决它。

无论如何，这是一个问题：

> 从地球到遥远行星的距离约为 9 × 10^10 m。如果在 64 Mbps 点对点链路上使用停止等待协议进行帧传输，信道利用率是多少？假设帧大小为 32 KB，光速为 3 × 10^8 m/s。
> 
> 假设使用滑动窗口协议。对于多大的发送窗口，链接利用率为 100%？您可以忽略发送方和接收方的协议处理时间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T16:05:58.257

这是一个相当简单的问题。利用率是介质与“好”字节一起使用的部分时间，即有效负载字节（无标头或 ack/nack 帧）。

在您的问题中，没有指定标头并且没有给出 ACK 大小，因此我假设它们的大小都是 0。

### 对于 S&W 案例：

每个时期都是`Tx + propagation + ACK propagation = Tx + RTT`

```
Tx = 32KB/64Mbps = 0.004 seconds (assuming base 10 for kilo and mega)

RTT = 2 * (9*10^10m) / (3*10^8m/s) = 600 seconds

Utilization = 0.004 / (600 + 0.004) = 6.667x10^-6 = 6.667x10^-4 % 
```

这是非常糟糕的利用，因为介质很长并且有很多时间浪费在等待 ACK 上。

### 对于滑动窗口：

由于没有错误概率，我假设它为 0。要达到 100% 的利用率，您需要在等待 ACK 的同时继续传输数据包，这意味着在整个期间。

```
period = 600.004 seconds
1 Tx = 0.004 seconds 
```

对于不间断`Tx`，您需要`600.004/0.004`每个周期传输数据包，因此`150001`应该是您的窗口大小。

# c#-2.0 - 如何解决“队列句柄已过时，应关闭？”

> ID：12923447
> 
> 赞同：1
> 
> 时间：2012-10-16T21:08:56.810
> 
> 标签：c#-2.0, asp.net-3.5, windows-server-2003, message-queue, windows-messages

在 Windows Server 2003 上，我们使用以下批处理命令每周备份一次 Windows 消息队列中的消息 (http://technet.microsoft.com/en-us/library/cc773213%28v=ws.10%29.aspx) ：

```
cd "C:\backup"
echo y | del *.* /Q /s
echo y | mqbkup -b C:\backup 
```

我们有一个 C# ASP.NET 3.5 Web 应用程序在与此消息队列交互的同一台机器上运行。

备份运行后，当我们尝试从 Web 应用程序访问消息队列时，Web 应用程序。抛出以下错误（如果应用程序被重建，它会消失，如预期的那样）。我如何解决它？请帮忙。谢谢。

```
*Server Error in '/' Application.

The Queue manager service has been restarted. The queue handle is stale and should be closed.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Messaging.MessageQueueException: The Queue manager service has been restarted. The queue handle is stale and should be closed.

Source Error: Line 107: Message[] msgs = Global.getMessageQueue()[i].GetAllMessages();

Stack Trace: 
[MessageQueueException (0x80004005): The Queue manager service has been restarted. The queue handle is stale and should be closed.]
       System.Messaging.MessageEnumerator.get_Handle() +168
       System.Messaging.MessageEnumerator.MoveNext(TimeSpan timeout) +103
       System.Messaging.MessageEnumerator.MoveNext() +47
       System.Messaging.MessageQueue.GetAllMessages() +41
       engine.resultData.Page_Load(Object sender, EventArgs e) in C:\retentionSys_08\master\resultData.aspx.cs:107
       System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
       System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
       System.Web.UI.Control.OnLoad(EventArgs e) +99
       System.Web.UI.Control.LoadRecursive() +50
       System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +627

Version Information: Microsoft .NET Framework Version:2.0.50727.3053; ASP.NET Version:2.0.50727.4028* 
```

# sql - 如何获取 SQL Server 2008 数据库中不同记录的数量？

> ID：12923450
> 
> 赞同：0
> 
> 时间：2012-10-16T21:09:08.567
> 
> 标签：sql, sql-server, asp.net-mvc

我有一张有用户的桌子。每个用户都填写了一个国家行（没有国家的用户）。

如何获取拥有用户的国家/地区数量？

```
select distinct Country_CountryId 
from users 
```

这将返回一个包含所有不同国家的列表（他们来自国家表的 id）。但是，如何在不将所有条目都返回到我的 MVC 控制器然后将它们计算在内的情况下将它们加到一个 int 中。

我试过

```
select distinct count(Country_CountryId) 
from users 
```

但这并没有返回正确的答案。

示例：表有 4 个用户。

*   用户 1：英国
*   用户 2：英国
*   用户 3：美国
*   用户 4：西班牙

这将导致计算 3 个不同的国家/地区

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T21:10:17.263

试试这个：

```
select
    count( distinct Country_Country_Id ) 
from users 
```

该`COUNT(DISTINCT column_name)`函数返回指定列的不同值的数量

# glsl - GLSL制服的尺寸？

> ID：12923452
> 
> 赞同：2
> 
> 时间：2012-10-16T21:09:23.730
> 
> 标签：glsl, shader

我似乎不知道如何在 GLSL 中获取统一的大小（以标量（或字节）为单位）。

目前我在枚举所有着色器常量时调用 glGetActiveUniform，但它返回的 size 参数是数组大小，而不是变量大小。

是否有获取数据大小的功能？还是将 ConstantType 映射到其大小的函数？

为了完整起见，这是我的代码：

```
char ConstantName[ 128 ];
GLint ConstantArraySize;
GLenum ConstantType;
glGetActiveUniform( Program, ConstantIndex, 128, nullptr, &ConstantArraySize, &ConstantType, ConstantName ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:51:19.340

GLSL 中制服的大小仅在制服存储在制服块中时才相关。对于非块状制服，你不在乎；您上传它们`glUniform*`并让 OpenGL 处理任何转换。

对于统一块成员，每个基本类型的统一具有特定的字节大小。单个整数和浮点数的大小为 32 位。这些类型的向量是大小 * 组件的数量。矩阵更复杂；它们存储为列/行（您可以选择）向量。列/行之间的步幅是[您必须查询](http://www.opengl.org/wiki/Program_Introspection#Uniforms_and_blocks)的内容[`glGetActiveUniformsiv`](http://www.opengl.org/wiki/GLAPI/glGetActiveUniforms)（注意“s”）。

除非你当然使用 std140 布局，在这种情况下矩阵步幅总是 4 * 基本组件类型的数量。因此，在 std140 布局中`mat4x2`，存储的列优先的 a 表示`vec2`s 的 4 个列向量，但各个列向量之间的步幅是 4 * sizeof(float)，而不是 2 * sizeof(float)。所以有 2 个浮点数的填充。

简而言之，没有理由在意。如果是非块状制服，则尺寸无关紧要。如果它是统一的块统一，那么无论如何您都应该使用 std140 布局，因此可以先验地计算它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:18:44.903

据我所知，OpenGL 中所有数据类型的大小都是标准化的。浮点数和整数是 32 位，双精度数是 64。使用 提供给您的信息`glGetActiveUniform()`，您可以自己计算出统一变量的大小。拥有一个 GL 函数来为您执行此操作将是多余的。

# asp.net-mvc - 未找到 MVC 布局

> ID：12923456
> 
> 赞同：-1
> 
> 时间：2012-10-16T21:10:13.207
> 
> 标签：asp.net-mvc, asp.net-mvc-3, layout, razor, asp.net-mvc-routing

我有一个 MVC 3 应用程序，它有一个默认视图和一个第二个视图，我将其称为 SecondView。SecondView 有一个对应的控制器，SecondViewController。

SecondViewController.cs 包含两个过程：`Index()`和`LoadSecondView(id)`，都返回`View("SecondView")`。

SecondView.cshtml 包括：

```
@{
    ViewBag.Title = "SecondView";
    Layout = "~/Views/_MasterLayout.cshtml";
}

<h2>Second View</h2> 
```

如果我的主 index.cshtml 调用 window.open("SecondView")，那么页面会按预期加载，使用 Views/_MasterLayout.cshtml 中的布局。

但是，如果它调用 window.open("SecondView/LoadSecondView/id-parameter-string")，则 _MasterLayout 认为“当前目录”是 /SecondView/LoadSecondView 而不是 /，并且所有指向（例如）图像的链接现在指向错误的地方，所以整个布局被忽略。（如果 LoadSecondView 不带任何参数，并且调用 URL 只是“SecondView/LoadSecondView”，也会发生同样的事情。）

有没有办法在控制器中调用一个过程（“索引”除外），然后加载一个视图，该视图将在正确的位置进行布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:09:32.727

似乎您的问题是关于相对路径和绝对路径..

阅读[http://en.wikipedia.org/wiki/Path_%28computing%29](http://en.wikipedia.org/wiki/Path_%28computing%29)

您使用相对路径，这意味着相对于当前目录。

用于`/path`强制路径从根开始解析。从某种意义上说，这称为绝对路径，无论您从哪里开始，它总是指向相同的位置。

# java - 在网页上实现数学概念

> ID：12923460
> 
> 赞同：4
> 
> 时间：2012-10-16T21:10:43.707
> 
> 标签：java, html, math, web, statistics

我的任务是创建统计方法的在线（客户端）实现。例如，该方法在 R/SPLUS 中相对容易编程，但我知道要在网页和客户端中执行此操作，我最终将不得不自己编写一些统计概念，这很好。但是，我正在寻找有关在网页中处理以下任务的最实用语言的建议：

1.  接受用户的输入

2.  接受这个输入，并执行各种合理的高级数学计算（例如矩阵代数）

3.  将输出返回给用户

以我非常有限的知识，Java 小程序似乎是最明显的选择。但是，我的问题是，是否有任何其他方法可以在没有小程序的情况下实现此目标（即 javascript 就足够了），您对最强大/用户友好/适当的语言有何建议？主要目标是让尽可能广泛的受众能够访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:35:25.003

我建议首先研究 JavaScript，因为它在所有主要浏览器上都受支持并且不需要安装额外的插件，因此它似乎是您“尽可能广泛的受众”要求的理想选择。

至于支持高级数学计算，您可能希望找到一个好的库来使用。我不知道您的所有需求，但是对*JavaScript“矩阵代数”库*的简单搜索得出了[这个](http://sylvester.jcoglan.com/api/matrix.html)作为第一个结果，看起来很有希望。

如果您没有找到满足您所有需求的库，您可以自己构建您需要的数学函数。这可能听起来不祥，但请记住，所有高级函数都是由低级函数构建的，并且由于 JavaScript 是一种函数式语言，它非常适合构建这种类型的功能。但是，我不知道您的编程知识、您对项目的承诺程度或您需要的功能的复杂性。因此，如果这被证明是一项过于繁琐的任务，而 Java 可以很好地处理您需要的一切，那么 applet 是一个不错的第二选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:24:40.323

java applet 可能是*最简单*的方法。javascript 将为您带来更广泛的受众。

# sql-server - PERL with Win32:ODBC/DBI 可以很好地读取许多表，然后一个不返回任何内容

> ID：12923462
> 
> 赞同：2
> 
> 时间：2012-10-16T21:10:47.117
> 
> 标签：sql-server, perl, odbc

```
##Read table staStations
if ($mssqldb->Sql("SELECT stationID, security, dockingCostPerVolume, maxShipVolumeDockable, officeRentalCost, operationID, stationTypeID, corporationID, solarSystemID, constellationID, regionID, stationName, reprocessingEfficiency, reprocessingStationsTake, reprocessingHangarFlag
 FROM staStations")) {
    print "SQL Error: " . $mssqldb->Error() . "\n";
    $mssqldb->disconnect;
    exit;
}

# Read table staStations
$count = 0 ;

while ($mssqldb->FetchRow) {
    my ($stationID, $security, $dockingCostPerVolume, $maxShipVolumeDockable, $officeRentalCost, $operationID, $stationTypeID, $corporationID, $solarSystemID, $constellationID, $regionID, $stationName, $reprocessingEfficiency, $reprocessingStationsTake, $reprocessingHangarFlag) = $mssqldb->Data();  ### Get data values from the row
    $stationName =~ s/\'/\&apos;/g;
    $mysqlconnect->do("INSERT INTO staStations(stationID, security, dockingCostPerVolume, maxShipVolumeDockable, officeRentalCost, operationID, stationTypeID, corporationID, solarSystemID, constellationID, regionID, stationName, reprocessingEfficiency, reprocessingStationsTake, reprocessingHangarFlag)
    VALUES ('$stationID', '$security', '$dockingCostPerVolume', '$maxShipVolumeDockable', '$officeRentalCost', '$operationID', '$stationTypeID', '$corporationID', '$solarSystemID', '$constellationID', '$regionID', '$stationName', '$reprocessingEfficiency', '$reprocessingStationsTake', '$reprocessingHangarFlag') ;");
    $count = $count + 1 ;
    print $count . " Rows into staStations \n" ;

} 
```

第一部分工作正常

```
 if ($mssqldb->Sql("SELECT iconID, iconFile, description FROM eveIcons")) {
    print "SQL Error: " . $mssqldb->Error() . "\n";
    $mssqldb->disconnect;
    exit;
}

# write table eveIcons
foreach ($mssqldb->FetchRow()) {
    my ($iconID, $iconFile, $description) = $mssqldb->Data();  ### Get data values from the row
    $description =~ s/\'/\&apos;/g;
    #$iconFile  =~ s/\_/\&#95;/g;
    print "iconID: " . $iconID . "\n" ;
    print "file: " . $iconFile . "\n" ;
    print "desc: " . $description . "\n \n" ;
    $mysqlconnect->do("INSERT INTO eveIcons(`iconID`, `iconFile`, `description`)
    VALUES ('$iconID', '$iconFile', '$description') ;");
    $count = $count + 1 ;
    print $count . " Rows into eveIcons \n" ;
} 
```

找不到问题，但没有返回任何内容这读取没有数据..

它在我的 MySql 表的第一列中放置一个“0”

MSSQL 表中有 1689 条记录，我在做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:21:50.333

我在从 mssql 和 LongTruncOk 读取长数据列时遇到了麻烦，LongReadLen 解决了这些问题。

看来您在编写它们时遇到了麻烦。试着看看这篇文章：http: [//publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp ?topic=%2Fcom.ibm.db2.udb.apdv.sample.doc%2Fdoc% 2Fperl%2Fs-dtlob-pl.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=%2Fcom.ibm.db2.udb.apdv.sample.doc%2Fdoc%2Fperl%2Fs-dtlob-pl.htm)

有一些关于如何编写 blob 的示例。尝试将其应用于您的描述字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:37:21.840

我不太明白为什么，但是关于 MSSQL 服务器上的描述字段的某些内容试图分配大量内存，一旦我停止尝试复制该列，它就可以正常工作，

MSSQL 表上的更多信息数据类型设置为 VARCHAR(MAX)，尽管该列中的所有字段都没有超过 127 个字符

# php - 如何在 PHP 中使用 cURL 将缓冲区作为文件发布？

> ID：12923466
> 
> 赞同：0
> 
> 时间：2012-10-16T21:11:00.050
> 
> 标签：php, curl

我在 PHP 中使用 cURL。我需要发布缓冲区的内容，以便服务器将其视为文件上传。这是我试过的：

```
$post_data['Filename'] = "foo.wav";

$post_data['File'] =  $filedata;

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $myurl);

curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);

curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$response = curl_exec($ch);

curl_close($ch); 
```

这会将缓冲区内容作为普通表单字段而不是作为文件上传发送。上传文件的示例假定该文件尚未在内存中读取，并要求在文件路径前设置“@”。如何上传我的缓冲区，就好像它是一个文件一样，当然不将我的缓冲区写入磁盘？

# php - php if 语句在单个变量中/内部？

> ID：12923468
> 
> 赞同：1
> 
> 时间：2012-10-16T21:11:07.570
> 
> 标签：php, variables

我不确定这是否会起作用，或者如何使它起作用。

任何帮助都会非常感谢。

我需要把这个条件语句字符串变成一个变量吗？

我怎样才能做到这一点？

```
if ($address1) {
    echo $address1 . ', ';
}

if ($address2) {
    echo $address2 . ', ';
}

if ($address3) {
    echo $address3 . ', ';
}

if ($address4) {
    echo $address4 . ', ';
}

if ($townCity) {
    echo $townCity . ', ';
}

if ($county) {
    echo $county . ', ';
}

if ($postCode) {
    echo $postCode;
} 
```

所以基本上我需要在一个变量中使用它，而我在 if 语句中使用它的原因是因为这些变量中的一些可能不存在。

在每个变量之后，它都有一个逗号和空格。

如果我这样做...

```
$singleVar =    $address1 . ', ' . 
                $address2 . ', ' .
                $address3 . ', ' . 
                $address4 . ', ' . 
                $townCity . ', ' . 
                $county . ', ' . 
                $postCode; 
```

然后对于不存在的变量，将有额外的逗号和空格 - 不酷。

任何人都可以请建议。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T21:14:20.597

有很多方法可以做到这一点，但这是我会使用的：

```
$items = array(
    $address1,
    $address2,
    $address3,
    $address4,
    $townCity,
    $county,
    $postCode
);
echo implode(', ', array_filter($items)); 
```

`array_filter`删除“空”的，请参阅PHP 文档中的[转换为布尔值。](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)

`implode`通过作为第一个参数传递的字符串将数组项连接在一起，并确保输出末尾没有额外的`,`悬空。

如果您担心变量可能未定义，请改用以下内容：

```
$items = array();
$fields = array(
    'address1',
    'address2',
    'address3',
    'address4',
    'townCity',
    'county',
    'postCode'
);
foreach ($fields as $field)
{
    isset($$field) && $items[] = $$field;
}
echo implode(', ', $items); 
```

请记住，`isset`检查某物是否“设置”，而不是“空”。例如，具有空字符串或零的变量是“设置”，但不符合`if ($var)`条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:33:53.157

```
$address1 = 'foo';
$address3 = 'bar';
$postCode = 'baz';

$vars = array();
foreach (array('address1', 'address2', 'address3', 'address4', 'townCity', 'county', 'postCode') as $var)
{
    isset($$var) and $vars[] = $$var;
}
$single = implode(', ', $vars); 
```

测试[http://codepad.org/WwzRYvuO](http://codepad.org/WwzRYvuO)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:14:17.247

如果变量实际上不存在，则需要`isset`进行检查。如果它们确实存在但为空/null/false，您可以使用 Wesley Murch 的答案。

```
$singleVar = '';
$variables = array('address1','address2','address3',
                   'address4','townCity','county','postCode');

foreach($variables as $variable)
{
    if (isset($$variable))
      $singleVar .= ($$variable . ', ');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T21:17:17.187

您可以使用[变量 variables](http://php.net/manual/en/language.variables.variable.php)来做到这一点，如下所示：

```
$arr = array('address1','address2','address3','address4','townCity','county','postCode');
$singleVar = '';
foreach ($arr as $val) {
   if (isset($$val)) {
      $singleVar .= $$val . ', ';
   }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-16T21:14:46.657

```
$string='';
if($address1)
  $string.= $address1.',';
if(address2)
  $string.= $address2.',';
//...etc
echo $string; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-16T21:23:49.230

我将提出以下建议：

```
join(array_filter(array($a,$b,$c,$d,$e,$f)), ", "); 
```

等`$a`是你的变量。参看。[https://stackoverflow.com/a/2603047/1689451](https://stackoverflow.com/a/2603047/1689451)

# java - 从 ArrayList 中的对象编辑变量？

> ID：12923474
> 
> 赞同：3
> 
> 时间：2012-10-16T21:11:31.960
> 
> 标签：java

```
public void setPunt(int index){
    if(index >= 0 && index < PuntenLijst.size()){
        x = 3;
        y = 5;
    }
} 
```

我在名为 PuntenLijst 的数组列表中有一组对象实例。通过这种方法，我想使用 index 参数在 ArrayList 中定位对象，并将对象实例中定义的变量 x 和 y 设置为 3 和 5。

这就是我已经走了多远。有没有人可以帮助我？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T21:23:01.120

在您的对象中创建一个 setX 和 setY 方法。使用它们来更改值。

```
public void setPunt(int index){
if(index >= 0 && index < PuntenLijst.size()){
    PuntenLijst.get(index).setX(3);
    .... setY(5);
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:26:14.953

```
public void setPunt(int index){
if(index >= 0 && index < PuntenLijst.size()){

  (ClassOfObjects)PuntenLijst.get(index).x=3;
  (ClassOfObjects)PuntenLijst.get(index).y=5;

  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:19:43.510

询问`Punt`存储在给定索引处的列表：请参阅[http://docs.oracle.com/javase/6/docs/api/java/util/List.html#get%28int%29](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#get%28int%29)。

然后使用`Punt`类提供的方法来修改其内部状态。我的猜测是它有一个`setX()`和一个`setY()`方法（如果你需要改变它的坐标，它应该有这些方法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T21:20:18.543

你的意思是这样的吗？

```
ArrayList<Object> PuntenLijst= new ArrayList<>(); // your arrayList

public void setPunt(int index){
    if(index >= 0 && index < PuntenLijst.size()){
        Object myObj = PuntenLijst.get(index);
        myObj.setX(3);
        myObj.setY(5);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T21:20:23.393

查看 ArrayList 上的文档[http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)

在您的情况下，您需要执行以下操作：

```
 if(index >= 0 && index < puntenLijst.size()){
        puntenLijst.get(index).x = 3;
        puntenLijst.get(index).y = 5;
    } 
```

请注意以下更改： puntenLijst 不应大写。x 和 y 必须是公共变量才能像上面那样分配值。

# eclipse - 如何在 Eclipse 中从 windows 配置 map reduce 插件（Hadoop 安装在 Linux 服务器上）

> ID：12923477
> 
> 赞同：1
> 
> 时间：2012-10-16T21:11:38.417
> 
> 标签：eclipse, hadoop, mapreduce

我正在尝试从不属于 hadoop 集群的 Windows 机器连接到 hadoop 集群。基本上我们在 linux 服务器机器上安装了 hadoop。所以没有可用的 GUI。因此，出于这个原因，我们要做的是在 windows 机器上使用 hadoop eclipse 插件运行 eclipse.. 并尝试从 windows 机器上运行代码。

我无法弄清楚如何从这台 Windows 机器运行 map reduce 程序到 hadoop 主节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:38:35.357

*你可以通过安装* **Cygwin在 windows 中拥有 Map-Reduce 的开发环境**

* * *

* * *

您将需要：

1.  *赛格温*
2.  *配置 ssh 守护进程*
3.  *启动 SSH 守护进程*
4.  *设置授权密钥*
5.  *下载hadoop 0.19.1*

* * *

* * *

[欲了解更多详情，请通过此链接](http://v-lad.org/Tutorials/Hadoop/00%20-%20Intro.html)

# ios - 带有令人耳目一新的叠加层的天气应用

> ID：12923479
> 
> 赞同：9
> 
> 时间：2012-10-16T21:11:42.447
> 
> 标签：ios, ios5, ios6, mkoverlay

我打算复制下面的应用程序只是为了学习制作地理应用程序。如何在更新过程中快速生成无闪烁的高分辨率图像？我一直在努力更新我的叠加层。一旦我添加新的叠加层并删除现有的叠加层，我最初的问题就是闪烁。

如果您认为我的问题太简单，请不要生气。老实说，我想听听你的想法/意见。

[NOAA 高清雷达](https://itunes.apple.com/us/app/noaa-hi-def-radar/id458225159?mt=8)

![雷达热图截图](../Images/0121300194bdc78ba7870b644a92b779.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:39:08.897

您看过 Apple 的[HazardMap 示例代码](http://developer.apple.com/library/ios/#samplecode/HazardMap/Introduction/Intro.html)吗？

这可能是一个很好的起点。它基本上采用一些表示地震危险区的二进制数据，并用核心图形将它们绘制在地图上。最终结果看起来与您的屏幕截图相似，但并不那么流畅。总之这是一个很好的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:56:03.240

您可能会考虑查看 UIImageView 的动画图像。

如果这对您来说不够可定制，您可以实现一个定制的视图，覆盖 drawRect，并使用 CGContextDrawImage，将适合当前时间点的图像传递给它。

哦，你也可以考虑使用 UIImage 的[drawRect](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/instm/UIImage/drawInRect%3a)。

给猫剥皮的方法有很多:)。

# c# - c#数据转发器中的组合框绑定

> ID：12923481
> 
> 赞同：0
> 
> 时间：2012-10-16T21:11:48.543
> 
> 标签：c#, data-binding, combobox, datarepeater

如果有人可以向我建议如何将 Combobox 正确绑定到 Windows 窗体中的数据中继器，我将不胜感激。

我创建了一个带有数据转发器的 Windows 窗体。数据重复器包含一个文本框和一个组合框。我有一个数据集，其中包含一个包含 2 列的数据表，即“Value”和“OverflowBehaviour”。我将文本框绑定到“Value”，将组合框绑定到“OverflowBehaviour”。以下代码显示了创建数据集并将其绑定到文本框和组合框：

```
 private void Form1_Load(object sender, EventArgs e) 
    { 
        bindingsource = new BindingSource(); 
        ds = new DataSet("Preferences");

        DataTable table = new DataTable("Preference");

        table.Columns.Add("Value");

        table.Columns.Add("OverflowBehaviour");

        for (int i = 1; i <= 8; i++) 
        { 
            if (i < 5) 
                table.Rows.Add(i, ValueTypeAutoIncrementOverflowBehaviour.Exception); 
            else 
                table.Rows.Add(i, ValueTypeAutoIncrementOverflowBehaviour.Wrap); 
        }

        ds.Tables.Add(table);

        bindingsource.DataSource = ds; 
        bindingsource.DataMember = "Preference";          

        textBox1.DataBindings.Add(new Binding("Text", bindingsource, "Value", true, DataSourceUpdateMode.OnValidation)); 

        comboBox1.DataBindings.Add("SelectedItem", bindingsource, "OverflowBehaviour", false, DataSourceUpdateMode.OnValidation);

        dataRepeater.DataSource = bindingsource;            
    } 
```

“OverflowBehaviour”是一个枚举，定义如下：

```
 public enum ValueTypeAutoIncrementOverflowBehaviour 
    { 
        Wrap, 
        Exception, 
    } 
```

我从这篇文章[ComboBox On DataRepeater Control Shares Selected Index](https://stackoverflow.com/questions/10585944/combobox-on-datarepeater-control-shares-selected-index)中读到，我需要在 ItemCloned 事件中手动映射组合框的数据源，我这样做了：

```
 void dataRepeater_ItemCloned(object sender, Microsoft.VisualBasic.PowerPacks.DataRepeaterItemEventArgs e)
     {
         var Combo = (ComboBox)e.DataRepeaterItem.Controls.Find("comboBox1", false)[0]; 
        Combo.DataSource = System.Enum.GetValues(typeof(ValueTypeAutoIncrementOverflowBehaviour));           
     } 
```

我还按照同一篇文章中的建议实施了 DrawItem。代码如下所示。

```
 void dataRepeater_DrawItem(object sender, Microsoft.VisualBasic.PowerPacks.DataRepeaterItemEventArgs e)
     { 
        var DataRepeater = (Microsoft.VisualBasic.PowerPacks.DataRepeater)sender; 
        var Combo = (ComboBox)e.DataRepeaterItem.Controls.Find("comboBox1", false)[0]; 
        Combo.SelectedItem = ((List<ValueTypeAutoIncrementOverflowBehaviour>)DataRepeater.DataSource)[e.DataRepeaterItem.ItemIndex];      
    } 
```

但是，当我运行该项目时，它在最后一行显示错误消息而失败。错误消息是将“System.Windows.Forms.BindingSource”类型的对象转换为“System.Collections.Generic.List`1[WindowsFormsApplication1.Form1+ValueTypeAutoIncrementOverflowBehaviour] 类型的错误。我无法访问帖子中显示的 DataRepeater.DataSource 中的任何字段。

任何人都可以建议解决方案吗？请问有没有更好的方法可以在windows形式的数据转发器中绑定组合框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:41:54.113

你可以试试这个：

```
 void dataRepeater_ItemCloned(object sender, Microsoft.VisualBasic.PowerPacks.DataRepeaterItemEventArgs e)
    {           
        var Combo = (ComboBox)e.DataRepeaterItem.Controls.Find("comboBox1", false)[0];
        Combo.DataSource = System.Enum.GetValues(typeof(ValueTypeAutoIncrementOverflowBehaviour));
    }

    void dataRepeater_DrawItem(object sender, Microsoft.VisualBasic.PowerPacks.DataRepeaterItemEventArgs e)
    {            
        var Combo = (ComboBox)e.DataRepeaterItem.Controls["comboBox1"];

        if (ds.Tables["Preference"].Rows[e.DataRepeaterItem.ItemIndex]["OverflowBehaviour"].ToString() == "Exception")        
        {
            Combo.Text = "Exception";       
        }
        else
        {
            Combo.Text = "Wrap";      
        }
    }

  void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        var combo = (ComboBox)sender;

        var DataRepeaterItem = (Microsoft.VisualBasic.PowerPacks.DataRepeaterItem)combo.Parent;

        //Update dataset
        if (ds.Tables["Preference"].Rows[DataRepeaterItem.ItemIndex]["OverflowBehaviour"].ToString() != combo.SelectedItem.ToString())
        {               
            ds.Tables["Preference"].Rows[DataRepeaterItem.ItemIndex]["OverflowBehaviour"] = combo.SelectedItem.ToString();                
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-07T19:19:41.640

最近我不得不使用这个控件......所以我也遇到了这个问题，我用以下方法解决了它：

control.DataBindings.Add(" **DataSource** ", MyList, "theField")

希望能帮助到你

# sql - SQL Server 按 guid 分组，但按组中最近的顺序排列整个查询

> ID：12923483
> 
> 赞同：0
> 
> 时间：2012-10-16T21:11:52.910
> 
> 标签：sql, sql-server

我有一个查询，我想按某个 GUID 对事物进行分组，但我想按日期排序一个组（简单），然后根据每个组中的最新记录对整个结果集进行排序，并列出该顺序作为结果集。我想让他们粘在一起。那有意义吗？

我能想到的最好的是：

```
SELECT 
   ID, data, Date, 
   row_number() OVER (PARTITION BY GUID ORDER BY Date DESC) AS rn 
FROM 
   MyTable 
```

但这并没有考虑到整个结果集的日期。

默认表

```
ID      data                Date                        GUID
0       mapper started      2012-10-16 12:18:52     SessionID:[376f795a-dba2-49e1-8047-dbac9141d78b]
1       view models init    2012-10-16 12:18:53     SessionID:[2a1be1ce-606a-44ca-8400-75b7fd23d09a]
2       view load           2012-10-16 12:18:54     SessionID:[2a1be1ce-606a-44ca-8400-75b7fd23d09a]
3       mapper load         2012-10-16 12:18:55     SessionID:[376f795a-dba2-49e1-8047-dbac9141d78b]
4       view finished       2012-10-16 12:18:56     SessionID:[2a1be1ce-606a-44ca-8400-75b7fd23d09a]
5       mapper finished     2012-10-16 12:18:57     SessionID:[376f795a-dba2-49e1-8047-dbac9141d78b] 
```

我想要的查询输出：

```
ID      data                Date                         GUID
5       mapper finished     2012-10-16 12:18:57     SessionID:[376f795a-dba2-49e1-8047-dbac9141d78b]
3       mapper load         2012-10-16 12:18:55     SessionID:[376f795a-dba2-49e1-8047-dbac9141d78b]
0       mapper started      2012-10-16 12:18:52     SessionID:[376f795a-dba2-49e1-8047-dbac9141d78b]
4       view finished       2012-10-16 12:18:56     SessionID:[2a1be1ce-606a-44ca-8400-75b7fd23d09a]
2       view load           2012-10-16 12:18:54     SessionID:[2a1be1ce-606a-44ca-8400-75b7fd23d09a]
1       view models init    2012-10-16 12:18:53     SessionID:[2a1be1ce-606a-44ca-8400-75b7fd23d09a] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:54:53.677

花了一段时间，但它似乎有效：

```
select y.id, y.data, y.date, y.guid
from
  (select max(a.date) as date, a.guid
    from mytable a
    group by a.guid)x,
  (select id, data, date, guid, 
    row_number() over(partition by guid order by guid) as rn 
    from MyTable)y
where x.guid = y.guid
order by x.date desc, y.date desc; 
```

SQL 小提琴： [http ://sqlfiddle.com/#!3/1cdc1/59](http://sqlfiddle.com/#!3/1cdc1/59)

# cloud-foundry - CloudEnvironment getServiceInfo for Redis 服务结果为 Nullpointer

> ID：12923484
> 
> 赞同：1
> 
> 时间：2012-10-16T21:11:58.703
> 
> 标签：cloud-foundry

我正在尝试使用 Redis 服务在 CloudFoundry 中部署我的 Spring MVC 应用程序。我使用 Java 配置调用 Cloudfoundry CloudEnvironment getServiceInfo 方法来检索实例化的 Redis 服务。应用程序阶段正常，但不会开始在 CF 类中提供 Nullpointer：

```
Caused by: java.lang.NullPointerException
at org.cloudfoundry.runtime.env.CloudEnvironment.getServiceInfo(CloudEnvironment.java:150) 
```

我搜索了很多有关此问题的线索，但找不到任何线索。我敢打赌我遗漏了一些东西，而我的经验是，问题越令人费解，错误就越明显。但我真的可以使用一些指针。有什么想法吗？谢谢。

杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:34:43.687

我相信您的问题的答案是因为您的代码也缺少 postgres 服务！在您的情况下，空指针异常不是针对您绑定到应用程序的 redis 服务器，而是针对 postgres 服务器。

您必须确保已创建应用程序所需的所有服务并将其绑定到应用程序。

# javascript - 使用 Google Maps API 在用户当前位置设置标记？

> ID：12923486
> 
> 赞同：1
> 
> 时间：2012-10-16T21:12:04.580
> 
> 标签：javascript, api, google-maps

我想在以下脚本中的用户当前位置设置一个标记。

任何人都可以为我提供正确的代码，它实际上适用于这个脚本吗？

我从谷歌文档中尝试了一些，但没有任何运气。

谢谢

```
 <html>
    <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">

    var showPosition = function (position) {
    var userLatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
    // Do whatever you want with userLatLng.
    }

    navigator.geolocation.getCurrentPosition(showPosition); 

    var directionDisplay;
    var map;

function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var copenhagen = new google.maps.LatLng(55.6771, 12.5704);
    var myOptions = {
        zoom:12,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: copenhagen
    }

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    directionsDisplay.setMap(map);
    }

    var directionsService = new google.maps.DirectionsService();

    function calcRoute() {
    var start = document.getElementById("start").value;
    var end = document.getElementById("end").value;
    var distanceInput = document.getElementById("distance");

    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };

    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
            distanceInput.value = response.routes[0].legs[0].distance.value / 1000;
        }
    });
    }

    </script>

    <title>Distance Calculator</title>

    <style type="text/css">

            body {
                font-family:Helvetica, Arial;
            }
            #map_canvas {
                height: 50%;
            }
    </style>
    </head>
    <body>

    <body onload="initialize()">
    <p>Enter your location and desired destination to calculate the distance</p>
        <div>
            <p>
                <label for="start">Start: </label>
                <input type="text" name="start" id="start" /><br />

                <label for="end">End:</label>
                <input type="text" name="end" id="end" /><br />

                <input type="submit" value="Calculate Route" onclick="calcRoute()" />
            </p>
            <p>
                <label for="distance">Distance (km): </label>
                <input type="text" name="distance" id="distance" readonly="true" />
            </p>
        </div>
        <div id="map_canvas"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:17:03.543

您可以从他们的 IP 地址获取用户的位置（大约）。查看这些资源：

[http://www.geoplugin.net/php.gp](http://www.geoplugin.net/php.gp)

[http://isithackday.com/hacks/geo/yql-geo-library/](http://isithackday.com/hacks/geo/yql-geo-library/)

[http://www.maxmind.com/app/geolitecity](http://www.maxmind.com/app/geolitecity)（可下载的数据库）

从上述站点之一获得纬度和经度后，

```
var location = new google.maps.LatLng(40.779502, -73.967857);
marker = new google.maps.Marker({
        position: location,
        map: map
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:21:24.260

您可以像之前尝试的那样使用 HTML5 中的地理定位功能，但您需要确保在地图初始化之前不要求地理定位。因此，将您的调用移至函数 `navigator.geolocation.getCurrentPosition(showPosition);`的末尾。`initialize()`

此外，您需要为用户的位置创建一个新标记，并将地图分配给该标记：

```
var showPosition = function (position) {
    var userLatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
    // Do whatever you want with userLatLng.
    var marker = new google.maps.Marker({
        position: userLatLng,
        title: 'Your Location',
        map: map
    });
} 
```

# iphone - 根据 iPhone 设备类型显示图像

> ID：12923488
> 
> 赞同：0
> 
> 时间：2012-10-16T21:12:11.437
> 
> 标签：iphone, macros, device

我正在尝试让我的应用程序在 iPad 和 iPad 视网膜上运行，并在视网膜上使用更高分辨率的图像。当我在宏中定义所有图像和大小时，我需要创建一个自动切换来重新定义宏。

```
#define IMAGE1 @"Image1" 
```

会成为

```
#define IMAGE1 @"Image1_Retina" 
```

例如。代码不必更改。我只需要在图像和分辨率之间自动切换。有没有办法只更改宏而不触及其余代码？

# android - ShareActionProvider 刷新文本

> ID：12923492
> 
> 赞同：11
> 
> 时间：2012-10-16T21:12:28.027
> 
> 标签：android, android-fragments, actionbarsherlock, shareactionprovider

我有一个 EditText，它最初填充了来自本地数据库的文本。当用户离开屏幕（onPause）时，更新的文本存储在本地数据库中。我还有一个 ShareActionProvider（使用 ActionBarSherlock）。

当用户使用 ShareActionProvider 时，旧文本被发送到目标应用程序。当用户按下菜单项时，如何刷新通过 actionprovider 发送的文本？

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    super.onCreateOptionsMenu(menu, inflater);
    inflater.inflate(R.menu.share_action_provider, menu);
    MenuItem actionItem = menu.findItem(R.id.menu_item_share_action_provider_action_bar);
    mActionProvider = (ShareActionProvider) actionItem.getActionProvider();
    mActionProvider.setShareIntent(createShareIntent());
}

private Intent createShareIntent() {
    Intent shareIntent = new Intent(Intent.ACTION_SEND);
    shareIntent.setType("text/plain");
    shareIntent.putExtra(Intent.EXTRA_TEXT, editText.getText().toString());
    return shareIntent;
} 
```

当用户按下菜单项时，似乎没有调用 onOptionsItemSelected() 。所以我尝试了以下onPause（），但没有运气：

```
@Override
public void onPause() {
    super.onPause();
    mActionProvider.setShareIntent(createShareIntent());
    // save to db:
    getActivity().saveText(editText.getText().toString());
} 
```

顺便说一句：这段代码都在一个片段中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T20:09:07.423

也许有点矫枉过正，但我​​通过在每次更改 EditText 字段时设置共享 Intent 来实现它。我添加了一个 TextWatcher 监听器：

```
 editText.addTextChangedListener(new TextWatcher(){
        @Override
        public void afterTextChanged(Editable s) {
             if(mActionProvider!=null) {
                    mActionProvider.setShareIntent(createShareIntent());
             }
        }
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }
        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
        }}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T10:25:08.033

我偶然发现了同样的问题，我通过将我的共享意图作为我的活动中的成员变量来解决。`ShareActionProvider`我将其设置为 in中的共享意图，`onCreateOptionsMenu`然后我可以从活动中的任何位置更新意图。为避免重新创建意图并在其中包含重复条目，您可以将更新放在 a`Bundle`中，并将意图中的附加内容替换为`Intent.replaceExtras(Bundle extras)`. 这对我有用。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T21:20:48.800

要更新 shareIntent 我猜你也必须覆盖[onPrepareOptionsMenu](http://developer.android.com/reference/android/app/Fragment.html#onPrepareOptionsMenu%28android.view.Menu%29)

所以在 OnPrepareOptionsMenu 中。每次显示菜单之前都会调用 OnPrepareOptionsMenu。再次调用 setshareintent

```
mActionProvider.setShareIntent(createShareIntent()); 
```

编辑：试试这个

```
 private class  MyActionProvider extends ShareActionProvider{

    public MyActionProvider(Context context) {
        super(context);

    }

    @Override
    public void onPrepareSubMenu(SubMenu subMenu) {
        setShareIntent(createshareintent());
        super.onPrepareSubMenu(subMenu);
    }

 } 
```

并在 R.id.menu_item_share_action_provider_action_bar 中使用这个类。

# ruby-on-rails - 如何更改默认 Ruby on Rails“redirect_to @user”路径的位置？

> ID：12923494
> 
> 赞同：0
> 
> 时间：2012-10-16T21:12:37.370
> 
> 标签：ruby-on-rails, ruby, routes, custom-routes

目前我有一个 Rails 应用程序，在“/users/:id”中查看用户配置文件，但我想将其更改为“/:username”。我已经修复了 Rails 路线，以便我有“匹配'/：用户名'，：to => 'users#show'，但我想这样做，以便我可以轻松地在控制器中使用“redirect_to @user”，这样它去了这条新路线。目前仍然转到“/users/:id”。

我将如何编辑默认路由？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:30:17.917

如果您在匹配行中添加以下内容：“：as => user_path”我认为它会起作用，但我不知道它是否会与已经存在的冲突......可能是由设计创建的......

关于这一点的更多信息：据我所知（我可能在这里错了）`redirect_to @user`，，只需调用`user_path(@user)`. 因此，如果您创建一个名为 的新 url 帮助`user_path`程序，那么它应该可以按照您的预期工作。

# c# - 使用可查询而不是扩展方法

> ID：12923497
> 
> 赞同：2
> 
> 时间：2012-10-16T21:13:07.530
> 
> 标签：c#, linq, entity-framework, resharper

ReSharper 建议我进行以下更改：

从：

```
foreach (var item in db.Proposta.GroupBy(x => x.StatusProposta.Nome))
{
    ...
} 
```

至：

```
foreach (var item in Queryable.GroupBy(db.Proposta, x => x.StatusProposta.Nome))
{
    ...
} 
```

消息是：**调用方法“GroupBy”作为静态方法**

我正在使用**实体框架**，而**db**是我的上下文。

我想知道通过这样的改变我可以得到什么好处或可以避免什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:38:07.590

Resharper 只是提供它作为它可以为您做的事情。它还将提供将静态方法调用转换为扩展方法调用的功能。

确实这是一个偏好问题 - 一个没有优势 - 它们编译为相同的东西，但您*应该*将它用作扩展方法。在使用 LINQ 时，将扩展方法语法用于扩展方法而不是简单的静态调用更为流行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:41:39.610

从[扩展方法（C# 编程指南）](http://msdn.microsoft.com/en-us/library/bb383977%28v=vs.100%29.aspx)

> 在您的代码中，您使用实例方法语法调用扩展方法。但是，编译器生成的中间语言 (IL) 会将您的代码转换为对静态方法的调用。因此，封装的原则并没有真正被违反。事实上，扩展方法不能访问它们扩展类型的私有变量。

# solr - Solr - 范围过滤器无法正常工作

> ID：12923509
> 
> 赞同：1
> 
> 时间：2012-10-16T21:13:54.003
> 
> 标签：solr

我从 solr 开始，并陷入了一种奇怪的行为。我有一个多值字段：

```
<field name="facet_age_filter" type="text" indexed="true" multiValued="true" stored="false" omitNorms="true"/> 
```

该字段包含从 0 到 12 的值，我正在构建我的查询，如下所示：

```
http://localhost:8080/select?indent=on&q=BA048*&fq=facet_age_filter:[0 TO 3] 
```

问题是，在我的结果中，我的结果与过滤器查询不匹配。即：样本从 4 到 12

有什么想法吗？

正如我所说，我从 solr 开始，指出我是否在做一些非常愚蠢的事情，或者我是否可以在文档中找到解决方案（我在 wiki 中找不到任何内容）。

编辑：感谢您的评论。

将字段更改为整数：

```
<fieldType name="integer" class="solr.IntField" omitNorms="true"/>
<field name="facet_age_filter" type="integer" indexed="true" multiValued="true" stored="true" omitNorms="true"/> 
```

将其更改为存储结果以显示在查询响应中。

如果我按照 nickdos 的说法进行过滤，它就可以正常工作。但我仍然得到超出范围的结果。

同一查询的示例查询结果：

```
 {
    "cod":"BA048555",
    "facet_age_filter":[1,8]},
  {
    "cod":"BA048444",
    "facet_age_filter":[4,12]}, 
```

这是正确的吗？括号中的这些值？

谢谢，

# javascript - Angular JS 自定义分隔符

> ID：12923521
> 
> 赞同：65
> 
> 时间：2012-10-16T21:15:09.273
> 
> 标签：javascript, angularjs, configuration, delimiter

如何为 Angular JS 使用自定义分隔符？我想从`{{ var }}`语法更改为`[[ var ]]`.

有人可以向我展示如何使用 Angular 实现此功能的完整示例吗？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-10-16T21:46:38.523

您可以使用`$interpolateProvider`更改用于 AngularJS 表达式的开始/结束符号：

```
var myApp = angular.module('myApp', [], function($interpolateProvider) {
    $interpolateProvider.startSymbol('[[');
    $interpolateProvider.endSymbol(']]');
}); 
```

然后，在您的模板中：

```
Hello, [[name]] 
```

这是工作的 jsFiddle：http: [//jsfiddle.net/Bvc62/3/](http://jsfiddle.net/Bvc62/3/)

在此处查看有关`$interpolate`服务的文档：http: [//docs.angularjs.org/api/ng.$interpolate](http://docs.angularjs.org/api/ng.$interpolate)

# c - 如何编写以数字为参数的程序并返回 1+2+.. 的总和直到参数？

> ID：12923523
> 
> 赞同：0
> 
> 时间：2012-10-16T21:15:17.933
> 
> 标签：c

如何编写以数字为参数的程序并返回 1+2+.. 的总和直到参数？

我无法正确获取代码。有人可以帮助我吗？

```
#include<stdio.h>
#include<stdlib.h>                                                               
int main(int argc, char*argv[])
{
int i;
int sum =0;

if(argc !=2){
 printf("usage: %s <count> \n", argv[0]);
 exit(n);
 }

for(i=1; i<=atoi(argv[1]); i++){
 sum+=i;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:08:04.733

首先，回答你的问题。

您需要实际输出结果。就像是：

```
printf("%d\n", sum); 
```

或者将其返回给调用该程序的任何人，尽管这有点不寻常：

```
int main( int argc, char **argv ) {
    ...
    return sum;
} 
```

但是我在这里提供自己的答案，因为有充分的理由考虑循环执行此操作……至少在您考虑更多之前。

即，公式`(n * (n+1)) / 2`将溢出 32 位整数并在`n`变为 65536 或更大时产生错误答案。但是 32 位整数本身可以存储一个总和为`n <= 92681`. 这意味着公式本身会为大约 30% 的解空间产生错误的答案。

所以你可能认为你需要循环，但这里有一个小技巧。因为公式同时使用`n`和`n+1`，所以您可以保证其中一个数字可以被 2 整除。因此您可以这样做：

```
unsigned long n;
unsigned long sum;

n = atoi(argv[1]);

if( n == 0 || n > 92681 ) {
    printf( "The supplied value (%u) is out of range\n", n );
} else {
    if( (n % 2) == 0 ) {
        sum = (n / 2) * (n+1);
    } else {
        sum = n * ((n+1) / 2);
    }
    printf( "Sum from 1 to %u is %u\n", n, sum );
} 
```

现在你有一个简单的公式，它产生与循环相同的答案，至少对于`n`不会导致总和溢出的所有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:30:15.920

无需使用循环。您可以使用简单的公式，

> 整数总和 = (n * (n + 1)) / 2
> 
> 其中 n 将是您的输入。

输出将是从输入到 1 的每个数字的总和，减 1 - 与循环相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:20:12.967

```
#include<stdio.h>
#include<stdlib.h>                                                               
int main(int argc, char*argv[])
{
    int i;
    int sum =0;

    if(argc !=2){
        printf("usage: %s <count> \n", argv[0]);
        exit(n);
    }
    int n = atoi(argv[1]);
    sum = (n*(n+1))/2; // formula of sum of first n numbers
} 
```

# sql - 在 oracle 中，如何将 [az][AZ] 下的列中的字符数据转换为一些随机字符 x

> ID：12923524
> 
> 赞同：2
> 
> 时间：2012-10-16T21:15:21.397
> 
> 标签：sql, regex, oracle11g

在 oracle 11g 中，如何将列中的字符数据转换`[a-z][A-Z]`为某个随机字符 x。例如：如果我的源列数据是 tom，那么我应该得到 xxx，如果我的源列数据是 lilly，那么我应该得到 xxxxx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:25:58.097

你可以写：

```
REGEXP_REPLACE(name_of_source_column, '[a-zA-Z]', 'x')
  AS source_column_with_letters_replaced_by_x 
```

（当然，除了那`source_column_with_letters_replaced_by_x`不是 Oracle 中的有效标识符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:27:16.000

```
SELECT dbms_random.string( 'A', length( <<input string>> ))
  FROM dual 
```

将返回一个随机的、大小写混合的字母字符字符串，长度为`<<input string>>`. 我想这就是你要找的。但是，我不清楚您的问题是否只想替换源字符串中的字母字符。也就是说，如果输入字符串是“Tom4Jerry”，您是否希望输出为“xxx4xxxxxx”，其中 x 是随机字符？或者你想要“xxxxxxxxx”？

# javascript - 轻量级的 Promise 实现

> ID：12923533
> 
> 赞同：13
> 
> 时间：2012-10-16T21:15:55.777
> 
> 标签：javascript, promise

我正在构建一个简单的图表工具。当用户选择数据源和图表类型时，将加载特定图表 (.js) 的数据和脚本，然后代码呈现图表。

目前我使用以下顺序：

1.  加载图表脚本
2.  加载数据
3.  渲染图表

为了提高性能，我想实现 Promise 并并行加载脚本和数据。像 jQuery 这样的库对我的需求来说太大了（问题的重点不是对此争论），是否有更轻量级的解决方案？也许是一个 1-2 kb 的库，或者一个教程？同样，这是一个非常基本的实现，只有两个并行操作。

[更新] 我对所有回复都投了赞成票，因为它们看起来都很棒。我会在进行更多测试后报告。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T09:43:39.427

我强烈建议使用[Promises/A 规范](http://wiki.commonjs.org/wiki/Promises/A)的实现，它正在成为在 JavaScript 中执行 Promise 的标准方式。当每个人都使用相同的风格时，Promise 会更好地工作，因此使用兼容的实现符合每个人的利益。

[Q](https://github.com/kriskowal/q)可能是最流行和功能最齐全的实现（它也将适应 jQuery 和其他不兼容的承诺），而[when](https://github.com/cujojs/when)和[rsvp](https://github.com/tildeio/rsvp.js)应该更“轻量级”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-17T17:49:22.563

想投入我的 2 美分，因为这里有发展。[Promise 已在 JavaScript 中原生](http://www.html5rocks.com/en/tutorials/es6/promises/)实现，并将在 FF 30 和 Chrome 33 中实现（根据[此表](http://kangax.github.io/es5-compat-table/es6/)）。

尽管在一个通常充斥着“但它是否支持 IE6？”的地方几乎不值得一提，但这里有一个 2kb 的压缩和 gzip 压缩的[polyfill](https://github.com/jakearchibald/es6-promise#readme)，“基本上是[rsvp.js](https://github.com/tildeio/rsvp.js)的 API 重新映射”。

由于 jQuery Promise[并不是真正的 Promise](http://domenic.me/2012/10/14/youre-missing-the-point-of-promises/)，而且我同意[这个人](http://lostechies.com/derickbailey/2013/09/20/consistency-problems-with-apis-in-javascript-promise-libraries/)的观点，即 Promise 语法在库之间不一致，我的观点是，即使您的用户的浏览器可能还不支持原生 Promise，也已经值得实现。

* * *

编辑：在 Angular 和 Firefox 插件 SDK 的上下文中使用 Promises 后，两者都与[Q](https://github.com/kriskowal/q)非常相似，我更喜欢这种语法并且已经读到它仍然比本机实现更快。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-16T21:24:45.203

不久前我建立了类似的东西，我称之为“当时”。我想要的东西会说，“加载所有这些东西，然后在它们完成后做一些事情”。

[https://github.com/geuis/when-then](https://github.com/geuis/when-then)

我受到了 promises 的启发，但想要一些更简单的东西来完成简单的任务。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-17T09:18:56.980

检查[Deferred](https://github.com/medikoo/deferred)它具有模块化构建，您可以决定只采用核心并且不应大于 1kb。

[浏览器安装说明](https://github.com/medikoo/deferred#browser)解释了如何通过几个简单的步骤创建这样的包

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-19T00:08:16.947

如果你想要它真的很轻巧，你应该试试[sb-promise](https://github.com/steelbrain/promise)，它在 MIT 许可下。它只有几个 kbs，并且与原生 Promises 的 API 兼容。

```
function myFunction(){
   return new Promise(function(resolve,reject){
     resolve({some:"data"});
   }
}
myFunction().then(function(result){
   console.log(result); // {some:"data"}
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T21:19:11.263

尝试[异步](https://github.com/caolan/async)。

它具有并行和串行执行操作的方法。它最初设计为在节点中运行，但现在也可以在浏览器中运行。

编辑添加：他们没有缩小版，所以完整的辣酱玉米饼馅约为 42kb。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-11T20:54:02.407

我创建了一个非常轻量级的 promise 库。它不符合 A 标准，但我不想要 2,000 行长的东西。

它是 promisejs 的一个分支，但我做了一些不错的补充。

这是回购的链接。 [https://github.com/taylorhakes/promise-light](https://github.com/taylorhakes/promise-light)

# asp.net-mvc - 无法让 log4net 1.2.11 和 Castle Windsor 3.1 很好地协同工作

> ID：12923535
> 
> 赞同：1
> 
> 时间：2012-10-16T21:16:09.993
> 
> 标签：asp.net-mvc, c#-4.0, castle-windsor, log4net

当然，其他人已经让这两者一起工作了。但由于某种原因，我不能。我对 Castle 比较陌生，但我遵循了他们对如何添加它的解释。Castle 是使用 log4net 1.2.10 构建的，因此我必须添加绑定重定向才能使其与 1.2.11 一起使用。

在我的代码中，失败发生在记录器安装程序中：

```
public class LoggerInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.AddFacility<LoggingFacility>(f => f.UseLog4Net());
    }
} 
```

我得到一个 MissingMethodException ：

```
void log4net.Config.XmlConfigurator.ConfigureAndWatch(System.IO.FileInfo) 
```

我不知道 log4net 是否已更改，但 ConfigureAndWatch 的签名是：

```
ICollection log4net.Config.XmlConfigurator.ConfigureAndWatch(System.IO.FileInfo) 
```

所以我知道问题出在哪里，但我似乎找不到任何关于这个问题的信息，我无法想象我是唯一遇到这个问题的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-24T07:16:28.950

我知道这是一个老问题，但我只是想添加一个替代解决方案，以防有人遇到同样的问题。我在没有添加任何绑定重定向并且没有引用两个版本的 log4net 的情况下解决了它。

首先确保卸载以下软件包（后者对 log4net 1.2.10 有硬依赖，我们希望使用最新的 log4net 版本）：

```
Uninstall-Package Castle.Windsor-log4net
Uninstall-Package Castle.Core-log4net 
```

确保您已安装 LoggingFacility 和 log4net（将 log4net 版本替换为所需版本）：

```
Install-Package Castle.LoggingFacility
Install-Package log4net -Version 1.2.13 
```

实现 AbstractLoggerFactory：

```
public class Log4NetFactory : Castle.Core.Logging.AbstractLoggerFactory
{
    internal const string DefaultConfigFileName = "log4net.config";

    public Log4NetFactory()
        : this(DefaultConfigFileName)
    {
    }

    public Log4NetFactory(string configFile)
    {
        var file = GetConfigFile(configFile);
        XmlConfigurator.ConfigureAndWatch(file);
    }

    public Log4NetFactory(bool configuredExternally)
    {
        if (configuredExternally)
        {
            return;
        }

        var file = GetConfigFile(DefaultConfigFileName);
        XmlConfigurator.ConfigureAndWatch(file);
    }

    public Log4NetFactory(Stream config)
    {
        XmlConfigurator.Configure(config);
    }

    public override ILogger Create(Type type)
    {
        if (type == null)
            throw new ArgumentNullException("type");
        var log = LogManager.GetLogger(type);
        return new Log4netLogger(log, this);
    }

    public override ILogger Create(Type type, LoggerLevel level)
    {
        throw new NotSupportedException("Logger levels cannot be set at runtime. Please review your configuration file.");
    }

    public override ILogger Create(string name)
    {
        if (name == null)
            throw new ArgumentNullException("name");
        var log = LogManager.GetLogger(name);
        return new Log4netLogger(log, this);
    }

    public override ILogger Create(string name, LoggerLevel level)
    {
        throw new NotSupportedException("Logger levels cannot be set at runtime. Please review your configuration file.");
    }
} 
```

实现 ILogger 接口：

```
[Serializable]
public class Log4netLogger : MarshalByRefObject, Castle.Core.Logging.ILogger
{
    private static readonly Type DeclaringType = typeof(Log4netLogger);

    public Log4netLogger(ILogger logger, Log4NetFactory factory)
    {
        Logger = logger;
        Factory = factory;
    }

    internal Log4netLogger()
    {
    }

    internal Log4netLogger(ILog log, Log4NetFactory factory)
        : this(log.Logger, factory)
    {
    }

    public bool IsDebugEnabled
    {
        get { return Logger.IsEnabledFor(Level.Debug); }
    }

    public bool IsErrorEnabled
    {
        get { return Logger.IsEnabledFor(Level.Error); }
    }

    public bool IsFatalEnabled
    {
        get { return Logger.IsEnabledFor(Level.Fatal); }
    }

    public bool IsInfoEnabled
    {
        get { return Logger.IsEnabledFor(Level.Info); }
    }

    public bool IsWarnEnabled
    {
        get { return Logger.IsEnabledFor(Level.Warn); }
    }

    protected internal Log4NetFactory Factory { get; set; }

    protected internal ILogger Logger { get; set; }

    public override string ToString()
    {
        return Logger.ToString();
    }

    public virtual Castle.Core.Logging.ILogger CreateChildLogger(string name)
    {
        return Factory.Create(Logger.Name + "." + name);
    }

    public void Debug(string message)
    {
        if (IsDebugEnabled)
        {
            Logger.Log(DeclaringType, Level.Debug, message, null);
        }
    }

    public void Debug(Func<string> messageFactory)
    {
        if (IsDebugEnabled)
        {
            Logger.Log(DeclaringType, Level.Debug, messageFactory.Invoke(), null);
        }
    }

    public void Debug(string message, Exception exception)
    {
        if (IsDebugEnabled)
        {
            Logger.Log(DeclaringType, Level.Debug, message, exception);
        }
    }

    public void DebugFormat(string format, params Object[] args)
    {
        if (IsDebugEnabled)
        {
            Logger.Log(DeclaringType, Level.Debug, new SystemStringFormat(CultureInfo.InvariantCulture, format, args), null);
        }
    }

    public void DebugFormat(Exception exception, string format, params Object[] args)
    {
        if (IsDebugEnabled)
        {
            Logger.Log(DeclaringType, Level.Debug, new SystemStringFormat(CultureInfo.InvariantCulture, format, args), exception);
        }
    }

    public void DebugFormat(IFormatProvider formatProvider, string format, params Object[] args)
    {
        if (IsDebugEnabled)
        {
            Logger.Log(DeclaringType, Level.Debug, new SystemStringFormat(formatProvider, format, args), null);
        }
    }

    public void DebugFormat(Exception exception, IFormatProvider formatProvider, string format, params Object[] args)
    {
        if (IsDebugEnabled)
        {
            Logger.Log(DeclaringType, Level.Debug, new SystemStringFormat(formatProvider, format, args), exception);
        }
    }

    public void Error(string message)
    {
        if (IsErrorEnabled)
        {
            Logger.Log(DeclaringType, Level.Error, message, null);
        }
    }

    public void Error(Func<string> messageFactory)
    {
        if (IsErrorEnabled)
        {
            Logger.Log(DeclaringType, Level.Error, messageFactory.Invoke(), null);
        }
    }

    public void Error(string message, Exception exception)
    {
        if (IsErrorEnabled)
        {
            Logger.Log(DeclaringType, Level.Error, message, exception);
        }
    }

    public void ErrorFormat(string format, params Object[] args)
    {
        if (IsErrorEnabled)
        {
            Logger.Log(DeclaringType, Level.Error, new SystemStringFormat(CultureInfo.InvariantCulture, format, args), null);
        }
    }

    public void ErrorFormat(Exception exception, string format, params Object[] args)
    {
        if (IsErrorEnabled)
        {
            Logger.Log(DeclaringType, Level.Error, new SystemStringFormat(CultureInfo.InvariantCulture, format, args), exception);
        }
    }

    public void ErrorFormat(IFormatProvider formatProvider, string format, params Object[] args)
    {
        if (IsErrorEnabled)
        {
            Logger.Log(DeclaringType, Level.Error, new SystemStringFormat(formatProvider, format, args), null);
        }
    }

    public void ErrorFormat(Exception exception, IFormatProvider formatProvider, string format, params Object[] args)
    {
        if (IsErrorEnabled)
        {
            Logger.Log(DeclaringType, Level.Error, new SystemStringFormat(formatProvider, format, args), exception);
        }
    }

    public void Fatal(string message)
    {
        if (IsFatalEnabled)
        {
            Logger.Log(DeclaringType, Level.Fatal, message, null);
        }
    }

    public void Fatal(Func<string> messageFactory)
    {
        if (IsFatalEnabled)
        {
            Logger.Log(DeclaringType, Level.Fatal, messageFactory.Invoke(), null);
        }
    }

    public void Fatal(string message, Exception exception)
    {
        if (IsFatalEnabled)
        {
            Logger.Log(DeclaringType, Level.Fatal, message, exception);
        }
    }

    public void FatalFormat(string format, params Object[] args)
    {
        if (IsFatalEnabled)
        {
            Logger.Log(DeclaringType, Level.Fatal, new SystemStringFormat(CultureInfo.InvariantCulture, format, args), null);
        }
    }

    public void FatalFormat(Exception exception, string format, params Object[] args)
    {
        if (IsFatalEnabled)
        {
            Logger.Log(DeclaringType, Level.Fatal, new SystemStringFormat(CultureInfo.InvariantCulture, format, args), exception);
        }
    }

    public void FatalFormat(IFormatProvider formatProvider, string format, params Object[] args)
    {
        if (IsFatalEnabled)
        {
            Logger.Log(DeclaringType, Level.Fatal, new SystemStringFormat(formatProvider, format, args), null);
        }
    }

    public void FatalFormat(Exception exception, IFormatProvider formatProvider, string format, params Object[] args)
    {
        if (IsFatalEnabled)
        {
            Logger.Log(DeclaringType, Level.Fatal, new SystemStringFormat(formatProvider, format, args), exception);
        }
    }

    public void Info(string message)
    {
        if (IsInfoEnabled)
        {
            Logger.Log(DeclaringType, Level.Info, message, null);
        }
    }

    public void Info(Func<string> messageFactory)
    {
        if (IsInfoEnabled)
        {
            Logger.Log(DeclaringType, Level.Info, messageFactory.Invoke(), null);
        }
    }

    public void Info(string message, Exception exception)
    {
        if (IsInfoEnabled)
        {
            Logger.Log(DeclaringType, Level.Info, message, exception);
        }
    }

    public void InfoFormat(string format, params Object[] args)
    {
        if (IsInfoEnabled)
        {
            Logger.Log(DeclaringType, Level.Info, new SystemStringFormat(CultureInfo.InvariantCulture, format, args), null);
        }
    }

    public void InfoFormat(Exception exception, string format, params Object[] args)
    {
        if (IsInfoEnabled)
        {
            Logger.Log(DeclaringType, Level.Info, new SystemStringFormat(CultureInfo.InvariantCulture, format, args), exception);
        }
    }

    public void InfoFormat(IFormatProvider formatProvider, string format, params Object[] args)
    {
        if (IsInfoEnabled)
        {
            Logger.Log(DeclaringType, Level.Info, new SystemStringFormat(formatProvider, format, args), null);
        }
    }

    public void InfoFormat(Exception exception, IFormatProvider formatProvider, string format, params Object[] args)
    {
        if (IsInfoEnabled)
        {
            Logger.Log(DeclaringType, Level.Info, new SystemStringFormat(formatProvider, format, args), exception);
        }
    }

    public void Warn(string message)
    {
        if (IsWarnEnabled)
        {
            Logger.Log(DeclaringType, Level.Warn, message, null);
        }
    }

    public void Warn(Func<string> messageFactory)
    {
        if (IsWarnEnabled)
        {
            Logger.Log(DeclaringType, Level.Warn, messageFactory.Invoke(), null);
        }
    }

    public void Warn(string message, Exception exception)
    {
        if (IsWarnEnabled)
        {
            Logger.Log(DeclaringType, Level.Warn, message, exception);
        }
    }

    public void WarnFormat(string format, params Object[] args)
    {
        if (IsWarnEnabled)
        {
            Logger.Log(DeclaringType, Level.Warn, new SystemStringFormat(CultureInfo.InvariantCulture, format, args), null);
        }
    }

    public void WarnFormat(Exception exception, string format, params Object[] args)
    {
        if (IsWarnEnabled)
        {
            Logger.Log(DeclaringType, Level.Warn, new SystemStringFormat(CultureInfo.InvariantCulture, format, args), exception);
        }
    }

    public void WarnFormat(IFormatProvider formatProvider, string format, params Object[] args)
    {
        if (IsWarnEnabled)
        {
            Logger.Log(DeclaringType, Level.Warn, new SystemStringFormat(formatProvider, format, args), null);
        }
    }

    public void WarnFormat(Exception exception, IFormatProvider formatProvider, string format, params Object[] args)
    {
        if (IsWarnEnabled)
        {
            Logger.Log(DeclaringType, Level.Warn, new SystemStringFormat(formatProvider, format, args), exception);
        }
    }
} 
```

在 WindsorInstaller 中注册自定义 Log4NetFactory：

```
public class LoggerInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.AddFacility<LoggingFacility>(x =>
            x.WithConfig(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile)
            .ToLog("MyLogger")
            .LogUsing<Log4NetFactory>());
    }
} 
```

将通常的 log4net 配置添加到您的 app/web.config - 如果还没有的话。

确保 log4net 配置中存在“MyLogger”，例如

```
<logger name="MyLogger" additivity="false">
  <level value="DEBUG" />
  <appender-ref ref="MyAppender" />
</logger> 
```

现在您可以像这样注入 ILogger：

```
public class MyClass
{
    public MyClass(ILogger logger)
    {
        logger.Info("Castle Windsor with newest log4net.");
    }
} 
```

使用上述方法，您可以将任何版本的 log4net 与 Castle Windsor 一起使用。我有 log4net 1.2.13 与 Castle Windsor 3.3.3 一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T06:54:13.753

我必须将应用程序配置为使用两个版本的 log4net：

```
<configuration>
  <runtime>
     <assemblyBinding>
      <dependentAssembly>
        <assemblyIdentity name="log4net" publicKeyToken="669e0ddf0bb1aa2a" />
        <codeBase version="1.2.11.0" href="..\packages\log4net.2.0.0\lib\net40-full\log4net.dll" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="log4net" publicKeyToken="1b44e1d426115821" />
        <codeBase version="1.2.10.0" href="..\packages\log4net.1.2.10\lib\2.0\log4net.dll" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

我不知道是否有更好的方法让它工作，但这有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T21:27:55.853

Log4Net 为次要版本更改了他们的公钥令牌，这可能很烦人，并引起了许多人的悲痛。检查您的配置并阅读以下问题和答案

[我如何解决 log4net 不断变化的 publickeytoken](https://stackoverflow.com/questions/8743992/how-do-i-work-around-log4net-keeping-changing-publickeytoken)

这可能不是您的问题或唯一的问题，但是当我在升级城堡和 log4net 时遇到类似的问题时，这是我的主要悲痛。

# java - Scala 包装通用匿名类

> ID：12923538
> 
> 赞同：0
> 
> 时间：2012-10-16T21:16:22.363
> 
> 标签：java, scala, closures

我试图通过使用 scala 闭包使这段代码更好：

```
 SQLiteQueue queue = new SQLiteQueue(databaseFile);
  queue.start();    
  queue.execute(new SQLiteJob<Object>() {
    protected Object job(SQLiteConnection connection) throws SQLiteException {
      connection.exec(...);
      return null;
    }
  }); 
```

我将 SQLiteQueue 子类化并为执行函数添加了一个重载：

```
def execute[T](action: SQLiteConnection => T) {
    val job = new SQLiteJob[T] {
        override def job(conn:SQLiteConnection):T = {
            action(conn)
        }
    }
    super.execute(job)
} 
```

所以我可以像这样使用它：

```
queue.execute { conn => do something with conn} 
```

但我得到这个编译器错误`super.execute(job)`

```
error: inferred type arguments [Nothing,com.almworks.sqlite4java.SQLiteJob[T]] 
do not conform to method execute's type parameter bounds [T,J <: 
com.almworks.sqlite4java.SQLiteJob[T]] 
```

我在那里调用的执行函数如下所示：`public <T, J extends SQLiteJob<T>> J execute(J job)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:44:58.347

调用execute时指定类型参数：

```
super.execute[T, SQLiteJob[T]](job) 
```

# memory-management - 有没有一种内存有效的方法来计算这个序列的直方图？

> ID：12923539
> 
> 赞同：0
> 
> 时间：2012-10-16T21:16:28.823
> 
> 标签：memory-management, tree

通过递归地将两个函数应用于某个起始值来生成数字的二叉树`a`，即给定序列

```
a, f(a), g(a), f(f(a)), g(f(a)), f(g(a)), g(g(a)), ... 
```

我需要计算所有值`limit`在此序列中出现的次数，这可能`g(x) > f(x) > x`始终保持不变。该算法很简单：从一个用 初始化的集合开始，我用and`a`替换一个元素，除非它们比.`x``f(x)``g(x)``limit`

唯一的问题是，即使只使用一个字节作为计数器，我也需要大约 5 倍的内存。

我尝试将虚拟内存与[DFS](http://en.wikipedia.org/wiki/Breadth-first_search)一起使用，但局部性很糟糕，我怀疑该程序今年会终止。通过始终替换最小元素来生成数字会导致非常好的局部性，但是（类似于[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)）集合像杂草一样增长，并且内存消耗变得比以前更糟。

我通过重复整个计算 5 次解决了这个问题，而在第 - 次`n`运行时忽略了所有条目，除了 和 之间的`(n-1)*limit/5`条目`n*limit/5`。有更好的解决方案吗？

# r - R：predict.lm() 不识别对象

> ID：12923541
> 
> 赞同：4
> 
> 时间：2012-10-16T21:16:38.287
> 
> 标签：r, linear-regression, lm, predict

```
> reg.len <- lm(chao1.ave ~ lg.std.len, b.div) # b.div is my data frame imported from a CSV file
> reg.len

Call:
lm(formula = chao1.ave ~ lg.std.len, data = b.div)

Coefficients:
(Intercept)   lg.std.len  
      282.4       -115.7  

> newx <- seq(0.6, 1.4, 0.01)
> prd.len <- predict(reg.len, newdata=data.frame(x=newx), interval="confidence", level=0.90, type="response")
Error in eval(expr, envir, enclos) : object 'lg.std.len' not found 
```

我试过像这样做 lm: `lm(b.div$chao1.ave ~ b.div$lg.std.len)`，但是随后`predict()`警告说 newdata 和 variables 的长度不同。所以，我尝试了上面的方法，现在`predict()`给出一个错误，说它无法识别对象。请问怎么修？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T21:31:02.207

Predict 期望 newdata 具有相同的列名（以匹配 reg.len 中的公式）。您在 newdata 规范中将其更改为“x”，这不是公式的一部分。

```
dat <- data.frame(y=rnorm(50),lg.std.len=sample(10:15,50,replace=TRUE))
reg.len <- lm(y ~ lg.std.len,data=dat)

newx <- seq(0.6, 1.4, 0.01)
prd.len <- predict(reg.len, newdata=data.frame(lg.std.len=newx),
                   interval="confidence", level=0.90, type="response") 
```

关键部分是`newdata=data.frame(lg.std.len=newx)`

# c++ - 用于深层继承的 C++ 模板单例基类

> ID：12923543
> 
> 赞同：0
> 
> 时间：2012-10-16T21:16:49.090
> 
> 标签：c++, templates, singleton

所以我有一个简单的单例模板基类（出于问题目的而缩小）：

```
template <typename T>
class Singleton {
public:
    static T& instance() {
        static T me;
        return me;
    }
}; 
```

现在我想要一个“单例的基类”：

```
class Base : public Singleton<Base> {
public:
    void print() { std::cout << &instance() << std::endl; }
} 
```

我现在想要的是从这个基类派生子类，它们是他们自己的单例：

```
class A : public Base {
    // ...
}

class B : public Base {
    // ...
} 
```

当然，如果我这样做

```
A::instance().print();
B::instance().print(); 
```

在这两种情况下，我都得到相同的地址。有没有办法做到这一点？

如果您想知道为什么：我想编写一个`ResourceManager`基类，该基类由一个类`ImageManager`、一个类“AudioManager”等继承。我希望它们实际上不共享同一个实例，但仍然只有每个经理一个实例...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T21:19:26.040

您必须将 Base 设为模板并将其传递给，然后如果您希望实现此目的`Singleton`，则继承自。`Base<A>`或者，如果您希望 Base 成为 Singleton*并且*A/B 成为 Singleton，那么它们将必须继承自`Singleton<A>`，`Singleton<B>`除了`Base`.

但是亲爱的上帝，伙计，单身对你和你的孩子来说是一百代人的诅咒。你为什么要这样对自己？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:27:38.520

当基类必须从其子类中获取某些东西时，我看到的最佳解决方案是使用 Child 作为 Base 的参数，如下所示：

```
template< bool val, class TrueT, class FlaseT >
struct If {
    typedef TrueT type;
};
template< class TrueT, class FalseT >
struct If< false, TrueT, FalseT > {
    typedef FalseT type;
};
template< class DerivedT = void >
class Base {
public:
    typedef typename If<std::is_same<DerivedT, void>::value,
        Base<DerivedT>, DerivedT>::type this_type;
    static this_type& instance() {
        this_type me;
        return me;
    }

public:
    void test() {}
};
class A : public Base<A> {
public:
    void print() {}
};
class B : public Base<B> {
public:
    void print() {}
};
Base<>::instance().test();
B::instance().print();
A::instance().print(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T21:27:12.393

我的建议是让 Base 成为一个非单例类，然后让 Class A 和 Class B 单例实例化 Base 类。这为您提供了灵活性并遵循了优先组合而不是继承的面向对象原则[http://www.artima.com/lejava/articles/designprinciples4.html](http://www.artima.com/lejava/articles/designprinciples4.html)

由于 Singleton 需要静态成员，您不能直接从 Singleton 类继承。在这种情况下，作曲会更好地为您服务，大多数其他情况也是如此。

# html - preg_replace 将 div 替换为最小宽度

> ID：12923548
> 
> 赞同：0
> 
> 时间：2012-10-16T21:17:06.353
> 
> 标签：html, regex, preg-replace

我有一个用户输入表单，允许用户使用 HTML，例如`div`,`span`等。

我只想在用户碰巧放入一个超过站点*宽度*（在本例中为 800 像素）的 a**时才清理输入。**`div``style="width:"`

 *所以我只想 在*宽度*大于 800px 时进行`preg_replace`搜索。`div style="width:"`

 *我已经为`spans`、`div width=""`等进行了所有其他修复，但是**只有**`preg_replace`在`div style="width:"`宽度大于 800（例如 1500 像素、2000 像素、801 像素）时才会更改宽度 - 我无法让它工作。

 **有**什么**办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:52:38.027

[他来的小马...](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

你将如何处理类似的事情`width:140%`？或者`width: 600px; margin: 200px;`？或者只是一个没有定义宽度但内在宽度超过 800 像素的图像？

将用户提供的内容放在包装器中要容易得多：

```
<div style="width: 800px; overflow: hidden;">USER CONTENT HERE</div> 
```****

# c# - 从 WPF 中的 GridView 检索字典值

> ID：12923556
> 
> 赞同：1
> 
> 时间：2012-10-16T21:17:35.840
> 
> 标签：c#, wpf, gridview, dictionary

我已经尝试了很长时间没有成功。

我正在尝试将字典存储在 WPF 的 GridView 中。我能够存储键/值，但无法获取特定键的值。例如，在下面的示例中，我想检索键“1”（即“4”）的值。TryGetValue 还没有成功。

这是我的代码：

```
public MainWindow()
        {
            InitializeComponent();
            McDataGrid.ItemsSource = files.Keys;
        }

Dictionary<Files, string> files = new Dictionary<Files, string>();

public class Files
{
    public string File { get; set; }
    public string Duration { get; set; }
    public string Status { get; set; }               
}

private void AddFilesList(string addsrc, string addduration, string addstatus, string path)
        {
            files.Add(new Files
            {
                File = addsrc,
                Duration = addduration,
                Status = addstatus

            }, path
               );

            DataGrid.Items.Refresh();
        }

private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            AddFilesList("1", "2", "3", "4");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:31:19.333

```
 private void OnDataGridSelectionChanged(object sender, RoutedEventArgs e)
    {
        var value = files[DataGrid.SelectedItem];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:47:41.097

试试这个代码

```
 foreach (KeyValuePair<Files, string> pair in files)
    {
        if (pair.Key.File == "1")
        { 
           pair.Value// This will be return 4
        }
    } 
```

# sql - 带有日期时间等的 WHERE 子句的索引

> ID：12923558
> 
> 赞同：5
> 
> 时间：2012-10-16T21:17:49.897
> 
> 标签：sql, performance, postgresql, indexing, postgresql-performance

我正在使用 Postgres 9.1 并且查询的执行速度非常慢。

### 查询：

```
Explain Analyze SELECT COUNT(DISTINCT email) FROM "invites" WHERE (
 created_at < '2012-10-10 21:08:05.259200'
 AND invite_method = 'email' 
 AND accept_count = 0 
 AND reminded_count < 3 
 AND (last_reminded_at IS NULL OR last_reminded_at < '2012-10-10 21:08:05.261483')) 
```

### 结果：

```
Aggregate  (cost=19828.24..19828.25 rows=1 width=21) (actual time=11395.903..11395.903 rows=1 loops=1)
  ->  Seq Scan on invites  (cost=0.00..18970.57 rows=343068 width=21) (actual time=0.036..353.121 rows=337143 loops=1)
        Filter: ((created_at < '2012-10-10 21:08:05.2592'::timestamp without time zone) AND (reminded_count < 3) AND ((last_reminded_at IS NULL) OR (last_reminded_at < '2012-10-10 21:08:05.261483'::timestamp without time zone)) AND ((invite_method)::text = 'email'::text) AND (accept_count = 0))
Total runtime: 11395.970 ms 
```

如您所见，这大约需要 11 秒。我将如何添加索引以优化此查询性能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T23:15:48.387

[像Jim 建议](https://stackoverflow.com/a/12924357/939860)的那样仅仅索引“所有内容”并不是一个非常有效的策略。索引需要维护成本，并且组合许多单独的索引比一个*定制*的索引更昂贵（维护和查询）。这始终取决于您的完整情况。

对于只读或很少写入的表，索引的成本较低，但对于具有大量写入操作的易失性表而言，索引成本较高。另一个缺点是索引禁止 HOT-Updates（仅堆元组）更改涉及的列。看：

*   [更新语句中的冗余数据](https://stackoverflow.com/questions/7806058/redundant-data-in-update-statements/7806610#7806610)

如果特定查询的性能很重要，[部分多列索引](https://www.postgresql.org/docs/current/indexes.html)将是一个很好的策略。专业化，但比所有相关列上的单个索引更便宜、更快。经验法则是...

*   将易失条件的列（在查询之间变化）放入索引中。
*   在子句中使用稳定的条件（每个查询都相同）`WHERE`来缩小索引的分区。

从您的列名（由于缺乏信息）来看，`accept_count = 0`似乎是这里最具选择性（和稳定）的过滤器，同时`created_at`并且`last_reminded_at`可能会不断变化。所以也许是这样的：

```
CREATE INDEX invites_special_idx
ON     invites (created_at, last_reminded_at)
WHERE  accept_count = 0
AND    invite_method = 'email'
AND    reminded_count < 3; 
```

排序`created_at`和`last_reminded_at` *升序*以完美匹配查询 - 无论如何这恰好是默认值。这样，系统可以在一次扫描中从索引顶部获取所有相关行。应该非常快。

正如我们在您之前的一个问题中所讨论的那样，将表聚集在索引上可能会有所帮助。请务必阅读有关[`CLUSTER`](https://www.postgresql.org/docs/current/sql-cluster.html).
正如@Craig 提供的那样，您不能`CLUSTER`使用部分索引。由于`CLUSTER`是一次性操作（效果会随着以后的写入操作而降低），您可以通过创建*完整*索引、`CLUSTER`表并再次删除索引来规避此限制。喜欢：

```
CREATE INDEX invites_special_idx2 ON invites (created_at, last_reminded_at);
CLUSTER invites USING invites_special_idx2;
DROP INDEX invites_special_idx2; 
```

`CLUSTER`仅在没有其他重要查询与数据分发要求相矛盾时才有用。

PostgreSQL 9.2 有几个新特性可以让你的查询更快。特别是仅索引扫描（[发行说明中的​​第一项](https://www.postgresql.org/docs/9.2/release-9-2.html)）。考虑升级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:21:07.163

您应该为 email、created_at、invite_method、accept_count、remind_count 和 last_remitted 添加索引。通常，WHERE 语句左侧的任何内容。

# bash - (Bash) 将帖子数据提交到在线表格以检查用户名的可用性

> ID：12923561
> 
> 赞同：1
> 
> 时间：2012-10-16T21:17:54.823
> 
> 标签：bash, post, curl, aol

首先询问：[(Bash) $user@aol.com 电子邮件可用性检查器](https://stackoverflow.com/questions/12888407/bash-useraol-com-email-availability-checker) （经过深思熟虑的开始。再次感谢！）

我希望对此进行一些扩展：

我正在尝试使用 Curl 或简单的 POST 命令（均未证明有效）来尝试验证我必须访问以下页面的用户名列表：

[https://new.aol.com/productsweb/](https://new.aol.com/productsweb/)

本质上，这将是@aol.com 电子邮件地址的可用性检查器。

只要它有效，它就不必整洁、干净或漂亮。

有谁知道我可以从这里去哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:31:27.477

以下`bash`使用命令的脚本`cURL`可以检查电子邮件的可用性：

```
testemail=foobar # @aol.com
out=$(
    curl \
        -A "Mozilla/5.0" \
        -L \
        -b /tmp/c \
        -c /tmp/c \
        -s \
        -e 'https://new.aol.com/productsweb/' \
        -d "d=aol.com&f=test&l=test2&m=&s=$testemail" \
        'https://new.aol.com/productsweb/subflows/ScreenNameFlow/AjaxSNAction.do'
)

if [[ $out == *toggleSNField* ]]; then
    echo "email $testemail@aol.com is available"
elif [[ $out == *Error* ]]; then
    echo >&2 "an error occured while processing $testemail@aol.com"
else
    echo >&2 "$testemail@aol.com is unavailable"
fi 
```

**解释**

*   要了解发生了什么，我使用`firefox`&`firebug`插件，请参阅`XHR`此[屏幕截图](http://pix.toile-libre.org/upload/original/1350423795.png)中的选项卡²
*   我在 POST 中搜索`firefox`发送到 AOL 服务器的内容
*   然后，我`cURL`也会这样做

有关详细信息，请参阅`man curl`。

² 这是一个[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)请求

# r - 理解岭回归

> ID：12923563
> 
> 赞同：0
> 
> 时间：2012-10-16T21:18:03.703
> 
> 标签：r, regression

我开始在 R 中学习岭回归。我应用了线性岭回归并得到了以下结果。我如何解释结果？

```
> gridge<-lm.ridge(divorce ~., data=divusa, lambda=seq(0,35,0.02))
> select(gridge)
modified HKB estimator is 0.07693804 
modified L-W estimator is 0.3088377 
smallest value of GCV  at 0.02 
> which.min(gridge$GCV)
 0.02 
    2 

> round(coef(gridge)[2,-1],3)
      year     unemployed     femlab   marriage      birth 
    -0.195        -0.053             0.790      0.148     -0.118 
  military 
    -0.042 

> round(coef(g)[-1],3)
      year      unemployed     femlab   marriage      birth 
    -0.203         -0.049              0.808      0.150     -0.117 
  military 
    -0.043 
```

问题：

1.  我如何解释结果？
2.  我还需要做任何其他的解释吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2015-01-06T05:36:19.817

```
ridge <- lm.ridge (LKyes~ ., lambda = "automatic", data=ml)

Error in svd(X) : infinite or missing values in 'x' 
```

# sql-server - 如何从 SQL Server 全文搜索中仅返回 MATCHED DATA？

> ID：12923565
> 
> 赞同：0
> 
> 时间：2012-10-16T21:18:16.600
> 
> 标签：sql-server, full-text-search, hit-highlighting

所以我研究了关于“点击突出显示”的 SO，它似乎接近我想要的。但似乎没有人有一个明确的方法来简单地从 FTS 搜索中返回匹配的数据。

所以我要特别问 - 因为我发现的所有其他关于它的帖子都有点不稳定或根本不起作用。

谢谢...

# python - 如何在 Python 3.2 中检查整数？

> ID：12923572
> 
> 赞同：1
> 
> 时间：2012-10-16T21:19:06.213
> 
> 标签：python, integer

我正在尝试编写一个程序，其中用户输入一个两位整数，输出是第二位打印的第一个数字指示的次数。这是我到目前为止所拥有的：

```
number = input('Type two-digit integer \n')
a = int(number)//10
b = int(number)%10
if len(number) != 2:
    print(number, 'is not a two-digit integer')
else:
    print(a*str(b)) 
```

当我对此进行测试时，只要有人输入数字，它就会按照我的意图去做。如果有人输入 6r，则会弹出一条错误消息：

a = int(number)//10

ValueError: int() 以 10 为底的无效文字：'6r'

所以我会假设需要在代码的第二行添加一些东西来测试输入是否实际上是一个整数，我该怎么做？用不同的方式重写它会更好吗？请记住，我正在参加 Python 入门课程，这是我正在参加的练习中期的一个问题，所以如果我不得不在真正的中期回答这样的问题，我不能使用很多复杂的过程。

如果有人键入不是整数的东西，这是我尝试过的，但由于某种原因，我不知道它为非整数提供了与整数相同的消息，并且没有按我的意图运行：

```
number = input('Type two-digit integer \n')
if (isinstance(number, int)) == False:
    print(number, 'is not a two-digit integer')
elif len(number) != 2:
    print(number, 'is not a two-digit integer')
else:
    a = int(number)//10
    b = int(number)%10
    print(a*str(b)) 
```

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T21:22:04.290

这里最好的选择是捕获异常。出了点问题，而这正是异常旨在处理的内容：

```
try:
    ...
except ValueError:
    print("You need to enter an integer!")
    ... 
```

Python 的口头禅是*请求宽恕比请求许可更好*，所以不要事先检查它是否有效，尝试一下，如果无效则处理问题。

这使得代码更可靠（检查可能会意外地禁止良好的输入，或者允许错误的输入），并使代码更好地阅读（您首先处理正常情况，然后处理问题，而不是必须检查问题，然后处理）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T21:22:09.300

这是`try`和的最佳时机`except`：

```
try:
   val = int(number)
except ValueError:
   print("That's not a number...") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T21:22:08.843

也许最简单的事情就是做`number.isdigit()`。 `isdigit`如果字符串中的所有字符都是数字，则返回 true，这意味着它是一个正整数。因此，您可以执行以下操作：

```
if not number.isdigit():
    print "You didn't enter an integer!" 
```

请注意，使用 try/except 作为其他答案的建议将允许负整数，这可能对您的用例没有意义（您不能打印字符串 -2 次）。

问题是您并不真正想要“两位整数”，您想要一个由两位数字组成的字符串，您将把它用作两个单独的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T21:30:18.317

我会选择类似的东西：

```
number = re.match(r'(\d)(\d)', input('Typo two digit number:\n'))
if number is not None:
    print(int(number.group(1)) * number.group(2))
else:
    pass # something wasn't right... 
```

# ios - iOS应用OTA开发构建分发

> ID：12923574
> 
> 赞同：-1
> 
> 时间：2012-10-16T21:19:21.553
> 
> 标签：ios, wifi, info.plist, ota

我正在尝试以无线方式分发开发版本。我已经能够成功地做到这一点，但有一个问题。我的应用程序需要 WiFi，因此它在 Info.pList 中将“UIRequiresPersistentWiFi”键设置为 true。

但是当我以无线方式安装应用程序时，这个要求似乎并不适用。我不确定我错过了什么。

我验证了 Info.pList 包含密钥，但它在我安装应用程序时不适用。请指教。

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:45:07.540

这实际上是用户选择“请求加入网络”的操作系统设置中的一个选项。如果用户选择此选项，他/她将被提示加入网络，否则它将只使用任何可用的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:32:14.167

从[文档](http://developer.apple.com/library/ios/#documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW1)中我了解到，`UIRequiresPersistentWiFi`只要应用程序正在运行，操作系统只会尝试打开 WiFi 并保持连接打开。（没有，连接会在 30 分钟后关闭）。

因此，无需 Wifi 连接即可安装或启动应用程序。即使此时没有 WiFi 连接，也可以启动该应用程序。

# r - R 中 add1() 命令的范围

> ID：12923577
> 
> 赞同：1
> 
> 时间：2012-10-16T21:19:27.747
> 
> 标签：r, linear-regression, anova

我不确定如何使用 add1 命令。假设我有一个模型

```
y=b0+b1*x1 
```

我想知道添加更多自变量是否更合适。现在我将测试所有模型

```
y=b0+b1*x1+b2*x2 
```

具有不同的 x2（我的不同自变量）。add1 命令不知何故需要一个“范围”。我不确定，那是什么。我不知道如何使用 add1 命令。如果我这样做：

```
add1(fittedmodel) 
```

我收到一个错误，所以我想我需要手动指定要使用的变量。没关系，这实际上是我想要的，但不确定是不是这样。如果我做

```
add1(fittedmodel, scope=x1+x2, test="F") 
```

为 x2 插入一个特定变量，我得到以下输出：

单项加法

模型：

```
sl ~ le
       Df  Sum of Sq     RSS     AIC F value Pr(>F)
<none>               0.51211 -523.44               
ky      1 0.00097796 0.51113 -521.63  0.1856 0.6676 
```

我不确定这是否是我想要的。它描述的模型`sl~le`不是我想要的（`sl~le+ky`），但这可能只是它开始的模型？然后不知道是什么`<none>`意思。现在这是否意味着用于比较模型的 F 检验值`sl~le`是`sl~le`0.1856？还是我错误地解释了输出？

那么，即使这是正确的，我该如何为模型“sl~le+ky+le:ky”做这件事，也就是说，如果我确实有交互？add1() 命令中的 scope 参数我好像看不懂，但是我需要它，因为没有它， add1() 就不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:15:20.777

这是一个如何使用范围和解释结果的示例`add1`。

通过阅读`?add1`和查看示例，所有这些都可以很容易地找到。

```
# create some data
set.seed(1)
DF <- data.frame(x1 = sample(letters[1:2], 50, replace = TRUE), x2 = sample(letters[3:4], 
    50, replace = TRUE))

library(plyr)

DF <- ddply(DF, .(x1, x2), mutate, y = sample(1:10, 1))
DF <- ddply(DF, .(x1, x2), mutate, y = y + rnorm(length(y), 0, 2))

# a simple model with just y~x1
simple <- lm(y ~ x1, data = DF)

# add a single term

add1(simple, scope = ~x1 + x2, test = "F")

## Single term additions
## 
## Model:
## y ~ x1
##        Df Sum of Sq RSS AIC F value Pr(>F)   
## <none>              565 125                  
## x2      1      93.9 471 118    9.37 0.0036 **
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 
```

表格涵盖了在给定范围的情况下添加 1 个变量的所有可能性，并且帮助 ( `?add1`) 状态下的值

> ## 价值
> 
> “anova”类的对象，总结了模型之间的拟合差异。

所以这表明添加`x2`模型包含`x1`将给出较低的 AIC，并且`F`测试测试模型之间的差异。

如果您想测试添加交互是否会改进模型，那么您需要先拟合主效应模型，然后使用`~x1*x2`扩展为的范围`~x1+x2+x1:x2`

```
simple_2 <- lm(y ~ x1 + x2, data = DF)
add1(simple_2, scope = ~x1 * x2, test = "F")

## Single term additions
## 
## Model:
## y ~ x1 + x2
##        Df Sum of Sq RSS   AIC F value  Pr(>F)    
## <none>              471 118.2                    
## x1:x2   1       289 182  72.6      73 4.7e-11 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-31T10:02:25.380

在这种情况下，您可以使用`drop1()`函数。`drop1(fittedmodel)`当我们进行向后选择时使用。它从完整模型开始，并在删除一个预测变量时为每种情况返回 p 值。因此，如果您只有 2 个预测变量要比较，`drop1()`函数会做得更好。

# c# - 将 stimulsoft 报告页面大小更改为等于文本对象字段控件宽度

> ID：12923578
> 
> 赞同：0
> 
> 时间：2012-10-16T21:19:33.870
> 
> 标签：c#, report, autosize, stimulsoft, page-size

我正在尝试创建一个 stimulsoft 报告，用于在连续进纸标签打印机上打印最多 50 个字符的单行文本，但我无法让报告页面的宽度或高度随单行的长度而变化的文本。

有人成功地做我想做的事情吗？

我已经尝试了 Report/Page/Databand/TextField 对象的 cangrow/autosize 属性可能性的多种排列，以及尝试在各种对象事件中使用 C# 脚本代码将页面宽度设置为文本字段的宽度，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:05:41.017

您可以根据页面上的数据量动态设置页面的高度。

首先将页面大小设置为自定义，然后在报表的 EndRender 事件中编写如下脚本：

```
foreach (StiPage page in this.RenderedPages)
{
    double max = 0;
    foreach (StiComponent comp in page.GetComponents())
    {
        if (comp.Bottom > max) max = comp.Bottom;
    }
    page.PageHeight = max + page.Margins.Top + page.Margins.Bottom;
} 
```

报告样本：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<StiSerializer version="1.02" type="Net" application="StiReport">
  <Dictionary Ref="1" type="Dictionary" isKey="true">
    <BusinessObjects isList="true" count="0" />
    <Databases isList="true" count="0" />
    <DataSources isList="true" count="2">
      <Products Ref="2" type="DataTableSource" isKey="true">
        <Alias>Products</Alias>
        <Columns isList="true" count="7">
          <value>ProductID,System.Int32</value>
          <value>ProductName,System.String</value>
          <value>SupplierID,System.Int32</value>
          <value>CategoryID,System.Int32</value>
          <value>QuantityPerUnit,System.String</value>
          <value>UnitPrice,System.Decimal</value>
          <value>UnitsInStock,System.Int16</value>
        </Columns>
        <Dictionary isRef="1" />
        <Name>Products</Name>
        <NameInSource>Demo.Products</NameInSource>
      </Products>
      <Categories Ref="3" type="DataTableSource" isKey="true">
        <Alias>Categories</Alias>
        <Columns isList="true" count="3">
          <value>CategoryID,System.Int32</value>
          <value>CategoryName,System.String</value>
          <value>Description,System.String</value>
        </Columns>
        <Dictionary isRef="1" />
        <Name>Categories</Name>
        <NameInSource>Demo.Categories</NameInSource>
      </Categories>
    </DataSources>
    <Relations isList="true" count="1">
      <Categories Ref="4" type="DataRelation" isKey="true">
        <Alias>Categories</Alias>
        <ChildColumns isList="true" count="1">
          <value>CategoryID</value>
        </ChildColumns>
        <ChildSource isRef="2" />
        <Dictionary isRef="1" />
        <Name>Categories</Name>
        <NameInSource>CategoriesProducts</NameInSource>
        <ParentColumns isList="true" count="1">
          <value>CategoryID</value>
        </ParentColumns>
        <ParentSource isRef="3" />
      </Categories>
    </Relations>
    <Report isRef="0" />
    <Variables isList="true" count="0" />
  </Dictionary>
  <EndRenderEvent>foreach (StiPage page in this.RenderedPages)
{
    double max = 0;
    foreach (StiComponent comp in page.GetComponents())
    {
        if (comp.Bottom &gt; max) max = comp.Bottom;
    }
    page.PageHeight = max + page.Margins.Top + page.Margins.Bottom;
}
</EndRenderEvent>
  <EngineVersion>EngineV2</EngineVersion>
  <GlobalizationStrings isList="true" count="0" />
  <MetaTags isList="true" count="0" />
  <Pages isList="true" count="1">
    <Page1 Ref="5" type="Page" isKey="true">
      <Border>None;Black;2;Solid;False;4;Black</Border>
      <Brush>Transparent</Brush>
      <Components isList="true" count="2">
        <DataCategories Ref="6" type="DataBand" isKey="true">
          <Brush>[157:218:78]</Brush>
          <BusinessObjectGuid isNull="true" />
          <ClientRectangle>0,0.4,19,0.8</ClientRectangle>
          <Components isList="true" count="3">
            <DataCategories_CategoryID Ref="7" type="Text" isKey="true">
              <Brush>Transparent</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>0,0,1.8,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,8</Font>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>DataCategories_CategoryID</Name>
              <Page isRef="5" />
              <Parent isRef="6" />
              <Text>{Categories.CategoryID}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>HotkeyPrefix=None, LineLimit=False, RightToLeft=False, Trimming=None, WordWrap=True, Angle=0, FirstTabOffset=40, DistanceBetweenTabs=20,</TextOptions>
              <VertAlignment>Center</VertAlignment>
            </DataCategories_CategoryID>
            <DataCategories_CategoryName Ref="8" type="Text" isKey="true">
              <Brush>Transparent</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>1.8,0,5,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,8</Font>
              <Margins>0,0,0,0</Margins>
              <Name>DataCategories_CategoryName</Name>
              <Page isRef="5" />
              <Parent isRef="6" />
              <Text>{Categories.CategoryName}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>HotkeyPrefix=None, LineLimit=False, RightToLeft=False, Trimming=None, WordWrap=True, Angle=0, FirstTabOffset=40, DistanceBetweenTabs=20,</TextOptions>
              <VertAlignment>Center</VertAlignment>
            </DataCategories_CategoryName>
            <DataCategories_Description Ref="9" type="Text" isKey="true">
              <Brush>Transparent</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>6.8,0,12.2,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,8</Font>
              <Margins>0,0,0,0</Margins>
              <Name>DataCategories_Description</Name>
              <Page isRef="5" />
              <Parent isRef="6" />
              <Text>{Categories.Description}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>HotkeyPrefix=None, LineLimit=False, RightToLeft=False, Trimming=None, WordWrap=True, Angle=0, FirstTabOffset=40, DistanceBetweenTabs=20,</TextOptions>
              <VertAlignment>Center</VertAlignment>
            </DataCategories_Description>
          </Components>
          <Conditions isList="true" count="0" />
          <DataSourceName>Categories</DataSourceName>
          <Filters isList="true" count="0" />
          <Name>DataCategories</Name>
          <NewPageBefore>True</NewPageBefore>
          <Page isRef="5" />
          <Parent isRef="5" />
          <Sort isList="true" count="0" />
        </DataCategories>
        <DataProducts Ref="10" type="DataBand" isKey="true">
          <Brush>Transparent</Brush>
          <BusinessObjectGuid isNull="true" />
          <ClientRectangle>0,2,19,0.8</ClientRectangle>
          <Components isList="true" count="2">
            <DataProducts_ProductID Ref="11" type="Text" isKey="true">
              <Brush>Transparent</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>0,0,2.8,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,8</Font>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>DataProducts_ProductID</Name>
              <Page isRef="5" />
              <Parent isRef="10" />
              <Text>{Products.ProductID}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>HotkeyPrefix=None, LineLimit=False, RightToLeft=False, Trimming=None, WordWrap=True, Angle=0, FirstTabOffset=40, DistanceBetweenTabs=20,</TextOptions>
              <VertAlignment>Center</VertAlignment>
            </DataProducts_ProductID>
            <DataProducts_ProductName Ref="12" type="Text" isKey="true">
              <Brush>Transparent</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>2.8,0,16.2,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,8</Font>
              <Margins>0,0,0,0</Margins>
              <Name>DataProducts_ProductName</Name>
              <Page isRef="5" />
              <Parent isRef="10" />
              <Text>{Products.ProductName}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>HotkeyPrefix=None, LineLimit=False, RightToLeft=False, Trimming=None, WordWrap=True, Angle=0, FirstTabOffset=40, DistanceBetweenTabs=20,</TextOptions>
              <VertAlignment>Center</VertAlignment>
            </DataProducts_ProductName>
          </Components>
          <Conditions isList="true" count="0" />
          <DataRelationName>CategoriesProducts</DataRelationName>
          <DataSourceName>Products</DataSourceName>
          <Filters isList="true" count="0" />
          <MasterComponent isRef="6" />
          <Name>DataProducts</Name>
          <Page isRef="5" />
          <Parent isRef="5" />
          <Sort isList="true" count="0" />
        </DataProducts>
      </Components>
      <Conditions isList="true" count="0" />
      <Guid>f54ce908f78c4855b4d9f0abc8f326b9</Guid>
      <Margins>1,1,1,1</Margins>
      <Name>Page1</Name>
      <PageHeight>29.7</PageHeight>
      <PageWidth>21</PageWidth>
      <Report isRef="0" />
      <Watermark Ref="13" type="Stimulsoft.Report.Components.StiWatermark" isKey="true">
        <Font>Arial,100</Font>
        <TextBrush>[50:0:0:0]</TextBrush>
      </Watermark>
    </Page1>
  </Pages>
  <PrinterSettings Ref="14" type="Stimulsoft.Report.Print.StiPrinterSettings" isKey="true" />
  <ReferencedAssemblies isList="true" count="8">
    <value>System.Dll</value>
    <value>System.Drawing.Dll</value>
    <value>System.Windows.Forms.Dll</value>
    <value>System.Data.Dll</value>
    <value>System.Xml.Dll</value>
    <value>Stimulsoft.Controls.Dll</value>
    <value>Stimulsoft.Base.Dll</value>
    <value>Stimulsoft.Report.Dll</value>
  </ReferencedAssemblies>
  <ReportAlias>Report</ReportAlias>
  <ReportChanged>10/17/2012 3:55:49 PM</ReportChanged>
  <ReportCreated>4/19/2011 9:33:49 AM</ReportCreated>
  <ReportDescription>Basic reports demonstration.</ReportDescription>
  <ReportFile>D:\DropboxFolder\Dropbox\Work\_Report samples\Dynamical page height 1.mrt</ReportFile>
  <ReportGuid>ee3572d318fe4031822ddce558c4622a</ReportGuid>
  <ReportName>Report</ReportName>
  <ReportUnit>Centimeters</ReportUnit>
  <ReportVersion>2012.3.1401</ReportVersion>
  <Script>using System;
using System.Drawing;
using System.Windows.Forms;
using System.Data;
using Stimulsoft.Controls;
using Stimulsoft.Base.Drawing;
using Stimulsoft.Report;
using Stimulsoft.Report.Dialogs;
using Stimulsoft.Report.Components;

namespace Reports
{
    public class Report : Stimulsoft.Report.StiReport
    {
        public Report()        {
            this.InitializeComponent();
        }

        #region StiReport Designer generated code - do not modify
        #endregion StiReport Designer generated code - do not modify
    }
}
</Script>
  <ScriptLanguage>CSharp</ScriptLanguage>
  <Styles isList="true" count="0" />
</StiSerializer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-06T20:56:22.883

I use from this solution:

Step 1 - set event for end rendering of report:

```
StiOptions.Engine.GlobalEvents.ReportEndRender += Report_EndRender; 
```

Step 2 - set codes to handle height of page and other elements of report:

```
private void Report_EndRender(object sender, EventArgs e)
    {
        foreach (StiPage page in report.RenderedPages)
        {
            double max = 0;
            foreach (StiComponent comp in page.GetComponents())
            {
                if (comp.Bottom > max) max = comp.Bottom;
            }
            page.PageHeight = max + page.Margins.Top + page.Margins.Bottom;

            // set height for "Panel1"
            page.Components["Panel1"].Height = page.Height;
        }
    } 
```

Thanks for [@Isham](https://stackoverflow.com/users/1597249/ishma).

# android - 在 8.9 英寸平板电脑上没有静态尺寸和低分辨率图像的 LinearLayout

> ID：12923584
> 
> 赞同：2
> 
> 时间：2012-10-16T21:19:46.220
> 
> 标签：android, android-layout, android-linearlayout

我今天一直在为 Android 做一个小应用程序，它是 Google 高级搜索的界面。它基本上没有图像，所有小部件的大小都是`wrap_content`或`fill_parent`。我没有使用硬编码的像素尺寸。它基本上由 a 组成`ScrollView`，包括 a `LinearLayout`，其中包括`TextViews`和列表`Spinners`（以及最底部的搜索按钮）。

我不知道这是否是一个常见的事情/问题，我今天找不到任何搜索。除了 Galaxy tab 8.9 inch tab，我没有其他 Android 设备。接下来是我唯一与清单 xml 文件中的样式相关的内容：

```
 <activity android:name="MainActivity"
          android:theme="@android:style/Theme.NoTitleBar"> 
```

我想让我的应用在任何设备上看起来都一样。它没有固定的尺寸，不就是这样吗？我怎样才能解决这个问题？

[源代码在github上，如果有人想看](https://github.com/goktugkayaalp/gasclient.git)

这是 Android 2.2 设备的屏幕截图：

![安卓 2.2](../Images/e4ed02c486e201657864c45d23206519.png)

这也是从 2.2 开始的，但分辨率更高。我正在下载其他一些图像，看看在 3.2 虚拟机中是否可以，我使用的当前图像无法显示小手机视图。

![android 2.2 分辨率更高](../Images/0247cb1cdcebf0d47b7c96df0072523d.png)

从 4.1 手机

![4.1电话](../Images/5c3e1ae033b2afec4e53ca05e7ad3cc5.png)

从 4.1 7 英寸标签。

![从 4.1 7 英寸标签](../Images/eb782fd830fead8973e77f05bceb323c.png)

如我所见，问题仅出在我的设备上：

![在此处输入图像描述](../Images/bc0ce3f26436134ca0ee1de6e368f785.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:52:14.903

好的，如果我没记错，您正在谈论不同 android 版本中的 EditText 外观
如果是，这里是解决方案使用您的所有 EditText 自定义背景，如下所示

```
 <EditText
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:background="@drawable/bg_border_statelist" /> 
```

创建选择器：drawable/bg_border_statelist

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true"
        android:drawable="@drawable/bg_border_selected" />
    <item android:state_focused="true"
        android:drawable="@drawable/bg_border_selected" />
    <item android:drawable="@drawable/bg_border" />
</selector> 
```

可绘制/bg_border

```
<shape android:shape="rectangle">
                    <stroke   
                        android:width="1dp"
                        android:color="#B5B5B5" />                        
                    <solid android:color="#ffffff" />
                    <corners android:radius="0dp" />
                </shape> 
```

可绘制/bg_border_selected

```
<shape android:shape="rectangle">
                    <stroke   
                        android:width="1dp"
                        android:color="#FA9D2C" />                        
                    <solid android:color="#ffffff" />
                    <corners android:radius="0dp" />
                </shape> 
```

根据您的选择使用边框颜色并代替可绘制的形状，您也可以使用9[个补丁图像](http://developer.android.com/reference/android/graphics/NinePatch.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T06:33:56.163

> **您对此进行了足够的研究吗？**
> 
> **你试过什么？**在您的代码中，您没有做任何特别的事情来实现这一点。
> 
> 在向他人寻求帮助之前，请自己提出上述问题并在问题中提及该答案，即提及您尝试过的内容，然后才能引起他人的注意并得到快速答复。

好的，让我们开始吧。

你的问题是

**如何让我的应用程序在所有设备上看起来都一样？**我对吗。

这里所有的设备意味着，

*   不同的屏幕尺寸
*   不同密度（屏幕分辨率）
*   不同的平台版本（例如 2.2 和 4 使用自己的默认主题和样式）

所以请通过上述主题然后**你可以自己做**

以下参考资料将帮助您理解这些想法，

[支持多屏](http://developer.android.com/guide/practices/screens_support.html)

[支持不同的屏幕](http://developer.android.com/training/basics/supporting-devices/screens.html)

[支持不同平台版本](http://developer.android.com/training/basics/supporting-devices/platforms.html)

您可以从[android 示例中获取示例](http://developer.android.com/tools/samples/index.html)

经历那个，尝试一些事情，然后问你的疑问..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:27:55.690

您看到的差异与主题相关。您在设备中看到的 TextFields 使用的是 Holo 主题，因为其他屏幕截图中的那些没有使用它。

如果您想在每台设备中使用 holo 主题，[这里](https://stackoverflow.com/questions/9649634/set-holo-theme-in-older-android-versions)有一个解决方案。（我没有测试，但我想这不是你想要的）

另一方面，如果您的目标是摆脱那个全息主题，您可以只使用另一个主题，例如黑色。只需将清单中的主题定义替换为：

```
 <activity android:name="MainActivity"
          android:theme="@android:style/Theme.Black.NoTitleBar"> 
```

你应该没事！

**编辑**

快速编辑：我正在使用 4.1 来编译它。您使用的是哪个版本？尝试使用 4.1。

您的问题绝对与主题相关。试试我在下面发布的这段代码，如果这在您的设备上不起作用，我可以想到两个原因。一是您没有使用官方的Android。如果您的设备中有一些自定义 rom，例如 Cyanogen，可能会覆盖您的主题。其次，您在设备中设置了一些首选项，该首选项覆盖了您活动中的首选项。我发现这真的不太可能，我以前从未听说过它，但它可能是可能的，因为来自不同制造商的许多不同的操作系统都知道发生了什么。

真的不用放到github上，代码很简单我就放在这里，附上截图：

我的清单设置了两个主题：

```
 <activity
        android:name=".MyActivity"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Black.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>     

    <activity
        android:name=".MyActivity2"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Holo.NoActionBar.Fullscreen">
    </activity> 
```

我的活动代码，它们是相同的，除了显然是为了开始下一个活动

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    super.setContentView(R.layout.edittext);

}

public void ChangeActivity(View v){
    Intent i = new Intent(this, MyActivity.class);    
    startActivity(i);       
} 
```

我可以使用的最简单的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" 
        android:onClick="ChangeActivity"/>

</LinearLayout> 
```

最后，android 3.2（左）和 4.1（右）使用全息和黑色主题的截图：

黑色主题： ![黑色主题](../Images/6dcf00bce946c619aa0f6af31d428de8.png)

全息主题： ![在此处输入图像描述](../Images/3a72bb761f070634d0d8c5d885710612.png)

**编辑**

如果您只是想摆脱标题栏，您可以以编程方式进行。在您的 onCreate 方法和 setContentView 之前使用以下内容：

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

这将摆脱标题栏，将应用程序设置为全屏并且不会弄乱主题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T22:14:02.483

将您的应用程序主题更改为`@android:style/Theme.Black.NoTitle`. 这将使不同操作系统版本之间的演示文稿保持相同。

还可以尝试在清单中设置您的 min 和 target SDK：

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" /> 
```

# python - 最近邻搜索：Python

> ID：12923586
> 
> 赞同：28
> 
> 时间：2012-10-16T21:20:09.993
> 
> 标签：python, numpy, nearest-neighbor, kdtree, closest-points

我有一个二维数组：

```
MyArray = array([6588252.24, 1933573.3, 212.79, 0, 0],
                [6588253.79, 1933602.89, 212.66, 0, 0],
                 etc...) 
```

前两个元素`MyArray[0]`和`MyArray[1]`是点的*X*和*Y*坐标。

对于数组中的每个元素，我想找到以*X*单位为半径返回其单个最近邻居**的最快方法。**我们假设这是在二维空间中。

 *让我们说这个例子`X = 6`。

我通过将每个元素与其他元素进行比较来解决了这个问题，但是当您的列表长度为 22k 点时，这需要 15 分钟左右。我们希望最终在大约 3000 万个点的列表上运行它。

我已经阅读了 Kd 树并理解了基本概念，但在理解如何编写它们时遇到了麻烦。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-26T00:07:55.420

感谢 John Vinyard 建议 scipy。经过一些良好的研究和测试，这里是这个问题的解决方案：

先决条件：安装 Numpy 和 SciPy

1.  导入 SciPy 和 Numpy 模块

2.  制作 5 维数组的副本，其中*仅*包含 X 和 Y 值。

3.  像这样创建一个实例[`cKDTree`](https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.cKDTree.html)：

    ```
    YourTreeName = scipy.spatial.cKDTree(YourArray, leafsize=100)
    #Play with the leafsize to get the fastest result for your dataset 
    ```

4.  查询`cKDTree`6 个单位内的最近邻，如下所示：

    ```
    for item in YourArray:
        TheResult = YourTreeName.query(item, k=1, distance_upper_bound=6) 
    ```

    对于 中的每个项目`YourArray`，`TheResult`将是两点之间距离的元组，以及该点在 中的位置索引`YourArray`。*

# css - 排列 CSS3 下拉菜单

> ID：12923588
> 
> 赞同：0
> 
> 时间：2012-10-16T21:20:16.243
> 
> 标签：css, wordpress, drop-down-menu, menu, menuitem

我尝试了各种显示和位置设置，但我不知道如何在未来的下拉菜单中排列子项。它们与其他菜单项重叠，并且不会留在应有的位置。不幸的是，即使[这个问题+答案](https://stackoverflow.com/questions/8760601/drop-down-menu-css3)也无法帮助我。

这是我的 CSS 代码：

```
#menu ul li a {
text-decoration: none;
background-color: #FF0000;
font-size: 16px;
margin: 10px 5px 10px 5px;
display: block;
float: left;
position:relative; }

#menu ul li a:hover {
background-color: #0000FF; }

#menu ul li ul li a {
clear: left;
background-color: #6F0;
font-size: 10px;
display: block;
position: absolute; } 
```

我尝试了像这样的组合选择器

```
#menu ul li a + #menu ul li ul li a { }

li.page_item > li.page_item { } 
```

但他们也没有工作。

编辑：这是一些 HTML/PHP 代码。这是一个wordpress模板，现在我想我应该在之前提到过......

```
 <div id="menu" role="navigation">
            <?php /* Navigation menu. */ ?>
            <?php wp_nav_menu(array('sort_column' => 'menu_order', 'menu' => 'Categories', 'container_class' => 'main-menu-class',
                                    'container_id' => 'main-menu-id', 'theme_location'  => 'header', 'show_home' => true)); ?>
        </div> <!-- menu --> 
```

呈现的 HTML 代码是：

```
<div id="menu" role="navigation">
<div class="menu">
<ul>
<li class="current_page_item">
<a title="Home" href="http://mywebsite.com/wordpress/">Home</a>
</li>
<li class="page_item page-item-40">
<a href="http://mywebsite.com/wordpress/?page_id=40">Cupcake Ipsum</a>
<ul class="children">
<li class="page_item page-item-388">
<a href="http://mywebsite.com/wordpress/?page_id=388">Red Velvet Cupcake</a>
</li>
<li class="page_item page-item-390">
<a href="http://mywebsite.com/wordpress/?page_id=390">Mango Cupcake</a>
</li>
<li class="page_item page-item-392">
<a href="http://mywebsite.com/wordpress/?page_id=392">Chocolate Cupcake</a>
</li>
</ul>
</li>
<li class="page_item page-item-43">
<a href="http://mywebsite.com/wordpress/?page_id=43">Bacon Ipsum</a>
<ul class="children">
<li class="page_item page-item-405">
<a href="http://mywebsite.com/wordpress/?page_id=405">Bacon Pancakes</a>
</li>
</ul>
</li>
<li class="page_item page-item-45">
<a href="http://mywebsite.com/wordpress/?page_id=45">Veggie Ipsum</a>
<ul class="children">
<li class="page_item page-item-397">
<a href="http://mywebsite.com/wordpress/?page_id=397">Tomato</a>
</li>
<li class="page_item page-item-399">
<a href="http://mywebsite.com/wordpress/?page_id=399">Lettuce</a>
</li>
<li class="page_item page-item-401">
<a href="http://mywebsite.com/wordpress/?page_id=401">Broccoli</a>
</li>
<li class="page_item page-item-403">
<a href="http://mywebsite.com/wordpress/?page_id=403">Onion</a>
</li>
</ul>
</li>
</ul> 
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:00:08.517

我对您的 CSS 进行了一些更改以解决重叠问题。

```
#menu ul li a {
  float: none; /* no need for float */
}

#menu ul li ul li a {
 position: static; /* no need for absolute positioning here */
}

.menu ul li {
  display: inline-block;
  position: relative;
}

.menu li ul {
 position: absolute; 
}

.menu li:not(:hover) ul {
 display: none; 
} 
```

这是一个演示：http: [//jsbin.com/aloreh/1/edit](http://jsbin.com/aloreh/1/edit)

你的普遍问题是你放错了东西`position: absolute`。`position: relative`将所有链接样式应用于实际链接元素是很好的，但您需要将定位应用于列表和列表项。

所以，第一级列表项需要有`position: relative`. 这允许相对于第一级项目定位子菜单。然后子菜单`ul`将具有`position: absolute`，以便它们在悬停时不会重排页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:55:58.633

如果给一个元素绝对定位

```
position: absolute; 
```

在您明确告诉它您希望它出现在页面上的哪个位置之前，它不知道该去哪里。

改变这个小提琴，直到它做你想要的：http: [//jsfiddle.net/hillsons/LUqpM/](http://jsfiddle.net/hillsons/LUqpM/)

# java - 在 Java 中，如何从特定的正则表达式创建所有可能数字的列表？

> ID：12923590
> 
> 赞同：14
> 
> 时间：2012-10-16T21:20:18.320
> 
> 标签：java, regex

我有一个奇怪的问题，至少我从来没有遇到过。我有一个先决条件，即客户具有与标签关联的简单正则表达式。标签是他们所关心的。我想做的是创建一个与这些正则表达式匹配的所有可能数字的列表。当列表超出某个阈值时，我会有逻辑会警告我。

下面是一个正则表达式的例子：`34.25.14.(227|228|229|230|243|244|245|246)`

假设这些 ip(s) 与 ACME 相关联。在用户选择 ACME（在我们的 UI 中）的幕后，我正在填写一个包含所有可能数字的过滤器对象，并将它们作为 OR 查询提交到高度专业化的 Vertica 数据库。

我只是无法确定从所述正则表达式创建数字列表的优雅方式。

另一个方面是，产品另一部分中的 java 代码使用这些正则表达式通过 java Pattern.compile() 显示 ACME，这意味着客户“可以”创建一个复杂的正则表达式。到目前为止，我只见过它们，使用如上所示的简单方法。

有没有一种方法可以根据正则表达式生成列表？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T21:29:50.927

有关的：

生成与正则表达式匹配的数据的库（有限制）： [http ://code.google.com/p/xeger/](http://code.google.com/p/xeger/)

几种解决方案，例如将正则表达式转换为语法： [使用正则表达式生成字符串而不是匹配它们](https://stackoverflow.com/questions/22115/using-regex-to-generate-strings-rather-than-match-them)

* * *

**编辑：**实际上，**你可以让它工作！！！**唯一要解决的问题是施加一些特定于域的约束，以防止像 a+ 这样的组合爆炸。

如果您向 Xeger 类添加如下内容：

```
public void enumerate() {
    System.out.println("enumerate: \"" + regex + "\"");
    int level = 0;
    String accumulated = "";
    enumerate(level, accumulated, automaton.getInitialState());
}

private void enumerate(int level, String accumulated, State state) {
    List<Transition> transitions = state.getSortedTransitions(true);
    if (state.isAccept()) {
        System.out.println(accumulated);
        return;
    }
    if (transitions.size() == 0) {
        assert state.isAccept();
        return;
    }
    int nroptions = state.isAccept() ? transitions.size() : transitions.size() - 1;
    for (int option = 0; option <= nroptions; option++) {
        // Moving on to next transition
        Transition transition = transitions.get(option - (state.isAccept() ? 1 : 0));
        for (char choice = transition.getMin(); choice <= transition.getMax(); choice++) {
            enumerate(level + 1, accumulated + choice, transition.getDest());
        }
    }
} 
```

... 和 XegerTest 类似的东西：

```
@Test
public void enumerateAllVariants() {
    //String regex = "[ab]{4,6}c";
    String regex = "34\\.25\\.14\\.(227|228|229|230|243|244|245|246)";
    Xeger generator = new Xeger(regex);
    generator.enumerate();
} 
```

...你会得到这个：

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running nl.flotsam.xeger.XegerTest
enumerate: "34\.25\.14\.(227|228|229|230|243|244|245|246)"
34.25.14.227
34.25.14.228
34.25.14.229
34.25.14.243
34.25.14.244
34.25.14.245
34.25.14.246
34.25.14.230
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.114 sec 
```

... 你猜怎么着。对于“[ab]{4,6}c”，它正确地产生了 112 个变体。

这确实是一个快速而肮脏的实验，但它似乎有效；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:33:46.597

我会说技术答案是否定的，因为您可以在正则表达式中指定字符（数字）出现零次或多次。这个“或更多”可能意味着任意大量的数字。在实践中，您可能能够限制字符串的长度并根据您在正则表达式中找到的字符递归地构建字符串的超集，然后向它们发送文本以创建您的子集列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:02:08.913

注释：正则表达式是一种可递归枚举的语言，因此存在一种可以枚举所有有效字符串的算法。

即使对于像 Java 这样更复杂的语言，也可以有一个算法来枚举所有 Java 程序；无论您的特定 Java 程序是如何编写的，该算法都会在有限时间内输出与您的程序完全匹配的 Java 程序。

但并非所有语言都可以这样枚举；那么它们就是我们知道存在但我们不能说的语言。它们永远躲避像我们这样的原始智能，它只是一台图灵机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T22:34:30.797

蛮力，多线程，CPU 负载 100%：

```
import java.util.regex.Pattern;

public class AllIP
{
   public static void main( String[] args )
   {
      final Pattern p = Pattern.compile( "34.25.14.(227|228|229|230|243|244|245|246)" );

      int step = 256 / Runtime.getRuntime().availableProcessors();
      for( int range = 0; range < 256; range += step )
      {
         final int from = range;
         final int to   = range + step;
         new Thread(){
            public @Override void run(){
               long atStart = System.currentTimeMillis();
               for( int i = from; i < to ; ++i )
                  for( int j = 1; j < 255; ++j )
                     for( int k = 1; k < 255; ++k )
                        for( int l = 1; l < 255; ++l )
                        {
                           String ip = String.format( "%d.%d.%d.%d", i,j,k,l );
                           if( p.matcher( ip ).matches())
                           {
                              System.out.println( ip );
                           }
                        }
               System.out.println( System.currentTimeMillis() - atStart );
            }
         }.start();
      }
   }
} 
```

只是为了好玩...

*   34.25.14.227
*   34.25.14.228
*   34.25.14.229
*   34.25.14.230
*   34.25.14.243
*   34.25.14.244
*   34.25.14.245
*   34.25.14.246

经过时间：01:18:59

操作系统

*   Microsoft Windows XP Professional 32 位 SP3

中央处理器

*   英特尔至强 W3565 @ 3.20GHz 39 °C

*   Bloomfield 45nm 技术

内存

*   4,00 Go 双通道 DDR3 @ 532MHz (7-7-7-20)

母板

*   LENOVO 联想（1366 针 LGA）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T20:45:49.607

这个问题太神奇了！

我用一个简单的 JavaCC 语法和 3 个类解决了它：Constant、Variable 和 Main。我用作输入的表达式是`(34|45).2\d.14.(227|228|229|230|243|244|245|246)`，请注意 \d 指定变量部分。

下面是 JavaCC 语法：

```
options
{
    static         = false;
    FORCE_LA_CHECK = true;
    LOOKAHEAD      = 5;
}

PARSER_BEGIN( IPGeneratorFromRegExp )
package hpms.study.jj;

public class IPGeneratorFromRegExp
{
    public final java.util.SortedSet< hpms.study.IPPart > _a = new java.util.TreeSet< hpms.study.IPPart >();
    public final java.util.SortedSet< hpms.study.IPPart > _b = new java.util.TreeSet< hpms.study.IPPart >();
    public final java.util.SortedSet< hpms.study.IPPart > _c = new java.util.TreeSet< hpms.study.IPPart >();
    public final java.util.SortedSet< hpms.study.IPPart > _d = new java.util.TreeSet< hpms.study.IPPart >();

}// class IPGeneratorFromRegExp

PARSER_END( IPGeneratorFromRegExp )

SKIP :
{
  " "
| "\r"
| "\t"
| "\n"
}

TOKEN :
{
    < IPPARTX   :                          (["1"-"9"] | "\\d" ) > 
|   < IPPARTXX  :     (["1"-"9"] | "\\d" ) (["0"-"9"] | "\\d" ) > 
|   < IPPART1XX : "1" (["0"-"9"] | "\\d" ) (["0"-"9"] | "\\d" ) >
|   < IPPART2XX : "2" (["0"-"4"] | "\\d" ) (["0"-"9"] | "\\d" ) >
|   < IPPART25X : "2" "5"                  (["0"-"5"] | "\\d" ) >
}

void part( java.util.SortedSet< hpms.study.IPPart > parts ):{ Token token = null; }
{
    (
        token=<IPPART25X>
    |   token=<IPPART2XX>
    |   token=<IPPART1XX>
    |   token=<IPPARTXX>
    |   token=<IPPARTX>
    ){
        parts.add(
            token.image.contains( "\\d" )
                ? new hpms.study.Variable( token.image )
                : new hpms.study.Constant( token.image ));
    }
}

void expr( java.util.SortedSet< hpms.study.IPPart > parts ):{}
{
    "(" part( parts ) ( "|" part( parts ))+ ")"
}

void analyze() :{}
{
    ( part( _a ) | expr( _a )) "."
    ( part( _b ) | expr( _b )) "."
    ( part( _c ) | expr( _c )) "."
    ( part( _d ) | expr( _d ))
} 
```

和 Main.java 的一个片段：

```
 Reader                source      = new StringReader( _regExp.getText());
     IPGeneratorFromRegExp ipGenerator = new IPGeneratorFromRegExp( source );
     ipGenerator.analyze();

     SortedSet< String > a = new TreeSet<>();
     SortedSet< String > b = new TreeSet<>();
     SortedSet< String > c = new TreeSet<>();
     SortedSet< String > d = new TreeSet<>();
     for( IPPart<?> part : ipGenerator._a ) part.expandTo( a );
     for( IPPart<?> part : ipGenerator._b ) part.expandTo( b );
     for( IPPart<?> part : ipGenerator._c ) part.expandTo( c );
     for( IPPart<?> part : ipGenerator._d ) part.expandTo( d );

     _result.clear();
     for( String ac : a )
     {
        for( String bc : b )
        {
           for( String cc : c )
           {
              for( String dc : d )
              {
                 _result.add( ac + '.' + bc + '.' + cc + '.'  + dc );
              }// for
           }// for
        }// for
     }// for 
```

以及生成的 Swing 应用程序的快照（响应速度非常快）：

![应用程序快照](../Images/5466c1e550be349b5901f1adca7dd6cc.png)

整个 Eclipse 项目可以从[lfinance.fr](http://www.lfinance.fr/IPGeneratorFromRegExp.jar)下载。

# php - 基于子数组值对多维数组进行排序和合并

> ID：12923592
> 
> 赞同：0
> 
> 时间：2012-10-16T21:20:25.190
> 
> 标签：php, arrays, sorting, multidimensional-array

> **可能重复：**
> [如何在 php 中对多维数组进行排序](https://stackoverflow.com/questions/96759/how-do-i-sort-a-multidimensional-array-in-php)

我需要排序和合并一个复杂的数组！数组是多维的，子数组使用 2 个键/值，如下所示：

```
<?php
$result = array(
array("1", "20"),
array("1", "33"),
array("2", "10"),
array("2", "25"),
array("2", "7"),
array("3", "33"),
array("3", "80"),
array("4", "300")
);
print_r($result);
?> 
```

现在我需要根据键 [1] 值（在子数组中）的聚合对其进行排序，其中键 [0] 的值相似并合并，然后将其从多到少排序！例如在上面我喜欢结果是：

```
Array
(
    [0] => Array
        (
            [0] => 4
            [1] => 300
        )

    [1] => Array
        (
            [0] => 3
            [1] => 113
        )

    [2] => Array
        (
            [0] => 1
            [1] => 53
        )

    [3] => Array
        (
            [0] => 2
            [1] => 42
        )

) 
```

我希望我的解释足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:43:54.923

这里的关键是`array_multisort`函数，但它需要一些工作才能以正确的格式获取输入。看看下面的代码。首先我们累积值，然后将其拆分为索引数组和值数组，使用多重排序对其进行排序并将其合并在一起。

```
$result2 = array();
foreach($result as $pair) {
    if  (!isset($result2[$pair[0]]))
        $result2[$pair[0]] = 0;
    $result2[$pair[0]] += $pair[1];
}
$array1 = array();
$array2 = array();
foreach($result2 as $key => $value) {
    array_push($array1, $key);
    array_push($array2, $value);
}
array_multisort($array2, SORT_DESC, $array1);
$result3 = array();
for ($i = 0; $i < count($array1); $i++) {
    array_push($result3, array($array1[$i], $array2[$i]));
}
print_r($result3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:09:45.643

在您的特定情况下，您可以将两个操作（汇总和，创建排序数组）压缩为一次迭代。

但是代码变得难以阅读：

```
list($sort, $result) = array_reduce($result, function($a, $v) {
    $a[1][$v[0]] = [$v[0], (@$a[0][$v[0]] += $v[1])];
    return $a;
}, []);

array_multisort($sort, SORT_NUMERIC, SORT_DESC, $result); 
```

# python - 使用python插值稀疏网格（最好是scipy）

> ID：12923593
> 
> 赞同：5
> 
> 时间：2012-10-16T21:20:27.037
> 
> 标签：python, numpy, grid, scipy, interpolation

我有一个大（2000 x 2000）像素网格，其值仅在某些（x，y）坐标处定义。例如，它的简化版本如下所示：

```
-5-3--
---0--
-6--4-
-4-5--
---0--
-6--4- 
```

如何进行线性插值或最近邻插值，以便在网格中的每个位置都有一个定义的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T05:09:35.853

使用 Scipy 函数：

```
import numpy as np
from scipy.interpolate import griddata # not quite the same as `matplotlib.mlab.griddata`

grid = np.random.random((10, 10))
mask = np.random.random((10, 10)) < 0.2

points = mask.nonzero()
values = grid[points]
gridcoords = np.meshgrid[:grid.shape(0), :grid.shape(1)]

outgrid = griddata(points, values, gridcoords, method='nearest') # or method='linear', method='cubic' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T04:46:41.773

这是我的尝试。

```
import numpy as np
from matplotlib.mlab import griddata

##Generate a random sparse grid
grid = np.random.random((6,6))*10
grid[grid>5] = np.nan

## Create Boolean array of missing values
mask = np.isfinite(grid)

## Get all of the finite values from the grid
values = grid[mask].flatten()

## Find indecies of finite values
index = np.where(mask==True)

x,y = index[0],index[1]

##Create regular grid of points
xi = np.arange(0,len(grid[0,:]),1)
yi = np.arange(0,len(grid[:,0]),1)

## Grid irregular points to regular grid using delaunay triangulation
ivals = griddata(x,y,values,xi,yi,interp='nn') 
```

这就是我如何将不均匀分布的点插入到规则网格中。我没有尝试过任何其他类型的插值方法（即线性）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T13:00:01.243

您可以使用以下几行非常简单地获得最近邻插值：

```
from scipy import ndimage as nd

indices = nd.distance_transform_edt(invalid_cell_mask, return_distances=False, return_indices=True)
data = data[tuple(ind)] 
```

其中`invalid_cell_mask`是未定义的数组单元的布尔掩码，`data`是要填充的数组。

[我在Filling gaps in a numpy array 中](https://stackoverflow.com/questions/5551286/filling-gaps-in-a-numpy-array/9262129#9262129)发布了一个完整示例的答案。

# html - Three.js PointLight 因超过 2 个灯而失败

> ID：12923595
> 
> 赞同：1
> 
> 时间：2012-10-16T21:20:40.383
> 
> 标签：html, webgl, three.js

看看这个小提琴：

[http://jsfiddle.net/PRz4G/](http://jsfiddle.net/PRz4G/)

您可以看到关于蓝色的四个白点。这些点中的每一个都应该在同一个地方有一个灯，但其中三个都没有工作。

看看小提琴中的这个数组：

```
var lights = {
    0: [712699, 0, 0],
    1: [732699, 0, 0],
    2: [722699, 10000, 0],
    3: [722699, -10000, 0],
    //4:[722699, 0, 10000],
    //5:[722699, 0, -10000]
}; 
```

如果你也注释掉 2 和 3，你可以看到两个灯渲染成功。取消注释 2，我们又回到了一个工作灯。取消注释 3 和 4，现在我们有一个完整的着色器初始化错误。

我做错了什么？

**更新：** 问题是特定于显示驱动程序的，现在正在为我工​​作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:34:33.153

编辑：这个答案是指旧版本的three.js，不再相关。该`maxLights`参数已被删除。

* * *

首先需要设置`maxLights`参数：

```
renderer: new THREE.WebGLRenderer( { maxLights: 6 } ); 
```

默认为4，否则。有了这个变化，我看到了 6 个灯。

你的演示，如所写，也对我有用。（4 盏灯将光线投射到球体上。）

您也可能遇到硬件问题，阻止了超过 2 个灯。它可能是一个劣质的 GPU。

好消息是您的代码适用于此更改。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T14:27:14.560

您可以使用 Chrome 解决此问题，但您必须编辑快捷方式并添加

```
C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --use-gl=desktop 
```

有了它，您可以随意投射任何光线。

# asp.net - 用户特定的自定义变量

> ID：12923609
> 
> 赞同：0
> 
> 时间：2012-10-16T21:21:51.687
> 
> 标签：asp.net, vb.net

我正试图解决这个问题，但我就是做不到。

假设我有一个名为 custom 的类。我在其中有一个名为 User_ID 的变量，我用它来检索用户的会话（因此我不必一遍又一遍地调用会话变量）。像这样的东西：

```
Public Class custom

Public Shared User_ID as integer

Public Shared sub GatherUserID()

   User_ID = Session ("user_ID")

end sub

end class 
```

是的，这是一个非常简单的例子，但它明白了我的意思。我在经典 ASP 中做过类似的事情（使用包含，而不是类），并且 User_ID 对当时访问相关页面的人来说是唯一的。

出于某种原因，这是我不明白的，当我在自定义类中使用 custom.User_ID 时，它是为**所有人**共享的。那是我不想要的。我想要的是能够使用这样的变量并保持用户特定。我看到了跨类共享变量的优势（例如数据库连接字符串），但我看不到如何在自定义类中设置自定义变量，我可以只为该用户使用而无需不断调用会话。

我看到我可以将它声明为属性而不是共享变量，但我真的不知道这到底是为了完成什么，而且似乎没有人有明确的解释。属性用户/会话是特定的吗？它会因此解决我的具体问题吗？这是我不明白的。

**编辑**：只是为了澄清一下，这个例子中的 user_ID 是我打算在创建页面期间被调用的几个地方使用的东西（例如主文件，页面本身，各种类。）因此创建的原因一个自定义变量。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:13:29.487

共享意味着它与应用程序域中的每个人共享。当您调用一个方法并设置一个共享变量时，使用该共享变量的所有内容都将返回相同的值。

您可以做的是包装您对 Session 对象的访问。使用模块或我的首选方法，使用扩展方法和我挂起会话的共享自定义类。这使我可以看到它来自 Session，但可以像 Session.vars.UserID 一样访问它，其中 UserID 是 vars 类的属性。

```
Module SessionExt

    Public Class SessionVars
        Private this as HttpSessionState
        Public New (ths as HttpSessionState)
            this = ths
        End New
        Public Property Example as Integer
            Get
               Static nm as String = MethodBase.GetCurrentMethod().Name.Substring(4)
               return CType(this(nm), Integer)
            End Get
            Set (value as Integer)
               Static nm as String = MethodBase.GetCurrentMethod().Name.Substring(4)
               this(nm) = value
            End Set
        End Property 
    End Class
    <Extension()>
    Public Function vars(ByVal this as HttpSessionState) as SessionVars
        return New SessionVars(this)
    End Function
End Module 
```

就这样，你所有的会话变量都包含在一个漂亮的类中。添加新属性是简单的样板代码，您所要做的就是更改名称并设置类型。您可以将其重构为更好的名称，查看它的使用位置，使用它来包含更复杂的结构（数据表、其他类或结构等）。

注意：如果您使用的是 global.asax，那么当您的代码运行时，会话可能尚未建立，请注意您从那里调用的任何属性要么不使用会话状态，要么首先检查 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:29:53.527

```
Public Class custom

Public User_ID as integer

Public sub GatherUserID()

   User_ID = Session ("user_ID")

end Sub

end Class
```

然后，对于每个启动会话的新用户：

```
 Dim userSpecificCustom as New Custom()
userSpecificCustom.GatherUserID() 
```

我是一个 C# 人，所以如果语法不是 100% 正确，请不要让我失望。

还建议将 User_ID 设为属性而不是公共字段。（参见例如[http://www.vbdotnetheaven.com/uploadfile/manish1231/fields-and-properties-in-vb-net/](http://www.vbdotnetheaven.com/uploadfile/manish1231/fields-and-properties-in-vb-net/)或[http://blogs.msdn.com/b/vbteam/archive/2009/09 /04/properties-vs-fields-why-does-it-matter-jonathan-aneja.aspx](http://blogs.msdn.com/b/vbteam/archive/2009/09/04/properties-vs-fields-why-does-it-matter-jonathan-aneja.aspx) )

# sql - SQL Server 2008：如果在其他多个值集中设置了多个值

> ID：12923611
> 
> 赞同：0
> 
> 时间：2012-10-16T21:21:58.677
> 
> 标签：sql, sql-server-2008, reporting-services, ssrs-2008, sqlcompare

在 SQL 中，有没有办法完成这样的事情？这是基于 SQL Server 报表生成器中内置的报表，用户可以在其中将多个文本值指定为单个报表参数。报表查询获取用户选择的所有值并将它们存储在单个变量中。我需要一种方法让查询只返回与用户指定的每个值都有关联的记录。

```
-- Assume there's a table of Elements with thousands of entries.  
-- Now we declare a list of properties for those Elements to be associated with.

create table #masterTable (
    ElementId int, Text varchar(10)
)

insert into #masterTable (ElementId, Text) values (1, 'Red');
insert into #masterTable (ElementId, Text) values (1, 'Coarse');
insert into #masterTable (ElementId, Text) values (1, 'Dense');
insert into #masterTable (ElementId, Text) values (2, 'Red');
insert into #masterTable (ElementId, Text) values (2, 'Smooth');
insert into #masterTable (ElementId, Text) values (2, 'Hollow');

-- Element 1 is Red, Coarse, and Dense.  Element 2 is Red, Smooth, and Hollow.  
-- The real table is actually much much larger than this; this is just an example.

-- This is me trying to replicate how SQL Server Report Builder treats 
-- report parameters in its queries.  The user selects one, some, all, 
-- or no properties from a list. The written query treats the user's   
-- selections as a single variable called @Properties.
-- Example scenario 1: User only wants to see Elements that are BOTH Red and Dense.
select e.* 
from Elements e 
where (@Properties) --ideally a set containing only Red and Dense
in
(select Text from #masterTable where ElementId = e.Id) --ideally a set containing only Red, Coarse, and Dense
--Both Red and Dense are within Element 1's properties (Red, Coarse, Dense), so Element 1 gets returned, but not Element 2.

-- Example scenario 2: User only wants to see Elements that are BOTH Red and Hollow.  
select e.* from Elements e where
(@Properties) --ideally a set containing only Red and Hollow
in
(select Text from #masterTable where ElementId = e.Id)
--Both Red and Hollow are within Element 2's properties (Red, Smooth, Hollow), so Element 2 gets returned, but not Element 1.

--Example Scenario 3: User only picked the Red option.
select e.* from Elements e where
(@Properties) --ideally a set containing only Red
in
(select Text from #masterTable where ElementId = e.Id)
--Red is within both Element 1 and Element 2's properties, so both Element 1 and Element 2 get returned. 
```

上面的语法实际上不起作用，因为 SQL 似乎不允许在“in”比较的左侧有多个值。返回的错误：

```
Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression. 
```

我什至在正确的轨道上吗？对不起，如果这个例子看起来冗长或令人困惑。

这是我正在使用的确切代码：

```
select p.*
from Products p
where
(
    (
        --user can search through gloves, bats, or both
        p.TypeId = 2 and 'Bat' in (@ProductTypes) 
        and 
        (
            (
                (@BatProperties) COLLATE DATABASE_DEFAULT in 
                (
                    select props.Name from PropertyTypes props
                    inner join ProductProperties pp on props.Id = pp.TypeId
                    where pp.ProductId = p.Id
                )
            --still want query to run when no properties are selected
            ) or not exists(select * from @BatProperties)
        )
    )
    or
    (
        p.TypeId = 1 and 'Glove' in (@ProductTypes) --user can search through gloves, bats, or both
        and
        (
            (
                (@GloveProperties) COLLATE DATABASE_DEFAULT in 
                (
                    select props.Name from PropertyTypes props
                    inner join ProductProperties pp on props.Id = pp.TypeId
                    where pp.ProductId = p.Id
                )
            --still want query to run when no properties are selected
            ) or not exists(select * from @GloveProperties)
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:03:54.543

假设元素文本字段不包含逗号，您可以先将参数字符串标记化并将属性填充到临时表中，随后可以将其与#masterTable 连接以获得具有所有所需属性的元素。CTE 可用于如下标记（代码不是生产标准）

```
declare @parameter varchar(1000)
declare @num_of_params int
set @num_of_params = 0
set @parameter = 'Red, Dense, Coarse'
CREATE TABLE #tmp (id int, string varchar(1000))

INSERT INTO #tmp (id, string)
SELECT 1, @parameter 

;WITH test (id, lft, rght, idx)
AS 
(
    SELECT t.id
        ,LEFT(t.string, CHARINDEX(', ', t.string) - 1)
        ,SUBSTRING(t.string, CHARINDEX(', ', t.string) + 2, DATALENGTH(t.string))
        ,0
    FROM #tmp t
    UNION ALL
    SELECT c.id
        ,CASE WHEN CHARINDEX(', ', c.rght) = 0 THEN c.rght ELSE LEFT(c.rght, CHARINDEX(', ', c.rght) - 1) END
        ,CASE WHEN CHARINDEX(', ', c.rght) > 0 THEN SUBSTRING(c.rght, CHARINDEX(', ', c.rght) + 2, DATALENGTH(c.rght)) 
            ELSE '' END
        ,idx + 1
    FROM test c 
    WHERE DATALENGTH(c.rght) > 0
)

select * into #test from test
select @num_of_params = count(*) from #test
Drop table #tmp
select @num_of_params

select e.* from Elements e where elementID in (
select elementID
from #masterTable  m inner join #test t 
on m.text = t.lft
group by m.ElementID
having count(*) = @num_of_params
)

drop table #test 
```

# c# - 在 Application_Start 上启动长时间运行的线程时的潜在陷阱

> ID：12923616
> 
> 赞同：4
> 
> 时间：2012-10-16T21:22:08.403
> 
> 标签：c#, asp.net, .net, multithreading, iis

我希望将这篇文章塑造成一个合法的 StackOverflow 问题，因为我真的很想深入了解这种情况，但我肯定可以看看它是否过于本地化或被视为“意见”。

这是我的场景：当我加载我的 Web 应用程序时，我从数据库中加载了一大堆数据并将其缓存。问题是，这个过程大约需要 10-15 秒，并且会在 Web 服务器首次启动时产生延迟。这在开发时有点烦人，并且当我在生产中反弹 Web 服务器时也会导致一些问题（因为这是一个新站点，我经常在发现小错误时对其进行热修复，或者对 IIS 设置进行修改）。

我想知道 - 我可以在应用程序启动时将这项工作卸载到一个新线程中，并在其他用户使用该站点时在后台进行吗？显然，当网站加载时，某些功能在大约 10-15 秒内无法工作，但我可以处理这种情况或阻止，直到数据可用。起初，我想不会。如果请求结束，Web 服务器要么终止这些线程，要么阻塞直到这些线程完成。我决定编写一个小测试应用程序来测试这个理论：

```
public class Global : System.Web.HttpApplication
{
   void Application_Start(object sender, EventArgs e)
   {
      Thread thread = new Thread(LoadData);
      thread.Start();
   }

   private void LoadData()
   {
      for (int i = 0; i < 100; i++)
      {
         Trace.WriteLine("Counter: " + i.ToString());
         Thread.Sleep(1000);
      }
   }
} 
```

当应用程序启动时，我启动了一个新线程，并将其计数为 100。令我惊讶的是，我立即进入主页，在我的 Visual Studio 调试输出窗口中，我可以看到递增的数字计数。我真的很惊讶这个作品。

**我的问题：**

首先，这样做有什么问题吗？它是在自找麻烦吗？有什么事情会爆炸吗？这种行为是否会在 Web 服务器或 IIS 版本之间发生变化，因为它们可能使用不同的线程模型？我正在寻找有关此设计的总体反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:32:53.323

**tl; dr：**您正在做的事情可能很好，并且是处理这种情况的常用方法。

线程肯定有问题。并不是说您不应该在这种情况下使用它们，但明智的做法是确保您理解它们。滥用一句老梗：“程序员经常会看到一个并发问题，然后用另一个线程解决它。现在他们有两个问题。”

如果您的线程打算作为后台线程（这意味着如果线程仍在运行，它不应阻止您的站点关闭），请确保设置了 IsBackground 属性。更好的是，使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。

在初始化线程完成之前，您的站点的可用性如何？在初始化时显示界面是否有任何真正的理由？

我已经完全直接使用线程进行并发 - 从害怕它们，到认为我理解它们并拥抱它们，再到认为我理解它们并害怕它们。现在，当我想解决并发/异步问题时，我通常会尝试创建一个由多个相互通信的并发（但单线程）进程组成的架构。很多事情都变得更简单了，我已经取得了很大的成功。

在您当前的情况下，如果您可以确保在线程准备就绪之前不访问线程正在准备的资源，那么使用后台线程来处理数据库负载可能足够安全。但是，（如果您可以针对 .Net 4.0），执行所需操作的更好方法是利用[Task Async](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)库 - 也就是说，将您的例程编写为异步的，并返回 T 的 Task 而不是 T本身。如果做得正确，这可以让您的网站对用户做出响应，即使在单线程环境中，甚至在它仍在后台加载资源时也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:42:28.277

问题是当你去使用缓存中不存在的东西时。

我同意 Drew 的观点，就像一个 BackGroundWorker。

The site needs to have two modes were features are disabled that depend on the cache.
When the BackGroundWorker is complete then turn on all the features.
Users do no like clicking a button to be told not ready try again later.

# email - 为 lucene 的电子邮件标头创建令牌

> ID：12923617
> 
> 赞同：0
> 
> 时间：2012-10-16T21:22:16.180
> 
> 标签：email, header, lucene, tokenize, analyzer

这是 rfc822、rfc2822 和 MIME 下定义的示例标头 现在我想使用 lucene 创建全文搜索。如果我使用标准分析器，它将创建太多无用的令牌，从而降低性能。有什么方法可以通过编写自定义分析器和标记器来创建好的标记。

来自 webmaster@email.marketingmag.ca

Microsoft Mail Internet 标头 2.0 版

收到：来自 sdlasd02.medicis.com ([172.23.163.35]) 由 mpc-exchange.medicis.com 与

微软 SMTPSVC(6.0.3790.3959); 2009 年 6 月 1 日星期一 04:30:59 -0700

收到：来自 sdlasd02.medicis.com 和 Microsoft SMTPSVC 的邮件取件服务；2009 年 6 月 1 日星期一 04:30:59 -0700

收到：来自 SDLMAIL01.medicis.com ([98.175.1.32]) 的 sdlasd02.medicis.com 和 Microsoft SMTPSVC(6.0.3790.1830)；2009 年 6 月 1 日星期一 04:30:59 -0700

返回路径：bo-buhbpmfbpgh9f6axbzpa2ae1achzvh@b.email.marketingmag.ca

X-CTCH-ID：*CFBA793F-FB3C-4DEB-A504-C6165B493680*

X-CTCH-RefID：str=0001.0A090202.4A23BBF3.009A,ss=1,fgs=0

X-CTCH-动作：忽略

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:22:19.527

您通常会为每个您感兴趣的标头添加一个字段（例如日期、消息 ID、发件人：等）并忽略其余部分。每个字段都属于相关类型，并进行相应分析

# java - Java：如何启动一些异步操作并从其他线程更新 ui？

> ID：12923625
> 
> 赞同：1
> 
> 时间：2012-10-16T21:22:35.663
> 
> 标签：java, multithreading, user-interface, refresh, freeze

我有一个小问题，现在我必须处理一个小型 Java 项目。我正在尝试从 Button 事件处理程序运行几个线程；那么最后一个线程必须更新 UI 上的 TextArea。线程正在做计算工作。最重要的部分是让 UI 工作正常 - 我不想冻结 UI，当然我想定期从其他线程之一更新 UI 的 TextArea（不是 ui 的线程）。所以这是我的代码的一部分：

在 Button 的事件处理程序中，我正在启动这 4 个线程：

```
Thread generate = new CombinaMaker();
generate.run();

Thread forward = new TranslateForward();
forward.run();

Thread backward = new TranslateBackward();
backward.run();

Thread refresh = new Refresher();
refresh.run(); 
```

我希望线程同时工作。Refresher 线程必须定期更新 UI TextArea 组件。

因此，这是我从 Refresher 线程更新 UI 的方法：

```
public static void updateProgress() 
{
    SwingUtilities.invokeLater(new Runnable() 
    {   
         public void run() 
         {
             //HERE
             //I have a loop that have to be looping at every 500 ms
         }
     }
} 
```

我的问题是：我应该这样做吗？我需要简单有效。这个循环让我很难过，因为只要应用程序正常工作，它就必须循环。这可能是冻结用户界面的原因吗？我知道我在某个地方犯了大错误，但此刻我无法独自找到它。也许你可以建议我一些简单的解决方案。最后一个想法 - 前 4 个线程：我想“同时”启动它们，而不会冻结我的 UI。这种方式（从事件处理程序中像这样启动它们......）是正确的还是可能更好？非常感谢朋友！

PS。如果通过我的“刷新”线程刷新 UI 是一项艰巨的工作，我已经准备好妥协变体 - 通过他自己的线程（UI 线程）更新 UI。但在这种情况下，我可能必须使用一些“时间拍摄机制”——避免 UI 冻结。你在想什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:38:33.563

主要问题是你的算法。代替

```
SwingUtilities.invokeLater(new Runnable() {   
    public void run() {
        //HERE
        //I have a loop that have to be looping at every 500 ms
    }
} 
```

你应该有

```
// HERE
// I have a loop that have to be looping at every 500 ms
// and when something must be updated in the GUI:
SwingUtilities.invokeLater(new Runnable() {   
    public void run() {
        // update the GUI as fast as possible
    }
}); 
```

IE

```
while (true) {
    Thread.sleep(500L);
    String update = getUpdate();
    SwingUtilities.invokeLater(new Runnable() {   
        public void run() {
            textArea.append(update);
        }
    });
} 
```

传递给的 runnable`SwingUtilities.invokeLater()`在事件调度线程中执行。它不能执行长时间运行的任务。无休止地循环是一项非常耗时的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T21:38:10.693

您不想循环传递给invokeAndDoLater 的runnable。请参阅此示例：[http ://www.javamex.com/tutorials/threads/invokelater.shtml](http://www.javamex.com/tutorials/threads/invokelater.shtml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T21:32:09.830

SwingUtilities.invokeLater 并未设计为调用长时间运行的线程。您的问题的一种解决方案可能是[这个](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)。

您还可以尝试反转循环和 SwingUtilities.invokeLater 调用的嵌套，但这是否可行取决于您的代码的其余部分

```
do {
    // Sleep and other stuff
    SwingUtilities.invokeLater(new Runnable() {
        public void run()  {
        // Update UI
        }
    });
} while(...); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T21:41:30.333

> 我不想冻结用户界面，当然

为不想冻结 UI 点赞。不幸的是

> 我想定期从其他线程之一更新 UI 的 TextArea

不是一种选择。更新 Swing 组件必须在 UI 线程（事件调度线程）上完成。幸运的是，Swing 有一个用于定期更新 UI 的内置类：`javax.swing.Timer`类。在`Timer`后台运行，并在 Event Dispatch Thread 上执行，因此它非常适合此任务。

# ruby - 山狮安装 rvm ree-1.8.7

> ID：12923628
> 
> 赞同：0
> 
> 时间：2012-10-16T21:22:49.687
> 
> 标签：ruby, rvm, osx-mountain-lion

我尝试遵循[其他答案](https://stackoverflow.com/questions/11664835/mountain-lion-rvm-install-1-8-7-x11-error/11666019#11666019)，但遇到以下问题：

```
$ export CPPFLAGS=-I/opt/X11/include
$ CC=/usr/local/bin/gcc-4.2 rvm reinstall ree-1.8.7
/Users/username/.rvm/src/ree-1.8.7-2012.02 has already been removed.
/Users/username/.rvm/rubies/ree-1.8.7-2012.02 has already been removed.
No binary rubies available for: osx/10/x86_64/ree-1.8.7-2012.02.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
You requested building with '/usr/local/bin/gcc-4.2' but it is not in your path. 
```

还有什么我做错了吗？我正在使用 Apple 10 月发布的命令行工具，如果有帮助的话……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:39:17.300

好的，在对另一个答案进行了一些讨论之后，我让它像这样工作......

首先，安装 brew 然后执行以下操作：

```
brew tap homebrew/dupes
brew install apple-gcc42 
```

然后解决方案的其余部分将起作用：

```
export CPPFLAGS=-I/opt/X11/include
CC=/usr/local/bin/gcc-4.2 rvm reinstall ree-1.8.7 
```

# c# - Try-Catch 语句结束 While 循环读取 C# 中的 XML 文件

> ID：12923630
> 
> 赞同：3
> 
> 时间：2012-10-16T21:23:11.907
> 
> 标签：c#, while-loop, try-catch, switch-statement, xmltextreader

我有一个遍历 XML 文件的 while 循环，对于其中一个节点“url”，其中有时存在无效值。我在此周围放置了一个 try-catch 语句来捕获任何无效值。问题是，每当抓取到无效值时，while 循环就会被终止，并且程序会在该循环之外继续。如果发现无效值，我需要 while 循环继续读取 XML 文件的其余部分。

这是我的代码：

```
 XmlTextReader reader = new XmlTextReader(fileName);
        int tempInt;

        while (reader.Read())
        {
            switch (reader.Name)
            {
                case "url":
                    try
                    {
                        reader.Read();
                        if (!reader.Value.Equals("\r\n"))
                        {
                            urlList.Add(reader.Value);
                        }
                    }
                    catch
                    {                            
                        invalidUrls.Add(urlList.Count);   
                    }
                    break;
            }
        } 
```

我选择不包含 switch 语句的其余部分，因为它不相关。这是我的 XML 示例：

```
<?xml version="1.0"  encoding="ISO-8859-1" ?>
<visited_links_list>
    <item>
        <url>http://www.grcc.edu/error.cfm</url>
        <title>Grand Rapids Community College</title>
        <hits>20</hits>
        <modified_date>10/16/2012 12:22:37 PM</modified_date>
        <expiration_date>11/11/2012 12:22:38 PM</expiration_date>
        <user_name>testuser</user_name>
        <subfolder></subfolder>
        <low_folder>No</low_folder>
        <file_position>834816</file_position>
     </item>
</visited_links_list> 
```

我在整个代码中遇到的异常类似于以下内容：

**“''，十六进制值 0x05，是无效字符。第 3887 行，位置 13。”**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:43:44.203

观察：

您为每个条目调用`reader.Read()` **两次**。一次进入`while()`，一次进入`case`。你真的是要跳过记录吗？如果源 XML 中有奇数个条目，这**将**`reader.Read()`导致异常（因为将 XML 流中的指针前进到下一个项目），但**不会捕获**该异常，因为它发生在您的`try...catch`.

除此之外：

```
reader.Read(); /// might return false, but no exception, so keep going...

if (!reader.Value.Equals("\r\n")) /// BOOM if the previous line returned false, which you ignored
{ 
    urlList.Add(reader.Value); 
} 
/// reader is now in unpredictable state 
```

**编辑**

*冒着写长篇答案的风险……*

您收到的错误

**“''，十六进制值 0x05，是无效字符。第 3887 行，位置 13。”**

表示您的源 XML 格式不正确，并且以某种方式`^E`在指定位置以 (ASCII 0x05) 结尾。我会看看那条线。如果您从供应商或服务获取此文件，您应该让他们修复他们的代码。更正该内容以及 XML 中的任何其他格式错误的内容应该可以更正您所看到的问题。

一旦修复，您的原始代码应该可以工作。但是，使用`XmlTextReader`它并不是最强大的解决方案，并且涉及构建一些 Visual Studio 会很乐意为您生成的代码：

在 VS2012 中（我没有再安装 VS2010，但它应该是相同的过程）：

*   将 XML 示例添加到您的解决方案中

*   在该文件的属性中，将 CustomTool 设置为“MSDataSetGenerator”（不带引号）

*   IDE 应生成一个 .designer.cs 文件，其中包含一个可序列化的类，该类为 XML 中的每个项目提供一个字段。（如果没有，请在解决方案资源管理器中右键单击 XML 文件并选择“运行自定义工具”。）

![在此处输入图像描述](../Images/a59df4962c9ac2346bfa85ecbaa39a17.png)

*   使用如下代码在运行时加载具有与示例相同架构的 XML：

    ```
    /// make sure the XML doesn't have errors, such as non-printable characters
    private static bool IsXmlMalformed(string fileName)
    {
        var reader = new XmlTextReader(fileName);
        var result = false;

        try
        {
            while (reader.Read()) ;
        }
        catch (Exception e)
        {
            result = true;
        }

        return result;
    }

    /// Process the XML using deserializer and VS-generated XML proxy classes
    private static void ParseVisitedLinksListXml(string fileName, List<string> urlList, List<int> invalidUrls)
    {
        if (IsXmlMalformed(fileName))
            throw new Exception("XML is not well-formed.");

        using (var textReader = new XmlTextReader(fileName))
        {
            var serializer = new XmlSerializer(typeof(visited_links_list));

            if (!serializer.CanDeserialize(textReader))
                throw new Exception("Can't deserialize this XML. Make sure the XML schema is up to date.");

            var list = (visited_links_list)serializer.Deserialize(textReader);

            foreach (var item in list.item)
            {
                if (!string.IsNullOrEmpty(item.url) && !item.url.Contains(Environment.NewLine))
                    urlList.Add(item.url);
                else
                    invalidUrls.Add(urlList.Count);
            }
        }
    } 
    ```

您也可以使用 Windows SDK 中包含的 XSD.exe 工具来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:35:09.837

我感觉`reader`在抛出异常后处于错误状态（因为`reader.Read();`（在 内部`switch`，而不是`while`）最有可能是发生异常的行。然后`reader.Read()`in`while`不返回任何内容，并且退出。

我`switch`在控制台应用程序中做了一个简单的操作，并在其中捕获和异常，并且包含循环继续进行。

```
var s = "abcdefg";
foreach (var character in s)
{
    switch (character)
    {
        case 'c':
            try
            {
                throw new Exception("c sucks");
            }
            catch
            {
                // Swallow the exception and move on?
            }
            break;
        default:
            Console.WriteLine(character);
            break;
    }
} 
```

如果您遍历代码，它是否会尝试`reader.Read()`在`while`捕获异常后运行？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:05:00.987

我假设您正在阅读一个有效的 xml 文档，例如 myFile.xml。我还假设“url”是您要获取的元素。

将文档加载到 XMLDocument 类中并使用它来遍历节点。这应该消除坏字符，因为它会将这些字符转换为正确的格式，例如 & 会变成 amp; 等等。。

下面的方法应该适用于您提供的示例。

```
 //get the text of the file into a string
        System.IO.StreamReader sr = new System.IO.StreamReader(@"C:\test.xml");
        String xmlText = sr.ReadToEnd();
        sr.Close();  
        //Create a List of strings and call the method
        List<String> urls = readXMLDoc(xmlText);
        //check to see if we have a list
        if (urls != null)
        {
            //do somthing
        }

    private List<String> readXMLDoc(String fileText)
    {
        //create a list of Strings to hold our Urls
        List<String> urlList = new List<String>();
        try
        {
            //create a XmlDocument Object
            XmlDocument xDoc = new XmlDocument();
            //load the text of the file into the XmlDocument Object
            xDoc.LoadXml(fileText);
            //Create a XmlNode object to hold the root node of the XmlDocument
            XmlNode rootNode = null;
            //get the root element in the xml document
            for (int i = 0; i < xDoc.ChildNodes.Count; i++)
            {
                //check to see if it is the root element
                if (xDoc.ChildNodes[i].Name == "visited_links_list")
                {
                    //assign the root node
                    rootNode = xDoc.ChildNodes[i];
                    break;
                }
            }

            //Loop through each of the child nodes of the root node
            for (int j = 0; j < rootNode.ChildNodes.Count; j++)
            {
                //check for the item tag
                if (rootNode.ChildNodes[j].Name == "item")
                {
                    //assign the item node
                    XmlNode itemNode = rootNode.ChildNodes[j];
                    //loop through each if the item tag's elements
                    foreach (XmlNode subNode in itemNode.ChildNodes)
                    {
                        //check for the url tag
                        if (subNode.Name == "url")
                        {
                            //add the url string to the list
                            urlList.Add(subNode.InnerText);
                        }
                    }
                }
            }
        }
        catch (Exception e)
        {
            System.Windows.Forms.MessageBox.Show(e.Message);
            return null;
        }
        //return the list
        return urlList;
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T21:30:45.960

使用[继续](http://msdn.microsoft.com/en-us/library/923ahwt1%28v=vs.100%29.aspx)

```
while (reader.Read())
        {
            switch (reader.Name)
            {
                case "url":
                    try
                    {
                        reader.Read();
                        if (!reader.Value.Equals("\r\n"))
                        {
                            urlList.Add(reader.Value);
                        }
                    }
                    catch
                    {
                        invalidUrls.Add(urlList.Count);
                        continue;
                    }
                    break;
            }
        } 
```

# php - 在站点的每个文件夹上放置一个 index.php（或 .html）文件，是一种好的安全做法吗？

> ID：12923638
> 
> 赞同：1
> 
> 时间：2012-10-16T21:23:53.590
> 
> 标签：php, security, webserver

我已经听过很多次了：“在您的网络服务器中的每个文件夹上创建一个 index.php，以确保用户不会看到文件夹中的文件列表”

真的吗？我需要一些好的安全实践。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:26:52.877

你可以这样做，但你可以`.htaccess`像这样简单地阻止它。

防止使用 .htaccess 列出目录 `Options -Indexes`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:25:51.100

我认为这是一个很好的做法。它可以防止用户深入了解您的整个目录结构 - 因此，如果他们正在寻找漏洞，他们的工作会更加困难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T21:27:15.413

简短的回答：没有。

长答案：是的。

拥有默认文档可能确实会阻止输出目录列表，但是：

*   您可以通过其他方式阻止目录列表（.htaccess，服务器配置）
*   如果他们猜测文件名，仍然可以找到文件。
*   您可以将所有文件放在文档根目录之外，并且只有一个脚本可以路由所有 url。因此，没有什么可以列出的。

因此，尽管您是对的，但很容易忘记目录，并且创建所有这些文件需要做很多工作。并且它只保护您不被列出，并且仅当 index.html 确实是默认文档名称时（再次：服务器配置）。它不会阻止对您的脚本的任何直接访问，因此请使用更适当的安全性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T21:47:59.717

在**Apache HTTPd .htaccess**中使用：

```
Options -Indexes 
```

并在**Microsoft IIS web.config**中使用：

```
<configuration>
    <system.webServer>
        <directoryBrowse enabled="false" /><!-- THIS -->
    </system.webServer>
</configuration> 
```

问候。每个网络服务器都有自己的方式，但要避免文件夹中的 index.html。为此使用网络服务器功能更安全、更高效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T21:27:24.377

从您的服务器配置文件中禁用目录列表不是更好的解决方案吗？你的想法对我来说听起来像是一个黑客..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T21:29:18.107

您可以通过将以下行添加到 public_html 文件夹中的 .htaccess 文件来禁用目录列表，而不是将索引文件放在每个文件夹中：

```
Options -Indexes 
```

# php - mysql中按频率排序的技术问题

> ID：12923640
> 
> 赞同：0
> 
> 时间：2012-10-16T21:24:16.653
> 
> 标签：php, mysql

我的情况是一个包含联系人姓名的页面，它与当前用户最常访问的 5 个联系人相呼应。我这样订购它们：

```
$name_a=mysql_query(SELECT * FROM contacts WHERE email='$semail' ORDER BY frequency 
DESC);
$name_b=mysql_query(SELECT * FROM contacts WHERE email='$semail' ORDER BY frequency           
DESC OFFSET1); 
```

当成员单击与此名称关联的提交按钮时，它会将 1 添加到该用户的“频率”列。像这样：

```
UPDATE contacts SET frequency = frequency + 1 WHERE email='$semail' AND      
contact_a='$a[contact_a]' 
```

当两个成员具有相同的频率值时会出现问题，因为当单击其中一个名称时，它会添加 1 并更改顺序，因此其他信息会在页面刷新后出现。例如，如果 'tom' 和 'bob' 的频率值都是 10，那么首先回显 tom（因为他的名字首先出现在数据库中）然后是 bob，如下所示：

```
if ($name_a = mysql_fetch_assoc($name_a)) {echo $name_a['firstname'];} // eg. tom
if ($name_b = mysql_fetch_assoc($name_b)) {echo $name_b['firstname'];} // eg. bob 
```

然后，如果有人单击 bob 的按钮，他的频率值变为 11，当页面刷新时，他变为 $name_a 并且来自单击提交按钮的其他信息将为 tom。希望我已经解释过了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:28:04.960

`...ORDER BY frequency, name`，所以在任何给定的频率内，名称都是按字母顺序排列的，而不是它们的自然排序顺序？

# magento - Magento 加载客户数据不起作用

> ID：12923641
> 
> 赞同：2
> 
> 时间：2012-10-16T21:24:21.823
> 
> 标签：magento, load, observers

我的观察员的一项职能有问题。出于某种原因，我无法加载客户信息以进行进一步操作

```
$user = $observer->getEvent()->getCustomer();
$usertemp = Mage::getModel('customer/customer')->load($user->getId()); 
```

我检查并 $user->getId() 实际上带有 id；但是，当我尝试时，例如：

```
$password = $usertemp->getPassword(); 
```

设置了一个空值而不是用户的密码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:33:26.403

首先-`customer`如果您已经有一个对象，为什么要加载对象`$observer->getEvent()->getCustomer()`？这个操作在这里是多余的，只会增加资源和时间消耗。

第二 - 为了安全措施 Magento 不会以解密的形式存储用户密码。如果要获取用户密码，请尝试下一个代码：

```
$passwHash = $customer->getPasswordHash();
$password = Mage::helper('core')->decrypt($passwHash); // this will not work 
```

**更新**：`Mage::helper('core')->decrypt`不会解密密码散列，因为它是用 md5 散列函数散列的，所以有一种方法可以检查密码是否相同（`Mage::helper('core')->validateHash`），但您无法检索原始密码。

**更新 2**：所以提问者有一些有趣的问题，他在评论中提供了这些问题，我将在这里解决这些问题：

1.  为什么**123456**的哈希值`0f474c41fd20617eb8f1a0cb9b08f3aa:Uh`应该`e10adc3949ba59abbe56e057f20f883e`在 md5 中。答案是 - 因为`hash`方法不仅对传入的密码进行哈希处理，而且对随机生成的盐进行哈希处理。看看这个方法：

    ```
    public function getHash($password, $salt = false)
    {
        if (is_integer($salt)) {
            $salt = $this->_helper->getRandomString($salt);
        }
        return $salt === false ? $this->hash($password) : $this->hash($salt . $password) . ':' . $salt;
    } 
    ```

    模型中的这两种方法`Customer`：

    ```
    public function setPassword($password)
    {
        $this->setData('password', $password);
        $this->setPasswordHash($this->hashPassword($password));
        return $this;
    }
    public function hashPassword($password, $salt = null)
    {
        return Mage::helper('core')->getHash($password, !is_null($salt) ? $salt : 2);
    } 
    ```

    所以由于`$salt`参数是整数（2），实际的盐是随机生成的字符串。这就是为什么你有不同的输出哈希，而不是你简单的`md5($passw)`.

2.  > 我也直接使用 getPassword() 因为它正在处理用户注册

    这更容易一些。在此`registering`过程中，您有一个`$_POST`带有原始密码的数据。在您的帮助下`$customer->setPassword($passw)`将其设置为`$customer`模型。如果您查看上面的此函数，您会看到在此操作期间同时设置了`password`和`password`hash 属性。唯一的区别：`password`它不是真正的现有属性，这意味着它不会存储在数据库或其他任何地方，并且一旦`$customer`从内存中清除对象，它就会丢失。

**Magento 无法获取用户密码**。您唯一能做的就是将给定的密码与现有的密码进行比较`password_hash`（正如我之前提到的）：`Mage_Core_Helper_Data::validateHash`

```
public function validateHash($password, $hash)
{
    $hashArr = explode(':', $hash);
    switch (count($hashArr)) {
        case 1:
            return $this->hash($password) === $hash;
        case 2:
            return $this->hash($hashArr[1] . $password) === $hashArr[0];
    }
    Mage::throwException('Invalid hash.');
} 
```

# blackberry - BlackBerry Horizo ntalFieldManager 中的按钮消失

> ID：12923643
> 
> 赞同：0
> 
> 时间：2012-10-16T21:24:28.667
> 
> 标签：blackberry, blackberry-jde

我是 BB 开发的新手。我有一个现场经理定义和设置如下：

```
horizontalField= new HorizontalFieldManager(Manager.USE_ALL_WIDTH);
setStatus(horizontalField); 
```

我有一个按钮和一个复选框

```
CheckboxField chkBuffer=new CheckboxField("Buffer" ,true);

ButtonField sendButton=new ButtonField("Send") 
```

当我尝试将这些添加到水平 FM 时，仅出现复选框并且由于某种原因该按钮不可见。我像这样添加它们

```
 horizontalField.add(chkBuffer);

 horizontalField.add(sendButton); 
```

关于可能出问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:16:28.643

**这也将对您有所帮助并且也很容易：**

```
horizontalField.add(chkBuffer);

sendButton.setMargin(0, 0, 0, Display.getWidth()-chkBuffer.getPreferredWidth()-sendButton.getPreferredWidth());

horizontalField.add(sendButton); 
```

看看**[这个](https://stackoverflow.com/questions/4183026/blackberry-horizontalfieldmanager-alignment/12910943#12910943)**也。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:46:04.543

试试这个 -

```
 final CheckboxField chk=new CheckboxField(){
        protected void layout(int width, int height) {
            super.layout(25, 20);
        }
    }; 
```

# php - 在 Zend Framework 2 中使用 Zend_Mail + Zend_Mime 创建 HTML 电子邮件

> ID：12923644
> 
> 赞同：4
> 
> 时间：2012-10-16T21:24:30.933
> 
> 标签：php, zend-framework2, html-email, zend-mail

Zend 框架更改了 Zend_Mail 对象，因此它不再具有用于创建 HTML 电子邮件的 setBodyHtml() 方法。

有谁知道如何使用 ZF2 Mail 组件创建 HTML 电子邮件？到目前为止，我已经尝试过：

```
$html = new \Zend\Mime\Part($htmlText);
$html->type = \Zend\Mime\Mime::TYPE_HTML;
$html->disposition = \Zend\Mime\Mime::DISPOSITION_INLINE;
$html->encoding = \Zend\Mime\Mime::ENCODING_QUOTEDPRINTABLE;
$html->charset = 'iso-8859-1';

$body = new \Zend\Mime\Message();
$body->addPart($html);

$message = new \Zend\Mail\Message();
$message->setBody($body);
$message->addTo('myemail@com.com', 'User1');
$message->addFrom('myemail@com.com', 'User2');
$message->setSubject('Test'); 
```

生成的电子邮件是：

> MIME 版本：1.0
> 
> 内容类型：文本/html；字符集=iso-8859-1
> 
> 内容传输编码：quoted-printable
> 
> 内容处置：内联
> 
> 来自：XYZ
> 
> 上个月日志文件报告=0A=09=09=09=0A=09=
> 
> =>09=09=0A=09=09=09**测试**=0A =09=09=09=0A=09=09=09
> 
> 升>

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T19:08:14.950

事实证明，我在 \Zend\Mail\Header 组件中发现了一个问题。

我正在使用基于 linux 的机器来托管我的 php 机器，这意味着电子邮件中的每个标题行都应该只附加“\r”。对于 Windows，它是“\r\n”。

\Zend\Mail\Header 文件中的常量 EOL 设置为“\r\n”，如果从 linux 机器发送，所有的标题都会出现在电子邮件中。

这里的最佳实践是使用 PHP_EOL 常量，它会自动检测平台并使用正确的行尾代码。

要解决这个问题：

您需要更新您的 \Zend\Mail\Header EOL 常量以等于 PHP_EOL。此外，如果使用 UTF-8，您必须确保它是在您的消息中调用的最后一件事。必须在设置主体后进行。

我放了一张ZF2 2.0团队的票来看看

这是一个工作示例：

```
 $html = '' //my html string here

    $m = new \Zend\Mail\Message();
    $m->addFrom('joe@me.com', 'Joe Schmo')
      ->addTo('ally@me.com', 'Ally Joe')
      ->setSubject('Test');

    $bodyPart = new \Zend\Mime\Message();

    $bodyMessage = new \Zend\Mime\Part($html);
    $bodyMessage->type = 'text/html';

    $bodyPart->setParts(array($bodyMessage));

    $m->setBody($bodyPart);
    $m->setEncoding('UTF-8');

             //send your message now 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-13T11:17:00.127

```
use Zend\Mail;
use Zend\Mime\Message as MimeMessage;
use Zend\Mime\Part as MimePart;

    $body = 'email body';
    $htmlPart = new MimePart($body);
    $htmlPart->type = "text/html";

    $textPart = new MimePart($body);
    $textPart->type = "text/plain";

    $body = new MimeMessage();
    $body->setParts(array($textPart, $htmlPart));

    $message = new Mail\Message();
    $message->setFrom($from);
    $message->addTo($to);
    $message->addReplyTo($reply);
    if ($cc)
        $message->addCc($cc);
    if ($bcc)
        $message->addBcc($bcc);
    $message->setSender($sender);
    $message->setSubject($subject);
    $message->setEncoding("UTF-8");
    $message->setBody($body);
    $message->getHeaders()->get('content-type')->setType('multipart/alternative');

    $transport = new Mail\Transport\Sendmail();
    $transport->send($message); 
```

我希望这对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:48:21.387

我建议阅读[这个博客](http://www.michaelgallego.fr/blog/?p=208)。

基本上你不再有一个`setBodyHtml()`你只有一个`setBody()`。这是由于现代电子邮件阅读器的工作方式。每个读者都可以选择同时显示两者。现在大多数电子邮件都是以 HTML 格式发送的。但是您仍然可以将 HTML 电子邮件视为纯文本，因为 HTML 部分只是由相应的程序“翻译”。

在 ZF2 中，要支持 HTML 电子邮件和纯文本电子邮件，您只需添加两种 mime 类型。当需要纯文本时，电子邮件程序将处理此问题。至少这是我如何理解 ZF2 和提到的博客中的当前事物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-14T13:19:07.920

请参阅以下帖子：[https ://stackoverflow.com/a/34267509/5448467](https://stackoverflow.com/a/34267509/5448467)

WasabiMail 是一个邮件模块，能够以方便的方式处理 html 电子邮件模板。

# java - Java 新手：如何解决 NullPointerException？

> ID：12923645
> 
> 赞同：0
> 
> 时间：2012-10-16T21:24:35.233
> 
> 标签：java, nullpointerexception

我正在尝试用 Java 创建 Conway 的生活游戏，但似乎遇到了障碍。我创建了一个名为“Cell”的类，它包含一个布尔变量，该变量基本上确定细胞是活的还是死的，以及在需要时杀死或创建细胞的方法。在我的主要方法中，我获取用户在他们的游戏中想要的行数和列数，并尝试创建一个 Cell 对象数组，每个对象都命名为“位置”。当我尝试运行代码并打印每个单元格的初始值时，我得到一个空指针异常错误并且不知道如何修复它。据我所知，每个数组都不应该有一个空值，但是我对此很陌生......

```
//Create a Cell class for the purpose of creating Cell objects. 
```

`public class Cell`

```
{

private boolean cellState;

//Cell Constructor. Initializes every cell's state to dead.
public Cell()
{
    cellState = false;
}

//This function kills a cell.
//Should be called using objectName[x][y].killCell.
public void killCell()
{
    cellState = false;
}

//This function creates a cell.
//Should be called using objectName[x][y]createCell.
public void createCell()
{
    cellState = true;
}

public void printCell()
{
    if (cellState == true)
            {  
               System.out.print("1");
            }
            else if
            {
               System.out.print("0");
            }

}

//End Class Cell//
} 
```

这是我的细胞课。如果一个单元格是活的，则会在其位置上打印一个单元格。如果死了，0 将代替它的位置。

这是我的主要方法。错误发生在我创建 Cell 对象数组的行。我做这一切都错了吗？

```
//GAME OF LIFE//

import java.util.Scanner;
import java.lang.*;
public class GameOfLife
{
    public static void main(String[] args)
    {
    Scanner scan = new Scanner(System.in);
    System.out.println("\t\tWelcome to the Game of Life!");
    System.out.println("\n\nDeveloped by Daniel Pikul");

    System.out.print("\n\nHow many rows would you like your game to have?");
    int numRows = scan.nextInt();

    System.out.print("How many columns would you like your game to have?");
    int numColumns = scan.nextInt();

    //Create an array of cell objects.
    Cell[][] location = new Cell[numColumns][numRows];

    //This for loop will print out the cell array to the screen.//
    for (int i = 0; i < numRows; i++)
    {
        for (int j = 0; j < numColumns; j++)
        {
            location[i][j].printCell();
        }
        System.out.print("\n");
    }

    //Prompt the user to enter the coordinates of cells that should live.
    System.out.println("Input coordinates tocreate active cells.");

    int xCo, yCo;
    char userChoice;

    //This do loop takes coordinates from the user. Every valid coordinate
    //creates a living cell in that location.
    do
    {
        System.out.print("Enter an x coordinate and a y coordinate: ");
        xCo = scan.nextInt();
        yCo = scan.nextInt();
        location[xCo][yCo].createCell();
        System.out.print("Enter another coordinate? (Y/N) ");
        String tempString = scan.next();
        userChoice = tempString.charAt(0);
    }while(userChoice == 'Y');

    //THIS IS AS FAR AS I HAVE GOTTEN IN THE PROGRAM THUS FAR//
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:26:06.230

```
//This for loop will print out the cell array to the screen.//
for (int i = 0; i < numRows; i++)
{
    for (int j = 0; j < numColumns; j++)
    {
        location[i][j].printCell();  // location[i][j] not instantiated
    }
    System.out.print("\n");
} 
```

在上面的 for 循环中：-您尚未在数组中实例化 Cell 对象：-

```
location[i][j].printCell(); 
```

在此代码之前，您需要执行以下操作： -

```
location[i][j] = new Cell(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:34:18.177

```
public void printCell()
{
    if (cellState == true)
            {  
               System.out.print("1");
            }
            else if
            {
               System.out.print("0");
            }

} 
```

到：

```
public void printCell()
{
    System.out.print( cellState ? "1" : "0" );
} 
```

如果在那里，你有一个额外的。

我们确实需要您的错误日志来为您调试它，请帮我们大家一个忙，请粘贴该错误日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:54:14.377

java.lang.RuntimeException: Uncompliable source code 我猜这会给你一个运行时异常。

像“ **java.lang.RuntimeException: Uncompliable source code** ” 你刚刚在 else 中放置了一个额外的**if**

```
 public void printCell()
   {
        if (cellState == true){
                 System.out.print("1");
        }
        else /*if*/
        {
           System.out.print("0");
        }

   } 
```

我已经评论过了。立即尝试代码并运行它。**或者在else if (cellState==false)**中给出一些条件，这在这种情况下是没有意义的，因为布尔值可以有 true 或 false 但仍然想给它这样对你有用......因为如果你使用**if**你必须为其提供一定的条件才能工作..

# objective-c - NSNetService 的 TXTRecordData 解析后为零

> ID：12923647
> 
> 赞同：2
> 
> 时间：2012-10-16T21:25:00.620
> 
> 标签：objective-c, ios, networking, nsdata, nsnetservice

所以，这是我的问题：我的 iOS 应用程序正在通过本地网络宣传 NSNetService，服务发现运行良好。我也知道我需要先解决我的服务，然后才能读取它的 TXTRecordData。在服务的 -didPublish 委托方法中，我确保我的 TXTRecordData 设置了 NSDictionary。到目前为止，一切都很好...

```
- (void)netServiceBrowser:(NSNetServiceBrowser *)aNetServiceBrowser
           didFindService:(NSNetService *)aNetService
               moreComing:(BOOL)moreComing
{
    if (!self.netServicesForResolution) 
        self.netServicesForResolution = [[NSMutableArray alloc] init];

    NSLog(@"serviceBrowser found service: %@, with TXTRecordData: %@", 
          aNetService, aNetService.TXTRecordData);
    [self.netServicesForResolution addObject:aNetService];
    if (!moreComing) [self resolveNetServicesInArray];
}

- (void)resolveNetServicesInArray 
{
    for (NSNetService *service in self.netServicesForResolution) {
        service.delegate = self;
        [service resolveWithTimeout:5];
    }
}

- (void)netServiceDidResolveAddress:(NSNetService *)sender
{
    [self.netServicesForResolution removeObject:sender];
    NSString *dataDict = [NSKeyedUnarchiver unarchiveObjectWithData:sender.TXTRecordData];
    NSLog(@"freshly resolved netService has TXTRecordData: %@", dataDict);
} 
```

如果调用 -netServiceDidResolveAdress 方法，则应用程序崩溃，因为 sender.TXTRecordData 为 nil。但为什么它是零？

提前感谢您的任何回答：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-17T19:01:23.133

TXT 记录数据似乎与“服务可用”通知分开到达。在我的 netServiceBrowser:didFindService:moreComing: 方法中，我确认传入的 NSNetService 有一个空的 TXT 记录，即使我在发布之前附加了一条 TXT 记录，但后来我收到了一个 netService:didUpdateTXTRecordData: 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T01:17:05.573

我无法解释为什么 TXTRecordData 为零，但您应该使用 +[NSNetService dictionaryFromTXTRecordData:] 来获取 NSDictionary 而不是 NSKeyedUnarchiver 来获取 NSString。

# node.js - 如何构建 Nodejitsu 风格的 PaaS

> ID：12923648
> 
> 赞同：1
> 
> 时间：2012-10-16T21:25:00.137
> 
> 标签：node.js, paas, nodejitsu

我对 Node.js 和 PaaS 场景比较陌生，我对构建一个有点类似的服务很感兴趣。有人可以告诉我 Nodejitsu（或类似提供商）的组件（即 http-proxy、生成节点进程、负载平衡、硬件基础设施）如何组合在一起吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:36:13.797

幸运的是，有一家运行 Node.js PaaS 的公司开源了他们所有的代码。它们是由 AppFog 购买的。

1.  [Nodester.com](http://nodester.com/)
2.  [节点源](https://github.com/nodester)

我想查看此代码会回答您的问题。

# javascript - 需要一些帮助来改进正则表达式

> ID：12923652
> 
> 赞同：1
> 
> 时间：2012-10-16T21:25:19.650
> 
> 标签：javascript, regex

我缺乏正则表达式的经验，我需要一些帮助。我需要提取一个 git 标签。输入字符串是这样的：

```
6dde3d91f23bff5ab81e91838f19f306b33fe7a8refs/tags/3.4.2

// there is a new line at the end of the string 
```

我需要的字符串部分是`3.4.2`. 这是我的代码：

```
var pattern = /.*([0-9]{1}\.{1}[0-9]{1}\.{1}[0-9]{1}).*/ig;
var match = pattern.exec(string);
// match[1] gets what I need 
```

它可以工作，但是这个正则表达式太长了，必须有办法让它更短。有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:27:33.580

您可以按如下方式`[0-9]{1}`替换：`\d`

```
/\d\.\d\.\d$/ 
```

匹配行`$`尾。

编辑：根据[Rob-W](https://stackoverflow.com/users/938089/rob-w)的反馈更新

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:27:22.123

不需要正则表达式，只需拆分字符串。

```
var tag ="6dde3d91f23bff5ab81e91838f19f306b33fe7a8refs/tags/3.4.2";​​​​​
console.log(tag.split('/')[2]);​ // results in 3.4.2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:28:43.520

`{1}`是隐含在每个语句中的。把它们拿出来会缩短你的表情。

[不过， j08691 的答案](https://stackoverflow.com/a/12923682/90322)是正确的：只需字符串拆分即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T21:33:18.927

我得到了你的结果`\d\..*`

不能比这更短。

[在这里](http://regexpal.com/?flags=gi&regex=%5Cd%5C..%2a&input=6dde3d91f23bff5ab81e91838f19f306b33fe7a8refs/tags/3.4.2%0A)测试

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T05:28:57.160

这是最短的>>

**[0-9.]+$**

# activex - ActiveX CAB 文件许可信息

> ID：12923653
> 
> 赞同：2
> 
> 时间：2012-10-16T21:25:23.113
> 
> 标签：activex

我想从软件供应商处获得 ActiveX 组件的许可。他通常的许可模式是 ActiveX 组件必须安装在个人计算机上。由于我的基于 Web 的应用程序是供公众访问的，因此我要求他提供其 ActiveX 组件的数字签名 CAB 文件。他担心有人可能会从 cab 文件中提取许可证密钥并在其他地方重新使用它。有什么建议可以解决他的担忧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:45:06.117

证书不像只有 Internet Explorer 可以解释的加密密钥，这将毫无意义，因为一切都可以逆向工程。

这以另一种方式起作用：Internet Explorer 获取签名的 CAB 文件，提取其证书，如果引用的证书颁发机构在有效的列表中，它将询问当前证书是否对域、cab 和ActiveX 控件。这样盗取证书就没有意义了。

# c# - 跳过 Switch 后的语句

> ID：12923656
> 
> 赞同：1
> 
> 时间：2012-10-16T21:25:40.743
> 
> 标签：c#, debugging, switch-statement, control-flow

我可能在这里有一个高级的时刻（*22 岁*），但我不明白为什么 C# 会跳过我在`switch`. 代码如下：

```
switch (shape)
{
    case ToolShape.BasicTool:
        EditTool = (LastTool.ToolType == ToolShape.BasicTool)
            ? new BasicTool((BasicTool)LastTool)
            : new BasicTool(ToolNumber, BasicToolType.TypeA,
                "Tool " + ToolNumber, "", 1.0, 60.0, 0.0, 0.0, 0.0, 10.0);
        break;

    case ToolShape.AdvancedTool:
        EditTool = (LastTool.ToolType == ToolShape.AdvancedTool)
            ? new AdvancedTool((AdvancedTool)LastTool)
            : new AdvancedTool(AdvancedTool, "Tool " + ToolNumber, "", 1.0, 10.0, 2.0, 
                AdvancedTool.Light, AdvancedTool.Round);
        break;

    case ToolShape.SpecialTool:
        EditTool = (LastTool.ToolType == ToolShape.SpecialTool)
            ? new SpecialTool((SpecialTool)LastTool)
            : new SpecialTool(SpecialTool, "Tool " + ToolNumber, "", 
                1.0, 1.0, 90.0);
        break;
}

// We never seem to reach anything below here ----------------
LoadToolToForm(EditTool); 
```

它从来没有达到那个`LoadToolToForm(EditTool)`声明。或者`MessageBox.Show("...")`我卡在那里，用于调试目的。按预期删除`switch`作品。但是，即使将一个非常小的开关放在一个外壳中也会导致它再次过早退出。

这是已知的行为吗？是否存在`breaking`从 switch 语句导致函数退出的情况（没有调用 return 关键字）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T21:28:29.587

如果您确定代码永远不会通过 switch 语句，那么只有另一种可能性：

switch 语句中抛出了一个异常，它被捕获到更高的某个地方，因此程序继续运行。

您可以尝试验证此建议的一件事是将您的开关包装在一个临时`try{}catch{}`块中并在异常时显示一个 MessageBox，或者使用大量断点。

# c++ - 是否有用于双精度反平方根的快速 C 或 C++ 标准库函数？

> ID：12923657
> 
> 赞同：9
> 
> 时间：2012-10-16T21:25:44.347
> 
> 标签：c++, c, double, sqrt

我发现自己在打字

```
double foo=1.0/sqrt(...); 
```

很多，而且我听说现代处理器具有内置的反平方根操作码。

是否有 C 或 C++ 标准库的反平方根函数

1.  使用双精度浮点？
2.  准确`1.0/sqrt(...)`吗？
3.  与 的结果一样快还是更快`1.0/sqrt(...)`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-16T21:26:55.407

不，不，没有。不在 C++ 中。没有。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-12-22T04:58:57.003

您可以使用此函数进行更快的逆平方根计算
维基百科上有一篇关于其工作原理的文章：[https](https://en.wikipedia.org/wiki/Fast_inverse_square_root)
://en.wikipedia.org/wiki/Fast_inverse_square_root 还有该算法的 C 版本。

```
float invSqrt( float number ){
    union {
        float f;
        uint32_t i;
    } conv;

    float x2;
    const float threehalfs = 1.5F;

    x2 = number * 0.5F;
    conv.f  = number;
    conv.i  = 0x5f3759df - ( conv.i >> 1 );
    conv.f  = conv.f * ( threehalfs - ( x2 * conv.f * conv.f ) );
    return conv.f;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-07T01:07:07.313

我不知道用于此的标准化 C API，但这并不意味着您不能使用快速逆 sqrt 指令，只要您愿意编写**平台相关的内在函数**。

让我们以 64 位 x86 和 AVX 为例，您可以使用 [_mm256_rsqrt_ps()](https://software.intel.com/sites/landingpage/IntrinsicsGuide/#techs=AVX,AVX2,FMA&text=rsqrt&expand=4804)来近似平方根的倒数。或者更具体地说：使用 SIMD 一次完成 8 个平方根。

```
#include <immintrin.h>

...

float inputs[8] = { ... } __attribute__ ((aligned (32)));
__m256 input = _mm256_load_ps(inputs);
__m256 invroot = _mm256_rsqrt_ps(input); 
```

同样，您可以将 ARM 上的内在[vrsqrteq_f32](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0491i/BABEHGDB.html)与 NEON 一起使用。在这种情况下，SIMD 是 4 宽的，因此它会一次计算四个平方根的倒数。

```
#include <arm_neon.h>

...

float32x4_t sqrt_reciprocal = vrsqrteq_f32(x); 
```

即使每批只需要一个根值，它仍然比一个完整的平方根快。只需在 SIMD 寄存器的全部或一个通道中设置输入。这样，您就不必通过加载操作来遍历您的内存。在 x86 上通过`_mm256_set1_ps(x)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-30T10:10:52.867

违反约束 1\. 和 2.（这也不是标准的），但它仍然可以帮助某人浏览...

我使用[ASMJIT](https://github.com/asmjit/asmjit)即时编译您正在寻找的确切汇编操作：（`RSQRTSS`单精度，好的，但它应该与双精度相似）。

我的代码是这样的（参见我在另一篇文章中的[回答](https://stackoverflow.com/a/58622059/7302562)）：

```
 typedef float(*JITFunc)();

   JITFunc func;
   asmjit::JitRuntime jit_runtime;
   asmjit::CodeHolder code;
   code.init(jit_runtime.getCodeInfo());

   asmjit::X86Compiler cc(&code);
   cc.addFunc(asmjit::FuncSignature0<float>());

   float value = 2.71; // Some example value.
   asmjit::X86Xmm x = cc.newXmm();
   uint32_t *i = reinterpret_cast<uint32_t*>(&value);
   cc.mov(asmjit::x86::eax, i[0]);
   cc.movd(x, asmjit::x86::eax);

   cc.rsqrtss(x, x);   // THE asm function.

   cc.ret(x);

   cc.endFunc();
   cc.finalize();

   jit_runtime.add(&func, &code);

   // Now, func() can be used as the result to rsqrt(value). 
```

如果您只执行一次 JIT 编译部分，稍后使用不同的值调用它，这应该比`1.0/sqrt(...)`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T21:42:41.693

如果您不害怕使用自己的功能，请尝试以下操作：

```
template <typename T>
T invsqrt(T x)
{
    return 1.0 / std::sqrt(x);
} 
```

`1.0 / std::sqrt(x)`它应该与任何现代优化编译器中的原始编译器一样快。此外，它可以与双精度或浮点数一起使用。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-16T21:41:07.887

如果你发现自己一遍又一遍地写同样的东西，你应该对自己思考“函数！”：

```
double invsqrt(const double x)
{
    return 1.0 / std::sqrt(x);
} 
```

现在代码更加自我记录：人们不必*推断* `1.0 / std::sqrt(x)`是平方根的倒数，他们*阅读*它。此外，您现在可以插入您想要的任何实现，并且每个调用站点都会自动使用更新的定义。

要回答你的问题，不，它没有 C(++) 函数，但现在你已经做了一个，如果你发现你的表现太缺乏，你可以替换你自己的定义。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-10-16T21:31:13.713

为什么不试试这个？`#define INSQRT(x) (1.0/sqrt(x))`

它一样快，需要更少的打字（让你觉得它是一个函数），使用双精度，精确到 1/sqrt(..)

# ruby-on-rails - 使用扭矩箱会话限制扭矩箱中的用户登录

> ID：12923658
> 
> 赞同：1
> 
> 时间：2012-10-16T21:25:49.393
> 
> 标签：ruby-on-rails, session, jruby, torquebox

我想使用扭矩箱并限制用户在 jruby rails 应用程序上的登录，以便他无法从多个浏览器登录。当有人登录并使旧会话无效时，我通过跟踪用户 ID 和会话 ID 来使用 activerecord 会话。

如何在 Torquebox 中做类似的事情？我在 TorqueBox::Session 模块上看不到类方法，所以我可以使其他会话无效，只是访问实例的方法。会话如何工作的机制尚不清楚。我在看这里：[https ://github.com/torquebox/torquebox/tree/2x-dev/gems/web/lib](https://github.com/torquebox/torquebox/tree/2x-dev/gems/web/lib)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:43:39.727

如果您将当前会话对象存储在本地，例如`current_session`：

```
TorqueBox::Session::ServletStore.load_session_data(current_session) 
```

这将允许您查看当前会话数据，并附带一个姊妹功能，使您还可以在会话存储中设置数据`store_session_data(...)`：

```
TorqueBox::Session::ServletStore.store_session_data(current_session, data) 
```

您还可以设置`data`为`{}`(empty hash) 以使其无效（对于大多数意图和目的）。

当前会话对象的可用性将根据范围而有所不同。例如，在 stomplet 中，我必须对订阅者进行一些自省以获取`current_session`对象以便查看会话数据：

```
class ChatStomplet
  # ...

  def on_subscribe (subscriber)
    @subscribers[ session(subscriber)[:current_user].username ] << subscriber
  end

  # ...

  def session (subscriber)
    TorqueBox::Session::ServletStore.load_session_data(subscriber.getSession)
  end
end 
```

您可能也应该看一下[`ActionDispatch::Session::TorqueBoxStore`](http://torquebox.org/documentation/2.1.2/yardoc/ActionDispatch/Session/TorqueBoxStore.html)api。

我个人还没有找到很多关于这方面的文档。事实上，我仍在寻找一种方法来查找所有当前活动的会话。如果他们实现[AbstractStore 的接口](http://apidock.com/rails/v3.2.8/ActionDispatch/Session/AbstractStore)将会有所帮助，因为与当前 Rails 约定的兼容性将大有帮助。

我知道这不是一个完整的答案，但希望它能为您的旅行提供一些启示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T18:53:13.263

TorqueBox（至少是 2.x）将 Java 会话 ID 存储在`session[:session_id]`. 如果您需要从中间件获取它，它可以在`env['rack.session'][:session_id]`.

# python - Python：查找相同列表出现的次数并求平均值

> ID：12923659
> 
> 赞同：1
> 
> 时间：2012-10-16T21:25:49.803
> 
> 标签：python, list, average, defaultdict

我将使用一个示例来解释我的问题：

```
A=[[1,2,10],[1,2,10],[3,4,5]]
B=[[1,2,30],[6,7,9]] 
```

从这些列表列表中，我想创建第三个：

```
C=A+B 
```

所以我得到：

```
C= [[1, 2, 10], [1, 2, 10], [3, 4, 5], [1, 2, 30], [6, 7, 9]] 
```

请注意，在 中存在三个列表`C`，这些 `[1, 2, 10], [1, 2, 10], [1, 2, 30]`列表如果用 [x,y,z] 来描述，它们具有相同的 x,y 但不同的 z。

**所以我想要这个新列表：**

```
Averaged= [(1, 2, 16.666), (6, 7, 9), (3, 4, 5)] 
```

我们从列表中只找到一次相同的 x,y

`[1, 2, 30], [1, 2, 40], [1, 2, 50]`

和相应 z 值的平均值`(10+10+30)/3=16.666`

我一开始尝试使用`for`循环，但最终尝试使用`defaultdict`.

我最终得到了这个保持一次 (x,y) 但添加而不是平均相应的 z 值：

```
from collections import defaultdict
Averaged=[]

A=[[1,2,10],[1,2,10],[3,4,5]]
B=[[1,2,30],[6,7,9]]
C=A+B
print "C=",C

ToBeAveraged= defaultdict(int)
for (x,y,z) in C:
    ToBeAveraged[(x,y)] += z
Averaged = [k + (v,) for k, v in ToBeAveraged.iteritems()]    

print 'Averaged=',Averaged 
```

可以用defaultdict做到这一点吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:32:13.323

您需要先对数据进行排序：

```
>>> C = sorted(A + B)
>>> def avg(x):
        return sum(x) / len(x)

>>> [[avg(i) for i in zip(*y)] for x,y in 
     itertools.groupby(C, operator.itemgetter(0,1))]
[[1.0, 2.0, 16.666666666666668], [3.0, 4.0, 5.0], [6.0, 7.0, 9.0]] 
```

如果您只想要平均值之前的组：

```
[list(y) for x,y in itertools.groupby(C, operator.itemgetter(0,1))] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T21:46:02.887

在您的代码中，您没有除以观察次数。我更改了您的代码以收集给定对（x，y）的所有观察结果，然后取它们的平均值。应该有一个更有效的解决方案，但这应该有效。

```
from collections import defaultdict
Averaged=[]

A=[[1,2,10],[1,2,10],[3,4,5]]
B=[[1,2,30],[6,7,9]]
C=A+B
print "C=",C

def get_mean(x):
    return sum(ele for ele in x) / float(len(x))

ToBeAveraged= defaultdict(list)
for (x,y,z) in C:
    ToBeAveraged[(x,y)].append(z)
Averaged = [k + (get_mean(v),) for k, v in ToBeAveraged.iteritems()]    

print 'Averaged=',Averaged 
```

结果：

```
C= [[1, 2, 10], [1, 2, 10], [3, 4, 5], [1, 2, 30], [6, 7, 9]]
Averaged= [(1, 2, 16.666666666666668), (6, 7, 9.0), (3, 4, 5.0)] 
```

# coldfusion - esapi：对于 src 属性，我们应该使用 encodeForHTMLAttribute 吗？为 URL 编码？或两者？

> ID：12923662
> 
> 赞同：4
> 
> 时间：2012-10-16T21:25:55.047
> 
> 标签：coldfusion, xss, coldfusion-10, esapi

哪个是正确的？

```
<img src="#encodeForHTMLAttribute(FORM.path)#"> 
```

或者

```
<img src="#encodeForURL(FORM.path)#"> 
```

或者

```
<img src="#encodeForHTMLAttribute(encodeForURL(FORM.path))#"> 
```

?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T22:01:34.793

使用与您插入需要编码的文本的上下文相匹配的方法。

**encodeForUrl**用于将动态文本放入 URL - 因此它将替换`/`为`%2F`([等等](http://en.wikipedia.org/wiki/Percent-encoding))，如果将其应用于整个 URL，您将拥有一个编码的 URL（因此在 src 属性中使用时会被破坏）。

如果您允许用户提供部分 URL，则需要拆分`/`（以及任何其他相关的分隔符），在每个部分上应用 encodeForUrl，然后重新组合在一起。

***注意：** encodeForUrl 似乎将其字符串直接传递给 Java，这意味着反斜杠被视为转义字符 -`\b\n`编码为`%08%0A`而不是`%5Cb%5Cn`- 这种行为不是标准 URL 编码的一部分（通常也不是 CF 字符串）。为避免这种情况，请改用 UrlEncodedFormat 函数。*

**encodeForHTMLAttribute**用于将动态文本放入 HTML 属性 - 其目的是确保内容被视为文本（不解析为 HTML） - 它不知道/关心其内容是 URL 还是其他内容。

**总而言之**，您可能希望`encodeForHtmlAttribute( UrlEncodedFormat( Form.Path ) )`针对这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:06:09.197

在您的示例中，答案是同时使用两者。

但是，根据`FORM.path`您的内容，可能会破坏事物。

`encodeForURL`应该调用该函数`encodeUriComponent`（[就像在 Javascript 中所做的那样](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)），因为它旨在用于 uri 组件，而不是整个 url 字符串。uri 组件，例如名称值对，需要单独编码，否则分隔符（名称值对的“=”）也将被编码。

即使您有`index.cfm`文件，以下也会导致 404。注意路径分隔符“/”，查询字符串分隔符“?” 和名称/值分隔符“=”都被编码，使整个字符串成为一个单元。

```
<a href="#encodeForURL("/index.cfm?x=y")#">here</a> 
```

应该做的是：

```
<cfset pathURIEncoded = "/index.cfm?#encodeForURL("x")#=#encodeForURL("y")#">
<a href="#encodeForHTMLAttribute(Variables.pathURIEncoded)#">here</a> 
```

当然，用变量而不是静态字符串替换`x`and 。`y`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:39:23.033

对于此示例，我将使用 encodeForHTMLAttribute 方法，因为它是静态路径。唯一的例外是 src 属性本身的值是从可公开访问的范围（通过 URL、FORM 等发送）生成并包含动态数据。如果是这种情况，我会使用 encodeForURL() 方法。

# cocoa-touch - 自动调整子视图

> ID：12923664
> 
> 赞同：1
> 
> 时间：2012-10-16T21:25:57.853
> 
> 标签：cocoa-touch, uiview, uikit

iOS6 [UIView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)在属性 autoresizesSubviews 上说：

> 一个布尔值，用于确定接收器是否在其边界发生变化时自动调整其子视图的大小。
> 讨论
> 当设置为 YES 时，接收器会在**其**边界发生变化时调整其子视图的大小。默认值为是。

对我作为非英语母语人士来说，这有点不清晰。“其”是指接收者还是接收者的子视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:29:48.300

它指的是接收者。

如果`autoResizesSubviews`在视图 A 上设置为 YES，它是视图 B 和 C 的父视图，那么当 A 的边界发生变化时，A 将调整 B 和 C 的大小。

# foreach - 结合 2 foreach 得到结果

> ID：12923669
> 
> 赞同：1
> 
> 时间：2012-10-16T21:26:17.603
> 
> 标签：foreach

我正在使用 xpath 来解析来自 icecat 的 xml 文件

编码：

```
$xml = new DOMDocument;
$xml->load('140.xml');
$xml = new DOMXpath($xml);
$hasil = $xml->query('//ICECAT-interface/Product/ProductFeature');
$namafitur = $xml->query('//ICECAT-interface/Product/ProductFeature/Feature/Name');
foreach($namafitur as $value) {
  echo $value->getAttribute('Value'), ": <br>";
}
foreach($hasil as $value) {
  echo $value->getAttribute('Presentation_Value'), ": <br>";
} 
```

我希望将结果分别组合成一行

谁能帮我？

# ruby - 打印对齐的横幅？

> ID：12923671
> 
> 赞同：1
> 
> 时间：2012-10-16T21:26:43.097
> 
> 标签：ruby, pretty-print

我想知道是否有一些红宝石打印功能可以让我打印一个字符串，使其居中并用空格填充。我需要为具有不同文本的程序制作横幅，如下所示：

```
<!-- ======================================================================= --> 
<!--                     Whatever text is in the string....                  --> 
<!-- ======================================================================= --> 
```

我实际上找到了一种方法来为 <= 90 - 2 个字符的字符串执行此操作..：

```
len = 90
msg = "random_string" 

str = msg.center( msg.length + (len - msg.length) )
print "<!-- " + str +  "-->" 
```

但现在我想支持消息大小可以大于 90 的可能性，如果是这样的话，我可以继续换行。如果它可以避免拆分单词，那就更好了（那里的逻辑开始变得复杂）。有什么想法，或者现有的宝石/图书馆可以做到这一点吗？

谢谢，特德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:51:30.047

**修订：**这是一个修订后的答案，希望这更符合您的想法。它假定您有 Unix 工具`fmt`来调整行的大小。这可能会在 Ruby 中通过一些工作来实现。

```
msg = <<MSG_END
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Nunc tincidunt libero eget justo convallis tincidunt. Curabitur
augue arcu, eleifend sit amet porttitor a, porttitor ac purus.
Vivamus non leo nulla, vel pulvinar urna. Cum sociis natoque penatibus
et magnis dis parturient montes, nascetur ridiculus mus. In at purus
risus. Maecenas imperdiet commodo turpis ullamcorper porttitor. Sed
imperdiet porta rutrum. Proin sodales lorem et dui mattis accumsan.
Etiam fermentum magna sed justo tristique commodo. Nulla at purus
in leo dignissim ultrices. Mauris tincidunt egestas nunc, sit amet
placerat mauris hendrerit at. Vestibulum at vestibulum ante.
MSG_END

cols = 60 - 9 # subtract 9 to account for the extra `<!-- ` and ` -->`

sized = `echo '#{msg}' | fmt -w #{cols}`

centered = sized.split("\n").map do |l|
   "<!-- #{l.center(cols)} -->\n"
end

puts centered 
```

回报：

```
<!-- Lorem ipsum dolor sit amet, consectetur adipiscing  -->
<!--  elit.  Nunc tincidunt libero eget justo convallis  -->
<!-- tincidunt. Curabitur augue arcu, eleifend sit amet  -->
<!--  porttitor a, porttitor ac purus.  Vivamus non leo  -->
<!--    nulla, vel pulvinar urna. Cum sociis natoque     -->
<!-- penatibus et magnis dis parturient montes, nascetur -->
<!--     ridiculus mus. In at purus risus. Maecenas      -->
<!-- imperdiet commodo turpis ullamcorper porttitor. Sed -->
<!-- imperdiet porta rutrum. Proin sodales lorem et dui  -->
<!--  mattis accumsan.  Etiam fermentum magna sed justo  -->
<!-- tristique commodo. Nulla at purus in leo dignissim  -->
<!--  ultrices. Mauris tincidunt egestas nunc, sit amet  -->
<!--     placerat mauris hendrerit at. Vestibulum at     -->
<!--                  vestibulum ante.                   --> 
```

# ubuntu-12.04 - 如何设置 Vagrant ssh 代理转发？

> ID：12923675
> 
> 赞同：2
> 
> 时间：2012-10-16T21:27:05.283
> 
> 标签：ubuntu-12.04, chef-infra, vagrant

我的目标是使用 ssh 密钥身份验证从 VirtualBox VM 连接到另一台机器。我用 Vagrant (1.0.5) 创建了虚拟机。我还启用了 config.ssh.forward_agent = true （如[本文所述](https://stackoverflow.com/questions/11955525/how-to-use-ssh-agent-forwarding-with-vagrant-ssh)）。可悲的是，ssh 转发似乎不起作用。

这些是步骤（在带有 vagrant 和 virtualbox 的新 ubuntu 上）：

1.  从主机登录到 VM（当我使用 --debug 时，我看到转发已启用）

    > 流浪者 ssh

2.  从 VM（带有注入的 vagrant ssh 密钥的 ubuntu 12.04）记录到外部机器

    > ```
    > ssh -A sk@192.168.0.1 
    > ```

    获得：权限被拒绝。

我是否需要执行任何其他步骤才能使其正常工作？人们建议使用 ssh-add -K。我不清楚在哪台机器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:16:40.853

我无法使 ssh 转发工作。我的解决方案是简单地在 VM 上生成新的 ssh 密钥：

1.  登录到虚拟机：*vagrant ssh*
2.  在 VM 上生成新的 ssh 密钥：*ssh-keygen*
3.  将新的公共 ssh 上传到 192.168.0.1：我手动完成。它可以是自动化的。
4.  *ssh -A sk@192.168.168.0.1*有效

# ios - FB 会话打开一次后无法关闭。iOS5/6

> ID：12923685
> 
> 赞同：2
> 
> 时间：2012-10-16T21:27:25.843
> 
> 标签：ios, facebook

我可以打开一个 FB 会话，然后关闭它，但是下次我点击此代码时，它会直接跳过用户登录屏幕 (io5) 并且已经让我登录。如何确保我重新/启动每次FB登录画面？我什至在打开会话之前就尝试关闭它，但这也不起作用。

```
[self closeFacebookSession];  // close the session so we should get login screen, but we do not!

 NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"email",
                            nil];

[FBSession openActiveSessionWithReadPermissions:permissions
                                           allowLoginUI:YES
                                      completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                          [self sessionStateChanged:session state:state error:error];
                                      }];
}

- (void)closeFacebookSession {
    [FBSession.activeSession closeAndClearTokenInformation];
} 
```

# c++ - 当c++遇到钻石问题时会发生什么

> ID：12923686
> 
> 赞同：1
> 
> 时间：2012-10-16T21:27:27.660
> 
> 标签：c++, multiple-inheritance

来自 java 背景，我从未遇到过多重继承可能导致覆盖问题的菱形问题，如[http://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem中详细描述的那样](http://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem)

但是如果出现这个问题，c++ 运行时会抱怨还是随机调用超类方法的哪个实现？

我已经阅读了文章的“缓解”部分，但没有完全理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:23:34.993

编译器将通过诊断任何歧义来捕获遇到菱形问题的程序。

一种解决方案是消除歧义。这可以在使用显式名称限定来引用成员时完成：

```
struct B {
    int bar;
};

struct D1 : B {};
struct D2 : B {};

struct E : D1, D2 {};

int main() {
    E e;
    e.D1::bar = 1; // explicitly set D1::bar, not D2::bar.
} 
```

或者，如果您想访问基础子对象，如下所示：`B *b = new E;`您是否需要来自 D1 或 D2 的基础子对象是不明确的。对这些中间类型之一使用显式强制转换可以解决歧义。

```
B *b = static_cast<D2*>(new E); 
```

另请注意，从 B* 向下转换为 E* 是不可能静态进行的；编译器不知道指向哪个 B，因此它不知道如何静态调整指针以返回 E。这就是需要 dynamic_cast 的地方。

```
E *e = new E;
B *b1 = static_cast<D1*>(e);
B *b2 = static_cast<D2*>(e);
assert(b1 != b2);
assert(dynamic_cast<E*>(b1) == dynamic_cast<E*>(b2));
assert(e == dynamic_cast<E*>(b1)); 
```

另一种解决方案是回避虚拟继承的问题，从而避免多个相同类型的基本子对象。

```
struct B {
    virtual void foo() = 0;
    virtual ~B() = default;
    int bar;
};

struct D1 : virtual B {};
struct D2 : virtual B {};

struct E : D1, D2 {
    virtual void foo() override {
        bar = 1; // no ambiguity because there's only a single B base sub-object
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:33:17.293

该错误被编译器捕获。[http://www.parashift.com/c%2B%2B-faq-lite/mi-diamond.html](http://www.parashift.com/c%2B%2B-faq-lite/mi-diamond.html)提供了一个示例

```
class Base {
public:
protected:
  int data_;
};

class Der1 : public Base {  };

class Der2 : public Base {  };

class Join : public Der1, public Der2 {
public:
  void method()
  {
      data_ = 1; //g++ error: reference to ‘data_’ is ambiguous
  }
};

int main()
{
  Join* j = new Join();
  Base* b = j; //g++ error: ‘Base’ is an ambiguous base of ‘Join’
} 
```

# php - 覆盖 PHP 类实例化

> ID：12923691
> 
> 赞同：1
> 
> 时间：2012-10-16T21:27:48.060
> 
> 标签：php, class, object

我目前正在开展一个项目，我们正在开发一个应用程序，该应用程序将用于从一组文件/托管环境中为多个站点上的内容提供动力。

有许多 PHP 类的名称如`model_account`和`model_vehicle`，它们在名为 save 的单独文件中定义为类名。我们`spl_autoload_register`用来加载类文件如下（简化）：

```
function my_autoloader($class_name) {
    if(substr($class_name, 0, 6)=='model_') {
        require_once('models/'.$class_name.'.php');
    }
} 
```

我们想要做的是，如果访问者正在访问站点 xxx，并且我们创建了一个类的实例，例如-如果文件存在（ ），则`$account = new model_account();`实际创建一个类的实例，但如果不存在，则只需包含该文件和创建一个.`model_xxx_account``models/model_xxx_account.php``models/model_account.php``model_account`

同样，如果访问者来自 yyy 站点，我们会希望使用`model_yyy_account`if 存在，但如果不存在则完全返回`model_account`。

本质上，我们希望做的是在满足条件时创建不同类的实例，但来自同一个实例化调用。

我们没有使用像 CI 或 Cake 这样的现成框架。另外，我稍微简化了这篇文章的命名约定。抱歉，如果我的 OO 术语不正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T21:48:27.290

实际上听起来你应该使用某种工厂模式来处理你的类加载。

如果你这样做`$account = new SomeClass()`了，那么最终得到一个对象就没有任何意义了`class Bumblebee`。

从技术上讲，您应该有某种帐户工厂来决定给您哪个类。

您的代码最终看起来更像`$account = AccountFactory::retrieveModel()`，然后它可以确定您要加载的模型，而无需委托给您的自动加载器。

自动加载器的要点本质上是说“我想要这个确切的类”，而不是摇摆不定或特别是做出任何类型的决定。您的工厂实际上可以通过您的文件结构并确定要在函数调用中传回哪个类，并且在您的代码中您不依赖于`new`获取您想要的模型，因为理论上您的所有帐户模型都将是共享相同的接口或至少扩展`model_account`.

AccountFactory 基本上可以说，“`model_yyy_account`存在，因此`return new model()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T21:34:55.020

我认为你不能。自动加载器仅帮助您选择要包含的文件，不允许您更改类。

但这应该不是问题。您可以只命名每个网站的类`model_account`。该站点确定包含哪个文件，从而`model_account`实例化哪个版本。因为您永远不会（假设）在一个请求中同时需要两者`model_xxx_account`，`model_yyy_account`所以即使它们具有相同的名称，它们也不会相互干扰。

PS：我也会将文件命名为相同的名称，并为每个站点创建一个单独的文件夹和一个默认文件夹。这将使每个站点更容易发现被覆盖的文件，并降低名称冲突的风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T21:42:51.037

```
$SiteID = 'xxx'; // Modify as you wish from your subdomain or whatever
// class_exists triggers the autoloader
if(!class_exists($ClassName =  "model_{$SiteID}_account")){
    // If class is missing, fall back to default
    $ClassName =  "model_account"; // This should exist
}
$Model = new $ClassName(); // Instantiate your Account Model 
```

只需确保**$SiteID**包含 _ 和字母数字，因此类名友好。

并且永远不要从相对路径做**require_once 。**总是这样做：

```
require_once __DIR__.'/models/'.$class_name.'.php'; // PHP 5.3+
// or
require_once dirname(__FILE__).'/models/'.$class_name.'.php'; // PHP 5.2- 
```

保持安全。这样您就可以确切地知道您在哪里寻找 Account Model 类。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T21:35:09.627

你肯定可以这样做：

```
$className = "MyClassName";
$myObject = new $className(); 
```

您可以在哪里根据您的条件动态定义 $className 。

# sql-server - 转换例如。2012-05-25 自 1970 年 1 月 1 日以来的秒数

> ID：12923693
> 
> 赞同：8
> 
> 时间：2012-10-16T21:28:03.283
> 
> 标签：sql-server, date, time, timespan, epoch

我有一个数据库，我可以`time()`从 php 中节省时间，从`1 jan 1970`.

有什么方法可以转换，例如转换为`2012-12-12`seconds since `1 jan 1970`？

我想做这样的事情：

```
SELECT * 
FROM Table 
WHERE date > '2012-11-30' AND date < '2012-12-30' 
```

这甚至可能吗？

（我想在没有任何 php date() 的情况下这样做）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-16T21:31:51.690

[`DATEDIFF`](http://msdn.microsoft.com/en-us/library/ms189794.aspx)将在这里成为你的朋友：

```
select datediff(s, '1970-01-01', '2012-12-12') as SecondsSinceEpoch 
```

请注意，由于 datediff 返回一个 int，因此您可以比较（使用秒）与 1970 年 1 月 1 日的最大日期时间是`2038-01-19 03:14:07`.

# ios - Xcode Coredata 中关于使用错误方法的错误？

> ID：12923695
> 
> 赞同：0
> 
> 时间：2012-10-16T21:28:09.033
> 
> 标签：ios, xcode, core-data

在尝试使用 CoreData 时，我不断收到错误消息（所有 3 个都作为注释列在代码的一侧，以便您知道它们在哪里）。由于某种原因，我无法在网上找到这些错误。我对 CoreData 很陌生，并且很想知道我做错了什么。如果有人想知道，我有这个脚本的早期版本，但它改变了太多（参见[CoreData errors for simple added to database](https://stackoverflow.com/questions/12922686/coredata-errors-for-simple-adding-to-database)）

```
@synthesize username, password;

- (IBAction)saveData:(id)sender {
    AppayAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

    NSManagedObjectContext *context = [appDelegate managedObjectContext];    

    NSManagedObject *newContact;      //Unknown type, did you mean NSManagedObjectModel?

    newContact = [NSEntityDescription insertNewObjectForEntityForName:@"Contacts" inManagedObjectContext:context];      //Use of undeclared identifier NSEntityDescription. Did you mean kSecAttrDescription?

    [newContact setValue:name.text forKey:@"name"];
    [newContact setValue:address.text forKey:@"address"];

    name.text = @"";
    address.text = @"";

    NSError *error;
    [context save:&error];    //instance method -save not found
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:48:11.347

您需要为每个实体创建一个托管对象类。另外要获取 Appdelegate，我没有看到您包含头文件，也没有看到托管对象类的头文件。这些都是您的应用程序能够访问上下文和托管对象所必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:03:08.773

使用文件检查器，选择您正在使用的实体并使用实体检查器，您需要更改实体类。如果您将其留给 NSManagedObject（默认值），您将需要使用 setValue:forKey: 将值分配给您的自定义实体。

编辑：与此相关的内容：不要为您的自定义实体类使用通用名称。在使用 Objective-c 运行时中存在的名称（例如“Contact”）时，您可能会发现自己遇到运行时错误。创建子类时使用您的项目前缀，即使对于实体类也是如此。

# php - fab.com 双虚线是如何创建的：css 还是图像？

> ID：12923699
> 
> 赞同：-1
> 
> 时间：2012-10-16T21:28:31.220
> 
> 标签：php, html, css

Fab.com 的设计很棒，带有双虚线（水平和垂直）。

在“今日精选”一词上方，您可以看到其中一条水平虚线双线。使用萤火虫，我可以看到它位于 .

fab.com 如何设法创建这条线：使用 css 或 image ？如果是css，你用哪个属性创建这样的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:31:38.877

这是一个图像：

```
#fabWrapper {
    background: url("//dnok91peocsw3.cloudfront.net/relaunch/bg-mesh-2px-gap.png") repeat scroll 0 0 #FFFFFF;
} 
```

小点填满了整个包装元素。然后页面上的子元素会覆盖所有内容，但它们之间会留下一些小边距，显示虚线背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:31:57.713

如果你检查它的元素，你会发现它是一个设置为背景的图像：http: [//dnok91peocsw3.cloudfront.net/relaunch/bg-mesh-2px-gap.png](http://dnok91peocsw3.cloudfront.net/relaunch/bg-mesh-2px-gap.png)

如果你想用 CSS 做到这一点，你可以使用“轮廓和边框”并给它们一个虚实线。或者使用两个 div 并给它们边框属性。

`border:1px dotted #111;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T21:32:33.743

您可以使用两条`div`虚线使用`css`

或者你可以`image`在 a 的 bg 中使用 a`div`并`repeat-y`在`css`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T21:37:31.010

他们将他们的容器设置为 //dnok91peocsw3.cloudfront.net/relaunch/bg-mesh-2px-gap.png 在整个容器宽度上重复 2px 的填充。然后他们使用的每个部分，他们将背景设置为白色。如果您开始删除某些部分或将其中一个 div 设置为 background:none，您可以看到容器。

# c++ - Windows 套接字编程 - 错误代码 0

> ID：12923703
> 
> 赞同：0
> 
> 时间：2012-10-16T21:28:46.477
> 
> 标签：c++, c, windows

我正在尝试使用 Windows 套接字创建程序，但在尝试创建套接字时出现错误代码 0

```
int iResult = WSAStartup(MAKEWORD(2, 2), &wsaData);
if (iResult != NO_ERROR) {
    wprintf(L"WSAStartup function failed with error: %d\n", iResult);
}

csocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP); 

if(csocket != INVALID_SOCKET){
    wprintf(L"socket function failed with error: %ld\n", WSAGetLastError());
} 
```

失败的部分是创建套接字，我得到的输出是“套接字函数失败，错误：0。

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:29:43.683

条件错误，`if`实际上正在创建套接字描述符，因为它不等于`INVALID_SOCKET`。

改成：

```
if (csocket == INVALID_SOCKET){
    wprintf(L"socket function failed with error: %ld\n", WSAGetLastError());
} 
```

# c# - 使用 C# 更改显示属性

> ID：12923704
> 
> 赞同：1
> 
> 时间：2012-10-16T21:28:50.673
> 
> 标签：c#, asp.net, css

> **可能重复：**
> [在后面的代码中设置显示属性](https://stackoverflow.com/questions/1471141/setting-display-property-in-the-code-behind)

我想`runat="server"`使用代码隐藏代码更改具有属性的 div 的 css。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:34:05.360

```
div1.Style["display"] = "none"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:31:50.423

给 div 一个 ID 并为其添加样式

```
 _Div.Style.Add("Display","none") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T21:32:07.990

如果你有类似的东西

```
<div id="myDiv" runat="server"></div> 
```

在您的 aspx.cs 代码隐藏文件中，您可以使用它的 id 访问 div

```
myDiv.Attributes["class"] = "myCssClass"; 
```

上面的代码将 div 的类设置为 myCssClass。

查看[HTMLGenericControl 类](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlgenericcontrol.aspx)以查看您可以在代码隐藏中操作的所有属性。

# ruby-on-rails - 在 Ruby 中执行 SQL 查询

> ID：12923705
> 
> 赞同：1
> 
> 时间：2012-10-16T21:28:51.130
> 
> 标签：ruby-on-rails, ruby, arrays, hash, multidimensional-array

我在 Ruby 中有这个查询来从数据库中获取一些数据：

```
@mastertest = connection.execute("select code_ver, date from mastertest") 
```

所以现在我假设`@mastertest`是一个包含所有行和列的二维数组

我尝试将所有内容打印出来：

```
@mastertest.each do |row|
  puts row[0]
end 
```

它打印所有行的第一列。

现在我想从所有行的第一列中找出唯一值并计算它的出现次数。我知道它可以通过哈希或数组来完成。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:45:28.277

```
result = @mastertest.map{ |row| row[0] }.uniq
result.size #=> number of occurrences 
```

# android - 如何在 Android ListView 的 OnClickItemListener 中使用 LoaderManager 和 CursorLoader

> ID：12923706
> 
> 赞同：0
> 
> 时间：2012-10-16T21:28:53.753
> 
> 标签：android, listview, android-cursorloader

我有一个简单的（？）Android 应用程序，它以 Activity（“第一个 Activity”）开头，ListView 列出了三个项目：Beginning、Intermediate 和 Advanced。到目前为止，一切都很好。接下来我想要发生的是，如果用户单击开始，将查询 SQLite 数据库，并检索数据库中指定为“开始”的所有项目。然后，我希望启动第二个 Activity（“第二个 Activity”）并将查询中的所有项目显示在该 Activity 的 ListView 中。我使用游标进行这项工作，但我正在尝试更新我的代码以使用 LoaderManager 和 CursorLoader。我认为我需要在第一个活动中的 ListView 的 onItemClick 方法中放置一个 onCreateLoader 方法。举个例子，我正在考虑这样的代码：

```
public class FirstActivity extends ListActivity implements LoaderManager.LoaderCallbacks<Cursor> {
    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ListView listview = getListView();
    String[] values = new String[] {
            "Beginning", "Intermediate", "Advanced"
    };

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, values);
    listview.setAdapter(adapter);

    listview.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    return new CursorLoader(this, <myUri>,
            <myFields>, <myQuery>, null, null); 
}               
        }

    });
} 
```

}

同样在我的 onClickItem 中，我将创建一个 Intent 并用一束数据填充它（我的第二个 Activity 的 ListView 将需要此数据用于其 onItemClick 方法）。无论如何，当我尝试这个时，Eclipse 对 onItemClick 中的 onCreateLoader 不满意，给了我很多关于不匹配的花括号、缺少分号等的错误消息。那么我做错了什么？单击列表项时如何查询我的数据库？如果我将 onCreateLoader 方法移到 onItemClick 方法之外，但在 setItemClickListener 内，我不会收到错误消息，但是如何在我的 onItemClick 方法中引用它？

任何帮助是极大的赞赏。提前谢谢了！

* * *

非常感谢这两个答案！我是安卓新手；我正在尝试实施您的建议并再次陷入困境。我创建了一个名为 GetLevelData 的新 Activity。我的第一个活动现在看起来像这样：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ListView listview = getListView();
    final String[] values = new String[] {
            "Beginning", "Intermediate", "Advanced"
    };

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, values);
    listview.setAdapter(adapter);

    listview.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            Intent choice = new Intent(getApplicationContext(), com.MyProject.project.GetLevelData.class);
            Bundle dataBundle = new Bundle();
            String chosenValue = values[position];
            dataBundle.putString("Level",chosenValue);
            choice.putExtras(dataBundle);
            try {
                startActivity(choice);
            } catch (Exception e) {
                Dialog d = new Dialog(getApplicationContext());
                d.setTitle("MyProjectActivity line 60");
                TextView tv = new TextView(getApplicationContext());
                tv.setText(e.toString());
                d.setContentView(tv);
                d.show();
            } finally {

            }
        }

    });
} 
```

我的新活动如下所示：

```
public class GetLevelData extends Activity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.leveldata);

    Intent myData = getIntent();
    Bundle info = myData.getExtras();

    if (info != null){
        TextView myTextView = (TextView)findViewById(R.id.textView1);
        String level = info.getString("Level");
        myTextView.setText(level);
    }
} 
```

}

textView1 是我的布局文件夹中 leveldata.xml 中 LinearLayout 内的 TextView。当我尝试运行它时，在 startActivity 中，我得到一个异常：找不到活动。我错过了什么？我'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T13:38:20.573

要为找到此帖子的任何人回答最后一个问题：

`textView1 is a TextView inside a LinearLayout in leveldata.xml in my layout folder. When I try to run this, at startActivity, I get an exception: Activity not found. What am I missing?`

您需要在清单中注册新活动。在 AndroidManifest 文件中使用类似这样的内容：

```
<activity android:name="com.my.package.GetLevelData"
        android:label="Level Data" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:21:54.400

为了更简单，将选择传递给第二个活动，而不是光标。也`CursorLoader`适用于内容处理程序，不适用于一般游标。上次我做了这样的事情，我相信我继承了[AsyncTaskLoader](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)。

因此，在意图中额外传递选择，并让第二个活动进行查询。

# java - java - 使用 toString 方法打印出“银行账户”信息

> ID：12923708
> 
> 赞同：-1
> 
> 时间：2012-10-16T21:29:16.077
> 
> 标签：java

因此，对于作业，我必须从格式如下的输入文件中读取：
Miller <--- last name
William <---first name
00001 <--- account ID
891692 06 <--- account balance
这四行代表一个“帐户”。从一个主要方法中，我必须从另一个名为 account 的类中调用并在该类中运行一个名为 toString() 的方法
toString() 应该以这种格式打印出这四行：
**00001，Miller，William，$891692.06**

到目前为止，这是我的主要方法中的内容：

```
 int count = 1;
    while(read.hasNextLine()) {
        String nextLine = read.nextLine();
            account.toString(nextLine);
        if(count %4==0) {
            vector.addAccount(nextLine);
        }
        count++;
    } 
```

这就是我的 toString 方法中的内容：

```
public String toString(String line) {
 for(int i = 0; i < position; i++){
  line = info[i]; 
    position++;
     }
     return System.out.println(info[2]+", "+info[0]+", "+info[1]+", "+info[3]);
} 
```

在 toString 中，返回语句出现错误，并且我需要格式化 info[3]（最终应该是帐户余额），以便在打印时以美元表示：$00.00

任何帮助深表感谢！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:29:58.993

你不能`return` `System.out.println(...);`

您的`return`陈述应如下所示：

```
return info[2]+", "+info[0]+", "+info[1]+", "+info[3]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:37:42.050

此代码有 2 个问题。首先是明显的编译错误

```
return System.out.println(info[2]+", "+info[0]+", "+info[1]+", "+info[3]); 
```

您应该返回 a`String`但调用 to`System.out.println`不会返回任何内容。`String`它在控制台上打印 a 。你需要的是

```
return info[2]+", "+info[0]+", "+info[1]+", "+info[3]; 
```

第二个是你的`toString`方法的实现。我认为`toString`您的作业所指的是`toString`从`Object`. 这意味着您将有一个`Account`类，您可以在构造函数中传递文件的内容，或者让`Account`该类解析文件。然后将从文件中读取的值存储在字段中，并在`toString`方法中以正确的形式返回这些值。就像是

```
public static void main( String[] args ){
  //loop over file and create Account instances
  Account account = new Account( lastName, firstName, ... );
}

public class Account{
  private String lastName, firstName;
  public Account( String lastName, String firstName, ... ){
    this.lastName = lastName;
    this.firstName = firstName;
  }

  @Override
  public String toString(){
    return lastName + ", " + firstName ... ;
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:30:24.870

您不会`print`从 中返回语句`toString`，而是返回字符串本身。

只需将您的`return`声明更改为： -

```
return info[2]+", "+info[0]+", "+info[1]+", "+info[3]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T21:33:08.947

结合 Nambari 的提示，您应该尝试如下代码：

```
int count = 1;
while(read.hasNextLine()) {
    String nextLine = read.nextLine();
        System.out.println(account.toString(nextLine));
    if(count %4==0) {
        vector.addAccount(nextLine);
    }
    count++;
} 
```

和 toString 方法：

```
public String toString(String line) {
   for(int i = 0; i < position; i++){
      line = info[i]; 
      position++;
   }
   return info[2]+", "+info[0]+", "+info[1]+", "+info[3];
} 
```

# objective-c - 前缀属性必须后跟接口或协议栈溢出

> ID：12923710
> 
> 赞同：4
> 
> 时间：2012-10-16T21:29:22.253
> 
> 标签：objective-c, ios, compiler-errors, syntax-error, xcode4.5

[编译器错误] 前缀属性必须后跟接口或协议堆栈溢出代码在上一个中运行良好。项目。发布这么简单的问题，我觉得自己像个白痴。这东西有什么问题？

```
#import <UIKit/UIKit.h>
#import "FlipsideViewController.h"

@interface MainViewController : UIViewController <FlipsideViewControllerDelegate>
<UIPickerViewDelegate><UIPickerViewDataSource>

@property (strong, nonatomic) IBOutlet UITextField *inputText;
@property(strong, nonatomic) IBOutlet UIPickerView *picker;
@property(strong, nonatomic) IBOutlet UILabel *resultLabel;
@property(strong, nonatomic) NSArray *_convertFrom;
@property(strong, nonatomic) NSArray *_convertTo;
@property(strong, nonatomic) NSArray *_convertRates;
@property(strong, nonatomic) IBOutlet UILabel *formelLabel;
@property(strong, nonatomic) IBOutlet UITextField *inputText;

-(IBAction)textFieldReturn:(id)sender;
-(IBAction)backgroundTouched:(id)sender;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:33:20.000

您声明符合多个协议，如下所示：

```
@interface MainViewController : UIViewController <FlipsideViewControllerDelegate, UIPickerViewDelegate, UIPickerViewDataSource> 
```

不适用于多个尖括号组。

# c# - 意外结果 LINQ Where 子句

> ID：12923713
> 
> 赞同：0
> 
> 时间：2012-10-16T21:29:30.117
> 
> 标签：c#, linq, where-clause, fluent

我有一种方法可以通过 LINQ 限制列表中的项目。该列表包含具有两个布尔属性的项目：bool_a 和 bool_b。该列表包含 bool_a 为 true 且 bool_b 为 false 的项目以及两者均为 false 的项目。

我的期望是，一旦我限制了列表，只有 bool_a 为 false 的记录将保留，而 bool_a 和 bool_b 均为 false 的所有项目将被删除。但是，我发现所有项目都被删除了。就好像 AND 运算符的行为类似于 OR。

下面是一个例子。我没看到什么？

```
var records = GetRecords();
var count_where_a_before = records .Where(x => x.bool_a); // 100 items
var count_where_ab_before = records .Where(x => x.bool_a && x.bool_b); // 10 items
records = records.Where(x => !x.bool_a && !x.bool_b);
var count_where_a_after = records .Where(x => x.bool_a); // 0 items 
```

从上面可以看出，我一直在 where 子句之前和之后使用计数来评估列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:34:01.090

这条线

```
records = records.Where(x => !x.bool_a && !x.bool_b); 
```

结果记录中只有具有 !x.bool_a 的项目，因此逻辑上下一行没有 x.bool_a 项目。

这是真的，因为您声明所有 x.bool_b 都是错误的，因此该声明实际上与以下内容没有什么不同：

```
records = records.Where(x => !x.bool_a); 
```

编辑：

如果您想要 bool_a 为 true 且 bool_b 为 false 的所有记录，您应该能够使用此查询：

```
records = records.Where(x => x.bool_a && !x.bool_b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:40:19.070

如果要**删除**所有项目，其中 bool_a 和 bool_b 都是假的，你需要

```
records = records.Where(x => x.bool_a || x.bool_b); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:35:43.330

您使用的以下过滤器将只留下 A 和 B 均为 FALSE 的项目：

```
records = records.Where(x => !x.bool_a && !x.bool_b); 
```

如果您只想保留 A 为真且 B 为假的记录，请使用：

```
records = records.Where(x => x.bool_a && !x.bool_b); 
```

最后，您要检查的是 A = TRUE 的记录数：

```
var count_where_a_after = records .Where(x => x.bool_a); 
```

确保这是您想要检查的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T21:32:42.207

尝试：

```
var records = GetRecords().Where(!(x => x.bool_a && x.bool_b)); 
```

# ember.js - 使用 Ember 的小部件方法

> ID：12923716
> 
> 赞同：4
> 
> 时间：2012-10-16T21:29:46.397
> 
> 标签：ember.js, ember-old-router

我想将 ember 与小部件方法（孤立的组件）一起使用，为
Ember 应用程序设置 rootElement，每个应用程序都有自己的路由器和存储（如有必要）。

[我在http://jsfiddle.net/4xWep/2/](http://jsfiddle.net/4xWep/2/)中做了一次不成功的尝试， 也许路由器实例之间存在干扰问题。它已经感觉到这种小部件方法，具有不同的应用程序和路由器？

```
App1 = Ember.Application.create({
  rootElement: '#app1'
});

App1.ApplicationController = Ember.Controller.extend();
App1.ApplicationView = Ember.View.extend({
  templateName: 'app1-view'
})

App1.Router = Ember.Router.extend({...})

var App2 = Ember.Application.create({
    rootElement: '#app2'
});

App2.ApplicationController = Ember.Controller.extend();
App2.ApplicationView = Ember.View.extend({
  templateName: 'app2-view'
})

App2.Router = Ember.Router.extend({...}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:53:13.083

问题是您的两个应用程序的路由器使用`location.hash`来序列化它们的状态发生冲突。

在同一个页面中不能有两个应用程序依赖散列路由持久化策略。

我什至会说，在我看来，你想要实现的不是经典的“小部件”，因为它们将具有复杂的状态*（如每个内部路由的意愿所示）* ......当然你应该多挖一点你的架构。也许您需要的不是两个应用程序，而是小部件，或者另一方面，多个应用程序，但不是直接呈现在同一个文档中。

也许[这个（相关的？）问题](https://stackoverflow.com/q/12878301/90741)会有所帮助。

# ruby-on-rails - 在rails上乘以小数和整数

> ID：12923722
> 
> 赞同：1
> 
> 时间：2012-10-16T21:30:04.967
> 
> 标签：ruby-on-rails, ruby

看起来很简单，但什么都不是。

我有两个价值观：

```
t.integer  "quantity"
t.decimal  "unit_price",         :precision => 7, :scale => 2 
```

我想在每个（发票）循环中将数量乘以 unit_price：

```
invoice.quantity * invoice.unit_price 
```

这会导致以下错误：

```
undefined method `*' for nil:NilClass 
```

我是否必须先转换值，还是缺少一些微不足道的东西？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:33:08.087

```
invoice.quantity 
```

正在回归`nil`。

你可以通过错误信息来判断

```
undefined method `*' for nil:NilClass 
```

您正在尝试`*`在一个实例上执行该方法`NilClass`

以这个为例

```
> nil * 5
=> undefined method `*' for nil:NilClass (NoMethodError) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:38:37.047

在您的迁移中，将默认值添加到这些列。

```
t.integer  "quantity", :default => 0
t.decimal  "unit_price",         :precision => 7, :scale => 2, :default => 0 
```

这样，即使您尚未为特定记录设置这些值，您也不会收到此错误，这就是我怀疑的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:34:14.610

它只是意味着那`invoice.quantity`是零。

你可以在你的乘法中处理这个，`invoice.quantity.to_i * invoice.unit_price`或者在计算之前检查它可能更合适。

# python - 在 Python 中拆分可能嵌套的函数表达式列表

> ID：12923733
> 
> 赞同：5
> 
> 时间：2012-10-16T21:31:08.947
> 
> 标签：python, list, split

PostgreSQL 允许在表达式上创建索引，例如`CREATE INDEX ON films ((lower(title)))`. 它还具有`pg_get_expr()`将表达式的内部格式转换为文本的信息功能，即`lower(title)`在前一个示例中。表达有时会变得很毛茸茸。以下是一些示例（在 Python 中）：

```
sample_exprs = [
    'lower(c2)',
    'lower(c2), lower(c3)',
    "btrim(c3, 'x'::text), lower(c2)",
    "date_part('month'::text, dt), date_part('day'::text, dt)",
    '"substring"(c2, "position"(c2, \'_begin\'::text)), "substring"(c2, "position"(c2, \'_end\'::text))',
    "(((c2)::text || ', '::text) || c3), ((c3 || ' '::text) || (c2)::text)",
    'f1(f2(arga, f3()), arg1), f4(arg2, f5(argb, argc)), f6(arg3)'] 
```

最后一项并不是真正来自 Postgres，而只是我的代码应该处理的一个极端示例。

我编写了一个 Python 函数来将文本列表拆分为组件表达式。例如，最后一项分为：

```
 f1(f2(arga, f3()), arg1)
 f4(arg2, f5(argb, argc))
 f6(arg3) 
```

我尝试了`str`类似`find()`and之类的方法`count()`，也考虑了正则表达式，但最后我写了一个函数，这就是我用 C 编写的函数（基本上计算打开和关闭括号以找到在哪里中断文本）。这是功能：

```
def split_exprs(idx_exprs):
    keyexprs = []
    nopen = nclose = beg = curr = 0
    for c in idx_exprs:
        curr += 1
        if c == '(':
            nopen += 1
        elif c == ')':
            nclose += 1
            if nopen > 0 and nopen == nclose:
                if idx_exprs[beg] == ',':
                    beg += 1
                if idx_exprs[beg] == ' ':
                    beg += 1
                keyexprs.append(idx_exprs[beg:curr])
                beg = curr
                nopen = nclose = 0
    return keyexprs 
```

问题是是否有更 Pythonic 或更优雅的方式来执行此操作或使用正则表达式来解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:30:34.013

这是我的版本，我认为更 Pythonic，更简洁，并且适用于 chars 流，尽管我没有看到任何优势:)

```
def split_fns(fns):
    level = 0
    stack = [[]]
    for ch in fns:
        if level == 0 and ch in [' ',',']:
            continue        
        stack[-1].append(ch)

        if ch == "(":
            level += 1
        elif ch == ")":
            level -= 1
            if level == 0:
                stack.append([])

    return ["".join(t) for t in stack if t] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:55:39.620

如果你想让它更 Pythonic，我能想到的唯一方法就是可读性。

此外，我通过计算堆栈来避免一个分支和一个变量。我能给出的唯一 pythonic 建议是将“索引”变量与`enumerate(...)`函数一起使用。如在

`for i, j in enumerate(<iterable>)`

这将创建一个变量 ，`i`它将等于当前循环数，其中`j`将是预期的迭代变量。

```
def split_fns(fns):
    paren_stack_level = 0
    last_pos = 0
    output = []
    for curr_pos, curr_char in enumerate(fns):
        if curr_char == "(":
            paren_stack_level += 1
        elif curr_char == ")":
            paren_stack_level -= 1
            if not paren_stack_level:
                output.append( fns[last_pos:curr_pos+1].lstrip(" ,") )
                last_pos = curr_pos+1
    return output

for i in sample_exprs:
    print(split_fns(i)) 
```

# css - 叠加多个 PNG 图像

> ID：12923735
> 
> 赞同：0
> 
> 时间：2012-10-16T21:31:16.927
> 
> 标签：css

晚上好。我的问题是这样的：

我正在从数据库中渲染有关太阳系外行星的信息。查询时（PHP/MySQL），每个行星根据其类型呈现为 .png，并根据其大小（最大为 150 像素）指定高度和宽度，并在表格单元格中居中。我想要做的是为云和其他纹理覆盖多个 .png，它们的大小相同，并且也在表格单元格中居中。

[http://w.tarazedi.com/image1100](http://w.tarazedi.com/image1100)是问题的图像。

如果页面是静态的，我知道如何使用绝对定位和 z-index 执行此操作，但不知道如何使用动态内容执行此操作。此外，我不知道如何将其作为通用属性（而不是为每个渲染的星球都有 CSS 定义）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T21:36:02.163

无论是静态的还是动态的，过程都是一样的......将每个行星基础图像包装在一个容器中，您的叠加层相对于它的位置，例如

```
<div class="planetimage">
   <img src="baseimage.png" class="base" />
   <img src="clouds.png" class="overlay" style="z-index: 1" />
   <img src="othertexture.png" class="overlay" style="z-index: 2" />
</div>

.planetimage {
    position: relative;
}

.planetimage .base {
   position: absolute;
   top: 0;
   left: 0;
   z-index : 0;
}

.planetimage .overlay{
   position: absolute;
   top: 0;
   left: 0;
} 
```

您唯一需要跟踪的是您添加的每个附加叠加层的 z-index，因此它们可以正确堆叠在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:47:54.217

```
 $type = mysql_query("SELECT type FROM planetproperties WHERE planetid='$planetid'");               $type = mysql_fetch_row($type) or die(mysql_error());               $type = $type[0];
 $subtype = mysql_query("SELECT subtype FROM planetproperties WHERE planetid='$planetid'");         $subtype = mysql_fetch_row($subtype) or die(mysql_error());         $subtype = $subtype[0];
 $fulltype = $type.$subtype;
 $cloud = mysql_query("SELECT cloudtex FROM planetproperties WHERE planetid='$planetid'");          $cloud = mysql_fetch_row($cloud) or die(mysql_error());             $cloud = $cloud[0];
 $rad = round($radius / 1000, 0); if($rad > 150){ $rad = 150; }
 $prad = $rad * (1 - $oblateness);
 $prad = round($prad, 0);
 echo "<tr><td style=\"text-align:center;vertical-align:middle\">";
 echo "<div style=\"width:$prad;height:$prad;padding:0;margin-left:auto;margin-right:auto;float:center;position:relative;background:none\">";
 echo "<img src=\"$fulltype.png\" height=$rad width=$prad style=\"position:absolute;left:0;top:0;z-index:0\">";
 if($cloud){ echo "<img src=\"$cloud.png\" height=$rad width=$prad style=\"position:absolute;left:0;top:0;z-index:10\">"; } 
```

:) 谢谢各位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:18:08.273

看看您是否可以将每个行星放在具有相同类的 div 中，并将该类绝对定位在您的父元素中。这将使每个行星的属性都相同，不需要 z-index。您需要四处玩耍，以便按照您想要的方式排列所有内容，反复试验。

```
<div class="overlay"><img src="planet.png"/></div>
<div class="overlay"><img src="clouds.png"/></div>
<div class="overlay"><img src="texture.png"/></div>
<div class="overlay"><img src="other.png"/></div>​

.overlay{position:absolute;}​ 
```

这有帮助吗？让我们知道结果如何。

# jquery - 锚点点击功能不起作用

> ID：12923740
> 
> 赞同：0
> 
> 时间：2012-10-16T21:31:25.657
> 
> 标签：jquery

当我单击链接时，事件正在触发但 alert() 功能不起作用。我的意思是，它没有执行功能代码。任何帮助表示赞赏。谢谢。

```
<a id="linkSurveyId" href="/wordcloud/49" title="Melodifestivalen">Melodifestivalen </a>

   $("#linkSurveyId").click( function (e) {
    e.preventDefault();
    alert("welcome");

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:34:58.437

为我工作：http: [//jsfiddle.net/L3k39/](http://jsfiddle.net/L3k39/)

我怀疑你的代码中有其他东西阻止了这个 JS 运行。检查您的错误控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:39:35.207

这样的代码应该可以工作，但可能有很多原因可能会阻止它工作..

1.  确保您的脚本包含在脚本标签内`<script> </script>`
2.  确保控制台中没有其他可能阻止 JS 执行的错误。
3.  确保正确包含 jQuery 库。您可以从[http://code.jquery.com/下载并包含或链接它](http://code.jquery.com/)
4.  确保代码包含在 DOM 就绪函数中，例如`$(function () { });`

试试下面的代码，

```
<script>
   $(function () {
       $("#linkSurveyId").click( function (e) {
         e.preventDefault();
         alert("welcome");
       });
   });
</script> 
```

# c# - C# XNA GameTime.ElapsedGameTime 用于均衡不同的计算机？

> ID：12923748
> 
> 赞同：0
> 
> 时间：2012-10-16T21:32:02.983
> 
> 标签：c#, xna, xna-4.0, game-engine

ElapsedGameTime 如何工作以使依赖于它的变量不会随着游戏的进行而增加？例如，这个方法：

```
private void Keyboard(GameTime gameTime)
    {
        float rotXZ = 0;

        float turningSpeed = (float)gameTime.ElapsedGameTime.TotalMilliseconds / 1000.0f;
        turningSpeed *= 1.6f * gameSpeed;
        KeyboardState keyState = Keyboard.GetState();
        if (keyState.IsKeyDown(Keys.Right))
            rotXZ += turningSpeed;
        if (keyState.IsKeyDown(Keys.Left))
            rotXZ -= turningSpeed;
    } 
```

我从一个解释说我们使用 ElapsedGameTime 的来源得到它，因此快速/慢速计算机的旋转速度是相同的，但我不明白这是如何工作的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:00:16.667

它之所以有效，是因为旋转将相对于自上一帧以来的时间而不是更新次数而增加。

在更好的计算机上，与速度较慢的计算机相比，在相同的时间内会有更多的更新。

# vb.net - Excel VB.NET 如何更改气泡图中单个气泡的边框？

> ID：12923753
> 
> 赞同：0
> 
> 时间：2012-10-16T21:32:12.787
> 
> 标签：vb.net, vba, excel, bubble-chart

我在 VB.NET 中生成气泡图，我认为让气泡的边框更厚会很好，这样更容易查看是否存在重叠，但我不知道该怎么做。要手动完成，您只需右键单击气泡，转到边框样式并输入您的值。

我整理了如何改变气泡的颜色：

```
.chart.SeriesCollection(i).interior.color = RGB 
```

我花了相当多的时间四处阅读，寻找类似的东西，可以让我将边框权重提高一个点左右，但我没有运气。

有人知道该怎么做吗？一如既往地感谢！

更新：我做了什么：

```
 With oChart

            With CType(.SeriesCollection, Excel.SeriesCollection)
                .NewSeries()
                With CType(.Item(counterVal - 43), Excel.Series)
                    .Name = mainSheet.Range("a" & counterVal).Value
                    .XValues = mainSheet.Range("b" & counterVal).Value
                    .Values = mainSheet.Range("d" & counterVal).Value
                    .BubbleSizes = mainSheet.Range("c" & counterVal).Value
                    .HasDataLabels = True
                    .DataLabels.Position = XlDataLabelPosition.xlLabelPositionAbove
                    'DL.ShowSeriesName = True
                    .Has3DEffect = True
                    .Format.ThreeD.SetThreeDFormat(Microsoft.Office.Core.MsoPresetThreeDFormat.msoThreeD1)
                    '.Format.Line.Weight = 1.5
                End With
            End With
        End With 
```

我最终只使用了 3D 效果而不是线宽，但我把它们都留在了里面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:33:59.657

例如

```
Dim ws As Worksheet
Dim co As ChartObject
Dim ch As Chart
Dim sr As Series
Dim pt As Point

Set ws = ActiveSheet
Set co = ws.ChartObjects(1)
Set ch = co.Chart
Set sr = ch.SeriesCollection(1)
Set pt = sr.Points(19)

pt.Select

With Selection.Format.Fill
    .Visible = msoTrue
    .ForeColor.ObjectThemeColor = msoThemeColorAccent2
    .ForeColor.TintAndShade = 0
    .ForeColor.Brightness = 0
    .Transparency = 0
    .Solid
End With
With Selection.Format.Line
    .Visible = msoTrue
    .ForeColor.RGB = RGB(0, 176, 80)
    .Transparency = 0
End With 
```

# django - 芹菜错误“对等方重置连接”

> ID：12923758
> 
> 赞同：7
> 
> 时间：2012-10-16T21:32:29.223
> 
> 标签：django, heroku, celery

Celery 的连接会定期重置并显示错误消息：

```
[Errno 104] Connection reset by peer 
```

目前，在我重置服务器之前，我会丢失任务和之后触发的任何内容。我有两个问题：（1）是什么导致了错误/我该如何预防？(2) 如何在错误发生时捕获错误并重试我的任务？

我在 Heroku 上运行。Celery 配置了 AMQP (CloudAMQP) 作为代理，redis (REDIS_TO_GO) 作为结果后端。

堆栈跟踪：

```
File "celery/task/trace.py", line 224, in trace_task
  R = retval = fun(*args, **kwargs)
File "myapp/tasks.py", line 310, in mytask1
  mytask2.delay(message)
File "celery/app/task.py", line 343, in delay
  return self.apply_async(args, kwargs)
File "celery/app/task.py", line 458, in apply_async
  with app.producer_or_acquire(producer) as P:
File "python2.7/contextlib.py", line 17, in __enter__
  return self.gen.next()
File "celery/app/base.py", line 256, in producer_or_acquire
  with self.amqp.producer_pool.acquire(block=True) as producer:
File "kombu/connection.py", line 712, in acquire
  R = self.prepare(R)
File "kombu/pools.py", line 57, in prepare
  p.revive(connection.default_channel)
File "kombu/connection.py", line 626, in default_channel
  self._default_channel = self.channel()
File "kombu/connection.py", line 167, in channel
  chan = self.transport.create_channel(self.connection)
File "kombu/transport/amqplib.py", line 324, in create_channel
  return connection.channel()
File "kombu/transport/amqplib.py", line 243, in channel
  return Channel(self, channel_id)
File "kombu/transport/amqplib.py", line 267, in __init__
  super(Channel, self).__init__(*args, **kwargs)
File "amqplib/client_0_8/channel.py", line 82, in __init__
  self._x_open()
File "amqplib/client_0_8/channel.py", line 469, in _x_open
  self._send_method((20, 10), args)
File "amqplib/client_0_8/abstract_channel.py", line 76, in _send_method
  method_sig, args, content)
File "amqplib/client_0_8/method_framing.py", line 252, in write_method
  self.dest.write_frame(1, channel, payload)
File "amqplib/client_0_8/transport.py", line 165, in write_frame
  frame_type, channel, size, payload, 0xce))
File "python2.7/socket.py", line 224, in meth
  return getattr(self._sock,name)(*args) 
```

版本：

```
Django==1.4.1
django-celery==3.0.9
celery==3.0.9
celery-with-redis==3.0
amqplib==1.0.2
kombu==2.4.7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-20T17:32:55.457

看起来您的连接用完了。当您查看**CloudAMQP 控制台** *打开连接*时，您可以对其进行验证。

也许看看芹菜`BROKER_POOL_LIMIT`

# c++ - C++ While(cin >> x) 如何工作？

> ID：12923762
> 
> 赞同：8
> 
> 时间：2012-10-16T21:32:47.653
> 
> 标签：c++, operators, cin, istream

我的问题是如何，

```
while(cin>>x)
{
     //code
} 
```

工作。或者更具体地说，该代码会停止循环怎么办？

从[这里](http://www.cplusplus.com/reference/iostream/istream/operator%3E%3E/)的文档中，看起来 >> 运算符返回一个`&istream`. 这是否意味着如果读取失败或到达文件末尾，它不仅会设置 eofbit、failbit 或 badbit，还会返回 null？这真的没有意义，所以我怀疑就是这样。

是否有某种对 eofbit 的隐式检查？

我问是因为我希望用 2 个这样的类来实现类似的东西，

```
class B
{
   //variables and methods
}

class A
{
   //Variables and methods
   //Container of B objects. ex. B[] or vector<B> or Map<key,B>
   &A >> (B b);
}

int main()
{
   A a;
   B b;

   while( a >> b)
   {
      //Code
   }

} 
```

**注意：**我不希望继承自，`istream`除非它是使这项工作的魔力来自的地方。这样做的原因是我希望使类及其依赖项尽可能小。如果我从那里继承，`istream`我将收到它所有的公共和受保护的东西，我不会试图创建一个`istream`类似的对象。我只想复制一个**非常**好的片段。

**编辑：**我正在使用 Visual Studio 2010，（这变得非常痛苦），我需要一些与它的 C++03 + 一些 C++11 的实现兼容的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T21:40:14.570

> 从这里的文档中，看起来 >> 运算符返回一个 &istream。这是否意味着如果读取失败或到达文件末尾，它不仅会设置 eofbit、failbit 或 badbit，还会返回 null？

不，会返回对流对象的引用，但会设置内部标志。仅测试这些标志后，后续调用`operator>>`将失败。

> 是否有某种对 eofbit 的隐式检查？

不知道问题是什么。流不会尝试预先确定下一个请求是否会失败，而只会在一个操作因遇到 EOF 而失败时设置标志。每次调用`operator>>`都会首先测试流的状态，并且只有在流处于良好状态时才会继续。

> 如何`while(cin>>x)`工作？

存在从流对象到布尔值的隐式转换。`true`如果流处于良好状态或其他情况，则转换产生`false`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T21:44:37.783

> 现在你能写一个例子来说明我如何用上面的东西做到这一点吗？

像这样：

```
// UNTESTED
class B
{
   //variables and methods
}

class A
{
   bool still_good;

   //Variables and methods
   //Container of B objects. ex. B[] or vector<B> or Map<key,B>
   A& operator>>(B& b) {
     try_to_fill_b();
     if(fail) still_good = false;
     return *this;
   }
   explicit operator bool() { return still_good; }
}

int main()
{
   A a;
   B b;

   while( a >> b)
   {
      //Code
   }

} 
```

# perl - 如何在while循环内仅访问文件的一行中的值？

> ID：12923763
> 
> 赞同：-1
> 
> 时间：2012-10-16T21:32:47.603
> 
> 标签：perl

我有以下文件：

```
10001;02/07/98;;PI;M^12/12/59^F^^SP^09/12/55
;;;;;M1|F1|SP1;11;10;12;10;12;11;1.82;D16S539
;;;;;M1|F1|SP1;8;8;8;8;10;8;3.45;D7S820
;;;;;M1|F1|SP1;14;12;12;11;14;11;1.57;D13S317
;;;;;M1|F1|SP1;12;12;13;12;13;8;3.27;D5S818
;;;;;M1|F1|SP1;12;12;12;12;12;8;1.51;CSF1PO
.
.
. 
```

`$indiv[0]`当我运行下面的代码时，我会为文件的每一行打印一个值（在本例中为：） `M1M1M1M1M1M1...`。我只想使用其中一个值，它可能是第一个、最后一个等。我知道我可以`print $indiv[0]`在循环外使用并获取最后一个，但事实并非如此，`print`这里只是一个示例，我需要将该值用于循环内的其他计算。

那么，我怎样才能只访问一个值（仅一行），并将其保留在 while 循环中？

提前致谢！

```
#!usr/bin/perl
use warnings;
use strict;

my @indiv = ();

open FILE, $ARGV[0] or die $!;

while (<FILE>) {
chomp;
my @field = split /;/;
    if ($field[0] eq '') {@indiv = split /\|/, $field[5];  
    print $indiv[0];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:28:47.303

只需输入一个常用的习惯用法即可过滤掉重复项。

```
#!/usr/bin/perl
use warnings;
use strict;

my %seen;
while (<>) {
    chomp;
    my @field = split /;/;
    if ($field[0] eq '') {
        my ($foo) = split /\|/, $field[5];  
        if (!$seen{$foo}++) {
            print "$foo\n";
        }
    }
} 
```

# z3 - 参数化排序

> ID：12923770
> 
> 赞同：1
> 
> 时间：2012-10-16T21:33:13.377
> 
> 标签：z3, smt

如何访问参数化排序的值？

例如，如果我有以下声明：

```
(declare-sort Pair 2)
(declare-const x (Pair Int Int)) 
```

如何访问`x`代表的对中的第一个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:55:56.840

您可以使用两个选择器创建参数记录`first`并`second`访问其字段。

这是[一个例子](http://rise4fun.com/Z3/gc8)：

```
(declare-datatypes (T1 T2) ((Pair (mk-pair (first T1) (second T2)))))
(declare-const p1 (Pair Bool Int))
(declare-const p2 (Pair Int Int))
(assert (first p1))
(assert (> (first p2) 2))
(assert (= (second p1) (second p2)))
(check-sat)
(get-model) 
```

Z3 SMT指南中也有关于[代数数据类型的全面介绍。](http://rise4fun.com/z3/tutorialcontent/guide#h27)

# python - bash均匀选择10个数字

> ID：12923775
> 
> 赞同：0
> 
> 时间：2012-10-16T21:33:34.693
> 
> 标签：python, image, bash, animated-gif

在我目前的问题中，我有数百个动画 gif，它们会执行几次特定的动画，然后最后一次执行不同的动画。所以这意味着 gif 循环 3 次左右然后在第 4 次而不是循环它会做一个不同的动画。这些循环都只是硬编码到 .gif 文件中的层中。

我的目标是确定第一个循环并将动画缩小为十帧​​。我认为使用 python，我可以找到第一帧何时等于后一帧（从而找到第一个完整序列和帧数）。现在我有了动画拍摄的帧数，这个数字在我正在使用的数百个不同图像中是可变的。所以对于一个图像，第一个循环将在 20 帧左右完成，另一个可能在 25 帧内完成。有些需要 75 帧左右（因为它们是一个非常慢的图像）

我的问题是使用这些数字（20、25、75，......或任何第一个循环）我怎样才能最好地将它变成只有 10。在我的脑海中我做了一些数学运算，这是一个很好的例子我需要弄清楚如何生成

```
20 -> 20/10 = 2 Resulting sequence: [0, 20) step 2
25 -> 25/10 = 2.5 Sequenece: [0, 25).... Step ?? should alternate between 2 and 3 somehow
75 -> 75/10 = 7.5 Sequenece: [0, 75).... Step ?? should alternate between 7 and 8 somehow 
```

我的解决方案可以在 bash 脚本或 python 中，也可以在 bash shell 中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:57:09.330

*注意：以下较短的解决方案*

这是一个 Python 迭代器类，可用于生成这些序列：

```
class quantizer:
    def __init__(self, total, limit):
        self.total = total
        self.limit = limit
        self.index = float(0)
        self.step = float(total) / float(limit)
    def __iter__(self):
        return self
    def next(self):
        if self.index >= self.total:
            raise StopIteration
        result = int(round(self.index))
        self.index += self.step
        return result 
```

*更好的解决方案：* 有人向我指出，使用生成器有一个更简洁的解决方案：

```
def quantize(total, limit):
    i, step = 0.0, float(total) / float(limit)
    while i < total:
        yield int(round(i))
        i += step 
```

你可以像这样使用它：

```
>>> for frame in quantize(25, 10):
...     print frame
... 

0
3
5
8
10
13
15
18
20
23
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T04:51:38.507

```
# shrink N K -- outputs K (default 10) evenly-spaced integers in the range [0, N)
shrink() {
  local i k=$((${2:-10} - 1)) n=$(($1 - 1))
  for i in 0 $(seq $k); do echo $((n * i / k)); done
}

$ echo $(shrink 75)
0 8 16 24 32 41 49 57 65 74
$ echo $(shrink 20)
0 2 4 6 8 10 12 14 16 19 
```

这里有几个假设：

1.  你总是想要第一帧和最后一帧。

2.  帧从 0 到 n-1 编号。

（是的，我本可以说`for i in $(seq 0 $k)`。但我没有。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T08:07:16.880

一个 awk 解决方案。如果您不想从第 0 帧开始，您可以轻松添加偏移量。

```
#!/bin/bash
awk -v ori_f=$1 -v final_f=$2 '
  BEGIN {
    steps=ori_f/final_f
    for (i=0; i<final_f; i++){
      printf "%.0f\n", val
      val=val+steps
    }
  }
' 
```

# ios - 无用的核心数据迁移错误 - 操作无法完成

> ID：12923776
> 
> 赞同：1
> 
> 时间：2012-10-16T21:33:37.210
> 
> 标签：ios, core-data, core-data-migration

我正在进行手动迁移，主要使用此 stackoverflow 答案作为指南： [https ://stackoverflow.com/a/8155531/5416](https://stackoverflow.com/a/8155531/5416)

我有 3 个单独的实体需要迁移。每个属性只有一个在变化，它从整数变为字符串。一些实体似乎运行良好，没有抛出异常，但该过程没有完成。它列出了一堆本质上完全相同的错误：

> 错误域 = NSCocoaErrorDomain 代码 = 1570 \"操作无法\U2019t 完成。（Cocoa 错误 1570。）\" UserInfo=0x2a4c2790 {NSValidationErrorObject=NSManagedObject_CCRecipeIngredient_2:, NSValidationErrorKey=name, NSLocalizedDescription=操作无法\U2019t 完成。（可可错误 1570。）}

任何想法如何最好地解决这个问题？如果有帮助，这是我正在使用的迁移策略：

```
- (BOOL)createDestinationInstancesForSourceInstance:(NSManagedObject *)aSource
                                      entityMapping:(NSEntityMapping *)mapping
                                            manager:(NSMigrationManager *)migrationManager
                                              error:(NSError **)error {

    NSString *attributeName = @"foodId";

    NSEntityDescription *aSourceEntityDescription = [aSource entity];
    NSString *aSourceName = [aSourceEntityDescription valueForKey:@"name"];

    NSManagedObjectContext *destinationMOC = [migrationManager destinationContext];
    NSManagedObject *destEntity;
    NSString *destEntityName = [mapping destinationEntityName];

    if ([aSourceName isEqualToString:@"CCFood"] || [aSourceName isEqualToString:@"CCFoodLogEntry"] || [aSourceName isEqualToString:@"CCRecipeIngredient"] )
    {
        destEntity = [NSEntityDescription
                           insertNewObjectForEntityForName:destEntityName
                           inManagedObjectContext:destinationMOC];

        // attribute foodid
        NSNumber *sourceFoodID = [aSource valueForKey:attributeName];
        if (!sourceFoodID)
        {
            [destEntity setValue:@"0" forKey:attributeName];
        }
        else
        {
            NSInteger sourceFoodIDInteger = [sourceFoodID intValue];
            NSString *sourceFoodIDString = [NSString stringWithFormat:@"%i", sourceFoodIDInteger];
            [destEntity setValue:sourceFoodIDString forKey:attributeName];

        }

        [migrationManager associateSourceInstance:aSource
                          withDestinationInstance:destEntity
                                 forEntityMapping:mapping];

        return YES;
    } else
    {
        // don't remap any other entities
        return NO;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:52:51.850

好的，所以我想这只是我误解了这个 API 是如何工作的一个例子。所有对象的属性都不会自动映射。我处于（错误的）假设之下，即我只需要设置我正在映射的属性。

最后，我所要做的就是遍历源实体的属性并将它们分配给目标实体。

```
- (BOOL)createDestinationInstancesForSourceInstance:(NSManagedObject *)aSource
                                      entityMapping:(NSEntityMapping *)mapping
                                            manager:(NSMigrationManager *)migrationManager
                                              error:(NSError **)error {

    NSString *attributeName = @"foodId";

    NSEntityDescription *aSourceEntityDescription = [aSource entity];
    NSString *aSourceName = [aSourceEntityDescription valueForKey:@"name"];

    NSManagedObjectContext *destinationMOC = [migrationManager destinationContext];
    NSManagedObject *destEntity;
    NSString *destEntityName = [mapping destinationEntityName];

    if ([aSourceName isEqualToString:@"CCFood"] || [aSourceName isEqualToString:@"CCFoodLogEntry"] || [aSourceName isEqualToString:@"CCRecipeIngredient"] )
    {
        destEntity = [NSEntityDescription
                           insertNewObjectForEntityForName:destEntityName
                           inManagedObjectContext:destinationMOC];

        // migrate all attributes
        NSEntityDescription *entity = [aSource entity];
        NSDictionary *attributes = [entity attributesByName];
        for (NSString *attribute in attributes) {
            if ([attribute isEqualToString:@"foodId"]) {
                // migrate the food id
                NSNumber *sourceFoodID = [aSource valueForKey:attributeName];
                if (!sourceFoodID)
                {
                    [destEntity setValue:@"0" forKey:attributeName];
                    NSLog(@"migrating %@: empty foodid", aSourceName);
                }
                else
                {
                    NSInteger sourceFoodIDInteger = [sourceFoodID intValue];
                    NSString *sourceFoodIDString = [NSString stringWithFormat:@"%i", sourceFoodIDInteger];
                    [destEntity setValue:sourceFoodIDString forKey:attributeName];
                    NSLog(@"migrating %@ # %@", aSourceName, sourceFoodIDString);

                }
            }
            else {
                // not the foodid, so just pass it along
                id value = [aSource valueForKey: attribute];
                [destEntity setValue:value forKey:attribute];
            }
        }

        [migrationManager associateSourceInstance:aSource
                          withDestinationInstance:destEntity
                                 forEntityMapping:mapping];

        return YES;
    } else
    {
        // don't remap any other entities
        return NO;
    }
} 
```

# javascript - 推送到多维数组

> ID：12923779
> 
> 赞同：1
> 
> 时间：2012-10-16T21:33:49.563
> 
> 标签：javascript, arrays, multidimensional-array

我有一个这样的for循环：

```
var mappedPoints = new Array();    

for (i=0; i<livePoints.length; i++){
            var xOptions = [];
            var useX;
            var useY;
            for (j=0; j<madeMapPoints.length; j++){
                if(parseFloat(livePoints[i].Latitude) < parseFloat(madeMapPoints[i].xpoint)){
                    break;
                }
                xOptions.push(madeMapPoints[i]);
                useX = parseFloat(madeMapPoints[i].xpoint);
            }

            for(k=0;k<xOptions.length;k++){
                if(parseFloat(livePoints[i].Longitude) < parseFloat(xOptions[k].ypoint)){
                    break;
                }
                useY = parseFloat(xOptions[k].ypoint);
            }
            var num = Math.pow(parseInt(useX+useY),2);
            mappedPoints[num].push(livePoints[i]);
        } 
```

在底部周围有一行写着`mappedPoints[num].push(livePoints[i]);`。我想要发生的是推送到我在 num 中定义的索引，因此如果再次在 NUM 中出现相同的值，它将被推送到 num 中定义的数组键。

我所拥有的不起作用。PHP 等价物做我想要的将是这样的：

```
$mappedPoints[$useX."_".$useY][] = livePoints[i]; 
```

我能以某种方式用 JS 完成相同的结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:31:52.197

您应该首先检查是否`mappedPoints[num]`是一个数组。但我认为在这种情况下你需要的`mappedPoints`不是一个数组，你需要一个对象。

在 javascript 中，关联数组不存在，但可以用对象模拟。这有点令人困惑，因为两者都可以以相同的方式访问。

一开始：

```
var mappedPoints = {}; //this way you define mappedPoints to be an object 
```

在最后：

```
if(!mappedPoints.hasOwnProperty(num))
    mappedPoints[num] = []; //this way you define mappedPoints[num] to be an array

mappedPoints[num].push(livePoints[i]); 
```

# c# - 为什么这个正则表达式只返回一个匹配项？

> ID：12923782
> 
> 赞同：0
> 
> 时间：2012-10-16T21:33:57.103
> 
> 标签：c#, .net, regex, regex-greedy, non-greedy

这是我的输入：

> xxx999xxx888xxx777xxx666yyy
> 
> xxx222xxx333xxx444xxx555yyy

这是表达式：

```
xxx.*xxx(?<matchString>(.(?!xxx.*xxx))*?)xxx.*yyy 
```

它返回**444**。

我希望它同时返回 444 和 777，但我对此无能为力。

我有*！*排除，使其仅匹配左侧最里面的内容（当我只搜索一个结果时效果很好，这是大多数时间）。但是，我有一种感觉，这与它在这种情况下跳过第一个结果的原因有关。我不知道从这里去哪里。

我一直在这里测试： [http](http://regexlib.com/RETester.aspx) : //regexlib.com/RETester.aspx（启用了“SingleLine”和“Explicit Capture”）

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T21:43:44.290

首先，我想解释一下为什么您当前的解决方案不起作用：

由于您启用了`SingleLine`选项`.*`matches `999xxx888xxx777xxx666yyy\nxxx222xxx333`，括号中的模式 matches `444`，其余的正则表达式 match `xxx555yyy`。

因此，要匹配两者`777`，`444`您可以禁用`SingleLine`选项或使用以下内容：

```
xxx\d+xxx\d+xxx(?<matchString>\d+)xxx\d+yyy 
```

# c# - 加快敲击反馈时间

> ID：12923783
> 
> 赞同：1
> 
> 时间：2012-10-16T21:33:58.673
> 
> 标签：c#, silverlight, windows-phone-7

有没有办法提高手势注册的速度，换句话说就是点击？我想要一个“高速能力”的点击功能——用户可以尽可能快地点击。

默认的 Tap-Listener 速度不够快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:59:41.593

这是基于 XNA 或 Silverlight 的应用程序吗？如果它是 Silverlight，那么您可以根据您要达到的目标使用 ManipulationStarted 或 ManipulationCompleted。

# html - google adsense 横幅未满载

> ID：12923790
> 
> 赞同：0
> 
> 时间：2012-10-16T21:34:38.090
> 
> 标签：html, image, adsense, banner

我不明白为什么我的左右 Google Adsense 横幅没有完全加载。我只看到一张图片横幅：

[http://liberainformazione.it/](http://liberainformazione.it/)

我做错了什么？你能帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:43:18.533

您的图像已完全加载。你的问题是你的 CSS 样式。所有这些部分可见图像的高度是因为您在 200x200 div 中有一个 div，这会产生问题。你必须自己检查css，我只是给你找的地方:)

我对wordpress并不熟悉，但我只是复制了你的html的一小部分

```
<aside id="leftSidebar">
        <!--img src="wp-content/themes/base/images/left.png"/-->
<div id="adsense" style="height:200px;">
<div id="adsense-loader" style="display:block;">
    <script type="text/javascript"><!--
    google_ad_client = "ca-pub-9833138679608221";
    google_ad_slot = "5796741996";
    google_ad_width = 200;
    google_ad_height = 200;
    //-->
    </script>
    <script type="text/javascript" src="http://pagead2.googlesyndication.com    /pagead/show_ads.js"></script>
    <ins style="display:inline-table;border:none;height:200px;margin:0;padding:0;position:relative;visibility:visible;width:200px">X<ins data-web-developer-element-ancestors-outline="true" id="aswift_2_anchor" style="display: block; border: medium none; height: 200px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 200px; outline: 1px solid rgb(185, 74, 72);"><iframe allowtransparency="true" hspace="0" marginwidth="0" marginheight="0" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){i+='.call';setTimeout(h,0)}else if(h.match){i+='.nav';w.location.replace(h)}s.log&amp;&amp;s.log.push(i)}" vspace="0" id="aswift_2" name="aswift_2" style="left: 0px; position: absolute; top: 0px;" frameborder="0" height="200" scrolling="no" width="200"></iframe></ins></ins>

</div> 
```

当我将其用作源代码时，我得到 2 个正方形，彼此相邻，而忽略了长规则，从 ins 开始......等等......广告显示得很好。

我认为您的问题是或者您使用的 wp-addon 或者您以错误的方式编辑了您的模板，或者您的 wp-template 对此有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:39:43.413

看起来有人偷了你的谷歌广告......将谷歌广告与他们的广告重叠：

这一行：

```
<ins style="display:inline-table;border:none;height:200px;margin:0;padding:0;position:relative;visibility:visible;width:200px">X<ins data-web-developer-element-ancestors-outline="true" id="aswift_2_anchor" style="display: block; border: medium none; height: 200px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 200px; outline: 1px solid rgb(185, 74, 72);"><iframe allowtransparency="true" hspace="0" marginwidth="0" marginheight="0" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){i+='.call';setTimeout(h,0)}else if(h.match){i+='.nav';w.location.replace(h)}s.log&amp;&amp;s.log.push(i)}" vspace="0" id="aswift_2" name="aswift_2" style="left: 0px; position: absolute; top: 0px;" frameborder="0" height="200" scrolling="no" width="200"></iframe></ins></ins> 
```

# windows - 我无法在 Windows 上设置和配置 Common LISP (SBCL)

> ID：12923793
> 
> 赞同：0
> 
> 时间：2012-10-16T21:34:41.840
> 
> 标签：windows, lisp, common-lisp

我想在 Windows 上运行 common lisp (SBCL) 但我不能。我是新手，这是我第一次尝试运行 lisp，并且我根据以下链接给出的说明进行了尝试； [http://www.pchristensen.com/blog/articles/installing-sbcl-emacs-and-slime-on-windows-xp/](http://www.pchristensen.com/blog/articles/installing-sbcl-emacs-and-slime-on-windows-xp/)

我下载了员工并进行了相应的安装，这是我安装后的目录树：

C:\home 中的两个目录 - bin、usr。

在 bin 目录中；

```
C:\home\bin\emacs\site-lisp\slime
C:\home\bin\SBCL-1.0.13\ 
```

和四个空目录：c:\home\usr 中的 doc、info、lisp、site

我的道路是；

```
PATH      C:\home\bin\SBCL-1.0.13\;C:\home\bin\emacs\bin\;
SBCL_HOME C:\home\bin\SBCL-1.0.13\ 
```

根据说明，我创建并放置了一个文件，site-start.el 之类的；C:\home\bin\emacs\site-lisp\site-start.el

site-start.el 包含以下行：

```
(setenv "HOME" "C:/home/") 
```

创建了另一个文件 .emacs ，其中包含以下内容；

```
(setq inferior-lisp-program "sbcl")
(add-to-list 'load-path "c:/home/bin/emacs/site-lisp/slime/")
(require 'slime)
(slime-setup) 
```

`Ctrl x` `Ctrl s`当我用来保存它时，它已自动保存在 C:\Documents and Settings\Administrator\Application data\中。

当我通过输入 c:\home\bin\emacs\bin\emacs.exe 调用 emacs 时，出现 Emacs，当我输入`Esc`- 时，提示“ **Mx** ”出现在底部，当我通过 Mx 输入 slime 时，它​​说不匹配像下面这样；“Mx 粘液**[不匹配]** ​​”。

请告诉我如何调用正确的 lisp 环境并执行像 (+ 2 2) 这样的简单 lisp 代码来查看结果。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:23:04.030

`(setenv "HOME" "C:/home/")``$HOME`将Emacs的环境变量设置为 C:/home 目录。如果 Emacs 将 .emacs 文件保存到其他目录 - 这意味着它没有加载 site-start.el 文件，因此，它没有加载 .emacs 文件。

要检查的内容：

1.  执行`M-:``(getenv "HOME")`- 这应该打印“C:/home”，但如果没有，再次执行`M-:``(mapcar #'message load-path)``C-x b``*Messages*`并查看它打印的目录列表。您的 site-start.el 文件必须位于这些目录之一中。

2.  打开 Windows shell 终端窗口：`Win R`并输入`cmd.exe`. 这应该会打开运行 Windows shell 的终端窗口。键入`sbcl`。如果您看到许可证文本和提示（通常是 SBCL 中的星号字符） - 没关系，否则，您可能需要重新启动系统才能使您对环境变量所做的更改生效。如果您不想重新启动，您可以执行以下操作：

    `set PATH=C:/path/to/sbcl;%PATH%`

在您要启动 SBCL 的同一 shell 窗口中。但是，您需要将`inferior-lisp-program`变量设置为 SBCL 可执行文件的完整路径，直到重新启动。

当你把这两个整理好后，再次尝试加载 SLIME，就像你之前尝试过的一样。

*诸如`M-:`“按下元键并按住它的同时按 Shift 和分号”之类的键，诸如`C-x b`“按下控制键并按住它的同时按“x”，释放它们并按“b”之类的键。元键通常是Alt 键，但也使用 ESC。*

# jquery - 当我向下滚动时，Twitter bootstrap 附加的侧边栏会崩溃

> ID：12923794
> 
> 赞同：5
> 
> 时间：2012-10-16T21:34:51.853
> 
> 标签：jquery, twitter-bootstrap

我正在尝试创建一个类似于 Twitter 引导文档中的侧边栏：http: [//twitter.github.com/bootstrap/getting-started.html](http://twitter.github.com/bootstrap/getting-started.html)

我已经使词缀工作了，但是当您滚动过去数据偏移量时，该栏会折叠，因为它没有 .

HTML

```
<div class="span3">
          <ul data-spy="affix" data-offset-top="255" class="nav nav-tabs nav-stacked docs-sidebar" id="navbar">
            <li><a href="#grid">Grid system <i class="icon-chevron-right pull-right"></i></a></li>
            <li><a href="#fluidGridSystem">Fluid grid system <i class="icon-chevron-right pull-right"></i></a></li>
            <li><a href="#layouts">Layouts <i class="icon-chevron-right pull-right"></i></a></li>
            <li><a href="#responsive">Responsive design <i class="icon-chevron-right pull-right"></i></a></li>
          </ul>
          <p></p>
       </div> 
```

较少的

```
 // For Affix plugin
.affix {
  position: fixed;
  top: (@navbarHeight * 1.8) + @navbarPadding + 25px;
}

.docs-sidebar {
    width: (@gridColumnWidth * 4);
} 
```

这使侧边栏具有固定的 span4 宽度，但不会使其响应。我如何确保它是响应式的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:39:20.187

我也在试图找出最好的方法来做到这一点。这就是我所做的。也许不是最好的解决方案，但它正在工作。

我有一个两列布局，我希望左边是.affix。我将柱子拉出该行并将其放在原来的上方自己的行中。我通过添加 .offset3 将剩余的列移回原位。我将 .affix 放在列 div 而不是 ul 上。然后我将固定列包裹在一个 div 中，CSS 为 position:absolute; （即在 .row div 内部和 .col3 div 外部）这使两个 .row div 重叠，其中一个是固定的，另一个是滚动的。

# c# - 将照片上传到墙上时出现 ArgumentNullException

> ID：12923801
> 
> 赞同：1
> 
> 时间：2012-10-16T21:35:14.180
> 
> 标签：c#, facebook-c#-sdk

将照片上传到用户的墙上时，我收到 ArgumentNullException，参数“stream”

```
var fb = new FacebookClient();

fb.PostCompleted += (o, e) =>
{
    ...
};

dynamic parameters = new ExpandoObject();
parameters.access_token = accessToken;
parameters.message = "test efesur";
var mediaObject = new FacebookMediaObject
      {
          ContentType = "image/png", 
          FileName = "mifoto.png"
      };
mediaObject.SetValue(photo);
parameters.source = mediaObject;

fb.PostAsync("me/photos", parameters); 
```

AI 遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:00:20.247

根据[这些](https://stackoverflow.com/questions/9392016/facebook-c-sharp-sdk-throws-argumentnullexception) [问题](https://stackoverflow.com/questions/7654379/application-generated-apprequests-failing-in-silverlight)，当 API 由于各种原因无法处理您的请求时，您会收到该错误。

# javascript - 将对象推送到数组上，操作会更改每个元素

> ID：12923802
> 
> 赞同：0
> 
> 时间：2012-10-16T21:35:21.537
> 
> 标签：javascript, arrays, push

在 JavaScript 中，我有一个数组。我`push()`用来添加数组元素，但是当我操作所述元素时，每个数组元素都会改变，而应该只有一个。我的代码是：

```
// Arrays to hold the elements that have been created (added to the document).
create.element_array                       = []
create.element_array["name"]               = []
create.element_array["name"]["properties"] = []

var element_properties = 
{
    // Default all to 0.
    borderTopStyle: 0, borderRightStyle: 0, borderBottomStyle: 0, borderLeftStyle: 0,
    borderTopWidth: 0, borderRightWidth: 0, borderBottomWidth: 0, borderLeftWidth: 0, 
    borderTopColor: 0, borderRightColor: 0, borderBottomColor: 0, borderLeftColor: 0,
}

// Testing purposes. These will be added dynamically in production version.
create.element_array["name"].push("default_header");
create.element_array["name"]["properties"].push(element_properties);

create.element_array["name"].push("default_body");
create.element_array["name"]["properties"].push(element_properties);

create.element_array["name"].push("default_footer");
create.element_array["name"]["properties"].push(element_properties);

// Evidence that each array element is changed with index manipulation.
create.element_array["name"]["properties"][0].borderTopStyle = "dashed";

console.log(create.element_array["name"]["properties"][0]);
console.log(create.element_array["name"]["properties"][1]);
console.log(create.element_array["name"]["properties"][2]); 
```

我期望的结果是只应更改索引 0，但事实并非如此。上面的 console.log 行将输出以下内容：

```
Object
borderBottomColor: 0
borderBottomStyle: 0
borderBottomWidth: 0
borderLeftColor: 0
borderLeftStyle: 0
borderLeftWidth: 0
borderRightColor: 0
borderRightStyle: 0
borderRightWidth: 0
borderTopColor: 0
borderTopStyle: "dashed"
borderTopWidth: 0
__proto__: Object
 library.js:8
Object
borderBottomColor: 0
borderBottomStyle: 0
borderBottomWidth: 0
borderLeftColor: 0
borderLeftStyle: 0
borderLeftWidth: 0
borderRightColor: 0
borderRightStyle: 0
borderRightWidth: 0
borderTopColor: 0
borderTopStyle: "dashed"
borderTopWidth: 0
__proto__: Object
 library.js:8
Object
borderBottomColor: 0
borderBottomStyle: 0
borderBottomWidth: 0
borderLeftColor: 0
borderLeftStyle: 0
borderLeftWidth: 0
borderRightColor: 0
borderRightStyle: 0
borderRightWidth: 0
borderTopColor: 0
borderTopStyle: "dashed"
borderTopWidth: 0
__proto__: Object
 library.js:8 
```

`borderTopStyle`当我明确地将索引 0 定义为唯一被更改的索引时，为什么要为每个元素更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:42:26.070

对象在 javascript 中通过引用传递。毫不夸张的说：

element_properties == create.element_array["name"]["properties"][0] == create.element_array["name"]["properties"][1]

您可以使用 new 运算符或使用不同的对象文字来解决此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T21:46:01.043

您需要创建 element_properties 对象的新实例。像这样：

```
var properties_el = Object.create( element_properties );

create.element_array["name"].push("default_header");
create.element_array["name"]["properties"].push( properties_el); 
```

目前，您正在插入同一个对象 3 次。另一种选择是使用对象来存储您的属性，如下所示：

```
create.element_object = {};
create.element_object["name"] = properties_el; 
```

这允许您通过以下方式访问属性

```
create.element_object["name"]["borderTopStyle"] 
```

或者

```
create.element_object.name.borderTopStyle 
```

只是一个想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T21:41:46.433

`element_properties`您正在向数组中的每个点添加对对象的相同引用。这意味着当您尝试更改它时，您正在更改该引用指向的对象的值。

您可能希望改为使用属性对象的构造函数：

```
function ElementProperties(){
}
ElementProperties.prototype = {
    // Default all to 0.
    borderTopStyle: 0, borderRightStyle: 0, borderBottomStyle: 0, borderLeftStyle: 0,
    borderTopWidth: 0, borderRightWidth: 0, borderBottomWidth: 0, borderLeftWidth: 0, 
    borderTopColor: 0, borderRightColor: 0, borderBottomColor: 0, borderLeftColor: 0,
}; 
```

然后，像这样：

```
create.element_array["name"].push("default_header");
create.element_array["name"]["properties"].push(new ElementProperties()); 
```

# java - 在休眠和杰克逊中反序列化延迟加载

> ID：12923803
> 
> 赞同：7
> 
> 时间：2012-10-16T21:35:24.457
> 
> 标签：java, hibernate, jackson

有没有办法使用 id 而不是 POJO 对象来保持 LAZY 加载和反序列化对象。

我有 2 个类是通过多对多关系加入的。

像这样的东西

```
public class User {
    @Id
    @JsonProperty
    public long id;

    @ManyToMany(
            fetch = FetchType.EAGER,
    )
    @JoinTable(
            name = "User_EntityType",
            joinColumns = @JoinColumn(name = "user_id"),
            inverseJoinColumns = @JoinColumn(name = "type_id")
    )
    @JsonProperty
    public Set<Type> types;

}

public class Type {
    @Id
    @JsonProperty
    public long id;

    @ManyToMany(
            fetch = FetchType.EAGER,
            mappedBy = "types",
            targetEntity = User.class
    )
    @JsonProperty
    public Set<User> users;
} 
```

数据类型工作得很好。我可以毫无问题地使用休眠进行读写。

但是，我希望能够返回一个带有 REST API 的用户对象，所以我使用 Jackson 来反序列化它。问题是当我这样做时，它会反序列化 User 对象中的每个 Type，其中包括其他 Type 对象，这会造成巨大的混乱。

**是否可以只返回长类型 ID 集而不是类型集？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T03:37:54.310

是的，如果您使用的是带有 Object Identity 功能的 Jackson 2.0，这是可能的。

如果你用注解来注解一个类，`@JsonIdentityInfo`那么 Jackson 只会输出一次对象；后续引用将使用 ID。因此，只要类型已输出一次，您的类型集就会被序列化为 ID。当反序列化 Jackson 时，会将 ID 转回对象。

在您的情况下，我认为您需要像这样注释您的 Type 类：

```
@JsonIdentityInfo(generator=ObjectIdGenerators.PropertyGenerator.class, property="id")
public class Type {
    ...
} 
```

有关如何使用此功能的详细信息，请参阅[http://wiki.fasterxml.com/JacksonFeatureObjectIdentity 。](http://wiki.fasterxml.com/JacksonFeatureObjectIdentity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T23:46:13.583

我在我的 JAX-RS 端点中也遇到了这个问题，它必须使用 Jackson 的对象映射器来序列化和服务 Hibernate 实体。使用类似`@JsonIgnore`或`@JsonIdentityInfo(generator=ObjectIdGenerators.PropertyGenerator.class,...`不是我的解决方案的选项，因为前者意味着关系字段从序列化输出中被省略，而后一种方法无论如何都无法解决问题。

因此，我的解决方案是在执行实际序列化之前在映射器上设置以下标志：

```
ObjectMapper objMapper = new ObjectMapper();
objMapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false); 
```

这样，就没有尝试填充关系对象，而是它们的 id 保持不变，因此我可以将`fetch = FetchType.LAZY`标志保留在我的关系字段上。

# android - 处理活动之间的数据

> ID：12923806
> 
> 赞同：0
> 
> 时间：2012-10-16T21:35:30.640
> 
> 标签：android

我正在做一个新项目来学习 android 编程。所以我想知道如何处理Activity之间的数据。

我有一个 MainActivity，它解析一个远程 XML 文件并将所有解析的数据放在一个列表中此外，MainActivity 显示所有 MyData 的列表，如果我单击一个项目，它将启动我的 DetailActivity。

但是现在我使用带有 MyData 项的 Parcelable 的 putExtra 来显示数据（仅文本）。所以我想知道这是否是正确的方法？

我还有一个问题。在 MainActivity 我处理一个远程 XML 文件，但如果我有一个处理第二个远程 XML 文件的活动 SecondActivity。我怎样才能只下载这两个文件一次，以避免在 MainActivity 和 SecondActivity 之间切换时多次下载。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T21:38:21.613

将文件保存到手机以避免重复下载。只需检查文件是否存在，如果不存在，请下载并保存。至于在活动之间传递数据，Intent 的 putExtra 方法是正确的方法。我更喜欢可序列化而不是可打包，但这可能是因为可打包更难实现。

有关 putExtra 方法的简单示例，请看这里： [StackOverflow 答案](https://stackoverflow.com/a/4878259/1110688)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:40:21.847

取而代之的是，我将创建 Singleton 类来保存从 XML 解析的数据，这样两个活动都可以访问数据。处理 Parcelable 很困难，只能用于简单的数据类型。我也读过推荐这种方法。在您的情况下，请在单独的类中解析 XML。由于您使用的是列表，因此您的数据将被放置在 ArrayList 或 Array 中。您应该在活动之间传递的唯一内容是您希望显示详细信息并从 Singleton 类中的 ArrayList 检索它的数据索引。我已经使用了这种方法，而且您可以通过这种方式从应用程序中的任何 Activity 访问数据。

# vb.net - 得到“对象引用未设置为对象的实例”错误，不知道为什么

> ID：12923807
> 
> 赞同：0
> 
> 时间：2012-10-16T21:35:40.920
> 
> 标签：vb.net, add-in, office-interop

下面是完整的功能，但这是我认为导致错误的代码区域：

编辑：在单步执行该函数后，即使在设置为“taskrequestItem.GetAssociatedTask(False)”之后，循环任务项的第二次似乎也等于没有，因此在该循环的实例中，第一次引用任务项即. 如果 taskitem.categories = "TTD" 则抛出异常。但是，我在if语句中添加了“AND taskItem IsNot Nothing”的条件，我仍然得到这个异常。

```
If (TypeOf (resultItem) Is Outlook._TaskRequestItem) Then
                            counter += 1
                            taskrequestItem = resultItem
                            taskItem = taskrequestItem.GetAssociatedTask(False)
                            'taskItem.PercentComplete = 10
                            'If Not (taskItem.Status = Outlook.OlTaskStatus.olTaskComplete) Then
                            'strBuilder.AppendLine("#" + counter.ToString() + _
                            '" 2duedate: " + )

                            If taskItem.Categories = "TTD" Then
                            TTDcounter += 1
                            Dim listarray() As String = {taskItem.Delegator, taskItem.Subject, taskItem.DueDate, stripEstComp(taskItem.Body.ToString())}
                            taskPaneControl3.ListView2.Items.Add("New").SubItems.AddRange(listarray)
                            End If

                        End If
                'End If
                Marshal.ReleaseComObject(resultItem)
                resultItem = folderItems.FindNext()
                    Loop Until IsNothing(resultItem) 
```

在我添加了从每个任务请求项中获取关联任务项的部分后，错误开始弹出。

```
Private Sub GetTaskRequests(objApp As Microsoft.Office.Interop.Outlook.Application)
    Dim folder As Outlook.Folder = _
    TryCast(Application.Session.Folders(email).Folders("Inbox"), Outlook.Folder)

    Dim searchCriteria As String = "[MessageClass] = 'IPM.TaskRequest'"
    Dim strBuilder As StringBuilder = Nothing
    Dim counter As Integer = 0
    Dim taskrequestItem As Outlook.TaskRequestItem = Nothing
    Dim taskItem As Outlook.TaskItem = Nothing
    Dim folderItems As Outlook.Items = Nothing
    Dim resultItem As Object = Nothing
    Dim TTDcounter As Integer = 0

    Try
        folderItems = folder.Items
        folderItems.IncludeRecurrences = True
        If (folderItems.Count > 0) Then
            resultItem = folderItems.Find(searchCriteria)
            If Not IsNothing(resultItem) Then
                strBuilder = New StringBuilder()
                Do
                    If (TypeOf (resultItem) Is Outlook._TaskRequestItem) Then
                        counter += 1
                        taskrequestItem = resultItem
                        taskItem = taskrequestItem.GetAssociatedTask(False)
                        'taskItem.PercentComplete = 10
                        'If Not (taskItem.Status = Outlook.OlTaskStatus.olTaskComplete) Then
                        'strBuilder.AppendLine("#" + counter.ToString() + _
                        '" 2duedate: " + )

                        'If taskItem.Categories = "TTD" Then
                        TTDcounter += 1
                        Dim listarray() As String = {taskItem.Delegator, taskItem.Subject, taskItem.DueDate, stripEstComp(taskItem.Body.ToString())}
                        taskPaneControl3.ListView2.Items.Add("New").SubItems.AddRange(listarray)
                        'End If

                    End If
            'End If
            Marshal.ReleaseComObject(resultItem)
            resultItem = folderItems.FindNext()
                Loop Until IsNothing(resultItem)
            End If
        End If
        If Not IsNothing(strBuilder) Then
            Debug.WriteLine(strBuilder.ToString())
        Else
            Debug.WriteLine("There is no match in the " + _
                               folder.Name + " folder.")
        End If
    Catch ex As Exception
        System.Windows.Forms.MessageBox.Show(ex.Message)
        Debug.WriteLine("gettaskrequest")

    Finally
        If Not IsNothing(folderItems) Then Marshal.ReleaseComObject(folderItems)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:14:16.117

> 但是，我在if语句中添加了“AND taskItem IsNot Nothing”的条件，我仍然得到这个异常。

泰德仍然会检查

```
If taskItem.Categories = "TTD" 
```

第一的。测试`taskItem isNot Nothing`需要首先完成，你需要一个短路逻辑`And`，那就是

```
If taskItem isNot Nothing AndAlso taskItem.Categories = "TTD" Then 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:16:25.260

尝试

```
If taskItem IsNot Nothing AndAlso taskItem.Categories = "TTD" Then 
```

如果没有[AndAlso](http://msdn.microsoft.com/en-us/library/cb8x3kfz%28v=vs.100%29.aspx)运算符，条件评估将继续检查 taskItem.Categories 并且您的代码将崩溃。当然，在这种情况下，评估的顺序有很大的不同。

# r - 将行名保留为 R 中向量的名称

> ID：12923809
> 
> 赞同：1
> 
> 时间：2012-10-16T21:35:54.750
> 
> 标签：r, vector, rowname

我有一个数据框如下：

```
> df <- data.frame("A"=rnorm(26), "B"=rnorm(26),row.names=sample(letters,26)) 
```

然后我想`B`使用不同的行顺序将列作为向量取出

```
> newOrder <- sample(letters,26)
> vec <- df[newOrder,"B"] #1 
```

如何在 #1 的单个语句中保留正确的`df`行名作为向量名称？`vec`也就是说，无需执行以下操作：

```
> names(vec) <- newOrder 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T21:40:13.657

您可以使用同时设置名称`setNames`

```
> vec <- setNames(df[newOrder, "B"], newOrder)
> vec
          q           c           a           l           g           v 
-0.44632045  0.80264068 -0.51574653 -1.57176346  0.16977483 -0.04916571 
          j           z           u           b           w           p 
 0.95736262 -0.35259227  0.20451454 -0.03873499  0.62497872  1.26984233 
          f           t           o           y           n           k 
 0.52851609 -0.37680593 -2.01770314 -0.94752793  0.64001006  1.72032405 
          d           e           m           r           s           i 
 0.30731069  0.54537837  2.32968848 -0.43577586 -0.16144602 -0.12817791 
          x           h 
 0.52822103  1.68236876 
```

# eclipse - SWT 中的可聚焦合成

> ID：12923814
> 
> 赞同：1
> 
> 时间：2012-10-16T21:36:14.893
> 
> 标签：eclipse, swt

我们有一个自定义控件，它本质上是一个带有标签和按钮的组合。当前，当用户按下“Tab”时，焦点位于按钮上。

如何使合成获得焦点并从焦点中排除按钮？例如，用户应该能够通过所有自定义控件进行选项卡，而不是停留在按钮上。

**更新：**我们的控件树如下所示：

*   主窗格
    *   自定义面板1
        *   标签
        *   按钮
    *   自定义面板2
        *   标签
        *   按钮
    *   自定义面板3
        *   标签
        *   按钮

所有 CustomPanel 都属于同一个 Composite 子类。我们需要的是选项卡在这些面板之间循环而不是“看到”按钮（这些是唯一可聚焦的组件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:34:50.517

您可以使用 定义 a 的跳位`Composite`顺序[`Composite#setTabList(Control[])`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Composite.html#setTabList%28org.eclipse.swt.widgets.Control%5b%5d%29)。

这是一个小例子，它将在`Button`s之间制表符`one`并`three`忽略`Button`s`two`和`four`：

```
public static void main(String[] args) {
    Display display = new Display();
    Shell shell = new Shell(display);
    shell.setLayout(new GridLayout(1, false));

    Composite content = new Composite(shell, SWT.NONE);
    content.setLayout(new GridLayout(2, true));
    content.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

    final Button one = new Button(content, SWT.PUSH);
    one.setText("One");

    final Button two = new Button(content, SWT.PUSH);
    two.setText("Two");

    final Button three = new Button(content, SWT.PUSH);
    three.setText("Three");

    final Button four = new Button(content, SWT.PUSH);
    four.setText("Four");

    Control[] controls = new Control[] {one, three};

    content.setTabList(controls);

    shell.pack();
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
} 
```

**编辑**：上面的代码可以很容易地转换为适合您的要求。我自己无法测试它，因为`Composite`s 不能聚焦，但你应该明白：

```
mainPane.setTabList(new Control[] {customPanel1, customPanel2, customPanel3 });

customPanel1.setTabList(new Control[] {});
customPanel2.setTabList(new Control[] {});
customPanel3.setTabList(new Control[] {}); 
```

# ruby-on-rails - 如何在 ActiveAdmin 索引页面上将活动过滤器显示为列？

> ID：12923815
> 
> 赞同：3
> 
> 时间：2012-10-16T21:36:14.587
> 
> 标签：ruby-on-rails, activeadmin

我正在使用 ActiveAdmin 和 Ruby on Rails 来开发 web 应用程序的管理部分。我正在为具有很多属性的模型构建索引页面。我为这些属性中的大多数启用了过滤器，但我无法在索引表上全部显示它们，因为它变得太杂乱了。有没有办法根据使用的过滤器动态显示/隐藏表格上的列？有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:33:21.713

我已经找到了这个问题的一些答案，但它并不漂亮，而且绝对不是很干燥。

您实际上可以`if`在 ActiveAdmin DSL`index`方法中使用语句。此外，ActiveAdmin 将过滤器作为`q[]`GET 参数传递。例如，名为“用户名”的字符串字段将是`q[username_contains]`GET 参数。一个名为“number_of_posts”的数字字段可以是`q[number_of_posts_eq]`. 使用它，我们可以看一个示例，如果帖子已被过滤，我们将显示帖子数量，如果没有，则显示用户的电子邮件地址：

```
ActiveAdmin.register User do
    index do
        column :username
        column :first_name
        column :last_name
        if(params[:'q[number_of_posts_eq]'])
            column :number_of_posts
        else
            column :email
        end
    end

    filter :number_of_posts
end 
```

当然，有许多不同的过滤器类型，因此查询参数都会根据类型而有所不同。甚至数字类型也分别具有`_eq`、`_lt`和`_gt`后缀，分别表示等于、小于和大于。

# codeigniter - Codeigniter 调用库方法时出现 HTTP 500 错误

> ID：12923819
> 
> 赞同：1
> 
> 时间：2012-10-16T21:36:38.220
> 
> 标签：codeigniter

我正在尝试创建一个库（在应用程序/库中），但是当我从控制器调用它时遇到问题。

下面是控制器中的代码

```
 <?php defined('BASEPATH') OR exit('No direct script access allowed');

    class Client extends CI_Controller {

        function __construct() {
            parent::__construct();
            $this->load->library('security');
        }

        function index() {
            try {
                $activation_code = 'aa';
                $this->security->Check_User_By_ValidationCode($activation_code);
            } catch (Exception $e) {
                log('error', $e->getMessage());
            }
        }
    }
    ?> 
```

这就是我在图书馆里的东西

```
 <?php defined('BASEPATH') OR exit('No direct script access allowed');

    class Security {

        var $CI;

        public function __construct()
        {
            $this->CI =& get_instance();
        }

        public function Check_User_By_ValidationCode($activation_code) {
            return $activation_code ;
        }
    }
    ?> 
```

但我收到“HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。” 在铬。我无法从日志中获取任何信息，所以我无法判断我在这里做错了什么。有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:39:25.283

您不能使用该类`security`，因为该类是由 CodeIgniter 定义的。只需将名称更改为其他名称，例如“Auth”或更具描述性的名称。

请参阅：[http ://ellislab.com/codeigniter/user_guide/libraries/security.html](http://ellislab.com/codeigniter/user_guide/libraries/security.html)

# ruby-on-rails - 使用 Rails 时如何将 ID 号播种到我的数据中？

> ID：12923820
> 
> 赞同：2
> 
> 时间：2012-10-16T21:36:46.427
> 
> 标签：ruby-on-rails, ruby

我正在通过文本文件将旧 Omnis 7 数据库中的一些数据导入 Rails。我为此目的使用文本文件，并使用 db:seed 将其移植。

在我的seeds.rb 文件中，我有：

```
Port.delete_all
File.open("db_ports.txt", "r") do |ports|
  ports.read.each_line do |port|
    id, name, un_locode, bunker_surcharge, launch_tariff  = port.chomp.split("|")
    Port.create!(:id => id, :name => name, :un_locode => un_locode, :bunker_surcharge => bunker_surcharge, :launch_tariff => launch_tariff)
  end
end 
```

我想让 ID 号与另一个数据库中分配的 ID 号相同，因为 Berths 有一个外键，它看起来像 Ports，我需要它们相互匹配。

但是，当我上次导入数据时，这并没有按计划进行，ID 号也没有传入。我猜我可以创建空记录，然后用数据更新，但想知道这是否是可能的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T21:50:43.877

您将无法在`create!`调用中设置 id，因为 id 以这种方式不受大规模分配的保护。我相信您可以通过执行以下操作来设置 id：

```
port = Port.new(:name => name, :un_locode => un_locode, ... )
port.id = id
port.save! 
```

不过，您可能需要考虑在旧系统中为 id 设置一个单独的属性（可能是 old_omnis_id）。我过去曾成功地看到过这项工作。然后，您可以使用此属性加入关联，或者，当您添加泊位时，您可以通过旧 id 在新系统中查找港口的 id。

# perl - Perl 发布测试与安装时间测试

> ID：12923821
> 
> 赞同：2
> 
> 时间：2012-10-16T21:36:53.877
> 
> 标签：perl, unit-testing

我正在编写一个我想尽快上传到 CPAN 的 Perl 模块。我已经为它编写了一个测试套件，以确保我不会在版本之间破坏任何东西。什么样的测试应该在安装时运行而不是只在发布时运行？我唯一能确定的只有发布时间的是 POD 检查器、Perl 评论检查器等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:04:17.643

在安装时尽可能多地进行测试是没有害处的，除非它是一个脆弱的或需要很长时间才能完成的测试。请记住，如果您默认不运行测试，CPAN 上的模块自动测试器也不会运行它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:29:15.080

一般来说，如果...

*   它只与模块的分布有关
*   结果不会在用户的环境中改变
*   结果不影响运行时间
*   测试很难使可靠
*   测试有很多昂贵的依赖

这是一个务实的选择，没有一成不变的公式。这是一种平衡，一方面是捕捉所有可能的错误，另一方面是安装模块的简便性和可靠性。你不想错过错误，但你不想要误报，你不想要太多的依赖关系只是为了测试它。

[Test::XT](https://metacpan.org/module/Test%3a%3aXT)和[Test::Distribution](https://metacpan.org/module/Test%3a%3aDistribution)提供了一套针对大多数模块运行的库存测试，其中包括测试 POD、是否有某些重要文件（如更改日志、自述文件）、清单是否正确等等. 只有当它们几乎通过了上述所有规则时，它们中的大部分内容才应该被释放。

一个很好的例子是测试 POD，无论是正确性 (Test::Pod) 还是完整性 (Test::Pod::Coverage)。一方面，它们都不会影响运行时，并且都需要额外的模块。但是安装用户可能有不同的 POD 解析器，这可能会导致 POD 损坏。但是，损坏通常是微不足道的，不会严重影响文档的实用性。因此，虽然在安装时测试 POD*可能会*发现一些小的 POD 错误，但这不值得麻烦。

Test::Perl::Critic 是一个明确的仅发布测试。结果是完全静态的，与运行时无关。没有什么比安装失败更令人沮丧的了，因为作者使用了非经典的引用风格或一些微不足道的东西。

[Test::Dependencies](https://metacpan.org/module/Test%3a%3aDependencies)和[Test::DependentModules](https://metacpan.org/module/Test%3a%3aDependentModules)也是很好的案例研究。它有很多依赖关系，它很挑剔，而且它的结果在安装时不太可能改变。

# ios - 如何仅使用 Cocos2d 旋转风景

> ID：12923823
> 
> 赞同：0
> 
> 时间：2012-10-16T21:36:58.300
> 
> 标签：ios, cocos2d-iphone

这是我的应用程序的最后一步，其他一切都完成了。

我正在使用 cocos2d，无论我做什么，我都无法让应用程序旋转。它只能按照我的应用程序设置方式旋转横向。

这是我的 GameConfig.h

```
#ifndef __GAME_CONFIG_H
#define __GAME_CONFIG_H

//
// Supported Autorotations:
//      None,
//      UIViewController,
//      CCDirector
//
#define kGameAutorotationNone 0
#define kGameAutorotationCCDirector 1
#define kGameAutorotationUIViewController 2

//
// Define here the type of autorotation that you want for your game
//
#define GAME_AUTOROTATION kGameAutorotationUIViewController

#endif // __GAME_CONFIG_H 
```

还有我的 AppDelegate 的`applicationDidFinishLaunching`方法，

```
#if GAME_AUTOROTATION == kGameAutorotationUIViewController
    //[director setDeviceOrientation:kCCDeviceOrientationPortrait];
    [director setDeviceOrientation:kCCDeviceOrientationLandscapeLeft];
#else
   // [director setDeviceOrientation:kCCDeviceOrientationPortrait];
    [director setDeviceOrientation:kCCDeviceOrientationLandscapeLeft];
#endif 
```

和根控制器

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    return ( UIInterfaceOrientationIsLandscape( interfaceOrientation ) );
    }

-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    //
    // Assuming that the main window has the size of the screen
    // BUG: This won't work if the EAGLView is not fullscreen
    ///
    CGRect screenRect = [[UIScreen mainScreen] bounds];
    CGRect rect = CGRectZero;

    if(toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)      
        rect = screenRect;

    else if(toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight)
        rect.size = CGSizeMake( screenRect.size.height, screenRect.size.width );

    CCDirector *director = [CCDirector sharedDirector];
    EAGLView *glView = [director openGLView];
    float contentScaleFactor = [director contentScaleFactor];

    if( contentScaleFactor != 1 ) {
        rect.size.width *= contentScaleFactor;
        rect.size.height *= contentScaleFactor;
    }
    glView.frame = rect;
} 
```

在 Info.plist 中，我在支持的列表中有两个横向。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:44:19.747

尝试添加这一行

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

到你的`applicationDidFinishLaunching:`方法

# html - 使用 CSS 在我的网站边缘添加灰色边框

> ID：12923824
> 
> 赞同：-1
> 
> 时间：2012-10-16T21:37:10.723
> 
> 标签：html, css

我想像这样在我的网站边缘添加一个边框[：（](http://dovetail-demo.squarespace.com/?invitationId=FA6ELD5LWP2RDJHH7YM9)我指的是网站左右边缘的灰色边框）

![在此处输入图像描述](../Images/91fd3a709898d1e082c7ba08e89dec78.png)

我正在努力用 CSS 完成这个。我不明白的一件事是如何在白色和灰色之间创建阴影。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:39:08.980

尝试`box-shadow`容器元素：

```
.container {
    box-shadow: 0 0 10px 10px #666;
} 
```

根据需要调整大小 (10px)、模糊 (10px) 和颜色 (#666)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T21:40:07.037

这是通过一个简单的`box-shadow`. 演示：http: [//jsbin.com/ivugeh/1/edit](http://jsbin.com/ivugeh/1/edit)

```
<body>

  <div class="page">

  </div>

</body> 
```

```
body { 
  background: url('http://dovetail-demo.squarespace.com/assets/concrete-texture.png'); 
  padding: 0; 
  margin: 0;
}
.page {
  box-shadow: 0 0 8px 0 rgba(0,0,0,0.2);
  background: #fff;
  width: 400px;
  margin: 0 auto;
  height: 100%;
} 
```

# javascript - 在 JavaScript 中检索传入回调的结果？

> ID：12923828
> 
> 赞同：1
> 
> 时间：2012-10-16T21:37:26.343
> 
> 标签：javascript, callback

我正在尝试编写一个`localStorage`类似于 Rails 获取缓存结果的小包装器。在 Rails 中，模式是这样的：

```
# Data.find is a block which just returns the data if the cache key was not found
data = Rails.cache.fetch(key, options) { Data.find } 
```

在 JavaScript 中，我很难获得回调的结果，如果缓存为空，则执行该回调以返回数据。

```
function fetch(key, callback) {
    var result = localStorage.getItem(key);
    if (result) {
        return JSON.parse(result);
    } else {
        result = callback();
        if (result) {
            result = JSON.stringify(result);
            localStorage.setItem(key, result);
        }
        return result;
    }
} 
```

我正在尝试像这样使用它：

```
var data = fetch('projects-delivered', function() {
    var result;
    d3.json('/projects/delivered.json', function(data) {
        result = formatDates(data);
    });
    return result;
}); 
```

但是，数据始终是未定义的。我是否需要传入另一个回调，或者同步一些如何？或者，这难道不是 JavaScript 的异步特性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T21:42:04.377

您的 AJAX 异步运行，因此您的回调将始终返回`undefined`.

您必须从`getData`函数中调用回调：

```
function fetch(key, getData, callback) {
    var result = localStorage.getItem(key);

    result ? callback(JSON.parse(result)) : getData(function (result) {
        result && localStorage.setItem(key, JSON.stringify(result));

        callback(result);
    }
} 
```

像这样使用它：

```
fetch('projects-delivered', function (callback) {
    d3.json('/projects/delivered.json', function (data) {
        callback(formatDates(data));
    });
}, function (data) {
    // Use the data
}); 
```

* * *

或者，您可以从您的`fetch`函数返回一个承诺：

```
function fetch(key, getData) {
    var result = localStorage.getItem(key);

    if (result) return Promise.resolve(JSON.parse(result));

    return new Promise(function (resolve) {
        getData(function (result) {
            result && localStorage.setItem(key, JSON.stringify(result));

            resolve(result);
        });
    });
} 
```

然后使用返回的承诺：

```
var promise = fetch('projects-delivered', function (callback) {
    d3.json('/projects/delivered.json', function (data) {
        callback(formatDates(data));
    });
});

promise.then(function (data) {
    // Use the data
}); 
```

# python - 如何使用 Python 比较日期？

> ID：12923835
> 
> 赞同：0
> 
> 时间：2012-10-16T21:37:53.007
> 
> 标签：python

如果我有一个硬编码的日期，我如何将它与用户给出的日期进行比较？

我想最终比较一个人的生日，看看他们的年龄。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:51:19.880

您需要使用 Python 的标准库[`datetime`](http://docs.python.org/library/datetime.html)模块来解析“用户给出的日期”并将其转换为一个`datetime.date`实例，然后从当前日期中减去它，`datetime.date.today()`. 例如：

```
>>> birthdate_str = raw_input('Enter your birthday (yyyy-mm-dd): ')
Enter your birthday (yyyy-mm-dd): 1981-08-04
>>> birthdatetime = datetime.datetime.strptime(birthdate_str, '%Y-%m-%d')
>>> birthdate = birthdatetime.date()  # convert from datetime to just date
>>> age = datetime.date.today() - birthdate
>>> age
datetime.timedelta(11397) 
```

`age`是一个`datetime.timedelta`实例，11397 是他们的年龄（以天为单位）（可直接通过 获得`age.days`）。

要获得他们的年龄，您可以执行以下操作：

```
>>> int(age.days / 365.24)
31 
```

# ravendb - 用于多租户应用的具有 Raven 持久性的 CommonDomain / EventStore

> ID：12923842
> 
> 赞同：1
> 
> 时间：2012-10-16T21:38:28.920
> 
> 标签：ravendb, cqrs, neventstore

*我应该如何在多租户应用程序中设置 EventStore 的 RavenPersistence？*

我有一个 Azure 辅助角色来处理通过服务总线接收到的命令。每条消息可能属于不同的租户。实际的租户是在消息头中发送的，这意味着我只有在收到每条消息后才知道要使用哪个数据库。

我正在使用 CommonDomain，所以我的命令处理程序已经`IRepository`注入。

现在我在处理每条消息时建立了一个新商店（我设置了 DefaultDatabase），但我觉得这可能不是最理想的方式。

*   有没有办法创建一个事件存储然后只切换数据库？
*   如果没有，我可以为每个租户缓存商店吗？
*   你知道任何使用 EventStore 和 RavenDB 的多租户示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:43:35.800

我们做的完全一样——为每个请求生成一个新的 EventStore 实例。JOliver EventStore 的设计没有考虑多租户支持。所以这是唯一的方法...

# ssl - 我能否将通知从 WP8 推送到 Windows 应用商店应用程序？

> ID：12923847
> 
> 赞同：1
> 
> 时间：2012-10-16T21:38:58.057
> 
> 标签：ssl, azure, windows-8, microsoft-metro, push-notification

我需要在 WP8 应用程序和 Windows Store 应用程序之间传递消息。这是一种“点对点”的情况，因为它们将相互发送和响应消息，但它也是一种“客户端/服务器”的情况，因为 Windows 应用商店应用程序将具有 1..N它正在与之交谈的 WP8 应用程序。

在因为我第一次尝试偷偷摸摸地使用电子邮件或 SkyDrive 的想法而被打了头和肩膀之后，我现在正在考虑这些可能的架构：

1) 直接推送通知 (a) WP8 应用程序通过在此对话发生后提供的 URI 向 Windows 应用商店应用程序发送推送通知：Windows 应用商店应用程序：“*你会给我发送更新吗？* ” WP8 应用程序：“*是的。* ” Windows 应用商店应用程序：“*好的，这里是发送它们的位置。* ” (b) Windows 8 响应到达的消息。

2) 使用云的推拉 (a) WP8 将数据发送到云 (Azure?) (b) Windows 8 应用程序定期轮询它

3) SSL (使用像 /NSoftware (IP*Works) 这样的人的组件)

来自 WP8 的消息相当频繁（平均每 15 分钟一次），但很小/很短（实际上短到足以成为推文）。Windows 8 应用程序在“幕后”处理这些消息。用户在运行关联的应用程序之前不会意识到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:10:11.227

没有任何问号:)但这是我的看法：

1.  推送通知肯定会起作用，但鉴于您的“幕后”评论，您可能希望专门查看[“原始通知”](http://code.msdn.microsoft.com/windowsapps/Raw-notifications-sample-3bc28c5d)，它确实使用推送通知机制但与 UI 无关（如磁贴、吐司或徽章）。例如，如果客户端离线，推送的 toast 通知将被丢弃。

2.  考虑到对电池寿命的影响，消息的频率让我对轮询方法持怀疑态度（也就是说，不确定与后台任务的推送通知如何比较）。使用轮询方法，您也需要在“云服务”上有某种方式来维护消息（存储），然后在每次轮询时反馈正确的消息等。您还需要处理扩展和可用性方面WNS 会“免费”。不是火箭科学，而是更多的工作。推送通知是一种“即发即弃”。

3.  使用套接字，您可以在沙盒模型公开您需要的功能的范围内拥有更多控制权。不过，这似乎是更多的活动部分，只有在其他两种方法不可行的情况下，我才可能走这条路。

# joomla - 如何从 Virtuemart 自定义字段中删除价格金额？

> ID：12923848
> 
> 赞同：1
> 
> 时间：2012-10-16T21:39:04.033
> 
> 标签：joomla, virtuemart

我有一个网站，我在其中使用了 joomla 和美德玛特。我添加了一个自定义字段，其中字段类型为 Cart Variant。但问题是我不想在下拉选择选项中显示价格。您可以从该屏幕短片 ( [http://i.stack.imgur.com/yCx3a.jpg](http://i.stack.imgur.com/yCx3a.jpg) ) 或 ( [http://awesomescreenshot.com/011ih9ue8](http://awesomescreenshot.com/011ih9ue8) )中看到它

我想删除红色标记项目。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T05:42:12.830

经过长时间的尝试，我得到了解决方案。我正在使用 joomla 2.5.7 和 measuremart v2.0.12。请按照以下说明操作：

转到：administrator/components/com_virtuemart/models/customfields.php 并找到以下行，它可能是第 871 行：

```
$productCustom->text = $productCustom->custom_value . ' ' . $price; 
```

删除`. $price`& 就是这样:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:51:52.173

请说的更具体一点，这个问题和deadmart有关，最好的方法是在官网forum.virtuemart.com上提问。

您使用的是什么版本的 joomla 和美德玛特？

在后台配置中，您可以设置不显示价格，您尝试过吗？

如果这不起作用，您可能需要进行模板覆盖，通常位于 components/com_virtuemart/views/productdetails/tmpl/default_showprices.php

没有更多信息，我无法更好地回答您的问题。

# asp.net - ASP.NET 为 Gridview 和 DetailsView 全局重用相同的样式

> ID：12923852
> 
> 赞同：1
> 
> 时间：2012-10-16T21:39:23.247
> 
> 标签：asp.net, css, gridview, styling, detailsview

我是 ASP.NET 的新手

基本上，我有一个用于 Gridview 的格式样式（下面的示例）。这是在 Gridview 内部。每当我在不同的页面中创建另一个 Gridview 时。我将不得不再次复制并粘贴此样式。我想知道是否有另一种方式（如 CSS 类）可以全局保存此代码并在 Gridview 中引用它？

```
<AlternatingRowStyle ForeColor="Black"  BackColor="#F7F6F3"  VerticalAlign="top" />
        <HeaderStyle BackColor="#B5DAFF" Font-Bold="True" HorizontalAlign="center" />
        <FieldHeaderStyle BackColor="#CCCCCC" Font-Bold="True" ForeColor="Black"  
        Width="20%" HorizontalAlign="Right" />
        <CommandRowStyle BackColor="Green" Font-Bold="True" />
        <PagerStyle BackColor="Gold" ForeColor="White" HorizontalAlign="Center" />    
        <FooterStyle Font-Bold="True" ForeColor="White"  BackColor="Gold" /> 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:43:43.213

您可以使用 GridView 的这些属性`CssClass`：`PagerStyle-CssClass`和`AlternatingRowStyle-CssClass`。然后，您只需使用刚刚应用于 GridView 的类在 .css 文件中全局定义样式。

像这个样本：

```
<asp:GridView ID="gvCustomres" runat="server"  
    DataSourceID="customresDataSource"   
    AutoGenerateColumns="False"  
    GridLines="None"  
    AllowPaging="true"  
    CssClass="mGrid"  
    PagerStyle-CssClass="pgr"  
    AlternatingRowStyle-CssClass="alt">  
    <Columns>  
        <asp:BoundField DataField="CompanyName" HeaderText="Company Name" />  
        <asp:BoundField DataField="ContactName" HeaderText="Contact Name" />  
        <asp:BoundField DataField="ContactTitle" HeaderText="Contact Title" />  
        <asp:BoundField DataField="Address" HeaderText="Address" />  
        <asp:BoundField DataField="City" HeaderText="City" />  
        <asp:BoundField DataField="Country" HeaderText="Country" />  
    </Columns>  
</asp:GridView> 
```

**CSS**

```
.mGrid {   
    width: 100%;   
    background-color: #fff;   
    margin: 5px 0 10px 0;   
    border: solid 1px #525252;   
    border-collapse:collapse;   
}  
.mGrid td {   
    padding: 2px;   
    border: solid 1px #c1c1c1;   
    color: #717171;   
}  
.mGrid th {   
    padding: 4px 2px;   
    color: #fff;   
    background: #424242 url(grd_head.png) repeat-x top;   
    border-left: solid 1px #525252;   
    font-size: 0.9em;   
}  
.mGrid .alt { background: #fcfcfc url(grd_alt.png) repeat-x top; }  
.mGrid .pgr { background: #424242 url(grd_pgr.png) repeat-x top; }  
.mGrid .pgr table { margin: 5px 0; }  
.mGrid .pgr td {   
    border-width: 0;   
    padding: 0 6px;   
    border-left: solid 1px #666;   
    font-weight: bold;   
    color: #fff;   
    line-height: 12px;   
 }     
.mGrid .pgr a { color: #666; text-decoration: none; }  
.mGrid .pgr a:hover { color: #000; text-decoration: none; } 
```

这个链接有完整的细节：[ASP.NET GridView makeover using CSS](http://atashbahar.com/post/GridView-makeover-using-CSS.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:42:09.820

在主题中使用 .skin 文件并在 web.config 中添加主题。

当你在皮肤文件中创建你的gridview时，不要包含ID，你可以分配一个皮肤ID，这样你就可以拥有它的多个版本，并且拥有不使用它的gridview

```
 <system.web>
  <pages styleSheetTheme="ThemeName" />
</system.web> 
```

# xcode - Xcode 4.4 模板位置

> ID：12923856
> 
> 赞同：6
> 
> 时间：2012-10-16T21:39:38.870
> 
> 标签：xcode, templates

我目前正在尝试为 SFML 安装一些 Xcode 模板，但我找不到有效的模板目录。似乎每个教程都提供了不同的位置（我知道这是从 Apple 更改的），但我想知道 4.4/4.5 目录是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T21:47:26.090

xctemplates 现在在 Xcode 本身中。

右键单击 Xcode 应用程序，单击“显示包内容”，然后导航到

```
Xcode.app/Contents/Developer/Library/Xcode/Templates 
```

从那里您可以将文件模板或项目模板放在相应的目录中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T18:28:37.713

用户项目模板应位于以下位置：

```
/Users/Username/Library/Developer/Xcode/Templates/Project Templates/GroupName 
```

其中 GroupName 是 New Project Assistant 左侧的组。您可以创建自己的组名或使用 Apple 的组名之一。通过将模板放置在用户模板位置，当您将 Xcode 更新到新版本时，您的项目模板不会被覆盖。

# ios - 创建一个 NSUTF8 NSString

> ID：12923859
> 
> 赞同：0
> 
> 时间：2012-10-16T21:39:52.380
> 
> 标签：ios, nsstring

我从我创建的对象中调用字符串值并将其传递给 NSString，但是我不确定它的 NSUTF8 是否适用于国际字符。

我就是这样称呼它的。

```
masterString = [dict valueForKey:@"MASTER"]; 
```

我怎样才能确保这是一个 UTF8 类型的 NSString？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:53:05.200

实例用于存储 unicode 字符的编码`NSString`是一个实现细节。只有在创建新的字符串实例或想要将存储的字符作为给定编码中的字节检索时才提供编码。

我猜您正在寻找其中一种方法`-[NSString UTF8String]`，`-[NSString dataUsingEncoding:]`或者`-[NSString getCString:maxLength:encoding:]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:00:19.903

[NSString 类参考。](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)
NSString 被实现为 UNICODE 字符数组。只有当您将 NSString 转换为纯字符（C 字符串）或字节（NSData）数组时，您才关心编码。

# php - IE 8+ XDomainRequest 'post' 不工作

> ID：12923866
> 
> 赞同：1
> 
> 时间：2012-10-16T21:40:11.210
> 
> 标签：php, ajax, internet-explorer, post, xdomainrequest

我正在使用 jQuery.XDomainRequest.js (https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest) 来支持 IE 中的 ajax 请求。

它适用于我的 GET 请求，但 POST 不起作用，它返回 500。（我检查过，它适用于其他浏览器，所以它的 XDR 特定问题）。

我的 ajax 调用如下所示：

```
var contact = {};
contact.firstName = "ABC"; 

jQuery.ajax({
     type:  'POST',
     url:   contactDetailsUrl,
     data:  contact,
     dataType: 'json',
     success: function(data) {
                callback(true);
              },
     error: function(data) {
                alert('Currently having trouble posting.');
                callback(false);
            }
}); 
```

这是我第一次遇到 XDomainRequest，我自己做了一些研究，但我不知道为什么会失败。

在此先感谢您的帮助！！！

编辑：我做了一些调试。

我的测试 url = "http:/myserver/test/index.php?key=123" （这是一个跨域请求）

我打印了 json_encode($_GET)，我得到：{"key":"123"} 我打印了 json_encodee($_POST)，我得到：[]。

显然我的帖子数据没有被发送。

这是发送我的数据的行：

```
xdr.send(postData); 
```

postData 看起来像：

```
"firstName=ABC" 
```

我在 php 代码中的标题如下所示：

```
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: POST, GET, OPTIONS');
header('Access-Control-Max-Age: 1000');
header('Access-Control-Allow-Headers: Content-Type'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:10:28.507

好的，所以我的 php 知识比我的 XDR 知识差。

下面的链接有帮助

[http://social.msdn.microsoft.com/Forums/eu/iewebdevelopment/thread/fe1570a0-8670-450d-90e6-1e03bd338569](http://social.msdn.microsoft.com/Forums/eu/iewebdevelopment/thread/fe1570a0-8670-450d-90e6-1e03bd338569)

我必须使用 $HTTP_RAW_POST_DATA 而不是 $_POST。

我会留下这个问题，以防有像我这样的人偶然发现这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T07:55:23.267

这应该适用于您`php`：

```
echo file_get_contents('php://input'); 
```

将其用作`$_POST`：

```
$_POST=json_decode(file_get_contents('php://input'), true); 
```

# limit - 删除轴范围之外的值？

> ID：12923871
> 
> 赞同：2
> 
> 时间：2012-10-16T21:40:24.893
> 
> 标签：limit

好的，我有一个绘制对象轨迹的基本脚本。我有基本的运动方程来求解物体相对于时间的位置。该图本身是对象轨迹的 3D 表示。

我已经成功设置了轴限制，现在我想确保我没有看到任何超出轴限制的轨迹值。现在，轨迹低于 xy 平面并继续向下，在 3D 绘图之外......有什么办法可以防止这种情况发生吗？

这是整个代码：

```
import matplotlib as mpl
from mpl_toolkits.mplot3d import Axes3D
import numpy as np
import matplotlib.pyplot as plt

mpl.rcParams['legend.fontsize'] = 10

fig = plt.figure()
ax = fig.gca(projection='3d')

### Define Variables ###
time = (10)     #Time to calculate the equations
t = np.linspace(0, time, 100)

g = (9.81)      #Gravity

vxo = (3)       #initial velocity in the x-direction
vyo = (1)       #initial velocity in the y-direction
vzo = (0)       #initial velocity in the z-direction

xo = (0)        #initial x-position
yo = (0)        #initial y-position
zo = (9)        #initial z-position

### Equations of Motion ###
x = (xo + (vxo * t))
y = (yo + (vyo * t))
z = (10 - (.5 * g * (t**2)))

ax.plot(x, y, z, label=('Trajectory of Soccer Ball ' + str(time)))
ax.legend()

### Set axis limits ###
ax.set_xlim3d(0,10)
ax.set_ylim3d(0,10)
ax.set_zlim3d(0,10)
plt.show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:55:07.567

如果您的对象超出了您的轴的限制；这是因为方程式告诉它这样做。在绘制结果之前，您必须限制结果并进行过滤。就像是：

```
x = equation1()
if( x > someLimit )
  handle error / object bounces by inverting the direction perhaps
plot(x) 
```

# eclipse - Eclipse MAT 解析 11GB 堆转储 - 内存不足。无法解析堆转储

> ID：12923872
> 
> 赞同：4
> 
> 时间：2012-10-16T21:40:29.290
> 
> 标签：eclipse, eclipse-memory-analyzer

我试图使用 Eclipse MAT 解析 11GB 堆转储，但出现以下错误

```
 An internal error occurred during: "Parsing heap dump" 
```

我认为 MAT 无法解析如此巨大的堆转储。我阅读了一些帖子并将 VM 配置增加到转储大小的 80% 以上。以下是我的虚拟机配置

```
 -vmargs -Xms8192m -Xmx10240m 
```

而且我仍然无法加载转储。我尝试使用 ParseHeapDump.bat 没有任何更改...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T22:10:18.100

继续增加`Xmx`直到 JVM 抱怨，然后增加你的交换文件大小，然后`Xmx`再次增加，等等。

在那个阶段，它将需要很长时间，因为它将使用磁盘作为 RAM。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-02-05T15:52:34.000

我最近在 Mac OS Catalina (10.15.3) 上安装了 Eclipse MAT（Eclipse Memory Analyzer 版本 1.9.1）。我需要查看 4g 堆转储。MAT 的默认 JVM 堆大小为 1024m。

我认为增加 JVM 堆大小的最简单方法是使用 shell 窗口 - 转到 /Applications/mat.app/Contents/Eclipse/ 文件夹。然后 vi MemoryAnalyzer.ini 并将 -Xmx1024m 更改为您需要的值，在我的情况下，我选择了 -Xmx10g。

要查看更改，请重新启动 MAT 并转到帮助 -> 关于 Eclipse 内存分析器，然后单击安装详细信息，然后查找条目：eclipse.vmargs=-Xmx10g 大约 50 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-23T13:25:42.740

在 Eclipse Photon 的 Windows 安装中，我通过更新 eclipse.ini 文件中的内存参数解决了这个问题。这是直接在我的`c:\eclipse`文件夹下。

```
-Xms6g 
-Xmx6g 
```

我尝试将它设置为 4 gigs 以获得大约 4.1GB 的内存转储，但它失败了。因此，经验法则是将其设置为高于内存转储大小的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-16T11:02:36.623

这个设置对我有用。

我最近还安装了 Eclipse MAT 来分析`4.85GB`堆转储文件。

```
Eclipse Memory Analyzer Version: 1.11.0
MacOS Catalina: 10.15.7
Hardware Memory: 16GB
Heap dump file size: 4.85GB 
Heap dump file type: PHD
Classes: 33.6k
Objects: 4.8m
Class Loader: 575 
```

我将其更改`MemoryAnalyzer.ini`为`14GB`：

```
-vmargs
-Xmx14g 
```

我还确认了配置如下：

1.  `Help -> About Eclipse Memory Analyzer 1.11.0`
2.  点击`Installation Details`
3.  点击`Configuration`选项卡
4.  寻找`eclipse.vmargs=-Xmx14g`。

加载这个 4.85 堆转储文件需要几分钟时间。

**注意：**我尝试`Xmx`使用 2g、4g、8g、10g、12g 设置失败 - Eclipse MAT 工具中的 JVM 内存不足都失败了。

# lldb - 如何在 lldb 中打印 wchar_t 字符串？

> ID：12923873
> 
> 赞同：4
> 
> 时间：2012-10-16T21:40:31.020
> 
> 标签：lldb

鉴于`wchar_t* str;`哪些指向以空结尾的 utf32（或 utf16）字符串，我应该使用什么命令在 lldb 中打印它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T01:51:42.060

我假设您想将其打印为 utf8。这有点涉及 - 您需要为 python 中的类型创建一个摘要提供程序，该提供程序返回一个 utf8 字符串进行打印。不过也不是特别复杂。创建一个小python文件，如`~/lldb/wcharsummary.py`内容

```
import lldb
def wchar_SummaryProvider(valobj, dict):
  e = lldb.SBError()
  s = u'"'
  if valobj.GetValue() != 0:
    i = 0
    newchar = -1
    while newchar != 0:
      # read next wchar character out of memory
      data_val = valobj.GetPointeeData(i, 1)
      size = data_val.GetByteSize()
      if size == 1:
        newchar = data_val.GetUnsignedInt8(e, 0)    # utf-8
      if size == 2:
        newchar = data_val.GetUnsignedInt16(e, 0)   # utf-16
      if size == 4:
        newchar = data_val.GetUnsignedInt32(e, 0)   # utf-32
      else:
        return '<error>'
      if e.fail:
        return '<error>'
      i = i + 1
      # add the character to our string 's'
      if newchar != 0:
        s = s + unichr(newchar)
  s = s + u'"'
  return s.encode('utf-8') 
```

将此加载到 lldb 并将此 python 函数设置为 wchar_t* 的摘要提供程序；最容易将其放入`~/.lldbinit`文件中以供重用：

```
command script import ~/lldb/wcharsummary.py
type summary add -F wcharsummary.wchar_SummaryProvider "wchar_t *" 
```

然后给定一些在 32 位 wchar_t 中有一些 utf32 编码字符的源，

```
NSString *str = @"こんにちは";  // 5 characters long
wchar_t *str_utf32_wchar = (wchar_t*) [[str dataUsingEncoding:NSUTF32StringEncoding] bytes]; 
```

lldb 将为我们以 utf8 格式打印它们：

```
Process 22278 stopped
* thread #1: tid = 0x1c03, 0x0000000100000e92 a.out`main + 146 at a.m:11, stop reason = step over
    #0: 0x0000000100000e92 a.out`main + 146 at a.m:11
   8    
   9        NSString *str = @"こんにちは";  // 5 characters long
   10       wchar_t *str_utf32_wchar = (wchar_t*) [[str dataUsingEncoding:NSUTF32StringEncoding] bytes];
-> 11       printf ("0x%llx 0x%llx 0x%llx 0x%llx\n", (uint64_t) str_utf32_wchar[0], (uint64_t) str_utf32_wchar[1], 
   12                                                (uint64_t) str_utf32_wchar[2], (uint64_t) str_utf32_wchar[3]);
   13   
   14       [pool release];

(lldb) fr va
(NSAutoreleasePool *) pool = 0x0000000100108190
(NSString *) str = 0x0000000100001068 @"こんにちは"
(wchar_t *) str_utf32_wchar = 0x0000000100107f80 "こんにちは"

(lldb) p str_utf32_wchar
(wchar_t *) $0 = 0x0000000100107f80 "こんにちは"

(lldb) x/16b `str_utf32_wchar`
0x100107f80: 0xff 0xfe 0x00 0x00 0x53 0x30 0x00 0x00
0x100107f88: 0x93 0x30 0x00 0x00 0x6b 0x30 0x00 0x00
(lldb) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T12:04:42.347

我对 Jason 的代码进行了一些修改以`wxString`直接处理，而不必更改`int*`指针的摘要。

通过在 Xcode 调试器控制台中键入命令来测试它`script`，然后粘贴下面的代码并按 ctrl-D。然后再次在 lldb 提示符下，键入`type summary add --python-function wxString_SummaryProvider "wxString"`. 适用于我的 wxWidgets 构建。

```
def wxString_SummaryProvider(valobj, dict):
  e = lldb.SBError()
  charPointer = valobj.GetChildMemberWithName('m_impl').GetChildMemberWithName('_M_dataplus').GetChildMemberWithName('_M_p')
  valobj = charPointer
  s = u'"'
  if valobj.GetValue() != 0:
    i = 0
    newchar = -1
    while newchar != 0:
      # read next wchar character out of memory
      data_val = valobj.GetPointeeData(i, 1)
      size = data_val.GetByteSize()
      if size == 1:
        newchar = data_val.GetUnsignedInt8(e, 0)    # utf-8
      if size == 2:
        newchar = data_val.GetUnsignedInt16(e, 0)   # utf-16
      if size == 4:
        newchar = data_val.GetUnsignedInt32(e, 0)   # utf-32
      else:
        return '<error>'
      if e.fail:
        return '<error>'
      i = i + 1
      # add the character to our string 's'
      # print "char2 = %s" % newchar
      if newchar != 0:
        s = s + unichr(newchar)
  s = s + u'"'
  return s.encode('utf-8') 
```

# java - Eclipse中的Roo项目导入错误（sts）

> ID：12923877
> 
> 赞同：0
> 
> 时间：2012-10-16T21:41:14.407
> 
> 标签：java, eclipse, spring

当我想将我的项目导入到 sts(eclipse) 时出现错误。我用spring roo生成了这个项目，它在另一台笔记本电脑上工作，所以我只想导入并在tomcat服务器上运行，有人知道这是什么，我看依赖，这个类就在那里（我使用Windows）：

> 2012-10-16 23:32:42,540 [main] 错误 org.springframework.web.context.ContextLoader - 上下文初始化失败 org.springframework.beans.factory.BeanCreationException：创建文件 [D 中定义的名称为“transactionManager”的 bean 时出错:\projects.metadata.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\roo-jquery-bootstrap\WEB-INF\classes\META-INF\spring\applicationContext.xml]：无法解析对 bean 的引用'entityManagerFactory' 同时设置 bean 属性'entityManagerFactory'; 嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建文件 [D:\projects.metadata.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\roo- 中定义的名称为“entityManagerFactory”的 bean 时出错jquery-bootstrap\WEB-INF\classes\META-INF\spring\applicationContext.xml]：调用 init 方法失败；嵌套异常是 java.lang.IllegalArgumentException: Cannot find class [org.hibernate.ejb.HibernatePersistence] at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) at
> 
> ... 41 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:48:36.610

我解决了这是一个eclipse错误我重新启动了eclipse并且应用程序工作了..

# java - compareTo()==0 不起作用

> ID：12923878
> 
> 赞同：1
> 
> 时间：2012-10-16T21:41:16.217
> 
> 标签：java, compareto

我在双向链表中使用 compareTo() 来比较代码和读取的字符串，但不知道为什么它不起作用。这涉及很多代码，但我不想让你们通读一遍，所以我会尝试发布相关的内容并希望它足够了。

这是代码行。我知道它不完整，但其他一切正常。

```
if(p.getCode().compareTo(str)==0){ 
```

他们是平等的。我在进行比较之前将它们打印出来，它们是相同的。

我知道得到的不多，我有点希望你相信我，他们真的是平等的，但这是为了节省你的时间。我想知道关于 compareTo() 是否有一些我应该知道的特殊规则我错过了......

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:50:36.747

`compareTo`由[Comparable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)接口提供。没有语言强制要求`Comparable.compareTo`返回`0`时`Object.equals`返回`true`。也就是说，一个对象的两个实例可能完全相同，并且 的实现`Comparator.compareTo`不必返回`0`。

假设`p.getCode`返回 a`String`并且参数`str`是 a `String`，那么 的实现`String`确实确保`equals`和`compareTo`是一致的。

所以还有其他可能：

1.  您在一个或两个参数中有前导或尾随空格。如果您要沿着添加调试日志的路线前进，我经常发现在每个字符串周围使用竖线 ('|') 字符会很有帮助，这样可以看到空格。
2.  大写和小写字符存在差异。字符串比较区分大小写，`Comparator`必须使用特殊的不区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:44:08.893

为了测试相等性，最好使用`equals()`而不是`compareTo()`. 字符串可能存在差异，可能是尾随空格或某些不匹配的大写/小写字符。要格外小心，也许这些方面的东西会有所帮助（假设两个字符串都不为空）：

```
if (p.getCode().trim().equalsIgnoreCase(str.trim())) { 
```

现在， if `p.getCode()`is not a`String`或`str`is not a `String`（如果编译器抱怨该`trim()`对象不存在该方法，您会知道这一点）......在那里，您发现了问题 - 您必须确保两个对象都属于测试相等性之前的相同类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:48:11.933

他们都使用相同的编码吗？在尝试比较 ASCII 和 Unicode 字符串之前，我遇到了一些问题，尤其是在解析文本文件时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T21:53:10.533

根据[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#compareTo%28java.lang.String%29) `String.compareTo()`，`String.equals()`在平等方面是一致的

> 如果字符串相等，则结果为零；当 equals(Object) 方法返回 true 时，compareTo 返回 0。

如果您想查看差异，请在两个字符串上使用[toCharArray()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray%28%29)并将每个字符打印为整数。

# jquery - jQuery 选择器仅适用于前向元素

> ID：12923881
> 
> 赞同：2
> 
> 时间：2012-10-16T21:41:18.503
> 
> 标签：jquery, jquery-ui

我编写了一些小代码，提供了非常基本的功能，并且使用了默认的 jQuery 选择方法。它的工作原理是这样的：有 2 个 li 包含一个链接。单击链接时，jQuery 会检查 li 是否具有某个 css 类；如果没有，它会执行所需的操作。

坦率地说，它仅在第二个 li 没有此类时才有效，而不是在第一个 li 没有时。

谁能说出为什么会发生这种情况以及如何解决？

jsfillde 在这里，让事情变得更加清晰：http: [//jsfiddle.net/EDa7n/](http://jsfiddle.net/EDa7n/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:51:59.443

您只是将点击功能绑定到不活动的锚标记。

您需要将它们全部绑定并在单击功能中检查该类是否处于活动状态。

[http://jsfiddle.net/jimschubert/EDa7n/1/](http://jsfiddle.net/jimschubert/EDa7n/1/)

```
$(".ui-tabs-nav li a").click(function(){ //Weird, it works only for the second li, not for the first (eg when the second is active)
    $('#BT-tabVerbetering, #BT-tabWens').show();
    if(!$(this).hasClass("ui-state-active")) 
        $('#BT-nieuw').hide();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T21:50:45.733

在调用事件绑定方法时，事件被绑定到元素。更改元素的类不会更改绑定到元素的事件。比如这个点击事件：

```
$("#BT-menu li:not(.ui-state-active) a").click(function(){... 
```

将`li:not(.ui-state-active) a`事件绑定到第二个选项卡，而不是第一个。第一个选项卡永远不会绑定此事件，第二个选项卡将始终绑定事件。相反，您应该将事件绑定到两个元素

```
$("#BT-menu li a").click(function(){... 
```

然后检测它是否在事件中处于活动状态。

* * *

不相关，但您确实应该在您的问题中发布相关代码和标记，而不是简单地链接到 jsfiddle。小提琴是对问题的一个很好的补充，但它不能替代实际发布代码。

# macos - Macports 安装错误

> ID：12923886
> 
> 赞同：2
> 
> 时间：2012-10-16T21:41:36.787
> 
> 标签：macos, valgrind, macports

我正在使用 macports 安装 Valgrind 并收到以下错误：

```
--->  Computing dependencies for valgrind
--->  Building valgrind
Error: org.macports.build for port valgrind returned: command execution failed
Please see the log file for port valgrind for details:
    /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/main.log
To report a bug, follow the instructions in the guide:
    http://guide.macports.org/#project.tickets
Error: Processing of port valgrind failed 
```

这是日志文件：

```
:notice:build --->  Building valgrind
:debug:build Executing org.macports.build (valgrind)
:debug:build Environment: CPATH='/opt/local/include' CC_PRINT_OPTIONS_FILE='/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/.CC_PRINT_OPTIONS' LIBRARY_PATH='/opt/local/lib' CC_PRINT_OPTIONS='YES' MACOSX_DEPLOYMENT_TARGET='10.8'
:debug:build Assembled command: 'cd "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1" && /usr/bin/make -w all'
:debug:build Executing command line:  cd "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1" && /usr/bin/make -w all 
:info:build make: Entering directory `/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1'
:info:build /usr/bin/make  all-recursive
:info:build make[1]: Entering directory `/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1'
:info:build Making all in include
:info:build make[2]: Entering directory `/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1/include'
:info:build make[2]: Nothing to be done for `all'.
:info:build make[2]: Leaving directory `/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1/include'
:info:build Making all in VEX
:info:build make[2]: Entering directory `/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1/VEX'
:info:build /usr/bin/make  all-am
:info:build make[3]: Entering directory `/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1/VEX'
:info:build make[3]: Nothing to be done for `all-am'.
:info:build make[3]: Leaving directory `/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1/VEX'
:info:build make[2]: Leaving directory `/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1/VEX'
:info:build Making all in coregrind
:info:build make[2]: Entering directory `/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1/coregrind'
:info:build (cd m_mach && mig /usr/include/mach/mach_vm.defs /usr/include/mach/task.defs /usr/include/mach/thread_act.defs /usr/include/mach/vm_map.defs)
:info:build 
:info:build You have not agreed to the Xcode license agreements, please run 'xcodebuild -license' (for user-level acceptance) or 'sudo xcodebuild -license' (for system-wide acceptance) from within a Terminal window to review and agree to the Xcode license agreements.
:info:build /usr/bin/mig: line 174: : command not found
:info:build mig: fatal: "<no name yet>", line -1: no SubSystem declaration
:info:build make[2]: *** [m_mach/mach_vmUser.c] Error 1
:info:build make[2]: Leaving directory `/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1/coregrind'
:info:build make[1]: *** [all-recursive] Error 1
:info:build make[1]: Leaving directory `/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1'
:info:build make: *** [all] Error 2
:info:build make: Leaving directory `/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1'
:info:build Command failed:  cd "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/work/valgrind-3.8.1" && /usr/bin/make -w all 
:info:build Exit code: 2
:error:build org.macports.build for port valgrind returned: command execution failed
:debug:build Error code: CHILDSTATUS 41934 2
:debug:build Backtrace: command execution failed
    while executing
"system -nice 0 $fullcmdstring"
    ("eval" body line 1)
    invoked from within
"eval system $notty $nice \$fullcmdstring"
    invoked from within
"command_exec build"
    (procedure "portbuild::build_main" line 8)
    invoked from within
"$procedure $targetname"
:info:build Warning: targets not executed for valgrind: org.macports.activate org.macports.build org.macports.destroot org.macports.install
:notice:build Please see the log file for port valgrind for details:
    /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_valgrind/valgrind/main.log 
```

我已经安装了 Valgrind（3.7，旧版本）。这可能是一个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T21:47:53.523

如日志中所述，您遇到的错误之一是您尚未接受 Xcode 命令行工具的许可协议。为此，请输入`xcodebuild -license`终端。

# jquery - 刷新 $(document).ready()

> ID：12923891
> 
> 赞同：0
> 
> 时间：2012-10-16T21:42:04.493
> 
> 标签：jquery

我正在构建一个 Web 应用程序，一段时间以来它一直困扰着我，当我通过 ajax 将 HTML 加载到我的页面中时，我需要在 $(document).ready() 中刷新我的函数。

例如，假设我有这个：

```
$(document).ready(function () {

    $('#searchInput').keyup(function () {
        // Do something
    });

}); 
```

但是，当加载 DOM 时，没有加载带有 id="searchInput" 的输​​入字段 - 它稍后会在用户单击特定元素时使用 ajax 加载。现在我的 id="searchInput" 输入字段已加载，但 keyup(function) 不听#searchInput，因为它没有加载到原始 DOM 中。

目前，我唯一的解决方案是这样做：

```
function loadEvents() {
    $('#searchInput').keyup(function () {
        // Do something
    });
}

$(document).ready(function () {
    loadEvents();
}); 
```

然后在 ajax 成功：

```
succes:
    function() {
        loadEvents();
    } 
```

这行得通......但我不禁想到有一种更聪明的方法......

我的 loadEvents() 中有多个函数，对我来说，每次 ajax 调用成功时我似乎都不是重新加载所有函数的最佳解决方案？

当然，然后我可以进行许多不同的 ajax 调用，这些调用在 ajax 成功时会执行所需的特定功能，但随后我将不得不创建许多不同的 ajax 函数。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:50:57.010

您可以使用以下代码将所有成功回调代码合并到一个地方

```
$(selector).ajaxSuccess(function(event,xhr,options){
     //DO YOUR STUFF HERE
}); 
```

[在http://api.jquery.com/ajaxSuccess/](http://api.jquery.com/ajaxSuccess/)上查看更多信息

# cluster-computing - 如何在 SGE 中抑制错误和输出日志文件

> ID：12923893
> 
> 赞同：0
> 
> 时间：2012-10-16T21:42:10.447
> 
> 标签：cluster-computing, qsub, sungridengine

我在生成大型日志文件的 Sun Grid Engine 批处理系统中运行代码。我可以使用 -o 和 -e 选项选择输出位置，但想知道我是否可以告诉它根本不记录输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T22:04:49.397

只需`/dev/null`同时指定`-e`和`-o`。

# google-apps-script - 谷歌应用脚 本和 GmailApp：只接收新消息

> ID：12923901
> 
> 赞同：11
> 
> 时间：2012-10-16T21:42:42.793
> 
> 标签：google-apps-script, gmail

我正在尝试实现一个简单的谷歌脚本来处理 Gmail 用户收到的每条消息。

我找到了一个这样的例子：

```
var threads = GmailApp.getInboxThreads();
for (var i=0; i < threads.length; i++) {
   var messages = threads[i].getMessages();

   for (var j=0; j < messages.length; j++) {
       if (!messages[j].isUnread()) {
         continue; 
       }
      //process message
   }
} 
```

那就是：我遍历收件箱中的所有消息并搜索未读的消息。这对于仅 1800 条消息来说非常慢。

理想情况下，我正在寻找一旦收到每条新消息就会触发的触发器。

如果没有这样的东西，我会尝试利用我看到的这个：

```
GmailApp.getMessageById(id) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-08-12T20:07:17.500

很抱歉回复晚了，但我遇到了同样类型的问题，我最终使用了 GmailApp.search() ...希望这会有所帮助。

```
// find unread messages
var threads = GmailApp.search('is:unread');
.... 
```

**警告**

> 当所有线程的大小太大而系统无法处理时，此调用将失败。如果线程大小未知，并且可能非常大，请使用“分页”调用，并指定要在每次调用中检索的线程范围。

看看[GmailApp.search(query)](https://developers.google.com/apps-script/reference/gmail/gmail-app#search(String))和 [GmailApp.search(query, start, max)](https://developers.google.com/apps-script/reference/gmail/gmail-app#search(String,Integer,Integer))

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-05T05:24:44.720

不幸的是，没有为每条收到的消息触发的触发器。但是有一个很好的解决方法：

设置一个过滤规则，为所有传入消息分配一个特殊标签，例如“ToBeProcessedByScript”。由于通配符在 Gmail 过滤器中并不真正起作用，因此请使用 to: 字段。

运行一个时间触发的脚本，该脚本收集所有带有`GmailApp.getUserLabelByName("ToBeProcessedByScript").getThreads()`. 在处理新消息之前删除特殊标签。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-18T09:29:05.430

您可以使用

```
GmailApp.getInboxThreads(0, 50); 
```

用前 50 封邮件初始化变量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-21T19:31:24.450

我扩展了代码，检查第一条消息是否真的是未读消息。如果不是，它将检查下一条消息并将继续，直到找到未读消息：

```
function getUnreadMails() {
   var ureadMsgsCount = GmailApp.getInboxUnreadCount();
   var threads;
   var messages;
   var k=1;
   if(ureadMsgsCount>0)
   {        
     threads = GmailApp.getInboxThreads(0, ureadMsgsCount);
     for(var i=0; i<threads.length; i++)
     {
       if(threads[i].isInInbox())
       {
          messages = threads[i].getMessages();
          for(var j=0; j<messages.length; j++)
          {

             while (messages[j].isUnread() === false)
             {
             threads=GmailApp.getInboxThreads(k, ureadMsgsCount);
             messages = threads[i].getMessages();
             k++;
             }
             Logger.log(messages[j].getSubject());

             // process unread message
          }
       }
     }
   }
 } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-23T10:13:12.963

您可以像 djtek 提到的那样创建时间触发器，但不是标记所有消息然后检索标记的消息，您可以只获取未读消息的数量，并按照有效的代码检索从 0 到未读消息数量的线程为了我：

```
 function getUnreadMails() {
   var ureadMsgsCount = GmailApp.getInboxUnreadCount()
   if(ureadMsgsCount>0)
   {        
     var threads = GmailApp.getInboxThreads(0, ureadMsgsCount);
     for(var i=0; i<threads.length; i++)
     {
       if(threads[i].isInInbox())
       {
          var messages = threads[i].getMessages();
          for(var j=0; j<messages.length; j++)
          {
             Logger.log(messages[j].getSubject());
             // process unread message
          }
       }
     }
   }
 } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-05T03:32:16.850

```
function getUnreadMessages(threadLimit) {
  function flatten(arr) { return [].concat.apply([], arr) }
  var threadsWithUnreadMessages = GmailApp.search('is:unread', 0, threadLimit)
  var messageCollection = threadsWithUnreadMessages.map(function(thread) {
    return thread.getMessages()
  })
  var unreadMessages = flatten(messageCollection).filter(function(message) { 
    return message.isUnread()
  })
  return unreadMessages
}

getUnreadMessages(100) 
```

# android - 如何通过 url 异步填充动态创建的图像视图...在 Android 中

> ID：12923903
> 
> 赞同：0
> 
> 时间：2012-10-16T21:42:45.540
> 
> 标签：android, image, android-imageview, android-ui

我正在使用水平寻呼机

[https://github.com/ysamlan/horizo​​ntalpager/blob/master/src/com/github/ysamlan/horizo​​ntalpager/Horizo​​ntalPager.java](https://github.com/ysamlan/horizontalpager/blob/master/src/com/github/ysamlan/horizontalpager/HorizontalPager.java)

制作动态视图，并在其中制作动态图像....

并使用 fedor imageloader 从 url 填充图像视图... [https://github.com/thest1/LazyList/blob/master/src/com/fedorvlasov/lazylist/ImageLoader.java](https://github.com/thest1/LazyList/blob/master/src/com/fedorvlasov/lazylist/ImageLoader.java)

但我得到了那个烦人的 stid 图像......这是我的代码......

任何帮助或建议都将得到高度认可

提前感谢

```
public class testing extends Activity {

private HorizontalPager mPager;
 ImageView[] image;

 String url = "http://icons-search.com/img/icons-land/IconsLandVistaStyleEmoticonsDemo.zip/IconsLandVistaStyleEmoticonsDemo-PNG-256x256-Cool.png-256x256.png";

 @Override
 public void onCreate(final Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.testing);
  ImageLoader imageLoader = new ImageLoader(this);
  mPager = (HorizontalPager) findViewById(R.id.horizontal_pager);

  image = new ImageView[2];
  for (int i = 0; i < 2; i++) {

   image[i] = new ImageView(getApplicationContext());
   image[i].setImageResource(R.drawable.logo_background);
   RelativeLayout.LayoutParams layoutParams90 = new RelativeLayout.LayoutParams(
     225, 250);
   layoutParams90.leftMargin = 25;
   image[i].setLayoutParams(layoutParams90);
   mPager.addView(image[i]);

  }

  for (int i = 0; i < 2; i++) {
   imageLoader.DisplayImage(url, image[i]);
  }
 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:29:56.310

当您创建 ImageView 尝试传递您的 Activity 而不是 Application 上下文。所以替换这个

```
image[i] = new ImageView(getApplicationContext()); 
```

有了这个

```
image[i] = new ImageView(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:26:29.043

请检查您是否在您的 android manifest 文件中添加了外部存储和互联网权限？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:55:01.123

您需要先定位问题。您使用的网址可能有问题 - 尝试另一个。可能与 Pager 有关 - 尝试不使用页面，只需将所有图像放入 LinearLayout。还有什么可能是一个问题 - 只是找到一些线索。如果您只是将一个 ImageView 放到屏幕上，它会起作用吗？

# javascript - 从 ASP.NET 中的 C# 事件调用 Javascript 函数

> ID：12923908
> 
> 赞同：1
> 
> 时间：2012-10-16T21:43:05.090
> 
> 标签：javascript, c#, asp.net, dom-events

这是在带有 C# 的 ASP.NET 中。我正在尝试从单选按钮列表单击事件中以编程方式调用 Javascript 函数。我创建了单选按钮列表并在其中添加了几个列表项。我环顾四周，但一直无法弄清楚这一点。

C#代码：

```
RadioButtonList _rbList = new RadioButtonList();
_rbList.ID = r[0].ToString()+"Answer";
_rbList.RepeatDirection = RepeatDirection.Horizontal;
_rbList.Attributes.Add("onchange", "return answered();"); 
```

我的 .aspx 中的 Javascript：

```
<script type ="text/javascript">
function answered() {
    alert("I am an alert box!");
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:49:19.967

您在 RadioButtonList 上添加 onchange ...

将它添加到 RadioButtonList 内的 RadioButton 中，它会起作用，在较低级别上讲，从 RadioButtonList 的 Items 中向 ListItem 添加属性，只是一个问题......

添加`"onchange"`属性将渲染一个`<span>`包含`<input radio`，我知道非常恶心，尝试添加`onclick`，所以渲染器可以将属性附加到`<input radio`，并在 javascript 点击上做你的魔法，像这样：

```
RadioButtonList1.Items[0].Attributes.Add("onclick", "return answered();"); 
```

# sql - SQL-在netbeans中执行简单查询

> ID：12923911
> 
> 赞同：0
> 
> 时间：2012-10-16T21:43:12.830
> 
> 标签：sql, netbeans, syntax, derby

我是 SQL 新手，也是 NetBeans 新手。所以如果这真的很简单，请原谅我，但我不明白我做错了什么。我有一个名为“user”的表，其中包含“id”、“username”和“password”列。我正在尝试从我的数据库中检索一行。我需要的唯一字段是用户名和密码。所以我有以下内容：

```
 SELECT 
    user.username AS "Username",
    user.password AS "Password"
    FROM "user"
    WHERE
    user.username = "billy" 
```

我正在使用 netbeans 来测试我的查询。我已经设置了一个数据库，其中包含一个用户名为“billy”的用户以及相应的密码。当我在 netbeans 中单击“运行 SQL”时，它会返回以下错误：

```
Error code -1, SQL state 42X01: Syntax error: java.lang.String.username.
Line 1, column 1 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:28:08.880

嗯......经过一些试验和错误，我将所有引用替换`user.column`为`"column"`. 这似乎解决了我的问题。作为参考，查询如下所示：

```
 SELECT 
    "username" AS "Username", 
    "password" AS "Password" 
    FROM "user" 
    WHERE 
    "username" = 'Billy' 
```

# python - 使用 dict 作为更新类属性的开关 - 如何将它们作为引用插入？

> ID：12923912
> 
> 赞同：0
> 
> 时间：2012-10-16T21:43:15.547
> 
> 标签：python, dictionary, python-3.x, switch-statement

嗨，我试图通过这样做来节省一些打字并变得“聪明”......

```
class foo(object):
    def __init__()
        self.eric = 0
        self.john = 0
        self.michael = 0
        self.switchdict = {'Eric':self.eric, 'John':self.john, 'Michael':self.michael}

    def update(self, whattoupdate, value):
       if whattoupdate in self.switchdict:
           self.switchdict[whattoupdate] += value 
```

在它不起作用之后，很明显整数值不是通过引用传递的，而是作为整数传递的。通过将属性转换为列表，我采取了长期的解决方法，但我怀疑有更好的方法。

我实际上有大约 30 个这样的属性，所以保存输入并将它们添加到列表中非常方便，但我的 google-fu 并没有产生任何令人满意的方法来做到这一点。

任何聪明但仍然可读和 Pythonic 的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:39:32.163

恭喜！你只是重新发明了一种有限的`setattr()`. :-)

如果您在这条路上走得很远，我认为您将面临维护的噩梦，但如果您坚持，我会考虑类似的事情：

```
class foo(object):
    allowedattrs = ['eric', 'john', 'michael']

    def __init__(self):
        self.eric = 0
        self.john = 0
        self.michael = 0
        self.switchdict = {'Eric':self.eric, 'John':self.john, 'Michael':self.michael}

    def update(self, whattoupdate, value):
        key = whattoupdate.lower()
        if key not in self.allowedattrs:
            raise AttributeError(whattoupdate)
        setattr(self, key, getattr(self, key) + value)

f = foo()
f.update('john', 5)
f.update('john', 4)
print f.john 
```

但是将您的值存储在 nice 中真的会容易得多`defaultdict`吗？

```
from collections import defaultdict

class foo(object):
    allowedattrs = ['eric', 'john', 'michael']

    def __init__(self):
        self.values = defaultdict(int)

    def update(self, whattoupdate, value):
        self.values[whattoupdate] += value

f = foo()
f.update('john', 5)
f.update('john', 4)
print f.values['john'] 
```

# newrelic - 监控文件上传

> ID：12923914
> 
> 赞同：0
> 
> 时间：2012-10-16T21:43:30.000
> 
> 标签：newrelic

我们希望能够找出我们的文件上传器在性能方面的当前行为。我们希望能够在不给服务器带来压力的情况下找出可以同时上传的最大文件数。我们还想知道当前的使用情况。

我们将新 Relic 视为一种可能的解决方案，并尝试使用如下自定义挂钩：

```
::NewRelic::Agent.agent.stats_engine.get_stats_no_scope('photo/new/time').record_data_point(Time.new - session[:upload_start_time]) 
```

遗憾的是，我无法在 New Relic 仪表板或事务视图中看到数据。还有其他地方可以看吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T02:45:37.973

在与 New Relic 支持团队交谈后，我们设法解决了这个问题。似乎自定义指标必须以带有单词`Custom/`作为前缀的路径开头。所以在我的情况下，它将是：

```
::NewRelic::Agent.agent.stats_engine.get_stats_no_scope('Custom/photo/new/time').record_data_point(Time.new - session[:upload_start_time]) 
```

然后，您可以使用该新指标创建自定义仪表板小部件。只需输入以自定义开头的指标名称（它应该自动完成您的指标）。

# jquery - 表格排序器分页不会在初始页面加载时排序

> ID：12923920
> 
> 赞同：1
> 
> 时间：2012-10-16T21:43:53.097
> 
> 标签：jquery, pagination, tablesorter

我找到了一个我正在尝试使用的表格排序器示例。

加载页面时，第一次尝试时，表格不会排序或转到下一页。但是，如果我更改限制并尝试排序/转到下一页，它会起作用。它也不会抛出任何错误。

这是链接： [http ://srikanthrajan.com/test-table/tablesorter.html](http://srikanthrajan.com/test-table/tablesorter.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:11:14.910

嘿伙计在这里看到**工作演示**：http : [//jsfiddle.net/ZK6dZ/](http://jsfiddle.net/ZK6dZ/)

你的`LIMIT`价值是空的。： http: [//mottie.github.com/tablesorter/docs/example-pager.html](http://mottie.github.com/tablesorter/docs/example-pager.html)

休息演示应该适合原因`:)`

**代码**

```
$(function() {
    $("table").tablesorter({
        theme: 'blue',
        widthFixed: true,
        widgets: ['zebra']
    }).tablesorterPager({container: $("#pager")}); 
});​ 
```

# android - Google 地图 API 限制是如何计算的？

> ID：12923925
> 
> 赞同：1
> 
> 时间：2012-10-16T21:44:09.697
> 
> 标签：android, api, google-maps

我正在尝试构建一个依赖谷歌地图来实现地图功能的 Android 应用程序。Google Maps API FAQ 提到，每个服务的最大请求数是每天 25000 次地图加载。

由于我只有一把开发钥匙，并希望该应用程序至少能被数百人使用，我想确保我正确理解了这些限制。

是与我的密钥相关联的最大限制，因此是所有应用程序发出的所有请求的总和，还是每个独立设备上的每个应用程序的总和。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:55:08.537

似乎它适用于所有使用您的密钥的应用程序，但每个 Google 服务： [FAQ Google](https://developers.google.com/maps/documentation/business/faq#usage_limits)

因此，如果您有三个应用程序，每个应用程序都有 200 个用户，每天使用两次应用程序，那么您的 API 密钥每天将有 2*200*3 = 1200 次地图加载。这是不应该超过[谷歌设置](https://developers.google.com/maps/documentation/business/faq#usage_limits)的地图加载的最大数量的值。

# mysql - 为什么要从 MySql 迁移到 sql server

> ID：12923930
> 
> 赞同：0
> 
> 时间：2012-10-16T21:44:33.047
> 
> 标签：mysql, sql-server-2008

我的团队有一个使用 MySQL 创建的产品。我们所有的其他系统都使用 SQL Server 2008，我想研究迁移到 SQL Server。领导 MySQL 服务器工作的人已经离开了公司，所以现在我们没有任何熟悉 MySQL 的人。我们想迁移，但我希望能够详细分析我们为什么要迁移。是否有关于 MySQL 的优点/缺点的任何记录案例研究，以及迁移到 SQL Server 的任何令人信服的理由？仅供参考，该应用程序仍处于 Beta 模式，现在迁移比 6 个月后更容易。

我不想与老板进行的两次对话是：1）我想将应用程序迁移到 SQL Server，原因是“只是因为我想”。2) 我们应该在 6 个月前迁移，但我们没有并且希望我们有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:52:58.627

您已经为您的案例提出了两个最重要的观点：

1.  “我们所有其他系统都使用 SQL Server 2008”
2.  “现在我们没有任何人熟悉 MySQL”。

鉴于这些条件，必须*保留*MySQL，而不是离开它。如果产品不依赖于特定的 MySQL 功能，请迁移。简化您的堆栈，减少您的支持开销。

我这样说是对 MS 产品有强烈反感的人。但我也是一个负责任的高级软件工程师，我知道什么是对的。

# c++ - 加载共享库sfml时出现c ++错误

> ID：12923932
> 
> 赞同：0
> 
> 时间：2012-10-16T21:44:53.237
> 
> 标签：c++, sfml

[这](http://i.imgur.com/Xufs2.png)是我正在尝试做的事情的图片。

我试过 export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:$home/hassan/c++ （这是你看到的文件夹）

或 LD_LIBRARY_PATH=home/hassan/c++

没有运气

请帮忙！

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:08:24.107

使用完整路径设置 LD_LIBRARY_PATH：

```
export LD_LIBRARY_PATH=`pwd -P` 
```

不确定是否需要下一步，但如果它仍然适合您，请符号链接 so.2 文件：

```
ln -s libsfml-graphics.so.2 libsfml-graphics.so 
```

# scale - 如何对 OrientDB 进行分片？

> ID：12923938
> 
> 赞同：7
> 
> 时间：2012-10-16T21:45:22.047
> 
> 标签：scale, sharding, orientdb

我想对 OrientDB 进行分片以在多台服务器上运行，但我找不到真正的方法来做到这一点。

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T09:05:06.997

计划于 2012 年 12 月/2013 年 1 月提供分片 2.0.0。现在您可以拥有多个分布式数据库。

# javascript - 使用 javascript 的经典 ASP 写会话

> ID：12923940
> 
> 赞同：-2
> 
> 时间：2012-10-16T21:45:31.613
> 
> 标签：javascript, facebook, asp-classic

我有一个 Facebook Javascript，它报告用户是否已登录，并且我想存储一个会话变量，以便我可以告诉我的网站用户已登录。这里是脚本。

```
 FB.getLoginStatus(function(response) {
   if (response.status === 'connected') {
   var uid = response.authResponse.userID; --> want to store this in a session variable
    var accessToken = response.authResponse.accessToken; --> want to store this in a session variable
 } else if (response.status === 'not_authorized') {
// the user is logged in to Facebook, 
// but has not authenticated your app
 } else {
  alert("your not connected");
}
});
 }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:09:58.677

您必须向服务器发出 AJAX 请求，传递`accessToken`，然后从服务器上的 ASP 代码将其存储在会话中。您不能直接从客户端 js 执行此操作（但您可以设置 cookie）。

# javascript - D3.js 将对象绑定到数据并为每个键附加

> ID：12923942
> 
> 赞同：27
> 
> 时间：2012-10-16T21:45:39.850
> 
> 标签：javascript, d3.js, svg, data-binding, interpolation

我是 D3.js 新手，我正在学习如何处理数据。

假设我有一个名称作为键的对象，每个键都有一个这样的数字数组：

```
var userdata = {
    'John' : [0, 1, 3, 9, 8, 7],
    'Harry': [0, 10, 7, 1, 1, 11],
    'Steve': [3, 1, 4, 4, 4, 17],
    'Adam' : [4, 77, 2, 13, 11, 13]
}; 
```

对于每个用户，我想附加一个 SVG 对象，然后用该用户的值数组绘制线。

所以这是我根据教程对它的外观的假设，但我知道这是不正确的。这是为了展示我有限的知识并更好地理解我在做什么：

首先我应该创建这条线

```
var line = d3.svg.line().interpolate('basis'); 
```

然后我想将数据绑定到我的正文并为每个键附加一个 svg 元素：

```
d3.select('body')
    .selectAll('svg')
    .data(userdata)
    .enter()
    .append('svg')
    .append(line)
    .x(function(d, i) { return i; })
    .y(function(d) { return d[i]; }); 
```

那我近吗？？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-16T22:45:10.500

这是另一个类似于 mbeasley 的示例：http: [//jsfiddle.net/2N2rt/15/](http://jsfiddle.net/2N2rt/15/)它添加了轴、颜色并将图表正面朝上翻转。首先，我稍微修改了您的数据。如果您有一组值，并且我使用键使访问`name`和`values`属性更容易，则效果最佳。

```
var data = [
    {name: 'John', values: [0,1,3,9, 8, 7]},
    {name: 'Harry', values: [0, 10, 7, 1, 1, 11]},
    {name: 'Steve', values: [3, 1, 4, 4, 4, 17]},
    {name: 'Adam', values: [4, 77, 2, 13, 11, 13]}
]; 
```

通常在`d3`您设置这样的图表时，它决定了实际图表的大小和周围的边距。

```
var margin = {top: 20, right: 80, bottom: 30, left: 50},
    width = 640 - margin.left - margin.right,
    height = 380 - margin.top - margin.bottom; 
```

然后，您可以根据数据创建比例。虽然您不必创建它们，但通过将值转换为点，它们可以更轻松地在图表上定位元素。`domain`是数据的最小值和最大值，而是`range`图表大小的最小值和最大值。请注意，将 (0,0) 放在左下角（通常 y 轴的 0 位于顶部）的反转 `range`。`y axis`

```
var x = d3.scale.linear()
    .domain([0, d3.max(data, function(d) { return d.values.length - 1; })])
    .range([0, width]);

var y = d3.scale.linear()
    .domain([d3.min(data, function(d) { return d3.min(d.values); }),
             d3.max(data, function(d) { return d3.max(d.values); })])
    .range([height, 0]); 
```

`d3`有几个功能可以自动为您创建色阶。只需使用您要使用的键和颜色数进行设置（我认为有 10 和 20 种颜色选项）。

```
var color = d3.scale.category10()
    .domain(d3.keys(data[0]).filter(function(key) { return key === "name"; })); 
```

在这里，我们使用我们的比例来设置 x 和 y 轴。轴有很多不同的选项。TickFormat 可以方便地更改刻度的外观，`d3.format`具有许多不同的选项，因此您很少需要创建自定义格式化程序。

```
var xAxis = d3.svg.axis()
    .scale(x)
    .tickFormat(d3.format('d'))
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left"); 
```

在这里，我们创建了一个知道如何画线的可重用函数。稍后我们会将每个人的每个数据点传递给 line 函数。请注意，它`d`保存了我们正在绘制的当前值集，并且`i`是我们原始数据数组中当前值的索引。

```
var line = d3.svg.line()
    .interpolate("basis")
    .x(function(d, i) { return x(i); })
    .y(function(d, i) { return y(d); }); 
```

最后我们可以开始向我们的图表添加东西，首先创建和定位主要的 svg 元素。

```
var svg = d3.select("#chart").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")"); 
```

然后附加每个轴。

```
 svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis); 
```

我们为每个人附加一个组 ( `g`) 并将数据与组相关联。我们将在绘制线条时使用这些数据。我们提供了一个`class`，以便我们以后可以根据需要设置图表样式。

```
 var people = svg.selectAll(".people")
      .data(data)
    .enter().append("g")
      .attr("class", "people"); 
```

然后最后为每个人画线。

```
 people.append("path")
      .attr("class", "line")
      .attr("d", function(d) { return line(d.values); })
      .style("stroke", function(d) { return color(d.name); }); 
```

当你有负值时，我用你的数据回答了另一个关于绘制网格的问题。[您可以在http://jsfiddle.net/2y3er/2/](http://jsfiddle.net/2y3er/2/)看到该图。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-16T22:28:28.240

我会说你正朝着正确的方向前进。这就是我会做的（但知道不只有一种方法可以做到这一点）：

```
// your user data
var userdata = {
    'John' : [0, 1, 3, 9, 8, 7],
    'Harry': [0, 10, 7, 1, 1, 11],
    'Steve': [3, 1, 4, 4, 4, 17],
    'Adam' : [4, 77, 2, 13, 11, 13]
}; 

// add your main SVG block
var svg = d3.select('body')
    .append('svg')
    .attr('width', 400)
    .attr('height', 200)
    .attr('id', 'chart');

// add an SVG group element for each user
var series = svg.selectAll('g.series')
    .data(d3.keys(userdata))
    .enter()
    .append('g')
    .attr('class', 'series');

// create your line generator
var line = d3.svg.line()
    .interpolate('basis')
    .x(function(d, i) {
        return i*40; // *40 just to increase the chart size
    })
    .y(function(d) {
        return d*3; // *3 for the same reason
    });

// add a line for each user using your SVG grouping 
var lineSVG = series.selectAll('.line')
    .data(d3.keys(userdata))
    .enter()
    .append('svg:path')
    .attr('d', function(d) {
        return line(userdata[d]);  
    })
    .attr('class','line'); 
```

这是上述代码[的演示。](http://jsfiddle.net/mbeasley183/TLPxf/)

我还强烈建议您阅读[这篇文章](http://bost.ocks.org/mike/join/)，因为它确实有助于巩固 d3 的工作方式。

# ruby-on-rails-3 - Rails 3.2.8 - 如何处理时区？

> ID：12923943
> 
> 赞同：1
> 
> 时间：2012-10-16T21:45:41.847
> 
> 标签：ruby-on-rails-3, datetime, timezone

今年我参加了 Rails Rumble，发现自己被时区问题所困扰。

我在 linode 上传了我的应用程序，我住在 EST 时区或 -4 到 UTC。

我有一个模型，它通过执行以下操作来节省事情：

```
def self.processing_creation(user_id, home_id, chore_id)
  registered_chore = RegisteredChore.where("DATE(created_at) = ?", Date.today).find_by_user_id_and_home_id_and_chore_id(user_id, home_id, chore_id)
  unless registered_chore
    registered_chore = RegisteredChore.create(user_id: user_id, home_id: home_id, chore_id: chore_id, created_at: Time.zone.now)
    user = registered_chore.user
    user.add_one_chore_point
  end
  registered_chore
end 
```

RegisteredChore.where("DATE(created_at) = ?", Date.today).find_by_user_id_and_home_id_and_chore_id(user_id, home_id, chore_id)

即使数据刚刚创建，也返回 false。

我注意到“创建”以 UTC 格式保存，但 Date.today 使用用户的本地时区。

处理这个问题的最佳方法是什么？

另一个例子来说明这个问题：

1.  我想在美国东部标准时间晚上 11 点登记家务。
2.  服务器已经在第二天（例如：12）。
3.  Rails 将数据保存在第二天的日期 (12)。
4.  但用户仍在第 11 天。
5.  从技术上讲，使用当前方法的用户可以再次保存条目，因为日期与数据库和用户界面不同。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:13:40.127

默认情况下，Rails 3 将所有时间保存在 GMT+00:00 时区的相对数据库中。因此，您必须在计算时间时根据您的时区设置偏移量。否则，您可以通过添加以下内容来更改默认 Activerecord 时区`application.rb`

```
config.time_zone = 'Your time zone' (Example: 'Eastern Time (US & Canada)')
config.active_record.default_timezone = 'Your time zone' (Example: 'Eastern Time (US & Canada)') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:35:12.470

默认情况下，Rails 会将时间以 UTC 格式保存到数据库中。如果您正在使用`DATE([Date.today])`，那么它将在 11 日而不是 12 日查找记录。要获得正确的日期，您可能希望设置`Time.zone`为用户的当前时区，然后进行查询。

我构建了一个名为[by_star](http://github.com/radar/by_star)的 gem来处理这种日期搜索，我认为你应该使用它。有了它，您的查询将是这样的：

```
RegisteredChore.today.where(:user_id => user.id, 
                            :home_id => home.id,
                            :chore_id => chore.id) 
```

# javascript - 无法隐藏 jquery ui 的日期选择器

> ID：12923944
> 
> 赞同：1
> 
> 时间：2012-10-16T21:45:42.980
> 
> 标签：javascript, jquery-ui

有很多问题和答案，但我找不到我要找的东西。

我通过链接单击显示日期选择器，但当用户选择日期时无法隐藏它。如果您有任何建议，请告诉我。[您可以在http://jsfiddle.net/5qE8K/](http://jsfiddle.net/5qE8K/)找到相关代码

```
 $("#calendar > a").unbind('click').bind('click', function(e){
        e.preventDefault();

        var calendar = $(this).parent();

        $("#content").datepicker({
            beforeShow: function(){
                $(".ui-datepicker").css({
                    'position'  :   'absolute',
                    'top'       :   (calendar.offset().top + calendar.height() + 4) + 'px',
                    'left'      :   (calendar.offset().left + calendar.width() - $(".ui-datepicker").outerWidth(true)) + 'px'
                });
            },
            onSelect: function(date, obj){
                calendar.children("div#selected-date").text(obj.selectedDay + '/' + (obj.selectedMonth+1) + '/' + obj.selectedYear);
                calendar.children("span").text(obj.selectedDay);
                $("#content").datepicker('hide');
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:01:47.617

在内联detepicker（即附加到输入以外的元素的日期选择器）上调用“隐藏”没有任何作用。尝试调用破坏。

```
// ...
calendar.children("span").text(obj.selectedDay);
$("#content").datepicker('destroy');
// ... 
```

# c++ - C++ - 使用默认模板作为专业化的基础

> ID：12923945
> 
> 赞同：6
> 
> 时间：2012-10-16T21:45:56.443
> 
> 标签：c++, templates, specialization

我想写一个数学矢量模板。我有一个接受类型和大小作为模板参数的类，有很多数学运算方法。现在我想编写特化，其中 Vector<3> 例如具有 x、y、z 作为成员，它们分别引用 data[0..3]。

问题是我不知道如何创建一个从默认模板继承所有内容的专业化，而无需创建基类或两次编写所有内容。

最有效的方法是什么？

```
template<class Type, size_t Size>
class Vector {
    // stuff
};

template<class T>
class Vector<3,T>: public Vector {
    public:
        T &x, &y, &z;
        Vector(): Vector<>(), x(data[0]), y(data[1]), z(data[2]){}
        // and so on
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T21:51:15.583

不知何故，您应该能够从默认实现派生，但是您正在专门化一个实例，那么如何？它应该是您可以从中派生的非专业版本。所以这很简单：

```
// Add one extra argument to keep non-specialized version!
template<class Type, size_t Size, bool Temp = true>
class Vector {
    // stuff
};
// And now our specialized version derive from non-specialized version!
template<class T>
class Vector<T, 3, true>: public Vector<T, 3, false> {
    public:
        T &x, &y, &z;
        Vector(): Vector<>(), x(data[0]), y(data[1]), z(data[2]){}
        // and so on
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:53:47.133

考虑以稍微不同的方式进行此操作，但目标将实现，添加外部接口 - 我的意思是独立函数 X()、Y()、Z()：

```
template<class T, size_t S>
T& x(Vector<T, S>& obj, typename std::enable_if<(S>=1)>::type* = nullptr)
{
   return obj.data[0];
}

template<class T, size_t S>
T& y(Vector<T, S>& obj, typename std::enable_if<(S>=2)>::type* = nullptr)
{
   return obj.data[1];
}

template<class T, size_t S>
T& z(Vector<T, S>& obj, typename std::enable_if<(S>=3)>::type* = nullptr)
{
   return obj.data[2];
} 
```

两者之间没有太大区别：

```
 Vector<T, 3>& obj
 return obj.x(); 
```

和

```
 Vector<T, 3>& obj
 return x(obj); 
```

作为奖励 - 此界面适用于匹配尺寸。

# java - 是否有模拟 C 的 crypt 函数的 java 函数？

> ID：12923948
> 
> 赞同：0
> 
> 时间：2012-10-16T21:46:06.443
> 
> 标签：java, c, encryption, cryptography, crypt

我正在尝试创建一个密码破解程序来加密可能的密码并将它们与假用户密码进行比较。为此，我需要使用 crypt 函数*，如果我使用 c，这将很容易，但我使用的是 java。有没有等价的选择？如果是这样，我在哪里可以下载它？

*在你告诉我它不安全之前，我知道。我将它用于实验室，而不是实际的验证系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:02:34.087

假设您谈论的是 glibc2 中可用的版本，它支持的不仅仅是 DES 加密：不仅是加密，还有加密摘要。

`crypt()`理论上，您可以研究在 Java 中模仿其行为的实现细节。加密通常使用[`Cipher`](http://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html)类完成，而摘要将使用[`MessageDigest`](http://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html)类完成。您会发现Oracle/OpenJDK JRE（可能还有其他）附带的[SUN 和 SunJCE 提供程序提供了您需要的算法。](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html)

获得正确的细节可能需要进行一些调查（例如，找出盐的使用方式）。

您也可以直接使用[Apache Commons Codecs`Crypt`](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/digest/Crypt.html)类，该类专门用于与 GNU libc crypt(3) 兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:53:20.737

我假设您正在使用这个 crypt 函数（http://www.gnu.org/software/libc/manual/html_node/crypt.html）

首先，如果你需要编写完全等价的代码，你需要了解这个函数在内部是如何工作的。

这是 DES 加密的示例（由 crypt 使用）： [http ://www.exampledepot.com/egs/javax.crypto/desstring.html](http://www.exampledepot.com/egs/javax.crypto/desstring.html)

这是 MD5 散列的示例（可由 crypt 使用）： [http ://www.mkyong.com/java/java-md5-hashing-example/](http://www.mkyong.com/java/java-md5-hashing-example/)

# python - 将参数放入字符串

> ID：12923950
> 
> 赞同：0
> 
> 时间：2012-10-16T21:46:10.840
> 
> 标签：python, string, variables, arguments, sys

> **可能重复：**
> [Python 中的命令行参数](https://stackoverflow.com/questions/1009860/command-line-arguments-in-python)

我正在使用 Python 3.2。我想做的基本上是一个将文本导出到 .txt 文件的程序，如下所示：

```
[program name] "Hello World" /home/marcappuccino/Documents/Hello.txt 
```

我是新手，我不知道如何将两个“”之间的任何内容放入变量中。在`sys.argv`吗？任何帮助表示赞赏！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:51:13.110

是的，它是[sys.argv](http://docs.python.org/library/sys.html)，它包含命令行参数。你会想要这样的东西：

```
string_to_insert = sys.argv[1]
file_to_put_string_in = sys.argv[2] 
```

这会将“Hello World”分配给`string_to_insert`和 /home/marcappuccino/Documents/Hello.txt 分配给`file_to_put_string_in`.

假设您有一个名为“dostuff.py”的脚本，您可以像这样调用它：

```
dostuff.py "Hello World 1" "Hello World 2" hello world three 
```

你最终会得到的是：

```
sys.argv[0] = dostuff.py (might be a full path, depending on the OS)
sys.argv[1] = Hello World 1
sys.argv[2] = Hello World 2 
sys.argv[3] = hello 
sys.argv[4] = world 
sys.argv[5] = three 
```

引号中的参数被视为单个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:20:09.313

我写了一个简单的程序来演示我认为你需要什么。您必须在输入中添加转义字符才能按原样使用引号。

```
import sys

for i in range(0, len(sys.argv)):
    print sys.argv[i] 
```

输出：

```
python testing.py a b c "abcd"
testing.py
a
b
c
abcd

python testing.py a b c \"abcd\"
testing.py
a
b
c
"abcd" 
```

# r - 何时使用 approxfun 与 approx

> ID：12923958
> 
> 赞同：17
> 
> 时间：2012-10-16T21:47:02.510
> 
> 标签：r

的文档`approxfun`指出它“通常比`approx`”更有用。我正在努力解决问题`approxfun`。什么时候`approxfun`比`approx`（什么时候`approx`更有用）？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-16T21:55:40.530

`approx`返回（任一）指定点或给定点数处的近似函数的值。`approxfun`返回一个函数，然后可以在某些特定点进行评估。如果您需要在进行近似时知道的点处的近似值，`approx`将为您执行此操作。如果您需要一个函数（在数学意义上），它将返回稍后给出的某个参数的近似值，`approxfun`这就是您所需要的。

这里有些例子。

```
dat <- data.frame(x=1:10, y=(1:10)^2) 
```

来自`approx`和`approxfun`使用这些数据的输出

```
> approx(dat$x, dat$y)
$x
 [1]  1.000000  1.183673  1.367347  1.551020  1.734694  1.918367  2.102041
 [8]  2.285714  2.469388  2.653061  2.836735  3.020408  3.204082  3.387755
[15]  3.571429  3.755102  3.938776  4.122449  4.306122  4.489796  4.673469
[22]  4.857143  5.040816  5.224490  5.408163  5.591837  5.775510  5.959184
[29]  6.142857  6.326531  6.510204  6.693878  6.877551  7.061224  7.244898
[36]  7.428571  7.612245  7.795918  7.979592  8.163265  8.346939  8.530612
[43]  8.714286  8.897959  9.081633  9.265306  9.448980  9.632653  9.816327
[50] 10.000000

$y
 [1]   1.000000   1.551020   2.102041   2.653061   3.204082   3.755102
 [7]   4.510204   5.428571   6.346939   7.265306   8.183673   9.142857
[13]  10.428571  11.714286  13.000000  14.285714  15.571429  17.102041
[19]  18.755102  20.408163  22.061224  23.714286  25.448980  27.469388
[25]  29.489796  31.510204  33.530612  35.551020  37.857143  40.244898
[31]  42.632653  45.020408  47.408163  49.918367  52.673469  55.428571
[37]  58.183673  60.938776  63.693878  66.775510  69.897959  73.020408
[43]  76.142857  79.265306  82.551020  86.040816  89.530612  93.020408
[49]  96.510204 100.000000

> approxfun(dat$x, dat$y)
function (v) 
.C(C_R_approxfun, as.double(x), as.double(y), as.integer(n), 
    xout = as.double(v), as.integer(length(v)), as.integer(method), 
    as.double(yleft), as.double(yright), as.double(f), NAOK = TRUE, 
    PACKAGE = "stats")$xout
<bytecode: 0x05244854>
<environment: 0x030632fc> 
```

更多使用示例：

```
a <- approx(dat$x, dat$y)
af <- approxfun(dat$x, dat$y)

plot(dat)
points(a, pch=2) 
```

![在此处输入图像描述](../Images/53fd7d92e6cadad2e98e284557b8c3c3.png)

```
plot(dat)
curve(af, add=TRUE) 
```

![在此处输入图像描述](../Images/ecc3798805bd58459ce44cd575725305.png)

或者另一个需要函数的例子：

```
> uniroot(function(x) {af(x)-4}, interval=c(1,10))
$root
[1] 1.999994

$f.root
[1] -1.736297e-05

$iter
[1] 24

$estim.prec
[1] 6.103516e-05 
```

# ruby-on-rails - 等价于 Rails 在 Entity Framework 中的多态关联

> ID：12923959
> 
> 赞同：1
> 
> 时间：2012-10-16T21:47:04.750
> 
> 标签：ruby-on-rails, entity-framework

我正在努力将现有 Ruby on Rails 应用程序的一部分移植到 .NET MVC 4 和 Entity Framework 5（不要问），并且需要一些帮助来复制一些 ORM 功能，尤其是 Rails 的多态关联。

我宁愿不改变现有的数据库结构。我将举一个我正在做的例子——这是数据库的样子：

```
CREATE TABLE tags (
    id integer PRIMARY KEY,
    name nvarchar(128) NOT NULL,
    UNIQUE (name)
);

CREATE TABLE taggings (
    id integer PRIMARY KEY,
    tag_id integer REFERENCES tags(id) ON DELETE CASCADE,
    taggable_id integer,
    taggable_type nvarchar(255),
);

CREATE TABLE stories (
    id integer PRIMARY KEY,
    name nvarchar(128) NOT NULL
    [more stuff]
);

CREATE TABLE assets (
    id integer PRIMARY KEY,
    name nvarchar(128) NOT NULL
    [more stuff]
); 
```

Taggings 模型与其他几个相关联，例如 Story、Asset 等。此表中的记录如下所示：

```
INSERT INTO taggings values (1, 1, 1234, 'Story');
INSERT INTO taggings values (2, 343, 69, 'Asset');
INSERT INTO taggings values (3, 200, 42, 'Asset'); 
```

因此，域中的 Asset 和 Story 模型都与 Taggings 具有一对多的关系。我想在我的 C# Story 和 Asset 类上建模（Fluent API）这种关系。

有没有办法在定义关系时指定这一点，也许还有一个附加条件（Tagging.taggable_type = 'Story'）？我不需要导航另一个方向（从标记到故事/资产）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:24:26.487

Make EF acts like ActiveRecord it's not going to work, but you can do something similar. You have a class Taggable that acts like the polymorphic class and that class has and belongs to many Tags, your other classes inherit from Taggable that makes them "Taggable" so for example Article : Taggable so inside the object you will have something like

article.Tags -> because article is Taggable and a Taggable has many Tags.

Below is the code tested and working

`

```
public class Tag
{
    public int Id { get; set; }
    public string Name { get; set; }
    public List<Taggable> Taggables { get; set; }
}

public class Taggable
{
    public int Id { get; set; }
    public List<Tag> Tags { get; set; }
}

[Table("Quests")]
public class Quest : Taggable
{
    public string Name { get; set; }
    public string QuestType { get; set; }
}

[Table("Articles")]
public class Article : Taggable
{
    public string Name { get; set; }
    public string ArticleType { get; set; }
}

public class Repository : DbContext
{
    public Repository() : base("Blog")
    {
    }

    public DbSet<Tag> Tags { get; set; }
    public DbSet<Taggable> Taggables { get; set; }
} 
```

`

so you can do stuff like this

`

```
 Repository r = new Repository();
        Article a = new Article();
        a.Tags = r.Tags.ToList();
        a.Name = "article 1";
        r.Taggables.Add(a);

        Quest q = new Quest();
        q.Tags = r.Tags.ToList().Skip(2).ToList();
        r.Taggables.Add(q);

        r.SaveChanges();

        var bb = from ttt in r.Taggables
                 where ttt is Article
                 select ttt;

        var jj = bb.ToList(); 
```

`

I hope I solved your question.

# php - MySQL 数据库超时

> ID：12923962
> 
> 赞同：0
> 
> 时间：2012-10-16T21:47:24.123
> 
> 标签：php

如何防止我的服务器超时。

我收到此错误，但我无法弄清楚：

“mysql服务器已经消失”

如果这是我最好的选择，你如何在 PHP 中集成 wait_timeout。您如何处理此类问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:47:12.963

当应用程序和数据库在不同的机器上运行或 mysql 很忙时，这是一个自然问题。调整[mysqli 选项](http://www.php.net/manual/en/mysqli.options.php)

```
$mysqli = mysqli_init();
$mysqli->options(MYSQLI_OPT_CONNECT_TIMEOUT, 5); 
```

# sqlite - SQLite 在磁盘上刷新以计算 db 文件哈希，如何？

> ID：12923969
> 
> 赞同：0
> 
> 时间：2012-10-16T21:48:04.793
> 
> 标签：sqlite, hash

我有一些程序在 sqlite 数据库中插入行。在没有关闭连接的情况下，我需要在每次插入后计算数据库文件的哈希总和。我对此有一些问题，插入数据库文件哈希和与插入之前相同。只有在关闭连接哈希和之后才会改变。我该如何解决这个问题？

# javascript - jQuery addClass() 到 append() 之后生成的元素

> ID：12923970
> 
> 赞同：9
> 
> 时间：2012-10-16T21:48:09.507
> 
> 标签：javascript, jquery

我正在尝试将一个类添加到新附加的 DIV 中，而不使用以下内容：

```
t.y.append('<div class="lol'+i+'"></div>'); 
```

这是我正在尝试做的一个更好的例子：

```
var t = this;

$(this.x).each(function(i, obj) {
    //append new div and add class too <div></div>
    t.y.append('<div></div>').addClass('lol'+i);
}); 
```

页面加载 HTML 如下所示：

```
<div class=".slideButton0 .slideButton1 .slideButton2" id="sliderNav">
    <div></div>
    <div></div>
    <div></div>
</div> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T21:57:57.133

当您通过 追加元素时`.append`，它不会更改 jQuery 对象的上下文。

你可以这样写：

`$('<div></div>').appendTo(t.y).addClass('lol'+i);`

或者

`$('<div></div>').addClass('lol'+i).appendTo(t.y);`

（它们都做同样的事情，只是顺序不同，第二个可能更清楚）

jQuery 对象的上下文将是新创建的 div。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T21:51:29.090

```
t.y.append('<div></div>').addClass('lol'+i); 
```

应该

```
t.y.append('<div></div>').find('div').addClass('lol'+i); 
```

在第一种情况下，您正在向要附加的 div 添加类 .. 所以上下文仍然是**父 div**而不是**新附加**的div ..

您需要先在父级中找到它，然后添加类..

**编辑**

如果您只想将类添加到最后附加的元素...找到父级中的最后一个 div，然后将类添加到它..这将确保您不会每次都将类添加到所有 div在循环中迭代..

```
t.y.append('<div></div>').find('div:last').addClass('lol'+i); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-16T21:53:01.333

试试这个：

`t.y.append($('<div></div>').addClass('lol'+i));`

小提琴：http: [//jsfiddle.net/gromer/QkTdq/](http://jsfiddle.net/gromer/QkTdq/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T21:54:25.310

```
var t = this;

$(this.x).each(function(i, obj) {
    //append new div and add class too <div></div>
    var d = $('<div />').addClass('lol' + i);
    t.y.append(d);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T21:57:20.653

问题是`append`返回容器而不是你刚刚附加到它的东西。我只会做`addClass` *之前*而`append`不是之后：

```
var t = this;

$(this.x).each(function(i, obj) {
    //append new div and add class too <div></div>
    t.y.append($('<div></div>').addClass('lol'+i));
}); 
```

**编辑**......或者，换句话说，正是格罗默所说的。也打败我整整五分钟。我越来越慢了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T21:56:07.707

您没有提及为什么要将`class`属性编号为列表项，但如果您实际上将它们用于 css，请不要忘记您有 :odd 和 :even css 选择器属性以及等效的奇数/偶数jQuery 选择器。

[http://www.w3.org/Style/Examples/007/evenodd.en.html](http://www.w3.org/Style/Examples/007/evenodd.en.html)
[http://api.jquery.com/odd-selector/](http://api.jquery.com/odd-selector/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-04T00:31:39.193

我没有找到这样的东西。注意类属性！

```
$.each(obj, function (_index, item) {
    resultContainer.append($('<li>', {
      class: "list-group-item",
      value: item.id,
      text: item.permitHolderName || item.permitHolderId
    }));
}); 
```

# windows - 在 windows mobile 6.1 中恢复 midlet 时 j2me 时间不正确

> ID：12923976
> 
> 赞同：1
> 
> 时间：2012-10-16T21:48:26.107
> 
> 标签：windows, date, mobile, java-me

我有一个奇怪的问题，在我的 midlet（CLDC 1.1，MIDP 2.0）中，当 windows mobile 进入待机模式（屏幕关闭）然后当它恢复（按任意键）时，我需要当前时间，我有一个时间不对！这就像 midlet 暂停时时钟停止...这发生在带有 javafx 的 windows mobile 6.1 中。在 Symbian 中它没有发生，更接近 windows mobile 6.5（使用 JBlend kvm）。我已经在windwos mobile 6.1 中安装了JBLend 但没有成功

有什么想法吗？

感谢您的任何建议

# contenteditable - 将 MathJax 插入 ContentEditable div

> ID：12923980
> 
> 赞同：5
> 
> 时间：2012-10-16T21:49:14.127
> 
> 标签：contenteditable, mathjax

我正在尝试将一些 MathJax 代码插入 contentEditable div，如下所示：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<meta charset=utf-8 />
  <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">      </script>

</head>
<body>
  <div id="editor" contentEditable="true" style="width:400px;height:400px;">
 </div> 
```

和 JS

```
$(document).ready(function () {

  $('#editor').focus();

  var code = "\\alpha";

  var html = '<span id="_math"><script type="math/tex;mode=in-line">'+ code +'</script></span>';

  document.execCommand('insertHTML', false, html);

  MathJax.Hub.Queue(["Typeset", MathJax.Hub, '_math']);

}); 
```

哪个呈现OK，但是一旦插入，元素就会冻结并且无法进一步输入。有人可以在这里指出问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-15T20:27:04.817

当内容发生变化时，您需要调用 MathJax。看到这个小提琴： http: [//jsfiddle.net/rfq8po3a/](http://jsfiddle.net/rfq8po3a/)（注意，我不得不在html中转义`<`and ）。`>`

这是通过几件事实现的：

1) 将 MathJax 逻辑移到它自己的函数中，`refreshMathJax`这将重新填充标签和代码。

2）第一次加载页面时调用此函数，然后再次onBlur。

3）清除可编辑元素onFocus。没有这个，可编辑元素就不能被轻易地重用。您可以更改 onFocus 回调函数，以将 contentEditable html 替换为原始 LaTeX 内容。

# mysql - MySql 计数与加入

> ID：12923987
> 
> 赞同：-4
> 
> 时间：2012-10-16T21:50:22.003
> 
> 标签：mysql

我有两张桌子 -

```
Users_tag (userID,tagID) 

tagId - userId
   1       1
   2       1
   3       2
   4       2
   5       4

Tags (id,tagText)

  id    tagText
  1      dog
  2      cat
  3      lion
  4      tiger
  5      chicken 
```

我希望我的查询根据 userId 返回 tagId、TagText 和每行的计数。

任何帮助请...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:53:55.553

```
SELECT  a.id, a.tagText, COUNT(b.tagID) totalCount
FROM    Tags a
        LEFT JOIN users_tag b
            on a.ID = b.tagID
GROUP BY a.id, a.tagText 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/68652/1)

# ruby-on-rails - RoR 模型似乎不像 Ruby 类？

> ID：12923991
> 
> 赞同：4
> 
> 时间：2012-10-16T21:50:42.230
> 
> 标签：ruby-on-rails, ruby, oop, activerecord, ruby-on-rails-3.2

如果我有一个 RoR 模型 person.rb 如下：

```
class Person < ActiveRecord::Base
  attr_accessible :first_name, :last_name

  validates :first_name, presence: true
  validates :last_name, presence: true
end 
```

我似乎无法执行以下任何操作：

```
@full_name = @first_name + " " + @last_name 
```

或者

```
def full_name
   @first_name + " " + @last_name 
end 
```

据我了解，这两者都应该与常规的 ruby​​ 课程一起使用。

我做了一些阅读，下面似乎是要走的路：

```
def full_name
    self.first_name + " " + self.last_name
end 
```

我可以完成这项工作，但我真的很想了解为什么我似乎无法以任何方式引用实例变量（也不能创建新变量）。

ActiveRecord::Base 对实例变量做了一些非常有趣的事情吗？它是否将模型（在这种情况下为 Person 类）限制为仅是数据库中内容的包装器？

我似乎也无法定义 attr_accessor ......但我可以很好地设置 first_name 和 last_name （不仅通过批量分配而且 p = Person.new; p.first_name = foo）

如果有人可以请对此有所了解，将不胜感激。

非常感谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T22:00:52.150

ActiveRecord 模型属性存储在一个名为 的实例变量中`@attributes`，它是一个散列。为您定义了 getter 和 setter 以访问此变量。

顺便说一句，这是在 Ruby 中连接字符串的推荐方法：

```
"#{first_name} #{last_name}" 
```

有一个内置的“to_s”方法（在大多数对象上）允许您以这种方式将它们直接插入到字符串中。虽然你不能这样做：`"string " + 1`在不引发错误的情况下，你可以这样做：`"string #{1}"`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T21:58:16.820

Active Record 不会将数据库属性存储在单个实例变量中，这就是为什么您必须使用它提供的访问器以及生成的访问器`attr_accessor`不起作用的原因。

相反，Active Record 将属性存储在散列中（在类型转换之前和之后），但是这是您不必担心的实现细节。

# ios - iOS6 Facebook 3.1.1 SDK：无 AdSupport 框架

> ID：12923995
> 
> 赞同：0
> 
> 时间：2012-10-16T21:50:47.227
> 
> 标签：ios, facebook, sdk

为简单起见，我安装了 SDK，但由于某种原因似乎找不到 Adsupport 框架。添加了社交和帐户框架没有问题，但 SDK 随附的示例中甚至缺少 Adsupport 框架。

我错过了什么吗？我在 iOS 6 和 Xcode 4.5 上，我添加了 SDK 和 FacebookSDKResources.bundle，然后添加了这两个框架，只是看不到第三个。

有人知道怎么修这个东西吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:58:20.403

它应该在ios6下。

![广告支持框架](../Images/3e7d2c0db38bfc6a7ced5be9420cb485.png)

但是，我也遇到过这种情况，但就我而言，社交、帐户和广告支持都不见了。原来他们在垃圾桶里。当时我也在玩facebook sdks，所以安装步骤中的某些东西可能会让你不小心删除它们？最坏的情况是重新安装 xcode。