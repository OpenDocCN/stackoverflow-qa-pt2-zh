# StackOverflow 问答 13505000-13505999

# javascript - jQuery - Calling .trigger('click') vs .click()

> ID：13505003
> 
> 赞同：9
> 
> 时间：2012-11-22T02:16:06.840
> 
> 标签：javascript, jquery

In jQuery what is the better way to trigger an event such as click? Using the `.trigger('click')` function or calling `.click()`?

I have always triggered this event by using `.click()` but suddenly decided maybe I should be using `.trigger('click')` instead.

I use these event triggers to trigger event listeners created with `.on('click', function(){...})`.

I have checked the [jquery api](http://api.jquery.com/trigger/), searched other stackoverflow posts [[ 1 ]](https://stackoverflow.com/questions/11519159/jquery-trigger-a-click-vs-function-call) [[ 2 ]](https://stackoverflow.com/questions/11486630/jquery-trigger-click-vs-click) and I can see no reason to use one over the other.

I would be more inclined to use `.trigger()` to keep all event triggering consistent, as this can be used to call any event including custom events. But it would seem `.trigger()` does not work in all cases.

What is the best way to trigger an event? `.trigger('click')` or `.click()`?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T02:18:44.043

If you're using `.trigger()` you have the advantage of being able to pass additional parameters, whereas `.click()` must be called without any.

Taken from the [documentation](http://api.jquery.com/trigger/):

```
$('#foo').bind('custom', function(event, param1, param2) {
  alert(param1 + "\n" + param2);
});
$('#foo').trigger('custom', ['Custom', 'Event']); 
```

*`'Custom'` and `'Event'` are being passed to the event handler as `param1` and `param2` respectively*

Besides that, the `.click()` is unlike other functions that implement get / set based on the number of arguments, because it implements trigger / set instead. Using a dedicated `.trigger()`, to me, is more logical.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-20T16:06:48.303

One caveat to be aware of when using the jQuery method is that, in addition to being a jQuery method, `.click()` is also a DOM Level 2 [native JavaScript method](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement.click) that can be called on HTML elements, such as `<button>` elements.

One place where this can become confusing is if you have a selector like this:

```
$("#element")[0].click(); 
```

There, you are actually calling the method on the DOM element. For instance, if you tried

```
$("#element")[0].trigger('click'); 
```

you would get an error that the element has no `trigger` method defined.

Be aware that `$('#element')[0].click();` won't work in Safari, on certain elements. You will need to use a workaround.

# c# - SimpleMembership Provider 未分配 ID

> ID：13505011
> 
> 赞同：3
> 
> 时间：2012-11-22T02:17:21.207
> 
> 标签：c#, .net, asp.net-mvc-4, simplemembership

我正在尝试使用 SimpleMembership 获得一个带有 SQL 的 MVC4 站点，但是每当我创建用户记录时，我都会不断收到错误消息：

```
[SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'NFBC.dbo.User'; column does not allow nulls. INSERT fails.
The statement has been terminated.]
   System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +1753346
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +5295154
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +242
   System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady) +1682
   System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +269
   System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite) +1325
   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite) +175
   System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite) +205
   System.Data.SqlClient.SqlCommand.ExecuteNonQuery() +160
   WebMatrix.Data.Database.Execute(String commandText, Object[] args) +116
   WebMatrix.WebData.DatabaseWrapper.Execute(String commandText, Object[] parameters) +55
   WebMatrix.WebData.SimpleMembershipProvider.CreateUserRow(IDatabase db, String userName, IDictionary`2 values) +1074
   WebMatrix.WebData.SimpleMembershipProvider.CreateUserAndAccount(String userName, String password, Boolean requireConfirmation, IDictionary`2 values) +102
   WebMatrix.WebData.WebSecurity.CreateUserAndAccount(String userName, String password, Object propertyValues, Boolean requireConfirmationToken) +127
   NFBC.Controllers.AccountController.Register(RegisterModel model) in e:\PROJECTS\DEVELOPMENT\00-Current\NFBC\NFBC\Controllers\AccountController.cs:74 
```

所以对我来说，这说明它试图在我的用户表中插入一行，但它没有设置“Id”属性，它是表的主键。此 ID 是提供程序要求的 int 列。以下是代码的运行方式：

```
 WebSecurity.InitializeDatabaseConnection("NFBCEntitiesRaw", "User", "Id", "Email1", autoCreateTables: true);
            WebSecurity.CreateUserAndAccount(model.UserName, model.Password); 
```

Id 是一个 int 主键列，Email1 是用户名列，nvarchar(255)。

和数据库的连接字符串：

```
<add name="NFBCEntitiesRaw" connectionString="data source=localhost;initial catalog=NFBC;integrated security=True;multipleactiveresultsets=True;application name=EntityFramework" providerName="System.Data.SqlClient" /> 
```

我检查了 WebSecurity.CreateUserAndAccount、SimpleMembershipProvider.CreateUserAndAccount 和 SimpleMembershipProvider.CreateUserRow 的源代码，并且在任何这些方法中，源代码都没有为用户记录分配 ID，这将确认为什么会出现异常抛出。但是该方法不允许我指定 ID，并且当此示例针对 SQLExpress 运行时，它似乎可以很好地分配 ID...所以我不确定我在这里做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T03:23:51.003

假设您要连接到成熟的 MS SQL 数据库（如 SQL Server 2008），如果您想要自动递增，则需要将主键字段标记为**标识字段。**您需要在设计模式下打开表格（假设您使用的是*Server Management Studio*或*Visual Studio*，请右键单击表格并单击“设计”）。选择该`ID`列，然后滚动`Column Properties`窗格，直到您可以看到该`Identity Specification`属性。更改`IsIdentity`为`true`，保存，您就完成了。它应该如下所示：

![在此处输入图像描述](../Images/c196e4299fe4282947e276a82556e58e.png)

HTH。

# kinect - SDK v1.6提供的KinectSkeletonViewer中如何更改骨架颜色

> ID：13505012
> 
> 赞同：0
> 
> 时间：2012-11-22T02:17:37.713
> 
> 标签：kinect, kinect-sdk

我想更改 Kinect 示例中提供的 KinectSkeletonViewer 控件。我想公开一个属性来更改骨架（跟踪骨骼）的颜色。

我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:38:51.503

您需要修改两个文件 -`KinectSkeleton.cs`和`KinectSkeletonViewer.xaml.cs`. 您正在创建绑定，`KinectSkeleton`但是，因为这个类不是直接从查看器引用和调用的，所以您还需要在`KinectSkeletonViewer`.

**KinectSkeleton.cs** - 创建 DependencyProperties：

```
public static readonly DependencyProperty TrackedJointBrushProperty =
    DependencyProperty.Register(
        "TrackedJointBursh",
        typeof(Brush),
        typeof(KinectSkeleton),
        new FrameworkPropertyMetadata(new SolidColorBrush(Color.FromArgb(255, 68, 192, 68)), FrameworkPropertyMetadataOptions.AffectsRender));

public static readonly DependencyProperty TrackedBonePenProperty =
    DependencyProperty.Register(
        "TrackedBonePen",
        typeof(Pen),
        typeof(KinectSkeleton),
        new FrameworkPropertyMetadata(new Pen(Brushes.Green, TrackedBoneThickness), FrameworkPropertyMetadataOptions.AffectsRender)); 
```

**KinectSkeletonViewer** - 创建 DependencyProperties

```
public static readonly DependencyProperty TrackedJointBrushProperty =
    DependencyProperty.Register(
        "TrackedJointBursh",
        typeof(Brush),
        typeof(KinectSkeletonViewer),
        new PropertyMetadata(new SolidColorBrush(Color.FromArgb(255, 68, 192, 68))));

public static readonly DependencyProperty TrackedBonePenProperty =
    DependencyProperty.Register(
        "TrackedBonePen",
        typeof(Pen),
        typeof(KinectSkeletonViewer),
        new PropertyMetadata(new Pen(Brushes.Green, TrackedBoneThickness))); 
```

在**这两个文件**中定义相关的属性：

```
public Brush TrackedJointBursh
{
    get { return (Brush)GetValue(TrackedJointBrushProperty); }
    set { SetValue(TrackedJointBrushProperty, value); }
}

public Pen TrackedBonePen
{
    get { return (Pen)GetValue(TrackedBonePenProperty); }
    set { SetValue(TrackedBonePenProperty, value); }
} 
```

现在您要链接绑定。在**KinectSkeletonViewer**`OnLoad`的情况下-

 **```
var trackedJointBrush = new Binding("TrackedJointBrush");
trackedJointBrush.Source = this;
skeletonCanvas.SetBinding(KinectSkeleton.TrackedJointBrushProperty, trackedJointBrush);

var trackedBonePen = new Binding("TrackedBonePen");
trackedBonePen.Source = this;
skeletonCanvas.SetBinding(KinectSkeleton.TrackedBonePenProperty, trackedBonePen); 
```

最后，您需要查看**KinectSkeleton.cs**并将硬编码颜色的引用替换为新属性。 `trackedJointBrush`并且`trackedBonePen`在上述示例的情况下 - 替换为`TrackedJointBrush`and `TrackedBonePen`（注意大小写）。然后，您可以注释掉硬编码的变量。

您现在应该能够`KinectSkeletonViewer`在 XAML 中声明这两个属性时绑定它。

类中还定义了一些其他颜色`KinectSkeleton`。您也可以使用与上述相同的概念来绑定它们。**

# gwt - gwt firefox getAbsoluteLeft()

> ID：13505014
> 
> 赞同：10
> 
> 时间：2012-11-22T02:17:41.913
> 
> 标签：gwt, css-position

在尝试设置相对于 GWT 中的另一个元素的弹出窗口时，我看到了一种非常奇怪的行为。似乎设置弹出位置（一个独立的浮动元素）会改变我从 getAbsoluteRight() 或 getAbsoluteLeft() 之类的调用中得到的答案，因为它是一个完全不同的元素，它在页面上是静态的，并且在视觉上不会移动。

我添加了一些打印语句来检查发生了什么，所以这里是代码：

```
System.out.println(item.td);
int position = item.td.getAbsoluteRight()-offsetWidth;
System.out.println("left/right:" + item.td.getAbsoluteLeft() + "/" + item.td.getAbsoluteRight() + ". sent:" + (item.td.getAbsoluteRight() - offsetWidth) + "=" + position);
popup.setPopupPosition(position, item.td.getAbsoluteBottom());
System.out.println("left/right:" + item.td.getAbsoluteLeft() + "/" + item.td.getAbsoluteRight() + ". sent:" + (item.td.getAbsoluteRight() - offsetWidth) + "=" + position);
popup.addStyleName("bigger");
System.out.println("left/right:" + item.td.getAbsoluteLeft() + "/" + item.td.getAbsoluteRight() + ". sent:" + (item.td.getAbsoluteRight() - offsetWidth) + "=" + position);
System.out.println(item.td); 
```

这是 Chrome 上的结果

```
Menu displayed, widths: 81/340=340
<td class="hover">Daniel?</td>    
left/right:1104/1185\. sent:845=845
left/right:1121/1202\. sent:862=845
left/right:1121/1202\. sent:862=845
<td class="hover">Daniel?</td> 
```

这是 Firefox 上的结果

```
Menu displayed, widths: 81/340=340
<td class="hover">Daniel?</td>
left/right:1254/1335\. sent:995=995
left/right:1273/1354\. sent:1014=995
left/right:1273/1354\. sent:1014=995
<td class="hover">Daniel?</td> 
```

所以在调用 setPopupPosition() 后，固定元素的左/右坐标突然改变（X 坐标从 1254 变为 1273），而相关元素实际上保持在同一个位置（视觉上）。我真的不知道它是如何发生的，因为弹出窗口甚至不知道该元素的存在。更重要的是，虽然我可以始终如一地重现错误，但如果我切换弹出内容，它就不会发生......

...顺便说一句，我将firefox给出的坐标与页面截图进行了比较，返回值不仅错误，而且考虑到我的屏幕尺寸（1366x768）并且没有滚动，这是不可能的。

我可能会尝试两次设置位置，因为第二个值实际上是正确的，但我真的很想了解这里发生了什么......

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T05:57:58.853

差值正好是 150 像素。（左侧可能总共有 75 个像素）您是否检查过页面：http: [//validator.w3.org/](http://validator.w3.org/) 边距/填充（IE 中也是边框）内经常存在差异。

当我摆脱您的`getAbsoluteRight()-offsetWidth`代码时，您使用`td`来获得绝对正确。但是将位置设置在`popup`. 这应该意味着您在`popup`和`td`内容之间有一些边框/边距/填充。

和（`getAbsoluteLeft()`以及`getAbsoluteRight()` *顶部和底部）*都是根据其父元素的滚动和偏移位置计算的。

此外，空对象通常会以默认宽度结束。但是，一旦您输入内容，大小就会适应其内容。

# django - django+nginx+uwsgi，文件浏览器不上传

> ID：13505016
> 
> 赞同：2
> 
> 时间：2012-11-22T02:18:11.660
> 
> 标签：django, nginx, uwsgi, django-filebrowser

我已经将一个 django 站点从 apache+wsgi 转换为 nginx+uwsgi。除了使用文件浏览器上传文件外，一切似乎都正常工作。这确实适用于 apache+wsgi，所以我假设这是 nginx 或 uwsgi 中的配置问题。

我看到的问题是上传没有返回错误，但文件没有写入磁盘。

流量由前端 nginx 实例代理到我的 nginx 实例。

我的 nginx.conf

```
worker_processes  4;

events {
    worker_connections  1024;
}

http {
    access_log  /home/username/logs/user/access_nginx_uwsgi.log combined;
    error_log   /home/username/logs/user/error_nginx_uwsgi.log  crit;

    include mime.types;
    sendfile on;

    set_real_ip_from   127.0.0.1;
    real_ip_header     X-Forwarded-For;

    include /home/username/webserver/nginx/*.conf;

} 
```

我的虚拟主机配置是。

```
server {
    listen 127.0.0.1:26293;
    server_name domainname.com;

    access_log  /home/username/logs/user/access_tdebt.log combined;
    error_log   /home/username/logs/user/error_tdebt.log  crit;

    location /static/ {
        alias /home/username/.virtualenvs/tdebt/tdebt/site_static/;
        expires 7d;
    }

    location /media/ {
        alias /home/username/.virtualenvs/tdebt/tdebt/site_media/;
        expires 7d;
    }
    location / {
        include uwsgi_params;
        uwsgi_pass unix:///home/username/webserver/sock/tdebt.sock;
    }
} 
```

uwsgi 配置

```
[uwsgi]
chdir = /home/username/.virtualenvs/tdebt
home=/home/username/.virtualenvs/tdebt
wsgi-file = /home/username/.virtualenvs/tdebt/tdebt/webserver_config/wsgi.py
env = DJANGO_SETTINGS_MODULE=tdebt.settings
master = true
pidfile = /home/username/webserver/pid/tdebt.pid
socket = /home/username/webserver/sock/tdebt.sock
processes = 2
threads = 30
enable-threads = true
harakiri = 120
vacuum = true
reload-on-rss = 30
log-x-forwarded-for = true
idle = 300
procname-master = [username-tdebt] uWSGI Master
procname = [username-tdebt] uWSGI Worker
logto = /home/username/webserver/logs/tdebt_uwsgi.log
logdate = true 
```

任何帮助表示赞赏。如果有任何其他信息可能有帮助，请告诉我。

**更新：**

问题似乎与 django-filebrowser 和 uwsgi 有关，因为可以使用 Apache/mod_uwsgi 复制问题。

**更新：**

问题出在我使用的 django-filebrowser 的分支上。由于某种原因不适用于 uwsgi。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:54:05.080

Nginx 有一个`client_max_body_size`指令限制可以发送的 HTTP 正文的大小。它的默认值为 1 兆，所以你应该添加`client_max_body_size = 20m`或类似的东西。您不会收到错误，因为大多数浏览器不会替换 413 错误

*   [http://wiki.nginx.org/HttpCoreModule#client_max_body_size](http://wiki.nginx.org/HttpCoreModule#client_max_body_size)
*   [nginx上传client_max_body_size问题](https://stackoverflow.com/questions/4947107/nginx-upload-client-max-body-size-issue)
*   [nginx - client_max_body_size 没有效果](https://stackoverflow.com/questions/2056124/nginx-client-max-body-size-has-no-effect)

# php - 如何避免 php 进入某个目录？

> ID：13505018
> 
> 赞同：0
> 
> 时间：2012-11-22T02:18:19.463
> 
> 标签：php, linux, apache, dedicated-server

不久前，我升级到了专用服务器，为了让它对我来说更具成本效益，我决定将服务器上的一些空间租给我认识的人（朋友、家人）。我认识的一些人有其他人负责网站开发，我想保护自己免受未经授权的访问，以防止未经授权访问我或我租给的任何其他人。

我最关心的情况之一是 PHP 通过`../`从他们的根访问来访问其他用户或我。

例如，他们可以这样做：**`foreach(glob('../*/*.*') as $some_file){unlink($some_file);}`**这将删除同级用户的所有文件。

我如何避免人们做这种事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:37:23.310

这听起来像是可以通过系统管理解决的问题。

*   编辑您的 php.ini 文件，限制 open_basedir 中的值
*   确保您的用户被分配到不同的组
*   chmod 您的主目录 og-wx（例如 744、740、700 等...）
*   运行多个 apache 服务器实例，可能在不同的用户/组下

这实际上取决于您要投入多少精力以及安全性需要多么强大。

* * *

[http://www.php.net/manual/en/ini.core.php#ini.open-basedir](http://www.php.net/manual/en/ini.core.php#ini.open-basedir) http://wiki.apache.org/httpd/RunningMultipleApacheInstances

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:59:25.307

您应该考虑关于权限的 dctrucker 帖子，并确保 apache 进程（如果您使用 mod_php 运行 php）或 php 进程（如果您在 fast-cgi 上运行它）没有更改权限的权限。如果您担心安全性，我不会建议使用 base_opendir 方法，因为这样就可以使用 ini_set 来覆盖它（因此，如果使用这种方法，您也应该禁用 ini_set ）。

# xcode - 我想确保我在 X-Code4.5 中正确添加了图标

> ID：13505024
> 
> 赞同：0
> 
> 时间：2012-11-22T02:19:18.677
> 
> 标签：xcode, icons, xcode4.5

我正在 X-Code 4.5 中开发一个仅限 iphone 的应用程序，并且正在添加我的图标。我找不到专门使用 X-Code 4.5 添加图标文件的具体说明，所以我按照[这些说明](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)要求编辑 info.plist，我假设它是查看目标时的“信息”选项卡。那是对的吗？

我附上了我在图标文件下的 info/plist 中包含的七个图标的屏幕截图。如果我做得对，请告诉我。![在此处输入图像描述](../Images/3a249f0b153a1719d792afab78c59d42.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:22:29.233

> 在查看目标时编辑我假设是“信息”选项卡的 info.plist。那是对的吗？

是的。

验证您是否正确添加了图标的最简单方法是在您的设备或模拟器中运行该应用程序。如果图标显示应用程序（而不是默认的白色图标），它就起作用了。

话虽这么说，你的配置对我来说看起来不错。

# android - 即使在android中完成时间后也会触发警报

> ID：13505036
> 
> 赞同：0
> 
> 时间：2012-11-22T02:20:56.780
> 
> 标签：android, alarm

我正在创建具有工作日选项的小型警报项目。（我正在使用警报管理器）。

警报在给定的时间和日期完美触发，但问题是如果我将日期或时间更改为给定的警报时间，它也会触发任何先前的警报。

**例如。**

如果闹钟设置为周一 周三 周五 5:00 AM。- 当前时间是周日下午 6:00。

另一个闹钟设置为周一周三周五下午 4:00 - 当前时间是周日下午 6:30。

为了进行测试，我将日期更改为星期二下午 6:00 - 两个警报立即针对星期一的日程一一触发。

如何停止此特定警报并仅在下周一而不是立即触发？我还需要检查日期吗？？？

让我知道！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:35:56.467

你真的不能。警报管理器以系统时间为基础。如果您手动更改系统时间，它将就像从现在到您设置它的所有时间已经过去一样。

**编辑：**您可以找到股票警报应用程序的源代码。这是一个[链接到其中一个相关对象 Alarms](http://www.grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.2.2_r1/com/android/alarmclock/Alarms.java#Alarms.setAlarm%28android.content.Context,int,boolean,int,int,com.android.alarmclock.Alarm.DaysOfWeek,boolean,java.lang.String,java.lang.String%29)。

我没有对其进行任何测试以确保，但据我所知，他们正在存储事件应该触发的时间，如果它突然发现它是过去的，它会忽略警报而不是让它触发。要检查的其他一些相关类是 SetAlarm 和 AlarmClock，如果您想按照它们设置的方式对股票应用程序中的警报做出反应，请在 grepcode 上搜索它们。

但仍然需要指出的是，手动更改系统时间仍然可以用来操作警报。例如，如果您将闹钟设置为明天晚上 10:00，然后手动将时间跳到明天晚上 9:59。警报将在 1 分钟后触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T17:30:39.863

比较你的闹钟时间`System.currentTimeMillis()`

如果您的闹钟时间小于当前时间，则无需设置闹钟

# git - 跟踪测试时的 Git 结帐

> ID：13505042
> 
> 赞同：0
> 
> 时间：2012-11-22T02:22:23.507
> 
> 标签：git, testing

我正在（希望）压缩 Ruby gem 中的错误。

我扩展了分支，并在我的存储库上编写了一些测试，但现在我无法签出另一个提交以便在其上运行我的测试。

在保持和运行测试的同时，您如何检查或平分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:28:51.733

我不是专家，但如果没有对测试目录的硬编码引用，只需复制测试目录（从而在您的项目中创建一个未跟踪的子目录）就可以了。当您不再需要“冻结”测试时，您可以简单地删除它。

# entity-framework-4 - EntityState.Detached，我需要重新加载吗？

> ID：13505047
> 
> 赞同：0
> 
> 时间：2012-11-22T02:23:11.270
> 
> 标签：entity-framework-4

全部，

首先使用 .Net 4 和 EF 4.4 数据库。

假设我有一个 DbContext。我从这个 DbContext 加载数据，做一些事情，然后从 DbContext 中分离所有内容并处理 DbContext。

然后，我创建一个新的 DbContext（相同模型）并加载与第一个 DbContext 中的数据重叠的其他数据。在执行我的查询之前，我是否需要执行 Entry().Reload() 或者 Detatched Entities 在加载到新上下文时会自动刷新。

我问的原因是因为我在过去遇到了一个问题，当使用相同的 DbContext 时，我不得不手动重新附加处于分离状态的实体并调用 Reload。所以我想知道在这种情况下，与先前 DbContext 处于分离状态的实体是否只是简单地附加到新的 DbContext 或者它们是否也被刷新？

是的，我知道我可以设置一个简单的测试，但我很想知道是否有其他人已经这样做了，以便他们可以与 SO Universe 分享他们的发现并让其他人在一段时间内对此感到疑惑。

希望这个问题是有道理的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:11:06.627

> 将分离实体加载到新上下文中时会自动刷新吗？

不，他们不会。这很好，因为您可以附加更改的实体（这通常发生在断开连接的 n 层应用程序中）。自动刷新将删除更改。因此，如果要刷新，则必须手动重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:04:02.667

实体不会自动附加到新上下文。您必须手动附加它们。如果您只是加载重叠数据，您的实体将不会更新。您必须通过调用 Reload 或对查询使用`ObjectContext`and来强制进行此类更新。`MergeOption`如果您不附加分离的实体，而只是在新上下文中运行查询，您将获得新数据，但您将拥有两个重叠实体的实例 - 一个与旧数据分离，一个与新数据相连。

# javascript - 在javascript中提升

> ID：13505048
> 
> 赞同：4
> 
> 时间：2012-11-22T02:23:14.560
> 
> 标签：javascript, hoisting

我之前问过一个问题，有人给了我一个指南，我读了它，我看到了这个

```
 var temp = setTimeout,
  setTimeout = function() {}; 
```

他说由于 JavaScript 提升，临时将是未定义的，我不明白为什么它不应该是这样的？

```
 var temp;
    temp = setTimeout;
    setTimeout = function() {}; 
```

那么为什么它未定义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T02:29:45.683

这不一样。您的[多重`var`声明](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)还声明`setTimeout`：

```
var temp = setTimeout,
    setTimeout = function() {}; 
```

它被吊到

```
var temp; // = undefined
var setTimeout; // = undefined
temp = setTimeout;
setTimeout = function() {}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-06T03:04:33.863

**使用关键字var**声明的变量的范围是它的当前执行上下文。初始化变量时，javascript 引擎默认将变量初始化为*undefined*。像，

```
var a; //it initializes to undefined 
```

同样，当您在声明变量之前使用变量时，它现在处于运行上下文中。例如：

```
console.log(a);
var a=10; 
```

在这种情况下，javascript 引擎以下列方式运行代码，

```
var a; // a = undefined
console.log(a); // 
a =10; 
```

它将变量声明拾取到执行上下文的顶部，而不是其值。这就是你可能已经知道的提升。

在你的情况下：

```
 var temp = setTimeout,
  setTimeout = function() {}; 
```

从 function(){}，假设我们得到 value =10;

现在你的代码看起来像：

```
var temp = setTimeout,
setTimeout = 10; 
```

但是javascript以下列方式做事，

```
var temp; // temp = undefined
var setTimeout; // setTimeout = undefined
temp = setTimeout; // here temp is undefined as setTimeout is undefined
setTimeout =10; 
```

它将所有声明的变量保持在堆栈的顶部（不是它的值，而是初始化为未定义）。

如果您想了解更多信息，请访问以下链接：

[中：什么是javascript提升](https://medium.com/javascript-in-plain-english/https-medium-com-javascript-in-plain-english-what-is-hoisting-in-javascript-a63c1b2267a1)

[苏格兰人：了解javascript中的提升](https://scotch.io/tutorials/understanding-hoisting-in-javascript)

# php - 选择表的最后受影响的行以立即选择插入另一个表

> ID：13505052
> 
> 赞同：1
> 
> 时间：2012-11-22T02:24:06.683
> 
> 标签：php, mysql

这对于基于条件的情况（如果已批准或已拒绝）是必需的。提交具有 25 行 30 个字段的网格类型的表单以进行批量插入。最后插入的 25 行将插入到 temp_Orders 表中，然后根据 if 批准，需要立即将相同的数据（temp_Orders 中的最后插入行）复制到 real_Orders。

```
$query = "insert into temp_users (fname,sname,lname,email,dob,date_signup,date_expire) values ";    

$count = count($_POST['fname']);

for($x=0;$x < $count; $x++)     
{

    $fname = $_POST['fname'][$x];
    $sname = $_POST['sname'][$x];
    $lname = $_POST['lname'][$x];
    $dob = $_POST['dob'][$x];
    $email = $_POST['email'][$x];

    echo $fname . $sname . $lname . $dob . $email . '<br>';

    $emty_tbl = "TRUNCATE temp_users";

    $result_emty_tbl = mysql_query($emty_tbl);
    if(!$result_emty_tbl){
        die(mysql_error());
        @mysql_free_result($result_emty_tbl);
    }

    $query .= "(
        '$fname', 
        '$sname',
        '$lname', 
        '$email', 
        '$dob',
        '$today',
        '$nextyear')";

    /* If not last iteration, add a comma and a space */
        if ($x < ($count - 1)) {
        $query .= ", ";
    }

    $result = mysql_query($query);

}
if(!$result){
    die(mysql_error());
    @mysql_free_result($result);
} else {

    $totalRID = mysql_affected_rows();
    $lastRID = mysql_insert_id();

    echo "Total records <b>" . $totalRID . " </b>entered into the database!" . "<br>";                                  
    echo "Current record number <b>" . $lastRID . " </b>entered into the database!" . "<br>";
    echo "<form name='postbackid' method='post'>
        <input type='hidden' name='lastrecord' value='$lastRID'>
        <input type='button' value='Approved' name='approved' onclick='return Approved();'>
        <input type='button' value='Declined' name='declined' onclick='return Declined();'>                                       
        </form>";       

}   

    }
}

$postbackid=$_POST['lastrecord'];
echo $postbackid;

$sqlinsert = "INSERT INTO users (fname, sname, lname, dob, email, date_signup, date_expire)
    SELECT fname, sname, lname, dob, email, date_signup, date_expire
    FROM temp_users 
    WHERE id='$postbackid'";

$resultinsert = mysql_query($sqlinsert, $link); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:27:51.993

正如 samimi_it 所说 -> mysql_insert_id() 只会跟踪最后插入的 id(uid) 因此您需要：

1.  跟踪代码中的行 - 简单的出路，但问题最多
2.  更改您处理数据的方式，在您的临时订单行中添加一个附加列，例如 ref/order_no 等，并将其保留在您的代码中，然后如果获得批准的简单副本运行查询，则插入 real_orders（选择 where order_no = {saved order_no })
3.  或通过让一个表“订单”包含新列来删除冗余数据；approved int 0 = false, 1 = true 和 order_no（引用订单）将行插入到 orders 表中，approved = 0。然后一旦批准简单，更新订单集批准 = 1 where order_no = {order_no_from_code}。

希望这会为您指明正确的方向。

# c++ - Qt中奇怪的光标行为

> ID：13505053
> 
> 赞同：0
> 
> 时间：2012-11-22T02:24:24.983
> 
> 标签：c++, qt, cursor, mouse

在 Qt（C++、MinGW、Windows 7）中，`QCursor::setPos(...)`似乎在应用程序级别而不是在系统级别更改光标的位置。例如，如果您拦截`mouseMoveEvent`并取消光标的移动（`setMouseTracking(false)`只有在按下鼠标按钮时才进行取消），那么只要您保持按下鼠标按钮，您就不会看到光标移动。但是，当您松开按钮并稍微移动时，光标会移动到您没有阻止其移动的位置。这种行为正常吗？如何绕过它，以便在系统级别更改鼠标光标？

如果不够清楚，我可以给出代码片段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T03:09:19.093

移动 QWidget 的光标始终使用小部件的坐标。对于全局鼠标定位，您应该改用桌面小部件 (QDesktopWidget)。您可以通过`QApplication::desktop()`静态函数获得它。例子：

```
QApplication::desktop()->cursor().setPos(0,0); 
```

这应该将鼠标光标移动到桌面的左上角。

# android - 如何动态检查 XML 是否包含 UI 元素

> ID：13505054
> 
> 赞同：2
> 
> 时间：2012-11-22T02:24:24.810
> 
> 标签：android, xml, button, view, android-activity

我有多个 XML 文件需要一个 Activity 用于其视图，该 Activity 将从创建时传递给它的名称加载一个 XML 文件。这些 XML 文件将包含一组 UI 元素，例如具有标准化名称（即 UpBtn、DownBtn）的按钮。

视图会有所不同（包含不同的按钮名称），但我希望能够检查 XML 中是否存在特定名称的按钮，以便我可以在 Activity 中执行特定操作。

有没有办法做到这一点，还是我必须求助于每个 XML 的活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:46:46.757

您可以使用`findViewById( id )`，如果它返回 null 则您指定的 id 不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T02:50:23.743

在您的 xml 中，为您的视图提供一个唯一的 id

```
<Button
    android:id="@+id/upBtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"> 
```

在您的活动中，如果您已经使用其中一个 XML 文件调用了 setContentView()，则可以调用 findViewById() 通过其 id 查找特定视图：

```
Button upBtnView = (Button) findViewById(R.id.upBtn); 
```

如果您提供的 xml 中存在此视图，则 upBtnView 将是您想要的按钮；否则， upBtnView 将为空，您将知道它不在您的布局中。

# ruby-on-rails - Rails 访问连接表中的信息

> ID：13505055
> 
> 赞同：0
> 
> 时间：2012-11-22T02:24:27.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个 Rails 应用程序，我在其中使用连接表来获取用户歌词，反之亦然。出于某种奇怪的原因，我无法获得用户歌词的数量。当我从用户模型中删除 through 选项时，它可以正常工作，但我需要它通过共享来工作，以便用户可以共享歌词。有人有类似的问题或解决方案吗？

**用户.rb**

```
has_many :shareships
has_many :lyrics, through: :shareships, dependent: :destroy 
```

**歌词.rb**

```
has_many :shareships
has_many :users, through: :shareships, dependent: :destroy 
```

**分享.rb**

```
attr_accessible :lyric_id, :user_id

belongs_to :lyric
belongs_to :user 
```

这是我在视图中用来显示歌词计数的代码

```
#Returns 0
<%= @user.lyrics.count %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:29:31.063

您可以使用获取数据

```
<%= total_user_lyrics = @user.lyrics.count %> 
```

如果`user`没有，`lyrics`那么它将返回`0`。所以首先检查

**在您的控制台中**

`@user.lyrics`它会返回什么检查它，如果它会返回 nil 那么当你尝试时`@user.lyrics.count`。你会得到`0`因为`@user.lyrics`没有记录。

**反之亦然**

```
<%= total_lyric_users = @lyric.users.count %> 
```

# visual-studio-2010 - msbuild 特定项目配置。一个简单的解决方案？

> ID：13505060
> 
> 赞同：2
> 
> 时间：2012-11-22T02:25:17.137
> 
> 标签：visual-studio-2010, msbuild, project, config

我有一个包含许多项目的**解决方案**文件 K.sln。使用vs2010。

我只需要**编译其中**的三个 C++ 项目，比如 X、Y、Z、T，但**只需要一些配置**。

**我怎么做？**

更详细的，我需要

*   仅在“调试”配置中构建 X
*   仅在“发布”中清理 Y
*   仅在“静态调试”中重建 T
*   在“Release Optim”中重新链接 Z（我可以不知道这一点）

有没有办法从单个批处理文件或命令行中完成，或者甚至更好地创建一个简单的合适的 msbuild 项目文件？或两者兼而有之？ **独立**于如何在解决方案文件中设置依赖项。

有人可以为这样简单的任务提供 msbuild 项目的文本吗？

是否可以**并行**运行这些任务？

已经失去了足够的时间环顾四周并尝试实施它，有人可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:04:56.603

您可以设置您的 msbuild.xml 文件来执行您想要的所有操作。

你会需要：

[调试或发布配置](http://code.dblock.org/how-to-do-a-debug-release-or-both-builds-with-msbuild)，以便能够设置您需要的目标构建。

[将参数传递给 MSBuild](https://stackoverflow.com/questions/232052/msbuild-specifying-a-target-from-the-command-line)以指定特定目标，例如仅为项目“Y”运行 clean

一旦所有的目标和条件设置，你会做这样的事情：

```
 <Target Name="MakeMyStuff">
    <CallTarget Targets="DebugX" />
    <CallTarget Targets="ReleaseY" />
    <CallTarget Targets="StaticDebugT" />
    <CallTarget Targets="ReleaseOptimZ" />
  </Target> 
```

在您需要运行如下命令后：

msbuild msbuild.xml /t:MakeMyStuff (/p:BuildCmd=Clean) 如果你想添加参数

或者只是一个特定的

msbuild msbuild.xml /t:DebugX

祝你好运

# c++ - Inventory.h 中向量的添加方法出错

> ID：13505064
> 
> 赞同：0
> 
> 时间：2012-11-22T02:25:53.130
> 
> 标签：c++, vector, compiler-errors

嘿，我为我的库存设置了一个标题和一个 .cpp 文件。我使用向量。我不能使用向量库中的任何 push/ 或 pop 方法。我想主要使用它们。我也遇到了与我所做的 add 方法有关的 3 个错误，以便我可以添加到 main 中的向量中。

谁能帮我理解为什么我不能使用向量函数以及为什么会出现这些错误。

这是我的代码： **Inventory.h**

```
 #ifndef INVENTORY_H
    #define INVENTORY_H
    #include <string>

class Inventory
{
public:
    //Constructor
    Inventory();

    //Methods.
    std:: string add(string item);
    void displayInventory();
    void showInventory();
private:
    //Data members
    };

#endif //INVENTORY_H 
```

**库存.cpp**

```
 #include "Inventory.h"
    #include <iostream>
    #include <vector>   //  To enable the use of the vector class.
    #include <string>

using namespace std;
vector<string> inventory;
vector<string>::iterator myIterator;
vector<string>::const_iterator iter;

Inventory::Inventory()
{

}

string Inventory :: add(string item)
{
inventory.push_back(item);
return item;
}

void Inventory:: showInventory()
{
char input[80];
    cin >> input;
    char inventoryRequest[] = "i";
    int invent = strcmp (input,inventoryRequest);
    //compare the player input to inventoryRequest (i) to see if they want to look at inventory.
    if(invent == 0)
    {
        displayInventory();
    }

}
void Inventory:: displayInventory()
{
//vector<string> inventory;
    cout<< "You have " << inventory.size() << " items.\n";
    cout << "\n******Inventory******";
    cout<< "\nYour items:\n";
    for (int i= 0; i< inventory.size(); ++i)
        cout<< inventory[i] << endl;
} 
```

**错误**

```
Error   1   error C2061: syntax error : identifier 'string' c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.h   17  1   MaroonedCA2
Error   2   error C2061: syntax error : identifier 'string' c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.h   17  1   MaroonedCA2
Error   3   error C2511: 'std::string Inventory::add(std::string)' : overloaded member function not found in 'Inventory'    c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.cpp 19  1   MaroonedCA2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T02:29:33.477

`string`来自`std`命名空间

改变

```
std::string add(string item); 
```

到

```
std::string add(std::string item); 
```

有几个地方可以加强：

1.  在 Inventory.cpp 中，最好不要`using namespace std;`为变量等提供完整的命名`std::vector`空间`std::string`。

2.  `vector<string> inventory;`可以在 Inventory 类中移动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T02:30:22.283

您的问题在标题中，而您缺少`using namespace std`. 我*从来没有*使用过这个命令。我认为最好明确命名空间，这样可以避免此类问题。

```
// Compiler knows what std::string is, but not string on it's own.
std:: string add(string item); 
```

如果这是我的项目，我会删除`using namespace std`并`std::`在任何地方使用。

此外，您没有正确使用您的课程。您有对 .cpp 文件中的全局变量进行操作的成员方法。

```
vector<string> inventory; 
```

应该是类的*私有成员*`Inventory`。

**迭代器**

为了解决您的评论，我想说的是您不需要声明这样的迭代器来使用它们，除非您需要*存储*一个迭代器以供以后使用（出于某种原因。虽然当迭代器是无效）。以下是您可以使用它们的几种方法。

**类型定义**

使用 typedef 让你的生活更轻松。

```
typedef std::vector<std::string> StringVec;
typedef StringVec::iterator StringVecIter; 
```

现在您可以在循环中使用它们。

```
for(StringVecIter it = inventory.begin(); iter != inventory.end(); ++it)
{ ... } 
```

**汽车**

执行这些循环的更简单方法是使用`auto`关键字。编译器将适当的类型分配给变量，在这种情况下是`std::vector<std::string>::iterator`

```
for(auto it = inventory.begin(); it != inventory.end(); ++it)
{ ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T02:35:48.647

摆脱该`using namespace std;`语句（您永远不应该使用它！）并正确限定您正在使用的命名空间项，例如：

**库存.h**

```
#ifndef INVENTORY_H
#define INVENTORY_H
#include <string>

class Inventory
{
public:
    //Constructor
    Inventory();

    //Methods.
    std::string add(std::string item);
    void displayInventory();
    void showInventory();
private:
    //Data members
};

#endif //INVENTORY_H 
```

**库存.cpp**

```
#include "Inventory.h"
#include <iostream>
#include <vector>   //  To enable the use of the vector class.
#include <string>
#include <algorithm>

std::vector<std::string> inventory;

Inventory::Inventory()
{
}

std::string Inventory::add(std::string item)
{
    inventory.push_back(item);
    return item;
}

void Inventory::showInventory()
{
    char input[80];
    std::cin >> input;
    char inventoryRequest[] = "i";
    //compare the player input to inventoryRequest (i) to see if they want to look at inventory.
    if (strcmp(input, inventoryRequest) == 0)
    {
        displayInventory();
    }
}

void displayInventoryItem(const std::string &item)
{
    std::cout << item << std::endl;
}

void Inventory::displayInventory()
{
    std::cout << "You have " << inventory.size() << " items." << std::endl;
    std::cout << std::endl;
    std::cout << "******Inventory******" << std::endl;
    std::cout << "Your items:" << std::endl;
    std::for_each(inventory.begin(), inventory.end(), displayInventoryItem);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T02:31:16.273

将您的清单、myIterator 和 Iter 放在您的类 Inventory 中。

# matlab - 获取 k-means 的特定标签（包括数据）

> ID：13505065
> 
> 赞同：0
> 
> 时间：2012-11-22T02:25:58.603
> 
> 标签：matlab, k-means, image-segmentation

首先，我想描述一下我在 Matlab 中使用 kmeans 的问题。我通过鼠标选择一个点并将其用于集群初始化。这工作正常。

数据分割后，我将数据重新整形为适当的样式，因为我需要一个矩阵。现在我只想选择用户通过鼠标选择数据的集群。因此，我选择鼠标坐标的索引来选择要分割的标签。由于其他未连接或靠近相关数据的额外数据，也得到了相同的标签。

我只想选择 8 个邻域中的连接组件。

所以这是我到目前为止的代码片段：

```
flatimg = double(reshape(croppedimg,size(croppedimg,1)*size(croppedimg,2),size(croppedimg,3)));
% kmeans
[idx, clusters] = kmeans(flatimg,2,'start',[seedpoint1(3);seedpoint2(3)]);
% form it back to a matrix
k=reshape(idx,size(croppedimg,1),size(croppedimg,2)); 
%convert point, which is part of the label I want to linear index
selectedobjectpoint = sub2ind(size(croppedimg),seedpoint1(2),seedpoint1(1));
hgplabel = k(selectedobjectpoint); 
idx_object = find(k, hgplabel);
% also tried: idx_object = find(k == hgplabel); 
```

我添加了一个屏幕截图，它显示了的直接输出`kmeans`： ![km均值输出](../Images/ca45e189102e2edb8b9598c4cc9f09cc.png) 所以我的目标是在这里只获得“白色”或“黑色”的。

帮助或建议表示赞赏。如果您对片段或目标有任何疑问，请随时提问。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:17:23.187

我认为 FIND 命令让你失望。你想要这样的东西：

```
logicalImage = k == hgplabel;
bwImg = bwlabel(logicalImage);
imagesc(bwImg) 
```

FIND 将输出 k == hgplabel 的索引。你想要一个由零和一个组成的矩阵，其中 k 取那个值（我认为）。

如果您只想要其中的连通分量，则 bwlabel 的输出将包含每个连通分量的唯一整数，因此 imagesc(bwImg == 1) 将仅显示分量 1。您可以指定连通性

# java - POI API 的 getRow() 和 getLastCellNum()

> ID：13505066
> 
> 赞同：0
> 
> 时间：2012-11-22T02:26:01.973
> 
> 标签：java, excel, class, methods, apache-poi

我正在使用 Java 中的 Excel (xlsx)。我从来不理解`getRow(int RowNum)`. “它返回逻辑行（基于0）”是什么意思？请参见下面的代码。

```
row=sheet.getRow(0); 
```

我正在尝试从第 3 行第 1 列获取数据。显然它起作用了，我得到了我需要的结果（只有在编写了一些进一步的代码之后）。

但是，我的问题是用户如何设法从第三行获取数据？当 rownum 为 0 时（如您所见）。我期待它会（行）坚持到第 0 行，即。Excel 工作表中的第一行。

`getLastCellNum()`XSSFRow 类的方法 - “获取此行中包含的最后一个单元格的索引 PLUS ONE”是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:38:50.940

对于`getRow(int RowNum)`，我认为逻辑行意味着它是物理工作表上的逻辑视图，但是如果您更改物理行，它将不会相应地更新。

例如：

```
Row a = sheet.getRow(5);
Row b = sheet.createRow(0); // every physical row gets shifted down
System.out.println(a.getRowNum()); // still prints 5, logical row has not been updated 
```

关于`getLastCellNum()`，我认为这只是意味着它返回行中的单元格数（包括空白单元格）。恰好底层数据模型存储了这个值，并按原样返回，也方便对单元格进行迭代……</p>

# arrays - 不正确的 res.render 使用 express 和 node

> ID：13505067
> 
> 赞同：0
> 
> 时间：2012-11-22T02:26:22.987
> 
> 标签：arrays, node.js, express, pug

我想使用express和jade渲染以下内容：

```
function(output) {
   for (i=0;i<output.entities.length;i++){
      console.log(output.entities[i].uuid);
   }
res.render('errCodes.jade', {title : 'Error Codes', entry: output.entities});
}, 
```

玉看起来像这样：

```
items = entry
    each item, i in items
    li <a href="/#{i}">#{item}</a> 
```

控制台日志看起来不错，但是无论我尝试什么，我都无法让翡翠页面看起来不错。目前，有两个链接读取

```
[object Object]
[object Object] 
```

这是预期的。但是，我希望显示 ID 的两个链接，但每次尝试时，我要么将 ID 的每个字符作为其自己的链接，要么将上述对象作为对象。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:30:24.243

你原来的缩进正确吗？还是只是在这里看起来不对？

```
items = entry
  each item, i in items
  li <a href="/#{i}">#{item}</a> // this should be further right 
```

你可以用纯玉来达到同样的效果：

```
items = entry
  each item, i in items
    li
      a(href="/#{i}") #{item} 
```

如果您的数组如下所示

```
output.entities = [{ uuid: 1234 }, { uuid: 5678 }]; 
```

你的玉应该是这样的

```
items = entry
  each item, index in items // iterate over array
    li
      a(href="/#{index}") #{item.uuid} 
```

`index`将是 1,2,3,4,... 等。

# jquery - jQuery：选择子元素但我想更改父元素？

> ID：13505074
> 
> 赞同：0
> 
> 时间：2012-11-22T02:27:21.290
> 
> 标签：jquery, selector, addclass, removeclass

我对 jQuery 有疑问

```
<ul class="tabs">
    <li class="active"><a href="#doc-new">Home</a></li>
    <li><a href="#doc-fav">Profile</a></li>
    <li><a href="#doc-read">Messages</a></li>
</ul> 
```

如何使用 jQuery 为`<li>`具有`<a>`href is *doc-read*设置活动？

```
<ul class="tabs">
        <li><a href="#doc-new">Home</a></li>
        <li class="active"><a href="#doc-fav">Profile</a></li>
        <li><a href="#doc-read">Messages</a></li>
</ul> 
```

我可以找到*#doc-read*但不知道如何`addClass`做父母`<li>`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T02:35:39.510

> *“如何使用 jQuery 为具有 id 的文档设置活动`<li>`？`<a>`”*

那不是“id”，而是“href”。但无论如何，你会这样做：

```
$('a[href="#doc-read"]').parent().addClass("active"); 
```

但是，如果这个想法是将 li 设置为对于刚刚单击的任何锚元素都处于活动状态，那么您将执行以下操作：

```
$(document).ready(function() {
    $("ul.tabs a").click(function() {          // when any anchor clicked
        $("ul.tabs li").removeClass("active"); // remove current "active"
        $(this).parent().addClass("active");   // set "active" on parent
                                               // of clicked anchor
    });
}); 
```

演示：http: [//jsfiddle.net/tsSQq/](http://jsfiddle.net/tsSQq/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T02:56:22.607

提供锚标签 ID，例如“doc-read”。

```
$(".tabs li").removeClass('active')
$(".tabs li").find("#doc-read").parent('li').addClass('active'); 
```

在这里试一试 - [jsFiddle](http://jsfiddle.net/wA7J4/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T02:51:47.640

我在下面找到了该查询，并且它运行良好：

```
$('li:has(a[href="#doc-fav"])').addClass('active'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T02:33:20.690

只需使用 addClass() 和 removeClass()

```
$(".tabs>li:eq(0)").removeClass("active");
$(".tabs>li:eq(1)").addClass("active"); 
```

# java - 在Java中分析全角或半角字符

> ID：13505075
> 
> 赞同：3
> 
> 时间：2012-11-22T02:27:35.903
> 
> 标签：java

我想分析 char 数组中的全角或半角字符。

例如：

char [] 密码 = {'t','e','s','t','思','题'};

此 char 数组中有全角和半角字符。

半宽 = t,e,s,t

全宽 = 思，题</p>

那么，如何在java中分析char数组的全宽或半宽呢？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T03:31:16.197

JDK 包含一个提到全角/半角的类：`InputSubset`

[http://docs.oracle.com/javase/7/docs/api/java/awt/im/InputSubset.html](http://docs.oracle.com/javase/7/docs/api/java/awt/im/InputSubset.html)

不幸的是，没有办法检查哪个字符属于哪个子集。

尽管如此，显然全宽/半宽对于 unicode 来说是一个定义明确的概念。互联网上某处可能有准确的规格。

[http://en.wikipedia.org/wiki/Halfwidth_and_fullwidth_forms](http://en.wikipedia.org/wiki/Halfwidth_and_fullwidth_forms)

[http://en.wikipedia.org/wiki/DBCS](http://en.wikipedia.org/wiki/DBCS)

我想你的用例说 0x00-0xFF 字符是半角就足够了；其他字符是全角的，除了 unicode 块“半角和全角形式”中的半角字符

```
boolean isHalfWidth(char c)
{
    return '\u0000' <= c && c <= '\u00FF'
        || '\uFF61' <= c && c <= '\uFFDC'
        || '\uFFE8' <= c && c <= '\uFFEE' ;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-27T04:32:21.933

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T02:41:42.463

字符的可见宽度实际上取决于您查看它的字体，Java 中的字符相对于字体是抽象的。

如果您要确定特定字符是否是 CJK（或语言子集等）字符，您可以尝试查找这些字符在 UTF-16 中采用的位模式范围（我认为这就是 java 使用的？）和确保每个`char`值都在该范围内。

不过，我可能在这里完全找错了树，所以如果这就是你所追求的，请告诉我。

**编辑**：实际上，在查看了trashgod的链接之后，现在我不确定java编码是否完全抽象。不过，字符比较可能仍然是一个不错的方法，因为字符文档中有全角十六进制代码的定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T02:59:05.723

您似乎在谈论字符内部表示中的位数，而不是另一个答案中提到的“可见宽度”。

Java 中的 Character 类和 char 原始类型都使用标准的 Unicode；它处理拉丁文、中文和许多其他语言。一些 unicode 字符是 16 位的；有些更多。

所以我*认为*你的问题的答案是：继续分析你想要的——你的数组包含一些 16 位的值，可能还有一些大于 16 位的值。如果不知道更多关于你想对角色做什么，就很难更明确了。

编辑：我的错误，char 原语只处理 16 位 unicode 值。但是一个字符对象数组将处理大于 16 位的 unicode 值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-14T03:58:24.660

这实际上取决于您如何定义全角字符。Java String 的内部表示是 UTF-16，所以每个字符的范围是 1 到 2^16。如果使用[unicode](https://en.wikipedia.org/wiki/Halfwidth_and_fullwidth_forms)的定义定义全角字符，则只需检查 char 是否在 unicode 全角字符块的范围内。但该块不包括一些常见的中文文本，例如‵。</p>

# ruby-on-rails - 如何检查查询是否受限？

> ID：13505077
> 
> 赞同：1
> 
> 时间：2012-11-22T02:27:53.050
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, limit

我正在使用 Ruby on Rails v3.2.2，我想检查查询是否受到限制。那是：

```
Article.where(...).limit(10) # This is a limited query
Article.where(...)           # This is not a limited query 
```

有没有办法检查是否`limit`设置？

* * *

*注意*`limit`：如果尚未设置，我想检查以便为查询动态设置它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T02:31:44.393

您可以检查 Arel 对象的`limit`.

```
Article.where(...).limit(10).arel.limit.present?  # true
Article.where(...).arel.limit.present?            # false 
```

# python - 有一些严重错误的网络助手

> ID：13505081
> 
> 赞同：1
> 
> 时间：2012-11-22T02:28:21.123
> 
> 标签：python, python-3.x, sqlalchemy, pyramid, pagination

在我的 virtualenv 中，我安装了 WebHelpers，但出现了一些错误，但安装过程最终完成。

当我启动 Pyramid Web 应用程序时，我仍然收到此错误：

```
 File "D:\Py3Env\lib\site-packages\webhelpers-1.3-py3.2.egg\webhelpers\paginate
.py", line 250
    raise Exception, "__getitem__ without slicing not supported"
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:50:48.687

WebHelpers 包（还）不兼容 python 3。

Python 3 移除了对使用类型和值引发异常的支持。它应该改为：

```
raise Exception("__getitem__ without slicing not supported") 
```

不幸的是，WebHelpers 源代码中有更多内容使得将其移植到 Python 3 成为一项艰巨的任务，尤其是对于 Python 新手而言。

您要么必须切换到使用 Python 2，要么完全使用不同的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-07T17:36:25.333

截至 2015 年，[WebHelpers 2](http://webhelpers2.readthedocs.io/en/latest/index.html)已经发布。它与 Python 3 兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-18T15:21:18.557

# 从 Python 2 到 Python 3

*   *WebHelpers*项目仅与 Python 2 兼容，不会**更新**到**Python** 3！
*   作为**Python 3**的替代方案，您可以使用后继者*WebHelpers2*（[官方网站](https://webhelpers2.readthedocs.io/en/latest/)）

### 关于`webhelpers.paginate`

*   由于作者在 PyPi 上创建了一个额外的模块，简称为 Paginate *（*官方[网站](https://webhelpers2.readthedocs.io/en/latest/migrate.html#webhelpers-paginate)）[[来源](https://webhelpers2.readthedocs.io/en/latest/migrate.html#webhelpers-paginate)] ，因此该软件包`webhelpers.paginate`已从*WebHelpers2中完全删除*

 *因此，在使用**Python 3**时，只需使用`pip install paginate`*

# vim - 虚拟机。向终端发送命令？

> ID：13505084
> 
> 赞同：2
> 
> 时间：2012-11-22T02:28:40.057
> 
> 标签：vim

我正在尝试将 vim 配置为我的主要编码程序。我已经想出了如何编译单个文件，但是当我从 vim 中执行程序时，我不断收到 127 错误代码。我`a`在我的盒子上别名为`./a.out`，但是当我从 vim 发出命令`:!a`时，它不起作用。`:!./a.out`做。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T04:46:07.123

*别名在仅由交互式*shell提供的 rc 文件中定义，并且仅在交互模式下工作（vim*确实*将所有内容传递给 shell，它从不直接使用 fork+execve 执行除了 shell 之外的任何内容）。

默认情况下，从 vim 启动的 shell 以非交互模式启动，因此`bashrc`不会读取，也没有定义别名（尽管即使定义了别名，它们也不会在非交互模式下使用）。你可以设置

```
set shellcmdflag=-ic 
```

, 然后 shell 将以交互模式启动，并`.bashrc`读取带有您别名的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T02:31:16.933

~~别名是你的 shell 的一个特性（比如，`bash`）。`!`运算符直接执行一个文件——shell 永远不会看到它，也不能对其进行别名扩展。~~（编辑：见 ZyX）

如果您想让执行`./a.out`变得容易，您可以执行以下操作：

```
command XX !./a.out 
```

然后你可以做`:XX`。或者，

```
nnoremap X :!./a.out<CR> 
```

那么一个键`X`就足够了。

另一种选择（出于安全原因不赞成）是将当前目录添加到您的`PATH`：

```
PATH="./$PATH" 
```

这将允许您运行您的程序，`a.out`而不是`./a.out`. 如果然后使用（与语言相关的同构）`-o`开关编译程序，则可以将其命名为`a`：

```
gcc -o a foo.c 
```

鉴于此，`!a`将工作。使用风险自负。

编辑：ZyX 是正确的。:) 我将在此处留下答案以获取其他信息。

# objective-c - 您如何获得等效于在 NSButton 上显示的键？

> ID：13505085
> 
> 赞同：0
> 
> 时间：2012-11-22T02:28:43.710
> 
> 标签：objective-c, nsbutton

我设置了等效键但没有设置图像，但等效键未显示在 NSButton 上。我如何让它显示？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:34:04.980

我不相信你可以在 Mac 上。按钮文本中字符的下划线（显示快捷键）是 Windows 专用的。

# java - Java 套接字问题

> ID：13505087
> 
> 赞同：2
> 
> 时间：2012-11-22T02:28:53.210
> 
> 标签：java, sockets, client, chat, communication

所以我的程序的最终结果是一个更新的游戏客户端，但到目前为止我拥有的是一个能够接受多个连接的服务器，以及一个连接到服务器的客户端。这是客户端部分的代码：

```
public void client() {
    Socket socket = null;
    ObjectInputStream in = null;
    ObjectOutputStream out = null;

    try {
        socket = new Socket(IP, Integer.parseInt(port));
        in = new ObjectInputStream(socket.getInputStream());
        out = new ObjectOutputStream(socket.getOutputStream());
    } catch (Exception e) {
        e.printStackTrace();
    }
    do {
        // have a conversation
        try {
            message = (String) in.readObject();
            System.out.println("\n" + message);
        } catch (Exception e) {
            System.out.println("\n idk wtf that user sent!");
        }
    } while (!message.equals("CLIENT - END")); // When the user types "END"

    System.err.println("CLOSED!!!");
    System.exit(0);
} 
```

这是服务器部分的代码：

```
public void run() {
    // where everything happens
    System.out.println("server- connected");
    try {
        in = new ObjectInputStream(socket.getInputStream());
        out = new ObjectOutputStream(socket.getOutputStream());

        out.writeObject("hi");
        out.flush();
        Thread.sleep(5000);
        out.writeObject("close");
        out.flush();
        System.out.println("closed");
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

现在，我遇到了这个问题，当我的服务器发送对象时`"hi"`，客户端似乎没有收到它。我不完全确定它是否确实如此，但如果它得到它，它不会像我想要的那样打印出来。我以前制作了一个做同样事情的聊天程序，我几乎把它复制到这个，但它不是交流。我得到的最多的是确认它们已连接。我不确定发生了什么，但任何帮助将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T02:40:21.800

*在 ObjectInputStreams之前*创建 ObjectOutputStreams并在创建后立即刷新它们。

ObjectInputStream的*构造函数*读取流标头。这个流标头是由 ObjectOutputStream 的*构造函数*编写的（有点丑陋的实现，但它就是这样）。如果您首先构建 OIS，它们会挂起等待标头字节。

# java - Scanner 变量在 try-catch 块之外不起作用

> ID：13505091
> 
> 赞同：0
> 
> 时间：2012-11-22T02:29:15.027
> 
> 标签：java, try-catch

我试图`s.next()`在 try-catch 块之后声明，但它不起作用！只有在 try 块内`s`时才会有下拉菜单。

我不想集中解析输入，在 try 块中采取适当的操作，因为它们不会抛出 FNFE 和 IOE。我可以在这里做什么？

```
public static void main(String[] args) 
      {
        // TODO Auto-generated method stub

        //Open file; file name specified in args (command line)
        try{
            FileReader freader = new FileReader(args[0]);
            Scanner s = new Scanner(freader);

        }catch(FileNotFoundException e){
            System.err.println("Error: File not found. Exiting program...");
            e.printStackTrace();
            System.exit(-1);
        }catch(IOException e){
            System.err.println ("Error: IO exception. Exiting...");
            e.printStackTrace();
            System.exit(-1);
        }
        // if i try to declare s.next() here it would not work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:34:18.680

我认为您的意思是您想*使用*s.next() 并且它不起作用。

为此，将 s 声明为 try/catch 块之外的变量，并在此处将其设置为 null。然后将其分配到您现在分配的位置，但没有声明。如果我的假设是正确的，那么您的问题是 s 不再是 try/catch 之外的活动变量，因为它是在该块中声明的。

```
FileReader freader = null;
Scanner    s       = null;
try { freader = new FileReader(args[0]); // risk null pointer exception here
      s = new Scanner(freader);
    }
catch { // etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T02:34:48.087

因为作为类`s`实例的变量`Scanner`仅限于`try`块。如果您想在块*外*`s`访问，请在 try catch 之外声明它。*`try-catch`*

 *```
 Scanner s = null;
 try{
        FileReader freader = new FileReader(args[0]);
         s = new Scanner(freader);

    }catch(FileNotFoundException e){
        System.err.println("Error: File not found. Exiting program...");
        e.printStackTrace();
        System.exit(-1);
    }catch(IOException e){
        System.err.println ("Error: IO exception. Exiting...");
        e.printStackTrace();
        System.exit(-1);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T02:45:14.197

在 Java 中，变量由它们声明的块限定。由于您的 Scanner 是在块内构造的`try`，因此在块外是不可见的。

您是否有任何理由要在此块之外进行实际扫描操作？在 Java 7 中，一个常见的习惯用法是*try-with-resources*模式：

```
try (Scanner s = new Scanner(new FileInputStream(file)) {
  //Do stuff...
} 
```

这将自动关闭扫描仪资源。实际上，您可能会泄漏它，因为`finally`您的代码示例中没有任何块。*

# silverlight - 我可以在 ItemTemplate 中更改 DataTemplate 的 VisualState 吗？

> ID：13505092
> 
> 赞同：7
> 
> 时间：2012-11-22T02:29:31.667
> 
> 标签：silverlight, windows-phone-7, xaml, datatemplate, visualstatemanager

我在 DataTemplate 中有一些控件，我想控制它的按下状态行为。我做了以下我刚刚在 DataTemplate 中放入 VisualStateManager 的地方，但它似乎不起作用。我认为有可能理解我在下面尝试做的事情。是否可以在 DataTemplate 标签内内联？

```
<ItemsControl ItemsSource="{Binding Items}">
    ....
    <ItemsControl.ItemTemplate>
        <DataTemplate>
          <Grid ...>
             <VisualStateManager.VisualStateGroups>
                 <VisualStateGroup x:Name="CommonStates">
                     ...
                     <VisualState x:Name="Pressed">
                         <Storyboard>
                             <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderThickness" Storyboard.TargetName="GridItemBorder">
                                 <DiscreteObjectKeyFrame KeyTime="0" Value="3"/>
                              </ObjectAnimationUsingKeyFrames>
                         </Storyboard>
                     </VisualState>
                 </VisualStateGroup>
             </VisualStateManager.VisualStateGroups>
             <Border x:Name="Border" ...>
                 ...
             </Border>
          </Grid>
      </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:50:24.740

简短的回答是，您所针对的控件类型没有“按下”视觉状态——因此，虽然您可以在视觉状态管理器中引用任何状态，但这并不重要，因为控件的代码永远不会把它进入那个状态。

您可以通过查看控件的定义（使用`TemplateVisualState`属性声明它们）或查看[MSDN 上的此部分](http://msdn.microsoft.com/en-us/library/cc278069%28v=vs.95%29.aspx)来查看控件支持哪些视觉状态。

去这里的方法可能是使用`Button`（或您编写的覆盖`[ButtonBase][2]`），因为它具有内置的“按下”视觉状态。您只需为其编写一个提供布局/样式的控制模板你所追求的。

* * *

**编辑**这是一个例子：

**控制模板（资源部分）。** 这是控件的控件模板`Button`，但它并不是真正的按钮。我只是用它来利用“按下”视觉状态功能。

```
 <ControlTemplate x:Key="MyButtonTemplate" TargetType="Button">
        <Grid>
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Pressed">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderThickness)" Storyboard.TargetName="GridItemBorder">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="3"/>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Border x:Name="GridItemBorder" BorderBrush="Orange" BorderThickness="1" Background="White">
                <ContentPresenter Content="{TemplateBinding Content}" />
            </Border>
        </Grid>
    </ControlTemplate> 
```

**物品控制**

将项目模板定义为使用上述 ControlTemplate 的“按钮”。

```
 <ItemsControl ItemsSource="{Binding SelectedItems}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Button Template="{StaticResource MyButtonTemplate}" Content="{Binding}" />
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

# python - 如何找到以双下划线开头的 python 方法？

> ID：13505095
> 
> 赞同：0
> 
> 时间：2012-11-22T02:29:49.280
> 
> 标签：python

我正在学习 python，但是当我看到以下划线开头的函数或变量时，我会感到困惑，例如：

`__getAttributes__` `__dict`

如何找到以双下划线开头的所有功能和属性？能更好地理解它们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T02:35:45.650

使用[`dir`](http://docs.python.org/2/library/functions.html#dir)内置功能。它返回给定对象中所有属性和方法的列表。这也是快速发现功能或调用方法名称的好方法。例子：

```
print dir("this is a string")

['__add__', '__class__', '__contains__', '__delattr__', '__doc__', '__eq__', '__
format__', '__ge__', '__getattribute__', '__getitem__', '__getnewargs__', '__get
slice__', '__gt__', '__hash__', '__init__', '__le__', '__len__', '__lt__', '__mo
d__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__',
 '__rmod__', '__rmul__', '__setattr__', '__sizeof__', '__str__', '__subclasshook
__', '_formatter_field_name_split', '_formatter_parser', 'capitalize', 'center',
 'count', 'decode', 'encode', 'endswith', 'expandtabs', 'find', 'format', 'index
', 'isalnum', 'isalpha', 'isdigit', 'islower', 'isspace', 'istitle', 'isupper',
'join', 'ljust', 'lower', 'lstrip', 'partition', 'replace', 'rfind', 'rindex', '
rjust', 'rpartition', 'rsplit', 'rstrip', 'split', 'splitlines', 'startswith', '
strip', 'swapcase', 'title', 'translate', 'upper', 'zfill'] 
```

这些方法通常由内置函数或运算符使用。例如`__eq__`，测试两个对象是否相等，并被所有需要比较值的运算符和函数使用。

这些“魔术方法”有很多文章和指南，例如[http://www.rafekettler.com/magicmethods.html](http://www.rafekettler.com/magicmethods.html)。

编辑：还可以[查看有关这些方法的重要官方文档](https://stackoverflow.com/questions/13505095/how-can-find-python-methods-with-start-with-double-underscores#comment18484644_13505095) [的](https://stackoverflow.com/questions/13505095/how-can-find-python-methods-with-start-with-double-underscores#comment18484680_13505137) [评论](https://stackoverflow.com/questions/13505095/how-can-find-python-methods-with-start-with-double-underscores#comment18484683_13505137)。他们很好地概述了所有可用的内容。

# iis - 是否可以在位于同一域名上的两个 asp.net 应用程序之间共享表单身份验证 cookie？

> ID：13505101
> 
> 赞同：1
> 
> 时间：2012-11-22T02:30:21.200
> 
> 标签：iis, asp.net-membership, membership-provider

正如您在下面看到的，我在一个 IIS 条目下设置了三个不同的 Web 应用程序。无需验证即可访问根应用程序。

WebApp1 和 WebApp2 需要是安全的，并且只有在登录后才能访问。如果我向 WebApp2 添加表单身份验证，即使在 WebApp1 上成功登录后，它也会强制我再次登录。

如果直接访问 WebApp2，我还想重定向 WebApp1 的登录屏幕。

```
-->Root App
     |
     -------->WebApp1 (Administration asp.net web app) secure access only
     |           |
 web.config      -------->WebApp2 (Child mvc4 app) secure access only
     |           |           |
     |       web.config      |
     |           |           |
     |           |       web.config
     |           |           |
     |           |           | 
```

# ruby - 获取第 i 个字符的 ASCII 值而不是 Ruby 中的字符

> ID：13505110
> 
> 赞同：2
> 
> 时间：2012-11-22T02:31:40.787
> 
> 标签：ruby, string

我是 Ruby 的初学者，我试图在 Ruby 中的字符串中获取某个字符，如下所示：

```
string1 = "ohhideraaaa"
puts string1[0] 
```

它返回 111 而不是“o”。我确定我在做一些非常愚蠢的事情，有人知道它是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:40:11.223

我认为最好的解决方法是升级到当前稳定版本 Ruby 1.9.3；您显然使用的是 1.8.x，其中像您这样的表达式[返回该位置的字符代码](http://www.ruby-doc.org/core-1.8.7/String.html#method-i-5B-5D)，但在 1.9.x 中，它[返回该位置的一个字符的子字符串](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-5B-5D)，这就是您想要的。

如果升级不是一个选项，或者如果您更愿意坚持使用 Ruby 1.8.x，您可以通过指定长度来说服它给您一个子字符串而不是字符代码（在您的情况下为`1`）：

```
puts string1[0,1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:34:32.623

使用[`.chr`](http://www.ruby-doc.org/core-1.9.3/Integer.html#method-i-chr)：

```
puts string1[0].chr 
```

该`.chr`方法将 ASCII 整数值转换回字符。

# emacs - 如何在 Emacs 中打开本机 cmd.exe 窗口

> ID：13505113
> 
> 赞同：3
> 
> 时间：2012-11-22T02:32:50.410
> 
> 标签：emacs, elisp

我想打开一个带有项目根目录的 cmd.exe 窗口，因为它是当前目录。

这是我的 elisp 代码：

```
(defun open-cmd-and-cd-to-project-root()
  (interactive)
  (projectile-mode t)
  (cd (projectile-get-project-root))
  (shell)) 
```

它在 Emacs 缓冲区中打开一个 cmd shell。但我希望它打开一个在 Windows 中运行的新本机 cmd.exe 窗口，而不是在 Emacs 中运行的缓冲区。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T09:14:33.297

做这个：

```
(let ((proc (start-process "cmd" nil "cmd.exe" "/C" "start" "cmd.exe")))
  (set-process-query-on-exit-flag proc nil)) 
```

`set-process-query-on-exit-flag`to`nil`是这样它就不会在关闭时打扰（`emacs`我们无论如何都不能杀死它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-05T12:38:12.373

根据系统配置，该`start`命令将启动本机终端或资源管理器窗口。

我相信选择取决于您是否允许`explorer`shell 的多个实例（文件浏览器），但可能涉及其他一些配置（本地组策略等）

`M-!` `start`

**您的困惑**源于这样一个事实，即`M-!`创建一个临时 shell 用于由默认处理器（`cmd.exe`或者更确切地说`cmdproxy.exe`在这种情况下）执行命令，因此从 shell 启动*shell*不会产生单独的终端窗口。

`start`是一个`cmd.exe`内置的，它打开一个新的 shell 窗口（同样，取决于系统配置，以及传递给它的参数）。

# r - 如何将函数应用于data.frame中的行对，类似于diff？

> ID：13505126
> 
> 赞同：3
> 
> 时间：2012-11-22T02:35:04.273
> 
> 标签：r

我有一个表示平面中点的数据框。

```
 x     y
1  0.0   0.0
2  0.2   0.0
3  0.3  -0.1
... 
```

我想`diff`为该数据编写一个类似的函数。我已经编写了距离函数`myDist`（不是欧几里得），但是如何将它应用于数据框？

即：通过调用`someFunction( myData, myDist )`，我想获得一个向量，其值为`myDist(myData[1,],myData[2,])`, `myDist(myData[2,],myData[3,])`, `myDist(myData[3,],myData[4,])`, ...

是否有执行此操作的函数，还是我必须编写一个循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:45:52.303

解决了它`lapply`：

```
lapply(seq_len(nrow(myData) - 1),
    function(i){
        myDist( myData[i,], myData[i+1,] )
    }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:23:33.647

您可以使用`head(myData, -1)`and`tail(myData, -1)`获取 2 个数据集，其中行按您想要的方式排列，然后如果`myDist`是矢量化的，您只需将结果传递给`myDist`，如果它未矢量化，您可以使用（`mapply`或`Vectorize`函数）`sapply`，或其他功能。`lapply``apply`

```
myData <- data.frame( x=1:10, y=sample(1:10), z=rnorm(10) )

myDist <- function( one, two ) {
    sqrt( rowSums( (one-two)^2 ) )
}

myDist( head(myData,-1), tail(myData,-1) ) 
```

# c - 代码在创建的字符串末尾不断给我 m

> ID：13505127
> 
> 赞同：0
> 
> 时间：2012-11-22T02:35:07.270
> 
> 标签：c, ansi

该代码基本上采用用户输入（az）的内容并将其转换为莫尔斯电码。但是返回字符串最后总是有'm'试图做数百万的事情来修复它你能看到我做错了什么吗，谢谢。

```
//Functions
#include "stdafx.h"
#include <ctype.h>

#include <stdio.h>
#include <string.h>
#include <malloc.h> 
void morse(void);   //prototype
int _tmain(int argc, _TCHAR* argv[])
{
    for(;;){
    morse(); // function call
    }
}

void morse(void){

    char *ss= (char*)malloc(110); // allocating dynamic memory
    strcpy(ss, ".-  -...-.-.-.. .   ..-.--. ......  .----.- .-..--  -.  --- .--.--.-.-. ... -   ..- ...-.-- -..--.----..");
    char *pp =(char*)malloc(110);
    int i = 0;
    int n = 0;
    printf("Enter text to convert to morse code: ");
    scanf("%s", pp);
    char *q =(char*)malloc(110);
    while (*pp != '\0'){//intiate while loop
        *pp = *(pp + n); 
        int f = (*pp - 97)*4; //find letters postion in morse code string
        int a = 0;

        while (a != 4) //copy morse code for the letter into new string
        {
            *(q + i) = *(ss + f);
            i++;
            a++;
            f++;
        }
        n++;

    }
    q[i] = '\0';    
    printf("%s", q); //return morse code
    printf("\n");
    free(ss); //free the allocated memory
    free(pp);
    free(q);
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:52:57.843

您的循环会出现一个额外的字符。外部循环查找 *pp 是否为 \0，但 *pp 仍然是前一个字符的值。

将其更改为：

```
while (*(pp+n) != '\0') {  // test next character
    char c = *(pp + n);    // fetch next character
    int f = (c - 97)*4;    // find character's index into morse array 
```

我发现它的方法是在调试器下运行并观察发生了什么。即使我只输入了一个字符，当它绕循环两次时，它很快就变得明显了。使用调试器，它是一个很棒的工具。值得通过调试器单步执行代码，即使您认为它正在工作。有时你会得到惊喜！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T02:56:25.947

调试并检查“n”的值。

你可以这样做：

```
 while (*pp != '\0'){//intiate while loop
        //*pp = *(pp + n); 
        int f = (*pp - 97)*4; //find letters postion in morse code string
        int a = 0;

        while (a != 4) //copy morse code for the letter into new string
        {
            *(q + i) = *(ss + f);
            i++;
            a++;
            f++;
        }
        //n++;
        pp++;

    } 
```

# java - Java 套接字 HTML 响应

> ID：13505130
> 
> 赞同：5
> 
> 时间：2012-11-22T02:35:28.537
> 
> 标签：java, html, http, sockets

我试图让 Java 套接字向浏览器发送一个简单的 HTML 响应。

这是我的Java代码：

```
 Socket socket = server.accept();
    BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    String s;
    // this is a test code which just reads in everything the requester sends
    while ((s = in.readLine()) != null)
    {
        System.out.println(s);
        if (s.isEmpty())
        {
            break;
        }
    }
    // send the response to close the tab/window
    String response = "<script type=\"text/javascript\">window.close();</script>";

    PrintWriter out = new PrintWriter(socket.getOutputStream());
    out.println("HTTP/1.1 200 OK");
    out.println("Content-Type: text/html");
    out.println("Content-Length: " + response.length());
    out.println();
    out.println(response);
    out.flush();
    out.close();
    socket.close(); 
```

`server`是一个设置为自动选择要使用的开放端口的 ServerSocket。

这个想法是任何重定向到的网页`http:\\localhost:port`（`port`端口`server`正在监听的位置）都会自动关闭。

当此代码运行时，我的浏览器会收到响应，并且我已经验证它收到了我发送的所有信息。

但是，窗口/选项卡没有关闭，我什至无法通过手动向`window.close();`浏览器的 Javascript 控制台发出命令来关闭选项卡。

我在这里想念什么？我知道具有给定内容的 html 页面应该自动关闭窗口/选项卡，那么为什么这不起作用？我正在谷歌浏览器上测试这个。

我尝试了一个更完整的 html 网页，但仍然没有运气。

以下是浏览器作为页面源报告的内容：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script type="text/javascript">window.close();</script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:46:27.577

总结评论：

根本问题实际上是在[这里](https://stackoverflow.com/questions/2032640/problem-with-window-close-and-chrome)找到的，其中 window.close() 不会关闭当前窗口/选项卡。

我查阅了[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/window.close)，发现：

> 当这个方法被调用时，被引用的窗口被关闭。
> 
> 仅允许为使用 window.open 方法的脚本打开的窗口调用此方法。如果窗口不是由脚本打开的，JavaScript 控制台中会出现以下错误：脚本可能不会关闭不是由脚本打开的窗口。

显然谷歌浏览器没有考虑脚本打开当前窗口。我也在 Firefox 中尝试过这个，它表现出相同的行为。

为了解决这个问题，我必须首先使用脚本打开当前窗口。

```
<script type="text/javascript">
    window.open('', '_self', '');
    window.close();
</script> 
```

# python - 我收到一个错误，指出未定义开头。我如何解决它？

> ID：13505133
> 
> 赞同：1
> 
> 时间：2012-11-22T02:35:38.063
> 
> 标签：python, function

我正在尝试创建一个刽子手游戏。

Python一直告诉我`get_word`没有定义，但我不确定它为什么这么说。

```
get_word():
    dictionary = ["number","one","hyper","active","knuckle","head","ninja"]
    import random

process_guess():
    while keep_playing:
        dictionary=["number","one","hyper","active","knuckle","head","ninja"]
        word=choice(dictionary)
        word_len=len(word)
        guesses=word_len * ['_']
        max_incorrect=7
        alphabet="abcdefghijklmnopqrstuvxyz"
        letters_tried=""
        number_guesses=0
        letters_correct=0
        incorrect_guesses=0
        print_game_rules(max_incorrect,word_len)
        while (incorrect_guesses != max_incorrect) and (letters_correct != word_len):
            clues()
            letter=get_letter()
            if len(letter)==1 and letter.isalpha():
                if letters_tried.find(letter) != -1:
                    print ("letter has already been used", letter)
                else:
                    letters_tried = letters_tried + letter
                    first_index=word.find(letter)
                    if  first_index == -1:
                        incorrect_guesses= incorrect_guesses +1
                        print ("The",letter,"is not the unknown word.")
                    else:
                        print("The",letter,"is in the unknown word.")
                        letters_correct=letters_correct+1
                        for i in range(word_len):
                            if letter == word[i]:
                                guesses[i] = letter
            else:
                print ("Please guess a single letter in the alphabet.")
                print("victory:",no guesses ')

play():
    1 = yes
    0 = no
    print(("play again? (1-yes, 0-no")):

print("get the current guess letter:", current)

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:36:35.963

在 Python 中，新函数是使用`def`关键字定义的。这样做：

```
def get_word(): 
```

以及您想要定义函数的其他任何地方。

# java - Modifying arraylists in a method and pass by value

> ID：13505147
> 
> 赞同：2
> 
> 时间：2012-11-22T02:37:07.513
> 
> 标签：java, cloning

I read [this](http://javatechniques.com/blog/faster-deep-copies-of-java-objects/) post today about deep copying and had a few questions:

In the first code, the author says adding an (integer) object to a clone does not appear in the original. Why is this so? As I understand, cloning basically creates an object with the same references to objects as the original.

Why isn't a change in the clone reflected back in the original?

Doesn't clone share the same reference as the Original?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T02:49:44.053

The whole purpose of a clone is to be *different* than the original - so changes in the clone *are not* reflected in the original. Otherwise, you could just use simple assignment as opposed to cloning.

e.g.

```
MyClass a = new MyClass();  // some cloneable class

MyClass b = a;  // not a clone, changes to `b` will affect in `a`
                // assignment duplicates the reference
    -or-

MyClass b = a.clone();  // clone, changes to `b` will not affect in `a`
                        // clone duplicates the object 
```

There is actually a Wikipedia article on Java cloning [here](http://en.wikipedia.org/wiki/Clone_%28Java_method%29).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T02:46:58.013

When you do a clone of an `Object 'A'`, you are creating a new `Object 'B'` (with the same references to objects) but in a different memory address. Thus, when you modify the object 'A' you are not accessing the same memory address of the `Object 'B'`. Therefore, changes in the clone do not reflect back in the original object and vice-versa.

**Shallow Copy**

Generally, the clone method of an object, creates a new instance of the same class and copies all the fields to the new instance and returns it. This is nothing but shallow copy. Object class provides a clone method and provides support for the shallow copy. It returns ‘Object’ as the type and you need to explicitly cast back to your original object.

**Deep Copy**

When you need a deep copy then you need to implement it yourself. When the copied object contains some other object its references are copied recursively in the deep copy. When you implement a deep copy be careful as you might fall for cyclic dependencies. If you don’t want to implement deep copy yourself then you can go for serialization. It does implement deep copy implicitly and gracefully handling cyclic dependencies.

([source](https://javapapers.com/core-java/java-clone-shallow-copy-and-deep-copy/) about the information)

Here an illustrative example:

Shallow

![Before Copy](../Images/8f796d775200cbec1441ee3c69a8c67b.png) ![Shallow Copying](../Images/c4f41ed80ff84f5e1c05de9f85bc94d6.png) ![Shallow Done](../Images/f11340cd144d18ea9dd88861b7a06040.png)

Deep:

![Before Copy](../Images/8f796d775200cbec1441ee3c69a8c67b.png) [![Deep Copying](../Images/62979c362fb0fdd61c88e68fc041a0d0.png)](https://i.stack.imgur.com/0hokX.png)
[(source: [wikimedia.org](https://upload.wikimedia.org/wikipedia/en/thumb/5/5f/Deep_copy_in_progress.svg/120px-Deep_copy_in_progress.svg.png))]

![Deep Done](../Images/219c8d1069c6705a0b8b746368ed207e.png)

# .net - 获取文本并在 vb.net 中替换它

> ID：13505148
> 
> 赞同：-1
> 
> 时间：2012-11-22T02:37:16.930
> 
> 标签：.net, vb.net, text

我想获取引号中的文本并显示它。

名字“约翰”

并将其替换为文本框中的内容

取名为“随便”

这都在一个 .txt 文件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:51:18.340

您必须逐行阅读文件，逐字拆分并找到双引号文本，将其替换为文本框文本。

我已经给出了阅读和替换的代码。最后做一个写函数，把它写回一个txt文件。

用法：

```
Try
     ' Create an instance of StreamReader to read from a file.
     Dim sr As StreamReader = New StreamReader("TestFile.txt")
     Dim line As String
     Dim FullContent as string=""
     ' Read and display the lines from the file until the end 
     ' of the file is reached.

     Dim strArray() as string=Nothing

Do
   Array.Clear(strArray,0,strArray.Length)
   line = sr.ReadLine()

   strArray=line.split(" ")     'To read Every Word Seperated by a Space
   For i=0 to strArray.Count-1

       'Checks StartsWith and EndsWith "       - Eg. Ashi likes "firefox"
       If strArray(i).StartsWith("""") and strArray(i).EndsWith("""") then

          'Replace the string in "firefox" with TextBox1 text 
          line.Replace("""" & strArray(i) & """",trim(TextBox1.Text))

       End If
   FullContent = FullContent & line      'Append the changes to full content
   Next

 Loop Until line Is Nothing
   sr.Close()

   'Now you can write the FullContent Back to Txt File which has the replaced changes
   'writeFunction(FullContent)

   'If you want to display, then
   msgbox(FullContent)

Catch E As Exception
     ' Let the user know what went wrong.
     Console.WriteLine("The file could not be read:")
     Console.WriteLine(E.Message)
End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:03:42.037

尝试谷歌搜索 vb.net + streamreader 和 vb.net + streamwriter 示例，这应该可以满足您的需求。

# php - PHP/CSS 如何防止我的复选框越过我的边界

> ID：13505151
> 
> 赞同：0
> 
> 时间：2012-11-22T02:37:28.150
> 
> 标签：php, javascript, css, checkbox

基本上，我正在创建一个未知大小的复选框，该复选框取决于从我的数据库中的表中选择的行。我不知道大小的原因是用户选择了他们将使用的行，其中一些行包含将成为 10 个复选框的行，而其他行包含多达 75 个。所以问题是，如果用户选择的行包含大量选项它穿过我的 div 的边框，然后迫使我向下滚动页面我正在寻找的是一种说法 >

if(复选框数量 >25 )

在我的页面上创建一个新列

我不知道解决这个问题的正确方法是使用 php 还是 javascript 或者可能使用 css 我对所有这些语言都是新手，所以无论多么微不足道的任何帮助都会非常感激。

```
<div id="major1">
<?php   
        $courses=mysql_query("SELECT * FROM MAJORS_CHECKLIST WHERE MAJOR='$major'");
        $courses_row=mysql_fetch_row($courses);
        $count = 0;
        echo "$courses_row[0] <br/>";
        $checkit = 0;
        $sidebyside = 0;
        foreach($courses_row as $i=>$courses_row){
            if($courses_row['$count'] == NULL)
            {
                break;//if we run out of courses stop printing them

            }
            if($courses_row[$count] == $courses_row[0] && $checkit == 0 )
            {

                $checkit = $checkit + 1;
            }
            else
            {       
                echo "<input type='checkbox' value='$courses_row' name='majorCourses[]' />&nbsp;";//answer-$i
                echo "$courses_row<br /> ";

            }
            $count = $count + 1;
            /*$sidebyside++;
            if($sidebyside == 2)//tried using this to put 2 checkboxes side by side that ened up just messing everything up 
            {
                echo "<br/>";
                $sidebyside = 0;
            }*/ 
        } 
```

?>

这是我的CSS：

```
 #major1{
color: white;
/*border: 1px solid black;*/
padding: 5px;
float: left;
height:500px;
width:150px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:45:34.313

可以使用 CSS 控制在 div 中生成一堆复选框。应将复选框的父 div 设置为以下规则：width:auto; 高度：自动；填充：10px 10px；位置：相对；这一切都假设复选框的父 div 是另一个 div 的子级来控制首选尺寸

**编辑：**如果您不想通过上述方法使用 css，您可以控制每行复选框的“X”数量。您可以创建一个计数器来计算正在显示的数量并执行 if($counter % X == 0) echo " `</div><div>`"; 这一切都假设您在代码的开头有一个起始 div，在代码的末尾有一个结束 div。

# jquery - 如何将全高 iframe 插入空白的 WordPress 仪表板？

> ID：13505155
> 
> 赞同：1
> 
> 时间：2012-11-22T02:38:07.790
> 
> 标签：jquery, wordpress, iframe

在尝试制作空白的 WordPress Dashboard 并将 iframe 插入空白空间时，我发现 iframe 只能具有固定高度。

但是要很好地集成这种定制，需要 100% 的高度。

在这个[WordPress StackExchange Q&A](https://wordpress.stackexchange.com/q/73561/12615)中，我编写了制作完全空白仪表板的技术，隐藏图标和标题、屏幕选项和所有小部件（默认并由插件添加）。

![不是空白的 WordPress 仪表板](../Images/9bc475854ce4205b2c3cdf6376a39c5a.png)

* * *

如果我使用以下 jQuery 注入 iframe，它不会占据 100% 的高度，无论我添加什么 CSS 到管理样式表...

```
$('#wpbody').html(
    '<iframe src="http://example.com" 
     frameborder="0" id="myframe"  
     style="height:100%;margin:0;padding:0;left:0;top:0" 
     scrolling="auto" width="100%" height="100%"></iframe>'
); 
```

问题是：*如何让 iframe 填满所有`#wpbody`空间并保持这种状态？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:38:07.790

[在这篇博](http://jbscdev.blogspot.com.es/2007/08/automatic-iframe-height-sizing-using.html) 文中找到了解决方案^(（非常感谢 Jim，漂亮的代码！）)。

再加上[WordPress StackExchange Q&A](https://wordpress.stackexchange.com/q/73561/12615)，以下内容将在仪表板屏幕内显示一个完整大小的 iframe。

```
add_action( 'admin_head-index.php', 'wpse_73561_dashboard_scripts' );

function wpse_73561_dashboard_scripts() 
{
    ?>
        <style>
            .wrap h2, .postbox .handlediv, #icon-index { display:none }
            #wpcontent { margin-left:0 !important }
        </style>
        <script language="javascript" type="text/javascript">   
            function sizeIFrame() 
            {
                var helpFrame = jQuery("#myframe");
                var innerDoc = (helpFrame.get(0).contentDocument) 
                ? helpFrame.get(0).contentDocument 
                : helpFrame.get(0).contentWindow.document;

                helpFrame.height(innerDoc.body.scrollHeight + 35);
            }

            jQuery(function() 
            {
                sizeIFrame();
                jQuery("#myframe").load(sizeIFrame);
            });

            jQuery(document).ready(function($) 
            {
                $('#wpbody').html(
                    '<iframe src="http://example.com" 
                     frameborder="0" id="myframe" 
                     style="margin:0;padding:0;left:0;top:0" 
                     scrolling="auto" 
                     width="100%" height="100%"></iframe>'
                );
            });
        </script>   
    <?php
} 
```

# sql - 列出工资低于公司平均水平但项目总工时超过100小时的员工姓名

> ID：13505159
> 
> 赞同：0
> 
> 时间：2012-11-22T02:39:42.927
> 
> 标签：sql, oracle11g

所以我试图弄清楚我的教授给我的这个问题，无论我尝试什么，我似乎都无法正确获取代码。员工表有员工信息，比如薪水，而工作表有关于项目小时数的信息我现在的代码是 `select e.name from employee e, workon w where e.empid = w.empid and e.name in (select name from employee having salary < avg (salary) and empid in (select empid from workon having sum (hours) > 100)) group by e.name`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:44:46.533

试试这个：

```
SELECT name FROM employee WHERE salary < (SELECT AVG(salary) FROM employee) having sum(hours) > 100 GROUP BY name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:49:49.730

也许是这样的：

```
select
  e.name
from
  employee e
  inner join workon wo on e.employee = wo.employee
where
  e.salary < (select avg(salary) from employee)
  and sum(wo.hours) > 100
group by
  e.name; 
```

# sql - 获取每个订单的平均桌面数量 -SQL

> ID：13505160
> 
> 赞同：2
> 
> 时间：2012-11-22T02:39:46.630
> 
> 标签：sql

假设我有 4 张桌子

```
Order (OrderID, ComputerID, Quantity, Type_PC)
Computer (ComputerID, Model)
Desktop (ComputerID, specs, Cost)
Laptop (ComputerID, specs, Cost) 
```

我正在尝试获取每个订单的平均台式机数量。

```
SELECT order.orderid, avg(order.quantity) AS AvgDesktopsSold
FROM computer, order
WHERE order.type_pc ="desktop" AND computer.computerid = order.computerid; 
```

我有一个错误说`Column "Desktop" not found`

你能帮我解决这个 SQL 问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:13:26.693

SQL 标准将双引号视为封闭的“分隔标识符”，这意味着双引号表示其中的名称是列名或表名，或其附近。您需要在字符串周围使用单引号。

许多基于 Unix 的 DBMS 对双引号中的字符串相当灵活。显然，您使用的不是，或者没有配置为。

您还应该避免使用该`FROM computer, order`符号。您需要知道它的存在以防您阅读真正的旧代码，但您应该始终在 SQL 中使用显式 JOIN 表示法。所以，如果你需要加入，你应该写：

```
SELECT order.orderid, AVG(order.quantity) AS AvgDesktopsSold
  FROM computer
  JOIN order ON computer.computerid = order.computerid
 WHERE order.type_pc = 'desktop'; 
```

您还应该使用 GROUP BY 子句。任何非聚合列都应该在 GROUP BY 子句中。

```
SELECT order.orderid, AVG(order.quantity) AS AvgDesktopsSold
  FROM computer
  JOIN order ON computer.computerid = order.computerid
 WHERE order.type_pc = 'desktop'
 GROUP BY order.orderid; 
```

但是，由于您没有使用 Computer 表中的任何列（更不用说 Desktop 或 Laptop 表），因此您甚至不需要 JOIN：

```
SELECT orderid, AVG(quantity) AS AvgDesktopsSold
  FROM order
 WHERE type_pc = 'desktop'
 GROUP BY orderid; 
```

现在，这将为您提供“每个桌面订单的平均桌面数量”的答案，但该平均值也是数量。所以，你真的不需要`orderid`选择列表中的 ，或者 GROUP BY 子句毕竟：

```
SELECT AVG(quantity) AS AvgDesktopsSold
  FROM order
 WHERE type_pc = 'desktop'; 
```

# ruby-on-rails - 在 Rails 中生成随机固定小数

> ID：13505161
> 
> 赞同：1
> 
> 时间：2012-11-22T02:39:54.167
> 
> 标签：ruby-on-rails, ruby, random, decimal, currency

我正在尝试在我的 rails 应用程序中生成随机数据。但是我遇到了十进制金额的问题。我收到一条错误消息，说范围值不正确。

```
while $start < $max
        $donation = Donation.new(member: Member.all.sample, amount:  [BigDecimal('5.00')...BigDecimal('200.00')].sample,
                                 date_give: Random.date_between(:today...Date.civil(2010,9,11)).to_date,
                                 donation_reason: ['tithes','offering','undisclosed','building-fund'].sample )
        $donation.save
        $start +=1
      end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T02:52:23.740

如果您想要两个数字之间的随机小数，则 sample 不是要走的路。相反，请执行以下操作：

```
random_value = (200.0 - 5.0) * rand() + 5 
```

另外两个建议：
1\. 如果你实现了这个，很好，但它看起来不标准`Random.date_between(:today...Date.civil(2010,9,11)).to_date`
2.`$variable`表示 Ruby 中的全局变量，所以你可能不想要那个。

更新---真正获得随机日期的方法

```
require 'date'

def random_date_between(first, second)
  number_of_days = (first - second).abs
  [first, second].min + rand(number_of_days)
end

random_date_between(Date.today, Date.civil(2010,9,11))
=> #<Date: 2012-05-15 ((2456063j,0s,0n),+0s,2299161j)>
random_date_between(Date.today, Date.civil(2010,9,11))
=> #<Date: 2011-04-13 ((2455665j,0s,0n),+0s,2299161j)> 
```

# python - 如何在 Python 3.2 的列表中附加项目频率的数量？

> ID：13505169
> 
> 赞同：0
> 
> 时间：2012-11-22T02:41:32.227
> 
> 标签：python, string, list, dictionary

我是编程新手，python 是我学习的第一门语言。

我想问的问题是如何计算列表中项目的频率，以便它们按“PARTY_INDICES”的顺序加起来？就我而言，就是这样。

**这是我需要做的文档字符串：**

```
''' (list of str) -> tuple of (str, list of int) 
votes is a list of single-candidate ballots for a single riding. 
Based on votes, return a tuple where the first element is the name of the party 
winning the seat and the second is a list with the total votes for each party in 
the order specified in PARTY_INDICES.

>>> voting_plurality(['GREEN', 'GREEN', 'NDP', 'GREEN', 'CPC']) 
('GREEN', [1, 3, 0, 1])
''' 
```

由于 PARTY_INDICES = [NDP_INDEX, GREEN_INDEX, LIBERAL_INDEX, CPC_INDEX] 这会产生获胜方的元组（在本例中为“GREEN”）和频率列表，其中 [1, 3, 0, 1]

**这些是全局变量、列表和字典：**

```
#  The indices where each party's data appears in a 4-element list.
NDP_INDEX = 0
GREEN_INDEX = 1
LIBERAL_INDEX = 2
CPC_INDEX = 3

# A list of the indices where each party's data appears in a 4-element list.
PARTY_INDICES = [NDP_INDEX, GREEN_INDEX, LIBERAL_INDEX, CPC_INDEX]

# A dict where each key is a party name and each value is that party's index.
NAME_TO_INDEX = {
  'NDP': NDP_INDEX,
  'GREEN': GREEN_INDEX,
  'LIBERAL': LIBERAL_INDEX,
  'CPC': CPC_INDEX
}

# A dict where each key is a party's index and each value is that party's name.
INDEX_TO_NAME = {
  NDP_INDEX: 'NDP',
  GREEN_INDEX: 'GREEN',
  LIBERAL_INDEX: 'LIBERAL',
  CPC_INDEX: 'CPC'
} 
```

**这是我的工作：**

```
def voting_plurality(votes):
    my_list = []
    my_dct = {}
    counter = 0
    for ballot in votes:
        if (ballot in my_dct):
            my_dct[ballot] += 1
        else:
            my_dct[ballot] = 1

    if (my_dct):
        my_dct = my_dct.values()
        new_list = list(my_dct)

    return (max(set(votes), key = votes.count), new_list) 
```

**它返回：**

```
>>> voting_plurality(['GREEN', 'GREEN', 'NDP', 'GREEN', 'CPC'])
('GREEN', [1, 1, 3]) 
```

但我希望它也包括没有投票的政党，并且符合 PARTY_INDICES [1, 3, 0, 1]

我的代码可能看起来像胡说八道，但我真的很困惑。

我也不能**导入**任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:49:07.313

你有两个主要问题。第一是你要占领零，但由于“自由党”没有选票，所以零不会体现出来。

**提示**也许您想初始化您的字典？

第二个问题是您正在调用 dict.values() ，它不会按任何顺序排列。您需要使用字典和`PARTY_INDICES`创建正确排序的数字列表。

**提示**`PARTY_INDICIES`也许您可以参考字典中的键以及它们在列表中的各自位置

看看您是否可以根据这些提示提出一些建议，并更新您的问题。如果你不能，我相信最终会有人发布完整的答案。

看到它已经 4 小时 - 这是一个解决方案：

```
def voting_plurality(votes):
    sums = dict(zip(INDEX_TO_NAME.values(), [0] * len(INDEX_TO_NAME)))
    for vote in votes:
        if vote in sums:
            sums[vote] += 1
        else:
            print "Bad vote: %s" % vote
    votes_by_index = sorted([(NAME_TO_INDEX[k], v) for k, v in sums.items()])
    votes_by_rank = sorted(votes_by_index, key=lambda x: x[1], reverse=True)
    votes_by_parts = [item[1] for item in votes_by_index]
    highest_votes = INDEX_TO_NAME[votes_by_rank[0][0]]
    return (highest_votes, votes_by_parts) 
```

# c++ - c ++在while循环中获取一次输出

> ID：13505172
> 
> 赞同：1
> 
> 时间：2012-11-22T02:41:53.063
> 
> 标签：c++, time, while-loop

你好我正在尝试在while循环中获得一次输出

```
While(1){
    if( current->tm_hour == 10 && current->tm_min == 0  ){
        Start_Function();
        std::cout <<  "Started" << std::endl;
    }

    if( current->tm_hour == 12 && current->tm_min == 0  ){
        End_Function();
        std::cout <<  "Ended" << std::endl;
    }

    Sleep(5000);
} 
```

我使用睡眠每 5 秒刷新一次

所以我想要当前的小时和分钟 = 10 和 00

它给我输出 Started 并且它只调用一次函数并且它继续刷新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:55:56.560

怎么样：

```
bool start_called = false, end_called = false;
While(1){
    if( current->tm_hour == 10 && current->tm_min == 0 && !start_called  ){
        Start_Function();
        std::cout <<  "Started" << std::endl;
        start_called = true;
    } else
        start_called = false;

    if( current->tm_hour == 12 && current->tm_min == 0 && !end_called ){
        End_Function();
        std::cout <<  "Ended" << std::endl;
        end_called = true;
    } else
        end_called = false;

    Sleep(5000);
} 
```

你可以用函子做得更好，但这有点高级。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T02:47:22.463

编辑：根据@Joachim Pileborg 的评论

> 问题不是输出，而是函数在不应该被多次调用（并打印输出）时被多次调用。——约阿希姆·皮勒伯格

替代解决方案

```
int hasStarted = 0, hasEnded = 0;
While(1){
if( current->tm_hour == 10 && current->tm_min == 0 && !hasStarted  ){
Start_Function();
    std::cout <<  "Started" << std::endl;
    hasStarted = 1;
}

if( current->tm_hour == 12 && current->tm_min == 0  && !hasEnded ){
End_Function();
    std::cout <<  "Ended" << std::endl;
    hasEnded = 1;
}

Sleep(5000);
}
} 
```

上面的代码将强制它只执行每个操作一次并继续刷新......

我原来的评论：

在您发现的命令行/终端中，输出会连续打印出来。根据您使用的操作系统（window/linux/mac），解决方案将容易或不那么容易。

我建议查找`gotoxy()`功能

[http://www.programmingsimplified.com/c/conio.h/gotoxy](http://www.programmingsimplified.com/c/conio.h/gotoxy)

由 Windows 的“conio.h”库或 Linux 的“ncurses.h”库提供。

“ncurses.h”没有，`gotoxy()`但它会为您提供一种方法来做同样的事情。

# r - 如何将变量的当前值传递给函数范围？

> ID：13505178
> 
> 赞同：1
> 
> 时间：2012-11-22T02:43:06.640
> 
> 标签：r

如何使用变量的当前值构造函数？

这是一个例子：

```
x <- 2
f <- function() { return(x) }
x <- 3
f() # evaluates to 3 as expected, but I'd like it to evaluate to 2. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T02:47:55.200

这就是 R 的词法作用域派上用场的地方：

```
MakeF <- function() {
  x <- x
  f <- function() {
    return(x)
  }
  return(f)
}

x <- 2
f <- MakeF()
x <- 3 
```

这使：

```
> f()
[1] 2 
```

# php - 在 Wordpress 中创建一个新的帖子页面

> ID：13505179
> 
> 赞同：0
> 
> 时间：2012-11-22T02:43:31.817
> 
> 标签：php, wordpress

我目前正在尝试使用 wordpress 制作电子杂志，并完成了大部分工作。主页显示了包含在该版本电子杂志中的“片段”列表。我想这样做，当版本过期（当前使用 Post Expirator 插件）时，会自动创建一个新页面，类似于首页，以显示该特定（现已过期）版本的索引。

我在使用 PHP 方面不是很有经验，而且还是 wordpress 的新手。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:04:06.843

这个想法是这样的，你只需要得到到期日期并用它来设定条件。您只需要具备基本的 php 技能就可以做到这一点。这是逻辑

```
 if($curdate > $expiration_date){ //you can change the condition into ">=" if you want to create a post on and after expiration date

      //sample wordpress wp_insert_post
      $my_post = array(
        'post_title'    => 'My post',
        'post_content'  => 'This is my post.',
        'post_status'   => 'publish',
        'post_author'   => 1,
        'post_category' => array(8,39)
      );

      // Insert the post into the database
      wp_insert_post( $my_post );

   } 
```

欲了解更多信息，请访问[http://codex.wordpress.org/Function_Reference/wp_insert_post](http://codex.wordpress.org/Function_Reference/wp_insert_post)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T03:54:24.383

以下是我最终所做的，以 Felipe 的建议为起点。这样做可能有一种不那么令人费解的方式，但是，正如我所说，我只是一个初学者，所以这就是我想出的：

首先，我创建了一个 volnum 变量，它跟踪当前的卷号。然后，我缓存首页，以便以后可以将其保存为独立的 html 文档：这是 index.php 的开头，在 get_header() 之前。

```
<?php $volnum; ?>
<?php ob_start(); ?> 
```

在首页，我有一篇社论，在它旁边，我有内容索引。我正在保存编辑标签（始终是“voln”，其中“n”是卷号）卷号（也许 foreach 不是必需的，因为编辑只有一个标签）：

```
<?php $tags = get_the_tags();
      foreach ($tags as $tag){
        $volnum = $tag->name;
      }
?> 
```

最后，在文档的最后，在最后一个 html 之后，我添加了以下代码：

```
<?php
    $handle = opendir("past_vol/");
    $numOfFiles = count($handle);
    $volExists = false;
    for($i=0;$i<=$numOfFiles;$i++){
        $name = readdir($handle);
        if($volnum.".html" == ($name)){
            $volExists = true;
            continue; 
        }
    }
    if($volExists == false){
        $cachefile = "past_vol/".$volnum.".html";
        $fp = fopen($cachefile, 'w'); 
        fwrite($fp, ob_get_contents());
        fclose($fp);
    }
    closedir($handle);
    ob_end_flush(); 
?> 
```

“past_vol”是我保存过去卷 html 文件的目录。因此打开了目录，计算了文件的数量，并开始了遍历每个文件名的循环。如果文件与 $volnum 同名，则 $volExists 为真。如果在循环结束时 $volExists 为 false，则它会保存缓存页面。

同样，它可能会被优化很多，但现在这可行！

# android - Android以编程方式将音频和视频文件与ffmpeg结合起来

> ID：13505183
> 
> 赞同：2
> 
> 时间：2012-11-22T02:43:47.157
> 
> 标签：android, ffmpeg

就像提到的标题一样，我想在 android 平台上以编程方式将音频文件与视频文件结合起来。所以，如果您的朋友对此有任何想法，谢谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T03:59:44.530

首先，为android构建ffmpeg：http: [//trac.ffmpeg.org/wiki/How%20to%20compile%20FFmpeg%20for%20Android](http://trac.ffmpeg.org/wiki/How%20to%20compile%20FFmpeg%20for%20Android)

然后你可以通过调用 ffmpeg.c 中的 main 函数来使用参数调用它，它就像正常运行它一样，除了它实际上会在你的应用程序的进程中运行。

# c - postgres的扩展有什么区别？

> ID：13505184
> 
> 赞同：2
> 
> 时间：2012-11-22T02:43:47.877
> 
> 标签：c, postgresql, extend

我想在 PostgreSQL 中创建一个新的数据类型和新的运算符。我在文档中看到，可以在 C 中合并新的源文件（例如）并创建新的数据类型和运算符。PostgreSQL 在这个方向上是可扩展的。更多信息请参见：[文档](http://www.postgresql.org/docs/8.3/static/extend.html)

而且 PostgreSQL 也是开源的，我可以修改源代码并添加新的数据类型，编译一个新版本。

有了这个，我想知道在 PostgreSQL 中包含新数据类型的每种方法的区别、优点和缺点。我非常关心查询处理的性能。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T02:51:50.463

如果您修改 PostgreSQL，则必须维护整个代码库，并且每次要升级时都必须进行修补，即使在次要版本之间也是如此。如果你做一个扩展，你只需要维护你的小扩展。如果您想这样做，分发小型扩展程序也容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:53:49.673

我完全同意 Jachim 的回答。另一件事是：

在 PostgreSQL 中开发自己的 C 语言扩展（相当）有据可查 - 只需编译一个代码函数并编写相应的函数即可完成简单的程序。添加自定义数据类型有点复杂，但仍然可行。我开发的扩展甚至是用 C++ 编写的，在 PostgreSQL 的普通 C 之间只有一点包装胶水——这使得开发更加灵活。

然而，就如何开始和做什么而言，更改 PostgreSQL 核心更为复杂。最后，您将其归档。

总结一下：C 语言函数为您提供了所有优势：

*   利用 PostgreSQL 内部数据类型实现高性能
*   简单的编程接口
*   只需一小段代码，带有文档化且可能非常稳定的功能接口

我看不出改变 PostgreSQL 核心的任何优点，但有很多缺点：

*   编译时间长
*   维护自己的代码分支并定期将补丁重新应用到当前版本
*   更高的错误风险。

如果您需要使用 C-Language 接口的多种不同方式的示例，请查看 PostGis 源代码 - 它们使用几乎所有函数类型，并且在代码中包含许多花哨的技巧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:39:04.097

内部运算符和数据类型与自定义运算符和数据类型之间没有区别 - 然后它具有相同的性能。外部和内部实现尊重相同的规则和模式。因此，没有理由为此破解 Postgres。

我们已经在 GoodData 中修补了 PostgreSQL - 我们也有自己的扩展 - 在任何可能和实用的地方，我们都使用自定义扩展 - 在不可能的地方，我们使用自己的 hack - 从 9.2、9.3 向后移植，一些增强pg_dump 和 psql，统计数据——但我们身边有一个活跃的 PostgreSQL 黑客。这不常见。对于没有 PostgreSQL 黑客经验的用户，他们正在创建安全且性能良好的扩展解决方案。

# facebook - 如何让我的域名被 Facebook 解除封锁？

> ID：13505186
> 
> 赞同：2
> 
> 时间：2012-11-22T02:44:01.777
> 
> 标签：facebook

通过很多焦虑，很明显 Facebook 不喜欢我用于我的 Facebook 应用程序的 URL `divine.ly`。

当我尝试将 URL 放入 Facebook 应用程序的*站点 URL*时，我得到`Site URL invalid domain`

当我尝试提交有关此域的错误时，它会说`Content Blocked`，我什至无法提交有关此问题的错误。

当我的应用程序尝试共享链接时，例如`http://divine.ly`，操作失败并出现错误`The operation couldn’t be completed. (facebookErrDomain error 10000.)`

### 这是我所知道的

*   这不仅仅是因为它是一个 *.ly 域，我已经尝试过 bit.ly 并且效果很好
*   这不是我的网络服务器的 IP 地址，我在同一台服务器上使用了不同的 URL，并且工作正常
*   我什至尝试了来自另一个域的 301 重定向`divinely.org`--> `divine.ly`，这最初是有效的，但后来`divinely.org`也停止了工作。

这个网站是全新的（甚至还没有真正投入生产），但也许

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-16T22:19:12.557

我终于找回了我的 URL，所以我把这个贴在我搜索过答案的所有地方：

Facebook 多年来一直阻止使用我们的 URL，是的，很多年。出于某种原因，没有人可以在任何帖子中，甚至在我们自己的 FB 页面上包含我们的网站 URL (a-fib.com)。他们会收到一条错误消息，说我们的网站已被标记为垃圾邮件。这种情况已经持续了很多年！FB 的客户服务为零。

这是有效的。在三年的时间里尝试了所有其他方法之后，我们终于在我们的信笺上写了一封恳求信，问为什么有人会阻止非营利组织试图帮助心脏病患者？我们将其“挂号信”发送到 FB 总部。（我在网上从有类似问题的人那里找到了其他建议。）它奏效了。赞美主！帕蒂·瑞恩

# ruby - 数组排序未正确排序

> ID：13505187
> 
> 赞同：-1
> 
> 时间：2012-11-22T02:44:32.980
> 
> 标签：ruby, arrays

我在排序数组时遇到问题。我的预期结果是：

```
@list = [
  ["2 1/8\"", "23 13/32\"", "stile", "2"],
  ["2 1/8\"", "11 5/32\"", "rail", "6"],
  ["2 1/8\"", "7 13/32\"", "stile", "4"]
] 
```

这只是一个示例，因为数组是动态的，并且数据总是在变化，但不变的一件事是，大多数（如果不是全部）单位数测量结果都在开始时结束。

这是我正在使用的代码：

```
@list = @list.sort {|a,b| b[1]<=>a[1]} 
```

这是代码的实际输出。

```
@list
# => [
#   ["2 1/8\"", "7 13/32\"", "stile", "2"],
#   ["2 1/8\"", "23 13/32\"", "rail", "6"],
#   ["2 1/8\"", "11 5/32\"", "stile", "4"]
# ] 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:58:41.767

如果目标是按每个数组（7、23、11）的第二个值的第一个数值进行排序，则在排序中将字符串转换为整数可能是一种解决方案：

```
@list = @list.sort {|a,b| b[1].to_i <=> a[1].to_i } 
```

您还可以使用以下方法使其更短`sort!`：

```
@list.sort! {|a,b| b[1].to_i <=> a[1].to_i } 
```

# python - Scrapy 爬行速度慢（60 页/分钟）

> ID：13505194
> 
> 赞同：8
> 
> 时间：2012-11-22T02:45:08.420
> 
> 标签：python, http, scrapy, web-crawler

我在使用 scrapy 时遇到缓慢的爬行速度（大约 1 页/秒）。我正在从 aws 服务器抓取一个主要网站，所以我认为这不是网络问题。Cpu 利用率远未接近 100，如果我启动多个scrapy 进程，抓取速度会快得多。

Scrapy 好像爬了一堆页面，然后挂了几秒，然后重复。

我试过玩：CONCURRENT_REQUESTS = CONCURRENT_REQUESTS_PER_DOMAIN = 500

但这似乎并没有真正让指针超过 20 点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:37:50.083

您确定允许高速抓取目标站点吗？许多站点实施了下载阈值，并且“一段时间后”开始响应缓慢。

# regex - Bash：从文件中提取日期

> ID：13505198
> 
> 赞同：2
> 
> 时间：2012-11-22T02:45:32.037
> 
> 标签：regex, linux, bash, sed

我是 bash 新手，我有一个这样的文件：

```
2012-11-22 11:36:55,909 1353551815756 1353551815909 0 true myapi 10 203051 203051:ShopDb:ShopDb
2012-11-22 11:37:00,292 1353551820146 1353551820292 0 true myapi 10 201897 201897:ShopDb:ShopDb
2012-11-22 11:38:01,824 1353551881672 1353551881824 0 true myapi 10 203051 203051:ShopDb:ShopDb 
```

在一个循环中，我想提取日期部分（2012-11-22 11:36:55）的行转换为时间戳并分配给一个变量（或简单地 dis 如何在 bash 中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:14:09.020

您也可以使用 date 命令作为执行此操作的方法之一。

```
while IFS=, read x y; do
    date --date "$x" +%s
done < file.txt 
```

`+%s`根据需要将其转换为时间戳。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T02:48:18.770

```
$ while IFS=" ," read f1 f2 f3
> do
>  echo $f1 $f2
> done < file
2012-11-22 11:36:55
2012-11-22 11:37:00
2012-11-22 11:38:01 
```

通过将 IFS 设置为空格和逗号，可以轻松提取 while 循环中的第 2 个字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T03:07:04.990

您可以使用`GNU awk`bash 数组获取时间戳并捕获它们：

```
array=($(awk -F, '{ print mktime(gensub(/[:-]/," ","g",$1))}' file.txt)) 
```

然后你可以遍历它们：

```
for i in "${array[@]}"; do echo "$i"; done 
```

结果：

```
1353548215
1353548220
1353548281 
```

或者干脆选择一个打印；例如，要回显第二个元素：

```
echo "${array[1]}" 
```

结果：

```
1353548220 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T02:49:49.337

以下将为您提取日期：

```
awk 'BEGIN{FS="[ ,]"; OFS=" ";} {print $1, $2}' input_file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T02:52:13.130

使用`cut`命令：

```
cut -c1-19 file 
```

这将从每行中提取字符 1 到 19。

只检索第一行：

```
head -n 1 file | cut -c1-19 
```

并将其分配给 bash 变量：

```
myTime=$(head -n 1 file | cut -c1-19) 
```

# go - 学习围棋——范围

> ID：13505202
> 
> 赞同：3
> 
> 时间：2012-11-22T02:45:39.610
> 
> 标签：go

嗨，我是 Go 编程语言的新手。

我正在学习[http://www.golang-book.com/](http://www.golang-book.com/)

在第 4 章的练习下，有一个关于从华氏温度转换为摄氏度的问题。

我将答案编码如下

```
 package main

import "fmt"

func main(){

    fmt.Println("Enter temperature in Farentheit ");

    var input float64

    fmt.Scanf("%f",&input)

    var outpu1 float64 = ( ( (input-32)* (5) ) /9)
    var outpu2 float64=  (input-32) * (5/9)
    var outpu3 float64= (input -32) * 5/9
    var outpu4 float64=  ( (input-32) * (5/9) ) 

    fmt.Println("the temperature in Centigrade is ",outpu1)
    fmt.Println("the temperature in Centigrade is ",outpu2)
    fmt.Println("the temperature in Centigrade is ",outpu3)
    fmt.Println("the temperature in Centigrade is ",outpu4) 
} 
```

输出如下

```
sreeprasad:projectsInGo sreeprasad$ go run convertFarentheitToCentigrade.go 
Enter temperature in Farentheit 
12.234234
the temperature in Centigrade is  -10.980981111111111
the temperature in Centigrade is  -0
the temperature in Centigrade is  -10.980981111111111
the temperature in Centigrade is  -0 
```

我的问题是关于outpu2 和outpu4。括号是正确的，但它如何或为什么打印 -0。

谁能解释一下

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T03:10:06.287

很简单，表达式`(5/9)`被评估为`(int(5)/int(9))`which equals `0`。尝试`(5./9)`

为了阐明为什么会发生这种情况，它处理了确定表达式变量类型的顺序。

我猜想 b/c`(5/9)`存在而不考虑`input`上面的情况 2 和 4，编译器将它们解释为`int`并简单地用 0 替换表达式，此时零被认为取决于输入，因此采用`float64`final 之前的类型汇编。

一般来说，Go 不会为你转换数字类型，所以这是唯一对我有意义的解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T03:14:34.140

[Go 语言规范](http://golang.org/ref/spec#Numeric_types)表明`float32`并且是遵循 IEEE-754 标准的`float64`有符号浮点数。以下文字引自[维基百科 - 签名为零](http://en.wikipedia.org/wiki/Signed_zero)：

> 浮点算术的 IEEE 754 标准（目前由支持浮点数的大多数计算机和编程语言使用）需要 +0 和 -0。零可以被认为是扩展实数线的变体，使得 1/-0 = -∞ 和 1/+0 = +∞，除以零仅在 ±0/±0 和 ±∞/±∞ 时未定义.

显然，`input`作为 a `float64`，当应用负 32 时，会变成另一个`float64`负数。`5/9`评估为`0`. 一个负`float64`计时`0`是`-0`。

有趣的是，如果你`input`用一个整数替换，例如`1`，你会得到`0`而不是`-0`. 似乎在 Go 中，浮点数同时具有`+0`和`-0`，但整数没有。

**编辑：** [PhiLho](https://stackoverflow.com/users/15459/philho)在评论中解释了为什么浮点数有这样的东西而整数没有的原因：*归一化的浮点数有 +0、-0、NaN、+Infinity 和 -Infinity 的特殊表示，而你不能保留一些位组合的整数具有这样的含义。*

# c++ - c ++处理文件末尾的空白行

> ID：13505204
> 
> 赞同：2
> 
> 时间：2012-11-22T02:45:54.040
> 
> 标签：c++, file, vim

当我使用c++处理文件时，我发现文件末尾总是有一个空行。有人说vim会在文件末尾附加一个'\ n'，但是当我使用gedit时，它也有同样的问题。谁能告诉我原因？

```
1 #include<iostream> 
2 #include<fstream> 
3  
4 using namespace std; 
5 const int K = 10; 
6 int main(){ 
7         string arr[K];
8         ifstream infile("test1");
9         int L = 0;
10         while(!infile.eof()){
11             getline(infile, arr[(L++)%K]);
12         }
13         //line
14         int start,count;
15         if (L < K){
16             start = 0;
17             count = L;
18         }
19         else{
20             start = L % K;
21             count = K;
22         }
23         cout << count << endl; 
24         for (int i = 0; i < count; ++i)
25             cout << arr[(start + i) % K] << endl;
26         infile.close();
27         return 1;
28 }

while test1 file just:
abcd
but the program out is :
2
abcd

(upside is a blank line) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T02:50:28.697

```
while(!infile.eof()) 
```

`infile.eof()`只有在您尝试读取文件末尾*之后*才为真。因此，循环尝试多读一行，并在该尝试中得到一个空行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T03:21:48.237

这是一个顺序问题，您正在阅读、分配和检查之后......您应该稍微更改您的代码，以便阅读、检查和分配：

```
std::string str;
while (getline(infile, str)) {
    arr[(L++)%K] = str;
} 
```

[http://www.parashift.com/c++-faq-lite/istream-and-eof.html](http://www.parashift.com/c++-faq-lite/istream-and-eof.html)

[c++中使用getline()时如何判断是否为EOF](https://stackoverflow.com/questions/1264052/how-to-determine-whether-it-is-eof-when-using-getline-in-c)

# c++ - 可以使用 memset 填充 std::complex 数组吗 年代？

> ID：13505205
> 
> 赞同：4
> 
> 时间：2012-11-22T02:46:22.363
> 
> 标签：c++, std, fill, complex-numbers, memset

具体来说，我想知道这条线是否：

```
memset(cjzyp,(0,0),size_cjzy*sizeof(std::complex<float>)); 
```

将用复零值 ( )填充s`cjzyp`数组。`complex<float>``(0,0)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-28T13:47:35.287

`std::memset`将 int 转换为 unsigned char 作为第二个参数，它将不起作用。`std::fill`改为使用

[http://www.cplusplus.com/reference/algorithm/fill/](http://www.cplusplus.com/reference/algorithm/fill/)

```
cjzyp = new std::complex<float>[100]
std::fill(cjzyp, cjzyp + 100, std::complex<float>(-1.0, 0.0));
delete [] cjzyp; 
```

# ios - 自定义 UIView 的标签未显示

> ID：13505209
> 
> 赞同：0
> 
> 时间：2012-11-22T02:47:10.803
> 
> 标签：ios, xcode, uiview, uiviewcontroller

我有自定义 UIView，它有一个 xib 文件以及 .h 和 .m 文件。我的自定义视图包含许多 UILabel。

我已通过拖入 UIView、转到 Identity Inspector 并将类名更改为 MyCustomView 将此视图添加到 UIViewController 的 xib 文件中。MyCustomView 使用 IBOutlet 属性连接视图控制器。

当视图控制器被加载时，MyCustomView 的

```
- (id)initWithCoder:(NSCoder*)coder 
```

方法被调用，但它的标签都没有显示在视图控制器的视图中。我怎样才能解决这个问题？

我已经知道如何使用以下代码通过代码添加自定义 UIView：

```
NSArray *nibContents = [[NSBundle mainBundle] loadNibNamed:@"MyCustomView" 
                                                     owner:self 
                                                   options:nil];
MyCustomView *view = [nibContents objectAtIndex:0];
[self.view addSubview:view]; 
```

但我想知道如何通过 xib 文件添加。我已经搜索了一段时间，但未能找到答案，所以如果这是重复的，请指出正确的答案。

* * *

以下是自定义视图 xib 和视图控制器 xib 的图像：

![在此处输入图像描述](../Images/8b8e4eec5badfdf09a802998b7c51b6d.png)

![在此处输入图像描述](../Images/8ebfdb72b7aec047907b856f52835f15.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:57:55.340

恐怕你不能让 UIViewController 的 xib 加载你自己的视图的 xib。您要么需要以程序方式将这些标签添加到您自己的视图中，

或者

如代码中所示，以编程方式将视图添加到视图控制器的视图中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:08:25.723

我需要查看更多代码才能确定，但​​我怀疑您遇到的问题是自定义视图（UILabels 的父级）没有提供 UILabel 尺寸。它没有调用 -[UIView setFrame:]

要验证这一点，请在调试器中键入：

```
po [[UIApplication sharedApplication] keyWindow] recursiveDescription] 
```

这将打印视图层次结构的描述。检查 UILbals 的框架是什么。

# delphi - 如何将记录从主机转换为网络字节顺序（大端）？

> ID：13505211
> 
> 赞同：1
> 
> 时间：2012-11-22T02:47:15.057
> 
> 标签：delphi, delphi-xe3

我有一个记录：

```
 Tconnecting = record
  var
    a: int64;
    b: integer;
    c: integer;
  end; 
```

我需要使用 UDP 协议发送到服务器

我填

```
 packet.a := StrToInt64('0x1234567890');
  packet.b := 0;
  packet.c := RandomRange(1, 9999999); 
```

并发送

```
 SetLength(send_data, sizeof(packet));
  send_data := RawToBytes(packet, SizeOf(packet));
  udp.SendBuffer(make_it_big_endian(send_data)); <-- the question... "network byte order" 
```

或者我做错了什么？我需要发送“大端”数据包

```
pack("N*", int64, int, int); (this is in PHP) 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T07:02:36.877

您实际上正在做的是将主机字节顺序转换为网络字节顺序。所有标准套接字库都提供了帮助函数来做到这一点。

例如，Winsock 提供 htons、htonl 等。相反，您有 ntohs、ntohl 等。如果您使用的是 Indy，那么等效的函数是`GStack.HostToNetwork`and `GStack.NetworkToHost`。

您应该将每个字段序列化为字节流，每个字段都由适当的 hton* 函数转换。然后你可以把字节流放在线上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:33:02.107

假设您的代码在 little-endian OS/Machine（如 Windows/Intel）中运行，您可以反转*数据包*的各个字节，例如，在您的 uses 子句中包含 FMX.Types 单元：

```
type
  Tconnecting = record
    a: int64;
    b: integer;
    c: integer;
  end;

procedure TForm1.Button1Click(Sender: TObject);
var
  Packet, BEPacket: Tconnecting;
begin
  packet.a := $0102030405060708;
  packet.b := $01020304;
  packet.c := $05060708;
  //big endian packet  
  BEPacket := Packet;

  ReverseBytes(@BEPacket.a, SizeOf(BePacket.a));
  ReverseBytes(@BEPacket.b, SizeOf(BePacket.b));
  ReverseBytes(@BEPacket.c, SizeOf(BePacket.c));

  Memo1.Lines.Add(Format('a: %16.16x => %16.16x', [Packet.a, BEPacket.a]));
  Memo1.Lines.Add(Format('b: %8.8x => %8.8x', [Packet.b, BEPacket.b]));
  Memo1.Lines.Add(Format('c: %8.8x => %8.8x', [Packet.c, BEPacket.c]));
end; 
```

# c++ - 我是否需要使用 COM（组件对象模块）

> ID：13505222
> 
> 赞同：6
> 
> 时间：2012-11-22T02:48:44.607
> 
> 标签：c++, windows, winapi, com, mfc

几天前，我开始阅读 COM。然后我的一个团队成员告诉我这是一项古老的技术，现在没有人使用它。

我的问题是：

1）如果它是一项旧技术，那么有什么替代方案。

2) 为什么我不需要使用 COM。即 COM 的缺点是什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T14:32:41.147

COM 与 C++ 一样是一种“旧技术”。仅仅因为它是旧的并不意味着它已经过时了。微软不断回归它的原因（Windows 8 大量使用它）是因为它是一种开销相对较低的基于对象的技术。在使用 COM 之前没有需要初始化的大运行时（尽管组件可以在需要时初始化运行时，例如 .NET CCW）。

接口/实现边界保持严格分离，因此它对于以面向对象的方式公开 Windows 功能很有用（以及基于 COM 的 Windows Shell 的 DirectX）。

COM 对什么是 COM 以及构建在 COM 之上的内容存在普遍误解。ActiveX、DCOM、OLE、COM+ 等都建立在 COM 之上，但没有定义 COM 是什么。COM 本身作为一项核心技术一直保持相对简单。

我说相对来说是因为 COM 并不完美。公寓模型可能会导致重大问题，例如需要应用程序泵送消息队列的跨公寓编组。早在 90 年代后期，人们就对 COM 发疯了，并且用 COM 组件制作所有东西，这给应用程序带来了不必要的复杂性。但是，它是一项经过良好测试的技术，如果使用得当，它运行良好，尤其是在为第 3 方公开或使用功能时。如果您想真正了解 Windows API，您需要了解 COM 的工作原理。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T04:29:36.460

> 1）如果它是一项旧技术，那么有什么替代方案。

COM肯定是旧的。Microsoft 的“替代品”是/是 .NET，但这意味着您需要与 CLR 一起使用（因此本机 C++ 无法使用，为此您需要 C++/CLI）。最新的替代方案现在称为 WinRT（Windows 运行时）。WinRT 目前仅适用于 Windows 8 和 Windows Server 2012。在最低级别，WinRT 实际上是 COM，但微软已经重新考虑了它的很多陷阱。与平台/语言无关的替代方案包括 Google Protocol Buffers、Apache Thrift 和 SOAP。

> 2) 为什么我不需要使用 COM。即 COM 的缺点是什么。

COM 的主要用途是进程间通信（IPC）。例如，如果您有两个用两种编程语言编写的应用程序并希望它们进行通信，那么 COM 是一种（特定于 Windows 的）解决方案。COM 在 90 年代被广泛用于 C++ 和 VB6 应用程序之间的通信。如果您不需要 IPC，那么您对 ​​COM 的前景非常低。我们今天在工作中最常使用 COM 来跨原生 C++ 应用程序和用 C# 编写的托管 .NET 应用程序进行 IPC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T15:19:37.407

最新的大型微软“技术”，用于编写 Windows 8 Metro 应用程序的 WinRT 运行时（无论现在叫什么......）完全依赖于 COM，因此它肯定不会过时。

# java - 如何在不弃用 tabhost 的情况下实现 Android 选项卡菜单

> ID：13505236
> 
> 赞同：4
> 
> 时间：2012-11-22T02:50:26.827
> 
> 标签：java, android, layout, android-fragments, android-tabhost

我的问题听起来很简单，但我似乎找不到足够的答案。

我正在尝试为平板电脑设计一个应用程序，该应用程序在屏幕的顶部四分之一有一些信息，然后是一个选项卡式菜单，用于在顶部四分之一下方提供信息。

基本上我正在寻找的是：

```
┌─────────────────────────────────────
│
│ Top of Page
│
├───────┬───────┬───────┬───────┬─────
│ Tab 1 │ Tab 2 │ Tab 3 │ Tab 4 │
│       └───────┴───────┴───────┴─────
│
│ Bottom of page
│
│
│
⁞ 
```

我最初打算使用带有多个选项卡的选项卡主机；但我意识到它现在已被弃用，因此我正在寻找最有效、最新的方法来为 Android 开发执行此操作。已经实现的最简单的东西是操作栏，但它位于应用程序的顶部——这也不是我想要的。

我在另一个线程上读到应该使用 Fragments ；但考虑到 tabhosts 的简单性，我不太明白片段如何替换它，因为据我所知，它没有内置的选项卡选项；仅列出。（当然我可能是错的）

我发现的其他选项是 ActionbarSherlock，并且只使用更改布局的按钮。

我想总的来说，我要问的是，重现我在那里的设计的最佳、最新的向后兼容方式是什么？

编辑：到目前为止，我从研究中发现的唯一一件事仍然是说我使用具有兼容性 API 的片段，或者只是使用按钮和 FrameLayout。我真的对使用操作栏不感兴趣，因为它不会低于应该在顶部的布局。

还是继续使用 TabHost 真的很糟糕，即使它已被弃用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-02T08:00:39.160

CMIIW，但我认为 tabhost 还没有被弃用。即使它被弃用了，也不意味着你不能使用它，它只是意味着有更好的选择。如果您认为自己真的想要并且舒适地使用它，请选择 Tabhost。

对于替代方式，您可以查看： [alternative of tabactivity](https://stackoverflow.com/questions/17379725/alternative-of-tabacitivity) 或者如果您想更好地理解使用 Tabhost[我如何使用 tabhost](https://stackoverflow.com/questions/11622539/how-do-i-use-tabhost-for-android)。

替代方法包括：使用带有选项卡式指示器的 ViewPager，例如 PagerTabStrip、ViewPagerIndicator 项目中的 TabPagerIndicator、PagerSlidingTabStrip 等。

使用操作栏中的选项卡（注意：这些选项卡将在某些设备尺寸和方向中转换为下拉列表）

使用 FragmentTabHost

在常规 Activity 中使用 TabHost 和 TabWidget

以下示例项目演示：

PagerTabStrip：[https ://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/TabPager](https://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/TabPager)

TabPageIndicator：[https ://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/VPI](https://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/VPI)

操作栏标签：[https ://github.com/commonsguy/cw-omnibus/tree/master/ActionBar/TabFragmentDemo](https://github.com/commonsguy/cw-omnibus/tree/master/ActionBar/TabFragmentDemo)

TabHost 和 TabWidget：[https ://github.com/commonsguy/cw-omnibus/tree/master/WidgetCatalog/Tab](https://github.com/commonsguy/cw-omnibus/tree/master/WidgetCatalog/Tab)

请注意，前三个示例都使用 ActionBarSherlock，因此它们在 Android 2.x 设备上运行。第四个应该在 Android 1.0 以后的任何设备上运行。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-22T04:31:37.753

您可以使用：

[android中的操作栏](http://developer.android.com/guide/topics/ui/actionbar.html)

# php - PHP 静态类变量、继承和垃圾回收

> ID：13505245
> 
> 赞同：1
> 
> 时间：2012-11-22T02:51:41.743
> 
> 标签：php, memory, inheritance, static

我在使用这样的继承静态变量设置的对象的脚本时遇到了一些内存问题。

```
class a
{
    public static $a = "a";
}

class b extends a
{
    private $instanceVar = 'hey';
    private $otherVar = 'you';

    public function DoStuff()
    {
        echo self::$a;
    }
} 
```

然后使用这样的类的代码

```
while(condition)
{
    $obj = new b();
    $obj -> DoStuff();
    unset($obj);
} 
```

我的问题是，取消设置 obj 会触发垃圾收集并取消其实例变量的设置，因为它还包含对继承的静态变量的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:55:40.447

`unset`在这段代码中没有带来任何东西。

无论有没有它，只要有可能，对象都会被成功收集。

> 将取消设置 obj 触​​发垃圾收集

不是不会。垃圾收集器将在有意义时自动调用。

> 因为它还包含对继承的静态变量的引用

它没有。对象不包含对静态属性的引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T06:41:40.263

如果您非常关心 GC 并且 PHP >= 5.3.0，请查看 [gc_collect_cycles](http://www.php.net/manual/en/features.gc.php)和一般的[垃圾收集](http://php.net/manual/en/function.gc-collect-cycles.php)

# c# - 如何在 WinForms 中制作自动滚动多行文本框？

> ID：13505248
> 
> 赞同：20
> 
> 时间：2012-11-22T02:51:48.013
> 
> 标签：c#, .net, winforms, textbox

> **可能重复：**
> [如何自动滚动到多行文本框的底部？](https://stackoverflow.com/questions/898307/how-do-i-automatically-scroll-to-the-bottom-of-a-multiline-text-box)

我使用多`TextBox`行在新行中输出一些信息，因为它来自`BackgroundWorker`.

每次有新行到达时，我可以让它滚动到最底部吗？

默认情况下，它似乎正好相反 - 每次有新行到达并`Text`更改属性时，它都会滚动到第一行。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-22T02:59:18.050

设置`TextBox`属性：

```
Multiline = True;
ScrollBars = Both; 
```

要自动滚动`TextChanged`事件：

```
textBox1.SelectionStart = textBox1.Text.Length;
textBox1.ScrollToCaret(); 
```

# javascript - 如何删除javascript中的类？

> ID：13505253
> 
> 赞同：1
> 
> 时间：2012-11-22T02:52:02.473
> 
> 标签：javascript, dom

```
<div id="tab1" class="nav left">
<ul>
<li><a href="/magento/" class="now">Home</a></li>
......
</ul>
</div> 
```

现在，我想删除`class="now"`或将类值设置为空。如果 url 不在 mangento 上，我使用以下代码。但我不知道如何写最后一部分。

```
window.onload = function removeNow() {
    var div = document.getElementById("tab1").getElementsByTagName("a");
    if (window.location.pathname != '/magento/') {
        div.removeClass();
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T02:57:19.217

在现代浏览器中，您可以使用[`classList`](https://developer.mozilla.org/en-US/docs/DOM/element.classList)API：

```
div.classList.remove( 'now' ); 
```

但是您的代码特有的一个问题：您必须循环才能删除该类。所以试试这个：

```
for ( var i = 0; i < div.length; i++ ) {

    div[i].classList.remove( 'now' );

} 
```

如果您的浏览器不支持`classList`，请使用此`removeClass`填充程序：

```
function removeClass( elem, name ) {

    var classlist = elem.className.split( /\s/ ), 
        newlist = [], 
        idx = 0;

    for ( ; idx < classlist.length; idx++ ) {
        if ( classlist[ idx ] !== name ) {
            newlist.push( classlist[ idx ] );
        }
    }

    elem.className = newlist.join(" ");

    return true;
} 
```

或使用[jQuery](http://jquery.com)（我们不需要使用`classList`or `className`）：

```
$('a').each(function() {

    if (window.location.pathname != '/magento/')
        $(this).removeClass();

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T02:53:09.790

设置[`className`](https://developer.mozilla.org/en-US/docs/DOM/element.className)属性：

```
div.className = ''; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:21:18.083

请注意，它[`getElementsByTagName`](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-A6C9094)返回一个（可能为空的）[NodeList](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-536297177)，因此：

```
var div = document.getElementById("tab1").getElementsByTagName("a"); 
```

是 ID 为“tab1”的元素的所有 A 元素后代的集合（因此“div”可能不是一个好名字）。

如果您只想删除第一个此类 A 元素的所有类值，则：

```
div[0].className = ''; 
```

将完成这项工作。但由于 NodeList 可能为空，以下内容会更健壮：

```
if (div[0]) {
    div[0].className = '';
} 
```

也许

```
div[0] && div[0].className = ''; 
```

这取决于您的编码风格和可维护性要求。

# java - Java：更改玩家编号

> ID：13505261
> 
> 赞同：2
> 
> 时间：2012-11-22T02:53:15.487
> 
> 标签：java

我正在编写一种在每个玩家轮到后切换玩家编号的方法。我正在使用一个布尔数组来跟踪仍在玩的玩家（尚未被淘汰）。所以游戏开始时的数组被初始化为true，是游戏中玩家人数的大小。当玩家被淘汰时，索引的相应值被设置为 false（例如，如果玩家 2 被淘汰，数组的第三个索引被设置为 false）。（注意：玩家 0 确实存在，所以如果有两个玩家在玩，他们是玩家 0 和玩家 1。）如果玩家编号等于最后一个玩家，那么它需要从头开始，找到第一个玩家还在游戏中。否则，玩家编号会增加到第一个仍在玩的玩家。这是我所拥有的：

```
public static int switchPlayer(int currentPlayer, boolean[] playerList) {
    if(currentPlayer == playerList.length) {
        for(int i = 0; i < playerList.length; i++) {
            if(playerList[i] == true) {
                currentPlayer = i;
                break;
            }
        }
    }
    else {
        for(int i = (currentPlayer+1); i < playerList.length; i++) {
            if(playerList[i] == true) {
                currentPlayer = i;
                break;
            }
        }
    }
    return currentPlayer;
} 
```

有什么改变或建议吗？它不太工作，看不到哪里出了问题。

我试图实现其中一个答案，但我不知道如何实现它。有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:07:12.240

如果您有玩家 0,1,2,3。那么长度为 4。但参数`currentPlayer`只能有 0-3 值，因为那是玩家编号，所以尝试改变这个：

```
if(currentPlayer == playerList.length) {
    for(int i = 0; i < playerList.length; i++) {
        if(playerList[i] == true) {
            currentPlayer = i;
            break;
        }
    }
} 
```

到：

```
if(currentPlayer + 1 == playerList.length) {
    for(int i = 0; i < playerList.length; i++) {
        if(playerList[i] == true) {
            currentPlayer = i;
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:56:28.327

如果您使用 ArrayList 数据结构来存储当前未淘汰的所有玩家会怎样。因此，当玩家被淘汰时，您可以从 ArrayList 中删除该对象。这样您就不需要使用布尔值来跟踪玩家状态。

```
public static int switchPlayer(int currentPlayer, ArrayList playerList) {
    // move to the next player
    currentPlayer++;

    // reset back to the first player if we reached the end player
    if(currentPlayer >= playerList)
        currentPlayer = 0;

    return currentPlayer;
} 
```

现在，最初，在您的代码的某些部分中，我认为您将值设置为“false”以指示用户已被淘汰。但是，我的想法是删除被淘汰的玩家。例如，如果您希望第二个玩家被淘汰，那么您可以在数组列表中执行以下操作：

```
list.remove(2); 
```

# android - android布局与大小变化重叠

> ID：13505263
> 
> 赞同：0
> 
> 时间：2012-11-22T02:53:25.173
> 
> 标签：android, layout

我对 Android 中的特定布局有疑问。

我想要实现的大约是这样的：http: [//imgur.com/xiN0u](http://imgur.com/xiN0u)

*   绿色区域应始终在屏幕底部可见（大小可以更改，但仅略微更改）
*   红色区域应填满屏幕顶部的其余部分。
*   青色区域（在红色布局内）是一个 ScrollView，可以更改大小，并且不应大于可用空间

会发生什么：当列表扩展时，取决于布局（我尝试过线性、相对、混合这些，......），红色或绿色区域与另一个重叠并且不再可访问： [http ://imgur.com/b7leA](http://imgur.com/b7leA)

我已经尝试了一天，无论我做什么，布局的某些部分总是重叠的。有没有办法告诉 ScrollView 只扩展到某个高度？我知道 maxHeight 不存在。我非常感谢每一个输入，因为这让我发疯了！这对 Android 来说可能吗？

# android - android sqlite中的一对多关系

> ID：13505268
> 
> 赞同：2
> 
> 时间：2012-11-22T02:54:10.590
> 
> 标签：android, sqlite, android-sqlite

我的 android sqlite 数据库中有一个包含表 Teachers、Subjects 和 Teachers_Subjects 的数据库。我的表的结构如图所示。![在此处输入图像描述](../Images/197933a52a06da4ae5d5f8fa8a35044f.png)

我需要查询表以获取与单个教师相关的所有科目行。
最初我有`_id`老师的。使用`teachers _id`我需要找到科目。
根据我的说法，首先我需要在**Teachers_Subjects 表**中找到与教师相关的所有行，然后使用结果行和带有**JOIN 语句**的 Subjects 表进行其他查询，以获取与该教师相关的所有行。
我想知道有没有更好的方法/查询来完成这个？如果没有，那么上述解决方案的查询应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:34:15.183

```
SELECT Subjects.*
FROM Teachers_Subjects JOIN Subjects
                       ON Teachers_Subjects.subject_id = Subjects._id
WHERE Teachers_Subjects.teacher_id = ? 
```

# lotusscript - 将 SQL 脚本转换为 Lotus 公式

> ID：13505269
> 
> 赞同：0
> 
> 时间：2012-11-22T02:54:18.360
> 
> 标签：lotusscript, lotus-formula

如何翻译这段代码？

选择 * from view.view where ageYear = "combobox.value"

我知道 sql 中的代码，但我不能在 lotus 脚本中这样做，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:27:14.347

@DBlookup 是你的朋友。我很久很久没有写公式了——我所有的 Domino 主要代码现在都在 Java 中，但是类似

```
 @dblookup("Notes": "NoCache"; "" : "ViewName"; "combobox.value"; columnnumber) 
```

您不能像在 SQL 中选择它们那样使用一个 @dblookup 来查找多个列。您将需要多个@dblookups。

此外，这假设您有一个按索引值排序的视图，在您的情况下是 ageYear。

如果您确实需要多个列，也许您应该使用 LotusScript 或 Java，或者重新分析您正在尝试做的事情。上下文会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:24:52.020

Lotus Notes 不是关系数据库。它是一个可编程的用户界面和面向文档的存储系统，都集成在一个包中。您需要学习 Notes 编程的要素。您不能只考虑 SQL 查询并“翻译”它。

在[上一个问题](https://stackoverflow.com/questions/13504623/how-to-call-and-sort-data-in-a-view)的上下文中，您可以使用表单和嵌入式视图来做您想做的事情。您不需要 LotusScript。肯对这个问题的回答已经为您指明了正确的方向。我的回答提供了另一个视角。

但是还有很多其他方法可以做你想做的事；在许多其他情况下，您可能希望从视图中选择文档。

# angularjs - AngularJS：嵌套在 ng-repeat 中的指令

> ID：13505272
> 
> 赞同：1
> 
> 时间：2012-11-22T02:55:17.563
> 
> 标签：angularjs

我有一个 angularjs web 应用程序，它的视图具有以下基本结构：

```
<ul>
    <li ng-repeat="entry in entries" ng-switch on="entry.type" logic-options >
         <div ng-switch-when=1 text-entry></div>
         <div ng-switch-when=2 other-entry></div>
    </li>
</ul> 
```

这里 text-entry 和 other-entry 是具有自己模板的指令，而 logic-options 是另一个具有模板和控制器的指令。

logic-options 指令提供了一些供子作用域使用的函数，并且具有 replace: false 以便它应该将其模板附加到 li 的末尾。text-entry 和 other-entry 指令只需插入一些模板，这些模板也可用于其他视图。

当我运行它时，逻辑选项指令将呈现并似乎起作用，但内部指令（文本条目和其他条目）不会。

在控制台中，我收到错误：

```
Error: Argument '?' is required qa@... 
```

是什么导致了这个错误，我该如何纠正它？

一个演示这个问题的小提琴：http: [//jsfiddle.net/cubicleWar/c3mTT/1/](http://jsfiddle.net/cubicleWar/c3mTT/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:48:10.750

我相信你应该包含子元素，你也可能希望避免将“ng-switch”指令放在不同的层，这样它就不会与其他指令冲突。

```
app.directive('logicOption', function() {
  return {
    replace: false,
    transclude: true,
    template: "<div ng-transclude>{{entry.type}} : This is the logic stuff</div>"
  };    
}); 
```

[http://jsfiddle.net/YusCU/](http://jsfiddle.net/YusCU/)

# javascript - 如何根据具有 url id 作为属性的 li 点击到达新位置

> ID：13505273
> 
> 赞同：0
> 
> 时间：2012-11-22T02:55:23.507
> 
> 标签：javascript, jquery, html, model-view-controller

嗨，我有一些代码，例如：

```
<ul>
  <li data-id="1"></li>
  <li data-id="2"></li>
  <li data-id="3"></li>
</ul> 
```

在脚本中：

```
$('li').click(function () {

            window.location.href = '@Url.Action("View", "People", new { id = $(this).data('id')})';
        }); 
```

我想要实现的是，当用户单击列表项时，它会重定向到：

人/视图/id

其中 id 是列表项的 id 属性。

麻烦的是我无法弄清楚代码有什么问题。

$(this).data('id') 部分有一个波浪形的下划线并表示：

',' 或 '}' 预期。

抱歉，这可能是一个非常愚蠢的问题，但我无法正确解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:19:02.790

您不能混合服务器和客户端代码。他们不相互影响。

我猜你需要做这样的事情：

```
window.location.href = '@Url.Action("View", "People")' + "/" + $(this).data('id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:36:22.537

Url.Action 方法在 javascript 中不起作用。它是服务器端 MVC 的一部分。您可以直接在 MVC 视图中生成链接，例如：

```
<ul>
  <li data-id="1"><a href="@Url.Action("View", "People", new { id = 1})">...</a></li>
  <li data-id="2"><a href="@Url.Action("View", "People", new { id = 2})">...</a></li>
  <li data-id="3"><a href="@Url.Action("View", "People", new { id = 3})">...</a></li>
</ul> 
```

data-id 属性可能会过时。如果您仍然需要 id 客户端，我建议您使用隐藏字段。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T03:05:38.960

您可以使用下面的代码，

```
window.location.href = '@Url.Action("View", "People", new { id = $(this).attr("data-id") })'; 
```

# java - Java：带有char数组的println给出乱码

> ID：13505274
> 
> 赞同：27
> 
> 时间：2012-11-22T02:55:29.273
> 
> 标签：java, arrays, char, output

这就是问题所在。这段代码：

```
String a = "0000";
 System.out.println(a);
char[] b = a.toCharArray();
 System.out.println(b); 
```

返回

```
0000
0000

```

但是这段代码：

```
String a = "0000";
 System.out.println("String a: " + a);
char[] b = a.toCharArray();
 System.out.println("char[] b: " + b); 
```

返回

```
字符串 a：0000
字符 [] b: [C@56e5b723

```

世界上到底发生了什么？似乎应该有一个足够简单的解决方案，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-22T03:01:32.207

当你说

```
System.out.println(b); 
```

它导致调用`print(char[] s)`then`println()`

JavaDoc`print(char[] s)`说：

> 打印一个字符数组。字符根据平台默认的字符编码转换为字节，这些字节完全按照 write(int) 方法的方式写入。

所以它执行一个字节一个字节的打印输出。

当你说

```
System.out.println("char[] b: " + b); 
```

它导致对 的调用`print(String)`，因此您实际上正在做的是附加到`String`an上`Object`调用-- this 与所有默认情况一样，并且在 an 的情况下，打印引用的值（内存地址）。`toString()``Object``Object``Array`

你可以这样做：

```
System.out.println("char[] b: " + new String(b)); 
```

请注意，这是“错误的”，因为您不关心编码并且使用系统默认值。尽早了解编码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T02:58:30.133

采用

```
System.out.println("char[] b: " + Arrays.toString(b)); 
```

你得到的乱码是类名后跟对象的内存地址。当您尝试在 b 中附加一个字符串时会出现问题，`char[] b:`在这种情况下会调用 char 数组 b.toString() 方法，因此会打印 [C@56e5b723。

[ 表示它是一个数组 C 表示本例中的类 char @56e5b723 表示内存位置

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-22T03:02:46.717

```
System.out.println("char[] b: " + b); 
```

这就像

```
System.out.println(("char[] b: " + b.toString()); 
```

您可以查找“Object.toString()”

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-22T03:02:14.560

数组的`toString()`方法（当你这样做时调用的方法`"..." + b`）仅用于提供调试输出。没有特殊情况 a`char[]`会`toString()`为您提供原始字符串 - 所有类型的数组都具有相同的`toString()`实现。

如果要从 char 数组中获取原始字符串，请使用：

```
String a2 = new String(b); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-26T06:56:38.437

使用 3:e 行！

```
Scanner input = new Scanner(System.in);
char[] txt = input.next().toCharArray();
System.out.println((char[])txt); 
```

# sql - 从 SQL Server 中的表中获取 INSERT 的打印结果

> ID：13505277
> 
> 赞同：0
> 
> 时间：2012-11-22T02:55:49.767
> 
> 标签：sql, sql-server, sql-server-2005

> **可能重复：**
> [SQL Server 2005 - 以编程方式导出表（运行 .sql 文件以重建它）](https://stackoverflow.com/questions/20363/sql-server-2005-export-table-programatically-run-a-sql-file-to-rebuild-it)
> [从 SQL Server 表生成 INSERT 语句](https://stackoverflow.com/questions/13504884/generate-insert-statements-from-a-sql-server-table)

我在 SQL Server 2005 中有一个表，想要打印出插入的内容，以便我可以将它们复制并粘贴到我的生产服务器中（我不能直接链接到生产服务器）。

我只想从一个非常大的表中打印出 X 条记录。

```
select * from data where tableID > 10100; 
```

以上是我想用来确定要为其生成插入的记录的条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:02:49.233

尝试执行此操作的**众多**第三方工具之一：

1.  [SQL Server 2008 R2 - 为表生成 INSERT 语句](http://blogs.msdn.com/b/martijnh/archive/2010/06/24/sql-server-2008-r2-generating-insert-statements-for-a-table.aspx)（我相信这也有效/也可用于 2005 版本）

2.  [请参阅有关同一主题的其他 SO 问题](https://stackoverflow.com/questions/982568/what-is-the-best-way-to-auto-generate-insert-statements-for-a-sql-server-table)（以及答案！）

3.  [用于生成 INSERT 语句的 SQL Server 2005 脚本](http://www.keylimetie.com/blog/2009/3/24/sql-server-2005-script-to-generate-insert-statements/)

4.  [为 SQL Server 表生成插入语句](http://www.sqlservercurry.com/2009/07/generate-insert-statements-for-sql.html)

或者只是简单的谷歌（或必应）！那里有**大量**的材料......

# android - 在 Facebook Android 上共享内容

> ID：13505279
> 
> 赞同：5
> 
> 时间：2012-11-22T02:56:02.867
> 
> 标签：android, facebook, android-intent, sharing

我使用 intent 和 Action.SEND 在 WhatsApp、twitter、Facebook 和 GMail 等社交网络上分享我的自定义消息。Gmail 和除 Facebook 以外的其他应用程序一切正常！如何自定义代码以在 Facebook 上分享内容？我确实使用 Facebook SDK 在 Facebook 上分享，但我想使用意图来做到这一点。

这就是我使用的：

```
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, knowTitle+"Read the full article via MomsApp by EnfaMama A+ at http://meadjohnsonasia.com.my/mobileapp");

sendIntent.putExtra(Intent.EXTRA_SUBJECT, "I just read "+knowTitle);
sendIntent.setType("*/*");
startActivity(Intent.createChooser(sendIntent, "Share Your Favorite Article")); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T08:33:04.433

我所做的实际上是拦截意图处理程序的选定目标，您可以使用您的 actionprovider 来做到这一点。假设您创建了一个通过 onclick 启动意图的项目。为此，您可以实例化一个 actionprovider 来执行此操作。这个 actionprovider 可以有一个 setOnShareTargetSelectedListener 来拦截您想要以不同方式处理的任何意图（或根本不处理 ^^）。请参阅下面的代码以了解如何配置您的 actionprovider。

```
 actionProvider.setShareIntent(createShareIntent());
    actionProvider.setOnShareTargetSelectedListener(new OnShareTargetSelectedListener(){

        @Override
        public boolean onShareTargetSelected(ShareActionProvider source,
                Intent intent) {
            if ("com.facebook.katana".equals(intent.getComponent().getPackageName()) && mfacebooksharer != null) {
                mfacebooksharer.shareStatus(subject, text);
                  return true;
                }
                return false;
        }

    }); 
```

无论何时选择Facebook，我都会使用我的MfaceBookSharer来处理意图并遵循Facebook API。当然，该 actionrpvider 需要有一个意图。（就像你想有目的的工作一样）。我使用下面的方法来创建意图。

```
 private Intent createShareIntent() {
        intentsetter.setIntentleave(true);
        Intent shareIntent = new Intent(Intent.ACTION_SEND);
        shareIntent.setType("text/plain");
        shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
        shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, text);          
        return shareIntent;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T06:31:47.780

根据 Facebook 的平台政策，您不能使用 `Intent.EXTRA_TEXT`. 它通常被认为是一个错误，但根据此处提交的错误报告[以及](https://developers.facebook.com/bugs/332619626816423/)此处[，](https://developers.facebook.com/bugs/363863587019268) Facebook 明确提到情况并非如此（这不是错误）。

您可以详细了解他们的[平台政策](https://developers.facebook.com/docs/guides/policy/application_integration_points/)，特别是**平台政策 IV.2**

*引自平台政策 IV.2：*

> 您不得预先填写与以下产品关联的任何字段，除非用户在工作流程的早期手动生成内容：流故事（Facebook.streamPublish 和 FB.Connect.streamPublish 的 user_message 参数，以及流的 message 参数。发布）、照片（标题）、视频（描述）、注释（标题和内容）、链接（评论）和 Jabber/XMPP。
> 
> 这些字段旨在让用户表达自己。预先填写这些字段会削弱用户语音的真实性。

您可以从您的应用程序分享*故事*的唯一方法是集成 Facebook SDK，根据您的帖子，您已经能够成功。这是唯一可用的选项（不幸的是）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T03:08:56.340

在 Android 中使用 Intent，您可以只分享一个不带文字的链接：

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_TEXT, "http://www.google.ca");
startActivity(Intent.createChooser(intent, "Share with")); 
```

它会工作的。如果你想分享文字和链接，你必须使用 Facebook SDK for Android：[https ://github.com/facebook/facebook-android-sdk](https://github.com/facebook/facebook-android-sdk)

# r - 表中列的百分比

> ID：13505288
> 
> 赞同：1
> 
> 时间：2012-11-22T02:57:17.147
> 
> 标签：r

我正在尝试在 R 中制作一些条形图。这是我目前所拥有的：![在此处输入图像描述](../Images/fd1c3650853d9b45605c182828eff4d1.png)

对于这个特定的图表，每个浏览器有多少响应对我来说并不重要，我只想知道每个浏览器的哪个百分比是肯定的，哪个百分比是否定的。

如何转换我正在使用的表格以使用“列百分比”而不是结果数量？有没有办法通过该列的总和来转换每一列？（我对 R 很陌生）谢谢！

**编辑：**抱歉信息不足。我没有安装任何额外的软件包，只是在 Ubuntu 上安装了 r-base（今天早上安装）。这是 dput 的输出：

```
structure(c(11L, 32L, 3L, 4L, 1L, 0L, 1L, 1L), .Dim = c(2L, 4L
), .Dimnames = structure(list(c("No", "Yes"), c("Chrome", "Firefox", 
"Internet Explorer", "Safari")), .Names = c("", "")), class = "table") 
```

**Edit2：**我发现这个功能似乎可以满足我的需求，但我不确定它为什么会起作用。

```
prop.table(mymat, margin=2)*100 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T03:12:44.013

你可以计算百分比并绘制它吗？

百分比 = 是/总票数，`data['Yes', ]` 选择“是”列并`colSums`计算每列的总数，因此：

```
barplot( data['Yes', ]/colSums(data) ) 
```

![在此处输入图像描述](../Images/44d9ee643e8178aa810db2f1d87bac69.png)

这是你的意思吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T03:17:21.163

假设两个级别

```
barplot(x / rep(apply(x, 2, sum),each=2)) 
```

[![图像](../Images/fe9b173bac869a9c89f4ddb4890f55a1.png)](https://i.stack.imgur.com/tD3Fq.png)

```
> apply(x,2,sum)
       Chrome           Firefox Internet Explorer            Safari 
           43                 7                 1                 2 
```

这是列的边距。它给出了列的总和。现在，如果我们想将 X 除以这些值，它必须以正确的顺序排列。数据按列优先顺序排列，因此当用作除法向量时，`apply(x,2,sum)`将循环使用错误的元素——如果你愿意，可以转置。

`each=2`命令中的设置`rep`将调用结果的一个元素应用于`apply`每一列（通过复制元素）。因此假设层数为 2。

对于更通用的解决方案，您可以使用`each=nrows(x)`.

# url - 如何在网络上跟踪我的网站 URL？不使用谷歌分析

> ID：13505291
> 
> 赞同：2
> 
> 时间：2012-11-22T02:57:26.053
> 
> 标签：url, tracking

很抱歉这个简单的问题，但我已经在论坛中搜索了 2 个小时。

目标：

我想在网络上跟踪我的网站 URL。我目前正在使用谷歌分析进行跟踪，这对我来说很好。但我想向我的用户展示他们登录帐户时点击链接的位置。

我能做到这一点的最好方法是什么？如果有帮助，我正在使用支持的 php。我的目标是提供：他们的链接被点击了多少次以及从哪里点击了 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:16:47.150

编辑：我希望其他人能给你一个更好的提示，但由于这个问题似乎没有吸引很多人，我会尽量给你一个更好的答案。

因此，将您的问题分解为多个部分，您希望在每次访问页面时触发一段代码。您应该能够在某一时刻在页面与其所有者之间进行映射 - 在呈现统计信息时。如果您想“偷工减料”并有一个简单的解决方案，您只需在数据库中插入一个描述事件的新条目。你似乎只对它被访问的次数感兴趣，所以对于一个特定的`pageID`，你可以`count`知道有多少条目，所以这些数据可以直接从你的数据库中计算出来。

现在，有趣的部分是弄清楚访客来自哪里。如果您查看[此处](http://php.net/manual/en/reserved.variables.server.php)`$_SERVER`记录的 PHP 变量，您会发现它包含许多有趣的信息。我想你最感兴趣的是哪个包含`'HTTP_REFERER'`

> 将用户代理引向当前页面的页面地址（如果有）。这是由用户代理设置的。不是所有的用户代理都会设置这个，有些提供修改 HTTP_REFERER 作为一个特性的能力。简而言之，它不能真正被信任。

在 Stack Overflow 上快速查看，我没有找到更可靠的来源，所以如果可用，我想这是您可以使用的唯一数据。

如果您想让事情变得更健壮，您可以记录`IP address`访问者的次数，并且只计算`1`每天的访问次数。

因此，概括地说，您创建一个记录访问的表，其中包含`pageID`and `referer`（如果您想严格，可以选择`IP address`and`date`以防止同一用户在同一天多次插入）。您向每个页面添加一个函数调用来记录您的信息`pageID`，可能是您在内部使用的 URL 或 ID？和 的值`$_SERVER['HTTP_REFERER']`。然后，当用户想要查看他的统计信息时，您会查找`pageID`属于他的所有数据，然后提取该`count`页面的条目数和所有引用者。

我希望我的解释清楚。它绝对不是万无一失的，但它很简单，应该可以完成这项工作，并且可以很快编程。

旧答案：Piwik（[在此处](http://piwik.org/)记录）与 Google Analytics 非常相似。由于您拥有存储数据的数据库，因此您可能可以按照您想要的方式提取您想要的所有数据，并按照您想要的方式对其进行操作，而无需依赖其他人（Google）。

# twitter - Hashtag 哈希表

> ID：13505293
> 
> 赞同：0
> 
> 时间：2012-11-22T02:57:58.693
> 
> 标签：twitter, hash, hashmap, hashtable, hashtag

有人知道 twitter 是一个巨大的哈希表还是哈希图？如果是这样，整个“主题标签”座谈会是从哪里来的？我只是问，因为我觉得这将是一个相当酷的琐事/社会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:08:09.843

它是一个标签，而 octothorpe、“数字符号”或“井号”也被称为“哈希符号”——参见[http://en.wikipedia.org/wiki/Hash_symbol](http://en.wikipedia.org/wiki/Hash_symbol)

# sql - 排名上的 SQL 查询

> ID：13505294
> 
> 赞同：0
> 
> 时间：2012-11-22T02:58:08.707
> 
> 标签：sql

嗨，任何人都可以帮助我解决这种情况。

```
studentname sub1 sub2 sub3
abc          10   20   30
def          20   50   70
fsa          20   10   80 
```

结果必须看起来像

```
StudentName     Rank 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T03:07:47.890

您可以使用

```
RANK ( ) OVER ( [ partition_by_clause ] order_by_clause ) 
```

在此处查看： [RANK (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms176102.aspx)

试试这个：如果你想获得三个主题的 ave((sub1+sub2+sub3)/3)

```
select StudentName, RANK() OVER  (order by (sub1+sub2+sub3)/3 asc) Rank
from TableName 
```

# pca - 对二进制数据使用主成分分析 (PCA)

> ID：13505296
> 
> 赞同：0
> 
> 时间：2012-11-22T02:58:15.343
> 
> 标签：pca, svd

我在二进制属性上使用 PCA 来减少问题的维度（属性）。初始维度是 592，在 PCA 之后维度是 497。我之前在另一个问题中的数字属性上使用过 PCA，它设法在更大程度上减少了维度（初始维度的一半）。我相信二元属性会降低 PCA 的能力，但我不知道为什么。您能否解释一下为什么 PCA 不像在数字数据中那样好用。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T15:03:52.920

0/1 数据的主成分可以缓慢或快速地下降，连续数据的 PC 也是如此——这取决于数据。你能描述一下你的数据吗？

下图旨在比较连续图像数据的 PC 与量化为 0/1 的相同数据的 PC：在这种情况下，不确定。

将 PCA 视为一种获取大矩阵近似值的方法，
首先使用一个术语：近似 A ~ c UV ^T , c [Ui Vj]。
考虑一下，A 说 10k x 500：U 10k 长，V 500 长。第一行是 c U1 V，第二行是 c U2 V ...所有行都与 V 成正比。类似地，最左边的列是 c U V1 ...所有列都与 U 成正比。
但是如果所有行都是相似（彼此成比例），它们无法接近具有行或列 0100010101 的 A 矩阵 ...
更多术语，A ~ c1 U1 V1 ^T + c2 U2 V2 ^T + ...，我们可以更接近A：越小 c [i]越高，越快。（当然，所有 500 个项都精确地重新创建 A，在舍入误差内。）

![在此处输入图像描述](../Images/d63234dd78bae93468384807ef2ad303.png) 第一行是“lena”，一个著名的 512 x 512 矩阵，具有 1 项和 10 项 SVD 近似值。底行是 lena 离散化为 0/1，同样有 1 项和 10 项。我认为 0/1 的 lena 会更糟——评论，有人吗？

（UV ^T也写作 U ⊗ V，称为“二元”或“外积”。）

（维基百科文章 [奇异值分解](http://en.wikipedia.org/wiki/Singular_value_decomposition) 和[低秩近似](http://en.wikipedia.org/wiki/Low-rank_approximation) 有点数学重。David Austin 的 AMS 专栏， [我们推荐奇异值分解](http://www.ams.org/featurecolumn/archive/svd.html) 给出了一些关于 SVD/PCA 的直觉——强烈推荐。）

# sql - 如何将 SQL 语句转换为 SQLite 语句？

> ID：13505298
> 
> 赞同：-2
> 
> 时间：2012-11-22T02:58:31.637
> 
> 标签：sql, sqlite

如何将此 SELECT 语句转换为 SQLite 语句？

```
SELECT count(`listId`) AS countP, 
       DATE_FORMAT( DATE_ADD(DATE_FORMAT(timestamp, '%Y-%m-%d %H:00:00'),
                             INTERVAL IF( MINUTE( timestamp )<30, 0, 1) HOUR), '%H:30') AS hourP
  FROM `polldata` 
 WHERE `gcId`=01
   AND `listId`=02
 GROUP BY hourP
 ORDER BY hourP
 LIMIT 0, 30 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:14:53.823

SQLite 没有原生时间戳类型。假设时间戳存储为`yyyy-mm-dd hh:mm:ss`字符串，查询将如下所示：

```
SELECT count(`listId`) AS countP,
       strftime('%H:30',
                timestamp,
                CASE WHEN substr(timestamp, 15, 2) < '30'
                     THEN '1 hours'
                     ELSE '0 hours'
                END) as hourP
  FROM `polldata` 
 WHERE `gcId`=01
   AND `listId`=02
 GROUP BY hourP
 ORDER BY hourP
 LIMIT 0, 30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:40:05.107

您想要获取一个现有的 MySQL 文件并将其转换为它的 SQL Lite 等效文件。

这个过程有两个部分：

1.将DDL从一个SQL数据库翻译到另一个（DDL ==“数据定义语言”）

2.将数据从一种模式迁移到另一种模式。

每个 SQL 供应商都从 ANSI SQL 开始，并添加了自己的专有语法。因此，您必须从 MySQL 定义中创建一个 SQL Lite 模式（表、列、索引等）。

数据迁移过程称为 ETL（“Extract-Transform-Load”）。您可能必须从 MySQL 中处理一些数据才能将其导入 SQL Lite。

最好的方案是将 MySQL 数据导出到 .csv 文件，在 SQL Lite 中创建表，然后导入 .csv 文件。

参考这里

[http://www.codeproject.com/Articles/26932/Convert-SQL-Server-DB-to-SQLite-DB](http://www.codeproject.com/Articles/26932/Convert-SQL-Server-DB-to-SQLite-DB)

# java - Android：图片大小会影响SURF的处理时间吗

> ID：13505300
> 
> 赞同：0
> 
> 时间：2012-11-22T02:58:38.407
> 
> 标签：java, android, image-processing, opencv, surf

由于 SURF 特征匹配花费了大量的处理时间。所以我决定调整位图的大小以缩短 SURF 的处理时间。但是我知道如果将位图变小会花费更少的 SURF 处理时间吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T04:30:30.160

当然，这是加快大多数图像处理算法的一种方法。

在 OpenCV 中，您还可以在构造函数中指定参数`_nOctaveLayers`和。这些参数决定了算法检查特征点的不同比例的数量。如果减少这些，您将获得更快的检测时间，但您也会错过未检查的尺度上的特征点。`_nOctaves``SURF`

这些加速是基于点的*检测*。`SURF`如果您严格谈论匹配点，那么图像中的点数是运行时间的最大决定因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:47:43.897

你试过orb吗？您可以在 samples/python2/plane_tracker.py 下找到 orb 示例用法。我还没有在手机上尝试过，但在电脑上它可以同时快速匹配多个目标，而 surf 只在一个目标上苦苦挣扎。

# javascript - Javascript json，检查所有未定义（'null'）的键并设置默认值

> ID：13505304
> 
> 赞同：0
> 
> 时间：2012-11-22T02:58:55.007
> 
> 标签：javascript, arrays, json, null, undefined

首先，我想补充一下，我学习 javascript 已经有 2 天了。在我想要得到的东西上，我已经遥遥领先了，但是就这样。

我有一个 json 数组，我可以从中获取要在页面中替换/插入的数据。我遇到的第一个问题是，如果它遇到一个空（'null'）键，它就会停止。甚至不会尝试继续。

```
document.getElementById("id1")src=json.img1.link;
document.getElementById("id2")src=json.img2.link;
document.getElementById("id3")src=json.img3.link; 
```

json.img2.link 为空（来自 json 的“空”响应。）。javascript 将不会替换“id2”，但它也不会替换“id3”。

我现在正试图找到一个解决方案，如果没有别的，至少设置一个默认值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T03:00:56.757

脚本没有继续执行，因为它遇到了一个错误——试图访问未定义对象的属性链接

尝试

`document.getElementById('id2').src = json.img2 ? json.img2.link : 'defaultLink';`

这样，您正在检查`undefined`img2 中的（即 null）对象并分配默认值。这假定未定义（空）的是 img2 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:05:43.357

实际上我认为你的代码根本不应该工作，你错过了`.`之前的`src`所以，试试

```
document.getElementById("id1").src=json.img1.link;
document.getElementById("id2").src=json.img2.link;
document.getElementById("id3").src=json.img3.link; 
```

并让我们知道这是否不能解决问题。

顺便说一句，+点学习 JavaScript 而不仅仅是直接进入 jQuery！

# javascript - Jquery Mobile 和 Cordova 事件 Pageinit 绑定不起作用

> ID：13505305
> 
> 赞同：1
> 
> 时间：2012-11-22T02:59:02.937
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我在这之后发疯了......即使在堆栈溢出中我也关注了很多页面，但我无法让它工作

引导程序.js

```
var jqmReady = $.Deferred(),
pgReady = $.Deferred();

// jqm page is ready
$(document).bind("pageinit", jqmReady.resolve);

// phonegap ready
document.addEventListener("deviceready", pgReady.resolve, false);

// all ready, throw a custom 'PG_pageinit' event
$.when(jqmReady, pgReady).then(function () {
  $(document).trigger("xpageinit"); 
}); 
```

索引.html

```
$(document).bind("xpageinit", function(){

//Login Page
$('#login').live( 'pagebeforeload',function(event){

    $('a').buttonMarkup({ inline: true });
    $("#logo").fadeIn('slow', function(){
        $(this).animate({'top': '-=80px'},'slow', function(){
        $(".formLogin").fadeIn('slow');
        });    
    });  

    });

    }); 
```

但这不会以任何方式起作用，有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:23:43.853

我相信您可能绑定了错误的方法。尝试绑定到 pagebeforeshow 事件，而不是绑定到 pagebeforeload。当框架要加载外部页面时会触发 pagebeforeload。我只是在这里猜测，因为您没有提供有关 #login 是什么的更多详细信息（我假设它是一个具有 data-role="page" 属性的 div。

# python - 在 Python 浏览器自动化（使用 Selenium）中处理多个操作的最佳方法是什么？

> ID：13505312
> 
> 赞同：0
> 
> 时间：2012-11-22T03:00:11.207
> 
> 标签：python, selenium

我正在用 python 编写一个程序，它使用 selenium 在网站上自动为我出价。在网站的投标部分，他们经常列出奖品和他们的“剩余时间”倒计时。有小奖，也有大奖。较大的奖品需要更多的彩票才能中奖，因为有更多的人想要参与其中（这取决于概率和您进入的彩票数量）。

对于小奖品，我有足够的门票，我可以在他们到来时和他们的计时器用完之前竞标。但是，对于大奖，我中奖的几率不足以中小奖，然后在计时器接近零时突然中奖。由于您可以多次竞标同一个奖品，因此我决定要逐步竞标大奖品，并且只使用我的一部分门票，直到我达到该奖品的“目标”门票数量。

问题是，虽然我有一个连续运行的功能，对小奖品出价（每次出价后页面刷新，所有出价都在同一页面上），但我还想在我的程序中设置某种计时器告诉它每隔 2 分钟就一个大奖出价，直到达到我想为该奖项出价的门票数量。那么我应该打开一个带有硒的新浏览器窗口来获得大奖吗？还是我应该尝试以某种方式将大奖的竞标与较小的奖相匹配并使用相同的浏览器窗口？

为了“简化”的目的，我有点希望能够做第二个，但我不确定我如何适应大奖的定时竞标和小奖的随机竞标。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:15:42.180

这是 C# 中的一个小代码片段，您可以在其中设置出价间隔/剩余时间。

一旦时间/间隔完成，它会触发一个事件***LargePrize_Tick***，这反过来将竞标大奖，直到您的门票用完为止。

```
static void Timer_Ticking(int Interval_in_Secs)
    {
        Timer timer = new Timer(); 
        timer.Interval = (1000) * (1);              // Timer will tick evert second
        timer.Enabled = true;                       // Enable the timer
        timer.Start();                              // Start the timer
        timer.Interval = Interval_in_Secs*1000;    //Equvivalent in milliseconds.
        System.Threading.Thread.Sleep(TimeSpan.FromSeconds(Interval_in_Secs));
        timer.Elapsed += new ElapsedEventHandler(LargePrize_Tick);
    }

    static void LargePrize_Tick(object sender, EventArgs e)
    {
        Console.WriteLine("Done with interval ");

        //Open Browsers
        //Bid for Prize till ticket is Available
        //Close browser after bidding.

    } 
```

我希望这会有所帮助....一切顺利:)

# css - 山狮上 Safari 6.0.2 上 CSS 渲染 box-shadow 的神器

> ID：13505314
> 
> 赞同：8
> 
> 时间：2012-11-22T03:00:29.793
> 
> 标签：css, html, safari, artifacts

我在我的 Macbook Pro 上的 Mountain Lion 上的 Safari 6.0.2 上有一些工件，使用任何其他浏览器，一切都按预期呈现。但奇怪的是在我的 iMac 上使用 Safari 和 OSX Lion 我无法重现这个问题。不同的操作系统版本，不同的 GPU，错误？还是我做错了什么？

复制： http: [//jsfiddle.net/gt2g4/](http://jsfiddle.net/gt2g4/)和[http://jsfiddle.net/T966K/1/](http://jsfiddle.net/T966K/1/) ![CSS 工件](../Images/e98652469218edbd1aa74771a24d9868.png)

CSS：

```
#test{

    width: 150px;
    height: 150px;

    border-radius: 50%;

    background-color: blue;
    box-shadow: inset 0px 3px 0px yellow,
                inset 0px -3px 0px darkred,
                -3px -4px -0px blue;
} 
```

关于本机：

> MacBook Pro 13 英寸，2012 年中。
> 
> *   显卡 英特尔高清显卡 4000 384 MB。
> *   软件 OS X 10.8.2 (12C60)。
>     
>     
> *   Safari 版本 6.0.2 (8536.26.17)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:06:25.160

自 Apple 于 2013 年 3 月 14 日推出的 OS X 10.8.3 组合更新以来，这些工件现已不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:15:19.813

**更新：** ![使用 5.1.7 尝试 1](../Images/f1756f44757289ed55558b96584b4aa8.png) ![尝试二](../Images/264328094972b32e7422c26fb3e35568.png)

在旧版本的 Windows Safari 上，我可以复制该错误。但是，对于 Windows 的最新版本，我无法使用它。正如我所说，在 Windows 上，当我使用`webkit`扩展时它消失了。

但苹果讨厌 Windows 用户；所以我不能在任何其他版本上测试它。

这很可能是 Safari 浏览器读取和实现代码的方式中的一个错误；最近有变化吗？或者可能有一些不同的操作系统，硬件变化。

尝试直接从 ATI 或 Nvidia 更新您的显卡驱动程序。确实很奇怪。

* * *

为了获得最佳的 Safari 兼容性；你可能想使用`-webkit`扩展。您可以[在此处找到更多详细信息：](http://www.webkit.org/)

您应该尝试的示例如下：

```
-webkit-box-shadow: inset 0 3px 0 yellow,
                    inset 0 -3px 0 darkred,
                    -3px -4px 0 blue; 
```

为了最大限度地提高我使用的兼容性；

*   `-moz`对于 Mozilla 火狐。
*   `-webkit`适用于 Safari 和 Chrome。
*   `-o`歌剧。

然后通常是层叠样式表。当然，它添加了一些额外的代码，但它倾向于最大限度地提高兼容性。希望这会有所帮助。我在 Windows 上重现了您的 Safari 问题；但`-webkit`它消失了。

但如上所述；某些软件或硬件可能会导致伪影。它可能发生在超频硬件上。希望这会有所帮助。

# java - 获取属性文件的绝对路径

> ID：13505315
> 
> 赞同：0
> 
> 时间：2012-11-22T03:00:52.363
> 
> 标签：java, path

我的 Java EE 应用程序包含许多子项目，它们应该使用单个配置文件来连接到数据库。我打算写一个Java类，做成一个独立的jar，用来读取数据库连接参数`datasource.xml`，放到独立jar的路径上。

我想问的问题：

1.  如何动态获取的绝对路径`datasource.xml`？
2.  第一个问题的解决方案可以在所有操作系统（如 UNIX 等）中运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T03:39:40.163

您必须处理的第一个主题是存储该文件的位置。

根据您的问题，您将把文件存储在文件系统的某个位置，在实际应用程序包的外部。因此，您绝对*必须*知道文件在文件系统上的真正位置才能访问它；你不能提前结束它，除非你使用环境变量来指示你的代码文件所在的位置。

一种更好的方法是将您的 XML 文件与 JAR 打包在一起。然后，您不必再担心绝对路径。只需使用`Thread.currentThread().getContextClassLoader().getResource()`，提供资源的包样式路径，您就会在任何可能找到的地方获得对它的引用。

如果您无法将文件与 JAR 一起打包，则可以将其存储在文件系统上的目录中，并将该目录添加到服务器的类路径查找序列中；一些应用服务器支持这一点。然后，您仍然可以使用类加载器来查找资源，而无需知道其绝对位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:11:33.263

那这个呢？在运行时将相对路径转换为绝对路径..我想这应该适用于所有环境......

```
File a = new File("/some/abs/path");
File parentFolder = new File(a.getParent());
File b = new File(parentFolder, "../some/relative/path");
String absolute = b.getCanonicalPath(); // may throw IOException 
```

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T03:11:38.707

您可以使用环境变量

```
String path = System.getEnv("MYVARIABLE");
File datasource = path + "/datasource.xml"; 
```

或者从固定位置中可用的属性文件中读取位置

```
Properties props = new Properties();
try {
    props.load("MyFixed.properties");
} catch(Exception e) {
    e.printStackTrace(); // Can do better
}
String path = props.getProperty("datasource.path");
File datasource = path + "/datasource.xml"; 
```

或者在使用 -D 启动 Jar 时传入 VM 参数

```
String path = System.getProperty("datasource.path");
File datasource = path + "/datasource.xml"; 
```

并打电话给

```
java -jar -Ddatasource.path=/my/path/to/datasource.xml my.jar 
```

# css - 如何删除 CSS 三角形？

> ID：13505317
> 
> 赞同：0
> 
> 时间：2012-11-22T03:00:58.253
> 
> 标签：css

如何删除没有子菜单的主菜单项上的 CSS 三角形？

见[http://v2.letsfaceitbeauty.ca](http://v2.letsfaceitbeauty.ca)

我认为这是相关的 CSS 代码，我相信“.has-sub”是正确的选择器，但我不知道怎么做。

```
#cssmenu > ul > li:hover:after { /* this is the arrow */
content: '';
display: block;
width: 0;
height: 0;
position: absolute;
left: 50%;
bottom: 0;
border-left: 10px solid transparent;
border-right: 10px solid transparent;
border-bottom: 10px solid #6796ff;
margin-left: -10px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T03:09:14.167

如果你知道构成三角形的 css 和你想要三角形的元素，只需将这两个部分放在一起，即将之前的规则替换为

```
#cssmenu > ul > li.has-sub:hover:after { /* this is the arrow */
   content: '';
   display: block;
   width: 0;
   height: 0;
   position: absolute;
   left: 50%;
   bottom: 0;
   border-left: 10px solid transparent;
   border-right: 10px solid transparent;
   border-bottom: 10px solid #6796ff;
   margin-left: -10px;
} 
```

# java - Java 无法保存文件

> ID：13505318
> 
> 赞同：1
> 
> 时间：2012-11-22T03:00:59.303
> 
> 标签：java, file, save

我正在尝试保存我的程序，但是每当我尝试保存一个存在的程序（因此第二次运行）时，它都会创建临时文件，但它不会覆盖旧文件。

这是代码。谁能找出为什么它不会用新文件覆盖旧文件？

```
public static void saveBallotData(int i)throws IOException{

    PrintWriter outputFile;
    outputFile = new PrintWriter("temp2.txt");
    File tempCheck = new File (list.get(i).getBallotNumber()+".txt");
    if(tempCheck.exists()){
        Scanner inputFile = new Scanner(tempCheck);
        for(int m = 0; m < list.get(i).getNumberOfChoices(); m++){
            if(list.get(i).getVote().equals(list.get(i).getChoice(m))){
                //outputFile.println(list.get(i).getChoice(m) + ":" + getInt(m, tempCheck) + 1);
                inputFile.nextLine();
            }
            else{
                outputFile.println(inputFile.nextLine());
            }
        }
    }
    else{
        for(int a = 0; a < list.get(i).getNumberOfChoices(); a++){
            if(list.get(i).getVote().equals(list.get(i).getChoice(a))){
                outputFile.println(list.get(i).getChoice(a) + ":" + "1");
            }
            else{
                outputFile.println(list.get(i).getChoice(a) + ":" + "0");
            }
        }
    }
    System.out.println("PHE");
    outputFile.close();
    File g = new File("temp2.txt");
    File f = tempCheck;
    f.delete();
    g.renameTo(f);
} 
```

# java - 使用 URL 引用桌面

> ID：13505320
> 
> 赞同：1
> 
> 时间：2012-11-22T03:01:01.220
> 
> 标签：java, file, url, desktop

我已经在 Google 上查找了一段时间，但我似乎无法找到或记得如何使用`URL`. 这真的让我很沮丧。我觉得应该是这样的：

```
URL url = new URL("C:\\Users\\Austin\\Desktop\\hi.gif"); 
```

但这只是行不通。我相信我应该放一些东西，`new URL`但我找不到它。我已经尝试了所有我能想到的搜索词。

如何将文件路径`String`转换为`URL`​​?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T03:04:37.793

```
// There are better ways to specify file paths, BNI.
File f = new File("C:\\Users\\Austin\\Desktop\\hi.gif");
URL url = f.toURI().toURL(); 
```

# python - 两个单词之间的Python文本解析

> ID：13505322
> 
> 赞同：1
> 
> 时间：2012-11-22T03:01:30.870
> 
> 标签：python, beautifulsoup

我正在使用 beautifulsoup 并想从网页上的两个单词之间提取所有文本。

例如，想象以下网站文本：

```
This is the text of the webpage. It is just a string of a bunch of stuff and maybe some tags in between. 
```

我想拉出页面上以 . 开头`text`和结尾的所有内容`bunch`。

在这种情况下，我只想要：

```
text of the webpage. It is just a string of a bunch 
```

但是，一个页面上可能有多个这样的实例。

做这个的最好方式是什么？

这是我目前的设置：

```
#!/usr/bin/env python
from mechanize import Browser
from BeautifulSoup import BeautifulSoup

mech = Browser()
urls = [
http://ca.news.yahoo.com/forget-phoning-business-app-sends-text-instead-100143774--sector.html
    ]

   for url in urls:
        page = mech.open(url)
        html = page.read()
        soup = BeautifulSoup(html)
        text= soup.prettify()
            texts = soup.findAll(text=True) 

    def visible(element):
        if element.parent.name in ['style', 'script', '[document]', 'head', 'title']: 
        # If the parent of your element is any of those ignore it

            return False

        elif re.match('<!--.*-->', str(element)):
        # If the element matches an html tag, ignore it

            return False

        else:
        # Otherwise, return True as these are the elements we need

          return True

    visible_texts = filter(visible, texts)
    # Filter only returns those items in the sequence, texts, that return True. 
    # We use those to build our final list.

    for line in visible_texts:
      print line 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T03:44:17.900

因为您只是在解析文本，所以您只需要正则表达式：

```
import re
result = re.findall("text.*?bunch", text_from_web_page) 
```

# xcode - RemoveFromSuperview 没有清理内存

> ID：13505324
> 
> 赞同：0
> 
> 时间：2012-11-22T03:01:41.983
> 
> 标签：xcode, memory, label

我以编程方式在函数中创建标签并将它们放入 NSMutableArray，然后从另一个函数中删除它们。问题是标签实际上从屏幕上消失了，但它们仍在使用内存，并且当一段时间过去时，程序开始运行非常缓慢。

**这是我的代码：**

*这是创建标签的函数。*

```
- (void)CrearEstrellas{
    for(int i=0; i< 10; i++)
    {
        float x = arc4random() %300;
        float y = arc4random() %100;
        UILabel *estrella = [[UILabel alloc] initWithFrame:CGRectMake(0, 100, 4, 4)];
        estrella.tag = i;
        estrella.center = CGPointMake(x,y-100);
        estrella.text = @".";
        estrella.textColor = [UIColor whiteColor];
        [self.view.superview addSubview: estrella];
        [arrayEstrellas insertObject:(estrella) atIndex: i];
    }

} 
```

*这是从超级视图中删除它们的函数：*

```
- (void)Lineatiempo{
    for(int i=0; i<[arrayEstrellas count]; i++)
    {
        UILabel *estrella = [arrayEstrellas objectAtIndex:(i)];
        float x = estrella.center.x;
        float y = estrella.center.y;
        estrella.center = CGPointMake(x,y+10);
        if(estrella.center.y>200){
            [estrella removeFromSuperview];
             estrella = nil;
        }
    }
} 
```

我想知道我做错了什么！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:05:09.783

您将视图添加到数组中。`NSArray`（和`NSMutableArray`）保留您添加到它们的对象。在您从数组中删除它们之前，它们不会被释放。

因此，除了调用之外，`removeFromSuperview`您还必须从数组中删除视图。

# asp.net - 不允许使用邮箱名称

> ID：13505332
> 
> 赞同：1
> 
> 时间：2012-11-22T03:03:27.557
> 
> 标签：asp.net

我在使用“system.net.mail”发送测试电子邮件时遇到问题。每次按下提交按钮时，都会出现错误消息“邮箱名称不允许。服务器响应为：5.3.0 Relaying denied check mail first”。先感谢您。

代码隐藏：

```
public class MailHelper
{
    public static void SendMailMessage(string from, string to, string bcc,
        string cc, string subject, string body)
    {
        MailMessage mMailMessage = new MailMessage();
        mMailMessage.From = new MailAddress(from);
        mMailMessage.To.Add(new MailAddress(to));
        if ((bcc != null) && (bcc != string.Empty))
        {
            mMailMessage.Bcc.Add(new MailAddress(bcc));
        }
        if ((cc != null) && (cc != string.Empty))
        {
            mMailMessage.CC.Add(new MailAddress(cc));
        }
        mMailMessage.Subject = subject;
        mMailMessage.Body = body;
        mMailMessage.IsBodyHtml = true;
        mMailMessage.Priority = MailPriority.Normal;

        string smtpServer = "";
        //Read the Web.config to get configuration setting
        smtpServer=System.Web.Configuration.WebConfigurationManager.AppSettings["smtp"];
        // Instantiate a new instance of SmtpClient
        SmtpClient mSmtpClient = new SmtpClient(smtpServer);
        // Send the mail message
        mSmtpClient.Send(mMailMessage);
    }       
} 
```

网络配置：

```
<appSettings>
<add key="smtp" value="smtp.mydomain.com"/>
</appSettings>
<system.net>
<mailSettings>
<smtp from="defaultEmail@mydomain.com">
<network host="smtp.mydomain.com" port="25" userName="yourUserName" password="yourPassword"/>
  </smtp>
</mailSettings>
</system.net> 
```

Sumbit_Click:

```
 protected void Sumbit_Click(object sender, EventArgs e)
    {
        MailHelper.SendMailMessage("from@email.com", "to@email.com", null, null,
            "subject", "textEnquiry.Text");
    } 
```

# clickonce - 将 Clickonce 应用程序分发到 Windows 8

> ID：13505335
> 
> 赞同：15
> 
> 时间：2012-11-22T03:03:59.850
> 
> 标签：clickonce

我已使用有效的发布者代码签名证书进行签名。

当用户下载 setup.exe Windows 8 SmartScreen 时仍会提醒用户，尽管发布者是有效的。

现在，安装后。Windows 8 SmartSreen 将提示另一条消息“Windows SmartScreen 阻止了无法识别的应用程序启动。运行此应用程序可能会使您的 PC 面临风险。” 并且发布者是未知的发布者。

我也应该在大会上签名吗？为什么我有有效证书时 SmartScreen 仍然提示？

如何签署应用程序 exe，而不是安装程序 exe？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:54:41.060

> 我也应该在大会上签名吗？

我怀疑这是问题所在。ClickOnce 要求对其清单进行签名（您别无选择），但我认为不需要对程序集本身进行签名（正如您所暗示的那样），但 Windows 8 可能确实有此要求。

可以修改未签名的程序集，任何引用程序集都将尽职尽责地加载并执行其中的代码 - 不问任何问题，因此恶意实体可以替换磁盘上的一个或多个程序集并危及您的应用程序。ClickOnce 允许系统权限较低的用户执行他们原本不允许执行的任务，因为该权限已（隐式）通过数字证书授予（用于签署 ClickOnce 清单的证书，该证书预先存在于目标上机器，或通过目标机器上的根证书受信任）。因此，如果不对程序集进行签名，则安全链中存在一个薄弱环节，并且很可能在 Windows 8 中（默认情况下）已经加强了这一点。

要作为程序集签名，请参阅：[如何：签署程序集 (Visual Studio)](http://msdn.microsoft.com/en-us/library/ms247123%28v=vs.100%29.aspx)

注意。dotNet 程序集签名通常称为强命名（在这种情况下，术语“签名”和“强命名”似乎可以互换使用）。

注意。强命名程序集只能引用其他强命名程序集，尽管它们可以使用不同的证书进行签名。如果您引用了非强命名的第三方程序集，这可能会导致问题 - 这种情况很少见，因为发布未签名代码是一种不好的做法，一种选择是简单地使用[sn.exe使用您自己的证书对程序集进行签名](http://msdn.microsoft.com/en-us/library/k5b5tt23%28v=vs.80%29.aspx)

# browser - 如何使用某种编程语言控制网络浏览器？

> ID：13505338
> 
> 赞同：0
> 
> 时间：2012-11-22T03:04:17.090
> 
> 标签：browser, webbrowser-control

我正在寻找一种方法来控制 web 浏览器，例如 firefox 或 chrome。我需要类似“selenium webdriver”的东西，但这将允许我打开许多实例 URL 加载、获取 http 标头、响应代码、获取响应内容、加载时间等。

有没有我可以用来做的库、框架、api？我找不到一个完全可以做到的，selenium 打开浏览器并转到 url 但我无法获取 http 标头

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:23:38.807

硒和水母通常是强有力的选择。Jellyfish 是一个使用 Node.js 的选项——虽然我没有这方面的经验，但我从同事那里听到了好消息。

如果您只想获取标题等，可以使用 cURL 库或 wget。例如，我使用 cURL 和 NuSOAP 来查询 PHP 中的 XML Web 服务。缺点是这些不是功能浏览器，仅执行 HTTP 请求并使用响应。

* * *

*   [http://seleniumhq.org/](http://seleniumhq.org/)
*   [https://github.com/admc/jellyfish](https://github.com/admc/jellyfish)
*   [http://curl.haxx.se/](http://curl.haxx.se/)

# c - 将文件描述符传递给线程并在函数中使用它（作业）

> ID：13505340
> 
> 赞同：1
> 
> 时间：2012-11-22T03:04:56.813
> 
> 标签：c, casting, pthreads, void-pointers, file-descriptor

我的任务是对打印服务器进行精简的多线程模型。

函数get_server的原型是：

```
void *get_request(void *arg); 
```

“参数 arg 指向一个打开的文件描述符，从该描述符中读取请求。” 所以在测试中推荐使用 STDIN_FILENO，但是当一切都说完之后，描述符需要是通用的。

```
pthread_create(&tid, &attr, get_request, STDIN_FILENO); 
```

在我试图使用 arg 的函数内部，不能将它从 void * 更改为任何可用的东西。例如，这些都不起作用：

```
read(*arg, intvariable, sizeof(int)); // can't cast void * error
int fd = *arg; // can't cast void * error
int fd = *(int *)arg; // seg fault
int fd = *((int *)arg); // seg fault

int fd = atoi(arg); // seg fault
// yes I'm aware arg isn't a char* but that's 
// from the example code we were given 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T03:10:00.230

你是在正确的方式：

```
void *get_request(void *arg)
{
    int fd = (int) arg;

    ...
} 
```

* * *

但是，这不是推荐的方式。而是创建一个变量并将其地址传递给`pthread_create`调用：

```
int fd = STDIN_FILENO;
pthread_create(&tid, &attr, get_request, &fd); 
```

然后你使用

```
void *get_request(void *arg)
{
    int fd = *((int *) arg);

    ...
} 
```

不过要小心，因此用于`pthread_create`调用的变量的范围不会在线程启动之前用完。然后你将有一个指向未使用内存的指针。将此变量放在`main`函数的顶部（如果您正在调用`pthread_create`in `main`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:11:20.160

您的函数需要一个*指向 value*的指针，但您传递的是*value*本身！因此，要遵循指针方案，您需要将指针传递给包含 value 的全局变量`STDIN_FILENO`。

或者，您可以`STDIN_FILENO`像当前正在做的那样通过传递来“作弊”，然后将其`void*`转换为简单的`int`（不是指针！）并按原样使用它：

```
int fd = (int) arg; 
```

# python - 需要 HTTPS 和代理身份验证时，Python 机械化不起作用

> ID：13505349
> 
> 赞同：3
> 
> 时间：2012-11-22T03:05:45.423
> 
> 标签：python, https, proxy, mechanize

我使用 Python 2.7.2 和 Mechanize 0.2.5。
当我访问互联网时，我必须通过代理服务器。我写了以下代码，但最后一行发生了 URLError .. 有没有人对此有任何解决方案？

```
import mechanize

br = mechanize.Browser()
br.set_debug_http(True)
br.set_handle_robots(False)

br.set_proxies({
    "http"  : "192.168.20.130:8080",
    "https" : "192.168.20.130:8080",})
br.add_proxy_password("username", "password")

br.open("http://www.google.co.jp/")  # OK
br.open("https://www.google.co.jp/") # Proxy Authentication Required 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T03:14:56.170

我不建议你使用 Mechanize，它已经过时了。看看[请求](http://docs.python-requests.org/en/latest/)它会让你的生活更轻松。将代理与请求一起使用就是这样：

```
import requests

proxies = {
  "http": "10.10.1.10:3128",
  "https": "10.10.1.10:1080",
}

requests.get("http://example.org", proxies=proxies) 
```

# python-3.x - 在 OSX 上为 python 3.2 安装 pyQT

> ID：13505350
> 
> 赞同：4
> 
> 时间：2012-11-22T03:05:50.243
> 
> 标签：python-3.x, pyqt, pyqt4, osx-mountain-lion

注意：我正在使用 python 3

我一直在尝试在 Mac OsX Mountain Lion 上安装 pyQT，但到目前为止我还没有取得太大的成功。我对此很陌生，所以我什至不想考虑手动设置所有内容。

这是我得到的错误，我认为这意味着没有用于安装 pyQT 的 easy_install 脚本。我也尝试过macports，但是python3还不支持pyQT。有没有人有任何简单的解决方案来在 osX 上安装 pyQT？

下载[http://sourceforge.net/projects/pyqt/files/PyQt4/PyQt-4.9.5/PyQt-x11-gpl-4.9.5.tar.gz](http://sourceforge.net/projects/pyqt/files/PyQt4/PyQt-4.9.5/PyQt-x11-gpl-4.9.5.tar.gz) 处理 PyQt-x11-gpl-4.9.5.tar.gz错误：在 /tmp/easy_install-ZiD0mx/PyQt-x11-gpl-4.9.5.tar.gz new-host-6:~ Eric$ 中找不到安装脚本

macports 只是给出错误“未找到端口安装”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T17:33:30.050

我没有具体说明，但这里是您需要的概述

**安装 Qt：**通过 macports、自制软件、源代码或[二进制构建](http://releases.qt-project.org/qt4/source/qt-mac-opensource-4.8.3.dmg)。

**从[源](http://www.riverbankcomputing.com/software/sip/download)**安装 sip****

 **```
python configure.py --arch=x86_64
make && make install 
```

**从[源代码](http://www.riverbankcomputing.com/software/pyqt/download)**安装 PyQt4**。你想要mac源。不是 X11 (linux)**

 **```
python configure.py
make && make install 
```

PyQt4 应该找到 sip 和你的 Qt 安装。

您不能简单地从 easy_install 安装它，因为它涉及更多。PyQt 依赖于 SIP 和用于链接的 Qt 安装。我推荐使用自制软件而不是 macports 来安装软件包。您可以使用它来获取 Qt：`brew install qt`****

# java - id 值似乎没有在 servlet 中正确捕获

> ID：13505352
> 
> 赞同：0
> 
> 时间：2012-11-22T03:06:29.043
> 
> 标签：java, model-view-controller, jsp, servlets, jstl

如果我在实现 servlet 中任意分配一个“id”值，它就可以工作；但是，如果我不正确地从抽象类继承 id 值并跳过“if”语句以转发到“then”语句中提供的 url。是什么赋予了？可以判断 'id' 变量有什么问题：

抽象 servlet 片段：

```
 protected Integer id = null;

 private void _doProcess(final HttpServletRequest request, final HttpServletResponse response)
        throws IOException, ServletException {
    try {
        response.setContentType("text/html");
        writer = response.getWriter();
        final String idString = request.getParameter("id");
        if(StringUtil.isNotEmptyStringTrimmed(idString)){
            try {
                id = Integer.parseInt(idString.trim());
            } catch (NumberFormatException e) {
                id = null;
            }
        }

        doProcess(request,response);

    } finally {
        id = null;
    }

    try {
        writer.close();
    } catch (Exception e) {
        // no-op
    }
} 
```

实现servlet片段：

```
 public void doProcess(final HttpServletRequest request, final HttpServletResponse response)
        throws IOException, ServletException {

    // set page title
    final HttpSession session = request.getSession();
    session.setAttribute("pageTitle", "Training Project 5: Author");

    if (id == null){
        request.setAttribute("authorNamesList", printAuthorNames());
        request.getRequestDispatcher("authorList.jsp").include(request,response);
    }else{
        final Author author = BEAN_FACTORY.getMember(id);
        session.setAttribute("authorId",author.getId());
        session.setAttribute("name", author.getName());
        session.setAttribute("bio", author.getBio());
        session.setAttribute("picture",author.getPicture());
        session.setAttribute("bookTitles", printBookTitles(author.getId()));
        request.getRequestDispatcher("authorPage.jsp").include(request,response);
    }
} 
```

当上面的 servlet 'else' 代码不在条件语句中时，下面的 jsp 代码可以工作：

```
 <div id="right">
   <table class="display" summary="Author Information">         
     <tr>
         <td><span class="brown">Author Id: <c:out value="${authorId}"/></span></td>
     </tr>
     <tr>
         <td><span class="brown">Name: <c:out value="${name}"/></span></td>
     </tr>
     <tr>
         <td><span class="brown">Bio: <c:out value="${bio}"/></span></td>
     </tr>
     <tr>
         <td>
             <p>
                 <span class="brown"><img src="<c:out value="${picture}"/>" alt= ""/></span>
             </p>
         </td>
     </tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T03:11:29.083

除非`id`是类字段，否则您不会向我们展示所有代码。也不清楚你所说的“它不起作用”是什么意思。预期内容为空？你有例外吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T03:14:02.143

如果未初始化，“Id”将始终为 null 或未定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:16:06.497

弄清楚问题出在哪里。. . 对不起，伙计们（和女孩们）我没有给每个人足够的信息来解决这个问题。有一个 authorList.jsp 页面打印每个人都从中选择的列表（见下文）。用户在 authorList.jsp 页面中选择他们想要查看信息的作者，然后将作者 id 参数转发回 servlet，该 servlet 将用户转发到显示个人作者信息的 authorPage.jsp。

基本上，我使用了以下 jsp 页面 (authorPage.jsp) 的确切 .jsp 名称，而不是 web.xml (listAuthor) 上的 servlet 映射名称。我有：

```
 <table summary="Author List">
        <c:forEach items="${authorNamesList}" var="name">
            <tr>
               <td><span class="brown"><a href="authorPage.jsp?id=${name.key}">${name.value}</a></span></td>
            </tr>
        </c:forEach> 
```

本来应该：

```
 <table summary="Author List">
        <c:forEach items="${authorNamesList}" var="name">
            <tr>
               <td><span class="brown"><a href="listAuthor?id=${name.key}">${name.value}</a></span></td>
            </tr>
        </c:forEach>
    </table> 
```

有时最好离开，然后再回来看看新鲜的！祝大家感恩节快乐：）

# wolfram-mathematica - Mathematica 图像平均优化

> ID：13505356
> 
> 赞同：1
> 
> 时间：2012-11-22T03:07:17.720
> 
> 标签：wolfram-mathematica, mathematica-8

这是我第一次在 stackoverflow 中提问。我努力不做出任何违反准则的行为，但如果有任何违反，请告诉我——请理解，因为这是我第一次。

我在 Mathematica 中有一个代码，我认为它真的很慢。

我有一堆图像——几百个，我在 Mathematica 中创建了一个简单的算法，通过对整个堆栈中的像素数据进行平均来将图像组合成一个图像。

例如，假设我有一个 520 x 23 的像素，我想从堆栈中的每个图像中获取所有数字（数据）并平均该表。我想对图像中的每个像素重复这个过程。然后，我将能够使用 Image[] 将数据重建为图像。对于测试，我使用了 1024 x 1024 图像，但最终我想使用 8000 x 8000。

这是我的代码：

```
idlist = Map[ImageData, ilist];
Table[Table[Map[Mean,Transpose[Table[idlist[[a,b,c]],{a,1,Length[idlist]}]]],{b,1,1024}], {c, 1, 1024}] 
```

由于一些奇怪的原因，我发现我的嵌套表比使用单个表要快。

1.我应该如何优化这个？2.对于这个特定的实现，使用任何并行计算有什么好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:13:56.117

我不确定我是否遵循您的编码，但要获得一堆图像的平均像素值，您可以简单地执行以下操作（速度很快）：

```
imDim = 100;
n = 80;(*number of images*)
(*generate random image list*)
ilist = Array[RandomImage[1, {imDim, imDim}, ColorSpace -> "RGB"] &, n];
(*take mean*)
Image@Mean[ImageData /@ ilist] 
```

![数学图形](../Images/bbd82e8f2dd97b478c900a78bff16fcc.png)

对于大量随机图像，它应该收敛到均匀的灰色 (RGB[.5,.5,.5])。让我们测试一下：

```
imDim = 3;
n = 2000;(*number of images*)
(*generate random image list*)
ilist =  Array[RandomImage[1, {imDim, imDim}, ColorSpace -> "RGB"] &, n];
(*take mean*)
Image@Mean[ImageData /@ ilist] 
```

![数学图形](../Images/1d4cf2e5a1a25fcc1623c755ab44fde6.png)

# python - for 循环在前一个循环完成之前开始

> ID：13505357
> 
> 赞同：1
> 
> 时间：2012-11-22T03:07:27.407
> 
> 标签：python, python-3.3

我正在使用嵌套循环，我希望第一个嵌套循环在第二个循环开始之前完成。现在它遍历每个嵌套循环的第一个值，然后是第二个等，而不是在开始第二个循环之前完成第一个循环。在进入第二个循环之前，如何让第一个循环完全迭代？

```
for i in range(len(input_data[0])):
    #first loop
    for l in range(len(input_data[0][0])):
        if input_data[0][i][l] == 'X':
            output = output + input_data[1][i][l]
    #second loop
    for l in range(len(input_data[0][0])):
        ni = -i
        if input_data[0][i][l] == 'X':
            output = output + input_data[1][l][ni]
    #third loop
    for l in range(len(input_data[0][0])):
        if input_data[0][i][l] == 'X':
            output = output + input_data[1][l][i] 
```

我已经使用与“l”不同的变量尝试了每个循环，但同样的事情发生了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T03:10:29.033

您需要为每个内部循环重复外部循环。

# oracle - Oracle中的多字节字符

> ID：13505367
> 
> 赞同：2
> 
> 时间：2012-11-22T03:09:12.510
> 
> 标签：oracle

我想在Oracle数据库中插入汉字。

```
select length('有个可爱的小娃在旁边') from dual;
10
drop table multibyte;
create table multibyte (name varchar2(10));
insert into multibyte
values('有个可爱的小娃在旁边'); 
```

我收到一条错误消息说

```
 An attempt was made to insert or update a column with a value
           which is too wide for the width of the destination column.
           The name of the column is given, along with the actual width
           of the value, and the maximum allowed width of the column.
           Note that widths are reported in characters if character length
           semantics are in effect for the column, otherwise widths are
           reported in bytes 
```

我知道，如果我增加列宽，问题就会消失。我的问题是当长度函数告诉我宽度是 10 为什么我不能将它插入到 varchar2(10) 的列中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T03:19:27.013

不同之处在于列的定义：`VARCHAR2(10)`等同于`VARCHAR2(10 BYTE)`，而您想要的是`VARCHAR2(10 CHAR)`.

[列数据类型中 BYTE 和 CHAR 的区别](https://stackoverflow.com/questions/81448/difference-between-byte-and-char-in-column-datatypes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T03:18:37.677

是的，这有点不幸。Oracle 以字节为单位测量文本列的长度，因此一个 varchar2(10) 只能存储十个字节，大约是三个汉字。

# php - 在 php 中格式化来自 Jira Atlassian 问题 url 的长结构化文本字符串

> ID：13505370
> 
> 赞同：0
> 
> 时间：2012-11-22T03:09:19.267
> 
> 标签：php, object, jira

我想知道是否有一种简单的方法可以访问我拥有的巨大字符串中的信息，该字符串是结构化的，为了人们查看它，我放置了换行符和空格，但这只是返回的一个巨大的单行文本：

首先这是我访问 Jira API 的方式：

```
$username = 'xxx';
$password = 'xxx';

$url = 'https://xxx.atlassian.net/rest/api/2/Issue/Bug-5555';

$curl = curl_init();
curl_setopt($curl, CURLOPT_USERPWD, "$username:$password");
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);

$issue_list = (curl_exec($curl));
echo $issue_list; 
```

现在返回一个巨大的字符串，分解后看起来像这样：

```
{"expand":
"renderedFields,names,schema,transitions,operations,editmeta,changelog",
"id":"16935",
"self":"https://xxx.atlassian.net/rest/api/2/issue/16935",
"key":"xx-5555",
"fields":
        {"summary":"Dialog boxes shouldn't be on top.",
        "progress":
                    {"progress":0,
                    "total":0
                    },
        "timetracking":{},
        "issuetype":
                        {"self":"https://xxx.atlassian.net/rest/api/2/issuetype/1",
                    "id":"1",
                    "description":"A problem which impairs or prevents the functions of the product.",
                    "iconUrl":"https://xxx.atlassian.net/images/icons/bug.gif",
                    "name":"Bug",
                    "subtask":false
                    },
        "timespent":null,
        "reporter":
                    {"self":"https://xxx.atlassian.net/rest/api/2/user?username=xxx%40xxx.com",
                    "name":"xxx@xx.com",
                    "emailAddress":"xxx@xxx.com",
                    "avatarUrls":{"16x16":"https://xxx.atlassian.net/secure/useravatar?size=small&avatarId=10122",
                    "48x48":"https://xxx.atlassian.net/secure/useravatar?avatarId=10122"},
                    "displayName":"xxx",
                    "active":true
                    },
        "created":"2012-08-25T18:39:27.760-0600",
        "updated":"2012-08-31T16:47:38.761-0600",
        "priority":
                    {"self":"https://xxx.atlassian.net/rest/api/2/priority/6",
                    "iconUrl":"http://dl.dropbox.com/u/xxx/3-green.png",
                    "name":"3 - Medium Priority",
                    "id":"6"
                    },
        "description":"\"loading \" dialog is always on top, so is the \"Updating database\" dialog.\r\n\r\n\r\nThis is annoying. It shouldn't be on top and/or you should be able to easily minimize the window.",
        "issuelinks":[], etc etc etc 
```

现在我是一个基本的 php 用户，所以如果可能的话，请尽量保持回复简单化，在我走下解析整个文档的路线之前，这对我来说很困难，因为我不熟悉解析我想知道是否有一个简单的方法来访问值。

我的想法是这样的：

```
foreach($issue_list->issues as $issue) {
    echo "summary" . $issue->summary;
    echo "updated" . $issue->updated;
    echo "created" . $issue->created;
    echo "description" . $issue->description;
} 
```

现在这可能是一厢情愿，但我看到一篇文章，我做了类似的事情，但我无法弄清楚，这是文章： [http ://www.lornajane.net/posts/2012/using-jiras-rest-api -创建仪表板](http://www.lornajane.net/posts/2012/using-jiras-rest-api-to-create-a-dashboard)

此外，如果可能的话，我将如何访问记者 > displayName 值，因为这是 2 个缩进深度，它会是 $issue->reporter->displayName;

最后一个快速的另一个问题，如果我回应描述，我如何让它遵守 /r/r/r/r/r/n 和 /" 所以它用换行符打印出来并删除那些特殊字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:23:55.813

这看起来像一个 JSON（JavaScript Object Notation - [more info here](http://en.wikipedia.org/wiki/JSON)）字符串，您可以使用`json_decode`（[在此处](http://php.net/manual/en/function.json-decode.php)记录）将其转换为 PHP 对象，然后轻松对其进行索引。

我没有您的完整字符串，但您可能可以尝试以下方式：

```
$jiraIssue = json_decode($theString);
echo $jiraIssue["id"]; 
```

现在，由于对象包含在对象内部，因此您可能必须先通过`"fields"`才能访问`"summary"`.

`true`如果您希望处理`array`s 而不是s，则可以将其作为第二个参数传递`object`。

# c# - 如何从 C# 中的 URL 查询字符串中提取值？

> ID：13505375
> 
> 赞同：2
> 
> 时间：2012-11-22T03:10:13.120
> 
> 标签：c#, regex

> **可能重复：**
> [从 Uri 获取单个查询参数](https://stackoverflow.com/questions/2884551/get-individual-query-parameters-from-uri)

我有一个这样的网址：

[http://somedomain.com/website/webpage.aspx?token=123456&language=English](http://somedomain.com/website/webpage.aspx?token=123456&language=English)

我的目标是从中提取 123456 。查询字符串参数中只能有一个支付 ID。我可以使用什么样的正则表达式？顺便说一句，我正在使用 C# (.NET)。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T03:41:32.727

使用 System.URI 类

URI 类的[Query](http://msdn.microsoft.com/en-us/library/system.uri.query.aspx)属性将整个查询作为字符串返回

```
Uri bUri = new Uri("http://somedomain.com/website/webpage.aspx
                    ?token=123456&language=English");

var query = bUri.Query.Replace("?", ""); 
```

现在查询将具有字符串值`"token=123456&language=English"`

然后使用 LINQ 从查询属性生成字典

```
var queryValues = query.Split('&').Select(q => q.Split('='))
                   .ToDictionary(k => k[0], v => v[1]); 
```

然后，您可以访问这些值

```
queryValues["token"] 
```

这会给你 123456

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T03:12:20.987

`token=(\d+)`应该做的伎俩

为了满足 aplhas 的需求，您可以执行以下任一操作：

`token=([a-zA-Z0-9+/=]+)`明确匹配您期望的字符。这匹配“token=”，然后捕获所有匹配字符类的后续字符，即az、AZ、0-9、+、/和=。

或者

`token=([^&#]+)`匹配任何字符，除了你知道可以完成令牌的字符。这匹配 "token="，然后捕获所有字符，直到第一个`&`或`#`字符串的结尾。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T03:24:20.353

不要为此使用正则表达式。C#为此提供了内置方法！

```
var queryString = string.Join(string.Empty, url.Split('?').Skip(1));
System.Web.HttpUtility.ParseQueryString(queryString) 
```

[在此处查看更多详细信息](https://stackoverflow.com/questions/2884551/get-individual-query-parameters-from-uri)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T03:18:31.233

采用

```
(?:token=)(?<TokenValue>[^&]+) 
```

*并在*C#中通过以下方式获取值：

```
myMatch.Groups["TokenValue"].Value 
```

# iphone - 向 UICollectionViewCell 添加圆角和阴影

> ID：13505379
> 
> 赞同：118
> 
> 时间：2012-11-22T03:10:57.267
> 
> 标签：iphone, ios, uicollectionviewcell

因此，我已经阅读了有关添加第二个视图以添加阴影的各种帖子，但如果我想将它添加到`UICollectionViewCell`. 我进行了子类`UICollectionViewCell`化，这是我的代码，其中我将各种 UI 元素添加到单元格的内容视图并为图层添加阴影：

```
[self.contentView setBackgroundColor:[UIColor whiteColor]];

self.layer.masksToBounds = NO;
self.layer.shadowOffset = CGSizeMake(0, 1);
self.layer.shadowRadius = 1.0;
self.layer.shadowColor = [UIColor blackColor].CGColor;
self.layer.shadowOpacity = 0.5;
[self.layer setShadowPath:[[UIBezierPath bezierPathWithRect:self.bounds] CGPath]]; 
```

我想知道如何将圆角和阴影添加到`UICollectionViewCell`.

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2014-08-25T19:44:47.263

这些解决方案都不适合我。如果您将所有子视图放入 UICollectionViewCell 内容视图中，您可能就是这样，您可以在单元格的图层上设置阴影并在 contentView 的图层上设置边框以实现这两种结果。

```
cell.contentView.layer.cornerRadius = 2.0f;
cell.contentView.layer.borderWidth = 1.0f;
cell.contentView.layer.borderColor = [UIColor clearColor].CGColor;
cell.contentView.layer.masksToBounds = YES;

cell.layer.shadowColor = [UIColor blackColor].CGColor;
cell.layer.shadowOffset = CGSizeMake(0, 2.0f);
cell.layer.shadowRadius = 2.0f;
cell.layer.shadowOpacity = 0.5f;
cell.layer.masksToBounds = NO;
cell.layer.shadowPath = [UIBezierPath bezierPathWithRoundedRect:cell.bounds cornerRadius:cell.contentView.layer.cornerRadius].CGPath; 
```

斯威夫特 3.0

```
self.contentView.layer.cornerRadius = 2.0
self.contentView.layer.borderWidth = 1.0
self.contentView.layer.borderColor = UIColor.clear.cgColor
self.contentView.layer.masksToBounds = true

self.layer.shadowColor = UIColor.black.cgColor
self.layer.shadowOffset = CGSize(width: 0, height: 2.0)
self.layer.shadowRadius = 2.0
self.layer.shadowOpacity = 0.5
self.layer.masksToBounds = false
self.layer.shadowPath = UIBezierPath(roundedRect: self.bounds, cornerRadius: self.contentView.layer.cornerRadius).cgPath 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-10-20T18:04:49.623

斯威夫特 3 版本：

```
cell.contentView.layer.cornerRadius = 10
cell.contentView.layer.borderWidth = 1.0

cell.contentView.layer.borderColor = UIColor.clear.cgColor
cell.contentView.layer.masksToBounds = true

cell.layer.shadowColor = UIColor.gray.cgColor
cell.layer.shadowOffset = CGSize(width: 0, height: 2.0)
cell.layer.shadowRadius = 2.0
cell.layer.shadowOpacity = 1.0
cell.layer.masksToBounds = false
cell.layer.shadowPath = UIBezierPath(roundedRect:cell.bounds, cornerRadius:cell.contentView.layer.cornerRadius).cgPath 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-10-04T13:22:32.320

如果它有帮助：这是圆角的快捷方式：

```
cell.layer.cornerRadius = 10
cell.layer.masksToBounds = true 
```

单元格是控制单元格的变量：通常，您将在`override func collectionView(collectionView: UICollectionView, cellForItemAtIndexPath indexPath: NSIndexPath) -> UICollectionViewCell`

享受！

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2018-05-16T09:05:04.493

这里是**Swift 4**解决方案，更新为圆**每个**角落，而不仅仅是顶角：

```
contentView.layer.cornerRadius = 6.0
contentView.layer.borderWidth = 1.0
contentView.layer.borderColor = UIColor.clear.cgColor
contentView.layer.masksToBounds = true

layer.shadowColor = UIColor.lightGray.cgColor
layer.shadowOffset = CGSize(width: 0, height: 2.0)
layer.shadowRadius = 6.0
layer.shadowOpacity = 1.0
layer.masksToBounds = false
layer.shadowPath = UIBezierPath(roundedRect: bounds, cornerRadius: contentView.layer.cornerRadius).cgPath
layer.backgroundColor = UIColor.clear.cgColor 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2019-07-13T20:13:03.927

这是我的答案，与其他答案很接近，但我在图层中添加了一个角半径，否则角将无法正确填充。此外，这对`UICollectionViewCell`.

```
extension UICollectionViewCell {
    func shadowDecorate() {
        let radius: CGFloat = 10
        contentView.layer.cornerRadius = radius
        contentView.layer.borderWidth = 1
        contentView.layer.borderColor = UIColor.clear.cgColor
        contentView.layer.masksToBounds = true

        layer.shadowColor = UIColor.black.cgColor
        layer.shadowOffset = CGSize(width: 0, height: 1.0)
        layer.shadowRadius = 2.0
        layer.shadowOpacity = 0.5
        layer.masksToBounds = false
        layer.shadowPath = UIBezierPath(roundedRect: bounds, cornerRadius: radius).cgPath
        layer.cornerRadius = radius
    }
} 
```

`collectionView(_:cellForItemAt:)`将单元格出列后，您可以在数据源中调用它。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2012-12-04T18:45:36.440

设置`layer`单元格的属性，而不是`contentView`.

```
CALayer * layer = [cell layer];
[layer setShadowOffset:CGSizeMake(0, 2)];
[layer setShadowRadius:1.0];
[layer setShadowColor:[UIColor redColor].CGColor] ;
[layer setShadowOpacity:0.5]; 
[layer setShadowPath:[[UIBezierPath bezierPathWithRect:cell.bounds] CGPath]]; 
```

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2019-04-19T12:29:14.563

**斯威夫特 4.2**

应该将其添加到您的自定义单元格或 cellForItemAt：如果您使用的是 cellForItemAt：方法替换 self -> cell

```
 self.layer.cornerRadius = 10
        self.layer.borderWidth = 1.0
        self.layer.borderColor = UIColor.lightGray.cgColor

        self.layer.backgroundColor = UIColor.white.cgColor
        self.layer.shadowColor = UIColor.gray.cgColor
        self.layer.shadowOffset = CGSize(width: 2.0, height: 4.0)
        self.layer.shadowRadius = 2.0
        self.layer.shadowOpacity = 1.0
        self.layer.masksToBounds = false 
```

这将为您提供一个带有圆形边框和阴影的单元格。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2012-12-31T18:05:40.473

您只需（a）设置`cornerRadius`和（b）设置`shadowPath`为具有相同半径的圆角矩形`cornerRadius`：

```
self.layer.cornerRadius = 10;
self.layer.shadowPath = [[UIBezierPath bezierPathWithRoundedRect:self.bounds cornerRadius:self.layer.cornerRadius] CGPath]; 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2019-07-23T17:50:14.653

这是我对解决方案的看法。它与其他答案相似，但有一个关键区别。它不会创建依赖于视图边界的路径。每当您基于边界创建路径并将其提供给图层时，您可能会在调整大小时遇到​​问题，并且需要设置方法来更新路径。

一个更简单的解决方案是避免使用任何依赖于边界的东西。

```
let radius: CGFloat = 10

self.contentView.layer.cornerRadius = radius
// Always mask the inside view
self.contentView.layer.masksToBounds = true

self.layer.shadowColor = UIColor.black.cgColor
self.layer.shadowOffset = CGSize(width: 0, height: 1.0)
self.layer.shadowRadius = 3.0
self.layer.shadowOpacity = 0.5
// Never mask the shadow as it falls outside the view
self.layer.masksToBounds = false

// Matching the contentView radius here will keep the shadow
// in sync with the contentView's rounded shape
self.layer.cornerRadius = radius 
```

现在，当单元格大小发生变化时，视图 API 将在内部完成所有工作。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2015-12-15T17:59:57.767

我不得不为**Swift**做一些细微的改变：

```
cell.contentView.layer.cornerRadius = 2.0;
cell.contentView.layer.borderWidth = 1.0;
cell.contentView.layer.borderColor = UIColor.clearColor().CGColor;
cell.contentView.layer.masksToBounds = true;

cell.layer.shadowColor = UIColor.grayColor().CGColor;
cell.layer.shadowOffset = CGSizeMake(0, 2.0);
cell.layer.shadowRadius = 2.0;
cell.layer.shadowOpacity = 1.0;
cell.layer.masksToBounds = false;
cell.layer.shadowPath = UIBezierPath(roundedRect:cell.bounds, cornerRadius:cell.contentView.layer.cornerRadius).CGPath; 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2019-11-21T14:18:03.783

我使用以下方法来完成这种效果：

```
extension UICollectionViewCell {
    /// Call this method from `prepareForReuse`, because the cell needs to be already rendered (and have a size) in order for this to work
    func shadowDecorate(radius: CGFloat = 8,
                        shadowColor: UIColor = UIColor(red: 0, green: 0, blue: 0, alpha: 0.3),
                        shadowOffset: CGSize = CGSize(width: 0, height: 1.0),
                        shadowRadius: CGFloat = 3,
                        shadowOpacity: Float = 1) {
        contentView.layer.cornerRadius = radius
        contentView.layer.borderWidth = 1
        contentView.layer.borderColor = UIColor.clear.cgColor
        contentView.layer.masksToBounds = true

        layer.shadowColor = shadowColor.cgColor
        layer.shadowOffset = shadowOffset
        layer.shadowRadius = shadowRadius
        layer.shadowOpacity = shadowOpacity
        layer.masksToBounds = false
        layer.shadowPath = UIBezierPath(roundedRect: bounds, cornerRadius: radius).cgPath
        layer.cornerRadius = radius
    }
} 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-10-26T04:29:38.403

Mike Sabatini 的答案工作正常，如果您直接在 collectionView cellForItemAt 上配置单元格属性，但如果您尝试在自定义 UICollectionViewCell 子类的 awakeFromNib() 中设置它们，您将在设备上设置错误的 bezierPath 结束'与您之前在 Storyboard (IB) 中设置的宽度和高度不匹配。

我的解决方案是在 UICollectionViewCell 的子类中创建一个 func 并从 cellForItemAt 调用它，如下所示：

```
func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {
    if let cell = collectionView.dequeueReusableCell(withReuseIdentifier: "cellID", for: indexPath) as? CustomCollectionViewCell{
        cell.configure())
        return cell
    }
    else {
        return UICollectionViewCell()
    }
} 
```

在 CustomCollectionViewCell.swift 上：

```
class CustomCollectionViewCell: UICollectionViewCell{
    func configure() {
    contentView.layer.cornerRadius = 20
    contentView.layer.borderWidth = 1.0
    contentView.layer.borderColor = UIColor.clear.cgColor
    contentView.layer.masksToBounds = true
    layer.shadowColor = UIColor.black.cgColor
    layer.shadowOffset = CGSize(width: 0, height: 2.0)
    layer.shadowRadius = 2.0
    layer.shadowOpacity = 0.5
    layer.masksToBounds = false
    layer.shadowPath = UIBezierPath(roundedRect: bounds, cornerRadius: contentView.layer.cornerRadius).cgPath}
 } 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-10-10T06:09:42.453

这个对我有用

```
cell.contentView.layer.cornerRadius = 5.0
cell.contentView.layer.borderColor = UIColor.gray.withAlphaComponent(0.5).cgColor
cell.contentView.layer.borderWidth = 0.5

let border = CALayer()
let width = CGFloat(2.0)
border.borderColor = UIColor.darkGray.cgColor
border.frame = CGRect(x: 0, y: cell.contentView.frame.size.height - width, width:  cell.contentView.frame.size.width, height: cell.contentView.frame.size.height)

border.borderWidth = width
cell.contentView.layer.addSublayer(border)
cell.contentView.layer.masksToBounds = true
cell.contentView.clipsToBounds = true 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-02-12T06:06:44.490

我发现了一件重要的事情： UICollectionViewCell 必须将 backgroundColor 作为`clear`颜色才能使上述这些工作。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-06-27T13:00:24.997

您可以在创建**UICollectionViewCell时在***UICollectionViewDataSource*方法中设置阴影颜色、半径和偏移量

 **```
cell.layer.shadowColor = UIColor.gray.cgColor
cell.layer.shadowOffset = CGSize(width: 0, height: 2.0)
cell.layer.shadowRadius = 1.0
cell.layer.shadowOpacity = 0.5
cell.layer.masksToBounds = false 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-12-27T13:39:43.920

**斯威夫特 5、Xcode 13、iOS 14**

首先配置您的收藏，如下所示：

```
self.collectionView.clipsToBounds = false 
```

然后配置您的单元格，如下所示：

```
override func awakeFromNib() {
    super.awakeFromNib()

    self.configView()
}

private func configView() {
    self.clipsToBounds = false
    self.backgroundColor = .systemBackground
    self.layer.cornerRadius = 10
    self.layer.shadowColor = UIColor.black.cgColor
    self.layer.shadowOffset = CGSize(width: 0, height: 0.0)
    self.layer.shadowRadius = 10
    self.layer.shadowOpacity = 0.2
} 
```

请注意这两个“clipToBounds = false”命令。

只是。**

# javascript - 如果图像完成加载，则触发事件

> ID：13505380
> 
> 赞同：2
> 
> 时间：2012-11-22T03:11:00.580
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [完整图像加载后的 javascript 执行函数](https://stackoverflow.com/questions/4100252/javascript-executing-function-after-full-image-load)

我使用 JQuery 以编程方式更改 html `img`：

```
$('#myimage').attr('src', 'url-of-image'); 
```

这可能需要一些时间，具体取决于`url-of-image`.

如果新图像加载成功，我们如何添加将触发的事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T03:14:43.750

```
$('#myimage').attr('src', 'url-of-image').load(function() {
   // after load
}); 
```

编辑：工作示例[http://jsfiddle.net/yaSWM/](http://jsfiddle.net/yaSWM/)

编辑 2：这适用于所有主要浏览器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T03:15:12.647

```
$('#myimage').attr('src', 'url-of-image').on('load', function(){
    //image loaded
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T03:16:06.807

您可以使用[jQuery 文档](http://api.jquery.com/load-event/)`load`中描述的事件

```
$('#myimage').load(function() {
  //do whatever
} 
```

# java - 当我想添加更多数据时如何不覆盖文本文件中已有的数据

> ID：13505394
> 
> 赞同：1
> 
> 时间：2012-11-22T03:13:34.407
> 
> 标签：java, formatter

这是我在打开 txt 文件时使用的代码，但每次我想输入更多数据时它都会覆盖数据。

```
private  Formatter X;
    private File Y = new File("C:\\Users\\user\\workspace\\Property Charge Management System\\users.txt");
    private Scanner Z;
    public  String[][] PCMSarray;
    public boolean OpenFile() {
        try{
            if(Y.exists()==false){
                X = new Formatter("users.txt");
            }
            return true;
        }
        catch(Exception e){
            System.out.println("File has not yet been created.");
            return false;
        }
    } 
```

这是我用来写入文件的代码，但这有效。

```
public void WriteToFilecmd(){
        Scanner input = new Scanner(System.in);
        System.out.println("Please enter your First name");
        String Fname = input.next();
        System.out.println("Please enter your Last name");
        String Lname = input.next();
        System.out.println("Please enter your Password");
        String Password = input.next();
        System.out.println("Please enter your user ID");
        String ID = input.next();
        System.out.println("Please enter the first address line of your Property");
        String addressln1 = input.next();
        System.out.println("Please enter the second address line of your Property");
        String addressln2 = input.next();
        System.out.println("Please enter the third address line of your Property");
        String addressln3 = input.next();
        System.out.println("Please enter the properties estimated market value");
        String EstimatedPropertyValue = input.next();
        System.out.println("Please enter your tax owed");
        String Taxowed = input.next();
        input.close();

        X.format("%1$20s %2$20s %3$20s %4$20s %5$20s %6$20s %7$20s %8$20s %9$20s \n",Fname,Lname,Password,ID,addressln1,addressln2,addressln3,EstimatedPropertyValue,Taxowed);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T03:25:34.173

为 Formatter 使用不同的构造函数，一个接受 FileWriter（它是 Appendable）的构造函数，并构造 FileWriter 以便它附加到文件的末尾：

```
// the second boolean parameter, true, marks the file for appending
FileWriter fileWriter = new FileWriter(fileName, true); 
Formatter formatter = new Formatter(fileWriter); 
```

顺便说一句，请学习并遵循 Java 命名规则，否则您的代码将不容易被他人（即**我们**！）理解。变量和方法名称应以小写字母开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:25:59.913

您的代码在许多方面都有些混乱，但我认为问题在于您正在测试：

```
 C:\\Users\\user\\workspace\\Property Charge Management System\\users.txt 
```

但是你正在打开

```
 users.txt 
```

...这恰好是一个不同的文件，因为您的“当前目录”不是您认为的那样。

即使这不是导致您的问题的原因，您也应该解决它。如果执行代码时当前目录不是“C:\Users\user\workspace\Property Charge Management System”，那么当前编写代码的方式将会中断。

* * *

如果你真的想*附加*到文件而不是覆盖它，那么你需要使用一个`Formatter`构造函数来接受一个打开的输出流或编写器......并为它提供一个以附加模式打开的流。

* * *

我也不应该说您在代码中犯了严重的风格错误。Java 代码的通用规则是变量名和方法名**必须**以小写字母开头。人们假设任何以大写字母开头的都是一个类……除非名称是 ALL_CAPITALS，它是为清单常量保留的。

# python - 如何在 Python 中重用 Popen 的中间结果？

> ID：13505395
> 
> 赞同：3
> 
> 时间：2012-11-22T03:13:42.487
> 
> 标签：python, linux, process, subprocess, pipe

代码是这样的：

```
from subprocess import Popen, PIPE

p1 = Popen("command1", stdout = PIPE)
p2 = Popen("command2", stdin = p1.stdout, stdout = PIPE)
result_a = p2.communicate()[0]

p1_again = Popen("command1", stdout = PIPE)
p3 = Popen("command3", stdin = p1_again.stdout, stdout = PIPE)
result_b = p3.communicate()[0]

with open("test") as tf:
    p1_again_again = Popen("command1", stdout = tf)
    p1_again_again.communicate() 
```

不好的部分是：

被`command1`执行了三次，因为当我使用`commnnicate`一次时，`stdout`该`Popen`对象的 不能再次使用。我只是想知道是否有一种方法可以重用`PIPE`.

有没有人知道如何使这些代码更好（更好的性能以及更少的代码行）？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T03:43:23.703

这是一个可行的解决方案。我已经为 cmd1、cmd2、cmd3 放置了示例命令，以便您可以运行它。它只是获取第一个命令的输出，并在一个命令中将其大写，在另一个命令中将其小写。

**代码**

```
from subprocess import Popen, PIPE, check_output
from tempfile import TemporaryFile

cmd1 = ['echo', 'Hi']
cmd2 = ['tr', '[:lower:]', '[:upper:]']
cmd3 = ['tr', '[:upper:]', '[:lower:]']

with TemporaryFile() as f:
    p = Popen(cmd1, stdout=f)
    ret_code = p.wait()
    f.flush()
    f.seek(0)
    out2 = Popen(cmd2, stdin=f, stdout=PIPE).stdout.read()
    f.seek(0)
    out3 = Popen(cmd3, stdin=f, stdout=PIPE).stdout.read()
    print out2, out3 
```

**输出**

```
HI
hi 
```

解决方案中需要注意的一些事项。当需要处理临时文件时，[临时](http://docs.python.org/2/library/tempfile.html)文件模块总是一个很好的方法，一旦 with 语句退出，它会自动删除临时文件作为清理，即使通过 with 块抛出了一些 io 异常。cmd1 运行一次并输出到临时文件，调用 wait() 方法以确保所有执行都已完成，然后我们每次都执行 seek(0) 以便当我们在 f 上调用 read() 方法时它会返回在文件的开头。作为参考，[Saving stdout from subprocess.Popen to file](https://stackoverflow.com/q/3190825/1699750)问题帮助我获得了解决方案的第一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:49:49.663

如果你可以读取`command1`内存中的所有输出然后运行`command2`，`command3`一个接一个：

```
#!/usr/bin/env python
from subprocess import Popen, PIPE, check_output as qx

cmd1_output = qx(['ls']) # get all output

# run commands in sequence
results = [Popen(cmd, stdin=PIPE, stdout=PIPE).communicate(cmd1_output)[0]
           for cmd in [['cat'], ['tr', 'a-z', 'A-Z']]] 
```

[或者，如果像@Marwan Alsabbagh 建议](https://stackoverflow.com/a/13505579/4279)`command1`的那样生成无法放入内存的巨大输出，您可以先写入临时文件：

```
#!/usr/bin/env python
import tempfile
from subprocess import check_call, check_output as qx

with tempfile.TemporaryFile() as file: # deleted automatically on closing
    # run command1, wait for completion
    check_call(['ls'], stdout=file)

    # run commands in sequence
    results = []
    for cmd in [['cat'], ['tr', 'a-z', 'A-Z']]:
        file.seek(0)
        results.append(qx(cmd, stdin=file)) 
```

要并行处理子进程的输入/输出，您可以使用`threading`：

```
#!/usr/bin/env python3
from contextlib import ExitStack  # pip install contextlib2 (stdlib since 3.3)
from subprocess import Popen, PIPE
from threading  import Thread

def tee(fin, *files):
    try:
        for chunk in iter(lambda: fin.read(1 << 10), b''):
            for f in files:  # fan out
                f.write(chunk)
    finally:
        for f in (fin,) + files:
            try:
                f.close()
            except OSError:
                pass

with ExitStack() as stack:
    # run commands asynchronously
    source_proc = Popen(["command1", "arg1"], stdout=PIPE)
    stack.callback(source_proc.wait)
    stack.callback(source_proc.stdout.close)

    processes = []
    for command in [["tr", "a-z", "A-Z"], ["cat"]]:
        processes.append(Popen(command, stdin=PIPE, stdout=PIPE))
        stack.callback(processes[-1].wait)
        stack.callback(processes[-1].stdout.close) # use .terminate()
        stack.callback(processes[-1].stdin.close)  # if it doesn't kill it

    fout = open("test.txt", "wb")
    stack.callback(fout.close)

    # fan out source_proc's output
    Thread(target=tee, args=([source_proc.stdout, fout] +
                             [p.stdin for p in processes])).start()

    # collect results in parallel
    results = [[] for _ in range(len(processes))]
    threads = [Thread(target=r.extend, args=[iter(p.stdout.readline, b'')])
               for p, r in zip(processes, results)]
    for t in threads: t.start()
    for t in threads: t.join() # wait for completion 
```

我在`ExitStack`这里使用了适当的清理，以防出现异常。

# python - 如何编写一个函数来根据索引字典重新排列列表

> ID：13505397
> 
> 赞同：1
> 
> 时间：2012-11-22T03:13:59.913
> 
> 标签：python

如何编写一个函数来根据python中的索引字典重新排列列表？

例如，

```
 L=[('b',3),('a',2),('c',1)]

    dict_index={'a':0,'b':1,'c':2} 
```

我想要一份清单：

```
 [2,3,1] 
```

其中2来自'a'，3来自'b'，1来自'c'，但仅根据dict_index重新排列L中的数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:31:03.617

使用列表推导：

```
def index_sort(L, dict_index):
    res = [(dict_index[i], j) for (i, j) in L]     #Substitute in the index
    res = sorted(res, key=lambda entry: entry[0])  #Sort by index
    res = [j for (i, j) in res]                    #Just take the value

    return res 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T03:19:33.290

试试这个（用更简单的解决方案编辑）：

```
L=[('b',3),('a',2),('c',1)]

dict_index={'a':0,'b':1,'c':2}

# Creates a new empty list with a "slot" for each letter.
result_list = [0] * len(dict_index)

for letter, value in L:
    # Assigns the value on the correct slot based on the letter.
    result_list[dict_index[letter]] = value

print result_list # prints [2, 3, 1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T03:23:32.693

`sorted``.sort()`列表的方法带有一个`key`参数：

```
>>> L=[('b',3),('a',2),('c',1)]
>>> dict_index={'a':0,'b':1,'c':2}
>>> sorted(L, key=lambda x: dict_index[x[0]])
[('a', 2), ('b', 3), ('c', 1)] 
```

所以

```
>>> [x[1] for x in sorted(L, key=lambda x: dict_index[x[0]])]
[2, 3, 1] 
```

应该这样做。举一个更有趣的例子——你的恰好将字母顺序与数字顺序相匹配，所以很难看出它真的有效——我们可以稍微改`dict_index`一下：

```
>>> dict_index={'a':0,'b':2,'c':1}
>>> sorted(L, key=lambda x: dict_index[x[0]])
[('a', 2), ('c', 1), ('b', 3)] 
```

# python - Python 和 mongoDB 连接池 (pymongo)

> ID：13505400
> 
> 赞同：3
> 
> 时间：2012-11-22T03:14:07.933
> 
> 标签：python, mongodb, pymongo

我有一个 Web 应用程序，每分钟有数千个请求。以下是我用于 mongoDB 连接的 python 代码：

工具.py：

```
globalconnection = None

def getCollection(name,safe=False,readpref=ReadPreference.PRIMARY):

    global globalconnection
    while globalconnection is None:
            try:
                    if not globalconnection is None:
                            globalconnection.close()
                    globalconnection = Connection('mongodb://host:port',replicaSet='mysetname',safe=False,read_preference=ReadPreference.PRIMARY,network_timeout=30,max_pool_size=1024)
            except Exception as e:
                    globalconnection = None

    request_context.connection = globalconnection

    return request_context.connection["mydb"]["mycoll"] 
```

网页.py

```
@app.route("/test")
def test():
    request_collection = getCollection("user")
    results = request_collection.find()
    for result in results:
        #do something...
        request_collection.save(result)
    request_collection.end_request() 
```

一个http请求通过这个函数获取连接，

并且http请求在请求结束之前调用end_request。

但是我发现在增加请求的同时，mongoDB中有很多AutoReconnect错误和超过20000个连接。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:45:41.837

1.  对于自动重新连接，您只需捕获异常，然后尝试再次获取连接：http: [//api.mongodb.org/python/current/api/pymongo/errors.html](http://api.mongodb.org/python/current/api/pymongo/errors.html)

2.  30 秒超时听起来太长了，试试更短的超时？

3.  增加来自 mongodb 的最大连接数（默认值：20000） [http://www.mongodb.org/display/DOCS/Connections](http://www.mongodb.org/display/DOCS/Connections)

# r - R中mapply vs rbind的输出数据类型

> ID：13505404
> 
> 赞同：3
> 
> 时间：2012-11-22T03:14:22.100
> 
> 标签：r, for-loop

我有一个名为 WOE 的函数，它返回一个包含 1 行和 7 列的数据名：

```
WOE(inData, splitCol, range, tgtCol, adjfac) 
```

其中 inData 是数据框，splitCol、tgtCol 和 adjfac 是数字，范围可以是单个数字或 2x1 矩阵，例如 range = 10 或 range = c(10, 20)

现在我想写一个函数，当范围是n行矩阵时，该函数将逐行执行WOE并返回一个具有n行7列的数据框。现在我正在使用带有 cbind 的 for 循环：

```
df <- rbind(df, WOE(inData, splitCol, range[i,], tgtCol, adjfac))
for (i in 2:nrow(range)) {
  df <- rbind(df, WOE(inData, splitCol, range[i,], tgtCol, adjfac))
} 
```

但我不喜欢 for 循环……我想让它更简单。所以我也尝试过像这样使用mapply：

```
 mapply(t(WOR, list(inData), list(splitCol), split(range, nrow(range)), list(tgtCol), list(adjfac)) 
```

但是上面的行并没有返回我想要的数据框，它返回了很多列表的数据框，这对我来说很难做进一步的计算。

有没有人建议我将我的 for 循环聚合成更少的行？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T03:40:44.927

```
do.call(rbind, lapply(1:nrow(range), function(i) WOE(inData, splitCol, range[i,], tgtCol, adjfac))) 
```

当我想精确控制“应用”操作的结果如何组合时，我经常使用这个习惯用法。这样我就不必记住自动简化的规则是什么（即 sapply 或 mapply 与 simple=TRUE）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:32:39.153

首先假设：

```
WOE = function(i) data.frame(matrix(runif(7),nrow=1))
WOE(1)
#       X1     X2     X3     X4     X5      X6     X7
# 1 0.7973 0.5489 0.8095 0.6375 0.7322 0.03601 0.3647

sapply(seq(5), function(x) WOE(x))
#    [,1]   [,2]    [,3]     [,4]    [,5]   
# X1 0.6664 0.02439 0.8753   0.0384  0.5619 
# X2 0.7818 0.1433  0.005552 0.5223  0.3665 
# X3 0.6308 0.551   0.7413   0.6464  0.3405 
# X4 0.4988 0.04422 0.8696   0.9513  0.01265
# X5 0.92   0.9563  0.4194   0.03145 0.05684
# X6 0.4526 0.07379 0.246    0.6304  0.3623 
# X7 0.6959 0.087   0.99     0.8185  0.2488 
```

简单的？因此，如果根据下面的@mnel 评论，矩阵也适合您，您可能会这样做：

```
sapply(seq(2,nrow(range)), function(i) WOE(inData, splitCol, range[i,], tgtCol, adjfac)) 
```

但是，如果您需要严格`data.frame`（所有单元格都不是同一类型），您可以使用：

```
do.call(rbind, lapply(seq(2,nrow(range)), 
        function(i) WOE(inData, splitCol, range[i,], tgtCol, adjfac))) 
```

# javascript - 使用 src 属性预加载图像

> ID：13505407
> 
> 赞同：0
> 
> 时间：2012-11-22T03:14:36.403
> 
> 标签：javascript

在互联网上阅读了许多“使用 javascript 预加载图像”标题后，我找到了相同的解决方案。这是一个简单的示例代码，用于预加载具有“stuff.jpg”名称的图像：

```
 <script>
    var img = new Image();
    img.src = "stuff.jpg"
 </script> 
```

但是我没有找到任何来源告诉我定义它时“src”属性的实际作用（例如img.src =“stuff.jpg”）。我的想法是，它只是通过一个字符串（即“stuff.jpg”）将“src”属性设置为 img，还没有加载真实的图像。但是我对我的想法相当不情愿，因为如果它是正确的，那么上面的代码将一文不值。你能告诉我 src 在上面的代码中实际上做了什么吗？如果你能给我一个解释的来源，那就太好了。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:21:45.730

是的，您的代码实际上加载了图像。设置图像对象的 src 会加载图像，现在您只需要将 img 添加到 DOM 中。

就像是：

```
var div = document.getElementById('theImg');
div.appendChild(img); 
```

当然这样做没有任何效果，但是如果要显示图像以响应某些事件、按钮单击或其他内容，那么您实际上是预先加载了图像。

您可以通过在 Chrome 中执行代码并查看开发人员工具中的网络选项卡来测试这一点，并查看该图像实际上是从服务器请求的，即使您没有将其添加到 DOM

# c# - ListView Item Selected 在 C# WPF 的详细信息页面上显示详细信息

> ID：13505409
> 
> 赞同：-1
> 
> 时间：2012-11-22T03:14:45.280
> 
> 标签：c#, wpf, listview

我在 listvew 中确实有一个数据列表，并且我在列表的每一行中添加了一个详细信息按钮。我的命令是通过单击按钮将empId与按钮绑定并加载包含所有用户数据的新列表

```
<Button Name="detailshow" Click="Detailshow_Click"  CommandParameter="{Binding Path=empID}"> 
```

而且查询是：

```
Button _button = (Button)sender;
            string empID = _button.CommandParameter.ToString();

            SqlCeConnection //stuffff
            objCon.Open();

            String str = "SELECT e.empID, e.empname FROM employee e WHERE empID= " + empID;

            SqlCeCommand cmd = new SqlCeCommand(str, objCon);
            DataSet ds = new DataSet();

            ListViewEmployeeDetails.DataContext = ds.Tables[0].DefaultView;

            cmd.ExecuteNonQuery(); 
```

好吧，只是它不起作用......它没有显示任何数据

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-22T13:22:31.383

您是否使用了调试器并检查了 empID 的值？

empID 很可能包含字符串“{Binding Path=empID}”，而不是您可能期望的 ID 值。

CommandParameter 不是依赖属性/对象，因此不可绑定。

[MSDN ButtonBase.CommandParameter](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.buttonbase.commandparameter.aspx)

# eclipse - 有没有办法在 Eclipse 中折叠/折叠区域代码？

> ID：13505413
> 
> 赞同：34
> 
> 时间：2012-11-22T03:15:34.393
> 
> 标签：eclipse, code-folding

我用这种方式在 Netbeans 中获取代码折叠：

```
// <editor-fold defaultstate="collapsed" desc=" description">
....
// </editor-fold> 
```

和视觉工作室：

```
#region description
...
#endregion 
```

但我在eclipse中找不到相同的用法。如何在 Eclipse 中使用代码折叠？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-22T03:23:06.653

Eclipse 支持代码折叠。

转到工作台首选项 -> 常规 -> 编辑器 -> 结构化文本编辑器，然后选中“启用折叠”框。

然后转到工作台首选项 -> Java -> 编辑器 -> 折叠，并调整您的折叠首选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T03:26:00.473

Windows->首选项->(C/C++)->编辑器->折叠

(C/C++) 将根据您使用的语言而改变。通常每个语言插件都有自己的折叠选项

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-06-12T13:21:05.507

`<editor-fold`and`#region`可以用作块折叠包装您想要的任何东西，不仅包括函数或注释，还包括两个甚至多个函数、注释、变量等。

Eclipse 没有这样的功能。我正在使用 Eclipse Neon，但仍然缺少这个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-12T13:37:52.337

我为与 Eclipse Neon 一起使用 的旧[咖啡字节代码折叠插件](https://sourceforge.net/projects/coffeeby1/)创建了一个 fork 和一个更新站点： [https ://github.com/stefaneidelloth/EclipseFolding/raw/master/com.cb.platsupp.site](https://github.com/stefaneidelloth/EclipseFolding/raw/master/com.cb.platsupp.site)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-11T11:56:21.990

虽然这是一个老问题，但我想补充一些意见。

Eclipse 本身并不支持自定义代码折叠块，Visual Studio 的`#region`and`#endregion`指令或 Netbeans 的`//<editor-fold defaulstate="collapsed" desc="My custom code folding block"`and也不支持`//</editor-fold>`。

（IntelliJ 也支持这一点，上述两种方法都有效，具体取决于 IDE 的配置方式。）

* * *

如果您碰巧使用 CDT 在 Eclipse 中工作（如在 C/C++ 中），那么有一种方法可以解决。我已经尝试安装提到的插件，但它们要么不再存在，要么安装使 IDE 不稳定。

在中心位置创建一个头文件，其中包含宏等（可选）。在该标题中，只需定义一个 FOLD 宏，如下所示：

```
#define FOLD // 
```

#includes 中央头文件的每个文件也将引用上面的宏。

一个例子是：

```
#ifdef FOLD Struct MyFileStruct
#pragma pack(1)
typedef struct MyFileStruct {
        WCHAR fileName[FILENAMELEN];  // File name
        WCHAR fileInfos[32];          // File info
        WCHAR fileDate[32];           // File date
        DWORD sizeInBytes;            // File size
} File;
#pragma pack()
#endif 
```

* * *

如果它的工作方式不清楚，我建议查看[C Preprocessor](https://www.tutorialspoint.com/cprogramming/c_preprocessors.htm)

我希望这有点用！

# mysql - 许多个人查询与一个大查询

> ID：13505415
> 
> 赞同：1
> 
> 时间：2012-11-22T03:16:04.427
> 
> 标签：mysql, database, performance, database-performance

我处于需要擦除表中的整个列（用于用户令牌）的情况，即同时重置所有用户令牌。有两种方法：使用单独的 UPDATE 查询单独重置每个用户的令牌；或进行一个影响所有行的大查询。

一个大查询的优点是它显然会快得多，但我担心当数据库很大时大型 UPDATE 查询的影响。查询期间发生的请求会受到影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:22:20.900

答案取决于您建立的事务和隔离级别。

您可以设置隔离以允许“脏读”、“幻读”或强制序列化读取和写入。

无论您如何进行更新，您都希望它成为一个单一的工作单元。

我建议尽量减少网络延迟并在一次网络往返中更新所有用户令牌。这意味着要么编写单个查询，要么将多个查询批处理到一个请求中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T04:14:44.720

恐怕没那么简单。即使启用脏读，运行一个大更新也有很多缺点：

*   更新一列的长时间运行的事务将有效地阻止其他插入、更新和删除事务。
*   长时间运行的事务会导致磁盘上的**巨大**负载，因为服务器必须将正在发生的所有事情都写入日志文件，以便您可以回滚那个巨大的事务。
*   如果事务失败，您将不得不完全重新运行它，它是不可重新启动的。

因此，如果同时要求可以解释为“可能需要一段时间才能运行的批处理”，我会选择批处理。一篇关于 MySql 中 DELETE 性能的很好的研究文章在这里：http: [//mysql.rjweb.org/doc.php/deletebig](http://mysql.rjweb.org/doc.php/deletebig)，我认为大多数发现都适用于 UPDATE。

诀窍将是找到最佳的“批量大小”。

批处理的额外好处是您可以使此过程对故障具有弹性并且对重新启动友好。

# java - Java Media Framework API 和 FMJ 的区别

> ID：13505418
> 
> 赞同：1
> 
> 时间：2012-11-22T03:16:32.053
> 
> 标签：java, jmf, fmj

我想从所有操作系统的扫描仪、相机、USB 相机中捕获数据。

Java Media Framework API 和 FMJ 有什么区别？哪个 API 更好？

**更新**

是否有可能使用 JMF 从扫描仪捕获数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T12:56:30.597

FMJ 是 JMF 的开源替代品。它能够使用 LTI-CIVIL 库从 USB 摄像机捕获实时视频。没有扫描仪集成 AFAIK。有一些用于 java 和扫描仪的库，开源和闭源。
看看 jtwain、jsane 等：

[http://today.java.net/pub/a/today/2004/11/18/twain.html](http://today.java.net/pub/a/today/2004/11/18/twain.html) http://asprise.com/product/jsane/index.php

# random - 如何用as3创建随机记忆配对游戏

> ID：13505421
> 
> 赞同：1
> 
> 时间：2012-11-22T03:16:41.420
> 
> 标签：random, matching

我正在尝试创建一个基于形状和颜色的记忆游戏。图形设计已完成，但我似乎无法正确编写代码。这是它应该做的：

1）每种形状有3种形状和三种颜色，总共有9种可能性；2）它们一个接一个地随机出现，如果第二个形状与第一个形状相同，则目标是向右按，如果不是，则向左按。3）其余的我知道如何编码，但是第一部分....我不知道怎么写:(

我考虑过制作一个包含所有九种可能性的数组，但是我应该如何从数组中随机取出一个形状并让它出现在舞台上，让系统记住它，再次随机选择第二个，然后，和第一个比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:43:31.323

你可以在 JAVA 中尝试这样的事情

```
String arr[]=new String[9];
    arr[0]="1";
    arr[1]="2";
    arr[2]="3";
    arr[3]="4";
    arr[4]="5";
    arr[5]="6";
    arr[6]="7";
    arr[7]="8";
    arr[8]="9";
    String firstVal=null;
    String secondVal=null;

    int index1=(int) (Math.random() * arr.length);
    int index2=(int) (Math.random() * arr.length);

    firstVal=arr[index1];
    secondVal=arr[index2];

    System.out.println(firstVal+" "+secondVal); 
```

# python - 在python中跟踪当前的http传输

> ID：13505424
> 
> 赞同：0
> 
> 时间：2012-11-22T03:17:10.620
> 
> 标签：python, html, http, get

您好我想做一个简单的带宽测试。默认 html 页面的大小为 10 MB。服务器的上传速度是 5Mbps，所以任何情况下 10MB 都不能在 10 秒内完成。我的计划是在获取请求中开始时间间隔，10 秒后我应该能够获得发送到一个特定客户端的总字节数的百分比或数量。所以我的问题是如何获得总字节的百分比或数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:27:57.307

**方法一**

所以最简单的解决方案是使用这个[开源](http://www.brandonchecketts.com/open-source-speedtest)速度测试，它将在浏览器中显示他们从您的特定服务器获得的下载速度。它还将显示上传到您的服务器的速度。这个特定的解决方案在服务器端使用 php 和 perl。有一个相关的问题[Python speedtest.net 或等效](https://stackoverflow.com/q/9163408/1699750)问题在您正在寻找的行中没有答案。

**方法二**

您可以使用 javascript 和 ajax 进行下载测试，让您从 Web 浏览器监控[文件的下载进度。](https://stackoverflow.com/q/399641/1699750)对于上传部分，您还可以使用相同的技术来监控[ajax 上传](https://stackoverflow.com/q/4856917/1699750)。

# wpf - 我第一次无法滚动用户控件，如果不单击 WPF 的滚动查看器

> ID：13505425
> 
> 赞同：2
> 
> 时间：2012-11-22T03:17:12.427
> 
> 标签：wpf, scroll, scrollviewer

基本上，我第一次无法滚动 WPF 的滚动查看器，如果不单击一次控制。

在使用 Spy++ 观看 Windows 事件后，我尝试使用 WPF API 作为 Focus()、SetFocus Win32 API、SendMessage 和 PostMessage 作为 SetCursor。但它没有用。

我唯一能做的就是使用 mouse_event API 强制点击。

`[DllImport("user32.dll")] static extern void mouse_event(int flags, int dX, int dY, int buttons, int extraInfo);`

你有什么滚动的解决方案？？？

# coffeescript - CoffeeScript 可以编译成 Haxe 吗？

> ID：13505431
> 
> 赞同：1
> 
> 时间：2012-11-22T03:17:43.997
> 
> 标签：coffeescript, haxe, code-translation

我现在正在学习 Haxe，我想知道是否有可能将任何编程语言编译为 Haxe（而不是从 Haxe。）如果没有任何编程语言可以完整地编译为 Haxe，那么至少可以将编程语言的一小部分（例如 Coffeescript）编译为 Haxe 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:13:11.510

此时，没有办法将coffeescript或类似的东西编译成Haxe。

CoffeeScript 是一个源到源编译器，因此您需要将其从 CoffeeScript->JS 更改为 CoffeeScript->Haxe，

我不确定这会有多难，你必须记住，Haxe 有一堆 Javascript 没有的特性，所有这些都需要在“新”咖啡脚本中表示。诸如：类型信息、枚举、typedef、迭代器、宏、条件编译、无类型块、元数据、属性访问等。您需要弄清楚如何在咖啡脚本中以不与本身或现有语法。

我也认为它可能很好，因为 CoffeeScript 有如此干净的语法，但后来看看让它工作的复杂性，我认为花括号和分号还不错:)

# android - Android - 当提高应用程序的价格时，人们升级是否需要花钱？

> ID：13505436
> 
> 赞同：-4
> 
> 时间：2012-11-22T03:19:01.577
> 
> 标签：android

抱歉，我知道这不是一个编程问题，但我只是不知道还能问哪里。

我在哪里可以找到这些信息？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:20:15.137

更新购买的应用程序是免费的。

# php - php'curl'不起作用

> ID：13505457
> 
> 赞同：2
> 
> 时间：2012-11-22T03:23:21.333
> 
> 标签：php, curl

我正在尝试使用'curl'将一些值从'1.php'页面发送到'3.php'页面。

这是我的代码-

**1.php**

```
<?php
$data = array();
$data['first_name'] = 'hello';
$data['last_name'] = 'Thind';
$data['password'] = 'secret';
$data['email'] = 'me@abc.com';
$post_str =''; 
foreach($data as $key=>$val)
{ $post_str .= $key.'='.$val.'&'; } 
$post_str = substr($post_str, 0, -1);
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, '3.php' );
curl_setopt($ch, CURLOPT_POST, TRUE); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_str);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$result = curl_exec($ch);
curl_close($ch);
echo $result;
?> 
```

**3.php**

```
<?php
$host="localhost";       
$dbname="mr"; 
// mysql code for table= create table m(name varchar(10));
$username="";            
$password="";
$con=mysql_connect("$host","$username","$password")or die("cannot connect");
mysql_select_db($dbname) or DIE('cannot select db');
if(isset($_POST['first_name'])){
$name=$_POST['first_name'];
$sql="insert into m
values('$name')";
$sq=mysql_query($sql);
echo"ok";
}
mysql_close($con);
?> 
```

我的问题是**“没有数据插入到数据库中，因为没有数据从 1.php 传输到 3.php”**。我通过给出一些值检查了 '3.php' 中的数据库代码，并将其正确插入到数据库中。所以代码“3.php”运行良好。所以“1.php”中的代码似乎不起作用。
（***注意：*** php_curl.dll 在 php.ini 文件中被激活。我使用的是 windows xp 专业服务包-2，xampp-win32 版本-1.8.1）

谁能告诉我那里有什么问题？

-谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T03:30:50.780

`curl_setopt($ch, CURLOPT_URL, '3.php' );`

这请求 URL `3.php`...您必须给它一些“提示”，因为 cURL 是一个外部程序，它将简单地按原样调用 URL。

**将其更改为类似`http://mysite.whatever/3.php`**

* * *

附带说明，cURL 是一个命令行实用程序，如果以这种方式使用，调试起来会更容易。您应该首先测试它的命令行，然后，如果它可以工作，请在您的 PHP 代码上实现它。

此处的 cURL 模式：http: [//curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:10:04.743

 **已解决 这是完整的代码（根据 Frankie 的帮助***）***** 

 ****1.php**

```
<?php
$data = array();
$data['first_name'] = 'hello';
$data['last_name'] = 'Thind';
$data['password'] = 'secret';
$data['email'] = 'me@abc.com';
$post_str =''; 
foreach($data as $key=>$val)
{ $post_str .= $key.'='.$val.'&'; } 
$post_str = substr($post_str, 0, -1);
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://localhost/3.php' ); // Heres the change 'http://localhost/3.php' instead of '3.php' . See on Frankie's reply.
curl_setopt($ch, CURLOPT_POST, TRUE); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_str);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$result = curl_exec($ch);
curl_close($ch);
echo $result;
?> 
```

**3.php**

```
<?php
$host="localhost";       
$dbname="mr"; 
// mysql code for table= create table m(name varchar(10));
$username="";            
$password="";
$con=mysql_connect("$host","$username","$password")or die("cannot connect");
mysql_select_db($dbname) or DIE('cannot select db');
if(isset($_POST['first_name'])){
$name=$_POST['first_name'];
$sql="insert into m
values('$name')";
$sq=mysql_query($sql);
echo"ok";
}
mysql_close($con);
?> 
```**

# matlab - MATLAB - 实数正整数索引

> ID：13505464
> 
> 赞同：0
> 
> 时间：2012-11-22T03:23:52.287
> 
> 标签：matlab

根据我的代码，我总是有真正的正整数索引。（i>1 和 2i-1>1 所以我应该没有任何问题）你能看到这里出了什么问题吗？

谢谢，艾玛迪斯

```
>> vector=tracks(1,2).matrix

vector =

   33.7275   96.5223   27.9644
   31.7655   95.9838   28.9847
   30.6771   95.9896   29.0000

>> length=tracks(1,2).nPoints

length =

     3

>> for i=length:-1:1 
vector(2i-1,:,:)=vector(i,:,:);
end 
Subscript indices must either be real positive integers or logicals.

>> for i=length:-1:1 i end

i =

     3

i =

     2

i =

     1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T03:26:44.010

您应该认识到 2*i 和 2i 之间的区别。

# dynamics-crm-2011 - 遇到空值时，FetchXML 不返回聚合列

> ID：13505466
> 
> 赞同：1
> 
> 时间：2012-11-22T03:24:03.720
> 
> 标签：dynamics-crm-2011, fetchxml

我有一个 FetchXML 查询，它返回两个聚合列：

```
<fetch distinct='false' mapping='logical' aggregate='true'>
  <entity name='blocktrade'>
    <attribute name='sourceref' alias='trade_count' aggregate='count'/>
    <attribute name='allocationtradecount' alias='alloc' aggregate='sum'/>
    <attribute name='organisation' alias='org' groupby='true'/>
  </entity>
</fetch> 
```

如果我将查询限制为返回在 allocationtradecount 中具有值的对象，它会按预期工作。但是，如果某些对象的 allocationtradecount 为 null，则结果中不会返回该列！

IE

```
(int)((AliasedValue)e["alloc_count"]).Value; 
```

失败。这是“预期的”吗？如何确保在对空值求和时使用 0？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T18:44:09.767

为此，您需要首先检查该记录是否包含任何值。

如以下代码所示...考虑一下，您想为 int sum 赋值。

```
int sum = e.Attributes.Contains("alloc") ? (int)((AliasedValue)e["alloc"]).Value : 0; 
```

上面的代码首先检查记录是否包含任何值，如果是，它将返回总和，否则将返回 0。

希望这可以帮助。

# c++ - 从线程更新进度条的最佳方法

> ID：13505467
> 
> 赞同：2
> 
> 时间：2012-11-22T03:24:09.590
> 
> 标签：c++, multithreading, winapi, progress-bar

我有一个在线程中执行的长时间运行的任务。

这一切的代码都发生在一个单独的类中，而不是`WinMain()`入口点，比如说`WorkerClass`。

我想经常随着任务的进度更新进度条。

经过几个小时的研究、试验和错误，我遇到了几种方法：

* * *

A）`PostMessage`从线程内部自定义到主窗口proc *（问题：被几个来源不赞成：线程不应该接触主UI）*

B）从某些函数自定义`PostMessage`到主窗口proc *（问题：在自由与类函数之间遇到范围问题，因为线程函数必须是自由的）*`WorkerClass`

 *C）工作线程更新`int`指针，然后 UI 线程计时器定期更新 UI *（问题：值得花时间，或者这是“做错了”）*

* * *

很多讨论都涉及到我不感兴趣的 MFC 或 C#。

我已经到了所有三种方法都遇到障碍的地步。搞定一个好工作需要几个小时——我不想费力地把它弄错。

我应该追求哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T03:30:54.350

FWIW：我目前处理的代码库向主线程发布了一条消息。

另一种方法，也是我更喜欢的一种，是观察者模式。主线程将“订阅”工作者，并且每当工作者更新自己时，它都会通知其观察者（订阅它的任何对象）。 [http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)*

# jquery - 无法让 jQuery validate 验证复选框字段

> ID：13505472
> 
> 赞同：0
> 
> 时间：2012-11-22T03:24:41.957
> 
> 标签：jquery, jquery-validate

我无法让 jQuery 验证以确保已检查复选框字段。其他字段验证正常。

这是我的 JS：

```
$(".my-form").validate({
  errorLabelContainer: ".form-errors",
  wrapper: "li",
  rules: {
    cf_enquiry_accept_terms_cond: "required"
  },
  messages: {
    cf_enquiry_accept_terms_cond: "You must accept our terms and conditions"
  },
}); 
```

以及复选框字段的 HTML（我无法控制，因为它是使用 CMS 标签自动生成的）：

```
<div>
  <label for="cf_enquiry_accept_terms_cond">Accept Terms &amp; Conditions</label>
  <input type="hidden" name="cf_enquiry_accept_terms_cond" value="n" />
  <label><input type="checkbox" name="cf_enquiry_accept_terms_cond[]" value="Yes"  />&nbsp;Accept Terms & Conditions</label> <div style="clear:left"></div>
</div> 
```

有什么想法我会出错吗？[我从jQuery 验证页面上](http://jquery.bassistance.de/validate/demo/)的演示中复制了规则/消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:15:31.753

```
<input type="checkbox" name="cf_enquiry_accept_terms_cond[]" value="Yes"  /> 
```

应该包括 id 元素并且应该是

```
<input type="checkbox" id="cf_enquiry_accept_terms_cond" name="cf_enquiry_accept_terms_cond[]" value="Yes"  /> 
```

# java - 使用 struts2 映射命名空间错误的操作

> ID：13505480
> 
> 赞同：2
> 
> 时间：2012-11-22T03:26:11.627
> 
> 标签：java, struts2, action-mapping

我在使用 Struts2 时遇到此错误

```
There is no Action mapped for namespace [/] and action name [LoginAction] 
associated with context path [/TestBoard]. - [unknown location] 
```

项目上下文根 = TestBoard

这是我的 struts.xml：

```
<struts>
    <constant name="struts.serve.static.browserCache" value="false" />
    <constant name="struts.i18n.encoding" value="UTF-8" />
    <constant name="struts.action.extension" value="" />

    <package name="strutsPkg" extends="struts-default" namespace="/">

         <interceptors>
            <interceptor name="loginCheck" class="com.finger.fwebframework.action.LoginSessionCheck">
                <!--<param name="excludeActions">/LoginAction.action,/LoginIndexAction.action,/CUMQryCustMenuFrameListAction.action,/CUMQryCustSuppHstFrameListAction.action,/CUMQryLnkTgtSysPermtFrameListAction.action,/CUMQryRsrchInstFrameListAction.action,/CUMQrySchInfoFrameListAction.action</param>-->
                <param name="excludeActions">/LoginAction.action,/LoginIndexAction.action,\/[\w]*Frame[\w]*Action.action,\/[\w]*PopAction.action</param>
                <param name="redirectWebPage">/login.jsp</param>
            </interceptor>

            <interceptor-stack name="srcmsStack">
                <interceptor-ref name="defaultStack"/>  <!-- struts-default.xml support -->
                <interceptor-ref name="loginCheck"/>
                <interceptor-ref name="validation"> <!-- No result defined for action support -->
                    <param name="excludeMethods">input,back,cancel,browse</param>
                </interceptor-ref>
            </interceptor-stack>
        </interceptors>

        <default-interceptor-ref name="srcmsStack"/>
     </package>

    <include file="com/finger/fwebframework/struts/Struts_com.xml"></include>
</struts> 
```

这是我的 Web.xml

```
 <!-- siteMesh -->
    <filter>
        <filter-name>sitemesh</filter-name>
        <filter-class>com.opensymphony.module.sitemesh.filter.PageFilter</filter-class>
    </filter>

    <!-- struts2 -->
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
        <init-param>
            <param-name>struts.i18n.encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>NoCache</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>sitemesh</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>       

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <session-config>
        <session-timeout>10</session-timeout>
    </session-config>

    <welcome-file-list>
        <welcome-file>login.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

这是我的 login.jsp

```
 <%@ taglib prefix="s" uri="/struts-tags" %>

    <head>
       <meta http-equi="Content-Type" content="text/html; charset=utf-8"/>
      <script>
        $("#loginButton").click(function() {
        if ($.validate()) {
            $("#frmLogin").attr('action', 'LoginAction.action').submit();
        };
    });
      </script>
    </head>
    <body id="bdy" class="main_bg" >
         <s:form id="frmLogin">
    <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" >
          <tr>
              <td>ID: </td>
              <td><input type = "text" name = "ID" id ="ID" /></td>
          </tr>

           <tr>
               <td>PW : </td>
               <td><input type = "password" name = "PW" id ="PW"/></td>
           </tr>

           <tr>
               <td><input type = "button" id ="loginButton" value="Log_In"/></td>
           </tr>
        </table>
     </s:form>
</body> 
```

我做错了什么，我该如何解决这个问题？

请回答我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:24:15.157

在您的 struts.xml 中看到错误消息 **“没有为命名空间 [/] 和操作名称 [LoginAction] 映射的操作”** 我没有找到任何可以尝试插入的操作标签

```
<action name="LoginAction" class="com.xxx" method="">
   <result>/index.jsp</result>
</action> 
```

# android - 将消息从 Activity 传递到 Fragment

> ID：13505481
> 
> 赞同：2
> 
> 时间：2012-11-22T03:26:12.713
> 
> 标签：android, android-fragments, android-listfragment, android-fragmentactivity

我似乎在将 Activity 中获得的数据传递给 Fragment 时遇到问题。数据没有出现在 listfragment 中！这是我的列表片段活动。每次我将一个项目添加到列表中时，我都会重新实例化该片段，也就是捆绑一个项目并使用新片段中的构造函数来执行它。

```
package com.example.sample;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import android.widget.Toast;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;

/**
 * An activity representing a list of Courses. This activity has different
 * presentations for handset and tablet-size devices. On handsets, the activity
 * presents a list of items, which when touched, lead to a
 * {@link CourseDetailActivity} representing item details. On tablets, the
 * activity presents the list of items and item details side-by-side using two
 * vertical panes.
 * <p>
 * The activity makes heavy use of fragments. The list of items is a
 * {@link CourseListFragment} and the item details (if present) is a
 * {@link CourseDetailFragment}.
 * <p>
 * This activity also implements the required
 * {@link CourseListFragment.Callbacks} interface to listen for item selections.
 */
public class CourseListActivity extends SherlockFragmentActivity implements
    CourseListFragment.Callbacks {

CourseListFragment listFrag;

public static String courseName;
private static final int REQUEST_CODE = 10;

/**
 * Whether or not the activity is in two-pane mode, i.e. running on a tablet
 * device.
 */
private boolean mTwoPane;
private boolean once = true;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_course_list);

    if (findViewById(R.id.course_detail_container) != null) {
        // The detail container view will be present only in the
        // large-screen layouts (res/values-large and
        // res/values-sw600dp). If this view is present, then the
        // activity should be in two-pane mode.
        mTwoPane = true;

        // In two-pane mode, list items should be given the
        // 'activated' state when touched.
        listFrag = ((CourseListFragment) getSupportFragmentManager().findFragmentById(
                R.id.course_list));
        listFrag.setActivateOnItemClick(true);
    }

    // TODO: If exposing deep links into your app, handle intents here.
}

/**
 * Callback method from {@link CourseListFragment.Callbacks} indicating that
 * the item with the given ID was selected.
 */

public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getSupportMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    boolean bool;
    switch (item.getItemId()) {
    case R.id.add_course:
        Intent intent = new Intent(this, CourseAddActivity.class);
        startActivityForResult(intent, REQUEST_CODE);
        bool = true;
    default:
        bool = super.onOptionsItemSelected(item);
    }
    return bool;
}

@Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK && requestCode == REQUEST_CODE) {
      if (data.hasExtra("courseName")) {
        courseName = data.getExtras().getString("courseName");
        Bundle args = new Bundle();
        args.putString("courseKey", courseName);
        listFrag = new CourseListFragment(args);
      }
    }
  }

@Override
public void onItemSelected(String id) {
    if (mTwoPane) {
        // In two-pane mode, show the detail view in this activity by
        // adding or replacing the detail fragment using a
        // fragment transaction.
        if (once) {
            ActionBar actionBar = getSupportActionBar();
            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
            // initiating both tabs and set text to it.
            ActionBar.Tab assignTab = actionBar.newTab().setText(
                    "Assignments");
            ActionBar.Tab schedTab = actionBar.newTab().setText("Schedule");
            ActionBar.Tab contactTab = actionBar.newTab()
                    .setText("Contact");

            // Create three fragments to display content
            Fragment assignFragment = new Assignments();
            Fragment schedFragment = new Schedule();
            Fragment contactFragment = new Contact();

            assignTab.setTabListener(new MyTabsListener(assignFragment));
            schedTab.setTabListener(new MyTabsListener(schedFragment));
            contactTab.setTabListener(new MyTabsListener(contactFragment));

            actionBar.addTab(assignTab);
            actionBar.addTab(schedTab);
            actionBar.addTab(contactTab);
            once = false;
        }
    } else {
        // In single-pane mode, simply start the detail activity
        // for the selected item ID.
        Intent detailIntent = new Intent(this, CourseDetailActivity.class);
        startActivity(detailIntent);
    }

}

class MyTabsListener implements ActionBar.TabListener {
    public Fragment fragment;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.course_detail_container, fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }
}
} 
```

这是我的 ListFragment，我在其中创建了两个构造函数，一个接受参数。

```
package com.example.sample;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Build;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

import com.actionbarsherlock.app.SherlockListFragment;

/**
 * A list fragment representing a list of Courses. This fragment also supports
 * tablet devices by allowing list items to be given an 'activated' state upon
 * selection. This helps indicate which item is currently being viewed in a
 * {@link CourseDetailFragment}.
 * <p>
 * Activities containing this fragment MUST implement the {@link Callbacks}
 * interface.
 */
public class CourseListFragment extends SherlockListFragment {

private static String courseName;
ArrayList<String> courseItems;
ArrayAdapter<String> adapter;
/**
 * The serialization (saved instance state) Bundle key representing the
 * activated item position. Only used on tablets.
 */
private static final String STATE_ACTIVATED_POSITION = "activated_position";

/**
 * The fragment's current callback object, which is notified of list item
 * clicks.
 */
private Callbacks mCallbacks = sDummyCallbacks;

/**
 * The current activated item position. Only used on tablets.
 */
private int mActivatedPosition = ListView.INVALID_POSITION;

/**
 * A callback interface that all activities containing this fragment must
 * implement. This mechanism allows activities to be notified of item
 * selections.
 */
public interface Callbacks {
    /**
     * Callback for when an item has been selected.
     */
    public void onItemSelected(String id);
}

/**
 * A dummy implementation of the {@link Callbacks} interface that does
 * nothing. Used only when this fragment is not attached to an activity.
 */
private static Callbacks sDummyCallbacks = new Callbacks() {
    @Override
    public void onItemSelected(String id) {
    }
};

/**
 * Mandatory empty constructor for the fragment manager to instantiate the
 * fragment (e.g. upon screen orientation changes).
 */
public CourseListFragment() {
}

public CourseListFragment(Bundle args) {
    courseName = args.get("courseKey").toString();
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    courseItems = new ArrayList<String>();
    adapter = new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_1, courseItems);
    // TODO: replace with a real list adapter.
    int layout = (Build.VERSION.SDK_INT >= 11) ? android.R.layout.simple_list_item_activated_1
            : android.R.layout.simple_list_item_1;
    setListAdapter(adapter);
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    // Restore the previously serialized activated item position.
    if (savedInstanceState != null
            && savedInstanceState.containsKey(STATE_ACTIVATED_POSITION)) {
        setActivatedPosition(savedInstanceState
                .getInt(STATE_ACTIVATED_POSITION));
        courseItems.add(courseName);
        adapter.notifyDataSetChanged();
    }
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // Activities containing this fragment must implement its callbacks.
    if (!(activity instanceof Callbacks)) {
        throw new IllegalStateException(
                "Activity must implement fragment's callbacks.");
    }

    mCallbacks = (Callbacks) activity;
}

@Override
public void onDetach() {
    super.onDetach();

    // Reset the active callbacks interface to the dummy implementation.
    mCallbacks = sDummyCallbacks;
}

@Override
public void onListItemClick(ListView listView, View view, int position,
        long id) {
    super.onListItemClick(listView, view, position, id);

    // Notify the active callbacks interface (the activity, if the
    // fragment is attached to one) that an item has been selected.
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if (mActivatedPosition != ListView.INVALID_POSITION) {
        // Serialize and persist the activated item position.
        outState.putInt(STATE_ACTIVATED_POSITION, mActivatedPosition);
    }
}

/**
 * Turns on activate-on-click mode. When this mode is on, list items will be
 * given the 'activated' state when touched.
 */
public void setActivateOnItemClick(boolean activateOnItemClick) {
    // When setting CHOICE_MODE_SINGLE, ListView will automatically
    // give items the 'activated' state when touched.
    getListView().setChoiceMode(
            activateOnItemClick ? ListView.CHOICE_MODE_SINGLE
                    : ListView.CHOICE_MODE_NONE);
}

private void setActivatedPosition(int position) {
    if (position == ListView.INVALID_POSITION) {
        getListView().setItemChecked(mActivatedPosition, false);
    } else {
        getListView().setItemChecked(position, true);
    }

    mActivatedPosition = position;
}
} 
```

任何帮助都非常感谢！谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:23:03.683

如果你像这样重新实例化，`CourseListFragment`每次调用的类变量都会被销毁

`listFrag = new CourseListFragment(args);`

`CourseListFragment`您应该在不破坏当前片段的情况下创建一个方法来添加课程名称：

```
public void addCourse(String courseName) {
    courseItems.add(courseName);
    adapter.notifyDataSetChanged();
} 
```

在您的活动中：

```
@Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK && requestCode == REQUEST_CODE) {
      if (data.hasExtra("courseName")) {
        courseName = data.getExtras().getString("courseName");
        listFrag.addCourse(courseName);
      }
    }
  } 
```

# c++ - 如何在多个接口上绑定到同一个 UDP 端口

> ID：13505483
> 
> 赞同：2
> 
> 时间：2012-11-22T03:26:30.733
> 
> 标签：c++, sockets, udp, bsd

我有两个网络接口，并试图在它们上绑定到相同的 UDP 端口，但是当我尝试绑定到第二个时出现错误，`EADDRINUSE`. 当我绑定到套接字时，我传递了一个`sockaddr*`设置端口和要使用的唯一 IP 地址的位置。

我必须使用套接字选项`SO_REUSEADDR`吗？这将允许在任一套接字上接收消息，还是将它们转到与其绑定的 IP 地址匹配的套接字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T03:58:53.833

您可以为[IPv4](http://www.kernel.org/doc/man-pages/online/pages/man7/ip.7.html)或[IPv6](http://www.kernel.org/doc/man-pages/online/pages/man7/ipv6.7.html)提供[`bind(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/bind.2.html)一个套接字（您不必这样做，但这是通常的方法）。这将使该单个套接字能够接受来自盒子上所有网络接口的数据包。`INADDR_ANY``in6addr_any`

然后`SO_REUSEADDR`套接字选项将允许您将其他套接字绑定到*更具体*的地址，即单独的接口和相同的端口。

数据包将在绑定到与给定数据包的目标 IP 地址最匹配的地址的套接字上接收。

# c++ - C++：不能将指针向量分配给另一个指针向量

> ID：13505486
> 
> 赞同：1
> 
> 时间：2012-11-22T03:26:48.633
> 
> 标签：c++

我有`class Student`（`studentOwner`）和`class Section`。这是我的课`Student`：

```
class Student {
  vector<Section*> enrolledSections;
public:
  vector<Section*> getEnrolledSections() const { return enrolledSections; }
} 
```

因此，当我获取`vector<Section*>`并分配给另一个向量时，我会遇到错误。我正在使用 Microsoft Visual Studio。

```
// first example: no error, if take size of vector
int a = studentOwner->getEnrolledSections().size();
// second example: error, when only take its vector and assign again
// Error: no suitable user-define conversion from "std::vector<error-type" ....
vector<Section*> enrolled = studentOwner->getEnrolledSections();
// third example: error when take this vector and assign to reference of same type
// Error: initial value of reference to non-const value must be lvalue
vector<Section*>& enrolled = studentOwner->getEnrolledSections(); 
```

第二个示例的完整错误是：

```
Error: no suitable user-define conversion from "std::vector<error-type", std::alocator<<error-type> *>> "to " std::vector<Section*, std::allocator<Section*>>" exists 
```

在我的项目的许多课程中，我无法执行第二行和第三行并收到相同的错误。我无法自己解释。请教我这个时候。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T04:49:58.417

通常，如果您`error-type`在 MSVC 错误中看到，这是由于未及时包含在该编译单元中的前向声明类型的结果。例如，

```
// Course.h
class Student;

class Course {
     [...]
public:
     Student* getStudent();
}

// Course.cpp
#include "Course.h"

Student* Course::getStudent()
{
    return new Student("Name");  //< Whoops, we never included Student.h!
} 
```

在评论中，您指出循环包含依赖项。正如@Daniel Castro 所指出的，您应该在头文件中转发声明以避免循环包含，然后在 .cpp 文件中包含所需的头文件（`class Student;`如果您不熟悉，请注意上面的转发声明）。

顺便说一句，我还要注意您的示例中的一些设计问题。回归`std::vector<Section*>`并不能说明谁拥有什么。如果我`std::vector`从函数中获取按值，则约定是我现在*拥有*该向量及其内容。如果我拥有某些东西，那么我有责任删除它。如果没有看到您的实际实现，大多数编码人员会惊讶地发现他们不应该删除向量的内容。我建议要么通过`const&`（例如，`const vector<Section*>&`）返回向量，以防止客户端代码操纵向量（因此客户端不*拥有*它），或者使用[std::shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)来管理`Section`对象的共享所有权方案：

```
class Student {
    vector<shared_ptr<Section>> enrolledSections_;
public:
    vector<shared_ptr<Section>> getEnrolledSections() const { return enrolledSections_; }
} 
```

现在很清楚谁拥有什么。超出您的要求，但希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:53:00.017

您需要将向量作为参考返回，否则向量会在返回时被复制。此外，您的函数是 const，因此您也必须将向量返回为 const。

```
class Student 
{
  std::vector<Section*> enrolledSections;
public:
  const std::vector<Section*> &getEnrolledSections() const { return enrolledSections; }
} 
```

现在你应该可以

```
const std::vector<Section*>& enrolled = studentOwner->getEnrolledSections(); 
```

# php - 如何为学说编写服务类

> ID：13505487
> 
> 赞同：0
> 
> 时间：2012-11-22T03:27:08.330
> 
> 标签：php, doctrine, doctrine-orm

现在，我正在编写一个带有教义的 php 项目。但是在服务类中，我需要注入一个 EntityManager。怎么做？我已经搜索了一些答案，但他们使用了一个框架。

如果不使用任何 php 框架，如何编写服务类并注入 EntityManager？

十分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:42:39.017

您只需要编写一个获取 EntityManager 对象的类，按照： [http ://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/configuration.html#obtaining-an-entitymanager](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/configuration.html#obtaining-an-entitymanager)

```
class EntityManagerService
{
    public static function getEntityManager() {
        // return EntityManager object as per documentation.
    }
}

$em = EntityManagerService::getEntityManager(); 
```

我希望这有帮助！

# android - ANDROID - 如何将位图设置为 simpleadapter（已关闭）

> ID：13505491
> 
> 赞同：1
> 
> 时间：2012-11-22T03:27:49.200
> 
> 标签：android, adapter, simpleadapter

我正在开发我的 android 应用程序。我一直在研究和尝试所有不同的方法来从我的服务器 url 中检索图像并将其显示给我的`listview`using `SimpleAdapter`.

**下载图像代码**

```
public Bitmap download(final String image) 
{
    URL myFileUrl = null;
    try {
        myFileUrl = new URL("http://SERVER URL/images/"+image);
        HttpURLConnection conn = (HttpURLConnection) myFileUrl.openConnection();
        conn.setDoInput(true);
        conn.connect();
        //int length = conn.getContentLength();
        InputStream is = conn.getInputStream();
        bmImg = BitmapFactory.decodeStream(is);
    } catch (MalformedURLException e) {
        // imageLoadedHandler.sendEmptyMessage(FAILED);
    } catch (IOException e) {
        // imageLoadedHandler.sendEmptyMessage(FAILED);
    }
    return bmImg;
} 
```

**将下载的图像放入 HASHMAP**

```
// IMAGE HASHMAP
HashMap<String, Object> map = new HashMap<String, Object>();
map.put(TAG_PHOTO, download(c.getString(TAG_PHOTO)));
applicantsList.add(map); 
```

**将解析的 JSON 数据更新到 ListView**

```
adapter = new SimpleAdapter(
                            SignUpApplicantActivity.this, applicantsList,
                            R.layout.list_applicant, new String[] {
                                    TAG_UID, TAG_NAME, TAG_OVERALL,
                                    TAG_APPLY_DATETIME, TAG_PHOTO},
                            new int[] { R.id.applicantUid,
                                    R.id.applicantName,
                                    R.id.applicantOverall,
                                    R.id.apply_datetime, R.id.list_image});

                    adapter.setViewBinder(new SimpleAdapter.ViewBinder() {
                        @Override
                        public boolean setViewValue(View view, Object data,String textRepresentation) 
                        {
                            if((view instanceof ImageView) & (data instanceof Bitmap)) 
                            {
                                ImageView iv = (ImageView) view;
                                Bitmap bm = (Bitmap) data;
                                iv.setImageBitmap(bm);
                                return true;
                            }
                            return false;
                        }
                    });

                    // updating listView
                    setListAdapter(adapter); 
```

在尝试了上述方法后（我认为这是我研究中最接近的答案），图像仍然没有显示在我的应用程序中。我需要一些帮助！提前致谢！

# spring-security - 来自mysql数据库的spring安全认证

> ID：13505499
> 
> 赞同：0
> 
> 时间：2012-11-22T03:29:48.117
> 
> 标签：spring-security

我正在尝试让 spring 对我的 mysql 数据库中的用户进行身份验证。它适用于内存中的用户。我遵循了有关此的每个教程，但仍然无法正常工作，我不明白为什么，因为它需要一个非常基本的配置。

我的 applicationContext.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans:beans xmlns="http://www.springframework.org/schema/security"
 xmlns:beans="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.springframework.org/schema/beans
                     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                     http://www.springframework.org/schema/security
               http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http security="none" pattern="/javax.faces.resource/**" />
<http security="none" pattern="/static/**"/>
<http auto-config="true" use-expressions="true"
                         access-denied-page="/public/login.xhtml">

    <intercept-url pattern="/public/**" access="permitAll"/>
    <intercept-url pattern="/secure/adm.xhtml" access="hasRole('ROLE_ADMIN')"/>
    <intercept-url pattern="/secure/**" access="hasRole('ROLE_USER')"/>
    <intercept-url pattern="/login.xhtml" access="permitAll"/>
    <intercept-url pattern="/**" access="hasRole('ROLE_USER')"/>
    <form-login login-page="/public/login.xhtml"
                authentication-failure-url="/public/login.xhtml?erro=true"
                default-target-url="/secure/secure.xhtml"
                username-parameter="usuario"
                password-parameter="senha"
                /> <!--login-processing-url-->
    <logout/>
    <session-management invalid-session-url="/timeout.jsp">
        <concurrency-control max-sessions="1" error-if-maximum-exceeded="true" />
    </session-management>
</http>

<beans:bean id="dataSource"
            class="org.springframework.jdbc.datasource.DriverManagerDataSource" >

    <beans:property name="url" value="jdbc:mysql://localhost:3306/gde" />
    <beans:property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <beans:property name="username" value="root" />
    <beans:property name="password" value="" />
</beans:bean>

<authentication-manager alias="authenticationManager">
    <authentication-provider>

        <user-service>
            <user name="a" password="b" authorities="ROLE_USER"/>
            <user name="b" password="a" authorities="ROLE_ADMIN"/> 
        </user-service>

        <jdbc-user-service data-source-ref="dataSource"
                           users-by-username-query="SELECT USUARIO as username, SENHA as password, ISATIVO as enabled FROM usuario WHERE USUARIO=?"

                           authorities-by-username-query="SELECT USUARIO_USUARIO as username, AUTORIZACOES_TIPO as authority FROM usuario_tipo_usuario WHERE USUARIO_USUARIO=?"
        />
    </authentication-provider>
</authentication-manager>
</beans:beans> 
```

对于 a/b 和 b/a，它的身份验证很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:38:31.203

正式回答：我只需要删除内存用户并让它工作，虽然我不太明白为什么。谢谢你，蓝脚和卢克泰勒。

# python - 为什么我可爱的 Python 会发生这种情况：TypeError: cannot concatenate 'str' and 'int' objects

> ID：13505502
> 
> 赞同：3
> 
> 时间：2012-11-22T03:30:38.417
> 
> 标签：python, string, int, type-coercion

首先，我搜索了有关以下方面的 Python 问题：

```
TypeError: cannot concatenate 'str' and 'int' objects 
```

有很多答案。但我的问题不是如何在 Python 中解决上述问题。

我的问题是为什么。为什么 Python，一门非常可爱的语言，会选择这样的行为方式？

我知道 Java 确实支持这种将 int 自动强制转换为 String 的方式。在 Python 中不自动将 int 强制转换为字符串是否有技术依据？当然，显式比隐式要好，但根据我的经验，这种强制对程序员来说实际上是有用的。

根据我的经验，写如下：

```
s = 'This file has ' + linenum 
```

很常见。将 int 强制转换为字符串真的很方便。对于 String 到 int，我认为不需要太多。

我发现 Python 是一门非常优雅的语言。但是上面的问题反复出现在我身上，我想我需要在 StackOverflow 中问它。它真的很吸引我。

谢谢你帮助我。

# jquery - 日历标记

> ID：13505507
> 
> 赞同：0
> 
> 时间：2012-11-22T03:31:04.277
> 
> 标签：jquery, asp.net, asp.net-mvc, jquery-ui

ASP.NET MVC 中是否有现有的解决方案或方法可以在每月视图的日历标记方式表中呈现如下数据？

```
+--------------+-----------------------------+------------+-----+-----------+-----------+
| account_name |     PositionDescription     |  FullDate  | Day |  DayName  | ShiftType |
+--------------+-----------------------------+------------+-----+-----------+-----------+
| employee1    | Customer Support Specialist | 2012-11-01 |   1 | Thursday  | G         |
| employee1    | Customer Support Specialist | 2012-11-03 |   3 | Saturday  | G         |
| employee1    | Customer Support Specialist | 2012-11-05 |   5 | Monday    | G         |
| employee1    | Customer Support Specialist | 2012-11-06 |   6 | Tuesday   | G         |
| employee1    | Customer Support Specialist | 2012-11-08 |   8 | Thursday  | G         |
| employee1    | Customer Support Specialist | 2012-11-10 |  10 | Saturday  | G         |
| employee1    | Customer Support Specialist | 2012-11-12 |  12 | Monday    | G         |
| employee1    | Customer Support Specialist | 2012-11-13 |  13 | Tuesday   | G         |
| employee1    | Customer Support Specialist | 2012-11-15 |  15 | Thursday  | G         |
| employee1    | Customer Support Specialist | 2012-11-17 |  17 | Saturday  | G         |
| employee1    | Customer Support Specialist | 2012-11-19 |  19 | Monday    | G         |
| employee1    | Customer Support Specialist | 2012-11-20 |  20 | Tuesday   | G         |
| employee1    | Customer Support Specialist | 2012-11-22 |  22 | Thursday  | G         |
| employee1    | Customer Support Specialist | 2012-11-24 |  24 | Saturday  | G         |
| employee1    | Customer Support Specialist | 2012-11-26 |  26 | Monday    | G         |
| employee1    | Customer Support Specialist | 2012-11-27 |  27 | Tuesday   | G         |
| employee1    | Customer Support Specialist | 2012-11-29 |  29 | Thursday  | G         |    
+--------------+-----------------------------+------------+-----+-----------+-----------+ 
```

谢谢你！宣威

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:35:37.510

不完全确定这是否是您所追求的，但[FullCalendar](http://arshaw.com/fullcalendar/)是一个相当不错的 jQuery 日历插件，并且至少有一个关于如何将其与 MVC 集成的教程：[http ://weblogs.asp.net/gunnarpeipman/archive/ 2010/02/03/using-fullcalendar-jquery-component-with-asp-net-mvc.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2010/02/03/using-fullcalendar-jquery-component-with-asp-net-mvc.aspx)

# java - 在java中输出大数据文件的最佳方法

> ID：13505509
> 
> 赞同：1
> 
> 时间：2012-11-22T03:31:16.347
> 
> 标签：java, printing

我正在尝试将大量数据输出到文件中。现在，我正在尝试以下操作：

> byte[][] 手，尺寸为 25 亿 x 7

我有一系列嵌套的 for 循环：

```
for ...
  for ...
    for ...
      hands[i][j] = blah 
```

然后我在最后输出数组的所有条目。

另一种方法是不使用内存，每次都写入： for ... for ... for ... pw.println(blah)

但这似乎真的很慢，因为它会不断地打印。

第一种方法是最好的吗？一些中间方法会更好吗，比如存储和打印每 k 个条目？如果是这样，使用的 k 值是多少？

编辑：这是代码

```
package tables;

import general.Config;
import general.Constants;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.IOException;
import java.util.StringTokenizer;

// Outputs canonical river hands
public class OutputRiverCanonicalHands3 implements Config, Constants{

    public static void main(String[] args) throws IOException {
        int half_river = (int)(NUM_RIVER_HANDS/2);
        boolean[] river_seen_index_1 = new boolean[half_river];
        boolean[] river_seen_index_2 = new boolean[(int)(NUM_RIVER_HANDS - half_river)];
        System.out.println("DONE DECLARING RIVER SEEN");
        byte hole11, hole12, board1, board2, board3, board4, board5;
        long river_index;

        byte[][] turnHands = new byte[NUM_TURN_HANDS][6]; 
        System.out.println("DONE DECLARING TURN");
        BufferedReader br = new BufferedReader(new FileReader(RIVER_TURN_INDICES_FILE2));
        int count = 0;
        while (br.ready()) {
            StringTokenizer str = new StringTokenizer(br.readLine());
            str.nextToken();
            for (int i = 0; i < turnHands[count].length; ++i)
                turnHands[count][i] = Byte.parseByte(str.nextToken());
            ++count;
        }
        br.close();
        System.out.println("DONE READING TURN");

        DataOutputStream dos = new DataOutputStream(new FileOutputStream(RIVER_CANONICAL_HANDS_FILE3));
        byte[][] hands = new byte[half_river][7];
        System.out.println("DONE DECLARING RIVER ARRAY");

        long startTime = System.currentTimeMillis();
        int arrayIndex;
        for (int i = 0; i < turnHands.length; ++i) {
            if (i % 100000 == 0) {
                long elapsedTime = System.currentTimeMillis() - startTime;
                System.out.println(i + " " + elapsedTime);
            }
            hole11 = turnHands[i][0];
            hole12 = turnHands[i][1];
            board1 = turnHands[i][2];
            board2 = turnHands[i][3];
            board3 = turnHands[i][4];
            board4 = turnHands[i][5];
            for (board5 = 0; board5 < DECK_SIZE; ++board5) {
                if (board5 == hole11 || board5 == hole12 
                        || board5 == board1 || board5 == board2 || board5 == board3 || board5 == board4)
                    continue;

                river_index = ComputeIndicesTight.compute_river_index(hole11, hole12, board1, board2, board3, board4, board5);
                if (river_index < half_river && river_seen_index_1[(int)river_index]) 
                    continue;
                if (river_index >= half_river && river_seen_index_2[(int)(river_index - half_river)])
                    continue;
                if (river_index < half_river) {
                    arrayIndex = (int)river_index;
                    river_seen_index_1[arrayIndex] = true;
                    hands[arrayIndex][0] = hole11;
                    hands[arrayIndex][1] = hole12;
                    hands[arrayIndex][2] = board1;
                    hands[arrayIndex][3] = board2;
                    hands[arrayIndex][4] = board3;
                    hands[arrayIndex][5] = board4;
                    hands[arrayIndex][6] = board5;
                }
                else if (river_index == half_river) {
                    System.out.println("HALFWAY THERE");
                    for (int j = 0; j < hands.length; ++j) 
                        for (int k = 0; k < 7; ++k)
                            dos.writeByte(hands[j][k]);
                    hands = new byte[(int)(NUM_RIVER_HANDS - half_river)][7];
                    System.out.println("DONE PRINTING HALFWAY!");
                }
                if (river_index >= half_river) {
                    arrayIndex = (int)(river_index - half_river);
                    river_seen_index_2[arrayIndex] = true;
                    hands[arrayIndex][0] = hole11;
                    hands[arrayIndex][1] = hole12;
                    hands[arrayIndex][2] = board1;
                    hands[arrayIndex][3] = board2;
                    hands[arrayIndex][4] = board3;
                    hands[arrayIndex][5] = board4;
                    hands[arrayIndex][6] = board5;
                }
            }
        }
        for (int j = 0; j < hands.length; ++j) 
            for (int k = 0; k < 7; ++k)
                dos.writeByte(hands[j][k]);

        dos.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T03:46:45.323

（正如我所怀疑的......）

您的代码的输出性能问题有一个非常简单的解释。这一行：

```
DataOutputStream dos = new DataOutputStream(
       new FileOutputStream(RIVER_CANONICAL_HANDS_FILE3)); 
```

正在创建一个直接写入文件而没有任何缓冲的流。每次执行 a 时`write`，它都会执行一次`write`系统调用。那是昂贵的。只需将 BufferedOutputStream 添加到输出管道即可获得更好的性能：

```
DataOutputStream dos = new DataOutputStream(
       new BufferedOutputStream(
               new FileOutputStream(RIVER_CANONICAL_HANDS_FILE3))); 
```

* * *

> 我认为以二进制形式写入数据会节省一些空间，因为文件会很大。

它不会。空间使用将与您将`byte`值写入`FileOutputStream`.

事实上，如果这是使用 的唯一原因`DataOutputStream`，您最好将其省略，并像这样编写手数据：

```
 dos.write(hands[j]); 
```

...利用该`OutputStream.write(byte[])`方法，摆脱最里面的写循环。（但完全使用 BufferedOutputStream 会产生更大的不同！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:48:00.063

如果您只想写入文件，请使用支持异步日志记录的 log4j 之类的日志记录库。您也可以将其写入文件。

# php - 如何在 Magento 中创建每天更新的随机产品列表？

> ID：13505510
> 
> 赞同：1
> 
> 时间：2012-11-22T03:31:19.353
> 
> 标签：php, magento

我正在尝试在 Magento 中构建一个页面，该页面基本上列出了具有分层导航的特定类别中的所有产品（在我的情况下是左侧的过滤器），但该列表必须每天随机生成一次。

我曾尝试使用“product_list_random”，但它似乎忽略了 CategoryIDs 设置。

进一步调查，我找到了 Random.php，问题是 Random.php 中的受保护函数 _getProductCollection 只是从完整的产品集合开始，而在 List.php 中，它有一些逻辑来获取当前类别。

现在我正在努力将代码从 List.php 调整为 Random.php，但没有成功......

到目前为止，这是我的代码：

```
 $layer = $this->getLayer();
        /* @var $layer Mage_Catalog_Model_Layer */

        $origCategory = null;
        if ($this->getCategoryId()) {
            $category = Mage::getModel('catalog/category')->load($this->getCategoryId());
            if ($category->getId()) {
                $origCategory = $layer->getCurrentCategory();
                $layer->setCurrentCategory($category);
            }
        }
        //$this->_productCollection = $layer->getProductCollection();
        $this->_productCollection = $layer->getSelect()->order('rand()');

        $this->prepareSortableFieldsByCategory($layer->getCurrentCategory());

        if ($origCategory) {
            $layer->setCurrentCategory($origCategory);
        } 
```

现在看来你不能“rand” Magento 的层模型，但我在这里有点迷失了。关于如何完成这个的任何想法？我能感觉到我非常接近，但我错过了一些东西...... :(

提前致谢！

## 更新 2

好的。我想我知道发生了什么。我以“更优化/合理”的方式重写了代码，但仍然遇到分页问题。

我对渲染过程的一部分进行了调试，似乎正在发生的事情是 Toolbar.phtml/php 在 Random.php 之前被称为。原因有两个： (1) My Layout 实际上将工具栏声明为 Random 的子项，因此应首先调用它；(2) 必须首先调用它，因为工具栏需要知道它将分页多少元素。

因此，一旦我在代码中调用 setCollection，所有分页参数都已经存在，所以分页中断...... :( 这是我的理论。

我能想到的唯一解决方法是在我的集合加载后重置所有工具栏参数，这（1）似乎不合理（必须有更好的方法！）和（2）我不知道如何将它拉出来.. . :( :(

当前代码如下......像往常一样，任何指针将不胜感激！

```
protected function _getProductCollection()
{
    //xdebug_start_trace('/Library/WebServer/talcha/var/log/random-trace.txt');

    /* get ready to build collection */
    $collection=Mage::getResourceModel('catalog/product_collection');
    $genlayer=Mage::getModel('catalog/layer');
    $genlayer->prepareProductCollection($collection);
    $collection->addAttributeToFilter('status',1); //only enabled product
    $collection->addAttributeToFilter('visibility',4); //only 'catalog,search' products
    $collection->addStoreFilter();

    /* Find out where I am */
    $newrandom=false; // flag to check if random collection was generated
    $interna=false;
    $currentUrl = $this->helper('core/url')->getCurrentUrl();
    Mage::log("URL:".$currentUrl,null,"paulo.log");
    if (strpos($currentUrl,"chas")!==false) {  // estou em CHAS
       $interna=true;       
    }

    /* if I am where I need to be, then check whether I need to update the collection */
    if ($interna) {
        $now=time();

        /* fetch collection file name and generated time */
        if (strpos($currentUrl,"?")===false) {
            $name=substr($currentUrl,strpos($currentUrl,"index.php")+10);
        } else {
            $name=substr($currentUrl,strpos($currentUrl,"index.php")+10,strpos($currentUrl,"?")-strlen($currentUrl));
        }
        if ($name=="chas2") { $name="chas"; }
        Mage::log("Nome:".$name,null,"paulo.log");  
        $dir=Mage::getBaseDir('tmp');
        $dh=opendir($dir);
        while (($file=readdir($dh))!=false) {
            Mage::log("Arq.:".$file,null,"paulo.log");
            if (strpos($file,$name)!==false) {
                $epoch=substr($file,strpos($file,"-")+1);
                $fname=$file;
                Mage::log("Hora:".$epoch,null,"paulo.log");
                break;
            }
        }

        /* tests whether elapsed time between now and last update is longer that "x" seconds */
        /* if true, generates new random collection, serialize it and flag it */
        /* if false, just picks up last generated collection from file */
        if (($now-$epoch) > 3600) {  //set 1 hour
            $collection->addCategoryFilter(Mage::getModel('catalog/category')->load($this->get_cur_category()));
            $collection->getSelect()->order('rand()');
            file_put_contents($dir."/".$name."-".$now,serialize($collection));
            unlink($dir."/".$fname);
            $newrandom=true;
            Mage::log("Fiz shuffle!",null,"paulo.log");
            Mage::log("Count:".$collection->count(),null,"paulo.log");
        } else {
            $collection=unserialize(file_get_contents($dir."/".$fname));
        }
    } // close if($interna)     

    /* build the final collection.  If we are using the generated collection, we need
        to adjust pagination according to request parameters.
        If we are filtering, then we set proper filters and load the ordinary collection
        (no random stuff when filtering through) */
    if (is_null($this->_productCollection)) {

        $layer=$this->getLayer();   

        foreach($this->getRequest()->getParams() as $key=>$value) {
            Mage::log("Random:".$key."=>".$value,null,"paulo.log");

            switch ($key) {
              case "p":
                $collection->setPageSize($this->get_prod_count())->setCurPage($value);
                break;
              case "cat":
                $collection->addCategoryFilter(Mage::getModel('catalog/category')->load($value));
                break;
              case "price":
                list($range,$step)=explode(",",$value);
                $gt_value=($range-1)*$step;
                $lt_value=$range*$step;
                $collection->addAttributetoFilter($key,array('gt'=>$gt_value));
                $collection->addAttributetoFilter($key,array('lteq'=>$lt_value));
                break;
              case "limit":
                $collection->setPageSize($value)->setCurPage(1);
                break;
              case "page_id":
              case "dir":
              case "order":
              case "mode":
                break;
              default:
                $collection->addAttributeToFilter($key,$value); //filters
            }
        }   

        /* if we are filtering, then the collection wasn't loaded yet */
        if (!$interna) {
            $collection->load();    
        }

    }

    $this->setCollection($collection);
    $this->_productCollection=$collection;

    return $this->_productCollection;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:18:40.860

```
<?php // get Random prdocut list

$_productCollection = Mage::getResourceModel('catalog/product_collection');
Mage::getModel('catalog/layer')->prepareProductCollection($_productCollection);
$_productCollection->getSelect()->order('rand()');
$_productCollection->addStoreFilter();
$numProducts = $this->getNumProducts() ? $this->getNumProducts() : 20;
$_productCollection->setPage(1, $numProducts);

if (sizeof($_productCollection) < $numProducts) {
        $numProducts = sizeof($_productCollection);
}
$displayed_products = array();
foreach ($_productCollection as $_product) {
        $displayed_products[] = $_product;
}
$random_products = array();
if (sizeof($_productCollection) > 1) {
        $random_products = array_rand($displayed_products, $numProducts);
} else {
        $random_products = array('0');
}

?> 
```

# mongodb - 如何在grails mongodb插件中按嵌入对象的属性进行过滤

> ID：13505511
> 
> 赞同：1
> 
> 时间：2012-11-22T03:31:19.290
> 
> 标签：mongodb, grails, grails-orm

Grails 2.1.1，mongodb 1.0.0.GA。

我有两个域类：

```
class Person {
  String firstName
  String lastName
  Address address
  static embedded = ['address']
}

class Address {
   String street
   String city
   String zip
} 
```

我想找到所有住在雷德蒙德的人。我希望是这样的：

```
Person.createCriteria().list() {
  eq 'address.city', 'Redmond'
} 
```

会做这项工作，但它没有。我知道这是 Mongo 本身的一等公民查询。

这在 mongodb 1.0.0.GA 中还不支持，还是我遗漏了一些明显的东西？我很困惑，主要是因为嵌入式文档是 mongo 的面包和黄油，不支持如此明显的用例会导致整个插件无法使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:00:06.670

我测试了您的示例（复制粘贴了您的代码），它运行良好，没有任何错误。

**环境**：Grails 2.0.4，mongodb 1.0.0.GA

# extjs4 - Extjs4，图表轴数字显示许多相同的数字？

> ID：13505512
> 
> 赞同：1
> 
> 时间：2012-11-22T03:31:44.627
> 
> 标签：extjs4

![在此处输入图像描述](../Images/352bc96fc8a97449c4aceacb00582f56.png)

在左边，有重复的数字，我不知道为什么？**如何让它只显示单个数字？0,1,2 并且只有。**

和条上的网格显示，**我怎样才能让它放在图表后面？**

## 代码

```
axes: [{
    type: 'Numeric',
    position: 'left',
    fields: ['inCnt'],
    label: {
        renderer: Ext.util.Format.numberRenderer('0,0')
    },
    title: 'In Transaction Qty',
    grid: true,
    minimum: 0
}, {
    type: 'Category',
    position: 'bottom',
    fields: ['month'],
    title: 'Current 12 Month'
}],

series: [{
    type: 'column',
    axis: 'left',
    highlight: true,
    tips: {
        trackMouse: true,
        width: 130,
        height: 40,
        renderer: function (storeItem, item) {
            this.setTitle(storeItem.get('inCnt') + ' transaction(s) in '+storeItem.get('month'));
        }
    },
    label: {
        display: 'insideEnd',
        'text-anchor': 'middle',
        field: 'inCnt',
        renderer: Ext.util.Format.numberRenderer('0'),
        orientation: 'vertical',
        color: '#333'
    },
    xField: 'month',
    yField: 'inCnt'
}] 
```

### JSON数据

```
[
    { "month" : "Nov", "inCnt" : 0 },
    { "month" : "Oct", "inCnt" : 2 },
    { "month" : "Sep", "inCnt" : 0 },
    { "month" : "Aug", "inCnt" : 0 },
    { "month" : "Jul", "inCnt" : 0 },
    { "month" : "Jun", "inCnt" : 3 },
    { "month" : "May", "inCnt" : 0 },
    { "month" : "Apr", "inCnt" : 0 },
    { "month" : "Mar", "inCnt" : 0 },
    { "month" : "Feb", "inCnt" : 0 },
    { "month" : "Jan", "inCnt" : 0 },
    { "month" : "Dec", "inCnt" : 0 }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:33:27.553

因为您在截断小数点的轴上使用渲染器，所以

```
1.8
1.6
1.4
1.2 
```

变成

```
1
1
1
1 
```

# algorithm - 无特定形式的极大整数的素性证明算法

> ID：13505515
> 
> 赞同：0
> 
> 时间：2012-11-22T03:32:22.507
> 
> 标签：algorithm, primes, memory-efficient, primality-test

我正在寻找一种算法，它可以证明*任何*大数的素数。大数是指其中至少有 100,000,000 个十进制数字的数字，不能用梅森素数等简单的公式表示。

以下是我的要求：

1-它必须完全正确

2-它必须可以在基本的家用计算机上运行

3- 它必须在几周或几个月内完成它的课程。

我的内存限制是 8 GB 的内存（我可以设置我的选项来决定有多少缓存可用），在具有 1 TB 硬盘驱动器的专用机器上。在几个月的时间里，我将一次次考虑排名第一。

Edit1：我很清楚这是一个很难竞争的竞技场，如果使用当前的方法几乎不可能的话。我没有使用当前的方法，我需要一种方法来证明我的方法对于非常大的数字是正确的。

Edit2：我需要一种非概率方法的部分原因是因为这将是对 EFF 奖项的尝试，并且在那里成功获得第二个 EFF 奖项。如果我的方法是正确的（这是一个按喇叭的 IF），我应该可以用我的笔记本电脑完成所有这些工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:49:58.117

据我了解，您正在寻找一种算法：

*   确定性的
*   相当快
*   具有相当合理的内存占用

我不确定最后一部分，因为我从未尝试过实现它（还），但我知道素数问题已经解决了一般数字。换言之，无论形式如何，您都可以 100% 确定地确定一个数是否为素数。您应该查看[AKS 素性测试](http://en.wikipedia.org/wiki/AKS_primality_test "AKS素数测试")，这是解决此问题的第一个已知算法。

就像你说的，运行可能需要一段时间，但最终会以一定的答案结束。优化版本的复杂度为 O((log n)^7.5（log n 与 n 的位数成正比）。

但是，由于此运行时非常大，并且您想要测试大量数字，因此您应该首先考虑使用更快的非确定性算法过滤这些数字。换句话说，我会尝试运行[Miller-Rabin 测试](http://en.wikipedia.org/wiki/Miller-Rabin "米勒-拉宾")对于一些数字（a=2,3,5,7,... - 前十个素数应该足够了，但即使你真的想要更高的精度，你可能不应该超过 50 个素数）。如果我没记错的话，在 k Miller-Rabin 测试之后被测试的数字是假素数的概率小于 1/4^k。换句话说，您可以运行少量测试（更不用说这些测试非常快），并且对数字是否为质数非常有信心（如果这些测试中的任何一个失败，则该数字绝对不是质数）。在所有 MR 测试通过后，对测试号码运行 AKS 算法以确保（正如您在 MR 维基百科页面上看到的那样，即使进行了几次测试，最小的误报也会以非常快的速度增加）。

# coffeescript - Haxe 可以编译成 Coffeescript 吗？

> ID：13505519
> 
> 赞同：0
> 
> 时间：2012-11-22T03:33:12.897
> 
> 标签：coffeescript, haxe

我想知道是否可以将 Haxe 编译为 Coffeescript - 有没有可用的工具？我发现 Coffeescript 的语法比 Javascript 的语法简洁得多，所以我想为 Haxe 找到一个 Coffeescript 目标（如果它存在的话。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:35:11.367

Haxe[已经有一个 Javascript 目标](http://haxe.org/doc/start/js)，并且已经有一个可用的 Javascript-to-Coffeescript ( [http://js2coffee.org/](http://js2coffee.org/) )，所以它应该是可能的，只要 js2coffee 在编译 Javascript 时不会出错咖啡脚本。

# c++ - gcc 的自动矢量化消息是什么意思？

> ID：13505524
> 
> 赞同：4
> 
> 时间：2012-11-22T03:34:32.930
> 
> 标签：c++, gcc, compiler-optimization, vectorization

我有一些我想快速运行的代码，所以我希望我能说服 gcc (g++) 对我的一些内部循环进行矢量化。我的编译器标志包括

```
-O3 -msse2 -ffast-math -ftree-vectorize -ftree-vectorizer-verbose=5 
```

但 gcc 未能矢量化最重要的循环，给了我以下不是非常详细的消息：

```
Not vectorized: complicated access pattern. 
```

和

```
Not vectorized: unsupported use in stmt. 
```

我的问题是（1）这些到底是什么意思？（在它太复杂之前它必须有多复杂？不支持使用究竟是什么？），以及（2）有什么办法可以让编译器给我一点点关于我在做什么的信息错误的？

给出“复杂访问模式”的循环示例是

```
for (int s=0;s<N;++s)
    a.grid[s][0][h-1] =  D[s] * (b.grid[s][0][h-2] + b.grid[s][1][h-1] - 2*b.grid[s][0][h-1]); 
```

一个给出“在 stmt 中不受支持的使用”的是

```
for (int s=0;s<N;++s)
    for (int i=1;i<w-1;++i) 
        for (int j=1;j<h-1;++j) 
            a.grid[s][i][j] = D[s] * (b.grid[s][i][j-1] + b.grid[s][i][j+1] + b.grid[s][i-1][j] + b.grid[s][i+1][j] - 4*b.grid[s][i][j]); 
```

（这是真正需要优化的。）这里，a.grid 和 b.grid 是浮点数的三维数组，D 是浮点数的一维数组，N、w 和 h 是 const int。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:01:39.063

> 未矢量化：复杂的访问模式。

“简单”访问模式是具有某些限制的连续元素访问或跨步元素访问（循环中访问的组的单个元素，组元素计数是 2 的幂，组大小是向量类型的倍数）。

```
b.grid[s][0][h-2] + b.grid[s][1][h-1] - 2*b.grid[s][0][h-1]); 
```

既不是顺序访问也不是跨步访问

> 未矢量化：在 stmt 中不支持使用。

这里的“使用”是数据流意义上的，获取变量的值（寄存器，编译器临时）。在这种情况下，“支持的用途”是在循环的当前迭代中定义的变量、常量和循环不变量。

```
a.grid[s][i][j] = D[s] * (b.grid[s][i][j-1] + b.grid[s][i][j+1] + b.grid[s][i-1][j] + b.grid[s][i+1][j] - 4*b.grid[s][i][j]); 
```

在这个例子中，我认为“不支持的使用”是因为`b.grid[s][i][j-1]`并且`b.grid[s][i][j+1]`是由循环的先前迭代分配（“定义”）的。

# java - 现有类上的 NoClassDefFoundError

> ID：13505525
> 
> 赞同：2
> 
> 时间：2012-11-22T03:34:43.427
> 
> 标签：java, noclassdeffounderror

我是一个经验丰富的程序员，我遇到了这个非常奇怪的问题，到目前为止我还无法解决。我收到此错误：

```
Exception in thread "Thread-0" java.lang.NoClassDefFoundError: rec/MiscIO
        at rec.RECTool.run(RECTool.java:264)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: rec.MiscIO
        at java.net.URLClassLoaderrun(Unknown Source)
        at java.net.URLClassLoaderrun(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 2 more 
```

这是相关的行：

```
File savedTo = MiscIO.copyJar(root); 
```

我不明白的是，这是一个小应用程序，并且正在使用的类在同一个包中。除了类名和内容外，基本相同。但是，我只在我的一些课程中特别得到了错误，而不是全部。我在错误发生之前使用这些行，它们在同一个包和所有内容中。

```
Logger.log("Found new root: " + newRoots[i0]);
...
FileLocker locker = new FileLocker();
...
locker.lock(PathManager.getJar()); 
```

所以三个类的设置与出错的一个基本相同，只有一个抛出异常。这对我来说毫无意义。

我尝试了各种参数来运行 jar，包括修改类路径和直接调用主类而不是使用 jar 命令，但无济于事，例如：

```
java -jar <jarname>
java -cp . <jarname>
java -cp <jarname> -jar <jarname>
java -cp <jarname> <main class here> 
```

但是，如果我解压缩 jar 并运行程序，则不会发生错误。我认为这可能是 MiscIO 无法加载或静态初始化程序无法加载的某种依赖关系，但我的代码中都没有。

另外，我正在使用 Netbeans 生成 jar，并且清单设置正确。这是整个代码：

```
 package rec;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.RandomAccessFile;
import java.net.URL;

/**
 * @author Colby
 */
public class MiscIO {

    public static void copyJar(RandomAccessFile out) throws IOException {
        URL jarSource = RECTool.class.getProtectionDomain().getCodeSource().getLocation();

        InputStream in = null;
        try {
            in = jarSource.openStream();
            copyToRAF(in, out);

        } finally {
            if (in != null) {
                in.close();
            }
        }
    }

    public static File copyJar(File saveJarTo) throws IOException {
        URL jarSource = RECTool.class.getProtectionDomain().getCodeSource().getLocation();
        saveJarTo = new File(saveJarTo, "classlist.jar");

        InputStream in = null;
        OutputStream out = null;
        try {
            in = jarSource.openStream();
            out = new FileOutputStream(saveJarTo);
            copyStream(in, out);

        } finally {
            if (in != null) {
                in.close();
            }
            if (out != null) {
                out.close();
            }
        }
        return saveJarTo;
    }

    public static void copyStream(InputStream in, OutputStream out) throws IOException {
        int len;
        byte[] data = new byte[1024 * 8];
        while ((len = in.read(data)) != -1) {
            out.write(data, 0, len);
        }
        out.flush();
    }

    public static void copyToRAF(InputStream in, RandomAccessFile raf) throws IOException {
        raf.seek(0L);

        int len;
        byte[] data = new byte[1024 * 8];
        while ((len = in.read(data)) != -1) {
            raf.write(data, 0, len);
        }
    }

    public static void copyFile(File from, File to) throws IOException {
        FileInputStream in = null;
        FileOutputStream out = null;
        try {
            in = new FileInputStream(from);
            out = new FileOutputStream(to);
            copyStream(in, out);

        } finally {
            if (in != null) {
                in.close();
            }
            if (out != null) {
                out.close();
            }
        }
    }
} 
```

最后一点，我认为这可能是我机器上安装的 Java 版本冲突，或者某些侥幸的 x86/x64 冲突，所以我卸载了所有 Java 发行版，只安装了一个架构中的最新版本，问题仍然存在。你们有谁以前见过这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T03:40:53.850

根据您所说的，最可能的解释是您错误地创建了 JAR 文件。

运行`jar -tvf <jarname>`。它应该将 MiscIO 类显示为“rec/MiscIO.class”。如果没有，那么类加载器将无法找到它。

（还有其他不太可能的解释；例如，涉及自定义类加载器和/或 JVM 试图加载之前类加载失败的类。）

* * *

作为记录，冲突的 Java 版本不会导致这些确切症状出现问题。（或者至少，>>I<< 看不出它怎么会……）

* * *

您的代码表明它是更复杂和晦涩的东西......并且可能依赖于平台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T03:50:55.583

另一个不太可能的解释可能是**Thread Context ClassLoader**：

我看到Exception发生在一个新的Thread中，所以可能是Context Class Loader和调用Thread不一样。这取决于创建新线程的代码，以及它是否位于找不到类的相同类路径中，如以下 Stack Overflow 答案中所述：

> 每个类都将使用它自己的类加载器来加载其他类。因此，如果 ClassA.class 引用 ClassB.class 那么 ClassB 需要位于 ClassA 的类加载器的类路径上，或者它的父级。
> 
> 线程上下文类加载器是当前线程的当前类加载器。可以从 ClassLoaderC 中的类创建对象，然后将其传递给 ClassLoaderD 拥有的线程。在这种情况下，如果对象想要加载它自己的类加载器上不可用的资源，则需要直接使用 Thread.currentThread().getContextClassLoader() 。

（摘自： [线程的上下文类加载器和普通类加载器的区别](https://stackoverflow.com/questions/1771679/difference-between-threads-context-class-loader-and-normal-classloader)）

你可以做一个排除这个的测试是在你的应用程序的主线程中断言它`Class.forName("rec.MiscIO")`不为空。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T04:01:08.813

兄弟，你的文件柜是做什么用的？

```
1    FileLocker locker = new FileLocker();
2    locker.lock(PathManager.getJar());
3    File savedTo = MiscIO.copyJar(root); 
```

如果 line[2] 独占锁定包含 的 jar `MiscIO.class`，则 line[3] 无法加载 MiscIO 类。

# javascript - 试图将变量转换为 URL 中的值

> ID：13505526
> 
> 赞同：-2
> 
> 时间：2012-11-22T03:34:43.763
> 
> 标签：javascript, jquery

我正在尝试将变量的值插入 url，但它不起作用；我只是得到变量而不是值

'myid' 和 'verif' 是变量，它们的值是整数。

此代码将 url 插入表单中的隐藏字段

```
$('#return').val(http://pegdown.com/index.php?option=com_joom_creditspack&controller=paypal&view=paypal&layout=return&task=checkout&myid=myid&packid=1&verif=verif&jcode=xxx111xxx); 
```

如何编写以下 url，以便将变量“myid”和“verif”转换为它们的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T03:37:25.623

好吧，您缺少引号，因此您的代码根本不起作用。

```
$('#return').val("http://pegdown.com/index.php?option=com_joom_creditspack&controller=paypal&view=paypal&layout=return&task=checkout&myid=" + myid + "&packid=1&verif=" + verif + "&jcode=xxx111xxx"); 
```

您可能应该使用[encodeURIComponent()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T03:37:51.007

您需要引用`" "`字符串并连接变量`+`

尝试

```
$('#return').val("http://pegdown.com/index.php?option=com_joom_creditspack&controller=paypal&view=paypal&layout=return&task=checkout&myid="+myid+"&packid=1&verif="+verif+"&jcode=xxx111xxx"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T03:40:37.510

JavaScript 不支持字符串插值。尝试这样的事情。

```
myIdVal = encodeURIComponent(myId);
verifVal = encodeURIComponent(verif);

var url = "http://pegdown.com/index.php?option=com_joom_creditspack&controller=paypal&view=paypal&layout=return&task=checkout&myid=" + myidVal + "&packid=1&verif=" + verifVal + "&jcode=xxx111xxx";

$('#return').val(url); 
```

# perl - Perl 发送在 Jenkins 上不起作用？

> ID：13505531
> 
> 赞同：1
> 
> 时间：2012-11-22T03:35:08.740
> 
> 标签：perl, terminal, jenkins

我已将 Jenkins 设置为定期运行 iphone UI 自动化测试。

运行自动化的第一个测试脚本时，出于安全原因，OS X 会提示输入用户名和密码。

所以我制作了一个 perl 脚本，它从 Expect 生成命令并发送用户名和密码。

由于某种原因，发送了用户名，但没有发送密码。

密码最终会被发送，但在我的命令超时之后。

下面的代码：

```
my $cmdString = "instruments -t $traceTemplatePath $AppFolder -e UIASCRIPT $escapedTest " .
    "-e UIARESULTSPATH Logs";
if ($isFirst == 1) {

    $isFirst = 0;

    $password = `cat /Users/\$USER/.password`;

    # Actually spawn the command from Expect.
    my $exp = Expect->spawn($cmdString) 
        or die "Failed to spawn command in Expect: $! \n";
    #change delay if necessary
    $exp->expect(30, [qr/Name .*/]);
    $exp->send("\n");

    $exp->expect(undef, [qr/Password/]);
    $exp->send("$password\n");
} 
```

我想要做的是在我的命令超时之前发送密码，以便它运行测试脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:44:54.457

尝试组合查询并将 exp_continue 用作：

```
$exp->expect($timeout,
             [ qr/username: /i, sub { my $self = shift;
                                      $self->send("$username\n");
                                      exp_continue; }],
             [ qr/password: /i, sub { my $self = shift;
                                      $self->send("$password\n");
                                      exp_continue; }],
             $shell_prompt); 
```

# jqgrid - 如何将 jScrollPane 与 jqgrid 一起使用？

> ID：13505536
> 
> 赞同：0
> 
> 时间：2012-11-22T03:36:09.600
> 
> 标签：jqgrid, jscrollpane, jquery-jscrollpane

如何将 JScrollPane 与 jqgrid 一起使用？我尝试使用它，但标题没有移动。这是我的代码。

```
 gridComplete:function(){
$('#gview_mygrid >div.ui-jqgrid-bdiv').jScrollPane({ showArrows: true, scrollbarWidth: 17, arrowSize: 17, scrollbarMargin: 0 });} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:42:32.943

最后我想通了..这是工作代码。在标记中

```
 <div id="container" >  
        <table id="list"><tr><td/></tr></table>
        <div id="pager"></div>
  </div> 
```

在 Java 脚本中，我们还必须绑定标题（类 .ui-jqgrid-hbox）才能滚动

```
gridComplete:function(){
             var table_header = $('#container').find('.ui-jqgrid-hbox').css("position","relative");
             $('#container').find('.ui-jqgrid-bdiv').bind('jsp-scroll-x', function(event, scrollPositionX, isAtLeft, isAtRight) {
                            table_header.css('right', scrollPositionX);
                           }).jScrollPane({
                             showArrows: true, 
                            autoReinitialise: true,
                            horizontalDragMaxWidth: 30,
                            verticalDragMaxHeight: 30           
                        });
                     } 
```

# django - 错误：无法在 Django 中分配该 IP 地址？

> ID：13505540
> 
> 赞同：7
> 
> 时间：2012-11-22T03:36:33.997
> 
> 标签：django

我正在运行 Debian 6 stable，我正在尝试使用`./manage.py runserver`命令在本地运行 Django。这就是我得到的：

```
Validating models...

0 errors found
Django version 1.4.1, using settings 'genelaytics.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
Error: That IP address can't be assigned-to. 
```

我尝试创建一个新的 django 项目，仍然得到同样的错误。有什么问题？由于这个问题，我昨天刚刚重新安装了 Debian。这个问题并没有消失。我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T15:10:03.903

这与 Django 无关，但与您的网络配置有关。最基本`loopback interface`的工作不正常。如果您想[了解有关网络和这一层](http://www.tldp.org/LDP/nag/node66.html)的更多信息。

您的问题是您的主机无法 ping 到自身，因此 Django 在获取网络地址时会出错。`django/core/management/commands/runserver.py`收到系统错误 99 ( `EADDRNOTAVAIL`)时返回。

您的网络配置`/etc/network/interfaces`应该在开头有这一段：

```
# The loopback network interface

auto lo
iface lo inet loopback 
```

查看[Debian 文档](http://wiki.debian.org/NetworkConfiguration)以获取完整的网络配置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T03:57:12.890

您在网络配置文件中缺少两行代码。使用任何文本编辑器以 root 用户身份编辑文件：

```
sudo gedit /etc/network/interfaces 
```

添加这两行：

```
 auto lo

    iface lo inet loopback 
```

使用以下命令重新启动网络：

```
sudo /etc/init.d/networking restart 
```

现在，本地服务器将正常工作。

# c - SPARC 使用 scanf() 读取字符

> ID：13505543
> 
> 赞同：1
> 
> 时间：2012-11-22T03:36:49.350
> 
> 标签：c, input, sparc

好的，这是我的问题。我正在尝试使用 scanf() 从用户输入中获取一个字符，然后在 SPARC Assembly 中将其打印回给他们。这段代码比我实际尝试做的要简单，但这是我挂断的事情。它适用于字符串，但由于某种原因不适用于字符。

SPARC 代码：

```
 .section ".data"

prompt:   .asciz   "\nPlease enter your name: "

format:   .asciz   "%c" 

format2:  .asciz   "Your name is:%c\n"  

/* Program starts */ 

.align 4 

.section ".text" 

.global fun

 fun: 

save %sp, -96, %sp      ! save the stack

set prompt, %o0         ! point o0 to the prompt 

call printf             ! call printf to print the prompt 

nop 

set format, %o0         ! point o0 to the input format string

set ch, %o1             ! point o1 at the input variable 

call scanf          ! get the input into this variable 

nop 

set format2, %o0        ! point o0 to the output format

set ch, %o1             ! point o1 to the string to be displayed

call printf             ! print the string pointed by o1

nop

ret                 ! return 

restore             ! get out 
```

C代码：

```
#include <stdio.h>

 char ch;

int main()

{

fun();

 } 
```

# r - 如何矢量化索引？

> ID：13505547
> 
> 赞同：0
> 
> 时间：2012-11-22T03:37:46.263
> 
> 标签：r

我平均存储在数据框中的坐标如下：

```
sapply(coords[N:M,],mean) # mean of coordinates N to M 
```

我需要几组坐标的平均值，所以我做了这个循环，它找到坐标 1-4、5-11 和 20-30 的平均值。

```
N <- c(1, 5,20)
M <- c(4,11,30)
for ( i in 1:length(N) ) {
    sapply(coords[N(i):M(i),],mean)
} 
```

如何矢量化该循环？我试图将矩阵传递给坐标（`coords[NM,]`），但这并没有给我想要的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T03:48:47.077

为了简单和高效，您可以替换您`sapply(x, mean)`的。`colMeans(x)`

也许通过向量的想法，您更喜欢将多个变量（N 和 M）转换为单个向量 - 此处为数组 - 在可能且简单的情况下。

```
N <- data.frame(from=c(1,5,20), to=c(4,11,30))
apply(N, 1, function(x) colMeans(coords[x[1]:x[2],])) 
```

# asp.net-mvc - 如何合并 DbContexts？

> ID：13505550
> 
> 赞同：2
> 
> 时间：2012-11-22T03:38:31.373
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4, asp.net-mvc-4, dbcontext

我正在使用 MVC 4。

我想使用新的 SimpleMembershipProvider 和它附带的东西，但是我无法让它工作。

我按照教程创建了一个示例站点，登录/注册按预期工作。我也可以使用新的 EF 创建自定义实体。

问题是我有多个 DbContext，一个用于用户（UsersContext），一个用于我的自定义实体（MyCustomDbContext）。

我想将用户添加为所有者、成员等字段，因此我需要在上下文中共享 UserProfile 数据。我该怎么做？

我可以强制 SimpleMembershipInitializer 使用我的自定义 DbContext 吗？

**编辑**：我正在使用 Code First 方法。

# c - 使用 GtkClipboard 获取 URL

> ID：13505552
> 
> 赞同：0
> 
> 时间：2012-11-22T03:39:04.813
> 
> 标签：c, gtk, clipboard, gtk3

我正在尝试检查 url 是否在系统剪贴板上，如果是，则从剪贴板上获取它。在阅读我遇到的 GTK API 文档时，`gtk_clipboard_wait_for_uris`它似乎总是返回`NULL`：

```
g_print("%s", gtk_clipboard_wait_for_uris(gtk_clipboard_get(GDK_SELECTION_PRIMARY))); 
```

从剪贴板获取网址的正确/最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:58:02.613

`wait_for_uris`仅当剪贴板包含标记为 URI 列表 (text/uri-list) 的数据时才有效，例如当您在文件管理器中执行复制操作时。如果您复制一段恰好包含 URI 的文本，例如“http://stackoverflow.com/”，它将无法按预期工作。当您复制该字符串时，它很可能被标记为纯文本（文本/纯文本）。

解决方案是使用`wait_for_text`并检查它是否是 URI。

# iphone - 后台任务标识符上传生成错误

> ID：13505556
> 
> 赞同：1
> 
> 时间：2012-11-22T03:40:02.237
> 
> 标签：iphone, objective-c, ios6, asyncfileupload

参考[https://stackoverflow.com/a/10319761/1680408](https://stackoverflow.com/a/10319761/1680408)。在我的应用程序中，用户可以将音频视频和图像上传到服务器。如果应用程序进入后台，我需要保留该任务直到它完成。我实施了帖子建议的解决方案并且它有效！但是，它会产生有趣的警告。

使用下面的一个，我得到：“从'UIBackgroundTaskIdentifier'（又名'unsigned int'）分配给'UIBackgroundTaskIdentifier *'（又名'unsigned int *'）的不兼容整数到指针转换

```
- (void)beingBackgroundUpdateTask
{
self.backgroundUpload = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
    [self endBackgroundUpdateTask];
}];

//
} 
```

有了下一个，我得到了一个修复建议：“指向整数转换的不兼容指针将'UIBackgroundTaskIdentifier *'（又名'unsigned int *'）发送到参数类型'UIBackgroundTaskIdentifier'（又名'unsigned int'）；尊重*

```
- (void)endBackgroundUpdateTask
{
self.backgroundUpload = UIBackgroundTaskInvalid;
[[UIApplication sharedApplication] endBackgroundTask:self.backgroundUpload];
} 
```

当我使用修复它建议代码不起作用时。老实说，我并不太大惊小怪，因为它有效。但是我担心苹果会因此拒绝我的应用程序。所以有点只是想安全而不是抱歉。除非有人知道这类问题不会被拒绝。太奇怪了！任何其他时候我收到这种类型的警告我的应用程序崩溃！我对此进行了一些搜索，但建议并没有真正帮助。任何人都知道是否有快速修复或只是一般修复？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T04:43:17.133

你是如何声明变量的`backgroundUpload`？

```
UIBackgroundTaskIdentifier *backgroundUpload; 
```

这将给出这个警告。从上面的行中删除 *。

```
UIBackgroundTaskIdentifier backgroundUpload; 
```

# android - 开始活动并返回不同的活动

> ID：13505557
> 
> 赞同：2
> 
> 时间：2012-11-22T03:40:12.193
> 
> 标签：android

我怎样才能让一个活动返回到另一个活动而不是一个名为 startactivity 的活动？

我有一个游戏，用户可以从现有游戏列表中选择玩游戏或选择开始新游戏。在开始新游戏时，如果游戏列表变为活动状态，而不是返回活动以创建新游戏，我希望用户完成他的回合。

在各种活动中，

## 它目前的作用：

```
 selectGames  
        playGame --- return to selectGames
           or
        createNewGame --- playGame --- return to createNewGame --- return to selectGames 
```

## 我希望它：

```
 selectGames  
        playGame --- return to selectGames
           or
        createNewGame --- playGame --- return to selectGames 
```

有没有办法插入一个意图，或者当从 createNewGame 开始一个活动时，用户可以完成或暂停游戏并返回到 selectGames？如果意图在堆栈上，我想从意图堆栈中删除 createNewGame （这有意义吗？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T04:10:22.683

注意：每次调用 Activity 时，都会将父 Activity 放在暂停的 Activity 堆栈中：

SelectGame -> CreateNewGame -> PlayGame

但是您可以在需要时杀死一个 Activity，它将从堆栈中删除。

当您调用`playGame`from`createNewGame`时，您可以使用以下代码：

```
startActivity(playGame); //Put playGame in the top of stack
finish();                //Remove createNewGame (current Activity) from the stack 
```

新订单是：

选择游戏 -> 玩游戏

然后你`createNewGame`将从你的堆栈中消除并返回`playGame`给`createNewGame`调用者。`selectGames`在这种情况下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T03:47:04.047

我相信在清单中添加`android:noHistory`Activity`createNewGame`将完成您想要的

从文档：

**机器人：无历史**

*   当用户离开它并且它不再在屏幕上可见时，是否应该从 Activity 堆栈中删除并完成（调用它的 finish() 方法）——如果应该完成，则为“true”，如果应该完成，则为“false”如果不。默认值为“假”。“真”值意味着活动不会留下历史痕迹。它不会保留在任务的活动堆栈中，因此用户将无法返回它。此属性是在 API 级别 3 中引入的。

# .net - 缩放时如何避免平移嵌套在 Panel 内的 PictureBox 控件的边缘？

> ID：13505561
> 
> 赞同：3
> 
> 时间：2012-11-22T03:40:47.343
> 
> 标签：.net, vb.net, winforms, vb.net-2010, picturebox

我想知道如何更改我的代码，以防止在 PictureBox 放大和处于正常状态时平移超出 PictureBox 的边缘。如果可能的话，我还想知道如何让它在鼠标悬停的当前位置缩放并在缩放时保持图像质量。任何帮助将不胜感激。

这是缩放的代码：

```
Private Sub PictureBox_MouseWheel(sender As System.Object,
                             e As MouseEventArgs) Handles PictureBox1.MouseWheel
    If e.Delta <> 0 Then
        If e.Delta <= 0 Then
            If PictureBox1.Width < 500 Then Exit Sub 
        Else
            If PictureBox1.Width > 2000 Then Exit Sub 
        End If

        PictureBox1.Width += CInt(PictureBox1.Width * e.Delta / 1000)
        PictureBox1.Height += CInt(PictureBox1.Height * e.Delta / 1000)
    End If

End Sub 
```

这是我正在使用的平移代码：

```
Private Offset As Point
    Private Sub Picturebox1_MouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles PictureBox1.MouseDown
        Offset = e.Location
    End Sub
    Private Sub Picturebox1_MouseMove(ByVal sender As System.Object, ByVal e As MouseEventArgs) Handles PictureBox1.MouseMove
    PictureBox1.Select()
    If e.Button = Windows.Forms.MouseButtons.Left Then
        PictureBox1.Left += e.X - Offset.X
        PictureBox1.Top += e.Y - Offset.Y
    End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:34:40.097

您的代码正在拖放而不是平移，并调整大小而不是缩放。如果要平移和缩放，请在 Stackoverflow 上查看以下问题：

*   [如何在 vb.net 中使用滚轮放大图片框](https://stackoverflow.com/questions/13496706/how-to-zoom-in-a-picturebox-with-scrollwheel-in-vb-net)
*   [如何在 PictureBox 内平移图像](https://stackoverflow.com/questions/12054918/how-to-pan-image-inside-picturebox)

还要检查这个：

[在 C# 第 4 部分中创建可滚动和可缩放的图像查看器](http://cyotek.com/blog/creating-a-scrollable-and-zoomable-image-viewer-in-csharp-part-4)

和这个：

[具有缩放和滚动功能的 PictureBox](http://www.codeproject.com/Articles/10096/PictureBox-with-zooming-and-scrolling) - 一个工作项目，但是，它不能使用 MouseMove 平移，因此您需要使用滚动条。缩放有效。语言是 C#。用 VS 2003 编写 - 需要转换。

# c++ - 通过迭代器获取集合元素的“索引”

> ID：13505562
> 
> 赞同：23
> 
> 时间：2012-11-22T03:40:50.373
> 
> 标签：c++, stl, iterator

这个问题适用于`std::set`和`std::unsorted_set`。

我有一个指向集合中元素的迭代器。我想使用迭代器根据元素在集合中的位置获取元素的“索引”。

例如，我的集合的索引如下：

```
int index = 0;

for(MySetType::iterator begin = mySet.begin(); begin != mySet.end(); begin++)
{
    cout << "The index for this element is " << index;
    index++;
} 
```

我曾尝试使用迭代器进行算术运算，但它不起作用：

```
int index = mySetIterator - mySet.begin(); 
```

有没有办法使用迭代器根据它在集合中的位置来获取这样的索引值？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-22T03:43:10.733

使用[STL distance](https://en.cppreference.com/w/cpp/iterator/distance)，即`std::distance(set.begin(), mySetIterator)`

请注意：

> 返回第一个和最后一个之间的元素数。如果 last 不能通过（可能重复）首先递增从 first 到达，则行为**未定义。**

备注：复杂度是线性的；

> 但是，如果 InputIt 额外满足 LegacyRandomAccessIterator 的要求，复杂性是不变的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T03:43:49.923

`std::set`并且`set::unordered_set`是*关联*容器，而不是*序列*容器，因此索引的概念本身没有多大意义。

如果您需要检索关联容器的索引，则应该更改设计（即使没有最少或最近插入元素的概念，此类容器中的索引也会发生变化）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-22T03:46:47.663

[`std::set`只有一个`bidirectional iterator`](http://en.cppreference.com/w/cpp/iterator)，这意味着你不能做你想做的事情`operator +`（或`-`）。这些仅适用于`random access iterators`，如`std::vector`提供。

您需要使用`std::distance`来获取“索引”，并`std::advance`从集合的开头移动到结尾。

```
auto distance = std::distance(mySet.begin(), someIterator);
auto it = mySet.begin();
std::advance(it, distance);

assert(it == someIterator); 
```

# jquery - Cookie + Zurb 显示

> ID：13505564
> 
> 赞同：2
> 
> 时间：2012-11-22T03:41:24.007
> 
> 标签：jquery, cookies, zurb-foundation

对这些东西还是很陌生，所以我希望我对这个问题的描述是准确的。

我刚刚插入 Zurb Reveal，并在页面加载时使用

```
$(document).ready(function (){
    $('#myModal').reveal();
}); 
```

现在如何让 cookie 发挥作用，以便每个用户每天只显示一次？我不希望每次用户导航到主页时都会出现此弹出窗口。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T21:11:45.780

我无法设置开发环境

由于您已经在使用 jQuery，您可以获取 jQuery Cookie 插件 (https://github.com/carhartl/jquery-cookie)。然后你可以使用类似这样的代码：

```
$(document).ready(function(){
    // if the cookie doesn't exist create it and show the modal
    if ( ! $.cookie('hereToday') ) {

        // create the cookie. Set it to expire in 1 day
        $.cookie('hereToday', true, { expires: 1 });

        //call the reveal modal
        $('#myModal').reveal();
    }
}); 
```

# android - SQLite android编程问题

> ID：13505568
> 
> 赞同：0
> 
> 时间：2012-11-22T03:42:05.397
> 
> 标签：android, sql, sqlite

我的程序是在模拟器上工作的笔记。eclipse的代码没有错误。它说“该过程已意外停止”。我试图自己运行xml代码，它没有问题。我也有一个相同活动的 db 文件，但是我更怀疑这个文件是问题的原因。我找不到任何东西来帮助找到答案。我对编程知之甚少，但我一直在研究这个应用程序。对此的解决方案将帮助许多可能遇到此问题或对此活动感兴趣的人。

我有兴趣将按钮中的固定文本插入数据库。

```
import android.app.Activity;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class Watchnotes extends Activity implements OnClickListener,
        android.view.View.OnClickListener {

    Button button1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_);

        button1.setOnClickListener(this);

    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity, menu);
        return true;
    }

    // public interface
    public void onClick(View arg0) {
        boolean didItWork = true;
        try{

            switch (arg0.getId()) {
            case R.id.button1:

            String note = "XXXX";

            NAME entry = new NAMEdb(NAME.this);
            entry.open();
            entry.createEntry(note);
            entry.close();}
            }catch (Exception e){
                didItWork = false;
            }finally{
                if (didItWork){
            Dialog d = new Dialog(this);
            d.setTitle("XXXX");
            d.show();}

            }

    }

    public void onClick(DialogInterface arg0, int arg1) {
        // TODO Auto-generated method stub

            switch (((View) arg0).getId()){
            case R.id.button5:
                Intent i = new Intent("com.intent.LIST");
                startActivity(i);}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-08T08:41:35.110

我们有同样的问题。只需初始化

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main3);
    addListenerOnButton1();
    addListenerOnButton2();

}
public void addListenerOnButton1() {

    final Context context = this;

    button = (Button) findViewById(R.id.btn1);

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent intent = new Intent(context, App2Activity.class);
                        startActivity(intent);   
        }

    }); 
```

# python - python zipfile基本名称

> ID：13505569
> 
> 赞同：3
> 
> 时间：2012-11-22T03:42:11.340
> 
> 标签：python

我有一些作业要完成。我不想要答案。我只是在启动时遇到了麻烦。我尝试过的工作根本不起作用......有人可以向正确的方向提供推动力。我正在努力学习，但在尝试和尝试之后，我需要一些帮助。

我知道我可以让您`os.path.basename()`获取基本名称，然后将其添加到文件名中，但我无法将它们放在一起。

这里是任务

在这个项目中，编写一个函数，该函数采用目录路径并仅创建目录的存档。例如，如果使用与示例中相同的路径`("c:\\xxxx\\Archives\\archive_me")`，则 zipfile 将包含`archive_me\\groucho`,`archive_me\\harpo`和`archive_me\\chico`.

基本目录（`archive_me`在上面的示例中）是输入的最后一个元素，并且 zipfile 中记录的所有路径都应以基本目录开头。

如果目录包含子目录，则不应包含子目录名称和子目录中的任何文件。（提示：您可以使用`isfile()`来确定文件名是否代表常规文件而不是目录。）

再次感谢任何方向都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T03:48:53.920

了解您自己尝试了什么会有所帮助，所以我只提供一些标准库中方法的指针：

*   [`os.listdir`](http://docs.python.org/2/library/os.html#os.listdir)获取给定目录下的文件和文件夹列表（注意，它只返回文件/文件夹名称，而不是完整路径！）

*   [`os.path.isfile`](http://docs.python.org/2/library/os.path.html#os.path.isfile)如作业中所述，检查给定路径是否代表文件或文件夹

*   [`os.path.isdir`](http://docs.python.org/2/library/os.path.html#os.path.isdir)，相反`os.path.isfile`（感谢[inspectorG4adget](https://stackoverflow.com/questions/13505569/python-zipfile-basename#comment18485374_13505610)）

*   [`os.path.join`](http://docs.python.org/2/library/os.path.html#os.path.join)将文件名与 basedir 连接，而不必担心斜线和分隔符

*   [`ZipFile`](http://docs.python.org/2/library/zipfile)用于处理 zip 文件

*   [`zipFile.write`](http://docs.python.org/2/library/zipfile#zipfile.ZipFile.write)将找到的文件写入 zip

我不确定你是否需要所有这些，但知道它们存在并没有什么坏处。

# javascript - 文档请求 - Javascript

> ID：13505570
> 
> 赞同：4
> 
> 时间：2012-11-22T03:42:15.050
> 
> 标签：javascript, variables, declaration

团队，

在哪里可以找到有关以下 JavaScript 代码等式左侧的文档：

```
var [a, b, c] = "10-11-12".split('-');

Result:
a = 10
b = 11
c = 12
// Note: this is used in Google Apps Script 
```

![Apps 脚本 UI 示例](../Images/89afe57da2732ac41ba822d5e503c3d7.png)

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T03:43:57.523

这称为[解构赋值](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7?redirectlocale=en-US&redirectslug=New_in_JavaScript_1.7#Destructuring_assignment_%28Merge_into_own_page.2fsection%29)

**注意**它仅在您的运行时 >= [JavaScript 1.7时可用](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7?redirectlocale=en-US&redirectslug=New_in_JavaScript_1.7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T03:44:06.803

Mozilla 开发者网络有一些关于拆分方法的精彩文档：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)

# c# - 以人类可读的方式表示节点链

> ID：13505572
> 
> 赞同：2
> 
> 时间：2012-11-22T03:42:20.560
> 
> 标签：c#, tree, structure, recursive-datastructures

我试图代表一个必须逐步绘制的地铁地图类型的东西（比如它的增长）。

我的代码一切正常，但不可读。基本上它是一个带有递归节点和子节点的树结构，我的测试代码如下所示：

```
 Children.Add(new TrackLine(800));
        Children[0].Children.Add(new TrackSpot());
        Children[0].Children[0].Children.Add(new TrackSplitter());

        Children[0].Children[0].Children[0].Children.Add(new TrackRotate(-45));
        Children[0].Children[0].Children[0].Children[0].Children.Add(new TrackColorChange(Color.Red));
        Children[0].Children[0].Children[0].Children[0].Children[0].Children.Add(new TrackLine(100));
        Children[0].Children[0].Children[0].Children[0].Children[0].Children[0].Children.Add(new TrackRotate(45));
        Children[0].Children[0].Children[0].Children[0].Children[0].Children[0].Children[0].Children.Add(new TrackLine(200)); 
```

有没有人对如何解决这个烂摊子有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:46:22.547

您正在寻找一种将其添加到没有自己的孩子的最深孩子的方法吗？

```
class Node
{
  List<Node> children ;

  public void addNode( Node newNode )
  {
    if( children.Count > 0 )
      children[0].addNode( newNode ) ; // recursive call
      // to ask first child to add newNode to it
    else
      children.Add( newNode ) ;        // just add it to the children list of THIS node
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:41:21.880

为了使该代码更具可读性，我将使用具有适当名称的变量（因为我不知道您的主题域，所以我的可能不合适）：

```
Children.Add(new TrackLine(800));
var lineA = Children[0];

lineA.Children.Add(new TrackSpot());
var spotA = lineA.Children[0];

spotA.Children.Add(new TrackSplitter());
var splitterA = spotA.Children[0];

splitterA.Children.Add(new TrackRotate(-45));
var rotateNeg45 = splitterA.Children[0];

rotateNeg45.Children.Add(new TrackColorChange(Color.Red));
var colorRed = rotateNeg45.Children[0];

colorRed.Add(new TrackLine(100));
var lineB = colorRed.Children[0];

lineB.Children.Add(new TrackRotate(45));
var rotatePos45 = lineB.Children[0];

rotatePos45.Children.Add(new TrackLine(200));
var lineC = rotatePos45.Children[0]; 
```

另一种方法是使用字符串作为索引，`Children`如下所示：

```
 Children.Add(new TrackLine(800));
    Children["lineA"].Children.Add(new TrackSpot());
    Children["lineA"].Children["spotA"].Children.Add(new TrackSplitter()); 
```

但是我可能不会这样做，因为管理字符串常量本身就是一团糟，而且可能需要更改`Children`实现。

# php - JSON在文件路径中转义斜杠，不会显示图像

> ID：13505576
> 
> 赞同：0
> 
> 时间：2012-11-22T03:42:51.580
> 
> 标签：php, javascript, jquery, json, escaping

我正在使用 PHP 和一个`for`循环将数据准备好并`html`输出用于在页面上显示的数据。斜线转义导致浏览器错误地查看 html。`JSON``appended``JSON`

这是我的 PHP for 循环：

```
$json = '<div id="rsec3" class="rsec">';
for($i=0; $i<count($array); $i++)
{
    $coverart = $array[$i]['cover'];
    if(empty($coverart))
    {
        $coverart = "nocoverart.gif";
    }
    $json .= '<div><img="/video/cover/thumbs/' . $cover . '"></div>';
}
$json .= '</div>';

$json = json_encode(array('ok' => 'ok', 'html' => $json));
echo $json; 
```

这是我的 javascript 解析和附加 json：

```
$.get('/index_get.php?iid='+this.id,function(data){
    $('#indload').hide();
    js=jQuery.parseJSON(data);
    $('#indr').append(js.html);
}); 
```

这就是浏览器显示的内容，一堆无用的行话，`</img=">`它自己附加了一个？

```
<img=" video cover thumbs img.png"></img="> 
```

如何防止这种情况发生并正确显示图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:57:29.957

我认为问题可能是`<img>`php 代码上的无效 HTML 标签。在`<img>`标记中，`src`缺少并且`<img>`标记未关闭。

更改以下内容

```
$json .= '<div><img="/video/cover/thumbs/' . $cover . '"></div>'; 
```

到

```
$json .= '<div><img src="/video/cover/thumbs/' . $cover . '" /></div>'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T03:57:01.107

您需要关闭字符串中的图像标签

```
$json .= '<div><img="/video/cover/thumbs/' . $cover . '"/></div>'; 
```

# linux - 这个脚本可以在 Linux 中运行吗？

> ID：13505586
> 
> 赞同：0
> 
> 时间：2012-11-22T03:44:09.533
> 
> 标签：linux, shell, kernel

```
kernel=`uname -s`        # Current Kernel name
user=`whoami`            # Current Unix username
time=`date +%H:%M`       # Output current time
current_dir=$(pwd)       # Shell's current location
script_dir=$(dirname $0) # This script's current location

# This if statement is to know the correct location of the script, if the
# shell's location is the same as the script's location
if [ $script_dir = '.' ]; then
    script_dir="$current_dir"
fi

if [ $kernel == 'Linux' ]; then
    # Making symlinks to Vim files, add yours as you need
    echo 'Making symlinks to Vim files'
    ln -s -v $script_dir/vim /home/$user/.vim
    ln -s -v $script_dir/vim/vimrc /home/$user/.vimrc
    ln -s -v $script_dir/vim/gvimrc /home/$user/.gvimrc
    echo "Done at [$time]...\n"

    # Making symlinks to Zsh files, add yours as you need
    echo 'Making symlinks to Zsh files'
    ln -s -v $script_dir/zsh /home/$user/.zsh
    ln -s -v $script_dir/zsh/zshrc /home/$user/.zshrc
    echo "Done at [$time]...\n"

    # Making symlinks to Git files, add yours as you need
    echo 'Making symlinks to Git files'
    ln -s -v $script_dir/git/gitconfig /home/$user/.gitconfig
    ln -s -v $script_dir/git/gitmessage.txt /home/$user/.gitmessage.txt
    echo "Done at [$time]...\n"
fi 
```

这在 Linux 中可以正常工作吗？我正在尝试创建一个`make_symlinks.sh`文件，所以我必须检查 Darwin（它已经可以工作），但是由于我没有要测试的 Linux 机器，我不知道这个脚本是否可以在 Linux 中工作。

那么，这行得通吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:02:18.027

您的脚本的修改版本给出：

```
kernel=Linux
user=david
time=23:04
current_dir=/home/david/SO/Test
script_dir=/home/david/SO/Test 
```

**修改后的脚本：**

```
kernel=`uname -s`        # Current Kernel name
user=`whoami`            # Current Unix username
time=`date +%H:%M`       # Output current time
current_dir=$(pwd)       # Shell's current location
script_dir=$(dirname $0) # This script's current location

# This if statement is to know the correct location of the script, if     the
# shell's location is the same as the script's location
if [ $script_dir = '.' ]; then
    script_dir="$current_dir"
fi

if [ $kernel == 'Linux' ]; then
  echo "kernel=$kernel" 
  echo "user=$user" 
  echo "time=$time"
  echo "current_dir=$current_dir" 
  echo "script_dir=$script_dir" 
fi 
```

你的`ln`命令会起作用：

```
NAME
       ln - make links between files

SYNOPSIS
       ln [OPTION]... [-T] TARGET LINK_NAME   (1st form)
       ln [OPTION]... TARGET                  (2nd form)
       ln [OPTION]... TARGET... DIRECTORY     (3rd form)
       ln [OPTION]... -t DIRECTORY TARGET...  (4th form)
#[...]
       -s, --symbolic
              make symbolic links instead of hard links

       -v, --verbose
              print name of each linked file 
```

# hadoop - HADOOP PIG - 使用 PIG 获取记录子集的最大值和最小值

> ID：13505589
> 
> 赞同：0
> 
> 时间：2012-11-22T03:45:04.077
> 
> 标签：hadoop, max, apache-pig, min

我正在导入一个 CSV 文件，其中包含类似于下面的一些数据

```
----------
ID | VALUE
----------
1  |   1
2  |   1
3  |   1
1  |   2
2  |   2
3  |   2
1  |   3
2  |   3
3  |   3 
```

我想要做的是获取每个 id 的最大值和最小值。输出将类似于

```
--------------
ID | MAX | MIN
--------------
1  |  3  |  1
2  |  3  |  1
3  |  3  |  1 
```

我可以使用类似于下面的代码获取值列的最大值和最小值

```
MAX_MIN_VALUE = LOAD 'SampleData.csv'  AS (id:chararray, value:int);
MAX_MIN_VALUE_GROUP = GROUP MAX_MIN_VALUE ALL;
WITH_MAX_MIN = FOREACH MAX_MIN_VALUE_GROUP 
       GENERATE
           FLATTEN(MAX_MIN_VALUE.(id)), MAX(MAX_MIN_VALUE.value), MIN(MAX_MIN_VALUE.value); 
```

我正在努力解决的是如何过滤数据，以便我可以获得每个 id 的最大值和最小值。在 SQL 中，我会进行自联接，但在 PIG 中想不出等效的方法。

谁能指出我在 PIG 中解决这个问题的好方法？

提前感谢您的任何想法，非常感谢！真皮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:47:52.697

你需要`GROUP BY id`代替`GROUP ALL`.

# database - 在 Oracle 中使用 CASE 的更好方法是什么？

> ID：13505590
> 
> 赞同：0
> 
> 时间：2012-11-22T03:45:06.993
> 
> 标签：database, oracle, case

我很好奇在这些查询中哪个更好（性能或任何东西）。

```
 SELECT some_column,
    CASE case_column
         WHEN 1 THEN 'a'
         WHEN 2 THEN 'a'
         WHEN 3 THEN 'a'
         WHEN 5 THEN 'b'
         WHEN 6 THEN 'b'
         ...
    END AS case_column_str
    FROM some_table ORDER BY case_column_str 
```

或者

```
 SELECT some_column,
    CASE 
         WHEN case_column=1 OR case_column=2 OR case_column=3 THEN 'a'
         WHEN case_column=5 OR case_column=6 THEN 'b'
         ...
    END AS case_column_str
    FROM some_table ORDER BY case_column_str 
```

这些查询中的任何一个都比另一个有优势吗？除了第二个能够使用其他字段进行更多过滤之外，两者之间是否有任何显着差异？如果我只想过滤单个列怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T04:25:14.070

任何体面的优化器都会将两者视为基本相同；您不太可能衡量性能差异。Oracle 有一个足够好的优化器，您将很难衡量差异。您可以查看查询计划，但如果它们相同，请不要感到惊讶。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T05:49:03.997

它们的解析方式相同。

```
13:41:48 SYSTEM@oars_sandbox> create table t as select mod(rownum,5) val from dual connect by rownum <= 1e5;

Table created.                                                                                              

Elapsed: 00:00:00.21 
```

注意“列投影信息”。第一种情况：

```
13:43:51 SYSTEM@oars_sandbox> ed                                                    
Wrote file S:\\tools\buffer.sql                                                     

  1  SELECT CASE val                                                                
  2           WHEN 1 THEN 'a'                                                       
  3           WHEN 2 THEN 'a'                                                       
  4           WHEN 3 THEN 'a'                                                       
  5           WHEN 5 THEN 'b'                                                       
  6         END AS case_column_str                                                  
  7    FROM t                                                                       
  8*  ORDER BY case_column_str                                                      
13:44:32 SYSTEM@oars_sandbox> @xplan                                                

PLAN_TABLE_OUTPUT                                                                   
------------------------------------------------------------------------------------
Plan hash value: 961378228                                                          

----------------------------------------------------------------------------------- 
| Id  | Operation          | Name | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     | 
----------------------------------------------------------------------------------- 
|   0 | SELECT STATEMENT   |      |   114K|  1450K|       |   591   (2)| 00:00:08 | 
|   1 |  SORT ORDER BY     |      |   114K|  1450K|  2256K|   591   (2)| 00:00:08 | 
|   2 |   TABLE ACCESS FULL| T    |   114K|  1450K|       |    44   (3)| 00:00:01 | 
----------------------------------------------------------------------------------- 

Query Block Name / Object Alias (identified by operation id):                       
-------------------------------------------------------------                       

   1 - SEL$1                                                                        
   2 - SEL$1 / T@SEL$1                                                              

Column Projection Information (identified by operation id):                         
-----------------------------------------------------------                         

   1 - (#keys=1) CASE "VAL" WHEN 1 THEN 'a' WHEN 2 THEN 'a' WHEN 3 THEN             
       'a' WHEN 5 THEN 'b' END [1]                                                  
   2 - "VAL"[NUMBER,22]                                                             

Note                                                                                
-----                                                                               
   - dynamic sampling used for this statement (level=2) 
```

第二种情况：

```
13:44:36 SYSTEM@oars_sandbox> ed                                                    
Wrote file S:\\tools\buffer.sql                                                     

  1  SELECT CASE WHEN val=1 OR val=2 OR val=3 THEN 'a'                              
  2           WHEN val=5 OR val=6 THEN 'b'                                          
  3    END AS case_column_str                                                       
  4    FROM t                                                              
  5*  ORDER BY case_column_str                                                      
13:45:53   6                                                                        
13:45:55 SYSTEM@oars_sandbox> @xplan                                                

PLAN_TABLE_OUTPUT                                                                   
------------------------------------------------------------------------------------
Plan hash value: 961378228                                                          

----------------------------------------------------------------------------------- 
| Id  | Operation          | Name | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     | 
----------------------------------------------------------------------------------- 
|   0 | SELECT STATEMENT   |      |   114K|  1450K|       |   591   (2)| 00:00:08 | 
|   1 |  SORT ORDER BY     |      |   114K|  1450K|  2256K|   591   (2)| 00:00:08 | 
|   2 |   TABLE ACCESS FULL| T    |   114K|  1450K|       |    44   (3)| 00:00:01 | 
----------------------------------------------------------------------------------- 

Query Block Name / Object Alias (identified by operation id):                       
-------------------------------------------------------------                       

   1 - SEL$1                                                                        
   2 - SEL$1 / T@SEL$1                                                              

Column Projection Information (identified by operation id):                         
-----------------------------------------------------------                         

   1 - (#keys=1) CASE "VAL" WHEN 1 THEN 'a' WHEN 2 THEN 'a' WHEN 3 THEN             
       'a' WHEN 5 THEN 'b' END [1]                                                  
   2 - "VAL"[NUMBER,22]                                                             

Note                                                                                
-----                                                                               
   - dynamic sampling used for this statement (level=2) 
```

解释计划查询：

```
 select * from table(dbms_xplan.display(null, null, 'all')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T06:01:37.077

两种形式的 CASE 语法允许我们使用不同的条件。

第一种形式仅与单列过滤相关，但即便如此，它也非常严格。鉴于您的示例规则，我仍然会选择使用第二个变体，但使用不那么冗长的公式......

```
CASE
    WHEN case_column in (1,2,3) THEN 'a'
    WHEN case_column in (5,6) THEN 'b'
    ELSE 'c'
END CASE 
```

... 也许 ...

```
CASE
    WHEN case_column <= 3 THEN 'a'
    WHEN case_column between 5 and 6 THEN 'b'
    ELSE 'c'
END CASE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-25T04:15:40.457

在这里，您提到了两种案例陈述。第一个例子是**正常的案例陈述。** 第二个示例是**搜索的案例语句。**

第一种形式几乎等同于**oracle 的解码功能**。所以我看不出这种情况有什么特别的用途。

而第二种形式就像 if else 编码范式。通过这个可以检查多个条件，否则无法在第一种形式中检查。

从性能的角度来看，两种方式没有区别。在 SQL DEVELOPER 中执行两个查询时，两个查询都给出相同的成本值。

希望这可以帮助。！！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-22T03:53:28.127

```
SELECT some_column,
CASE 
     WHEN case_column=1 or case_column=2 or case_column=3 THEN 'a'
     WHEN case_column=5 or case_column=6 THEN 'b'
     ...
END as case_column_str
FROM some_table order by case_column_str 
```

这要好得多，就好像其中任何一个在这种情况下为真一样，我们不必检查其余条件

第一个选项不是这种情况，在那里我们必须一个一个地通过每个单独的条件。

# php - PHP的微时间的奇怪问题

> ID：13505594
> 
> 赞同：1
> 
> 时间：2012-11-22T03:46:21.143
> 
> 标签：php

我正在尝试使用 php 的 microtime() 来测试我的代码中的两个循环需要多长时间，看看哪一个运行得更快。这是我的代码：

```
$now = microtime();

//loop1  here

$elapsed = microtime() - $now;
echo "Elapsed: $elapsed <br />"; 
```

当我运行一个循环时，我得到负数的结果，例如：

```
Elapsed: -0.120572 
```

这很奇怪，因为`microtime()`应该总是比它早几微秒的值大？

对于第二个循环，该值始终为正：

```
Elapsed: 0.005483 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T03:50:36.537

`microtime(true)`按照[http://au1.php.net/manual/en/function.microtime.php](http://au1.php.net/manual/en/function.microtime.php)使用as false 将微时间作为字符串返回，并且您对字符串执行数学运算而不是数字..

# c++ - 友元函数看不到私有成员变量

> ID：13505600
> 
> 赞同：2
> 
> 时间：2012-11-22T03:46:59.410
> 
> 标签：c++, operator-overloading

我正在尝试使用友元函数重载 << 运算符，但由于某种原因它没有看到私有成员变量。任何为什么会发生这种情况的想法都会很有帮助。

这是头文件

```
 class Set
    {
private:
    struct Node
    {
        int val;
        Node* link;
    };

    Node *cons(int x, Node *p);
    Node *list;

public:
    Set() {list = NULL;}
    bool isEmpty() const;
    int size() const;
    bool member (int x) const;
    bool insert (int x);
    bool remove (int x);
    void print() const;
    const Set operator+(const Set &otherSet)const;
    const Set operator*(const Set &otherSet)const;
    Node* getSet()const{return list;}
    void setList(Node *list);
    friend ostream& operator <<(ostream& outputStream, const Set &set);
    }; 
```

这是函数定义。

```
 ostream& operator <<(ostream& outputStream, const Set &set)
    {
              Node *p;
              p = list;
              outputStream << '{';
              while(p->link != NULL)
              {
                outputStream << p->val;
                p = p->link;
              }
              outputStream << '}';
              return outputStream;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T03:52:23.890

问题不在于可访问性，`Node`而在于其范围：非限定类型名称不会通过友谊进入范围 - 您应该`Set::Node`改用。

变量也是如此`list`：它应该是`set.list`.

有了这两个更改，[您的代码可以在 ideone 上正常编译](http://ideone.com/TeWROz)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T03:56:41.750

您的代码的**[简单表示](http://codepad.org/ndbzaakM)**是：

```
class A
{
    struct MY
    {
        int a;
    };
    friend void doSomething(A);
};

void doSomething(A)
{
    MY *b;

}
int main()
{
    return 0;
} 
```

问题在于：

```
MY *b; 
```

您的函数无法理解 的类型，`MY`因为它是在类中声明的`A`。因此错误：

```
In function 'void doSomething(A)':
Line 12: error: 'MY' was not declared in this scope
compilation terminated due to -Wfatal-errors. 
```

为了告诉函数在`My`里面找到`A`你需要使用结构的**完全限定名**：

```
A::MY *b; 
```

一旦你这样做了，该函数就知道在哪里寻找`MY`，因此可以找到它。
**[工作在线样本](http://codepad.org/Uicac9UW)**。

# jsf-2 - 如何在 c:if 中使用 h:commandLink

> ID：13505601
> 
> 赞同：0
> 
> 时间：2012-11-22T03:47:01.893
> 
> 标签：jsf-2

我想检查某人是否有权限，以便他们可以查看我的链接，但我不明白为什么当我单击“查看”链接时，它会消失该链接并且不处理我的 prepareView()。它出什么问题了 ？

```
<c:if test="#{controller.viewMode == 'OK'}">
    <h:commandLink action="#{controller.prepareView()}" value="View"/>
</c:if>
<h:commandLink action="#{controller.prepareEdit()}" value="Edit"/>
<h:commandLink action="#{controller.destroy()}" value="Delete"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:50:16.513

当后面的值`#{controller.viewMode}`取决于请求范围的条件时，可能会发生这种情况，该条件在表单提交的请求中与表单显示的请求相比发生了不兼容的变化。

在表单提交处理的恢复视图阶段，将`<c:if>`再次重新评估。如果此时`#{controller.viewMode}`返回*不是*“OK”（即使它在表单显示的初始请求期间这样做了），则命令链接在组件树中消失。然后它的动作将永远不会被解码或调用。

要解决此问题，您需要确保`#{controller.viewMode}`在回发请求期间返回的值与在初始请求期间返回的值完全相同。如果您的 bean 是请求范围的，您基本上需要确保该属性在请求范围 bean 的（后）构造函数中正确初始化。

或者，您也可以将 bean 放在视图范围内，这样只要您与同一个视图交互，bean 实例就会一直存在，但是在标记处理程序中使用时又会出现另一个问题。所以当你想使用视图范围时，你肯定必须用`rendered`JSF 组件的属性来替换 JSTL 测试。

```
@ManagedBean
@ViewScoped
public class Controller {
    // ...
} 
```

和

```
<h:commandLink value="View" action="#{controller.prepareView}" rendered="#{controller.viewMode == 'OK'}" /> 
```

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)
*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)
*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

# php - 如何用 PHP 解析 CSV 文件并插入 MySQL 数据库？

> ID：13505611
> 
> 赞同：1
> 
> 时间：2012-11-22T03:48:54.893
> 
> 标签：php, mysql, parsing, csv

我有一个像这样的远程 CSV：

```
EUR/USD,1353555876030,1.28,435,1.28,442,1.28261,1.28703,1.28278
USD/JPY,1353555897400,82.,448,82.,449,82.370,82.594,82.524
GBP/USD,1353555880620,1.59,610,1.59,618,1.59496,1.59722,1.59524
EUR/GBP,1353555883845,0.80,464,0.80,480,0.80374,0.80590,0.80416
USD/CHF,1353555869856,0.93,793,0.93,807,0.93549,0.93919,0.93886
EUR/JPY,1353555897821,105.,894,105.,901,105.825,106.267,105.862
EUR/CHF,1353555869848,1.20,470,1.20,491,1.20395,1.20509,1.20434
USD/CAD,1353555889301,0.99,580,0.99,595,0.99555,0.99684,0.99623
AUD/USD,1353555900458,1.03,892,1.03,901,1.03658,1.04019,1.03691
GBP/JPY,1353555897599,131.,593,131.,603,131.516,131.890,131.642 
```

将所有这些信息发送到我的 mySQL 数据库的最佳方式是什么？（我想每秒刷新更新一下价格）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T03:59:12.743

但是，您决定将 CSV 内容获取到 PHP，请确保您正在使用[`fgetcsv()`](http://php.net/manual/en/function.fgetcsv.php)执行实际的 CSV 解析。

```
<?php

$csv = <<<EOT
EUR/USD,1353555876030,1.28,435,1.28,442,1.28261,1.28703,1.28278
USD/JPY,1353555897400,82.,448,82.,449,82.370,82.594,82.524
GBP/USD,1353555880620,1.59,610,1.59,618,1.59496,1.59722,1.59524
EUR/GBP,1353555883845,0.80,464,0.80,480,0.80374,0.80590,0.80416
USD/CHF,1353555869856,0.93,793,0.93,807,0.93549,0.93919,0.93886
EUR/JPY,1353555897821,105.,894,105.,901,105.825,106.267,105.862
EUR/CHF,1353555869848,1.20,470,1.20,491,1.20395,1.20509,1.20434
USD/CAD,1353555889301,0.99,580,0.99,595,0.99555,0.99684,0.99623
AUD/USD,1353555900458,1.03,892,1.03,901,1.03658,1.04019,1.03691
GBP/JPY,1353555897599,131.,593,131.,603,131.516,131.890,131.642
EOT;

// create a read/write location in memory
$handle=fopen("php://memory", "rw");

// copy the CSV to memory
fwrite($handle, $csv);

// rewind the handle to the beginning of the CSV
fseek($handle, 0);

// read the CSV from memory
while (($row=fgetcsv($handle)) !== false) {

    // handle each row
    print_r($row);

    // do whatever mysql operations you want here
    // ...
}; 
```

输出

```
Array
(
    [0] => EUR/USD
    [1] => 1353555876030
    [2] => 1.28
    [3] => 435
    [4] => 1.28
    [5] => 442
    [6] => 1.28261
    [7] => 1.28703
    [8] => 1.28278
)
Array
(
    [0] => USD/JPY
    [1] => 1353555897400
    [2] => 82.
    [3] => 448
    [4] => 82.
    [5] => 449
    [6] => 82.370
    [7] => 82.594
    [8] => 82.524
)
Array
(
    [0] => GBP/USD
    [1] => 1353555880620
    [2] => 1.59
    [3] => 610
    [4] => 1.59
    [5] => 618
    [6] => 1.59496
    [7] => 1.59722
    [8] => 1.59524
)
Array
(
    [0] => EUR/GBP
    [1] => 1353555883845
    [2] => 0.80
    [3] => 464
    [4] => 0.80
    [5] => 480
    [6] => 0.80374
    [7] => 0.80590
    [8] => 0.80416
)
Array
(
    [0] => USD/CHF
    [1] => 1353555869856
    [2] => 0.93
    [3] => 793
    [4] => 0.93
    [5] => 807
    [6] => 0.93549
    [7] => 0.93919
    [8] => 0.93886
)
Array
(
    [0] => EUR/JPY
    [1] => 1353555897821
    [2] => 105.
    [3] => 894
    [4] => 105.
    [5] => 901
    [6] => 105.825
    [7] => 106.267
    [8] => 105.862
)
Array
(
    [0] => EUR/CHF
    [1] => 1353555869848
    [2] => 1.20
    [3] => 470
    [4] => 1.20
    [5] => 491
    [6] => 1.20395
    [7] => 1.20509
    [8] => 1.20434
)
Array
(
    [0] => USD/CAD
    [1] => 1353555889301
    [2] => 0.99
    [3] => 580
    [4] => 0.99
    [5] => 595
    [6] => 0.99555
    [7] => 0.99684
    [8] => 0.99623
)
Array
(
    [0] => AUD/USD
    [1] => 1353555900458
    [2] => 1.03
    [3] => 892
    [4] => 1.03
    [5] => 901
    [6] => 1.03658
    [7] => 1.04019
    [8] => 1.03691
)
Array
(
    [0] => GBP/JPY
    [1] => 1353555897599
    [2] => 131.
    [3] => 593
    [4] => 131.
    [5] => 603
    [6] => 131.516
    [7] => 131.890
    [8] => 131.642
)
[Finished in 0.1s] 
```

请注意，如果您在文件系统的某处将 CSV 作为文件提供，则没有理由将整个内容加载到内存中。在这种情况下，使用`fopen()`并传入文件名和`r`参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T04:07:10.943

如果您有 CSV 文件，导入 MySQL 数据库的最快方法是使用[`LOAD DATA INFILE`](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)，例如：

```
LOAD DATA INFILE 'exchange_rates.csv' 
INTO TABLE exchange_rates (@var1, @var2, @var3, @var4)
SET 
    from_currency = @var1, 
    to_currency = @var2,
    exchange_rate = @var3,
    etc... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T03:56:14.680

我建议您比较两个最新文件并更新更改而不是一直更新整个表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T03:51:35.067

您可以运行诸如[Cron Scheduler](http://quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontriggerhttp://quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger)之类的调度作业，它将获取您的 CSV 条目、格式化为 INSERT SQL 语句并触发查询。

# windows - 我需要避免尝试更新连接到 TSQLQuery 的 Delphi TClientDataset 中的非物理字段

> ID：13505612
> 
> 赞同：8
> 
> 时间：2012-11-22T03:49:01.567
> 
> 标签：windows, delphi, tclientdataset

Precis：我的代码试图更新作为运行时命令的结果创建的 Delphi XE 中的非物理字段（通过其属性集`TClientDataset`连接到 a ）。`TSQLQuery``SQL``Open`

我有一个`TClientDataset`连接到一个`TDatasetProvider`连接到一个`TSQLQuery`连接到一个`TSQLConnection`。这些对象中的前 3 个被封装在一个库中的几个类中，我在多个项目的许多地方都使用了这些类。这些类在运行时创建这 3 个对象，并消除了大量重复代码，因为我有很多很多这样的三元组。

通常我会通过在 的属性中指定`TClientDataset`一些 SQL并调用. 通过对ie的调用创建in 。它们之前不存在。`SQL``TSQLQuery``Open``TClientDataSet``Fields``TClientDataset``Open``Open`

我遇到了一个问题，其中生成的三个字段`TClientDataset`是非物理的；也就是说，SQL 进行计算以生成它们。不幸的是，在 中`TClientDataset`，这 3 个字段的创建与物理字段没有任何不同；它们`FieldKind`是`fkData`（理想情况下应该是`fkInternalCalc`），`Calculated`属性是`False`（理想情况下应该是`True`）和它们的`ProviderFlags`包含`pfInUpdate`（理想情况下不应该是）。毫不奇怪，当需要`ApplyUpdates`对`TClientDataset`抛出异常进行处理时......

```
Project XXX.exe raised exception class TDBXError with message
SQL State: 42S22, SQL Error Code: 207 Invalid column name 'Received'.
SQL State: 42S22, SQL Error Code: 207 Invalid column name 'Issued'.
SQL State: 42S22, SQL Error Code: 207 Invalid column name 'DisplayTime'. 
```

我可以通过在'事件处理程序中清除这些字段的`pfInUpdate`标志来避免此错误。但是，此解决方案要求该函数知道位于上述通用类中的特定字段名称，从而破坏了代码的通用性。`TDatasetProvider``OnUpdateData`

我正在寻找的是一种将这些字段的计算性质信号传递给事件处理函数的通用方法。

调用后我无法更改它们的`FieldKind`或`Calculated`属性（分别为`fkInternalCalc`和`True`），`Open`因为这会生成`WorkCDS: Cannot perform this operation on an open dataset`异常消息。而且，我不能在`Open`调用之前更改这些属性，因为`Fields`它们还不存在。

之后我可以从这些属性中删除`pfInUpdate`标志，`Field`但这不会传递到到达事件处理程序的“Delta”上。我还尝试设置字段的属性；同样，这不会传递给 Delta 数据集。`ProviderFlags``Open``TClientDatset``OnUpdateData``FieldDefs.InternalCalcField`

所以，我尝试过的所有信号想法都没有奏效。如果有任何新想法或替代方法，我将不胜感激。

我遇到的所有 Internet 搜索结果（包括 Cary Jensen 的优秀文章）都处理不适用于我的情况的设计时或非 SQL 生成的设置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T07:13:04.963

您可以在您的类中创建一种机制，为您要在更新过程中*忽略*的各个字段预配置 ProviderFlags 。

根据对您问题的评论，我建议您在类中创建一个新方法来打开内部 ClientDataSet，所有魔法都将在此方法中发生。

首先，一种简单的机制是包含一个新的 TStringList 属性，该属性列出了您要忽略的所有字段，您将按名称匹配这些字段。随意采用这个或创建一个新的更好的机制，重要的是你能够确定你想以这种方式配置哪些字段。

```
type
  TMyClass = class
    // all your current class here
  private
    FUpdateIgnoredFields: TStringList;
  public
    property UpdateIgnoredFields: TStringList read FUpdateIgnoredFields write SetUpdateIgnoredFields;
    //don't forget to create this in your constructor, free it in the destructor
    //and Assign any new value in the SetUpdateIgnoreFields method, as usual.
    procedure OpenInnerCDS; //the magic goes here
  end;

procedure TMyClass.OpenInnerCDS;
var
  FieldName: string;
  AFieldToIgnore: TField;
begin
  //opens the inner cds, but before that, configures the update-ignored  
  //fields in the underlying dataset
  //Let's call it InnerBaseDataSet;
  FInnerBaseDataSet.Open; //this opens the DataSet and creates all the fields for it.
  try
    for FieldName in FUpdateIgnoredFields do
    begin
      AFieldToIgnore := FInnerBaseDataSet.FindField(FieldName);
      if Assigned(AFieldToIgnore) then
        AFieldToIgnore.ProviderFlags := AFieldToIgnore.ProviderFlags - [pfInUpdate, pfInWhere];
    end;
    //now, let's open the ClientDataSet;
    FInnerClientDataSet.Open;
  finally
    //I suggest no matter what happens, always close the inner data set
    //but it depends on how the CDS->Provider->DataSet interaction is configured
    FInnerBaseDataSet.Close;
  end;
end;

//the way you use this is to replace the current ClientDataSetOpen with something like:

var
  MyInsance: TMyClass;
begin
  MyInstance := TMyInstance.Create();  //params
  try
    //configuration code here
    //MyInstance.InnerCDS.Open;  <-- not directly now
    MyInstance.UpdateIgnoreFields.Add('CALCULATED_SALARY');
    MyInstance.OpenInnerCDS;
    //use the CDS here.
    MyInstance.InnerCDS.ApplyUpdates(-1); //safely apply updates now.
  finally
    MyInstance.Free;
  end;
end; 
```

把它当作一个想法。

我在这里写了所有代码，可能语法错误，但它显示了整个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:04:16.237

您可以通过在 CDS 上设置相应的可选参数，将 ProviderFlags（以及一些其他属性）从客户端传递到提供者（delta）端。不要忘记设置 IncludeInDelta 参数

# mysql - 使用 CakePHP 的多字段主键和数据库结构

> ID：13505613
> 
> 赞同：0
> 
> 时间：2012-11-22T03:49:20.360
> 
> 标签：mysql, cakephp

我设置了两张表，一张名为 users，一张名为 work_order。

在**users**表中，字段包括 *id, given_name, family_name*

而**work_order**表包括 *id、create_date、due_date、description*

我想添加 created_by、request_by 和 own_by 字段，这些字段都仅限于 users 表中列出的用户。这样做的正确方法是什么？我会在工作订单表中有“_by”字段，还是需要一个带有 work_order_id、user_id 和某种角色字段的新表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:20:24.040

首先，您的表应该是“work_orders”（复数），而不是“work_order”（单数）。没什么大不了的，只要您`$useTable = "word_order";`在模型中指定，但是 - 命名约定说表应该是复数。

因为您只处理三件事，并且不期望不断添加新字段，所以使用您提到的三个字段完全没问题（可能是我会做的）：'created_by'，'requested_by'，和 work_orders 表中的“owned_by”字段。

我想如果是我，我会遵循`something_id`约定并使用“creator_id”、“requester_id”和“owner_id”。不管怎样，这取决于你。

然后，当您设置关联时，您只需使用这三个字段与“用户”模型关联。在我的脑海中，它会是这样的：

```
//WorkOrder model

public $belongsTo = array(
    'Creator' => array(
        'className'    => 'User',
        'foreignKey'   => 'created_by' //could use 'creator_id' instead
    ),
    'Requester' => array(
        'className'    => 'User',
        'foreignKey'   => 'requested_by' //could use 'requester_id' instead
    ),
    'Owner' => array(
        'className'    => 'User',
        'foreignKey'   => 'owned_by' //could use 'owner_id' instead
    ),
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:47:54.903

您必须定义用户和工作订单之间的关系，以便以第 3 范式创建数据库方案。

一个用户可以创建多个工单吗？是否可以为多个用户创建工作订单？

一个用户可以请求多个工单吗？可以为多个用户请求工作订单吗？

一个用户可以拥有多个工单吗？是否可以为多个用户拥有一个工作订单？

一旦你回答了这些问题，你就可以开始处理数据库表了。

# html - 如何使用 CSS 水平分布项目？

> ID：13505616
> 
> 赞同：23
> 
> 时间：2012-11-22T03:49:53.193
> 
> 标签：html, css

我想在一个栏上水平分布一些列表项，并且我想使代码模块化，以便在我插入更多时自动调整项目之间的空间。

我想要最左边的第一个项目，最右边的右边项目，其余的分布在两者之间。它们彼此之间的空间相等。考虑将一条线段分成几部分，这些项目将标记分离点，以及原始线段的头/尾。

我尝试了几种解决方案，并在网上找到了一些解决方案，但他们没有做我想要的。根据我之前的类比，他们只是把所有东西都放在中心，就像把每个项目放在每条线的中间。

有人可以在 CSS 中提供一个不错的解决方案吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-22T04:14:02.250

你可以在使用`inline-block`, 伪元素 和之后做你想做的事`text-align: justify;`，但它只适用于 IE8 及更高版本。

这是代码：

```
<!-- HTML -->

<ul>
    <li>List Item 1</li>
    <li>List Item 2</li>
    <li>List Item 3</li>
    <li>List Item 4</li>
</ul> 
```

* * *

```
​
/* CSS */

ul {
    text-align: justify;
}
ul:after {
    content: '';
    display: inline-block;
    width: 100%;
}
ul:before {
    content: '';
    display: block;
    margin-top: -1.25em;
}
li {
    display: inline-block;
    margin-right: -.25em;
    position: relative;
    top: 1.25em;
} 
```

现场演示： http: [//jsfiddle.net/joshnh/UX9GU/](http://jsfiddle.net/joshnh/UX9GU/) ​</p>

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-01T08:41:09.077

有一个干净的解决方案：

[http://radiatingstar.com/distribute-divs-images-equally-line](http://radiatingstar.com/distribute-divs-images-equaly-line)

```
#container {
    text-align: justify;
}
#container > div {
    width: 100px; /* Declare your value. Can be in relative units. */
    display: inline-block;
    vertical-align: top;
}
#container:after {
    content: "";
    width: 100%;
    display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-08-27T15:32:47.617

作为 joshnh 答案的补充，如果有人有同样的问题：

注意：每个元素`text-align: justify;`之后都需要一个空间才能工作。`display: inline-block;`否则元素被视为一个单词，不会水平分布。

所以这行不通：

```
<!-- HTML -->
<ul><li>Item 1<li><li>Item 2<li><li>Item 3<li><li>Item 4<li></ul> 
```

但这将：

```
<!-- HTML -->
<ul>
  <li>Item 1<li>
  <li>Item 2<li>
  <li>Item 3<li>
  <li>Item 4<li>
</ul> 
```

我刚刚遇到了这个问题，因为我们正在缩小 HTML 标记，而缩小器将所有内容放在一行中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-28T12:41:39.430

2019 年有一个灵活的解决方案`justify-content: space-between`

```
<ul>
  <li>Item 1<li>
  <li>Item 2<li>
  <li>Item 3<li>
  <li>Item 4<li>
</ul> 
```

```
ul {
  width: 100%; /* Your element needs a fixed width */
  display: flex;
  justify-content: space-between;
} 
```

# c++ - 在冒险游戏中检查空房间？

> ID：13505617
> 
> 赞同：0
> 
> 时间：2012-11-22T03:49:54.180
> 
> 标签：c++, class, map, key, adventure

我正在为 C++ 项目开发冒险游戏。目标基本上是拥有一堆房间，由一个类定义。然后使用地图将它们链接在一起。除了检查是否没有房间并确保没有为空房间输入输入之外，我一切正常。例如，它会说“那里什么都没有”，然后提示用户移动方向。目前，如果某个方向没有空间并且选择了该方向，我的程序就会崩溃。我目前已将其设置为至少确保输入了有效的方向（北、南、东或西），但它不检查该方向是否可用。有人知道这样做的好方法吗？

**主文件**

```
 #include <iostream>
    #include <string>
    #include <map>

    #include "room.h"

    using namespace std;

    int main()
    {
        /* ---------- Variable Declerations ---------- */
        string exitChoice;

        /* ---------- Room Intialization ---------- */
        room *kitchen = new room("Kitchen", "You are in the Kitchen. Pots and pans dangle above your head as you look across the room.");
        room *diningRoom = new room("Dining Room", "You are in the Dining Room. You see a large table in the center of the room complete with a set of chairs. It seems no one has ate here in quite som time.");
        room *garage = new room("Garage", "You are in the Garage. There are tools spread across the concerte floor complete with a Jeep Grand Cherokee on jack stands.");
        room *masterBed = new room("Master Bed Room", "You are in the Bed Room. A large Master Bed greets you as you walk into the room. You can see a large master bath as weel in the backround");
        room *hallway = new room("Hallway", "You are in the Hallway. A large set of stairs leads to the second floor, complete with a set to the basement. You also see a grand front door.");
        room *familyRoom = new room("Family Room", "You are in the Family Room. You see a dark leather couch in front of you as well as a brand new LCD TV. It aappears South Park is on TV.");
        room *bathRoom = new room("Bath Room", "You are in the Bath Room. A small room containing just a toilet is in front of you.");
        room *frontLawn = new room("Front Lawn", "You are in the Front Lawn. You are on a pathway and observe freshly cut grass as well as several trees scattered across the yard.");
        room *backLawn = new room("Back Lawn", "You are in the Back Lawn. You see 'Spot' running around chasing a tennis ball, as well as his dog house. A large wooden fence keeps him in the yard.");

        /* ----------Room Links---------- */

        /* Kitchen */
        kitchen->link(diningRoom, "North");
        kitchen->link(garage, "East");
        kitchen->link(masterBed, "South");
        kitchen->link(hallway, "West");

        /* Dining Room */
        diningRoom->link(kitchen, "South");
        diningRoom->link(familyRoom, "West");

        /* Master Bed Room */
        masterBed->link(kitchen, "North");
        masterBed->link(bathRoom, "West");

        /* Garage */
        garage->link(kitchen, "West");
        garage->link(backLawn, "East");

        /* Back Lawn */
        backLawn->link(garage, "West");

        /* Family Room */
        familyRoom->link(diningRoom, "East");
        familyRoom->link(hallway, "South");

        /* Hallway */
        hallway->link(familyRoom, "North");
        hallway->link(kitchen, "East");
        hallway->link(bathRoom, "South");
        hallway->link(frontLawn, "West");

        /* Front Lawn */
        frontLawn->link(hallway, "East");

        /* Bath Room */
        bathRoom->link(hallway, "North");
        bathRoom->link(masterBed, "East");

        /* ----------Gameplay---------- */
        room *currentRoom = kitchen;

        while (exitChoice != "quit")
        {
            currentRoom->printRoom();
            cout << endl;

            currentRoom->printLiked();

            cout << "Which exit? (Or 'quit'):";
            cin >> exitChoice;

            if(exitChoice != "quit" && exitChoice != "North" && exitChoice != "South" && exitChoice != "East" && exitChoice != "West")
            {
                cout << "Invalid Entry!" << endl;
                cout << "Which exit? (Or 'quit'):";
                cin >> exitChoice;
            }

            cout << "You move to the " << exitChoice << "..." << endl;
            currentRoom->getLinked(exitChoice);

            currentRoom = currentRoom->getLinked(exitChoice);
        }
    } 
```

**房间.h**

```
#ifndef ROOM_H
#define ROOM_H

using namespace std;

#include <string>
#include <iostream>
#include <map>

class room
{
    private:
        string name;
        string description;

    public:

    /* Constructor Prototypes */
    room(string, string);
    room(string);

    /* Get Name */
    string getName()
    {
        return name;
    }

    /* Get Description */
    string getDescription()
    {
        return description;
    }

    /* Print Room Information */
    void room :: printRoom()
    {
        cout << "--" << getName() << "--" << endl;
        cout << getDescription() << endl;
    }

    /* Map */
    map<string, room*> exits;

    /* Link Function*/
    void link(room *room, string direction)
    {
        exits[direction] = room;
    }

    /* Print Linked Rooms */
    void printLiked()
    {
        map<string, room*> :: iterator it;

        cout << endl;

        for(it = exits.begin(); it != exits.end(); ++it)
        {
            cout << "Exit: ";
            cout << it->first << " (" << it->second->getName() << ")" << endl;

        }

        cout << endl;
    }

    /* Get linked room */
    room* getLinked(string direction)
    {
        map<string, room*> :: iterator it;

        it = exits.find(direction);

        if(it != exits.end())
        {
            return it->second;
        }
        else
        {
            return NULL;
        }

    }

};

#endif 
```

**房间.cpp**

```
 #include <iostream>
    #include <string>
    #include <map>

    using namespace std;

    #include "room.h"

        /* Constructor with Name and Description */
        room :: room(string _name, string _description)
        {
            name = _name;
            description = _description;
        }

        /* Contrsuctor with Name */
        room :: room(string _name)
        {
            name = _name;
        } 
```

**新的 main.cpp 片段**

```
 room* possibleNewRoom = currentRoom->getLinked(exitChoice);

        if (possibleNewRoom != 0)
        {
            currentRoom = possibleNewRoom;

            cout << "You move to the " << exitChoice << "..." << endl;
            currentRoom->getLinked(exitChoice);

            currentRoom = currentRoom->getLinked(exitChoice);
        }
        else
        {
            cout << "There are no exits in that direction." << endl;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:14:33.217

你需要：

```
room* possibleNewRoom = currentRoom->getLinked(exitChoice);

if (possibleNewRoom != 0)
{
    currentRoom = possibleNewRoom;
}
else
{
    std::cout << "Ouch - you cannot move that way" << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:20:25.303

最常见的方法是在 Room 类中引入定向成员：

```
class Room {
    // ...
    Room *north, *south, *east, *west;
    // ...
    Room() : north(NULL), south(NULL), east(NULL), west(NULL)
    { /* ... */ }
}; 
```

然后，您可以像这样将房间相互连接：

```
Room* kitchen = new Room // ...
Room* hallway = new Room // ...
kitchen->north = hallway;
hallway->south = kitchen; 
```

当您尝试前往某个方向时，您只需检查该方向的成员是否为`NULL`：

```
// Player wants to go north.
if (this->north == NULL) {
    // Tell the player that's not possible.
} else {
    // OK, we can go to this->north.
} 
```

此设置将允许您设置更高级的连接。例如，在向北然后再次向南的情况下，不应将您带到您开始的地方（也许它是一个神奇的门户或这些线中的什么东西。）

您可以通过查看[TADS（文本冒险开发系统）](http://www.tads.org)来了解如何设计它。

# python - 无法在 Ubuntu 12.04 上正确安装 PIL

> ID：13505621
> 
> 赞同：6
> 
> 时间：2012-11-22T03:50:33.543
> 
> 标签：python, python-imaging-library, pip

我正在使用 Ubuntu 12.04，我在 PIL-hell 中。我已经尝试了所有可以在网上找到的安装 PIL 的建议，但我没有运气。我知道一个事实，我有所有的依赖。我已经尝试了所有的符号链接方法。我修改了 setup.py 文件以确保它找到正确的目录。我也尝试过从源代码构建并通过 pip 安装。没有任何效果。这是我安装时得到的：

```
--------------------------------------------------------------------
PIL 1.1.7 SETUP SUMMARY
--------------------------------------------------------------------
version       1.1.7
platform      linux2 2.7.3 (default, Nov  4 2012, 15:42:19)
          [GCC 4.4.3]
--------------------------------------------------------------------
*** TKINTER support not available
--- JPEG support available
--- ZLIB (PNG/ZIP) support available
--- FREETYPE2 support available
*** LITTLECMS support not available
-------------------------------------------------------------------- 
```

这是 selftest.py 显示的内容：

```
--------------------------------------------------------------------
PIL 1.1.7 TEST SUMMARY 
--------------------------------------------------------------------
Python modules loaded from ./PIL
Binary modules loaded from ./PIL
--------------------------------------------------------------------
--- PIL CORE support ok
*** TKINTER support not installed
*** JPEG support not installed
*** ZLIB (PNG/ZIP) support not installed
*** FREETYPE2 support not installed
*** LITTLECMS support not installed
-------------------------------------------------------------------- 
```

我不知道还能尝试什么。我只是想玩一些愚蠢的PNG文件......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T03:57:34.740

最简单的方法应该如下：

```
sudo apt-get install python-imaging 
```

如果您需要在 virtualenv 中安装，或者想要绝对最新版本，请使用 pip。首先安装一些 pil 需要的东西，然后运行 ​​pip install：

```
sudo apt-get install libjpeg-dev libjpeg62 libjpeg62-dev zlib1g-dev libfreetype6 libfreetype6-dev
pip install PIL 
```

回复下面的评论。如果您全新安装 ubuntu 12.04 并运行`apt-get install python-imaging`，您将在系统上正确安装 PIL。在我的 ubuntu 12.04 机器上，当我运行 selftest.py 时，我得到以下输出：

```
--------------------------------------------------------------------
PIL 1.1.7 TEST SUMMARY 
--------------------------------------------------------------------
Python modules loaded from /usr/lib/python2.7/dist-packages/PIL
Binary modules loaded from /usr/lib/python2.7/dist-packages/PIL
--------------------------------------------------------------------
--- PIL CORE support ok
*** TKINTER support not installed
--- JPEG support ok
--- ZLIB (PNG/ZIP) support ok
--- FREETYPE2 support ok
--- LITTLECMS support ok
-------------------------------------------------------------------- 
```

您正在寻找的 PNG 支持显示正常。我怀疑您的 python 安装可能处于某种损坏状态。也许您提到的符号链接或安装此软件包的其他尝试已损坏您的安装。我可以给出三个建议来纠正这种情况

**解决方案**

1.  在机器上重新安装ubuntu。这绝对应该有效。
2.  创建一个 python [virtualenv](http://pypi.python.org/pypi/virtualenv)，然后使用 pip 在那里安装 PIL。这可能取决于基本 python 系统的损坏程度。这里的想法是默认情况下 virtualenv 将创建一个新的 python 环境，其中只有标准库。
3.  修复你的 python 安装。您可以尝试`apt-get purge python-imaging`然后重新安装 python-imaging 包。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-05T20:17:24.407

如果您在 Ubuntu 64 位上运行，除了 Marwan 之外，可能还需要另一个步骤：

PIL 设置在 Ubuntu 64 中查找库，`/usr/lib`但将它们放在`/usr/lib/x86_64-linux-gnu`. 一个可行的解决方案是创建链接：

```
sudo ln -s /usr/lib/x86_64-linux-gnu/libz.so /usr/lib
sudo ln -s /usr/lib/x86_64-linux-gnu/libjpeg.so /usr/lib
sudo ln -s /usr/lib/x86_64-linux-gnu/libfreetype.so /usr/lib 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-15T11:47:17.350

我遇到**了一起安装 PIL 和 Pillow 的问题**。

如果我使用安装 PIL`apt-get install python-imaging`然后运行`selftest.py`我得到（这很好）：

```
--- PIL CORE support ok
*** TKINTER support not installed
--- JPEG support ok
--- ZLIB (PNG/ZIP) support ok
--- FREETYPE2 support ok
--- LITTLECMS support ok 
```

如果我然后通过安装 Pillow`sudo pip install Pillow`然后重新运行，`selftest.py`我会得到：

```
--- PIL CORE support ok
*** TKINTER support not available
(Tcl/Tk 8.5 libraries needed)
--- JPEG support available
--- ZLIB (PNG/ZIP) support available
*** TIFF G3/G4 (experimental) support not available
*** FREETYPE2 support not available
*** LITTLECMS support not available
*** WEBP support not available 
```

为了解决多个“支持不可用”并回到初始状态，我刚刚卸载了 Pillow。

# objective-c - Admob 无法在 iOS 6 设备中显示

> ID：13505622
> 
> 赞同：1
> 
> 时间：2012-11-22T03:50:33.877
> 
> 标签：objective-c, ios6, admob

```
- (UIView *)addbanner{
CGPoint origin = CGPointMake(0.0, 0);
self.adBanner = [[[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner origin:origin]autorelease];
headerView = [[[UIView alloc] initWithFrame:CGRectMake(0,0,320, self.adBanner.adSize.size.height)] autorelease];
self.adBanner.adUnitID = @"a14fe853330ee80";
self.adBanner.delegate = self;
[self.adBanner setRootViewController:self];
[headerView addSubview:self.adBanner];
[self.adBanner loadRequest:[self createRequest]];
return headerView;
}

- (GADRequest *)createRequest {
GADRequest *request = [GADRequest request];
request.testing = NO;
return request;
}

- (void)bannerView:(GADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
NSLog(@"error %@", error);
}

- (void)adViewDidReceiveAd:(GADBannerView *)bannerView
{
NSLog(@"success");
} 
```

当我在 iOS 5 设备上尝试开发者和分发模式时也可以显示。

当我在开发人员和分发模式下尝试 iOS 6 设备但无法显示时。

[这](https://itunes.apple.com/app/oriental-daily-news/id570920708?mt=8)是我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:25:22.887

您不会在 iOS 6 上获得测试广告，因为这现在不起作用（链接到[论坛帖子](https://groups.google.com/forum/?fromgroups=#!searchin/google-admob-ads-sdk/test%2420ios%24206/google-admob-ads-sdk/WaW00YBVL6I/fYpukjJBPSoJ)）。

但是，如果您没有立即在 iOS 6 上收到广告，这听起来像是填充问题（没有库存），随着时间的推移应该会自行解决。如果您想测试您的广告流程是否正确，您可以创建一个完全分配给测试发布者 ID 的自家广告活动，并在您的应用程序中使用测试发布者 ID 进行测试。

# facebook - Facebook SDK - 移动网络“入门”不起作用

> ID：13505626
> 
> 赞同：0
> 
> 时间：2012-11-22T03:51:16.523
> 
> 标签：facebook

我创建一个新的 html 文件并输入[Mobile Web Tutorial中给出的代码](https://developers.facebook.com/docs/guides/mobile/web/#login)

我按照[“入门”](https://developers.facebook.com/docs/guides/mobile/web/)部分中的所有说明登录

```
<html>
<head>
    <title>My Facebook</title>
     <meta name="viewport" 
        content="initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <style>
  body.connected #login { display: none; }
  body.connected #logout { display: block; }
  body.not_connected #login { display: block; }
      body.not_connected #logout { display: none; }
</style>
</head>
<body>

<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'blahblah, // App ID
      channelUrl :  '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    FB.Event.subscribe('auth.statusChange', handleStatusChange);
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>
<div id="login">
   <p><button onClick="loginUser();">Login</button></p>
 </div>
 <div id="logout">
   <p><button  onClick="FB.logout();">Logout</button></p>
 </div>

 <script>
   function loginUser() {    
     FB.login(function(response) { }, {scope:'email'});     
     }
 </script>

</body>
</html> 
```

但它不起作用我只更改appID

我想念什么吗？

我跟随并且不做任何其他事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:21:23.093

您应该继续本教程中的后续步骤以获得功能结果。看起来您在本教程的登录步骤中途停止了。

我还更新了 appID 行下的域信息。

并确保您在设置了用户代理的移动浏览器或桌面上进行测试。有关说明，请参阅[https://developers.facebook.com/docs/guides/mobile/web/#test](https://developers.facebook.com/docs/guides/mobile/web/#test)。

在我在 iPhone 上尝试之前，我无法看到我的个人资料照片、我的名字和其他东西，比如朋友的名字。

# passwords - 如果我可以在 Fiddler Webform 会话中看到我的密码，这是否意味着它正在发送纯文本？

> ID：13505628
> 
> 赞同：4
> 
> 时间：2012-11-22T03:51:24.583
> 
> 标签：passwords, fiddler, plaintext

如果我可以在 Fiddler Webform 会话中看到我的密码，这是否意味着它正在发送纯文本？或者我怎么知道网站是否以纯文本形式发送密码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T03:52:47.760

**如果您可以看到它，并且协议是 HTTP，那么它是以纯文本形式发送的**。但即使您不能将其视为纯文本，也并不意味着它已安全加密并且可能很容易恢复，就像[HTTP 基本身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)的情况一样（除非与 HTTPS 结合使用，请参见下文）。

基本身份验证看起来像

```
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== 
```

这不是纯文本，而只是 base 64 编码，即直接解码回纯文本。

但是，**如果协议是 HTTPS，那么您看到的纯文本**对您的机器和服务器之间的任何嗅探器都是完全加密的。这包括完整的 http 请求和响应：Url、Http 标头和 Http 正文。所有可以“嗅探”的都是使用的 IP 地址和端口，通常还有域名，因为您的浏览器通过对 DNS 进行（非加密）调用获得 IP 地址。

这要求您将 Fiddler 配置为为您解密 HTTPS，这需要您“确定”Fiddler 的证书，以便它可以执行相当于“友好”中间人攻击的操作。

# xaml - 调整窗口大小时更改控件的位置 WPF 2010

> ID：13505630
> 
> 赞同：0
> 
> 时间：2012-11-22T03:51:45.407
> 
> 标签：xaml, position

当应用程序未在全屏模式下打开时，它工作得很好。但是，当我打开全屏时，我的按钮和“StudentsDataGrid”失去了它们的位置，我看不到它们在哪里。当我调整窗口大小时，按钮和 DataGrid 也会改变它们的位置。这里 xaml 是：

```
<Window x:Class="StudentsBoard.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"        
    Title="MainWindow" Height="996" Width="1191" 
    xmlns:my="clr-namespace:Students" Loaded="Window_Loaded"        
    WindowStartupLocation="CenterScreen" WindowStyle="SingleBorderWindow"  
    ResizeMode="CanResize" SizeChanged="Window_SizeChanged" SizeToContent="Manual" 
    WindowState="Maximized">

    <Grid Name="MainGrid" DataContext="{StaticResource StudentViewSource}">

    <Button Content="..." Height="40" HorizontalAlignment="Left"      
    VerticalAlignment="Top" Margin="1079,132,0,785" Name="btnbar_edit_student" Style="{DynamicResource GlassButtonBar}" Width="40" Click="btnbar_edit_student_Click" />
    <Button Content="-" Height="40" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="1079,192,0,725" Name="btnbar_del_student" Style="{DynamicResource GlassButtonBar}" Width="40" Click="btnbar_del_student_Click" />

    <DataGrid AutoGenerateColumns="False" EnableRowVirtualization="True" Height="177"           
    HorizontalAlignment="Left" VerticalAlignment="Top" ItemsSource="{Binding Source= 
    {StaticResource StudentViewSource}}" Margin="868,60,0,0" Name="StudentsDataGrid"    
    RowDetailsVisibilityMode="VisibleWhenSelected" Width="192"   
    MouseLeftButtonUp="StudentsDataGrid_MouseLeftButtonUp">                        
          </DataGrid>
    </Grid> 
```

我希望元素保持完全相同的位置。决定是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-10T17:00:39.107

您可以通过使用`HorizontalAllignment=Stretch`和`VerticalAllignment = Stretch`用于网格中存在的控件来执行此操作。

对此的替代解决方案也可以为您的网格定义行和列。例如，`

```
 <ColumnDefinition Width="222*" />
            <ColumnDefinition Width="211" />
            <ColumnDefinition Width="159" />
            <ColumnDefinition Width="282*" />
        </Grid.ColumnDefinitions> 
```

`

这种情况的最佳方法是使用 WPF 提供的面板布局。如**DockPanel、StackPanel。**

# double - 定点 <-> 双精度

> ID：13505635
> 
> 赞同：2
> 
> 时间：2012-11-22T03:52:10.350
> 
> 标签：double, fixed-point

我需要有关签名转换的见解。

保证 C 例程的输入位于 -Pi 到 pi 的范围内。这是通过“双”数据类型传递的。

由于我的设备缺少 FPU，我必须使用 24 位寄存器上的定点对输入执行数学运算（将输入除以 Pi）。

由于范围是已知的，我能够以 Q3.10 格式存储输入数据。

所以：

```
 typedef int Q3_10;
 Q1_10 ReciProc_Pi = 0x145;
 Q3_10 FP_DataQ310 = (Q3_10)(Input_Data * 1024); /* Scale by 2^10 */
 Q4_20 FP_DataQ420 = FP_DataQ310 * ReciProc_Pi;  /* Input / Pi */
 Q4_23 FP_DataQ423 = FP_DataQ420 << 3; /* Change 4Q20 to 4Q23 */
 Q1_23 FP_DataQ123 = FP_DataQ423 & 0xFFFFFF; /* Retain 24 bits */ 
```

我可以使用古老的 printf 验证打印出的分数。

```
 double Fraction = (double)((double)FP_DataQ123 / (65536 * 128));
 printf("Fraction = %f\n", Fraction); 
```

因此，对于诸如 2.5678 之类的输入，该分数被正确识别为 0.81483。

负数的处理方式相同吗？

当我通过 -1.757 时，上面的计算失败。printf 报告正分数 1.442410。但是 FP_DataQ123 的十六进制值似乎没问题（0xB8a0e8）。符号位正确设置为 1。

我后来这样做了：

```
 Q1_23 FP_DataQ123 = FP_DataQ423 & 0xFFFFFF; /* Retain 24 bits */
 if (FP_DataQ123 >> 23)
  {
    printf("Input is negative\n");
    FP_DataQ123 = (~FP_DataQ123) & 0x7FFFFF; /* Complement */ 
    double Fraction = (double)((double)FP_DataQ123 / (65536 * 128));
    printf("Fraction = %f\n", Fraction);
  } 
```

printf 现在报告正确的分数 0.557，但没有减号。

如何在不补充 FP_DataQ123 的情况下让 printf 打印 -0.557？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:13:16.753

作为有符号整数，`(65536*128)`is `0x800000`，它是一个负数。我认为您需要使您的文字值无符号或分两步进行除法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:23:15.350

所以事实证明，所有整数位都必须进行符号扩展。

```
Q1_23 FP_DataQ123 = FP_DataQ423 & 0xFFFFFF; /* Retain 24 bits */ 
```

虽然这是正确的，因为 Bit-24 是 1 表示负 1Q23 分数，但 printf 需要 Bit-23 之后的所有内容进行符号扩展。

```
Q1_23 FP_DataQ123 = FP_DataQ423 ; 
```

成功了。这种对符号扩展的需求是公平的，因为我们要求它打印一个 64 位数字而不是 24 位数字。

# ajax - 当 Google Maps 网站显示可自动完成的值时，不会执行 HTTP 请求。这怎么可能？

> ID：13505637
> 
> 赞同：0
> 
> 时间：2012-11-22T03:52:16.330
> 
> 标签：ajax, http, firebug, inspect

我正在使用[Firefox](http://www.mozilla.org)和[Firebug](https://getfirebug.com/)来了解和了解 AJAX 的工作原理。我正在“检查”[谷歌地图](https://maps.google.com)网站，当我移动到输入一些名称的搜索输入字段时，它会显示一个可自动完成的值列表。然而，奇怪的是，为了检索这些值，执行了任何 AJAX HTTP 请求。*这怎么可能？！*也就是说，谷歌地图是如何检索这些值的？

*注意：在*[Google](https://www.google.com)网站上不会发生同样的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:00:26.167

我认为您使用 Firebug 的方式有问题。我在 Chrome 开发人员工具中检查了它，每次我键入一个键时都会看到一个 Ajax 请求，正如您所期望的那样。

# c# - 如何让语言永久改变？

> ID：13505638
> 
> 赞同：4
> 
> 时间：2012-11-22T03:52:17.530
> 
> 标签：c#, asp.net-mvc-3, routes

我有个问题。我在这里阅读了一篇关于如何通过向控制器发送参数来更改语言的帖子，然后控制器可以处理更改。

这是我读过的：

第一：添加路线

```
routes.MapRoute(
"Default", 
"{language}/{controller}/{action}/{id}", 
new { language = "en", controller = "Home", action = "Index", id = "" }
); 
```

二：使用ActionLink发送参数

```
<li><%= Html.ActionLink(
    "Spanish", 
    ViewContext.RouteData.Values["action"].ToString(), 
    new { language = "es" })%></li>
<li><%= Html.ActionLink(
    "French", 
    ViewContext.RouteData.Values["action"].ToString(), 
    new { language = "fr" })%></li>
<li><%= Html.ActionLink(
    "English", 
    ViewContext.RouteData.Values["action"].ToString(), 
    new { language = "en" })%></li> 
```

现在，我已经尝试了这个解决方案，它工作正常。但是，它只能工作一次。我的意思是，如果您单击法语，它将以法语显示页面。但是页面上的其余链接仍然指向默认的“en”。

如何将默认“语言”值更改为所选语言，以便所有链接都使用所选的新语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:21:17.567

如果您希望选择被“记住”，那么您将需要使用一种存储初始选择的方法。

因此，您的主要选择是使用 cookie 或将选择存储在会话变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:36:26.173

为此目的，使用资源文件似乎是最有效的方法。您需要将要在页面上显示的所有文本存储在资源文件中，并且必须为您希望支持的所有语言创建单独的资源文件。您页面上的内容将根据浏览器上应用的语言设置从资源文件中引用。

以下关于 codeproject 的文章很好地展示了它：

[http://www.codeproject.com/Articles/181738/Creating-a-Bilingual-ASP-NET-MVC3-Application-Part](http://www.codeproject.com/Articles/181738/Creating-a-Bilingual-ASP-NET-MVC3-Application-Part)

# python - 转义标签而不转换字符

> ID：13505646
> 
> 赞同：2
> 
> 时间：2012-11-22T03:53:00.683
> 
> 标签：python, html, email, jinja2

我正在使用[jinja2](http://jinja.pocoo.org/)安全地呈现来自网络联系表单的电子邮件模板。问题是字符 &、<、>、' 和 " 被转换为 HTML 安全序列。所以

> 这就是所有的人！

变成

```
That&#39;s all folks! 
```

我想删除任何 HTML 标签以防止没有任何字符编码的[XSS 。](https://en.wikipedia.org/wiki/Cross-site_scripting)这在jinja2中可能吗？

注意：striptags[实用程序](http://jinja.pocoo.org/docs/api/#utilities)还可以转换字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T04:01:27.083

我不认为这是可能的。您将如何处理诸如`That's only true when x<y and x>0`. `<`和之间`>`的部分是消息的一部分，但可以被解释为（无聊的）HTML 标记。

`That&#39;s all folks!`由浏览器通过解码字符来正确读取和显示它。

# python - Python：回调问题

> ID：13505649
> 
> 赞同：2
> 
> 时间：2012-11-22T03:53:29.853
> 
> 标签：python, oop, inheritance, callback, static-members

所以我正在制作一个游戏，所有对象都派生自一个 GameObject 类，看起来像这样；

```
class GameObject(pygame.sprite.DirtySprite):
    actions = dict()

    def __init__(self):
        pygame.sprite.DirtySprite.__init__(self)
        self.rect  = None
        self.state = None

    def update(self):
        if callable(self.__class__.actions[self.state]):
        #If this key has a function for its element...
            self.__class__.actions[self.state](self) 
```

现在，我遇到了另一个继承问题。观察下面的类，以及派生自它的两个类；

```
class Bullet(gameobject.GameObject):
    FRAME  = pygame.Rect(23, 5, 5, 5)
    STATES = config.Enum('IDLE', 'FIRED', 'MOVING', 'RESET')

    def __init__(self):
        gameobject.GameObject.__init__(self)
        self.image = config.SPRITES.subsurface(self.__class__.FRAME)
        self.rect  = self.__class__.START_POS.copy()
        self.state = self.__class__.STATES.IDLE

    actions = {
               STATES.IDLE   : None        ,
               STATES.FIRED  : start_moving,
               STATES.MOVING : move        ,
               STATES.RESET  : reset       ,
              }

class ShipBullet(bullet.Bullet):
    SPEED     = -8
    START_POS = pygame.Rect('something')

    def __init__(self):
        super(self.__class__, self).__init__()
        self.add(ingame.PLAYER)

class EnemyBullet(bullet.Bullet):
    SPEED     = 2
    START_POS = pygame.Rect('something else')

    def __init__(self):
        super(self.__class__, self).__init__()
        self.add(ingame.ENEMIES) 
```

（请注意，是一个静态成员）的每个元素`Bullet.actions`除了`None`是一个包含在`Bullet`. `Bullet`不是要自己创建的；如果这是 C++，它将是一个抽象类。所以发生的事情是，`Bullet`的子类搜索`Bullet.actions`每一帧以决定下一步做什么，这取决于它们的状态（它们是否在移动，它们是否刚刚拍摄等）。但是，由于 的元素`Bullet.actions`是*自己的*`Bullet`方法，它的子类正在执行这些方法而不是它们自己的扩展版本（调用父方法）。由于内存使用原因，我不想复制这个回调字典。所以，我问这个；***我怎样才能让一个子类的实例通过它的充满回调方法的父字典来查看，如果存在则执行它们自己的版本，如果不存在则执行它们的父版本？***

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:08:27.617

一种可能的解决方案是存储函数的名称而不是直接引用并使用[`getattr`](http://docs.python.org/2/library/functions.html#getattr)来检索正确的引用：

```
actions = {
           STATES.IDLE   : None          ,
           STATES.FIRED  : 'start_moving',
           STATES.MOVING : 'move'        ,
           STATES.RESET  : 'reset'       ,
          }

[...]

def update(self):
    method_name = self.__class__.actions[self.state]
    if method_name and callable(getattr(self, method_name)):
        getattr(self, method_name)(self) 
```

为了加快速度，您可以在初始化对象时预先计算此表：

```
class Bullet(gameobject.GameObject):

    FRAME  = pygame.Rect(23, 5, 5, 5)
    STATES = config.Enum('IDLE', 'FIRED', 'MOVING', 'RESET')

    action_names = {
                     STATES.IDLE   : None          ,
                     STATES.FIRED  : 'start_moving',
                     STATES.MOVING : 'move'        ,
                     STATES.RESET  : 'reset'       ,
                    }

    def __init__(self):
        gameobject.GameObject.__init__(self)
        self.image = config.SPRITES.subsurface(self.__class__.FRAME)
        self.rect  = self.__class__.START_POS.copy()
        self.state = self.__class__.STATES.IDLE

        # Update actions table using getattr, so we get the correct
        # method for subclasses.
        self.actions = {}
        for state, method_name in self.action_names.items():
            if method_name and callable(getattr(self, method_name)):
                self.actions[state] = getattr(self, method_name)
            else:
                self.actions[state] = lambda self: None

    def update(self):
        self.actions[self.state]() 
```

请注意，由于`__init__`uses中的代码[`getattr`](http://docs.python.org/2/library/functions.html#getattr)，它可以放置在其他类中`Bullet.__init__`并仅由其他类扩展。由于您已经调用了超级构造函数，因此无需更改扩展类甚至注释它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T12:04:26.203

为什么不使用python内置机制进行继承？

派生类的实例函数`actions`是相同的`B`。它`self`在调用时获取实例，然后就像在实例本身上调用函数一样：Python 的继承机制调用`B`' 方法（如果存在）或回退到`A`' 实现。

*编辑：* l4mpi 建议指出这将每次创建地图，所以我将 action_map 更改为一个属性。

```
class A():
    def actions(self, action):
        if not hasattr(self, "actions_map"):
            self.actions_map = {
                   "IDLE"   : self.idle,
                   "FIRED"  : self.fired,
                   "MOVING" : self.move,
                   "RESET"  : self.reset,
                  }
        return self.actions_map[action]

    def idle(self):
        print "A idle"
        pass

    def fired(self):
        print "A fired"

    def move(self):
        print "A move"

    def reset(self):
        print "A reset"

class B(A):       
    def fired(self):
        print "B fired"

a = A()
b = B()

a.actions("FIRED")()
b.actions("FIRED")()
b.actions("MOVING")()

>> A fired
>> B fired
>> A move 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T15:05:39.993

扩展 BoppreH 的答案，您可以通过在创建类时使用正确的方法填充活动字典来摆脱`getattr`查找，使用这样的类装饰器：

```
def generateActions(cls):
    cls.actions = {}
    for a, f in cls.genactions.items():
        cls.actions[a] = getattr(cls, f) if f else lambda *_: None
    return cls 
```

请注意，`actions`如果动作的给定值为 ，则它填充了一个无操作的 lambda `None`，这意味着您可以`if callable(...)`在`update`.

现在您只需将装饰器添加到您的类中：

```
@generateActions
class Bullet(gameobject.GameObject):
    FRAME  = pygame.Rect(23, 5, 5, 5)
    STATES = config.Enum('IDLE', 'FIRED', 'MOVING', 'RESET')

    genactions = {
           STATES.IDLE   :  None         ,
           STATES.FIRED  : 'start_moving',
           STATES.MOVING : 'move'        ,
           STATES.RESET  : 'reset'       ,
          }
    ...

@generateActions
class ShipBullet(bullet.Bullet):
    ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T16:05:34.070

考虑为游戏对象定义一个类型类。

这是我的解决方案。我已经简化了所有与我在这里提出的观点无关的内容。

```
class GameObjectClass(type):
    """A metaclass for all game objects"""

    @staticmethod
    def find(key, bases, dict):
        """Find a member in the class dict or any of the bases"""
        if key in dict:
            return dict[key]
        for b in bases:
            attr = getattr(b, key, None)
            if attr is not None:
                return attr
        return None

    def __new__(mcs, name, bases, dict):
        actions = GameObjectClass.find('actions', bases, dict)
        actionsResolved = {}
        for key, methodname in actions.items():
            if methodname is None:
                actionsResolved[key] = None
            else:
                actionsResolved[key] = GameObjectClass.find(methodname, bases, dict)
        dict['actionsResolved'] = actionsResolved
        return type.__new__(mcs, name, bases, dict)

class GameObject(object):

    # This class and all its subclasses will have
    # GameObjectClass for a metaclass
    __metaclass__ = GameObjectClass
    actions = dict()

    def __init__(self):
        self.state = None

    def update(self):
        if callable(self.__class__.actionsResolved[self.state]):
            self.__class__.actionsResolved[self.state](self)

class Bullet(GameObject):
    STATES = config.Enum('IDLE', 'FIRED', 'MOVING', 'RESET')
    def __init__(self):
        super(Bullet, self).__init__()
        self.state = self.__class__.STATES.IDLE
    # Here, strings are used. They will be resolved to
    # references to actual methods (actionsResolved),
    # and this resolution will happen only once
    # (when the game object class is defined)
    actions = {
        STATES.IDLE: None,
        STATES.FIRED: 'start_moving',
        STATES.MOVING: 'move',
        STATES.RESET: 'reset'
    }
    def start_moving(self):
        print "Bullet.start_moving"
    def move(self):
        print "Bullet.move"
    def reset(self):
        print "Bullet.reset"

class ShipBullet(Bullet):
    # This one will be correctly used for the FIRED state
    def start_moving(self):
        print "ShipBullet.start_moving" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T12:47:48.557

也许我不太明白你想做什么..

据我了解，您有一个主要描述功能的类（A）和主要描述属性的类（B）。

您想从 B 类的实例调用 A 类的方法吗？

为什么不做这样的事情：

```
class Bullet(gameobject.GameObject):
    ...

class ShipBullet(bullet.Bullet):
    ABC = bullet.Bullet

    def somefunc(self):
        somekey = 5
        self.ABC.actions[somekey](self, *a, **kw)
        # or
        super(self.__class__, self).actions[somekey](self, *a, **kw)
        # or
        bullet.Bullet.actions[somekey](self, *a, **kw) 
```

您需要在动作定义中将 ref 添加到实例中，例如

```
def move(self, to_x, to_y): #as classic method
    ....
# or
def move(whom, to_x, to_y): #as "free-function"
    .... 
```*

# c# - 如何在具有不同返回类型的 Linq 表达式之间进行转换？

> ID：13505650
> 
> 赞同：9
> 
> 时间：2012-11-22T03:53:55.410
> 
> 标签：c#, .net, linq, expression-trees, linq-expressions

我在尝试转换以下 linq 表达式时感到头疼。

```
 Expression<Func<T, object>> 
```

到以下 linq 表达式...

```
 Expression<Func<T, U>> 
```

在上面的示例中，对象始终是类型`U`。

我知道在参数类型之间转换/转换是多么容易，但我不太确定如何在返回类型之间转换。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T13:21:51.960

您需要通过以下方式创建一个新表达式：

1.  使用[`Expression.Convert`](http://msdn.microsoft.com/en-us/library/bb292051.aspx)源表达式的主体来创建结果的主体。
2.  使用这个主体并重用源表达式的参数来创建转换后的 lambda 表达式[`Expression.Lambda`](http://msdn.microsoft.com/en-us/library/bb340145.aspx)。

尝试这个：

```
Expression<Func<T, object>> source = ...

var resultBody = Expression.Convert(source.Body, typeof(U));    
var result = Expression.Lambda<Func<T, U>>(resultBody, source.Parameters); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-02T08:09:57.773

我的案例是将接口输入类型转换为我的 MongoDB 通用存储库的具体类型。

我从

```
Expression<Func<TIModel, bool>> iFilter 
```

至

```
Expression<Func<TModel, bool>> filter 
```

我只是从 Ani 的回答中得到启发并转换为：

```
var filter = Expression.Lambda<Func<TModel, bool>>(iFilter.Body, iFilter.Parameters); 
```

# javascript - 浏览器返回按钮问题

> ID：13505651
> 
> 赞同：0
> 
> 时间：2012-11-22T03:53:56.753
> 
> 标签：javascript, logging, cookies, browser, browser-history

谁能帮我解决，浏览器后退按钮问题？当用户从浏览器历史列表中选择任何页面时，我想执行一些服务器端处理。例如，当您从应用程序注销时，当您单击后退按钮时，我不想显示他访问过的上一页。在我的项目中，我有一些其他页面需要刷新操作才能使页面处于一致状态。

为了解决这个问题，我尝试从代码中添加 cookie，并将 cookie 值设置为 false。并使用 Javascript 我正在检查该 cookie 值。如果它为假，那么什么都不做，重新加载页面。之后我将该cookie更改为true。但是当我更改cookie值时，我想更新现有cookie，但它正在插入一个新cookie。

这是修改我正在使用的cookie的脚本

```
document.cookie= c_name+ "=" + c_value;
               //c_name- CookieName ; c_value-Cookie value; 
```

这是正确的解决方案吗？或者有没有更好的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T04:36:44.727

希望我能正确理解您的问题。您是否真的试图禁用后退按钮缓存您的页面？

如果是这样，您需要添加以下 http 标头，以便浏览器不会缓存该页面。

`Cache-Control: no-cache, max-age=0, must-revalidate, no-store`

此外，关于处理站点登录，我认为您可能需要考虑使用 Sessions 而不是 Cookies。您只需在服务器上创建一些会话变量，这些变量可用于存储用户 ID、活动会话 ID 等，当页面加载时，您检查该会话值并查看它是否有效，以便您决定哪种类型的页面内容需要在客户端显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:53:04.593

首先感谢您帮助我。

最后我得到了解决方案。这是简单的解决方案

首先覆盖页面的渲染方法并在其中编写以下代码。

//插入Cookie避免Borwser后退按钮问题

```
if (Request.Cookies["loadedFromServer"] != null)
Response.Cookies.Set(Request.Cookies["loadedFromServer"]);
else
Response.Cookies.Set(new HttpCookie("loadedFromServer", ""));

Response.Cookies["loadedFromServer"].Value = "true"; 
```

并在母版页中编写以下脚本。

```
function ClearCookie() {
var CACHE_COOKIE = 'loadedFromServer';
var loadedFromServer = getCookie(CACHE_COOKIE) == 'true';
if (loadedFromServer.toString() == "false") {
location.reload();
}
document.cookie = CACHE_COOKIE + '=' + getCookie(CACHE_COOKIE) + '; expires=Thu, 01 Jan                            1970 00:00:01 UTC; path=/;';
}

function getCookie(c_name) {
var i, x, y, ARRcookies = document.cookie.split(";");
for (i = 0; i < ARRcookies.length; i++) {
x = (ARRcookies[i].substr(0, ARRcookies[i].indexOf("="))).trim();
y = (ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1)).trim();
x = x.replace(/^\s+|\s+$/g, "");
 if (x == c_name) {
return unescape(y);
}
}
 } 
```

并每次在母版页中调用该函数。

# java - BoxLayout 没有添加另一个 JPanel

> ID：13505652
> 
> 赞同：0
> 
> 时间：2012-11-22T03:54:08.587
> 
> 标签：java, swing, jpanel, boxlayout

我正在尝试在`JPanel`我的窗口中添加一秒钟，它使用`BoxLayout`. 出于某种原因，超出我的覆盖范围的所有内容都`JPanel`拒绝出现。

这是代码：

```
 public void initialize()
  {
    JFrame.setDefaultLookAndFeelDecorated(true);
    JFrame frame = new JFrame("Polygon Viewer");
    frame.setContentPane(makeGUI(frame));
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(600,700);
    frame.setLocationRelativeTo(null);
    frame.setResizable(false);
    frame.setVisible(true);
  }
  public JPanel makeGUI(final JFrame frame)
  {
    JPanel gui = new JPanel();
    gui.setLayout(new BoxLayout(gui,BoxLayout.PAGE_AXIS));

    class GraphPaint extends JPanel
    {
      public void paintComponent(Graphics g)
      {
        // Lots of graphics stuff
      }
    }

    GraphPaint mainG = new GraphPaint();
    mainG.setMinimumSize(new Dimension(600,600));
    mainG.setMaximumSize(new Dimension(600,600));
    mainG.setPreferredSize(new Dimension(600,600));
    gui.add(mainG);

    // Everything beyond here refuses to show up in the window

    JPanel lowerBar = new JPanel();
    lowerBar.setLayout(new BoxLayout(lowerBar,BoxLayout.LINE_AXIS));
    lowerBar.setMinimumSize(new Dimension(600,100));
    lowerBar.setPreferredSize(new Dimension(600,100));
    lowerBar.setBackground(Color.RED);
    gui.add(lowerBar);

    JPanel data = new JPanel();
    data.setLayout(new BoxLayout(data,BoxLayout.PAGE_AXIS));

    JLabel area = new JLabel("Area: <insert area here>");
    data.add(area);

    JLabel perimeter = new JLabel("Perimeter: " + shape.perimeter());
    data.add(perimeter);

    return gui;
  } 
```

我一定搞砸了`BoxLayout`设置，或者`BoxLayout`不能包含其他`JPanel`使用`BoxLayout`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T03:58:49.410

您永远不会将`data`面板添加到`gui`.

另外，请确保您正在调用`super.paintComponent(g)`（您已经注释掉了代码的那部分，所以我无法判断您是否正在这样做，但如果您不这样做可能会给您带来问题）

# java - OpenCSV - 如何将选定的列映射到 Java Bean 而不管顺序如何？

> ID：13505653
> 
> 赞同：30
> 
> 时间：2012-11-22T03:54:13.757
> 
> 标签：java, csv, opencsv, supercsv

我有一个包含以下列的 CSV 文件：`id`, `fname`, `telephone`, `lname`, `address`.

我有一个`Person`有`id`,`fname`和`lname`数据成员的类。我只想将这些列映射到`Person`CSV 文件中的对象并丢弃`telephone`和`address`列。我怎样才能做到这一点？随着将来添加更多列，该解决方案必须扩展。并且无论列位置如何都应该工作。

在理想的解决方案中，用户只会指定要读取的列，它应该可以正常工作。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-20T09:44:27.313

您可以使用[HeaderColumnNameTranslateMappingStrategy](http://opencsv.sourceforge.net/apidocs/au/com/bytecode/opencsv/bean/HeaderColumnNameTranslateMappingStrategy.html#getColumnMapping())。为简单起见，让我们假设您的 CSV 具有以下列：`Id`, `Fname`, `Telephone`, `Lname`, 。`Address`

```
CsvToBean<Person> csvToBean = new CsvToBean<Person>();

Map<String, String> columnMapping = new HashMap<String, String>();
columnMapping.put("Id", "id");
columnMapping.put("Fname", "fname");
columnMapping.put("Lname", "lname");

HeaderColumnNameTranslateMappingStrategy<Person> strategy = new HeaderColumnNameTranslateMappingStrategy<Person>();
strategy.setType(Person.class);
strategy.setColumnMapping(columnMapping);

List<Person> list = null;
CSVReader reader = new CSVReader(new InputStreamReader(ClassLoader.getSystemResourceAsStream("test.csv")));
list = csvToBean.parse(strategy, reader); 
```

columnMapping 将列与您的`Person`对象映射。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-01-12T13:41:36.997

OpenCSV 的最新版本弃用了该方法`parse(X, Y)`，并重新开始使用 BeanBuilder，因此最佳答案已过时。

```
try {
    CsvToBeanBuilder<PersonCSV> beanBuilder = new CsvToBeanBuilder<>(new InputStreamReader(new FileInputStream("your.csv")));

    beanBuilder.withType(PersonCSV.class);
    // build methods returns a list of Beans
    beanBuilder.build().parse().forEach(e -> log.error(e.toString()));

} catch (FileNotFoundException e) {
    log.error(e.getMessage(), e);
} 
```

此方法允许您清理代码并删除 MappingStrategy（如果您喜欢意大利面条，您仍然可以使用它），因此您可以如下注释您的 CSV 类：

```
@CsvDate("dd/MM/yyyy hh:mm:ss")
@CsvBindByName(column = "Time Born", required = true)
private Date birthDate; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-23T05:46:46.420

我不能代表 opencsv，但这很容易使用[Super CSV](http://super-csv.github.io/super-csv/index.html)实现，它有两个不同的[阅读器](http://supercsv.sourceforge.net/readers.html)，支持[部分阅读](http://supercsv.sourceforge.net/examples_partial_reading.html)（忽略列），以及读入 Javabean。`CsvDozerBeanReader`甚至能够进行[深度和基于索引的映射](http://supercsv.sourceforge.net/examples_dozer.html)，因此您可以映射到嵌套字段。

我们（Super CSV 团队）刚刚发布了 2.0.0 版，可从 Maven 中心或 SourceForge 获得。

**更新**

这是一个示例（基于您创建的 GitHub 项目中的测试），它使用 Super CSV 而不是 opencsv。请注意，CSV 首选项需要`surroundingSpacesNeedQuotes`启用标志，因为您的示例 CSV 文件无效（字段之间有空格 - 空格被视为 CSV 中数据的一部分）。

```
ICsvBeanReader beanReader = null;
try {
    beanReader = new CsvBeanReader(
            new InputStreamReader(
                    ClassLoader.getSystemResourceAsStream("test.csv")),
            new CsvPreference.Builder(CsvPreference.STANDARD_PREFERENCE)
                    .surroundingSpacesNeedQuotes(true).build());

    List<String> columnsToMap = Arrays.asList("fname", "telephone", "id");

    // read the CSV header (and set any unwanted columns to null)
    String[] header = beanReader.getHeader(true);
    for (int i = 0; i < header.length; i++) {
        if (!columnsToMap.contains(header[i])) {
            header[i] = null;
        }
    }

    Person person;
    while ((person = beanReader.read(Person.class, header)) != null) {
        System.out.println(person);
    }

} finally {
    beanReader.close();
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-05T09:22:52.567

使用[uniVocity-parsers](http://www.univocity.com/pages/parsers-tutorial)并完成它。列在输入 CSV 中的组织方式无关紧要，只会解析您需要的列。

如果写入，您在课堂上的列将被写入正确的列，而其他列将是空的。

这是一个带有一些示例的类：

```
class TestBean {

    // if the value parsed in the quantity column is "?" or "-", it will be replaced by null.
    @NullString(nulls = { "?", "-" })
    // if a value resolves to null, it will be converted to the String "0".
    @Parsed(defaultNullRead = "0")
    private Integer quantity;   // The attribute type defines which conversion will be executed when processing the value.

    @Trim
    @LowerCase
    // the value for the comments attribute is in the column at index 4 (0 is the first column, so this means fifth column in the file)
    @Parsed(index = 4)
    private String comments;

    // you can also explicitly give the name of a column in the file.
    @Parsed(field = "amount")
    private BigDecimal amount;

    @Trim
    @LowerCase
    // values "no", "n" and "null" will be converted to false; values "yes" and "y" will be converted to true
    @BooleanString(falseStrings = { "no", "n", "null" }, trueStrings = { "yes", "y" })
    @Parsed
    private Boolean pending;
} 
```

这是获取列表的方法`TestBean`

```
BeanListProcessor<TestBean> rowProcessor = new BeanListProcessor<TestBean>(TestBean.class);

CsvParserSettings parserSettings = new CsvParserSettings();
parserSettings.setRowProcessor(rowProcessor);
parserSettings.setHeaderExtractionEnabled(true);

CsvParser parser = new CsvParser(parserSettings);
parser.parse(getReader("/examples/bean_test.csv"));

List<TestBean> beans = rowProcessor.getBeans(); 
```

披露：我是这个库的作者。它是开源和免费的（Apache V2.0 许可证）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-11T05:15:15.380

在不需要写入 csv 文件的字段上方使用 @CsvIgnore 注释。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-24T16:54:12.633

使用 opencsv，您可以创建一个通用函数，例如：

```
public static <T> void csvWriterUtil(Class<T> beanClass, List<T> data, String outputFile, String[] columnMapping) {
    try {
        Writer writer = new BufferedWriter(new FileWriter(outputFile));
        ColumnPositionMappingStrategy<T> strategy = new ColumnPositionMappingStrategy<>();
        strategy.setType(beanClass);
        strategy.setColumnMapping(columnMapping);
        StatefulBeanToCsv<T> statefulBeanToCsv =new StatefulBeanToCsvBuilder<T>(writer)
                .withMappingStrategy(strategy)
                .build();
        writer.write(String.join(",",columnMapping)+"\n");
        statefulBeanToCsv.write(data);
        writer.close();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (CsvRequiredFieldEmptyException e) {
        e.printStackTrace();
    } catch (CsvDataTypeMismatchException e) {
        e.printStackTrace();
    }
} 
```

在这里，您只能通过 columnMapping 参数传递所需的列。

代码示例位于[https://github.com/soumya-kole/JavaUtils/tree/master/CsvUtil](https://github.com/soumya-kole/JavaUtils/tree/master/CsvUtil)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-01T14:35:18.610

这是一个使用 OpenCSV 映射到 POJO 的好方法：

```
protected <T> List<T> mapToCSV(String csvContent, Class<T> mapToClass) {
    CsvToBean<T> csvToBean = new CsvToBean<T>();

    Map<String, String> columnMapping = new HashMap<>();
    Arrays.stream(mapToClass.getDeclaredFields()).forEach(field -> {
        columnMapping.put(field.getName(), field.getName()); 
    });

    HeaderColumnNameTranslateMappingStrategy<T> strategy = new HeaderColumnNameTranslateMappingStrategy<T>();
    strategy.setType(mapToClass);
    strategy.setColumnMapping(columnMapping);

    CSVReader reader = new CSVReader(new StringReader(csvContent));
    return csvToBean.parse(strategy, reader);
}

public static class MyPojo {
    private String foo, bar;

    public void setFoo(String foo) {
        this.foo = foo;
    }

    public void setBar(String bar) {
        this.bar = bar;
    }
} 
```

然后从您的测试中，您可以使用：

```
List<MyPojo> list = mapToCSV(csvContent, MyPojo.class); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-26T09:11:59.707

[SimpleFlatMapper](https://simpleflatmapper.org/)可以使用 csv的标题或通过手动指定哪些列映射到哪些属性来轻松查看[csv 入门。](https://simpleflatmapper.org/0101-getting-started-csv.html#mapping-a-csv-to-an-object)

```
CsvParser
    .mapTo(MyObject.class)
    .forEach(file, System.out::println); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-25T22:27:57.917

看看 jcsvdao， [https://github.com/eric-mckinley/jcsvdao/](https://github.com/eric-mckinley/jcsvdao/)，使用休眠风格的映射文件，可以处理 1to1 和 1toMany 关系。如果您不拥有具有灵活匹配策略的 csv 文件，那就太好了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-05T12:35:27.783

jcvsdao 示例用法

示例用户 CSV 文件

```
Username, Email, Registration Date, Age, Premium User
Jimmy, jim@test.com, 04-05-2016, 15, Yes, M
Bob, bob@test.com, 15-01-2012, 32, No, M
Alice, alice@test.com, 22-09-2011, 24, No, F
Mike, mike@test.com, 11-03-2012, 18, Yes, M
Helen, helen@test.com, 02-12-2013, 22, Yes, F
Tom, tom@test.com, 08-11-2015, 45, No, M 
```

创建一个 CSVDao

```
CSVDaoFactory factory = new CSVDaoFactory("/csv-config.xml");
CSVDao dao = new CSVDao(factory);
List<UserDetail> users = dao.find(UserDetail.class); 
```

csv-config.xml

```
<CSVConfig>
    <mappingFiles fileType="resource">
        <mappingFile>/example01/mapping/UserDetail.csv.xml</mappingFile>
    </mappingFiles>
</CSVConfig> 
```

UserDetail.csv.xml

```
<CSVMapping className="org.jcsvdao.examples.example01.model.UserDetail" csvFile="csv-examples/example01/users.txt" delimiter="," ignoreFirstLine="true">
    <matchAll/>
    <properties>
        <property index="0" property="username" primaryKey="true"/>
        <property index="1" property="email"/>
        <property index="2" property="registrationDate" converter="myDateConverter"/>
        <property index="3" property="age"/>
        <property index="4" property="premiumUser" converter="yesNoConverter"/>
        <property index="5" property="gender" converter="myGenderConverter"/>
    </properties>
    <converters>
        <dateConverter converterName="myDateConverter" format="dd-MM-yyyy"/>
        <booleanConverter converterName="yesNoConverter" positive="Yes" negative="No"/>
        <customConverter converterName="myGenderConverter" converterClass="org.jcsvdao.examples.example01.converter.GenderCustomerConverter"/>
    </converters>
</CSVMapping> 
```

# android - android 2.3.3 模拟器 - moveTasToBack(true) 后的 classnotfoundexception 并重新打开

> ID：13505654
> 
> 赞同：-1
> 
> 时间：2012-11-22T03:54:17.233
> 
> 标签：android

我的模拟器中运行了一个单一活动的应用程序。有一个菜单项“关闭”，它调用 moveTaskToBack(true); 这工作正常。但是，当我单击应用程序的图标重新打开活动时，我得到一个 ClassNotFoundException，因为它说它找不到活动。这在我的其他应用程序中从未发生过。是模拟器问题还是我的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:15:17.647

好的，不知何故，我的应用程序在我的模拟器上安装了两次。一个图标有效，一个无效。感谢您的回复！

# knockout.js - MVC 4 淘汰赛表列表

> ID：13505655
> 
> 赞同：3
> 
> 时间：2012-11-22T03:54:17.283
> 
> 标签：knockout.js, asp.net-mvc-4, knockout-mapping-plugin

我一直在尝试遵循 Knockout.js 的教程，以便在我的视图中呈现表格。我的控制器正在检索作为 IEnumerable 类型的记录列表并发送到视图。我正在尝试让 Knockout 映射工作以在 HTML 表中显示我的记录。

我的模型看起来像：

```
public class ImportItem
{
    public string LName { get; set; }
    public string FName { get; set; }
    public string HPhone { get; set; }
    public string EMailAddress { get; set; }
    public string OtherPhone { get; set; }
} 
```

我似乎无法将 IEnumerable 传递给视图，甚至无法获得一个仅显示 LName 和 FName 的简单表。有没有人有任何我可以查看的使用敲除映射的示例代码？

**下面解决了**

在我的视图顶部，我添加了：

```
@model IEnumerable<MyProject.Models.ImportItem>
@{    
    var jsonData = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model));
} 
```

我的JavaScript：

```
$(function () {
        var viewModelJSON = ko.mapping.fromJSON('@Html.Raw(jsonData)');

        ko.applyBindings(viewModelJSON);
    }); 
```

我的 html 绑定，**$data**最终成为引用未命名数组的关键：

```
<table>
  <thead><tr>
    <th>Last Name</th>
  </tr></thead>
  <tbody data-bind="foreach: $data">
    <tr>
      <td data-bind="text: LName"></td>
    </tr>    
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:33:41.390

映射插件旨在从 javascript (JSON) 对象映射。您可以做的是在控制器中，将您需要发送的所有数据序列化为 JSON 字符串，并将其设置为您发送到视图的模型的属性：

```
public class MyModel
{
    public string JsonData { get; set; }
} 
```

生成数据后，您可以使用序列化程序（很多存在，在下面的示例中我使用[Json.NET](http://james.newtonking.com/pages/json-net.aspx)）将其转换为 JSON 字符串。

```
model.JsonData = JsonConvert.SerializeObject(importItems); 
```

然后在您看来，您可以使用映射插件来映射您的 JSON 对象，使用[json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)解析字符串并将其转换为 JSON。

```
<script type="text/javascript">
    var viewModel = ko.mapping.fromJS($.parseJSON('@Html.Raw(Model.JsonData)'));
    ko.applyBindings(viewModel);
</script> 
```

或者，您可以`IEnumerable`按照您在问题中的相同方式将您的模型发送到视图，并在执行 javascript 解析和映射之前在视图中（而不是在控制器中）使用 Razor 对它们进行序列化。如果您想尽可能严格地遵循 MVC 模式，这可能是更好的方法。

因此，在该`<script>`块之前，您可以打开一个剃刀代码块并声明一个变量来保存序列化的 IEnumerable，如下所示：

```
@{
    string jsonData = JsonConvert.SerializeObject(Model);
} 
```

然后在 javascript 块中：

```
var viewModel = ko.mapping.fromJS($.parseJSON('@Html.Raw(jsonData)')); 
```

要知道将`data-bind="foreach ..."`标签绑定到哪些属性，您可能需要在 javascript 中进行一些调试以检查 viewModel 对象并查看映射插件如何准确映射您的`IEnumerable<ImportItems>`. 我只用一个模型做过这个，所以我真的不确定会发生什么。

# java - 如何从java中的字节偏移量获取源代码的行号？

> ID：13505657
> 
> 赞同：2
> 
> 时间：2012-11-22T03:54:39.480
> 
> 标签：java, bytecode, bytecode-manipulation, .class-file, bcel

我正在操作一个 .class 文件。我正在使用[InstrutionHandle](http://commons.apache.org/bcel/apidocs/org/apache/bcel/generic/InstructionHandle.html#getPosition%28%29)包来一次获取一个说明。我通过[getPosition()](http://commons.apache.org/bcel/apidocs/org/apache/bcel/generic/InstructionHandle.html#getPosition%28%29)方法获得了指令的字节偏移量，我可以从字节偏移量中获取源行号吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:43:06.247

这取决于类文件是否使用调试信息进行编译。通常，编译器会插入一个`LineNumberTable`属性，该属性给出与每个字节码范围相对应的原始源代码行号。但是，该`LineNumberTable`属性只是元数据，因此作者可以将任何他们想要的内容放在那里，但有较小的限制，或者完全省略它。（通常通过编译`-g: none`或在其上运行混淆器来完成）

无论如何，属性的格式是整数个数（2 个字节），后跟（起始 pc，行号）对（都是 2 个字节）。你也可以有多个`LineNumberTable`属性。当然，如果您使用的是库，它可能已经为您解码了这些内容。

# python - 查找在某些情况下需要少于 O(m+n) 次比较的两个排序数组的交集

> ID：13505658
> 
> 赞同：6
> 
> 时间：2012-11-22T03:54:52.400
> 
> 标签：python, performance, algorithm

这是在`O(m+n)`where`m`和`n`are 两个数组的长度中执行此操作的一种方法：

```
import random

def comm_seq(arr_1, arr_2):
    if len(arr_1) == 0 or len(arr_2) == 0:
        return []

    m = len(arr_1) - 1
    n = len(arr_2) - 1

    if arr_1[m] == arr_2[n]:
        return comm_seq(arr_1[:-1], arr_2[:-1]) + [arr_1[m]]

    elif arr_1[m] < arr_2[n]:
        return comm_seq(arr_1, arr_2[:-1])

    elif arr_1[m] > arr_2[n]:
        return comm_seq(arr_1[:-1], arr_2)

if __name__ == "__main__":
    arr_1 = [random.randrange(0,5) for _ in xrange(10)]
    arr_2 = [random.randrange(0,5) for _ in xrange(10)]
    arr_1.sort()
    arr_2.sort()
    print comm_seq(arr_1, arr_2) 
```

是否有一种在某些情况下使用少于`O(m+n)`比较的技术？例如：`arr_1=[1,2,2,2,2,2,2,2,2,2,2,100]`和`arr_2=[1,3,100]`

（不寻找哈希表实现）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T04:08:39.717

二分查找算法需要`O(logm)`时间才能在长度为 m 的数组中找到一个数。因此，如果我们从长度为 m 的数组中搜索长度为 n 的数组的每个数，其总时间复杂度为`O(nlogm)`。**如果 m 远大于 n**，`O(nlogm)`则实际上小于`O(m+n)`。因此，我们可以在这种情况下实现基于二分查找的新的更好的解决方案。[资源](http://codercareer.blogspot.pt/2011/11/no-24-intersection-of-sorted-arrays.html)

然而，这并不一定意味着在 O(m+n) 的情况下二分查找比 O(m+n) 更好。事实上，只有当 n << m（n 与 m 相比，n 非常小）时，二分查找方法才更好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T04:23:52.790

据我所知，有几种不同的方法可以解决这个问题，***但没有一个比 O(m + n) 更好***。我不知道你怎么能有比这更快的算法（除非奇怪的量子计算答案），因为你必须比较两个数组中的所有元素，否则你可能会错过重复。

**蛮力** 使用两个嵌套的 for 循环。从第一个数组中取出每个元素并在第二个数组中线性搜索它。**O(M*N) 时间，O(1) 空间**

**映射查找** 使用哈希表或二叉搜索树等查找结构。将所有第一个数组放入映射结构中，然后遍历所有第二个数组并查找映射中的每个元素以查看它是否存在。无论数组是否排序，这都有效。**二叉搜索树时间为 O(M*log(M) + N*log(M)) 或 Hashtable 时间为 O(M + N) 时间，两者都是 O(M) 空间。**

**二进制搜索** 类似于蛮力，但从第一个数组中获取每个元素并在第二个数组中对其进行二进制搜索。 **O(m*log(N)) 时间，O(1) 空间**

**Parallel Walk** 类似于归并排序的归并部分。有两个指针从每个数组的前面开始。比较这两个元素，如果它们相等，则存储重复项，否则将指针指向较小的值一个点并重复，直到到达其中一个数组的末尾。**O(M + N) 时间，O(1) 空间**

无论如何，您***必须***检查两个数组中的每个元素，否则您将不知道是否找到了所有重复项。您可能会争论一个数组更大或更小的边缘情况，但这不适用于您正在考虑所有输入范围的算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T08:44:42.400

如果您使用单边和正常二分搜索的组合，则可以使用具有 O(N*log(M/N)) 比较的算法。在最坏的情况下（当两个数组大小相等时），这等于 O(N) = O(M + N) 比较。这里 M 是最大数组的大小，N 是较小数组中不同元素的数量。

获取两个数组中最小的一个，并在第二个数组中搜索它的每个元素。从单边二分搜索开始：尝试位置 M/N、2*M/N、4*M/N...，直到找到大于所需的元素。然后使用正常的二进制搜索来查找位置 0 和 2 ^k *M/N 之间的元素。

如果找到匹配元素，则使用单边和正常二分查找的相同组合来查找重复匹配元素的运行在哪里结束，并将适当数量的匹配元素复制到输出。您可以使用相同的二进制搜索组合来计算较小数组中重复元素的数量，并获取这些重复计数中的最小值以确定结果中应包含多少元素。

要继续处理较小数组中的下一个元素，请使用较大数组中的起始位置，上一步结束的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T04:19:05.470

您可以使用 hash_table 保存大数组，然后扫描另一个小数组以计算两个数组的交集。

```
import random

def comm_seq(arr_1, arr_2):
    if len(arr_1) < len(arr_2): arr_1, arr_2 = arr_2, arr_1
    cnt = {}
    for item in arr_1: 
        cnt.setdefault(item, 0)
        cnt[item] += 1
    # save the large array in a hash_table
    ret = []
    for item in arr_2:
        p = cnt.get(item, 0)
        if p: 
            ret.append(item):
            cnt[item] -= 1
    # scan the small array and get the answer
    return ret

if __name__ == "__main__":
    arr_1 = [random.randrange(0,5) for _ in xrange(10)]
    arr_2 = [random.randrange(0,5) for _ in xrange(10)]
    arr_1.sort()
    arr_2.sort()
    print comm_seq(arr_1, arr_2) 
```

如果我们将 py 字典的复杂度视为 O(1)，则总复杂度为 O(min(n, m))

# selenium - Selenium webdriver C# CSS dropdown 问题 - 元素应该被选中但是 div

> ID：13505660
> 
> 赞同：3
> 
> 时间：2012-11-22T03:55:41.793
> 
> 标签：selenium, selenium-webdriver

我有一个如下的html代码。

```
<div class="rowElem fullSize ">
<div class="jqTransformSelectWrapper" style="z-index: 10; width: 276px;">
<div>
<span style="width: 245px;">MasterCard</span>
<a class="jqTransformSelectOpen" href="#"/>
</div>
<ul style="width: 274px; display: none; visibility: visible; height: 100px; overflow: hidden;">
<li><a class="selected" index="0" href="#">MasterCard</a></li>
<li><li><li>
</ul>
<select id="CardProvider" class="jqTransformHidden" name="CardKey" style="">
<option value="1">MasterCard</option>
<option value="2">VISA</option>
<option value="3">AMEX</option>
<option value="4">DEBIT</option>
</select>
</div>
</div> 
```

在这里，这是一个下拉菜单，其中 //div/div/div 仅显示一个字段。//div/div/ul 有四个单独的 li，它们具有与 select 标签相同的提供者输入。

我尝试了很多组合来从下拉列表中选择一个特定的值。

如果我将 //div/div[@select[id="CardProvider"] 与 FindElement 一起使用，它会返回第一个值。

如果我使用 //div/div/[@select[id]"cardProvider"]/ul//a - 它返回给我四个值。

但是我无法选择菜单作为预期的标签选择，而是 div。如果我编写一个查询以将标记名作为选择，则文本值返回为 null。

我没有给出我的 selenium 命令，因为没有任何效果，并给出了 html 供您参考。请向我提供您的意见以克服这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T05:15:37.710

如果可以避免这些，您可以尝试避免相对 xpath。在您的 html 中，select 元素有一个唯一标识符，即 id，可以使用它。

您可以尝试以下方法：

```
Select sel = new Select(driver.findElementById("CardProvider"));
sel.selectByVisibleText - there are options here to select by index, visible text and value - choose any which you think would be stable. 
```

你可以参考[这个](http://seleniumhq.org/docs/03_webdriver.html#user-input-filling-in-forms)了解更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:41:47.107

我只是采用了一种不同的方法（一种解决方法），有两个 xpath 来定位它，它工作正常。

我使用的代码是

```
Driver.FindElement(By.XPath(XPATH1ofCSSDROPDOWN)).Click();
            Driver.Wait(3000); 
            Driver.FindElement(By.XPath(XPATH2ofDROPDOWNLISTELEMENT)).Click(); 
```

其中 XPATH2ofDROPDOWNLISTELEMENT = //*[@id='frmForm']//a[contains(text(), 'MasterCard')]

如果您有任何答案，除了黑板上提到的答案，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:36:45.660

坦率地说，我更喜欢使用 css 选择器。 **第一种方法：**

```
String cssSelect="select[id='CardProvider']";
String cssMasterCard="select[id='CardProvider']>option[value='1']";
String cssVISA="select[id='CardProvider']>option[value='2']";

driver.findElement(By.cssSelector(cssSelect)).click();
driver.manage().timeouts().implicitlyWait(2,TimeUnit.SECONDS);
//clicking on e.g. MasterCard option
driver.findElement(By.cssSelector(cssMasterCard)).click(); 
```

**第二种方法：** 如果支持 jQuery，您可以直接单击菜单选项，而无需之前单击菜单下拉菜单：

```
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x=$(\'"+cssMasterCard+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString()); 
```

**第三种方法** 点击使用 DOM 模型：

```
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("document.getElementsByTagName('option')[0].click()");
        js.executeScript(stringBuilder.toString()); 
```

并且不要忘记验证在 firebug 中找到的 xPaths 或 css 选择器，在 firefox 中的 firebug 插件：

![在此处输入图像描述](../Images/a14e647652af03bb8e8382605cc61ead.png)

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-30T13:08:02.433

以下解决方案在没有选择的情况下实现下拉的情况下效果最好

1.  点击下拉图标
2.  等待列表填充
3.  现在在清单上工作

driver.findElements(By.xpath("//div[@class='dropdown-menu']/div[@class='dropdown-menu-item']")).get(0).getText().equals （“选项1”）

您需要将所有菜单项都放在循环中，并且可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-18T10:12:07.157

1.  点击图标
2.  元素列表暴露给 Selenium
3.  选择其中之一

我在我的代码中遇到了类似的问题，上述步骤修复了它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-01T06:03:59.997

```
String cssSelect="select[class='filerTableSelect']";
    String cssBetween="select[class='filerTableSelect']>option[value='BETWEEN']";
    driver.findElement(By.cssSelector(cssSelect)).click();
    driver.findElement(By.cssSelector(cssBetween)).click(); 
```

像魅力一样工作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-04T09:58:13.167

首先检查：您的 UI/FrontEnd 中的下拉菜单是否使用“选择”方法？如果没有，则使用下面的代码段，该代码段将单击下拉菜单并选择值。

WebElement selectMyElement = driver.findElement(this.getObject(By.Id("你的 DropDown 的 ID"))); selectMyElement.click();

```
 Actions keyDown = new Actions(driver);
        keyDown.sendKeys(Keys.chord(Keys.DOWN, Keys.DOWN)).perform(); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-22T06:06:11.503

你可以试试这个：

```
IWebElement dropDownListBox = driver.findElement(By.Id("CardProvider"));
SelectElement clickThis = new SelectElement(dropDownListBox);
clickThis.SelectByText("MasterCard");
clickThis.SelectByText("VISA");
clickThis.SelectByText("AMEX");
clickThis.SelectByText("DEBIT"); 
```

# android - 当我在不同的设备上尝试时，应用程序内的相机强制关闭数据为空

> ID：13505662
> 
> 赞同：2
> 
> 时间：2012-11-22T03:56:20.637
> 
> 标签：android, android-intent, nullpointerexception, android-camera, android-sdcard

我有一个 apk 应用程序，可以通过按钮拍照和拍摄视频。

这是我的活动

```
package com.example.testcamera;

import java.io.File;
import java.text.SimpleDateFormat;
import java.util.Date;

import android.app.Activity;
import android.content.ContentValues;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;

public class AndroidCameraTestsActivity extends Activity 
{
    private static final String TAG = AndroidCameraTestsActivity.class.getSimpleName(); 

    private static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;
    private static final int CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE = 200;
    public static final int MEDIA_TYPE_IMAGE = 1;
    public static final int MEDIA_TYPE_VIDEO = 2;

    private Uri fileUri;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    /** 
     * https://developer.android.com/guide/topics/media/camera.html 
     * **/
    public void onCaptureImage(View v) 
    {
        // give the image a name so we can store it in the phone's default location
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());

        ContentValues values = new ContentValues();
        values.put(MediaStore.Images.Media.TITLE, "IMG_" + timeStamp + ".jpg");

        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

        //fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE); // create a file to save the image (this doesn't work at all for images)
        fileUri = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values); // store content values
        intent.putExtra( MediaStore.EXTRA_OUTPUT,  fileUri);

        // start the image capture Intent
        startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
    }

    /** 
     * https://developer.android.com/guide/topics/media/camera.html 
     * **/
    public void onCaptureVideo(View v) 
    {
         //create new Intent
        Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);

        //fileUri = getOutputMediaFileUri(MEDIA_TYPE_VIDEO);  // create a file to save the video in specific folder (this works for video only)
        //intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);  // set the image file name

        intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1); // set the video image quality to high

        // start the Video Capture Intent
        startActivityForResult(intent, CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
            if (resultCode == RESULT_OK) {

                // Originally I was going to iterate through the list of images and grab last added to the MediaStore.
                // But this is not necessary if we store the Uri in the image
                /*
                String[] projection = {MediaStore.Images.ImageColumns._ID};
                String sort = MediaStore.Images.ImageColumns._ID + " DESC";

                Cursor cursor = this.managedQuery(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, projection, null, null, sort);

                try{
                    cursor.moveToFirst();
                    Long id = cursor.getLong(cursor.getColumnIndexOrThrow(MediaStore.Images.ImageColumns._ID));
                    fileUri = Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, String.valueOf(id));
                } finally{
                    cursor.close();
                }
                */

                if(fileUri != null) {
                    Log.d(TAG, "Image saved to:\n" + fileUri);
                    Log.d(TAG, "Image path:\n" + fileUri.getPath());
                    Log.d(TAG, "Image name:\n" + getName(fileUri)); // use uri.getLastPathSegment() if store in folder
                }

            } else if (resultCode == RESULT_CANCELED) {
                // User cancelled the image capture
            } else {
                // Image capture failed, advise user
            }
        }

        if (requestCode == CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE) {
            if (resultCode == RESULT_OK) {

                // Video captured and saved to fileUri specified in the Intent
                fileUri = (Uri) data.getData();

                if(fileUri != null) {
                    Log.d(TAG, "Video saved to:\n" + fileUri);
                    Log.d(TAG, "Video path:\n" + fileUri.getPath());
                    Log.d(TAG, "Video name:\n" + getName(fileUri)); // use uri.getLastPathSegment() if store in folder
                }

            } else if (resultCode == RESULT_CANCELED) {
                // User cancelled the video capture
            } else {
                // Video capture failed, advise user
            }
        }
    }

    /** Create a file Uri for saving an image or video to specific folder
     * https://developer.android.com/guide/topics/media/camera.html#saving-media
     * */
    private static Uri getOutputMediaFileUri(int type)
    {
          return Uri.fromFile(getOutputMediaFile(type));
    }

    /** Create a File for saving an image or video */
    private static File getOutputMediaFile(int type)
    {
        // To be safe, you should check that the SDCard is mounted

        if(Environment.getExternalStorageState() != null) {
            // this works for Android 2.2 and above
            File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "AndroidCameraTestsFolder");

            // This location works best if you want the created images to be shared
            // between applications and persist after your app has been uninstalled.

            // Create the storage directory if it does not exist
            if (! mediaStorageDir.exists()) {
                if (! mediaStorageDir.mkdirs()) {
                    Log.d(TAG, "failed to create directory");
                    return null;
                }
            }

            // Create a media file name
            String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
            File mediaFile;
            if (type == MEDIA_TYPE_IMAGE){
                mediaFile = new File(mediaStorageDir.getPath() + File.separator +
                "IMG_"+ timeStamp + ".jpg");
            } else if(type == MEDIA_TYPE_VIDEO) {
                mediaFile = new File(mediaStorageDir.getPath() + File.separator +
                "VID_"+ timeStamp + ".mp4");
            } else {
                return null;
            }

            return mediaFile;
        }

        return null;
    }

    // grab the name of the media from the Uri
    protected String getName(Uri uri) 
    {
        String filename = null;

        try {
            String[] projection = { MediaStore.Images.Media.DISPLAY_NAME };
            Cursor cursor = managedQuery(uri, projection, null, null, null);

            if(cursor != null && cursor.moveToFirst()){
                int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DISPLAY_NAME);
                filename = cursor.getString(column_index);
            } else {
                filename = null;
            }
        } catch (Exception e) {
            Log.e(TAG, "Error getting file name: " + e.getMessage());
        }

        return filename;
    }
} 
```

我有第一台运行该应用程序的设备，我有 2 个按钮`take photo`和`take video`.

当我点击`take video`这个应用程序并且它运行良好但是当我`take picture`从按钮点击时，应用程序总是“强制关闭”。

这是我的错误日志

```
11-19 14:43:27.085: ERROR/AndroidRuntime(6903): FATAL EXCEPTION: main
11-19 14:43:27.085: ERROR/AndroidRuntime(6903): java.lang.NullPointerException
11-19 14:43:27.085: ERROR/AndroidRuntime(6903): at com.android.camera.Camera.initializeFirstTime(Came ra.java:328)
11-19 14:43:27.085: ERROR/AndroidRuntime(6903): at com.android.camera.Camera.access$1100(Camera.java: 95)
11-19 14:43:27.085: ERROR/AndroidRuntime(6903): at com.android.camera.Camera$MainHandler.handleMessag e(Camera.java:282)
11-19 14:43:27.085: ERROR/AndroidRuntime(6903): at android.os.Handler.dispatchMessage(Handler.java:99 )
11-19 14:43:27.085: ERROR/AndroidRuntime(6903): at android.os.Looper.loop(Looper.java:130)
11-19 14:43:27.085: ERROR/AndroidRuntime(6903): at android.app.ActivityThread.main(ActivityThread.jav a:3683)
11-19 14:43:27.085: ERROR/AndroidRuntime(6903): at java.lang.reflect.Method.invokeNative(Native Method)
11-19 14:43:27.085: ERROR/AndroidRuntime(6903): at java.lang.reflect.Method.invoke(Method.java:507)
11-19 14:43:27.085: ERROR/AndroidRuntime(6903): at com.android.internal.os.ZygoteInit$MethodAndArgsCa ller.run(ZygoteInit.java:839)
11-19 14:43:27.085: ERROR/AndroidRuntime(6903): at com.android.internal.os.ZygoteInit.main(ZygoteInit .java:597)
11-19 14:43:27.085: ERROR/AndroidRuntime(6903): at dalvik.system.NativeStart.main(Native Method)
11-19 14:43:27.093: WARN/ActivityManager(1308): Force finishing activity com.android.camera/.Camera
11-19 14:43:27.109: WARN/ActivityManager(1308): Force finishing activity makemachine.android.examples/.PhotoCaptureExample 
```

![logcat 捕获](../Images/e538136b8eaf8a43b06410a563ee70c1.png)

编辑：这是我使用单个应用程序按钮的不同活动

```
package com.example.maincamera;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;

public class OpenCameraDemo extends Activity {

    private static final int CAMERA_PIC_REQUEST = 2500;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button b = (Button)findViewById(R.id.Button01);
        b.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                 Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                 startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
            }
        });
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAMERA_PIC_REQUEST) {
              Bitmap image = (Bitmap) data.getExtras().get("data");
              ImageView imageview = (ImageView) findViewById(R.id.ImageView01);
              imageview.setImageBitmap(image);
        }
    }
} 
```

这个应用程序仍然错误，我尝试了很多应用程序。在google中搜索。错误仍然像我的logcat错误一样

当我尝试在其他设备上运行它时，这个应用程序运行良好。

如何解决这个问题，以便我可以在我的第一台设备上运行和拍照？

BR。

亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T18:39:21.237

崩溃发生在设备的相机应用程序中，而不是您自己的。不幸的是，由于此设备上的相机应用程序可能是 AOSP 中实际内容的高度自定义变体，因此尚不完全清楚故障是什么，但[这里有一个指向](https://github.com/android/platform_packages_apps_camera/blob/gingerbread-mr4-release/src/com/android/camera/Camera.java)AOSP 2.3.7 源代码树中源文件的链接，您的正在发生异常。行号与任何感兴趣的东西都不完全匹配，这告诉我你的特定设备上的应用程序至少已经定制了一些。

方法中的任何对象`initializeFirstTime()`，发生异常的地方，调用方法的地方都可能是问题的根源，但这与`Intent`您的请求传入的参数无关，因此值得怀疑的是，您可以做很多事情这操作得当。

因此，您自己在自己的应用程序中实现捕获功能可能会更好。此设备上的 Android API 可能比它捆绑的系统应用程序更稳定。 [这是一个](http://marakana.com/forums/android/examples/39.html)如何创建自己的相机预览和捕获活动的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:25:35.740

感谢@Devunwired，感谢@chintan，感谢大家对我的帮助。我使用相机 api，它可以工作。

这是我的活动

```
package com.exercise.AndroidCamera;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.OutputStream;

import android.app.Activity;
import android.content.ContentValues;
import android.content.res.Configuration;
import android.graphics.PixelFormat;
import android.hardware.Camera;
import android.hardware.Camera.PictureCallback;
import android.hardware.Camera.ShutterCallback;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore.Images.Media;
import android.util.Log;
import android.view.Display;
import android.view.LayoutInflater;
import android.view.Surface;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.Toast;

public class AndroidCamera extends Activity implements SurfaceHolder.Callback{

    Camera camera;
    SurfaceView surfaceView;
    SurfaceHolder surfaceHolder;
    boolean previewing = false;
    LayoutInflater controlInflater = null;

    final int RESULT_SAVEIMAGE = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);

    }
        public void onCaptureImage(View v) 
        {

        setContentView(R.layout.main);

        Toast.makeText(AndroidCamera.this, 
                "Image dimulai : ", 
                Toast.LENGTH_LONG).show();
        getWindow().setFormat(PixelFormat.UNKNOWN);

        surfaceView = (SurfaceView)findViewById(R.id.camerapreview);
        surfaceHolder = surfaceView.getHolder();
        surfaceHolder.addCallback(this);
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        controlInflater = LayoutInflater.from(getBaseContext());
        View viewControl = controlInflater.inflate(R.layout.control, null);
        LayoutParams layoutParamsControl 
            = new LayoutParams(LayoutParams.FILL_PARENT, 
            LayoutParams.FILL_PARENT);
        this.addContentView(viewControl, layoutParamsControl);

        Button buttonTakePicture = (Button)findViewById(R.id.takepicture);
        buttonTakePicture.setOnClickListener(new Button.OnClickListener(){

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                camera.takePicture(myShutterCallback, 
                        myPictureCallback_RAW, myPictureCallback_JPG);

            }});
    }

    ShutterCallback myShutterCallback = new ShutterCallback(){

        @Override
        public void onShutter() {
            // TODO Auto-generated method stub

        }};

    PictureCallback myPictureCallback_RAW = new PictureCallback(){

        @Override
        public void onPictureTaken(byte[] arg0, Camera arg1) {
            // TODO Auto-generated method stub

        }};

    PictureCallback myPictureCallback_JPG = new PictureCallback(){

        @Override
        public void onPictureTaken(byte[] arg0, Camera arg1) {
            // TODO Auto-generated method stub
            /*Bitmap bitmapPicture 
                = BitmapFactory.decodeByteArray(arg0, 0, arg0.length);  */

            Uri uriTarget = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, new ContentValues());

            OutputStream imageFileOS;
            try {
                imageFileOS = getContentResolver().openOutputStream(uriTarget);
                imageFileOS.write(arg0);
                imageFileOS.flush();
                imageFileOS.close();

                Toast.makeText(AndroidCamera.this, 
                        "Image Tersimpan: " + uriTarget.toString(), 
                        Toast.LENGTH_LONG).show();

            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            /*controlInflater = LayoutInflater.from(getBaseContext());
            View viewControl = controlInflater.inflate(R.layout.confirm, null);
            LayoutParams layoutParamsControl 
                = new LayoutParams(LayoutParams.FILL_PARENT, 
                LayoutParams.FILL_PARENT);
            this.addContentView(viewControl, layoutParamsControl);*/

        }};

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub
        if(previewing){
            camera.stopPreview();
            previewing = false;
        }

        if (camera != null){
            try {

                camera.setPreviewDisplay(surfaceHolder);
                camera.startPreview();
                previewing = true;
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {

        camera = Camera.open();
        //m_camera = Camera.open();
        /*Camera.Parameters p = camera.getParameters();

        //camera.setDisplayOrientation(90);
        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)
        {   
            p.set("orientation", "portrait");
            p.set("rotation",90);
        }
        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE)
        {                               
            p.set("orientation", "landscape");          
            p.set("rotation", 90);
        }*/

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        camera.stopPreview();
        camera.release();
        camera = null;
        previewing = false;
    }
} 
```

我创建 home.xml 来显示按钮图像，就像我的问题一样

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button android:text="Capture Image" android:onClick="onCaptureImage" 
        android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>
</LinearLayout> 
```

main.xml 这是一个相机预览

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<SurfaceView
    android:id="@+id/camerapreview"  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    />
</LinearLayout> 
```

并在相机预览中创建 control.xml 拍照按钮。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="bottom"
    >
<Button
    android:id="@+id/takepicture"  
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:text=" * Ambil Foto " 
    android:layout_gravity="right"
    android:layout_margin="10px"
    />

</LinearLayout> 
```

但我在这个应用程序中有 2 个问题。

1.  相机分辨率不是全尺寸。-+20kb
2.  拍照时预览旋转 90 度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T03:18:03.670

我对你的手机很好奇。他们有什么不同

因为您的**onCaptureImage(View v)**确实描述了外部存储。但**onCaptureVideo(View v)**没有

> 1.  电话打不通。支持外接sd卡吗？如果不是，你所有的代码都是关于 ext.sd
>     
>     
> 2.  是你的手机不工作它偶尔会删除sd卡吗？尝试将其连接为相机或 mtp

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T04:39:16.090

朋友做一件事。

制作只有一个按钮的简单应用程序。`onClick`事件照片应该是捕获没有添加其他任务。

它工作正常吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T12:13:46.563

尝试捕获异常并在此处发布消息：

```
try{
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
}
catch(ActivityNotFoundException e){
e.printStackTrace();
} 
```

# html - HTML - 与同一行上的文本和图像链接？

> ID：13505663
> 
> 赞同：3
> 
> 时间：2012-11-22T03:56:34.973
> 
> 标签：html, css

嘿大家我有一个奇怪的问题，我认为有一个简单的解决方案，但我在这里不知所措，我已经尝试了我能想到的一切！我有一个包含文本和图像的链接，并且图像应与同一行上的文本对齐。但是，图像转到下一行，我找不到解决此问题的方法！我的代码是：

```
<div id="container" style="padding: 5px">
  <a href="page.php">Username<img src="arrow.png"></a>
</div> 
```

为了使问题复杂化，我有一个 JS 函数，它改变了“容器”div onmouseover 的背景颜色。因此我不能对*a img*使用绝对定位，因为它会将它移到改变颜色的区域之外。我已经包括了一个截图：

![在此处输入图像描述](../Images/0494bea9adec7b6a1deac1b1ac78554a.png)

我可能忽略了一些非常小的问题，所以如果有人可以提出一个很好的修复方法！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T06:25:39.323

添加以下 CSS 规则：

```
#container { white-space: nowrap; } 
```

通常，您应该发布导致问题的代码。到目前为止发布的代码肯定不会。我的猜测是你的 CSS 有一些设置或暗示容器上的一些特定宽度，导致换行（图像就像一个字符）。如果是这样，上面的代码解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T04:09:11.107

一种方法是向图像添加 align="right"，例如：

```
<img align="right" src="arrow.png"> 
```

如果这不起作用。检查您的容器的宽度是否受到样式表的限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T04:08:02.660

***[演示](http://tinkerbin.com/BEdLJKfP)***

嗨，现在根据您的设计尝试这个 css

```
#container a{
display:inline-block;
  vertical-align:top;
}
img{
vertical-align:top;
} 
```

***[演示](http://tinkerbin.com/BEdLJKfP)***

**或者**

## ------

现在你可以在一个类中定义这个图像，并在你的锚标签中应用这个类

像这样

```
 .imgclass{
    background:url("your_image_path.png") no-repeat 0 0;  // set to the background-position Acroding to your background Image
display:inline-block;
vertical-align:top;
    } 
```

**HTML**

```
<div id="container" style="padding: 5px">
  <a href="page.php" class="imgclass">Username</a>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T04:05:20.230

试试这个。我在这里创建并测试了代码

[http://jsfiddle.net/yaSWM/7/]

已编辑：您可以按照自己的风格删除`<img>`make it`background`

```
<div id="container" style="padding: 5px">
  <a class="img1" href="page.php">username</a>
</div> 
```

添加类或 id ex。`class="img"`

```
.img1{background:url(arrow.png) no-repeat right center;padding-right:20px;line-height:10px}​ 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-22T04:40:10.613

请试试这个：

我们可以使用表。表格是这些类型的对齐方式之一。

```
<div id="container" style="padding: 5px">
  <a href="page.php"><table><tr><td>Username</td><td><img src="arrow.png"></td></tr></table></a>
</div> 
```

# android - 如何使用警报管理器删除短信

> ID：13505669
> 
> 赞同：1
> 
> 时间：2012-11-22T03:57:03.400
> 
> 标签：android, sms, alarmmanager

我想创建一个可以清除收到的短信的应用程序，这些短信超过了一定的时间。我不知道的是，我应该使用什么值来触发该警报管理器以及如何更新警报管理器，以便它可以删除下一条消息。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:57:25.127

好吧，您可以按照以下步骤操作：

第一步：启动服务注册广播接收器，用于每天接收特定时间的事件。（就像每天早上 9 点响起的闹钟一样）

第 2 步：您可以在接收器的 onReceive() 中检查旧短信。

第三步：删除那些超过一定时间限制的短信。

因此，它将每天运行以删除旧短信。

# java - 如何使用java找到图的中心（顶点，与其他所有顶点相连，但边指向图的中心）

> ID：13505670
> 
> 赞同：2
> 
> 时间：2012-11-22T03:57:03.820
> 
> 标签：java, algorithm, graph

如何使用java找到图的中心（顶点，与其他所有顶点相连，但边指向图的中心）。它对 facebook 之类的网站非常有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T23:45:58.303

假设您有一个带有一组 V 顶点的图：

```
V = { v1, v2, v3, ... , vn } 
```

现在考虑所有顶点都连接到 v2 并且不存在其他边的极端情况，即作为元组 (from, to) 给出的边集 E 是：

```
E = ( (v1, v2), (v3, v2), ... , (vn, v2) } 
```

在这种极端情况下，v2 显然是您定义的图形的中心。

连接矩阵 A 如下所示：

```
A = {
   from
to  v1, v2, v3, ..  vn
v1   0   0   0  ..   0    
v2   1   0   1  ..   1
v3   0   0   0  ..   0    
   :               :
vn   0   0   0  ..   0 } 
```

这里 v2 通过在其连接矩阵 A 的行的每个位置（除了 pos v2，即其自身）都有一个，清楚地标识为图的中心。

即使在 E 中还有其他边时，这也可以识别图形的中心。请注意，可能有多个中心......

可以找到图的不太严格定义的中心作为连接矩阵中其行中具有最多一个条目的顶点。

您可以避免构造矩阵 A，当您拥有集合 E 并且只计算每个顶点出现在边缘元组的 to 位置的次数时。具有最大计数的顶点是图中定义模糊的中心，或者计数为 n - 1 的顶点是您严格定义的中心。

# c# - 形成两个列表并集的最简单方法

> ID：13505672
> 
> 赞同：81
> 
> 时间：2012-11-22T03:57:14.367
> 
> 标签：c#, .net, linq, list, union

比较两个列表中的元素的最简单方法是 A 和 B，并且只有在 A 中不存在的情况下才将 B 中存在的元素添加到 A 中？

为了说明，以列表 A = {1,2,3} 列表 B = {3,4,5}

所以在AUB操作之后我想要列表A = {1,2,3,4,5}

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-11-22T04:01:40.867

如果是列表，也可以使用[AddRange](http://msdn.microsoft.com/en-us/library/z883w3dc%28v=vs.80%29.aspx)方法。

```
var listB = new List<int>{3, 4, 5};  
var listA = new List<int>{1, 2, 3, 4, 5};

listA.AddRange(listB); // listA now has elements of listB also. 
```

如果您需要新列表（并排除重复项），您可以使用[Union](http://msdn.microsoft.com/en-us/library/bb341731.aspx)

```
 var listB = new List<int>{3, 4, 5};  
  var listA = new List<int>{1, 2, 3, 4, 5};
  var listFinal = listA.Union(listB); 
```

如果您需要新列表（并包括重复项），您可以使用[Concat](http://msdn.microsoft.com/en-us/library/bb302894.aspx)

```
 var listB = new List<int>{3, 4, 5};  
  var listA = new List<int>{1, 2, 3, 4, 5};
  var listFinal = listA.Concat(listB); 
```

如果您需要常用项目，可以使用[Intersect](https://msdn.microsoft.com/en-us/library/bb460136(v=vs.110).aspx)。

```
var listB = new List<int>{3, 4, 5};  
var listA = new List<int>{1, 2, 3, 4};  
var listFinal = listA.Intersect(listB); //3,4 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-22T03:59:14.660

最简单的方法是使用 LINQ 的[`Union`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.union.aspx)方法：

```
var aUb = A.Union(B).ToList(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-22T04:00:28.273

使用 LINQ 的[联合](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.union.aspx)

```
Enumerable.Union(ListA,ListB); 
```

或者

```
ListA.Union(ListB); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-22T03:59:46.353

我认为这是您真正需要做的一切：

```
var listB = new List<int>{3, 4, 5};
var listA = new List<int>{1, 2, 3, 4, 5};

var listMerged = listA.Union(listB); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-05T16:33:41.103

如果是两个 IEnumerable 列表，您不能使用`AddRange`，但可以使用`Concat`.

```
IEnumerable<int> first = new List<int>{1,1,2,3,5};
IEnumerable<int> second = new List<int>{8,13,21,34,55};

var allItems = first.Concat(second);
// 1,1,2,3,5,8,13,21,34,55 
```

# asp.net-mvc - 如果用户不存在，WebSecurity.UserExists 创建用户？

> ID：13505673
> 
> 赞同：2
> 
> 时间：2012-11-22T03:57:18.487
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-membership

在我的 ASP.NET MVC 4 代码中，如果我调用**WebSecurity.UserExists**并给它一个不存在的用户的名称，那么它会返回 false（应该如此），但是作为副作用，它会创建用户记录。因此，如果我用相同的用户名再次调用它，它会返回 true（因为用户现在存在）。

那是怎么回事？这是一个已知的错误？

鲍勃

# python - 包含sklearn时如何使用py2exe？

> ID：13505678
> 
> 赞同：5
> 
> 时间：2012-11-22T03:57:37.987
> 
> 标签：python, py2exe

如果代码有`import sklearn`，使用后`py2exe`

然后运行“exe”文件，我得到了这个错误日志：

```
Traceback (most recent call last):
File "HelloSklearn.py", line 17, in <module>
File "sklearn\__init__.pyc", line 32, in <module>
File "sklearn\base.pyc", line 8, in <module>
File "scipy\sparse\__init__.pyc", line 191, in <module>
File "scipy\sparse\csgraph\__init__.pyc", line 146, in <module>
File "scipy\sparse\csgraph\_shortest_path.pyc", line 12, in <module>
File "scipy\sparse\csgraph\_shortest_path.pyc", line 10, in __load
File "_shortest_path.pyx", line 18, in init scipy.sparse.csgraph._shortest_path(scipy\sparse\csgraph\_shortest_path.c:14235)
ImportError: No module named _validation 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:46:36.183

您可以添加`scipy.sparse.csgraph._validation`到脚本中的`includes`选项`setup.py`

```
setup( 
    ...
    options = { 'includes': ['scipy.sparse.csgraph._validation'] }
) 
```

或者只是`py2exe`通过强制导入来强制发现它 - 在您的代码中放置

```
import scipy.sparse.csgraph._validation 
```

# javascript - 如何使用 Javascript 获取日期差异

> ID：13505683
> 
> 赞同：1
> 
> 时间：2012-11-22T03:57:59.613
> 
> 标签：javascript, date

我需要明智地获取年、月、日等数据差异。这是我的代码

```
time1 =new Date(1988, 1, 8, 23, 23, 0, 0);
time2 = new Date();

difference = time2 - time1;
document.write(difference); 
```

这会返回类似这样的内容`782215145373`。我认为毫秒。所以我是如何得到这种差异的，比如年、月、日、小时、分钟、秒、毫秒。

实际上在这里我尝试了这种方式来获得月差

```
month_diff = time2.getMonth()-time1.getMonth(); 
```

但它给出了 9 但正确答案应该是 10。请帮我解释为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:01:40.810

尝试这个 ：

```
 //your calculated difference in milliseconds
  var diff_ms = date2_ms - date1_ms;

  //take out milliseconds
  diff_ms = diff_ms/1000;

  var seconds = Math.floor(diff_ms % 60);

  diff_ms = difference_ms/60; 
  var minutes = Math.floor(diff_ms % 60);

  diff_ms = diffms/60; 

  var hours = Math.floor(diff_ms % 24);

  var days = Math.floor(diff_ms/24); 
```

# .net - 减小图像文件大小

> ID：13505684
> 
> 赞同：0
> 
> 时间：2012-11-22T03:58:05.743
> 
> 标签：.net, vb.net, visual-studio-2010

我得到一个字节数组的图像截图。如何将此图像转换为低位图像以减小尺寸？整个图像中只有 10 种颜色，所以我认为必须有一些解决方法来做到这一点。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:59:09.560

您可以将其保存为调色板图像文件。假设您的图像保存在`bmp`type 的变量中`Bitmap`。`mStream`在这种情况下是 a `MemoryStream`，因此您可以将其存储在内存中：

```
bmp.Save(mStream, Imaging.ImageFormat.Gif)
bmp.Dispose 
```

gif 格式支持多达 256 种颜色的各种调色板大小，因为它使用*位平面*而不是 RGB 缓冲区。在您的情况下，它可能会保存为 16 色文件。GIF 使用 LZW 压缩，因此生成的文件往往较小。

还有 PNG-8 格式，其功能与 GIF 大致相同。

调用初始化位图：

```
mStream.Seek(0, SeekOrigin.Begin)
Dim bmp As Bitmap = Bitmap.FromStream(mStream)
...
bmp.Dispose 
```

不幸的是，您不能创建带有索引位图的 Graphics 对象 - 否则逻辑方法是将数据从屏幕复制到像素格式的位图中`PixelFormat.Format4bppIndexed`。

但是，以索引格式在位图上创建图形会引发异常 - 基本上您需要手动转换和复制数据。因此，如果不经常需要图像，我在这个答案中的建议可能会更方便。

# version-control - 如何在 svn/git/hg 中分离源代码？

> ID：13505686
> 
> 赞同：1
> 
> 时间：2012-11-22T03:58:11.437
> 
> 标签：version-control

我们的开发团队有以下源代码，必须分离所有权。

```
/common/ (owner:all, reviewer:all)
/prj_A/A1 (owner:King, reviewer:Queen)
/prj_A/A2 (owner:Queen, reviewer:King)
/prj_B/B1 (Owner:Princess, reviewer:Prince)
/prj_B/B2 (Owner:Prince, reviewer:Princess) 
```

对于 prj_A，他们必须检查 command & prj_A 来构建和测试。对于 prj_B，他们必须检查 command & prj_B 来构建和测试。其他团队无法查看不同项目上的代码。

那么，svn/git/hg 的正确设置是什么？您是否打算使用多个存储库来存储这些代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:56:49.700

> 您是否打算使用多个存储库来存储这些代码？

对于 DVCS（分布式 VCS），是的：每个存储库不应包含“所有内容”，并且应代表一组连贯的文件，以便仅克隆您需要的内容（而不是一直克隆“整个世界”） .
对于像 SVN 这样的 CVCS，您没有这个问题，您可以将所有内容保存在同一个 repo 中。

> 那么，svn/git/hg 的正确设置是什么？

*   对于 Git，您需要添加一个**[授权层](http://sitaramc.github.com/gitolite/auth.html)**，例如[gitolite](http://sitaramc.github.com/gitolite/index.html#what)。
*   Mercurial 将使用**[hg serve](http://www.selenic.com/mercurial/hg.1.html#serve)**：请参阅“ [Mercurial 是否有类似 svnserve 的东西？](https://stackoverflow.com/questions/2771379/is-there-anything-like-svnserve-for-mercurial) ”，以及“[授权用户](http://mercurial.selenic.com/wiki/AuthorizingUsers)”。

# java - 如何更新 AbstractTableModel

> ID：13505690
> 
> 赞同：2
> 
> 时间：2012-11-22T03:58:51.463
> 
> 标签：java, swing, jtable, updates, abstracttablemodel

我参考了一些方法。即fireTableCellUpdated的有效方式。但实际上我还是不申请。

如何在 DETA 值更新后更新表格内容。

该方法我称之为GJJ方法实现。虽然更新了但是出现了很多新的窗口。这不是我的需要。

告诉我如何在新窗口中添加按钮和监听按钮来执行更新行为的朋友告诉我怎么做。

```
 class MyTable extends AbstractTableModel {

    Object p[][]={  
                {DETA_1_1,DETA_1_2, DETA_1_3, DETA_1_4, DETA_1_5},
                {DETA_2_1,DETA_2_2, DETA_2_3, DETA_2_4, DETA_2_5},
                {DETA_3_1,DETA_3_2, DETA_3_3, DETA_3_4, DETA_3_5},
                {DETA_4_1,DETA_4_2, DETA_4_3, DETA_4_4, DETA_4_5},
                {DETA_5_1,DETA_5_2, DETA_5_3, DETA_5_4, DETA_5_5},
                {DETA_6_1,DETA_6_2, DETA_6_3, DETA_6_4, DETA_6_5},
                {DETA_7_1,DETA_7_2, DETA_7_3, DETA_7_4, DETA_7_5},
                {DETA_8_1,DETA_8_2, DETA_8_3, DETA_8_4, DETA_8_5},  
                {DETA_9_1,DETA_9_2,DETA_9_3,DETA_9_4,DETA_9_5},  
                {DETA_10_1,DETA_10_2,DETA_10_3,DETA_10_4,DETA_10_5},  
                {DETA_11_1,DETA_11_2,DETA_11_3,DETA_11_4,DETA_11_5},  
                {DETA_12_1,DETA_12_2,DETA_12_3,DETA_12_4,DETA_12_5},  
                {DETA_1_3_1,DETA_1_3_2,DETA_1_3_3,DETA_1_3_4,DETA_1_3_5},  
                {DETA_1_4_1,DETA_1_4_2, DETA_1_4_3, DETA_1_4_4, DETA_1_4_5},  
                {DETA_15_1,DETA_15_2,DETA_15_3,DETA_15_4,DETA_15_5},  
                {DETA_16_1,DETA_16_2,DETA_16_3,DETA_16_4,DETA_16_5},  
                {DETA_17_1,DETA_17_2,DETA_17_3,DETA_17_4,DETA_17_5},  
                {DETA_1_8_1,DETA_1_8_2,DETA_1_8_3,DETA_1_8_4,DETA_1_8_5},  
                {DETA_19_1,DETA_19_2,DETA_19_3,DETA_19_4,DETA_19_5}  
            };  
    String[] n = { "NO","CARD","NAME","NAME2","time" };

    public int getColumnCount() {
        return n.length;
    }

    public int getRowCount() {
        return p.length;
    }

    public String getColumnName(int col) {
        return n[col];
    }

    public Object getValueAt(int row, int col) {
        return p[row][col];
    }

    public Class getColumnClass(int c) {
        return getValueAt(0, c).getClass();
    }

}

   private void GJJ() {
    JFrame f = new JFrame();
    MyTable mt = new MyTable();
    JTable t = new JTable(mt);

    t.setPreferredScrollableViewportSize(new Dimension(550, 30));
    JScrollPane s = new JScrollPane(t);
    f.getContentPane().add(s, BorderLayout.CENTER);
    f.setTitle("coolman");
    f.pack();
    f.setVisible(true);
    f.addWindowListener(new WindowAdapter() {
        public void windowClosing(WindowEvent e) {
            System.exit(0);

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T04:30:12.873

你的问题有点含糊。“更新”表模型可能是更新现有模型（即编辑数据）和/或添加新行。

我已经做了一个简单的例子。

编辑行时，模型和表格会自行更新它们，所以你不需要做任何事情，但是，如果你添加或删除行，你将自己负责触发更新事件。

```
public class TestTableModel {

    public static void main(String[] args) {
        new TestTableModel();
    }

    public TestTableModel() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final MyTableModel tableModel = new MyTableModel();
                final JTable table = new JTable(tableModel);

                JButton addButton = new JButton("Add");
                addButton.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        tableModel.add();
                    }
                });
                JButton updateButton = new JButton("Update");
                updateButton.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        int row = table.getSelectedRow();
                        if (row > -1) {
                            table.setValueAt("Banana", row, 0);
                        }
                    }
                });

                JPanel buttonPane = new JPanel();
                buttonPane.add(addButton);
                buttonPane.add(updateButton);

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(table));
                frame.add(buttonPane, BorderLayout.SOUTH);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class Person {

        private String name;
        private int age;

        public Person() {
        }

        public Person(String name, int age) {
            this.name = name;
            this.age = age;
        }

        public int getAge() {
            return age;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public void setAge(int age) {
            this.age = age;
        }

    }

    public class MyTableModel extends AbstractTableModel {

        private List<Person> lstPeople;

        public MyTableModel() {
            lstPeople = new ArrayList<Person>(25);
            lstPeople.add(new Person("Darryl Garton", randomAge()));
            lstPeople.add(new Person("Neil Willison", randomAge()));
            lstPeople.add(new Person("Darryl Hege", randomAge()));
            lstPeople.add(new Person("Karina Jerry", randomAge()));
            lstPeople.add(new Person("Erik Leddy", randomAge()));
            lstPeople.add(new Person("Chandra Kehrer", randomAge()));
            lstPeople.add(new Person("Katy Sapien", randomAge()));
            lstPeople.add(new Person("Lonnie Blakes", randomAge()));
            lstPeople.add(new Person("Kelly Ruocco", randomAge()));
            lstPeople.add(new Person("Fernando Mckinnie", randomAge()));
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return true;
        }

        protected int randomAge() {

            return (int)Math.round(Math.random() * 99) + 1;

        }

        @Override
        public int getRowCount() {
            return lstPeople.size();
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public String getColumnName(int column) {
            String name = null;
            switch (column) {
                case 0:
                    name = "Name";
                    break;
                case 1:
                    name = "Age";
                    break;
            }
            return name;
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            Class clazz = String.class;
            switch (columnIndex) {
                case 1:
                    clazz = Integer.class;
                    break;
            }
            return clazz;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            Object value = null;
            Person person = lstPeople.get(rowIndex);
            switch (columnIndex) {
                case 0:
                    value = person.getName();
                    break;
                case 1:
                    value = person.getAge();
                    break;
            }
            return value;
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
            Person person = lstPeople.get(rowIndex);
            switch (columnIndex) {
                case 0:
                    if (aValue instanceof String) {
                        person.setName(aValue.toString());
                    }
                    break;
                case 1:
                    if (aValue instanceof Integer) {
                        person.setAge((Integer)aValue);
                    }
                    break;
            }
            fireTableCellUpdated(rowIndex, columnIndex);
        }

        public void add() {

            lstPeople.add(new Person());
            fireTableRowsInserted(lstPeople.size() - 1, lstPeople.size() - 1);

        }

    }

} 
```

您可能想阅读[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)以获取更多信息

# android - PhoneGap 中的 Google Maps API v3：移动后标记无法正确绘制

> ID：13505692
> 
> 赞同：4
> 
> 时间：2012-11-22T03:58:56.143
> 
> 标签：android, cordova, google-maps-markers

我一直在使用 PhoneGap 在 Android 上开发 Google Maps API 3 应用程序。它应该跟踪用户的位置并用标记和围绕它的圆圈标记位置。我一直在 Android 2.3 上开发它，它运行良好。然后我升级到安卓 4.x 的手机，我想它仍然运行良好。

上周，当我移动标记时，我开始注意到它会做一些奇怪的事情。它似乎会创建一个重复的标记，而不是仅仅移动它。与圆圈相同。有时，如果我更改缩放比例，则重复项似乎消失了。而且，它偶尔会画出一些奇怪的切线。请参阅下面的图片。

这是在我在手机上收到 4.1.1 版的 Android 更新后不久。不确定这是否相关，我找不到有关问题的任何信息。

我将地图和 phonegap 代码减少到不到 100 行，它仍然在做。我很确定它与phonegap无关，但无论如何我还是将它升级到了2.2，但这并没有帮助。移动标记和圆圈时，谁能告诉我是否做错了什么？请注意，我在下面删除了我的 Google Maps API 密钥。

谢谢，埃里克

```
<!DOCTYPE HTML>
<html>
<head>
<title>Marker Test</title>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
    html {height: 100%}
    body {height: 100%; margin:0; padding:0}
    #map_canvas {height: 100%}
</style>
<script type="text/javascript" charset="utf-8" src="js/phonegap.js"></script>
<script type="text/javascript" charset="utf-8" src="http://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE&sensor=true"></script>
<script type="text/javascript" charset="utf-8">
    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // globals
    var watchID = null;
    var map = null;
    var myLocationMarker = null;
    var searchCircle = null;

    // PhoneGap is ready
    //
    function onDeviceReady() {
        startGPS();
    }

function startGPS() {
    console.log("In startGPS");

    var refreshMilliseconds = 5000;
    var options = { frequency: refreshMilliseconds, enableHighAccuracy: true};

    watchID = navigator.geolocation.watchPosition(onGPSSuccess, onGPSError, options);

    // create Google map
    var mapOptions = {
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    myLocationMarker = new google.maps.Marker({
        title: 'This is me!',
        zIndex: 90,
        map:map
    });     

    searchCircle = new google.maps.Circle({
        fillColor: '#c0e4dd',
        strokeColor: '#f15f22',
        fillOpacity: 0.5,
        radius: 1500,
        map:map
    });     
}

var onGPSSuccess = function(p) {
    // get the new coordinates
    var lat = p.coords.latitude;
    var lng = p.coords.longitude;

    console.log("watch ID " + watchID);

    // now that we have the coordinates, we can move the marker and circle on the Google Map
    MoveMarkerAndCircle(lat, lng);
};

var MoveMarkerAndCircle = function(lat, lng) {
    var myLocation = new google.maps.LatLng(lat, lng);
    myLocationMarker.setPosition(myLocation);

    searchCircle.setCenter(myLocation);

    map.setCenter(myLocation);  
}

var onGPSError = function() {
    console.log("GPS Error");
};

var GenerateFakeMovement = function() {
    var currentPosition = myLocationMarker.getPosition();
    var newLat = currentPosition.lat() + 0.01;
    var newLng = currentPosition.lng() + 0.01;
    MoveMarkerAndCircle(newLat, newLng);
}
</script>
</head>
<body  style="height:100%;text-align:center">
    <div id="map_canvas" style="width: 100%;height:80%"></div>
    <a href='#' onclick="GenerateFakeMovement();" style="padding-top:5px">MAKE FAKE MOVEMENT</a>
</body>
</html> 
```

![圆上有切线的两点](../Images/e8de20479bb99c3eb296a1c81a15ff97.png) ![两个点和两个圆](../Images/dfb0b5134d852bc8c0e4b3b6fb681f45.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T12:33:07.390

我有同样的问题，尝试将`optimized: false`属性设置为标记：

```
new google.maps.Marker({
  map: map,
  optimized: false, 
  clickable: true
}); 
```

这应该解决它！

# hibernate - Hibernate映射使用xml和注解之间的多对多不同

> ID：13505695
> 
> 赞同：1
> 
> 时间：2012-11-22T03:59:18.343
> 
> 标签：hibernate

在hibernate中，当使用xml映射多对多时，它使用的是这样的多对多：

```
<class name="com.lavin.test.app.dao.hibernate.association.many2many.model.Category2" table="category2" catalog="tt">
    <set name="stocks" table="stock_category" inverse="true" lazy="true" fetch="select">
        <key>
            <column name="CATEGORY_ID" not-null="true" />
        </key>
        <many-to-many entity-name="com.lavin.test.app.dao.hibernate.association.many2many.model.Stock2">
            <column name="STOCK_ID" not-null="true" />
        </many-to-many>
    </set>
</class> 
```

但是，当使用注解时，它会像这样使用@ManyToOne：

```
@Embeddable
public class StockCategoryId3 implements java.io.Serializable {

private Stock3 stock;

private Category3 category;

@ManyToOne
public Stock3 getStock() {
return stock;
}

public void setStock(Stock3 stock) {
this.stock = stock;
}

@ManyToOne
public Category3 getCategory() {
return category;
}

public void setCategory(Category3 category) {
this.category = category;
}
} 
```

映射多对多关系时使用xml和注解不应该一样吗？为什么这两个不同？

# javascript - 如何为 MVC 功能创建 java 脚本文件

> ID：13505699
> 
> 赞同：1
> 
> 时间：2012-11-22T03:59:36.830
> 
> 标签：javascript, asp.net-mvc, razor, kendo-ui

我创建了许多 java 脚本函数来封装剑道网格的 crud 操作，能够在新页面或弹出对话框中编辑数据。我是 JavaScript 新手。有没有办法将网格和弹出功能嵌入到脚本文件中。现在我正在使用 _partial 视图和派生类来做我想做的事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:29:08.353

您可以扩展基本网格小部件，然后覆盖这些方法以创建自定义的新网格。

像这样...

```
var CustomGrid = kendo.ui.Grid.extend({

    // override the prototype or add custom methods here

}); 
```

这是一篇文章，详细解释了如何做到这一点：

[http://www.kendoui.c​​om/blogs/teamblog/posts/12-10-16/inheriting_from_custom_widgets.aspx](http://www.kendoui.com/blogs/teamblog/posts/12-10-16/inheriting_from_custom_widgets.aspx)

# java - DataOutputStream 和 printwriter 有什么区别？

> ID：13505704
> 
> 赞同：0
> 
> 时间：2012-11-22T04:00:28.807
> 
> 标签：java, android, printwriter, dataoutputstream

`DataOutputStream`和 和有什么不一样`printwriter`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:09:18.877

数据输出流允许应用程序以可移植的方式将原始 Java 数据类型写入输出流。然后，应用程序可以使用数据输入流来读回数据。

PrintWriter 将对象的格式化表示形式打印到文本输出流。此类实现 PrintStream 中的所有打印方法。它不包含写入原始字节的方法，程序应该使用未编码的字节流。与 PrintStream 类不同，如果启用了自动刷新，它将仅在调用 println、printf 或 format 方法之一时完成，而不是在碰巧输出换行符时完成。这些方法使用平台自己的行分隔符概念，而不是换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:15:37.103

**Writer 和 Reader 类处理文本字符（类型 char）并在 Unicode 和真实平台的文件编码之间进行一些转换。

DataOutputStream (Stream) 类处理二进制数据（字节类型），并且不进行此类转换。**

# java - 如何在 BIRT 报告中集成 Google 地图

> ID：13505705
> 
> 赞同：2
> 
> 时间：2012-11-22T04:00:32.673
> 
> 标签：java, eclipse, reporting, birt

我想在我的 BIRT 报告中显示 Google 地图。

理想情况下，该 BIRT 报告应包含两个部分。一张桌子和谷歌地图。

表包含两个字段的经度和纬度。

单击一行时，我想在 Google 地图中显示相应的位置。

任何人都可以发布一个满足上述要求的示例设计文件或共享任何链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:25:45.567

看看这个来自 birt-exchange 的[rptdesign 示例](http://www.birt-exchange.org/org/devshare/designing-birt-reports/149-google-maps-mashup-with-birt-reports/)

# ruby-on-rails - 为什么我在 FactoryGirl 和示例方法中使用 create_list 时会得到相同的对象？

> ID：13505708
> 
> 赞同：1
> 
> 时间：2012-11-22T04:00:36.870
> 
> 标签：ruby-on-rails, rspec, factory-bot

我使用工厂女孩来定义这样的对象：

```
factory :event do
  #...
  category ['Life', 'Course', 'Speek'].sample
  #...
end 
```

然后在 中`spec/models/event_spec.rb`，我有这个：

```
before(:each) do
  @events = FactoryGirl.create_list(:event, 10, node: school) 
end
  #...
binding.pry 
```

但是当我用pry查看的时候`@events`，发现里面的都是`event`一样`@events`的`category`。

我想知道为什么以及如何解决它？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T04:14:47.723

代码`category ['Life', 'Course', 'Speek'].sample`只运行一次（定义工厂时）。如果要在每次`event`创建或构建 an 时生成一个新类别，可以使用 a `sequence`，如下所示：

```
sequence(:category) { ['Life', 'Course', 'Speek'].sample } 
```

# php - 在数据库中使用 at 符号 (@)

> ID：13505711
> 
> 赞同：0
> 
> 时间：2012-11-22T04:01:13.573
> 
> 标签：php, mysql, symbols

所以，我在 TAFE 创建一个网站（来自模板和给定的链接/数据库），所以我不能编辑我的数据库。任何人，当我加载我的页面时，我收到关于“@”符号附近任何内容的语法错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@com.au' at line 1 
```

我的代码是：

```
mysql_select_db($database_sim6a2010, $sim6a2010);
$query_Recordset1 = "SELECT * FROM employeeproject WHERE projectID=" . $_GET['projectID'];
$Recordset1 = mysql_query($query_Recordset1, $sim6a2010) or die(mysql_error());
$row_Recordset1 = mysql_fetch_assoc($Recordset1);
$totalRows_Recordset1 = mysql_num_rows($Recordset1);

mysql_select_db($database_sim6a2010, $sim6a2010);
$query_Recordset2 = "SELECT * FROM project WHERE projectID=" . $_GET['projectID'];
$Recordset2 = mysql_query($query_Recordset2, $sim6a2010) or die(mysql_error());
$row_Recordset2 = mysql_fetch_assoc($Recordset2);
$totalRows_Recordset2 = mysql_num_rows($Recordset2);

mysql_select_db($database_sim6a2010, $sim6a2010);
$query_Recordset3 = "SELECT employee.name, employeeproject.hours, employee.imgLocation FROM employee, employeeproject WHERE email=" . $row_Recordset1["email"];
$Recordset3 = mysql_query($query_Recordset3, $sim6a2010) or die(mysql_error());
$row_Recordset3 = mysql_fetch_assoc($Recordset3);
$totalRows_Recordset3 = mysql_num_rows($Recordset3); 
```

我要在这里指出，我不喜欢使用 mysql，我在这个论坛上被告知不要使用它（我不会），但这是我们正在使用并且必须使用的。除了我不喜欢 Dreamweaver 巨大的“在您的页面上查克无意义的代码”之外，我们被告知我们必须使用 Dreamweaver 的记录集和 GUI 的东西。

任何人，所以得到错误的部分是：

```
$query_Recordset3 = "SELECT employee.name, employeeproject.hours, employee.imgLocation FROM employee, employeeproject WHERE email=" . $row_Recordset1["email"]; 
```

正如您所怀疑的那样，它的电子邮件部分充满了诸如“Sam@com”之类的东西，这会导致错误，我如何让 PHP 知道数据库中的 @sybmols 不是代码？

希望我已经提供了足够的信息。我决定问，因为任何涉及 at 符号 (@) 的搜索总是想出将其用作代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:05:18.670

您需要将字符串数据放在单引号中，如下所示：

```
$query_Recordset3 = "SELECT employee.name, employeeproject.hours, employee.imgLocation FROM employee, employeeproject WHERE email='" . $row_Recordset1["email"] . "'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T04:07:01.260

您需要添加引号，`$row_Recordset1["email"]`因为它是一个字符串

```
$query_Recordset3 = "SELECT employee.name, employeeproject.hours, employee.imgLocation FROM employee, employeeproject WHERE email='" . $row_Recordset1["email"]."'"; 
```

**笔记：**

不要使用 mysql_* 函数。很快就会被弃用。使用 PDO 或 mysqli 函数。

还要注意`SQL Injection`你的代码看起来很脆弱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:31:19.110

问题 #1 由`@G-Nugget`and `@Muthu Kumaran`-`email`用单引号解决`''`。

```
$query_Recordset3 = "SELECT employee.name, employeeproject.hours, employee.imgLocation FROM employee, employeeproject WHERE email='" . $row_Recordset1["email"] . "'"; 
```

问题 #2 - “where 子句中的列‘电子邮件’不明确”。`employee`您正在从 2 个表&中提取字段`employeeproject`，但未指定`email`.

```
$query_Recordset3 = "SELECT employee.name, employeeproject.hours, employee.imgLocation FROM employee, employeeproject WHERE employee.email='" . $row_Recordset1["email"] . "'"; 
```

尽管执行此查询的更好方法是使用[`JOIN`](http://dev.mysql.com/doc/refman/5.6/en/join.html)

```
$query_Recordset3 = "SELECT employee.name, employeeproject.hours, employee.imgLocation FROM employee LEFT JOIN employeeproject ON employee.name=employeeproject.name  WHERE employee.email='" . $row_Recordset1["email"] . "'"; 
```

# php - 使用文本输入作为 php 变量

> ID：13505713
> 
> 赞同：1
> 
> 时间：2012-11-22T04:01:34.787
> 
> 标签：php, html, types, input, hyperlink

```
<input type="text" onkeydown="domaincheck()" />

<?php
   function domaincheck()
   {
      $recordexists = checkdnsrr("", "ANY");
      if ($recordexists) 
         echo "The domain name has been taken. Sorry!";
      else 
         echo "The domain name is available!";
   }
?> 
```

我希望我的 php 代码处理文本输入并说明它是否是有效域。唯一不起作用的是将输入链接到 php.ini 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:36:22.783

也许你想要这样的东西：

```
<form name="Form" method="post" action="">
  <input type="text" name="DomainName" />
  <input type="submit" name="submit" value="Domain Name" />
</form>

<?php
if ( isset( $_POST[ 'submit' ] ) ) {
  $DomainName = $_POST[ 'DomainName' ];
  domaincheck( $DomainName );
}

/**
 * @param $DomainName
 */
function domaincheck( $DomainName ) {
    if (checkdnsrr( $DomainName, "ANY" ) ) {;
    echo "The domain \"$DomainName\" has been taken. Sorry!";
  }
  else {
    echo "The domain \"$DomainName\" is available!";
  }
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:42:55.267

您必须使用 opensrs api 集成进行域名搜索。这样您就可以获得域名列表，如果用户输入的域名与现有域名匹配，您可以说“域名可用”或说“这个新域”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:52:43.583

这不是 PHP 的工作方式。您犯了一个很多初学者都会犯的常见思维错误，因为您似乎认为像 Javascript 这样的[客户端](http://en.wikipedia.org/wiki/Client_%28computing%29)语言可以以这种方式与像 PHP 这样的[服务器端](http://en.wikipedia.org/wiki/Server_%28computing%29)语言交互。这是由于对[客户端/服务器](http://en.wikipedia.org/wiki/Client%E2%80%93server_model)和/或[请求/响应](http://en.wikipedia.org/wiki/Request-response)模型的误解。

当您使用浏览器（客户端）请求网页时，您的请求由网络服务器（服务器）处理，然后返回响应，基本上如下所示：

```
 Client (browser)             Server (webserver)
---------------------------------------------------
   Send page request   ----->    Parse request
                                 (execute PHP)

                                       |
                                      \|/

Parse HTML response     <-----   Send HTML response
   (and execute                  (there will be no
    Javascript,                   more PHP code in
  if that was part                 this response)
  of the response) 
```

换句话说：客户端和服务器是两个完全分离的进程，它们仅根据请求/响应原则相互通信。

PHP 不能在客户端执行（除了客户端版本 PHP-GTK，我们这里不讨论），Javascript 不能在服务器端执行（除了服务器端版本的 Javascript，它我们这里不讨论）。`domaincheck`因此，客户端将无法调用PHP 函数，服务器也不会接收到 Javascript 调用。

因此，如果您不想再次请求完整的网页，而只是请求 Javascipt 函数并接收 PHP 函数的输出，则必须让 Javascipt 再次向服务器发出另一个请求（'in背景'，意思是：没有完全替换浏览器中的整个页面），并让 PHP 再次创建响应，这次是 Javascript 可以处理的输出。这通常称为[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)（异步 JavaScript 和 XML）。尽管响应不一定是 XML。[JSON](http://en.wikipedia.org/wiki/JSON)响应非常常见。HTML 的片段（甚至完整的 HTML 页面）也是可能的。

*在不久的将来，我可能会为您添加一个示例。*

# powershell - 可分辨名称显示本地计算机而不是列表中的服务器

> ID：13505716
> 
> 赞同：0
> 
> 时间：2012-11-22T04:02:02.363
> 
> 标签：powershell, powershell-2.0

我对此代码的结果有疑问。出于某种原因，脚本的专有名称部分给出了我的工作站的值，而不是阵列中服务器的专有名称......

```
 Function WMILookup {
    foreach ($StrComputer in $colComputers){
    $GenItems1 = gwmi Win32_OperatingSystem -Comp $StrComputer
    $Printers = gwmi Win32_Printer -computername $StrComputer

    # Populate General Sheet(1) with information
foreach ($objItem in $GenItems1){
    $Sheet1.Cells.Item($intRow, 1) = $StrComputer
    $Sheet1.Cells.Item($intRow, 2) = $objItem.Caption
    $Sheet1.Cells.Item($intRow, 3) = $objItem.CSDVersion
    }

foreach ($objItem in $Printers){
    $Sheet1.Cells.Item($intRow, 4) = $objItem.Shared
    }

$de = New-Object System.DirectoryServices.DirectoryEntry
$ds = New-Object System.DirectoryServices.DirectorySearcher
$ds.SearchRoot = $de
    $ds.Filter = "(&(objectCategory=computer)(objectClass=computer)  (samAccountName=$($env:Computername)$))"
$ds.SearchScope = "SubTree"
$r = $ds.FindOne()
$r.Path
$Sheet1.Cells.Item($intRow, 5) = $r.Path

    $intRow = $intRow + 1}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:25:04.037

它给了你你问他的东西：

```
$ds.Filter = "(&(objectCategory=computer)(objectClass=computer)  (samAccountName=$($env:Computername)$))" 
```

`$env:Computername`是执行函数的计算机名称。

也许你想要这个：

```
$ds.Filter = "(&(objectCategory=computer)(objectClass=computer)  (samAccountName=$($StrComputer)$))" 
```

# c++ - 如何在做方程式时在 C++ 中开始换行

> ID：13505720
> 
> 赞同：8
> 
> 时间：2012-11-22T04:02:36.287
> 
> 标签：c++

我正在阅读“C++ 编程语言”，我目前的任务是制作一个程序，该程序采用两个变量并确定值的最小、最大、总和、差异、乘积和比率。

问题是我无法开始换行。"\n" 不起作用，因为我在引号后面有变量。而 "<< endl <<" 仅适用于第一行。我用谷歌搜索了这个问题，但我做得很短。

```
#include <iostream>
#include <string>
#include <vector>
#include <algorithm>
#include <cmath>
using namespace std;
inline void keep_window_open() {char ch;cin>>ch;}
int main()
{
    int a;
    int b;
    cout<<"Enter value one\n";
    cin>>a;
    cout<<"Enter value two\n";
    cin>>b;
    (a>b); cout<< a << " Is greater than " << b;
    (a<b); cout<< a << " Is less than " << b;

    keep_window_open();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T04:05:58.620

您正在寻找`std::endl`，但您的代码无法按预期工作。

```
(a>b); cout<< a << " Is greater than " << b;
(a<b); cout<< a << " Is less than " << b; 
```

这不是一个条件，你需要重写它

```
if(a>b) cout<< a << " Is greater than " << b << endl; 
if(a<b) cout<< a << " Is less than " << b << endl; 
```

你也可以发送角色`\n`来创建一个新行，我用过`endl`，因为我认为这就是你要找的。请参阅[此线程](https://stackoverflow.com/questions/5492380/what-is-the-c-iostream-endl-fiasco)以了解可能存在的问题`endl`。

替代方案写为

```
if(a>b) cout<< a << " Is greater than " << b << "\n"; 
if(a<b) cout<< a << " Is less than " << b << "\n"; 
```

有一些像这样的“特殊字符”，`\n`作为换行符、`\r`作为回车符、`\t`作为制表符等......知道你是否开始的有用的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T04:04:48.323

您可以输出`std::endl`到流以移动到下一行，如下所示：

```
cout<< a << " Is greater than " << b << endl; 
```

# javascript - JavaScript/NodeJS 真的是并行的吗？

> ID：13505724
> 
> 赞同：1
> 
> 时间：2012-11-22T04:03:03.253
> 
> 标签：javascript, node.js, parallel-processing

最近在学校，我在并行计算课上学习了 C++/OpenMPI。我真的不喜欢用 C++ 编程，因为它的级别低，更难编程，更容易出错等。

所以我一直在想，JavaScript/NodeJS（我开始喜欢的东西）真的是真正并行的吗？还是只是简单地使用非阻塞操作来*模拟*并行执行（我认为是这样）？有一些类似的库[`async`](https://github.com/caolan/async)提供了与我在 OpenMPI 中使用的类似的功能：聚集、分散甚至“并行”。但是我有一种感觉，它只是使用非阻塞 IO 来模拟并行性？

或许只有[`node-webcl`](https://npmjs.org/package/node-webcl)真正的平行？

**更新**：似乎可以通过网络工作者（约 31 分钟）：观看[http://www.infoq.com/presentations/Parallel-Programming-with-Nodejs](http://www.infoq.com/presentations/Parallel-Programming-with-Nodejs)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-18T01:34:18.483

实际上，JavaScript 在设计上是单线程的。但你不是第一个想要其中一些并行性的人，所以有些东西可以真正并行工作：

1.  [WebWorkers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers) - 在线程中运行，这意味着它们的创建成本很低。他们的数据交换能力有限。起初你只能在worker之间发送消息，但现在它们好多了，你甚至可以使用[SharedArrayBuffer](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer)进行并发内存访问。NodeJs 不支持，仅在浏览器中支持。
2.  [WebGL/WebCL](https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Tutorial) - 利用图形子系统进行并行计算。非常快，但对有限的问题有效。并非所有任务都可以在类似 GPU 的子系统上有效计算。它还需要额外的数据转换，以便以类似像素的格式呈现数据。有像 WebGL 一样的浏览器支持，但正如你已经提到的，只有 NodeJs 的实验性实现。
3.  [SIMD](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SIMD) - 数据并行。这是一件很有前途的事情，但它不再出现在 JavaScript 的路线图上，它将成为[WebAssembly](https://github.com/WebAssembly/design/issues/1075)标准的一部分。
4.  [Cluster](https://nodejs.org/api/cluster.html#cluster_cluster) - 用于并行性的 NodeJs 解决方案。从第 9 版开始，允许运行多个进程（不是线程），甚至支持[SharedArrayBuffer](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer)进行通信。

差不多就是这样。还有[WebAssembly 线程提案](https://github.com/WebAssembly/threads/blob/master/proposals/threads/Overview.md)，但首先，它是一个提案，其次，WebAssembly 不是 JavaScript。

一般来说，JavaScript 远不是低级并行计算的最佳工具。还有很多其他工具更适合这个：Java、C#、Go...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:05:10.010

使用 Node.js，您的 JavaScript 在单线程中运行。IO 是非阻塞的。

# java - 第一次点击按钮后，按钮停止工作

> ID：13505726
> 
> 赞同：1
> 
> 时间：2012-11-22T04:03:05.640
> 
> 标签：java, swing, button, if-statement, paint

我正在开发一个程序，如果单击菜单项“显示网格线”，菜单栏下方的绘图区域将在网格上绘制网格线。

编辑：以下是程序的组件。我把对这个问题不重要的任何部分都变成了评论。

```
import java.awt.Color;
import java.awt.Image;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JFrame;

//main initializer
public class lineFollower {
    frameDesign frame;
    //private static Image icon = new ImageIcon("images/icon copy.jpg").getImage();

public static void main(String[] args) {
    //make new frame
    JFrame frame = new frameDesign();
    frame.setSize(1000,700);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
    frame.setLocale(null);
    frame.setTitle("Line Follower Program 1.0");
    //frame.setIconImage(icon);

    }

} 
```

这是框架设计（也省略了部分）：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.util.ArrayList;
import javax.swing.*;

public class frameDesign extends JFrame {
//data fields
//JPanel DataPanel;
//ListPanel ListPanel;
DrawingPanel DrawingPanel;
grid gridbox;
menuPanel menu;
//ArrayList<Rectangle> Rectangles;
//ArrayList<Circle> Circles;
//ArrayList<Triangle> Triangles;
public int newvalue = 0;
public int[] griddim;
public int gridwidth, gridheight;
BorderLayout layout;

//combine data into frame
public  frameDesign(){
//Rectangles = new ArrayList<Rectangle>();
//Circles = new ArrayList<Circle>();
//Triangles = new ArrayList<Triangle>();
//Layout: Border
BorderLayout layout = new BorderLayout();
setLayout(layout);

//Assemble the Menu
menu = new menuPanel();

//Assemble the List Panel which also includes the animation buttons
//ListPanel = new ListPanel();
//Create the gridbox
gridbox = new grid();
gridbox.setPreferredSize(new Dimension(200,200));
gridbox.setSize(500,200);
griddim = gridbox.getgriddim();
gridwidth = griddim[0];
gridheight = griddim[1];

//Data Panel consists of ListPanel, AnimatePanel, and DrawingPanel
//DataPanel = new JPanel(new FlowLayout());
//DataPanel.add(DrawingPanel= new DrawingPanel());
//DataPanel.add(ListPanel = new ListPanel());
//DataPanel.setSize(250,700);
//DataPanel.setBackground(Color.getHSBColor(150f, 100f, 100f));
//DataPanel.setBorder(BorderFactory.createLineBorder(Color.BLACK, 5));

add(gridbox, BorderLayout.CENTER);
add(menu, BorderLayout.NORTH);
//add(DataPanel, BorderLayout.EAST);

//getPoints pointfinder = new getPoints();
//pointgrabber pointfinder2 = new pointgrabber();
//gridbox.addMouseListener(pointfinder2);
//gridbox.addMouseMotionListener(pointfinder);

//ActionListeners for Menus
menu.ShowLine.addActionListener(new ActionListener(){
@Override
public void actionPerformed(ActionEvent e){
    //show the grid
    if (gridbox.isgridline()==true){
        gridbox.gridline(false);
    }

    else if (gridbox.isgridline()==false){
        gridbox.gridline(true);
    }
}   
});
} 
```

下一堆代码用于创建网格：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import javax.swing.BorderFactory;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

/*
 * This is the design for the grid
 */
public class grid extends JPanel {
//data fields
boolean isgridline;
private static int startX = 50;
private static int startY = 50;
private int intervalline;
private int[] griddim;

//gridPanel
grid(){
    setBorder(BorderFactory.createLineBorder(Color.BLACK));
    griddim = new int[2];
    griddim[0] = 500;
    griddim[1] = 500;
    isgridline = false;
    intervalline = 20;
}

//Paints grid
@Override
protected void paintComponent(Graphics g){
    super.paintComponent(g);

    //GridBox
    g.setColor(Color.BLACK);
    g.drawRect(50, 50, griddim[0], griddim[1]);
    g.setColor(Color.WHITE);
    g.fillRect(50, 50, griddim[0], griddim[1]);

    //draw grid lines
    if (isgridline){
        g.setColor(Color.getHSBColor(150, 150, 200));
            //vertical lines
            for (int v = 0; v <griddim[0]; v = v+intervalline){
                    g.drawLine(startX, 50, 
                            startX, 50+griddim[1]);
                    startX = startX+intervalline;
            }
            //horizontal lines
            for (int v=0; v<griddim[1]; v=v+intervalline){
                    g.drawLine(50, startY, 50+griddim[0], startY);
                        startY = startY+intervalline;
            }
    }

}

//set grid dimensions
public void setgridbox(int[] dim){
        griddim=dim;
}

//get grid dimensions
public int[] getgriddim(){
    return griddim;
}
//set the grid line true or false
public void gridline(boolean islines){
    isgridline=islines;
    repaint();
}
//get gridline true or false
public boolean isgridline(){
    return isgridline;
}

//set grid line intervals
//public void setinterval(int interval){
        //intervalline=interval;
        //repaint();
//}
} 
```

最后是菜单：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.EventListener;

import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.event.MenuEvent;

/*
 * Class just for the menu panel
 */

public class menuPanel extends JMenuBar {

JMenuItem New, Save, Open, Exit;
JMenu fileMenu, gridMenu;
JMenuItem GridDim, GridLine, ShowLine;

menuPanel(){
    //Assemble file menu
    fileMenu = new JMenu("File");
        New = new JMenuItem("New");
        Save = new JMenuItem("Save");
        Open = new JMenuItem("Open");
        Exit = new JMenuItem("Exit");
        fileMenu.add(New);
        fileMenu.add(Save);
        fileMenu.add(Open);
        fileMenu.addSeparator();
        fileMenu.add(Exit);
            add(fileMenu);

    //Assemble grid menu
    gridMenu = new JMenu("Grid");
        GridDim = new JMenuItem("Dimension");
        GridLine = new JMenuItem("Change Grid Line Interval");
        ShowLine = new JMenuItem("Show Grid Lines");
        gridMenu.add(GridDim);
        gridMenu.add(GridLine);
        gridMenu.add(ShowLine);
            add(gridMenu);

    }

} 
```

单击grid下菜单栏中的“显示网格线”按钮时，打开网格线，关闭网格线一次。之后它停止工作......我该怎么做才能使网格线不止一次地出现和关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:43:00.517

我做了一个非常快速的测试，但是由于您没有为我们提供可运行的示例，因此无法重现您的问题。

我“怀疑”的是您`for-loop`由于某种原因而崩溃（`griddim`为空或存在超出范围的异常），这导致 EDT 变得不稳定。

在您通过可重复、可运行的示例启发使用之前，我们永远无法确定

```
public class TestGridLine {

    public static void main(String[] args) {
        new TestGridLine();
    }

    public TestGridLine() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new GridPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class GridPane extends JPanel {

        private boolean gridline;

        public GridPane() {
            setLayout(new GridBagLayout());
            JButton btn = new JButton("Grid");
            btn.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    setGridLine(!isGridLine());
                }
            });
            add(btn);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            int width = getWidth() - 1;
            int height = getHeight() - 1;

            //GridBox
            g.setColor(Color.BLACK);
            g.drawRect(0, 0, width - 1, height - 1);
            g.setColor(Color.WHITE);
            g.fillRect(1, 1, width - 1, height - 1);

            //draw grid lines
            if (gridline) {
                g.setColor(Color.getHSBColor(150, 150, 200));
                //vertical lines
                for (int v = 0; v < width - 2; v += 10) {
                    g.drawLine(v, 1, v, height - 2);
                }
                //horizontal lines
                for (int v = 0; v < height - 2; v += 10) {
                    g.drawLine(1, v, width - 2, v);
                }
            }

        }

//returns boolean gridline
        public boolean isGridLine() {
            return gridline;
        }

//set the grid line true or false
        public void setGridLine(boolean islines) {
            if (islines != gridline) {
                gridline = islines;
                repaint();
            }
        }
    }
} 
```

# r - 动态时间扭曲可以用于缺失值的时间序列吗？

> ID：13505728
> 
> 赞同：8
> 
> 时间：2012-11-22T04:03:15.113
> 
> 标签：r, time-series

如标题所示，我想知道是否可以使用 DTW（动态时间扭曲）来计算两个具有缺失值的时间序列之间的 DTW 距离。

假设这两个时间序列是两个气象站的每日温度，并且长度相等（例如 365 天），并且两个时间序列的缺失值在不同的日期。

如果这是可能的，R 中的 dtw 包是否能够处理缺失值？我没有找到可以在 dtw() 中设置的参数，例如`na.rm = T`.

非常感谢！

感谢 thelatemail 的建议。下面是两个时间序列的简化示例，其中每个时间序列仅包含 52 个元素，缺失值设置为`NA`。

```
TS1 = c(-3.26433,  -5.09096,    NA, -8.4158,    -5.85485,   -3.49234,   -7.64666,   -4.90124,   NA, -4.68836,   -1.38114,   1.55527,    2.81872,    2.44261,    3.57963,    6.19983,    7.42515,    8.41524,    6.32686,    10.0144,    9.53251,    13.4781,    12.3585,    10.6706,    10.2647,    16.6848,    16.4855,    20.1482,  NA,   21.5734,    20.3946,    20.8824,    18.0325,    18.5813,    17.5453,    16.3315,    14.3068,    11.3164,   9.96398, 5.53102,    9.55094,    9.05897,    6.81199,    5.20343,    1.63158,    -0.661077,  -4.33853,   -6.53655,   NA,   -10.8646, 1.11843,    1.23786)

TS2 = c(-5.76852,  -10.2207,    -11.8465,   NA, -1.70019,   -3.60319,   -5.7718,    -3.81106,   -5.62284,   -3.57516,        0.314511,  0.64058,    0.476162,   NA, 4.23757,    5.15417,    7.29422,    NA, 1.57376,    9.28236,    8.05182,    13.7175,    9.5453, 10.2417,    9.32423,    18.214, 18.3726,    16.661, 20.6563,    22.2901,  22.1109,  19.129, 15.8615,    16.7817,    17.247, 15.9921,    14.5804,    11.3693,    10.9349,    10.1196,  3.7467,   9.09229,    6.91285,    NA, 4.20934,    -0.566403,  -2.94184,   -3.81432,   -10.0212,   -15.9876,    -2.56286,  -1.88976) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T05:11:16.753

可能不是，我查看了包装手册，没有关于缺失或 NA 值的信息。我还尝试将您的数据提供给`dtw()`它，但它失败了：

```
Error in dtw(TS1, TS2) : 
  No warping paths exists that is allowed by costraints 
```

但是当我将所有 NA 值更改为 0 时，它很容易工作。

因此，如果您唯一的解决方案是这个包，您可以在[DTW 包论坛](http://lists.r-forge.wu-wien.ac.at/forum/forum.php?set=custom&forum_id=331&style=nested&max_rows=25&submit=Change+View)上发帖，或者您可能必须自己处理丢失的数据。您可以在这里找到~~[一些](http://rss.acs.unt.edu/Rdoc/library/fSeries/html/na.html)~~[提示](https://stackoverflow.com/questions/6058677/how-to-create-na-for-missing-data-in-a-time-series)或~~使用[包](http://rss.acs.unt.edu/Rdoc/library/fSeries/html/na.html)[`na()``fSeries`](http://rss.acs.unt.edu/Rdoc/library/fSeries/html/na.html)~~*.

*此套餐[不再可用](http://cran.r-project.org/web/packages/fSeries/index.html)。建议改用[`timeSeries`包](http://cran.r-project.org/web/packages/timeSeries/timeSeries.pdf)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-16T18:50:37.600

我也遇到这种情况。将 DTW 与包含 NA 值的时间序列一起使用时收到错误消息的原因是，当 DTW 路径中存在 NA 时，翘曲距离将不确定。我建议您使用一些 ARIMA 模型估算 NA 值，然后使用 DTW。查看[此](https://stats.stackexchange.com/questions/104565/how-to-use-auto-arima-to-impute-missing-values)或[此](https://stackoverflow.com/questions/30584423/imputing-missing-values-using-arima-model)以估算缺失的时间序列值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-26T03:00:12.290

dtw 函数的工作方式如下。

```
#this shows how to register a distance function with proxy
install.packages("proxy")
require("proxy")

DWT.DIST<-function (x,y)
{

  a<-na.omit(x)
  b<-na.omit(y)

  return(dtw(a,b)$normalizedDistance)
}

## create a new entry in the registry with two aliases
pr_DB$set_entry(FUN = DWT.DIST, names = c("DWT.DIST"))

d<-dist(appliances_t, method = "DWT.DIST")
hc<-hclust(d,"ave")
plot(hc)

pr_DB$delete_entry("DWT.DIST") 
```

资料来源：

[链接01](https://stats.stackexchange.com/a/58786/205888)； [链接 02](http://dtw.r-forge.r-project.org/)

# python - Python 在不重新输入函数参数的情况下覆盖函数/方法

> ID：13505729
> 
> 赞同：1
> 
> 时间：2012-11-22T04:03:25.267
> 
> 标签：python, oop, function, metaclass

例如我有

```
class A:
    def f(self, x, y, z):
        # do something with x, y, z 
```

是否可以在不重新键入“self，x，y，z”的情况下覆盖 f。基本上我有一个带有 10 个参数的函数的类，并打算让许多类扩展它，所以我不想每次都输入参数。请不要只告诉我传递所有参数的列表/字典。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T04:07:28.667

不可以。如果您希望被覆盖的函数具有相同的参数，则需要键入相同的参数。您可以覆盖它以具有不同的参数，因此无法神奇地知道您希望它具有相同的参数。

避免这种情况的唯一方法是使用`*args`and/or `**kwargs`，但您似乎在说您不想这样做。（此外，这与使用正确参数实际定义函数并不完全相同，如果您使用错误的参数调用会引发错误的位置/时间。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T04:15:19.067

```
class A:
    def facade_f(self, x, y, z):
        self._real_f({'x': x, 'y': y, 'z': z})

    def _real_f(self, params):
        # do something with params['x'], params['y'], params['z']

class B(A):
    def _real_f(self, params):
        # do something with params['x'], params['y'], params['z'] 
```

这不是真正的覆盖，但是您公开了一个带有所有命名参数的漂亮接口，可以在`facade_f`方法中检查它们的类型和值，并且在扩展它时仍然输入很少。

工作示例：

```
class A:
    def facade_f(self, x, y, z):
        self._real_f({'x': x, 'y': y, 'z': z})

class B(A):
    def _real_f(self, params):
        print params['x'], params['y'], params['z']

B().facade_f(1, 2, 3) 
```

# html - 从另一个页面加载多个内容块而不指定 ID

> ID：13505730
> 
> 赞同：0
> 
> 时间：2012-11-22T04:03:40.743
> 
> 标签：html, load, matching

我通过 jquery .load 事件将内容从一个页面加载到另一个页面。我目前这样做：

```
$('#someDiv').load('/directory/file.html #someDiv'); 
```

但是，如果我不必每次都指定 div 的名称会更好。由于它们在两个页面上都是相同的，有没有办法说“在 page1 上找到一个 div 并将其内容加载到 page2 上的匹配 div 中？这个想法是不必每次添加新内容时都更新脚本.

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:33:54.550

经过大约一周的工作......我想通了。脚本如下：

```
// Run this function on divs with the class of include
$("div.include").each(function(){
    // load shared content file
    var pathname = "shared-content.html"; 

    //get the id value of each div on current page with class of include
    var contentID = ("#" + $(this).attr("id"));

    //find div with same id value in shared content file, then load its content
    $(contentID).load(pathname + " " + contentID);  
}); 
```

**使用步骤：**

1.  将此脚本加载到 document.ready 或页面内容之后的脚本标记中。
2.  在共享内容文件中，添加一些 html 并将其放在具有唯一 ID 的 div 中。
3.  通过添加您在共享内容文件中使用的相同唯一 ID，在任何页面（加载脚本的位置）上加载共享内容。

# sql - oracle选择查询条件

> ID：13505731
> 
> 赞同：0
> 
> 时间：2012-11-22T04:03:47.627
> 
> 标签：sql, oracle

我有一个搜索 jsp，它有多个用于搜索数据库的条件（ID OR NAME OR DATE OR ...）。我需要一个选择查询来满足所有条件。我已经部分编写了选择查询，但它运行不正常。请帮我完成查询

```
 select * from table 1
   where Id in ( select id from table 1 where ( those three conditions here)

   i have (1=? or id=?)
         and (1=? or name=?)
         and (1=? or date =?) 
```

但它返回完整的表。我知道这三个条件返回 true。如何修改它以获得结果。我不想要任何存储过程，因为我是新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:10:53.360

如果您的条件对每一行都成立，您将获得完整的表格。

例如，如果您的变量是`1`,`1 = 1`将为真，并且将返回每一行。

p，s，我不明白你为什么嵌套了选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:51:26.923

你有一个多余的子查询。

我假设第一个参数将是`1`如果第二个参数为空，`0`如果第二个参数不为空；同样，如果第四个参数为空，第三个参数也会`1`，`0`如果第四个参数不为空，等等？

尝试这个：

```
select * from table
where (1=? or id=?)
     and (1=? or name=?)
     and (1=? or date =?) 
```

例如，如果用户按名称搜索，我希望参数类似于`(1,NULL,0,'SMITH',1,NULL)`.

（此外，您不能`1`用于表别名。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:41:33.530

```
select * from table 1
   where Id in ( select 
         (case 
               when (1=? or id=?) and (1=? or name=? )  and (1=? or date =?) then id
          end) as id from table 1 ) 
```

我希望这就是你要找的

# objective-c - iOS 无法画出简单的线条

> ID：13505732
> 
> 赞同：0
> 
> 时间：2012-11-22T04:03:50.287
> 
> 标签：objective-c, ios, drawrect

```
- (void)drawRect:(CGRect)rect
{
CGFloat red[4] = {1.0f, 0.0f, 0.0f, 1.0f};
CGContextSetStrokeColor(c, red);
CGContextBeginPath(c);
CGContextMoveToPoint(c, 150.0f, 200.0f);
CGContextSetLineWidth(c, 5.0f);
CGContextAddLineToPoint(c, 50,300);
CGContextAddLineToPoint(c, 260,300);
CGContextClosePath(c);
} 
```

这是我的`viewwillappear`

```
-(void)viewWillAppear:(BOOL)animated
{
    [self.view setNeedsDisplay];         
} 
```

但是，视图不能画线，只能画空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:08:53.607

你试过这个吗？

```
- (void)drawRect:(CGRect)rect
    [super drawRect:rect];

    CGContextRef context    = UIGraphicsGetCurrentContext();

    CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);

    // Draw them with a 2.0 stroke width so they are a bit more visible.
    CGContextSetLineWidth(context, 2.0);

    CGContextMoveToPoint(context, 0,0); //start at this point

    CGContextAddLineToPoint(context, 20, 20); //draw to this point

    // and now draw the Path!
    CGContextStrokePath(context);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T05:36:53.310

你可以使用这个[drawRect 教程](http://www.techotopia.com/index.php/An_iPhone_Graphics_Drawing_Tutorial_using_Quartz_2D)，它对于抢先一步非常有用。关于您的问题，请确保您正在绘制的 UIView 是可见的视图，也许您正在覆盖 UIView 或者此视图之上还有其他视图，因此无法看到更改。也可能你忘记在显示之前初始化视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T04:24:23.787

看来您正在子类中使用该`drawRect`方法`UIViewController`。但是`drawRect`方法仅适用于`UIView`子类。

如果我是对的，请执行以下操作。否则请参阅@Anoop Vaidya 的回答。那应该有效。

子类化一个`UIView`，做你所有的事情`drawRect`并将该视图添加到你的视图控制器。

```
@interface myView : UIView
{

}
@end

@implementation myView

- (void)drawRect:(CGRect)rect{

}

@end

    -(void)viewWillAppear:(BOOL)animated
{
    myView *view1  = [[myView alloc]init];
    self.view =  view1;        
} 
```

# jquery - 将 selected="selected" 分配给动态选项列表

> ID：13505738
> 
> 赞同：0
> 
> 时间：2012-11-22T04:04:56.220
> 
> 标签：jquery, select, dynamic, option

在“编辑文章”页面中，我有一个选择列表，其中显示作者的名字和姓氏，以及 authorId 作为值。以及文章上下文和标题等（使用不同的方法获取） - 尽管此方法还包含特定文章的 authorId。

我需要在选项列表中选择文章的作者，而不是默认选择列表中的第一个选项。

我有的：

> > 回声''; //遍历选项列表中的作者姓名 $authors_name
> > 
> > ```
> >  foreach($authors_name as $nameRow){
> > 
> >                 echo'<option class="authorId" value = "' . $nameRow['AuthorID'] . '">'. $nameRow['FirstName'].' 
> > ```
> > 
> > '.$nameRow['LastName'] .''; }
> 
> ```
>  echo'</select>'; 
> ```

和jQuery：

> var currID = ('#selectAuthor').val();
> 
> ```
>  if(('.authorId').val() == currID){
>           $('.authorId').addClass('new_class')
>           $('.new_class').prop('selected',true);  
>     } 
> ```

或者

> var currID = ('#selectAuthor').val();
> 
> ```
>  if($("select option[value=currID]").attr('selected','selected')); 
> ```

任何帮助将不胜感激，我希望我想做的事情很清楚。提前致谢

我只用常规输入对其进行了简化，并在 jsfiddle.net 中对其进行了检查，这是 HTML

> ';
> 
> ```
> <option value = "2">Name val 2</option>
> <option value = "5">Name val 5</option>
> <option value = "1">Name val 1</option> 
> ```

这是jquery

> var currID = $('#selectAuthor').val(); if($("select option[value='+currID+']").prop('selected',true));​</p>

即使这样，它也不会将 selected="selected" 应用于 value="1" 的选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:28:11.123

我不确定你为什么不只是`selected`在你的服务器代码中添加。就您的 jQuery 而言，您有几个问题。

首先，您有语法问题，应该在浏览器控制台中引发错误。只需查看控制台就可以为您节省这一步

```
var currID = ('#selectAuthor').val(); 
```

应该：

```
var currID = $('#selectAuthor').val(); 
```

下一个语法问题出现在第二个版本中，当您传入`currID`字符串时，您将其添加为字符串文本，而不是作为连接到字符串中的变量。

```
if( $("select option[value='+currID+']").attr('selected','selected')); 
```

但是，这仍然是一个问题，因为您正在设置`attr`not `getting it. Use`prop` 方法，而不是它会返回一个布尔值

```
 if( $("select option[value='+currID+']").prop('selected')); 
```

第一个版本的问题是：

```
 if(('.authorId').val() == currID) 
```

再次使用语法（使用浏览器控制台！！！） ...missing `$`。即使使用正确的语法，您也无法在一个`if`元素集合中检查所有值。它只会返回第一个的值。这就像为 20 个不同的人要求一个电话号码。您要么必须使用方法遍历所有集合，并使用您的或使用`each()`检查每个集合`if``filter()`

```
 $('.authorId').filter(function(){
       return this.value == currID;
 }).prop('selected',true) 
```

# eclipse - Eclipse：每当编辑器收到输入时执行操作

> ID：13505742
> 
> 赞同：1
> 
> 时间：2012-11-22T04:05:16.327
> 
> 标签：eclipse, eclipse-plugin, editor, text-editor, text-extraction

我想知道是否可以确定刚刚在 Eclipse 的编辑器中输入了什么输入——我目前正在使用示例 JDT 编辑器——然后根据该输入执行操作。

例如：我在编辑器窗口中打开了一个文件 example.jav。我按'a'键。'a' 会正常显示在编辑器窗口中，但 'a' 也会打印到控制台。

显然，我将执行的操作将比 System.out.println() 语句更复杂，但如果有人可以帮助我告诉我编辑器本身检测到更改的位置，我可以从那里获取它。

几点注意事项：

*   我正在使用 Java 1.7 在 Eclipse 3.7.2 中工作
*   如果找不到 JDT 示例编辑器，请转到帮助 > 欢迎 > 示例并单击“Java 编辑器”。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:32:23.710

弄清楚了！

由于 Eclipse 中的 Editor API 非常庞大，以至于很难知道从哪里开始，所以我专注于在我的 Shell 中添加一个 KeyListener。事实证明，这在 SWT 中存在一些问题，因为当 Shell 内的项目获得焦点时，Shell 本身*就会失去*焦点。不过经过一番搜索，我偶然发现了[其他有同样问题的人](http://www.eclipsezone.com/eclipse/forums/t76552.html)。通过向 Shell 的显示添加过滤器，您可以添加适用于整个应用程序的 Listener 对象。如：

```
IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();
Shell shell = window.getShell();
shell.getDisplay().addFilter(SWT.KeyDown, new Listener()
                {
                    public void handleEvent(Event event)
                    {
                        System.out.println("" + event.character);
                    }
                }); 
```

为了进一步实现这一点并且只担心在特定的非小部件部分中按下的键（否则您可以只向该部分添加一个 KeyListener），您可以添加一个检查以确保当前活动的部分与您希望的任何部分相同使用简单的 if 检查执行操作。

```
final IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();
Shell shell = window.getShell();
shell.getDisplay().addFilter(SWT.KeyDown, new Listener()
                {
                    public void handleEvent(Event event)
                    {
                        IWorkbenchPage page = window.getActivePage();
                        IWorkbenchPart part = page.getActivePart();
                        IEditorPart editor = page.getActiveEditor();
                        if(part.equals(editor))
                        {
                            System.out.println("" + event.character);
                        }
                    }
                }); 
```

希望这可以帮助其他人比我找到解决方案时更轻松！

# javascript - 如何通过复选框启用单选组？

> ID：13505747
> 
> 赞同：5
> 
> 时间：2012-11-22T04:05:59.667
> 
> 标签：javascript, jquery, html, checkbox

我确实搜索了所有内容，但我仍然无法修复它。请帮忙：

这是我的js代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#email_acc").click(function() {
            if ( $(this).is(":checked") ) {
                $("#email_group").attr("enabled","enabled");
            }
        });  

        $("#system_acc").click(function() {
            if ( $(this).is(":checked") ) {
                $("#system_group").attr("enabled","enabled");
            }
        }); 
    });
</script> 
```

下面显示了我的 html 代码：

```
<input type="checkbox" name="email_acc" id="email_acc" />Email Account
<input type="checkbox" name="sys_acc" id="sys_acc" />System Account

<input type="radio" name="radio_email" value="create" class="email_group" id="radio_email_0" disabled="disabled"/>New
<input type="radio" name="radio_email" value="change" id="radio_email_1" disabled="disabled"/>Change
<input type="radio" name="radio_email" value="terminate" id="radio_email_2" disabled="disabled"\ />Termination

<input type="radio" name="radio_system" value="create" class="system_group" id="radio_system_0" disabled="disabled"/>New
<input type="radio" name="radio_system" value="change" id="radio_system_1" disabled="disabled" />Change
<input type="radio" name="radio_system" value="terminate" id="radio_system_2" disabled="disabled" />Termination 
```

我不知道是什么问题。它只是不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T04:19:19.563

```
$(document).ready(function() 
{

    $("#email_acc").click(function()
    { 
        if ( $(this).is(":checked") ) 
        {  
            $("input[name='radio_email']").removeAttr("disabled");
           //      ^----------------enable all the checkbox with common name
        }
    });  

    $("#sys_acc").click(function()
   //     ^---------corrected id
    {
        if ( $(this).is(":checked") )
        {   $("input[name='radio_system']").removeAttr("disabled");
       //         ^----------------enable all the checkbox with common name
        }
    }); 
});​ 
```

[演示](http://jsfiddle.net/LuvaD/)

[演示 2](http://jsfiddle.net/LuvaD/1/)

*针对 OP 的新要求更新了代码，感谢 nnnnnn 清理了代码*

# *更新的* [演示 3](http://jsfiddle.net/LuvaD/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:09:07.613

```
$("#email_acc").click(function()
    {
        if ( $(this).is(":checked") )
        {
            $("#email_group").attr("disabled","false");
                  or
            $("#email_group").attr("disabled",false);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:37:49.937

没有`"enabled"`属性或属性，只有`"disabled"`可以设置`false`为启用相关元素的属性或属性。（“属性”在您的源 html 中，但对“属性”进行了动态更改，将其设置为布尔值以禁用或不禁用。）

除非使用旧版本的 jQuery，否则您应该使用该[`.prop()`方法](http://api.jquery.com/prop)来更新此属性。要启用整组单选按钮，您必须通过它们的`name`属性全部选择它们（或者给它们一个公共`class`并通过它来选择）。

```
$("#email_acc").click(function() { 
    if ( this.checked ) {  
        $('input[name="radio_email"]').prop('disabled', false);
    }
});

// and the same for the other checkbox and group. 
```

请注意，您的第二个复选框有一个，`id="sys_acc"`但您的 JS 正在尝试选择`"#system_acc"`- 您需要确保它们匹配。

如果在未选中复选框的情况下需要再次禁用组，则可以执行以下操作，删除`if`语句并将属性设置为`disabled`属性的倒数`checked`：

```
$('#email_acc').click(function() { 
    $('input[name="radio_email"]').prop('disabled', !this.checked);
});

// and again the same idea for the other checkbox and group. 
```

演示：http: [//jsfiddle.net/UqTB3/](http://jsfiddle.net/UqTB3/)

请注意，在这两种情况下，我都使用`this.checked`而不是`$(this).is(":checked")`：我发现前者更易于阅读，并且`checked`直接检查 DOM 元素的属性比创建 jQuery 对象并使用`.is(":checked")`. 但是，如果您真的热衷于使用 jQuery 来处理*所有内容*，您可以进行适当的替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-20T04:46:04.567

1.  在输入 html 中添加名称
2.  名称应该相同

    ```
    <script type="text/javascript">
       document.getElementById('cek3').onchange = function () {
           document.getElementById('fasilitas_kost1').disabled = !this.checked;
           document.getElementById('fasilitas_kost2').disabled = !this.checked;
           document.getElementById('fasilitas_kost3').disabled = !this.checked;
           document.getElementById('fasilitas_kost4').disabled = !this.checked;
           document.getElementById('fasilitas_kost5').disabled = !this.checked;
           document.getElementById('fasilitas_kost6').disabled = !this.checked;
           document.getElementById('fasilitas_kost7').disabled = !this.checked;
       };
    </script> 
    ```

# python - 世界你好！状态：302 暂时移动内容类型

> ID：13505752
> 
> 赞同：1
> 
> 时间：2012-11-22T04:07:03.727
> 
> 标签：python, google-app-engine, http-status-code-302

我对 Google App Engine 编码非常陌生，不知道如何解决这个问题。我正在做的是一件非常简单的事情。我在本地 PC 上设计并制作了一个网站。现在要托管它，我使用的是 Google App Engine。那我该怎么办，我只是下载了 python 应用程序引擎启动器并将我的整个网站上传到 Google Apps 上。我已经在 Godaddy 的控制面板上设置了所有重定向！它已经注册了我的域名。

现在，每当我第一次访问该站点时，我都会收到“Hello world！状态：302 已临时移动内容类型”消息，然后单击刷新时，它会加载该网站。我怎样才能摆脱这个？

非常感谢您对此的帮助。

谢谢

# ejb - 为无状态和有状态会话 bean 获得相同的输出

> ID：13505755
> 
> 赞同：0
> 
> 时间：2012-11-22T04:07:32.493
> 
> 标签：ejb, ejb-2.x

这是我尝试过的示例代码

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"  
    pageEncoding="ISO-8859-1"%>  
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">  
<html>  
<head>  
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">  
<title>Sample1</title>  
</head>  
<body>  
<form action="ActionServlet" method="post">  
<h1>This is inside sample1</h1>  
<input type="submit">  
</form>  
</body>  
</html> 
```

发表于 2012 年 11 月 19 日星期一 10:58:11 PM 私信 引用 这是我尝试的示例代码

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"  
    pageEncoding="ISO-8859-1"%>  
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">  
<html>  
<head>  
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">  
<title>Sample1</title>  
</head>  
<body>  
<form action="ActionServlet" method="post">  
<h1>This is inside sample1</h1>  
<input type="submit">  
</form>  
</body>  
</html> 
```

单击提交时，控件导航到名为 ActionServlet 的 servlet

```
 public class ActionServlet extends HttpServlet {  
    private static final long serialVersionUID = 1L;  

    /** 
     * Default constructor.  
     */  
    public ActionServlet() {  
        // TODO Auto-generated constructor stub  
    }  

    /** 
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response) 
     */  
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {  
        // TODO Auto-generated method stub  
        doPost(request, response);  
    }  

    /** 
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response) 
     */  
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {  
        // TODO Auto-generated method stub  
        System.out.println("This is inside doPost method for action servlet");  

        System.out.println("Before calling EJB for action servlet");  
        try{  
            Context ic = new InitialContext();  

            //first instance creation  
            StateFulServiceHome home=(StateFulServiceHome)ic.lookup("Stateful1234");  
            StateFulService sample=(StateFulService)home.create();  
            sample.setName("Hello1223");  
            sample.getName();  
            //second instance creation  
            Context ic1 = new InitialContext();  
            StateFulServiceHome home1=(StateFulServiceHome)ic1.lookup("Stateful1234");  
            StateFulService sample1=(StateFulService)home1.create();  
            sample1.getName();  
        }catch (Exception e) {  
            e.printStackTrace();  
        }  
        System.out.println("After calling EJB in action servlet1");  
        request.getRequestDispatcher("Sample2.jsp").forward(request,response);  

    }  

} 
```

ActionServlet 在名为 stateful session bean 的 bean 上调用业务方法

```
public class StateFulBean implements SessionBean{  
    String name;  
    public void setName(String name)throws RemoteException{  
        this.name =name;  
    }  
    private SessionContext context;  
    public void ejbActivate() throws EJBException, RemoteException {  
        // TODO Auto-generated method stub  
        System.out.println("*********This is inside ejbActivate method***********");  

    }  

    public void ejbPassivate() throws EJBException, RemoteException {  
        // TODO Auto-generated method stub  
        System.out.println("*********This is inside ejbpassivate method***********");  

    }  

    public void ejbRemove() throws EJBException, RemoteException {  
        // TODO Auto-generated method stub  
        System.out.println("*********This is inside Ejb remove method***********");  

    }  
    public void ejbCreate() throws EJBException,RemoteException{  
        System.out.println("*********This is inside create method***********");  
    }  
    public void setSessionContext(SessionContext ctx) throws EJBException,  
            RemoteException {  
        // TODO Auto-generated method stub  
        context=ctx;  
        System.out.println("*********This is for set session context***********");  
    }  
    public void getName()throws RemoteException{  
        System.out.println("***********This is for start of getting business method*****");  
        System.out.println("The name obtained is"+this.name);  
        System.out.println("***********This is for end of getting business method*****");  
    }  

} 

    public interface StateFulService extends EJBObject {  
    public void getName()throws RemoteException;  
    public void setName(String name)throws RemoteException;  
} 

  public interface StateFulServiceHome extends EJBHome {  
    public StateFulService create() throws RemoteException,CreateException;  
} 
```

最后是我的 ejb-jar.xml

```
 <?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE ejb-jar PUBLIC "-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 2.0//EN" "http://java.sun.com/dtd/ejb-jar_2_0.dtd">  
<ejb-jar>  
 <enterprise-beans>  
   <session>  
      <ejb-name>Stateful1234</ejb-name>  
      <home>StateFulServiceHome</home>  
      <remote>StateFulService</remote>  
      <ejb-class>StateFulBean</ejb-class>  
      <session-type>Stateful</session-type>  
      <transaction-type>Container</transaction-type>  
   </session>  
</enterprise-beans>  
</ejb-jar> 
```

对于有状态和无状态会话 bean，我得到了相同的输出，我的假设是当我的 bean 被定义为有状态时，我应该在第二次查找 bean 时获得名称。

如果我在某个地方错了，请告诉我。

-Shyam

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:41:56.163

> 我的假设是当我的 bean 被定义为有状态时，我应该在第二次查找 bean 时获取名称。

这不是有状态会话 bean 的工作方式。当您使用有状态会话 bean 时，您可以将代理存储到“某处”的 bean，即，当您在一段时间内不对其调用方法时，容器将钝化它。如果在销毁 bean 之前的任何时间通过代理发出后续请求，容器将“记住”客户端（在您的情况下为 servlet）。换句话说，后续调用将记住会话状态，从而记住会话 bean 的状态性质。您可以在会话 bean 中存储状态，甚至跨 HTTP 请求（因此，存储对代理的引用的原因）。

请注意，这与查找几乎没有关系。在您的代码中：

```
//first instance creation  
StateFulServiceHome home=(StateFulServiceHome)ic.lookup("Stateful1234");  
StateFulService sample=(StateFulService)home.create();  
sample.setName("Hello1223");  
sample.getName();  
//second instance creation  
Context ic1 = new InitialContext();  
StateFulServiceHome home1=(StateFulServiceHome)ic1.lookup("Stateful1234");  
StateFulService sample1=(StateFulService)home1.create();  
sample1.getName(); 
```

您已经创建了会话 bean 的两个实例，并且对它们有两个代理。第二个 bean 显然不会知道存储在第一个中的状态。

要考虑无状态会话 bean，那么您需要记住存储对其代理的引用有点毫无意义，尤其是在`HttpSession`对象中。这主要是因为存储在 bean 中的状态仅在方法调用期间有效。EJB 容器管理一个无状态会话 bean 池，每次调用都可能涉及池中不同的未使用实例。

PS - 你现在学习 EJB 2.x 有什么理由吗？它不仅陈旧，而且 Java EE 6 应用程序不再需要它的一部分，并且 Java EE 7 中正在修剪某些部分（实体 bean）。

# android - 如何在sqlite中将同一表的两个URL作为blob插入

> ID：13505757
> 
> 赞同：1
> 
> 时间：2012-11-22T04:07:48.037
> 
> 标签：android, sqlite

我在一张桌子上有两张图片。现在我必须将它们都作为 blob 存储在 SQLite 中。但我正在努力寻找一种在两个 URL 的情况下获取它的方法。如果是一个我可以解决它。谁能建议我如何解决这个问题？

我正在尝试的代码是：

```
private void callInsertion(String bid, String bbookId,String bname, String image1, String image2, String bdesc) throws IOException {
// TODO Auto-generated method stub

     DefaultHttpClient mHttpClient = new DefaultHttpClient();
     HttpGet mHttpGet1 = new HttpGet(image1);
     HttpGet mHttpGet2 = new HttpGet(image2);
     HttpResponse mHttpResponse = mHttpClient.execute(mHttpGet1,mHttpGet2);

     if (mHttpResponse.getStatusLine().getStatusCode() == HttpStatus.SC_OK) 
     {
         HttpEntity entity = mHttpResponse.getEntity();
         if ( entity != null) 
         {
             insertData(bid,bbookId,bname,EntityUtils.toByteArray(entity),EntityUtils.toByteArray(entity),bdesc);
         }
     }
} 
```

但是我在客户端执行时遇到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:47:14.053

试着变成这样！！

```
 private void callInsertion(String bid, String bbookId,String bname, String image1, String image2, String bdesc) throws IOException {
            // TODO Auto-generated method stub

        byte[] FirstImage = null;
        byte[] SecondImage = null;
        DefaultHttpClient mHttpClient1 = new DefaultHttpClient();
        DefaultHttpClient mHttpClient2 = new DefaultHttpClient();
        HttpGet mHttpGet1 = new HttpGet(image1);
        HttpGet mHttpGet2 = new HttpGet(image2);
        HttpResponse mHttpResponse1 = mHttpClient1.execute(mHttpGet1);
        HttpResponse mHttpResponse2 = mHttpClient2.execute(mHttpGet2);
        Log.i("calling112221","______________");
        if (mHttpResponse1.getStatusLine().getStatusCode() == HttpStatus.SC_OK) 
        {
               HttpEntity entity1 = mHttpResponse1.getEntity();
               FirstImage = EntityUtils.toByteArray(entity1);
               Log.i("calling11111111","______________");
        }
        if (mHttpResponse2.getStatusLine().getStatusCode() == HttpStatus.SC_OK) 
        {
                HttpEntity entity2 = mHttpResponse2.getEntity();
                SecondImage = EntityUtils.toByteArray(entity2);
                Log.i("calling","______________");
        }

                    insertData(bid,bbookId,bname,FirstImage,SecondImage,bdesc);
        } 
```

# pdf - 如何在servlet中获取以HTML格式提交的PDF表单的输入数据？

> ID：13505758
> 
> 赞同：-1
> 
> 时间：2012-11-22T04:07:59.553
> 
> 标签：pdf, servlets

我有一个 PDF 表单，其中包含如下一些字段
[PDF 下载链接](http://cyclops49.sg1002.myweb.hinet.net/testPDF2.pdf)
输入文本字段名称为“名称”
输入复选框字段名称为“语言”
输入单选按钮字段名称为“性别”
选择组合框字段名称为“工作”
提交按钮操作作为 HTML 格式，并将 URL 提交到[http://local.test.com/servlet1](http://local.test.com/servlet1)

和 servlet1，其代码为打击

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    for(Enumeration e = request.getParameterNames(); e.hasMoreElements();) {
        String paraName = (String) e.nextElement();
        String paramValue = URLDecoder.decode(new String(request.getParameter(paraName).getBytes("iso-8859-1")), "UTF-8");
        System.out.println(paraName + "=" + paramValue);
    }               
} 
```

比我在 PDF 表单中输入一些数据并单击提交，我得到系统输出如下

```
SystemOut     O sex=M
SystemOut     O input7=eric
SystemOut     O input34=zhTW
SystemOut     O job=1 
```

“sex”（单选按钮）和“job”（选择组合）的字段都可以，但是为什么“name”（输入文本）和“language”（复选框）的字段名称更改为“inputXX”？

我尝试使用

```
request.getParameter("name") 
```

我刚得到空...

有什么建议吗？非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:13:26.263

我检查了您的表单，我看到了名为“name”的字段以及将数据发布到 URL 的提交按钮。其中一个提交按钮限制了发送到服务器的参数数量。

我没有立即看到任何错误，但我建议您使用以下 Servlet 来调试您的应用程序：http: [//itextpdf.com/examples/iia.php ?id=169](http://itextpdf.com/examples/iia.php?id=169)

此 servlet 将在 GET 请求的情况下将所有参数显示为查询字符串（但乍一看，PDF 被配置为 POST 数据）；如果是 POST，它将显示所有发送的数据。这样，您可以找出问题所在。

随时通知我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:46:48.663

`name`当使用标识符导出文本字段的值时`input7`，PDF 查看器只执行它被要求做的事情，因为名称字段的字段字典包含一个请求使用键导出字段值的条目`input7`。其他一些领域也是如此。

详细地说，字段字典（对象 106 0）包含以下条目：

```
/Ff 4194306
/F  4
/Type   /Annot
/Subtype    /Widget
/T  name
/AP Dictionary
/P  42 0 R
/MK Dictionary
/BS Dictionary
/FT /Tx
/Rect   [54.8909, 688.564, 161.891, 705.564]
/DA /Helv 0 Tf 0 g
/TM input7 
```

看看最后一个条目。/TM 键定义为（参见[ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)第 12.7.3.1 节）：

> 文本字符串*（可选；PDF 1.3）*从文档中导出交互式表单字段数据时应使用的映射名称

如果您不希望使用该`input7`键导出字段值，请从字段定义中删除该**/TM**条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:06:49.183

PDF 文件是由 Acrobat X Pro 从 HTML 文件翻译的，我注意到一些文件，例如“名称”...

```
<input id="name" type='text'> 
```

比我更新 HTML 文件

```
<input name="name" type='text'> 
```

并再次翻译成PDF并提交，现在一切正常~:)

# python - wx.lib.editor 中的线程

> ID：13505776
> 
> 赞同：2
> 
> 时间：2012-11-22T04:10:07.037
> 
> 标签：python, multithreading, editor, wxpython

我在使用线程和编辑器控件时遇到问题，我无法在编辑器中使用线程进程。例如，我只是简单地将文本添加到带有线程的编辑器控件中，但它发生了错误：

```
PyAssertionError: C++ assertion "m_buffer && m_buffer->IsOk()" failed at ..\..\include\wx/dcbuffer.h(104) in wxBufferedDC::UnMask(): invalid backing store 
```

这是我的代码：

```
import threading
import  wx
import  wx.lib.editor    as  editor

class RunTest(threading.Thread):
    def __init__(self,master,type):
        threading.Thread.__init__(self)
        self.master = master
        self.type = type

    def run(self):
        if self.type == 1:
            for i in range(1000):
                self.master.ed.BreakLine(None)
                self.master.ed.SingleLineInsert("Text Line Number: " + str(i))

class Test(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, 'Test', size=(900, 700))
        win = wx.Panel(self, -1)
        self.ed = editor.Editor(win, -1)
        box = wx.BoxSizer(wx.VERTICAL)
        box.Add(self.ed, 1, wx.ALL|wx.GROW, 1)
        win.SetSizer(box)
        win.SetAutoLayout(True)
        self.ed.Bind(wx.EVT_LEFT_DCLICK, self.OnClick)

    def OnClick(self,event):
        thread = RunTest(self,1)
        thread.start()

if __name__ == '__main__':
    app = wx.PySimpleApp()
    root = Test()
    root.Show()
    app.MainLoop() 
```

请帮我修复它。我使用 wx.python 库，python 2.7，在窗口 7 中运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:22:55.227

当您尝试在非 GUI 线程中更新 GUI 小部件时，您通常会遇到这种错误。

我为此目的制作了一个小型图书馆：[https ://github.com/vaal12/workerthread](https://github.com/vaal12/workerthread)

具体看@workerthread.executeInGUIThreadDecorator，examples\example_gui_class.py中的例子

# python - 在 Webtest 测试失败中找到真正的错误

> ID：13505778
> 
> 赞同：22
> 
> 时间：2012-11-22T04:10:19.800
> 
> 标签：python, unit-testing, webtest

我正在使用 Python 和 Webtest 来测试 WSGI 应用程序。我发现处理程序代码中引发的异常往往会被 Webtest 吞噬，然后引发泛型：

```
AppError: Bad response: 500 Internal Server Error 
```

我如何告诉它引发或打印导致此问题的原始错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-04-05T23:33:56.237

虽然 clj 的答案确实有效，但您可能仍希望访问测试用例中的响应。为此，您可以在向 TestApp 发出请求时使用`expect_errors=True`（来自[webtest 文档](http://docs.pylonsproject.org/projects/webtest/en/latest/testapp.html#what-is-tested-by-default "文件")），这样就不会引发 AppError。这是一个我期望出现 403 错误的示例：

```
# attempt to access secure page without logging in
response = testapp.get('/secure_page_url', expect_errors=True)

# now you can assert an expected http code, 
# and print the response if the code doesn't match
self.assertEqual(403, response.status_int, msg=str(response)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-16T09:10:13.357

您的 WSGI 框架和服务器包含捕获异常并执行某些操作的处理程序（在主体中呈现堆栈跟踪，将回溯记录到日志文件等）。默认情况下，Webtest 不显示实际响应，如果您的框架在正文中呈现堆栈跟踪，这可能很有用。当我需要查看响应的正文时，我使用以下 Webtest 扩展：

```
class BetterTestApp(webtest.TestApp):

    """A testapp that prints the body when status does not match."""

    def _check_status(self, status, res):
        if status is not None and status != res.status_int:
            raise webtest.AppError(
                "Bad response: %s (not %s)\n%s", res.status, status, res)
        super(BetterTestApp, self)._check_status(status, res) 
```

更好地控制异常发生的情况取决于您使用的框架和服务器。对于内置`wsgiref`模块，您可能能够覆盖[error_output](https://docs.python.org/2/library/wsgiref.html#wsgiref.handlers.BaseHandler.error_output)以实现您想要的。

# vb.net - 为什么我在有声读物（次要形式）中的字符串变量不被视为 ShoppingCart（主要形式）的成员

> ID：13505780
> 
> 赞同：0
> 
> 时间：2012-11-22T04:10:23.093
> 
> 标签：vb.net

我用购物车表单中的`Dim MyCollection As New AudioBooks`语句实例化了内存中的一个地方。`Public Class ShoppingCart`这是我在有声读物`Dim StrLearnCalclusInOneDayAB As String`中以`Public Class AudioBooks`表格形式声明我的变量的地方。

```
If ListBox1.Items.Contains(Me.MyCollection.StrLearnCalclusInOneDayAB) 
```

这是我的主要语法错误，我需要查看 listbox1 以查看有声读物中的变量是否存在。我认为这是错误的，我知道它非常简单。
这是完整的代码。我需要一个 VB 导师，每个问题将支付 5 美元以下是完整的代码。

```
Public Class ShoppingCart
Dim Tax As Decimal
Dim PB1 As Decimal
Dim AB1 As Decimal
Dim MyCollection As New AudioBooks

'My overall objective is to move the strings from audiobooks and printbooks to shopping cart and calculate the total
'I was instructed to use a module

Private Sub Label3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Label3.Click
    Tax = 0.06
End Sub

Private Sub PrintBooksToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles PrintBooksToolStripMenuItem.Click
    'Create an instance of the printbook
    Dim frmPrintBook As New PrintBook

    'Display the form in modal styple
    frmPrintBook.ShowDialog()
End Sub

Private Sub AudioBooksToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles AudioBooksToolStripMenuItem.Click
    'Create an instance of the audiobook
    Dim frmAudioBook As New AudioBooks

    'Display the form in modal style
    frmAudioBook.ShowDialog()
End Sub

Public Sub ListBox1_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ListBox1.SelectedIndexChanged
    'Dim MyCollection As New AudioBooks
    'I want to run an if else statement which checks Listbox1 to see what books are in the cart and calculates the total
    'I'm having trouble finding these variables(from audiobooks) with intelligsense, 'StrLearnCalclusInOneDayAB' etc.
    'I'm pretty sure I need a new instance of memory from the audio bookcooks class to use the object variables
    'declared in that class.  I'm having trouble getting the syntax right.  Intelligsense only will find the lstboxaudio

    'The book says, form's class-level variables are accessible to statements in the form file,
    'they are not accessible by default to statements outside the form file

    'I want the code to look like this,  only lstboxAudio comes up in Intelligsense, why is this, I want StrLearnCalclusInOneDayAB to
    'Also I'm not sure I'm using contains correctly, hope I was clear

    'I will eventually need to total the books in the cart, why Can't intellisense find the variable?
    'This is my primary question

    If ListBox1.Items.Contains(MyCollection.StrLearnCalclusInOneDayAB) Then

    End If

    Cart.IDidItYourWay = 11.95
    Cart.TheHistoryofScotland = 14.5
    Cart.LearnCalculusInOneDay = 29.95
    Cart.FeelTheStress = 18.5

    Cart.LearnCalculusInOneDayAB = 29.95
    Cart.RelaxationTechniques = 11.5
    Cart.TheScienceOfBodyLanguage = 12.95
    Cart.TheHistoryOfScotlandAB = 14.5
    'I feel I shouldn't have to reference an object to change properties in a class, why must I do that?  
    'This question might not make sense.  
End Sub

Private Sub lblSubtotal_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles lblSubtotal.Click

End Sub 
```

结束类

```
Public Class AudioBooks

Public Sub lstboxAudio_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles lstboxAudio.SelectedIndexChanged

End Sub

Public Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    'Dim AudioBooks1 As String
    'AudioBooks1 = lstboxAudio.SelectedItem.ToString
    'Save the selected item to a string
    'ShoppingCart.ListBox1.Items.Add(AudioBooks1)
    'shopping cart form, listbox1, items, add, that string of audiobooks

    Dim StrLearnCalclusInOneDayAB As String
    StrLearnCalclusInOneDayAB = lstboxAudio.Items(0).ToString
    'If strLearnCalculusInOneDayAB is selected then add to the shopping cart listbox

    If lstboxAudio.SelectedIndex = 0 Then
        ShoppingCart.ListBox1.Items.Add(StrLearnCalclusInOneDayAB)
    End If
    ' if the selectedindex of lslboxaudio is 0, the string is selected
    'then move it to the shoppingcart

    Dim StrTheHistoryOfScotlandAB As String
    StrTheHistoryOfScotlandAB = lstboxAudio.Items(1).ToString

    If lstboxAudio.SelectedIndex = 1 Then
        ShoppingCart.ListBox1.Items.Add(StrTheHistoryOfScotlandAB)
    End If

    Dim StrTheScienceOfBodyLangAB As String
    StrTheScienceOfBodyLangAB = lstboxAudio.Items(2).ToString

    If lstboxAudio.SelectedIndex = 2 Then
        ShoppingCart.ListBox1.Items.Add(StrTheScienceOfBodyLangAB)
    End If

    Dim StrRelaxationTechniquesAB As String
    StrRelaxationTechniquesAB = lstboxAudio.Items(3).ToString

    If lstboxAudio.SelectedIndex = 3 Then
        ShoppingCart.ListBox1.Items.Add(StrRelaxationTechniquesAB)
    End If

End Sub

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    Me.Close()
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:29:06.643

它与有声读物表单中默认归类为私有的 Dim 语句有关。必须明确声明为公共的。不知道访问级别和静态共享变量动态会创建此问题。

# php - 可以创建一个 cron 作业来删除我在 mysql 数据库中的数据吗？

> ID：13505781
> 
> 赞同：1
> 
> 时间：2012-11-22T04:10:33.557
> 
> 标签：php, mysql, linux, cron

我有一种情况，我想在给定日期之后删除我的一些数据库记录。目前，我每天都使用手动方式运行一个 php 文件，以从我的数据库中删除所有较旧的记录。我听说过**cron jobs**。

我决定去做 cron 工作。

将其作为一项 cron 工作是一个不错的选择吗？有什么我需要考虑的利弊吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T05:03:49.737

Cron 是不错的选择，但如果数据与客户相关，我们通常不会进行硬删除，我们会进行软删除，例如更改状态，或将记录移动到某个存档表，以便将来参考。

如果您的 mysql 数据库空间有限，请务必使用 cron 作业来删除记录。但是如果你在服务器上有巨大或无限的 mysql 数据库空间，你可以使用 Cron 作业将旧记录传输到存档表。这将是安全的选择，因为您拥有所有数据。

另外，如果您无论如何都必须删除它，在删除之前，您可以在 cron 中编写代码来自动备份您的数据库并将其通过电子邮件发送给您，这样您就可以安全地删除记录而无需担心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T04:53:38.547

如果您想在给定日期之后删除数据，那么只需使用 cron 作业。这就是方法。关于利弊，每件事都有其利弊，但要视情况而定。在您的情况下，它们没有缺点。

# ruby-on-rails - 在没有添加参数的情况下向资源添加新路由？

> ID：13505782
> 
> 赞同：1
> 
> 时间：2012-11-22T04:10:34.090
> 
> 标签：ruby-on-rails, routes

我想在我的评论路线中添加一个 url，以便我可以调用“post_comments_latest_path”。我添加了类似 'get "comments/latest" => "comments#latest", :as => "latest"' 之类的内容，但路由添加了 :commend_id 到不需要的路径。有什么建议么？

```
 resources :posts, :except => [:index] do
    resources :comments, :except => [:index, :show] do
        post "replies" => "comments#create_reply", :as => "create_reply"
        get "replies/new" => "comments#new_reply", :as => "new_reply"        
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:13:19.880

这应该有效：

```
resources :posts, :except => [:index] do
  resources :comments, :except => [:index, :show] do
    post "replies" => "comments#create_reply", :as => "create_rely"
    get "replies/new" => "comments#new_reply", :as => "new_reply"
    get "latest", :on => "collection"
  end 
end 
```

**成员**路由是链接到特定资源的路由；需要一个`id`. **Collection**路由是链接到资源集合的路由
；不需要.**`id`**

 **有关详细信息，请参阅[Rails 路由指南](http://guides.rubyonrails.org/routing.html)。**

# database - 在 Heroku 上备份/加载后，PostgreSQL 数据库大小变小了

> ID：13505785
> 
> 赞同：5
> 
> 时间：2012-11-22T04:10:53.197
> 
> 标签：database, postgresql, heroku

最近，我为生产创建了一个新的 Heroku 应用程序，并用我从暂存数据库中获取的备份填充了它的数据库。

问题是两个数据库的数据库大小不同，如 Heroku 的 Postgres 网页所示！

我从中进行备份的第一个数据库是 360 MB，而填充的新数据库只有 290 MB。

在备份/加载过程中没有出现错误。并从两个数据库进行备份会产生相同的备份文件大小（大约 40 MB）。

该项目运行良好，两个应用程序看起来完全一样，但我担心我可能会丢失一些数据，这会在未来造成麻烦。

**更多信息**：我在两个应用程序上使用相同的生产数据库计划。

此外，第一个数据库未附加到第一个实例（因为它是从 Postgres 管理页面添加的，而不是从应用程序的资源页面添加的），并且新数据库附加到新应用程序。

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T08:32:07.947

postgresql DB 在使用时消耗更多空间是可以的。

The reason of this is its MVCC system. Every time you `UPDATE` any record in a database it creates another "version" of this record instead of rewriting the previous. This "outdated" records will be deleted by `VACUUM` process, when there will be no need in them.

So, when you restored your db from backup, it didn't have any "dead" records and its size was less.

Details here [http://www.postgresql.org/docs/current/static/mvcc.html](http://www.postgresql.org/docs/current/static/mvcc.html) and [http://www.postgresql.org/docs/current/static/sql-vacuum.html](http://www.postgresql.org/docs/current/static/sql-vacuum.html).

P.S. You do not need to worry about it. Postgresql will handle `VACUUM` automatically.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:26:59.650

看看这是否有帮助：[PostgreSQL 数据库大小增加](https://stackoverflow.com/questions/924993/postgresql-database-size-increasing)

还尝试单独测量每个表的大小，对于那些您看到差异的表，比较记录数：[postgresql 数据库总大小与单个表大小的总和不匹配](https://stackoverflow.com/questions/5087339/postgresql-total-database-size-not-matching-sum-of-individual-table-sizes)

# android - Flash 游戏 - 返回主菜单

> ID：13505786
> 
> 赞同：1
> 
> 时间：2012-11-22T04:10:55.680
> 
> 标签：android, ios, actionscript-3, flash

我正在开发一款 Flash 游戏并且即将完成，但我遇到了问题。当游戏结束或用户按下“结束游戏”按钮时，我想将它们返回到主菜单。游戏设置为主菜单在第 3 帧，游戏在第 4 帧运行。所有的游戏代码都在那里。

我尝试过的几件事：我只是简单地尝试返回到第三帧。这会导致错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at Hundred_fla::MainTimeline/GotoEndGame()[Hundred_fla.MainTimeline::frame5:66] 
```

我已经尝试将所有游戏变量恢复为其默认值，删除所有子项......等等......我也得到了完全相同的错误......不确定问题是什么。我认为一种解决方案是重新加载电影，但这将在 Android/IOS 上运行，我无法刷新网页。... 任何帮助将不胜感激。谢谢

编辑：第 66 行的代码是：

```
while(stage.numChildren > 0){
    stage.removeChildAt(stage.numChildren-1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T05:09:30.577

在尝试清除对象之前，您应该锁定阶段链接。您似乎正在删除运行代码的实例，因此它会丢失阶段引用。

```
var theStage:Stage=stage;
while(theStage.numChildren > 0){
    theStage.removeChildAt(0); 
    //you can always be sure that element at [0] exists, rather than going for [numChildren-1]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T04:37:12.460

根据第 5 帧的第 66 行，它可能会发生一些事情：

*   您的目标是 Flash Player 9，其中显示对象与您的 gotoAndStop 调用异步加载，因此您最终会得到空引用。解决方案是针对 Flash Player 10 或 11（在 Publish Settings [Ctrl+Shift+F12] 中更改它）。如果您确实需要以 Flash Player 9 为目标，可以使用[复杂的方法来确保可以访问属性](http://www.lecrabe.net/wordpress/?p=42)

*   在`gotoAndStop`您从第 5 帧引用对象之后，该对象不再可用，因此引发空对象引用错误

*   这是您的逻辑错误，我们需要查看一些代码才能找到它

如有疑问，最好将`gotoAndStop`调用保留为方法中的最后一个。

编辑：

看到代码后，似乎`stage`本身为null，从而抛出错误。如果它没有明显的区别，你可以用 try/catch 包围你的代码：

```
try {
    while(stage.numChildren){
        stage.removeChildAt(0);
    }
} catch (error:Error) {
} 
```

还可以尝试收听该`ADDED_TO_STAGE`事件以确保您`stage`在访问它之前有一个有效的参考。

# c++ - bool判断这么慢？

> ID：13505788
> 
> 赞同：5
> 
> 时间：2012-11-22T04:12:00.487
> 
> 标签：c++, c, optimization, sse

我正在优化函数，我尝试了各种方法甚至 sse，并修改了代码以从不同的位置返回以查看计算时间跨度，但最后我发现大部分时间都花在了布尔判断上。即使我用一个简单的添加操作替换了 if 语句中的所有代码，它仍然需要 6000 毫秒。

我的平台是 gcc 4.7.1 e5506 cpu。它的输入'a'和'b'是一个1000size的int数组，'asize'、'bsize'是对应的数组大小。MATCH_MASK = 16383，我运行函数 100000 次来统计一个时间跨度。有什么好办法解决这个问题。谢谢！

```
 if (aoffsets[i] && boffsets[i])  // this line costs most time 
```

代码：

```
uint16_t aoffsets[DOUBLE_MATCH_MASK] = {0}; // important! or it will only be right on the first time
uint16_t* boffsets = aoffsets + MATCH_MASK;
uint8_t* seen = (uint8_t *)aoffsets;
auto fn_init_offsets = [](const int32_t* x, int n_size, uint16_t offsets[])->void
{
    for (int i = 0; i < n_size; ++i)
        offsets[MATCH_STRIP(x[i])] = i;
};
fn_init_offsets(a, asize, aoffsets);
fn_init_offsets(b, bsize, boffsets);

uint8_t topcount = 0;
int topoffset = 0;
{
    std::vector<uint8_t> count_vec(asize + bsize + 1, 0);   // it's the fastest way already, very near to tls
    uint8_t* counts = &(count_vec[0]);
            //return aoffsets[0];   // cost 1375 ms
    for (int i = 0; i < MATCH_MASK; ++i)
    {
        if (aoffsets[i] && boffsets[i])  // this line costs most time
        {
                            //++affsets[i];  // for test
            int offset = (aoffsets[i] -= boffsets[i]);
            if ((-n_maxoffset <= offset && offset <= n_maxoffset))
            {
                offset += bsize;
                uint8_t n_cur_count = ++counts[offset];
                if (n_cur_count > topcount)
                {
                    topcount = n_cur_count;
                    topoffset = offset;
                }
            }
        }
    }
}
    return aoffsets[0];   // cost 6000ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T07:47:58.657

首先，`memset(count_vec,0, N);`一个 memaligned 缓冲区胜过 std::vector 30%。

您可以尝试使用无分支表达式 (aoffsets[i] * boffsets[i]) 并同时计算一些不用的表达式：`offset = aoffset[i]-boffset[i]; offset+bsize; offset+n_maxoffset;`.

根据*offset*的典型范围，人们可能会想计算 (offset+bsize) 的最小值/最大值，以在下一次迭代中限制所需的 memset(count_vec)：无需清除已经为零的值。

正如 philipp 所指出的，交错操作是很好的——然后，人们可以同时从 uint32_t aboffset[N] 读取 aoffset[i] 和 boffset[i]; 通过一些巧妙的位掩码（生成更改掩码：aoffset[i]、aoffset[i+1]），可以使用纯 c 中的 64 位模拟 SIMD 并行处理 2 个集合（直到直方图累积部分）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T09:21:48.670

您可以通过减少缓存未命中来提高程序的速度：`aoffsets[i]`并且`boffsets[i]`在内存中彼此相距较远。通过将它们彼此相邻放置，您可以显着加快程序速度。在我的机器（e5400 cpu，VS2012）上，执行时间从 3.0 秒减少到 2.3 秒：

```
#include <vector>

#include <windows.h> 
#include <iostream> 

typedef unsigned short uint16_t;
typedef int int32_t;
typedef unsigned int uint32_t;
typedef unsigned char uint8_t;

#define MATCH_MASK 16383
#define DOUBLE_MATCH_MASK (MATCH_MASK*2)
static const int MATCH_BITS = 14; 
static const int MATCH_LEFT = (32 - MATCH_BITS); 
#define MATCH_STRIP(x) ((uint32_t)(x) >> MATCH_LEFT)

static const int n_maxoffset = 1000;

uint16_t test(int32_t* a, int asize, int32_t* b, int bsize)
{
    uint16_t offsets[DOUBLE_MATCH_MASK] = {0}; 

    auto fn_init_offsets = [](const int32_t* x, int n_size, uint16_t offsets[])->void
    {
        for (int i = 0; i < n_size; ++i)
            offsets[MATCH_STRIP(x[i])*2 /*important. leave space for other offsets*/] = i;
    };
    fn_init_offsets(a, asize, offsets);
    fn_init_offsets(b, bsize, offsets+1);

    uint8_t topcount = 0;
    int topoffset = 0;
    {
        std::vector<uint8_t> count_vec(asize + bsize + 1, 0);   
        uint8_t* counts = &(count_vec[0]);
        for (int i = 0; i < MATCH_MASK; i+=2)
        {
            if (offsets[i] && offsets[i+1])  
            {
                int offset = (offsets[i] - offsets[i+1]); //NOTE: I removed 
                if ((-n_maxoffset <= offset && offset <= n_maxoffset))
                {
                    offset += bsize;
                    uint8_t n_cur_count = ++counts[offset];
                    if (n_cur_count > topcount)
                    {
                        topcount = n_cur_count;
                        topoffset = offset;
                    }
                }
            }
        }
    }
    return offsets[0];   
}

int main(int argc, char* argv[])
{
    const int sizes = 1000;
    int32_t* a = new int32_t[sizes];
    int32_t* b = new int32_t[sizes];
    for (int i=0;i<sizes;i++)
    {
        a[i] = rand()*rand();
        b[i] = rand()*rand();
    }

    //Variablen 
    LONGLONG g_Frequency, g_CurentCount, g_LastCount; 

    QueryPerformanceFrequency((LARGE_INTEGER*)&g_Frequency);
    QueryPerformanceCounter((LARGE_INTEGER*)&g_CurentCount); 

    int sum = 0;

    for (int i=0;i<100000;i++)
    {
        sum += test(a,sizes,b,sizes);
    }

    QueryPerformanceCounter((LARGE_INTEGER*)&g_LastCount); 
    double dTimeDiff = (((double)(g_LastCount-g_CurentCount))/((double)g_Frequency)); 

    std::cout << "Result: " << sum << std::endl <<"time: " << dTimeDiff << std::endl; 

    delete[] a;
    delete[] b;
    return 0;
} 
```

与您的`test()`.

```
#include <vector>

#include <windows.h> 
#include <iostream> 

typedef unsigned short uint16_t;
typedef int int32_t;
typedef unsigned int uint32_t;
typedef unsigned char uint8_t;

#define MATCH_MASK 16383
#define DOUBLE_MATCH_MASK (MATCH_MASK*2)
static const int MATCH_BITS = 14; 
static const int MATCH_LEFT = (32 - MATCH_BITS); 
#define MATCH_STRIP(x) ((uint32_t)(x) >> MATCH_LEFT)
static const int n_maxoffset = 1000;

uint16_t test(int32_t* a, int asize, int32_t* b, int bsize)
{
    uint16_t aoffsets[DOUBLE_MATCH_MASK] = {0}; // important! or it will only be right on the first time
    uint16_t* boffsets = aoffsets + MATCH_MASK;

    auto fn_init_offsets = [](const int32_t* x, int n_size, uint16_t offsets[])->void
    {
        for (int i = 0; i < n_size; ++i)
            offsets[MATCH_STRIP(x[i])] = i;
    };
    fn_init_offsets(a, asize, aoffsets);
    fn_init_offsets(b, bsize, boffsets);

    uint8_t topcount = 0;
    int topoffset = 0;
    {
        std::vector<uint8_t> count_vec(asize + bsize + 1, 0);   
        uint8_t* counts = &(count_vec[0]);

        for (int i = 0; i < MATCH_MASK; ++i)
        {
            if (aoffsets[i] && boffsets[i]) 
            {

                int offset = (aoffsets[i] - boffsets[i]); //NOTE: I removed the -= because otherwise offset would always be positive!
                if ((-n_maxoffset <= offset && offset <= n_maxoffset))
                {
                    offset += bsize;
                    uint8_t n_cur_count = ++counts[offset];
                    if (n_cur_count > topcount)
                    {
                        topcount = n_cur_count;
                        topoffset = offset;
                    }
                }
            }
        }
    }
    return aoffsets[0];   
}

int main(int argc, char* argv[])
{
    const int sizes = 1000;
    int32_t* a = new int32_t[sizes];
    int32_t* b = new int32_t[sizes];
    for (int i=0;i<sizes;i++)
    {
        a[i] = rand()*rand();
        b[i] = rand()*rand();
    }

    LONGLONG g_Frequency, g_CurentCount, g_LastCount; 
    QueryPerformanceFrequency((LARGE_INTEGER*)&g_Frequency);
    QueryPerformanceCounter((LARGE_INTEGER*)&g_CurentCount); 

    int sum = 0;

    for (int i=0;i<100000;i++)
    {
        sum += test(a,sizes,b,sizes);
    }

    QueryPerformanceCounter((LARGE_INTEGER*)&g_LastCount); 

    double dTimeDiff = (((double)(g_LastCount-g_CurentCount))/((double)g_Frequency)); 

    std::cout << "Result: " << sum << std::endl <<"time: " << dTimeDiff << std::endl; 

    delete[] a;
    delete[] b;
    return 0;
} 
```

# php - 我想使用排序单独回显数组的最高 5 个值

> ID：13505789
> 
> 赞同：0
> 
> 时间：2012-11-22T04:12:02.390
> 
> 标签：php, arrays, sorting, key, echo

```
<?php
$ranks = array(
"Alex 1"    =>" $team0",
"Alex 2"    => "$team1",
"Dave 1"    => "$team2",
"Dave 2"    => "$team3",
"Grant 1"   => "$team4",
"Grant 2"   => "$team5",
"Jason 1"   => "$team6",
"Jason 2"   => "$team7",
"Jessica 1" => "$team8",
"Jessica 2" => "$team9",
"Kevin 1"   => "$team10",
"Kevin 2"   => "$team11",
"Kris 1"    => "$team12",
"Kris 2"    => "$team13",
"Mark F 1" => "$team14",
"Mark F 2" => "$team15",
"Mark P 1" => "$team16",
"Mark P 2" => "$team17",
"Tim 1"     => "$team18",
"Tim 2"     => "$team19",
"Travis 1" => "$team20",
"Travis 2" => "$team21",
"Trevor 1" => "$team22",
"Trevor 2" => "$team23");
ksort($ranks);
foreach($ranks as $key => $val) {echo " ( $key ... $val\n pts ) ";}
?> 
```

我不想回显所有结果，而是想将最高 5 个结果回显到一个 html 表格行中，每个结果都有自己的...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T04:25:18.670

干得好！

```
// Sort by value descending, while maintaining key association
uasort($ranks, function($a,$b) {
    return $a < $b ? -1 : ($a == $b ? 0 : 1);
});

// Get top 5 results
$top5 = array_slice($ranks, 0, 5);

// Display results in a table
echo "<table>";
foreach($top5 as $key => $val) {
    echo "<tr><td>$key</td><td>$val pts</td></tr>\n ";
}
echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:27:36.330

```
<?php
    $ranks = array(
    "Alex 1"    =>" $team0",
    "Alex 2"    => "$team1",
    "Dave 1"    => "$team2",
    "Dave 2"    => "$team3",
    "Grant 1"   => "$team4",
    "Grant 2"   => "$team5",
    "Jason 1"   => "$team6",
    "Jason 2"   => "$team7",
    "Jessica 1" => "$team8",
    "Jessica 2" => "$team9",
    "Kevin 1"   => "$team10",
    "Kevin 2"   => "$team11",
    "Kris 1"    => "$team12",
    "Kris 2"    => "$team13",
    "Mark F 1" => "$team14",
    "Mark F 2" => "$team15",
    "Mark P 1" => "$team16",
    "Mark P 2" => "$team17",
    "Tim 1"     => "$team18",
    "Tim 2"     => "$team19",
    "Travis 1" => "$team20",
    "Travis 2" => "$team21",
    "Trevor 1" => "$team22",
    "Trevor 2" => "$team23");

    ksort($ranks);

    $table = "<table>";
    $index = 0;
    foreach($ranks as $key => $val) 
    { 
      if(index < 5)
        $table .= "<tr><td>$key</td><td>$val pts</td></tr>";
      else
       break;

     index++;
    }

    $table .= "</table";

    echo $table;

    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:41:00.400

尝试

```
asort($ranks);
$input = array_unique($ranks,SORT_NUMERIC);
array_splice($input , 5); 
echo "<table>";
foreach($input as $k => $v) {
  echo "<tr><td>$k</td>
            <td>$v pts</td>
        </tr>";
}
echo "</table>"; 
```

**参考：**

[`asort`](http://www.php.net/manual/en/function.asort.php)

[`array_uniuqe`](http://www.php.net/manual/en/function.array-unique.php)

[`array_splice`](http://in1.php.net/manual/en/function.array-splice.php)

# google-maps-api-3 - Google Maps API Places Library SearchBox

> ID：13505792
> 
> 赞同：0
> 
> 时间：2012-11-22T04:12:34.657
> 
> 标签：google-maps-api-3, infowindow, google-places, search-box

我正在尝试将 infowindows 添加到带有在谷歌搜索框搜索后返回的 PlaceDetails 的标记中。当我单击标记时，没有打开任何信息窗口。我无法弄清楚我哪里出错了？

```
 var infowindow = new google.maps.InfoWindow();
 //Function for search box
var input = document.getElementById('target');
var searchBox = new google.maps.places.SearchBox(input);
var markers = [];

google.maps.event.addListener(searchBox, 'places_changed', function() {
  var places = searchBox.getPlaces();

  for (var i = 0, marker; marker = markers[i]; i++) {
    marker.setMap(null);
  }

  markers = [];
  var bounds = new google.maps.LatLngBounds();
  for (var i = 0, place; place = places[i]; i++) {
    var image = new google.maps.MarkerImage(
        'img/pin_blue.png',
        new google.maps.Size(15,29),
        new google.maps.Point(0,0),
        new google.maps.Point(8,29)
      );

      var shadow = new google.maps.MarkerImage(
        'img/pin_shadow.png',
        new google.maps.Size(33,29),
        new google.maps.Point(0,0),
        new google.maps.Point(8,29)
      );

      var shape = {
        coord: [11,1,12,2,13,3,14,4,14,5,14,6,14,7,14,8,14,9,14,10,14,11,14,12,13,13,12,14,11,15,8,16,8,17,8,18,8,19,8,20,8,21,8,22,8,23,8,24,11,25,11,26,11,27,3,27,3,26,3,25,6,24,6,23,6,22,6,21,6,20,6,19,6,18,6,17,6,16,3,15,2,14,1,13,0,12,0,11,0,10,0,9,0,8,0,7,0,6,0,5,0,4,1,3,2,2,3,1,11,1],
        type: 'poly'
      };

    var marker = new google.maps.Marker({
      map: map,
      icon: image,
      shadow: shadow,
      shape: shape,
      title: place.name,
      position: place.geometry.location
    });

    markers.push(marker);

    bounds.extend(place.geometry.location);
  }

  map.fitBounds(bounds);

  //add an infowindow
  google.maps.event.addListener(markers, 'click', function() {
      infowindow.setContent(place.name);
      infowindow.open(map, markers[i]);
  });
});
google.maps.event.addListener(map, 'bounds_changed', function() {
  //var bounds = map.getBounds();
  searchBox.bindTo('bounds', map);
}); 
```

};

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:38:53.097

我稍微改变了你的代码。试试这个。

```
<html>
  <head>
    <script src="http://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>
    <script type='text/javascript'>
      var map, infowindow;
      var searchBox;
      var markers = [];

      function initialize() {
        var mapDiv = document.getElementById("map_canvas");
        map = new google.maps.Map(mapDiv, {
          center : new google.maps.LatLng(35, 138),
          zoom : 7,
          mapTypeId : google.maps.MapTypeId.ROADMAP
        });

        infowindow = new google.maps.InfoWindow();
        //Function for search box
        var input = document.getElementById('target');
        searchBox = new google.maps.places.SearchBox(input);

        google.maps.event.addListener(searchBox, 'places_changed', function() {
          var places = searchBox.getPlaces();

          for (var i = 0, marker; marker = markers[i]; i++) {
            marker.setMap(null);
          }

          markers = [];
          var bounds = new google.maps.LatLngBounds();
          for (var i = 0, place; place = places[i]; i++) {
            var image = new google.maps.MarkerImage('img/pin_blue.png', new google.maps.Size(15, 29), new google.maps.Point(0, 0), new google.maps.Point(8, 29));

            var shadow = new google.maps.MarkerImage('img/pin_shadow.png', new google.maps.Size(33, 29), new google.maps.Point(0, 0), new google.maps.Point(8, 29));

            var shape = {
              coord : [11, 1, 12, 2, 13, 3, 14, 4, 14, 5, 14, 6, 14, 7, 14, 8, 14, 9, 14, 10, 14, 11, 14, 12, 13, 13, 12, 14, 11, 15, 8, 16, 8, 17, 8, 18, 8, 19, 8, 20, 8, 21, 8, 22, 8, 23, 8, 24, 11, 25, 11, 26, 11, 27, 3, 27, 3, 26, 3, 25, 6, 24, 6, 23, 6, 22, 6, 21, 6, 20, 6, 19, 6, 18, 6, 17, 6, 16, 3, 15, 2, 14, 1, 13, 0, 12, 0, 11, 0, 10, 0, 9, 0, 8, 0, 7, 0, 6, 0, 5, 0, 4, 1, 3, 2, 2, 3, 1, 11, 1],
              type : 'poly'
            };

            var marker = createMarker({
              map : map,
              //icon : image,
              //shadow : shadow,
              //shape : shape,
              title : place.name,
              position : place.geometry.location,
              place_name : place.name
            })

            markers.push(marker);

            bounds.extend(place.geometry.location);
          }

          map.fitBounds(bounds);

        });

        google.maps.event.addListener(map, 'bounds_changed', function() {
          //var bounds = map.getBounds();
          searchBox.bindTo('bounds', map);
        });

      }

      function createMarker(options) {
        var marker = new google.maps.Marker(options);

        //add an infowindow
        google.maps.event.addListener(marker, 'click', function() {
          infowindow.setContent(options.place_name);
          infowindow.open(map, marker);
        });

        return marker;
      }

      google.maps.event.addDomListener(window, "load", initialize);
    </script>
  </head>
  <body>
    <input type="text" id="target" />
    <div id="map_canvas" style="width: 500px;height:400px"></div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:13:36.437

To get the Place Details to use in the InfoWindow, you need to make a second request to the Places API (when the marker is clicked). Inside the createMarker function (which has function closure on the "place"):

```
var request =  {
   reference: place.reference
};
google.maps.event.addListener(marker,'click',function(){
   service.getDetails(request, function(place, status) {
      if (status == google.maps.places.PlacesServiceStatus.OK) {
          var contentStr = '<h5>'+place.name+'</h5><p>'+place.formatted_address;
          if (!!place.formatted_phone_number) contentStr += '<br>'+place.formatted_phone_number;
          if (!!place.website) contentStr += '<br><a target="_blank" href="'+place.website+'">'+place.website+'</a>';
          contentStr += '<br>'+place.types+'</p>';
          infowindow.setContent(contentStr);
          infowindow.open(map,marker);
       } else { 
          var contentStr = "<h5>No Result, status="+status+"</h5>";
          infowindow.setContent(contentStr);
          infowindow.open(map,marker);
       }
   });
}); 
```

[Example](http://www.geocodezip.com/v3_GoogleEx_places-searchboxB.html)

# tcl - 如何在foreach循环中插入换行符并抓取数据

> ID：13505793
> 
> 赞同：0
> 
> 时间：2012-11-22T04:12:54.543
> 
> 标签：tcl

我有一组要从文件中解析的字段，我在 foreach 循环中逐行进行解析，我想知道如何跳过一行并转到下一行

例如：如果遇到一个名为“ABC”的字符串，我需要在下一行抓取一个数字，

```
一些字符“ABC”
123

```

问题是我实际上在文件中有很多数字，但我需要获取一个数字，特别是字符串“ABC”之后的换行符之后的数字。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:47:57.600

你可以试试这个简单的解决方案

```
set trigger 0
set fh [open "your_file" "r"]
while {[gets $fh line] != -1} { 
    if {[regexp -- {"ABC"} $line]} {
        incr trigger
    continue
    }
    if {$trigger > 0} {
        puts $line ; # or do something else
        incr trigger -1
    }
}
close $fh 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:05:59.513

使用循环会更容易一点，一次`while`读取一行，因为当您找到触发案例时，您可以轻松地读取*额外的*一行（假设您没有一行行`"ABC"`）：

```
set fd [open $theFilename]
while {[gets $fd line] >= 0} {
    if {
        [string match *"ABC"* $line]
        && [gets $fd line] >= 0
        && [regexp {\d+} $line -> num]
    } then { # I like to use 'then' after a multi-line conditional; it's optional
        puts "Found number $num after \"ABC\""
    }
}
close $fd 
```

这很尴尬的原因`foreach`是它每次通过循环总是会处理相同数量的元素。

`foreach`如果您要处理的数据可能会出现上面提到的行数问题，那么奇怪的是，您实际上会更好：

```
set fd [open $theFilename]
set lines [split [read $fd] \n]
close $fd
foreach line $lines {
    incr idx; # Always the index of the *next* line
    if {
        [string match *"ABC"* $line]
        && [regexp {\d+} [lindex $lines $idx] -> num]
    } then {
        puts "Found number $num after \"ABC\""
    }
} 
```

这是有效的，因为当你`lindex`在结尾处做某事时，它会产生空字符串（它不会匹配那个简单的正则表达式）。

# java - 如何解决 Bitmap decleration 中的 NullPointerException。

> ID：13505794
> 
> 赞同：0
> 
> 时间：2012-11-22T04:13:15.917
> 
> 标签：java, android, bitmap, compiler-errors

我在这里收到一个错误，上面写着，

```
at android.graphics.Bitmap_Delegate.nativeWidth(Bitmap_Delegate.java:291)
    at android.graphics.Bitmap.nativeWidth(Bitmap.java)
    at android.graphics.Bitmap.getWidth(Bitmap.java:785) 
```

DDMS 说我在 ViewingWindow 类的第 66 行遇到错误，这是声明和初始化 int bitmapX 的位置：

```
protected void onDraw(Canvas canvas) {
        if (canvas == null) throw new NullPointerException();

        Bitmap bitmap = null;
        if (Monitor.getCurrent() == Monitor.TYPE.GREEN) bitmap = greenBitmap;
        else bitmap = redBitmap;

        int bitmapX = bitmap.getWidth() / 2;
        int bitmapY = bitmap.getHeight() / 2;

        int parentX = parentWidth / 2;
        int parentY = parentHeight / 2;

        int centerX = parentX - bitmapX;
        int centerY = parentY - bitmapY;

        matrix.reset();
        matrix.postTranslate(centerX, centerY);
        canvas.drawBitmap(bitmap, matrix, paint);
    } 
```

为什么我会收到这样的错误？非常感谢任何帮助。谢谢。

这是greenBitmap和redBitmap的初始化变量：

```
private static Bitmap greenBitmap = null;
    private static Bitmap redBitmap = null;

    private static int parentWidth = 0;
    private static int parentHeight = 0;

    public ViewingWindow(Context context, AttributeSet attr) {
        super(context, attr);

        greenBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.green_icon);
        redBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.red_icon);
    }

    public ViewingWindow(Context context) {
        super(context);

        greenBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.green_icon);
        redBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.red_icon);
    } 
```

来自 DDMS 的完整错误：

```
11-21 20:53:44.959: E/AndroidRuntime(521): FATAL EXCEPTION: main
11-21 20:53:44.959: E/AndroidRuntime(521): java.lang.NullPointerException
11-21 20:53:44.959: E/AndroidRuntime(521):  at com.ali.nazzal.sciencefairheartrateproject.ViewingWindow.onDraw(ViewingWindow.java:66)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.View.draw(View.java:6740)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.View.draw(View.java:6743)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.widget.FrameLayout.draw(FrameLayout.java:352)
11-21 20:53:44.959: E/AndroidRuntime(521):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1842)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.ViewRoot.draw(ViewRoot.java:1407)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1163)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.os.Looper.loop(Looper.java:123)
11-21 20:53:44.959: E/AndroidRuntime(521):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-21 20:53:44.959: E/AndroidRuntime(521):  at java.lang.reflect.Method.invokeNative(Native Method)
11-21 20:53:44.959: E/AndroidRuntime(521):  at java.lang.reflect.Method.invoke(Method.java:521)
11-21 20:53:44.959: E/AndroidRuntime(521):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-21 20:53:44.959: E/AndroidRuntime(521):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-21 20:53:44.959: E/AndroidRuntime(521):  at dalvik.system.NativeStart.main(Native Method) 
```

----------------------------------------来自 DDMS 的新错误----------------- ---------------

```
 11-21 21:49:44.699: E/AndroidRuntime(551): FATAL EXCEPTION: main
    11-21 21:49:44.699: E/AndroidRuntime(551): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ali.nazzal.sciencefairheartrateproject/com.ali.nazzal.sciencefairheartrateproject.Monitor}: android.view.InflateException: Binary XML file line #23: Error inflating class com.ali.nazzal.sciencefairheartrateproject.ViewingWindow
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.os.Handler.dispatchMessage(Handler.java:99)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.os.Looper.loop(Looper.java:123)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.app.ActivityThread.main(ActivityThread.java:4627)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at java.lang.reflect.Method.invokeNative(Native Method)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at java.lang.reflect.Method.invoke(Method.java:521)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at dalvik.system.NativeStart.main(Native Method)
    11-21 21:49:44.699: E/AndroidRuntime(551): Caused by: android.view.InflateException: Binary XML file line #23: Error inflating class com.ali.nazzal.sciencefairheartrateproject.ViewingWindow
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.view.LayoutInflater.createView(LayoutInflater.java:503)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.app.Activity.setContentView(Activity.java:1647)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at com.ali.nazzal.sciencefairheartrateproject.Monitor.onCreate(Monitor.java:60)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
    11-21 21:49:44.699: E/AndroidRuntime(551):  ... 11 more
    11-21 21:49:44.699: E/AndroidRuntime(551): Caused by: java.lang.NoSuchMethodException: ViewingWindow(Context,AttributeSet)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at java.lang.Class.getMatchingConstructor(Class.java:660)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at java.lang.Class.getConstructor(Class.java:477)
    11-21 21:49:44.699: E/AndroidRuntime(551):  at android.view.LayoutInflater.createView(LayoutInflater.java:475)
    11-21 
21:49:44.699: E/AndroidRuntime(551):    ... 23 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:43:18.690

将此构造函数添加到`ViewingWindow:`

```
public ViewingWindow(Context context, AttributeSet attrs, int defStyle) {
        super(context, attr, defStyle);

        greenBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.green_icon);
        redBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.red_icon);
    } 
```

# performance - MPI Alltoallv 还是更好的个人发送和接收？（表现）

> ID：13505799
> 
> 赞同：5
> 
> 时间：2012-11-22T04:14:32.983
> 
> 标签：performance, parallel-processing, mpi

我有许多进程（大约 100 到 1000 个），每个进程都必须向其他进程中的一些（比如大约 10 个）发送一些数据。（通常，但并非总是如此，如果 A 发送给 B，B 也发送给 A。）每个进程都知道它必须从哪个进程接收多少数据。

所以我可以使用`MPI_Alltoallv`, 许多或大部分消息长度为零。但是，我听说出于**性能**原因，**最好**使用**多个`MPI_send`和`MPI_recv`**通信**而不是**全局**`MPI_Alltoallv`**. 我不明白的是：如果一系列发送和接收调用比一个 Alltoallv 调用更有效，为什么 Alltoallv 不只是**实现****为**一系列**发送**和**接收？**

对我（和其他人？）来说，只使用一个全球电话会更方便。此外，我可能不得不担心不会遇到多个 Send 和 Recv 的死锁情况（可以通过一些奇偶策略或更复杂的方法修复？或使用缓冲的发送/接收？）。

你同意这`MPI_Alltoallv`比10和;**慢吗？**如果是，**为什么和多少？**`MPI_Send``MPI_Recv`

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T05:43:58.807

通常，集体的默认建议是相反的：尽可能使用集体操作，而不是自己编写代码。MPI 库关于通信模式的信息越多，它内部优化的机会就越多。

除非有特殊的硬件支持，否则集合调用实际上是在内部根据发送和接收实现的。但实际的通信模式可能不仅仅是一系列的发送和接收。例如，使用树来广播一段数据可能比让相同等级的数据发送到一堆接收器更快。优化集体沟通需要做很多工作，而且很难做得更好。

话虽如此，`MPI_Alltoallv`还是有些不同。在 MPI 级别可能很难针对所有不规则的通信场景进行优化，因此可以想象一些自定义通信代码可以做得更好。例如，一个实现`MPI_Alltoallv`可能是同步的：它可能要求所有进程“签入”，即使它们必须发送一个长度为 0 的消息。我虽然不太可能实现这样的实现，但这[是一个在野外](http://www-01.ibm.com/support/docview.wss?uid=isg1IZ58190)。

所以真正的答案是“这取决于”。如果库实现`MPI_Alltoallv`与任务不匹配，则自定义通信代码将胜出。但在走这条路之前，请检查 MPI-3 邻居集体是否适合您的问题。**

# ajax - 如果 ajax 函数成功显示警报

> ID：13505801
> 
> 赞同：0
> 
> 时间：2012-11-22T04:14:37.260
> 
> 标签：ajax, jsp, lightbox

我有一个名为 home.jsp 的 jsp。单击此 jsp 中的“立即激活”按钮，将显示一个灯箱。

这个灯箱有 2 个按钮“激活”和“删除”。

当我点击“激活”按钮时，一项服务正在被激活。成功激活后，页面会重新加载并显示 home.jsp。

现在我想在发生这种情况时显示警报。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:23:38.803

您的 home.jsp 页面应该排队一个 JavaScript 片段，该片段会在页面加载后立即运行（并且一旦它被激活）。我建议使用 jQuery，这将使这更容易。这是一个肮脏的例子：

```
<html>
<head>
   ...
   <script type="text/javascript">
       jQuery().ready(window,function(){
           alert("your account is activated");
       });
   </script>
   ...
</head>
<body>
   ... 
```

# ruby - 如何在ruby中获取一段文本

> ID：13505805
> 
> 赞同：0
> 
> 时间：2012-11-22T04:14:58.507
> 
> 标签：ruby, regex

我在 ruby​​ 中有以下文本，我只想提取 ---- 和 ---- （内容）之间的部分，但我无法做到这一点，我尝试使用正则表达式：

```
mystring.match(/^-*(.*?)^-*/m)[1] 
```

这是文本：

```
Congrats! You just got a new contact lead

Here's the information your contact submitted:

------------------------------------------------------------------------------------

    Name: testing
    Email: test123@gmail.com
    Mensaje: hello
this is a nice test

------------------------------------------------------------------------------------
For your convenience, we have automatically added this contact and message to your account.

Best of luck!
- LeadABC 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T04:17:44.157

尝试...

```
mystring.match(/-+(.*?)-+/m)[1] 
```

[红宝石小提琴](http://rubyfiddle.com/riddles/67a32)。

但是，如果`-`您的*内容*中有 a ，这将中断。如果您接受最低限度（例如 10 个`-`字符），它可能会更健壮。您可以使用`{10,}`量词来执行此操作。

```
mystring.match(/(-{10,})(.*?)\1/m)[2] 
```

[红宝石小提琴](http://rubyfiddle.com/riddles/52afd/2)。

这个版本还保证了`-`匹配的数量是*平衡*的（如果`-`开始匹配 16 个字符，那么它也必须匹配`-`结束 16 个字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:23:16.817

将其拆分为仅由连续连字符组成的行，末端可能带有白色字符，这将使其健壮。

```
mystring.split(/^[ \t]*-+[ \t]*$/)[1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:24:17.970

您的内容可能包含`-`，但您仍然可以将行尾与`^`and匹配`$`，因此请尝试：

```
mystring.match(/(^-{84}$)(.*?)\1/m)[2] 
```

# jquery - jquery模板发送数据

> ID：13505808
> 
> 赞同：0
> 
> 时间：2012-11-22T04:15:10.160
> 
> 标签：jquery, jquery-templates

我正在使用 Jquery 模板。因为我在发送给客户端的同一个文件中定义了变量中的 Json 主体和数据值

现在我有一个不同的过程从数据库中获取数据。那么，如何将数据发送到客户端

Jquerytemplate + JSON 正文。

我该如何发送？

# python - 使用 pyenchant 时出错：附魔字典检查：断言 `g_utf8_validate(word, len, NULL)' 失败

> ID：13505812
> 
> 赞同：3
> 
> 时间：2012-11-22T04:15:30.317
> 
> 标签：python, dictionary, spell-checking, pyenchant

我正在尝试根据英语词典检查标签列表。我正在使用 pyenchant，但我不断收到错误消息。读取“？”后似乎有错误。我尝试使用字符串库和以下代码删除所有标点符号：

```
for punc in string.punctuation:
    title = title.replace(punc,'') 
```

但是有些这个字符看起来像一个？正在扔掉字典。

代码片段：

```
if word not in stopwords.words('english'):
    print word, "=", d.check(word) 
    if d.check(word):       
        tags.append(word.lower()) 
```

回复：

```
Learning = True
Lens = True
Children = True
Pumkincom = False
Pumkin = False

** (process:49042): CRITICAL **: enchant_dict_check: assertion `g_utf8_validate(word, len, NULL)' failed
     ? = 
```

我正在使用 Python 2.7.3 和 pyenchant-1.6.5-py2.7

编辑：我想我通过检查是否 len(word)==1 解决了这个问题，但我想知道为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-14T18:31:10.237

我之前遇到过这个问题，但这是由于文本中存在非英文字母我建议您确保该单词仅包含英文字母

# python - Python 递归分割路径

> ID：13505819
> 
> 赞同：7
> 
> 时间：2012-11-22T04:16:34.200
> 
> 标签：python, recursion, path, split, tuples

我正在尝试使用“/”作为分隔符**递归地**将作为字符串给出的路径拆分为子部分并传递给元组。例如：“E:/John/2012/practice/question11”应该是（'E:', 'John', '2012', 'practice', 'question11'）。

因此，我已将除“/”之外的每个字符都传递到一个元组中，但这不是我想要的示例中显示的子部件连接方式。这是家庭作业中的一个练习题，在我尝试学习递归时将不胜感激。

太感谢了

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T04:36:35.847

像这样的东西

```
>>> import os
>>> s = "E:/John/2012/practice/question11"
>>> os.path.split(s)
('E:/John/2012/practice', 'question11') 
```

注意`os.path.split()`不会像那样分割整个`str.split()`路径

```
>>> def rec_split(s):
...     rest, tail = os.path.split(s)
...     if rest == '':
...         return tail,
...     return rec_split(rest) + (tail,)
...
>>> rec_split(s)
('E:', 'John', '2012', 'practice', 'question11') 
```

编辑：虽然问题是关于 Windows 路径的。为 unix/linux 路径修改它非常容易，包括以“/”开头的路径

```
>>> def rec_split(s):
...     rest, tail = os.path.split(s)
...     if rest in ('', os.path.sep):
...         return tail,
...     return rec_split(rest) + (tail,) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T04:19:57.410

您的错误不是递归，而是您正在做什么来连接递归结果。说你已经到达`('E:', 'John', '2012', 'prac')`，下一个字符是`'t'`；您不想附加`'t'`到递归结果，而是想将其附加到递归结果的最后一个*单词*。同样，当您到达分隔符时，您希望将新单词初始化为空。

当您进行递归时，您将（几乎）总是有两种情况：一种是递归的，一种是终端的。终端通常很简单，而且你做得对（如果没有字符串，就没有单词）。但是我发现，如果您尝试在上述中间计算的某个地方找到递归案例的特定示例，以准确计算出需要发生的事情，这将非常有帮助。

# c++ - 基本类设计的好网站？

> ID：13505820
> 
> 赞同：0
> 
> 时间：2012-11-22T04:16:47.483
> 
> 标签：c++

我正在将 java 切换到 c++，但我缺少一些根本的区别。如果你们知道任何有课程设计教程的好网站，请告诉我。诸如内存释放、要避免的事情等等之类的东西。我也一直在谷歌上搜索这些东西，但我只是想要更多信息。也许你们可以帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:50:48.103

试试**CProgramming**网站上的[类设计教程。](http://www.cprogramming.com/tutorial/class_design.html)

# objective-c - 具有深度嵌套层次结构的不可变 NSDictionary：更改键的值？

> ID：13505821
> 
> 赞同：3
> 
> 时间：2012-11-22T04:16:48.663
> 
> 标签：objective-c, ios, nsdictionary, immutability

如果我有一个具有嵌套层次结构的不可变 NSDictionary，来自 JSON 字符串，那么更改深度嵌套在层次结构中的键的值的最简单方法是什么？

比如我有一个字典，“key1”的值是一个数组，在数组里面，每个元素都是一个字典，每个字典里面都有一个key“key2”的值，现在我想改变“key2”的值，因为整个数据结构是不可变的，这很困难，我是否应该用可变集合复制这个数据结构以便我可以更改该值，这似乎有很多开销，但这是唯一的我想到的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T06:50:06.813

我不知道这是否是您可以接受的替代方案，但您可以使用选项从 JSON 字符串创建字典，该`NSJSONReadingMutableContainers`选项将所有数组和字典创建为可变对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:52:57.977

我不完全确定，但我认为你必须将你的字典和数组中的每个人都传递给一个可变的。

这取决于您是否希望在更改之后仍然具有不可变结构，或者在更改之后它是否仍然可变并不重要。

如果您想在更改后保持不可变，那么您必须将 temp 变量用于可变 dict 和数组。

```
NSMutableDictionary *rootDict = [NSMutableDictionary dictionaryWithDictionary:rootImmutableDict];

NSMutableArray* mutableArray = [NSMutableArray arrayWithArray:[rootImmutableDict objectForKey:@"key1"]];

NSMutableDictionary* valueDict = [NSMutableDictionart dictionaryWithDictionary:[mutableArray objectAtIndex:idx]];

[valueDict setObject:newValueObject forKey:@"key2"];

[rootImmutableDict release];
rootImmutableDict = nil;
rootImmutableDict = [[NSDictionary alloc] initWithDictionary:rootDict]; 
```

如果它是否可变对您来说并不重要，那么您必须在使用临时不可变结构从 JSON 中检索它时使其可变，并使其永久可变。

我希望它对你有帮助。

# image - 按键VB6上的动态图像变化

> ID：13505831
> 
> 赞同：0
> 
> 时间：2012-11-22T04:19:17.157
> 
> 标签：image, vb6, keypress

所以我试图在VB6中只用一个图像制作这个表格，每当你按下“Q”键时，图像就会改变，如果你按下“E”，它就会变回前一个。简单的东西。

这是我所拥有的：

```
Private Sub Form_KeyPress(KeyAscii As Integer)
If KeyAscii = 81 Then Image.Picture = LoadPicture("E:\Imagenes\Avatars\4.jpg")
If KeyAscii = 69 Then Image.Picture = LoadPicture("E:\Imagenes\Avatars\3.gif")
End Sub 
```

好吧，那是行不通的。我该怎么做才能让它发挥作用？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:58:49.323

在阅读您的评论时，您说您正在使用默认图像控件，没有默认图像控件您需要将其实例添加到您的表单或只使用表单图片属性。

这些例子对我有用：

```
Private Sub Form_KeyPress(KeyAscii As Integer)
    If (Chr(KeyAscii) = "Q" Or Chr(KeyAscii) = "q") Then Form1.Picture = LoadPicture("E:\Imagenes\Avatars\4.jpg")
    If (Chr(KeyAscii) = "E" Or Chr(KeyAscii) = "e") Then Form1.Picture = LoadPicture("E:\Imagenes\Avatars\3.gif")
End Sub 
```

和

```
Private Sub Form_KeyPress(KeyAscii As Integer)
    If (Chr(KeyAscii) = "Q" Or Chr(KeyAscii) = "q") Then Image1.Picture = LoadPicture("E:\Imagenes\Avatars\4.jpg")
    If (Chr(KeyAscii) = "E" Or Chr(KeyAscii) = "e") Then Image1.Picture = LoadPicture("E:\Imagenes\Avatars\3.gif")
End Sub 
```

# mysql - 从 JSP 连接 MySQL

> ID：13505833
> 
> 赞同：6
> 
> 时间：2012-11-22T04:19:43.307
> 
> 标签：mysql, jsp, database-connection

我刚刚踏上JSP。我开始编写简单的程序来显示日期、系统信息。然后我尝试连接一个`MySQL database`我有一个免费托管帐户，但我无法连接到 MySQL 数据库。这是我的代码：

```
<%@ page import="java.sql.*" %> 
<%@ page import="java.io.*" %> 
<html> 
<head> 
<title>Connection with mysql database</title>
</head> 
<body>
<h1>Connection status</h1>
<% 
try {
    String connectionURL = "jdbc:mysql://mysql2.000webhost.com/a3932573_product";
    Connection connection = null; 
    Class.forName("com.mysql.jdbc.Driver").newInstance(); 
    connection = DriverManager.getConnection(connectionURL, "a3932573_dibya", "******");
    if(!connection.isClosed())
         out.println("Successfully connected to " + "MySQL server using TCP/IP...");
    connection.close();
}catch(Exception ex){
    out.println("Unable to connect to database.");
}
%>
</font>
</body> 
</html> 
```

我收到消息作为**连接状态无法连接到数据库**。我已经`PHP`使用相同的用户名、密码和数据库名称测试了这个连接。我在哪里犯错？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T04:54:31.263

原因是驱动程序尚未加载到库中，它没有在连接中实例化，因此连接失败：

```
try {
            String connectionURL = "jdbc:mysql://host/db";
            Connection connection = null; 
            Class.forName("com.mysql.jdbc.Driver").newInstance(); 
            connection = DriverManager.getConnection(connectionURL, "username", "password");
            if(!connection.isClosed())
                 out.println("Successfully connected to " + "MySQL server using TCP/IP...");
            connection.close();
        }catch(Exception ex){
            out.println("Unable to connect to database"+ex);
        } 
```

[下载驱动程序](http://dev.mysql.com/downloads/connector/odbc/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-18T16:00:52.647

我有同样的问题。我很确定你的程序出了什么问题：你没有将 .jar 添加到 web lib。复制它并粘贴到 WEB-INF/lib 中。

很抱歉没有使用正确的格式来发布答案（我是新来的，这是我的第一个答案：（）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T04:58:06.203

下载正确的驱动程序：

[http://dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)

并将 jar 添加到项目的类路径中。

# regex - 正则表达式 - 查找以 # 开头但不包含“管理员”的所有单词实例

> ID：13505835
> 
> 赞同：1
> 
> 时间：2012-11-22T04:20:14.517
> 
> 标签：regex

我很难理解这个正则表达式。我想做的是如下：

*   匹配任何以 # 开头的单词。因此，例如，如果代码找到以下标签#jon、#james、#jill，那么它应该隐藏文本。
*   但是，如果代码发现出现以下标记：#ADMINISTRATOR，那么它应该显示文本
*   此外，如果代码没有发现任何带有 # 标记的单词，它也应该显示文本。

本质上，我想隐藏任何用 ADMINISTRATOR 以外的用户名进行哈希标记的评论。

到目前为止，我有以下代码：

```
if (mb_ereg_match(".*(#[^ADMINISTRATOR]){1,}.*", $comment))
{
    $hideComment = true;
}else
{
    $hideComment = false;
} 
```

上面的代码在大多数情况下都有效，除非正在搜索的文本包含以下任何一项：

```
#A, #AD, #ADM, #ADMI, #ADMIN, etc. 
```

那么代码不会隐藏注释，这不是我想要的。我只想与“#ADMINISTRATOR”完全匹配来显示评论。此外，还应显示任何不包含标签的评论。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T04:28:30.500

这是一个[基于负前瞻的正则表达式](http://www.regular-expressions.info/lookaround.html)，适用于您：

```
(?i)#(?!ADMINISTRATOR)\w+ 
```

这是一个[现场演示](http://www.rubular.com/r/rcsCxx3ANI)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T04:43:38.643

我没有使用您用来编写正则表达式的任何程序，但是一般的语法并没有按照您的想法进行。当您使用一组 [] 时，您是在说其中包含的是一类字符。您的正则表达式表明我正在寻找跟随 # 的内容，但该内容不以 A 或以下任何字符开头。

您要使用的是另一个分组。您可以使用 () 代替 [] 来表示特定的字符组。但是，您可能会注意到， () 也是您用来捕获部分正则表达式的方法。因此，您需要使用不匹配的组。在 python 中，不匹配的组如下所示： (?:ADMINISTRATOR)

所有放在一起，你的正则表达式在 python 中可能看起来像这样：

```
mb_ereg_match("(#.*(?!ADMINISTRATOR))\w ",$COMMENT) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:29:42.530

正则表达式中的间隔将始终匹配**单个字符**，无论是否否定。`[ADMINISTRATOR]`将匹配`A`,`D`等`M`。`[^ADMINISTRATOR]`将匹配任何不是`A`, `D`,`M`等的东西。

如果您想要一个没有给定字符串的正则表达式，我建议您改用[负前瞻](http://www.regular-expressions.info/lookaround.html)，正如 anubhava[建议](https://stackoverflow.com/a/13505896/520779)的那样。

# iphone - 倒数计时器 - iPhone

> ID：13505837
> 
> 赞同：5
> 
> 时间：2012-11-22T04:20:23.390
> 
> 标签：iphone, ios

我想显示倒数计时器。我有开始日期和结束日期。我需要显示剩余时间

天：时：分：秒

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-22T05:05:48.120

你可以像我下面的代码一样设置计数：-

```
 -(void) viewWillAppear:(BOOL)animated
 {
 timer = [NSTimer scheduledTimerWithTimeInterval: 1.0 target:self selector:@selector(updateCountdown) userInfo:nil repeats: YES];
 } 
```

**和**

```
 -(void) updateCountdown 
 {

NSString *dateString = @"14-12-2012";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

[dateFormatter setDateFormat:@"dd-MM-yyyy"];
NSDate *dateFromString = [[NSDate alloc] init];
// voila!
dateFromString = [dateFormatter dateFromString:dateString];

NSDate *now = [NSDate date];
NSCalendar *calendar = [NSCalendar currentCalendar];

NSDateComponents *componentsHours = [calendar components:NSHourCalendarUnit fromDate:now];
NSDateComponents *componentMint = [calendar components:NSMinuteCalendarUnit fromDate:now];    
NSDateComponents *componentSec = [calendar components:NSSecondCalendarUnit fromDate:now];        

NSCalendar *gregorianCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *componentsDaysDiff = [gregorianCalendar components:NSDayCalendarUnit
                                                            fromDate:now
                                                              toDate:dateFromString
                                                             options:0];

lblDaysSetting.text=[NSString stringWithFormat:@"%02d",componentsDaysDiff.day];
lblHouresSetting.text=[NSString stringWithFormat:@"%02d",(24-componentsHours.hour)];    
lblMinitSetting.text=[NSString stringWithFormat:@"%02d",(60-componentMint.minute)];  
lblSecSetting.text=[NSString stringWithFormat:@"%02d",(60-componentSec.second)];  

 } 
```

现在只需设置您的逻辑

它的代码输出作为我的项目如下::-

![在此处输入图像描述](../Images/ccfcc37fea6d6cbffc3e4c0314995b86.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T04:41:40.643

这是 .h 文件的代码：

```
@interface UIMyContoller : UIViewController {

NSTimer *timer;
IBOutlet UILabel *myCounterLabel;
}

@property (nonatomic, retain) UILabel *myCounterLabel;
-(void)updateCounter:(NSTimer *)theTimer;
-(void)countdownTimer;

@end 
```

这是 .m 文件的代码：

```
@implementation UIMyController
@synthesize myCounterLabel;

int hours, minutes, seconds;
int secondsLeft;

- (void)viewDidLoad {
[super viewDidLoad];

secondsLeft = 16925;
[self countdownTimer];
}

- (void)updateCounter:(NSTimer *)theTimer {
if(secondsLeft > 0 ){
    secondsLeft -- ;
    hours = secondsLeft / 3600;
    minutes = (secondsLeft % 3600) / 60;
    seconds = (secondsLeft %3600) % 60;
    myCounterLabel.text = [NSString stringWithFormat:@"%02d:%02d:%02d", hours, minutes, seconds];
}
else{
    secondsLeft = 16925;
}
}

-(void)countdownTimer{

secondsLeft = hours = minutes = seconds = 0;
if([timer isValid])
{
    [timer release];
}
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];  
timer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(updateCounter:) userInfo:nil repeats:YES];
[pool release];
} 
```

希望这可以帮助。快乐编码

阿德里安

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T05:33:56.637

我会推荐以下方法来获取从日期到日期的时间分量。

这种方法比手动减少小时、分钟和秒的 3 个整数变量更优雅，因为这样做意味着您必须手动检查秒何时达到 0，您需要手动将分钟重置回 59 等等。这条路我去过一次，不是很好。

此外，当您最小化您的应用程序时，倒计时时钟将停止。如果您使用 3 个整数（小时、分钟和秒）手动减少倒计时计时器，则最小化您的应用程序将导致倒计时出错。

由于此方法自动计算两个日期之间的差异，即使应用程序从后台最小化状态返回，它也会自动为您重新计算剩余时间，无需任何额外代码。

```
-(void)viewDidLoad
{
    // instantiate a calendar object.
    gregorianCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

    countDownTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateClock:) userInfo:nil repeats:YES];
    [countDownTimer fire];
}

-(void)updateClock:(NSTimer *)timer
{
    countDownDateFormatter = [[NSDateFormatter alloc] init];
    [countDownDateFormatter setDateFormat:@"hh:mm:ss"];

    NSDate *now = [NSDate date];

    NSDateComponents *comp = [gregorianCalendar components:NSHourCalendarUnit|NSMinuteCalendarUnit|NSSecondCalendarUnit 
                                                  fromDate:now
                                                    toDate:countDownEndDate 
                                                   options:0];

    NSString *strTimeRemaining = nil;

    // if date have not expired
    if([now compare:countDownEndDate] == NSOrderedAscending)
    {
        strTimeRemaining = [[NSString alloc] initWithFormat:@"%02d:%02d:%02d", [comp hour],  [comp minute], [comp second]];
    }
    else 
    {
        // time has expired, set time to 00:00 and set boolean flag to no
        strTimeRemaining = [[NSString alloc] initWithString:@"00:00:00"];

        [countDownTimer invalidate];
        countDownTimer = nil;
    }

    lblCountDown.text = strTimeRemaining;

    [countDownDateFormatter release];
    [strTimeRemaining release];
} 
```

# database - MS Access 中多值字段的替代方案

> ID：13505838
> 
> 赞同：5
> 
> 时间：2012-11-22T04:20:24.903
> 
> 标签：database, ms-access, ms-access-2010, relationships, multivalue

相关问题：[多值字段是个好主意吗？](https://stackoverflow.com/questions/1461582/multivalued-fields-a-good-idea)

我知道多值字段类似于多对多关系。在 MS Access 应用程序中替换多值字段的最佳方法是什么？我有一个具有多值字段的应用程序。我不确定如何完全消除这些并以单值字段的形式实现完全相同的逻辑？

当我想将多值关系转移到单值关系时，表关系方面的实现是什么。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:07:52.277

以下内容可能比您需要的详细得多，但它适用于初学者。假设您有一个表 MainTable：

```
ID -> Numeric, primary key
Title -> Text
Surname -> Text
Address -> Text
Country -> Numeric 
```

您可能需要一个标题列表和可供选择的国家/地区。

在 Title 的情况下，将信息存储在表中的字段中并不是最糟糕的事情，因为您只有一列并且数据不太可能更改，并且您可能不会使用数据创建查询.

国家是另一回事，通常你会存储一个数字并有一个查找表。在这种情况下，人们很想使用多值字段。

但是，约定要容易得多。为国家添加另一个表：

```
ID -> Numeric, primary key
Country -> Text 
```

您可能想调用主表 CountryID 中的相关字段。您现在可以在关系窗口中创建关系，显示 Country 与 MainTable 的关系：

![关系](../Images/ddcd7826c1b4d93c7fb727f79e120991.png)

您可以看到选择了 Enforce Referential Integrity，这意味着您必须在 CountryID 字段的国家/地区表中具有​​ null 或国家/地区。

要查看数据，您可以创建查询：

```
SELECT 
    MainTable.ID, 
    MainTable.Title, 
    MainTable.Surname, 
    MainTable.Address, 
    Country.Country
FROM Country 
INNER JOIN MainTable 
ON Country.ID = MainTable.CountryID; 
```

![询问](../Images/f96068686824a14ecdcd9f2cdb527aa5.png)

但重点是要有一个允许数据输入的表格。您可以使用向导创建表单，但之后，您需要右键单击 CountryID 并将其更改为组合框，或者使用向导添加组合框或列表框。选项 2 可能是最简单的。以下是向导中的大部分步骤：

![组合1](../Images/4632aea268439a88ad2423225314aba3.png) ![组合2](../Images/44e42dfee0b6df18019a656aee7cedba.png) ![组合3](../Images/b92659969752b1c5cf3f0457b60d3eeb.png) ![组合4](../Images/b89349e5c2fd1e5893316b931e0df5ed.png) ![组合5](../Images/032f584eaf27774d6ee3eef8e84d2485.png)

现在，您的表单上有一个国家/地区的下拉列表。

![形式](../Images/f52d2c37bda5f776fb53872b64a1ab85.png)

另请参阅：[创建表单以在多个表中添加记录](https://stackoverflow.com/questions/12131211/create-form-to-add-records-in-multiple-tables/12132196#12132196)

在 Access 2010 中，当用户输入可能值表中不存在的数据时，有新的方法可以将值添加到组合中。在以前的版本中（虽然我不确定 2007 年），您将使用 Not In List 事件将项目添加到查找表，在 2010 年，您可以选择将 List Items Edit 表单添加到属性表。

![将项目添加到查找表1](../Images/562f5672749569b5f55fbbb3df219130.png) ![将项目添加到查找表2](../Images/487c20d3df9733ed7ab7fb4a8e72bdbd.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-07T21:14:25.913

这个问题很奇怪，因为它询问的是单值字段，但也询问了表关系。在非常严格的解释中，多值字段 (MVF) 可以替换为单个文本框，其中填充了逗号分隔的项目……不需要表关系。相反，我通过“单值”字段假设问题意味着多表关系中的标准字段，其中每个相关行的每个字段都有一个*值*。但是每个主记录仍然可以与相关值表中的多行相关，这保留了 MVF 的全部目的。

考虑下面的数据库大纲来说明 MVF 的可能替代品。我没有包括所有可能的属性或如何创建基本对象，只是创建所需行为所必需的——假设有足够的 Access 知识来“填补空白”并且不担心基本代码或 SQL。

基本结构由三个表组成：1）主表，2）“值列表”表，3）用于定义多对多关系的联结表。

*   *客户表*
    CustomerID：自动编号，主
    CustomerName：短文本
*   *代码表*
    代码：短文本，长度5，主键
    说明：短文本
*   *【客户代码】表格*
    CustomerID：长
    代码：短文本

创建表之间的关系。这将需要在表上定义适当的索引（此处不详）。

*   客户表到 [客户代码] 表
    CustomerID -> CustomerID 字段（启用强制完整性）
*   代码表到 [客户代码] 表
    代码 -> 代码字段（启用强制完整性）

（也可以为值表 [例如代码表] 表创建单独的 ID 字段，但这只会使以后的查询和控制等复杂化。在这种情况下，联结表将包含另一个 ID 字段，而不是直接包含值。 )

在标准 VBA 模块中，创建一个函数，如

```
Public Function GetCodeList(ByVal CustomerID As Integer) As String
   Dim sSQL As String
   Dim qry As QueryDef
   Dim rs As Recordset2

   sSQL = "PARAMETERS [CustID] LONG;" & _
       " SELECT * FROM [Customer Codes] WHERE [CustomerID] = [CustID]"
   Set qry = CurrentDb.CreateQueryDef("", sSQL)
   qry.Parameters("CustID") = CustomerID
   Set rs = qry.OpenRecordset(dbOpenForwardOnly, dbReadOnly)

   Dim sCodes As String
   sCodes = ""
   Dim bFirst As Boolean
   bFirst = True

   Do Until rs.EOF
      sCodes = sCodes & IIf(bFirst, "", ",") & rs("Code")
      bFirst = False
      rs.MoveNext
   Loop

   rs.Close
   qry.Close

   GetCodeList = sCodes
End Function 
```

没有重复行的主表的有用查询将需要创建某种聚合查询（即 Group By、Count 等）。例如，可以在单个查询中完成简单的选择

```
SELECT Customer.CustomerID, Customer.[CustomerName], GetCodeList([CustomerID]) AS Codes, Count(Customer.CustomerID) AS CountOfID
FROM Customer LEFT JOIN [Customer Codes] ON Customer.ID = [Customer Codes].CustomerID
WHERE ((([Customer Codes].Code)="Current" Or ([Customer Codes].Code)="Free"))
GROUP BY Customer.ID, Customer.[CustomerName], GetCodeList([ID]); 
```

更复杂的选择可能需要多个查询，一个首先选择正确的记录，然后另一个将主表连接到第一个查询。但老实说，这些类型的查询并不比在多值字段上选择所需的复杂。事实上，MVF 的查询语法是非标准的，并且会变得相当复杂和混乱，甚至比拥有联结表和多对多关系还要复杂。在幕后，Access 本质上与我所概述的相同，但由于它隐藏了太多细节，因此使某些查询变得更加困难。

关于表单上的多值表示和选择，完全模仿多值 ComboBox 是不可能的——主要是因为基本的 Access Combobox 没有能够显示复选框的多选选项。但是，可以使用属性 [Multi Select] = Simple 填充未绑定的 ListBox。在 Form_Load 事件中，使用 ListBox.AddItem 方法将可用值（例如示例表中的代码）添加到列表框。然后在 Form_Current、Form_AfterUpdate、Form_Undo 事件中，可以添加代码来显示和/或保存选定的值。这需要更多代码，这可能超出了这里的范围。

从技术上讲，这个问题是关于将 MVF“移动”到另一个实现的。要点是在 MVF 列表中使用相同的值填充值表（例如示例中的代码表）。这可能是一个手动过程，但取决于 MVF 的 ComboBox 的填充方式。然后为相同的主记录编写一个查询，将每个 MFV 复制到联结表（例如 [客户代码]）中，例如

```
INSERT INTO [Customer Codes] ( CustomerID, Code )
SELECT Customer.CustomerID, Customer.TestMVF.Value
FROM Customers
WHERE (((Customers.TestMVF.Value) Is Not Null)); 
```

一个完整的实现总体上绝对不是一个简单的任务，但是如果你发现 MVF 的问题太多，或者如果你想迁移到另一个数据库，那么这种变化将是必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-20T23:34:51.600

Access 数据库中的 MVF 没有替代品。一些查询技术可以模仿 MVF，但您可能会发现 MVF 功能更胜一筹。1.速度快，非常容易实现。没有代码也没有 SQL。2.它是可视的，因此对用户来说是直观的。有些事情你不能用 MVF 做，所以你真的需要决定什么更重要。

# html - 列表项之间不需要的边距或填充

> ID：13505841
> 
> 赞同：2
> 
> 时间：2012-11-22T02:22:32.297
> 
> 标签：html, css

我的 css 中有一个小设计问题，我想知道是否有人可以帮我检查一下。设计问题在于我的水平导航的翻转效果。似乎有某种额外的边距或填充，但我无法在 css 中找到问题。我将在下面粘贴我正在使用的代码，以便您自己查看。在滚动导航列表项之前，您将无法看到问题。

**HTML：**

```
 <div class="Horiznav">
  <ul>
    <li id="active"><a href="#">Link #1</a></li>
    <li><a href="#">Link #2</a></li>
    <li><a href="#">Link #3</a></li>
    <li><a href="#">Link #4</a></li>
    <li><a href="#">Link #5</a></li>
  </ul>
</div> 
```

**CSS：**

```
.Horiznav {
  background: #1F00CA;
  border-top: solid 1px #fff;
  border-bottom: solid 1px #fff;
}
.Horiznav ul {
  font-family: Arial, Helvetica, sans-serif;
  font-weight: bold;
  color: #fff;
  text-Align: center;
  margin: 0;
  padding-top: 5px; padding-bottom: 5px;
}
.Horiznav ul li {
  display: inline;
}
.Horiznav ul li a {
  padding-top: 5px;
  padding-bottom: 5px;
  color: #fff;
  text-decoration: none;
  border-right: 1px solid #fff;
}
.Horiznav ul li a:hover {
  background: #16008D;
  color: #fff;
}
#active a { border-left: 1px solid #fff; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:15:53.787

由于您有`li`元素`display:inline`，因此问题（每个菜单/列表项左侧的额外间隙）是由于 HTML 标记中的空白造成的。您可以：

## A - 去掉 HTML 中的空白：

```
<ul><li id="active"><a href="#">Link #1</a></li><li><a href="#">Link #2</a></li><li><a href="#">Link #3</a></li><li><a href="#">Link #4</a></li><li><a href="#">Link #5</a></li></ul> 
```

## B - 或者，使用`font-size:0`技巧：

`font-size:0`在`ul`容器上设置并`font-size:whatever`在`li`子元素上覆盖它：

```
.Horiznav ul {
  font-family: Arial, Helvetica, sans-serif;
  font-weight: bold;
  color: #fff;
  text-Align: center;
  margin: 0;
  padding-top: 5px; padding-bottom: 5px;
  font-size: 0;       /* #1 */
}
.Horiznav ul li {
  display: inline;
  font-size: 16px;    /* #2 */
} 
```

[http://jsfiddle.net/EZSvC/4/](http://jsfiddle.net/EZSvC/4/)

## C - 或者，使用浮动布局：

浮动`li`元素（然后将它们隐式显示为块）并使用 清除`ul`容器上的浮动`overflow:hidden`。`margin:0 auto`但是，如果您希望它居中，您将需要提供容器宽度并应用。

[http://jsfiddle.net/EZSvC/5/](http://jsfiddle.net/EZSvC/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:41:40.270

只需在 CSS 中的“Horiznav ul li a”中添加“display:inline-block”

```
.Horiznav ul li a {
  padding-top: 5px;
  padding-bottom: 5px;
  color: #fff;
  text-decoration: none;
  border-right: 1px solid #fff;
  display:inline-block;
} 
```

这是[jsFiddle 文件](http://jsfiddle.net/EZSvC/3/)

希望这能解决你的问题。

# python - Pandas Panel 花式索引：如何根据每个 df 中多列的布尔值返回（索引）Panel 中的所有 DataFrame

> ID：13505843
> 
> 赞同：7
> 
> 时间：2012-11-22T04:21:20.913
> 
> 标签：python, indexing, panel, dataframe, pandas

我有一个 Pandas 面板，其中包含许多具有相同行/列标签的 DataFrame。我想使用基于几列满足某些标准的 DataFrame 创建一个新面板。

使用数据框和行很容易：假设我有一个 df，zHe_compare。我可以通过以下方式获得合适的行：

```
zHe_compare[(zHe_compare['zHe_calc'] > 100) & (zHe_compare['zHe_med'] > 100) | ((zHe_obs_lo_2s <=zHe_compare['zHe_calc']) & (zHe_compare['zHe_calc'] <= zHe_obs_hi_2s))] 
```

但我该怎么做（伪代码，简化的布尔值）：

```
good_results_panel = results_panel[ all_dataframes[ sum ('zHe_calc' < 'zHe_obs') > min_num ] ] 
```

我知道内部布尔部分，但是如何为面板中的每个数据框指定它？因为我需要来自每个 df 的多个列，所以我没有使用`panel.minor_xs`切片技术取得成功。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:40:37.800

正如其[文档](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#panel)中所提到的，`Panel`目前有点欠发达，因此您在使用时所依赖的甜蜜语法`DataFrame`还不存在。

同时，我建议使用以下`Panel.select`方法：

```
def is_good_result(item_label):
    # whatever condition over the selected item
    df = results_panel[item_label]
    return df['col1'].sum() > 5

good_results = results.select(is_good_result) 
```

该`is_good_result`函数返回一个布尔值。请注意，它的参数不是`DataFrame`实例，因为`Panel.select`它的参数应用于项目标签，而不是该`DataFrame`项目的内容。

当然，你可以在一个语句中将整个标准函数填充到一个 lambda 表达式中，如果你喜欢整个简洁的东西：

```
good_results = results.select(
                 lambda item_label: results[item_label]['col1'].sum() > 5
                 ) 
```

# asp.net-mvc-3 - 复杂的页面和数据

> ID：13505844
> 
> 赞同：0
> 
> 时间：2012-11-22T04:21:37.260
> 
> 标签：asp.net-mvc-3, razor

我试图找出在我们的应用程序（如仪表板）中处理页面的最佳方式，其中有许多不同的窗格，其中包含各种数据位。

主要问题是当页面需要这么多数据时，控制器操作变得笨拙。客户端可以分解为部分视图以使其更易于管理，但所有数据仍需要传递到视图中才能分发到部分视图。或者是吗？

显然，有些面板可以动态加载或类似的东西，但我一直在寻找最好的方法，除了从浏览器加载页面的单个部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:28:18.620

您是否考虑`Html.Action`过在您的视图中使用？您将向主视图传递足够的数据，以使您能够为每个子操作提供所需的数据。主要操作将呈现主视图，该视图将为每个窗格调用操作。每个操作都将负责该窗格，呈现其自己的局部视图。此外，您可以直接从客户端回调每个子操作，以通过 AJAX 动态更新该窗格。

这是一个示例，其中包含您的主视图可能看起来的一些模拟操作。

```
 <div class="left-pane">
    @Html.Action("Summary", new { id = Model.ID } )
 </div>
 <div class="middle-pane">
    @Html.Action("PendingItems", new { id = Model.ID, timestamp = DateTime.Now } )
 </div>
 <div class="right-pane">
    @Html.Action("News")
 </div> 
```

# c# - 在我的 C# 窗体应用程序中检查 Gmail 登录凭据？

> ID：13505845
> 
> 赞同：-3
> 
> 时间：2012-11-22T04:21:47.073
> 
> 标签：c#, winforms

我已经开始使用 Windows 表单来创建一个小应用程序，在该应用程序中，用户能够从他们的 gmail 帐户发送电子邮件，当用户在我的登录表单（FORM 1）中输入正确的登录凭据但如果他输入错误时，我可以发送邮件登录表单（表单 1）中的凭据，它进入我的邮件（表单 2）并显示错误，所以我想检查 Gmail 登录凭据..帮助我使用代码...

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Net.Mail;

namespace first
{
    public partial class Form2 : Form
    {
        public Form2()
        {
            InitializeComponent();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            Form1 a = new Form1();
            this.Hide();
            a.ShowDialog();
            this.Close();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            SmtpClient client = new SmtpClient("smtp.gmail.com", 587);
            client.Credentials = new NetworkCredential(Form3.tb.Text, Form3.tb1.Text);
            MailMessage msg = new MailMessage();
            msg.To.Add(new MailAddress(To.Text));
            msg.From = new MailAddress(From.Text);
            msg.Subject = Sub.Text;
            msg.Body = Body.Text;
            client.EnableSsl = true; //for security in gmail,https kind of
            client.Send(msg);
            try
            {
                MessageBox.Show("Mail sent successfully", "Praveen Mail");
            }
            catch (Exception ex)
            {
                MessageBox.Show("Mail Sending Failed Due to" + ex.Message, "Praveen Mail");
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T04:28:33.723

Google 提供了一个 .net api，应该可以解决您的问题。

[https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2](https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)

**- - - - -编辑 - - - -**

第 1 步：注册以使用 google api。它是免费的，上面的链接描述了这样做的过程。

第二步：实现下面的代码。我从上面的链接借来的。

```
using System;
using System.Diagnostics;
using DotNetOpenAuth.OAuth2;
using Google.Apis.Authentication.OAuth2;
using Google.Apis.Authentication.OAuth2.DotNetOpenAuth;
using Google.Apis.Samples.Helper;
using Google.Apis.Tasks.v1;
using Google.Apis.Tasks.v1.Data;
using Google.Apis.Util;

namespace Google.Apis.Samples.TasksOAuth2
{
    /// <summary>
    /// This sample demonstrates the simplest use case for an OAuth2 service. 
    /// The schema provided here can be applied to every request requiring   authentication.
    /// </summary>
    public class Program
    {
    public static void Main(string[] args)
    {
        // Display the header and initialize the sample.
        CommandLine.EnableExceptionHandling();
        CommandLine.DisplayGoogleSampleHeader("Tasks API");

        // Register the authenticator.
        var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description);
        provider.ClientIdentifier = "<client id>";
        provider.ClientSecret = "<client secret>";
        var auth = new OAuth2Authenticator<NativeApplicationClient>(provider, GetAuthorization);

        // Create the service.
        var service = new TasksService(auth);
        TaskLists results = service.Tasklists.List().Fetch();
        Console.WriteLine("Lists:");
        foreach (TaskList list in results.Items)
        {
            Console.WriteLine("- " + list.Title);
        }
        Console.ReadKey();
    }

    private static IAuthorizationState GetAuthorization(NativeApplicationClient arg)
    {
        // Get the auth URL:
        IAuthorizationState state = new AuthorizationState(new[] { TasksService.Scopes.Tasks.GetStringValue() });
        state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);
        Uri authUri = arg.RequestUserAuthorization(state);

        // Request authorization from the user (by opening a browser window):
        Process.Start(authUri.ToString());
        Console.Write("  Authorization Code: ");
        string authCode = Console.ReadLine();
        Console.WriteLine();

        // Retrieve the access token by using the authorization code:
        return arg.ProcessUserAuthorization(authCode, state);
    }
} 
```

}

# python - Django Models .get 失败，但 .filter 和 .all 有效 - 对象存在于数据库中

> ID：13505847
> 
> 赞同：2
> 
> 时间：2012-11-22T04:22:06.547
> 
> 标签：python, sql, django, tdd, models

在这个问题上绞尽脑汁。该模型似乎是正确的，理论上所有注释的排列都应该起作用——但唯一可以成功检索用户的是 .filter 和 .all；.get 不起作用；我可以使用 .filter 或 .all 处理 ---- 但为什么不能正常工作？

我将重申，在这种情况下，直接 SQL 查询 100% 有效。所有导入都已到位，并且在低级别上运行良好 - 再次，过滤器工作，所有工作，但由于某种原因而失败。

```
class UserModelTest(TestCase):
def test_getUserByUsername(self):
    sanity = True
    try:
        #u = User.objects.filter(username='wadewilliams')
        u = User.objects.get(username='wadewilliams')
        #u = User.objects.get(pk=15773)
        #u = User.objects.all()
    print u
    except User.DoesNotExist:
        sanity = False

    self.assertEqual(sanity, True) 
```

...该测试失败，除非我取消注释过滤器或全部...两者都得到，不行。

还有模特...

```
class User(models.Model):
    userid = models.IntegerField(primary_key=True, db_column='userID')
    username = models.CharField(max_length=135)
    realname = models.CharField(max_length=150, db_column='name')
    email = models.CharField(max_length=765, blank=True)

class Meta:
    db_table = u'users'

def __unicode__(self):
    return self.username + ' (' + self.email + ')' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T05:46:07.623

测试套件创建了一个空白的模拟数据库，因此即使生产/开发数据库中存在用户也找不到用户。

来自文档：运行测试时从生产数据库中查找数据？如果您的代码在编译其模块时尝试访问数据库，这将在设置测试数据库之前发生，并可能导致意外结果。例如，如果您在模块级代码中有一个数据库查询并且存在一个真实的数据库，那么生产数据可能会污染您的测试。无论如何，在您的代码中包含此类导入时数据库查询是一个坏主意 - 重写您的代码，使其不会这样做。

# c# - 在覆盖项下显示文本

> ID：13505848
> 
> 赞同：0
> 
> 时间：2012-11-22T04:22:08.927
> 
> 标签：c#, android, monodevelop, toast, itemizedoverlay

我正在使用带有 Google 地图和叠加层的 MonoDevelop for Android。

我的问题是：如何在每个覆盖项下添加简短的文本部分？

这是我通常用来显示文本的代码：

```
var toast = Toast.MakeText (this, "Test", ToastLength.Short); 
```

这有效，但它被放置在地图的底部。我也有同样的想法，但我可以将文本放置在每个覆盖项下。

我可以帮忙吗？

谢谢

**更新**

我已经获得了一些代码来在给定的 offsetX 和 offsetY 处设置 toast。我可以请一些代码来实际找到绘制为 ItemizedOverlay 的每个覆盖项的偏移量，以便我可以在每个覆盖项下显示 toast 文本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:32:31.830

试试这个在顶部显示吐司：

```
String text = “example toast text!”;
Toast toast = Toast.makeText(getApplicationContext(), text, Toast.LENGTH_SHORT);

/* Positioning your Toast */
int offsetX = 0, offsetY = 0;
toast.setGravity(Gravity.TOP, offsetX, offsetY);
toast.show(); 
```

有关 Toast 的更多自定义，请参阅[此](http://www.mkyong.com/android/android-toast-example/)链接。

# oracle - 这段PLSQL如何编译？

> ID：13505849
> 
> 赞同：1
> 
> 时间：2012-11-22T04:22:34.067
> 
> 标签：oracle, function, plsql

对于经理 ID 取决于传递的参数的所有员工，我需要以字符串格式返回员工的姓名。当我编译该函数时，我得到一个错误。这是功能代码：

```
create or replace function Employee(v_manid IN employees.manager_id%type) 
return varchar2
AS
cursor cur_emp is select last_name from employees where manager_id = v_manid;
v_names varchar2(10);
begin
for emp_rec in cur_emp
loop
v_name = v_name || emp_rec.last_name ||', ';
end loop;
return v_name
end;
/ 
```

错误是：

> 错误（8,8）：PLS-00103：在预期以下之一时遇到符号“=”：：=。( @ % ; 错误 (8,44): PLS-00103: 遇到符号 ";" 当期望以下之一时：) , * & - + / 在 mod 余数 rem 和或 ||

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T08:21:21.333

如其他答案所述，您的函数无法编译的原因是三重的。

1.  您已声明变量`v_names`并将其引用为`v_name`.
2.  PL/SQL 中的赋值运算符是`:=`，您使用的是相等运算符`=`。
3.  您的 return 语句中缺少分号；它应该是`return v_name;`

它不会停止函数编译，但变量`v_names`被声明为`varchar2(10)`. 当一个拥有多个下属的经理的所有姓氏都适合这种情况时，这是极不可能的。您可能应该使用最大大小声明此变量；以防万一。

我想补充一点，您这样做的效率非常低。如果您要在 SQL 中而不是 PL/SQL 循环中进行字符串聚合，那会更好。从 11g 第 2 版开始，您拥有该[`listagg()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions089.htm#SQLRF30030)功能；如果您使用的是之前的版本，那么还有很多[其他字符串聚合技术](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)可以实现相同的结果。

```
create or replace function employee ( p_manid in employees.manager_id%type
      ) return varchar2 is

   v_names varchar2(32767); -- Maximum size, just in case

begin

   select listagg(lastname, ', ') within group ( order by lastname )
     into v_names
     from employees 
    where manager_id = p_manid;

   return v_names;

exception when no_data_found then
   return null;

end;
/ 
```

请注意我所做的其他一些更改：

1.  在函数参数上附加一个与变量不同的字母，以明确哪个是哪个。
2.  添加一些异常处理以处理该特定经理没有数据。
3.  `,`如果你没有数据我会返回 NULL，你会返回。如果您想返回逗号，只需将其放在异常中即可。
4.  我没有费心创建游标并循环遍历它等，而是让 Oracle 完成繁重的工作。

很奇怪，您想要返回一个逗号分隔的列表，因为之后您在 Oracle 中几乎无法使用它。返回诸如包含所有姓氏的数组或打开游标之类的东西可能更正常。在这个答案中，我假设您有充分的理由去做自己的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T04:54:28.003

有几点需要注意。

*   声明为`v_names`但用作`v_name`

*   分配应该像`v_name := v_name || emp_rec.last_name || ', ';`

*   `v_name`声明的大小为 10，它太小了，执行时会报错，所以你可以声明为

    `v_name employees.last_name%TYPE;`

您可以将您的功能创建为

```
CREATE OR REPLACE FUNCTION employee (v_manid IN employees.manager_id%TYPE)
        RETURN VARCHAR2
       AS
        v_name  employees.last_name%TYPE;
        CURSOR cur_emp
        IS
            SELECT  last_name
              FROM  employees
             WHERE  manager_id = v_manid;
    BEGIN
        FOR emp_rec IN cur_emp
        LOOP
            v_name := v_name || emp_rec.last_name || ', ';
        END LOOP;

        RETURN v_name;
    END;
/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T04:32:39.117

我想你应该使用`:=`而不是`=` 喜欢

```
v_name := v_name || emp_rec.last_name ||', '; 
```

还有一件事，您还需要在like `;`的末尾添加分号`return v_name``return v_name;`

# javascript - 如何从 ajax 请求中获取数据以显示在 div 中？

> ID：13505854
> 
> 赞同：0
> 
> 时间：2012-11-22T04:23:01.170
> 
> 标签：javascript, ajax, jquery, prepend

我无法`data`从我的 ajax 请求中获取出现在里面`<div class="l_p_i_c_w"></div>`。我究竟做错了什么？我知道里面的函数`my_file.php`是有效的，因为如果我刷新页面，那么数据就会显示在它应该出现的地方。

jQuery：

```
$.ajax({
        type: "POST",
        url: "my_file.php",
        dataType: 'html',
        success: function(data){
            $('div#myID div.l_p_c div.l_p_i_c_w').prepend(data);
        }
}); 
```

HTML：

```
<div class="l_p_w" id="myID">
    <div class="l_p_c">
        <div class="l_p_i_c_w">
       <!-- stuff, or may be empty. This is where I want my ajax data placed. -->
        </div>
    </div>
</div> 
```

CSS：

```
.l_p_w {
    width:740px;
    min-height:250px;
    margin:0 auto;
    position:relative;
    margin-bottom:10px;
}

.l_p_c {
    position:absolute;
    bottom:10px;
    right:10px;
    width:370px;
    top:60px;
}

.l_p_i_c_w {
    position:absolute;
    left:5px;
    top:5px;
    bottom:5px;
    right:5px;
    overflow-x:hidden;
    overflow-y:auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:43:03.693

我认为，如果您使用 prepend，则需要在附加之前将数据对象包装在 $(data) 之类的 jquery 标签中，因为 prepend 会附加子项（对象）

```
$.ajax({
            type: "POST",
            url: "my_file.php",
            dataType: 'html',
            success: function(data){
                $('div#myID div.l_p_c div.l_p_i_c_w').prepend($(data));
            }
    }); 
```

但是，如果您只想使用数据设置 div 的 html，请执行以下操作：

```
$.ajax({
        type: "POST",
        url: "my_file.php",
        dataType: 'html',
        success: function(data){
            $('div#myID div.l_p_c div.l_p_i_c_w').html(data);
        }
}); 
```

第三个选项，尝试 prependTo

[http://api.jquery.com/prependTo/](http://api.jquery.com/prependTo/)

```
$.ajax({
    type: "POST",
    url: "my_file.php",
    dataType: 'html',
    success: function(data){
        $(data).prependTo($('div#myID div.l_p_c div.l_p_i_c_w'));
    }
}); 
```

最后一次尝试：

```
$.ajax({
            type: "POST",
            url: "my_file.php",
            dataType: 'html',
            success: function(data){
                $('div#myID div.l_p_c div.l_p_i_c_w').html(data + $('div#myID div.l_p_c div.l_p_i_c_w').html());
            }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T04:59:49.927

```
 $('div#myID div.l_p_c div.l_p_i_c_w').prepend(data); 
```

应该

```
 $('#myID .l_p_c .l_p_i_c_w').html(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:52:35.160

怎么样[`prependTo()`](http://api.jquery.com/prependTo/)？

```
$.ajax({
            type: "POST",
            url: "my_file.php",
            dataType: 'html',
            success: function(data){
                $(data).prependTo('#myID .l_p_c .l_p_i_c_w');
            }
    }); 
```

正如@rajesh 在他对您的问题的评论中提到的那样，尝试在成功中提醒数据以确保它按预期返回：

```
$.ajax({
            type: "POST",
            url: "my_file.php",
            dataType: 'html',
            success: function(data){
                alert(data);
            }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T04:28:12.073

尝试这个：

```
$.ajax({
        type: "POST",
        url: "my_file.php",
        dataType: 'html',
        complete: function(jqXHR, settings){
            if (jqXHR.status == 200)
               $('div#myID div.l_p_c div.l_p_i_c_w').prepend(jqXHR.responseText);
        }
}); 
```

或者

```
$.ajax({
        type: "POST",
        url: "my_file.php",
        dataType: 'html'
}).done(function(data) {
     $('div#myID div.l_p_c div.l_p_i_c_w').prepend(data);
}); 
```

# c# - 读取带有外来字符的 JSON

> ID：13505864
> 
> 赞同：0
> 
> 时间：2012-11-22T04:24:05.370
> 
> 标签：c#, json, json.net

我目前正在尝试开发一个程序来解析 json 响应并向用户显示一些信息。但是，我遇到了 json 响应包含日文字符的问题。我目前正在使用 Json.NET。我怎样才能解决这个问题？

编辑：使用`Clipboard.SetText(string)`并粘贴到记事本中，发现导致异常的以下数据：

“状态”：“螟轩夊ｲ御滩潮隐ｪ譌ｩ螳・-蠢・揶邉蟆蟆堆积｢镉蟷ｸ蠕动ｮ遨榊・讥丘滓ｶ｀谥螳夊｀｀谥螳夊｀｀谥螳夊｀鰥螳ｶ｀谥螳ｶ｀谥螳ｶ・ｸ鮟样・豆家饭藜草·拓缧·

例外是`JsonReaderException: After parsing a value an unexpected character was encountered: _. Line 1, position 26125.` 我已将整个响应粘贴到[http://jsonlint.com/](http://jsonlint.com/)中，并且它检测到这些字符也无效。

抛出这个的方法是`JObject o = JObject.Parse(response);`

# audio - 如何将视频/音频流式传输到网络浏览器

> ID：13505866
> 
> 赞同：1
> 
> 时间：2012-11-22T04:24:15.700
> 
> 标签：audio, video

我想将视频和音频从我在 Linux 中的网络摄像头传输到互联网，并使用普通的网络浏览器（如 IE、firefox chrome..etc）在互联网上播放流媒体。

我现在正在使用 mjpg-streamer，它的效果很好，但不幸的是它只流式传输视频而没有音频。

什么是最好的方法？？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:22:06.107

视频流作为 HTML 中的标准模块是相对较新的，因此您可以选择是使用标准技术（仍然是新的且支持不够广泛），还是使用被替换的过程，但在当前浏览器中完全支持。

如果您选择采用支持 HTML5 的前卫标准，则直播视频的解决方案有点复杂。最常见的流媒体解决方案是使用 HTTP Live Streaming，对于实时流媒体，它需要专门的流媒体服务器（例如 Darwin、FMS 或 Wowza）而不是 HTTP 服务器。有很多选择；我会使用 H.264 编码而不是 HTTP 实时流协议中提供的 MP4 文件格式。至于选择哪个流媒体服务器，我无法在那里提出建议，因为我只有使用 Wowza 的经验，但我可以告诉你，Wowza 通常是一个不错的选择，因为它非常灵活且易于使用。

如果您选择采用普遍支持的事实标准，那就是使用基于 Flash 的视频播放器，例如 longtailvideo.com 的 JWPlayer。要为此创建实时提要，您可以使用流媒体服务器（例如 Wowza 或 FMS，如果您选择在某个时候切换到 HTML5，这可能是对未来的一项不错的投资），或者如果您的视频被一个人访问客户端一次，您可以配置一个 CGI 脚本由您的 HTTP 服务器运行，并让它创建一个 FLV 文件格式的文件。

# java - 如何使用 Java 在 MySQL 中插入日期

> ID：13505867
> 
> 赞同：2
> 
> 时间：2012-11-22T04:24:15.810
> 
> 标签：java

我有一个日期类型的变量。我通过使用返回 type 的函数得到这个日期`Date`。因此，我将两个变量定义为：

```
Date expDate=null, startDate=null; 
```

然后，我调用了这些函数：

```
expDate=c.getNotAfter();
startDate= c.getNotBefore(); 
```

然后，使用以下命令插入数据库：

```
prepStmt.setDate(1,(java.sql.Date) startDate);
prepStmt.setDate(2, (java.sql.Date) expDate); 
```

运行程序后，我收到此错误：

```
java.util.Date cannot be cast to java.sql.Date 
```

数据库中的列定义为 DATETIME 类型。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T04:26:01.667

像这样使用它：

```
prepStmt.setDate(1,new java.sql.Date(startDate.getTime())); 
```

这是因为`setDate()`方法`PreparedStatement`需要一个`java.sql.Date`类型的对象作为第二个参数，而不是`java.util.Date`。

因此，首先从您的`java.util.Date`对象中获取以毫秒为单位的时间，然后在`java.sql.Date`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T04:29:37.227

这样做：

```
 prepStmt.setDate(1,new java.sql.Date(startDate.getTime())); 
```

`java.sql.Date`是一个围绕毫秒值的瘦包装器，它允许[JDBC](http://en.wikipedia.org/wiki/Java_Database_Connectivity)将其识别为一个`SQL DATE`值。毫秒值表示自 以来经过的毫秒数`January 1, 1970 00:00:00.000 GMT`。

java.util.Date 类`getTime()`以毫秒为单位返回时间。您可以使用它来创建一个新的`java.sql.Date`类对象。

如果您想要时间和日期，请使用时间戳：

```
prepStmt.setTimestamp(1,new java.sql.Timestamp(startDate.getTime())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T12:48:58.923

```
prepStmt.setDate(1, (java.sql.Date) startDate);   
prepStmt.setDate(2, (java.sql.Date) expDate);  
prepStmt.setDate(1, new java.sql.Date(startDate.getTime())); 
```

# php - 从 javascript onclick 调用 php 脚本

> ID：13505870
> 
> 赞同：0
> 
> 时间：2012-11-22T04:24:40.380
> 
> 标签：php, ajax

当我单击由 javascript 生成的 html 中的按钮时，我想执行一个 php 脚本，我正在尝试使用 jquery ajax 并且我这样做了，但没有任何反应......任何帮助请？php 脚本正在工作，所以不是那样，我猜猜我在这个ajax调用中遗漏了一些东西......

**阿贾克斯调用**

```
$(".formBtn").click(function(){

    $.ajax({
        url: "script to call",
        type: "post",

        // callback handler that will be called on success
        success: function(response, textStatus, jqXHR){
            // log a message to the console
            console.log("Hooray, it worked!");
            alert("Working!");
        },
        // callback handler that will be called on error
        error: function(jqXHR, textStatus, errorThrown){
            // log the error to the console
            console.log(
                "The following error occured: "+
                textStatus, errorThrown
            );
        },
        // callback handler that will be called on completion
        // which means, either on success or error
        complete: function(){
            // enable the inputs
            $inputs.removeAttr("disabled");
        }
    });

}); 
```

**PHP 脚本**

```
$api_key = 'apikey';
    $project_id = 'projectid';
    $phone_id = 'phoneid';    
    $to_number = 'number';
    $content = 'content';

    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, 
        "urlblblbll");
    curl_setopt($curl, CURLOPT_USERPWD, "{$api_key}:");  
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_POSTFIELDS, http_build_query(array(
        'content' => $content,
        'phone_id' => $phone_id,
        'to_number' => $to_number,

    )));        

    $json = curl_exec($curl);    
    if ($err = curl_error($curl)) { echo "$err\n"; }    
    curl_close($curl);    

    $res = json_decode($json, true);        

    var_dump($res); // do something with $res
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:27:48.687

我相信你需要在 php 页面上回显一些东西，因为 ajax 的数据是基于 php 文件的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:42:20.943

```
 $result = curl_exec($curl);   
 if($result)
 {
    $json['result'] = 'true';
 } 
 else
 {
    $json['result'] = 'false';
 }
if ($err = curl_error($curl)) { echo "$err\n"; }    
curl_close($curl);    

$res = json_decode($json, true); 
```

你能试试这个。

# oracle - 过程中的动态sql错误

> ID：13505872
> 
> 赞同：0
> 
> 时间：2012-11-22T04:25:06.263
> 
> 标签：oracle, plsql, oracle10g, dynamic-sql, ora-00904

为什么我的动态 sql 过程不起作用？我要做的就是从表格中显示一个简单的列。我收到以下错误：

第 1 行出现错误：ORA-06550：第 1 行，第 7 列：PLS-00905：对象 SYSTEM.JOIN 无效 ORA-06550：第 1 行，第 7 列：PL/SQL：语句被忽略

```
 create or replace procedure join
(p_table1 in varchar2,
p_joincolumn1 in varchar2,
p_joincolumn2 in varchar2)
 AS
lv_query varchar2(500);
lv_cursor number;
lv_col1 VARCHAR2(30);
lv_col2 VARCHAR2(30);
loopcount number:=0;
cursor_return_value integer;
 begin
lv_cursor:=dbms_sql.open_cursor;
dbms_output.put_line('Value assigned to cursor= ' || lv_cursor );
lv_query:='select p_joincolumn1 from p_table1';
dbms_output.put_line(lv_query);
dbms_sql.parse(lv_cursor, lv_query, dbms_sql.native);
dbms_sql.define_column (lv_cursor, 1, lv_col1);
dbms_sql.define_column (lv_cursor, 2, lv_col2);
cursor_return_value := dbms_sql.execute (lv_cursor);
LOOP
    loopcount:=loopcount+1;
    dbms_output.put_line('loopcount= ' || loopcount );
    if dbms_sql.fetch_rows (lv_cursor)=0 then
        EXIT;
    end if;

    dbms_sql.column_value(lv_cursor, 1, lv_col1);
    dbms_sql.column_value (lv_cursor, 2, lv_col2);
    dbms_output.put_line(lv_col1 || '   ' || lv_col2 ); 
END LOOP;
 dbms_output.put_line('At end of loop');
 dbms_sql.close_cursor(lv_cursor);
 end;
 /

 execute join ('PROJECT', 'PROJECT.P_ID', 'PROJECT.SKILL_ID'); 
```

错误：

```
 Procedure created.

 SQL> 
 SQL> execute testing_j ('PROJECT', 'PROJECT.P_ID', 'PROJECT.SKILL_ID');
 Value assigned to cursor= 20
 select p_joincolumn1 from p_table1
 BEGIN testing_j ('PROJECT', 'PROJECT.P_ID', 'PROJECT.SKILL_ID'); END;

 *
 ERROR at line 1:
 ORA-00942: table or view does not exist
 ORA-06512: at "SYS.DBMS_SYS_SQL", line 906
 ORA-06512: at "SYS.DBMS_SQL", line 39
 ORA-06512: at "SYSTEM.TESTING_J", line 17 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:24:51.853

该过程可能是用编译错误创建的。

尽量不要同时运行这两个命令
- 1\. 创建过程 - 如果创建过程有错误，您可以使用命令显示它们（在 sqlplus 中） （您可以[在此处](https://stackoverflow.com/questions/9788556/how-to-find-the-error-causing-ora-06575)`show err`查看如何查看错误） 2\. 执行过程

至于你的代码：
在声明部分你有这一行

```
lv_col2 VARCHAR2(30;) 
```

应该是

```
lv_col2 VARCHAR2(30); 
```

这可能是编译错误。

顺便说一句，恕我直言，用关键字 ( `join`) 命名您的过程是不好的做法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:49:43.880

哪一点

```
ORA-00942: table or view does not exist 
```

让你困惑吗？您的数据库中没有名为 P_TABLE1 的表，或者 SYSTEM 模式中没有名为 P_TABLE1 的表。数据库对象名称仅在模式中是唯一的：如果我们想要引用由不同用户拥有的对象，我们需要在对象名称前面加上该模式：

```
select p_joincolumn1 from user23.p_table1 
```

此外，该用户需要授予我们对其对象的必要权限......

... 除了 SYS 和 SYSTEM 等用户之外，强大的帐户具有 ANY 权限的全部功能。您不应该在 SYSTEM 模式中创建对象，因为它是 Oracle 系统的一个组成部分，并且使用它可能会损坏您的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T17:12:09.463

修复了我的代码，它现在可以工作了。将 dbms_sql.native 更改为 dbms_sql.v7，并且还更改了一些语法。

```
create or replace procedure testing_j
(table_name in varchar2,
column1 in varchar2)
AS
lv_query varchar2(500);
lv_cursor number;
lv_col1 number(6);
loopcount number:=0;
cursor_return_value integer;
begin
lv_cursor:=dbms_sql.open_cursor;
dbms_output.put_line('Value assigned to cursor= ' || to_char(lv_cursor));
lv_query:='SELECT ' || column1 || ' FROM ' || table_name;
dbms_output.put_line(lv_query);
dbms_sql.parse(lv_cursor, lv_query, dbms_sql.v7);

dbms_sql.define_column (lv_cursor, 1, lv_col1);
cursor_return_value := dbms_sql.execute (lv_cursor);
LOOP
    loopcount:=loopcount+1;
    --dbms_output.put_line('loopcount= ' || loopcount );
    if dbms_sql.fetch_rows (lv_cursor)=0 then
        EXIT;
    end if;

    dbms_sql.column_value(lv_cursor, 1, lv_col1);
    dbms_output.put_line(lv_col1);  
END LOOP;
dbms_output.put_line('At end of loop');
dbms_sql.close_cursor(lv_cursor);
end;
/

PL/SQL procedure successfully completed.

SQL> execute testing_j ('PROJECT', 'PROJECT.P_ID');
Value assigned to cursor= 12
SELECT PROJECT.P_ID FROM PROJECT
1
1
2
3
3
4
4
5
5
6
7
7
At end of loop

PL/SQL procedure successfully completed. 
```

# jetty - 码头：码头服务器关闭

> ID：13505873
> 
> 赞同：1
> 
> 时间：2012-11-22T04:25:12.707
> 
> 标签：jetty

在高并发和流量的多线程环境中，我们观察到 Jetty 服务器在一段时间后停止。

我们正在使用 Jetty 8

不知道是什么原因，也无法手动重现，有没有人知道什么时候让Jetty服务器自动关机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:00:16.490

Jetty 在任何情况下都不应该自动停止。所以首先，有几个问题：

*   哪个操作系统？
*   哪个JVM？
*   哪个确切的码头版本？
*   “有时”是什么意思。分钟，小时，天？
*   只是为了确定：关机是什么意思？码头进程会消失还是停止响应请求？

STDOUT 或日志中关于可能导致关机的任何提示？STDOUT 和请求日志中的最后一条日志消息是什么？

如果您根本没有日志条目，则可能值得使用一些脚本定期抛出线程转储。例如每一分钟。您可以使用 jstack 或“kill -3”（SIGHUP）来执行此操作。

# exception - jqGrid 在创建定义时捕获异常

> ID：13505880
> 
> 赞同：0
> 
> 时间：2012-11-22T04:25:41.303
> 
> 标签：exception, jqgrid, error-handling, overlay

我想在创建 jqGrid 定义时捕获错误，例如 col_names 和 col_model 不匹配或单元格自定义格式时出现错误。 `The purpose is to catch these errors and display as an overlay`在网格占位符上。
如果我放置`try catch outside grid definition`，控制永远不会进入 catch 块，但错误默认显示为警报对话框。

请有任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:03:10.933

我认为大小不匹配的例子`colNames`不是`colModel`很好的例子。例如，您是否使用`cn`and`cm`作为值`colNames`和`colModel`参数，您可以在创建 jqGrid*之前*`if (cn.length !== cm.length) {...}`将其包含 在代码中。jqGrid 的当前代码执行相同的操作（请参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L945-L948)）。

 *一般来说，jqGrid 或其他插件如何报告错误并没有共同的方式。例如，jQuery 引入了[jQuery.error](http://api.jquery.com/jQuery.error/)函数，您通常可以覆盖该函数。问题是该函数将用于*非常小*的 jQuery 代码子集。所以在我看来，这真的帮不上什么忙。大多数 jQuery 函数没有输入参数的验证。因此，如果您使用错误的参数，您可能会产生不可预知的结果。

此外，jqGrid 代码的许多部分都是**异步**工作的。因此，应该主要以其他方式进行验证。例如，我建议您使用`loadError`回调。有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/6969114/315935)和[另一个](https://stackoverflow.com/a/5501644/315935)。*

# sql-server - 网站致命错误 9001

> ID：13505881
> 
> 赞同：3
> 
> 时间：2012-11-22T04:25:44.720
> 
> 标签：sql-server, asp.net-mvc

我知道这个问题以前在这里被问过，但没有一个建议对我有用。

我在共享服务器上有一个 ASP.NET MVC (v. 3) 网站。该网站现在可以正常运行几个星期，直到我`Fatal Error 9001`在登录后立即开始收到错误消息。

因为这是一个共享服务器，所以我可以对数据库做的事情非常有限（而且我对数据库了解不多）。服务台坚持认为他们的服务器没有问题。我从他们那里得到了各种建议：

*   因为空间不足而升级到商业计划
*   即使 mdb 文件很小，ldb 也可以快速增长。ldb 文件可能占用了所有空间。我有 100MB 可用空间，数据库大小为 16.5MB。ldb文件能占用剩余空间吗？
*   我的 SQL 查询有问题，我应该检查一下网站。我正在使用带有 linq to sql 的 EF。到目前为止一切正常......查询中是否存在导致此类错误的问题？
*   db 日志中没有任何问题，因此不可能发生此错误。我应该在下次它发生时记录它并再次联系。

我在 SO 上发现了一些帖子，建议恢复数据库备份可以解决这个问题。我没有最近的备份，并且因为`fatal error 9001`发生了一个新的备份。

我还能做什么/尝试让我的网站再次移动？

更新：

我今天收到了托管该网站的帮助台的回复。他们告诉我以下错误信息。

```
Event code: 3005 
Event message: An unhandled exception has occurred. 
Event time: 11/23/2012 6:50:03 AM 
Event time (UTC): 11/23/2012 12:50:03 PM 
Event ID: 55fd03ff030d4d05bf791aa57b726df4 
Event sequence: 8 
Event occurrence: 1 
Event detail code: 0 

Application information: 
    Application domain: /LM/W3SVC/9891/ROOT-1-129981485984030000 
    Trust level: Full 
    Application Virtual Path: / 
    Application Path: C:\ClientSites\friedemannallgayer.com\httpdocs\ 
    Machine name: ASPHOST94 

Process information: 
    Process ID: 87868 
    Process name: w3wp.exe 
    Account name: ASPHOST94\IWPD_293(friedemann) 

Exception information: 
    Exception type: SqlException 
    Exception message: Warning: Fatal error 9001 occurred at Nov 23 2012  6:50AM. Note the error and time, and contact your system administrator.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.CloseInternal(Boolean closeReader)
   at System.Data.SqlClient.SqlDataReader.Close()
   at System.Web.Security.SqlMembershipProvider.GetPasswordWithFormat(String username, Boolean updateLastLoginActivityDate, Int32& status, String& password, Int32& passwordFormat, String& passwordSalt, Int32& failedPasswordAttemptCount, Int32& failedPasswordAnswerAttemptCount, Boolean& isApproved, DateTime& lastLoginDate, DateTime& lastActivityDate)
   at System.Web.Security.SqlMembershipProvider.CheckPassword(String username, String password, Boolean updateLastLoginActivityDate, Boolean failIfNotApproved, String& salt, Int32& passwordFormat)
   at System.Web.Security.SqlMembershipProvider.ValidateUser(String username, String password)
   at PapaFilmsDB.Models.AccountMembershipService.ValidateUser(String userName, String password) in C:\Users\david.DOMAIN_GIS\Dropbox\Programming\PapaFilmsDB\PapaFilmsDB_20121029\PapaFilmsDB\Data\Models\AccountModels.cs:line 119
   at PapaFilmsDB.Controllers.AccountController.LogOn(LogOnModel model, String returnUrl) in C:\Users\david.DOMAIN_GIS\Dropbox\Programming\PapaFilmsDB\PapaFilmsDB_20121029\PapaFilmsDB\Controllers\AccountController.cs:line 40
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

Request information: 
    Request URL: http://www.friedemannallgayer.com/Account/LogOn?ReturnUrl=/ 
    Request path: /Account/LogOn 
    User host address: 93.219.156.103 
    User:  
    Is authenticated: False 
    Authentication Type:  
    Thread account name: ASPHOST94\IWPD_293(friedemann) 

Thread information: 
    Thread ID: 9 
    Thread account name: ASPHOST94\IWPD_293(friedemann) 
    Is impersonating: False 
    Stack trace:    at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.CloseInternal(Boolean closeReader)
   at System.Data.SqlClient.SqlDataReader.Close()
   at System.Web.Security.SqlMembershipProvider.GetPasswordWithFormat(String username, Boolean updateLastLoginActivityDate, Int32& status, String& password, Int32& passwordFormat, String& passwordSalt, Int32& failedPasswordAttemptCount, Int32& failedPasswordAnswerAttemptCount, Boolean& isApproved, DateTime& lastLoginDate, DateTime& lastActivityDate)
   at System.Web.Security.SqlMembershipProvider.CheckPassword(String username, String password, Boolean updateLastLoginActivityDate, Boolean failIfNotApproved, String& salt, Int32& passwordFormat)
   at System.Web.Security.SqlMembershipProvider.ValidateUser(String username, String password)
   at PapaFilmsDB.Models.AccountMembershipService.ValidateUser(String userName, String password) in C:\Users\david.DOMAIN_GIS\Dropbox\Programming\PapaFilmsDB\PapaFilmsDB_20121029\PapaFilmsDB\Data\Models\AccountModels.cs:line 119
   at PapaFilmsDB.Controllers.AccountController.LogOn(LogOnModel model, String returnUrl) in C:\Users\david.DOMAIN_GIS\Dropbox\Programming\PapaFilmsDB\PapaFilmsDB_20121029\PapaFilmsDB\Controllers\AccountController.cs:line 40
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

关于 9001 错误，任何人都可以理解这一点吗？他们声称这是我的网站或`.net 4.0`. 那可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-11T10:15:34.190

我今天得到了这个并通过使数据库脱机然后再次使其联机来“修复”它。只是治标不治本，所以问题可能会再次出现，但至少通过数据库可以再次执行写入操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T06:48:19.597

[你可以看看这个](https://serverfault.com/questions/238394/diagnosing-microsoft-sql-server-error-9001-the-log-for-the-database-is-not-avai)

由于您使用共享服务器，因此数据库损坏的发生率很高，并且您对服务器配置的权限很小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-19T13:11:47.463

在我不知道一个未使用的数据库的情况下，我发生了此错误。它后来在几天内升级到两个数据库，今天它发生在所有数据库上。**我通过重新启动 Windows 服务实例**来修复症状，但仍然不知道为什么它首先会发生！

# php - 如何在php中获取url id

> ID：13505883
> 
> 赞同：1
> 
> 时间：2012-11-22T04:26:33.647
> 
> 标签：php, syntax

我想在页面中添加一个链接按钮。链接从 url 获取，例如：http://www.domain.com/links.php?id=9AO8VkSIODU。我们需要使用 php 从 url 中获取“9AO8VkSIODU”。我们试试这个字符串

```
<?php
$values = explode(",", $_GET["id"]);
?> 
```

但它显示语法错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:30:06.587

这应该有效：

```
$url = 'http://www.domain.com/links.php?id=9AO8VkSIODU';
$query = parse_url($url, PHP_URL_QUERY);
parse_str($query, $parts);
echo $parts['id'];

#=> 9AO8VkSIODU 
```

[`parse_url()`](http://php.net/manual/en/function.parse-url.php)将获取特定的 URL 组件
[`parse_str()`](http://php.net/manual/en/function.parse-str.php)将查询字符串解析为哈希

如果你只是在 内工作`$_SERVER['REQUEST_URI']`，你可以`$_GET['id']`直接使用。上面的解决方案适用于明确声明的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:30:23.963

你可以只使用

```
<?php $getvariable = $_GET['id']; ?> 
```

然后在您的页面中使用 $getvariable

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:30:38.537

```
<?php
$values = $_GET['id'];
echo $values;
?> 
```

或者

```
<?php
echo $_GET['id'];
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T05:03:43.380

有两种方法

1.  您可以使用 parse_url() 函数

[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

1.  通过 $_GET 服务器变量。

它返回 URL 中使用的所有查询字符串的数组。

```
<?php
echo $_GET['id'];
?> 
```

# javascript - 存在多个类时的Jquery定位

> ID：13505885
> 
> 赞同：0
> 
> 时间：2012-11-22T04:27:08.373
> 
> 标签：javascript, jquery

我有以下代码：

```
$(function () {
        var target = $('span.slider') //can I make the variable apply to the target span?

        target.mousedown(function() { 
              sliding = true 
        })
        $(document).mouseup(function() {
             sliding = false 
        })
        $(document).mousemove(function(e) { 
            if(sliding){ 
              target.css('left', e.pageX) //do I isolate here?
            }
        })  
    }) 
```

我的 html 中有四个“span.slider”。如何修改此 jquery 以使该功能仅适用于目标 span.slider？上面的代码移动了所有四个跨度，我完全理解为什么会这样。我无法将其定位到用户希望移动的跨度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:30:56.957

尝试向其添加一个类，然后检查该类

```
 target.mousedown(function() { 
          sliding = true;
          $(this).addClass('sliding'); 
    })
    $(document).mouseup(function() {
         sliding = false; 
          target.removeClass('sliding'); 
    })
    $(document).mousemove(function(e) { 
        if(sliding){ 
          target.filter('.sliding').css('left', e.pageX) //do I isolate here?
        }
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T04:32:48.523

尝试这个：

```
$(function() {
    var target = $('span.slider'); //can I make the variable apply to the target span?
    var targetToMove;
    target.mousedown(function() {
        sliding = true;
        targetToMove = $(this);
    });
    $(document).mouseup(function() {
        sliding = false;
    });
    $(document).mousemove(function(e) {
        if (sliding) {
            targetToMove.css('left', e.pageX); //do I isolate here?
        }
    });
})​;​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T04:33:00.413

您可以按如下方式每次绑定和取消绑定mousemove

```
$(function() {
  var target = $('span.slider');
  target.on('mousedown', function(e) {
    var $el = $(this)
    $(document).mousemove(function(e) {
      $el.css('left', e.pageX) 
    })
  }).on('mouseup', function() {
    $(document).off('mousemove');
  })

}) 
```

# ruby-on-rails - 在多行中显示记录？

> ID：13505888
> 
> 赞同：1
> 
> 时间：2012-11-22T04:27:51.303
> 
> 标签：ruby-on-rails

我想在多行中显示我的记录。

**例如：**我有 10 条记录，我想将这些记录显示为一行中的 3 条记录，另一行中的其他 3 条记录，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:03:38.697

假设您有 @articles 有 10 篇文章，那么就像

```
<div class="articles">
 <% @articles.each_with_index do |article, article_index|%>
    <div class="article" style="float:left">
      <%=article.name%>
    </div>
    <% if (article_index+1) % 3 == 0%>
    <br/> <!-- Or write a div and clear it -->
    <% end %>
 <% end %>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:52:20.963

您可以使用 html 显示

```
 <tr> </tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T05:02:42.137

试试这样：

```
<table>
<% 
rowCount = 0
@recordsList = Modal.find(:all)
   @recordsList.each do |rec|

      #this will use to make new row.
      if rowCount%3==0
%>
      <tr>
<%    end %>
         <!-- add your records here -->
         <td><%= rec.recordfield %></td>
<%
      rowCount = rowCount + 1

      end
   end
%>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T05:05:13.297

试试这个，为您的解决方案

使用[组内](http://railscasts.com/episodes/28-in-groups-of)

**例如**

```
<table>
  <% @tasks.in_groups_of(4, false) do |row_tasks| %>
    <tr>
      <% for task in row_tasks %>
        <td><%= task.name %></td>
      <% end %>
    </tr>
  <% end %>
</table> 
```

**来源**：

1.  [http://railscasts.com/episodes/28-in-groups-of](http://railscasts.com/episodes/28-in-groups-of)
2.  [http://apidock.com/rails/Array/in_groups_of](http://apidock.com/rails/Array/in_groups_of)

# iphone - 如何获取重定向的 URL

> ID：13505889
> 
> 赞同：4
> 
> 时间：2012-11-22T04:28:07.140
> 
> 标签：iphone, html, objective-c, ios, xcode

我有一个 URL。当我尝试在浏览器中打开它时，它会重定向到另一个 URL 并显示内容。我想要那个内容但是我没有得到那个重定向的 URL。所以，我无法显示数据。

我怎样才能以编程方式做到这一点？

**例如，我拥有的网址：http:** [//www.windpowerengineering.com/?p=11020](http://www.windpowerengineering.com/?p=11020)

**& 重定向的 URL 是： http:** [//www.windpowerengineering.com/design/mechanical/blades/bladeless-turbine-converts-wind-into-fluid-power/](http://www.windpowerengineering.com/design/mechanical/blades/bladeless-turbine-converts-wind-into-fluid-power/)

**我想要这个重定向的 URL**。我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T05:15:33.987

1）指定您的类符合 UIWebViewDelegate 协议（并确保您的 WebView 的委托出口连接到您的视图控制器）：

```
@interface YourWebsiteViewController : UIViewController <UIWebViewDelegate> 
```

2）添加以下委托方法：

```
-(void)webViewDidStartLoad:(UIWebView *)webView
{
    NSURL *url = [webView.request mainDocumentURL];
    NSLog(@"The Redirected URL is: %@", url);
} 
```

根据您尝试使用此信息执行的操作，您可能希望用 #2 替换此方法（这将使您有机会阻止页面加载）：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSURL *url = [request mainDocumentURL];
    NSLog(@"The Redirected URL is: %@", url);
    // Return YES if you want to load the page, and NO if you don't.
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:31:19.833

使用 javascript

```
document.referrer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:32:29.173

该 URL 是 http 标头的一部分。这就是发生的事情：

请求 1：[http ://www.windpowerengineering.com/?p=11020](http://www.windpowerengineering.com/?p=11020)

响应 1：页面已移至[http://www.windpowerengineering.com/design/mechanical/blades/bladeless-turbine-converts-wind-into-fluid-power/](http://www.windpowerengineering.com/design/mechanical/blades/bladeless-turbine-converts-wind-into-fluid-power/)

然后你的浏览器会去：

请求 2： http: [//www.windpowerengineering.com/design/mechanical/blades/bladeless-turbine-converts-wind-into-fluid-power/](http://www.windpowerengineering.com/design/mechanical/blades/bladeless-turbine-converts-wind-into-fluid-power/)

响应 3：这是 html

如果您查看响应 1 中的 http 标头，您将能够从`Location`标头中提取 url。在 Objective C 中，这是一种方法：

```
NSURLResponse* response = // the response, from somewhere
NSDictionary* headers = [(NSHTTPURLResponse *)response allHeaderFields];
NSString* redirection_url = [headers objectForKey:@"Location"]; 
```

在上面的代码中，您可以访问`headers`字典中的所有响应 http 标头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T04:35:19.947

你试过这个委托方法吗？

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{ 
```

每当 webview 加载网页时都会调用它。

您可以从此方法的参数之一获取 URL，`request`

```
 NSURL *regURL=[request URL];
NSString *urlString=[regURL absoluteString]; 
```

# java - 如何检索添加到 JMenu 的组件数量？

> ID：13505890
> 
> 赞同：3
> 
> 时间：2012-11-22T04:28:07.763
> 
> 标签：java, swing, junit, assert

我做了一个小测试，在第二个测试中我得到一个断言错误（0而不是1）：

```
package tests;

import static org.junit.Assert.*;
import org.junit.Test;
import javax.swing.*;

public class MenuTest {

    @Test
    public void testElementsAddition() {
        JMenuItem mItem1 = new JMenuItem();
        JMenuItem mItem2 = new JMenuItem();
        JMenu menu = new JMenu();

        mItem1.add(mItem2);
        assertEquals(1, mItem1.getComponentCount());

        menu.add(mItem1);
        assertEquals(1, menu.getComponentCount());
    }
} 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T04:48:24.797

发生这种情况是因为菜单项实际上并未添加到`JMenu`自身，而是在内部添加到弹出菜单中，实际上菜单中没有添加任何内容。

我想你会想要使用[`JMenu#getItemCount`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JMenu.html#getItemCount%28%29)，它*“返回菜单上的项目数，包括分隔符”*，或者最好是[JMenu#getMenuComponentCount](http://docs.oracle.com/javase/7/docs/api/javax/swing/JMenu.html#getMenuComponentCount%28%29)

# java - 使用 CRUD 函数创建 MVC 应用程序

> ID：13505895
> 
> 赞同：0
> 
> 时间：2012-11-22T04:28:19.970
> 
> 标签：java, model-view-controller, jakarta-ee, jdbc, crud

我目前是 Java EE 的新手，还没有 Java SE 和 EE 方面的经验。

我们得到了一个项目，我们将使用 JDBC 创建一个具有创建、更新和删除功能的 Web 应用程序。主要要求是使用MVC。我们想到了 MVC 模式和 Struts 1 框架。我正在考虑使用其他框架而不是 Struts 1。

您认为适合初学者的好的框架是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:31:18.317

如果您正在考虑使用 Struts 1，请切换到 Struts 2。仅 Java 中的 MVC 就有很多可用的替代方案。我主要认为 Spring MVC 和 JSF 是 Struts 的替代品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:36:39.417

我推荐[Grails](http://grails.org)

我第一次使用 struts 1.3 启动 MVC Web 应用程序，因为有很多教程和文档可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:45:20.733

出于学习目的，我强烈建议您使用 Spring ROO 创建 CRUD Web 项目。只需按照 Spring ROO 页面上的文档进行操作即可。您可以在 10 分钟内在服务器上启动并运行一个 Web 项目。并且你可以选择使用一些流行的框架、数据库等。然后你可以学习自动创建的项目，如结构、模式、良好实践等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T10:27:59.973

如果您是 Java EE 新手并且没有 Java 经验，我建议您从 Spring MVC 和一些基本的分步示例开始。

如果您准备好了，您可以尝试使用 spring 的 jdbcTemplate 类中的第一个来查询数据库并切换到 JPA。您将需要学习一些 Spring 注解，如 @Controller、@RequestMapping、@ModelAttribute 等，但一旦完成，您会很高兴。

您可能还需要一些 JSP 和 servlet 的背景知识，基本示例肯定会帮助您，并帮助您理解 Spring MVC 概念。

我不推荐 Spring Roo 作为初学者，因为当您开始将其更改为您的要求时，它可能会让您不知所措。其他合理的替代方案是：Struts2。

我也鼓励使用 maven 来构建你的应用程序和 Tomcat 或 Jetty 作为应用程序服务器。

# android - android中可以使用的最大进程数是多少？

> ID：13505908
> 
> 赞同：1
> 
> 时间：2012-11-22T04:29:56.697
> 
> 标签：android, process

我正在尝试使用`getRunnningTasks(int maxNum)`.

我不知道我应该在数字中设置什么值`maxNum`。

因此，我将最大进程数设置为`maxNum`.

android中可以使用的最大进程数是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:17:28.763

`maxNum``getRunningTasks`设置将返回的最大任务数。`Integer.MAX_VALUE`如果您想确保完成所有任务，您可以直接通过。

# objective-c - iOS 将 NSString 拆分为由字节 1 分隔的 NSArray

> ID：13505912
> 
> 赞同：0
> 
> 时间：2012-11-22T04:30:06.540
> 
> 标签：objective-c, ios

我有一个由字节“1”分隔的字符串。现在我想拆分这个字符串如何做到这一点。

```
[str componentsSeparatedByString:@" "] 
```

工作正常，但仅适用于字符串分隔符而不适用于字节。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:37:22.930

如果您谈论的是由十六进制值为 0x01 的 ASCII 字符分隔的字符串，那么您可以执行以下操作：

```
NSArray *substrings = [str componentsSeparatedByString:@"\u0001"]; 
```

该序列`\u0001`被转换为十六进制代码 1 的 Unicode 字符。

# javascript - 将按钮 onclick 内容替换为另一个网页

> ID：13505918
> 
> 赞同：2
> 
> 时间：2012-11-22T04:30:43.437
> 
> 标签：javascript, html

我是 javascript 和堆栈溢出的新手，只是想知道这是否是将按钮 onclick 中的内容替换到另一个页面的正确方法？因为它不适用于我的情况。这是我的代码：

javascript:

```
function newpage(){
    var oldHTML = document.getElementById('cambtn').onclick;
    var newHTML = "window.location='http://curv.info";
    document.getElementById('cambtn').onclick = newHTML;
} 
```

html:

```
<button name="cambtn" onclick="camera();"><img id="camicon" src="Glitcher-03.png" alt="Camera" width="120" style="position:absolute; left:50px; top:50px;"></button>
<button name="btn" onclick="newpage()"></button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:38:45.857

一般的做法：

JS：

```
function newPage(){
    document.getElementById("cambtn").onclick=function(){
      window.location.assign("http://curv.info");
    };
} 
```

HTML：

```
<button id="cambtn">...</button>
<button onclick="newPage();">Go</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:01:25.753

如果 iframe 是一个选项，您可以执行以下操作：

```
<html>
<head>
    <title></title>
    <meta charset="UTF-8" />
    <style>
    #page{width:600px;height:400px;margin:0 auto;}
    </style>
    <script type="text/javascript">
    function oldhtml() { 
        document.getElementById("page").innerHTML = "<iframe src'http://www.google.com'></iframe>"  //loads html from another page

        }
   function newhtml() {
    document.getElementById("page").innerHTML = "<div style='width:100px;height:100px;background:black;color:#fff;'>NEW HTML</div>";  //loads static html 
   }
   </script>
</head>
<body>

</body>
    <button id="old" onclick="oldhtml()">Old HTML</button><br><br>
    <button id="new" onclick="newhtml()">NEW HTML</button>
    <div id="page"></div>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:42:06.103

`onclick`虽然您可以使用简单的字符串 ( )将元素设置为 HTML 属性`onclick="somecode"`，但您不能使用 JavaScript 执行相同的操作。相反，您应该创建一些执行您想要的功能，并将该功能设置为`onclick`属性：

```
function f() { somecode }
document.getElementById("someid").onclick = f 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T04:43:02.380

```
<button id="cambtn" onclick="camera();"><img ...></button>
<button id="btn">Button</button>

document.getElementById("btn").addEventListener("click", function(){
    document.getElementById("cambtn").onclick = function(){
        location.href = "http://curv.info";
    });
}); 
```

# c++ - 返回与原始模板类型不同时没有匹配的函数

> ID：13505920
> 
> 赞同：0
> 
> 时间：2012-11-22T04:30:56.760
> 
> 标签：c++, templates, generics

我写了一个简单的模板矩阵类，getMat函数应该返回一个不同大小的原始子矩阵，所以我这样编码：

```
template <typename T, size_t m, size_t n, typename _Prd>
template<size_t _m, size_t _n> 
Matrix<T,_m,_n,_Prd> Matrix<T,m,n,_Prd>::getMat(const size_t& ulrow, const size_t& ulcol ) const 
{
    assert(_m+ulcol <= m && _n+ulrow <= n) ;
    T temp[_m*_n] ;
    for (size_t j = 0 ; j < _m ; ++j)
        for (size_t i = 0 ; i < _n ; ++i)
            temp[j*_n+i] = data[(ulrow + j) * n + ulcol+i] ;
    return Matrix<T,_m,_n,_Prd>(temp) ;
} 
```

然后我这样称呼它：

```
Matrix<double, 4,4> testmat2(100.0) ;
Matrix<double,2,2> testmat4 =  testmat2.getMat(0,0) ; 
```

它显示如下错误：

```
main.cpp:127: error: no matching function for call to ‘Matrix<double, 4ul, 4ul, std::equal_to<double> >::getMat(size_t, size_t)’ 
```

所以我的问题是为什么编译器没有检测到这个 getMat 函数？

**更新：**

我以这种方式尝试了代码，它可以工作：

```
template <typename T, size_t m, size_t n, typename _Prd>
template<size_t _m, size_t _n> 
void Matrix<T,m,n,_Prd>::getMat(Matrix<T,_m,_n,_Prd>& result, const size_t& ulrow, const size_t& ulcol) const
{
    assert(_m+ulcol <= m && _n+ulrow <= n) ;

    for (size_t j = 0 ; j < _m ; ++j)
        for (size_t i = 0 ; i < _n ; ++i)
            result[j*_n+i] = data[(ulrow + j) * n + ulcol+i] ;

} 
```

这是为了传递要修改的子矩阵作为参考。

所以我的问题是，当这个函数返回不同的模板类型（相同的对象）时，编译器根本没有检测到这个函数。

但是我之前在许多转换运算符上使用过这种技术并且它们有效。例如，这个工作：

```
template<typename T, int cn, typename _Prd>
template<typename U, typename _Prd2>
Vec<T,cn,_Prd>::operator Vec<U,cn,_Prd2>() const 
{
  U temp[cn] ;
  for (int i = 0 ; i < cn ; ++i)
    temp[i] = static_cast<U>(this->data[i]) ;
  Vec<U,cn,_Prd2> v(temp) ;
  return v ;
}; 
```

**更新2：**

我根据iammilind修改了代码：

```
template<size_t _m, size_t _n> 
Matrix<T,_m,_n,_Prd> getMat<_m,_n>(const size_t& ulrow, const size_t& ulcol) const ;
// the declaration in the class.

template <typename T, size_t m, size_t n, typename _Prd>
template<size_t _m, size_t _n> 
Matrix<T,_m,_n,_Prd> Matrix<T,m,n,_Prd>::getMat<_m,_n>(const size_t& ulrow, const size_t& ulcol ) const 
{
    assert(_m+ulcol <= m && _n+ulrow <= n) ;
    T temp[_m*_n] ;
    for (size_t j = 0 ; j < _m ; ++j)
        for (size_t i = 0 ; i < _n ; ++i)
            temp[j*_n+i] = data[(ulrow + j) * n + ulcol+i] ;
    return Matrix<T,_m,_n,_Prd>(temp) ;
} 
```

我称之为：

```
Matrix<double,2,2> testmat7 = testmat2.getMat<2,2>(0,0) ; 
```

但它不编译：

```
In file included from main.cpp:13:
Matrix.hpp:125: error: expected initializer before ‘&lt;’ token
In file included from main.cpp:13:
Matrix.hpp:268: error: expected initializer before ‘&lt;’ token
main.cpp: In function ‘int main(int, char**)’:
main.cpp:135: error: ‘class Matrix<double, 4ul, 4ul, std::equal_to<double> >’ has no member named ‘getMat’
main.cpp:135: error: expected unqualified-id before numeric constant 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:12:05.217

当你有这个声明

```
template <typename T, size_t m, size_t n, typename _Prd>
template<size_t _m, size_t _n> 
Matrix<T,_m,_n,_Prd> Matrix<T,m,n,_Prd>::getMat(const size_t& ulrow, const size_t& ulcol ) const 
```

编译器需要推导出 6 个模板参数。其中四个（即 、`T`、`m`和`n`）`_Prd`可以从您调用函数的对象中推导出来。其他两个，即`_m`和`_n`) 不能推导出来。不过，您可以明确指定它们：

```
Matrix<double, 4,4> testmat2(100.0);
Matrix<double,2,2> testmat4 = testmat2.getMat<2, 2>(0,0); 
```

如果`testmat2`最终成为从属名称，则需要添加一个额外的`template`关键字：

```
template <int Size>
void f() {
    Matrix<double, 4, Size> testmat2(100.0);
    Matrix<double, 2, 2>    testmat4 = testmat2.template getMat<2, 2>(0,0);
} 
```

编译器不会使用分配结果的类型来推断模板参数（有时会使用该类型，但仅当存在准备好的重载集并且需要选择函数指针的地址或成员函数指针的地址时其中，我认为）。

转换运算符可以推导出额外的参数，因为它实际上并没有返回类型，而是获取另一个参数，它可以从中潜在地推导出模板参数。您为以后的更新获得的错误可能是由于您声明函数的方式：

```
template<size_t _m, size_t _n> 
Matrix<T,_m,_n,_Prd> getMat<_m,_n>(const size_t& ulrow, const size_t& ulcol) const ; 
```

`<_m, _n>`之后`getMat()`不要去那里。

# css - 如何在悬停时更改两个不同类中的两个属性？

> ID：13505921
> 
> 赞同：2
> 
> 时间：2012-11-22T04:31:15.270
> 
> 标签：css, svg

我在 SVG 文件中创建了两个类来决定许多不同形状的填充颜色。不同的形状被分组，现在我希望它们在悬停时有不同的变化。在悬停时，我希望所有填充类“test1”（位于 groupe 内）更改为例如 #000000 并将类“test2”中的不透明度设置为 0.8。

```
<style type="text/css" >
    .test1 { fill:  #006600;}
    .test2 { fill:  #0000FF; opacity: 0.3;}
    g:hover { ????? }
</style> 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:03:39.947

假设一个标记，如......

```
<g>
  <rect class="test1" ... />
  <rect class="test1" ... />
  <rect class="test2" ... />
  <rect class="test2" ... />
</g> 
```

你的 CSS 将是......

```
.test1 { fill:  #006600;}
.test2 { fill:  #0000FF; opacity: 0.3;}
g:hover .test1 { fill: #000; }
g:hover .test2 { opacity: 0.8; } 
```

# android - 是否可以让 SEND-SMS 和 RECEIVE_SMS 在单个项目中使用权限？

> ID：13505925
> 
> 赞同：1
> 
> 时间：2012-11-22T04:31:19.880
> 
> 标签：android, sms

祝大家有美好的一天。我对android开发相当陌生。您对此问题的答复将不胜感激。

在我的项目中，我必须接收和发送短信。对于接收部分，我使用广播接收器，对于发送部分，我使用普通活动。在这里，Broadcast Receiver 接收短信并将一些数据传输到我刚才提到的 Activity。然后活动执行一些任务并产生一些结果。我需要将这些结果作为短信发送。

我在清单文件中使用了 SEND_SMS 和 RECEIVE_SMS 使用权限。但是这个应用程序在模拟器上给了我一个例外。但是当我在 2 个单独的项目中测试发送部分和接收部分时，它工作正常，没有任何例外。所以我猜代码（或逻辑）没有问题。现在，为什么会抛出这个异常？是否可以让 SEND_SMS 和 RECEIVE_SMS 使用同一个项目（同一个清单）的权限？我使用 SmsManager 发送短信。您的回复将不胜感激。

这是 LogCat 的详细信息：

```
11-22 12:26:00.355: ERROR/Zygote(33): setreuid() failed. errno: 2
11-22 12:26:09.295: ERROR/Zygote(33): setreuid() failed. errno: 17
11-22 12:26:11.125: ERROR/BatteryService(66): usbOnlinePath not found
11-22 12:26:11.125: ERROR/BatteryService(66): batteryVoltagePath not found
11-22 12:26:11.125: ERROR/BatteryService(66): batteryTemperaturePath not found
11-22 12:26:11.155: ERROR/SurfaceFlinger(66): Couldn't open /sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake
11-22 12:26:32.497: ERROR/EventHub(66): could not get driver version for /dev/input/mouse0, Not a typewriter
11-22 12:26:32.605: ERROR/EventHub(66): could not get driver version for /dev/input/mice, Not a typewriter
11-22 12:26:33.756: ERROR/System(66): Failure starting core service
11-22 12:26:33.756: ERROR/System(66): java.lang.SecurityException
11-22 12:26:33.756: ERROR/System(66):     at android.os.BinderProxy.transact(Native Method)
11-22 12:26:33.756: ERROR/System(66):     at android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)
11-22 12:26:33.756: ERROR/System(66):     at android.os.ServiceManager.addService(ServiceManager.java:72)
11-22 12:26:33.756: ERROR/System(66):     at com.android.server.ServerThread.run(SystemServer.java:184)
11-22 12:26:38.805: ERROR/SoundPool(66): error loading /system/media/audio/ui/Effect_Tick.ogg
11-22 12:26:38.815: ERROR/SoundPool(66): error loading /system/media/audio/ui/KeypressStandard.ogg
11-22 12:26:38.815: ERROR/SoundPool(66): error loading /system/media/audio/ui/KeypressSpacebar.ogg
11-22 12:26:38.825: ERROR/SoundPool(66): error loading /system/media/audio/ui/KeypressDelete.ogg
11-22 12:26:39.035: ERROR/SoundPool(66): error loading /system/media/audio/ui/KeypressReturn.ogg
11-22 12:26:50.545: ERROR/ThrottleService(66): Could not open GPS configuration file /etc/gps.conf
11-22 12:26:57.865: ERROR/logwrapper(150): executing /system/bin/tc failed: No such file or directory
11-22 12:26:57.995: ERROR/logwrapper(152): executing /system/bin/tc failed: No such file or directory
11-22 12:26:58.005: ERROR/logwrapper(153): executing /system/bin/tc failed: No such file or directory
11-22 12:27:12.875: ERROR/ActivityManager(66): ANR in com.android.settings
11-22 12:27:12.875: ERROR/ActivityManager(66): Reason: Broadcast of Intent { act=android.intent.action.CLOSE_SYSTEM_DIALOGS cmp=com.android.settings/.widget.SettingsAppWidgetProvider (has extras) }
11-22 12:27:12.875: ERROR/ActivityManager(66): Load: 2.93 / 0.78 / 0.26
11-22 12:27:12.875: ERROR/ActivityManager(66): CPU usage from 10994ms to 2618ms ago:
11-22 12:27:12.875: ERROR/ActivityManager(66):   ronsoft.openwnn: 209% = 122% user + 86% kernel / faults: 3908 minor 5 major
11-22 12:27:12.875: ERROR/ActivityManager(66):   m.android.phone: 168% = 84% user + 84% kernel / faults: 3177 minor 7 major
11-22 12:27:12.875: ERROR/ActivityManager(66):   system_server: 150% = 118% user + 31% kernel / faults: 428 minor 3 major
11-22 12:27:12.875: ERROR/ActivityManager(66):   ndroid.launcher: 118% = 65% user + 52% kernel / faults: 2921 minor 3 major
11-22 12:27:12.875: ERROR/ActivityManager(66):   ndroid.settings: 118% = 47% user + 70% kernel / faults: 2956 minor 7 major
11-22 12:27:12.875: ERROR/ActivityManager(66):   bootanimation: 18% = 15% user + 2% kernel
11-22 12:27:12.875: ERROR/ActivityManager(66):   app_process: 13% = 9% user + 4% kernel / faults: 241 minor
11-22 12:27:12.875: ERROR/ActivityManager(66):   adbd: 11% = 0% user + 11% kernel
11-22 12:27:12.875: ERROR/ActivityManager(66): TOTAL: 100% = 70% user + 29% kernel
11-22 12:27:22.035: ERROR/ActivityManager(66): ANR in jp.co.omronsoft.openwnn
11-22 12:27:22.035: ERROR/ActivityManager(66): Reason: Executing service jp.co.omronsoft.openwnn/.OpenWnnJAJP
11-22 12:27:22.035: ERROR/ActivityManager(66): Load: 3.31 / 0.94 / 0.32
11-22 12:27:22.035: ERROR/ActivityManager(66): CPU usage from 10962ms to 1406ms ago:
11-22 12:27:22.035: ERROR/ActivityManager(66):   system_server: 47% = 34% user + 12% kernel / faults: 511 minor
11-22 12:27:22.035: ERROR/ActivityManager(66):   app_process: 15% = 14% user + 1% kernel / faults: 420 minor
11-22 12:27:22.035: ERROR/ActivityManager(66):   ronsoft.openwnn: 9% = 7% user + 1% kernel / faults: 394 minor
11-22 12:27:22.035: ERROR/ActivityManager(66):   ndroid.launcher: 9% = 6% user + 2% kernel / faults: 741 minor
11-22 12:27:22.035: ERROR/ActivityManager(66):   bootanimation: 6% = 5% user + 0% kernel
11-22 12:27:22.035: ERROR/ActivityManager(66):   m.android.phone: 6% = 4% user + 1% kernel / faults: 267 minor
11-22 12:27:22.035: ERROR/ActivityManager(66):   adbd: 1% = 0% user + 0% kernel
11-22 12:27:22.035: ERROR/ActivityManager(66):   logcat: 1% = 0% user + 0% kernel
11-22 12:27:22.035: ERROR/ActivityManager(66):   events/0: 0% = 0% user + 0% kernel
11-22 12:27:22.035: ERROR/ActivityManager(66):   servicemanager: 0% = 0% user + 0% kernel
11-22 12:27:22.035: ERROR/ActivityManager(66):  -ndroid.settings: 0% = 0% user + 0% kernel
11-22 12:27:22.035: ERROR/ActivityManager(66): TOTAL: 100% = 75% user + 25% kernel
11-22 12:27:33.342: ERROR/HierarchicalStateMachine(66): TetherMaster - unhandledMessage: msg.what=3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:39:29.633

我认为[本](http://mobiforge.com/developing/story/sms-messaging-android)教程可能会引导您解决问题。有两个模块，发送和接收短信。

# mysql - MySQL 下一行 ORDER BY 多列 JOIN 表 2

> ID：13505927
> 
> 赞同：0
> 
> 时间：2012-11-22T04:31:28.130
> 
> 标签：mysql

我需要帮助限制此查询的结果集。

```
SELECT tt.id
FROM kf_topics AS tt
LEFT JOIN kf_posts AS pp
ON tt.id = pp.topicid
WHERE tt.boardid = 1
GROUP BY tt.id
ORDER BY tt.sticky DESC, pp.time DESC 
```

当前返回下面的数组。

![在此处输入图像描述](../Images/bbff212cdd0751fd5356140e1ff0f76b.png)

但是，我需要在具有我指定的 ID 的行之后找到列表中的行，记住这些将根据 ORDER BY tt.sticky DESC、pp.time DESC 更改订单。此外，行永远不会是完美的 ID 顺序，因此基于 ID 字段是不可能的。

例如，如果我想查找 ID = 24 之后的下一行，则查询结果将是 ID => 23

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T17:49:28.790

我们可以使用单个查询来做到这一点，如下所示

```
SELECT ttid
FROM 
(SELECT tt.id ttid,@row:=@row+1 rownum,IF(tt.id=24,@j:=@row,0)
FROM kf_topics AS tt
LEFT JOIN kf_posts AS pp
ON tt.id = pp.topicid JOIN (SELECT @row:=0) AS rowcount
WHERE tt.boardid = 1
GROUP BY tt.id
ORDER BY tt.sticky DESC, pp.time DESC) A JOIN (SELECT @j+1 as rownum) B ON (A.rownum=B.rownum); 
```

我不确定您为什么要使用 group by，但无论如何它都应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:40:56.397

```
SET @row:=0;
SELECT rownum+1 INTO @nextrow FROM 
   (SELECT tt.id AS id, @row AS rownum
   FROM kf_topics AS tt
   LEFT JOIN kf_posts AS pp
   ON tt.id = pp.topicid
   WHERE tt.boardid = 1
   AND (@row:=@row+1)<=1
   GROUP BY tt.id
   ORDER BY tt.sticky DESC, pp.time DESC) A
WHERE A.id=<id>)
SET @row=0;
SELECT A.id FROM 
  (SELECT tt.id AS id, @row AS rownum
   FROM kf_topics AS tt
   LEFT JOIN kf_posts AS pp
   ON tt.id = pp.topicid
   WHERE tt.boardid = 1
   AND (@row:=@row+1)<=1
   GROUP BY tt.id
   ORDER BY tt.sticky DESC, pp.time DESC) A 
WHERE A.rownum=@nextrow 
```

这可以重写为单个查询。上面的查询没有优化，但会给出你需要的结果。我会再想一想并尝试发布优化的查询。

# javascript - Google Places API 为什么每次都在不同的变量下返回 Lat 和 Lon？

> ID：13505928
> 
> 赞同：1
> 
> 时间：2012-11-22T04:31:33.420
> 
> 标签：javascript

这让我发疯了，出于某种原因，API 用于返回 Lat 和 Lon 如下：（我认为是这样的）：

`place.geometry.location.y`
`place.geometry.location.z`经度和纬度

然后它开始像这样返回它：

`place.geometry.location.Ya`
`place.geometry.location.Za`经度和纬度

今天我的 APP 不工作了，我发现这是因为 Google API 像这样返回 Lat 和 Lon：

`place.geometry.location.$a`
`place.geometry.location.ab`经度和纬度

什么？我应该如何处理这个？我正在考虑简单地将位置内的第一个变量读取为纬度，将第二个变量读取为经度，而不管它们的名称。但我担心 API 下次可能会返回一个完全不同的对象并弄乱我的 javascript。

有人经历过吗？我应该做些什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T04:52:20.650

place.geometry.location 由 LatLng 类组成。所以如果你想得到纬度/经度，你应该使用这样的代码：

```
var lat = result[0].geometry.location.lat();
var lng = result[0].geometry.location.lng(); 
```

place.geometry.location 的参考在这里。 [https://developers.google.com/maps/documentation/javascript/reference#PlaceGeometry](https://developers.google.com/maps/documentation/javascript/reference#PlaceGeometry)

# java - 循环通过editTexts来检查值

> ID：13505930
> 
> 赞同：0
> 
> 时间：2012-11-22T04:31:46.697
> 
> 标签：java, android, loops, while-loop, android-edittext

我有一个包含 100 个空白 EditTexts 的布局，所有这些都根据它们的行/列 ID 命名（例如 box0101、box0102 等）。

然后我有另一个布局，有 100 个 TextView，布局完全相同，每个都有一个字母，使用相同的约定命名（answerbox0101、answerbox0102 等）

我想编写一个循环来检查 box0101 和 answerbox0101，依此类推，直到其中一个框不匹配，或者它达到 100 并且所有框都匹配。

我很擅长编写循环的逻辑，我的问题是我需要循环参数成为 EditText 名称的一部分！我该如何克服呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:47:12.410

```
for(int i=0;i<ROW_COUNT;i++){
    for(j=0;j<COLUMN_COUNT;j++){
        int editTextId=getResId("box"+i+j,this,id.class);
        int textViewId=getResId("answerbox"+i+j,this,id.class);

        EditText et=(EditText)findViewById(editTextId);
        TextView tv=(TextView)findViewById(textViewId);

       //Then do your comparison as you like and do the rest. 
    }   
}

public static int getResId(String variableName, Context context, Class<?> c) {

    try {
        Field idField = c.getDeclaredField(variableName);
        return idField.getInt(idField);
    } catch (Exception e) {
        e.printStackTrace();
        return -1;
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:45:33.880

您可以使用视图的标记属性来设置字符串属性，例如，如果您正在创建 100 个编辑文本，您可以设置编辑文本的标记，例如 editText0101、editText0102 等，并且在答案 editTexts answerbox0101、answerbox0102 ... 中也是如此。方法，您可以通过标签名称，按方法获得对editText的直接引用`findViewByTag()`。

# mysql - 左连接，包括主表上的位置

> ID：13505932
> 
> 赞同：0
> 
> 时间：2012-11-22T04:31:58.930
> 
> 标签：mysql, sql

我有以下 SQL（mysql）：

```
SELECT SQL_CALC_FOUND_ROWS available.*
FROM   available
WHERE `fname` LIKE '%de%'
ORDER BY  `id` asc 
```

我想将它与

```
LEFT JOIN cart ON available.id = cart.item_id
WHERE cart.item_id IS NULL 
```

所以结果只给了我不在购物车表中的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:35:35.870

您的查询应该是：

```
 SELECT SQL_CALC_FOUND_ROWS available.*
     FROM available
LEFT JOIN cart  
       ON available.id = cart.item_id
    WHERE cart.item_id IS NULL
      AND `fname` LIKE '%de%'
 ORDER BY  `id` asc 
```

根据[您的评论](https://stackoverflow.com/questions/13505932/left-join-including-where-on-main-table#comment18485848_13505932)：

> 没有“where fname like xxx”没问题..但是有了它

查看[多个`WHERE`条件](http://www.tuxradar.com/practicalphp/9/3/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:35:49.100

你把你的连接放在你的from之后，然后你所有的wheres放在一起

```
SELECT SQL_CALC_FOUND_ROWS available.*
FROM   available
LEFT JOIN cart ON available.id = cart.item_id
WHERE `fname` LIKE '%de%' AND cart.item_id IS NULL
ORDER BY  `id` asc 
```

# visual-studio - Outlook 2010 插件在调试配置中内置时有效，但在发布配置中无效

> ID：13505934
> 
> 赞同：0
> 
> 时间：2012-11-22T04:32:17.167
> 
> 标签：visual-studio, outlook, add-in

我已经成功构建、安装和使用了一个在调试配置中构建的 Outlook 插件，但是当我更改为发布配置并重新构建时，安装仍然有效，但是当我打开 Outlook 时，插件没有加载。

我打开选项\插件，我的插件显示为已禁用。我尝试启用它，但它不起作用。

如何查看阻止加载插件的原因？我可以检查的地方有日志文件吗？

我已经为调试和发布配置打开了项目属性，但看不到任何区别。任何人都可以提供建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:01:12.043

如果您的加载项在列表中，请检查您的加载项是否不在禁用加载项列表中。这些加载项可以在与 Addins COM 相同的组合中找到。如果它在那里，从那里删除它（通过启用它）。然后您将能够在 Addins COM 列表中启用它。

# algorithm - solr 中的关键短语提取

> ID：13505936
> 
> 赞同：1
> 
> 时间：2012-11-22T04:32:22.420
> 
> 标签：algorithm, solr, lucene

我想在 apache solr 中实现关键短语提取（KEA）算法，以从索引文档中提取重要短语，并根据查询执行后返回的结果创建标签云。谁能指导我完成整个过程。非常感谢提前...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:38:41.070

[Solr 有一个与Apache UIMA](http://uima.apache.org/)集成的模块，称为[SolrUIMA](http://wiki.apache.org/solr/SolrUIMA)。
它可以通过提取关键短语、识别语言、人员等来帮助您增强元数据。

# vb.net - 使用组合下拉框计算字母在 Visual Basic 中的文本框中出现的次数

> ID：13505937
> 
> 赞同：1
> 
> 时间：2012-11-22T04:32:25.560
> 
> 标签：vb.net, visual-studio-2010

在这方面遇到困难，似乎无法正确处理。我在文本框中有一些文本。然后，我使用组合下拉框选择可能出现在文本字段中的字母。然后我需要显示所选字母出现在文本框中的次数。下面列出的是我遇到一些错误的代码。我得到的最大错误是

“索引和长度必须引用字符串中的位置。参数名称：长度”

我认为这与子字符串功能有关。我认为这与文本框中字符的长度有关。非常感谢任何有助于使其正常工作的帮助，

```
 Private Sub cboSelectText_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles cboSelectText.SelectedIndexChanged

        'value to find
        Dim strLetterToFind As String

        'String to search
        Dim strStringToSearch As String = txtWordsToScan.Text

        'Current Character
        Dim chrCurrentCharacter As Char

        'Length of text
        Dim intLengthOfText As Integer
        intLengthOfText = strStringToSearch.Length

        'Letter totals
        'Dim intLoopCounter As Integer

        'Count for the display
        Dim intLetterA, intLetterE, intLetterI, intLetterO, intLetterU, intLetterCH, intWords As Integer

        Select Case cboSelectText.SelectedIndex
            Case 1
                strLetterToFind = "A"
            Case 2
                strLetterToFind = "E"
            Case 3
                strLetterToFind = "I"
            Case 4
                strLetterToFind = "O"
            Case 5
                strLetterToFind = "U"
            Case 6
                strLetterToFind = "CH"
            Case 7
                strLetterToFind = " "
            Case Else
                strLetterToFind = String.Empty

        End Select

        For intLoopCounter As Integer = 0 To intLengthOfText
            If chrCurrentCharacter = strStringToSearch.Substring(intLoopCounter, 1).ToUpper Then
                If strLetterToFind = "A" Then
                    intLetterA += 1
                    lblANumberTotal.Text = CStr(intLetterA)
                ElseIf chrCurrentCharacter = "E" Then
                    intLetterE += 1
                    lblENumberTotal.Text = CStr(intLetterE)
                ElseIf chrCurrentCharacter = "I" Then
                    intLetterI += 1
                    lblINumberTotal.Text = CStr(intLetterI)
                ElseIf chrCurrentCharacter = "O" Then
                    intLetterO += 1
                    lblONumberTotal.Text = CStr(intLetterO)
                ElseIf chrCurrentCharacter = "U" Then
                    intLetterU += 1
                    lblUNumberTotal.Text = CStr(intLetterU)
                ElseIf chrCurrentCharacter = "CH" Then
                    intLetterCH += 1
                    lblCHNumberTotal.Text = CStr(intLetterCH)
                ElseIf chrCurrentCharacter = " " Then
                    intWords += 1
                    lblTotalNumberWords.Text = CStr(intWords)
                End If

            End If

        Next

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:23:21.723

这应该可以满足您的要求：

```
 Dim strLetterToFind  As String

        strLetterToFind = ComboBox1.SelectedItem

        Try
            lblTotalNumberWords.Text =  Regex.Matches(TextBox1.Text,Regex.Escape(strlettertofind)).Count.ToString)
        Catch ex As Exception
            lblTotalNumberWords.Text = "Please select a option in the combo box"
        End Try 
```

您需要导入 System.Text.RegularExpressions 才能使其工作。

如果您对此有任何问题，请告诉我

# facebook - Facebook PHP oauth 不适用于某些用户

> ID：13505940
> 
> 赞同：0
> 
> 时间：2012-11-22T04:32:38.027
> 
> 标签：facebook, facebook-oauth

用户 a - 应用程序的管理员 在 HTTP 上运行应用程序

getUser() 正在提供用户 ID

用户 b - 不是管理员 在 HTTP 上运行应用程序

getUser() 给出零，URL 是这样的 &error_reason=user_denied&error=access_denied&error_description=The+user+denied+your+request.&state=32423dfs23423dsaaw# *=*

下面是验证用户的代码用户，

```
 $facebook = new Facebook(array(
      'appId'  => '',
      'secret' => '',
      'cookie' => true
    ));

 $user = $facebook->getUser();
    $loginUrl   = $facebook->getLoginUrl(
            array(
                 'scope' => 'publish_stream,email',
                 'redirect_uri' => 'https://www.facebook.com/pages/test?sk=app_23423423'

            )
    );

   if (!$user) {?>
  <a href="<?php echo $loginUrl ?>">Facebook Login</a>
            else
            {
                 echo "<script type='text/javascript'>location.href = 'test.php?Id=$user'</script>";  

            }
                   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:33:01.757

每当你得到

> 错误=拒绝访问

在从 Facebook 返回的 $_REQUEST 中，您将不会获得用户 ID，这是因为用户已登录或授权您的应用程序，以便您可以检索用户 ID。这与没有用户登录的情况相同。您可以分别从 $_REQUEST['error_reason'] 和 $_REQUEST['error_description'] 获取原因和描述，以向用户显示更多详细信息或供您记录。

# php - 结帐页面中的产品折扣更改

> ID：13505942
> 
> 赞同：1
> 
> 时间：2012-11-22T04:32:40.663
> 
> 标签：php, opencart

我是新手`OpenCart`。我用`OpenCart`. 参考链接在[这里](http://gmentr.com/msplocart/index.php?route=common/home)。现在你可以看到你什么时候去产品描述页面有产品折扣部分。在我输入任何一个值的那个块中，例如，只需`2`折扣价为 135,00 欧元。现在我在输入框中输入 2 并重定向到结帐页面。现在您可以在结帐页面中看到数量为 2，价格为 135,00 欧元，但总共显示为 270,00 欧元。它实际上是按照产品价格为 135,00 欧元并乘以产品金额的逻辑。但在这里，我希望产品描述页面中显示的折扣价与产品数量相同，与结帐页面中的总价相同，因此这里的总价也为 €270,00。那么有人可以告诉我如何将这个逻辑放入 Opencart 中吗？

**产品描述页面**

![在此处输入图像描述](../Images/f3dbbc4a73386ff578a2698b3f86b23b.png)

**结帐页面** ![在此处输入图像描述](../Images/a91291ed49b0efe40715b7ed307be166.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:15:33.797

价格实际上显示正确。您需要更改的实际上是产品页面显示价格的方式。当您输入数量折扣时，您需要提供“每件商品”的价值，而不是`X`产品数量的总和。要将其更改为正确显示，您需要将所有价格编辑为每件商品的价格，然后打开您的 /catalog/controller/product/product.php 文件，找到此代码

```
$this->tax->calculate($discount['price'], 
```

并将其更改为

```
$this->tax->calculate($discount['price'] * $discount['quantity'], 
```

# process - Linux中进程的内存映射

> ID：13505944
> 
> 赞同：1
> 
> 时间：2012-11-22T04:32:53.027
> 
> 标签：process, linux-kernel, memory-mapping

我有以下代码，我组装并链接以从中获取可执行文件。

```
.data 
```

你好：.ascii "Hello World" .text

.global _start

_start: movl $4,%eax movl $1,%ebx movl $hello,%ecx movl $11,%edx int $0x80

```
movl $1,%eax
movl $0,%ebx
int $0x80 
```

作为一个学习过程，我想看一下进程的内存映射（通过上面的可执行文件）。pmap 和 cat /proc/PID/maps 都需要进程 ID。如果它是 gcc 编译的 C 程序，我可以使用 gdb 设置断点并在另一个终端中获取 pid。

对于上述情况，我无法设置任何断点，因为可执行文件中没有可用的调试器符号表。有没有其他方法可以在不使用 pid 的情况下查看进程内存结构？我的意思是某种加载可执行文件并转储内存结构的程序。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:47:58.860

这可能不是最聪明的方法，但如果对您有帮助，请尝试一下。

编写另一个程序`fork`（保存孩子的 pid），然后让孩子`exec`执行您要运行的可执行文件。
你去了，你有程序的进程ID可以`pmap`在其他终端使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-24T22:02:10.470

使用`readelf`GNU binutils 来查找 ELF 标头中的入口点，然后告诉`gdb`在那里放置一个断点。

```
$ readelf -h /bin/true
...
  Entry point address:               0x10000c5c
...
$ gdb /bin/true
...
(gdb) break *0x10000c5c
Breakpoint 1 at 0x10000c5c
(gdb) run
Starting program: /bin/true
...
Breakpoint 1, 0x10000c5c in ?? ()
(gdb) ^Z
[1]+  Stopped                 gdb /bin/true
$ ps
...
  744 tty1     00:00:00 true
...
$ less /proc/744/maps 
```

这不适用于与位置无关的可执行文件 (PIE)，因为它们会重新定位到不可预测的入口点。看`Type:`线从`readelf -h`。如果它说`DYN (Shared object file)`，它是 PIE。如果它说`EXEC (Executable file)`，它不是 PIE。

# asp.net-mvc - 如何删除asp.net中部分页面的页眉和页脚

> ID：13505947
> 
> 赞同：2
> 
> 时间：2012-11-22T04:33:40.450
> 
> 标签：asp.net-mvc, css

如何删除asp.net mvc4中部分页面中的页眉和页脚。我如何识别 Visual Studio 中的部分页面。我必须在 site.css 中进行哪些更改才能删除页眉和页脚。我希望你能理解我的问题。

问候， 斯里尼瓦斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T04:52:51.853

要使用部分视图，您无需在样式表中进行任何特定修改。而不是返回一个视图，只返回一个局部视图：

```
return PartialView("ThePartialViewsName"); 
```

要创建局部视图，只需在“添加视图”对话框中选中标记为“创建为局部视图”的框。

# android - 从相机操作预览位图

> ID：13505949
> 
> 赞同：3
> 
> 时间：2012-11-22T04:33:47.753
> 
> 标签：android, graphics, camera

我正在尝试创建一个像这里找到的那​​样的实时万花筒应用程序：http: [//www.windowsphone.com/en-gb/store/app/live-kaleidoscope/32e41ccf-5a25-42ea-84ff-07688f3e6aa5](http://www.windowsphone.com/en-gb/store/app/live-kaleidoscope/32e41ccf-5a25-42ea-84ff-07688f3e6aa5)。

为此，我已经能够获得与相机预览相对应的位图。我正在尝试从三角形路径创建一个多边形，并在使用矩阵变换操作位图后用位图填充路径。我还没有进行这些转换，但是现在我什至看不到多边形和其中的图像。我的代码中没有任何错误。当我运行应用程序时，我只看到相机正在运行。我被困住了！请帮忙！这是我的代码：

公共类万花筒扩展视图

{

```
Bitmap imageData;
Canvas canvas1;
int picWidth, picHeight, ang, displayWidth, displayHeight, numOfsides;
float triangleSide, triangleHeight;

public Kaleidoscope(Context context) {
    super(context);
}

public Kaleidoscope(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public void init(Bitmap image, int sides, int w, int h) {

    numOfsides = sides;
    triangleSide = (w - 100) / 2;
    // triangleHeight=(float)Math.tan(Math.PI/3)*triangleSide/2;
    displayWidth = w;
    displayHeight = h;
    imageData = image;
    draw();
}

public void onDraw(Canvas canvas) {
    canvas1 = canvas;
}

public void draw() {

    float angle = 360 / numOfsides;
    float totalAngle = 0;
    float centerX = displayWidth / 2;
    float centerY = displayHeight / 2;
    float cornerX = centerX + triangleSide;
    float cornerY = centerY / 2;
    Matrix mat = new Matrix();

    mat.postTranslate(picWidth / 2, 0);

    // Matrix mat2=mat;
    //
    // float concatArray[]={-1,0,0,1,0,0};
    // Matrix concatMat=new Matrix();
    // concatMat.setValues(concatArray);
    // mat2.postConcat(concatMat);

    for (int i = 0; i < numOfsides; i++) {

        float verticalDistance = (triangleSide * (float) (Math.sin(Math
                .toRadians(totalAngle))));
        float horizontalDistance = (triangleSide * (float) (Math.cos(Math
                .toRadians(totalAngle))));

        float x = (displayWidth / 2) + horizontalDistance - (picWidth / 2);
        float y = (displayHeight / 2) + verticalDistance - (picHeight / 2);

        Path triangle = new Path();
        triangle.lineTo(cornerX, cornerY);
        triangle.lineTo(x, y);
        triangle.lineTo(centerX, centerY);
        cornerX = x;
        cornerY = y;
        totalAngle = totalAngle + angle;
        Bitmap matBitmap;

        if (i % 2 == 0) {
            matBitmap = Bitmap.createBitmap(imageData, 0, 0,
                    imageData.getWidth(), imageData.getHeight(), mat, true);
        } else {
            matBitmap = Bitmap.createBitmap(imageData, 0, 0,
                    imageData.getWidth(), imageData.getHeight(), mat, true);
        }

        BitmapShader fillBMPshader = new BitmapShader(matBitmap,
                Shader.TileMode.MIRROR, Shader.TileMode.MIRROR);
        Paint fill = new Paint();
        fill.setColor(0xFFFFFFFF);
        fill.setStyle(Paint.Style.FILL);
        fill.setShader(fillBMPshader);

        canvas1.drawPath(triangle, fill);

    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:17:03.397

首先，对不起我的英文写作。（因为我是韩国人）

如果你在 android 中使用摄像头，则名为的类`preview`将扩展`SurfaceView`并实现`SurfaceHolder.callback`.

然后`mainActivity`调用这个类。正确的？

`mainActivity`调用该类后`preview`，您必须创建另一个扩展类的`View`类。

make 方法命名`onDraw`为覆盖：`onDraw(Canvas canvas)`并在此方法中创建源，如下所示：

```
mPaint = new Paint();
mPaint.setAntiAlias(true);
mPaint.setColor(Color.RED);
mPaint.setTextSize(40);
canvas.drawText("X", canvas.getWidth() / 2, canvas.getHeight() / 2, mPaint); 
```

然后回去`mainActivity`做`addView`。

此源中“视图类”的名称是“测试”。

```
final FrameLayout frame = (FrameLayout) findViewById(R.id.frame);
if (camview == null) {
    camview = new Preview(this);
    frame.addView(camview);
    test = new InvalidateTest(context);
    frame.addView(test, new LayoutParams (LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
} 
```

总之，只需创建新类并将此视图添加到（框架）布局中。

# c - PIC的中断服务程序“不允许不完整类型”

> ID：13505951
> 
> 赞同：0
> 
> 时间：2012-11-22T04:34:28.980
> 
> 标签：c, pic

当我尝试使用 PICMicro C 编译器为 PIC 程序编译代码时，代码的中断服务例程部分出现错误“不允许不完整类型”：

```
char chB = 0;
int clicks = 0;
void interrupt ISR(void) //incomplete type is not allowed
{
    if(RBIF == 1)
    {
        clicks++;
        chB = PORTB;
        RBIF = 0;
    }
} 
```

在检查了多个来源后，我仍然看不到服务例程是如何编写错误的..

编辑：感谢您的所有帮助，我找到了解决方案：

```
char chB = 0;
int clicks = 0;
#pragma vector = 0x04
__interrupt void isr(void)
{
    if(RBIF == 1)
    {
        clicks++;
        chB = PORTB;
        RBIF = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:50:59.760

“中断 ISR”不是一个有效的名称，因为它有一个空格。`void interrupt_isr(void)`应该没事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:14:05.450

对于 PIC16xxx 系列 MCU，请使用以下形式：

```
void interrupt () {

  } // end interrupt 
```

# java - 找到一组输入的最小值

> ID：13505952
> 
> 赞同：1
> 
> 时间：2012-11-22T04:34:33.410
> 
> 标签：java, loops

我得到了将伪代码翻译成 Java 程序的方法。

如下：

*   将布尔变量“first”设置为 true。

*   而另一个值已成功读取

    *   如果第一个是真的
        *   将最小值设置为刚刚读取的值
        *   首先设置为假
    *   否则，如果该值小于最小值
        *   将最小值设置为值
    *   打印最小值

到目前为止，我有这个：

```
import java.util.Scanner;
public class InputLoop
{
    public static void main(String[] args)
    {
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter an integer");

    boolean first = true;
    int min = 0;
    int val = 0;

    while (scan.hasNextInt())
    {
        val = scan.nextInt();
        System.out.println("Enter an integer");
        if (first == true) 
        {
            min = val;
            first = false;
        } 

        else if (val < min) 
        {
            System.out.println("Enter an integer");
            min = val;

        }

        while (!scan.hasNextInt())
        {
            System.out.println (("The minimum value is") + (min));
            break;
        }
    }
}
} 
```

任何帮助将不胜感激，因为我很难过！

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T04:47:55.397

你做得很好——继续做你正在做的事情。但这里有一些你需要知道才能完成的东西：

*   Scanner 类文档在[这里](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)。在那里，你会看到你可以调用scan.nextInt()，它会返回scan.hasNextInt() 承诺的整数。
*   您可以为“first”标志声明整数值，当它为 true 时，表示它是正在处理的第一个输入。
*   如果要在 if 子句“内部”执行多个语句，则需要 {}，并且可以使用 else 关键字仅在先前的 if 条件不成立时才执行下一条语句。

如果有什么不合理的地方，请告诉我们。

# c++ - SWIG：处理派生类中的基类重载方法

> ID：13505954
> 
> 赞同：2
> 
> 时间：2012-11-22T04:35:13.823
> 
> 标签：c++, python, inheritance, swig, overloading

我正在努力使这在 SWIG 中变得有点优雅......

我有一个包含重载方法创建的基类：

```
class Base {
public:
    virtual Foo *create(ClassA &, ClassB &) = 0;
    Foo *create(int id) {
        // get ClassA a and ClassB b from an internal store related to id
        return create(a, b);
    }
}; 
```

这当然是 SWIG 包装的，没有任何麻烦。

在其他位置/存储库中，有几个不同的 Base 派生类，它们当然定义了它们自己版本的纯虚拟 create(ClassA&,ClassB&) 方法 - 但它们不需要定义 create(int) 变体，因为基类版本应该足够了。

这些派生类的 SWIG 包装只看到派生类中定义的 create() 方法，并且不提供具有单个 int 参数的变体，即使它们应该从基类继承它。

我已经尝试使用 %rename 作为基类的方法来获得一些有用的东西，例如

```
%rename (_create1) Base::create(ClassA&,ClassB&);
%rename (_create2) Base::create(int);

%extend (Base) {
    %pythoncode {
        def create(self, a_or_id, b=None):
            if b is not None:
                self._create1(a_or_id, b):
            else:
                self._create2(a_or_id)
    }
} 
```

这在生成的 python/_wrap.cc 代码中似乎很好，但是派生类的包装器只会包装 create() 方法，就好像 %renames 不存在一样。

它们*位于*单独的 .i 文件中，但派生类的 .i 文件每个都导入基类 .i 文件，因此 python 类继承是正确的，只是 C++ 类继承在某种程度上被这个覆盖的方法打败了。

理想情况下，我想要一个解决方案，我不必在所有派生类的 .i 文件中插入 %rename 语句（尽管我知道这会解决问题），这只是意味着大量重复的代码。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T23:35:18.453

你确定类被正确声明了吗？派生类中的同名虚方法隐藏基类方法，除非`using`将基函数带入派生命名空间。例子：

```
class A
{
    public:
        void func(int a);
        virtual void func(int a,int b);
};

class  B : public A
{
    public:
        //using A::func;
        virtual void func(int a,int b);
}; 
```

使用 SWIG 和 Python，我无法编写：

```
b = B()
b.func(1)    # failed
b.func(1,2) 
```

没有取消注释`using`上面的行，并且这些类在 C++ 中也不能正常工作。使用`using`SWIG 将函数正确地暴露给 Python 并且 C++ 也可以工作。

# python - Python MySQLdb - 在查询中使用“%”的类型错误

> ID：13505959
> 
> 赞同：1
> 
> 时间：2012-11-22T04:36:02.623
> 
> 标签：python, mysql, special-characters, mysql-python

我有一个用于执行查询的 python MySQLdb 包装器。每当我使用此包装器在字符串字段中执行包含“%”符号的查询时，都会收到 TypeError。

```
class DataBaseConnection:

    def __init__(self,dbName='default'

                 ):

        #set        
        dbDtls={}        
        dbDtls=settings.DATABASES[dbName]        
        self.__host=dbDtls['HOST']
        self.__user=dbDtls['USER']
        self.__passwd=dbDtls['PASSWORD']
        self.__db=dbDtls['NAME']
        self.dbName=dbName
    def executeQuery(self, sqlQuery, criteria=1):
            """ This method is used to Execute the Query and return the result back """
            resultset = None
            try :
                cursor = connections[self.dbName].cursor()

                cursor.execute(sqlQuery)

                if criteria == 1:
                    resultset = cursor.fetchall()
                elif criteria == 2:
                    resultset = cursor.fetchone()
                transaction.commit_unless_managed(using=self.dbName)
                #cursor.execute("COMMIT;")
                #objCnn.commit()
                cursor.close()
                #objCnn.close()    

            except Exception,e:
                resultset = False
                objUtil=Utility()
                error=''
                error=str(e)+"\nSQL:"+sqlQuery
                print error
                objUtil.WriteLog(error)
                del objUtil

            return resultset

sql = """SELECT str_value FROM tbl_lookup WHERE str_key='%'"""
objDataBaseConnection = DataBaseConnection()
res = objDataBaseConnection.executeQuery(sql)
print res 
```

我尝试转义 '%' 字符，但没有成功。数据库字段是 VARCHAR 字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:41:33.937

您必须将所有要传递给 MySQL 的 % 符号转义为 %%。原因是百分号用于表示要插入字符串的位置。因此，您可以执行以下操作：

```
...execute("""SELECT id FROM table WHERE name = '%s'""", name) 
```

并且存储在变量名中的值将被转义并插入到查询中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-17T05:00:59.697

```
execute("""SELECT id FROM table WHERE name = '%s'""", (name)); 
```

# javascript - 如果正在从特定的 jsp 进行调用，请检查 javascript

> ID：13505964
> 
> 赞同：0
> 
> 时间：2012-11-22T04:36:31.550
> 
> 标签：javascript

我有一个 javascript 文件 global.js，它是一个常见的 js 文件。

我在名为 test 这个 javascript 文件的函数中添加了几行代码。

问题是我希望仅在从名为 home.jsp 的特定 jsp 而不是任何其他 jsp 进行调用时才执行这些代码行。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:42:09.893

您可以将页面名称检查为

```
var PagePath = window.location.pathname;
var PageName = PagePath.substring(PagePath.lastIndexOf('/') + 1);
if(PageName == "YourDesiredPage")
{
        // Execute particular lines of code here
        // Do Whatever you want
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:42:28.983

一个明显的解决方案是将这些行从该文件中取出，并单独包含它。这是推荐的。

另一种可能性是`location`有条件地检查和执行。

还有一个，在脚本标签之前定义一些变量；或使用[此技术](http://feather.elektrum.org/book/src.html)在脚本 URL 中传递它。

# c - WM_SOCKET ... FD_READ 没有响应

> ID：13505965
> 
> 赞同：1
> 
> 时间：2012-11-22T04:36:33.443
> 
> 标签：c, wsaasyncselect

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:10:58.303

你有多个问题。第一个是你`WSAAsyncSelect`在被动监听套接字上做的`FD_READ`和`FD_WRITE`事件。被动套接字将不会接收这些事件。第二个是您不对*实际*连接`WSAAsyncSelect`的套接字执行操作。

 *还有其他问题，最严重的是您只为套接字保留一个变量。这意味着当您接受时您会丢失“主”套接字，并且您不能有多个连接（每个新连接都会覆盖套接字变量）。您实际上也没有关闭套接字`FD_CLOSE`（它不是自动完成的），到目前为止我可能还没有发现更多。*

# c# - WebClient 作为任务 (TPL) 的多个并行执行

> ID：13505967
> 
> 赞同：1
> 
> 时间：2012-11-22T04:36:37.430
> 
> 标签：c#, enums, task-parallel-library, webclient

我正在测试`IWebDriver`vs的并行执行`WebClient`。（如果存在性能差异以及差异有多大）

在我设法这样做之前，我遇到了简单的 WebClient-Parallel 调用问题。

好像还没有执行，我确实`AgilityPacDocExtraction` 在特定行上放了一个刹车点`WebClient.DownloadString(URL)`

但是程序退出而不是调试`Step Into`可能会显示 yeald 字符串。

计划是为需要采取的所有操作提供单一方法，通过每个操作的“模式”选择器，然后使用一个简单`foreach`的方法来迭代所有可用`Enum values`- 模式

主要执行：

```
 static void Main(string[] args)
   {
        EnumForEach<Action>(Execute);
        Task.WaitAll();
   }
   public static void EnumForEach<Mode>(Action<Mode> Exec)
   {

            foreach (Mode mode in Enum.GetValues(typeof(Mode)))
            {
                Mode Curr = mode;

                Task.Factory.StartNew(() => Exec(Curr) );
            }

   } 
```

模式/动作选择器

```
 enum Action
    {
        Act1, Act2
    } 
```

实际执行

```
 static  BrowsresFactory.IeEngine IeNgn = new BrowsresFactory.IeEngin();
    static string 
        FlNm = Environment.CurrentDirectory,
        URL = "",
        TmpHtm ="";

   static void Execute(Action Exc)
   {

        switch (Exc)
        {
            case Action.Act1:
                break;

            case Action.Act2:
                URL  = "UrlofUrChoise here...";
                FlNm += "\\TempHtm.htm";
                TmpHtm = IeNgn.AgilityPacDocExtraction(URL).GetElementbyId("Dv_Main").InnerHtml;
                File.WriteAllText(FlNm, TmpHtm);
                break;

        }
     } 
```

持有`WebClient`和 `IWebDriver`（由硒）不包括在这里的类，所以它不会在这篇文章中占用更多空间，而且现在也不相关。

```
class BrowsresFactory
{
    public class IeEngine
{

    private WebClient WC = new WebClient();
    private string tmpExtractedPageValue = "";
    private HtmlAgilityPack.HtmlDocument retAglPacHtmDoc = new HtmlAgilityPack.HtmlDocument();

    public HtmlAgilityPack.HtmlDocument AgilityPacDocExtraction(string URL)
    {
                WC.Encoding = Encoding.GetEncoding("UTF-8");
                tmpExtractedPageValue = WC.DownloadString(URL); //<--- tried to break here
                retAglPacHtmDoc.LoadHtml(tmpExtractedPageValue);
                return retAglPacHtmDoc;
    }
}
} 
```

问题是我看不到文件中应该通过从 WebClient 提取的值来更改的任何内容，而且在调试模式下我无法进入上面代码中注释的行。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-04T01:28:12.553

上述代码中没有定义该函数`Download(url, htmlDictionary)`，一个可能的版本是：

```
private static void Download(string url, ConcurrentDictionary<string, string> htmlDictionary)
{
    using (var webClient = new SmartWebClient())
    {
        htmlDictionary.TryAdd(url, webClient.DownloadString(url));
    }
} 
```

... 上面的代码似乎是另一个 Stack Overflow 帖子的副本。有关参考，请参阅 [Retrieve a string contains html Document source using Task parallel](https://stackoverflow.com/questions/13514860/retrieve-a-string-containing-html-document-source-using-task-parallel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T02:10:17.683

我已经设法解决了这个问题`WebClient`，我认为使用它需要更少的资源`WebDriver`，如果这是真的，这也意味着需要更少的时间。

这是代码：

```
public void StartEngins()
{
    const string URL_Dollar = "URL_Dollar";
    const string URL_UpdateUsersTimeOut = "URL_UpdateUsersTimeOut";

    var urlList = new Dictionary<string, string>();
    urlList.Add(URL_Dollar, "http://bing.com");
    urlList.Add(URL_UpdateUsersTimeOut, "http://localhost:..../.......aspx");

    var htmlDictionary = new ConcurrentDictionary<string, string>();
    Parallel.ForEach(
                    urlList.Values,
                    new ParallelOptions { MaxDegreeOfParallelism = 20 },
                    url => Download(url, htmlDictionary)
                    );
    foreach (var pair in htmlDictionary)
    {
        ///Process(pair);
        MessageBox.Show(pair.Value);
    }
}

public class SmartWebClient : WebClient
{
    private readonly int maxConcurentConnectionCount;

    public SmartWebClient(int maxConcurentConnectionCount = 20)
    {

        this.maxConcurentConnectionCount = maxConcurentConnectionCount;
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        var httpWebRequest = (HttpWebRequest)base.GetWebRequest(address);
        if (httpWebRequest == null)
        {
            return null;
        }

        if (maxConcurentConnectionCount != 0)
        {
            httpWebRequest.ServicePoint.ConnectionLimit = maxConcurentConnectionCount;
        }

        return httpWebRequest;
    }

} 
```

# ruby-on-rails - rails 服务器未在 3.2.9 中启动

> ID：13505976
> 
> 赞同：-2
> 
> 时间：2012-11-22T04:37:54.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rvm

安装**RVM**后（它会自动将我的 ruby​​ 升级到 1.9.3 和 rails 到 3.2.9），`rails server`或者`rails s`不在**Rails 3.2.9**中启动服务器，而只需打印出带有 Usage 和 Options 的文档。

我使用的旧方法`ruby script/server`，但后来我收到错误：

> /Users/FooUser/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- script/../config/boot (LoadError) from /Users/FooUser/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in` require' from script/server:2:in `'

...我安装 RVM 后一切都崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:50:03.643

`script/server`是旧旧旧的做法。`script/server`在 Rails 3+ 应用程序中不存在。`script/rails`是现在的方式。

如果`rails`只是打印文档，那是因为该文件不存在。这会让我认为您尝试运行它的应用程序**不是**Rails 3 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:13:54.530

> 但只需打印出带有用法和选项的文档。

您确定您在 Rails 应用程序目录中吗？似乎 Rails 在您尝试启动服务器的目录中找不到应用程序文件。

# asp.net-mvc-4 - 由两段组成的控制器名称

> ID：13505978
> 
> 赞同：1
> 
> 时间：2012-11-22T04:38:31.857
> 
> 标签：asp.net-mvc-4

在 ASP.NET MVC4 Web API 中，我想支持一种 url：

```
api/{part1}/{part2}/{id} 
```

其控制器是 {part1}{part2}，例如

```
 url                  controller              class
api/ch01/products/         ch01products     ch01productscontroller
api/ch12/customers         ch12customers    ch12customerscontroller
api/books/page/5           bookspage        bookspagecontroller 
```

我可以在 MapHttpRoute 中执行此操作吗？就像是

```
// in WebApiConfig.Register
config.Routes.MapHttpRoute("", "api/{part1}/{part2}/{id}", new { controller = ? "{part1}" + "{part2}" ?, id = RouteParameter.Optional }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T05:19:30.217

尝试编写自定义路由处理程序：http: [//geekswithblogs.net/sankarsan/archive/2009/01/18/developing-custom-routehandler.aspx](http://geekswithblogs.net/sankarsan/archive/2009/01/18/developing-custom-routehandler.aspx)

# html - 为在 IE 中工作的表格单元格提供固定宽度的方法是什么

> ID：13505982
> 
> 赞同：0
> 
> 时间：2012-11-22T04:38:46.217
> 
> 标签：html, internet-explorer

我需要为表格单元格提供固定宽度。css 东西不起作用，希望立即得到答复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:49:18.697

指定表格的直接宽度，并将表格布局设置为固定：

```
table#myTable{
    table-layout: fixed;
    width: 726px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:05:02.317

是的，我找到了解决这个问题的方法，您可以为此使用“nowrap”标签

句法：-`<td nowrap="nowrap"> </td>`

# iphone - 在 didSelectRowAtIndexPath 中以编程方式编辑控制器的标题

> ID：13505986
> 
> 赞同：2
> 
> 时间：2012-11-22T04:38:57.070
> 
> 标签：iphone, objective-c, ios, uitableview, didselectrowatindexpath

以前，我试图使用以下代码转到另一个控制器但失败了

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    RowDetail *rd = [[RowDetail alloc]initWithNibName:@"RowDetail" bundle:nil];
    if ([[allRow objectAtIndex:indexPath.row] is Equal:@"One"]) 
    {
        [rd setTitle:[allRow objectAtIndex:indexPath.row]];
    }
    [self.navigationalController pushViewController:rd animated:NO];
} 
```

我正在使用情节提要，所以我发现其他代码对我有用，但我无法为我正在推送的控制器设置标题。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryBoard" bundle:nil];
    RowDetail *rd = [sb instantiateViewControllerWithIdentifier:@"RowDetail"];
    if ([[allRow objectAtIndex:indexPath.row] is Equal:@"One"]) 
    {
        [rd setTitle:[allRow objectAtIndex:indexPath.row]];
    }
    [self.navigationalController pushViewController:rd animated:NO];
} 
```

它工作并显示了 RowDetail 控制器，但我无法编辑标题。知道怎么做吗？

编辑：RowDetail.h

```
#import <UIKit/UIKit.h>

@interface LecturerDetail : UIViewController

@property (weak, nonatomic) IBOutlet UINavigationBar *rowNavBar;

@property (nonatomic, strong) NSString *lecDetailTitle;
@end 
```

对于 RowDetail，我尝试使用 IBOutlet 作为导航栏，但失败了。我仍在尝试让标题显示的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:01:48.117

在 RowDetailViewController 中

```
@property (nonatomic, strong) NSString *rowDetailTitle;
//synthesize in .m file too 
```

然后

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryBoard" bundle:nil];
    RowDetail *rd = [sb instantiateViewControllerWithIdentifier:@"RowDetail"];
    rd.rowDetailTitle = @"yourTitle";
    [self.navigationalController pushViewController:rd animated:NO];
} 
```

然后在视图中确实加载了 RowDetailViewController.m

```
self.navigationItem.title = rowDetailTitle; 
```

希望对你有帮助，请反馈，谢谢。

更新：或者只是这样做：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryBoard" bundle:nil];
    RowDetail *rd = [sb instantiateViewControllerWithIdentifier:@"RowDetail"];
    rd.navigationItem.title = @"yourTitle";
    [self.navigationalController pushViewController:rd animated:NO];
} 
```

# magento - Magento“具有相同代码的优惠券已经存在”

> ID：13505991
> 
> 赞同：1
> 
> 时间：2012-11-22T04:39:43.640
> 
> 标签：magento, coupon

我正在为我的 magento 商店创建星期五的促销活动，并且我想使用与去年销售的产品相同的优惠券代码。

所以对于产品x，去年我用了一个类似BFX的代码

今年我在产品 x 上也有相同的促销，我想使用相同的优惠券代码 BFX。

但是，当我去创建折扣和优惠券时，magento 不允许我使用相同的代码“BFX”，因为它说：

“相同代码的优惠券已经存在”

去年我把去年的优惠券删了，店里没有其他优惠券了。

有没有办法刷新旧的优惠券，以免系统混乱？一种删除我网站某处的旧代码的方法，即使我看不到它们。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:12:13.980

就我而言，它可以正常工作。首先，我删除了购物车价格规则，然后使用相同的优惠券代码创建了新规则。您还可以检查表 salesrule_coupon 中的条目。或编辑购物车价格规则并更改日期、状态等，您还应该清除缓存和/或您的 magento 会话。

# dart - 无法从 Windows 上的 DART 编辑器启动 DART 应用程序

> ID：13505994
> 
> 赞同：0
> 
> 时间：2012-11-22T04:39:49.353
> 
> 标签：dart, dartium, dart-editor

我使用的是 Windows 7 家庭高级版。我在 DART 编辑器中的后续运行失败，在运行 DART 编辑器随附的任何 Web 示例应用程序时，我收到以下消息：

> java.io.IOException：尝试连接到 Dartium 超时尝试连接到 Dartium 超时

我运行的第一个 Web 应用程序可以运行，但是在我关闭 Dartium 并重新运行后，此错误仍然存​​在。请让我知道是否有任何解决方法。

注意：如果我在启动配置文件中取消选中“启用调试”，那么它将启动，但在启动期间挂起 75%（但应用程序运行）。如果选中“启用调试”，则它会挂起 45% 并在标准登录页面加载一个新的 Dartium 实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:13:42.433

我看到这个问题记录[在这里](http://comments.gmane.org/gmane.comp.lang.dart.general/15024)。这是一段摘录：

> 大家好，看起来我们在将扩展安装到 Dartium 时确实遇到了问题。你可以更新到最新的持续构建来解决这个问题，或者通过禁用 Dartium/Chromium 中的扩展来解决这个问题。可以在此处找到连续构建：http: [//gsdview.appspot.com/dart-editor-archive-continuous/latest/](http://gsdview.appspot.com/dart-editor-archive-continuous/latest/)。
> 
> 德文卡鲁

我选择获取最新版本。

# javascript - 在javascript对象中获取N个对象？

> ID：13505998
> 
> 赞同：0
> 
> 时间：2012-11-22T04:40:25.823
> 
> 标签：javascript

在一个对象中，例如：

```
var a = {"a":"value1", "b": "value2", "c":"value3"}; 
```

如何在不知道元素名称的情况下获取对象中第二个元素的值？对于变量 n3 等也是如此......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T04:43:52.730

根据对象规范，对象属性没有定义的顺序。

如果你想有一天回来修复这个项目，你可以做一些愚蠢的事情，比如......

```
var theThirdForAnyValueOfThird = a[Object.keys(a)[2]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T04:43:33.870

根据[语言规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)（参见第 4.3.3 和 12.6.4 节），对象的属性没有顺序，因此没有“第二个元素”。这与数组的数值属性（下标）不同。

如果要将特定顺序与键相关联，最好的方法是将键本身存储在数组中并通过下标访问它们（不使用`for...in`）。

所有主要的浏览器实现都会按照添加的顺序迭代属性。虽然**这是不明智的**，但您可能能够逃脱：

```
a[Object.keys(a)[1]] 
```

获取“第二个元素”值。请注意，这依赖于实施事故，并且不能保证在任何地方都有效。基本上，如果你这样做，这是一个等待发生的事故。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:51:24.987

您不能也需要切换到数组。作为解决方法，我一直在做这样奇怪的事情：

```
var a = [{"a":"value1"}, {"b": "value2"}, {"c":"value3"}]; 
```

# iphone - 我如何解析这个 a:2:{i:0;s:19:"Broker - Securities";i:1;s:18:"Financial Services";}

> ID：13505999
> 
> 赞同：-1
> 
> 时间：2012-11-22T04:40:32.110
> 
> 标签：iphone, objective-c, ios, web-services

从网络服务我得到这个输出：

```
a:2:{i:0;s:19:"Broker - Securities";i:1;s:18:"Financial Services";} 
```

我不知道这是什么格式。这是 JSON 吗？谁能帮我在**目标 c**中解析这个？

从中我需要得到以下值：

**经纪人 - 证券**

**金融服务**

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:06:43.340

您可以删除前缀并保留 { ..... } ，然后使用 [yourstring stringByReplcaingOccurencesOfString:@";" withString:@","]; 然后删除 string.length - 1 中的字符，然后使用 JSONObjectWithData。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:45:11.447

它是 PHP 序列化，你可以用 PHP 的函数来读取它[`unserialize`](http://www.php.net/manual/en/function.unserialize.php)。如果你想自己解析，意思很简单：

```
two-element array
  integer 0 =>
    19-char string "Broker - Securities"
  integer 1 =>
    18-char string "Financial Services" 
```