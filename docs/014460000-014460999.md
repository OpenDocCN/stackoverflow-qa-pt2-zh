# StackOverflow 问答 14460000-14460999

# c# - 向具有 2 个外键的表添加行时出错

> ID：14460000
> 
> 赞同：0
> 
> 时间：2013-01-22T13:44:12.387
> 
> 标签：c#, visual-studio-2010, entity-framework, sqlite

我正在使用实体框架 4，SQLite 数据库和数据库优先方法。我已将我的表结构附加为快照。

我能够在 Bnb_Company 和 Bnb_Player 表中写入/读取数据，但是当我尝试在 Bnb_Game 表中输入一行时，出现以下错误。

![在此处输入图像描述](../Images/c2a5b6f2f0161647dafe2398db746a31.png)

“MockStockDbEntities.Bnb_Game”中的实体参与“Bnb_CompanyBnb_Game”关系。找到 0 个相关的“Bnb_Company”。预计会有 1 个“Bnb_Company”！

```
//Reset company values
if (context.Bnb_Company.Count() > 0)
{
    var companydetails = context.Bnb_Company.ToList();
    foreach (var company in companydetails)
    {
        company.ESC = 0;
        company.MarketValue = company.FaceValue;
    }
    context.SaveChanges();
}

if (context.Bnb_Player.Count() > 0)
{
    var playerDetails = context.Bnb_Player.ToList();
    //Reset Player values
    foreach (var player in playerDetails)
    {
        player.NetAmount = 0;
        player.Amount = 1000;
        if (context.Bnb_Company.Count() > 0)
        {
            var companyDetails = context.Bnb_Company.ToList();
            foreach (var company in companydetails)
            {
                if (context.Bnb_Game.Count() > 0 && (context.Bnb_Game.Where(b => b.PlayerId == player.Id && b.CompanyId == company.Id).Count() > 0))
                {
                    var specificCompanyShare = context.Bnb_Game.Where(b => b.PlayerId == player.Id && b.CompanyId == company.Id).FirstOrDefault();
                    specificCompanyShare.Shares = company.DefaultShares;
                }
                else
                {
                    Bnb_Game playerCompanyShare = new Bnb_Game();
                    playerCompanyShare.CompanyId = company.Id;
                    playerCompanyShare.PlayerId = player.Id;
                    playerCompanyShare.Shares = company.DefaultShares;
                    context.Bnb_Game.AddObject(playerCompanyShare);
                }
            }
        }

    }
    context.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:50:10.487

尝试使用实体引用而不是 Id 值。

```
 Bnb_Game playerCompanyShare = new Bnb_Game();
 playerCompanyShare.Bnb_Company = company;
 playerCompanyShare.Bnb_Player = player;
 playerCompanyShare.Shares = company.DefaultShares;
 context.Bnb_Game.AddObject(playerCompanyShare); 
```

# php - 使用 API 将节点添加到 Drupal

> ID：14460001
> 
> 赞同：2
> 
> 时间：2013-01-22T13:44:15.153
> 
> 标签：php, mysql, drupal, drupal-7

我正在构建一个小型系统，该系统将从 API 中提取产品，并在脚本运行时将每个产品作为节点放入 drupal db。我是 Drupal 的新手，所以我希望你能原谅任何愚蠢。所以这里是我迄今为止所做的一个非常简单的分解。

1.  使用 php simplexml 使用 API 提取产品。

2.在php变量中存储产品名称描述、url等。

1.  此时我需要将它们作为节点添加到 Drupal。我从网上得到了这段代码，这正是我所需要的（我认为）

    ```
    $node = new stdClass(); 
    $node->type = "page"; 
    $node->title = "Title";
    $node->language = LANGUAGE_NONE; 
    $node->path = array('alias' => 'your node path'); // Setting a node path
    node_object_prepare($node); // Set some default values.
    $node->uid = 1; 
    ```

因此，只需将我的 PHP 变量放入上述每个变量中即可。但我被困在把所有这些和我的代码放在哪里？我的意思是我是在 drupal 根目录中创建新的 php 文件还是什么？要包含哪些文件。如何执行此操作。

任何帮助将不胜感激。

问候，艾哈迈尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:20:18.313

Ghommey 所说的方式确实有效，但是如果您不想通过创建一个模块然后转到一个页面来实现它，您可以使用它`drupal_bootstrap()`来允许您将 drupal 包含到一个 .php 文件中。[文档链接](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/drupal_bootstrap/7)这是一个代码示例：

```
define('DRUPAL_ROOT', '/path/to/drupal');
require_once DRUPAL_ROOT . '/includes/bootstrap.inc';
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);

//add create node object here
node_save($node); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T14:04:21.317

Drupal 有一个模块系统，允许您添加自己的 php 代码。

一个模块至少需要两个文件：一个`.module`和一个`.info`文件。

因此，要创建一个名为的模块，`myimporter`您必须创建两个相对于 Drupal 根目录的文件：

```
sites/all/modules/custom/myimporter/myimporter.module
sites/all/modules/custom/myimporter/myimporter.info 
```

.module 文件将包含您的 php 代码，.info 文件将包含模块元信息。

关于信息文件的更多细节可以在这里找到：http: [//drupal.org/node/1075072](http://drupal.org/node/1075072)

创建模块后，您必须通过导航到 /admin/modules 来启用它。

您的模块必须包含使用菜单挂钩的菜单声明： [http ://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)

因此，您的`myimporter.module`文件可能如下所示：

```
 <?php 

  function myimporter_menu() {
    // Register myimporter/demo
    $items['myimporter/demo'] = array(
      'page callback' => 'myimporter_demo',
    );
    return $items;
  }

  function myimporter_demo() {
    // add your node import code here
    return "Hello world";
  } 
```

当您添加一个新的菜单挂钩元素时，您必须清除 Drupal 缓存。之后打开浏览器并导航到`http://localhost/myimporter/demo`

# eclipse - 如何在不移动光标的情况下使用键盘在 Eclipse 编辑器中左右滚动？

> ID：14460005
> 
> 赞同：5
> 
> 时间：2013-01-22T13:44:37.817
> 
> 标签：eclipse, editor, keyboard-shortcuts

要在*Eclipse*编辑器中滚动而不上下移动光标，可以使用*CTRL+Down*或*CTRL+Up*。但是***左右******呢***？_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:13:12.530

这不可能。如果您在 Eclipse 的**Preferences中搜索****键**，您会发现您只有并且可以设置热键。**`Scroll up``Scroll down`**

 **我的建议是更改编辑器中的最大行长。
让你的代码更短。毕竟，冗长的代码行不那么可读。

此外，调整编辑器区域的大小。如果您感到窒息，请删除Eclipse 右侧的 、 和 视图，然后放大编辑`Outline`器`TaskList`。`Build`**

# celery - 从周二 12 点到周三 12 点为 Celery 编写 cron 任务

> ID：14460013
> 
> 赞同：0
> 
> 时间：2013-01-22T13:45:12.357
> 
> 标签：celery, cron-task, cronexpression, celery-task

我正在尝试编写一个定期`cron`任务，`celery`该任务应该从周二中午 12 点到周三下午 12 点每小时执行一次。这是一个 24 小时的周期，但跨越了两个不同的日子。是否可以将其安排为单个任务，例如 `@periodic_task(run_every=crontab(<an expression equivalent to stated above>))`
目前我正在编写两个任务：一个带有装饰器：
`crontab(minute='0',hour='12-23',day_of_week='tue')`另一个带有[此处](http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html#crontab-schedules)
`crontab(minute='0',hour='0-11',day_of_week='wed')`
给出了一些示例

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:10:13.827

不幸的是，您创建的两个规范无法合并到同一规则中。我能想到的唯一真正的解决方案（在大多数情况下不太理想）是使用 CELERY_TIMEZONE 更改 Celery 执行的时区。从您当前使用 Celery 配置的时区开始 +/-12 小时就可以解决问题，尽管很明显这样做可能会产生其他后果。

# jsf-2 - 带有primefaces的动态面包屑

> ID：14460021
> 
> 赞同：4
> 
> 时间：2013-01-22T13:45:28.047
> 
> 标签：jsf-2, primefaces, listener, breadcrumbs

我想使用 Primefaces 组件向我的网络应用程序添加动态面包屑。我创建了一个模型来推送面包屑上的项目，这样当它的一个链接被点击时，尾随链接就会被删除。这在大多数情况下都有效，但有时 bradcrumb 的行为并不符合我的预期。基本上，为了跟踪登录页面，我`preRenderView`在每个可导航页面上添加了一个侦听器，并在会话范围的 bean 中实现了模型更新逻辑。

```
 <f:event type="preRenderView" listener="#{bcb.onRenderView}" />
  <f:attribute name="pageName" value="ThisPage" /> 
```

侦听器接收页面名称作为属性，并从外部上下文中获取完整的 URL（包括查询字符串）；这些信息以及从 中创建的唯一 id`UIViewRoot`用于构建`BreadCrumbItem`推送到模型上的 id：

```
public void onRenderView(ComponentSystemEvent evt) {
  UIViewRoot root = (UIViewRoot)evt.getSource();
  final String reqUrl = FacesUtils.getFullRequestURL();
  String pageName = (String) evt.getComponent().getAttributes().get("pageName");
  if(pageName != null) {
    model.push(new BreadCrumbItem(root.createUniqueId(), pageName, reqUrl));
  } else {
    model.reset();
  }
} 
```

模型的`push()`和`reset()`方法实现如下：

```
/**
 * When a link is pushed on the bread crumb, the existing items are analyzed
 * and if one is found to be equal to the pushed one, the link is not added
 * and all the subsequent links are removed from the list.
 * 
 * @param link
 *            the link to be added to the bread crumb
 */
public void push(BreadCrumbItem link) {
    boolean found = removeTrailing(link);
    if(!found) {
        addMenuItem(link);
    }
}

/**
 * Reset the model to its initial state. Only the home link is retained.
 */
public void reset() {
    BreadCrumbItem home = new BreadCrumbItem();
    removeTrailing(home);
} 
```

这种方法可行吗？您能否建议一些更好的方法来跟踪页面导航而无需利用生命周期侦听器？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:34:03.103

我已经为我的网络应用程序实现了自己的一个，在我的情况下我没有使用该`p:breadCrumb`组件，因为它是使用按钮实现的。

基本上，我有一个`@SessionScoped`bean，它包含一个堆栈（导航堆栈），存储你在面包屑中拥有的所有 url 和每个参数的参数。视图 ( *xhtml* ) 部分由`p:button`元素组成，这些元素具有`outcome`堆栈存储的 url。

当您导航到*url*时，会调用相应的 bean `f:event type="preRenderView"`（按照您的操作方式），并且 bean 从 url 获取参数，之后它将自己建立到堆栈中（而不是 bean 本身，因为它`@ViewScoped`会被销毁，只有 url 和 params）。

如果您单击面包屑中的后退按钮，则会发送一个额外的参数来指示按钮的*索引*。基于该索引，目标 bean 知道您正在尝试恢复此类视图，因此向导航堆栈询问该视图参数，并且导航堆栈删除它之后的导航。

我花了一段时间，但它功能齐全。祝你好运。

**编辑**

使用会话范围保存当前导航状态时要小心。它会影响所有打开的选项卡，因此可能不是您想要的，除非您希望最终用户仅在一个选项卡中使用您的应用程序。无论如何，一般可用性指南说您应该为面包屑使用类别而不是导航路径（[HTTP 是无状态](http://derivadow.com/2010/02/18/the-problem-with-breadcrumb-trails/)的，历史记录本身由浏览器保存）。**因此，动态面包屑不再有意义，至少如果您为视图使用不同的 url。**

# eclipselink - Spring Data JPA + Eclipselink + 自动装配

> ID：14460022
> 
> 赞同：0
> 
> 时间：2013-01-22T13:45:32.220
> 
> 标签：eclipselink, autowired, spring-data-jpa

我有一个与 Hibernate + Spring JPA 一起使用的小项目，我只是想将 Hibernate 更改为 EclipseLink。当我这样做时，我的 jUnit 测试用例根本无法自动装配与 Hibernate 相同的存储库。我不知道出了什么问题...

应用程序上下文.xml

```
<bean id="datasource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost/test" />
    <property name="username" value="root" />
</bean>

<bean id="jpaDialect" class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect" />

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="datasource" />
    <property name="persistenceUnitName" value="persistenceEclipseLink" />
    <property name="jpaDialect" ref="jpaDialect" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter" />
    </property>
    <property name="loadTimeWeaver">
        <bean class="org.springframework.instrument.classloading.SimpleLoadTimeWeaver" />
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<jpa:repositories base-package="com.example.test.repositories"></jpa:repositories>

<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" /> 
```

持久性.xml

```
<persistence-unit name="persistenceHibernate"
    transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect" />
        <property name="hibernate.hbm2ddl.auto" value="create-drop" />
        <property name="hibernate.show_sql" value="true" />
    </properties>
</persistence-unit>

<persistence-unit name="persistenceEclipseLink"
    transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>com.example.test.entities.Post</class>
</persistence-unit> 
```

这将导致：

```
ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener[org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2c5af885] to prepare test instance [com.example.test.PostRepositoryTest@871fa83] org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.example.test.PostRepositoryTest': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.example.test.repositories.PostRepository com.example.test.PostRepositoryTest.repository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'postRepository': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalArgumentException: The type [null] is not the expected [ManagedType] for the key class [class com.example.test.entities.Post]. 
```

如果我只是将我的 entityManagerFactory 更改为波纹管，一切正常（使用 Hibernate）：

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="datasource" />
    <property name="persistenceUnitName" value="persistenceHibernate" />
</bean> 
```

谁能发现我在 EclipseLink 配置上做错了什么？

提前致谢。

编辑：这是我的 jUnit 测试用例：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations="classpath:META-INF/application-context.xml")
public class PostRepositoryTest {

@Autowired
PostRepository repository;

@Test
public void test() {
    Post post = new Post();
    post.setPostTitle("title");

    repository.save(post);
} 
```

}

**编辑**

完整的堆栈跟踪：

```
3601 [main] ERROR org.springframework.test.context.TestContextManager  - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@6077e77a] to prepare test instance [com.example.test.PostRepositoryTest@2d2e3a2c]
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.example.test.PostRepositoryTest': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.example.test.repositories.PostRepository com.example.test.PostRepositoryTest.repository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'postRepository': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalArgumentException: The type [null] is not the expected [ManagedType] for the key class [class com.example.test.entities.Post].
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:374)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:110)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.example.test.repositories.PostRepository com.example.test.PostRepositoryTest.repository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'postRepository': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalArgumentException: The type [null] is not the expected [ManagedType] for the key class [class com.example.test.entities.Post].
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 26 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'postRepository': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalArgumentException: The type [null] is not the expected [ManagedType] for the key class [class com.example.test.entities.Post].
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:149)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1442)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:248)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 28 more
Caused by: java.lang.IllegalArgumentException: The type [null] is not the expected [ManagedType] for the key class [class com.example.test.entities.Post].
    at org.eclipse.persistence.internal.jpa.metamodel.MetamodelImpl.managedType(MetamodelImpl.java:424)
    at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:58)
    at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getMetadata(JpaEntityInformationSupport.java:65)
    at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:149)
    at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:87)
    at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:70)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:137)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:125)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:41)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)
    ... 36 more 
```

Post.java

```
@Entity
@Table(name="POST")
public class Post {
    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name="ID")
    Integer postId;
    @Column(name="TITLE")
    String postTitle;

    (...getters and setters...) 
```

}

PostRepository.java

```
import org.springframework.data.jpa.repository.JpaRepository;
import com.example.test.entities.Post;

public interface PostRepository extends JpaRepository<Post, Integer> {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:25:07.187

您能否包括完整的异常堆栈跟踪，（也是 Post 类的映射）

要使用与 Hibernate 中相同的属性，

```
 <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect" />
    <property name="hibernate.hbm2ddl.auto" value="create-drop" />
    <property name="hibernate.show_sql" value="true" /> 
```

在 EclipseLink 中，这将是，

```
 <property name="eclipselink.target-database" value="MySQL" />
    <property name="eclipselink.ddl-generation" value="drop-and-create-tables" />
    <property name="eclipselink.logging.level" value="fine" /> 
```

# spotify - 您可以在同一个应用程序中同时运行 0.2.3 和 1.0.0 版的 spotify 应用程序 api 吗？

> ID：14460024
> 
> 赞同：1
> 
> 时间：2013-01-22T13:45:36.753
> 
> 标签：spotify

您可以在同一个应用程序中同时运行 Spotify 应用程序 api 的 0.2.3 和 1.0.0 版本吗？在开发过程中，这对我**真的**很有帮助，以便将我们当前的 Spotify 应用程序从 0.2.3 迁移到新的 1.0.0 api。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:29:19.037

我很抱歉，但这是不可能的。您的应用程序使用的 API 版本在文件的`Dependencies`部分中定义`manifest.json`。

您可以创建应用程序的副本，更改其`BundleIdentifier`，并尝试隔离依赖于 Spotify API 的代码，将其模块化并逐步移植。

# java - IntelliJ IDE 在将 Try-Catch 与资源一起使用时出错

> ID：14460026
> 
> 赞同：50
> 
> 时间：2013-01-22T13:45:42.517
> 
> 标签：java, intellij-idea, try-catch, try-catch-finally, try-with-resources

我正在尝试使用 JDK 7 的“try-catch with resources”语句；IntelliJ 突出显示我的资源行，说

> 此语言级别不支持使用资源尝试。

当我尝试编译时，我得到：

> java：-source 1.6 不支持 try-with-resources（使用 -source 7 或更高版本来启用 try-with-resources）

我检查了我当前的项目是否启用了 try-with-resources，并且我的项目正在使用 JDK 7（库：C:\Program Files\Java\jdk1.7.0_11）。有任何想法吗？我不知道要改变什么选项（如果这甚至是问题的话）。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-22T13:51:49.393

单击文件菜单，打开项目结构，然后在“设置”下应该有“项目”。在该选项卡中，将有一个 SDK 设置选项，用于指定您要使用的语言版本。

有关更多详细信息，请参阅[JetBrains 帮助页面](https://www.jetbrains.com/help/idea/2016.3/project-page.html)（“项目语言级别”）。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-01-22T13:56:18.583

发生此错误的唯一方法是您的模块的语言级别未设置为 1.7+。这需要在您的 IntelliJ 项目/模块设置、项目`pom.xml`文件或两者中进行设置。

**智能**

![在此处输入图像描述](../Images/f74d4a197600c11c94b43f476aa5e3c6.png)

**马文**

```
<properties>
  <maven.compiler.source>1.7</maven.compiler.source>
  <maven.compiler.target>1.7</maven.compiler.target> 
```

模块设置可以覆盖项目设置；如果在项目级别设置此设置并且您在模块中遇到特定问题，请同时检查模块设置。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-07-10T14:09:25.323

除了提到的说明之外，我还必须指定每个模块的语言级别。文件 -> 项目结构 -> 模块

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-09-08T02:38:50.130

还要检查你的代码。你可能不小心做了这样的事情：

```
try (HttpClients.createMinimal().execute(new HttpGet(String.format(
          "http://127.0.0.1:%s/extra/LifecycleServlet?action=shutdown",
          runningPort)))) { 
```

代替

```
try (CloseableHttpResponse response = HttpClients.createMinimal().execute(new HttpGet(String.format(
          "http://127.0.0.1:%s/extra/LifecycleServlet?action=shutdown",
          runningPort)))) { 
```

当您不打算使用可关闭资源的结果时，很容易犯错误。但是它会有那个误导性的错误。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-16T03:04:33.163

模块设置的图示。 [![在此处输入图像描述](../Images/155466c6dcb76b7811746341fc0b1568.png)](https://i.stack.imgur.com/dDBRi.png)

# java - 了解 Apache Tomcat 6.0.26 的线程转储

> ID：14460029
> 
> 赞同：4
> 
> 时间：2013-01-22T13:45:54.710
> 
> 标签：java, multithreading, tomcat, tomcat6, threadpool

我做了一个观察，我想完全理解它。

首先，我定期进行线程转储并创建线程状态的摘要：

```
jstack -l 19498 > dump.txt ; awk '/State: / { print }' < dump.txt  | sort | uniq -c 
```

上面命令的结果如下所示：

```
 70    java.lang.Thread.State: RUNNABLE
  8    java.lang.Thread.State: TIMED_WAITING (on object monitor)
  1    java.lang.Thread.State: TIMED_WAITING (sleeping)
171    java.lang.Thread.State: WAITING (on object monitor) 
```

`RUNNABLE`= 实际处理 Web 应用程序的请求
`TIMED_WAITING`= Quartz Scheduler 线程
`WAITING`= 等待处理即将到来的 HTTP 请求的空闲线程

WAITING 线程示例（所有 WAITING 看起来像这样）：

```
"http-80-178" daemon prio=10 tid=0x00007fa8c0bbe000 nid=0x2e11 in Object.wait() [0x00007fa8aaae9000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x00007fa8e6b873c8> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
        at java.lang.Object.wait(Object.java:485)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.await(JIoEndpoint.java:458)
        - locked <0x00007fa8e6b873c8> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:484)
        at java.lang.Thread.run(Thread.java:619)

   Locked ownable synchronizers:
        - None 
```

**Tomcat 配置**

我的 Tomcat 配置参数使用的是默认值，意思是

`minSpareThreads = 25`（因此 Tomcat 确保有 25 个线程准备好处理 `maxThreads = 200`（200 个请求可以在没有警告的情况下并行处理）
`acceptCount = 100`（如果所有 200 个线程都忙，HTTP 连接器可以排队额外的 100 个请求）

**问题**

当我定期执行命令时，我看到**线程总数正在增加**。没有`BLOCKING`线程。

我不明白为什么线程数在增加，因为`WAITING`状态中有很多很多线程，准备处理另一个 HTTP 请求。

我还看到`RUNNABLE`+`WAITING`在一段时间内（例如 1 小时）是恒定的，但随后它增加了 5 或 6 并再次保持不变。似乎线程池越来越大，直到达到限制，Tomcat关闭......

这些`TIMED_WAITING`线程很可能来自运行在同一个 JVM 中的 Quartz 调度程序。

我对值的解释不正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:16:45.300

你读过[这篇文章](http://papweb.wordpress.com/2010/10/30/understanding-tomcat-executor-thread-pooling/)吗？引用一个小章节：

> 由于 java ThreadPoolExecutor 的 FIFO 行为，每个线程至少会等待“maxIdleTime”的新任务，然后才能关闭。此外，再次由于线程池的 FIFO 行为，要关闭线程，需要至少等于*maxIdleTime*的时间段没有**任何** 请求进入

# c# - 如何确定标识符是否引用了具有 NULL 值的内容？

> ID：14460033
> 
> 赞同：0
> 
> 时间：2013-01-22T13:46:19.653
> 
> 标签：c#, wpf, parent-child

我的应用程序由一对具有父/子关系的类组成，**子类有一个父对象成员**，**父类有一个子对象成员列表**（对于下面的简化示例，我只使用单个对象）。这些类的信息是从数据库中获取的，同时获取各自的父/子对象。当获取父对象导致它获取其子对象时，这将成为一个问题，导致所有子对象都获取其父对象，从而导致......好吧，你明白了。

为了阻止这个循环，我在获取对象的方法中为任何相关对象使用了可选参数。当其中一个对象想要获取其相对对象时分配此参数。**我想知道是否可以检查下面示例中的“父”或“子”是否引用了某些东西，尽管引用的对象是 NULL**。我认为这适用于 C++ 中的指针，但据我所知，C# 是无指针的。:(

```
class ParentClass
{
    ChildClass _child;

    public ParentClass(ChildClass child)
    {
        _child = child;
    }
}

class ChildClass
{
    ParentClass _parent;

    public ChildClass(ParentClass parent)
    {
        _parent = parent;
    }
}

public static class ItemGetter
{
    public static ChildClass GetChild(ParentClass parent = null)
    {
        ChildClass c = null;

        // Here I want to check if 'parent' is referencing anything, regardless of null value.
        ParentClass p = parent ?? GetParent(c);

        c = new ChildClass(p);

        return c;
    }

    public static ParentClass GetParent(ChildClass child = null)
    {
        ParentClass p = null;

        // Here I want to check if 'child' is referencing anything, regardless of null value.
        ChildClass c = child ?? GetChild(p);

        // References to itself as being the parent.
        p = new ParentClass(c);

        return p;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:55:00.447

我认为你的第一个假设是不正确的：

> 当获取父对象导致它获取其子对象时，这将成为一个问题，导致所有子对象获取其父对象，从而导致......好吧，你明白了。

这不会有问题，因为在内存中只会存在同一对象的一个​​实例。您将只有对父对象和子对象中的对象的引用；不是实际的对象。所以即使看起来像一个无限循环，引用也是安全的。

您需要获取带有子实体的父对象；您无需进行任何检查。

# grails - 问号附加到域属性时有什么作用

> ID：14460034
> 
> 赞同：-2
> 
> 时间：2013-01-22T13:46:20.160
> 
> 标签：grails

我有以下内容：

```
if (params.query?.equals(g.message(code: "layouts.main.search"))) {
  params.query = ""
} 
```

'?' 是什么意思？部分做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:51:03.117

它是一个安全导航运算符，它返回空值而不是抛出 NullPointerExceptions。

检查 Groovy 中可用的运算符

[http://docs.groovy-lang.org/latest/html/documentation/index.html#_safe_navigation_operator](http://docs.groovy-lang.org/latest/html/documentation/index.html#_safe_navigation_operator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:51:03.967

来自 groovy.org

安全导航运算符 (?.) 安全导航运算符用于避免 NullPointerException。通常，当您有一个对象的引用时，您可能需要在访问该对象的方法或属性之前验证它不为空。为避免这种情况，安全导航运算符将简单地返回 null 而不是抛出异常，如下所示：

```
def user = User.find( "admin" )           //this might be null if 'admin' does not exist
def streetName = user?.address?.street    //streetName will be null if user or user.address is null - no NPE thrown 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:51:35.553

这里解释一下？操作员：

[http://groovy.codehaus.org/Operators#Operators-SafeNavigationOperator](http://groovy.codehaus.org/Operators#Operators-SafeNavigationOperator)

在你的情况下？运算符保护空对象上的方法调用“等于”，例如在参数列表中找不到查询参数。

# vba - VbaProject.OTM 部署

> ID：14460036
> 
> 赞同：5
> 
> 时间：2013-01-22T13:46:21.603
> 
> 标签：vba, outlook, outlook-addin

我来到**[这个页面](http://www.outlookcode.com/article.aspx?id=28)**，正在考虑将我的`VbaProject.OTM`文件（位于`%appdata%\Microsoft\Outlook\`）分发给我办公室的大约 30 个用户的最佳方法。将 OTM 文件复制/粘贴到网络上，然后将其复制/粘贴回所有用户的计算机（手动或使用 .bat）**更好**还是使用上面链接中描述的方法生成更好？一个 OPS 文件并使用 Proflwiz.exe 将其导入回来？有什么不同？

实际上，我们都在使用 Microsoft Office Outlook 2003，我们可能有一天会升级到 2007，但从现在开始还需要几年时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T19:50:38.697

最后想出了一些元素来部署一个 Outlook VBA 项目。有很多方法可以做到这一点，但不安装任何东西并保持相同方法的最简单方法是直接从服务器运行 OTM 文件。我发现进程outlook.exe 有一个参数*altvba*，允许指定另一个路径来运行OTM 文件。这是一个例子：

`outlook.exe /altvba "\\myServer\myFolder\myFile.otm"`

这允许我只更新一个文件来更新所有计算机。显然，如果文件很大并且服务器的 ping 偏高，可能会延迟 Outlook 的启动。这种方法的另一个问题是，如果你想更新服务器上的 OTM 文件，每个人都必须关闭 Office（如果你在每个人都使用 Outlook 的办公室工作，你知道这是**不可能的**让每个人同时关闭它，除非你编写了一个宏来最终这样做）。为了防止这两个问题，我可以设置一个批处理文件来在每次有新版本时复制服务器 OTM 文件客户端（只需检查 NTFS last-modify 属性）。这样，Outlook 将使用本地文件启动，如果需要，批处理文件需要 2-3 秒来复制文件（或将立即启动 Outlook），并且在服务器上更新 OTM 文件不会有问题。用户必须使用批处理文件启动 Outlook（或使用稍微不同的 Outlook.exe 路径和 altvba 参数，因此无论哪种方式，他们都需要不同的快捷方式/文件才能第一次启动）。另一个优点`altvba`是用户在没有它的情况下运行 Outlook 仍然很容易（查看 VBA 是否有问题，以防 Outlook 运行缓慢），并且在 Outlook 重新初始化后文件将保持不变。

其他解决方案包括一个 COM 补充，可以在包括 VB6 在内的多种语言上开发（无需从 VBA 进行转换）。Microsoft Office XP Developer 中还包含许多工具，可以帮助完成工作（但不是免费的，尤其是在您需要最新版本的情况下）。

# vim - vim autocmd 在换行？

> ID：14460038
> 
> 赞同：3
> 
> 时间：2013-01-22T13:46:23.873
> 
> 标签：vim

每当更改一行时，我都会尝试运行一个函数，但似乎没有特定的自动命令。我可以在 CursorMoved 上运行该功能，但它会减慢编辑速度。我还可以为所有主要编辑动作映射该功能，但它可能会变得非常混乱，因为我试图保持每一行独立于其他行。如果没有解决方案，我可能每隔几秒钟做一次 diff 以查看发生了什么变化并在更改的行上运行该函数，但这又是一个混乱的解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-31T17:42:34.550

如果您可以获得 Vim 7.4，请查看[`TextChanged`(and `TextChangedI`, for insert mode) events](http://vimhelp.appspot.com/autocmd.txt.html#TextChanged)。（请注意，这将监控整个缓冲区的变化。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:53:25.120

你可以用 BufWritePre 事件来做这样的事情。有一个主文件来定义你的行和标记，然后在从属文件中，引用它们的主文件，例如：

**大师-Foo.vim：**

```
let b:Dom_slaves = ['/foo/bar/slave.cpp', '...', ...]
let b:Dom_map = { 
              \   10 : "do your laundry",
              \   20 : "prepare your lunch" 
              \ } 
```

**从属.cpp**

```
/* Dom_master = master-Foo.vim */
...
cout << "I will gladly /* Dom-id:10 */ and /* Dom-id:20 */.\n"; 
```

**支配.vim**

```
let MSMap = {}
autocmd BufWritePre * call s:Dominate()

function! s:Dominate()
    " if current buffer's Dom_slaves and Dom_map defined
        " read & update all slaves with Dom_map mappings
    " else see if 'Dom_master = somefile' appears in the buffer
        " update mapped values from cache or read master file, cache and update
    " endif
endfunction 
```

顺便说一句，这对你的 vim 来说是一件可怕的事情。:P

# function - 调用 UDF 时，公式中使用的值的数据类型错误

> ID：14460039
> 
> 赞同：2
> 
> 时间：2013-01-22T13:46:24.413
> 
> 标签：function, vba, excel, syntax-error

我一直在努力弄清楚这里出了什么问题。我有两个包含字符串值的列。我使用第三列在工作表中调用 UDF，但最终得到 #Value 并出现错误 - “公式中使用的值的数据类型错误”。

例如：

```
 Col I   Col J
 File1    Y
 File1    N
 File2    Y
 File3    N 
```

我尝试调试它，输入值被很好地传递到函数变量中。我在VBA方面的知识有限，希望你们能帮助我解决这个问题。

**工作表中调用的函数：**

```
=FileCheck(I3,I3:J38) 
```

**代码：**

```
Public Function FileCheck(V As Range, Q As Range) As String
    Dim vtest As Variant
    Dim i, j, stat As Integer

    stat = 0

    vtest = Q

    For i = 1 To UBound(vtest)
        If V = vtest(i, 1) And vtest(i, 2) = "N" Then

            For j = 1 To UBound(vtest)
                If V = vtest(j, 1) And vtest(j, 2) = "Y" Then

                    FileCheck = "Y"
                    stat = 1
                End If
            Next
            If stat = 0 Then
                FileCheck = "N"
                End
            Else: End
            End If

        ElseIf V = vtest(i, 1) And vtest(i, 2) = "Y" Then
            FileCheck = "Y"
        End If
    Next

End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:08:35.490

您收到该错误是因为您正在使用`End`.

想关电脑的时候是按一下`Start Menu ~~> Shut down`还是直接拔电源线？**:-)**

使用`End`与拉电缆非常相似。不要使用`End`. 优雅地退出函数。该`End`语句基本上是一种使程序崩溃的方法，但不显示任何错误消息。

尝试这个。替换这些行

```
If stat = 0 Then
    FileCheck = "N"
    End
Else: End
End If 
```

和

```
If stat = 0 Then FileCheck = "N"
Exit Function 
```

**编辑**

顺便说一句，您是否试图找到`Col I`in的相应值`Col J`？如果是，那么您不需要 UDF。您可以使用`Vlookup()`

使用此公式`=VLOOKUP(I3,I3:J38,2,0)`代替`=FileCheck(I3,I3:J38)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:05:08.973

我认为您的第一个输入类型应该是字符串而不是范围：

```
V as string 
```

当你想结束函数时你需要使用额外`exit function`的，但是我不确定你是想结束函数，结束 if 语句还是 for 循环？

# python - 了解 django 文档代码 - 会话

> ID：14460042
> 
> 赞同：1
> 
> 时间：2013-01-22T13:46:39.747
> 
> 标签：python, django, web-applications

您好，我是 django/python 新手，需要一些帮助来理解下面的代码。

```
def post_comment(request, new_comment):
    if request.session.get('has_commented', False):
        return HttpResponse("You've already commented.")
    c = comments.Comment(comment=new_comment)
    c.save()
    request.session['has_commented'] = True
    return HttpResponse('Thanks for your comment!') 
```

我感到困惑的是 if request.session.get('has_commented',False) 如果用户评论了'has_commented'键设置为true，那么你不会检查'has_commented'是否设置为true确保用户不发表另一条评论，而不是检查“has_commented”是否为假。我的逻辑不正确吗？会话密钥“has_commented”来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:54:54.550

当您调用 时`request.session.get('has_commented', False)`，您是在询问“会话密钥是否`'has_commented'`已设置为 true？如果是，则返回该值。如果不是，则返回 false。” 因此，如果有人尚未发表评论，它将返回`False`并继续执行其余代码。

`'has_commented'`关键来自以下几行：

```
request.session['has_commented'] = True 
```

`'has_commented'`一旦有人发表评论，这会将密钥设置为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:04:31.613

函数 request.session.get 有两个参数，即

*   关键（'has_commented'）
*   默认（假）

该函数将尝试为该键返回一个值，但如果该键不存在，或者该值为 NULL，则将返回默认值。

换句话说，如果 'has_commented' 的值为 True，则 if 语句将运行。但是，如果会话中没有 'has_comment' 键，request.session.get 将返回默认值 False 并且 if 语句将不会运行。

会话密钥“has_commented”源自以下行：

request.session['has_commented'] = True

# mysql - phpMyAdmin 例程未显示

> ID：14460053
> 
> 赞同：1
> 
> 时间：2013-01-22T13:47:15.927
> 
> 标签：mysql, sql, phpmyadmin, xampp, routines

我用 MySQL Workbench 创建了一个数据库和例程。导出 SQL 创建脚本后，我将其导入 phpMyAdmin，在我的本地 XAMPP 安装上成功执行 1065 次查询，它运行良好，例程和所有。

问题是当我尝试在工作场所的服务器上做同样的事情时，例程永远不会显示。导入脚本没有错误，它执行相同的 1065 次查询，没有错误，但是当我转到例程选项卡时，它没有显示任何内容，只是一个空白屏幕，甚至不允许我添加新例程。我似乎无法弄清楚问题是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:02:36.543

两台服务器中的 phpMyAdmin 版本可能不同，因此您可能正在尝试查看不正确支持它们的版本中的例程。

为确保您正确导入例程，请尝试选择它们：

```
SELECT routine_definition
FROM information_schema.routines
WHERE 
routine_name = 'routine_name' AND routine_schema = 'database_name'; 
```

# matlab - 在 3D 体积数据中创建圆柱体

> ID：14460056
> 
> 赞同：3
> 
> 时间：2013-01-22T13:47:24.433
> 
> 标签：matlab, geometry, volume-rendering

我正在尝试创建一个由几何形状组成的原始体积数据的数据集。重点是使用体积射线投射将它们投影为 2D，但首先我想手动创建体积。

几何结构由一个位于体积中间的圆柱体、沿 Z 轴和 2 个围绕第一个圆柱体的较小圆柱体组成，这些圆柱体源自围绕轴的旋转。

到目前为止，这是我的功能：

```
function cyl= createCylinders(a, b, c, rad1, h1, rad2, h2)

% a : data width
% b : data height
% c : data depth
% rad1: radius of the big center cylinder
% rad2: radius of the smaller cylinders
% h1: height of the big center cylinder
% h2: height of the smaller cylinders

[Y X Z] =meshgrid(1:a,1:b,1:c);  %matlab saves in a different order so X must be Y
centerX = a/2;
centerY = b/2;
centerZ = c/2;

theta = 0; %around y
fi = pi/4; %around x

% First cylinder
cyl = zeros(a,b,c);

% create for infinite height
R = sqrt((X-centerX).^2 + (Y-centerY).^2);

startZ = ceil(c/2) - floor(h1/2);
endZ = startZ + h1 - 1;

% then trim it to height = h1
temp = zeros(a,b,h1);
temp( R(:,:,startZ:endZ)<rad1 ) = 255;
cyl(:,:,startZ:endZ) = temp;

% Second cylinder

cyl2 = zeros(a,b,c);

A = (X-centerX)*cos(theta) + (Y-centerY)*sin(theta)*sin(fi) + (Z-centerZ)*cos(fi)*sin(theta);
B = (Y-centerY)*cos(fi) - (Z-centerZ)*sin(fi);

% create again for infinite height
R2 = sqrt(A.^2+B.^2);
cyl2(R2<rad2) = 255;

%then use 2 planes to trim outside of the limits
N = [ cos(fi)*sin(theta) -sin(fi) cos(fi)*cos(theta) ];

P = (rad2).*N + [ centerX centerY centerZ];
T = (X-P(1))*N(1) + (Y-P(2))*N(2) + (Z-P(3))*N(3);
cyl2(T<0) = 0;

P = (rad2+h2).*N + [ centerX centerY centerZ];
T = (X-P(1))*N(1) + (Y-P(2))*N(2) + (Z-P(3))*N(3);
cyl2(T>0) = 0;

% Third cylinder
% ...

cyl = cyl + cyl2;

cyl = uint8(round(cyl));

% ... 
```

其概念是创建第一个圆柱体，然后根据 z 轴值“切割”，以定义其高度。另一个圆柱体是使用关系 A ² + B ² = R ^(2创建的，其中 A 和 B 使用)*仅围绕 x 和 y 轴*的旋转矩阵进行相应旋转，使用 R [y] (θ)R [x (φ)，如此][处](http://en.wikipedia.org/wiki/Rotation_matrix#In_three_dimensions)所述。

到目前为止，一切似乎都在工作，因为我已经实现了代码（测试它运行良好）来显示投影，并且当圆柱体没有从无限高度“修剪”时，它们似乎有正确的旋转。

我计算出`N`哪个是向量，`[0 0 1]`也就是 z 轴，其旋转方式与圆柱体相同。然后我找到两个`P`我希望圆柱体边缘具有相同距离的`T`点，并根据该点和法向量计算平面方程。最后，我根据该等式进行修剪。或者至少这就是我*认为*我正在做的事情，因为在修剪后我通常什么也得不到（每个值都是零）。或者，我在试验时能得到的最好的东西是修剪了圆柱体，但是顶部和底部的平面没有很好地定向。

如果我的代码有任何帮助或更正，我将不胜感激，因为我一直在查看几何方程，但找不到错误所在。

编辑：这是我正在尝试创建的对象的快速屏幕截图。请注意，圆柱体在体积数据中是不透明的，所有内部都被视为均质材料。

![气缸套](../Images/274b500d63d3af6310beca2a0c6a5620.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:31:44.740

我认为而不是：

```
T = (X-P(1))*N(1) + (Y-P(2))*N(2) + (Z-P(3))*N(3); 
```

您应该在这两个地方尝试以下操作：

```
T = (X-P(1)) + (Y-P(2)) + (Z-P(3)); 
```

乘以`N`是为了说明您已经在该步骤上方完成的第二个圆柱体的轴方向。

# jquery - bxSlider touch enabled - 禁用垂直触摸事件，因此只有水平触摸事件有效

> ID：14460057
> 
> 赞同：7
> 
> 时间：2013-01-22T13:47:25.283
> 
> 标签：jquery, touch-event, bxslider

我可能正在使用我最喜欢的 jquery 滑块插件之一：[bxSlider](http://bxslider.com/)

[http://bxslider.com/options#touchEnabled](http://bxslider.com/options#touchEnabled)

最近他们更新了一些设备的触控功能。这允许您通过滑动来滚动滑块。

但是在我当前的项目中，我有一个幻灯片，它占据了我网站的整个宽度，当我在设备上查看时，当我用手指向下滚动时，当我到达幻灯片时，我无法向下滚动页面，而是幻灯片从左到右滚动。

所以我的问题是，是否可以禁用垂直触摸事件，以便仅在水平滑动滚动时才有效。

```
var winnerSlider = $('#slider').bxSlider({

}); 
```

如果有人可以帮忙，我有一个小提琴... [http://jsfiddle.net/2Fcxw/10/](http://jsfiddle.net/2Fcxw/10/)

扫描下方二维码查看设备上的小提琴。

![在此处输入图像描述](../Images/b4faf9c778e4823a5148181141eec96c.png)

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-11T12:39:54.283

```
$('#slider').bxSlider({
touchEnabled:false
}); 
```

这应该有效。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-29T13:49:49.653

```
var winnerSlider = $('#slider').bxSlider({
    preventDefaultSwipeY: false
}); 
```

`preventDefaultSwipeY`应该正是您所需要的。 [http://bxslider.com/options#preventDefaultSwipeY](http://bxslider.com/options#preventDefaultSwipeY)

现在应该默认设置，所以不需要声明它。

试过你的小提琴，它似乎在当前的 bxSlider (v4\. 1\. 2) 上运行良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-10T13:47:28.823

对于现在遇到此问题的任何人，`preventDefaultSwipeY`在最新版本 4.2.15 (4.2.1d) 中不再工作，请参阅[https://github.com/stevenwanderski/bxslider-4/issues/1235#issuecomment-465623162](https://github.com/stevenwanderski/bxslider-4/issues/1235#issuecomment-465623162)

正如作者所说，您需要从此修复第 371 行：

```
for (i = 1; i <= slider.settings.maxSlides - 1; i++) { 
```

对此：

```
for (var i = 1; i <= slider.settings.maxSlides - 1; i++) { 
```

在第 1109 行评论/删除：

```
e.preventDefault(); 
```

并在第 1189 行更改：

```
if ((xMovement * 3) > yMovement && slider.settings.preventDefaultSwipeX) {
  e.preventDefault();
  // y axis swipe
} else if ((yMovement * 3) > xMovement && slider.settings.preventDefaultSwipeY) {
  e.preventDefault();
}
if (e.type !== 'touchmove') {
  e.preventDefault();
} 
```

对此：

```
if ((xMovement * 3) > yMovement && slider.settings.preventDefaultSwipeX) {
  if(e.hasOwnProperty('cancelable') && e.cancelable) {
    e.preventDefault();
  }
  // y axis swipe
} else if ((yMovement * 3) > xMovement && slider.settings.preventDefaultSwipeY) {
  if(e.hasOwnProperty('cancelable') && e.cancelable) {
    e.preventDefault();
  }
}
if (e.type !== 'touchmove') {
  if(e.hasOwnProperty('cancelable') && e.cancelable) {
    e.preventDefault();
  }
} 
```

`preventDefaultSwipeY`正如 MarthyM 在他的回答中指出的那样，不需要使用它默认设置为 false。

# file - Chrome 上的 access-control-allow-origin 不允许 Origin null

> ID：14460060
> 
> 赞同：0
> 
> 时间：2013-01-22T13:47:34.137
> 
> 标签：file, google-chrome

我正在开发一个要从 DVD 使用的网站，所以我不能依赖`http://`协议。HTML 页面使用 jQuery 和 knockout.js，并使用`$.getJSON`.

这在 Firefox 上运行良好，但我`origin null is not allowed by access-control-allow-origin`在 Chrome 上运行良好。我已经看过很多这样的答案，但我不能强迫用户使用额外的命令行参数或将网站放在 HTTP Web 服务器上来启动 Chrome。

有没有办法让 Chrome 打开本地文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T16:01:27.073

我知道这可能会迟到，但我陷入了类似问题的迷雾中。我有 JSON 的解决方案（我将分享），但没有 XML 的解决方案。

我的解决方案是使用 javascript 加载器（例如：HeadJS），它对需要离线运行的应用程序做得很好。我会以这种方式创建一个带有 .js 的文件。

```
var JSON = {
    Field1: "Text",
    Field2: "Text2"
} 
```

然后我会使用装载机。我们实际上允许用户选择他们想要的数据并加载该特定文件。

希望这对其他人有帮助。

# extjs - 没有商店的模型

> ID：14460063
> 
> 赞同：2
> 
> 时间：2013-01-22T13:47:40.523
> 
> 标签：extjs, extjs4, extjs4.1, extjs4.2

我创建了一个模型，其中包含一个代理来加载单个记录并且它不接受任何参数。我不想使用商店，因为我永远不会拥有超过一张唱片。我创建了模型的一个实例，但不知道如何告诉它从服务器调用和加载记录。这是我能找到的唯一示例，但我没有要传递的 id。

```
User.load(123, {
success: function(user) {
    console.log("Loaded user 123: " + user.get('name'));
}
}); 
```

此外，我正在打 ajax 电话，而不是休息电话，以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:58:18.853

**[load(id, [config])](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-static-method-load)**是静态的，将返回~~为~~您提供一个新的记录实例。它使用通过**[setProxy(proxy)](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-static-method-setProxy)**设置的代理（也是静态的）。默认情况下，它将发送带有 params 的读取请求`id: 123`。静态方法允许您在可选配置对象中设置一些默认回调。需要这些回调来获取已加载记录（或错误）的实例。

**这个怎么运作**

```
// create a Model class
Ext.define('MyApp.User', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id', type: 'int'},
        {name: 'name', type: 'string'}
    ]
});

// apply a proxy instance
MyApp.User.setProxy(/*YourAjaxProxy*/);

// prepare a handler
var cb = function(model, op) {
    // log the new model instance
    console.log(model);
};

// get a instance
MyApp.User.load(123, {
    scope: this, // should be the scope of the callback (cb)
    success: cb
}); 
```

不是你需要的？只是评论...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:00:38.750

只需发出 Ajax 请求并将结果存储在变量中。

```
 Ext.Ajax.request({
                    url: '/data/get',
                    method: 'GET',
                    params: {
                        requestID: 'XXXX',
                        connName: 'yyyy'
                    },
                    success: function (responseData) {
                       var countResult = Ext.decode(responseData.responseText);                      }
                }); 
```

# java - Eclipse的问题

> ID：14460065
> 
> 赞同：1
> 
> 时间：2013-01-22T13:47:43.293
> 
> 标签：java, eclipse

我已经下载了用于 J2EE 开发的 eclipse

我的问题似乎是什么？

地址 (C:\Program Files (x86)\Java) 的文件是： **jdk1.6.0_02** , **jre1.6.0,** **jre1.6.0_02** , **jre7**

![错误](../Images/045efbeed8b2f8797900534427e86dc4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T13:50:18.927

如果 eclipse 是 64 位而 JDK 或 JRE 是 32 位，则有可能。检查这个。

```
C:\Program Files (x86)\Java 
```

告诉您使用的是**32 位 JRE 和 JDK**，但您拥有的 JUNO 是**64 位**的。所以使用64位JRE/JDK，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:51:10.757

我不是在开玩笑：我的一个朋友在加载 Netbeans 7 时遇到了这个问题，我们无法弄清楚。最终，由于某种原因，他关闭了他的桌面时钟小工具（Windows 7 附带的那个），突然它又开始工作了。我无法解释它是如何或为什么起作用的，但不要排除它（当然，除非你没有使用小工具）。

# jsf - JSF，AJAX 不呈现

> ID：14460067
> 
> 赞同：1
> 
> 时间：2013-01-22T13:47:46.173
> 
> 标签：jsf, jsf-2, selectonemenu

为什么在这段代码中选择一个项目后，城市组件没有被渲染？

```
<h:form prependId="false">
<h:panelGrid columns="1">
<h:selectOneMenu value="#{enumBeanStatus.selectedRegion}">
<f:selectItems id="selectItem" value="#{enumBean.regions}" var="region" itemLabel="#{region.label}"/>
<f:ajax listener="#{enumBean.loadCities}" render="cities"/>
</h:selectOneMenu>
<h:outputText id="cities" value="#{enumBean.cities}"/>
</h:panelGrid>
</h:form> 
```

它确实会发送带有所选区域的 POST，模型会正确更新，但`<h:outputText>`不会呈现组件。

支持豆之一：

```
@Named
public class EnumBean {

private List<Region> regions;
private List<City> cities;

@Inject 
EnumBeanStatus enumBeanStatus; //This one is CDI @ApplicationScoped & @Named

// Code...

public void loadCities(){
setCities(City.getCitiesByRegion(enumBeanStatus.getSelectedRegion()));
}

// Getters and Setters
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:19:33.560

从. `prependId="false"`_ `<h:form>`它会阻止`<f:ajax>`基于相对客户端 ID 解析正确的组件。

### 也可以看看：

*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier/8644762#8644762)
*   [带有 prependId="false" 的 UIForm 中断 <f:ajax render>](https://stackoverflow.com/questions/7415230/jsf-namingcontainer-and-uiform-with-prependid)

# mysql - Mysql DATE_FORMAT 和计时

> ID：14460069
> 
> 赞同：0
> 
> 时间：2013-01-22T13:47:56.653
> 
> 标签：mysql, date, format

我有一个名为“reportinc”的表，我必须在其中提取 - 它是 VARCHAR 字段 - 从 18:01 （时间格式为 %H:%i）到今天 18:00 过去的 1 天或几天。

我试过这个查询

```
SELECT `ID incidente`, `Data/ora apertura`
FROM `reportinc`
WHERE `Data/ora apertura` 
BETWEEN 
(   
SELECT date_format( now( ) - INTERVAL 1
DAY , "%d/%m/%y at 18:01 " )
)
AND 
(
SELECT date_format( now( ) , "%d/%m/%y at 18:00 " ) 
```

我想从昨天18:01提取到今天18:00。但结果是从昨天到今天的 00:00。它不将 18:00 或 18_01 视为有效时间格式。如何指定查询时间？

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:56:59.490

该`Data/ora apertura` 字段必须是 DATETIME 字段，否则您必须进行 CAST。

然后你必须这样做：

```
SELECT `ID incidente`, `Data/ora apertura`
FROM `reportinc`
WHERE `Data/ora apertura` 
BETWEEN 
(   
    SELECT date_format( now( ) - INTERVAL 1 DAY , "%Y-%m-%d 18:01:00" )
)
AND 
(
    SELECT date_format( now( ) , "%Y-%m-%d 18:00:00" 
) 
```

当字段类型为 VARCHAR 时，Between 不会按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:56:27.800

首先将格式从 varchar 更改为有效的日期格式。varchar 将值作为字符串，您将不得不使用正则表达式来分叉日期和时间。最好选择前一个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:54:13.470

**编辑添加了更具体的日期时间格式**

我在时间和日期的组合中遇到了同样的问题。时间被忽略，因此您会得到一整天的结果。

尝试 PHP 或其他编程语言来操作 MySQL。或者按照我的建议尝试更改 CSV 文件的导入方法。

```
SELECT *,CAST((STR_TO_DATE(`Data/ora apertura`, '%d/%m/%Y %H.%i')) AS DATETIME) 
AS DATE_TIME 
FROM reportinc
WHERE (CAST((STR_TO_DATE(`Data/ora apertura`, '%d/%m/%Y %H.%i')) AS DATETIME))  >= ('2012-22-01 21:00');

SELECT *,CAST((STR_TO_DATE(`Data/ora apertura`, '%d/%m/%Y %H.%i')) AS DATETIME) 
AS DATE_TIME 
FROM reportinc
WHERE (STR_TO_DATE(`Data/ora apertura`, '%d/%m/%Y %H.%i'))  >= ('2012-22-01 21:00'); 
```

样本数据：

```
CREATE TABLE reportinc (
  `ID_incidente` int auto_increment primary key,
  `Data/ora apertura` varchar(30)
  );

INSERT INTO reportinc (`Data/ora apertura`) 
VALUES 
("31/07/2012 10.46"),
("31/07/2012 10.47"),
("22/01/2013 20.00"),
("23/01/2013 10.00"); 
```

[SQL FIDDLE 演示](http://www.sqlfiddle.com/#!2/0ca13/74) **---**

尝试类似：

使用强制转换功能：

```
SELECT * FROM reportinc WHERE (CAST(`Data/ora apertura` AS DATETIME)) >= NOW() - INTERVAL 3 hour; 
```

使用 str_to_date 函数：

```
 SELECT * FROM reportinc WHERE (STR_TO_DATE(`Data/ora apertura`,'%Y-%m-%d %H:%i:%s')) >= NOW() - INTERVAL 3 hour; 
```

您对时间范围有点不清楚，所以我以 3 小时为例。您还可以使用特定的日期和时间。

使用演员表：

```
`SELECT * FROM reportinc WHERE (CAST(`Data/ora apertura` AS DATETIME)) >= ('2013-01-22 20:00:00');` 
```

使用 str_to_date

```
SELECT  * FROM reportinc WHERE (STR_TO_DATE(apertura, '%Y-%m-%d %H:%i:%s'))  >= ('2013-01-21 20:00:00'); 
```

样本数据：

```
CREATE TABLE reportinc (
  `ID_incidente` int auto_increment primary key,
  `Data/ora apertura` varchar(30),
  `Data/ora apertura1` datetime
  );

INSERT INTO reportinc ( `Data/ora apertura`, `Data/ora apertura1`) 
VALUES (NOW() - INTERVAL 1 day, NOW() - INTERVAL 1 day),
(NOW() - INTERVAL 1 hour, NOW() - INTERVAL 1 hour),
(NOW() - INTERVAL 3 hour, NOW() - INTERVAL 3 hour),
(NOW() - INTERVAL 6 hour, NOW() - INTERVAL 6 hour),
(NOW() - INTERVAL 9 hour, NOW() - INTERVAL 9 hour),
(NOW() - INTERVAL 1 year, NOW() - INTERVAL 1 year); 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/186d5/45)

顺便说一句，我的建议是停止在列名和表名中使用斜杠、空格等。

如果您接受对您有帮助的答案，我将不胜感激。

# javascript - Bootstrapx 点击问题 - 需要点击两次，有时需要点击 3 次

> ID：14460072
> 
> 赞同：1
> 
> 时间：2013-01-22T13:47:58.340
> 
> 标签：javascript, jquery, twitter-bootstrap

我在使用 Bootstrapx clickover 时遇到问题（所有 js 库都已正确链接）

```
 $(function ()  { 
    $('.userProfile').each(function(index){
        var el=$(this);
        $.get(el.attr('data-load'),function(d){
            el.clickover({html:true,content: d}).clickover();                   
        });
    }); 

   }); 
```

**还有我的html**

```
<p><a href="#" class="userProfile" rel="clickover" data-load="inc/userProfile.inc"> 
```

亚历克斯米。为 Marc B 完成了一项任务。

**弹出框内容**

```
<a href="#">Alex M.</a>
<span class="label">Volunteer</span>
<button class="btn btn-primary btn-small">Follow</button>
<button class="btn btn-small" data-toggle="button" data-dismiss="clickover">Close</button> 
```

期待得到一些帮助，

谢谢，

伊莎贝尔，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:50:13.750

Are you sure you are forced to use

```
el.clickover({html:true,content: d}).clickover(); 
```

instead of

```
el.clickover({html:true,content: d}); 
```

Can you reproduce it on a pastebin?

# unix - Unix-将多个文件夹中的多种文件类型合并为一个pdf

> ID：14460075
> 
> 赞同：0
> 
> 时间：2013-01-22T13:48:17.937
> 
> 标签：unix, pdf, merge, jpeg, .doc

我有一个包含大约 30 个子文件夹的父文件夹，每个子文件夹都包含 pdf、.doc、.docx 和 .jpg 文件。我需要将所有文件合并成一个大的pdf。我希望将文件附加到“主pdf”中的顺序反映我当前的文件夹和文件顺序（子文件夹名称的字母顺序和每个子文件夹中文件的数字顺序）。

我对 Unix 还很陌生，对此有点坚持....如果您对如何解决这个问题提出任何建议，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:56:14.730

这里存在三个问题：

1.  遍历目录树查找所有文档
2.  将每个文件转换为 PDF
3.  合并 PDF

对于第一部分，您可以使用`find`命令获取文件列表或编写目录遍历脚本。

对于第二部分，您可以使用 OpenOffice/LibreOffice 命令行驱动程序来转换文件和`.doc`转换文件。`.docx``ghostscript``.jpg`

对于第三部分，可能`ghostscript`再次。

或者，有一些很好的 PDF API 可用于某些编程语言，例如 Lowagie 的 iText for Java。

# java - Java 应用程序安装程序作为 Windows 服务或启动

> ID：14460077
> 
> 赞同：0
> 
> 时间：2013-01-22T13:48:22.910
> 
> 标签：java

我正在使用netbeans创建一个项目，最终结果需要是一个安装程序，当您安装应用程序时，它会在每次计算机重置后自动打开。我一直在寻找（仍然是）任何可以帮助我的软件，但找不到任何东西。我找到了一个简单的安装创建者，它制作了一个安装程序，但它不会自动将应用程序作为 Windows 服务（我可以使用 CMD安装后将其作为服务，但我希望它是自动的）。

另一种选择是安装程序会将应用程序 exe 放在用户启动组中，但同样，我希望它自动这样做。

有人可以为此推荐一些简单的软件吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:06:56.860

尝试[Install4J](http://www.ej-technologies.com/products/install4j/overview.html)。虽然它不是免费的。

> install4j 为生成和安装服务（守护进程）提供全面支持。对于服务，install4j 在 Windows 上生成服务可执行文件，在 Mac OS X 上生成启动项，在 Unix/Linux 平台上生成启动/停止脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:24:42.367

我们在我的工作中使用了[Java Service Wrapper](http://wrapper.tanukisoftware.com/doc/english/download.jsp)，它多年来一直运行良好。虽然它不是免费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:09:19.557

我不认为这是一个正确的问题。

无论如何，看看[WhatInStartup](http://www.nirsoft.net/utils/what_run_in_startup.html) （它是免费的）

创建程序的exe Jar文件，添加只是添加到它。

要以简单的方式做到这一点，请查看[Jar2Exe](http://download.cnet.com/Jar2Exe/3000-2213_4-10521671.html)

# syntax - 带有 SML 的 EQUALOP 错误消息

> ID：14460078
> 
> 赞同：4
> 
> 时间：2013-01-22T13:48:24.380
> 
> 标签：syntax, sml, ml

我正在尝试创建一个简单的函数，该函数采用 int*int*int 格式的两个日期，如果第一个日期早于第二个日期，则返回。

```
fun is_older (date1: (int*int*int), date2: (int*int*int)) =
    val in_days1 = (#1 (date1) * 365) + (#2 (date1) * 30) + #3 date1;
    val in_days2 = (#1 (date2) * 365) + (#2 (date2) * 30) + #3 date1;

    if in_days1 < in_days2
    then true
    else false 
```

我收到此错误：

> hwk_1.sml:1.53 错误：语法错误：插入 EQUALOP
> 
> 未捕获的异常编译 [编译：“语法错误”]
> 
> 提出于：../compiler/Parse/main/smlfile.sml:15.24-15.46
> 
> ../compiler/TopLevel/interact/evalloop.sml:44.55
> 
> ../compiler/TopLevel/interact/evalloop.sml:296.17-296.20

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T14:24:05.403

除了已经提到的内容之外，您还应该使用模式匹配来分解该 3 元组。这样做，您还可以丢弃类型注释，因为现在很清楚这是一个 3 元组（对于读者来说，但更重要的是类型系统）。

```
fun is_older ((y1, m1, d1), (y2, m2, d2)) =
    let
      val days1 = y1 * 365 + m1 * 30 + d1
      val days2 = y2 * 365 + m2 * 30 + d2
    in
      days1 < days2
    end 
```

但是，您可以更聪明地做到这一点。如果您有多个处理日期的函数，您可以创建一个不错的小辅助函数`toDays`。在下面的示例中，我刚刚将其包含在`isOlder`函数中，但是如果您不想将其隐藏，则可以将其放在顶层或`local`-declaration 中

```
fun isOlder (date1, date2) =
    let
      fun toDays (y, m, d) = y * 365 + m * 30 + d
    in
      toDays date1 < toDays date2
    end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T14:04:56.747

```
val in_days1 = (#1 (date1) * 365) + (#2 (date1) * 30) + #3 date1;
val in_days2 = (#1 (date2) * 365) + (#2 (date2) * 30) + #3 date1; 
```

局部`val`定义需要介于`let`和之间`in`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-28T01:19:48.520

FWIW，我在同一个作业中的其他练习之一中遇到了同样的错误：

`Error: syntax error: inserting EQUALOP`

但就我而言，它发生在第一行。这让我很困惑，因为我来自 Python，错误通常发生*在*错误之后。

底线，我想知道的是：这个错误意味着它不能编译所写的代码。

PS如果你使用`let`，`in`你也必须使用`end`. （您不需要使用`val`或`let`解决`is_older`问题 - 有一种方法可以单独使用集合逻辑）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-06T11:55:01.513

它对我有用：

```
fun is_older(diaUno : (int * int * int), diaDos : (int * int * int)) =

    let

        fun setDayNum(diaUno : (int * int * int)) =

            let
                val diaUnoInt = (#1 (diaUno) * 365) + (#2 (diaUno) * 30) + #3 diaUno
            in
                diaUnoInt
            end 

        val dia1 = setDayNum(diaUno)
        val dia2 = setDayNum(diaDos)

    in

        if dia1 < dia2 then diaUno else diaDos

    end 
```

# powershell - 使用通配符搜索和删除注册表项

> ID：14460079
> 
> 赞同：6
> 
> 时间：2013-01-22T13:48:26.537
> 
> 标签：powershell, registry

是否可以搜索通配符 - 示例`*WAAgent*`或`*WAHost*`删除引用上述通配符语句的每个注册表项？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T14:04:13.297

您可以尝试以下方法：

```
Get-ChildItem -Path HKLM:\ -Recurse -Include *WAAgent* -ErrorAction SilentlyContinue | Remove-Item
Get-ChildItem -Path HKLM:\ -Recurse -Include *WAHost* -ErrorAction SilentlyContinue | Remove-Item 
```

您必须指定`-Path`它们是位于 HKLM（本地计算机）还是 HKCU（当前用户）中，因为它们是两个不同的驱动器。这必须以管理员身份运行，并且会给出很多错误（这就是我过去`-ErrorAction SilentlyContinue`隐藏它们的原因）。

**注意：**我个人认为在注册表中使用通配符并不明智，因为它可能会删除您不知道的内容，这可能会使系统崩溃。我的建议是编译一个指向要删除的键的路径列表，并使用 foreach 循环遍历它以逐个删除。同样，通配符在注册表中是危险的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T14:18:09.420

如果您正在搜索属性值而不是键值（并删除相对键），您可以使用以下内容：

```
gci HKLM: -rec -ea SilentlyContinue | % { if((get-itemproperty -Path $_.PsPath) 
    -match "WAAGent") { $_.PsPath} } | Remove-Item 
```

就像@Graimer 的回答一样，小心**！！！**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T14:44:40.190

正如所有人已经建议的那样，请谨慎使用它！以下将遍历所有注册表配置单元。请记住，找到的匹配键可能在其下方具有深层结构，并且您将其全部删除。移除 WhatIf 开关以实际删除密钥。

```
Get-ChildItem Microsoft.PowerShell.Core\Registry:: -Include *WAAgent*,*WAHost* -Recurse |
Remove-Item -Recurse -Force -WhatIf 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-11T07:09:45.360

我遇到的问题是注册表路径中有一个会话 ID。为了解决这个问题，获得了注册表的第一部分，将其存储在一个变量中，并将其用于我的 foreach 循环，其中存储了驱动器映射的键。

以上对我来说太严格了。

下面显示了一个在会话中删除（本地）驱动器映射的示例（我遇到的问题）。

```
Start-Sleep -Seconds 20

# This stores the Path "HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\SessionInfo\<SESSIONID>"
$SessionInfo = Get-Item "HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\SessionInfo\*"

cd "HKCU:\"

Start-Sleep -Seconds 1

$Items = Get-ChildItem "$SessionInfo\MyComputer\Namespace"

foreach($Item in $Items){

        Remove-Item $Item -Force -Recurse -Verbose

} 
```

# vim - 将粘贴 (p) 映射到“0p

> ID：14460083
> 
> 赞同：5
> 
> 时间：2013-01-22T13:48:58.677
> 
> 标签：vim, vi

在 .vimrc 我试图做

```
nmap p "0p 
```

但是有了这一行，我的 vim 就挂了。谁能帮我？我究竟做错了什么？

我正在尝试这样做，因为当我拉出一行并且在拉出后使用 del 按钮时，寄存器“”会更改为我删除的字符。但是寄存器“0”保持不变。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T13:51:09.043

Vim 尝试递归地映射`p`，导致无限循环。改用[`nnoremap`](http://vimdoc.sourceforge.net/htmldoc/map.html#:nnoremap)：

```
nnoremap p "0p 
```

# c++ - wstring 支持什么语言环境？

> ID：14460084
> 
> 赞同：1
> 
> 时间：2013-01-22T13:48:59.273
> 
> 标签：c++, text, character-encoding

在我的程序中，我曾经`wstring`打印出我需要的文本，但它给了我随机密码（由于不同的编码方案）。例如，我有这段代码。

```
wstring text;
text.append(L"Some text"); 
```

然后我使用 directX 在屏幕上渲染它。我曾经使用`wchar_t`过，但听说它有便携性问题，所以我切换到`swtring`. `wchar_t`工作得很好，但它似乎只用了我能说的英文字符（打印出来完全忽略输入的非英文字符），这很好，直到我切换到`wstring`: 我只得到看起来像中文和韩文混合在一起的随机密码。有趣的是，我的非 unicode 文本的计算机区域设置是中文。根据我所看到的，我怀疑它会正确呈现汉字，所以我尝试了一下，它确实正确显示了字符，但前面有一个正方形（这仍然是一种不正确的显示）。然后我猜测编码可能取决于语言区域所以我将区域设置切换为英语（美国）（我使用 win8），然后我重新启动并看到源文件中的中文测试字符变成了一些随机的东西（我的文件没有保存以 unicode 格式，因为所有文本都是英文）然后我尝试使用英文字符，但没有运气，显示似乎完全相同，与语言环境无关。但我不明白为什么它不

是否应该进行一些转换，或者我应该以不同的编码格式保存我的文件？问题是我想正确显示英文字符，这是默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:09:09.960

在没有代码证明你的问题的情况下，我会给你一个相应的一般性答案。

您正在尝试显示英文字符，但看到的是中文字符。当您将 8 位 ANSI 文本传递给接收 UTF-16 文本的 API 时，就会发生这种情况。在你的程序中寻找你从`char*`到的地方`wchar_t*`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:46:22.077

`std::wstring`根本没有任何语言环境/国际化支持。它只是一个用于存储`wchar_t`.
问题`wchar_t`在于它的编码是未指定的。它可能是 Unicode UTF-16，或 Unicode UTF-32，或 Shift-JIS，或完全不同的东西。没有办法从程序中分辨出来。

如果您确保源代码的编码与程序将在其下运行的语言环境使用的编码相同，那么您将有最好的机会让事情正常工作。
但是，由于这些库期望和支持的编码可能存在限制，使用第三方库（如 DirectX）可能会带来额外的限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:13:10.777

首先，您要在其中存储文本的文件类型是什么？默认情况下，普通 txt 文件存储在 ANSI 中（excel 也是如此）。因此，当您尝试将 Unicode 字符打印到 ANSI 文件时，它将打印垃圾。克服这个问题的两种方法是：

1.  尝试以 UTF-8 或 16 模式打开文件，然后写入
2.  在写入文件之前将 Unicode 转换为 ANSI。如果您使用的是 Windows，那么 MSDN 提供了特定的 API 来执行 Unicode 到 ANSI 的转换，反之亦然。如果您使用的是 Linux，则使用 Google 将 Unicode 转换为 ANSI。那里有很多解决方案。

希望这可以帮助！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T14:43:12.490

Bug 解决了，原来是 CASTING 问题（不是之前说的渲染问题）。错误文本是使用（我忘了提及）的一些内部转换过程中的中间产物`swtringstream`，代码如下

```
wstringstream wss;
wstring text;
textToGenerate.append(L"some text");
wss << timer->getTime()
text.append(wss.str()); 
```

在这个过程之后，调试器将文本显示为一堆随机的东西，但后来它以某种方式转换回来，所以它是可读的。但是问题出现在使用 DirectX 的渲染阶段。我以某种方式留下了 的铸件`wchar_t*`，这导致了不正确的渲染。

老的：

```
LPCWSTR lpcwstrText = (LPCWSTR)textToDraw->getText(); 
```

新的：

```
LPCWSTR lpcwstrText = (*textToDraw->getText()).c_str(); 
```

通过改变它可以解决问题。

所以，这是一个糟糕的演员阵容造成的。由于一些善良的人对我的陈述进行了更正。

# jquery - JqueryUI sortable 滚动失败

> ID：14460086
> 
> 赞同：1
> 
> 时间：2013-01-22T13:49:02.770
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我在我的应用程序中使用 jqueryUI 可排序，所以我有以下问题：

[jsFiddle](http://jsfiddle.net/nLJ8x/1/)

正如您在此小提琴中看到的那样，当您单击滚动条时，`sortable`项目被拖动并且无法放下它。

我想要做的是防止在滚动时拖动元素。我刚刚做的是搜索可排序元素的事件，并尝试防止滚动，但这并不像我想要的那样工作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:10:23.333

您可以创建一个宽度和高度为 100% 的内部 div，您将其定义为句柄。这样元素仍然可以拖动，但不能在滚动条上。它不会按照您的要求禁用滚动元素的拖动，但我希望它对您有所帮助。

[更新的小提琴](http://jsfiddle.net/nLJ8x/2/)

HTML：

```
<div id="foo">
    <div id="bar" class="bar">
        <div class="innerBar"></div>
    </div>
    <div id="bar2" class="bar">
        <div class="innerBar"></div>
    </div>
</div> 
```

JS：

```
$("#foo").sortable({handle: '.innerBar'}); 
```

CSS：

```
#foo div.bar {
    width: 100px;
    height:100px;
    float: left;
    background: red;
    margin: 10px;
}

#bar { 
    height: 200px;
    overflow-y: scroll;
}

.innerBar {
    width: 100%;
    height: 100%;
} 
```

# backbone.js - Backbone.js 集合获取错误

> ID：14460088
> 
> 赞同：1
> 
> 时间：2013-01-22T13:49:17.547
> 
> 标签：backbone.js, requirejs, backbone.js-collections

我正在使用 Require.js 构建我的第一个 Backbone 应用程序，其结构与[Todo MVC 示例](https://github.com/addyosmani/todomvc/tree/gh-pages/dependency-examples/backbone_require)类似，并且还使用 Backbone LocalStorage。问题是当我`TweetsCollection.fetch()`在 HomeView 中运行时，萤火虫给了我错误：`TypeError: options is undefined` `var method = options.update ? 'update' : 'reset';`

**推文集合：**

```
 define([
    'underscore',
    'backbone',
    'backboneLocalStorage',
    'models/TweetModel'
], function(_, Backbone, Store, TweetModel) {

'use strict';

    var TweetsCollection = Backbone.Collection.extend({

        model: TweetModel,

        localStorage: new Store('tweets-storage'),

        initialize: function() {
            console.log('Collection init...');
        }

    });

    return new TweetsCollection();

}); 
```

**主页视图初始化：**

```
initialize: function() {
            this.listenTo(TweetsCollection, 'add', this.addOne);
            this.listenTo(TweetsCollection, 'reset', this.addAll);
            this.listenTo(TweetsCollection, 'all', this.render);

            TweetsCollection.fetch(); // <- Error here
        }, 
```

我尝试按照上面的示例进行操作，但我真的迷失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:01:45.813

发生错误的代码行在 Backbone 的`success`回调中，由`Backbone.sync`. 这是该方法在 Backbone 中的样子`0.9.10`：

```
 options.success = function(collection, resp, options) {
    var method = options.update ? 'update' : 'reset';
    collection[method](resp, options);
    if (success) success(collection, resp, options);
  }; 
```

在 version 之前`0.9.10`，Backbone 回调签名是：

```
options.success = function(resp, status, xhr) { ... 
```

`Backbone.localStorage`您显然正在使用的插件[执行回调方法如下（第 146 行）](https://github.com/jeromegn/Backbone.localStorage/blob/master/backbone.localStorage.js)：

```
 if (options && options.success)
    options.success(resp); 
```

如您所见，它没有以正确的顺序传递参数，并且完全丢失了`options`参数，这是您看到错误的地方。

所以看起来 Backbone.localStorage 插件目前与最新的 Backbone 版本不兼容。

**编辑：**我去向 localStorage 插件的作者报告这个问题，但看起来已经有一个[GitHub 问题和拉取请求](https://github.com/jeromegn/Backbone.localStorage/pull/63)来解决这个问题。它还没有合并，所以在此期间你可以使用[phoey 的 fork](https://github.com/phoey/Backbone.localStorage)或降级到 Backbone 0.9.9

# netbeans - 更新 Netbeans 从数据库生成的实体类

> ID：14460090
> 
> 赞同：4
> 
> 时间：2013-01-22T13:49:22.270
> 
> 标签：netbeans, netbeans-7

我已经使用 NetBeans“来自数据库的实体类...”向导生成了我的实体类。我现在需要在我的数据库中的几个表中添加一些列。无论如何要让 NetBeans 更新它生成的实体类，还是我必须删除当前实体并让 NetBeans 生成新实体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-07T19:52:48.430

只需重新运行“来自数据库的实体类”向导。您的实体类将被更新。无论如何，您在向导第一次运行后所做的更改将会丢失！

# filesystems - 嵌入式文件系统和断电

> ID：14460091
> 
> 赞同：3
> 
> 时间：2013-01-22T13:49:30.723
> 
> 标签：filesystems, embedded, power-off

我正在开发一个没有任何需要使用文件系统的操作系统的嵌入式应用程序。我已经和项目中的人讨论过很多次了，有些人同意我的观点，即系统必须在出现电源故障时正确关闭系统，否则文件系统可能会发疯。

有人说，如果你只是关闭系统并让自然顺其自然并不重要，但我认为这是最糟糕的事情之一，特别是如果你知道这会给你带来问题并且可能会缩短你的产品的寿命。

在最后一段中，我只是假设这是一个问题，但我的问题仍然存在：

**断电对文件系统有影响吗？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T19:36:39.703

**以下是帮助嵌入式系统容忍电源故障的各种技术列表。这些对于您的特定应用程序可能不实用。**

1.  **使用[日志文件系统](http://en.wikipedia.org/wiki/Journaling_file_system)**- 可以容忍由于电源故障、操作系统崩溃等导致的不完整写入。大多数现代文件系统都是日志文件系统，但要做好功课确认。

2.  **除非您的应用程序需要写入性能，否则请禁用所有写入缓存。** 检查您的磁盘驱动程序的缓存选项。在 Linux/Unix 下，考虑以同步模式挂载文件系统。

3.  **除非它必须是可写的，否则将其设为只读。** 尝试将您的应用程序可执行文件和操作系统文件保存在它们自己的分区上，并使用适当的写保护（例如，在 Linux 中以只读方式挂载）。您的读/写数据应位于其自己的分区上。即使您的应用程序数据被损坏，您的系统仍然应该能够启动（尽管具有故障安全默认配置）。

    3a。对于只写入一次的数据（例如配置设置），请尝试在大多数情况下将其安装为只读。如果有设置更改挂载临时为 R/W，请更新数据，然后将其卸载/重新挂载为只读。

    3b。使用类似于 3a 的技术来处理现场的应用程序/操作系统更新。

    3c。如果以只读方式挂载 FS 对您来说不切实际，至少考虑以只读方式打开单个文件（例如 fp=fopen("configuration.ini", "r")）。

4.  **如果可能，请使用单独的设备进行存储。** 将内容保存在单独的分区中提供了一些保护，但仍然存在分区表可能损坏并导致整个驱动器不可读的极端情况。使用物理上分离的设备进一步隔离了一个损坏的设备，导致整个系统瘫痪。在一个完美的世界中，您将拥有至少 4 个独立的设备：

    4a。引导加载程序

    4b。操作系统和应用程序代码

    4c。配置设置

    4e。申请资料

5.  **了解您的存储设备的特性，并控制所使用设备的品牌/型号/版本。** 一些硬盘忽略来自操作系统的缓存刷新命令。我们曾经遇到过某些型号的 CompactFlash 卡在断电时会自行损坏的情况，但“工业”型号没有这个问题。当然，这些信息没有在任何数据表中公布，必须通过实验测试来收集。我们制定了一份批准的 CF 卡清单，并保留了这些卡的库存。随着旧卡过时，我们不得不定期更新此列表，否则制造商会进行修订。

6.  将您的临时文件放入[RAM Disk](http://en.wikipedia.org/wiki/RAM_drive)中。如果您将这些写操作保留在磁盘外，则可以将它们作为潜在的损坏源消除。您还可以减少闪光磨损。

7.  **开发自动化的损坏检测和恢复方法。**- 如果应用程序只是因为缺少配置文件而挂起，那么上述所有技术都对您没有帮助。您需要能够尽可能优雅地恢复：

    7a。您的系统应至少保留其配置设置的两个副本，一个“主”和一个“备份”。如果主因某种原因失败，请切换到备份。您还应该考虑在配置更改时或在用户声明配置“良好”后（测试与生产模式）进行备份的机制。

    7b。您的应用程序数据分区是否挂载失败？自动运行 chkdsk/fsck。

    7c。chkdsk/fsck 是否未能解决问题？自动重新格式化分区并将其恢复到已知状态。

    7d。您是否有引导加载程序或其他方法来在故障后恢复操作系统和应用程序？

    7e。确保您的系统会发出哔哔声、闪烁 LED 或其他东西以向用户指示发生了什么。

8.  **电源故障应该是您的系统资格测试的一部分。** 确保您拥有一个强大的系统的唯一方法是对其进行测试。从系统中拔出电源线并记录发生的情况。尝试在系统操作中的多个点（运行时、启动时、中间配置等）拉出电源。多次重复每个测试。

9.  **如果您无法缓解所有电源故障问题，请在系统中加入电池或[超级电容器](http://en.wikipedia.org/wiki/Electric_double-layer_capacitor)**- 请记住，您将需要操作系统中的后台进程来在电量不足时启动正常关机。此外，电池将需要定期测试和更换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-15T01:20:52.860

除了 msemack 的回复，不幸的是，我的评分太低，无法对他的答案与单独的答案发表评论。

断电对文件系统有影响吗？

是的，如果没有采取适当的措施来防止腐败。请参阅以前的答案以了解文件系统选项以帮助缓解。但是，如果您的设备上未正确实施 ATA 刷新/睡眠，您可能会遇到我们所做的情况。在我们的场景中，设备损坏超出了文件系统，并且 fdisk/format 无法恢复设备。

相反，一旦发生损坏，就需要 ATA 安全擦除来恢复设备。为了避免这种情况，我们在断电之前实施了一个 ATA 睡眠命令。这需要 400 毫秒的保持时间来支持 160 毫秒的 ATA 睡眠时间，并为帽在产品生命周期内的退化留有一些空间。

我们的场景中的注释：

*   fdisk/format 无法修复/恢复驱动器。
*   我们的电源安全文件系统的检查磁盘实用程序返回该设备有坏块，但实际上没有。
*   刷新/同步返回成功，很快，很可能没有实现。
*   一旦损坏，dd 无法读取超出第一个分区边界的设备，并在之后返回 i/o 错误。
*   hdparm 用于发出 ATA 安全擦除，作为某些损坏情况的唯一恢复方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T14:19:25.067

对于非日志文件系统的意外关闭可能意味着某些数据（包括目录结构）的损坏。如果缓存中有未保存的数据，或者 FS 正在写入多块更新并且仅写入一些块时发生中断，则会发生这种情况。

日志处理主要解决了这个问题——如果中间有中断，FS 完成的恢复例程或检查和修复操作（通常是隐式地）将文件系统带到一致的状态。然而，这种状态并不总是最新的——即如果内存缓存中有一些数据，即使使用日志，它们也可能丢失。这是因为日志可以使您免于文件系统的损坏，但不会起到任何作用。

直写模式（无写入缓存）降低了数据丢失的可能性，但不能完全解决问题，因为日志将作为缓存工作（在很短的时间内）。

所以不幸的是，备份或数据复制是防止数据丢失的主要方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T13:58:24.590

这完全取决于您使用的文件系统，以及是否可以根据您的项目要求在断电时丢失一些数据。

可以想象使用一种文件系统，该文件系统可以防止无人看管的断电并且能够从部分写入序列中恢复。所以在应用方面，如果你没有绝对需要在关机前写入的critic数据，则不需要特定的断电检测程序。

现在，如果您想为您的项目提供更具体的答案，则必须提供有关您正在使用的文件系统和项目要求的更多信息。

编辑：由于您在关机前要保存重要的应用数据，我认为您自己已经回答了这个问题。确保无人值守关机的唯一方法是使用掉电检测来提醒您的嵌入式设备以及一些硬件电路，以便为设备提供足够的电力以执行关机程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-22T15:49:32.760

如果正在进行写入或文件在关机时打开，则 FAT 文件系统特别容易损坏 - 特别是如果存在未刷新的缓冲操作。在一个项目中，我从事的解决方案是在启动时运行文件系统完整性检查和修复（本质上是 chkdsk/scandsk）。这种策略并没有防止数据丢失，但它确实防止了文件系统变得不可用。

许多供应商为 FAT 提供日志附加组件来解决这个问题。例如，这些包括[Segger](http://www.segger.com/emfile_journaling.html)、[Quadros](http://www.quadros.com/products/file-systems/safe-fat-file-system-1/safe-fat-file-system)和[Micrium](http://embedded-computing.com/news/micrium-ucfs-journaling-feature/)。

无论哪种方式，您的系统通常应该采用 open-write-close 方法来访问文件，或者如果您觉得需要保持文件打开，则采用 open-write-flush 方法。

# ruby - 使用 to_html 时如何避免在 Nokogiri 中漂亮地打印 HTML？

> ID：14460092
> 
> 赞同：7
> 
> 时间：2013-01-22T13:49:31.033
> 
> 标签：ruby, ruby-on-rails-3, nokogiri, pretty-print

我正在使用 Nokogiri 和 Ruby on Rails v2.3.8。

有没有办法在使用 Nokogiri 时避免漂亮的打印`to_html`？

我读到`to_xml`允许使用 来完成此操作`to_xml(:indent => 0)`，但这不适用于`to_html`.

现在我正在使用`gsub`剥离换行符。Nokogiri 是否提供任何选项来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-06T21:03:07.560

我解决了这个使用`.to_html(save_with: 0)`？

```
2.1.0 :001 > require 'nokogiri'
 => true
2.1.0 :002 >  doc = Nokogiri::HTML.fragment('<ul><li><span>hello</span> boom!</li></ul>')
 => #<Nokogiri::HTML::DocumentFragment:0x4e4cbd2 name="#document-fragment" children=[#<Nokogiri::XML::Element:0x4e4c97a name="ul" children=[#<Nokogiri::XML::Element:0x4e4c47a name="li" children=[#<Nokogiri::XML::Element:0x4e4c240 name="span" children=[#<Nokogiri::XML::Text:0x4e4c0a6 "hello">]>, #<Nokogiri::XML::Text:0x4e4c86c " boom!">]>]>]>
2.1.0 :003 > doc.to_html
 => "<ul><li>\n<span>hello</span> boom!</li></ul>"
2.1.0 :004 > doc.to_html(save_with: 0)
 => "<ul><li><span>hello</span> boom!</li></ul>" 
```

测试：nokogiri (1.6.5) + libxml2 2.7.6.dfsg-1ubuntu1 + ruby​​ 2.1.0p0 (2013-12-25 修订版 44422) [i686-linux]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T14:09:51.843

您可以使用`Nokogiri::HTML.fragment()`而不仅仅是`Nokogiri::HTML()`. 当您执行`to_html`时，它不会添加换行符、DOCTYPE 标题或以任何方式使其“漂亮”。

# ios - 具有动态高度的 UITableViewCell 中的 UILabel

> ID：14460093
> 
> 赞同：8
> 
> 时间：2013-01-22T13:49:34.013
> 
> 标签：ios, uitableview, uilabel

我在 UITableView 中实现动态行高时遇到了一些问题 - 但我遇到问题的不是单元格，而是单元格内的 UILabel。

单元格只包含一个 UILabel 来显示文本。我的 tableView:heightForRowAtIndexPath: 通过使用 NSString 的 sizeWithFont: 方法计算将在其中的标签的高度来正确调整每个单元格的大小。

我有一个 UITableViewCell 的子类，它只包含连接在情节提要中的 UILabel 属性。在情节提要中，我已将其行数设置为 0，因此它将根据需要使用尽可能多的行数，并且我已将其 lineBreak 设置为 Word Wrap。

这是我设置单元格的方式：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath
{
    ExpandCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"  forIndexPath:indexPath];

   SomeObject *object = self.tableObjects[index.row];

    cell.myLabel.text = [object cellText];

    [cell.myLabel sizeToFit];

    return cell;
} 
```

当我构建这个时，我得到了我的表格视图，其中单元格的所有大小都适合其内容的正确高度，但标签都是 1 行，只是从单元格的一侧延伸出来。但是，如果我滚动表格，使单元格离开屏幕，然后滚动回它们，它们的标签将被正确调整大小，并且单元格将看起来像我最初的预期。

我还尝试使用与计算行高相同的方法来计算标签框架，并且得到了相同的行为 - 它无法正确绘制，直到它从屏幕上滚动并重新打开。

我找到了两种解决此问题的方法，但都不是可接受的解决方案。

首先，如果在 viewDidAppear: 我在我的 tableview 上调用 reloadData，单元格和标签第一次正确地绘制自己。这不适用于我的情况，因为我将在此表中添加和删除单元格，并且我不想在每次添加单元格时调用 reloadData。

第二种解决方法对我来说似乎很奇怪 - 如果我将字体设置保留为 UILabel 上的默认系统字体 17，则单元格会正确绘制自己。一旦我更改了字体大小，它就会恢复到它没有正确绘制标签的行为，直到它离开屏幕并返回，或者在 tableView 上调用 reloadData。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T22:29:11.610

我最终通过分配/初始化 cellForRowAtIndexPath 中的标签来解决这个问题。我不完全确定为什么这是一个解决方案 - 但似乎我遇到的问题与情节提要如何（或者何时，也许？）在单元格内创建对象有关。如果我在 cellForRowAtIndexPath 的单元格中分配/初始化标签，则所有内容都会正确加载和调整大小。

所以...我目前的解决方法是检查单元格中是否有我的自定义标签。如果没有，我分配/初始化标签并将其放入单元格中。如果它确实有一个，例如在它的一个已出列的单元格中，那么我只需将文本设置在已经存在的标签中。

不确定它是否是最好的解决方案，但它现在可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-27T05:35:07.687

我最终通过取消选中 IB 中的 AutoSizing 复选框解决了这个问题。目前尚不清楚为什么自动布局会导致此问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-17T04:55:30.077

我遇到了同样的问题，我最终通过`[cell layoutIfNeeded]`在返回单元格之前调用来解决它

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath {
ExpandCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"  forIndexPath:indexPath];
SomeObject *object = self.tableObjects[index.row];

cell.myLabel.text = [object cellText];

[cell layoutIfNeeded];

return cell; } 
```

# response - 如何将 struts1 兼容类转换为 strut2 类

> ID：14460097
> 
> 赞同：-1
> 
> 时间：2013-01-22T13:49:54.223
> 
> 标签：response, public

public ActionForward 执行（ActionMapping 映射，ActionForm 表单，HttpServletRequest 请求，HttpServletResponse 响应）{

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T05:24:29.940

公共字符串执行（）{

返回“一些字符串”}

# java - 无法读取 try catch 中的变量

> ID：14460100
> 
> 赞同：3
> 
> 时间：2013-01-22T13:50:08.297
> 
> 标签：java, variables, try-catch

```
String selectedDate = "2012-" + createdMonth
        + "-" + createdDay;

SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-mm-dd");

try {
    Date createdDate = dateFormat.parse(selectedDate);
} catch (ParseException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}

int x = JOptionPane.showOptionDialog(frame,
    "Here is your new booking schedule:\n "
        + "Timeslot: "
        + selectedTimeslot + "\n"
        + "Date: " + createdDate + "\n"
        + "Continue?",
    "Booking Confirmation",
    JOptionPane.YES_NO_OPTION,
    JOptionPane.QUESTION_MESSAGE, null,
    options, options[1]); 
```

问题是 JOptionPane 中的 createdDate 无法解析为变量。这是为什么？我已经尝试了一切，比如在 try catch 之外初始化 Date 对象，但它仍然不起作用。帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T13:54:03.347

因为一旦 try 块完成，变量就超出了范围。将您的 jOptionPane 代码移到 try 块内或将 createDate 声明移到 try 块外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:53:56.133

您在 try-catch 块内定义变量，这是它自己的范围。在 try 块之外，变量“超出范围”，因此稍后会“不存在”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:54:11.110

变量的范围在 try { } 内，因为它是声明它的地方。你可以这样做：

```
Date createDate;
try
{
    createDate = dateFormat.parse(selectedDate);
}
.... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T13:54:14.253

您已经在 try 范围内声明了变量。您使用了“Date createdDate = ....”，这意味着一旦超出 try { .. } 的范围，它将不再存在。确保你声明它超出了尝试的范围，看看它是否有效！

# c# - Fluent NHibernate ToFuture 在测试环境中出错，但在本地开发中没有

> ID：14460101
> 
> 赞同：0
> 
> 时间：2013-01-22T13:50:09.230
> 
> 标签：c#, nhibernate, fluent-nhibernate

我有一些 Fluent NHibernate 代码在我的本地 Visual Studio 上运行良好，但是一旦它被部署到测试服务器，我就会遇到以下错误 - 我以前从未遇到过：

> 无法转换类型为“NHibernate.Impl.DelayedEnumerator `1[Core.FileLoad.File]' to type 'Remotion.Linq.QueryableBase`1[Core.FileLoad.File]”的对象。

导致此错误的代码是：

```
var files = _readRepository
.Query<File>()
.Where(f => f.Id == fileId)
.ToFuture();

_readRepository
.Query<Record>()
.Where(f => f.File.Id == fileId)
.ToFuture();

var file = files.ToList().First(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:24:37.937

糟糕——我复制的代码不是实际代码。一开始也有一个（Querybase）演员表。一旦我删除一切正常。

谢谢

# php - 从模型中返回单个变量值（字符串）并将其填充到视图的文本字段中 - Codeigniter

> ID：14460103
> 
> 赞同：1
> 
> 时间：2013-01-22T13:50:12.373
> 
> 标签：php, codeigniter

我有以下模型、控制器和视图。使用 PHP 销售点 11.3。我正在尝试获取数据库列中的最大值并将其显示在视图中的文本字段中。

模型：

```
function getmax()
{
    $query = $this->db->query("SELECT max(item_id) FROM phppos_items");
    return $query->row();
} 
```

控制器：

```
function view()
{   
    $data['max_id']=$this->Item->getmax();      
    $this->load->view("items/form",$data);
} 
```

看法：

```
<?php 

    echo $max_id; //line 16\. Error Here.

    echo form_input(array(
                        'name'=>'item_number',
                        'id'=>'item_number',
                        'value'=>set_value('item_number',$max_id)) //is this right??
                    );
?> 
```

执行时出现两个错误。

```
A PHP Error was encountered
Severity: 4096
Message: Object of class stdClass could not be converted to string
Filename: items/form.php
Line Number: 16

A PHP Error was encountered
Severity: Warning
Message: htmlspecialchars() expects parameter 1 to be string, object given
Filename: helpers/form_helper.php
Line Number: 625 
```

当用作视图中的下拉列表时，我得到的 max_id 没有任何问题。

```
<?php echo form_dropdown('max_id',$max_id);?> 
```

但我需要在表单文本字段中默认填写此值。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:54:01.590

应该是这样的

模型

```
function getmax()
{
    $query = $this->db->query("SELECT max(item_id) as MaxID FROM phppos_items");
    return $query->row();
} 
```

控制器

```
function view()
{   
    $data['row']=$this->Item->getmax();      
    $this->load->view("items/form",$data);
} 
```

看法

```
$options['name']    =   'item_number';
$options['id']      =   'item_number';
$options['value']   =   set_value('item_number',$row->MaxID);

echo form_input($options); 
```

你看我正在使用行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:53:36.357

在您看来使用：

```
$max_id->max 
```

并在模型中的 sql 中将其更改为：

```
"SELECT max(item_id) AS max FROM phppos_items" 
```

看看这是否有效

# ajax - 来自 $.ajax 的回调在 Jquery Queue 中触发下一个而不被调用

> ID：14460107
> 
> 赞同：1
> 
> 时间：2013-01-22T13:50:19.830
> 
> 标签：ajax, jquery, get, queue

好的，所以示例 $node.queue(function1).queue(function2).queue(function3);

函数 1 正在调用

```
$.ajax({
    type: "GET",
    url: url,
    success: callback,
    dataType: "script",
    // cache: true
}); 
```

作为 function1 的回调，它在刚刚获得的文件中运行一个函数。它检索的文件具有 NEXT 函数。但是，它正在做的是触发下一个，因为它调用函数而不是它刚刚检索到的文件。Function2 然后出错，因为该函数在它之前没有运行。如果您在保证文件已加载后再次运行队列，它工作正常。无论如何要确保回调不会在适当的时间触发下一次。

回调函数看起来像。

```
Apps['apps'].start( next ); // I have tried it without next inside it as well. 
```

# android - Android FragmentTransaction.addToBackStack 混淆

> ID：14460109
> 
> 赞同：19
> 
> 时间：2013-01-22T13:50:31.577
> 
> 标签：android, android-fragments, fragmenttransaction

`FragmentTransaction.replace(id, fragment, tag)`我正在研究 Fragments，对区分和`FragmentTransaction.addToBackStack(tag)`调用有点困惑。假设我当前的片段是**FragmentA**，然后我加载了**FragmentB**。我希望将来，当我需要加载**FragmentA**时，我不必重新加载它。只需加载旧状态的旧版本。我使用了以下代码段：

```
public void loadFragment(Fragment fragmentB, String tag) {
    FragmentManager fm = getSupportFragmentManager();
    View fragmentContainer = findViewById(R.id.fragment_container);

    FragmentTransaction ft = fm.beginTransaction();
    ft.replace(fragmentContainer.getId(), fragmentB, tag);

    ft.addToBackStack(tag);

    ft.commit();
} 
```

现在我很困惑，我应该在哪里添加字符串标签？在`replace()`或`addToBackStack()`在两个电话中？你能解释一下这两个标签位置的区别吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-17T09:39:34.740

> 你能解释一下这两个标签位置的区别吗？

的文档[`addToBackStack`](http://developer.android.com/reference/android/app/FragmentTransaction.html#addToBackStack%28java.lang.String%29)非常清楚：

> 此返回堆栈状态的可选名称，或 null。

而对于[`replace`](http://developer.android.com/reference/android/app/FragmentTransaction.html#replace%28int,%20android.app.Fragment,%20java.lang.String%29)：

> 片段的可选标签名称，稍后使用 FragmentManager.findFragmentByTag(String) 检索片段。

所以这两个参数是独立的，一个标识back stack，另一个标识里面的fragment `Activity's FragmentManager`。

从这个角度来看，您的代码似乎是正确的，只是我不会`fragmentContainer`通过它的 id 搜索视图，而只是使用它的 id 来替换片段。让它更简单：

```
public void loadFragment(Fragment fragmentB, String tag) {
    FragmentManager fm = getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    ft.replace(R.id.fragment_container, fragmentB, tag);

    ft.addToBackStack(null);

    ft.commit();
} 
```

如果您以后不需要识别此返回堆栈，请将 null 传递给`addToBackStack`. 至少我一直在这样做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T14:10:53.087

在此示例中，您不需要添加标签作为标识。做就是了：

```
ft.replace(R.id.fragment_container,fragmentB);
ft.addToBackStack(null);
ft.commit(); 
```

当您要添加没有 UI 的片段时，通常使用标记作为标识。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-03T11:28:48.517

将 null 传递给 addtoBackStack(null) 意味着将片段添加到片段堆栈中，但不添加任何标签，该标签可进一步用于在再次添加之前识别堆栈中的特定片段。

```
 .addToBackStack(null); 
```

但是将 TAG 传递给 addToBackStack 有助于通过 TAG 识别 Fragment 堆栈中的片段。喜欢

```
.addToBackStack(FragmentName.TAG); 
```

现在我们可以在将片段添加到堆栈之前检查片段：

```
 getFragmentManager().findFragmentByTag(SettingsFragment.TAG); 
```

如果尚未添加 Fragment，这将返回 null。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-27T06:31:19.940

传递给的参数`addToBackStack()`可用于检索整个 BackStackEntry 对象，而不仅仅是单个片段。为了设置片段标签，请考虑使用 3 参数版本的 add(int, Fragment, String) 和 replace(int, Fragment, String)

在添加片段之前，您将能够使用以下命令检查该片段是否已经在后台堆栈中：

```
 getFragmentMangager().findFragmentByTag(SettingsFragment.TAG); 
```

`null`如果`Fragment`尚未添加，这将返回。

# java - Android 开发：“无法解决”

> ID：14460115
> 
> 赞同：0
> 
> 时间：2013-01-22T13:50:44.260
> 
> 标签：java, android

希望进入android应用程序开发，所以我现在正在做一些基础教程。

目前只是尝试熟悉基础知识，其中之一是使用 Typeface 类。

```
package org.me.myandroidstuff;

import android.os.Bundle; 
import android.app.Activity;
import android.graphics.Typeface;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class HelloWorldActivity extends Activity implements OnClickListener 
{
    private View mainView;
    private TextView tbox1;
    private Button exitButton;
    @Override
 public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mainView=(View)findViewById(R.id.mainView);
    mainView.setBackgroundColor(getResources().getColor(R.color.silver));

    tbox1 = (TextView)findViewById(R.id.textBox1);
    tbox1.setTypeface(Typeface.MONOSPACE);
}
} 
```

线

```
tbox1 = (TextView)findViewById(R.id.textBox1); 
```

旁边有一个红十字（我正在使用 eclipse），但有错误

```
tbox1 cannot be resolved 
```

自从我使用java以来​​已经有一段时间了，但是我知道下面的代码

1.  创建一个名为 tbox1 的新 TextView 对象
2.  为 tbox1 对象分配在外部 main.xml 中的 TextView 标记的 xml 中指定的 id
3.  那么tbox1对自己执行setTypeFace()方法呢？

显然我在某个地方出错了，有什么想法吗？毫无疑问，一些非常简单的事情......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:59:40.327

首先尝试设置 setContentView(R.layout.yourlayoutfilename); 在 onCreate() 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:04:00.817

您不能将一个错误告知我们而忽略其他错误。看看你的代码。

除了user370305所说的，你还有*其他*问题。即，您的`Activity`，根据合同，`implements OnClickListener`但不会覆盖必要的`onClick(View v)`方法。您必须添加它才能满足合同。

所以你的代码应该是这样的：

```
package org.me.myandroidstuff;

import android.app.Activity;
import android.graphics.Typeface;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class HelloWorldActivity extends Activity implements OnClickListener {
    private View mainView;

    private TextView tbox1;

    private Button exitButton;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mainView=(View)findViewById(R.id.mainView);
        mainView.setBackgroundColor(getResources().getColor(R.color.silver));

        tbox1 = (TextView)findViewById(R.id.textBox1);
        tbox1.setTypeface(Typeface.MONOSPACE);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
    }
} 
```

请记住，在您修复可能导致其他错误被错误报告的所有其他错误之前，您不能谈论错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-26T23:10:10.803

1.) 删除线 super.onCreate(savedInstanceState);

2.) 重新输入 super.onCreate(savedInstanceState);

3.) 清理项目

4.) 构建项目

# android - Facebook喜欢按钮在android中打开空白页面

> ID：14460116
> 
> 赞同：5
> 
> 时间：2013-01-22T13:50:44.113
> 
> 标签：android, facebook

我正在尝试通过我的 android 应用程序在 facebook 上喜欢一个 url。我正在使用android webview来显示like按钮，但是当我点击它时，什么也没有发生，它显示一个空白页面。但是当我在android web浏览器中使用相同的url时，按预期进行并喜欢该链接。

我正在使用以下代码

```
 WebView like_btn = (WebView) findViewById(R.id.WEBView);
 String url = "http://www.facebook.com/plugins/like.php?layout=standard&show_faces=true&width=80&height=50&action=like&colorscheme=light&href=http://google.com";
    like_btn.loadUrl(url);
    like_btn.getSettings().setJavaScriptEnabled(true);
    like_btn.getSettings().setAppCacheEnabled(true);
    like_btn.getSettings().setJavaScriptCanOpenWindowsAutomatically(true); 
```

我做得对还是有其他方法可以实现此功能？SO上有与此问题相关的其他问题，但他们只说如何关闭空白页面。真正的问题是它甚至不“喜欢”该网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:12:38.673

问题是在 Android 中，webview 和浏览器不共享 cookie，所以 webview 不知道用户的 Facebook 身份。在此处查看此答案[Android WebView for Facebook Like Button](https://stackoverflow.com/questions/5108088/android-webview-for-facebook-like-button)

# php - 找不到 resources.json

> ID：14460119
> 
> 赞同：0
> 
> 时间：2013-01-22T13:50:58.243
> 
> 标签：php, restler, swagger

出于某种原因，当我使用 Restler 的 API Explorer（Swagger UI 的一个分支）将我的 API 部署到生产环境时，它在我加载时给了我一个一般的 404 错误：

```
/api/explorer 
```

当我更明确地说：

```
/api/explorer/index.html 
```

它加载页面的框架，然后在标题下方以红色文本报告“404：未找到../resources.json”：

![在此处输入图像描述](../Images/c07b7b51c68744bacd173209f27aaa5a.png)

我相当肯定，当相同的文件在本地工作时，环境会出现一些问题。我还检查了目录中的 .htaccess 文件，`/api/explorer`它看起来对我来说是正确的：

```
DirectoryIndex index.php
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^$ index.html [QSA,L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.html [QSA,L]
</IfModule> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:37:15.647

事实证明，所有问题都归结为 mod_rewrite 问题。我仍然不是 100% 知道为什么这个问题会出现在一个环境中，但在其他环境中却`httpd.conf`没有`.htaccess`。`RewriteBase`哦，好吧，解决方案是使用指令在关于您的基本 url 的重写规则中明确。

在 API 目录中，我现在有以下`.htaccess`文件：

```
DirectoryIndex index.php
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /api
    RewriteRule ^$ index.php [QSA,L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

在 API-Explorer 目录中，我现在有以下内容`.htaccess`：

```
DirectoryIndex index.php
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /api/explorer
    RewriteRule ^$ index.html [QSA,L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.html [QSA,L]
</IfModule> 
```

为了解决这个问题，我遇到的一个非常宝贵的技巧是打开 Apache 的 mod_rewrite 日志记录。

```
# Adding logging for Rewrites
RewriteLog logs/rewrite.log
RewriteLogLevel 2 
```

把它放在任何全局范围的区域中`httpd.conf`；我把它放在已经存在的关于日志记录的条目周围，但如果你更喜欢它，你也可以把它放在最后。此外，有关重写故障排除的基础知识包括（抱歉，如果这是基本的）：

1.  确保您的 httpd.conf 已为您服务 Restler 的目录设置`AllowOverride All`并设置。`Options FollowSymLinks`
2.  您可以将所有配置放入`httpd.conf`并完全避免`.htaccess`文件（这样也更快一些），但如果您这样做，请记住`httpd.conf`绝对 url 引用与`.htaccess`' 的相对引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:20:32.370

您可以在 Restler Github 页面 [https://github.com/Luracast/Restler-API-Explorer#readme查看自述文件](https://github.com/Luracast/Restler-API-Explorer#readme)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:12:14.023

您是否添加了“Luracast\Restler\Resources”类以在 API Root 中创建 resources.json？

在您自己的 index.php 中，addAPIClass 部分应如下所示：

> `$r = new Restler();`
> 
> **`$r->addAPIClass('Luracast\\Restler\\Resources'); //this creates resources.json at API Root`**
> 
> `// ... your own addApiClass`
> 
> `$r->handle();`

它在“使用”下的文档中，但我也很难弄清楚这一点......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-02T10:50:58.170

确保您的 api 根目录中有具有写入权限的缓存目录

# jsf-2 - JSF2 加载包问题

> ID：14460122
> 
> 赞同：0
> 
> 时间：2013-01-22T13:51:04.423
> 
> 标签：jsf-2

尝试使用 Mojarra 标签设计 facelet。在基本模板中尝试使用 loadBundle 标签加载属性文件。运行时出现如下错误

```
Can't find resouce for bundle web/test/properties/sample key en_GB 
```

将属性文件放在下面的位置
`webapp/test/properties/sample.properties`并添加如下

```
 <f:loadBundle basename="test.properties.sample" var="msgs" /> 
```

我也尝试将属性文件放在下面，`webapp/resources/test/properties/sample.properties`但没有希望。

任何人都可以提出一些问题来解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:53:16.457

首先，资源包应该在 src 文件夹中。但是您可以在这里找到有关资源包的详细示例：[http ://www.mkyong.com/jsf2/jsf-2-0-and-resource-bundles-example/](http://www.mkyong.com/jsf2/jsf-2-0-and-resource-bundles-example/)

我希望它有帮助！

# java - Tomcat 应用程序和存储在数据库中的全局变量。管理器应用程序来维护服务器和应用程序

> ID：14460125
> 
> 赞同：0
> 
> 时间：2013-01-22T13:51:10.593
> 
> 标签：java, tomcat, web-applications

寻找关于设置 Tomcat 和应用程序以读取数据库以获取应用程序和全局变量的意见。我们开发了一个应用程序，让开发人员和网络技术人员可以配置 Web 应用程序和服务器。这个想法的出现是因为开发人员不应该关心他们的应用程序在哪些服务器上，并且不需要确保 web.xml 和 context.xml 对于每个环境都是正确的。

我们希望将所有服务器、环境和变量保存在数据库中，我们的管理器应用程序将允许开发人员轻松设置应用程序变量和全局 tomcat 变量。这个应用程序还将允许 Jenkins 获得部署和构建应用程序所需的参数。

有什么想法吗？有没有办法或共享软件可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:01:21.987

就我的看法而言，我认为这对于某些部署来说可能是一个非常好的主意。我已经按照您的建议从事过我们这样做的项目：将一组“环境变量”（我使用引号是因为它们不是真正的 sysEnv 变量，而只是数据库中的数据）存储在数据库中，并且然后对于每个部署环境，我们会让应用程序读取它们并相应地部署配置自身。

我们做到这一点的另一种方法是实际使用系统环境变量。这对 Java 非常有效，因为您有一个通用 API 可以阅读那些无需关心您所使用的操作系统的内容。如果要设置的此类变量的数量不是很大，则执行起来会更快：无需安装数据库，无需创建/更新其架构以存储所述变量，只需制作将配置的特定于操作系统的脚本他们在每个环境中。另一个优点是，通过这种方式，您可以在同一台机器上创建多个用户，每个用户都有一组不同的变量值，并且只需为某个用户部署您的应用程序，以便让它适用于该组变量（有用户喜欢集成、预生产等）。

后者的缺点是当你有大量的变量时。在这种情况下，设置一些数据库实例并为模式创建/更新和数据插入创建（一个通用的）脚本可能比创建庞大的操作系统特定脚本更简单。

# javascript - 在 Sencha Touch 2.1 中按连字符后的第一个字母（如果存在）排序、分组列表

> ID：14460128
> 
> 赞同：0
> 
> 时间：2013-01-22T13:51:24.433
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2, sencha-touch-2.1

我有要在使用 Sencha Touch 2.1 的列表中使用的数据集，其中大多数项目都以前缀开头（例如 P-、S-、CSV- 等）。然而，有些人没有。

前缀与列表的排序和分组无关（因为前缀不是用户要查找的内容）。如果所有项目都有前缀并且所有前缀都是单个字母，我会按第三个字母排序。由于情况并非如此，我真的不知道如何继续。

因此，我想按照以下方式设置条件分组和排序功能：如果 {name} 包含连字符：按第一个连字符后的第一个字母排序/分组，否则：按第一个字母排序

此外，如果字符串的其余部分相同，则某些名称将在没有前缀的情况下相同（例如 P-Albumin、U-Albumin），我希望将带有“Albumin”的行排序为它们的前缀。此外，即使有前缀，一些字符串也是相同的，而另一个字段（例如“年龄”）会有所不同，所以

```
{ name: 'P-Albumin', age: '40 - 50' },
{ name: 'P-Albumin', age: '20 - 30' },
{ name: 'CSV-Albumin', age: '30' },
{ name: 'ASAT', age: '30'}, 
```

将在字母 A 下分组在一起，并进行排序，以便年龄等于 20 - 30 的行在等于 40 - 50 的行之前，而前缀为 CSV- 的行依次排在它们之前，而 ASAT 留在最后。

我很感激我能得到的任何提示、指示、帮助和建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:03:41.260

要按名称排序，您可以在模型中创建一个转换后的字段。

```
Ext.define('MyApp.model.MyModel', {
extend : 'Ext.data.Model',
config : {
    fields : ['name', 'age', 
        {
        name : 'formattedName',
        type : 'string',
        convert : function(v, record) {
            var unformattedName = record.get('name');
            if (unformattedName.indexOf("-") != -1) {
                return unformattedName.substring(unformattedName
                        .indexOf("-"));
            } else {
                return unformattedName;
            }

        }
    }]
}
}); 
```

现在您可以在商店配置中设置排序优先级

```
Ext.define('MyApp.store.MyStore', {
extend : 'Ext.data.Store',
config : {
    model : "MyApp.model.MyModel",
    sorters: 'formattedName, name, age'
    ...
}
}); 
```

商店首先查看没有前缀的格式化名称，然后是包含前缀的完整名称，最后是年龄。

# sql - 如何强制我的数据库模式中的每个数据元素都有一个唯一的名称？

> ID：14460133
> 
> 赞同：0
> 
> 时间：2013-01-22T13:51:37.037
> 
> 标签：sql, naming-conventions

我读过一个原则，该原则声明如下：“每个数据元素在数据库模式中都应该有一个唯一的名称。” (http://bytes.com/topic/sql-server/answers/439341-name-keyword) 你是如何执行的？

通常的技术包括在有意义的列名称之前放置一个三字符的缩写。因此，Employee.Name 变为 Emp_Name。到目前为止，一切都很好。但是，Employer.Name 也应该成为 Emp_Name。所以，我必须想出一些没有意义的神秘的雇主缩写。比方说，“Eml”。而且，随着 Schema 变得越来越大，必须付出越来越多的努力来避免冲突。

在我看来，一个好的折衷方案是始终使用合理的前缀。通过这种方式，我们避免了大部分冲突，而无需使用不直观的缩写词——比如 Employer 的“Eml”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:20:41.003

每个数据元素具有唯一名称的要求不应*被*解释为每个列都具有唯一名称。

特别是外键应该根据它们引用的表具有相同的名称。所以，`CustomerID`无论它发生在哪里，都意味着同样的事情。这将是对表的主键的引用`Customer`。而且我会调用表中的主键`CustomerID`，尽管有时我也认为它只是`ID`。

还有其他一些情况，重复名称是可以的。我创建的所有表的每一行都有元数据，描述了创建该行的时间和人员。这些被分别称为`CreatedAt`和`CreatedBy`。这些在所有表中，但不是逻辑数据模型的一部分。

想到的另一种重复名称的例子是在缓慢变化的维度上的有效和结束日期。通常只调用这些`EffDate`和`EndDate`（或其他）更简单，而不是试图使它们独一无二。

最后，我使用涉及多个临时表的数据流方法进行了大量处理。为了跟踪目的，我非常有意地保持列名相同。

但是，您的问题的答案是使用与表相关的前缀。该表唯一的数据元素可以有一个短前缀，因此我们知道它们是什么。例如，`Cust_Name`和`Addr_City`是客户表中的客户名称和地址表中的城市名称的合理名称。

# android - android在溢出中显示菜单项

> ID：14460135
> 
> 赞同：1
> 
> 时间：2013-01-22T13:51:39.297
> 
> 标签：android, menu, android-actionbar

我只想将菜单项显示为溢出菜单的一项。我可以这样做吗？例如，我希望能够通过单击操作栏中的菜单项从三个片段中转到设置。第一个片段有（连同设置）三个菜单项，第二个有两个，最后一个只有一个。我希望在溢出菜单中的所有三个中都显示“设置”，无论是否有空间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T02:38:22.420

我的解决方案有点破解，但它似乎对我的 g3 用户有用。我创建了一个名为溢出的菜单项，其中溢出可绘制为图标。

然后，在该项目中，我嵌套了一个子菜单，其中包含我想要始终显示为溢出的项目。我只在少数设备上测试过它，但它似乎适用于 nexus 1 和三星 g3，这是我必须解决的两个问题。

```
<item
    android:id="@+id/rest_overflow_menu"
    android:icon="@drawable/abs__ic_menu_moreoverflow_normal_holo_dark"
    android:showAsAction="ifRoom"
    android:title="@string/clear"
    android:visible="true">
    <menu>
        <item
            android:id="@+id/rest_filter_clear"
            android:showAsAction="always"
            android:title="@string/clear"
            android:visible="true"/>
    </menu>
</item> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:02:43.787

好的，对于这些片段中的每一个，您都需要为 3-2-1 菜单项列表设置一个上下文菜单。

[http://developer.android.com/guide/topics/ui/menus.html#context-menu](http://developer.android.com/guide/topics/ui/menus.html#context-menu)

现在，对于您的“设置”菜单项，您需要设置在将其添加到操作栏/菜单时何时显示为操作

```
 MenuItem item= menu.add(R.string.item_id);
    item.setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER); 
```

[http://developer.android.com/reference/android/view/MenuItem.html](http://developer.android.com/reference/android/view/MenuItem.html)

# android - 检查第三方应用程序是否已经打开

> ID：14460136
> 
> 赞同：0
> 
> 时间：2013-01-22T13:51:43.933
> 
> 标签：android

我想检查第三方应用程序是否已经打开。

如果我知道包名，我可以打开第三方应用程序。

像：

```
Intent intent = getPackageManager().getLaunchIntentForPackage("com.thirdparty.package");
startActivity( intent ); 
```

我可以检查之前是否已经打开过？我这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:36:47.523

您可以检查它是否正在运行：

```
ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
List<RunningAppProcessInfo> procs = am.getRunningAppProcesses();
for (RunningAppProcessInfo info : procs) {
    for (String pkg : info.pkgList) {
        if (pkg.equals("com.thirdparty.package")) {
            //running
            break;
        }
    }
} 
```

# actionscript-3 - Air-As3 套接字关闭套接字停止发送信息

> ID：14460137
> 
> 赞同：1
> 
> 时间：2013-01-22T13:51:43.963
> 
> 标签：actionscript-3, sockets, air, ftp

根据我们的测试，如果关闭 DataSocket，似乎不会发送“最近”写入的信息。

我们在 AS3 代码中使用 FTP，并打开一个命令和数据套接字。

每次我们在其上写入数据时，都会正确刷新 dataSocke。

问题是当来自 fileStream 的所有信息都已被读取并写入/刷新到 dataSocket 时，我们关闭了套接字。

在伪代码中：

```
-bytesToWrite = filestream.bytesToRead();
-Datasocket.write(bytesToWrite).
-Datasocket.flush():
-if (filestream.noMoreData)
    DataSocket.close(). 
```

如果我们使用计时器（大约 10 秒）关闭套接字，则正确发送，如果不是，则服务器中的文件不完整。

奇怪的是，在刷新之后，关闭一个套接字，只是关闭一个套接字，SO 有这个信息要发送并决定什么时候发送它，你不能说“嘿传输层，不要发送我刚刚写的你” ：-）。

但似乎实际上 as3 套接字正在做类似的事情。我已经阅读了文档，如果你进行了刷新，它应该由 SO 负责，所以即使在关闭 AS3 套接字之后，如果 SO 有信息要发送，它也应该发送它。

知道为什么会出现这种行为吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:04:41.793

请阅读[**终极 SO_LINGER 页面，或者：为什么我的 tcp 不可靠**](http://blog.netherlabs.nl/articles/2009/01/18/the-ultimate-so_linger-page-or-why-is-my-tcp-not-reliable)，无法理解套接字 API 和内核堆栈级别发生的事情。

然后按照建议，在原始 TCP 字节流之上放置至少一些基本*的应用程序级协议- 告诉接收者它即将接收的数据长度，发送确认所有内容都已读回发送者。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:49:30.777

有趣的是，您可以在关闭套接字之前收听此事件吗：http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/Socket.html#event: [outputProgress](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/Socket.html#event:outputProgress)

# algorithm - 仅在一次操作中获取位串中第一个有效位的位置

> ID：14460140
> 
> 赞同：0
> 
> 时间：2013-01-22T13:51:54.040
> 
> 标签：algorithm, bit

第一个问题是：

是否可以仅在一次操作中获得一串位中第一个活动位的位置？

第二个当然是：怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:05:33.543

我听说在某些处理器中，获取整数的最高位是一条指令，但我无法说出是哪一个。即使有这样的处理器，您也只能获得整数的最高位，而不是任意二进制数，您的问题似乎就是这种情况。

对于较长的位序列，我认为您没有比检查每个位更好的选择，而对于较短的位序列，您可以预先计算最高位值（例如，有一个数组存储所有数字的最高位，最高为 32768）和而不是简单地从该数组中获取一个值以获得所有最多 15 位序列所需的答案。

# php - jQuery UI Datepicker 中的服务器时间

> ID：14460147
> 
> 赞同：0
> 
> 时间：2013-01-22T13:52:37.237
> 
> 标签：php, jquery, jquery-ui-datepicker

如何在 jQuery UI Datepicker 中将突出显示的日期设置为服务器日期？

我正在使用 PHP 进行服务器端编程，并且我有以下代码：

```
<script>

    $(function() {
            $("#from45").datepicker({
                //defaultDate: "+1w",
                changeMonth: true,
                changeYear: true,
                numberOfMonths: 1,

            });
    });
</script> 
```

# perl - Perl 获得去年每个月的月初，但增加了 GMT 小时

> ID：14460148
> 
> 赞同：1
> 
> 时间：2013-01-22T13:52:37.737
> 
> 标签：perl, datetime

我正在存储从月初开始的前 12 个月的日期集合。所以我有：

```
my @t = localtime time();
my $m = $t[4];
my $y = $t[5];

foreach my $date (keys %$dates_ref) {
    $m -= $comparison{$date}; # a hash of numbers to go back the correct number of months
    $dates_ref->{$date} = mktime(0,0,0,1,$m,$y);
} 
```

我最终得到了一堆这样的日期：本月：`1356998400`即：

`Tue Jan 01 2013 00:00:00 GMT+0000 (GMT Standard Time)`

过去 12 个月：

```
1325376000 - Sun Jan 01 2012 00:00:00 GMT+0000 (GMT Standard Time)
1328054400 - Wed Feb 01 2012 00:00:00 GMT+0000 (GMT Standard Time)
1330560000 - Thu Mar 01 2012 00:00:00 GMT+0000 (GMT Standard Time)
1333238400 - Sun Apr 01 2012 01:00:00 GMT+0100 (GMT Daylight Time)
1335830400 - Tue May 01 2012 01:00:00 GMT+0100 (GMT Daylight Time)
1338508800 - Fri Jun 01 2012 01:00:00 GMT+0100 (GMT Daylight Time)
1341100800 - Sun Jul 01 2012 01:00:00 GMT+0100 (GMT Daylight Time)
1343779200 - Wed Aug 01 2012 01:00:00 GMT+0100 (GMT Daylight Time)
1346457600 - Sat Sep 01 2012 01:00:00 GMT+0100 (GMT Daylight Time)
1349049600 - Mon Oct 01 2012 01:00:00 GMT+0100 (GMT Daylight Time)
1351728000 - Thu Nov 01 2012 00:00:00 GMT+0000 (GMT Standard Time)
1354320000 - Sat Dec 01 2012 00:00:00 GMT+0000 (GMT Standard Time) 
```

如您所见，4 月至 10 月增加了 GMT 时间。让它*不*这样做的最好方法是什么，所以它只是从 开始`00:00`？

例如`1333238400`会变成`1333234800`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:06:11.770

您应该使用[DateTime](http://search.cpan.org/perldoc?DateTime)模块，并正确处理时区。这是一个例子：

```
 my $dt = DateTime->new(
      year      => 2000,
      month     => 5,
      day       => 10,
      hour      => 15,
      minute    => 15,
      time_zone => 'America/Los_Angeles',
  );

  print $dt->hour; # prints 15

  $dt->set_time_zone( 'America/Chicago' );

  print $dt->hour; # prints 17 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:56:29.377

如果您能够安装 CPAN 模块，我建议您使用 Date::Calc - 它可以让您转换为 GMT 而不是您当地的时区，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:13:10.993

在脚本的第一行使用 gmtime 而不是 localtime

# android - IndexOutOfBoundsExecption 错误

> ID：14460149
> 
> 赞同：0
> 
> 时间：2013-01-22T13:52:36.987
> 
> 标签：android, arraylist

在我的程序中，我有一个 SQLite，它在我的应用程序中存储谷歌地图的 GPS 坐标。我尝试检索纬度和经度并将它们存储在 arrayList 中，但是当我运行程序时程序会抛出 indexOutOfBoundsException。我隐约明白，这意味着当我尝试从中检索项目时，arrayList 中没有任何内容，但如果我错了，请纠正我。

*日志猫*

```
01-22 14:39:54.750: E/AndroidRuntime(21639): FATAL EXCEPTION: main
01-22 14:39:54.750: E/AndroidRuntime(21639): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.androidbasic12/com.example.androidbasic12.map}: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
01-22 14:39:54.750: E/AndroidRuntime(21639):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at android.os.Looper.loop(Looper.java:137)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at android.app.ActivityThread.main(ActivityThread.java:4511)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at java.lang.reflect.Method.invokeNative(Native Method)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at java.lang.reflect.Method.invoke(Method.java:511)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at dalvik.system.NativeStart.main(Native Method)
01-22 14:39:54.750: E/AndroidRuntime(21639): Caused by: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
01-22 14:39:54.750: E/AndroidRuntime(21639):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at java.util.ArrayList.get(ArrayList.java:304)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at com.example.androidbasic12.map.onCreate(map.java:58)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at  android.app.Activity.performCreate(Activity.java:4470)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
01-22 14:39:54.750: E/AndroidRuntime(21639):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
01-22 14:39:54.750: E/AndroidRuntime(21639):    ... 11 more 
```

*“DatabaseHandler.class”类中的原始查询*

```
 public Cursor getLatLng(){
    SQLiteDatabase db = this.getReadableDatabase();
    String query = ("SELECT * FROM " + TABLE_CARCOORD + " WHERE name = " + CAR_KEY_NAME);
    Cursor cursor = db.rawQuery(query, null);
    return cursor;

} 
```

*类“UserFunction.class”*

```
 public ArrayList<String> getCoords(Context context, String lat, String lng) {
    DatabaseHandler db = new DatabaseHandler(context);
    Cursor cursor = db.getLatLng();
    ArrayList<String> cordarr = new ArrayList<String>();
    if (cursor.moveToFirst()){
        lat = cursor.getString(cursor.getColumnIndex("lat"));
        lng = cursor.getString(cursor.getColumnIndex("lng"));
        cordarr.add(lat);
        cordarr.add(lng);
    }
cursor.close();
db.close();
return cordarr;
} 
```

*地图类*

```
 UserFunctions userFunc = new UserFunctions();
    ArrayList<String> cordarr = new ArrayList<String>();
    cordarr = userFunc.getCoords(getApplicationContext(), Lat1, Lng1);
    Lat1 = cordarr.get(0);
    Lng1 = cordarr.get(1);
    lat = goDouble(Lat1);
    lng  = goDouble(Lng1);
    LatLng sala = new LatLng(lat, lng); 
```

*接受字符串并转换为双精度以在 googlemaps 中使用的函数*

```
 public Double goDouble(String Latlng) {
    Double goDouble = Double.parseDouble(Latlng);
    return goDouble;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:57:56.873

你写了：

```
 if (cursor.moveToFirst()){
           lat = cursor.getString(cursor.getColumnIndex("lat"));
           lng = cursor.getString(cursor.getColumnIndex("lng"));
           cordarr.add(lat);
           cordarr.add(lng);
     } 
```

但是您必须将光标安全地设置到第一个位置，或者如果光标首先打开，您真的只想获取数据吗？如果没有，请致电

```
 cursor.moveToFirst(); 
```

然后获取您的数据，但在 if 子句中：

```
 if (cursor.moveToFirst()){
    lat = cursor.getString(cursor.getColumnIndex("lat"));
    lng = cursor.getString(cursor.getColumnIndex("lng"));
    cordarr.add(lat);
    cordarr.add(lng);

     cursor.moveToNext(); //call this, so the cursor goes to the next
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:03:05.187

尝试迭代光标。

```
if(cursor!=null)
 {
    cursor.moveToFirst();
    do {
    lat = cursor.getString(cursor.getColumnIndex("lat"));
    lng = cursor.getString(cursor.getColumnIndex("lng"));
    cordarr.add(lat);
    cordarr.add(lng);
   }while(cursor.moveToNext()); //It will move to next value.
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:08:38.343

你应该在这里有空检查，

```
 public ArrayList<String> getCoords(Context context, String lat, String lng) {
        DatabaseHandler db = new DatabaseHandler(context);
        Cursor cursor = db.getLatLng();
        if (cursor !null && cursor.moveToFirst()){
              ArrayList<String> cordarr = new ArrayList<String>();
            lat = cursor.getString(cursor.getColumnIndex("lat"));
            lng = cursor.getString(cursor.getColumnIndex("lng"));
            cordarr.add(lat);
            cordarr.add(lng);
            return cordarr;
        }
    cursor.close();
    db.close();
    return null;
    } 
```

在这里，

```
 UserFunctions userFunc = new UserFunctions();
    ArrayList<String> cordarr = new ArrayList<String>();
    cordarr = userFunc.getCoords(getApplicationContext(), Lat1, Lng1);
    if(cordarr != null && cordarr.size() > 1) {
    Log.d("LOG","have got lat long to show.")
    Lat1 = cordarr.get(0);
    Lng1 = cordarr.get(1);
    lat = goDouble(Lat1);
    lng  = goDouble(Lng1);
    LatLng sala = new LatLng(lat, lng); 
    } else {
        Log.d("LOG","no lat long found")
    } 
```

你能试试这个，让我看看你得到了什么日志

# android - MediaMetadataRetriever .getFrameAtTime(long, option) 崩溃

> ID：14460151
> 
> 赞同：5
> 
> 时间：2013-01-22T13:52:41.203
> 
> 标签：android, eclipse

我有一个循环，我试图每 1/10 秒从视频中提取一帧。但是在 19 帧（视频的 1.9 秒）之后，我在 Logcat 上收到以下错误：

```
01-22 11:59:15.498: E/OMXCodec(38): [OMX.google.h264.decoder] Timed out waiting for output buffers: 0/0
01-22 11:59:15.598: E/MetadataRetrieverClient(38): failed to capture a video frame
01-22 11:59:15.598: E/MediaMetadataRetrieverJNI(572): getFrameAtTime: videoFrame is a NULL pointer
01-22 11:59:15.598: D/AndroidRuntime(572): Shutting down VM
01-22 11:59:15.598: W/dalvikvm(572): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
01-22 11:59:15.608: E/AndroidRuntime(572): FATAL EXCEPTION: main
01-22 11:59:15.608: E/AndroidRuntime(572): java.lang.NullPointerException 
```

这是我正在使用的代码：

```
File videoPath = new File(Environment.getExternalStorageDirectory(), "test.mp4");
String video = videoPath.getAbsolutePath();
MediaMetadataRetriever vidFile = new MediaMetadataRetriever();
vidFile.setDataSource(video);

//Create folder to store images
String storageFolder = "/Storage";
String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
File newFolder = new File(extStorageDirectory + storageFolder);
newFolder.mkdir();

String value = vidFile.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION);
long vidLength = (Long.parseLong(value)/1000); //Returns milliseconds - divide by 1,000
//Video length = 30037ms - result is 30.037s

for(int i = 0; i <= 10*vidLength; i++, image++) //10*vidLength since I'm getting frames every 1/10th sec
{
    Bitmap bmp = vidFile.getFrameAtTime(100000*i, MediaMetadataRetriever.OPTION_CLOSEST);
    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    bmp.compress(Bitmap.CompressFormat.PNG, 100, bytes);
    String imagename = String.format(Locale.ENGLISH, "%03d", image);
    File f = new File(Environment.getExternalStorageDirectory() + storageFolder + File.separator + imagename + ".png");
    f.createNewFile();
    FileOutputStream fo = new FileOutputStream(f);
    fo.write(bytes.toByteArray());
    fo.close();

    //Don't seem to make a difference one way or the other
    bytes.flush(); 
    bytes.close();  
} 
```

就像我说的，它应该得到大约 300 帧，但在崩溃之前只能提取 19 帧，但我不明白为什么会发生 NULL 指针错误。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-04T18:08:31.613

您是否尝试过使用[FFmpegMediaMetadataRetriever](https://github.com/wseemann/FFmpegMediaMetadataRetriever) lib 而不是 MediaMetadataRetriever？

此外，从您的 logcat 上的这一行：

> 01-22 11:59:15.598: E/MediaMetadataRetrieverJNI(572): getFrameAtTime: videoFrame 是一个空指针

我会尝试让它记录 for 循环的每一行，例如 Log.d("MyApp","Param of getFrameAtTime"+(100000*i));

我知道您已经知道哪个帧是问题（19/20），但只是想看看该变量在成为空指针之前会发生什么（也许您可以使用 Long i 而不是 int i？）。

另外，您是否尝试过上述建议来使用 MediaMetadataRetriever.OPTION_CLOSEST_SYNC 而不是 OPTION_CLOSEST？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:31:23.200

我在运行 Android 4.0 的 Evo V 上得到了类似的行为：我的测试视频的前六帧转换得很好，然后我开始返回空指针，即使我构造了一个新的 MediaMetadataRetriever 再试一次。

我的日志还显示：“MediaMetadataRetriever 服务器死了！”

有一种方法可以避免此问题，并且根据您尝试执行的操作，它可能是合适的：传递 MediaMetadataRetriever.OPTION_CLOSEST_SYNC 而不是 OPTION_CLOSEST。

在我的测试中，当我使用 OPTION_CLOSEST_SYNC 时，崩溃总是会消失。

这对我的应用程序没有太大帮助，因为我确实需要非常接近的帧，而不仅仅是指定的“同步帧”。但它可能更容易被你接受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T13:05:49.950

我发现您的错误是除法而不是乘法。将毫转换为微需要乘以 1000，而您正在除法...

使用 MediaPlayer 获取视频的时长..

```
 file = new File(Environment.getExternalStorageDirectory(), "myvideo.mp4");
 MediaPlayer mp = MediaPlayer.create(MainActivity.this,Uri.parse(file.getAbsolutePath()));
            int duration = mp.getDuration();// it gives duration in milliseconds 
            mp.release(); 
```

乘以`duration*1000`

循环直到

```
 for(int i=0 ;i <5; i++)
                {
                  if(looper < duration *1000)
                  {
                      ImageView imageView = (ImageView)findViewById(ids_of_images[i]);

imageView.setImageBitmap(retriever.getFrameAtTime(looper,MediaMetadataRetriever.OPTION_CLOSEST));

                        looper +=1000000;  
                  }

                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-17T02:52:39.933

报告了一个 OPTION_CLOSEST 错误，请参阅[https://code.google.com/p/android/issues/detail?id=193194](https://code.google.com/p/android/issues/detail?id=193194)

Google 于 2016 年 8 月 31 日做出的回应

您好，开发团队已经修复了您报告的问题，它将在未来的版本中提供感谢状态：FutureRelease

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-16T07:03:33.347

这在 android 错误数据库中报告为[MediaMetadataRetriever.getFrameAtTime() 失败/崩溃](https://code.google.com/p/android/issues/detail?id=24300)。此问题已过时关闭。我在运行 Android 4.2.2 的 Tesco HUDL 1.0 (HT7S3) 上遇到了它。

添加以下重试允许我的代码工作。

```
 if( bmp == null){
            mMediaData = new MediaMetadataRetriever();
            mMediaData.setDataSource( /* same parameters as before */ );
            bmp = mMediaData.getFrameAtTime( /* same parameters */ );
        } 
```

在我的测试中，我只在早期版本的 Android 上看到过这个问题，并且从错误的“过时”关闭开始，它在更新的版本中得到了修复。

因此，在后续重新查询之前重新创建媒体检索器的解决方法可能是最好的解决方法。

在我的设备上重新构建 mediaRetriever 大约需要 3 秒，获取位图需要 0.1 秒，所以我真的负担不起每次都构建它。

# linux - 如何在 Linux shell 中查找几种类型的文件？

> ID：14460152
> 
> 赞同：-1
> 
> 时间：2013-01-22T13:52:45.257
> 
> 标签：linux

当我尝试查找`.c`文件时，我可以使用以下命令：

```
find . -name *.c 
```

至于`.h`文件：

```
find . -name *h 
```

那么如何同时找到它们呢？我知道一种解决方案：

```
find . -namd *.c && find . -name *.h 
```

有没有更好的答案？

**进一步**：事实上我需要找到 .c .h .p .hpp .cpp .p 文件。那怎么办？

```
find . -name '*.[chcpphppp]' 
```

上面一个好像不对？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T13:54:20.760

你可以做

```
find . -name '*.c' -o -name '*.h' 
```

或更好

```
find . -name '*.[ch]' 
```

但你真的应该阅读文档`find`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:55:17.493

尝试这个

```
find . -name "*.[ch]" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T13:55:24.560

试试这个（`-o`是“或”）：

```
find . -name '*.c' -o -name '*.h' 
```

或者

```
find . -name '*.[hc]' 
```

# android - WebView loadDataWithBaseUrl - android 4.0.3 中的奇怪问题

> ID：14460158
> 
> 赞同：13
> 
> 时间：2013-01-22T13:53:06.163
> 
> 标签：android, webview, android-webview, android-4.0-ice-cream-sandwich

在我的项目中，有两个 WebView，我正在交替切换这些 WebView，以便在加载我的 url 时获得流畅的动画。当我使用 Webview.loadUrl() 方法时，它在所有设备上都可以正常工作。但是当我使用与 loadDataWithBaseUrl() 相同的代码时，它在 4.0.3 中不起作用，但在 2.2、2.3、4.0.4、4.1 设备中运行良好。

这是从 WebKit 跳出来的错误吗？我尝试了很多方法来完成这项工作，但没有出路。我对此感到非常沮丧和困惑。

如果有人可以向我展示完成这项工作的正确方法，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T11:49:18.083

您可以尝试使用 webview 添加这些属性-

```
mWebView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

并且可以使用动画，因为它对我来说效果很好，比如-

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
  <translate 

      android:interpolator="@android:anim/cycle_interpolator"
      android:fromXDelta="100%p" android:toXDelta="0" android:duration="1000"/>
</set> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:51:44.960

4.0.3 与 WebView 动画似乎存在一个错误。为我解决的问题是从动画中删除 alpha。基本翻译动画表现正确。

# ef-code-first - EntityFramework 5 自引用一对零或一实体

> ID：14460160
> 
> 赞同：1
> 
> 时间：2013-01-22T13:53:13.353
> 
> 标签：ef-code-first, entity-framework-5, entity-framework-migrations, self-reference

我对自引用代码优先实体有疑问。我们的代码是这样的：

```
public class Contact
{
   [Key]
   public Guid Id { get; set; }

   [ForeignKey("AssignedCompany")]
   public Guid? AssignedCompanyId { get; set; }

   [InverseProperty("AssignedContacts")]
   public virtual Contact AssignedCompany { get; set; }
   [InverseProperty("AssignedCompany")]
   public virtual ICollection<Contact> AssignedContacts { get; set; }
} 
```

如果我想启动 Add-Migration (EF 5)，我收到以下错误消息，表明 Add-Migration 在 Contact 和 Contact 之间找不到 Principalend。

我做错了什么？有人知道答案吗？

非常感谢。亲切的问候克里斯蒂安·马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:16:57.960

只有在类之间有多个关系时才应使用 InverseProperty 属性。您可以通过删除所有 InverseProperty 属性来解决您的问题。

这样做，它会起作用：

```
[ForeignKey("AssignedCompany")]
public Guid? AssignedCompanyId { get; set; }

public virtual Contact AssignedCompany { get; set; }

public virtual ICollection<Contact> AssignedContacts { get; set; } 
```

# feed - Neo4j Cypher 查询以获取用户提要

> ID：14460165
> 
> 赞同：1
> 
> 时间：2013-01-22T13:53:27.927
> 
> 标签：feed, neo4j, social, cypher

假设我的项目是 Facebook。我想显示一个包含我的状态更新和我朋友的状态更新的提要。

这是关系；

*   用户知道用户
*   用户 UPDATES_STATUS 状态

这就是我获取朋友状态更新的方式；

```
START me = node(1) MATCH me-[:KNOWS]-()-[:UPDATES_STATUS]->friendsStatusUpdates RETURN friendsStatusUpdates 
```

这就是我获取自己状态更新的方式；

```
START me = node(1) MATCH me-[:UPDATES_STATUS]->myStatusUpdates RETURN myStatusUpdates 
```

两个查询都可以正常工作，但我需要一个结合这两个查询的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:53:10.647

这是我从[Google Groups](https://groups.google.com/forum/#!topic/neo4j/2nEp8i9J2jk)得到的答案；

```
START me = node(1) MATCH me-[:KNOWS*0..1]-()-[:UPDATES_STATUS]->statusUpdate RETURN DISTINCT statusUpdate 
```

我唯一要做的就是`*0..1`在关系中添加深度指示器，以获得 0 或 1 级深度结果。

编辑：我必须添加`DISTINCT`，因为没有它查询包括 0 级节点 2 次，这会导致重复。

* * *

使用语句返回相同结果的替代查询`WITH`；

```
START me = node(1) 
MATCH me-[:KNOWS*0..1]-friend
WITH DISTINCT friend
MATCH friend-[:UPDATES_STATUS]->statusUpdate 
RETURN DISTINCT statusUpdate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:18:14.250

在用户节点与自身之间创建一个自己的关系，而不是查询是 START me = node(1) MATCH me-[:KNOWS|HIMSELF]-()-[:UPDATES_STATUS]->friendsStatusUpdates RETURN friendsStatusUpdates

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:26:09.447

[http://docs.neo4j.org/chunked/milestone/introduction-pattern.html](http://docs.neo4j.org/chunked/milestone/introduction-pattern.html)

```
START me = node(1) 
MATCH me-[:UPDATES_STATUS*1..2|KNOWS]-myStatusUpdates 
RETURN myStatusUpdates 
```

如果`*1..2`无法使用`|`命令，请执行以下操作：

```
START me = node(1) 
MATCH friendsStatusUpdates2-[?:UPDATES_STATUS]-me-[:KNOWS]-()-[:UPDATES_STATUS]->friendsStatusUpdates 
RETURN distinct myStatusUpdates,friendsStatusUpdates2 
```

只需`RETURN`使用一些聚合函数编辑语句，这样您就可以每行获得一个状态

# c# - XMLDocument“找不到注册表项”错误 - C#

> ID：14460166
> 
> 赞同：0
> 
> 时间：2013-01-22T13:53:27.703
> 
> 标签：c#, xml-parsing, xmldocument

当我尝试使用 C# 和 XMLDocument 解析示例 XML 文件时，它会抛出 IO.IOException 并说它没有找到注册表项。您可以在此处找到示例 XML 文件。（这是我在 InfoFileURL 中提供该工具的链接。有人解决了这个问题吗？

```
xmlDoc.Load(InfoFileURL);

if (xmlDoc.SelectSingleNode("Program/Files").HasChildNodes) // IOException
{
     foreach (XmlNode node in xmlDoc.SelectNodes("Program/Files/File"))
     {
         if (int.Parse(node.Attributes["Date"].Value) > VersionOld)
         {
              NewFile newfile = new NewFile();
              newfile.FilePath = node.Attributes["Path"].Value;
              newfile.Hash = node.Attributes["Hash"].Value;
              newfile.Date = int.Parse(node.Attributes["Date"].Value);
              newfile.WebPath = node.InnerText;

              NewFiles.Add(newfile);
          }
     }
}

---------------------------------------------------------------------------------
Exception Detail:

  System.IO.IOException ist aufgetreten.
  HResult=2
  Message=Der angegebene Registrierungsschlüssel ist nicht vorhanden.
  Source=mscorlib
  StackTrace:
       bei Microsoft.Win32.RegistryKey.Win32Error(Int32 errorCode, String str)
 InnerException: 

---------------------------------------------------------------------------------
XML-File:
http://neolegends.tk/programs/test/updates.xml

<Program>
   <Changes>
       <Change Date="20130111">Heyo Mofo</Change>
   </Changes>
   <Files>
       <File Date="20130111" Hash="977d6a6c1028c1dff3b0a1a7e1604d033b7a14a7" Path="ni94512_1_DB.7z">http://neolegends.tk/programs/test/data/ni94512_1_DB.7z</File>
       <File Date="20130111" Hash="ef520d82094153930247b0d75144b77bee6e40ea" Path="Osmos.sta">http://neolegends.tk/programs/test/data/Osmos.sta</File>
   </Files>
   <Deletions>
       <Deletion Date="20130111">HITMÄN.mp3</Deletion>
   </Deletions>
</Program> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:15:40.083

在 XmlDocument 中选择时不应抛出 IOException。线

```
if (xmlDoc.SelectSingleNode("Program/Files").HasChildNodes) 
```

是不必要的，因为如果程序/文件不存在，foreach 将不会做任何事情。此外，如果 xmlDoc.SelectSingleNode("Program/Files") 返回 null，您将在 HasChildNodes 属性上获得 null 引用异常。

尝试在 xpath 前加上“/”：

```
foreach (XmlNode node in xmlDoc.SelectNodes("/Program/Files/File")) 
```

这将从根节点中选择。或以“//”为前缀以选择 xml 中的任何位置：

```
foreach (XmlNode node in xmlDoc.SelectNodes("//Program/Files/File")) 
```

编辑：您的代码不应访问注册表。您确定上面显示的代码引发了异常吗？您可以使用[Process Monitor](http://technet.microsoft.com/en-gb/sysinternals/bb896645.aspx)查看正在访问哪些注册表项以及何时访问（通过单步执行代码并查看 Process Monitor 报告的注册表访问权限）。

# java - 我想要项目路径中 web 内容目录中的所有文件和文件夹，它不能通过简单地在 eclipse 中将它们复制一层来工作

> ID：14460171
> 
> 赞同：0
> 
> 时间：2013-01-22T13:53:35.157
> 
> 标签：java, eclipse

在 Eclipse 中，我创建动态 Web 项目时的文件夹结构是

.: 构建 src WebContent

./build: 类

./build/类：

./src:

./WebContent: index.html META-INF 脚本 WEB-INF

./WebContent/META-INF: MANIFEST.MF

./WebContent/scripts: jquery-1.7.1.js

./WebContent/WEB-INF: lib web.xml

./WebContent/WEB-INF/lib:

可以看到，有WebContent目录，里面有web-inf等文件，如果我把WebContent目录的所有目录和文件都移到了上一级，就不行了，怎么在eclipse中运行index.html

-> 将WebContent目录的所有目录和文件移动上一级后的目录结构：

.: 构建 index.html META-INF 脚本 src WEB-INF

./build: 类

./build/类：

./META-INF: 清单.MF

./scripts: jquery-1.7.1.js

./src:

./WEB-INF: 库 web.xml

./WEB-INF/lib:

所以，现在我只需要转到“http://localhost:8080/Sample”并且应该正确转到 index.html 需要进行哪些路径更改才能使其运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:03:00.227

右键单击 Eclipse 中的项目并从对话框中选择“属性”，选择“部署程序集”。您可以从那里更改内容路径。

# sql - 计算两列sql之间的差异

> ID：14460173
> 
> 赞同：1
> 
> 时间：2013-01-22T13:53:39.487
> 
> 标签：sql, sql-server, sql-server-2008

在我的 SQL 查询中，我正在使用`CASE WHEN THEN ELSE END`条件计算列值。现在我想找到计算列和普通列之间的区别

我的查询

```
SELECT  T.Ticket [Ticket],
        TT.TicketType [Ticket Type],
        T.Dependency [Dependency],
        CASE 
                WHEN (
                        SELECT  TOP 1 f1.UpdatedOn
                        FROM    TicketTypeFollowUp AS f1
                        WHERE   f1.UpdatedOn < T.UpdatedOn
                                AND f1.Ticket = 61423
                        ORDER   BY f1.UpdatedOn DESC
                    ) IS NULL
                THEN Ticket.TicketRaisedOn
                ELSE (
                        SELECT  TOP 1 f1.UpdatedOn
                        FROM    TicketTypeFollowUp AS f1
                        WHERE   f1.UpdatedOn < T.UpdatedOn
                                AND f1.Ticket = 61423
                        ORDER   BY f1.UpdatedOn DESC
                    )
                END [Start Date],
        T.UpdatedOn [End Date],
        L.EmpName [Updated By]
FROM    dbo.TicketTypeFollowUp T
        LEFT JOIN dbo.Ticket
                ON T.Ticket = Ticket.Code
        LEFT JOIN dbo.TicketType TT
                ON T.TicketType = TT.Code
        LEFT JOIN LoginUser L
                ON T.UpdatedBy = L.Code
WHERE Ticket = 61423 
```

查询结果

```
Ticket  Type    Dependency  Start Date              End Date                Updated By
61423   FLM     AGS         2013-01-22 15:50:08.757 2013-01-22 18:35:50.893 Kedar S 
```

**我想要一个显示`End Time - Start Time`**我使用过的列，`CASE`因此我无法计算差异。

数据库是 SQL SERVER 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:56:15.423

```
with lastUpdate(ticket, lastUpdate) as (
        select  ticket,
                max(updateOn)
        from    TicketTypeFollowUp
        group by ticket)
SELECT  T.Ticket [Ticket],
        TT.TicketType [Ticket Type],
        T.Dependency [Dependency],
        coalesce(lastUpdate, ticketRaisedOn) [Start Date],
        T.UpdatedOn [End Date],
        datediff(mi, coalesce(lastUpdate, ticketRaisedOn), T.UpdatedOn) durationMins,
        L.EmpName [Updated By]
FROM    dbo.TicketTypeFollowUp T
        LEFT JOIN dbo.Ticket
                ON T.Ticket = Ticket.Code
        LEFT JOIN dbo.TicketType TT
                ON T.TicketType = TT.Code
        LEFT JOIN LoginUser L
                ON T.UpdatedBy = L.Code
        left join lastUpdate lu on t.ticket = lu.ticket
WHERE Ticket = 61423 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:01:19.027

您可以将当前查询用作 CTE 或派生表。以下是使用 CTE 的示例：

```
;WITH CTE AS
(
    -- your current query here
)
SELECT *, DATEDIFF(MINUTE,[Start Date],[End Date]) [End Time - Start Time]
FROM CTE 
```

# c# - C# tcpclient 或 udp 套接字速率非常慢

> ID：14460177
> 
> 赞同：0
> 
> 时间：2013-01-22T13:53:55.857
> 
> 标签：c#, networking, tcpclient

而我的网络支持 MBS。当我尝试发送 1000 个数据包时，每个 800 字节大约需要 24 秒？为什么需要这么长时间？我也尝试过 UDP，但也没有更好。有什么参数可以改变吗？这种缓慢的速度有什么原因吗？

我正在使用的代码：

```
const string SERVER_IP = "10.10.10.34";
const int SERVER_PORT = 1234;

static void Main(string[] args)
{
    TcpClient client = new TcpClient();
    client.Connect(SERVER_IP, SERVER_PORT);       
    using (Stream stream = client.GetStream())
    {
        while (true)
        {

            byte[] data = new byte[800];
           DateTime start=DateTime.Now;
           for(int i=0;i<1000;i++)
            {

            stream.Write(data, 0, data.Length);
            }
            DateTime end=DateTime.Now;
            var duration = end-start;
        }
    }

    client.Close();
} 
```

编辑注意：数据包的大小是 800 字节（而不是开头发布的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:57:00.053

第一站... [wireshark](http://www.wireshark.org/)，可以通过网络进行很多事情，最好看一下踪迹。

# javascript - 使用 .indexOf() 找不到数组索引

> ID：14460186
> 
> 赞同：4
> 
> 时间：2013-01-22T13:54:12.987
> 
> 标签：javascript, html, arrays, parsing, textbox

我正在编写一个程序，该程序从文本框中获取所有文本，将其解析为删除空格的数组，然后在数组中搜索预期值。

我可以测试它并让程序成功获取文本框中的文本并将其解析到数组中，但是当我尝试在数组中查找预期值时，它会引发错误。错误是“对象不支持此属性或方法”。

JavaScript：

```
function generateOutputfvoc()
{
    var inputArr = document.getElementById("inputBox").value.split(/[\s]/);
    var nameLoc = inputArr.indexOf("Name");
    document.getElementById("contactNameOutput").innerHTML = nameLoc;
} 
```

HTML 片段：

```
<p>Paste Text Here</p>
<textarea rows='8' cols='152' id='inputBox' placeholder="Copy text and paste here" wrap="off"></textarea>
<form><input type='button' onclick='generateOutputfvoc()' value='Generate Output' /></form>
<p>Contact Name: <b id='contactNameOutput'></b></p> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:01:28.617

您可以根据此页面使用 javascript 的原型功能添加 indexOf()：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

# python - Python尝试/除了不工作

> ID：14460189
> 
> 赞同：11
> 
> 时间：2013-01-22T13:54:25.267
> 
> 标签：python, try-catch, python-2.4

试图让`try/except`语句正常工作但遇到问题。此代码将获取一个 txt 文件并将位于第 0 行位置的文件复制到第 1 行的位置。它可以工作但是如果我将其中一个路径更改为无效的路径，它会生成一个错误`ftplib.error_perm`但是除了命令没有拾取并且一切停止。我究竟做错了什么？蟒蛇2.4

```
import csv
import operator
import sys
import os
import shutil
import logging
import ftplib
import tldftp

def docopy(filename):
        ftp = tldftp.dev()
        inf = csv.reader(open(filename,'r'))
        sortedlist = sorted(inf, key=operator.itemgetter(2), reverse=True)
        for row in sortedlist:
                src = row[0]
                dst = row[1]
                tldftp.textXfer(ftp, "RETR " + src, dst)

def hmm(haha):
    result = docopy(haha);
    try:
        it = iter(result)
    except ftplib.error_perm:
        print "Error Getting File" 

if __name__ == "__main__":
        c = sys.argv[1]
        if (c == ''):
                raise Exception, "missing first parameter - row"
        hmm(c) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T13:57:08.510

该`except`子句将仅捕获`raise`d 在其相应`try`块内的异常。尝试将`docopy`函数调用也放在`try`块内：

```
def hmm(haha):
    try:
        result = docopy(haha)
        it = iter(result)
    except ftplib.error_perm:
        print "Error Getting File" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T13:56:25.793

代码中引发错误的点必须在`try`块内。在这种情况下，错误很可能在`docopy`函数内部引发，但并未包含在`try`块中。

请注意，`docopy`返回`None`. 因此，当您尝试`iter`退出时，您将引发异常`None`——但这不会是`ftplib.error_perm`异常，而是`TypeError`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-23T20:38:17.883

如果您不确定会发生什么异常，请使用下面的代码，因为如果指定例如：除了 StandardError: 并且不是该错误，则不会处理异常。

```
try:
    # some code
except Exception: # Or only except:
   print "Error" # Python 3: print("Error") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-19T16:21:24.990

我知道 OP 是古老的，但对于那些迫切需要这个问题的答案的人来说。我遇到了类似的问题，具体取决于您的 IDE，如果您在具有特定异常等的任何行上有一个断点，这可能会发生冲突并停止 try/except 执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-05T12:14:19.023

我注意到全局异常可能不起作用，例如，`Ctrl+C`当`epub.py`模块执行`urllib3`连接触发`KeyboardInterrupt`但无法在主线程中捕获时，解决方法是将我的清理代码放入其中`finally`，例如：

```
try:
    main()
except Exception as e:
    clean_up_stuff()  #this one never called if keyboard interrupt in module urllib3 thread
finally: #but this work
    clean_up_stuff() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-13T22:09:13.953

这个例子对于 Python3.3+ 是通用的，当**装饰一个生成器函数**时，一个被装饰的生成器成功返回，因此**不会进入装饰器 except**，神奇的发生`yield from f`是在装饰器中包装了 yieldable：

```
from types import GeneratorType    

def generic_exception_catcher(some_kwarg: int = 3):
    def catch_errors(func):
        def func_wrapper(*args, **kwargs):
            try:
                f = func(*args, **kwargs)
                if type(f) == GeneratorType:
                    yield from f
                else:
                    return f
            except Exception as e:
                raise e
        return func_wrapper
    return catch_errors 
```

用法：

```
@generic_exception_catcher(some_kwarg=4)
def test_gen():
    for x in range(0, 10):
        raise Exception('uhoh')
        yield x

for y in test_gen():
    print('should catch in the decorator') 
```

# click - removeClass 不起作用

> ID：14460193
> 
> 赞同：0
> 
> 时间：2013-01-22T13:54:43.977
> 
> 标签：click, removeclass

这是我的脚本：

```
$(document).ready(function(){
    $(".slideToggle").click(function(e) {   
       e.preventDefault();
       $(".top-menu li").removeClass("active");
       var $more = $("#impressum").slideToggle("slow");
       $("body,html").animate({
           scrollTop: $more.offset().top
    }, {
        duration: 1100,
        queue: false
    })
    });
}); 
```

当我单击具有类 slideToggle 的锚点时，它会打开印记 div。到目前为止，一切都很好。但是该事件`$(".top-menu li").removeClass("active");`没有被执行。我不知道为什么。一旦我删除了 slideToggle 函数，上面的事件就会起作用。但我不能在点击功能上结合这两个事件。

你能帮我吗？提前致谢！

编辑：似乎脚本与我正在使用的另一个脚本发生冲突：

```
$(document).ready(function() {
$("a.anchorLink").anchorAnimate()
// Cache selectors
var topMenu = $(".top-menu"),
    topMenuHeight = topMenu.outerHeight()+15,
    // All list items
    menuItems = topMenu.find("a.anchorLink"),
    // Anchors corresponding to menu items
    scrollItems = menuItems.map(function(){
      var item = $($(this).attr("href"));
      if (item.length) { return item; }
    });

// Bind to scroll
$(window).scroll(function(){
   // Get container scroll position
   var fromTop = $(this).scrollTop()+topMenuHeight;

   // Get id of current scroll item
   var cur = scrollItems.map(function(){
     if ($(this).offset().top < fromTop)
       return this;
   });
   // Get the id of the current element
   cur = cur[cur.length-1];
   var id = cur && cur.length ? cur[0].id : "";
   // Set/remove active class
   menuItems
     .parent().removeClass("active")
     .end().filter("[href=#"+id+"]").parent().addClass("active");
});
}); 
```

因为如果我删除这个脚本，另一个脚本就可以工作。错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:15:27.487

你用的是什么版本的jquery？
我做了一个小提琴，你的代码有效（我正在用萤火虫观看 li 元素，并且“活动”类正确地消失了）

[http://jsfiddle.net/FKxyT/2/](http://jsfiddle.net/FKxyT/2/)

您可以尝试更改`removeClass`为`toggleClass`. 也许这行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:12:41.503

首先，变量`var $more =`会做什么？我认为这对这个函数来说是多余的，这个变量在任何地方都不是用户。

也许您可以发布整个代码。

格茨，沃特

# sql-server - 使用 Access 2010 在 SQL Server 2005 中更新表

> ID：14460194
> 
> 赞同：0
> 
> 时间：2013-01-22T13:54:45.237
> 
> 标签：sql-server, ms-access, updates

对高级访问和 SQL Server 2005 的世界来说非常新。我现在已经在 SQL Server 中开发了我的所有表，并将它们添加到我现在可以使用 ODBC 连接访问的空白数据库中。这个话题真的只是为了建议，对我来说，创建一个表单以便公司内的用户无需进入 SQL 就可以输入客户数据的最佳方式是什么？

我有三个表“客户表”“查询源”和“管理人员”-“查询源”和“管理人员”由查询源 ID、查询源名称、管理人员 ID 和管理人员名称组成，它们有一个链接到客户表。

在 SQL 端自己更新表时，我将 ID 用作整数，但现在我可以访问了，我希望我的用户能够使用列表框中的适当名称来更新这些表。我在 SQL 中创建了一个视图并将其导出以进行访问，但是当我完成所有信息并尝试保存记录时，它不允许我更新多个表 - 我理解这是因为它是一个视图。

有没有更简单的方法可以让我的团队在 MS 访问前端系统上添加新客户？

查询来源是推荐方法的名称：报纸、推荐、谷歌等

Admin Staff 是创建客户的员工的姓名。

多谢你们！卡勒姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:04:12.297

链接三个表格或表格上的三个简单视图。使用表单向导创建基于客户表的表单。使用列表框或组合框向导根据两个查找表中的每一个创建一个控件。有关如何使用向导的一些说明，请参阅[创建表单以在多个表中添加记录。](https://stackoverflow.com/questions/12131211/create-form-to-add-records-in-multiple-tables/12132196#12132196)

# java - Spring批处理中使用hibernate读取数据

> ID：14460198
> 
> 赞同：1
> 
> 时间：2013-01-22T13:54:56.810
> 
> 标签：java, spring-batch

我正在一个使用 Spring 批处理框架的项目中工作。我是新手。

我有一个任务，就像读取一个固定长度的平面文件长度，然后处理它并填充一些 bean，然后使用请求中的一些值我必须使用 Oracle 从数据库中获取数据，然后生成一些响应作为一个固定长度的平面文件。

我已将配置文件中的小代码片段粘贴在下面。

```
<bean name="tickerReader"
        class="org.springframework.batch.item.file.FlatFileItemReader">
        <property name="resource" ref="fileSystemResource" />
        <property name="lineMapper" ref="tickerLineMapper" />
<bean>
 ..............................
 ..............................

<batch:job id="TickerPriceConversion">
        <batch:step id="convertPrice">
            <batch:tasklet transaction-manager="transactionManager">
                <batch:chunk reader="tickerReader" processor="tickerPriceProcessor"
                    writer="simbeqResponseFlatFileWriter" commit-interval="10" >
            </batch:chunk>
            </batch:tasklet>
        </batch:step>
    </batch:job> 
```

我已经完成了读取部分，即读取请求文件并填充了相应的 bean。现在我需要使用与请求中的数据相对应的休眠从 Oracle 获取数据。我不知道该怎么做？我应该怎么做意味着配置会话工厂并使用它来获取数据。

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:59:42.740

您可以在[示例休眠作业中使用](https://github.com/SpringSource/spring-batch/blob/master/spring-batch-samples/src/main/resources/jobs/hibernateJob.xml)[HibernateCursorItemReader](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/database/HibernateCursorItemReader.html)

```
<bean id="hibernateItemReader"
    class="org.springframework.batch.item.database.HibernateCursorItemReader">
    <property name="queryString" value="from CustomerCredit" />
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

对于设置 sessionFactory 和事务管理器，您还可以查看示例[hibernate-context](https://github.com/SpringSource/spring-batch/blob/master/spring-batch-samples/src/main/resources/hibernate-context.xml)

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="mappingLocations" value="classpath*:/org/springframework/batch/sample/domain/**/*.hbm.xml" />
    <property name="hibernateProperties">
        <value>
            <![CDATA[
        hibernate.show_sql=true
        hibernate.format_sql=true
        ]]>
        </value>
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-17T10:12:50.590

```
@StepScope
@Slf4j
@Component
public class CursorItemReader extends HibernateCursorItemReader<ItemEntity> {

    public CursorItemReader(EntityManagerFactory entityManagerFactory,
                            @Value("#{stepExecution}")StepExecution stepExecution) {

        this.setName("CursorItemReader");
        this.setSessionFactory(entityManagerFactory.createEntityManager().unwrap(org.hibernate.Session.class).getSessionFactory());
        this.setQueryString("from ItemEntity");
        this.setUseStatelessSession(true);
        this.setFetchSize(5);
    }

    @Override
    public ItemEntity read() throws Exception {
        ItemEntity item = this.doRead();
        return item;
    }

} 
```

# javascript - 复制到剪贴板 - 不适用于 FF、Chrome

> ID：14460210
> 
> 赞同：10
> 
> 时间：2013-01-22T13:55:25.547
> 
> 标签：javascript, html, cross-browser

我正在使用下面提到的 javascript 将文本复制到剪贴板。它适用于 IE，但不适用于 Firefox 和 Chrome。

请指教，有什么问题吗？

```
 function setDataToclipboard() 
{

var str=document.getElementById("populatedString").value; 

if (window.clipboardData && clipboardData.setData) {
    clipboardData.setData("Text", str);
    alert("Copied!");
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T13:57:30.503

剪贴板操作不是跨浏览器的。对于跨浏览器解决方案，您需要 Flash。

看看这个库[https://github.com/jonrohan/ZeroClipboard](https://github.com/jonrohan/ZeroClipboard)

您可以像这样使用 ZeroClipboard：

```
<button id="my-button" data-clipboard-text="Copy me!">Copy to Clipboard</button>
<script>
    var clip = new ZeroClipboard(document.getElementById('my-button'));
</script> 
```

当您单击按钮时，文本`Copy me!`将被放入剪贴板。

有关更多说明，请查看库的 API [https://github.com/jonrohan/ZeroClipboard/blob/master/docs/instructions.md](https://github.com/jonrohan/ZeroClipboard/blob/master/docs/instructions.md)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T13:57:24.490

我认为 window.clipboardData 只是 IE。访问剪贴板是一个安全问题，因此无法在 FF 或 Chrome 中轻松完成。

请参阅此线程：[如何在 JavaScript 中复制到剪贴板？](https://stackoverflow.com/questions/400212/how-to-copy-to-the-clipboard-in-javascript)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-22T13:58:42.213

请参阅[文档`clipboardData`](http://msdn.microsoft.com/en-gb/library/ie/ms535220(v=vs.85).aspx)，特别是以下部分：

> 这里没有适用的标准。

您正在使用专有的 Microsoft gubbins，因此不应期望它可以在其他浏览器上运行。

有关访问剪贴板的跨浏览器技术，请参阅[此问题。](https://stackoverflow.com/questions/127040/copy-put-text-on-the-clipboard-with-firefox-safari-and-chrome)

有[一个用于访问剪贴板的标准草案，](http://dev.w3.org/2006/webapi/clipops/clipops.html)但我不知道它在野外的任何实现（并且[canIuse 也不知道任何一个](http://caniuse.com/#search=clipboard)）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-01T18:57:37.340

w3c剪贴板api由所有浏览器实现[http://caniuse.com/#feat=clipboard](http://caniuse.com/#feat=clipboard)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-10-15T14:11:14.430

我最近在使用 Chrome 和其他浏览器时遇到了同样的问题。但是，最近，我发现此代码在某些浏览器的 contenteditable 字段中有效：

```
clipboard = e.originalEvent.clipboardData;
clipboard.setData('text/plain', plainData);
clipboard.setData('text/html', htmlData); 
```

注意：在这种情况下，e 是复制和/或剪切事件。此事件触发并且可在`onCopy()`or`onCut()`操作中检索。

此代码已确认可在以下浏览器的最新版本中运行：

*   Chrome（PC/Mac 和 Android）
*   Android 4.4+ WebView（只要您从 Play 商店更新）-> Android 开发者的好消息
*   火狐
*   Safari（仅限 Mac）

Internet Explorer 似乎可以使用`window.clipboardData.setData`，但请记住，IE 剪贴板只会接受`'text'`和`'url'`数据。

虽然以下浏览器可以访问系统剪贴板对象，但它们无法使用以下方式将数据设置到剪贴板`clipboard.setData`：

*   微软边缘
    *   而是将`UntrustedDragDrop`对象放入剪贴板...
    *   此外，当它不起作用时，setData 返回 true...。setData 在所有其他浏览器中返回 undefined
*   Android WebView -> 4.4 以下
*   iOS Safari 和 WebView - 是的 iOS！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-16T15:04:46.177

我发现这些在 Chrome 或 FF 中不起作用：

类型=“隐藏”

```
<input id="e" type="hidden" value="my text to copy to clipboard" /> 
```

风格=“显示：无；”

```
<input id="e" type="text" style="display:none;" value="my text to copy to clipboard" /> 
```

* * *

用这个欺骗浏览器

样式=“位置：绝对；顶部：-30；”

```
<input id="e" type="text" style="position: absolute; top: -30;" value="my text" /> 
```

# jquery - 函数不在负载时运行，但在调整大小时运行

> ID：14460211
> 
> 赞同：0
> 
> 时间：2013-01-22T13:55:33.077
> 
> 标签：jquery, resize, load

我有这个应该在`load`和上运行该功能`resize`：

```
$(window).resize(stuffForResizeAndReady);
$(document).ready(stuffForResizeAndReady); 
```

但是，该功能不会在加载时运行，而是在调整大小时运行，我这样做是为了检查：

```
if ($("#table").length) {
    alert("element found");
} 
```

..它不显示警报，但是当调整大小时，它会显示。

似乎整个脚本仅在第一次调整大小时才被激活，而不是之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:01:05.550

将这两行移到 $(document).ready 块之外：

```
$(window).resize(stuffForResizeAndReady);
$(document).ready(stuffForResizeAndReady); 
```

还要移动该`stuffForResizeAndReady`函数的定义（如下面的评论中所建议的）。

# objective-c - c写函数没有正确发送字节

> ID：14460212
> 
> 赞同：1
> 
> 时间：2013-01-22T13:55:34.487
> 
> 标签：objective-c, c, sockets

如果将写入功能放置在没有睡眠的循环中，我将面临写入功能无法正常工作的问题。我想要实现的是将文件从本地机器传输到远程 FTP 服务器以下代码工作正常，但写入功能没有正确传输字节它只传输半字节，它可以正常工作与睡眠阻塞循环。

```
 struct sockaddr_in
{
    int16_t sin_family;
    uint16_t sin_port;
    struct in_addr sin_addr;
    char sin_zero[8];
};

struct in_addr
{
    uint32_t s_addr;
};

struct sockaddr_in servaddr;
memset(&servaddr, 0, sizeof(servaddr));
int isocket = socket(AF_INET,SOCK_STREAM,0);
servaddr.sin_family = AF_INET;
servaddr.sin_addr.s_addr = inet_addr("some ip goes here");
servaddr.sin_port = htons(21);

char buf[1024];
int MAX_LENGTH = 1024;
char readBuf[MAX_LENGTH];
long cmd;

int res =  connect(isocket, (struct sockaddr_in *)&servaddr, sizeof(servaddr));

if(res < 0) {
    NSLog(@"problem connecting to server");
}

recv(isocket, (void *)readBuf,MAX_LENGTH, 0);
NSLog(@"response: %s",readBuf);

NSLog(@"Issuing command");

strcpy(buf, "USER foo\r\n");
cmd = send(isocket, (void *)buf, strlen(buf), 0); //send username

recv(isocket, (void *)readBuf,MAX_LENGTH, 0);
NSLog(@"response: %s",readBuf); //read response

strcpy(buf, "PASS *******\r\n");
cmd = send(isocket, (void *)buf, strlen(buf), 0);//send password

recv(isocket, (void *)readBuf, MAX_LENGTH, 0);
NSLog(@"response: %s",readBuf); //read response

strcpy(buf, "CWD /httpdocs/testing\r\n");
cmd = send(isocket, (void *)buf, strlen(buf), 0);//send directory

recv(isocket, (void *)readBuf, MAX_LENGTH, 0);
NSLog(@"response: %s",readBuf); //read response

strcpy(buf, "TYPE I\r\n");
cmd = send(isocket, (void *)buf, strlen(buf), 0);//set transfer type

recv(isocket, (void *)readBuf, MAX_LENGTH, 0);
NSLog(@"response: %s",readBuf); //read response

strcpy(buf, "PASV\r\n");
cmd = send(isocket, (void *)buf, strlen(buf), 0);//set transfer mode to passive

recv(isocket, (void *)readBuf, MAX_LENGTH, 0);
NSLog(@"response: %s",readBuf); //read response
NSString *pasvResponse = [NSString stringWithFormat:@"%s",readBuf];

strcpy(buf, "STOR mmov.jpeg\r\n");
cmd = send(isocket, (void *)buf, strlen(buf), 0);//start tranfering files

pasvResponse = [pasvResponse stringByReplacingOccurrencesOfString:@"227 Entering Passive Mode (" withString:@""];
pasvResponse = [pasvResponse stringByReplacingOccurrencesOfString:@")." withString:@""];
pasvResponse = [pasvResponse stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
NSArray *matches = [pasvResponse componentsSeparatedByString:@","];

NSString *ip = nil;
int port = 0;
if([matches count] > 2) {
    ip = [NSString stringWithFormat:@"%@.%@.%@.%@",matches[0],matches[1],matches[2],matches[3]];
    port = ([matches[4] intValue] * 256) + ([matches[5] intValue]);
}

if(port != 0 && ip != nil) {
    struct sockaddr_in servaddr_pasv;
    memset(&servaddr_pasv, 0, sizeof(servaddr_pasv));
    int isocket_pasv = socket(AF_INET,SOCK_STREAM,0);
    servaddr_pasv.sin_family = AF_INET;
    servaddr_pasv.sin_addr.s_addr = inet_addr([ip UTF8String]);
    servaddr_pasv.sin_port = htons(port);
    int res_pasv =  connect(isocket_pasv, (struct sockaddr_in *)&servaddr_pasv, sizeof(servaddr_pasv));

    if(res_pasv < 0) {
        NSLog(@"problem connecting to server passv");
    }

    NSInputStream *input = [NSInputStream inputStreamWithFileAtPath:@"/Users/myMac/Desktop/limitation.jpeg"];
    [input open];
    int i= 0;
    while(1) {
        if([input hasBytesAvailable]) {
            i++;
            uint8_t buffer[1024];
            long res = [input read:buffer maxLength:1024];
            NSLog(@"Bytes Read: %ld",res);

            if(res != 0) {
                long bytesSent = write(isocket_pasv, buffer, sizeof(buffer));
                NSLog(@"%d Bytes Transfered: %ld",i,bytesSent);
                // sleep(1);
            }
            if(res == 0) {
                break;
            }
        }
    }

    [input close];
    NSLog(@"bytes write completed");
    close(isocket_pasv);
}
close(isocket); 
```

任何帮助提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T13:59:23.890

您不能保证可以一次性卸载整个缓冲区。您必须循环写入，直到所有数据都传输完毕。您还应该检查 write 返回的错误，它可能是您捕获各种网络相关事件以及更典型的 O/S 写入错误的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T13:59:21.293

我猜是这个`write`电话没有发送你要求它发送的所有内容？这其实并不意外。您只需在新调用中将剩余数据发送到`write`.

如果要写入所有数据，请使用以下内容：

```
int write_all(int fd, const void *buffer, const size_t bufsize)
{
    size_t to_write = bufsize;
    const void *ptr = buffer;

    while (to_write > 0)
    {
        ssize_t written = write(fd, ptr, to_write);
        if (written < 0)
            return -1;

        to_write -= written;
        ptr = ((char *) ptr) + written;
    }

    return bufsize;
} 
```

警告：我从记忆中写了以下内容，尚未测试过。

# java - 使用 Saxon java 工具（命令行）从 xsl 查询 mysql 数据库需要什么？

> ID：14460218
> 
> 赞同：4
> 
> 时间：2013-01-22T13:55:48.847
> 
> 标签：java, mysql, xslt, saxon, jdbc-odbc

我想使用 java 工具 SAXON 查询数据库

1.  使用 ODBC 连接连接到 mysql 数据库
2.  查询数据库（可能是信息架构 - 读取架构）
3.  将结果导出到 xml

这是 saxon 中的许可功能（例如 saxon9ee）吗？
如果是，是否有任何其他开源选项可以实现相同级别的功能？
我已经下载了 saxon9ee.jar + saxon9he.jar 并玩了一下。

到目前为止我做了什么：

# XSLT:connect.xslt

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="#all"
  xmlns:sql="http://saxon.sf.net/sql"
  extension-element-prefixes="sql"
  version="2.0">

    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>

    <xsl:param name="driver" select="'com.mysql.jdbc.Driver'"/>
    <xsl:param name="database" select="'jdbc:mysql://localhost/databaename'"/>
    <xsl:param name="user" select="'usr'"/>
    <xsl:param name="password" select="'pwd'"/>

    <xsl:template match="//databaseObjects">
            <xsl:message>Connecting to database...</xsl:message>

            <!-- The "connection" variable establishes JDBC connection by selecting as its value the SQL connection to the database.!-->

           <xsl:variable name="connection" as="java:java.lang.Object" xmlns:java="http://saxon.sf.net/java-type">
                <sql:connect driver="{$driver}" database="{$database}" user="{$user}" password="{$password}">

                   <!-- Used primarily for debugging, if, 
                   for whatever reason, the credentials or something incorrect is passed in the connect statement, 
                   the process will terminate with the following message -->
                    <xsl:fallback>
                        <xsl:message terminate="yes">Connection to MySQL failed.</xsl:message>
                    </xsl:fallback>
                   </sql:connect>
            </xsl:variable>

     <sql:close connection="$connection"/>
 </xsl:template>
</xsl:stylesheet> 
```

# XML：对象.xml

（粗略的想法 ）

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseObjects>
    <object type="triggers"/>
    <object type="functions"/>
    <object type="procedures"/>
    <object type="views"/>
    <object type="events"/>
</databaseObjects> 
```

# 命令：

```
java -jar ~/saxon/saxon9he.jar   objects.xml connect.xslt 
```

# 输出：

`No license file found - running with licensable features disabled Connecting to database... Error on line 17 of connect.xslt: XTDE1450: Unknown extension instruction in built-in template rule Transformation failed: Run-time errors were reported`

任何形式的帮助都是可观的，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T04:16:01.380

使用以下过程：

*   安装 MySQL Connector/J（MySQL 的官方 JDBC 驱动程序）
*   安装 Apache Ant
*   创建/修改 Ant 任务以：
    *   连接到 MySQL
    *   运行查询
    *   获取 XML 输出
    *   通过 Saxon 处理 XML

**参考**

*   [JDBC 基础](http://docs.oracle.com/javase/tutorial/jdbc/basics/gettingstarted.html)
*   [蚂蚁 SQL 任务](https://ant.apache.org/manual/Tasks/sql.html)
*   [Ant XSLT 任务](https://ant.apache.org/manual/Tasks/style.html)

# javascript - 如何在不膨胀的情况下在 HTML 索引文件中导入多个 javascript 文件？

> ID：14460231
> 
> 赞同：35
> 
> 时间：2013-01-22T13:56:18.917
> 
> 标签：javascript, html

无论如何都可以在 HTML 中导入多个 javascript 文件而不必指定每个文件？

```
<script src="js/toolkit/Toolkit.js"></script>
<script src="js/toolkit/Viewable.js"></script>
<script src="js/toolkit/Overlay.js"></script> 
```

IE。我可以指定类似**js/toolkit/***的东西吗？

我必须导入 50 多个 javascript 文件，并且指定每个文件似乎非常耗时。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-04-27T20:34:17.673

在另一个 JavaScript 文件中包含一个 JavaScript 文件在 Web 开发中很常见。

因为很多时候我们在运行时包含的 JavaScript 文件代表了一些条件。

因此，我们可以使用 JavaScript 以及使用 jQuery 来实现这一点。

**方法 1：使用 JavaScript 包含另一个 JavaScript 文件**

1.  在您的网页中添加以下功能。

    ```
    function loadScript(url)
    {    
        var head = document.getElementsByTagName('head')[0];
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = url;
        head.appendChild(script);
    } 
    ```

2.  只需调用下面的 loadScript 函数，您想在其中包含 js 文件。

    ```
    loadScript('/js/jquery-1.7.min.js'); 
    ```

**方法 2：使用 jQuery 包含另一个 JavaScript 文件。**

1.  在您的网页中添加 jQuery 文件。

    ```
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script> 
    ```

2.  只需调用 getScript 函数函数。

    ```
    jQuery(document).ready(function(){
        $.getScript('/js/jquery-1.7.min.js');
    }); 
    ```

[如何在另一个 JavaScript 文件中包含一个 JavaScript 文件](http://www.web-technology-experts-notes.in/2015/03/how-to-include-a-javascript-file-in-another-javascript-file.html "网络技术专家笔记")

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-22T14:14:00.113

有一个办法：

您可以创建一个将路径作为参数并创建以下 HTML 行的 javascript 函数：

```
<script src="js/toolkit/Toolkit.js"></script>
<script src="js/toolkit/Viewable.js"></script>
<script src="js/toolkit/Overlay.js"></script> 
```

你只需要这样称呼：

```
loadLib("toolkit/Toolkit");
loadLib("toolkit/Viewable");
loadLib("toolkit/Overlay"); 
```

但不建议这样做，因为 HTTP 请求的数量会增加加载时间。您最好在服务器端使用某些东西将所有内容放在同一个文件中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-22T13:58:47.917

不，你不能这样做。顺便说一下，加载所有 50 个单独的文件并不是一个好主意。考虑将它们压缩到一个脚本中以提高性能并减少页面加载时间。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-28T00:38:47.860

您可以设置[grunt](http://gruntjs.com/)来[查看](https://github.com/gruntjs/grunt-contrib-watch)脚本的文件夹并将它们[合并](https://github.com/gruntjs/grunt-contrib-concat)/[缩小](https://github.com/gruntjs/grunt-contrib-uglify)到一个文件中，然后您只需将其包含在您的 HTML 文件中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-22T14:05:42.013

您需要为浏览器指定每个文件以了解要检索的内容，但根据您使用的 IDE，可能会有执行此操作的快捷方式，（Visual Studios 允许您将脚本文件拖放到 html 中以添加引用）。

在开发过程中，您希望通过将文件分开以进行故障排除来做同样的事情，但在生产中，正如其他人所评论的那样，[缩小](http://jscompress.com/)代码并将它们组合到一个文件中是非常好的做法。这使得它只需一个调用，并且可以显着减少您的开销。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-25T03:14:07.840

我建议您使用[JSCompress](https://jscompress.com)。它会将您所有的 javascript 代码压缩到一个 javascript 文件中。

# actionscript-3 - 如何使 Flex 按钮的背景透明

> ID：14460232
> 
> 赞同：3
> 
> 时间：2013-01-22T13:56:21.080
> 
> 标签：actionscript-3, apache-flex, flex4, transparent

我想制作一个背景透明的 Flex 按钮，以便将 css 应用于页面并影响 Flash。

我试过了，但没有运气：

```
<mx:Button skin="{null}" x="0" y="0" label="Submit"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:25:05.270

使用 Spark Button 时，您可以应用一个自定义皮肤，从而忽略所有的 chrome。
您可以像这样应用自定义皮肤：

```
<s:Button label="Submit" skinClass="TransparentButtonSkin"/> 
```

@Panciz 的解决方案可能会奏效，但只需省略所有不需要的组件，皮肤就可以变得更轻巧。

```
<!--TransparentButtonSkin.mxml-->
<s:SparkButtonSkin xmlns:fx="http://ns.adobe.com/mxml/2009"
                   xmlns:s="library://ns.adobe.com/flex/spark"
                   alpha.disabled="0.5">

    <fx:Metadata>
        [HostComponent("spark.components.Button")]
    </fx:Metadata>

    <s:states>
        <s:State name="up"/>
        <s:State name="over"/>
        <s:State name="down"/>
        <s:State name="disabled"/>
    </s:states>

    <s:Rect id="hitZone" left="0" right="0" top="0" bottom="0">
        <s:fill>
            <s:SolidColor alpha="0"/>
        </s:fill>
    </s:Rect>

    <s:Label id="labelDisplay" left="0" right="0" top="0" bottom="0"
             horizontalCenter="0" verticalCenter="0"
             textAlign="center" maxDisplayedLines="1" verticalAlign="middle"/>

</s:SparkButtonSkin> 
```

注意`hitzone`透明图形：这是必要的，否则您将单击按钮的透明部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:19:47.777

您必须定义一个新的 Skinclass 并为所有组件定义 alpha 属性，我尝试使用 spark 按钮并且它起作用了。

```
<?xml version="1.0" encoding="utf-8"?>

<!--

    ADOBE SYSTEMS INCORPORATED
    Copyright 2008 Adobe Systems Incorporated
    All Rights Reserved.

    NOTICE: Adobe permits you to use, modify, and distribute this file
    in accordance with the terms of the license agreement accompanying it.

-->

<!--- The default skin class for the Spark Button component.  

       @see spark.components.Button

      @langversion 3.0
      @playerversion Flash 10
      @playerversion AIR 1.5
      @productversion Flex 4
-->
<s:SparkButtonSkin xmlns:fx="http://ns.adobe.com/mxml/2009"  
             xmlns:s="library://ns.adobe.com/flex/spark" 
             xmlns:fb="http://ns.adobe.com/flashbuilder/2009"
             minWidth="21" minHeight="21" 
             alpha.disabled="0.5">

    <fx:Metadata>
        <![CDATA[ 
        /** 
         * @copy spark.skins.spark.ApplicationSkin#hostComponent
         */
        [HostComponent("spark.components.Button")]
        ]]>
    </fx:Metadata>

    <fx:Script fb:purpose="styling">
        <![CDATA[         
            import spark.components.Group;
            /* Define the skin elements that should not be colorized. 
            For button, the graphics are colorized but the label is not. */
            static private const exclusions:Array = ["labelDisplay"];

            /** 
             * @private
             */     
            override public function get colorizeExclusions():Array {return exclusions;}

            /**
             * @private
             */
            override protected function initializationComplete():void
            {
                useChromeColor = true;
                super.initializationComplete();
            }  

            /**
             *  @private
             */
            override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number) : void
            {
                var cr:Number = getStyle("cornerRadius");

                if (cornerRadius != cr)
                {
                    cornerRadius = cr;
                    shadow.radiusX = cornerRadius;
                    fill.radiusX = cornerRadius;
                    lowlight.radiusX = cornerRadius;
                    highlight.radiusX = cornerRadius;
                    border.radiusX = cornerRadius;
                }

                if (highlightStroke) highlightStroke.radiusX = cornerRadius;
                if (hldownstroke1) hldownstroke1.radiusX = cornerRadius;
                if (hldownstroke2) hldownstroke2.radiusX = cornerRadius;

                super.updateDisplayList(unscaledWidth, unscaledHeight);
            }

            private var cornerRadius:Number = 2;

        ]]>        
    </fx:Script>

    <!-- states -->
    <s:states>
        <s:State name="up" />
        <s:State name="over" />
        <s:State name="down" />
        <s:State name="disabled" />
    </s:states>

    <!-- layer 1: shadow -->
    <!--- @private -->
    <s:Rect id="shadow"  left="-1" right="-1" top="-1" bottom="-1" radiusX="2">
        <s:fill>
            <s:LinearGradient rotation="90">
                <s:GradientEntry color="0x000000" 
                                 color.down="0xFFFFFF"
                                 alpha="0.01"
                                 alpha.down="0" />
                <s:GradientEntry color="0x000000" 
                                 color.down="0xFFFFFF" 
                                 alpha="0.07"
                                 alpha.down="0.5" />
            </s:LinearGradient>
        </s:fill>
    </s:Rect>

    <!-- layer 2: fill -->
    <!--- @private -->
    <s:Rect id="fill" alpha="{0.1}" left="1" right="1" top="1" bottom="1" radiusX="2">
        <s:fill>
            <s:LinearGradient rotation="90">
                <s:GradientEntry color="0xFFFFFF" 
                                 color.over="0xBBBDBD" 
                                 color.down="0xAAAAAA" 
                                 alpha="0.85" />
                <s:GradientEntry color="0xD8D8D8" 
                                 color.over="0x9FA0A1" 
                                 color.down="0x929496" 
                                 alpha="0.85" />
            </s:LinearGradient>
        </s:fill>
    </s:Rect>

    <!-- layer 3: fill lowlight -->
    <!--- @private -->
    <s:Rect id="lowlight" alpha="{0.1}" left="1" right="1" top="1" bottom="1" radiusX="2">
        <s:fill>
            <s:LinearGradient rotation="270">
                <s:GradientEntry color="0x000000" ratio="0.0" alpha="0.0627" />
                <s:GradientEntry color="0x000000" ratio="0.48" alpha="0.0099" />
                <s:GradientEntry color="0x000000" ratio="0.48001" alpha="0" />
            </s:LinearGradient>
        </s:fill>
    </s:Rect>

    <!-- layer 4: fill highlight -->
    <!--- @private -->
    <s:Rect id="highlight" alpha="{0.1}" left="1" right="1" top="1" bottom="1" radiusX="2">
        <s:fill>
            <s:LinearGradient rotation="90">
                <s:GradientEntry color="0xFFFFFF"
                                 ratio="0.0"
                                 alpha="0.33" 
                                 alpha.over="0.22" 
                                 alpha.down="0.12"/>
                <s:GradientEntry color="0xFFFFFF"
                                 ratio="0.48"
                                 alpha="0.33"
                                 alpha.over="0.22"
                                 alpha.down="0.12" />
                <s:GradientEntry color="0xFFFFFF"
                                 ratio="0.48001"
                                 alpha="0" />
            </s:LinearGradient>
        </s:fill>
    </s:Rect>

    <!-- layer 5: highlight stroke (all states except down) -->
    <!--- @private -->
    <s:Rect id="highlightStroke" alpha="{0.1}" left="1" right="1" top="1" bottom="1" radiusX="2" excludeFrom="down">
        <s:stroke>
            <s:LinearGradientStroke rotation="90" weight="1">
                <s:GradientEntry color="0xFFFFFF" alpha.over="0.22" />
                <s:GradientEntry color="0xD8D8D8" alpha.over="0.22" />
            </s:LinearGradientStroke>
        </s:stroke>
    </s:Rect>

    <!-- layer 6: highlight stroke (down state only) -->
    <!--- @private -->
    <s:Rect id="hldownstroke1" alpha="{0.1}"  left="1" right="1" top="1" bottom="1" radiusX="2" includeIn="down">
        <s:stroke>
            <s:LinearGradientStroke rotation="90" weight="1">
                <s:GradientEntry color="0x000000" alpha="0.25" ratio="0.0" />
                <s:GradientEntry color="0x000000" alpha="0.25" ratio="0.001" />
                <s:GradientEntry color="0x000000" alpha="0.07" ratio="0.0011" />
                <s:GradientEntry color="0x000000" alpha="0.07" ratio="0.965" />
                <s:GradientEntry color="0x000000" alpha="0.00" ratio="0.9651" />
            </s:LinearGradientStroke>
        </s:stroke>
    </s:Rect>
    <!--- @private -->
    <s:Rect id="hldownstroke2" alpha="{0.1}" left="2" right="2" top="2" bottom="2" radiusX="2" includeIn="down">
        <s:stroke>
            <s:LinearGradientStroke rotation="90" weight="1">
                <s:GradientEntry color="0x000000" alpha="0.09" ratio="0.0" />
                <s:GradientEntry color="0x000000" alpha="0.00" ratio="0.0001" />
            </s:LinearGradientStroke>
        </s:stroke>
    </s:Rect>

    <!-- layer 7: border - put on top of the fill so it doesn't disappear when scale is less than 1 -->
    <!--- @private -->
    <s:Rect id="border" alpha="{0.1}" left="0" right="0" top="0" bottom="0" width="69" height="20" radiusX="2">
        <s:stroke>
            <s:LinearGradientStroke rotation="90" weight="1">
                <s:GradientEntry color="0x000000" 
                                 alpha="0.5625"
                                 alpha.down="0.6375" />
                <s:GradientEntry color="0x000000" 
                                 alpha="0.75" 
                                 alpha.down="0.85" />
            </s:LinearGradientStroke>
        </s:stroke>
    </s:Rect>

    <!-- layer 8: text -->
    <!--- @copy spark.components.supportClasses.ButtonBase#labelDisplay  -->
    <s:Label  id="labelDisplay"
             textAlign="center"
             maxDisplayedLines="1"
             horizontalCenter="0" verticalCenter="1" verticalAlign="middle"
             left="10" right="10" top="2" bottom="2">
    </s:Label>

</s:SparkButtonSkin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T14:23:36.830

最简单的方法是对所有状态都使用`mx:LinkButton`硬`LinkButtonSkin`编码的 alpha=1 ，但您可以覆盖它：

```
package
{
import flash.geom.Matrix;

import mx.skins.halo.LinkButtonSkin;

public class LinkButtonAlphaSkin extends LinkButtonSkin
{
    public function LinkButtonAlphaSkin()
    {
        super();
    }

    override protected function drawRoundRect(x:Number, y:Number, width:Number, height:Number, cornerRadius:Object=null, color:Object=null, alpha:Object=null, gradientMatrix:Matrix=null, gradientType:String="linear", gradientRatios:Array=null, hole:Object=null):void
    {
        super.drawRoundRect(x, y, width, height, cornerRadius, color, 0, gradientMatrix, gradientType, gradientRatios, hole);
    }
}
} 
```

用法：

```
<mx:LinkButton label="lala" skin="LinkButtonAlphaSkin"/> 
```

# matlab - ode45 时间步短不工作

> ID：14460234
> 
> 赞同：1
> 
> 时间：2013-01-22T13:56:26.370
> 
> 标签：matlab, ode

我正在使用 ode45，但我不知道在这种情况下该怎么做。我有一个微分方程，其中我的参数随时间变化非常快。理想情况下，我想选择 tspan 为 0:epsilon:10*epsilon ，其中考虑到我的 DE 因素中的任何内容，epsilon 的顺序很小。但是，这不起作用，MATLAB 只是给了我一个情节，其中我的初始条件没有任何变化。

我做了明显的事情来修复它，如下所示。假设我有 xdot(t)=10^9*x(t)。我将其重写为 xdot(t)=x(t) 并将我的时间轴标记为纳秒而不是秒。

只是好奇MATLAB是否可以自己做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:12:50.650

您可以使用 ODE 选项设置最大时间步长。

```
opt = odeset('MaxStep',epsilon)
[t,y] = ode45(odeFun,tSpan,y0,opt) 
```

要了解自定义 ODE 求解器时可以更改的所有选项，请查看`docsearch odeset`.

# mysql - MySQL 总和基于先前按日期选择

> ID：14460236
> 
> 赞同：0
> 
> 时间：2013-01-22T13:56:27.903
> 
> 标签：mysql

我有一个不是很规范化的 MySQL 表，它具有以下值：

```
customer_ID | date | score | sale 
```

当我对“购买体验”进行评分时，我想根据每个客户的最后得分检查他的总销售价值。我不介意以前的分数，只关心最后一个。

假设我有：

```
customer_ID | date      | score | sale  
a           | yesterday | 3     | 10  
a           | today     | 6     | 35  
b           | today     | 10    | 20  
c           | yesterday | 4     | 5 
```

分数 > 5 的客户购买的结果应该是：

```
num of customers | total sale values  
2                | 65 
```

知道如何创建这样的查询吗？

编辑：

我想知道的是一个客户总共花了多少钱购买，但只是在最后一个分数大于 5 的客户身上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:14:12.017

```
SELECT  COUNT(DISTINCT aa.customer_ID) `num of customers`,
        SUM(aa.sale) `total sale values `
FROM    table1 aa
        INNER JOIN
        (
            SELECT  a.customer_ID
            FROM    table1  a
                    INNER JOIN
                    (
                        SELECT  customer_ID, max(date) max_date
                        FROM    table1
                        GROUP   BY customer_ID
                    ) b ON a.customer_ID = b.customer_ID AND
                            a.date = b.max_date AND a.score > 5
        ) final ON aa.customer_ID = final.customer_ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/052fac/6)

更加简化，

```
SELECT  COUNT(DISTINCT c.customer_ID) `num of customers`,
        SUM(c.sale) `total sale values `
FROM    table1  a
        INNER JOIN
        (
            SELECT  customer_ID, max(date) max_date
            FROM    table1
            GROUP   BY customer_ID
        ) b ON a.customer_ID = b.customer_ID AND
                a.date = b.max_date AND a.score > 5
        INNER JOIN table1 c
            ON a.customer_ID = c.customer_ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/052fac/7)

# c# - 使用 ToDictionary 创建字典

> ID：14460239
> 
> 赞同：6
> 
> 时间：2013-01-22T13:56:33.697
> 
> 标签：c#, linq, c#-4.0

我有两个大小相同的字符串列表。我想创建一个字典，键是 from `listA`，值是 from `listB`。

什么是快速方法？

我使用了代码：

```
 List<string> ListA;
        List<string> ListB;
        Dictionary<string,string> dict = new Dictionary<string,string>();
        for(int i=0;i<ListA.Count;i++)
        {
              dict[key] = listA[i];
              dict[value]= listB[i];
        } 
```

我不喜欢这种方式，我可以使用`ToDictionary`方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T14:00:00.360

从 .NET 4.0 开始，您可以使用 LINQ 的[`Zip`](http://msdn.microsoft.com/en-us/library/dd267698.aspx)方法来完成，如下所示：

```
var res = ListA.Zip(ListB, (a,b) => new {a, b})
               .ToDictionary(p=>p.a, p=>p.b); 
```

> [Zip] 方法将第一个序列的每个元素与第二个序列中具有相同索引的元素合并。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T13:59:23.187

您可以使用索引创建一个匿名类型，您可以使用该索引来获取`B`该索引。

```
Dictionary<string, string> dict = ListA
    .Select((a, i) => new { A = a, Index = i })
    .ToDictionary(x => x.A, x => ListB.ElementAtOrDefault(x.Index)); 
```

请注意，如果`null`值`ListB`小于`ListA`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T14:03:57.367

我不会打扰（如果可能的话），因为您的版本是可读的，易于调试并且比任何其他 LINQ 解决方案都更快（特别是如果您正在使用大列表）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T14:05:03.677

我不会改变你的版本。

在您的情况下，以下代码比 LINQ 的内容更具可读性，恕我直言。

```
var ListA = new List<string>();
var ListB = new List<string>();
var dict = new Dictionary<string, string>();

for (int i = 0; i < ListA.Count; i++)
{
    dict.Add(ListA[i], ListB[i]);
} 
```

# iphone - 在 iPhone 中使用 Flurry 展示广告

> ID：14460241
> 
> 赞同：1
> 
> 时间：2013-01-22T13:56:36.670
> 
> 标签：iphone, ios, banner, flurry, iad

我正在尝试使用 Flurry 库显示广告横幅。

我导入“Flurry.h”、“FlurryAds.h”和“FlurryAdDelegate.h”

AppDelegate.m:

> [Flurry startSession:@"我的应用程序 id"];

根视图类：

> [FlurryAds setAdDelegate:self]; [FlurryAds fetchAndDisplayAdForSpace:@"BANNER_MAIN_VIEW" view:self.view size:BANNER_TOP];

但是，我收到以下错误。

> 架构 i386 的未定义符号：
> “_MPMoviePlayerContentPreloadDidFinishNotification”，引用自：-[FlurryVideoPlayer playVideo:view:ad:] in libFlurryAds.a(libFlurryAds.a-i386-master.o) -[FlurryVideoPlayer moviePreloadDidFinish:] in libFlurryAds.a(libFlurryAds .a-i386-master.o)

这段代码有什么问题？我错过了什么吗？有没有人演示如何使用 Flurry 显示广告横幅？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T14:08:10.460

在项目设置的 Build Phases 选项卡中的 Link Binary with Library 下包含 MediaPlayer 框架

# facebook - 当我返回链接时，按钮不起作用？

> ID：14460242
> 
> 赞同：0
> 
> 时间：2013-01-22T13:56:44.237
> 
> 标签：facebook

好的，这是我从官方 API 获得的 iframe

```
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.gabbatracklistworld.com%2Findex.php%3Fexplore%3Dview%26trackid%3D586&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;font&amp;colorscheme=light&amp;action=like&amp;height=21&amp;appId=225322387567317" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe> 
```

它运作良好！我点击喜欢，我在 facebook 上看到我喜欢那个页面。但是，当我从 Facebook 单击链接时，转到该页面：

```
http://www.gabbatracklistworld.com/index.php?explore=view&trackid=586&fb_action_ids=10200316597536577&fb_action_types=og.likes&fb_source=timeline_og&action_object_map=%7B%2210200316597536577%22%3A10151528903177923%7D&action_type_map=%7B%2210200316597536577%22%3A%22og.likes%22%7D&action_ref_map=%5B%5D 
```

我看到“我不喜欢它”了。似乎 Facebook 添加的查询字符串是上一页之外的另一个位置。

它是一个错误吗？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:27:47.307

如果你去[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

并粘贴[http://www.gabbatracklistworld.com/index.php?explore=view&trackid=586](http://www.gabbatracklistworld.com/index.php?explore=view&trackid=586) 然后按获取代码。您将看到一个名为 iframe 的选项卡。它说：

> 此插件没有带有所选选项的 iframe 实现。请使用 JavaScript SDK 和 HTML5 或 XFBML 实现，或更改发送参数的值。

您需要使用第一个实现，嵌入 javascript sdk，并使用 html5 或 xfbml 创建点赞按钮。这些标签准确地解释了如何。

# javascript - 从 ASP 调用 JavaScript

> ID：14460246
> 
> 赞同：3
> 
> 时间：2013-01-22T13:56:59.550
> 
> 标签：javascript, asp-classic

我有一行代码：

```
Response.write("<script language=""text/JavaScript"">alert(""What up dog"");</script>") 
```

这行不通。我没有看到警告框，但我看到页面源已正确编写代码：

```
<script language="text/JavaScript">alert("What up dog");</script> 
```

我实际上想要做的是：

```
Response.write("<script language=""text/JavaScript"">document.cookie = '" & Cookie & " = ; expires=Thu, 01 Jan 1970 00:00:01 GMT;';</script>") 
```

即：删除一个名称存储在 ASP 变量 'cookie' 中的 cookie。这也不起作用，这就是为什么我试图创建警报框只是为了测试我在哪里搞砸了。

我尝试使用纯 ASP (Response.cookie(Cookie).expires = Now() - 1) 删除 cookie，但由于我使用 JavaScript 制作了 cookie，它不是 HTTPOnly，所以我无法使用 ASP 访问它。（我刚学到这一点，所以我不是 100% 知道这一切的原因，但确实如此。）

那么，回到第一行代码，为什么我没有看到带有该行代码的 JavaScript 警告框？我显然错过了一些简单的东西（它总是很简单）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T14:04:02.567

-tags的`language=""`属性`<script/>`已弃用，错误的值会阻止脚本在许多浏览器中执行。

对我来说，您似乎正朝着该`type=""`属性前进。

试试下面的代码：

```
Response.write("<script type=""text/javascript"">alert(""What up dog"");</script>") 
```

# java - 有没有办法安装 jar 本地 gradle 存储库，就像它在 mave (maven install:install-file

> ID：14460253
> 
> 赞同：22
> 
> 时间：2013-01-22T13:57:16.200
> 
> 标签：java, maven, jar, gradle

我以前只使用 maven，当项目需要一些在任何存储库中都不可用的 jar 时，我可以使用

```
mvn install:install-file -Dfile=<path-to-file> -DgroupId=<group-id> \
    -DartifactId=<artifact-id> -Dversion=<version> -Dpackaging=<packaging> 
```

这很容易。

现在我与 gradle 斗争，我的项目依赖于一个不再存在于任何存储库中的 jar。我的磁盘上有 jar 文件。更改项目依赖项中的 jar 版本不适用于我的问题。

有没有办法在不更改任何项目依赖项的情况下从命令行将 jar 文件安装到 gradle 缓存中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T14:33:50.480

@DaveNewton 发布了一个关于将本地 Maven 存储库添加到 Gradle 的工件搜索路径的问题的链接。如果您仍然拥有本地 Maven 存储库，并且该文件已部署在那里，那么这将起作用。

Gradle 还允许您引用[本地文件系统](http://www.gradle.org/docs/current/userguide/dependency_management.html#sub%3afile_dependencies)上的依赖项。但是，如果您的计算机崩溃，您就有麻烦了。

我认为更好的方法是使用存储库管理器，例如[Nexus](http://www.sonatype.org/nexus/)或[Artifactory](http://www.jfrog.com/)。它应该在定期备份和/或使用 RAID 磁盘作为其存储库的单独机器上运行。

# zeromq - 快速文件传输

> ID：14460258
> 
> 赞同：5
> 
> 时间：2013-01-22T13:57:28.117
> 
> 标签：zeromq

有哪些不同的选项可用于快速文件传输？我知道快速是相对术语。基本上，其中一个组件（Tibco）用于将文件（最大 500MB）从我们的本地文件夹传输到客户端文件夹（B2B 区域）。这个组件内部使用 SFTP 协议，我们发现它的实现非常慢（需要 3/4 小时）。它的替代品是什么？1）零MQ可以用来传输文件吗？2）Tibco 有另外一种产品——托管文件传输，它在内部使用 RocketStream 协议（http://support.rocketstream.com/docs/RS12/server/index.html?the_rocketstream_protocols.html），他们声称这是超快的。3）这种情况下可以使用Apache Camel（FTP组件）吗？延迟和安全性是主要问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:17:00.157

看看 ZeroMQ FileMQ 项目，它可能适合您的需求（[https://github.com/zeromq/filemq](https://github.com/zeromq/filemq)）

# asp.net - 从gridview中选择列并传递给变量

> ID：14460263
> 
> 赞同：0
> 
> 时间：2013-01-22T13:57:37.663
> 
> 标签：asp.net, gridview, datagridviewcolumn

下面是我尝试从 10 中选择列数据的代码，但是代码无法正常工作

```
 string strSuppId = GridView1.SelectedRow.Cells[10].Text; 
```

错误消息：对象引用未设置为对象的实例。

我的标记

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataKeyNames="pProductId" DataSourceID="AccessDataSource1">
    <Columns>
        <asp:BoundField DataField="pProductId" HeaderText="pProductId" 
            InsertVisible="False" ReadOnly="True" SortExpression="pProductId" />
        <asp:BoundField DataField="pProductName" HeaderText="pProductName" 
            SortExpression="pProductName" />
        <asp:BoundField DataField="pProductImage" HeaderText="pProductImage" 
            SortExpression="pProductImage" />
        <asp:BoundField DataField="pProductType" HeaderText="pProductType" 
            SortExpression="pProductType" />
        <asp:BoundField DataField="pProductWeight" HeaderText="pProductWeight" 
            SortExpression="pProductWeight" />
        <asp:BoundField DataField="pProductDesign" HeaderText="pProductDesign" 
            SortExpression="pProductDesign" />
        <asp:BoundField DataField="PProductColor" HeaderText="PProductColor" 
            SortExpression="PProductColor" />
        <asp:BoundField DataField="pProductTransparency" 
            HeaderText="pProductTransparency" SortExpression="pProductTransparency" />
        <asp:BoundField DataField="pProductQuantity" HeaderText="pProductQuantity" 
            SortExpression="pProductQuantity" />
        <asp:BoundField DataField="pProductUnitPrice" HeaderText="pProductUnitPrice" 
            SortExpression="pProductUnitPrice" />
        <asp:BoundField DataField="pSupplierId" HeaderText="pSupplierId" 
            SortExpression="pSupplierId" />
    </Columns> 
```

我的代码文件

```
protected void btnAddPdt_Click(object sender, EventArgs e)
    {
        if (txtPdtName.Text == "" || ddlPdtType.SelectedItem.Text == "" || txtPrice.Text == "")
        {
            MessageBox.Show("Fields cannot be empty", "Error Message");
        }
        else
        {
            OleDbConnection mDB = new OleDbConnection();
            mDB.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data source="
            + Server.MapPath("~/App_Data/Database.accdb");
            mDB.Open();
            Type csType = this.GetType();
            OleDbCommand cmd;

            string strSuppId = GridView1.SelectedRow.Cells[10].Text;

            string sqlInsert = "INSERT INTO "
                + " Products (pProductName, pProductType, pProductWeight, pProductDesign, pProductColor, pProductTransparency, pProductQuantity, pProductUnitPrice, pSupplierId)"
                + " VALUES (@pdtName, @pdtType, @pdtWt, @pdtDesign, @pdtColor, @pdtTrans, @pdtQty, @pdtPrice, @pSuppId)";

            cmd = new OleDbCommand(sqlInsert, mDB);
            cmd.Parameters.AddWithValue("@pdtName", txtPdtName.Text);
            cmd.Parameters.AddWithValue("@pdtType", ddlPdtType.SelectedItem.Text);
            cmd.Parameters.AddWithValue("@pdtWt", txtPdtWt.Text);
            cmd.Parameters.AddWithValue("@pdtDesign", txtDesign.Text);
            cmd.Parameters.AddWithValue("@pdtColor", txtColor.Text);
            cmd.Parameters.AddWithValue("@pdtTrans", ddlTrans.SelectedItem.Text);
            cmd.Parameters.AddWithValue("@pdtQty", txtQuantity.Text);
            cmd.Parameters.AddWithValue("@pdtPrice", txtPrice.Text);
            cmd.Parameters.AddWithValue("@pSuppId", strSuppId);

            cmd.ExecuteNonQuery();
            mDB.Close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:02:16.137

试试下面的编码...

**将变量声明为全局**

```
public string _Data = ""; 
```

**编写如下所示的 Gridview SelectedIndexed 事件**

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e) {
    string data = "";
    GridViewRow row = GridView1.SelectedRow;
    _Data = row.Cells[10].Text;
} 
```

**然后改变你的编码如下**

```
string strSuppId = GridView1.SelectedRow.Cells[10].Text;

to

string strSuppId = _Data 
```

**在 Button_Click 从 GridView 中选择行之前...然后只有它返回数据...。**

# android - 导入应用程序后缺少密钥库

> ID：14460267
> 
> 赞同：0
> 
> 时间：2013-01-22T13:57:44.773
> 
> 标签：android, keystore

我正在研究 Eclipse Juno。这太糟糕了，所以我决定改用 Indigo。

我在 Indigo 上导入了一个 Android 应用程序，从工作区“导入”（该应用程序是用 Juno 制作的）

现在，如果我尝试导出应用程序（执行“apk”），我会想念旧的密钥库。我记得“位置”和“通过”，但看起来没有。我应该怎么办？

# ios - 如何从通讯录中检索“自我”

> ID：14460268
> 
> 赞同：2
> 
> 时间：2013-01-22T13:57:50.643
> 
> 标签：ios, objective-c, cocoa-touch, abaddressbook

我注意到，在 iOS 6 中，我的地址簿上有我自己的名字和我的号码、电子邮件等。我不知道这是新的还是出于某种原因，某些应用程序将自己添加到了那里...

无论如何，有没有办法从通讯簿中检索“自我”？

我已经尝试过这个解决方案，但它没有用： [Getting user's default email address in Cocoa](https://stackoverflow.com/questions/4893099/getting-users-default-email-address-in-cocoa)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:03:30.380

在 iOS 6 或更早版本上没有 API 可以这样做。如果您想查看，请通过[http://bugreporter.apple.com](http://bugreporter.apple.com)联系 Apple以请求它。

# android - 如何将 Toast 的动态位置设置为视图？

> ID：14460269
> 
> 赞同：8
> 
> 时间：2013-01-22T13:57:51.643
> 
> 标签：android, events, checkbox, toast

首先这不是完整的代码

```
@Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) 
    {
        Toast toast=Toast.makeText(getApplicationContext(), "", Toast.LENGTH_SHORT);
        toast.setGravity(Gravity.CENTER_HORIZONTAL, 0, 0); 
        View view=toast.getView();
        switch(buttonView.getId())
        {
            case R.id.chkRed: if(chkRed.isChecked())
            {   
                              chkGreen.setChecked(false);
                              chkBlue.setChecked(false);
                              chkYellow.setChecked(false);
                              toast.setText("You Selected Red");
                                toast.setGravity(Gravity.NO_GRAVITY,buttonView.getRight(), chkRed.getTop());
                             //top does not align
                             //it align perfectly to right of checkbox
                              view.setBackgroundColor(Color.RED);
            }
                             break;
}
} 
```

所以现在的问题是我想在复选框旁边显示吐司，我尝试使用`setGravity()`，但它只是没有处理，并且已经被击中并尝试了很长时间，但没有任何进展

如何在复选框旁边显示吐司？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T03:57:48.473

好的，我终于想出了如何在复选框或其他视图旁边吐司

**1.**您需要在视图的屏幕上获取位置，通过

```
buttonView.getLocationOnScreen(location); 
```

有关更多参考，请参阅[getLocationOnScreen(int[])](http://developer.android.com/reference/android/view/View.html#getLocationOnScreen%28int%5B%5D%29)

**2.**设置重力烤面包使用

```
toast.setGravity(Gravity.TOP|Gravity.LEFT,buttonView.getRight()+5, 
location[1]-10); 
```

这里最重要的是将`x-coordinate`toast 设置为视图右侧，例如，并从您获得`buttonView.getRight()`的 y 坐标`location[1]``getLocationOnScreen()`

```
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) 
    {
        Toast toast=Toast.makeText(getApplicationContext(), "", Toast.LENGTH_SHORT);
        toast.setGravity(Gravity.TOP|Gravity.LEFT, 0, 0); 
        View view=toast.getView();
        int location[]=new int[2];
        buttonView.getLocationOnScreen(location);
        switch(buttonView.getId())
        {
            case R.id.chkRed: if(chkRed.isChecked())
            {   
                              chkGreen.setChecked(false);
                              chkBlue.setChecked(false);
                              chkYellow.setChecked(false);
                              toast.setText("You Selected Red");
                              toast.setGravity(Gravity.TOP|Gravity.LEFT,buttonView.getRight()+5, location[1]-10);
                              view.setPadding(1, 1, 1, 1);
                              view.setBackgroundColor(Color.RED);
            }

        }
    } 
```

# jquery - 选择日期后不要销毁日期选择器

> ID：14460271
> 
> 赞同：1
> 
> 时间：2013-01-22T13:57:58.600
> 
> 标签：jquery, jquery-ui, datepicker

我使用来自 jQuery UI 的 datepicker。

在这里你可以看到我的初始代码

```
$('#fromDate').datepicker({
  showOtherMonths: true,
  minDate: 0,
  dateFormat: 'dd MM yy',
  onSelect: function(dateText, inst) { 
$(this).text(dateText);
  },
  altField: '#startDate',
  altFormat: 'dd.mm.yy'
},
$.datepicker.regional[ "ru" ]
); 
```

选择日期后，日期选择器销毁，但我不需要该日期选择器销毁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:49:37.007

您面临的问题是因为写入了您的日期选择器附加到的 div 的 text 属性。所以想法是创建两个单独的 div，一个用于日期选择器，一个用于选定值。

HTML：

```
Date: <div id='SelectedDate'></div>
<div id='fromDate'></div> 
```

查询：

```
$('#fromDate').datepicker({
    showOtherMonths: true,
    minDate: 0,
    showAnim: '',
    dateFormat: 'dd MM yy',
    onSelect: function (dateText, inst) {
        $('#SelectedDate').text(dateText);
    },
    altField: '#startDate',
    altFormat: 'dd.mm.yy'
},
$.datepicker.regional["ru"]); 
```

现在，您可以在 HTML 中添加其他元素，并在不再需要时在 lcikc 上执行 .datepicker("destroy") 。

编辑：忘记小提琴链接：http: [//jsfiddle.net/TGy3s/1/](http://jsfiddle.net/TGy3s/1/)

# winforms - SMO 还原失败/无法打开备份设备错误

> ID：14460273
> 
> 赞同：3
> 
> 时间：2013-01-22T13:58:19.023
> 
> 标签：winforms, c#-4.0, sql-server-2008-r2, smo

我在尝试恢复 SQL Server 2008 R2 数据库时遇到错误：

> 服务器“KIMO-PC”的恢复失败。

使用的代码：

```
 Server myServer = new Server("KIMO-PC");
    Database myDatabase = new Database(myServer, "POS");
    Restore restoreDB = new Restore();
    restoreDB.Database = myDatabase.Name;
    restoreDB.Action = RestoreActionType.Database;
    restoreDB.Devices.AddDevice(FileName, DeviceType.File);

    restoreDB.ReplaceDatabase = false;

    restoreDB.NoRecovery = true;

    restoreDB.PercentComplete += CompletionStatusInPercent;
    restoreDB.Complete += Restore_Completed;

    restoreDB.SqlRestore(myServer); 
```

这是异常详细信息

```
Microsoft.SqlServer.Management.Smo.FailedOperationException was unhandled HelpLink=http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&ProdVer=10.50.1600.1+((KJ_RTM).100402-1540+)&EvtSrc=Microsoft.SqlServer.Management.Smo.ExceptionTemplates.FailedOperationExceptionText&EvtID=Restore+Server&LinkId=20476 Message=Restore failed for Server 'KIMO-PC'.
 Source=Microsoft.SqlServer.SmoExtended Operation=Restore 
StackTrace: at Microsoft.SqlServer.Management.Smo.Restore.SqlRestore(Server srv) at ICS.Forms.frmRestore.Restoredb(String FileName) 
  in D:\POS\POS\POS\Database\RestoreDB.cs:line 56 at ICS.Forms.frmRestore.btnBackup_Click(Object sender, EventArgs e) 
  in D:\POS\POS\POS\Database\RestoreDB.cs:line 35 at System.Windows.Forms.Control.OnClick(EventArgs e) 
  at System.Windows.Forms.Button.OnClick(EventArgs e) at System.Windows.Forms.Button.PerformClick() 
  at System.Windows.Forms.Form.ProcessDialogKey(Keys keyData) 
  at System.Windows.Forms.Control.ProcessDialogKey(Keys keyData) 
  at System.Windows.Forms.Control.PreProcessMessage(Message& msg) 
  at System.Windows.Forms.Control.PreProcessControlMessageInternal(Control target, Message& msg) 
  at System.Windows.Forms.Application.ThreadContext.PreTranslateMessage(MSG& msg) 
  at System.Windows.Forms.Application.ThreadContext.System.Windows.Forms.UnsafeNativeMethods.IMsoComponent.FPreTranslateMessage(MSG& msg) 
  at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData) 
  at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context) 
  at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context) 
  at System.Windows.Forms.Application.Run(Form mainForm) at POS.Program.Main() in D:\POS\POS\POS\Program.cs:line 18 
  at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args) 
  at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args) 
  at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly() at System.Threading.ThreadHelper.ThreadStart_Context(Object state) 
  at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx) 
  at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) at System.Threading.ThreadHelper.ThreadStart() 
InnerException: Microsoft.SqlServer.Management.Smo.SmoException HelpLink=http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&ProdVer=10.50.1600.1+((KJ_RTM).100402-1540+)&LinkId=20476 
  Message=System.Data.SqlClient.SqlError: Cannot open backup device 'C:\Users\kimo\Desktop\POS.bak'. Operating system error 5(failed to retrieve text for this error. Reason: 15100). 
  Source=Microsoft.SqlServer.Smo StackTrace: 
  at Microsoft.SqlServer.Management.Smo.ExecutionManager.ExecuteNonQueryWithMessage(StringCollection queries, ServerMessageEventHandler dbccMessageHandler, Boolean errorsAsMessages) 
  at Microsoft.SqlServer.Management.Smo.BackupRestoreBase.ExecuteSql(Server server, StringCollection queries) 
  at Microsoft.SqlServer.Management.Smo.Restore.SqlRestore(Server srv) InnerException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:09:02.773

看一下堆栈跟踪内部异常：

> 无法打开备份设备“C:\Users\kimo\Desktop\POS.bak”。操作系统错误 5

很可能，SQL Server 无权查看 kimo\Desktop 中的文件。将备份移至其他文件夹，例如 c:\temp，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:29:14.440

尝试这个：

```
Database currentDb = srvsql.Databases["dbname"];// get the current database

if (currentDb != null)
{
    Connection.ChangeDatabase("dbname");
    //Stop all processes running on the DataBase database
    server.KillAllProcesses("dbname ");
} 
```

# jenkins - 声纳与詹金斯

> ID：14460275
> 
> 赞同：2
> 
> 时间：2013-01-22T13:58:23.483
> 
> 标签：jenkins, continuous-integration, sonarqube

我们可以比较 Jenkins 和 Sonar 吗？如果是的话如何。我想知道 Jenkins 和 Sonar 的优缺点。比如为什么要使用声纳，它比詹金斯有什么优势，反之亦然？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-22T16:41:03.577

> 我们可以比较詹金斯和声纳吗？

不。

**[Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins)**是一个实现[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)的工具。其快速总结是每次进行更改时集成、构建和测试代码。

**[Sonar](http://www.sonarsource.org/)**是“一种管理代码质量的工具”。它专注于分析代码。

顺便说一句，他们在开发中扮演不同的角色，有一个用于与声纳集成的 Jenkins 插件。请参阅此处的讨论：[为什么为 Jenkins 使用声纳插件而不是简单地使用 maven 目标“声纳：声纳”？](https://stackoverflow.com/questions/10688139/why-use-sonar-plugin-for-jenkins-rather-than-simply-use-maven-goal-sonarsonar)

# jquery - Phonegap + QR 扫描仪 + Iphone

> ID：14460278
> 
> 赞同：0
> 
> 时间：2013-01-22T13:58:30.850
> 
> 标签：jquery, iphone, cordova

我正在使用 phonegap 构建 Iphone 应用程序。我正在尝试包括简单的 QR 扫描仪。我正在寻找最好的解决方案。我尝试了 XZing，但由于缺乏教程，我遇到了很多错误......

对任何其他解决方案的任何建议？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:47:39.733

您应该只使用在后台使用 ZXing的[BarcodeScanner插件。](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner)

# javascript - 根据其值将字符串分配给给定的“桶”，并保持桶大小大致相等

> ID：14460279
> 
> 赞同：0
> 
> 时间：2013-01-22T13:58:36.277
> 
> 标签：javascript, functional-programming, google-apps-script

我不确定这个问题对于这种格式是否过于模糊，但我会尽量具体。

我正在将产品信息添加到将事物存储为 JSON 对象的 Google Apps Script ScriptDB。由于当对象太多或对象太大时行为不可靠，我相信我必须像这样存储它们：

```
{
    "bucket": "AB",
    "data": {
        "AB8000": {
            "price": 25.99,
            "qty": 29,
            "tstamp": 1358861169691,
        },
        "AB0900": {
            "price": 24.99,
            "qty": 0,
            "tstamp": 1358861169691,
        }
    }
} 
```

大约有 25,000 种产品，我需要一个算法，它将 SKU（例如 AB8000）作为参数并返回一个存储桶来分配该 SKU。

我的问题是SKU的分布不均匀。使用前两个字符（“AB”）不起作用，因为有些桶有 2,500 个成员，有些桶有 5 个。我能做的最好的是 (SKU[3] + SKU[5])产生（显然）100 个桶，最大的有大约 600 个成员。600 名成员似乎是问题开始出现的神奇数字。

是否有我可以在 SKU 上运行的数学或散列函数来可靠地均匀分布它们？我不需要所有桶的大小完全相同，但理想情况下，最大的桶不超过 400 个，总桶数在 50-100 个之间。

- 编辑：

我现在正在尝试这样的功能：

```
var sum = 0;
for (var i = 0; i < sku.length; i++) {
  sum = sum + sku.charCodeAt(i);
}

var bucket = sum % M; // M is bucket size

return bucket; 
```

但这也不能平均分配它们。当我为 'M' 使用 100 的值时，我得到一个分布： `1 1 1 1 4 7 12 9 19 31 38 61 91 107 151 152 184 216 249 290 317 335 362 392 446 511 513 571 574 604 657 680 680 697 716 703 698 687 701 677 672 683 679 655 671 662 640 629 651 623 596 556 532 485 425 384 314 245 204 163 125 91 59 39 27 19 11 11 10 6 6`

当我为“M”使用 60 值时，我得到：

`677 672 683 679 655 671 662 640 629 651 623 596 556 532 485 425 384 314 245 204 163 125 91 59 40 31 26 23 20 29 37 44 63 92 107 151 152 184 217 250 290 317 336 363 392 446 511 513 571 574 604 657 680 679 697 716 703 698 687`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:35:01.670

几乎*任何*散列方案都可以做到这一点。正如评论者所建议的那样，将字符加起来，然后`% 100`选择一个桶。

# ios - 如何调试 iOS 中发布模式构建的问题？

> ID：14460281
> 
> 赞同：46
> 
> 时间：2013-01-22T13:58:48.100
> 
> 标签：ios, xcode

我正在开发一个 iOS 应用程序，我注意到只有在应用程序以发布模式构建时才能重现的错误。我发现运行我构建的发布模式应用程序的唯一方法是构建一个存档，使用我的调试配置文件对其进行签名，然后对我的设备进行临时部署。但是使用这种方法我不能附加调试器，我什至不确定我是否可以附加它，如果它在发布版本对代码运行优化器后能正常工作。

有谁知道调试仅在发布模式下构建应用程序时才能重现的问题的好方法？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-23T05:58:39.697

通常 Debug 构建禁用优化 ( `-O0`) 以使调试更容易，而 Release 构建启用优化 (`-O3`或`-Os`)，这使代码运行得更快，但也使调试更难（但并非不可能）。您可以在调试配置中进入 Xcode 中的构建设置并临时调高优化级别 - 这将保留所有其他调试好东西（符号等），但希望也能清除发布模式错误。（完成后不要忘记将优化级别重置为`-O0`调试配置！）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-22T15:03:30.167

1.  Go to "Project" command in an Xcode application menu and chose "Edit Scheme"(Shortcut: ⌘&lt; )
2.  Select "Run Project name" in left pane
3.  In right pane, under "Info" tab change "Build Configuration" to "Release"

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-10-14T07:32:25.377

启用调试后，您无法在发布模式下运行应用程序。那不是故意的。

在发布模式下运行应用程序时，您必须找到一种不同的方式来观察应用程序的行为（例如使用警报）。

[![取消选中 <code>Debug executable</code> do run your app in release mode](../Images/4544fc8c7a90bc9fcb0720431c132db8.png)](https://i.stack.imgur.com/wieUA.png)

此外，您必须信任设备上的分发配置文件。Xcode 将在第一次运行时通过警告消息通知并指导您。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-16T06:41:34.483

要在发布模式下调试 iOS 应用程序，请修改设置：构建设置 -> 部署 -> 部署后处理 -> 发布 -> 将值设置为“否”

[将“部署后处理：发布”值设置为“否”](https://i.stack.imgur.com/77wrI.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-04T21:47:28.867

为了实现这一点，我不得不短暂地打开自动签名。您无法使用 iOS 分发证书（您需要 iOS 开发证书）直接在设备上构建，并且您无法使用 iOS 开发证书（您需要 iOS 分发证书）发布到 App Store。

我的调试模式配置为使用 iOS 开发证书直接在设备上构建。我的发布模式配置为使用 iOS 分发证书以允许在所有设备上安装应用程序。为了在设备上以发布模式运行，我短暂切换到自动代码签名进行测试。完成测试后，我使用 git 恢复到以前的 Xcode 配置。

不是最优雅的方式，但它完成了工作。

# c# - 如何使用 opencvsharp 获取鼠标点击的位置？

> ID：14460285
> 
> 赞同：0
> 
> 时间：2013-01-22T13:58:51.330
> 
> 标签：c#, get, position, mouse, opencvsharp

我想获得鼠标点击 IplImage 的位置。我搜索了它，但我找不到任何东西。在 c# 中没有使用 openCVsharp 方法获取鼠标位置的来源。所以我尝试了一些东西。当代码启动时，它正在等待等待时间，当时我用鼠标单击，但没有任何事情发生。在等待键之后，代码停止。有没有办法获得鼠标点击 IplImage 的位置？

```
namespace mousedeneeme
{

    class Program
    {           
        static void Main(string[] args)
        {
            IplImage I_clean = Cv.LoadImage("Iclean.tiff", LoadMode.GrayScale);

            String s = Cv.NamedWindow("I_clean image").ToString();

            CvMouseCallback mo = new CvMouseCallback(on_mouse);    

            Cv.SetMouseCallback(s, on_mouse);

            Cv.ShowImage("I_clean image", I_clean);
            Cv.WaitKey(5000);

        }
        public static void on_mouse(MouseEvent me, int x, int y, MouseEvent me7) {

            Console.WriteLine(x);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T12:13:53.343

这是工作代码

```
CvWindow w = new CvWindow("OpenCV Example") 

w.OnMouseCallback+=new CvMouseCallback(on_mouse);

use += because you are binding event 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:17:30.590

尝试这个

```
#include "stdafx.h"
#include <cv.h>
#include <highgui.h>

//callback function
void mouseEvent(int evt, int x, int y, int flags, void* param){
    if(evt==CV_EVENT_LBUTTONDOWN){
       printf("%d %d\n",x,y);
     }
}

    int main()
    {

    cvNamedWindow("MyWindow");

    //assigning the callback function for mouse events
    cvSetMouseCallback("MyWindow", mouseEvent, 0);

    //load and display an image
    IplImage* img = cvLoadImage("C:/Iclean.tiff");
    cvShowImage("MyWindow", img);

    //wait for key press
    cvWaitKey(0);

    //cleaning up
    cvDestroyWindow("MyWindow");
    cvReleaseImage(&img);

    return 0;
   } 
```

# mysql - 怎样才能保证PROC EDURE能在MySQL中全部成功运行？

> ID：14460286
> 
> 赞同：0
> 
> 时间：2013-01-22T13:58:53.663
> 
> 标签：mysql, stored-procedures, procedure

这是我的程序：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `user_active_account`(IN i_email VARCHAR(255), 
IN i_active_code VARCHAR(255))
BEGIN
    START TRANSACTION;
    DELETE FROM activeCodes WHERE active_code = i_active_code;
    UPDATE users SET status = 1 WHERE email = i_email;
    COMMIT;   
END 
```

我这里有个问题，我想执行`DELETE FROM activeCodes WHERE active_code = i_active_code`成功，如果这行不能执行成功（比如不能删除任何东西），`UPDATE users SET status = 1 WHERE email = i_email`就不能执行。我怎样才能关注这种行为？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:05:26.493

检查 mysql_affected_rows。如果大于0，那么肯定有删除。希望有帮助

# javascript - 订购 jQuery 函数，仅在最后一个完成时运行

> ID：14460288
> 
> 赞同：0
> 
> 时间：2013-01-22T13:59:00.563
> 
> 标签：javascript, jquery

我试图在 jquery 中控制我的函数的顺序，点击 id 就像一个图像淡出，要交换的图像源，然后新图像淡入。

我有以下那种作品，只有它一次完成，他们是防止这种情况的一种方法吗？

```
 // Animate height of div containing information
    $(this).animate({
        'height' : '600px'  
    },500, function(){
        $('html, body').animate({ scrollTop: $(this).offset().top });

        // Fade initial image out
        img.fadeOut();

        // Switch to hi-red image
        img.attr('src', function(i, value) {
            return '_includes/images/work/hires/' + value;
        });

        //Fade Hi res image in
        img.fadeIn();  
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:02:28.850

你应该能够做到这一点`promise()`

```
// Fade initial image out
img.fadeOut();

// Switch to hi-red image
img.promise().done(function() {
    $(this).attr('src', function(i, value) { return '_includes/images/work/hires/' + value; });
});

//Fade Hi res image in
img.fadeIn(); 
```

文档：[http ://api.jquery.com/promise/](http://api.jquery.com/promise/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T14:03:42.270

`fadeOut`可以取一个`complete`属性：[http ://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

```
// Animate height of div containing information
$(this).animate({
    'height' : '600px'  
},500, function(){
    $('html, body').animate({ scrollTop: $(this).offset().top });

    // Fade initial image out
    img.fadeOut(400, function() {
        // Switch to hi-red image
        img.attr('src', function(i, value) {
            return '_includes/images/work/hires/' + value;
        });

        //Fade Hi res image in
        img.fadeIn();  
    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T14:01:00.360

您可以使用 jQuery 的“队列”功能对函数调用进行排队。

[http://api.jquery.com/queue/](http://api.jquery.com/queue/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T14:06:47.240

您应该使用回调函数。

```
// Fade initial image out
img.fadeOut(duration, function () {
    // Switch to hi-red image
    img.attr('src', function(i, value) {
        return '_includes/images/work/hires/' + value;
    });

    //Fade Hi res image in
    img.fadeIn();
}) 
```

这样，一旦第一张图像淡出，jQuery 将调用您作为参数传递的匿名函数。

来源：[http ://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

# opengl - 设置 OpenGL 程序和着色器

> ID：14460289
> 
> 赞同：2
> 
> 时间：2013-01-22T13:59:04.287
> 
> 标签：opengl, shader

在使用了一个程序和一组顶点/片段着色器之后，我需要使用更多的程序，所以我最初没有任何参数的设置函数已经不够用了。

对于我的设置函数，我传递了 shader_program 和两个着色器源。当我尝试在我的显示方法中使用该程序时，GLuint 程序句柄为零。我目前不明白的是，为什么当我为我的着色器使用固定源时，这一切都奏效了。它可能是一个 C++ 程序并且我以错误的方式传递参数吗？我没有收到任何错误消息，但屏幕上没有呈现任何内容。

这是我用来调用着色器设置函数和函数本身的代码：

```
// Variables
GLuint shader_program;

const GLchar *vertex_shader =   
"#version 330\n"
""
"layout (location = 0) in vec3 in_position;"
...
"";

// In my main function, I call this to set up the shaders
installShaders(shader_program, vertex_shader, fragment_shader);

// SET-UP-METHOD
void installShaders(GLuint program_handle, const GLchar *vertex_shader_source, const GLchar *fragment_shader_source)
{
// Handles for the shader objects
GLuint   vertex_shader_name;
GLuint fragment_shader_name;

// Status values 
GLint   vertex_shader_compiled;
GLint fragment_shader_compiled;
GLint      successfully_linked;

// Generate shader names
vertex_shader_name   = glCreateShader(GL_VERTEX_SHADER);
fragment_shader_name = glCreateShader(GL_FRAGMENT_SHADER);

// Specify the sources for the shaders
glShaderSource(  vertex_shader_name, 1, (const GLchar**)&vertex_shader_source  , NULL);
glShaderSource(fragment_shader_name, 1, (const GLchar**)&fragment_shader_source, NULL);

// Compile Vertex shader and check for errors
glCompileShader(vertex_shader_name);
glGetShaderiv(vertex_shader_name, GL_COMPILE_STATUS, &vertex_shader_compiled);
printShaderInfoLog(vertex_shader_name);

// Compile Fragment shader and check for errors
glCompileShader(fragment_shader_name);
glGetShaderiv(fragment_shader_name, GL_COMPILE_STATUS, &fragment_shader_compiled);
printShaderInfoLog(fragment_shader_name);

// Exit if the shaders couldn't be compiled correctly
if(!vertex_shader_compiled || !fragment_shader_compiled)
{
    printf("Shaders were not compiled correctly!\n");
    exit(EXIT_FAILURE);
}

// Generate program name
program_handle = glCreateProgram();

// Attach shaders to the program
glAttachShader(program_handle, vertex_shader_name);
glAttachShader(program_handle, fragment_shader_name);

// Link program and check for errors
glLinkProgram(program_handle);
glGetProgramiv(program_handle, GL_LINK_STATUS, &successfully_linked);
printProgramInfoLog(program_handle);

// Exit if the program couldn't be linked correctly
if(!successfully_linked)
{
    printf("Program was not linked correctly!\n");
    exit(EXIT_FAILURE);
}

// Set up initial values of uniform variables
glUseProgram(program_handle);

location_projectionMatrix = glGetUniformLocation(program_handle, "myProjectionMatrix");
printf("Location of the uniform -->myProjectionMatrix<--- : %i\n", location_projectionMatrix);
projectionMatrix = glm::mat4(1.0f);
glUniformMatrix4fv(location_projectionMatrix, 1, GL_FALSE, glm::value_ptr(projectionMatrix));

location_modelViewMatrix = glGetUniformLocation(program_handle, "myModelViewMatrix");
printf("Location of the uniform -->myModelViewMatrix<--- : %i\n", location_modelViewMatrix);
modelViewMatrix = glm::mat4(1.0f);
glUniformMatrix4fv(location_modelViewMatrix, 1, GL_FALSE, glm::value_ptr(modelViewMatrix));

glUseProgram(0);

// Everything worked
printf("Shaders were set up correctly!\n");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T14:57:29.270

问题是您将 GLSL 着色器程序名称（从 返回的值`glCreateShader`）存储到的变量是按值传递到例程中的。因此，当函数返回时，它的值会丢失。通过引用传递值（作为指针或作为 C++ 引用），然后在函数退出时将保留该值，并且您将能够在应用程序的其他部分引用着色器。

# sql-server - TSQL 查询索引按日期确定何时创建？

> ID：14460293
> 
> 赞同：3
> 
> 时间：2013-01-22T13:59:14.620
> 
> 标签：sql-server, tsql

SQL Server 2008 R2 中有没有办法确定何时通过 TSQL 创建索引？sys.indexes 表上没有任何日期字段。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:22:23.487

您可以将它加入到具有 create_date 字段的 sys.objects 中。

```
SELECT TOP 10
        *
FROM    <yourdb>.sys.indexes i
        INNER JOIN <yourdb>.sys.objects o ON i.object_id = o.object_id
WHERE o.type NOT IN ('S', 'IT')
ORDER BY create_date DESC 
```

Re-edit-the-edit：我不应该在早上喝咖啡之前尝试交流。

与链接的答案相同的警告适用，因为它们实际上不是索引的创建日期，而是相关对象。

如果这是您需要做的事情，您可以记录 DDL 语句：

[http://madhuottapalam.blogspot.ca/2008/06/faq-how-to-find-index-creation-rebuild.html](http://madhuottapalam.blogspot.ca/2008/06/faq-how-to-find-index-creation-rebuild.html)

# php - 未定义的偏移量：0（Oscommerce bm.categories.php）

> ID：14460297
> 
> 赞同：0
> 
> 时间：2013-01-22T13:59:16.900
> 
> 标签：php, oscommerce

我对 oscommerce 中的文件有疑问。在自定义的 bm_categories.php 文件中出现错误：

**注意：未定义的偏移量：第 52 行 xxx\includes\modules\boxes\bm_categories.php 中的 0**

这是代码。我已将第 52 行标记为：//THIS IS LINE 52// 我真的希望有人能给我一个提示。

这是代码：

```
<?php
/*
  $Id$

  osCommerce, Open Source E-Commerce Solutions
  http://www.oscommerce.com

  Copyright (c) 2010 osCommerce

  Released under the GNU General Public License
  Modfied by Kevin Neufeld
  Date: Novemeber 16, 2010
  Released as contributions: Decenber 9th, 2010

*/

  class bm_categories {
    var $code = 'bm_categories';
    var $group = 'boxes';
    var $title;
    var $description;
    var $sort_order;
    var $enabled = false;

    function bm_categories() {
      $this->title = MODULE_BOXES_CATEGORIES_TITLE;
      $this->description = MODULE_BOXES_CATEGORIES_DESCRIPTION;

      if ( defined('MODULE_BOXES_CATEGORIES_STATUS') ) {
        $this->sort_order = MODULE_BOXES_CATEGORIES_SORT_ORDER;
        $this->enabled = (MODULE_BOXES_CATEGORIES_STATUS == 'True');

        $this->group = ((MODULE_BOXES_CATEGORIES_CONTENT_PLACEMENT == 'Left Column') ? 'boxes_column_left' : 'boxes_column_right');
      }
    }

    function tep_show_category($counter) {
      global $tree, $categories_string, $cPath_array, $pCounter;           //added $pCounter
      //additional Variables
      //$pCounter is also globally defined and initialized in getData() and gets changed at the end of this function

      $nCounter = $tree[$counter]['next_id'];

     //Get item Levels
     if($pCounter == 0){
       $pLevel = 0;
     }else{
       $pLevel = $tree[$pCounter]['level'];
     }

      $cLevel = $tree[$counter]['level'];

//<---- THIS IS LINE 52 ------>//
     $nLevel = $tree[$nCounter]['level'];

      //Start of UnsortedList <ul> if Category level > 0
      if($cLevel > 0){
        if($cLevel != $pLevel){
            $categories_string .= '<ul class="level ' . $cLevel . '">';
        }
      }

      //Start of ListItem <li> and determines if List Item is Current
      if (isset($cPath_array) && in_array($counter, $cPath_array)) {
        if($cLevel == 0){
          $categories_string .= '<li id="current" class=" active item'.$counter.'"><a href="';
        }else{
          $categories_string .= '<li class="item'.$counter.'"><a href="';
        }
      }else{
        $categories_string .= '<li class="item'.$counter.'"><a href="';
      }

      //Gets and inserts URL path for link
      if ($tree[$counter]['parent'] == 0) {
        $cPath_new = 'cPath=' . $counter;
      } else {
        $cPath_new = 'cPath=' . $tree[$counter]['path'];
      }

      $categories_string .= tep_href_link(FILENAME_DEFAULT, $cPath_new) . '">';

      //Gets CatgoryCounts if Set in Admin -- Seperator is also located here
      if (SHOW_COUNTS == 'true') {
        $products_in_category = tep_count_products_in_category($counter);
        if ($products_in_category > 0) {
          $showCount_string = '<span class="countSeperator">&nbsp;&raquo;&nbsp;</span><span class="showCounts">[' . $products_in_category . ']</span>';
        }
      }

      //Start of Span <span> around Category Name
      if (isset($cPath_array) && in_array($counter, $cPath_array)) {
        $categories_string .= '<span class="itemParentName">' . $tree[$counter]['name'] . '</span></a>';
      } else {
        $categories_string .= '<span class="itemName">'. $tree[$counter]['name'] . '</span></a></li>';
      }

      //This is used to determin the level and place the correct number of closing tags  
      if($cLevel > 0){
        if ($cLevel > $nLevel){
          $j = abs($cLevel - $nLevel);
          $categories_string .= str_repeat('</ul></li>', $j);
        }elseif ($nCounter == false){
          $categories_string .= str_repeat('</ul></li>', $tree[$counter]['level']);
        }
     }

      $pCounter = $counter;

      if ($tree[$counter]['next_id'] != false) {
        $this->tep_show_category($tree[$counter]['next_id']);
      }
    }

    function getData() {
      global $categories_string, $tree, $languages_id, $cPath, $cPath_array, $pCounter;           //added $pCounter
      $pCounter = 0;        //initialize $pCounter
      $categories_string = '';
      $tree = array();

      $categories_query = tep_db_query("select c.categories_id, cd.categories_name, c.parent_id from " . TABLE_CATEGORIES . " c, " . TABLE_CATEGORIES_DESCRIPTION . " cd where c.parent_id = '0' and c.categories_status = 1 and c.categories_id = cd.categories_id and cd.language_id='" . (int)$languages_id ."' order by sort_order, cd.categories_name");
      while ($categories = tep_db_fetch_array($categories_query))  {
        $tree[$categories['categories_id']] = array('name' => $categories['categories_name'],
                                                    'parent' => $categories['parent_id'],
                                                    'level' => 0,
                                                    'path' => $categories['categories_id'],
                                                    'next_id' => false);

        if (isset($parent_id)) {
          $tree[$parent_id]['next_id'] = $categories['categories_id'];
        }

        $parent_id = $categories['categories_id'];

        if (!isset($first_element)) {
          $first_element = $categories['categories_id'];
        }
      }

      if (tep_not_null($cPath)) {
        $new_path = '';
        reset($cPath_array);
        while (list($key, $value) = each($cPath_array)) {
          unset($parent_id);
          unset($first_id);
          $categories_query = tep_db_query("select c.categories_id, cd.categories_name, c.parent_id from " . TABLE_CATEGORIES . " c, " . TABLE_CATEGORIES_DESCRIPTION . " cd where c.parent_id = '" . (int)$value . "' and c.categories_status = 1 and c.categories_id = cd.categories_id and cd.language_id='" . (int)$languages_id ."' order by sort_order, cd.categories_name");
          if (tep_db_num_rows($categories_query)) {
            $new_path .= $value;
            while ($row = tep_db_fetch_array($categories_query)) {
              $tree[$row['categories_id']] = array('name' => ''.$row['categories_name'],
                                                   'parent' => $row['parent_id'],
                                                   'level' => $key+1,
                                                   'path' => $new_path . '_' . $row['categories_id'],
                                                   'next_id' => false);

              if (isset($parent_id)) {
                $tree[$parent_id]['next_id'] = $row['categories_id'];
              }

              $parent_id = $row['categories_id'];

              if (!isset($first_id)) {
                $first_id = $row['categories_id'];
              }

              $last_id = $row['categories_id'];
            }
            $tree[$last_id]['next_id'] = $tree[$value]['next_id'];
            $tree[$value]['next_id'] = $first_id;
            $new_path .= '_';
          } else {
            break;
          }
        }
      }

      $this->tep_show_category($first_element);

      $data = '<div id="categoryBoxContainer" class="ui-widget infoBoxContainer">' .
              '  <div class="ui-widget-header infoBoxHeading">' . MODULE_BOXES_CATEGORIES_BOX_TITLE . '</div>' .
              '  <div class="ui-widget-content infoBoxContents" style="background-color:#f5f5f5; border:none;"><ul class="menu">' . $categories_string . '</ul></div>' .
              '</div>';

      return $data;
    }

    function execute() {
      global $SID, $oscTemplate;

      if ((USE_CACHE == 'true') && empty($SID)) {
        $output = tep_cache_categories_box();
      } else {
        $output = $this->getData();
      }

      $oscTemplate->addBlock($output, $this->group);
    }

    function isEnabled() {
      return $this->enabled;
    }

    function check() {
      return defined('MODULE_BOXES_CATEGORIES_STATUS');
    }

    function install() {
      tep_db_query("insert into " . TABLE_CONFIGURATION . " (configuration_title, configuration_key, configuration_value, configuration_description, configuration_group_id, sort_order, set_function, date_added) values ('Enable Categories Module', 'MODULE_BOXES_CATEGORIES_STATUS', 'True', 'Do you want to add the module to your shop?', '6', '1', 'tep_cfg_select_option(array(\'True\', \'False\'), ', now())");
      tep_db_query("insert into " . TABLE_CONFIGURATION . " (configuration_title, configuration_key, configuration_value, configuration_description, configuration_group_id, sort_order, set_function, date_added) values ('Content Placement', 'MODULE_BOXES_CATEGORIES_CONTENT_PLACEMENT', 'Left Column', 'Should the module be loaded in the left or right column?', '6', '1', 'tep_cfg_select_option(array(\'Left Column\', \'Right Column\'), ', now())");
      tep_db_query("insert into " . TABLE_CONFIGURATION . " (configuration_title, configuration_key, configuration_value, configuration_description, configuration_group_id, sort_order, date_added) values ('Sort Order', 'MODULE_BOXES_CATEGORIES_SORT_ORDER', '0', 'Sort order of display. Lowest is displayed first.', '6', '0', now())");
    }

    function remove() {
      tep_db_query("delete from " . TABLE_CONFIGURATION . " where configuration_key in ('" . implode("', '", $this->keys()) . "')");
    }

    function keys() {
      return array('MODULE_BOXES_CATEGORIES_STATUS', 'MODULE_BOXES_CATEGORIES_CONTENT_PLACEMENT', 'MODULE_BOXES_CATEGORIES_SORT_ORDER');
    }
  }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:01:39.700

做这个。如果 $tree 有索引 0 然后获取它的值，否则将其设置为空字符串或任何你想要的

```
$nLevel = isset($tree[$nCounter]['level']) ? $tree[$nCounter]['level'] : ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:01:49.193

这意味着，您的数组没有带有 value 的键`0`。检查`$tree`数组：

```
var_dump( $tree ); 
```

看看里面有什么。

看来，那：

```
$nCounter = $tree[$counter]['next_id']; 
```

没有任何价值；可能是，没有`next_id`？如果是这样，请`isset`在发布之前检查：

```
$nLevel = (isset($tree[$nCounter]['level']) ? $tree[$nCounter]['level'] : ''); 
```

或在设置时添加相同的检查`nCounter`：

```
$nCounter = (isset($tree[$counter]['next_id']) ? $tree[$counter]['next_id'] : 0); 
```

# c# - 将 VB DependencyProperty 转换为 C#

> ID：14460298
> 
> 赞同：0
> 
> 时间：2013-01-22T13:59:17.660
> 
> 标签：c#, .net, wpf, vb.net

我无法弄清楚如何将 DependencyProperty 的 VB 代码转换为 C# 代码。

我已经阅读[了这篇](http://www.codeproject.com/Articles/140620/WPF-Tutorial-Dependency-Property)文章......但无论如何我需要一些帮助。

```
Public Shared VideoDirectoryProperty As DependencyProperty = _
DependencyProperty.Register("VideoDirectory", GetType(String), GetType(Webcam), _
                                        New FrameworkPropertyMetadata(New PropertyChangedCallback(AddressOf DirectoryChange)))

Private Shared Sub DirectoryChange(ByVal source As DependencyObject, ByVal e As DependencyPropertyChangedEventArgs)

End Sub 
```

和我得到的 C# 代码：

```
public DependencyProperty VideoDirectoryProperty = DependencyProperty.Register("VideoDirectory", typeof(string), typeof(WCam), 
             new FrameworkPropertyMetadata(new PropertyChangedCallback(DirectoryChange)));

private void DirectoryChange(DependencyObject source, DependencyPropertyChangedEventArgs e )
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:02:12.820

看起来您需要`VideoDirectoryProperty`像您的 VB 代码所说的那样定义为静态的`Shared`。

你也有`GetType(WebCam)`VB 但`typeof(WCam)`在 C# 中。

```
public static readonly DependencyProperty VideoDirectoryProperty =
    DependencyProperty.Register(
        "VideoDirectory",
        typeof(string),
        typeof(WebCam), 
        new FrameworkPropertyMetadata(new PropertyChangedCallback(DirectoryChange)));

private static void DirectoryChange(
    DependencyObject source, DependencyPropertyChangedEventArgs e)
{

} 
```

# java - SSL 使用 SOAPConnection.call(,)

> ID：14460307
> 
> 赞同：0
> 
> 时间：2013-01-22T13:59:49.723
> 
> 标签：java, soap

我正面临这个问题，我`http`通过 SOAPConnection.call() 方法调用 url，它工作正常，但是当我使用`https`url 时它不起作用。在这种情况下如何配置 SSL？

# android - Android Google 文档 - 表单

> ID：14460311
> 
> 赞同：2
> 
> 时间：2013-01-22T14:00:01.627
> 
> 标签：android, google-docs-api

> **可能重复：**
> [使用 Android 提交到 Google 电子表格表单](https://stackoverflow.com/questions/6174962/using-android-to-submit-to-a-google-spreadsheet-form)

我想在 Android 中创建一个表单，我想使用它将数据转储到 Google 表单中。我一直在努力寻找一个很好的资源来了解它是如何完成的。

我看到 ACRA Lib 做到了这一点，并且一直在寻找一些能够做到这一点的 lib

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:12:26.120

我不知道您是否还在寻找答案，但如果是这样，这对我有帮助：[Using Android to submit to a Google Spreadsheet Form](https://stackoverflow.com/questions/6174962/using-android-to-submit-to-a-google-spreadsheet-form)。我有 2 个可以将数据发送到 Google 表单的工作应用程序，所以如果您有后续问题，我可以提供帮助。

请注意，Google 刚刚对 Google 表单进行了相当大的更改，但我认为您仍然可以使用带有上述解决方案的旧表单，尽管我还没有尝试过。看来您必须先创建电子表格，然后从该电子表格的“工具”菜单中选择“创建旧表单”。

# java - 条件编译以查看代码是否在 Eclipse 中运行

> ID：14460314
> 
> 赞同：-2
> 
> 时间：2013-01-22T14:00:23.623
> 
> 标签：java, android, eclipse

我知道所有反对 Java 条件编译的论点。在这种特定情况下，我只想有一个小的 IF 以便能够测试代码是否在 Eclipse 中运行。这样做的原因是当我覆盖视图以使用我的特殊处理时，Eclipse 在某些情况下无法编译修改后的视图并将其显示在 IDE 中（导致这种行为的情况很多，但具体的一种情况是代码引用时）到 Eclipse 显然无法执行的 JNI 库）。

现在我正在使用

```
if (!Build.DEVICE.startsWith("generic"))
 // do something 
```

它有效，但我真的不喜欢在 onDraw() 中每次都进行字符串比较。我需要一个更简单的方法，一个更便宜的条件来查看我是否在 Eclipse 中并避免一些操作。

编辑：为了更清楚，我正在寻找与 C# 的 Component.DesignMode 属性等效的 Java/Android/Eclipse。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:08:22.930

到目前为止，我能想到的最好的是：

```
import android.os.Build;

public class IDE {
  private static IDE instance = null;
  protected boolean designMode = false;

  private IDE() {
    designMode = Build.DEVICE.startsWith("generic");
  }

  public static IDE getInstance() {
    if (instance == null)
      instance = new IDE();
    return instance;
  }

  public static boolean DesignMode() {
    return getInstance().designMode;
  }
} 
```

这是一个封装了检查的单例类，可以这样查询：

```
if (!IDE.DesignMode())
  // do something 
```

# sql - TSQL - 将 IN 与 PIVOT 一起使用

> ID：14460315
> 
> 赞同：2
> 
> 时间：2013-01-22T14:00:30.720
> 
> 标签：sql, tsql, pivot

让我烦恼的快速问题。

在 T-SQL 中使用 PIVOT 时，“FOR..IN”部分是否可以引用表而不是定义的值列表？

示例，而不是类似：-

```
PIVOT (Count(widgets) For Team IN ([Dave],[Peter],[John]....etc)) 
```

你能做类似的事情： -

```
PIVOT (Count(widgets) for Team IN (SELECT TeamLeader FROM Teams)) 
```

我找不到任何参考来确认这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:05:46.307

**不，这是不可能的。**

[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)运算符语法规定这些值作为列表输入：

> ```
> ...
> 
> IN ( [first pivoted column], 
> 
>      [second pivoted column],
> 
> ...
> ...
> 
>      [last pivoted column]) 
> ```

但是您可以动态地执行此操作，例如：

```
DECLARE @cols AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' +
                        QUOTENAME(Teamleader)
                      FROM Teams
                      FOR XML PATH(''), TYPE
                     ).value('.', 'NVARCHAR(MAX)') 
                        , 1, 1, '');

SELECT @query = ' SELECT ' + @cols +
                ' FROM AnotherTable a
                  PIVOT 
                  (
                     Count(widgets) For Team IN (' + @cols + ')' +
                  ') p';
execute(@query); 
```

# ajax - 使用ajax上传图片和数据

> ID：14460316
> 
> 赞同：1
> 
> 时间：2013-01-22T14:00:33.730
> 
> 标签：ajax, jsp, struts2

我正在尝试使用 Ajax 上传一些文本和图像。我正在使用 Struts2 框架和简单的 javascript。此上传显示错误如何解决。

在 JSP 页面中

```
 <s:form action="javascript:void(0)" onsubmit="javascript:postUserOwnMessages()"
                                                enctype="multipart/form-data">
<s:textarea rows="2" cols="40" name="message" id="message1">
</s:textarea><br>
<s:file name="user_post_image" id="user_post_image"/>
<s:select name="msg_visibility" id="msg_visibility" list="#{'public':'Public', 'friends':'Friends','me':'Me only'}" value="public"/>
<s:submit value="Post"/>
 </s:form> 
```

同一页面使用的功能

```
<script type="text/javascript">
    function postUserOwnMessages()
    {

        var xmlhttp;
        if (window.XMLHttpRequest)
        {
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        if (typeof xmlhttp == "undefined")
        {
            ContentDiv.innerHTML="<h1>XMLHttp cannot be created!</h1>";
        }
        else{

            var message1=document.getElementById('message1').value;
            var  user_post_image=document.getElementById('user_post_image').value;

            var msg_visibility=document.getElementById('msg_visibility').value;
            document.getElementById('message1').value="";
            var query='ownmessages?message='+message1+'&user_post_image='+user_post_image
                +'&msg_visibility='+msg_visibility;

            xmlhttp.open("GET",query,true);
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    document.getElementById("messages_and_pages").innerHTML=xmlhttp.responseText;
                }
            }
            xmlhttp.send();
        }
    }
</script> 
```

在行动

```
public class UserMessages extends ActionSupport {

private String userid;
   private String message;
private File user_post_image;
private String user_post_imagePath;
private String user_post_imageContentType;
private String msg_visibility;

public String insert() {

        System.out.println(getMessage()
               + " " + getUser_post_image()
                + " " + getUser_post_imageContentType() + " " +      getUser_post_imagePath());

return SUCCESS;
}
} 
```

显示以下错误/警告

```
 WARNING: Error setting expression 'user_post_image' with value     '[Ljava.lang.String;@1395750'
    ognl.MethodFailedException: Method "setUser_post_image" failed for object     social.action.UserMessages@765e8c [java.lang.NoSuchMethodException:     social.action.UserMessages.setUser_post_image([Ljava.lang.String;)]
at ognl.OgnlRuntime.callAppropriateMethod(OgnlRuntime.java:1265)
at ognl.OgnlRuntime.setMethodValue(OgnlRuntime.java:1454) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:44:27.040

这是运行代码：首先你必须在你的类中创建动作方法，它应该扩展 ActionSupport 这是 .java 类的方法

```
public String myTest(){
        String filePath = "C:/Documents and Settings/Eeager/Desktop/UploadeFile";
        File fileToCreate = new File(filePath, this.fileUploadFileName);
        try {
            FileUtils.copyFile(this.fileUpload, fileToCreate);              
        } catch (IOException e) {
            return "ERROR"; 
        }
    return "SUCCESS";
} 
```

这是 struts.xml 配置：

```
<action name="upload" method="myTest" class="(Your action class, where method is..)">
    <result name="SUCCESS">/result.jsp</result>
</action> 
```

这是必须从中生成请求的 index.jsp 页面：

```
<%@ taglib prefix="s" uri="/struts-tags" %>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<html>
<head>
<s:head />
<sj:head/>
</head>

<body>
<script type="text/javascript">
        $.subscribe('showImage', function(event,data) {
               $("#image").show();
        }$.subscribe('complete', function(event,data) {
               $("#image").hide();
        }
</script>

 <div id="image" style="display:none;min-height: 300px;min-width: 300px">
    <img alt="loading..." height="300px" width="300px" src="pic/loading.gif">
 </div>
<s:form action="upload" enctype="multipart/form-data">

<s:file name="fileUpload" label="Select a File to upload" size="40" />

<sj:submit value="submit" name="submit" targets="test" onBeforeTopics="showImage" onCompleteTopics="complete" />

</s:form>

 <div id="test"></div>

</body>
</html> 
```

现在结果.jsp

```
<html>

<body>
<h1>Image has loaded</h1>

</body>
</html> 
```

**注意：** 1-没有额外/更多的类或你必须构建的 jsp。2-要使用 struts2 启用 ajax，您必须安装插件**Struts2-jquery 插件**

你可以在这里下载它的 jar 文件： [http ://code.google.com/p/struts2-jquery/downloads/detail?name=struts2-jquery-plugin-3.5.1.jar&can=2&q=](http://code.google.com/p/struts2-jquery/downloads/detail?name=struts2-jquery-plugin-3.5.1.jar&can=2&q=)

运行它：

```
http://localhost:8080/(project Name)/index.jsp 
```

毕竟当你运行它时，你可以在你的testktop文件夹“UploadedFiles”中看到上传的图像/文件（不管它是否存在，如果不存在，它会自动创建）

# at-command - 在 Samsung Galaxy 上使用 AT+CPMS 设置“首选消息存储”时遇到问题

> ID：14460323
> 
> 赞同：1
> 
> 时间：2013-01-22T14:00:51.073
> 
> 标签：at-command

通过 USB 将三星 Galaxy S 连接到超级终端时，我无法从调制解调器中检索任何消息。命令`AT`和`AT+CMGF=1`工作，并`AT+CPMS=?`返回不同的可用记忆。

但是当我尝试执行以下命令时：（`AT+CPMS="SM"`或任何其他内存）我得到：`cms error 321`。有谁能够帮我？谢谢！

附加信息：

```
AT+CPMS=?

+CPMS: ("BM","ME","SM","SR"),("ME","SM"),("BM","ME","SM","SR")

AT+CPMS="SM"

+CMS ERROR: 321 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:27:03.877

从[27.005](http://www.3gpp.org/ftp/Specs/html-info/27005.htm) `+CMS ERROR 321`表示`invalid memory index`。

该`AT+CPMS`命令具有三个具有官方语法的参数`AT+CPMS=<mem1>[,<mem2>[,<mem3>]]`。但是我认为问题在于电话因具有不同`<mem1>`的`<mem2>`价值观而窒息。

因此，尽管由于某些实现问题，官方有效语法仅允许`<mem1>`我怀疑该语法实际上`AT+CPMS=<mem1>,<mem2>[,<mem3>]`在某些手机上，（可能仅限于某些值/组合`<memN>`）。据我所知，索尼爱立信的手机就是这种情况，但多年来我一直都给出`<mem1>`了`<mem2>`相同的价值，所以我的记忆可能有点生疏。

我确实认为其他手机也可能是这种情况。如果您搜索示例用例，`AT+CPMS`您会发现两者都提供比仅仅提供更常见`<mem1>`（坦率地说，我很难想象您真的想从一个存储读取/删除并从另一个存储写入/发送的场景）。鉴于我的记忆是正确的，所描述的行为也应该适用于您的手机，因为三星在其 Galaxy 手机中使用了 ST-Ericsson 的软件。

# php - 如何在 PHP 中为重复验证提供弹出警报框？

> ID：14460324
> 
> 赞同：0
> 
> 时间：2013-01-22T14:00:54.250
> 
> 标签：php, mysql

我有一个表：**dept** 字段： mysql 表中的**dept_code**以php 形式。我需要重复验证。使用代码`ALTER TABLE tableName ADD CONSTRAINT tb_UQ UNIQUE (area_code)`它在数据库中运行良好。但是当单击提交按钮时，我需要在 php 表单中弹出一个警告框。

# java - Spring Security - 显示特定于登录用户的内容

> ID：14460328
> 
> 赞同：1
> 
> 时间：2013-01-22T14:01:09.880
> 
> 标签：java, spring, jsp, spring-security, jsp-tags

假设我有一个个人资料页面，其中有一个“编辑您的个人资料”链接。所有用户都可以查看个人资料页面，但编辑链接按钮应该只对查看其个人资料的登录用户可见，而不是其他用户的个人资料。

到目前为止，我有这个代码，

```
<sec:authorize access="isAuthenticated()">
<sec:authentication property="principal.username" var="principal"/>
<c:if test="${profile_username eq principal}">   <!--profile_username is the username of the viewed profile  -->
<!-- edit your profile link -->
</c:if>
</sec:authorize> 
```

有没有更清洁的方法来做到这一点？可能是一个像

`<sec:authorize access="isTheSamePerson()"/>`.

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:10:05.350

您要考虑实际的域对象。出于这些目的，Spring Security 中有特殊的[ACL](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#domain-acls)功能。您可以设置它并使用相应的[访问控制列表](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#d0e6991)标签：

```
<sec:accesscontrollist hasPermission="2" domainObject="${profile}">
    <!-- Your edit link goes here -->
    <!-- "2" means write permission -->
    <!-- Be sure that you use Spring Security >= 3.1.2\. This syntax may not works for smaller versions due to bugs  -->
</sec:accesscontrollist> 
```

如果您只有这样一种情况，这可能是一种矫枉过正。

选项 2。您可以定义自定义 Web 安全表达式：

```
<sec:authorize access="isOwner(#profile)"/>. 
```

也不是[那么简单](https://stackoverflow.com/questions/14185070/spring-securityintercept-url-pattern-access-id-1/14199105#14199105)。

我认为自定义 JSP 标记（[标记文件](https://stackoverflow.com/questions/1296235/jsp-tricks-to-make-templating-easier)）将是最简单的解决方案：

```
<customtags:authorizeeditaccount account="${profile}"/> 
```

这个标签会做同样的事情。它看起来会好很多。

# php - PHP合并两个图像导致合并图像周围的黑色边界框

> ID：14460329
> 
> 赞同：1
> 
> 时间：2013-01-22T14:01:10.840
> 
> 标签：php, gd

我使用条形码类生成条形码，然后将生成的条形码与另一个图像合并。

问题是当图像合并时，条形码被一个黑色的边界框包围。

起初我认为这是因为我将 gif（条形码）与 jpeg 合并并将标题设置为 jpg，但是当我与 gif 合并并更新标题以匹配有问题的黑框时仍然存在。

新的 gif 版本代码：

```
$bc = new PrintBarcode('DARP CODE');
$bc->drawVoucher();
$src = $bc->getVoucher();

header('Content-Type: image/gif');

$bg  = imagecreatefromgif('images/voucher.gif'); 

imagealphablending($src,true);
imagesavealpha($src, true);

imagecopymerge($bg, $src, 40, 380, 0, 0, imagesx($bg), imagesy($bg), 100);

imagegif($bg, null, 100);

imagedestroy($src);
imagedestroy($bg); 
```

这些是来自条形码类的文档，说明输出是 gif：[http ://www.shayanderson.com/php/php-barcode-generator-class-code-39.htm](http://www.shayanderson.com/php/php-barcode-generator-class-code-39.htm)

![在此处输入图像描述](../Images/540244b8b7daf0897909575fba9134cd.png)

您可以在上面的图像中看到它，当基本图像应该在没有条形码的黑色边界框的情况下可见时，图像结束和条形码开始。

经过一番调查，我可以确认黑框肯定来自条形码图像。我试图用白色替换黑色像素，但正如预期的那样，它使条形码不可见......

# java - 后端架构：RESTful Web 服务

> ID：14460336
> 
> 赞同：0
> 
> 时间：2013-01-22T14:01:33.303
> 
> 标签：java, spring, rest, architecture

我正在为网站创建后端基础架构。显然，后端基础设施需要与前端无关，它可以是网站、移动站点、移动应用程序、其他服务，任何东西。

我打算把它写成 RESTful Web 服务，我还想要依赖注入、事务管理和持久性框架。这里的限制是我将使用 Apache Tomcat Web 服务器，因此我不能使用 EJB（我不能使用 JBoss 或其他应用服务器）

我最初的想法是使用 Spring 框架 - 可靠、支持良好并且很容易满足我的所有需求。我有点犹豫是因为我只想要没有 View 的 REST 端点，而如果我使用 Spring，它将通过 Spring MVC 框架。在没有 View 部分的情况下使用 Spring MVC 是否正常？

我的选择是否有意义，还是我应该考虑其他框架？我研究了 JAX-RS 作为 REST 框架的另一种替代方案，但是我没有得到依赖注入/事务管理/持久性框架，我最终不得不使用其他框架来获得这些。

我还注意到有一个项目[TomcatEE](http://tomee.apache.org/tomcat-ejb.html)听起来也可以解决我的问题。.

感谢您的想法。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:21:45.290

是的，Spring 3 MVC 是一个优秀的框架，我正在它上面创建应用程序，它还支持 RESTful Web 服务。主要好处 - 控制器类的返回值自动转换为 JSON 对象。使用或不使用 View - 由您决定，没有视图一切都会正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:39:55.847

Tomcat 并不意味着没有 EJB。Tomcat 7 为您带来了 Jave EE 6，然后您可以使用 EJB 和 CDI 技术。我目前正在开发使用以下技术堆栈的软件：

*   JAX-RS RESTful 前端，将服务调用委托给
*   服务 EJB-s，使用 @Inject CDI 注释注入到 RESTful 类中

不使用 Spring 有以下优点：

*   少一项 3pp 依赖，少一项技术要求。显然不是优势。
*   坚持使用标准 Java EE 技术使您的应用程序可移植（或多或少）

相反，我认为 Spring 是如此广泛和有据可查，使用它是一种魅力。Spring 的可移植性也很好，与 Spring 相比，不同 EE 供应商之间的不同 CDI 错误和错误实现（？）问题更多。我认为 Spring 不会强迫你采用 MVC 方式。您可以部分使用它，也可以根据需要混合使用它。如果您知道引擎盖下的内容，那么您可以非常灵活地使用 Spring。

备注：稍微考虑一下身份验证。RESTful 意味着 BASIC 身份验证，但 webapps 通常需要一个精美的登录页面，并且 BASIC auth 弹出窗口很难抑制。我们使用 SSO 来解决这个问题，一个带有 FORM auth 和精美登录屏幕的 webapp 以及 RESTful 服务中的 BASIC auth 用于其他客户端。SSO 导致登录第一个应用程序对 RESTful 调用也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:12:27.650

我会结合使用 Jersey 和 JAXB 来绑定到您的域类，可以在这里找到一个很好的教程：

[http://www.vogella.com/articles/REST/article.html](http://www.vogella.com/articles/REST/article.html)

使用 hibernate/jpa 时要注意，因为 JAXB 无法处理延迟加载的模型（然后您需要编写适配器类）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-06T13:20:51.180

我正在以同样的方式使用 Spring Rest Data：服务器只用 JSON 响应，并不关心客户端可能对数据做什么。我也想知道使用 MVC，但没关系，没问题！

延迟加载：从我的角度来看，只有两种方法：

1.  从数据库中加载所有急切的内容并将其发送到客户端
2.  将引用序列化为链接，正如 Spring Rest Data 所做的那样。客户端可以/必须决定加载哪个。

There is a live demo application using Spring REST Data at demo.appdriver.com You can access the API at [http://appdriver.prefabware.cloudbees.net/api/](http://appdriver.prefabware.cloudbees.net/api/)

# floating-point - 计算器中有趣的浮动错误 - 为什么会发生这种情况？

> ID：14460337
> 
> 赞同：5
> 
> 时间：2013-01-22T14:01:34.490
> 
> 标签：floating-point, ieee-754

如果你在 Windows 计算器中输入 1.0000000000000000000000000000001，然后反复点击阶乘 (n!) 按钮，你会得到一些奇怪的结果：

```
1.0000000000000000000000000000001 [n!]
1                                 [n!]
1                                 [n!]
1                                 [n!]
0.9999999999999999999999999999997 [n!]
0.9999999999999999999999999999998 [n!]
0                                 [n!]
1 
```

自己尝试一下 - 这很奇怪！

我的主要兴趣是为什么我们在倒数第二步得到零。IEEE floats 的哪些人工制品会导致这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-22T02:21:12.440

Windows 计算器中的算术是可怕的。它不符合 IEEE，事实上，它忽略了 IEEE 规范的所有教训。

或者，至少，它忽略了一个重要的教训：适当的舍入真的很重要。

尝试输入这个（在科学模式下）：

*   4
*   平方根（答案显示为 2）
*   -2 (-8.1648465955514287168521180122928e-39)

这告诉我们关于 Windows 计算器的两件事。

1.  它计算平方根到大约 40 位的精度。
2.  它无法正确舍入。

40 位的精度比双精度高得多，有时这很好，但 squareroot(4) 表明，如果没有正确的舍入，额外的“精度”可能会被误导。正确舍入基本运算（+、-、*、/）和平方根相对简单。不这样做只是草率。

至于最初的问题，如果你在计算器说答案是 1 时使用“-1”技巧来查看真实值，你会看到数字逐渐接近 1。最终它是可怕的四舍五入导致它去少于一个。然后发生了一些不好的事情，它达到了零。我不知道坏事是什么，但考虑到其糟糕的四舍五入，发生坏事也就不足为奇*了*。

# hadoop - 块池如何在 HDFS 联合中发挥作用

> ID：14460342
> 
> 赞同：4
> 
> 时间：2013-01-22T14:01:51.520
> 
> 标签：hadoop, hdfs

所以我在阅读 Hadoop：权威指南。[这一页](http://books.google.co.in/books?id=Wu_xeGdU4G8C&pg=PA47&lpg=PA47&dq=%22Under+federation,+each+namenode+manages+a+namespace+volume,+which+is+made+up+of+the+metadata+for+the+namespace,+and+a+block+pool+containing+all+the+blocks+for+the+files+in+the+namespace.+Namespace+volumes+are+independent+of+each+other,+which+means+namenodes+do+not+communicate+with+one+another,+and+furthermore+the+failure+of+one+namenode+does+not+affect+the+availability+of+the+namespaces+managed+by+other+namenodes.+Block+pool+storage+is+not+partitioned,+however,+so+datanodes+register+with+each+namenode+in+the+cluster+and+store+blocks+from+multiple+block+pools.%22&source=bl&ots=i7yUXCQ8Wv&sig=CH-y2UkatrF2bcDBU0OwGP9JOuk&hl=en&sa=X&ei=Q5f-UPS2JIm69gSRtoGQDA&ved=0CC4Q6AEwAA#v=onepage&q=%22Under%20federation%2C%20each%20namenode%20manages%20a%20namespace%20volume%2C%20which%20is%20made%20up%20of%20the%20metadata%20for%20the%20namespace%2C%20and%20a%20block%20pool%20containing%20all%20the%20blocks%20for%20the%20files%20in%20the%20namespace.%20Namespace%20volumes%20are%20independent%20of%20each%20other%2C%20which%20means%20namenodes%20do%20not%20communicate%20with%20one%20another%2C%20and%20furthermore%20the%20failure%20of%20one%20namenode%20does%20not%20affect%20the%20availability%20of%20the%20namespaces%20managed%20by%20other%20namenodes.%20Block%20pool%20storage%20is%20not%20partitioned%2C%20however%2C%20so%20datanodes%20register%20with%20each%20namenode%20in%20the%20cluster%20and%20store%20blocks%20from%20multiple%20block%20pools.%22&f=false)中的一句话让我感到困惑。所以我创建了一个描述每个句子的图像。

## ![HDFS 联盟](../Images/43ad3e554fc4ae14a3c117176c5ca012.png)

句子说，

**在联合下，每个名称节点管理一个命名空间卷**（黑色方块表示命名空间卷），它由命名空间的元数据和一个包含所有文件块的**块池**（由深灰色矩形表示）组成。命名空间。**命名空间卷是相互独立的**（在映像中，它们对每个命名节点都是独立的，与无共享），这意味着命名节点不会相互通信，而且一个命名节点的故障不会影响管理的命名空间的可用性由其他名称节点。**但是，块池存储没有分区**（因此在映像中的所有人之间共享），因此**数据节点向集群中的每个名称节点注册**（再次与所有名称节点共享）并***存储来自多个块池的块***（我的问题是我们如何拥有多个块池？整段不是总结了所有名称节点都有指向每个块的元数据，因此共享块池？）。

我他妈糊涂了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:21:25.300

您对“块池”矩形的表示不准确，它应为“块池”。

我认为值得看看另一种表示：

![联邦](../Images/95724ac3c91a92aeff0431ddcd81a5f1.png)

所以基本上每个块池都是相互独立管理的，每个块都是属于单个命名空间的一组块。Namenodes 不相互交谈，这是有道理的。

从我读过的内容来看，这背后的原因是，这允许命名空间为新块生成块 ID，而无需与其他命名空间协调。名称节点的故障不会阻止数据节点为集群中的其他名称节点提供服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-17T01:47:11.957

只是为了更清楚 - 如果上图中的 NameNode NN-n 出现故障，Pool-n 也将不可用。因此，在恢复 Namenone NN-n 之前，Pool-n 中维护的数据节点块将无法访问。或者它会以其他方式发生

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-21T06:37:54.217

我发现这很有帮助，它来自书籍 hadoop-operations：
乍一看，联邦似乎与简单地拥有多个离散集群没有什么不同，除了客户端插件将它们视为单个逻辑命名空间。 **然而，主要的区别因素之一是联邦集群中的每个数据节点都为每个名称节点存储块。当每个名称节点被格式化时，它会生成一个块池，其中存储与该名称节点关联的块数据。每个数据节点依次为多个块池存储数据，并与每个名称节点通信。** 当namenode从datanode接收到心跳时，它会了解datanode上其他块池消耗的总空间，以及非HDFS数据。让所有数据节点参与所有块池而不是简单地拥有离散集群的基本原理是，这样可以更好地利用数据节点容量。相反，如果我们要为频繁使用的名称节点 A 单独设置一组数据节点，则名称节点 B 的数据节点将未得到充分利用，而名称节点 A 的数据节点则难以跟上负载。

# php - CodeIgniter 以错误的顺序执行数据库查询（可能是并行的？）

> ID：14460347
> 
> 赞同：3
> 
> 时间：2013-01-22T14:02:19.333
> 
> 标签：php, mysql, database, codeigniter, activerecord

我正在使用当前版本的 CodeIgniter (2.1.3)。我有三个 MySQL 表：

## MySQL 表

### 操作员

```
id  name
========
1   ACME 
```

### 标签

```
id  tag
=======
1   bar
2   foo 
```

### operator_tag

```
id  operator_id  tag_id
=======================
1   1            1
2   1            2 
```

所以操作符 ACME 被标记了两个标签（bar 和 foo）。

## CodeIgniter 文件

尝试删除这样的标签时出现错误：

```
//file: controllers/tag.php (function contained in class Tag extends CI_Controller)

//this function should remove the tag with the id $id and redirect back to the edit page for the operator
public function remove($id){
    $operator_id = $this->operator_model->get_operator_for_tag_id($id);
    $this->operator_model->remove_tag_from_operator($id);
    redirect('operator/edit/'.$operator_id);
} 
```

..

```
//file: models/operator_model.php (functions contained in class Operator_model extends CI_Model)

public function get_operator_for_tag_id($id){
    $query = $this->db->select('operator_id')->from('operator_tag')->where('id',$id)->get();
    return $query->row()->operator_id;
}

public function remove_tag_from_operator($id){
    $this->db->delete('operator_tag',array('id' => $id));
} 
```

## 错误

如果我调用该函数从操作员中删除标签“foo”（id：2），我打开网址[http://example.com/tag/remove/2](http://example.com/tag/remove/2)（它成功调用控制器“tag”-> 函数使用参数“2”“删除”。但是大多数时候我收到以下错误

```
A PHP Error was encountered
Severity: Notice
Message: Trying to get property of non-object
Filename: models/operator_model.php
Line Number: XX (which is line with `return $query->row()->operator_id;`) 
```

看来，DELETE 查询是在 SELECT 查询之前执行的。（我尝试在（第二个）函数中添加一个 INSERT 查询，并在（第一个）`remove_tag_from_operator`函数中回显该表的所有结果，该`get_operator_for_tag_id`函数神秘地将行（先前生成的）包含在删除函数中。

CodeIgniter 是并行执行查询，还是以任何特殊顺序查询它们？如果是这样，是否有可能禁用此功能？提前致谢！

# 编辑1：回声值@luc

@luc 我将代码更改为以下（添加了回显行）以进行调试：

```
//file: controllers/tag.php
public function remove($id){
    echo '-1\. CONTROLLER '.$id.'<br>';
    $operator_id = $this->operator_model->get_operator_for_tag_id($id);
    echo '-2\. CONTROLLER '.$id.'<br>';
    $this->operator_model->remove_tag_from_operator($id);
    echo '-3\. CONTROLLER '.$id.'<br>';
    redirect('operator/edit/'.$operator_id);
} 
```

```
//file: models/operator_model.php
public function get_operator_for_tag_id($id)
{
    echo '-1.1 GET '.$id.'<br>';
    $query = $this->db->select('operator_id')->from('operator_tag')->where('id',$id)->get();
    echo '-1.2 GET '.$id.'<br>';
    $result = $query->row()->operator_id;
    echo '-1.3 GET '.$id.'<br>';
    return $result;
}

public function remove_tag_from_operator($id){
    echo '-2.1 REMOVE '.$id.'<br>';
    $this->db->delete('operator_tag',array('id' => $id));
    echo '-2.2 REMOVE '.$id.'<br>';
} 
```

[在调用http://example.com/tag/remove/41](http://example.com/tag/remove/41)时输出如下内容

```
-1\. CONTROLLER 41  
-1.1 GET 41  
-1.2 GET 41  

**A PHP Error was encountered**  
Severity: Notice  
Message: Trying to get property of non-object  
Filename: models/operator_model.php
Line Number: 236 (which is the row with `$result = $query->row()->operator_id;`)

-1.3 GET 41  
-2\. CONTROLLER 41  
-2.1 REMOVE 41  
-2.2 REMOVE 41  
-3\. CONTROLLER 41  

**A PHP Error was encountered**  
Severity: Warning  
Message: Cannot modify header information - headers already sent by (output started at .../application/controllers/tag.php:242)  (which is the output generated by `echo '1\. CONTROLLER '.$id.'<br>';`)
Filename: helpers/url_helper.php  
Line Number: 542 
```

所以 $id 被正确传递并且回显的顺序正确。只有数据库查询以一种神秘的方式执行。

# 编辑2：检查行@itachi

@itachi 我更改了以下代码进行调试（如果找不到值，则输出整个 operator_tag-table）

```
//file: controllers/tag.php
public function get_operator_for_tag_id($id)
{
    $query = $this->db->select('operator_id')->from('operator_tag')->where('id',$id)->get();
    if ($query->num_rows() > 0){
        return $query->row()->operator_id;
    }else{
        $query = $this->db->get('operator_tag');
        print_r($query->result());
    }
} 
```

[在调用http://example.com/tag/remove/44](http://example.com/tag/remove/44)时输出如下内容

```
Array ( [0] => stdClass Object ( [id] => 3 [operator_id] => 40 [tag_id] => 1 ) )
A PHP Error was encountered
Severity: Warning
Message: Cannot modify header information - headers already sent by (output started at .../application/models/operator_model.php:236) (which is the line with `print_r($query->result());`)
Filename: helpers/url_helper.php
Line Number: 542 
```

我试图重现工作示例，但失败了。如果我注释掉`$this->db->delete('operator_tag',array('id' => $id));`它工作的行（将我重定向到操作员/编辑/$id）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:33:00.490

我总是遇到同样的错误（尝试获取非对象的属性）并且**无法创建代码*工作***的场景。

所以我试图冲洗桌子。第一行已按预期删除。在删除（大约 id = 9 左右）时，我不断收到相同的错误（没有机会让它再次工作）。

我再次刷新表，现在我**无法再次重现*错误***。我尝试了这个过程大约 5 次，每次插入/删除大约 40 次。

我从来没有遇到过这样的错误。也许数据库/表已损坏？也许 MySQL-Server 有用于“性能改进”的设置，比如多线程？也许是主机的错（有一段时间我遇到了很多 HTTP 500 错误，当我忘记分号或类似的东西时，它重定向到主机自己的 /404 页面）。无论如何，由于我的客户想保留他奇怪的主人，我别无选择。

谢谢大家，感谢您的大力支持！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:31:48.030

发生该错误主要是因为查询字符串不完整。你有 $this->uri->segment(3) 在某处获取 $id 吗？我在您的代码中没有看到它。$id 在哪里定义？

尝试呼应它的价值，我认为这就是问题所在。

# javascript - 在 Hogan.js 中使用 Lambda 时如何获取值

> ID：14460350
> 
> 赞同：4
> 
> 时间：2013-01-22T14:02:24.187
> 
> 标签：javascript, hogan.js

我有以下在 jQuery 中处理 AJAX 成功回调的函数：

```
function success(data) {
    var templateData = {
        items: data,
        formatMoney: function () {
            return function (value) {
                return Globalization.format(value, 'N');
            };
        }
    };

    // fill reports table
    var filledTable = tableTemplate.render(templateData);
    $tableContainer.html(filledTable);
} 
```

这是我的模板的样子：

```
{#Items}}
<tr>
    <td>{{ProductId}}</td>
    <td>{{#formatMoney}}{{Cost}}{{/formatMoney}}</td>
</tr>
{{/Items}} 
```

问题是我得到 {{Cost}} 而不是 Cost 的值。我知道这就是它在 mustache 手册 (http://mustache.github.com/mustache.5.html) 中描述的工作方式，但我想获得这个值。

`this`将指向我的产品对象，因此我可以使用成本，`this.Cost`但这是一个简单的情况，我有许多对象类型具有许多需要格式化的属性，因此我需要一个通用的解决方案来保持东西[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself "干燥")。

我也可以在服务器端进行计算，但我更喜欢在客户端执行此操作，因为我不仅将这些数据与 hogan 一起使用，而且还用于客户端的其他计算。

**是否有更直接、通用和客户端的方式来获取 Cost 的值而不是未渲染的文字块？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:21:10.307

是的。

严格遵守规范的 Mustache 实现非常有限。您的选择是，在您的 lambda 代码中，渲染“{{Cost}}”字符串（您应该将此字符串和渲染函数作为您的 lambda 参数），并将渲染的字符串解析为浮点数，即您的成本。

不干净，肯定的。但它会起作用。不要忘记在您正在使用的 Mustache 实现的存储库中打开一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T14:15:35.790

我认为我们有两个选择。

1) 在 hogan.js 中使用 lambdas

```
res.render("template", {
          lambdas:{
            formatMoney: function( cost ){
              return cost.format('usd');
            }
          }); 
```

模板应该是

```
{#Items}}
<tr>
    <td>{{ProductId}}</td>
    <td>{{#lambdas.formatMoney}}{{Cost}}{{/lambdas.formatMoney}}</td>
</tr>
{{/Items}} 
```

2）如问题所述，我们可以使用这个对象。

Javascript代码是

```
res.render("template", {
  formatMoney:{
    return function(key){
      var cost = this[key];
      return cost.format('usd');
    };
  }
}); 
```

模板是

```
{#Items}}
<tr>
    <td>{{ProductId}}</td>
    <td>{{#formatMoney}}Cost{{/formatMoney}}</td>
</tr>
{{/Items}} 
```

# java - 如何在运行时根据用户自定义列

> ID：14460357
> 
> 赞同：0
> 
> 时间：2013-01-22T14:02:36.830
> 
> 标签：java, jsp, spring-mvc, displaytag

我正在使用 dispaly-tag 在 jsp 中显示数据库中的数据。我正在使用 Spring mvc，我想根据用户在运行时自定义列。是否有任何标签库可以提供这种基于用户自定义列的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:11:31.083

查看此博客条目。它使用 jquery 来显示和隐藏列，并将用户设置保存在 cookie 中。

[http://www.prodevtips.com/2010/09/09/showing-and-hiding-table-columns-with-jquery/](http://www.prodevtips.com/2010/09/09/showing-and-hiding-table-columns-with-jquery/)

# ruby-on-rails - 为什么这个 Compass @import 在 Rails 中不起作用？

> ID：14460362
> 
> 赞同：0
> 
> 时间：2013-01-22T14:02:54.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, compass-sass

**test_app/app/assets/stylesheets/application.css.scss**

```
@import 'compass';
@import 'variables';
@media only screen and (min-width: $breakpoint-medium-additional-width) {
  @import 'partials/medium-additional';
} 
```

**test_app/app/assets/stylesheets/_variables.scss**

```
$breakpoint-medium-additional-width: 28em; 
```

当我尝试访问一个页面（正在开发中）时，会发生此 Rails 错误：

```
Sass::SyntaxError at /
Invalid CSS after "...nd (min-width: ": expected expression (e.g. 1px, bold), was "$breakpoint-med..." (in /Users/ben/rails_projects/test_app/app/assets/stylesheets/application.css.scss) 
```

为什么`$breakpoint-medium-additional-width`没有正确设置？

我正在使用

*   导轨 3.2.11
*   红宝石 1.9.3
*   指南针 0.12.2
*   指南针导轨 1.0.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:14:13.543

我认为您的代码中有错字。我创建了一个新的 rails 项目，它对我来说很好用。

应用程序/资产/样式表/_variables.scss

```
$breakpoint-medium-additonal-width: 28em; 
```

应用程序/资产/样式表/application.scss

```
@import 'compass';
@import 'variables';
@media only screen and (min-width: $breakpoint-medium-additonal-width) {
  font-size: 120%;
} 
```

输出 application.css

```
@media only screen and (min-width: 28em) {
  font-size: 120%;
} 
```

# actionscript-3 - 在 Haxe 中加载 SWF 文件？

> ID：14460363
> 
> 赞同：0
> 
> 时间：2013-01-22T14:02:54.390
> 
> 标签：actionscript-3, flash, haxe

我是 Haxe 的新手，我想知道加载 SWF 文件并在其中使用资产。以下问题对我还没有明确的答案，它们都是关于使用来自外部 swf 文件的资产（导出为 ActionScript，使用已知的类名）

1.  如果我的目标是 HTML5，那么我将如何加载 SWF 文件并在其中使用资源？我可以在外部 SWF 文件中实例化类吗？

2.  一般来说，在 Haxe 中加载 SWF 文件和使用其中的资源是否容易？外部 SWF 文件中的帧怎么样，例如，我可以说加载的 swf 文件的 gotoAndStop(frame_number) 吗？

有什么建议吗？链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:09:25.263

据我所知，选项1是不可能的。您不能使用针对 js 的 swf 资产。即使 NME 支持 html5 。不支持 swf 资产。

用于在运行时加载 swf 以访问movieClips，这有点棘手，但它可以工作

我更喜欢编译时库：关于在编译时加载 swf 库。使用 swf-lib 指令。工作流程足以使用它。快速提示：为绑定的类使用组合（a:bind）。看到这个文档：[http ://haxe.org/doc/flash/0_start](http://haxe.org/doc/flash/0_start)

# ios - 在目标 c 中的方法之间传递值

> ID：14460365
> 
> 赞同：1
> 
> 时间：2013-01-22T14:03:01.363
> 
> 标签：ios, objective-c, cocoa-touch, cllocation

我很困惑。阅读大量资源，但没有帮助。如何将方法（变量）中生成的值传递给另一种方法，以便将其用于计算。我发现了一篇关于将属性放入 .h 文件的帖子。做过某事。在我的方法中，我首先调用了方法名，然后调用了变量，但它不起作用。这是代码：

```
-(void)recordLocation{

double valueLat = [[latitude text]doubleValue];
int latSeconds = valueLat * 3600;
int latDegrees = latSeconds / 3600;
latSeconds = abs(latSeconds % 3600);
int latMinutes = latSeconds / 60;
latSeconds %= 60;

char latChar = (latitude > 0) ? 'N' : 'S';

double valueLon = [[longitude text]doubleValue];
int lonSeconds = valueLon * 3600;
int lonDegrees = lonSeconds / 3600;
lonSeconds = abs(lonSeconds % 3600);
int lonMinutes = lonSeconds / 60;
lonSeconds %= 60;

char lonChar = (longitude > 0) ? 'E' : 'W';

CLLocation *tempPos = [[CLLocation alloc] initWithLatitude:valueLat longitude:valueLon]; //tempPos is what I want to pass

NSString *recPosition = [[NSString alloc]initWithFormat:@"%i° %i' %i\" %c" "   " @"%i° %i' %i\" %c \n", latDegrees, latMinutes, latSeconds, latChar,lonDegrees, lonMinutes, lonSeconds, lonChar];

_labelDegrees.text = recPosition;

//NSLog(@"%f" , valueLat);
//NSLog(@"%f" , valueLon);
//NSLog (@"%@", tempPos);

}

- (CLLocationDistance)distanceFromLocation{

double lat1 = [[latitude text] doubleValue];
double lon1 = [[longitude text] doubleValue];

CLLocation *currentLocation = [[CLLocation alloc] initWithLatitude:lat1 longitude:lon1];

CLLocationDistance locDistance = [currentLocation distanceFromLocation:recordLocation.tempPos];//tempPos is what I want to use from recordLocation

NSString *distText = [[NSString alloc]initWithFormat:@"%f", locDistance];

//NSLog(@"%f", lat1);
//NSLog(@"%f", lon1);
NSLog(@"%@", currentLocation);
NSLog(@"%@", tempPos);

[lonDistance setText:distText];
} 
```

是变量 tempPos 让我感到痛苦。为了尽可能完整，这是我的 .h 文件。

```
#import <UIKit/UIKit.h>
#import <AudioToolbox/AudioToolbox.h>
#import "Corelocation/Corelocation.h"

NSString *latr;
NSString *longr;
NSString *latLabDeg;
NSString *lat;
NSString *lon;
NSString *acc;
double valueLon;
double valueLat;
double latvalue;
double lonvalue;
CLLocation *tempPos;

@interface ViewController : UIViewController <CLLocationManagerDelegate>
@property (strong, nonatomic) IBOutlet UITextField *accuracy;
@property (strong, nonatomic) IBOutlet UITextField *latitude;
@property (strong, nonatomic) IBOutlet UITextField *longitude;
@property (strong, nonatomic) CLLocationManager *location;
@property (strong, nonatomic) IBOutlet UITextField *latrec;
@property (strong, nonatomic) IBOutlet UITextField *longrec;
@property (strong, nonatomic) IBOutlet UILabel *labelDegrees;
@property (strong, nonatomic) IBOutlet UITextField *lonDistance;
@property (nonatomic) CLLocationDistance *locDistance;
@property (retain) CLLocation *tempPos;

//- (CLLocationDistance)distanceFromLocation; 
```

拜托，你能帮帮我吗？现在我觉得很愚蠢，因为它必须是一件简单的事情。

问候，

阿德里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:06:53.563

问题的原因是在您的方法中您声明了一个局部变量，因此您没有使用您的实例属性。

```
CLLocation *tempPos = ... 
```

将该行更改为：

```
tempPos = ... 
```

**编辑：** 如果您想从方法外部获得该结果，有一些提示，有两种简单的方法：

1）返回该变量。由于您的方法是一个`- (void)...`（不返回任何内容），您可以轻松添加一个返回变量并`return tempPos;`在最后

2）如果在将来您已经有一个返回值，但您仍然希望外部方法可以访问您在那里生成的内容，您可以这样做：

```
- (NSInteger)someMethod:(ObjectClassName **)object { // Yes, there are TWO of these > *
    .. work some magic
    ObjectClassName *theObject = ...

    *object = theObject;
    return whatever;
} 
```

你这样称呼它：

```
ObjectClassName *object = nil;
NSInteger whatever = [self someMethod:&object]; // < this behavior comes from c++ 
```

或者，如果您不关心该变量，例如：

```
NSInteger whatever = [self someMethod:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:20:33.173

首先，关于您的标题，您*不需要*将 iVar 与您的声明分开`@property`声明。其实最好不要。声明将`@property`自动合成一个 iVar 并用前面的 _underscore 命名它。

然后，您可以直接作为`_tempPos`或通过它的 property引用 iVar `self.tempPos`。您应该几乎总是使用属性语法。这将确保您确定何时访问 iVar 而不是局部变量（这里是您混淆的根源）。

（请参阅我对这个问题的回答以澄清这一点：
[我应该在接口中声明变量还是在 Objective-C 弧中使用属性？](https://stackoverflow.com/questions/14236799/should-i-declare-variables-in-interface-or-using-property-in-objective-c-arc/14236931#14236931)）

这里：

```
CLLocation *tempPos = [[CLLocation alloc] initWithLatitude:valueLat longitude:valueLon]; 
```

您正在创建一个名为的新局部变量`tempPos`

您打算做的是将您的新 CLLocation 分配给您的`temppos`iVar：

```
self.tempPos = [[CLLocation alloc] initWithLatitude:valueLat longitude:valueLon]; 
```

还要注意这里的错误：
@property (retain) CLLocation *tempPos;

这应该很*强大*，而不是在使用 ARC 时保留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:05:29.897

如果您的第一个函数返回一个值，您可以简单地将该函数用作需要使用该值的函数的参数。

例子：

```
[aFunction:[otherFunction]]; 
```

专门针对您的示例，将函数更改为返回而`(void)recordLocation` 不是`(CLLocation)recordLocation`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T14:07:50.813

`How can I pass a value generated in a method (variable) to another method so it can be used for calculations.`

```
resultValue=[self secondMethodParameter:[self firstMethodParameter:parameter]]; 
```

* * *

您正在调用此方法：

`CLLocationDistance locDistance = [currentLocation distanceFromLocation:recordLocation.tempPos];//tempPos is what I want to use from recordLocation`

将其更改为：

`CLLocationDistance locDistance = [currentLocation distanceFromLocation:[self recordLocation]];//tempPos is what I want to use from recordLocation`

方法如下：

```
-(CLLocation *)recordLocation{

   ...

    CLLocation *tempPosLocal = [[CLLocation alloc] initWithLatitude:valueLat longitude:valueLon]; //tempPos is what I want to pass

    ...

    return tempPosLocal;

} 
```

* * *

我看到您的以下代码，缺少返回。

```
- (CLLocationDistance)distanceFromLocation{

     ...

     [lonDistance setText:distText];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T14:08:58.793

使用属性是完全正确的。不过，它可能是当地的财产。但是，它应该可以工作。

你的错误在这里：

```
CLLocation *tempPos = ... 
```

尽管定义了相同类型和名称的属性，但您正在定义相同类型和名称的本地（在方法内）对象。这隐藏了财产。

原则上这很好 - 如果你需要这样做。在这种情况下

```
tempPos = ... 
```

将访问局部变量，而

`self.tempPos = ...`

将访问该属性（通过设置器）。

但是，这里不需要局部变量。只是改变

```
CLLocation *tempPos = ... 
```

到

```
self.tempPos = ... 
```

你应该没事。

# linux - 如何在openmp中设置优先级？

> ID：14460369
> 
> 赞同：3
> 
> 时间：2013-01-22T14:03:09.040
> 
> 标签：linux, openmp

我在 openmp 中创建了三个不同的部分，这三个部分将由三个不同的线程运行。我想设置将由一个线程运行的特定部分的优先级。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:42:11.380

有关在 openmp 循环中设置优先级的信息，请参阅[缺少 OpenMP 功能：线程优先级。](https://stackoverflow.com/questions/671902/missing-openmp-feature-thread-priority)虽然我认为任何优先级设置代码都将取决于平台

看看这里[等效于 Linux 上的 SetThreadPriority (pthreads)](https://stackoverflow.com/questions/10876342/equivalent-of-setthreadpriority-on-linux-pthreads) for linux specific

# jquery - 尽管使用 desandro 和新 jquery，tumblr masonry + 无限滚动重叠帖子

> ID：14460370
> 
> 赞同：1
> 
> 时间：2013-01-22T14:03:09.810
> 
> 标签：jquery, tumblr, jquery-masonry, infinite-scroll

我是 javascript 和其他东西的新手，现在我在 tumblr 上遇到了砌体和无限滚动的令人沮丧的问题。我已经阅读了几乎所有关于这些问题的论坛问题，但没有解决我的问题。

所以，我有一个 tumblr 博客（http://jessman5.tumblr.com），尽管使用了：

*   //ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js
*   [http://masonry.desandro.com/jquery.masonry.min.js](http://masonry.desandro.com/jquery.masonry.min.js)
*   [http://masonry.desandro.com/js/jquery.infinitescroll.min.js](http://masonry.desandro.com/js/jquery.infinitescroll.min.js)

这个代码：

```
<script>
$(function(){
var container = $('#container');

    container.infinitescroll({
            navSelector  : '.pagination',    
            nextSelector : '.pagination a',
            itemSelector : '.post',
            loading: {
              finishedMsg: 'No more pages to load.',
              img: 'http://i.imgur.com/6RMhx.gif'
            }
        },
        function( newElements ) {
            var newElems = $( newElements );
            newElems.css({ opacity: 0 });
            newElems.animate({ opacity: 1 });
            container.masonry( 'appended', newElems); 
        }
    );
    container.imagesLoaded(function(){
        container.masonry({
            itemSelector: '.post'
        });
    })
});
</script> 
```

在加载较旧的帖子时，这些帖子是重叠的。Safari 有一段时间做得很好，但 Chrome 和 Firefox 完全迷失了。

我试图包括这个：

```
$(window).load(function(){
  $('#container').masonry({
    // options...
  });
}); 
```

还有这个：

```
container.imagesLoaded(function () {
        container.masonry({
            columnWidth: function (containerWidth) {
                return containerWidth / 100;
            }
        });
    }); 
```

和（感觉像）数百个其他版本的代码......这对我没有任何作用。

我希望任何人都可以帮助我。我很沮丧..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:11:12.457

尝试调试代码时，请*始终*检查控制台是否有错误。控制台说明了这一点：

```
cannot call methods on masonry prior to initialization; attempted to call method 'appended' 
```

我可以看到您正在尝试在该`window.load`方法上初始化砌体，但是您的无限滚动代码在文档就绪时触发，该文档*在* `window.load`. 这就是错误仍然发生的原因。

尝试在方法中同时初始化无限滚动和砖石`document.ready`，或者在方法中同时初始化`window.load`，你应该让它工作。例子：

```
$(function() {
    $('#container').masonry({
        // options
    });

    $('#container').infinitescroll({
        // etc
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:45:13.640

好的，这是有效的代码：

```
<script type="text/javascript">
$(function(){
var container = $('#container');

container.imagesLoaded( function(){
    container.masonry({
        itemSelector : '.post'
    });
});

container.infinitescroll({
      navSelector  : '.pagination',    
      nextSelector : '.pagination a',
      itemSelector : '.post',
      loading: {
          finishedMsg: 'No more pages to load.',
          img: 'http://i.imgur.com/6RMhx.gif'
        }
      },
      function( newElements ) {
        var $newElems = $( newElements ).css({ opacity: 0 });
        $newElems.imagesLoaded(function(){
          $newElems.animate({ opacity: 1 });
          container.masonry( 'appended', $newElems, true ); 
        });
      }
    );
});
</script> 
```

我只需要翻转它，对吗？哈哈 :D

# c# - 获取嵌套实体的数量

> ID：14460372
> 
> 赞同：11
> 
> 时间：2013-01-22T14:03:11.363
> 
> 标签：c#, linq, entity-framework

我正在尝试计算 LINQ 中特定州的员工人数。

我有这样的事情：

```
States
     |
     Cities
          |
          Posts
              |
              Employees 
```

我怎样才能`Employees`通过选中`State`的手来计数？

我的实体是：

```
public class Province : EntityBase
{
    public String ProvinceName { get; set; }
    public virtual IList<City> Cities { get; set; }
}

public class City : EntityBase
{
    public String CityName { get; set; }

    public virtual Province Province { get; set; }
    public virtual IList<Post> ElectricPosts { get; set; }
}

public class Post : EntityBase
{
    public String PostName { get; set; }
    public virtual City City { get; set; }
    public virtual IList<Employee> Employees { get; set; }
}

public class Employee : Person
{
    public virtual String FirstName { get; set; }
    public virtual String SureName { get; set; }
    public virtual Post ElectricPost { get; set; }
} 
```

**编辑：**有趣的是我可以`Posts`毫无问题地计数，但是当我想尝试@HamletHakobyan 帖子中的方式时，我得到了`NullReferenceException`，我不知道为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T14:09:33.987

我不确定，但试试这个：

```
var state = ((IObjectContextAdapter)context)
            .ObjectContext
            .CreateObjectSet<Province>("States") as ObjectQuery<Province>;
            // States is entitySetName

int count = state.Cities.Include("ElectricPosts.Employees")
                    .SelectMany(c => c.Posts)
                    .SelectMany(p => p.Employees)
                    .Count(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T14:12:53.340

您可以为此使用 LINQ to Entities`Sum`和`Count`方法：

```
int count = db.States
  .Where( state => state.StateId == X )
  .Sum( state => state.Cities
    .Sum( city => city.Posts
      .Sum( post.Employees.Count() )
    )
  )
; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T14:06:15.587

```
var q = from emp in dc.Employees
    from post in dc.Posts
    from city in dc.Cities
    from state in dc.States
    where emp.PostID == post.ID
    && post.CityID == city.ID
    && city.StateID == state.ID
    && state.Name == "Tehran"
    select emp; 
```

或者干脆

```
var q = from emp in dc.Employees
    where emp.Post.City.State.Name == "Tehran" 
```

**q**是那个州的雇员名单，现在你可以很容易地计算他们（我相信你知道如何计算他们）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T15:33:24.667

如果我正确地理解了你，这将是我对你的问题的解决方案，因为我无法找到将 4 个 Linq 粘在一起的方法，但也许你可以做到这一点

顺便说一句，如果您需要可选的，请查看此[链接](https://stackoverflow.com/questions/5136896/linq-with-optional-where-clauses-and-sql-server-ce)

```
 var list = new List<Province>();

        string sProvinceName = "";
        string sCityName = "";
        string sPostName = "";
        string sEmployeeFirstName = "";
        string sEmployeeSureName = "";

        var iListListcitys = from province in list
                             where province != null
                             where province.Cities != null
                             where province.ProvinceName == sProvinceName
                             select province.Cities;

        var iListListposts = from icitys in iListListcitys
                             from city in icitys
                             where city != null
                             where city.ElectricPosts != null
                             where city.CityName == sCityName
                             select city.ElectricPosts;

        var iListListEmployees = from posts in iListListposts
                                 from post in posts
                                 where post != null
                                 where post.Employees != null
                                 where post.PostName == sPostName
                                 select post.Employees;

        var listEmployees = from employees in iListListEmployees
                            from employee in employees
                            where employee != null
                            where employee.FirstName == sEmployeeFirstName || employee.SureName == sEmployeeSureName
                            select employee;

        var count = listEmployees.Count(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-20T11:31:56.547

我有完全相同的（问题）问题，但不幸的是我在互联网上找到的其他人的解决方案是错误的！所以我试图解决这个问题。所以，假设我们有一些国家，每个国家都有一些州，每个州都有一些城市，我们想要获得一些国家视图模型，这些模型具有每个国家的 Id 和名称以及所有州和所有城市的计数属于每个国家。解决方案如下：

```
var varResult =
    OurDatabaseContext.Countries
    .Select(current => new {
        Id = current.Id,
        Name = current.Name,
        StateCount = current.States.Count,
        CityCount = current.States.Count == 0 ? 0 :
        current.States.Select(state =>
          new { CityCount = state.Cities.Count }).Sum(q => q.CityCount)
    }; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T14:06:17.820

```
db.States.Where(p => p.yourcondition == whatever).Cities.Posts.Employees.Count() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-10T20:56:53.917

试试这个：

```
Province province = ...;
int count = province.Cities.Include(c => c.Posts.Select(p => p.Employees))
    .Where(c => c != null)
    .SelectMany(c => c.Posts)
    .Where(p => p != null)
    .SelectMany(p => p.Employees)
    .Where(e => e != null)
    .Count(); 
```

然后将`.Where`子句一一去掉，找出问题所在。

您还可以使用`join`s：

```
int count = (from c in province.Cities
             join p in db.Posts on c equals p.City
             join e in db.Employees on p equals e.ElectricPost
             select e).Count(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-11T06:10:13.477

```
var cites = (from s in _db.Province where s.ProvinceName == 'name' select s.Cities);
int count = (from p in _db.Posts
         where city.Contains(p.City)
         select p.Employees).Count(); 
```

# java - 未找到 JDBC/ODBC 数据源名称且未指定默认驱动程序

> ID：14460376
> 
> 赞同：0
> 
> 时间：2013-01-22T14:03:21.403
> 
> 标签：java, jdbc, odbc

我意识到有很多与此相关的问题，并且我已经阅读了大部分（我不会全部说，因为那将是谎言），但似乎没有一个能够完全涵盖我的问题。

我目前正在维护一个相当旧的应用程序（Java 1.4 old），它使用 odbc 来（据我所知）访问本地 .mdb 文件。

为此，该程序似乎使用了类似构造的连接字符串：

```
db.url = jdbc:odbc:Importer 
```

运行它时，我得到这个问题标题中设置的错误。现在，为什么大多数问题似乎不适用于我：

*   我在 Windows XP SP3 32 位机器上工作（排除了解决方案是 64 位问题的所有问题）
*   我实际上并没有通过执行它来调用 odbc，它只是通过应用程序运行

那么，还有什么问题呢？我确信完全相同的应用程序在客户的机器上正常运行（我将其复制到我的机器上），因此实际应用程序**之外的配置肯定存在一些问题。**

会是什么呢？系统要求？一些注册表项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:10:33.537

来自[http://www.stoneedge.com/help/OM_DOC/tips_tricks/Creating_ODBC_Connection_in_Windows.html](http://www.stoneedge.com/help/OM_DOC/tips_tricks/Creating_ODBC_Connection_in_Windows.html)

*   单击开始菜单。
*   选择控制面板。
*   选择管理工具并双击数据源 (ODBC) 图标。
*   单击系统 DSN 选项卡。
*   单击添加按钮。
*   从驱动程序列表中选择 Microsoft Access Driver (*.mdb)，然后单击完成按钮。
*   将 mdb 文件...提供给数据库并提供名称“Importer”

# c# - ExecuteXmlReaderAsync 无法按预期工作

> ID：14460378
> 
> 赞同：3
> 
> 时间：2013-01-22T14:03:24.923
> 
> 标签：c#, xml, .net-4.5, async-await

我正在尝试使用 .NET 4.5 中的新异步方法实现从 MSSQL 读取 XML。

我有以下代码

```
var xmlReader = await sqlCommand.ExecuteXmlReaderAsync();

while (await xmlReader.ReadAsync())
{
    var doc = (MyDocument)xmlSerializer.Deserialize(xmlReader);
    await Process(doc);
} 
```

**如果您想使用异步方法**，它将失败并设置 XmlReaderSettings.Async 为 true。.

我检查了 ExecuteXmlReaderAsync 的反编译源，我可以看到它使用以下设置之一：

```
private static readonly XmlReaderSettings DefaultXmlReaderSettings = new XmlReaderSettings()
{
  ConformanceLevel = ConformanceLevel.Fragment
};
private static readonly XmlReaderSettings DefaultXmlReaderSettingsCloseInput = new       XmlReaderSettings()
{
  ConformanceLevel = ConformanceLevel.Fragment,
  CloseInput = true
}; 
```

所以看起来 ExecuteXmlReaderAsync 没有很好地实现。

如果您有任何成功使用此方法的经验，请提出建议。

UPD：xmlReader.Settings.Async 是只读的，因此应在创建对象时设置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:36:57.110

我认为您对这个问题的根源是完全正确的。如果我使用反射来更改您提到的私有字段中的设置，它似乎可以工作。

```
var settingsField = typeof(SqlXml)
    .GetField("DefaultXmlReaderSettingsCloseInput",
              BindingFlags.Static | BindingFlags.NonPublic);
var settings = (XmlReaderSettings)settingsField.GetValue(null);
settings.Async = true; 
```

请注意，这是一个肮脏的 hack，它可能随时停止工作。而且我真的不知道自己在做什么，所以这实际上可能无法正常工作，或者可能会产生一些意想不到的后果。因此，我在使用它时会非常小心。

另外，我认为您应该[将此作为错误报告给 Microsoft](https://connect.microsoft.com/VisualStudio/)。

# php - 有没有办法存储 php mysqli 登录的散列密码？

> ID：14460385
> 
> 赞同：0
> 
> 时间：2013-01-22T14:03:49.070
> 
> 标签：php, mysqli

我通常会

```
$password = "password";
$mysqli = new mysqli("localhost", "root", $password, "database"); 
```

有没有办法给 mysqli 一个哈希密码，而不必保存存储在我的脚本中的明文形式？是否有避免在我的脚本周围使用明文密码的好习惯？这安全吗

我知道它不会是 100% 的证明，但它确实让没有可用的明文变得稍微麻烦一些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:05:47.430

没有; 这将违背首先使用密码散列的意义。如果您可以使用散列密码登录，那么散列密码本质*上*就是您的密码。

你可以加密它，但解密的密钥也必须存储在某个地方，所以你只是混淆密码，而不是保护它。如果他有权访问您的脚本文件，任何*想要它的人都可以轻松找到它。*

最终，您必须对服务器自身文件系统的安全性有所信任。您最好的选择是确保它存储在文档根目录之外，并且服务器上不需要阅读它的任何用户/组都无法读取它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T14:12:30.263

很不幸的是，不行。作为密码发送的*就是*密码。即使您要创建一个小函数来散列密码，您仍然必须使用纯文本密码。尽管如此，该散列密码仍将成为您的密码（就像您在 MySQL 中设置的那样），因此它仍然是纯文本。

由于 PHP 是一个服务器端脚本，没有人可以看到此密码，也不会将其传输到客户端，因此无法拦截。我建议使用难以猜测的密码，并确保您的脚本免受 MySQL 注入的影响，这样任何人都无法通过该路径访问您的数据库。

# php - 对多维数组进行排序并从 XML 中删除重复项

> ID：14460386
> 
> 赞同：1
> 
> 时间：2013-01-22T14:03:52.293
> 
> 标签：php, arrays, xml, sorting

我要做的是对数组进行排序并删除多个重复项，这就是我所拥有的：

我使用 PHP Simple HTML DOM Parser 绘制 XML 文件并将其转换为数组，XML 的格式如下：

```
<Row>

    <Cell ss:StyleID="s17"><Data ss:Type="String">Last Name</Data></Cell>
    <Cell ss:StyleID="s17"><Data ss:Type="String">First Name</Data></Cell>
    <Cell ss:StyleID="s17"><Data ss:Type="String">Address</Data></Cell>
    <Cell ss:StyleID="s17"><Data ss:Type="String">City</Data></Cell>
    <Cell ss:StyleID="s17"><Data ss:Type="String">Province</Data></Cell>
    <Cell ss:StyleID="s17"><Data ss:Type="String">Postal Code</Data></Cell>
    <Cell ss:StyleID="s17"><Data ss:Type="String">Year</Data></Cell>

</Row> 
```

我希望将单元格的名字和姓氏组合起来，然后与数组的其余部分进行比较。

```
function search($array, $key, $value)
{
    $results = array();

    if (is_array($array))
    {
        if (isset($array[$key]) && $array[$key] == $value)
            $results[] = $array;

        foreach ($array as $subarray)
            $results = array_merge($results, search($subarray, $key, $value));
    }

    return $results;
}

$simple  = file_get_html('DOM/mail.xml');

$i = 0;

foreach($simple->find('row') as $article) {

    $item['name']     = $article->find('cell', 0)->plaintext.' '.$article->find('cell', 1)->plaintext;

    $item['address']     = $article->find('cell', 2)->plaintext;

    $item['city']     = $article->find('cell', 3)->plaintext;

    $item['province']     = $article->find('cell', 4)->plaintext;

    $item['postal']     = $article->find('cell', 5)->plaintext;

    $item['year']     = $article->find('cell', 6)->plaintext;

    $item['count']     = $i;

    $i++;

    $articles[] = $item;

}

$a[] = "Buckley Terry";
$a[] = "test bar";
$a[] = "Grills Levi";

foreach ($a as $test) {

    $b[] = search($articles, 'name', $test);

}

print_r($b); 
```

但这所做的只是返回多个名称实例。即，如果只有一个条目，它将返回它。任何帮助都是极好的。

# php - 我如何验证德国货币 FormField

> ID：14460389
> 
> 赞同：2
> 
> 时间：2013-01-22T14:03:58.410
> 
> 标签：php

在 PHP 应用程序中，我想验证表单中输入金额的格式。金额应以德语格式输入，即`1.001,00`千零一。仅允许输入点、逗号和数字等格式？

任何帮助将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:18:54.097

模型中的简单正则表达式验证就足够了吗？

```
/[\d.](,\d\d)?$/ 
```

这将验证只允许数字和句点，最后可以选择逗号和两位数字。它不会验证句点是否正确放置，但它们是装饰器而不是标识符，就定位而言，逗号是唯一重要的。

为了把它变成`float`PHP 我不认为 Yii 提供任何依赖于语言环境的解析代码，所以它可能是一项手动工作。

删除所有句点，将逗号转换为句点并通过`floatval()`?

# android - 微调器文本颜色和下拉菜单颜色相同

> ID：14460392
> 
> 赞同：3
> 
> 时间：2013-01-22T14:04:04.703
> 
> 标签：android, text, colors, background, spinner

我的活动中有 2 个旋转器。其中一个微调器 comExpiry 基于从另一个微调器 comSpinner 中选择的值进行填充。但是，我遇到了一个问题，即 comSpinner 正确显示，而 comExpiry 的文本和背景颜色在运行 ICS 的模拟器中都设置为白色，因此不可读。

请注意，它在 Froyo 和 Gingerbread 中都可以正常工作。我注意到如果我删除附加到 comSpinner 的侦听器，微调器会按预期显示。我到处寻找，但找不到解决方案。任何帮助将不胜感激。

```
comSpinner = (Spinner) findViewById(R.id.watchListSpinnetComm);
comExpiry = (Spinner) findViewById(R.id.watchListSpinnerExpiry);

ArrayAdapter<String> expAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item,
        McxCommApp.comSelect.get(0));
expAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
comExpiry.setAdapter(expAdapter);

myAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, McxCommApp.comName);
myAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

comSpinner.setAdapter(myAdapter);
comSpinner.setOnItemSelectedListener(new myListener()); 
```

ItemSelectedListener 代码如下：

```
public class myListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

        expAdapter = new ArrayAdapter<String>(getApplicationContext(), R.layout.spinner_a,
                McxCommApp.comSelect.get(pos));
        expAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        comExpiry.setAdapter(expAdapter);   
    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Do nothing.
    }
} 
```

定义布局的 XML 段：

```
<TableRow
    android:id="@+id/watchListTable"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <Spinner
        android:id="@+id/watchListSpinnetComm"
        android:layout_height="32dip"
        android:layout_column="1"
        android:layout_gravity="center_vertical"
        android:paddingLeft="5dip" />

    <Spinner
        android:id="@+id/watchListSpinnerExpiry"
        android:layout_width="145dip"
        android:layout_height="32dip"
        android:layout_column="2"
        android:layout_gravity="center_vertical"
        android:paddingLeft="5dip" />

    <Button
        android:id="@+id/watchListAdd"
        android:layout_width="wrap_content"
        android:layout_height="40dip"
        android:layout_gravity="center_vertical"
        android:text="+"
        android:textAppearance="?android:attr/textAppearanceLarge" />
</TableRow> 
```

# php - 登录后如何将用户重定向到原始页面？

> ID：14460393
> 
> 赞同：1
> 
> 时间：2013-01-22T14:04:06.870
> 
> 标签：php, redirect, login

> **可能重复：**
> [如何在 PHP 中实现类似 SO 的 returnurl？](https://stackoverflow.com/questions/1599379/how-to-implement-the-returnurl-like-so-in-php)

我正在尝试这样做，以便当未登录的用户浏览我的网站并单击链接时，他们会被带到登录页面（在 jQuery 灯箱窗口中打开），登录后他们会被带回他们所在的上一个/原始页面。

我已经尝试使用这个简单的代码来尝试实现这一点，但是当我使用它时，它不会显示登录页面并直接进入上一个/原始页面，因此用户无法登录。

```
if(!empty($_SERVER['HTTP_REFERER']))
{
  header('Location: '.$_SERVER['HTTP_REFERER']);
} 
```

这是我所有的登录脚本代码：

**HTML：**

```
<form action="login.php" method="post" target="_top"  >
  <div class="row email">
    <input type="email" id="email" name="email" placeholder="Email" value="<?php echo htmlentities($email); ?>" />
  </div>
  <div class="row password">
    <input type="password" id="password" name="password" placeholder="Password" value="<?php echo htmlentities($email); ?>" />
  </div>
  <input type="submit" name="submit" class="submit-login" value="Login >
</form> 
```

**PHP：**

```
<?php
  if (logged_in())
  {
    redirect_to("dashboard.php");
  }

  include_once("includes/form_functions.php");

  // START FORM PROCESSING
  if (isset($_POST['submit'])) { // Form has been submitted.
    $errors = array();

    // perform validations on the form data
    $required_fields = array('email', 'password');
    $errors = array_merge($errors, check_required_fields($required_fields, $_POST));

    $fields_with_lengths = array('email' => 30, 'password' => 30);
    $errors = array_merge($errors, check_max_field_lengths($fields_with_lengths, $_POST));

    $email = trim(mysql_prep($_POST['email']));
    $password = trim(mysql_prep($_POST['password']));
    $hashed_password = md5($password);

    if ( empty($errors) ) {
      // Check database to see if email and the hashed password exist there.
      $query = "SELECT id, email, close_account ";
      $query .= "FROM ptb_users ";
      $query .= "WHERE email = '{$email}' ";
      $query .= "AND password = '{$hashed_password}' ";
      $query .= "AND close_account = '0' ";
      $query .= "LIMIT 1";
      $result_set = mysql_query($query);
      confirm_query($result_set);
      if (mysql_num_rows($result_set) == 1) {
        // email/password authenticated
        // and only 1 match
        $found_user = mysql_fetch_array($result_set);
        $_SESSION['user_id'] = $found_user['id'];
        $_SESSION['email'] = $found_user['email'];
        $_SESSION['sub_expires'] = $found_user['subscription_expires'];

        $result = mysql_query("UPDATE ptb_users SET user_online='Online' WHERE id=".$_SESSION['user_id']."") 
                or die(mysql_error());

        redirect_to("dashboard.php");
      } else {
        // email/password combo was not found in the database
        $message = "<div class=\"infobox\"><strong>Email/Password combination incorrect.</strong><br />"
                .= "Please make sure your caps lock key is off and try again.</div><br/>";
      }
    } else {
      if (count($errors) == 1) {
        $message = "<div class=\"infobox\">There was 1 error in the form.<div>";
      } else {
        $message = "<div class=\"infobox\">There were " . count($errors) . " errors in the form.<div>";
      }
    }
  } else { // Form has not been submitted.
    if (isset($_GET['logout']) && $_GET['logout'] == 1) {
      $message = "<div class=\"infobox\">You are now logged out.</div>";
    } 
    $email = "";
    $password = "";
  }
?>
<?php if (!empty($message)) {echo "<p class=\"message\">" . $message . "</p>";} ?>
<?php if (!empty($errors)) { display_errors($errors); } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:06:38.953

当有人尝试访问需要身份验证的页面时，将该 URL 存储在 $_SESSION 变量中。然后将它们重定向到登录页面。登录后检查 $_SESSION 变量是否存在。如果是这样，请将它们重定向回该 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:10:31.007

您可以在 AJAX 的帮助下登录，成功登录后重新加载页面。这在很多方面都会更有帮助。

例如，如果用户名/密码错误，则查询灯箱窗口中可能会显示错误，而不是等待页面加载显示错误。

# c++ - 是否可以在 nodejs 中使用 C++ 类？

> ID：14460396
> 
> 赞同：3
> 
> 时间：2013-01-22T14:04:16.840
> 
> 标签：c++, node.js

我用 C++ 编写了一些类。我用过OOP。现在我想在 nodejs 中使用这些类。我认为可以通过以下方式完成：

1.  在 nodejs 中创建 C++ 类的对象并调用它们的方法。
2.  调用已编译的 c++ 代码，并获取输出。
3.  与正在运行的已编译 C++ 程序（类似 IPC 的技术）进行交互。
4.  你喜欢的另一种方式。

这些解决方案中哪一个是可行的？

注意：我见过 nodejs-ffi 模块，但它似乎只使用内置方法。真的吗？

让我们假设我已经写了这个：

```
namespace Math
{
    class Aljebra
    {
        int Abs(int);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:30:25.550

是的，在你想到的所有方面都是可能的。

1.  您需要创建 C++ 类与 Nodejs 的绑定，请参阅[此问题](https://stackoverflow.com/questions/9629677/how-can-i-use-a-c-library-from-node-js)或[此处](http://www.slideshare.net/nsm.nikhil/writing-native-bindings-to-nodejs-in-c)和[此处](https://developers.google.com/v8/embed#templates)。如果性能不可忽略，您可能会发现类似[这样的](https://stackoverflow.com/q/12197292/142039)问题。无论如何，这是最快的方法。

2.  调用代码？我总是调用函数，但如果你想知道如何使用像 nodejs-ffi 这样的模块，那么将它们与 C++ 一起使用会很痛苦。所有函数名称都在 C++ 中被修改，这意味着您`Math::Aljebra::Abs`可能实际被调用`_ZN4Math7Aljebra3AbsEi`，这取决于您使用的编译器。如果您的库主要包含`extern "C"`功能，则可用。

3.  有很多图书馆可以做到这一点。我更喜欢[DBus](https://github.com/Motorola-Mobility/node-dbus)。您可以使用它与许多系统守护程序进行通信。当然，如果你想将它与你的 C++ 代码一起使用，你需要编写一个 DBus 服务来与之通信。

4.  那要看。如果您无法编译，只需使用现有库，第二个解决方案可能是唯一的一个。如果需要在 C++ 库中相互通信许多 nodejs 实例，第三种解决方案可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:11:10.540

我已经分别使用了相当多的 Node.js 和 C++——我想我可以将 Node.js 视为服务器端语言，而 C++ 则以非常传统的方式作为客户端。然而，这在某种程度上抵消了 Node.js 作为客户端语言的许多功能，这是该语言的“热门”特性之一——它可以同时做到这两者。

此外，我不确定 C++ 对客户端 Web 开发的支持。它是如此强大的语言，我相信它是可能的......但我认为当你弄清楚如何用 Node.js 实现 C++ 时，你可能已经重写了你想用 C++ 调用的函数在 Node.js 或其他更合适的语言中。

# objective-c - NSMutableData 字节的总和

> ID：14460407
> 
> 赞同：0
> 
> 时间：2013-01-22T14:04:55.443
> 
> 标签：objective-c

我想要一个 NSMutableData 字节的总和，这可以通过快速方法实现，还是我应该自己实现？

我有 NSMutableData `<4b01000F 00000005>`，我想知道所有字节的总和（4b + 01 + 00 + 0F + 等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:07:00.627

我认为没有内置功能。听起来您正在尝试构建某种校验和。您必须遍历字节并开始添加。

但是，您可能会发现这很有用：[https ://discussions.apple.com/thread/1509152?threadID=1509152&tstart=96](https://discussions.apple.com/thread/1509152?threadID=1509152&tstart=96)

# matlab - Matlab中的并行处理

> ID：14460409
> 
> 赞同：5
> 
> 时间：2013-01-22T14:04:56.590
> 
> 标签：matlab, parallel-processing, distributed

我创建了两个函数：生成数据和处理数据。数据处理很耗时，所以我想在并行线程中处理它们。但我对他们有一些问题。首先，这是我的程序：

```
result = zeros(1, 10);

matlabpool open local 2
spmd
    for a = 1:5
        data = generate_data();
        display(sprintf('Received data on CPU%d: %d', labindex, data));
        result(end + 1) = process_data(data);
    end
    display(sprintf('All done on CPU%d', labindex));
end
matlabpool close 
```

并记录它返回的内容：

```
Starting matlabpool using the 'local' profile ... connected to 2 workers.
Lab 1: 
  Received data on CPU1: 100
Lab 2: 
  Received data on CPU2: 100
Lab 1: 
  Received data on CPU1: 101
  Received data on CPU1: 102
  Received data on CPU1: 103
  Received data on CPU1: 104
  All done on CPU1
Lab 2: 
  Received data on CPU2: 101
  Received data on CPU2: 102
  Received data on CPU2: 103
  Received data on CPU2: 104
  All done on CPU2
Sending a stop signal to all the workers ... stopped. 
```

有问题，我有：

1.  它由 generate_data 返回的值对于两个线程是相同的。我应该与众不同。线程应该处理不同的数据，而不是两次处理相同的数据。我无法一次生成整个数据集并使用 getLocalPart。

2.  可变结果不是 1x10 的双精度矩阵，而是 1x2 的复合矩阵。我读到了（共同）分布式数组，但它对我没有帮助。我应该怎么做才能收到双打的 1x10 矩阵？

3.  处理完自己的数据后，我应该对 CPU1 处理 CPU2 的数据做什么？一般来说，我不知道如何做到这一点。

4.  是否可以删除“Lab 1:”和“Lab 2:”？他们在弄乱我的日志:)

考虑到上述情况，日志（对于更大的数据集）应该是这样的：

```
Starting matlabpool using the 'local' profile ... connected to 2 workers.
Received data on CPU1: 100
Received data on CPU2: 101
Received data on CPU1: 102
Received data on CPU1: 103
Received data on CPU1: 104
Received data on CPU1: 105
Received data on CPU2: 106
Received data on CPU1: 107
Received data on CPU1: 108
Received data on CPU2: 109
All done on CPU1
All done on CPU2
Sending a stop signal to all the workers ... stopped. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T14:32:07.563

你为什么不使用更简单的`parfor`？目前，您正在每个工作人员上运行循环，我假设您希望并行运行循环的迭代。

```
nIter = 10;
result = zeros(1, nIter);

matlabpool open local 2

    parfor a = 1:nIter
        data = generate_data();
        fprintf('%s: processing set %i/%i\n',datestr(now),a,nIter)
        result(a) = process_data(data);
    end
end
matlabpool close 
```

# eclipse - eclipse 3.8 和 3.8.1 的区别？

> ID：14460412
> 
> 赞同：0
> 
> 时间：2013-01-22T14:05:13.027
> 
> 标签：eclipse, eclipse-plugin

eclipse 3.8.0 和 3.8.1 的主要区别是什么？

Eclipse 3.8：http: [//download.eclipse.org/eclipse/downloads/drops/R-3.8-201206081200/](http://download.eclipse.org/eclipse/downloads/drops/R-3.8-201206081200/)

Eclipse 3.8.1：http: [//download.eclipse.org/eclipse/downloads/drops/R-3.8.1-201209141540/](http://download.eclipse.org/eclipse/downloads/drops/R-3.8.1-201209141540/)

我在上述链接中找不到任何相关说明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:28:00.413

一年有三个 Eclipse 版本。6 月发布一个主要版本（例如 Eclipse 3.8.0），然后分别在 9 月和 2 月发布了两个服务版本（例如 3.8.1 和 3.8.2）。

服务版本中通常没有主要的新功能，往往是更稳定的版本，只有错误修复。

我从未见过整个 Eclipse 项目版本的任何更改日志。我认为项目太多，几乎不可能/无用列出所有项目的所有更改。

某些组件可能有一些变更日志，但这是在每个项目的基础上完成的。
现在应该在[Eclipse bugzilla](https://bugs.eclipse.org/)上跟踪所有更改，所以如果您对特定组件感兴趣，这可能会很有趣。

# umbraco - Umbraco - 在 URL 中访问没有完整结构的节点

> ID：14460413
> 
> 赞同：1
> 
> 时间：2013-01-22T14:05:13.417
> 
> 标签：umbraco

在 Umbraco 我有一个链接：

```
/living/travel/2012/december/costa-del-christmas/ 
```

是否可以通过删除日期 2012/12 月来访问它？该 URL 将产生以下结果：

/生活/旅行/哥斯达黎加圣诞节/

目前，执行此操作时出现 404 错误。

有谁知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:56:15.090

一种方法是使用 umbracoUrlAlias 方法。

[http://our.umbraco.org/wiki/reference/umbraco-best-practices/umbracourlalias](http://our.umbraco.org/wiki/reference/umbraco-best-practices/umbracourlalias)

使用别名 umbracoUrlAlias 向 DocumentType 添加一个新属性，并将其设为文本字符串类型。然后在内容上，您可以为该内容分配任何备用网址，它们将解析到同一页面。

您可能还想添加一些元信息来处理规范链接，这样 Google 就不会认为您有重复的内容。

# c# - C# Compact Framework 可编辑网格控件（DataGrid？）

> ID：14460415
> 
> 赞同：1
> 
> 时间：2013-01-22T14:05:16.403
> 
> 标签：c#, visual-studio-2008, .net-cf-3.5

我想要一个网格控件，我可以在其中指定列并允许用户编辑单元格值。

CF3.5有这种东西吗？

如果可能的话，我更喜欢 VS 2008 提供的标准控件，但如果必须，我会使用第三方控件。

我已经尝试过 DataGrid，但看不到如何使其可由用户编辑或如何添加特定宽度的空列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:14:18.260

从[使用 .NET Compact Framework 中的 DataGrid 开始](http://msdn.microsoft.com/en-us/library/ms172499%28v=vs.80%29.aspx)：

> 在 .NET Compact Framework 中，您不能在运行时直接编辑 DataGrid 的内容。您必须将控件（例如 TextBox）绑定到数据源并使用 DataGrid 来显示和选择记录。

从[如何：在 Pocket PC 上使用 DataGrid](http://msdn.microsoft.com/en-us/library/ms229684%28v=vs.90%29.aspx)：

> 或者，您可以通过从 DataGrid 控件上的智能标记的快捷菜单中选择“生成数据表单”来让 Visual Studio 自动生成摘要和编辑表单。

这里还有一些其他示例代码 ( `VB.NET`)：

[使用 Windows 窗体设计 GUI 应用程序](http://www.informit.com/articles/article.aspx?p=101720&seqNum=30)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:53:30.810

这解释了如何在代码中添加列并设置它们的宽度：

[Windows Mobile 应用程序中 DataGrid 的列宽](https://stackoverflow.com/questions/1051690/column-width-of-a-datagrid-in-a-windows-mobile-application)

不知何故，我错过了 DataGrid.TableStyles 属性，它允许在设计时编辑列。

# javascript - 通过单击按钮获取表格行的内容

> ID：14460421
> 
> 赞同：96
> 
> 时间：2013-01-22T14:05:41.470
> 
> 标签：javascript, jquery, button, onclick, html-table

我需要提取表中每一列的详细信息。例如，列“姓名/编号”。

*   该表包含许多地址
*   每行的最后一列都有一个按钮，让用户可以选择列出的地址。

**问题：**我的代码只选择第一个`<td>`具有 class的代码`nr`。我怎样才能让它工作？

**这是 jQuery 位：**

```
$(".use-address").click(function() {
    var id = $("#choose-address-table").find(".nr:first").text();
    $("#resultas").append(id); // Testing: append the contents of the td to a div
}); 
```

**桌子：**

```
<table id="choose-address-table" class="ui-widget ui-widget-content">
    <thead>
        <tr class="ui-widget-header ">
            <th>Name/Nr.</th>
            <th>Street</th>
            <th>Town</th>
            <th>Postcode</th>
            <th>Country</th>
            <th>Options</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="nr"><span>50</span>
            </td>
            <td>Some Street 1</td>
            <td>Leeds</td>
            <td>L0 0XX</td>
            <td>United Kingdom</td>
            <td>
                <button type="button" class="use-address" />
            </td>
        </tr>
        <tr>
            <td class="nr">49</td>
            <td>Some Street 2</td>
            <td>Lancaster</td>
            <td>L0 0XX</td>
            <td>United Kingdom</td>
            <td>
                <button type="button" class="use-address" />
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2014-05-11T10:05:16.060

练习的目的是找到包含信息的行。当我们到达那里时，我们可以轻松地提取所需的信息。

# 回答

```
$(".use-address").click(function() {
    var $item = $(this).closest("tr")   // Finds the closest row <tr> 
                       .find(".nr")     // Gets a descendent with class="nr"
                       .text();         // Retrieves the text within <td>

    $("#resultas").append($item);       // Outputs the answer
}); 
```

**[查看演示](http://jsfiddle.net/UW38e/)**

现在让我们关注在这种情况下的一些常见问题。

# **如何找到最近的行？**

**使用`.closest()`：**

```
var $row = $(this).closest("tr"); 
```

**使用`.parent()`：**

您还可以使用[`.parent()`](http://api.jquery.com/parent/)方法向上移动 DOM 树。这只是有时与`.prev()`和一起使用的替代方法`.next()`。

```
var $row = $(this).parent()             // Moves up from <button> to <td>
                  .parent();            // Moves up from <td> to <tr> 
```

# **获取所有表格单元格`<td>`值**

所以我们有我们`$row`想要输出表格单元格文本：

```
var $row = $(this).closest("tr"),       // Finds the closest row <tr> 
    $tds = $row.find("td");             // Finds all children <td> elements

$.each($tds, function() {               // Visits every single <td> element
    console.log($(this).text());        // Prints out the text within the <td>
}); 
```

**[查看演示](http://jsfiddle.net/CKEc6/1/)**

# **获取特定`<td>`值**

与上一个类似，但是我们可以指定子`<td>`元素的索引。

```
var $row = $(this).closest("tr"),        // Finds the closest row <tr> 
    $tds = $row.find("td:nth-child(2)"); // Finds the 2nd <td> element

$.each($tds, function() {                // Visits every single <td> element
    console.log($(this).text());         // Prints out the text within the <td>
}); 
```

**[查看演示](http://jsfiddle.net/T9uv7/)**

# **有用的方法**

*   [`.closest()`](http://api.jquery.com/closest/)- 获取与选择器匹配的第一个元素
*   [`.parent()`](http://api.jquery.com/parent/)- 获取当前匹配元素集中每个元素的父元素
*   [`.parents()`](http://api.jquery.com/parents/)- 获取当前匹配元素集中每个元素的祖先
*   [`.children()`](https://api.jquery.com/children/)- 获取匹配元素集中每个元素的子元素
*   [`.siblings()`](http://api.jquery.com/siblings/)- 获取匹配元素集中每个元素的兄弟姐妹
*   [`.find()`](http://api.jquery.com/find/)- 获取当前匹配元素集中每个元素的后代
*   [`.next()`](http://api.jquery.com/next/)- 获取匹配元素集中每个元素的紧随其后的兄弟
*   [`.prev()`](https://api.jquery.com/prev/)- 获取匹配元素集中每个元素的前一个兄弟元素

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-22T14:09:23.880

您需要更改代码以找到与单击的按钮相关的行。尝试这个：

```
$(".use-address").click(function() {
    var id = $(this).closest("tr").find(".nr").text();
    $("#resultas").append(id);
}); 
```

[**示例小提琴**](http://jsfiddle.net/FnDvL/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-22T14:09:06.237

尝试这个：

```
$(".use-address").click(function() {
   $(this).closest('tr').find('td').each(function() {
        var textval = $(this).text(); // this will be the text of each <td>
   });
}); 
```

这将找到`tr`当前单击的按钮的最近（通过 DOM）然后循环每个`td`- 您可能想要创建一个带有值的字符串/数组。

[这里的例子](http://jsfiddle.net/FnDvL/1/)

[**在此处使用数组示例获取完整地址**](http://jsfiddle.net/FnDvL/2/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-22T14:18:48.593

```
function useAdress () { 
var id = $("#choose-address-table").find(".nr:first").text();
alert (id);
$("#resultas").append(id); // Testing: append the contents of the td to a div
}; 
```

然后在您的按钮上：

```
onclick="useAdress()" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-22T14:14:07.677

选择器`".nr:first"`专门寻找第一个，并且只有第一个，`"nr"`在选定的表元素中具有类的元素。如果您改为调用`.find(".nr")`，您将获得表中具有 class 的所有元素`"nr"`。一旦你拥有了所有这些元素，你就可以使用[.each](http://api.jquery.com/each/)方法来迭代它们。例如：

```
$(".use-address").click(function() {
    $("#choose-address-table").find(".nr").each(function(i, nrElt) {
        var id = nrElt.text();
        $("#resultas").append("<p>" + id + "</p>"); // Testing: append the contents of the td to a div
    });
}); 
```

但是，这将为您提供表格中的*所有*`td.nr`元素，而不仅仅是单击的行中的元素。要进一步将您的选择限制为包含单击按钮的行，请使用[.closest](http://api.jquery.com/closest/)方法，如下所示：

```
$(".use-address").click(function() {
    $(this).closest("tr").find(".nr").each(function(i, nrElt) {
        var id = nrElt.text();
        $("#resultas").append("<p>" + id + "</p>"); // Testing: append the contents of the td to a div
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-16T18:48:31.133

这是委托的简单示例的完整代码

```
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>
<body>

<div class="container">
  <h2>Striped Rows</h2>
  <p>The .table-striped class adds zebra-stripes to a table:</p>            
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Firstname</th>
        <th>Lastname</th>
        <th>Email</th>

      </tr>
    </thead>
    <tbody>
      <tr>
        <td>John</td>
        <td>Doe</td>
        <td>john@example.com</td>
        <td>click</td>
      </tr>
      <tr>
        <td>Mary</td>
        <td>Moe</td>
        <td>mary@example.com</td>
        <td>click</td>
      </tr>
      <tr>
        <td>July</td>
        <td>Dooley</td>
        <td>july@example.com</td>
        <td>click</td>
      </tr>

    </tbody>
  </table>
  <script>
  $(document).ready(function(){
  $("div").delegate("table tbody tr td:nth-child(4)", "click", function(){
  var $row = $(this).closest("tr"),        // Finds the closest row <tr> 
    $tds = $row.find("td:nth-child(2)");
     $.each($tds, function() {
        console.log($(this).text());
        var x = $(this).text();
        alert(x);
    });
    });
});
  </script>
</div>

</body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-28T08:27:19.143

将以下代码放在**标题**部分

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> 
```

**将body**中的表格定义为

```
<table class="table table-hover">
            <tr>
                <th>Name/Nr.</th>
                <th>Street</th>
                <th>Town</th>
                <th>Postcode</th>
                <th>Country</th>
                <th>View</th>
            </tr>

            <tr>
                 <td class="nr"><span>50</span></td>
                 <td>Some Street 1</td>
                 <td>Leeds</td>
                 <td>L0 0XX</td>
                 <td>United Kingdom</td>
                 <td><button type="button" class="btn grabId" >View</button></td>
            </tr>

</table> 
```

然后使用这个**脚本**

```
<script>
    $(".grabId").click(function() {
        var $row = $(this).closest("tr");    // Find the row
        var $siteId = $row.find(".siteId").text(); // Find the text
        alert($siteId);
    });
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-13T04:41:43.480

试试这个，只要选择 javascript 或 jquery 如果你没有标题列，不要减 1

```
function rowClicked(element){
    var rowJavascript = element.parentNode.parentNode;
    var rowjQuery = $(element).closest("tr");

    var rowIndexJavascript = rowJavascript.rowIndex-1;
    var rowIndexjQuery = rowjQuery[0].rowIndex-1;

    console.log("rowIndexJavascript : ",rowIndexJavascript);
    console.log("rowIndexjQuery : ",rowIndexjQuery);
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<table>
<tr>
<th>Row ID</th>
<th>Button</th>
</tr>
<tr>
<td>0</td><td><button type="button"  onclick="rowClicked(this)">test1</button></td>
</tr>
<tr>
<td>1</td><td><button type="button" onclick="rowClicked(this)">test2</button></td>
</tr>
<tr>
<td>2</td><td><button type="button" onclick="rowClicked(this)">test3</button></td>
</tr>
</table>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-28T07:15:41.697

```
var values = [];
var count = 0;
$("#tblName").on("click", "tbody tr", function (event) {
   $(this).find("td").each(function () {
       values[count] = $(this).text();
       count++;
    });
}); 
```

现在 values 数组包含该行的所有单元格值，可以像 values[0] 单击行的第一个单元格值一样使用

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-10T11:00:59.520

**使用jquery在行中查找具有id的元素**

```
$(document).ready(function () {
$("button").click(function() {
    //find content of different elements inside a row.
    var nameTxt = $(this).closest('tr').find('.name').text();
    var emailTxt = $(this).closest('tr').find('.email').text();
    //assign above variables text1,text2 values to other elements.
    $("#name").val( nameTxt );
    $("#email").val( emailTxt );
    });
}); 
```

# hadoop - 所有列族都没有从 Cassandra 键空间映射到 hive 数据库

> ID：14460426
> 
> 赞同：1
> 
> 时间：2013-01-22T14:05:51.940
> 
> 标签：hadoop, cassandra, hive, datastax-enterprise

我正在使用与 hadoop hive 集成的 cassandra。

我的键空间测试中有这两个列族-

```
1)CF_1
create COLUMNFAMILY CF_1 (key uuid primary key, time varchar,type varchar);

2)CF_2
create COLUMNFAMILY CF_2 (id varchar, time timestamp,  data varchar, primary key(id,time)); 
```

因此，hive 仅将 CF_1 从我的 cassandra 键空间映射到 hive 表。我认为另一个列族（CF_2）没有映射，因为它具有复合主键。

要么我相信目前不支持 DataStax 企业套件中具有复合键的 CF，要么我遗漏了一些东西。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T17:59:10.137

您可能需要使用 CqlStorageHandler。

查看以下博客，了解 Hive 中如何处理 CQL3 表 [http://www.datastax.com/dev/blog/cql3-table-support-in-hadoop-pig-and-hive](http://www.datastax.com/dev/blog/cql3-table-support-in-hadoop-pig-and-hive)

# iphone - 如何始终在 iPhone 上显示 MPMoviePlayerController 的控件和搜索栏

> ID：14460428
> 
> 赞同：5
> 
> 时间：2013-01-22T14:06:07.023
> 
> 标签：iphone, ios, ipad

我希望 MPMoviePlayerController 的控件和搜索栏应该一直可见。当前控制和搜索栏在特定时间后隐藏。请让我知道解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:27:19.263

在这里尝试答案： [MPMoviePlayerController control visible when started movies](https://stackoverflow.com/questions/4285151/mpmovieplayercontroller-control-visible-when-starting-movie)

你需要操纵`controlStyle`你的`MPMoviePlayerController`班级

[http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/occ/instp/MPMoviePlayerController/controlStyle](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/occ/instp/MPMoviePlayerController/controlStyle)

# android - 如何在 GooglePlay 上更新应用

> ID：14460429
> 
> 赞同：-1
> 
> 时间：2013-01-22T14:06:08.143
> 
> 标签：android

我有一个包含 GooglePlay 内置字符串的应用程序。我在应用程序中添加了新字符串，我想知道您如何更新应用程序？只是在同一个new下上传新的apk？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:09:56.733

您还需要[增加](https://developer.android.com/tools/publishing/versioning.html)应用程序的版本。最好在[发布您的应用程序教程](https://developer.android.com/tools/publishing/publishing_overview.html)时检查evertyhing 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:10:06.987

新的 apk 必须具有相同的包名称，并且必须使用与前一个相同的密钥库文件进行签名。而已。

**编辑：**哦，是的，还要增加清单中的 versionCode

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:09:39.263

开发者控制台允许您为当前应用程序上传新的 apk 文件。1\. 登录并选择您的应用程序 2\. 在页面顶部，您将看到 2 个选项卡，产品详细信息和 Apk 文件。选择 Apk 文件 3\. 有一个按钮显示“上传 Apk”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T14:10:12.833

您必须在清单中增加 android:versionCode 否则 Google 会拒绝您的新 apk

# ios - MKPointAnnotation 被释放，而关键值观察者

> ID：14460433
> 
> 赞同：2
> 
> 时间：2013-01-22T14:06:20.787
> 
> 标签：ios, mkmapview, mkannotation

我在添加注释时遇到错误

类的实例 0x21fcadd0 已`MKPointAnnotation`被释放，而键值观察者仍向其注册。观察信息被泄露，甚至可能被错误地附加到其他对象上。在调试器中设置断点`NSKVODeallocateBreak`以在此处停止。

这是当前的观察信息：

（上下文：0x0，属性：0xb74f170>）

我的代码低于 100 多个引脚。

```
 if ([arrListing count] != 0) {
        for (int i = 0; i < [arrListing count]; i++) {

            Listing *obj = [arrListing objectAtIndex:i];
            NSLog(@"Title %@  long:%@  Lat:%@",obj.Title,obj.log,obj.lat);

            CLLocationCoordinate2D annotationCoord;

            annotationCoord.latitude = [obj.lat floatValue];
            annotationCoord.longitude = [obj.log floatValue];

                // do something
                MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];
                annotationPoint.coordinate = annotationCoord;
                annotationPoint.title = obj.Title;
                //  annotationPoint.subtitle = obj.log;
                [mapView addAnnotation:annotationPoint];

        }
    }    
} 
```

感谢先进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-19T13:50:32.777

这意味着您可能弄错了纬度和经度。

纬度应该在 -90 到 90 之间，经度应该在 -180 到 180 之间。

# oracle - pl / sql嵌套表对象上的oracle动态sql

> ID：14460436
> 
> 赞同：1
> 
> 时间：2013-01-22T14:06:35.803
> 
> 标签：oracle, plsql, oracle11g

```
CREATE TYPE PROD_RPT_DTL  IS object
(
    DIVISION_ID NUMBER(6),
    DIVISION_NM VARCHAR2(100), 
    DEPT_ID NUMBER(10), 
    DEPT_NM VARCHAR2(100),
    WORK_FLOOR_ID NUMBER(10),
    ...........................
)/
CREATE TYPE PROD_RPT_DTL_TABLE is TABLE OF PROD_RPT_DTL 
```

--> 程序返回的 PROD_RPT_DTL_TABLE 类型是

```
PROCEDURE sp_GetAllInQtyDetailForCutting(V_PROD_RPT_DTL out PROD_RPT_DTL_TABLE); 
```

-->现在我的程序正在执行下面的代码

```
DECLARE
    v_PROD_RPT_DTL PROD_RPT_DTL_TABLE:=PROD_RPT_DTL_TABLE();
    vv_PROD_RPT_DTL PROD_RPT_DTL_TABLE:=PROD_RPT_DTL_TABLE();
    WHEREClause varchar2(500);
    QUERY VARCHAR2(2000);
    CUR SYS_REFCURSOR;
BEGIN
    --calling procedure to return valued in v_PROD_RPT_DTL
    sp_GetAllInQtyDetailForCutting(v_PROD_RPT_DTL);
    WHEREClause := ' Where division_id=1'; ; 
    --> now v_PROD_RPT_DTL is a nested table and i have to apply some dynamic filter on it.
    QUERY := 'SELECT * bulk collect INTO vv_PROD_RPT_DTL FROM Table(cast(v_PROD_RPT_DTL AS PROD_RPT_DTL_TABLE))' || WHEREClause ;
    open cur for QUERY;
    .................................................
END ; 
```

当我运行整个事情时，我遇到了错误

```
ORA-00904: "V_PROD_RPT_DTL": invalid identifier 
ORA-06512: at "SCHEMA.PKG_PROD_REP_MDL", line 52 
ORA-06512: at line 4  ! 
```

第 52 行是 QUERY := ......

请建议我的 PL/SQL 有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:28:35.063

做这样的事情：

```
SQL> create procedure sp_getallinqtydetailforcutting(v_prod_rpt_dtl out prod_rpt_dtl_table)
  2  is
  3  begin
  4    V_PROD_RPT_DTL := PROD_RPT_DTL_TABLE(PROD_RPT_DTL(1, 'a', 1, 'a', 1),
  5                                         PROD_RPT_DTL(2, 'a', 1, 'a', 1),
  6                                         PROD_RPT_DTL(1, 'b', 1, 'a', 1));
  7  end;
  8  /

Procedure created.

SQL> declare
  2      v_prod_rpt_dtl    prod_rpt_dtl_table;
  3      whereclause varchar2(500);
  4      CUR SYS_REFCURSOR;
  5  begin
  6      --calling procedure to return valued in v_PROD_RPT_DTL
  7      sp_GetAllInQtyDetailForCutting(v_PROD_RPT_DTL);
  8      WHEREClause := ' Where division_id=1';
  9      open CUR for 'SELECT PROD_RPT_DTL(DIVISION_ID , DIVISION_NM, '
 10                   || 'DEPT_ID, DEPT_NM, WORK_FLOOR_ID) FROM Table(:b1)'
 11                   || WHEREClause using v_PROD_RPT_DTL;
 12      fetch cur bulk collect into v_PROD_RPT_DTL;
 13      close cur;
 14
 15      for idx in 1..v_PROD_RPT_DTL.count
 16      loop
 17        dbms_output.put_line(v_PROD_RPT_DTL(idx).DIVISION_ID
 18                             || ',' || v_PROD_RPT_DTL(idx).DIVISION_NM);
 19      end loop;
 20  end;
 21  /
1,a
1,b

PL/SQL procedure successfully completed. 
```

# python - 在 Win XP 中使用 Python 编辑组策略

> ID：14460445
> 
> 赞同：2
> 
> 时间：2013-01-22T14:06:59.893
> 
> 标签：python, registry

有什么方法可以更改组策略或使用 Python 编辑它们？

我知道可以编辑注册表，但我对编辑或修改组策略一无所知。我这里有 100 台 PC，必须在其上设置一些策略，例如拒绝访问文件夹选项、拒绝访问控制面板、计算机不是域的一部分。所以我被赋予了修改每台计算机上的策略的任务。

一些自动化的 Python 脚本会为我节​​省大量时间。

> （操作系统：Win XP，Python2.7）

# backbone.js - Backbone.js - 添加参数发送以获取不触发集合

> ID：14460449
> 
> 赞同：-1
> 
> 时间：2013-01-22T14:07:07.633
> 
> 标签：backbone.js

> **可能重复：**
> [Backbone.js - 名称更改时更改未触发](https://stackoverflow.com/questions/14453219/backbone-js-change-not-triggering-while-the-name-change)
> [Backbone - 如何解决此问题……某些部分仍不清楚](https://stackoverflow.com/questions/14457874/backbone-how-get-this-sort-out-some-part-still-not-clear)

在我的主干功能中，我在获取数据的`setTimout`同时继续获取数据，我正在发送属性，`{add:true}`这意味着，我新获得的模型将与现有集合一起添加，当集合添加模型时，它应该触发该`add`方法。

但是我没有在我的收藏中进行后添加过程的触发器。但我正在获取视图过程中的数据，这是不正确的。

我的收藏：

```
list.collect = Backbone.Collection.extend({
  model:list.model,
  url : 'data/names.json',
  initialize:function(){
     this.fetch({success:this.prompter});
     this.on("add", this.addOne, this);//it should get triggered while added the model
  },
  addOne:function(e){
    console.log('addone'); // the method not called
  }
}); 
```

我的观点 ：

```
list.view = Backbone.View.extend({
  initialize:function(){
    this.collection = new list.collect();

    var that = this;
    var updateData = function(){
      that.collection.fetch({add:true}); // i am passing add:true!
      myTimeout = setTimeout(updateData,10000)
    }
    var myTimeout = setTimeout(updateData,10000)

    this.collection.on("reset", this.render, this);

  },
  render:function(data){
    _.each(this.collection.models, function(data){
      //console.log(data.get('name'));
    })
  }
}); 
```

请对这个问题有任何想法吗？

# java - 如何保护 Web 服务位置？

> ID：14460451
> 
> 赞同：0
> 
> 时间：2013-01-22T14:07:19.760
> 
> 标签：java, web-services, security, authentication, jax-ws

我有一个使用 SSL EV 证书保护的 Web 服务。可以说它位于： `https://webservice.justawebservice.com/webservice/`。用户可以向该网络服务发送消息。

当恶意人员获得此 URL 时，该人可以显示 WSDL 并通过网络访问服务位置。但最重要的是，他将能够发送消息。Web 服务上有某种身份验证，但仅在发送消息时发生（消息包含用户名和密码）。恶意的人将能够用大量消息淹没所述网络服务，这可能导致其离线。

我想保护这个区域，所以当所说的人访问链接时，他会被要求进行某种身份验证。

做这个的最好方式是什么？（如果它是可能的）

任何帮助是极大的赞赏，

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:34:46.870

如果您的目标是防止 DOS 类型的攻击“请求泛滥”，那么身份验证不是一种正确的方法，因为即使经过适当身份验证的客户端也可能由于不了解如何使用 API 或他的代码中的错误等而导致泛滥。

恕我直言，正确的方法是在您的代码中开发某种“断路器”模式（可能是 WS 拦截器），该模式将查看来自特定用户或来自 IP 地址或以上全部或全部的请求数量通过将错误返回给调用者来执行快捷调用，因此不会消耗系统上的大量资源。

这将是一个很好的第一步，但不能完全保证免受 DOS 攻击（因为您的服务仍会消耗资源来接受请求并解释它）。下一步将尝试在可能的最低级别阻止此类客户端 - 例如在仅丢弃 TCP 数据包的防火墙上 - 很少有防火墙包可以简化此任务 - 例如带有 ddos​​ deflate 的 AFP 等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:26:03.343

一个单独的人/用户不会是问题，但可以创建一个机器人，淹没您的服务。

选项：

*   在防火墙级别，请[远离](http://www.cyberciti.biz/tips/linux-iptables-10-how-to-block-common-attack.html)泛滥的包。
*   将客户端身份验证与[客户端证书](http://www.maximporges.com/2009/11/18/configuring-tomcat-ssl-clientserver-authentication/)一起使用。大多数机器人在需要客户认证时放弃。

# performance - 带有相关子查询的 While 循环的 SQL Server 性能调整

> ID：14460453
> 
> 赞同：1
> 
> 时间：2013-01-22T14:07:22.313
> 
> 标签：performance, tsql, insert, correlated-subquery, query-tuning

在我的项目中，我遇到了以下 T-SQL 代码的挑战。

1.  step1 使用父模块及其订阅用户填充 UserModules 表
2.  step2 在 Modules_Hierarchy 表中检查与 step1 中的模块关联的子模块，并通过将子模块与父模块订阅的用户映射来将有效记录插入到 UserModules 表中。此步骤将递归重复，直到找到所有子模块。

**问题：**

在第 2 步中，WHILE 循环和 SELECT 语句使用相关子查询，并且表 UserModules 是 INSERT 和相关 SELECT 子句的一部分，这会妨碍性能，并且查询经常会因以下 LOCK 升级问题而失败。

ModulesUsers 表中的最终数据大小为 4200 万，预计还会增长。

**错误消息：** “SQL Server 数据库引擎的实例此时无法获取 LOCK 资源。当活动用户较少时重新运行您的语句。请数据库管理员检查此实例的锁和内存配置，或检查长时间运行的事务。”</p>

如何优化此查询，即第 2 步以解决问题？

**第1步：**

```
INSERT INTO UserModules(ModuleID, UserID)
  SELECT ModuleID, UserID
  FROM TABLEA a
  INNER JOIN TABLEB b ON a.ID = b.ID 
```

**第2步：**

```
DECLARE @cnt int
SET @cnt = 1

WHILE( @cnt > 0 )      
BEGIN      

  SET @cnt = (SELECT COUNT(DISTINCT s.moduleid)
              FROM Modules_Hirarchy s WITH (nolock), Modules t      
              WHERE s.ParentModuleId = t.ModuleId      
              ------------      
                AND NOT EXISTS       
                 (SELECT ModuleId + EndUserId 
                  FROM UserModules  r      
                  WHERE s.moduleid = r.moduleid 
                    AND t.EndUserId = r.EndUserId)
                AND s.moduleid + t.EndUserId NOT IN 
                  (SELECT CAST(ModuleId AS varchar) + EndUserId 
                   FROM UserModules ))      

  IF @cnt = 0      
    BREAK      

  INSERT INTO UserModules (ModuleId, EndUserId)      
    SELECT DISTINCT s.moduleid, t.EndUserId       
    FROM Modules_Hirarchy s WITH (nolock), UserModules  t      
    WHERE s.ParentModuleId = t.ModuleId      
      AND NOT EXISTS       
       (SELECT ModuleId + EndUserId 
        FROM UserModules  r      
        WHERE s.moduleid = r.moduleid 
          AND t.EndUserId = r.EndUserId)

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:18:17.470

一些数据可以玩

```
create table #UserModules(ModuleID int, UserID int)

create table #Modules_Hirarchy(ParentModuleID int, ChildModuleID int)

insert into #UserModules (ModuleID , UserID)
values(1,1)
,(2,1)
,(3,1)
,(4,1)
,(5,1)
,(6,2)
,(7,2)

insert into #Modules_Hirarchy(ParentModuleID , ChildModuleID )
values (null,1)
,(1,2)
,(2,3)
,(3,4)
,(3,5)
,(null,6)
,(6,7) 
```

解析度

```
with cts(ModuleID, UserID,parentModule ) as 
(
select a.ModuleID, a.UserID , CAST(null as int)as parentModule --, cAST(null as int)as b
from #UserModules a join #Modules_Hirarchy  b on a.ModuleID = b.ChildModuleID 
where b.ParentModuleID is null

union all

select b.ChildModuleID as ModuleID, a.UserID, b.ParentModuleID
from cts a join #Modules_Hirarchy b 
on a.ModuleID = b.ParentModuleID

)
select *
into #RESULT
from cts 
```

编辑它很难说 :) 到许多变量，但你应该做的事情是使查询高效

1.  列上的单独非聚集索引`ModuleID ParentModuleID ChildModuleID`

2.  您可能不想查询所有组，而只想查询显式组，在锚语句中过滤掉尽可能多的组

    选择 a.ModuleID, a.UserID , CAST(null as int) as parentModule from #UserModules a join #Module_Hirarchy b on a.ModuleID = b.ChildModuleID 其中 b.ParentModuleID 为 null 且 a.ModuleId in (listOfModules)

3.  为列添加唯一索引`(ParentModuleID, ChildModuleID)`作为非唯一行可能会导致大量行重复

除了它依赖于 ParentModuleID ChildModuleID 上的数据选择性，但你对此无能为力

我认为它适用于大数据集，因为谓词很简单并且只要数据选择性很高

# c++ - 这些锁定的内存访问是否等效？

> ID：14460454
> 
> 赞同：2
> 
> 时间：2013-01-22T14:07:29.070
> 
> 标签：c++, multithreading, x86, atomic

```
void f1(volatile int* ptr, int value)
{
    *ptr = value;
    lock or DWORD PTR [rsp], 0; // MemoryBarrier()
}

void f2(volatile int* ptr, int value)
{
    xchg DWORD PTR [ptr], value; // InterlockedExchange(ptr, value);
} 
```

语义上等价。显然`xchg`无论是否`lock`指定前缀都被锁定。

编辑：我目前正在使用 VS2010，但可能会移植到 VS2012，我相信编译器语义`volatile`已经再次改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:16:23.707

大致是的。第`lock or`一种情况确保在任何其他 CPU 可以读取更多内存之前数据已更新，在第二种情况下，`xchg`指令具有隐式锁定，因此所有其他处理器（内核）将不得不“释放”它们的值*ptr 在你的处理器可以更新值之前。

# database - HTML5 中的数据库保存在哪里？

> ID：14460457
> 
> 赞同：0
> 
> 时间：2013-01-22T14:07:43.633
> 
> 标签：database, html

我是 HTML5 的新手。我使用一些教程在 HTML5 中创建了一个数据库。但我无法理解数据库的保存位置。请帮我。

```
$(document).ready(function() {
  $("#button1").click(function() {
    var db = openDatabase("databasename", "1.0", "databasedes", 200000);
    alert("database has been created ");
    db.transaction(function (tx) {
      tx.executeSql('CREATE TABLE IF NOT EXISTS foo (id unique, text)');
      tx.executeSql('INSERT INTO foo (id, text) VALUES (1, "foobar1")');
    });
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:15:01.133

您可以通过例如 Chrome 调试器（选项卡资源 -> Web SQL）检查我们的数据库，但浏览器有特殊的模型来保存这些数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:20:43.277

### 有两种类型的存储。

**LocalStorage 和 SessionStorage**

HTML5 Web Storage 定义了两种 key-value 存储类型：sessionStorage 和 localStorage。主要的行为差异是价值观持续多长时间以及它们如何共享。下表显示了两种存储类型之间的差异。

![](../Images/4a26bdbe7271d53054d134705b9547ef.png)

查看[开发人员指南 - 客户端存储（Web 存储）](https://developers.google.com/web-toolkit/doc/latest/DevGuideHtml5Storage)了解更多信息。

# php - UPDATE MySQL 有时只能工作。不是每次

> ID：14460460
> 
> 赞同：0
> 
> 时间：2013-01-22T14:07:52.177
> 
> 标签：php, mysql, forms

我正在制作一个非常简单的网站，它将显示在办公室的电视上。index.php 页面是一个表单，它具有三个字段。表单方法是 post 并且所有内容都是正确的。

然后我在下一页上有这段代码，提交后表单指向的那个。

```
 mysql_select_db("figs", $con);

mysql_query("UPDATE stats SET slots_sold=$_POST[slots_sold], total_figure=$_POST[total_figure], apps_sat=$_POST[apps_sat]");

mysql_close($con);
?> 
```

问题是该表有时会更新，而有时则不是，有人知道为什么吗？这真的很简单，我认为它只是一种魅力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:38:45.647

您没有验证任何传递的数据。此外，我建议将 MySQLi 用于准备好的语句，以使事情更安全一些。

```
// create a new MySQLi object
$mysqli = new mysqli('host', 'user', 'password', 'database');

// create var for each POST array item you need
$slots_sold   = $_POST['slots_sold'];
$total_figure = $_POST['total_figure'];
$apps_sat     = $_POST['apps_sat'];

//check to make sure each field is set
if(isset($slots_sold) && isset($total_figure) && isset($apps_sat))
{    
     // prepare mysqli statement for your data
     if($stmt->prepare("UPDATE stats SET `slots_sold` = ?, `total_figure` = ?, `apps_sat` = ?"))
     {  
         // bind each variable to query, respectively (? is place holder for var)
         // s = string ('sss' means three strings). i = integer if needed
         $stmt->bind_param('sss', $slots_sold, $total_figure, $apps_sat);
         $stmt->execute(); // execute your query
     }
     else
     {
         $stmt->error; // there was an error with the query, show the error
     }
}
else
{
     echo 'You did not fill out all of the fields.';
}

$stmt->close; // close mysqli connection 
```

希望这会对您有所帮助。根据您传递的数据，我会使用 preg_match 来检查每个数据。这里有一些非常简单的正则表达式可以帮助您入门：

```
/[a-zA-Z ]+/     (Any letter, lowercase or uppercase including spaces atleast once)
/[a-zA-Z]+/      (Same as above, without spaces atleast once)
/[a-zA-Z0-9]+/   (Any letter, lowercase or uppercase including numbers atleast once)
/[0-9]+/         (Any number atleast once)

preg_match('/[a-zA-Z]+/', $str, $matches); // you can throw this in a for loop to check each var if they all require the same pattern 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:21:29.500

试试这个：

```
$sold  = $_POST['slots_sold'];
$total = $_POST['total_figure'];
$app   = $_POST['apps_sat'];

mysql_query("UPDATE stats SET slots_sold='$sold', total_figure='$total', apps_sat='$app'"); 
```

我也建议看看[mysql PDO](http://php.net/manual/en/ref.pdo-mysql.php)

# jquery - jquery ajax 成功数据访问嵌入对象

> ID：14460465
> 
> 赞同：0
> 
> 时间：2013-01-22T14:08:08.467
> 
> 标签：jquery, ajax, callback

```
{ "id": "36", "title": "Dr","firstname": "Ian", "lastname": "Fletcher", "permissions": { "permissionlist": [{ "title": "Images", "accessid": "152"},{ "title": "Documents", "accessid": ""}] } } 
```

我有一个带有上述数据的 ajax 回调，需要一些帮助来获取一些数据。

我已经设法从回调数据中获取数据，例如 id、title firstname、lastname，但我正在努力获取权限。

```
success: function(data) {

                    jQuery.each(data, function(index, itemData) {
                        $('#<%=txtTitle.ClientID %>').val(itemData.title);
                        $('#<%=txtFirstName.ClientID %>').val(itemData.firstname);
                        $('#<%=txtSurname.ClientID %>').val(itemData.lastname);

                        jQuery.each(itemData.permissions, function(index, permissionData) {
                            alert(permissionData.title);
                        });
                    });
                } 
```

我试图使用每个函数使用权限作为列表，但警报总是显示未定义。我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:13:47.693

`itemData.permissions`是一个对象，而不是一个数组。数组在属性中`permissionlist`。

```
jQuery.each(itemData.permissions.permissionlist, function(index, permissionData) {
                            alert(permissionData.title);
                        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T14:14:14.007

您正在迭代错误的属性，在权限内部您仍然有一个权限列表：

```
jQuery.each(itemData.permissions.permissionList, function(index, permissionData) {
  alert(permissionData.title);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T14:17:47.440

`permissions`是一个对象，其`permissionList`元素包含对象数组。您不是在遍历数组，而是遍历`permissionlist`对象本身。采用：

```
jQuery.each(itemData.permissions.permissionlist) 
```

您也可以使用`permissionData[0].title`，但这只会获得第*一个*标题。

我已经看到这样的问题被问了足够多的时间来创建这个：[https ://github.com/ajcrites/json-visualize/](https://github.com/ajcrites/json-visualize/)

你可以在这里看到它用于这个问题：http: [//jsfiddle.net/4cb2b/](http://jsfiddle.net/4cb2b/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T14:23:59.557

`data`是从 ajax 调用返回的对象。循环遍历每个级别的属性，您将看到结构

```
function success(data) {
    // data
    jQuery.each(data, function (index, itemData) {
        alert('index=' + index + ', itemData=' + itemData);
    });
    // data.permissions
    jQuery.each(data.permissions, function (index, itemData) {
        alert('index=' + index + ', itemData=' + itemData);
    });
    // data.permissions.permissionlist
    jQuery.each(data.permissions.permissionlist, function (index, itemData) {
        alert('index=' + index + ', itemData=' + itemData);
    });
    // ...
}

success(data); 
```

用于测试的[JSFiddle](http://jsfiddle.net/m5DPZ/)

# java - 在 Eclipse 中获取调试选择

> ID：14460468
> 
> 赞同：0
> 
> 时间：2013-01-22T14:08:17.927
> 
> 标签：java, eclipse, debugging, listener, selection

我的插件中有一个 Eclipse 产品。在本产品中，您可以创建 Java Source 并正常调试它。

**我的问题是**：如何检索调试选择？也许我必须添加一个选择监听器？在哪里？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:28:16.853

`LaunchViewCopyToClipboardActionDelegate`从`org.eclipse.debug.ui`插件看一下。

# html - 无法在 Outlook 中正确显示 html 电子邮件签名

> ID：14460470
> 
> 赞同：5
> 
> 时间：2013-01-22T14:08:31.507
> 
> 标签：html, css, outlook-2010, email-client, signatures

我在 html 中为自己创建了一个简单的电子邮件签名，他是代码：

```
<html>

<!-- Company logo goes here -->
<div id="far_left" 
    style="width: 50px; 
           height: 50px;
           float: left;
           margin-right: 10px;">
    <img src="logo.png" />
</div>

<!-- Name and occupation goes here -->
<div id="top" 
    style="height: 25px;">
    <span style="font-family: Arial, Verdana, 'Sans Serif'; font-size: 22; color: #464646;"><strong>Dean Grobler</strong>, Programmer</span>
</div>

<!-- Website link and email adress goes here -->
<div id="bottom" 
    style="font-family: Arial, Verdana, 'Sans Serif';
           font-size: 14px;
           color: #464646;
           padding: 5px;
           height: 25px;">
    <a href="http://www.deangrobler.com" style="text-decoration: none; color: #84d5f6">www.deangrobler.com</a> | 
    <a href="mailto:dean@deangrobler.com" style="text-decoration: none; color: #84d5f6">dean@deangrobler.com</a> 
</div> 
```

在雷鸟和我的浏览器中，它正确显示：

![在此处输入图像描述](../Images/a97a4fba8173ffcd2af69741055879ad.png)

但可惜在 Outlook 2010 中它没有：

![在此处输入图像描述](../Images/c7b718ef35086406faa9a7d24882e2fd.png)

如果它使用与 IE 相同的渲染引擎，我敢打赌它确实如此，我不会太惊讶这种情况的发生。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T14:16:30.577

电子邮件客户端不会像浏览器那样呈现 html。创建 html 电子邮件时，最好使用表格。我知道这与所有现代网页设计背道而驰，但它们得到了更多电子邮件客户端的支持。这是指向 css 属性以及它们受哪些客户端支持的链接。

[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

# jquery - 如何更改 jQuery-tags-input 插件中分号的行为？

> ID：14460474
> 
> 赞同：3
> 
> 时间：2013-01-22T14:08:50.560
> 
> 标签：jquery, jquery-plugins, jquery-tags-input

我正在使用 jQuery-Tags-Input 插件：[Github page](https://github.com/xoxco/jQuery-Tags-Input) / [Demo](http://xoxco.com/projects/code/tagsinput/)。

您可以在演示中注意到，当您按`enter` **以及`,`**时，会提交当前标签。当您按 时，我也希望如此`;`。默认情况下，当您按下 时`;`，它被视为标签的一部分。

我在选项中找不到这个。除了直接调整代码还有其他方法吗？有人已经做过了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:23:18.437

这是*分隔符*参数，但看起来您只能传递一个字符，而不是数组。

你总是可以把它硬编码到第 294 行。改变这个：

```
if (event.which==event.data.delimiter.charCodeAt(0) || event.which==13 ) 
```

对此：

```
if (event.which==event.data.delimiter.charCodeAt(0) || event.which==59 || event.which==13 ) 
```

工作演示：http: [//jsfiddle.net/kbwqr/](http://jsfiddle.net/kbwqr/)

# python - 如何使用 `slice` 对象来读取 pytables.CArray？

> ID：14460483
> 
> 赞同：1
> 
> 时间：2013-01-22T14:09:20.220
> 
> 标签：python, numpy, slice, pytables

如何使用`slice`对象来访问`tables.CArray`? 我目前拥有的是

```
In:  coord_slice
Out: [slice(0, 31, None), slice(0, 5760, None), slice(0, 2880, None)]

In:  _ds
Out:  /data/mydata (CArray(31, 5760, 2880), shuffle, blosc(5)) ''
      atom := Float32Atom(shape=(), dflt=0.0)
      maindim := 0
      flavor  := 'numpy'
      byteorder := 'little'
      chunkshape := (1, 45, 2880)

In: _ds[coord_slice]
Out: *** TypeError: long() argument must be a string or a number, not 'slice' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:55:06.300

以下是`tables.CArray`. 如果`coord_slice`是 a`tuple`而不是 a `list`，您的代码应该可以工作。 [这是 Github 上的一个已关闭问题，其中提供了一些关于为什么列表和元组不能互换使用的线索](https://github.com/PyTables/PyTables/issues/125)。

```
import tables
import numpy

fileName = 'carray1.h5'
shape = (200, 300)
atom = tables.UInt8Atom()
filters = tables.Filters(complevel=5, complib='zlib')

h5f = tables.openFile(fileName, 'w')
ca = h5f.createCArray(h5f.root, 'carray', atom, shape, filters=filters)

coord_slice = [slice(10,60,None),slice(20,70,None)]

# attempt to do multi-dimensional indexing with coord_slice as a list
try:
    ca[coord_slice] = numpy.ones((50, 50))
except TypeError:
    print 'TypeError was thrown with list'

# convert coord_slice to a tuple and try again.  This should work.
coord_slice = tuple(coord_slice)
try:
    ca[coord_slice] = numpy.ones((50, 50))
except TypeError:
    print 'TypeError was thrown with tuple'

print ca[coord_slice]
h5f.close() 
```

# clojure - 一个文本区域中的不同颜色/字体

> ID：14460486
> 
> 赞同：3
> 
> 时间：2013-01-22T14:09:30.033
> 
> 标签：clojure, seesaw

我可以在一个文本区域中使用不同的前景色吗？不同的字体？

我想添加类似“hh：mm：ss Nickname：message”的内容，时间为灰色，名称 - 蓝色，消息 - 黑色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:14:02.287

我在评论中犯了一个错误：你想要的是 JTextPane，而不是 JTextArea。

原来跷跷板支持JTextPane。请参阅`(seesaw.core/styled-text)`，它创建了`JTextPane`s，`(seesaw.core/style-text!)`并将不同的样式应用于窗格内的文本。
它们的用法似乎很简单：首先`id -> style`在窗格构建期间定义映射，然后`id`在为文本的某些部分分配样式时使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:20:04.930

Textarea 是一个标准的 HTML 元素，它不能采用更多样式。实现此目的的一种方法是使用 iFrame 并对 iFrame 内的内容进行样式设置。没有 iFrame 的其他方法是选择支持此功能的编辑器。一种这样的编辑器是用于 stackoverflow 的 WMD。大规模杀伤性武器文件在[这里](https://github.com/derobins/wmd)

# c# - 使用 Console.Beep .Net 播放语音单词的声音

> ID：14460487
> 
> 赞同：2
> 
> 时间：2013-01-22T14:09:32.303
> 
> 标签：c#, console, voice, beep

我使用 VS 2010、.Net 3.5、Win7 64 位。

我可以将 Console.Beep 用于“模拟”人类声音（语音），也许会产生合成语音吗？

例如，使用 Beep 来“模拟”单词“Error”的发音？有任何关于它的样本吗？

另一个示例使用 Console.Beep 播放音乐和弦和音符。

有什么方法可以让 Console.Beep 播放任何听起来更像和弦或音符的东西（语音、单词错误）？

**我只想使用 Console.Beep。**（如果可能的话，也许）模拟，而不是真实的声音。我不介意它听起来像 R2D2。

Beep
[如何在 C# 中使计算机发出哔声？](https://stackoverflow.com/questions/321135/how-can-i-make-the-computer-beep-in-c)

演奏和弦，音符
[http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvb/thread/6620fd81-974a-40d1-8599-66d6c7c7d22d/](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvb/thread/6620fd81-974a-40d1-8599-66d6c7c7d22d/)

[http://oguzkoroglu.net/post/2011/01/16/ConsoleBeep().aspx](http://oguzkoroglu.net/post/2011/01/16/ConsoleBeep().aspx)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T14:12:13.247

不，这是不可能的

您可以在`System.Speech.Synthesis Namespace`

```
using System;
using System.Speech.Synthesis;

namespace SampleSynthesis
{
  class Program
  {
    static void Main(string[] args)
    {

      // Initialize a new instance of the SpeechSynthesizer.
      SpeechSynthesizer synth = new SpeechSynthesizer();

      // Configure the audio output. 
      synth.SetOutputToDefaultAudioDevice();

      // Speak a string.
      synth.Speak("This example demonstrates a basic use of Speech Synthesizer");

      Console.WriteLine();
      Console.WriteLine("Press any key to exit...");
      Console.ReadKey();
    }
  }
} 
```

*SpeechSynthesizer 类提供对安装在主机上的语音合成引擎功能的访问。已安装的语音合成引擎由语音表示，例如 Microsoft Anna。*

[http://msdn.microsoft.com/en-us/library/system.speech.synthesis.speechsynthesizer.aspx](http://msdn.microsoft.com/en-us/library/system.speech.synthesis.speechsynthesizer.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T20:55:36.433

嘿那里=）我也在考虑这个，所以我在网上搜索但找不到任何东西。我自己做了一点工作并想出了这个=）。它工作得很好！

我在“公共部分类 Form1：Form”中创建了 1 个随机数（int）生成器，因此它将加载 @start。

代码 ：

> ```
>  private Random randomgen = new Random(); 
> ```

下面我为 8 种不同的声音制作了整数，为不同的速度制作了 8 个整数。

下面代码中的“beepgen1”直到“8”是声音的频率 37-7000 赫兹有关“Console.Beep(FREQUENCY, MILISEC)”的更多信息，请参见此[链接](https://msdn.microsoft.com/en-us/library/4fe3hdb1%28v=vs.110%29.aspx)

> 示例 将此代码放在一个按钮下，您的电脑将发出 1000 赫兹和 100 米秒长的哔声。
> 
> “Console.Beep(1000, 100)”

```
 int beepgen1, beepgen2, beepgen3, beepgen4, beepgen5, beepgen6, beepgen7, beepgen8, beepgenn1, beepgenn2, beepgenn3, beepgenn4, beepgenn5, beepgenn6, beepgenn7, beepgenn8;

            beepgen1 = (randomgen.Next(37, 7000));
            beepgen2 = (randomgen.Next(37, 6000));
            beepgen3 = (randomgen.Next(37, 6000));
            beepgen4 = (randomgen.Next(37, 7000));
            beepgen5 = (randomgen.Next(37, 8000));
            beepgen6 = (randomgen.Next(37, 7000));
            beepgen7 = (randomgen.Next(37, 7000));
            beepgen8 = (randomgen.Next(37, 5000));
            beepgenn1 = (randomgen.Next(50, 200));
            beepgenn2 = (randomgen.Next(50, 250));
            beepgenn3 = (randomgen.Next(50, 300));
            beepgenn4 = (randomgen.Next(50, 200));
            beepgenn5 = (randomgen.Next(50, 250));
            beepgenn6 = (randomgen.Next(50, 200));
            beepgenn7 = (randomgen.Next(50, 300));
            beepgenn8 = (randomgen.Next(50, 250));

            Console.Beep(beepgen1, beepgenn1);
            Console.Beep(beepgen2, beepgenn2);
            Console.Beep(beepgen3, beepgenn3);
            Console.Beep(beepgen4, beepgenn4);
            Console.Beep(beepgen5, beepgenn5);
            Console.Beep(beepgen6, beepgenn6);
            Console.Beep(beepgen7, beepgenn7);
            Console.Beep(beepgen8, beepgenn8); 
```

# node.js - 如何使用 Express 在 Node 中安全上传文件？

> ID：14460489
> 
> 赞同：6
> 
> 时间：2013-01-22T14:09:37.330
> 
> 标签：node.js, file-upload, express, formidable

有很多关于 node 文件上传的文章、教程和问题，但它们大多是为初学者准备的，没有一个完全解释了如何保护生产环境中的文件上传。我一直在努力寻找如何做到这一点的完整答案，但没有成功。

下面是对我的发现的解释。

1.  限制上传文件大小：

    ```
    app.use(express.limit('4mb')); 
    ```

2.  将文件上传限制为仅某些路线：我无法使其实际工作，但这是我尝试过的：

    代替：

    ```
    app.use(express.bodyParser()); 
    ```

    和

    ```
    app.use(express.json());
    app.use(express.urlencoded()); 
    ```

    并将多部分中间件添加到每个上传路由：

    ```
    app.post('/upload', express.multipart(), uploadController.uploadPhoto); 
    ```

    这部分不起作用，但如果我离开，上传工作正常`express.bodyParser()`。那么我做错了什么？

3.  在将上传保存到磁盘之前检查上传的文件类型：

    我无法弄清楚这部分，但一个建议是编写一个自定义中间件，该中间件使用强大的解析文件上传并尝试在保存文件之前调整文件大小（假设它是一个图像），使用像图像魔术这样的库。建议是这样可以使图像安全并确保它实际上是图像（因为如果不是图像，该过程将失败）。

    但这仅适用于图像，因此它不是一个完整的解决方案。

    我该如何实施？任何示例代码？

为了确保上传安全，我还有什么遗漏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:12:24.517

方法 2 确实有效。我遇到的问题是

```
app.use(passport.session()); 
```

正在阻止它工作。因此，如果您**`passport.js`**用于身份验证，这可能是问题所在。如果您使用这种方法，请确保在实际路线上添加安全性。

* * *

我最终使用了这个插件

> [https://github.com/tih-ra/alleup](https://github.com/tih-ra/alleup)

它非常适合图像上传，并自动将文件调整为多个版本并将它们上传到亚马逊 s3。使用此插件将与使用方法 3 内联，但`tmp`文件先上传到文件夹，然后再删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T14:35:42.383

我正在使用[多方](https://github.com/superjoe30/node-multiparty)上传（和流式传输）文件。

`var form = new multiparty.Form();`

到 1：

```
form.on('progress', function (bytesReceived) {
  if (262144000 < bytesReceived) {
   abortConnection('filesizeexeeded');
  }
}); 
```

实现自己的中止连接功能；例如：

```
function abortConnection(reason) {
  res.writeHead(413, { 'Connection': 'close' });
  return res.end(reason);
} 
```

警告：浏览器很可能会重试上传（最多 4 次）。我正在使用 websocket 连接来取消客户端的上传。

To 2：（使用多方）

To 3：我创建了一个[要点](https://gist.github.com/chmanie/8520572)，展示了如何使用[mmmagic](https://github.com/mscdex/mmmagic)即时检查 mime 类型。

如果您将护照与多方结合使用，您可能会发现这很有用：

[https://github.com/jaredhanson/passport/pull/106#issuecomment-14188999](https://github.com/jaredhanson/passport/pull/106#issuecomment-14188999)

# sql - VBA：RecordSet 值被 MoveNext 覆盖

> ID：14460491
> 
> 赞同：0
> 
> 时间：2013-01-22T14:09:43.977
> 
> 标签：sql, vba, iteration, recordset

在使用 VBA 和 DAO.Recordset 时，我遇到了一个奇怪的问题。我目前正在遍历记录集并将每次迭代的相应字段保存在数组中。但是每次由于while循环调用“.MoveNext”时，存储在“rs.Fields.Field(i).Value”中的信息都会被覆盖，因此这些字段不可用。我在调试过程中发现了这一点。

一些相关代码：

```
如果不是 rs 什么都不是，那么
      如果 rs.RecordCount > 0 那么
        带rs
            虽然不是 .EOF
                ReDim Preserve fieldSet(0 To i + 1) As DAO.Fields
                设置 fieldSet(i) = rs.Fields
                i = i + 1 ' 此时值仍然完好无损
                .MoveNext ' 这里的值字段中仅存储“无当前记录”
            文德
        结束于
      万一

```

希望有人知道是什么原因造成的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:26:44.737

尝试在每条记录中为字段/列计数运行另一个循环：

```
Do While Not rs.EOF
   For j = 0 to rs.Fields.Count
     Set fieldSet(j) = rs.Fields.Field(j).Value 
     '-- do stuff
   Next j
   rs.MoveNext
Loop 
```

# javascript - Javascript 错误：应为 ')'

> ID：14460493
> 
> 赞同：0
> 
> 时间：2013-01-22T14:09:54.313
> 
> 标签：javascript

收到此错误：

在这一行：`totalFundedLabel.push( "label": "Funded");`

JS：

```
var totalFunded =  '${totalFunded}';
var totalUnfunded =  '${totalUnfunded}';

var totalFundedValue = [];
var totalFundedLabel = [];
var totalFundedText = [];

var unFundedValue = [];
var unFundedLabel = [];
var unFundedText = [];

if (totalFunded != null)  
{
totalFundedLabel.push( "label": "Funded");
totalFundedValue.push( "value": <tld-msst:fc-value var="${totalFunded}"/>);
totalFundedText.push( "toolText": "<fmt:formatNumber value='${totalFunded}' type='currency' groupingUsed='true' />");
}

if (totalUnfunded != null)  
{
unFundedLabel.push( "label": "unFunded");
unFundedValue.push( "value": <tld-msst:fc-value var="${totalUnfunded}"/>);
unFundedText.push( "toolText": "<fmt:formatNumber value='${totalUnfunded}' type='currency' groupingUsed='true' />");
 } 
```

渲染的 HTML：

```
var totalFunded =  '109321734.06';
var totalUnfunded =  '381234572.79';

var totalFundedValue = [];
var totalFundedLabel = [];
var totalFundedText = [];

var unFundedValue = [];
var unFundedLabel = [];
var unFundedText = [];

if (totalFunded != null)  
{
totalFundedLabel.push( "label": "Funded");
totalFundedValue.push( "value": "109321734.06");
totalFundedText.push( "toolText": "$109,321,734.06");
}

if (totalUnfunded != null)  
{
unFundedLabel.push( "label": "unFunded");
unFundedValue.push( "value": "381234572.79");
unFundedText.push( "toolText": "$381,234,572.79");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T14:10:36.740

这是一个语法错误，因为它确实如此。你可能想要：

```
unFundedLabel.push({ label: "unFunded"}); 
```

花括号创建了一个对象，该对象具有称为“标签”的属性。如果属性名称看起来像标识符（通常），则不需要在属性名称上加上引号。看起来你所有的`.push()`电话都以同样的方式中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:14:05.213

您在所有推送语句中都缺少大括号`{`&`}`

```
if (totalFunded != null)  
{
totalFundedLabel.push( {"label": "Funded"});
totalFundedValue.push( {"value": <tld-msst:fc-value var="${totalFunded}"/>});
totalFundedText.push( {"toolText": "<fmt:formatNumber value='${totalFunded}' type='currency' groupingUsed='true' />"});
}

if (totalUnfunded != null)  
{
unFundedLabel.push( {"label": "unFunded"});
unFundedValue.push( {"value": <tld-msst:fc-value var="${totalUnfunded}"/>});
unFundedText.push( {"toolText": "<fmt:formatNumber value='${totalUnfunded}' type='currency' groupingUsed='true' />"});
 } 
```

# javascript - 从 XSLT 调用函数错误：命名空间不包含任何函数

> ID：14460500
> 
> 赞同：1
> 
> 时间：2013-01-22T14:10:09.533
> 
> 标签：javascript, xml, xslt, vbscript

我想调用 vbscript 函数：

```
 VBCustomScript 
```

在 xslt 文件中，但我收到以下错误：

```
 Error (0x80004005): Namespace 'extra-functions' does not contain any functions. 
```

请帮忙？

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:x="http://www.w3.org/1999/XSL/Transform-alternate" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns:lsd="http://www.lodestar.com"
    xmlns:i="urn:ls-i18n-formatter"
    exclude-result-prefixes="xsl xsd lsd">

<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
<xsl:namespace-alias stylesheet-prefix="x" result-prefix="xsl"/>
<xsl:param name="Exclude">UIDACCOUNT</xsl:param>
<xsl:param name="Include">UIDACCOUNT</xsl:param>
<xsl:variable name="DateSep" select="i:GetLocaleData(29)" />
<xsl:param name="RslvPrefix">RSLV_</xsl:param>
<xsl:param name="RslvSuffix">.RSLV</xsl:param>
<xsl:template match="xsd:element">
    <x:stylesheet version="1.0"
    xmlns:i="urn:ls-i18n-formatter"
    xmlns:ms="urn:schemas-microsoft-com:xslt"
    xmlns:user="http://www.lodestarcorp.com/user"
    xmlns:extra="urn:extra-functions"
    xmlns:msxml="urn:schemas-microsoft-com:xslt"
    exclude-result-prefixes="i ms user extra msxml"
    > 

<x:output method="html" version="1.0" encoding="UTF-8" indent="yes"/>

<ms:script language="JScript" implements-prefix="user">
    function MonthYear(val, sep) {
        var mon= "00" + (val &amp; 0x000f);
        return !val ? "" : ("" + mon.substr(mon.length - 2) + sep + ((val &amp; 0xffff) &gt;&gt; 4));
    }
</ms:script>
<msxsl:script xmlns:msxsl="urn:schemas-microsoft-com:xslt"
language="VBScript" implements-prefix="extra">
    function VBCustomScript(str)
        VBCustomScript= "test"
    end function 
</msxsl:script>
<x:template match="ENTITIES">
    <xsl:variable name="LookupSecondary" select="xsd:keyref/xsd:field[position() &gt; 1]/@xpath"/>
    <xsl:variable name="Fields" 
        select="xsd:complexType/xsd:attribute[not(contains($Exclude, @name) or @lsd:ISUID='Y' or @name= 'COLLECTIONHISTNUM' or @name='LSUSER' or @name='LSTIME' or @type = 'BLOB' or @type = 'Bit' or @name = $LookupSecondary)]"/>

    <table class="Stripy" cellpadding="2" cellspacing="0" border="0">
        <thead><tr>
            <th onclick='event.cancelBubble=true'>&#160;</th>
            <xsl:if test="@name[.='METERHISTORY']">
                <th>&#160;</th>
            </xsl:if>
            <xsl:for-each select="$Fields">
                <xsl:sort select="@lsd:COLUMNNUMBER" data-type="number" />
                <th nowrap="" onclick="">
                    <xsl:if test="@type != 'XML_DOCUMENT'">
                        <xsl:attribute name="onclick">NavSort('<xsl:value-of select="@name"/>')</xsl:attribute>
                    </xsl:if>
                    <xsl:variable name="Lookup" select="../../xsd:keyref[xsd:field/@xpath=current()/@name]"/>
                    <xsl:variable name="LookupTable" select="//xsd:element[xsd:key/@name=$Lookup/@refer]"/>

                    <xsl:choose>
                          <xsl:when test="$Lookup">
                            <xsl:value-of select="i:FM(concat('tables/',$LookupTable/@name, '/ref/', ../../@name, '/', @name))"/>
                          </xsl:when>
                          <xsl:when test="@name='URL_CONVERTITORE'">
                            Foto Co
                          </xsl:when>
                          <xsl:when test="@name='URL_MISURATORE'">
                            Foto Mi
                          </xsl:when>
                          <xsl:otherwise>
                            <xsl:value-of select="i:FM(concat('tables/', ../../@name, '/fld/', @name))"/>
                          </xsl:otherwise>
                    </xsl:choose>
                </th>
            </xsl:for-each>
            <th nowrap="" onclick="">
            CAMPO DI PROVA
            </th>
        </tr></thead>
        <tbody>
            <xsl:variable name="Params" select="xsd:complexType/xsd:attribute[@lsd:ISUID='Y' or (@lsd:ISIDENTITY='Y' and not(../xsd:attribute[@lsd:ISUID='Y']))]"/>
            <x:for-each select="*">
                <tr class="r{{position() mod 2}}" onclick="event.cancelBubble=true;" id="r{{position()}}">
                    <td>
                    <a>
                        <xsl:attribute name="href">javascript:Edit('<xsl:for-each select="$Params">
                                <xsl:value-of select="@name"/>:{<xsl:choose>
                                    <xsl:when test="@type='UID' or @type='Small_UID'">substring-before(concat(@<xsl:value-of select="@name"/>, ":"), ":")</xsl:when>
                                    <xsl:otherwise>@<xsl:value-of select="@name"/></xsl:otherwise>
                                </xsl:choose>}<xsl:if test="position() &lt; last()">;</xsl:if>
                            </xsl:for-each>')
                        </xsl:attribute>[...]
                    </a>
                            <xsl:variable name="Params1" select="xsd:complexType/xsd:attribute[@name='UIDREAD']"/>
                            <input type = "checkbox" id="{{position()}}"  onclick="change(id);">
                                <xsl:attribute name="value">{
                                    @<xsl:value-of select="$Params1/@name"/>
                                }</xsl:attribute>
                                <xsl:attribute name="name">uidread</xsl:attribute>
                            </input>
                    </td>
                    <xsl:if test="@name[.='METERHISTORY']">
                        <td>
                            <a href="#">
                            <xsl:attribute name="onclick">ShowMeterRead('{@UIDMETERHISTORY}')</xsl:attribute>
                            &lt;...&gt;
                            </a>
                        </td>
                    </xsl:if>
                    <xsl:for-each select="$Fields">
                        <xsl:sort select="@lsd:COLUMNNUMBER" data-type="number" />
                        <xsl:variable name="Type" select="//xsd:simpleType[@name=current()/@type]"/>
                        <xsl:variable name="Field" select="."/>
                        <td align="center">
                            <xsl:choose>

                                <xsl:when test="$Type//xsd:enumeration">
                                    <x:choose>
                                        <xsl:for-each select="$Type//xsd:enumeration">
                                            <!-- GESTIONE DEL TIPO MITTENTE -->
                                            <x:when test="@{$Field/@name} = '{@value}' and '{$Type/@name}' = 'ITGp2_SENDERTYPE_DOMMD'">
                                              <xsl:value-of select="concat($Type/@name, '@', @value)"/>
                                            </x:when>

                                            <x:when test="@{$Field/@name} = '{@value}' and '{$Type/@name}' != 'ITGp2_SENDERTYPE_DOMMD'">                        
                                              <xsl:value-of select="i:FM(concat('types/typename[@id=&quot;', $Type/@name, '&quot;]/value[@id=&quot;', @value, '&quot;]'))"/>
                                            </x:when>
                                        </xsl:for-each>
                                          <x:when test="'{$Field/@name}' = 'SENDERTYPE'">
                                            <x:value-of select="concat('ITGp2_SENDERTYPE_DOMMD@',@{@name})" />
                                          </x:when>
                                        <x:otherwise><x:value-of select="@{@name}" />&#160;</x:otherwise>
                                    </x:choose>
                                </xsl:when>
                                <!--Aggiunta F. Perricone per fotoletture in data 21/02/2011-->
                                <xsl:when test="@name='URL_MISURATORE' or @name='URL_CONVERTITORE'">
                                  <x:if test="(@{@name})!=''">
                                    <xsl:variable name="Params1" select="xsd:complexType/xsd:attribute[*]"/>
                                    <img style="cursor:hand" src="../cust_facility/images/fotocamera.png" alt="Fotolettura">
                                      <xsl:attribute name="onclick">javascript : ShowPhoto('<xsl:value-of select="@name"/>;<xsl:for-each select="$Fields">
                                        <xsl:if test="@name='STOPREADTIME' or @name='STOPREADING' or @name='CORRSTOPREAD' or @name='UIDMETER' or @name='UIDREADSHEET'">
                                        <xsl:value-of select="@name"/>|{<xsl:choose>
                                          <xsl:when test="@type='UID' or @type='Small_UID'">
                                            substring-before(concat(@<xsl:value-of select="@name"/>, "|"), "|")
                                          </xsl:when>
                                          <xsl:otherwise>
                                            @<xsl:value-of select="@name"/>
                                          </xsl:otherwise>
                                        </xsl:choose>}<xsl:if test="position() &lt; last()">;</xsl:if>
                                        </xsl:if>
                                      </xsl:for-each>')</xsl:attribute></img>
                                  </x:if>
                                </xsl:when>
                                <!--FINE Aggiunta F. Perricone per fotoletture in data 21/02/2011-->
                                <xsl:when test="@type='UID' or @type='Small_UID'"><x:value-of select=" @{@name}{$RslvSuffix} "/></xsl:when>
                                <xsl:when test="@type = 'Float' or @type = 'Real'">
                                    <x:value-of select="@{@name}"/>
                                </xsl:when>
                                <xsl:when test="$Type/xsd:restriction/@base='xsd:decimal'">
                                    <x:value-of select="i:FR( @{@name}, {$Type/xsd:restriction/xsd:fractionDigits/@value}, 1 )"/>
                                </xsl:when>
                                <xsl:when test="@type = 'Date'"><x:value-of select="i:FD(@{@name})"/></xsl:when>
                                <xsl:when test="@type = 'Timestamp'"><x:value-of select="i:FD(@{@name}, 2, 4)"/></xsl:when>
                                <xsl:when test="@type = 'Bill_Month'">
                                    <x:if test="@{@name}">
                                        <x:value-of select="user:MonthYear(number(@{@name}), '{$DateSep}')"/>
                                    </x:if>
                                </xsl:when>
                            <xsl:otherwise>
                            <x:value-of select="@{@name}" />
                            </xsl:otherwise>
                            </xsl:choose>&#160;
                        </td>
                    </xsl:for-each>
                    <td>
                     <xsl:value-of select="extra:VBCustomScript(string(@UIDMETERHISTORY))"/> 
                    </td>
                </tr>
            </x:for-each>
        </tbody>
    </table>
</x:template>
</x:stylesheet>
</xsl:template>
<xsl:template match="text()"/>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:17:23.127

您正在使用*此*样式表中的函数

```
 <xsl:value-of select="extra:VBCustomScript(string(@UIDMETERHISTORY))"/> 
```

但是该函数未在此样式表中声明，而是在您正在*生成的样式表中声明*

这：

```
<msxsl:script xmlns:msxsl="urn:schemas-microsoft-com:xslt"
language="VBScript" implements-prefix="extra">
    function VBCustomScript(str)
        VBCustomScript= "test"
    end function 
</msxsl:script> 
```

是里面的模板匹配

```
 <xsl:template match="xsd:element"> 
```

# curl - Puppet：curl 调用以在 couchdb 中创建虚拟主机

> ID：14460502
> 
> 赞同：0
> 
> 时间：2013-01-22T14:10:15.830
> 
> 标签：curl, couchdb, puppet, vhosts

我正在尝试使用 curl 在 puppet 文件中为 couchDB 创建虚拟主机：

```
exec {'setup-vhosts':
    command => "curl -X PUT http://127.0.0.1:5984/_config/vhosts/mycool.url -d '"/my_database"'",
    require => [Service['couchdb'], Package['curl']],
} 
```

但我收到此错误：''' 处的语法错误；/tmp/vagrant-puppet/modules-0/couchdb/manifests/init.pp:19 处的预期“}”

如果我在机器本身上执行命令，它会完美运行。如何正确转义命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:50:59.723

我确实使用以下方法修复了它：

```
exec {'setup-vhosts':
    command => "curl -X PUT http://127.0.0.1:5984/_config/vhosts/mycool.url -d \'\"/my_database\"\'",
    require => [Service['couchdb'], Package['curl']],
} 
```

感谢 Ger Apeldoorn 指出我使用正确的转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:43:01.210

我认为您应该转义双引号，或仅在字符串中使用单引号。

```
exec {'setup-vhosts':
    command => "curl -X PUT http://127.0.0.1:5984/_config/vhosts/mycool.url -d \"/my_database\"",
    require => [Service['couchdb'], Package['curl']],
} 
```

或者

```
exec {'setup-vhosts':
    command => "curl -X PUT http://127.0.0.1:5984/_config/vhosts/mycool.url -d '/my_database'",
    require => [Service['couchdb'], Package['curl']],
} 
```

另外，请注意，您必须阻止此 exec 在每个 puppetrun 中运行。

# c# - 写入应用程序事件日志

> ID：14460509
> 
> 赞同：0
> 
> 时间：2013-01-22T14:10:33.700
> 
> 标签：c#

![在此处输入图像描述](../Images/447bafa8db004d18067c2baebcabda7e.png) 我正在尝试将我的网站异常写入应用程序事件日志，我尝试了不同的方法，我看到了很多帖子，但我仍然无法做到这一点。请任何人帮助我尝试这样做。这是我的代码

```
public class CustomHandleErrorAttribute : ActionFilterAttribute

{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        {
            // Bail if we can't do anything; app will crash.
            if (filterContext == null)
                return;
            // since we're handling this, log to ELMAH(Error logging modules and handler)

            var ex = filterContext.Exception ?? new Exception("No further information exists.");
            WriteToEventLog(ex);

            filterContext.ExceptionHandled = true;
            var data = new ErrorPresentation
            {
                ErrorMessage = HttpUtility.HtmlEncode(ex.Message),
                TheException = ex,
                ShowMessage = filterContext.Exception != null,
                ShowLink = false
            };

           filterContext.Result = new ViewResult
                                      {
                                          ViewName = "~/Views/Home/ErrorPage.aspx"
                                      };
         }
    }

    public void WriteToEventLog(Exception exception)
    {
        // todo : now I need to write this exception to Event log

        String cs = "FailureAudit";
        var thisMachineName = "abc";
        var logName = "Application";

        EventLog eventLog = new EventLog(logName, thisMachineName);
        if (!EventLog.SourceExists(logName))
        {
            EventLog.CreateEventSource(logName, logName);

        }
        eventLog.Source = cs;
        eventLog.EnableRaisingEvents = true;
        //eventLog.WriteEntry( exception.ToString(), EventLogEntryType.Error);
        eventLog.WriteEntry(exception.ToString());

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:32:15.727

我在我的机器上运行了以下 cmd（具有管理权限），我现在可以写入应用程序事件日志

```
eventcreate /ID 1 /L APPLICATION /T INFORMATION /SO MYSOURCE /D "MY-SOURCE" 
```

感谢您的建议和意见。

# java - Android：仅从线程获取更新的结果

> ID：14460510
> 
> 赞同：0
> 
> 时间：2013-01-22T14:10:35.567
> 
> 标签：java, android, multithreading, sockets

我正在开发基于套接字的 android 应用程序，我需要在其中获取按钮的状态，无论是打开还是关闭。所以我想要的是我只想要运行线程的更新结果意味着如果任何按钮的状态发生变化，那么我应该被通知我可以相应地设置按钮状态。

这是我的主要课程，每秒检查一次结果。

```
public static void main(String[] args) {
        // TODO Auto-generated method stub

        System.out.println("connected");
        try {
            s = new Socket("192.168.1.19", 502);
            i = s.getInputStream();
            iD = new DataInputStream(i);
            o = s.getOutputStream();
            oD = new DataOutputStream(o);

            System.out.println("connected");
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        myTimer = new Timer();
        myTimer.schedule(new TimerTask() {
            @Override
            public void run() {
                Thread cThread = new Thread(new ClientThread());
                cThread.start();
            }
        }, 0,1000);

    } 
```

在这里，我使用`TimerTask`了每秒运行的。但不想使用定时器任务。

这是**ClientThread.java**

```
public class ClientThread implements Runnable {

    PollThread pollThread;
    String byte_to_hex,swapped_result,result;

    @Override
    public void run() 
    {
        // TODO Auto-generated method stub
        try 
        {
            byte[] data1 = new byte[1024], packet1 = 
                { 
                    (byte) 0x00,(byte) 0x00,(byte) 0x00, 
                    (byte) 0x00,(byte) 0x00,(byte) 0x06, 
                    (byte) 0x01,(byte) 0x01,(byte) 0x00,
                    (byte) 0x00,(byte) 0x00,(byte) 0x19
                };

            PollThread.o.write(packet1);
            PollThread.i.read(data1, 0, 1024);

            /*Log.v("::::TX::::", ConversionMethods.bytesToHex(data1).substring(0, 26));
            Log.v("::::RX::::", ConversionMethods.bytesToHex(packet1));*/

            byte_to_hex = ConversionMethods.bytesToHex(data1).substring(18, 26);

            System.out.println(byte_to_hex);

            char[] arr = byte_to_hex.toCharArray();
            for (int i = 0; i < arr.length - 1; i += 2) 
            {
                char temp = arr[i];
                arr[i] = arr[i + 1];
                arr[i + 1] = temp;
            }

            swapped_result=new String(arr);
            result = ConversionMethods.hexStringToNBitBinary(swapped_result, 32);
            System.out.println(result);
        }
        catch (UnknownHostException e) {
            // TODO: handle exception
            System.out.println("In Catch Block");
            e.printStackTrace();
        }
        catch (IOException e) {
            // TODO: handle exception
            System.out.println("In Catch Block");
            e.printStackTrace();
        }
    }
} 
```

当任何按钮的状态发生变化时，我会得到不同的结果。所以我想要这个更新的状态值。所以基于此我可以执行一些操作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:39:04.613

初始化时将按钮传递给线程。您可以从您的线程访问状态。

```
 myTimer = new Timer();
        myTimer.schedule(new TimerTask() {
            @Override
            public void run() {
                Thread cThread = new Thread(new ClientThread(myButton));
                    cThread.start();
                }
    }, 0,1000);

public class ClientThread implements Runnable {

    PollThread pollThread;
    String byte_to_hex,swapped_result,result;

public ClientThread(Button btn){
this.button = btn
}

@Override
public void run() 
{ 
```

……

# cuda - CUDA纹理插值的一维线性插值精度

> ID：14460514
> 
> 赞同：1
> 
> 时间：2013-01-22T14:10:41.850
> 
> 标签：cuda, textures

我正在使用“标准”CUDA 实现和复数（float2）上的“基于纹理”的 CUDA 实现来比较一维线性插值。

“标准”CUDA 实现包括以下几行：

```
/*************************************/
/* LINEAR INTERPOLATION KERNEL - GPU */
/*************************************/
__device__ float linear_kernel_GPU(float in)
{
    float d_y;
    return 1.-abs(in);
}

/**********************************************/
/* LINEAR INTERPOLATION KERNEL FUNCTION - GPU */
/**********************************************/
__global__ void linear_interpolation_kernel_function_GPU(float2* result_d, float2* data_d, float* x_in_d, float* x_out_d, int M, int N)
{
    int j = threadIdx.x + blockDim.x * blockIdx.x;

    if(j<N)
    {
        result_d[j].x = 0.;
        result_d[j].y = 0.;
        for(int k=0; k<M; k++)
        {
            if (fabs(x_out_d[j]-x_in_d[k])<1.) {
                result_d[j].x = result_d[j].x + linear_kernel_GPU(x_out_d[j]-x_in_d[k])*data_d[k].x;
                result_d[j].y = result_d[j].y + linear_kernel_GPU(x_out_d[j]-x_in_d[k])*data_d[k].y; }
        }  
    } 
}

extern "C" void linear_interpolation_function_GPU(cuComplex* result_d, cuComplex* data_d, float* x_in_d, float* x_out_d, int M, int N){

    dim3 dimBlock(BLOCK_SIZE,1); dim3 dimGrid(N/BLOCK_SIZE + (N%BLOCK_SIZE == 0 ? 0:1),1);
    linear_interpolation_kernel_function_GPU<<<dimGrid,dimBlock>>>(result_d, data_d, x_in_d, x_out_d, M, N);

} 
```

“基于纹理”的 CUDA 实现包括以下几行：

```
texture<float2, 1, cudaReadModeElementType> data_d_texture;

// ********************************************************/
// * LINEAR INTERPOLATION KERNEL FUNCTION - GPU - TEXTURE */
// ********************************************************/
__global__ void linear_interpolation_kernel_function_GPU_texture(cuComplex* result_d, float* x_out_d, int M, int N)
{
    int j = threadIdx.x + blockDim.x * blockIdx.x;

    if(j<N) result_d[j] = tex1D(data_d_texture,float(x_out_d[j]+M/2+0.5));

}

// *************************************************/
// * LINEAR INTERPOLATION FUNCTION - GPU - TEXTURE */
// *************************************************/
extern "C" void linear_interpolation_function_GPU_texture(float2* result_d, float2* data, float* x_in_d, float* x_out_d, int M, int N){

    cudaArray* data_d = NULL; cudaMallocArray (&data_d, &data_d_texture.channelDesc, M, 1); 
    cudaMemcpyToArray(data_d, 0, 0, data, sizeof(float2)*M, cudaMemcpyHostToDevice); 
    cudaBindTextureToArray(data_d_texture, data_d); 
    data_d_texture.normalized = false; 
    data_d_texture.filterMode = cudaFilterModeLinear;

    dim3 dimBlock(BLOCK_SIZE,1); dim3 dimGrid(N/BLOCK_SIZE + (N%BLOCK_SIZE == 0 ? 0:1),1);
    linear_interpolation_kernel_function_GPU_texture<<<dimGrid,dimBlock>>>(result_d, x_out_d, M, N);

} 
```

“基于纹理的”插值比“标准”插值快 20 倍以上。但是，我注意到结果中存在一些不匹配，在 about 的两个实现之间存在均方根误差`0.07%`。

CUDA C 编程指南说插值系数以 9 位定点格式存储，带有 8 位小数值，这可能是导致不匹配的原因。

然后我有两个问题：

1）是否有任何“技巧”来提高“基于纹理”插值的准确性？

2）我认为即使我移动到 float4，这种 9 位表示也会将精度限制在此处获得的精度，对吗？换句话说，将数字表示精度从 float2 提高到 float4 没有意义吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:09:21.403

你可以“预插值”你的纹理来增加你的分辨率，即如果你的初始纹理是 100x100，那么你可以预插值使其成为 200x200，那么你已经将内核插值的分辨率加倍。

# delphi - 有什么方法可以让 TTimer 着火之前剩下的时间？

> ID：14460515
> 
> 赞同：3
> 
> 时间：2013-01-22T14:10:42.630
> 
> 标签：delphi, c++builder, ttimer

> **可能重复：**
> [Delphi Timer：下一个事件之前的时间](https://stackoverflow.com/questions/7263490/delphi-timer-time-before-next-event)

在 Windows 7 Pro（64 位）上使用 C++ builder XE：

我在表格上有一个 TTimer。

我想要做的是更新进度条以显示 TTimer 在调用 OnTimer 事件处理程序之前还剩下多长时间。

有什么方法可以找出直到 TTimer 的时间间隔触发 OnTimer 事件的时间太长？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:20:25.020

不，Windows 计时器没有为此提供接口。

由于无论如何您都将更新进度条，因此您已经有了一些比您要跟踪的计时器更频繁地运行的周期性代码。该代码将由计时器触发，因此在*该*计时器代码中，检查当前时间并与您之前为要跟踪的计时器计算的到期时间进行比较。

然后，摆脱第一个计时器，因为您不再需要它。相反，只需使用“跟踪”计时器在时间到时触发原始代码。最终，您将拥有一个持续检查是否该运行代码的计时器。如果是时候，则运行代码；否则，改为更新进度条。

# jquery - 从覆盖窗口打开对话框

> ID：14460517
> 
> 赞同：0
> 
> 时间：2013-01-22T14:10:50.263
> 
> 标签：jquery, overlay

我想通过覆盖窗口中按钮的 onclick 事件打开一个 easyui 对话框。发生的情况是，我的对话框在覆盖窗口后面打开。有没有办法解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T03:46:00.973

您可以通过在源代码中更改`zlndex:9000`为来做到这一点。`zlndex:1000`

# php - PHP，从日期获取明天的日期

> ID：14460518
> 
> 赞同：99
> 
> 时间：2013-01-22T14:10:52.790
> 
> 标签：php, date, datetime, strtotime

我有一个形式的 PHP 日期，`2013-01-22`我想以相同的格式获取明天的日期，例如`2013-01-23`.

PHP怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2013-01-22T14:12:23.373

使用[日期时间](http://php.net/manual/en/book.datetime.php)

```
$datetime = new DateTime('tomorrow');
echo $datetime->format('Y-m-d H:i:s'); 
```

或者：

```
$datetime = new DateTime('2013-01-22');
$datetime->modify('+1 day');
echo $datetime->format('Y-m-d H:i:s'); 
```

或者：

```
$datetime = new DateTime('2013-01-22');
$datetime->add(new DateInterval("P1D"));
echo $datetime->format('Y-m-d H:i:s'); 
```

或者在 PHP 5.4+ 中：

```
echo (new DateTime('2013-01-22'))->add(new DateInterval("P1D"))
                                 ->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2015-12-15T09:47:56.037

```
 $tomorrow = date("Y-m-d", strtotime('tomorrow')); 
```

或者

```
 $tomorrow = date("Y-m-d", strtotime("+1 day")); 
```

帮助链接：[STRTOTIME()](https://www.php.net/manual/en/function.strtotime)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-22T14:14:49.297

由于您使用[strtotime](/questions/tagged/strtotime "显示标记为“strtotime”的问题")标记了它，因此您可以将其与`+1 day`修饰符一起使用，如下所示：

```
$tomorrow_timestamp = strtotime('+1 day', strtotime('2013-01-22')); 
```

[也就是说，使用 DateTime](https://stackoverflow.com/a/14460546/698179)是一个更好的解决方案。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-10-24T10:35:41.147

```
<? php 

//1 Day = 24*60*60 = 86400

echo date("d-m-Y", time()+86400); 

?> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-06-22T05:12:23.057

`echo date ('Y-m-d',strtotime('+1 day', strtotime($your_date)));`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-06-27T01:18:18.237

使用`DateTime`：

从现在开始明天：

```
$d = new DateTime('+1day');
$tomorrow = $d->format('d/m/Y h.i.s');
echo $tomorrow; 
```

> 结果 : 28/06/2017 08.13.20

要从某个日期获得明天：

```
$d = new DateTime('2017/06/10 08.16.35 +1day')
$tomorrow = $d->format('d/m/Y h.i.s');
echo $tomorrow; 
```

> 结果 : 11/06/2017 08.16.35

希望能帮助到你！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-09T16:26:07.130

```
/**
 * get tomorrow's date in the format requested, default to Y-m-d for MySQL (e.g. 2013-01-04)
 *
 * @param string
 *
 * @return string
 */
public static function getTomorrowsDate($format = 'Y-m-d')
{
    $date = new DateTime();
    $date->add(DateInterval::createFromDateString('tomorrow'));

    return $date->format($format);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-02T12:51:20.693

奇怪的是，它看起来工作得很好：`date_create( '2016-02-01 + 1 day' );`

`echo date_create( $your_date . ' + 1 day' )->format( 'Y-m-d' );`

应该这样做

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-10T14:24:16.783

首先，提出正确的抽象总是一个关键。可读性、可维护性和可扩展性的关键。

在这里，很明显的候选人是一个`ISO8601DateTime`。至少有两种实现：第一个是从字符串解析的日期时间，第二个是明天。因此，有两个类可以使用，它们的组合会产生（几乎）期望的结果：

```
new Tomorrow(new FromISO8601('2013-01-22')); 
```

这两个对象*都是*ISO8601 日期时间，因此它们的文本表示并不完全符合您的需要。所以最后一招是让它们采用日期形式：

```
new Date(
    new Tomorrow(
        new FromISO8601('2013-01-22')
    )
); 
```

由于您需要文本表示，而不仅仅是一个对象，因此您调用了一个`value()`方法。

有关此方法的更多信息，请查看[这篇文章](https://meringue.readthedocs.io/en/latest/quick_start.html)。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-01-31T08:53:59.007

这是工作功能

```
function plus_one_day($date){
 $date2 = formatDate4db($date);
 $date1 = str_replace('-', '/', $date2);
 $tomorrow = date('Y-m-d',strtotime($date1 . "+1 days"));
 return $tomorrow; } 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2013-01-22T14:14:27.123

```
$date = '2013-01-22';
$time = strtotime($date) + 86400;
echo date('Y-m-d', $time); 
```

其中 86400 是一天中的秒数。

# css - 为什么引导样式未在 jsFiddle 中应用？

> ID：14460520
> 
> 赞同：2
> 
> 时间：2013-01-22T14:10:54.220
> 
> 标签：css, twitter-bootstrap

代码：http: [//jsfiddle.net/sunnycpp/KNM4q/97/](http://jsfiddle.net/sunnycpp/KNM4q/97/)

您能否指出为什么 Bootstrap 的默认样式`<ol>`未在此代码中设置的原因？

从小提琴中粘贴 HTML 的一部分。

```
<ul>                                 
    <li class="ng-scope" ng-repeat="item in val.items"><span class="indent ng-scope ng-binding">Tables
        &amp; Chairs</span></li>
    <li class="ng-scope" ng-repeat="item in val.items"><span class="indent ng-scope ng-binding">Sofas</span></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:15:25.507

它被`normalize.css`jsfiddle 中使用的覆盖：

```
ol, ul {
    list-style: none;
} 
```

只需取消选中左侧的标准化 CSS 选项（“选择框架”部分）。

[http://jsfiddle.net/KNM4q/100/](http://jsfiddle.net/KNM4q/100/)

# security - OAuth 身份验证和消费者机密

> ID：14460521
> 
> 赞同：0
> 
> 时间：2013-01-22T14:11:08.373
> 
> 标签：security, authentication, oauth, oauth-2.0

我有一个网络服务，它充当智能手机应用程序的后端。

我希望能够尽可能轻松地对用户进行身份验证，但即使我认为我理解了 OAuth，我也必须承认这里和那里都有一些缺失的部分。

**验证：**

假设用户有一部 Android 手机。他可能已经通过 Google 身份验证，如果我可以将此身份验证扩展到我的网络服务，那就太好了。Android 具有 OAuth 支持，因此用户打开他的应用程序，授予使用他的谷歌帐户的权限，并且应用程序对他的网络服务进行身份验证。

**网络服务**

由于该服务应该接受来自各种设备的用户，它不应该是谷歌特定的。应该可以注册一个帐户并从任何设备登录。我不确定是否可以单独使用 OAuth 注册一个新帐户，或者您是否需要先进行其他类型的身份验证 - 例如 OpenID。

通用 Web 服务的流程如何？用于注册用户并授予他访问 API 的通用 API？

此外 - 我不想控制连接到此服务的设备。我可以看到 OAuth 需要一个 consumer_key 和一个 consumer_secret。如果我通过 SSL 运行所有内容 - 消费者秘密仍然是秘密还是我可以只使用一些虚拟值？从而避免创建一个人们可以获得consumer_secret的设备注册系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T08:30:02.380

对于您的情况，如果您想使用 Google/Facebook 等作为身份验证提供者，您将需要使用 Oauth2 的“授权码”流程。在这种情况下，您以开发者身份在 Google/FB 注册并获得使用其 API 的客户端 ID 和密码。

然后，您获得使用 Google/Facebook 登录按钮和代码，您将使用它来触发“webview”或嵌入式浏览器，用户将被带到 google/facebook 并要求提供他的登录凭据。

成功后，授权代码将发送到您在 Google/Facebook 注册为开发人员时提供的重定向 URL。您将需要捕获此授权码，然后再次调用相关 API 以获取访问令牌，然后您可以使用该令牌获取用户的详细信息以在第一次注册他或如果他之前已经通过此方法注册他则对其进行身份验证.

# maven - 什么是 Maven 基础目录？

> ID：14460525
> 
> 赞同：7
> 
> 时间：2013-01-22T14:11:12.300
> 
> 标签：maven

我正在努力在 maven 网站上找到明确告诉我“基本目录”是什么的文档。这个词在好几页上都出现了，好像我已经知道它的意思了。

我想它是包含 pom.xml 的目录（哪个 pom，如果一个 pom 引用另一个？），但它可能比这更微妙？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T14:12:56.993

[在 POM 简介中](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)找到它：

> project.basedir：当前项目所在的目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T14:12:32.253

它`pom.xml`是存储的目录（在项目的根目录中）。

# nosql - Redis 在高负载时定期停止响应

> ID：14460528
> 
> 赞同：10
> 
> 时间：2013-01-22T14:11:15.927
> 
> 标签：nosql, redis, high-load

我正在使用一个简单的 redis 服务器设置在我的 PHP 应用程序中存储一些值。昨天我安装了 phpredis 模块以使用 redis 作为 PHP Session 后端，这将 redis DB 的请求率从 100 增加到 2000，并将 DB 大小从 60Mb 增加到 200Mb。

在此之后，redis 不是每 10 个请求都可用 - 只是没有响应。日志文件没有显示任何可以解释这一点的东西。

我有超过 50% 的可用内存。redis使用的资源如下：

```
 PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                            
31075 root      20   0  170m 161m  936 S   41  2.0  11:10.52 redis-server 
```

这可能是什么原因？也许我应该调整一些 redis 设置以获得更高的负载？

这是我的 redis.conf：

```
# Redis configuration file example

# Note on units: when memory size is needed, it is possible to specifiy
# it in the usual form of 1k 5GB 4M and so forth:
#
# 1k => 1000 bytes
# 1kb => 1024 bytes
# 1m => 1000000 bytes
# 1mb => 1024*1024 bytes
# 1g => 1000000000 bytes
# 1gb => 1024*1024*1024 bytes
#
# units are case insensitive so 1GB 1Gb 1gB are all the same.

# By default Redis does not run as a daemon. Use 'yes' if you need it.
# Note that Redis will write a pid file in /var/run/redis.pid when daemonized.
daemonize no

# When running daemonized, Redis writes a pid file in /var/run/redis.pid by
# default. You can specify a custom pid file location here.
pidfile /var/run/redis.pid

# Accept connections on the specified port, default is 6379.
# If port 0 is specified Redis will not listen on a TCP socket.
port 6379

# If you want you can bind a single interface, if the bind option is not
# specified all the interfaces will listen for incoming connections.
#
# bind 127.0.0.1

# Specify the path for the unix socket that will be used to listen for
# incoming connections. There is no default, so Redis will not listen
# on a unix socket when not specified.
#
# unixsocket /tmp/redis.sock

# Close the connection after a client is idle for N seconds (0 to disable)
timeout 300

# Set server verbosity to 'debug'
# it can be one of:
# debug (a lot of information, useful for development/testing)
# verbose (many rarely useful info, but not a mess like the debug level)
# notice (moderately verbose, what you want in production probably)
# warning (only very important / critical messages are logged)
loglevel debug

# Specify the log file name. Also 'stdout' can be used to force
# Redis to log on the standard output. Note that if you use standard
# output for logging but daemonize, logs will be sent to /dev/null
logfile /var/log/redis/redis.log

# To enable logging to the system logger, just set 'syslog-enabled' to yes,
# and optionally update the other syslog parameters to suit your needs.
# syslog-enabled no

# Specify the syslog identity.
# syslog-ident redis

# Specify the syslog facility.  Must be USER or between LOCAL0-LOCAL7.
# syslog-facility local0

# Set the number of databases. The default database is DB 0, you can select
# a different one on a per-connection basis using SELECT <dbid> where
# dbid is a number between 0 and 'databases'-1
databases 16

################################ SNAPSHOTTING  #################################
#
# Save the DB on disk:
#
#   save <seconds> <changes>
#
#   Will save the DB if both the given number of seconds and the given
#   number of write operations against the DB occurred.
#
#   In the example below the behaviour will be to save:
#   after 900 sec (15 min) if at least 1 key changed
#   after 300 sec (5 min) if at least 10 keys changed
#   after 60 sec if at least 10000 keys changed
#
#   Note: you can disable saving at all commenting all the "save" lines.

save 900 1
save 300 10
save 60 10000

# Compress string objects using LZF when dump .rdb databases?
# For default that's set to 'yes' as it's almost always a win.
# If you want to save some CPU in the saving child set it to 'no' but
# the dataset will likely be bigger if you have compressible values or keys.
rdbcompression yes

# The filename where to dump the DB
dbfilename dump.rdb

# The working directory.
#
# The DB will be written inside this directory, with the filename specified
# above using the 'dbfilename' configuration directive.
# 
# Also the Append Only File will be created inside this directory.
# 
# Note that you must specify a directory here, not a file name.
dir /backups/redisdumps

################################# REPLICATION #################################

# Master-Slave replication. Use slaveof to make a Redis instance a copy of
# another Redis server. Note that the configuration is local to the slave
# so for example it is possible to configure the slave to save the DB with a
# different interval, or to listen to another port, and so on.
#
# slaveof <masterip> <masterport>

# If the master is password protected (using the "requirepass" configuration
# directive below) it is possible to tell the slave to authenticate before
# starting the replication synchronization process, otherwise the master will
# refuse the slave request.
#
# masterauth <master-password>

# When a slave lost the connection with the master, or when the replication
# is still in progress, the slave can act in two different ways:
#
# 1) if slave-serve-stale-data is set to 'yes' (the default) the slave will
#    still reply to client requests, possibly with out of data data, or the
#    data set may just be empty if this is the first synchronization.
#
# 2) if slave-serve-stale data is set to 'no' the slave will reply with
#    an error "SYNC with master in progress" to all the kind of commands
#    but to INFO and SLAVEOF.
#
slave-serve-stale-data yes

################################## SECURITY ###################################

# Require clients to issue AUTH <PASSWORD> before processing any other
# commands.  This might be useful in environments in which you do not trust
# others with access to the host running redis-server.
#
# This should stay commented out for backward compatibility and because most
# people do not need auth (e.g. they run their own servers).
# 
# Warning: since Redis is pretty fast an outside user can try up to
# 150k passwords per second against a good box. This means that you should
# use a very strong password otherwise it will be very easy to break.
#
# requirepass foobared

# Command renaming.
#
# It is possilbe to change the name of dangerous commands in a shared
# environment. For instance the CONFIG command may be renamed into something
# of hard to guess so that it will be still available for internal-use
# tools but not available for general clients.
#
# Example:
#
# rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52
#
# It is also possilbe to completely kill a command renaming it into
# an empty string:
#
# rename-command CONFIG ""

################################### LIMITS ####################################

# Set the max number of connected clients at the same time. By default there
# is no limit, and it's up to the number of file descriptors the Redis process
# is able to open. The special value '0' means no limits.
# Once the limit is reached Redis will close all the new connections sending
# an error 'max number of clients reached'.
#
# maxclients 128

# Don't use more memory than the specified amount of bytes.
# When the memory limit is reached Redis will try to remove keys with an
# EXPIRE set. It will try to start freeing keys that are going to expire
# in little time and preserve keys with a longer time to live.
# Redis will also try to remove objects from free lists if possible.
#
# If all this fails, Redis will start to reply with errors to commands
# that will use more memory, like SET, LPUSH, and so on, and will continue
# to reply to most read-only commands like GET.
#
# WARNING: maxmemory can be a good idea mainly if you want to use Redis as a
# 'state' server or cache, not as a real DB. When Redis is used as a real
# database the memory usage will grow over the weeks, it will be obvious if
# it is going to use too much memory in the long run, and you'll have the time
# to upgrade. With maxmemory after the limit is reached you'll start to get
# errors for write operations, and this may even lead to DB inconsistency.
#
# maxmemory <bytes>

# MAXMEMORY POLICY: how Redis will select what to remove when maxmemory
# is reached? You can select among five behavior:
# 
# volatile-lru -> remove the key with an expire set using an LRU algorithm
# allkeys-lru -> remove any key accordingly to the LRU algorithm
# volatile-random -> remove a random key with an expire set
# allkeys->random -> remove a random key, any key
# volatile-ttl -> remove the key with the nearest expire time (minor TTL)
# noeviction -> don't expire at all, just return an error on write operations
# 
# Note: with all the kind of policies, Redis will return an error on write
#       operations, when there are not suitable keys for eviction.
#
#       At the date of writing this commands are: set setnx setex append
#       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd
#       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby
#       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby
#       getset mset msetnx exec sort
#
# The default is:
#
# maxmemory-policy volatile-lru

# LRU and minimal TTL algorithms are not precise algorithms but approximated
# algorithms (in order to save memory), so you can select as well the sample
# size to check. For instance for default Redis will check three keys and
# pick the one that was used less recently, you can change the sample size
# using the following configuration directive.
#
# maxmemory-samples 3

############################## APPEND ONLY MODE ###############################

# By default Redis asynchronously dumps the dataset on disk. If you can live
# with the idea that the latest records will be lost if something like a crash
# happens this is the preferred way to run Redis. If instead you care a lot
# about your data and don't want to that a single record can get lost you should
# enable the append only mode: when this mode is enabled Redis will append
# every write operation received in the file appendonly.aof. This file will
# be read on startup in order to rebuild the full dataset in memory.
#
# Note that you can have both the async dumps and the append only file if you
# like (you have to comment the "save" statements above to disable the dumps).
# Still if append only mode is enabled Redis will load the data from the
# log file at startup ignoring the dump.rdb file.
#
# IMPORTANT: Check the BGREWRITEAOF to check how to rewrite the append
# log file in background when it gets too big.

appendonly no

# The name of the append only file (default: "appendonly.aof")
# appendfilename appendonly.aof

# The fsync() call tells the Operating System to actually write data on disk
# instead to wait for more data in the output buffer. Some OS will really flush 
# data on disk, some other OS will just try to do it ASAP.
#
# Redis supports three different modes:
#
# no: don't fsync, just let the OS flush the data when it wants. Faster.
# always: fsync after every write to the append only log . Slow, Safest.
# everysec: fsync only if one second passed since the last fsync. Compromise.
#
# The default is "everysec" that's usually the right compromise between
# speed and data safety. It's up to you to understand if you can relax this to
# "no" that will will let the operating system flush the output buffer when
# it wants, for better performances (but if you can live with the idea of
# some data loss consider the default persistence mode that's snapshotting),
# or on the contrary, use "always" that's very slow but a bit safer than
# everysec.
#
# If unsure, use "everysec".

# appendfsync always
appendfsync everysec
# appendfsync no

# When the AOF fsync policy is set to always or everysec, and a background
# saving process (a background save or AOF log background rewriting) is
# performing a lot of I/O against the disk, in some Linux configurations
# Redis may block too long on the fsync() call. Note that there is no fix for
# this currently, as even performing fsync in a different thread will block
# our synchronous write(2) call.
#
# In order to mitigate this problem it's possible to use the following option
# that will prevent fsync() from being called in the main process while a
# BGSAVE or BGREWRITEAOF is in progress.
#
# This means that while another child is saving the durability of Redis is
# the same as "appendfsync none", that in pratical terms means that it is
# possible to lost up to 30 seconds of log in the worst scenario (with the
# default Linux settings).
# 
# If you have latency problems turn this to "yes". Otherwise leave it as
# "no" that is the safest pick from the point of view of durability.
no-appendfsync-on-rewrite no

################################## SLOW LOG ###################################

# The Redis Slow Log is a system to log queries that exceeded a specified
# execution time. The execution time does not include the I/O operations
# like talking with the client, sending the reply and so forth,
# but just the time needed to actually execute the command (this is the only
# stage of command execution where the thread is blocked and can not serve
# other requests in the meantime).
# 
# You can configure the slow log with two parameters: one tells Redis
# what is the execution time, in microseconds, to exceed in order for the
# command to get logged, and the other parameter is the length of the
# slow log. When a new command is logged the oldest one is removed from the
# queue of logged commands.

# The following time is expressed in microseconds, so 1000000 is equivalent
# to one second. Note that a negative number disables the slow log, while
# a value of zero forces the logging of every command.
slowlog-log-slower-than 10000

# There is no limit to this length. Just be aware that it will consume memory.
# You can reclaim memory used by the slow log with SLOWLOG RESET.
slowlog-max-len 1024

################################ VIRTUAL MEMORY ###############################

### WARNING! Virtual Memory is deprecated in Redis 2.4
### The use of Virtual Memory is strongly discouraged.

# Virtual Memory allows Redis to work with datasets bigger than the actual
# amount of RAM needed to hold the whole dataset in memory.
# In order to do so very used keys are taken in memory while the other keys
# are swapped into a swap file, similarly to what operating systems do
# with memory pages.
#
# To enable VM just set 'vm-enabled' to yes, and set the following three
# VM parameters accordingly to your needs.

vm-enabled no
# vm-enabled yes

# This is the path of the Redis swap file. As you can guess, swap files
# can't be shared by different Redis instances, so make sure to use a swap
# file for every redis process you are running. Redis will complain if the
# swap file is already in use.
#
# The best kind of storage for the Redis swap file (that's accessed at random) 
# is a Solid State Disk (SSD).
#
# *** WARNING *** if you are using a shared hosting the default of putting
# the swap file under /tmp is not secure. Create a dir with access granted
# only to Redis user and configure Redis to create the swap file there.
vm-swap-file /tmp/redis.swap

# vm-max-memory configures the VM to use at max the specified amount of
# RAM. Everything that deos not fit will be swapped on disk *if* possible, that
# is, if there is still enough contiguous space in the swap file.
#
# With vm-max-memory 0 the system will swap everything it can. Not a good
# default, just specify the max amount of RAM you can in bytes, but it's
# better to leave some margin. For instance specify an amount of RAM
# that's more or less between 60 and 80% of your free RAM.
vm-max-memory 0

# Redis swap files is split into pages. An object can be saved using multiple
# contiguous pages, but pages can't be shared between different objects.
# So if your page is too big, small objects swapped out on disk will waste
# a lot of space. If you page is too small, there is less space in the swap
# file (assuming you configured the same number of total swap file pages).
#
# If you use a lot of small objects, use a page size of 64 or 32 bytes.
# If you use a lot of big objects, use a bigger page size.
# If unsure, use the default :)
vm-page-size 32

# Number of total memory pages in the swap file.
# Given that the page table (a bitmap of free/used pages) is taken in memory,
# every 8 pages on disk will consume 1 byte of RAM.
#
# The total swap size is vm-page-size * vm-pages
#
# With the default of 32-bytes memory pages and 134217728 pages Redis will
# use a 4 GB swap file, that will use 16 MB of RAM for the page table.
#
# It's better to use the smallest acceptable value for your application,
# but the default is large in order to work in most conditions.
vm-pages 134217728

# Max number of VM I/O threads running at the same time.
# This threads are used to read/write data from/to swap file, since they
# also encode and decode objects from disk to memory or the reverse, a bigger
# number of threads can help with big objects even if they can't help with
# I/O itself as the physical device may not be able to couple with many
# reads/writes operations at the same time.
#
# The special value of 0 turn off threaded I/O and enables the blocking
# Virtual Memory implementation.
vm-max-threads 4

############################### ADVANCED CONFIG ###############################

# Hashes are encoded in a special way (much more memory efficient) when they
# have at max a given numer of elements, and the biggest element does not
# exceed a given threshold. You can configure this limits with the following
# configuration directives.
hash-max-zipmap-entries 512
hash-max-zipmap-value 64

# Similarly to hashes, small lists are also encoded in a special way in order
# to save a lot of space. The special representation is only used when
# you are under the following limits:
list-max-ziplist-entries 512
list-max-ziplist-value 64

# Sets have a special encoding in just one case: when a set is composed
# of just strings that happens to be integers in radix 10 in the range
# of 64 bit signed integers.
# The following configuration setting sets the limit in the size of the
# set in order to use this special memory saving encoding.
set-max-intset-entries 512

# Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in
# order to help rehashing the main Redis hash table (the one mapping top-level
# keys to values). The hash table implementation redis uses (see dict.c)
# performs a lazy rehashing: the more operation you run into an hash table
# that is rhashing, the more rehashing "steps" are performed, so if the
# server is idle the rehashing is never complete and some more memory is used
# by the hash table.
# 
# The default is to use this millisecond 10 times every second in order to
# active rehashing the main dictionaries, freeing memory when possible.
#
# If unsure:
# use "activerehashing no" if you have hard latency requirements and it is
# not a good thing in your environment that Redis can reply form time to time
# to queries with 2 milliseconds delay.
#
# use "activerehashing yes" if you don't have such hard requirements but
# want to free memory asap when possible.
activerehashing yes

################################## INCLUDES ###################################

# Include one or more other config files here.  This is useful if you
# have a standard template that goes to all redis server but also need
# to customize a few per-server settings.  Include files can include
# other files, so use this wisely.
#
# include /path/to/local.conf
# include /path/to/other.conf 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T14:39:53.663

似乎我在这里找到了解决方案：[http ://redis4you.com/articles.php?id=012&name=redis](http://redis4you.com/articles.php?id=012&name=redis)

在 linux 上，您应该更改内核设置，以优化高负载的 TCP 操作：

```
echo 1 > /proc/sys/net/ipv4/tcp_tw_reuse
echo 1 > /proc/sys/net/ipv4/tcp_tw_recycle 
```

此外，通过添加以下内容使这些更改在重新启动后保持不变`/etc/sysctl.conf`：

```
net.ipv4.tcp_tw_reuse = 1
net.ipv4.tcp_tw_recycle = 1 
```

另外，它有助于设置`timeout`为：`0``redis.conf`

```
# Close the connection after a client is idle for N seconds (0 to disable)
timeout 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-03T19:15:17.093

我们发现，如果您将 aof 持久性与 rdb 快照一起使用，有时 rdb 更新会延迟 aof 的更新，进而导致对 redis 的写入阻塞。关闭 aof 持久性可以解决我们遇到的间歇性延迟，这对我们来说没问题，因为由于崩溃而丢失最新的几个键并不重要。

# java - 日期格式不起作用？

> ID：14460531
> 
> 赞同：2
> 
> 时间：2013-01-22T14:11:20.867
> 
> 标签：java, date, format

```
String selectedDate = "2012-" + createdMonth + "-" + createdDay;

SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");

try {
    createdDate = dateFormat.parse(selectedDate);
} catch (ParseException e1) {
    e1.printStackTrace();
}

System.out.println(createdDate); 
```

基本上当我打印 createdDate 时，它​​会显示如下内容：Thu Mar 08 00:00:00 CST 2012

而不是这种格式的“yyyy-MM-dd”。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:20:34.743

该`parse`方法返回一个`java.util.Date`，这就是返回的`Date`实现`toString()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:25:14.643

您似乎认为`createdDate`作为`Date`对象的 具有格式`yyyy-MM-dd`。它没有。`Date`对象没有格式——它们只包含一个时间戳，就像数字只是数字一样，它们本身没有格式。

`SimpleDateFormat`对象用于将 a 解析为`String`对象`Date`，或将对象格式化`Date`为`String`.

如果您有一个`Date`对象，并且希望以特定格式显示日期，则`String`使用对象将其转换为具有适当格式的 a `SimpleDateFormat`：

```
SimpleDateFormat fmt = new SimpleDateFormat("yyyy-MM-dd");
String text = fmt.format(createdDate);
System.out.println("Created: " + text); 
```

如果您在`Date`没有明确格式化的情况下打印对象，它将使用默认格式进行格式化，这就是您看到`Thu Mar 08 00:00:00 CST 2012`.

一个`Date`对象不记得`String`你解析它的格式是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T14:19:13.957

您需要打印如下。关键是您还需要使用在打印时创建的格式化程序对象。

```
System.out.println(dateFormat.format(createdDate)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T14:20:28.077

利用`dateFormat.format(createdDate)`

# forms - Symfony 2 - 如何在使用 Ajax 填充时验证实体字段类型？

> ID：14460536
> 
> 赞同：0
> 
> 时间：2013-01-22T14:11:36.867
> 
> 标签：forms, symfony, doctrine-orm, validation

我遇到了一个让我疯狂超过 3 天的问题，但我没有找到任何解决方案。不过，我在 stackoverflow 上发现了一个帖子，这正是我面临的问题。不幸的是，这个人确实设法找到了解决方案，但他或她并没有完全分享。正如他完美解释的那样，只需在下面复制粘贴即可：
顺便说一句，创建该帖子的人似乎只是为这个问题创建了他的帐户，此后再也没有回来处理其他事情。这就是为什么我允许自己再次在这里问...

> 我有 2 个实体（A 和 B），它们之间存在多对一关系。
> 
> 我使用 A 实体创建表单，并使用实体字段（下拉列表）来显示 B 实体中的行。我使用查询生成器来过滤它们。如果不更改列表中的值（即使用 ajax），一切正常。
> 
> 但是，如果我动态更改下拉列表中的值，当我提交表单时，我会收到此错误“此值无效”
> 
> 这是因为提交的值不包含在查询生成器返回的“数组”中。
> 
> 似乎这个验证在 symfony 中对于实体字段是自动的（我没有在这个字段上使用任何断言）。我想摆脱这个。但是如何？

看来我需要实现表单事件。不幸的是，我不明白。我阅读了关于该主题的文档非常差，阅读了很多帖子，在互联网上搜索但没有找到任何东西。

下面是我的个人表单类型。我要做的是以下。我创建了第一个实体字段类型，并将映射属性设置为 false 并过滤实体以获取部门。然后我创建另一个实体类型，称为本地化。默认情况下，我过滤实体以获取任何内容（''）。然后我要做的是使用 Jquery 来填充它。但不幸的是，我遇到了与其他伙伴相同的问题（见上文）。

```
use Symfony\Component\Form\FormBuilderInterface;
use FOS\UserBundle\Form\Type\RegistrationFormType as BaseType;
use Doctrine\ORM\EntityRepository;
use Auth\GeoBundle\Form\LocalisationType;

class RegistrationFormType extends BaseType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        parent::buildForm($builder, $options);

        $builder->add('departement', 'entity', array(
            'mapped' => false,
            'empty_value' => '',
            'class' => 'AuthGeoBundle:Localisation',
            'property' => 'departement',
            'query_builder' => function ($repository) {
                return $repository
                    ->createQueryBuilder('e')
                    ->add('groupBy', 'e.departement')
                ;
            },
        ));

        $builder->add('localisation', 'entity', array(
            'empty_value' => '',
            'class' => 'AuthGeoBundle:Localisation',
            'property' => 'formLabel',
            'query_builder' => function ($repository) use ($dpt) {
                return $repository
                    ->createQueryBuilder('e')
                    ->where('e.departement = :dpt')
                    ->setParameter('dpt', '')
                    ->add('orderBy', 'e.ville ASC')
                ;
            },
        ));

        //some other fields here...
    }

    public function getName()
    {
        return 'auth_user_registration';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:39:32.737

我终于设法使用表单事件找到解决方案。[我在http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)上玩过“教程”并让它工作:) 下面是我使用的代码，以防有人感兴趣。

我的表单类型：

```
<?php
//src/Auth/UserBundle/Form/Type/RegistrationFormType.php
namespace Auth\UserBundle\Form\Type;

use Symfony\Component\Form\FormBuilderInterface;
use FOS\UserBundle\Form\Type\RegistrationFormType as BaseType;
use Doctrine\ORM\EntityRepository;
use Auth\GeoBundle\Form\LocalisationType;

use Auth\UserBundle\Form\EventListener\IsAdminFieldSubscriber;

class RegistrationFormType extends BaseType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        parent::buildForm($builder, $options);

        //NE PAS EFFACER -> exempled e comment ajouter un champ qui n'a rien à voir avec nos entitys
        //$builder->add("firstName", "text", array("mapped" => false));

        $builder->add('departement', 'genemu_jqueryselect2_entity', array(
            'mapped' => false,
            'empty_value' => '',
            'class' => 'AuthGeoBundle:Localisation',
            'property' => 'departement',
            'query_builder' => function ($repository) {
                return $repository
                    ->createQueryBuilder('e')
                    ->add('groupBy', 'e.departement')
                ;
            },
        ));

        $dpt = "";
        $builder->add('localisation', 'genemu_jqueryselect2_entity', array(
            'empty_value' => '',
            'class' => 'AuthGeoBundle:Localisation',
            'property' => 'formLabel',
            'query_builder' => function ($repository) use ($dpt) {
                return $repository
                    ->createQueryBuilder('e')
                    ->where('e.departement = :dpt')
                    ->setParameter('dpt', $dpt)
                    ->add('orderBy', 'e.ville ASC')
                ;
            },
        ));

        $builder->add('sexe', 'genemu_jqueryselect2_choice', array(
            'empty_value' => '',
            'choices'   => array(
                'homme'   => 'Homme',
                'femme' => 'Femme',
            ),
            'configs' => array(
                'minimumResultsForSearch' => 5,
            )
        ));

        $builder->add('date_naissance', 'date', array(
            'empty_value' => '',
            'widget' => 'choice',
            'attr' => array('class' => 'input-small'),
            'years' => range(1900,2100),
            'months' => range(1,12),
            'days' => range(1,31),
        ));

        $builder->add('petit_mot');

        $subscriber = new IsAdminFieldSubscriber($builder->getFormFactory());
        $builder->addEventSubscriber($subscriber);
    }

    public function getName()
    {
        return 'auth_user_registration';
    }
} 
```

我的事件监听器：

```
<?php
//src/Auth/UserBundle/Form/EventListener/isAdminFieldSubscriber.php
namespace Auth\UserBundle\Form\EventListener;

use Symfony\Component\Form\Event\DataEvent;
use Symfony\Component\Form\FormFactoryInterface;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;
use Symfony\Component\Form\FormEvents;

class IsAdminFieldSubscriber implements EventSubscriberInterface
{
    /**
     * @var FormFactoryInterface 
     */
    private $factory;

    /**
     * @param FormFactoryInterface $factory 
     */
    public function __construct(FormFactoryInterface $factory)
    {
        $this->factory = $factory;
    }

    /**
     * @return array
     */
    public static function getSubscribedEvents()
    {
        return array(
            FormEvents::PRE_BIND => 'preBind',
        );
    }

    /**
     * Called before form data is set
     *
     * @param DataEvent $event
     */
    public function preBind(DataEvent $event)
    {
        $data = $event->getData();
        $form = $event->getForm();

        if (null === $data) {
            return;
        }

        $dpt = $data['localisation'];

        $form->add($this->factory->createNamed('localisation', 'entity', null, array(
            'empty_value' => '',
            'class' => 'AuthGeoBundle:Localisation',
            'property' => 'formLabel',
            'query_builder' => function ($repository) use ($dpt)  {
                return $repository
                    ->createQueryBuilder('e')
                    ->where('e.id = :dpt_id')
                    ->setParameter('dpt_id', $dpt)
                    ->add('orderBy', 'e.ville ASC')
                ;
            },
        )));
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:58:55.160

You explain the problem yourself:

> "It's because the submitted value isn't included in the "array" returned by the query builder."

You can use [data transformers](http://symfony.com/doc/master/cookbook/form/data_transformers.html) to solve this issue.

# asp.net - ASP.NET - 为什么会突然找不到数据库文件？

> ID：14460539
> 
> 赞同：1
> 
> 时间：2013-01-22T14:11:52.730
> 
> 标签：asp.net, sql-server-ce

我正在使用 Microsoft SQL Server CE 构建一个 ASP.NET 应用程序，该应用程序需要一次运行一个进程 24 小时。昨天我开始了通宵测试。大约在凌晨 2:30，它抛出了以下异常：

> 找不到数据库文件。检查数据库的路径。[数据源=]

这是正在运行的代码片段。它是我用于数据访问的辅助库：

```
public class DataHelper
{
  private string _connectionString = ConfigurationManager.ConnectionStrings["myConnString"].ConnectionString;
  public void ExecuteNonQuery(string SQL)
  {
    using (SqlCeConnection _conn = new SqlCeConnection(_connectionString))
    {
      _conn.Open();
      using(SqlCeCommand _cmd = new SqlCeCommand(SQL, _conn))
      {
        _cmd.ExecuteNonQuery();
      }
    }
  }
} 
```

然后我的 web.config 中有这个

```
<configuration>
  <connectionStrings>
    <add name="myConnString" connectionString="data source=|DataDirectory|\myDB.sdf"/>
  </connectionStrings> 
```

对于我的测试，我使用 Visual Studio 开发 Web 服务器（不是 IIS）运行 ASP.NET 应用程序。该应用程序运行良好 12 小时多一点。然后突然之间它抛出了上述异常。有什么想法为什么突然找不到数据库？我的第一个想法是VS开发Web服务器回收了应用程序池或其他东西，现在系统丢失了连接字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:24:58.037

不确定这是否真的是对原始问题的回答，但我最终将长期运行的应用程序的内容拆分到 Windows 服务中托管的 WCF 服务中。现在我没有原来的问题了。

# vb.net - 打开并保存问题

> ID：14460540
> 
> 赞同：1
> 
> 时间：2013-01-22T14:11:57.433
> 
> 标签：vb.net, winforms, bitmap, gdi+

我的 VB 项目中有一个功能，我可以在其中扫描图像，然后可以更改对比度。我扫描它并保存它*`C:\temp\my_img.tif`*。

在`winform`图像中显示为`PictureBox`.

如果我在对比函数集中`img.Save("C:\temp\my_img.tif", ImageFormat.Tiff)`得到*“GDI+ 中发生一般错误”。*. 但是，如果我将其设置`filename`为其他内容，它就可以正常工作。

那么，如何在保存之前释放使用过的图像呢？

整个功能，简而言之：

```
Sub setContrast(ByVal C As Single)
    'filename(1) ia a "global" variable that stores the used file path, in this case "C:\temp\my_img.tif"

    Dim img As Image = Image.FromFile(filename(1)) '<--- I get the image

    'A bunch of contrast stuff in some rows.....

    'Here, i should release the image...

    img.Save(filename(1), ImageFormat.Tiff) '<---Tries to save

    PictureBox1.Refresh()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:54:29.423

使用不同的文件名保存它，然后，如有必要，删除旧文件并重命名新文件以匹配旧文件，`Disposed`预先`Image`拥有。

来自[`Image.FromFile`](http://msdn.microsoft.com/en-us/library/stf701f5.aspx)：

> 该文件保持锁定状态，直到[`Image`](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx)被释放。

`Image`如果同一个实例试图`Save`返回文件，则其他任何地方都没有任何措辞可以解决此问题。

# c++ - 像虚拟成员（结构）

> ID：14460547
> 
> 赞同：3
> 
> 时间：2013-01-22T14:12:23.277
> 
> 标签：c++, oop, inheritance

我有具有基本成员和功能的 A 类：

```
class A{
public:
    typedef struct{
        int aa;
        int bb;
    } stEntry;
    stEntry entry;

    void function1();
    void function2();
}; 
```

比应该扩展包括结构 stEntry 的 A 类的 B 类...

```
class B : public A{
public:
    typedef struct :stEntry
    {
        int cc;
    } stEntry;
    stEntry entry;

    void function3();
}; 
```

进而：

```
int main() {
    A a;
    B b;
    a.entry.aa = 1;    
    b.entry.aa = 2;
    b.entry.cc = 3;

    cout << "class A:"<<sizeof(a)<< endl;
    cout << "class B:"<<sizeof(b)<< endl;

    return 0;
} 
```

我明白了

```
class A:8
class B:20 
```

所以 B 类包含 2 个实例 - 8 字节（A 类成员）+ 12 字节（B 类成员）。

有没有办法为 B 类扩展结构 stEntry？（没有 2 个实例）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:15:02.970

不，因为**您自己创建了两个实例**。基类有一个实例，派生类有一个实例（扩展基类内部类的类）。

你不能在它之外修改基类的结构——一旦你定义了它，它就保持不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T14:27:17.957

有点，具有虚拟继承：

```
struct stEntryBase {
    int aa;
    int bb;
};

struct A : virtual stEntryBase {
    typedef stEntryBase stEntry;

    void function1();
    void function2();
};

struct stEntryDerived : virtual stEntryBase {
    int cc;
};

struct B : A, stEntryDerived {
    typedef stEntryDerived stEntry;

    void function3();
}; 
```

如果你想去另一个层次的继承，那么`B`几乎可以从`stEntryDerived`.

现在您必须将字段称为`a.aa`, `b.cc`，没有成员`entry`。此外，这些`stEntry`类型不再是 POD（因此`bb`并且`cc`可能不再在内存中相邻）。最后，由于虚拟继承而增加的大小实际上可能大于两个`int`s。

您可以做的`stEntryDerived*`是`stEntryDerived&`从`B`. 然后，该指针/引用可用于访问`aa`、`bb`和`cc`作为 的成员`stEntryDerived`，而用户无需了解`B`。所以你已经以一定的代价实现了接口的分离。

# javascript - jCarousel 隐藏物品

> ID：14460550
> 
> 赞同：1
> 
> 时间：2013-01-22T14:12:26.107
> 
> 标签：javascript, jquery, jcarousel

我正在使用 jCarousel 来显示可从某些条件中选择的产品列表。条件可以隐藏/显示用于创建轮播的 ul 项目。

在列表中有许多隐藏项的情况下，用户可以将列表滚动到空白页。

我想知道，如果有一个简单的解决方案？如何告诉 jCarousel 只使用可见项目作为计算有多少页的计数？谢谢

# ios - 将 NSString 转换为整数

> ID：14460555
> 
> 赞同：0
> 
> 时间：2013-01-22T14:12:35.253
> 
> 标签：ios, objective-c, parsing

我正在解析一些 XML，其中包含格式化`100,000+`为 NSString 的数字。我想将这些值转换为我用它们计算的整数。既然有“，”和“+”，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:18:48.980

试试这个代码

```
NSMutableString* string = [NSMutableString stringWithString: @"100,000+"];
[string replaceOccurencesOfString: @"\," withString: @"" options: 0 range: NSMakeRange(0, [string length] ) ];
[string replaceOccurencesOfString: @"\+" withString: @"" options: 0 range: NSMakeRange(0, [string length] ) ];

NSInteger intValue = [string integerValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:18:36.703

你总是可以去掉你不想要的字符：

```
[yourStringObject stringByReplacingOccurrencesOfString:@"+" withString:@""]; 
```

然后它很简单：

```
[yourStringObject intValue]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:17:43.560

它们总是用`+`? 您可以检查该符号（或您可能拥有的其他符号）的字符串并将其删除，然后正常转换它。

这是一些代码：

```
NSString *value = @"100,100+";
unichar lastChar = [value characterAtIndex:value.length - 1];
if (lastChar < '0' || lastChar > '9') // check for any symbol
    value = [value substringToIndex:characterAtIndex:value.length - 1]; // remove it

value = [value stringByReplacingOccurrencesOfString:@"," withString:@"."]; // in case intValue doesn't handle commas, not sure if necessary
NSInteger result = [value intValue]; 
```

# delphi - 如何管理外部申请表的大小和位置？

> ID：14460556
> 
> 赞同：2
> 
> 时间：2013-01-22T14:12:38.093
> 
> 标签：delphi

从用 DelphiXE2 编写的中央主 gui 应用程序中，我想以 MDIChild/Tabbed 样式管理（大小、位置）许多主机外部应用程序表单（delphi6、delphiXE2）。我的想法是在托管外部表单的主 gui 应用程序内管理“虚拟”面板（或表单），“托管”是指将虚拟表单的大小和位置锚定到外部表单。

实现这一目标的一些想法？

# ssis - 如何从 ssis 生成平面文件多个标题？

> ID：14460560
> 
> 赞同：0
> 
> 时间：2013-01-22T14:12:46.980
> 
> 标签：ssis

大家好，

我需要生成可以有多个标题行的平面文件，如下所示

```
Head|123|
Detail|qwe|123|234|aaa
Head|123|
Detail|qwe|123|234|aaa
Head|123|
Detail|qwe|123|234|aaa 
```

我如何在 ssis 中做到这一点？

# delphi - 如何在表单上绘制透明文本？

> ID：14460561
> 
> 赞同：2
> 
> 时间：2013-01-22T14:12:51.720
> 
> 标签：delphi, canvas, label

有没有办法在有一些控件的表单上绘制透明文本？如果我使用`TLabel`控件，它将始终显示在表单上的控件后面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T17:19:04.577

您不能使用`TLabel`控件，因为它不是窗口控件，因此它将被窗体的每个窗口子控件隐藏。你可以使用 a `TStaticText`，它确实是一个窗口控件（一个`STATIC`控件），但我想要让它真正透明有点困难。

您可以为此使用分层窗口：

1.  创建一个新的 VCL 项目，并向其中添加一堆窗口控件。

2.  在项目中创建一个新表单，名为`splash`. 设置`BorderStyle`为`bsNone`，并将字体名称、大小和颜色设置为您想要的任何内容（例如，Segoe UI、42、红色）。

3.  添加公共方法

    ```
    procedure Tsplash.UpdateSplash(const Str: string);
    var
      R: TRect;
      P: TPoint;
      S: TPoint;
      bm: TBitmap;
      bf: TBlendFunction;
      EXSTYLE: DWORD;
      x, y: integer;
      pixel: PRGBQuad;
      TextRed,
      TextGreen,
      TextBlue: byte;
    begin
      EXSTYLE := GetWindowLong(Handle, GWL_EXSTYLE);
      SetWindowLong(Handle, GWL_EXSTYLE, EXSTYLE or WS_EX_LAYERED);

      R := ClientRect;

      bm := TBitmap.Create;
      try
        bm.PixelFormat := pf32bit;
        bm.SetSize(ClientWidth, ClientHeight);

        bm.Canvas.Brush.Color := clBlack;
        bm.Canvas.FillRect(ClientRect);

        bm.Canvas.Font.Assign(Self.Font);
        bm.Canvas.Font.Color := clWhite;
        DrawText(bm.Canvas.Handle, PChar(Str), Length(Str), R,
          DT_SINGLELINE or DT_VCENTER or DT_CENTER or DT_WORD_ELLIPSIS);

        TextRed := GetRValue(Font.Color);
        TextGreen := GetGValue(Font.Color);
        TextBlue := GetBValue(Font.Color);

        for y := 0 to bm.Height - 1 do
        begin
          pixel := bm.ScanLine[y];
          x := 0;
          while x < bm.Width do
          begin
            with pixel^ do
            begin
              rgbReserved := (rgbRed + rgbGreen + rgbBlue) div 3;

              rgbBlue := TextBlue * rgbReserved div 255;
              rgbGreen := TextGreen * rgbReserved div 255;
              rgbRed := TextRed * rgbReserved div 255;
            end;

            inc(pixel);
            inc(x);
          end;
        end;

        P := Point(0, 0);
        S := Point(bm.Width, bm.Height);
        bf.BlendOp := AC_SRC_OVER;
        bf.BlendFlags := 0;
        bf.SourceConstantAlpha := 255;
        bf.AlphaFormat := AC_SRC_ALPHA;
        UpdateLayeredWindow(Handle, 0, nil, @S, bm.Canvas.Handle, @P, 0, @bf,
          ULW_ALPHA)
      finally
        bm.Free;
      end;
    end; 
    ```

4.  在您的主窗体中，添加私有方法

    ```
    procedure TForm1.CreateSplash;
    var
      p: TPoint;
    begin
      splash.Visible := true;
      UpdateSplash;
    end;

    procedure TForm1.UpdateSplash;
    var
      p: TPoint;
    begin
      if not (Assigned(splash) and splash.Visible) then Exit;
      p := ClientToScreen(Point(0, 0));
      splash.SetBounds(p.X, p.Y, ClientWidth, ClientHeight);
      splash.UpdateSplash('Sample Text');
    end; 
    ```

    并`UpdateSplash`在每次移动或调整表单大小时调用：

    ```
    procedure TForm1.WMMove(var Message: TWMMove);
    begin
      UpdateSplash;
    end;

    procedure TForm4.FormResize(Sender: TObject);
    begin
      UpdateSplash;
    end; 
    ```

最后，你可以做，只是尝试一下，

```
procedure TForm1.FormClick(Sender: TObject);
begin
  if splash.Visible then
    splash.Hide
  else
    CreateSplash;
end; 
```

![示例截图](../Images/76153f88f31d02c7429b6f443d023b0a.png)

[编译演示EXE](https://privat.rejbrand.se/layeralpha.exe)

# javascript - 如何在 JavaScript InfoVis Toolkit 中覆盖节点深度

> ID：14460563
> 
> 赞同：2
> 
> 时间：2013-01-22T14:12:56.663
> 
> 标签：javascript, infovis

![请参阅附图。](../Images/430e317caab691570e7a87897d5f841e.png)

在第 2 级（0 是中心），我们有 BT 和 BD。我想在 3 级显示 BD 并将 EN 移动到 4 级。这意味着我需要以某种方式更改这些节点的深度。

[http://www.ivangasparetto.com/jit-test](http://www.ivangasparetto.com/jit-test)

自定义 js 文件位于[http://www.ivangasparetto.com/jit-test/js/jit/jit-qorex.js](http://www.ivangasparetto.com/jit-test/js/jit/jit-qorex.js)

非常感谢

# c# - 如何最小起订量将被间接修改的属性？

> ID：14460566
> 
> 赞同：1
> 
> 时间：2013-01-22T14:13:06.277
> 
> 标签：c#, unit-testing, moq

我正在尝试做一件非常简单的事情：为属性设置初始值，调用回调应该修改属性值的方法，并在最后读取属性。

Test2 类正在使用 ITest1 来自动化一些操作。

```
public interface ITest1
{
    decimal Value { get; set; }
    void Increment();
}

public class Test2
{
    ITest1 test1;
    public Test2(Itest1 test1)
    {
        this.test1 = test1;
    }

    public void Increment()
    {
        this.test1.Increment();
    }
    public Get()
    {
       return this.test1.Value;
    }
} 
```

为了实现这种行为，我设置了这个测试：

```
[TestClass]
public class Test2Test
{
    private Test2 test2;
    private decimal value;

    [TestInitialize]
    public void Setup()
    {
        var test1Mock = new Mock<ITest1>();
        test1Mock.SetupGet(m => m.Value).Returns(value);
        test1Mock
            .Setup(m => m.Increment())
            .Callback(() => value++);

        this.test2= new Test2(test1Mock.Object);
    }

    [TestMethod]
    public void Get_Returns0()
    {
        Assert.AreEqual(0, this.test2.Get());
    }

    [TestMethod]
    public void Get_AfterIncrement_Returns1()
    {
        this.test2.Increment();
        Assert.AreEqual(1, this.test2.Get());
    }
} 
```

第二个测试总是返回 0。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T10:28:20.580

解决方案是返回动作而不是变量：

`.Return(() => value)`代替`.Return(value)`

答案在[这里](https://stackoverflow.com/questions/5578269/moq-how-to-manually-create-a-backing-property-using-setupget-setupset)找到。

# c++ - OpenCV 和 Boost 文件系统之间的冲突

> ID：14460567
> 
> 赞同：2
> 
> 时间：2013-01-22T14:13:06.917
> 
> 标签：c++, opencv, boost, mingw

我在使用 Boost 库时遇到问题，尤其是与 OpenCV 一起使用时的文件系统。显然，这个问题类似于[Boost、OpenCV 和 Eigen 库之间的冲突中描述的问题？](https://stackoverflow.com/questions/5327325/conflict-between-boost-opencv-and-eigen-libraries). 在那种特殊情况下，问题是通过在“使用命名空间”语句之前加上所有“#include”语句来解决的。就我而言，这从一开始就是以这种方式完成的。

我正在使用 OpenCV 2.4.3 和 Boost 1.48（已经尝试过 1.52 有同样的问题）。使用 Eclipse CPP 插件和 MinGW 在 Windows 7（64 位）中进行编程。

尝试构建我的程序时，出现以下错误：

```
C:\Boost\boost_1_48_0/boost/type_traits/decay.hpp:28:66: error: 'cvflann::<anonymous enum>' is/uses anonymous type
C:\Boost\boost_1_48_0/boost/type_traits/decay.hpp:28:66: error:   trying to instantiate 'template<class T> struct boost::remove_reference'
C:\Boost\boost_1_48_0/boost/type_traits/decay.hpp:38:17: error: 'cvflann::<anonymous       enum>' is/uses anonymous type
C:\Boost\boost_1_48_0/boost/type_traits/decay.hpp:38:17: error:   trying to instantiate    'template<class T> struct boost::remove_reference' 
```

在我的例子中，使用命名空间语句在 include 语句之后：

```
#include <opencv2/opencv.hpp>
#include <iostream>
#include <fstream>
#include <stdio.h>
#include <vector>
#include <boost/filesystem.hpp>
#include <boost/multi_index_container.hpp>

using namespace std;
using namespace cv;
using namespace boost::filesystem; 
```

任何关于如何解决这个问题的想法将不胜感激:D:D:D

问候，路易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:45:27.823

我建议您删除该部分：

```
using namespace std;
using namespace cv;
using namespace boost::filesystem; 
```

**并在代码中**使用*范围运算符* 。`::`

 **[这是这两种不同模式的示例](https://stackoverflow.com/a/41598/176769)。**

# windows-phone-8 - 在 Windows phone 8 中使用 App.Current.Terminate() 方法

> ID：14460571
> 
> 赞同：7
> 
> 时间：2013-01-22T14:13:13.373
> 
> 标签：windows-phone-8

由于 windows phone 8 为我们提供了这种以编程方式终止应用程序的方法，如果我们在应用程序中使用此方法来终止页面，而导航历史记录中没有返回条目，那么在应用程序提交时是否会出现任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:21:44.143

使用此调用时认证不会有任何问题，但请确保在调用此调用时已将所有数据保存在应用程序中，因为此调用有效地立即杀死您的应用程序 - ApplicationClosing 甚至处理程序不会在它之后引发！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:44:45.007

Why would you call Application.Terminate when navigating back with an empty back stack? Just let the app close itself. Seems a bit pointless to me to overuse Application.Terminate().

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T03:46:55.253

关于新的 Terminate 方法我不能说太多，但我确实有一个应用程序（注意：不是游戏）在某些点执行以下操作

```
private void Kill()
{
   new Microsoft.Xna.Framework.Game().Exit();
} 
```

这个应用程序通过了认证，没有任何问题。这是一个适用于 WP7 和 WP8 的应用程序，所以我无法使用 Terminate()。

# tridion - 使用 Tridion TMS 连接器，向发送翻译的文本添加注释

> ID：14460572
> 
> 赞同：5
> 
> 时间：2013-01-22T14:13:17.860
> 
> 标签：tridion, tridion-2011

我正在使用 Tridion TMS / WorldServer 连接器将翻译发送到 SDL。这工作正常。

但是，我还想随文本发送评论，例如“这是一个标题，请保持 30 个字符”或“使用俚语，让这听起来很酷”。这不是为了翻译。

我可以在为 TMS / World Server 生成的 XML 中添加注释字段值（Tridion 中的普通模式字段）并将其标记为“不用于翻译”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:48:39.853

我没有第一手经验，但据我了解（基于演示和问答环节），您可以通过创建 .anl 文件来做到这一点，该文件描述要翻译和不翻译的 xml 字段。

您需要定义一个带有属性的字段来指定它是否可翻译。当您定义一个元素/属性时，您需要指定`XLATE="NO"`不翻译。

我没有 TMS 二进制文件，但我相信安装有一些示例 .anl 文件。

希望这些信息有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:07:00.793

只要您不使用聚合功能，Tridion 翻译管理器就会将完整的组件 XML 发送到 TMS/World Server，包括您的不可翻译字符串。

如果您使用旧版本的 Tridion 和/或 TMS，TMS 上会有一个 ANL 文件，指定要翻译的文本。在较新的系统（未配置为在向后兼容模式下运行）上，组件 XML 将包含[ITS](http://www.w3.org/TR/its/)标记。

但不幸的是，Tridion 和 TMS（我不知道 World Server）目前都不支持[ITS 的 Localization Note 标记规则](http://www.w3.org/TR/its/#locNote-datacat)，因此翻译者不会看到注释，除非他们主动去寻找它们（这似乎是一个合理的期望）做...直到您查看他们预计在一天内转过的单词数）。

可以在 TMS 或 World Server 中插入一个工作流步骤，使用您的字段的命名约定来提取您的评论并将其附加到可翻译的字符串。但我不知道这是否可能——这将是 TMS 或 World Server 专家的问题。

# ember.js - emberjs 数组控制器

> ID：14460574
> 
> 赞同：2
> 
> 时间：2013-01-22T14:13:21.590
> 
> 标签：ember.js, ember-router

我正在使用最新的第四版 ember。在我的应用程序中，我有一些部分未连接到路由器，但我想将所有应用程序保持在一种样式中`ArrayController`并`Em.CollectionView`为它们使用和使用。

我试图做这样的事情：

```
var controller = Em.ArrayController.create({content: Em.A()});
Em.CollectionView.create({
    controller: controller 
});
controller.pushObject(Em.Object.create({
    title: 'test'
})) 
```

然后我得到一个错误，“控制器”没有容器属性。

**`ArrayController`没有就可以使用`Em.Router`吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:04:34.743

对的，这是可能的。我无法重现您指定的错误，但必须进行一些更改才能使事情正常进行。

```
var controller = Em.ArrayController.create({content: Em.A()});
controller.pushObject(Em.Object.create({title: 'dr plimpton'}));
controller.pushObject(Em.Object.create({title: 'raj'}));
controller.pushObject(Em.Object.create({title: 'howard'}));
controller.pushObject(Em.Object.create({title: 'leonard'}));

var myView = Ember.CollectionView.create({
  tagName: 'ul',
  content: controller,
  itemViewClass: Ember.View.extend({
    template: Ember.Handlebars.compile("{{view.content.title}}")
  })
});

myView.appendTo('body'); 
```

工作示例（基于 ember-1.0.0-pre.4）：http: [//jsbin.com/eticuw/1/edit](http://jsbin.com/eticuw/1/edit)

# javafx - progurad 是否在 javafx 中混淆 tableview

> ID：14460575
> 
> 赞同：0
> 
> 时间：2013-01-22T14:13:24.683
> 
> 标签：javafx, obfuscation, proguard

我创建了一个 JavaFX 应用程序，它有 TableView 来显示表数据。我正在使用 Proguard-4.8 混淆最终 jar，但无法在 TableView 中查看数据，我们为表数据绑定创建了公共静态类。在我的表格中，如果我有三列，则说两列显示文本，剩下的一列添加了按钮，然后在混淆后我只能看到按钮，其余两列显示空白行。

![在此处输入图像描述](../Images/8760cb23f4d0fee578872128a5f7386b.png)

没有混淆我的 jar 正确显示所有文本数据。我没有在 TableView 上应用 CSS。

有人可以建议我在哪里做错了吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:40:42.133

您在使用 PropertyValueFactory 吗？这意味着该属性是通过反射访问的，如果您对该属性进行混淆，则无法再找到它！

# machine-learning - 当训练集包含监督分类中的一些错误数据时，我该怎么办？

> ID：14460578
> 
> 赞同：3
> 
> 时间：2013-01-22T14:13:52.453
> 
> 标签：machine-learning, nlp, classification, document-classification

我正在做一个执行文本自动分类的项目，我有很多数据集，如下所示：

## 正文 | 分类名称

xxxxx... | AA

yyyyy... | BB

zzzzz... | AA

然后，我将使用上面的数据集生成一个分类器，一旦有新文本出现，分类器可以用正确的 CategoryName 标记新文本（文本是自然语言，大小在 10-10000 之间）

现在，问题是，原始数据集包含一些不正确的数据，（例如 AAA 应该标记为类别 AA，但它意外标记为类别 BB），因为这些数据是手动分类的。而且我不知道哪个标签是错误的，有多少百分比是错误的，因为我无法手动查看所有数据......

所以我的问题是，我该怎么办？

*   我可以通过某种自动方式找到错误的标签吗？
*   新数据到来时如何提高准确率和召回率？
*   如何评估错误数据的影响？（因为我不知道有多少百分比数据是错误的）
*   还有其他建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:24:41.273

显然，没有简单的方法可以解决您的问题 - 毕竟，如果您已经拥有可以检测错误分类的系统，为什么还要构建分类器。

你知道错误的分类对你的学习有多大影响吗？如果它们只有一小部分，它们应该不会对性能造成太大影响。（**编辑。**啊，显然你没有。无论如何，我建议你试一试——至少如果你在看到一个错误的结果时能识别出一个错误的结果。）

当然，您总是可以先训练您的系统，然后让它建议训练数据的分类。这可能会帮助您识别（并纠正）错误的训练数据。这显然取决于您拥有多少训练数据，以及它是否足够广泛以允许您的系统在有错误数据的情况下学习正确的分类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:57:51.710

您可以手动查看*任何*数据以找到一些错误标记的示例吗？如果是这样，假设错误标记存在某种模式，您也许可以训练第二个分类器来识别错误标记的数据。了解错误标记是否是一个纯粹的随机过程（它只是训练数据中的噪声）或者错误标记是否与数据的特定特征相关，这对您很有用。

如果您无法估计训练集的哪一部分实际上被错误标记，则无法评估错误标记数据对特定数据集的影响。您在评论中提到您有大约 500 万条记录。如果您可以正确地手动标记数百个，您可以在该数据集上训练您的分类器，然后查看分类器在引入随机错误标记后的表现。您可以使用不同百分比的错误标记数据多次执行此操作，以查看对分类器的影响。

定性地说，拥有大量错误标记的样本会增加过度拟合的影响，因此更重要的是不要将分类器过度拟合到数据集。如果您有一个测试数据集（假设它也存在标签错误），那么您可能会考虑将您的分类器训练为在测试数据集上低于最大分类精度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:29:09.823

人们通常通过拥有多个注释器并计算他们的一致性来处理您描述的问题（例如 Fleiss 的 kappa）。这通常被视为任何分类器性能的上限。如果三个人给了你三个不同的答案，你就知道这个任务很艰巨，你的分类器没有机会。

附带说明：如果您不知道有多少记录被错误标记，则您不了解问题的关键属性之一。随机选择 1000 条记录，并花一天时间查看它们的标签以获得一个想法。这真的是值得花的时间。例如，我发现每小时可以轻松查看 500 条带标签的推文。健康警告：这非常乏味，但一个上午的复习让我很好地了解了我的注释者是多么分心。如果有 5% 的记录不正确，则不是这样的问题。如果 50 是不正确的，你应该回去告诉你的老板，告诉他们这是不可能的。

作为另一个旁注：有人提到主动学习。我认为值得从文献中研究选项，记住标签可能必须改变。你说很难。

# android - 如何使用 onListItem 启动具有 ListView 值的新活动？

> ID：14460586
> 
> 赞同：1
> 
> 时间：2013-01-22T14:14:09.610
> 
> 标签：android, sqlite, listview, android-activity, simplecursoradapter

嗨，我有一个 android 应用程序，我在我的 Activity 中使用了一个 sqlite 数据库和一个 listview。现在我想使用 onListItemClick 但我不知道如何获取我单击的值并使用该值打开一个新活动:(

这是我的代码：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_show);

        mHelper = new DatenbankManager(this);
        mDatenbank = mHelper.getReadableDatabase(); 

        ladeDaten(); 

    } 
```

我的 ladeDatan 方法：

```
 private void ladeDaten() {
        Cursor KlassenCursor = mDatenbank.rawQuery(KLASSEN_SELECT_ROW, null); 
        startManagingCursor(KlassenCursor); 

        android.widget.SimpleCursorAdapter KlassenAdapter = new android.widget.SimpleCursorAdapter(this,
                android.R.layout.simple_list_item_1, 
                KlassenCursor, 
                new String[] {"name"},
                new int[] {
                android.R.id.text1
                });

        setListAdapter(KlassenAdapter);

    } 
```

这里我的 onListItemClick 不起作用:(

```
 @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

     String selection = l.getItemAtPosition(position).toString();
     Toast.makeText(this, selection, Toast.LENGTH_LONG).show();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:26:58.863

我认为您使用游标从数据库中获取数据。而不是使用`onListItemClick()`使用`onItemClickListener()`来获取 listView 项目详细信息，请使用以下代码

```
yourlistview.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                Cursor cursor = (Cursor) parent.getItemAtPosition(position);

               String itemid = cursor.getString(cursor.getColumnIndex("ColumnName");//Repeat for other values

              //Start the activity here
                Intent todayreview = new Intent(ReviewPayment.this,
                        ReviewandResend.class);
                todayreview.putExtra("iteid", itemid); 
                startActivity(todayreview);
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:42:33.713

要使用 onListItemClick 添加扩展 ListActivity。

```
public class MainActivity extends ListActivity 
```

但我认为最`onItemClick()`好像维诺所说的那样使用

# mongodb - MongoDB shell：检查更新是否成功

> ID：14460589
> 
> 赞同：4
> 
> 时间：2013-01-22T14:14:13.513
> 
> 标签：mongodb

类似于[MongoDB 更新：如何检查更新是成功还是失败？](https://stackoverflow.com/questions/2962414/mongodb-update-how-to-check-if-an-update-succeeds-or-fails)但对于默认的 mongodb shell。db.collection.update() 将在两种情况下静默执行：查询找到文档时和未找到文档时。两次更新后 getLastError 也为空。

如何在不重新查询集合的情况下发现某些内容实际上已更新？

我正在使用 MongoDB`2.0.4`版本`Ubuntu 12.04`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T14:44:05.573

这[`db.getLastErrorObj()`](http://docs.mongodb.org/manual/reference/method/db.getLastErrorObj/)是您想要调用以获取更新结果的内容。它返回一个如下所示的对象：

```
{
    "updatedExisting" : true,
    "n" : 2,
    "connectionId" : 35,
    "err" : null,
    "ok" : 1
} 
```

`n`是更新文档的数量。

# java - 无法在java中使用完整路径打开文件

> ID：14460593
> 
> 赞同：-3
> 
> 时间：2013-01-22T14:14:27.803
> 
> 标签：java, file

这是我现在拥有的代码：

```
File file= new File("C:\Documents and Settings\vasanth\Desktop\s.PNG");
BufferedImage image;

try {
    image = ImageIO.read(file);
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

Raster raster = image.getRaster();

BufferedImage image2 = new BufferedImage(image.getWidth(), image.getHeight(), BufferedImage.TYPE_INT_RGB);
WritableRaster raster2 = image2.getRaster();
BufferedImage image3 = new BufferedImage(image.getWidth(), image.getHeight(), BufferedImage.TYPE_INT_RGB);
WritableRaster raster3 = image3.getRaster(); 
```

我应该保留我在这里使用的图像吗？即使我已经指定了图像文件的完整路径，我仍然会收到错误消息。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T14:16:12.353

在 java 字符串中使用双斜杠。单斜杠被认为是字符转义序列。

所以你应该像这样打开文件：

```
File file= new File("C:\\Documents and Settings\\vasanth\\Desktop\\s.PNG"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T14:18:37.533

除了 Ivaylo 所说的，看看这部分代码：

```
BufferedImage image;
try {
    image = ImageIO.read(file);
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
Raster raster = image.getRaster(); 
```

你有没有考虑过如果你有一个异常分配会发生什么`image`？您将在 null 对象上调用一个方法，这将使用`NullPointerException`.

如果发生异常，您需要停止对图像执行的任何操作。您可以将所有这些都放在`try...catch`块中以解决此问题。

# git - 带点的 Git 结帐

> ID：14460595
> 
> 赞同：44
> 
> 时间：2013-01-22T14:14:40.293
> 
> 标签：git

`git`下一个命令有什么区别：

```
git  checkout branch
git  checkout branch .
git  checkout  .  #<-- used at the branch 
```

为什么当我将不同的分支与第一个分支签入不同的文件夹时，我错过了一些文件。
但是当我使用第二个命令时，一切都好吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-22T14:30:45.680

[`git checkout`(1)](http://git-scm.com/docs/git-checkout.html)无论是否给定路径说明符，都会做非常不同的事情。

1.  仅使用**分支说明符**( `git checkout branch`) 它将当前工作目录切换到指定分支，*如果可能，保持本地更改，否则失败*。如果你已经在`branch`，它什么都不做。它仅修改工作目录中不同的文件，`HEAD`并且`branch`如果其中任何一个具有本地修改（索引或不索引），则失败。
2.  使用**路径说明符**，它将`.`用指定的内容覆盖所有匹配的文件（所有文件匹配）：
    1.  仅使用**路径说明符**( `git checkout .`) 它从索引写入内容。也就是说，它撤消了未分级的本地修改。要撤消分阶段的修改，请使用`git reset`路径说明符。
    2.  使用**分支和路径说明符**( `git checkout branch .`) 它在指定的修订版中写入内容。它*不会*修改 where`HEAD`点，因此如果`branch`与 不同`HEAD`，之后会有未分级的更改。

请注意，[手册页](http://git-scm.com/docs/git-checkout.html)区分了使用 -b/--branch 选项和 -p/--patch 选项的其他情况，但这些大多是上述情况的直接扩展。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-08-13T12:07:22.500

上面的解释很好，但让我用例子来解释。

`git checkout`可与文件夹和分支一起使用。

假设有`index.html`文件和`dev`文件夹。

如果我不小心更改`index.html`并且我想撤消该更改，我将简单地运行`git checkout index.html`. 它会让我的文件恢复到原来的形式。

现在假设我在 dev 文件夹中进行了一些更改，并希望将这些更改返回到 dev 文件夹中。如果我将使用`git checkout dev`并且如果有任何`dev`分支，那么它将签出该**dev 分支**而不是名为`dev`.

所以我宁愿跑 `git checkout -- dev`

现在这个裸双破折号代表当前分支。所以上面的命令是从 git 询问的，请给我当前分支的 'dev' 命名文件夹。

让我们谈谈您的用例。

`git checkout branch`此命令将简单地检查名为“branch”的分支

`git checkout branch .`第二个命令将告诉 git 请`.`从名为“branch”的分支中检出或当前文件夹名称

`git checkout . #<-- used at the branch`正如你所说的，你首先切换到名为“branch”的分支，`git checkout branch`然后你只是在做`git checkout .`现在没有命名的分支`.`，所以它只会从当前分支中下拉当前文件夹名称。

# sql - CAST (CASE WHEN Id is in (SELECT RefId FROM RefTable WHERE RefId =someId)THEN 0 ELSE 1 END AS bit

> ID：14460599
> 
> 赞同：1
> 
> 时间：2013-01-22T14:14:54.633
> 
> 标签：sql, stored-procedures

嗨，我的程序有问题

**存储过程：**

```
SELECT dbo.Table1.*,
       CAST (CASE WHEN Table1.Id IS IN ( SELECT Id 
                                         FROM dbo.Table2 
                                         WHERE RefRolleId =@Id) 
              THEN 0 ELSE 1 END AS bit) AS selected
FROM   dbo.Table1 
```

**错误：** IN-Keyword 附近的语法错误 THEN-Keyword 附近的错误语法

我用谷歌搜索，但我没有找到一个带有 IN 运算符的案例的例子，有人可以告诉我有什么问题吗

任何意见是极大的赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:15:31.640

只需删除`IS`它就会起作用（*这只是为了直接回答您的问题，而不是别的（例如性能改进）*）

```
SELECT dbo.Table1.*,
       CAST (CASE WHEN Table1.Id  IN ( SELECT Id 
                                         FROM dbo.Table2 
                                         WHERE RefRolleId =@Id) 
              THEN 0 ELSE 1 END AS bit) AS selected
FROM   dbo.Table1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T14:19:25.283

@JW 是正确的，但我建议更改您的查询，例如：

```
SELECT DISTINCT T.*,
       CAST (CASE 
                WHEN T2.Id IS NOT NULL
                THEN 0 
                ELSE 1 
             END AS bit) AS selected
FROM   dbo.Table1 T
   LEFT JOIN dbo.Table2 T2 ON T.Id = T2.Id AND T2.RefRolleId =@Id 
```

我认为这可能会产生更好的性能。

祝你好运。

# php - 一键插入多个数据库（PHP/MySQL）

> ID：14460602
> 
> 赞同：0
> 
> 时间：2013-01-22T14:15:03.410
> 
> 标签：php, mysql, insert

我需要使用一个按钮将数据插入到同一数据库中的两个不同表中，但不知道如何操作。

我的两个插入命令如下所示：

```
$insertSQL1 = sprintf("INSERT INTO table2...blah blah blah..."); // this is a whole load of info from the form
$insertSQL2 = ('INSERT INTO table2...blah blah blah...'); // this is some more data, including an array 
```

我尝试将它们放入“BEGIN WORK... COMMIT WORK”函数中，如下所示：

```
$insertSQL = "BEGIN WORK;
".$insertSQL1.";
".$insertSQL2.";
COMMIT WORK;"; 
```

...但我总是得到以下错误：

**您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在“INSERT INTO ...”附近使用的正确语法**

我一生都无法弄清楚实际的语法错误是什么。关于更好的方法的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:16:47.923

使用不能在一次调用中执行多个查询（使用普通查询调用）。使用此语法

```
insert into table2 (col1, col2, col3)
values (1, 2, 3),
       (4, 5, 6) 
```

用一个查询插入多条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:02:45.440

You will have to use two insert functions for that:

```
$query1 = "INSERT INTO table1 (col1, col2) values (1,2)";
$query2 = "INSERT INTO table2 (col1, col2) values (1,2)";
mysql_query($query1);
mysql_query($query2); 
```

I used mysql_query for simplicity, you have to use your own DB functions for that of course. It can still be done with one click, but you need to use 2 SQL statements. Just do this:

```
if ($clicked==true){
   //insert queries
} 
```

# ruby-on-rails - 视频内容重的网站

> ID：14460605
> 
> 赞同：0
> 
> 时间：2013-01-22T14:15:10.477
> 
> 标签：ruby-on-rails, video-streaming

对于开发像 youtube 这样的视频内容重的网站，从性能和支持视频转换/压缩插件的角度来看，哪种语言/框架可能是更好的选择。一些值得考虑的点可能是。

*   CPU 与 I/O 时间
*   支持压缩/转换插件（现有的 mods/gems/libs）
*   尽管欢迎输入，但易于学习并不是很重要

我知道这个问题听起来有点主观，但我的目的是从有开发类似网站经验的人那里了解所涉及的技术细节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:58:47.277

不幸的是，没有一两个 API/库/框架可以组合在一起来制作视频服务网站。

这总是需要大量参与堆栈的所有级别：

服务器后端需要解决以下问题：

*   视频编码
    *   FFMPEG 或 MPlayer 经验，可将任意数量的视频格式编码为 FLV 或更新的 h264 以支持 HTML5 格式
    *   在后台进程中对视频进行转码的可靠机制；最初在一台服务器上，但随着您的服务扩展，最终在多台服务器上
    *   视频大小调整
*   带宽管理来限制连接，以使视频流向用户
*   存储视频文件和文件分片和命名机制
*   API 服务器 - 像 Rails、Django 或 NodeJS Express 之类的东西，用作 Web 客户端和视频编码/服务服务之间的 JSON 服务层。

前端需要解决以下问题：

*   跨多个操作系统（Windows、OSX、Linux、平板电脑、移动设备）和平台（IE、Chrome/Safari、Firefox、Opera）可靠地播放视频，并支持旧版浏览器
*   DRM - 您的视频是免费的还是商业的？如果是后者，这是另一个需要解决的问题

我强烈建议您在后端使用事件驱动系统，因为开发支持并发的代码要容易得多。NodeJS 将是一个不错的选择。值得将 NodeJS 的[node-fluent-ffmpeg](https://github.com/schaermu/node-fluent-ffmpeg)模块作为一个很好的起点。

至于你的前端，我建议使用 Backbone.js 或 AngularJS 等框架来开发你的 web 应用程序。

几年前我尝试过类似的事情时，这是一次有趣且充满挑战的旅程。祝你旅途愉快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:32:05.757

对于这样的网站，我想需要选择几种工具来完成这项工作。对于网络，您可以使用任何框架，所以 rails 就可以了，要处理视频，您需要 ffmpeg 或 transconding 之类的东西来转换视频。对于流媒体，如果您可以使用 HTML5，请检查[此问题](https://stackoverflow.com/questions/5858936/html5-live-streaming)，否则您将需要一个具有 Flash 后备功能的播放器。

请记住，存储和 CPU 方面的重要部分是视频压缩/转换。

# c# - Web.config 中的站点地图问题

> ID：14460608
> 
> 赞同：0
> 
> 时间：2013-01-22T14:15:18.300
> 
> 标签：c#, asp.net, visual-studio-2010

Web.config 的问题。站点地图不工作。VS2010。

```
<siteMap defaultProvider="XmlSiteMapProvider" enabled="true">
        <providers>
          <add name="XmlSiteMapProvider"
            description="Default SiteMap provider."
            type="System.Web.XmlSiteMapProvider "
            siteMapFile="Web.sitemap"
            securityTrimmingEnabled="true" />
        </providers>
 </siteMap> 
```

我认为它没有看到“Web.sitemap”。标记“添加”中的智能感知仅建议 lockAllAttributesExcept、lockAllElementsExcept、lockAttributes、lockElements、lockItem - 参数。但不建议参数描述、siteMapFile、securityTrimmingEnabled。

可能是什么原因？请建议。

Web.config 内容为：

```
<?xml version="1.0"?>

<configuration>
  <connectionStrings>

    <add name="SqlRoleManagerConnection" 
         connectionString="Data Source=server_name;Integrated Security=false;Initial Catalog=DB_XXX;User ID=User_XXX;Password=PASSWD_XXX" 
         providerName="System.Data.SqlClient" />    
  </connectionStrings>

  <location path="Approver.aspx">
      <system.web>
          <authorization>
              <allow roles="Approvers"/>
              <deny users="*"/>
          </authorization>
      </system.web>
  </location>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <authentication mode="Windows"/>

    <authorization>
        <deny users="?"/>
    </authorization>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>

    <roleManager enabled="true" defaultProvider="SqlRoleManager">
      <providers>
        <clear/>
        <add name="SqlRoleManager" type="System.Web.Security.SqlRoleProvider" connectionStringName="SqlRoleManagerConnection" applicationName="HSE_Monitoring_Application" />
      </providers>

    </roleManager>

    <siteMap defaultProvider="XmlSiteMapProvider" enabled="true">
      <providers>
        <add name="XmlSiteMapProvider" 
          description="Default SiteMap provider."
          type="System.Web.XmlSiteMapProvider"
          siteMapFile="Web.sitemap"
          securityTrimmingEnabled="true" />
      </providers>
    </siteMap>

  </system.web>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

Web.sitemap 内容为：

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >

  <siteMapNode url="default.aspx" title="Home">
      <siteMapNode url="approver.aspx" title="Approver Expenses" roles="Approvers" />
      <siteMapNode url="audit/auditor.aspx" title="Audit Page" roles="Auditors" />
      <siteMapNode url="admin/admin.aspx" title="Admin Manager" roles="Admins" />
  </siteMapNode>

</siteMap> 
```

带着敬意！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:59:27.420

The `web.sitemap` file is the default site-map provider for ASP.NET, so it will work without specifying the `<siteMap ...` in `web.config`. Also, consider using `~/` as a prefix on your paths:

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
  <siteMapNode url="~/default.aspx" title="Home">
      <siteMapNode url="~/approver.aspx" title="Approver Expenses" roles="Approvers" />
      <siteMapNode url="~/audit/auditor.aspx" title="Audit Page" roles="Auditors" />
      <siteMapNode url="~/admin/admin.aspx" title="Admin Manager" roles="Admins" />
  </siteMapNode>
</siteMap> 
```

# javascript - 使用正则表达式查找多音节词

> ID：14460614
> 
> 赞同：0
> 
> 时间：2013-01-22T14:15:28.687
> 
> 标签：javascript, regex, nlp

我正在尝试使用正则表达式来查找一段文本中的多音节词的数量，我的代码大部分时间都可以工作，但无法识别某些多音节词：

```
polySyllableCount = lWords2.replace(/(?:[^laeiouy\s]es|ed|[^laeiouy\s]e)$/, ''); 
```

是我用来计算音节的，并且

```
polySyllableCount = lWords2.replace(/^y/, ''); 
```

替换前导的 Y，因此它们不被计算在内，

最后：

```
try 
{
polySyllables = polySyllableCount.match(/[aeiouy]\S[aeiouy]\S[aeiouy]/g).length;
}
catch(err)
{
console.log("No Poly Words")
} 
```

计算多音节单词的数量。

我的思考过程是它会在一个（修改过的）单词中找到任何 3 个元音，由除空格以外的任何内容分隔，给我多音节词的数量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:11:05.767

请注意 \S 也匹配标点符号，如 . 和 ，这可能是一些错误检测的原因。例如：

```
'ame.na mana miu' //'ame.na' will be treated like one word with your regexp 
```

您可以将 \S 替换为 \w 以获得更好的结果。当然 \w 也会包含数字，如果你想要非常准确，你可以使用 [az]。您也正在使用 /g 开关。您需要将 /i 添加到它，以便它也搜索 AEIOUY 所以它将是

```
/...regexp.../gi 
```

您可以在这里了解更多信息：javascriptkit.com/javatutors/redev2.shtml

# php - 使用 CodeIgniter 表单验证的自定义错误消息

> ID：14460620
> 
> 赞同：14
> 
> 时间：2013-01-22T14:15:42.467
> 
> 标签：php, forms, codeigniter, validation

我想在我的 CodeIgniter 表单中制作一些自定义错误消息。我试过使用

`$this->form_validation->set_message('is_unique[users.username]', 'The username is already taken');`

但是我无法让它工作。

编辑`form_validation_lang.php`文件还不够好，因为`is_unique`用户**名已经被**用作用户名，并且**电子邮件已经**为邮件注册。

如何制作此自定义错误消息？

这是我的代码片段：

```
$this->form_validation->set_message('is_unique[users.username]', 'The username is already taken');

// Check if username has changed
if ($this->input->post('username') !== $user->username) {
    $this->form_validation->set_rules('username', 'Username', 'trim|required|min_length[4]|max_length[20]|is_unique[users.username]');
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-03-17T17:45:25.800

这样做的正确方法是传递字符串格式

```
$this->form_validation->set_message('is_unique', 'The %s is already taken'); 
```

所以，只有我们才能得到类似`"This Username is already taken"`or的消息`"This Email is already taken"`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-02-05T10:54:59.263

这是您仅为用户名设置消息错误的方式：

```
$this->form_validation->set_rules('username','Username','is_unique',array('is_unique' => 'The %s is already taken')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T07:57:27.953

这对我有用

```
$this->form_validation->set_message('is_unique', 'The username is already taken'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-30T16:52:39.220

最好像这样使用：

```
$this->form_validation->set_message('is_unique', 'The %s is already taken'); 
```

form_validation 随`%s`为字段设置的标签而变化。

希望这可以帮助！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-10T06:03:44.543

```
create a **form_validation.php** file and use this method:

"add_user_rule"   => [
    [
        "field" => "username",
        "label" => "Username",
        "rules" => "required|trim|is_unique[users.username]",
        "errors" => [
            'is_unique' => 'The %s is already taken.',
        ],
    ],
],

Thank You 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-26T10:21:02.797

您可以`validation_errors()`在使用检查验证后将自定义消息添加到字符串`$this->form_validation->run() == true`

```
if(YOUR_CONDITION){
   $this->form_validation->run();
   $err = validation_errors();
   $err = $err. '<p>Custom validation error message</p>'. PHP_EOL;
   $data['err'] = $err;
   $this->load->view('viewname', $data);
}
else if ($this->form_validation->run() == true ) {
        #code...
}
else.. 
```

将您的自定义消息设置为`$err`变量后，将其打印在您的视图上。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-03T04:52:39.763

您可以传递第三个参数来设置验证消息

```
$this->form_validation->set_rules(
        'username', 'Username',
        'required|min_length[5]|max_length[12]|is_unique[users.username]',
        array(
                'required'      => 'You have not provided %s.',
                'is_unique'     => 'This %s already exists.'
        )
); 
```

[在这里检查](https://codeigniter.com/userguide3/libraries/form_validation.html#cascading-rules)

# c# - 浮点转换 c#

> ID：14460621
> 
> 赞同：0
> 
> 时间：2013-01-22T14:15:43.883
> 
> 标签：c#, floating-point

> **可能重复：**
> [.Net 浮点到双转换](https://stackoverflow.com/questions/5061836/net-float-to-double-conversion)

我虽然我理解浮点但有人可以解释以下内容

```
float f = 1.85847987E+9F;
double d = Convert.ToDouble(f); 
```

d 现在转换为字符串 as `1858479872.0`。我假设额外的 2 是因为 double 不能准确地表示浮点数。

我的问题是为什么直接分配时它似乎能够重新代表相同的号码

```
double d = 1.85847987E+9; 
```

它完全显示为`185847987.0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:20:09.270

因为[`double`](http://msdn.microsoft.com/en-us/library/678hzkk9%28v=vs.71%29.aspx)可以，[`float`](http://msdn.microsoft.com/en-us/library/b1e65aza%28v=vs.71%29.aspx)也不能`1.85847987E+9`准确表示。

> 为什么编译器不抱怨“float f = 1.85847987E+9F;” 如果它不能正确地表示它

根据 C# 规范，第 4.1.6 节浮点类型

> 浮点运算符，包括赋值运算符，从不产生异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:28:03.320

因为浮点数存在于符号、尾数和指数之外。请参阅[Jon Skeet 在此处的回答](https://stackoverflow.com/a/390072/266143)如何提取这些值。

因为`1.85847987E+9F`，尾数为`7259687`，指数为`8`。然后`mantissa << exponent`等于`1858479872`。由于浮点数的精度[限制为 7 位](http://msdn.microsoft.com/en-us/library/b1e65aza(v=VS.100).aspx)，因此任何超过 7 位的数字的值取决于实现，而不是输入。您可以通过输入`123456789F`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:20:12.770

问题不是双重的，而是浮动的。浮点数限制为 32 位，而双精度使用 64 位。

# asp.net - 获取在线用户数（我将用户添加到数据库）

> ID：14460622
> 
> 赞同：1
> 
> 时间：2013-01-22T14:15:48.360
> 
> 标签：asp.net

我在数据库中创建一个表，将用户添加到数据库，当用户登录网站时，我将他们的代码添加到`Session`现在我如何才能获得在线用户的数量并获取他们的代码？

我使用下面的代码但不起作用

```
MembershipUserCollection users= Membership.GetAllUsers();
int a=Membership.GetNumberOfUsersOnline(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:20:55.820

解决方案可以是创建一个新的应用程序变量。您可以创建一个集合变量并在用户登录到您的应用程序时添加用户（使用`Session_start()`方法），并在会话超时时删除它们（`Session_end()`）。这两个方法在 Global.asax 文件中

关键是延迟。用户将在 session_end 被删除，因此这将是“浏览器关闭”和会话超时之间的延迟。此延迟将等于您的应用程序的会话生命周期。

# restler - API Explorer 中缺少响应和输入信息

> ID：14460625
> 
> 赞同：0
> 
> 时间：2013-01-22T14:15:51.893
> 
> 标签：restler, swagger

我正在使用最新版本的 Restler v3 (commit 0d79cd8)，但我遇到了一些问题，我的基于 Swagger 的 UI 看起来与示例中的相同。我注意到的两个问题是没有显示变量类型和@return 对象。

在 Restler 网站上，这是这两种工作的一个很好的例子：

[例子](http://restler3.luracast.com/examples/_009_rate_limiting/explorer/index.html#!/authors-v1/v1-authors_post)

相反，在我的*Actions*课程中，我得到了这个：

![在此处输入图像描述](../Images/0ee969301857daf9d2363f85516bb704.png)

然而，正如您从类的定义中看到的那样，指定了类型信息和响应对象：

```
class Actions {
    /**
    * LIST action types
    *
    * List all the action-types available
    *
    * @url GET /
    */
    function list_actions() {
        throw new RestException(501);
    }

    /**
     * GET today's Actions
     *
     * Get the set of actions done today
     *
     * @url GET /{user_id}
     * @param integer $user_id The user_id for whom the actions apply; you can insert the text "self" and it will resolve to the current/default user
     * @param string $time_of_day {@from url} Allow's you to optionally set a time-of-day; if set then actions are only returned after that. Time should be in the format of HH:MM:SS
     * @return ActionList
    */
    public function action_today ($user_id, $time_of_day = false )
    {
        throw new RestException(501, "Today's actions for user '{$user_id}' not implemented.");
    } 
```

我对 ActionList 类的定义是：

```
class ActionList {

    /**
     * Unique identifier of action
     *
     * @var     integer
    */
    public $action_id;
    /**
     * String based unique identifier
     *
     * @var     string
    */
    public $action_slug;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T02:14:00.757

如果您的类是版本化的，例如在命名空间 v1\Actions 中，您也必须在命名空间中注释返回类型，例如 @return v1\ActionList

# plugins - 来自不同插件的重复控制器名称

> ID：14460626
> 
> 赞同：3
> 
> 时间：2013-01-22T14:15:55.567
> 
> 标签：plugins, cakephp-2.3

我对 Cakephp2.3 的文件加载系统有疑问。

我有两个插件 - 我们称它们为“联系人”和“经理”，加载如下：

```
CakePlugin::load('Contacts');
CakePlugin::load('Managers'); 
```

它们每个都有一个名为“DashboardController.php”的控制器，带有一个 index() 操作。

当我尝试访问“联系人”的仪表板页面时，有时会看到以下错误：

```
Error: Class "ManagersAppController" not found 
```

即使网址看起来像这样：

```
http://mysite.com/contacts/dashboard 
```

我读到 Cakephp2.3 不支持命名空间，这可能会发生，因为我有两个同名的 php 类 (DashboardController.php)。同时，我知道 Cake 应该先映射插件名称，所以它应该能够处理重复的文件名。

你知道为什么我会看到这个随机错误吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T07:58:46.673

我刚刚从开发 CakePHP 的人那里找到了答案。实际上，您不能拥有两个具有相同名称的控制器或模型，即使它们位于不同的插件中。

这仅在 CakePHP2.x 中发生，我引用：

> 这是 Cake2.x 的一个已知限制和使用 App::uses() 的延迟加载方法

你可以在这里看到我的问题和他们的答案：http: [//cakephp.lighthouseapp.com/projects/42648-cakephp/tickets/3558-loading-file-from-a-different-plugin](http://cakephp.lighthouseapp.com/projects/42648-cakephp/tickets/3558-loading-file-from-a-different-plugin)

解决方案是重命名具有冲突名称的控制器/模型和/或使用插件名称命名插件中的所有控制器和模型（例如 DashboardController.php 将变为 ContactsDashboardController.php）

# css - 将外部 div 居中，'text-align:center' 未按预期工作

> ID：14460632
> 
> 赞同：8
> 
> 时间：2013-01-22T14:16:26.953
> 
> 标签：css, html, centering

我在 div 中有一段内容，目前位于左侧。 [小提琴。](http://jsfiddle.net/79x2a/1/)

我尝试添加一个容器 div，例如：

```
<div style='text-align:center; width:100px;'>[content]</div> 
```

但没有运气。也试过这个：

```
<div style='margin: 0px auto; width:100px;'>[content]</div> 
```

内容仍然左对齐。

这行得通，但我想找到使用 CSS 执行此操作的正确方法：

```
<div style='width:100px;' align='center'>[content]</div> 
```

协助表示赞赏。我很想用桌子来做这件事，但我需要打破旧习惯！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T14:21:00.667

如果您尝试使外部 div 相对于其父级居中（`body`在这种情况下），您应该将其横向边距设置为 auto：

```
body div{
    margin: auto;
} 
```

正如你[在这里看到的](http://jsfiddle.net/79x2a/5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T14:22:49.123

使 div 居中的工具实际上是`margin: 0 auto;`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:34:54.047

用另一个`div`“圆角”将内容包裹起来。

并`style="width: 100%; margin: 0 auto;"`为这个新的 div写

# ajax - 如何在不使用控制器的情况下动态加载局部视图？

> ID：14460635
> 
> 赞同：0
> 
> 时间：2013-01-22T14:16:40.807
> 
> 标签：ajax, asp.net-mvc

有一大块 html + js 代码。目标是仅在特定按钮单击时加载并显示它，因此无需每次都预加载它。

通常，我们可以使用 jquery/ajax 动态包含部分视图，但据我所知，它需要一个控制器。在这种情况下，不需要控制器，因为数据是静态的。

所以，问题是：是否有可能在特定事件（如按钮单击）上包含部分视图而无需通过控制器？

我们尝试的是为 ajax 请求提供部分视图的地址。然而它并没有帮助。

```
<div class="reportWindow"></div>

<script type="text/javascript">
    $("#feedback").click(function () {

        $.ajax({
            url: "@Url.Content("_Feedback")",
            type: 'GET',
            cache: false,
            success: function (result) {
                $("#reportWindow").html(result);
            }
        });
    });    
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:52:55.793

具有`cshtml`扩展名的 Partial 视图仍然是 Razor 视图，即使其中的内容是静态的，服务器仍然需要读取它并将其内容转换为 html（即使这意味着完全按原样复制并发送它）背部）

您需要的是一个`html`文件，然后您可以使用 javascript 或 jQuery 动态加载该文件：

```
$("#feedback").click(function () {
    $("#reportWindow").load('feedback.html'); 
}); 
```

请注意，这仍然会要求服务器提供 feedback.html，通常这不会与任何路由匹配，然后 IIS 将通过查找名为 feedback.html 的静态页面来解决请求！

# php - PHP：md5（和sha1）的输入字符串必须是纯字母数字？

> ID：14460637
> 
> 赞同：0
> 
> 时间：2013-01-22T14:16:46.173
> 
> 标签：php, md5, sha1

将 PHP 函数 md5()（和 sha1() 以及）与 'aabbccdd' 之类的字符串一起使用非常有效。但是，使用与 'a-b+ccdd' 相同的函数似乎不会产生一致的结果。

第一个问题：输入字符串是否必须是严格的字母数字，即 [AZ][az][0..9] ？

第二个问题：为什么我使用两个不同的php文件得到完全不同的结果，如下所示：

文件 1：

```
<?php
  $pwd = $_GET['pwd'];
  echo sha1($pwd); 
?> 
```

和文件 2（只是它的开头）：

```
<?php session_start(); 

  $username = $_POST["username"];
  $pass = $_POST["password"];
  $password = sha1($pass); 

  echo "<br>pwd = " . $pass . "<br>PWD(SHA1) = " . $password . "<br>"; 
```

有谁看到出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:19:27.673

MD5 很乐意接受您喜欢的任何输入。

您遇到了一个不同的问题：某些字符在通过 URL 发送时会被编码，例如“+”将被视为表示空格（“”），等等。

换句话说，您发送`a-b+cc`，但接收 PHP 脚本将“看到” `a-b cc`，因此输出`md5()`将与您期望的不同。

您必须先对字符串进行编码，或者在将字符串输入到`md5()`. 第二个选项更尴尬（你收到一个“”，并且不知道它是空格还是加号！）；因此，除非*绝对没有其他方法*，否则请在发送前尝试正确编码字符串。参见例如：[在 JavaScript 中编码 URL？](https://stackoverflow.com/questions/332872/how-to-encode-a-url-in-javascript)

# c# - 使用 jquery/ajax 在同一解决方案中的另一个项目中调用 ac#（或任何其他 .net）函数

> ID：14460647
> 
> 赞同：3
> 
> 时间：2013-01-22T14:17:11.633
> 
> 标签：c#, javascript, ajax, project, solution

有谁知道是否可以使用 jquery/ajax 在同一解决方案中的另一个项目中调用 ac#（或任何其他 .net）函数？

假设解决方案的名称是 ExampleSolution ，我调用目标函数的项目名称是 Project.Source ，目标项目的名称是 Project.Target ，目标函数的名称是`TargetFunction()`。

我尝试过`.js file`以下`Project.Source`：

```
 $.ajax({
            url: '/ExampleSolution/Project.Target/TargetFunction',            
            type: 'get',
            success: function (data) {
                $(document.body).append(data);
            }
   }); 
```

然后我以多种方式修改了 url-line，但从未成功。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:54:48.470

谢谢大家的快速回答。

我找到了解决这个问题的方法，我想分享它，以防将来有人遇到同样的问题。

在调用 $.ajax 函数之前的 .js 文件中，我在 window.location 的帮助下创建了一个变量，该变量指向正在运行的目标项目的目标函数的 url，并在 ajax 函数中使用该变量。所以你不要指向另一个项目。您指向正在运行的项目的 url。

就像听起来一样容易。

以下是解决方案：

```
 var url = window.location = 'http://localhost:13105/TargetFunction';

    $.ajax({
        url: url,
        type: 'get',
        success: function (data) {
            $(document.body).append(data);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:18:54.907

您只能调用 Code Behind 中的函数，因为它们是由 Web 服务器注册的。

如果您希望在 Code Behind 之外可以访问某个函数，则需要将其注册为 ASMX 或 WCF 服务。

请参阅[创建和使用您的第一个 WCF 服务](http://www.codeproject.com/Articles/42643/Creating-and-Consuming-Your-First-WCF-Service)以设置 WCF 服务。

设置并运行后，您可以使用 Ajax 来调用方法，就像在后面的代码中一样。

```
$.ajax({
        //Path to WCF Server and Target Method
        url: "http://localhost:PORT/wcfsvc/FooService.svc/Foo",
        type: 'get',
        contentType: 'application/json; charset=utf-8',
        success: function (data) {
            $(document.body).append(data);
        }
}); 
```

另请参阅：[将 jQuery 中的 WCF 用作 JSON](https://stackoverflow.com/questions/6904609/consuming-wcf-from-jquery-as-json)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:33:26.747

简短的回答是“不，这是不可能的”。前端代码（如 jQuery 和 AJAX）在客户端机器上运行，但 C# 函数是后端并在服务器上运行。他们之间没有直接的联系。

* * *

更长的答案是“不是直接的，但有办法做类似的事情。” 您最简单的选择是使用 AJAX 发布到服务器上的另一个控制器/操作，然后处理响应。这与您正在做的事情很*接近，但您稍微偏离了一点。*而不是 url 是一个函数，url 必须是您网站上的实际 url。以`/Functions/CallTargetFunction`示例为例，您将创建一个如下所示的控制器：

```
public class FunctionsController : Controller
{
    public ActionResult CallTargetFunction()
    {
        return Content(TargetFunction());
    }
} 
```

请注意，这样做意味着访问的**任何人**`http://yoursite.com/Functions/CallTargetFunction`都将获得该函数的结果。

# java - JSF/Primefaces - p:ajax 元素中的 ui:param

> ID：14460648
> 
> 赞同：5
> 
> 时间：2013-01-22T14:17:12.303
> 
> 标签：java, ajax, jsf, jakarta-ee, primefaces

我正在用 Java EE 6 编写一个应用程序，并使用 Primefaces 3.4.1 作为用户界面。

我有类似的东西。

**通用页面.xhtml**

```
<ui:composition template="mainApplicationTemplate.xhtml" [...]>
    <p:tabView id="tabView" dynamic="false"cache="false">
        <p:tab id="tab1" title="Tab 1">
            <h:form id="form1">
                ...
            </h:form>
        </p:tab>
        <p:tab id="tab1" title="Tab 1">
            <h:form id="form2">
                ...
            </h:form>
        </p:tab>
    </p:tabView>
<ui:composition > 
```

**child1.xml**

```
<ui:composition template="genericPage.xhtml" ...>
    <ui:param name="actionBean" value="#{actionBeanA}"/>
</ui:compisition> 
```

**child2.xml**

```
<ui:composition template="genericPage.xhtml" ...>
    <ui:param name="actionBean" value="#{actionBeanB}"/>
</ui:compisition> 
```

其背后的想法是 child1.xhtml 和 child2.xhtml 共享相同的 jsf 代码，都包含在 genericPage.xhtml 中，但它们具有不同的后端 bean（由“actionBean”参数化）

到目前为止，效果非常好。当我将 ui 参数放在`<p:ajax/>`元素中时，它会变得复杂。

从后端 bean 中，我需要以编程方式更新活动选项卡，而另一个保持不变。为此，我需要将活动选项卡存储在操作 bean 中，当某些外部事件发生时，操作 bean 会更新活动选项卡。

请注意，由于其他一些因素：

*   我无法`dynamic="true"`设置`tabView`
*   我不能有一个全局表单`tabView`，因此不能使用“activeIndex”属性（我在应用程序的其他部分中这样做）来管理活动选项卡。

## 我想做的事

为了解决这个问题，我想使用元素的`tabChange`事件：`tabView`

```
<p:tabView id="tabView" dynamic="false"cache="false">
        <p:ajax event="tabChange" listener="#{actionBean.listen}"
        <p:tab id="tab1" title="Tab 1">
            <h:form id="form1">
                ...
            </h:form>
        </p:tab>
        <p:tab id="tab1" title="Tab 1">
            <h:form id="form2">
                ...
            </h:form>
        </p:tab>
    </p:tabView> 
```

**行动豆**

```
@Named
@WindowScoped
public class ActionBeanA implements Serializable{
    public void listen(TabChangeEvent event){
        ...
    }

} 
```

## 什么不起作用

当我这样做时，我得到了错误

```
Target Unreachable, identifier 'actionBean' resolved to null: javax.el.PropertyNotFoundException: Target Unreachable, identifier 'actionBean' resolved to null 
```

这似乎表明该`<p:ajax>`元素尚未通过操作 bean，因此不知道是什么`actionBean`。

但是，如果我像这样更改侦听器方法的签名

```
<p:ajax event="tabChange" listener="#{actionBean.listen(anything)}" 
```

并将后端 bean 更改为：

```
public void listen(TabChangeEvent event){
    System.out.println(event.toString());
} 
```

这样做，我没有得到目标无法访问的错误，而是listen方法中的空指针异常（因为我没有为“任何东西”赋值）。这表明在这种情况下，`<p:ajax/>`元素知道是什么`actionBean`并设法调用 bean 中的方法。

## 问题

我怎么能解决这个问题？我希望能够在选项卡更改事件中向我的后端 bean 发送新的活动选项卡。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T14:29:11.663

我也遇到了这个问题，并在 Primefaces 问题跟踪器中找到了解决方案：[在帖子 #20 中找到的解决方案](http://code.google.com/p/primefaces/issues/detail?id=4075&can=1&q=ajax%20listener%20parameter&colspec=ID%20Stars%20Type%20Status%20Priority%20TargetVersion%20Reporter%20Owner%20Summary)

总而言之，这是 Primefaces 中的一个已知问题。半修复可在 3.4.2 版中找到，需要对代码进行一些更改。目前你有：

```
public void listen(TabChangeEvent event){
    System.out.println(event.toString());
} 
```

哪个不起作用。您应该将代码更改为：

```
public void listen(AjaxBehaviorEvent event){
    System.out.println(event.toString());
} 
```

如果您需要使用特定的方法，`TabChangeEvent`那么您需要进行强制转换：`(TabChangeEvent)event`.

它在问题跟踪器上具有*固定*状态，因此可能需要将此作为永久解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T14:08:28.663

值和方法表达式处理之间存在差异。对于后者，您需要稍后在 Facelet 上下文中使用该参数。

要将参数的值包含到 facelet 上下文中，您只需将参数值定义放在`<f:metadata>`标记内。

另外，请注意`<f:metadata>`标签应该始终是标签的直接子`<f:view>`标签，所以我会做这样的事情：

**模板.xhtml**

```
<f:view ....>
    <ui:insert name="metadata"/>
    ....
</f:view> 
```

**childPage.xhtml**

```
<ui:composition template="/WEB-INF/template.xhtml">
    <ui:define name="metadata">
        <f:metadata>
            <ui:param name="actionBean" value="#{actionBeanA}"
        </f:metadata>
    </ui:define>
</ui:composition> 
```

完成此操作后，您可以在`template.xhtml`没有变通方法的情况下以原始方式使用 listener 属性，并且将始终使用适当的事件类型参数调用您的方法。

# c# - MS Project 2010 插件：在没有 PSI 的情况下在客户端中获取/编辑自定义企业字段条目

> ID：14460649
> 
> 赞同：0
> 
> 时间：2013-01-22T14:17:19.390
> 
> 标签：c#, add-in, ms-project

目前我正在为 Microsoft Project 2010 客户端开发插件。我很想在不使用 PSI 的情况下读出与所选任务、资源或项目相对应的自定义企业字段的值。

例如，我可以简单地读出`UID`资源的

```
resource.GetField(MSProject.PjField.pjResourceGuid) 
```

但是我不知道如何读出自定义企业字段的值，例如`"MYCOMPANY_project_technicalSupervisor"`基于查找表的字段。

下一步是设置该字段的值。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:19:44.893

好吧，尽管在我问这个问题之前我真的环顾四周，但我找到了一个解决方案：

```
task.GetField(ThisApplication.FieldNameToFieldConstant("MYCOMPANY_project_technicalSupervisor")) does the trick. 
```

# c++ - 简单的异步发送到 tcp 套接字

> ID：14460650
> 
> 赞同：1
> 
> 时间：2013-01-22T14:17:19.857
> 
> 标签：c++, visual-studio, sockets, tcp

我有这样的代码：

```
while (!isNeedStop) {
  char * data; int len;
  getData(data, &len);
  send(sock, data, len, 0);
} 
```

`getData`产生一些数据，大约 3-5 kb。探查器显示，getData 和 send 需要相同的时间，我想异步发送数据 - 当`getData`获取下一条数据时，`send`发送前一条。

我可以用额外的线程+队列编写代码。但也许 Visual Studio 已经有很好的课程了？

我使用 Visual Studio 2010。

# ios - NSURLConnection sendAsynchronousRequest 从不释放内存

> ID：14460652
> 
> 赞同：0
> 
> 时间：2013-01-22T14:17:27.733
> 
> 标签：ios, nsurlconnection, cfnetwork, sendasynchronousrequest

我正在开发一个 iOS 应用程序，它向我的串行队列分派了相当多的任务。任务是从我的网络服务器下载图像，将其保存到磁盘，然后显示在`UIImageView`. 但是，`[NSURLConnection sendAsynchrousRequest]`在 iOS 杀死我的进程之前，它将继续消耗越来越多的内存。

下载器方法如下所示：

```
// dispatch_queue_t is created once by: m_pRequestQueue = dispatch_queue_create( "mynamespace.app", DISPATCH_QUEUE_SERIAL);

- (void) downloadImageInBackgroundWithURL:(NSString*) szUrl {
__block typeof(self) bSelf = self;
__block typeof(m_pUrlRequestQueue) bpUrlRequestQueue = m_pRequestQueue;

dispatch_async( m_pRequestQueue, ^{ 
    NSAutoreleasePool *pAutoreleasePool = [[NSAutoreleasePool alloc] init];
    NSURLRequest *pRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:szUrl]
                                              cachePolicy:NSURLRequestReloadIgnoringCacheData
                                          timeoutInterval:URL_REQUEST_TIMEOUT];

    [NSURLConnection sendAsynchronousRequest:pRequest queue:bpUrlRequestQueue completionHandler:^(NSURLResponse *pResponse, NSData *pData, NSError *pError) {
        NSAutoreleasePool *pPool = [[NSAutoreleasePool alloc] init];
        if ( pError != nil ) {
        } else {                
            // convert image to png format
            UIImage *pImg = [UIImage imageWithData:pData];
            NSData *pDataPng = UIImagePNGRepresentation(pImg);
            bool bSaved = [[NSFileManager defaultManager] createFileAtPath:szCacheFile contents:pDataPng attributes:nil];                    
        }

            __block typeof(pDataPng) bpDataPng = pDataPng;
            __block typeof(pError) bpError = pError;
            dispatch_sync( dispatch_get_main_queue(), ^ {
                NSAutoreleasePool *autoreleasepool = [[NSAutoreleasePool alloc] init];
                UIImage *pImage = [[UIImage alloc] initWithData:bpDataPng];

                // display the image

                [pImage release];
//                    NSLog( @"image retain count: %d", [pImage retainCount] ); // 0, bad access

                [autoreleasepool drain];
            });
        }
        [pPool drain];
    }]; // end sendAsynchronousRequest

    [pAutoreleasePool drain];

}); // end dispatch_async
} // end downloadImageInBackgroundWithURL 
```

我很确定它是内部`[NSURLConnection sendAsynchronousRequest]`的东西，因为分析器显示该函数是占用所有内存的函数......

但是，我也不太确定 dispatch_*** 和阻塞的东西，我之前一直使用 C 和 C++ 代码和 pthread，但是在阅读了 Apple 的关于从线程迁移的文档之后，我决定尝试 GCD ，objective-c 太麻烦了，我不知道如何释放它`NSData *pData`，`NSURLResponse *pResponse`因为每当我这样做时它都会崩溃。

请指教...真的需要帮助来学习和欣赏objective-c ...

![探查器](../Images/55cd3b6e469bfa6b107d8f7bf7a6a502.png)

**附加编辑：**

感谢@robhayward，我将 pImg 和 pDataPng 作为 __block 变量放在外面，使用他的 RHCacheImageView 下载数据的方式（ NSData initWithContentOfURL ）

还要感谢@JorisKluivers，第一个 UIImage 实际上可以重复使用以显示 UIImageView 识别 jpg 和 png 格式，只是我以后的处理需要 png 格式，我稍后会在需要时从磁盘读取

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:50:43.373

我首先将其归结为您正在创建的图像和数据对象：

```
UIImage *pImg = [UIImage imageWithData:pData];
NSData *pDataPng = UIImagePNGRepresentation(pImg); 
```

这可能会停留太久，可能会将它们放在块之外，因为它们可能是在不同的线程上创建/释放的：

```
__block UIImage *pImg = nil;
__block NSData *pDataPng = nil;
[NSURLConnection sendAsynchronousRequest.. 
```

（如果可以的话，也考虑使用 ARC）

我在 Github 上有一些代码可以在没有这个问题的情况下完成类似的工作，请随时查看：

[https://github.com/robinhayward/RHCache/blob/master/RHCache/RHCache/Helpers/UIImageView/RHCacheImageView.m](https://github.com/robinhayward/RHCache/blob/master/RHCache/RHCache/Helpers/UIImageView/RHCacheImageView.m)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T15:32:31.970

首先尝试简化您的代码。我做的事情：

*   移除外部 dispatch_async。这不是必需的，您`sendAsynchronousRequest`已经是异步的。这也消除`__block`了队列中另一个变量的需要。
*   `pImg`您从收到的中创建一个命名的图像`pData`，然后将其转换回`NSData`png 类型，然后`pImage`再次从中创建另一个图像。无需一遍又一遍地转换，只需重复使用第一张图像。您甚至可以将原件写入`pData`磁盘（除非您真的想要磁盘上的 png 格式）。

下面的代码我没有自己编译，所以可能包含一些错误。但它是一个更简单的版本，可能有助于解决泄漏。

```
- (void) downloadImageInBackgroundWithURL:(NSString*)szUrl
{
    __block typeof(self) bSelf = self;

    NSAutoreleasePool *pAutoreleasePool = [[NSAutoreleasePool alloc] init];
    NSURLRequest *pRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:szUrl]
                                          cachePolicy:NSURLRequestReloadIgnoringCacheData
                                      timeoutInterval:URL_REQUEST_TIMEOUT];

    [NSURLConnection sendAsynchronousRequest:pRequest queue:m_pRequestQueue completionHandler:^(NSURLResponse *pResponse, NSData *pData, NSError *pError) {
        NSAutoreleasePool *pPool = [[NSAutoreleasePool alloc] init];
        if (pError) {
            // TODO: handle error
            return;
        }

        // convert image to png format
        __block UIImage *pImg = [UIImage imageWithData:pData];

        // possibly just write pData to disk
        NSData *pDataPng = UIImagePNGRepresentation(pImg);
        bool bSaved = [[NSFileManager defaultManager] createFileAtPath:szCacheFile contents:pDataPng attributes:nil];                    

        dispatch_sync( dispatch_get_main_queue(), ^ {
            // display the image in var pImg
        });
    }];
    [pAutoreleasePool drain];
} 
```

# jquery - 使用 jQuery 隐藏/显示表格内的面板

> ID：14460655
> 
> 赞同：0
> 
> 时间：2013-01-22T14:17:32.480
> 
> 标签：jquery, asp.net

我有一个带有表格的 ASP.NET Web 表单。在表格内，我有一个单选按钮列表控件，在其下方有一个面板。面板内有几个带有其他 Web 控件的标签。

我想要做的是根据单选按钮列表中的选择显示或隐藏面板。在我的 jQuery 中，我有这个：

```
$(document).ready(function() {    
    $('#<%= rblCarrier.ClientID%>').find('input:radio').click(function() {
        var selVal = $('#<%= rblCarrier.ClientID %>').find('input:checked').val();
        if (selVal == "1") $("#mydiv").show("fast");                
        else  $("#mydiv").hide("fast");            
    })
}); 
```

如果我用显示器替换`$("#mydiv").show("fast");`，`alert`那么`alert`我知道到目前为止一切正常。

请记住，我的 asp.net 面板位于 HTML 表格中。

如果单选按钮值为“1”，我想要做的就是显示面板的内容，否则隐藏它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:36:13.967

我放弃了这个。任何论坛上的任何人都没有实际使用 .NET 面板或占位符的代码。所以我选择了一条更简单的路线。我删除了面板，而是在表格行内嵌入了一个表格。我给了表格一个 ID，然后很容易用 jQuery 显示/隐藏它。显然 .NET 服务器控件不能很好地与 jQuery 搭配使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T10:50:51.250

伙计们，我也在努力解决这个问题（使用 jQuery 隐藏/显示面板，但在我的情况下是使用 RadioButtonList 并且不在表格内）并搜索了很多帖子，但没有找到答案，但我能够让它工作，这就是我的方式做过...

我的代码如下：

```
<div>
            <p class="space">3.2\. ACCOMMODATION (*)</p>

            <asp:RadioButtonList ID="accomodation" runat="server" RepeatDirection="Horizontal" RepeatLayout="Flow" Width="500px">
                <asp:ListItem Text="Not Required" Value="Not Required"></asp:ListItem>
                <asp:ListItem Text="Required" Value="Required"></asp:ListItem>
            </asp:RadioButtonList>

            <asp:Panel ID="PanelAccommodation" runat="server">
                <p>
                    Number of nights (*):
                     <asp:RequiredFieldValidator ID="RequiredFieldValidator12" runat="server" ControlToValidate="numberOfNights" ForeColor="red" ErrorMessage="<- Required"></asp:RequiredFieldValidator>
                </p>
                <asp:TextBox ID="numberOfNights" runat="server" Width="50px"></asp:TextBox>

                <ajaxToolkit:FilteredTextBoxExtender ID="FilteredTextBoxExtender1" TargetControlID="numberOfNights"
                    FilterType="Numbers" runat="server">
                </ajaxToolkit:FilteredTextBoxExtender>

                <p>Preferred Hotel:</p>
                <asp:TextBox ID="preferredHotel" runat="server" Width="450px"></asp:TextBox>

                <p>Preferred Hotel URL:</p>
                <asp:TextBox ID="preferredHotelURL" runat="server" Width="450px"></asp:TextBox>
            </asp:Panel>
        </div> 
```

和我使用的 jquery 函数：

```
$(document).ready(function () {
            $("#MainContent_PanelAccommodation").hide("fast");
            $('#<%= accomodation.ClientID%>').find('input:radio').click(function () {
                var selVal = $('#<%= accomodation.ClientID %>').find('input:checked').val();
                if (selVal == "Required") {
                    $("#MainContent_PanelAccommodation").show("fast");
                }
                if (selVal == "Not Required") {
                    $("#MainContent_PanelAccommodation").hide("fast");
                }
            })
        }); 
```

请注意，jquery 上的 ID 具有“MainContent”，而 HTML 上的 ID 没有，这是因为如果您检查代码并查找面板，它也可能显示和类似于 MainContent_PanelAccommodation 的 ID，因为它继承自：

```
<asp:Content ID="Content3" ContentPlaceHolderID="MainContent" runat="server"> 
```

希望这可以帮助人们在同样的问题上挣扎......

# android - Android Debug Bridge (adb) 设备 - 无权限

> ID：14460656
> 
> 赞同：191
> 
> 时间：2013-01-22T14:17:40.573
> 
> 标签：android, linux, debugging, adb

我在调试模式下将 HTC Wildfire A3333 与我的 Fedora Linux 17 连接时遇到问题。Adb 说：

```
./adb devices
List of devices attached 
????????????    no permissions 
```

我的 udev 规则（三星的第一条规则可以正常工作，而 HTC 的第二条则不行）：

```
SUBSYSTEM=="usb",SYSFS{idVendor}=="04e8",SYMLINK+="android_adb",MODE="0666",GROUP="plugdev" 
SUBSYSTEM=="usb",SYSFS{idVendor}=="0bb4",SYMLINK+="android_adb",MODE="0666",GROUP="plugdev" 
```

对于三星设备一切正常：

```
 ./adb devices
List of devices attached 
00198a9422618e  device 
```

我一直在尝试类似线程中给出的所有答案，但没有任何运气：[Using HTC wildfire for android development](https://stackoverflow.com/questions/3947729/using-htc-wildfire-for-android-development)

* * *

## 回答 #1

> 赞同：368
> 
> 时间：2013-02-23T17:41:24.407

我自己在 Debian Wheezy 下遇到了这个问题。我用 sudo 重新启动了 adb 守护进程：

```
sudo ./adb kill-server
sudo ./adb start-server
sudo ./adb devices 
```

一切正常:)

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2013-01-23T11:36:48.790

该问题的原因与系统权限有关（感谢@IsaacCisneros 的此建议）。不知何故，HTC Wildfire（也许还有其他人）需要的系统比三星设备更多。简单的解决方案是以 root 身份运行 Eclipse，但这对于像 Fedora 这样的非 sudo Linux 系统来说不是很舒服。

我找到了实现相同目标的另一种方法，这似乎对用户更友好，并且比以超级用户权限运行整个 IDE 的安全漏洞更小。请注意，这仍然只是问题的一种解决方法。系统 root 的使用应该被最小化只用于管理任务，并且“adb”被设计为使用没有 SUID 的普通用户帐户。尽管正确设置 SUID 是相当安全的，但每一次权限增加都是潜在的系统安全漏洞。

1.设置 adb 二进制文件的所有权（所有者 - root，所有者组 - user_group）：

`chown root:user_group adb`

2.使用SUID设置权限：

`chmod 4550 adb`

这应该会产生与此类似的结果（ls -llh）：

`-r-sr-x---. 1 root user_name 1.2M Jan 8 11:42 adb`

之后，您将能够以 root 身份运行 adb，尽管您将使用您的普通用户帐户。您可以以普通用户身份运行 Eclipse，您的 HTC 应该会被正确发现。

```
./adb devices 
List of devices attached 
HT0BPPY15230    device 
```

* * *

## 回答 #3

> 赞同：95
> 
> 时间：2013-10-10T09:28:57.307

我有一个类似的问题：

```
$ adb devices
List of devices attached 
4df15d6e02a55f15    device
????????????    no permissions 
```

## 调查

如果我运行`lsusb`，我可以看到我连接了哪些设备，以及在哪里：

```
$ lsusb
...
Bus 002 Device 050: ID 04e8:6860 Samsung Electronics Co., Ltd GT-I9100 Phone ...
Bus 002 Device 049: ID 18d1:4e42 Google Inc. 
```

这显示我的**三星 Galaxy S3**和我的**Nexus 7 (2012)**已连接。

检查这些权限：

```
$ ls -l /dev/bus/usb/002/{049,050}
crw-rw-r--  1 root root    189, 176 Oct 10 10:09 /dev/bus/usb/002/049
crw-rw-r--+ 1 root plugdev 189, 177 Oct 10 10:12 /dev/bus/usb/002/050 
```

等待。什么？那个“plugdev”组是从哪里来的？

```
$ cd /lib/udev/rules.d/
$ grep -R "6860.*plugdev" .
./40-libgphoto2-2.rules:ATTRS{idVendor}=="0bb4", ATTRS{idProduct}=="6860", \
  ENV{ID_GPHOTO2}="1", ENV{GPHOTO2_DRIVER}="proprietary", \
  ENV{ID_MEDIA_PLAYER}="1", MODE="0664", GROUP="plugdev"
./40-libgphoto2-2.rules:ATTRS{idVendor}=="04e8", ATTRS{idProduct}=="6860", \
  ENV{ID_GPHOTO2}="1", ENV{GPHOTO2_DRIVER}="proprietary", \
  ENV{ID_MEDIA_PLAYER}="1", MODE="0664", GROUP="plugdev" 
```

（我已经包装了这些行）

注意`GROUP="plugdev"`线条。另请注意，这不适用于其他设备 ID：

```
$ grep -Ri "4e42.*plugdev" . 
```

（不返回任何内容）

## 修复它

好的。那么解决方法是什么？

### 添加规则

创建一个`/etc/udev/rules.d/99-adb.rules`包含以下行的文件：

```
ATTRS{idVendor}=="18d1", ATTRS{idProduct}=="4e42", ENV{ID_GPHOTO2}="1",
  ENV{GPHOTO2_DRIVER}="proprietary", ENV{ID_MEDIA_PLAYER}="1",
  MODE="0664", GROUP="plugdev" 
```

**这应该是一行，为了便于阅读，我把它包装在这里**

### 重启udev

```
$ sudo udevadm control --reload-rules
$ sudo service udev restart 
```

### 就是这样

拔下/重新插入您的设备。

### 尝试一下

```
$ adb devices
List of devices attached 
4df15d6e02a55f15    device
015d2109ce67fa0c    device 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2013-08-03T12:48:18.597

您的 udev 规则似乎是错误的。我使用了它并且它有效：

```
SUBSYSTEM=="usb", ATTR{idVendor}=="0bb4", MODE="0666", GROUP="plugdev" 
```

（`ATTR`而不是`SYSFS`）

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2013-03-10T05:44:18.120

在 ubuntu 12.04 下，eclipse juno。我面临同样的问题。这是我在[易宇博客上找到的](http://mist.cs.st-andrews.ac.uk/blog/?p=331)

解决方法与 Leon 相同

```
sudo -s
adb kill-server
adb start-server
adb devices 
```

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2017-08-12T02:59:49.623

从手机更改 USB 模式对我有用。（我将其设置为文件传输）

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2013-11-19T20:54:07.863

Stephan 的回答有效（使用 sudo adb kill-server），但它是暂时的。每次重新启动后都必须重新发布。

对于永久解决方案，必须修改 udev 配置：

Witrant 的回答是正确的想法（从官方 Android 文档中复制）。但这只是一个模板。如果这不适用于您的设备，您需要为您的设备填写正确的设备 ID。

`lsusb`

```
Bus 001 Device 002: ID 05c6:9025 Qualcomm, Inc.
Bus 002 Device 002: ID 0e0f:0003 VMware, Inc. Virtual Mouse
... 
```

在列表中找到您的安卓设备。

然后将ID的前半部分（4位数字）用于idVendor（后半部分是idProduct，但没有必要让adb工作）。

`sudo vi /etc/udev/rules.d/51-android.rules`并为每个唯一的 idVendor 添加一条规则：

```
SUBSYSTEM=="usb", ATTR{idVendor}=="05c6", MODE="0666", GROUP="plugdev" 
```

就是这么简单。您不需要某些答案中给出的所有其他字段。保存文件。

然后重新启动。更改是永久性的。（如果您不想重新启动，Roger 展示了一种重新启动 udev 的方法）。

* * *

## 回答 #8

> 赞同：22
> 
> 时间：2013-06-03T17:46:18.240

...到目前为止，OP自己的答案是*错误*的，即没有“特殊系统权限”。– “无权限”问题归结为......没有权限。

不幸的是，调试起来并不容易，因为 adb 将它试图访问的设备保密！在 Linux 上，它会尝试打开手机的“USB 串口转换器”设备，例如 /dev/bus/usb/001/115（您的总线号和设备地址会有所不同）。这有时是从 /dev/android_adb 链接和使用的。

`lsusb`将有助于查找总线号和设备地址。请注意，如果您重新插入，设备地址肯定会发生变化，如果端口对使用哪种速度感到困惑（例如，一个物理端口最终位于一个逻辑总线或另一个逻辑总线上），总线编号也会发生变化。

lsusb-line 看起来类似于： Bus 001 Device 115: ID 4321:fedc bla bla bla

`lsusb -v`如果“bla bla bla”提示不够，可能会帮助您找到设备（有时它既不包含制造商，也不包含手机型号）。

一旦您了解了该设备，请用您自己的眼睛检查`ls -a /dev/bus/usb/001/115`相关用户真正可以访问的设备！然后检查它是否适用`chmod`并修复您的 udev 设置。

PS1：/dev/android_adb 只能指向一个设备，因此请确保它符合您的要求。

PS2：与这个问题无关，但鲜为人知：adb 有一个固定的供应商 ID 列表。这个列表可以从 ~/.android/adb_usb.ini 扩展，它应该包含 0x4321（如果我们按照上面的示例 lsusb 行）。– 这里不需要，因为如果供应商 ID 未知，您甚至不会获得“无权限”。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2013-04-12T04:24:48.883

我将把这篇后记放在顶部，这样它就不会在我之前的解释中丢失。

我可以通过简单地将 USB 连接类型从相机 (PTP) 更改为媒体设备 (MTP) 来可靠地产生和解决无权限问题。相机模式允许调试；媒体模式导致 ADB 中的无权限响应。

在思考了片刻之后，推理似乎很明显。调试器可以在媒体服务器模式下访问设备上的不安全内容。

===========

在您接受被调试设备上的 RSA 加密警告之前，该设备是未经许可的。在连接后的某个时刻，设备会要求接受调试连接。这是一个最低限度的安全协议，可确保您可以在初始刷卡锁定之外访问设备。我相信需要启用开发人员模式。

“无权限”标志实际上是 adb 将设备识别为有效调试目标的良好第一个指标。请注意，它没有列出您的其他 USB 设备。

以下和相关页面的详细信息。

[http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2014-01-09T17:51:10.833

在 6 月 4 日升级到 4.2.2 stock rom 后 Pipo S1S 出现同样的问题。

```
$ adb devices
List of devices attached  
????????????    no permissions 
```

上述所有建议虽然对识别您的 USB 设备有效，但不能为我解决问题。（在 Mint 15 上运行的 Android Debug Bridge 版本 1.0.31。）

更新 android sdk 工具等重置`~/.android/adb_usb.ini`。

要识别 Pipo VendorID 0x2207，请执行以下步骤

添加到行`/etc/udev/rules.d/51-android.rules`

```
SUBSYSTEM=="usb", ATTR{idVendor}=="0x2207", MODE="0666", GROUP="plugdev" 
```

将行添加到`~/.android/adb_usb.ini`：

```
0x2207 
```

然后删除 adbkey 文件

```
rm -f ~/.android/adbkey ~/.android/adbkey.pub 
```

并重新连接您的设备以使用正确的 adb 连接重建密钥文件。某些设备会要求重新授权。

```
sudo adb kill-server
sudo adb start-server   
adb devices 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-07-18T04:45:12.047

有同样的问题。这是 udev 规则的问题。尝试了上面提到的一些规则，但没有解决问题。在这里找到了一组规则，[https://github.com/M0Rf30/android-udev-rules](https://github.com/M0Rf30/android-udev-rules)。按照那里的指南，瞧，修好了。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-11-28T15:36:15.363

我今天遇到了同样的问题。

我遵循了[官方的说明](http://developer.android.com/tools/device.html#setting-up)，但我没有注意到**我应该运行命令
“chmod a+r /etc/udev/rules.d/51-android.rules”**

在我将此文件设置为全球可读并**重新插入**我的 USB 电缆后，状态变为未经授权。然后只需授予权限，一切都会好起来的。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-05-22T12:07:06.743

我同意[Robert Siemer](/questions/14460656/android-debug-bridge-adb-device-no-permissions#16902700)和[Michaël Witrant](/questions/14460656/android-debug-bridge-adb-device-no-permissions#18033042)的观点。如果它不起作用，请尝试调试`strace`

```
strace adb devices 
```

在我的情况下，它有助于杀死所有实例并删除套接字文件`/tmp/ADB_PORT`（默认为`/tmp/5037`）。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-09-24T12:05:38.767

此问题的另一个可能来源是 USB 网络共享。如果您使用过 USB 网络共享，请将其关闭，然后从 USB 中拔下设备，重新插入，然后执行

```
adb kill-server
adb devices 
```

这在我的案例中起到了作用（Ubuntu 12.04，Nexus S，在 home dir 中的 SDK，从来不需要 root 来让它运行）。不过，根据您的设备，您可能需要以`adb devices`root 身份运行。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-01-15T13:59:35.360

尝试“android update adb”命令。它可以帮助我使用三星银河设备。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-07-16T06:24:56.790

的输出`ls -al /usr/bin/adb`应该显示它由 user`root`和 group拥有`root`。您可以使用 Linux ACL（访问控制列表）为您的本地用户授予`adb`以下权限：

`setfacl -m "u:userName:rwx" /usr/bin/adb`

这比设置 SUID 位更可取，`/usr/bin/adb`并且还将可以使用的用户限制`adb`为*userName*和*root*。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-11-09T04:59:35.443

答案在这里的各种帖子中交织在一起，我会尽力而为，但这看起来是一个非常简单而明显的原因。

1）是在 udev 规则中通常有一个“用户”变量，比如 USER="your_user" 可能就在 GROUP="plugdev" 之后

2) 您需要为您的设备使用正确的 SYSFS{idVendor}==”####″ 和 SYSFS{idProduct}=="####" 值。如果您拥有来自多个制造商的设备，例如来自三星的设备和来自 HTC 的设备，那么您需要为每个供应商设置一个条目（规则），而不是每个设备的条目，而是您将使用的每个不同供应商的条目，所以您需要 HTC 和三星的条目。看起来你已经进入三星，现在你需要另一个。记住 USER="your_user"。像 Robert Seimer 建议的那样使用“lsusb”来查找 idVendor 和 idProduct，它们通常是这种格式的数字和字母 X#X#:#X#XI 认为第一个是 idVendor 和第二个 idProduct 但你需要为您拥有的每个品牌的手机/平板电脑执行此操作。

3）我还没有弄清楚 51-adb.rules 和 99-adb.rules 有何不同或为什么。

4）也许尝试使用“usermod -a -G plugdev your_user”将“plugdev”组添加到您的用户，尝试自行承担风险，虽然我认为它不会比以root身份启动gui更有风险，但我相信如果有必要你至少应该改用“gksudo eclipse”。

我希望这有助于澄清一些事情，udev 规则语法对我来说也有点神秘，但据我所知，不同的系统可能会有所不同，所以尝试一些东西，一次吃一个，并注意哪些改变有效.

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-07-27T17:46:46.663

1.  关闭 running `adb`，可能正在关闭正在运行的 android-studio。

2.  列出设备，

`/usr/local/android-studio/sdk/platform-tools/adb devices`

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2013-12-07T15:52:45.010

在 THL W100 上，以 root 身份运行设备（如上所述）只能在启用网络共享的情况下工作（为此我使用了 AirDroid）。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2015-04-24T05:05:51.160

我遇到了同样的情况，三台设备连接到同一台主机，但只有一台“无权限”，其他设备在线。

在 adb 上添加 SUID 或 SGID 对我来说是另一个问题。每次 adb 重新启动时都会看到设备脱机 - 直到您每次都在设备上确认。

我通过为设备文件添加“o+w”权限解决了这个“无权限”问题。

> chmod o+w /dev/bus/usb/00n/xxx

# c# - 如何在 windows phone 8 Tile 上运行数字时钟？（内部描述）

> ID：14460660
> 
> 赞同：4
> 
> 时间：2013-01-22T14:17:51.077
> 
> 标签：c#, xaml, windows-phone-8

我正在为 windows phone 8 应用程序设置磁贴，有人能告诉我如何更新每分钟的磁贴时间，就像下图中的第一次磁贴一样，

![在此处输入图像描述](../Images/32247c6a15440e91cab1a0ec40e4f4c9.png)

我已经使用过了，`ScheduledAgent`但是当我在调试模式下启动服务时效果很好。. .

我在[这里](http://code.msdn.microsoft.com/windowsapps/Tile-Update-every-minute-68dbbbff)看到了一个示例，但该示例适用于 Metro 应用程序。. .

有人请告诉我如何在 Windows Phone 8 中实现这一点。.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:28:15.713

您不能在 Windows Phone 上每 30 分钟更新一次 livetile，除非您每分钟从服务器推送一个推送通知，这无论如何都不是很有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:33:59.877

您可能可以使用 Background Executable 任务做一些事情，但为了做到这一点，您需要声明位置功能，这会吓跑人们，您可以使用计划任务接近功能（有一个 windows phone 8 internals book 的预览）我认为松散地涵盖了它，但从记忆中我相信需要注意的是，您每 30 分钟获得大约 25 秒的执行时间，因此使用这种方法更新磁贴应该可以达到每分钟精度（几乎）

# c# - 锁定代码的特定部分

> ID：14460661
> 
> 赞同：1
> 
> 时间：2013-01-22T14:17:58.500
> 
> 标签：c#, locking

在控制台应用程序中锁定代码块的最佳做法应该是什么，以便在运行多个可执行文件/应用程序实例时不会产生任何问题

```
string folder = Convert.ToString(ConfigurationManager.AppSettings["LogFilePath"]);
string configFile = Path.Combine(folder, "logger.xml");
FileStream fs = new FileStream(configFile, FileMode.Open);
log4net.Config.XmlConfigurator.Configure(fs);
fs.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:48:54.163

您应该使用互斥锁。“一种同步原语，也可用于进程间同步。” 见：[Msdn](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)

就像是：

```
var mutex = new Mutex(false, "logger.xml-mutex");
if (!mutex.WaitOne(TimeSpan.FromSeconds(100), false))
{
    Console.WriteLine("Timed out...could not acquire mutex.");
    return;
}
try
{
    string folder = Convert.ToString(ConfigurationManager.AppSettings["LogFilePath"]);
    string configFile = Path.Combine(folder, "logger.xml");
    FileStream fs = new FileStream(configFile, FileMode.Open);
    log4net.Config.XmlConfigurator.Configure(fs);
    fs.Close();
}
finally { mutex.ReleaseMutex(); } 
```

# jquery - jsonp 作为 GET 发送

> ID：14460665
> 
> 赞同：1
> 
> 时间：2013-01-22T14:18:09.917
> 
> 标签：jquery, ajax, elasticsearch

我上周打开了另一个帖子，因为我的弹性搜索没有返回准确的结果，请参阅[ElasticSearch 帖子](https://stackoverflow.com/questions/14405886/elasticsearch-not-failing-but-returning-incorrect-results)

基本上发生的事情是，当我使用 jsonp 时，请求实际上并没有作为 GET 请求而不是 POST 请求发送。下面是jsonp请求。当我使用 json 时，它实际上是作为 POST 发送的。

```
 amplify.request.define("searchPostRequest", "ajax", {
        url: "http://leServer:9200/people/person/_search",
        type: "POST",
        dataType: 'jsonp',
        contentType: 'application/json'
    }); 
```

任何人都知道如何强制将 jsonp 作为 POST 请求发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:19:16.427

您不能使用 POST 对不同域或相同域进行 JSONP 调用，因为 JSONP 通过向页面添加脚本标签来工作。它没有发出 XMLHttpRequest。

如果要发布数据并且它是同一个域，只需对服务器进行普通的 POST ajax 调用并返回 JSON。

如果是跨域调用：如果您控制另一个域并且只关心现代浏览器，则可以使用[CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)，如果不是，则必须使用服务器上的代理来发出 post 请求。这两种解决方案也将进行 JSON 调用，而不是 JSONP。

# ssis - 如何在 ssis 中为平面文件生成动态文件命名？

> ID：14460669
> 
> 赞同：0
> 
> 时间：2013-01-22T14:18:27.177
> 
> 标签：ssis

您好我正在尝试使用平面文件连接管理器中的表达式列来生成具有动态命名的文件，例如

文件-ddmmyyyyhhmmss.txt

我知道我可以使用 getdatepart 但获取 hh、mm 和 ss 的确切方法调用是什么？任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:32:44.017

[Pragmatic works SSIS Expression Cheat Sheet](http://pragmaticworks.com/LearningCenter/Resources/CheatSheets/SSISExpressionCheatSheet.aspx)是一个好的开始。`(DT_WSTR, 2) datepart("HH",getdate())` 您可以通过使用获取小时部分、 `(DT_WSTR, 2) datepart("n",getdate())`获取分钟和 `(DT_WSTR, 2) datepart("s",getdate())`获取秒来扩展您的情况。您需要添加逻辑以确保小于 10 的值仍然获得两位数（即 01 05）等。对于日、月和年，有函数 DAY() MONTH() 和 YEAR() 可以缩短等效的日期部分（） 功能。

# c++ - 向量中的分段错误

> ID：14460673
> 
> 赞同：0
> 
> 时间：2013-01-22T14:18:41.710
> 
> 标签：c++, vector

所以，我正在做来自 UVa Online Judge的著名的“ [The Blocks Problem” 。](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=3&page=show_problem&problem=37)

我的方法很愚蠢，那是因为我想玩向量。所以，我得到了指向堆中每个块的指针的向量，这些向量存储在一个称为集合的向量中。

为了找到所有块，我有一个名为 blockCollection 的向量，其中存储了指向所有块的指针。

该代码已通过提供的示例。稍后我将尝试编辑并提供评论。

完整来源：

```
#include <iostream>
#include <vector>

struct Block
{
    int id;
    std::vector<Block*>* where;
};

int positionInVector(Block* b);

int main(int argc, const char * argv[])
{
    std::vector<std::vector<Block*>*> collection;
    std::vector<Block*> blockCollection;
    std::string command = "", command2 = "";
    int blockCount = 0, k = 0, A = 0, B = 0;

    while ( std::cin >> blockCount )
    {
        std::vector<Block*>* vectors = new std::vector<Block*>[blockCount];
        Block* blocks = new Block[blockCount];
        for ( k = 0 ; k < blockCount ; ++ k)
        {
            blocks[k].id = k;
            blocks[k].where = &vectors[k];
            vectors[k].push_back(&blocks[k]);
            blockCollection.push_back(&blocks[k]);
            collection.push_back(&vectors[k]);
        }
        std::cin >> std::ws;
        while ( std::cin >> command )
        {
            if ( command == "quit" ) break;
            std::cin >> A >> command2 >> B;
            Block* blockA = blockCollection[A];
            Block* blockB = blockCollection[B];
            std::vector<Block*>* vectorA = blockA -> where;
            std::vector<Block*>* vectorB = blockB -> where;

            //exception handle
            if ( A > blockCount || B > blockCount ) continue;
            if ( A == B ) continue;
            if ( vectorA == vectorB ) continue;

            if ( command == "move" )
            {
                //move anything on top of A to its original position
                int positionOfBlockAInVectorA = positionInVector(blockA);
                for ( int i = positionOfBlockAInVectorA + 1 ; i < vectorA -> size() ; ++ i )
                {
                    Block* blockToBeMoved = *(vectorA -> begin() + i);
                    std::vector<Block*>* destinationVector = collection[blockToBeMoved -> id];
                    blockToBeMoved -> where = destinationVector;
                    destinationVector -> push_back(blockToBeMoved);
                }
                vectorA -> erase(vectorA -> begin() + positionOfBlockAInVectorA + 1, vectorA -> end());
            }
            if ( command2 == "onto" )
            {
                //move anything on top of B to its original position
                int positionOfBlockBInVectorB = positionInVector(blockB);
                for ( int i = positionOfBlockBInVectorB + 1 ; i < vectorB -> size() ; ++ i )
                {
                    Block* blockToBeMoved = *(vectorB -> begin() + i);
                    std::vector<Block*>* destinationVector = collection[blockToBeMoved -> id];
                    blockToBeMoved -> where = destinationVector;
                    destinationVector -> push_back(blockToBeMoved);
                }
                if (positionOfBlockBInVectorB + 1 > vectorB -> size()) vectorA -> erase(vectorB -> begin() + positionOfBlockBInVectorB + 1, vectorB -> end());
            }
            if ( command == "move" )
            {
                //move block a to the pile containing block b
                vectorA -> pop_back();
                blockA -> where = vectorB;
                vectorB -> push_back(blockA);
            }
            else
            {
                //move block a and those on top of it to the pile containing block b
                std::vector<Block*> temperaryVector;
                int positionOfBlockAInVectorA = positionInVector(blockA);
                for ( int i = (int)vectorA -> size() - 1 ; i >= positionOfBlockAInVectorA ; -- i )
                {
                    temperaryVector.push_back(vectorA -> at(i));
                    vectorA -> erase(vectorA -> begin() + i);
                }
                for ( int i = (int)temperaryVector.size() - 1 ; i >= 0 ; -- i )
                {
                    temperaryVector[i] -> where = vectorB;
                    vectorB -> push_back(temperaryVector[i]);
                }
            }
        }

        for ( k = 0 ; k < blockCount ; ++ k )
        {
            std::vector<Block*>* vector = collection[k];
            std::cout << k << ":";
            if ( !vector -> empty() )
            {
                for ( int i = 0 ; i < vector -> size() ; ++ i )
                {
                    std::cout << " " << vector -> at(i) -> id;
                }
            }
            std::cout << std::endl;
        }
        delete [] blocks;
        delete [] vectors;
    }
    return 0;
}

int positionInVector(Block* block)
{
    std::vector<Block*> vector = *block -> where;
    for ( int i = 0 ; i < vector.size() ; ++ i )
    {
        if ( vector[i] == block ) return i;
    }
    return -1;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:25:22.423

每次向 blockCollection 添加或删除 Block 时，您持有的指向集合中任何 Block 的每个指针都可能失效。

我想这就是我最初需要说的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:32:38.927

为此：

```
 A = (int)command[5] - 48;
        B = (int)command[12] - 48; 
```

我们需要确保字符串长度为 5/12 个字符，并且在这些位置有一个数字。代码应在这些地方添加对输入长度和数字有效性的检查。

# regex - 如何获取使用 bash 构建正则表达式的 TLD 列表？

> ID：14460680
> 
> 赞同：3
> 
> 时间：2013-01-22T14:19:08.087
> 
> 标签：regex, bash, tld

由于需要查找电子邮件地址和主机名，我们希望改进现有的正则表达式以仅搜索**现有公共 TLD 的**.

我们想要一个 bash 命令，我们可以将它的输出复制并粘贴到我们的**正则表达式**中。

我们已经对 (co|com) 进行了试用，它仅匹配 'co' 而与 .com 域的完整 'com' tld 不匹配，这就是为什么 tld 列表需要按照**最长 TLD 的 first**进行排序的原因。

有人可以提供一行“复制和粘贴” **bash 命令**来输出最新的 TLD 排序和格式化列表吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:19:08.087

在@Alex_Volkov 的帮助下，他在[正则表达式中的回答是匹配 DNS 主机名或 IP 地址？](https://stackoverflow.com/questions/106179/regular-expression-to-match-hostname-or-ip-address/2375080#2375080)我们被指出[http://data.iana.org/TLD/tlds-alpha-by-domain.txt](http://data.iana.org/TLD/tlds-alpha-by-domain.txt)是 TLD 的来源。

在@thiton 的帮助下，他在[从最长到最短](https://stackoverflow.com/questions/8296649/sorting-lines-from-longest-to-shortest#answer-8296668)的排序行中的回答可以对输出进行排序，以便首先列出最长的 TLD。

导致这一行：

`$ curl -s http://data.iana.org/TLD/tlds-alpha-by-domain.txt | sed '1d; s/^ *//; s/ *$//; /^$/d' | awk '{print length" "$0}' | sort -rn | cut -d' ' -f2- | tr '\n' '|' | tr '[:upper:]' '[:lower:]' | sed 's/\(.*\)./\1/'`

很好地输出所需的 TLD 正则表达式部分：

`xn--clchc0ea0b2g2a9gcd|xn--hlcj6aya9esc7a|xn--hgbk6aj7f53bba|xn--xkc2dl3a5ee0h|xn--mgberp4a5d4ar|xn--11b5bs3a9aj6g|xn--xkc2al3hye2a|xn--80akhbyknj4f|xn--mgbc0a9azcg|xn--lgbbat1ad8j|xn--mgbx4cd0ab|xn--mgbbh1a71e|xn--mgbayh7gpa|xn--mgbaam7a8h|xn--9t4b11yi5a|xn--ygbi2ammx|xn--yfro4i67o|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--ogbpf8fl|xn--mgb9awbf|xn--kgbechtv|xn--jxalpdlp|xn--3e0b707e|xn--s9brj9c|xn--pgbs0dh|xn--kpry57d|xn--kprw13d|xn--j6w193g|xn--h2brj9c|xn--gecrj9c|xn--g6w251d|xn--deba0ad|xn--80ao21a|xn--45brj9c|xn--0zwm56d|xn--zckzah|xn--wgbl6a|xn--wgbh1c|xn--o3cw4h|xn--fiqz9s|xn--fiqs8s|xn--90a3ac|xn--p1ai|travel|museum|post|name|mobi|jobs|info|coop|asia|arpa|aero|xxx|tel|pro|org|net|mil|int|gov|edu|com|cat|biz|zw|zm|za|yt|ye|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|sz|sy|sx|sv|su|st|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|mn|mm|ml|mk|mh|mg|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eg|ee|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bo|bn|bm|bj|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac`

# ruby - 安装 Ruby 1.9.3-p374 Ubuntu 10.10

> ID：14460682
> 
> 赞同：0
> 
> 时间：2013-01-22T14:19:11.043
> 
> 标签：ruby, ubuntu-10.10

在 Ubuntu 10.10 上安装 Ruby 1.9.3-p374 后出现错误：

```
/opt/ruby-1.9.3-p374/bin/ruby -v
Segmentation fault 
```

对于安装，我使用了此说明[https://github.com/postmodern/chruby/wiki/MRI](https://github.com/postmodern/chruby/wiki/MRI)

我应该在安装说明中更改什么或如何找到错误原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:56:20.883

我应该使用参数“--enable-shared”

```
./configure --enable-shared --disable-install-doc 
```

这里的好例子：[https ://gist.github.com/4566200](https://gist.github.com/4566200)

# verilog - Verilog 中的连接似乎没有使用全宽

> ID：14460685
> 
> 赞同：1
> 
> 时间：2013-01-22T14:19:15.850
> 
> 标签：verilog

源代码：

```
module main();
wire [31:0] a = 32'b0;
wire [25:0] a_man = {1'b1, a[24:0]};
initial begin
$display("%b\n%b\n%b", {1'b1,a[24:0]}, a_man[25:0], a_man);
end
endmodule 
```

实际输出：

```
% iverilog dings.v && vvp a.out
10000000000000000000000000
1xxxxxxxxxxxxxxxxxxxxxxxxx
1xxxxxxxxxxxxxxxxxxxxxxxxx 
```

我不明白为什么`a_man`没有分配所有位。我不明白在进行串联内联和在电汇声明中这样做之间有什么区别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T15:01:25.617

根据经验，您将学会在时间 0 时不要信任任何 Verilog 模拟器。始终允许模拟器分配您的初始值的最小时间步长。

```
module test;
wire [7:0] a     = 7'b0;
wire [7:0] a_man = {1'b1, a[6:0]};

initial begin
  $display("%b %b %b", {1'b1,a[6:0]}, a_man[7:0], a_man);
  #1fs;
  $display("%b %b %b", {1'b1,a[6:0]}, a_man[7:0], a_man);
  #1ns;
  $display("%b %b %b", {1'b1,a[6:0]}, a_man[7:0], a_man);
end
endmodule 
```

给出（ncsim）：

```
1xxxxxxx xxxxxxxx xxxxxxxx
10000000 1xxxxxxx 1xxxxxxx
10000000 10000000 10000000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:33:18.280

在 modelsim SE-64 10.1d 我有：

```
ModelSim> vsim work.main
# vsim work.main 
# ** Note: (vsim-3812) Design is being optimized...
# Loading work.main(fast)
run
# 10000000000000000000000000
# 10000000000000000000000000
# 10000000000000000000000000 
```

正如所料...

所以：这是一个工具问题，而不是语言问题。

# linux - wput 速度结果为通过或失败

> ID：14460687
> 
> 赞同：1
> 
> 时间：2013-01-22T14:19:16.170
> 
> 标签：linux, bash

我正在使用以下内容输出上传速度测试的结果

```
wput 10MB.zip ftp://user:pass@host 2>&1 | grep '\([0-9.]\+[KM]/s\)' 
```

返回

```
18:14:38 (10MB.zip) - '10.49M/s' [10485760]
Transfered 10,485,760 bytes in 1 file at 10.23M/s 
```

我想让结果`10.23M/s`（即速度）得到回应，并得到一个比较结果：

```
if speed=>5 MB/s then echo "pass" else echo "fail" 
```

因此，最终输出将是：

```
PASS 7 M/s 
```

* * *

23/01/2013

理想情况下，到目前为止，我希望这一切都在一条线上完成

```
wput 100M.bin ftp://test:test@0.0.0.0 2>&1 | grep -o '\([0-9.]\+[KM]/s\)$' | awk ' { if (($1 > 5) && ($2 == "M/s")) { printf("FAST %s\n ", $0); }}' 
```

但是如果我删除它不会输出任何东西

```
&& ($2 == "M/s")) 
```

它可以工作，但我显然希望它的输出高于 5M/s，而且如果它超过 1K/s，它仍然会快速回显。有人可以告诉我我错过了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:37:36.277

使用`awk`：

```
# Over 5M/s
$ cat pass
18:14:38 (10MB.zip) - '10.49M/s' [10485760]
Transfered 10,485,760 bytes in 1 file at 10.23M/s

$ awk 'END{f="FAIL "$NF;p="PASS "$NF;if($NF~/K\/s/){print f;exit};gsub(/M\/s/,"");print(int($NF)>5?p:f)}' pass
PASS 10.23M/s

# Under 5M/s
$ cat fail
18:14:38 (10MB.zip) - '3.49M/s' [10485760]
Transfered 10,485,760 bytes in 1 file at 3.23M/s 

$ awk 'END{f="FAIL "$NF;p="PASS "$NF;if($NF~/K\/s/){print f;exit};gsub(/M\/s/,"");print(int($NF)>5?p:f)}' fail
FAIL 3.23M/s

# Also Handle K/s 
$ cat slow
18:14:38 (10MB.zip) - '3.49M/s' [10485760]
Transfered 10,485,760 bytes in 1 file at 8.23K/s

$ awk 'END{f="FAIL "$NF;p="PASS "$NF;if($NF~/K\/s/){print f;exit};gsub(/M\/s/,"");print(int($NF)>5?p:f)}' slow

FAIL 8.23K/s 
```

不知道你从哪里来`7 M/s`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:32:19.270

根据@Rubens，您可以使用[`grep -o`](http://linux.die.net/man/1/grep)正则表达式来显示速度，只需附加`$`到行尾

```
wput 10MB.zip ftp://user:pass@host 2>&1 | grep -o '\([0-9.]\+[KM]/s\)$' 
```

有了[`perl`](http://perldoc.perl.org/)你就可以轻松做剩下的事情

```
use strict;
use warnings;

while (<>) {
    if (m!\s+((\d+\.\d+)([KM])/s)$!) {
        if ($2 > 5 && $3 eq 'M') {
            print "PASS $1\n";
        } else {
            print "FAIL $1\n";
        }
    }
} 
```

然后调用它

```
wput 10MB.zip ftp://user:pass@host 2>&1 | perl script.pl 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T17:35:31.270

这是问题更新的答案。

使用该`awk`程序，您没有将速度拆分为数字和单位值。它只是一个字符串。

因为快的速度大于`5 M/s`，你可以忽略`K/s`并通过在字符处分割来提取速度`M`。然后你有速度`$1`并且可以比较它

```
wput 100M.bin ftp://test:test@0.0.0.0 2>&1 | grep -o '[0-9.]\+M/s$' | awk -F '/M/' '{ if ($1 > 5) { printf("FAST %s\n ", $0); }}' 
```

# c# - XPath 无法与 XFA 一起正常工作

> ID：14460688
> 
> 赞同：0
> 
> 时间：2013-01-22T14:19:18.660
> 
> 标签：c#, pdf, xpath, itextsharp, xfa

我有一个具有 DropDownList 的动态 PDF 表单。我正在使用 iTextSharp 尝试修改 PDF 中的值，然后再将其发送给客户端。[根据这个问题](https://stackoverflow.com/questions/8990235/c-sharp-to-read-xfa-form-data)的答案，这就是我正在尝试的：

```
PdfReader reader = new PdfReader(myPdfPath);
XmlDocument xdoc = reader.AcroFields.Xfa.DomDocument;
XmlNode dropdown = xdoc.SelectSingleNode("/*/template/subform[@name='form1']/subform[@name='form2']/field[@name='DropDownList1']"); 
```

但无论我使用什么 XPath 表达式（例如：`//subform`或`field[@name='DropDownList1']`），`SelectSingleNode`总是返回`null`，并`SelectNodes`返回一个空列表。

我在这里做错了吗？如果有更好的方法可以做到这一点，我很想知道。

这是一些xml（我想要字段节点）：

```
<?xml version="1.0" encoding="UTF-8"?>

<xdp:xdp xmlns:xdp="http://ns.adobe.com/xdp/" timeStamp="2013-01-18T13:22:31Z" uuid="3c6141a4-56b4-4f6e-8a2d-4519050f1c69">  

<template xmlns="http://www.xfa.org/schema/xfa-template/3.0/">  
<?formServer defaultPDFRenderFormat acrobat9.1dynamic?>  
    <subform name="form1" layout="tb" locale="en_US" restoreState="auto"> 
        <pageSet> 
            <pageArea name="Page1" id="Page1"> 
                <contentArea x="0.25in" y="0.25in" w="576pt" h="756pt"/>  
                <medium stock="default" short="612pt" long="792pt"/>  <?templateDesigner expand 0?> 
            </pageArea>
            <?templateDesigner expand 0?> 
        </pageSet>  
        <subform w="576pt" h="756pt" name="form2"> 
            <field name="DropDownList1" y="22.225mm" x="6.35mm" w="62mm" h="9mm"> 
                <ui> 
                    <choiceList> 
                        <border> 
                            <edge stroke="lowered"/> 
                        </border>  
                        <margin/> 
                    </choiceList> 
                </ui>  
                <font typeface="Myriad Pro"/>  
                <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>  
                <para vAlign="middle"/>  
                <caption reserve="25mm"> 
                    <para vAlign="middle"/>  
                    <value> 
                        <text>Drop-down List</text> 
                    </value> 
                </caption>  
                <items save="1"> 
                    <text>Item 1</text>  
                    <text>Item 2</text>  
                    <text>Item 3</text> 
                </items> 
            </field>  
        </subform>  
        <proto/>  
        <desc> 
            <text name="version">10.0.2.20120224.1.869952.867557</text> 
        </desc>
        <?templateDesigner expand 1?>
        <?renderCache.subset "Myriad Pro" 0 0 ISO-8859-1 4 112 28 0001000E001200130023002400250027002D0033003500420044004500460049004A004C004D004F00500051005300540055005600580059 -12BCDFLRTacdehiklnoprstuwx?>
    </subform>  
    <?templateDesigner DefaultPreviewDynamic 1?>
    <?templateDesigner DefaultRunAt client?>
    <?templateDesigner Grid show:1, snap:1, units:0, color:ff8080, origin:(0,0), interval:(125000,125000)?>
    <?templateDesigner DefaultCaptionFontSettings face:Myriad Pro;size:10;weight:normal;style:normal?>
    <?templateDesigner DefaultValueFontSettings face:Myriad Pro;size:10;weight:normal;style:normal?>
    <?templateDesigner DefaultLanguage JavaScript?>
    <?acrobat JavaScript strictScoping?>
    <?templateDesigner WidowOrphanControl 0?>
    <?templateDesigner SaveTaggedPDF 1?>
    <?templateDesigner SavePDFWithEmbeddedFonts 1?>
    <?templateDesigner FormTargetVersion 30?>
    <?templateDesigner Rulers horizontal:1, vertical:1, guidelines:1, crosshairs:0?>
    <?templateDesigner Zoom 92?>
</template>  
<xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve">
    <annots/>
</xfdf>
<datasets xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/"></datasets>
</xdp:xdp> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:36:32.127

您的 XPath 不起作用的原因是大多数 XML 都在 namespace 中`http://www.xfa.org/schema/xfa-template/3.0/`。

在这种情况下，适当的做法是创建`XmlNamespaceManager`并声明命名空间，然后在 XPath 中使用它们。请参阅[此帖子](https://stackoverflow.com/questions/14370989/which-xpath-expression-will-allow-me-to-select-these-nodes/14371073#14371073)以获取解释。

```
PdfReader reader = new PdfReader(myPdfPath);
XmlDocument xdoc = reader.AcroFields.Xfa.DomDocument;
XmlNamespaceManager nsm = new XmlNamespaceManager(xdoc.NameTable);
nsm.AddNamespace("xfa", "http://www.xfa.org/schema/xfa-template/3.0/");
XmlNode dropdown = 
  xdoc.SelectSingleNode("/*/xfa:template/xfa:subform[@name='form1']/xfa:subform[@name='form2']/xfa:field[@name='DropDownList1']",
  nsm); 
```

我也没有看到`subform`名为“form2”的元素。那是您刚刚没有包含在您的 XML 示例中的部分吗？

# delphi - Delphi XE2 64 位客户端连接到 Firebird 2.5

> ID：14460689
> 
> 赞同：2
> 
> 时间：2013-01-22T14:19:22.877
> 
> 标签：delphi, delphi-xe2, firebird, firebird2.5

我有一个针对 Firebird 2.5 32 位会话运行的 DelphiXE2 客户端。

我的开发环境是 Windows 7 64bit，我使用 InterBase 客户端组件。

只要我将项目编译为 32 位，一切正常。

该项目可以很好地编译为 64 位 - 非常高兴 :-) - 但是我在登录时收到“连接被远程接口拒绝”错误 - 不高兴 :-(

我已确保删除所有 gds32.dll 并安装了 Firebird 2.5 客户端 32 位 fbclient.dll。fbclient.dll 被复制到 SysWOW64 目录。

什么可能导致这种拒绝？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:13:30.637

系统的一个要求是：

**可执行文件加载的所有库必须具有相同**的位数，这意味着您必须在 64 位进程上加载 64 位 dll，在 32 位进程上加载 32 位 dll。

查看[64 位 Windows 限制列表中的](http://support.microsoft.com/kb/282423)**No Mixed 64-Bit/32-Bit Processes**条目

这也适用于 Firebird 客户端。为了从 64 位进程成功连接到您的 Firebird 数据库，您**必须安装 Firebird 的 64 位客户端**。

一台机器可能同时安装了 32 位和 64 位客户端，因为它们位于不同的文件夹中，所以 dll 可以并且通常具有相同的名称。

这不会影响连接到 32 或 64 位服务器的能力。换句话说，这不是关于 Firebird 服务器，而是关于 Firebird 客户端。

# javascript - 如何使用现代 js 框架（如骨干.js 或 angular.js）将遗留的 simgle 网页/应用程序重构为 MVC

> ID：14460694
> 
> 赞同：2
> 
> 时间：2013-01-22T14:19:35.560
> 
> 标签：javascript, html, css, model-view-controller, web-applications

我想知道示例、建议和框架，以便以正确的方式开始在需要在 ie 7 中工作的 MVC/MVP js 应用程序中使用 html、css 和 js 文件（jquery）构建单页 Web 应用程序（这是强制性的），但如果可能的话，我希望这个应用程序也能在其他浏览器中运行良好。

代码有很多 if 和 else，每个都使用 document.write() js 方法来编写页面元素。到90年代风格呢，如下图：

```
if ($auth$ == 19) {
   document.write("<TR>");
   document.write("<TD NOWRAP WIDTH='100%'  height='26'>");
   document.write("<font face='Arial, Helvetica'><B>$username$</B> you cannot access your account.<p>Please contact your Security Administrator or Help Desk.</font>");
        document.write("    </TD>");
        document.write("</TR>");
} 
```

这个 Web 应用程序的 80% 都是以这种方式编写的，这取决于外部变量值

什么是 js 现代框架或现代方法让我能够以 MVC/MVP js 方式对此进行原型设计？

一些参考资料？教程？

很高兴得到您的帮助，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:33:29.463

我花了很多时间研究可用的东西。 [KnockoutJS](http://knockoutjs.com/)有一个很棒的教程网站。然后我发现[AngularJS](http://angularjs.org/)要复杂得多，因为它做得更多。Angular 是一个完整的框架，可以进行路由、数据绑定（没有 observables），并允许您使用指令构建以应用程序域为中心的应用程序。

我喜欢 Angular 团队的另一件事是他们都是关于测试的。他们发布了[Testacular](http://vojtajina.github.com/testacular/)测试运行程序，它监视您的文件系统，当任何文件更改时，它会在您选择的浏览器中运行您的单元测试。基于浏览器的自动化单元测试，我很快就迷上了。

我读过很多人不喜欢 AngularJS，因为那里有很多其他的东西在不断发展，它们专注于 SPA 的特定方面，例如 historyJS、backboneJS、sammyJS ......每一个都有自己的重点，可能把工作做得更好。我个人相信 AngularJS 有 google 的支持，它的社区确实在增长。

John Lindquest 有一组很棒的教程，他最近刚在[egghead.io](http://egghead.io/)开始。

[ngmodules.org](http://ngmodules.org/)上有一个模块社区，它展示了将扩展模块构建到 Angular 应用程序中的简易性。

[AngularJS](http://www.youtube.com/user/angularjs)的youtube 页面对我跟上 Angular 应用程序的建议结构非常有帮助。

我建议检查一下。一旦你用有角度的方式来做这件事，你就真的改变了你的思维方式。

# sql - 使用 SQL DB for i 的行的最高百分比

> ID：14460695
> 
> 赞同：2
> 
> 时间：2013-01-22T14:19:43.853
> 
> 标签：sql, odbc, db2, ibm-midrange

我试图获得一个返回值的前 80% 的返回值。使用 SQL DB for i`TOP`子句将不起作用。我已经看到了一些`Count()`在嵌套选择语句中使用的示例，但我不确定它应该如何适合我已经编写的查询。我已经有 2 个子查询，所以我需要找出它如何适合，或者它是否可以工作。这是我到目前为止所拥有的：

```
Select  CATEGORY,
    LINE,
    ITEM#,
    Units
From    D*****.*****ST
Inner Join  (Select DW******.*****FO.ITEM,
                    Sum (SALES_UNITS) As Units,
                    CATEGORY
            From    DW*******.*****FO
            Inner Join  (Select CATEGORY,
                                DW****.******RY.ITEM
                         From   DW****.******RY
                         Where  CATEGORY='BRAKES') As CA***ST
            On DW*******.*****FO.ITEM=CA*****.***M              
            Where   ("DATE" between current date -1 years and current date) And (SALES > 5.00)
            Group By    DW*******.******O.ITEM,
                        CATEGORY) As Units_List
On      DW****.*****ST.**EM#=U*********.***M
Group By    CATEGORY,
            LINE,
            ITEM#,
            Units
Order By    Units DESC 
```

因此，这里的某个地方将是`Count()`我假设的嵌套子句，我只是不确定它在总体方案中的位置。我还在学习一些中级 SQL 的东西，所以如果问题看起来有点简单，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:24:02.573

我建议使用窗口函数。我发现您的查询很难理解，但这是一个想法：

```
select t.*
from (select t.*,
             row_number() over (order by units desc) as seqnum,
             count(*) over () as totnum
      from (<view that gets you all the data you want>
           ) t
     ) t
 where seqnum <= 0.8*totnum 
```

这个想法是使用窗口函数来获取总数和排名（我使用`row_number()`，`rank()`如果你有关系可能更合适）。然后，您可以只使用一个`where`子句来获取您想要的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:50:29.483

好吧，首先，您的子选择是不必要的，我发现使用更简单的连接语句更容易阅读。如果您折叠子查询，使用 count(*) 的技术将更容易结合。

接下来，向现有查询添加计数存在问题。如果您已经在使用 count，那么添加连接和计数可能会混淆两个计数，因为连接会创建笛卡尔积，并且 count 和 sum 可能会得到错误的答案。你还没有 count 或 sum，所以你不必担心这个陷阱。

```
Select  RY.CATEGORY, ST.LINE, ST.ITEM#, FO.Units
From    D*****.*****ST ST
  Inner Join DW*******.*****FO FO On ST.ITEM# = FO.ITEM
  Inner Join DW****.******RY RY On FO.ITEM = RY.ITEM
    And ("DATE" between current date -1 years and current date)
    And (SALES > 5.00)
  Inner Join D*****.*****ST ST_J On ST.LINE = ST_J.LINE And ST.ITEM# = ST_J.ITEM#
  Inner Join DW*******.*****FO FO On ST_J.ITEM# = FO_J.ITEM
Where FO_J.Units >= FO.Units
Group By    RY.CATEGORY, ST.LINE, ST.ITEM#, FO.Units
Having      Count(FO_J.Units) < 0.8 * (Select Count(*)
      From D*****.*****ST ST_J On ST.LINE = ST_J.LINE And ST.ITEM# = ST_J.ITEM#
      Inner Join DW*******.*****FO FO On ST_J.ITEM# = FO_J.ITEM)
Order By    FO.Units DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:45:27.707

这是一般的 Oracle 示例，可能对您有所帮助。我不确定您使用的是哪个数据库：

```
SELECT deptno, ename, sal
     , PERCENT_RANK() OVER (PARTITION BY deptno ORDER BY sal DESC) AS prcnt
  FROM scott.emp
ORDER BY prcnt DESC, sal, ename
/

DEPTNO      ENAME   SAL     PRCNT
--------------------------------
10          MILLER  1300    1
...
20          ADAMS   1100    0.75
30          MARTIN  1250    0.6
...
10          CLARK   2450    0.5
...
30          TURNER  1500    0.4 
```

# javascript - 在three.js中放大鼠标指针

> ID：14460707
> 
> 赞同：2
> 
> 时间：2013-01-22T14:20:19.447
> 
> 标签：javascript, three.js

使用thingiview.js、Three.js 和trackballControls，我建立了一个系统，我可以在其中上传一个STL 文件，然后在画布上渲染它。trackballControls 通过一些调整非常棒，但我遇到了一个问题：

我想放大鼠标光标的点而不是网格/平面的中心。

我已经完成了一个简单的 captureEvent 来获取鼠标的屏幕坐标并对其进行跟踪，但是我在确定在何处使用控制方案来执行此操作时遇到了问题。

我检查了 _zoomStart / _zoomEnd 的东西（这让我有点困惑，因为它离开了“y”，我认为它会是“z”）。但是当尝试添加 _zoomStart.x 时，它基本上会忽略它。

现在我可能不是大师，但我通常很舒服。

我还想确保当我平移时，缩放和旋转仍然基于对象的中心，而不是网格/平面的中心。

已经通过帖子和示例搜索了几天，但没有真正找到任何答案。

我确定我没有在正确的地方/朝着正确的方向寻找。在正确的方向上进行有用的轻推（或者更好的是快速踢）将真正受到赞赏。

**编辑**

```
this.zoomCamera = function () {

        var factor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * _this.zoomSpeed;

        if ( factor !== 1.0 && factor > 0.0 ) {

            _eye.multiplyScalar( factor );

            if ( _this.staticMoving ) {

                _zoomStart.copy( _zoomEnd );

            } else {

                _zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;

            }

        }

    }; 
```

我假设以上是我要进行缩放更改的地方。我不明白的是它被设置为_zoomStart.y。但是照原样，我将如何实现x？

我的意思是，如果 _zoomStart 和 _zoomEnd 是 Vector2，那么它在上面的代码中哪里定义了 x？

*困惑*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:54:48.080

放大 Trackballcontrols 实际上并不是在缩放（这将设置相机 fov）。两个对象只是在控件中移动......，另一个是相机（this.object），另一个是它正在查看的点（this.target）。我没有玩太多轨迹球控件，但我会冒险猜测它根本不会触及目标（因此所有移动和缩放都将围绕它进行）。

您可以尝试在 onclick 更改目标，例如：

```
mycontrols.target = new THREE.Vector3(newx, newy, newz); 
```

您可能需要更新/重置一些其他 Trackballcontrols 内部变量，但它也可能像那样工作。

为了从 2D x/y 鼠标坐标中获取 3D x/y/z 坐标，我建议搜索光线投射或对象拾取，应该找到很多示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-26T13:46:00.537

诀窍是**_zoomStart**和**_zoomEnd**是为触摸缩放而创建的，当您使用鼠标滚轮进行缩放时，您只需传递一个变量来表示：“*要缩放多少*”。程序员没有为其创建新变量，而是使用了**_zoom###.y**组件。

因此**_zoomStart**和**_zoomEnd**不提供有关如何执行缩放的信息，这些变量仅包含“*指令*”。然后软件将其转换为“ *zoompan* ”矢量，以 3D 形式表示相机所需的运动。

# php - PHP+javascript输入URL解析

> ID：14460716
> 
> 赞同：0
> 
> 时间：2013-01-22T14:20:36.517
> 
> 标签：php, url

所以我需要用户提供他们网站的 URL...

通过测试，它们通常以下列形式提交：

1.  [http://www.domain.com/page.html](http://www.domain.com/page.html)
2.  www.domain.com/page.html
3.  <a href="http://www.domain.com/page.html">http://www.domain.com/page.html</a>
4.  [https://www.domain.com/page.html](https://www.domain.com/page.html)

实际 url 的变化，主要符合 URL 规范： [http ://www.ietf.org/rfc/rfc1738.txt](http://www.ietf.org/rfc/rfc1738.txt)

我想以 1/4 格式存储 URL，协议完好无损，我想如果没有定义协议，我将使用 http。

除了尝试确定输入哪种形式然后尝试转换之外，是否有一种策略可以提供有效的转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:00:43.973

由于您想要更改上述 4 种格式中实际上只有 1 种格式，因此您可以使用以下格式

```
$x = "www.domain.com/page.html";
if(strpos($x, "http") === false){
    $x = "http://".$x;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:27:43.117

```
$user_url = "www.domain.com/page.html"; // User submitted URL
$enhanced_url = substr($user_url , strpos($user_url,".") + 1 ); 
```

这将在您提到的所有情况下返回 domain.com/page.html

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:11:53.073

最好的方法是使用[正则表达式](http://www.regular-expressions.info/examples.html)。php代码：

```
$text = "FTP Source: ftp://ftp.testftp.com/ - 
        My mail adress is name@yahoo.com and 
        I love www.facebook.com/ 
        I search things using http://www.google.fr/";
$urlRegularExpression = "/([fhtps]*:\/\/)?([a-zA-Z0-9\.-]*\.[a-zA-Z]{2,6})/";
preg_match_all($urlRegularExpression, $text, $urls);
print_r($urls); 
```

结果：

```
Array
(
    [0] => Array //THE WHOLE RESULTS
        (
            [0] =>  'ftp://ftp.testftp.com'
            [1] =>  'www.facebook.com'
            [2] =>  'http://www.google.fr'
        )

    [1] => Array //THE PROTOCOLS USED (ftp, http, sftp, https)
        (
            [0] => 'ftp://'
            [1] => ''
            [2] => 'http://'
        )

    [2] => Array //THE ADRESS WITHOUT PROTOCOL
        (
            [0] => 'ftp.testftp.com'
            [1] => 'www.facebook.com'
            [2] => 'www.google.fr'
        )

) 
```

编辑：您可以在正则表达式的 :// 之前移动 ) 以仅获取协议名称：

```
$urlRegularExpression = "/([fhtps]*):\/\/?([a-zA-Z0-9\.-]*\.[a-zA-Z]{2,6})/"; 
```

示例：http:// -> http

# python - 从python中的字典准备一个列表

> ID：14460717
> 
> 赞同：0
> 
> 时间：2013-01-22T14:20:40.537
> 
> 标签：python, django, dictionary

我有以下格式的字典。

```
[{'assignedzip_longitude': -71.064699000000005,
  'assignedzip_numberpolygon': u'-71.064483,42.347181 -71.062819,42.346781 -71.061012,42.346099 -71.060932,42.345734 -71.060514,42.345511 -71.060566,42.344569 -71.05971,42.344816 -71.057818,42.346189 -71.05595,42.346601 -71.05683,42.347199 -71.05572,42.34714 -71.052975,42.351364 -71.055483,42.352548 -71.056277,42.35286 -71.056276,42.352891 -71.056476,42.353006 -71.05678,42.353126 -71.056999,42.353208 -71.057292,42.353273 -71.05914,42.35459 -71.06048,42.3555 -71.061772,42.356065 -71.062008,42.355811 -71.062073,42.355276 -71.06287,42.35567 -71.06331,42.35521 -71.064136,42.353623 -71.06423,42.35339 -71.06456,42.35238 -71.063717,42.352295 -71.06258,42.3524 -71.06276,42.35148 -71.063056,42.350902 -71.064275,42.348432 -71.064483,42.347181',
  'assignedzip_pk': u'02111',
  'name': u'Any Name',
  'store_latitude': 42.353197999999999,
  'store_longitude': -71.057495000000003},
 {'assignedzip_latitude': 42.360587000000002,
  'assignedzip_longitude': -71.065447000000006,
  'assignedzip_numberpolygon': u'-71.077051,42.358732 -71.075592,42.355871 -71.075243,42.355601 -71.075054,42.355336 -71.073294,42.355803 -71.073326,42.356427 -71.072439,42.358829 -71.0711,42.358812 -71.071075,42.358278 -71.070669,42.357699 -71.06981,42.35788 -71.070192,42.358828 -71.0677,42.35887 -71.06507,42.35886 -71.065089,42.358327 -71.064355,42.358356 -71.063953,42.358406 -71.062857,42.35865 -71.062873,42.359362 -71.062888,42.361159 -71.061415,42.360908 -71.061495,42.358804 -71.060177,42.359171 -71.060143,42.359052 -71.059765,42.359093 -71.059424,42.359539 -71.05974,42.359735 -71.060275,42.360502 -71.060931,42.360849 -71.060833,42.361341 -71.059718,42.361851 -71.058526,42.362498 -71.057623,42.362647 -71.057993,42.362995 -71.058227,42.364403 -71.058577,42.366966 -71.059112,42.367823 -71.060008,42.369051 -71.063087,42.368704 -71.062968,42.368323 -71.064329,42.369163 -71.064398,42.368983 -71.065072,42.36883 -71.065397,42.368993 -71.067653,42.368983 -71.069793,42.369082 -71.070245,42.368701 -71.070569,42.368283 -71.070816,42.367967 -71.071583,42.368362 -71.071628,42.36829 -71.071625,42.368228 -71.07091,42.367872 -71.075705,42.361646 -71.077051,42.358732',
  'assignedzip_pk': u'02114',
  'name': u'Test Name',
  'store_latitude': 42.357497000000002,
  'store_longitude': -71.058494999999994}] 
```

我想在 for 循环中准备另一个字典，该字典应该是这样的。

```
my_dict = {'name': 'Any Name', 'store_lat': 42.353198, 'store_lang': -71.057495, numberpolygon:[[-71.075705, 42.361646],[-71.077051,42.358732],[-71.071625,42.368228]]}....... 
```

数字多边形值需要用空格分隔。

我已尝试使用以下代码，但进展不大。

```
for dd in data_dict:
    for val in dd['assignedzip_numberpolygon'].split(" "):                                                                                                                          
        print val 
```

由于我是 python 和 django 的新手，所以无法找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:33:04.697

如果主要问题是拆分字符串，您可以这样做：

```
[tuple(map(float, substr.split(','))) for substr in polygon.split(' ')] 
```

我从value`polygon`复制的字符串在哪里。`assignedzip_numberpolygon`它将有元组而不是数字对的列表，如果您可以更改格式，我会建议您这样做。否则，更改`tuple()`为`list()`（如果您使用的是 Python 2，则将其删除）。

所以你可以这样做：

```
new_dict = {}
new_dict['name'] = old_dict['name']
new_dict['store_lat'] = old_dict['store_latitude']
new_dict['numberpolygon'] = [tuple(map(float, substr.split(',')))
               for substr in old_dict['assignedzip_numberpolygon'].split(' ')] 
```

..ETC。如果您确实需要对列表中的项目执行此操作，请将此代码放入循环（`for old_dict in results`或其他内容）中并附`new_dict`加到循环主体末尾的列表（例如）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:33:49.067

拆分相对容易；使其成为一个单独的功能：

```
import ast

def splitpolygon(poly):
    return [ast.literal_eval(coords) for coords in poly.split()] 
```

这使用该[`ast.literal_eval()`](http://docs.python.org/2/library/ast.html#ast.literal_eval)函数将每个浮点对（用逗号分隔）转换为 python 浮点值的元组：

```
>>> poly = u'-71.064483,42.347181 -71.062819,42.346781 -71.061012,42.346099 -71.060932,42.345734 -71.060514,42.345511 -71.060566,42.344569 -71.05971,42.344816 -71.057818,42.346189 -71.05595,42.346601 -71.05683,42.347199 -71.05572,42.34714 -71.052975,42.351364 -71.055483,42.352548 -71.056277,42.35286 -71.056276,42.352891 -71.056476,42.353006 -71.05678,42.353126 -71.056999,42.353208 -71.057292,42.353273 -71.05914,42.35459 -71.06048,42.3555 -71.061772,42.356065 -71.062008,42.355811 -71.062073,42.355276 -71.06287,42.35567 -71.06331,42.35521 -71.064136,42.353623 -71.06423,42.35339 -71.06456,42.35238 -71.063717,42.352295 -71.06258,42.3524 -71.06276,42.35148 -71.063056,42.350902 -71.064275,42.348432 -71.064483,42.347181'
>>> splitpolygon(poly)
[(-71.064482999999996, 42.347180999999999), (-71.062819000000005, 42.346781), (-71.061012000000005, 42.346099000000002), (-71.060931999999994, 42.345734), (-71.060513999999998, 42.345511000000002), (-71.060565999999994, 42.344569), (-71.059709999999995, 42.344816000000002), (-71.057817999999997, 42.346189000000003), (-71.055949999999996, 42.346601), (-71.056830000000005, 42.347199000000003), (-71.055719999999994, 42.347140000000003), (-71.052975000000004, 42.351363999999997), (-71.055482999999995, 42.352547999999999), (-71.056276999999994, 42.35286), (-71.056275999999997, 42.352891), (-71.056476000000004, 42.353006000000001), (-71.056780000000003, 42.353126000000003), (-71.056999000000005, 42.353208000000002), (-71.057292000000004, 42.353273000000002), (-71.059139999999999, 42.354590000000002), (-71.060479999999998, 42.355499999999999), (-71.061772000000005, 42.356065000000001), (-71.062008000000006, 42.355811000000003), (-71.062072999999998, 42.355276000000003), (-71.062870000000004, 42.355670000000003), (-71.063310000000001, 42.35521), (-71.064136000000005, 42.353622999999999), (-71.064229999999995, 42.353389999999997), (-71.06456, 42.352379999999997), (-71.063716999999997, 42.352294999999998), (-71.062579999999997, 42.352400000000003), (-71.062759999999997, 42.351480000000002), (-71.063056000000003, 42.350901999999998), (-71.064274999999995, 42.348432000000003), (-71.064482999999996, 42.347180999999999)] 
```

现在您只需遍历每个字典并将该函数应用于多边形：

```
myresults = []
for res in data_dict:
    res_copy = dict(res)
    res_copy['assignedzip_numberpolygon'] = splitpolygon(res_copy['assignedzip_numberpolygon'])
    myresults.append(res_copy) 
```

这将使用复制每个结果字典，以便我们可以在将其存储到新列表之前对其`dict(original)`进行更改（替换值）。`assignedzip_numberpolygon`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:38:43.860

最困难的部分是解析该字符串，这相当简单：

```
>>> assignedzip_numberpolygon_str = '-71.064483,42.347181 -71.062819,42.346781 -71.061012,42.346099 -71.060932,42.345734 -71.060514,42.345511 -71.060566,42.344569 -71.05971,42.344816 -71.057818,42.346189 -71.05595,42.346601 -71.05683,42.347199 -71.05572,42.34714 -71.052975,42.351364 -71.055483,42.352548 -71.056277,42.35286 -71.056276,42.352891 -71.056476,42.353006 -71.05678,42.353126 -71.056999,42.353208 -71.057292,42.353273 -71.05914,42.35459 -71.06048,42.3555 -71.061772,42.356065 -71.062008,42.355811 -71.062073,42.355276 -71.06287,42.35567 -71.06331,42.35521 -71.064136,42.353623 -71.06423,42.35339 -71.06456,42.35238 -71.063717,42.352295 -71.06258,42.3524 -71.06276,42.35148 -71.063056,42.350902 -71.064275,42.348432 -71.064483,42.347181'
>>> assignedzip_numberpolygon = [map(float, coord.split(",")) for coord in assignedzip_numberpolygon_str.split()]
>>> assignedzip_numberpolygon
[[-71.064483, 42.347181], [-71.062819, 42.346781], [-71.061012, 42.346099], [-71.060932, 42.345734], [-71.060514, 42.345511], [-71.060566, 42.344569], [-71.05971, 42.344816], [-71.057818, 42.346189], [-71.05595, 42.346601], [-71.05683, 42.347199], [-71.05572, 42.34714], [-71.052975, 42.351364], [-71.055483, 42.352548], [-71.056277, 42.35286], [-71.056276, 42.352891], [-71.056476, 42.353006], [-71.05678, 42.353126], [-71.056999, 42.353208], [-71.057292, 42.353273], [-71.05914, 42.35459], [-71.06048, 42.3555], [-71.061772, 42.356065], [-71.062008, 42.355811], [-71.062073, 42.355276], [-71.06287, 42.35567], [-71.06331, 42.35521], [-71.064136, 42.353623], [-71.06423, 42.35339], [-71.06456, 42.35238], [-71.063717, 42.352295], [-71.06258, 42.3524], [-71.06276, 42.35148], [-71.063056, 42.350902], [-71.064275, 42.348432], [-71.064483, 42.347181]] 
```

然后你所要做的就是复制 dict 并专门处理这种情况：

```
def parse_assignedzip_numberpolygon(s):
    return [map(float, coord.split(",")) for coord in s.split()]

def proc_data_dict(d):
    new_d = d.copy()
    new_d['assignedzip_numberpolygon'] = parse_assignedzip_numberpolygon(d['assignedzip_numberpolygon'])
    return new_d 
```

这是一个示例用法：

```
dataset = [{'assignedzip_longitude': -71.064699000000005,
  'assignedzip_numberpolygon': u'-71.064483,42.347181 -71.062819,42.346781 -71.061012,42.346099 -71.060932,42.345734 -71.060514,42.345511 -71.060566,42.344569 -71.05971,42.344816 -71.057818,42.346189 -71.05595,42.346601 -71.05683,42.347199 -71.05572,42.34714 -71.052975,42.351364 -71.055483,42.352548 -71.056277,42.35286 -71.056276,42.352891 -71.056476,42.353006 -71.05678,42.353126 -71.056999,42.353208 -71.057292,42.353273 -71.05914,42.35459 -71.06048,42.3555 -71.061772,42.356065 -71.062008,42.355811 -71.062073,42.355276 -71.06287,42.35567 -71.06331,42.35521 -71.064136,42.353623 -71.06423,42.35339 -71.06456,42.35238 -71.063717,42.352295 -71.06258,42.3524 -71.06276,42.35148 -71.063056,42.350902 -71.064275,42.348432 -71.064483,42.347181',
  'assignedzip_pk': u'02111',
  'name': u'Any Name',
  'store_latitude': 42.353197999999999,
  'store_longitude': -71.057495000000003},
 {'assignedzip_latitude': 42.360587000000002,
  'assignedzip_longitude': -71.065447000000006,
  'assignedzip_numberpolygon': u'-71.077051,42.358732 -71.075592,42.355871 -71.075243,42.355601 -71.075054,42.355336 -71.073294,42.355803 -71.073326,42.356427 -71.072439,42.358829 -71.0711,42.358812 -71.071075,42.358278 -71.070669,42.357699 -71.06981,42.35788 -71.070192,42.358828 -71.0677,42.35887 -71.06507,42.35886 -71.065089,42.358327 -71.064355,42.358356 -71.063953,42.358406 -71.062857,42.35865 -71.062873,42.359362 -71.062888,42.361159 -71.061415,42.360908 -71.061495,42.358804 -71.060177,42.359171 -71.060143,42.359052 -71.059765,42.359093 -71.059424,42.359539 -71.05974,42.359735 -71.060275,42.360502 -71.060931,42.360849 -71.060833,42.361341 -71.059718,42.361851 -71.058526,42.362498 -71.057623,42.362647 -71.057993,42.362995 -71.058227,42.364403 -71.058577,42.366966 -71.059112,42.367823 -71.060008,42.369051 -71.063087,42.368704 -71.062968,42.368323 -71.064329,42.369163 -71.064398,42.368983 -71.065072,42.36883 -71.065397,42.368993 -71.067653,42.368983 -71.069793,42.369082 -71.070245,42.368701 -71.070569,42.368283 -71.070816,42.367967 -71.071583,42.368362 -71.071628,42.36829 -71.071625,42.368228 -71.07091,42.367872 -71.075705,42.361646 -71.077051,42.358732',
  'assignedzip_pk': u'02114',
  'name': u'Test Name',
  'store_latitude': 42.357497000000002,
  'store_longitude': -71.058494999999994}]

for d in dataset:
    new_d = proc_data_dict(d)
    print new_d 
```

输出是：

```
{'store_latitude': 42.353198, 'name': u'Any Name', 'assignedzip_numberpolygon': [[-71.064483, 42.347181], [-71.062819, 42.346781], [-71.061012, 42.346099], [-71.060932, 42.345734], [-71.060514, 42.345511], [-71.060566, 42.344569], [-71.05971, 42.344816], [-71.057818, 42.346189], [-71.05595, 42.346601], [-71.05683, 42.347199], [-71.05572, 42.34714], [-71.052975, 42.351364], [-71.055483, 42.352548], [-71.056277, 42.35286], [-71.056276, 42.352891], [-71.056476, 42.353006], [-71.05678, 42.353126], [-71.056999, 42.353208], [-71.057292, 42.353273], [-71.05914, 42.35459], [-71.06048, 42.3555], [-71.061772, 42.356065], [-71.062008, 42.355811], [-71.062073, 42.355276], [-71.06287, 42.35567], [-71.06331, 42.35521], [-71.064136, 42.353623], [-71.06423, 42.35339], [-71.06456, 42.35238], [-71.063717, 42.352295], [-71.06258, 42.3524], [-71.06276, 42.35148], [-71.063056, 42.350902], [-71.064275, 42.348432], [-71.064483, 42.347181]], 'assignedzip_longitude': -71.064699, 'store_longitude': -71.057495, 'assignedzip_pk': u'02111'}
{'store_latitude': 42.357497, 'name': u'Test Name', 'assignedzip_numberpolygon': [[-71.077051, 42.358732], [-71.075592, 42.355871], [-71.075243, 42.355601], [-71.075054, 42.355336], [-71.073294, 42.355803], [-71.073326, 42.356427], [-71.072439, 42.358829], [-71.0711, 42.358812], [-71.071075, 42.358278], [-71.070669, 42.357699], [-71.06981, 42.35788], [-71.070192, 42.358828], [-71.0677, 42.35887], [-71.06507, 42.35886], [-71.065089, 42.358327], [-71.064355, 42.358356], [-71.063953, 42.358406], [-71.062857, 42.35865], [-71.062873, 42.359362], [-71.062888, 42.361159], [-71.061415, 42.360908], [-71.061495, 42.358804], [-71.060177, 42.359171], [-71.060143, 42.359052], [-71.059765, 42.359093], [-71.059424, 42.359539], [-71.05974, 42.359735], [-71.060275, 42.360502], [-71.060931, 42.360849], [-71.060833, 42.361341], [-71.059718, 42.361851], [-71.058526, 42.362498], [-71.057623, 42.362647], [-71.057993, 42.362995], [-71.058227, 42.364403], [-71.058577, 42.366966], [-71.059112, 42.367823], [-71.060008, 42.369051], [-71.063087, 42.368704], [-71.062968, 42.368323], [-71.064329, 42.369163], [-71.064398, 42.368983], [-71.065072, 42.36883], [-71.065397, 42.368993], [-71.067653, 42.368983], [-71.069793, 42.369082], [-71.070245, 42.368701], [-71.070569, 42.368283], [-71.070816, 42.367967], [-71.071583, 42.368362], [-71.071628, 42.36829], [-71.071625, 42.368228], [-71.07091, 42.367872], [-71.075705, 42.361646], [-71.077051, 42.358732]], 'assignedzip_longitude': -71.065447, 'store_longitude': -71.058495, 'assignedzip_latitude': 42.360587, 'assignedzip_pk': u'02114'} 
```

# .net - 正则表达式添加条件必须有 1 个或多个 AZ az

> ID：14460723
> 
> 赞同：-1
> 
> 时间：2013-01-22T14:21:02.060
> 
> 标签：.net, regex

现有的正则表达式

```
rWord = new Regex(@"\b(?:[-_'@\p{L}\p{N}]{2,40})\b"); 
```

要添加至少有一个 AZ 或 az 的条件

为什么这会被否决？

现在

123 可以通过
abc 可以通过
1ab 可以通过

我希望 123 不通过，因为它没有至少一个 AZ 或 az

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:30:36.477

为一个或多个字母尝试以下正则表达式：

```
[A-Za-z]+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:33:24.303

您可以添加要求至少一个字母的[前瞻条件：](http://www.regular-expressions.info/lookaround.html)

```
(?=[-_'@\p{L}\p{N}]*[a-zA-Z]) 
```

结合您的原件，这将变为：

```
\b(?:(?=[-_'@\p{L}\p{N}]*[a-zA-Z])[-_'@\p{L}\p{N}]{2,40})\b 
```

[reFiddle](http://refiddle.com/gk6)的工作示例。

# asp.net-mvc-3 - 使用 datareader 填充 mvc 模型时解决对象引用错误？

> ID：14460727
> 
> 赞同：0
> 
> 时间：2013-01-22T14:21:25.967
> 
> 标签：asp.net-mvc-3, model, ado.net, datareader

我正在使用 MVC 3，并且正在使用数据阅读器来创建具有子项的项目列表。当我添加子项时，我得到“对象引用未设置为对象的实例”。使用以下代码：

```
QuestionaireLine question = new QuestionaireLine();
         question.Question_ID = Convert.ToInt32(reader["Question_ID"]);
         question.Question_Answer = reader["Question_Answer"].ToString();
         ...etc..
         currentGroup.Lines.Add(question); //exception thrown here 
```

型号：

```
 public class Questionaire
    {
        public int Question_Group_Id { get; set; }
        public string Question_Group_Name { get; set; }
        public int Question_Group_Indent { get; set; }
        public int Question_Group_Order { get; set; }
        public List<QuestionaireLine> Lines { get; set; }
    }

public class QuestionaireLine
    {
         public int Question_ID { get; set; }
         public string Question_Label { get; set; }
         public string Question_Answer { get; set; }
         public int Data_Type { get; set; }
         public int Control_Type { get; set; }
         public string Data_Choices { get; set; }
         public int Data_Max_Length { get; set; }
         public bool Issue_Tagged { get; set; }
         public int Question_Order { get; set; }
         public string NumberedQuestion
         {
             get { return String.Format("{0}. {1}", Question_Order, Question_Label); }
         }
    } 
```

整个代码： **//我错过了什么？**

```
using (var conn = new SqlConnection(_connectionString))
            {
                List<Questionaire> groups = new List<Questionaire>();
                var com = new SqlCommand();
                com.Connection = conn;
                com.CommandType = CommandType.StoredProcedure;
                com.Parameters.Add(new SqlParameter
                {
                    ParameterName = "@Review_ID",
                    Value = reviewID
                });
                com.CommandText = "Review_Get_Question_Groups_Answers";

                conn.Open();

                // Get the reader
                SqlDataReader reader = com.ExecuteReader();

                // Process each result in the result set
                int currQuestionGroupId = 0;

                Questionaire currentGroup = null;
                while (reader.Read())
                {
                    var questionGroupId = Convert.ToInt32(reader["Question_Group_Id"]);
                    if (questionGroupId != currQuestionGroupId)
                    {
                        currQuestionGroupId = questionGroupId;
                        if (currentGroup != null)
                        {
                            groups.Add(currentGroup);   
                        }
                        currentGroup = new Questionaire();
                        currentGroup.Question_Group_Id = Convert.ToInt32(reader["Question_Group_Id"]);
                        currentGroup.Question_Group_Indent = Convert.ToInt32(reader["Question_Group_Indent"]);
                        currentGroup.Question_Group_Name = reader["Question_Group_Name"].ToString();
                        currentGroup.Question_Group_Order = Convert.ToInt32(reader["Question_Group_Order"]);
                    }
                    if (reader["Question_ID"] != DBNull.Value) 
                    {
                        QuestionaireLine question = new QuestionaireLine();
                        question.Question_ID = Convert.ToInt32(reader["Question_ID"]);
                        question.Question_Answer = reader["Question_Answer"].ToString();
                        question.Issue_Tagged = Convert.ToBoolean(reader["Issue_Tagged"]);
                        question.Data_Type = Convert.ToInt32(reader["Data_Type"]);
                        question.Data_Max_Length = Convert.ToInt32(reader["Data_Max_Length"]);
                        question.Data_Choices = reader["Data_Choices"].ToString();
                        question.Question_Label = reader["Question_Label"].ToString();
                        question.Question_Order = Convert.ToInt32(reader["Question_Order"]);
                        question.Control_Type = Convert.ToInt32(reader["Control_Type"]);
                        currentGroup.Lines.Add(question);
                    }
                    if (currentGroup != null)
                    {
                        groups.Add(currentGroup);
                    }
                }

                reader.Close();
                com.Dispose();
                return groups;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:33:46.593

您在实例`Lines`上的属性为 Null。`Questionaire`改成：

```
 public class Questionaire
    {
        public int Question_Group_Id { get; set; }
        public string Question_Group_Name { get; set; }
        public int Question_Group_Indent { get; set; }
        public int Question_Group_Order { get; set; }
        public List<QuestionaireLine> Lines { get; set; }

        public Questionaire() {
            Lines = new List<QuestionaireLine>();

    } 
```

顺便说一句，单步执行您的代码会向您展示这一点。

# c# - kinect SDK 骨架头坐标

> ID：14460731
> 
> 赞同：1
> 
> 时间：2013-01-22T14:21:44.383
> 
> 标签：c#, kinect, kinect-sdk

我是 c#、wpf 和 kinect SDK 的新手。

我有一个可以跟踪多个骨架的项目。

现在我需要拍摄用户头部周围区域的照片。所以我想知道骨骼顶部在kinect的视野中的什么位置。

我不想使用面部跟踪，因为我认为它对于我想要完成的事情来说很复杂。

那么有没有一种简单的方法可以仅使用骨架来知道头部的位置？最好是一组坐标，它位于 kinect 的整个视野​​中。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:41:54.120

向量位置 = data.Joints[JointID.Head].Position;

如果您需要此行的更多上下文信息 [http://www.i-programmer.info/programming/hardware/3503-getting-started-with-microsoft-kinect-sdk-skeletons.html?start=1](http://www.i-programmer.info/programming/hardware/3503-getting-started-with-microsoft-kinect-sdk-skeletons.html?start=1)

# php - 如何在 PHP 中转义这个 JavaScript 变量

> ID：14460733
> 
> 赞同：0
> 
> 时间：2013-01-22T14:21:47.637
> 
> 标签：php, javascript, html

使用 PHP echo 我想在浏览器中得到这个：

```
var x = "<td><a class=\"button3\"><input type=\"text\" name=\"" + a + "_" + y + "\" id=\"something\" value=\"\" class=\"inputText\"></a></td>"; 
```

如何在 PHP 中转义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:24:07.983

您似乎没有使用单引号`'`，因此在使用单引号时将代码行包装在字符串中非常容易。

要在浏览器中*逐字显示*文本，您可以使用该[`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)函数并将`echo`其输出到浏览器：

```
echo htmlentities('var x = "<td><a class=\"button3\"><input type=\"text\" name=\"" + a + "_" + y + "\" id=\"something\" value=\"\" class=\"inputText\"></a></td>";'); 
```

它将转换 HTML 中使用的所有字符以创建标签。例如`<`转换为，`&lt;`因此它显示正确的字符。请查看[可用标志](http://php.net/manual/en/function.htmlentities.php)并选择正确显示代码行所需的标志。

# java - 通过 AS1 或 AS2 或 AS3 协议将 EDI 或 XML 文档从一台机器传输到另一台机器

> ID：14460735
> 
> 赞同：2
> 
> 时间：2013-01-22T14:22:03.310
> 
> 标签：java, xml, edi

我想编写一个简单的 java 程序，使用 AS1 或 AS2 或 AS3 协议将 EDI 或 XML 文档从一台机器传输到另一台机器。

任何人都可以帮助我开始使用它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-06T17:52:11.680

OpenAS2 的最新更新刚刚发布，其中包含相当多的文档，可以帮助任何阅读此内容的人更好地了解从 sourceforge 设置和使用 OpenAS2 应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:17:34.727

这三个都使用不同的传输层（SMTP、HTTP、FTP）。AS2 可能会更容易。

这应该使您朝着正确的方向前进：

[http://sourceforge.net/projects/openas2/](http://sourceforge.net/projects/openas2/)

您在两台机器上都需要它 - 收听和发送。还需要考虑 MDN。AS2 非常适合 B2B，但是您的问题的措辞方式似乎并非如此（机器对机器 - 在同一网络上），在这种情况下，它可能不是最有效的传输方法文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-20T14:51:44.773

OpenAs2 将是一个不错的选择。我最近在 OpenAS2 上做了一些配置来进行文件传输。如果您对在 Windows 和 Linux 上安装、配置、应用证书、运行 OpenAS2 服务器有任何疑问，我可能会为您提供帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-28T09:39:32.003

AS2 还有一些免费的解决方案：

*   如果您不是 EDI 提供商，并且只有一个贸易伙伴就足够了，您可以尝试[RSBus AS2 连接器](https://www.rssbus.com/solutions/as2/)。它具有网络界面，易于启动。
*   还有一个带有 Swing GUI 和许多功能的[Mendelson AS2的开源版本。](http://as2.mendelson-e-c.com/)

它们都不像[OpenAS2](http://sourceforge.net/projects/openas2/)那样灵活，但都有自己的特点和缺点。

# ikimagebrowserview - IKImageBrowserView的delegate和_delegate有什么区别？

> ID：14460741
> 
> 赞同：0
> 
> 时间：2013-01-22T14:22:26.557
> 
> 标签：ikimagebrowserview, ikimagekit

![在此处输入图像描述](../Images/47b4cd127359a684677168fe5cb7960f.png)

如图所示，有delegate、_delegate、dataSource、_dataSource，有什么区别呢？

基本上，我可以将我想要的功能与delegate + dataSource 或_delegate + _dataSource 一起使用，但我不知道有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:12:15.220

我相信 _delegate 出口直接引用内部属性，而委托使用 getter/setter。

# android - Handler 和 AsyncTask 都在一个代码中

> ID：14460742
> 
> 赞同：0
> 
> 时间：2013-01-22T14:22:30.387
> 
> 标签：android, android-asynctask, android-webview, handler

我使用了一个处理程序

```
handler.post(new Runnable() {
            @Override
            public void run() {

                jsInterface.initiateProcess(webView);
                Log.d("",TAG+" Initiate Process Handler");
            }
        }); 
```

我传入函数的 webView`initiateProcess(webView)`有一个`onPagestarted`显示进度对话框的方法，该对话框有时有效，有时无效。

我能想到的一个可能的问题是，我`AsyncTask`在使用此处理程序的同一活动中使用过，是否因为这两个线程（`handler and asynctask`）相互干扰而发生？我对android线程了解不多。

# android - 重新打开时防止 Activity 因旧的完成而关闭

> ID：14460743
> 
> 赞同：0
> 
> 时间：2013-01-22T14:22:31.113
> 
> 标签：android, android-intent, android-activity, android-lifecycle

我有两个活动 A 和 B。A 中有一个按钮 BTN，它可以：

```
Intent myIntent = new Intent(A.this, B.class);
startActivityForResult(myIntent, B_VIEW); 
```

1.  我点击 BTN
2.  然后我单击在 B 中执行 finish() 的后退按钮。
3.  然后我快速按下按钮 BTN 再次打开 B。

问题是，如果`B.onDestroy()`由先前`finish()`（步骤 2）引起的 尚未执行，它现在执行，所以 B 关闭:-(

我希望，如果尚未执行，如果我重新打开 B，B.finish() 将不会触发。如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:27:47.820

你最好从头开始重新处理这种过程。

最好的办法是将关键数据打包到 中的一个包中`onSaveInstanceState`，然后检查该包是否存在于`onCreate(Bundle)`函数中。像这样的东西会起作用[（大部分是从 Android Docs 复制的）](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    // Save the user's current game state
    savedInstanceState.putInt(STATE_SCORE, mCurrentScore);
    savedInstanceState.putInt(STATE_LEVEL, mCurrentLevel);

    // Always call the superclass so it can save the view hierarchy state
    super.onSaveInstanceState(savedInstanceState);
}

public void onCreate(Bundle savedInstanceState)
{
    if (savedInstanceState==null)
    { //This is the first time starting
        mCurrentScore=0;
        mCurrentLevel=1;
    }
    else
    {
        mCurrentScore=savedInstanceState.getInt(STATE_SCORE);
        mCurrentLevel=savedInstanceState.getInt(STATE_Level);
    }
} 
```

# linux-kernel - Linux 内核 ARM 转换表库（TTB0 和 TTB1）

> ID：14460752
> 
> 赞同：11
> 
> 时间：2013-01-22T14:22:53.787
> 
> 标签：linux-kernel, operating-system, arm

为 ARMv7 (Cortex-a8) 编译的 Linux 内核 2.6.34.3

我查看了内核代码，看起来 Linux 内核在 TTB1（转换表库）上为内核地址空间（0xC0000000 以上的所有内容）和 ttb0（0xC0000000 以下的所有内容）上的用户进程设置了硬件页表，每次更改进程上下文切换。它是否正确？我仍然很困惑 MMU 如何知道要查看哪个 ttb 进行翻译？

我读到 TTBCR（转换表基本控制寄存器）确定在未找到 MVA 时要遍历哪个 ttb 寄存器，但是该寄存器始终读取 0，这意味着始终使用 ARM 架构参考手册中的 TTBR0。这怎么可能？谁能向我解释一下 Linux 内核是如何使用这两个 ttb 的？

[我从这个站点https://www.cs.rutgers.edu/~pxk/416/notes/10-paging.html](https://www.cs.rutgers.edu/~pxk/416/notes/10-paging.html)阅读了 ttb 的工作原理，但我仍然不明白内核如何使用这两个 ttb

（仔细检查内核代码，由于某种原因，ttb0 和 ttb1 都已设置，但似乎从未使用过 ttb1，我将 TTB1 寄存器设置为 0，Linux 内核继续照常运行）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-21T22:35:34.977

TTBR 寄存器一起用于确定完整的 32 位或 40 位地址空间的寻址。哪个寄存器用于哪个地址范围由 TTBCR 中的 tXsz 位控制。有一个对应于 TTBR0 的 t0sz 条目和对应于 TTBR1 的 t1sz 条目。

每个 TTBRx 寄存器寻址的页表是独立的，但您通常会发现大多数 Linux 实现只使用 TTBR0。Linux 期望能够使用 ARM 不支持的 3G/1G 地址空间分区方案。如果您查看 ARMv7 架构参考手册的第 B3-1345 页，您会看到 t0sz 和 t1sz 的值分别决定了 TTBR0 和 TTBR1 支持的地址范围。为了使迷失方向更加混乱，甚至有可能在 TTBR0 和 TTBR1 支持的范围不连续的情况下出现脱节的地址空间，从而导致系统地址空间出现漏洞。美好的时光！

不过，要回答您的主要问题，ARM 建议使用 TTBR0 将偏移量存储到 USER 进程使用的页表中，并使用 TTBR1 将偏移量存储到 KERNEL 使用的页表中。我还没有看到一个真正做到这一点的实现。在所有情况下几乎都只使用 TTBR0，而 TTBR1 包含 L1 表的副本。

那么这是如何工作的呢？TTBR 的值作为进程状态的一部分存储，并且在每次进程关闭时简单地恢复。这就是预期的工作方式。最初，TTBR1 将保持内核表的恒定值并且永远不会被替换或换出，而 TTBR0 将在每次进程之间的上下文切换时更改。显然，大多数用于 ARM 的 Linux 实现已经决定基本上消除对 TTBR1 的使用，并坚持使用 TTBR0。

如果你想在你的设备上测试这个理论，试着敲击 TTBR1 并观察什么都没有发生。然后尝试敲击 TTBR0 并观察您的系统崩溃。我还没有遇到一个没有产生完全相同结果的实例。长话短说，TTBR1 在 Linux 中是无用的，而 TTBR0 几乎完全被使用，只是被换掉了。

现在，一旦您获得 LPAE 支持，就扔掉所有这些，重新开始。在这个实现中，您将开始看到 t0sz 和 t1sz 的值不是零，因此也不是零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:05:10.440

我对 ARM 架构知之甚少，但从我在您随附的链接中读到的内容，我猜 Linux 以这种方式实现其虚拟内存管理：

> 虚拟地址的高位决定使用哪一个。表的基址存储在两个基址寄存器之一（TTBR0 或 TTBR1）中，具体取决于虚拟地址的最高 n 位是否为 0（使用 TTBR0）或不（使用 TTBR1）。n 的值由转换表基本控制寄存器 (TTBCR) 定义。

该寄存器`TTBCR`告诉哪些地址将从`TTBR0`或指向的页表中转换`TTBR1`。如果`TTBCR`包含`0xc000000`，则从`0`to`0xbfffffff`的任何地址都由 指向的页表翻译，而从to的`TTBR0`任何地址都由 指向的页表翻译。这与用户进程 3GB/内核 1GB 的 Linux 内存分割相匹配。`0xc0000000``0xffffffff``TTBR1`

> 这允许一个设计，其中操作系统和内存映射 I/O 位于地址空间的上部并由 TTBR1 中的页表管理，而用户进程位于内存的下部并由TTB0 中的页表。在上下文切换时，操作系统必须更改 TTBR0 以指向新进程的第一级表。**TTBR1**仍将包含操作系统的内存映射和内存映射 I/O。

因此， 的值`TTBR1`永远不会改变，因为您希望内核被永久映射（想想当一个中断被引发时会发生什么）。另一方面，`TTBR0`在每次进程切换时修改，它包含当前进程的页表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T20:21:52.583

请参阅[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0211k/Bihgfcgf.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0211k/Bihgfcgf.html)

对于 ARM5 及更低版本，TTB 表的大小和对齐方式是固定的（至 16k）。每个级别 1 条目代表 1MB。表项为 32bits (16k*1M/(32bit/8) = 4GB)。TTBCR控制*TTBR0表**的*大小。从上面的网址，

> **选择使用哪个转换表基址寄存器**
> 转换表基址寄存器的选择如下：
> 如果 N = 0，则始终使用转换表基址寄存器 0。
> - 这是复位时的默认情况。它向后兼容 ARMv5 或更早的处理器。
> 如果 N 大于 0，则：
> - 如果虚拟地址的位 [31:32-N] 全部为 0，则使用转换表基址寄存器 0，否则使用转换表基址寄存器 1。

所以*TTBR0*的大小也设置了内存分割。对于~~传统~~的Linux ~~3G/1G~~ 1G/3G，应该选择值**2 。**4kB 表 == 1G 内存 == 位 31..30 为零。对于**6**的值，该表是 256byte == 64MB == 位 31..26 为零。

在 Linux 用语中，这些是*页面全局*条目（这会拆分此*页面全局*目录）。这些条目可以指向另一个表或只是一个 1MB**段**。下一个表条目是*页面中间*Linux 目录，然后是最后的*页表*条目。我认为*页面中间*条目在 ARM 上未使用。

MMU 硬件并非每次都走在桌子上。有一个 TLB（翻译后备缓冲区）。它就像 MMU 表的缓存。当操作系统更新这些表时，必须刷新 TLB，否则处理器将使用*过时*的条目。同样，ARM 缓存是*虚拟标记*的，因此更改映射也可能意味着必须刷新*缓存。*由于这些原因，您**永远**不想在上下文切换时更改内容。共享库文本（比如**libc.so**）在上下文切换时应该相同。希望每个进程都有 libc.so 映射到相同的虚拟地址。这样做有很大的收获；较低的内存使用和良好的 I-cache 使用。

*域*和*PID*寄存器以及主管/用户模式也可以控制内存访问。这些是可以在上下文切换上切换的单个寄存器。

有关ARMV5 上的 PID 和域使用的信息，请参阅[http://lwn.net/images/conf/rtlws11/papers/proc/p01.pdf 。](http://lwn.net/images/conf/rtlws11/papers/proc/p01.pdf)当前的 Linux 源代码与论文描述的不完全一样。Linux 完全有可能不需要使用这种机制并将*TTBCR*设置为零，以便 ARM 子架构的 VM 代码类似。

**编辑：** 我**不**相信*TTBCR*功能可用于实现 3G/1G 拆分。我认为 Rutger 的页面是在泛泛地讨论*TTBCR*，而不是在**Linux**上下文中。此外，至少**2.6.38** Linux 使用*域*或*DACR*，但不使用*pid*或*fcse*，因为它支持有限数量的进程。

[http://lwn.net/Articles/106177/](http://lwn.net/Articles/106177/) - 在罗格斯页面上也有引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-02T07:44:16.693

TTBR0 保存转换表 0 的基地址，以及它所占用的内存信息。

这是从 Hyp 模式以外的模式进行内存访问的阶段 1 转换的转换表之一

# rets - 不同的 RETS Server 使用相同的 ID 会获取不同数量的数据吗？

> ID：14460756
> 
> 赞同：0
> 
> 时间：2013-01-22T14:23:06.960
> 
> 标签：rets

我使用 VieleRETS 作为客户端应用程序将数据提取到我们的 MYSQL 数据库中。如果我使用其他 RETS 客户端应用程序服务和 Rets 连接器来获取数据并且相同数量的数据将被更新，它是否会有所不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:49:35.413

不是 100% 确定你在问什么。

如果您询问 2 个不同的 MLS 系统是否具有相同的架构，答案是否定的。好吧，至少不太可能。

如果您询问 2 个客户端 viele 和其他一些客户端是否会从同一个 MLS 系统看到相同的架构，答案是肯定的。在这种情况下，假设数据中没有缺陷，您应该会看到相同的记录数。

数据缺陷的一个简单示例是 DMQL 查询 ListingID=0+ 和 ModificationTimestamp=1900-01-01T00:00:00+ 应该在这两种情况下返回所有列表。如果列表时间戳或 id 为空，则计数将关闭。

# asp.net-mvc - ASP.Net MVC 缓存和 Javascript 初始化

> ID：14460761
> 
> 赞同：1
> 
> 时间：2013-01-22T14:23:12.963
> 
> 标签：asp.net-mvc

为了获得最佳性能，最好将 Javascript 代码放在页面底部。现在我在 MVC 中有一个部分视图，我正在使用该`Html.Action`方法加载它。我还使用该`OutputCaching`属性来缓存控制器操作响应，从而加快服务器响应。这是我的问题：

在这样的局部视图中，我有一些初始化 javascript 轮播的 Javascript。轮播元素的 ID 是在同一局部视图本身内动态生成的。为了获得最佳性能，javascript 代码在页面中“注册” `ViewContext`，然后在页面末尾呈现。

现在，由于我已启用，因此仅在未缓存项目时才完成一次`OutputCaching`此类 javascript 代码的注册，否则不会执行任何逻辑。`ViewContext`

此解决方案的解决方法是不在页面末尾包含 javascript 代码，而是将其作为 PartialView 本身的一部分，因此它与 Partial View 的全部内容一起缓存。

您有什么建议可以缓存部分视图并在页面末尾注册 Javascript 代码吗？

# multithreading - 线程间通信

> ID：14460763
> 
> 赞同：1
> 
> 时间：2013-01-22T14:23:22.997
> 
> 标签：multithreading, unity3d, main, polling, producer-consumer

以下问题是关于统一游戏引擎的，但它可能与任何试图将数据发送到主线程（例如 UI 线程）的程序有关。

我正在一个单独的线程上处理一些数据（定位数据从套接字异步读取）。但是，我需要在主线程上处理这些数据（游戏对象的变换只能从主线程访问）。我想到的方法是创建一个线程安全队列并遵循生产者-消费者模式。线程将对位置数据进行排队，主线程将数据出列并对其进行操作。*注意：在 Unity 中，我无法访问 System.Windows.Threading 名称空间，因此无法使用 Dispatcher。此外，它需要 .Net 3.5，所以我也不能使用 Collections.Concurrent 名称空间。

有更好的方法吗？

如果没有，当数据排队时通知主线程的最佳方法是什么？投票似乎效率低下，但我想不出任何办法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:29:05.200

这是一种完全可行的线程化方法。您可能知道，在计算机硬件中发现的轮询的替代方法是中断的概念。

您将如何在多线程高级计算机程序中模拟中断？很难说 - 您的线程更改必须通知 UI 线程“嘿，我准备好了”，而​​不是 UI 线程不断检查。这需要某种消息传递，真的——这可能不可行。

话虽如此，典型的游戏设计方法是“游戏循环”，本质上是投票。所以在那场比赛中没有什么可耻的——你只需要确保它不会扼杀你的表现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:33:10.180

或许[这个问题](https://stackoverflow.com/questions/22356/cleanest-way-to-invoke-cross-thread-events)对你有答案。

但是，轮询队列是一种更清洁的解决方案恕我直言，如果做得好并且互联网上有大量示例，成本不会那么高。

# asp.net-mvc-3 - 由 OutputCache 过滤器引起的潜在危险请求

> ID：14460768
> 
> 赞同：4
> 
> 时间：2013-01-22T14:23:47.487
> 
> 标签：asp.net-mvc-3

我在我的 MVC3 应用程序中看到了一个奇怪的行为。我有一个由 Ajax 调用的动作，并收到一个带有 HTML 文本的帖子。我想允许 HTML 的输入，所以我设置了 ValidateInput(false) 属性。我还有一个带有此参数的全局 OutputCache 过滤器： (NoStore = true, Duration = 0, VaryByParam = "*" )
代码如下所示：

```
[HttpPost]
[ValidateInput(false)]
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*" )]
public ActionResult Edit(SomeModel someModel)
{
   saveModel(someModel);
   return new AjaxEditSuccessResult();
} 
```

当我向该方法发送帖子时，它会被执行并保存模型，但我得到的响应是标准的“从客户端检测到潜在危险的 Request.Form 值”错误消息，带有以下堆栈跟踪：

```
[HttpRequestValidationException (0x80004005): A potentially dangerous Request.Form value was detected from the client (text="<p class="MsoNormal"...").]
System.Web.HttpRequest.ValidateString(String value, String collectionKey, RequestValidationSource requestCollection) +9665149
System.Web.<>c__DisplayClass5.<ValidateHttpValueCollection>b__3(String key, String value) +18
System.Web.HttpValueCollection.EnsureKeyValidated(String key) +9664565
System.Web.HttpValueCollection.Get(String name) +17
System.Web.Caching.OutputCacheModule.CreateOutputCachedItemKey(String path, HttpVerb verb, HttpContext context, CachedVary cachedVary) +676
System.Web.Caching.OutputCacheModule.CreateOutputCachedItemKey(HttpContext context, CachedVary cachedVary) +55
System.Web.Caching.OutputCacheModule.OnLeave(Object source, EventArgs eventArgs) +9716788
System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +136
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69 
```

你知道我是否可以以任何方式向 OutputCache 属性表明它需要尊重 ValidateInput 属性吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-30T15:06:21.330

流程中有两个地方调用了验证：

1.  关于控制器方法调用
2.  当渲染结果存储在缓存中时。

您已经解决了第一个问题`ValidateInputAttribute(false)`，但看起来缓存模块正在忽略`NoStore`指令并且仍然尝试构造缓存键，并且在此之前它会验证参数，以摆脱该指定：`Location = System.Web.UI.OutputCacheLocation.None`，因此缓存模块甚至不会尝试做任何事情。`OutputCache[...]`用这样的东西替换你的：

```
[OutputCache(NoStore = true, Location = System.Web.UI.OutputCacheLocation.None)] 
```

# ios - 如果 UITableViewCells 为空，则隐藏删除分隔线

> ID：14460772
> 
> 赞同：85
> 
> 时间：2013-01-22T14:24:02.353
> 
> 标签：ios, uitableview, cocoa-touch

我有一个`UITableView`，我只有 3 行，我可以看到这 3 行。问题是空的单元格：我可以看到那里的线条。我不想看到那些线条。

知道如何删除这些行吗？

下面是我正在寻找的图像。

## ![图片链接](../Images/6c9f958811eb2993868ad6aad8db3414.png)

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2013-01-22T14:35:32.420

甚至比 Andrey Z 的回复更简单：只需在 UITableView 类中创建一个虚假的 tableFooterView：

```
self.tableFooterView = [UIView new]; // to hide empty cells 
```

和斯威夫特：

`tableFooterView = UIView()`

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2013-01-22T14:25:28.437

您可以使用以下任一代码片段来隐藏`UITableView`的标准分隔线。添加自定义分隔符最简单的方法是添加一个简单`UIView`的 1px 高度：

```
UIView* separatorLineView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 1)];
separatorLineView.backgroundColor = [UIColor clearColor]; // set color as you want.
[cell.contentView addSubview:separatorLineView]; 
```

**或者**

```
 self.tblView=[[UITableView alloc] initWithFrame:CGRectMake(0,0,320,370) style:UITableViewStylePlain];
    self.tblView.delegate=self;
    self.tblView.dataSource=self;
    [self.view addSubview:self.tblView];

    UIView *v = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 10)];
    v.backgroundColor = [UIColor clearColor];
    [self.tblView setTableHeaderView:v];
    [self.tblView setTableFooterView:v];
    [v release]; 
```

**或者**

```
- (float)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
    // This will create a "invisible" footer
    return 0.01f;
}

- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    // To "clear" the footer view
    return [[UIView new] autorelease];
} 
```

**或者**

并且还检查[nickfalk 的答案](https://stackoverflow.com/a/14461000/603977)，它也很短且很有帮助。你也应该试试这条线，

```
self.tableView.tableFooterView = [[UIView alloc] init]; 
```

不确定，但它适用于我检查过的所有 iOS 版本，包括 iOS 5 及更高版本，直至 iOS 7。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-20T18:45:30.420

更新了 swift 和 iOS 9 的答案。这适用于`.Plain`各种表格视图。

```
 tableView.tableFooterView = UIView() 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-22T14:25:38.230

透明`UIView`为`tableView`1px 高度的页脚就可以了。

```
UIView *v = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 1)];
v.backgroundColor = [UIColor clearColor];
[self.tableView setTableFooterView:v]; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-04-03T16:13:14.310

```
self.tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero]; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-11-22T04:37:34.153

使用此代码删除空单元格的分隔线。

```
 - (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
// This will create a "invisible" footer
return 0.01f;
}

- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
     return [UIView new];

    // If you are not using ARC:
    // return [[UIView new] autorelease];
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-03-29T09:27:43.993

只是返回一个空`UIView()`的`viewForFooterInSection`为我工作：

```
override func tableView(tableView: UITableView, viewForFooterInSection section: Int) -> UIView? {
        return UIView()
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-03-02T13:11:26.900

请尝试以下代码：

```
self.tblView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero];
if ([self.tblView respondsToSelector:@selector(setSeparatorInset:)])
{
    [self.tblView setSeparatorInset:UIEdgeInsetsZero];
}
// write in view did load 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-11-26T10:09:30.843

```
tableForBrands.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero]; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-11-10T13:06:35.603

没有一个建议的答案适合我的类似问题。在 tableView 委托中实现这个方法终于奏效了：

```
- (void)tableView:(UITableView *)tableView
  willDisplayCell:(UITableViewCell *)cell
forRowAtIndexPath:(NSIndexPath *)indexPath
{
    tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-02-06T13:01:35.033

如果您使用 Storyboards，您可以将 UIView 拖放到单元格下方的 UITableView 中，并将其高度设置为 0。（仅在 iOS 8 项目中测试过）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-04T07:53:40.173

我想这就是你要找的。

```
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section{
    return 1.0f;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-07-22T11:57:23.600

您可以将表格视图设置为分组而不是简单的 - 这会稍微改变外观，但至少会删除多余的行。

我遇到了这个确切的问题，最终更改为分组视图。看起来好多了。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-12-31T18:53:24.857

以前的一些建议包含一个很大的概念错误：

如果你这样做：

[单元格添加子视图：....

即使一个单元格被“重用”，你也会为分隔线添加一个新的子视图！

通过两种方式避免它：

a) 使用 TAG，并且： 1) 请求该标签的子视图 let divider = cell.viewWithTag(TAG) ... 2) 如果存在，不要添加另一个子视图 3) 如果不存在，添加并标记它。

b）创建一个自定义视图并在自定义单元格的“init”“awakeFromNib”中添加您的自定义分隔线。

a) 的代码：

```
 if let divider = cell.viewWithTag(DIVIDER_TAG) as? UIView{
            // nothing.. eventually change color bases in IndexPath...
        }else{
            let frame = CGRectMake(0, cell.frame.height-1, cell.frame.width, 1)
            divider.tag = DIVIDER_TAG
            divider.backgroundColor = UIColor.redColor()
            cell.addSubview(divider)
        } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-04-08T20:11:20.620

在 cellForRowAtIndexPath 内部

```
let separatorLineView:UIView = UIView(frame: CGRectMake(0,0,self.tableview.bounds.width,0.5))
separatorLineView.backgroundColor = tableView.separatorColor
cell!.contentView.addSubview(separatorLineView) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-05-11T01:07:49.107

快速解决方案：tableView.tableFooterView = UIView(frame: CGRectZero)

在 Xcode 7.2 上工作

# c++ - 编译代码时杀毒软件说它是病毒并删除它

> ID：14460776
> 
> 赞同：2
> 
> 时间：2013-01-22T14:24:08.047
> 
> 标签：c++, antivirus

嗨，我尝试用 C++ 编写代码。此代码仅使文本文件易于加密并保存到新文件中。当我编译这段代码时，防病毒软件说，它是病毒/间谍软件 Gen:Variant.Kazy.20825。不知道为什么是病毒。这是我的代码：

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

void controlParameters(int argc){  //check if input parameters are ok
    if(argc == 1){
        cout << "Pokud chcete text zasifrovat, spustte program s parametrem: -enc \"Nazev_souboru.txt\"\n";
        cout << "Pokud ho chcete desifrovat, spustte program s parametrem: -dec \"Nazev_souboru.txt\"\n";
    }else if(argc > 3){
        cout << "Moc parametru. Spustte si program bez parametru.\n";
    }else if(argc < 3){
        cout << "Chybi jeden parametr. Spustte si program bez parametru.\n";
    }else{
        cout << "Vsechno vypada zatim dobre\n";
    }
}

void encryption(string &file);  //encrypt text file
void decryption(string &file);  //decrypt text file
bool controlFile(string &file); //check if file can be opened

int main(int argc, char **argv){
    controlParameters(argc);
    string file;
    file = argv[2];
    if(controlFile(file)){

    }else{
        cout << "Soubor nesel nacist." << endl;
        return -1;
    }
    cout << "Ukonceno.\nZmacknete ENTER pro pokracovani..."<<endl;
    cin.get();
    return 0;
}

bool controlFile(string &file){
    ifstream ifs;
    ifs.open(file);
    if(ifs.is_open()){
        ifs.close();
        return true;
    }else{
        ifs.close();        
        return false;
    }
}

void encryption(string &file){
    ifstream ifs;
    ofstream ofs;
    string line;    
    ifs.open(file);
    ofs.open("encrypt.txt");
    if(ifs.is_open()){
        while(!ifs.eof()){
            getline(ifs,line);
            int a = line.length();
            int i = 0;
            while(i < a){               
                ofs << ((char)(line[i]^100));               
            }
            line.clear();
            ofs << "\n";
        }
    }else{
        cout << "Nelze nacist soubor" << endl;
    }
}

void decryption(string &file){
    ifstream ifs;
    ofstream ofs;
    string line;
    ifs.open(file);
    ofs.open("decrypt.txt");
    if(ifs.is_open()){
        while(!ifs.eof()){
            getline(ifs,line);
            int a =line.length();
            int i = 0;
            while(i < a){               
                ofs << ((char)(line[i]^100));               
            }
            line.clear();
            ofs << "\n";
        }
    }else{
        cout << "Nelze nacist soubor" << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T14:38:13.157

最好从病毒扫描程序中排除源代码控制目录；即使在执行源代码控制操作或编译时*没有*误报，它们也会导致性能和锁定问题（我已经看到它发生过几次）。

因此，如果只是为了让您的编程体验更可靠，请禁用这些目录上的病毒扫描程序。

您可能仍希望扫描您的可执行文件的最终发布版本，以帮助避免误报：毕竟，即使病毒扫描程序阻塞不是您的错，给用户留下一个好印象也不是什么好印象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T14:27:50.363

防病毒软件使用“启发式”来确定什么是病毒，什么不是。因此，它会在文件中查找执行它认为可疑的事情的模式。我在您的代码中看不到任何直接错误，因此我怀疑这是“误报”。我个人不喜欢杀毒软件，它带来的问题多于解决的问题......

顺便说一句，您可以将“输出文件名”添加到您的加密/解密函数中，并使它们成为一个函数！;)

# mybatis - Mybatis如何将DB中字段对应的所有属性映射到某个Object中？

> ID：14460779
> 
> 赞同：0
> 
> 时间：2013-01-22T14:24:28.860
> 
> 标签：mybatis

逻辑有点复杂，这里举个例子：假设我们在一个表中有三个字段，分别是A，B，C。下面的xml映射器会填充Blog类实例中的属性：

```
<resultMap type="Blog"  id="result">
    <result property="A" column="A"/>
    <result property="B" column="B"/>
    <result property="C" column="C"/>
</resultMap> 
```

问题是，如果我得到一个类User，它包括三个属性，分别是A、B和C。如何使用以前的resultMap来填写User类实例中的A、B属性。这意味着我想填写上面 resultMap 可以映射到的所有属性。如何解决这个问题呢？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:11:24.693

你可以尝试这样的事情：

```
<select id="selectUsers" parameterType="int" resultType="com.someapp.model.User">
    select id             as A, 
           username       as B,   
           hashedPassword as D
    from some_table
    where id = #{id}
</select> 
```

MyBatis 自动创建一个`ResultMap`基于名称将列映射到 JavaBean 属性的方法。如果列名不完全匹配，您可以在列名上使用 select 子句别名以使标签匹配。A、B 和 C 应提供 getter 和 setter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T17:13:56.457

保罗巴尔加斯是正确的。当然，您应该提供适当的 getter 和 setter。如果您想使用对象在每个表中执行基本的 crud 操作，您应该检查[MyBatisGenerator](http://www.mybatis.org/generator/)。这将为每个表提供一个类，并为基本操作生成接口和 xml 实现，包括具有适当配置的强大条件选择。如果您按照教程进行操作，您只会这样写：

```
SqlSession sqlSession = sqlSessionFactory.openSession();
try {
  UserMapper mapper = sqlSession.getMapper(UserMapper.class);
  List<User> allRecords = mapper.selectByExample(null);//Select All
} finally {
  sqlSession.close();
} 
```

这可以进一步优化（MyBatis 插件或与 spring 集成），但这将是生成类后的简单使用。

# python - 我可以从标准选项卡遍历中排除特定控制器吗？

> ID：14460785
> 
> 赞同：2
> 
> 时间：2013-01-22T14:24:44.067
> 
> 标签：python, wxpython, wxwidgets

我制作了一个包含一系列文本控件的自定义对话框。每个文本控件旁边都有几个按钮，用于更方便地添加特定值。我不希望这些按钮在用户使用它的选项卡遍历对话框时获得焦点，因为在大多数情况下，用户不需要使用这些按钮。

是否有任何方便的方法可以从标准选项卡遍历中排除特定控制器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:29:15.587

防止按钮被键盘聚焦的一种简单方法是派生`wx.lib.buttons.GenButton`或`wx.lib.buttons.ThemedGenButton`基于`wx.PyControl`支持覆盖的`AcceptsFocusFromKeyboard()`：

```
class NoFocusButton(wx.lib.buttons.ThemedGenButton):
    def __init__(self, parent, id=wx.ID_ANY, label=wx.EmptyString, pos=wx.DefaultPosition, size=wx.DefaultSize, style=0, validator=wx.DefaultValidator, name=wx.ButtonNameStr):
        wx.lib.buttons.ThemedGenButton.__init__(self,parent,id,label,pos,size,style,validator,name)
    def AcceptsFocusFromKeyboard(self):
        return False # does not accept focus 
```

* * *

对于更复杂的导航规则或控件，您可以`wx.EVT_NAVIGATION_KEY`自己处理和管理导航。要获取要导航的窗口列表，您可以使用`self.GetChildren()`. 中当前焦点窗口的索引`wx.WindowList`可以通过`.index(mywindow)`。有了这些信息，您可以在用户按下“导航键”时在列表中导航，并将焦点设置到下一个适用的控件，跳过那些您不想关注的控件。

为了使浏览列表更容易，您可以创建一个生成器：

```
def CycleList(thelist,index,forward):
    for unused in range(len(thelist)): # cycle through the list ONCE
        if forward:
            index = index+1 if index+1 < len(thelist) else 0
        else:
            index = index-1 if index-1 >= 0 else len(thelist)-1
        yield thelist[index] 
```

在对话框中，处理`wx.EVT_NAVIGATION_KEY`：

```
self.Bind(wx.EVT_NAVIGATION_KEY, self.OnNavigationKey) 
```

```
def OnNavigationKey(self,event):
    children = self.GetChildren() # list of child windows
    focused = self.FindFocus()    # current focus

    # avoid accessing elements that do not exist
    if not focused or focused not in children:
        event.Skip() # use default behavior
        return

    index = children.index(focused)

    for child in CycleList(children,index,event.GetDirection()):
        # default behavior:
        if child.AcceptsFocusFromKeyboard():
            child.SetFocus()
            return 
```

上面的示例模拟了默认行为：它通过可聚焦控件循环（跳过静态文本等不可聚焦的控件）。您可以扩展检查以排除特定控件或创建实现`AcceptsFocusFromKeyboard`返回 False 的自定义按钮类。

**注意：**虽然`wx.PyWindow`和实现允许覆盖的机制`wx.PyPanel`，但标准的 wxPython 控件**却不允许**。但是，在 python 端处理和检查将访问将调用重写方法的实际 python 对象。`wx.PyControl``AcceptsFocusFromKeyboard`**`wx.EVT_NAVIGATION_KEY``AcceptsFocusFromKeyboard`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:45:10.393

如果您使用的是 C++，则此问题有一个简单的解决方案，如本答案的其余部分所述。在 wxPython 中，您似乎不能专门化 wxWidgets 类——这在我看来是一个致命的障碍。

您可以通过重写 AcceptsFocusFromKeyboard() 以返回 FALSE 来创建按钮控件的特殊化，该控件将被排除在选项卡遍历之外。

[http://docs.wxwidgets.org/trunk/classwx_window.html#a2370bdd3ab08e7ef3c7555c6aa8301b8](http://docs.wxwidgets.org/trunk/classwx_window.html#a2370bdd3ab08e7ef3c7555c6aa8301b8)

以下 C++ 代码可以正常工作：按下选项卡时焦点从第一个按钮跳转到第三个按钮

```
class cNoTabButton : public wxButton
{
public:
    cNoTabButton(wxWindow *parent,
             wxWindowID id,
             const wxString& label = wxEmptyString,
             const wxPoint& pos = wxDefaultPosition,
             const wxSize& size = wxDefaultSize,
             long style = 0 )
             : wxButton(parent,id,label,pos,size,style)
    {}
    bool AcceptsFocusFromKeyboard() const { 
        return false;
    }
};

MyFrame::MyFrame(const wxString& title)
       : wxFrame(NULL, wxID_ANY, title)
{
    // set the frame icon
    SetIcon(wxICON(sample));

    wxPanel * panel = new wxPanel(this,-1,wxPoint(0,0),wxSize(500,500));

    new wxButton(panel,-1,"TabPlease",wxPoint(20,20));
    new cNoTabButton(panel,-1,"NoTabThanks",wxPoint(100,20));
    new wxButton(panel,-1,"OKWithMe",wxPoint(200,20));

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T08:55:23.263

这不是一个完美的解决方案，但实现此目的的一种方法实际上是将控件的焦点恢复延迟半秒。

您的主窗口将重新获得焦点，按钮仍然有效。我使用它是因为我希望我的主窗口能够处理所有按键，但仍然包含与鼠标一起使用的按钮。

因此，您将 KILL_FOCUS 事件绑定在应该保留焦点的控件中，并创建一个无法从中获得焦点的控件列表。

首先是获取所有孩子的辅助函数：

```
def GetAllChildren(control):
    children = []
    for c in control.GetChildren():
        children.append(c)
        children += GetAllChildren(c)
    return children 
```

就我而言，我希望窗口的所有孩子都没有获得焦点

```
self.not_allowed_focus = GetAllChildren(self)
self.Bind(wx.EVT_KILL_FOCUS, self.OnKillFocus) 
```

在我的 KILL FOCUS 处理程序中，我要求在半秒后返回焦点

```
def OnKillFocus(self,evt):
    print "OnKillFocus"
    win = evt.GetWindow()
    if win in self.not_allowed_focus:
        wx.CallLater(500,self.SetFocus) 
```**

# functional-programming - 在 OCaml 中构建二叉搜索树的正确方法

> ID：14460786
> 
> 赞同：2
> 
> 时间：2013-01-22T14:24:48.343
> 
> 标签：functional-programming, ocaml, binary-search-tree

好的，我已经`binary search tree`在 OCaml 中编写了一个。

```
type 'a bstree = 
    |Node of 'a * 'a bstree * 'a bstree
    |Leaf

let rec insert x = function
    |Leaf -> Node (x, Leaf, Leaf)
    |Node (y, left, right) as node -> 
        if x < y then
            Node (y, insert x left, right)
        else if x > y then
            Node (y, left, insert x right)
        else
            node 
```

* * *

上面的代码据说很好[在OCaml中使用数据结构的正确方法](https://stackoverflow.com/questions/14440719/the-right-way-to-use-a-data-structure-in-ocaml)

然而，我发现了一个问题。这`insert`仅在一次从列表中构建 bst 时才有效，例如

```
let rec set_of_list = function
     [] > empty
   | x :: l > insert x (set_of_list l);; 
```

因此，如果我们不断地从一个列表中构建一个 bst，没问题，我们可以得到一个完整的 bst，其中包含列表中的所有节点。

但是，如果我之前构建了一个 bst，现在我希望插入一个节点，**那么生成的 bst 将不会包含上一个树中的完整节点，**对**吗？**

那么我应该如何在 OCaml 中编写一个 bst，以便我们使用前一棵树的所有节点创建一个新的 bst，以保持前一棵树不可变？如果每次我需要从旧 bst 复制所有节点，那会影响性能吗？

* * *

**编辑：**

所以我们一开始就说，一个 bst 是用一个 node 创建的`t1 = (10, Leaf, Leaf)`。

然后我做`let t2 = insert 5 t1`，然后我得到`t2 = (10, (5, Leaf, Leaf), Leaf)`，对吗？在 t2 中，我们给一个变量`c1 to the child node (5, Leaf, Leaf)`

然后我做`let t5 = insert 12 t2`，然后我得到`t3 = (10, (5, Leaf, Leaf), (15, Leaf, Leaf))`。让我们给一个变量`c2 to the child node (5, Leaf, Leaf)`

所以我的问题是是否`c1 == c2`？t2 和 t3 中的两个`(5, Leaf, Leaf)`s 完全一样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:16:15.283

我将尝试回答您问题的共享部分。简短的回答是肯定的，两棵树的两个部分将是相同的。不可变数据之所以如此有效，是因为对可能的共享没有限制。这就是为什么 FP 工作得这么好。

这是一个执行您所描述的会话：

```
# let t1 = Node (10, Leaf, Leaf);;
val t1 : int bstree = Node (10, Leaf, Leaf)
# let t2 = insert 5 t1;;
val t2 : int bstree = Node (10, Node (5, Leaf, Leaf), Leaf)
# let t3 = insert 12 t2;;
val t3 : int bstree = Node (10, Node (5, Leaf, Leaf), Node (12, Leaf, Leaf))
# let Node (_, c1, _) = t2;;
val c1 : int bstree = Node (5, Leaf, Leaf)
# let Node (_, c2, _) = t3;;
val c2 : int bstree = Node (5, Leaf, Leaf)
# c1 == c2;;
- : bool = true 
```

长答案是不能保证这两个部分是相同的。如果编译器和/或运行时可以看到复制子树的原因，那么它也可以自由地这样做。在某些情况下（如分布式处理），这将是更好的选择。再次，关于 FP 的伟大之处在于对共享没有限制，这意味着在这种情况下，共享既不是必需的，也不是禁止的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T15:23:36.803

查看已接受的链接问题的答案。在此具体说明这一行：

> 让 tree_of_list l = List.fold_right 插入 l 叶

找出正在发生的事情的链条。以列表 1、2、3 为例。

首先我们没有树和插入 1 叶的结果。

叫这个 T1

接下来是insert 2 T1生成的树

叫这个 T2

然后插入 3 T2 生成的树

这是作为 Tree_of_list 的结果返回的内容。

如果我们调用结果 T3，然后在代码中的其他地方调用 insert 4 T3，则从 insert 返回的结果与使用列表 1、2、3、4 调用 Tree_of_list 没有区别。

# php - PHP：字符串到完整的 ASCII

> ID：14460789
> 
> 赞同：0
> 
> 时间：2013-01-22T14:24:55.847
> 
> 标签：php

我正在使用 RTF 转换器，我需要`240`as`&#U050&#U052&#U048`但我不知道该怎么做！？！

我尝试使用以下功能：

```
function string_to_ascii($string) {
    $ascii = NULL;
    for ($i = 0; $i < strlen($string); $i++) {
            $ascii += "&#U"+str_pad(ord($string[$i]),3,"0",STR_PAD_LEFT);
    }
    return($ascii);
} 
```

但它仍然只输出数字（例如`2`= `50`）并`ord`让它发疯。

我试过了`echo "-&#U"+ord("2")+"-";`，我得到了`50416`！？！？

我感觉它可能与编码有关

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:30:50.330

我想你想多了。使用 将字符串转换为数组[`str_split`](http://php.net/str_split)，[映射](http://php.net/array_map) [`ord`](http://php.net/ord)到所有字符串，然后如果要格式化每个字符串，请使用[`sprintf`](http://php.net/sprintf)（或者[`str_pad`](http://php.net/str_pad)如果您愿意），如下所示：

```
function string_to_ascii($string) {
    $array = array_map( 'ord', str_split( $string));
    // Optional formatting:
    foreach( $array as $k => &$v) {
        $v = sprintf( "%03d", $v);
    }
    return "&#U" . implode( "&#U", $array);
} 
```

现在，当你通过时`string_to_ascii( '240')`，你会回来`string(18) "&#U050&#U052&#U048"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:29:04.643

刚发现这个：

```
function to_ascii($string) {
    $ascii_string = '';
    foreach (str_split($string) as $char) {
        $ascii_string .= '&#' . ord($char) . ';';
    }
    return $ascii_string;
} 
```

[这里](http://snipplr.com/view/23796/)

# mysql - MySQL 到 MSSQL 数据类型的传输

> ID：14460791
> 
> 赞同：1
> 
> 时间：2013-01-22T14:25:02.400
> 
> 标签：mysql, sql-server, transfer

我正在将一个小型数据库从 MySQL 转移到 MSSQL。

当前 MySQL 示例声明：*（有意跳过 Keys 和 Not Null）

```
CREATE TABLE my_table(
    `id` bigint(20),
    `version` int(10),
    `user_id` tinyint(3) unsigned, /*less then 100*/
    `date_crated` int(11), /*unix time like 1334736752 */
    `image_content` blob,
    `xml_content` longtext /*xml with non english texts, 5000+ character*/
) 
```

还有我的 MSSQL 变体：

```
CREATE TABLE [my_table](
    [id] bigint,
    [version] int,
    [user_id] tinyint, 
    [date_crated] int,
    [image_content] varbinary(MAX),
    [xml_content] nvarchar(MAX)
 ) 
```

我对最后三个没有信心......
是否有任何潜在的数据以这种方式丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:33:35.133

对我来说看起来不错，除了`date_created`和`version`：我会选择`bigint`（64 位，UNIX 时间戳从 32 位扩大到 64 位）或`timestamp`--- MSSQL int 是 4 字节（32 位）。您还应该检查是否也需要 64 位整数`version`。

# sql-server-2008 - 是否有任何可能的答案来获得这些代码的相同输出

> ID：14460792
> 
> 赞同：1
> 
> 时间：2013-01-22T14:25:06.183
> 
> 标签：sql-server-2008

```
select e.Name, m.Name as 'Manager Id'
FROM Employee e
left outer join Employee m on e.ManagerId = m.EmployeeId 
```

在这段代码中，我使用左外连接来获得我想要的输出。下面的代码也显示了与上面相同的输出。

```
select e.Name, (Select m.name from Employee m where m.EmployeeId = e.ManagerId) as 'Manager Name'
From Employee e 
```

我想知道是否有任何其他可能的代码来获得这些代码的相同输出？顺便说一句，我的表由 3 列组成，EmployeeId、Name、ManagerId。

```
EmpId  |   Name | ManagerId
1      |Charlie    | 2
2      |Mike       | 3
3      |Jayr       |
4      |Ivan       | 3
5      |Franz      | 3
6      |Alexis     | 2 
```

managerID 也是 EmpID。就像在 Charlie 中一样，Charlie 的经理是 Mike，因为它的 empID 是 2，charlie 的 manageriD 是 2，其他的也一样，下面是上面代码的输出。

```
EmployeeName | ManagerName
Charlie       |  Mike
Mike          |  Jayr
Jayr          |  NULL
Ivan          |  Jayr
Franz         |  Jayr
Alexis        |  Mike 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:37:50.583

您的第一个版本，左外连接，尽可能简洁明了。可能有更多的方法来编写这个查询，使用 CTE、子查询、联合，我不知道是什么，但为了我的钱，他们所做的只是在无点复杂性上分层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:35:35.380

递归 CTE 示例。[有关 CTE 的更多信息](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)

```
;WITH cte AS
(
 SELECT EmpId, Name, ManagerId, CAST(ManagerId AS nvarchar(10)) AS ManagerName
 FROM dbo.Employee
 WHERE ManagerId IS NULL
 UNION ALL
 SELECT e.EmpId, e.Name, e.ManagerId, c.Name
 FROM dbo.Employee e JOIN cte c ON e.ManagerId = c.EmpId
 )
 SELECT Name, ManagerName
 FROM cte
 ORDER BY EmpId 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/9df4a/1/0)上的演示[](http://sqlfiddle.com/#!3/9df4a/1/0)

# jquery - 如何在淘汰赛中显示带有悬停文本的警告图标以警告在文本框中输入的重复记录

> ID：14460799
> 
> 赞同：2
> 
> 时间：2013-01-22T14:25:23.817
> 
> 标签：jquery, knockout.js

我是 Jquery 和 Knockout 的新手...我正在使用 KO 可观察数组来绑定网格中的数据（使用 HTML 表），当用户在文本框中输入相同的值时，我想显示带有悬停文本的警告图标，这些值已经在 KO 中可用数组（网格中已显示的数据）...我的消息应显示其已使用的先前值和 stepNo。我有两个网格模板，一个是显示记录，另一个是编辑

脚本部分：

```
function UniqueViewModel(){
    var dataValues=ko.observableArray([{stepNo:1,stepText:"test1"},
                                       {stepNo:2,stepText:"test2"},
                                       {stepNo:3,stepText:"test3"},
                                       {stepNo:4,stepText:"test4"}])

}
ko.applyBindings(new UniqueViewModel());

HTML: 
```

```
\\View Template
<tbody data-bind="foreach:dataValues">
    <tr>
        <td data-bind="text: stepNo"> </td>
        <td data-bind="text: stepText"> </td>   
    </tr>
</tbody>

\\Edit Template
<tbody data-bind="foreach:dataValues">
    <tr>
        <td><input type="text" data-bind:"value:stepNo"/></td>
        <td><input type="text" data-bind:"value:stepText"/></td>
        </tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:54:08.330

您可以创建一个自定义 js 类，而不是将普通的 js 对象放入 observable 数组，该类将包含计算的 observable 以获取提示：

```
function Step(no, text, parentObject) {
  var self = this;
  var parent = parentObject;

  self.stepNo = ko.observable(no);
  self.stepText = ko.observable(text);

  self.notUniqueHint = ko.computed(function () {
    var duplicate = ko.utils.arrayFirst(parent.dataValues(), function (item) {
      return item.stepText() == self.stepText() && item.stepNo() != self.stepNo();
    })

    if (duplicate) {
      return "Item is duplicated Step #" + duplicate.stepNo() + " with text - " + duplicate.stepText();
    }

    return "";
  });
}

function UniqueViewModel() {
  var self = this;
  self.dataValues = ko.observableArray();
  self.dataValues.push(new Step(1, "Test1", self));
  self.dataValues.push(new Step(2, "Test2", self));
  self.dataValues.push(new Step(3, "Test3", self));
}

ko.applyBindings(new UniqueViewModel()); 
```

并相应地更新 html：

```
<table>
  <tbody data-bind="foreach:dataValues">
    <tr>
      <td data-bind="text: stepNo"></td>
      <td data-bind="text: stepText"></td>
    </tr>
  </tbody>
</table>
<table>
  <tbody data-bind="foreach:dataValues">
    <tr>
      <td>
        <input type="text" data-bind="value: stepNo" />
      </td>
      <td>
        <input type="text" data-bind="value: stepText" />
        <img width='16px' data-bind="visible: notUniqueHint, attr: {title: notUniqueHint}" src='http://www.veryicon.com/icon/preview/System/Function/warning%2048%20Icon.jpg'
        />
      </td>
    </tr>
  </tbody>
</table> 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/mbBZC/2/](http://jsfiddle.net/vyshniakov/mbBZC/2/)

PS 你的 html 有一些语法错误，我更正了。

# ruby-on-rails - Rails 安装依赖

> ID：14460802
> 
> 赞同：1
> 
> 时间：2013-01-22T14:25:36.367
> 
> 标签：ruby-on-rails, ruby, rake

我刚刚下载了一个我想在我的计算机上运行的 Rails 应用程序。我正在运行 OS X 10.8。

我跑了`gem install rails`哪个安装的rails。然后我跑进`bundle install`了这个项目，它一直说：`Abort Trap: 6`.

然后我跑了`rails server`，显然`rake`失踪了。于是我跑了`gem install rake`。现在，当我跑步时`rails server`，我发现`activesupport-3.2.9`它不见了。我跑了`gem install activesupport`，但是安装了`activesupport-3.2.11`，所以 3.2.9 仍然丢失。我尝试运行`gem install activesupport-3.2.9`，但它说找不到该版本。

为什么会这么乱？我想我做错了。如何一次安装所有依赖项并解决我的问题？

`bundle install`错误：

```
185 /Users/nayef/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/buffering.rb
  186 /Users/nayef/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/fcntl.bundle
  187 /Users/nayef/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/ssl-internal.rb
  188 /Users/nayef/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/x509-internal.rb
  189 /Users/nayef/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl.rb
  190 /Users/nayef/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/https.rb

[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Abort trap: 6 
```

`rails`错误：

```
/Users/nayef/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/spec_set.rb:90:in `block in materialize': Could not find activesupport-3.2.9 in any of the sources (Bundler::GemNotFound)
        from /Users/nayef/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/spec_set.rb:83:in `map!'
        from /Users/nayef/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/spec_set.rb:83:in `materialize'
        from /Users/nayef/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/definition.rb:127:in `specs'
        from /Users/nayef/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/environment.rb:27:in `specs'
        from /Users/nayef/.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/noexec.rb:41:in `candidate?'
        from /Users/nayef/.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/noexec.rb:60:in `setup'
        from /Users/nayef/.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/noexec.rb:75:in `<top (required)>'
        from /Users/nayef/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
        from /Users/nayef/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
        from /Users/nayef/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
        from /Users/nayef/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:9:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:28:18.250

您可以在 gemfile 源 ( )中使用`http`而不是`https``http://rubygems.org`

使用`http`本身不是问题，但它确实使您的应用程序更容易受到某些攻击。有人可以冒充`http://rubygems.org`并为您提供修改后的宝石。我从未听说过这样的攻击，但它们在理论上是可能的。

# java - ace:dataTable 搜索不更新命令按钮操作

> ID：14460805
> 
> 赞同：1
> 
> 时间：2013-01-22T14:25:41.553
> 
> 标签：java, jakarta-ee, jsf-2, icefaces, icefaces-3

我正在使用**icefaces 3.0.0 版**，并且我正在使用 ace dataTable 组件，如下所示：

1- Jsf代码：

```
<ace:dataTable id="cityTable"
                              value="#{weatherBean.cities}"
                              var="city"
                              paginator="true"
                              paginatorPosition="bottom"
                              rendered="#{weatherBean.cities.size()>0}"
                              rows="#{weatherBean.pageSize}"
                              style="width: 950px;">

                         <ace:column id="country" headerText="Country" sortBy="#{city.countryName}"
                                    filterBy="#{city.countryName}" filterMatchMode="contains">
                            <h:outputText id="countryNameCell" value="#{city.countryName}"/>
                        </ace:column>

                        <ace:column id="action" headerText="Actions">
                       <sec:authorize access="hasRole('perm_edit_city')">                       
                            <pretty:link mappingId="editcity">
                                <f:param value="#{city.id}" />
                                <h:graphicImage url="/resources/images/edit.png" style="border: 0px;"></h:graphicImage>
                            </pretty:link>
                        </sec:authorize>        
                            <b/>
                            <sec:authorize access="hasRole('perm_delete_city')">
                                <h:commandButton id="deleteR" image="/resources/images/delete.png"
                                     action="#{weatherBean.deleteCity(city.id)}" 
                                     onclick="var r=confirm('Are you sure you want to delete #{city.name} ?');if (r==true){}else{return false; }"
                                     >
                                </h:commandButton>
                            </sec:authorize>
                        </ace:column>

                    </ace:dataTable> 
```

2-支持bean代码：

```
@Component("weatherBean")
@Scope("view")
public class WeatherBean {

private List<City> cities;

@Autowired
private CityService cityService;

    @PostConstruct
    public void init() {
            cities = cityService.getAllCity();
    }

    public void deleteCity(Long cityId) {
        log.debug("Delete deleteCity : " + cityId);
        cityService.deleteCity(cityService.getCityById(cityId));
    }

} 
```

**问题：**

*   默认情况下，datatable 显示从 id 1 到 id 20 的城市。
*   例如，如果我按名称进行搜索，并且搜索返回的结果为 id 100 到 id 120，并且我尝试在任何搜索结果上调用 delete 方法，则会在旧 id 上调用 delete 方法>>`action="#{weatherBean.deleteCity(city.id)}"`未`city.id`更新搜索后。

请指教，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:37:04.180

这个问题在**icefaces 3.2.0中解决了**

# php - 每项任务完成后打印消息

> ID：14460813
> 
> 赞同：1
> 
> 时间：2013-01-22T14:26:26.990
> 
> 标签：php

我知道主题的标题不清楚，但我会解释那个标题的意图。

首先
，我有一个包含一些字段的表单，并提交按钮。该表单将向另一个页面发出请求，`upgrade2.php`例如：

```
<form action="upgrade2.php" method="post">
  <input ......>
  <input ......>
  <input type="submit" name="open_upgrade2" value="ok" />
</form> 
```

现在，该页面`upgrade2.php`不仅具有如下任务：

```
<?php
  task 1
  task 2
  task 3
?> 
```

我想要的是在每个任务打印消息结束后，例如：

```
<?php
  task 1
  echo task 1 finished
  task 2
  echo task 2 finished
  task 3
  echo task 3 finished
?> 
```

我尝试使用`sleep`,`ob_flush`和`flush`函数来停止执行一段时间以打印消息然后继续执行，但不幸的是，脚本必须同时执行所有任务然后告诉我结果，但这不是我想要的。

我想在每项任务结束后打印消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:33:49.383

你必须做一些事情：

1）关闭ob_caching（或在每个任务/输出后添加ob_flush）

2）在每个任务/输出后使用[刷新](http://php.net/manual/en/function.flush.php)或停用缓冲区

3) 确保网络服务器在脚本完成之前不会缓存/等待/缓冲。这取决于模块/cgi/webserver。我想这是你的问题。

尝试先在 cli 上编程并检查输出。然后通过网络服务器运行它。您正在使用哪个网络服务器以及它如何使用/调用/执行 php？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:50:43.340

不久前，我做了类似的事情，但使用了一些工作来进行显示。

我没有依赖 php 刷新功能，而是使用 AJAX 之类的调用来检索存储在 memcache 中的状态。

我为 ajax 请求创建了一个文件，该文件将简单地返回当前登录用户的 memcache 值，这是一个包含任务的数组，以及它们的完成状态（真或假）。并且根据该结果，javascript 会改变 HTML。

对于流程脚本，它只是在每次任务完成时编辑 memcache 值。

这似乎需要做很多工作，但它可以在一小时内很好地实现，并且您可以更好地控制输出的 HTML。

# linux - 如何将“ps”的所有输出通过管道传输到 shell 脚本中以进行进一步处理？

> ID：14460818
> 
> 赞同：2
> 
> 时间：2013-01-22T14:26:55.157
> 
> 标签：linux, bash, shell, ps

当我运行这个命令时：

```
ps aux|awk {'print $1,$2,$3,$11'} 
```

我得到了用户、PID、CPU% 和实际命令的列表。我想将所有这些列表通过管道传输到 shell 脚本中以计算 CPU%，如果大于 5，则通过 PID 终止进程。

我尝试将它传递给一个简单的shell脚本，即

```
ps aux|awk {'print $1,$2,$3,$11'} | ./myscript 
```

我的脚本的内容是：

```
#!/bin/bash
# testing using positional parameters
echo "$1 $2 $3 $4" 
```

但我得到一个空白输出。知道怎么做吗？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:16:16.363

如果使用`awk`，则不需要额外的 bash 脚本。此外，最好减少`ps`命令的输出，这样您就不必处理额外的信息：

```
ps acxho user,pid,%cpu,cmd | awk '$3 > 5 {system("echo kill " $2)}' 
```

### 解释

*   我使用的额外 ps 标志：
    *   c: 只有命令，没有额外的参数
    *   h：没有标题，适合编写脚本
    *   o：输出格式。在这种情况下，只输出用户、PID、%CPU 和命令
*   awk 命令将第三列的 %CPU 与阈值 (5) 进行比较。如果超过阈值，则发出系统命令以终止该进程。
*   注意命令中的*回声*。一旦您确定脚本以您喜欢的方式运行，然后从命令中删除单词*echo*以真正执行它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T14:28:41.050

您的脚本需要读取其输入

```
#!/bin/bash
while read a b c d; do
    echo $a $b
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T14:36:09.303

在 Linux（或 POSIX 兼容系统）中，当将输入从一个进程传递到另一个进程时，输出不会作为参数提供给接收进程。相反，第一个进程的标准输出通过管道传输到另一个进程的标准输入。

因此，您的脚本无法运行。$1...$n 访问作为参数传递给它的变量。因为没有，所以不会显示任何内容。相反，您必须使用命令将标准输入读入变量`read`（正如威廉指出的那样）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T13:18:46.957

尝试将 myscript 放在前面，如下所示：

```
./myscript `ps aux|awk {'print $1,$2,$3,$11'}` 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T14:31:54.340

我认为您可以使用`xargs`命令将 AWK 输出作为参数传递给您的脚本：

```
ps aux|awk {'print $1,$2,$3,$11'} | xargs ./myscript 
```

一些额外的信息`xargs`：[http ://en.wikipedia.org/wiki/Xargs](http://en.wikipedia.org/wiki/Xargs)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-22T15:34:02.893

如果我很好地理解了您的问题，您想杀死超过 CPU 的 X% 的每个进程（使用`ps aux`）。

这是使用 AWK 的解决方案：

```
ps aux | grep -v "%CPU" | awk '{if ($3 > XXX) { print "Killing process with PID "$2", called "$4", consuming "$3"% and launched by "$1; system( "kill -9 " $2 );}}' - 
```

其中 XXX 是您的阈值（CPU 的百分比）。

它还将相关信息打印到被杀死的进程，如果不需要，只需删除打印语句。您可以添加一些过滤器，例如：不要删除 root 的进程...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-22T15:06:07.043

管道'|' 将左侧的标准输出重定向到右侧的标准输入。在这种情况下，ps 的输出进入 awk 的输入，然后 awk 的输出进入脚本的标准输入。因此，您的脚本需要阅读其 STDIN。

```
#!/bin/bash
read var1 var2 var3 ... 
```

然后你可以对这些变量做任何你想做的事情。

更多信息，输入 bash: *help read*

# google-maps - 谷歌地图api返回法国数据，即使我要求英语？

> ID：14460821
> 
> 赞同：0
> 
> 时间：2013-01-22T14:27:02.860
> 
> 标签：google-maps

我请求
[http://maps.googleapis.com/maps/api/geocode/json?address=france,etretat&sensor=false&language=en](http://maps.googleapis.com/maps/api/geocode/json?address=france,etretat&sensor=false&language=en)，但返回法国数据，如何解决？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-17T20:29:42.253

api 结果实际上是英文的。对于某些城市和地点，很可能没有官方的英文翻译。但是您可以看到一些名称已调整：

英语：`Upper Normandy`

法语：`Haute-Normandie`

同样适用于其他语言，您可以看到翻转语言时发生的小变化：

*   [法语](http://maps.googleapis.com/maps/api/geocode/json?address=france,etretat&sensor=false&language=fr)
*   [英语](http://maps.googleapis.com/maps/api/geocode/json?address=france,etretat&sensor=false&language=en)
*   [西班牙语](http://maps.googleapis.com/maps/api/geocode/json?address=france,etretat&sensor=false&language=es)
*   [葡萄牙语](http://maps.googleapis.com/maps/api/geocode/json?address=france,etretat&sensor=false&language=pt)

和另一种字母的语言：

*   [俄语](http://maps.googleapis.com/maps/api/geocode/json?address=france,etretat&sensor=false&language=ru)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:28:17.500

返回的数据是英文的，只是地名是法文的。

`etretat`Google 正在更正您对to的请求，`Étretat`因为这是带重音的正确拼写，并且是查询的最佳匹配结果。

# .htaccess - .htaccess 重定向两部分

> ID：14460826
> 
> 赞同：0
> 
> 时间：2013-01-22T14:27:28.117
> 
> 标签：.htaccess

我有一个登录网站，它分为两部分 - 文件夹： [http](http://www.example.com/site-1) ://www.example.com/site-1 和[http://example.com/site-2](http://example.com/site-2)

如果您访问[http://www.example.com](http://www.example.com)，您会从 index.php 重定向到[http://example.com/site-2](http://example.com/site-2)。

在每个文件夹中都有 .htaccess 文件管理重定向。对于每个文件夹，我都有这样的声明：

```
http://www.example.com/site-1:
RewriteCond %{REQUEST_URI} ^/site-2/?.*$
RewriteRule ^(.*)$ http://www.example.com/site-1/$1 [R=301,L]

http://example.com/site-2:
RewriteCond %{REQUEST_URI} !^/site-2/?.*$
RewriteRule ^(.*)$ http://www.example.com/site-2/$1 [R=301,L] 
```

[在http://example.com/site-2](http://example.com/site-2)一切正常。但是如果我去[http://example.com/site-1](http://example.com/site-1)，为了访问每个页面，我必须一遍又一遍地登录。

我认为.htaccess 有问题。你的帮助真的很棒。谢谢

# ios - iOS 上的 Web 应用程序在添加到主屏幕时丢失会话

> ID：14460829
> 
> 赞同：1
> 
> 时间：2013-01-22T14:27:33.603
> 
> 标签：ios, web-applications

我制作了一个 Web 应用程序（Lotus Domino），用户需要在其中进行身份验证才能使用。除非在“添加到主屏幕”模式下使用该解决方案，否则这可以正常工作。每次用户切换到 Web App 时，用户都需要再次登录才能进行身份验证。当添加到主屏幕时，我可以做些什么来保持会话 - 就像应用程序在使用浏览器时所做的那样？关于同一主题的其他一些问题，但我发现没有一个可以回答我这个问题。

# sql - 授权 SQL 2008 R2 处理器许可证，而 SQL 2012 仅可用

> ID：14460832
> 
> 赞同：-4
> 
> 时间：2013-01-22T14:27:39.667
> 
> 标签：sql, sql-server-2008-r2, licensing, sql-server-2012

我们正在寻找安装 SQL Server 2008 R2 - 鉴于自 SQL 2012 推出以来许可模式发生了变化（处理器许可证不再可用）并且 2008 R2 处理器许可证不再可用。

我想知道，从在线商店（显然不是 Microsoft 市场）商店购买 SQL Server 2008 R2 处理器许可证是否有效以获取许可证 - 如果审核员过来检查，MS 是否会有任何回击许可？

底线是，鉴于我们的设置 - 服务器/用户许可证对我们来说并不感兴趣。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:32:02.787

我们不是律师，本网站不提供有关许可合规性的法律建议或问题。我强烈建议您不要将公司的未来赌在相信您在互联网上某个匿名人士的问答网站上得到的答案上。

确保正确的方法是联系官方的 Microsoft 许可代表，告诉他们您在购买什么以及在哪里购买，并让他们确认您将合规 - 在您购买之前。

[http://support.microsoft.com/contactus/cu_sc_prodinfo_master](http://support.microsoft.com/contactus/cu_sc_prodinfo_master)

# java - 如何从 MySql 获取大量数据行并将其显示在 Java 应用程序上？

> ID：14460838
> 
> 赞同：0
> 
> 时间：2013-01-22T14:27:50.880
> 
> 标签：java, mysql, jdbc

我有一个表中有 100 行数据的 Mysql 数据库。我创建了一个在 JList 中显示数据的 Java 应用程序（Swing），但我想知道如果我加载了数千行数据，应用程序的性能会降低吗？

如果是这样，显示数据或查询数据的最佳方式是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:31:54.377

您想对数据进行分页，这在 MySQL 中很容易做到。只需在查询中使用 LIMIT 和 OFFSET 即可。

# magento - 用于 paypal_prepare_line_items 的 Magento Observer 以使用 paypal 和 Sub Total Deductions 添加新项目

> ID：14460842
> 
> 赞同：4
> 
> 时间：2013-01-22T14:28:04.453
> 
> 标签：magento

我创建了一个自定义模块来为客户提供一些折扣费用。我已参考此[链接](http://www.excellencemagentoblog.com/magento-add-fee-discount-order-total)为客户费用折扣创建自定义模块。

在这种情况下，当客户有自己的折扣点时，他们将应用购物车页面中的折扣点来减少小计和总计。更改在购物车和结帐页面等中运行良好。

我的问题是订单小计和总计未反映在 Paypal 支付网关行项目中。

因此，我编写了 Event Observer 以使用 Sub total 减去折扣费用并将新行添加到 paypal 行项目。

下面的代码我尝试为折扣费用和小计扣除添加新行

```
<events>
        <paypal_prepare_line_items>
                <observers>
                    <modulename>
                        <type>singleton</type>
                        <class>modulename/observer</class>
                        <method>prepareItems</method>
                    </modulename>
                </observers>
         </paypal_prepare_line_items>
</events> 
```

观察者核心是

```
<?php 
class Mycompany_Modulename_Model_Observer extends Mage_Core_Model_Abstract
{
    const TOTAL_FEE = 'Fee';
    const TOTAL_SUBTOTAL = 'subtotal';

    public function prepareItems($observer)
    {   
        $cart = $observer->getPaypalCart();

        if($cart->getSalesEntity()->getFeeAmount())
        {

            $name = 'Custom Discount';
            $qty = '1';
            $amount = -1.00 * $cart->getSalesEntity()->getFeeAmount();
            $identifier = NULL;

            $cart->_shouldRender = true;

            $item = new Varien_Object(array(
                'name'   => $name,
                'qty'    => $qty,
                'amount' => (float)$amount,
            ));

            $cart->_items[] = $item;

            $cart->updateTotal();

        }

        return;

    }

} 
```

谁能指出我正确的解决方案？

我需要使用贝宝行项目添加折扣费用，并且将正确计算小计。

任何帮助非常感谢。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T06:27:59.217

你可能已经想通了。但你不能做你正在尝试的事情，我不认为你可以访问_items。而是这样做：

`$cart->addItem($name, $qty, $amount);`

我认为不需要调用 updateTotal，我已经完成了前面的操作，并且金额已添加到 Paypal 标准方法的总金额中。我还没有测试过使用 API 而不是简单表单的其他方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-23T16:09:44.890

这是应该解决您的问题的观察者类代码：

```
class Mycompany_Modulename_Model_Observer
{
    public function prepareItems(Varien_Event_Observer $observer)
    {        
        $label = SOME_LABEL;
        $qty = SOME_QTY;
        $feeAmount = SOME_FEE_AMOUNT;
        $itemNumber = SOME_IDENTIFIER_OR_SKU;

        /* @var $cart Mage_Paypal_Model_Cart */
        $cart = $observer->getEvent()->getPaypalCart();

        $cart->addItem($label, $qty, $feeAmount, $itemNumber);

        return $this;
    }
} 
```

# jcr - 如何在jcr中获取节点属性的数组值

> ID：14460843
> 
> 赞同：4
> 
> 时间：2013-01-22T14:28:04.483
> 
> 标签：jcr, aem

在获取节点属性的字符串 [] 值时需要帮助？

例如，我有一个节点图像，它具有 String[] 类型的属性“引用”。我需要获取数组的第一个值。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T14:56:35.247

从节点，您可以获取引用属性。然后调用 getValues 到参考值。从那里，就拿第一个。就像是

```
public String getFirstReference(Node node) throws RepositoryException {
  Property references = node.getProperty("references");     
  Value[] values = references.getValues();
  return values[0].getString();     
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-22T10:14:04.057

```
Property nProp = node.getProperty("references");
Value[] values = propertyNode.getValues();
for (Value v : values) {
    System.out.println("Property Name = "+nProp.getName()+" ; Property Value= "+v.getString());
} 
```

# json - 使用 Jackson 序列化/反序列化基于 POJO 属性的多态集合

> ID：14460844
> 
> 赞同：1
> 
> 时间：2013-01-22T14:28:11.893
> 
> 标签：json, jackson

在我的项目中，我有这样的东西

```
enum Species {
    DOG, CAT
}

@JsonTypeInfo(
        use = JsonTypeInfo.Id.NAME,
        include = JsonTypeInfo.As.PROPERTY,
        property = "type")
@JsonSubTypes({
        @Type(value = Cat.class, name = "cat"),
        @Type(value = Dog.class, name = "dog") })
class Animal {
    Species species;
    String name;
}

class Cat extends Animal {
    Cat() {
        species = Species.CAT;
    }
    ...
}

class Dog extends Animal {
    Dog() {
        species = Species.DOG;
    }
    ...
}

class Zoo {
    Collection<Animal> animals;
} 
```

我需要将动物园序列化/反序列化为 json。我遵循了本指南[http://programmerbruce.blogspot.com/2011/05/deserialize-json-with-jackson-into.html](http://programmerbruce.blogspot.com/2011/05/deserialize-json-with-jackson-into.html) 并且效果很好。但它为我并不真正需要的 json 对象添加了冗余属性“类型”。有什么方法可以仅使用我的 pojo 的种类属性来正确序列化/反序列化集合吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:42:45.363

Jackson 的 2.2.0 版本应该已经修复了这个问题。

您可以在此处查看问题的详细信息及其修复方法： [https ://github.com/FasterXML/jackson-databind/issues/23](https://github.com/FasterXML/jackson-databind/issues/23)

# html - 正则表达式保留除 DIV 以外的所有内容

> ID：14460848
> 
> 赞同：0
> 
> 时间：2013-01-22T14:28:21.913
> 
> 标签：html, regex

我正在使用 jEdit，并且我有一堆编码错误的 HTML 文件，我想获取其中的主要内容而不是周围的 HTML。

我需要介于两者之间的一切`<div class="main-text">`和下一个`</div>`。

必须有一种 REGEX 方式来执行此操作，jEdit 允许我用正则表达式替换和查找。

我不精通正则表达式，我需要很长时间才能解决这个问题 - 任何人都可以快速帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:35:14.403

从字面上理解您的问题，您可以替换：

```
/.*<div class="main-text">(.*?)<\/div>.*/ 
```

使用`\1`（或`$1`取决于您的编辑器使用什么）。

然而，[他来咬你的小马驹](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)，因为如果你的“正文”元素包含另一个元素`<div>`怎么办？如果你确定这不会发生，那么你很好。否则，你就麻烦了。用空字符串替换可能更容易`/.*<div class="main-text">/`，然后手动查找结尾并删除之后的所有内容。

就此而言，此任务可能最容易手动完成，因此您不必在代码运行后仔细检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:31:43.477

这个正则表达式应该可以解决您的问题：`/<\s*div\s+class="main-text"[^>]*>(.*?)<\/div>/gi`

这是 Perl 中的一个示例：

```
my $str = '<div class="main-text"> and the next </div>';
$str =~ /<\s*div\s+class="main-text"[^>]*>(.*?)<\/div>/gi;
print $1; 
```

该示例在 Perl 中，但正则表达式可以独立应用语言。

这是正则表达式的解释：

```
/       -start of the regex
   <\s*    -we can have < and whitespace after it
      div     -matches "div"
         \s+     -matches one or more whitespaces after the <div
         class="main-text"    -matches class="main-text" (so <div class="main-text" to here)
         [^>]*       -matches everything except >, this is because you may have more attributes of the div
         >          -matches >, so <div class="main-text"> until now
      (.*?)        -matches everything until </div> and saves it in $1
   <\/div>        -matches </div>, so now we have <div class="main-text">( and the next )</div> until now
/gi       -makes the regex case insensitive 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:30:53.067

此正则表达式捕获 html 标记之间的文本

```
<(?<tag>div).*?>(?<text>.*)</\k<tag>> 
```

分解：

1.  <(?div).*?> : 第一个以 div 开头的标签，这个组被称为 "tag"
2.  (?.*) ：标签之间的文本捕获
3.  > ：结束 div 标签，反向引用名为“tag”的组

最后，捕获的结果给出两组“标签”和“文本”，您的捕获在“文本”中

# php - Jquery中的Javascript函数响应不起作用

> ID：14460850
> 
> 赞同：0
> 
> 时间：2013-01-22T14:28:25.713
> 
> 标签：php, javascript, jquery, ajax

我有一个使用 ajax 将评论发布到 video_comment.php 的表单，然后在视频页面上实时显示评论。

这是我的jQuery代码：

```
$("input[id*='post_video_playallcomment_']").livequery('click', function(event) {
    event.preventDefault();    
    var video_msg   = $("#post_message");
    var input_id    = $(this).attr('id');
    var id_split    = input_id.split('_');
    var video_id    = id_split[3];                    
    var comment     = $("textarea[id='video_comment']").val();
    var response_messages = '#video_response';        

    if ( comment == '' ) {
        video_msg.fadeIn();
        return false;
    }

    video_msg.hide();
    user_posting(response_messages, '<?php echo $lang['600']; ?>', 1);
    reset_chars_counter();
    $.post(base_url + '/video_comment.php', { video_id: video_id, comment: comment },
    function(response) {
        if ( response.msg != '' ) {
            $(response_messages).hide();
            user_posting(response_messages, response.msg);                    
            $("textarea[id='video_comment']").val('');
        } else {
            $(response_messages).hide();
            user_response(response_messages, '<?php echo $lang['587']; ?>');             
            $(".no_comments").hide();
            $("textarea[id='video_comment']").val('');
            var bDIV = $("#comments_delimiter");
            var cDIV = document.createElement("div");
            $(cDIV).html(response.code);
            $(bDIV).after(cDIV);
        }
    }, "json");
}); 
```

在 video_comment.php 上，这是在视频页面上实时显示评论的 response.code。

```
echo 'text...

echo '<div id="commentplayer"></div>';
echo '<script type="text/javascript">';
echo 'jwplayer("commentplayer").setup({';
echo 'file: "...url",';  
echo 'width: "300",';
echo 'height: "225",';
echo 'provider: "http",';
echo 'startparam: "start",';
echo 'wmode: "transparent",';        
echo 'controls: "true",'; 
echo 'stretching: "uniform",';    
echo 'primary: "flash",';       
echo 'autostart: "false",';
echo 'ga: {}';
echo '});';
echo '</script>';

echo 'text... 
```

我可以毫无问题地获取“文本...”，但我无法让“<script type="text/javascript">function...</script>”实时显示在视频页面上。

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:35:28.087

而不是将javascript代码放在php返回中，为什么不将它放在`.post`响应中？

```
$("input[id*='post_video_comment']").click(function() {           
$.post('video_comment.php', function(response) {
  $('#comment').html(response.code);  
    //place javascript code here
}, "json"); 
```

});

`onload`或在您的`js`代码之前放置一个

```
$str = '<div id="commentplayer"></div>
<script type="text/javascript">
window.onload=(function() {
    jwplayer("commentplayer").setup({
    file: "...url",
    width: "300",
    height: "225",
    provider: "http",
    startparam: "start",
    wmode: "transparent",      
    controls: "true", 
    stretching: "uniform",  
    primary: "flash",     
    autostart: "false",
    ga: {}
    });
});
</script>';

echo $str; 
```

# linq - 在 LINQ 中仅提取日期时间中的日期部分

> ID：14460851
> 
> 赞同：0
> 
> 时间：2013-01-22T14:28:25.887
> 
> 标签：linq, c#-4.0

我们在 a 中有一些数据，`DataTable`我们正在使用这样的查询来获取我们需要的内容。

```
IEnumerable<Results> subResult = from query in datatable.AsEnumerable()
                             select new Results
                                  {
                                      Name = query.Field<string>("Name"),
                                      Date = query.Field<DateTime?>("Date")
                                  } 
```

上面的查询返回我需要的内容，但以完整格式返回日期（例如：） `m/dd/yyyy hh:min:sec am/pm`，但我们只需要其中的日期部分（只需要拉入 mm/dd/yyyy）。当查看 this 的属性时，找不到隐式获取它的方法，请帮助我获取此结果。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:36:01.767

AFAIK .net 中没有日期类，如果你想要纯日期，你应该为此编写一个类，否则你可以将部分作为字符串拉出

```
DateTime.Now.Date.ToString("yyyy/MM/dd") 
```

以字符串类型为您提供当前日期，但如果您获得该`.Date`部分，它会为您提供一个`DateTime`仍然显示时间部分的对象`AM 12:00:00:0 blah blah`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:32:49.713

DateTime 类具有您刚才提到的所有属性。您应该尝试使用 ToString("anyformatyouwant") 格式修复您的显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:33:04.563

那这个呢？

```
Date = query.Field<DateTime?>("Date").Date 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T14:33:22.623

这将为您提供日期部分：

```
IEnumerable<Results> sub-result= from query in datatable.AsEnumerable()
    where new Results
    {
        Name = query.Field<string>("Name"),
        Date = query.Field<DateTime?>("Date").Date
    } 
```

但是，如果您只想在某处*显示*日期（这意味着您没有使用它来进行日期分组等，那么我只需在您的 UI 层中指定显示格式。

# .net - VS2010 调试器不会进入本地托管的 WCF 服务

> ID：14460853
> 
> 赞同：2
> 
> 时间：2013-01-22T14:28:29.417
> 
> 标签：.net, wcf, debugging, service, breakpoints

我在 ASP.NET 开发服务器的本地计算机上托管了一个简单的“Hello World”WCF 服务。客户端 C# 控制台应用程序 (NET 4.0 / 4.03) 调用该服务以获取“Hello World”。不能再简单了。

一切都很好，很漂亮：服务正常工作，我可以通过 F11 或通过断点从客户端进入 WCF 服务......

然后我遇到了两个不断想要重新安装的 Win7 更新的问题。根据来自网络的建议，我使用 DotNet 清理工具（[此处](https://skydrive.live.com/?cid=27e6a35d1a492af7&id=27E6A35D1A492AF7!390)）删除了 .NET 框架。重新安装 .NET 框架和所有更新后，一切似乎都很好：不再重新安装更新，NET 正在工作，调试器正在工作，一切正常......除了一个例外：

**VS 调试器将不再进入我的 WCF 服务！**

以下事情**不起作用**：

*   我已经为 VS2010 重新安装了 SP1
*   在 web.config 中正确设置了编译 debug="true"
*   x86/x64 没有问题（之前也可以）
*   我可以手动附加到 WebDev.WebServer40.exe 并调试到服务中，但如果你必须经常这样做，这很糟糕

有人有想法吗？

# backbone.js - Backbone.js listenTo 窗口调整大小抛出 [object Object] has no method 'apply' 错误

> ID：14460855
> 
> 赞同：20
> 
> 时间：2013-01-22T14:28:40.053
> 
> 标签：backbone.js, backbone-events

**问题：**

我正在尝试使用 Backbone.js 中的新 listenTo() 方法将调整大小事件从视图附加到窗口。该事件似乎绑定到窗口，但是，当窗口实际重新绑定时，会引发以下错误：

> Uncaught TypeError: Object [object Object] has no method 'apply' jquery.js:2 p.event.dispatch jquery.js:2 p.event.add.g.handle.h

**以下是将事件附加到视图的代码：**

```
this.listenTo($(window),"resize", this.resizeContext, this)); 
```

**这是 resizeContext 函数：**

```
 resizeContext: function(event) {

            console.log("resizing context for "+this.id);

            this.setHeight();

            // trigger resize event (use event bus)
            this.options.vent.trigger("resize", event);

        } 
```

**注意：**使用标准`$(window).on("resize",this.resizeContext)`附加事件并按应有的方式运行。我正在尝试利用`stopListening()`添加到`view.remove();`

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-22T14:47:52.557

新的`listenTo`and`stopListening`是`Backbone.Events`mixin 的方法，它们只能用于监听由 触发的 Backbone 事件`.trigger`，例如内置的`collection:add`, 或`model:change`事件。

这意味着您将无法使用`stopListening`DOM 事件的功能，例如`window:resize`.

请考虑改写该`View.remove`方法。

```
var SomeView = Backbone.View.extend({
  initialize:function() {
    $(window).on("resize",this.resizeContext)
  },

  remove: function() {
    $(window).off("resize",this.resizeContext);
    //call the superclass remove method
    Backbone.View.prototype.remove.apply(this, arguments);
  }
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-04T14:06:21.407

如果您想继续使用`listenTo`，您可能希望对 DOM 元素使用以下一次性包装器：

```
/**
 * Use Backbone Events listenTo/stopListening with any DOM element
 *
 * @param {DOM Element}
 * @return {Backbone Events style object}
 **/
function asEvents(el) {
    var args;
    return {
        on: function(event, handler) {
            if (args) throw new Error("this is one off wrapper");
            el.addEventListener(event, handler, false);
            args = [event, handler];
        },
        off: function() {
            el.removeEventListener.apply(el, args);
        }

    };
} 
```

例子：

```
view.listenTo(asEvents(window), "resize", handler); 
```

并且侦听器将自动删除`view.remove()`或`view.stoplistening()`

这是多个事件侦听器的更复杂的实现[https://gist.github.com/epeli/5927950](https://gist.github.com/epeli/5927950)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-15T01:01:47.063

在我的代码中，我需要做 *.debounce(* (this.resizeContext).bind(this))。

Which makes it harder to be turned off. As a dirty solution, I just turn off all 'resize' listener when remove the view. I guess in the new view, if there is any resize listener, it will be turned on again.

```
remove: function() {
    $(window).off("resize");
    //call the superclass remove method
    Backbone.View.prototype.remove.apply(this, arguments);
} 
```

# windows - 批处理脚本中的 windows comp 命令：删除提示

> ID：14460857
> 
> 赞同：5
> 
> 时间：2013-01-22T14:28:42.407
> 
> 标签：windows, batch-file, command, command-prompt, file-comparison

每次我使用 Windows`comp`命令时，都会显示一条消息，其中包含：

```
Compare more files (Y/N) ? 
```

显示。我可以`N`通过默认输入来避免它吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T14:32:06.080

您可以在其中输入 N ：

```
echo N | comp file1.txt file2.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T19:59:09.343

您还可以考虑使用另一个也是内置的命令，`FC`. 它可以执行二进制比较（您需要指定`/B`开关：）`FC /B file1 file2`，这似乎更接近于做什么`COMP`，尽管结果仍然以不同的格式显示。

无论如何，它不会提示您比较更多文件，它只是完成工作并终止。

# ruby - 在 Ruby 中生成 RGhost 条码内联（流）

> ID：14460861
> 
> 赞同：1
> 
> 时间：2013-01-22T14:28:46.743
> 
> 标签：ruby, ruby-on-rails-3, stream, barcode

我正在使用[RGhost-Rails](https://github.com/shairontoledo/RGhost-Rails)在 pdf 文件（带有 wicked-pdf）上生成条形码。

我有以下代码（在 Ruby on Rails 3 中）

```
<% doc=RGhost::Document.new :paper => [7,2]%>
<% doc.barcode_code39('1234567', :text => {:size => 10, :offset => [0,-10], :enable => [:text, :check, :checkintext] }) %>
<% r= doc.render :png, :resolution => 100, :debug => true, :filename => "./public/pdf/rghost_barcode.png"  %> 
```

这段代码工作正常，但我想内联生成我的图像（不用担心文件名和文件路径）。类似的东西（我猜）：

```
<% doc=RGhost::Document.new :paper => [7,2]%>
<% doc.barcode_code39('1234567', :text => {:size => 10, :offset => [0,-10], :enable => [:text, :check, :checkintext] }) %>
<% r= doc.render_stream :png, :filename => "./public/pdf/test.png"  %>

<img src="<%= RGhost inline functionality/ r.stream_Object_String? %>" width="16" height="335" alt="asd"> 
```

这样，我就不必担心在显示 pdf 后删除（生成的）代码栏文件。

有什么办法可以做到这一点？如果没有，还有其他具有这些功能的 gem（请注意，我还需要显示代码栏文本 - 有些 gem 没有此功能）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:55:30.737

显然唯一的解决方案（不是我正在寻找的）是[这个](https://github.com/shairontoledo/rghost-barcode/blob/master/helper/generate_html.rb)

# java - 如何删除Windows 7中的隐藏文件

> ID：14460868
> 
> 赞同：1
> 
> 时间：2013-01-22T14:29:06.760
> 
> 标签：java, file, directory, hidden

我已经从此[链接在 Windows 中创建了隐藏文件夹。](https://stackoverflow.com/questions/1294989/make-a-file-folder-hidden-on-windows-with-java).现在我必须删除该隐藏文件夹中的一个文件。

例如。**C:\程序文件\test\abc.xml**

我想删除 abc.xml 并且我在 java 中使用了以下代码进行删除

```
String path="C:\program files\test\abc.xml"
 if(new File(path).exists()){
  new File(path).delete()
 } 
```

该文件的**属性设置为 N**而不是删除。我不知道发生了什么？

**注意：** abc.xml 文件是加密文件。

谁能帮我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:31:05.743

```
String path="C:\\program files\\test\\abc.xml" 
```

尝试转义反斜杠，看看是否可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-13T05:45:36.633

```
FileUtils.cleanDirectory(new File("C:\\\program files\\\test\\\")); 
```

它将处理目录中的所有内容。

只需要将`Apache Commons IO`jar 添加到您的路径中。

# php - Jquery .load() 不会返回 HTML（在 URL 中带有“”空格！）

> ID：14460872
> 
> 赞同：1
> 
> 时间：2013-01-22T14:29:20.033
> 
> 标签：php, javascript, jquery, ajax, load

我正在为学校开设网上商店。我正在尝试制作`jquery/ajax`购物车系统。

现在这是我的`jquery.load();`代码

```
//LOAD PHP FUNCTION TO ADD TO CART
        $("#cart_page").load("cart.php?command=addToCart&productID="+productID+"&size="+size+"&amount="+amount+"&product_name="+product_name+""); 
```

这是 cart.php 文件：

```
<?php

//ADD PRODUCTS TO CART
if($_GET['command'] == 'addToCart'){
    /********* START SESSION *********/
    session_start();

    if($_GET['productID'] == "" || $_GET['amount'] < 1 || $_GET['size'] == "" || $_GET['product_name'] == "") return;

    $max=count($_SESSION['cart']);

    if(is_array($_SESSION['cart'])){
        $max=count($_SESSION['cart']);

        for($i=0;$i<$max;$i++){
            if($_GET['productID'] == $_SESSION['cart'][$i]['productid']){
                if($_GET['size'] == $_SESSION['cart'][$i]['size'] ){
                    $product_exists = 1;
                }   
            }
        }

        if($product_exists != 1){
            $_SESSION['cart'][$max]['productid'] = $_GET['productID'];
            $_SESSION['cart'][$max]['product_name'] = $_GET['product_name'];
            $_SESSION['cart'][$max]['amount'] = $_GET['amount'];
            $_SESSION['cart'][$max]['size'] = $_GET['size'];
        }

    }else{

        $_SESSION['cart']=array();
        $_SESSION['cart'][0]['productid'] = $_GET['productID'];
        $_SESSION['cart'][0]['product_name'] = $_GET['product_name'];
        $_SESSION['cart'][0]['amount'] = $_GET['amount'];
        $_SESSION['cart'][0]['size'] = $_GET['size'];

    }

if(is_array($_SESSION['cart'])){
$max=count($_SESSION['cart']);
$cart = <<<EOD
<div class="cart_page">
    <div class="cart_product_line">
    $max
        <ul>

EOD;
        for($i=0;$i<$max;$i++){
            $arrayID = $i;
            $cart_productID = $_SESSION['cart'][$i]['productid'];
            $cart_productName = $_SESSION['cart'][$i]['product_name'];
            $cart_amount = $_SESSION['cart'][$i]['amount'];
            $cart_size = $_SESSION['cart'][$i]['size'];

$cart.= <<<EOD
            <li>$arrayID</li>
            <li>$cart_productID</li>
            <li id="$cart_productID">$cart_productName</li>
            <li class="amount">$cart_amount</li>
            <li class="size">$cart_size</li>
EOD;
        }

$cart.= <<<EOD
        </ul>
    </div>
</div>
EOD;
    }
}
echo $cart;

?> 
```

现在它做了我想要的一切。但是它给出的结果`'echo $cart.php'`没有显示在我的 index.php 中

你们能帮帮我吗？

PS：

如果我去：

> cart.php?command=addToCart&productID=28&amount=10&size=12&product_name=Test

它还给了这个

```
1
0
28
Test
10
12 
```

在 HTML 中，因此脚本可以正常工作并返回 html！我在加载产品时也这样做，它就像一个魅力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:35:28.130

假设您所说的一切都是真的，那么这里可能会出现几件事（按可能性顺序）：

1.  是否正在对另一个域进行 AJAX 调用？如果是这样，除非您输出一些特殊的标题，否则这将不起作用。
2.  如果您定位的元素不存在，jQuery.load 将失败。因此，请仔细检查您的页面上是否有 #cart_page 元素。
3.  AJAX 页面未返回正确的 HTTP 响应代码。这将在您的控制台中可见。但是您可以通过将代码扩展为：

    `$("#cart_page").load("cart.php?command=addToCart&productID="+productID+"&size="+size+"&amount="+amount+"&product_name="+product_name+"", function(response, status, xhr) { if (status == "error") { console.log("Error code :" + xhr.status); // error code console.log ("Error text :" + xhr.statusText); // error text } });`

4.  其他一些 JS 错误。由于我们看不到您的所有代码，因此很难看到。检查控制台是否有任何错误并将它们添加到您的第一篇文章中。

（很抱歉第 3 点中的代码格式。我不知道如何使用这种语法将代码嵌入到列表中。缩进不起作用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:08:33.370

太傻了。。

`$product_name`我生成的来自数据库。

这个名字有一个“ ”空格。

这样做是它成功加载了脚本，但是因为它在 URL 中有一个 " " 空格，所以 jQuery 将其视为不正确的 URL，并且没有将脚本嵌入到页面中。

我觉得奇怪的是它没有给我任何错误！？

非常感谢你们帮助我！

# java - 事务管理 spring 3 - hibernate 3.5

> ID：14460882
> 
> 赞同：1
> 
> 时间：2013-01-22T14:29:56.960
> 
> 标签：java, spring, hibernate, spring-transactions, transactional

我正在使用带有休眠 3.5.4 的 spring 3

1-我想在事务中创建一个对象并将其保存到数据库（成功通过）。2-我想更新该对象（同一个对象）中的一些字段并在另一个事务中的数据库中更新（这就是问题所在）。

问题是，在第一个事务中成功保存了对象，但在第二个事务中没有在 DB 中更新它。

这是代码示例：

```
public String entry(String str){
    Bill b = create(str);
    b = update(b);
    b = updateAgain(b);

    return "DONE";
}

@Transactional(propagation = Propagation.REQUIRES_NEW, readOnly = false)
public Bill create(String num){
    Bill bill = new Bill();
    bill.setBillNumber(num);
    baseDao.saveObject(bill);
    return bill;
}

@Transactional(propagation = Propagation.REQUIRES_NEW, readOnly = false)
public Bill update(Bill bill){
    bill.setRetailAmount(152.0);
    baseDao.saveObject(bill);
    return bill;
} 
```

注意：我不想将@transactional 注释放在方法“entry”上。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:54:23.200

如果在同一类中的方法上调用该注解将不会生效。AOP 无法通过代理拦截它。将您的输入方法移到课堂之外。

EDIT: Spring enables the Transactional annotation via annotation-driven AOP with proxies or sub-classing. When enabled with proxies, your proxy is out of the picture in a local method call. This [blog post](http://www.intertech.com/Blog/Post/Secrets-of-the-Spring-AOP-Proxy.aspx) has a good explanation with pictures.

# c - 在C中对单链表中的元素进行排序

> ID：14460885
> 
> 赞同：1
> 
> 时间：2013-01-22T14:30:14.210
> 
> 标签：c, list

如何对单链表中的元素进行排序（通过一些值，如 list->id）？我想出的想法是找到最大值并保存它的索引。然后遍历列表，使 *head 指针指向该元素...然后将该元素与第一个元素交换。最后一句话……我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:34:49.380

交换数据通常更容易，而不是“重新链接”列表，以便更改实际列表节点的顺序。

如果您的字段是整数，您可以执行以下操作：

```
static void swap_ids(ListNode *a, ListNode *b)
{
  const int a_id = a->id;

  a->id = b->id;
  b->id = a_id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:35:49.833

我想说如何对列表进行排序的最佳方法是实现[合并排序](http://en.wikipedia.org/wiki/Merge_sort)。

您尝试做的仍然被称为选择排序并且是可行的（实际上它不是很难）。您需要保留一个**指向**列表中**最小**元素的指针，然后移动链接，以便将其放置在头元素之前（记住也要移动头）。我是说你需要选择最小元素，因为通常你只在一个链表中保留一个指向 head 的指针。

# android - 我应该在android中使用什么类型的事件监听器？

> ID：14460886
> 
> 赞同：1
> 
> 时间：2013-01-22T14:30:21.267
> 
> 标签：android, listener, swipe, gesture-recognition

我有一个 5x5 网格（我在画布上绘制了一个矩阵）。我已经按照数组的顺序排列了网格中的文本视图。即（5X5）数组。问题是我想在水平或垂直滑动时更改文本视图的值。

假设我在屏幕上连续使用从 [4][0] 到 [4][2] 的触摸移动，我想修改这些地方的文本视图的值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:20:31.200

这段代码可能会对您有所帮助：

```
public class MyClass extends Activity implements OnGestureListener{
    ArrayList<TextView> tvs = new ArrayList<TextView>();
    public void onCreate(Bundle b) {
        super.onCreate(b);
        setContentView(R.layout.mygrid);
    }

    public void onResume() {
        super.onResume();
        GestureOverlayView gd = (GestureOverlayView)findViewById(R.id.gd);
        LinearLayout g = (LinearLayout)findViewById(R.id.mygrid);
        gd.addOnGestureListener(this);
        g.setOrientation(LinearLayout.VERTICAL);
        for (int i = 0; i < 5; i++) {
            LinearLayout row = new LinearLayout(this);
            g.addView(row);
            row.setOrientation(LinearLayout.HORIZONTAL);
            LinearLayout.LayoutParams rowlp = (LayoutParams) row.getLayoutParams();
            rowlp.width = LayoutParams.MATCH_PARENT;
            rowlp.weight = 1;
            rowlp.height = LayoutParams.WRAP_CONTENT;
            row.setLayoutParams(rowlp);
            for (int j = 0; j < 5; j++) {
                TextView tv = new TextView(this);
                row.addView(tv);
                LinearLayout.LayoutParams lp = (LayoutParams) tv.getLayoutParams();
                lp.height = LayoutParams.MATCH_PARENT;
                lp.width = 0;
                lp.weight = 1;
                tv.setLayoutParams(lp);
                tv.setText(String.valueOf(i * 5 + j));
                tv.setTag(String.valueOf(i * 5 + j));
                tv.setGravity(Gravity.CENTER_HORIZONTAL | Gravity.CENTER_VERTICAL);
                tvs.add(tv);
                if ((i * 5 + j) % 2 == 0)
                    tv.setBackgroundColor(0xff888888);
            }
        }
    }

    private boolean isPointInsideView(float x, float y, View view){
        int location[] = new int[2];
        view.getLocationOnScreen(location);
        int viewX = location[0];
        int viewY = location[1];

        //point is inside view bounds
        if(( x > viewX && x < (viewX + view.getWidth())) &&
                ( y > viewY && y < (viewY + view.getHeight()))){
            return true;
        } else {
            return false;
        }
    }

    @Override
    public void onGesture(GestureOverlayView overlay, MotionEvent event) {
        float x = event.getRawX();
        float y = event.getRawY();
        for (TextView v : tvs) {
            if (isPointInsideView(x, y, v)) {
                v.setText("HERE");
            }
        }
    }

    @Override
    public void onGestureCancelled(GestureOverlayView overlay, MotionEvent event) {

    }

    @Override
    public void onGestureEnded(GestureOverlayView overlay, MotionEvent event) {

    }

    @Override
    public void onGestureStarted(GestureOverlayView overlay, MotionEvent event) {

    }
} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<android.gesture.GestureOverlayView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gd"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/mygrid"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</android.gesture.GestureOverlayView> 
```

希望能帮助到你。

Edit2：用这些方法替换上述方法以提高性能：

```
private TextView getAbove(float x, float y) {
    for (int i = 0; i < 5; i++)
        for (int j = 0; j < 5; j++)
            if (isPointInsideView(x, y, tvs[i][j]))
                return tvs[i][j];
    return null;
}

@Override
public void onGesture(GestureOverlayView overlay, MotionEvent event) {
    float x = event.getRawX();
    float y = event.getRawY();
    if (last == null || !isPointInsideView(x, y, last)) {
        last = getAbove(x,y);
        draw();
    }   
}

private void draw() {
    if (last == null)
        return;
    last.setText("+");
}
private void reset() {
    last = null;
    for (int i = 0; i < 5; i++)
        for (int j = 0; j < 5; j++)
            tvs[i][j].setText(String.valueOf(i * 5 + j));
}

@Override
public void onGestureCancelled(GestureOverlayView overlay, MotionEvent event) {
    reset();
}
@Override
public void onGestureEnded(GestureOverlayView overlay, MotionEvent event) {
    reset();
}
@Override
public void onGestureStarted(GestureOverlayView overlay, MotionEvent event) {
    last = getAbove(event.getRawX(), event.getRawY());
    draw();
}

TextView[][] tvs = new TextView[5][5];
TextView last = null; 
```

并将其`arraylist`制成`TextView[5][5]`

# android - 从 Android 上的 GPS 提供商获取 *粗略* 位置

> ID：14460888
> 
> 赞同：6
> 
> 时间：2013-01-22T14:30:29.820
> 
> 标签：android, gps, location

我的应用只需要非常粗略的位置数据，所以我最初将我的清单权限设置为`ACCESS_COARSE_LOCATION`，并为`NETWORK_PROVIDER`. 这给了我我需要的那种粗略的位置估计，但只有在谷歌位置服务打开的情况下。

我期待如果用户只启用了 GPS，我仍然会收到他们位置的粗略估计。但似乎从 获取任何位置信息的唯一方法`GPS_PROVIDER`是使用`ACCESS_FINE_LOCATION`权限。

那么，只有启用 GPS 的情况下，除非获得`ACCESS_FINE_LOCATION`许可，否则应用程序无法接收位置信息，这是真的吗？换句话说，`GPS_PROVIDER`如果应用程序只有`ACCESS_COARSE_LOCATION`权限，就不能发送粗略的位置估计？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T14:47:00.037

> 那么，只有启用 GPS 的情况下，应用程序是否无法接收位置信息，除非它具有 ACCESS_FINE_LOCATION 权限？

一般来说，是的。

引用[文档`LocationManager`](http://developer.android.com/reference/android/location/LocationManager.html)：

> 如果您的应用程序只有粗略权限，那么它将无法访问 GPS 或被动位置提供程序。其他提供者仍将返回位置结果，但更新率将受到限制，并且确切位置将被混淆到粗略的准确性水平。

> 换句话说，如果应用程序只有 ACCESS_COARSE_LOCATION 权限，GPS_PROVIDER 不能发送粗略的位置估计？

引用[Android 4.2 发行说明](http://developer.android.com/about/versions/android-4.2.html#Behaviors)：

> 与之前的 Android 版本相比，如果您的应用请求 ACCESS_COARSE_LOCATION 权限但未请求 ACCESS_FINE_LOCATION 权限，则用户位置结果可能会不太准确。当您的应用请求粗略位置（而不是精细位置）权限时，为了满足用户的隐私期望，系统不会提供比城市街区更准确的用户位置估计。

但是，我假设这不会取代来自`LocationManager`. 我认为这意味着`NETWORK_PROVIDER`数据可能会被禁止，如果它被认为太准确的话。

# git - 在 git 包中提交

> ID：14460892
> 
> 赞同：10
> 
> 时间：2013-01-22T14:30:47.693
> 
> 标签：git, git-bundle

嗨！

有没有办法在不先克隆的情况下获取存储在 git 包中的所有提交的列表？

获得头脑很容易，但我找不到一种方法来获取完整的日志。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T15:32:30.237

如果不编写一些专门的软件来遍历捆绑包中的包，这是不可能的。如果捆绑包是使用负引用创建的，则它可能包含仅使用捆绑包中的对象无法解析的增量（捆绑包中嵌入的包可能很薄）。

克隆包（至少是裸克隆）将拆分 refs 并索引包，生成标准 git 命令可以使用的格式，因此这是读取它的最简单的方法（就集成工作而言）。

您可以在合并之前“预览”捆绑包的一件事是简单地将其添加为远程存储库，然后您可以从中获取并访问跟踪参考。所以像：

```
git remote add bundle /path/to/bundle
git remote update bundle 
```

现在你可以做其他事情`gitk master...bundle/master`来比较包中的分支和你的本地仓库，最后`git pull bundle master`合并它。

完成后，只需清理`git remote rm bundle`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-13T17:38:08.897

[正如araqnid](https://stackoverflow.com/users/85134/araqnid)的[回答](https://stackoverflow.com/a/14462162/6309)中所建议的那样，从捆绑包中获取仍然是最简单的解决方案。

其他任何事情（意味着不从捆绑中克隆/获取）都将涉及解码`git bundle`格式。
使用 Git 2.25.1（2020 年 2 月）更容易做到这一点，因为捆绑格式的技术细节已经记录在案。

请参阅[Masaya Suzuki ( ) 的](https://github.com/draftcode)[提交 7378ec9](https://github.com/git/git/commit/7378ec90e1c59610dfcac8a4bce7a9d29681380d)（2020 年 2 月 7 日[）](https://github.com/draftcode)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 e99c325](https://github.com/git/git/commit/e99c325bb48cc2e30a763963bff0eb3eceed35ec))^(中，2020 年 2 月 12 日）)[见讨论](https://public-inbox.org/git/xmqqpneu8ba7.fsf@gitster-ct.c.googlers.com/T/#u)。[`draftcode`](https://github.com/draftcode)
^([`gitster`](https://github.com/gitster))

> ## [`doc`](https://github.com/git/git/commit/7378ec90e1c59610dfcac8a4bce7a9d29681380d): 描述 Git 包格式
> 
> ^(签字人：铃木雅也)
> 
> 捆绑包格式没有记录。用 ABNF 描述格式并解释每个部分的含义。

（[ABNF：Augmented Backus-Naur 形式](https://en.wikipedia.org/wiki/Augmented_Backus%E2%80%93Naur_form)，一种基于[Backus-Naur 形式(BNF) 的](https://en.wikipedia.org/wiki/Backus%E2%80%93Naur_form)[元语言](https://en.wikipedia.org/wiki/Metalanguage)，但由其自己的语法和派生规则组成）

查看[`Documentation/technical/bundle-format.txt`](https://github.com/git/git/blob/7378ec90e1c59610dfcac8a4bce7a9d29681380d/Documentation/technical/bundle-format.txt)更多：

```
bundle    = signature *prerequisite *reference LF pack
signature = "# v2 git bundle" LF

prerequisite = "-" obj-id SP comment LF
comment      = *CHAR
reference    = obj-id SP refname LF

pack         = ... ; packfile 
```

# c# - MVVM 和更新属性

> ID：14460895
> 
> 赞同：0
> 
> 时间：2013-01-22T14:30:55.993
> 
> 标签：c#, mvvm

如果这个问题是基本的，我仍然试图了解 MVVM，所以很抱歉。

我的程序在屏幕上显示一些文本，但取决于另一个属性的状态将取决于文本的颜色。

在我看来，我可以通过两种方式做到这一点。

1.  当 Status 属性改变时，颜色会在 setter 中改变。EG（伪代码）

    ```
    private LogDetails.LogStatus? logStatus;
    public LogDetails.LogStatus? LogStatus {
        get { return logStatus; }
        set { 
               Color color = //logic to work out the color
               Color = color; 
            }
    } 
    ```

2.  我认为这可以通过 OnPropertyChanged （我可以自己研究）来完成。

我的问题是，因为我有 2 个选项来完成我的简单任务，在某些情况下一个比另一个更好，一个更贬值/旧还是我被迫使用选项 2 只是为了安抚 MVVM 模式？

我假设如果我最终需要 2 路绑定（例如，我可以从 GUI 更新状态），那么 MVVM 会更好，但就目前而言，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:56:39.100

您应该简单地编写一个自定义[`IValueConverter`](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)并将其`LogStatus`转换为颜色。使用转换器将控件的`Text`直接绑定`LogStatus`和绑定到使用转换器。`Color``LogStatus`

代码非常简单（只需实现一种方法，将转换器添加为 XAML 资源并在绑定中引用它），但您可以[在此处](http://www.chrisholmesonline.com/2010/09/09/coloring-a-datagridcell-in-wpf/)看到类似的示例。

# java - spring-ws 获取用户名和密码

> ID：14460897
> 
> 赞同：0
> 
> 时间：2013-01-22T14:31:01.683
> 
> 标签：java, spring, spring-security, soapui, spring-ws

我已经学习了一个多星期的 spring-ws 并且我已经建立了一个简单的 Web 服务。

我正在使用soapui 对其进行测试，并在请求属性中指定用户名和密码。

我的 Web 服务没有安全层，我也不想添加。我只需要从请求中提取用户名和密码即可向另一个服务发出请求。我不想在我的请求正文中指定用户名或密码。

我要做的就是从soapui 的请求中检索用户名和密码。有谁知道请求中的用户名和密码在哪里？它们是在http 标头还是soap 标头中。肥皂标题在soapui 中似乎是空的。

我尝试将自己的拦截器写入我的端点并获取soap标头，但它似乎是空的。

我也尝试过使用检索它们，`SecurityContextHolder.getContext().getAuthentication();` 但这会返回 null。

我还尝试`HttpServletRequest`从我的端点询问用户详细信息是否在那里，遗憾的是没有。

有没有人对此领域有任何想法或知识？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:14:58.197

由于您的应用程序中没有身份验证，因此您的服务器不会提示进行身份验证，并且您在soapUI 中指定的参数永远不会使用（不包含在http 请求中）。而且使用没意思

```
SecurityContextHolder.getContext().getAuthentication() 
```

由于您没有身份验证，因此没有经过身份验证的用户，并且它返回 null 如您所说。如果您需要用户名/密码来访问其他资源，您应该将它们指定为 Web 服务中的配置参数。

# magento - magento 和 Icecat 直播！- 类别视图中未显示的图像

> ID：14460900
> 
> 赞同：1
> 
> 时间：2013-01-22T14:31:10.127
> 
> 标签：magento, magento-1.6

我正在使用 Magento 1.6 和 Icecat Live[链接 http://www.magentocommerce.com/magento-connect/icecat-live-5311.html](http://www.magentocommerce.com/magento-connect/icecat-live-5311.html)插件进行描述和图像。现在我遇到的问题是，在类别视图中它不显示任何图像，但在产品视图中却显示。

我在网上搜索并找到了一些答案，但没有一个有效。

我试过了：

编辑 cron 设置（工作正常，并为我提供数据导入消息）：

```
<schedule><cron_expr>* * * * *</cron_expr></schedule> 
```

在 icecatlive 使用的所有属性中添加了“用于产品列表”！, reindex 对此没有影响。

我现在没有选择，接下来我该怎么办？

提前致谢。

ps 抱歉缺少标签，我无法添加它们，因为我在这里相当新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:26:23.517

Icecat Live 仅用于在产品页面上显示 icecatdata，而不是在网格中。构建自己的 Icecat 数据导入器比破解 Icecat Live 来使用 IcecatLive 获取其他页面上的 ICdata 更容易。

从专业的 POV 来看，我认为 IcecatLive 不应该作为扩​​展存在。

# vb.net - 使用 CheckBox 切换 TextBox 的屏蔽和取消屏蔽

> ID：14460903
> 
> 赞同：2
> 
> 时间：2013-01-22T14:31:15.803
> 
> 标签：vb.net, checkbox, textbox, masking

我有一个`TextBox`，它有一个`CheckBox`操作来掩盖包含的文本。这适用于以下代码：

```
Private Sub CheckBox2_Checked(ByVal sender As Object, ByVal e As EventArgs) Handles CheckBox2.CheckedChanged
    TextBox14.PasswordChar = "*"
End Sub 
```

它运作良好，但我也希望能够取消选中`CheckBox`然后返回可识别的文本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:39:43.213

docos 实际上是这样说的：

> 用于屏蔽在单行 TextBox 控件中输入的字符的字符。如果您不希望控件在键入字符时屏蔽字符，请将此属性的值设置为 0（字符值）。默认情况下等于 0（字符值）。

在这里找到：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.textbox.passwordchar (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.passwordchar(v=vs.110).aspx)

在 VB.NET 中，最简单的方法是设置`PasswordChar`为`vbNullChar`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T14:35:00.350

您可以通过简单地将`PasswordChar`属性设置回空字符来做到这一点，如下所示：

```
Private Sub CheckBox2_CheckedChanged(ByVal sender As Object, ByVal e As EventArgs) Handles CheckBox2.CheckedChanged
    If CheckBox2.Checked Then
        TextBox14.PasswordChar = "*"c
    Else
        TextBox14.PasswordChar = ControlChars.NullChar
    End If
End Sub 
```

`CheckedChanged`每次`Checked`属性更改时都会发生该事件。因此，当用户取消选中 时`CheckBox`，它也会引发该事件，因此您需要检查该控件当前是否被选中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T14:27:18.490

我发现仅仅切换密码字符是不够的。就我而言，我正在掩盖一个连接字符串。由于我的文本中缺少空格，我来回遇到了问题。我的文字会被截断并且没有正确换行。

```
Private Sub CheckBox1_CheckedChanged(sender As Object, e As EventArgs)
    Dim beforeText As String = TextBox1.Text

    TextBox1.Text = ""
    TextBox1.PasswordChar = IIf(CheckBox1.Checked, Convert.ToChar(0), "*"c)
    TextBox1.Text = beforeText
End Sub 
```

我想如果你使用像 Console 这样的字体，这不会是一个问题，因为所有字符宽度都是恒定的。

# ant - 声纳中忽略了 PHPUnit 代码覆盖率过滤器？

> ID：14460905
> 
> 赞同：1
> 
> 时间：2013-01-22T14:31:20.657
> 
> 标签：ant, phpunit, sonarqube

我正在使用 Sonar 查看有关我们 PHP 项目的报告。到目前为止效果很好，但我遇到了障碍。代码覆盖率似乎忽略了过滤的文件。

我的 Ant 配置采用 Solar PHP 插件的所有模块并将它们置于“analyzeOnly”模式以仅解析模块的输出（其中我已在 ant 中分解为单独的构建目标）。效果很好，Sonar PHP 插件在控制台中运行时的路径输出似乎与我的所有构建日志匹配。除了 PHPUnit 代码覆盖率 sonar.phpUnit.coverageReportFile 之外，一切似乎都在摄取和解析。我相信我的 PHPUnit 配置设置正确。当我查看代码覆盖率的 HTML 输出时，报告中只有过滤后的文件，产生 80% 的代码覆盖率。当我使用 Sonar 分析 clover 样式的 xml 输出（该文件仅包含正确扫描的文件）时，Sonar 显示只有 17% 的代码覆盖率。这是因为它说我所有被忽略的文件的覆盖率都是 0%。

我做了一些背景研究，一些答案似乎导致了 2 年前的一个错误，该错误已被关闭。这是在带有最新 PHP 插件的当前 3.4.1 版本的 Sonar 上。有任何想法吗？我需要在其他地方排除文件吗？

蚂蚁设置：`

```
<property name="sonar.phpUnit.analyzeOnly" value="true"/>
<property name="sonar.phpUnit.reportFileName" value="../../../build/logs/junit.xml"/>
<property name="sonar.phpUnit.coverage.analyzeOnly" value="true" />
<property name="sonar.phpUnit.coverageReportFile" value="../../../build/logs/clover.xml" />` 
```

编辑：这可能与以下内容有关：http: [//jira.codehaus.org/browse/SONARPLUGINS-1394](http://jira.codehaus.org/browse/SONARPLUGINS-1394) PHPUnit 不检查忽略的文件，因此它们不包含在报告中。PHPUnit 扫描的每个文件都会报告。如果文件没有覆盖，它会报告文件没有覆盖。

# java - mssql 2005 日期时间和 jdbc

> ID：14460907
> 
> 赞同：2
> 
> 时间：2013-01-22T14:31:25.083
> 
> 标签：java, sql-server-2005, datetime, jdbc

如何使用 JDBC 在 MS SQL 2005 中插入日期时间？我使用存储过程插入数据库：

```
ALTER proc [dbo].[sp_insertid_report]
@stream_time_gmt as datetime,
@stream_time_local as datetime,
@start_time_gmt as datetime,
@end_time_gmt as datetime,
@start_time_local as datetime,
@end_time_local as datetime,
@note_id as int,
@reported_by as varchar(100),
@date_reported as datetime,
@date_created as datetime,
@date_updated as datetime,
@stream_id as int,
@Fp_file_path as varchar(300),
@Fp_name as varchar(200), 
@Is_Allowed as varchar(2)

as

begin  
insert into id_reports(stream_time_gmt,stream_time_local,start_time_gmt,end_time_gmt,start_time_local,end_time_local,
note_id,reported_by,date_reported,date_created,date_updated,stream_id,Fp_file_path,Fp_name,Is_Allowed)
values(@stream_time_gmt,@stream_time_local,@start_time_gmt,@end_time_gmt,@start_time_local,
@end_time_local,@note_id,@reported_by,@date_reported,@date_created,@date_updated,@stream_id,@Fp_file_path,@Fp_name,@Is_Allowed)
end 
```

我的 JDBC 代码是：

```
 callableStatement = connection.prepareCall("{ call dbo.sp_insertid_report(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) }");
        callableStatement.setDate(1, new Date(cvtToGmt(new java.util.Date(modifiedTime.toMillis())).getTime()));
        callableStatement.setDate(2, new Date(modifiedTime.toMillis()));
        callableStatement.setDate(3, new Date(cvtToGmt(startTime).getTime()));
        callableStatement.setDate(4, new Date(cvtToGmt(endTime).getTime()));
        callableStatement.setDate(5, new Date(endTime.getTime()));
        callableStatement.setDate(6, new Date(endTime.getTime()));
        callableStatement.setInt(7, songID);
        callableStatement.setString(8, AudioMatcherService.hostName);
        java.util.Date date = new java.util.Date();
        callableStatement.setDate(9, new Date(date.getTime()));
        callableStatement.setDate(10, new Date(date.getTime()));
        callableStatement.setDate(11, new Date(date.getTime()));
        callableStatement.setInt(12, channel.getAssignmentID());
        callableStatement.setString(13, "no");
        callableStatement.setString(14, "no");
        callableStatement.setString(15, "Y");
        callableStatement.execute(); 
```

但这不是在数据库中插入小时、分钟、秒、毫秒吗​​？如何从 JDBC 插入此信息？提前致谢。我发现很难理解日期和时间的东西……到处都有这么多的变化……

**编辑**

表结构为：

![在此处输入图像描述](../Images/e825995150b89b564e6c4487154d3afb.png)

**编辑**

方法 cvtToGmt() 来自[如何将本地日期转换为 GMT](https://stackoverflow.com/questions/10599109/how-to-convert-a-local-date-to-gmt/10599247#10599247)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:50:40.727

你需要使用`java.sql.Timestamp`不`java.sql.Date`

`java.util.Date`仅适用于“真实”日期列，并将删除时间部分。如果您需要存储日期*和*时间，您必须使用`java.sql.Timestamp`.

[从 Javadocs](http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html)：

> *为了符合 SQL DATE 的定义，由 java.sql.Date 实例包装的毫秒值必须通过在实例关联的特定时区中将小时、分钟、秒和毫秒设置为零来“规范化” .*

当然，您也需要使用`setTimestamp()`而不是`setDate()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T14:35:06.747

**编辑2**

使用`callableStatement.setTimestamp()`- 这将被视为时间戳。`javax.sql.Timestamp`扩展`java.util.Date`所以你不需要转换。

**以前的**

也许该`cvtToGmt()`功能会削减分数。

可能您的表中有错误的列类型，它不仅存储`Date`.

`Date`列类型：http: `YYYY-MM-DD` [//msdn.microsoft.com/en-ie/library/bb630352.aspx](http://msdn.microsoft.com/en-ie/library/bb630352.aspx)

`Datetime`列类型：http: `YYYY-MM-DD hh.mm.ss.nnn` [//msdn.microsoft.com/en-ie/library/ms187819.aspx](http://msdn.microsoft.com/en-ie/library/ms187819.aspx)

# java - 适用于 Android 的 KSOAP2 生成零星错误

> ID：14460910
> 
> 赞同：1
> 
> 时间：2013-01-22T14:31:42.257
> 
> 标签：java, android, nullpointerexception, ksoap2

下面的代码有一个奇怪的错误：一切都可以正常工作几个小时，但有时我有一个异常并且我的应用程序关闭了。

这是我经常调用的一段代码（每 15 秒一次）

```
String URL = wscfg.server_address + "/xmds.php";
SoapObject localSoapObject = new SoapObject("", "registerDisplay");
localSoapObject.addProperty("serverKey", wscfg.server_key);
localSoapObject.addProperty("hardwareKey", wscfg.hardware_key);
localSoapObject.addProperty("version", wscfg.server_version);
localSoapObject.addProperty("displayName", wscfg.device_name);
SoapSerializationEnvelope localSoapSerializationEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
localSoapSerializationEnvelope.bodyOut = localSoapObject;
new HttpTransportSE(URL).call("", localSoapSerializationEnvelope);
String s = (String)localSoapSerializationEnvelope.getResponse(); 
```

例外是：

```
01-22 13:33:55.048: E/AndroidRuntime(567): FATAL EXCEPTION: Timer-5
01-22 13:33:55.048: E/AndroidRuntime(567): java.lang.NullPointerException
01-22 13:33:55.048: E/AndroidRuntime(567):  at org.ksoap2.transport.ServiceConnectionSE.getResponseProperties(ServiceConnectionSE.java:85)
01-22 13:33:55.048: E/AndroidRuntime(567):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:189)
01-22 13:33:55.048: E/AndroidRuntime(567):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
01-22 13:33:55.048: E/AndroidRuntime(567):  at com.gmgunderground.test.xmds.WebServiceManager.requiredFiles(WebServiceManager.java:66)
01-22 13:33:55.048: E/AndroidRuntime(567):  at com.gmgunderground.test.xmds.XmdsService.TimerSchedulerSupervisor(XmdsService.java:267)
01-22 13:33:55.048: E/AndroidRuntime(567):  at com.gmgunderground.test.xmds.XmdsService.access$1(XmdsService.java:248)
01-22 13:33:55.048: E/AndroidRuntime(567):  at com.gmgunderground.test.xmds.XmdsService$3.run(XmdsService.java:552)
01-22 13:33:55.048: E/AndroidRuntime(567):  at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

我该如何解决这个错误？有没有办法阻止应用程序关闭并只返回null？正如我从 logcat 中看到的，错误在 KSOAP2 Android 库中。

此致

吉安

# php - 无法弄清楚mysql数据时间

> ID：14460912
> 
> 赞同：1
> 
> 时间：2013-01-22T14:31:44.007
> 
> 标签：php, datetime

所以我在最愚蠢的情况下把头发拉出来......我试图为 MySQL 数据库节省一个新的时间，并尝试了我能想到的一切来完成这项工作，但我做不到一些原因。这就是我所拥有的...

```
$_ = gmdate("Y-m-d H:i:s",time());
if (! mysql_query("UPDATE Accounts 
    SET likes='1',update='".$_."' 
    WHERE username='".$_POST['username']."'")) { ... } 
```

我试过了：

```
update=FROM_UNIXTIME(".$_.")
update=UNIX_TIMESTAMP(".strtotime($_).")
update=UNIX_TIMESTAMP('".strtotime($_)."')
update='".UNIX_TIMESTAMP(strtotime($_))."'
update='".UNIX_TIMESTAMP($_)."'
update='".$_."' 
```

任何帮助将不胜感激！谢谢，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:34:40.693

如果要`update`用作列名，则应使用反引号对其进行转义，因为它是[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。的值`$_`适用于字段本身。

```
mysql_query(" ... SET likes = 1, `update` = '$_' ...") 
```

还有一件事；您应该转义的值`$_POST['username']`以避免 SQL 注入：

```
" ... WHERE username='" . mysql_real_escape_string($_POST['username']) . "'"); 
```

您还可以使用格式字符串组合所有内容，例如：

```
$sql = sprintf("UPDATE Accounts SET likes='%d',`update`=%s' WHERE username='%s'", 
    1,
    $_,
    mysql_real_escape_string($_POST['username'])
);

$res = mysql_query($sql) or die("yikes: " . mysql_error()); 
```

还：

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:35:16.743

```
mysql_query("UPDATE Accounts SET likes='1',update='".$_."' WHERE username='".$_POST['username']."'") 
```

您的查询中有两个选项，`now()`或`curdate()`函数。

返回日期以及格式中的`now()`时间戳；`YYYY-MM-DD HH:MM:SS`

`curdate()`返回格式为 YYYY-MM-DD 的日期

您的查询将如下所示：

```
mysql_query("UPDATE Accounts SET likes='1', `update`='now()' WHERE username='".$_POST['username']."'") 
```

注意后面的勾号，这需要在更新中使用，因为它是一个保留字。您需要对保留进行转义，以便将其用作列名。

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:37:09.813

`update`是 MySQL 语法中的关键字，你不应该命名一个字段`update`。尝试将其命名为：`updated_at`或 `updated_date`

如果您不能这样做，您必须在查询中引用字段名称：

```
"UPDATE Accounts 
SET likes='1',`update`='".$_."' 
WHERE username='".$_POST['username']."'" 
```

# android - Android - 如何立即使用电话服务结束通话？

> ID：14460915
> 
> 赞同：0
> 
> 时间：2013-01-22T14:31:53.153
> 
> 标签：android, android-intent, broadcastreceiver, telephonymanager

在我的应用程序中，有一个功能可以在拨打某个号码（例如）时结束拨出电话（并开始其他活动`*123*`）

它目前正在工作，但需要 200 毫秒的延迟。没有延迟，就无法接收意图。

延迟会导致多次屏幕闪烁的后果：

`my activity shows`-> `switch to call`-> `end call`->`switch back to my activity`

```
public class OutgoingCallListener extends BroadcastReceiver {
    // ...
    public void onReceive(final Context context, Intent intent) {
        // ...
        if(intent.getAction().equals(Intent.ACTION_NEW_OUTGOING_CALL)) {
            // ...
            if(number.equals("*123*")) {
                // ...
                Handler handler = new Handler();
                handler.postDelayed(new Runnable() {
                    public void run() {
                        telephonyService.endCall();
                    }
                }, 200);
            }
        }
    }
} 
```

我见过其他具有此特殊号码拨号功能的应用程序，呼叫立即结束，没有结束呼叫蜂鸣声，并切换到应用程序活动而没有闪烁。

**Q1:**有人知道如何立即结束通话吗？我们之前可以捕捉到另一个意图`ACTION_NEW_OUTGOING_CALL`吗？

**Q2：**在低配置的手机上（慢 CPU，内存少），是否会`BroadcastReceiver`和像样的手机一样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:53:56.130

得到了答案...

**要立即**结束**拨出**电话，我们甚至不需要调用from ，相反，我们可以简单地使用**setResultData(null);****`endCall()``ITelephony`**

 ****它与手动结束通话或使用 endCall 不同，具有`setResultData(null)`：

*   没有通知图标或消息
*   没有来电画面
*   没有通话时间吐司
*   没有通话记录
*   没有结束呼叫蜂鸣声

就像什么都没发生（如果……没有任何其他额外活动）。

```
public class OutgoingCallListener extends BroadcastReceiver {
    // ...
    public void onReceive(final Context context, Intent intent) {
        // ...
        if(intent.getAction().equals(Intent.ACTION_NEW_OUTGOING_CALL)) {
            // ...
            if(number.equals("*123*")) {
                setResultData(null);
                // start other activities
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:36:36.957

Q1: 有人知道如何立即结束通话吗？

> > 这是答案[阻止/结束来电](http://www.questoid.com/Articles/tabid/190/articleType/ArticleView/articleId/2/Blocking-Incoming-Call.aspx)

在 ACTION_NEW_OUTGOING_CALL 之前我们可以捕捉到另一个意图吗？

> > **不**

Q2：在低配置的手机（慢 CPU，内存少）上，BroadcastReceiver 的工作方式是否与在体面的手机上相同？

> > **是的******

# app-store - 如何将 JavaAppLauncher 嵌入到 App Store 沙箱中

> ID：14460918
> 
> 赞同：3
> 
> 时间：2013-01-22T14:31:54.230
> 
> 标签：app-store, appstore-approval, mac-app-store, appstore-sandbox

我正在尝试将 Java 应用程序发送到 MacOS X App Store。我的所有代码都已正确签名（jar、dylib 等）。不幸的是，在发送二进制文件时，我总是收到“无效的二进制文件”错误，并显示以下消息：

尊敬的开发人员， 我们发现您最近交付的“tamaggo ibi 桌面”存在一个或多个问题。要处理您的交付，必须更正以下问题： 未启用应用沙箱 - 以下可执行文件必须在权利属性列表中包含布尔值为 true 的“com.apple.security.app-sandbox”权利。有关对您的应用程序进行沙盒化的更多信息，请参阅应用程序沙盒页面。• tamaggo ibi.app/Contents/MacOS/JavaAppLauncher 纠正这些问题后，转到版本详细信息页面并单击“准备上传二进制文件”。继续完成提交过程，直到应用状态为“等待上传”。然后，您可以提供更正后的二进制文件。问候， App Store 团队

我用谷歌搜索了一整天，但没有找到任何东西。有人知道如何在 .entitlements 文件中对 JavaAppLauncher 进行沙箱处理吗？

为了提供更多信息，这是我签署代码的方式： `/usr/bin/codesign --resource-rules desktop-app/target/dist/myApp/Contents/ResourceRules.plist --verbose --force --sign "3rd Party Mac Developer Application: XXX" desktop-app/target/dist/myApp`

`find desktop-app/target/dist/myApp.app/Contents/ -type f \( -name "*.jnilib" -or -name "*.jar" -or -name "*.dylib" \) -exec codesign --resource-rules desktop-app/target/dist/myApp.app/Contents/ResourceRules.plist --verbose -f -s "3rd Party Mac Developer Application: XXX" --entitlements desktop-app/target/dist/myApp.app/Contents/myApp.entitlements {} \;`

`codesign --resource-rules desktop-app/target/dist/myApp.app/Contents/ResourceRules.plist --verbose --force --sign "3rd Party Mac Developer Application: XXX" desktop-app/target/dist/myApp.app/Contents/Resources/binaries/ffmpeg`

`codesign --resource-rules desktop-app/target/dist/myApp.app/Contents/ResourceRules.plist --verbose --force --sign "3rd Party Mac Developer Application: XXX" desktop-app/target/dist/myApp.app/Contents/MacOS/JavaAppLauncher`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:32:02.253

自 2012 年夏末以来，我们在 MAS 上就有了一个 java 应用程序。我认为我们是商店里的第一个 java 应用程序（更多信息请访问infinitekind.com）。

我认为一个问题是你是如何签名的。要在应用商店中被接受，您需要捆绑 JDK。这可以使用 appbundle ant 任务来完成。由于官方版本似乎停滞不前并且不接受更新，因此我们创建了一个分支并进行了一些改进：

[https://bitbucket.org/infinitekind/appbundler](https://bitbucket.org/infinitekind/appbundler)

我们还创建了 OpenJDK 的一个分支，其中包含一些对我们来说是破坏者（菜单项键盘快捷键问题）的小修复。这些现在可能已经被纳入主线 OpenJDK，但我不这么认为。

[https://bitbucket.org/infinitekind/openjdk7u-jdk](https://bitbucket.org/infinitekind/openjdk7u-jdk)

无论如何，在您的情况下，上述两项可能不是必需的，但这就是我们所做的并且它起作用了。我认为真正的问题是您要签名的内容和顺序。这是我们所做的，现在已经接受了五次更新提交：

```
 # sign all the jar and dylib files (signing jars is apparently not required by apple, but should be!)
  find "Path/To/App/AppName.app/Contents" -type f \( -name "*.jar" -or -name "*.dylib" \) -exec codesign -f -s '3rd Party Mac Developer Application: YourCompanyName' --entitlements 'path/to/AppName.entitlements' {} \;

  # Sign the JDK plugin
  codesign --verbose -f -s '3rd Party Mac Developer Application: YourCompanyName' --entitlements 'path/to/AppName.entitlements' "Path/To/App/AppName.app/Contents/Plugins/jdk"

  # sign the whole bundle
  codesign --verbose -f -s '3rd Party Mac Developer Application: YourCompanyName' --entitlements 'path/to/AppName.entitlements' "Path/To/App/AppName.app" 
```

希望这对您有所帮助还为时不晚！

# nginx - Nginx 用 2 个变量重写规则

> ID：14460923
> 
> 赞同：0
> 
> 时间：2013-01-22T14:32:05.513
> 
> 标签：nginx, rewrite

我需要简单的 Nginx 重写规则来重写

```
/?contidion1=variable1&condition2=variable2 
```

到

```
/variable1/variable2/ 
```

这个不行。。。

```
rewrite  ^/condition/(.*)/([0-9])$ /?condition1=$1&condition2=$2  last; 
```

也试过：

```
rewrite  ^/condition/(.*)/(.*)$ /?condition1=$1&condition2=$2  last; 
```

但是条件有 1 个变量工作良好

```
rewrite  ^/condition/(.*)$ /?condition1=$1  last; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:07:39.277

您可以使用类似这样或完全这样的东西：

```
rewrite ^/\?condition1=([^&]*)&condition2=([^&]*) /$1/$2 last; 
```

第一条规则`rewrite`意味着您的网址必须通过什么模式才能重写为第二条`rewrite`规则。接下来在第二条规则中，您可以使用参数 as`$1`以及`$2`在第一条规则中分组的联系人（组由`(`and分隔`)`）

如果以其他方式进行，因为您的建议与您的重写规则略有不同，请执行以下操作：

```
rewrite /(.*)/(.*) /?condition1=$1&condition2=$2 last; 
```

# jquery - 如何在 jQuery 验证中添加带有消息的验证规则？

> ID：14460925
> 
> 赞同：4
> 
> 时间：2013-01-22T14:32:10.163
> 
> 标签：jquery, jquery-validate

我试过下面的代码，但无法收到错误消息。

```
var v = jQuery("#account_info").validate({
    //errorLabelContainer: $("#result"),
    submitHandler: function(form) {
        jQuery(form).ajaxSubmit({                               
           target: "#checkOut_error",                   
            success: function(msg) {
                //setTimeout("window.location='MyBids.php'", 2000);             
                if(msg == '<?php echo OBJECT_STATUS_SUCCESS;?>')    {
                    $('#checkOut_error').html('<div class="msg msg-thanks">Bid Submitted Successfully !</div>');
                    //setTimeout("window.location='"+<?php echo LINK_TO_TENBID;?>+"'", 2000);
                    //setTimeout("window.location.reload(true)",2000);
                   //$('.result').html('<div class="msg msg-thanks">Bid Submitted Successfully !</div>');

                } else{
                                        $("#checkOut_error").html(msg);
                                    }
            },
            clearForm:  false,
            resetForm:  false
        });
    },
           errorLabelContainer: "#checkOut_error",
          rules: {
                phone_number: {
                    required: true

                },
                recipient_name: {
                    required: true,
                    min_length: 6
                }

          },
          messages: {
                recipient_name: {
                    required: "Enter recipient name",
                    min_length: "Name should be atleast 6 characters long"
                }
          }
 }); 
```

-如何添加规则和错误信息？

- 验证插件使用哪个属性：name 或 id？

-如何一次显示一条错误消息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T14:49:53.733

> - 验证插件使用哪个属性：name 或 id？

[根据文档](http://docs.jquery.com/Plugins/Validation)，插件要求所有`input`字段都包含一个`name` `attribute`. 在指定`rules`and `messages`inside`.validate()`时，您将使用`name` `attribute`.

> -如何添加规则和错误信息？

`min_length`规则不应**包含**下划线。是`minlength`。否则，您的代码看起来是正确的。

基于您的代码的简单演示...

**jQuery：**

```
$(document).ready(function () {

    $("#account_info").validate({
        rules: {
            phone_number: {
                required: true
            },
            recipient_name: {
                required: true,
                minlength: 6  // <-- removed underscore
            }
        },
        messages: {
            phone_number: {
                required: "this field is required"
            },
            recipient_name: {
                required: "Enter recipient name",
                minlength: "Name should be at least {0} characters long" // <-- removed underscore
            }
        },
        submitHandler: function (form) { // for demo
            alert('valid form');  // for demo
            return false;  // for demo
        }
    });

}); 
```

**HTML：**

```
<form id="account_info">
    <input type="text" name="phone_number" />
    <br/>
    <input type="text" name="recipient_name" />
    <br/>
    <input type="submit" />
</form> 
```

**工作 jsFiddle 演示：http: [//jsfiddle.net/rfgRL/](http://jsfiddle.net/rfgRL/)**

* * *

此外，当使用类似的规则时`minlength`，您的自定义消息可以包含一个占位符，`{0}`插入您的特定规则定义。

```
minlength: 6 
```

带有自定义消息...

```
minlength: "Name should be at least {0} characters long" 
```

会自动显示...

> 名称至少应包含 6 个字符

* * *

由于您只在 DOM 上调用`.validate()` *一次*，准备仅使用其选项初始化验证插件，因此将其分配给变量是没有意义的；它不会在任何地方重复使用……至少不应该如此。

```
var v = jQuery("#account_info").validate({...}); 
```

简直就是这个……

```
jQuery("#account_info").validate({...}); 
```

在代码的其他地方，如果您需要测试`form`有效性或重新触发有效性测试，[请使用`.valid()`方法](http://docs.jquery.com/Plugins/Validation/valid). 它会返回一个布尔值并触发任何未决表单错误的显示。例子：

```
if (jQuery("#account_info").valid()) { ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:44:55.930

这是一个简单的 jquery 注册（注册）验证器：

```
 $('#submitButton').click(function() {
        $("#accounterForm").validate({
    rules: {
        firstName: "required",
        lastName: "required",
        companyName: {
            required: true,
            no_special_characters: true,
            maxlength: 64
        },
        companyFullName: "required",
        password: {
            required: true,
            minlength: 6
        },
        confirmPassword: {
            required: true,
            minlength: 6,
            equalTo: "#mid-box4"
        },
        emailId: {
            required: true,
            email: true
        }
    },
    messages: {
        firstName: "Please enter your first name",
        lastName: "Please enter your last name",
        companyName: "Please enter company ID",
        companyName: {
            required: "Please enter company ID",
            no_special_characters: "Company ID should contain atleast one letter and no special characters",
            maxlength: "Company ID exceeded the maximum length"
        },
        companyFullName: "Please enter company name",
        password: {
            required: "Please provide a password",
            minlength: "Your password must be at least 6 characters long"
        },
        confirmPassword: {
            required: "Please provide a password",
            minlength: "Your password must be at least 6 characters long",
            equalTo: "Please enter the same password as above"
        },
        emailId: "Please enter a valid email address",
        confirmemailId:{
        required:"Please confirm email address",
        equalTo :"Emailid and confirm emaild must be same"
        },
        agree: "Please accept Terms of use"
    }
}); 
```

# css - Css 表，第 3 列不会保持一致

> ID：14460932
> 
> 赞同：1
> 
> 时间：2013-01-22T14:32:39.197
> 
> 标签：css

我创建了一个如下所示的网页：

![在此处输入图像描述](../Images/779268ccf67a8ad8627fa6fdd10cfdb9.png)

我使用 css display:table 来创建整体布局。我的意图是有 3 列，左侧用于消息类型过滤器，中间用于日期过滤器，右侧用于应用过滤器复选框和刷新网格按钮。gridview 出现在表格 divs 下方的独立 div 中

我的问题是我无法让“正确”的 applyFilters div 保持在屏幕右侧。浏览器坚持显示在 dataFilters div 下。请注意，这不能从屏幕抓取中看到，但 dateFilters div 右侧有很多可用空间。

谁能让我知道如何解决这个问题。

**象素**

```
<div id="layoutTable" style="display:table">    
    <div id="layoutRow1" style="display:table-row">    
        <div id="dataFilters">    
            <div id="table1Row1" style="display:table-row">    
                <span id="msgTypeFilter" class="filterProp">Message Type:    
                    <asp:DropDownList ID="ddlMessageType" DataSourceID="dsmessageType" AutoPostBack="false"    
                        DataValueField="messageType" runat="server" AppendDataBoundItems="true">    
                        <asp:ListItem Text="All" Value="%"></asp:ListItem>    
                    </asp:DropDownList>    
                </span>    
            </div>    
            <div id="table1Row2" style="display:table-row">    
                <%--additional filters here--%>    
            </div>    
        </div> <%--end data filters--%>    

        <div id="dateFilters">    
            <div id="table2Row1" style="display:table-row">    
                <span class="filterProp" id="startDate">Start Date:<asp:TextBox     
                    ID="txtReceivedFilterStart" runat="server" Text="01/01/2013"     
                    AutoPostBack="False" />    
                    <ajaxToolkit:MaskedEditExtender ID="medReceivedStart" runat="server" MaskType="Date"    
                        Mask="99/99/9999" MessageValidatorTip="true" TargetControlID="txtReceivedFilterStart"    
                        AcceptAMPM="false" />    
                </span>    

                <span class="filterProp" id="endDate">End Date:<asp:TextBox     
                    ID="txtReceivedFilterEnd" runat="server" Text="31/12/2050"     
                    AutoPostBack="False" />    
                    <ajaxToolkit:MaskedEditExtender ID="medReceivedEnd" runat="server" MaskType="Date"    
                        Mask="99/99/9999" MessageValidatorTip="true" TargetControlID="txtReceivedFilterEnd" />    
                </span>    

                <span class="filterProp" id="whichDateFilter">Apply date filter to:    
                    <asp:DropDownList runat="server" id="ddlDateFilterFieldname">    
                        <asp:ListItem Value="ReceivedTime" Text="Received Time" />    
                        <asp:ListItem Value="SentTime" Text="Sent Time" />    
                    </asp:DropDownList>    
                </span>    
            </div>    

            <div id="table2Row2" style="display:table-row">    
                <span class="filterProp" id="startTime">    
                    Start Time:<asp:TextBox ID="txtReceivedStartTime"     
                    runat="server" Text="00:00:00" AutoPostBack="False" />    
                    <ajaxToolkit:MaskedEditExtender ID="medReceivedStartTime" runat="server" MaskType="Time"    
                        Mask="99:99:99" MessageValidatorTip="true" TargetControlID="txtReceivedStartTime"    
                        AcceptAMPM="false" />    
                </span>    

                <span class="filterProp" id="endTime">        
                    End Time:<asp:TextBox ID="txtReceivedEndTime" runat="server"     
                    Text="23:59:59" AutoPostBack="False" />    
                    <ajaxToolkit:MaskedEditExtender ID="medReceivedEndTime" runat="server" MaskType="Time"    
                        Mask="99:99:99" MessageValidatorTip="true" TargetControlID="txtReceivedEndTime"    
                        AcceptAMPM="false" />    
                </span>    

                <span class="filterProp" id="medValidators">    
                    <ajaxToolkit:MaskedEditValidator ID="mvalReceivedStart" runat="server" ControlToValidate="txtReceivedFilterStart"    
                        InvalidValueMessage="Incorrect format for date" ControlExtender="medReceivedStart"    
                        TooltipMessage="Enter date in format dd/mm/yyyy" />    
                    <ajaxToolkit:MaskedEditValidator ID="mvalReceivedEnd" runat="server" ControlToValidate="txtReceivedFilterEnd"    
                        ControlExtender="medReceivedEnd" InvalidValueMessage="Incorrect format for date"    
                        TooltipMessage="Enter datee in format dd/mm/yyyy" />    
                    <ajaxToolkit:MaskedEditValidator ID="mvalReceivedStartTime" runat="server" ControlToValidate="txtReceivedStartTime"    
                        InvalidValueMessage="Incorrect format for time" ControlExtender="medReceivedStartTime"    
                        TooltipMessage="Enter time in format hh:mm:ss" />    
                    <ajaxToolkit:MaskedEditValidator ID="mvalReceivedEndTime" runat="server" ControlToValidate="txtReceivedEndTime"    
                        InvalidValueMessage="Incorrect format for time" ControlExtender="medReceivedEndTime"    
                        TooltipMessage="Enter time in format hh:mm:ss" />    
                </span>    

            </div> <%--end table2Row2--%>    
        </div> <%--end dateFilters--%>    
        <div id="applyFilters">    
            <div id="tbl3row1" style="display:table-row">    
                <span class="filterProp" >    
                    <asp:CheckBox ID="chkFilter" runat="server" Text="Apply Filters"     
                    AutoPostBack="False" oncheckedchanged="chkFilter_CheckedChanged"/>    
                </span>    
            </div>    
            <div id="tbl3row2" style="display:table-row">    
                <span >    
                    <asp:Button ID="btnRefresh" runat="server" Text="Refresh Grid"     
                    onclick="btnRefresh_Click" class="button" />    
                </span>    
            </div>    
        </div>    
    </div> <%--end layout row 1--%>    

</div> <%--end layout table--%> 
```

**CSS**

```
.filterProp
{
    /* float:left; */
    display:table-cell;
}

#resultsGrid
{
    padding: 20px 0px 20px 0px;
    float: left;
}

#dateFilters > .filterProp
{
    text-align: left;
}

#dateFilters
{
    border: thin solid #C0C0C0;
    display:table;
}

.filtersTitle
{
    font-weight: bold;
    margin-right: 20px;
}

#dataFilters
{
    display:table;
    float:left;
    border: thin solid #C0C0C0;
}

#applyFilters
{
    display:table;
}

.button
{
    background-color: #00CC99;
    color: #FFFFFF;
}

.button:hover
{
    background-color: #33CCCC;
    color: #FFFFFF;
}

.gridPager
{
    text-align: right;
    background-color: #C0C0C0;
    color: #000000;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:53:19.627

您可以为三列指定一个确定的宽度并将它们浮动（...或不浮动。如果您有足够的空间，则不需要浮动，但将它们从流中取出并将它们彼此相邻浮动会起作用）。您的日期过滤器展开，以便应用过滤器 div 换行。给它们一个确定的宽度将使日期文本框垂直对齐，最后为应用过滤器 div 留出更多空间。尝试使用这些数字（最好使用百分比，并且包装器将设置为 100%）。因此，对于您的消息类型，将其设置为 40%，您的日期类型可以为 20%，您的应用类型为 40%。

编辑：我看到你有一个跨度的应用部分。也许将其放置在与日期 div 分开的 div 中将允许对定位进行更多控制（使其成为块元素而不是内联元素）。

# jquery - 滚动到隐藏元素

> ID：14460933
> 
> 赞同：0
> 
> 时间：2013-01-22T14:32:41.900
> 
> 标签：jquery, google-maps, smooth-scrolling

这应该像谷歌地图标记一样工作。当您单击某个元素时，它将平滑地动画到标记（坐标）。

**HTML：**

```
<div id="wrapper">
    <div id="inner">
        <div id="marker"><!-- --></div>
    </div>
</div>
<div class="overflow">Hover to disable overflow</div> 
```

**CSS：**

```
#wrapper {
    width: 300px;
    height: 300px;
    border: 3px solid #999;
    position: relative;
    overflow: hidden;
    margin: 50px auto 0;
    z-index: 1;
}

#inner {
    width: 600px;
    height: 600px;
    background: url("http://i50.tinypic.com/25aq6iu.jpg") no-repeat 0 0 #fff;
    position: absolute;
    top: -150px;
    left: -200px;
}

#marker {
    width: 20px;
    height: 26px;
    background: url("http://i50.tinypic.com/29kujo3.png") no-repeat 0 0 transparent;
    position: absolute;
    top: 123px;
    left: 153px;
}

.overflow {
    display: inline-block;
    background-color: #ccc;
    margin: 20px auto 0;
    padding: 10px;
    position: fixed;
    left: 0;
    bottom: 0;
    z-index: 9999;
} 
```

如何让它发挥作用？

这是小提琴：http: [//jsfiddle.net/xRbR8/1/](http://jsfiddle.net/xRbR8/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:36:28.550

您必须为 #inner 的背景位置和 #marker 的左侧/顶部设置动画。

看看[jQuery 中的背景位置动画在 Firefox 中不起作用，以](https://stackoverflow.com/questions/8378696/background-position-animation-in-jquery-not-working-in-firefox)获取为背景位置设置动画的解决方案

# javascript - Backbone.js：嵌套视图的路由

> ID：14460934
> 
> 赞同：6
> 
> 时间：2013-01-22T14:32:46.017
> 
> 标签：javascript, backbone.js, backbone-views

我试图弄清楚以下情况：

假设我有两种视图：一种用于查看商品，另一种用于购买商品。问题是购买视图是查看的子视图。

对于路由，我有：

```
var MyRouter = Backbone.Router.extend({
  routes: {
    'item/:id': 'viewRoute',
    'item/:id/buy': 'buyRoute'
  }
});

var router = new MyRouter;

router.on("route:viewRoute", function() {
  // initialize main view
  App.mainview = new ViewItemView();

});

router.on("route:buyRoute", function() {
  // initialize sub view
  App.subview = new BuyItemView();
}); 
```

现在，如果用户刷新页面`buyRoute`并被触发，但现在没有主视图。处理这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:47:06.120

我想您现在遇到的问题是您不想在 BuyView 中显示 ViewItem 中的某些内容？如果是这样，那么您应该将 BuyView 和 ViewItem 的共同点模块化到另一个 View 中，然后在这两个路由上对其进行初始化。

这是我的一个应用程序的代码示例

[https://github.com/QuynhNguyen/Team-Collaboration/blob/master/app/scripts/routes/app-router.coffee](https://github.com/QuynhNguyen/Team-Collaboration/blob/master/app/scripts/routes/app-router.coffee)

如您所见，我将侧边栏模块化，因为它可以在许多视图之间共享。我这样做是为了它可以重复使用并且不会引起任何冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:07:58.107

您可以检查主视图是否存在，如果它不存在则创建/打开它。

我通常在启动应用程序时创建（但不打开）我的应用程序的主要视图，然后创建某种用于打开/关闭的视图管理器。对于小型项目，我只是将我的视图附加到`views`我的应用程序对象的一个​​属性上，这样它们就都在一个地方，可以通过 views.mainView、views.anotherView 等方式访问。

我还使用两种方法扩展 Backbone.View：不仅可以向 DOM 追加/删除视图，还可以在视图上设置`open`标志。`close``isOpen`

有了这个，你可以检查一个需要的视图是否已经打开，如果没有打开它，像这样：

```
if (!app.views.mainView.isOpen) {
    // 
} 
```

一个可选的添加方法是在您的应用程序上创建一个名为`clearViews`清除所有打开视图的方法，可能除了作为参数传入的视图名称之外`clearViews`。因此，如果您有一个不想在某些路线上清除的导航栏视图，您可以调用`app.clearViews('topNav')`，除 views.topNav 之外的所有视图都将关闭。

查看此要点以获取所有这些的代码：[https ://gist.github.com/4597606](https://gist.github.com/4597606)

# nginx - Nginx 只显示欢迎页面

> ID：14460935
> 
> 赞同：35
> 
> 时间：2013-01-22T14:32:48.060
> 
> 标签：nginx

我正在尝试设置一个简单的虚拟主机，只提供静态文件。麻烦的是，将浏览器定向到（在这种情况下）`jorum.dev`显示默认的 nginx 欢迎页面，而不是`jorum.dev/index.html`.

Nginx 是在 Mac OS X Mountain Lion 上使用 Homebrew 安装的。

## 主机

```
127.0.0.1       jorum.dev 
```

## jorum.dev

```
server {
    listen          80;
    server_name     jorum.dev;

    location / {
        root        ~/Sites/jorum;
        index       index.html index.htm;
    }
} 
```

## nginx.conf

```
worker_processes  1;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;

    gzip            on;
    gzip_disable    "msie6";
    gzip_min_length 1100;
    gzip_vary       on;
    gzip_proxied    any;
    gzip_buffers    16 8k;
    gzip_types      text/plain text/css application/json application/x-javascript text/xml application/xml application/rss+xml text/javascript image/svg+xml application/x-font-ttf font/opentype application/vnd.ms-fontobject;

    server_tokens off;

    client_max_body_size    4096k;
    client_header_timeout   10;
    client_body_timeout     10;
    keepalive_timeout       10 10;
    send_timeout            10;

    server {
        listen       80;
        server_name  localhost;

        location / {
            root   html;
            index  index.html index.htm;
        }

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-10-03T08:29:04.830

debian/ubuntu nginx 软件包附带了一个`default`站点可用，它接管了默认的主机调度。只需删除默认链接，它就会加载您的网站。

* * *

另一个问题，debian/ubuntu nginx 软件包还附带了默认站点中默认服务器的默认索引值：

```
index index.html index.htm index.nginx-debian.html; 
```

我已经将文件`index.nginx-debian.html`显示在我的 www 根目录中，它优先于 cgi 位置。

* * *

nginx 有一个详细的测试模式，可用于转储由 nginx 解析的整个配置，您可以根据您的期望对其进行完整性检查。

```
nginx -T 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-23T02:03:59.680

**nginx.conf**中缺少包含

 **```
include /usr/local/etc/nginx/sites-enabled/*; 
```

[http://wiki.nginx.org/CoreModule#include](http://wiki.nginx.org/CoreModule#include)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-03-13T07:33:53.487

对于其他来到这个线程并且已经尝试过@freestyler 的答案，但仍然获得默认 nginx 屏幕的人，尝试将`default`位于的文件重命名`/etc/nginx/sites-available/`为`default.txt`. 我建议**不要**删除该文件，因为它可以帮助您解释在下一个`.conf`文件中要做什么。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-07-30T07:41:21.827

从**/etc/nginx/sites-available/**和**/etc/nginx/sites-enabled/**中删除**default.config**并重新启动 nginx

 ****```
rm /etc/nginx/sites-available/default
rm /etc/nginx/sites-enabled/default
sudo nginx -t
sudo systemctl reload nginx 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-28T21:52:20.937

对我来说，是我忘记将站点绑定到 IPv6，而我的 PC 处于 IPv6 连接上。

在我`listen [::]:80;`只有`listen 80;`.

如果使用 IPv6 建立连接，这也使得 Nginx 显示该站点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-23T19:23:58.297

也许不相关，但希望能帮助人们解决这个问题......

有时人们忘记`/etc/nginx/sites-enabled`在`/etc/nginx/sites-available`.

就像是：

`ln -s /etc/nginx/sites-availabe/mysite.com /etc/nginx/sites-enabled/mysite.com`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-03T16:49:44.240

将以下内容添加到位置块：

```
index index.html index.htm 
```

例如：

```
location / {
    …
    index  index.html index.htm;
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-16T17:51:27.450

对我来说，问题是我最初将网站放在子域中，并且在重新生成 certbot 证书以使其也可以在新域中工作时，我没有在服务器部分添加新的域名重定向，添加为以下为我固定：

```
server {
    if ($host = domain_1.com) {
        return 301 https://$host$request_uri;
    } # managed by Certbot

    if ($host = domain_2.com) {
        return 301 https://$host$request_uri;
    } # managed by Certbot

    server_name domain_1.com domain_2.com;
    listen 80;
    return 404; # managed by Certbot
} 
```******

# https - HTTP 到 HTTPS 之间的一两个步骤

> ID：14460937
> 
> 赞同：1
> 
> 时间：2013-01-22T14:32:52.310
> 
> 标签：https, ssl-certificate, security

这是上下文：我正在开发一个公共网站的管理网站。管理网站的用户只是公司的少数员工，我不想让他们使用 HTTP 来防止中间人攻击。

如果我理解得很好，使用 HTTP 将允许任何有能力嗅探数据包的人（互联网服务提供商、恶意“监听”Wifi 信号……）在有人登录管理时捕获登录名和密码网站，对吧？

我到处阅读以使用 HTTPS 并购买某种证书，但我不愿意（除非你给我一个充分的理由）既不为此付费，也不愿意免费获得一个，只是为了在网络浏览器上开绿灯我的用户。

正如这个问题的标题所指出的，我不明白是否：

*   HTTPS 证书完全是安全通信通道的一部分，这意味着我必须在 HTTP 或 HTTPS 之间进行选择，但没有任何选择。

或者如果

*   HTTPS 证书只是在安全通信通道之上添加的东西，由受信任的第三方为用户提供一些“信心”。在这种情况下，这意味着我可以在 HTTP（每个人都可以嗅探数据包）、不带证书的 HTTPS（安全通信但没有绿灯）、带证书的 HTTPS（带绿灯的安全通信）之间进行选择。

或者

*   别的东西。

我真的不明白获得证书的意义，因为如果有人，尽管存在所有技术困难，成功地在我的一个用户和我的网络服务器之间实施了中间人攻击，在我看来，它在我的用户和证书颁发机构之间实施相同的攻击似乎并没有付出太多努力。

我肯定在这里错过了一些东西，有人能指出我的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:51:14.430

证书是安全通信所必需的。有关更多详细信息，请参阅[Wikipedia：公钥证书](http://en.wikipedia.org/wiki/Public_key_certificate)。如果您不想付费，您可以创建一个自签名证书（该过程因您使用的 Web 服务器而异），但这需要用户明确接受证书（每个浏览器都有自己的方法这样做）。

这可能没问题，因为这是一个管理部分并且不可公开访问，但我仍然建议您购买证书。创建自签名证书的麻烦，以及要求用户接受它不值得花费几美元的 ssl 证书成本。

> 我真的不明白获得证书的意义，因为如果有人，尽管存在所有技术困难，成功地在我的一个用户和我的网络服务器之间实施了中间人攻击，在我看来，它在我的用户和证书颁发机构之间实施相同的攻击似乎并没有付出太多努力。

SSL 的工作原理并非如此。通过 HTTPS，当浏览器发送它时，所有通信都是加密的，所以即使有人嗅到它，它也无用。

# ruby-on-rails - 设计 send_reset_password_instructions 不起作用

> ID：14460938
> 
> 赞同：4
> 
> 时间：2013-01-22T14:32:55.687
> 
> 标签：ruby-on-rails, heroku, devise

我在我的控制器中添加了一个函数，唯一的目标是通过 API 请求触发忘记密码的过程。

这是`reset_password`方法-

```
 def reset_password
    @user = User.find_by_email(params[:email])
    @user.send_reset_password_instructions
    respond_to do |format|
      format.xml  { render :xml => user_api_ressource(@user, :xml)}
      format.json  { render :json => user_api_ressource(@user, :json)}
    end
  end 
```

我收到带有重置密码链接的邮件，它会打开我可以设置新密码的页面，但是当我提交表单时，它说令牌无效。

我正在使用 sendgrid 发送电子邮件。我认为这不是令牌截断问题。

我正在使用最新版本的设计在 Heroku cedar 上运行 rails 应用程序。

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-19T01:01:07.807

我刚遇到同样的问题。就我而言，这是`user`因为`unscoped`. 在这种情况下，似乎没有找不到用户。

它位于[/lib/devise/models/authenticatable.rb](https://github.com/plataformatec/devise/blob/6b3b0c5e8c57253d3d178def678ccc26e66cd630/lib/devise/models/authenticatable.rb)的 Devise 源代码的第 113 行

```
 recoverable = find_or_initialize_with_error_by(:reset_password_token, reset_password_token) 
```

哪个不搜索`unscoped`。

我会分叉回购，如果你也有兴趣，请告诉我。

# ios - QLPreviewController 与多个 Excel 表格和文档 iOS 6

> ID：14460941
> 
> 赞同：0
> 
> 时间：2013-01-22T14:33:02.007
> 
> 标签：ios, objective-c, excel, ios6, qlpreviewcontroller

我正在尝试使用 QLPreviewController 显示各种文档类型，但我遇到了一个问题，即 QLPreviewController 无法在 Excel 工作表之间切换，如果我有多个文档被提供给它，

```
self.fileNames = [NSArray arrayWithObjects:@"Doc1.xlsx",@"Doc2.html",@"Doc3.csv",@"Doc4.pdf",@"Doc.txt", nil]; 
```

//

```
- (id <QLPreviewItem>)previewController:(QLPreviewController *)controller previewItemAtIndex:(NSInteger)index
{
    NSString *contentURL = [[NSBundle mainBundle] pathForResource:[self.fileNames objectAtIndex:index] ofType:nil];
    return [NSURL fileURLWithPath:contentURL];
}
- (NSInteger) numberOfPreviewItemsInPreviewController:(QLPreviewController *)controller
{
    return [self.fileNames count];
} 
```

如果预览项目的数量设置为 1，那么您可以浏览 xlsx 文件的所有工作表，但如果预览器有超过 1 个文档，那么您只能放大和缩小。

请注意，这只是一个 iOS 6 问题，iOS 5 按预期工作。

我感觉这可能与 QLPreviewController 的更改有关，使其成为远程视图控制器，这会影响手势识别器？（[http://oleb.net/blog/2012/10/remote-view-controllers-in-ios-6/](http://oleb.net/blog/2012/10/remote-view-controllers-in-ios-6/)）

任何其他想法或已知的解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:59:57.877

虽然不是解决方案，但只要在其中检测到 xls 时，将空白文档放入文档数组的 0 位置，然后在加载视图时前进到没有动画的第二页。

# vba - 访问文本框添加值

> ID：14460945
> 
> 赞同：0
> 
> 时间：2013-01-22T14:33:11.763
> 
> 标签：vba, ms-access, math, textbox, subroutine

我有一个带有表单的访问数据库，其中包含许多文本框。文本框根据用户所做的选择填充了货币数据。每条记录可能有不同的值，有些可能没有值。我需要将 3 个 txtboxes 添加在一起，但该值始终显示为 Null。

```
me.txt1 = Nz(me.txt2.value + me.txt3.value + me.txt3.value)
txt2 = 23.04
txt3 = Null(empty)
txt4 = 15.64 
```

txt1 的值应该是 38.68 而不是它出来的 Null。文本框由从下拉列表的 AfterUpdate 事件调用的子例程填充。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:14:49.647

你在哪里使用那个公式？它在VBA中吗？你不需要它。
如果它来自 txt1 的控制源，`Me`则应替换为`Form`（或根本不替换）

在 txt1 的 Control Source 属性中，键入`= nz(txt2)+nz(txt3)+nz(txt4)`
That should be all you need。没有VBA。
如果表单的来源是查询，另一种解决方案是在查询中添加计算字段。
在这两种情况下，您当然不会存储该数据（这将违反第三范式）

# asp.net - DataBinding：“System.Data.DataRowView”不包含名为“id”的属性

> ID：14460947
> 
> 赞同：0
> 
> 时间：2013-01-22T14:33:17.687
> 
> 标签：asp.net, vb.net

页面加载：-

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Try
        Page.Title = "Batches - " & Website

        BindBatches()

    Catch ex As Exception
        Logger.WriteError("Error in Page_Load of Batches/batches.aspx", ex)
    End Try
End Sub 
```

此子例程在网格视图中绑定 batch_name

```
 Protected Sub BindBatches()
    Try
        Dim ds As New DataSet()
        ds = Dal.ExecuteDataset("select batch_name from tblBatch")
        If Not ds Is Nothing AndAlso ds.Tables(0).Rows.Count > 0 Then
            gvBatches.DataSource = ds
            gvBatches.DataBind()
            gvBatches.Visible = True
        Else
            gvBatches.Visible = False
        End If
    Catch ex As Exception
        Logger.WriteError("Error in BindBatches of Batches/batches.aspx", ex)
    End Try
End Sub 
```

这是网格视图：-

```
<asp:GridView ID="gvBatches" runat="server">
  <Columns>
     <asp:TemplateField HeaderText="Batch Name">
          <HeaderStyle Width="40px"></HeaderStyle>
               <ItemTemplate>
                    <asp:Label ID="lblBatchName" runat="server">
                    </asp:Label>
               </ItemTemplate>
     </asp:TemplateField>
  </Columns>
</asp:GridView> 
```

和数据绑定事件：-

```
Protected Sub gvBatches_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles gvBatches.RowDataBound
  If e.Row.RowType = ListItemType.Item Or e.Row.RowType = ListItemType.AlternatingItem Then
    Dim batchName As Label = e.Row.FindControl("lblBatchName")
    batchName.Text = e.Row.DataItem("batch_name")
  End If
End Sub 
```

但是当我调试时它会在下面显示异常 - gvBatches.DataBind()

```
DataBinding: 'System.Data.DataRowView' does not contain a property with the name 'id'. 
```

我不明白这个 id 是什么？我的表中没有这样的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:55:12.040

在您的 aspx 文件中，您可以将标签声明更改为

```
<asp:Label ID="lblBatchName" runat="server" Text='<%# Eval("batch_name") %>'> 
```

你不需要`Protected Sub gvBatches_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles gvBatches.RowDataBound`功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:47:21.253

我建议先设置`OPTION STRICT`为on。看到这段代码（`DataItem`是一个`Object`）甚至会很痛苦：

```
batchName.Text = e.Row.DataItem("batch_name") 
```

而是尝试适当地转换它：

```
Dim row As DataRow = DirectCast(e.Row.DataItem, DataRowView).Row
batchName.Text = row.Field(Of String)("batch_name") 
```

# php - 对于 = 1 的每个结果，将单元格添加到表格行？

> ID：14460953
> 
> 赞同：-2
> 
> 时间：2013-01-22T14:33:24.847
> 
> 标签：php, mysql, html-table

```
<?
// Set the MySQL Configuration
$db_host       = "test";
$db_user       = "test";
$db_password   = "test";
$db_name       = "test";
$db_table      = "test";

// Start Connection
$db_connect        =  mysql_connect ($db_host, $db_user, $db_password);

// Select Database
$db_select        =  mysql_select_db ($db_name, $db_connect);

$query = "SELECT bird_owner, place_name, funds, place_description FROM bird_locations";

$query2 = "SELECT blue_bird, red_bird, green_bird, gold_bird, black_bird FROM bird_locations"; 

// this query ($query2) is to select just the birds so can check if any bird = 1 then add a new image cell in table

// Execution MySQL Query
$result = mysql_query($query);

if($result)
{

// table headers

echo '<table width="90%" border="0" align="center" cellspacing="2" cellpadding="10">

<p><p><p>
<tr>
<th align="center"><b>Owner</b></th>
<th align="center"><b>PlaceName</b></th>
<th align="center"><b>Birds</b></th>
<th align="center"><b>Funds</b></th>
<th align="center"><b>Description</b></th>
</tr>
';

//now i add a new row for each result which works.

while($row = mysql_fetch_array($result, MYSQL_ASSOC))
 {
     echo '<tr>
    <td align="center"><b>' . $row['bird_owner'].'</b></td>
    <td align="center"><b>' . $row['place_name'].'</b></td>

    <td align="center"><b><img src="bird_blue_50px.png"/></b></td> 

    <td align="center"><b>' . $row['funds'].'L$</b></td>
    <td align="center"><b>' . $row['place_description'].'</b></div></td>

    </tr>';

 }

echo '</table>';

}

//Close MySQL connection
mysql_close($db_connect);
?> 
```

生成行时，行的第 3 个单元格是鸟的图像，但是我怎样才能使它在数据库中鸟的值为 1 时显示另一个鸟图像的额外单元格？

例如，如果

*   blue_bird 值等于 1 在行中显示图像
*   red_bird 值等于 1 还显示行中的红色鸟图像
*   green_bird 值等于 1 显示绿鸟图像
*   gold_bird 值等于显示金鸟图像
*   black_bird 值等于显示黑鸟图像

如果值等于 0，则不在表中显示该图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:37:17.620

拆分回声：

```
echo '<tr>
<td align="center"><b>' . $row['bird_owner'].'</b></td>
<td align="center"><b>' . $row['place_name'].'</b></td>';
if ($row['blue_bird']==1){
   echo '<td>Etc...';
}

echo '<td align="center"><b><img src="bird_blue_50px.png"/></b></td> 

<td align="center"><b>' . $row['funds'].'L$</b></td>
<td align="center"><b>' . $row['place_description'].'</b></div></td>

</tr>'; 
```

此外，mysql_query 将不再受支持：http: [//php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

# android - Joda DateTimeFormat 在多个设备中的行为不同（Android）

> ID：14460958
> 
> 赞同：1
> 
> 时间：2013-01-22T14:33:38.730
> 
> 标签：android, datetime, jodatime

我正在尝试使用 Joda 时间库格式化日期，但我的问题是它的行为取决于执行的设备。这是我的代码：

```
public static String parseDate (String date)
{
    final String datePattern = "yyyy-MM-dd, ";
    final String hourPattern = "HH:mm";

    DateTimeParser[] parsers = { 
            DateTimeFormat.forPattern("EEE, dd MMM yyyy HH:mm:ss Z").getParser(),
            DateTimeFormat.forPattern("EEE, dd MMM yyyy HH:mm:ss ZZZ").getParser(),
            DateTimeFormat.forPattern("yyy-MM-dd'T'HH:mm:ss.SSSZ").getParser()};

    DateTimeFormatter formatter = new DateTimeFormatterBuilder().append( null, parsers).toFormatter();

    String daux = "";
    try
    {
        DateTime dt = formatter.parseDateTime(date);
        String pubDate = dt.toString(datePattern);
        String pubHour = dt.toString(hourPattern);
        daux = pubDate + "kl " + pubHour;
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

    return daux;
} 
```

日期“星期二，2012 年 4 月 24 日 11:06:19 GMT”在 nexus 4 中的格式正确，但在三星 GS2 中执行时会引发异常。我真的不知道它可能是什么。

例外是：

```
01-22 15:21:05.160: W/System.err(11718): java.lang.IllegalArgumentException: Invalid format: "Sun, 20 Jan 2013 23:27:00 GMT"
01-22 15:21:05.160: W/System.err(11718):    at org.joda.time.format.DateTimeFormatter.parseDateTime(DateTimeFormatter.java:866)
01-22 15:21:05.160: W/System.err(11718):    at com.fotbollskanalen.parser.DateParser.parseDate(DateParser.java:150) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:03:27.157

您可能会在解析中遇到特定于语言环境的问题。

从[DateTimeFormatter.forPattern()](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html#forPattern%28java.lang.String%29) javadoc：

> 格式可能包含特定于语言环境的输出，这会随着您更改格式化程序的语言环境而改变。调用 DateTimeFormatter.withLocale(Locale) 切换语言环境。例如：
> 
> `DateTimeFormat.forPattern(pattern).withLocale(Locale.FRANCE).print(dt);`

*UPD*

您应该将行更改为：

```
DateTimeFormatter formatter = new DateTimeFormatterBuilder().append( null, parsers).toFormatter().withLocale(Locale.ENGLISH); 
```

# c# - 如何在c#中的WP7上一次按下多个按钮

> ID：14460964
> 
> 赞同：-1
> 
> 时间：2013-01-22T14:33:56.153
> 
> 标签：c#, windows-phone-7, multi-touch

我正在尝试在 c# 中为 windows phone 7 制作一个应用程序，您可以在其中按下按钮播放示例声音以制作音乐（如合成板）。但我有一个问题，你不能一次按 2 点。现在我尝试过使用多点触控，但我有点不确定如何使用它。当我尝试它时，我发现我在屏幕上按下了多点，它正在播放与屏幕上有多少手指相关的声音。你能帮我欢呼吗:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:24:21.380

使用经典事件/点击来处理触摸输入将您限制为仅单点触摸界面。Windows Phone Toolkit 或 Expression Blend Behaviors 将具有相同的功能。

我们将深入研究 Silverlight for Windows Phone 以及如何直接使用`Touch.FrameReported`.

一个很好的起点是这个[链接](http://www.wintellect.com/CS/blogs/jprosise/archive/2011/01/14/building-touch-interfaces-for-windows-phones-part-2.aspx)。

实现自己的逻辑后，播放声音并不太难。

# python - Python：在后台进程中处理异常

> ID：14460965
> 
> 赞同：1
> 
> 时间：2013-01-22T14:33:59.073
> 
> 标签：python, exception, selenium, exception-handling

我们在后台进程中使用 selenium，我想知道处理和调试浏览器发生的异常的正确方法是什么。理想情况下，我想要异常的名称、回溯、浏览器源代码和屏幕截图。

类似的东西：

```
def main():
    try:
         work_to_do.do_selenium_stuff()
    except:
         to_log = {}
         to_log['traceback'] = traceback.format_exc()
         to_log['source_code'] = browser.page_source()
         to_log['screenshot'] = browser.take_screenshot() 
```

我们在后台有很多进程，将所有内容存储在数据库中以供将来相关的 grep 使用会很棒。现在，我们都是手动处理所有事情，我觉得这很愚蠢。

# tridion - 无法在用户登录 Tridion 时显示输出

> ID：14460966
> 
> 赞同：-3
> 
> 时间：2013-01-22T14:34:02.257
> 
> 标签：tridion, tridion-2011

> **可能重复：**
> [如何在 Tridion 中获取当前登录用户的 tcmid？](https://stackoverflow.com/questions/14435420/how-to-get-tcmid-of-currently-logged-user-in-tridion)

我在类库（dll）中编写了以下代码，并在配置文件 od Tridion 中添加了程序集引用，但我无法获得任何显示 user.Id 的窗口或警报，并且它没有给出任何错误。

[TcmExtension("Myevent")] 公共类 GetInfo : TcmExtension {

```
public GetInfo()
{
    EventSystem.Subscribe<User, LoadEventArgs>(OnUserLoad, EventPhases.TransactionCommitted);
}

private void OnUserLoad(User user, LoadEventArgs eventArgs, EventPhases phase)
{

    MessageBox.Show(user.Id);
    Console.WriteLine(user.Id);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:08:20.260

As I mentioned in my answer to [your other question](https://stackoverflow.com/questions/14435420/how-to-get-tcmid-of-currently-logged-user-in-tridion), you cannot use message boxes or console.writes to see information from an event system in SDL Tridion. You will have to revert to logging to the Tridion Event Log or debug your event system.

Remote debugging is possible as described [in this msdn article](http://msdn.microsoft.com/en-us/library/vstudio/bt727f1t.aspx), but I usually find it a nuisance to setup (provided you are not being blocked by firewalls between your dev machine and the CMS). So normally I simply revert to just instaling Visual Studio on the dev CMS server and debug the event system DLL directly from there, by attaching to the dllhost.exe process (see more details in this [blog post](http://yatb.mitza.net/2012/03/debugging-tridion-2011-event-system.html)).

And like I also mentioned in my answer to [your other question](https://stackoverflow.com/questions/14435420/how-to-get-tcmid-of-currently-logged-user-in-tridion), I'm still not convinced you can achieve your requirements in an event system. You might need to look at a UI extension or something completely different for logging active logins of a user. Technically, you are never logging into the SDL Tridion UI, since your password is validated by IIS, and not by the SDL Tridion web application.

ps. its better to edit your question if you want to give more info, its never a good idea to open up a duplicate question.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:09:02.687

看起来您可能会混淆事件系统和 GUI 扩展。您订阅和事件处理程序的第一行代码是事件系统的一部分，并且实际上只能写入某种日志机制。你想达到什么目的？

当您在 CMS 服务器上使用 Visual Studio 调试代码时，您的代码执行时是否遇到任何断点？您的问题是 MessageBox 没有显示，还是您的代码根本没有运行。

# linux - 使用 git-shell 自定义命令

> ID：14460967
> 
> 赞同：5
> 
> 时间：2013-01-22T14:34:03.810
> 
> 标签：linux, git, shell, ssh

如何为 git-shell 创建自定义命令？根据[文档](http://www.kernel.org/pub/software/scm/git/docs/git-shell.html)：

> 当给定 -c 时，程序以非交互方式执行；可以是 git receive-pack、git upload-pack、git upload-archive、cvs server 或 COMMAND_DIR 中的命令之一。当没有给出参数时，shell 以交互模式启动；在这种情况下，COMMAND_DIR 必须存在，并且可以调用其中的任何可执行文件。

但是，我不确定我是否正确理解了这一点。我创建了一个名为 gituser 的用户，并给了他 /usr/bin/git-shell 作为 shell。我创建了一个名为 git-shell-commands 的目录，并在其中放置了一个名为“testy”的脚本，但我无法让它通过 git-shell 运行。

这是我在另一台机器上尝试的：

```
$ ssh gituser@server.com testy
fatal: unrecognized command 'testy' 
```

请注意，git-shell 正在工作，并且响应，它只是找不到我的自定义命令。

这是脚本：

```
:/home/gituser/git-shell-commands# ls -l -a
total 12
drwxr-xr-x 2 gituser gituser 4096 Jan 22 17:35 .
drwxr-xr-x 4 gituser gituser 4096 Jan 22 13:57 ..
-rwxr-xr-x 1 gituser gituser   26 Jan 22 13:58 testy
:/home/gituser/git-shell-commands# ./testy
hello!
:/home/sodigit/git-shell-commands# cat testy
echo "hello!" 
```

我究竟做错了什么？如何使用 git-shell 运行自定义命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T23:31:38.483

事实证明，这个特性已经在 git 1.7.4 中引入。我正在使用 debian 挤压，它包含旧版本的 git，所以这就是它不起作用的原因。

如果您遇到此问题，请检查您的 git 版本。

但是，从 git 1.7.10 开始，自定义命令只能在交互模式下工作，而不是 -c。不过我还没有尝试过最新的 git，所以这个问题可能与软件版本无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:01:51.963

要允许 1.7.4 之前的自定义命令（以及 1.7.10 的非交互模式），您可以使用 git-shell 的 shell 脚本包装器：

```
#!/bin/bash                                                                     

cmdline=($1)
cmd=$(basename "${cmdline[0]}")

if [ -z "$cmd" ] ; then
    exec git-shell
elif [ -n "$cmd" -a -x ~/git-shell-commands/"$cmd" ] ; then
    ~/git-shell-commands/"$cmd" "${cmdline[@]:1}"
else
    exec git-shell -c "$1"
fi 
```

无论您通常在哪里使用“git-shell”，都请参考此脚本，但忽略此脚本的任何“-c”参数。

与 git-shell 一样，上述脚本要求将整个命令行作为第一个参数传递。如果您希望将命令行作为单独的参数传递：

```
#!/bin/bash                                                                     

cmd=$(basename $1)

if [ -z "$cmd" ] ; then
    exec git-shell
elif [ -n "$cmd" -a -x ~/git-shell-commands/"$cmd" ] ; then
    shift
    ~/git-shell-commands/"$cmd" "$@"
else
    exec git-shell -c "$*"
fi 
```

例如，这允许您调用 authorize_keys 中的受限 shell，如下所示：

```
command="sshsh $SSH_ORIGINAL_COMMAND" ... 
```

请注意，这两个脚本都没有为 1.7.4 之前的版本创建交互模式（尝试启动交互会话将导致“致命：你认为我是什么？一个 shell？”来自 git-shell 的错误），但不应该干扰 1.7.4 和更新版本中的交互模式。

免责声明：这尚未经过安全漏洞审查。使用风险自负。特别是，~/git-shell-commands 中的每个命令都是一个潜在的安全漏洞（尽管 git-shell 1.7.4 及更高版本都是如此，即使没有上述任何脚本）。

# c# - 如何使正则表达式检查给定字符串中是否存在特定字符串

> ID：14460970
> 
> 赞同：-2
> 
> 时间：2013-01-22T14:34:17.670
> 
> 标签：c#, finite-automata, automata

我有下面提到的字符串。

`ISA*ABC**TODAY*ALEXANDER GONZALEZ~HL*CDD*DKKD*S~EB*1*AKDK**DDJKJ~AAA*Y**50*P~AAA*N**50*P~AAA*N**63*C~AAA*N**50*D~AAA*N**45*D`

在上面的字符串中有段。每个段都以倾斜（〜）符号开始，我想检查是否存在出现 AAA 段的段，并且在它的第三个索引上存在数字 63。我需要一个正则表达式。我已经尝试过并想出了这个`(~AAA)`，但由于我是正则表达式的新手，我不知道如何检查 63 是否出现在第三个索引上？如果有人可以提供帮助，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:50:59.530

我必须同意塞巴斯蒂安的评论。这可以使用简单的`Split`操作来完成。

```
 private static bool Check(string input)
    {
        int count = 0;
        foreach (string segment in input.Split('~'))
        {
            string[] tokens = segment.Split('*');
            if (tokens[0] == "AAA")
            {
                count++;
                if (count == 3)
                {
                    if (tokens[3] == "63") return true;
                    else return false;
                }
            }
        }
        return false;
    } 
```

编辑：既然你想要更少的代码行，那么 LINQ 怎么样？

```
 private bool Check(string input)
    {
        return input.Split('~').Select(x => x.Split('*')).Any(x => x.Length >= 4 && x[0].Equals("AAA") && x[3].Equals("63"));
    } 
```

EDIT2：为了完整起见，这里还有一个正则表达式解决方案：

```
 private bool Check(string input)
    {
        return Regex.IsMatch(input, @".*~AAA\*([^\*~]*\*){2}63.*");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:43:05.650

有[很多](http://txt2re.com/)[很多](http://www.ultrapico.com/Expresso.htm)的网站和[工具](http://www.hongkiat.com/blog/regular-expression-tools-resources/)可以帮助您使用正则表达式。谷歌可以进一步帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:43:39.163

```
 string s = "ISA*ABC**TODAY*ALEXANDER GONZALEZ~HL*CDD*DKKD*S~EB*1*AKDK**DDJKJ~AAA*Y**50*P~AAA*N**50*P~AAA*N**63*C~AAA*N**50*D~AAA*N*   *45*D";
   string[] parts = s.Split('~');
   for (int i = 0; i < parts.Count(); i++)
   {
      MessageBox.Show("part "+i.ToString()+" contains 63: "+parts[i].Contains("63").ToString());
   } 
```

这只是一个例子。你可以做更多，我检查了任何部分中是否存在 63。
因此，如果您确实想检查第 3 段代码是否为：

```
bool segment3Contains63 = s.Slplit('~')[3].Contains("63"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T14:48:20.970

你可以使用这个：

```
~AAA\*[A-Z]\*\*63 
```

注意 \ 用于转义 * 和 [AZ] 匹配任何大写字母字符。

# json - 如何WCF动态DataMember？

> ID：14460978
> 
> 赞同：0
> 
> 时间：2013-01-22T14:34:35.310
> 
> 标签：json, wcf, datacontract, datamember

例如：一个 Customer 类有 100 个数据成员（id、name、age、address...等）要序列化为 JSON。

在 Web.config 等 Config 文件中，可以设置一个输出列表来序列化 JSON 输出。

如果只输出 id 和 name，那么 JSON 只有 id 和 name。

我的问题：**可以在 DataContract 中支持动态 DataMember 吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:40:52.957

你的意思是可选的数据成员，我猜是这样，检查这个[问题](https://stackoverflow.com/questions/6257590/is-it-possible-to-have-optional-datamembers-in-wcf) 当然，对于你不想通过网络发送的那些，你必须有空值。另一个更肮脏的解决方案是使用字典作为数据成员，并在其中将要发送的字段作为元素发送。可能存在类型转换问题，但它可能会更好地为您服务。

**编辑：**

[正如这个问题所](https://stackoverflow.com/questions/4861138/c-sharp-json-serialization-of-dictionary-into-keyvalue-instead-of-keyk)指定的，您可能希望使用序列化为关联数组 en js 的字典。检查那里的答案和链接。那应该让你继续前进。但我仍然会选择可选的数据成员，因为它更像是一个“合同”。除此之外，更好地描述您想要做什么会有所帮助。

# networking - 数据包大小

> ID：14460979
> 
> 赞同：0
> 
> 时间：2013-01-22T14:34:38.960
> 
> 标签：networking, network-protocols

我有一个 25 字节的数据，想通过网络发送。如果在 ipv4 上使用 TCP，我想知道如何计算最小数据包大小。所有的网络都只是在解释它。我不需要包含其他协议或层标题。

因此，我想知道尺寸是多少。

根据我的研究，它是 20 TCP 标头 + 20 ipv4 标头 + 25 字节 = 65 字节，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:35:10.673

TCP 和 IP 都不使用填充，所以

*   [http://en.wikipedia.org/wiki/Transmission_Control_Protocol#TCP_segment_structure](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#TCP_segment_structure)
    TCP 标头长度为 20 字节（+ 选项）。TCP 不添加任何填充。*如果数据为 25 字节，则 TCP 段为 45 字节或更大*。

*   [http://en.wikipedia.org/wiki/IPv4#Packet_structure](http://en.wikipedia.org/wiki/IPv4#Packet_structure)
    [https://www.rfc-editor.org/rfc/rfc791#page-34](https://www.rfc-editor.org/rfc/rfc791#page-34)
    IPv4 标头长度为 20 个字节（+ 选项）。IPv4 不添加任何填充。*如果 TCP 帧为 45 字节，则 IPv4 数据包为 65 字节或更大*。

你的结果是正确的。

还，

*   [http://www.infocellar.com/networks/ethernet/frame.htm](http://www.infocellar.com/networks/ethernet/frame.htm)
    以太网报头为 14 字节（假设 Ethernet2，不包括 8 字节前导码），以太网帧以 4 字节 CRC 结尾。以太网不添加任何填充，除非确保总共至少 64 个字节。*如果 IPv4 数据包为 65 字节，则以太网帧为 83 字节*。

# mysql - 'SET foreign_key_checks = 0' 的范围是什么？

> ID：14460985
> 
> 赞同：9
> 
> 时间：2013-01-22T14:34:50.103
> 
> 标签：mysql, innodb

真的找不到任何细节，但“SET foreign_key_checks = 0”的范围是当前连接、当前会话还是当前事务？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T14:36:06.060

这是一个基于会话的语句。

这是为了*暂时*打破外键约束。有时需要以在修改过程中需要破坏参照完整性的方式更改数据。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T14:36:20.693

它是基于会话的。完整的答案和解释可以[在另一个 Stack Overflow 答案](https://stackoverflow.com/a/8538716/117259)中找到：

> “它是基于会话的。做一个测试确定，但这是我的理解。”</p>

# java - 使用消息捕获和处理 Java 中的异常引发（打开的文件过多）

> ID：14460988
> 
> 赞同：1
> 
> 时间：2013-01-22T14:35:06.420
> 
> 标签：java, exception-handling, filenotfoundexception, file-handling

当我尝试在网格计算机上运行程序时，我遇到了与（[打开的文件句柄过多）类似的问题。](https://stackoverflow.com/questions/1661322/too-many-open-file-handles)增加此资源上打开文件总数的操作系统限制的选项不可用。

我试图捕捉并处理异常，但似乎没有捕捉到异常。该异常似乎将自身报告为`FileNotFoundException`. 抛出异常的地方之一是如下所示的方法：

```
public static void saveImage(BufferedImage bi, String format, File aFile) {
  try {
    if (bi != null) {
      try {
        //System.out.println("ImageIO.write(BufferedImage,String,File)");
        System.err.println("Not really an error, just a statement to help with debugging");
        ImageIO.write(bi, format, aFile);
      } catch (FileNotFoundException e) {
        System.err.println("Trying to handle " + e.getLocalizedMessage());
        System.err.println("Wait for 2 seconds then trying again to saveImage.");
        //e.printStackTrace(System.err);
        // This can happen because of too many open files.
        // Try waiting for 2 seconds and then repeating...
        try {
          synchronized (bi) {
            bi.wait(2000L);
          }
        } catch (InterruptedException ex) {
          Logger.getLogger(Generic_Visualisation.class.getName()).log(Level.SEVERE, null, ex);
        }
        saveImage(
        bi,
        format,
        aFile);
      } finally {
        // There is nothing to go in here as ImageIO deals with the stream.    
      }
    }
  } catch (IOException e) {
    Generic_Log.logger.log(
    Generic_Log.Generic_DefaultLogLevel, //Level.ALL,
    e.getMessage());
    String methodName = "saveImage(BufferedImage,String,File)";
    System.err.println(e.getMessage());
    System.err.println("Generic_Visualisation." + methodName);
    e.printStackTrace(System.err);
    System.exit(Generic_ErrorAndExceptionHandler.IOException);
  }
} 
```

以下是 System.err 的一个片段，该片段曾在问题发生时报告过：

```
Not really an error, just a statement to help with debugging   
java.io.FileNotFoundException: /data/scratch/lcg/neiss140/home_cream_292126297/CREAM292126297/genesis/GENESIS_DemographicModel/0_99/0/data/Demographics/0_9999/0_99/39/E02002367/E02002367_Population_Male_End_of_Year_Comparison_2002.PNG (Too many open files) 
  at java.io.RandomAccessFile.open(Native Method)
  at java.io.RandomAccessFile.(RandomAccessFile.java:216) 
  at javax.imageio.stream.FileImageOutputStream.(FileImageOutputStream.java:53) 
  at com.sun.imageio.spi.FileImageOutputStreamSpi.createOutputStreamInstance(FileImageOutputStreamSpi.java:37) 
  at javax.imageio.ImageIO.createImageOutputStream(ImageIO.java:393) 
  at javax.imageio.ImageIO.write(ImageIO.java:1514) 
  at uk.ac.leeds.ccg.andyt.generic.visualisation.Generic_Visualisation.saveImage(Generic_Visualisation.java:90) 
  at uk.ac.leeds.ccg.andyt.generic.visualisation.Generic_Visualisation$ImageSaver.run(Generic_Visualisation.java:210) 
  at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439) 
  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) 
  at java.util.concurrent.FutureTask.run(FutureTask.java:138) 
  at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 
  at java.lang.Thread.run(Thread.java:662) 
```

我有一些解决这个问题的想法，但有人知道出了什么问题吗？

（我试图发布这个问题的一个版本作为这个问题的答案[，](https://stackoverflow.com/questions/1661322/too-many-open-file-handles)但被版主删除了。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:57:40.317

首先，如果打开输出流失败，该`write`方法实际上会抛出一个`IIOException`not a ；`FileNotFoundException`请参阅[源代码](http://www.docjar.com/html/api/javax/imageio/ImageIO.java.html)- 第 1532 行。这解释了为什么您的恢复代码永远不会运行。

其次，你的恢复策略有点可疑。您无法保证使用所有这些文件句柄的任何东西都会在 2 秒内释放它们。事实上，在最坏的情况下，他们可能永远不会被释放。

但最重要的是你把注意力集中在问题的错误部分。与其尝试提​​出恢复机制，不如关注应用程序为什么打开这么多文件描述符的问题。这*闻起来像*资源泄漏。我建议您在代码库上运行 FindBugs 以查看它是否可以识别泄漏代码。你的代码在任何地方打开一个外部流，它应该`close()`在一个块中有一个匹配的调用，`finally`以确保流*始终*是关闭的；例如

```
 OutputStream os = new FileOutputStream(...)
    try {
        // do stuff
    } finally {
        os.close();
    } 
```

或者

```
 // Java 7 form ...
    try (OutputStream os = new FileOutputStream(...)) {
        // do stuff
    } 
```

* * *

> 我正在运行它的资源只有 1024 个文件处理程序，而改变它是另一个问题。该程序是一个模拟程序，它在读入另一批输入数据的同时写出大量输出文件。该工作使用 ExecutorService 进行线程化。该程序在另一台具有更高文件处理程序限制的计算机上运行完成，但我想让它在我受限于文件处理程序较少的资源上工作。

因此，您似乎是在说您*需要*打开该数量的文件。

令我震惊的是，根本问题在于您的应用程序的体系结构。听起来您只是同时运行了太多模拟任务。我建议您将执行程序的线程池大小减少到比打开文件描述符的最大数量少一些。

问题是您当前的策略*可能会*导致某种形式的死锁......现有任务在新任务开始运行之前无法取得进展，但新任务在现有任务释放文件描述符之前无法启动。

我认为您需要一种不同的方法来处理输入和输出。要么在内存中缓冲完整的输入和/或输出文件（等等），要么实现某种多路复用器，以便不需要同时打开所有活动文件。

# jquery - 使用选中的单选按钮切换 DIV

> ID：14460990
> 
> 赞同：3
> 
> 时间：2013-01-22T14:35:06.857
> 
> 标签：jquery

我正在尝试`DIV`根据`radio buttons`. 这是我的编码..

```
<div class="form-element-row">
    <div class="first-child">
        <label for="name">Registration Period :</label>
    </div>
    <div class="last-child">
        <input type="radio"  name="period"  value="1" />1 Year
        <input type="radio"  name="period"  value="2" />2 Years
        <input type="radio"  name="period"  value="3" />3 Years                             
    </div>
</div>

<div class="subscription_rate">
    <div class="first-child">
        <label>&nbsp;</label>
    </div>
    <div class="last-child">
        <table>
          <tr>
            <th>Subscription Rate</th>
            <th>1 Year</th>
            <th>2 Years</th>
            <th>3 Years</th>
          </tr>
          <tr>
            <td>Rates for subscription period.</td>
            <td>$ 3000</td>
            <td>$ 4500</td>
            <td>$ 7500</td>
          </tr>
        </table>
    </div>
</div> 
```

这是 jQuery

```
$('.subscription_rate').hide(); // hide the div first
 $('input[type=radio]').click(function(){
    if($('input[type=radio]:checked')){
        $('.subscription_rate') .slideToggle('slow') // show it when user clicks the radio buttons
    }else{
        $('.subscription_rate') .fadeOut("slow");  // if in any case radio button is not checked by user hide the div
        }
}); 
```

这对我有用，但有问题.. 在这里我只需要点击 selected 来切换`radio button`。使用此代码，它适用于每个按钮。这意味着我只想选择下一个单选按钮，然后它会向下切换 DIV。我需要做的是始终选择一个单选按钮，我需要将`DIV`.

谁能告诉我我该怎么做。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:55:10.600

这应该是一个简单的解决方案，如果它被选中，则将其向上滑动，否则将其淡出。这样，如果您通过代码更改它，它应该具有相同的效果（单选按钮不能在单击时“取消全选”，只能通过代码。

```
$('.subscription_rate').hide(); // hide the div first
$('input[type=radio]').change(function () {
    if ($(this).is(':checked')) {
        $('.subscription_rate').slideDown("slow");
    } else {
        $('.subscription_rate').fadeOut('slow');
    }
}); 
```

编辑：

这是一个带有工作示例的小提琴：http: [//jsfiddle.net/AVgzW/](http://jsfiddle.net/AVgzW/) - 注意它`slideDown`不是 toggleDown - 你可以使用`slideUp`它是需要的 - 文档：[http://api.jquery.com/category/effects /](http://api.jquery.com/category/effects/)

编辑2：

1 如果它已被选中并单击它，它会在切换开关上显示/隐藏 div/文本。

2 如果尚未选择（选择新选项），则将其隐藏（div 文本）

3 ANY 的初始选择不会显示文本，但一旦选择并再次单击它就会显示。

```
$('.subscription_rate').hide(); // hide the div first
$('input[type=radio]').change(function () {
    if ($(this).is(':checked') && $(this).hasClass("activeSelection")) {
        $('.subscription_rate').slideToggle("slow");
    } else {
        $('input[type=radio]').removeClass("activeSelection");
        $(this).addClass('activeSelection');
        $('.subscription_rate').fadeOut('slow');
    }
}); 
```

小提琴：http: [//jsfiddle.net/AVgzW/1/](http://jsfiddle.net/AVgzW/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:58:15.013

我认为您希望每个单选按钮单独显示每个元素？如果是这样，此代码有效，您可以在此[小提琴上查看](http://jsfiddle.net/hbHqj/1/)

我向各个元素添加了类以分别控制它们：

```
<tr>
  <th>Subscription Rate</th>
  <th class="toggle 1yr">1 Year</th>
  <th class="toggle 2yr">2 Years</th>
  <th class="toggle 3yr">3 Years</th>
</tr> 
```

此 js 将仅显示与您选择的单选按钮相关的项目。

```
$('.subscription_rate').hide(); // hide the div first
$('input[type=radio]').click(function () {
  $('.subscription_rate').show();
  $('.toggle').hide(); // if in any case radio button is not checked by user hide the div
  $('.' + $(this).val() + 'yr').show();
}); 
```

如果您希望它们看起来不错并且有花哨的过渡，我建议不要使用表格元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T14:50:20.937

此代码将执行所需的功能。

```
 $('.subscription_rate').hide();
 $('input[type=radio]').click(function(){
     if($('input[type=radio]:checked') && $(this).attr('value')==1){
         if(!($('.subscription_rate').is(':visible'))){
             $('.subscription_rate').slideToggle('slow')
         }
     }else if($('input[type=radio]:checked') && $(this).attr('value')==2){
         $('.subscription_rate') .fadeOut("slow");
     }
    else if(!($('.subscription_rate').is(':visible'))){
       $('.subscription_rate').slideToggle('slow');
     }
}); 
```

单选按钮 1 和 3 将始终使 div 可见，而 2 将始终隐藏 div。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T14:52:16.510

```
var i = 0;
$('.subscription_rate').hide(); // hide the div first
 $('input[type=radio]').click(function(){
     if(i==0) {
         $(this).addClass("active");
         $(".subscription_rate").slideDown();
         i++;
     }
     else {
     if($(this).hasClass("active")) {
         $(".subscription_rate").slideToggle();
     }
     else {
         $(".active").removeClass("active");
         $(this).addClass("active");
         $(".subscription_rate").show().fadeOut().fadeIn();
     }
     }
}); 
```

[***工作小提琴***](http://jsfiddle.net/3UBE4/3/)

您可以添加“活动”类，下次如果用户单击它将检测它是否具有“活动”类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T14:49:21.733

我不确定这是否是您要寻找的，但这可能会有所帮助：

```
$(document).ready(function (){
$('.subscription_rate').hide(); // hide the div first
 $('input[type=radio]').click(function(){
    if($('input[type=radio]:checked')){
        $('.subscription_rate') .show('slow') // show it when user clicks the radio buttons
    }else{
        $('.subscription_rate') .fadeOut("slow");  // if in any case radio button is not checked by user hide the div
        }
});}) 
```

# c# - ItemRealized 事件不会触发

> ID：14460992
> 
> 赞同：1
> 
> 时间：2013-01-22T14:35:15.513
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-8

我想创建一个无限长列表选择器，但我的事件`ItemRealized`没有触发。我已经创建了视图模型，所以我可以生成一个可观察的集合，当我监视主类时，一切看起来都工作正常，我确定它不是空的，但我的问题是我无法填充 longlistselector

```
 <phone:PhoneApplicationPage.Resources>
    <vm:GoogleView x:Key="viewModel"/>        
</phone:PhoneApplicationPage.Resources> 
```

长列表选择器

```
 <phone:LongListSelector ItemRealized="m_ListBoxGoogle_ItemRealized"  Name="m_ListGoogle" HorizontalAlignment="Center" Height="410" Margin="0,120,0,0"                             
             ItemsSource="{Binding GoogleCollection}" 
             DataContext="{StaticResource viewModel}">               
            <phone:LongListSelector.ItemTemplate>
                    <DataTemplate>
                        <Button Tag="{Binding GoogleID}" Style="{StaticResource NoVisualTextButton }" toolkit:TiltEffect.IsTiltEnabled="True" Click="OnListBoxItemClick" Margin="-10,0,0,0">
                            <StackPanel  Orientation="Horizontal" Margin="0,3,0,0" Height="auto" Width="450">
                                <Border BorderThickness="1" Width="62" Height="62" BorderBrush="#00aef0" Background="#00aef0">
                                    <Image  Height="60" Width="60" Source="{Binding GoogleImagePath}"/>
                                </Border>
                                <StackPanel Width="350" HorizontalAlignment="Center" Margin="12,0,0,0" >
                                    <TextBlock  Text="{Binding GoogleDisplayName}"  TextWrapping="NoWrap" Style="{StaticResource PanoramaItemTextStyle }" FontSize="24"  />
                                    <TextBlock  Text="{Binding GoogleObjectType}"  TextWrapping="NoWrap" Style="{StaticResource PanoramaItemTextStyle }" FontSize="20" />
                                </StackPanel>
                            </StackPanel>
                        </Button>          
                </DataTemplate>
            </phone:LongListSelector.ItemTemplate>
        </phone:LongListSelector> 
```

我真的被困住了，请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:47:16.850

尝试这些事情，因为我认为这是一个具有约束力的问题：

1.  调试并在 GoogleView 构造函数中放置一个断点并验证它正在被实例化。
2.  如果它正在被实例化，请验证您绑定到的数据是否存在于类中。
3.  如果所有内容都已实例化，请尝试以 TwoWay 绑定模式绑定到集合。
4.  如果这不起作用，请尝试绑定到另一个控件中的数据以验证事情是否正常工作。

# windows - 如何使用 ms 资源工具包工具压缩文件夹？

> ID：14460994
> 
> 赞同：1
> 
> 时间：2013-01-22T14:35:26.107
> 
> 标签：windows, command-line, compression, zip

我有一个文件夹“A”，其中包含 b.txt、c.txt 和另一个文件夹 B。我想将文件夹 A 压缩为 A.zip。这样 b.txt、c.txt 和文件夹 B 就位于 A.zip 中。我尝试使用 Windows 资源工具包，但我不能这样做

```
compress -Z *.*  C:\A.zip 
```

我在 Windows 命令行中使用了上面的命令，但它给了我一个错误，说 A.zip 不是有效的目标目录。我使用这个[http://www.microsoft.com/downloads/details.aspx?familyid=9d467a69-57ff-4ae7-96ee-b18c4790cffd&displaylang=en](http://www.microsoft.com/downloads/details.aspx?familyid=9d467a69-57ff-4ae7-96ee-b18c4790cffd&displaylang=en)工具包在 Windows 中使用压缩命令。请帮忙。在这里我不能使用任何其他应用程序，因为我无法在这台机器上安装任何东西。