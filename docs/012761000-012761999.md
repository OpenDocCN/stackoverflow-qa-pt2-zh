# StackOverflow 问答 12761000-12761999

# asp.net-3.5 - 有没有办法在 WebForms 中呈现部分视图？

> ID：12761000
> 
> 赞同：19
> 
> 时间：2012-10-06T15:14:49.870
> 
> 标签：asp.net-3.5, webforms

我正在接触一个旧的`WebForms project`，但我早就离开了它，我现在已经习惯了 MVC。我正在尝试重构项目并提出一个让我发疯的简单问题......

将`.aspx`文件包含在另一个文件中的最佳方式是什么？

我不想仅仅为此而拥有很多主文件，我所追求的只是某种东西`@Html.RenderPartial("MyFileName")`或

> 在某些现有文件中包含文件有那么难吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-06T15:31:47.173

在 UserControl 上使用`UserControl` [教程](http://msdn.microsoft.com/en-us/library/fb3w5b53%28v=vs.100%29.aspx)。它们是带有`.ascx`扩展名的文件，您可以将它们包含在您的页面中

```
//UserControl1.ascx
<% @ Control Language="C#" ClassName="UserControl1" %>

 <div>
   My Custom Control: I can use any Server controls, html tags etc
 </div> 
```

将其包含在您的`.aspx`页面中

```
<%@ Page Language="C#" %>
<%@ Register TagPrefix="uc" TagName="MyCustomControl" Src="~/Controls/UserControl1.ascx" %>
<html>
<body>
<form runat="server">
    <uc:MyCustomControl id="MyPartialView" 
        runat="server" />
</form>
</body> 
```

# iphone - 如何在后台接收 MPMusicPlayerControllerNowPlayingItemDidChangeNotification？

> ID：12761003
> 
> 赞同：1
> 
> 时间：2012-10-06T15:15:15.947
> 
> 标签：iphone, objective-c, ios

我正在做这个测试应用程序，我想在 iPod 更改正在播放的项目（歌曲）时收到通知，当应用程序处于前台时测试运行良好，但是一旦应用程序进入后台，它就会停止收到通知没关系，当我再次点击应用程序（进入前台）时，我会根据应用程序在后台时现在播放的所有时间更改所有通知，但每次我得到相同的歌曲信息时，我怎么能得到每个通知的正确歌曲信息？

这是我在 AppDelegate 中所做的测试：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];
    MPMusicPlayerController *player = [MPMusicPlayerController iPodMusicPlayer];

    [notificationCenter addObserver:self
                           selector:@selector(nowPlayingItemChanged:)
                               name:MPMusicPlayerControllerNowPlayingItemDidChangeNotification
                             object:player];

    [player beginGeneratingPlaybackNotifications];

    return YES;
}

-(void) nowPlayingItemChanged:(NSNotification *)notification {
    MPMusicPlayerController *player = (MPMusicPlayerController *)notification.object;

    MPMediaItem *song = [player nowPlayingItem];

    if (song) {
        NSString *title = [song valueForProperty:MPMediaItemPropertyTitle];
        NSString *album = [song valueForProperty:MPMediaItemPropertyAlbumTitle];
        NSString *artist = [song valueForProperty:MPMediaItemPropertyArtist];
        NSString *playCount = [song valueForProperty:MPMediaItemPropertyPlayCount];

        NSLog(@"title: %@", title);
        NSLog(@"album: %@", album);
        NSLog(@"artist: %@", artist);
        NSLog(@"playCount: %@", playCount);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:25:46.963

请参阅这篇文章，您在后台的选项非常有限：

[StackOverFlow 帖子](https://stackoverflow.com/questions/4928207/receiving-notifications-with-app-in-background-mode)

而关于该状态的 Apple Docs 是不可能的： [Apple Documentation on Background states](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-16T13:40:55.037

进入后台时一定要移除观察者：

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:MPMusicPlayerControllerNowPlayingItemDidChangeNotification object:musicPlayer];[player endGeneratingPlaybackNotifications]; 
```

进入前台时再次添加。

# android - 如何强制每个占用屏幕宽度的可滚动片段一次只显示一个？

> ID：12761004
> 
> 赞同：1
> 
> 时间：2012-10-06T15:15:24.883
> 
> 标签：android

希望我的要求是有道理的。假设我想使用，比如说一个 Horizo​​ntalView，并向它添加 3 个 Fragment。通常它会滚动，但您最终可能会显示两个视图的一半。我想强制片段自动落入到位只显示一个。我也不介意另一种实现方式，即知道如何判断屏幕上显示了多少片段，以便将其置于中心舞台。我怎样才能做到这一点？非常感激。如果需要任何澄清，请随时询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:30:44.100

> 在 HoneyComb 之前我不想支持任何东西

所以？

> 因此，使用兼容性库几乎没有什么好处。

Android 支持包已经一年多没有被称为“兼容性库”了。这是因为 Android 支持包不仅仅用于新功能的反向移植。它还添加了 Google 希望为我们提供完整实现但不想嵌入固件的代码。`ViewPager`是这方面的杰出例子。

因此，有才华的程序员会将 Android 支持包添加到他们的应用程序中，并使用 实现您所需的功能`ViewPager`，并认识到 ProGuard 将作为生产构建的一部分删除所有其余的 Android 支持包。

# c# - 网络摄像头快照不显示相机窗口 c# Vista，Windows 7

> ID：12761006
> 
> 赞同：0
> 
> 时间：2012-10-06T15:16:04.633
> 
> 标签：c#, camera

大家好，我正在创建一个消息应用程序，但是一旦应用程序从我的网络摄像头中抓取图片，它就会开始显示一个窗口来选择一个摄像头，知道它只安装了一个摄像头

```
[DllImport("user32", EntryPoint = "SendMessage")]
static extern int SendMessage(int hWnd, uint Msg, int wParam, int lParam);
[DllImport("avicap32.dll", EntryPoint = "capCreateCaptureWindowA")]
static extern int capCreateCaptureWindowA(string lpszWindowName, int dwStyle,
    int X, int Y, int nWidth, int nHeight, int hwndParent, int nID);
const int WM_CAP_CONNECT = 1034;
const int WM_CAP_DISCONNECT = 1035;
const int WM_CAP_COPY = 1054;
const int WM_CAP_GET_FRAME = 1084; 
```

这个api适用于带有服务应用程序的windows xp，所以我创建了服务应用程序，它通过管道与应用程序通信并以字节为单位传输图片，但请注意它只适用于windows xp

我如何在没有此窗口的情况下捕捉网络摄像头图片我在 windows vista,7,8 中使用了一些 api

谢谢 B。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:47:55.333

The API you are referring to ([Video for Windows](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757708%28v=vs.85%29.aspx)) is not supposed to operate without a window. The window however does not need to be visible, and you can move it out of work area too. It does not have to paint actually captured video as well, the window purpose is to communicate with the API. So it is usable in Window 7 too, provided of course that you have a well operating driver for these operating systems as well.

Other APIs you might want to look at are DirectShow and Media Foundation. DirectShow is the richest and best compatible throughout versions of Windows API, and you can do the task mentioned in the subject (capture without showing). From C# you typically work with it via [DirectShow.NET](http://directshownet.sourceforge.net/) library/binding and it has decent samples to look at on the website.

# android - 在没有 smtp.gmail.com 的情况下在 android 应用程序中发送邮件

> ID：12761008
> 
> 赞同：2
> 
> 时间：2012-10-06T15:16:25.527
> 
> 标签：android, jakarta-mail, sendmail

我应该通过应用程序发送电子邮件，但我想从另一个邮件帐户（没有 gmail）发送它。我编写了一个 Mail 类并设置了 host="mail@xxxxxx.xx"，但在调试模式下，我看到变量 host 为 ="smtp.gmail.com"。怎么可能？有诀窍吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:10:33.433

您正在使用 JavaMail API 发送邮件，对吧？

查看[JavaMail FAQ](http://www.oracle.com/technetwork/java/javamail/faq/index.html)，有几种方法可以指定要连接的主机，包括设置属性或在调用 connect 方法时显式传递它。如果没有更多关于你到底在做什么的细节，很难说你哪里出错了。

# r - 如何从 R 脚本访问 Solr 数据？

> ID：12761017
> 
> 赞同：1
> 
> 时间：2012-10-06T15:17:52.543
> 
> 标签：r, solr

是否有一个 R 包可以简化对存储在 Apache Solr 服务器中的数据的访问？我知道 Solr 有一个类似 REST 的 API，而 R 有一个`RCurl`提供 http/https 通信的包，但是这样的通信并不像我们想的那么简单。请帮助我找到一种简化 Solr - R 交互的方法。谢谢。

# java - 使用 Java 程序从 Excel 文件中获取列 X

> ID：12761024
> 
> 赞同：2
> 
> 时间：2012-10-06T15:18:59.533
> 
> 标签：java, excel

我有一个 Excel 表，其中有近 150 列。我正在编写一个实用程序，其中将获取列名称为 X 的列。在另一个线程中，我看到了如何阅读 XL 工作簿和工作表.. 编写了以下代码..

```
 HSSFSheet sheet = workbook.getSheetAt(0);
        Iterator rows = sheet.rowIterator();

        while (rows.hasNext()) 
        {
            HSSFRow row = (HSSFRow) rows.next();
            Iterator cells = row.cellIterator();

            List data = new ArrayList();
            while (cells.hasNext()) 
            {
                HSSFCell cell = (HSSFCell) cells.next();
                data.add(cell);
            }

            sheetData.add(data);
        }
    } 
```

那么如何从给定列名的 XL 表中获取确切的列..？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T16:41:03.660

Apache POI API HSSFSheet 是基于行的，您需要通过迭代提取列数据，下面的链接可能会回答您的问题：

[在 Apache POI API 中提取电子表格列中的数据](https://stackoverflow.com/questions/8595016/extracting-data-in-spreadsheet-columns-in-apache-poi-api)

修改代码以在第一个工作表的第 1 行中搜索字符串

```
package projectTest.test;

import java.io.FileInputStream;
import java.util.ArrayList;
import java.util.List;

import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.poifs.filesystem.POIFSFileSystem;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;

public class Poi {

    public static void main(String[] args) throws Exception {  
    //test file is located in your project path         
    FileInputStream fileIn = new FileInputStream("test.xls");
    //read file 
    POIFSFileSystem fs = new POIFSFileSystem(fileIn); 
    HSSFWorkbook filename = new HSSFWorkbook(fs);
    //open sheet 0 which is first sheet of your worksheet
    HSSFSheet sheet = filename.getSheetAt(0);

    //we will search for column index containing string "Your Column Name" in the row 0 (which is first row of a worksheet
    String columnWanted = "Your Column Name";
    Integer columnNo = null;
    //output all not null values to the list
    List<Cell> cells = new ArrayList<Cell>();

    Row firstRow = sheet.getRow(0);

    for(Cell cell:firstRow){
        if (cell.getStringCellValue().equals(columnWanted)){
            columnNo = cell.getColumnIndex();
        }
    }

    if (columnNo != null){
    for (Row row : sheet) {
       Cell c = row.getCell(columnNo);
       if (c == null || c.getCellType() == Cell.CELL_TYPE_BLANK) {
          // Nothing in the cell in this row, skip it
       } else {
          cells.add(c);
       }
    }
    }else{
        System.out.println("could not find column " + columnWanted + " in first row of " + fileIn.toString());
    }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-21T17:17:10.600

你也可以这样尝试。您可以遍历标题行。

```
Row headerRow = sheet.get(0);

for (int cellIndex = 0; cellIndex < 150; cellIndex++) {
    Cell cell = row.getCell(cellIndex);
    if (columnName.equals(cell.getStringCellValue())) {
        // do your thing
    }
} 
```

注意：如果您的单元格可以为空，请使用：

```
Cell cell = row.getCell(cellIndex);

if (cell!=null) {
    if (columnName.equals(cell.getStringCellValue())) {
        // do your thing
    }
} 
```

我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-13T03:22:40.707

## 阅读特定列

```
 File myFile = new File(path);
    FileInputStream fis = new FileInputStream(myFile);

    // Finds the workbook instance for XLSX file
    XSSFWorkbook myWorkBook = new XSSFWorkbook (fis);

    //XSSFWorkbook workBook = new XSSFWorkbook();
    //Reading sheet at number 0 in spreadsheet(image attached for reference
    Sheet sheet = myWorkBook.getSheetAt(0);

    //creating a Sheet object to retrieve object  
    Iterator<Row> itr = sheet.iterator();//iterating over excel file  

    while (itr.hasNext())                 
    {  
        Row row = itr.next();
        Iterator<Cell> cellIterator = row.cellIterator();//iterating over each column
        //Reading cell in my case column name is ppm
        Cell ppmEx= row.getCell(0);

        //Cell cell = cellIterator.next();
        while (cellIterator.hasNext())
        {  
            Cell cell = cellIterator.next();
            //Check the cell type and format accordingly
            switch (cell.getCellType()) 
            {
                case Cell.CELL_TYPE_NUMERIC:
                    //System.out.println(cell.getNumericCellValue() + "    ");
                    al.add(cell.getNumericCellValue());
                    break;
                case Cell.CELL_TYPE_STRING:
                    //System.out.println(cell.getStringCellValue()+" ");
                    al.add(cell.getStringCellValue());
                    break;
                case Cell.CELL_TYPE_BOOLEAN:
                    //System.out.println(cell.getBooleanCellValue()+" ");
                    al.add(cell.getBooleanCellValue());
                case Cell.CELL_TYPE_BLANK:
                    //System.out.println("blank");
                    al.add("blank");

            }  
        }  
        System.out.println("-");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-21T11:31:47.003

**这是非常简单有效的代码，并且按预期工作**

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.apache.poi.openxml4j.exceptions.InvalidFormatException;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.ss.usermodel.WorkbookFactory;

public class TestExcelFile {

    public static void main(String[] args) {
        String envFilePath = System.getenv("AZURE_FILE_PATH");

        // upload list of files/directory to blob storage
        File folder = new File(envFilePath);
        File[] listOfFiles = folder.listFiles();

        for (int i = 0; i < listOfFiles.length; i++) {
            if (listOfFiles[i].isFile()) {
                System.out.println("File " + listOfFiles[i].getName());

                Workbook workbook;
                //int masterSheetColumnIndex = 0;
                try {
                        workbook = WorkbookFactory.create(new FileInputStream(envFilePath + "\\"+ listOfFiles[i].getName()));
                        // Get the first sheet.
                        Sheet sheet = workbook.getSheetAt(0);
                        // Get the first cell.
                        Row row = sheet.getRow(0);
                        //Cell cell = row.getCell(0);
                        for (Cell cell1 : row) {
                            // Show what is being read.
                            System.out.println(cell1.toString());   
                            //masterSheetColumnIndex++;
                        }
                        //we will search for column index containing string "Your Column Name" in the row 0 (which is first row of a worksheet
                        String columnWanted = "Modality Name";
                        Integer columnNo = null;
                        //output all not null values to the list
                        List<Cell> cells = new ArrayList<Cell>();

                        Row firstRow = sheet.getRow(0);

                        for(Cell cell1:firstRow){
                            if (cell1.getStringCellValue().equals(columnWanted)){
                                columnNo = cell1.getColumnIndex();
                            }
                        }

                        if (columnNo != null){
                            for (Row row1 : sheet) {
                               Cell c = row1.getCell(columnNo);
                               if (c == null || c.getCellType() == Cell.CELL_TYPE_BLANK) {
                                  // Nothing in the cell in this row, skip it
                               } else {
                                  cells.add(c);
                               }
                            }
                            System.out.println("");
                        }else{
                            System.out.println("could not find column " + columnWanted + " in first row of " + listOfFiles[i].getName());
                        }

                } catch (InvalidFormatException | IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

# c++ - 在 C++ 中使用带有共享变量的 pthread 进行多线程

> ID：12761028
> 
> 赞同：1
> 
> 时间：2012-10-06T15:19:20.883
> 
> 标签：c++, multithreading, pthreads, parameter-passing

我是线程的新手（以及 C/C++），我正在尝试使用多个线程来访问共享变量。

总的来说，我创建了一个变量 char inputarray[100];

线程 1：该线程将以 2 字节突发从标准输入读取数据，并将它们附加到输入数组。（通过输入文件输入）

线程 2：该线程将一次读取 1 个字节的数据，执行计算，并将其数据放入输出数组。

线程 3：该线程将以 2 字节突发的形式从输出数组中输出数据。（标准输出）

我尝试了输入部分并通过传递一个结构使其工作，但想在不使用结构的情况下做到这一点，但它一直给我带来问题。

如果我能得到输入，我相信我将能够使用类似的策略来完成输出。任何帮助将不胜感激。

下面是输入线程的粗略模板。

```
#include <stdio.h>
#include <pthread.h>

using namespace std;

void* input(void* arg) {
    char reading[3];
    fread(reading,1,2,stdin);

    //append to char inputarray[]..???
}

int main() {
    char inputarray[100];
    pthread_t t1;
    pthread_create(&t1, NULL, &input, &inputarray);
    void *result;
    pthread_join(t1,&result);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T15:29:39.443

几个问题：

1.  我认为堆栈上的数组对于共享变量来说是非常糟糕的选择，因为它具有固定的大小，并且从线程 2 和 3 中不清楚将新元素放在哪里或从哪里读取元素。我建议使用`std::vector`or`std::deque`代替。最初，您的容器是空的。然后线程 2 将一些元素推送给它。线程 3 正在轮询（或等待条件变量）容器，一旦找到新元素 - 打印它们

2.  您必须使用互斥锁同步对共享变量的访问（考虑 pthread 互斥锁，`std::mutex`或`boost::mutex`）。您可能还想使用条件变量来通知线程 3 队列中的新元素。但对于初始实施，它是不需要的。

3.  你真的必须使用 pthread 原语吗？`std::thread`通常使用, `std::mutex`（如果你有现代编译器）或`boost::thread`,`boost::mutex`否则更容易和更安全（即异常安全） 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T15:39:58.723

你走在正确的轨道上：

请注意，pthreads 库是 C 库，因此您需要将回调声明为 C 函数：

```
extern "C" void* input(void* arg); 
```

我个人会传递第一个元素的地址：

```
pthread_create(&t1, NULL, &input, &inputarray[0]); 
```

这会让你的代码看起来像这样：

```
void* input(void* arg) {

    try
    {
       char*  inputarray    = (char*)arg;
       size_t inputLocation = 0;

       // Need to make sure you don't over run the buffer etc...
       while(!finished())
       {
          fread(&inputarray[inputLocation],1,2,stdin);
          inputLocation += 2;
       }
    }
    catch(...){} // Must not let exceptions escape a thread.
    return NULL;
} 
```

这种风格的问题在于您将协调的责任放到了每个单独的线程中。写线程必须检查是否结束，读线程必须检查是否有可用数据等。所有这些都需要协调，所以现在您需要一些共享互斥锁和条件变量。

更好的选择是将责任转移到进行通信的对象中。因此，我将创建一个具有通信所需基本操作的类，然后使其方法进行适当的检查。

```
 class Buffer
 {
     public:
        void write(......); //
        void read(.....);   //
     private:
        // All the synchronization and make sure the two threads
        // behave nicely inside the object.
 };

 int main()
 {
       pthread_t threads[3];
       std::pair<Buffer, Buffer>   comms;
       // comms.first     inputToRead
       // comms.second    processesToOutput

       pthread_create(&threads[0], NULL, &readInput, &comms.first);   // Input
       pthread_create(&threads[1], NULL, &procInput, &comms);         // Processing
       pthread_create(&threads[2], NULL, &genOutput, &comms.second);  // Output

       void *result;
       pthread_join(threads[0],&result);
       pthread_join(threads[1],&result);
       pthread_join(threads[2],&result);

 } 
```

作为旁注：

除非您对数据的处理有什么非常奇怪的地方。这可能会更快地编写为单线程应用程序。

# linux - 如何在同一台 PC 上的 2 个进程之间查找套接字原始数据

> ID：12761029
> 
> 赞同：0
> 
> 时间：2012-10-06T15:19:35.303
> 
> 标签：linux, sockets

我有 2 个进程在同一个 Linux 机器上运行，wcich 使用 tcp 套接字连接。我是否可以获得两个进程之间正在交换的原始数据包数据的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:22:26.180

您可以使用[jpcap 之](http://jpcap.sourceforge.net/)类的东西并收听 localhost/loop 返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T17:09:03.260

使用wireshark [http://www.wireshark.org/](http://www.wireshark.org/)并监听本地主机和端口号

# php - php记住一个会话

> ID：12761030
> 
> 赞同：0
> 
> 时间：2012-10-06T15:19:41.170
> 
> 标签：php, session, variables, superglobals

我试图阻止我的 spacebook 页面的用户在没有先登录的情况下导航到其他页面。我知道我应该使用会话变量。我知道我通过输入让用户记住了特定会话`session_start()`；在页面顶部。如果浏览器记住客户端是否登录，是否需要一个新的类文件？会话是否需要存储在类对象中？如果用户在到达那里之前导航到授权访问的页面，我会将所需的 if/else 语句存储在单独的 php 文件中吗？

如果需要一个新课程，我认为它看起来像这样：

```
class Loggedin {
    private $isLoggedIn;

    public function Loggedin($username) {
        if (array_key_exists($username, $this->isLoggedIn) && ($this->isLoggedIn[$username] == $password))
        {
            return true;
        }
        else 
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:25:39.283

用户登录后，您可以简单地将用户 ID 存储在 $_SESSION 变量中，如下所示：

登录.php：

```
if (login_correct($userid, $password)) { 
   // Login successful
   $_SESSION['user_id'] = $userid; 
} 
```

另一个 PHP 文件可能如下所示：

```
if (null !== $_SESSION['user_id']) { 
    // User ist logged in... 
} else { 
    // User is not logged in! 
} 
```

您的 logout.php 可能如下所示：

```
$_SESSION['user_id] = null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:24:38.197

我觉得你*想*太多了。

*   密码的存储时间永远不会超过所需的时间（即初始授权请求，因此您`$password`不是必需的，无论如何都没有定义）。
*   您可以访问`$_SESSION`任何地方。如果你想把它包装在一个类中，这取决于你。
*   身份验证检查很简单`isset($_SESSION['username'])`（假设您在登录时设置了该会话值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T15:25:01.303

PHP 中的`$_SESSION`变量是他们所谓的[超全局变量](http://php.net/manual/en/language.variables.superglobals.php)。这意味着可以从整个应用程序的任何范围访问此变量。只需使用`$_SESSION`.

`$_GET`, `$_POST`,`$_REQUEST`和`$_SERVER`也是如此`$_ENV`。我确定我在某个地方错过了一个：D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T15:25:28.247

记住用户可以很简单（登录成功后）：

```
$_SESSION['userid'] = 1234; 
```

另一个页面会像这样查询它：

```
if (isset($_SESSION['userid'])) {
    // user is logged in
} 
```

无需在会话中存储对象即可完成此操作。

# multithreading - 核心数据嵌套NSManagedObjectContext，如何正确共享和管理数据？

> ID：12761031
> 
> 赞同：2
> 
> 时间：2012-10-06T15:19:51.833
> 
> 标签：multithreading, core-data, nsmanagedobjectcontext, moc

这是我在stackoverflow中的第一篇文章。因为我遇到了即使在google和文档中查找也无法解决的问题。

我有一个小的 iOS 项目，它是一个天气搜索应用程序。基本上总体上很容易实现，但是我必须遵循一些规则：

链接到持久存储（在磁盘上）的后台线程上的一个父上下文；UI 主线程上的一个子上下文；后台线程上的一个子上下文，用于与 Web 服务对话。

看到这个后，我在网上找到了一张图片： ![在此处输入图像描述](../Images/1a1e1753475313799d7c85735e239ff7.png)

此图像显示了该项目究竟应该做什么。我现在遇到的问题很少。

1.  如图所示，我使用`[[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType]`定义我的主 UI MOC，并使用 NSPrivateQueueConcurrencyType 定义我的 webMOC 和 diskMOC。问题是，我应该将所有内容都放入 [UIMOC performBlock: ^{......}] 吗？

2.  我现在很困惑，UI不是在主线程上运行吗？那么 NSMainQueueConcurrencyType 的意义何在？

3.  看了很多文档，发现childMOC和parentMOC之间共享数据的方式要么是让childMOC运行“保存”功能，要么是通过通知调用merge函数。(a) 对于第一个，我需要先 [childMOC save] 然后再做 [parentMOC save] 吗？还是在 [childMOC save] 之后，parentMOC 会自动更新？(b) 我不确定哪种方式更合适。

4.  上图有 3 个级别的 MOC。如果我在最低级别的 MOC 上执行“保存”功能，最高级别的 MOC 可以共享数据吗？

5.  正如我所想，为什么不能将最低级别的MOC与最高级别的MOC结合起来进行读写？同时，中间的UIMOC，是不是必须放到Context的performBlock函数中才能运行NSFetchedResultController？

# java - Java NullPointerException 和简化代码

> ID：12761039
> 
> 赞同：-2
> 
> 时间：2012-10-06T15:21:30.063
> 
> 标签：java, stack-trace

我正在尝试制作一个签到表单，并且我正在尝试将其设计得很好，但我收到了这个错误 NullPointer 异常。这是我的代码：

```
import javax.swing.*;
import javax.swing.border.*;
import java.awt.event.*;
import java.awt.*;
import java.util.*;

public class CheckIn extends JPanel{

    private String[] text = {"  First Name","  Last Name","  Age","  Gender","  Contact No",
            "  Address","  Room Type","  Room No","  Time In","  How many days","  Payment Method"};
    private JPanel designPanel,bottomRightPanel,bottomLeftPanel;
    private String[] genderJCB = {"- Select Gender- ","Male","Female"};
    private String[] roomJCB = {"- Select Room Type -","Classic","Deluxe","Presidential"};
    private JButton submit,cancel;
    private JRadioButton fullRB,depositRB;
    private buttonHandler bh;
    JTextField[] textFields;
    private JComboBox<String> genderBox,roomTypeBox ;
    public CheckIn(){

        //Container settings
        setLayout(null);
        setBackground(new Color(70,70,70));
        //title
        JLabel title = new JLabel("Personal Information",SwingConstants.CENTER);
        title.setBounds(0,0,300,45);
        title.setForeground(Color.ORANGE);
        title.setFont(new Font("Arial",Font.BOLD,13));
        title.setBorder(BorderFactory.createMatteBorder(0,0,1,0,Color.BLACK));  
        add(designPanel());
        add(title);
        //fields
    }
    public JPanel designPanel()
    {
        //Sub container settings
        designPanel = new JPanel( new GridLayout(12,2));
        designPanel.setBounds(0,45,300,505);
        designPanel.setBackground(new Color(80,80,80));
        designPanel.add(bottomLeftPanel());
        designPanel.add(bottomRightPanel());
        return designPanel;
    }
    public JPanel bottomLeftPanel()
    {
        JPanel bottomLeftPanel = new JPanel();
        bottomLeftPanel.setLayout(null);
        bottomLeftPanel.setBorder(BorderFactory.createMatteBorder(1,0,0,0,Color.GRAY));
        bottomLeftPanel.setBackground(new Color(70,70,70));
        bottomButtons();
        return bottomLeftPanel;
    }
    public JPanel bottomRightPanel()
    {
        JPanel bottomRightPanel = new JPanel();
        bottomRightPanel.setLayout(null);
        bottomRightPanel.setBorder(BorderFactory.createMatteBorder(1,0,0,0,Color.GRAY));
        bottomRightPanel.setBackground(new Color(70,70,70));
        bottomButtons();
        return bottomRightPanel;
    }
    public void bottomButtons()
    {
        bh = new buttonHandler();
        cancel = new JButton("Cancel");
        cancel.setBounds(25,4,100,32);
        cancel.addActionListener(bh);
        bottomLeftPanel.add(cancel);
        submit = new JButton("Submit");
        submit.setBounds(25,4,100,32);
        submit.addActionListener(bh);
        bottomRightPanel.add(submit);
    }
    public void components()
    {
        JLabel[] labels = new JLabel[text.length];
        JTextField[] textFields = new JTextField[text.length];
        JPanel[] containerPanel = new JPanel[text.length];

        for(int x = 0; x < text.length; x++){
            //labels
            labels[x] = new JLabel(text[x]);
            labels[x].setForeground(Color.WHITE);
            labels[x].setBorder(new CompoundBorder(BorderFactory.createMatteBorder(1, 0, 0, 0, Color.GRAY),
                    BorderFactory.createMatteBorder(0, 0, 1, 0, Color.BLACK)));
            designPanel.add(labels[x]);
            containerPanel[x]= new JPanel();
            containerPanel[x].setLayout(null);
            containerPanel[x].setBackground(new Color(80,80,80));
            containerPanel[x].setBorder(new CompoundBorder(BorderFactory.createMatteBorder(1, 0, 0, 0, Color.GRAY),
                    BorderFactory.createMatteBorder(0, 0, 1, 0, Color.BLACK)));
            designPanel.add(containerPanel[x]);
            //text fields and etc
            if(x==3){
                genderBox = new JComboBox(genderJCB);
                genderBox.setBounds(0,10,120,25);
                genderBox.setBackground(Color.WHITE);
                containerPanel[x].add(genderBox);
            }
            else if(x==6){
                roomTypeBox = new JComboBox(roomJCB);
                roomTypeBox.setBounds(0,10,145,25);
                roomTypeBox.setBackground(Color.WHITE);
                containerPanel[x].add(roomTypeBox);
            }
            else if(x==8){
                SpinnerDateModel model = new SpinnerDateModel();
                model.setCalendarField(Calendar.MINUTE);
                JSpinner spinner= new JSpinner();
                spinner.setModel(model);
                spinner.setEditor(new JSpinner.DateEditor(spinner, "h:mm a  "));
                spinner.setBounds(0,10,145,25);
                  containerPanel[x].add(spinner);
            }
            else if (x==10){
                ButtonGroup group = new ButtonGroup();
                fullRB = new JRadioButton("Full");
                fullRB.setBounds(0,10,50,25);
                fullRB.setBackground(new Color(80,80,80));
                fullRB.setForeground(Color.white);
                depositRB = new JRadioButton("Deposit");
                depositRB.setBounds(60,10,70,25);
                depositRB.setBackground(new Color(80,80,80));
                depositRB.setForeground(Color.white);
                group.add(fullRB);
                group.add(depositRB);
                containerPanel[x].add(fullRB);
                containerPanel[x].add(depositRB);
            }
            else {
            textFields[x] = new JTextField();
            textFields[x].setBounds(0,10,145,25);
            containerPanel[x].add(textFields[x]);
            }   
        }
    }

    private class buttonHandler implements ActionListener{
        public void actionPerformed(ActionEvent e){

            if(e.getSource() == cancel){

            }   
            else if(e.getSource() == fullRB){

            }
        }
    }

} 
```

对不起，如果我的工作如此混乱。我正在尽力简化它。这就是我想出的。我怎样才能简化我的代码？以及如何解决我的错误。请帮助和抱歉一个菜鸟问题。这是堆栈跟踪：

```
Exception in thread "main" java.lang.NullPointerException
    at CheckIn.bottomButtons(CheckIn.java:73)
    at CheckIn.bottomLeftPanel(CheckIn.java:55)
    at CheckIn.designPanel(CheckIn.java:45)
    at CheckIn.<init>(CheckIn.java:30)
    at HotelMainGUI.leftForms(HotelMainGUI.java:118)
    at HotelMainGUI.leftPanel(HotelMainGUI.java:112)
    at HotelMainGUI.subFrame(HotelMainGUI.java:32)
    at HotelMainGUI.<init>(HotelMainGUI.java:21)
    at HotelMainGUI.main(HotelMainGUI.java:189) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:38:34.867

你`NullPointerException`来是因为这些代码序列：

```
 CheckIn.designPanel() -> bottomLeftPanel() ->  bottomButtons() 
```

在里面`bottomButons()`，你有一行：

```
 bottomRightPanel.add(submit); 
```

此时，您`bottomRightPanel`尚未初始化。

改变`designPanel`方法如下：

```
 public JPanel designPanel() {
    //Sub container settings
    designPanel = new JPanel( new GridLayout(12,2));
    designPanel.setBounds(0,45,300,505);
    designPanel.setBackground(new Color(80,80,80));
    designPanel.add(bottomRightPanel());
    designPanel.add(bottomLeftPanel());
    return designPanel;
} 
```

`designPanel.add(bottomRightPanel());`之前搬过`designPanel.add(bottomLeftPanel());`

希望这能解决您的问题。

此外，还有很大的代码重构空间，例如在你的`bottomRightPanel`and`bottomLeftPanel`中，下面的语句似乎很常见或至少相似。在这种情况下，您可以创建一个方法，如下所示：

```
 public JPanel createPanel(){
    JPanel panel = new JPanel();
    panel.setLayout(null);
    panel.setBorder(BorderFactory.createMatteBorder(1,0,0,0,Color.GRAY));
    panel.setBackground(new Color(70,70,70));
    return pannel;
} 
```

并在您的方法中添加其他步骤，`designPanel()`例如：

```
 public JPanel designPanel() {
    //Sub container settings
    designPanel = new JPanel( new GridLayout(12,2));
    designPanel.setBounds(0,45,300,505);
    designPanel.setBackground(new Color(80,80,80));
    JPanel leftPanel = createPanel();
    JPanel rightPanel = createPanel();
    createBottomButtons(leftPanel, rightPanel);
    designPanel.add(leftPanel );
    designPanel.add(rightPanel);
    return designPanel;
} 
```

如果您注意到我删除了`bottomButtons();`from `createPanel()`，则添加了`designPanel()`. 也将`leftPanel`and`rightPanel`作为参数传递给此方法。

我希望你可以自己进行剩余的重组。祝你好运！！

# objective-c - UICollectionView 的 indexPath 值

> ID：12761040
> 
> 赞同：5
> 
> 时间：2012-10-06T15:21:30.137
> 
> 标签：objective-c, ios, nsindexpath, uicollectionview

使用 UICollectionView 时，我对获取方法的`indexPath`值感到困惑`didSelectItemAtIndexPath`。

我在方法中使用了以下代码行`didSelectItemAtIndexPath`：

```
//FileList is an NSArray of files from the Documents Folder within my app.
//This line gets the indexPath of the selected item and finds the same index in the Array
NSString *selectedItem = [NSString stringWithFormat:@"%@",[FileList objectAtIndex:indexPath.item]];

//Now the selected file name is displayed using NSLog
NSLog(@"Selected File: %@", selectedItem); 
```

问题是**indexPath 总是返回 0**（见下面的代码），因此只有 FileList NSArray 中的第一项被选中。

我尝试了不同的参数，例如

*   `indexPath.row`
*   `indexPath.item`
*   而且很简单`indexPath`

在以下 NSLog 语句中，所有这些都返回 0 值：

```
NSLog(@"index path: %d", indexPath.item); //I also tried indexPath.row here 
```

也许我只是不正确地格式化 NSString，但是我不认为是这种情况，因为没有警告，我尝试在其他地方以不同的方式格式化它。

**为什么 indexPath 总是返回 0？**

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-14T14:39:26.530

冒着说明显而易见的风险，请确保您的代码在`didSelectItemAtIndexPath`方法中而不是`didDeselectItemAtIndexPath`. 在后一种方法中，对于给定的触摸事件，您将获得非常不同`indexPath`的值，并且很容易使用 Xcode 的代码完成插入错误的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:44:09.673

您使用的委托方法始终提供所选单元格的索引路径。尝试在 NSLog 调用上使用断点进行调试。当调试器停止时，查看底部的调试区域并使用控制台（如果需要，查看 => 调试区域 => 激活控制台）。

在控制台中输入：`po indexPath`

如果所选项目是 section:0 中列表的第 5 个（第一部分，可能是唯一一个），您应该会看到类似的内容

`<NSIndexPath 0xa8a6050> 2 indexes [0, 5]`

希望这有助于弄清楚发生了什么。

# java - Java线程在相同数据上执行

> ID：12761043
> 
> 赞同：1
> 
> 时间：2012-10-06T15:22:18.003
> 
> 标签：java, multithreading

首先是代码，你可以复制粘贴

```
import java.util.ArrayList;

public class RepetionCounter implements Runnable{
private int x;
private int y;
private int[][] matrix;
private int xCounter;
private int yCounter;
private ArrayList<Thread> threadArray;
private int rowIndex;
private boolean[] countCompleted; 

public RepetionCounter(int x, int y, int [][]matrix)
{
    this.x = x;
    this.y = y;
    this.matrix = matrix;
    this.threadArray = new ArrayList<Thread>(matrix.length);
    this.rowIndex = 0;
    for(int i = 0; i < matrix.length; i++){
        threadArray.add(new Thread(this));
    }
    countCompleted = new boolean[matrix.length];
}

public void start(){
    for (int i = 0; i < threadArray.size(); i++){
        threadArray.get(i).start();
        this.rowIndex++;
    }
}

public void count(int rowIndex)
{
    for(int i = 0; i < matrix[rowIndex].length; i++){
        if (matrix[rowIndex][i] == x){
            this.xCounter++;
        } else if (matrix[rowIndex][i] == y){
            this.yCounter++;
        }
    }
}

@Override
public void run() {
    count(this.rowIndex);
    countCompleted[this.rowIndex] = true;
}

public int getxCounter() {
    return xCounter;
}

public void setxCounter(int xCounter) {
    this.xCounter = xCounter;
}

public int getyCounter() {
    return yCounter;
}

public void setyCounter(int yCounter) {
    this.yCounter = yCounter;
}

public boolean[] getCountCompleted() {
    return countCompleted;
}

public void setCountCompleted(boolean[] countCompleted) {
    this.countCompleted = countCompleted;
}

public static void main(String args[]){
    int[][] matrix = {{0,2,1}, {2,3,4}, {3,2,0}};
    RepetionCounter rc = new RepetionCounter(0, 2, matrix);
    rc.start();
    boolean ready = false;
    while(!ready){
        for(int i = 0; i < matrix.length; i++){
            if (rc.getCountCompleted()[i]){
                ready = true;
            } else {
                ready = false;
            }
        }
    }
    if (rc.getxCounter() > rc.getyCounter()){
        System.out.println("Thre are more x than y");
    } else {System.out.println("There are:"+rc.getxCounter()+" x and:"+rc.getyCounter()+" y");

    }
}

} 
```

我想要这段代码做什么：我给对象一个矩阵和两个数字，我想知道这两个数字在矩阵中出现了多少次。我创建了与矩阵的行数一样多的线程（这就是为什么会有那个 ArrayList），所以在这个对象中我有 k 个线程（假设 k 是行数），每个线程都计算两者的出现次数数字。问题是：如果我第一次运行它，一切正常，但是如果我再次尝试执行它，我得到了 IndexOutOfBoundException，或者出现次数错误，奇怪的是，如果我得到错误，并修改代码，之后它将再次工作一次。你能向我解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:29:58.680

您需要为每个线程提供自己的 Runnable。让它们都共享同一个 Runnable 将导致灾难性的竞争条件。将每个线程需要执行的逻辑分离到一个 Runnable 中。然后将启动线程的部分代码移动到 Runnable 之外的位置。

顺便说一句，查看 java.util.concurrent 包中的 Executors，你不必为这些东西使用原始线程。此外，使用 Executors 可以让您更好地了解将进入任务的内容与其他内容分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T15:30:18.210

您`RepetitionCounter`为每个线程使用相同的实例：

```
for(int i = 0; i < matrix.length; i++){
    threadArray.add(new Thread(this));
} 
```

所以他们都将共享相同的`rowIndex`。代码本身非常混乱，所以我建议您将线程的逻辑封装在一个单独的`Runnable`类中，并使用单独的行 ID：

```
class ThreadTask implements Runnable {
    private int rowId;
    private int[][] matrix;

    public ThreadTask(int[][] matrix, int rowId) {
        this.matrix = matrix; // only a reference is passed here so no worries
        this.rowId = rowId;
    }

    public void run() {
       // search on my row
    }
} 
```

然后：

```
for(int i = 0; i < matrix.length; i++) {
     threadArray.add(new Thread(new ThreadTask(matrix, i)));
} 
```

# javascript - 在 tinybox 中加载 js/jq

> ID：12761046
> 
> 赞同：0
> 
> 时间：2012-10-06T15:23:14.797
> 
> 标签：javascript, jquery

我正在使用 Tinybox 加载一些内容，我需要从 tinybox 中加载 js 文件。

我可以从 tinybox 里面加载一个新的 tinybox。

我无法加载与 js 相关的任何其他内容。

我读过有人建议使用 .on() - 虽然我没有看到让我的头脑理解它应该如何工作的文档。

```
 <p onclick="TINY.box.show({url:'product.php?id=<?php echo $id; ?>',width:650,height:550})">Read More</p> 
```

我尝试使用 iframe 加载，因为我确实看到该站点的其他人告诉他以这种方式提出了解决方案。虽然他的解决方案对我来说毫无意义。我尝试了以下 iframe。

iframe 加载，我也找不到如何将 js 加载到其中的解决方案。

```
<p onclick="TINY.box.show({iframe:'product.php?id=<?php echo $id; ?>',boxid:'frameless',width:650,height:550,fixed:false,maskid:'bluemask',maskopacity:40,closejs:function(){closeJS()}})" >Read More</p> 
```

提前致谢。

**除了寻找解决方案..

索引.php

```
 ..<script type="text/javascript" charset="utf-8" src="js/jquery.rateit.js"></script>    
<script type="text/javascript" charset="utf-8" src="js/yepnope.1.5.4.min.js"></script>..    

 <div class="rateit">This is a working star rating</div>

$Post(search.php).. 
```

** Search.php（相同的窗口（index.php） - 不同的 div）

```
Grid list While.. <div class="rateid">STAR RATING ONLY WORKING WHEN script is included</div> <script type="text/javascript" charset="utf-8" src="js/jquery.rateit.js"></script><script type="text/javascript" charset="utf-8" src="js/yepnope.1.5.4.min.js"></script>

        <p onclick="TINY.box.show({url:'product.php?id=<?php echo $id; ?>',width:650,height:550})">Read More</p>

    <script>
        yepnope.injectJs("js/jquery.rateit.js", function () 
        {
        alert('File Loaded');
        }, {
        charset: "utf-8"
        }, 5000);
        </script> 
```

** Product.php（加载内容）

```
<div class="rateid">THIS IS NOT WORKING</div>    <p onclick="TINY.box.show({url:'product.php?id=<?php echo $id; ?>',width:650,height:550})">THIS IS WORKING!</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:43:26.420

you're loading product.php?id=? include `<script src="yourjavascriptfilehere" ></script>` into response of product.php?id=

if that doesn't work due specification of tinybox then use this [http://yepnopejs.com/](http://yepnopejs.com/) library and include this code into your product.php?id= response

```
<script>
yepnope.injectJs("file.js", function () 
{
  alert('file loaded');
}, {
  charset: "utf-8"
}, 5000);
</script> 
```

doing iframes should not be necessary

# mysql - 多子查询计数功能无法承受多选的压力

> ID：12761052
> 
> 赞同：1
> 
> 时间：2012-10-06T15:23:56.367
> 
> 标签：mysql, sql, count

这让我很难过。

**MySQL**

```
UPDATE sets SET sets.current_count = (SELECT COUNT(leads_auto.set_id) AS current_count FROM leads_auto WHERE leads_auto.set_id =  (SELECT sets.set_id AS setID FROM sets WHERE sets.on_off = 0)) WHERE sets.on_off = 0 
```

似乎是对的不是吗？使用列值为 0的表的值为0的`current_count`总行数更新记录。`leads_auto``set_id``set_id``sets``on_off`

**但我得到这个错误**

```
#1093 - You can't specify target table 'sets' for update in FROM clause 
```

我环顾四周，有人提到这与循环操作有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:27:36.433

为结果创建一个临时表`SET`

```
UPDATE sets
SET sets.current_count = 
                (
                SELECT COUNT(leads_auto.set_id) AS current_count
                FROM leads_auto
                WHERE leads_auto.set_id = 
                                (
                                    SELECT set_id
                                    FROM
                                    (
                                        SELECT sets.set_id AS setID
                                        FROM sets
                                        WHERE sets.on_off = 0
                                    ) c
                                )
                )
WHERE sets.on_off = 0 
```

# ruby - Ruby 如何使用符号来引用变量名？

> ID：12761053
> 
> 赞同：4
> 
> 时间：2012-10-06T15:23:55.757
> 
> 标签：ruby, metaprogramming

`name`当我们在下面的代码中定义 getter 和 setter 方法时：

```
class Animal
    attr_accessor :name
    def initialize(name)
        @name = name
    end
end 
```

内部发生了什么？Ruby 如何获取符号并将其与变量匹配？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T15:26:33.100

它使用[`instance_variable_get`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-instance_variable_get)and [`instance_variable_set`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-instance_variable_set)。

**更新**：正如安德鲁马歇尔所说，不完全是。大多数 ruby​​ 核心方法都是用 C 定义的，但结果基本相同。

可以定义`attr_accessor`和朋友如下：

```
def self.attr_accessor(*names)
  names.each do |name|
    define_method(name) do
      instance_variable_get("@#{name}")
    end

    define_method("#{name}=") do |new_value|
      instance_variable_set("@#{name}", new_value)
    end
  end
end 
```

请注意，我在[`define_method`](http://ruby-doc.org/core-1.9.3/Module.html#method-i-define_method)这里也使用了定义访问器方法。

我建议您看一些关于 Ruby 元编程的介绍性文章，例如[“不知道 Ruby 中的元编程？”](http://rubylearning.com/blog/2010/11/23/dont-know-metaprogramming-in-ruby/) .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T15:28:40.533

它与变量不匹配，`attr_accessor`本质上是这样做的（它实际上是用 C 编写的，但我在这里写的大致是 Ruby 翻译）：

```
def attr_accessor(var_name)
  ivar_name = :"@#{var_name}"
  define_method(var_name) do
    instance_variable_get ivar_name
  end
  define_method("#{var_name}=") do |value|
    instance_variable_set ivar_name, value
  end
end 
```

如您所见，它只是使用传递的符号来创建两个方法。它并没有对符号做任何花哨的事情，而且大多只是通过它。另请注意，所有实例变量默认“存在”并设置为`nil`，因此这永远不会爆炸。

# user-agent - 如何检测Android 4.0原生浏览器？

> ID：12761068
> 
> 赞同：0
> 
> 时间：2012-10-06T15:26:06.243
> 
> 标签：user-agent

Android v4 上的默认用户代理是：

> Mozzila/5.0 (x11;linux x86_64) Applewebkit/534.24(KHTML, like Gecko) Chrome/11.0.696.34 Safari/534.24

如何用 php 检测它，但只能在移动设备上检测？

# iphone - 在我的应用程序中购买现实生活中的东西

> ID：12761073
> 
> 赞同：0
> 
> 时间：2012-10-06T15:26:26.733
> 
> 标签：iphone, objective-c, ios, ipad

大家好，我可以在我的应用程序内购买一件 T 恤之类的东西吗，我知道`In App Purchase`这行不通，因为 T 恤是现实生活中的东西，但我不希望像在 Safari 中那样在应用程序之外付款。我喜欢在我的应用程序内付款，注册信用卡并购买商品，就像这个应用程序一样，这个应用程序`Amazon, Airbnb`内的付款是如何运作的？

我已经阅读了很多关于这方面的信息，所有人都说在应用程序内付款的唯一方法是使用`In App Purchase`但我提到的这个应用程序是如何工作的，因为我可以在这个应用程序内付款。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:30:08.273

您可以利用多种系统。你可以看看[Paypal 的 IPN](https://www.paypal.com/ipn)和[Google Checkout](https://developers.google.com/checkout/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:36:46.063

PayPal API 是免费的，[在这里](https://stackoverflow.com/questions/8584063/paypal-api-how-to-integrate-it-in-my-app-ios5)你可以找到一个很好的例子来说明如何集成它。最重要的是，您不得将 PayPal API 用于数字商品...

[还有](https://stackoverflow.com/questions/779423/has-anyone-implemented-the-paypal-api-through-a-native-iphone-app)一个

# svn - SVN 签出失败，协议 svn+ssh

> ID：12761074
> 
> 赞同：5
> 
> 时间：2012-10-06T15:26:30.197
> 
> 标签：svn, powerbuilder, agent

我正在使用带有 build 2511 的 PowerBuilder 12.5。我正在使用代理 SVN 连接到远程 svn 服务器。服务器路径类似于“svn+ssh://user@domain/project/trunk”。在这里我的问题是我无法从服务器签出文件，但我能够将文件签入服务器。在检查出它给错误检查失败。当我从服务器检查文件时，任何人都可以帮助解决问题吗？

我可以使用带有“file://”协议的本地 SVN 存储库从 Power Builder 签出文件。但我无法使用 'svn+ssh://' 协议从远程 SVN 服务器签出文件。

这是我从服务器签出文件时的 Power Builder 日志文件

- - - - - - - - - - - - - - - - - - 开始 - - - - - - - -----------------

签出所选项目... 代理 SVN 信息：代理 SVN 信息：SccCheckout

代理 SVN 信息：* 命令：svn.exe --non-interactive --show-updates --verbose status w_login.srw

代理 SVN 信息：* 目录：C:\Workspace\

代理 SVN：进程已启动。

代理 SVN：进程正在运行....

代理 SVN 信息：16752 16456 suresh.vadlamudi w_login.srw

代理 SVN 信息：针对修订的状态：16753

代理 SVN：进程完成，退出代码：0

代理 SVN 信息：结果：0

代理 SVN 信息：* 命令：svn.exe --non-interactive lock w_login.srw

代理 SVN 信息：* 目录：C:\Workspace

代理 SVN：进程已启动。

代理 SVN：进程正在运行....

代理 SVN 信息：“w_login.srw”被用户“suresh.vadlamudi”锁定。

代理 SVN：进程完成，退出代码：0

代理 SVN 信息：结果：0

代理 SVN 信息：SccFileApplyLock：假

代理 SVN 信息：

代理 SVN 信息：SccQueryInfo

代理 SVN 信息：* 命令：svn.exe --non-interactive --verbose status w_login.srw

代理 SVN 信息：* 目录：C:\Workspace\

代理 SVN：进程已启动。

代理 SVN：进程正在运行....

代理 SVN 信息：* 命令：svn.exe --non-interactive info C:\Workspace\w_login.srw

代理 SVN 信息：* 目录：

代理 SVN：进程已启动。

代理 SVN：进程正在运行....

代理 SVN 信息：路径：w_login.srw

代理 SVN 信息：名称：w_login.srw

代理 SVN 信息：工作副本根路径：C:\Workspace

代理 SVN 信息： URL：svn+ssh://user@domain/code/svnrep/project/trunk/w_login.srw

代理 SVN 信息：存储库根目录：svn+ssh://user@domain/code/svnrep

代理 SVN 信息：存储库 UUID：cea4ba45-7404-0410-9282-c9295b884410

代理 SVN 信息：修订：16752

代理 SVN 信息：节点种类：文件

代理 SVN 信息： 时间表： 正常

代理 SVN 信息：上次更改作者：suresh.vadlamudi

代理 SVN 信息：上次更改版本：16456

代理 SVN 信息：最后更改日期：2012-10-08 06:46:05 -0700（2012 年 10 月 8 日星期一）

代理 SVN 信息：文本最后更新时间：2012-10-08 22:12:26 -0700（2012 年 10 月 8 日星期一）

代理 SVN 信息：校验和：51183433912df60b7ac03afc5eb7111c41783af8

代理 SVN 信息：锁定令牌：opaquelocktoken:b9ab6225-9234-4c95-8955-a9f9f18f2972

代理 SVN 信息：锁所有者：suresh.vadlamudi

代理 SVN 信息：锁定创建时间：2012-10-08 22:13:31 -0700（2012 年 10 月 8 日星期一）

代理 SVN 信息：

代理 SVN：进程完成，退出代码：0

代理 SVN 信息：结果：0

代理 SVN 信息：K 16752 16456 suresh.vadlamudi w_login.srw

代理 SVN：进程完成，退出代码：0

代理 SVN 信息：结果：0

代理 SVN 状态：文件：'w_login.srw' 状态：15

C:\Workspace\w_login.srw 的 SccCheckout 似乎失败了。

操作完成

- - - - - - - - - - - - - - - - - - - 结尾 - - - - - - --------------------------------

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:09:35.043

我是*Agent SVN*的作者。通常，当插件在文件模式下工作但在服务器模式下不工作时，问题将是权限错误。

如果您参考[Power Builder](http://zeusedit.com/agent/pb/classic.html)设置，您会注意到在*Power Builder Workspace*设置中您需要提供用户 ID。

这是用于连接到 SVN 服务器的用户 ID，因此您需要确保此用户 ID 正确，并且在服务器上也正确配置。

最后，最新版本的*Agent SVN*（版本 2.25 或更高版本）在标记用户 ID 问题方面做得更好，确保您正在运行此版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T14:22:03.580

You should try to checkout the whole source with a GUI for SVN (for example: [TortoiseSVN](http://tortoisesvn.net/downloads.html) )

If you can do this, then the problem is with your Agent SVN for PB.

As an alternative you can try PBSCC proxy, which is a good SVN client for PowerBuilder too. We've been using it for 4 years from PB 10 - till the most recent version PB 12.5.1 with the latest build without any major bug. This can be downloaded from [here](http://dm.char.com.ua/pb/pbscc/pbscc.htm).

And this solution is free :)

I hope it helps! Have a nice day!

Br.: Gábor

# mysql - VARCHAR(1500) 与文本 | UTF-8 编码

> ID：12761079
> 
> 赞同：1
> 
> 时间：2012-10-06T15:27:11.093
> 
> 标签：mysql, text, utf-8, varchar

我想在 MySql innoDB 表中存储不同语言（utf-8 编码）的短语。平均数据长度总是小于 100 个字，所以这将是我的最大限制（14 个字符 + 空白），这使得每个短语的最大长度为 1500 个字符。

假设 MySql 允许超过 65000 个字节，并且每个 utf-8 字符将需要大约 3 或 4 个字节，则 VARCHAR(1500) 是*可能的*。[1500 字符 * 4 字节/字符 = 60000 字节]

我的问题是，这和使用 TEXT 值有什么区别？我知道 VARCHAR 接受**Default**值（与*NULL*不同），但我需要更多差异......什么**更好**（排序更有效，存储更有效 - 反之亦然）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:36:34.133

我相信 VARCHAR 和 TEXT 之间的主要区别在于 VARCHAR 是固定大小。这将使字段上的任何操作比处理任何类型的动态大小的数据更有效。

除此之外，不确定有多大区别。随意筹码！:)

# java - 在java中输入数字集 - 空指针异常

> ID：12761081
> 
> 赞同：0
> 
> 时间：2012-10-06T15:27:28.863
> 
> 标签：java, nullpointerexception

```
import java.util.Scanner;
import java.lang.Integer;
public class points{
    private class Vertex{
        public int xcoord,ycoord;
        public Vertex right,left;
    }    
    public points(){
        Scanner input = new Scanner(System.in);
        int no_of_pts = Integer.parseInt(input.nextLine());
        Vertex[] polygon = new Vertex[no_of_pts];        
        for(int i=0;i<no_of_pts;i++){
            String line = input.nextLine();
            String[] check = line.split(" ");           
            polygon[i].xcoord = Integer.parseInt(check[0]);
            polygon[i].ycoord = Integer.parseInt(check[1]);
        }    
    }    
    public static void main(String[] args){
        new points();    
    }    
} 
```

这是一个非常简单的程序，我想在系统中输入 n 个点及其 x 和 y 坐标

```
Sample Input :
3
1 2
3 4
5 6 
```

然而，在输入 "1 2" 后，它会抛出一个 NullPointerException 。我使用 Java 调试发现令人不安的线是

```
polygon[i].xcoord = Integer.parseInt(check[0]); 
```

但是检查变量正确显示 '1' 和 '2' 。怎么了？

**编辑**：感谢答案，我意识到我必须将数组的每个元素初始化为一个新对象

```
polygon[i] = new Vertex(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T15:29:12.207

因为数组中的顶点引用为空。

```
import java.util.Scanner;
import java.lang.Integer;
public class points{
    private class Vertex{
        public int xcoord,ycoord;
        public Vertex right,left;
    }    
    public points(){
        Scanner input = new Scanner(System.in);
        int no_of_pts = Integer.parseInt(input.nextLine());
        Vertex[] polygon = new Vertex[no_of_pts];        
        for(int i=0;i<no_of_pts;i++){
            String line = input.nextLine();
            String[] check = line.split(" "); 
            polygon[i] = new Vertex(); // this is what you need.          
            polygon[i].xcoord = Integer.parseInt(check[0]);
            polygon[i].ycoord = Integer.parseInt(check[1]);
        }    
    }    
    public static void main(String[] args){
        new points();    
    }    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T15:33:28.077

多边形[i] 为空，因为它尚未初始化

# wcf - 如何在这种情况下扩展 WCF 服务

> ID：12761084
> 
> 赞同：0
> 
> 时间：2012-10-06T15:27:48.910
> 
> 标签：wcf

我有一个可以跟踪车辆的应用程序。车辆可以随时更改位置、出现或消失。为了始终保持最新状态，应用程序每 3 秒向服务器发送当前在地图上可见的区域，服务器会以特定区域内的车辆列表进行响应。

问题：当我有一个包含 1000 辆汽车的数据库和每 3 秒向服务器发送 10000 个请求时会发生什么？您将如何使用 WCF 解决这个可伸缩性问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:05:41.363

有几件事要做

**在客户端**

正如 Joachim 所说，尝试限制来自客户端的请求。我不确定车辆是否会每 3 秒显着移动一次。最终，尝试将位置和其他信息批量合并。

**在服务器端**

> 问题：当我有一个包含 1000 辆汽车的数据库和每 3 秒向服务器发送 10000 个请求时会发生什么？您将如何使用 WCF 解决这个可伸缩性问题？

回答这个问题的最好方法是进行负载测试。结果很大程度上取决于您的服务实施。如果你的请求时间超过 1 秒，你肯定会遇到性能问题。

您还可以在服务后面添加一个队列来处理请求，甚至可以将您的服务部署在许多服务器上，以便在不同服务器之间分派请求。

# javascript - 删除表单时如何覆盖jQuery验证

> ID：12761088
> 
> 赞同：-1
> 
> 时间：2012-10-06T15:28:02.180
> 
> 标签：javascript, jquery, validation, jquery-validate

> **可能重复：**
> [jQuery 验证插件：禁用指定提交按钮的验证](https://stackoverflow.com/questions/203844/jquery-validation-plugin-disable-validation-for-specified-submit-buttons)

我有一个表单，它成功地使用 jQuery Validation 来检查表单上的字段，在我的网站上创建/编辑一个条目（如果你真的关心的话，一个 Drupal 节点）。我正在尝试进行设置，以便在用户单击“保存”按钮时获得正常验证，而不是在用户单击“删除”时获得正常验证——如果事情正在发生，没有理由坚持完整的表格删除。我能够在 invalidHandler 子句中捕获无效检测，但是如果单击的是删除按钮，我找不到告诉表单提交继续的正确方法。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:32:45.337

该[文档](http://docs.jquery.com/Plugins/Validation/Reference)指出以下内容：

> 要在仍然使用提交按钮的同时跳过验证，请在该输入中添加一个 class="cancel"。

因此，请尝试应用该课程。

# security - 如何使用 ImageMagick 测试接收到的输入是否是图像（出于安全目的）？

> ID：12761089
> 
> 赞同：3
> 
> 时间：2012-10-06T15:28:03.677
> 
> 标签：security, imagemagick

想象一个环境，用户可以通过从他们的 PC 上传图像或引用远程 URL 将图像上传到网站。

作为一些安全检查的一部分，我想确保引用的对象确实是一个图像。

对于远程 URL，我当然会检查内容类型，但这不是防弹的。

我想我可以使用 ImageMagick 来完成这项任务。也许执行 ImageMagick.identify() 方法，如果没有返回错误并且返回类型是 JPG|GIF| 等。内容是图像。（在快速检查中，我注意到 TXT 文件也被正确识别，所以我必须将这些文件列入黑名单）

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:56:30.963

您可能可以简单地通过 ImageMagick 的适当功能加载图像，以适应您选择的语言。如果图像格式不正确（就内部格式而言，而不是其美学属性），我希望 ImageMagick 拒绝加载它并报告错误。例如，在 PHP 中，如果图像加载失败，readImage 将返回 false。

或者，您可以读取文件的前几百个字节并确定是否存在预期的图像文件格式头；例如，“GIF89”等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:39:53.727

如果您的图像采用可压缩格式（PNG、GIF）并且其构造方式类似于 zip 炸弹[https://en.wikipedia.org/wiki/Zip_bomb ，这些检查可能会适得其反](https://en.wikipedia.org/wiki/Zip_bomb)

[ftp://ftp.aerasec.de/pub/advisories/decompressionbombs/pictures/](ftp://ftp.aerasec.de/pub/advisories/decompressionbombs/pictures/)的一些例子（那个网站没什么特别的，我只是用谷歌搜索了减压炸弹）

另一个相关问题是，像 SVG 这样的格式实际上是 XML，一些图像处理工具容易受到“十亿笑”攻击的变体[https://en.wikipedia.org/wiki/Billion_laughs](https://en.wikipedia.org/wiki/Billion_laughs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T15:57:46.190

您不应该存储原始文件。通常推荐的方法是*始终*重新处理图像并将其转换为全新的文件。在有效的图像文件中存在漏洞（参见[GIFAR](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-5343)），因此对此进行检查是没有用的。

切勿让您的访问者看到您自己没有写出的图像文件，并且您自己也没有为其选择文件名。

# c++ - 如何获取圆的半径值

> ID：12761091
> 
> 赞同：1
> 
> 时间：2012-10-06T15:28:11.930
> 
> 标签：c++, opencv, gaussian, hough-transform, iris-recognition

对于霍夫圆变换，当我检测到圆时，如何获得圆的半径和中心点的值？我正在做一个虹膜识别系统。

```
CvSeq* circles = cvHoughCircles(grayscaleImg,
                     storage,
                     CV_HOUGH_GRADIENT,
                     2,
                     grayscaleImg->height/4,
                     200,
                 100 );

for (i = 0; i < circles->total; i++) 
{
     float* p = (float*)cvGetSeqElem( circles, i );
     cvCircle( capturedImg, cvPoint(cvRound(p[0]),cvRound(p[1])), 
        3, CV_RGB(0,255,0), -1, 8, 0 );
     cvCircle( capturedImg, cvPoint(cvRound(p[0]),cvRound(p[1])), 
         cvRound(p[2]), CV_RGB(0,0,255), 3, 8, 0 );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:42:31.427

中心点：`cvPoint(cvRound(p[0]),cvRound(p[1]))`

半径 ：`cvRound(p[2])`

# php - 如何使用自定义频率音/波创建 .wav 文件？

> ID：12761094
> 
> 赞同：4
> 
> 时间：2012-10-06T15:28:24.770
> 
> 标签：php, audio, wav, wave

我的波形发生器有问题。我正在尝试创建一个具有给定频率声音的 .wav 文件。我使用的代码：

```
$freqOfTone = 21000;
$sampleRate = 44100;
$samplesCount = 80000;

$amplitude = 0.25 * 32768;
$w = 2 * pi() * $freqOfTone / $sampleRate;

for ($n = 0; $n < $samplesCount; $n++)
{
    $data->samples[1][] = 32768 + (int)($amplitude *  sin($n * $w));
} 
```

不幸的是，输出波不正确，我得到的频率很少而不是一个：http: [//i49.tinypic.com/ab1nx0.png](http://i49.tinypic.com/ab1nx0.png)

它应该看起来像这样：http: [//i50.tinypic.com/33zbslk.png](http://i50.tinypic.com/33zbslk.png)

我在哪里做错了什么？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:15:41.293

鉴于该采样率，所需频率太接近[奈奎斯特频率](http://en.wikipedia.org/wiki/Nyquist_frequency)而无法正确采样。我建议您为此使用 96kHz 的采样率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:21:46.480

我最终取得了一些成就，但我的解决方案与我的意思有点不同......无论如何，我采集了样本并将它们通过高通频率滤波器。信号有点失真，但对于我的目的来说仍然足够好:)

# php - PHP UTF-8 file_put_contents

> ID：12761095
> 
> 赞同：1
> 
> 时间：2012-10-06T15:28:26.147
> 
> 标签：php, utf-8, file-get-contents

我想要 PHP 中的 UTF-8 HTML 文件：

```
$html = file_get_contents ( 'http://google.com/' );
file_put_contents ( 'utf8.html', $html );
// Is not UTF-8\. It is ISO-8859-1\. I would like UTF-8. 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:33:22.740

您可以使用如下

```
$html = file_get_contents ('http://google.com/' ); 
file_put_contents('utf8.html', utf8_encode($html)); 
```

# cocos2d-iphone - 在图层中使用 SneakyJoystick 来控制不同图层中的游戏角色

> ID：12761096
> 
> 赞同：0
> 
> 时间：2012-10-06T15:28:34.673
> 
> 标签：cocos2d-iphone, box2d, joystick

我想要实现的是能够在我的 box2d/cocos2d 游戏中使用 Cocos2d SneakyInput SneakyJoystick 来控制我的 LHSprite（使用关卡助手创建）角色/播放器的移动。

我可以让它工作，但是，sneakyJoystick 操纵杆与我的游戏在同一层，并且看起来好像我的游戏屏幕“跟随”角色 - 当相机/屏幕移动时，操纵杆实际上从屏幕上移开.

我尝试将操纵杆设置在一个单独的层（'MyUILayer'）中，并使用它来控制我的'GameLayer'中的角色。

这是我尝试这样做的方法：

在“MyUILayer”中，我有设置以下sneakyJoystick 组件的代码：

```
@interface MyUILayer : CCLayer {
    SneakyJoystick *leftJoystick;
    SneakyButton * jumpButton;
    SneakyButton * attackButton;
}

@property (readonly) SneakyButton *jumpButton;
@property (readonly) SneakyButton *attackButton;
@property (readonly) SneakyJoystick *leftJoystick; 
```

现在，在“GameLayer”中，我尝试访问由“MyUILayer”中名为“leftJoystick”的sneakyJoystick 创建的值。

在声明文件（GameLayer.h）中：

```
 #import "MyUILayer.h"
    @interface GameLayer : CCLayer {
    //.............
        LHSprite *character;
        b2Body *characterBody;
        SneakyJoystick *characterJoystick;
        SneakyButton *jumpButton;
        SneakyButton *attackButton;
//.............
    } 
```

在 GameLayer.mm 中：

```
 //in my INIT method
{
        MyUILayer *UILAYER = [[MyUILayer alloc]init];
        characterJoystick = UILAYER.leftJoystick;
        [self scheduleUpdate];
// Define what 'character' is and what 'characterBody' is ('character is a LHSprite, and 'characterBody' is a b2Body)
}
//in my tick method
{    
b2Vec2 force;
    force.Set(characterJoystick.velocity.x * 10.0f, 0.0f);

    characterBody->ApplyForce(force, characterBody->GetWorldCenter());
} 
```

我真的不明白为什么'GameLayer'中的'characterBody'不会根据'MyUILayer'中的'leftJoystick'的值移动。

对不起，如果它有点啰嗦！- 我也上传了我的项目文件，所以你可以看看项目本身：[https ://dl.dropbox.com/u/2578642/ZOMPLETED%202.zip](https://dl.dropbox.com/u/2578642/ZOMPLETED%202.zip)

非常感谢任何可以提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:07:41.387

问题在于您将 MyUILayer 与 GameLayer 关联的方式。在 myscene.mm 上，您正在创建 MyUILayer 和 GameLayer，并将它们都添加到场景中。还行吧。但随后，您在 GameLayer 上创建了一个新的 MyUILayer，并将该操纵杆关联起来。您应该使用如下属性关联 MyScene.mm 中的操纵杆：

在 MyScene.mm

```
// Control Layer
MyUILayer * controlLayer = [MyUILayer node];
[self addChild:controlLayer z:2 tag:2];

// Gameplay Layer
GameLayer *gameplayLayer = [GameLayer node];
gameplayLayer.attackButton = controlLayer.attackButton;
gameplayLayer.leftJoystick = controlLayer.leftJoystick;
gameplayLayer.jumpButton = controlLayer.jumpButton;
[self addChild:gameplayLayer z:1 tag:1]; 
```

在 GameLayer.h 添加

```
@property (nonatomic, retain) SneakyButton *jumpButton;
@property (nonatomic, retain) SneakyButton *attackButton;
@property (nonatomic, retain) SneakyJoystick *leftJoystick; 
```

在 GameLayer.mm 添加

```
@synthesize jumpButton = jumpButton;
@synthesize attackButton = attackButton;
@synthesize leftJoystick = characterJoystick; 
```

在GameLayer.mm中，去掉init方法中的UILAYER代码

```
- (id)init
{
    self = [super init];
    if (self) {
        //instalize physics
        [self initPhysics];
        [self lvlHelper];
        [self characterLoad];
        [self runAction:[CCFollow actionWithTarget:character worldBoundary:CGRectMake(0, -100, 870, 420)]];
        [self scheduleUpdate];
    }
    return self;
} 
```

# objective-c - iOS5 中的 Youtube - 点击完成按钮

> ID：12761100
> 
> 赞同：3
> 
> 时间：2012-10-06T15:28:56.113
> 
> 标签：objective-c, ios, ios5, webview, youtube

在 iOS5 我想加载 Youtube 电影，我做到了：

```
- (void)embedYouTube:(NSString *)urlString frame:(CGRect)frame {

NSString *embedHTML = @"\
<html><head>\
<style type=\"text/css\">\
body {\
background-color: transparent;\
color: white;\
}\
</style>\
</head><body style=\"margin:0\">\
<embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
width=\"%0.0f\" height=\"%0.0f\"></embed>\
</body></html>";
NSString *html = [NSString stringWithFormat:embedHTML, urlString, frame.size.width, frame.size.height];
videoView = [[UIWebView alloc] initWithFrame:frame];
[videoView loadHTMLString:html baseURL:nil];
[self.view addSubview:videoView]; 
```

}

致电：

```
 [self embedYouTube:@"http://www.youtube.com/v/PqtUSSdf8b4" frame:CGRectMake(0, 0, self.view.frame.size.width, 100)]; 
```

而且我有带有“完成”按钮的标准 Youtube 框架。当我点击完成按钮时，我将重定向到我的根 VC。为什么？我怎样才能找到我的 VC（我打电话给它的那个）？

**更重要的是 - 如何捕捉“完成按钮”事件？**

编辑：我有 MainVC 和 DetailVC。MainVC 将 DetailVC 称为`ModalViewController`. 从那里我称之为这个`embedYouTube`方法。当我在这个屏幕上完成时： ![在此处输入图像描述](../Images/607d9fed19ba75df3e77e9989f5e79f0.png)

我要返回 MainVC 而不是 DetailVC。为什么？如何捕捉这个事件？

编辑：iOS 6 只显示黑色背景 - 什么也没有。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T13:53:51.410

当您点击完成按钮时，全屏视频播放器将关闭，这被封装到系统自动呈现的全屏播放器中，作为此 youtube/flash safari 嵌入技巧的一部分。使用它时，您不应该尝试做任何事情。

关于 iOS 6 - iOS 6 不再支持在您的应用程序中嵌入 YouTube 视频的这种方式（[来源](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html#//apple_ref/doc/uid/TP40012166)）

> [从 iOS 6 开始， http://www.youtube.com/watch?v=](http://www.youtube.com/watch?v=oHg5SJYRHA0) oHg5SJYRHA0 形式的嵌入式 YouTube URL 将不再有效。这些 URL 用于查看 YouTube 网站上的视频，而不是用于嵌入网页。相反，此处描述了应使用的格式：[https](https://developers.google.com/youtube/player_parameters) ://developers.google.com/youtube/player_parameters 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:34:35.097

默认情况下，“完成”按钮的行为是它关闭所有模态视图控制器，因为您正在模态呈现 DetailVC，因此它也被关闭，您需要更改 DetailVC 的呈现方法。只需通过 pushViewController 尝试。

# mysql - MySql - AVG() 和 STD() 函数，奇怪的结果......

> ID：12761101
> 
> 赞同：0
> 
> 时间：2012-10-06T15:28:59.890
> 
> 标签：mysql, average

我对 MySql 关于标准函数的结果感到疯狂： - AVG() 平均值 - STD() 标准偏差

从我的表“拍卖”中检查以下结果：

```
mysql> SELECT avg(buyout) avg FROM auction where buyout <> 0 and item =72988;
+-------------+
| avg         |
+-------------+
| 234337.3622 |
+-------------+ 
```

结果看起来是正确的，没有问题。但是当我运行标准时：

```
mysql> SELECT std(buyout) std FROM auction where buyout <> 0 and item =72988;
+-------------+
| std         |
+-------------+
| 574373.6098 |
+-------------+ 
```

！SDT 大于 AVG (SDT > AVG)，这是不可能的，因为我的 AVG>0。

我在这里错在哪里......？提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:54:17.593

没有数学约束说如果平均值为正，则它必须小于标准差。

我在 R 中阅读了您的数据摘录

```
data <- read.table("extract_72988.csv", h=1, sep="\t") 
```

并确认

```
> mean(data$BUYOUT)
[1] 234337.4
> sd(data$BUYOUT)
[1] 574421.3 
```

进一步分析您的数据表明它远非正态分布

这是您的数据的直方图：

![买断直方图](../Images/7afc16cac2c51e910da6dd1d5b5cf2da.png)

这是对数转换数据的直方图

![对数直方图（买断）](../Images/7f25a0c2dc83d2ae01913c6defa84b75.png)

最后是正常的QQ剧情

![QQ情节](../Images/92fd5c92d6d60e7cc8da7ca54faf4f4e.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-06T15:40:38.147

或者换一种说法，我们关注的是拍卖价格。数据库中的每个价格都是一个正值。我们的平均值没有减少也没有居中，大约是 2.35，但是 st.dev 的计算返回的值高于 2.35。如果我们把这个结果作为图表，这意味着价格围绕一个大于平均值本身的值的平均值移动，如果我们将这个标准差从我们的平均值“向左”绘制，那么它会说有找到负价的概率 -> 不可能！

对 ？

# c# - MSDN 演练中的错误-“如何：使用 TCP 在 Windows 服务中托管 WCF”

> ID：12761107
> 
> 赞同：1
> 
> 时间：2012-10-06T15:29:26.790
> 
> 标签：c#, wcf, windows-services, msdn

在过去的两天里，我一直在用头撞砖墙，试图在 MSDN 上成功使用这个例子：

[如何：使用 TCP 在 Windows 服务中托管 WCF](http://msdn.microsoft.com/en-us/library/ff649818.aspx)

如果您按照示例将消费者应用程序放在同一个解决方案中，那么它会成功运行 - 即使服务已关闭！

如果服务已打开并且消费者应用程序被发布到不同的网络驱动器，那么它将不会运行，因为 WCF 没有在侦听。

演练中的以下代码是罪魁祸首：

```
protected override void OnStart(string[] args)
{
   if (myServiceHost != null)
   {
       myServiceHost.Close();
   }
   myServiceHost = new ServiceHost(typeof(Service1));
   myServiceHost.Open();
} 
```

我的朋友注意到，如果我们更改`new ServiceHost(typeof(Service1));`为，`new ServiceHost(typeof(WcfServiceLibrary1.Service1));`那么 WCF 将真正开始倾听！

很容易看出它的混乱，因为在 Windows 服务项目以及 WCF 项目中有一个名为 Service1 的类，因此需要完整的资格。

有没有其他人遇到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:50:12.130

我有同样的问题（正如你从stackoverflow的[原始帖子中知道的那样）。](https://stackoverflow.com/questions/12750413/consuming-a-wcf-service-that-is-hosted-in-a-windows-service-from-outside-solutio/12800645#12800645)

或者，您可以重命名命名空间 WcfServiceLibrary1 中的类 Service1 以避免冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:33:31.173

你必须放在`using WcfServiceLibrary1;`顶部

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-11T12:01:50.803

我还发现文章引用了错误的服务名称。当我尝试它时，我不得不使用：

```
net.tcp://localhost:8526/Service1/mex 
```

在第 8 步中，而不是列出的内容。

```
net.tcp://localhost:8526/Service1 
```

# matlab - 简化矩阵matlab

> ID：12761111
> 
> 赞同：1
> 
> 时间：2012-10-06T15:30:05.050
> 
> 标签：matlab, matrix, computation, simplification

我正在 matlab 中进行一些矩阵计算。（对我来说）看起来很奇怪的是我得到的结果是

```
(8700286382685973*cos(q5)*sin(q4))/9007199254740992 + sin(q5)*((43220913799951902644522757965203*cos(q4))/730750818665451459101842416358141509827966271488 - 291404338770025/1125899906842624) 
```

但是matlab并没有简化结果。我已经尝试过使用 , 之类的函数，`simplify`但它们都没有给出预期的结果。`simple``fix`

关于我应该使用什么功能的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:14:13.680

Simplify 只进行“精确”操作。您需要的是一个可以杀死表达式中的小项的命令。在 Mathematica 中，“Chop”负责处理这一点。尝试谷歌它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T07:37:02.280

正如@Lucas 建议的那样，您可以在 matlab 中使用 vpa 和 numbers，例如，如果上面的表达式是 A (sym)，那么：

```
 vpa(A,3) % digits is set to 3

 ans = 

  0.966*cos(q5)*sin(q4) + sin(q5)*(5.91e-17*cos(q4) - 0.259) 
```

然后你可以自己查看数字并将它们切碎，或者使用类似的东西：

```
 function result = significant(x, n)
 % significant(x, n) rounds number x to n number of significant figures

 s = floor(log10(abs(x)));
 shift = 10^(n-1);
 mant = round(x*shift/(10^s)) / shift;
 result = mant * 10^s; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T13:26:35.503

在评估之前尝试执行以下命令之一：

```
format longe
format shorte 
```

# mysql - 即使在特定日期没有数据，mysql 日期列表也有计数

> ID：12761113
> 
> 赞同：3
> 
> 时间：2012-10-06T15:30:16.137
> 
> 标签：mysql, database, gaps-and-islands

> **可能重复：**
> [MySQL 如何在范围内填充缺失的日期？](https://stackoverflow.com/questions/3538858/mysql-how-to-fill-missing-dates-in-range)

我正在尝试从 mysqldata 制作图表，

```
Postid | date       | text
1      | 2012-01-01 | bla
2      | 2012-01-01 | bla
3      | 2012-01-02 | bla
4      | 2012-01-02 | bla
5      | 2012-01-04 | bla
6      | 2012-01-04 | bla
7      | 2012-01-05 | bla 
```

现在，我想获取每天的帖子数量，包括零日期。例如，我希望能够像这样获得第一周：

```
date       | count(Postid)
2012-01-01 | 2
2012-01-02 | 2
2012-01-03 | 0
2012-01-04 | 2
2012-01-05 | 1
2012-01-06 | 0
2012-01-07 | 0 
```

我正在寻找一个通用的解决方案，我不必指定每个日期。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T15:48:17.477

假设你`postid`的 s 在你的表中是连续的，那么这个查询：

```
SELECT
  DATE_FORMAT(b.date, '%Y-%m-%d') date,
  COUNT(c.postid)
FROM
(
  SELECT
    (SELECT MAX(date) FROM ex) + INTERVAL 3 DAY - INTERVAL a.postid DAY AS date
  FROM
    ex a
) b
LEFT JOIN
  ex c ON c.date = b.date
GROUP BY
  b.date
ORDER BY
  b.date 
```

产生：

```
date    COUNT(c.postid)
2012-01-01  2
2012-01-02  2
2012-01-03  0
2012-01-04  2
2012-01-05  1
2012-01-06  0
2012-01-07  0 
```

见[http://sqlfiddle.com/#!2/2cf8d/2](http://sqlfiddle.com/#!2/2cf8d/2)

如果您`postid`的 s 不连续，那么您可以使用`ids`连续 id 表：

```
SELECT
  DATE_FORMAT(b.date, '%Y-%m-%d') date,
  COUNT(c.postid)
FROM
(
  SELECT
    (SELECT MAX(date) FROM ex) + INTERVAL 3 DAY - INTERVAL a.id DAY AS date
  FROM
    ids a
) b
LEFT JOIN
  ex c ON c.date = b.date
GROUP BY
  b.date
ORDER BY
  b.date DESC
LIMIT 7 
```

见[http://sqlfiddle.com/#!2/13035/1](http://sqlfiddle.com/#!2/13035/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T15:44:35.063

in MySQL, I would suggest creating a Calendar table with the dates listed. Then you will join on that table. Similar to this:

```
CREATE TABLE Table1(`Postid` int, `date` datetime, `text` varchar(3));

INSERT INTO Table1(`Postid`, `date`, `text`)
VALUES
    (1, '2011-12-31 17:00:00', 'bla'),
    (2, '2011-12-31 17:00:00', 'bla'),
    (3, '2012-01-01 17:00:00', 'bla'),
    (4, '2012-01-01 17:00:00', 'bla'),
    (5, '2012-01-03 17:00:00', 'bla'),
    (6, '2012-01-03 17:00:00', 'bla'),
    (7, '2012-01-04 17:00:00', 'bla');

CREATE TABLE Table2(`date` datetime);

INSERT INTO Table2(`date`)
VALUES('2011-12-31 17:00:00'),
    ('2012-01-01 17:00:00'),
    ('2012-01-02 17:00:00'),
    ('2012-01-03 17:00:00'),
    ('2012-01-04 17:00:00'),
    ('2012-01-05 17:00:00'),
    ('2012-01-06 17:00:00'),
    ('2012-01-07 17:00:00'),
    ('2012-01-08 17:00:00');

select t2.date, count(postid)
from table2 t2
left join table1 t1
  on t2.date = t1.date
group by t2.date 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!2/fd109/3)

# php - Symfony 2 InvalidArgumentException：文件 app/config/config_prod.yml 不存在

> ID：12761118
> 
> 赞同：3
> 
> 时间：2012-10-06T15:30:46.027
> 
> 标签：php, symfony, doctrine

我正在尝试在运行 CentOS 的 VPS 上访问 Symfony 安装。

服务器上存在 /app/config/config_dev.yml 和 /app/config/config_prod_yml 文件。我什至将它们更改为 0777 以进行测试，但我仍然收到它们不存在的错误。

完整跟踪：

```
InvalidArgumentException: The file "/home/XXXXX/public_html/app/config/config_dev.yml" does not exist.

in /home/XXXXX/public_html/app/cache/dev/classes.php line 3637
at FileLocator->locate() in /home/XXXXX/public_html/app/cache/dev/classes.php line 4524
at FileLocator->locate() in /home/XXXXX/public_html/vendor/symfony/src/Symfony/Component/DependencyInjection/Loader/YamlFileLoader.php line 40
at YamlFileLoader->load() in /home/XXXXX/public_html/vendor/symfony/src/Symfony/Component/Config/Loader/DelegatingLoader.php line 52
at DelegatingLoader->load() in /home/XXXXX/public_html/app/AppKernel.php line 39
at AppKernel->registerContainerConfiguration() in /home/XXXXX/public_html/app/bootstrap.php.cache line 867
at Kernel->buildContainer() in /home/XXXXX/public_html/app/bootstrap.php.cache line 783
at Kernel->initializeContainer() in /home/XXXXX/public_html/app/bootstrap.php.cache line 517
at Kernel->boot() in /home/XXXXX/public_html/app/bootstrap.php.cache line 548
at Kernel->handle() in /home/XXXXX/public_html/web/app_dev.php line 28 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:29:09.343

这是一个 CHMOD 问题，PHP 无法访问 symfony 核心文件。

# mysql - 如何在特殊日期之间删除幽灵数据库字段？

> ID：12761122
> 
> 赞同：0
> 
> 时间：2012-10-06T15:31:29.003
> 
> 标签：mysql

我有一个包含许多用户输入的 mysql 表，我想在特殊日期之间删除幽灵电子邮件。我使用这个查询，它似乎工作得很好：

```
DELETE u1 From tx_table u1 JOIN tx_table u2 USING (email) WHERE u1.tstamp < u2.tstamp
```

但我想删除之间更长的时间。当我添加 300 时，它似乎删除了我表中的所有内容：

```
DELETE u1 From tx_table u1 JOIN tx_table u2 USING (email) WHERE u1.tstamp < u2.tstamp+300
```

. 如何使用 SQL 为 tstamp 添加 5 分钟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:35:27.130

尝试使用 mysql 函数 TIMESTAMPADD：

```
TIMESTAMPADD(MINUTE, 5, u2.tstamp); 
```

您可以先尝试检查它，看看它会返回什么：

```
select u2.tstamp,
       TIMESTAMPADD(MINUTE, 5, u2.tstamp) tstamp2
  from tx_table 
```

# session - shiro 中的 JSF 更改会话超时

> ID：12761124
> 
> 赞同：3
> 
> 时间：2012-10-06T15:31:49.053
> 
> 标签：session, jsf-2, primefaces, session-timeout, shiro

我需要在使用 shiro 进行安全和会话管理的 jsf 应用程序中更改默认会话超时。默认为 30 分钟。

以下是我的 shiro 配置

```
<filter>
    <filter-name>ShiroFilter</filter-name>
    <filter-class>org.apache.shiro.web.servlet.IniShiroFilter</filter-class>
    <init-param>
        <param-name>config</param-name>
        <param-value>
        [main]

        authc = com.foo.bar
        authcRealm = com.foo.barAuthenticatingRealm
        sessionManager = org.apache.shiro.web.session.mgt.DefaultWebSessionManager
        securityManager.sessionManager = $sessionManager
        securityManager.sessionManager.globalSessionTimeout = 20000

        unAuthc = com.foo.UnauthorisedFilter

        /** = authc

        </param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>ShiroFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
    <dispatcher>ERROR</dispatcher>
</filter-mapping> 
```

在使用上述配置时，我在登录时立即注销。删除以下行默认超时为 30 分钟

```
 sessionManager = org.apache.shiro.web.session.mgt.DefaultWebSessionManager
        securityManager.sessionManager = $sessionManager
        securityManager.sessionManager.globalSessionTimeout = 20000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:12:06.353

好吧，在尝试在网上搜索并失败之后，在这里也失败了，我终于设法找到了一种方法（有点破解，而不是最好的方法）。来了

Shiro 默认创建一个类型的安全管理器`DefaultWebSecurityManager`，所以继续扩展它。拦截其`createSubject()`方法并设置超时如下

```
public class SecurityManager extends DefaultWebSecurityManager {    
    @Override
    public Subject createSubject(SubjectContext subjectContext) {
        Subject subject = super.createSubject(subjectContext);
        subject.getSession().setTimeout(10 * 60 * 1000);
        return subject;
    }
} 
```

然后在配置中将其分配`SecurityManager`给`sessionManager`（很奇怪为什么他们称安全管理器为会话管理器，我在弄清楚这一点之前浪费了很多时间），如下所示

```
[main]
authc = com.foo.bar
authcRealm = com.foo.barAuthenticatingRealm
sessionManager = com.foo.securityManager
unAuthc = com.foo.UnauthorisedFilter
/** = authc 
```

我不认为这是唯一的方法，我相信有更好的方法，可能不那么hacky，性能更好，但这对我有用，没有任何明显的性能影响（尽管我确实观察到这个方法被调用几次，可能每个http请求一次）。如果您知道更好的方法，请留下另一个答案，我很乐意重新接受更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:14:26.367

尝试放置：

```
<session-config>
  <!-- web.xml expects the session timeout in minutes: -->
  <session-timeout>1</session-timeout>
</session-config> 
```

在您的 web.xml 上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T16:05:25.333

DefaultWebSessionManager 似乎有问题（至少在 Shiro 1.1.0 中）。使用依赖 HttpSession 的管理器，这是默认设置，也可以通过将会话模式设置为 http 来显式启用。

Shiro 然后将 globalSessionTimeout 应用于所有新的 http 会话。此代码配置会话管理器和超时（以毫秒为单位）：

```
securityManager.sessionMode = http
securityManager.sessionManager.globalSessionTimeout = 3600000 
```

Shiro 将始终应用超时，即使您自己没有指定超时。在 1.1.0 中默认为 30 分钟。

请注意，超时是使用 HttpSession 上的 setMaxInactiveInterval 设置的，因此您的容器可能会决定遵循其他设置并提前使会话无效。参见例如 Gryzorz 的回答。

其他框架也喜欢调用 setMaxInactiveInterval 来安装自己的设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-25T13:34:18.090

AbstractNativeSessionManager 的 applyGlobalSessionTimeout() 方法有代码 session.setTimeout(getGlobalSessionTimeout()); 如果您覆盖 applyGlobalSessionTimeout() 以不调用 setTimeout，它应该采用自定义超时。

# jquery - 如何删除超链接但保留链接数组的文本？

> ID：12761126
> 
> 赞同：0
> 
> 时间：2012-10-06T15:31:59.427
> 
> 标签：jquery, hyperlink

> **可能重复：**
> [删除超链接但保留文本？](https://stackoverflow.com/questions/6188277/remove-hyperlink-but-keep-text)

我的问题与这个问题非常相似：[删除超链接但保留文本？](https://stackoverflow.com/questions/6188277/remove-hyperlink-but-keep-text)但是，我似乎无法锻炼如何提供一系列类名并一次性完成？

**例如**

呸呸呸呸

我只想修改与 unwrap 类的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:34:28.753

尝试这个，

**[现场演示](http://jsfiddle.net/TW6hn/)**

```
$('a.unwrap').contents().unwrap(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T15:35:35.947

选择器`a.unwrap`指定所有`a`带有 class 的元素`unwrap`：

```
$('a.unwrap').contents().unwrap(); 
```

[JSFiddle 的示例。](http://jsfiddle.net/nJVLf/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T15:39:02.560

要在多个课程上执行此操作，您可以执行

```
 $("a.className1, a.className2").contents().unwrap(); 
```

# java - 将浮点（双精度）从 Java 转换为 JRuby on Rails 到 SQL

> ID：12761127
> 
> 赞同：0
> 
> 时间：2012-10-06T15:32:11.523
> 
> 标签：java, sql, ruby-on-rails, floating-point, jruby

我正在用 Java 编写一个库，因此我可以在带有 MySQL 数据库的 JRuby on Rails 中使用它。我应该使用`float`还是`double`表示最终将作为`:decimal`Rails ActiveRecord 中的模型类型的浮点？

更明确地说：

*   double 转换为 DOUBLE PRECISION

*   float 转换为 FLOAT

但是既然[ActiveRecord 只支持](http://guides.rubyonrails.org/migrations.html#supported-types)`:decimal`，那么哪个 Java 原语映射到那个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:57:22.923

Java 中的等价物是 BigDecimal 类。这没有原始的。

# php - wp-pagenavi 不断加载第一页

> ID：12761129
> 
> 赞同：0
> 
> 时间：2012-10-06T15:32:33.690
> 
> 标签：php, wordpress, pagination

嗨，我做得正确，但不幸的是它仍然无法正常工作，无论我在分页中单击哪个页面，它都会一直加载第一页，这与它有关`$paged`吗？

```
 <?php 
            $paged = (get_query_var('page')) ? get_query_var('page') : 1;
              ?>

            <?php query_posts('cat=14&posts_per_page=3'."&paged=$paged".get_query_var('page')); ?>
            <?php
            $id = get_the_ID();
            $count = 0;
             if (have_posts()) : ?>
<?php while ( have_posts() ) : the_post(); 

            .......do stuff

            <?php endwhile; ?>

  <?php wp_pagenavi(); ?>
  <?php wp_reset_query();?>
  <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:36:27.140

哎呀，回答我自己的问题。我换了

```
&paged=$paged 
```

和

```
&paged=$page 
```

# google-maps - 在特定纬度/经度的谷歌地图上浮动一个 Div

> ID：12761131
> 
> 赞同：1
> 
> 时间：2012-10-06T15:32:45.837
> 
> 标签：google-maps, google-maps-api-3

我正在尝试使用地图构建 Web 应用程序的前端。我真的想在特定的纬度/经度位置浮动一个 div。我不能按像素来做，因为这不会考虑不同屏幕上的屏幕尺寸变化。

以前有没有人这样做过，我想我需要阅读 lat long 位置并查看屏幕上的位置，然后更新 css 以允许 div 正确定位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:45:40.363

您可以使用叠加视图。 [https://developers.google.com/maps/documentation/javascript/reference#OverlayView](https://developers.google.com/maps/documentation/javascript/reference#OverlayView)

在此处查看 Google 示例： [https ://google-developers.appspot.com/maps/documentation/javascript/examples/overlay-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/overlay-simple)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-06T15:38:21.970

单击[**此地图**](http://maps.forum.nu/v3/gm_elevation.html)上的任意位置，然后在单击的纬度/经度处放置一个 div

# c# - 使用 OpenTK（z 索引）

> ID：12761132
> 
> 赞同：0
> 
> 时间：2012-10-06T15:32:47.907
> 
> 标签：c#, opengl, opentk

我正在遵循一些 NeHe 教程（将其翻译为 OpenTK）和我在网上找到的用于绘制三角形的 OpenTK 示例（用于简单的初始设置）之间进行交叉：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;
using System.Diagnostics;
using System.IO;
using OpenTK;
using OpenTK.Graphics;
using OpenTK.Graphics.OpenGL;
using System.Windows.Forms;

namespace GravSimBasic
{
    class GLMain : GameWindow
    {
        int vbo;
        Vector3[,] vertices;

        float time = 0.01f;

        void CreateVertexBuffer()
        {
            vertices = new Vector3[2,3];
            vertices[0,0] = new Vector3(-1f, -1f, (float)Math.Sin(time));
            vertices[0, 1] = new Vector3(0.5f, -1f, (float)Math.Sin(time));
            vertices[0, 2] = new Vector3(-0.25f, 1f, -(float)Math.Sin(time));
            vertices[1, 0] = new Vector3(-0.5f, -1f, (float)Math.Cos(time));
            vertices[1, 1] = new Vector3(1f, -1f, (float)Math.Cos(time));
            vertices[1, 2] = new Vector3(0.25f, 1f, -(float)Math.Cos(time));

            //MessageBox.Show("Length: " + vertices.Length.ToString());

            GL.GenBuffers(1, out vbo);
            GL.BindBuffer(BufferTarget.ArrayBuffer, vbo);
            GL.BufferData<Vector3>(BufferTarget.ArrayBuffer,
                                   new IntPtr(vertices.Length * Vector3.SizeInBytes),
                                   vertices, BufferUsageHint.StaticDraw);
        }

        protected override void OnLoad(EventArgs e)
        {
            //set the window area
            GL.Viewport(0, 0, 400, 400);
            //background color
            GL.ClearColor(Color.Black);
            //set the view area
            GL.MatrixMode(MatrixMode.Projection);
            GL.LoadIdentity();
            GL.Ortho(-2, 2, -2, 2, 2, -2);
            //now back to 'scene editing' mode
            GL.MatrixMode(MatrixMode.Modelview);
            GL.LoadIdentity();
            //make things look nice
            GL.ShadeModel(ShadingModel.Smooth);

            //set up our z-rendering logic
            GL.ClearDepth(2.0000f);
            GL.Enable(EnableCap.DepthTest);
            GL.DepthFunc(DepthFunction.Lequal);

            //other improvements to quality
            GL.Hint(HintTarget.PerspectiveCorrectionHint, HintMode.Nicest);
            GL.Hint(HintTarget.LineSmoothHint, HintMode.Nicest);
            //initialize our scene data
            CreateVertexBuffer();

        }

        protected override void OnRenderFrame(FrameEventArgs e)
        {
            time += 0.01f;
            vertices[0, 0].Z = (float)Math.Sin(time);
            vertices[0, 1].Z = (float)Math.Sin(time);
            vertices[0, 2].Z = -(float)Math.Sin(time);
            vertices[1, 0].Z = (float)Math.Cos(time);
            vertices[1, 1].Z = (float)Math.Cos(time);
            vertices[1, 2].Z = -(float)Math.Cos(time);
            GL.BufferData<Vector3>(BufferTarget.ArrayBuffer,
                                   new IntPtr(vertices.Length * Vector3.SizeInBytes),
                                   vertices, BufferUsageHint.StaticDraw);
            System.Threading.Thread.Sleep(10);

            GL.Clear(ClearBufferMask.ColorBufferBit);

            GL.EnableVertexAttribArray(0);
            GL.BindBuffer(BufferTarget.ArrayBuffer, vbo);
            GL.Color4(0.75f,0.0f,0.0f,0.25f);
            GL.VertexAttribPointer(0, 3, VertexAttribPointerType.Float, false, 0, 0);

            GL.DrawArrays(BeginMode.Triangles, 0, 3);

            GL.Color4(0.0f, 0.75f, 0.0f, 0.55f);
            GL.VertexAttribPointer(3, 3, VertexAttribPointerType.Float, false, 0, 0);
            GL.DrawArrays(BeginMode.Triangles, 3, 3);

            GL.DisableVertexAttribArray(0);

            SwapBuffers();
        }
    }
} 
```

我怀疑问题出在第 58-60 行，但我已经在 -2.0、0.00001 和 2.0 之间更改了第 58 行的值，但没有一个改变结果。不过，它可能是前面几行的透视设置。我已经尝试了几乎所有可用作第 60 行参数的函数 - Lequal 似乎是我所*期望*的最佳选择，它确实产生了最接近我想要的结果，但它并不完全正确。

设置：有一个绿色和红色的三角形。它们在 xy 轴上部分重叠。一个的顶部 z 轴由 -sin(time) 函数映射，底部为 sin(time) 函数。另一个使用 cos() 代替 sin，但在其他方面是相同的。“时间”值会改变每次渲染。

我想要/期望的：两个重叠的三角形——一个红色，一个绿色。当它来回旋转时，每个的非重叠部分应该始终可见，重叠部分应该只显示最前面的三角形。

我得到的是：（a）什么都没有（b）两个三角形的显示，一个在另一个之上。(c) 一个三角形的位的变化图像，两个三角形或一个三角形都没有 - 即使一个或两个都显示，是任何一个三角形的位，应该是可见的，但是丢失了（背景）。

如果我删除时间，它会显示正确的快照 - 下半部分前面的红色三角形，顶部前面的绿色。

任何人都可以帮助诊断这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:07:07.283

在第 86 行，您只清除颜色缓冲区，而不是深度缓冲区，因此对 58 的任何更改都不会产生任何影响：

```
 GL.Clear(ClearBufferMask.ColorBufferBit); 
```

我从未使用过 OpenTK，但我想它需要遵循以下原则：

```
 GL.Clear(ClearBufferMask.ColorBufferBit|ClearBufferMask.DepthBufferBit); 
```

# php - PHP增加秒值，滚动60

> ID：12761135
> 
> 赞同：0
> 
> 时间：2012-10-06T15:33:06.343
> 
> 标签：php, date, format, int

如何增加变量中的秒数？

增加日期..：

```
date("m/d/Y h:i:s a", time() + 30); 
```

但我想这样做：

```
$seconds = 59;
$increase = 3;
$result = $seconds + $increase; // 62 
```

我希望它在 60 秒前停止并重新计算，结果应该变成 2 而不是 60

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T15:34:46.920

你想要模数运算符：

```
$seconds = 59;
$increase = 3;
$result = ($seconds + $increase) % 60; // 2 
```

# django - Django UnicodeEncodeError，Apache2 与 Debian lenny 上的 mod_wsgi

> ID：12761139
> 
> 赞同：3
> 
> 时间：2012-10-06T15:33:19.020
> 
> 标签：django

我在生产服务器上遇到了 unicode 文件名的问题。当我试图保存文件 UnicodeEncodeError 异常发生。开发服务器工作正常。

www-data 的所有语言环境都是“en_US.UTF-8”。

另外，我在 /etc/apache2/envvars 中写下了

```
export LANG='en_US.UTF-8' 
export LC_ALL='en_US.UTF-8' 
```

它没有帮助。

locale.getdefaultlocale() 正在返回 (None,None)，然后我将以下行添加到 django.wsgi

```
os.environ['LANG']='en_US.UTF-8'
os.environ['LC_ALL']='en_US.UTF-8' 
```

之后 locale.getdefaultlocale() 开始返回 ('en_US', 'UTF8')

我注意到 sys.getdefaultencoding() 返回 'ascii' 但我不知道如何修复它。

追溯：

```
Traceback:
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/contrib/admin/options.py" in wrapper
  366\.                 return self.admin_site.admin_view(view)(*args, **kwargs)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/views/decorators/cache.py" in _wrapped_view_func
  89\.         response = view_func(request, *args, **kwargs)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/contrib/admin/sites.py" in inner
  196\.             return view(request, *args, **kwargs)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/utils/decorators.py" in _wrapper
  25\.             return bound_func(*args, **kwargs)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/utils/decorators.py" in bound_func
  21\.                 return func(self, *args2, **kwargs2)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/db/transaction.py" in inner
  209\.                 return func(*args, **kwargs)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/contrib/admin/options.py" in add_view
  955\.                 self.save_model(request, new_object, form, False)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django_pencil/admin.py" in save_model
  52\.             super(PictureAdmin, self).save_model(request, obj, form, change)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/contrib/admin/options.py" in save_model
  709\.         obj.save()
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/db/models/base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/db/models/base.py" in save_base
  551\.                 result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/db/models/manager.py" in _insert
  203\.         return insert_query(self.model, objs, fields, **kwargs)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/db/models/query.py" in insert_query
  1576\.     return query.get_compiler(using=using).execute_sql(return_id)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/db/models/sql/compiler.py" in execute_sql
  909\.         for sql, params in self.as_sql():
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/db/models/sql/compiler.py" in as_sql
  872\.                 for obj in self.query.objs
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/db/models/fields/files.py" in pre_save
  249\.             file.save(file.name, file, save=False)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django_resized/forms.py" in save
  31\.         super(ResizedImageFieldFile, self).save(name, new_content, save)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/db/models/fields/files.py" in save
  86\.         self.name = self.storage.save(name, content)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/core/files/storage.py" in save
  44\.         name = self.get_available_name(name)
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/core/files/storage.py" in get_available_name
  70\.         while self.exists(name):
File "/home/myproject/myproject.com/python/lib/python2.5/site-packages/django/core/files/storage.py" in exists
  230\.         return os.path.exists(self.path(name))
File "/usr/lib/python2.5/posixpath.py" in exists
  171\.         st = os.stat(path)

Exception Type: UnicodeEncodeError at /admin/django_pencil/picture/add/
Exception Value: 'ascii' codec can't encode characters in position 58-65: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T16:46:40.170

还添加到 django.wsgi：

```
import sys
reload(sys)
sys.setdefaultencoding('utf-8') 
```

简单的 sys.setdefaultencoding('utf-8') 无济于事，重新加载很重要这是 python 2.x 的问题，而不是 django

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:08:48.393

Debian 我不相信使用'/etc/apache2/envvars'。从 Python 脚本内部设置这些值将不起作用，因为它不会初始化某些仅在进程启动时发生的事情。

如果未咨询 envvars，您需要在 Apache 的 init.d 启动脚本中设置变量，或者使用 mod_wsgi 3.4 并使用守护程序模式，将 'lang' 和 'locale' 选项设置为 WSGIDaemonProcess 指令。

# java - Android OCR 原生库

> ID：12761151
> 
> 赞同：4
> 
> 时间：2012-10-06T15:34:54.883
> 
> 标签：java, android, ocr, native-methods

我正在尝试开发一个 Android OCR 应用程序（供家庭使用）。

我有在应用程序中使用 Asprise OCR 的想法，但我打算使用 Linux 版本而不是 Windows 版本。

问题是，我不知道如何处理本机库。它们具有我在 Eclipse 中开发的扩展名 .SH。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-10-03T14:44:50.323

我建议你使用 Android Studio 而不是 Eclipse，并且与 OCR 库相关，你可以使用 Tesseract，它是由 Google 开发的开源库。

在这里，您可以获得更多信息和一个实际示例：

[https://solidgeargroup.com/ocr-on-android](https://solidgeargroup.com/ocr-on-android)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-28T10:43:04.580

谷歌最近发布了一个 OCR API，所以你可能想要使用它： [https ://developers.google.com/vision/text-overview](https://developers.google.com/vision/text-overview)

只需将以下行添加到您的依赖项中：

```
compile 'com.google.android.gms:play-services-vision:9.2.0' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T15:41:46.810

该参考可以帮助您：

[http://gaut.am/making-an-ocr-android-app-using-tesseract/](http://gaut.am/making-an-ocr-android-app-using-tesseract/)

希望这可以帮助

* * *

2017 年 4 月 13 日更新：删除了[断开的链接](http://www.harshadura.net/2011/12/making-simple-ocr-android-app-using.html)，如果它再次上升，将把它放回去。

# yaml - Jekyll 和嵌套列表的 YAML 前端

> ID：12761152
> 
> 赞同：28
> 
> 时间：2012-10-06T15:35:22.720
> 
> 标签：yaml, jekyll

我有一组嵌套的 yaml 列表，如下所示：

```
title: the example
image: link.jpg
products:
 - top-level: Product One
   arbitrary: Value
   nested-products:
    - nested: Associated Product
      sub-arbitrary: Associated Value
 - top-level: Product Two
   arbitrary: Value
 - top-level: Product Three
   arbitrary: Value 
```

我可以毫无问题地遍历产品，`for item in page.products`并且我可以使用逻辑运算符来确定是否存在嵌套产品 - 我不能做的是在`nested-products`每次迭代中循环多次`top-level`

我已经尝试过使用`for subitem in item`和其他选项 - 但我无法让它工作 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-15T18:22:02.370

## 更新

这个我刚刚写的例子（叫做index.html）

```
---
title: the example
products:
 - top-level: Product One
   arbitrary: Value
   nested-products:
    - nested: Associated Product
      sub-arbitrary: Associated Value
    - nested: Another associate
      sub-arbitrary: with its associated value
 - top-level: Product Two
   arbitrary: Value
   nested-products:
    - nested: nested product Two
      sub-arbitrary: Two's nested's associate value
 - top-level: Product Three
   arbitrary: Value
 - top-level: Product Four
   arbitrary: SomeValue
---
<!-- index.html -->
<!DOCTYPE html>
<html lang="en">

<head>
  <title>{{ page.title }}</title>
</head>

<body>

<h4>products:</h4>
<ul>{% for product in page.products %}
  <li>{{ product.top-level }}: {{ product.arbitrary }}{% if product.nested-products %}
    <ul>
    {% for nestedproduct in product.nested-products %}  <li>{{ nestedproduct.nested }}: {{ nestedproduct.sub-arbitrary }}</li>
    {% endfor %}</ul>
  {% endif %}</li>{% endfor %}
</ul>

<p>Hope that answers it</p>

</body>
</html> 
```

产生这个：

```
<!-- index.html -->
<!DOCTYPE html>
<html lang="en">

<head>
  <title>the example</title>
</head>

<body>

<h4>products:</h4>
<ul>
  <li>Product One: Value
    <ul>
      <li>Associated Product: Associated Value</li>
      <li>Another associate: with its associated value</li>
    </ul>
  </li>
  <li>Product Two: Value
    <ul>
      <li>nested product Two: Two's nested's associate value</li>
    </ul>
  </li>
  <li>Product Three: Value</li>
  <li>Product Four: SomeValue</li>
</ul>

<p>Hope that answers it</p>

</body>
</html> 
```

# ruby-on-rails-3 - 帽部署突然不起作用；与 FactoryGirl 和资产有关

> ID：12761162
> 
> 赞同：0
> 
> 时间：2012-10-06T15:36:17.840
> 
> 标签：ruby-on-rails-3, capistrano, asset-pipeline, factory-bot

在整个开发过程中，我一直在研究`cap deploy`我的应用程序，最后一次尝试部署它时，它没有用。这是发生的事情：

```
 * executing `deploy:assets:precompile'
  * executing "cd /var/www/oneteam/releases/20121006153136 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
    servers: ["electricsasquatch.com"]
    [electricsasquatch.com] executing command
 ** [out :: electricsasquatch.com] rake aborted!
 ** [out :: electricsasquatch.com] uninitialized constant OneTeam::Application::FactoryGirl
 ** [out :: electricsasquatch.com] 
 ** [out :: electricsasquatch.com] (See full trace by running task with --trace) 
```

看起来它在`deploy:assets:precompile`命令上失败了。不过，我不明白为什么该命令会尝试对 FactoryGirl 做任何事情。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:03:06.270

不是`deploy:assets:precompile`任务有问题，而是使用 FactoryGirl 的 rake 任务有问题。即使您放置语法错误，让我们说，`lib/tasks/first.rake`并且您执行任务`lib/tasks/second.rake`，例如`rake second`rake 会以`rake aborted!`. 甚至`rake -T`不会工作。所以有一个 rake 任务正在尝试使用 FactoryGirl 但不包括 FactoryGirl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:57:06.433

我有这个`config/application.rb`：

```
FactoryGirl.define do
  sequence(:random_string) { |s| ('a'..'z').to_a.shuffle[0, 30].join }
end 
```

我把它改成这样：

```
if Rails.env != "production"
  FactoryGirl.define do
    sequence(:random_string) { |s| ('a'..'z').to_a.shuffle[0, 30].join }
  end 
end 
```

问题消失了。

# sql-server - 授予对数据库的所有操作的权限

> ID：12761164
> 
> 赞同：1
> 
> 时间：2012-10-06T15:36:30.950
> 
> 标签：sql-server

如何授予数据库中所有表/过程的选择/更新/插入/执行权限？创建角色？

因为我想要来宾（对某些表的所有选择权限）、用户（仅对表的选择、更新、插入权限）和管理员（对数据库中所有对象的所有权限）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:49:56.880

方法 1）在数量很大时很有用。的用户。
`GRANT SELECT, INSERT, DELETE, UPDATE on SCHEMA::SchemaName to Principal`--通常是用于模式的 DBO

对于 Principal 来说，最好使用一个角色而不是单个用户，除非您只有几个用户，否则通常可以简化您的管理。

现在，如果添加了实用程序架构，则用户无法访问数据，但是，如果将表添加到 SchemaName 架构，他们将自动获得访问权限。

方法 2) 在用户很少的情况下很有用。如果您需要访问数据库中的所有表，请
添加用户`db_datareader`和角色。`db_datawriter`它简短而简单。

```
USE [DBName]
GO
EXEC sp_addrolemember N'db_datawriter', N'UserName'
GO
EXEC sp_addrolemember N'db_datareader', N'UserName' 
```

参考：[http ://social.msdn.microsoft.com/Forums/en/transactsql/thread/1489337c-56c9-4bb8-9875-3a75be7596be](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/1489337c-56c9-4bb8-9875-3a75be7596be)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T17:50:12.010

我会创建角色。或者特别是一个角色，因为您描述为“客人”（即公共角色）和管理员（即 db_owner 角色）的角色已经存在。但让我们让它成为现实。

```
create role [Users];

grant select on tbl_1, tbl2, tbl3 to [public];
grant select, insert, update, delete to [Users];

exec sp_addrolemember @membername = 'yourdomain\Users', @rolename='Users'
exec sp_addrolemember @membername = 'yourdomain\Admins', @rolename='db_owner'
--no need to add people to public; everyone's a member by default 
```

# api - 验证 API 响应完整性

> ID：12761168
> 
> 赞同：0
> 
> 时间：2012-10-06T15:37:16.217
> 
> 标签：api, service, web, response, integrity

我正在为它们构建一套移动应用程序和一个随附的 Web 服务。为了保护从应用程序到 Web 服务的连接（达到合理水平），我使用了 2-legged OAuth 方法，每个应用程序都使用唯一的消费者密钥/秘密。

我的问题是如何验证移动应用收到的响应实际上来自我的服务器。例如，如果我有一个端点来确认用户是否可以通过传入一组布尔值来访问某些功能，据我所知，没有什么可以阻止某人修改他们的主机文件并发回一个欺骗性的响应，表明他们可以访问一切。它是否正确？

我提出的解决方案是让应用程序存储服务器也知道的响应秘密。当服务器发送它的响应时，它会生成数据的哈希值和秘密。然后应用程序重新生成哈希并检查它是否匹配。这样，用户只有在知道应用程序中存储的秘密时才能劫持请求。

是否有解决此问题的最佳实践？

简单地在 HTTPS 下托管 Web 服务会解决问题，还是有人仍然能够复制 Web 服务并发回欺骗性响应？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:59:52.733

HTTPS 旨在解决这个确切的问题，并且做得很好（当然假设客户端不能被欺骗信任不应该信任的证书 - 这对于大多数现实生活中的移动应用程序来说不应该是一个问题情景）。我会坚持使用 HTTPS，而不是尝试发明自己的解决方案。具体来说，在您提出的解决方案中，攻击者只需要获得您的应用程序的一个副本 - 他们可以对其进行逆向工程，提取秘密，然后攻击所有其他副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-19T06:41:37.123

您可以使用 HMAC 计算两端的值并比较结果，如果相同，则表示它来自您的服务器。一个缺点是攻击者如此坚定并且能够对您的应用程序进行逆向工程并提取 HMAC 中使用的密钥，然后这将结束。也有一些方法可以避免这种情况，但这一切都取决于您的应用程序或数据的价值。最好的解决方案是使用数字签名和公钥加密。我不会推荐 https，因为如果攻击者非常坚定，即使证书固定不是很有效，它也可以轻松绕过，但这一切都取决于你的应用程序的价值。

# c# - 通过 user32.dll 中的 SendInput 发送密钥

> ID：12761169
> 
> 赞同：32
> 
> 时间：2012-10-06T15:37:29.233
> 
> 标签：c#, sendkeys, user32, sendinput

我[将此板](http://www.elektronikpraxis.vogel.de/imgserver/bdb/490000/490052/4.jpg)用作演示目的的键盘。

无论如何，为了让长话短说，除了极少数情况外，一切都很好。我使用位于 user32.dll 中的**[SendInput](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)**函数发送击键。

所以我的程序看起来像：

```
static void Main(string[] args)
{
    Console.Write("Press enter an on the next secont the key combination shift+end will be send");
    Console.Read();

    Thread.Sleep(1000);

    SendKeyDown(KeyCode.SHIFT);
    SendKeyPress(KeyCode.END);
    SendKeyUp(KeyCode.SHIFT);

    Console.Read(); 
    Console.Read();
}

[DllImport("user32.dll", SetLastError = true)]
private static extern uint SendInput(uint numberOfInputs, INPUT[] inputs, int sizeOfInputStructure);

/// <summary>
/// simulate key press
/// </summary>
/// <param name="keyCode"></param>
public static void SendKeyPress(KeyCode keyCode)
{
    INPUT input = new INPUT {
        Type = 1
    };
    input.Data.Keyboard = new KEYBDINPUT() {
        Vk = (ushort)keyCode,
        Scan = 0,
        Flags = 0,
        Time = 0,
        ExtraInfo = IntPtr.Zero,
    };

    INPUT input2 = new INPUT {
        Type = 1
    };
    input2.Data.Keyboard = new KEYBDINPUT() {
        Vk = (ushort)keyCode,
        Scan = 0,
        Flags = 2,
        Time = 0,
        ExtraInfo = IntPtr.Zero
    };
    INPUT[] inputs = new INPUT[] { input, input2 };
    if (SendInput(2, inputs, Marshal.SizeOf(typeof(INPUT))) == 0)
        throw new Exception();            
}

/// <summary>
/// Send a key down and hold it down until sendkeyup method is called
/// </summary>
/// <param name="keyCode"></param>
public static void SendKeyDown(KeyCode keyCode)
{
    INPUT input = new INPUT{
        Type = 1
    };
    input.Data.Keyboard = new KEYBDINPUT();
    input.Data.Keyboard.Vk = (ushort)keyCode;
    input.Data.Keyboard.Scan = 0;
    input.Data.Keyboard.Flags = 0;
    input.Data.Keyboard.Time = 0;
    input.Data.Keyboard.ExtraInfo = IntPtr.Zero;
    INPUT[] inputs = new INPUT[] { input };
    if (SendInput(1, inputs, Marshal.SizeOf(typeof(INPUT))) == 0)
    {
        throw new Exception();
    }
}

/// <summary>
/// Release a key that is being hold down
/// </summary>
/// <param name="keyCode"></param>
public static void SendKeyUp(KeyCode keyCode)
{
    INPUT input = new INPUT {
        Type = 1
    };
    input.Data.Keyboard = new KEYBDINPUT();
    input.Data.Keyboard.Vk = (ushort)keyCode;
    input.Data.Keyboard.Scan = 0;
    input.Data.Keyboard.Flags = 2;
    input.Data.Keyboard.Time = 0;
    input.Data.Keyboard.ExtraInfo = IntPtr.Zero;
    INPUT[] inputs = new INPUT[] { input };
    if (SendInput(1, inputs, Marshal.SizeOf(typeof(INPUT))) == 0)
        throw new Exception();

} 
```

以下是我在网上找到的这些方法使用的结构以及关键代码：（**请注意，它看起来像很多代码，因为枚举中有很多关键代码）**

```
 /// <summary>
    /// http://msdn.microsoft.com/en-us/library/windows/desktop/ms646270(v=vs.85).aspx
    /// </summary>
    [StructLayout(LayoutKind.Sequential)]
    internal struct INPUT
    {
        public uint Type;
        public MOUSEKEYBDHARDWAREINPUT Data;
    }

    /// <summary>
    /// http://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/f0e82d6e-4999-4d22-b3d3-32b25f61fb2a
    /// </summary>
    [StructLayout(LayoutKind.Explicit)]
    internal struct MOUSEKEYBDHARDWAREINPUT
    {
        [FieldOffset(0)]
        public HARDWAREINPUT Hardware;
        [FieldOffset(0)]
        public KEYBDINPUT Keyboard;
        [FieldOffset(0)]
        public MOUSEINPUT Mouse;
    }

    /// <summary>
    /// http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310(v=vs.85).aspx
    /// </summary>
    [StructLayout(LayoutKind.Sequential)]
    internal struct HARDWAREINPUT
    {
        public uint Msg;
        public ushort ParamL;
        public ushort ParamH;
    }

    /// <summary>
    /// http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310(v=vs.85).aspx
    /// </summary>
    [StructLayout(LayoutKind.Sequential)]
    internal struct KEYBDINPUT
    {
        public ushort Vk;
        public ushort Scan;
        public uint Flags;
        public uint Time;
        public IntPtr ExtraInfo;
    }

    /// <summary>
    /// http://social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/2abc6be8-c593-4686-93d2-89785232dacd
    /// </summary>
    [StructLayout(LayoutKind.Sequential)]
    internal struct MOUSEINPUT
    {
        public int X;
        public int Y;
        public uint MouseData;
        public uint Flags;
        public uint Time;
        public IntPtr ExtraInfo;
    }

    public enum KeyCode : ushort
    {
        #region Media

        /// <summary>
        /// Next track if a song is playing
        /// </summary>
        MEDIA_NEXT_TRACK = 0xb0,

        /// <summary>
        /// Play pause
        /// </summary>
        MEDIA_PLAY_PAUSE = 0xb3,

        /// <summary>
        /// Previous track
        /// </summary>
        MEDIA_PREV_TRACK = 0xb1,

        /// <summary>
        /// Stop
        /// </summary>
        MEDIA_STOP = 0xb2,

        #endregion

        #region math

        /// <summary>Key "+"</summary>
        ADD = 0x6b,
        /// <summary>
        /// "*" key
        /// </summary>
        MULTIPLY = 0x6a,

        /// <summary>
        /// "/" key
        /// </summary>
        DIVIDE = 0x6f,

        /// <summary>
        /// Subtract key "-"
        /// </summary>
        SUBTRACT = 0x6d,

        #endregion

        #region Browser
        /// <summary>
        /// Go Back
        /// </summary>
        BROWSER_BACK = 0xa6,
        /// <summary>
        /// Favorites
        /// </summary>
        BROWSER_FAVORITES = 0xab,
        /// <summary>
        /// Forward
        /// </summary>
        BROWSER_FORWARD = 0xa7,
        /// <summary>
        /// Home
        /// </summary>
        BROWSER_HOME = 0xac,
        /// <summary>
        /// Refresh
        /// </summary>
        BROWSER_REFRESH = 0xa8,
        /// <summary>
        /// browser search
        /// </summary>
        BROWSER_SEARCH = 170,
        /// <summary>
        /// Stop
        /// </summary>
        BROWSER_STOP = 0xa9,
        #endregion

        #region Numpad numbers
        /// <summary>
        /// 
        /// </summary>
        NUMPAD0 = 0x60,
        /// <summary>
        /// 
        /// </summary>
        NUMPAD1 = 0x61,
        /// <summary>
        /// 
        /// </summary>
        NUMPAD2 = 0x62,
        /// <summary>
        /// 
        /// </summary>
        NUMPAD3 = 0x63,
        /// <summary>
        /// 
        /// </summary>
        NUMPAD4 = 100,
        /// <summary>
        /// 
        /// </summary>
        NUMPAD5 = 0x65,
        /// <summary>
        /// 
        /// </summary>
        NUMPAD6 = 0x66,
        /// <summary>
        /// 
        /// </summary>
        NUMPAD7 = 0x67,
        /// <summary>
        /// 
        /// </summary>
        NUMPAD8 = 0x68,
        /// <summary>
        /// 
        /// </summary>
        NUMPAD9 = 0x69,

        #endregion

        #region Fkeys
        /// <summary>
        /// F1
        /// </summary>
        F1 = 0x70,
        /// <summary>
        /// F10
        /// </summary>
        F10 = 0x79,
        /// <summary>
        /// 
        /// </summary>
        F11 = 0x7a,
        /// <summary>
        /// 
        /// </summary>
        F12 = 0x7b,
        /// <summary>
        /// 
        /// </summary>
        F13 = 0x7c,
        /// <summary>
        /// 
        /// </summary>
        F14 = 0x7d,
        /// <summary>
        /// 
        /// </summary>
        F15 = 0x7e,
        /// <summary>
        /// 
        /// </summary>
        F16 = 0x7f,
        /// <summary>
        /// 
        /// </summary>
        F17 = 0x80,
        /// <summary>
        /// 
        /// </summary>
        F18 = 0x81,
        /// <summary>
        /// 
        /// </summary>
        F19 = 130,
        /// <summary>
        /// 
        /// </summary>
        F2 = 0x71,
        /// <summary>
        /// 
        /// </summary>
        F20 = 0x83,
        /// <summary>
        /// 
        /// </summary>
        F21 = 0x84,
        /// <summary>
        /// 
        /// </summary>
        F22 = 0x85,
        /// <summary>
        /// 
        /// </summary>
        F23 = 0x86,
        /// <summary>
        /// 
        /// </summary>
        F24 = 0x87,
        /// <summary>
        /// 
        /// </summary>
        F3 = 0x72,
        /// <summary>
        /// 
        /// </summary>
        F4 = 0x73,
        /// <summary>
        /// 
        /// </summary>
        F5 = 0x74,
        /// <summary>
        /// 
        /// </summary>
        F6 = 0x75,
        /// <summary>
        /// 
        /// </summary>
        F7 = 0x76,
        /// <summary>
        /// 
        /// </summary>
        F8 = 0x77,
        /// <summary>
        /// 
        /// </summary>
        F9 = 120,

        #endregion

        #region Other
        /// <summary>
        /// 
        /// </summary>
        OEM_1 = 0xba,
        /// <summary>
        /// 
        /// </summary>
        OEM_102 = 0xe2,
        /// <summary>
        /// 
        /// </summary>
        OEM_2 = 0xbf,
        /// <summary>
        /// 
        /// </summary>
        OEM_3 = 0xc0,
        /// <summary>
        /// 
        /// </summary>
        OEM_4 = 0xdb,
        /// <summary>
        /// 
        /// </summary>
        OEM_5 = 220,
        /// <summary>
        /// 
        /// </summary>
        OEM_6 = 0xdd,
        /// <summary>
        /// 
        /// </summary>
        OEM_7 = 0xde,
        /// <summary>
        /// 
        /// </summary>
        OEM_8 = 0xdf,
        /// <summary>
        /// 
        /// </summary>
        OEM_CLEAR = 0xfe,
        /// <summary>
        /// 
        /// </summary>
        OEM_COMMA = 0xbc,
        /// <summary>
        /// 
        /// </summary>
        OEM_MINUS = 0xbd,
        /// <summary>
        /// 
        /// </summary>
        OEM_PERIOD = 190,
        /// <summary>
        /// 
        /// </summary>
        OEM_PLUS = 0xbb,

        #endregion

        #region KEYS

        /// <summary>
        /// 
        /// </summary>
        KEY_0 = 0x30,
        /// <summary>
        /// 
        /// </summary>
        KEY_1 = 0x31,
        /// <summary>
        /// 
        /// </summary>
        KEY_2 = 50,
        /// <summary>
        /// 
        /// </summary>
        KEY_3 = 0x33,
        /// <summary>
        /// 
        /// </summary>
        KEY_4 = 0x34,
        /// <summary>
        /// 
        /// </summary>
        KEY_5 = 0x35,
        /// <summary>
        /// 
        /// </summary>
        KEY_6 = 0x36,
        /// <summary>
        /// 
        /// </summary>
        KEY_7 = 0x37,
        /// <summary>
        /// 
        /// </summary>
        KEY_8 = 0x38,
        /// <summary>
        /// 
        /// </summary>
        KEY_9 = 0x39,
        /// <summary>
        /// 
        /// </summary>
        KEY_A = 0x41,
        /// <summary>
        /// 
        /// </summary>
        KEY_B = 0x42,
        /// <summary>
        /// 
        /// </summary>
        KEY_C = 0x43,
        /// <summary>
        /// 
        /// </summary>
        KEY_D = 0x44,
        /// <summary>
        /// 
        /// </summary>
        KEY_E = 0x45,
        /// <summary>
        /// 
        /// </summary>
        KEY_F = 70,
        /// <summary>
        /// 
        /// </summary>
        KEY_G = 0x47,
        /// <summary>
        /// 
        /// </summary>
        KEY_H = 0x48,
        /// <summary>
        /// 
        /// </summary>
        KEY_I = 0x49,
        /// <summary>
        /// 
        /// </summary>
        KEY_J = 0x4a,
        /// <summary>
        /// 
        /// </summary>
        KEY_K = 0x4b,
        /// <summary>
        /// 
        /// </summary>
        KEY_L = 0x4c,
        /// <summary>
        /// 
        /// </summary>
        KEY_M = 0x4d,
        /// <summary>
        /// 
        /// </summary>
        KEY_N = 0x4e,
        /// <summary>
        /// 
        /// </summary>
        KEY_O = 0x4f,
        /// <summary>
        /// 
        /// </summary>
        KEY_P = 80,
        /// <summary>
        /// 
        /// </summary>
        KEY_Q = 0x51,
        /// <summary>
        /// 
        /// </summary>
        KEY_R = 0x52,
        /// <summary>
        /// 
        /// </summary>
        KEY_S = 0x53,
        /// <summary>
        /// 
        /// </summary>
        KEY_T = 0x54,
        /// <summary>
        /// 
        /// </summary>
        KEY_U = 0x55,
        /// <summary>
        /// 
        /// </summary>
        KEY_V = 0x56,
        /// <summary>
        /// 
        /// </summary>
        KEY_W = 0x57,
        /// <summary>
        /// 
        /// </summary>
        KEY_X = 0x58,
        /// <summary>
        /// 
        /// </summary>
        KEY_Y = 0x59,
        /// <summary>
        /// 
        /// </summary>
        KEY_Z = 90,

        #endregion

        #region volume
        /// <summary>
        /// Decrese volume
        /// </summary>
        VOLUME_DOWN = 0xae,

        /// <summary>
        /// Mute volume
        /// </summary>
        VOLUME_MUTE = 0xad,

        /// <summary>
        /// Increase volue
        /// </summary>
        VOLUME_UP = 0xaf,

        #endregion

        /// <summary>
        /// Take snapshot of the screen and place it on the clipboard
        /// </summary>
        SNAPSHOT = 0x2c,

        /// <summary>Send right click from keyboard "key that is 2 keys to the right of space bar"</summary>
        RightClick = 0x5d,

        /// <summary>
        /// Go Back or delete
        /// </summary>
        BACKSPACE = 8,

        /// <summary>
        /// Control + Break "When debuging if you step into an infinite loop this will stop debug"
        /// </summary>
        CANCEL = 3,
        /// <summary>
        /// Caps lock key to send cappital letters
        /// </summary>
        CAPS_LOCK = 20,
        /// <summary>
        /// Ctlr key
        /// </summary>
        CONTROL = 0x11,

        /// <summary>
        /// Alt key
        /// </summary>
        ALT = 18,

        /// <summary>
        /// "." key
        /// </summary>
        DECIMAL = 110,

        /// <summary>
        /// Delete Key
        /// </summary>
        DELETE = 0x2e,

        /// <summary>
        /// Arrow down key
        /// </summary>
        DOWN = 40,

        /// <summary>
        /// End key
        /// </summary>
        END = 0x23,

        /// <summary>
        /// Escape key
        /// </summary>
        ESC = 0x1b,

        /// <summary>
        /// Home key
        /// </summary>
        HOME = 0x24,

        /// <summary>
        /// Insert key
        /// </summary>
        INSERT = 0x2d,

        /// <summary>
        /// Open my computer
        /// </summary>
        LAUNCH_APP1 = 0xb6,
        /// <summary>
        /// Open calculator
        /// </summary>
        LAUNCH_APP2 = 0xb7,

        /// <summary>
        /// Open default email in my case outlook
        /// </summary>
        LAUNCH_MAIL = 180,

        /// <summary>
        /// Opend default media player (itunes, winmediaplayer, etc)
        /// </summary>
        LAUNCH_MEDIA_SELECT = 0xb5,

        /// <summary>
        /// Left control
        /// </summary>
        LCONTROL = 0xa2,

        /// <summary>
        /// Left arrow
        /// </summary>
        LEFT = 0x25,

        /// <summary>
        /// Left shift
        /// </summary>
        LSHIFT = 160,

        /// <summary>
        /// left windows key
        /// </summary>
        LWIN = 0x5b,

        /// <summary>
        /// Next "page down"
        /// </summary>
        PAGEDOWN = 0x22,

        /// <summary>
        /// Num lock to enable typing numbers
        /// </summary>
        NUMLOCK = 0x90,

        /// <summary>
        /// Page up key
        /// </summary>
        PAGE_UP = 0x21,

        /// <summary>
        /// Right control
        /// </summary>
        RCONTROL = 0xa3,

        /// <summary>
        /// Return key
        /// </summary>
        ENTER = 13,

        /// <summary>
        /// Right arrow key
        /// </summary>
        RIGHT = 0x27,

        /// <summary>
        /// Right shift
        /// </summary>
        RSHIFT = 0xa1,

        /// <summary>
        /// Right windows key
        /// </summary>
        RWIN = 0x5c,

        /// <summary>
        /// Shift key
        /// </summary>
        SHIFT = 0x10,

        /// <summary>
        /// Space back key
        /// </summary>
        SPACE_BAR = 0x20,

        /// <summary>
        /// Tab key
        /// </summary>
        TAB = 9,

        /// <summary>
        /// Up arrow key
        /// </summary>
        UP = 0x26,

    } 
```

**所以现在我的问题是，**为什么当我发送该组合键时，我得到的结果与我在真正的键盘上发送的结果不同？98% 的事情都有效。例如我能够做到：

```
 SendKeyDown(KeyCode.SHIFT);
    SendKeyPress(KeyCode.KEY_A );
    SendKeyUp(KeyCode.SHIFT); 
```

这将发送一个大写A。

我应该使用不同的库吗？

**我喜欢这种方法的原因是因为我事先不知道用户是否会发送组合键**例如在 windows 窗体中如果我这样做：

`System.Windows.Forms.SendKeys.SendWait("+{end}");`这将发送 shift + end 但也许用户只想发送 shift ...

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-12T14:00:41.573

您没有设置标志和扫描字段，具体取决于所需的击键，您需要正确设置这些以使操作系统正确识别键。

您可能会考虑使用[Input Simulator](https://github.com/michaelnoonan/inputsimulator)库，因为它已经完成了您想要的工作，并且您不必重新创建轮子。只要确保浏览论坛，因为那里有一些需要设置的好补丁，因为作者在 2009 年放弃了该项目。尽管如此，它仍然是一个很好的库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-03T20:52:42.533

将键盘输入发送到窗口的另一种方法（我将其用于 UI 测试）是在[KEYBDINPUT](https://msdn.microsoft.com/en-us/library/windows/desktop/ms646271(v=vs.85).aspx)中使用 Unicode 替代方案，这样您就无需将每个字符映射到虚拟键：

```
public static void SendString(string inputStr)
{
    var hWnd = System.Diagnostics.Process.GetCurrentProcess().MainWindowHandle;
    WinAPI.SetForegroundWindow(hWnd);           
    List<WinAPI.INPUT> keyList = new List<WinAPI.INPUT>();
    foreach (short c in inputStr)
    {
        switch (c)
        {
            case 8: // Translate \t to VK_TAB
                {
                    WinAPI.INPUT keyDown = new WinAPI.INPUT();
                    keyDown.type = 1; //Keyboard
                    keyDown.union.keyboardInput.wVk = (short)WinAPI.WindowsVirtualKey.VK_TAB;
                    keyDown.union.keyboardInput.dwFlags = 0;
                    keyDown.union.keyboardInput.wScan = 0; //use VirtualKey
                    keyList.Add(keyDown);
                    WinAPI.INPUT keyUp = new WinAPI.INPUT();
                    keyUp.type = 1; //Keyboard
                    keyUp.union.keyboardInput.wVk = (short)WinAPI.WindowsVirtualKey.VK_TAB;
                    keyUp.union.keyboardInput.dwFlags = 0x0002;
                    keyUp.union.keyboardInput.wScan = 0; //use VirtualKey
                    keyList.Add(keyUp);
                }
                break;
            case 10: // Translate \n to VK_RETURN
                {
                    WinAPI.INPUT keyDown = new WinAPI.INPUT();
                    keyDown.type = 1; //Keyboard
                    keyDown.union.keyboardInput.wVk = (short)WinAPI.WindowsVirtualKey.VK_RETURN;
                    keyDown.union.keyboardInput.dwFlags = 0;
                    keyDown.union.keyboardInput.wScan = 0; //use VirtualKey
                    keyList.Add(keyDown);
                    WinAPI.INPUT keyUp = new WinAPI.INPUT();
                    keyUp.type = 1; //Keyboard
                    keyUp.union.keyboardInput.wVk = (short)WinAPI.WindowsVirtualKey.VK_RETURN;
                    keyUp.union.keyboardInput.dwFlags = 0x0002; 
                    keyUp.union.keyboardInput.wScan = 0; //use VirtualKey
                    keyList.Add(keyUp);
                }
                break;                  
            default:
                {
                    WinAPI.INPUT keyDown = new WinAPI.INPUT();
                    keyDown.type = 1; //Keyboard
                    keyDown.union.keyboardInput.wVk = 0; //Use unicode
                    keyDown.union.keyboardInput.dwFlags = 0x0004; //Unicode Key Down
                    keyDown.union.keyboardInput.wScan = c;
                    keyList.Add(keyDown);
                    WinAPI.INPUT keyUp = new WinAPI.INPUT();
                    keyUp.type = 1; //Keyboard
                    keyUp.union.keyboardInput.wVk = 0; //Use unicode
                    keyUp.union.keyboardInput.dwFlags = 0x0004 | 0x0002; //Unicode Key Up
                    keyUp.union.keyboardInput.wScan = c;
                    keyList.Add(keyUp);
                }
                break;
        }
    }
    WinAPI.SendInput((uint)keyList.Count, keyList.ToArray(), Marshal.SizeOf(typeof(WinAPI.INPUT)));             
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-03T23:37:00.100

你可以试试这个。它适用于：`Shift`+ `A`, `Ctrl`+ `LShiftv`+ `S`, `Ctrl`+`A`

其他我没有尝试过，但我认为你可以发送任何组合键

```
public static void MultiKeyPress(KeyCode[] keys){
    INPUT[] inputs = new INPUT[keys.Count() * 2];
    for(int a = 0; a < keys.Count(); ++a){
        for(int b = 0; b < 2; ++b){
            inputs[(b == 0) ? a : inputs.Count() - 1 - a].Type = 1;
            inputs[(b == 0) ? a : inputs.Count() - 1 - a].Data.Keyboard = new KEYBDINPUT() {
                Vk = (ushort)keys[a],
                Scan = 0,
                Flags = Convert.ToUInt32((b == 0)?0:2),
                Time = 0,
                ExtraInfo = IntPtr.Zero,
            };
        }
    }
    if (SendInput(Convert.ToUInt32(inputs.Count()), inputs, Marshal.SizeOf(typeof(INPUT))) == 0)
        throw new Exception();
} 
```

```
//call with this :
MultiKeyPress(new virtualInputs.KeyCode[] { KeyCode.LSHIFT, KeyCode.KEY_A }); 
```

/!\ 具有焦点的窗口将获得按键，因此您需要确保正确的窗口具有焦点

# twitter - “不允许：/*”是什么意思？在 Twitter robots.txt 中是什么意思？

> ID：12761172
> 
> 赞同：0
> 
> 时间：2012-10-06T15:37:36.997
> 
> 标签：twitter, robots.txt

这是除 Google 和 co 之外的所有其他机器人的部分。

```
# Every bot that might possibly read and respect this file.
User-agent: *
Allow: /search
Disallow: /search/users
Disallow: /search/*/grid

Disallow: /*?
Disallow: /*/with_friends
Disallow: /oauth
Disallow: /1/oauth 
```

是否“不允许：/*？” 禁止所有 URL，在这种情况下，下面的规则是多余的，或者它只禁止包含问号的 URL？

更一般地说，我很想知道是否允许我进入一个人的个人资料页面并自动跟随指向他们个人网站的链接。中间没有刮，只要按照链接。

谢谢，

拉兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:39:56.977

robots.txt 规范只允许`*`作为通配符，因此`/*?`不允许所有以空查询字符串结尾的 url。因为`?`不是通配符，`/*?`所以不会禁止所有 url，只允许那些以`?`.

# django - 将 python 列表传递给 django 模板

> ID：12761173
> 
> 赞同：5
> 
> 时间：2012-10-06T15:37:54.867
> 
> 标签：django, django-templates, django-views, django-errors

我想在我的模板上显示一个列表。所以我有一个视图来生成该列表并将其传递给模板，如下所示：

```
newlinks = []
try:
    links=urllib2.urlopen("<<Some HTML file link>>").readlines()
except (urllib2.HTTPError):
    links = ''
    pass
for link in links:
    newlinks.append(link[0:-1])                       
return render_to_response('template11.html', {'links',newlinks}, context_instance=RequestContext(request)) 
```

但是在渲染它时，我得到了 TypeError

```
Exception Type: TypeError
Exception Value: unhashable type: 'list' 
```

这是模板代码：

```
{% for link in links %}
    <li>{{ link }}</li>
{% endfor %} 
```

我不明白这个错误。此外，如果这种方法是错误的（我认为是），那么我将如何将列表传递给模板？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-06T15:45:22.243

In `return render_to_response()`, `{'links',newlinks}` is causing the error. It should be `{'links': newlinks}`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-05T17:16:38.850

And here is what you would put in the template11.html

```
<ul>
  {% for link in links %}
    <li>{{ link }}</li>
  {% endfor %} 
</ul> 
```

# php - PHP在哪里保存用户上传的图像文件

> ID：12761176
> 
> 赞同：1
> 
> 时间：2012-10-06T15:38:26.180
> 
> 标签：php, image, upload, store, document-root

目前我正在保存用户上传的图像文件，如下所示：

```
public_html/img/user/$category/$username/$imagename 
```

但是，这是不好的做法吗？为什么存储在文档根目录中是不好的，在哪里存储文件更好？

我过滤扩展如下：

```
 // Check to see if the type of file uploaded is a valid image type
function is_valid_type($file)
{
    // This is an array that holds all the valid image MIME types
    $valid_types = array("image/jpg", "image/JPG", "image/jpeg", "image/bmp", "image/gif", "image/png");

    if (in_array($file['type'], $valid_types))
        return 1;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:45:21.663

Contrary to what some believe is bad practice, the location itself is not the problem; but you have to take care of a few things:

*   Filter by extensions; accept a few image formats (.jpg, .gif, .png) only and reject the rest; definitely don't accept .php extension

*   Don't trust the mime-type sent by the browsers to determine if an image is valid. Use `getimagesize()` to do this yourself; this can be [fooled](https://stackoverflow.com/questions/3499173/my-php-site-was-hacked-by-codes-uploaded-as-image) by hiding a PHP script inside an image, but that's why we have one more important step.

*   **Important** - Make sure that images are NOT served with the PHP engine; some images can be crafted in a way that it looks like an image but hides a script inside. Use the web server's configuration for this.

*   [Other issues you need to be aware about when you're handling uploads](https://www.owasp.org/index.php/Unrestricted_File_Upload)

See also: [Secure User Image Upload Capabilities in PHP](https://stackoverflow.com/questions/3644138/secure-user-image-upload-capabilities-in-php?rq=1)

Btw, to test if the PHP engine is not being used to serve images, make sure the `expose_php` is `On` (you can tell from a `phpinfo()` page. Then download an image with your browser, inspect the response headers and check whether you see the `X-Powered-By` header; if it's not there, you should be safe.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T15:43:34.563

Its **better** to keep publicly visible images in document root. But store only the images you want to show. Not the other one. And make sure these are image files as there are [some gotchas](https://stackoverflow.com/questions/3499173/my-php-site-was-hacked-by-codes-uploaded-as-image).

I have a website where user stores image. But I keep the file name, category, username, imagename into database and the image files in a single directory.

# symfony - Symfony2 垃圾箱/供应商

> ID：12761178
> 
> 赞同：6
> 
> 时间：2012-10-06T15:39:01.660
> 
> 标签：symfony, symfony-2.0

当我尝试从 Symfony2 项目根目录运行以下命令时

```
php bin/vendors install 
```

我收到以下错误：

> 无法打开输入文件：bin/vendors

我对 git 和作曲家完全陌生，我找不到让这个工作的方法我想按照手册中的描述安装 Doctrine Fixtures Bundle：http: [//symfony.com/doc/2.0/bundles/DoctrineFixturesBundle/索引.html](http://symfony.com/doc/2.0/bundles/DoctrineFixturesBundle/index.html)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T16:11:26.900

AFAIK，最新版本的 Symfony2 不再使用 bin/vendors。相反，他们使用 Composer，这意味着您可能正在查看 2.0 文档而不是 2.1。

尝试将以下内容添加到您的 composer.json 文件中。

```
{
    "require": {
        "doctrine/doctrine-fixtures-bundle": "dev-master"
    }
} 
```

然后运行

```
$ php composer.phar update 
```

# asp.net - 在 ASP.Net 的模式弹出窗口中使用 UpdatePanel 时不刷新

> ID：12761182
> 
> 赞同：0
> 
> 时间：2012-10-06T15:39:23.210
> 
> 标签：asp.net, vb.net, updatepanel

我的网站使用母版页，默认情况下我已将模式弹出 div (id="myModal") 置于隐藏状态。我正在使用 twitter 引导模式弹出窗口 (modal.js) 和 jQuery.load() 使用另一个名为 Feedback.aspx 的 aspx 页面填充#myModal 的正文。

模态按预期弹出并显示 feedback.aspx 内容（这是一个完整的页面，包括 doctype、HTML、head 和 body 标签......也许它不应该是？），但因为它没有显示在 iframe 中，当我提交页面，它执行 PostBack 并使用整个 feedback.aspx 页面刷新父级。

我希望 feedback.aspx 在模式弹出窗口中而不是整个父页面中简单地刷新。

我尝试将 feedback.aspx 页面的整个正文内容包装在 UpdatePanel（使用 ScriptManager）中，当我现在单击提交按钮时，数据会保存到数据库中，并且模式窗口保持打开状态，但我的 ModalAlertBox 消息没有不显示。我假设我的模态窗口没有更新。

我尝试将 updatepanel.update() 添加到我的 submitbutton.click 事件中，但它仍然不起作用。

任何帮助表示赞赏！谢谢！

**母版页：**

```
 <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>    
    <div id="myModal" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"></div> 
```

**Feedback.aspx（用作#myModal 内容）：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    ...
</head>
<body>
<form ...>
<asp:ScriptManager ID="ModalScriptManager" runat="server"></asp:ScriptManager>
<asp:UpdatePanel ID="ModalUpdatePanel" runat="server" UpdateMode="Always">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="btnModalSubmit" EventName="Click" />
    </Triggers>
    <ContentTemplate>
        <fieldset>
           ...
           <div id="ModalAlertBox" class="alert" runat="server" visible="false">
               <button type="button" class="close" data-dismiss="alert">×</button>
               <asp:Label ID="lblModalMsg" runat="server" Text=""></asp:Label>
           </div>
           ...
        </fieldset>
    </ContentTemplate>
</asp:UpdatePanel>
</form>
</body>
</html> 
```

**反馈.aspx.vb**

```
Protected Sub btnModalSubmit_Click(sender As Object, e As System.EventArgs) Handles btnModalSubmit.Click
    Try
        GetAccount(_Account)
        If _Account.Exists Then
            ... Save Logic ...
            lblModalMsg.Text = "Success Msg."
        Else
            lblModalMsg.Text = "Fail Msg."
        End If
    Catch ex As Exception
        clsExceptionHandler.log(ex)
        lblModalMsg.Text = "Unexpected Error Msg."
    End Try
    Me.ModalAlertBox.Visible = True
    Me.ModalUpdatePanel.Update()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:03:19.120

这已解决。我只将 ModalAlertBox 包装在 UpdatePanel 中，而不是整个表单，它已经解决了这个问题。

```
....    
<asp:UpdatePanel ID="ModalUpdatePanel" runat="server" UpdateMode="Conditional">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="btnModalSubmit" EventName="Click" />
    </Triggers>
    <ContentTemplate>
        <fieldset>
            <div id="ModalAlertBox" class="alert" runat="server" visible="false">
                <button type="button" class="close" data-dismiss="alert">×</button>
                <asp:Label ID="lblModalMsg" runat="server"></asp:Label>
            </div>
        </fieldset>
    </ContentTemplate>
</asp:UpdatePanel>
.... 
```

# java - 将 SLF4J 记录到 ElasticBeanstalk

> ID：12761183
> 
> 赞同：3
> 
> 时间：2012-10-06T15:39:38.573
> 
> 标签：java, tomcat7, slf4j, logback, amazon-elastic-beanstalk

如何将日志记录从 Tomcat 7 上的 Java webapp 路由到 ElasticBeanstalk 管理控制台或 Eclipse 插件中可见的日志？我的应用程序被编码为 SLF4J API 并由 Logback 支持。

我真的很想*不必*通过 SSH 连接到每个盒子并跟踪一个日志文件；我一直在添加和删除实例，所以这将是一个正确的痛苦。

我的 logback.xml 看起来像这样：

```
<configuration>

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <!-- encoders are assigned the type ch.qos.logback.classic.encoder.PatternLayoutEncoder by default -->
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <logger name="org.springframework" level="INFO" />
    <logger name="org.springframework.social" level="INFO" />
    <logger name="org.socialsignin" level="INFO" />

    <root level="ALL">
        <appender-ref ref="STDOUT" />
    </root>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:12:16.720

我使用 slf4j-jdk14 作为后端，它在部署到 ElasticBeanstalk 时工作正常。

以下将使您使用的所有其他库登录到同一后端：

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-jdk14</artifactId>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>log4j-over-slf4j</artifactId>
    </dependency> 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:58:28.727

I would strongly recommend to forward your logs to [papertrailapp.com](http://www.papertrailapp.com) through syslog. Read more about it in [jcabi-beanstalk-maven-plugin](http://www.jcabi.com/jcabi-beanstalk-maven-plugin/example-syslog.html). There are many benefits of this solution comparing to the one you're using, including: 1) logs are easier to read, 2) logs can be integrated in one place from many servers, 3) other systems can log into the same destination, etc.

# python - python扭曲的简单客户端-服务器通信

> ID：12761189
> 
> 赞同：1
> 
> 时间：2012-10-06T15:40:00.747
> 
> 标签：python, client, twisted, irc

试图让一个简单的 python 扭曲客户端 - 服务器应用程序工作。目的是用它来控制一些 IRC 机器人；就像一个主控制台向所有（5ish）机器人发出命令。

附加的代码有一天会形成服务器代码。目前，我正在使用 telnet 来模拟 IRC 机器人（客户端）连接到“party line”。

我坚持的是，我如何从附加的服务器应用程序 sendLine 到所有机器人？每次我创建一个循环来获取 raw_input 时，我都会停止执行。我考虑过针对连接状态函数进行测试，但似乎找不到（如果连接为真，则为 raw_input 之类的逻辑）。

```
from twisted.internet.protocol import Factory
from twisted.protocols.basic import LineReceiver
from twisted.internet import reactor

class bottalk(LineReceiver):

    botlist = []

    def lineReceived(self, line):
        botlistspot = len(self.botlist)
        self.botlist.append(line)
        print self.botlist[botlistspot] + " checked in."

class botfactory(Factory):

    def buildProtocol(self, addr):
        return bottalk()

reactor.listenTCP(8123, botfactory())
reactor.run() 
```

我试图将以下 raw_input 放在 LineReceiver 类的外部。全部结束..我希望这个 raw_input 提示不断提示输入，而不仅仅是在收到一条线之类的事件之后 - 一直.. 我希望服务器机器人控制台始终准备好接受我的输入并将 sendLine 发送给所有机器人。

```
sendLine(raw_input("> ")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:58:06.950

根本不要使用`raw_input`。相反，实例化 a `stdio.StandardIO`，给它的构造函数一个你的`LineReceiver`子类的实例。`lineReceived`每当有新行可用时，都会调用您在子类中定义的，然后`stdin`您可以将其广播给机器人。

[Twisted 网站上的这个例子](http://twistedmatrix.com/documents/current/_downloads/stdiodemo.py)演示了这个想法。

# c++ - C++ Netbeans 有时不构建

> ID：12761198
> 
> 赞同：1
> 
> 时间：2012-10-06T15:41:11.473
> 
> 标签：c++, netbeans, mingw

我在使用 Netbeans 和 Code::Blocks 时都遇到了一个奇怪的问题。但是，我现在使用的是 Netbeans，因此标题。

我有时会在构建项目并运行它时遇到问题，但是当我执行它时，它似乎只是正在运行的旧代码。

在某些情况下，我有已删除的代码。当我重新构建我的项目时，旧代码是编译的代码。

一个例子：我写了一个对象：

```
glBegin(GL_QUADS);
glVertex2f(..., ....);
glVertex2f(..., ....);
glVertex2f(..., ....);
glVertex2f(..., ....);
glEnd(); 
```

在某些情况下，当我删除这段代码并构建我的项目时，这个对象仍然出现在我的可执行文件中。

就像我的项目有时没有被构建一样。我什至尝试多次构建它。

我正在使用MingW。

如果有人这样......他们会告诉我我的代码是错误的。这只是一个例子，所以不要费心提及它！

我现在还应该说，有时当我在构建时，它根本没有检测到任何错误......但这似乎是“随机”发生的。我找不到此行为的链接。同样，有时它构建得很好 - 它构建的代码实际上是编译的，而其他时候它说它已经构建了我的项目，但它根本没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:45:28.233

I don't really know why it happens but it's happened to me before too. Just use "Clean and rebuild". Most IDEs have this option.

# android - 连接可扩展列表视图级联复选框

> ID：12761200
> 
> 赞同：0
> 
> 时间：2012-10-06T15:41:33.797
> 
> 标签：android, multithreading, android-listview, android-asynctask, android-view

这是一次很棒的学习经历，但我的 expandablelistview 适配器终于快用完了。它在组和子视图上有复选框，因此，直观地，您可以通过组视图复选框的操作禁用/启用对子视图的所有检查。现在剩下的就是使组视图复选框对应于子视图。当我尝试它崩溃。

```
 for(int i = 0; i < check_states.get(groupPosition).size(); i++) {
        if (check_states.get(groupPosition).get(i) == false) {
            Log.d ("Meat", "Child checkboxes are not all checked!!!");
        }
    } 
```

我现在非常确定，这是因为我在 arraylist 完成填充之前调用了这些命令——>“check_states”是一个 arraylist 的arraylist，我用来保持复选框的检查状态。

所以我的问题很简单，在我调用命令之前如何等待 arraylist 完成填充。我已经研究了我能做的事情，但他们似乎比这更有价值。我宁愿设置一个长按菜单，也不愿设置一个单独的线程或为如此微薄的东西设置 10 行代码。

编辑：用 logcat 更新

```
10-06 19:18:08.204: W/dalvikvm(540): threadid=1: thread exiting with uncaught exception (group=0x40015560)
10-06 19:18:08.224: E/AndroidRuntime(540): FATAL EXCEPTION: main
10-06 19:18:08.224: E/AndroidRuntime(540): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
10-06 19:18:08.224: E/AndroidRuntime(540):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
10-06 19:18:08.224: E/AndroidRuntime(540):  at java.util.ArrayList.get(ArrayList.java:311)
10-06 19:18:08.224: E/AndroidRuntime(540):  at com.mangodeveloper.mcathomie.McatTopicsExpandableListAdapter.getGroupView(McatTopicsExpandableListAdapter.java:166)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.widget.ExpandableListConnector.getView(ExpandableListConnector.java:445)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.widget.AbsListView.obtainView(AbsListView.java:1430)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.widget.ListView.makeAndAddView(ListView.java:1745)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.widget.ListView.fillDown(ListView.java:670)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.widget.ListView.fillFromTop(ListView.java:727)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.widget.ListView.layoutChildren(ListView.java:1598)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.widget.AbsListView.onLayout(AbsListView.java:1260)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.view.View.layout(View.java:7175)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.view.View.layout(View.java:7175)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.view.View.layout(View.java:7175)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.view.View.layout(View.java:7175)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.view.View.layout(View.java:7175)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.view.View.layout(View.java:7175)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.os.Looper.loop(Looper.java:123)
10-06 19:18:08.224: E/AndroidRuntime(540):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-06 19:18:08.224: E/AndroidRuntime(540):  at java.lang.reflect.Method.invokeNative(Native Method)
10-06 19:18:08.224: E/AndroidRuntime(540):  at java.lang.reflect.Method.invoke(Method.java:507)
10-06 19:18:08.224: E/AndroidRuntime(540):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-06 19:18:08.224: E/AndroidRuntime(540):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-06 19:18:08.224: E/AndroidRuntime(540):  at dalvik.system.NativeStart.main(Native Method) 
```

再次编辑：这只是可扩展适配器的相关部分

```
public class McatTopicsExpandableListAdapter extends BaseExpandableListAdapter {

...

public View getChildView(final int groupPosition, final int childPosition, boolean isLastChild,
            View convertView, ViewGroup parent) {

        final ViewHolder holder;

        if (convertView == null) {
            LayoutInflater viewInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = viewInflater.inflate(R.layout.mtopics_childview, parent, false);  
            holder = new ViewHolder();
            holder.text = (TextView)convertView.findViewById(R.id.mtopicschildtv);
            holder.checkbox = (CheckBox)convertView.findViewById(R.id.mtopicchildchkbox);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.text.setText(getChild(groupPosition, childPosition).toString());

        for(int i = 0; i < children.length; i++) {
            ArrayList<Boolean> tmp = new ArrayList<Boolean>(children[i].length);
            for(int j = 0; j < children[i].length; j++) {
                tmp.add(true);
            }
            check_states.add(tmp);
        }

        if (check_states.get(groupPosition).get(childPosition) == true) {
            holder.checkbox.setChecked(true);
        }else{ holder.checkbox.setChecked(false);
        }

        holder.checkbox.setOnClickListener(new OnClickListener() {  
            public void onClick(View v) {
                if (holder.checkbox.isChecked()) {
                    check_states.get(groupPosition).set(childPosition, true);
                }else{ check_states.get(groupPosition).set(childPosition, false);
                }
            }   
        });

        return convertView;
    }

    public View getGroupView(final int groupPosition, boolean isExpanded, View convertView,
            ViewGroup parent) {

        ViewHolder holder;

        if (convertView == null) {
            LayoutInflater viewInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = viewInflater.inflate(R.layout.mtopics_groupview, parent, false);
            holder = new ViewHolder();
            holder.text = (TextView)convertView.findViewById(R.id.mtopicsgrouptv);
            holder.checkbox = (CheckBox)convertView.findViewById(R.id.cb_group);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.text.setText(getGroup(groupPosition).toString());

        for(int i = 0; i < check_states.get(groupPosition).size(); i++) {
            if (check_states.get(groupPosition).get(i) == false) {
                Log.d ("Meat", "Child checkboxes are not all checked!!!");
            }
        }

        holder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if (isChecked) {
                    for(int i = 0; i < check_states.get(groupPosition).size(); i++) {
                        check_states.get(groupPosition).set(i, true);   
                    }       
                } else if (!isChecked)
                    for(int i = 0; i < check_states.get(groupPosition).size(); i++) {
                        check_states.get(groupPosition).set(i, false);          
                    }

                notifyDataSetChanged();
            }
        }); 

        return convertView;
    }

    //  additional components
    ArrayList<ArrayList<Boolean>> check_states = new ArrayList<ArrayList<Boolean>>(children.length);

    static class ViewHolder {
        TextView text;
        CheckBox checkbox;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:29:55.413

您正在检查不同数组的长度...将循环条件更改为：

```
for(int i = 0; i < check_states.get(groupPosition).size(); i++) {
    if (check_states.get(groupPosition).get(i) == false) {
        Log.d ("Meat", "Child checkboxes are not all checked!!!");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T22:32:42.370

行。请记住，我的目标是带有复选框的级联链，我终于弄清楚我做错了什么。当我看到可扩展列表视图时，我的数组列表没有被填充的原因是因为它默认折叠并且我将实例化放在尚未被调用的 getChildView 中。所以将它移动到 getGroupView 代码块修复了这个问题。但是为了让组复选框按应有的方式工作，我需要一个新的（小得多的）数组列表，仅用于这些组列表复选框，以便它们的状态持续存在。然后我相应地设置有线复选框事件。我认为值得注意的是调用 notifyDataSetChanged() 在单击侦听器或事件更改侦听器中效果最好，因为如果它在打开或某些条件语句中被遗漏，那么就会冒着被外部调用的风险，这是锁定打开我的可扩展列表视图。以下是修改后的代码的重要部分，我将更改主题以准确反映答案，因为这个问题朝着不同的方向发展。

```
ArrayList<ArrayList<Boolean>> child_check_states = new ArrayList<ArrayList<Boolean>>(children.length);
ArrayList<Boolean> group_check_states = new ArrayList<Boolean> (groups.length);

static class ViewHolder {
    TextView text;
    CheckBox checkbox;
}

public View getChildView(final int groupPosition, final int childPosition, boolean isLastChild,
        View convertView, ViewGroup parent) {

    final ViewHolder holder;

    if (convertView == null) {
        LayoutInflater viewInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = viewInflater.inflate(R.layout.mtopics_childview, parent, false);  
        holder = new ViewHolder();
        holder.text = (TextView)convertView.findViewById(R.id.mtopicschildtv);
        holder.checkbox = (CheckBox)convertView.findViewById(R.id.mtopicchildchkbox);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.text.setText(getChild(groupPosition, childPosition).toString());

    if (child_check_states.get(groupPosition).get(childPosition) == true) {
        holder.checkbox.setChecked(true);   
    }else{ holder.checkbox.setChecked(false);
    }

    holder.checkbox.setOnClickListener(new OnClickListener() {  
        public void onClick(View v) {
            if (holder.checkbox.isChecked()) {
                child_check_states.get(groupPosition).set(childPosition, true);
                if (child_check_states.get(groupPosition).contains(false)) {
                    group_check_states.set(groupPosition, false);
                }else{
                    group_check_states.set(groupPosition, true);
                }
            }else{ 
                child_check_states.get(groupPosition).set(childPosition, false);
                group_check_states.set(groupPosition, false);
            }
            notifyDataSetChanged();
        }   
    });

    return convertView;
}

public View getGroupView(final int groupPosition, boolean isExpanded, View convertView,
        ViewGroup parent) {

    fillChildArraylists();
    fillGroupArraylist();

    final ViewHolder holder;

    if (convertView == null) {
        LayoutInflater viewInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = viewInflater.inflate(R.layout.mtopics_groupview, parent, false);
        holder = new ViewHolder();
        holder.text = (TextView)convertView.findViewById(R.id.mtopicsgrouptv);
        holder.checkbox = (CheckBox)convertView.findViewById(R.id.cb_group);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.text.setText(getGroup(groupPosition).toString());

    if ((group_check_states.get(groupPosition)) == true) {
        holder.checkbox.setChecked(true);
    } else {
        holder.checkbox.setChecked(false);
    }

    holder.checkbox.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            if (holder.checkbox.isChecked()) {
                for(int i = 0; i < child_check_states.get(groupPosition).size(); i++) {
                    child_check_states.get(groupPosition).set(i, true);
                    group_check_states.set(groupPosition, true);
                }
            } else {
                for(int i = 0; i < child_check_states.get(groupPosition).size(); i++) {
                    child_check_states.get(groupPosition).set(i, false);
                    group_check_states.set(groupPosition, false);
                }
            }
            notifyDataSetChanged();
        }
    });

    return convertView;
}

private void fillChildArraylists () {
    for(int i = 0; i < children.length; i++) {
        ArrayList<Boolean> tmp = new ArrayList<Boolean>(children[i].length);
        for(int j = 0; j < children[i].length; j++) {
            tmp.add(true);
        }
        child_check_states.add(tmp);
    }
}

private void fillGroupArraylist () {
    for(int i = 0; i < groups.length; i++) {
        group_check_states.add(true);
    }
} 
```

# php - php/mysql arrays strip out fields

> ID：12761204
> 
> 赞同：0
> 
> 时间：2012-10-06T15:41:58.837
> 
> 标签：php, mysql, arrays

I am running a query on a dbase that returns a multi-field recordset or array on fetch. The array is multi-field as I need several fields to output to the screen. However, I then want to save an array of just one variable, the id for each record. to compare against another list of records. So I need to, in effect, strip all but one field from the array.

In effect, I want to reduce (not using proper array notation):

```
{1 red dog, 2 orange cat, 3 yellow canary} 
```

to

```
{1,2,3} 
```

Is there an easy way to do this?

Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T15:52:30.227

基本上你想要的叫做数组采摘；这是一个将其引入语言的[RFC ，但尚未被接受。](https://wiki.php.net/rfc/array_column)

与此同时，你只需要用老式的方式来做：

```
$a = array(
    array('id' => 1, 'title' => 'title1'),
    array('id' => 2, 'title' => 'title2'),
);

array_map(function($v) {
    return $v['id'];
}, $a);

// returns array(1, 2) 
```

在 5.3 之前你必须这样写：

```
function getid($v)
{
    return $v['id'];
}

array_map('getid', $a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T15:48:34.127

我不确定我是否遵循您对数组设置的解释，但您正在寻找的函数可能是“array_keys”PHP 函数，它仅返回数组键。

如果这不是您正在寻找的答案，也许您可​​以通过使用正确的数组表示法来澄清您的问题，或者可能是数据库中的一个实际示例，指定您要隔离的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T15:50:45.033

你的数组格式不清楚

选项 A

```
$array = array("1 red dog", "2 orange cat", "3 yellow canary");
$array = array_map(function($var){  $var = explode(" ", $var,2) ; return array_shift($var); }, $array);
var_dump($array); 
```

选项 B

```
$array = array("1" =>"red dog", "2" =>"orange cat", "3" =>"yellow canary");
$array = array_keys($array);
var_dump($array); 
```

输出

```
array
  0 => string '1' (length=1)
  1 => string '2' (length=1)
  2 => string '3' (length=1) 
```

# php - Exam drop down menu is not appearing

> ID：12761207
> 
> 赞同：1
> 
> 时间：2012-10-06T15:42:45.857
> 
> 标签：php, html, database, mysqli

I am trying to retrieve exams(sessions) depending on the module the teacher has chosen from the previous drop down menu.

For Example:

**Module selected from drop down:** CHI2332 (ModuleId) Advanced Database Systems (ModuleName)

**Exam(Session) shown in drop down:**

AAA (SessionId) 24-04-2012 (SessionDate) 11:00:00 (Session Time)
ARF (SessionId) 13-06-2012 (SessionDate) 14:00:00 (Session Time)
EFT (SessionId) 10-09-2012 (SessionDate) 09:00:00 (Session Time)

It should display the exams above in the drop down menu as these exams match the moduleId chosen from the module dropdown menu and the TeacherId for these exams belong to the Teacher Username logged into to this page.

The problem is that in the Exam drop down menu, it cannot seem to find any exams even though the modules are legitimate for those exams and hence it should display those exams in the drop down menu.

It just outputs this error below in its place:

```
Sessions: Notice: Undefined variable: sessionHTML in /.../ on line 178 
```

How can I get the exams to appear in the drop down menu when it should do?

Below are the database tables:

**Session Table:**

```
SessionId SessionDate SessionTime ModuleId  
AAA       24-04-2012  11:00:00    CHI2332 
ARF       13-06-2012  14:00:00    CHI2332 
EFT       10-09-2012  09:00:00    CHI2332 
```

**Module Table:**

```
ModuleId  ModuleName
CHI2332   Advanced Database Systems 
```

Below is the php/mysqli code:

```
<?php

         // connect to the database
 include('connect.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

   $courseid = (isset($_POST['courseid'])) ? $_POST['courseid'] : '';

   ?>

       <h1>DELETING AN ASSESSMENT</h1>

        <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
         <p>Course ID: <input type="text" name="courseid" /><input id="courseSubmit" type="submit" value="Submit" name="submit" /></p>      
        </form>

        <?php
if (isset($_POST['submit'])) {

        $query = "
                 SELECT cm.CourseId, cm.ModuleId, 
                 c.CourseName,
                 m.ModuleName
                 FROM Course c
                 INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
                 JOIN Module m ON cm.ModuleId = m.ModuleId
                 WHERE
                 (c.CourseId = ?)
                 ORDER BY c.CourseName, m.ModuleId
                ";

    $qrystmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $qrystmt->bind_param("s",$courseid);
    // get result and assign variables (prefix with db)

    $qrystmt->execute(); 

    $qrystmt->bind_result($dbCourseId,$dbModuleId,$dbCourseName,$dbModuleName);

     $qrystmt->store_result();

    $num = $qrystmt->num_rows();

    if($num ==0){
        echo "<p>Sorry, No Course was found with this Course ID '$courseid'</p>";
    } else { 

        $dataArray = array();

 while ( $qrystmt->fetch() ) { 
          // data array
          $dataArray[$dbCourseId]['CourseName'] = $dbCourseName; 
          $dataArray[$dbCourseId]['Modules'][$dbModuleId]['ModuleName'] = $dbModuleName; 
           // session data
          $_SESSION['idcourse'] = $dbCourseId;
          $_SESSION['namecourse'] = $dbCourseName;

    }

     foreach ($dataArray as $courseId => $courseData) {

          $output = ""; 

          $output .= "<p><strong>Course:</strong> " . $courseId .  " - "  . $courseData['CourseName'] . "</p>";

       $moduleHTML = ""; 
       $moduleHTML .= '<select name="module" id="modulesDrop">'.PHP_EOL;
       $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;      
            foreach ($courseData['Modules'] as $moduleId => $moduleData) {        

            $moduleHTML .= "<option value='$moduleId'>" . $moduleId . " - " . $moduleData['ModuleName'] ."</option>".PHP_EOL;        
  } 
            }
            $moduleHTML .= '</select>';

      echo $output;

        }

        ?>

         <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
         <p>Module: <?php echo $moduleHTML; ?><input id="moduleSubmit" type="submit" value="Submit" name="modulesubmit" /></p>      
        </form> 

        <?php

    }

 if (isset($_POST['modulesubmit'])) {

     var_dump($_POST['modulesDrop']);

            $sessionquery = "
                 SELECT SessionId, SessionDate, SessionTime, ModuleId
                 FROM Session
                 WHERE
                 (ModuleId = ?)
                 ORDER BY SessionDate, SessionTime 
                ";

    $sessionqrystmt=$mysqli->prepare($sessionquery);
    // You only need to call bind_param once
    $sessionqrystmt->bind_param("s",$_POST['modulesDrop']);
    // get result and assign variables (prefix with db)

    $sessionqrystmt->execute(); 

    $sessionqrystmt->bind_result($dbSessionId,$dbSessionDate,$dbSessionTime, $dbModuleId);

     $sessionqrystmt->store_result();

    $sessionnum = $sessionqrystmt->num_rows();   

        $dataArraySession = array();

 while ( $sessionqrystmt->fetch() ) { 

     $dataArraySession[$dbModuleId]['Sessions'][$dbSessionId]['SessionDate'] = $dbSesisonDate['SessionTime'] = $dbSessionTime; 

    }

    foreach ($dataArraySession as $sessionId => $sessionData) {

       $sessionHTML = ""; 
       $sessionHTML .= '<select name="session" id="sessionsDrop">'.PHP_EOL;
       $sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;           
       $sessionHTML .= "<option value='$sessionId'>" . $sessionId . " - " . $sessionData['SessionDate']. " - " . $sessionData['SessionTime'] ."</option>".PHP_EOL;        
       $sessionHTML .= '</select>';
            }

     if ($sessionnum > 0) {

 ?>

         <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
         <p>Sessions: <?php echo $sessionHTML; ?><input id="sessionSubmit" type="submit" value="Submit" name="sesionsubmit" /></p>      
        </form>       

<?php

    }

    else {
   echo "<p>Sorry, You have No Sessions under this Module</p>";
}

}

        ?> 
```

Link to application is here: [Application](http://helios.hud.ac.uk/u0867587/Mobile_app/deletesession.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:40:07.143

我在这里看到一个错字（第 111 行）：

`$dataArraySession[$dbSessionId]['Sessions']['SessionDate'] = $dbSesisonDate['SessionTime'] = $dbSesisonTime;`

您绑定的参数被调用`$dbSessionTime`，并且您正在分配`$dbSesisonTime`给您的`$dataArraySession`数组。这将导致`$dataArraySession`第 109 行的 while 循环中的任何值都不会被填充。随后`foreach`，第 115 行中的循环将永远不会被执行，并且由于`$sessionHTML`在此循环中定义，因此稍后在第 131 行中使用它时将未定义

PS：为您的应用程序提供的链接需要身份验证才能继续。

**编辑**以提供代码示例，以防特定的数据不存在`courseId`：

`130-132`在语句中换行`if`，以确保仅在找到某些结果时才显示下拉菜单

```
if ($sessionnum > 0) {
   // display your form
}
else {
   echo "No results found!";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T21:03:31.823

Change `$sessionHTML .= '<select name="session" id="sessionsDrop">'.PHP_EOL;`

To `$sessionHTML .= '<select name="sessionsDrop" id="sessionsDrop">'.PHP_EOL;`

It is name not id that is passed in POST

```
<?php

     // connect to the database
 include('connect.php');

 /* check connection */
 if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
die();
}

 $courseid = (isset($_POST['courseid'])) ? $_POST['courseid'] : '';

?>

   <h1>DELETING AN ASSESSMENT</h1>

    <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
     <p>Course ID: <input type="text" name="courseid" /><input id="courseSubmit" type="submit" value="Submit" name="submit" /></p>      
    </form>

    <?php
  if (isset($_POST['submit'])) {

    $query = "
             SELECT cm.CourseId, cm.ModuleId, 
             c.CourseName,
             m.ModuleName
             FROM Course c
             INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
             JOIN Module m ON cm.ModuleId = m.ModuleId
             WHERE
             (c.CourseId = ?)
             ORDER BY c.CourseName, m.ModuleId
            ";

$qrystmt=$mysqli->prepare($query);
// You only need to call bind_param once
$qrystmt->bind_param("s",$courseid);
// get result and assign variables (prefix with db)

$qrystmt->execute(); 

$qrystmt->bind_result($dbCourseId,$dbModuleId,$dbCourseName,$dbModuleName);

 $qrystmt->store_result();

$num = $qrystmt->num_rows();

if($num ==0){
    echo "<p>Sorry, No Course was found with this Course ID '$courseid'</p>";
} else { 

    $dataArray = array();

 while ( $qrystmt->fetch() ) { 
      // data array
      $dataArray[$dbCourseId]['CourseName'] = $dbCourseName; 
      $dataArray[$dbCourseId]['Modules'][$dbModuleId]['ModuleName'] = $dbModuleName; 
       // session data
      $_SESSION['idcourse'] = $dbCourseId;
      $_SESSION['namecourse'] = $dbCourseName;

}

 foreach ($dataArray as $courseId => $courseData) {

      $output = ""; 

      $output .= "<p><strong>Course:</strong> " . $courseId .  " - "  . $courseData['CourseName'] . "</p>";

   $moduleHTML = ""; 
   $moduleHTML .= '<select name="modulesDrop" id="modulesDrop">'.PHP_EOL;
   $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;      
        foreach ($courseData['Modules'] as $moduleId => $moduleData) {        

        $moduleHTML .= "<option value='$moduleId'>" . $moduleId . " - " .   
    $moduleData['ModuleName'] ."</option>".PHP_EOL;        
  } 
        }
        $moduleHTML .= '</select>';

  echo $output;

    }

    ?>

     <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
     <p>Module: <?php echo $moduleHTML; ?><input id="moduleSubmit" type="submit" value="Submit" name="modulesubmit" /></p>      
    </form> 

    <?php

}

 if (isset($_POST['modulesubmit'])) {

 var_dump($_POST['modulesDrop']);

        $sessionquery = "
             SELECT SessionId, SessionDate, SessionTime, ModuleId
             FROM Session
             WHERE
             (ModuleId = ?)
             ORDER BY SessionDate, SessionTime 
            ";

$sessionqrystmt=$mysqli->prepare($sessionquery);
// You only need to call bind_param once
$sessionqrystmt->bind_param("s",$_POST['modulesDrop']);
// get result and assign variables (prefix with db)

$sessionqrystmt->execute(); 

$sessionqrystmt->bind_result($dbSessionId,$dbSessionDate,$dbSessionTime, $dbModuleId);

 $sessionqrystmt->store_result();

$sessionnum = $sessionqrystmt->num_rows();   

    $dataArraySession = array();

 while ( $sessionqrystmt->fetch() ) { 

 $dataArraySession[$dbSessionId]['SessionDate'] = $dbSessionDate;  
 $dataArraySession[$dbSessionId]['SessionTime'] = $dbSessionTime;

}

foreach ($dataArraySession as $sessionId => $sessionData) {

   $sessionHTML = ""; 
   $sessionHTML .= '<select name="session" id="sessionsDrop">'.PHP_EOL;
   $sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;           
   $sessionHTML .= "<option value='$sessionId'>" . $sessionId . " - " . $sessionData['SessionDate']. " - " . $sessionData['SessionTime'] ."</option>".PHP_EOL;        
   $sessionHTML .= '</select>';
        }

 if ($sessionnum > 0) {

 ?>

     <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
     <p>Sessions: <?php echo $sessionHTML; ?><input id="sessionSubmit" type="submit" value="Submit" name="sesionsubmit" /></p>      
    </form>       

<?php

}

else {
 echo "<p>Sorry, You have No Sessions under this Module</p>";
}

}

    ?> 
```

# c - Simple socket program to receive website ( assertion bug )

> ID：12761214
> 
> 赞同：0
> 
> 时间：2012-10-06T15:43:42.667
> 
> 标签：c, sockets, network-programming

I'm new to socketprogramming and wanted to write a little console app to receive a webpage and just print it out.

This is my code:

```
#include <stdio.h>
#include <winsock2.h>
#include <winsock.h>
#include <Ws2tcpip.h>

#pragma comment(lib, "ws2_32.lib" )

#define BUFFERSIZE 5000

int main()
{
    WSADATA wsaData; 
    char buffer[BUFFERSIZE];
    char *getMsg = {"GET / HTTP/1.0\nUser-Agent: HTTPTool/1.0\n\n"};
    char * url = (char*)malloc(BUFFERSIZE);
    int socket_fd = 0;
    int receivingContent = 1; 
    int errorValue;
    int numbytes;
    struct addrinfo hints;
    struct addrinfo *servinfo, *p;  
    socklen_t addr_size;

    if (WSAStartup(MAKEWORD(2,0), &wsaData) != 0) 
    {
        fprintf(stderr, "WSAStartup failed.\n");
        exit(1);
    }

    memset(&hints, 0, sizeof(hints));   // empty struct
    hints.ai_family = AF_UNSPEC;        // IPv4 or IPv6
    hints.ai_socktype = SOCK_STREAM;    // using TCP

    printf("Give a website like for example: www.google.com \n");
    scanf("%s",url);

    //Error testing
    if ((errorValue = getaddrinfo(url, "80", &hints, &servinfo)) != 0) {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(errorValue));
        return 1;
    }

    // loop through all the results and bind to the first we can
    for(p = servinfo; p != NULL; p = p->ai_next) {
        if ((socket_fd = socket(p->ai_family, p->ai_socktype,p->ai_protocol)) == -1) {
            perror("Failed to create socket");
            continue;
        }
        break;
    }

    //sending the http get message to the server
    send(socket_fd, getMsg, strlen(getMsg), 0);

    //While the full content isn't downloaded keep receiving
    while(receivingContent)
    {
        numbytes = recv(socket_fd, buffer,BUFFERSIZE , 0);
        if(numbytes > 0)
        {
            buffer[numbytes]='\0';
            printf("%s", buffer);
        }
        else
            receivingContent = 0; //stop receiving
    }

    free(url);
    free(getMsg);
    freeaddrinfo(servinfo);
    closesocket(socket_fd); //close the socket
    WSACleanup();
    return 0;
} 
```

It compiles and then when I enter for example www.google.com it crashes and it gives me file of C. I'm looking for the error but in my opinion I'm doing it right...

Can someone help me please?

Kind regards,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:10:30.330

感谢 Marcus，需要在 recv 之前进行连接。还有一个小错误是我在进行连接之前进行了发送。改变它，一切正常！

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:55:57.953

我没有`connect`在你的程序中找到。你可能需要做`connect`之前做`recv`。

# c# - Auto generate business objects from entity framework plus auto mapping

> ID：12761217
> 
> 赞同：0
> 
> 时间：2012-10-06T15:44:05.037
> 
> 标签：c#, .net, entity-framework

For a large project with hundreds of tables, is there a way to automatically generate the business objects based on the .edmx file rather than to create them manually one by one?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:56:07.020

您可以使用自定义 t4 模板来生成它们。如果您随后需要手动编辑它们，我想您可以将它们设为部分，但您需要手动制作部分类的另一半。

[http://msdn.microsoft.com/en-us/data/gg558520.aspx](http://msdn.microsoft.com/en-us/data/gg558520.aspx)

# android - Actionbar like evernote - up button and tabs in one row on top with menu actions at bottom

> ID：12761218
> 
> 赞同：1
> 
> 时间：2012-10-06T15:44:25.967
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock

I have app which has actionbar containing 1) up button which opens side bar menu for navigation just like google plus 2) 2 action menu buttons 3) 2 tabs implemented via view pager

I have successfully implementing actionbar using actionbarsherlock and the result is - > ![enter image description here](../Images/0d1f46c2550f392766f8a96b65a0544a.png)

![enter image description here](../Images/28dc9034a7a2787486f5813f8deeb603.png)

i want to implement something like evernote app where up button and tabs are in one row and action menu uses split actionbar . i have icons for tabs so fitting them with up button in one row is not an issue

can someone please point me in right direction as to how i can have have up button in the same horizontal bar as tab by modifying actionbarsherlock lib .

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:26:07.487

//enabling embedded tabs

```
//pre-ICS
if (actionBarSherlock instanceof ActionBarImpl) {
    enableEmbeddedTabs(actionBarSherlock);

//ICS and forward
} else if (actionBarSherlock instanceof ActionBarWrapper) {
    try {
        Field actionBarField = actionBarSherlock.getClass().getDeclaredField("mActionBar");
        actionBarField.setAccessible(true);
        enableEmbeddedTabs(actionBarField.get(actionBarSherlock));
    } catch (Exception e) {
        Log.e(TAG, "Error enabling embedded tabs", e);
    }
}

//helper method
private void enableEmbeddedTabs(Object actionBar) {
    try {
        Method setHasEmbeddedTabsMethod = actionBar.getClass().getDeclaredMethod("setHasEmbeddedTabs", boolean.class);
        setHasEmbeddedTabsMethod.setAccessible(true);
        setHasEmbeddedTabsMethod.invoke(actionBar, true);
    } catch (Exception e) {
        Log.e(TAG, "Error marking actionbar embedded", e);
    }
} 
```

for further reference - [https://groups.google.com/forum/#!topic/actionbarsherlock/hmmB1JqDeCk](https://groups.google.com/forum/#!topic/actionbarsherlock/hmmB1JqDeCk)

# apache - Massive jQuery ajax requests in a few time

> ID：12761219
> 
> 赞同：0
> 
> 时间：2012-10-06T15:44:31.247
> 
> 标签：apache, jquery, nginx

I'm searching for the best pratices to threat massive requests using jQuery ajax. Basically I have this situation:

```
var req = 0;
var p; // global scope
function getServerLoad() {
    p = $.ajax({
        url: 'system/sysload/get-server-load/'+req,
        method: 'get',
        dataType: 'json',
        timeout: 1000,
        success:  function(r) {
            if (r.success) {
                // print server loads
            } else {
                // abnormal situation
            }
        },
        error: function() {
            // http error or timeout action
            p.abort();
        }    
    });
    req++;
} 
```

Looking at [Browserscope](http://www.browserscope.org/?category=network) in my Firefox 15 I can do at max 17 connections and only 6 connections per Hostname.

In this case I tried one solution: make a wildcard CNAME at DNS and point r[1...999999].mydomain.com to www.mydomain.com, but Firefox doesn't allows connection to subdomain. I think will be threathed like an XSS.

I have another idea analyzing Google Suggest and this post (In Portuguese).

[http://danilow.wordpress.com/2009/05/28/google-suggest-nao-e-ajax/](http://danilow.wordpress.com/2009/05/28/google-suggest-nao-e-ajax/)

In resume, in firsts versions of Google Suggest it doesn't uses Ajax. It make get requests by creating and replacing dynamic `<script>` elements - it's a smart solution because some older browsers doesn't suports XmlHttpRequest component, and by replacing old requests under user typing an search term will have only 1 (one) concurrent search request - it's because every new `onkeyup` event will overwrite the last request.

By the way... I see similar questions in stackoverflow, but specifically in a enviroment with Linux / PHP / Apache<<--reverse-proxy-->>nginx, somebody have a nice solution?

PS: sorry for the bad english.

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:06:49.157

最后，我找到了一种创建 DNS 通配符的解决方案，例如 *.myappdomain.com

并且在跨域中使用 JOSNP 进行 ajax，就像一个魅力。

# ruby-on-rails - Template is missing --> For PUT Request

> ID：12761222
> 
> 赞同：0
> 
> 时间：2012-10-06T15:44:38.483
> 
> 标签：ruby-on-rails, ruby, coffeescript

I was able to integrate stripe using Ryan Bates' tutorial. Now, I'd like to be able to allow users to update their Credit Card Information. I've set up a form, at change_plan_path, which sends A PUT request to users/update_card . However, when I click the Update Credit Card Button, I get the error :

```
Template is missing

Missing template users/update_card, application/update_card with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "C:/Sites/dentist/app/views" 
```

Here's the form I'm using to send the PUT Request :

```
 <%= form_tag("/users/update_card", :method => "put", :class => "edit_user", :id => "change_card" ) do %>
  <%= hidden_field_tag :stripe_card_token %>

  <div id="stripe_error" class="alert">   
      <noscript>JavaScript is not enabled and is required for this form. First enable it in your web browser settings.</noscript>
  </div>

    <div class="field">
      <%= label_tag :card_number, "Credit Card Number" %>
      <%= text_field_tag :card_number, nil, name: nil %>
    </div>
    <div class="field">
      <%= label_tag :card_code, "Security Code on Card (CVV)" %>
      <%= text_field_tag :card_code, nil, name: nil %>
    </div>
    <div class="field">
      <%= label_tag :card_month, "Card Expiration" %>
      <%= select_month nil, {add_month_numbers: true}, {name: nil, id: "card_month"} %>
      <%= select_year nil, {start_year: Date.today.year, end_year: Date.today.year+15}, {name: nil, id: "card_year"} %>
    </div>

  <%= submit_tag("Update My Credit Card", :class => "button") %> 
```

Here's my routes.rb file :

```
 put '/users/update_plan',  to: 'users#update_plan'
  put '/users/update_card',  to: 'users#update_card'
  resources :users
  resources :sessions, only: [:new, :create, :destroy]
  resources :phones, only: [:new, :create, :destroy]
  resources :find_numbers, only: [:new, :create]  

  match '/signup',  to: 'users#new'
  match '/login',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete
  match '/change_plan',  to: 'users#change_plan'
  match '/change_card',  to: 'users#change_card'

  root  to: 'static_pages#home'

  match '/product_demo', to: 'static_pages#product_demo'

  match '/pricing', to: 'plans#index'

  match '/contact', to: 'static_pages#contact' 
```

And here's the Stripe Coffescript I'm using. It doesn't seem to even work yet, but maybe it has something to do with it. (Start with changecard.setupForm() )

```
jQuery ->
  Stripe.setPublishableKey($('meta[name="stripe-key"]').attr('content'))
  subscription.setupForm()

subscription =
  setupForm: ->
    $('#new_user').submit ->
      $('input[type=submit]').attr('disabled', true)
      if $('#card_number').length
        subscription.processCard()
        false
      else
        true

  processCard: ->
    card =
      number: $('#card_number').val()
      cvc: $('#card_code').val()
      expMonth: $('#card_month').val()
      expYear: $('#card_year').val()
    Stripe.createToken(card, subscription.handleStripeResponse)

  handleStripeResponse: (status, response) ->
    if status == 200
      $('#user_stripe_card_token').val(response.id)
      $('#new_user')[0].submit()
    else
      $('#stripe_error').text(response.error.message)
      $('input[type=submit]').attr('disabled', false)

 changecard.setupForm()

changecard =
  setupForm: ->
    $('#change_card').submit ->
      $('input[type=submit]').attr('disabled', true)
      if $('#card_number').length
        subscription.processCard()
        false
      else
        true

  processCard: ->
    card =
      number: $('#card_number').val()
      cvc: $('#card_code').val()
      expMonth: $('#card_month').val()
      expYear: $('#card_year').val()
    Stripe.createToken(card, subscription.handleStripeResponse)

  handleStripeResponse: (status, response) ->
    if status == 200
      $('#user_stripe_card_token').val(response.id)
      $('#change_card')[0].submit()
    else
      $('#stripe_error').text(response.error.message)
      $('input[type=submit]').attr('disabled', false) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:06:16.207

通常，当您收到此错误时，它是在控制器操作执行之后并且它正试图将某些内容呈现回浏览器。除非您明确告诉它要渲染什么，否则它将尝试根据控制器/动作提供视图。在不知道您的控制器是什么样子的情况下，很难准确地说出您在信息更新后会发生什么。我希望您要么想要重定向到新页面，要么呈现页面。

如果要重定向，可以使用 with`redirect_to`并指定路径。在以下示例中，我假设您要重定向到用户显示操作：

```
redirect_to user_url(current_user) 
```

如果要渲染某些内容，则需要为 update_card.html.erb 创建一个 html 模板或渲染一些任意内容，例如：

```
render :text => "yay" 
```

# c# - 如何有条件地隐藏 WPF 中的绑定值？

> ID：12761224
> 
> 赞同：0
> 
> 时间：2012-10-06T15:44:54.267
> 
> 标签：c#, wpf

我在 WPF 的 GridView 中有以下两个 GridViewColumns：

```
<GridViewColumn Header="Payment">
    <GridViewColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=LocalAmount}"/>
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn>
<GridViewColumn Header="Deposit">
    <GridViewColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=LocalAmount}"/>
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

我想做的是，如果“LocalAmount”为正数，则仅显示在“存款”列中，如果为负数，则仅显示在“付款”列中（没有负号）。

有没有简单的方法来实现这一目标？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:36:37.390

您可以使用两个不同的值转换器。其中一个显示正值，另一个显示负值。

有用的链接：

*   [IValueConverter 接口](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)
*   [数据绑定概览中的示例](http://msdn.microsoft.com/en-us/library/ms752347.aspx#data_conversion)

# php - IntelliJ IDEA 中的 PHP 调试

> ID：12761229
> 
> 赞同：2
> 
> 时间：2012-10-06T15:45:25.073
> 
> 标签：php, debugging, drupal, intellij-idea, xdebug

好吧，我可能很愚蠢，但我无法让它工作。

设置是：

*   Ubuntu
*   阿帕奇2
*   xdebug
*   IntelliJ IDEA 11.1.3 终极版
*   IntelliJ IDEA PHP 插件

xdebug 已安装。

我想在我的本地机器上调试 Drupal 站点，项目在这里：

```
/var/www/luken/my-site 
```

网址在这里：

```
http://localhost/luken/my-site 
```

因为我无法从现有资源创建项目，所以我在那里从头开始创建了新项目（Web 模块）。现在的问题是，如果我正在运行“PHP 脚本”的配置 - 调试器可以工作。但是，如果我尝试使用 PHP Web 应用程序的配置（因此项目将在浏览器中打开），它将无法连接到调试器。我尝试了很多东西，以及不同的映射，但显然我错过了一些愚蠢的东西。上面的设置应该如何配置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T16:10:00.540

当然。我在发布问题几分钟后找到了答案，无论之前的调查时间如何，但这里是：

我在某处读到了您不需要配置 xdebug 的错误信息。实际上，您需要修改 /etc/php5/conf.d/xdebug.ini 。我在那里添加：

```
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000 
```

我在有关配置 Netbeans 的文章中读到了这一点，并且事情奏效了。准确地说：

```
xdebug.remote_enable=1 
```

^ 仅此行是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-25T14:16:26.403

如果您使用的是 PHP 命令行界面 (cli)，则会使用不同的 php.ini。因此，要么编辑 ，要么`/etc/php/version/cli/php.ini`明确指定 php.ini ，例如

```
php -S localhost:8080 -t "/var/www/html/my_project" -c "/etc/php/7.0/apache2/php.ini" 
```

# java - 用于 alpha 和空格的 java 正则表达式包括 [ ] \

> ID：12761231
> 
> 赞同：3
> 
> 时间：2012-10-06T15:45:33.113
> 
> 标签：java, regex

这是我的 JTextField 的正则表达式，不超过 x 个字符，并且不包含除字母或空格以外的任何内容。 **出于某种原因，它允许 [ ] 和 \ 字符。** 这真让我抓狂。我的正则表达式错了吗？

```
package com.jayavon.game.helper;

import java.awt.Toolkit;

import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.PlainDocument;

public class CharacterNameCreationDocument extends PlainDocument {
    private static final long serialVersionUID = 1L;
    private int limit;

    public CharacterNameCreationDocument(int limit) {
        super();
        this.limit = limit;
    }

    public void insertString(int offset, String  str, AttributeSet attr) throws BadLocationException {
        if (str == null || (getLength() + str.length()) > limit || !str.matches("[a-zA-z\\s]*")){
            Toolkit.getDefaultToolkit().beep();
            return;
        } else {
            super.insertString(offset, str, attr);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T04:46:04.413

您的正则表达式中有错字：

```
"[a-zA-z\\s]*" 
```

`[A-z]`匹配所有大写和小写字母**加** `[`, `]`, `^`,`_` , 反斜杠和反引号，它们的代码点恰好位于`Z`和之间`a`。

另外，我同意@Ωmega，您可能应该使用实际的空格字符而不是`\s`：

```
"[a-zA-Z ]*" 
```

锚 (`^`和`$`) 不是必需的，因为您使用的是该`matches()`方法，该方法会自动在两端锚定匹配。不过，它们不会伤害任何东西，而且它们确实有助于传达您的意图。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-06T15:50:13.220

你应该使用正则表达式模式

```
^[a-zA-Z\\s]*$ 
```

where`^`是字符串的开头，`$`代表字符串的结尾。

* * *

您还可以扩展此类正则表达式以检查字符串大小。假设您是否要允许最小`5`字符和最大`20`字符

```
^[a-zA-Z\\s]{5,20}$ 
```

* * *

但是，因为空格`\\s`不仅可以是空格键字符，还可以是其他字符，例如换行符、制表符等，您可能希望将其限制为仅使用真正的空格键字符

```
 ^[a-zA-Z ]{5,20}$ 
```

* * *

此外，您可能希望限制按顺序使用多个空格字符。如果是这样，请使用

```
^(?!.* {2,})[a-zA-Z ]{5,20}$` 
```

* * *

您可能希望字符串始终以非空格字符开头和结尾。要添加此类功能，请使用

```
^(?=.{5,20}$)(?!.* {2,})[a-zA-Z][a-zA-Z ]*[a-zA-Z]$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T15:50:23.957

将您的正则表达式重新格式化为：

```
^[A-Za-z\\s]{0,3}$ 
```

只需将 3 更改为您想要的长度。

# python - 从 Python 连接到 Access

> ID：12761236
> 
> 赞同：-2
> 
> 时间：2012-10-06T15:46:13.987
> 
> 标签：python, database, ms-access, ms-access-2007

> **可能重复：**
> [如何将 pyodbc 连接到 Access (.mdb) 数据库文件](https://stackoverflow.com/questions/3251702/how-to-connect-pyodbc-to-an-access-mdb-database-file)

我想从 Python 连接到数据库 Boreas (Access)。如何从 Python 连接到 Access 数据库 Northwind？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:16:31.813

这里有 2 种方法，使用 COM 调度和使用 odbc。您将需要 pywin32 扩展和/或 pyodbc 才能使用这些方法。

```
import win32com.client
import pyodbc

def ado():
    '''
    connect with com dispatch objs
    '''
    conn = win32com.client.Dispatch(r'ADODB.Connection')
    DSN = ('PROVIDER = Microsoft.Jet.OLEDB.4.0;DATA SOURCE = ' + db +  ';')
    conn.Open(DSN)

    rs = win32com.client.Dispatch(r'ADODB.Recordset')
    strsql = "select * from deer"
    rs.Open(strsql, conn, 1, 3)
    t = rs.GetRows()
    conn.Close()
    return t

def odbc():
    '''
    connects with odbc
    '''        
    constr = 'Driver={Microsoft Access Driver (*.mdb, *.accdb)};Dbq=' + db
    conn = pyodbc.connect(constr, autocommit=True)
    cur = conn.cursor()
    strsql = "select * from deer"
    cur.execute(strsql)
    t = list(cur)
    conn.close()
    return t

if __name__ == '__main__':

    db = 'c:/work/deer/deer.mdb'
    data1 = ado()
    data2 = odbc() 
```

祝你好运，

麦克风

# ruby-on-rails-3 - 加入两个 mongoid 标准

> ID：12761237
> 
> 赞同：2
> 
> 时间：2012-10-06T15:46:17.900
> 
> 标签：ruby-on-rails-3, mongoid

我有一个包含两个 Mongoid::Criteria 的数组

```
[#<Mongoid::Criteria
      selector: {"news_category_id"=>"1"},
      options:  {:sort=>[[:published_date, :desc]], :limit=>1},
      class:    News,
      embedded: false>
    , #<Mongoid::Criteria
      selector: {"news_category_id"=>"2"},
      options:  {:sort=>[[:published_date, :desc]], :limit=>1},
      class:    News,
      embedded: false>
    ] 
```

如何从该标准数组中获取一个 Mongoid::Criteria 对象？

当该数组呈现时，它包含“json对象数组数组”，我想要一个json对象数组。（单个合并的 json 数组）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-03T12:36:10.370

您可以使用：

```
criteria1.concat(criteria2) #this worked for me. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:40:33.160

Criteria 有一个合并方法[http://rdoc.info/github/mongoid/mongoid/master/Mongoid/Criteria#merge-instance_method](http://rdoc.info/github/mongoid/mongoid/master/Mongoid/Criteria#merge-instance_method)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T05:34:02.387

数组，其中包含“ **json 对象数组**”以制作“ **json 对象数组**” 我想出了以下解决方案

```
array_of_criteria.collect { |aoc| aoc.to_a}.flatten 
```

# javascript - nodejs/express/ejs render() 同步

> ID：12761238
> 
> 赞同：4
> 
> 时间：2012-10-06T15:46:20.807
> 
> 标签：javascript, node.js, express, ejs

```
res.render("index.ejs", {}); 
```

对于简单的情况，上述内容会很好。

如何让 EJS 将处理后的字符串作为函数的返回值返回？让它像这样工作：

```
res.send(ejs.render("index.ejs", {})); 
```

换句话说 -**我想嵌套/链接一些 render() 调用**，而不是异步的。

Express 似乎本身并不支持这一点，或者是吗？
如果没有，那么我将如何直接通过 EJS 实现它？

*如果您想知道为什么我更喜欢“坏”方式（同步），那么我要说一件事：缓存。
无论如何，模板都被缓存了，所以我不介意模板的第一次加载速度变慢（无论如何只需几毫秒）。
与必须处理对 render() 的嵌套异步调用相比，这种时间分数的单次延迟成本是没有成本的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:17:58.660

您可以只传递一个回调`res.render`，将使用呈现的字符串调用该回调。这将完成`async`，这是解决此问题的正确方法，因为渲染可能需要读取文件。

```
app.get('/', function(req, res){
  res.render('index', { title: 'Title' }, function(err, result) {
    res.render('index2', {foo: 'data'}, function (err, result2) {
      console.log('Render result:');
      console.log(result2);
      res.send(result2); // send rendered HTML back to client
    });
  });
}); 
```

如果您不喜欢嵌套回调，我建议您查看一个异步库，例如 aptly names `async`。您可以使用瀑布 ( [https://github.com/caolan/async#waterfall](https://github.com/caolan/async#waterfall) ) 函数来执行此操作：

```
async.waterfall([
  function(done) {
    res.render('index', {title: 'Title'}, done);
  },

  function(result, done) {  // result is the result of the first render
    res.render( result, {foo: 'data'}, done);
  }
], function (err, result) {  // result is the result of the second render
  console.log(result);
  res.send(result);
}); 
```

# iphone - TableView 中的延迟响应

> ID：12761242
> 
> 赞同：3
> 
> 时间：2012-10-06T15:47:13.487
> 
> 标签：iphone, ios, xcode

我正在尝试制作一个涉及 tableView 的简单程序。当我单击 tableView 中的单元格时，它应该显示有关单击的单元格的更多信息`DetailedViewController`。但是，当我单击单元格时，它仍然突出显示，并且不会显示单元格的信息。所以我使用`NSLog()`语句来确定程序卡住的地方。`NSLog()`我在方法中引入的语句`didDeselectRowAtIndexPath`表明我得到了在最后一个之前单击的单元格的响应。

知道为什么会这样吗？另外，为什么单击单元格时看不到DetailedViewController？

为简洁起见，`Numbers.h`包含两个变量：`NSString * name`和`int long long number`。DetailedViewController 是一个简单的 VC，有两个标签：当我单击相应的单元格时，它们应该会得到更新`nameField`。`numberField`

我真诚地感谢任何帮助。谢谢。

```
#import "SecondViewController.h"
#import "DetailedViewController.h"
#import "Numbers.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

@synthesize numberList;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    NSLog(@"loaded Nib file");
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = @"View Numbers";
        self.tabBarItem.image = [UIImage imageNamed:@"second"];
    }
    return self;
}

- (void)viewDidLoad
{
    NSLog(@"Loaded view controller");
    Numbers *num1 = [[Numbers alloc] init];
    Numbers *num2 = [[Numbers alloc] init];
    num1.name = @"Number 1";
    num1.number = 12345;

    num2.name = @"Number 2";
    num2.number = 23456;

    numberList = [[NSMutableArray alloc]  initWithObjects:num1,num2, nil];

    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload {
    [self setNumberList:nil];
    [super viewDidUnload];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return numberList.count;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (UITableViewCell *)tableView: (UITableView*)tableView cellForRowAtIndexPath: (NSIndexPath *) indexPath
{
    NSLog(@"In cellForRowAtIndexPath:");
    static NSString *cellIndetifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIndetifier];

    if(cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2    reuseIdentifier:cellIndetifier];
        cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
    }

    cell.textLabel.text = [[numberList objectAtIndex:indexPath.row] name];

    return cell;

}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Row selected = %d", indexPath.row);

    Numbers *numberToDisplay = [[Numbers alloc] init];
    numberToDisplay.name = [[numberList objectAtIndex:indexPath.row] name]; // why can I not use dot notation here?
    numberToDisplay.number = [[numberList objectAtIndex:indexPath.row] number]; // why can I not use dot notation here?

    DetailedViewController *detailedViewController = [[DetailedViewController alloc] initWithNibName:@"DetailedViewController" bundle:nil];
    detailedViewController.nameLabel.text = numberToDisplay.name;
    detailedViewController.numberLabel.text = [NSString stringWithFormat:@"%lli", numberToDisplay.number];

    [self.navigationController pushViewController:detailedViewController animated:YES];
}

@end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T15:53:39.580

更改`didDeselectRowAtIndexPath`为`didSelectRowAtIndexPath`. 这应该为您提供有关当前正在选择的单元格的信息。

您从 didDeselectRowAtIndexPath 获得的单元格是在您选择新单元格后被取消选择的行。这就是它落后的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T15:53:29.850

您已经实现`didDeselect`而不是`didSelect`- 只需更改方法名称并重试。

# javascript - 将 python 传递的数据转义到 Javascript (JSON)

> ID：12761243
> 
> 赞同：0
> 
> 时间：2012-10-06T15:47:18.500
> 
> 标签：javascript, python, json

我有一些数据需要在页面上传递给 JavaScript。我正在使用 jinja2 生成我的页面，这是怎么回事：

在蟒蛇中：

```
some_json_data = json.dumps(some_data) 
```

在 jinja2 中：

```
JSON.parse('{% autoescape off %}{{ some_json_data }}{% endautoescape %}') 
```

但是，有时，可能包含带有和 的`some_json_data`字符串。是否有一个库/一些已知的函数可以用来逃避这些？`\n``'`

我知道我可以毫无问题地编写这个函数，但我想知道是否已经有一个库或这样做的东西。我一直在四处寻找，没有发现任何东西。

旁注：我的应用程序是使用 Flask 构建的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:50:43.317

你不需要使用`JSON.parse`; 输出已经是有效的 JavaScript。然后，您也不需要在 JSON 值周围加上引号。

一般来说，我的 JavaScript 看起来像：

```
<script language="javascript" type="text/javascript">
    var serverJSValue = {% autoescape off %}{{ some_json_data }}{% endautoescape %};
</script> 
```

# c# - ServiceStack 新的 API 动作匹配 Rest Verbs

> ID：12761246
> 
> 赞同：3
> 
> 时间：2012-10-06T15:48:14.953
> 
> 标签：c#, servicestack, restful-url

使用旧版本`SomeService : RestServiceBase`可以将 OnGet OnPost OnPut OnDelete 动作与对应的传入动词匹配。

使用较新的版本，假设我有以下内容：

```
//-----------------------------------------
[Route("/todos/{id}","GET")] //display request
[Route("/todos/{id}", "POST")] //edit request
public class Todo : IReturn<TodoResponse> {
    public long Id { get; set; }
    public string Content { get; set; }
}

public class TodoService : Service {
    public object Get(Todo request) { ... } // will GET verb know this Get() function?
    public object Post(Todo request) { ... }// will POST verb know this Post() function?
} 
```

Action名称“Get”“Post”不再标记“override”，SS如何匹配正确的动词来命中Get()和Post()函数？

//------------------------------------------------ --------------------------

或者第2轮，现在我有一个修改......

```
//-----------------------------------------
[Route("/todos/{id}","GET")] //display request
public class DisplayTodo : IReturn<TodoResponse> {
    public long Id { get; set; }
}
[Route("/todos/{id}", "POST")] //edit request
public class EditTodo : IReturn<TodoResponse> {
    public long Id { get; set; }
    public string Content { get; set; }
}

public class TodoService : Service {
    //different request DTOs this time ...
    public object Get(DisplayTodo request) { ... } //again, same route "/todos/{id}" 
    public object Post(EditTodo request) { ... }   //will SS get confused about the verbs? 
} 
```

同一路由“/todos/{id}”下上述情况SS如何区分动词？

你能帮我解决2个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T16:13:25.887

ServiceStack 将尝试匹配请求 VERB 及其请求 DTO。如果其中任何一个不匹配，您将收到无请求处理程序消息。

您的示例似乎很好，您遇到过任何问题吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T16:40:46.107

这是取自[New API wiki 页面的](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)**智能路由**部分：

## 匹配规则

在大多数情况下，您不需要知道这一点，因为 ServiceStack 的路由按您的预期工作。虽然这仍然可以作为描述 ServiceStack 路由解析顺序的一个很好的参考：

1.  首先使用任何精确的文字匹配
2.  精确动词匹配优于所有动词
3.  路线中的变量越多，它的权重就越小
4.  当Routes具有相同的权重时，顺序由Action在服务中的位置或注册顺序（FIFO）决定

只有当有多个路由与传入请求的 pathInfo 匹配时，这些规则才会起作用。

让我们使用新的 API 设计测试套件中定义的路由来查看这些规则的一些示例：

```
[Route("/reqstars")]
public class Reqstar {}

[Route("/reqstars", "GET")]
public class AllReqstars {}

[Route("/reqstars/{Id}", "GET")]
public class GetReqstar {}

[Route("/reqstars/{Id}/{Field}")]
public class ViewReqstar {}

[Route("/reqstars/{Id}/delete")]
public class DeleteReqstar {}

[Route("/reqstars/{Id}", "PATCH")]
public class UpdateReqstar {}

[Route("/reqstars/reset")]
public class ResetReqstar {}

[Route("/reqstars/search")]
[Route("/reqstars/aged/{Age}")]
public class SearchReqstars {} 
```

这些是这些 HTTP 请求的结果

```
GET   /reqstars           =>    AllReqstars
POST  /reqstars           =>    Reqstar
GET   /reqstars/search    =>    SearchReqstars
GET   /reqstars/reset     =>    ResetReqstar
PATCH /reqstars/reset     =>    ResetReqstar
PATCH /reqstars/1         =>    UpdateReqstar
GET   /reqstars/1         =>    GetReqstar
GET   /reqstars/1/delete  =>    DeleteReqstar
GET   /reqstars/1/foo     =>    ViewReqstar 
```

如果有多个完全相同的路由声明如下：

```
[Route("/req/{Id}", "GET")]
public class Req2 {}

[Route("/req/{Id}", "GET")]
public class Req1 {}

public class MyService : Service {
    public object Get(Req1 request) { ... }     
    public object Get(Req2 request) { ... }     
} 
```

首先声明的 Action 上的 Route 被选中，即：

```
GET /req/1              => Req1 
```

# windows-8 - 是否可以在 Windows 8 中更改 appbar 命令的几何形状？

> ID：12761248
> 
> 赞同：0
> 
> 时间：2012-10-06T15:48:18.727
> 
> 标签：windows-8

我正在尝试自定义应用栏命令按钮，并想知道我们是否可以将它们设为正方形而不是圆形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:08:08.077

I figured this one out. changing the border-radius will change the circles to squares.

```
border-radius: 0%; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:29:26.837

至少在 XAML 中应该不会太难（您没有指定您使用的是 XAML 还是 HTML）。应用栏按钮有一种样式，恰当地称为“AppBarButtonStyle”，所有的dutton a 都来自该样式。如果我面前没有一台可以检查的机器，您应该能够编辑该样式以获得方形按钮。我想 HTML 应用程序的 CSS 也会有类似的东西。

请注意，您的用户可能已经开始期待圆形按钮而不是方形按钮。这不是一个巨大的可用性问题，但那里可能会有片刻的混乱。

# c# - WP7 SDK：是否可以将相机对焦模式设置为微距？

> ID：12761249
> 
> 赞同：-5
> 
> 时间：2012-10-06T15:48:30.457
> 
> 标签：c#, windows-phone-7

可以将相机对焦模式设置为微距吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T18:57:46.777

正如我在[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/microsoft.devices.photocamera%28v=vs.92%29.aspx)中看到的那样- 它没有 API。

# mysql - MySQL时间与时代比较

> ID：12761251
> 
> 赞同：0
> 
> 时间：2012-10-06T15:48:34.410
> 
> 标签：mysql, database, epoch

我正在尝试实现返回“最佳”三倍的逻辑。我的数据库字段是：

```
FIRST_TIME - this is a long value in milliseconds from the epoch
SECOND_TIME - also a long value in milliseconds from the epoch
THIRD_TIME - this is an Time field, representing US/Eastern time, like 08:30:52 
```

我的逻辑应该是：

1.  如果填充了 FIRST_TIME，则返回转换为美国/东部时间的 HH:mm:ss
2.  否则，如果 SECOND_TIME（转换为美国/东部时间）晚于 THIRD_TIME，则返回美国/东部时间的 SECOND_TIME
3.  否则返回 THIRD_TIME

我可以使用 FROM_UNIXTIME 来获取 HH:mm:ss 中的前两个字段，但我对如何将其转换为正确的时区以及如何比较我的字段并返回最佳值感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:23:41.010

很好，谢谢你，马克！现在我可以使用以下方法将我的纪元时间转换为时间值：

```
TIME(CONVERT_TZ(FROM_UNIXTIME(SUBSTRING(FIRST_TIME,1,10)),'GMT','US/Eastern')) 
```

现在剩下的就是如何使用 MySQL 为我理清逻辑了。我能够做到这一点：

```
(IF (FIRST_TIME IS NOT NULL,
    TIME(CONVERT_TZ(FROM_UNIXTIME(SUBSTRING(FIRST_TIME,1,10)),'GMT','US/Eastern')), 
IF(TIME(CONVERT_TZ(FROM_UNIXTIME(SUBSTRING(SECONT_TIME,1,10)),'GMT','US/Eastern')) > THIRD_TIME,
    TIME(CONVERT_TZ(FROM_UNIXTIME(SUBSTRING(SECOND_TIME,1,10)),'GMT','US/Eastern')),
THIRD_TIME))
) AS BEST_TIME, 
```

# android - 安卓蓝牙游戏连接

> ID：12761253
> 
> 赞同：1
> 
> 时间：2012-10-06T15:48:51.517
> 
> 标签：android, bluetooth

我最近为 Android 制作了一款游戏，并希望为其添加多人游戏功能，为了避免服务器成本，我计划使用蓝牙将多达 8 台设备连接在一起，并分享他们在游戏中的进度的少量数据（得分以及他们是否仍然连接）。花了一些时间查看网络教程和 Android API，这让我更加困惑。任何人都对如何做或关于这个问题的任何好的教程有任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:56:19.840

我相信蓝牙更像是一个 p2p 类型的网络。

我建议使用 wifi 或 wifi direct，甚至可以让一部手机成为他们都连接的热点。

或者你可以做一些像网络标准 ospf 那样的事情，而不是用更新淹没整个网络，而是将更新发送到一个指定的设备，然后再将它发送给所有其他设备。

根据这里的答案：[Android Bluetooth API connect to multiple devices](https://stackoverflow.com/questions/4468658/android-bluetooth-api-connect-to-multiple-devices)

您当然可以连接到多个设备，但鉴于我们目前拥有的其他技术，我强烈建议您反对它。那里的 Mist 设备无法处理 7 种不同的设备，更不用说有足够好的电池来完成这些过程了。

鉴于您至少有 1 台设备是现代的，我会使用 wifi ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:02:46.290

只是为了让您知道其他可能性的存在，有[WiFi Direct](http://developer.android.com/guide/topics/connectivity/wifip2p.html)，它允许通过 WiFi 连接 Android 设备，而无需接入点。引用介绍：

> > Wi-Fi Direct 允许具有适当硬件的 Android 4.0（API 级别 14）或更高版本的设备通过 Wi-Fi 直接相互连接，而无需中间接入点。使用这些 API，您可以在每个设备支持 Wi-Fi Direct 时发现并连接到其他设备，然后通过比蓝牙连接长得多的距离通过快速连接进行通信。这对于在用户之间共享数据的应用程序很有用，例如多人游戏或照片共享应用程序。

# javascript - XHR 可以在 readyState=DONE 的情况下多次触发 onreadystatechange 吗？

> ID：12761255
> 
> 赞同：6
> 
> 时间：2012-10-06T15:49:22.623
> 
> 标签：javascript, xmlhttprequest

[W3C 规范](http://www.w3.org/TR/XMLHttpRequest/#event-xhr-readystatechange)建议以下实现：一些简单的代码来处理通过网络获取的 XML 文档中的数据：

```
function processData(data) {
  // taking care of data
}

function handler() {
  if(this.readyState == this.DONE) {
    if(this.status == 200 &&
       this.responseXML != null &&
       this.responseXML.getElementById('test').textContent) {
      // success!
      processData(this.responseXML.getElementById('test').textContent);
      return;
    }
    // something went wrong
    processData(null);
  }
}

var client = new XMLHttpRequest();
client.onreadystatechange = handler;
client.open("GET", "unicorn.xml");
client.send(); 
```

这个实现真的正确吗？

在调试期间，我发现readystatechanged事件处理程序在同一行中被多次调用，且readyState == 4的值相同。我猜这种行为是正确的，因为规范说每次状态更改都必须触发事件，并且readyState 必须始终等于当前状态，所以如果多个事件堆积在事件队列中，很明显，一个会收到多次调用 readyState == 4。

[http://jsfiddle.net/44b3P/](http://jsfiddle.net/44b3P/) - 这是上面的示例，在发送请求后添加了调试器调用以暂停执行，并在 processData 中使用 alert()。取消暂停执行后，您将收到 3 个警报。

这个来自 w3c 的示例似乎被复制并粘贴到网络中的多个位置——特别是 OpenSocial 似乎以这种方式处理 xhr 事件。这是正确的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T13:19:24.243

在 Chrome 开发人员工具中进行调试时，我也看到了相同的行为（DONE 200 被多次点击，即 2...n 次）。

为了让它始终在调试模式下工作，我找到了两个选项：

1.  用于`onload`验证 XMLHTMLRequest [W3C 规范是否成功](http://www.w3.org/TR/XMLHttpRequest/#event-handlers)

    client.onload = 处理程序；

    此版本不适用于 IE8。必须是实现了[XMLHttpRequestEventTarget](http://www.w3.org/TR/XMLHttpRequest/#xmlhttprequesteventtarget)接口的浏览器

2.  `onreadystatechange`一有状态就删除处理程序`DONE 200`。

    ```
    client.onreadystatechange = function() {
        // check if request is complete
        if (this.readyState == this.DONE) {
            if (this.onreadystatechange) {
                client.onreadystatechange = null;
                handler();
            }
        }
    }; 
    ```

我还为这个问题在[Chromium](http://code.google.com/p/chromium/issues/detail?id=162837)中打开了一个问题，提供你的[小提琴](http://jsfiddle.net/44b3P/)（谢谢！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:54:46.790

我从来没有让我的`onreadystatechange`处理程序以 4 执行多次`readyState`。

我认为假设在 DONE 上执行一次是正确的。

# groovy - 了解 Gradle 的 mavenDeployer

> ID：12761259
> 
> 赞同：16
> 
> 时间：2012-10-06T15:50:20.067
> 
> 标签：groovy, gradle

一般来说，我是 Gradle 和 Groovy 的新手，我试图从[Gradle 用户指南](http://gradle.org/docs/current/userguide/userguide_single.html#sec:deploying_to_a_maven_repository)中理解以下示例，尤其是如何在 DSL 文档中找到所有这些选项：

```
uploadArchives {
    repositories.mavenDeployer {
        name = 'sshDeployer' // optional
        configuration = configurations.deployerJars
        repository(url: "scp://repos.mycompany.com/releases") {
            authentication(userName: "me", password: "myPassword")
        }
    }
} 
```

我的理解：

*   `uploadArchives`是类型的任务，`Upload`由 Java 插件添加到项目中
*   `repositories`是`Upload`任务的属性，属于类型`RepositoryHandler`

我不明白的是：

*   `mavenDeployer`没有出现在[RepositoryHandler 的文档中的](http://gradle.org/docs/1.2/javadoc/org/gradle/api/artifacts/dsl/RepositoryHandler.html)任何地方。它从何而来？我们怎么知道存在这样的方法？
*   在索引中搜索，我发现这`mavenDeployer`是一个来自[MavenRepositoryHandlerConvention](http://gradle.org/docs/1.2/javadoc/org/gradle/api/plugins/MavenRepositoryHandlerConvention.html#mavenDeployer%28groovy.lang.Closure%29)的方法，它混合在与 Upload 类型的每个任务关联的 RepositoryHandler 中。太糟糕了，这在`RepositoryHandler`的文档和 Upload 的文档中没有提到。
*   虽然它可能更清楚，但我知道闭包必须配置一个类型的对象`GroovyMavenDeployer`。但是阅读 javadoc，`repository`例如属性是 type `Object`。我怎么知道我可以使用以下配置它？

    ```
    repository(url: "scp://repos.mycompany.com/releases") {
        authentication(userName: "me", password: "myPassword")
    } 
    ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T08:11:18.383

Gradle DSL 文档并不是特别全面。公共 api 停止和私有 impl 开始的位置并不总是很清楚，而且源代码通常是获得全面视图的唯一地方（所以我发现将 src 代码链接到我的 IDE 通常是最容易的）。

在您的具体情况下，[用户指南](http://gradle.org/docs/current/userguide/userguide_single.html#deployerConfig)+ 源代码是最好的导航方式。

# java - 告诉 JVM 使用了多少本机内存

> ID：12761262
> 
> 赞同：1
> 
> 时间：2012-10-06T15:50:35.353
> 
> 标签：java, jvm, java-native-interface, out-of-memory

[我的问题与Java-Native-Code-Background](https://github.com/mikiobraun/jblas/wiki/Java-Native-Code-Background)密切相关：

> 您无法很好地控制 Java 的本机内存。您可能听说过本机缓冲区，但他们没有告诉您的是 Java 不会正确地对本机缓冲区进行垃圾处理。问题是Java没有考虑本地缓冲区的大小，这意味着它会在某个时候释放本地缓冲区，但如果你真的有很多，那么在你用完之前可能不会的记忆。这意味着所有数据都必须存储在 Java 对象中。

因此，是否有可能以某种方式告诉或注册使用的本机内存量，以便告诉 JVM 它应该运行 GC？如果我理解正确，那么[Dalvik](http://www.badlogicgames.com/wordpress/?p=2367)会这样做，但如果在所有 JVM 上有一个可靠的方法来这样做会很好。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:46:41.617

您无法告诉 JVM 使用了多少本机内存，JVM 根本没有任何接口。但是，如果您只是不想因为 JVM 没有注意到您使用了多少而导致内存不足，我可以想到两种方法：

1.  [`java.lang.System.gc()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#gc%28%29)每当您认为 JVM 应该这样做时，强制运行 GC 。[比我聪明的人建议这样做。](http://blog.mikiobraun.de/2008/10/matrices-jni-directbuffers-and-number.html)不要忘记 GC 会影响 JVM 性能。
2.  分配一个足够大的直接缓冲区来满足应用程序的峰值总使用量，使其持久化并对其进行自己的内存管理。[这是 NIO 文档本身建议的](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html)，因为直接缓冲区的 de/alloc 成本较高。重复使用它。在大缓冲区的偏移量处读取和写入部分 ByteBuffer。

# iphone - 计算器大脑演练减法运算

> ID：12761266
> 
> 赞同：0
> 
> 时间：2012-10-06T15:50:54.043
> 
> 标签：iphone, objective-c, cs193p

我一直在使用斯坦福视频作为学习 iOS 编程的工具。我对“-”操作有疑问。演练解释说，对于这部分代码，操作数的顺序必须正确。我不明白这段代码如何保证操作的顺序。这是在做什么？

```
else if ([operation isEqualToString:@"-"]) {
double subtrahend = [self popOperand];
result = [self popOperand] - subtrahend; 
```

我得到了第一行代码，我不明白最后两行。如何将 double 放入 subtrahend 变量并将其设置为等于`popOperand`确保操作顺序然后从 subtrahend 中减去 subtrahend `[self popOperand]`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:59:37.510

他们所说的只是你需要确保在被减数之前弹出减数，因为它们放置在堆栈上的顺序，否则你会得到错误的结果。

简而言之，`5 - 3`!= `3 - 5`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:22:31.723

使用 NSLog 在每个中间步骤输出有用的消息，这里发生的事情应该很明显。在许多情况下有用的技术。

考虑这个问题的另一种方法是，你想从堆栈中的第二个东西中减去堆栈中的第一个东西。或者，如果您愿意，可以这样表达操作：

```
 result = - [self popOperand] + [self popOperand]; 
```

它可能只是工作，但当然这是假设最左边的popOperand首先被执行。

# java - 为什么在这个例子中传值有效？

> ID：12761268
> 
> 赞同：0
> 
> 时间：2012-10-06T15:51:31.880
> 
> 标签：java, overloading, pass-by-value

这个例子取自 Java 编程书；第 4 版。

在偶然发现这个代码示例之后，我很困惑为什么它仍然打印出对对象的新引用，即使我们声明它为“null”。理论上，我们正在更改对整个程序之间共享的对象的引用，尽管我们在 commonName 方法中将对象初始化为 null。在 commonName 的控制流点，body 构造函数中的字段被初始化为“Sirius”；当我们更改对对象的引用时（在 Java 中，您按值调用），该字段将更改为 Dog Star。方法的最后一行我们将整个对象设置为空，一旦我们打印出对象，运行时应该向我们提供空引用。

解决这个问题的唯一方法是将 commonName 方法设置为 final。任何 Java 大师都可以解释为什么会发生这种情况，尤其是在任何按值调用的语言中。

```
class PassRef
{
    public static void main (String[] args) {
        Body sirius = new Body ("Sirus", null);
        System.out.println ("before: " + sirius);
        commonName(sirius);
        System.out.println("after: " + sirius);
    }

    public static void commonName (Body bodyref) {
        bodyref.name = "Dog Star";
        bodyref = null;
    }
} 
```

输出：

```
before: 0 (Sirius)
after:  0 (Dog Star) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T15:53:42.527

您之所以感到困惑，只是因为您不了解按值传递的含义。

通用方法*不能*更改它传递的引用。这就是为什么 null 被忽略并打印新值的原因。

您可以更改传递的引用指向的对象的状态，但不能更改引用本身的值。

# c# - 当主服务器出现故障时，有没有办法自动使 MongoDB C# 驱动程序不抛出 EndOfStreamException ？

> ID：12761272
> 
> 赞同：7
> 
> 时间：2012-10-06T15:52:24.230
> 
> 标签：c#, mongodb, mongodb-.net-driver

我一直在用 3 个实例的副本集测试官方 MongoDB C# 驱动程序。我创建了一个简单的应用程序，它可以循环访问副本集。

我的问题是：是否可以让 C# 驱动程序在我关闭主服务器时自动重新运行查询，而不像现在那样抛出 EndOfStreamException ？

这是我的 MongoServerSettings 初始化代码：

```
 var settings = new MongoServerSettings()
        {
            ConnectionMode = ConnectionMode.ReplicaSet,
            ReplicaSetName = "mongors",
            ReadPreference = new ReadPreference(ReadPreferenceMode.PrimaryPreferred),
            SafeMode = SafeMode.True,
            DefaultCredentials = new MongoCredentials("user", "password"),
            Servers = new[] { new MongoServerAddress("server.net", 27020), 
                        new MongoServerAddress("server.net", 27019),
                        new MongoServerAddress("server.net", 27018)}

        }; 
```

这是我查询服务器的代码：

```
 while (true)
        {
            var server = MongoServer.Create(settings);
            var db = server.GetDatabase("db");
            var collection = db.GetCollection<TaggedAction>("actions");
            var query = Query.EQ("_id", id);
            var entity = collection.FindOne(query);

            Console.WriteLine(DateTime.Now +" " + entity.ActionName);

            Thread.Sleep(2500);
        } 
```

如果我关闭主服务器，客户端会抛出以下异常：

```
System.IO.EndOfStreamException was unhandled
  HResult=-2147024858
  Message=Attempted to read past the end of the stream.
  Source=MongoDB.Bson
  StackTrace:
       at MongoDB.Bson.IO.BsonBuffer.LoadFrom(Stream stream, Int32 count) in C:\work\rstam\mongo-csharp-driver\Bson\IO\BsonBuffer.cs: line 314
       at MongoDB.Bson.IO.BsonBuffer.LoadFrom(Stream stream) in C:\work\rstam\mongo-csharp-driver\Bson\IO\BsonBuffer.cs: line 281
       at MongoDB.Driver.Internal.MongoConnection.ReceiveMessage(BsonBinaryReaderSettings readerSettings, IBsonSerializationOptions serializationOptions) in C:\work\rstam\mongo-csharp-driver\Driver\Internal\MongoConnection.cs: line 478
       at MongoDB.Driver.MongoCursorEnumerator`1.GetReply(MongoConnection connection, MongoRequestMessage message) in C:\work\rstam\mongo-csharp-driver\Driver\Core\MongoCursorEnumerator.cs: line 296
       at MongoDB.Driver.MongoCursorEnumerator`1.GetFirst() in C:\work\rstam\mongo-csharp-driver\Driver\Core\MongoCursorEnumerator.cs: line 253
       at MongoDB.Driver.MongoCursorEnumerator`1.MoveNext() in C:\work\rstam\mongo-csharp-driver\Driver\Core\MongoCursorEnumerator.cs: line 141
       at System.Linq.Enumerable.FirstOrDefault(IEnumerable`1 source)
       at MongoDB.Driver.MongoCollection.FindOneAs(IMongoQuery query) in C:\work\rstam\mongo-csharp-driver\Driver\Core\MongoCollection.cs: line 557
       at MongoDB.Driver.MongoCollection`1.FindOne(IMongoQuery query) in C:\work\rstam\mongo-csharp-driver\Driver\Core\MongoCollection.cs: line 1734
       at ConsoleApplication16.Program.Main(String[] args) in Program.cs: line 53
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

如果我只是吞下这个异常并继续循环，一切正常。因此它可以解决问题并切换到另一台服务器。但是，如果驱动程序可以自动处理这个问题，这样它就不会抛出异常，那就太好了。可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T18:26:08.513

在许多情况下，不可能进行故障转移，因为正在执行的游标只存在于主服务器上。次要服务器对此一无所知，因此无法继续进行。

就您而言，您碰巧知道您想继续，但我们会冒昧地满足您的需求并将其应用于所有情况。在您只想继续循环的地方，其他人可能不会。

除此之外，一些驱动程序会重试查询。.NET 驱动程序不会，因为我们觉得我们无法始终确定正确的行为，因此由应用程序决定。

在 PrimaryPreferred 的情况下，您希望读取来自 Primary 是有原因的——因为它们是最新的。如果我们默默地回退到辅助节点，那么根据辅助节点的回退距离，您的查询实际上有可能将最后一次成功查询之前的结果返回到主节点。这不是一个好的体验，因此我们根本不这样做，并建议您捕获这些错误并自己处理重试。

我们希望将其中一些错误包含在 MongoDB 特定异常中，这样您就不必猜测 EndOfStream 异常（https://jira.mongodb.org/browse/CSHARP-474）之类的东西。此外，如果您想查看此功能，请提交 jira，我们将研究如何以可预测的方式执行此操作 - 可能使用用户提供的策略来处理重试（IRetryStrategy 或其他东西）。

# java - 如何在 URLConnection 中发送 cookie？

> ID：12761273
> 
> 赞同：14
> 
> 时间：2012-10-06T15:52:28.043
> 
> 标签：java, cookies, urlconnection

通过 URLConnection 发送“完整”cookie 的正确方法是什么？

我一直在使用：

```
URL url = new URL(page);  
URLConnection urlConn = url.openConnection(); 

urlConn.setRequestProperty("Cookie", myCookie); 

urlConn.setUseCaches(true); 

urlConn.connect(); 
```

myCookie 值为 testCookie=d1lEZk9rSHd3WnpBd2JkWGRhN1RYdz09OkEwQ21pSFJVZzBpVDhhUENaK3ZPV2c9PQ

有没有办法用它发送路径、域和过期？您是否需要以某种方式对值进行编码？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-11-23T21:22:18.187

[这个（当前接受的）答案](https://stackoverflow.com/a/12761430/365237)是错误的 - 对于 http*客户端*，您使用`;` 分隔符来表示多个 cookie 值，因此他的示例实际上发送了三个 cookie：

*   `user=mary17`
*   `domain=airtravelbargains.com`
*   `path=/autos`

如果我们谈论的是服务器响应和`Set-Cookie`标头，那么答案是正确的，但我们不是 - urlconnection 用于客户端连接到服务器。

那么，您要求的`Domain`, `Expires`,信息呢？`Path`问题是，您不*打算*发送该信息。Path、Domain 和 Expires 只是用于发送到浏览器（或任何其他 HTTP 客户端）的指令，因为它们是针对客户端的指令。您只是要将有效的 cookie*值*发送到服务器，因此无法发送您要求的信息，因为它没有任何意义。

您可以通过浏览浏览器中的任何 HTTP 会话自己看到这一点。浏览器只会发送这样的东西：

```
Cookie: cookiename=value; anothercookie=othervalue; 
```

这是应该的。

或者，您可以检查[RFC 6265](https://www.rfc-editor.org/rfc/rfc6265)，您可以直接从目录中看到`Domain`,是标头`Expires`的`Path`属性`Set-Cookie`（发送到浏览器），而不是标头的属性`Cookie`（由浏览器或其他 http 客户端发送到服务器）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-06T16:14:57.100

好吧，如果你只是设置一个 cookie，我想你可以简单地这样做：

```
urlConn.setRequestProperty("Cookie", "user=mary17; domain=airtravelbargains.com; path=/autos"); 
```

如果您设置的 cookie 不止一个，您可能会改用该`addRequestProperty`方法。

对于 expires 属性，请确保使用以下格式：Weekday, DD-Mon-YY HH:MM:SS GMT。

唯一合法的时区是 GMT，日期元素之间的分隔符必须是破折号。

# java - 通过套接字可靠地发送文件（java）

> ID：12761274
> 
> 赞同：0
> 
> 时间：2012-10-06T15:52:29.253
> 
> 标签：java, sockets, client-server

我正在开发一个cient/server java 应用程序。我写了两个类，一个用于发送文件，一个用于接收文件。唯一的问题是有时只发送了一半字节（不知道为什么）并且客户端被阻塞等待另一半到达。我在我的机器上同时运行客户端和服务器进行测试。如何确保所有字节都无损发送？

文件发件人：

```
 OutputStream out = mSocket.getOutputStream();
        FileInputStream fileIn = new FileInputStream(mFile);

        long startTime = System.currentTimeMillis();

        /* Send bytes. */
        byte[] buffer = new byte[BUFFER_SIZE];
        int read;
        int readTotal = 0;

        while ((read = fileIn.read(buffer)) != -1) {
                out.write(buffer, 0, read);
                readTotal += read;
        }
        out.flush();

        long endTime = System.currentTimeMillis();
        System.out.println("\t" + readTotal + " bytes written in " + (endTime - startTime) + " ms."); 
```

文件接收器：

```
 InputStream in = mSocket.getInputStream();

        long startTime = System.currentTimeMillis();

        /* Read bytes. */
        byte[] buffer = new byte[BUFFER_SIZE];
        int read;
        int totalRead = 0;

        FileOutputStream fileOut = new FileOutputStream(mLocalFolder + "/" + mFileName);

        while (totalRead < mSize) {

            read = in.read(buffer);
            fileOut.write(buffer);
            totalRead += read;
            System.out.println("SO FAR " + totalRead + " OUT OF " + mSize);
        }
        fileOut.close();

        long endTime = System.currentTimeMillis();
        System.out.println("\tComplete. " + totalRead + " bytes read in " + (endTime - startTime) + "ms."); 
```

# android - 将图像分布到列中

> ID：12761278
> 
> 赞同：-1
> 
> 时间：2012-10-06T15:53:00.093
> 
> 标签：android

这可能是一个非常简单的问题，但我没有找到任何解决方案。我的要求是这样的。给定图像的数量和行数，图像应该平均分布在行中。我正在这样做..但现在问题在于最坏的情况：例如。如果我给出的图像总数为 99，总行数为 50，那么在 49 行中，列应该是 2，每列一个图像，在第 50 列中，一列应该只有一个图像。我无法找到解决此问题的方法。请帮帮我。我在这里发布代码。请帮我。提前致谢。

```
 @Override
    protected void onPreExecute() {
        HSC = new HorizontalScrollView(getApplicationContext());
        VSC = new ScrollView(getApplicationContext());
        tableLayout = new TableLayout(getApplicationContext());
        tableLayout.setGravity(Gravity.CENTER);
    } 

    @Override
    protected Void doInBackground(Void... params) {

        runOnUiThread(new Runnable() {
            public void run() {             
                int a =0;
                for (Integer row = 0; row < rows; row++) { //Rows are being plotted.

                    tableRow = new TableRow(getApplicationContext());
                    for (Integer col = 0; col < img; col++) {
                        /*Images shared into number of columns. Column=img/rows*/
                        image = new ImageView(getApplicationContext());
                        android.view.animation.Animation anim = animate(a);
                        /*android.view.animation.Animation anim = AnimationUtils
                                .loadAnimation(getApplicationContext(), R.anim.fadein);*/
                        image.startAnimation(anim);
                        image.setPadding(20, 20, 20, 20);

                        image.setImageResource(R.drawable.images);
                        tableRow.addView(image);
                        a++;
                    }
                    tableLayout.addView(tableRow);
                }
                VSC.addView(tableLayout);
                HSC.addView(VSC);
                setContentView(HSC);
            }
        });

        return null;
    }
    @Override
    protected void onPostExecute(Void result) {  
        super.onPostExecute(result);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:47:54.563

使用两个循环来填充图像。像这样

```
if (no_of_images % columns == 0) {
    int _rows = no_of_images / columns;
    for (float row = 0; row < _rows; row++) {

    tableRow = new TableRow(getApplicationContext());

    for (int col = 0; col < columns; col++) {

        image = new ImageView(getApplicationContext());
        image.setPadding(20, 20, 20, 20);
        android.view.animation.Animation animation = animate(a);
        image.setAnimation(animation);
        image.setImageResource(R.drawable.images);
        tableRow.addView(image);
        a++;
    }
    tableLayout.addView(tableRow);
}    
} 
```

# arrays - 在 vb.net 中将数据表转换为数组

> ID：12761283
> 
> 赞同：-1
> 
> 时间：2012-10-06T15:53:41.810
> 
> 标签：arrays, vb.net, datatable

我创建了一个程序，我使用数据表来存储一些信息，然后单击按钮，它将显示在 datagridview 中。这是我的代码......有人可以告诉我如何创建一个数组而不是这个，我研究了几个小时仍然没有帮助。

```
 Dim Array As New DataTable
Dim array2 As New DataTable
Dim array3 As New DataTable

Public Class Degrees

    Public Property FieldofStudy As String
    Public Property Year1986 As String
    Public Property Year2006 As String

    Public Sub New(ByVal FieldofStudy As String, ByVal Year1986 As String, ByVal Year2006 As String)
        Me.FieldofStudy = FieldofStudy
        Me.Year1986 = Year1986
        Me.Year1986 = Year2006
    End Sub
End Class

Private Sub btnChanges_Click(sender As System.Object, e As System.EventArgs) Handles btnChanges.Click

    array2.Clear()
    Dim column4 As DataColumn = New DataColumn("Field of Study")
    column4.DataType = System.Type.GetType("System.String")

    Dim column5 As DataColumn = New DataColumn("Change (1981-2006)")
    column5.DataType = System.Type.GetType("System.String")

    array2.Columns.Add(column4)
    array2.Columns.Add(column5)

    ''Display array two containing percentage changes''
    array2.Rows.Add("Computer and info. science", "214.0%")
    array2.Rows.Add("Social sciences and history", "60.7%")
    array2.Rows.Add("Business", "58.6%")
    array2.Rows.Add("Engineering", "5.3%")
    array2.Rows.Add("Education", "-0.8%")

    dgvStudies.DataSource = array2

End Sub

Private Sub btnHistogram_Click(sender As System.Object, e As System.EventArgs) Handles btnHistogram.Click

    array3.Clear()

    Dim column6 As DataColumn = New DataColumn("Field of Study")
    column6.DataType = System.Type.GetType("System.String")

    Dim column7 As DataColumn = New DataColumn("")
    column7.DataType = System.Type.GetType("System.String")

    Dim column8 As DataColumn = New DataColumn("Degrees in 2006")
    column8.DataType = System.Type.GetType("System.String")

    array3.Clear()
    array3.Columns.Add(column6)
    array3.Columns.Add(column7)
    array3.Columns.Add(column8)

    array3.Rows.Add("Computer and info. science", "*****", "47,480")
    array3.Rows.Add("Engineering", "*******", "67,045")
    array3.Rows.Add("Education", "***********", "107,238")
    array3.Rows.Add("Social sciences and history", "****************", "161,485")
    array3.Rows.Add("Business", "********************************", "67,045")

    dgvStudies.DataSource = array3

End Sub

Private Sub btnQuit_Click_1(sender As System.Object, e As System.EventArgs) Handles btnQuit.Click

    Me.Close()
End Sub

Private Sub btnDegrees_Click_1(sender As System.Object, e As System.EventArgs) Handles btnDegrees.Click

    Array.Clear()
    Dim column1 As DataColumn = New DataColumn("Field of Study")
    column1.DataType = System.Type.GetType("System.String")

    Dim column2 As DataColumn = New DataColumn("1981")
    column2.DataType = System.Type.GetType("System.String")

    Dim column3 As DataColumn = New DataColumn("2006")
    column3.DataType = System.Type.GetType("System.String")

    Array.Clear()
    Array.Columns.Add(column1)
    Array.Columns.Add(column2)
    Array.Columns.Add(column3)

    Array.Rows.Add("Business", "200,521", "318,042")
    Array.Rows.Add("Computer and info. science", "15,121", "47,480")
    Array.Rows.Add("Education", "108,074", "107,238")
    Array.Rows.Add("Engineering", "63,642", "67,045")
    Array.Rows.Add("Social sciences and history", "100,513", "161,485")

    Me.dgvStudies.DataSource = Array
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:31:36.107

虽然您的变量被命名为“array”、“array2”和“array3”，但您已将它们声明为`DataTable`使它们成为`DataTable`s（而不是`Array`s）的类型。DataTables 可以作为 DataGridView 的数据源正常工作。

由于您需要将它们作为数组，您可以将代码更改为以下内容：

```
Public Class Changes
    Public Property FieldofStudy As String = String.Empty
    Public Property Change As String = String.Empty

    Public Sub New(ByRef FieldofStudy As String, ByRef Change As String)
        Me.FieldofStudy = FieldofStudy
        Me.Change = Change
    End Sub
End Class

Public Class Histogram
    Public Property FieldofStudy As String = String.Empty
    Public Property Asterisks As String = String.Empty
    Public Property Degrees As String = String.Empty

    Public Sub New(ByRef FieldofStudy As String, ByRef Asterisks As String, ByRef Degrees As String)
        Me.FieldofStudy = FieldofStudy
        Me.Asterisks = Asterisks
        Me.Degrees = Degrees
    End Sub
End Class

Public Class Degrees
    Public Property FieldofStudy As String = String.Empty
    Public Property Year1986 As String = String.Empty
    Public Property Year2006 As String = String.Empty

    Public Sub New(ByRef FieldofStudy As String, ByRef Year1986 As String, ByRef Year2006 As String)
        Me.FieldofStudy = FieldofStudy
        Me.Year1986 = Year1986
        Me.Year2006 = Year2006
    End Sub
End Class

Private Sub btnChanges_Click(sender As System.Object, e As System.EventArgs) Handles btnChanges.Click
    Dim dtChanges As DataTable = New DataTable("Changes")
    Dim dcDiscipline As DataColumn = New DataColumn("Field of Study", GetType(String))
    Dim dcChange As DataColumn = New DataColumn("Change (1981-2006)", GetType(String))
    Dim list As ArrayList = New ArrayList
    Dim row As DataRow = Nothing
    Dim change As Changes = Nothing

    dtChanges.Columns.Add(dcDiscipline)
    dtChanges.Columns.Add(dcChange)

    'Display Degrees containing percentage changes
    dtChanges.Rows.Add("Computer and info. science", "214.0%")
    dtChanges.Rows.Add("Social sciences and history", "60.7%")
    dtChanges.Rows.Add("Business", "58.6%")
    dtChanges.Rows.Add("Engineering", "5.3%")
    dtChanges.Rows.Add("Education", "-0.8%")

    For Each row In dtChanges.Rows
        change = New Changes(row.Item(0), row.Item(1))
        list.Add(change)
    Next

    dgvStudies.DataSource = list
End Sub

Private Sub btnHistogram_Click(sender As System.Object, e As System.EventArgs) Handles btnHistogram.Click
    Dim dtHistogram As DataTable = New DataTable("Histogram")
    Dim dcDiscipline As DataColumn = New DataColumn("Field of Study", GetType(String))
    Dim dcUnnamed As DataColumn = New DataColumn("", GetType(String))
    Dim dcDegrees2006 As DataColumn = New DataColumn("Degrees in 2006", GetType(String))
    Dim list As ArrayList = New ArrayList
    Dim row As DataRow = Nothing
    Dim histo As Histogram = Nothing

    dtHistogram.Columns.Add(dcDiscipline)
    dtHistogram.Columns.Add(dcUnnamed)
    dtHistogram.Columns.Add(dcDegrees2006)

    dtHistogram.Rows.Add("Computer and info. science", "*****", "47,480")
    dtHistogram.Rows.Add("Engineering", "*******", "67,045")
    dtHistogram.Rows.Add("Education", "***********", "107,238")
    dtHistogram.Rows.Add("Social sciences and history", "****************", "161,485")
    dtHistogram.Rows.Add("Business", "********************************", "67,045")

    For Each row In dtHistogram.Rows
        histo = New Histogram(row.Item(0), row.Item(1), row.Item(2))
        list.Add(histo)
    Next

    dgvStudies.DataSource = list
End Sub

Private Sub btnDegrees_Click(sender As System.Object, e As System.EventArgs) Handles btnDegrees.Click
    Dim dtDegrees As DataTable = New DataTable("Degrees")
    Dim dcDiscipline As DataColumn = New DataColumn("Field of Study", GetType(String))
    Dim dcYear1986 As DataColumn = New DataColumn("1981", GetType(String))
    Dim dcYear2006 As DataColumn = New DataColumn("2006", GetType(String))
    Dim list As ArrayList = New ArrayList
    Dim row As DataRow = Nothing
    Dim degree As Degrees = Nothing

    dtDegrees.Columns.Add(dcDiscipline)
    dtDegrees.Columns.Add(dcYear1986)
    dtDegrees.Columns.Add(dcYear2006)

    dtDegrees.Rows.Add("Business", "200,521", "318,042")
    dtDegrees.Rows.Add("Computer and info. science", "15,121", "47,480")
    dtDegrees.Rows.Add("Education", "108,074", "107,238")
    dtDegrees.Rows.Add("Engineering", "63,642", "67,045")
    dtDegrees.Rows.Add("Social sciences and history", "100,513", "161,485")

    For Each row In dtDegrees.Rows
        degree = New Degrees(row.Item(0), row.Item(1), row.Item(2))
        list.Add(degree)
    Next

    dgvStudies.DataSource = list
End Sub 
```

**您可以通过完全不使用 DataTables 来进一步简化这一点：**

```
Public Class Changes
    Public Property FieldofStudy As String = String.Empty
    Public Property Change As String = String.Empty

    Public Sub New(ByRef FieldofStudy As String, ByRef Change As String)
        Me.FieldofStudy = FieldofStudy
        Me.Change = Change
    End Sub
End Class

Public Class Histogram
    Public Property FieldofStudy As String = String.Empty
    Public Property Asterisks As String = String.Empty
    Public Property Degrees As String = String.Empty

    Public Sub New(ByRef FieldofStudy As String, ByRef Asterisks As String, ByRef Degrees As String)
        Me.FieldofStudy = FieldofStudy
        Me.Asterisks = Asterisks
        Me.Degrees = Degrees
    End Sub
End Class

Public Class Degrees
    Public Property FieldofStudy As String = String.Empty
    Public Property Year1986 As String = String.Empty
    Public Property Year2006 As String = String.Empty

    Public Sub New(ByRef FieldofStudy As String, ByRef Year1986 As String, ByRef Year2006 As String)
        Me.FieldofStudy = FieldofStudy
        Me.Year1986 = Year1986
        Me.Year2006 = Year2006
    End Sub
End Class

Private Sub btnChanges_Click(sender As System.Object, e As System.EventArgs) Handles btnChanges.Click
    Dim list As ArrayList = New ArrayList

    'Display Degrees containing percentage changes
    list.Add(New Changes("Computer and info. science", "214.0%"))
    list.Add(New Changes("Social sciences and history", "60.7%"))
    list.Add(New Changes("Business", "58.6%"))
    list.Add(New Changes("Engineering", "5.3%"))
    list.Add(New Changes("Education", "-0.8%"))

    dgvStudies.DataSource = list
End Sub

Private Sub btnHistogram_Click(sender As System.Object, e As System.EventArgs) Handles btnHistogram.Click
    Dim list As ArrayList = New ArrayList

    list.Add(New Histogram("Computer and info. science", "*****", "47,480"))
    list.Add(New Histogram("Engineering", "*******", "67,045"))
    list.Add(New Histogram("Education", "***********", "107,238"))
    list.Add(New Histogram("Social sciences and history", "****************", "161,485"))
    list.Add(New Histogram("Business", "********************************", "67,045"))

    dgvStudies.DataSource = list
End Sub

Private Sub btnDegrees_Click(sender As System.Object, e As System.EventArgs) Handles btnDegrees.Click
    Dim list As ArrayList = New ArrayList

    list.Add(New Degrees("Business", "200,521", "318,042"))
    list.Add(New Degrees("Computer and info. science", "15,121", "47,480"))
    list.Add(New Degrees("Education", "108,074", "107,238"))
    list.Add(New Degrees("Engineering", "63,642", "67,045"))
    list.Add(New Degrees("Social sciences and history", "100,513", "161,485"))

    dgvStudies.DataSource = list
End Sub 
```

# android - Android 透明活动问题

> ID：12761285
> 
> 赞同：0
> 
> 时间：2012-10-06T15:53:53.090
> 
> 标签：android, android-activity

我的应用程序 A1 和 A2 中有两个活动，我想从 A1 启动活动 A2，但 A2 需要透明且 A1 模糊，这是我尝试过的代码，但它不起作用

```
public void setTranslucent(){
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND, WindowManager.LayoutParams.FLAG_BLUR_BEHIND);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:58:29.590

你不能那样做，你必须使用 LayoutInflator 为新的 xml 文件充气，并简单地设置当前一个 xml ParentView 的 alpha alpha。

# asp.net - 项目节点中链接标记中的 ASP.NET RSS 提要错误？Umbraco RSS Feed 中的 Razor 问题

> ID：12761288
> 
> 赞同：1
> 
> 时间：2012-10-06T15:54:12.543
> 
> 标签：asp.net, xml, razor, rss, umbraco

使用剃刀在 umbraco 中针对博客创建 rss 提要时遇到问题。下面的代码有效，但只要我尝试将任何值添加到项目节点下的链接标记中，我就会收到一个 xml 错误，下面是代码。

```
<rss version="2.0">
    <channel>
        <title>@landing.uBlogsyRssTitle</title>
        <description>@landing.uBlogsyRssDescription</description>
        <copyright>@landing.uBlogsyRssCopyright</copyright>
        @*<image>@landing.uBlogsyRssImage</image>*@
        <link>@Request.Url.Host@landing.Url</link>
        <lastBuildDate>@lastPubDate.FormatDateTime("ddd, dd MMMM yyyy HH:mm:ss")</lastBuildDate>
        <pubDate>@lastPubDate.FormatDateTime("ddd, dd MMMM yyyy HH:mm:ss")</pubDate>
        @foreach (var p in posts)
        {
        <item>
            <title>@p.GetProperty("uBlogsyContentTitle").Value</title>            
            <link></link>
            <author>@p.GetProperty("uBlogsyPostAuthor").Value</author>
            <description>@p.GetProperty("uBlogsyContentBody").Value.StripHtml().Trim()</description>            
            <guid>@p.Url</guid>
            <pubDate>@p.GetProperty("uBlogsyPostDate").Value.FormatDateTime("ddd, dd MMMM yyyy HH:mm:ss")</pubDate>
        </item>
        }
</channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T00:31:15.290

这是我对另一个解决了同样问题的帖子的回答：

由于 MVC4 Razor 验证您尝试编写的内容是有效的 HTML。如果你不这样做，Razor 就会失败。

您的代码试图编写不正确的 HTML：

如果您查看[w3schools 中链接标签的文档，](http://www.w3schools.com/tags/tag_link.asp)您可以阅读以不同方式表达的相同内容：

*   “该元素是一个空元素，它只包含属性。”
*   “在 HTML 中，标签没有结束标签。”

这意味着链接是一个单例标签，因此您必须将此标签写为自闭合标签，如下所示：

`<link atrib1='value1' attrib2='value2' />`

所以你不能做你想做的事情：使用带有内容的开始和结束标签。

这就是 Razor 无法生成此`<xml>`文档的原因。

但是有一种方法可以欺骗 Razor：不要让它知道你正在编写标签，如下所示：

`@Html.Raw("<link>")--your link's content--@Html.Raw("</link>")`

请记住，Razor 用于编写 HTML，因此使用它编写 XML 可能会有些棘手。

# c# - ServiceStack OrmLite - 处理默认列和计算列

> ID：12761292
> 
> 赞同：9
> 
> 时间：2012-10-06T15:55:28.980
> 
> 标签：c#, sql-server, servicestack, ormlite-servicestack

ServiceStack OrmLite 究竟如何处理默认列和计算列？

具体来说，我收到了错误

```
The column "PointsAvailable" cannot be modified because it is either a computed column or is the result of a UNION operator. 
```

此列配置为 SQL Server 2008 数据库中的计算列。

OrmLite 似乎确实对计算列做了一些事情，因为您可以将属性“[ServiceStack.DataAnnotations.Compute]”添加到模型中的属性中。

进入代码，调用“OrmLiteDialetBase.cs”中的函数“ToInsertRowStatement”。当该函数检查是否设置了 AutoIncrement 属性时，它不检查是否设置了 IsComputed 属性。

我不知道这是一个错误还是我只是用错了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T06:55:20.357

对于仅在服务层计算的计算列，SQL 对它们一无所知，因此我在 servicestack 模型上使用了以下属性的组合：

```
[Compute, ServiceStack.DataAnnotations.Ignore]
public List<MyModel> MyList {get;set;} 
```

不同之处似乎是“忽略”属性坚持附加它的命名空间??。有了这些，我的基本查询就会运行，否则 SQL 会抱怨这些列不存在 - 完全正确！

您可以按照 t-clausen.dk 的建议使用 SQL 过滤器，方法是专门传递带有您想要的所有列名的 SQL CommandText 字符串，但我认为这会引发维护问题。

至于查看数据库的错误修复，似乎 SQL 是通过“toSqlString()”或类似方法在每个提供者的基础上生成的。所以大概有几个地方要注意...

编辑：这只是完成这项工作的 Ignore 属性。从来源：

```
/// IgnoreAttribute  
/// Use to indicate that a property is not a field  in the table  
/// properties with this attribute are ignored when building sql sentences 
```

还可以选择使用我尚未探索的 ALIAS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:29:24.923

我建议您使用表中的相关列（不包括计算列）创建一个视图，然后从视图中工作。这样可以避免引用不需要的计算列。在插入、删除、更新和大多数其他方面，简单视图可以像普通表一样对待。

# jsf-2 - JSF2.0 在 inputHidden 而不是 outputLabel 中传递值不起作用

> ID：12761293
> 
> 赞同：0
> 
> 时间：2012-10-06T15:55:31.917
> 
> 标签：jsf-2

我们是 JSF 的新手，正在努力解决以下问题。

我们有一个搜索页面，用户可以在其中单击按钮转到详细信息页面。到达此详细信息页面时，已正确显示所选记录。

当用户编辑值时，验证器会启动。自定义验证器会检查两件事：-如果记录已经在数据库中（唯一）-如果值不为空

当用户删除当前值，为空字符串，提交时，验证器说该值不允许为空。

当用户将值改回之前的值并提交时，验证器应验证当前值并返回搜索页面。

现在问题如下： 使用时：

```
<h:outputLabel value="Supplier Id" />
<h:outputLabel value="#{flash.keep.supplier.id}" /> 
```

一切正常。但是我们想对用户隐藏 id 并使用隐藏字段。

删除 outputLabel 并使用时：

```
<h:inputHidden value="#{flash.keep.supplier.id}" /> 
```

我们的应用程序认为我们正在尝试插入一个新的供应商，而不是保存已经存在的同名供应商。

我们在 NetBeans 开发环境中使用 JSF 2.0、GlassFish Server 3.1.2。

bean 是 RequestScoped

源代码位于： [https ://bitbucket.org/dasdan20/timereg4wb-web](https://bitbucket.org/dasdan20/timereg4wb-web)

视图位于： Web/suppliers/search.xhtml Web/suppliers/ addedit.xhtml

bean 和支持代码位于：src/task/SupplierTask.java src/task.validation/SupplierUniqueValidator src/domain/Supplier.java

数据库后端是 MySQL：可以在以下位置找到数据库的备份：src/MySQLDatabase

提前致谢

K&K

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:31:36.187

你可能做错了。制作一个具有更长范围的新 Bean，以“记住”选定的供应商。

```
@RequestScoped
SupplierController
// Almost everything here

@SessionScoped
StatefulSupplierController
// State that needs to be saved 
```

# javascript - 如何用javascript编写From Upload Stream的Request Header？

> ID：12761296
> 
> 赞同：1
> 
> 时间：2012-10-06T15:55:59.980
> 
> 标签：javascript, ajax, http, http-headers, xmlhttprequest

对于文件上传应该修改，所以我尝试手动组合上传字符串：

```
 function submitdata(){
        //var data = new FormData();
        var sb="";
        var BOUNDARY = "-------------------------4827543632391";

        sb+="--"+BOUNDARY;
        sb+="\r\n";
        sb+="Content-Disposition: form-data; name=\"fileinput\"    filename=\"004.jpg\" \r\n";
        sb+="Content-Type: image/jpeg\r\n\r\n";
        .....
        var reader = new FileReader();
            reader.readAsBinaryString(data);
        //fd.append("blob", sb);
        reader.onload = function(e){
            sb+=this.result;
            sb+="\r\n--" + BOUNDARY + "--\r\n";

            var datasubmit="Content-Type:multipart/form-data; boundary="+BOUNDARY+"\n";
            datasubmit+="Content-Length: "+eval(sb.length)+ "\r\n\r\n";
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "addimages");
            xhr.setRequestHeader("Content-Type", "multipart/form-data");
            xhr.overrideMimeType('multipart/form-data');
            xhr.sendAsBinary(datasubmit+sb);

           }

    } 
```

每次提交数据主体为：

```
Content-Type:multipart/form-data; boundary=-------------------------4827543632391
Content-Length: 283111 
```

我想把上面的部分听到不是身体！

```
---------------------------4827543632391 
Content-Disposition: form-data; name="fileinput" filename="004.jpg" 
Content-Type: image/jpeg 

ÿØÿà�JFIF������ÿÛ�C�  %# , #&')*)-0-(0%()(ÿÛ�C   (((((((((((((((((((((((((((((((((((((((((((((((((((ÿÀ�@m"�ÿÄ����������� ÿÄ�µ���}�!1AQa"q2¡#B±ÁRÑð$3br %&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz¢£¤¥¦§¨©ª²³´µ¶·¸¹ºÂÃÄÅÆÇÈÉÊÒÓÔÕÖ×ØÙÚáâãäåæçèéêñòóôõö÷øùúÿÄ�������� ÿÄ�µ��w�!1AQaq"2B¡±Á #3RðbrÑ $4á%ñ&'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz.... 
```

我想要的是：

```
Request Headers From Upload Stream
Content-Length: 283122
Content-Type: multipart/form-data;boundary=---------------------------23281168279961 
```

我只是不知道我的

内容类型：multipart/form-data；......到流表单的标题部分

谁能给我一个带有“Content-Type：multipart/form-data;..”的http包的例子吗？或者告诉我如何编写 java-script 将 Content-Type: 放在头部。我试过 xhr.setRequestHeader()，它写的是 httphearder 但不是上传流标头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:15:05.273

我可能会误解，但是您需要在 xhr.setRequestHeader() 方法调用中创建新的标头。

当你在做（和看到）你只是在为身体添加材料。setRequestHeader() 方法（将标头名称和内容作为两个参数）将创建要发送的新标头。请注意，您可以通过多次调用该方法来创建任意数量的标头。

希望这可以帮助。

# javascript - 引导程序中的 Javascript 问题

> ID：12761297
> 
> 赞同：0
> 
> 时间：2012-10-06T15:56:03.050
> 
> 标签：javascript, twitter-bootstrap

我无法让我的任何 javascript 在引导程序上工作，这是调用：

```
<script src="js/bootstrap.js"></script>
<script src="js/bootstrap.min.js"></script>   
<link rel="stylesheet" href="css/bootstrap.css" /> 
```

这就是我要开始工作的事情

```
<ul class="nav nav-pills">
    <li class="dropdown all-camera-dropdown">
           <a class="dropdown-toggle" data-toggle="dropdown" href="#">
            All Cameras
               <b class="caret"></b>
           </a>
    <ul class="dropdown-menu">
            <li data-filter-camera-type="all"><a data-toggle="tab" href="#">All Cameras</a></li>
            <li data-filter-camera-type="Alpha"><a data-toggle="tab" href="#">Alpha</a></li>
            <li data-filter-camera-type="Zed"><a data-toggle="tab" href="#">Zed</a></li>
            <li data-filter-camera-type="Bravo"><a data-toggle="tab" href="#">Bravo</a></li>

     </ul>
</li></ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:13:39.523

您需要`jquery`在引导之前包含该库。它依赖它。

`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>`

# apache - Apache2 WWW 使用 .htaccess 删除 FAIL

> ID：12761299
> 
> 赞同：1
> 
> 时间：2012-10-06T15:56:18.827
> 
> 标签：apache, .htaccess, apache2, no-www

我想从我的 apache2 域中***删除“www” 。***我尝试了很多用文件来做的例子，`.htaccess`但它们都不起作用。所以这是我的`.htacces`，由用户root拥有，chmod 644：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^your-site.com$ [NC]
RewriteRule ^(.*)$ http://your-site.com/$1 [L,R=301] 
```

这不是删除 www~~如果我`http://your-site.com`在浏览器（Firefox）中输入，它会将我重定向到`www.your-domain.com`stil。~~ **编辑：这是浏览器的失败，但是上一页。存在问题。**

我的 apache2 已经为这个主域设置了，这`www.`就是我所有的 .htaccess。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:03:46.073

在 apache 日志中查找错误：

无效的命令“RewriteEngine”，可能拼写错误或由未包含在服务器配置中的模块定义

所以问题是apache2配置错误......

用命令解决：sudo a2enmod 从这个线程重写：[https ://stackoverflow.com/a/11649987/1725341](https://stackoverflow.com/a/11649987/1725341)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T04:57:23.683

[我在No WWW, Better SEO](http://alantait.net/2012/07/21/no-www-better-seo/ "没有万维网，更好的 SEO")中使用的简单解决方案是使用以下内容开始每个 .htaccess：

```
RewriteEngine On
RewriteBase /

# FROM www. --TO-- NO www.
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

这只是一个简单的剪切和粘贴。这是我在数百个站点和域上拥有的每个 .htaccess 的第一件事。

# emacs - 如何在 ansi-term 中使用 font-lock-add-keywords？

> ID：12761302
> 
> 赞同：0
> 
> 时间：2012-10-06T15:56:33.180
> 
> 标签：emacs, colors, term

通过执行以下操作，我可以轻松地将要突出显示的关键字添加到*lisp-interaction-mode*：

```
(font-lock-add-keywords 'lisp-interaction-mode '(("foo" (0 '(font-lock-warning-face))))) 
```

一旦我（重新）在 lisp-interaction-mode 中打开任何缓冲区，这就会启动。

但是我不知道如何在 ansi-term 缓冲区中使用*font-lock-add-keywords 。*

我不知道我的模式是否错误，或者术语/ansi-term 缓冲区是否有一些“特殊”的东西会阻止上述工作。

我尝试使用“term-mode”，这显然是 ansi-term 正在使用的主要模式，但它似乎不起作用。

如何在*ansi-term中使用**font-lock-add-keywords*？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:41:32.743

这应该有效：

```
(defun highlight-foo ()
  (font-lock-add-keywords
   nil ;; putting nil here adds the keywords only to the current buffer
   '(("foo" 0 font-lock-warning-face))))

(add-hook 'term-mode-hook 'highlight-foo) 
```

但是，请注意，虽然`font-lock-mode`使用此类设置处于活动状态，但常规 ANSI 转义序列不会对终端中的颜色产生任何影响（例如，输出`ls`不会着色）。*

# cron - CRON 工作？哇，这在我头上

> ID：12761311
> 
> 赞同：0
> 
> 时间：2012-10-06T15:58:04.770
> 
> 标签：cron, hosting, automatic-storage

我不知道如何处理 cron 作业，但是我可以解释我想要它做什么......任何有如何做到这一点经验的人都会非常感激......

1.  删除目录中最旧的文件
2.  在一个目录中至少保留 8 个最新文件

是否可以？几个小时以来，我一直试图了解这方面的文档，以为我会要求节省时间来学习如何处理这些事情……我的主机允许我将 cron 作业输入到控制面板后端。

我找到了这个命令

```
(ls -t|head -n 5;ls)|sort|uniq -u|xargs rm 
```

但是，它看起来好像知道我想从哪个目录中删除......而且我不知道它做了什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:54:54.703

正如我在评论中已经写的那样，执行您想要的操作的脚本独立于 cron。这是做你想做的事的可能性：

```
cd /path/to/dir; ls -t | tail -n +9 | xargs rm 
```

## 解释

*   `cd /path/to/dir`: 转到目录
*   `ls -t`：获取目录中所有文件的列表，按最后修改日期排序，最新的在前
*   `tail -n +9`：选择所有行（在本例中为文件名），从第 9 行开始
*   `xargs rm`: 删除之前命令“选择”的文件

通过选择从第 9 行开始的所有行，8 个最新文件永远不会被删除。

我假设只有文件存储在文件夹中，因为该`rm`命令只会删除这些文件。要同时删除文件夹及其所有内容，您必须使用`rm -r`.

要阅读命令的详细描述（例如`cd`, `ls`, `tail`, `xargs`, `rm`），请使用`man <command>`

# c++ - O(1) 中 unordered_set 中的随机元素

> ID：12761315
> 
> 赞同：16
> 
> 时间：2012-10-06T15:58:48.217
> 
> 标签：c++, stl, unordered-set

我见过有人提到可以在 O(1) 时间内从 unordered_set 中获取随机元素。我试图这样做：

```
std::unordered_set<TestObject*> test_set;

//fill with data

size_t index = rand() % test_set.size();
const TestObject* test = *(test_set.begin() + index); 
```

但是，unordered_set 迭代器不支持带整数的 +。 `begin`可以给定一个 size_t 参数，但它是一个桶的索引而不是一个元素。随机挑选一个桶然后随机挑选其中的一个元素将导致非常不平衡的随机分布。

正确的 O(1) 随机访问的秘诀是什么？如果重要的话，这是在 VC++ 2010 中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T16:11:30.413

我相信您误解了“随机访问”的含义，因为在您所指的那些情况下使用了它。

“随机访问”与随机性没有任何关系。这意味着“随机”访问一个元素，即访问容器中任何位置的任何元素。直接访问元素，例如 with`std::vector::operator[]`是随机访问，但遍历容器不是。

将此与 RAM 进行比较，RAM 是“随机存取存储器”的缩写。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-08-22T19:27:58.763

`std::unordered_set`在数组的意义上没有 O(1) 随机访问。可以根据键在 O(1) 中访问元素，但不可能找到第 k 个元素。

尽管如此，这是一种从`std::unordered_map`（或者`std::unordered_set`如果键具有可变字段）获得具有均匀分布的随机元素的方法。我在对 SO question [Data Structure(s) Allow For Alteration Through Iteration and Random Selection From Subset (C++)](https://stackoverflow.com/a/51964217/4955498)的回答中提出了类似的技术。

这个想法是`std::unordered_set`用一个可变索引值将每个条目补充到指向`unordered_set`. 向量的大小是 的大小`unordered_set`。每次将新元素插入到 中时`unordered_set`，指向该元素的指针都会被`push_back`-ed 到向量中。每次从 unordered_set 中删除一个元素时，向量中的相应条目位于 O(1) 中，并与`back()`向量的元素交换。先前元素的索引`back()`被修改，现在指向它在向量中的新位置。最后，旧条目`pop_back()-ed`来自向量。

这个向量正好指向`unordered_set`. 从均匀分布的组合结构中选择一个随机元素需要 O(1)。在组合结构中添加或删除元素需要 O(1)。

注意：只要元素存在，指向元素的指针（与迭代器不同）就保证保持有效。

这应该是这样的： [![集合中的三个元素](../Images/464fa84bff6bd3928f2e70bfbb427e01.png)](https://i.stack.imgur.com/ARdMr.png)

对于擦除元素 c：

1.  交换元素 c_index 和 a_index 并修复指向它们的指针：
2.  pop_back 最后一个元素，也就是向量中的 element_c。
3.  `unordered_set`从.中删除 c

随机化是微不足道的——只需从向量中随机选择一个元素。

编辑：这是一个部分代码，可以从 unordered_set 返回均匀分布的随机元素。我不得不做一些与上面的解释稍有不同的事情，因为 unordered_set 中没有可靠的索引（或迭代器）。无法将迭代器保存到 unordered_set 中的原因是它的元素不时被重新散列，从而使过程中的所有迭代器无效。因此，这个解决方案不是使用稳定的索引，而是简单地使用指向永远不会重新分配的对象的指针：

```
#include <unordered_set>
#include <functional>
#include <vector>
#include <memory>
#include <random>

template <class T>
class RandomUnorderedSet
{
private:
   struct Entry {
       Entry(const T & data_in, unsigned index_in_vector_in)
       : data(data_in), index_in_vector(index_in_vector_in) 
       {}
       T data;
       unsigned index_in_vector;
   };
   struct PtrEntryHash {
       auto operator()(const std::unique_ptr<Entry> & entry) const 
       { 
           return std::hash<T>()(entry->data);
       }
   };
   struct PtrEntryEqual {
       bool operator()(const std::unique_ptr<Entry> & a, 
                       const std::unique_ptr<Entry> & b ) const 
       { 
           return a->data == b->data;
       }
   };
public:
   bool insert(const T & element)
   {
       auto entry_ptr = std::make_unique<Entry>(element, m_entry_vector.size());
       if (m_entry_set.count(entry_ptr) > 0)
          return false;
       m_entry_vector.push_back(entry_ptr.get());
       try {
            m_entry_set.insert(std::move(entry_ptr));
       } catch(...) {
           m_entry_vector.pop_back();
           throw;
       }
       return true;
   }

   // Return the number of elements removed
   int erase(const T & element)
   {
       auto it = m_entry_set.find(element);
       if (it == m_entry_set.end())
          return 0;
       auto swap_with = it->index_in_vector;
       if (swap_with < m_entry_vector.size() - 1) {
           m_entry_vector.back()->index_in_vector = swap_with;
           m_entry_vector[swap_with] = m_entry_vector.back();
       }
       m_entry_set.erase(it);
       m_entry_vector.pop_back();
       return 1;
   }
   template <typename RandomGenerator>
   const T & random_element(RandomGenerator & r)
   {
       std::uniform_int_distribution<> dis(0, m_entry_vector.size() - 1);
       return m_entry_vector[dis(r)]->data;

   }

private:
   std::unordered_set<std::unique_ptr<Entry>, PtrEntryHash, PtrEntryEqual> 
        m_entry_set;
   std::vector<Entry*> m_entry_vector;
}; 
```

笔记：

*   这个实现只是一个框架，可能会添加额外的操作。
*   如果这是一个库类，那么最好把它做成一个合适的容器，有一个迭代器类型，它隐藏了实现细节，有`begin()`和`end()`调用，还有一个更好的返回类型`insert()`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-20T17:27:59.433

`std::unordered_set`不要提供随机访问迭代器。我想这是 stl 设计者的一个选择，给 stl 实现者更多的自由……底层结构必须支持 O(1) 插入和删除，但不必支持随机访问。例如，`unordered_set`即使不可能为这样的底层容器编写随机访问迭代器，您也可以将符合 stl 的代码编写为双向链表。

即使第一个元素是随机的，也无法获得完全随机的元素，因为元素在底层容器中按哈希排序的方式是确定性的......并且在我正在研究的算法中，使用第一个元素会使结果产生很大的偏差。

如果你可以在 O(1) 中构建一个随机 value_type 元素，我可以想到一个“hack”......这是这个想法：

1.  检查无序集是否为空（如果是，则没有希望）
2.  生成一个随机 value_type 元素
3.  如果已经在无序集中，则返回它，否则插入它
4.  获取`it`此元素的迭代器
5.  获取随机元素`*(it++)`（如果`*it`是最后一个元素，则获取第一个元素）
6.  删除您插入的元素并返回 (5) 中的值

所有这些操作都是 O(1)。你可以很容易地实现我给出的伪代码并对其进行模板化。

注意：第 5 步虽然很奇怪，但也很重要......因为例如，如果你得到随机元素`it++`（`it--`如果`it`是最后一个迭代器），那么第一个元素的概率将比其他元素小两倍（不是微不足道，但想想它...）。如果你不关心你的分布，那没关系，你可以得到最前面的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-15T10:39:29.567

我用 buck_count() 和 cbegin(n) 方法写了一个解决方案，随机选择一个桶，然后在桶中随机选择一个元素。

两个问题： - 这不是恒定时间（更糟糕的情况是有很多空桶和一个桶中有很多元素） - 概率分布是倾斜的

我认为随机查看元素的唯一方法是维护一个提供随机访问迭代器的单独容器。

```
#include <random>
#include <iostream>
#include <unordered_set>
#include <unordered_map>
#include <cassert>

using namespace std;

ranlux24_base randomEngine(5);

int rand_int(int from, int to)
{
    assert(from <= to);

    return uniform_int_distribution<int>(from, to)(randomEngine);
}

int random_peek(const unordered_set<int> & container)
{
    assert(container.size() > 0);

    auto b_count = container.bucket_count();
    auto b_idx = rand_int(0, b_count - 1);
    size_t b_size = 0;

    for (int i = 0; i < b_count; ++i)
    {
        b_size = container.bucket_size(b_idx);
        if (b_size > 0)
            break;

        b_idx = (b_idx + 1) % b_count;
    }

    auto idx = rand_int(0, b_size - 1);

    auto it = container.cbegin(b_idx);

    for (int i = 0; i < idx; ++i)
    {
        it++;
    }

    return *it;
}

int main()
{
    unordered_set<int> set;

    for (int i = 0; i < 1000; ++i)
    {
        set.insert(rand_int(0, 100000));
    }

    unordered_map<int,int> distribution;

    const int N = 1000000;
    for (int i = 0; i < N; ++i)
    {
        int n = random_peek(set);
        distribution[n]++;
    }

    int min = N;
    int max = 0;

    for (auto & [n,count]: distribution)
    {
        if (count > max)
            max = count;
        if (count < min)
            min = count;
    }

    cout << "Max=" << max << ", Min=" << min << "\n";
    return 0;
} 
```

# php - div刷新和滚动条问题

> ID：12761316
> 
> 赞同：2
> 
> 时间：2012-10-06T15:59:01.223
> 
> 标签：php, javascript, html, refresh

我有以下 Javascript 代码：

```
<script> 
var auto_refresh = setInterval(
function()
{
$('#loaddiv').load('tables.php');
}, 1000);
</script> 
```

和

```
<div id="loaddiv">
<div style="float: left; width:650px; height:99%; border:2px solid #000; 
 overflow:auto; background-color:#FFF;">
 <?php 
 index_table();
 ?>
</div>
</div> 
```

上面的 Div 是为了在 1 秒后刷新它的内容。现在，此内容的输出是一个基于用户提交的具有多行的表。当行数超过屏幕高度时，会出现滚动条。您可以在其中向下滚动以查看添加的行。

现在问题从这里开始，因为这个Div刷新滚动条自动重置到顶部。这使得很难看到其余的行。

刷新 Div 时如何阻止滚动条重置为顶部？或者是否可以在插入新行时自动向下滚动。

谢谢你 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:10:58.790

您可以尝试如下

```
var isScrolling = false;
var lastScrollPos = 0;
var counter = 0;
$(function() {

    $('#loaddiv').on('scroll', function() {
        isScrolling = true;
        lastScrollPos = this.scrollTop;
    });

    refreshTimer = setInterval(refreshContent, 1000);

    function refreshContent() {
        if (!isScrolling) {
            $('#loaddiv').load('tables.php').scrollTop(lastScrollPos);
        }
        isScrolling = false;
    }

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:26:20.160

试试下面的代码。这似乎奏效了。

```
$('#loaddiv').load('tables.php', function() {
  $(this).scrollTop($(this).prop("scrollHeight") - $(this).height());
}); 
```

我从[auto scroll to bottom when overflow auto](https://stackoverflow.com/questions/2530829/auto-scroll-to-bottom-when-overflow-auto)的答案之一中得到它。

# backgroundworker - BackgroundWorker 和 ReportProgress 冻结 UI

> ID：12761323
> 
> 赞同：1
> 
> 时间：2012-10-06T16:00:10.990
> 
> 标签：backgroundworker

我正在使用 BackgroundWorker 加载大文件。根据选择的文件，它可能只有 4000 行或 400,000 行。列数也不同。

我想逐步但快速地批量添加行。我改变了组成批次的行数。我的问题是第一批行被添加到 FlexGrid 罚款。如果文件大到需要第二批添加，则网格的滚动条抖动并且屏幕冻结。

我在按钮单击方法中调用 RunWorderAsync 方法来选择文件。我还将 FlexGrid 分配给数据表作为其数据源。

代码如下：

```
 //bind the grid to the empty table
                c1FlexGrid1.DataSource = dt;

                // go load the data
                backgroundWorker1.RunWorkerAsync(lengthOfFile); 
```

FlexGrid 来自 ComponentOne，用于 WinForms。

DoWorker 代码如下：

```
// create rows for data table
    using (StreamReader streamRead = new StreamReader(filePathAndName))
        while ((lineOfData = streamRead.ReadLine()) != null)
        {
            rowCount++;
            sizeOfLine += lineOfData.Length;
            //create a new row in the data table
            var row = dt.NewRow();
            arrayOfData = lineOfData.Split(',');

            for (int j = 0; j < dt.Columns.Count; j++)
            {
                row[j] = arrayOfData[j];
            }
            newRowData.Add(row);

            percentComplete += 10;
            // inform progress at every 10 percent
            currentPercentComplete = ((double)sizeOfLine / sizeOfFile) * 100;
            if(((int)currentPercentComplete > percentComplete) && (percentComplete < 100))
            {
                Console.WriteLine("Starting UI thread - row count {0}, percent complete {1}, current percent {2}", rowCount, percentComplete, currentPercentComplete);
                percentComplete += 10;
                backgroundWorker1.ReportProgress(percentComplete);

                // simulate lengthy operation
                System.Threading.Thread.Sleep(1000);
            }

        }//end while loop

    }//end of using 

} 
```

ProgressChanged 方法如下：

```
 private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {

        dt.BeginLoadData();
        for (int i = 0; i < newRowData.Count; i++)
        {
            dt.Rows.Add(newRowData[i]);
        }
        dt.EndLoadData();

//        Console.WriteLine("In UI thread ProgressChanged - end load -rows added - {0}", newRowData.Count);

        // done with this batch
        newRowData.Clear();

        // update UI
        this.progressBar1.Value = e.ProgressPercentage;
        Application.DoEvents();
    } 
```

# mysql - 尝试选择包含我的名字的第一行

> ID：12761332
> 
> 赞同：1
> 
> 时间：2012-10-06T16:01:11.410
> 
> 标签：mysql

我正在尝试进行一个查询，该查询选择完全填满的第一行，并且输入值在该行中的某个位置，否则它不会拉任何东西。这是我到目前为止所做的：

```
CASE WHEN `name_1` != '' and `name_2` != '' and `name_3` != ''  and `name_4` = 'Jimmy' THEN (SELECT`name_1`,`name_2`,`name_3`,`name_4` FROM `names`) end
CASE WHEN `name_1` != '' and `name_2` != '' and `name_4` != ''  and `name_3` = 'Jimmy' THEN (SELECT`name_1`,`name_2`,`name_3`,`name_4` FROM `names`) end
CASE WHEN `name_1` != '' and `name_4` != '' and `name_3` != ''  and `name_2` = 'Jimmy' THEN (SELECT`name_1`,`name_2`,`name_3`,`name_4` FROM `names`) end
CASE WHEN `name_4` != '' and `name_2` != '' and `name_3` != ''  and `name_1` = 'Jimmy' THEN (SELECT`name_1`,`name_2`,`name_3`,`name_4` FROM `names`) end 
```

这将返回错误：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'CASE WHEN `name_1`!= '' and `name_2`!= '' and `name_3`!= '' and `name_4`= ''附近使用正确的语法

很明显它写错了，那么它到底有什么问题呢？我这样做是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:11:02.263

这不是正确的使用方式`CASE`。我猜你想选择`JIMMY`可能出现在一个或多个列上的行，并且任何列都不能为空，

```
SELECT  `name_1`,`name_2`,`name_3`,`name_4` 
FROM    `names`
WHERE   `name_1` IS NOT NULL AND 
        `name_2` IS NOT NULL AND 
        `name_3` IS NOT NULL AND 
        `name_4` IS NOT NULL AND
        (
            `name_1` = 'JIMMY' OR 
            `name_2` = 'JIMMY' OR 
            `name_3` = 'JIMMY' OR 
            `name_4` = 'JIMMY' 
        ) 
```

我认为这个解决方案比使用`CASE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:05:51.827

您的语句必须以某种 DML 词 ( `SELECT`, `UPDATE`, `CALL`, `DO`...) 开头。话虽这么说，您的表没有标准化，因为您不应该有四列名称，而是可能有 2 列（名称，名称值）。

使用的正确语法`CASE`如下所示：

```
SELECT
    CASE
        WHEN name_1 <> '' AND name_2 <> '' AND name_3 <> '' AND name_4 = 'Jimmy'
            THEN some_column
        WHEN ...
            THEN ...
    END AS column
FROM names 
```

通过阅读您的帖子，您似乎正在尝试到达第一个非空字段。你可以尝试这样的事情：

```
SELECT name_1, name_2, name_3, name_4
FROM names
WHERE (name_1 <> '' AND name_2 <> '' AND name_3 <> '' AND name_4 = 'Jimmy') OR
    (name_1 <> '' AND name_2 <> '' AND name_4 <> '' AND name_3 = 'Jimmy') OR
    ... 
```

# api - 如何使用 Asana API 获取在 Asana 中创建项目的用户？

> ID：12761338
> 
> 赞同：0
> 
> 时间：2012-10-06T16:02:28.280
> 
> 标签：api, asana

我想检索使用 Asana Api 在 Asana 中创建项目的用户（id、名称）。

[从https://app.asana.com/api/1.0/projects/](https://app.asana.com/api/1.0/projects/) {project-id} 中的 REST 调用返回的数据仅在“关注者”数组中包含用户对象，但这些用户只是……关注者。

我尝试使用 opt_fields 参数[https://app.asana.com/api/1.0/projects/](https://app.asana.com/api/1.0/projects/) {project-id}?opt_fields=created_by 没有运气。

欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:24:56.067

（我在 Asana 工作）

创建者当前未通过 API 公开。但是，我们可能会考虑在将来添加它。

# javascript - 在JS中弹出窗口最可靠的方法是什么？

> ID：12761344
> 
> 赞同：1
> 
> 时间：2012-10-06T16:03:47.610
> 
> 标签：javascript, jquery, html

我需要弹出一个新窗口以使用 JS 打开一些 URL。它将由用户操作（即按钮单击）触发，因此它是完全合法的。显示弹出窗口阻止程序无法阻止的新窗口的最可靠方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:08:48.640

我会说不使用窗户是最可靠的。相反，请考虑创建一个包含您的内容的动态叠加层（页面上绝对定位的 DIV）。

一开始有点难以理解，但老实说，做起来并不难，而且可以避免严重的头痛。或者有什么理由绝对需要一个真正的窗户？

任何框架都会使这变得微不足道（并且在“原始” JavaScript 中确实非常微不足道，但我使用自己的面板管理器来抽象大部分烦恼：

[http://depressedpress.com/javascript-extensions/dp_panelmanager/](http://depressedpress.com/javascript-extensions/dp_panelmanager/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:06:40.003

我会推荐使用[jQuery UI Dialog](http://jqueryui.com/demos/dialog/)。根据用户的弹出窗口设置，它可能被设置为阻止所有弹出窗口。使用 jQuery 对话框，您肯定会允许“弹出”。

# sql - plpgsql 中采用 bigint 的 pseudo_encrypt() 函数

> ID：12761346
> 
> 赞同：13
> 
> 时间：2012-10-06T16:04:06.230
> 
> 标签：sql, postgresql, plpgsql

我正在开发一个生成随机 id 的系统，如答案 #2[这里](https://stackoverflow.com/questions/12575022/generating-an-instagram-or-youtube-like-unguessable-string-id-in-ruby-activerec)。

我的问题是，提到的[pseudo_encrypt()](http://wiki.postgresql.org/wiki/Pseudo_encrypt)函数适用于 int 而不是 bigint。我试图重写它，但它总是返回相同的结果：

```
CREATE OR REPLACE FUNCTION pseudo_encrypt(VALUE bigint) returns bigint AS $$
DECLARE
l1 bigint;
l2 int;
r1 bigint;
r2 int;
i int:=0;
BEGIN
    l1:= (VALUE >> 32) & 4294967296::bigint;
    r1:= VALUE & 4294967296;
    WHILE i < 3 LOOP
        l2 := r1;
        r2 := l1 # ((((1366.0 * r1 + 150889) % 714025) / 714025.0) * 32767)::int;
        l1 := l2;
        r1 := r2;
        i := i + 1;
    END LOOP;
RETURN ((l1::bigint << 32) + r1);
END;
$$ LANGUAGE plpgsql strict immutable; 
```

有人可以检查这个吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-06T16:53:47.727

`4294967295`必须用作位掩码以选择 32 位（而不是`4294967296`）。这就是为什么当前您为不同的输入获得相同值的原因。

我还建议使用and`bigint`的类型，它们不应该与and真正不同`l2``r2``r1``l1`

而且，为了获得更好的随机性，在 PRNG 函数中使用更高的乘数来获得真正占用 32 位的中间块，例如 32767*32767 而不是 32767。

完整修改版：

```
CREATE OR REPLACE FUNCTION pseudo_encrypt(VALUE bigint) returns bigint AS $$
DECLARE
l1 bigint;
l2 bigint;
r1 bigint;
r2 bigint;
i int:=0;
BEGIN
    l1:= (VALUE >> 32) & 4294967295::bigint;
    r1:= VALUE & 4294967295;
    WHILE i < 3 LOOP
        l2 := r1;
        r2 := l1 # ((((1366.0 * r1 + 150889) % 714025) / 714025.0) * 32767*32767)::int;
        l1 := l2;
        r1 := r2;
        i := i + 1;
    END LOOP;
RETURN ((l1::bigint << 32) + r1);
END;
$$ LANGUAGE plpgsql strict immutable; 
```

第一个结果：

```
从 generate_series (1, 10) 中选择 x,pseudo_encrypt(x::bigint) 作为 x；
 x | 伪加密    
-+------------
  1 | 3898573529235304961
  2 | 2034171750778085465
  3 | 169769968641019729
  4 | 2925594765163772086
  5 | 1061193016228543981
  6 | 3808195743949274374
  7 | 1943793931158625313
  8 | 88214277952430814
  9 | 2835217030863818694
 10 | 970815170807835400
（10 行）

```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-30T08:01:23.267

古老但仍然是一个有趣的问题。与 Daniels 的回答相比，我使用的是稍微修改过的版本，将 return 语句更改为此（交换 r1 和 l1），正如文章末尾提到的[Pseudo encrypt](http://wiki.postgresql.org/wiki/Pseudo_encrypt)：

```
RETURN ((r1::bigint << 32) + l1); 
```

这种变化的原因是底层的[Feistel 算法](http://en.wikipedia.org/wiki/Feistel_cipher)不应该在最后一轮结束时交换左右。通过这种更改，函数重新获得了充当其自身反函数的能力：

```
pseudo_encrypt(pseudo_encrypt(x) == x // always returns true 
```

这是 pgsql 中的完整代码：

```
CREATE OR REPLACE FUNCTION pseudo_encrypt(VALUE bigint) returns bigint AS $$
DECLARE
l1 bigint;
l2 bigint;
r1 bigint;
r2 bigint;
i int:=0;
BEGIN
    l1:= (VALUE >> 32) & 4294967295::bigint;
    r1:= VALUE & 4294967295;
    WHILE i < 3 LOOP
        l2 := r1;
        r2 := l1 # ((((1366.0 * r1 + 150889) % 714025) / 714025.0) * 32767*32767)::int;
        l1 := l2;
        r1 := r2;
    i := i + 1;
    END LOOP;
RETURN ((r1::bigint << 32) + l1);
END;
$$ LANGUAGE plpgsql strict immutable; 
```

# php - preg_match_all( ) 在不同的服务器上表现不同

> ID：12761351
> 
> 赞同：4
> 
> 时间：2012-10-06T16:04:48.000
> 
> 标签：php, regex

以下代码在我的 PC 上的 XAMPP 上完美运行，但不适用于我新购买的 VPS。它使我的代码崩溃了。

```
preg_match_all( "/$regex/siU" , $string , $matches , PREG_SET_ORDER ); 
```

这应该只是从 HTML 中获取链接和标题。

以前，今天发生了类似的正则表达式问题。代码在本地服务器上运行良好，但在 vps 上创建“连接被重置”错误。该问题是由使用以下代码删除的一些注释 html（其中包含 php 代码）引起的，以优化输出，但即使连接重置问题得到解决，HTML 在浏览器源代码中仍然有注释。

```
$string = preg_replace( '/<!--(.|\s)*?-->/' , ''    , $string ); 
```

所以，问题很清楚。这些正则表达式函数无法正常工作。但我不知道解决方案。

任何人都可以帮我解决这个问题。

**解决了：**

感谢[https://stackoverflow.com/a/12761686/369005](https://stackoverflow.com/a/12761686/369005) @vimishor

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:42:28.900

众所周知，PCRE 有时对大于 200 行的文本有一些问题。Drupal 和 GeSHi 的开发人员过去曾*遇到*过这个问题。

参考：

1.  [Drupal PCRE 问题@ 2012 年 3 月 23 日](http://drupal.org/node/1496520)
2.  [GeSHi PCRE 问题@2012 年2 月2 日](http://sourceforge.net/tracker/?func=detail&aid=3492342&group_id=114997&atid=670231)

也许如果您可以将文本分成小块（*例如 100 行*）并在每个块上运行正则表达式，可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:46:57.717

让我让你停一下。使用正则表达式解析 HTML 是个坏主意，除非它是格式错误的文档中非常孤立的问题。您将需要使用适当的解析器；例如，这是一个去除 HTML 注释的示例：

```
$html = <<<EOM
<html>
<body>
<div id="test">
<!--
comment here
-->
</div>
</body>
</html>
EOM;

$d = new DOMDocument;
$d->loadHTML($html);

$x = new DOMXPath($d);

foreach ($x->query('//comment()') as $node) {
        $node->parentNode->removeChild($node);
}

echo $d->saveHTML(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T06:41:15.573

所以根本问题是应该删除 HTML 注释的代码不起作用？这可能是因为应该与注释匹配的正则表达式用于解决不匹配换行符`(.|\s)*`的事实。**[正如这个答案](https://stackoverflow.com/a/2408599/20938)**所解释`.`的，这几乎肯定会导致问题。

匹配任何内容（包括换行符）的正确方法是使用`s`修饰符。例如：

```
'/<!--.*?-->/s' 
```

这会打开单行模式（也称为 DOTALL 模式），它允许`.`匹配换行符。（另一个问题的作者必须`[\S\s]`改用，因为 JavaScript 没有单行/DOTALL 模式的等效项。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T16:50:53.870

看来问题是您误解了 html 注释的作用。根据您在问题下方的评论，问题是没有删除html评论，导致php以错误的参数运行。

但是，html 注释对运行或未运行的 php 代码没有影响，只会影响浏览器显示的内容（并在 javascript 的情况下运行）。您的 php 代码在输出到达浏览器之前运行。

如果你想注释掉 php 代码，你需要在一个`/* */`块中或者每一行以`//`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-06T16:13:28.097

试试这个：

```
$string = preg_replace( '/.*<!--(.|\s)*?-->.*/' , ''    , $string ); 
```

一些正则表达式实现会像这样执行你的正则表达式`/^<!--(.|\s)*?-->$/`：所以你的表情在不同的服务器上可能表现不同。

# javascript - 使用 JavaScript 将多行内联元素分解为不同的元素

> ID：12761352
> 
> 赞同：0
> 
> 时间：2012-10-06T16:04:56.513
> 
> 标签：javascript, css, background-color

我正在尝试实现视觉外观，如[http://screencast.com/t/bbziM2OGe8](http://screencast.com/t/bbziM2OGe8)所示如您所见，应用于元素的颜色应仅应用于文本，而不是其整个容器。元素是内联的，但由于它们有多行，所以背景被应用于与最长行具有相同宽度的视觉块。

文本是动态的，所以我不能把它分成单独的内联元素，所以最后一行是一个单行内联元素。

我正在寻找一个 JavaScript 解决方案，它可以获取文本度量并将动态内容分解为单独的元素，例如跨度、环绕每一行，例如获取总高度、行高、计算行数、以某种方式将文本拆分为行数并创建元素。我最不确定的部分是如何获得每行显示的单词。

无论如何，即使没有这样的脚本可用，请告诉我您的想法和建议，我会尝试自己创建脚本。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:25:00.473

如果我们得到一个文本格式的长字符串，其中每个字母具有相同的宽度，那么正确地将文本分成单独的行的问题是微不足道的。假设字体宽度取决于所显示的字符，我建议编写一个脚本来遍历您愿意处理的所有可打印字符并计算该字符的宽度。然后将此数据保存为可以调用的对象，如下所示：

```
charLen[character] = length 
```

然后写一些类似的东西

```
breakText = function(str) {
    var lines = [], maxSize = $('#element').width();

    while( str !== '') { 
        var len = 0, lineText = '';

        while( len <= maxSize ) {
            len += charLen[str.charAt(0)];
            lineText += str.charAt(0);
            str = str.substr(1);
        }

        lines.push(lineText);

    }

    return lines;
} 
```

# string - 如何在 MIPS 中显示字符串数组

> ID：12761354
> 
> 赞同：1
> 
> 时间：2012-10-06T16:05:00.397
> 
> 标签：string, assembly, mips, mips32, pcspim

这是 MIPS 编程中的一个非常初级的程序，我试图从用户那里获取输入并在屏幕上显示输入数据。但是当我运行这个程序时，我得到“ **Memory out of bound error** ”，然后程序在尝试显示数据时崩溃。这段代码有什么问题：

```
.data 

Array: .space 20

Promt: .asciiz "Enter a String:\n"
Line: .asciiz "\n"

.text

main:

la $a0,Promt
li $v0,4
syscall

la $a0,Array
li $a1,20
li $v0,8
syscall

la $t0,Array  # BASE ADDRESS OF ARRAY
li $t1,4

Loop:

lw $a0,0($t0)

add $t0,$t0,$t1

beq $a0,0, Exit

li $v0,4

syscall

j Loop

Exit:

li $v0,10
syscall 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:17:14.773

两个问题：

1）在你的循环中，你正在做一个`syscall`with `$v0 == 4`，它在 address 打印字符串`$a0`。里面有什么`$a0`？它是实际的字符串数据，不是有效的地址。您可能想要`$v0 == 11`打印一个单独的字符；但这会导致下一个问题：

2）您一次加载四个字符。一个字是 4 个字节，您使用`lw`的意思是“加载字”。您一次只能使用 打印一个字符`syscall 11`，并且您的循环仅在它恰好加载了全部为零的 4 个字符块时才会退出。您应该一次加载一个字符。使用`lb`(load *byte* ) 代替`lw`(load *word* )，并使用`$t1 == 1`代替`$t1 == 4`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T05:32:25.430

正如 Jeff 指出的那样，您似乎在 $a0 中加载了不合适的值。以下是对您的程序的修改。我对您的程序做了两个简单的更改。

```
 .data 

        Array: .space 20 
            Promt: .asciiz "Enter a String:\n"  
            Line: .asciiz "\n"

.text

main:

    la $a0,Promt    
    li $v0,4    
    syscall

    la $a0,Array    
    li $a1,20   
    li $v0,8    
    syscall

    la $t0,Array  # BASE ADDRESS OF ARRAY   
    li $t1,4    
    lw $a0,0($t0) #***MOVED THIS OUT***     
    Loop:
        add $t0,$t0,$t1         
            beq $a0,0, Exit         
            la $a0, Array       
            li $v0,4        
            syscall         

            li $a0, 0  #****ADDED THIS LINE****         
            j Loop

    Exit:
        li $v0,10   
            syscall 
```

# java - 尝试按存储节点的值之一对优先级队列进行排序

> ID：12761356
> 
> 赞同：0
> 
> 时间：2012-10-06T16:05:14.777
> 
> 标签：java, object, priority-queue, comparator

所以我是优先级队列的新手。在我尝试实现的算法中，我想根据存储节点的 functionValue 对优先级队列进行排序。我不明白优先级队列如何知道按该值对节点进行排序，而不是我的节点对象的其他八个实例变量之一。我很确定我定义了一个 Comparator 对象来定义比较/排序规则，但我无法为 Comparator 制作 Oracle 类库的正面或反面。

这是我的节点类的属性

```
public class Node{

public char label;      //Holds char for the Move used; U, D, L, R
public boolean visited = false; 
public State nodeState; //Each node holds a State object 
int depth;
int heuristicCount;
int functionCount;   <--- This is the property I want the priority queue to sort by.
.
.
. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:18:26.117

`Comparator`是一个非常简单的界面。你有什么困难？关键是[`compare`方法](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#compare%28T,%20T%29)。您只需实现它来比较您的类的两个实例。就像是：

```
public class NodeComparator implements Comparator<Node> {
    public int compare(Node a, Node b) {
        Integer aCount = a.getFunctionCount();
        Integer bCount = b.getFunctionCount();
        return a.compareTo(b);
    }
} 
```

# javascript - 洗牌兄弟节点

> ID：12761357
> 
> 赞同：1
> 
> 时间：2012-10-06T16:05:27.390
> 
> 标签：javascript, jquery, children

我对如何随机播放元素有点沮丧（因为我在其中存储了数据，仅仅更改文本是不够的）。我正在尝试洗牌兄弟元素，所以我应该使用 .before 和 .after。这是我当前的代码

```
function shuffle() {
    var children = $("#paren").children();
    randIndex = randomFromTo(0, arr.length - 1);

    for(i = 0; i < children.length; i++) {
        //But obviously I can't retrieve a specific child like this
        $("#parent nth-child("+randIndex+")").before(children.i);
    }
}
function randomFromTo(from, to){
    return Math.floor(Math.random() * (to - from + 1) + from);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:10:34.780

将孩子们作为数组抓取，随机播放并再次附加它们。由于它们是相同的引用，附加实际上会移动它们。

```
var parent = $('ul');

var children = parent.children().get().sort(function() {
    return Math.random() - 0.5;
});

parent.append(children); 
```

[https://tinker.io/54968](https://tinker.io/54968)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:11:32.527

构建一个元素数组，打乱数组，然后重新添加元素。

```
function shuffle(parent) {
    var container = document.getElementById(parent),
        children = container.children,
        length = children.length, i,
        tmparr = [];
    for( i=0; i<length; i++) tmparr[i] = children[i];
    tmparr.sort(function() {return 0.5-Math.random();});
    for( i=0; i<length; i++) container.appendChild(tmparr[i]);
} 
```

注意完全没有 jQuery。我还对您的函数进行了参数化，以便您可以使用它来调用它，`shuffle("paren")`而不是使用单一用途的函数。

# jquery - 使用变量 src 使用 jquery 附加 iframe

> ID：12761369
> 
> 赞同：0
> 
> 时间：2012-10-06T16:06:54.230
> 
> 标签：jquery, iframe, append

嘿伙计们，我正在尝试使用附加向页面添加 iframe。在 Firefox 中，它添加了一个空的 iframe，但在 chrome 中它可以正常工作。仅当 windowLocation 为 window.location 时才会附加空 iframe。当我将其更改为其他网址时，它可以正常工作。

```
$("#button").click(function () {
 var windowLocation = window.location;
 $("body").append('<iframe id="fullFrame" width="1000" height="1000"></iframe>');
 $("#fullFrame").attr("src", windowLocation);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:20:03.877

有人可能会问，为什么要在其中嵌入自己网页的副本？这可能会产生某种浏览器试图阻止的无限嵌套问题。iframe 将自身嵌入自身，将自身嵌入自身，除非您的代码或浏览器阻止这种情况发生，否则在所有内存或其他资源耗尽之前，它永远不会停止。

至于清理代码，我建议更改为以下代码：

```
$("#button").click(function () {
 var windowLocation = window.location.href;
 $("body").append('<iframe id="fullFrame" src="' + windowLocation + '"width="1000" height="1000"></iframe>');

}); 
```

这改变了两件事。首先，它使用`href`来自 location 对象的属性来获取 URL，其次，它创建并插入具有该`.src`属性的 iframe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:22:21.860

对我来说，这看起来会产生递归。根据框架集的一些旧规范，在这种情况下，这样的框架应该被视为空：http: [//www.w3.org/TR/WD-frames-970331#nesting](http://www.w3.org/TR/WD-frames-970331#nesting)

所以也许 Firefox 实现了这种行为。

# python - 读取 gzip 文件的头/尾而不将其读入内存

> ID：12761371
> 
> 赞同：5
> 
> 时间：2012-10-06T16:07:13.347
> 
> 标签：python, gzip, syslog

> **可能重复：**
> [如何在不阅读其全部内容的情况下跟踪压缩文件？](https://stackoverflow.com/questions/1183001/how-can-i-tail-a-zipped-file-without-reading-its-entire-contents)

我有一个 7GB 的 gzip 系统日志文件，可以提取到超过 25GB。我只需要检索文件的第一行和最后一行，而不需要一次将整个文件读入内存。

[`GzipFile()`](http://docs.python.org/library/gzip.html#gzip.GzipFile)在 Python 2.7 中允许使用[`with`](http://docs.python.org/reference/compound_stmts.html#with)来读取头部（通过迭代`with`意味着我不必读取整个文件）：

```
>>> from itertools import islice
>>> from gzip import GzipFile
>>> with GzipFile('firewall.4.gz') as file:
...     head = list(islice(file, 1))
>>> head
['Oct  2 07:35:14 192.0.2.1 %ASA-6-305011: Built dynamic TCP translation 
from INSIDE:192.0.2.40/51807 to OUTSIDE:10.18.61.38/2985\n'] 
```

Python 2.6 版本以避免诸如`AttributeError: GzipFile instance has no attribute '__exit__'`（因为[GzipFile()](http://docs.python.org/library/gzip.html#gzip.GzipFile)不支持[GzipFile(](http://docs.python.org/library/gzip.html#gzip.GzipFile)`with` )上的迭代）等问题...

```
>>> from itertools import islice
>>> from gzip import GzipFile
>>> class GzipFileHack(GzipFile):
...     def __enter__(self):
...         return self
...     def __exit__(self, type, value, tb):
...         self.close()
>>> with GzipFileHack('firewall.4.gz') as file:
...     head = list(islice(file, 1)) 
```

问题是我无法检索尾部...[`islice()`](http://docs.python.org/library/itertools.html#itertools.islice)不支持负值，并且如果不遍历 25GB 文件（这需要太长时间），我找不到检索最后一行的方法。

在不将整个文件读入内存或遍历所有行的情况下，读取 gzip 文本文件尾部的最有效方法是什么？如果无法做到这一点，请说明原因。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T17:10:50.517

gzip 使用的 deflate 格式部分地通过在紧接的前 32K 数据中的某处找到匹配的字符串并使用对具有偏移量和长度的字符串的引用来进行压缩。所以在任何时候，从那个点解压缩的能力取决于最后的 32K，它本身取决于它前面的 32K，依此类推回到开头。因此，要解压缩流中任意点*x*的数据，您需要先解压缩从*0*到*x-1 的*所有内容。

有几种方法可以缓解这种情况。首先，如果您想频繁地随机访问一个 gzip 文件，那么您愿意完成一次扫描整个 gzip 文件并建立索引的工作。该索引将在其中保存在某些数量的入口点中的每一个处的先前 32K，其中这些入口点的密度决定了随机访问的速度。在[zlib 源代码分发](http://zlib.net/)中，您可以在[examples/zran.c](https://github.com/madler/zlib/blob/master/examples/zran.c)中看到一个示例。

如果您可以控制 gzip 文件的生成，则可以使用`Z_FULL_FLUSH`flush 选项定期清除这些点上最后 32K 的历史记录，以允许随机访问条目。然后，您可以将这些点的位置保存为索引，这样就不需要每个入口点的 32K 历史块。如果这些点足够少，那么对压缩的影响就会微乎其微。

只需编写 gzip 输出的能力，您就可以`Z_FULL_FLUSH`通过简单地编写串联的 gzip 流来执行类似的操作，但需要更多的开销。 `gunzip`将接受并解码与命令放在一起的 gzip 流，`cat`并将写出单个未压缩数据流。您可以通过这种方式建立一个大的 gzip 日志，在某处记住每个 gzip 片段开始的偏移量。

如果您只对尾部感兴趣，那么您可以按照您在其中一个评论中的建议进行操作，即简单地在大型 gzip 文件尾部的其他位置维护缓存。

我不知道您是否正在制作日志文件。如果您是，您可能希望查看[有效地将短日志消息附加到大型 gzip 文件的示例，](https://github.com/madler/zlib/blob/master/examples/gzlog.h)该示例在 zlib 源代码分发中再次找到。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-06T16:28:17.507

gzip 文件是一个流，因此您必须通读它才能到达最后一行

```
from gzip import GzipFile
from collections import deque
dq = deque(maxlen=1)
with GzipFile('firewall.4.gz') as file:
    head = next(file)
    dq.extend(file)
tail = dq[0] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-06T16:20:42.040

没有办法这样做。DEFLATE 是一种流压缩算法，这意味着如果不解压缩之前的所有内容，就无法解压缩文件的任意部分。

# jquery-mobile - jQuery Mobile：动态生成的导航栏按钮不保持其活动状态

> ID：12761374
> 
> 赞同：1
> 
> 时间：2012-10-06T16:07:25.187
> 
> 标签：jquery-mobile, navigation, persistence

我有一个非常简单的 jQuery 移动页面，标题中有一个持久的导航栏，带有链接到“页面”（*data-role="page"*项目）的按钮。

一切正常，导航栏上的按钮会在您从一页导航到另一页时突出显示。

我的问题是我想在服务器端（在 PHP 中）动态生成这些导航栏。*但是，当您使用 ajax 添加导航栏时， ui-btn-active*和*ui-state-persist*类似乎无法正常工作，并且按钮不再按预期突出显示/保留。

假设我有一个页面，其中定义了导航栏：

```
<div data-role="page" id="settings" data-theme="a"> 
```

我可以演示的最简单的示例是替换如下内容：

```
var htmlContent = $("#settings").html();
$("#settings").html(htmlContent); 
```

这样做会导致按钮不再保持其活动状态。就好像导航栏已经与 jQuery 的意识“脱节”了，我需要重新同步 DOM 或其他东西。

有趣的是，我认为导航栏本身也没有正确地持续存在。尽管在替换内容后它不会进出转换，但被替换页面上的页面内容出现在导航栏的*后面*（因此下面我的示例中的所有 br ）。

伙计，我希望这是有道理的:)

这是我的整个示例……在 head 标签中：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

<script type="text/javascript" charset="utf-8">

function loadSomeHTML() {
    var htmlContent = $("#settings").html();
    $("#settings").html(htmlContent); 
}

</script> 
```

以下是 body 标签的内容：

```
 <div data-role="page" id="welcome" data-theme="a">
    <div data-role="header" data-position="fixed" data-id="TestPersist">
        <div data-theme="" data-role="navbar" data-iconpos="top">
            <ul>
                <li>
                    <a href="#schedule" id="navbar_schedule" data-theme="" data-icon="grid" class="navlink">
                        Schedules
                    </a>
                </li>
                <li>
                    <a href="#settings" id="navbar_settings" data-theme="" data-icon="gear" class="navlink">
                        Settings
                    </a>
                </li>
            </ul>
        </div>
    </div><!-- /header -->
    <div data-role="content" data-theme="">
        This is the welcome page
    </div><!-- /content -->
</div>

<div data-role="page" id="schedule" data-theme="a">
    <div data-role="header" data-position="fixed" data-id="TestPersist">
        <div data-theme="" data-role="navbar" data-iconpos="top">
            <ul>
                <li>
                    <a href="#schedule" id="navbar_schedule" data-theme="" data-icon="grid" class="navlink ui-btn-active ui-state-persist">
                        Schedules
                    </a>
                </li>
                <li>
                    <a href="#settings" id="navbar_settings" data-theme="" data-icon="gear" class="navlink">
                        Settings
                    </a>
                </li>
            </ul>
        </div>
    </div><!-- /header -->
    <div data-role="content" data-theme="">
        This is the sched page
        <input type="button" value="Replace content in settings page" onclick="loadSomeHTML();">
    </div><!-- /content -->
</div>

<div data-role="page" id="settings" data-theme="a">
    <div data-role="header" data-position="fixed" data-id="TestPersist">
        <div data-theme="" data-role="navbar" data-iconpos="top">
            <ul>
                <li>
                    <a href="#schedule" id="navbar_schedule" data-theme="" data-icon="grid" class="navlink">
                        Schedules
                    </a>
                </li>
                <li>
                    <a href="#settings" id="navbar_settings" data-theme="" data-icon="gear" class="navlink ui-btn-active ui-state-persist">
                        Settings
                    </a>
                </li>
            </ul>
        </div>
    </div><!-- /header -->
    <div data-role="content" data-theme="">
        <br><br><br><br><br><br><br>This is the settings page
    </div><!-- /content -->
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:24:40.330

不，不要做一堆标题:)

*众所周知*， jqm使动态更新数据属性变得困难，但它并没有那么糟糕。

如果有人感兴趣，这里有一个技巧——只要你愿意放弃 ui-btn-active 类并使用主题（你当然可以自定义），那么你可以在大约 2 分钟内启动并运行它.

必读：http: [//jquerymobile.com/test/docs/buttons/buttons-options.html](http://jquerymobile.com/test/docs/buttons/buttons-options.html)

显然，您需要将 yr 标题模板/标记作为静态页面包含在 yr 动态内容之上才能正常工作-我从您的问题中假设这是您想要做的，而不是包含用于非动态内容的 php，在在这种情况下，解决方案将是一个更明显的服务器端解决方案。

不管怎样

示例导航栏链接的 html 标记

```
<li><a href="javascript:;" id="nav_billing" class="panes" rel="#billing" data-role="button" data-theme="b" data-icon="minus" data-iconpos="right">Billing Info</a></li>
<li><a href="javascript:;" id="nav_shipping" class="panes" rel="#shipping" data-icon="minus" data-role="button" data-iconpos="right">Shipping Info</a></li>
<li><a href="javascript:;" id="nav_payment" class="panes" rel="#checkout" data-icon="minus" data-role="button" data-iconpos="right">Payment Info</a></li> 
```

这里要看到的重要一点是，您将为活动类分配一个数据主题，而不是分配一个活动类，即 ui-btn-active，并确保我将 data-role="button" 添加到每个链接也是如此:)

* * *

现在是文档末尾的部分：

```
$( document ).bind( "mobileinit", function(){
$.mobile.button.prototype.options.initSelector = ".panes";
}); 
```

是的，我们在这里所做的只是自动初始化这些按钮，所以我们可以使用这样的东西：

```
$('a').buttonMarkup({ theme: "a" }); 
```

剩下的只是把点击器放在一起（注意 on.click 功能）：

```
// 100% untested and sure to not work as is 
$(".panes").on('click', function () {

// turn our clicked link into theme b aka active
$(this).buttonMarkup({ theme: "b" });

// works nice with icons too
$(this).buttonMarkup({ icon: "check" });

// grab all sibling links and turn them to theme a
// this probably won't work without accounting for the actual markup :)
$(this).siblings().buttonMarkup({ theme: "a" }); 

}); 
```

# java - java字符串中的垃圾

> ID：12761375
> 
> 赞同：4
> 
> 时间：2012-10-06T16:07:36.227
> 
> 标签：java

我正在为学校构建一个简单的客户端/服务器程序。服务器从客户端接收消息并将其显示在控制台中。

它使用 Java 和 UDP 套接字。客户端和服务器都在工作。

我的问题在服务器上。在控制台中显示消息后，它将用垃圾填充该行的其余部分（更准确地说是小方块）。

客户来源：

```
import java.io.*;
import java.net.*;

public class Main {

    public Main() {
        // TODO Auto-generated constructor stub
    }

    public static void main(String[] args) {
        int argc = args.length;
        if (argc!=2){
            System.out.println("Syntax:");
            System.out.println("java javaUDPclient ip/hostname port");
            return;
        }

        String hostname = args[0];
        int port = Integer.parseInt(args[1]);

        //create
        try{
            System.out.println ("Binding to a local port");
            // CREATE A DATAGRAM SOCKET, BOUND TO ANY AVAILABLE LOCAL PORT
            DatagramSocket socket = new DatagramSocket();
            System.out.println ("Bound to local port " + socket.getLocalPort());

            // CREATE A MESSAGE TO SEND USING A UDP PACKET
            String message = new String("Time");

            // GET THE CONTENTS OF OUR MESSAGE AS AN ARRAY OF BYTES
            byte[] barray = message.getBytes();

            // CREATE A DATAGRAM PACKET, CONTAINING OUR BYTE ARRAY
            DatagramPacket packet = new DatagramPacket( barray, barray.length );
            System.out.println ("Looking up hostname " + hostname );

            // LOOKUP THE SPECIFIED HOSTNAME, AND GET AN INETADDRESS 
            InetAddress addr = InetAddress.getByName(hostname); 
            System.out.println ("Hostname resolved as "+addr.getHostAddress()); 
            // ADDRESS PACKET TO SENDER 
            packet.setAddress(addr); 
            // SET PORT NUMBER TO 2000 
            packet.setPort(port); 

            // SEND THE PACKET - REMEMBER NO GUARANTEE OF DELIVERY socket.send(packet); 
            socket.send(packet);
            System.out.println ("Packet sent!");
}catch (UnknownHostException e){
            System.err.println ("Can't find host " + hostname); 

        }catch (IOException e){ 
            System.err.println ("Error - " + e); 
        }

    }

} 
```

服务器来源：

```
package progd.java.udp.time.server;

import java.net.*; 
import java.io.*;

public class UDPserver {

    public static void main(String[] args) {
        try{ 
            System.out.println ("Binding to local port 6001"); 

            // CREATE A DATAGRAM SOCKET, BOUND TO THE SPECIFIC PORT 6001 
            DatagramSocket socket = new DatagramSocket(6001); 

            // CREATE A DATAGRAM PACKET WITH A MAXIMUM BUFFER OF 256 BYTES 
            DatagramPacket packet = new DatagramPacket(new byte[256], 256); 

            // RECEIVE A PACKET (BY DEFAULT, THIS IS A BLOCKING OPERATION) 
            socket.receive(packet);
            String message = new String(packet.getData()); 

            // DISPLAY PACKET INFORMATION
            InetAddress remote_addr = packet.getAddress();
            System.out.println("Sent by: " + remote_addr.getHostAddress());
            System.out.println ("Sent from port: " + packet.getPort());
            System.out.println("Message:\n"+ message);

            socket.close();
        }
        catch (IOException e){
            System.err.println ("Error - " + e);
            }
        }
} 
```

客户端控制台输出：

```
Binding to a local port
Bound to local port 58534
Looking up hostname localhost
Hostname resolved as 127.0.0.1
Packet sent! 
```

服务器控制台输出：（如果我从控制台复制粘贴，文本编辑器无法识别方块，所以我将制作一个打印屏幕）

![在此处输入图像描述](../Images/8d0f2324eb589ece4ebd2b7deeac7c2a.png)

我错过了“string-endig”字符吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T16:13:30.693

正如 JavaDoc[`DatagramPacket.getData()`](http://docs.oracle.com/javase/7/docs/api/java/net/DatagramPacket.html#getData())所说：

> 接收的数据或要发送的数据从`offset`缓冲区中的 开始，并运行`length`很长时间。

这意味着`byte[]`您获得的整体不一定有效 - 您必须提取相关的部分。在客户端试试这个：

```
new String(packet.getData(), packet.getOffset(), packet.getLength()); 
```

我们正在使用[`String(byte[] bytes, int offset, int length)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String(byte[],%20int,%20int))构造函数。

# c - 编译器实现中x++和++x的区别

> ID：12761379
> 
> 赞同：1
> 
> 时间：2012-10-06T16:08:00.107
> 
> 标签：c, gcc, compiler-construction

我搜索了 x++ vs ++x 并[在这里](https://stackoverflow.com/questions/1094872/is-there-a-difference-between-x-and-x-in-java)找到了一个很好的答案，所以我决定查看 gcc 的汇编输出，看看 x++ 和 ++x 是如何实现的：

> 主要（） { int s = 0; ++s; 返回0；}

编译示例：

> gcc mul.c -masm=intel -o mul.asm

**++s 的**输出：

```
 .file   "mul.c"
    .intel_syntax
    .text
    .p2align 4,,15
.globl main
    .type   main, @function
main:
    lea %ecx, [%esp+4]
    and %esp, -16
    push    DWORD PTR [%ecx-4]
    push    %ebp
    mov %ebp, %esp
    push    %ecx
    sub %esp, 16
    mov DWORD PTR [%ebp-8], 0
    add DWORD PTR [%ebp-8], 1
    mov %eax, 0
    add %esp, 16
    pop %ecx
    pop %ebp
    lea %esp, [%ecx-4]
    ret
    .size   main, .-main
    .ident  "GCC: (GNU) 4.2.1 20070719  [FreeBSD]" 
```

**x++**的输出：

```
 .file   "mul.c"
    .intel_syntax
    .text
    .p2align 4,,15
.globl main
    .type   main, @function
main:
    lea %ecx, [%esp+4]
    and %esp, -16
    push    DWORD PTR [%ecx-4]
    push    %ebp
    mov %ebp, %esp
    push    %ecx
    sub %esp, 16
    mov DWORD PTR [%ebp-8], 0
    add DWORD PTR [%ebp-8], 1
    mov %eax, 0
    add %esp, 16
    pop %ecx
    pop %ebp
    lea %esp, [%ecx-4]
    ret
    .size   main, .-main
    .ident  "GCC: (GNU) 4.2.1 20070719  [FreeBSD]" 
```

所以，我问 x++ 和 ++x 是否有不同的含义，为什么 GCC 为它们输出一些程序集，不应该有不同的输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T16:11:23.533

这是一个写得不好的测试用例的例子。表达式的实际结果`value++`或`++value`永远不会存储，因此编译器可以处理基本类型的等价物。

请改用此示例：

```
main() { int s = 0, x; x = ++s; return 0; }

main() { int s = 0, x; x = s++; return 0; } 
```

### 后增量：

```
(gdb) disas /m main
函数 main() 的汇编代码转储：
1个int main（）{
   0x0040138c : 推送 %ebp
   0x0040138d : 移动 %esp,%ebp
   0x0040138f : 和 $0xfffffff0,%esp
   0x00401392 : 低于 $0x10,%esp
   0x00401395 : 调用 0x4018d4

2 个整数 s = 0；
   0x0040139a : 移动 $0x0,0xc(%esp)

3个整数x；
4 x = s++；
   0x004013a2 : 移动 0xc(%esp),%eax
   0x004013a6 : 移动 %eax,0x8(%esp)
   0x004013aa : 包括 0xc(%esp)

5返回0；
   0x004013ae : 移动 $0x0,%eax

6 } 0x004013b3 : 离开
   0x004013b4 : 回复

汇编程序转储结束。
(gdb)
```

### 预增量：

```
(gdb) disas /m main
函数 main() 的汇编代码转储：
1个int main（）{
   0x0040138c : 推送 %ebp
   0x0040138d : 移动 %esp,%ebp
   0x0040138f : 和 $0xfffffff0,%esp
   0x00401392 : 低于 $0x10,%esp
   0x00401395 : 调用 0x4018d4

2 个整数 s = 0；
   0x0040139a : 移动 $0x0,0xc(%esp)

3个整数x；
4 x = ++s;
   0x004013a2 : 包括 0xc(%esp)
   0x004013a6 : 移动 0xc(%esp),%eax
   0x004013aa : 移动 %eax,0x8(%esp)

5返回0；
   0x004013ae : 移动 $0x0,%eax

6 } 0x004013b3 : 离开
   0x004013b4 : 回复

汇编程序转储结束。
(gdb)
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T16:10:56.473

要查看不同的输出，您需要做的不仅仅是增加。

> 主要（） { int s = 0; int a = ++s; 返回0；}

如果不使用该值，++s 和 s++ 会做完全相同的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T16:11:38.887

它被称为“优化”。

在您的情况下，无论是预增量还是后增量（它会导致完全相同的逻辑流程），因此汇编输出是相同的。

这是一个反例：

```
/*
 * SAMPLE OUTPUT: i++=1, ++j=3
 */
#include <stdio.h>

int
main (int argc, char *argv[])
{
  int i = 1, j= 2;
  printf ("i++=%d, ++j=%d\n", i++, ++j);
  return 0;
} 
```

这是 Visual C++ 汇编器的输出。你会注意到*这个*例子增加了*“i”和“j”：

```
; File tmp.c
; Line 5
    push    ebp
    mov ebp, esp
    sub esp, 12                 ; 0000000cH
; Line 6
    mov DWORD PTR _i$[ebp], 1
    mov DWORD PTR _j$[ebp], 2
; Line 7
    mov eax, DWORD PTR _j$[ebp]
    add eax, 1
    mov DWORD PTR _j$[ebp], eax
    mov ecx, DWORD PTR _j$[ebp]
    push    ecx
    mov edx, DWORD PTR _i$[ebp]
    mov DWORD PTR -12+[ebp], edx
    mov eax, DWORD PTR -12+[ebp]
    push    eax
    push    OFFSET FLAT:$SG342
    mov ecx, DWORD PTR _i$[ebp]
    add ecx, 1
    mov DWORD PTR _i$[ebp], ecx
    call    _printf
    add esp, 12                 ; 0000000cH
; Line 8
    xor eax, eax
; Line 9
    mov esp, ebp
    pop ebp
    ret 0
_main   ENDP 
```

这是 gcc 汇编器，带有 -O3。你会注意到它没有做*任何*增量：编译器只存储最终值 i=1 和 j=3：

```
.LC0:
        .string "i++=%d, ++j=%d\n"
        .text
        .p2align 4,,15
.globl main
        .type   main, @function
main:
        leal    4(%esp), %ecx
        andl    $-16, %esp
        pushl   -4(%ecx)
        pushl   %ebp
        movl    %esp, %ebp
        pushl   %ecx
        subl    $20, %esp
        movl    $3, 8(%esp)
        movl    $1, 4(%esp)
        movl    $.LC0, (%esp)
        call    printf
        addl    $20, %esp
        xorl    %eax, %eax
        popl    %ecx 
```

最后，这是*优化*的Visual C++ 版本（带有“/Ox”）。您会注意到它是这三个示例中最短的一个：

```
; File tmp.c
; Line 7
    push    3
    push    1
    push    OFFSET FLAT:$SG399
    call    _printf
    add esp, 12                 ; 0000000cH
; Line 8
    xor eax, eax
; Line 9
    ret 0
_main   ENDP 
```

# python - Python为列和行创建/格式化CSV文件

> ID：12761387
> 
> 赞同：0
> 
> 时间：2012-10-06T16:09:42.837
> 
> 标签：python, csv

我有一个网络抓取工具，可以将抓取数据保存到 CSV 文件中。数据如下所示：

```
随机文本
约翰·梅
大街 1234 号
佐治亚州亚特兰大 30331
英亩 0.14 小
随机文本
简·琼斯
小街 4321 号
佐治亚州亚特兰大 30322
英亩 0.07 小
随机文本

```

我想：

(1) 在列中添加 Name,Street,,Address <--- 请注意，此示例由逗号分隔。

(2) 我想在上面发布的地址结果中添加逗号。一个例子是：

```
简琼斯
,4321 小街
,,亚特兰大, GA 30344
,,,英亩 0.07 小
,,,随机文本

```

请注意如何使用逗号将每一行推送到所需的列，同时将不需要的数据英亩 .07 小的随机文本从指定的列中推开。

我如何在python中做到这一点？我可以手动完成，但我正在处理数千个地址，我需要一种简单的方法在 python 中执行此操作。

是否可以在删除 if 后将所有数据拉入列表，并为逗号分配一个变量，如 a = 、 b = 、、 c = 、、，然后将变量连接到特定行中列表，然后再次保存？

另外，我还需要添加列信息：列名称、街道、地址

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:57:02.840

我只是在猜测你在很多方面的意思，因为你的问题似乎缺少一些细节，但这应该会让你得到类似于你想要的东西：

```
import csv

with open('data.txt', 'r') as f:
    with open('data.csv', 'wb') as csv_out:
        line_iter = iter(l.rstrip('\n') for l in f)
        writer = csv.writer(csv_out)
        writer.writerow(['Name', 'Street', '', 'Address'])
        try:
            line_iter.next()    # discard 'random text' (?)
            while True:
                writer.writerow([line_iter.next(), '', '', ''])
                writer.writerow(['', line_iter.next(), '', ''])
                writer.writerow(['', '', line_iter.next(), ''])
                writer.writerow(['', '', '', line_iter.next()])
                writer.writerow(['', '', '', line_iter.next()])
        except StopIteration:
            pass        # reached end of file 
```

它为上面的示例数据提供了以下输出：

```
名称、街道、地址
约翰·梅,,,
,1234 大街,,
,,"亚特兰大, GA 30331",
,,,英亩 0.14 小
,,,随机文本
简琼斯,,,
,4321 小街,,
,,"亚特兰大, GA 30322",
,,,英亩 0.07 小
,,,随机文本

```

# php - preg_replace：替换一个html标签值

> ID：12761390
> 
> 赞同：0
> 
> 时间：2012-10-06T16:10:15.243
> 
> 标签：php, regex, preg-replace

需要在文件 html 中更改标签 html 的值。我尝试使用函数 preg_replace() 但我无法更改任何内容。

html文件：

```
 ...
 <div id="phrase_of_day">
     <div>
         <span class="icon quote"></span>
         <h1>Frase do Dia</h1>
         <blockquote><p>value to change</p></blockquote>
     </div>
 </div>
 ... 
```

我试试这个：

```
$url = '../index.html';

$file = file_get_contents($url);

$o = preg_replace('/.*<div id="phrase_of_day">.*<blockquote><p>(\w+)<\/p><\/blockquote>/','hello world', $file);

file_put_contents('test.html', $o); 
```

有谁知道我错在哪里？

## 更新

我尝试使用 DOMDocument 类，如建议的 Madara Uchiha，但现在我遇到了编码特殊字符的问题。

例子：

```
origin: <h1>Gerar Parágrafos</h1>
after: <h1>Gerar Par&Atilde;&iexcl;grafos</h1> 
```

代码：

```
libxml_use_internal_errors(true);
$document = new DOMDocument('1.0', 'UTF-8');
$document->loadHTMLFile($url);
$document->encoding = 'UTF-8';

$blockquote = $document
    ->getElementById("phrase_of_day") //Div
    ->getElementsByTagName("blockquote")->item(0);

$new_value = new DOMElement("p", "New Value for Element");
$blockquote->replaceChild($new_value, $blockquote->childNodes->item(0));

$document->saveHTMLFile('test.html');
libxml_use_internal_errors(false); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:20:06.633

使用 DOM，就像一个理智的人：

```
<?php

$html = <<<HTML
 <div id="phrase_of_day">
     <div>
         <span class="icon quote"></span>
         <h1>Frase do Dia</h1>
         <blockquote><p>value to change</p></blockquote>
     </div>
 </div>
HTML;

$document = new DOMDocument();
$document->loadHTML($html);

$blockquote = $document
    ->getElementById("phrase_of_day") //Div
    ->getElementsByTagName("blockquote")->item(0);

$new_value = new DOMElement("p", "New Value for Element");
$blockquote->replaceChild($new_value, $blockquote->childNodes->item(0));

echo $document->saveHTML(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:13:44.700

## 您不应该使用正则表达式来解析 HTML。

但是，如果你真的想要，那么你应该使用这个正则表达式>>

```
$o = preg_replace(
  '/(<div id="phrase_of_day">.*?<blockquote><p>)([^<]+)(<\/p><\/blockquote>)/s', 
  '$1hello world$3',
  $file); 
```

检查**[这个演示](http://ideone.com/R5KlT)**。

# c++ - 在双向链表中插入元素

> ID：12761392
> 
> 赞同：1
> 
> 时间：2012-10-06T16:10:37.900
> 
> 标签：c++, list, linked-list

我或多或少地了解了单链表背后的基本思想，但是在将元素插入双链表时遇到了麻烦。基本上我无法将 prev 和 next 指针链接到适当的节点。提前感谢您的帮助。这是我的代码的样子。

链表.h

```
template <class T>
class LinkedList{
      protected:
        LinkedListNode<T>* head;
      public:
        LinkedList():head(NULL){}
        ~LinkedList();
        void insert(const T& x);
};

//inserting
template <class T>
void LinkedList<T>::insert(const T& x) {
 LinkedListNode<T>* head = new LinkedListNode<T>(head->prev, x, head->next);
 if(head != NULL){
         head->prev = head->next;
         head->next = head;
  }       
} 
```

链表节点.h

```
class LinkedListNode{
      protected:
        LinkedListNode<T>* prev;
        T value;
        LinkedListNode<T>* next;
        LinkedListNode(LinkedListNode<T>* p, const T& x, LinkedListNode<T>* n):prev(p), value(x), next(n) {}
        ~doublyLinkedListNode();
        template <class S> friend class doublyLinkedList;
}; 
```

我尝试如下修改插入函数，但它给出了分段错误。我的实施有什么问题？

```
template <class T>
void LinkedList<T>::insert(const T& x) {
 LinkedListNode<T>* head;
 if(head == NULL){
        head->value = x;
        head->prev = NULL;
        head->next = head;

 }
else{   LinkedListNode<T>* newnode;
        newnode->value = x;
        newnode->prev = head->next;
        newnode->next = newnode;
        head = newnode;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:49:14.997

你是[可变阴影](http://en.wikipedia.org/wiki/Variable_shadowing)的受害者。

让我们看看你的原始版本：

```
//inserting
template <class T> void LinkedList<T>::insert(const T& x) {
   LinkedListNode<T>* head = new LinkedListNode<T>(head->prev, x, head->next);
   // ... 
```

我们将剖析您的函数的第一条指令：

```
 LinkedListNode<T>* head; // not initialized value
   new LinkedListNode<T>(head->prev, x, head->next); // oh oh.... 
```

`head`是一个新变量，您的原始变量`this->head`被遮蔽。但即使你解决了这个问题，初始`this->head`状态仍然存在`NULL`，因此`this->head->prev`会导致分段错误。您在第二个版本中修复了后者，但仍然有问题：

模板

```
void LinkedList<T>::insert(const T& x) {
 LinkedListNode<T>* head; // #1
 if(head == NULL){
        // #2
        head->value = x;
        head->prev = NULL;
        head->next = head;

 }
else{   LinkedListNode<T>* newnode;
        newnode->value = x;
        newnode->prev = head->next; // #3
        newnode->next = newnode;    // #3
        head = newnode;
 } 
```

第一个错误 ( `#1`) 同样是变量阴影。`#2`再次是分段错误，因为您没有为头部分配内存。

`#3`是逻辑错误。前一个节点应该是头本身，而节点后面的节点不应该是节点本身。

# java - 在 Java 中实现 REST API 客户端和 JSON 解析器的最简单方法是什么？

> ID：12761400
> 
> 赞同：0
> 
> 时间：2012-10-06T16:11:25.547
> 
> 标签：java, jquery, json, rest, rest-client

我正在努力将此代码从 JQuery 转移到 Java：

```
var url = 'http://gdata.youtube.com/feeds/api/videos/'; 

$.getJSON( url + '?v=2&alt=json-in-script&callback=?', {
    'q': q,
  }, function(data) {gotData(q, data);});

function gotData(q, data){
  for(var i in data.feed.entry){
     // print the data...
  }
} 
```

它调用 YouTube API 并读取一些 JSON 结果字段。

在 Java 中实现这一点的最简单和最合适的方法是什么？由于我只需要一个 API 方法调用，因此我需要尽可能轻的解决方案。但我猜测无论我使用什么库，Java 中的代码都会变得更加复杂。

此外，我不想使用 Java 的 YouTube API 客户端，而是使用一些通用的 REST-JSON 解决方案，将来我可以将其用于更多的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:25:21.097

我建议将 Jersey-client 用于 REST，将 json-simple 用于 json 解析器。

请查看[http://code.google.com/p/json-simple/](http://code.google.com/p/json-simple/)获取 json 解析器和 [http://www.ibm.com/developerworks/web/library/wa-aj-tomcat/](http://www.ibm.com/developerworks/web/library/wa-aj-tomcat/)以创建 REEST 客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:32:00.810

您可以使用[Apache HttpClient](http://hc.apache.org/)和[Jackson Json](https://github.com/FasterXML/jackson-core)：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
// Add query string into get request
HttpGet getRequest = new HttpGet("http://gdata.youtube.com/feeds/api/videos/");

getRequest.setHeader("Accept", "application/json");

HttpResponse response = httpClient.execute(getRequest);

ObjectMapper mapper = new ObjectMapper();
Map<String, Object> jsonMap = mapper.readValue(response.getEntity().getContent(), new TypeReference<HashMap<String,Object>>() {}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T16:18:43.773

我会用 google-gson [Google Gson](http://code.google.com/p/google-gson/)
它注解驱动，非常好用。

# javascript - JScript，将数据从 IE 写入文件

> ID：12761408
> 
> 赞同：1
> 
> 时间：2012-10-06T16:12:36.230
> 
> 标签：javascript, jquery, internet-explorer

我无法将数据从 IE 写入本地文件。我有下一个问题：当我创建带有下一个内容的 html 页面时

```
<html>
<head>
<title>File's saving</title>
  <SCRIPT>
function cf_random() {
b="c:\\file.txt";

var fso, f1; 
fso = new ActiveXObject("Scripting.FileSystemObject");
f1 = fso.CreateTextFile(b, true);

f1.WriteLine("Testing") ;
document.writeln("File " + b + " is created.");
}
  </SCRIPT>

</head>
<BODY>
<input type=button value="Create file" onClick="cf_random()">
</body>
</html> 
```

它工作得很好，但是当我尝试使用我使用书签附加到站点的 extern js 文件的相同代码时 - 我收到错误 SCRIPT429: Automation server can't create object(code bellow)

```
javascript: (function() {
    var s2 = document.createElement('script');
    s2.src = 'http://192.168.0.100/jquery.js';
    document.body.appendChild(s2);
})();

$(document).ready(function(){    
b="c:\\file.txt";
var fso, f1; 
fso = new ActiveXObject("Scripting.FileSystemObject");
f1 = fso.CreateTextFile(b, true);
f1.WriteLine("Testing") ;
document.writeln("File " + b + " is created.");
}); 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:00:42.840

我解决了这个问题。这只是保密设置。

# django - 旧数据库的 Django 日期时间解析失败

> ID：12761409
> 
> 赞同：1
> 
> 时间：2012-10-06T16:12:51.367
> 
> 标签：django, datetime

我正在尝试使用[digikam](http://www.digikam.org "Digikam-网页")的现有数据库并为其创建一个 DJango 应用程序。但是在管理员中打开一个模型时，由于`DateTimeField`.

[我在这里](https://docs.djangoproject.com/en/dev/howto/legacy-databases/)使用了从 legacy db 函数导入，它工作得很好（我已经可以使用两个表了）。该`images`表的生成模型为：

```
class Image(models.Model):
    id = models.IntegerField(primary_key=True)
    album = models.IntegerField(null=True, blank=True)
    name = models.TextField()
    status = models.IntegerField()
    category = models.IntegerField()
    modificationdate = models.DateTimeField(null=True, db_column=u'modificationDate', blank=True) # Field name made lowercase.
    filesize = models.IntegerField(null=True, db_column=u'fileSize', blank=True) # Field name made lowercase.
    uniquehash = models.TextField(db_column=u'uniqueHash', blank=True) # Field name made lowercase.
    class Meta:
        db_table = u'Images'
    def __unicode__(self):
        return name 
```

在为其调用相关管理页面时，我得到一个“ValueError”，并且跟踪显示它正在尝试将字符串转换`'2012-09-30T11:35:35'`为日期时间。

两个问题

1.  如果我设置`modificationdate = models.TextField(...)`错误仍然存​​在，它仍然会尝试将上述字符串转换为日期时间。为什么？
2.  如果我在 settings.py 中为 DATETIME_INPUT_FORMATS 的元组（即 '%Y-%m-%dT%H:%M:%S'）添加一个拟合格式，错误仍然存​​在。如何让 Django 接受我的附加格式？

使用 Django 1.3.1 和 sqlite3。删除线`modificationdate = ...`可以解决问题。

# java - Java 集合：排序卷号、年份和排名

> ID：12761411
> 
> 赞同：0
> 
> 时间：2012-10-06T16:12:54.750
> 
> 标签：java, text, text-files

我应该从如下所示的文本文件中获取输入：

```
rno year rank
22 2004 12
18 2004 17
43 2005 15
43 2006 45
18 2005 23
22 2005 15
43 2004 16
22 2006 20 
```

我应该对这些进行排序并按以下顺序生成输出：

```
rno  2004  2005  2006
18    17     23        
22    12     15    20    
43    16     15    45 
```

如果卷号没有可用的等级。对于相应的年份，然后打印一个空格

我能够使用以下代码做到这一点：

```
public class Test {
    public static void main(String args[]) throws FileNotFoundException{
        String[] rollNo=new String[20];
        String[] year=new String[20];
        String[] rank=new String[20];
        int count=1;
        int cnt=0;
        Scanner scn=new Scanner(new File("D:/abc.txt"));
        while(scn.hasNextLine()){
            Scanner sc=new Scanner(scn.nextLine());
                while(sc.hasNext()){
                if(count==1){
                    rollNo[cnt]=sc.next();
                    count++;
                }
                else if(count==2){
                    year[cnt]=sc.next();
                    count++;
                }
                else{
                    rank[cnt]=sc.next();
                    count=count-2;
                }
            }
            cnt++;
        }

            TreeSet<String> yr=new TreeSet<String>();
            for(int i=1;i<year.length;i++)
            if(year[i]!=null)
            yr.add(year[i]);
            TreeSet<String> rl=new TreeSet<String>();
            for(int i=1;i<rollNo.length;i++)
            if(rollNo[i]!=null)
            rl.add(rollNo[i]);
            Hashtable<String,String> y1=new Hashtable<String,String>();
            for(int ct=0;ct<year.length;ct++)
                if(year[ct]!=null)
                    if(year[ct].equals("2004"))
                        y1.put(rollNo[ct], rank[ct]);
            Hashtable<String,String> y2=new Hashtable<String,String>();
            for(int ct=0;ct<year.length;ct++)
                if(year[ct]!=null)
                    if(year[ct].equals("2005"))
                        y2.put(rollNo[ct], rank[ct]);
            Hashtable<String,String> y3=new Hashtable<String,String>();
            for(int ct=0;ct<year.length;ct++)
                if(year[ct]!=null)
                    if(year[ct].equals("2006"))
                        y3.put(rollNo[ct], rank[ct]);

            System.out.print(rollNo[0]);
            for(Object obj:yr)
                System.out.print("  "+obj);
                    System.out.println();
            for(Object obj:rl){
                System.out.print(obj+"   ");
            if(y1.containsKey(obj))
                System.out.print(y1.get(obj)+"    ");
            else
                System.out.print(" ");
            if(y2.containsKey(obj))
                System.out.print(y2.get(obj)+"    ");
            else
                System.out.print("    ");
            if(y3.containsKey(obj))
                System.out.print(y3.get(obj)+"    ");
            else
                System.out.print("    ");

            System.out.println();
            }

    }
} 
```

但是现在的问题是这些年的哈希表是硬编码的，我想让这个程序动态地意味着无论输入（没有年份，排名或滚动没有），我希望我的输出对于任何输入都具有相同的格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:59:53.710

我认为这个任务是关于 3 件事：

1.  将概念映射到适当的类层次结构
2.  最重要的是，使用 compareTo 方法和 Collection 的不同 impl
3.  一些样板文件，例如读取文件/输出

因此，您不应在一个主类中做所有事情，而应该

*   编写一些映射这些概念的模型类
*   在这些类中实现 compareTo 方法
*   根据您的需要使用正确的集合实现（orderedlist？sortedset？）
*   那么你的 main 方法应该解析文件、实例化对象并让 Java API 完成它的工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T05:06:09.110

我做到了。

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.Iterator;
import java.util.Map;
import java.util.Scanner;
import java.util.Set;
import java.util.StringTokenizer;
import java.util.TreeMap;
import java.util.TreeSet;
public class Nu {

    public static void main(String[] args) throws FileNotFoundException{
        int lineCount=0;
        Scanner scn1=new Scanner(new File("D:/abc.txt"));
        while(scn1.hasNextLine()){
            scn1.nextLine();
            lineCount++;//count no of lines for array length
        }
        int count=1;
        int cnt=0;
        String[] yearss=new String[lineCount];//new array for years
        Scanner scn=new Scanner(new File("D:/abc.txt"));
        while(scn.hasNextLine()){//file yearss array
            Scanner sc=new Scanner(scn.nextLine());
            while(sc.hasNext()){
                if(count==1){
                    sc.next();
                    count++;
                }
                else if(count==2){
                    yearss[cnt]=sc.next();//yearss array is filled
                    count++;
                }
                else{
                    sc.next();
                    count=count-2;
                }
            }
            cnt++;
        }

        TreeSet<String> yr=new TreeSet<String>();//remove duplicate elements from years and sort them
        for(int i=1;i<yearss.length;i++)
            if(yearss[i]!=null)
                yr.add(yearss[i]);//add elements to treeset
        TreeMap allRecord=new TreeMap();//treemap sorts keys
        try{
            File file=new File("D:/abc.txt");//used for file searching
            String[] yearArray=(String[])yr.toArray(new String[0]);//convert treeset to String array
            String roll="";
            String year="";
            String rank="";
            BufferedReader in =new BufferedReader(new FileReader(file));//Filereader reads character by character and bufferedReader reads blocks or streams of data
            String value=in.readLine();//read next line 

            while(value!=null){
                StringTokenizer st=new StringTokenizer(value);//pass line into stringtokenizer
                roll=st.nextToken();//add 1st string to roll
                year=st.nextToken();//add 2nd to year
                rank=st.nextToken();//add third to rank
                TreeMap record=(allRecord.get(roll)!=null)?(TreeMap)allRecord.get(roll):null;//if roll != null then add roll to record else add null
                //returns year and rank//   System.out.println(allRecord.get(roll));
                if(record==null)//if null
                    record=new TreeMap();//if null create new instance
                    else
                    allRecord.remove(roll);//remove null from allrecord
                record.put(year, rank);//put year and rank//every time record is refreshed 
                allRecord.put(roll, record);//put 22 and record//treemap returns null if get(key)==null
                value=in.readLine();//read next line
            }

            Set keyset=allRecord.keySet();//gets all  keys from allRecord
            Iterator i=keyset.iterator();//iterate keyset
            System.out.print("rno"+" ");
            for(int j=0;j<yearArray.length;j++)
                System.out.print(yearArray[j]+"   ");
            //print all years
            System.out.println();
            while(i.hasNext()){
                roll=(String)i.next();//get roll numbers
                if(!roll.equals("rno"))
                System.out.print(roll+"    ");
                else
                    System.out.print("    ");
                Map record=(Map)allRecord.get(roll);//get record using the rollno
                for(int j=0;j<yearArray.length;j++){
                    rank=(String)record.get(yearArray[j]);
                    //get rank for the year
                    if(rank!=null){
                    System.out.print(rank+"    ");
                    }
                    else
                    {
                        System.out.print("       ");
                    }
                }
                System.out.println("");
            }
        }
        catch(Exception e){e.printStackTrace();}
    }
}* 
```

# java - 如何使用 EAR 文件的 lib 目录？

> ID：12761416
> 
> 赞同：0
> 
> 时间：2012-10-06T16:13:32.453
> 
> 标签：java, java-ee-6, ear

我使用 EAR 文件已经有一段时间了，我从来没有在它的 LIB 目录中放过任何东西。无论如何，它是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:16:13.697

您可以将 JAR 文件放在 EAR lib 目录中，然后这些 JAR 文件将可供 EAR 中打包的所有模块使用。因此，您通常会将所有模块所需的库放入其中。

# css - 我需要一个溢出来从左边截断，用省略号

> ID：12761418
> 
> 赞同：25
> 
> 时间：2012-10-06T16:13:41.997
> 
> 标签：css

简而言之，我有一个字段，其中最右边的数字是最重要的。（当然，这个字段来自我们的附属系统，基于他们的主键，所以最左边的数字在每个时期只改变一次！）

每个人都知道 CSS 提供了一种带有“text-overflow: ellipsis;”的 RIGHT 截断。我们如何（不向服务器添加代码以通过字符串手术准备该字段）截断左侧的字段，并将“...”省略号放在左侧？

（CSS3 没问题。）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-06T17:54:55.897

尝试使用这个技巧：

**HTML**

```
<p class="ellipsis">ert3452654546</p> 
```

**CSS**

```
.ellipsis {
    overflow: hidden;
    width: 60px;
    direction: rtl; 
    margin-left: 15px;
    white-space: nowrap;
}

.ellipsis:after {
    position: absolute;
    left: 0px;
    content: "...";
}​ 
```

[小提琴](http://jsfiddle.net/QS6EJ/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-06T16:58:36.843

我现在无法测试它，但我很确定添加

```
direction: rtl; 
```

会做预期的结果。

[![从左到右溢出](../Images/6e772cb79c3e43e3fe658fcf6f009175.png)](https://i.stack.imgur.com/LhXglm.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-14T13:21:49.073

您可以使用 css 类来实现这种行为，例如：

```
.responsive-text {
  display: inline-block;
  vertical-align: middle;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  direction: rtl;
  width: 100%;
} 
```

您只需要定义此文本容器的大小，并且每次里面的文本不只填充一行时，它将截断文本并`...`在开头添加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-07T12:41:26.173

当我使用`direction: rtl;`workaroud时，请注意编写类似的`1 > 2 > 3`内容会导致显示为`3 < 2 < 1`！

解决方案是`&ltr;`在 HTML 中的文本之前添加，如果您使用 Angular，则必须`&#x200E`在 HTML 中的文本之前添加。

# java - Android动画逐帧失败

> ID：12761422
> 
> 赞同：1
> 
> 时间：2012-10-06T16:14:05.350
> 
> 标签：java, android, animation, drawable, scale

我是 Android 新手，只是尝试逐帧开始动画，每个帧图像都正确缩放。我从类型化数组资源中获取帧，然后将它们添加到 AnimationDrawable 对象。看起来帧已成功添加，但动画未在模拟器中启动 - 发生异常并返回 null。这是我的代码。

SecondActivity.java

```
package mypackage;

import android.app.Activity;
import android.content.res.Resources;
import android.content.res.TypedArray;
import android.graphics.drawable.AnimationDrawable;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.util.Log;
import android.view.MenuItem;
import android.widget.ImageView;
import android.widget.Toast;

public class SecondActivity extends Activity {

    AnimationDrawable xAnimation;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_second);
        ImageView vImage = (ImageView) findViewById(R.id.imageView1);
        Resources res = getResources();
        TypedArray pics_Res = res.obtainTypedArray(R.array.pics_res);
        AnimationDrawable xAnimation = new AnimationDrawable();
        xAnimation.setOneShot(false);
        Drawable Mypic;

        try {
        for(int i = 1; i<4; i++)
        {

            Mypic = pics_Res.getDrawable(i);
            vImage.setImageDrawable(Mypic);
            vImage.setAdjustViewBounds(true);
            xAnimation.addFrame(vImage.getDrawable(), 2000);
            Mypic = null;

        }

        }
        catch (Exception e){
            Log.e("activity_second", "exception occured = " + e.getMessage());
        }
        finally{
            /*System.exit(1);*/ 
        }
    }

      public void onWindowFocusChanged(boolean hasFocus) {

        super.onWindowFocusChanged(hasFocus);

      if(hasFocus) 
          try {
              Log.e("second_activity", "animation started");

              if (xAnimation != null) {
                  xAnimation.start();
              }
              else
              Log.e("second_activity", "animation is null");
          }
          catch (Exception e){
            Log.e("activity_second", "exception occured = " + e.getMessage());
          }
          finally{
              /*System.exit(1); */
          }
      } 
```

res\values\arrays.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <array name="pics_res">
        <item>@drawable/pic1</item>
        <item>@drawable/pic2</item>
        <item>@drawable/pic3</item>
        <item>@drawable/pic4</item>
        <item>@drawable/pic5</item>
    </array>

</resources> 
```

布局\activity_second.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

/>

</LinearLayout> 
```

# ajax - Twitter Bootstrap 模态表单提交

> ID：12761423
> 
> 赞同：4
> 
> 时间：2012-10-06T16:14:06.147
> 
> 标签：ajax, twitter, twitter-bootstrap, submit, modal-dialog

我是 Twitter Bootstrap 的初学者，我正在尝试从模态框处理表单，该模态框也加载了 Ajax。问题是我不知道如何使用它。我已经在谷歌上搜索了几个小时，但我找不到一个很好的例子。

我以前用过jquery ui，我想它可能几乎一样。我想知道以下内容：

1.  如何使用 Ajax 加载包含表单的文件
2.  在表单加载后简单地使用选择器（例如 $('#item');) 来获取表单中键入的值是否有效
3.  如何绑定模态的提交按钮以通过 Ajax 将表单发送到另一个文件

我将不胜感激，我可以在下面提供一个表格样本：

```
 <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Submit a link</h3>
    </div>
    <div class="modal-body">
    <div id="msgholder1"></div>
    <div id="msg-loader"></div>
    <form action="../ajax/controller.php" data-async data-target="#msgholder1" id="add-link-form" method="POST">
    <table id="theform">
    <tr>
    <td>URL:</td>
    <td><input type="text" name="url" size="45" class="text ui-widget-content ui-corner-all" id="url" /></td>
    </tr>
    <tr>
    <td>Quality:</td>
    <td><select name="quality" id="quality">
          <option value="0">Pick One ...</option>
          <option value="1">CAM</option>
          <option value="2">TS</option>
          <option value="3">DVD</option>
    </select><br />
    </td>
    </tr>
    <tr>
    </fieldset>
    </form>
    </div>
    <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
    </div> 
```

任何类型的相关文档也很有用。

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-06T21:08:31.280

经过几个小时的研究和工作，我得到了以下工作 Ajax 模态脚本：

```
<script type="text/javascript">
$(document).ready(function() {
  $('#addlink').on('click', function(event) {
    var href = SITEURL + '/modules/movies/addlink.tpl.php?movie_id=<?php echo $movie->id; ?>';
    $.get(href, function(response) {
      $('.modal').html(response);
      $('.modal').modal({keyboard:true});
      $('button#submit_link').bind('click', function()
        {
        $('.modal-body').html('<p>Loading ...</p>');
        $.ajax({
                    type: 'post',
                    url: SITEURL + "/ajax/controller.php",
                    data: 'action=report_link',
                    dataType : 'html',
                    context: $(this),
                    success: function (msg) {
                        $(".modal-body").html(msg);
                    }
                });
        });
    });
    event.preventDefault();
  });
});
</script> 
```

# javascript - 如何在Windows 8 javascript中每次点击更改背景图像

> ID：12761426
> 
> 赞同：0
> 
> 时间：2012-10-06T16:14:23.400
> 
> 标签：javascript, windows, html, windows-8, microsoft-metro

我正在开发一个 Windows 8 Metro 应用程序。在我的 default.html 文件中，我有一个背景图片：

```
<div id="backgroundImage" >
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <defs>
                <filter id="myGaussianBlur" x="0" y="0">
                    <feGaussianBlur in="SourceGraphic" stdDeviation="2"></feGaussianBlur>
                </filter>
            </defs>
            <image xlink:href="**surf.jpg**" width="100%" height="100%" preserveAspectRatio="none" filter="url(#myGaussianBlur)" />
        </svg>
    </div> 
```

我想替换`href="surf.jpg"`参考。我还有一个文件，`Creator.js`，它包含当前图像：

```
 var ControlConstructor = WinJS.UI.Pages.define("Creator.html", {
    // This function is called whenever a user navigates to this page. It
    // populates the page elements with the app's data.
    ready: function (element, options) {
        // TODO: Initialize the page here.

        // the options of the Creator are: image.
        // image is the path to the boleh creator's background image.
        options = options || {};
        this._data = WinJS.Binding.as({ image: options.image }); 
```

我还有一个 getter 和一个 setter：

```
 // Getters/setters for image

   image: {
        get: function () { return this._data.image; },
        set: function (value) { this._data.image = value; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:31:48.703

我在尝试开发应用程序时发现有使用 JavaScript 编写代码的博客阅读器.....我正在分享链接，您可以检查它是否对您有任何帮助。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh974582.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh974582.aspx)

您还可以查看 Codeproject 中的简单文章.....这也可以帮助您 [http://www.codeproject.com/Articles/338916/Windows-8-JavaScript-Metro-Application-Getting-Sta](http://www.codeproject.com/Articles/338916/Windows-8-JavaScript-Metro-Application-Getting-Sta)

# c# - 获取应用路径

> ID：12761427
> 
> 赞同：3
> 
> 时间：2012-10-06T16:14:26.653
> 
> 标签：c#, winforms, entity-framework, path

好的，我正在将一些 Winform 项目从 Framework 4.0 移动到 Framework 4.5，并且在尝试从类库中查找可执行文件路径时遇到了问题。我有一个用于记录错误的错误记录类，这是我的代码片段：

```
using System;
using System.IO;
using System.Windows.Forms;

namespace FunctionClassLibrary
{
    public static class ErrorLogging
    {
        public static string errLogFullPath
        {
            get
            {
                string errLogFile = "Application";
                m_errLogFullPath = Path.Combine(Path.GetDirectoryName(Application.ExecutablePath), errLogFile + "_ErrorLog.txt");
                return m_errLogFullPath;
            }
        }
    }
} 
```

如您所见，我能够引用 System.Windows.Forms 命名空间，该命名空间又公开了 Application.ExecutablePath 属性。显然，在 Framework 4.5 中，您不能再引用 System.Windows.Forms 命名空间。我整个早上都在谷歌搜索没有成功，这两个 MSDN 链接：[LINK1](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.startuppath.aspx)和[LINK2](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.userappdatapath.aspx)都显示了使用 System.Windows.Forms 命名空间的示例。所以我的问题是有人有解决这个问题的方法吗？

# **更新**

好吧，我疯了，我刚刚意识到我可以简单地使用 Environment.GetFolderPath 方法来找到 CommonProgramFiles 文件夹，无论如何我应该存储这个文件。抱歉今天早上打扰大家了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T16:20:30.453

您可以使用`Directory.GetCurrentDirectory()`or`AppDomain.CurrentDomain.BaseDirectory`代替：

```
Path.Combine(Directory.GetCurrentDirectory(), 
                 errLogFile + "_ErrorLog.txt"); 
```

或者：

```
Path.Combine(AppDomain.CurrentDomain.BaseDirectory, 
                 errLogFile + "_ErrorLog.txt"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T16:25:14.933

```
Path.Combine(Path.GetDirectoryName(System.Reflection.Assembly.GetEntryAssembly().Location),errLogFile + "_ErrorLog.txt"); 
```

# emacs - 如何在 azerty 键盘上执行 CM-\？（和其他 azerty 提示）

> ID：12761428
> 
> 赞同：1
> 
> 时间：2012-10-06T16:14:30.623
> 
> 标签：emacs, keyboard-shortcuts, keyboard-layout, azerty-keyboard

`C-M-\`我在我的 azerty 键盘上成功执行组合时遇到问题。

主要问题是要击中`\`我需要按住`alt gr`，这似乎把整个事情搞砸了。我很想知道这个问题的经典答案是什么，如果有一个不是“重新绑定命令”

其他与 azerty 相关的提示也会让我感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T01:14:11.743

通常答案是键入`ESC C-\`（所有`M-foo`绑定都可以通过点击`ESC foo`来实现），这通常会更容易一些，但取决于您的键盘，它仍然可能很棘手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T21:22:58.243

你试过了`AltGr RCtrl Alt _`吗？

来自[EmacsWiki.org](http://www.emacswiki.org/emacs/AltGrKey)：

> 诀窍是您必须键入 AltGr 作为第一个键，并且 Ctrl 必须是右控制键，而不是左控制键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-05T10:56:34.063

我在使用 Atom 编辑器时遇到了同样的问题。

在 Atom 中，“切换树视图”快捷方式是`ctrl`- `\`，而我的 azerty 键盘中的任何一个`crtl`- `\`，`ctrl`- `altgr`-`\`甚至建议`AltGr` `RCtrl` `Alt_`都不起作用......

尽管如此，我还是找到了一个与`ctrl`-一起工作的键绑定 `*` ，我不知道为什么会这样，但你可以验证你用`crtl`-录制的键绑定 `.` ，它表明`ctrl`-`*`实际上被视为`ctrl`-`\`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T11:56:03.773

我重新绑定了大多数键绑定，但如果我在- -`AltGr`之前按住键我没有问题（使用另一个）也就是说，我使用的是 bépo 键盘，而不是 Azerty 键盘（但有类似的问题）`Ctrl``Alt``\``Alt`

# spring - URLConnection 和 Spring Security PersistentTokenBasedRememberMeServices

> ID：12761431
> 
> 赞同：0
> 
> 时间：2012-10-06T16:14:58.617
> 
> 标签：spring, security, cookies, spring-security, remember-me

我正在尝试使用 sitemesh 在屏幕上将内容拉到一起。您必须“登录”到站点才能查看站点网格正在显示的页面，并且您必须登录才能查看站点网格试图拉入和装饰的组件。

我正在使用 spring security 和 PersistentTokenBasedRememberMeServices 来做到这一点。发生的情况是，当站点网格调用以获取其组件进行装饰时，即使用户已登录并可以访问该页面，它也会获得由 Spring Security 提供的登录屏幕而不是内容。

挖掘站点网格代码，站点网格正在创建一个 URL 和一个 URLconnection 来调用装饰。

```
URL url = new URL(this.page);

URLConnection urlConn = url.openConnection();

urlConn.setUseCaches(true);

BufferedReader in = new BufferedReader(new InputStreamReader(urlConn.getInputStream())); 
```

所以我想我的问题是......我可以像这样将弹簧安全令牌附加到 urlConnection 吗？

```
URL url = new URL(page);
URLConnection urlConn = url.openConnection();
urlConn.setRequestProperty("Cookie", myCookie);
urlConn.setUseCaches(true);
urlConn.connect(); 
```

If so, what does the format of the cookie need to be? I've tried what is below (the gibberish is the value of the security cookie generated by spring security)

```
securityCookie=Y2E0cFR1WWp6RTRjTzRBSFhYaG50dz09OjR mNzlON2syVXh3M01BSXRONGV2QXc9PQ 
```

It doesn't work as I get a cookie theft exception from Spring Security. Any ideas? Do I need to add the path or domain? If so what is the format?

Does the cookie value need to be encoded in some way?

# ios - iphone scrollview and imageview autoresize

> ID：12761432
> 
> 赞同：1
> 
> 时间：2012-10-06T16:15:01.823
> 
> 标签：ios, imageview, scrollview, autoresize

I am using xcode 4.3.2\.

I have an `imageView` inside a `scrollView`, with the `contentMode` for both set as aspect fill.

My problem is after I rotate the orientation, the screen focuses on the center of the image.

When I scroll down there is a blank part under the image. When I try to scroll up, it bounce me back, so actually I cannot stay at the top of `scrollView`

我将`contentsize`滚动视图的大小设置为手机上显示的实际图像的大小（不是原始图像大小），

两个框架的原点都是 0, 0 所以当我旋转手机时任何人都可以帮助解决这个问题。

# c++ - C++ 是否提供对异步方法的支持？

> ID：12761437
> 
> 赞同：0
> 
> 时间：2012-10-06T16:15:48.347
> 
> 标签：c++, asynchronous

我想让我的应用程序响应更快、更敏捷，我对异步方法感兴趣，但据我所知，C++ 不支持任何类型的异步方法：这是真的吗？

编辑：我会很感激有一些关于这个的好图书馆的名字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:19:59.857

这是真的，但不完全是：虽然 C++ 语言本身没有异步机制，但可以在语言之上构建一个异步层作为库，例如。[http://www.boost.org/doc/libs/1_35_0/doc/html/boost_asio/design/async.html](http://www.boost.org/doc/libs/1_35_0/doc/html/boost_asio/design/async.html)

如果你想要线程，C++11 提供原生支持：[http ://en.wikipedia.org/wiki/C%2B%2B11#Threading_facilities](http://en.wikipedia.org/wiki/C%2B%2B11#Threading_facilities)

Boost 大量使用模板元编程，所以准备好进行一些核心元编程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T16:19:42.493

标准 C++11 具有用于多线程和并发 ( ) 的低级构建块`<thread>`，以及用于任务级并行性和异步性 ( `<future>`，包括`std::async`启动异步任务) 的高级抽象。

对于不一定涉及线程的更通用的异步操作方法，我建议查看[Boost.Asio](http://www.boost.org/libs/asio/)。

# c# - 覆盖/更改标签控件的 .NET Winforms 字体垂直对齐行为

> ID：12761438
> 
> 赞同：1
> 
> 时间：2012-10-06T16:15:56.427
> 
> 标签：c#, winforms, fonts, label, vertical-alignment

我有一个 TextAlign 属性设置为 MiddleCenter 的常规标签。该标签旨在保存带有分钟和秒的时间值，并将用作秒表。

如果字体很小，则标签垂直对齐正确。然而，随着字体大小的增加，垂直对齐变得有问题......

看这里的截图，你会明白我的意思：

[![截屏](../Images/618dd610b0a99a7be181266fa0024b38.png)](https://i.stack.imgur.com/oWV8l.png)

据我了解，我认为 .NET 在技术上是正确的——我认为垂直对齐从印刷意义上来说是正确的，因为字体上升和下降之类的东西。但是，在这种情况下，这并不真正适合我的需求。在屏幕截图中，标签的顶部比标签的底部有更多的空间。我希望这两个部分在显示数字时相等。我只使用数字和冒号，所以我对如果包含其他字符（例如“g”）它的外观不感兴趣，它显然会使像素悬挂在基线下方。

我尝试调整填充以强制执行此行为，但它只是导致文本被剪裁，并且.NET 不会让我使用负填充/边距。有什么简单的方法可以在这里完成我想要的吗？我还尝试手动编辑 ttf 字体文件并更改字体上升/下降，以便 .NET 以不同方式对齐它，但无法弄清楚。谢谢你的建议。

我使用的字体文件在这里下载： [http ://www.fontspace.com/style-7/digital-7](http://www.fontspace.com/style-7/digital-7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:41:29.347

看来，如果比率太大，文本只会“下沉”并最终被切断。

在 Form ResizeEnd 事件上试试这个：

```
 label1.TextAlign = System.Drawing.ContentAlignment.MiddleCenter;
    //First make the font big enough
    double fontSize = label1.Width / label1.Text.Count();
    int height = label1.Height;
    fontSize = fontSize > 0 ? (double)fontSize : 1;
    if (fontSize < (height / 2))
    {
        fontSize = (height / 2);
    }
    label1.Font = new System.Drawing.Font(label1.Font.FontFamily, (float)fontSize, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));

    //then adjust the text to the label size
    while (label1.Width < System.Windows.Forms.TextRenderer.MeasureText(label1.Text,
        new Font(label1.Font.FontFamily, label1.Font.Size, label1.Font.Style)).Width ||
        label1.Height < System.Windows.Forms.TextRenderer.MeasureText(label1.Text,
        new Font(label1.Font.FontFamily, label1.Font.Size, label1.Font.Style)).Height)
    {
        label1.Font = new Font(label1.Font.FontFamily, label1.Font.Size > 1 ? label1.Font.Size - 0.5f : label1.Font.Size, label1.Font.Style);
        if (label1.ClientRectangle.Width < 3 || label1.ClientRectangle.Height < 3)
            break;
    } 
```

我修改了这个：[https ://stackoverflow.com/a/9645577/1027551](https://stackoverflow.com/a/9645577/1027551)

# html - 使用 Dart 解析格式错误的 HTML

> ID：12761443
> 
> 赞同：2
> 
> 时间：2012-10-06T16:16:39.053
> 
> 标签：html, dart

所以我在类文件中有这段代码：

```
Document requestData (String url, [String postVars, bool pauseApp = false, onSuccess(Document ht)]) {
   HttpRequest html = new HttpRequest();
   html.open((postVars == null ? 'GET' : 'POST'), url, async: !pauseApp);

   html.send(postVars);
   if (pauseApp == true) { return html.responseXML; }
   else { html.on.readyStateChange.add((Event e) { 
             if (html.readyState == HttpRequest.DONE && (html.status == 200 || html.status == 0)) {
                 try { 
                   //HERE IS WHERE THE ISSUE IS ----V
                   DOMParser d = new DOMParser();
                   onSuccess(d.parseFromString(html.responseText,"text/html")); 
                   }
                 catch (e) {
                   print("Error on requestData($url) async = $pauseApp - $e");
                 }
               }
           });
     }
 } 
```

（整个参考来源：[http](http://pastebin.com/z21PM7r0) ://pastebin.com/z21PM7r0 - 我使用 dartium 标志“--disable-web-security”来允许跨服务器请求）

问题基本上是，请求 responseXML 返回 null 而 responseText 按预期返回 HTML。为了解决这个问题，我尝试使用 DOM 解析器，但失败了。

由于我不拥有或控制我需要连接的服务器，我无法自己修复 html。我假设的问题是因为它的格式不正确。

这是我尝试使用上述函数解析的网站代码：http: [//pastebin.com/KvMN9AuF](http://pastebin.com/KvMN9AuF)

W3 验证器给出：193 个错误，16 个警告

有人知道如何解决这个问题吗？或者这是我将不得不放弃的东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T06:50:06.133

尝试[html5lib](https://github.com/dart-lang/html5lib)。它是纯 Dart 中符合规范的 html5 解析器。您应该能够读取格式错误的 html，然后使用 document.outerHtml 获取格式正确的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:35:34.520

如果我站在你的立场上，我会采取以下方法之一：

*   如果您碰巧在您的服务器上使用 Python，那么您可以使用 lxml 和 Beautiful Soup 解析器来解析 HTML 并从中获取您想要的任何信息。

*   从 HTML 中找出您想要的内容并使用正则表达式。确保打开多行模式，以便您可以针对整个文档而不是一次一行运行正则表达式。是的，这很脆弱，但脆弱程度取决于你想要什么数据以及你使用什么样的正则表达式来获取它。

*   将 Beautiful Soup 移植到 Dart 并立即成为 Dart 界的名人；）

# php - php如何使用getimagesize()来检查上传的图片类型

> ID：12761445
> 
> 赞同：4
> 
> 时间：2012-10-06T16:16:47.860
> 
> 标签：php, image, upload, filter, mime-types

> **可能重复：**
> [GetImageSize() 在应该返回 FALSE 时没有返回](https://stackoverflow.com/questions/10464948/getimagesize-not-returning-false-when-it-should)

我目前有一个过滤系统如下：

```
 // Check to see if the type of file uploaded is a valid image type
function is_valid_type($file)
{
    // This is an array that holds all the valid image MIME types
    $valid_types = array("image/jpg", "image/JPG", "image/jpeg", "image/bmp", "image/gif", "image/png");

    if (in_array($file['type'], $valid_types))
        return 1;
    return 0;
} 
```

但是我被告知最好自己检查文件类型，我将如何使用 getimagesize() 以类似的方式检查文件类型？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T16:25:48.737

`getimagesize()`返回一个包含 7 个元素的数组。数组的索引 2 包含`IMAGETYPE_XXX`指示图像类型的常量之一。

使用 getimagesize() 提供的函数的等价物是

```
function is_valid_type($file)
{
    $size = getimagesize($file);
    if(!$size) {
        return 0;
    }

    $valid_types = array(IMAGETYPE_GIF, IMAGETYPE_JPEG, IMAGETYPE_PNG, IMAGETYPE_BMP);

    if(in_array($size[2],  $valid_types)) {
        return 1;
    } else {
        return 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:20:00.347

您可以使用如下

```
$img_info   = getimagesize($_FILES['image']['tmp_name']);
$mime   = $img_info['mime']; // mime-type as string for ex. "image/jpeg" etc. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T16:20:42.400

首先检查是否`getimagesize`返回`false`。如果是这样，则该文件不是可识别的图像格式（或根本不是图像）。

否则，获取返回数组的索引 2 并运行它`image_type_to_mime_type`。这将返回一个字符串，如“image/gif”等。有关更多信息，请参阅[文档](http://php.net/image-type-to-mime-type)。

# java - Android打开不同apk的代码的应用程序路径是什么？

> ID：12761449
> 
> 赞同：1
> 
> 时间：2012-10-06T16:18:08.940
> 
> 标签：java, android, android-intent

我想从我的应用程序中打开另一个已安装的应用程序，例如 Pandora。

这是代码：

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("Pandora");
    startActivity(LaunchIntent); 
```

以上使我的代码崩溃，有人可以提供代码更正吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:34:27.197

您只是在激发意图并向操作系统说您希望某些应用程序打开并显示位于路径的文件。Android 会为您选择合适的应用程序（或要求用户选择可用的应用程序之一）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:36:39.410

我相信您正在尝试打开 PDF 查看器。你需要的不是任何apk的路径，而是你要打开的PDF文件的路径。Android 系统会自动确定为 Intent 中指定的参数调用哪个应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T16:45:53.977

我认为您想要做的是通过其数据包名称调用应用程序（您需要弄清楚，但这应该很容易）

```
PackageManager pm = getPackageManager();
try {
String packageName = "com.example.package";
Intent launchIntent = pm.getLaunchIntentForPackage(packageName);
startActivity(launchIntent);
}
catch (Exception e1){} 
```

如果已安装，那应该会打开另一个应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T16:54:41.843

```
File yourApk= new File("/sdcard/.../pandora.apk");
Intent i = new Intent();
i.setAction(android.content.Intent.ACTION_VIEW);
i.setDataAndType(Uri.fromFile(yourApk), "application/vnd.android.package-archive");
startActivity(i); 
```

权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.INSTALL_PACKAGES"/>
<uses-permission android:name="android.permission.RESTART_PACKAGES"/> 
```

# c# - 使用 sqlite 和 winrt 编译错误

> ID：12761450
> 
> 赞同：4
> 
> 时间：2012-10-06T16:18:22.063
> 
> 标签：c#, sqlite, windows-runtime

我刚刚打开了 SDK 地理定位示例的 csharp 版本，我想做一个简单的更改：我希望后台任务将坐标保存在 sqlite db 中。

为此，我添加了`Microsoft Visual C++ Runtime Package, the SQLite for Windows Runtime, the sqlite-net library via codeplex, and switched the target Platform from any cpu to x64`.

尝试编译，我收到此错误

```
Windows Runtime type 'Windows.Foundation.Point' was found in multiple 
referenced winmd files. Please remove either 'C:\Program Files (x86)\
Microsoft SDKs\Windows\v8.0\ExtensionSDKs\Microsoft.VCLibs\11.0\References
\CommonConfiguration\neutral\platform.winmd' or 'C:\Program Files (x86)\
Windows Kits\8.0\References\CommonConfiguration\Neutral\Windows.winmd' 
from the list of referenced files. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T00:37:05.840

我听说如果您将所有 SQLite 代码移动到 Windows 商店类库并从后台任务中引用它就可以解决问题。

我的解决方法只是删除/重命名 'C:\Program Files (x86)\Windows Kits\8.0\References\CommonConfiguration\Neutral\Windows.winmd' 它只有 18kb，所以我认为它不太可能需要任何东西

# python - python语法特性

> ID：12761452
> 
> 赞同：0
> 
> 时间：2012-10-06T16:18:39.667
> 
> 标签：python

是否可以做这样的事情：

```
def f():
  d={}
  d[1]='qwe'
  d[2]='rty'
  return d

a,b=f()[1:2] 
```

不是`a,b=f()[1],f()[2]` 和不是

```
t=f()
a,b=t[1],t[2] 
```

我不会避免额外的行并且只调用一次函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:28:39.297

我不清楚你*到底*想做什么。您正在按整数索引字典。整数可以用作字典的键就好了，但看起来列表在你的情况下更有意义。字典和列表之间的一个重要区别是字典没有排序。`d[1]`并且`d[2]`在您的示例中不一定位于第一和第二位。因此，如果您依赖于订单，那么标准字典无论如何都不会工作（一个[`OrderedDict`](http://docs.python.org/library/collections.html#collections.OrderedDict)会）。

*（您的数据结构由函数返回的事实`f()`在这里没有任何区别，因此为了更好的可读性，我将忽略它）*

如果你有

```
lst = ['qwe', 'rty'] 
```

你可以简单地做

```
a, b = lst 
```

分配`lst[0]`给`a`和。`lst[1]`_ `b`列表也可以切片：

```
long_lst = range(1000)
a, b = long_lst[500:502] 
```

如果你确实*想*使用字典，你可以像这样访问它的组件：

```
>>> d = {'a': 'AAA', 'b': 'BBB'}
>>> d.keys()
['a', 'b']
>>> d.values()
['AAA', 'BBB']
>>> d.items()
[('a', 'AAA'), ('b', 'BBB')] 
```

但是如上所述，即使在这个例子中它们的顺序是正确的，你*也不能*依赖字典的顺序，它会随着时间的推移而改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:22:57.163

不; 字典索引不支持切片，因为它通常在字典键中没有任何意义。

不过，您可以自己滚动它，例如

```
a, b = map(f().get, [1, 2]) 
```

或（感谢@DSM）

```
a, b = operator.itemgetter(1, 2)(f()) 
```

这些略有不同，如果结果`f()`是缺失`1`或`2`作为键，第一个将默认为 assigning `None`，第二个将 raise `KeyError`。`map(f().__getitem__, ...)`应该等价于`itemgetter`，但可能会稍微慢一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T16:25:24.220

是的，只需使用方法`dict.values()`：

```
x,y = f().values()[0:2] 
```

# wpf - 当 Process.Start("cmd", "/k ..."); 在 WPF 中准备好了吗？

> ID：12761458
> 
> 赞同：0
> 
> 时间：2012-10-06T16:19:07.337
> 
> 标签：wpf, windows

我正在开发一个 WPF 应用程序，它使用

```
Process.Start("cmd", "/k ..."); 
```

或者

```
Process.Start("cmd", "/c ..."); 
```

执行一些命令抛出命令行。执行命令行命令并且cmd再次“免费”时是否可以获得通知？

这是因为我需要执行更多命令，但我需要一个接一个地执行每个命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:25:00.663

我不确定你`cmd`在这里需要什么。如果您想一个接一个地运行命令，那么直接一个接一个地执行它们。你也可以给`Process.Start`程序执行和批处理文件。如果你需要一个内置的 shell，`dir`那么你当然可以使用`cmd /c`，但`cmd /k`在后台运行对我来说似乎相当不必要。

在任何情况下，`Process.Start`返回一个`Process`具有方便方法的对象`WaitForExit`。因此，如果您不启动无限期运行的程序，`cmd /k`那么您可以使用它来确定命令何时完成。

# delphi - 如何从 TActionManager 获取所有 TAction？

> ID：12761459
> 
> 赞同：3
> 
> 时间：2012-10-06T16:19:20.487
> 
> 标签：delphi, delphi-xe, taction, tactionmanager

我的应用程序中有一个`TActionManager`，其中定义了所有操作。我需要获取其所有操作的列表；目前，使用它的 Actions 属性，我可以获得动作 ( `GetNamePath`) 的“路径”，但我也想获得它的标题。

是否可以从动作管理器获取所有动作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T16:30:54.027

该`Actions[]`属性返回一个`TContainedAction`低级基类。您需要将其向上转换为适当的派生类。例如，如果您的操作管理器包含`TAction`实例，那么您可以这样做：

```
for i := 0 to ActionManager1.ActionCount-1 do begin
  Writeln((ActionManager1.Actions[i] as TAction).Caption);
end; 
```

如果您从 派生自定义操作`TCustomAction`，则在您的演员表中使用它。

显然，您可能希望用于`is`检查操作的实际运行时类型并避免运行时转换错误。

# mysql - CONCATATENATED INSERT 不会接受 WHERE 子句

> ID：12761460
> 
> 赞同：1
> 
> 时间：2012-10-06T16:19:34.010
> 
> 标签：mysql, sql, stored-procedures, insert

这让我很困惑。我有一个看起来像这样的 MySQL 存储过程。

```
 DELIMITER $$

CREATE PROCEDURE `lms`.`leads_to_bak` ()
BEGIN
SET @table1 = (SELECT `tabler_name` FROM `sets` WHERE `on_off`=0 LIMIT 1);
SET @table2 = CONCAT(@table1, '_bak');
SET @SQL1 = CONCAT('INSERT INTO ',@table2, '(', (SELECT REPLACE(GROUP_CONCAT(COLUMN_NAME), 'lead_id,', '') FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = @table2), ')', ' SELECT ', (SELECT REPLACE(GROUP_CONCAT(COLUMN_NAME), 'lead_id,', '') FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = @table1), ' FROM ', @table1);
PREPARE stmt FROM @sql1;
EXECUTE stmt;
END$$

DELIMITER ; 
```

**现在重要的部分是：**

```
SET @SQL1 = CONCAT('INSERT INTO ',@table2, '(', (SELECT REPLACE(GROUP_CONCAT(COLUMN_NAME), 'lead_id,', '') FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = @table2), ')', ' SELECT ', (SELECT REPLACE(GROUP_CONCAT(COLUMN_NAME), 'lead_id,', '') FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = @table1), ' FROM ', @table1); 
```

现在从它的外观来看，该语句可以翻译为

`INSERT INTO @table2 (col1, col2, col3, ...)[minus lead_id] SELECT (col1, col2, col3, ...)[minus lead_id] FROM @table1`

很简单吧？好吧，我试图在该语句`WHERE`的末尾附加一个子句，`INSERT`使其看起来像这样：

`INSERT INTO @table2 (col1, col2, col3, ...) SELECT (col1, col2, col3, ...) FROM @table1 WHERE set_id = (SELECT set_id FROM sets WHERE on_off = 0);`

**但没有骰子。错误多多。哎呀，我什至尝试过：**

`INSERT INTO (col1, col2, col3, ...) SELECT (col1, col2, col3, ...) FROM @table1 WHERE set_id = 1;`

**字符串输出为：**

`INSERT INTO leads_auto_bak(set_id,new_old,upload_date,agent,vendors,callcenter,generation_date,first_name,last_name,email,phone,address,city,state,zip,dob,gender,marital_status,rented,year,make,model,trim,vin,primary_use,miles_oneway,mileage,license_num,license_state,education,job_title,license_status) SELECT set_id,new_old,upload_date,agent,vendors,callcenter,generation_date,first_name,last_name,email,phone,address,city,state,zip,dob,gender,marital_status,rented,year,make,model,trim,vin,primary_use,miles_oneway,mileage,license_num,license_state,education,job_title,license_status FROM leads_auto`

但还是一无所获。我在最后用不同的方式玩了`CONCAT`这条线，但它不会让步。有人给点建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:21:20.407

您缺少要插入的表名：

```
INSERT INTO MYTABLE (col1, col2, col3) 
SELECT col1, col2, col3
FROM @table1 
WHERE ... 
```

`SELECT`另外，请注意子句中的列周围不应有括号。

# azure - IF-Match 是否可以用于有条件地更新属性，而不是 ETAG？

> ID：12761462
> 
> 赞同：0
> 
> 时间：2012-10-06T16:19:42.017
> 
> 标签：azure, azure-storage, azure-table-storage, etag

在 Azure 表中，我可以在合并时使用 IF-Match 标记有条件地更新 ETAG 以外的值吗？

具体来说，假设我有一个像这样的对象

```
public class Person : TableServiceEntity
{
public string Name {get;set;}
public string Age {get;set}

public DateTime LockDate {get;set;}

} 
```

假设我想根据“锁定日期”值的存在或比较有条件地合并或更新对象。这在 Azure 中可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:09:28.690

不。

（在此处添加更多字符以通过 Stack Overflow 的最低字符要求。）

# curl - 如何使用 curl 提出正确的请求

> ID：12761468
> 
> 赞同：1
> 
> 时间：2012-10-06T16:20:04.777
> 
> 标签：curl, url-encoding, busybox

问题如下：我有一个较短版本的 bash。我的shell环境是一个busybox。还有一个网站`api.kinobaza.ru`我用以下 bash 代码引用他：

```
url="api.kinobaza.tv/films/lookup/?"
film="names[1]=Терминатор"
curl -s $url --data-urlencode $film 
```

来自服务器的响应只有空括号`[]` 但是当我在浏览器中写一个引用`api.kinobaza.tv/films/lookup/?names[1]=Терминатор`时返回需要的多行响应，比如需要。

如何使用 curl 在 bash 中获得与浏览器中相同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:27:10.177

问题很可能是您也对方括号进行了编码，从而更改了 url 的查询部分。

# node.js - 具有完整 Sizzle 支持的 JSDom 替代方案？

> ID：12761475
> 
> 赞同：2
> 
> 时间：2012-10-06T16:20:45.707
> 
> 标签：node.js, cloud-foundry, sizzle, jsdom, appfog

对于一些范围，我有一个在 cloudfoundry 上运行的抓取应用程序。[由于这里](https://stackoverflow.com/questions/12083190/jsdom-scraping-on-cloudfoundry-doesnt-work)讨论的 Contextify 问题，我无法使用 jsdom 来执行此操作。

为了解决这个问题，我开始用 Cheerio 替换 jsdom [，](https://github.com/MatthewMueller/cheerio)但是我现在意识到它并不完全支持我需要用来处理抓取的数据的 Sizzle 选择器。

经过一番研究，我开始认为我已经碰壁了——还有其他方法可以解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:01:53.957

对此延迟表示抱歉。您现在可以在 Cloudfoundry 上成功安装 JSDOM，但是，似乎某些功能不可用。无法创建浏览器窗口，例如使用 jQuery。但是，您可以创建一个 jsdom 文档。

给定以下示例；

```
 var http = require('http');
  var util = require('util');
  var jsdom = require("jsdom");

  http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/plain'});

    res.write("JSDom object;");
    createDocAndQuery(res);

    res.write("\nNumber of node.js releases = ");
    getLinkCount(res);

  }).listen(3000);

  function createDocAndQuery(response) {
    var doc = jsdom.jsdom("<html><body></body></html>", jsdom.level(1, "core"));
    response.write(util.inspect(doc));
  }

  function getLinkCount(response) {
    jsdom.env(
      "http://nodejs.org/dist/",
      ["http://code.jquery.com/jquery.js"],
      function (errors, window) {
        response.end ("" + window.$("a").length)
      }
    );
  } 
```

第一部分在 CloudFoundry.com 上工作，但是第二部分在创建窗口对象时失败。

# php - ActiveRecord & PHP：定义两个模型之间不同关联的最佳方式

> ID：12761476
> 
> 赞同：1
> 
> 时间：2012-10-06T16:20:59.443
> 
> 标签：php, mysql, sql, activerecord, orm

我有模型 Page 和 Commit。页面有很多提交。但有时我只需要获取页面的最后一次提交，有时需要获取页面提交的历史记录（最后 20 次或全部）。

我为模型编写了这段代码：

```
class Page extends ActiveRecord\Model {
    static $has_many = array(
        array('commits',
            'select'=> 'content',
            'order' => 'id DESC',
            'limit' => 1
        ));
}
class Commit extends ActiveRecord\Model {
    static $belongs_to = array(
        array('page'));
} 
```

那么我需要做些什么才能有机会显示所有提交（例如 ['limit' => 20]）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:27:00.200

这是一种解决方法，但这应该可以做到……有点模拟 Rails 的作用域：

```
class Page extends ActiveRecord\Model {
    static $has_many = array(
        array('limited_commits',
            'class_name' => 'Commit',
            'select'=> 'content',
            'order' => 'id DESC',
            'limit' => 1
        ),
        array('all_commits',
            'class_name' => 'Commit',
            'select' => 'content',
            'order' => 'id DESC'
        )
    );
}
class Commit extends ActiveRecord\Model {
    static $belongs_to = array(
        array('page'));
} 
```

然后只需使用您需要的“范围”：

```
Page::first->limited_commits
Page::first->all_commits 
```

这不是一个真正的整体解决方案，但它应该可以解决问题......

# assembly - DCD 指令和 IRQ 堆栈

> ID：12761480
> 
> 赞同：2
> 
> 时间：2012-10-06T16:21:33.920
> 
> 标签：assembly, stack, arm, irq

我正在研究为 ARM 处理器的不同模式（IRQ、主管、用户......）设置堆栈的主题。由于设置不同的堆栈需要相同的指令序列（基本上只有堆栈地址更改），我将求助于设置 IRQ 堆栈的问题来问我的问题。前提是我有以下定义：

```
IRQ_Stack EQU 0x8000
NoInt     EQU 0xC0
IRQ32md   EQU 0x12 
```

以下代码用于设置堆栈（我添加行号以启用注释）：

```
1\. MOV r2, #NoInt|IRQ32md
2\. MSR CPSR_c, r2
3\. LDR r13_irq, =IRQ_NewStack
4\. ...
5\. ...
6\. IRQ_NewStack:
7\. DCD IRQ_Stack 
```

第**1**行只是`r2`为了禁用中断和在第**2**行进入 IRQ 模式而加载，方法是将值加载到`CPSR_c`. 然后，在第**3**行，`LDR`用于将`IRQ_NewStack`标签的（32 位）地址加载到以 IRQ 模式存储的堆栈指针中。

你能解释一下第**7**行指令的目的是什么吗？

我阅读了`DCD`用于*“保留 32 位字”*的 ARM 手册。当我阅读*"reserve a 32 bit word"*时，我认为这就像为单个 32 位变量保留空间，这意味着`DCD`充当`EQU`（可能`EQU`只是`DCD`...的宏）。但是，如果是这种情况，我为什么要为整个堆栈保留一个 32 位字，它可以比一个 32 位字大？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T20:24:13.360

DCD 保留 1 个指向堆栈的 32 位字，它不是堆栈本身。

# java - 泛型通配符实例化

> ID：12761481
> 
> 赞同：7
> 
> 时间：2012-10-06T16:21:35.277
> 
> 标签：java, generics, wildcard, declaration, instantiation

前几天我正在审查别人的代码，我遇到了引起一些担忧的一行。为了简化，假设我有一个通用类 A 和一个抽象类 B。是否允许以下​​实例化，如果允许，为什么？

```
Object obj = new A<? extends B>(); 
```

我个人从未见过像上面这样的实例化，尽管有这样的声明

```
A<? extends B> obj = null; 
```

肯定会举行。我一直在泛型中使用通配符来声明方法参数，所以我可能没有经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T16:50:11.003

实际上`new A<? extends B>()`不会编译。自 Java 5 以来，它一直是非法的。

但我猜你原来的例子是这样的`new A<X<? extends B>>()`。后者在 Java 的最新版本中是合法的。

这个想法是，当实例化一个对象时，类型参数的值可以是任何非通配符类型。`? extends B`是通配符类型，所以它是不允许的。but`X<? extends B>`不是通配符类型，尽管它*具有*通配符类型作为组件。所以你可以说合法地打电话`new A<X<? extends B>>()`。

如果你这样想，这些规则是有道理的。`? extends B`最终，通配符类型不能是字段或变量的*声明*类型，这是更基本规则的副产品。如果`A`定义为

```
class A<T> {
    T value;
} 
```

那么假设`new A<? extends B>().value`将是一个*声明为 type* `? extends B`的字段。既然这是非法的，那么实例化也是如此。但是`new A<X<? extends B>>()`没有那个问题。

# objective-c - 在Objective C的TextView中查找特定文本的实例数

> ID：12761482
> 
> 赞同：0
> 
> 时间：2012-10-06T16:21:39.210
> 
> 标签：objective-c, macos, cocoa

我开始学习如何使用 Objective C 编写一个 mac 应用程序。现在我有一个 TextView 填充了文本。有什么方法可以获取该文本视图中出现的特定单词的实例数。

我已经阅读了`NSTextFinder`Class 但我无法将我的 TextView 设置为客户端，`NSTextFinder`并且没有示例代码可以帮助我。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:41:00.943

我假设您需要做的就是提供一个标准的 Cocoa 查找栏功能，`NSTextView`在这种情况下，它只是`self.textView.usesFindBar = YES`针对有`NSTextView`问题的。当用户按下`COMMAND`+`F`

也许您正在寻找不使用查找 UI 的解决方案 - 但您不会使用`NSTextFinder`其功能作为查找 UI 的控制器类...如果您正在寻找非 UI-基于搜索和计数机制然后编辑您的问题，我们可以尝试回应。

编辑：

如果您只想计算`NSTextView`'s 中某个单词的出现次数，那么`NSScanner`这是一个解决方案。请参阅`NSScanner`作为单词计数器的示例：

```
#import <Foundation/Foundation.h>

int main(int argc, char *argv[]) {
    NSAutoreleasePool *p = [[NSAutoreleasePool alloc] init];

    NSString *sampleString = @"The dog ate my homework. Later, \
         the dog ate my lunch.  Sometimes, dogs do that.";
    NSScanner *scanner = [NSScanner scannerWithString:sampleString];
    NSString *aDog = nil;
    NSInteger wordCount = 0;
    while( ![scanner isAtEnd] ) {
        if( [scanner scanUpToString:@"dog" intoString:&aDog] ) {
            if( [scanner scanString:@"dog" intoString:&aDog] ) {
                wordCount++;
            }
        }
    }
    printf("There are %ld dog words in the text.\n",wordCount);
    [p release];
} 
```

这打印出来：

> 文中有3个狗字。

# asp.net - IIS 服务器停止并给出有关 kerbauth.dll 的错误，如何解决？

> ID：12761485
> 
> 赞同：0
> 
> 时间：2012-10-06T16:22:04.753
> 
> 标签：asp.net, sqlite, iis

我在win7的本地iis上尝试我发布的asp.net项目文件，它工作正常，但我在web服务器上给出了一个错误：

“我也使用 sqlite 3”

![在此处输入图像描述](../Images/a2b3909ff4158452afff3532571720c7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:24:12.673

您可能会在这里找到问题的答案：http: [//blogs.msdn.com/b/rakkimk/archive/2007/11/03/iis7-running-32-bit-and-64-bit-asp-net-不同的worker-processes.aspx在同一时间的版本](http://blogs.msdn.com/b/rakkimk/archive/2007/11/03/iis7-running-32-bit-and-64-bit-asp-net-versions-at-the-same-time-on-different-worker-processes.aspx)

显然，您的 IIS 上运行了一个 32 位 Web 应用程序，该应用程序未配置为运行 32 位 Web 应用程序。

# dotnetnuke - dotnetnuke 中的 Razor 主机安装错误

> ID：12761486
> 
> 赞同：2
> 
> 时间：2012-10-06T16:22:07.757
> 
> 标签：dotnetnuke

我成功地将我的 IIS 升级到 .NET v4.0，但是在安装 Razor Host 时，它显示如下错误

*错误：当前不可用。DotNetNuke.Services.Exceptions.ModuleLoadException：对路径“C:\inetpub\wwwroot\dotnetnuke\Install\Temp\ajynte0h”的访问被拒绝。---> System.UnauthorizedAccessException：对路径“C:\inetpub\wwwroot\dotnetnuke\Install\Temp\ajynte0h”的访问被拒绝。在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) 在 System.IO.Directory.InternalCreateDirectory(String fullPath, String path, Object dirSecurityObj) 在 System.IO.DirectoryInfo.Create() 在 DotNetNuke.Services.Installer。在 DotNetNuke.Services.Installer.InstallerInfo.ReadZipStream(Stream inputStream, Boolean isEmbeddedZip) 在 DotNetNuke.Services.Installer 在 DotNetNuke.Services.Installer.InstallFile.ReadZip(ZipInputStream unzip, ZipEntry entry) .InstallerInfo..

帮我解决这个错误？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:08:21.233

你是如何升级到 4.0 的？您是否更改了应用程序池？还是您更改了应用程序池的框架并保持身份不变？如果是第一个：您是否检查过您的应用程序身份对应用程序具有足够的权限？

如果是第二种：尝试重新安装剃须刀模块。

# php - PHP用户登录和自己的个人资料页面脚本

> ID：12761487
> 
> 赞同：-3
> 
> 时间：2012-10-06T16:22:14.527
> 
> 标签：php

我正在寻找一个脚本或一种快速的方法来组合一个用户可以在其中执行以下操作的站点：

**1.注册 2.登录 3.拥有自己的用户仪表板...即：姓名，姓氏等...**

在这一点上，安全性并不重要，只是一种快速的组合方式。

注册后，所有用户需要做的就是登录并能够编辑/添加/删除一些简单的细节。

有谁知道一个简单的脚本可以快速完成这项工作......免费或付费......不过必须很简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T22:21:11.950

为什么不自己编写一个代码？PHPacademy 有 2 个不错的教程：

[http://www.youtube.com/playlist?list=PLE134D877783367C7](http://www.youtube.com/playlist?list=PLE134D877783367C7)（不错，安全）

另一个教程（非常不安全，非常丑陋，只能*登录*（可以构建））在这里： [http](http://www.youtube.com/watch?v=4oSCuEtxRK8) ://www.youtube.com/watch?v=4oSCuEtxRK8 （第 1 部分） [http://www.youtube.com/观看？v=y7ae_cZahPs](http://www.youtube.com/watch?v=y7ae_cZahPs)（第 2 部分）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:24:56.603

使用任何可用的 CMS 应用程序：drupal、wordpress 等。

他们工作，提供无限的可能性，而且他们是自由的（就像在演讲中一样）。

ownCloud 也可能值得考虑。当没有应用程序被激活时，它只提供一个帐户。

# python - python变量的ruby风格条件设置

> ID：12761488
> 
> 赞同：1
> 
> 时间：2012-10-06T16:22:15.447
> 
> 标签：python, python-2.7

在 Ruby 中，如果你想有条件地设置变量的值，你可以这样做：

```
foo = myhash[ "bar" ] || myhash[ "baz" ] 
```

如果 foo 存在，它会将其值设置为 myhash[ "bar" ]，否则会将 foo 设置为 myhash["baz" ]。如果两者都不存在，它会将 foo 设置为 nil。

在 Python 中，如果你尝试这种类型的赋值，你会得到一个语法错误。此外，Python 将在 myhash["baz"] 上抛出 KeyError，而不是将其设置为 None。在我看来，在 Python 中有条件地设置 foo 的唯一方法是编写一个大的多行条件语句，但我真的很想像 Ruby 那样在一行中执行此操作。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:24:35.150

您会收到语法错误，因为 python[或运算符](http://docs.python.org/reference/expressions.html#boolean-operations)的语法不同，您需要使用以下[方法](http://docs.python.org/library/stdtypes.html#dict.get)`None`明确要求 Python从字典查找中返回：[`.get()`](http://docs.python.org/library/stdtypes.html#dict.get)

```
foo = myhash.get('bar') or myhash.get('baz') 
```

因为`.get()`返回一个默认值而不是寻找的键（默认为`None`，您也可以将其拼写为：

```
foo = myhash.get('bar', myhash.get('baz')) 
```

这有一个额外的好处，如果`myhash['bar']`是 false-y（在布尔上下文中评估为 False，例如空序列或数字 0），它仍然会返回`myhash['bar']`而不是`myhash['baz']`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:24:49.177

```
foo = myhash.get('bar', myhash['baz']) 
```

如果“baz”键不存在，这确实会引发错误，但无论如何我都会认为这是一个错误，并且不希望语言将其静音。如果第二项也是可选的并且您希望`None`作为最终后备，您也可以`.get`用于第二次查找。

# django - 在models.py出错后必须手动重启runserver

> ID：12761490
> 
> 赞同：3
> 
> 时间：2012-10-06T16:22:45.820
> 
> 标签：django

我正在关注《The Definitive Guide to Django》一书，我开始注意到的一件事是，每当我在模型文件中出现一个错误时，服务器就会挂起，并且在修复错误后不会自动重新启动。

这是一个例子：我用这样的一行保存文件

```
email = models.EmailField(blank=Tru) 
```

这引发了明显的错误和堆栈跟踪

```
Validating models...

Unhandled exception in thread started by <bound method Command.inner_run of <django.core.management.commands.runserver.Command object at 0x00000000025B0400>>
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\django\core\management\commands\runserver.py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "C:\Python27\lib\site-packages\django\core\management\validation.py", line 30, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "C:\Python27\lib\site-packages\django\db\models\loading.py", line 158, in get_app_errors
    self._populate()
  File "C:\Python27\lib\site-packages\django\db\models\loading.py", line 64, in _populate
    self.load_app(app_name, True)
  File "C:\Python27\lib\site-packages\django\db\models\loading.py", line 88, in load_app
    models = import_module('.models', app_name)
  File "C:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in import_module
    __import__(name)
  File "C:\....\models.py", line 17, in <module>
    class Author(models.Model):
  File "C:\...\models.py", line 20, in Author
    email = models.EmailField(blank=Tru)
NameError: name 'Tru' is not defined 
```

现在，如果我更改`Tru`为`True`，服务器不会重新启动。这是故意的吗？还是我的申请有问题？我刚刚开始学习 Django，所以我不知道这是否是常见行为。

我在 Windows 上，运行 Python 2.7.3 和 Django 1.4.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:55:50.837

不只是你——我有时也会遇到这种情况。

虽然开发服务器通常在代码更改后重新启动非常好，但一些特别严重的错误（尤其是在您的`models.py`. 只需要终止它（`Ctrl+C`），重新启动它，然后继续你快乐的方式。

# php - php 表单 - 主题和消息未显示 + 电子邮件未正确验证

> ID：12761492
> 
> 赞同：0
> 
> 时间：2012-10-06T16:22:52.810
> 
> 标签：php, forms

我正在编写一个 php 表单，并且想要一个非常轻便和简短的代码。验证码工作正常，验证也是如此。我有两个问题：测试时，我收到的电子邮件 1）显示人名作为电子邮件的主题 2）在消息字段中写的文本没有发送

请指教。

这是php：

```
<?php
session_start();

if(isset($_POST['submit'])) {
$email = $_REQUEST['email'] ; 
$name = $_REQUEST['name'] ; 
$telephone = $_REQUEST['telephone'] ;
if(!empty($_POST['name']) && !empty($_POST['email']) && !empty($_POST['telephone'])    &&!empty($_POST['message']) && !empty($_POST['code'])) { 
if($_POST['code'] == $_SESSION['rand_code']) {
if
(filter_var($email, FILTER_VALIDATE_EMAIL)) {
                                                   mail("youremail@something.something", $name, $telephone, "From:" . $email);
                                               $accept = "Thank you for contacting me.";
}
                                               else if (strpos($email, '@') !== false) {
                                               $error = "Please verify your email";
}   
else {
$error = "Please verify your email";
}                
} 
else {
$error = "Please verify that you typed in the correct code.";
}
} 
else {
$error = "Fields with * are required";
}               
}
?> 
```

这里的HTML：

```
<body>
<?php if(!empty($error)) echo '<div class="error">'.$error.'</div>'; ?>
<?php if(!empty($accept)) echo '<div class="accept">'.$accept.'</div>'; ?>
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post"   enctype="multipart/form-data">
<p><input type="text" name="name" /> Name *</p>
<p><input type="text" name="email" /> Email *</p>
<p><input type="text" name="telephone" /> Contact Number *</p>
<p><textarea name="message"></textarea>Message</p>
<img src="captcha.php"/>
<p><input type="text" name="code" /> Are you human?</p>
<p><input type="submit" name="submit" value="Send" class="button" /></p>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:28:06.067

问题在于邮件功能。您传递的是姓名而不是主题和电话号码而不是消息。这是正确的格式。

邮件（字符串 $to ，字符串 $subject ，字符串 $message [，字符串 $additional_headers [，字符串 $additional_parameters ]]）

# c - C中的小数位数

> ID：12761493
> 
> 赞同：10
> 
> 时间：2012-10-06T16:22:54.433
> 
> 标签：c, floating-point

每当我在 C 中使用浮点数时，我都喜欢更改显示的小数位数。它与中`FLT_DIG`定义的值有关`float.h`吗？如果是这样，我如何将其从 6 更改为 10？

我得到一个数字，就像`0.000000`实际值为`0.0000003455`.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-06T16:30:42.687

这里有两个单独的问题：存储的浮点数的精度，由使用`float`vs确定`double`，然后打印的数字的精度如下：

```
float foo = 0.0123456789;
printf("%.4f\n", foo);  // This will print 0.0123 (4 digits).

double bar = 0.012345678912345;
printf("%.10lf\n", bar);  // This will print 0.0123456789 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-27T16:29:21.903

我试验了这个问题，我发现你不能用浮点数获得很高的精度，它们真的很糟糕。但如果你使用双精度，它会给你正确的答案。只需提及 %.10lf 即可获得小数点后 10 位的精度

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-06T16:25:11.663

你的精度不够了。浮点数没有很高的精度，如果你想要更多的小数位，请使用`double`数据类型。

另外，您似乎正在使用`printf()`＆co。显示数字 - 如果您决定使用`double`s 而不是`float`s，请不要忘记将格式说明符从`%f`to更改`%lf`- 这是双精度数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-06T19:00:54.633

@kosmoplan - 谢谢你的好问题！

@epsalon - 感谢您的良好回应。我的第一个想法也是“浮动”与“双重”。我误解了。当你意识到它实际上是一个“printf/format”问题时，你一头雾水。做得好！

最后，为了平息一些挥之不去的外围争议：

```
/*
 SAMPLE OUTPUT:
  a=0.000000, x=0.012346, y=0.012346
  a=0.0000003455, x=0.0123456791, y=0.0123456789
 */
#include <stdio.h>

int
main (int argc, char *argv[])
{
  float  x = 0.0123456789, a = 0.0000003455;
  double y = 0.0123456789;
  printf ("a=%f, x=%f, y=%lf\n", a, x, y);
  printf ("a=%.10f, x=%.10f, y=%.10lf\n", a, x, y);
  return 0;
} 
```

# android - 如何备份数据库phonegap / cordova？

> ID：12761496
> 
> 赞同：-1
> 
> 时间：2012-10-06T16:23:13.110
> 
> 标签：android, cordova, backup

我想知道是否有人可以解释我如何从我的应用程序备份数据库。我使用 Phonegap 构建了这个应用程序。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-01T16:35:32.807

已经解决了。我为它构建了自己的插件。

# wpf - 鼠标悬停时如何防止 WPF 按钮模板更改所有按钮？

> ID：12761497
> 
> 赞同：0
> 
> 时间：2012-10-06T16:23:17.103
> 
> 标签：wpf, xaml, templates, button

我正在使用 WPF 模板的自定义模板。但是，在大多数情况下，当我将鼠标悬停在按钮上时，它会更改同一屏幕上所有按钮的文本颜色，这是无意的。

```
<Style  TargetType="{x:Type Button}">
    <Setter Property="SnapsToDevicePixels" Value="True" />
    <Setter Property="OverridesDefaultStyle"
      Value="true" />
    <Setter Property="FocusVisualStyle"
      Value="{DynamicResource ButtonFocusVisual}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border TextBlock.Foreground="{DynamicResource AlternateFontColor}"
                        TextBlock.FontFamily="Segoe UI"
                        TextBlock.FontWeight="Bold"                            
                        x:Name="Border"
                        CornerRadius="0"
                        BorderThickness="2" >
                    <Border.BorderBrush>
                        <SolidColorBrush Color="{DynamicResource ControlMouseOverColor}" />
                    </Border.BorderBrush>
                    <Border.Background>
                        <SolidColorBrush Color="{DynamicResource ColorBackgroundColor}" />
                    </Border.Background>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualStateGroup.Transitions>
                                <VisualTransition GeneratedDuration="0:0:0.0" />
                                <VisualTransition GeneratedDuration="0"
                              To="Pressed" />
                            </VisualStateGroup.Transitions>
                            <VisualState x:Name="Normal" />
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).
                  (SolidColorBrush.Color)"
                                            Storyboard.TargetName="Border">
                                        <EasingColorKeyFrame KeyTime="0"
                                     Value="{StaticResource ControlMouseOverColor}" />
                                    </ColorAnimationUsingKeyFrames>
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                                 Storyboard.TargetName="Border">
                                        <EasingColorKeyFrame KeyTime="0" Value="{StaticResource ControlBorderMouseOverColor}" />
                                    </ColorAnimationUsingKeyFrames>
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="Border">
                                        <EasingColorKeyFrame KeyTime="0" Value="White" />
                                    </ColorAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).
                  (SolidColorBrush.Color)"
                                            Storyboard.TargetName="Border">
                                        <EasingColorKeyFrame KeyTime="0"
                                     Value="{StaticResource ControlPressedColor}" />
                                    </ColorAnimationUsingKeyFrames>
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                                 Storyboard.TargetName="Border">
                                        <EasingColorKeyFrame KeyTime="0" Value="{StaticResource ControlBorderMouseOverColor}" />
                                    </ColorAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <ContentPresenter Margin="2"
                                      HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                                      VerticalAlignment="Center"
                                      RecognizesAccessKey="True"
                                      TextBlock.TextAlignment="Center"

                                      >                                        

                    </ContentPresenter>

                </Border>
                <!-- Triggers -->
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:03:16.153

将样式声明更新为

```
 <Style  x:Key="buttonStyle"  TargetType="{x:Type Button}"> 
```

并将样式分配给按钮，如果它们必须被设置为

```
 <Button Style="{DynamicResource buttonStyle}">H2</Button> 
```

声明 x:Key 后其他按钮不会继承样式

# php - 如何将“添加”和“编辑”表单合并为 1 个“脚本”？

> ID：12761498
> 
> 赞同：3
> 
> 时间：2012-10-06T16:23:24.857
> 
> 标签：php, sql

我总是发现自己创建了两个单独的 php 文件/脚本来添加某些数据和编辑这些数据。这些文件并没有太大的不同，所以我认为应该有一种方法可以将它们制作成一个文件。

在这里，我将举一个**非常简单的例子**来说明我的观点：

`add.php`：

```
<?php

$title = $_POST['title']; // ignore the unescaped data, this is a simple example
$text = $_POST['text'];
mysqli_query($connection,
   "INSERT INTO `articles` (`title`, `text`) VALUES ('$title', '$text')");

echo'
<form>
   <input type="text" name="title" value="'.$_POST['title'].'" />
   <input type="text" name="text" value="'.$_POST['text'].'" />
   <input type="submit" value="Add" />
</form>
';

?> 
```

`edit.php`：

```
<?php

$id = $_GET['id'];
$title = $_POST['title']; // ignore the unescaped data, this is a simple example
$text = $_POST['text'];
// save data
mysqli_query($connection,
   "UPDATE `articles` SET `title` = '$title', `text` = '$text'
    WHERE `id` = $id");

// get current data
$q = mysqli_query($connection,"SELECT * FROM `articles` WHERE `id` = $id");
$d = mysqli_fetch_array($q);
$title = $d['title'];
$text = $d['text'];

echo'
<form>
   <input type="text" name="title" value="'.$title.'" />
   <input type="text" name="text" value="'.$text.'" />
   <input type="submit" value="Add" />
</form>
';

?> 
```

如您所见，添加和编辑表单/代码非常相似，除了：

*   add 插入数据，而 edit 更新它
*   add 将 $_POST 值插入到表单中（如果有错误，使提交的数据保留在表单中，而 edit 将当前数据库值插入到表单中（保存完成并刷新页面后，使表单有当前的数据库值）

这两个是否可以以某种方式合并到一个文件/代码中，这样如果我想添加/更改表单值，我不需要分别编辑两个文件，而只会更改一次表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:42:14.660

您可以使用[INSERT ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)大致给您：

```
<?php
$id = $_GET['id'];
$title = $text = '';

if ($_POST)
{
    $title = $_POST['title'];
    $text = $_POST['text'];
    // save data
    $query = "INSERT INTO `articles` (`id`, `title`, `text`)
              VALUES ('$id', '$title', '$text')
              ON DUPLICATE KEYS UPDATE title = title, text = text"
    mysqli_query($connection, $query);

}
else if ($id)
{
    // get current data
    $q = mysqli_query($connection, "SELECT * FROM `articles` WHERE `id` = $id");
    $d = mysqli_fetch_array($q);
    $title = $d['title'];
    $text = $d['text'];
}

echo '
<form>
   <input type="text" name="title" value="'.$title.'" />
   <input type="text" name="text" value="'.$text.'" />
   <input type="submit" value="Add" />
</form>'; 
```

*   如果它是一个 POST 并且没有 $id 存在：插入一个新行，就像一个 INSERT 一样。
*   如果它是 POST 并且存在 $id：如果 $id 已经存在于表中，则更新该行，否则它是一个 INSERT。
*   如果您只有一个 $id ：显示其中包含现有数据的表单。
*   如果它不是 POST 并且 $id 未填充：显示一个空表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:43:06.593

我倾向于制作一个用于插入和更新数据的接口，它只有一种插入和更新方法。关键是要提交的用户表单必须包含要更新的行的 id。

```
public method save( Object obj )
    if obj.id is in database
        query = "update table set attrA = obj.a, attrB = obj.b where id=obj.id" 
    else if obj.id < 1 
        query = "insert into table  (a,b,c) values (obj.a,obj.b,obj.c)" 
```

这意味着当您创建要提交的新对象时，它的 id 必须初始化为 0 或 -1（1 是具有 int 主键的表的第一个键行）。同样，html 文件中的表单必须具有 <input type=hidden value=row.id name=DBID> 填充默认值（null、0、-1）或正在编辑的对象的有效 id .

从本质上讲，这意味着用户可以更新表中的任意行，但如果他们已经进行了身份验证，这应该不是问题。此外，通常知道 id > 0 到 INSERT 和 UPDATE 否则就足够了。不需要验证正在提交的 id 是否在数据库表中，因为插入时不会设置 id，而是让数据库自动增加主键。

**只喝了 3 杯啤酒，就更新** 了这么多愚蠢的错别字。我希望这是可读的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T16:43:20.117

您可以使用`GET`和`POST`参数的组合来实现您想要的。使用`GET`参数来区分`edit`and `add`，即`/post?action=add`or `/post?action=edit`。根据您的值，`$_GET['action']`您会知道是将空表单呈现给`add`帖子还是使用数据库中的数据填充表单。然后你可以在你的表单中有一个隐藏的字段，你可以填写它的值，`$_GET['action']`这样你就可以知道在提交表单后 是否`INSERT`或何时处理表单。`UPDATE`

*开始使用一些框架*可能是值得的，例如 CakePHP、CodeIgniter、Zend Framework 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T17:05:53.527

这是一个使用 OOP 的想法（在我看来）。

假设您有一些表示表单元素的类，称为`FormElement`.

那么你有一些应该支持什么的通用形式？让我们假设 MVC：

*   展示自己
*   添加元素
*   设置默认值
*   解析请求值
*   获取值
*   验证值

因此，您将为自己构建一个界面，例如

```
interface IForm {
    public function Display();
    public function AddElement( FormElement $element);
    public function SetValues( array);
    public function FetchPostValues();
    public function GetValues();
    public function Validate();
} 
```

那么，这两种形式的共同点是什么（假设您要禁止更改 of `email`）？一切除了`FetchPostValues()`

因此，您将使用一个[纯虚拟方法](https://stackoverflow.com/questions/7600771/are-there-pure-virtual-functions-in-php-like-with-c)构建一个类，该方法将执行类似的所有操作：

```
abstract class FormArticle implements IForm {
    // All methods implemented except FetchPostValues
    abstract public function FetchPostValues();
} 
```

然后只需构建两个小类，它们将定义如何获取发布数据：

```
class FormArticleEdit extends FormArticle {
    public function FetchPostValues(){
        if( isset( $_POST['email'])){
            throw new Exception('What are you trying to achieve?');
        }
        // ...
    }
} 
```

还有一个提示（实际上是两个）：

*   实现这样的抽象类`FormAbstract`将提供所有通用方法，如`AddElement()`, `Display()`。这将节省您每次复制这些通用方法的时间，但仍将为您提供从头开始的能力（当直接使用数据库或直接缓存项目时）。
*   而是使用已经具有重用表单模型的框架（[Zend](http://framework.zend.com/)是**我个人的**最爱）。

# android - 在 Android 4.0.3 上流式传输 m3u8 播放列表

> ID：12761499
> 
> 赞同：1
> 
> 时间：2012-10-06T16:23:38.090
> 
> 标签：android, http

我创建了以下播放列表：

```
#EXTM3U
#EXTINF:3,File - 1
http://pilatus.d1.comp.nus.edu.sg/~a0095695/video_repo/1.mp4
#EXTINF:3,File - 2
http://pilatus.d1.comp.nus.edu.sg/~a0095695/video_repo/2.mp4
#EXTINF:-1,File - 3
http://pilatus.d1.comp.nus.edu.sg/~a0095695/video_repo/3.mp4
#EXT-X-ENDLIST 
```

此外，我正在使用此代码在我的 Android 设备上播放：

```
MediaController mc = new MediaController(this);
VideoView videoview = (VideoView)findViewById(R.id.myvideoview);        
mc.setMediaPlayer(videoview);
videoview.setMediaController(mc);
videoview.setVideoURI(Uri.parse("http://pilatus.d1.comp.nus.edu.sg/~a0095695/video_repo/playlist.m3u8"));
videoview.requestFocus();
videoview.start(); 
```

我想要 Dash 流式传输，因此会在其之上创建另一组 m3u8 文件以适应带宽

问题是我收到“无法播放文件”之类的错误

我究竟做错了什么？...

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T01:33:06.440

那是 HLS 流媒体，Android 4.0 没有这种格式的问题。toyr代码错误，尝试使用：

```
VideoView videoview = (VideoView)findViewById(R.id.myvideoview);        
videoview.setMediaController(new MediaController(this));
videoview.setVideoURI(Uri.parse("http://pilatus.d1.comp.nus.edu.sg/~a0095695/video_repo/playlist.m3u8"));
videoview.requestFocus();
videoview.setOnPreparedListener(new OnPreparedListener() {
        public void onPrepared(MediaPlayer mp) {
            mp.start();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T16:36:55.693

**这是如何在 Android 中播放 .M3U8 流媒体的示例，但就像其他程序员所说，并非所有 Android 设备都完全支持**

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <VideoView
        android:id="@+id/myVideoView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

***主.java***

```
package com.grexample.ooyalalive;

import java.net.URL;
import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.widget.MediaController;
import android.widget.VideoView;

public class Main extends Activity {

    private String urlStream;
    private VideoView myVideoView;
    private URL url;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_vv);//***************
            myVideoView = (VideoView)this.findViewById(R.id.myVideoView);
            MediaController mc = new MediaController(this);
            myVideoView.setMediaController(mc);         
            urlStream = "http://jorgesys.net/i/irina_delivery@117489/master.m3u8";
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    myVideoView.setVideoURI(Uri.parse(urlStream)); 
                }
            });
    }
} 
```

**我看到很多人在播放 .M3U8 时遇到问题，这取决于用于流式传输的编解码器和与设备的兼容性，例如我的一些 .m3u8 文件仅在屏幕为 1200 x800 或更高的设备中受支持。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T16:43:37.243

Android 对 M3U8 播放列表的支持是有限的。只有较新的设备支持播放列表。有些人提到他们在设备 2.3.x 上很幸运。据我所知，这个功能是在 Android 3.0 中提供的。

请参阅[新功能文档](http://developer.android.com/about/versions/android-3.0-highlights.html)

如果您有支持的设备进行测试但仍然遇到问题，请尝试使用**httplive**协议

但是，应该播放 mp4 文件。

# iphone - 除非以编程方式添加为子视图，否则不会显示从 StoryBoard 添加的 UIActivityIndi catorView

> ID：12761501
> 
> 赞同：3
> 
> 时间：2012-10-06T16:23:41.040
> 
> 标签：iphone, objective-c, ios, ipad, uistoryboard

我使用 StoryBoard 添加了 UIActivityIndi​​catorView 并将 IBOutlet 连接到我的视图控制器：

```
@property(nonatomic, retain) IBOutlet UIActivityIndicatorView *activityIndicator; 
```

在界面生成器上，它看起来像这样：

![国际文凭组织](../Images/8c36bfac5a5de2234826c12492bed418.png)

然后我使用这两种方法来启动和停止动画......

```
[self.activityIndicator startAnimating]; 
```

和

```
[self.activityIndicator stopAnimating]; 
```

但是除非我以编程方式将其显式添加为子视图，否则不会显示我的活动指示器：

```
-(void)viewDidLoad {
    [super viewDidLoad];
    [(UIWebView *)[self view] addSubview:self.activityIndicator];
    [(UIWebView *)[self view] loadRequest:[NSURLRequest requestWithURL:self.webURL]];
} 
```

这是预期的行为吗？为什么我需要以编程方式将其添加为子视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:40:34.107

您可以将 UIActivityIndi​​catorView 放在情节提要中的 UIView 上。如果将基本视图从 UIWebview 更改为 UIView，问题就解决了。

```
UIView
|- UIWebview
|- UIActivityIndicatorView 
```

# javascript - 隐藏推送视图上的按钮并在返回列表视图时显示它

> ID：12761503
> 
> 赞同：1
> 
> 时间：2012-10-06T16:23:53.860
> 
> 标签：javascript, sencha-touch, extjs, sencha-touch-2

当我加载我的列表视图时，它有几篇博客文章和左上角的刷新按钮。

如果我点击列表项，则会推送包含该特定帖子内容的视图。当这个视图被推入时，刷新按钮被隐藏。

但是当我点击“返回”到父列表视图时，我希望刷新按钮显示（取消隐藏） - 但它仍然隐藏。

知道如何进行这项工作吗？

这是我的观点：

```
Ext.require(['Ext.data.Store', 'MyApp.model.StreamModel'], function() {
    Ext.define('MyApp.view.HomeView', {
        extend: 'Ext.navigation.View',
        xtype:  'homepanel',

        requires: [
            'Ext.dataview.List',
        ],

        config: {
            title:            'Home',
            iconCls:          'home',
            styleHtmlContent: true,
            navigationBar: {
                items: [
                    {
                        xtype:    'button',
                        iconMask: true,
                        iconCls:  'refresh',
                        align:    'left',
                        action:   'refreshButton',
                        id:       'refreshButtonId'
                    }
                ]
            },
            items: {
                title: 'My',
                xtype: 'list',
                itemTpl: [
                    '<div class="post">',
                        ...
                    '</div>'

                ].join(''),

                store: new Ext.data.Store({
                    model: 'MyApp.model.StreamModel',
                    autoLoad: true,
                    storeId: 'stream'
                }),
            }
        }
    });
}); 
```

和我的控制器：

```
Ext.define('MyApp.controller.SingleController', {
    extend: 'Ext.app.Controller',
    config: {
        refs: {
            stream: 'homepanel'
        },
        control: {
            'homepanel list': {
                itemtap: 'showPost'
            }
        }
    },

    showPost: function(list, index, element, record) {

        this.getStream().push({
            xtype: 'panel',
            html: [
                '<div class="post">',
                '</div>'

            ].join(''),
            scrollable: 'vertical',
            styleHtmlContent: true,
        });

        Ext.getCmp('refreshButtonId').hide();
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T05:37:48.927

我不确定这是否是最好的方法，但如果我是你，我将使用导航视图的[后退事件](http://docs.sencha.com/touch/2-0/#!/api/Ext.navigation.View-event-back)，当你点击后退按钮时会触发该事件

所以除了`showPost`函数，你应该为返回事件添加另一个控件，如下所示：

```
'homepanel list': {
    itemtap: 'showPost'
},
stream: {
    back: 'backButtonHandler'
} 
```

然后您可以运行该`backButtonHandler`函数以再次显示您的刷新按钮：

```
backButtonHandler: function(button){
     Ext.getCmp('refreshButtonId').show();
} 
```

希望能帮助到你 ：）

# javascript - 将 One Click 事件绑定到三个不同的链接

> ID：12761505
> 
> 赞同：0
> 
> 时间：2012-10-06T16:24:13.080
> 
> 标签：javascript, jquery

我写了一个类似于这个例子的简单脚本。问题是点击事件只绑定到条件语句中的第一个#id。我对为什么会发生这种情况的想法是，每个语句中都没有将 ID 与 click 函数中的类相关联，但是当我尝试添加 var 时，点击根本没有触发。请告诉我哪里出错了。谢谢

```
$(document).ready(function(){
        $('.someclass').bind('click', function() {
          if('#id1')
          {
            window.location = "someURL";
          }
          else if('#id2')
          {
             window.location = "someURL2";
          }
          else if('#id3')
          {
              window.location = "someURL3";
          }
            });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:28:13.087

你可以像这样检查他们的身份证

```
$(document).ready(function () {
    $('.someclass').bind('click', function () {
        if(this.id === 'id1') {
            window.location = "someURL";
        } else if(this.id === 'id2') {
            window.location = "someURL2";
        } else if(this.id === 'id3') {
            window.location = "someURL3";
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T16:30:26.713

考虑：

```
<span data-url="someURL">Link 1</span>
<span data-url="someURL2">Link 2</span> 
```

接着：

```
$wrapper.on( 'click', 'span', function () {
    window.location = $( this ).data( 'url' );
}); 
```

where`$wrapper`包含 DOM 元素，该元素又包含您的所有“链接”。

这里的想法是将数据与 JavaScript 代码（= 行为）分开。您的 URL 应该在 DOM 中 - 您可以使用`data-*`属性来存储它们（如上所示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T16:25:51.867

由于您已经为元素使用了 id，因此您应该单独使用它们来绑定点击功能。它更容易并且有效:)

```
$(document).ready(function(){
    $('#id1').click(function(){
        window.location = "someURL";
     });
    $('#id2').click(function(){
        window.location = "someURL2";
     });
    $('#id3').click(function(){
        window.location = "someURL3";
     });
}); 
```

如果你更喜欢原来的方式（你不应该;-)）然后试试这个：

```
 if( $(this).attr("id") == 'id1' )
      {
        window.location = "someURL";
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T16:34:09.450

我认为您在思考问题，也不知道您可以使用什么。我会利用您链接上的数据属性。我将假设它们不是带有 HREF 的典型 A 标签，因为如果是这样，您不应该使用 JavaScript。

```
<div data-url="http://www.someurl1.com">...</div>
<div data-url="http://www.someurl2.com">...</div>
<div data-url="http://www.someurl3.com">...</div>

<script>
    $('body').on('click','div[data-url]', function(ev) {
        ev.preventDefault();
        window.location = $(this).data('url');
    }
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T17:08:51.407

如果我的理解对您的要求是正确的，那么您有一个名为“someclass”的 css 类，其中包含超链接。您需要通过 jQuery 动态设置这些超链接的 URL，对吗？如果是这样，那么您可以尝试以下代码：

```
<script type="text/javascript" src="../Scripts/jQuery/jquery-1.7.2.js"></script>
<script type="text/ecmascript">
    $(document).ready(function () {

        $(".someclass > a").live("click", function () {
            var currentID = $(this).attr("id");
            if (currentID == "id1") {
                window.location = "http://google.com";
            }
            else if (currentID == "id2") {
                window.location = "http://stackoverflow.com";
            }
            else if (currentID == "id3") {
                window.location = "http://jquery.com";
            }
        });
    });

</script>

<div>
    <div class="someclass">
        <a id="id1">id 1</a>
        <a id="id2">id 2</a>
        <a id="id3">id 3</a>

    </div>
</div> 
```

# python - 与术语权重匹配的模糊字符串

> ID：12761506
> 
> 赞同：16
> 
> 时间：2012-10-06T16:24:18.507
> 
> 标签：python, string, information-retrieval

我正在开发一个应用程序，该应用程序尝试将一组可能“混乱”的实体名称与参考列表中的“干净”实体名称进行匹配。我一直在使用编辑距离和其他常见的模糊匹配算法，但我想知道是否有更好的方法允许词权重，这样常见的词在模糊匹配中的权重较小。

考虑这个例子，使用 Python 的`difflib`库。我正在使用组织名称，它们具有许多共同的标准化组件，因此不能用于区分实体。

```
from difflib import SequenceMatcher  
e1a = SequenceMatcher(None, "ZOECON RESEARCH INSTITUTE", 
                            "LONDON RESEARCH INSTITUTE")
print e1a.ratio()
0.88

e1b = SequenceMatcher(None, "ZOECON", "LONDON")
print e1b.ratio() 
0.333333333333

e2a = SequenceMatcher(None, "WORLDWIDE SEMICONDUCTOR MANUFACTURING CORP",
                            "TAIWAN SEMICONDUCTOR MANUFACTURING CORP")
print e2a.ratio() 
0.83950617284

e2b = SequenceMatcher(None, "WORLDWIDE",
                            "TAIWAN")
print e2b.ratio() 
0.133333333333 
```

这两个示例在完整字符串上的得分都很高，因为`RESEARCH`, `INSTITUTE`, `SEMICONDUCTOR`, `MANUFACTURING`, 和`CORP`是许多组织名称中的高频通用术语。我正在寻找有关如何将术语频率集成到模糊字符串匹配中的任何想法（不一定使用`difflib`），这样分数就不会受到常用术语的影响，结果可能看起来更像“e1b”和“e2b” “ 例子。

我意识到我可以制作一个大的“常用词”列表并将其排除在比较之外，但如果可能的话，我想使用频率，因为即使是常用词也会添加*一些*信息，而且任何列表的截止点当然也会随意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:16:15.530

how about splitting each string into a list of words, and running your comparison on each word to get a list which holds the scores of word matches. then you can average the scores, find the lowest/highest indirect match or partials...

gives you the ability to add your own weight.

you would of course need to handle offsets like..

"the london company for leather"

and

"london company for leather"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:20:35.690

这是一个奇怪的想法：

压缩您的输入并进行比较。

您可以使用例如[Huffman](http://en.wikipedia.org/wiki/Huffman_coding)或[字典编码器](http://en.wikipedia.org/wiki/Dictionary_coder)来压缩您的输入，它会自动处理常用术语。不过，对于拼写错误，它可能效果不佳，在您的示例中，London 可能是一个相对常见的词，而拼写错误的 Lundon 则根本不是，压缩术语之间的差异远高于原始术语之间的差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T02:21:02.537

我只是提出另一种不同的方法。既然您提到实体名称来自参考列表，我想知道您是否有其他上下文信息，例如共同作者姓名、产品/论文标题、地址 w/ 城市、州、国家/地区？

如果您确实有上述一些有用的上下文，您实际上可以根据它们之间的关系构建实体图。关系可以是，例如：

```
 Author-paper relation
 Co-author relation
 author-institute relation
 institute-city relation
 .... 
```

然后是时候使用详细描述的基于图的实体解析方法了：

*   [http://linqs.cs.umd.edu/basilic/web/Publications/2007/bhattacharya:tkdd07/bhattacharya-tkdd.pdf](http://linqs.cs.umd.edu/basilic/web/Publications/2007/bhattacharya:tkdd07/bhattacharya-tkdd.pdf)
*   [http://drum.lib.umd.edu/bitstream/1903/4021/1/4758.pdf](http://drum.lib.umd.edu/bitstream/1903/4021/1/4758.pdf)

该方法在合著者论文领域有很好的表现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T19:43:18.187

在我看来，一个通用的解决方案永远不会符合您对相似性的看法。一旦你对你的数据有了一些隐含的知识，你就必须以某种方式将其放入代码中。这立即取消了固定的现有解决方案的资格。

也许您应该查看[http://nltk.org/](http://nltk.org/)以了解一些 NLP 技术。您没有告诉我们有关您的数据的足够信息，但是 POS 标记器可能有助于识别更多和更少相关的术语。包含城市、国家名称的可用数据库......可能有助于在进一步处理数据之前清理数据。

有许多可用的工具，但要获得高质量的输出，您需要一个针对您的数据和用例定制的解决方案。

# javascript - 将 JSON 传递给“站点”的 Google Maps API v3

> ID：12761508
> 
> 赞同：0
> 
> 时间：2012-10-06T16:24:20.237
> 
> 标签：javascript, google-maps, google-maps-api-3

使用 Google Maps API v3，我尝试将 JSON 编码数据传递给我的`sites`var，该 var 保存地图上每个标记的位置信息。这是我为 JS 准备的：

```
// initialize variables
var infowindow = null;
var directionDisplay;
var directionsService = new google.maps.DirectionsService();
var gmarkers = [];

$(document).ready(function () { initialize(); });

function initialize() {

    alert(busipress_map_vars.locations);

    // directions
    directionsDisplay = new google.maps.DirectionsRenderer();

    var centerMap = new google.maps.LatLng(busipress_map_vars.center_lat , busipress_map_vars.center_long);

    var myOptions = {
        zoom: 4,
        center: centerMap,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    }

    var map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);

    setMarkers(map, sites);
    infowindow = new google.maps.InfoWindow({
            content: "loading..."
        });

    var start = busipress_map_vars.path_start;
    var end = busipress_map_vars.path_end;
    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
        }
    });

    directionsDisplay.setMap(map);
}

/*var sites = [
    ['Mount Evans', 39.58108, -105.63535, 4, 'This is Mount Evans.'],
    ['Irving Homestead', 40.315939, -105.440630, 2, 'This is the Irving Homestead.'],
    ['Badlands National Park', 43.785890, -101.90175, 1, 'This is Badlands National Park'],
    ['Flatirons in the Spring', 39.99948, -105.28370, 3, 'These are the Flatirons in the spring.']
];*/
var sites = [ busipress_map_vars.locations ];

function setMarkers(map, markers) {

    var defaultIcon = new google.maps.MarkerImage(busipress_map_vars.default_map_icon,
        // This marker is 32 pixels wide by 32 pixels tall.
        new google.maps.Size(busipress_map_vars.default_map_icon_width, busipress_map_vars.default_map_icon_height),
        // The origin for this image is 0,0.
        new google.maps.Point(0,0),
        // The anchor for this image is the base of the flagpole at 0,32.
        new google.maps.Point((busipress_map_vars.default_map_icon_width / 2), busipress_map_vars.default_map_icon_height));
    var defaultShadow = new google.maps.MarkerImage(busipress_map_vars.map_icon_shadow,
        // The shadow image is larger in the horizontal dimension
        // while the position and offset are the same as for the main image.
        new google.maps.Size(busipress_map_vars.map_icon_shadow_width, busipress_map_vars.map_icon_shadow_height),
        new google.maps.Point(0,0),
        new google.maps.Point((busipress_map_vars.default_map_icon_width / 2), busipress_map_vars.map_icon_shadow_height));

    var activeIcon = new google.maps.MarkerImage(busipress_map_vars.active_map_icon,
        // This marker is 20 pixels wide by 32 pixels tall.
        new google.maps.Size(busipress_map_vars.active_map_icon_width, busipress_map_vars.active_map_icon_height),
        // The origin for this image is 0,0.
        new google.maps.Point(0,0),
        // The anchor for this image is the base of the flagpole at 0,32.
        new google.maps.Point((busipress_map_vars.active_map_icon_width / 2), busipress_map_vars.active_map_icon_height));
    /*var shadow = new google.maps.MarkerImage('http://www.google.com/mapfiles/shadow50.png',
        // The shadow image is larger in the horizontal dimension
        // while the position and offset are the same as for the main image.
        new google.maps.Size(59, 32),
        new google.maps.Point(0,0),
        new google.maps.Point(16, 32));
        // Shapes define the clickable region of the icon.
        // The type defines an HTML &lt;area&gt; element 'poly' which
        // traces out a polygon as a series of X,Y points. The final
        // coordinate closes the poly by connecting to the first
        // coordinate.*/
    var shape = {
        coord: [9,0,6,1,4,2,2,4,0,8,0,12,1,14,2,16,5,19,7,23,8,26,9,30,9,34,11,34,11,30,12,26,13,24,14,21,16,18,18,16,20,12,20,8,18,4,16,2,15,1,13,0],
        type: 'poly'
    };

    var myContentDiv = document.getElementById('map-details');//Reference to you DOM elem

    for (var i = 0; i < markers.length; i++) {
        var sites = markers[i];
        var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
        var marker = new google.maps.Marker({
            position: siteLatLng,
            map: map,
            title: sites[0],
            icon: defaultIcon,
            shadow: defaultShadow,
            zIndex: sites[3],
            html: sites[4]
        });

        var contentString = "Some content";

        google.maps.event.addListener(marker, "click", function () {
            //alert(this.html);
            for (var i=0; i<gmarkers.length; i++) {
               gmarkers[i].setIcon(defaultIcon);
            }
            this.setIcon(activeIcon);
            //var myTemplate = '<h1>'+this.title+'</h1><p>'+this.html+'</p>';
            var myTemplate = this.html;
            //alert(marker.title);
            myContentDiv.innerHTML = myTemplate;//Inset this html inside link
            //infowindow.setContent(this.html);
            //infowindow.open(map, this);
        });
        gmarkers.push(marker);
    }
} 
```

您可以在我的顶部附近看到将发送数据的警报，这是该警报的内容：

```
['Ankida Ridge Vineyards &#8211; The Vrooman Family Vineyard &#038; Winery',37.69603499999999,-79.17580859999998, 1, '<div id="post-45"><a href="http://localhost/jhtwp/business/ankida-ridge-vineyards-the-vrooman-family-vineyard-winery/">Ankida Ridge Vineyards &#8211; The Vrooman Family Vineyard &#038; Winery</a></div>'], ['DelFosse Vineyards &#038; Winery',37.85349230000001,-78.7816219, 2, '<div id="post-49"><a href="http://localhost/jhtwp/business/delfosse-vineyards-winery/">DelFosse Vineyards &#038; Winery</a></div>'], ['Democracy Vineyards',37.7598066,-78.87074580000001, 3, '<div id="post-56"><a href="http://localhost/jhtwp/business/democracy-vineyards/">Democracy Vineyards</a></div>'], ['Lazy Days Winery',37.6153147,-79.01673799999998, 4, '<div id="post-44"><a href="http://localhost/jhtwp/business/lazy-days-winery/">Lazy Days Winery</a></div>'], ['Mountain Cove Vineyards',37.7801633,-78.89298110000004, 5, '<div id="post-43"><a href="http://localhost/jhtwp/business/mountain-cove-vineyards/">Mountain Cove Vineyards</a></div>'], ['Pippin Hill Farm &#038; Vineyards',37.9586103,-78.66310809999999, 6, '<div id="post-52"><a href="http://localhost/jhtwp/business/pippin-hill-farm-vineyards/">Pippin Hill Farm &#038; Vineyards</a></div>'], ['Rebec Vineyards',37.6415525,-78.98114399999997, 7, '<div id="post-38"><a href="http://localhost/jhtwp/business/rebec-vineyards/">Rebec Vineyards</a></div>'], ['Sugarleaf Vineyards',37.939089,-78.61289899999997, 8, '<div id="post-54"><a href="http://localhost/jhtwp/business/sugarleaf-vineyards/">Sugarleaf Vineyards</a></div>'] 
```

我相信这具有 API 正在寻找的确切格式（来自我注释掉的示例）：

```
var sites = [
    ['Mount Evans', 39.58108, -105.63535, 4, 'This is Mount Evans.'],
    ['Irving Homestead', 40.315939, -105.440630, 2, 'This is the Irving Homestead.'],
    ['Badlands National Park', 43.785890, -101.90175, 1, 'This is Badlands National Park'],
    ['Flatirons in the Spring', 39.99948, -105.28370, 3, 'These are the Flatirons in the spring.']
]; 
```

但我在加载页面时不断收到此错误：

`Uncaught Error: Invalid value for property <zIndex>: n`

这是页面源中打印出来的 JSON 数据：

```
<script type='text/javascript'>
/* <![CDATA[ */
var busipress_map_vars = [];
busipress_map_vars = {"default_map_icon":"http:\/\/localhost\/jhtwp\/wp-content\/plugins\/busipress\/img\/red-dot.png","default_map_icon_width":32,"default_map_icon_height":32,"active_map_icon":"http:\/\/localhost\/jhtwp\/wp-content\/plugins\/busipress\/img\/blue-dot.png","active_map_icon_width":32,"active_map_icon_height":32,"map_icon_shadow":"http:\/\/localhost\/jhtwp\/wp-content\/plugins\/busipress\/img\/msmarker.shadow.png","map_icon_shadow_width":59,"map_icon_shadow_height":32,"center_lat":-34.397,"center_long":150.644,"path_start":"35.7719444, -78.6388889","path_end":"32.7763889,  -79.9311111","locations":"['Ankida Ridge Vineyards &#8211; The Vrooman Family Vineyard &#038; Winery',37.69603499999999,-79.17580859999998, 1, '<div id=\"post-45\"><a href=\"http:\/\/localhost\/jhtwp\/business\/ankida-ridge-vineyards-the-vrooman-family-vineyard-winery\/\">Ankida Ridge Vineyards &#8211; The Vrooman Family Vineyard &#038; Winery<\/a><\/div>'], ['DelFosse Vineyards &#038; Winery',37.85349230000001,-78.7816219, 2, '<div id=\"post-49\"><a href=\"http:\/\/localhost\/jhtwp\/business\/delfosse-vineyards-winery\/\">DelFosse Vineyards &#038; Winery<\/a><\/div>'], ['Democracy Vineyards',37.7598066,-78.87074580000001, 3, '<div id=\"post-56\"><a href=\"http:\/\/localhost\/jhtwp\/business\/democracy-vineyards\/\">Democracy Vineyards<\/a><\/div>'], ['Lazy Days Winery',37.6153147,-79.01673799999998, 4, '<div id=\"post-44\"><a href=\"http:\/\/localhost\/jhtwp\/business\/lazy-days-winery\/\">Lazy Days Winery<\/a><\/div>'], ['Mountain Cove Vineyards',37.7801633,-78.89298110000004, 5, '<div id=\"post-43\"><a href=\"http:\/\/localhost\/jhtwp\/business\/mountain-cove-vineyards\/\">Mountain Cove Vineyards<\/a><\/div>'], ['Pippin Hill Farm &#038; Vineyards',37.9586103,-78.66310809999999, 6, '<div id=\"post-52\"><a href=\"http:\/\/localhost\/jhtwp\/business\/pippin-hill-farm-vineyards\/\">Pippin Hill Farm &#038; Vineyards<\/a><\/div>'], ['Rebec Vineyards',37.6415525,-78.98114399999997, 7, '<div id=\"post-38\"><a href=\"http:\/\/localhost\/jhtwp\/business\/rebec-vineyards\/\">Rebec Vineyards<\/a><\/div>'], ['Sugarleaf Vineyards',37.939089,-78.61289899999997, 8, '<div id=\"post-54\"><a href=\"http:\/\/localhost\/jhtwp\/business\/sugarleaf-vineyards\/\">Sugarleaf Vineyards<\/a><\/div>']"};;
/* ]]> */
</script> 
```

有人对此有任何想法吗？我真的很感激任何帮助。谢谢！

# 编辑

如果它有帮助（我可能会出错，但我不确定），这就是我要传递到每个位置以生成 API 期望格式的数据的内容：

```
function busipress_business_teaser($echo = true, $zindex) {

    $location = get_field('address');

    ob_start();
    echo '[\'';
    echo get_the_title();
    echo '\',';
    echo $location['coordinates'] . ', ';
    echo $zindex . ', ';
    echo '\'<div ';
    echo 'id="post-'.get_the_ID().'">';
    echo '<a href="'.get_permalink().'">';
    echo get_the_title();
    echo '</a>';
    echo '</div>\'';
    echo ']';
    $display = ob_get_contents();

    ob_end_clean();

    if($echo) {
        echo $display;
    }
    else {
        return $display;
    }

} 
```

# 更新

如上所述将所有数据放在双引号中后，我的 HTML 源值是：

```
<script type='text/javascript'>
/* <![CDATA[ */
var busipress_map_vars = [];
busipress_map_vars = {"default_map_icon":"http:\/\/localhost\/jhtwp\/wp-content\/plugins\/busipress\/img\/red-dot.png","default_map_icon_width":32,"default_map_icon_height":32,"active_map_icon":"http:\/\/localhost\/jhtwp\/wp-content\/plugins\/busipress\/img\/blue-dot.png","active_map_icon_width":32,"active_map_icon_height":32,"map_icon_shadow":"http:\/\/localhost\/jhtwp\/wp-content\/plugins\/busipress\/img\/msmarker.shadow.png","map_icon_shadow_width":59,"map_icon_shadow_height":32,"center_lat":-34.397,"center_long":150.644,"path_start":"35.7719444, -78.6388889","path_end":"32.7763889,  -79.9311111","locations":"[\"Ankida Ridge Vineyards &#8211; The Vrooman Family Vineyard &#038; Winery\",37.69603499999999,-79.17580859999998, \"<div id=\"post-45\"><a href=\"http:\/\/localhost\/jhtwp\/business\/ankida-ridge-vineyards-the-vrooman-family-vineyard-winery\/\">Ankida Ridge Vineyards &#8211; The Vrooman Family Vineyard &#038; Winery<\/a><\/div>\"], [\"DelFosse Vineyards &#038; Winery\",37.85349230000001,-78.7816219, \"<div id=\"post-49\"><a href=\"http:\/\/localhost\/jhtwp\/business\/delfosse-vineyards-winery\/\">DelFosse Vineyards &#038; Winery<\/a><\/div>\"], [\"Democracy Vineyards\",37.7598066,-78.87074580000001, \"<div id=\"post-56\"><a href=\"http:\/\/localhost\/jhtwp\/business\/democracy-vineyards\/\">Democracy Vineyards<\/a><\/div>\"], [\"Lazy Days Winery\",37.6153147,-79.01673799999998, \"<div id=\"post-44\"><a href=\"http:\/\/localhost\/jhtwp\/business\/lazy-days-winery\/\">Lazy Days Winery<\/a><\/div>\"], [\"Mountain Cove Vineyards\",37.7801633,-78.89298110000004, \"<div id=\"post-43\"><a href=\"http:\/\/localhost\/jhtwp\/business\/mountain-cove-vineyards\/\">Mountain Cove Vineyards<\/a><\/div>\"], [\"Pippin Hill Farm &#038; Vineyards\",37.9586103,-78.66310809999999, \"<div id=\"post-52\"><a href=\"http:\/\/localhost\/jhtwp\/business\/pippin-hill-farm-vineyards\/\">Pippin Hill Farm &#038; Vineyards<\/a><\/div>\"], [\"Rebec Vineyards\",37.6415525,-78.98114399999997, \"<div id=\"post-38\"><a href=\"http:\/\/localhost\/jhtwp\/business\/rebec-vineyards\/\">Rebec Vineyards<\/a><\/div>\"], [\"Sugarleaf Vineyards\",37.939089,-78.61289899999997, \"<div id=\"post-54\"><a href=\"http:\/\/localhost\/jhtwp\/business\/sugarleaf-vineyards\/\">Sugarleaf Vineyards<\/a><\/div>\"]"};;
/* ]]> */
</script> 
```

我还将 JS 切换为具有静态 zIndex 值（因为我认为它没有将 zIndex 作为整数传递）：

```
// initialize variables
var infowindow = null;
var directionDisplay;
var directionsService = new google.maps.DirectionsService();
var gmarkers = [];

$(document).ready(function () { initialize(); });

function initialize() {

    alert(busipress_map_vars.locations);

    // directions
    directionsDisplay = new google.maps.DirectionsRenderer();

    var centerMap = new google.maps.LatLng(busipress_map_vars.center_lat , busipress_map_vars.center_long);

    var myOptions = {
        zoom: 4,
        center: centerMap,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    }

    var map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);

    setMarkers(map, sites);
    infowindow = new google.maps.InfoWindow({
            content: "loading..."
        });

    var start = busipress_map_vars.path_start;
    var end = busipress_map_vars.path_end;
    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
        }
    });

    directionsDisplay.setMap(map);
}

/*var sites = [
    ['Mount Evans', 39.58108, -105.63535, 4, 'This is Mount Evans.'],
    ['Irving Homestead', 40.315939, -105.440630, 2, 'This is the Irving Homestead.'],
    ['Badlands National Park', 43.785890, -101.90175, 1, 'This is Badlands National Park'],
    ['Flatirons in the Spring', 39.99948, -105.28370, 3, 'These are the Flatirons in the spring.']
];*/
var sites = [ busipress_map_vars.locations ];

function setMarkers(map, markers) {

    var defaultIcon = new google.maps.MarkerImage(busipress_map_vars.default_map_icon,
        // This marker is 32 pixels wide by 32 pixels tall.
        new google.maps.Size(busipress_map_vars.default_map_icon_width, busipress_map_vars.default_map_icon_height),
        // The origin for this image is 0,0.
        new google.maps.Point(0,0),
        // The anchor for this image is the base of the flagpole at 0,32.
        new google.maps.Point((busipress_map_vars.default_map_icon_width / 2), busipress_map_vars.default_map_icon_height));
    var defaultShadow = new google.maps.MarkerImage(busipress_map_vars.map_icon_shadow,
        // The shadow image is larger in the horizontal dimension
        // while the position and offset are the same as for the main image.
        new google.maps.Size(busipress_map_vars.map_icon_shadow_width, busipress_map_vars.map_icon_shadow_height),
        new google.maps.Point(0,0),
        new google.maps.Point((busipress_map_vars.default_map_icon_width / 2), busipress_map_vars.map_icon_shadow_height));

    var activeIcon = new google.maps.MarkerImage(busipress_map_vars.active_map_icon,
        // This marker is 20 pixels wide by 32 pixels tall.
        new google.maps.Size(busipress_map_vars.active_map_icon_width, busipress_map_vars.active_map_icon_height),
        // The origin for this image is 0,0.
        new google.maps.Point(0,0),
        // The anchor for this image is the base of the flagpole at 0,32.
        new google.maps.Point((busipress_map_vars.active_map_icon_width / 2), busipress_map_vars.active_map_icon_height));
    /*var shadow = new google.maps.MarkerImage('http://www.google.com/mapfiles/shadow50.png',
        // The shadow image is larger in the horizontal dimension
        // while the position and offset are the same as for the main image.
        new google.maps.Size(59, 32),
        new google.maps.Point(0,0),
        new google.maps.Point(16, 32));
        // Shapes define the clickable region of the icon.
        // The type defines an HTML &lt;area&gt; element 'poly' which
        // traces out a polygon as a series of X,Y points. The final
        // coordinate closes the poly by connecting to the first
        // coordinate.*/
    var shape = {
        coord: [9,0,6,1,4,2,2,4,0,8,0,12,1,14,2,16,5,19,7,23,8,26,9,30,9,34,11,34,11,30,12,26,13,24,14,21,16,18,18,16,20,12,20,8,18,4,16,2,15,1,13,0],
        type: 'poly'
    };

    var myContentDiv = document.getElementById('map-details');//Reference to you DOM elem

    for (var i = 0; i < markers.length; i++) {
        var sites = markers[i];
        var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
        var marker = new google.maps.Marker({
            position: siteLatLng,
            map: map,
            title: sites[0],
            icon: defaultIcon,
            shadow: defaultShadow,
            zIndex: 1,
            html: sites[3]
        });

        var contentString = "Some content";

        google.maps.event.addListener(marker, "click", function () {
            //alert(this.html);
            for (var i=0; i<gmarkers.length; i++) {
               gmarkers[i].setIcon(defaultIcon);
            }
            this.setIcon(activeIcon);
            //var myTemplate = '<h1>'+this.title+'</h1><p>'+this.html+'</p>';
            var myTemplate = this.html;
            //alert(marker.title);
            myContentDiv.innerHTML = myTemplate;//Inset this html inside link
            //infowindow.setContent(this.html);
            //infowindow.open(map, this);
        });
        gmarkers.push(marker);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:26:02.303

`busipress_map_vars.locations`当前是一个字符串。

固定的工作示例：http `busipress_map_vars`: [//jsfiddle.net/doktormolle/p3bkU/](http://jsfiddle.net/doktormolle/p3bkU/)

**注意：**您必须拖动地图，标记在路线上方。

标记循环中也有一些变化：

```
for (var i = 0; i < markers[0].length; i++) {
        var sites = markers[0][i];
        //more code
} 
```

我建议使用 php-array 并使用 json_encode() 对其进行编码，而不是将 JSON 构建为字符串。

# python - Python：如何使用 .split 命令计算句子中的平均字长？

> ID：12761510
> 
> 赞同：3
> 
> 时间：2012-10-06T16:24:28.177
> 
> 标签：python, python-3.x

这里是 python 的新手。我正在尝试编写一个计算句子中平均单词长度的程序，我必须使用 .split 命令来完成。顺便说一句，我使用 python 3.2

这是我到目前为止写的

```
sentence = input("Please enter a sentence: ")
print(sentence.split()) 
```

到目前为止，我让用户输入了一个句子，它成功地拆分了他们输入的每个单词，例如：嗨，我的名字是 Bob，它将它拆分为 ['hi', 'my', 'name', 'is', '鲍勃']

但现在我迷路了，我不知道如何让它计算每个单词并找到句子的平均长度。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-06T16:30:05.573

在 Python 3（您似乎正在使用）中：

```
>>> sentence = "Hi my name is Bob"
>>> words = sentence.split()
>>> average = sum(len(word) for word in words) / len(words)
>>> average
2.6 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-06T16:54:47.687

您可能想要过滤掉标点符号以及零长度的单词。

```
>>> sentence = input("Please enter a sentence: ") 
```

过滤掉不重要的标点符号。如果需要，您可以在标点字符串中添加更多内容：

```
>>> filtered = ''.join(filter(lambda x: x not in '".,;!-', sentence)) 
```

拆分成单词，并删除长度为零的单词：

```
>>> words = [word for word in filtered.split() if word] 
```

并计算：

```
>>> avg = sum(map(len, words))/len(words)
>>> print(avg) 
3.923076923076923 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-06T16:40:13.067

```
>>> sentence = "Hi my name is Bob"
>>> words = sentence.split()
>>> sum(map(len, words))/len(words)
2.6 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T16:31:18.347

简洁版：

```
average = lambda lst: sum(lst)/len(lst) #average = sum of numbers in list / count of numbers in list
avg = average([len(word) for word in sentence.split()]) #generate a list of lengths of words, and calculate average 
```

分步版本：

```
def average(numbers):
    return sum(numbers)/len(numbers)
sentence = input("Please enter a sentence: ")
words = sentence.split()
lengths = [len(word) for word in words]
print 'Average length:', average(lengths) 
```

输出：

```
>>> 
Please enter a sentence: Hey, what's up?
Average length: 4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-21T22:33:38.460

```
def main():

    sentence = input('Enter the sentence:  ')
    SumAccum = 0
    for ch in sentence.split():
        character = len(ch)
        SumAccum = SumAccum + character

    average = (SumAccum) / (len(sentence.split()))
    print(average) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-09T05:24:46.127

```
s = input("Please enter a sentence: ")
avg_word_len = len(s.replace(' ',''))/len(s.split())
print('Word average =', avg_word_len) 
```

输出：

```
Please enter a sentence: this is a testing string
Word average = 4.0 
```

注意：这是一个普通的用例，可以根据需要应用额外的边界条件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-08T06:42:48.063

作为模块化：

```
import re

def avg_word_len(s):
    words = s.split(' ') # presuming words split by ' '. be watchful about '.' and '?' below
    words = [re.sub(r'[^\w\s]','',w) for w in words] # re sub '[^\w\s]' to remove punctuations first
    return sum(len(w) for w in words)/float(len(words)) # then calculate the avg, dont forget to render answer as a float

if __name__ == "__main__":
    s = raw_input("Enter a sentence")
    print avg_word_len(s) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-31T17:50:46.323

```
 def averageWordLength(mystring):
tempcount = 0
count = 1

wordcount = 0
try:
    for character in mystring:
        if character == " ":
            tempcount +=1
            if tempcount ==1:
                count +=1

        else:
            tempcount = 0
            try:
                if character.isalpha(): #sorry for using the .isalpha
                    wordcount += 1
            except:
                wordcount = wordcount + 0
    if mystring[0] == " " or mystring.endswith(" "): #i'm sorry for using the .endswith
            count -=1

    try:
        result = wordcount/count
        if result == 0:
            result = "No words"
            return result
        else:
            return result

    except ZeroDivisionError:
        error = "No words"
        return error

except Exception:
    error = "Not a string"
    return error 
```

mystring = "你有多大的空间！" 输出为 3.0，我没有使用拆分

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-04-28T20:59:12.513

```
def average():
    value = input("Enter the sentence:")
    sum = 0
    storage = 0
    average = 0

    for i in range (len(value)):
        sum = sum + 1
        storage = sum
        average = average+storage

    print (f"the average is :{average/len(value)}")

    return average/len(value)

average() 
```

# .net - 无头 webkit 包装器/驱动程序未安装 .net

> ID：12761511
> 
> 赞同：0
> 
> 时间：2012-10-06T16:24:31.413
> 
> 标签：.net, browser, phantomjs, headless

我正在寻找具有以下属性**的.net 嵌入式无头浏览器：**

*   **现代 Webkit 级别的 Ajax/HTML5 支持**，最好基于 webkit
*   **支持无头模式**（没有可见的浏览器），速度越快越好
*   **零安装**（例如 browser.exe 和 ac# 包装 DLL 复制到项目中）
*   **可靠地用于基本任务的生产**使用（例如复杂页面的屏幕截图），我不在这里寻找 99.9999 的可靠性，但它需要比 Selenium 更稳定和更快，我们有很多冗余，所以偶尔的错误是可以的。
*   **开源**或免费用于商业用途（最好是 MIT 许可证），而不是废弃的项目

**如果不需要安装 PhantomJS 将是理想的**. PhantomJS 似乎符合我除了“不安装”部分之外的所有标准，因此它是当前最喜欢的，但在我们投入时间设置和测试用于安装 PhantomJS 的多环境部署过程之前（这很耗时，因为我们使用了数千个数十个数据中心中的计算机）我想确保我没有错过更好的选择。我对非 webkit 实现持开放态度，但它需要具有与现代 webkit 浏览器相同的功能，并且没有奇怪的渲染或 AJAX 问题。如果您认为这是可行的方法，我也有兴趣了解 PhantomJS 在屏幕截图 AJAX/HTML5 页面方面的可靠性。例如，如果呈现页面的服务器没有'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:39:34.067

PhantomJS 可以简单地通过提取 zip 来获取 exe 来安装。所以在这方面很简单。

因为我没有在.net 中使用过它，所以不太了解 ac# dll，但它可以从外部程序编写脚本（这就是它的全部意义所在），所以它不应该太难。

希望有帮助。

# c# - 在 PostBack 上的 ListView 中抓取生成的 ListBox ASP 控件的值

> ID：12761515
> 
> 赞同：1
> 
> 时间：2012-10-06T16:24:52.890
> 
> 标签：c#, asp.net

所以我有这个：

```
 <asp:ListView runat="server" ID="lvAttributes" DataKeyNames="attribute_id" OnItemDataBound="lvAttributes_ItemDataBound">
        <ItemTemplate>
            <label class="title">product <%# Eval("name") %></label>
            <asp:ListBox DataTextField="value" DataValueField="tag_id" CssClass="chzn-select"
                runat="server" ID="lbAttributeTags"></asp:ListBox>
            <br />
        </ItemTemplate>
        <LayoutTemplate>
            <div id="itemPlaceholder" runat="server"></div>
        </LayoutTemplate>
    </asp:ListView> 
```

现在在回发时，我想获取每个单独的 lbAttributeTags 选定值。但正如您所知，可能会生成一个或 100 个 ListBox。那么对于许多潜在的可能性，我应该如何解决这个问题呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:13:16.060

在这里，您有从列表视图控件内的 ListBox 获取所选项目的代码

网

```
 <form id="form1" runat="server">
<div>
</div>
<asp:ListView runat="server" ID="lvAttributes" DataKeyNames="attribute_id" OnItemDataBound="lvAttributes_ItemDataBound">
    <ItemTemplate>
        <label class="title">product <%# Eval("name") %></label>
        <asp:ListBox DataTextField="value" DataValueField="tag_id" CssClass="chzn-select"
            runat="server" ID="lbAttributeTags"></asp:ListBox>
        <asp:Button ID="btnInsideLV" runat="server" Text="Inside LV Click" OnCommand="btnInsideLV_Click" CommandArgument='<%# Container.DataItemIndex + 1 %>' /><br />
    </ItemTemplate>
    <LayoutTemplate>
        <div id="itemPlaceholder" runat="server"></div>
    </LayoutTemplate>
</asp:ListView>
<asp:Button ID="btnSample" runat="server" Text="Click" OnClick="btnSample_Click" />
<asp:Label ID="lblDisplay" runat="server" />
<asp:Label ID="lblSelectedRowValue" runat="server" />
</form> 
```

C＃：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class stackoverflow_12761515 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            DataTable dt = new DataTable();
            dt.Columns.Add("name");
            dt.Columns.Add("attribute_id");

        for (int i = 0; i < 5; i++)
        {
            DataRow dr = dt.NewRow();
            dr["attribute_id"] = i + 1;
            dr["name"] = "item " + i + 1;

            dt.Rows.Add(dr);
        }
        lvAttributes.DataSource = dt;
        lvAttributes.DataBind();

        //BindListBox();
    }
}

private void BindListBox(ListBox lb)
{
    DataTable dt = new DataTable();
    dt.Columns.Add("value");
    dt.Columns.Add("tag_id");

    for (int i = 0; i < 5; i++)
    {
        DataRow dr = dt.NewRow();
        dr["tag_id"] = i + 1;
        dr["value"] = "value " + i + 1;

        dt.Rows.Add(dr);
    }

    //ListBox lb = (ListBox)lvAttributes.FindControl("lbAttributeTags");
    lb.DataSource = dt;
    lb.DataTextField = "value";
    lb.DataValueField = "tag_id";
    lb.DataBind();
}

protected void lvAttributes_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    ListBox lb = (ListBox)e.Item.FindControl("lbAttributeTags");
    BindListBox(lb);
}

protected void btnSample_Click(object sender, EventArgs e)
{
    lblDisplay.Text = string.Empty;
    for (int i = 0; i < lvAttributes.Items.Count; i++)
    {
        ListBox lb = (ListBox)lvAttributes.Items[i].FindControl("lbAttributeTags");
        if (lb.SelectedIndex != -1)
        {
            lblDisplay.Text += lb.SelectedItem.Text + "\n";
        }

    }
}
protected void btnInsideLV_Click(object sender, CommandEventArgs e)
{
    int selectedRow = Convert.ToInt32(e.CommandArgument.ToString());
    ListBox lbCurrent = (ListBox)lvAttributes.Items[selectedRow - 1].FindControl("lbAttributeTags");
    if (lbCurrent.SelectedIndex != -1)
    {
        lblSelectedRowValue.Text = "Row selected is : " + selectedRow + " and list item is : " + lbCurrent.SelectedItem.Text;
    }
    else
    {
        lblSelectedRowValue.Text = "no item selected";
    }
} 
```

}

2 按钮单击事件具有您需要的代码。如果您需要其他任何东西，请告诉我。

# javascript - 让 Coffeescript 找到正确的 div // 条纹错误

> ID：12761516
> 
> 赞同：1
> 
> 时间：2012-10-06T16:24:53.083
> 
> 标签：javascript, ruby-on-rails, coffeescript, stripe-payments

在 Ryan Bates 的教程的帮助下，我能够设置 Stripe。现在，我试图让用户更新他们的信用卡信息。

现在我挂断了当点击操作按钮时能够调用条带。造成这种情况的可能原因是，我通过基本上复制 Ryan 的代码来制作新信用卡，将咖啡脚本破解了。

这是我用来输入新信用卡信息的表格

```
<%= form_tag("/users/update_card", :method => "put", :class => "edit_user", :id => "change_card" ) do %>
  <%= hidden_field_tag :stripe_card_token %>

  <div id="stripe_error" class="alert">   
      <noscript>JavaScript is not enabled and is required for this form. First enable it in your web browser settings.</noscript>
  </div>

    <div class="field">
      <%= label_tag :card_number, "Credit Card Number" %>
      <%= text_field_tag :card_number, nil, name: nil %>
    </div>
    <div class="field">
      <%= label_tag :card_code, "Security Code on Card (CVV)" %>
      <%= text_field_tag :card_code, nil, name: nil %>
    </div>
    <div class="field">
      <%= label_tag :card_month, "Card Expiration" %>
      <%= select_month nil, {add_month_numbers: true}, {name: nil, id: "card_month"} %>
      <%= select_year nil, {start_year: Date.today.year, end_year: Date.today.year+15}, {name: nil, id: "card_year"} %>
    </div>

  <%= submit_tag("Update My Credit Card", :class => "button") %> 
```

这是我正在使用的 Coffeescript。前半部分包括新用户的注册（有效），后半部分从 changecard.setupForm() 开始，不

```
# Place all the behaviors and hooks related to the matching controller here.
# All this logic will automatically be available in application.js.
# You can use CoffeeScript in this file: http://jashkenas.github.com/coffee-script/

jQuery ->
  Stripe.setPublishableKey($('meta[name="stripe-key"]').attr('content'))
  subscription.setupForm()

subscription =
  setupForm: ->
    $('#new_user').submit ->
      $('input[type=submit]').attr('disabled', true)
      if $('#card_number').length
        subscription.processCard()
        false
      else
        true

  processCard: ->
    card =
      number: $('#card_number').val()
      cvc: $('#card_code').val()
      expMonth: $('#card_month').val()
      expYear: $('#card_year').val()
    Stripe.createToken(card, subscription.handleStripeResponse)

  handleStripeResponse: (status, response) ->
    if status == 200
      $('#user_stripe_card_token').val(response.id)
      $('#new_user')[0].submit()
    else
      $('#stripe_error').text(response.error.message)
      $('input[type=submit]').attr('disabled', false)

changecard.setupForm()

changecard =
  setupForm: ->
    $('#change_card').submit ->
      $('input[type=submit]').attr('disabled', true)
      if $('#card_number').length
        subscription.processCard()
        false
      else
        true

  processCard: ->
    card =
      number: $('#card_number').val()
      cvc: $('#card_code').val()
      expMonth: $('#card_month').val()
      expYear: $('#card_year').val()
    Stripe.createToken(card, subscription.handleStripeResponse)

  handleStripeResponse: (status, response) ->
    if status == 200
      $('#user_stripe_card_token').val(response.id)
      $('#change_card')[0].submit()
    else
      $('#stripe_error').text(response.error.message)
      $('input[type=submit]').attr('disabled', false) 
```

这是我的 update_card 操作

```
 def update_card
  @user = current_user
  cu = Stripe::Customer.retrieve(@user.stripe_customer_token)
  cu.card = params[:stripe_customer_token] # obtained with Stripe.js
  cu.save
  redirect_to edit_user_path(@user)
  end 
```

感谢您坚持到这一步！非常感谢您的想法。

**编辑**

单步执行 javascript 后，它暂停了

```
changecard.setupForm() 
```

那是我从 :P 开始的那一行。错误是

```
uncaught TypeError: Cannot call method 'setupForm' of undefined 
```

似乎没有使用我上面放置的咖啡脚本正确定义 changecard。我不确定如何更改它，非常感谢任何帮助！

**编辑 2**

使用 javascript 调试，这是最终代码，它似乎提供了 stripe_card_token

```
**# Place all the behaviors and hooks related to the matching controller here.
# All this logic will automatically be available in application.js.
# You can use CoffeeScript in this file: http://jashkenas.github.com/coffee-script/
jQuery ->
  Stripe.setPublishableKey($('meta[name="stripe-key"]').attr('content'))
  subscription.setupForm()
  changecard.setupForm()
subscription =
  setupForm: ->
    $('#new_user').submit ->
      $('input[type=submit]').attr('disabled', true)
      if $('#card_number').length
        subscription.processCard()
        false
      else
        true

  processCard: ->
    card =
      number: $('#card_number').val()
      cvc: $('#card_code').val()
      expMonth: $('#card_month').val()
      expYear: $('#card_year').val()
    Stripe.createToken(card, subscription.handleStripeResponse)

  handleStripeResponse: (status, response) ->
    if status == 200
      $('#user_stripe_card_token').val(response.id)
      $('#new_user')[0].submit()
    else
      $('#stripe_error').text(response.error.message)
      $('input[type=submit]').attr('disabled', false)
changecard =
  setupForm: ->
    $('#change_card').submit ->
      $('input[type=submit]').attr('disabled', true)
      if $('#card_number').length
        changecard.processCard()
        false
      else
        true

  processCard: ->
    card =
      number: $('#card_number').val()
      cvc: $('#card_code').val()
      expMonth: $('#card_month').val()
      expYear: $('#card_year').val()
    Stripe.createToken(card, changecard.handleStripeResponse)

  handleStripeResponse: (status, response) ->
    if status == 200
      $('#stripe_card_token').val(response.id)
      $('#change_card')[0].submit()
    else
      $('#stripe_error').text(response.error.message)
      $('input[type=submit]').attr('disabled', false)** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T03:27:44.527

编辑 2

使用 javascript 调试，这是最终代码，它似乎提供了 stripe_card_token

```
**# Place all the behaviors and hooks related to the matching controller here.
# All this logic will automatically be available in application.js.
# You can use CoffeeScript in this file: http://jashkenas.github.com/coffee-script/
jQuery ->
  Stripe.setPublishableKey($('meta[name="stripe-key"]').attr('content'))
  subscription.setupForm()
  changecard.setupForm()
subscription =
  setupForm: ->
    $('#new_user').submit ->
      $('input[type=submit]').attr('disabled', true)
      if $('#card_number').length
        subscription.processCard()
        false
      else
        true

  processCard: ->
    card =
      number: $('#card_number').val()
      cvc: $('#card_code').val()
      expMonth: $('#card_month').val()
      expYear: $('#card_year').val()
    Stripe.createToken(card, subscription.handleStripeResponse)

  handleStripeResponse: (status, response) ->
    if status == 200
      $('#user_stripe_card_token').val(response.id)
      $('#new_user')[0].submit()
    else
      $('#stripe_error').text(response.error.message)
      $('input[type=submit]').attr('disabled', false)
changecard =
  setupForm: ->
    $('#change_card').submit ->
      $('input[type=submit]').attr('disabled', true)
      if $('#card_number').length
        changecard.processCard()
        false
      else
        true

  processCard: ->
    card =
      number: $('#card_number').val()
      cvc: $('#card_code').val()
      expMonth: $('#card_month').val()
      expYear: $('#card_year').val()
    Stripe.createToken(card, changecard.handleStripeResponse)

  handleStripeResponse: (status, response) ->
    if status == 200
      $('#stripe_card_token').val(response.id)
      $('#change_card')[0].submit()
    else
      $('#stripe_error').text(response.error.message)
      $('input[type=submit]').attr('disabled', false)** 
```

# python - Python中的完整十六进制表示？

> ID：12761517
> 
> 赞同：0
> 
> 时间：2012-10-06T16:24:55.323
> 
> 标签：python, rsa, hex

我已经在 Python 中编写了一个 RSA 实现，现在已经成功对其进行了加密，但是当它打印出密码时，每次它都输出“0x1L”。我相信这是一个很长的数字，但是我不知道如何显示完整的数字。如果需要我的代码，我会在评论部分发布（它很长）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:38:42.690

Python 将结果表示为`0x1L`表示数字的类型和值 - 但是，它根本不会截断数字。虽然它是作为`long`内部存储的，但它的值仍然只是`1`在这种情况下。

# jquery - jquery匹配触发事件的div的孩子

> ID：12761519
> 
> 赞同：1
> 
> 时间：2012-10-06T16:24:59.057
> 
> 标签：jquery, jquery-selectors

我正在尝试创建一个画廊/轮播小部件，如果该特定图像有鼠标悬停事件，它将在每个图像上显示一个 div。到目前为止，我有这段代码来显示 div：

```
$(document).ready(function(){

  $(".background").mouseover(function(){
    $(".info").show(1500);
  });
  $(".background").mouseout(function(){
     $(".info").hide(1500);
  });
}); 
```

和 html 明智的

```
<div id="wrapper">
<div id="slides">
    <ul>
         <li>
        <img class="background" src="images/1.png" width="240" height="240"/>
             <div class="info">Thats the info of this image</div>
    </li>
        <li>
               <img src="images/ogm.png" width="240" height="240"/>
                    <div class="info">Thats the info of this image</div>
        </li>
        <li><img src="images/2.jpg" width="240" height="240"/>
                 <div class="info">Thats the info of this image</div>
        </li>
        <li>
            <img src="images/3.png" width="240" height="240"/>
                 <div class="info">Thats the info of this image</div>
        </li>
        <li>
            <img src="images/4.png" width="240" height="240"/>
                 <div class="info">Thats the info of this image</div>
       </li>
        <li>
            <img src="images/5.png" width="240" height="240"/>
                 <div class="info">Thats the info of this image</div>
        </li>
    </ul>
</div> 
```

info 是 div 和 background 是图像的类

正如预期的那样，当任何图像上的鼠标悬停时，所有信息 div 都会匹配并出现。

是否可以只显示触发鼠标悬停的背景图像中包含的特定信息 div？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T16:26:02.517

您提供给 jQuery 绑定函数的回调作为 context ( `this`) 提供，即引发事件的元素。因此，您可以`'.info'`从以下位置搜索`$(this)`：

```
$(document).ready(function(){
  $(".background").mouseover(function(){
    $(this).parent().find(".info").show(1500);
  });
  $(".background").mouseout(function(){
     $(this).parent().find(".info").hide(1500);
  });
}); 
```

或者（雷纳托的建议）：

```
$(document).ready(function(){
  $(".background").mouseover(function(){
    $(this).sibblings(".info").show(1500);
  });
  $(".background").mouseout(function(){
     $(this).sibblings(".info").hide(1500);
  });
}); 
```

请注意，jQuery 允许链接：

```
$(document).ready(function(){
  $(".background").mouseover(function(){
    $(this).parent().find(".info").show(1500);
  }).mouseout(function(){
     $(this).parent().find(".info").hide(1500);
  });
}); 
```

另请注意，您通常需要[mouseenter](http://api.jquery.com/mouseenter/)和[mouseleave](http://api.jquery.com/mouseleave/)而不是`mouseover`and `mouseout`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:36:29.823

使用下一个图像将解决问题。

```
$(document).ready(function(){
  $(".background").mouseover(function(){
    $(this).next().show(1500); // show div next to img
  });
  $(".background").mouseout(function(){
     $(this).next().hide(1500); // hide div next to img
  });
}); 
```

# fatwire - Fatwire 中的自定义汇编器

> ID：12761524
> 
> 赞同：0
> 
> 时间：2012-10-06T16:25:14.387
> 
> 标签：fatwire

Fatwire 中通过`<GetBlobUrl></GetBlobUrl>`标签生成 URL 非常冗长，并且包含系统参数。此外，此 URL 对搜索引擎不友好。自定义汇编器是否可以帮助我们转换为更短的形式？如果是这样，您能否给我一些编写自定义汇编程序的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:10:41.823

正如您所写，您必须使用 FatWire 中提供的 URL 汇编器。

怎么做？好吧，这取决于您想要什么。

在 Generel 中，您必须编写一个实现 com.fatwire.cs.core.uri.Assembler 接口的 java 类。为此，您将需要 FatWire JavaDocs。

完成后，将您的类编译成 .jar 文件并将其部署在 Content Server 上。如果您使用的是 Satellite Server，您也必须在那里部署它。

部署后，您必须在 ServletRequest.properties 文件中注册新的汇编程序。

部署和注册后，您必须重新启动 Content Server，如果有，您的 Satellite 服务器也必须重新启动。

这不是初学者的任务。

你可以在这里阅读更多：http: [//tech.groups.yahoo.com/group/ips-link/message/17515](http://tech.groups.yahoo.com/group/ips-link/message/17515)

Fatwire 附带两个汇编器：

查询汇编器（默认）和 QueryAsPathInfo 汇编器

QueryAsPathInfo 汇编器可能是您正在寻找的 (ootb)。

FatWire 甚至提供了该汇编程序的源代码。

应该在您的 FatWire CD 上：/ContentServer/FirstSiteII/PrettyURL/src/com/fatwire/firstsite/uri/FSIIAssembler.java

或者看看上面的论坛。

# eclipse-plugin - 如何将插件添加到 Eclipse Market Place

> ID：12761528
> 
> 赞同：1
> 
> 时间：2012-10-06T16:25:22.850
> 
> 标签：eclipse-plugin

我创建了一个 Eclipse 插件“Pextools”并将其托管在[http://code.google.com/p/pextools/](http://code.google.com/p/pextools/)

我还想将它添加到 eclipse 市场，以便搜索我的插件的人可以在他们的市场客户端中找到它

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T05:28:46.123

Eclipse Marketplace Client 仅显示[Marketplace 网站](http://marketplace.eclipse.org/)上可用的内容。所以在那里注册自己并为你的插件[添加一个条目](http://marketplace.eclipse.org/add_content)。

# google-maps - 谷歌地图中使用的算法可以被覆盖吗？

> ID：12761531
> 
> 赞同：1
> 
> 时间：2012-10-06T16:25:32.967
> 
> 标签：google-maps

我目前正在尝试在车辆路线问题中实现蚁群优化。我想到的是有一个使用谷歌地图的应用程序，因为它有一个可以减轻我负担的库，而不是从头开始。

我现在的当前问题实际上是是否可以覆盖谷歌地图实现中查找从起点到终点的路径的算法。

感谢您的理解，我们将不胜感激。:)

# java - 与集合相等和可比

> ID：12761532
> 
> 赞同：10
> 
> 时间：2012-10-06T16:25:36.687
> 
> 标签：java, equals, comparable, compareto, treeset

[我在这里](https://stackoverflow.com/a/12748832/823393)发布了一些代码，它正确地解决了发布者遇到的问题。OP 希望删除重复项并将某些特殊项目置于列表顶部。我使用了`TreeSet`一个特殊的`Comparable`类，它包装了`Locale`他们正在使用的东西来实现他们想要的东西。

然后我开始思考......就像你一样......我是通过`0`从`compareTo`方法返回来消除重复项，而不是通过`true`从`equals`实现返回来正确指示 a 中的重复项`Set`（根据 a 的[定义](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)）`Set`）。

我不反对使用这种技术，但我是否使用了可能被视为*未记录的功能*？我可以安全地假设未来做这种事情会继续奏效吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-06T16:36:24.950

似乎这在（bold mine）的[JavaDoc中有很好的记录：`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)

> 请注意，如果要正确实现接口，集合维护的顺序（无论是否提供显式比较器）**必须与 equals 一致。**`Set`（有关与等于一致的精确定义，请参见`Comparable`或`Comparator`。）之所以如此，是因为`Set`接口是根据`equals`操作定义的，但是**`TreeSet`实例使用其`compareTo`（或比较）方法**执行所有元素比较，因此两个元素被视为相等从集合的角度来看，这种方法是相等的。**一个集合的行为是明确定义的，即使它的顺序与equals不一致；它只是不遵守`Set`接口**的一般合同。

下面是[唯一（？）JDK 类](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)的示例，该类实现`Comparable`但不符合`equals()`：

```
Set<BigDecimal> decimals = new HashSet<BigDecimal>();
decimals.add(new BigDecimal("42"));
decimals.add(new BigDecimal("42.0"));
decimals.add(new BigDecimal("42.00"));
System.out.println(decimals); 
```

`decimals`最后有三个值，因为`42`,`42.0`和`42.00`就目前而言不相等`equals()`。但是，如果您替换`HashSet`为`TreeSet`，则结果集仅包含一项（`42`- 恰好是添加的第一个），因为在使用 进行比较时，它们都被认为是相等的[`BigDecimal.compareTo()`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#compareTo(java.math.BigDecimal))。

这表明`TreeSet`在*使用*与`equals()`. 它仍然可以正常工作，并且所有操作都定义明确 - 它只是不遵守`Set`类的约定 - 如果两个类不是`equal()`，则它们不被视为重复。

# 也可以看看

*   [比较与等于一致是什么意思？如果我的班级不遵循这个原则，可能会发生什么？](https://stackoverflow.com/questions/12123960)

# jquery - Jquery - 高级 .clone()

> ID：12761534
> 
> 赞同：0
> 
> 时间：2012-10-06T16:25:44.673
> 
> 标签：jquery, clone, chained

我从这里开始[jQuery 克隆链式选择](https://stackoverflow.com/questions/12326661/jquery-clone-chained-selects)

[Paulj](https://stackoverflow.com/users/209003/paulj)的答案

版本 1：http: [//jsfiddle.net/m4JTQ/2/](http://jsfiddle.net/m4JTQ/2/)

版本 2（这是摆脱 i 迭代器的修改版本：http: [//jsfiddle.net/Zf7xb/1/](http://jsfiddle.net/Zf7xb/1/)

它完美地工作。但现在我正在寻找更困难的。

新的场景是：

```
----Group1 : [+] [-]-------------------------------

     ----Subgroup : [+] [-] ------------
       --Chile     | Santiago | Chiñihue
       --Argentina | San Juan | Rawson
       --Argentina | San Juan | Rawson (cloned)
     -----------------------------------

---------------------------------------------------- 
```

如果我单击子组上的 [+]，它将克隆该组的最后一个子组。

如果我单击组上的 [+]，它将使用最后一个子组信息克隆最后一个组。

IE：

```
----Group2 : [+] [-]-------------------------------

     ----Subgroup : [+] [-] ------------
       --Argentina | San Juan | Rawson (cloned)
     -----------------------------------

---------------------------------------------------- 
```

# ruby-on-rails - RSpec 请求 - 如何为所有请求设置 http 授权标头

> ID：12761544
> 
> 赞同：19
> 
> 时间：2012-10-06T16:27:05.833
> 
> 标签：ruby-on-rails, rspec, request, authorization

我正在使用 rspec 请求来测试一个 JSON API，该 API 在每个请求的标头中都需要一个 api-key。

我知道我可以这样做：

```
get "/v1/users/janedoe.json", {}, { 'HTTP_AUTHORIZATION'=>"Token token=\"mytoken\"" } 
```

但是对每个请求都这样做很乏味。

我已经尝试`request.env`在 before 块中进行设置，但我得到了`no method NilClass error`因为请求不存在。

我需要某种方式，也许在`spec-helper`, 来全局获取这个标头与所有请求一起发送。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-08T21:27:41.817

要将其设置在 before 钩子中，您需要像这样访问它

```
config.before(:each) do
  controller.request.env['HTTP_AUTHORIZATION'] = ActionController::HttpAuthentication::Token.encode_credentials('mytoken')
end 
```

我也讨厌巨大的哈希，但更喜欢在不同的步骤中明确授权用户。毕竟，这是一个非常关键的部分，并且 . 所以我的解决方案是：

```
#spec/helpers/controller_spec_helpers.rb
module ControllerSpecHelpers
  def authenticate user
    token = Token.where(user_id: user.id).first || Factory.create(:token, user_id: user.id)
    request.env['HTTP_AUTHORIZATION'] = ActionController::HttpAuthentication::Token.encode_credentials(token.hex)
  end
end

#spec/spec_helper.rb
RSpec.configure do |config|
  ...
  config.include ControllerSpecHelpers, :type => :controller 
```

然后我可以像这样使用它

```
describe Api::V1::Users, type: :controller do
  it 'retrieves the user' do
    user = create :user, name: "Jane Doe"
    authorize user
    get '/v1/users/janedoe.json'
  end
end 
```

我发现这非常适合测试不同的授权级别。或者，您可以让辅助方法指定授权函数并获得相同的结果，如下所示

```
#spec/helpers/controller_spec_helpers.rb
module ControllerSpecHelpers
  def authenticate
    controller.stub(:authenticate! => true)
  end
end 
```

但是，为了获得终极速度和控制，您可以将它们结合起来

```
#spec/helpers/controller_spec_helpers.rb
module ControllerSpecHelpers
  def authenticate user = nil
    if user
      token = Token.where(user_id: user.id).first || Factory.create(:token, user_id: user.id)
      request.env['HTTP_AUTHORIZATION'] = ActionController::HttpAuthentication::Token.encode_credentials(token.hex)
    else
      controller.stub(:authenticate! => true)
    end
  end
end 
```

然后授权整个块

```
#spec/spec_helper.rb
...
RSpec.configure do |config|
  ...
  config.before(:each, auth: :skip) { authenticate }

#**/*_spec.rb
describe Api::V1::Users, type: :controller do
  context 'authorized', auth: :skip do
    ... 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-11-07T11:48:45.260

我知道这个问题已经得到解答，但这是我的看法。对我有用的东西：

```
request.headers['Authorization'] = token 
```

代替：

```
request.env['Authorization'] = token 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-26T07:28:24.987

如果您正在发帖，这是另一种方法。

```
@authentication_params = { 'HTTP_AUTHORIZATION' => ActionController::HttpAuthentication::Token.encode_credentials(Temp::Application.config.api_key) }

expect { post "/api/interactions", @interaction_params, @authentication_params }.to change(Interaction, :count).by(1) 
```

注意interaction_params 只是我传入的一个json 对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T22:59:38.457

如果您不测试标头本身，我认为您不应该依赖标头，您应该存根检查 HTTP_AUTORIZATION 是否存在的方法，并使其对除测试特定标头的规范之外的所有规范返回 true

像......在控制器上

```
Controller...
  before_filter :require_http_autorization_token

  methods....

  protected
  def require_http_autorization_token
    something
  end 
```

在规范上

```
before(:each) do
  controller.stub!(:require_http_autorization_token => true)
end

describe 'GET user' do
  it 'returns something' do
    #call the action without the auth token
  end

  it 'requires an http_autorization_token' do
    controller.unstub(:require_http_autorization_token)
    #test that the actions require that token
  end
end 
```

这样人们就可以忘记令牌并测试您真正想要测试的内容

# installation - 为什么JDK的每个新版本都有自己的安装目录？

> ID：12761551
> 
> 赞同：1
> 
> 时间：2012-10-06T16:28:06.870
> 
> 标签：installation, java

我是 Java 新手，今天我打算再次涉足它，当时我注意到我已经在 C:\Program Files\Java\jdk1.7.0_05 安装了 JDK。我刚刚下载了最新版本，它想安装到 C:\Program Files\Java\jdk1.7.0_07。

为什么每个新版本都有自己的安装目录？Java 的维护者是否不关心向后兼容性和每个新版本的破坏？我可以理解从版本 1.7.0.5 到 2.0.0.0 的新目录，但是从 1.7.0.5 到 1.7.0.7？那个，我不明白。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:57:03.713

必须在多个 JDK 上开发/测试并不罕见。安装程序假定您安装的每个 JDK 都是有意安装的，并且不会干扰它们。请注意，您不应该编写任何包含 JDK 路径的代码，因此与现有软件的向后兼容性应该不是问题。设置/引用“首选”JDK 的方法是使用 JAVA_HOME 环境变量。大多数 java 感知应用程序将使用 JAVA_HOME 路径引用的任何版本。还有各种特定于操作系统的方法来声明首选 JDK/JRE。Windows 使用注册表设置，Linux 使用软链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:51:10.960

安装程序可能只是一个安装程序，不会因为懒惰而寻找旧版本的 Java，或者更可能的是，他们不想弄乱您机器上的软件、脚本、环境设置等安装可能已经存储了这些文件的路径，如果这些文件被删除，可能会中断。

# java - Java：从带有引号的txt文件中读取

> ID：12761555
> 
> 赞同：-3
> 
> 时间：2012-10-06T16:28:21.033
> 
> 标签：java

我试图通过网络搜索，但没有得到我的问题的答案。我有一个带有一行的 csv 文件：`"Good morning" he said`. 我的程序只是从文件中读取文本并打印出来：

```
BufferedReader in = new BufferedReader(new FileReader("XXXX/myfile.csv"));
String line;
while ((line = in.readLine()) != null) {
    System.out.println(line);
} 
```

但是，输出的引号比原始的多：

```
"""Good morning"" he said." 
```

你能告诉我如何转义这些引号，以便它像在文件中一样打印出来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:51:51.777

您有一个 CSV 文件，我怀疑该 CSV 文件的字段分隔符是`"`. 这些额外的引号将保存在 CSV 文件中，但在您使用 Excel 或其他电子表格类型程序打开它时不会显示。通过在记事本等文本编辑器中打开来检查它并查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:44:12.607

轻松修复：

```
str.replaceAll("\\\"{2}", "\""); 
```

# objective-c - 弹出教程 页面，如 Photosynth 的

> ID：12761556
> 
> 赞同：1
> 
> 时间：2012-10-06T16:28:22.200
> 
> 标签：objective-c, ios

我想创建一些基本上是 photoynth 为他们的教程页面所做的克隆的东西。一个小的 ”？” 按钮会在比第一个视图稍小的框架中弹出一个看起来像新视图的东西，这样您仍然可以看到边缘周围的第一个视图。

![在此处输入图像描述](../Images/301085a25f21256aeb566f1cdebff8d9.png)

从上面的图片看有点困难，但边缘周围的部分是教程显示弹出的旧视图。

我的第一个猜测是我需要以某种方式使用容器视图，但我在网上找不到任何关于如何执行此操作的信息。我目前可以创建一个容器视图，通过 segue 将它连接到一个新的视图控制器，并在那个新的视图控制器中做任何我想做的事情，但是容器视图在它包含的视图中总是可见的。有什么帮助吗？

顺便说一句，我正在使用 ARC 的故事板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:08:24.540

您可以向键窗口添加透明视图，添加将关闭它的点击手势识别器以及显示内容的子视图：

```
#define OVERLAY_TAG 997
-(void)showTutorial
{
    UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];
    UIView *overlay = [[UIView alloc] initWithFrame:[UIScreen mainScreen].bounds];
    overlay.backgroundColor = [UIColor clearColor];
    overlay.userInteractionEnabled = YES;
    [keyWindow addSubview:overlay];
    UITapGestureRecognizer * tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self                                                                
        action:@selector(dismissTutorial)];
    CGFloat border = 10;
    CGRect frame = overlay.bounds;
    // 20 is the status bar height (sorry for using the number)
    frame = CGRectMake(border, border + 20, frame.size.width - border * 2, frame.size.height - border * 2 - 20);
    // the black view in the example is probably a scroll view
    UIView *blackView = [[UIView alloc] initWithFrame:frame];
    blackView.backgroundColor = [UIColor blackColor];
    blackView.alpha = 0.0;
    [overlay addSubview:dimView];
    // add all the subviews for your tutorial
    // make it appear with an animation
    [UIView animateWithDuration:0.3
                     animations:^{dimView.alpha = 1;}
                     completion:^(BOOL finished){[overlay addGestureRecognizer:tapRecognizer];}];
}

-(void)dismissTutorial
{
    UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];
    UIView *overlay = [keyWindow viewWithTag:OVERLAY_TAG];
    [UIView animateWithDuration:0.3
                     animations:^{
                         overlay.alpha = 0.0;
                     }
                     completion:^(BOOL finished){
                         [overlay removeFromSuperview];
                     }];
} 
```

这样，您只需轻按一下即可删除教程，但您也可以使用按钮。

# javascript - 无法显示 Web 服务器（猫鼬）生成的 HTML

> ID：12761563
> 
> 赞同：1
> 
> 时间：2012-10-06T16:29:06.587
> 
> 标签：javascript, html, mongoose-web-server

我是网络开发的新手。我在我的应用程序中嵌入了 mongoose 网络服务器。我想做的是从浏览器连接到猫鼬。然后，当用户说输入一些数据并单击一个按钮时，它会要求 mongoose 生成一个加载到框架的 html。

Mongoose 正确生成了 html。该文件存在，但我在框架上不断收到“错误 404：未找到文件”。

我的代码如下所示：

我有 javascript 函数 showListView()

```
function showListView(doc1)
{
 parent.listViewFrame.location.href=doc1;
} 
```

当用户单击按钮时执行上述功能。请参阅下面我如何定义它：

```
onclick="showListView('http://localhost:8080/ListView/some.html')" 
```

javascript代码在主html中实现（其中还包含其他表单UI，例如按钮）

mongoose 上的代码如下所示：

```
if (strcmp(request_info->uri, "/ListView/some.html") == 0)
{
  // Generate some.html here.
  return "";
} 
```

正确生成了 html 文件。它存在于正确的路径中。但我不断在框架上收到“错误 404：未找到文件”。如果我重新加载框架内容，我会看到 some.html 正确显示。

我做错了什么？有人可以帮帮我吗？我希望在单击按钮后立即显示“some.html”，而无需重新加载框架内容。非常感谢之前。

# php - 如果 * 不存在则重定向某个页面？

> ID：12761564
> 
> 赞同：0
> 
> 时间：2012-10-06T16:29:13.853
> 
> 标签：php

我有一个`profile.php`页面，当有人查看他们自己的个人资料时，它会获取他们用户的 id 并添加`profile.php?UserID=*`（* 是用户的 id 号）。目前，没有合法的方式查看其他个人资料，但您可以更改 url 中的 id。问题是，您可以转到不存在的用户的个人资料，并将其设置为默认个人资料页面，上面没有任何内容。有没有办法从页面/url获取id并查看它是否存在，如果不存在，则重定向到某个页面？

```
<?php
    include('./dbnotseen/global.php');
    $profile = mysql_query("SELECT * FROM admin WHERE username='$username'");
    $row = mysql_fetch_array($profile);
    $username = $row['username'];

    if (($session_username)) {

    }else {
        ("location: index.php");
    }

    //max per page
    $per_page = 1;

    //get start variable
    $start = $_GET['UserID'];

    //count records
    $record_count = mysql_num_rows(mysql_query("SELECT * FROM admin"));

    //count max pages
    $mac_pages = $record_count / $per_page;

    if (!$start)
        $start = 0;

    //display data
    $get = mysql_query("SELECT * FROM admin WHERE id='$start'");
    while ($row = mysql_fetch_array($get)) {
        $id = $row['username']; 
        $picture = $row['picture'];
        $admin = $row['admin'];
        $status = $row['status'];
        $desc = $row['description'];
        $twitter = $row['twitter'];
    }
?> 
```

这是profile.php 中PHP 的主要部分。剩下的只是获得状态、描述等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:36:02.780

您可以检查您的 mysql 查询的结果集是否不为空。用函数做它`mysql_`看起来像这样：

```
$get = mysql_query("SELECT * FROM admin WHERE id='$start'");
if (mysql_num_rows($get) > 0) {
    while ($row = mysql_fetch_array($get)) {
        // rest of your code
    }
}
else {
    // redirect to another page
    header("Location: otherpage.php");
} 
```

这会给你一个关于如何处理它的想法，但正如`@Madara Uchiha`你对问题的评论中所建议的，你应该停止使用`mysql_`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:36:06.983

在解决您的问题之前，有几件重要的事情：

*   MySQL_* 系列函数[已被弃用](http://uk.php.net/manual/en/function.mysql-connect.php)，不应再使用。
*   您的代码容易受到一个巨大的安全漏洞[——SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响。请确保您正在清理您的数据库查询 - 如果没有别的，只需`$start = mysql_real_escape_string($_GET['UserID']);`在您当前的代码中。

现在，您似乎想要检查并查看您的`$get`查询返回了多少结果。您可以只使用以下`mysql_num_rows`功能：

```
if (!mysql_num_rows($get)) {
    //no user exists! do something different here
} else {
    while ($row = mysql_fetch_array($get)) {
        $id = $row['username']; 
        $picture = $row['picture'];
        $admin = $row['admin'];
        $status = $row['status'];
        $desc = $row['description'];
        $twitter = $row['twitter'];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T16:39:09.900

您还可以使用以下 SQL 语句`admin`统计表中匹配条件的记录：`id = $start`

```
"SELECT COUNT(*) FROM admin WHERE id='$start'" 
```

如果没有匹配的记录，那么提供的 UserID 不属于任何用户，您可能应该将用户重定向到某个页面来解释问题所在。

# c - 无法在 OpenCV 中将灰色转换为 BGR

> ID：12761565
> 
> 赞同：7
> 
> 时间：2012-10-06T16:29:15.200
> 
> 标签：c, opencv

`cvCvtColor`以下是使用OpenCV 中的函数将灰度图像转换为 RGB 的简单代码片段。

```
input = cvLoadImage("test.jpg", CV_LOAD_IMAGE_GRAYSCALE);
output = cvCreateImage(cvSize(input->width, input->height), 8, 3);
cvCvtColor(input, output, CV_GRAY2BGR);
cvSaveImage("output.jpg", output); 
```

其中 test.jpg 是灰度图像。

但它似乎无法正常工作，因为 output.jpg 即最终输出也是灰度的，与输入本身相同。为什么这样 ？

任何形式的帮助将不胜感激。提前致谢 ！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-06T17:27:59.900

我认为您误解了 cvCvtColor。`cvCvtColor(input, output, CV_GRAY2BGR);`将单通道图像更改为 3 通道图像。但是如果你看图像，它仍然看起来像一个灰色图像，因为例如一个 154 的灰色像素已经转换为 RGB(154,154,154)。

当您将彩色图像转换为灰色图像时，所有颜色信息都将消失且无法恢复。因此，如果没有附加信息和相应的操作，您无法真正将灰度图像变为可见的彩色图像。

# java - 如何删除地图中重复的键值对

> ID：12761567
> 
> 赞同：2
> 
> 时间：2012-10-06T16:29:15.483
> 
> 标签：java, map, key-value

仅当每个键在 map1 中具有唯一值时，我才坚持如何将键值对从 map1 传输到 map2。

假设我有以下地图：

*   地图1：[1,2] [2,4] [4,4]
*   地图2：[1,2] [2,4]

我想算法是：

1.  循环遍历第一个映射中的条目。
2.  向 map2 添加一个键。
3.  将一个值添加到一个检查 map2 值的集合中
4.  如果值重复，则不会将值添加到集合中，并且忽略将其对应的键添加到 map2。

代码片段：

```
public static <K,V> Map<K,V> unique (Map<K,V> m) {
  Map<K,V> newMap = new ArrayMap<K,V>();

  //Remember all values in the newMap.
  Set<V> holding = new ArraySet<V>(newMap.values());

  for (Map.Entry<K, V> graphEntry : m.entries()) {
     //not sure.
  }

  return newMap;  
} 
```

我的想法是否应该在正确的轨道上完成？在这里很迷失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T16:33:14.843

当且仅当键不在地图中时，从`Map<K, V>`创建将添加项目。`Map<V, K>`使用它`Map<V, K>`，重新创建您的`Map<K, V>`.

```
public static <K, V> Map<K, V> createMap(Map<K, V> m) {
    Map<K, V> map = new HashMap<K, V>();
    Map<V, K> tmpMap = new HashMap<V, K>();
    for(Map.Entry<K, V> entry : m.entrySet()) {
        if (!tmpMap.containsKey(entry.getValue())) {
            tmpMap.put(entry.getValue(), entry.getKey());
        }
    }
    for(Map.Entry<V, K> entry : tmpMap.entrySet()) {
        map.put(entry.getValue(), entry.getKey());
    }
    return map;
} 
```

如果您需要保持数据的保存顺序，请使用`LinkedHashMap`而不是`HashMap`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:39:31.720

查看[Guava BiMap](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/BiMap.html) .. 这就是您需要的..

尽管您的问题已解决，但您可以查看以下代码，以使用`Guava`API 执行您想要执行的操作：-

```
public void removeDuplicateValue() {
    Map<Integer, String> existingMap = new HashMap<Integer, String>();
    existingMap.put(1, "a");
    existingMap.put(2, "b");

    // Create a new BiMap
    BiMap<Integer, String> biMap = HashBiMap.create();

    for (Integer val: existingMap.keySet()) {

        // forcePut will add a key-value pair, and overwrite the duplicate value.
        biMap.forcePut(val, existingMap.get(val));
    }

    // Create Inverse Map for newly created BiMap.
    BiMap<String, Integer> inverseBiMap = biMap.inverse();

    for(String val: inverseBiMap.keySet()) {
        System.out.println(val + ":" + biMap.get(val));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T10:54:47.030

试试这个。。

```
 Map<String, String> myMap1 = new TreeMap<String, String>();
 myMap1.put("1", "One");
 myMap1.put("2", "Two");
 myMap1.put("3", "One");
 myMap1.put("4", "Three");
 myMap1.put("5", "Two");
 myMap1.put("6", "Three");

 Set<String> mySet = new HashSet<String>();

 for (Iterator itr = myMap1.entrySet().iterator(); itr.hasNext();)
 {
    Map.Entry<String, String> entrySet = (Map.Entry) itr.next();

    String value = entrySet.getValue();

    if (!mySet.add(value))
    {
        itr.remove();               
    }
 } 

  Map<String, String> myMap2 = new TreeMap<String, String>(myMap1);   

  System.out.println("Result :"+myMap2); 
```

结果：{1=一，2=二，4=三}

# linux - “内联汇编”代码的返回值是多少？

> ID：12761570
> 
> 赞同：0
> 
> 时间：2012-10-06T16:29:36.947
> 
> 标签：linux, assembly

```
// gcc -g stack.c -o stack  
//  
unsigned long sp(void){ __asm__("mov %esp, %eax");}  
int main(int argc, char **argv)  
{  
    unsigned long esp = sp();  
    printf("Stack pointer (ESP : 0x%lx)\n",esp);  
    return 0;  
} 
```

请检查上面的代码。事实上，我猜 sp() 将通过 esp->eax 返回 esp 寄存器值。但为什么？sp()的默认返回值是eax? 谁能告诉我更多关于它的信息？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T16:33:00.443

处理器架构组织参数、调用和返回（以及对内核的系统调用）的方式，即[调用](http://en.wikipedia.org/wiki/Syscall)[约定](http://en.wikipedia.org/wiki/X86_calling_conventions)，在 ABI（应用程序二进制接口）中进行了详细说明。对于 x86-64 上的 Linux，您应该阅读[x86-64 ABI](http://www.x86-64.org/documentation/abi.pdf)文档。是的，返回 a 的函数的返回值`long`是`%eax`x86-64 上的。（还有[X32 ABI](http://en.wikipedia.org/wiki/X32_ABI)）

请注意，它主要是传统的，但如果约定发生变化，您将需要更改编译器，可能是链接器、内核和所有库。`%esp`实际上，处理器制造商在设计芯片时要考虑到现有的 ABI（例如寄存器、指令的重要性`SYSENTER`……），这一点非常重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T16:33:15.263

这是规矩！

GCC 用于 32 位汇编的*调用约定*是整数返回函数的返回值是`%eax`. GCC 也将其用于内联汇编功能。

有关所有详细信息，请参阅[维基百科](http://en.wikipedia.org/wiki/X86_calling_conventions)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-06T16:54:05.777

IIRC 正确的命令应该是“mov eax，esp”而不是“mov esp，eax”。

```
unsigned long sp(void){ __asm__("mov %eax, %esp");} 
```

# android - 在我的活动中嵌入第 3 方活动

> ID：12761571
> 
> 赞同：0
> 
> 时间：2012-10-06T16:29:41.080
> 
> 标签：android

我正在使用以下代码获取第 3 方应用程序的活动并将其放入我的活动中：

```
LocalActivityManager mgr = getLocalActivityManager();

Intent i = new Intent(this, SomeActivity.class);

Window w = mgr.startActivity("unique_per_activity_string", i);
View wd = w != null ? w.getDecorView() : null;

if(wd != null) {
    mSomeContainer.addView(wd);
} 
```

版权所有 Synic：[android：使用 ActivityGroup 嵌入活动](https://stackoverflow.com/questions/3265265/android-using-activitygroup-to-embed-activities)

但是，由于安全限制，我收到以下错误：

java.lang.SecurityException：请求来自 com.google.android.youtube（uid 10065）的代码在进程 com.xxx.xxx（uid 10144）中运行。（可以在您自己的应用程序中使用您自己的 SharedUID 显示您自己的活动。）

现在我想知道是否有任何方法可以避免这种情况。通过使用有根设备（？）、Android 操作系统中的错误或其他任何东西。如果我可以通过生根设备使其工作，我将如何实现它？（不是c的生根）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:47:14.800

> 我正在使用以下代码获取第 3 方应用程序的活动并将其放入我的活动中

不支持，抱歉。

> 现在我想知道是否有任何方法可以避免这种情况。

欢迎您获取 Android 的源代码，对其进行修改以适应，将更改后的操作系统放入您自己的改装 ROM，然后在您能够安装的任何设备上安装该 ROM 模块。

# ios - 如何使用 UICollectionView 在 Pages 中重新创建重命名动画？

> ID：12761574
> 
> 赞同：2
> 
> 时间：2012-10-06T16:29:55.870
> 
> 标签：ios, core-animation, uicollectionview

在 Pages 中，文档被列为纸张大小的矩形，下面有标题和日期。我用 UICollectionView 重新创建了这个外观。

当用户点击标题以重命名文档时，所有其他文档都会淡出，而您点击的文档会从当前位置过渡到中心，并随着键盘滑出而扩大一点大小。

（我发现[这个视频](http://www.youtube.com/watch?v=sgbYC7N_tiY)显示了我在说什么）

使用 UICollectionView 时最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:03:51.840

你必须继承`UICollectionViewFlowLayout`. 然后，当执行所需的操作（重命名）时，您将`indexPath`需要编辑的单元格传递给布局。

然后您可以添加所需的布局属性，如下所示：

```
-(void)applyRenameAttributes:(UICollectionViewLayoutAttributes *)attributes
{
    if (self.renameIndexPath != nil) {
        if (attributes.indexPath == self.renameIndexPath) {
            // add attributes for the item that needs to be renamed
        } else {
            attributes.hidden = YES;
        }
    }
}
-(NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSArray *allAttributes = [super layoutAttributesForElementsInRect:rect];

    for (UICollectionViewLayoutAttributes *attributes in allAttributes) {
        [self applyRenameAttributes:attributes];
    }

    return allAttributes;
}
-(UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewLayoutAttributes *attributes = [super layoutAttributesForItemAtIndexPath:indexPath];

    [self applyRenameAttributes:attributes];

    return attributes;
} 
```

`renameIndexPath`您还需要在更改值时使布局无效（在 setter 中执行此操作）。重命名完成（或取消）后，您将`renameIndexPath`返回更改为`nil`.

# c# - 在具有不同项目的单独类中 Mvoing DbContext 导致异常

> ID：12761575
> 
> 赞同：2
> 
> 时间：2012-10-06T16:30:04.527
> 
> 标签：c#, entity-framework, dbcontext

我正在为我的 DAL 使用实体框架（使用 DBContext）。我们在关注点分离方面遵循的分层架构，为此目的，生成的实体类必须放在单独的类项目中。由于程序必须是可单元测试的，因此我使用存储库模式，因此我需要抽象我们从 EF 获得的 DbContext。这一切意味着实体类和上下文类不在我的 edmx 文件所在的同一个项目中。问题是当我移动文件时，我开始出现以下异常

> 未处理的异常：System.Data.MetadataException：无法加载指定的元数据资源。在
> System.Data.Metadata.Edm.MetadataArtifactLoaderCompositeResource.LoadResources(String assemblyName, String resourceName, ICollection 1 uriReg istry, MetadataArtifactAssemblyResolver resolver) at System.Data.Metadata.Edm.MetadataArtifactLoaderCompositeResource.CreateRes ourceLoader(String path, ExtensionCheck extensionCheck, String validExtension , 我在 System.Data.Common.Utils.Memoizer 2.Result.GetValue() 在 System.Data.Metadata.Edm.MetadataCache.SplitPaths(String paths) 处收集 1 uriRegistry ，Metad ataArtifactAssemblyResolver 解析器 。 Utils.Memoizer`1 uriRegistry, Metada taArtifactAssemblyResolver resolver) at
> System.Data.Metadata.Edm.MetadataArtifactLoaderCompositeResource..ctor(Str ing originalPath, String assemblyName, String resourceName, ICollection`
> `1 uriRegistry, MetadataArtifactAssemblyResolver resolver) at
> System.Data.Metadata.Edm.MetadataArtifactLoader.Create(String path, Extens ionCheck extensionCheck, String validExtension, ICollection`
> 
> `2.<>c__DisplayClass2.<Evaluate>b__0() at System.Data.Common.Utils.Memoizer`
> `2.Evaluate(TArg arg) at
> System.Data.EntityClient.EntityConnection.GetMetadataWorkspace(Boolean ini tializeAllCollections) at
> System.Data.Objects.ObjectContext.RetrieveMetadataWorkspaceFromConnection( ) at System.Data.Objects.ObjectContext..ctor(EntityConnection connection, Boole an isConnectionConstructor) at
> System.Data.Objects.ObjectContext..ctor(EntityConnection connection)
> at
> System.Data.Entity.Internal.InternalConnection.CreateObjectContextFromConn ectionModel() at
> System.Data.Entity.Internal.LazyInternalConnection.CreateObjectContextFrom ConnectionModel() at
> System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
> at
> System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType (Type entityType) at
> System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() 在
> System.Data.Entity.Internal.Linq.InternalSet 1.System.Linq.IQueryable.get_Provider() 在 System.Linq.Queryable.Where[TSource](IQueryable 1 谓词) 在 BusinessLayer.CustomerLocator .LocateCustomerByIdint id) 在 C:\Sandbox\BusinessLayer\CustomerLocator.cs:line 41 at ClientApp.Program.Main(String[] args) in C:\Sandbox\Program.cs:line 34`1.get_InternalContext()
> at
> System.Data.Entity.Infrastructure.DbQuery``1 source, Expression`

谷歌搜索表明 csdl、ssdsl 等的路径可能有问题，但我不确定这里有什么问题。以下是我的连接字符串的设置方式

```
<add name="DBConnection" 
   connectionString="metadata=res://*/MyDataModel.csdl|res://*/MyDataModel.ssdl|res://*/MyDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.;initial catalog=Customers;persist security info=True;user id=user;password=password;multipleactiveresultsets=True;App=EntityFramework&quot;" 
providerName="System.Data.EntityClient" /> 
```

# c++ - 将 MBCS 和 Unicode 库链接在一起

> ID：12761577
> 
> 赞同：1
> 
> 时间：2012-10-06T16:30:11.313
> 
> 标签：c++, visual-studio, visual-studio-2012

我有一个用 ISO C++ 编写的库。它不使用 Winapi、TCHAR 或类似的东西。我目前正在将其构建为一个静态库，其字符集设置为 Unicode。我打算将它链接到其他库，其中一些使用 Unicode 构建，一些 - MBCS。

在这种情况下，我是否需要创建两个配置并构建两个版本（MBCS 和 Unicode）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:50:07.480

这不是问题。使用 utf-16 编码的 Unicode 字符串的代码使用 wchar_t*，使用传统 8 位编码的代码使用 char*。对编译器和链接器都没有歧义。该设置存在的唯一原因是因为 Windows 标头和非标准`<tchar.h>`包含将 typedef（如 TCHAR）转换为这些字符串类型中的任何一种的宏，由 UNICODE 和 _UNICODE #defines 引导。

当然，从使用 char* 字符串的程序中使用这个库将是一个巨大的皮塔饼。程序必须翻译字符串，注意强制转换是不行的。

# css - 添加叠加 div

> ID：12761580
> 
> 赞同：1
> 
> 时间：2012-10-06T16:30:22.887
> 
> 标签：css

我正在创建一个全屏设计，其中：

*   顶部 % 底部条是特定高度，但 100% 宽度
*   中间左栏是特定宽度但 100% 高度
*   中间的右边栏占据了剩下的空间

我正在尝试创建一个“选项” div，它会从右下角弹出，将我的地图覆盖在中间右侧。

![在此处输入图像描述](../Images/3dd27cdfdcd4336a7c95dc8d38cf6eec.png)

但是，通过查看我的[代码](http://jsfiddle.net/ABz3A/)，您可以看到我所做的使选项 div 从底部 div 开始并向下移动。此外，我给了它一个 100% 的宽度，但它并没有适应其容器的宽度，而是屏幕的宽度。

```
#options {
    position: absolute;
    background: #39E023;
    width: 100%;
    height: 200px;
    text-align: right;
} 
```

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:37:06.390

给你的 div 一个`margin-top`等于高度的负数：

```
#options {
    position: absolute;
    background: #39E023;
    width: 100%;
    height: 200px;
    text-align: right;
    **margin-top: -200px;**
}
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:38:54.860

只需给出中右容器`position:relative`，然后将选项 div 设置为`left:0; bottom:0;`

我更新了你的[小提琴](http://jsfiddle.net/ABz3A/1/)

# jquery - 将图像居中对齐

> ID：12761582
> 
> 赞同：1
> 
> 时间：2012-10-06T16:30:34.637
> 
> 标签：jquery, html, css, center

我有一个图像列表，其中一些图像具有我喜欢的更大宽度，所以我裁剪它们，我设置它`overflow:hidden`是为了隐藏不必要的部分并避免缩放。我想将这些图像居中，但对我没有任何作用。我知道这是一个流行的问题，但没有一个答案对我有帮助。我想我犯了一个错误。比我更有经验的人可以帮忙吗？

*还添加了一些过渡效果。*

```
 <div id="second" class="single">
     <ul>
         <li><a href="images/album/7.jpg" rel="lightbox[photos]"> <img src="images/album/7.jpg" alt=""/></a></li>
         <li><a href="images/album/8.jpg" rel="lightbox[photos]"> <img src="images/album/8.jpg" alt=""/></a></li>
         <li><a href="images/album/9.jpg" rel="lightbox[photos]"> <img src="images/album/9.jpg" alt=""/></a></li>
         <li><a href="images/album/10.jpg" rel="lightbox[photos]"><img src="images/album/10.jpg" alt=""/></a></li>
         <li><a href="images/album/11.jpg" rel="lightbox[photos]"><img src="images/album/11.jpg" alt=""/></a></li>
         <li><a href="images/album/12.jpg" rel="lightbox[photos]"><img src="images/album/12.jpg" alt=""/></a></li>
     </ul>
  </div> 
```

CSS代码

```
.single ul {
  list-style-type: none;
}

.single li {
  padding: 0px; 
  width: 160px;
  height: 240px;
  margin: 10px;
  overflow: hidden;
  float: left;

  -webkit-transition: box-shadow 0.5s ease;
  -moz-transition: box-shadow 0.5s ease;
  -o-transition: box-shadow 0.5s ease;
  -ms-transition: box-shadow 0.5s ease;
  transition: box-shadow 0.5s ease;
}

.single img {
  height: 240px;

}

.single li:hover {
  -webkit-box-shadow: 0px 0px 7px rgba(255,255,255,0.9);
  box-shadow: 0px 0px 7px rgba(255,255,255,0.9);
} 
```

**更新 1**

图片列表如下。与其他图片相比，带有圆圈的图片宽度更大。它们被裁剪。那些图片我想居中，以便能够看到图片的中间而不是左侧。

![相片](../Images/134a117de05837016582e64943853b36.png)

**更新 2**

无论图片的实际尺寸是多少，缩略图都必须具有 160 像素的宽度和 240 像素的高度。有些照片在调整大小后完全适合。其他因为宽度大于高度不合适。这就是我裁剪它们的原因，它们必须居中才能有意义。能够看到人的脸而不是人的肩膀。图片在我的网页中动态添加。

**更新 3**

**960x640**

![960x460](../Images/4d1e47c8d45c6eecae3be6de37b30a5a.png)

**640x960**

![640x960](../Images/6937975e21e82ef6d0b1aff487a09c1b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:02:54.110

没有看到图像真的很难，但一般来说你可以做的是：

1）为需要居中的图像添加一个类，具有很多创造力，我们称之为“居中”

```
<div id="second" class="single">
<ul>
<li><a href="images/album/7.jpg" rel="lightbox[photos]"> <img src="images/album/7.jpg" alt=""/></a></li>
<li><a href="images/album/8.jpg" rel="lightbox[photos]"> <img class="centered" src="images/album/8.jpg" alt=""/></a></li>
<li><a href="images/album/9.jpg" rel="lightbox[photos]"> <img src="images/album/9.jpg" alt=""/></a></li>
<li><a href="images/album/10.jpg" rel="lightbox[photos]"><img src="images/album/10.jpg" alt=""/></a></li>
<li><a href="images/album/11.jpg" rel="lightbox[photos]"><img src="images/album/11.jpg" alt=""/></a></li>
<li><a href="images/album/12.jpg" rel="lightbox[photos]"><img class="centered" src="images/album/12.jpg" alt=""/></a></li>
</ul>
</div> 
```

2）添加一个负左边距等于溢出宽度的一半

例如，假设您的第二张图片是 200 像素宽。

`.single li`是 160px，所以我们有 40px 溢出。你可以申请这个类：

```
.single img.centered {
    margin-left:-20px; /* half of the overflown width */
} 
```

它会在中心被裁剪。“[演示](http://jsfiddle.net/gionaf/ATd7M/)”。

PS如果您希望所有图像居中，则不需要添加类。

* * *

如果您需要更具体的答案，请提供图像的宽度/八。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:45:23.067

结合@GionaF 的答案和下面的脚本，我得到了理想的结果。

```
 $(document).ready(function() {
     $(".single img").load(function() {
        if($(this).width() > 160) {
                $(this).addClass('centered');
            }
        });
    }); 
```

![在此处输入图像描述](../Images/9ca54cb031e9306bdba0b17bc317dd8c.png)

# jquery - jQuery无限滚动双重加载

> ID：12761585
> 
> 赞同：2
> 
> 时间：2012-10-06T16:31:07.053
> 
> 标签：jquery, scroll

我在这些代码中使用带有 jquery.window.scroll 函数的无限负载。

```
$(window).scroll(function(){
    if  ($(window).scrollTop() == $(document).height() - $(window).height()){
        var page = $('#lastPostsLoader').attr('page')*1;
        $('#lastPostsLoader').attr('page', page + 1);
        DataLoadFunction(page);
    }
}); 
```

但是这些代码在滚动到底部时要求双倍时间，有时还会出现错误页面。像这样;

滚动底部--->加载页面1和加载页面2--->滚动底部--->加载页面3和加载页面2--->滚动底部--->加载页面4和加载页面5 ... ......

那么我哪里错了？谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T16:40:36.263

您应该阻止数据加载，直到下一个数据到达。从服务器加载数据时将变量 isLoadingData 设置为 true。

```
var isLoadingData;
 $(window).scroll(function(){
        if  (($(window).scrollTop() == $(document).height() - $(window).height()) && !isLoadingData ){
              isLoadingData = true; 
            var page = $('#lastPostsLoader').attr('page')*1;
            $('#lastPostsLoader').attr('page', page + 1);
            DataLoadFunction(page, function(){ //  callback get called after data load
                        isLoadingData  = false;
            });
        }
    }); 
```

# java - 为什么thread.join常用来停止android中的线程

> ID：12761589
> 
> 赞同：2
> 
> 时间：2012-10-06T16:31:26.807
> 
> 标签：java, android

查看几个 android 示例，我看到使用 join() 方法暂停线程的趋势：

编辑：请假设 2 个线程已正确定义。编辑了对 join() 的调用

```
public class MainUI extends Activity{
   private GraphicsViewThread g;
   private BackendDataViewThread b;

   void onCreate(){
      g = new GraphicsViewThread();
      g.start();
      b = new BackendDataViewThread();
      b.start();
   }
   .
   .
   .
   void pauseGame(){
      try {
        g.join();
      }catch (InterruptedException e){
         e.printStackTrace();
      }
      try {
        b.join();
      }catch (InterruptedException e){
         e.printStackTrace();
      }
      GraphicsViewThread = null;
      BackendDataViewThread  = null;
   }
} 
```

1.  GraphicsViewThread 和 BackendDataViewThread 加入哪个线程？
2.  使用 join() 需要什么？我不能立即将引用设置为空吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T16:41:44.107

我怀疑您的代码无法编译，但无论如何-我会回答。
这不仅仅是关于 Android，而是关于普通的 Java。
使用“join”可确保您的代码将等待线程结束。
这不正是你想要的吗？
另外，不要将线程的引用设置为空。
您无法准确保证线程何时结束，因此在线程结束之前将线程对象设置为 null 是不好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:42:08.337

这是一个集合函数，这意味着您正在引用的线程（例如 GraphicsViewThread）将在该点加入父/主/UI 线程（先到达那里）。那是实际绘制 UI 的线程。您不能只将引用设置为 null，因为它只是一个引用。该任务仍将在后台运行。

就我使用 Android 并对其进行分析而言，我学会了避免线程。使用，AsyncTask 或其他一些类似的容器。它更易于管理。

编辑：我刚刚注意到，正如其他人提到的，您的代码不正确，它可能无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T16:43:47.677

您的代码中有几处错误，并且对`Thread.join`. 该`join`方法必须在 a 的实例上调用`Thread`。因此，您需要在`g`and上调用 join `b`。在调用 join 之前，您通常必须以某种方式通知这些线程，您希望它们停止。正如 zaske 所提到的，`join`将等到该线程完成后再继续在线程调用中执行`pauseGame`。

# javascript - SublimeText 2 中的 SublimeLinter 错误

> ID：12761592
> 
> 赞同：0
> 
> 时间：2012-10-06T16:31:40.410
> 
> 标签：javascript, sublimetext2, lint

我正在尝试在 SublimeText2 中使用 SublimeLinter。安装包，node.exe 也是，node.exe 的路径是正确的：

```
{
    "sublimelinter_executable_map": {
        "javascript":"C:\\Program Files\\nodejs\\node.exe",
        "css":"C:\\Program Files\\nodejs\\node.exe"
    }
} 
```

编写简单的代码：

```
function foo(){
    x != hg
    а = р
    в  hghhgg
} 
```

保存并且没有 linter 消息！同时在控制台中我看到了错误：

```
Traceback (most recent call last):
File ".\sublime_plugin.py", line 190, in on_post_save
File ".\sublime_plugin.py", line 154, in run_timed_function
File ".\sublime_plugin.py", line 189, in <lambda>
File ".\SublimeLinter.py", line 744, in on_post_save
File ".\SublimeLinter.py", line 611, in reload_view_module
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc4 in position 9: ordinal not in range(128) 
```

操作系统：Win7 32位

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T05:01:00.943

根据 SublimeLinter 默认设置（prefs>pkg settings>sublimelinter>settings-default），“sublimelinter_executable_map”值仅用于指定 perl/php/ruby 路径。所以将它用于 js 和 css 路径将无济于事，甚至可能会破坏它。

以下是我为 JavaSript 设置 linting 的方法：

*   使用 Package Control 安装 jslint（参见 wbond.com）

    > [遵循此处](https://github.com/darrenderidder/Sublime-JSLint)找到的所有先决条件和安装说明。

*   在用户 - SublimeLinter 的设置中：{“sublimelinter”：true，“javascript_linter”：“jslint”}

您也可以改用 jshint，这只是一个偏好问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T17:24:36.610

示例代码第 4 行的大写 B 是 Unicode 字符，而不是 ASCII 字符。SublimeLinter 看起来像是在期待 ASCII 数据，所以当它遇到 Unicode 字节时读取器会失败。

如果将字符和普通 B 并排放置，您可以很容易地看出区别：

```
в B 
```

# c# - Linq To Sql 更新 DataContext 但不更新数据库

> ID：12761598
> 
> 赞同：0
> 
> 时间：2012-10-06T16:33:08.860
> 
> 标签：c#, .net, linq-to-sql

我无法更新数据库，但是当我调试它时，生产会更新并在上下文中创建记录。但是当我关闭调试时，数据库没有任何数据定义。

我喜欢编码，直到我将这个“不更新”的 SubmitChanges() 方法储存到数据库（但更新了上下文）。它真的要了我的命，我在网上找到了几个小时的解决方案。

顺便说一句，我将“id”设置为生产 PK，并在 pk 属性中增加了身份。同样在 .dbml 文件中，我还设置了自动增量。下面是我的代码：

```
 qmsDBDataContext context = new qmsDBDataContext();
 public void AddProduction(int quails, int eggs, int feeds, int id_box) {
        Production production = new Production();
        production.quails = quails;
        production.eggs = eggs;
        production.id_box = id_box;
        production.feeds = feeds;
        context.Productions.InsertOnSubmit(production);
        context.SubmitChanges();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:55:58.390

我发现一个修复程序完全解决了我[在此处](http://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/70751a17-666f-4f2e-ab16-5a42285e93a3/) 解释的问题。我正在处理的 mdf 文件存在于我的项目/调试文件夹中，而服务器资源管理器正在查看的 mdf 文件存在于项目文件夹中。感谢 Matt Warren - MSFT 回答了这个问题。干杯

@sgmoore 感谢您为我提供有关 Transaction Scope Thing 的想法。

# asp.net-mvc-4 - ASP.Net Web Api 未在 POST 上绑定模型

> ID：12761602
> 
> 赞同：14
> 
> 时间：2012-10-06T16:33:29.903
> 
> 标签：asp.net-mvc-4, asp.net-web-api, model-binding, modelbinders

我正在尝试将 JSON 数据发布到 Web Api 方法，但 JSON 数据未绑定到模型。

这是我的模型：

```
[DataContract]
public class RegisterDataModel
{
    [DataMember(IsRequired = true)]
    public String SiteKey { get; set; }

    [DataMember(IsRequired = true)]
    public String UserId { get; set; }

    [DataMember(IsRequired = true)]
    public String UserName { get; set; }
} 
```

这是我的 Web Api 操作：

```
 public class RegisterController : ApiController
    {
    public Guid Post([ModelBinder] RegisterDataModel registerDataModel)
    {
        if (!ModelState.IsValid)
        {
            throw new ModelStateApiException(ModelState);
        }
        var userProfileDataContract = userProfileBusinessLibrary.GetNewOne();
        userProfileDataContract.UserId = registerDataModel.UserId;
        userProfileDataContract.UserName = registerDataModel.UserName;

        var userKey = userProfileBusinessLibrary.Register(registerDataModel.SiteKey, userProfileDataContract);

        return userKey;
    }
    } 
```

在我添加 [ModelBinder] 之前，registerDataModel 为空。添加[ModelBinder]后，registerDataModel是一个RegisterDataModel实例，但所有属性值为null。

这是我通过 Fiddler 提出的请求：

```
http://local.testwebsite.com/api/register

Request Headers:
User-Agent: Fiddler
Host: local.testwebsite.com
Content-Length: 89
Content-Type: application/json; charset=utf-8:

Request Body:
{ 
 "SiteKey":"qwerty",
 "UserId": "12345qwerty", 
 "UserName":"john q"
} 
```

我缺少什么让我的帖子数据绑定到 RegisterDataModel 属性？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-17T19:41:45.203

与 OP 的问题无关，但是当我在 Model 类中使用（公共）*字段*而不是*属性* （即 no `{get; set;}`）时，问题的标题将我带到了这里。事实证明，这也会导致绑定失败。

也许可以帮助某人。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-06T17:39:20.643

您如何创建 JSON 请求？通过 Fiddler 请求生成器？在请求正文中尝试以下操作。

```
{ 
 "SiteKey":"qwerty",
 "UserId": "12345qwerty", 
 "UserName":"john q"
} 
```

我猜“请求正文：”也是您的请求正文的一部分。删除它并检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-05T06:24:25.373

就我而言，应用程序的请求在转发到我的 .NET Web API 之前通过一个名为“API Manager”的中间件进行身份验证/授权。POST 参数未绑定，因为出于某种原因，我不知道为什么，“Content-Length”是从 Headers 发出的。原因是，默认的 JsonMediaTypeFormatter 总是在进行模型绑定之前检查请求的 Content-Length，如果没有显示 Content-Length，它会将参数设置为 NULL。

# typescript - TypeScript：void 返回类型转换为任何类型？

> ID：12761607
> 
> 赞同：23
> 
> 时间：2012-10-06T16:34:04.693
> 
> 标签：typescript

我似乎无法理解为什么以下代码不会引发错误：

```
var rg: {(): void;}[] = [];
rg.push(function():string {return "";}) 
```

我明确指出该类型应该是返回的函数数组`void`，但是我推了一个返回 a 的函数，`string`但编译器没有抱怨。如果我将定义更改`rg`为

```
var rg: {():number;}[] = []; 
```

编译器开始抱怨。

这是一个错误还是 void 返回类型应该如何工作（即，如果`void`使用任何东西，基本上使它与返回类型相同`any`）？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-06T21:06:26.243

这是设计使然（我将很快解释为什么它是好的设计）。规范说（在第 3.6.3 节中，为清楚起见进行了删节）：

> 类型 S 可分配给类型 T，并且 T 可从 S 分配，如果以下条件之一为真...
> 
> *   S 和 T 是对象类型，对于 T 中的每个成员 M，以下其中一项为真：
>     
>     
>     *   M 是调用、构造或索引签名，S 包含调用、构造或索引签名 N 其中
>         
>         
>         *   M 的结果类型是 Void，或者 N 的结果类型可分配给 M 的结果类型。

在这种情况下，我们正在测试是否`() => string`可分配给`() => void`. 所以要么`string`必须分配给`void`（不是），要么必须分配给（`void`它`void`是）。

* * *

实际上，这里的规则**是允许你丢弃返回值**，这与例如 C++`void`在模板解析中的处理方式是一致的。

```
function decrementWidgetHeight(w: Widget): number {
    // ... returns the new height of the widget
}

function applyToManyWidgets(w: Widget[], change: (x: Widget) => void): void {
    // for each widget in the array, apply 'change' to it
}

// Later...
applyToManyWidgets(widgetsToShorten, decrementWidgetHeight); // Should be allowed? 
```

当我们将 的类型限制为 时`change`，`(widget) => void`我们这样做是为了让您可以将`decrementWidgetHeight`其作为第二个参数传递，即使它有返回值，*但*仍要确保当我们编写 的主体时`applyToManyWidgets`，我们不会意外使用任何地方的返回值`change`。

请注意，这`void`仍然不同于`any`因为这是不允许的：

```
function f() { }
var x = f(); // Disallowed, f() is of type 'void' 
```

# scala - 为什么在案例类的理解和模式匹配中出现编译错误

> ID：12761611
> 
> 赞同：4
> 
> 时间：2012-10-06T16:34:25.743
> 
> 标签：scala

谁能知道为什么下面的代码不能通过编译？我只是不知道为什么会发生类型不匹配。

输出应如下所示：

```
List(Book, DVD, MP3) 
```

我的代码：

```
package library3 {

  abstract class Item() {
    def use(): Unit
  }

  // match on Items.

  case class Book (val title: String) extends Item
  case class DVD (val title: String) extends Item
  case class MP3 (val title: String) extends Item
}

object Ch3_2 {

  import library3._

  def main( args:Array[String] ) = {
    val items = List( new Book( "The Hobbit" ),
              new DVD( "Black Adder Goes Forth" ),
              new MP3( "Watership Down" )
            )

    println( classifyItems( items ) )
  }

  def classifyItems( items:List[Item] ): List[String] = {

    // Use a for comprehension and pattern matching to take a list of
    // items and return a list of types of items.

    for (item <- items) { // <=== type mismatch;
        item match {
            case b: Book => println("Book")
            case d: DVD => println("DVD")
            case m: MP3 => println("MP3")
        }
    }

  }

} 
```

错误信息：

```
error: type mismatch;
found   : Unit
 required: List[String]
    for (item <- items) {
              ^
one error found 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:00:28.387

这是您的代码的工作版本：

```
abstract class Item

case class Book (title: String) extends Item
case class DVD (title: String) extends Item
case class MP3 (title: String) extends Item

val items = List( 
  Book( "The Hobbit" ),
  DVD( "Black Adder Goes Forth" ),
  MP3( "Watership Down" )
)

def classifyItems(items:List[Item]): List[String] = 
  for (item <- items) yield
    item match {
      case b: Book => "Book"
      case d: DVD => "DVD"
      case m: MP3 => "MP3"
      case _ => "else"
    } 
```

验证它是否确实有效：

```
scala> classifyItems(items)
res2: List[String] = List(Book, DVD, MP3) 
```

几点说明：

*   使用案例类时，您不必使用`new`
*   您必须在`yield`语句之后使用`for`语句。
*   如果您不想在 中使用默认大小写`match`，则必须使用 a`sealed trait`或 a`sealed class`
*   `for`有关Scala中声明的更多信息： [http ://www.scala-lang.org/node/111](http://www.scala-lang.org/node/111)

# eclipse - 可以打开webapp但不能打开tomcat主页

> ID：12761613
> 
> 赞同：0
> 
> 时间：2012-10-06T16:34:35.533
> 
> 标签：eclipse, jakarta-ee, tomcat, tomcat7

当我通过 Eclipse 将 webapp 部署到服务器时，我可以使用外部浏览器毫无问题地访问 webapp 的站点。但是我无法打开localhost:8080访问tomcat自己的页面。怎么回事？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:16:18.137

默认情况下，Eclipse 不会直接使用 Web 容器（在您的情况下为 tomcat）文件。它会将一些需要的文件复制到`<your_workspace>/.metadata/.plugin/org.eclipse.wst.server.core/`那里并从那里运行服务器。

tomcat中的`localhost:8080`页面其实是一个默认的webapp调用`ROOT`，你可以在`$CATALINA_HOME/webapps/ROOT`.

当 Eclipse 复制 Web 容器文件时，它**不**包含已部署的应用程序，这就是您看不到根页面的原因。

# xamarin.ios - RadioGroup 返回选定的值

> ID：12761615
> 
> 赞同：0
> 
> 时间：2012-10-06T16:34:53.210
> 
> 标签：xamarin.ios, monotouch.dialog

我创建了一个 RadioGroup：

```
Root = new RootElement ("Club 1") {
            new Section ("Club Members"){
                new StringElement ("P1", "Kyle"),
                new StringElement ("P2", "Matt"),
                new RootElement("Members", new RadioGroup(0))
                {
                    CreateRoot()
                }

            } 
```

上面的 RootElement 需要显示从 RadioGroup 中选择的值。

```
RootElement CreateRoot ()
    {
        StringElement se = new StringElement (String.Empty);
        MyRadioElement.OnSelected += delegate(object sender, EventArgs e) {
            se.Caption = (sender as MyRadioElement).Caption;
            var root = se.GetImmediateRootElement ();
            root.Reload (se, UITableViewRowAnimation.Fade);
        };
        return new RootElement (String.Empty, new RadioGroup (0)) {
            new Section ("Select Member") {
                new MyRadioElement ("No Member Selected"),
                new MyRadioElement ("Member 1"),
                new MyRadioElement ("Member 2"),
                new MyRadioElement ("Member 3")
            }
        };
    } 
```

我有一个外部课程：

```
class MyRadioElement : RadioElement {
    public MyRadioElement (string s) : base (s) {}

    public override void Selected (DialogViewController dvc, UITableView tableView, NSIndexPath path)
    {
        base.Selected (dvc, tableView, path);
        var selected = OnSelected;
        if (selected != null)
            selected (this, EventArgs.Empty);
    }

    static public event EventHandler<EventArgs> OnSelected;
} 
```

如何让选定的值重新显示在父根元素上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:12:44.693

我没有停用控制器。

类 MyRadioElement : RadioElement { public MyRadioElement (string s) : base (s) {}

```
public override void Selected (DialogViewController dvc, UITableView tableView, NSIndexPath path)
{
    base.Selected (dvc, tableView, path);
    var selected = OnSelected;
    if (selected != null)
        selected (this, EventArgs.Empty);

    dvc.DeactivateController(true);
}

static public event EventHandler<EventArgs> OnSelected; 
```

}

# node.js - socket.io 会话 ID 和快速会话

> ID：12761618
> 
> 赞同：1
> 
> 时间：2012-10-06T16:35:24.707
> 
> 标签：node.js, session, express, socket.io, sessionid

我正在使用 socket.io 创建一个应用程序我的问题是当用户在同一个浏览器中打开多个选项卡时，它将创建新的会话 ID [socket.id]。如何在所有选项卡中携带相同的会话 ID？

我经历了一些帖子，比如在这些帖子[danielbaulig](http://www.danielbaulig.de/socket-ioexpress/)它的使用快速会话中，但是这些帖子将如何帮助我在浏览器中的所有选项卡中携带相同的 socket.io 会话 ID？

上面提到的帖子已经过时了，你能解决这些问题吗？

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T20:43:40.667

您应该查看[express.io](http://express-io.org)，这是一个非常简单的 express 和 socket.io 微框架。它自动处理 express 和 socket.io 会话。

```
npm install express.io 
```

在此处查看会话支持示例：

[https://github.com/techpines/express.io/tree/master/examples#sessions](https://github.com/techpines/express.io/tree/master/examples#sessions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T21:07:04.233

**回答我自己的问题；**

下面的2个帖子帮助我解决了这个问题。如果您遇到同样的问题，那么下面的链接可能会对您有所帮助。

[https://gist.github.com/2640463](https://gist.github.com/2640463)

[在 socket.io 中管理多个选项卡（但同一用户）](https://stackoverflow.com/questions/12166187/manage-multiple-tabs-but-same-user-in-socket-io)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-27T23:18:26.443

你可以试试这个模块[express-socket.io-session](https://www.npmjs.com/package/express-socket.io-session)。

它允许您在 express 和 socket.io（反之亦然）之间共享基于 cookie 的[会话数据。](https://www.npmjs.com/package/express-session)

因此，即使每个选项卡套接字都有不同的 id，它们也会基于每个选项卡共享的 cookie 共享会话数据，因为它们是相同的 HTTP 代理。

它适用于 express >4.0 和 socket.io >1.0

# spring - Spring和JUnit，用@Transaction注解类和方法的区别？

> ID：12761622
> 
> 赞同：3
> 
> 时间：2012-10-06T16:36:03.537
> 
> 标签：spring, transactions, spring-transactions

我想了解，如果我用@Transactional 注释我的junit 类，Spring 将只创建一个事务，该事务将在我的@Test 方法之间共享并在最后回滚。相反，如果我用@Transactional 标记每个@Test，则会在@Test 的基础上创建和回滚一个新事务。[我在官方文档（链接](http://static.springsource.org/spring/docs/3.0.x/reference/testing.html)）中没有完全找到预期的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T19:46:56.523

放在`@Transactional`一个类级别上相当于把它放在每个测试方法上。

我认为没有一种简单的方法可以实现您的第一个场景，即所有测试的单个事务。我不确定这是否有意义，因为测试将以随机顺序执行，因此您不能依赖看到彼此的修改。当然，您始终可以通过单个事务从单个 uber-test 显式调用您的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T12:09:43.730

`@Transactional`在 JUnit 测试用例类级别将在每个测试方法之前启动新事务并在之后将其回滚。

您不能在测试类开始时轻松启动新事务并保持对整个类开放，至少 Spring 不支持这一点。您的第一个解决方法是使用`@BeforeClass`/ `@AfterClass`pair，但它们必须是这样，`static`因此您无权访问事务管理器。

但首先问自己一个问题，你为什么要这样做？听起来一个测试取决于另一个测试的输出或数据库副作用。这是测试中的一大反模式，更何况 JUnit 不保证测试方法的执行顺序。也许您只需要在每个测试用例之前设置数据库？`@Before`并`@After`在 Spring 事务的上下文中执行，因此您可以在那里使用它们。

# sql - 执行查询不更新记录/数据

> ID：12761625
> 
> 赞同：2
> 
> 时间：2012-10-06T16:36:18.670
> 
> 标签：sql, database, oracle, database-connection, executequery

我正在使用数据库实用程序执行查询来试验 Oracle SQL (10g)。

我的问题是，即使成功执行 a`CREATE TABLE`和 an `INSERT`，打开数据检查器时也不会显示记录。

这是我运行的：

```
DROP TABLE Customer;

CREATE TABLE Customer (
    CustomerNr INTEGER PRIMARY KEY,
    LastName    VARCHAR2(50),
    FirstName   VARCHAR2(50)
);

INSERT INTO Customer VALUES (1, 'Example', 'Joe'); 
```

该表正确列出：

![在此处输入图像描述](../Images/c0c0592586553f80ef95de8811e32203.png)

截图 1

但是，数据选项卡中没有列出任何记录： ![在此处输入图像描述](../Images/bb88fae54b7fa8f2858d6b3e0f4e9ec9.png) [屏幕截图 2](https://i.stack.imgur.com/lnQsh.png)

`SELECT * FROM Customer;`可以成功执行，但没有返回任何内容。

**如果我断开与数据库的连接并再次连接，则数据已正确加载。**

`SELECT * FROM Customer;`现在也正确返回插入的记录。

这是执行查询中的错误吗？难道我做错了什么？我可以尝试解决什么问题？

PS：请编辑我的帖子以包含图像，因为我没有添加图像的声誉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:53:19.230

听起来数据检查器正在与您正在工作的地方不同的数据库会话中运行。DDL 语句（如`create table`）执行隐式提交，因此新表将立即在任何地方可见。DML 语句（如`insert`）不会（通常，默认情况下，尽管某些客户端会基于设置），因此新插入的数据在任何其他会话中都不可见。

简而言之...`commit`在与 相同的会话中发出 a`insert`以使其可见。

断开和重新连接也是隐式提交，这就是为什么在你完成之后数据是可见的。

# c# - 以另一种方法从事件的订阅者方法访问变量？

> ID：12761626
> 
> 赞同：0
> 
> 时间：2012-10-06T16:36:19.443
> 
> 标签：c#, variables, event-handling

如何`line`从同一类中的另一个方法访问以下订阅者方法中的变量：

```
private void portdatareceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
   string line = port.ReadExisting();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:38:22.537

您可以从事件中调用一个方法并将线路传递给它，当事件触发时，如果需要，它将在线路上启动进程。

```
private void portdatareceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
   string line = port.ReadExisting();

   SomeMethod(line);
} 
```

其他可能的方法是在类范围内声明该行并使用计时器控件来汇集其值以在触发事件时执行适当的操作，但它也可能需要一些锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:37:50.243

让它成为课堂上的一个领域。您不能在方法中访问局部变量。

毕竟，类是数据容器，而方法则作用于该数据。局部变量只是为此目的的帮手。如果需要它们作为类中的状态，则将它们设为字段。

# php - PHP中的TIMEDIFF（）函数？

> ID：12761629
> 
> 赞同：1
> 
> 时间：2012-10-06T16:36:26.307
> 
> 标签：php, sql, datetime, time

是否有任何 PHP 函数与 SQL 函数 TIMEDIFF() 做同样的事情？

这是我的代码：

```
$to_time = array_search( 'time2.Time', $aCols );
$from_time = array_search( 'time1.Time', $aCols );
$value= ; 
```

我需要以这种格式获取值`HH:MM:SS`

我使用这个版本：PHP 5.2.17

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:49:13.430

如果您使用 php 5.3 或之后您可以使用以下代码

```
$to_time = new DateTime(array_search( 'time2.Time', $aCols ));
$from_time = new DateTime(array_search( 'time1.Time', $aCols ));
$interval = $date1->diff($date2);
$value = $interval->format('%H:%i:%s'); 
```

或在 5.3 之前尝试这样的事情：

```
$date1 = strtotime("2012-09-13 12:14:24.453");
$date2 = strtotime("2012-09-15 14:21:28.453");
$interval = $date2 - $date1;
$seconds = $interval % 60;
$minutes = floor(($interval % 3600) / 60);
$hours = floor($interval / 3600);
echo $hours.":".$minutes.":".$seconds; 
```

[http://codepad.viper-7.com/b9b0L5](http://codepad.viper-7.com/b9b0L5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:39:32.857

你可以试试

```
$dattTime = new DateTime();
$dateTime2 = new DateTime("2012-09-11 10:25:00");

$interval = $dattTime->diff($dateTime2);
var_dump($interval->format('%H:%i:%s'));

$hours = $interval->h + ($interval->d*24);
var_dump("Total Hours: " . $hours . " hrs"); 
```

输出

```
string '08:17:15' (length=8)
string 'Total Hours: 608 hrs' (length=20) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T16:41:25.570

如果需要，可以使用`strtotime()`将值转换为时间戳（理想情况下它们应该已经是），然后将两者相减。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T07:49:00.080

以“H：i：s”格式获取您的时间，通过 strtotime() 将开始日期保持为 00:00:00

```
 <?php
    $origin   = '00:00:00';
    $fromTime = '00:16:00'; // $fromTime = date('H:i:s',strtotime($from_time))
    $toTime = '00:45:00';  //// $toTime= date('H:i:s',strtotime($to_time))

    $diff = (strtotime($toTime) - strtotime($fromTime)) + strtotime($origin);

    echo date('H:i:s', $diff ); 
```

输出：00:29:00

# magento - Magento Admin - 配置中不存在 Favicon 选项 - 设计 - HTML Head

> ID：12761631
> 
> 赞同：1
> 
> 时间：2012-10-06T16:36:35.953
> 
> 标签：magento, backend, favicon

我正在使用 multistore 运行 Magento 1.7.0.2，我想更改我的商店的图标，但是图标选项从 Config - Design - HTML Head 中消失了。

文件 app/code/core/Mage/Page/etc/system.xml 包含对此选项的引用，文件 app/code/core/Mage/Adminhtml/Model/System/Config/Backend/Image/Favicon.php 是当下。

有什么建议吗？谢谢恩里科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:55:46.243

您可以简单地在 /skin/adminhtml/default/default/favicon.ico 位置用您自己的图标替换默认图标

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-05T23:24:36.823

是一个损坏的安装，我尝试了你所有的建议，但没有成功。该网站在此期间添加和删除了许多网站和商店视图。许多主题和自定义。我们决定将它拆分为不同的虚拟主机，现在它更干净、更流畅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T18:22:55.820

您能否截取显示“当前配置范围”和“网站图标”的系统 -> 配置 -> 设计的屏幕截图，请参见下面的示例

![在此处输入图像描述](../Images/d7237da35f7ca523c438e29bc22c713b.png)

# joomla - joomla 1.7 的介绍图像组件

> ID：12761634
> 
> 赞同：0
> 
> 时间：2012-10-06T16:36:43.437
> 
> 标签：joomla, joomla2.5, joomla1.7

是否有任何组件允许通过 Joomla 1.7 中的 Joomla 2.5 等文章上传介绍图片？

我在谷歌上搜索过，但没有运气。有没有在 Joomla 1.7 中添加这个功能的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:46:17.197

您可以使用表单插件来实现它，但您不应该使用 1.7，它已经过时了。

# c# - c# .NET multipart/form-data 上传文件

> ID：12761646
> 
> 赞同：8
> 
> 时间：2012-10-06T16:38:46.400
> 
> 标签：c#, .net, http

我想创建一个应用程序来自动将文件上传到谷歌 SearchbyImage-tool [https://www.google.de/searchbyimage/upload](https://www.google.de/searchbyimage/upload)

谷歌正在使用 multipart/form-data 提交文件，如下所示：

```
Content-Type: multipart/form-data; boundary=---------------------------265001916915724
Content-Length: 9989
-----------------------------265001916915724
Content-Disposition: form-data; name="image_url"

-----------------------------265001916915724
Content-Disposition: form-data; name="encoded_image"; filename=""
Content-Type: application/octet-stream

-----------------------------265001916915724
Content-Disposition: form-data; name="image_content"

iVBORw0KGgoAAAANSUhEUgAAA7sAAAAdCAYAAABrN3uYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABovSURBVHhe7V15cF3Vefe00KHT0uk0_7QJk2nS0oLTNNOJaQspGQ-BBuOCgcYuBFLAAlK2sIQtwAcSHDuAbeyCV_C-IxvjRTIuCGN5k42RjLHlRdbmJ1mSV9larOVJv57lnnvPvffc5T0_6Uny92bu2E_vvnPP-c53vvP7vt_3nTcI9CIJkARIAiQBkgBJgCRwEUqgra0NiUQCx48fT_viYmtsbMR3fnAXrr52pPhXXfw9vUgCJAGSAEkgexIYlL1H05NJAiQBkgBJgCRAEiAJ9H8JcGd3MHNyrxn2qPhXXfw9vUgCJAGSAEkgexIYxA00XSQD0gHSAdIB0gHSAdIB0oH0dUB3cjmjq95nD-LRk0kCJAGSAElg0OAf_BczyPKSEUl6T_IgfaD1QPaA7CHtB7QfEh7IBB4gqNmzEqD9mvZr2q9pvw7br4WzKyOQzqZG70kepA-0HpQOkD0ge0D2gOwB2QOpA-nYw5519ah1sk9kn8g-pW-fLob1I5xdiohQRIQYDGIwMsFgkD0he0r7Ce0ntJ-49xOTO_rm-8ehX-OXHscrCxrw_Lv1ePydOoyefAx3TajFbb-pwb-PqcEPn0_g2meOkmdrkEAcfVOyjitn2g8pw4_wzMDBM6405nQilhdDRIAiRhQxSjeiT-uDIs5kP8h-kP1IjxEdKPYzyNldWAjM-6wbswu6MH1jElPyOvHmhx0Yl9uOscva8MLCVjw9pwWPzmrBQ9Oa8E8PfUHOboCzG4VfubPL5R1XzlHt0eeU8WSyT-kGsUifelaffDW76U4URUB6LwKSajRYRYSJcckM46LLf9ySBrw0rwG_mCEj8aPG1-KWsQkMtaLwPBL_vdFFVBNPGSSUQUNnQtCZGBfpmSBRzG6cfUTtJeTt-iUQB3-qfTtqv1ZyJryUGbx0sTHkKqiSahCL9K1n9c1Xs5sqkNfBvJ_BmAkWSHO9CifEiPCOL5bfSeRhVGCNDG-7DgseNLU3w_4sMKI-ocR-xsh-VrOsFlPcaLCKCMeZn-rlLzk1SQ_moZrJeP7oVCIuM7HZmpdIRsueg_ViniPvt-7JdgQs1TWinN2o8Y3dzlRy-8y0asIujAGJsV760fxkWz_o-anYixj7QT-zzzT_NP9ee2xyUJfl7_b9uZv9JZnsRntHN1rOd-FscydOne1E_ekOJI63s4BZToCvexiThgzCoEHsGjIJhzPiEechZ9AQTBKNaf8_PAlDrL_n5VjP5M_VriHyS732Mu1_FQcKsHLxW1j83gTMeedVrFidZ_cnjpyj8VIQ_ozQ_9HrBa7i2DU44yMM3w609cXxh99PiMJL5vlJFa9mfv9JFR96fSjv_vEyx4WGF8fqvZcxZPblUn9-Cv5BhvG-r2aXG-Du7u7Qq72zC03MEJ88l0TiZKcwwOaaCblglz5peezCeSrBa6ER_pnYxiaWO8XhESHHGPgjIotdzq75c-cZmYuoeMbbQ6dcq8UUNxrsXUzOeL39tRR61-ILYCD4_B23DbkTcfXOl3wWn-fMyZ_rTNDzo_Qp_uepgBQFUCJrivjaSJSgMKGtlx7Sn9TXS89G3DI7_5nWJ2qP5of0P9J-XaSMbRxGMeh3dhetLZIQdsFT4uK464XXZhivGubo5m_-MsTZ9TikoW6m7sSG3Rjg7Bq_ErfNnvF_Tfq5YsFEnPnob-xrxsSXoK4dhRvBcWxLGwsotCRx6lwnGlhAQZezH3-68dKo5XWCkLmvRzJWgvBtz-Ob3rf3UXg9rv3tHfwdJZ9U8KEexIpmwLM5vjB_K-789A4-D5ofX80uN8Dc6KoX_39nVzfa2ruZg5vEmSZmFM7IKGP5sfO2ATZ7-F7GKA6DFDeiFRYhkG0EM5JRn6dbYxZnfBfOYOZuLEayO-m62pNJnO_oRFNbJxpbO3GyqQP1Z5nxZgZ8X007_vmWBw2MoaG_VkBibJqnTnJn08y4e-erpyI8cfUn_YieDVLYIsnftBe5-Z9j_qqtmLmkAJPey8e4d1Zj7KTlYvNUACUqAsY3zurlL0L-25sRO2mAwtdLuuthoEWgaTwXlkFA8iP5Xfj-lzrjk337ZXLx5n6wxfXnri6go7Mb59u7cI45YKe5A8awVu2JdlTXt5GzG-Inm_bXuYzNRfca-zpfMxHnPr8Nh5ZeiZ-NHIHSinpsK6lEycE6o5z9GRrp4Nl09T0IH_U8vun99ZUp_NE7-DtKPjo-5CrLfagk86GCgisFO0pFECs6Iyib48sUXs-e_vpqdrkB5pPDU1IKCwvlJHWwCBh3dFlKzfFGZnxPdqCyrg2Hjrqd3UjGaMo-kaZpRzCeLGBMr3pxxpdHeJxXYvXr8l7hgDn3cUfMZvAmOJ_Z91vgXTLKL2FBwmmzcIKbjleOBX-Gc1sJ-DOuEf1h6SbLS-wG7PtZu0tr3e1yRtp-sXEKebj6vk-0q5yLbbuOs9vls-JGiI-983sc_OEVaKuvwqatxVi8ciPmL8-3r-b2Tvv_DczZrT7ZjqL9DcLZjZwfEaGU8pKMqx5xkxHFwu0smmn1-Rrf_PHv6xEgaz63M8bSJRv3eyXT0PYMc3DNsNddc7ttilt_oBjqEP1xjSdmhDYVkKI7u8ERQS5zi9EVDK9M35f3mxhxmQLlH7-eQSEFXr08zw4-8PZEqrR62Qy-FTGc4qxHPid2f43yI8YzKsJLn6cS8SV9In0ZuPpi8tNmr_hU_Llx8v3i6mDpyzqzu_qDOvzv1CN4_rk1eOLxXLzw7GeYN_fLEJfPwMROyrHTi2VqMb9HSznOsVJ7RWqy-nsOu4u_gphdE4sb_LecnCGsD7JNV9qzerZ4lpaGzfphf2Tsl18EJvw0nTG5SOaitX4Wmit-jaa99-PstqHYOP-nWJX3GVYWlOD1xXl4avxcLM0vFgGFI7UOpo3GS6ngI2DbFKXfpoxHNSaFB3UGV2Xc7XPjKLF_W_iA4WCFXzl2E6yz9bLxVVr7v799vb0wfLt0NcP7Wh-C7ZuJsZT42sbbvOSttoDhorD-eBhiFz71y9-Fv0Pwv8KI4Rmpzv4VhQ9bjqzA-U_vROPBZULndu2twPwV-TEyHAMY8AB89toubZ0ofyRFfXGCs6aMAom_bX3g_p3ArmF40oNnXX3XM3pT8zfkHCn_yuxP-Wp2uQFWzC53eMsrqtHalmS1I0mcZM5T3SnmQLEJKqs5j_2VrS7mKrrGQS5kGcHwePhMmaXQIhhAcd-L1vfZ-JhwRc2tqP9U7WsREP737TM8vyMcEaFjNcOqL8JJU9-3nvGyep7luDsRGW-EyvPeGuPV18oahVQZvI6CFWh89UkcHfINNE0YJ5jdzq4k2jrl1cIc3XPnO3G6hQUlznXgGIsKVzAGfv3OOleqeXB_uZK8hPmWs-tm_KTBdWp6o-bPcZqN8-1jgMPa43NgBUnEHBTLAIGYW2-Na2r646pRjlkjoEAKV42fvwv87O0kRv7-LP5j7FHc-EwJrv_5JhxjQQY9Gh_K6PAaHsvBlfJ36nlC10Pg-B2jITc9vT3T-rNqZlSNvKumyCNPe_2lG7FOn1GPiqjS59lnsKIyGOhz0v9oBmPgZQD43TN2KvCS_xN_5ol0nczR5Yxuc6skFTZsOInp046iovIM3p62U_xbXn0C02d9gXHjPjE1x_7mdU6Z86q8xjzu9JqcWN6Ux1Fl9zqOsaFm13u_6E2QszvIasvbZf1-6ej663yD-uUfvml_fWvcM-g-OUU4uueYo9u4dSgObvgpVn-0A6famnGWNVPW2oVFOytw1xNvYHNxghE4rcjduCcWXlJpzPLMFxM-kvuw0Hfr_BN5xoyOP4P2V4WHdDwmiRL3mSj8vcTB4twT6xwUl5Oo8JIL3-h4K2r_19rXxuHLCPPgW4XZrhZn8Dikjpkx1-fUwndCpiV4WcjLCQK4xhvYHzkfwfLX8bfHH_Dgf-lvxMc7Oj5kXKEIYp1n6fKLN3fhodlA7rKlwLF1aFr1TRFcKTlQjdNL5qB5-L8C63NDGF4TAx4Hn3n1LV190edInw8-X3KupH8XpU8Kj8o52jzesveuM4JS8Te0oEhIRqqvZpcbYFmzCxERLCuvslNq6k-3s_TlNpSzCSqtbsWe8mafYXBH2EwRLI3B8tos4dB4IgiuiIv1BT2iJRguE6NoCdT6vsPIehlL9t4TARJPsfriqjnWGWMrIuFiwFyMspeRtvouIizp1Sg0f_gu6u8ehto_-0OceeVl7Cjeh7Ubt9lMLk9hPsMc3RMshbmOMfAJFpg4Ut-OdTtrXcY7uGZXOrtLa1XNrT5_4REZXWacAa7WIz6RDKWXAXdk5a_B1fTDmgOH0TfUBMTWn_g1u2Eg5URjJ-pY5sPRBrZOWJq_d-M0RaDvW83kZaUu88_5eycDwhtRixg_H6-IgKrxeL6vDgUTIlYMsV8fOQMs6uYD5RdfXsRYDVzGKm5GCtV80nqJrkmLn-HU3_TJ5J2-vXCDwFllz94srmZ2Dgpndj_acALvzk4IB5e_Rtz2GirqzuEoe8v__c3vNmHWLAH5Pa-wGtuQz1zsqcXuCic5M8yu66wq4XQrBtlypMXzlSOuDSmwX_6Rm_RhwphH0bTjdlSu-h72zr8Ce979c6z5YC4O1RwHd0I6-Q7InN3tJ7rw5vo9WLhyLUqrWrFofUkIXvIDfmMGllYOpvY_tae68F8EPuE4KhTf-M4oCcELmjMsRxFj_zecgcIZQ4UNnIzLMHyr4YuwDErrwC4XXrDwinOGj59htPvjw-cqQ1Puv0b58wy62Pg_nn0KwoePzAHWsTPprvoF071130aicj8-rijCwwXDsffpHwFLmCc89KoQhtfAgIfhMwPWC8XTesasNRfO_u7NMNT2M87ospeaI5N_Y-NJXZ8MZzjx-2QGRGr-hjrsLQyPDBp8Heu0dfGIizTAMo25YNNnItJ4WtTpdori_Yq68yL6tbeiBbsPNTuGgbUhIjau9qyIQo58xtXXvminyA5mxrSaR5w8zx98nTVI9h3RnriPKa2vfSuiYbXNvyciXuK9FgGx2ldpHWJCvJ9bzxCMbWj_veMZaaeLyAiS53PBkMm-y_Gr9v39c3_uvV--P7elACdu-nsk_vgS1I1_DXqdrqlWt4rV-hyua8fqbTVOTUDo-Lzy1sfjkXfo_LFIC2MnBSNuPy9svtj44uqDVz9Y-2puRYQobf0x6a9XH-R7BVJ4Lbus2d2FBVbN7mStZvdQQts4jetD9dcEhXhE0zCeqPFzOfIor_08bT259NFikI3rRbLyQp6B6y--vHT74rU39N5tf0keJA9aL-b9z48vzPa5L8ovyNlVJy8384OSGKN7kp28vHhxje3o8u_dffdk4eQ2NEE4vJ_sqMJTTy7LsLNrcDYz7ey6nFrO5sZxdk39Mji7hv31V4_fi6dzRuKRe27FgyN_jPtG3IDxM1aglmW_sSNo0NzVgaqzbdhc3YaZW45h2D2_xLKPy2xMG41ndf2Lxkf8VF0f_gzFtwpHMRLItJ_HwgcXuP_78IaWsRcb30bh3ZDPNWdXzofHP7hOzyDU8KoBTxrlz_FpbPwfz97o-LCNlYDyIFZjUxILNnXhyieAlctmozuRC6y5HA98fDPWla3Av8z9OvBvV7L40kqXPxbuj4TgM9f4ZZmcOMPIJz-vPL3v1X7sxe8a_rPmSOJvk_-l4Un9-Qb9sZ1ilz-Xin8QjB9czi6PqChnVx59n0QjS1_mbBVPy6xidbqHGYDfV9mC4sPN2Fna5HJ2RURGc6ZsD99ySGUExXFIeY2rYLSs78jvO8J23sv73O1bER7N2RWnAGvgXdTsav2xGTTrGc7nkjIXEbSw_itGVo3HGq86VMg3XqsGWY3R6b8WoXE9zys___svr7gcX_3JJWj7YjfWbCzEwvc_spndU80d9v95rW55QzsO1LZh5ZaEcHYj58fqrzTIGgNuydSRr1ToqPnjETdnfsPmK157Zv2QfeVzIOcvXf2xMgRizAdfIyaQUn9KZj7wgFBZgmU_6FFiIU_D_HJDYTmnzufSOIgIl2bMxefCsMg1pLfnHr9zyrWdxszvVzUVloFPuNaLpv-W8Rc1KkKepvUXX17u9e0YI6M8Ysif2lPrM9peuO0Z3U_yoPWXDfsR5OzyQ2uK7v2-uE6x0iPO7M6adRRr1h6xvzJ8-G_xoxtexphXcnG4PonXpxTijjsYC-R7pcnsWnW84WnEUSczx6jj5ayu-lkk7eeLVL2u-flBadDuwUu8Em3fFq0sxKbK06hsA_Y3tmPXsXNYd7AFryz7HNcN5-eacJykrgg863qeCd8o51aC9QSvKdScAYk_g_ZXpz3uADj414RvdDwQ8nkm9n_NOZd418F4wfg2Cu8Gfc7b52SRTJE14hFff9z-hcKywfJXzlkc_B-tX4oMMeHD_3yT6UNpNy6_h5UuVC1C_dzLsKpsA4Yu-VsUTbsL3YzMwlWXe_wh3V5bDLnL_wjQH1XjbDvzVkatER-H6Y_j7Lrxv1pvVvqy8Ad0_Q7Dk-p5Un9sf0P4h4ocNK-naH8xeH8Tzq4ewVLObqt1IiD_jbc6BuKrWVrmEVanywH8niPN2HWgCVu_Oudydv0RVTkRzksO0n6eUFTtxVOHvR4975-IAOj3ccYwLCKhRXhcVL5iiP0MrYzu-Ptin1LrjVi42nUYavsAIDEWFZFwt-tjgH2McnAEadcbb6DsL_4UDUcTxhrdo8zJ5XW6ZSx9-eCxNuyvcZzdlOfHxYAbIj6R82cdDpZgv6PLZOHIxjR_Zln59UGLMBnmlo_R_l0yaw7i6U98RomvEQ5SWlk0Pn_Tl3hfMLtb2GnMn9qnMR9gaf5flbdErA8pE1ET4mLcrYwB1X_1u9NcjdhhX3YGQ8D4ZY2MfPEDqpyMB-2wNutnjuR6lOtBFvnLl71JBK6_-PLqz4xMnIwLGl-8iHdfZNxofilDozfWr98xhSAW-B5y8Eg19h6oYgfVVGJLcSUmTz4imN3WdqCFMZC1rLj0i9JT7ORgfnpwPUrrgeG3TPM06f2dXa_z6X5vHxRlPKBK1fpmOo1Z72MOchSzK0biPjjLfECVVoPsGX0qGTFj5uXhk9p2fFLTjbUV7Xjr4wrc-fgk_HbMA54MvFQy8qLwkXLCgjIAw_CtzIhUQXE3vonImHPh6XT2f9m-jg0cBi8uvjXgbRfe8f_ObvXymfbhR3x9qvroUdZ4zP3xMMQufBoifzuDNAr_x8s40fEhP1WdB7H4qeossRXLtnTgsjvq0X1gHEqnXor_2ToCxcd34MYP_w4duQtR_9eXGTJkIzJCjf6RPtfF4ictFRHo4EHp6Ie_V_uD15fj2FLNkcSvTg17GJ40ZUAouev-YdR64lg4wF8M8KeEs6tHxNREeQ3wx0XlWLflCFZtKhOpHuqy6xuIkQmJyMSLCMWNOBdMmY5k42kcLC_H_rJyFB-oRNFXldi8pwqf7q5CflEC63Yk8MHWhGB1FbMbt_04EdKLmSEJAimmNZL19eGKKBMjGJcBuJj1m9Z_Zu01yZPkGeTsuplEySjOnVOKLTtrwM4DFY4uv8oakuLiju6SvMO4847JpiYv2r-laq8ffnUBxi4qwnMzP8Wtj03FxBduxukDE7D4HVMGXKb1VzGWfWU_NjGGUYxetjJEvIxfPEY_Vf24kPtN-LDkQC2-_iAw_v1WXHpLKbq_eBj7pl6C0dtuxidH1-D6ed9Cx3tTUPqNS2NlKFxI_3p-PwrTp-zNl7Fm12SAo_5GEfLeiZAn_-prOPLNP8ADN9zuSbnR02_M_--NCHYqEdb-2h9uzKLWg_fzbK0Pwaa7aniJkSWGMV6Eur-uT5pfmt9s2dug_S8VL3T27L2YNuNz4fByR7fqFEu5TSSxu6IDm_aexsOPrcDUqetSaXLA33uh833b7cNRNPMfcPrg77Bk2ugIhvcC15dVuiROcfZkdGXnfVhNbVANZ-_gXb88-lp__HjKhA-nzVuFy0Y247FZCVzy433C0eXXTz67BksOzcD1c76F1gm_wr4rLgmp2e0r-hKl_1E12lHf75nPfTW7fTtikOkIW_9rr_qRe7H8ppusmtr-13_Sr56OiLp_V1oc-e-qie_p51P7lEHRVxgLso9kb_uGPUrV25w7ZyfGv16I1XmVWLryIKbNK8acBV_iIfZ7u2PHsJ8uoZdLApnI2Bkx4lZ2puZ38OxDN_YMvrJP_fWfuZGJ_qfP2IXV1HprgLO9nvpaf-LL44-GVwpHl19qvodtGIzpe8fj-2__pXB0dWc3_fnM9v4bVaOdnf75anYvNEJG389WxIsYO2J0eiYiRgxff4mo0vzT_kP7T1-0V-n4pjOmb8Hzz32AUaMW4PbbZ-P-_56OSRPXptPUgP9OphjR5559BgX5S_sI40r2fKDb86Ervo1hK_4R3534tQHA6PZtffXV7GY3wpQdj7__RlBIXqSv2auBIAaT1h-tP1p_tH9GZxBsKdoz4B3ObA1w--79nl_RiJ4PyniIz0jS-iZ9GgjrxVezm6kI2UCPyND4iEHoiwwCrV_KcKAMh74dYab5ufjmJ-fJcSivqsmWPzhgn1vfcAq__PXUnq2xtcqAaL-nDCfCV_0XXzFndxQzFPKSERx6T_IgfaD1QPaA7CHtB7QfEh4gPEB4gPAA4QHCA_0bDwhnV0asnE2N3pM8SB9oPSgdIHtA9oDsAdkDsgdSB8gekj0ke0j2kOxh_7KHwtmliEX_jljQ_NH8EQNFDBQxUMRA0X5OeIbwAOEBwgOEBwgPuPGAK42ZIpYUsaSIJUUsKWLZvyKWNF80X8Q4EuNK-I3wG-E3wm-EB8x4gGp2qUaZarapZp1q9inDhTJ86MwKOrOD8ADhAcIDhAcIDww4PEA1u1SDQzVIVLNONft0ZoGtA8QQEUNEDBExRMQQUcYIZYxQxshAwQP_D1qk899cHOG9AAAAAElFTkSuQmCC
-----------------------------265001916915724
Content-Disposition: form-data; name="filename"

filename.bmp
-----------------------------265001916915724
Content-Disposition: form-data; name="num"

10
-----------------------------265001916915724
Content-Disposition: form-data; name="hl"

de
-----------------------------265001916915724
Content-Disposition: form-data; name="bih"

976
-----------------------------265001916915724
Content-Disposition: form-data; name="biw"

1920
-----------------------------265001916915724-- 
```

我完全不知道如何在 C# 中做到这一点......有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-08T05:21:24.577

使用 c# 你可以使用 HttpClient 来做 Post Multi-part Form Data。

下面是我尝试并为我工作的代码片段..

试试看！！

```
using (var client = new HttpClient())
{
  //client.DefaultRequestHeaders.Add("User-Agent", "CBS Brightcove API Service");
  string authorization = GenerateBase64();
  client.DefaultRequestHeaders.Add("Authorization", authorization);

  using (var content = new MultipartFormDataContent())
  {

    string fileName = Path.GetFileName(textBox1.Text);

    //Content-Disposition: form-data; name="json"
    var stringContent = new StringContent(InstancePropertyObject);
    stringContent.Headers.Remove("Content-Type");
    stringContent.Headers.Add("Content-Type", "application/json");
    stringContent.Headers.Add("Content-Disposition", "form-data; name=\"instance\"");
    content.Add(stringContent, "instance");

    var fileContent = new ByteArrayContent(filecontent);
    fileContent.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
    {
      FileName = fileName
    };
    content.Add(fileContent);

    var result = client.PostAsync(targetURL, content).Result;
    Console.Read();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:49:36.350

您可以使用[WebClient 的上传文件方法](http://msdn.microsoft.com/en-us/library/36s52zhs.aspx)。您可以使用[headers 属性](http://msdn.microsoft.com/en-us/library/system.net.webclient.headers.aspx)来分配数据包的标头。WebClient 的一些注意事项是：[设置 timeout](https://stackoverflow.com/a/3052637/579026)，[解压缩 gzip 响应](https://stackoverflow.com/a/4914874/579026)，最后如果您打算同时发出多个请求，则[删除连接限制](https://stackoverflow.com/a/1269582/579026)

# android - Listview过滤和适配器

> ID：12761647
> 
> 赞同：0
> 
> 时间：2012-10-06T16:38:47.213
> 
> 标签：android, listview, view, filter, textwatcher

我有一个`ListView`并且我正在覆盖`getView`使用以下代码正确填充的方法。当我**不**使用`adapter.getFilter().filter(s)`它时，如果我使用它会导致代码后显示的错误。知道当我覆盖时如何启用过滤`getView`吗？

```
lv.setAdapter(new ArrayAdapter<String>(this,
android.R.layout.activity_list_item,stringArray) 
{   @Override
public View getView(int position, View convertView, ViewGroup parent)
    {View  row= super.getView(position, convertView, parent);
        View row=convertView;
if(position==5){
row = mLayoutInflater.inflate(R.layout.list_header, null);
final TextView sectionView = (TextView) row.findViewById(R.id.list_item_section_text);
sectionView.setText(myList.get(position));
} 
return row;
}
});

myFilter.addTextChangedListener(new TextWatcher() {
public void afterTextChanged(Editable s) {
}
public void beforeTextChanged(CharSequence s, int start, int count, int after) {
}
public void onTextChanged(CharSequence s, int start, int before, int count) {             
adapter.getFilter().filter(s);
}); 
```

> > 错误 java.lang.NullPointerException at com.android.testdatabase.Listsort$2.onTextChanged(Listsort.java:215) at android.widget.TextView.sendOnTextChanged(TextView.java:6131) at android.widget.TextView.handleTextChanged(TextView. java:6172) at android.widget.TextView$ChangeWatcher.onTextChanged(TextView.java:6316) at >android.text.SpannableStringBuilder.sendTextChange(SpannableStringBuilder.java:889) at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:第352章）
> 
> 在 android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:432) 在 android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:409) 在 android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:28) 在 >android.view .inputmethod.BaseInputConnection.replaceText(BaseInputConnection.java:583) 在 >android.view.inputmethod.BaseInputConnection.setComposingText(BaseInputConnection.java:384>) 在 >com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.j> ava:292) 在 >com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnection>Wrapper.java:73) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper。在 android.app.ActivityThread.main(ActivityThread.java: 循环(Looper.java:123)4627) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:521) 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit. java:868) 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 在 dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:29:30.870

您在此处引用变量“适配器”：

```
public void onTextChanged(CharSequence s, int start, int before, int count) {             
adapter.getFilter().filter(s);
}); 
```

我没有看到您实际上在任何时候将该适配器设置为等于您的适配器。我认为你得到一个空指针异常，因为这个变量没有设置。

# c# - 记住它的值的文本框

> ID：12761648
> 
> 赞同：-3
> 
> 时间：2012-10-06T16:38:48.537
> 
> 标签：c#

我有个问题。我正在 Windows 8 上制作一个带有文本框的应用程序。我希望文本框在我关闭应用程序时记住它的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:40:53.480

对此有很多可能的解决方案，

*   一种是通过将值保存在数据库中或
*   通过将其保存在`Settings`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:42:17.290

你有几个选择：

*   [`Properties.Settings`](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)（和表格关闭使用`Save`）
*   [Windows 注册表](http://www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C)
*   使用存储文件

但是你必须自己做一些工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T16:46:23.433

有关可能的解决方案，请参阅其他答案。这里我给你存储文件的伪代码。

创建一个在应用程序启动时调用的回调，然后在它关闭时调用。

当它启动时，加载您的文件，在一个字符串中获取包括 \n 在内的所有文本，并将其设置为文本。

当它关闭时，获取包含 \n 的框中的文本并将其写入文件。

这很简单。我更喜欢这里的存储文件方法，因为：

*   Properties.Settings 有点矫枉过正，尽管它是一个可行的选择。
*   Windows 注册表可以工作，但它不会是跨平台的（你可能不关心这一点，但确保你的应用程序**可以**移植总是一个好主意，以防它成功）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T16:56:11.810

您可以使用该方法将值保存到文件中。

这是一个非常丑陋的例子，请帮助您入门：

```
 using System;
    using System.IO;

    namespace ConsoleApplication1
    {
        class Program
        {
            static void Main(string[] args)
            {
                Double val;
                val = LoadDoubleValue();
                Console.WriteLine("Previous Value was: " + val);
                Console.Write("Please enter Value for next startup: ");
                string input = Console.ReadLine();
                if (Double.TryParse(input, out val))
                {
                    SaveDoubleValue(val);
                }

            }

            static Double LoadDoubleValue()
            {
                Double ret = 0;
                if(File.Exists("save.dat")){
                    if (!Double.TryParse(File.ReadAllLines("save.dat")[0], out ret))
                    {
                        ret = 15;
                    }
                }else{
                    ret = 15;
                }
                return ret;
            }

            static void SaveDoubleValue(Double val)
            {
                File.WriteAllLines("save.dat", new string[] { val.ToString() });
            }

        }
    } 
```

# c - 编译器优化：C 中非指针函数参数的 const

> ID：12761651
> 
> 赞同：4
> 
> 时间：2012-10-06T16:39:03.410
> 
> 标签：c, compiler-construction, constants, compiler-optimization

现代编译器可以在看到`const`. **但是，我从未见过 C 标准库将`const`其用于非指针参数。**例如`memcmp()`就是这样的一个例子。它有 2 个`const void *`参数，但它的第三个参数是`size_t`.

为什么标准库（和其他库）是这样设计的？为什么我看不到现代代码`const size_t`？`const int`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T16:51:09.920

C 使用按值调用。将函数参数标记为一点对编译器没有帮助`const`（请注意，没有任何参数`memcmp()`is `const`。指针参数也可以声明`const`，您可以建议它们应该是：`int memcmp(const void * const s1, const void * const s2, size_t const n);`。但它们不是）。

它不能帮助编译器标记函数参数的原因`const`是，从函数的角度来看，函数参数只是一个局部变量。只要函数不获取其地址，编译器就很容易看出该变量从未被修改过。

相反，作为原型 ( ) 一部分的`const`修饰符是其契约的一部分：它们表示该函数不会修改指向的数据。修饰符永远不会以这种方式用于参数本身，因为调用者不关心函数是否修改其参数：它们只是副本（再次因为 C 使用按值调用）。`memcmp()``const void *s1``const`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T17:00:25.397

那些`const`s 意味着不同的东西。在

```
int memcmp ( const void * ptr1, const void * ptr2, size_t num ); 
```

`const void * ptr1`表示`memcmp`将被`ptr1`视为*指向常量数据*并且不会修改它；同样对于`const void * ptr2`. 因此，调用者知道存储的值不会改变并且可以进行相应的优化。在像这样的函数调用中

```
int result = memcmp(ptr1, ptr2, num); 
```

变量`ptr1`、`ptr2`和`num`被*复制*到函数中。 `memcmp`不承诺不对其进行调整；它只承诺不调整指针指向的内容。实际上，如果证明有效，它可能会增加/减少任何复制的变量，以便逐步遍历数组。如果它想承诺不更改其中任何一个，则声明将是：

```
int memcmp ( const void *const ptr1, const void *const ptr2, const size_t num ); 
```

对于简单的数据类型（如指针和整数），通过这种方式可以获得很少（如果有的话）优化，并且这个函数（和其他）的原始说明符显然没有理由阻止实现在偶然情况下修改变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T16:53:40.797

主要原因是库的一致性。`size_t`将参数更改为 a`const size_t`将需要确实修改要重写的大小的库。并非库的所有实现都需要使用相同的算法。这是现有库函数没有被适配的主要原因。

新的库函数通常是有目的地使用非`const`参数创建的，因此某些机器相关的实现可以使用可修改的参数。

例如，英特尔 C++ 编译器版本实际上在执行期间对参数进行`memcmp`倒计时。`length`其他一些实现可能不会这样做。

# javascript - 在jquery中的下拉列表中排序

> ID：12761654
> 
> 赞同：0
> 
> 时间：2012-10-06T16:39:11.440
> 
> 标签：javascript, jquery

我对如何在 jquery 的下拉列表中应用排序有点困惑

例如苹果、猫、卡车、苹果、猫、卡车

它应该像在下拉列表中......苹果苹果猫猫卡车卡车

如何在 jquery 中实现这一点，以便它也可以看到大写和小写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:47:07.027

在自定义排序方法中降低数组项的大小写，如下[jsfiddle](http://jsfiddle.net/7AMsf/1/)

```
var arr= [  "apple","cat","truck","APPLE","CAT","TRUCK"];

arr.sort(sort);
function sort(a, b){

   if(a.toLowerCase() > b.toLowerCase()) return 1;
       if(a.toLowerCase() < b.toLowerCase()) return -1;
    return 0;
} 
```

# android - 如何使用 Android 色板

> ID：12761655
> 
> 赞同：31
> 
> 时间：2012-10-06T16:39:24.733
> 
> 标签：android, colors, material-design

Android 开发者网站的设计页面有一个关于颜色的类别。[颜色 | 安卓开发者](http://developer.android.com/design/style/color.html)

有好看的颜色，他们很感激地提供了颜色样本的下载链接。我不知道如何使用它们。下载的 .zip 包含以下文件：

*   Android-ics.aco
*   安卓ics.ase
*   安卓ics.gpl
*   通知.txt
*   值.txt

有人知道如何使用这些文件吗？我想我需要一个程序来提取颜色值？

编辑：好的，它看起来像是一个 Adob​​e Color 套件文件。有人知道使用这些文件的免费程序吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-07-30T01:53:22.797

如果您希望跳过添加色板，我创建了一个包含以下所有值的 XML。根据[这个](http://developer.android.com/design/style/color.html#palette)页面，“01”是最暗的，“14”是最亮的。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

<color name="blue01">#0099CC</color>
<color name="blue02">#079DD0</color>
<color name="blue03">#0FA1D3</color>
<color name="blue04">#16A5D7</color>
<color name="blue05">#1DA9DA</color>
<color name="blue06">#24ADDE</color>
<color name="blue07">#2CB1E1</color>
<color name="blue08">#33B5E5</color>
<color name="blue09">#50C0E9</color>
<color name="blue10">#6DCAEC</color>
<color name="blue11">#8AD5F0</color>
<color name="blue12">#A8DFF4</color>
<color name="blue13">#C5EAF8</color>
<color name="blue14">#E2F4FB</color>

<color name="purple01">#9933CC</color>
<color name="purple02">#A041D0</color>
<color name="purple03">#A750D3</color>
<color name="purple04">#AC59D6</color>
<color name="purple05">#B368D9</color>
<color name="purple06">#BA75DC</color>
<color name="purple07">#C182E0</color>
<color name="purple08">#C58BE2</color>
<color name="purple09">#CB97E5</color>
<color name="purple10">#CF9FE7</color>
<color name="purple11">#D6ADEB</color>
<color name="purple12">#DDBCEE</color>
<color name="purple13">#E5CAF2</color>
<color name="purple14">#F5EAFA</color>

<color name="green01">#669900</color>
<color name="green02">#6DA000</color>
<color name="green03">#75A800</color>
<color name="green04">#7CAF00</color>
<color name="green05">#83B600</color>
<color name="green06">#8ABD00</color>
<color name="green07">#92C500</color>
<color name="green08">#99CC00</color>
<color name="green09">#A8D324</color>
<color name="green10">#B6DB49</color>
<color name="green11">#C5E26D</color>
<color name="green12">#D3E992</color>
<color name="green13">#E2F0B6</color>
<color name="green14">#F0F8DB</color>

<color name="orange01">#FF8A00</color>
<color name="orange02">#FF9105</color>
<color name="orange03">#FF9909</color>
<color name="orange04">#FFA00E</color>
<color name="orange05">#FFA713</color>
<color name="orange06">#FFAE18</color>
<color name="orange07">#FFB61C</color>
<color name="orange08">#FFBD21</color>
<color name="orange09">#FFC641</color>
<color name="orange10">#FFD060</color>
<color name="orange11">#FFD980</color>
<color name="orange12">#FFE3A0</color>
<color name="orange13">#FFECC0</color>
<color name="orange14">#FFF6DF</color>

<color name="red01">#CC0000</color>
<color name="red02">#D30A0A</color>
<color name="red03">#DB1313</color>
<color name="red04">#E21D1D</color>
<color name="red05">#E92727</color>
<color name="red06">#F03131</color>
<color name="red07">#F83A3A</color>
<color name="red08">#FF4444</color>
<color name="red09">#FF5F5F</color>
<color name="red10">#FF7979</color>
<color name="red11">#FF9494</color>
<color name="red12">#FFAFAF</color>
<color name="red13">#FFCACA</color>
<color name="red14">#FFE4E4</color>

</resources> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-06T16:55:36.903

aco 是 adobe photoshop 格式[http://www.nomodes.com/aco.html](http://www.nomodes.com/aco.html)

gpl 是 gimp 格式（gimp 是免费的，也可以打开 aco [http://www.gimp.org/](http://www.gimp.org/)）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-06T17:02:37.357

或者，您可以使用任何颜色选择器程序，例如[Pixeur](http://www.veign.com/application.php?appid=107)，它会显示光标下任何颜色的 RGB 值

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-08-29T19:36:20.963

这些是色样文件

android-ics.aco - 适用于 photoshop android-ics.ase - 适用于插画家 android-ics.gpl - 适用于 gimp

用于 Photoshop 方法 1：

1.  打开 Photoshop
2.  转到 Windows .. 色板
3.  在色板面板中（单击右上角的小菜单图标）
4.  从下拉菜单中选择加载样本
5.  选择文件 android-ics.aco
6.  选择追加（如果您想将 android 颜色添加到样本中的当前颜色集或替换为仅使用 android 颜色

方法 2： 1\. 在 Windows 上的 Program Files 或 Mac 上的 Applications 中打开 Adob​​e Photoshop 文件夹 2\. 转到 Presets 文件夹，在找到文件夹 Color Swatches 3\. 将文件 android-ics.aco 复制到 color swatches 文件夹中 4\. 现在启动 Photoshop 5\. 转到 Windows .. 色板 6\. 使用色板面板右侧的小菜单 7\. 您将在菜单中看到 Android ICS 8\. 选择加载色板

如果您使用 Illustrator 或 Gimp，您可以类似地加载色板文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-25T17:30:33.463

*通过选择不同深浅的基色，色板*是保持整个应用程序*颜色一致性的好方法。*我正在使用颜色选择器工具手动生成阴影。但这些调色板提供预先选择的色调，以简化整个颜色挑选过程！*.aco*文件可以使用 Adob​​e Photoshop 加载。

一个很酷且易于使用的 Windows 工具是[Instant Eyedropper](http://instant-eyedropper.com/)

对于 Mac 使用**数字色度计**（内置）

![在此处输入图像描述](../Images/f34d410bb33584da0bdb277480493bd6.png)

这是另一个很棒的在线工具，可以生成特定颜色的不同阴影（此处未提及），以防有人想查看：[HSL Color Picker](http://hslpicker.com)

这是另一个作为 Google Chrome 和 Chromium 扩展的工具：[滴管](https://chrome.google.com/webstore/detail/eye-dropper/hmdcmlfkchdmnmnmheododdhjedfccka?hl=en)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-24T07:07:47.480

加上我的 5 美分价值

```
 <?xml version="1.0" encoding="utf-8"?>
<resources>

<color name="red_50">#ffebee</color>
<color name="red_100">#ffcdd2</color>
<color name="red_200">#ef9a9a</color>
<color name="red_300">#e57373</color>
<color name="red_400">#ef5350</color>
<color name="red_500">#f44336</color>
<color name="red_600">#e53935</color>
<color name="red_700">#d32f2f</color>
<color name="red_800">#c62828</color>
<color name="red_900">#b71c1c</color>
<color name="red_a100">#ff8a80</color>
<color name="red_a200">#ff5252</color>
<color name="red_a400">#ff1744</color>
<color name="red_a700">#d50000</color>

<color name="pink_50">#fce4ec</color>
<color name="pink_100">#f8bbd0</color>
<color name="pink_200">#f48fb1</color>
<color name="pink_300">#f06292</color>
<color name="pink_400">#ec407a</color>
<color name="pink_500">#e91e63</color>
<color name="pink_600">#d81b60</color>
<color name="pink_700">#c2185b</color>
<color name="pink_800">#ad1457</color>
<color name="pink_900">#880e4f</color>
<color name="pink_a100">#ff80ab</color>
<color name="pink_a200">#ff4081</color>
<color name="pink_a400">#f50057</color>
<color name="pink_a700">#c51162</color>

<color name="purple_50">#f3e5f5</color>
<color name="purple_100">#e1bee7</color>
<color name="purple_200">#ce93d8</color>
<color name="purple_300">#ba68c8</color>
<color name="purple_400">#ab47bc</color>
<color name="purple_500">#9c27b0</color>
<color name="purple_600">#8e24aa</color>
<color name="purple_700">#7b1fa2</color>
<color name="purple_800">#6a1b9a</color>
<color name="purple_900">#4a148c</color>
<color name="purple_a100">#ea80fc</color>
<color name="purple_a200">#e040fb</color>
<color name="purple_a400">#d500f9</color>
<color name="purple_a700">#aa00ff</color>

<color name="deep_purple_50">#ede7f6</color>
<color name="deep_purple_100">#d1c4e9</color>
<color name="deep_purple_200">#b39ddb</color>
<color name="deep_purple_300">#9575cd</color>
<color name="deep_purple_400">#7e57c2</color>
<color name="deep_purple_500">#673ab7</color>
<color name="deep_purple_600">#5e35b1</color>
<color name="deep_purple_700">#512da8</color>
<color name="deep_purple_800">#4527a0</color>
<color name="deep_purple_900">#311b92</color>
<color name="deep_purple_a100">#b388ff</color>
<color name="deep_purple_a200">#7c4dff</color>
<color name="deep_purple_a400">#651fff</color>
<color name="deep_purple_a700">#6200ea</color>

<color name="indigo_50">#e8eaf6</color>
<color name="indigo_100">#c5cae9</color>
<color name="indigo_200">#9fa8da</color>
<color name="indigo_300">#7986cb</color>
<color name="indigo_400">#5c6bc0</color>
<color name="indigo_500">#3f51b5</color>
<color name="indigo_600">#3949ab</color>
<color name="indigo_700">#303f9f</color>
<color name="indigo_800">#283593</color>
<color name="indigo_900">#1a237e</color>
<color name="indigo_a100">#8c9eff</color>
<color name="indigo_a200">#536dfe</color>
<color name="indigo_a400">#3d5afe</color>
<color name="indigo_a700">#304ffe</color>

<color name="blue_50">#e3f2fd</color>
<color name="blue_100">#bbdefb</color>
<color name="blue_200">#90caf9</color>
<color name="blue_300">#64b5f6</color>
<color name="blue_400">#42a5f5</color>
<color name="blue_500">#2196f3</color>
<color name="blue_600">#1e88e5</color>
<color name="blue_700">#1976d2</color>
<color name="blue_800">#1565c0</color>
<color name="blue_900">#0d47a1</color>
<color name="blue_a100">#82b1ff</color>
<color name="blue_a200">#448aff</color>
<color name="blue_a400">#2979ff</color>
<color name="blue_a700">#2962ff</color>

<color name="light_blue_50">#e1f5fe</color>
<color name="light_blue_100">#b3e5fc</color>
<color name="light_blue_200">#81d4fa</color>
<color name="light_blue_300">#4fc3f7</color>
<color name="light_blue_400">#29b6f6</color>
<color name="light_blue_500">#03a9f4</color>
<color name="light_blue_600">#039be5</color>
<color name="light_blue_700">#0288d1</color>
<color name="light_blue_800">#0277bd</color>
<color name="light_blue_900">#01579b</color>
<color name="light_blue_a100">#80d8ff</color>
<color name="light_blue_a200">#40c4ff</color>
<color name="light_blue_a400">#00b0ff</color>
<color name="light_blue_a700">#0091ea</color>

<color name="cyan_50">#e0f7fa</color>
<color name="cyan_100">#b2ebf2</color>
<color name="cyan_200">#80deea</color>
<color name="cyan_300">#4dd0e1</color>
<color name="cyan_400">#26c6da</color>
<color name="cyan_500">#00bcd4</color>
<color name="cyan_600">#00acc1</color>
<color name="cyan_700">#0097a7</color>
<color name="cyan_800">#00838f</color>
<color name="cyan_900">#006064</color>
<color name="cyan_a100">#84ffff</color>
<color name="cyan_a200">#18ffff</color>
<color name="cyan_a400">#00e5ff</color>
<color name="cyan_a700">#00b8d4</color>

<color name="teal_50">#e0f2f1</color>
<color name="teal_100">#b2dfdb</color>
<color name="teal_200">#80cbc4</color>
<color name="teal_300">#4db6ac</color>
<color name="teal_400">#26a69a</color>
<color name="teal_500">#009688</color>
<color name="teal_600">#00897b</color>
<color name="teal_700">#00796b</color>
<color name="teal_800">#00695c</color>
<color name="teal_900">#004d40</color>
<color name="teal_a100">#a7ffeb</color>
<color name="teal_a200">#64ffda</color>
<color name="teal_a400">#1de9b6</color>
<color name="teal_a700">#00bfa5</color>

<color name="green_50">#e8f5e9</color>
<color name="green_100">#c8e6c9</color>
<color name="green_200">#a5d6a7</color>
<color name="green_300">#81c784</color>
<color name="green_400">#66bb6a</color>
<color name="green_500">#4caf50</color>
<color name="green_600">#43a047</color>
<color name="green_700">#388e3c</color>
<color name="green_800">#2e7d32</color>
<color name="green_900">#1b5e20</color>
<color name="green_a100">#b9f6ca</color>
<color name="green_a200">#69f0ae</color>
<color name="green_a400">#00e676</color>
<color name="green_a700">#00c853</color>

<color name="light_green_50">#f1f8e9</color>
<color name="light_green_100">#dcedc8</color>
<color name="light_green_200">#c5e1a5</color>
<color name="light_green_300">#aed581</color>
<color name="light_green_400">#9ccc65</color>
<color name="light_green_500">#8bc34a</color>
<color name="light_green_600">#7cb342</color>
<color name="light_green_700">#689f38</color>
<color name="light_green_800">#558b2f</color>
<color name="light_green_900">#33691e</color>
<color name="light_green_a100">#ccff90</color>
<color name="light_green_a200">#b2ff59</color>
<color name="light_green_a400">#76ff03</color>
<color name="light_green_a700">#64dd17</color>

<color name="lime_50">#f9fbe7</color>
<color name="lime_100">#f0f4c3</color>
<color name="lime_200">#e6ee9c</color>
<color name="lime_300">#dce775</color>
<color name="lime_400">#d4e157</color>
<color name="lime_500">#cddc39</color>
<color name="lime_600">#c0ca33</color>
<color name="lime_700">#afb42b</color>
<color name="lime_800">#9e9d24</color>
<color name="lime_900">#827717</color>
<color name="lime_a100">#f4ff81</color>
<color name="lime_a200">#eeff41</color>
<color name="lime_a400">#c6ff00</color>
<color name="lime_a700">#aeea00</color>

<color name="yellow_50">#fffde7</color>
<color name="yellow_100">#fff9c4</color>
<color name="yellow_200">#fff59d</color>
<color name="yellow_300">#fff176</color>
<color name="yellow_400">#ffee58</color>
<color name="yellow_500">#ffeb3b</color>
<color name="yellow_600">#fdd835</color>
<color name="yellow_700">#fbc02d</color>
<color name="yellow_800">#f9a825</color>
<color name="yellow_900">#f57f17</color>
<color name="yellow_a100">#ffff8d</color>
<color name="yellow_a200">#ffff00</color>
<color name="yellow_a400">#ffea00</color>
<color name="yellow_a700">#ffd600</color>

<color name="amber_50">#fff8e1</color>
<color name="amber_100">#ffecb3</color>
<color name="amber_200">#ffe082</color>
<color name="amber_300">#ffd54f</color>
<color name="amber_400">#ffca28</color>
<color name="amber_500">#ffc107</color>
<color name="amber_600">#ffb300</color>
<color name="amber_700">#ffa000</color>
<color name="amber_800">#ff8f00</color>
<color name="amber_900">#ff6f00</color>
<color name="amber_a100">#ffe57f</color>
<color name="amber_a200">#ffd740</color>
<color name="amber_a400">#ffc400</color>
<color name="amber_a700">#ffab00</color>

<color name="orange_50">#fff3e0</color>
<color name="orange_100">#ffe0b2</color>
<color name="orange_200">#ffcc80</color>
<color name="orange_300">#ffb74d</color>
<color name="orange_400">#ffa726</color>
<color name="orange_500">#ff9800</color>
<color name="orange_600">#fb8c00</color>
<color name="orange_700">#f57c00</color>
<color name="orange_800">#ef6c00</color>
<color name="orange_900">#e65100</color>
<color name="orange_a100">#ffd180</color>
<color name="orange_a200">#ffab40</color>
<color name="orange_a400">#ff9100</color>
<color name="orange_a700">#ff6d00</color>

<color name="deep_orange_50">#fbe9e7</color>
<color name="deep_orange_100">#ffccbc</color>
<color name="deep_orange_200">#ffab91</color>
<color name="deep_orange_300">#ff8a65</color>
<color name="deep_orange_400">#ff7043</color>
<color name="deep_orange_500">#ff5722</color>
<color name="deep_orange_600">#f4511e</color>
<color name="deep_orange_700">#e64a19</color>
<color name="deep_orange_800">#d84315</color>
<color name="deep_orange_900">#bf360c</color>
<color name="deep_orange_a100">#ff9e80</color>
<color name="deep_orange_a200">#ff6e40</color>
<color name="deep_orange_a400">#ff3d00</color>
<color name="deep_orange_a700">#dd2c00</color>

<color name="brown_50">#efebe9</color>
<color name="brown_100">#d7ccc8</color>
<color name="brown_200">#bcaaa4</color>
<color name="brown_300">#a1887f</color>
<color name="brown_400">#8d6e63</color>
<color name="brown_500">#795548</color>
<color name="brown_600">#6d4c41</color>
<color name="brown_700">#5d4037</color>
<color name="brown_800">#4e342e</color>
<color name="brown_900">#3e2723</color>

<color name="grey_50">#fafafa</color>
<color name="grey_100">#f5f5f5</color>
<color name="grey_200">#eeeeee</color>
<color name="grey_300">#e0e0e0</color>
<color name="grey_400">#bdbdbd</color>
<color name="grey_500">#9e9e9e</color>
<color name="grey_600">#757575</color>
<color name="grey_700">#616161</color>
<color name="grey_800">#424242</color>
<color name="grey_900">#212121</color>

<color name="blue_grey_50">#eceff1</color>
<color name="blue_grey_100">#cfd8dc</color>
<color name="blue_grey_200">#b0bec5</color>
<color name="blue_grey_300">#90a4ae</color>
<color name="blue_grey_400">#78909c</color>
<color name="blue_grey_500">#607d8b</color>
<color name="blue_grey_600">#546e7a</color>
<color name="blue_grey_700">#455a64</color>
<color name="blue_grey_800">#37474f</color>
<color name="blue_grey_900">#263238</color>

<color name="black">#000000</color>
<color name="white">#fffff</color>

</resource> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-17T13:01:55.163

我使用了一个 Firefox 插件 ColorZilla，它对我来说效果更好。

# android - 在 MapView 中覆盖 onTouchEvent

> ID：12761656
> 
> 赞同：0
> 
> 时间：2012-10-06T16:39:30.163
> 
> 标签：android, android-mapview, android-activity

我想在 scrollView 中使用 MapView 。这样做会导致您的地图出现滚动问题，当您想要滚动地图时，整个页面都会滚动。我在这里找到了解决这个问题的方法：[MapView inside a ScrollView?](https://stackoverflow.com/questions/6546108/mapview-inside-a-scrollview)
我创建了一个名为 myMapView 的类。这是它的代码：

```
package com.wikitude.example;

import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;

import com.google.android.maps.MapView;

public class myMapView extends MapView {

    public myMapView(Context context, String apiKey) {
        super(context, apiKey);
        // TODO Auto-generated constructor stub
    }

    public myMapView(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    }

    public myMapView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        int action = ev.getAction();
        switch (action) {
        case MotionEvent.ACTION_DOWN:
            // Disallow ScrollView to intercept touch events.
            this.getParent().requestDisallowInterceptTouchEvent(true);
            break;

        case MotionEvent.ACTION_UP:
            // Allow ScrollView to intercept touch events.
            this.getParent().requestDisallowInterceptTouchEvent(false);
            break;
        }

        // Handle MapView's touch events.
        super.onTouchEvent(ev);
        return false;
    }
} 
```

但是当我尝试像这样在我的 MapActivity 中使用它时：

```
myMapView myview = (myMapView) findViewById(R.id.themap); 
```

它抛出这个错误：
`Undable to start activity ComponentInfo{com.smtabatabaie.example/com.smtabatabaie.mainActivity}: java.lang.ClassCastException: com.google.android.maps.MapView`。
没发现问题出在哪里，好像一切正​​常。如果有人可以帮助我，我将不胜感激
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T07:56:57.910

这就是您收到 ClassCastException 的原因。在您声明自定义地图视图的 XML 文件中，您必须实际声明自定义地图视图的名称，因此在您的情况下它将是 myMapView。这是您的 XML 文件的样子：

```
<com.wikitude.example.myMapView   //This is where you're probably going wrong (so what I've posted is the right way to declare it)
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mapview"
android:layout_width="fill_parent" //Replace these with whatever width and height you need
android:layout_height="fill_parent"
android:clickable="true"
android:apiKey="Enter-your-key-here"
/> 
```

# c++ - 在cpp中读取fortran指数符号

> ID：12761658
> 
> 赞同：0
> 
> 时间：2012-10-06T16:39:31.907
> 
> 标签：c++, c, fortran, scanf

我有一个来自 fortran 程序的输出。看起来像：

```
 -0.218992624383943335E+001   0.141709629412732530E+001   0.798866756359534413E+000
  -0.333162729303917438E+001   0.544763361230827758E+001   0.352566739381167604E+001
  -0.633341755881933866E+000  -0.254058697110871812E+001  -0.712520767968274127E+000 
```

将这些数字读入 C 或 C++ 代码 (sscanf) 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:45:28.410

使用 C++ 流：

```
ifstream file("name");

double number;
file >> number; 
```

# android - 为什么我的 Android 应用程序在我更改方向时会崩溃？

> ID：12761660
> 
> 赞同：2
> 
> 时间：2012-10-06T16:39:32.877
> 
> 标签：android, xml, layout, orientation

我在我的一项活动中为不同的方向集成了不同的 xml 布局。在 Android 4.0 上，当我更改方向时一切都很好，但在 1.6 上它崩溃了。为什么？有什么解决办法吗？

这是我的日志猫：

```
 10-06 17:49:07.539: I/ActivityManager(51): Displayed activity com.xyz.android.test/.MainActivity: 4038 ms (total 4038 ms)
        10-06 17:49:17.139: I/WindowManager(51): onOrientationChanged, rotation changed to 1
        10-06 17:49:17.139: I/WindowManager(51): Setting rotation to 1, animFlags=0
        10-06 17:49:17.169: I/WindowManager(51): Config changed: { scale=1.0 imsi=0/0 loc=en_US touch=3 keys=1/1/2 nav=3 orien=2 layout=34}
        10-06 17:49:17.269: D/StatusBar(51): updateResources
        10-06 17:49:17.569: D/dalvikvm(255): GC freed 177 objects / 10496 bytes in 45ms
        10-06 17:49:18.009: D/dalvikvm(255): GC freed 65 objects / 2600 bytes in 42ms
        10-06 17:49:18.369: E/dalvikvm-heap(255): 589824-byte external allocation too large for this process.
        10-06 17:49:18.369: E/(255): VM won't let us allocate 589824 bytes
        10-06 17:49:18.369: D/AndroidRuntime(255): Shutting down VM
        10-06 17:49:18.379: W/dalvikvm(255): threadid=3: thread exiting with uncaught exception (group=0x4001aa28)
        10-06 17:49:18.379: E/AndroidRuntime(255): Uncaught handler: thread main exiting due to uncaught exception
        10-06 17:49:18.389: E/AndroidRuntime(255): android.view.InflateException: Binary XML file line #40: Error inflating class java.lang.reflect.Constructor
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.view.LayoutInflater.createView(LayoutInflater.java:512)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:562)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:617)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:620)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:313)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.app.Activity.setContentView(Activity.java:1620)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at com.xyz.android.test.MainActivity.onConfigurationChanged(MainActivity.java:55)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.app.ActivityThread.performConfigurationChanged(ActivityThread.java:3607)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.app.ActivityThread.handleConfigurationChanged(ActivityThread.java:3673)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1864)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.os.Handler.dispatchMessage(Handler.java:99)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.os.Looper.loop(Looper.java:123)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.app.ActivityThread.main(ActivityThread.java:4203)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at java.lang.reflect.Method.invokeNative(Native Method)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at java.lang.reflect.Method.invoke(Method.java:521)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at dalvik.system.NativeStart.main(Native Method)
        10-06 17:49:18.389: E/AndroidRuntime(255): Caused by: java.lang.reflect.InvocationTargetException
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.widget.ImageView.<init>(ImageView.java:105)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at java.lang.reflect.Constructor.constructNative(Native Method)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.view.LayoutInflater.createView(LayoutInflater.java:499)
        10-06 17:49:18.389: E/AndroidRuntime(255):  ... 21 more
        10-06 17:49:18.389: E/AndroidRuntime(255): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.graphics.Bitmap.nativeCreate(Native Method)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.graphics.Bitmap.createBitmap(Bitmap.java:435)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:340)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:476)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:322)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:688)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.content.res.Resources.loadDrawable(Resources.java:1710)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.content.res.Resources.getDrawable(Resources.java:585)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:146)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:779)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.graphics.drawable.Drawable.createFromXml(Drawable.java:720)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.content.res.Resources.loadDrawable(Resources.java:1695)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.content.res.TypedArray.getDrawable(TypedArray.java:548)
        10-06 17:49:18.389: E/AndroidRuntime(255):  at android.widget.ImageView.<init>(ImageView.java:115)
        10-06 17:49:18.389: E/AndroidRuntime(255):  ... 25 more
        10-06 17:49:18.409: I/Process(51): Sending signal. PID: 255 SIG: 3
        10-06 17:49:18.419: I/dalvikvm(255): threadid=7: reacting to signal 3
        10-06 17:49:18.419: E/dalvikvm(255): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
        10-06 17:49:19.139: W/WindowManager(51): Window freeze timeout expired.
        10-06 17:49:19.139: W/WindowManager(51): Force clearing orientation change: Window{43970380 com.xyz.android.test/com.xyz.android.test.MainActivity paused=false}
        10-06 17:49:21.219: D/dalvikvm(51): GC freed 1812 objects / 89840 bytes in 79ms
        10-06 17:49:22.279: W/SurfaceFlinger(51): timeout expired mFreezeDisplay=0, mFreezeCount=1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:51:03.607

关键线是这样的：

```
Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

它说你有一个比你有更多内存的位图。
如果你用模拟器测试它，可能你没有让它使用足够的内存。
否则，图像太大，您应该降低其质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:42:43.637

看起来你对 1.6 的 xml 布局有一些问题：

```
android.view.InflateException: Binary XML file line #40: 
```

第 40 行

# math - 左边没有抽象的应用是什么意思？

> ID：12761661
> 
> 赞同：0
> 
> 时间：2012-10-06T16:39:42.453
> 
> 标签：math, lambda-calculus

[Lambda 项](http://en.wikipedia.org/wiki/Lambda_calculus#Lambda_terms)可以是：

*   多变的
*   lambda 抽象（例如`\x.t`）
*   应用。如果`t`和`s`是[lambda 项](http://en.wikipedia.org/wiki/Lambda_calculus#Lambda_terms)，那么`ts`是一个应用程序。

因此，在左侧（例如`(\x.t)a`）具有抽象的应用程序看起来不错。它看起来像**函数调用**。但是当左侧部分是变量或其他应用程序时，应用程序意味着什么？是什么意思`ab`，`((\x.x)a)b`或者`a(\x.x)`如果`a`和`b`是变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:43:23.793

`((\x.x)b)c`是一个功能应用程序。这里适用`b`于`c`。

```
((\x.x)b)c
= bc 
```

`a(\x.y)`是一个函数应用程序，将函数`a`应用于它的唯一参数，它恰好是一个函数，即返回的函数`y`（一个自由变量）。

lamdba 演算的特点之一是可以轻松地将函数应用于函数，并且函数可以将其他函数作为参数。你的两个例子很好地展示了这两种情况。

**编辑**有（至少）两个版本的 lambda 演算：无类型和有类型。在您在这里使用的无类型演算中，任何东西都可以应用于任何东西。在类型化演算中存在不是函数的**基本类型**，例如命题类型和“个体”类型。所以你只能写`ab`如果类型`a`是一个函数类型，将类型映射`b`到某个东西。

# objective-c - 语言存储不正确

> ID：12761662
> 
> 赞同：0
> 
> 时间：2012-10-06T16:39:45.103
> 
> 标签：objective-c, ios

我正在做一个允许用户选择语言并在运行时更改它的应用程序。我在尝试存储所需语言时遇到问题。它在用户更改语言的同一执行期间正确运行，但在下一次执行中，它总是获得西班牙语语言（系统语言）。这是我用来存储语言的代码：

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if (sender.tag==1){

        [defaults setObject:[NSArray arrayWithObjects:@"ca",@"es", nil] forKey:@"AppleLanguages"];

    }else{

        [defaults setObject:[NSArray arrayWithObjects:@"es",@"ca", nil] forKey:@"AppleLanguages"];
    }

    [defaults synchronize]; 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:07:22.837

每次您的应用启动时，系统都会覆盖 AppleLanguages 的值。

一种解决方案是将您想要的语言存储在单独的 NSUserDefaults 条目中，并在每次应用启动时加载它们（将它们写入 AppleLanguages）。

希望这可以帮助

# java - 在java swings中切换/导航jpanels

> ID：12761664
> 
> 赞同：4
> 
> 时间：2012-10-06T16:39:47.823
> 
> 标签：java, swing, layout, jpanel

*   > 我在包“abc”中定义了一个 jframe。这个 jframe 也作为一个主类。
*   > 同一个包 'abc' 还包含 4 个 jpanel(panel1,panel2,panel3,panel4) 定义在不同的 java 类中。

当用户点击不同的按钮时，应该如何从主 jframe 类调用/显示这些不同的 jpanel？如果我有 40-50 个这样的 jpanels 怎么办。从主类切换这些面板的最有效方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T17:57:08.687

这是一个非常简单的示例，它使用`next()`一个按钮来更改面板。

```
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import java.awt.CardLayout;

import java.awt.Color;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;

import java.awt.event.ActionListener;

import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.border.Border;

public class TestCards extends JFrame {

    private final CardLayout cl = new CardLayout();
    private final JPanel cards = new JPanel(cl);
    private final Border border = BorderFactory.createEmptyBorder(60, 60, 60, 60);

    public TestCards() {

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new BoxLayout(contentPane, BoxLayout.Y_AXIS));
        contentPane.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);

        JPanel panel1 = new JPanel(new GridBagLayout());
        panel1.setBorder(border);
        panel1.setBackground(Color.RED);
        panel1.add(new JLabel("Card 1"));
        cards.add(panel1, "First Panel");

        JPanel panel2 = new JPanel(new GridBagLayout());
        panel2.setBorder(border);
        panel2.setBackground(Color.GREEN);
        panel2.add(new JLabel("Card 2"));
        cards.add(panel2, "Second Panel");

        JPanel panel3 = new JPanel(new GridBagLayout());
        panel3.setBorder(border);
        panel3.setBackground(Color.BLUE);
        panel3.add(new JLabel("Card 3"));
        cards.add(panel3, "Third Panel");

        JButton controlButton = new JButton("Switch");
        controlButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                cl.next(cards);
            }
        });
        JPanel controlPanel = new JPanel();
        controlPanel.setBackground(Color.LIGHT_GRAY);
        controlPanel.add(controlButton);

        contentPane.add(cards);
        contentPane.add(controlPanel);

        cl.show(cards, "First Panel");
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                TestCards frame = new TestCards();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

另一种选择（在许多中）是使用 3 个按钮，每个按钮显示一个特定的面板（通过使用`show`代替`next`）。

有关更多信息，请参阅[此](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T17:56:24.373

CardLayout`previous`和`next`方法可用于在卡片组件中分别向前和向后导航。为了更容易非连续地导航组件，您可以将卡片名称放在一个`String`数组中：

```
private static final String[] CARD_NAMES = { "name_2996062106101", ... }; 
```

然后，要显示特定的`cardIndex`，您可以简单地使用：

```
CardLayout layout = (CardLayout) contentPane.getLayout();
layout.show(contentPane, CARD_NAMES[cardIndex]); 
```

有关更多信息，请参阅**[如何使用 CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)**。

# winapi - 为什么插件失败时 Chrome 不挂起？

> ID：12761666
> 
> 赞同：2
> 
> 时间：2012-10-06T16:39:58.977
> 
> 标签：winapi

我了解 Chrome 使用 re-parenting 是为了让 Flash 等子插件从不同的进程渲染。

我已经对此进行了试验，并且使用 SetParent Win32 调用使其正常工作。

但是，当我强制子 GUI 线程阻塞时，只要鼠标移到子进程拥有的窗口区域上，父进程也会挂起。大概这是因为父应用程序中的消息循环正在向下调用子应用程序并且它从不响应。Chrome 如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T18:22:56.527

Flash 使用了重新育儿技巧。它有自己的 .exe 并呈现到自己的窗口。这并不能防止挂起，当所有者不发送消息时，从该窗口发送给其所有者的任何消息都会被阻止。正如你所发现的。

浏览器使用了不同的技巧。它们为每个选项卡创建一个不可见的辅助进程并呈现到内存设备上下文。并将结果传送到他们的桌面窗口。任何输入消息都会被传送回该过程。这使它们免受崩溃并在该进程中挂起，杀死该帮助进程使浏览器继续运行。做自己更难。

# android - 将android项目上传到eclipse

> ID：12761667
> 
> 赞同：0
> 
> 时间：2012-10-06T16:40:12.203
> 
> 标签：android, eclipse, upload, project

对不起朋友，我对 Android 编程很陌生。我正在尝试上传我在另一台计算机上工作的项目。我以前做过，它有效，但现在它给了我上传，但是当我运行它时它崩溃了。我是这样做的：文件导入现有项目到工作区或文件导入现有的安卓代码

# javascript - facebook如何改变地址栏

> ID：12761670
> 
> 赞同：0
> 
> 时间：2012-10-06T16:40:33.143
> 
> 标签：javascript, facebook

> **可能重复：**
> [HTML：在不重新加载页面的情况下更改 URL？](http://facebook.stackoverflow.com/questions/5525636/html-changing-the-url-without-reloading-the-page)

Facebook 可以通过 javascript 操作 url bar 而不访问页面，

例如，去 facebook 主页只需打开一张照片，您会看到您的 url 将更改为类似

```
photo.php?fbid=4123.. 
```

他们通过ajax加载页面但可以更改地址栏？

我不谈论 url 哈希 #photo/id_123414

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:43:11.147

这是通过 javascript 的 history.pushState() 完成的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:47:20.447

history.pushState： [https ://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#Adding_and_modifying_history_entries](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#Adding_and_modifying_history_entries)

# android - 根据样式更改操作栏菜单图标

> ID：12761677
> 
> 赞同：6
> 
> 时间：2012-10-06T16:40:59.070
> 
> 标签：android, styles, android-actionbar, actionbarsherlock

我想`ActionBar`根据我使用的风格（深色或浅色）使用不同的图标。我无法弄清楚如何，这是我尝试过的：

```
<style name="AppThemeDark" parent="Theme.Sherlock.ForceOverflow">
    <item name="android:actionButtonStyle">@style/customActionButtonStyleDark</item>
    <item name="actionButtonStyle">@style/customActionButtonStyleDark</item>
</style>

<style name="AppThemeLight" parent="Theme.Sherlock.Light.ForceOverflow">
    <item name="android:actionButtonStyle">@style/customActionButtonStyleLight</item>
    <item name="actionButtonStyle">@style/customActionButtonStyleLight</item>
</style>

<style name="customActionButtonStyleDark" >
    <item name="@drawable/action_search">@drawable/action_search</item>
</style>

<style name="customActionButtonStyleLight" >
    <item name="@drawable/action_search">@drawable/action_search_light</item>
</style> 
```

我也尝试`<item name="@drawable/action_search">@drawable/action_search</item>`直接插入到主题样式中，但没有任何效果。
有什么想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-30T16:14:43.390

即使您找到了解决方法，也可能对其他人有所帮助。我在 xml 中找到了一种简单的方法（logcat 的答案是指什么）。我使用的技巧是为我的菜单/操作栏图标创建自定义属性。每个菜单项图标必须有一个属性。

您需要`attrs.xml`在您的`values`文件夹中创建，并添加您的自定义属性。将每个属性视为您的主题/样式设置的常量，然后您的样式/视图可以使用这些内容来设置属性。

```
<declare-styleable name="customAttrs">
    <attr name="customSearchIcon" format="reference" />
</declare-styleable> 
```

在您`styles.xml`的`values`文件夹中，让您的主题/样式将您的自定义图标属性设置为`drawable`引用。

```
<style name="AppThemeDark" parent="Theme.Sherlock.ForceOverflow">
    <item name="customSearchIcon">@drawable/action_search</item>
</style>

<style name="AppThemeLight" parent="Theme.Sherlock.Light.ForceOverflow">
    <item name="customSearchIcon">@drawable/action_search_light</item>
</style> 
```

最后，在您`[menu_name].xml`的`menu`文件夹中，让您的菜单项将其图标设置为匹配的自定义图标属性。

```
<item
    android:id="@+id/menuitem_search" 
    android:icon="?attr/customSearchIcon"/> 
```

现在，根据设置的主题，菜单项的图标将发生变化。此外，这允许您仍然拥有 API 特定版本的可绘制对象（浅色和深色），使用资源标识符与您的`drawable`文件夹，因此您可以在 3.0 之前使用不同的菜单样式图标和 3.0+ 的操作栏样式图标。

另外，请记住在运行时（vs `AndroidManifest.xml`）设置主题时，必须在`setContentView()`调用`Activity`. 建议在更改`Activity`已创建的主题后重新启动您的活动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T17:12:32.147

我认为您没有获得主题:) 当您尝试这样做时：

```
<style name="customActionButtonStyleDark" >
    <item name="@drawable/action_search">@drawable/action_search</item>
</style> 
```

您正在尝试重载主题中名为“@drawable/action_search”的某些属性

我有坏消息要告诉你，我认为没有这样的。所以你可以去主题 Theme.Sherlock.ForceOverflow 和它的父母，看看你可以重载什么。

如果对您没有任何帮助，并且您想在主题中为不同的图标设置自定义属性，那就是不同的主题。您需要在 attrs.xml 中创建属性，将您的图标源指向这个新属性并在主题中定义属性值。对于每个不同的按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T17:29:08.140

解决了它，但放弃了尝试使用 XML，我现在以编程方式完成了它：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        SharedPreferences prefs = getSharedPreferences("app", 0);
        boolean isDark = "Dark".equals(prefs.getString("theme", "Dark"));

        com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.main, menu);

        // set Icons
        menu.findItem(R.id.menuitem_search).setIcon(isDark ? R.drawable.action_search : R.drawable.action_search_light);
        menu.findItem(R.id.menuitem_add).setIcon(isDark ? R.drawable.content_new : R.drawable.content_new_light);
        menu.findItem(R.id.menuitem_share).setIcon(isDark ? R.drawable.social_share : R.drawable.social_share_light);
        return true;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-29T05:07:58.237

请参阅`res/xml/ic_search.xml`博[文 AppCompat — 矢量时代 (Chris Barnes)](https://medium.com/@chrisbanes/appcompat-v23-2-age-of-the-vectors-91cbafa87c88)

注意参考`?attr/colorControlNormal`

```
<vector xmlns:android="..."
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24.0"
    android:viewportHeight="24.0"
    android:tint="?attr/colorControlNormal">
    <path
        android:pathData="..."
        android:fillColor="@android:color/white"/>
</vector> 
```

# c# - 如何删除/更改字符串的字体格式？

> ID：12761679
> 
> 赞同：0
> 
> 时间：2012-10-06T16:41:09.427
> 
> 标签：c#, asp.net, string, fonts

如何从数据库中并使用ckeditor保存的字符串中删除字体类型？例如：

```
<div style="font-family: Tahoma; color: Red;">
Foo FOooooo
</div> 
```

例如，我想将其删除或更改为 Verdana。

我知道我可以使用替换，但字体名称可以不同，我知道我可以使用子字符串方法。但是有什么简单的方法可以去除吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:49:21.340

有两种方法，最简单的方法，只需使用“简单”正则表达式删除完整的 div 样式

```
 private static Regex oClearHtmlScript = new Regex(@"<(.|\n)*?>", RegexOptions.Compiled);

 public static string StripHTML(string sHtmlKeimeo)
 {
     if (string.IsNullOrEmpty(sHtmlKeimeo))
         return string.Empty;   

     return oClearHtmlScript.Replace(sHtmlKeimeo, string.Empty);
 } 
```

困难的方法是，使用 Html Agility Pack（或任何其他类似的）来解析 html 并直接更改属性。

[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T05:49:50.710

试试这个简单的方法`regex`：

捕获`font-family`和`color`样式：

```
<div\s+style=\".*?font-family:(?<fontName>\s*[^;\"]*)?.*?color:(?<color>\s*[^;\"]*)? 
```

以及您的替换代码：

```
String inputStr = "<div style=\"font-family: Tahoma; color: Red;\">";

foreach(Match m in Regex.Matches(inputStr, "<div\\s+style=\\\".*?font-family:(?<fontName>\\s*[^;\\\"]*)?.*?color:(?<color>\\s*[^;\\\"]*)?"))
{
    inputStr = inputStr.Replace(m.Groups["fontName"].Value, "Vernada").Replace(m.Groups["color"].Value, "Blue");
} 
```

解释：

> ***`(?<name> subexpression)`***
> 
> 将匹配的子表达式捕获到命名组中。

# objective-c - 数据库连接代码、Xcode 4 和 Sqlite3 中的错误

> ID：12761684
> 
> 赞同：1
> 
> 时间：2012-10-06T16:42:16.400
> 
> 标签：objective-c, xcode4, sqlite

我不断收到一条错误消息，上面写着“调用类型 NSString 不是函数或函数指针。我已经被困了好几天了。我知道我的问题在哪里吗？

```
- (void)saveData
{

    sqlite3_stmt    *statement;
    const char *dbpath = [databasePath UTF8String];

    if (sqlite3_open(dbpath, &testdb1) == SQLITE_OK)
    {

        NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO TESTDB1"
                               (email, username, password, age) VALUES (\"%@\", \"%@\", \"%@\", \"%@\")",
                                email.text, username.text, password.text, age.integer];

        const char *insert_stmt = [insertSQL UTF8String];
        sqlite3_prepare_v2(testdb1, insert_stmt, -1, &statement, NULL);

        if (sqlite3_step(statement) == SQLITE_DONE)
        {
           status.text = @"User added";
           email.text = @"";
           username.text = @"";
           password.text = @"";
           age.text = @"";
        } else {
           status.text = @"Failed to add user";
        }
          sqlite3_finalize(statement);
          sqlite3_close(testdb1);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:47:30.650

```
NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO TESTDB1"
                   (email, username, password, age) 
```

您过早地关闭引号；如果你仔细观察这个表达式，你会注意到

```
@"INSERT INTO TESTDB" (email, username, password, age) 
```

所以编译器看到你正在尝试将 NSString 作为函数调用。将格式字符串文字更改为

```
NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO TESTDB1 (email, username, password, age) VALUES (\"%@\", \"%@\", \"%@\", \"%@\")",
                    email.text, username.text, password.text, age.integer]; 
```

你应该可以走了。

P.s.：在发布您的问题之前，请务必查看**预览**- 它的格式非常糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:48:22.593

您在 stringWithFormat 调用的第二行开头缺少引号。

# java - 单身人士被回收

> ID：12761689
> 
> 赞同：0
> 
> 时间：2012-10-06T16:42:38.817
> 
> 标签：java, android, singleton

我在 Android 中有一个用于从 xml 加载的数据的单例。它有时会被回收，我不明白为什么。据我所知，单例应该存在于应用程序进程的整个生命周期中。这是我的单身人士：

```
public class DataLib {

    public static CategoryList categories = new CategoryList();
    public static RegionList regions = new RegionList();
    public static CompanyTypeList types = new CompanyTypeList();
    public static SearchData searchData = new SearchData();
    public static CompaniesList companies = new CompaniesList();

    private static RegionData currentRegion;

    private static final DataLib INSTANCE = new DataLib();

    protected DataLib() {
    }

    public static DataLib getInstance() {
        return INSTANCE;
    }

    public static void loadData() {
        loadCategories();
        loadRegions();
        loadTypes();
    }

    /* ... some more static functions are here ...*/
} 
```

如您所见，它不是由任何活动直接实例化，而是由流程本身实例化。当应用程序启动时调用 DataLib.loadData() 来加载数据 = 加载数据时将结束的活动。

我无法确定是什么触发了回收 - 有时应用程序需要在后台停留更长时间，有时需要几分钟。我正在记录 DataLib 类的指针，所以我可以说它确实改变了 = 被回收了。

有任何想法吗？谢谢。

**编辑：**答案部分在标记的答案+评论中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:51:29.693

> 它有时会被回收，我不明白为什么。

Android 将“不时”终止您的进程。

> 有时应用程序需要在后台停留更长时间，有时需要几分钟

操作系统和用户可以随时摆脱您的进程。单例和其他静态数据成员需要作为持久数据的缓存，使用后台线程等加载该数据。

如果您正在后台执行特定的工作，您应该使用 a`Service`来向操作系统表明您正在后台独立于任何活动进行工作。这不会阻止 Android 终止您的进程（例如，应用户请求），但它会降低自行终止您的进程的可能性（即，操作系统将倾向于选择其他进程）。

# android - 在eclipse中重命名项目

> ID：12761701
> 
> 赞同：-1
> 
> 时间：2012-10-06T16:43:54.823
> 
> 标签：android, eclipse

在 Eclipse 中从现有源代码创建项目时，项目名称显示为

com.example.name.activityName

我想将其更改为 Projectname

请在堆栈溢出或我的问题中分享与此相关的任何查询..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:47:02.187

包资源管理器

右键单击项目然后->重构->重命名

不要忘记保存您的工作

# sql - ASP.NET MVC 4 网站不允许 URL 查询生产服务器上的数据库

> ID：12761703
> 
> 赞同：0
> 
> 时间：2012-10-06T16:44:13.497
> 
> 标签：sql, asp.net-mvc, windows

这是我在使用 ASP.NET MVC 4 网站时遇到的最奇怪的问题之一。该网站在开发服务器上完美运行，当我最初将其部署到生产服务器时，它没有出现任何问题。我对其使用的存储过程进行了一些更改，并在生产服务器上升级了网站，但这就是我的问题开始的地方。它在开发服务器（VS 2012 for Web）上运行良好，但是当我在生产服务器（Windows Server 2008 R2（SE）和 SQL Server 2008 标准版）上运行它时，它拒绝允许我使用 URL 查询数据库带有名称值对。等式。[http://myexample.com/Home.aspx/Document?code=46](http://myexample.com/Home.aspx/Document?code=46)为什么会这样？我一无所知。顺便说一句，我检查了 MS SQL Server 中登录的安全性，而且它在我升级网站之前就可以工作。我想要它做的就是从数据库中获取一个 pdf 文档并将其下载到客户端工作站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:14:19.333

当您检查了所有角度，例如权限和代码中的逻辑，但问题仍然存在。重新启动数据库服务器实例。这可能只是解决问题。

# mysql - 创建视图，其中 SELECTid = VIEWrowID

> ID：12761706
> 
> 赞同：1
> 
> 时间：2012-10-06T16:44:21.810
> 
> 标签：mysql, select, view, where-clause

警告：含糊不清的问题会比比皆是，因为我对数据库深有了解。

我刚刚发现我需要使用视图作为 cronned update 语句的代理。我可以在某种程度上使视图正常工作，但是我遇到了行问题。

[这篇文章](https://stackoverflow.com/questions/12755925/update-table1-set-column1-sumtable2-table3-where-table2-id1-id1-where)帮助我完成了我需要的更新，但现在我知道视图可以在需要时而不是按 cron 计划运行更新，我如何根据视图的行 ID 或等效项设置视图的列值？

我有我需要的选择：

```
 SELECT SUM( table2.column1/ (

 SELECT table2constant
 FROM table3
 )
 FROM table2
 WHERE table2table1id = table1id 
```

table1id 是 table1 的 AI id 列。table2table1id 是对 table1id 的 PKd。我希望视图具有与 table2 一样的 table1id 列 PKd，并且视图需要表示每个不同的 table1id。

我敢肯定行话的方式，但希望你能看到我需要什么。

为清晰起见，将提供尽可能多的编辑。

提前谢谢了！

**编辑1**

我应该创建一个触发器来在插入到 table1 时创建视图吗？刚刚发现我需要/想要的物化？

**明晰**

我需要每个 table1.table1id 的总和值

**进步**

使用此代码，我从 table1 获取第一个 id，并且只获取总和。我需要每个 table1.id 的总和。

```
CREATE VIEW db1.sums as 

SELECT SUM( table2.column1/ (

 SELECT table2constant
 FROM table3
 ) as theSum, table1id
 FROM table1, table2
 WHERE table2.table2table1id = table1.table1id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:05:49.660

它实际上非常简单。这是一个如何做到这一点的例子。

```
SELECT SUM( table1.column / table2.column ), table1.*, table2.*
FROM table1, table2 
WHERE table1.id = table2.column_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T19:15:02.983

需要明确的是，我仍然不确定您要在这里完成什么，但如果您发布的内容有效，请尝试

```
SELECT table1.table1id,
    SUM( table2.collumn1 ) / (SELECT table2constant FROM table3 ) as theSum
 FROM table1, table2
 WHERE table2.table2table1id = table1.table1id GROUP BY table1.table1id 
```

`(SELECT table2constant FROM table3 )`如果它没有理由在数据库中（如果它没有更新），你可以用你的常量替换

# mysql - 没有唯一ID的mysql中的自动增量

> ID：12761707
> 
> 赞同：0
> 
> 时间：2012-10-06T16:44:22.513
> 
> 标签：mysql, mysqli

我有一个带有主 ID 和用户 ID 的表。每个用户 ID 都有一组自己唯一的主 ID，但多个用户 ID 可以有相同的主 ID。无论如何，无需执行 2 次查询就可以为特定用户增加主 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:59:12.150

如果你的意思是这样的：

```
User ID       Main ID
1             1
1             2
1             3
2             1
2             2
2             3 
```

然后，您将需要创建一个 INSERT 触发器，为该用户找到下一个 MainID 并存储它。

# html - 当我添加一个 left:0 div 我的 right:0 div 消失

> ID：12761709
> 
> 赞同：1
> 
> 时间：2012-10-06T16:44:44.580
> 
> 标签：html, position, absolute

我尝试在主 div 的两侧添加一些 div

```
#maindiv ( position:relative)

#borderright (
position: absolute;
background: red;
width: 3px;
height: 100%;
right: 0)

#borderleft(
position: absolute;
background: red;
width: 3px;
height: 100%;
left:0) 
```

现在当我做

```
 <div id="maindiv">
    <div id="borderright">
</div>
        <div id="rightborder">
</div>
    <div id="leftborder">
</div>

</div> 
```

如果我删除右侧显示的左侧 div，它们仅显示 1 个 div（左侧）...

我究竟做错了什么 ？

谢谢你的帮助 ：）

编辑：当我用 Chrome 查看 css 时，似乎 div id rightborder 样式为空，如果我自己在查看模式下拥有这些样式，它可以工作！？同样，如果我删除左 di（leftborder），rightborder 就会出现......很奇怪不是吗？

Edit2：最让我吃惊的是，当添加一个 div 时，它会删除另一个 div 的样式，当使用 chrome 检查时，我有：rightborder:()

# xslt - XML -> TXT 通过 XSLT

> ID：12761714
> 
> 赞同：0
> 
> 时间：2012-10-06T16:45:18.593
> 
> 标签：xslt

我开始从事一个项目，我在其中接收 XML 数据，必须将其转换为代表要执行的 python 的文本文件。

我遇到了这个：

[XML 转文本](http://www.cygwin.com/ml/docbook-apps/2001-q3/msg00141.html)

并想知道 XSLT 专家对此有何看法。任何反馈将不胜感激。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:28:57.240

**通过 XSLT 生成 python 脚本是完全可能的。**

`text`是方法（即格式）的选择之一[`xsl:output`](http://www.w3.org/TR/xslt20/#element-output)

您可以像这样在样式表中使用它：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" encoding="UTF-8" indent="yes"/>   

   <xsl:template match="/">
       <xsl:text>#!/usr/bin/env python&#xA;</xsl:text>
       <xsl:text># This program is a "Hello World" example&#xA;</xsl:text>
       <xsl:text>print 'Hello world!'</xsl:text>
   </xsl:template> 
</xsl:stylesheet> 
```

上述样式表生成以下 Python 脚本

```
#!/usr/bin/env python
# This program is a "Hello World" example
print 'Hello world!' 
```

# c - 在 C 中打印枚举映射映射

> ID：12761717
> 
> 赞同：0
> 
> 时间：2012-10-06T16:45:50.820
> 
> 标签：c, gcc, macros

我经常`enum`在 C 中使用数字数据访问数组元素，例如

```
#define KEYS_MAX 1
#define FIELD_MAX 2

enum {FIELD1=0, FIELD2};

double array[KEYS_MAX][FIELD_MAX];
array[1][FIELD1] = 1.0; array[1][FIELD2] = 2.0; 
```

`KEYS_MAX`然后我将数据以行和`FIELD_MAX`列的形式打印到文件中。以后要知道列的内容，我想打印一个标题行。

```
# KEY FIELD1 FIELD2
1 1.0 2.0 
```

我希望有一个例程在运行时正确执行此操作，即使我仅通过更改来更新代码`enum`。即，如何使用 C 代码和可能的宏使用独立于更新的固定例程打印标题行`enum`？

我发现了这个：[Mapping enum values to strings in C++](https://stackoverflow.com/questions/1884229/mapping-enum-values-to-strings-in-c)，但我更喜欢也可以与 intel 编译器一起使用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T16:53:57.767

你可以玩一些预处理器技巧。例如，在 GCC 源代码树实现中，您可能会受到`gcc/tree.def`文件的启发。

因此，您可能有一个文件，例如`myenum.def`，其中包含诸如

```
MYENUM(Pink)
MYENUM(Red)
MYENUM(Ivory) 
```

然后，您可以使用一些代码定义您的枚举，例如

```
enum my_enum {
#define MYENUM(Name) Name,
#include "myenum.def"
#undef MYENUM
}; 
```

（您可能想`None_`在`#include`上面和`Last_`之后放置）

然后你可以有一个枚举到字符串转换器，例如

```
const char* myenum_to_string(enum my_enum en) {
  switch(en) {
#define MYENUM(Name) case Name: return #Name;
#include "myenum.def"
#undef MYENUM
  default: return NULL; /* should not happen */
  }
} 
```

你可能有一个字符串到枚举转换器，例如

```
enum myenum string_to_my_enum (const char*str) {
#define MYENUM(Name) if (!strcmp(str, #Name)) return Name;
#include "myenum.def"
#undef MYENUM
  else abort ();
} 
```

以上所有内容都是常见的做法，与特定的编译器无关（它应该与`gcc`、`clang`、`tcc`或`icc`任何符合 C99 的编译器一起使用）。

此外，如果你有一个大的代码库（比你可以用最近的编译`gcc`），你有数百个`enum`并且你不想为每个人都玩这样的技巧，你可以例如开发一个 GCC 插件或扩展（例如在[MELT](http://gcc-melt.org/)`enum`中）来生成 - 使用代码的 GCC 内部的内部表示 - 仅来自声明的类似 C 代码。如果您正在编写一个新软件，或者您非常了解您的软件基础，​​您可以`enum`用类似的技巧替换代码。

# c++ - c++简单的凯撒密码算法

> ID：12761720
> 
> 赞同：1
> 
> 时间：2012-10-06T16:45:57.507
> 
> 标签：c++, encryption, char

我正在尝试制作一个非常简单的凯撒密码算法来加密和解密游戏中的玩家数据，但我得到了一些奇怪的结果。算法的任务很简单，只需向前或向后推动 ascii 表中的字符。

```
std::string Encrypt(std::string in,int key)
{
    const char* chars=in.data();
    char* newchar=(char*)malloc(sizeof(char)*in.length());
    for(int c=0;c<in.length();c++)
    {
        newchar[c]=char(((int)chars[c])+key);//I suspect somewhere here is the problem
    }

    std::string out(newchar);
    return out;
}

LOGI("encrypt:%s",Encrypt("hello",10).data());
LOGI("decrypt:%s",Encrypt(Encrypt("hello",10),-10).data()); 
```

输出：

```
encrypt:rovvyu@ 
decrypt:hellok 
```

我对加密知之甚少，我对 ascii 和整个字符在 c 中的工作方式知之甚少

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T16:54:37.780

```
std::string Encrypt(const std::string & in, int key)
{
    std::string out(in);
    for(int i=0; i < in.length(); ++i)
    {
        out[i] += key;
    }
    return out;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:56:16.267

问题在于将“key”添加到 a..z 中的值可能不会回到该范围内。就像是

```
if (chars[c] >= 'a' && chars[c] <='z') newchar[c] = 'a' + ((chars[c]-'a'+key)%26);
else if (chars[c] >= 'A' && chars[c] <='Z') newchar[c] = 'A' + ((chars[c]-'A'+key)%26);
else newchar[c] = chars[c]; 
```

希望您有充分的理由使用如此弱的东西。顺便说一句，使用 26 键反转。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T00:08:09.723

如果您只想知道如何制作凯撒密码，那很酷。如果您确实想保护某些数据，请不要这样做！它不再是一种加密方法，而不是猪拉丁语。

相反，请使用预先编写的加密库。不要自己写，因为它需要很长时间才能正确完成。AES 在大多数情况下都足够快且足够好，并且具有几乎适用于所有编程语言的库。

# jquery - WebAPI 未序列化

> ID：12761723
> 
> 赞同：0
> 
> 时间：2012-10-06T16:46:26.147
> 
> 标签：jquery, asp.net-web-api

我目前正在为 WebAPI 进行 Pluralsight 培训，并且遇到了一些问题（下载示例并没有帮助，因为它们也不起作用 - 该课程是从 Beta 版创建的，我正在使用 .Net 的最终版本4.5)。我使用以下 HTML 创建了一个非常简单的视图：

```
<form onsubmit="return submitCourse();">
     <input type="text" name="name" id="name" />
     <input type="submit" value="Create Course" />
</form>
<h1 id="msg"></h1>
<script>

//1: have form - get values from form - send to API as json
//2: use form values

function submitCourse() {

    //$.ajax({
    //    url: '/api/courses',
    //    type: 'POST',
    //    dataType: 'json'
    //});

    $.ajax({
        url: '/api/courses/',
        type: 'POST',
        dataType: 'json',            
        success: function (newCourse) {
            var msg = 'New course id = ' + newCourse.id;
            $('#msg').text(msg);
        }
    });

    return false;
}

</script> 
```

应该发生的是当表单提交时，脚本首先运行，表单数据通过 AJAX 调用为我传输。我遇到的问题是当 Post 方法在我的控制器中被击中时，“newCourse”参数始终为空：

```
 public Course Post(Course newCourse)
    {
        newCourse.id = _courses.Count;
        _courses.Add(newCourse);

        //TODO : return 201
        return newCourse;
    } 
```

通过各种工具挖掘，我发现上面的脚本似乎根本没有发送数据（内容长度为 0），但我似乎无法弄清楚为什么（WebAPI 和 jQuery 的 $.ajax() 调用的新手）。我尝试使用 $.ajax() 调用中的“data”选项将调用的主体显式设置为表单值（如下所示：**data: { 'name' : $('#name').text( ) }** )，但这也没有多大作用。内容长度似乎发生了变化（变为 5，不知道为什么），但这些值仍然没有被反序列化。

有小费吗？我对这两种技术都太陌生了，不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:27:44.240

您需要使用 $.ajax() 中的数据选项将数据发布到 API。您可以使用 data: $("#CourseForm").serialize()，如果您将 id 'CourseForm' 提供给表单并确保表单内的输入字段的名称与 Course 的属性名称匹配，以绑定到工作。

# cuda - CUDA 中 cufftComplex 数据类型数组的模数计算

> ID：12761727
> 
> 赞同：3
> 
> 时间：2012-10-06T16:46:46.337
> 
> 标签：cuda

我用 Visual C++ 制作了一个 Dll 文件来计算 CUDA 中复数数组的模数。该数组是 cufftComplex 的类型。然后我在 LabVIEW 中调用 Dll 来检查结果的准确性。我收到不正确的结果。谁能告诉我以下代码有什么问题？我认为我的内核函数应该有问题（我检索 cufftComplex 数据的方式应该不正确）。

```
#include <math.h>
#include <cstdlib>
#include <cuda_runtime.h>
#include <cufft.h>

extern "C" __declspec(dllexport) void Modulus(cufftComplex *digits,float *result);

__global__ void ModulusComputation(cufftComplex *a, int N, float *temp)
{
  int idx = blockIdx.x*blockDim.x + threadIdx.x;
  if (idx<N) 
    { 
      temp[idx] = sqrt((a[idx].x * a[idx].x) + (a[idx].y * a[idx].y));
    }

}

void Modulus(cufftComplex *digits,float *result)
{
  #define N 1024
  cufftComplex *d_data;
  float *temp;

  size_t size = sizeof(cufftComplex)*N;

  cudaMalloc((void**)&d_data, size);
  cudaMalloc((void**)&temp, sizeof(float)*N);

  cudaMemcpy(d_data, digits, size, cudaMemcpyHostToDevice);

  int blockSize = 16;
  int nBlocks = N/blockSize;
  if( N % blockSize != 0 )
      nBlocks++;

  ModulusComputation <<< nBlocks, blockSize >>> (d_data, N,temp);

  cudaMemcpy(result, temp, size, cudaMemcpyDeviceToHost);

  cudaFree(d_data);
  cudaFree(temp);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:20:49.940

在代码的最终 cudaMemcpy 中，您有：

```
 cudaMemcpy(result, temp, size, cudaMemcpyDeviceToHost); 
```

它应该是：

```
 cudaMemcpy(result, temp, sizeof(float)*N, cudaMemcpyDeviceToHost); 
```

如果您为您的 cuda 调用包含错误检查，您会看到这个 cuda 调用（如最初编写的那样）抛出一个错误。

还可以提出其他意见。例如，您的块大小 (16) 应该是 32 的整数倍。但这并不妨碍正确操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T17:15:09.073

在内核调用之后，当复制回结果时，您使用`size`的是内存大小。的第三个参数`cudaMemcpy`应该是`N * sizeof(float)`。

# php - 在 CodeIgniter 中启用 CSRF 为 TRUE

> ID：12761737
> 
> 赞同：4
> 
> 时间：2012-10-06T16:47:41.487
> 
> 标签：php, forms, codeigniter, csrf

只需阅读 CodeIgniter 2.x 具有内置的 CSRF 保护。现在阅读文档后，我没有找到任何与 CSRF 相关的内容，只是一个将其设置为`TRUE`文件`config.php`的选项，仅此而已。但是，在我的系统中，我没有使用它`form_helper`，它自动结合了 CodeIgniter 的 CSRF 保护，而是我拥有`<form>`HTML 的本机。

我担心的是我是否需要做任何事情来实现 CodeIgniter 的 CSRF，或者只是将选项设置为`TRUE`就足够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T02:42:20.003

要在 Codeigniter 中启用 CRSF，您需要做的就是：

1.  在配置文件中将选项设置为“TRUE”

2.  您的所有表单都**必须**使用[form_open() 辅助函数](http://codeigniter.com/user_guide/helpers/form_helper.html)。这将自动生成并在您的表单中包含一个“隐藏的”CSRF 令牌。作为安全功能的一部分，Codeigniter 将在每次提交表单时自动检查此令牌。如果它检测到 CSRF 错误，它会自动抛出 401 错误。

你不需要做任何其他事情。

编辑：我刚刚重新读到您不使用 form_open()。可以自己手动将 CSRF 令牌插入到表单中——但这会比所需的工作量更多。只需将所有表单转换为使用 form_open - 它就可以无缝地工作。

*（是的 - 这是 CI 中为数不多的文档记录不佳的功能之一 - 所以我理解你为什么找不到答案 - 我也花了一段时间）*

# java - 如何在没有键的情况下从哈希表中收集所有值

> ID：12761743
> 
> 赞同：0
> 
> 时间：2012-10-06T16:48:40.680
> 
> 标签：java, hashtable

我有一个合并的哈希表，它有大约 4351 个不同的键及其相关值，但我不想指定它的每个键来获取值，我只想直接收集所有值，我该如何处理这个？

注意：所有值都是 100% 不同的，这就是为什么我想盲目地获取这些数据以进行进一步处理

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T16:50:26.870

看看[`Hashtable#values()`](http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html#values%28%29)：

```
public Collection<V> values() 
```

> 返回此映射中包含的值的集合视图。集合由地图支持，因此对地图的更改会反映在集合中，反之亦然。如果在对集合进行迭代时修改了映射（通过迭代器自己的删除操作除外），则迭代的结果是不确定的。该集合支持元素移除，即通过 Iterator.remove、Collection.remove、removeAll、retainAll 和 clear 操作从映射中移除相应的映射。它不支持 add 或 addAll 操作。
> 
> **指定者：**
> 接口 Map 中的值
> 
> **返回：**
> 此映射中包含的值的集合视图
> 
> **自：**
> 1.2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:01:24.283

您可以收集 ArrayList 中的所有值，例如：

如果你喜欢

```
 HashTable <Object,Type> hm; 
```

那么你可以使用

```
 ArrayList<Type> al= new ArrayList<Type>(hm.values()); 
```

你所有的值现在都在数组列表中

# java - 在 XSLT 中调用 Java 实例方法

> ID：12761744
> 
> 赞同：8
> 
> 时间：2012-10-06T16:48:49.473
> 
> 标签：java, xslt, saxon

我正在使用 Saxon（如果需要，我可以使用 Xalan）XSLT 处理器进行一些转换。我想将以下对象的实例作为参数传递给 XSLT 模板。

```
public class Test {
   private String value;

   public Test(String v) {
       value = v;
   }
   //getters, setters etc.
} 
```

所以我创建了这个对象，即。

```
Test test = new Test("test");
transformer.setParameter("test", test); 
```

在 XSLT 文件中，我将参数声明为：

```
<xsl:param name="test" required="yes" as="jt:com.whatever.package.Test" xmlns:jt="http://saxon.sf.net/java-type"/> 
```

现在我的问题是如何在 XSLT 中对这个对象调用任何实例方法（即 getValue() ）？甚至可能吗？我知道我可以调用不同 Java 类的静态方法，但这不正是我想要的。

此外，是否可以在 XSLT 中填充 Java 对象，即。为对象的实例调用 setter 方法，然后在转换完成后在 Java 代码中将此对象与新值一起使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T08:54:32.950

您应该能够以您描述的方式调用作为参数传入的“外部对象”的实例方法。如果`$object`是这样一个对象并且`com.package.MyClass`是它的类，并且你想调用`getColor()`这个对象的方法，那么

(a) 你需要声明一个命名空间，比如`xmlns:MyClass="java:com.package.MyClass"`

(b) 你把这个方法称为`MyClass:getColor($object)`

这种调用 Java 的机制在撒克逊语中被称为“自反扩展函数”。Saxon Home Edition 不支持它。您将需要 Saxon Professional Edition 或旧的开源 Saxon-B 产品。Saxon-HE 中有另一种机制称为“集成扩展函数”，但它需要在 Java 端进行更多编码来声明参数和结果的类型。

您需要注意，对于自反扩展函数，Saxon 对如何将 Java 类型映射到 XPath 类型做出了最好的猜测，并且它并不总是按照您想要的方式进行映射，尤其是在使用集合类型时。

尽量避免使用有副作用的方法，例如 setter 方法。在 Saxon 中没有绝对可靠的方法可以确保此类调用以任何特定顺序执行，有时 Saxon 优化器会找到一种组织查询的方法，从而完全避免调用。如果您必须进行此类调用，请将它们视为调用返回结果（例如空序列）并以这样的方式使用调用，即如果确实返回结果，结果将出现在您的样式表输出中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T18:39:25.597

**这在这里得到了彻底的解释**：

[http://www.saxonica.com/html/documentation/extensibility/functions/](http://www.saxonica.com/html/documentation/extensibility/functions/)

**一个简短的例子**：

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:date="java:java.util.Date" exclude-result-prefixes="date">

<xsl:template match="/">
  <html>
    <xsl:if test="function-available('date:to-string') and
                          function-available('date:new')">
      <p><xsl:value-of select="date:to-string(date:new())"/></p>
    </xsl:if>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

**当应用于任何 XML 文档（未使用）时，会产生所需的正确结果：**

```
<html>
   <p>Sat Oct 06 11:41:30 PDT 2012</p>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T16:56:27.327

我很久以前就使用 Xalan 完成了这项工作。首先，您需要将以下内容添加到您的 xslt（我认为您不需要放置的所有其他属性）

```
<xsl:param name="test" /> 
```

然后，调用该方法，你可以做

```
<xsl:value-of select="test:getValue()"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-17T08:22:55.270

我发帖为时已晚，但对其他人来说可能会有所帮助。

您可以借助 xalan 处理器轻松实现此目的：

第 1 步：包含 Xalan 依赖项或涉及的合适 jar

```
<!-- https://mvnrepository.com/artifact/xalan/xalan -->
 <dependency>
<groupId>xalan</groupId>
<artifactId>xalan</artifactId>
<version>2.7.1</version>
</dependency> 
```

步骤 2\. 在与 java 集成时选择此处理器

```
TransformerFactory factory = TransformerFactory.newInstance("org.apache.xalan.processor.TransformerFactoryImpl",null); 
```

第 3 步。在您的 xsl 中输入样式表中的信息

```
xmlns:uuid="xalan://PackageName.className" 
```

请注意，此类应该具有您将在 xslt 中使用的静态方法

第 4 步：在您的 xslt 中使用它

```
<xsl:value-of select="uuid:methodName(string(xpath))" /> 
```

它可以是字符串或数字..取决于您的方法参数

资料来源： http: [//www.cafeconleche.org/books/xmljava/chapters/ch17s03.html](http://www.cafeconleche.org/books/xmljava/chapters/ch17s03.html)

# jboss - playframework 限制上传文件大小并以编程方式捕获错误

> ID：12761745
> 
> 赞同：1
> 
> 时间：2012-10-06T16:48:58.787
> 
> 标签：jboss, playframework, playframework-2.0

如何限制文件上传？比如php的upload_max_filesize和post_max_size。我还想自己捕获由此产生的错误，以便我可以使用类似“文件太大，允许的最大值为 X MB”之类的消息再次显示页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:27:00.983

尝试在应用程序配置中使用以下内容：

parsers.text.maxLength = (大小) k

您可以通过应用 play.avi.mvc.Results.EntityTooLarge 来更改 413 Request Entity Too Large 响应

EntityTooLarge([一些消息])

# c++ - CMake include_directories 和 add_subdirectory 之间的区别？

> ID：12761748
> 
> 赞同：28
> 
> 时间：2012-10-06T16:49:06.640
> 
> 标签：c++, cmake, thrift

我正在学习 CMake 以构建 C++ 代码，并在以下概念中苦苦挣扎。在我的根目录中，我有一些 cpp 文件和一个 CMakeLists.txt，它成功地在 gen-cpp 目录中生成了一些节俭代码。我的根级 CMakeLists.txt 包含：

包含目录（“根路径”/gen-cpp）。（连同相关的节俭自动生成和包括。

一切编译正常，但我得到运行时动态库链接错误，因为未定义符号引用了 gen-cpp 目录中定义的类。当我将目录中的文件移动到根级别时，它运行良好。我错过了什么？（我还调整了根级 cpp 目录中的 #include 以指向“path-to-root”/gen-cpp）。

这是对使用 include_directory 的误解吗，我应该在哪里使用 add_subdirectory。如果是后者，gen-cpp 中的代码是否需要自己的 CMakeLists.txt？当所述目录的内容是根级别时，为什么不需要这个附加文件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-06T17:26:54.027

`include_directories()`用于添加标题搜索路径（标志`-I`），`add_subdirectory()`在这种情况下不会有任何区别。

我想，您需要在`add_executable()`或`add_library()`调用中列出您希望这些符号存在的 gen-cpp 文件夹中的 *.cpp 文件。

或者，您可以将所有 thrift 源代码编译到库中并将其与您的代码链接。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-07-16T20:29:21.407

add_subdirectory(source_dir) 用于将子目录添加到构建中。source_dir 中还有一个 CMakeLists.txt 文件。指定源目录中的这个 CMakeLists.txt 文件将由 CMake 立即处理，然后在当前输入文件中的处理继续超出此命令。

include_directories(dir) ：将给定目录添加到编译器用于搜索包含文件的目录中。这些目录被添加到当前 CMakeLists 文件的目录属性 INCLUDE_DIRECTORIES 中。

# sqlite - 参与 A OR B 的 SQLite 人员

> ID：12761751
> 
> 赞同：1
> 
> 时间：2012-10-06T16:49:16.023
> 
> 标签：sqlite, join, left-join, outer-join

老实说，这是一个家庭作业问题，但我已经浪费了几个小时，只是无法正确解决。它返回错误数量的结果或错误的数据：

我需要选择参与指导电影和/或在电影中表演的每个人以及他们所做的次数，如果至少 5 次。

有一个`acts`带有 a`movie_id`和 a的表`person_id`，`directs`带有`movie_id`and`person_id`和`person`( `pid`and `name`)。

我想出的是：

```
 SELECT p.name,count(d.mid)+count(a.mid) 
    FROM person p
    INNER JOIN  acts a
    ON a.pid=p.pid

    LEFT JOIN  directs d
    ON p.pid=d.pid

    group by p.pid,p.name

    having (count(d.mid) +count(a.mid))>=5 
```

基本上，我试图在两个表中加入`person`和`directs`匹配的`person_id`表，同时对`directs`. 问题是第二个查询的结果不包括在内（有 10 部电影的 Alfred Hitchcock 从一开始就一直困扰着我）。

我正在使用 sqlite，如果有人可以推动我朝着正确的方向前进，我会非常高兴。我还被指示避免聚合子查询。我有一个使用它们的解决方案，但执行需要 15 分钟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:26:21.627

就这个问题而言，演员和导演之间没有相关的区别，都是当事人。

因此，让我们[创建一个视图](http://www.sqlite.org/lang_createview.html)来隐藏相关人员存储在两个表中的事实：

```
CREATE VIEW involved AS
SELECT mid, pid, 'actor'    AS role FROM acts
UNION ALL
SELECT mid, pid, 'director' AS role FROM directs 
```

然后可以通过简单的连接来解决这个问题`person`。（`role`实际上不需要该列。）

* * *

注意：这个问题没有说明如果某人既是同一部电影的演员又是导演会发生什么。如果您忽略该`role`字段并使用`UNION`而不是`UNION ALL`，这将仅被视为一次参与。但把它算作两个对我来说更有意义。

* * *

另一个注意事项：数据库结构针对您的问题设计得很糟糕；参与应该首先存储在一个表中。但在现实生活中，您并不总是能够更改数据库结构。（您可能甚至不允许创建视图，在这种情况下，您必须使用临时视图，或者将视图写为子查询。）

# c++ - 使用 system() 从 C 程序调用 NASM 会产生不同的目标代码，然后使用 Bash 调用

> ID：12761755
> 
> 赞同：2
> 
> 时间：2012-10-06T16:49:45.800
> 
> 标签：c++, assembly, linker, g++, nasm

我已经实现了一个相当好的优化编译器（对于一种玩具语言），并且遇到了一个相当令人费解的场景。我可以获取一个输入文件并从中生成程序集，因此在这方面“编译器”已经完成。如果我将该汇编文件与 NASM 进行汇编并使用 G++ 将其链接到我的运行时支持库（运行时需要 libstdc++），我将得到一个可以正常工作的可执行文件，并且没有错误。但是，我希望能够在一个命令中编译为可执行文件，因此我向`system`编译器添加了一些调用，传递与我在 bash 中使用的完全相同的命令。当我运行编译器时，它似乎可以正确组装，但是链接步骤（再次使用 g++）失败并显示`undefined reference to main`. 困惑，我试图手动链接（不重新组装，`system`，并收到相同的错误。如果我使用新编译器的汇编输出重新组装，我没有问题，这导致人们相信 NASM 是问题所在。就像我说的，命令是完全一样的（我复制并粘贴它们只是为了确保在第一次之后）。这是环境变量还是什么？这是怎么回事？

编辑：我手动组装了一个目标文件，再次使用与编译器中的命令相同的命令，并在两者之间进行了 vim diff。编译器生成的似乎只包含 ELF 标头。

编辑 2：差异的屏幕截图![截屏](../Images/c0eafc9ed6e503e49378b107efefb2b1.png)

编辑 3：我尝试使用`system`调用 Perl 脚本，然后调用 NASM 和 G++，仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:53:09.407

解决它！这是由于竞争条件而没有刷新文件。感谢所有的帮助，非常感谢。

# wordpress - 如何让用户只在 Wordpress 中看到他们的内容？

> ID：12761756
> 
> 赞同：1
> 
> 时间：2012-10-06T16:49:55.130
> 
> 标签：wordpress, customization

这超越了帖子和媒体。我有几个 CPT 和一个日历。有没有办法让 wordpress 检查用户名并只显示他们创建的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:13:21.530

In the backend, to filter all post types that are shown and restrict the visualization you can use [**`pre_get_posts`**](https://wordpress.stackexchange.com/search?tab=votes&q=pre_get_posts%20is%3aanswer).

```
add_action( 'pre_get_posts', 'users_own_content_so_12761756' );

/**
 * Show only posts of the current user in the dashboard
 * affects posts, pages, media and custom post types
 */
function users_own_content_so_12761756( $wp_query_obj ) 
{
    // Restrict hook to the backend
    if( !is_admin() )
        return;

    global $current_user;
    get_currentuserinfo();

    // http://php.net/manual/en/function.is-a.php
    if( !is_a( $current_user, 'WP_User') )
        return;

    if( !current_user_can( 'administrator' ) )
        $wp_query_obj->set( 'author', $current_user->ID );
} 
```

After applying this code, you'll notice that the post count is not correct: it'll show the total count and not the user count. To adjust that, refer to this Q&A: [Update post counts (published, draft, unattached) in admin interface](https://wordpress.stackexchange.com/a/53791/12615).

You'll need to care about [user roles and capabilities](http://wordpress.org/extend/plugins/members/) as well, blocking the rights to edit someone else's posts/pages/cpts. That's because a user can type in the browser address `example.com/wp-admin/post.php?post=POST_ID&action=edit` and access the post, if he/she has the rights to do so.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:44:16.187

您可以尝试将其添加到循环中

```
<?php $author = get_the_author(); 
$current_user = wp_get_current_user(); 
if($author != $current_user->user_nicename) {
    echo "permission denied";
    break;
} ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:30:17.487

我使用成员插件为用户创建自定义角色。

[http://wordpress.org/extend/plugins/members/](http://wordpress.org/extend/plugins/members/)

# jsf-2 - 如何在 Primefaces+JSF2 中显示用户点击的 url

> ID：12761758
> 
> 赞同：0
> 
> 时间：2012-10-06T16:49:59.140
> 
> 标签：jsf-2, primefaces

我正在使用带有 Prime 面孔的 JSF2。我想显示用户在每个页面中点击的所有以前的链接或 URL。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:53:51.953

这是一个很好的链接：[如何从 Java 过滤器获取请求 URL？](https://stackoverflow.com/questions/4389596/how-can-i-get-the-request-url-from-a-java-filter)

我要做的是使用类似该示例的内容并执行一组三个 URL。

```
//Using linked example
    public class MyFilter implements Filter {
        public void init(FilterConfig config) throws ServletException { }

        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {
            chain.doFilter(request, response);

            String url = ((HttpServletRequest) request).getPathTranslated();
            UrlBean urlBean = (UrlBean) FacesContext.getCurrentInstance()getApplication().getValueBinding("#{urlBean}");
            urlBean.storeUrl(url);
        }

    public void destroy() { }
} 
```

这是完全未经测试的，但这个想法应该可行。您只需要为您的组件实现一些逻辑（可能是堆栈），以便它存储您需要的内容。（很明显，您可能会多次访问同一个 URL）。我应该注意 UrlBean 只是一个抽象的想法，你必须实现它

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-13T05:21:53.313

嗨，我创建了这个 Singleton 类来放置用户浏览的 Url。

```
import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;

public class UrlHistory {

    @SuppressWarnings("rawtypes")
    private static Map<String, List> store = new HashMap<String, List>();

    private static UrlHistoryBean instance = null;

    public static UrlHistoryBean getInstance() {
        if (instance == null) {
            instance = new UrlHistoryBean();
        }
        return instance;
    }

    LinkedList<UrlData> urlList = new LinkedList<UrlHistoryBean.UrlData>();

    public void addUrl(String sessionId, String urlString, int urlId) {
        UrlData data = new UrlData();
        data.setUrlName(urlString);
        data.setUrlId(companyId);
        if (urlList.isEmpty()) {
            urlList.add(data);
        } else {
            boolean isEqual = false;
            for (UrlData urlDataObj : urlList) {
                if (urlDataObj.equals(data))
                    isEqual = true;
            }
            if(!isEqual)

                urlList.addFirst(data);
        }
        store.put(sessionId, urlList);

    }

    @SuppressWarnings("rawtypes")
    public static Map<String, List> getStore() {
        return store;
    }

    @SuppressWarnings("rawtypes")
    public static void setStore(Map<String, List> store) {
        UrlHistoryBean.store = store;
    }

    public class UrlData {

        String urlName;
        int urlId;

        public String getUrlName() {
            return UrlName;
        }

        public void setUrlName(String UrlName) {
            this.UrlName = UrlName;
        }

        public int getUrlId() {
            return urlId;
        }

        public void setUrlId(int urlId) {
            this.urlId = urlId;
        }

        public boolean equals(UrlData rData) {
            boolean bEqual = false;
            if (this.getUrlId() > 0 && rData.getUrlId() > 0 && this.getUrlId() == rData.getUrlId()) {
                bEqual = true;
            }
            return bEqual;
        }

    }

} 
```

# wso2 - WSO2 ESB 4.5.0，身份验证问题

> ID：12761759
> 
> 赞同：1
> 
> 时间：2012-10-06T16:50:07.987
> 
> 标签：wso2, wso2esb

我正在使用 wso2esb 4.5.0 并且遇到了一个不舒服的问题，我的会话不断关闭，有时我必须在一分钟内登录多次。有什么办法可以避免吗？

这是日志中的跟踪：

```
[2012-10-06 02:15:55,176]  INFO - RegistryEventingServiceComponent Successfully Initialized Eventing on Registry

[2012-10-06 02:15:56,063]  INFO - JMXServerManager JMX Service URL  : service:jmx:rmi://localhost:11111/jndi/rmi://localhost:9999/jmxrmi

[2012-10-06 02:15:56,070]  INFO - StartupFinalizerServiceComponent Server           :  WSO2 Enterprise Service Bus-4.5.0

[2012-10-06 02:15:56,072]  INFO - StartupFinalizerServiceComponent WSO2 Carbon started in 60 sec

[2012-10-06 02:15:56,651]  INFO - CarbonUIServiceComponent Mgt Console URL  : https://localhost:9443/carbon/

[2012-10-06 02:16:27,059]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2012-10-06 02:16:27,058-0400]

[2012-10-06 02:16:37,230]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2012-10-06 02:16:37,230-0400]

[2012-10-06 02:16:58,958]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2012-10-06 02:16:58,958-0400]

[2012-10-06 02:17:10,045]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2012-10-06 02:17:10,045-0400]

[2012-10-06 02:17:18,099]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2012-10-06 02:17:18,099-0400]

[2012-10-06 02:17:24,248]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2012-10-06 02:17:24,248-0400]

[2012-10-06 02:17:32,390]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2012-10-06 02:17:32,390-0400]

[2012-10-06 02:17:41,048]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2012-10-06 02:17:41,048-0400]

[2012-10-06 02:17:46,394]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2012-10-06 02:17:46,394-0400]

[2012-10-06 02:17:54,714]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2012-10-06 02:17:54,714-0400]

[2012-10-06 02:18:09,476]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2012-10-06 02:18:09,476-0400]

[2012-10-06 02:18:17,606]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2012-10-06 02:18:17,606-0400]

[2012-10-06 02:18:21,561]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2012-10-06 02:18:21,561-0400]

[2012-10-06 02:18:31,615]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2012-10-06 02:18:31,615-0400] 
```

在此先感谢，Ubalquis。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:03:40.680

您是否在浏览器上禁用了 cookie？如果您已禁用，请启用 cookie。

# json - json设置最大长度

> ID：12761767
> 
> 赞同：4
> 
> 时间：2012-10-06T16:51:05.207
> 
> 标签：json, max

我正在使用 asp .net MVC3 。我正在使用 Newtonsoft.Json.JsonConvert.SerializeObject 方法来解析 json object 。我收到错误“使用 JSON JavaScriptSerializer 进行序列化或反序列化期间出错。字符串的长度超过了 maxJsonLength 属性上设置的值。”

我还尝试了将 web.config 中的设置设置为 max length 。但是，没有收获。

请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T06:49:05.483

在您的控制器上，像这样返回您的 json：

```
var result = //your data;
var jsonResult = Json(result, JsonRequestBehavior.AllowGet);
jsonResult.MaxJsonLength = int.MaxValue; 
```

您可以根据需要更改 MaxJsonLength。

# java - 以编程方式滚动到滚动视图中的视图

> ID：12761768
> 
> 赞同：0
> 
> 时间：2012-10-06T16:51:07.133
> 
> 标签：java, android, android-layout

我想以编程方式在滚动视图中滚动视图。我可以这样做：

```
 View viewToShow= ...
 ScrollView scrollView= ...;
 scrollView.scrollTo(0,viewToShow.getTop()); 
```

但它只有在布局已被测量时才有效。onCreate() 内部的结果`viewToShow.getTop()`始终为 0，因此它不起作用。

我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:00:38.800

覆盖：

```
 public void onWindowFocusChanged (boolean hasFocus) 
```

在此函数中，计算布局值（包括边距）

# android - 如何更新应用程序的数据而不需要更新应用程序版本？（安卓应用）

> ID：12761772
> 
> 赞同：0
> 
> 时间：2012-10-06T16:51:12.860
> 
> 标签：android, eclipse, updates

有人可以告诉我如何在不需要更新应用程序的情况下更新应用程序的数据吗？例如，如果我有一个歌曲的应用程序并且我想添加另一首歌曲，我如何使用互联网或其他方式来完成而不需要更新应用程序的版本？它在数据库中吗？我应该写一个允许之前这样做的代码吗？（如果重要的话，我正在与 Eclipse 合作......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:31:02.787

好的，首先您必须将您的歌曲上传到您的服务器中（以使其可供所有用户使用）。然后您必须通过 JSON 下载到您手机的链接（还有另一种方法，例如 XML，但我使用的是 JSON）..

通过 JSON 下载链接后 .. 只需解析它们，然后您的应用程序中就会有您歌曲的链接！所以现在做你的工作。

这是如何将 json 数据下载到您的 android 的教程链接： [http ://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

仅供参考：首先尝试阅读 JSON（Java Script Object Notation）。

# c++ - Qt 自定义列表

> ID：12761774
> 
> 赞同：1
> 
> 时间：2012-10-06T16:51:21.890
> 
> 标签：c++, qt, unity3d

我最近开始使用 Qt，因为它比使用 win32 更直观，我一直在玩一堆不同的小部件，我不想尝试更复杂的东西，但找不到任何东西在与我想要的相关的 Qt 参考或 Google 上。

我正在尝试做 Unity3D Inspector 框之类的事情，到目前为止，我已经了解了我将如何进行的工作，但似乎没有所需组件之一的东西。

我将有一个可停靠小部件，在此我将有一个可滚动区域，此时我希望将“组件”添加到此可滚动区域，这些组件都会有所不同，它们应该能够展开/折叠成一行（组件的标识符），并且在展开时应该能够在其中包含多个小部件，例如标签、复选框、其他可折叠部分等。

我一定是用不恰当的措辞来表达我在谷歌中寻找的东西，因为它似乎没有任何与我想要的东西相似的东西，但这似乎是一个普遍的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:16:53.223

# 2个解决方案：

## *1/ 手动设计*

码头：

```
*---------------QDockWidget---------------*
|                                         |
| *-------------QScrollArea-------------* |
| |                                     | |
| | *--------ExpandableWidget---------* | |
| | |                                 | | |
| | |                                 | | |
| | |                                 | | |
| | *---------------------------------* | |
| | *--------ExpandableWidget---------* | |
| | |                                 | | |
| | |                                 | | |
| | |                                 | | |
| | *---------------------------------* | |
| | *--------ExpandableWidget---------* | |
| | |                                 | | |
| | |                                 | | |
| | |                                 | | |
| | *---------------------------------* | |
| | *--------VerticalSpacer-----------* | |
| |                  |                  | |
| |                  |                  | |
| *-------------------------------------* |
|                                         |
*-----------------------------------------* 
```

可扩展小部件：

`ArrowL`是一个`QLabel`仅包含指示小部件是折叠还是展开的箭头。您将自定义小部件设置为所需的输入小部件，例如 int 输入。您在折叠时隐藏此小部件，并在展开时显示它。

```
*------------ExpandableWidget-------------*
|                                         |
| *-------------QVBoxLayout-------------* |
| |                                     | |
| | *-----------QHBoxLayout-----------* | |
| | | *-ArrowL-* *------QLabel------* | | |
| | *---------------------------------* | |
| |                                     | |
| | *---------Custom QWidget----------* | |
| | |                                 | | |
| | *---------------------------------* | |
| |                                     | |
| *-------------------------------------* |
|                                         |
*-----------------------------------------* 
```

优点：您可以完全控制扩展坞的行为方式。缺点：您必须自己在全局小部件中实现此层次结构，以确保其一致性。

## *2/ QtPropertyBrower*

[QtPropertyBrowser](http://qt.gitorious.org/qt-solutions/qt-solutions/trees/master/qtpropertybrowser)是现已停产的 Qt 解决方案（[许可证](http://qt-project.org/forums/viewthread/3983)）的一部分。它使您几乎可以在几行代码中完成您想要的事情。

# ruby - 如何使用 Nokogiri 从图像中删除链接标签

> ID：12761776
> 
> 赞同：1
> 
> 时间：2012-10-06T16:51:42.467
> 
> 标签：ruby, nokogiri

我正在使用 Nokogiri 解析 HTML 文档。该代码包含几个这样的图像：

```
 <a href="http://url_to_big_photo.jpg"><img alt="alternative-text" border="0" height="427" src="http://url_to_my_photo.jpg?" title="Image Title" width="640"></a> 
```

我正在尝试将该图像保存到我的 S3 存储中，更改样式并删除链接。所有图像都有 css 标签“.post-body img”。

到目前为止，我得到的最接近的是：

```
@doc.css(".post-body img").each do |image|
    @new_photo = Photo.create!(
       #Params required to save and upload the photo to S3.
        ...
        ...
       )
     # The url of the photo upload to S3 is @new_photo.photo.url
    image['src']= @new_photo.photo.url
    image['class'] = "my-picture-class"
    image.parent['src] = '#'
    puts image.parent.content
    @doc.to_html
  end 
```

这会删除大照片的链接，但显然这不是一个好的解决方案。

我尝试使用[http://rubyforge.org/pipermail/nokogiri-talk/2009-June/000333.html](http://rubyforge.org/pipermail/nokogiri-talk/2009-June/000333.html)上的建议使用 image.parent << image 替换父级，但没有做任何事情和 image.parent =图像返回“无法重新父节点（RuntimeError）”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:03:29.203

要将该邮件列表示例转换为适用于您的情况，您必须记住这`node`是他们试图摆脱的节点，在您的情况下是`image.parent`.

因此，`image.parent['src] = '#'`您应该尝试：

```
link = image.parent
link.parent << image
link.remove 
```

**编辑：**

实际上，上面的代码可能会将所有图像移动到包含链接的任何元素的底部，所以试试这个：

```
link = image.parent
link.replace(image) 
```

# google-maps - Google 地图上的 BootStrap 弹出框

> ID：12761778
> 
> 赞同：3
> 
> 时间：2012-10-06T16:51:57.953
> 
> 标签：google-maps, twitter-bootstrap

我试图在加载时将 Bootstrap Popover 放置在谷歌地图上。

弹出框必须位于特定的纬度/经度位置并在地图加载时加载，它必须能够包含 HTML。

我已经尝试了很多东西。我尝试使用 Infobox 和 Google Custom overlay 将 div 浮动在地图上。有趣的是，这些 div 出现在正确的位置，然后我可以链接到它们并将它们用作弹出框的元素。但是，它们不会在启动时加载。您必须在控制台中启动它们，例如

```
$("#example1").popover({ title: 'Look!  A bird image!', content: "hello"})

$("#example1").popover('show') 
```

当我手动输入这些内容时，它会起作用并在地图上弹出。如果我将它们放入我的 javascript 文件并在所有内容加载后加载它：

```
$(document).ready(
  function(){
    $("#example1").popover({ title: 'Look!  A bird image!', content: "hello"})
    $("#example1").popover('show')
    console.log("hello")
}); 
```

什么都没有发生。它根本行不通。

我想要做的是在 lat/lng 上放置一个 div，然后使用该 div 和其中的一个元素来用于弹出框的位置。一切都发生在开始。

有没有我没有看到的更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:47:47.127

我怀疑它在您的代码中不起作用，因为它在地图准备好之前触发得太早了（ready() 在 DOM 准备好时触发，不一定要等待 Google 的 javascript 完全准备好）。

首先，检查此测试是否确实是时间问题：

```
$(document).ready(function(){
  setTimeout(function() {
    $("#example1").popover({ title: 'Look!  A bird image!', content: "hello"})
    $("#example1").popover('show')
    console.log("hello")
  }, 2000);
}); 
```

页面加载后 2 秒应出现弹出窗口。

如果可行，请尝试以下实际解决方案：

```
$(document).ready(function(){
  google.maps.event.addListenerOnce(map, 'idle', function(){
    $("#example1").popover({ title: 'Look!  A bird image!', content: "hello"})
    $("#example1").popover('show')
    console.log("hello")
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T11:19:15.560

我有一个类似的问题。我通过替换来修复`$(document).ready`它 `$(window).load`。通过这种方式，我们知道 Google Maps 在调用之前可能不存在的元素上的弹出框之前已经加载。在你的情况下：

```
$(window).load(
  function(){
    $("#example1").popover({ title: 'Look!  A bird image!', content: "hello"})
    $("#example1").popover('show')
    console.log("hello")
}); 
```

# java - 日食 | Packge 变成了一个目录，破坏了我的整个项目

> ID：12761779
> 
> 赞同：3
> 
> 时间：2012-10-06T16:51:58.680
> 
> 标签：java, eclipse, directory, packages

所以我遇到的问题非常奇怪。当我设置了一个预先存在的项目时（并将其从计算机 A 移动到计算机 B）。我制作了一个新项目并以正常方式导入它。它非常非常基于包，大约有 30-40 个包。两个包被制作成目录而不是包。

例如，不是 org.project1.tools.stuff，而是 org/project1/tools/stuff。

我检查了代码，在顶部它是包 org.project1.tools.stuff，然后是导入等等。

由于它在目录列表中而不是在我的实际包中，因此它严重破坏了我的整个项目。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T17:26:30.447

如果您右键单击您的项目，选择属性-> Java 构建路径。在随后的屏幕上，您可以指定哪些文件夹是源文件夹。

![在此处输入图像描述](../Images/e730e10400e1c34353e32245e01ee71b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:12:43.693

只是删除了项目并再次添加它而不触及文件。哦

# php - Symfony 无法覆盖捆绑包上的参数

> ID：12761780
> 
> 赞同：0
> 
> 时间：2012-10-06T16:52:04.637
> 
> 标签：php, symfony

我目前有一个包，我从 /app/config/config.yml 文件定义它的参数

```
foo:
   facebook:
       page: 
           name: %facebook_page_name% 
```

然后我通过以下方式在我的控制器中访问它：

```
$this->container->getParameter('facebook.page.name'); 
```

我暂时使它起作用的方法是在 FooExtension 中

```
public function load(array $configs, ContainerBuilder $container)
{
    $loader = new Loader\YamlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));
    $loader->load('config.yml');
    $loader->load('services.yml');

    $configuration = new Configuration();
    $config = $this->processConfiguration($configuration, $configs);

    if (isset($config['facebook'])) {
        if (isset($config['facebook']['page'])) {
            if (isset($config['facebook']['page']['name'])) {
                $container->setParameter('facebook.page.name', $config['facebook']['page']['name']);
            }
        }
    }
} 
```

你会同意我的看法，这是令人筋疲力尽和痛苦的。我怎样才能让它自动化？我到处搜索，但肯定有一些我错过的东西。但是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:23:12.760

如果你只需要传递一些参数，没有什么比提供默认值、参数数组或检查配置更有趣的了，你可以像这样设置一些参数：

```
# app/config/config.yml
parameters:
    facebook.page.name:    %facebook_page_name% 
```

然后您可以使用相同的代码将它们放入您的控制器中：

```
$this->container->getParameter('facebook.page.name'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T00:49:38.303

好吧，就是这样，除非您想将它们明确设置为配置中的参数。

尽管如果它是一个强制性的树结构，并且您已经通过捆绑包中的配置类对其进行了验证，那么您实际上并不需要过多地摆弄条件和 isset。

这并不是真的很痛苦，也不是很累，远非如此，我很难过。

# php - Array_splice 将一个元素与多维关联数组中的前一个元素交换

> ID：12761782
> 
> 赞同：0
> 
> 时间：2012-10-06T16:52:08.147
> 
> 标签：php, multidimensional-array, associative-array, array-splice

## 交换多维数组中的元素及其上方的兄弟元素。

我希望数组中具有选定索引的元素与他上方的元素交换它的位置。

1.  从它的位置（N）到位置（N-1）的元素
2.  我希望位置（N-1）处的元素进入位置（N），
3.  结果索引应该正确地反映它们在数组中的新顺序。`array_values($tmparr);`确实对索引进行了正确排序
4.  要交换的目标元素可以转到 Position(0)，但永远不会从 Position(0) 开始
5.  如果在位置（0）处要向下交换的元素应该在位置（1）处而不是在数组的末尾。

虽然这个函数在语义上解释了我想要做什么，但它根本不起作用。

```
function swaparray($tmparr,$posa,$posb){
 $vala = $tmparr[$posa];
 $valb = $tmparr[$posb];
 $tmparr[$posa] = $valb;
 $tmparr[$posb] = $vala;
 return $tmparr; } 
```

第二个函数将预期的目标向上移动，但如果他在位置 0，上面的元素被向上推并到列表的末尾，它不会在目标下方，所以它不能按预期工作

```
 function swaparray($tmparr,$posa,$posb){
  $vala = $tmparr[$posa];
  $valb = $tmparr[$posb];
  unset($tmparr[$posa]);
  unset($tmparr[$posb]);
  $tmparr[$posa] = $valb;
  $tmparr[$posb] = $vala;
  $tmparr = array_values($tmparr);
 return $tmparr;
} 
```

进一步阅读我的问题是接缝 Array_splice() 可以解决问题。您对此有何意见？

编辑**答案**：*（PHP >= 4.3.8）*

## Array_splice() 的工作解决方案

```
 function swaparray($array, $n) {
     // taking out at $n
     $out = array_splice($array, $n, 1);
     // adding in at $n - 1
    array_splice($array, $n - 1, 0, $out);
    return $array;
 } 
```

## 这是原始的多维数组

```
 Array ( [0] => Array ( [key1] => 1 [key2] => 1 [key3] => 1 [key4] => 1 )
         [1] => Array ( [key1] => 2 [key2] => 2 [key3] => 2 [key4] => 2 ) 
         [2] => Array ( [key1] => 3 [key2] => 3 [key3] => 3 [key4] => 3 ) 
         [3] => Array ( [key1] => 4 [key2] => 4 [key3] => 4 [key4] => 4 ) ) 
```

这是我想要它做的一个摘录/示例。

```
[0] key1=1 key2=1 key3=1 key4=1
[1] key1=2 key2=2 key3=2 key4=2 
[2] key1=3 key2=3 key3=3 key4=3 <- 
[3] key1=4 key2=4 key3=4 key4=4 
```

交换数组（$tmparr，2）；

```
[0] key1=1 key2=1 key3=1 key4=1
[1] key1=3 key2=3 key3=3 key4=3 <- 
[2] key1=2 key2=2 key3=2 key4=2 
[3] key1=4 key2=4 key3=4 key4=4 
```

交换数组（$tmparr，1）；

```
[0] key1=3 key2=3 key3=3 key4=3 <- 
[1] key1=1 key2=1 key3=1 key4=1
[2] key1=2 key2=2 key3=2 key4=2 
[3] key1=4 key2=4 key3=4 key4=4 
```

交换数组（$tmparr，1）；

```
[0] key1=1 key2=1 key3=1 key4=1 <-
[1] key1=3 key2=3 key3=3 key4=3  
[2] key1=2 key2=2 key3=2 key4=2 
[3] key1=4 key2=4 key3=4 key4=4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:32:36.023

> 从它的位置（N）到位置（N-1）的元素我希望位置（N-1）的元素到位置（N），

你所说的只是你想交换两者，其中 N 在零索引数组中永远不是 0。

将元素 N 移动到 N-1：

```
/** 
  * [0] is top
  */
function moveUp(&$array, $n) {
    if ($n < 1)             throw new InvalidArgumentException();
    if (!isset($array[$n])) throw new InvalidArgumentException();
    // taking out at $n
    $out = array_splice($array, $n, 1);
    // adding in at $n - 1
    array_splice($array, $n - 1, 0, $out);
} 
```

用法：

```
$n = 2;
moveUp($array, $n);
var_dump($array); 
```

因为 N-1 的元素会在前面添加一个元素，所以它会自动移动到 N. 工作完成。`array_splice`真的很强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:58:50.290

起初这看起来很复杂，但它只是基本的变量交换和保留密钥。你需要的是[在你的函数中引用 &](http://php.net/manual/en/language.references.php)

```
$array = Array ( 
"0" => Array ( "key1" => 1 , "key2" => 1 , "key3" => 1 , "key4" => 1 ),
"1" => Array ( "key1" => 2 , "key2" => 2 , "key3" => 2 , "key4" => 2 ) ,
"2" => Array ( "key1" => 3 , "key2" => 3 , "key3" => 3 , "key4" => 3 ) ,
"3" => Array ( "key1" => 4 , "key2" => 4 , "key3" => 4 , "key4" => 4 ) );

swaparray($array,2,1);
var_dump($array); 
```

输出

```
array
  0 => 
    array
      'key1' => int 1
      'key2' => int 1
      'key3' => int 1
      'key4' => int 1
  1 => 
    array
      'key1' => int 3
      'key2' => int 3
      'key3' => int 3
      'key4' => int 3
  2 => 
    array
      'key1' => int 2
      'key2' => int 2
      'key3' => int 2
      'key4' => int 2
  3 => 
    array
      'key1' => int 4
      'key2' => int 4
      'key3' => int 4
      'key4' => int 4 
```

如果运行 3 次`swaparray`

```
swaparray($array,2,1);
swaparray($array,1,0);
swaparray($array,1,0);

var_dump($array); 
```

你会得到

```
array
  0 => 
    array
      'key1' => int 1
      'key2' => int 1
      'key3' => int 1
      'key4' => int 1
  1 => 
    array
      'key1' => int 3
      'key2' => int 3
      'key3' => int 3
      'key4' => int 3
  2 => 
    array
      'key1' => int 2
      'key2' => int 2
      'key3' => int 2
      'key4' => int 2
  3 => 
    array
      'key1' => int 4
      'key2' => int 4
      'key3' => int 4
      'key4' => int 4 
```

使用的功能

```
function swaparray(&$array, $originKey, $destinationKey) {
    $origin = isset($array[$originKey]) ? $array[$originKey] : false;
    $destination = isset($array[$destinationKey]) ? $array[$destinationKey] : false;

    if ($origin && $destination) {
        $array[$originKey] = $destination;
        $array[$destinationKey] = $origin;
        return true;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T17:54:30.093

一个快速简单的版本，几乎可以满足您的需求-与此页面上的所有其他选项相同-令我特别惊讶的是，您自己的第一个功能也不能满足您的需求？据我所见，它应该可以完美运行……唯一的区别是它不会通过引用传递。

```
function moveUp2(&$array, $n){
  if ( $n && array_key_exists($n, $array) ) {
    list( $array[$n-1], $array[$n] ) = array( $array[$n], $array[$n-1] );
  }
}

/// example usage
moveUp2( $array, 1 );

echo '<xmp>';
print_r($array);
echo '</xmp>'; 
```

现在显然上面的函数假设您正在使用数字键，并且数组中的所有键都是按顺序排列的——例如，如果你有像 0、1、3、4 这样的键——那么移位 3 将意味着放置在 2 的值将出现在数组的末尾...

如果您发现数组引用导致问题，只需删除`&`参数列表中的 并确保函数返回`$array`。显然，这意味着示例用法会发生变化：

```
/// example usage
$array = moveUp2( $array, 1 );

echo '<xmp>';
print_r($array);
echo '</xmp>'; 
```

# javascript - 在 Chrome 中触发 Google-Reader 的刷新（在 Firefox 中有效）？

> ID：12761785
> 
> 赞同：1
> 
> 时间：2012-10-06T16:52:53.763
> 
> 标签：javascript, google-chrome, dom-events, userscripts, google-reader

我有一个*Google Reader*的用户脚本，作为该用户脚本的一部分，我需要触发刷新，我在 Firefox 中通过模拟`keypress`字母的 a 来执行此操作`r`。

```
function simulateRefresh()
{
    var e = document.createEvent('KeyboardEvent');
    e.initKeyEvent('keypress', true, true, window, false, false, false, false, 82, 82);
    document.body.dispatchEvent(e);
} 
```

这适用于 Firefox，但不适用于 Chrome。显然`initKeyEvent`不支持，我应该使用`initKeyboardEvent`.
到目前为止，我对此的运气为零（控制台中没有错误，但刷新不会触发。）如果这很重要，我正在使用 jQuery。

我也尝试触发`click`刷新按钮，但这在两个浏览器中都失败了（不知道为什么，点击事件根据 Chrome 调试器触发，但代码被混淆了，所以我无法弄清楚）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:31:51.300

Google webapps 通常不使用简单的`keypress`or `click`，而使用复杂的状态序列。;-)

因此，向刷新按钮发送“点击”不起作用，但发送“上、下、上”三元组可以。像这样：

```
var refreshBtn = document.querySelector ('#viewer-refresh');

//--- Click by itself does not work!
triggerMouseEvent (refreshBtn, 'mouseover');
triggerMouseEvent (refreshBtn, 'mousedown');
triggerMouseEvent (refreshBtn, 'mouseup');

function triggerMouseEvent (node, eventType) {
    var clickEvent = document.createEvent('MouseEvents');
    clickEvent.initEvent (eventType, true, true);
    node.dispatchEvent (clickEvent);
} 
```

* * *

* * *

键盘快捷键可能需要类似的状态序列。（测试继续。）

**更新：** 对于键盘事件，请参阅[这个答案](https://stackoverflow.com/a/1897491/331508)，其中提到[了 Webkit Bug 16735：“使用 DOM 创建的键盘事件的 keyCode 和 charCode 为 0”](https://bugs.webkit.org/show_bug.cgi?id=16735) ——4.5 年后仍然开放（！！）并且*可能*适用于此处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:02:20.170

您的解决方案是检查该`initKeyboardEvent`方法是否已实现。

```
var e = document.createEvent('KeyboardEvents');
(e.initKeyboardEvent || e.initKeyEvent).call(e, 'keypress', true, true, window, false, false, false, false, 82, 82);
document.body.dispatchEvent(e); 
```

这在 Chrome 中对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T17:01:16.420

试过了`$('#refreshButton').trigger('click');`吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T18:27:17.437

我认为您正在尝试从您的内容脚本中分派事件，不幸的是这不起作用。[您需要将代码注入页面](https://stackoverflow.com/a/9517879/612202)：

```
function injectJavaScript(textContent) {
  var scriptElement = document.createElement('script');
  scriptElement.textContent = textContent;

  (document.getElementsByTagName('head')[0] || document.body || document.documentElement).appendChild(scriptElement);
}

var code = '(' + function() {
  var e = document.createEvent('KeyboardEvents');
  e.initKeyboardEvent('keypress', true, true, window, false, false, false, false, 82, 82);
  document.body.dispatchEvent(e);
} + ')();';

injectJavaScript(code); 
```

# virtualbox - wkhtmltopdf 段错误

> ID：12761786
> 
> 赞同：11
> 
> 时间：2012-10-06T16:52:56.720
> 
> 标签：virtualbox, ubuntu-12.04, wkhtmltopdf

我正在尝试将 wkhtmltopdf 放到 virtualbox 的 ubuntu 12.04 64 位服务器上。到目前为止还没有运气。存储库中的软件包希望运行 xserver 和静态版本：

```
wkhtmltopdf google.com tesss.pdf
Loading pages (1/6)
QSslSocket: cannot resolve SSLv2_client_method               ] 10%
QSslSocket: cannot resolve SSLv2_server_method
Counting pages (2/6)                                               
Resolving links (4/6)                                                       
Loading headers and footers (5/6)                                           
Printing pages (6/6)
QPixmap: Cannot create a QPixmap when no GUI is being used===] Page 1 of 1
QPixmap: Cannot create a QPixmap when no GUI is being used
QPixmap: Cannot create a QPixmap when no GUI is being used
QPixmap: Cannot create a QPixmap when no GUI is being used
QPixmap: Cannot create a QPixmap when no GUI is being used
QPixmap: Cannot create a QPixmap when no GUI is being used
QPixmap: Cannot create a QPixmap when no GUI is being used
Segmentation fault 
```

有什么想法我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T23:15:03.367

[http://code.google.com/p/wkhtmltopdf/issues/detail?id=730](http://code.google.com/p/wkhtmltopdf/issues/detail?id=730)

基本上，它大约在一年前得到修复，但仍未发布。真是一团糟 ：（

尝试改用[0.10.0_rc2 版本](http://wkhtmltopdf.googlecode.com/files/wkhtmltopdf-0.10.0_rc2-static-amd64.tar.bz2)，这对我来说非常有用

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T15:42:08.530

QPixmap 错误不会导致分段错误。事实上，添加`--disable-javascript`选项可以解决问题。您仍会收到警告，但 PDF 已正确生成。HTH。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-24T03:23:58.307

我有一个类似的问题（segfault），发现我在从 apache 执行 wkhtmltopdf 时设置了 ulimit -v （虚拟内存）限制。使用相同的命令时，一切都从命令行运行良好。

我可以通过在命令前面加上这样的 ulimit 来适应它：“ulimit -v 1073741824; wkhtmltopdf --page-size Letter ....”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-25T13:19:27.163

### 升级到 0.12.6。

我知道这是一个老问题，但对于那些仍然遇到这个问题的人，请尝试升级到最新版本（撰写本文时为 0.12.6）。在最近的几个版本中，许多此类问题已得到修复。

之后，尝试`ulimit`像其他人提到的那样调整您的机器。

最后，如果您在页眉或页脚中显示当前页面和总页面，请参阅[此答案](https://stackoverflow.com/a/66369004/293280)以获得良好的提示和解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-04T10:39:09.817

使用的二进制文件：wkhtmltopdf 0.11.0 rc1 linux i386

我在转换嵌入了 Google Maps JS API 的页面时看到了分段错误。在这些情况下，生成了一个 0 字节大小的输出文件。没有找到通过 wkhtmltopdf 的不同命令行参数运行此版本的任何解决方案。

最后切换到[谷歌地图静态 API](https://developers.google.com/maps/documentation/staticmaps/)以防止繁重的 JS 工作，这似乎是导致问题的原因。这只是将地图嵌入为静态图像，如果您提供 scale=2 作为选项，则在打印时看起来非常好。

# objective-c - Objective-C：复制返回的 NSMutableArray

> ID：12761787
> 
> 赞同：0
> 
> 时间：2012-10-06T16:53:13.890
> 
> 标签：objective-c, nsmutablearray

我正在调用一个填充 NSMutableArray 并返回它的方法 getHoleScore。我正在尝试复制数组，以便调用方法可以访问这些项目，但我每次都得到这个异常：

异常'NSRangeException'，原因：' *** -[__NSArrayM objectAtIndex:]：空数组的索引 0 超出范围'

我尝试了多种不同的方法来复制我在此站点上找到的数组，但似乎没有任何效果。这是代码：

```
Score *theScore = self.roundScore;
NSMutableArray *scores = [[[self delegate]getHoleScore:self score:theScore] mutableCopy];
NSInteger total = 0;

if (theScore) {
    self.playerName.text = theScore.name;
    self.courseName.text = theScore.course;
    self.hole1Field.text = [NSString stringWithFormat:@"%d", [[scores objectAtIndex:0] integerValue]];
    self.hole2Field.text = [NSString stringWithFormat:@"%d", [[scores objectAtIndex:1] integerValue]];
    self.hole3Field.text = [NSString stringWithFormat:@"%d", [[scores objectAtIndex:2] integerValue]];
    self.hole4Field.text = [NSString stringWithFormat:@"%d", [[scores objectAtIndex:3] integerValue]];
    self.hole5Field.text = [NSString stringWithFormat:@"%d", [[scores objectAtIndex:4] integerValue]]; 
```

等等

关于如何填充分数数组的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:27:46.163

您的可变数组已达到 0，因为它尚未分配/初始化。你要么必须把它`NSMutableArray *myscores = [NSMutableArray array];`放在你的 [[self delegate] ] 调用之上。

或者更好的方法是创建您的 myscores 并使用内置的 nsarray 超类方法传递该方法，该方法负责分配/初始化您的数组。

`NSMutableArray *myscores = [NSMutableArray arrayWithArray:[[self delegate] getHoleScore:self score:theScore];`

还要确保 `[[self delegate]getHoleScore:self score:theScore]`没有向您发送空数组，在空数组上调用 -objectAtIndex:a 会使您的代码崩溃。检查数组是否为空的一个好方法是在数组上调用 method -count 方法，在数组上调用 count 不会使您的代码崩溃，即使它为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:15:13.220

嘿，谢谢大家的帮助。你是对的，getHoleScore 返回了零。它正在使用 sqlite 数据库，但是一旦我清除它然后重新添加数据，一切正常。

# sql - 在 SQL Server 2008 中创建数据库

> ID：12761792
> 
> 赞同：1
> 
> 时间：2012-10-06T16:53:33.530
> 
> 标签：sql, sql-server, database

我无法在 SQL Server 2008 中创建数据库。这是我每次收到的消息：

```
标题：Microsoft SQL Server 管理工作室
------------------------------

为数据库“大学”创建失败。(Microsoft.SqlServer.Smo)

------------------------------
附加信息：

执行 Transact-SQL 语句或批处理时发生异常。(Microsoft.SqlServer.ConnectionInfo)

------------------------------

数据库“master”中的 CREATE DATABASE 权限被拒绝。（Microsoft SQL Server，错误：262）

如需帮助，请单击：http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&ProdVer=10.00.1600&EvtSrc=MSSQLServer&EvtID=262&LinkId=20476

```

应该做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:03:47.087

您需要授予该帐户您创建数据库的使用权限。

您可能需要使用该`sa`帐户登录并`GRANT`在用户帐户上执行。

```
GRANT CREATE DATABASE TO YourAccount; 
```

[http://msdn.microsoft.com/en-us/library/ms178569.aspx](http://msdn.microsoft.com/en-us/library/ms178569.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T17:31:55.063

这与登录用户的权限有关。
解决方案 1)
单击开始 -> 单击 Microsoft SQL Server 2005
现在右键单击 SQL Server Management Studio
单击以管理员身份运行

解决方案2)

检查`select user_name()`您是否没有以访客身份登录。

使用 SQLCMD 将域帐户作为 sysadmin 添加到 SQL Express

```
Start a command shell elevated
type SQLCMD –S (local)\sqlexpress

CREATE LOGIN [your domain account] FROM WINDOWS; 
```

检查登录是否创建成功

```
SELECT NAME FROM SYS.SERVER_PRINCIPALS 
```

授予系统管理员权限

```
SP_ADDSRVROLEMEMBER ‘darth\vader’, ‘sysadmin’ 
```

参考：http: [//blogs.msdn.com/b/dparys/archive/2009/09/17/create-database-permission-denied-in-database-master-my-fix.aspx](http://blogs.msdn.com/b/dparys/archive/2009/09/17/create-database-permission-denied-in-database-master-my-fix.aspx)

# iphone - 在本地通知中检测“关闭”按钮

> ID：12761793
> 
> 赞同：0
> 
> 时间：2012-10-06T16:53:35.033
> 
> 标签：iphone, ios, ipad

我正在编写一个应用程序，用户设置一种每日警报，应用程序每天同时显示某些信息。我正在尝试使用本地通知来制作此功能。我的问题是当用户按下收到的本地通知的关闭按钮时，因为没有办法检测到这个事件。我一直在寻找，似乎没有解决方案。我只是发布这个问题以确保没有关于“关闭”事件的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:47:42.360

您是否尝试添加重复通知？

检查这个属性：notif.repeatInterval

您可以添加重复通知，每小时或每天触发一次，或者...

# java - 使用 Java 检查 PC 是否具有 Internet 连接

> ID：12761798
> 
> 赞同：0
> 
> 时间：2012-10-06T16:54:10.940
> 
> 标签：java, connection

> **可能重复：**
> [使用 Java 检测 Internet 连接](https://stackoverflow.com/questions/1139547/detect-internet-connection-using-java)
> [如何检查 Java 中是否存在 Internet 连接？](https://stackoverflow.com/questions/1402005/how-to-check-if-internet-connection-is-present-in-java)

以下是我检查 PC 是否具有 Internet 连接的代码：

```
try{
    URL url = new URL("http://www.google.co.in");
    URLConnection connection = url.openConnection();
    connected = true;
}
catch(IOException ioe){
    connected = false;
    ioe.printStackTrace();
} 
```

我想知道这是否是一种可靠且最好的方法？只要没有互联网连接，就会抛出一个接受，并且布尔变量 connected 的值等于`false`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:57:52.557

尝试使用[InetAddress.isReachable()](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html#isReachable)

# exception - 引发异常的 Visual Studio Express 2012 烦人的弹出对话框

> ID：12761800
> 
> 赞同：7
> 
> 时间：2012-10-06T16:54:34.287
> 
> 标签：exception, popup, visual-studio-2012, modal-dialog, breakpoints

**问题描述：**

每当抛出异常但未被捕获时，就会弹出一个对话框。我希望 Visual Studio Express 2012 只是打破并停止使用此模式对话框窗口获取我的所有输入。对话框示例：![在此处输入图像描述](../Images/5517bdb8a0968ba7d41ef26aab871e5a.png)

**想要的解决方案：**

VS **2010**不会显示这个烦人的弹出窗口，而是显示异常助手。我如何在 2012 年获得与 2010 年相同类型的异常中断？即使这是不可能的，我真的希望在保持休息的同时弹出窗口**消失。**

**我试图解决这个问题的事情：**

1.  在 Google 和 StackOverflow 上搜索解决方案（我使用的一些关键字：Visual Studio 2012、弹出窗口、窗口、对话框、异常助手、异常、中断）
2.  在 VS 2012 上运行修复
3.  卸载并删除设置（文件夹：C:\Users\<username>\Documents\Visual Studio 2012），然后进行安装
4.  工具 -> 导入和导出设置 -> “重置所有设置”
5.  启用“抛出异常类型时中断”
6.  更改设置：“工具 -> 选项 -> 调试 -> 常规”

编辑：

我用的是Express版，[没有异常助手了](http://connect.microsoft.com/VisualStudio/feedback/details/762652/enable-exception-assistant-option-missing-from-vs2012-express-for-desktop)！:(

编辑2：

使用 AutoHotkey 找到了一个（非常丑陋的）解决方法：

```
#SingleInstance force
#Persistent
loop
{
    WinWaitActive, Microsoft Visual Studio Express 2012 for Windows Desktop
    WinClose, Microsoft Visual Studio Express 2012 for Windows Desktop
}
return 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:10:50.820

根据以下论坛上的答案，VS 2012 Express 不再具有异常助手选项： [http ://connect.microsoft.com/VisualStudio/feedback/details/762652/enable-exception-assistant-option-missing-from- vs2012-express-for-desktop](http://connect.microsoft.com/VisualStudio/feedback/details/762652/enable-exception-assistant-option-missing-from-vs2012-express-for-desktop)

希望我们能在未来版本的 VS Express 中看到它。据我所知，VS 2010 Express 仍然可用，2012 可以读取 2010 项目而不会破坏兼容性。因此，如果这对您来说很重要，您可以回到 2010 年追踪错误。这不是一个特别令人兴奋的解决方案，但我仍然印象深刻的是，Microsoft 提供了与 Express 版本中一样多的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T17:07:45.350

在 VS2012 中，当我取消选中工具 -> 选项 -> 调试 -> 常规 -> “启用异常助手”时，我得到了烦人的对话框。

# delphi - 添加记录编号时跳过组行

> ID：12761805
> 
> 赞同：0
> 
> 时间：2012-10-06T16:55:27.367
> 
> 标签：delphi, devexpress, tcxgrid

我有以下代码在 cxGrid 中添加“recordnumbers”，但它有一个不需要的副作用，如果它是一个带有分组的网格，那么每次有一个 GroupRow 时它都会步进一个数字，然后有一个缺失的数字。任何避免这种情况的方法

```
procedure TfrmProjectTasksActive.colCountGetDisplayText(Sender: TcxCustomGridTableItem; ARecord: TcxCustomGridRecord; var AText: string);
var
  Row: integer;
begin
  Row := Sender.GridView.DataController.GetRowIndexByRecordIndex(aRecord.RecordIndex, False);
  aText := Format('%.*d', [3, (Row + 1)]);;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:17:19.877

在该行应该起作用之前减去组数，例如：

```
procedure TfrmProjectTasksActive.colCountGetDisplayText(Sender: TcxCustomGridTableItem; ARecord: TcxCustomGridRecord; var AText: string);
var
  Row, GrIdx: integer;
begin
  Row   := Sender.GridView.DataController.GetRowIndexByRecordIndex(aRecord.RecordIndex, False);
  GrIdx := Sender.GridView.DataController.Groups.DataGroupIndexByRowIndex[Row] + 1;
  aText := Format('%.*d', [3, (Row + 1 - GrIdx)]);
end; 
```

您需要`+1`in ，`GrIdx`因为当没有组时，组索引为`-1`，第一组有索引`0`，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:44:06.797

这应该可以工作（未经测试，内存不足......）：

```
procedure TfrmProjectTasksActive.colCountGetDisplayText(Sender: TcxCustomGridTableItem; ARecord: TcxCustomGridRecord; var AText: string);
var
  Row: integer;
  aRowInfo : TcxRowInfo;
begin
  aRowInfo := ARecord.GridView.DataController.GetRowInfo(ARecord.Index);
  if not (aRowInfo.Level < ARecord.GridView.DataController.Groups.GroupingItemCount) then //test, if Row is not a group-row
  begin
    Row := Sender.GridView.DataController.GetRowIndexByRecordIndex(aRecord.RecordIndex, False);
    aText := Format('%.*d', [3, (Row + 1)]);
  end;
end; 
```

希望我的想法是正确的，如果它不能开箱即用，对不起。但是“aRowInfo”至少应该给你正确的提示......另外：注意“ARecord”的“Index”和“RecordIndex”之间的区别。

# python - matplotlib：同一张图上有2个不同的图例

> ID：12761806
> 
> 赞同：81
> 
> 时间：2012-10-06T16:55:30.393
> 
> 标签：python, matplotlib, legend

我有一个情节，其中不同的颜色用于不同的参数，不同的线条样式用于不同的算法。目标是比较使用相似参数执行的不同算法的结果。这意味着我总共使用了 4 种不同的颜色和 3 种不同的线型，在同一张图上总共有 12 个图。

我实际上是根据颜色构建图例，将每种颜色与相应的参数相关联。现在我想在同一个图表上显示第二个图例，每个线型的含义。有可能实现吗？如何？

这是我的代码实际上的样子：

```
colors = ['b', 'r', 'g', 'c']
cc = cycle(c)
for p in parameters:

    d1 = algo1(p)
    d2 = algo2(p)
    d3 = algo3(p)

    pyplot.hold(True)
    c = next(cc)
    pyplot.plot(d1, '-', color=c, label="d1")
    pyplot.plot(d1, '--', color=c)
    pyplot.plot(d2, '.-', color=c)

pyplot.legend() 
```

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-10-06T17:25:29.393

[matplotlib 文档中有一个关于该主题的部分](https://matplotlib.org/3.3.3/tutorials/intermediate/legend_guide.html#multiple-legends-on-the-same-axes)。

这是您的特定示例的代码：

```
import itertools
from matplotlib import pyplot

colors = ['b', 'r', 'g', 'c']
cc = itertools.cycle(colors)
plot_lines = []
for p in parameters:

    d1 = algo1(p)
    d2 = algo2(p)
    d3 = algo3(p)

    pyplot.hold(True)
    c = next(cc)
    l1, = pyplot.plot(d1, '-', color=c)
    l2, = pyplot.plot(d2, '--', color=c)
    l3, = pyplot.plot(d3, '.-', color=c)

    plot_lines.append([l1, l2, l3])

legend1 = pyplot.legend(plot_lines[0], ["algo1", "algo2", "algo3"], loc=1)
pyplot.legend([l[0] for l in plot_lines], parameters, loc=4)
pyplot.gca().add_artist(legend1) 
```

这是它的输出示例： ![绘制 2 个图例，每个参数和每个算法](../Images/823c2224eaf2b8b5ba6295d7043fd1bc.png)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-06-22T13:44:08.653

这也是一种更“动手”的方式（即与任何图形轴显式交互）：

```
import itertools
from matplotlib import pyplot

fig, axes = plt.subplot(1,1)

colors = ['b', 'r', 'g', 'c']
cc = itertools.cycle(colors)
plot_lines = []
for p in parameters:

    d1 = algo1(p)
    d2 = algo2(p)
    d3 = algo3(p)

    c = next(cc)
    axes.plot(d1, '-', color=c)
    axes.plot(d2, '--', color=c)
    axes.plot(d3, '.-', color=c)

# In total 3x3 lines have been plotted
lines = axes.get_lines()
legend1 = pyplot.legend([lines[i] for i in [0,1,2]], ["algo1", "algo2", "algo3"], loc=1)
legend2 = pyplot.legend([lines[i] for i in [0,3,6]], parameters, loc=4)
axes.add_artist(legend1)
axes.add_artist(legend2) 
```

我喜欢这种写法，因为它允许以一种不那么晦涩的方式潜在地使用不同的轴。您可以先创建一组图例，然后使用“add_artist”方法将它们添加到您想要的轴上。另外，我是从 matplotlib 开始的，至少对我来说，在明确对象时更容易理解脚本。

注意：请注意，您的图例可能会在显示/保存时被截断。要解决此问题，请使用方法 axes.set_position([left, bottom, width, length]) 相对于图形大小缩小子图并显示图例。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-09-24T10:50:09.073

使用双鬼轴怎么样？

```
import matplotlib.pyplot as plt
import numpy as np

fig, ax = plt.subplots()

colors = ['b', 'r', 'g', ]
styles = ['-', '--', '-.']

for cc, col in enumerate(colors):
    for ss, sty in enumerate(styles):
        print(cc, ss)
        ax.plot([0, 1], [cc, ss], c=colors[cc], ls=styles[ss])

for cc, col in enumerate(colors):
    ax.plot(np.NaN, np.NaN, c=colors[cc], label=col)

ax2 = ax.twinx()
for ss, sty in enumerate(styles):
    ax2.plot(np.NaN, np.NaN, ls=styles[ss],
             label='style ' + str(ss), c='black')
ax2.get_yaxis().set_visible(False)

ax.legend(loc=1)
ax2.legend(loc=3)

plt.show() 
```

[![在此处输入图像描述](../Images/009526c7028aa6236e220d5cccba301b.png)](https://i.stack.imgur.com/1tX3u.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-01T11:53:15.433

你也可以使用`line.get_label()`

```
import matplotlib.pyplot as plt

plt.figure()

colors = ['b', 'r', 'g', 'c']
parameters = [1,2,3,4]
for p in parameters:

  color = colors[parameters.index(p)]
  plt.plot([1,10],[1,p], '-', c=color, label='auto label '+str(p))

lines = plt.gca().get_lines()
include = [0,1]
legend1 = plt.legend([lines[i] for i in include],[lines[i].get_label() for i in include], loc=1)
legend2 = plt.legend([lines[i] for i in [2,3]],['manual label 3','manual label 4'], loc=4)
plt.gca().add_artist(legend1)
plt.show() 
```

[![自动和手动标签](../Images/af20dd9a13c4962070122fe471112987.png)](https://i.stack.imgur.com/qLZ2l.png)

# python - 将 GAE Webapp2 与多个文件中的类一起使用

> ID：12761811
> 
> 赞同：2
> 
> 时间：2012-10-06T16:55:56.297
> 
> 标签：python, google-app-engine, webapp2

我在使用 Webapp2 时遇到问题。当我在 app.yaml 中放置指向不同 python 文件的 URL 的处理程序时，我收到以下错误：

```
ERROR    2012-10-06 16:44:57,759 wsgi.py:203] 
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 195, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 250, in _LoadHandler
    __import__(cumulative_path)
ImportError: No module named application 
```

我的 app.yaml：

```
application: [[app's name]]
version: 1
runtime: python27
api_version: 1
threadsafe: yes

inbound_services:
- mail

handlers:

- url: /send
  script: email.application

- url: /_ah/mail/update@sitdown-standup.appspotmail.com.*
  script: email.application

- url: /.*
  script: SDSUmodels.application

libraries:
- name: webapp2
  version: "2.5.1" 
```

SDSUmodels.py 以：

```
application = webapp2.WSGIApplication([('/info', MakeBasicInfo)], 
                                   debug=True)` 
```

并且 email.py 以：

```
application = webapp2.WSGIApplication([('/request', Request_update),
                                   ('/send', Send_report),
                                   (Receive_email.mapping())], 
                                   debug=True)` 
```

当我删除这些行

```
- url: /send
  script: email.application 
```

从 app.yaml 中，错误停止了，但这让我无法将 URL 指向特定文件。

我可以在这个问题中看到一些处理这个[问题](https://stackoverflow.com/questions/11181957/how-to-organise-files-with-python27-app-engine-webapp2-framework)的替代方法，但我想知道为什么这种方法不起作用。我之前在另一个项目中使用旧的 webapp 版本完成了此操作，并且可以正常工作 - 详细信息如下。

应用程序.yaml：

```
application: [[other app's name]]
version: 1
runtime: python
api_version: 1

handlers:
- url: /stylesheets
  static_dir: stylesheets

- url: /twitter
  script: twitter.py

- url: /_ah/mail/kindle@shelvdtracker.appspotmail.com.*
  script: kindle.py

- url: /.*
  script: web.py

inbound_services:
- mail 
```

twitter.py 以：

```
application = webapp.WSGIApplication(
                                     [('/twitter', Process_new_DM)],
                                     debug=True)

def main():
    run_wsgi_app(application)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:21:38.913

还有一个名为的标准库[`email`](http://docs.python.org/library/email.html)；它是在找到本地模块之前加载的。

将模块重命名为其他名称，它将起作用。

# php - 使用标头在php中下载zip文件

> ID：12761812
> 
> 赞同：2
> 
> 时间：2012-10-06T16:56:07.863
> 
> 标签：php, zip

我有以下用于下载 zip 文件的 PHP 脚本：

```
header("Content-length:".filesize($archive_file_name));
header('Content-Type: application/zip'); // ZIP file
header('Content-Disposition: attachment; filename="downloadpackage.zip"');
header('Content-Transfer-Encoding: binary');
readfile($archive_file_name);
exit(); 
```

但它不会强制下载 zip 文件，而是显示许多不寻常的字符，如下所示：

PK[�FA����#�X$D:\voice_06101243342pm014771957.wav�|�s]�y���b�CI\��{2m��M'�Eibu2\@B����{� 6b# $H,\@��:��Z�(q�����ә���Y��q�����,����� d��y��O�tp$ PĽg��w}��}�r֯[7�u�"w���|o�7/Z��ˋ^Z������Ң�ZTZ\S|N����c� X8��c�X8��c�X8��c�X8��c�X8����2,��a�oA*=���do:��|ˉ'rb�|�L2� *^�:q׵}/��\�s�Z?��G�[��=ϗ?

我还在 headers 函数之前放置了以下代码：

```
if (headers_sent()) 
{
  // HTTP header has already been sent
  return false;
}
// clean buffer(s)
while (ob_get_level() > 0)
{
   ob_end_clean();
} 
```

这忽略显示那些字符和 zip 也不是强制下载。我无法弄清楚问题，请帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T23:49:31.643

尝试将此添加到您的标题中：

```
header('Content-Description: File Transfer'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:13:42.163

```
PK[�FA����#�X$D:\voice_06101243342pm014771957.wav�|
�s]�y���b�CI\��{2m��M'�Eibu2\@B��܋{� 6b# 
$H,\@��:��Z�(q�����ә���Y��q�����,�     ���� d��y��O�tp$PĽg��w}��}
�r֯[7�u�"w���|o�7/Z��ˋ^Z������Ң�ZTZ\S|N����c�X8��c�X8��c�X8��c�X8��c�X8���۲,��a�oA*
=ە���do:��|ˉ'rb�|�L2�*^�:q׵}/��\�s�Z?��G�[��=ϗ? 
```

这是您的 zip 文件。

您正在接收一个 zip 文件并且没有任何问题，您只需要更正您的 php 处理脚本，因为显然它正在将其处理为纯文本/字符串。

请注意，`PK`在开始时，zip 文件以“PK”数据开头。通过使用十六进制编辑器打开任何 zip 文件来测试自己。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-31T09:51:53.230

这是我用来下载文件的简单函数：

```
function _download ($file_name) {
  $src = fopen($this->download_path . $file_name,'r') or die("\n\n ========= Could not download $file_name\n");
  $dest = fopen($file_name,'w');
  stream_copy_to_stream($src, $dest);
} 
```

# android - 为什么弹出窗口不起作用？

> ID：12761817
> 
> 赞同：0
> 
> 时间：2012-10-06T16:56:19.107
> 
> 标签：android, google-maps

我正在使用 android 谷歌地图，地图上有不同的引脚，名称和关闭按钮以及移动按钮。弹出窗口显示在地图上，但是当单击另一个引脚时会出现异常：-

```
10-06 22:17:17.080: E/AndroidRuntime(25156): FATAL EXCEPTION: main
10-06 22:17:17.080: E/AndroidRuntime(25156): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
10-06 22:17:17.080: E/AndroidRuntime(25156):    at android.view.ViewGroup.addViewInner(ViewGroup.java:3011)
10-06 22:17:17.080: E/AndroidRuntime(25156):    at android.view.ViewGroup.addView(ViewGroup.java:2900)
10-06 22:17:17.080: E/AndroidRuntime(25156):    at android.view.ViewGroup.addView(ViewGroup.java:2880)
10-06 22:17:17.080: E/AndroidRuntime(25156):    at com.appstudioz.bidnear.map.BidNearItemizedOverlay.onTap(BidNearItemizedOverlay.java:85)
10-06 22:17:17.080: E/AndroidRuntime(25156):    at com.google.android.maps.ItemizedOverlay.onTap(ItemizedOverlay.java:453)
10-06 22:17:17.080: E/AndroidRuntime(25156):    at com.google.android.maps.OverlayBundle.onTap(OverlayBundle.java:83)
10-06 22:17:17.080: E/AndroidRuntime(25156):    at com.google.android.maps.MapView$1.onSingleTapUp(MapView.java:356)
10-06 22:17:17.080: E/AndroidRuntime(25156):    at com.google.android.maps.GestureDetector.onTouchEvent(GestureDetector.java:533)
10-06 22:17:17.080: E/AndroidRuntime(25156):    at com.google.android.maps.MapView.onTouchEvent(MapView.java:683)
10-06 22:17:17.080: E/AndroidRuntime(25156):    at android.view.View.dispatchTouchEvent(View.java:4609)
 10-06 22:17:17.080: E/AndroidRuntime(25156):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1554)
10-06 22:17:17.080: E/AndroidRuntime(25156):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1320)
 10-06 22:17:17.080: E/AndroidRuntime(25156):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
 10-06 22:17:17.080: E/AndroidRuntime(25156):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
 10-06 22:17:17.080: E/AndroidRuntime(25156):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
  10-06 22:17:17.080: E/AndroidRuntime(25156):  at  android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
 10-06 22:17:17.080: E/AndroidRuntime(25156):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
 10-06 22:17:17.080: E/AndroidRuntime(25156):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
 10-06 22:17:17.080: E/AndroidRuntime(25156):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
 10-06 22:17:17.080: E/AndroidRuntime(25156):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
 10-06 22:17:17.080: E/AndroidRuntime(25156):   at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1732)
 10-06 22:17:17.080: E/AndroidRuntime(25156):   at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1267)
 10-06 22:17:17.080: E/AndroidRuntime(25156):   at android.app.Activity.dispatchTouchEvent(Activity.java:2315)
  10-06 22:17:17.080: E/AndroidRuntime(25156):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1705)
 10-06 22:17:17.080: E/AndroidRuntime(25156):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
  10-06 22:17:17.080: E/AndroidRuntime(25156):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
  10-06 22:17:17.080: E/AndroidRuntime(25156):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at  android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
  10-06 22:17:17.080: E/AndroidRuntime(25156):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1732)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1267)
    10-06 22:17:17.080: E/AndroidRuntime(25156):    at android.app.Activity.dispatchTouchEvent(Activity.java:2315)
    10-06 22:17:17.080: E/AndroidRuntime(25156):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1705)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at android.view.View.dispatchPointerEvent(View.java:4677)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2394)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at android.view.ViewRoot.handleMessage(ViewRoot.java:2054)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at android.os.Handler.dispatchMessage(Handler.java:99)
  10-06 22:17:17.080: E/AndroidRuntime(25156):  at android.os.Looper.loop(Looper.java:132)
  10-06 22:17:17.080: E/AndroidRuntime(25156):  at android.app.ActivityThread.main(ActivityThread.java:4123)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at java.lang.reflect.Method.invokeNative(Native Method)
  10-06 22:17:17.080: E/AndroidRuntime(25156):  at java.lang.reflect.Method.invoke(Method.java:491)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
   10-06 22:17:17.080: E/AndroidRuntime(25156):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
    10-06 22:17:17.080: E/AndroidRuntime(25156):    at dalvik.system.NativeStart.main(Native Method) 
```

我将此代码用作：-我的网络服务提供了具有纬度，经度并在地图上显示为的对象数量：-

```
MapController objmapcontroller;
    GeoPoint objgeopointp;
    double lat, lng;
    try {
        lat = Double.parseDouble(latitude);
        lng = Double.parseDouble(longitude);
    } catch (Exception e) {
        e.printStackTrace();
        lat = lng = 0;
    }
    objgeopointp = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
    objmapcontroller = objmapView.getController();

    // ---Add a location marker---

    // create and add an OverlayItem to the MyItemizedOverlay list
    OverlayItem overlayitem = new OverlayItem(objgeopointp, title, snippet);
    itemizedoverlay.addOverlay(overlayitem);
    objmapcontroller.animateTo(objgeopointp);
    objmapcontroller.setZoom(16);
    // add the overlays to the map
    mapOverlays.add(itemizedoverlay);
    objmapView.invalidate(); 
```

而我的覆盖类就像那个类 Ontap 方法一样，整个类就像

```
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
private Context mContext;
private MapView objmapview;
private View popUp;

public BidNearItemizedOverlay(Drawable defaultMarker, Context ctx,MapView objmapview,View popUp) {
    super(boundCenterBottom(defaultMarker));
    mContext =ctx;
    this.objmapview=objmapview;
    this.popUp=popUp;
}

public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}

public void clear() {
    mOverlays.clear();
    populate();
}

@Override
protected OverlayItem createItem(int i) {

    return mOverlays.get(i);
}

@Override
public int size() {
    Log.e("------size--",""+mOverlays.size());
    return mOverlays.size();
}

@Override
protected boolean onTap(int index) {
     OverlayItem item=getItem(index);
      GeoPoint geo=item.getPoint();
      MapView.LayoutParams mapParams = new MapView.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, 
            ViewGroup.LayoutParams.WRAP_CONTENT,
            geo,
            MapView.LayoutParams.BOTTOM_CENTER);
     TextView objtxt = (TextView)popUp.findViewById(R.id.textup);
     TextView objtxt2 = (TextView)popUp.findViewById(R.id.text2);
     objtxt.setText(item.getTitle());
     objtxt2.setText(item.getSnippet());
     ImageView objimg = (ImageView)popUp.findViewById(R.id.bluebutton);
     ImageButton objbtn = (ImageButton)popUp.findViewById(R.id.closebutton);
     objbtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            System.out.println("aclosehjdfd");
        }
    });
     objimg.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            System.out.println("hohodshfsdh");
        }
    });
    objmapview.addView(popUp, mapParams);
    return true;
} 
```

请任何人建议我如何实现这个目标提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:08:41.400

看起来您发送到 BidNearItemizedOverlay 的 View 弹出窗口已经有一个父项。当您调用 addView(popUp, mapParams) 时，您正试图为其提供第二个父级。这是不允许的。如果你真的想使用它，你必须首先将它从它的父级中分离出来。最简单的解决方案可能是基于 popUp 中的属性创建一个新视图，而不是使用该实际视图。

或尝试：

```
((ViewGroup)popUp.getParent()).removeView(popUp); 
```

# itextsharp - 更改使用 PdfSharp/Itextsharp 创建的 pdf 上的页码

> ID：12761818
> 
> 赞同：1
> 
> 时间：2012-10-06T16:56:22.800
> 
> 标签：itextsharp, pdfsharp

我正在使用 PdfSharp/Itextsharp 将许多文档拼接在一起，并在每页的底部标记一个页码。包中的第一个文档是目录，没有分页。我从 ToC 之后的第一页开始分页。问题是文档上显示的页码与 Adob​​e Reader 显示的页码不同。

我检查了其他文档，看起来 pdf 支持以某种方式重置页码的选项，因此第 1 页可以稍后在文档中重新开始。

如何使用 pdfsharp 或 itextsharp 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T07:00:08.660

Adobe Reader 中显示的页码由“页标签”定义。

例如：您将 TOC 编号为 i、ii、iii、iv、v 等。实际页码是 1、2、3、4、5 等。

这是我书中的一个 Java 示例，它展示了如何使用页面标签：http: [//itextpdf.com/examples/iia.php](http://itextpdf.com/examples/iia.php?id=234) ?id=234 [[已归档](https://web.archive.org/web/20150922111403/http://www.itextpdf.com/examples/iia.php?id=234)] 它应该很容易适应 C# 中的使用。

如果没有，请在此站点上查找相应的示例：http: [//kuujinbo.info/iTextInAction2Ed/index.aspx](http://kuujinbo.info/iTextInAction2Ed/index.aspx)

# ruby - SOA 和 API - API 是端点服务还是需要不同的服务？

> ID：12761827
> 
> 赞同：2
> 
> 时间：2012-10-06T16:57:36.220
> 
> 标签：ruby, web-services, api, rest, soa

我正在设计一个 RESTful Service Oriented Architecture Web 应用程序，以使其尽可能地扩展，并将不同类型的服务放在不同的机器上（将资源密集型操作与其他服务分开）。

我还希望用户能够访问他们的数据来制作自己的应用程序。我不确定是否必须将这些服务设计为向世界开放，因此只需让它们在 Web 域（如 AWS）上侦听或创建另一个服务来处理 API 请求。

拥有安全的开放式 Web 服务对我来说是有意义的，但它确实给架构本身增加了很多复杂性，因为每个服务都成为必须被同一套件中的其他服务识别（信任）的客户端，就像我一样必须识别试图访问自己数据的 3rd 方应用程序。

这是正确的 SOA 方法吗？我想确定的是，我没有混合错误的概念来设计错误的面向服务的架构。

所有服务都有 crud 接口，因此可以使用 REST 原则对其进行查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:57:13.550

根据您系统的性质，拥有不安全的 Web 服务可能是可行的，因此它们都可以在没有安全开销的情况下相互通信。为了使服务可供第三方使用，您可以使用[服务外围防护](http://soapatterns.org/service_perimeter_guard.php)作为从外部访问服务并在此层应用安全性的唯一机制。这样做的好处是为您的所有服务提供一致的安全性，但是如果外围受到损害，则可以获得对所有服务的访问。

这种方法可能不适用于所有服务。例如，被认为是“个人机密”的信息（例如，家庭住址、紧急联系方式、健康数据等员工数据）需要得到保护，以便未经授权的员工无法访问它。

关于您将不同服务放在不同机器上的评论，这将导致某些机器上的资源利用不足，而另一些机器上的资源可能过度利用。为避免这种情况，请将所有服务部署到所有机器并使用负载均衡器。这将提供更优化的资源使用并简化部署（例如，使用 Chef 或 Puppet），因为所有节点都是相同的。随着资源使用量的增加，您可以简单地添加更多节点。同样，如果资源使用率低，您可以删除节点。

关于您的最后一句话，REST 比 CRUD（例如 HATEOAS）要多得多。

# bash - UWSGI 指定套接字位置

> ID：12761831
> 
> 赞同：0
> 
> 时间：2012-10-06T16:58:03.507
> 
> 标签：bash, sockets, debian, uwsgi

我试图在逻辑上找到我所有的套接字，但我很难理解。

比如说，我希望它们在这个目录中：`/var/run/<app>/`

我应该在命令行参数中指定 uWSGI

```
--socket </var/run/<app>/> 
```

但是在我的`uwsgi.ini`我有这个：

```
socket = 127.0.0.1:3031 
```

为了得到我想要的效果，我应该做什么

```
socket = /var/run/uwsgi 
```

我只是感到困惑，因为一个是IP，一个是目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:08:53.570

如[文档所述](http://projects.unbit.it/uwsgi/wiki/Doc)，您可以使用[网络](http://en.wikipedia.org/wiki/Internet_socket)或[Unix 域](http://en.wikipedia.org/wiki/Unix_domain_socket)套接字。

# caching - Java 缓存系统 (JCS) - 以编程方式创建区域

> ID：12761832
> 
> 赞同：3
> 
> 时间：2012-10-06T16:58:13.663
> 
> 标签：caching, jcs

我们计划在我们的应用程序中使用一些缓存机制，并在与许多其他缓存解决方案进行比较研究后选择了 Java 缓存系统（JCS）。当我使用外部配置 (cache.ccf) 来定义缓存区域及其属性（如 maxlife、ideltime 等）时，一切都很好。

但是要求更改为具有动态缓存区域，即我们需要在运行时定义缓存区域及其属性。我无法找到有关此操作的更多详细信息或示例。我在运行时成功创建了缓存区域（使用下面的方法签名）。

```
ICompositeCacheAttributes  cattr=..
IElementAttributes attr = new ElementAttributes();
attr.setIsEternal(false);
attr.setMaxLifeSeconds( maxLife );    
defineRegion(name,  cattr,attr); 
```

但问题是，IElmentAttributes 没有设置为缓存。我对 JCS 的来源进行了研究，发现`attr`从未设置过。这是未使用的参数！有点怪

经过一番谷歌搜索后，我发现以下选项可以手动设置属性，但仍然无效

```
 IElementAttributes attr = new ElementAttributes();
 attr.setIsEternal(false);
 attr.setMaxLifeSeconds( maxLife );
 jcs.setDefaultElementAttributes(attr); 
```

我想要的只是为创建的区域设置 maxLifeSeconds 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-11T19:29:58.270

Sample code here

```
Properties props = new Properties();
//
// Default cache configs
//
props.put("jcs.default", "");
props.put("jcs.default.cacheattributes","org.apache.jcs.engine.CompositeCacheAttributes");
props.put("jcs.default.cacheattributes.MaxObjects","1000");
props.put("jcs.default.cacheattributes.MemoryCacheName", "org.apache.jcs.engine.memory.lru.LRUMemoryCache");
props.put("jcs.default.cacheattributes.UseMemoryShrinker", "true");
props.put("jcs.default.cacheattributes.MaxMemoryIdleTimeSeconds", "3600");
props.put("jcs.default.cacheattributes.ShrinkerIntervalSeconds", "60");
props.put("jcs.default.cacheattributes.MaxSpoolPerRun", "500");

//
// Region cache
//
props.put("jcs.region.myregionCache", "");
props.put("jcs.region.myregionCache.cacheattributes", "org.apache.jcs.engine.CompositeCacheAttributes");
props.put("jcs.region.myregionCache.cacheattributes.MaxObjects", "1000");
props.put("jcs.region.myregionCache.cacheattributes.MemoryCacheName", "org.apache.jcs.engine.memory.lru.LRUMemoryCache");
props.put("jcs.region.myregionCache.cacheattributes.UseMemoryShrinker", "true");
props.put("jcs.region.myregionCache.cacheattributes.MaxMemoryIdleTimeSeconds", "3600");
props.put("jcs.region.myregionCache.cacheattributes.ShrinkerIntervalSeconds", "60");
props.put("jcs.region.myregionCache.cacheattributes.MaxSpoolPerRun", "500");
props.put("jcs.region.myregionCache.cacheattributes.DiskUsagePatternName", "UPDATE");
props.put("jcs.region.myregionCache.elementattributes", "org.apache.jcs.engine.ElementAttributes");
props.put("jcs.region.myregionCache.elementattributes.IsEternal", "false");

...

// Configure
CompositeCacheManager ccm = CompositeCacheManager.getUnconfiguredInstance();
ccm.configure(props);

// Access region
CompositeCache myregionCache =  ccm.getCache("myregionCache");

... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:43:31.207

我找到了解决问题的方法，当您将数据放入缓存时，我们需要设置属性。看到有兴趣的人的实现，

```
JCS jcs = JCS.getInstance("REGION");
IElementAttributes attr = new ElementAttributes();
attr.setIsEternal(false);
attr.setMaxLifeSeconds( maxLife );
jcs.put("Key",data, attr); 
```

# java - 在我更改课程后在 eclipse 上使用 GAE，在我重新启动 eclipse 后，更改不会在运行时显示。为什么？

> ID：12761833
> 
> 赞同：0
> 
> 时间：2012-10-06T16:58:15.890
> 
> 标签：java, eclipse, google-app-engine, gwt

为什么在使用 gae 更改课程后需要重新启动 eclipse，以便更改在运行时显示？

# angularjs - 选择由 Angularjs ng-repeat 创建的新 DOM 元素

> ID：12761834
> 
> 赞同：5
> 
> 时间：2012-10-06T16:58:16.927
> 
> 标签：angularjs

我正在将 Angularjs 用于 Web 应用程序。我已经尝试寻找解决我的问题的方法，并且似乎 Angularjs 并不能提供一种简单的方法来访问 ng-Repeat 中新创建的 DOM 元素。

我准备了一个 jsfiddle 来显示实际问题。这是链接：http: [//jsfiddle.net/ADukg/956/](http://jsfiddle.net/ADukg/956/)

请让我知道如何在 ng-repeat 中选择新的 DOM 元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:05:36.433

为了扩展我的评论，我更新了您的小提琴以显示一个简单的指令实现，该指令提醒元素的类。

[http://jsfiddle.net/ADukg/994/](http://jsfiddle.net/ADukg/994/)

原评论：

关于控制器中的 dom 操作，[这里](https://groups.google.com/forum/?fromgroups=#!topic/angular/u52B5bVzdqs)说你根本不应该这样做。它应该放在指令中。控制器应该只包含业务逻辑。

为什么它不起作用，我不知道，但这可能是因为此时 Angular 仍在运行它自己的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T11:43:54.207

有两种方法可以做到这一点：

**1 ng-init**

```
function controller($scope) {
  $scope.items = [{id: 1, name: 'one'}, {id: 2, name: 'two'}];

  $scope.initRepeaterItem(index, item) {
    console.log('new repeater item at index '+index+':', item);
  }
} 
```

```
<ul>
  <li ng-repeat="item in items" ng-init="initRepeaterItem($index, item)"></li>
</ul> 
```

**2 **MutationObserver***稍微复杂*
一点`<ul>`**

 **```
var observer = new MutationObserver(function(mutations) {
  mutations.forEach(function(mutation) {
    // you get notified about DOM mutations here
    // check mutation.type if it was an insertion
    console.log(mutation.target.nodeName, mutation.type, mutation);
  });
});

var config = {childList: true, attributes: false, characterData: false, 
  subtree: false, attributeOldValue: false, characterDataOldValue: false};

observer.observe(element[0], config); 
```

```
演示              http://plnkr.co/h6kTtq
文档     https://developer.mozilla.org/en/docs/Web/API/MutationObserver
浏览器支持   http://caniuse.com/mutationobserver

```**

# android - 如何更新 Fragment UI 中的数据？

> ID：12761838
> 
> 赞同：1
> 
> 时间：2012-10-06T16:58:45.477
> 
> 标签：android

我有以下类扩展片段：

```
public static class DummySectionFragment extends Fragment {

    public static final String ARG_SECTION_NUMBER = "section_number";
    private GridView events;

    public DummySectionFragment() {}

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        Bundle args = getArguments();
        switch (args.getInt(ARG_SECTION_NUMBER)) {
            case 1 : return initializeCalendarScreen(inflater);
            case 2 : return inflater.inflate(R.layout.todo_lists_layout, null);
        }         
        return null;           
    }

    public void updateGridView() {

        int daysInCurrentMonth=(MainActivity.month==1) ? daysInFebruary : COUNT_OF_DAYS_IN_MONTH[MainActivity.month];
        int daysInPrevMonth=(MainActivity.month-1==1) ? daysInFebruary : COUNT_OF_DAYS_IN_MONTH[MainActivity.month-1];
        int daysInNextMonth=(MainActivity.month+1==1) ? daysInFebruary : COUNT_OF_DAYS_IN_MONTH[MainActivity.month+1];

        Calendar calendar=Calendar.getInstance();
        calendar.set(MainActivity.year, MainActivity.month, 1);
        int startDayOfWeek=calendar.get(Calendar.DAY_OF_WEEK);
        List<Integer> dates=new ArrayList<Integer>();
        for (int i=0; i<startDayOfWeek-1; i++) {
            dates.add(daysInPrevMonth-i);
        }
        for (int i=0; i<daysInCurrentMonth; i++) {
            dates.add(i+1);
        }

        ArrayAdapter<Integer> adapter=new ArrayAdapter<Integer>(getActivity(), R.layout.grid_view_cell_layout, R.id.textViewGridCell, dates);
        events.setAdapter(adapter);
    }

    private View initializeCalendarScreen(LayoutInflater inflater) {
        View layout=inflater.inflate(R.layout.calendar_layout, null);
        events=(GridView)layout.findViewById(R.id.gridViewCalendar);
        updateGridView();
        return layout;
    }
} 
```

它工作得很好（我将它用于 FragmentPagerAdapter）。我使用 Activity 中的 updateGridView() 方法来更新 GridView 中的值。但是如果我这样做，我会得到 NullPointerException，因为 ArrayAdapter 的 getActivity() 返回 null。请告诉我，如何从 Activity 更新 Fragment UI？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:18:42.770

`Observer`在 Fragment 中使用 an而不是`updateGridView()`在`Fragment`. `Observer`在你的`Fragment`观察中有一个`Observable`在你的 main`Activity`中。当需要更新数据时，只需`notifyObservers()`调用`Observable`. 该类`Observer`应该是您的 Fragment 的子类，并且应该如下所示：

```
class UpdateGridObserver implements Observer {
    @Override
    public void update(Observable observable, Object data) {
        // Do stuff like:
        // runOnUiThread is REQUIRED because updating the adapter
        // and ListView from a background thread is not allowed
        getActivity().runOnUiThread(new Runnable(){
            updateGridView();
        });
    }
} 
```

这允许更新数据而不必担心范围和所有爵士乐。只要该`Observable`对象可以访问该`Observer`对象，您就应该一切顺利。

如果您需要更多功能而不仅仅是通知，您可以扩展`Observable`该类（与任何类一样）以拥有一个自定义对象。`Observable`这超出了我认为您正在寻找的范围，但我在下面链接了一些 wiki 和 howtos。

观察者-可观察模式：[http ://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)

更多：[http ://www.javaworld.com/jw-10-1996/jw-10-howto.html](http://www.javaworld.com/jw-10-1996/jw-10-howto.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:10:11.623

一种可能的解决方案是：

1.  创建静态全局变量上下文
2.  创建上下文 = inflater.getContext()。
3.  更新 UI 时使用上下文创建 ArrayAdapter。

改变：

```
...=new ArrayAdapter<Integer>(context,...) 
```

# java - java.util.Currency.getInstance 抛出 IllegalArgumentException

> ID：12761846
> 
> 赞同：13
> 
> 时间：2012-10-06T16:59:41.793
> 
> 标签：java

我只是在尝试使用`java.util.Currency`，但对于少数货币代码，它会让我失望`java.lang.IllegalArgumentException`

这是我的简单代码

```
java.util.Currency c = java.util.Currency.getInstance(code); 
```

根据java文档

> 公共静态货币getInstance（字符串货币代码）

```
Returns the Currency instance for the given currency code.

Parameters:
    currencyCode - the ISO 4217 code of the currency 
Returns:
    the Currency instance for the given currency code 
Throws:
    NullPointerException - if currencyCode is null 
    IllegalArgumentException - if currencyCode is not a supported ISO 4217 code. 
```

对于少数代码，我得到了这个例外，其中很少有

1.  优易
2.  COU
3.  TMT

根据[ISO_4217](http://en.wikipedia.org/wiki/ISO_4217)，以上所有代码都是官方 ISO 4217 货币名称，我不知道为什么在这种情况下我会得到这个异常？我需要做其他事情还是需要将一些其他信息传递给 JVM 以获得正确的值？消除我的困惑的任何帮助都是非常明显的，或者可以将我指向 java doc 指向的*ISO 4217 货币*，因为我可以在 ISO 4217 列表中看到上述代码，因此我可能正在查看错误的文档/参考。

为了提供更多见解，这里是堆栈跟踪

```
Exception in thread "main" java.lang.IllegalArgumentException
    at java.util.Currency.getInstance(Unknown Source)
    at java.util.Currency.getInstance(Unknown Source)
    at CurrencyTest1.main(CurrencyTest1.java:10) 
```

## 和Java版本

```
java version "1.6.0_21"
Java(TM) SE Runtime Environment (build 1.6.0_21-b07)
Java HotSpot(TM) 64-Bit Server VM (build 17.0-b17, mixed mode) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T17:17:35.147

这是一个有趣的问题。

COU 和 UYI 都不是真正的货币。COU 是委内瑞拉的旧货币（不再使用），UYI 是一种指数货币，可能被银行用来整理汇率。

在 java 1.7.0_u7 中，currecy *TMT*工作正常。TMT 于 2009 年推出，因此 Java 6 不知道该代码是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T17:09:25.223

因为乌拉圭`UYU`工作得很好而不是哥伦比亚`UYI`，而`COP`不是`COU`哥伦比亚`TMT`也不适合我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T17:09:19.267

编辑：对我来说这有效：

```
 Currency curr = java.util.Currency.getInstance("UYU");
 System.out.println("Currency code:" + curr.getCurrencyCode()); 
```

`UYI`不在 ISO 4217 标准中，这里有一个列表：[http ://www.xe.com/iso4217.php](http://www.xe.com/iso4217.php)

# qt - 模拟 Esc 按键和 QML WebView

> ID：12761848
> 
> 赞同：1
> 
> 时间：2012-10-06T16:59:57.510
> 
> 标签：qt, webview, keypress, qml, simulate

我想模拟在 web 视图上按下 Esc 键。但我找不到任何出路。我考虑过使用 QKeyEvent 和 QApplication::postEvent，但我找不到任何方法来实现它

提前致谢

马尔钦

# uiviewcontroller - 在 secondViewController 中声明的 firstViewController 中加载一个动作

> ID：12761850
> 
> 赞同：0
> 
> 时间：2012-10-06T17:00:08.110
> 
> 标签：uiviewcontroller, ios6

我对 iOS 编程（和编程）仍然很陌生，并试图弄清楚一些基础知识。我的问题是：

我想单击 secondViewController 中的按钮以在 firstViewController 中显示文本“secondViewController 中的按钮被按下” - 这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:19:52.647

是的，这是可能的......有多种方法可以做到......您可以尝试以下解决方案：1.代表 2.本地通知 3.KVO 4.使用共享实例（如 AppDelegate）

互联网上有各种资源可用于所有这些......我不需要详细提及它们。

# java - Java+JavaFX2项目：模块化内容

> ID：12761856
> 
> 赞同：2
> 
> 时间：2012-10-06T17:01:01.170
> 
> 标签：java, javafx-2, modularity, modular

我对 java 和 javafx 2 还很陌生。我想做的是一个应用程序，它基本上是一个用于以后可以添加的单独“模块”的容器。

主应用程序应该是某种内容浏览器，用于扫描文件夹中的模块。然后，您可以选择所需的模块（例如，一个小游戏）并在主应用程序中打开它（如框架）。如果我可以选择全屏显示（仅模块，没有主应用程序），我也会喜欢它。主应用程序和模块也应该能够通信（例如，发送“难度”或“起始级别”等设置并接收分数/结果）。

您知道我应该如何实现模块化（不丢失相互通信）吗？

我试图在谷歌上查找它，但我可能不知道正确的技术术语......所以，任何帮助将不胜感激！

注意：我是一个 GUI 菜鸟（我的大部分编程经验都是基于 CLI 的，而且相当低级）。

编辑：奇怪，它删除了“嗨！” 从第一行开始......我想有些规则迫使我们变得粗鲁;）......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:29:50.153

看看 Java 6+ 中的 ServiceLoader 类，互联网上有很多关于它的文档，但它的要点是你可以向它询问在配置的类路径上找到的接口的实现。例如，您可以具有以下界面：

```
interface AppPlugin {
    Node getContentNode();

    String getName();
} 
```

然后插件需要实现此接口并配置为由 ServiceLoader 加载。在此处查看教程：

[http://weblogs.java.net/blog/timboudreau/archive/2008/08/simple_dependen.html](http://weblogs.java.net/blog/timboudreau/archive/2008/08/simple_dependen.html)

# android - 在特定时间执行某事的最佳方式

> ID：12761857
> 
> 赞同：0
> 
> 时间：2012-10-06T17:01:10.563
> 
> 标签：android

我正在写在特定时间改变飞机模式的应用程序。

如何执行飞行模式切换？使用警报管理器还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:07:51.540

> 在特定时间执行某事的最佳方式

在特定时间执行某事的唯一有效方法是使用`AlarmManager`, 带有`RTC_WAKEUP`警报类型和广播`PendingIntent`，您完全在其中完成工作`onReceive()`（`BroadcastReceiver()`如果它很短）或使用 a`WakeLock`和 a`Service`来完成工作（或者可能我的[`WakefulIntentService`](https://github.com/commonsguy/cwac-wakeful)）。

# javascript - 我可以向由 jQuery 原型创建的对象添加属性吗？

> ID：12761873
> 
> 赞同：0
> 
> 时间：2012-10-06T17:03:46.247
> 
> 标签：javascript, jquery

我有以下代码：

```
 var $form = '',
    $modal = '',
    $submits = ''; 

 function createModal() {
        $modal = $.modal({
            title: title,
            closeButton: true,
            content: content,
            resizeOnLoad: true
        });
        $form = $modal.find('.form');
        $message = $modal.find('.message');
        $submits = $modal.find('.submit-button');
        href = $form.attr('data-href');
    } 
```

有什么方法可以将 $form、$message 和 $submits 添加到 $modal 对象，因为它们都是相关的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:04:59.407

要将数据关联到 jQuery 对象，您可以使用[data](http://api.jquery.com/jQuery.data/)函数：

> jQuery.data() 方法允许我们将任何类型的数据附加到 DOM 元素上，这种方式对循环引用是安全的，因此不会出现内存泄漏。jQuery 确保在通过 jQuery 方法删除 DOM 元素以及用户离开页面时删除数据。我们可以为单个元素设置几个不同的值并稍后检索它们：
> 
> *   jQuery.data(document.body, 'foo', 52);
> *   jQuery.data(document.body, 'bar', 'test');

您通常需要这个，因为简单地将一些属性关联到 jQuery 对象将不允许您从包装相同元素的另一个对象中获取数据。

在您的情况下，如果您保留对您的对象的引用，您可以简单地做

```
 function createModal() {
    var $modal = $.modal({
        title: title,
        closeButton: true,
        content: content,
        resizeOnLoad: true
    });
    return {
        $modal   : $modal,
        $form    : $modal.find('.form'),
        $message : $modal.find('.message'),
        $submits : $modal.find('.submit-button'),
        href     : $form.attr('data-href')
    };
}

var modal = createModal(); 
```

因此，您只保留对整个事物的一个干净引用，您可以访问`modal.$modal`或`modal.$form`.

# c++ - 删除 void 指针是否保证删除正确的大小？

> ID：12761875
> 
> 赞同：10
> 
> 时间：2012-10-06T17:03:48.707
> 
> 标签：c++, pointers, memory-management, void

> **可能重复：**
> [删除空指针是否安全？](https://stackoverflow.com/questions/941832/is-it-safe-to-delete-a-void-pointer)

假设我有一个`new`分配给一个名为的类`MyClass`，并且分配很简单：

```
MyClass *myClassPtr = new MyClass(); 
```

我存储对`void*`我简单地说的列表的引用

```
myListOfPointers.add(static_cast<void*>(myClassPtr)); // this has to be void* 
```

后来我释放内存而不是这样做：

```
delete myClassPtr 
```

我用：

```
delete MyListOfPointer.get(0) 
```

（假设 myClassPtr 引用是零索引。）另外，请注意它必须是`void*`因为这个列表可以存储不同类型的指针，所以我不知道我要删除的指针类型：

**所以我不能做任何事情：**

```
delete static_cast<MyClass*>(MyListOfPointer.get(0)) 
```

这种方式会释放正确的内存大小吗？( `sizeof(MyClass)`)?

**注意：**
我不是在寻找任何指向智能指针的答案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-06T17:15:58.740

通过 a 删除`void*`会导致未定义的行为，因此您不会得到任何保证。

> ### 5.3.5 删除[expr.delete]
> 
> 1 delete-expression 运算符销毁由 new-expression 创建的最派生对象 (1.8) 或数组。
> [...]
> **操作数应具有指向对象类型的指针，或具有指向对象类型指针的单个非显式转换函数（12.3.2）的类类型**。结果类型为 void。^(78)
> 
> 78) 这意味着不能使用 void* 类型的指针删除对象，因为 void 不是对象类型。

强调我的。

* * *

所以即使你说不说，答案是创建某种形式的智能指针。它需要使用类型擦除在外部隐藏类型（允许异构列表），但在内部跟踪它给出的类型以及如何删除它。很像的东西`boost::any`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T17:31:15.843

`void`指针没有类型信息。如果`MyClass`有析构函数，它不会被调用。编译器需要知道它正在删除什么，以便生成适当的代码。如果列表中的所有指针都属于同一类型，那么您应该将该类型存储在列表中，而不是作为`void`. 如果指针是不同的类型，但派生自公共基类型，则为该基类型提供一个虚拟构造函数并存储该类型的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T17:37:47.063

没有必要使用智能指针，它只是智能的。

话虽如此，还有很多其他的可能性。唯一要做的就是将类型信息存储在实际对象中。

```
class Holder {
public:
    template <typename T>
    explicit Holder(T const volatile* t):
        _data(static_cast<void const volatile*>(t)),
        _delete(&Delete<T>)
    {}

    void apply() { _deleter(_data); }

private:
    typedef void (*Deleter)(void const volatile*);

    template <typename T>
    static void Delete(void const volatile* p) {
        delete static_cast<T const volatile*>(p);
    }

    void const volatile* _data;
    Deleter _deleter;
}; 
```

现在：

```
std::list<Holder> owningList;

owningList.push_back(Holder(somePointer));

for (Holder& h: owningList) { h.apply(); } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T17:20:14.350

这个问题的正确答案当然是“不”

编辑：要求提供更多信息，即使我已经在对该问题的评论中做了，删除 void* 是未定义的，这个问题是问这个问题的另一种方式：[删除 void 指针是否安全？](https://stackoverflow.com/questions/941832/is-it-safe-to-delete-a-void-pointer)- 有关详细信息，请参阅那里的答案。

# c++ - C ++：双精度与无符号整数。为什么会这样运行？

> ID：12761878
> 
> 赞同：2
> 
> 时间：2012-10-06T17:04:42.137
> 
> 标签：c++, int, double, unsigned

我尝试将三个数字相乘，但得到一个奇怪的结果。为什么我得到如此不同的结果？

```
unsigned int a = 7;
unsigned int b = 8;
double d1 = -2 * a * b;
double d2 = -2 * (double) a * (double) b;
double d3 = -2 * ( a * b );

// outputs:
// d1 = 4294967184.000000
// d2 = -112.000000
// d3 = 4294967184.000000 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T17:09:16.023

在您的第一个示例中，该数字`-2`被转换为无符号整数。乘法的结果是 -112，当表示为无符号时是 2^32 - 112 = 4294967184。然后这个结果最终被转换`double`为赋值。

在第二个示例中，所有的数学运算都是在双精度数上完成的，从而得出正确的结果。如果您这样做，您将得到相同的结果：

```
double d3 = -2.0 * a * b 
```

就像文字`-2.0`一样。`double`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T17:28:53.930

双签。这意味着第一位（最高有效位又名符号位）确定该数字是正数还是负数。

unsigned int 无法处理负值，因为它使用第一位（最高有效位）来扩展它可以表示的“正”数的范围。所以在

```
double d1 = -2 * a * b; 
```

执行时，您的机器将整个 (-2 * a * b) 放入无符号 int 结构（如 a 和 b）中，并生成以下二进制 1111 1111 1111 1111 1111 1111 1001 0000 （因为它是 112 的二进制补码是 0000 0000 0000 0000 0000 0000 0111 0000）。但这里的问题是它是无符号整数，因此它被视为一个非常大的正整数（即 4294967184），因为它不会将第一个 1 视为符号位。

然后你把它放在一个双倍中，这就是你打印 .00000 的原因。

另一个示例之所以有效，是因为您将 a 类型转换为 double 并将 b 类型转换为 double，因此当将 -2 与 double 相乘时，您的计算机会将其置于 double 结构中，因此将考虑符号位。

```
double d3 = -2 * (double) (a * b) 
```

也会起作用。

要了解已签名和未签名的内容，请查看[此](http://en.wikipedia.org/wiki/Two%27s_complement)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T17:12:30.733

> `double d1 = -2 * a * b;`

右侧的所有内容都是整数类型，因此右侧将被计算为整数类型。`a`并且`b`是无符号的，因此这决定了结果的特定类型。那`-2`怎么办？它已转换为`unsigned int`. 使用 2s 补码算法将负整数转换为无符号整数。这`-2`变成了一个非常大的无符号正整数。

> `double d2 = -2 * (double) a * (double) b;`

现在右手边是混合整数和浮点数，所以右手边将被计算为浮点类型。那`-2`怎么办？它已转换为双精度。现在转换很简单：`-2`转换为 a`double`变为`-2.0`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T17:50:16.997

在 C 和 C++ 中，内置运算符始终应用于相同类型的两个变量。如果两个变量最初不同（或太小），一组非常精确的规则将指导*提升两个变量中的一个（或两个）。*

在这种精确的情况下，`-2`默认情况下是类型`signed int`（同义词`int`），而`a`和`b`是类型`unsigned int`。在这种情况下，规则状态`-2`应该提升为`unsigned int`，并且因为在您的系统上您可能有 32 位`int`和 2 补码表示，这最终是`2**32 - 2`(4 294 967 294)。然后将该数字乘以`a`并取模`2**32`(4 294 967 282)，然后再取`b`模(4 `2**32`294 967 184)。

这确实是一个奇怪的系统，并导致了无数的错误。例如，溢出本身导致了今年 6 月 30 日的 Linux 错误，导致全球许多计算机挂了。我听说它还使几个 Java 系统崩溃。

# php - php 页面按钮不重定向，我尝试使用 ajax，但有点没有得到它背后的全部想法

> ID：12761879
> 
> 赞同：0
> 
> 时间：2012-10-06T17:04:58.260
> 
> 标签：php, javascript, ajax

以下是我的代码，有没有办法让按钮重定向到页面“vote.php”？有没有办法通过 URL 传递选定的列表值和复选框值？

```
<?php require_once('Connections/was.php'); ?>
<?php require_once('Connections/was.php'); ?>
<head>

<script>
  function checkLen(box) { 

     var boxes=document.un['candcheckbox[]'],len=boxes.length,i,count=0;
     var crn=document.un.hiddenList3.value

   for(i=0;i<len;i++) {

        count+=(boxes[i].checked) ? 1 : 0;
        if(count> crn)      {
           box.checked=false;
                            }

               }

  }
  </script>

  <script>
function generateURL(checked_names) {
    var kadaa = document.un.hiddenList.value;
    var tayfeeee = document.un.hiddenList2.value;

  var wassimcheckboxes = document.un['candcheckbox[]'];
  var wassimcheckboxesLENGTH= wassimcheckboxes.length;
    var checked_names = "";
    for ( i == 0;  i < wassimcheckboxesLENGTH; i++) {
    if (wassimcheckboxes[i].checked) {
        checked_names[i].value = wassimcheckboxes[i].value;
    }
    }

window.location.href="vote.php?names="+checked_names+"&tayfe="+tayfeeee+"&cada2="+kadaa

}

</script>

</head>
<body>

<?php require_once('Connections/was.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "",          $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ?                                     mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;    
case "long":
case "int":
  $theValue = ($theValue != "") ? intval($theValue) : "NULL";
  break;
case "double":
  $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
  break;
case "date":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;
case "defined":
  $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
  break;
  }
  return $theValue;
}
}

if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
case "text":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;    
case "long":
case "int":
  $theValue = ($theValue != "") ? intval($theValue) : "NULL";
  break;
case "double":
  $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
  break;
case "date":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;
case "defined":
  $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
  break;
  }
  return $theValue;
}
}

mysql_select_db($database_was, $was);
$query_CasaList = "SELECT CASA_ID FROM casa";
$CasaList = mysql_query($query_CasaList, $was) or die(mysql_error());
$row_CasaList = mysql_fetch_assoc($CasaList);
$totalRows_CasaList = mysql_num_rows($CasaList);

if(isset($_GET['casaList'])){
$sqlvar=$_GET['casaList'];

}else{
    $sqlvar='-1';
    }

if(isset($_GET['ReliGList'])){
$sqlvar2=$_GET['ReliGList'];

}else{
    $sqlvar2='-1';
    }

mysql_select_db($database_was, $was);
$query_RELIG1 = "SELECT RELIGION_SECT FROM circonscriptionreligionnumber WHERE                 CIRCONCRIPTION_ID = (Select CIRCONCRIPTION_ID FROM casa WHERE CASA_ID ='".$sqlvar."')";
$RELIG1 = mysql_query($query_RELIG1, $was) or die(mysql_error());
$row_RELIG1 = mysql_fetch_assoc($RELIG1);
$totalRows_RELIG1 = mysql_num_rows($RELIG1);

mysql_select_db($database_was, $was);
$query_wasCandNameC = "SELECT CAND_NAME FROM candidates WHERE CIRCONCRIPTION_ID = (Select CIRCONCRIPTION_ID FROM casa WHERE CASA_ID ='".$sqlvar."') AND RELIGION_SECT ='".$sqlvar2."'";
$wasCandNameC = mysql_query($query_wasCandNameC, $was) or die(mysql_error());
$row_wasCandNameC = mysql_fetch_assoc($wasCandNameC);
$totalRows_wasCandNameC = mysql_num_rows($wasCandNameC);

mysql_select_db($database_was, $was);
$query_crnNumber = "select CRNNUMBER from circonscriptionreligionnumber where             CIRCONCRIPTION_ID =(select CIRCONCRIPTION_ID from casa where CASA_ID= '".$sqlvar."') and RELIGION_SECT ='".$sqlvar2."'";
$crnNumber = mysql_query($query_crnNumber, $was) or die(mysql_error());
$row_crnNumber = mysql_fetch_array($crnNumber);
$totalRows_crnNumber = mysql_num_rows($crnNumber);

?>

<form name="un" method="GET" action="" >
  <p>

    <label for="casaList">Choose your Casa</label>
<select name="casaList" id="casaList" title="Casa" onChange="un.submit()">
  <option value=""></option>

  <?php
do {  
?>
  <option value="<?php echo $row_CasaList['CASA_ID']?>" <?php         if(isset($_GET['casaList'])){if ($_GET['casaList']==$row_CasaList['CASA_ID']){echo "selected";}}?>><?php echo $row_CasaList['CASA_ID']?></option>
      <?php
} while ($row_CasaList = mysql_fetch_assoc($CasaList));
  $rows = mysql_num_rows($CasaList);
  if($rows > 0) {
  mysql_data_seek($CasaList, 0);
  $row_CasaList = mysql_fetch_assoc($CasaList);
  }
?>

    </select>

<label for="ReliGList">Select Candidate's Religious Views</label>

<select name="ReliGList" id="ReliGList" title="religion" onChange="un.submit()" >
  <option value=""></option>

  <?php
do {  
?> 

  <option value="<?php echo $row_RELIG1['RELIGION_SECT']?>" <?php 
if(isset($_GET['ReliGList'])){if 
($_GET['ReliGList']==$row_RELIG1['RELIGION_SECT']){echo "selected";}}

?>  >
  <?php echo $row_RELIG1['RELIGION_SECT']?></option>

  <?php
} while ($row_RELIG1 = mysql_fetch_assoc($RELIG1));
  $rows = mysql_num_rows($RELIG1);
  if($rows > 0) {
  mysql_data_seek($RELIG1, 0);
  $row_RELIG1 = mysql_fetch_assoc($RELIG1);
  }
?>

</select>

<table width="275" border="1">
  <tr>
<th width="115" scope="col">Check Area</th>
<th width="130" scope="col">Candidate Name</th>
  </tr>
    <?php
do {  
?>

  <tr>
<td><input type="checkbox" name="candcheckbox[]" id = "candcheckbox[]" value="<?php     echo $row_wasCandNameC['CAND_NAME']; ?>" onChange="checkLen(this);"/></td>
<td><?php echo $row_wasCandNameC['CAND_NAME']; ?></td>
  </tr>

  <?php
} while ($row_wasCandNameC = mysql_fetch_assoc($wasCandNameC));
  $rows = mysql_num_rows($wasCandNameC);
  if($rows > 0) {
  mysql_data_seek($wasCandNameC, 0);
  $row_wasCandNameC = mysql_fetch_assoc($wasCandNameC);
  }
?>

 <input type="hidden"  name="hiddenList" value="<?php echo $sqlvar; ?>" ></input>
 <input type="hidden"  name="hiddenList2" value="<?php echo $sqlvar2; ?>" ></input>

       <?php
do {  
?> 
 <input type="hidden"  name='hiddenList3' value="<?php echo         $row_crnNumber['CRNNUMBER']; ?>" ></input>

 <?php
} while ($row_crnNumber = mysql_fetch_assoc($crnNumber));
  $rows = mysql_num_rows($crnNumber);
  if($rows > 0) {
  mysql_data_seek($crnNumber, 0);
  $row_crnNumber = mysql_fetch_assoc($crnNumber);
  }
?>

 </table>   

 <br>

<input type="button" name="vote" value="vote" onclick="generateURL(this);"/>

  </form>  

</body>

<?php
mysql_free_result($CasaList);
mysql_free_result($RELIG1);

mysql_free_result($wasCandNameC);

mysql_free_result($crnNumber);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:29:29.547

您问

> 有没有办法让按钮重定向到页面“vote.php”？有没有办法通过 URL 传递选定的列表值和复选框值？

通过对 PHP 和表单的一些研究，这两个问题都很容易解决。这是关于形式的全部概念。我知道 W3Schools 因为糟糕的建议而广受欢迎，但他们对表格的介绍简单、快速、简洁。[http://www.w3schools.com/php/php_forms.asp](http://www.w3schools.com/php/php_forms.asp)

你可以先让你的按钮 a`submit`和你的表单动作`vote.php`

```
<form name="un" method="GET" action="vote.php"> 
```

和

```
<input type="submit" value="vote"/> 
```

然后`vote.php`确保你检索变量`$_GET["nameOfElementInForm"]`

# ruby-on-rails - Spree 回到默认配置，直到应用程序重新启动

> ID：12761883
> 
> 赞同：0
> 
> 时间：2012-10-06T17:05:00.813
> 
> 标签：ruby-on-rails, heroku, ruby-on-rails-3.2, spree

我有一个狂欢商店，它在看似随机的时间后将自身重置为默认配置设置（例如，标题从“商店”变为“狂欢演示站点”）。然后它将人们引导到 https（只有贝宝，所以没有 https）并且所有支付网关/邮件信息都消失了。

该应用程序在 heroku cedar 堆栈上运行。如果我推送代码或重新启动应用程序，设置会回到我配置它们的方式。

我不确定要提供什么信息，因为我不知道是什么原因造成的。如果有人可以提供帮助，请询问您需要哪些代码文件，我会立即发布。

首先，Gemfile 在这里：[https ://gist.github.com/3845475](https://gist.github.com/3845475)

该网站将在即将到来的星期三出现在 BBC 上（预计该网站会受到重创），因此我们将不胜感激任何帮助！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:39:57.507

请为您的 Spree 版本尝试最新的相关分支。[我相信这个问题已作为问题 #1500](https://github.com/spree/spree/issues/1500)修复的一部分得到修复。

# c# - 未设置变量值

> ID：12761890
> 
> 赞同：1
> 
> 时间：2012-10-06T17:06:07.017
> 
> 标签：c#, .net, asp.net-mvc

根据手表 controller.ViewData.ModelState 不为空。但是在将其值设置为 modelState 变量后，我将 null 视为 modelState 值。它让我疯狂...

![在此处输入图像描述](../Images/5f1bc252c89ed1b0329cb28e21b7e3da.png)

# php - 如何判断数组中的值在字符串中的次数

> ID：12761891
> 
> 赞同：0
> 
> 时间：2012-10-06T17:06:05.993
> 
> 标签：php, arrays

想象一下，我有一个名为 uselessKeywords 的数组。它的值是“and”、“but”、“the”。

如果我还有一个带有“cool,and,but,and”的字符串，我怎么知道数组中的任何值在字符串中出现了多少次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:09:06.117

类似的事情会做，但你必须注意误报，例如`andover`and `thesaurus`。

```
$uselesskeywords = array('and', 'but', 'the');
$regex = implode('|', $uselesskeywords);
$count = count(preg_grep("/($regex)/", "cool,and,but,and")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:13:53.980

您可以使用 foreach uselessKeywords 遍历字符串

```
$count = 0;
foreach($uselessKeywords as $needle){
    $count = $count + substr_count($str, $needle);
}

echo $count; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T18:18:59.743

尝试这个..

```
<?php
function uselessKeywordOccurances ($myString, $theArray) {
    $occurances = array();
    $myTestWords = preg_split("/,/", $myString);
    for($i = 0; $i < count($myTestWords); $i++)     {
        $testWord = $myTestWords[$i];
        if (in_array($testWord, $theArray)) {
            array_push($occurances, $testWord);
        }
    }   
    $grouped = array_count_values($occurances);
    arsort($grouped);
    return $grouped;
}

$uselessKeywords = array("and", "but", "the");
$testWords = "cool,and,but,and,and,the,but,wonderful";
$result = uselessKeywordOccurances($testWords, $uselessKeywords);
var_dump($result);
?> 
```

它应该返回出现的无用关键字，就像这样..

```
array(3) { ["and"]=> int(3) ["but"]=> int(2) ["the"]=> int(1) } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T17:19:59.177

Marc B 的改进（添加一些昏迷以消除误报`andover`和`thesaurus`；我添加了前瞻，因为某些值可以一一对应）：

```
$uselesskeywords = array('and', 'but', 'the');
$str = "cool,and,but,and";
$regex = implode('(?=,)|,', $uselesskeywords);
$count = count(preg_grep("/,$regex(?=,)/", ",$str,")); 
```

# android - 使用 BroadcastReceiver 捕获 PACKAGE_REMOVED 事件

> ID：12761893
> 
> 赞同：0
> 
> 时间：2012-10-06T17:06:27.533
> 
> 标签：android, broadcastreceiver, package

我想在删除包时捕获事件。我使用以下内容： BroadcastReceiver 子类：

```
public class CustomBroadcastReceiver extends BroadcastReceiver {

    /**
     * This method captures the event when a package has been removed
     */
    @Override
    public void onReceive(Context context, Intent intent)
    {
        Helper.writeInLogFile("Hello from CustomBroadcastReceiver");
        if (intent != null) {
            String action = intent.getAction();         
            if (action.equals(intent.ACTION_PACKAGE_REMOVED))   {
                //Log the event capture in the log file ...
                Helper.writeInLogFile("The package has been removed");
            }
        }
    }
} 
```

及其清单部分：

```
<receiver android:name="CustomBroadcastReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_REMOVED" >
                </action>
            </intent-filter>
</receiver> 
```

...但 CustomBroadcastReceiver 没有被解雇。我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:41:45.633

答案在这里：[https](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/aX5-fMbdPR8) ://groups.google.com/forum/?fromgroups= #!topic/android-developers/aX5-fMbdPR8 在 'hackbod' 2/28/08 下。原则上，对于任何事件处理程序，CustomBroadcastReceiver 实例都需要向系统注册。我的代码中缺少这一点。当然，注册（上面链接中的代码）需要在应用程序的主活动类中完成。需要注意的是，如果我们在主要活动中定义意图过滤器，我们就不能在清单中提及它们（它不会中断，但它是多余的）。

# python - AJAX 化此 Django 应用程序的技术

> ID：12761903
> 
> 赞同：1
> 
> 时间：2012-10-06T17:07:58.013
> 
> 标签：python, ajax, django

我一直在尝试开发一个用于处理栏标签的 django 应用程序......到目前为止，我可以添加标签、将产品添加到标签以及从标签中删除产品。现在，我想在从选项卡中添加/删除产品时使用 AJAX，但我不知道是否需要使用表单......这是我目前所拥有的：

**模型.py**

```
class Product(models.Model):
  name = models.CharField(max_length='70')
  price = models.FloatField()
  def __unicode__(self):
    return self.name

class Tab(models.Model):
  number = models.IntegerField()
  name = models.CharField(max_length='50')
  tabdate = models.DateTimeField('date created')
  consumed = models.ManyToManyField(Product, through='ConsumedRelation')
  def __unicode__(self):
    return self.name

class ConsumedRelation(models.Model):
  tab = models.ForeignKey(Tab)
  product = models.ForeignKey(Product)
  count = models.PositiveIntegerField(blank=True, null=True, default=1)
  def __unicode__(self):
    return str(self.product) 
```

**视图.py**

```
def addproduct(request, number, product):
  tab = Tab.objects.get(number=number)
  product = Product.objects.get(id=product)
  add = ConsumedRelation.objects.create(product=product, tab=tab, count=1)
  add.save()
  context = {'tab': tab, 'product': product}
  return render_to_response('addproduct.html', context)

def deleteproduct(request, number, consumedid):
  tab = Tab.objects.get(number=number)
  ConsumedRelation.objects.filter(id=consumedid).delete()
  context = {'tab': tab}
  return render_to_response('deleteproduct.html', context) 
```

**网址.py**

```
url(r'^tabs/(?P<number>[0-9].*)/delete/(?P<consumedid>[0-9].*)/$', 'barcomandas.views.deleteproduct'),
url(r'^tabs/(?P<number>[0-9].*)/add/(?P<product>[0-9].*)/$', 'barcomandas.views.addproduct'), 
```

**singletab.html**

```
<h1>{{ tab.name }} | {{ tab.number }}</h1>
<h2>Consumed</h2>
{% for consumed in consumedlist %}
<a href="delete/{{ consumed.id }}">X</a>{{ consumed }}<br/>
{% endfor %}

<div id="addproducts">
{% for product in productlist %}
<li><a href="add/{{ product.id }}">{{ product.name }}</a></li>
{% endfor %}
</div> 
```

**添加产品.html**

```
{{ product }} added to tab {{ tab.name }} 
```

例如，当我添加一些产品时，我有一个无用的页面“产品添加到选项卡”，因为没有一些 html 页面我无法做到，所以我可以使用视图。那有意义吗？但我不想把它做成一个表格，因为这将用于一个 7 英寸的平板电脑，而且我会为每个产品设置大小合适的按钮，因为我工作的酒吧有时会非常忙碌，所以我需要这样的速度。

理想情况下，我会对所有内容都有 ajax，左侧是当前打开的选项卡列表，右侧列是选项卡编辑，以及添加产品、关闭选项卡等的选项。所以我想要的是，有singletab.html 中的产品列表，每个产品的旁边都有一个“X”。您单击 X，产品消失，列表和其他所有内容都会更新，而无需重新加载页面。

你们有什么解决办法吗？对不起我的英语，不是我的主要语言。

PS：这也是我的第一个 django 应用程序，所以对于任何愚蠢的错误，我深表歉意.. 一个简单的 jquery 例如（/tabnumber/add/product）就足够了吗？我将如何实施它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:11:06.527

很抱歉，除了以下几行外，我没有正确理解您的问题。

> singletab.html 中有产品列表，每个产品的旁边都有一个“X”。您单击 X，产品消失，列表和其他所有内容都会更新，而无需重新加载页面。

我认为您可以尝试使用[JQuery](http://jquery.com/)。它的 Javascript 库使事件处理和页面 ajaxifying 变得更容易。

对于您的淡出示例，您可以查看[w3 示例，这是开始学习 JQuery 的好地方。](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_fadeout)您还可以参考[Ajax with JQuery](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)以了解如何将 Ajax 与 JQuery 一起使用。

希望它可以帮助您或让您领先一步。祝您好运:-)

# javascript - wordpress 将变量传递给 javascript

> ID：12761904
> 
> 赞同：2
> 
> 时间：2012-10-06T17:08:08.283
> 
> 标签：javascript, jquery, wordpress

我正在尝试将变量从插件传递给 javascript 文件。这是我的插件代码：

```
<?php
/**
 * @package JS Test
 * @version 1.0
 */
/*
Plugin Name: JS Test
Description: JS Test.
*/

add_action('init', 'my_init');
add_action( 'wp', 'test_js' );

function my_init() {
  wp_enqueue_script( 'jquery' );
}

function test_js() {

   wp_register_script ('testjs', plugins_url('jstest.js', __FILE__));
   wp_enqueue_script ('testjs');
   $my_arr = array('my array',
     'name' => 'Test',
   );
   $my_json_str = json_encode($my_arr); 

   $params = array(
     'my_arr' => $my_json_str,
   );

   wp_enqueue_script('my-java-script');
   wp_localize_script('my-java-script', 'php_params', $params);
} 
```

这是 jstest.js 文件：

```
 jQuery(document).ready(function() {
      alert ('test');
      var my_json_str = php_params.my_arr.replace(/&quot;/g, '"');
      var my_php_arr = jQuery.parseJSON(my_json_str);
      alert(php_params);    
    }); 
```

我得到的是 JavaScript 中的这个错误：ReferenceError: php_params is not defined 有人看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T23:03:10.327

你不需要仅仅为你的本地化参数排队一个脚本，你可以使用你的 testjs，这是一个我准备测试的快速插件：

```
<?php
/*
Plugin Name: PHP to JS
Plugin URI: http://en.bainternet.info
Description: wordpress passing variable to javascript 
http://stackoverflow.com/questions/12761904/wordpress-passing-variable-to-javascript
Version: 1.0
Author: Bainternet
Author URI: http://en.bainternet.info
*/

add_action('init', 'my_init');
add_action( 'wp', 'test_js' );

function my_init() {
 /wp_enqueue_script( 'jquery' );
}

function test_js() {

   wp_register_script ('testjs', plugins_url('jstest.js', __FILE__));
   wp_enqueue_script ('testjs');
   $my_arr = array('my array',
     'name' => 'Test',
   );
   $my_json_str = json_encode($my_arr); 

   $params = array(
     'my_arr' => $my_json_str,
   );

   wp_localize_script('testjs', 'php_params', $params);
}

add_action('wp_footer','footertestjs');

function footertestjs(){
    ?>
    <script>
      jQuery(document).ready(function() {
        alert ('test');
        var my_json_str = php_params.my_arr.replace(/&quot;/g, '"');
        var my_php_arr = jQuery.parseJSON(my_json_str);
        alert(php_params);    
      });
    </script>
    <?php
} 
```

正如您在此处看到的，它`wp_localized_script`使用与您入队相同的脚本，而不是假脚本。

# android - 如何在签名的apk中修改资产文件夹中的文件

> ID：12761905
> 
> 赞同：3
> 
> 时间：2012-10-06T17:08:16.757
> 
> 标签：android, apk, assets

我想在签名的 apk 文件中修改 assets 文件夹中的文件。我尝试直接通过winrar修改它，但无法再次安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:22:33.083

对 APK 进行签名是有原因的。虽然你可以试试[这个](http://www.androidguys.com/2010/12/23/modify-apk-files/)方法，看看它是否有效

# c - 在 C 中初始化一个字符串

> ID：12761916
> 
> 赞同：1
> 
> 时间：2012-10-06T17:09:23.623
> 
> 标签：c, arrays, string

> **可能重复：**
> [char *str=“STRING”和 char str[]=“STRING”之间的区别？](https://stackoverflow.com/questions/3862842/difference-between-char-str-string-and-char-str-string)

我写了以下代码：

```
int main()
{
    char *str = "hello";
    str[0] = 'H';
    printf("%s\n", str);
} 
```

这给了我一个分段错误，我不明白为什么。

`str`不是。`pointer to char`_ `const char`即使是这种情况，它也不应该给出如下程序的编译错误：

```
int main()
{
    const char *str = "hello";
    str[0] = 'H';
    printf("%s\n", str);    
} 
```

它给出了一个错误：`assignment of read-only location *str`。

**编辑**

如果我的代码将指针指向只读位置，我不应该得到编译错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T17:11:10.717

您分配一个指向常量字符串的指针（它作为文本的一部分出现，因此不是可写内存）。

修复`char str[] = "hello";`此问题将在堆栈上创建常量字符串的 ar/w 副本。

你所做的是一个完全有效的指针分配。编译器不知道的是，在标准系统中，常量字符串被放置在只读内存中。在嵌入式（或其他奇怪的）系统上，这可能会有所不同。

根据您的系统，您可以附带一个`mprotect`并将指针目标上的 VM 标志更改为可写。所以编译器允许这个代码，但你的操作系统不允许。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T17:11:44.597

当您`char *`使用文字字符串初始化 a 时，您不应该尝试修改它的内容：该变量指向不属于您的内存。

您*可以*使用：

```
char str[] = "hello";
str[0] = 'H'; 
```

使用此代码，您已经声明了一个使用文字字符串内容的副本初始化的数组，现在您可以修改该数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T17:12:03.463

您的代码在运行时具有未定义的行为。您正在尝试写入不允许的文字字符串。此类写入可能会触发错误或具有未定义的行为。您的特定 C 编译器`str`指向只读内存，尝试写入该内存会导致分段错误。即使不是`const`，仍然不允许写入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T17:12:20.743

```
char *str = "hello"; 
```

当您`str`按上述方式声明时，不能保证它将存储哪一部分内存。str 可能是只读的，具体取决于实现。所以试图改变它会导致分段错误。

为了避免分段错误，改为声明`str`为字符数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T17:13:09.627

```
char *str = "hello"; 
```

这里的字符串 hello 是一个文字。字符串文字总是存储在只读存储器中。这就是您在尝试更改只读内存中的值时遇到分段错误的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T17:21:53.170

将 str 声明为 char* 会为指针保留内存，但不会为字符串保留内存。编译器可以将“hello”的内存放在他喜欢的任何地方。您不能保证 str[i] 是可写的，这就是为什么在某些编译器中这会导致段错误。

如果要确保字符串在可写内存中，则必须使用 alloc() 分配内存，或者可以使用

```
char str[] = "hello"; 
```

# validation - 如何验证信用卡和银行帐号？

> ID：12761922
> 
> 赞同：17
> 
> 时间：2012-10-06T17:09:44.130
> 
> 标签：validation, credit-card, onlinebanking

我知道有很多与此主题相关的讨论，例如[信用卡验证：卡名可以包含非 ASCII 字符吗？](https://stackoverflow.com/questions/2004532/credit-card-validation-can-card-name-contain-non-ascii-characters)

我想问这个问题的原因是因为人们可以在一个地方找到所有信息。

**我发现了什么**（如果/我错了，请纠正我）：

> *标题 - 长度 - 格式*
> 
> 信用卡号 - 最小 13，最大 19 - 数字
> 
> 信用卡名称 - MAX 26 - 字母数字（首字母后不能包含点？）
> 
> 银行帐号（顺便说一句，我在印度）- MIN 11，MAX 15 - 数字
> 
> 银行账户名称 - 抱歉，不知道 - 字母数字？（再次，不知道）

请提供答案，以便帮助那些不得不处理财务数据的人。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-06T17:40:10.960

阅读这篇文章：[链接](http://codytaylor.org/2009/11/this-is-how-credit-card-numbers-are-generated.html)

它是关于生成信用卡号的，但它有助于确定信用卡是否有效。

这些是将信用卡公司与其信用卡号联系起来的规则：

```
Visa = 4XXX - XXXX - XXXX - XXXX
MasterCard = 5[1-5]XX - XXXX - XXXX - XXXX
Discover = 6011 - XXXX - XXXX - XXXX
Amex = 3[4,7]X - XXXX - XXXX - XXXX
Diners = 3[0,6,8] - XXXX - XXXX - XXXX
Any Bankcard = 5610 - XXXX - XXXX - XXXX
JCB =  [3088|3096|3112|3158|3337|3528] - XXXX - XXXX - XXXX
Enroute = [2014|2149] - XXXX - XXXX - XXX
Switch = [4903|4911|4936|5641|6333|6759|6334|6767] - XXXX - XXXX - XXXX 
```

# jquery - 引导工具提示无视我

> ID：12761927
> 
> 赞同：1
> 
> 时间：2012-10-06T17:10:06.877
> 
> 标签：jquery, css, twitter-bootstrap, tooltip

我正在尽可能密切地关注[文档](http://twitter.github.com/bootstrap/javascript.html#tooltips)，但我无法让工具提示正常工作。我究竟做错了什么？

我已经尝试了很多东西。这是我在示例文件中尝试过的一些内容。

[http://anunexpectacle.com/micros/](http://anunexpectacle.com/micros/)

我现在很绝望。请给我整理一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:14:13.090

看起来你的选择器是错误的。当我使用它时，出现了工具提示：

```
$("[rel=tooltip]").tooltip(); 
```

请注意，它会`$("tooltip")`查找 HTML 标签`<tooltip>something</tooltip>`，但在这种情况下（我猜），您的意思是定位具有属性的链接`rel=tooltip`。

# python - Python/django：无法导入 GeoIP

> ID：12761932
> 
> 赞同：1
> 
> 时间：2012-10-06T17:10:58.707
> 
> 标签：python, django, geodjango, geoip

我无法在 django 中导入 GeoIP。我搜索并测试了两天这个错误，但仍然无法知道问题。

当然，我安装了 GeoDjango。我在 MacOS 10.8 上

以下是 django shell 测试的日志

```
from django.contrib.gis import geoip 
```

> 来自“/Library/Python/2.7/site-packages/django/contrib/gis/geoip/__init__.pyc”的模块“django.contrib.gis.geoip”

有用。甚至我可以在 Library/Python/2.7/site-packages/django/contrib/gis/geoip/base.py 找到 geoip 类

```
from django.contrib.gis.geoip import geoip 
```

> ```
> 回溯（最近一次通话最后）：
>   文件“”，第 1 行，在
> ImportError：无法导入名称 geoip
> 
> ```

我还将 django.contrib.gis 添加到 setting.py。甚至我可以在 eclipse 快捷方式中找到 geoip 类。

无论如何，我在 django shell 中测试了另一件事。

```
from django.contrib.gis.geoip.base import GeoIP 
```

> ```
> 回溯（最近一次通话最后）：
>   文件“”，第 1 行，在
>   文件“/Library/Python/2.7/site-packages/django/contrib/gis/geoip/base.py”，第 6 行，在
>     从 django.contrib.gis.geoip.libgeoip 导入 GEOIP_SETTINGS
>   文件“/Library/Python/2.7/site-packages/django/contrib/gis/geoip/libgeoip.py”，第 22 行，在
>     如果 lib_path 为 None: raise GeoIPException('找不到 GeoIP 库（尝试“%s”）。'
> NameError：未定义名称“GeoIPException”
> 
> ```

我错过了什么？

有什么方法可以测试我的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:15:33.610

看来您需要安装 C 库才能使用 GeoIP。

这是引发该错误的文件中的一个片段。

```
# The shared library for the GeoIP C API.  May be downloaded
#  from http://www.maxmind.com/download/geoip/api/c/
if lib_path:
    lib_name = None
else:
    # TODO: Is this really the library name for Windows?
    lib_name = 'GeoIP' 
```

一旦你将它安装在某个地方，你需要在你的 settings.py 中引用它

```
GEOIP_LIBRARY_PATH = '/whatever' 
```

该库试图告诉您这一点，但似乎有一个错误阻止它引发正确的错误。[https://github.com/django/django/pull/103](https://github.com/django/django/pull/103)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-11T06:49:17.163

以前我遇到过这个问题：**from django.contrib.gis.geoip import GeoIP ImportError: cannot import name GeoIP**

当我安装这个包时解决了。

```
yum install GeoIP-devel -y 
```

# windows-phone-7 - 创建电影 Windows Phone 7 应用程序

> ID：12761936
> 
> 赞同：0
> 
> 时间：2012-10-06T17:11:29.160
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

我打算在 Windows Phone 7 中为我的大学作业创建一个应用程序，这是一个`movie release date finder`. 该应用程序应该查找即将上映的电影、最近发布的电影、按名称查找电影日期，反之亦然。

我不知道从哪里开始。我应该从哪个站点检索信息，也不应该如何检索。我确实看到了一些示例代码，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:27:54.863

## 创建后端

在[另一个 So 问题](https://stackoverflow.com/questions/2787808/is-there-any-online-free-movie-information-apis)中，您会找到指向[The Movie DB](http://api.themoviedb.org/2.1/)的答案，这是一个在线电影 API，尽管我自己也没有尝试过。根据如何编写应用程序，除非您知道要实现的目标，否则我们无法为您提供太多帮助，还请注意，对于您使用的每个数据源，可能会有不同的方式来检索信息。

您应该首先写下您希望您的应用程序具有的所有功能，然后创建您的后端，最好在它自己的项目中，定义构成整个模型的所有类。您还可以拥有一个处理所有数据检索的第二个项目，并将后端项目用作 POCO 类存储库。

在第二个项目中，如果您决定像这样拆分它，您将在其中实现从`The Movie DB`或您使用的任何其他数据源检索信息的所有逻辑，这种方法的优点是，如果该 API 被关闭，然后您可以轻松地重新编码此项目以使用另一个源，而不会影响应用程序的其余部分。

## 创建用户界面

对于 UI，你应该从创建一些模型开始，有很多免费的工具可以用谷歌搜索，如果应用程序真的很非正式，那么你甚至可以用笔和纸做旧学校的模型。然后按照您在模型中定义的 UI 创建 UI，在[Windows Phone Dev](http://dev.windowsphone.com/en-us)中，您会发现很多有关创建 UI 的教程和有用信息。

# vim - 如何选择一个矩形区域并粘贴一个字符串

> ID：12761937
> 
> 赞同：3
> 
> 时间：2012-10-06T17:11:38.410
> 
> 标签：vim

我想用一个拉过的单个字符串替换一个矩形区域（而不是另一个矩形区域）。

例如，拉出字符串“foobar”，选择下表中的数字字符并将字符串粘贴到矩形区域上。

```
poum 123 pam
poum 456 pam
poum 789 pam 
```

这会产生这个输出：

```
poum foobar pam
poum foobar pam
poum foobar pam 
```

BBedit 有这个功能，我觉得它很方便。我发现使用 Vi 执行此操作的唯一方法是将字符串拉入给定的寄存器（比如寄存器“a”），选择区域，删除它，使用 重新选择它`g``v`，最后使用 `I` `ctrl` –<kbd>r粘贴字符串`a` `esc` 。

我正在寻找一种更简单的方法来做到这一点。例如选择区域，粘贴字符串。它应该像将一个矩形区域粘贴到另一个矩形区域一样简单（此处描述的操作：[Vim: how to select a rect area and do copy/paste](https://stackoverflow.com/questions/3974894/vim-how-to-select-a-rect-area-and-do-copy-paste)）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T17:36:30.553

拉出要粘贴的字符串。选择要替换的区域（使用`Ctrl`+ `v`）。按`c`剪切该区域并进入插入模式，然后按`Ctrl`+`r`然后`0`（零）粘贴寄存器 0 的内容（因为您剪切的文本进入`"`），最后`Esc`离开插入模式。或者显式地拉入特定的寄存器 ( `"``a``y`) 并从该寄存器 ( `Ctrl`+ `r` `a`) 粘贴。

# winapi - (Win32) 进程间共享堆

> ID：12761938
> 
> 赞同：3
> 
> 时间：2012-10-06T17:11:42.420
> 
> 标签：winapi, heap-memory, shared-memory

是否可以创建一个在进程之间共享的内存池（例如从Win32 中的`CreateFileMapping`with `INVALID_HANDLE_VALUE`），然后将该块内存用作堆？

我希望`new`/`delete`运算符（或`malloc`/ `free`）从该块中分配/释放内存（并对其进行通常的堆管理）。

谢谢。

**编辑**：我真正的问题很简单：现在我使用`new`运算符来正常分配各种大系列的结构，但我希望这些结构在进程关闭后仍然存在。所以我想创建另一个进程，它几乎唯一的功能就是在主进程关闭时保存内存。

为此，我将在辅助进程中创建一块共享内存`CreateFileMapping`，并在主进程中告诉那些`new`/`delete`用于分配结构以使用该块而不是进程的堆。

为了在主进程重新启动后恢复结构，我将向所有指针添加一个固定数量，以反映由`MapViewOfFile`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:28:42.700

感谢评论的人。

回答我自己的问题：

我放弃了使共享内存成为堆，我只是将结构的固定快照保存到由另一个进程分配的共享内存中`CreateFileMapping`。当进程重新启动时，我只是做相反的事情，使用`OpenFileMapping`and `MapViewOfFile`。

# php - RSS 通量过滤器 simplepie

> ID：12761940
> 
> 赞同：0
> 
> 时间：2012-10-06T17:11:53.367
> 
> 标签：php, rss, simplepie, feed

我想使用 simplepie 为我的 rss 新闻做一个过滤器。所以我有这个代码：

```
$feed = new SimplePie();
$feed->set_feed_url(http://rss);
$feed->init();

$feed->set_cache_duration (3600);
$feed->set_timeout(30);
$feed->handle_content_type();

$countItem = 0;
foreach ($feed->get_items() as $item){
$checktitle = $item->get_permalink();
//Regex keyword filter
$pattern = '/keyword1|keyword2/';
//If the there is a keyword match, store in $matches array
if (preg_match($pattern, $checktitle)) {
    $news[$countItem]= $item;
    $countItem++;
}
} 
```

我希望 $news 包含两个关键字，而不仅仅是一个或另一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:51:21.190

解决了这是解决方案：

```
$feed = new SimplePie();
$feed->set_feed_url(http://website.name/rss);
$feed->init();
$feed->set_cache_duration (3600);
$feed->set_timeout(30);
$feed->handle_content_type();
$countItem = 0;
foreach ($feed->get_items() as $item){
$checktitle = $item->get_permalink();
//Regex keyword filter
$pattern_one = '/keyword1/';
$pattern_two = '/keyword2/';
//If the there is a keyword match, store in $matches array
if (preg_match($pattern_one, $checktitle) && preg_match($pattern_two, $checktitle)) {
            $news[$countItem]= $item;
            $countItem++;
}
} 
```

# c# - 特殊类型查询的数据结构

> ID：12761944
> 
> 赞同：3
> 
> 时间：2012-10-06T17:12:15.657
> 
> 标签：c#, java, c++, algorithm, data-structures

我遇到过一些此类问题。假设我们有一个元素数组`A`，其中大约是百万。我们得到了 form 的查询。在每个查询中，我们必须对元素执行一些操作。`n``n``1``'p q'``A[p]``A[q]`

*   这个操作是一些普通的操作之类`XOR`的。用于对 A（从索引 p 到 q）中的每个数字与给定数字 m 进行异或运算。对于前-`A[p]^m,A[p+1]^m..A[q]^m`

如果我们有数千个类型为“p q”的查询，那么我们会对重叠范围进行重复计算（例如 - `p1<p2<q1<q2`）。如果有空间/时间的权衡，我宁愿更快地完成我的工作，即使它需要更多的空间。所以，我专注于时间而不是空间。

我的问题是 -**是否有任何数据结构可以有效地处理这些类型的查询（具有一些在进一步查询中重复的范围）。**我能想到的就是做一些预处理并将东西保存在数据结构中。然后在我们收到进一步的查询时进行更新和处理。

有人可以建议一些有助于处理与某些范围有关的查询的数据结构（特别是当范围进一步广泛重复时）？

*   这是我需要数据结构的原始问题
    [- 异或运算的最大值](https://stackoverflow.com/questions/9395549/maximum-value-of-xor-operation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:58:35.827

我想到的第一件事是[具有延迟传播的段树，](http://wcipeg.com/wiki/Segment_tree#Lazy_propagation)但它仅在您描述的查询确实是对表的更新并且不返回结果时才真正适用。因此，会有一个 update[pq] 操作和一个 query[pq]。第一个只是使用您描述的操作进行更新，第二个返回范围中的值。

也看到[这个](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor#Segment_Trees)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:04:28.360

对于 0 到 log(n) 范围内的每个 k，存储一个长度为 n/2**k 的数组 A[k]。

A[k][i] 的内容将表示数组中从索引 i*2**k 到 (i+1) *2* *k-1 的元素。

当你想对一个范围进行操作时，你将范围分成可能的最大块并更新 A[k] 中的相应条目。

例如，如果您的范围为 16->33，您将只更新 A[4][1]（表示 16->31）和 A[1][16]（表示 32->33）

当您想要访问元素中的组合值时，您需要组合每个 log(n) 数组中的操作。

例如，要访问 5，您需要组合 A[0][5] 和 A[1][2] 和 A[2][1] 和 A[3][0] 等中的操作。

这应该为范围内的每个操作以及元素的每次访问提供 O(log(n)) 成本。

# html - a内的高度

> ID：12761946
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html

我想把一张桌子放在一张桌子里面，让它跨越整个东西高度的 100%，如果这有意义的话。

```
<table width="800" border="2">
<tr>
    <td width="66%">
        box 1
    </td>
    <td width="10" rowspan="2" />
    <td rowspan="2" height="100%" valign="top">
        <table width="100%" height="100%" bgcolor="yellow">
            <tr>
                <td>
                    box 2
                </td>
            </tr>
        </table>
    </td>
</tr>
<tr>
    <td>
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
        box 3 <br />
    </td>
</tr>
 </table> 
```

基本上，我希望那个“黄色”表从父表的顶部到底部。我无法将其设置为固定高度，因为“Box 1”和“Box 3”的高度是动态的，基于其中的任何内容。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:18:06.730

完成这项工作的技术应该如下所示，但是，似乎 position:relative 对 TD 元素的影响[未定义](https://stackoverflow.com/questions/4564638/using-position-relative-absolute-within-a-td)。

CSS：

```
td#parent {
  position: relative;
}

table#inner {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
} 
```

因此，您的解决方案是要么使用 Javascript 动态修改内部表格的高度和宽度，要么远离表格并使用 div 和 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:50:51.017

切换这个：

```
<td rowspan="2" height="100%" valign="top">
        <table width="100%" height="100%" bgcolor="yellow"> 
```

对此：

```
<td rowspan="2" height="100%" valign="top" bgcolor="yellow">
        <table width="100%" height="100%"> 
```

将背景颜色放在 TD 父级而不是 TABLE 上会使整个区域显示为黄色。

编辑：

不幸的是，基于 % 的高度需要一些东西来引用，比如具有像素高度的父元素。如果父级具有 % 高度，则父级将需要引用像素高度（或层次结构的递归 %）。

基本上，您可能只能在某处以像素为单位完成所需的工作。

# visual-c++ - 字符数组到字符串转换

> ID：12761951
> 
> 赞同：0
> 
> 时间：2012-10-06T17:13:03.830
> 
> 标签：visual-c++

我正在尝试将我的 char 数组转换为字符串，并且仅在我第一次尝试转换数组时在结果中得到一些随机字符，第二次当我转换数组时，字符串从随机字符中清除

我如何转换为字符串

```
String ^text3= gcnew String(data3); 
```

字符数组

```
-       data3   "37"    char[]
        [0x0]   0x33 '3'    char
        [0x1]   0x37 '7'    char 
```

结果

```
text3   "377000101095259001064537н" System::String^ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:10:40.007

你做对了，但是 String 构造函数需要以 NULL 结尾的字符串。所以你的 data3 应该在 2 个元素之后终止 \0 。

# css - 响应式设计在 Firefox 中有效，在 Chrome 中失败

> ID：12761952
> 
> 赞同：0
> 
> 时间：2012-10-06T17:13:07.530
> 
> 标签：css, responsive-design

我有一个像下面这样的列表，在 Firefox 中，图像实际上是随着浏览器宽度一起缩放的，但是在 Chrome 中，当我调整图像大小时，它们的大小保持不变，并且这些`<li>`部分只填充了空白。[看看我在这里的意思](http://cl.ly/Jz8A)

**html**

```
<ul>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
    <li><img src="http://distilleryimage8.s3.amazonaws.com/23ddf3860e2911e29c2d22000a1e9e7e_6.jpg"></li>
</ul> 
```

**css**

```
li img{
    display: block;
    height: auto;
    width: 100%;
    float: left;
}
@media screen and (min-width: 307px) and (max-width: 440px) {
    li{
        float:left;
        width: 50%;
        height: auto;
        display: inline-block;
    }
}
@media screen and (min-width: 440px) and (max-width: 480px) {
    li{
        float:left;
        width: 50%;
        height: auto;
        display: inline-block;
    }
}
@media screen and (min-width: 480px) and (max-width: 612px) {
    li{
        float:left;
        width: 50%;
        height: auto;
        display: inline-block;
    }
}
@media screen and (min-width: 612px) and (max-width: 767px) {
    li{
        float:left;
        width: 33.3333%;
        height: auto;
        display: inline-block;
    }
}
@media screen and (min-width: 768px) and (max-width: 901px){
    li{
        float:left;
        width: 33.3333%;
        height: auto;
        display: inline-block;
    }
}

@media screen and (min-width: 901px) and (max-width: 1024px) {
    li{
        float:left;
        width: 25%;
        height: auto;
        display: inline-block;
    }
}
/* Desktops and laptops ----------- */
@media only screen and (min-width : 1024px) and (max-width: 1079px){
    li{
        float:left;
        width: 20%;
        height: auto;
        display: inline-block;
    }
}
@media only screen and (min-width : 1079px) and (max-width: 1224px) {
    li{
        float:left;
        width: 20%;
        height: auto;
        display: inline-block;
    }
}
@media only screen and (min-width : 1224px) and (max-width: 1530px) {
    li{
        float:left;
        width: 20%;
        height: auto;
        display: inline-block;
    }
}
/* Large screens ----------- */
@media only screen and (min-width: 1530px) and (max-width : 1824px) {
    li{
        float:left;
        width: 16.6666%;
        height: auto;
        display: inline-block;
    }
}
/* Large screens ----------- */
@media only screen and (min-width : 1824px) {
    li{
        float:left;
        width: 11.1111%;
        height: auto;
        display: inline-block;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:25:24.380

```
@-moz-document url-prefix() {  
    li img{
        width: 100%;
        max-width: 100%;
    }
}

@media screen and (-webkit-min-device-pixel-ratio:0) {    
    li img{
        max-width: 100%;
    }    
} 
```

原来我需要添加 max-width add 以适应 Firefox 和 chrome 的条件浏览器黑客攻击

# c++ - 如何将 shared_ptr 传递给裸 ptr 函数

> ID：12761960
> 
> 赞同：0
> 
> 时间：2012-10-06T17:14:18.947
> 
> 标签：c++, memory-management, shared-ptr, ownership

我有一个`Entity`由库定义的类，`Registry`它是管理使用地图注册到它的实体的类。

我正在尝试做的事情：

```
//Registry Signature
void Registry::add(Entity* entity);

//my function (IGameEntity subclasses Entity)
void GameLogic::addEntity(shared_ptr<IGameEntity> entity, GameEntityId id) {
 GameEntityId entityId = entity->getId();
 gameEntities.push_back(entity);
 Framework::Registry::instance()->add(entity); //<-- this doesn't work
} 
```

我试图弄清楚如何处理这个问题，因为我保留了 shared_ptr，然后我将不得不传递一个指针。

另一件事是，如果注册表因某种原因被破坏，它将调用`delete`地图中剩余的所有实体。

如果我通过`entity`了它的工作原理，但我并没有完全掌握如果在weak_ptr上调用delete`weak_ptr<Entity>(entity)`会发生什么。`Registry`

如果我通过了当引用计数达到零或注册表试图删除它时会发生什么`entity`。`entity.get()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:30:46.577

您有两个不兼容的所有权方案。

您需要更改其中一个，或者克隆应该从一个方案转移到另一个方案的对象。

`shared_ptr`当对象只有一个引用时，释放 a 有一个技巧。但你不想那样做。即使您对图书馆的内部了解足够多，也可以这样做。

因此，作为一个实际的解决方案，更改注册表。

让它采取一个`shared_ptr`.

# java - Android 远程 XML 解析（文档生成器）

> ID：12761964
> 
> 赞同：0
> 
> 时间：2012-10-06T17:14:36.030
> 
> 标签：java, android, xml, parsing, dom

我已经上网好几天了，我真的需要一些帮助，我正在尝试将 XML 文档从 Web 服务器解析为 android 中的 ListView，我已经弄清楚如何使用本地文件来做到这一点，这很好，但无论我在堆栈或其他网站上找到什么，它似乎都不起作用，谁能帮我解决这个问题？我知道该页面存在并且有效……我现在把我所有的头发都拔掉了，所以请帮忙:)

下面是我的方法代码，这是在 on create 和 onclicklistener 之后调用的，我也在使用文档构建器工厂方法。

```
private void xmlparse()
{

    try {

            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = dbf.newDocumentBuilder();
            Document doc = builder.parse(new URL("URL in here").openConnection().getInputStream());

            doc.getDocumentElement().normalize();

            NodeList nList = doc.getElementsByTagName("item");

            for (int temp = 0; temp < nList.getLength(); temp++) {

               Node nNode = nList.item(temp);
               if (nNode.getNodeType() == Node.ELEMENT_NODE) {

                  Element eElement = (Element) nNode;

                  titles.add(getTagValue(TITLE_1, eElement));  //TITLE_1 is the xml tag title

               }
            }

          } catch (Exception e) {
            e.printStackTrace();
          }
}

private String getTagValue(String sTag, Element eElement) {
        NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

            Node nValue = (Node) nlList.item(0);

        return nValue.getNodeValue();
     } 
```

我错过了什么愚蠢的东西还是我完全错过了球？任何人都可以指出我的信息，这将有助于或只是让我知道:)

干杯！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:58:56.283

我已经完成了该任务，您应该执行以下操作：

```
 //Formattage des strings pour le passage en URL
                from = URLEncoder.encode(from, "UTF-8");
                to = URLEncoder.encode(to, "UTF-8");
                String addressToConnect = "http://maps.googleapis.com/maps/api/distancematrix/xml?origins="+from+"&destinations="+to+"&mode=driving&units="+unit+"&sensor=false";

                //Partie connexion
                URL url = new URL(addressToConnect);
                HttpURLConnection connexion = (HttpURLConnection) url.openConnection();
                connexion.connect();
                InputSource geocoderResultInputSource;
                geocoderResultInputSource = new InputSource(connexion.getInputStream());

                //Partie XML/XPATH

                Document geocoderResultDocument = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(geocoderResultInputSource);
                XPath xpath = XPathFactory.newInstance().newXPath();

                //On s'assure que la requete envoy�e � l'API � bien renvoy�e un STATUS = OK cf. Google API
                NodeList nodeListCodeResult = (NodeList) xpath.evaluate("//status", geocoderResultDocument, XPathConstants.NODESET); 
```

ETC...

希望能帮助到你，

# php - 寻找更改 IP 地址显示的建议 - 可能使用正则表达式？

> ID：12761965
> 
> 赞同：2
> 
> 时间：2012-10-06T17:14:58.147
> 
> 标签：php, regex

我目前正在寻找一种解决方案，我可以用它来确定选定的 IP 地址是否在字符串中，以将它们替换为*private*一词。我的问题是我不仅想替换始终相同的 IP，还想替换范围。

例如，我想找出一个字符串是否包含以 123 开头的 IP。如果是，请将 IP 地址更改为单词*private*

例子：

```
123.55.33.10
123.100.10.110
123.1.5.1 
```

问题是我不知道确切的 IP 地址，只知道它们是如何开始的，所以我无法通过检查字符串长度等来审查它们。

下一个问题是我想替换各种 ip，例如以 123 开头的，然后是一些以 66 开头的，依此类推。因此，对于我的问题，如果您能帮助我提出一个基本上可以工作的解决方案，那就太好了：

```
$ips = array("123.","66.","112."); 
```

并且该解决方案基本上会检查一个字符串是否包含其中一个数组值，然后将 IP 替换为*private*一词- 但不仅仅是 123。而是任何可能的整体组合，意味着不仅仅是`$string = str_replace("123.","",$string);`

*但是用私有*替换整个IP地址

 *这个请求的原因：我正在为一所学校构建一个小脚本，我需要用单词*private*替换 IP ，因为搜索功能返回带有 IP 地址的结果，我不想在结果中显示它们。

该字符串可能如下所示：Hans 在 2012 年 12 月 10 日使用 IP 123.1.1.1 发布

所以我的任务是显示：汉斯在 2012 年 12 月 10 日以 IP私人*发布*

综上所述，无论字符串是：Hans 在 10.12.2012 上发布的 IP 123.112.12.1 或 Hans 在 10.12.2012 上发布的 IP 123.12.15.12 或 Hans 在 10.12.2012 上发布的 IP 123.24.0.100

该解决方案会将任何以我的数组中的值开头的 IP 替换为*private*

感谢您花时间阅读本文：）

编辑：

我用这个字符串尝试了解决方案，但它没有按预期工作：

```
<?php
$ip = "The date is 12.10.2012 and this ip 123.1.2.12 should not show but 144.100.1.11 should show while 66.122.11.9 should not show";
$ip = preg_replace('/^(123 | 66 | 112) \. [\d.]+$/x', "private", $ip);
echo $ip;
?> 
```

最后应该显示的是：

日期是 12.10.2012，这个 ip *private*不应该显示，但是 144.100.1.11 应该显示，而*private*不应该显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:00:25.007

```
$result = preg_replace(
    '/\b             # Start at a word boundary
    (?=              # Assert that the following can be matched:
     [^\d.]*         #  only digits or dots
     \b              #  followed by a word boundary, 
     (?:123|66|112)  #  then one of the three magic numbers
     \b              #  and another word boundary
    )                # End of lookahead
    \d{1,3}          # Match a number
    (?:\.\d{1,3}){3} # Match a dot and a number, three times
    \b               # End the match at a word boundary/x', 
    'private', $subject); 
```

这不会对 IPv4 地址的有效性进行完整性检查；它也会匹配`999.123.999.999`。但如果有必要，可以很容易地引入这种检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:20:39.253

您可能有兴趣了解[`explode`](http://php.net/explode)和[`in_array`](http://php.net/in_array)：

```
$private_ips = ["123", "66", "112"];

in_array(explode('.', $ip)[0], $private_ips) 
    && $ip = 'private'
    ;

echo $ip; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T17:24:51.643

也可以为此使用正则表达式，当然也可以使用单行。

```
 $ip = preg_replace('/^(123 | 66 | 112) \. [\d.]+$/x', "private", $ip); 
```

虽然正则表达式只比较第一个数字，但它也可以将 IP 字符串的其余部分与 匹配`[\d.]+`，从而替换所有内容以防万一。*

# c# - 使用带有文件上传的流以某种方式操纵结果

> ID：12761968
> 
> 赞同：0
> 
> 时间：2012-10-06T17:15:06.700
> 
> 标签：c#, .net, asp.net-mvc-3, image-processing, file-upload

突然之前显示的图片停止显示在页面上并检查文件夹 * 发现当我单击它们时图像不显示。调试我的代码，我发现注释行导致了它。下面的代码是否无论如何都在操纵流？

```
public ActionResult UploadPhoto(UserPhotoUploadModel photoFileModel)
{
        HttpPostedFileBase photoFile = photoFileModel.PhotoFile;
    string uploadPath = Server.MapPath("~/Content/users/photos");
    string autoFileName = String.Format("{0}_{1}", Guid.NewGuid().ToString(), filename);
    string fileDestName = Path.Combine(uploadPath, autoFileName);

    //Starting from here is where the issue lies
    Stream imgStream = photoFile.InputStream;
    using (imgStream)
    {
        Image img = Bitmap.FromStream(imgStream);
        int width = img.Width;
        int height = img.Height;

        if (width > 100 || height > 100)
        {
            ModelState.AddModelError("PhotoFile", "Photo dimension should be 100 by 100 or less");
            return View(photoFileModel);
        }
    }
    //the issue ends here

    photoFile.SaveAs(fileDestName);

    return RedirectToAction("Profile", new {id = loggedinUser.ProviderUserKey});
} 
```

保存的文件具有正确的图像扩展名，例如 JPG。我正在使用流来确定上传图像的尺寸。

注释部分是导致此问题的原因。如何在输入流完好无损的情况下做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:34:52.663

问题是这一行：

```
 return View(photoFileModel); 
```

当代码到达这一行时，它会退出该方法。因此，不执行此行：

```
photoFile.SaveAs(fileDestName); 
```

# olap - 如何计算多维数据集中每个订单的行数

> ID：12761970
> 
> 赞同：1
> 
> 时间：2012-10-06T17:15:22.643
> 
> 标签：olap, olap-cube

我想不通，任何帮助将不胜感激。我有一个销售数量的衡量标准（交易数量的不同数量）。现在我正在寻找的是每个订单的平均行数。

在 Analysis Server 2008 R2 中如何计算？

# jquery - 滚动到页面加载之前

> ID：12761971
> 
> 赞同：2
> 
> 时间：2012-10-06T17:15:24.737
> 
> 标签：jquery

我正在尝试使用javascript使页面加载200px。但我总是在向下滚动之前看到顶部的 1 秒。

vimoe 这样做，页面加载后尝试向上滚动， http: [//vimeo.com/49645156](http://vimeo.com/49645156)

margin-top:-200px .. 给了我这种效果，但是在边距设置为负数后我不能向上滚动。

也许制作一个 jquery 解决方案，在页面加载后更改 body margin-top，这行得通吗？

目前使用这个脚本

```
function jumpScroll() {
window.scroll(0,200); // horizontal and vertical scroll targets

} 
```

我只是用 onload 从正文中调用这个脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:41:09.473

与其给出边距，不如不使用分部 id？

我确定您已经为加载时要在顶部显示的部门提供了一个 ID。

只需使用 div ID，如下所示：

```
$(document).ready(function (){
    var div= $('#example'); // take your div id
    $(window).scrollTop(div.offset().top).scrollLeft(div.offset().left);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:34:52.327

实际上可以这样做：

1\. 加载所有页面所需高度内容的空 div。

2.执行滚动到所需内容。因为这将是在页面加载时完成的第一件事，所以在加载内容之前它是不可见的。

3.通过ajax或模板加载实际内容。

# c# - 无法通过打开 .csproj 加载项目

> ID：12761975
> 
> 赞同：0
> 
> 时间：2012-10-06T17:15:44.963
> 
> 标签：c#, visual-studio-2010

抱歉，我是 VS 的新手... :'(

我目前正在使用 VS2010。当我试图双击一个 .csproj 来加载一个项目时，它只会加载一个包含所有关联的 .cs / 属性 / 参考文件的 XML。我以前可以使用.csproj 加载其他项目。所以我想知道它是否与项目本身有关。

有什么方法可以发现/检查它的原因/根本原因吗？（从加载的 XML 文件？）是因为该项目以前是使用其他较旧的 VS 开发的，例如 VS2008 / VS2005？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T18:51:22.953

也许您不小心更改了 .csproj 文件的默认文件关联。进入控制面板 -> 默认程序 -> 设置关联以查看设置为打开文件并将其更改为 Visual Studio 的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:54:12.317

1.  单击开始，然后单击控制面板。

2.  单击文件夹选项。

3.  单击文件夹选项窗口中的文件类型选项卡，将列出完整的文件类型及其关联。

4.  单击新建并在框中键入文件扩展名，然后单击高级。

5.  选择文件类型的关联。

6.  单击确定，然后单击关闭。

7.  再次打开文件

# codeigniter - 在 URL 中删除/隐藏控制器名称 - Codeigniter

> ID：12761981
> 
> 赞同：0
> 
> 时间：2012-10-06T17:16:34.203
> 
> 标签：codeigniter, url

我尝试了几种方法来删除我的网址中的控制器名称，但没有任何效果

我的网址就像：**www.mysite.com/controller/function**我只想要**www.mysite.com/function**

我已经尝试了路由，但控制器名称仍然保留在我的 url 中：/ 有什么技巧可以正确地做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:28:20.247

这将为您完成：

```
 $route['(:any)'] = "controller_name/$1"; 
```

# ruby-on-rails - 为什么字符串的扫描方法直接在rails中打印出来而忽略其余代码

> ID：12761982
> 
> 赞同：0
> 
> 时间：2012-10-06T17:16:41.240
> 
> 标签：ruby-on-rails, string, flags

我在 DB 中有一个字段（字符串），如果选中，则存储从复选框获取的值列表：

例子：

```
checkbox1 [X] //Value 1
checkbox2 [ ] //Value 2
checkbox3 [X] //Value 3
checkbox4 [X] //Value 4
checkbox5 [ ] //Value 5 
```

它在数据库中存储字符串“--- -'1' -'3' -'4'”（不带双引号）我不知道为什么，因为在我的表单中我有：

```
<%  SoProfile::LANGUAGES.each do |key, value| %>
  <div class="fluid">
    <%= f.label :languages,class: "checkbox" do %>
      <%= key %> <%= f.check_box :languages, {:multiple => true}, value, nil %>
    <% end %>
  </div>
<% end %> 
```

在模型中（我不想为此使用数据库表）：

```
LANGUAGES = { Espanol: 1, Ingles: 2, Portugues: 3, Italiano: 4, Mandarin: 5 } 
```

无论如何，对于上面的示例，它存储该字符串“--- -'1' -'3' -'4'”，我想根据语言显示国家标志，而不是放置语言名称。

我为此创建了一个辅助方法：

```
def insert_languages(string)
  string.scan(/\d/).each do |i|
    case i
      when i == "1"
        content_tag(:div,"",class: 'flag flag-co')
      end
  end
end 
```

在我看来，这就是所谓的：

```
<tr>
  <td>Idiomas <br /> 
    <%= insert_languages(@so_profile.languages) %>                                                                                   
  </td>
</tr> 
```

但是辅助方法不会从 .scan 传递，而是直接打印出哈希 ["1" "3" "4"]，它永远不会到达案例代码，就像字符串中有返回一样。扫描（.. 代码行。

如何防止 rails 返回哈希值并打印标志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:52:22.773

尝试将您的方法更改为以下内容：

```
def insert_languages(string)
  result = ""
  string.scan(/\d/).each do |i|
    case i
      when "1"
        result += content_tag(:div,"",class: 'flag flag-co')
      end
  end
  result
end 
```

由于 ruby​​ 从 .each 块返回值，因此您得到了哈希值。Ruby 隐式返回函数的最后一个值。关于您的存储方法 - 我建议您重新考虑您的存储方法。例如，在 mongoid 中，您可以使用数组。[对于主动记录，类似的](https://stackoverflow.com/questions/3100427/storing-arrays-in-database-using-activerecord)东西可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:56:59.300

`each`迭代器不会返回一个以上的值。如果没有明确声明 return，它将返回方法中访问的最后一个对象，在这种情况下是`string.scan(/\d/)`. 您可以更改`.each`为`.map`，这将返回一个 content_tags 数组，它将在视图中迭代：

```
<% insert_languages(@so_profile.languages).each do |lang| %>
    <%= lang %>
<% end %> 
```

# email - 在 drupal 中的商务电子邮件模块上添加新字段

> ID：12761983
> 
> 赞同：0
> 
> 时间：2012-10-06T17:16:42.830
> 
> 标签：email, drupal, drupal-commerce

我正在使用模块商务电子邮件[http://drupal.org/project/commerce_email](http://drupal.org/project/commerce_email)以便将包含客户完整订单的电子邮件发送到我的管理员电子邮件。一切正常。但在邮件中仅发送产品的名称数量和价格。我也想发送产品的品牌。似乎我所做的一切都没有用才能发送品牌。使用相同模块的任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T20:24:45.530

我自己只是在查看商务电子邮件，并且看到您很久以前就问过这个问题……但是以防万一有人发现这很有用，在我看来，您从商务电子邮件中获得的是订单项信息的产品。既然如此，如果品牌信息在订单项中，您应该处于良好状态

# command-line - argv参数转换

> ID：12761984
> 
> 赞同：-1
> 
> 时间：2012-10-06T17:16:44.797
> 
> 标签：command-line, parameters, argv, argc

> **可能重复：**
> [将字符串转换为整数 C](https://stackoverflow.com/questions/7021725/converting-string-to-integer-c)

我想将从命令 argv[1] 收到的数字转换为“int”。我知道 argv 存储为字符串，但我怎样才能从它们中获取整数值。假设 argv[1] = 10。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:18:59.570

您可以使用`atoi()`C 标准库中的函数：

[http://en.cppreference.com/w/cpp/string/byte/atoi](http://en.cppreference.com/w/cpp/string/byte/atoi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T21:05:58.880

POSIX C 库包含将字符串转换为实际数值的不同函数。这里有一些例子：

```
long some_long = strtol(argv[1], NULL, 10);
long long some_longlong = strtoll(argv[1], NULL, 10);
unsigned long some_unsigned_long = strtoul(argv[1], NULL, 10);
unsigned long long some_unsigned_longlong = strtoull(argv[1], NULL, 10); 
```

甚至还有用于转换为浮点值的函数：

```
double some_double = strtod(argv[1], NULL);
float some_float = strtof(argv[1], NULL);
long double some_long_double = strtold(argv[1], NULL); 
```

如需进一步参考，[请阅读此处](http://pubs.opengroup.org/onlinepubs/009695399/functions/strtol.html)和更多地方（同一网页上的 strtoul.html 和 strtod.html）。

# sql - 使用在另一台计算机上使用 Visual Studio 2008 创建的 mdf 文件

> ID：12761985
> 
> 赞同：1
> 
> 时间：2012-10-06T17:17:04.297
> 
> 标签：sql, visual-studio-2008

我用 Visual Studio 2008 创建了一个数据库，我有一个文件`c:\data.mdf`说明如何在另一台计算机上使用它？

我不能使用这个数据库，我安装了 SQL Server Express 2005 - 安装在第一台机器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:43:06.727

要将数据库从一个位置移动到另一个位置，

你需要

**1\. 从源数据库服务器分离：**由于您在源计算机上使用 Visual Studio 2008，请转到服务器资源管理器 - 右键单击​​数据库 - 单击分离。

**2\. 复制 MDF & LDF 文件到目标机器**

**3\. 将 MDF 文件附加到目标数据库服务器：**在目标计算机的 SQL Server 上重复步骤 1，而不是分离 - 选择附加并选择相关的 MDF 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:38:26.243

您不直接访问 mdf 文件，您总是通过服务器。

要“告诉”Sql Server 关于数据库：

```
Goto the Object Explorer window.
Right click Databases.
Select Attach...
Then Add... 
```

# jquery - 文本后面的 JQuery 手风琴图标

> ID：12761986
> 
> 赞同：4
> 
> 时间：2012-10-06T17:17:20.297
> 
> 标签：jquery, jquery-ui, accordion, padding

我第一次使用手风琴，但由于某种原因它不能正确显示。图标在文本后面，左侧没有填充。

一个最小的示例如下所示：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<title>test</title>

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link type="text/css" href="css/cupertino/jquery-ui-1.8.24.custom.css" rel="stylesheet" />
<script type="text/javascript" src="js/vendor/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="js/vendor/jquery-ui-1.8.24.custom.min.js"></script>
    <script type="text/javascript">
        $(function(){
            $("#accordion").accordion({ header: "h3", active: false, collapsible: true, fillSpace: true });
        });
    </script>
</head>
<body>
    <!-- Add your site or application content here -->
    <div id="accordion">
        <div>
            <h3>test</h3>
            <div>bla bla bla</div>
        </div>
    </div>

</body>
</html> 
```

[可以在此处查看](http://imageshack.us/photo/my-images/513/screenshotocf.png/)它对我的外观的屏幕截图

有谁知道如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:48:31.613

您的标记需要一些调整：

```
<div id="accordion">
    <h3><a href="#">test</a></h3>
    <div>bla bla bla</div>
</div>​ 
```

**示例：http:** [//jsfiddle.net/andrewwhitaker/WP29E/15/](http://jsfiddle.net/andrewwhitaker/WP29E/15/)

# python - 如何在 python 中使用 append 和 pickle？

> ID：12761991
> 
> 赞同：36
> 
> 时间：2012-10-06T17:17:53.830
> 
> 标签：python, python-2.7

我需要附加到一个泡菜文件（因为我一次没有完整的字典）。因此，为了做同样的事情，我编写了以下代码：

```
 import pickle
 p={}
 p[1]=2
 q={}
 q['a']=p
 p={}
 p[2]=0
 pickle.dump(q, open("save12.p","ab"))
 f={}
 f['b']=p
 pickle.dump(f,open("save12.p","ab")) 
```

但是，当我加载泡菜文件时，我没有找到字典 f 的值？？？？？？

有人可以建议我应该如何在泡菜文件中追加吗？？？

像“dbm”这样的数据库也不能满足我的需要，因为我在 Windows 上工作

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-10-06T17:24:33.837

Pickle 流是完全独立的，因此 unpickling 将一次 unpickle 一个对象。

因此，要对多个流进行 unpickle，您应该反复 unpickle 文件，直到出现 EOFError：

```
>>> f=open('a.p', 'wb')
>>> pickle.dump({1:2}, f)
>>> pickle.dump({3:4}, f)
>>> f.close()
>>> 
>>> f=open('a.p', 'rb')
>>> pickle.load(f)
{1: 2}
>>> pickle.load(f)
{3: 4}
>>> pickle.load(f)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
EOFError 
```

所以你的 unpickle 代码可能看起来像

```
import pickle
objs = []
while 1:
    try:
        objs.append(pickle.load(f))
    except EOFError:
        break 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2018-10-25T06:06:35.190

```
#To append to a pickle file
import pickle

p={1:2}
q={3:4}
filename="picklefile"
with open(filename, 'a+') as fp:
    pickle.dump(p,fp)
    pickle.dump(q,fp)

#To load from pickle file
data = []
with open(filename, 'rb') as fr:
    try:
        while True:
            data.append(pickle.load(fr))
    except EOFError:
        pass 
```

# html - Z-index 不适用于带有 p 的 img 和 div

> ID：12761992
> 
> 赞同：2
> 
> 时间：2012-10-06T17:17:56.337
> 
> 标签：html, css, z-index

我在将元素放置在彼此之上时遇到问题。这是我的标记：

```
<div id="glownySlajder">

                <ul>
                    <li>
                        <img src="inc/img/slajder_bg.jpg" alt="Slajd" class="slajd">
                        <div class="fr">
                            <a href="#" class="przyciskPoprzednia fl" title="Poprzednia"><img src="inc/img/strzalka_lewo.png" alt="strzalka_lewo"></a>
                            <p class="fl">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed laoreet consequat gravida. Nunc sed risus est, ac vestibulum nisl. Suspendisse sagittis velit a massa auctor accumsan. Aliquam hendrerit libero tellus, at molestie leo. Curabitur sodales </p>
                            <a href="#" class="przyciskNastepna fr" title="Następna"><img src="inc/img/strzalka_prawo.png" alt="strzalka_prawo"></a>
                        </div>

                    </li>
                 </ul>
         </div> 
```

这是我的CSS：

```
#glownySlajder {
    margin-bottom: -2px;
}

#glownySlajder a {
    margin: 7px;
}

#glownySlajder ul li img {

    z-index: 9998;
}

#glownySlajder div {        
    z-index: 9999;
    color: black;
    background-color: #e7e7e7;
    height: 85px;
    width: 500px;
    padding: 0px 5px;

}

#glownySlajder div p {

    font-size: 11px;
    line-height: 14px;
    margin-top: 20px;
    width: 390px;
}

.fr {
    float: right;
}

.fl {
    float: left;
} 
```

这就是我得到的：

![第一张图片](../Images/7444070fb787933281bc33136f04e903.png)

这是我想要实现的：

![第二张图片](../Images/49b5cb3a8125ddb3220ffab75f1bd8d4.png)

问题是 z-index 似乎不起作用。当我尝试在 with 上做负边距时`div`，`p`它只是消失在图像下，而不是我想要的。

我自己无法解决这个问题，请问有什么建议吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T17:22:07.447

首先，`z-index`仅适用于块元素 ( `display:block`)。其次，它仅对位于相同堆叠上下文中的元素有用。第三，不要使用`margin`定位。使用`position:`and `top`, `left`, `right`,`bottom`为此。

参考：

*   [CSS2.1：堆栈级别](http://www.w3.org/TR/CSS2/visuren.html#z-index)
*   [CSS2.1：定位](http://www.w3.org/TR/CSS2/visuren.html#positioning-scheme)

# c++ - 包含位域的结构的大小

> ID：12761994
> 
> 赞同：5
> 
> 时间：2012-10-06T17:18:12.543
> 
> 标签：c++, c, sizeof, bit-fields, structure-packing

> **可能重复：**
> [为什么结构的 sizeof 不等于每个成员的 sizeof 之和？](https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member)

我试图理解位域的概念。但我无法找到为什么 CASE III 中以下结构的大小为 8 个字节。

## 案例一：

```
struct B    
{
    unsigned char c;  // +8 bits
} b; 
```

大小（b）；// 输出：1（因为 unsigned char 在我的系统上占用 1 个字节）

## 案例二：

```
struct B
{
    unsigned b: 1;
} b;

 sizeof(b); // Output: 4 (because unsigned takes 4 bytes on my system) 
```

## 案例三：

```
struct B
{
    unsigned char c;  // +8 bits
    unsigned b: 1;    // +1 bit
} b;

sizeof(b); // Output: 8 
```

我不明白为什么案例 III 的输出为 8。我期待 1(char) + 4(unsigned) = 5。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T18:19:02.377

您可以使用 来检查结构的布局`offsetof`，但大致如下：

```
struct B
{
    unsigned char c;  // +8 bits
    unsigned char pad[3]; //padding
    unsigned int bint; //your b:1 will be the first byte of this one
} b; 
```

现在，很明显（在 32 位架构中）`sizeof(b)`will be `8`，不是吗？

问题是，为什么 3 个字节的填充，而不是更多或更少？

答案是字段在结构中的**偏移量**与字段本身的类型具有相同的对齐要求。在您的体系结构中，整数是 4 字节对齐的，因此`offsetof(b, bint)`必须是 4 的倍数。它不能为 0，因为有`c`前面，所以它将是 4。如果字段`bint`从偏移量 4 开始并且长度为 4 字节，那么结构的大小为 8。

另一种看待它的方式是，结构的对齐要求是其任何字段中最大的，因此这`B`将是 4 字节对齐的（因为它是您的位字段）。但是一个类型的大小必须是对齐的倍数，4是不够的，所以会是8。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T17:23:23.157

我认为您在这里看到了[对齐](http://en.wikipedia.org/wiki/Data_structure_alignment)效果。

许多体系结构要求将整数存储在内存中字长倍数的地址处。

这就是为什么你的第三个结构中的 char 被填充了三个字节，以便下面的无符号整数从一个是字长倍数的地址开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T17:20:23.047

Char 根据定义是一个字节。int 在 32 位系统上是 4 个字节。并且该结构被填充了额外的 4。

有关填充的一些解释，请参见[http://en.wikipedia.org/wiki/Data_structure_alignment#Typical_alignment_of_C_structs_on_x86](http://en.wikipedia.org/wiki/Data_structure_alignment#Typical_alignment_of_C_structs_on_x86)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T17:22:58.643

为了保持对内存的访问对齐，如果您打包结构，编译器将添加填充，它不会添加填充。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-06T17:56:05.690

结构的对齐方式和总大小是特定于平台和编译器的。您不能在这里期待直接且可预测的答案。编译器总能有一些特别的想法。例如：

```
struct B
{
    unsigned b0: 1;    // +1 bit
    unsigned char c;  // +8 bits
    unsigned b1: 1;    // +1 bit
}; 
```

编译器可以将字段 b0 和 b1 合并为一个整数，也可以不合并。这取决于编译器。一些编译器有控制这个的命令行键，一些编译器没有。其他示例：

```
struct B
{
    unsigned short c, d, e;
}; 
```

由编译器来打包/不打包这个结构的字段（假设是 32 位平台）。结构的布局在 DEBUG 和 RELEASE 版本之间可能不同。

我建议只使用以下模式：

```
struct B
{
    unsigned b0: 1;
    unsigned b1: 7;
    unsigned b2: 2;
}; 
```

当您具有共享相同类型的位字段序列时，编译器会将它们放入一个 int 中。否则，各个方面都会发挥作用。还要考虑到，在一个大项目中，您编写一段代码，而其他人将编写和重写 makefile；将您的代码从一个 dll 移动到另一个。此时编译器标志将被设置和更改。这些人有 99% 的机会不知道您的结构的对齐要求。他们甚至永远不会打开您的文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-06T17:59:44.167

我又看了一遍，这就是我发现的。

1.  来自 C 书，“关于字段的几乎所有内容都依赖于实现。”
2.  在我的机器上：

> ```
>  struct B {
>     unsigned c: 8;
>     unsigned b: 1;
> }b;
> printf("%lu\n", sizeof(b)); 
> ```

print 4 是一个短的；

您将位字段与常规结构元素混合在一起。

顺便说一句，位字段定义为：“单个实现定义的存储单元中的一组相邻**位**”所以，我什至不确定 ':8' 是否符合您的要求。这似乎不符合位域的精神（因为它不再有点）

# ruby - 捕获警告消息

> ID：12761995
> 
> 赞同：1
> 
> 时间：2012-10-06T17:18:19.007
> 
> 标签：ruby, warnings, ruby-1.9.3

有没有办法捕获警告，比如救援异常？我不想简单地禁用警告（通过做`$VERBOSE = nil`），而是想在运行时捕获警告消息的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:22:10.920

您可以重定向`stderr`到 StringIO 对象以捕获字符串中的警告输出：

```
require 'stringio'

old_stderr = $stderr
$stderr = StringIO.new
Foo = 1
Foo = 2 # generates a warning
puts $stderr.string # prints the warning
$stderr = old_stderr 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-05T05:14:11.957

```
require 'stringio'

def capture_stderr
  old, $stderr = $stderr, StringIO.new
  result = yield
  [result, $stderr.string]
ensure
  $stderr = old
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T17:28:52.153

这有点难看，因为您将写入文件并且您可能没有写入文件的权限，并且它会将所有输出隐藏到`$stderr`，而不仅仅是警告，但它可以工作：

```
$stderr.reopen("errors.txt")
MyConst = 4
MyConst = 5   # generates a warning on the standard error output
$stderr.reopen("errors2.txt")
puts "The following errors happened:"
puts File.read("errors.txt") 
```

# android - 为什么评级栏的大小没有减少？

> ID：12761998
> 
> 赞同：0
> 
> 时间：2012-10-06T17:18:37.493
> 
> 标签：android, ratingbar

我想减小评分栏的大小，但我做不到。我试图在评级栏上申请，但评级栏的大小没有变化。

请帮忙

这是style.xml

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="AppTheme" parent="android:Theme.Light" />
    <style name="ratingBar" parent="@android:style/Widget.RatingBar">
        <item name="android:maxHeight">10dip</item>
        <item  name ="android:maxWidth">10dip</item>

    </style>

</resources> 
```

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RatingBar
        android:id="@+id/ratingBar1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="58dp"
        style="@style/ratingBar" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T11:52:51.467

您需要为星星设置可绘制对象

```
 <style name="RatingBar" parent="@android:style/Widget.RatingBar">
    <item name="android:progressDrawable">@drawable/ratingbar_stars</item>
    <item name="android:minHeight">32dp</item>
    <item name="android:maxHeight">32dp</item>
</style>

<style name="RatingBar.Small" parent="@android:style/Widget.RatingBar">
    <item name="android:progressDrawable">@drawable/ratingbar_stars_small</item>
    <item name="android:minHeight">22dp</item>
    <item name="android:maxHeight">22dp</item>
</style> 
```

# css - Twitter Bootstrap 中的非标准列宽

> ID：12761999
> 
> 赞同：1
> 
> 时间：2012-10-06T17:18:41.543
> 
> 标签：css, html, twitter-bootstrap

这个问题是关于如何将**twitter bootstrap 用于非标准网页设计的 .** 我正在开发一个包含三个**300px、320px 和 360px**宽度的 div 列的网站。设计是由艺术家完成的，因此我无法更改宽度。我的 HTML 代码如下所示。

```
<div class = "row">
  <!-- First Column -->
  <div class = "span4">
  <!-- content -->
  </div>
  <!-- Second Column -->
  <div class = "span4">
  <!-- content -->
  </div>
   <!-- Third Column -->
   <div class = "span4">
  <!-- content -->
   </div>
</div> 
```

在 twitter bootstrap 中，最接近的列宽是
span4 - 300px 和
span5 - 380px
**显然，所需的宽度在太宽之间**

问题是当存在非标准列大小时该怎么办。试图在互联网上找到答案，但找不到答案。有人可以回答这个问题。