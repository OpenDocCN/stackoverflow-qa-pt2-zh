# StackOverflow 问答 13089000-13089999

# xml - 使用 xsl 删除字符

> ID：13089002
> 
> 赞同：17
> 
> 时间：2012-10-26T14:37:22.070
> 
> 标签：xml, xslt, xslt-1.0

我需要使用从字符串值中删除以下字符`xsl 1.0`

`*, /, \, #, %, !, @, $, (, ), &`

我想出了以下几点：

```
translate(translate(translate(string(//xpath/@value),'.',''),'/',''),',','') 
```

在上述方法中，我将不得不多次复制相同的代码（每个字符一次）。

如何在不复制代码的情况下实现相同的目标？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-26T14:48:07.527

**该`translate()`函数接受两个*字符串*作为其第二个和第三个参数，而不仅仅是两个字符**。

```
translate(., $string1, '') 
```

生成一个字符串，它是上下文（当前）节点的字符串值，其中`$string1`删除了任何出现的字符。

**因此，您可以使用**：

```
translate(expressionSelectingNode, "/\#%!@$()&", "") 
```

**删除第二个参数中包含的任何字符**。

当然，如果`translate()`函数在 XSLT 样式表中使用（或者，通常在 XML 文档中），一些特殊字符，例如`<`和`&`必须分别转义为`&lt;`和`&amp;`。

**使用它是如此强大，以至于可以删除一组*未知*字符**：

想象一下，您想从任何字符串中删除所有非数字字符。我们事先不知道字符串中会出现什么字符，因此我们不能只在 . 的第二个参数中枚举它们`translate()`。但是我们仍然可以像这样删除所有这些未知字符：

```
translate(., translate(., '0123456789', ''), '') 
```

内部`translate()`产生没有任何数字的字符串。

外部从原始字符串`translate()`中删除所有这些非数字字符（由内部找到`translate()`） - 因此剩下的只是数字字符。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-26T14:40:40.053

您只需`translate(//foo/@value, '*\%!@$&', '')`在纯 XPath 中分别在 XML 文档（如 XSLT 样式表）中转义 & 符号`<xsl:value-of select="translate(//foo/@value, '*\%!@$&amp;', '')"/>`。

# c# - 为 Parallel.For 循环设置优先级

> ID：13089003
> 
> 赞同：8
> 
> 时间：2012-10-26T14:37:32.833
> 
> 标签：c#, task-parallel-library

好的，情况如下：我的主/UI 线程（称为 Thread1）用于从物理文档扫描仪获取一批图像。获取批次后，将启动一个单独的“背景”线程（称为 Thread2）以处理和保存该批次中的图像。

Thread2（“后台”线程）正在使用一个`Parallel.For`循环，与正常循环相比，该循环将图像处理/保存时间减少了 70% `For`。但是，它似乎也使我的所有处理器都达到极限，因此 Thread1 在`Parallel.For`循环完成之前无法开始获取更多图像。

有没有办法“限制”一个`Parallel.For`循环，使其不会最大化我的处理器？或者设置处理优先级？我试过设置`Thread2.Priority = ThreadPriority.Lowest`，但这似乎不会影响循环。还是我误解了`Parallel.For`循环的工作原理？它是否以某种方式阻塞了 Thread1？

下面是我如何从 Thread1 中的方法调用 Thread2。

```
public void SaveWithSettings(bool save) // method in Thread1
{
    ....
    Thread thr = new Thread(ThreadWork); // creating new thread (Thread 2)
    thr.Priority = ThreadPriority.Lowest; // does nothing?
    thr.Start(new SaveContainer(sc)); // pass a copy as paramater

    // misc stuff to make scanning possible again
    numBgw++;
    twain.RemoveAllImages(); // clear images
    imagelist.Clear(); // clear imagelist images
    .... // etc. this all appears to process fine while Thread2 is processing
} 
```

这是我的`ThreadWork`方法：

```
private void ThreadWork(object data) // executing in Thread2
{
    SaveContainer sc = data as SaveContainer; // holds images

    bool[] blankIndex = new bool[sc.imagelist.Count]; // to use in Parallel.For loop
    for (int i = 0; i < sc.imagelist.Count; i++)
        blankIndex[i] = false; // set default value to false (not blank)

    Parallel.For(0, sc.imagelist.Count, i => // loop to mark blank images
    {
        bool x = false; // local vars make loop more efficient
        x = sc.IsBlankImage((short)i); // check if image at index i is blank
        blankIndex[i] = x; // set if image is blank
    }
    .... // other image processing steps
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-21T12:57:13.943

```
public static void PriorityParallelForeach<T>(this IEnumerable<T> source, Action<T> action, ThreadPriority threadPriority, int? maxDegreeOfParallelism = null)
   {
       if (maxDegreeOfParallelism == null || maxDegreeOfParallelism<1)
       {
           maxDegreeOfParallelism = Environment.ProcessorCount;
       }

       var blockingQueue = new BlockingCollection<T>(new ConcurrentQueue<T>(source));
       blockingQueue.CompleteAdding();

        var tasks = new List<Task>() ;

        for (int i = 0; i < maxDegreeOfParallelism; i++)
        {
            tasks.Add(Task.Factory.StartNew(() =>
             {
                 while (!blockingQueue.IsCompleted)
                 {
                     T item;
                     try
                     {
                         item = blockingQueue.Take();
                     }
                     catch (InvalidOperationException)
                     {
                         // collection was already empty
                         break;
                     }

                     action(item);
                 }
             }, CancellationToken.None,
                  TaskCreationOptions.None,
                  new PriorityScheduler(threadPriority)));
        }

        Task.WaitAll(tasks.ToArray());

   } 
```

要不就：

```
Parallel.ForEach(testList, item =>
            {

                var priviousePrio = Thread.CurrentThread.Priority;
                // Set your desired priority
                Thread.CurrentThread.Priority = ThreadPriority.Lowest;

                TestCalc(item);

                //Reset priviouse priority of the TPL Thread
                Thread.CurrentThread.Priority = priviousePrio;
            }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:07:25.517

一种粗略的方法是 ParallelOptions 中的 MaxDegreeOfParallelism 标志。

```
var Options = new ParallelOptions();

// Keep one core/CPU free...
Options.MaxDegreeOfParallelism = Environment.ProcessorCount - 1;

Paralle.For(0, sc.imagelist.Count, Options, i => // loop to mark blank images
{
    bool x = false; // local vars make loop more efficient
    x = sc.IsBlankImage((short)i); // check if image at index i is blank
    blankIndex[i] = x; // set if image is blank
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T14:41:20.700

> 有没有办法“限制”一个 Parallel.For 循环，这样它就不会最大化我的处理器？

是的，您可以使用 MaxDegreeOfParallelism=N 添加选项。

> 或者设置处理优先级？

不，它是一个 ThreadPool（借用）线程。不要改变它的属性。实际上它是一堆池线程。

> 还是我误解了 Parallel.For 循环的工作原理？它是否以某种方式阻塞了 Thread1？

是的，从外面看`Parallel.For(...)`是阻塞电话。因此，在单独的任务或 Backgroundworker 上运行它，而不是从主线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T21:15:57.487

好的，我想通了！我只是发布这个以防有人无意中发生这种情况......

事实证明，`Parallel.For`线程没有阻塞 Thread1（是的，你没问题）。但是，Thread1 中的一个对象试图`Thread`从`ThreadPool`while 循环中获取一个新对象，因此发生了“延迟”。我正在使用第 3 方 SDK，它允许我与 TWAIN 界面交互，并且有一个选项`ScanInNewThread = true`试图在每次用户开始新扫描时抓取一个新线程（这是在循环运行时发生的）。我能够更改这一点，以便在整个应用程序会话中使用单个（但仍然是单独的）线程，而不是为每个扫描批次抓取一个新线程，并且 BANG，没有更明显的延迟。

所以 - 故事的寓意：

现有线程应该仍然“正常”运行（调用`Parallel.For`循环的线程除外），只要它们不试图从`ThreadPool`循环进行中获取更多线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T15:14:28.727

Without access to the entire application it is difficult to know exactly what is happening here but let's start by breaking down Parallel.For:

```
private void ThreadWork(object data) // executing in Thread2
{
    // Thread2 running here
    SaveContainer sc = data as SaveContainer; // holds images

    bool[] blankIndex = new bool[sc.imagelist.Count]; // to use in Parallel.For loop
    for (int i = 0; i < sc.imagelist.Count; i++)
        blankIndex[i] = false; // set default value to false (not blank)

    // Thread2 blocks on this call
    Paralle.For(0, sc.imagelist.Count, i => // loop to mark blank images
    {
        // Thread from the pool is running here (NOT Thread2)!!!

        bool x = false; // local vars make loop more efficient
        x = sc.IsBlankImage((short)i); // check if image at index i is blank
        blankIndex[i] = x; // set if image is blank
    }
    // Thread2 resumes running here

    .... // other image processing steps
} 
```

So changing Thread2's priority will not make a difference since it is blocked anyway. However, if Thread1 is not blocked, it should still be able to run. Thread1 may not run often, which could be your problem.

The naive approach would be to do something like mess with thread priorities, counts, or add some Thread.Yield() statements. However, the threads from the pool are likely already blocking since they are doing I/O.

Most likely, what you need to do here is refactor your code so that your image loading loop blocks on your main thread's image acquiring using something like System.Threading.WaitHandle or move more of the work the main thread is doing into the image loading. Without refactoring, experience says you will end up with a solution that is tailored to the specific machine you are testing on, under specific running conditions but, when loads change or hardware changes, your "tuning" will be off.

Rework the code so more work is being done inside your Parallel.For workers and block your threads on main thread activity when there is work for the main thread and you will have a solution of which you are proud.

# expressionengine - 我刚刚为 MSM 购买了额外的站点许可证，但不想升级 EE，我该怎么办？

> ID：13089005
> 
> 赞同：3
> 
> 时间：2012-10-26T14:37:37.283
> 
> 标签：expressionengine

似乎将附加站点添加到 MSM 安装的唯一方法是升级 MSM 模块，巧合的是，这需要同时升级主 EE 安装文件。有没有解决的办法？

目前升级客户端站点是不可行的，但我们需要添加一个额外的站点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T14:39:21.293

您可以这样做，但它不受官方支持。要更新您的 MSM 获得许可的站点数量，请在购买后下载新的 zip，然后仅替换一个文件。

系统 > 表达式引擎 > 库 > Sites.php

此文件包含您可以安装的站点数量的散列/加密值。

# php - 创建一个 zip 文件

> ID：13089006
> 
> 赞同：2
> 
> 时间：2012-10-26T14:37:38.383
> 
> 标签：php, stream, zip

我有一个脚本可以下载我的数据库转储，但文件越来越大。我尝试用以下方式压缩它：

```
$dump = `mysqldump -u $username -p$password $dbname`;
$fp = fopen('php://temp', 'r+');
stream_filter_append($fp, 'zlib.deflate', STREAM_FILTER_WRITE, array('level' => 9));
fputs($fp, $dump);
rewind($fp);

//Envoi du "fichier"
$this->setLayout(false);
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-Description: SQL Dump");  
header('Content-Disposition: attachment; filename="mydump.sql.zip"'); 
$this->fichier = stream_get_contents($fp); 
```

但这会创建一个无效的 zip 文件。我错过了什么吗？

**编辑**

标题中也一定有问题，Firefox 将文件显示为“HTM 文档”，我无法显示文件大小。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T14:39:07.170

为什么不干脆做

```
$dump = `mysqldump ... | gzip -9 > somefile.gz`; 
```

并跳过整个“在 php 中执行 gzip”？

你甚至可以用

```
passthru('mysqldump ... | gzip -9'); 
```

并将输出直接转储到客户端浏览器。

# entity-framework-4 - EF 4.1 使用 System.Data.Entity 并且仍然可以在我的 Include 中使用 Lambda 表达式

> ID：13089008
> 
> 赞同：0
> 
> 时间：2012-10-26T14:38:01.087
> 
> 标签：entity-framework-4, lambda, include

我正在使用 EF 4，在我同一台机器上的其他项目中，我没有遇到这个问题。我有：

```
using System.Data.Entity; 
```

和

```
ctx.AdminUsers.Include(a => a.foo)... 
```

但我明白了

无法将 lambda 表达式转换为类型“字符串”，因为它不是委托类型

反正。

关于我可能忘记的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:41:48.187

听起来您的实体模型未配置为使用 DbContext。

您需要将 ADO.NET DBContext Generator 作为代码生成项添加到您的实体模型中。

要切换到 DBContext，请在模型 UI 中右键单击并选择 Add Code Generation Item，选择 ADO.NET DbContext Generator 并将其添加到项目中。这将删除 model.designer.cs 文件中的类并添加新的 DbContext 对象。您现在应该能够使用这些对象了。

如果您的实体模型与应用程序不在同一个项目中，您可能需要添加对 EntityFramework 库的引用，以便在此更改后构建它。

# javascript - XmlSerializer 适用于 Firefox，但 .xml 不适用于 IE JavaScript

> ID：13089009
> 
> 赞同：0
> 
> 时间：2012-10-26T14:38:05.373
> 
> 标签：javascript, xml, string, internet-explorer, firefox

我在客户端创建了一个节点（或我不确定的 xml 对象），并尝试在本地保存该 xml 文件。我的目标是将 xml 节点（或对象）转换为字符串并保存在文本文件中。

问题是以下方法在 Firefox 上将 xml 转换为字符串，但在 IE 上不转换

所以我有一个根 xml 对象：

```
console.log(xmlToString(root));
//save_content_to_file(xmlToString(root), "C:\\test");

}

function xmlToString(xmlData) { 

    var xmlString;
    //IE
    if (window.ActiveXObject){
        xmlString = xmlData.xml;
    }
    // code for Mozilla, Firefox, Opera, etc.
    else{
        xmlString = (new XMLSerializer()).serializeToString(xmlData);
    }
    return xmlString;
} 
```

FF上的输出：

```
<plist><dict><key>subject</key><string></string><key>date</key><string></string><key>time</key><string></string><key>briefings</key><array><dict><key>files</key><array><dict><key>date</key><string>2012/09/09</string><key>name</key><string></string><key>description</key><string></string></dict></array><key>subject</key><string></string><key>presenter</key><string></string><key>time</key><string></string></dict></array></dict></plist> 
```

IE上的输出： `undefined object`

编辑：：：

添加了以下方法没有任何改变

```
function serializeXmlDoc(xmlDoc) {
    if (window.XMLSerializer) {
        return (new window.XMLSerializer()).serializeToString(xmlDoc);
    } else if (typeof xmlDoc.xml != "undefined") {
        return xmlDoc.xml;
    }
    return "";
} 
```

知道如何在 IE 上解决此问题吗？

# arrays - 查找总和可被 K 整除的最长子数组

> ID：13089010
> 
> 赞同：1
> 
> 时间：2012-10-26T14:38:10.627
> 
> 标签：arrays, algorithm, data-structures

找到总和可被 K 整除的最长子数组。在 O(n) 中可能吗？如果不能，那么 n^2 可以做得更好吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T14:53:01.747

让`s[i] = sum of first i elements modulo K`.

我们有：

```
s[i] = (s[i - 1] + a[i]) % K 
```

我们必须为每个 找到`i`最小的`j`这样的`s[i] == s[j]`。您可以通过散列`s[i]`值来找到它。如果`K`很小，你可以只保留一个数组`p[i] = first position for which s[k] == i`。

复杂度是`O(n)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:52:46.420

```
function longestRangeDividableBy(k) {
  arrayOfRanges
  sum =0
  startIndex = 0
  endIndex = 0
  for ( i=0 ; i < array.size; i++) {
    sum += array[i]
    if (sum % k != 0) {
      endindex = i
    } else {
      arrayOfRanges.add(new Range(startIndex, endIndex);
      startIndex = i+1
      sum = 0
    }
  }
  arrayOfRanges.sortDescending();
  return arrayOfRanges.get(0).lengthOfRange()
} 
```

这里我说范围的搜索是线性的。因此，它取决于算法是 O(n) 还是 n^2 的排序。如果我错了，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:31:27.120

正如前面的答案所建议的，这可以在 O(N) 时间和空间内完成。其他答案提到了散列和排序。然而，这两个问题都不需要。在以下说明单次 O(N) 方法的 Python 程序中，`rr`是输入数组，`vb[x]`是第一个具有模值`x`的子和`ve[x]`的索引，是具有模值的最后一个子和的索引`x`。典型的输出显示在程序之后。

```
import random
K, N, vmax = 10, 25, 99
rr = [random.randrange(vmax) for x in range(N)]
print 'rr', rr
vb, ve = [-1 for x in range(K)],  [-1 for x in range(K)]
vb[0] = ve[0] = mb = me = ms = s = 0

for i in range(N):
    s = (s + rr[i]) % K
    ve[s] = i+1
    if vb[s] < 0:
        vb[s] = i+1
    if ve[s] - vb[s] > me - mb:
        mb, me, ms = vb[s], ve[s], s

print "Max len is", me-mb, "for rem", ms, "at [", mb,":",me, "], total=", sum(rr[mb:me]) 
```

典型输出，对于 K=10 和 N=25：

```
rr [26, 57, 0, 70, 33, 94, 23, 60, 62, 3, 28, 14, 12, 72, 6, 86, 29, 10, 60, 50, 21, 37, 40, 96, 73]
Max len is 21 for rem 3 at [ 2 : 23 ], total= 810 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-05T06:02:28.467

```
 as rightly pointed out by @IVIad you have to keep a track of the current 
sum modulo k. 
you can write it as s=0
          s=(s+arr1[i])%k 
    after that in a for loop you can use a dictionary and see if the 
s is present in dictionary ; 
if yes then update the length else update the dictionary .
    below is the code.

    def longestsubsarraywithsumdivisiblebyk(arr1,k):
        h={}
        h[0]=-1
        maxlen=0
        s=0
        for i in range(len(arr1)):
            s=(s+arr1[i])%k
            if s in h:
                maxlen=max(maxlen,i-h[s])
            else:
                h[s]=i
        return maxlen 
```

# vbscript - 如何重新格式化在 VB 中存储为字符串的日期？

> ID：13089014
> 
> 赞同：0
> 
> 时间：2012-10-26T14:38:17.707
> 
> 标签：vbscript

我有一个日期（11/1/2012）存储为一个名为“sTemp”的字符串变量。我想将此日期分配给格式为 yyyyMMdd 的字符串变量 LessOfFiveDates。我一直在尝试以下代码的变体，但它不起作用。

我如何重新格式化它以创建所需的输出？

```
If IsDate(sTemp) Then
    dtTemp = CDate(sTemp)
    LessOfFiveDates = CStr(Format(dtTemp, "yyyyMMdd"))
Else 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:54:56.763

您提供了自己的解决方案，对此表示赞同！

在您的另一个问题中，您要求提供一个优雅的解决方案。这个问题的一个优雅的解决方案是使用 dotnet StringBuilder 对象。使用此对象，您的格式更加灵活。因为它是在字符串中而不是在代码中实现的，所以您可以在配置设置中添加格式而没有任何麻烦。
除此之外，字符串生成器将根据您的系统区域设置使用日期，如果您的脚本在具有不同显示日期和时间设置的系统上运行，那就太好了。

```
Dim sb : Set sb = createobject("System.Text.StringBuilder")
Dim d : d = "5/6/2007"

If isDate(d) Then
    call sb.AppendFormat("{0:yyyyMMdd}", cdate(d))
    LessOfFiveDates = sb.ToString()
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:09:35.857

我使用以下代码让它工作：

```
If IsDate(sTemp) Then
    LessOfFiveDates = CStr(Year(sTemp) & Right("00" & Month(sTemp), 2) & Right("00" & Day(sTemp), 2))
Else 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:23:37.703

如果一个人拥有 Visual Studio 6.0（或 VB6 等子产品）的开发人员许可证，则有一种简单的方法可以`Format()`在 VBScript 中获取函数，而无需 .Net 的极端开销：

```
'Requires msstdfmt.dll, part of Visual Studio 6.0 and
'not meant for general redistribution.
Option Explicit

Class Formatter
    Private SDFMT, RS

    Private Sub Class_Initialize()
        Set SDFMT = CreateObject("MSSTDFMT.StdDataFormat")
        Set RS = CreateObject("ADODB.Recordset")
        With RS
            .Fields.Append "V", 12 'adVariant.
            .Open
            .AddNew
            Set .Fields(0).DataFormat = SDFMT
        End With
    End Sub

    Private Sub Class_Terminate()
        RS.Close
    End Sub

    Public Function Format(ByVal Value, ByVal Style)
        SDFMT.Format = Style
        With RS.Fields(0)
            .Value = Value
            Format = .Value
        End With
    End Function
End Class

Dim FMT

Set FMT = New Formatter

MsgBox FMT.Format(Now(), "yyyy-mmm-dd hh:nn:ss")
MsgBox FMT.Format(123456.789, "###,##0.00") 
```

但是您通常不需要如此全面的通用性，您可以使用现有的 VBScript 操作来获得所需的结果：

```
Option Explicit

Private Function ZF2(ByVal Num)
    ZF2 = Right("0" & CStr(Num), 2)
End Function

Private Function DtFormat(ByVal Dt)
    DtFormat = CStr(Year(Dt)) & ZF2(Month(Dt)) & ZF2(Day(Dt))
End Function

MsgBox DtFormat(#3/11/2012#) 
```

当然，这些都不涉及尝试将字符串值用作日期值时遇到的危险。除非您在字符串中小心使用通用日期格式（即美国布局：MM/DD/YYYY）并依赖隐式转换，否则这些可能会出错。CDate() 函数可识别区域设置，但如果输入通用格式的日期，则可能会产生虚假结果。

# llvm - 在基于 LLVM 的编译器中如何处理符号表？

> ID：13089015
> 
> 赞同：5
> 
> 时间：2012-10-26T14:38:20.300
> 
> 标签：llvm

我通过教程使用 LLVM [http://llvm.org/releases/3.1/docs/tutorial/](http://llvm.org/releases/3.1/docs/tutorial/)编写了一个玩具编译器， 但是关于符号表处理的内容并不多。有一个命令 llvm-nm 显示符号表，它以位码文件作为输入。它只返回函数名。LLVM 编译器如何在没有符号表的情况下处理局部变量和循环变量？如果不是这样，符号表是如何处理的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T11:42:59.727

其 IR 的 LLVM 内存表示不使用符号表。指令包含指向其操作数（及其用户）的直接内存链接，因此如果您有一条指令并想要访问其操作数，只需点击该链接，您就不必在任何符号表中执行查找。

有一些与 LLVM 上下文、模块、函数和基本块相关联的列表，它们允许您访问包含的元素，但它们大多只是列表，而不是将名称与任何东西相关联的表。

当然，如果您想*解析*文本 IR 文件 (ll)，您可能需要一个符号表（或类似的东西）来执行此操作并*创建*上述链接；但是看到 LLVM 已经包含这样的解析器（并且该解析器确实使用某种方式将“名称”与值相关联 - 请参阅 的实现`BitcodeReader`），几乎没有理由这样做。

至于用于生成 IR 的 LLVM 前端 - 这取决于您。我想说，如果您想解析类似 C 的语言，使用符号表将非常有用。

# python - 如何在 Python 中从具有多个条件的文件中打印行？

> ID：13089022
> 
> 赞同：2
> 
> 时间：2012-10-26T14:38:31.607
> 
> 标签：python, file, line, conditional-statements

我有一个关于 python 的简短问题：如何从文件中读取特定行？通过使用多个过滤器，下面是我当前的代码，它没有为我显示预期的结果：

```
for line in loglist:
    if (str('send') and str('packet')) in line:
        print line 
```

所以，我想要打印包含“发送”和“数据包”这两个词的行，但它会打印所有包含发送或数据包的行。

非常感谢你们，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:39:37.060

单程：

```
if all( x in line for x in ('send','packet')): 
```

如果您需要扩展到任意数量的条件，这是最有效的方法......

另一种方式：

```
if ('send' in line) and ('packet' in line): 
```

只需 2 次检查，这可能会比上述更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T14:40:10.077

你应该分开你的条件： -

```
if ('send' in line) and ('packet' in line):
    print line 
```

**如果你这样做： -**

```
if (str('send') and str('packet')) in line: 
```

这类似于说：-

```
if 'packet' in line: 
```

因为，内部条件是`and`返回**false`last`值**，或者**如果全部为 True，则返回最后一个值。**

所以，`str('send') and str('packet')`等价于`'packet'`

而且您不需要`str`围绕它们进行包装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T14:40:39.593

`(str('send') and str('packet'))`

评估为“数据包”总是正确的（不是你想要的）。尝试

`if "send" in line and "packet" in line`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-26T14:40:44.767

`(str('send') and str('packet'))`评估为`True`。所以你说`True in line`，这当然行不通。你需要的是

```
if 'send' in line and 'packet' in line):
    print line 
```

顺便说一句，在字符串上运行没有意义`str()`，为什么要将字符串转换为字符串？

# django - 模型字段的自定义表单字段

> ID：13089024
> 
> 赞同：1
> 
> 时间：2012-10-26T14:38:38.437
> 
> 标签：django, django-models, django-forms

我想在模型中使用[USSocialSecurityNumberField](https://docs.djangoproject.com/en/1.4/ref/contrib/localflavor/#django.contrib.localflavor.us.forms.USSocialSecurityNumberField)。准确地说，我可以在模型中使用 CharField，但我希望它将 USSocialSecurityNumberField 注入基于该模型的模型表单。

[除了子类化模型字段](https://docs.djangoproject.com/en/1.4/howto/custom-model-fields/#specifying-the-form-field-for-a-model-field)之外，有没有办法覆盖模型字段的默认表单字段？我的意思是：

```
ssn = models.CharField(max_length=11, formfield=USSocialSecurityNumberField) 
```

对于一次性需求，这将是最简单的解决方案。

PS。我也对模型字段和表单字段的其他组合感兴趣，因此子类化是一个烦人的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:53:35.103

我不确定这正是您要寻找的。如果您有兴趣验证表单字段的值，您可以使用验证器：

```
def validate_USSocialSecurityNumberField(myNumber):
    # here goes the validation algorithm which will raise a ValidationError 
    # if the number is not in the correct format
    # and of course you will catch the exception
    # except ValueError:
    #     raise ValidationError(u'"%s" is not in the correct format!' % myNumber) 
```

你的模型可能看起来像：

```
ssn = models.CharField(max_length=11, validators = [validate_USSocialSecurityNumberField]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:57:41.633

Field 和 ModelField 都不存在这样的论点。但是子类化应该不会太难，我相信类似这样的东西应该可以工作：

```
class MyModelField(models.Field):
    def formfield(self, **kwargs):
        kwargs['form_class'] = forms.USSocialSecurityNumberField
        return super(MyModelField, self).formfield(**kwargs) 
```

# ios - 本地存储安全

> ID：13089026
> 
> 赞同：1
> 
> 时间：2012-10-26T14:38:41.407
> 
> 标签：ios, cordova, phonegap-plugins

我使用电话间隙并通过以下命令创建一个新数据库。

```
var dbShell = window.openDatabase(name, version, display_name, size); 
```

我只想保存一个带有时间戳的用户名或电子邮件地址。没什么特别的。谁可以在 iOS 5/6 上访问 SQL-Lite db 上的这些数据？或者可以看到吗？

# c# - .NET 4.5 中的代码合同 + 异步：“方法或操作未实现”

> ID：13089029
> 
> 赞同：15
> 
> 时间：2012-10-26T14:38:45.900
> 
> 标签：c#, .net-4.5, code-contracts, async-await, c#-5.0

在 Windows 7 x64 上的 VS2012 中使用 Code Contracts 1.4.51019.0 时，我从 ccrewrite 收到以下编译错误：**“方法或操作未实现。”**

 ***它似乎是由属性访问器的组合和使用`async`缺少内部的方法引起的`await`。

**复制步骤：**

创建一个启用了“完整”运行时合同检查的新类库：

```
namespace CodeContractsAsyncBug
{
    using System.Threading.Tasks;

    public class Service
    {
        // Offending method!
        public async Task ProcessAsync(Entity entity)
        {
            var flag = entity.Flag;
        }
    }

    public class Entity
    {
        public bool Flag { get; set; }
    }
} 
```

有没有其他人经历过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:46:52.047

`async`没有的方法`await`通常表示编程错误。有一个编译器警告会通知您这种情况。

如果您希望同步实现具有异步签名的方法，通常的方法是实现非`async`方法并返回 a `Task`，例如`Task.FromResult<object>(null)`. 请注意，使用这种方法，异常会同步引发，而不是放在返回的`Task`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T16:38:07.533

这似乎在代码合同 1.5 版中得到修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T16:42:49.887

在过去的几个月里，我们修复了许多重写异步方法的问题。我建议您在最新的安装程序上再次尝试您的代码，如果您仍然遇到问题，请提供完整的重现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T14:17:01.193

我相信 async 关键字只是代表这一点 - 要么你在代码中有一个 await ，它将生成一个 Task 并在调用方法时处理，或者你需要显式地返回一个 Task 。***

# c++ - 如何将数据从`boost::scoped_array`复制到`std::vector`

> ID：13089030
> 
> 赞同：7
> 
> 时间：2012-10-26T14:38:47.123
> 
> 标签：c++, boost, stl, std

```
vector<int> vec;
boost::scoped_array<int> scpaInts;

scpaInts.reset(new int[10]);

for (int i=0; i<10; i++)
    scpaInts[i] = i*2;

vec.assign(&scpaInts[0], &scpaInts[9]+1);      // => method one
vec.assign(scpaInts.get(), scpaInts.get()+10); // => method two 
```

问题1>我想出了两种方法。但我不确定它们是否正确或有更好的方法来做到这一点。

问题 2> 是否真的无法从 boost::scoped_array 中获取有效长度？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:46:27.763

问题1：两种方法都可以。指向数组元素的指针可以扮演随机访问迭代器的角色。这个也不错

```
vec.assign(&scpaInts[0], &scpaInts[10]); 
```

问题 2：这与您无法将 C 样式数组的长度传递给函数的原因相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:50:56.557

问题1：两种方法都是正确的。

问题2：正确，它只是一个类似于std::scoped_ptr的容器，它确保传递的指针（使用手动创建`operator new[]`）将使用删除`operator delete []`。它不包含有关数组大小的任何信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:14:44.380

Both methods seem correct to me, but the second is definitely clearer since you aren't splitting the offset into `9` and `1` components. There are also two other options:

```
vec.assign(&scpaInts[0], &scpaInts[0] + 10); 
```

Or don't create the vector before you need it (best of all the options):

```
vector<int> vec(scpaInts.get(), scpaInts.get() + 10); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T14:45:59.400

两者都可以。但第二个对我来说更清楚。`boost::scoped_array`像简单的数组一样工作，您现在无法确定数据的大小。要将其复制到矢量，您必须知道它的大小。 [这](http://boost.2283326.n4.nabble.com/scoped-array-and-boost-begin-td2592648.html)是有关 scoped_array 迭代器和大小的链接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T14:47:23.643

我会选择方法2：

```
vec.assign(scpaInts.get(), scpaInts.get()+10); // => method two 
```

就像普通的动态数组一样：

```
int * a = new int[10];
...
vec.assign(a, a+10); // => method two 
```

当然方法 1 也可以，例如使用动态数组：

```
vec.assign(&a[0], &a[9]+1); // => method one 
```

如您所见 - 方法 2 看起来更简单，因此更好。

* * *

而且，不，范围数组中没有`size()`方法。

# android - 捏放大和缩小

> ID：13089031
> 
> 赞同：2
> 
> 时间：2012-10-26T14:38:55.460
> 
> 标签：android, pinchzoom

我正在使用访问[如何获得图像的缩放功能？](https://stackoverflow.com/questions/2537238/how-can-i-get-zoom-functionality-for-images/7458910#7458910)并从访问[https://github.com/MikeOrtiz/TouchImageView](https://github.com/MikeOrtiz/TouchImageView)获得了一个项目 。

但是当我运行它时。我得到了一张图片，但没有得到任何捏缩放。

我是否需要更改此代码：-

```
 TouchImageView img = new TouchImageView(this);
  // ImageView img = new ImageView(this);
    Bitmap snoop = BitmapFactory.decodeResource(getResources(), R.drawable.snoopy);
    img.setImageBitmap(snoop);
    img.setMaxZoom(4f);
    setContentView(img); 
```

请专家检查一下。感谢您的热心帮助。

任何人都可以通过这个项目帮助我：- 访问 我在项目中使用的[http://androidtrainningcenter.blogspot.in/2012/04/pinching-zoom-in-android-image-view-or.html 。](http://androidtrainningcenter.blogspot.in/2012/04/pinching-zoom-in-android-image-view-or.html)但我不明白如何使用这个类。我创建了在 imageview 中显示图像的类。现在我想做 pinchzoom

请专家检查一下。谢谢你

# css - IE中的红色发光边框？

> ID：13089033
> 
> 赞同：0
> 
> 时间：2012-10-26T14:39:00.923
> 
> 标签：css, internet-explorer

我目前正在为客户建立一个网站，并且在 IE 中遇到问题，边框都是红色的。该网站位于[http://commercialcreditchecks.com](http://commercialcreditchecks.com)，任何有 boxshadow 的地方，boxshadow 都是红色而不是指定的蓝色，此外，链接的徽标图像有一个红色边框，即使边框设置为无。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:42:31.823

你的问题在于你的造型。在类名`.cta`上，您有以下设置：

```
filter: progid:DXImageTransform.Microsoft.Glow(Color=#333,Strength=15); MARGIN: 0px auto 
```

里面是部分`Color=#333`

也许尝试：

```
progid:DXImageTransform.Microsoft.Glow(Color=Gray,Strength=10); MARGIN: 0px auto 
```

或尝试`Silver`看起来更接近 Gray20 (#333333)

[MSDN Doc Here](http://msdn.microsoft.com/en-us/library/ms532995%28v=vs.85%29.aspx)会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:09:34.280

添加以下CSS。对于 IE 使用

```
filter: progid:DXImageTransform.Microsoft.Blur(PixelRadius=3,MakeShadow=true,ShadowOpacity=0.30);
    -ms-filter: "progid:DXImageTransform.Microsoft.Blur(PixelRadius=3,MakeShadow=true,ShadowOpacity=0.30)";
    zoom: 1; 
```

对于 chrome，Safari 浏览器使用

```
-moz-box-shadow: 0 0 3px #0066FF;
-webkit-box-shadow: 0 0 3px #0066FF; 
```

# android - CheckBox 没有在使用自定义适配器的自定义 Listview 中切换

> ID：13089035
> 
> 赞同：1
> 
> 时间：2012-10-26T14:39:08.747
> 
> 标签：android, android-listview, onitemclicklistener, android-checkbox

我正在尝试使用两个 TextViews 和一个 CheckBox 创建一个自定义 ListView。

```
//define your custom adapter

public class Customadaptor extends ArrayAdapter<HashMap<String, Object>>
{
    public  ArrayList<HashMap<String, Object>> players;
   // boolean array for storing
   //the state of each CheckBox 
   boolean[] checkBoxState;
   static int i =0; 

   ViewHolder viewHolder;

   public Customadaptor(Context context, int textViewResourceId,ArrayList<HashMap<String, Object>> player) {

    //let android do the initializing :)
    super(context, textViewResourceId, player); 
    players = player;
  //create the boolean array with 
   //initial state as false
  checkBoxState=new boolean[player.size()];
  }

   String[] arr = {" "};
    //class for caching the views in a row  
 public class ViewHolder
 {
   TextView name,name2;
   CheckBox checkBox;
 } 

 @Override
 public View getView(final int position, View convertView, ViewGroup parent) {

   if(convertView==null)
    {
       LayoutInflater inflater =LayoutInflater.from(getContext());
   convertView=inflater.inflate(R.layout.customlistview, null);
   viewHolder=new ViewHolder();

   viewHolder.name=(TextView) convertView.findViewById(R.id.name);
   viewHolder.team=(TextView) convertView.findViewById(R.id.name2);
   viewHolder.checkBox=(CheckBox) convertView.findViewById(R.id.checkBox);

    //link the cached views to the convertview
   convertView.setTag( viewHolder);

    }
   else
       viewHolder=(ViewHolder) convertView.getTag();

    //cache the views
    viewHolder.name=(TextView) convertView.findViewById(R.id.name);
    viewHolder.team=(TextView) convertView.findViewById(R.id.name2);
    viewHolder.checkBox=(CheckBox) convertView.findViewById(R.id.checkBox);

     //link the cached views to the convertview
    convertView.setTag( viewHolder);          
  viewHolder.name.setText(players.get(position).get("name").toString());
  viewHolder.team.setText(players.get(position).get("team").toString());

   //VITAL PART!!! Set the state of the 
   //CheckBox using the boolean array
        viewHolder.checkBox.setChecked(checkBoxState[position]);   
        viewHolder.checkBox.setOnClickListener(new View.OnClickListener() {

               public void onClick(View v) {
                if(((CheckBox)v).isChecked())
                 checkBoxState[position]=true;
                else
                 checkBoxState[position]=false;

                }
               });

   //return the view to be displayed
   return convertView;
  } 
 } 
```

我试图用来`setOnItemClickListener()`切换复选框。代码工作正常。唯一的区别是复选框没有被切换。

```
 list.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View item,
                    int position, long id) {    
                Log.v("Position",""+position);

                CheckBox checkBox = (CheckBox)item.findViewById(R.id.checkBox); 
                checkBox.toggle();
                Log.v("Position",""+position);
            }

        }); 
```

这是行不通的。请告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:53:06.270

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

为您的 list_item 布局中的复选框组件添加上述代码。

希望它有帮助！，为我工作。

[你可以在这里](http://www.thepcwizard.in/2012/09/android-creating-custom-listview-for.html)阅读更多。

# ios - iOS沙盒的具体限制

> ID：13089038
> 
> 赞同：0
> 
> 时间：2012-10-26T14:39:14.613
> 
> 标签：ios, macos, permissions, media, sandbox

我想读取 iPhone 音乐目录中的文件：

```
~/Media/iTunes_Control/Music/F**/*.{M4A,MP3} 
```

1）我似乎无法从文档中弄清楚 iOS 应用程序是否被沙盒化，这样我会或不会拥有此权限。

2）是否需要请求对iOS App沙箱外目录的读取或写入权限？只写权限？一个人如何做到这一点，或者只是由审查应用商店发布的应用程序的团队自行决定？

3）我在苹果文档中找到了很多关于 OS X 应用程序沙盒的信息，但不是 iOS 应用程序的信息。iOS 是否有与 OS X 应用程序类似的沙盒/权利流程？我应该阅读任何有用的链接吗？

更新：正如下面接受的答案所说，1,2 和 3 是不可能的，但是可以在媒体库中获取文件的副本，这在某种意义上相当于对原始文件具有读取权限 - 因为当然数字信息是相同的。此问题包含执行此操作的代码： [Application crashed while importing songs from Ipod library in Iphone for iOs 5.0](https://stackoverflow.com/questions/8077725/application-crashed-while-importing-songs-from-ipod-library-in-iphone-for-ios-5)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:57:27.057

1.  您将无权在您的应用程序之外进行读/写。
2.  您将无权在您的应用程序之外进行读/写。
3.  您将无权在您的应用程序之外进行读/写。

您可以使用[媒体播放器框架](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MediaPlayer_Framework/_index.html)来访问有关用户库的信息，但不能使用文件系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:59:00.843

iOS 上的沙盒已为您完成，无需进行设置。

您不能在应用程序沙箱之外写入文件。

我没有尝试访问 iPod 应用程序存储的音乐，但可以访问媒体类型。它的功能很像访问照片。

这是[Apple 文档](http://developer.apple.com/library/IOs/#documentation/MediaPlayer/Reference/MPMediaPickerController_ClassReference/Reference/Reference.html)的链接`MPMediaPickerController`。

# ios-provisioning - 我需要两个配置文件吗？

> ID：13089039
> 
> 赞同：0
> 
> 时间：2012-10-26T14:39:16.300
> 
> 标签：ios-provisioning

我有一个用于分发 com.mycomapnyname.myappname 的配置文件

现在我想在我的 iPad 上测试我的应用程序，我完成了所有步骤 - 获取证书 - 添加我的设备 - 创建一个 AppId - 最后创建一个名为 My Applications 的开发配置文件（设置所有应用程序），所以我有一个分发配置文件和开发配置文件。

*   分发的包标识符是 com.mycomapnyname.myappname
*   开发者的包标识符是 com.mycomapnyname.*

*   在 Library Provisioning Profiles 中，我两者都有。

*   在 Ipad 配置文件中，我只有我的应用程序配置文件

当我尝试在 iPad 上运行它时，我在 Targets - Build Settings 中设置：

*   代码签名/调试/任何 iOS SDK = 与我的应用程序匹配的 iPhone 开发人员
*   代码签名/分发/任何 iOS SDK = iPhone 分发标识

在目标/信息中：

捆绑标识符：com.mycomapnyname.myappname

最后，当我想运行我的项目（设置为在我的 iPad 上运行它）时，我遇到了错误：

“找不到此可执行文件的有效配置文件。”

这对我来说是一团糟，任何人都可以帮助我能够在我的设备上运行吗？

我在我的设备上运行其他应用程序，但是按照教程并创建了一个新应用程序，但我无法在我的设备上运行我自己的应用程序进行测试。

提前致谢 ;-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:54:24.057

不，除非您喜欢为每个令人困惑的应用程序设置通配符，否则您不会这样做。试试这个可能会有所帮助。在 xcode 中转到管理器，然后选择配置文件部分。尝试刷新它。它将连接到开发门户并下载您当前的配置文件。然后在连接设备的情况下尝试单击设备名称并确保 xcode 检测到您的设备。如果它说用于开发单击它，它还将刷新您设备上的配置文件。那应该重新同步所有内容。如果这不起作用，请告诉我，我会在我的 Mac 上运行，看看如何为您提供更多帮助。阿德里安

# internet-explorer - Codeigniter + Uploadify 用户在 IE 上上传后自动注销

> ID：13089042
> 
> 赞同：3
> 
> 时间：2012-10-26T14:39:33.207
> 
> 标签：internet-explorer, codeigniter, uploadify

我一直在用 Codeigniter 和 Uploadify 制作照片库，它在 chrome 和 firefox 上运行良好。但是在 IE 上，当我上传图片时，文件会上传到服务器并创建缩略图，但没有数据记录到数据库中。在 IE 上完成上传后，当我重新加载页面时，我总是自动注销并且必须重新登录。我正在使用 ag_auth 库。

控制器中的上传方法：

```
 public function do_upload() {

    $this->load->library('upload');

    $gallery_title = $this->input->post('galleryTitle');
    $gallery_id = $this->input->post('galleryID');

    $folder_title = str_replace(' ', '_', $gallery_title);

    $image_upload_folder = FCPATH . '/uploads/image-gallery/' . $folder_title;

    if (!file_exists($image_upload_folder)) {
        mkdir($image_upload_folder, DIR_WRITE_MODE, true);
    }

    $this->upload_config = array('upload_path' => $image_upload_folder, 'allowed_types' => 'png|jpg|jpeg|bmp|tiff', 'max_size' => 2048, 'remove_space' => TRUE, 'encrypt_name' => FALSE,);

    $this->upload->initialize($this->upload_config);

    if (!$this->upload->do_upload()) {
        $upload_error = $this->upload->display_errors();
        echo json_encode($upload_error);
    } else {
        $thumb_upload_folder = $image_upload_folder . '/thumb';

        if (!file_exists($thumb_upload_folder)) {
            mkdir($thumb_upload_folder, DIR_WRITE_MODE, true);
        }

        $img = $this->upload->data();
        // create thumbnail
        $new_image = $thumb_upload_folder . '/thumb_' . $img['file_name'];

        $c_img_lib = array('image_library' => 'gd2', 'source_image' => $img['full_path'], 'maintain_ratio' => TRUE, 'width' => 120, 'height' => 120, 'new_image' => $new_image);

        $this->load->library('image_lib', $c_img_lib);
        $this->image_lib->resize();

        $file_info = $this->upload->data();
        echo json_encode($file_info);

        $root_path = str_replace("\\", "/", FCPATH);
        $path = str_replace($root_path, "", $file_info['file_path']);
        $url = $path . $file_info['file_name'];
        $thumb_url = $path . 'thumb/thumb_' . $file_info['file_name'];

        $this->load->database();

        $query = array('url' => $url, 'thumb_url' => $thumb_url, 'gallery_id' => $gallery_id);
        $this->db->insert('images', $query);

        $inserted_id = $this->db->insert_id();
        $query2 = array('order' => $inserted_id);

        $this->db->where('id', $inserted_id);
        $this->db->update('images', $query2);
    }
} 
```

视图文件中的 javascript：

```
 <script type="text/javascript">
        $(document).ready(function () {

            var base_url = '<?php echo base_url(); ?>';

            $('#upload-file').click(function (e) {
                e.preventDefault();
                $('#userfile').uploadify('upload', '*');
            });
            $('#userfile').uploadify({

                'debug':true,
                'auto':true,
                'swf': base_url + 'assets/js/jquery/uploadify_31/uploadify.swf',
                'uploader': base_url + 'glenn-admin/image_gallery/do_upload',
                'cancelImg': base_url + 'assets/javascript/jquery/uploadify_31/uploadify-cancel.png',
                'fileTypeExts':'*.jpg;*.bmp;*.png;*.tif',
                'fileTypeDesc':'Image Files (.jpg,.bmp,.png,.tif)',
                'fileSizeLimit':'2MB',
                'fileObjName':'userfile',
                'buttonText':'Upload Photos',
                'multi':true,
                'removeCompleted':true,
                'method': 'post',
                'formData': {'galleryTitle': '<?php echo $gallery_title ?>', 'galleryID': '<?php echo $gallery_id ?>'},
                'onUploadError' : function(file, errorCode, errorMsg, errorString) {
                    alert('The file ' + file.name + ' could not be uploaded: ' + errorString);
                },
                'queueID'  : 'image-queue',
                'onUploadProgress' : function(file, bytesUploaded, bytesTotal, totalBytesUploaded, totalBytesTotal) {
                    $('#progressbar').progressbar({
                        value: (totalBytesUploaded/totalBytesTotal)*100
                    });},
            });
</script> 
```

这真的让我很难受。如果有人对此有解决方案，我将不胜感激。PS：

哦，我刚刚意识到问题出在我正在使用的身份验证库中，即 AG_auth。它需要控制器扩展 Application 而不是 CI_Controller，当我删除它并将控制器扩展回 CI_Controller 时，它可以在 IE 上运行。但这真的不安全。所以问题是为什么当我使用扩展应用程序但在 chrome 和 firefox 上工作时它不能与 IE 一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:40:39.317

尝试不比较用户代理 con config.php 并且不在 cookie 名称上使用下划线。

# objective-c - 销毁和重建单例 iOS

> ID：13089045
> 
> 赞同：0
> 
> 时间：2012-10-26T14:39:41.347
> 
> 标签：objective-c, ios, singleton, nsstream

我目前正在为 iOS 开发一个应用程序，它需要使用套接字连接与硬件设备进行通信。因此我使用带有 NSStream 的单例对象。至此，一切都按预期工作。

问题是如果连接终止或中断，则无法重新打开它（文档中对此进行了说明）。所以我的想法是销毁单例并重新创建它。这不应该干扰单例模式，因为它声明这样一个类只存在一个副本。

有谁知道如何解决这个问题？任何其他不涉及重新创建单例的解决方案都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:46:01.787

单例不会被销毁，可能您应该包含一个方法来重新打开单例类并关闭/重置旧连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:04:16.043

为什么不在单例类中添加一些逻辑来测试与设备的连接是否处于活动状态。如果它已经死了，请关闭连接，然后打开一个新连接。这实际上与您通过破坏重新创建单例来尝试做的事情相同，但不会过多地滥用单例模式。它也应该更简单，因为只有单例知道连接，因此保持低耦合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-14T15:16:21.050

Singleton 的核心是让你创建一个变量，并且只创建一次，这意味着它会一直存在于你的应用程序中，直到它被终止。我们将其初始化为延迟加载，即在使用时，然后对其进行初始化。它将作为静态分配在 RAM 中，因此我们可以随时调用它来重用它，这确实节省了时间。所以不能破坏 Singleton，只是在里面做一些逻辑。

希望这有帮助。

# java - 用于可重复读取的良好 HttpServletRequest 包装器

> ID：13089046
> 
> 赞同：1
> 
> 时间：2012-10-26T14:39:43.803
> 
> 标签：java, http, servlets, request

是否有任何`HttpServletRequestWrapper`允许可重复读取（多体读取等）的良好实现？我可以自己开发它，但我想使用一些经过测试的解决方案。

# c# - 中继器中的会员资料

> ID：13089054
> 
> 赞同：0
> 
> 时间：2012-10-26T14:40:03.827
> 
> 标签：c#, asp.net, membership, backend, profiles

前端

```
<asp:Repeater ID="rpt_comments" runat="server" DataSourceID="sqldata_rpt_comments" OnLoad="rpt_comments_Load">
  <ItemTemplate>
    <div class="comments">
      <div class="news-comment-left">
          <asp:Image ID="imgCommentAvatar" Width="50px" Height="50px" runat="server" />
      </div>
      <div class="news-comment-right">
          <asp:Label ID="lblCommentProfile" runat="server"></asp:Label>
          <asp:Label ID="lblCommentAuthor" runat="server" Text='<%#Eval ("CommentsAuthor") %>' Visible="false"></asp:Label>
          <div style="float: right;"><%#Eval ("CommentsDate", "{0:dd.MM.yyyy}") %></div>
          <br />
          <%#Eval ("Comment") %><br />
      </div>
      <br />
      <br />
      <br />
      <br />
    </div>
  </ItemTemplate>
</asp:Repeater> 
```

后端

```
public void commentsprofiles()
{
    Label CommentAuthor = (Label)Tools.FindControlRecursive(rpt_comments, "lblCommentAuthor");
    Label CommentProfile = (Label)Tools.FindControlRecursive(rpt_comments, "lblCommentProfile");
    Image imgCommentAvatar = (Image)Tools.FindControlRecursive(rpt_comments, "imgCommentAvatar");

    ProfileCommon userProfile = Profile.GetProfile(CommentAuthor.Text);

    imgCommentAvatar.ImageUrl = userProfile.Avatar;
    CommentProfile.Text = userProfile.NickName;
}
protected void rpt_comments_Load(object sender, EventArgs e)
{
    commentsprofiles();
} 
```

如您所见，我正在尝试通过使用检索转发器`FindControlRecursive`中的控件，当我提取控件并想告诉它们中的内容时，我在 asp.net Membership 中获得了配置文件，它也有效，但仅适用于 1在我的转发器中重复项目，所以我需要帮助如何编码，以便它不断重复每个`CommentAuthor`存在的配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:45:17.013

使用 Repeater.ItemDataBound 事件

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx)

# c - 代码中的两个问题（使用控制台字符串打开文件和删除 []）

> ID：13089061
> 
> 赞同：0
> 
> 时间：2012-10-26T14:40:35.760
> 
> 标签：c, string, file, console

我有一些问题。如果我手动输入文件路径，函数 fopen_s 总是失败，但如果我通过代码设置相同的路径，文件打开没有问题。我的第二个问题是“delete[] bytes”和“delete[] locatie”无法编译，我明白了

> 错误 C2065：“删除”未声明的标识符

和

> C2059: 语法错误 ']'

我不知道为什么。ASM 部分是一个优化的循环顺便说一句。

```
char* getline()
{
    char line[50];  
    char *eof;
    line[0] = '\0'; 
    line[sizeof(line)-1] = ~'\0';  
    eof = fgets(line, sizeof(line), stdin);
}

int _tmain(int argc, _TCHAR* argv[])
{
    char* locatie, *bytes, c;
    FILE* bestand;
    int i, size;
    struct stat st;

    printf_s("Voer het pad van het bestand in en druk op enter.\n");
    locatie = getline();
    locatie[strlen(locatie)-1] ='\0';
    locatie = "C:\\Users\\xxx\\Documents\\haha.txt"; // <-- this line

    if ((i = fopen_s(&bestand, locatie, "r" )) != 0)
    {
        printf_s("Het bestand bestaat niet, of kon niet worden geopend!");
        getchar();
        return -1;
    }

    stat(locatie, &st);
    size = st.st_size;
    bytes = (char*)malloc(i+1);
    i = 0;

    loop:
    c = fgetc(bestand);
    __asm
    {
        movsx eax, byte ptr [c]
        cmp eax, 0x0FFFFFFFF
        je Break
        mov eax, dword ptr [bytes]
        add eax, dword ptr [i]
        mov cl, byte ptr [c]
        xor cl, 32
        mov byte ptr [eax], cl  
        mov eax, dword ptr [i]  
        add eax, 1
        mov dword ptr [i], eax
        jmp loop
    }

    Break:
    fclose(bestand);
    bytes[i] = '\0';
    printf(bytes);

    locatie = "C:\\Users\\xxx\\Documents\\haha.cpt";
    fopen_s(&bestand, locatie, "w");
    fprintf_s(bestand, "%c", bytes);
    fclose(bestand);
    delete[] bytes;
    delete[] locatie;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:45:25.267

`delete[]`是 C++，`free()`在 C中使用。

该程序具有未定义的行为，因为该函数`getline()`没有`return`任何作用。不要试图通过返回`line`（或者`eof`是`NULL`或者指向`line`）来解决这个问题，但是你需要`malloc()`一个新的缓冲区并返回它或者传递一个缓冲区来`getline()`填充。

这是个错误：

```
fprintf_s(bestand, "%c", bytes); 
```

格式说明符`"%c"`需要一个类型的参数，`char`但`bytes`它是一个`char*`. 改用`"%s"`：

```
fprintf_s(bestand, "%s", bytes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:47:39.850

但是`getline()`什么都不退！如果是这样，看起来好像您正在返回一个指向本地缓冲区的指针 -`line`一旦函数返回，它就会超出范围。

# c++ - 可以使用 C++11 decltype 为现有函数的函数指针创建 typedef 吗？

> ID：13089067
> 
> 赞同：34
> 
> 时间：2012-10-26T14:40:45.303
> 
> 标签：c++, c++11, decltype

给定

```
struct A { 
    int foo(double a, std::string& b) const;
}; 
```

我可以像这样创建一个成员函数指针：

```
typedef int (A::*PFN_FOO)(double, std::string&) const; 
```

很简单，除了如果's 的签名发生变化`PFN_FOO`需要更新。`A::foo`既然C++11引入了`decltype`，能不能用来自动推导出签名，创建typedef呢？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-26T14:50:42.620

是的当然：

`typedef decltype(&A::foo) PFN_FOO;`

您还可以通过[`using`](http://en.cppreference.com/w/cpp/language/type_alias)关键字定义类型别名（感谢 Matthieu M.）：

`using PFN_FOO = decltype(&A::foo);`

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-26T17:29:48.110

一个问题：如果这个变量是明确的，你只能推断出一个变量的类型。

函数的主要问题是*重载*意味着仅靠它们的名称不足以识别它们。因此，`decltype`如果您引入`foo`in的重载，使用失败`A`。

```
struct A {
    void foo() const;
    void foo(int) const;
};

using PFN_FOO = decltype(A::foo); 
```

> ```
> source.cpp:6:36: error: decltype cannot resolve address of overloaded function 
> ```

不确定你会因此获得很多...

另一方面，您实际上可以使用别名*并检查别名是否正确*：

```
struct A {
    void foo() const;
    void foo(int) const;
};

using PFN_FOO = void (A::*)(int) const;

static_assert(std::is_same<PFN_FOO, decltype(static_cast<PFN_FOO>(&A::foo))>::value,
     "Ooops, need to update signature of PFN_FOO!"); 
```

*注意：不确定这是最好的测试方法，基本上你只需要`static_cast`零件，我只是想在旁边隐藏一条错误消息。不过，您可能需要像 SFINAE 这样的东西来获得更好的消息。*

# mongodb - mongodb 是否适合 SaaS 平台来管理和分配带有预订的旅行库存？

> ID：13089068
> 
> 赞同：2
> 
> 时间：2012-10-26T14:40:47.837
> 
> 标签：mongodb, nosql

我们正在构建一个 saas 平台，用于管理/分发旅行库存（酒店、租赁、教练、餐厅、航空公司、铁路、活动和活动）并通过多种渠道进行分发。

在这个用例中，将有 4 种用户（旅行社、供应商、旅游经营者和客户），每一种都可以从不同的 Web 界面访问系统，这些界面根据他们管理库存和预订的要求而调整。

在测试了一个原型后，我们发现即使我们对数据模型进行非规范化，也很难确保使用 mongo 的多个用户的原子性。我们想知道是否有人遇到过同样的挑战以及他们是如何解决这些挑战的，因为截至 12 月 15 日，启动应用程序需要一个超快的持久层才能具有成本效益并处理超过 5000 个用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:26:25.257

您可以考虑在架构中进行一些更改以启用事务行为。（优先队列）并使用 TTL-Collections 摆脱未完成预订的后台工作人员。

那里有一些 Schema Design Slides 解释了如何在 MongoDB 中做到这一点。这是一个示例：[MongoDB 状态机](http://www.alvinonmongodb.com/2012/07/schema-design-2-workflows-state.html)

# java - Android 中的唯一（基于设备的）盐

> ID：13089070
> 
> 赞同：2
> 
> 时间：2012-10-26T14:41:05.127
> 
> 标签：java, android, security

我正在实施 Google 的许可系统，对于混淆器，我需要生成一个唯一的 ID。文件说

```
/**
 * @param salt an array of random bytes to use for each (un)obfuscation
 * @param applicationId application identifier, e.g. the package name
 * @param deviceId device identifier. Use as many sources as possible to
 *    create this unique identifier.
 */
public AESObfuscator(byte[] salt, String applicationId, String deviceId) { 
```

除了通过以下方式获得的包名和设备 ID 之外

```
private String android_id = Secure.getString(getContext().getContentResolver(),
                                                    Secure.ANDROID_ID); 
```

我还可以使用哪些其他来源？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:45:17.357

`Secure.ANDROID_ID`有时已知为空，并且我相信可以在有根手机上进行更改，因此您应该考虑检查其他一些选项，例如`TelephonyManager.getDeviceId()`

我在[这个问题](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id)上找到的一个很好的片段执行以下操作来生成唯一 ID：

```
final TelephonyManager tm = (TelephonyManager) getBaseContext().getSystemService(Context.TELEPHONY_SERVICE);
final String tmDevice, tmSerial, androidId;

tmDevice = "" + tm.getDeviceId();
tmSerial = "" + tm.getSimSerialNumber();
androidId = "" + android.provider.Settings.Secure.getString(getContentResolver(), android.provider.Settings.Secure.ANDROID_ID);

UUID deviceUuid = new UUID(androidId.hashCode(), ((long)tmDevice.hashCode() << 32) | tmSerial.hashCode());
String deviceId = deviceUuid.toString(); 
```

# javascript - 在画布上显示来自用户的文本

> ID：13089071
> 
> 赞同：0
> 
> 时间：2012-10-26T14:41:04.940
> 
> 标签：javascript, html, text, canvas

现在我有 3 个元素。文本字段和提交按钮位于顶部，下方是画布。单击提交按钮后，我想在画布上显示来自用户的输入。

我很高兴看到任何 javascript 建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:29:19.613

只是因为我非常喜欢使用画布..这应该让你开始。为了将来参考，请确保在提出问题时发布您尝试过的内容，通常人们不喜欢为模糊的问题提供完整的解决方案。

```
var btn = document.getElementsByTagName("input")[0],
    textArea = document.getElementsByTagName("textarea")[0],
    canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d");
    canvas.width = 512;

    ctx.font = "12px Arial";
    ctx.fillStyle = "#000";

    btn.addEventListener("click", function(){
        ctx.fillText(textArea.value,10,10);
    });
​ 
```

**[现场演示](http://jsfiddle.net/B3ntY/1/)**

# javascript - 我不想让资产在 dev 中将我的 javascript 连接起来

> ID：13089074
> 
> 赞同：0
> 
> 时间：2012-10-26T14:41:12.687
> 
> 标签：javascript, symfony, assetic

我正在将 Assetic 与 symfony2 应用程序一起使用，该应用程序大部分工作正常。不过，困扰我的一件事是，在开发环境（app_dev.php）中，我的 javascript 文件是资产单行的。这是调试的痛苦。（猜猜看：错误出现在第 1 行...... duhh）

有没有办法告诉 Assetic 不要将开发环境中的 js 文件放在一起？

目前我有：（config.yml）

```
# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    bundles:        [ ]
   # java: /usr/bin/java
    filters:
        cssrewrite: ~
        # closure:
        #     jar: %kernel.root_dir%/java/compiler.jar
        yui_css:
            jar: "%kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar"
        yui_js:
            jar: "%kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar" 
```

在 config_dev.yml 中：

```
assetic:
    use_controller: true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:52:32.363

您应该在调试模式下禁用缩小。有关更多信息，请参阅此文档：

[http://symfony.com/doc/master/cookbook/assetic/yuicompressor.html#disable-minification-in-debug-mode](http://symfony.com/doc/master/cookbook/assetic/yuicompressor.html#disable-minification-in-debug-mode)

# sharepoint - 如何在自定义快速启动标题中显示外部列表

> ID：13089082
> 
> 赞同：0
> 
> 时间：2012-10-26T14:41:49.147
> 
> 标签：sharepoint, sharepoint-designer

谁能解释我如何做到这一点：

我想在 SP Designer 2010 中创建外部内容类型并基于此外部内容类型列出。默认情况下，此列表将出现在快速启动的“列表”标题中，但我想创建我的自定义标题，例如“我的外部类型”并在该标题中显示一些外部列表，而不是“列表”标题。

那可能吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:24:34.250

是的，只需编辑快速启动：站点操作 -> 站点设置 -> 快速启动（外观）。 [http://www.hosting.com/support/sharepoint-2010/add-edit-or-delete-a-quick-launch-heading](http://www.hosting.com/support/sharepoint-2010/add-edit-or-delete-a-quick-launch-heading)

# objective-c - 字符串的分离

> ID：13089085
> 
> 赞同：0
> 
> 时间：2012-10-26T14:41:56.567
> 
> 标签：objective-c, ios, string, nsstring

我有一个由 4 个单词组成的字符串，如何将它分成 2 个字符串，每个字符串由两个单词组成？编码：

```
 NSString * myString= @"AAAA bbbbb CCCC ddddd"; 
```

我想将此字符串分成2个字符串：

```
NSString *firstString =@"AAAA bbbbb";
NSString *secondString =@"CCCC ddddd"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:45:16.110

您可以使用 NSArray`componentsSeperatedByString`将字符串分成几部分。从那里您可以使用一些简单的字符串格式将新字符串从数组的内容中拼凑在一起。

```
NSString *inputString= @"AAAA bbbbb CCCC ddddd";
NSArray *array = [inptString componentsSeparatedByString:@" "];

NSString *outputStringOne = [NSString stringWithFormat:@"%@ %@", [array objectAtIndex:0], [array objectAtIndex:1]];
NSString *outputStringTwo = [NSString stringWithFormat:@"%@ %@", [array objectAtIndex:2], [array objectAtIndex:3]]; 
```

# java - Finagle 未来的对象，它们是可重用的吗？

> ID：13089088
> 
> 赞同：4
> 
> 时间：2012-10-26T14:42:06.207
> 
> 标签：java, twitter, future, finagle

我是 Finagle 的新手。我现在正在阅读某人的代码，发现 Future 对象在不同的​​连接操作中被重用。我的问题是这会导致 Future 对象被执行多次（在每个连接中），还是只会执行一次并存储结果以供以后连接？

例子：

```
Future<A> a= b
            .join(c)
            .flatMap(new SomeFunctionReturningA());

Future<Tuple2<A, B>> future1 = a.join(b);
Future<D> future2 = future1.flatMap(new SomeFunctionReturningD()); 
future2.get(); 
```

那么 b 会被执行两次，还是只执行一次？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T23:03:14.667

Future 只是一个值的容器，该值只会被设置一次！有不同的`Future[T]`状态：

*   空的
*   设置为 T 类型的值
*   设置异常

当您在 Future 上使用`map/flatMap`函数时，您只需创建一个新的 Future ，它将是由该函数转换的前一个 Future 的结果。`f``A``B``f`

注意：

*   如果未来`A`还没有被“填满”，你将有一个尚未被填满`B`
*   `a`设置值的线程也`A`将执行`f(a)`并设置值`B`
*   如果`A`已“填充”，则 map/flatMap 的调用者也将执行`f(a)`，但*不会*重新计算 的值`A`。
*   您也可以使用`onSuccess/onFailure`它来注册一些代码，以便在未来获得其价值时执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:05:24.467

我自己写了一个快速测试：

```
import com.twitter.util.Function;
import com.twitter.util.Future;
import java.util.Random;
import org.junit.Test;
import scala.Tuple2;

public class FinagleFutureTest {
    int counter = 0;

    @Test
    public void test(){
        Counter counter = new Counter();
        Future<Counter> one = Future.value(counter).flatMap(new IncrementFunction());
        Future<Counter> two = one.flatMap(new IncrementFunction());
        Future<Tuple2<Counter, Counter>> three = two.join(one);
        Tuple2<Counter, Counter> tuple = three.flatMap(new TupleFunction()).get();
        System.out.println("one: "+ tuple._2().count+", "+tuple._2().randomInt);
        System.out.println("two: "+ tuple._1().count+", "+tuple._1().randomInt);
    }

    static class TupleFunction extends Function<Tuple2<Counter, Counter>, Future<Tuple2<Counter, Counter>>>{

        @Override
        public Future<Tuple2<Counter, Counter>> apply(Tuple2<Counter, Counter> t1) {
            return Future.value(t1);
        }

    }

    static class IncrementFunction extends Function<Counter, Future<Counter>>{
        @Override
        public Future<Counter> apply(Counter counter) {
            counter.add();
            return Future.value(counter);
        }
    }

    static class Counter{
        public int count = 0;
        public int randomInt;
        Counter(){
            Random random = new Random();
            randomInt = random.nextInt();
        }
        public void add(){
            count++;
        }
    }
} 
```

结果如下：

```
one: 2, 2009034289
two: 2, 2009034289 
```

所以结论是 Future 对象无论参与多少连接操作都只会执行一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-21T09:56:33.813

未来对象只执行一次。

Finagle 使用 com.twitter.util.A Future 是一个尚不可用的值的句柄。

使用 Future 的两种最基本的方法是： 阻塞并等待计算返回 注册一个回调，以便在计算最终成功或失败时调用 FuturePool 对象使您能够在其自己的线程上放置一个阻塞操作。

你可以从[twitter 博客](https://blog.twitter.com/2011/finagle-protocol-agnostic-rpc-system)和[fingale github获得对 Finagle Future（Future Pool）的更多了解](https://github.com/twitter/finagle#Using%20Future%20Objects)

# objective-c - 将图像从 JSON 加载到 Xcode

> ID：13089092
> 
> 赞同：0
> 
> 时间：2012-10-26T14:42:14.227
> 
> 标签：objective-c, sql, xcode, json

我在将 json 文件中的图像加载到 UIImage - Xcode 中的表格单元格中时遇到了一些困难。我试图将图像从服务器加载到 NSArray 中，然后填充表格视图 UIImage 单元格。我在这里缺少什么吗？

图像位于 SQL 服务器上。

谢谢您的帮助。

这是从 PHP 到 Xcode 的服务器输出。（封面图片）

```
(
    "13497074790148.jpeg",
    "13494650900147.png",
    "13494606630147.png",
    "13494605220147.jpeg",
    "13494602920147.jpeg",
    "13494601850147.jpeg",
    "13491916300147.jpeg"
) 
```

这是Xcode中的代码

```
NSArray *itemsimages = [[NSArray alloc]initWithArray:[results valueForKeyPath:@"cover_image"]];
self.itemImages = itemsimages; 
```

这是表格单元格中的代码

```
UIImage *imageitm = [UIImage imageNamed: [self.itemImages objectAtIndex: [indexPath row]]];
cell.itmImage.image = imageitm;
return cell; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:53:51.497

您没有将这些图像存储在本地，因此它没有任何要显示的图像。我建议使用[SDWebImage](https://github.com/rs/SDWebImage "SDWebImage")从远程位置 + 缓存机制提供异步图像加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-10T09:17:40.053

```
-(void) viewDidLoad
{

NSURL *url = [NSURL URLWithString:@"YOUR URL"];

NSData *data = [NSData dataWithContentsOfURL:url];

    NSError *error;

    NSMutableDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    NSMutableArray *img = [[NSMutableArray alloc]init];
    NSArray *websiteDetails = (NSArray *) [json objectForKey:@"logos"];

    for(int count=0; count<[websiteDetails count]; count++)
    {
        NSDictionary *websiteInfo = (NSDictionary *) [websiteDetails objectAtIndex:count];
        imagefile = (NSString *) [websiteInfo objectForKey:@"image_file"];
        if([imagefile length]>0)
        {
            NSLog(@"Imagefile URL is: %@",imagefile);
            [img addObject:imagefile];
        }
    }
    //NSarray listofURL
    listofURL = img;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *simpleTableIdentifier = @"SimpleTableItem";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];

    dispatch_queue_t concurrentQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    //this will start the image loading in bg
    dispatch_async(concurrentQueue, ^{

        NSURL *url = [NSURL URLWithString:[listofURL objectAtIndex:indexPath.row]];
        NSData *image = [[NSData alloc] initWithContentsOfURL:url];

        //this will set the image when loading is finished
        dispatch_async(dispatch_get_main_queue(), ^{

            cell.imageView.image = [UIImage imageWithData:image];
        });
    });
    }
    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:12:22.453

您需要在 json 响应中有一个正确的 url，或者您可以将 url 的公共部分存储在代码本身中，稍后将其附加到从服务器返回的图像名称中。我在相同的条件下做了如下

```
 __autoreleasing NSError* error = nil;
    id result = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    NSDictionary *dict = ((NSDictionary *) result)[@"result"];

    NSString *url = dict[@"imageURL"];

    NSData *imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:url]];
    UIImage *image = [[UIImage alloc] initWithData:imageData];

    [_buttonImageView setImage:image forState:UIControlStateNormal]; 
```

其中 data 是从服务器返回的响应。

# symfony - 循环重定向登录 security.yml

> ID：13089095
> 
> 赞同：2
> 
> 时间：2012-10-26T14:42:29.623
> 
> 标签：symfony

有人可以帮我解决登录重定向中的这个问题吗？浏览器说该页面进行了太多重定向

这里我显示文件security.yml：

```
firewalls:
    frontend:
        pattern:  ^/
        anonymous: ~
        form_login:
            login_path: /login
            check_path: /login_check
            default_target_path: /index
            success_handler: authentication_handler
        logout:
            path: /logout
            target: /
            success_handler: authentication_handler
        security: true
        remember_me:
            key:      sitio123
            lifetime: 604800        # 7 * 24 * 3600 = 604.800 = 1 semana
        access_denied_handler: accessdenied_handler

access_control:
    - { path: ^/, roles: ROLE_U }
    - { path: ^/admin, roles: ROLE_A }
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/pruebita, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/prueba, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/comprobarmail, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/nuevacontrasena, roles: IS_AUTHENTICATED_ANONYMOUSLY }

providers:
    chain_provider:
        providers: [in_memory, user_db]
    in_memory:
        users:
            foo: { password: test, roles: 'ROLE_A' }
            foo1: { password: test1, roles: 'ROLE_U' }
    user_db:
        entity: { class: mio\mioBundle\Entity\Empleado, property: username }

role_hierarchy:
    ROLE_A:       ROLE_U

encoders:
    mio\mioBundle\Entity\Empleado: { algorithm: sha1 }
    Symfony\Component\Security\Core\User\User: plaintext 
```

非常感谢您的宝贵时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:02:17.573

将匿名访问控制项放在受保护项之前：

```
access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/pruebita, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/prueba, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/comprobarmail, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/nuevacontrasena, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, roles: ROLE_U }
    - { path: ^/admin, roles: ROLE_A } 
```

# java - java.lang.NoSuchMethodError: javax.jws.WebMethod.exclude()Z

> ID：13089098
> 
> 赞同：0
> 
> 时间：2012-10-26T14:42:32.880
> 
> 标签：java, web-services, configuration, wsdl, cxf

我已经从 wsdl 文件生成了存根和客户端，当我尝试使用客户端运行 java 应用程序时，会引发以下错误。

```
java.lang.NoSuchMethodError: javax.jws.WebMethod.exclude()Z 
```

是否缺少任何 jar 文件或配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:43:03.197

```
java.lang.NoSuchMethodError: javax.jws.WebMethod.exclude()Z 
```

我认为你在类路径中有错误版本的 jar 文件。

确保您拥有的代码语法与类路径中的 jar 兼容。

# matlab - matlab中的日期时间格式

> ID：13089099
> 
> 赞同：0
> 
> 时间：2012-10-26T14:42:32.943
> 
> 标签：matlab, datetime

我有一些在 excel 中提供给我的数据，时间格式相当混乱。的第一列是 DateTime，但 HH:MM 不正确，第二列是一天中正确的小时 HH:MM：

```
time = {'01/01/2000 00:00',num2str(2300);
    '01/01/2000 00:00',num2str(2400);
    '01/01/2000 00:00',num2str(10);
    '01/01/2000 00:00',num2str(100)}; 
```

但是，当时间超过午夜时，时间不是 00:10，而是 10，而 01:00 是 100。如何将这些更改为正确的格式？即从上面的例子中，我希望结果是：

```
time = {'01/01/2000 23:00';
    '01/01/2000 24:00';
    '01/01/2000 00:10';
    '01/01/2000 01:00'}; 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:52:12.700

在 MATLAB 中使用[sprintf](http://www.mathworks.com/help/matlab/ref/sprintf.html)，您可以使用字段宽度说明符：

![sprintf 参数](../Images/52e09828a8dee511ca6afa1b8e4a154d.png)

在哪里

> 字段宽度：要打印的最小字符数。可以是数字或星号 (*)，以引用输入列表中的参数。例如，输入列表 ('%12d', intmax) 等价于 ('%*d', 12, intmax)。

因此，您的时间最终应该看起来像“XX：XX”，如果缺少前导零，则 sprintf 添加前导零并添加冒号。

感谢@Junuxx 提供了确切的命令：`sprintf('%02i:%02i', hours, minutes)`

要分隔小时和分钟，您显然会使用 time % 100 来获得分钟，然后用整数除以 100 来获得小时。

从那里，您可以简单地`strcat`或连接`["a" "b"]`您的两列以获得您想要的结果。

# c# - 是否有与 java 的 AbstractList 等效的 C#？

> ID：13089107
> 
> 赞同：4
> 
> 时间：2012-10-26T14:43:23.930
> 
> 标签：c#, java, .net, list, collections

当您需要实现接口而无需从头开始编写所有代码时， Java`AbstractList`类非常方便。`List`

现在，在 C# 中，我需要在我的数据模型的一部分上实现一个视图，该视图将实现`IList`.

.Net 中是否有一个我可以继承的抽象类，就像`AbstractList`在 Java 中我会扩展它一样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T14:43:53.457

你正在寻找`System.Collections.ObjectModel.Collection<T>`.

# c++ - 迷失在线程中-如何正确扩展此示例？

> ID：13089110
> 
> 赞同：0
> 
> 时间：2012-10-26T14:43:39.083
> 
> 标签：c++, boost, boost-asio, boost-thread

我正在调整[此示例](http://pastebin.com/sTFQ8NR2)以检查消息是否接收时间过长。

`read_complete`被调用，何时`read_start`完成。但是，我必须检查接收到的数据是否完整并将其解释为不完整，如果在给定时间内没有完全接收到。

这些是我在代码/伪代码中对上面代码的扩展：

```
void read_complete(const boost::system::error_code& error, size_t bytes_transferred)
{ // the asynchronous read operation has now completed or failed and returned an error
  if (!error)
  { // read completed, so process the data
    cout.write(read_msg_, bytes_transferred); // echo to standard output
    MyOnReceivedData(MyHandle someHandle, numOfBytes);
    read_start(); // start waiting for another asynchronous read again
  }
  else do_close(error);
} 

void MyOnReceivedData(MyHandle someHandle,int numOfBytes){
  ResetPacketTimer();
  \\check if whole packet was received
  if (wholePacket){    
    MyOnReceivedPacket(someHandle);    
  }
}

void MyOnReceivedPacket(MyHandle someHandle){
  cout << "packet"
  clearBuffer(someHandle);   
}

void MyOnPacketTimeout(MyHandle someHandle){
   cout << "we're in";
   if (!bufferEmpty(someHandle)){
     cout << "timeout";
   }
}

void ResetPacketTimer(MyHandle someHandle){
    boost::asio::io_service io;
    boost::asio::deadline_timer t(io, boost::posix_time::milliseconds(10000));

    t.async_wait(boost::bind(&MyOnPacketTimeout, someHandle);
    //this works async, but MyOnPacketTimeout is not called
    boost::thread t2(boost::bind(&boost::asio::io_service::run, &io));
    //this works, but not async - app waits for 10 secs
    //io.run();
} 
```

我确实在这里提出了一个类似的问题[How can I setup a deadline_timer in this environment?](https://stackoverflow.com/questions/13071037/how-can-i-setup-a-deadline-timer-in-this-environment) ，但现在我已经让我的计时器工作了——这只是线程问题。因此，如果这是问题所在，请关闭较旧的问题，但请不要解决这个问题。

我的主要问题是，我该怎么做`ResetPacketTimer`，以便：

*   我捕捉到任何花费超过 10 秒的数据包
*   不要以为我抓住了一个，当在第一个数据包的 10 秒用完之前已经部分接收到另一个数据包时（因此尚未调用*clearBuffer ）*

# asp.net - 如何处理存储在数据库中的数据？

> ID：13089111
> 
> 赞同：0
> 
> 时间：2012-10-26T14:43:47.077
> 
> 标签：asp.net, sql, database

今天是个好日子，

我有一些问题，关于如何计算存储在数据库中的数据。就像，我有一张桌子：

```
|   ID    | Item name | quantity of items | item price | date | 
```

例如，我存储了 10000 条记录。

首先我需要做的是从日期间隔中提取项目，所以我不需要整个数据库来进行计算。然后我从该日期间隔获取项目，我必须添加一些表格，例如计算：

```
full price = quantity of items *  item price 
```

并将它们存储在每个项目的新表中。因此，从日期间隔中挑选的项目的数据库应如下所示：

```
|   ID    | Item name | quantity of items | item price | date |  full price | 
```

关键是我不知道如何存储我选择的日期间隔的项目。比如，我是否创建了一些临时表，或者什么？这将使用 ASP.NET Web 应用程序，对于数据库中的计算，我想我将使用 SQL 查询。也许有更简单的方法来做到这一点？感谢您抽出时间来帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:08:56.730

拥有 10000 条记录，使用临时表不是一个好主意。

您最好有另一个表，称为 ProductsPriceHistory，您可以在其中定期计算和存储（比方说）月度报告。

这样，您的报告会更快，并且您不必每次想要获取报告时都进行计算。

请注意，如果您的日期间隔是固定的，我的意思是每月、每季度、每年等，这种方法是可以的。如果您的日期间隔是动态的，例如。从 2011 年 10 月 20 日到 2011 年 10 月 25 日，从 2011 年 5 月 20 日到 2011 年 8 月 13 日等，这种方法不起作用。

另一种方法是在 ASP.Net 上进行计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:11:41.770

即使有 10000 条记录，最好的办法是即时计算类似的内容。这就是结构化数据库的设计目的。

例如：

```
SELECT [quantity of items] * [item price] AS [full price]
  , [MyTable].*
FROM [MyTable] 
```

涉及 JOIN 到 3 个或更多表和数千条记录的更复杂的计算可能有助于存储值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:08:12.227

就像其他人所说的那样，您可以即时执行这些查询，而不是存储它们。

但是，要回答您的问题，这样的查询应该可以解决问题。

我没有对此进行测试，因此语法可能会有所偏差，尽管它会让您走上正确的轨道。

最终，您必须使用选择进行插入

```
insert into itemFullPrice
select id, itemname, itemqty, itemprice, [date], itemqty*itemprice as fullprice from items where [date] between '2012/10/01' AND '2012/11/01' 
```

再一次..如果我的语法有点不对，请不要开枪..今天很忙：D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T14:56:06.363

有几种方法：

*   使用 sql 查询即时计算 - 这样不会将任何内容存储到数据库中
*   使用相同或另一个表进行计算
*   使用计算字段

如果您的数据库负载较低（每分钟查询很少，每次提取几千行），请使用第一种方法。如果动态计算表现不佳（数百万条记录，每秒获取 x 次......）尝试第二或第三个方法。如果您的数据库支持计算和持久字段，例如 MSSQL Server，第三个就可以了。

**编辑：**

通常，正如其他人所说，您将在查询中执行计算。也就是说，只要你的项目足够简单。

首先，当您存储所有项目及其价格的表受到来自多个客户端的插入/更新/删除的攻击时，您不想阻止或被其他人阻止。您必须了解，例如表 X 更新可能会阻止您从表 X 中选择，直到它完成（查找页/行锁定）。这意味着你会*喜欢*并行的非规范化结构（带有产品的表格和计算出来的东西）。这就是例如报告发挥作用的地方。

其次，当计算足够简单（a*b）并且只处理了不多的记录时，就可以了。当您有例如 10M 条记录并且您必须将每一行与其他几行相关联并对某些组进行一些聚合时，计算/持久字段有可能会节省您的时间 - 您可以获得高达 10-100 倍的更快结果使用这种方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T19:53:13.677

您应该在应用程序中分离关注点：

*   用于演示的 aspx 页面
*   用于数据持久性的 sql server
*   某种中间“业务”层用于额外的逻辑，如 fullprice = p * q

例如，如果您使用 Linq-2-sql 进行数据检索，那么将全价添加到您的实体非常简单。实体框架也是如此。此外，如果您愿意，您已经可以在 SQL 选择中进行 p*q 的计算。只有当性能真的成为问题时，您才能开始考虑临时表、具有聚集索引的视图等。

# sql - 无法使用 vbscript 连接到不同域上的 sql server

> ID：13089112
> 
> 赞同：1
> 
> 时间：2012-10-26T14:43:49.933
> 
> 标签：sql, sql-server, vbscript, connection-string, adodb

我正在使用 vbscript 尝试连接到另一个域上的 sql 服务器。该服务器是群集的一部分，并且是 SQL Server 数据中心版（64 位）。我可以从我的机器 ping 服务器。我正在使用 IP 地址进行连接，这在 SSMS 上运行良好。我正在使用的 vbscript 代码是：

```
Set cn = CreateObject("ADODB.Connection")
cn.Open "DRIVER={SQL Server};Server=123.456.345.567\instance;Database=MyDB;User
ID=domain\myuserid;Password=mypass;"
strCommandText = "Select * from mytable"
cn.Execute strCommandText 
```

当我运行它时，我收到以下错误：Microsoft OLE DB Provider for ODBC Drivers: [Microsoft][ODBC SQL Server Driver][SQL Server]Login failed for user 'domain\myuserid'。

我无法将我的测试机器加入域，也无法使用 sql 身份验证，因为它在 sql server 上被禁用。

我需要做什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T16:41:43.737

查看您的查询字符串，我看到您正在指定用户名和密码，这意味着您正在提供 SQL 身份验证凭据。但是，在您的问题中，您声明 SQL 身份验证在 SQL 服务器中被禁用。

这就是您的 SQL 服务器不让您进入的原因。当您的服务器不期望它们时，您正在提供 SQL 身份验证凭据。

如果 SQL 身份验证被禁用，那么很可能您的服务器也没有处于混合模式身份验证中，这几乎意味着 SQL 服务器正在使用 Windows 身份验证进行登录。此配置超出您的控制范围，是您的 DBA 做出了选择。

因此，如果您要连接的 SQL 服务器使用 Windows 身份验证模式，您的查询字符串应该是：

`cn.Open "DRIVER={SQL Server};Server=123.456.345.567\instance;Database=MyDB;Trusted_Connection=yes;"`

然而，棘手的部分来了……如果您从属于 [DOMAIN_A] 的测试机器运行 VBScript，它将在 [DOMAIN_A] Windows 凭据下运行。但是，您的 SQL 服务器期望来自他加入的域的 Windows 凭据。我们称它为 [Domain_B]。

除非您的 AD 管理员在 [DOMAIN_A] 和 [DOMAIN_B] 之间建立了信任关系，否则尽管现在有正确的查询字符串，您的登录尝试仍然会失败。

如果您无法将测试机器加入 [DOMAIN_B]，您如何解决这个跨域问题？简单的。使用“Runas”命令。

在加入 [DOMAIN_A] 的测试机器上，打开命令提示符并执行：

```
Runas /noprofile /netonly user:[DOMAIN_B]\myuserid %comspec% 
```

它会要求你输入密码。输入您原来在查询字符串中的“mypass”密码。“myuserid”也是您原始查询字符串中的用户名。

完成此操作后，您将拥有一个新的命令提示符窗口，但如果您注意到它的标题，它现在正在您的 [DOMAIN_B] 凭据下运行。

尽管您的测试机器仍在加入 [DOMAIN_A]，但您在此新命令提示符下执行的任何操作都将在您的 [DOMAIN_B] 凭据下执行。正是您的 SQL 服务器所期望的。

所以此时，剩下的就是在这个新的命令提示符窗口上运行 VBScript。这应该为 SQL Server 提供适当的凭据。

让我们知道这是否解决了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:03:09.147

据我所知，如果不加入域或使用 SQL 身份验证，则无法进行连接。您**可能**有幸通过虚拟加入域的 VPN 进行连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:02:46.243

尝试更改您的连接字符串，特别是驱动程序提供者：

试试这个

提供者=SQLNCLI10；服务器=myServerAddress；数据库=myDataBase；Uid=myUsername；密码=我的密码；

以下是连接字符串示例： http: [//www.connectionstrings.com/sql-server-2005#sql-server-native-client-10-0-oledb-provider](http://www.connectionstrings.com/sql-server-2005#sql-server-native-client-10-0-oledb-provider)

# api - 在 Heroku 中自动执行跨环境数据库恢复

> ID：13089115
> 
> 赞同：2
> 
> 时间：2012-10-26T14:43:59.653
> 
> 标签：api, heroku

我有两个 heroku 环境，我想将生产数据库的最新备份复制到我的开发环境中。

使用 CLI，这很容易：

```
heroku pgbackups:restore DATABASE `heroku pgbackups:url --app Production` --app Development --confirm Development 
```

但我想自动化这个。所以我把它做成了一个使用 heroku_api gem 的 rake 任务。这应该允许从 Heroku 调度程序调用它。

```
task :auto_refresh do
  @heroku = Heroku::API.new(...)
  @heroku.post_ps('Development', 'heroku pgbackups:restore DATABASE `heroku pgbackups:url --app Production` --app Development --confirm Development')
end 
```

这不起作用。它所做的只是从最新的开发备份中刷新开发。

有什么想法可以自动化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:34:57.907

使用“heroku”gem（不是“heroku-api”gem），您可以操作从一个应用程序到另一个应用程序的备份列表

当您安装 pgbackups 插件时，它会创建一个配置变量 PGBACKUPS_URL。您需要在您的开发应用程序中使用此值，如下所示：

```
# Get the latest backup
client = Heroku::Client::Pgbackups.new('https://bigmessything@pgbackups.heroku.com/client')
backup = client.get_latest_backup 
```

backup['public_url] 应该包含您要使用上面的代码恢复的 URL

# java - 如何将新值插入两个相关表？

> ID：13089118
> 
> 赞同：0
> 
> 时间：2012-10-26T14:44:25.237
> 
> 标签：java, sql, ms-access, jdbc

我有一个 java 中的 store 程序和一个在 access 中创建的数据库。我的数据库中已经有 2 个表，分别是客户表和产品表。

我想添加一个订单表，其中它的主键是一个自动编号和一个 order_line 表来完成这个应用程序。我想要这样的桌子..

```
customer(cust_id, name, ....)
orders(order_no, cust_id, date_purchased,...)
order_line(order_no, product_id, ...)
products(product_id, product_name, price,....) 
```

当客户购买产品时，我可以在订单表中插入新值。我不清楚的是如何在 order_line 表中也插入，因为我在 access 中创建的 order_no 是 autonumber 类型。

我会先做一个 select 语句来获取 order_no 值，然后将其放入 order_line 表中的 order_no 中吗？或者我只需要把它放在一个查询中。

有这方面经验的人吗？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:50:37.040

插入 orders 和 order_line 表应该在一个事务中发生。这样做时，如果您使用纯 JDBC 将记录插入到订单表中，您可以[将 order_no 注册为](http://docs.oracle.com/javase/7/docs/api/java/sql/CallableStatement.html#registerOutParameter%28int,%20int%29)您的 OUT 参数，[`CallableStatement`](http://docs.oracle.com/javase/7/docs/api/java/sql/CallableStatement.html)并在执行语句后获取值并用于设置记录的`order_no`属性`order_line`。

```
 // begin transaction
 connection.setAutoCommit(false);

 CallableStatement cs = connection.prepareCall(INSERT_STMT_INTO_ORDERS_TABLE);
 cs.registerOutParameter(1, Types.INT);
 int updateCount = cs.execute();
 // Check the update count.
 long orderNo = cs.getInt(1);

 // CallableStatement csLine for inserting into order_line table
 // for (OrderLine line: orderLines) {
 //     Set the orderNo in line.
 //     set paramters on csLine.
 //     csLine.addBatch();
 // }
 // run the batch and verify update counts
 connection.commit();

 // connection.rollback() on error. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:00:03.163

JDBC方式（如果你喜欢数据库独立），是使用`getGeneratedKeys()`语句的方法。

使用`setAutoCommit(false)`，然后使用选项执行第一个查询`Statement.RETURN_GENERATED_KEYS`（例如，对于[PreparedStatement](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#prepareStatement%28java.lang.String,%20int%29)）。

然后使用该`getGeneratedKeys()`方法检索键（注意：按列名引用，因为确切的实现和返回的列数取决于驱动程序的实现。

并使用检索到的密钥执行第二条语句。

最后，`commit()`.

# python - 在 python 3 中处理多个字符集

> ID：13089123
> 
> 赞同：2
> 
> 时间：2012-10-26T14:44:58.650
> 
> 标签：python, character-encoding, python-3.3

我在 Windows 8 中使用 python 3.3.0。

```
requrl = urllib.request.Request(url) 

response = urllib.request.urlopen(requrl)

source = response.read()

source = source.decode('utf-8') 
```

如果网站有字符集，它会正常工作，`utf-8`但如果它有`iso-8859-1`或任何其他`charset`. 意味着我可能有不同的网站网址和不同的字符集。那么，如何处理多个字符集呢？

现在让我告诉你我在尝试解决这个问题时所做的努力，例如：

```
 b1 = b'charset=iso-8859-1'
    b1 = b1.decode('iso-8859-1')

    if b1 in source:
            source = source.decode('iso-8859-1') 
```

它给了我一个错误，`TypeError: Type str doesn't support the buffer API` 所以，我假设它正在将 b1 视为字符串！这不是正确的方法！:(

请不要说手动更改源代码中的字符集或阅读 python 文档！我已经尝试将头投入到 python 3 文档中，但仍然没有运气，或者我可能没有选择正确的模块/内容来阅读！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T16:09:08.467

在 Python 3 中，a`str`实际上是一个 unicode 字符序列（相当于`u'mystring'`Python 2 中的语法）。你得到的`response.read()`是一个字节串（一个字节序列）。

你失败的原因`b1 in source`是你试图在一个*字节字符串中找到一个**unicode 字符序列*。这是没有意义的，所以它失败了。如果您取出 line ，它应该可以工作，因为您现在正在比较两个字节序列。*`b1.decode('iso-8859-1')`*

 ***现在回到你真正的根本问题。**要支持多个字符集，您需要确定字符集，以便将其解码为 Unicode 字符串。这很难做到。通常，您可以检查`Content-Type`响应的标头。（请参阅下面的规则。）但是，*如此多的网站在标头中声明了错误的编码*，我们不得不[为 html 开发其他复杂的编码嗅探规则](http://dev.w3.org/html5/spec/parsing.html#determining-the-character-encoding)。请阅读该链接，以便您意识到这是一个多么困难的问题！

我建议你：

1.  使用[requests](http://docs.python-requests.org/en/latest/)库而不是 urllib，因为它会自动正确处理大多数 unicode 转换。（它也更容易使用。）如果在这一层转换为 unicode 失败：
2.  尝试将字节直接传递给您正在使用的底层库（例如`lxml`或`html5lib`）并让它们处理确定编码。他们经常为文档类型实现正确的字符集嗅探算法。

如果这些都不起作用，您可以更积极地使用[chardet](http://pypi.python.org/pypi/chardet)之类的库来检测编码，但根据我的经验，错误地提供网页服务的人非常无能，以至于他们会生成混合编码的文档，所以你最终会得到不管你做什么都是垃圾字符！

以下是解释`content-type`标题中声明的字符集的规则。

1.  没有明确声明的字符集：
    1.  text/*（例如，text/html）是 ASCII 格式。
    2.  application/* (例如 application/json, application/xhtml+xml) 是 utf-8。
2.  声明了明确的字符集：
    1.  如果 type 是 text/html 并且 charset 是 iso-8859-1，它实际上是 win-1252 (==CP1252)
    2.  否则使用声明的字符集。

（请注意，html5 规范通过寻找 UTF8 和 UTF16 字节标记*而不是*Content-Type 标头来故意违反 w3c 规范。请阅读编码检测算法链接，看看为什么我们不能有好的东西......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T15:41:18.060

这里最大的问题是，在许多情况下，您无法确定网页的编码，即使它定义了一个字符集。我已经看到足够多的页面声明一个字符集但实际上在另一个字符集中，或者在其 Content-Type 标头中具有不同的字符集，然后在其元标记或 xml 声明中。

在这种情况下[`chardet`](http://pypi.python.org/pypi/chardet2)可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T14:52:30.533

您正在检查对象中是否`str`包含字节`bytes`：

```
>>> 'df' in b'df'
Traceback (most recent call last):
  File "<pyshell#107>", line 1, in <module>
    'df' in b'df'
TypeError: Type str doesn't support the buffer API 
```

所以，是的，它考虑`b1`了`str`, 因为您已经将对象解码`bytes`为`str`具有特定编码的对象。相反，您应该检查`b1`. 目前尚不清楚你为什么这样做`.decode`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T15:48:07.743

查看[HTML 标准，解析 HTML 文档，确定字符集](http://dev.w3.org/html5/spec/parsing.html#determining-the-character-encoding)（HTML5 足以满足我们的目的）。

有一个算法可以采用。为了*您的*目的，归结为以下几点：

1.  检查 UTF-16 或 UTF-8 的识别序列（请参阅提供的链接）
2.  使用 HTTP 提供的字符集（通过[Content-Type 标头](https://www.rfc-editor.org/rfc/rfc2616#section-14.17)）
3.  应用稍后在[Prescan a byte-stream to determine its encoding](http://dev.w3.org/html5/spec/parsing.html#prescan-a-byte-stream-to-determine-its-encoding)中描述的算法。这基本上是在文档中搜索“charset=”并提取值。*

# sql - 从 has_many 关系更新元素而不实例化完整模型和触发回调的最佳方法

> ID：13089127
> 
> 赞同：0
> 
> 时间：2012-10-26T14:45:04.940
> 
> 标签：sql, ruby-on-rails, activerecord, callback

这是我现在正在尝试做的事情：A has_many Bs。B 有某些需要触发的回调。只是，当我从 A 保存时，我想在 Bs 中更新一些东西。由于 Bs 可以是 10000，我不想将它们加载到内存中，并且仍然可以看到触发的回调。最好的策略是什么？

请不要“find_each”或任何按批次查找的变体，我知道它们，如果没有其他方法，它们将是我的最后手段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:18:55.863

当我遇到这个问题时，我使用这个解决方案

*   在类中定义“回调方法”并将它们与 id 一起使用，
*   在实例中定义真正的回调并在“类回调”中传递记录的 id

代码示例：

```
class Post < AR
  has_many :comments
  after_save do |post|
    Post.recalculate_counters(post.comment_ids)
  end
end

class Comment < AR
  belongs_to :post

  after_save :recalculate_couters

  def self.recalculate_couters(ids)
    ...  huge and slow update statement ...
  end

  def recalcuate_couters
    self.class.recalculate_couters([id])
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:19:56.150

我认为没有任何方法可以在不加载模型的情况下执行回调。但是，如果您放弃使用回调，您可以使用`update_all`它执行得非常快。

你只需使用：

```
B.update_all({:timestamp => Time.now}, { :a_id => id }) 
```

# windows - 如何将主分支文件夹添加到 github 页面？

> ID：13089142
> 
> 赞同：0
> 
> 时间：2012-10-26T14:45:39.167
> 
> 标签：windows, git, version-control, github

您好，我有一个 github 存储库，我正在其中编写一些代码并创建一个包含一些 HTML 的文件夹。

我使用 github 页面为我的 repo 创建了一个 github 页面，它从我的 README.md 加载数据

所以现在我有2个分支：

`master` `gh-pages`

我的`master`分支具有以下结构：

```
HTML/
IMAGES/
codeFiles.py
codeFile2.py
... 
```

有什么方法可以将我的`HTML/`文件夹从我的`master`分支包含到我的`gh-pages`分支中。

我正在寻找的是像我这样的结构`gh-pages`

```
Images/
Javascripts/
Styles/
HTML/
index.html
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:25:16.810

**注意**我自己不使用 gh-pages，所以我没有尝试过这个确切的场景。如果您这样做，我强烈建议您在存储库的新克隆中执行此操作，并在推送任何更改之前彻底检查两个分支。

你可以这样做：

```
git checkout gh-pages
git read-tree master:HTML
git clean -df
git checkout .
git commit 
```

分支的所有先前内容`gh-pages`将在新提交中删除，替换为`HTML`当前版本的主分支中的目录内容。这不会导致将来对该内容的更改在这些分支之间同步，但您可以使用子树合并策略来合并对来自另一个分支的共享内容的更改：

```
git merge -s subtree $other_branch 
```

但这不太可能像合并通常在 git 中那样有效，因为这些分支仍然不共享任何历史记录，只共享一些内容。

# ios - UICollectionView 水平滚动，删除最后一项，动画不起作用

> ID：13089144
> 
> 赞同：13
> 
> 时间：2012-10-26T14:45:46.110
> 
> 标签：ios, cocoa-touch, uikit, uicollectionview

我有一个 UICollectionView。它水平滚动，只有一行项目，并且表现得像一个分页 UIScrollView。我正在按照 Safari 选项卡选择器的方式制作一些东西，因此您仍然可以看到每个项目的边缘。我只有一节。

如果我删除一个不是最后一个项目的项目，一切都会按预期工作，并且一个新项目会从右侧滑入。

如果我删除最后一个项目，则集合视图的滚动位置会跳转到第 N-1 个项目（动画不流畅），然后我看到第 N 个项目（我删除的那个）淡出。

此行为与我制作的自定义布局无关，因为即使我将其切换为使用普通流布局也会发生这种情况。我正在使用以下方法删除项目：

```
[self.tabCollectionView deleteItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]]; 
```

有没有其他人经历过这个？它是 UICollectionView 中的错误，是否有解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T18:24:35.080

我设法让我的实现使用标准工作`UICollectionViewFlowLayout`。我必须手动创建动画。

首先，我使用基本动画使已删除的单元格淡出：

```
- (void)tappedCloseButtonOnCell:(ScreenCell *)cell {

    // We don't want to close our last screen.
    if ([self screenCount] == 1u) {
        return;
    }

    [UIView animateWithDuration:UINavigationControllerHideShowBarDuration
                     animations:^{
                         // Fade out the cell.
                         cell.alpha = 0.0f;
                     }
                     completion:^(BOOL finished) {

                         NSIndexPath *indexPath = [self.collectionView indexPathForCell:cell];
                         UIViewController *screen = [self viewControllerAtIndex:indexPath.item];

                         [self removeScreen:screen animated:YES];
                     }];
} 
```

接下来，我使集合视图滚动到上一个单元格。滚动到所需的单元格后，我将删除已删除的单元格。

```
- (void)removeScreen:(UIViewController *)screen animated:(BOOL)animated {

    NSParameterAssert(screen);

    NSInteger index = [[self.viewControllerDictionaries valueForKeyPath:kViewControllerKey] indexOfObject:screen];

    if (index == NSNotFound) {
        return;
    }

    [screen willMoveToParentViewController:nil];

    if (animated) {

        dispatch_time_t popTime = DISPATCH_TIME_NOW;
        NSIndexPath *indexPath = [NSIndexPath indexPathForItem:index
                                                 inSection:0];

        // Disables user interaction to make sure the user can't interact with
        // the collection view during the time between when the scroll animation
        // ends and the deleted cell is removed.
        [self.collectionView setUserInteractionEnabled:NO];

        // Scrolls to the previous item, if one exists. If we are at the first
        // item, we just let the next screen slide in from the right.
        if (index > 0) {
            popTime = dispatch_time(DISPATCH_TIME_NOW, 0.5 * NSEC_PER_SEC);
            NSIndexPath *targetIndexPath = [NSIndexPath indexPathForItem:index - 1
                                                  inSection:0];
            [self.collectionView scrollToItemAtIndexPath:targetIndexPath
                                        atScrollPosition:UICollectionViewScrollPositionCenteredHorizontally
                                                animated:YES];
        }

        // Uses dispatch_after since -scrollToItemAtIndexPath:atScrollPosition:animated:
        // doesn't have a completion block.
        dispatch_after(popTime, dispatch_get_main_queue(), ^{

            [self.collectionView performBatchUpdates:^{
                [self.viewControllerDictionaries removeObjectAtIndex:index];
                [self.collectionView deleteItemsAtIndexPaths:@[indexPath]];
                [screen removeFromParentViewController];
                [self.collectionView setUserInteractionEnabled:YES];
            } completion:NULL];
        });

    } else {
        [self.viewControllerDictionaries removeObjectAtIndex:index];
        [self.collectionView reloadData];
        [screen removeFromParentViewController];
    }

    self.addPageButton.enabled = YES;
    [self postScreenChangeNotification];
} 
```

唯一有点可疑的部分是`dispatch_after()`. 不幸`-scrollToItemAtIndexPath:atScrollPosition:animated:`的是，没有完成块，所以我不得不模拟它。为了避免时间问题，我禁用了用户交互。这可以防止用户在删除单元格之前与集合视图进行交互。

我必须注意的另一件事是，由于单元重复使用，我必须将单元的 alpha 重置回 1。

我希望这可以帮助您使用 Safari 风格的标签选择器。我知道您的实现与我的不同，我希望我的解决方案也适用于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T19:20:17.597

我知道这已经有了答案，但我以稍微不同的方式实现了这一点，不需要在设定的时间间隔后进行调度。

在您的删除方法中，您将进行检查以确定是否正在删除最后一项。如果是这样调用：

```
if(self.selection == self.assets.count-1 && self.selection != 0){
    isDeleting = YES;
    [collection scrollToItemAtIndexPath:[NSIndexPath indexPathForRow:self.selection-1 inSection:0] atScrollPosition:UICollectionViewScrollPositionLeft animated:YES];
} 
```

假设 selection 是您要删除的选定项目。这将滚动到其左侧的项目。请注意 if 语句检查这不是唯一的项目。如果是这样，呼叫将崩溃，因为没有 -1 行。

然后您可以实现以下方法，该方法在滚动动画完成时调用。我只是在 deleteObjectInCollection 方法中将 isDeleting 设置为 no，这一切似乎都有效。

```
- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView{
    if(isDeleting){
        [self deleteObjectInCollection];
    }
} 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-11T13:52:04.777

这将起作用：

```
collectionView.collectionViewLayout.invalidateLayout()

collectionView.layoutIfNeeded() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-13T11:08:48.943

这是另一种解决方案（targetIndexPath 是要删除的单元格的 indexPath）。这段代码可以简单地放在 removeCellAtIndexPath:(NSIndexPath*)targetIndexPath 方法中，你就完成了（假设我从我的代码到公共代码的改编是正确的，否则问我，我会尽力提供帮助）。

```
// (Here it's assumed that self.collectionView.collectionViewLayout has been assigned a UICollectionViewFlowLayout before; note the word "FLOW" in that class name) 
UICollectionViewFlowLayout* layout = (UICollectionViewFlowLayout*) self.collectionView.collectionViewLayout;

// Find index path of the last cell in collection view:
NSIndexPath* lastIndexPath = [self lastItemIndexPath];

// Extend content area temporarily to fill out space left by the last row after deletion, if last row is visible:
BOOL lastRowWasVisible = NO;
if ([self.collectionView icn_cellAtIndexPathIsVisible:lastIndexPath]) {

    lastRowWasVisible = YES;

    // Adapt section spacing to temporarily fill out the space potentially left after removing last cell:
    CGFloat cellWithLineSpacingHeight = 79.0f + 8.0f; // Height of my cell + one line spacing
    layout.sectionInset = UIEdgeInsetsMake(0.0f, 0.0f, cellWithLineSpacingHeight, 0.0f);
}

// Remove the cell:
[self.collectionView performBatchUpdates:^{

    [self.collectionView deleteItemsAtIndexPaths:[NSArray arrayWithObject:targetIndexPath]];

} completion:^(BOOL finished) {

    // Only scroll if we had the last row visible:
    if (lastRowWasVisible) {

        NSIndexPath* lastItemIndexPath = [self lastItemIndexPath];

        // Run a custom scroll animation for two reasons; 1\. that way we can reset the insets when animation is finished, and 2\. using the "animated:YES" option lags here for some reason:
        [UIView animateWithDuration:0.3f animations:^{
            [self.collectionView scrollToItemAtIndexPath:prevItemIndexPath atScrollPosition:UICollectionViewScrollPositionBottom animated:NO];
        } completion:^(BOOL finished) {

            // Reset the space placeholder once having scrolled away from it:
            layout.sectionInset = UIEdgeInsetsMake(0.0f, 0.0f, 0.0f, 0.0f);
        }];
    }
}]; 
```

icn_cellAtIndexPathIsVisible: 方法只是 UICollectionView 上的一个类别：

```
- (BOOL) icn_cellAtIndexPathIsVisible:(NSIndexPath*)indexPath {

    BOOL __block wasVisible = NO;
    [self.indexPathsForVisibleItems enumerateObjectsUsingBlock:^(NSIndexPath* ip, NSUInteger idx, BOOL *stop) {

        if ([ip isEqual:indexPath]) {

            wasVisible = YES;
            *stop = YES;
        }
    }];

    return wasVisible;
} 
```

**更新：** 这只适用于一个部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-20T12:56:11.780

一个便宜的解决方案是添加另一个 0px 单元作为最后一个单元，并且永远不要删除它。

```
func collectionView(collectionView: UICollectionView, didSelectItemAtIndexPath indexPath: NSIndexPath) {
    if indexPath.row < collectibles.count - 1 { // dont delete the last one. just because the animation isn't working
        collectibles.removeAtIndex(indexPath.row)
        collectionView.deleteItemsAtIndexPaths([indexPath])
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-16T09:36:00.450

我在图像集合视图中单行水平滚动时遇到了类似的问题。当我删除用于设置集合视图的代码时，问题消失了，`contentSize`它似乎可以自动处理这个问题。

不是一个特别冗长的答案，但我希望它有所帮助。

# c - 转换和添加指向不同大小类型的指针

> ID：13089145
> 
> 赞同：3
> 
> 时间：2012-10-26T14:45:48.230
> 
> 标签：c, pointers, pointer-arithmetic

假设我有以下代码片段：

```
int8_t *a = 1;
int16_t *b = (int16_t*)(a + 1);
int32_t *c = (int32_t*)b + 2; 
```

然后 a = 1, b = 2, c = 10。（这里我也不确定，因为我使用 printf() 和 %i 并且收到了关于此的警告。）

我不太确定这是如何工作的。我有一些理论，但我更喜欢阅读一些关于它的文档。

有人可以给我一个关键字来搜索或向我解释这三种情况下的确切行为吗？由于缺少要搜索的单词，我无法在 SO 或 google 上找到有关此问题的信息。

我输入时输出会改变吗

```
int16_t *a = 1;
int32_t *b = (int16_t*)(a + 1);
int64_t *c = (int32_t*)b + 2; 
```

反而？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:53:52.930

我认为您的整个程序是未定义的行为，因为我不确定将任意值放入指针变量或使用`%i`.

也就是说，我认为大多数环境都可以，所以我想我可以开始解释了。

如果`a`是`1`，它（未对齐）指向内存地址`1`。然后添加 1，使其指向`2`，并将结果转换为适合`b`。

之后，您烘烤`b`a`uint32_t *`并添加 2，因此您可以有效地添加`2*4`并因此`b`得到`10 (0xA)`.

如果您进行上述更改，您`a`指向`1`(and `2`，因为它有 16 位)，添加`1`将`b`指向`3`(and `4`)（那里不需要演员表），`c`并将指向 3+2*4 = 11。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T14:57:43.020

而不是像这样的特定问题，您可能应该尝试更多地了解语言本身（指针，取消引用等）[http://www.cplusplus.com/doc/tutorial/pointers/](http://www.cplusplus.com/doc/tutorial/pointers/)

给指针赋值就像说这个指针代表地址（值）处的内存。

```
int8_t * a = 1; // a is memory at address 1
int16_t *b = (int16_t*)(a + 1); // b is memory at address (a + 1)... 2
int32_t *c = (int32_t*)b + 2; // c is memory at address 2 + (2 * sizeof(int32_t))... 10 
```

# actionscript-3 - Actionscript 3，获取内部影片剪辑的实例名称

> ID：13089147
> 
> 赞同：2
> 
> 时间：2012-10-26T14:45:52.787
> 
> 标签：actionscript-3, flash-cs5

我正在尝试将对象放在将被遮盖的影片剪辑中，以允许用户滚动它们

我目前的解决方案是为每个内部影片剪辑添加事件监听器......

```
outer_mc.myObject1.addEventListener(MouseEvent.MOUSE_DOWN, swapMovie);
outer_mc.myObject2.addEventListener(MouseEvent.MOUSE_DOWN, swapMovie);
outer_mc.myObject3.addEventListener(MouseEvent.MOUSE_DOWN, swapMovie);
outer_mc.myObject4.addEventListener(MouseEvent.MOUSE_DOWN, swapMovie);
outer_mc.myObject5.addEventListener(MouseEvent.MOUSE_DOWN, swapMovie);
outer_mc.myObject6.addEventListener(MouseEvent.MOUSE_DOWN, swapMovie);
outer_mc.myObject7.addEventListener(MouseEvent.MOUSE_DOWN, swapMovie);
outer_mc.myObject8.addEventListener(MouseEvent.MOUSE_DOWN, swapMovie);
outer_mc.myObject9.addEventListener(MouseEvent.MOUSE_DOWN, swapMovie);
outer_mc.myObject10.addEventListener(MouseEvent.MOUSE_DOWN, swapMovie);
outer_mc.myObject11.addEventListener(MouseEvent.MOUSE_DOWN, swapMovie);
outer_mc.myObject12.addEventListener(MouseEvent.MOUSE_DOWN, swapMovie);

function swapMovie(e:MouseEvent) {
    trace(e.currentTarget.name + " selected");
} 
```

由于可以有一个内部电影剪辑的可变列表，这可能会变得不规则（而且丑陋:)所以我正在尝试为父对象添加一个侦听器这是当前的尝试......

```
outer_mc.addEventListener(MouseEvent.MOUSE_DOWN, swapMovie);

function swapMovie(e:MouseEvent) {
    trace(e.currentTarget.name + " selected");
} 
```

然而，这只是返回“outer_mc”并使用 target 而不是 currentTarget 返回随机实例编号 Flash 分配 instance128、实例 23 等。

有没有人有一个解决方案可以获取将在 actionscript 3 中工作的子对象的实例名称？我看过，最接近的是使用不返回实际实例名称的目标解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:51:39.703

尝试：

```
for (var i:int = 0; i < outer_mc.numChildren; i++) {
 var child:* = outer_mc.getChildAt(i);
 child.addEventListener(MouseEvent.MOUSE_DOWN, swapMovie);
} 
```

在这种情况下，它将循环遍历outer_mc 的所有子节点，并将鼠标按下事件侦听器添加到每个子节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:52:30.600

你可以尝试做这样的事情：

```
function swapMovie(e:MouseEvent) {
    var current = e.target;
    parent = current.parent;
    while (parent != e.currentTarget)
    {
        current = current.parent;
        parent = current.parent;
    }

    //Current should be your object, now
} 
```

基本上，它会上升一级，直到它找到outer_mc，然后停止，并返回它被点击的孩子。

# cuda - 内核启动时出现“无效的设备序号”错误

> ID：13089148
> 
> 赞同：0
> 
> 时间：2012-10-26T14:45:53.857
> 
> 标签：cuda, openmp

我正在尝试使用来自多个 OpenMP 线程的多个 CUDA 设备。设备从主线程初始化（即在它们上分配内存），然后我`cudaSetDevice`从不同的线程使用，然后在不同的设备上启动内核。线程不是共享设备，每个线程都可以独占访问其设备。

据我了解，这应该可以正常工作。但是，一旦我从不是主要的 OpenMP 线程（即 omp_get_thread_num() ！= 0）在设备上启动内核，我就会从 CUDA 收到“无效的设备序号错误”：

```
kernel<<<...>>>(...);
error = cudaDeviceSynchronize(); // returns cudaSuccess
error = cudaGetLastError(); // returns invalid device ordinal error 
```

我错过了什么吗？有没有人见过这样的东西？我正在使用 CUDA 5.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:40:25.540

只是为了解决这个问题，这个问题是我在内核启动后使用 cudaGetLastError 尝试检查错误的结果，但没有检查前一次调用的错误返回值。因此，它在内核启动后从对 cudaGetDeviceInfo 的调用中返回错误代码，我错误地推断它来自启动本身。如果您看到此错误，我建议您确保检查所有先前对 CUDA API 的调用返回的错误值。

# iphone - 如何找到iOS设备屏幕的动态中心

> ID：13089149
> 
> 赞同：2
> 
> 时间：2012-10-26T14:45:55.220
> 
> 标签：iphone, xcode, ipad, screen-orientation, uiactivityindicatorview

> **可能重复： iOS SDK：通过代码**[UIImageView](https://stackoverflow.com/questions/12610660/uiimageview-zoom-and-center-to-arbitrary-rectangle-cant-determine-correct-cen)
> [将按钮移动到屏幕中心。](https://stackoverflow.com/questions/11527824/ios-sdk-moving-the-button-into-the-center-of-screen-by-code)
> [缩放并居中到任意矩形。无法确定屏幕上的正确中心](https://stackoverflow.com/questions/12610660/uiimageview-zoom-and-center-to-arbitrary-rectangle-cant-determine-correct-cen)

我正在尝试将 UIActivityIndi​​cator 集中在 UIWebView 中（它又是 UIScrollView 的子视图，左侧也有 UIToolbar 元素 - 尽管左侧工具栏并不总是可见）

以前也有人问过类似的问题，但重点是“动态地”找到中心，即关于方向的变化以及左侧工具栏的存在或不存在。

最好的方法是什么？有没有比重写方法更好的方法来做到这一点`shouldAutorotateToInterfaceOrientation`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T14:52:03.567

顺便说一句，中心是什么？

您可以访问 UIViewController 的中心`self.view.center`

或者在您的情况下，UIWebView 的中心为`yourwebView.center`

通过给它调整左上角元素的大小，activityindicator 将始终居中。

编辑 ：

如果您想要通过帧获得的屏幕中心，例如

考虑宽度和高度 30、30 的活动指示器。

```
(([UIScreen mainScreen].bounds.size.width)/2 - 15, ([UIScreen mainScreen].bounds.size.height)/2 - 15, 30, 30); 
```

然后，将 autoresizing 元素设置为 none。

转到 size Inspector 并从 Auto-sizing 功能中删除所有箭头。

![在此处输入图像描述](../Images/033ffaea26ba60228c797b1080a9c4e4.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:08:13.857

您的问题没有通用的解决方案。这是因为只有您知道要忽略视图中的哪个元素。无论您添加什么元素，视图始终保持不变。因此，我建议为您认为清除/空/可用的视图部分获取一个矩形，并在其中设置加载指示器。只需获取视图的整个框架（self.view.frame.size.height）并从中减去任何元素。例如

```
MyIndicator *indicator = [[MyIndicator alloc] initWithFrame:CGRectMake(self.toolbar.frame.size.width + self.toolbar.frame.origin.x, self.topBar.frame.size.height + self.topBar.frame.origin.y, self.view.frame.size.width - self.toolbar.frame.size.width - self.toolbar.frame.origin.x, self.view.frame.size.height - self.topBar.frame.size.height - self.topBar.frame.origin.y)]; 
```

# c++ - Windows 8 中缺少 MSVCP100D.dll，opencv 2.4.1 需要它

> ID：13089152
> 
> 赞同：-2
> 
> 时间：2012-10-26T14:46:05.797
> 
> 标签：c++, visual-studio, opencv

> **可能重复：**
> [MSVSP100D.dll 缺少在窗口 8 中使用 opencv 2.4.1](https://stackoverflow.com/questions/13089212/msvsp100d-dll-missing-working-with-opencv-2-4-1-in-window-8)

我有以下情况：

我正在尝试在 Windows 8 中使用 Visual Studio 2012、opencv 2.4.1。然后当我尝试运行我的应用程序时，我收到以下消息错误：

![在此处输入图像描述](../Images/68ed432c541b1d2885537dadf2bff8f5.png)

我知道以前在 stackoverflow 中询问过有关丢失 MSVCP100D.dll 的问题，但发生了一些不同的事情：当我在计算机中查找 dll 时，我注意到我有一个 SVCP110D.dll，这可能是第一个的更高版本。

有人可以回答这里发生了什么。

编辑：

很抱歉，我在连接方面遇到了一些问题，我没有意识到我两次问了同一个问题，任何人都可以删除这两个问题中的一个，也许是版主.....

# python - 如何修复 Django 中的数据库错误和幽灵迁移错误？

> ID：13089163
> 
> 赞同：4
> 
> 时间：2012-10-26T14:46:38.517
> 
> 标签：python, django, model, django-south

我收到一个 DatabaseError，说不存在名为 playlist 的列，我正在尝试找出解决方法。我用的是南方。我删除了迁移文件夹中的旧文件并运行：

```
python manage.py schemamigration app_name --initial
python manage.py migrate reserve 
```

执行此操作时出现此错误：

```
south.exceptions.GhostMigrations: 

 ! These migrations are in the database but not on disk:
    <reserve: 0002_initial>
 ! I'm not trusting myself; either fix this yourself by fiddling
 ! with the south_migrationhistory table, or pass --delete-ghost-migrations
 ! to South to have it delete ALL of these records (this may not be good). 
```

我不知道如何摆脱这个错误，因为在我的迁移文件夹中我只有 init.py(c) 和 0001_initial.py(c); 我没有 0002 迁移文件了。

当我尝试运行服务器并在管理员中单击“添加播放列表”时，这是我收到 DatabaseError 的时候。如果有帮助，我的 models.py 是：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    def __unicode__(self):
        return self.user

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User)         

class Playlist(models.Model):
    playlist = models.CharField('Playlist', max_length = 2000, null=True, blank=True)
    def __unicode__(self):
        return self.playlist

class Video(models.Model):
    video_url = models.URLField('Link to video', max_length = 200, null=True, blank=True)
    def __unicode__(self):
        return self.video_url

class UserPlaylist(models.Model):
    profile = models.ForeignKey(User)
    playlist = models.ForeignKey(Playlist)
    def __unicode__(self):
        return self.playlist

class Videoplaylist(models.Model):
    video = models.ForeignKey(Video)
    playlist = models.ForeignKey(UserPlaylist)
    def __unicode__(self):
        return self.playlist 
```

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T15:34:48.840

赶紧跑

```
python manage.py migrate reserve --delete-ghost-migrations 
```

这应该从数据库表中删除不存在的迁移`south_migrationhistory`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-19T22:58:28.487

首先，您应该找出导致数据库和文件系统不同步的原因。

然后，如果合适的话，你可以做

```
python manage.py migrate reserve --ignore-ghost-migrations 
```

或者

```
python manage.py migrate reserve --delete-ghost-migrations 
```

正如艾达斯所说，以更合适的为准。该`ignore`选项的风险可能较小，尽管您已经误入歧途以达到这种状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:15:46.073

South 也在数据库中将迁移信息存储在名为“迁移”的表中。[我认为那是表名；从记忆中写下来]。

您需要清除该表。

**笔记**

*   清除该表后，您必须从头开始重新开始迁移；从最初的迁移开始。
*   在执行此操作之前按原样制作数据库副本是个好主意。我假设您的代码已经受版本控制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-21T10:30:55.103

通常会发生此错误，因为您创建了一个迁移文件并随后进行了迁移，该迁移文件已从您的文件系统（磁盘）中删除

因此，您的数据库发生了由不再存在的迁移引起的更改。取决于您是否选择删除了迁移文件文件，您可以做什么；继续并从数据库中删除更改。

启动python外壳；$`python manage.py shell`

```
>>from south.models import MigrationHistory
>>MigrationHistory.objects.filter(migration='0002_initial').delete() 
```

这将从数据库中删除 0002 迁移。您现在可以继续创建/重新创建所需的迁移。

祝你好运，科穆。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-07T07:27:18.400

只需运行目录中存在 manage.py 文件的命令

> ./manage.py 迁移应用程序名 --delete-ghost-migrations

# c - 如何使静态库中的 gcc 链接强符号覆盖弱符号？

> ID：13089166
> 
> 赞同：31
> 
> 时间：2012-10-26T14:46:44.770
> 
> 标签：c, gcc, ld, weak-linking

我的问题可以总结如下：

**bar.c**：

```
#include <stdio.h>

void bar() {
    printf("bar\n");
} 
```

**主.c**：

```
#include <stdio.h>

void __attribute__((weak)) bar() {
    printf("foo\n");
}

int main() {
    bar();
    return 0;
} 
```

**生成文件**：

```
all:
    gcc -c bar.c
    ar -rc libbar.a bar.o
    gcc main.c -L. -lbar 
```

**输出**：

```
$ ./a.out
foo 
```

因此 main.c 中的弱符号 bar 不会被 bar.c 中的强符号覆盖，因为 bar.c 链接到静态库 libbar.a 中的 main.c。

如何告诉 gcc 使 libbar.a 中的强符号覆盖 main.c 中的弱符号？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2016-05-12T15:49:58.003

我对 max.haredoom 给出的答案感到困惑（并且它被接受了）。答案涉及共享库和动态链接，而问题显然是关于使用静态库进行静态链接的行为。我相信这是误导。

链接静态库时，**默认情况下****不**`ld`关心弱/强符号：它只是将未定义的符号解析为第一次遇到的符号（因此命令行中静态库的顺序很重要）。

 ****但是，可以使用该`--whole-archive`选项更改此默认行为。如果您将 Makefile 中的最后一步重写如下：

```
gcc main.c -L. -Wl,--whole-archive -lbar -Wl,--no-whole-archive 
```

然后你会看到：

```
$ ./a.out
bar 
```

简而言之，`--whole-archive`强制链接器扫描其所有符号（包括已解析的符号）。如果有一个强符号已经被弱符号解析（如我们的例子），那么强符号将推翻弱符号。

另请参阅 Eli Bendersky 的一篇关于静态库及其链接过程的精彩帖子“静态链接中的[库顺序”](http://eli.thegreenplace.net/2013/07/09/library-order-in-static-linking)和[这个 SO question](https://stackoverflow.com/questions/23079997/override-weak-symbols-in-static-library)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-27T13:06:41.800

一般来说：如果您不将弱实现放入您`main`的 . 但是，如果您在 中实现它，则在链接此静态时`main.c`，您将只能使用强绑定 () 覆盖它。`bar.c`

请阅读[http://www.bottomupcs.com/libraries_and_the_linker.html](http://www.bottomupcs.com/libraries_and_the_linker.html) - 它包含很多关于这个主题的有趣内容。

我自己做了一个测试：

酒吧.c

```
#include <stdio.h>

void bar()
{
        puts("bar.c: i'm the strong bar()");
} 
```

巴兹

```
#include <stdio.h>

void __attribute__((weak)) bar() 
{
        puts("baz.c: i'm the weak bar()");
} 
```

主程序

```
#include <stdio.h>

#ifdef V2
        void __attribute__((weak)) bar()
        {
                puts("main: i'm the build in weak bar()");
        }
#else
        void __attribute__((weak)) bar();
#endif

int main()
{
    bar();
    return 0;
} 
```

我的制作文件：

```
all:
    gcc -c -o bar.o bar.c
    gcc -shared -fPIC -o libbar.so bar.o
    gcc -c -o baz.o baz.c
    gcc -shared -fPIC -o libbaz.so baz.o
    gcc -o main1 main.c -L. -lbar -lbaz
    gcc -o main2 main.c -L. -lbaz -lbar
    LD_LIBRARY_PATH=. ./main1                                   # => bar.c
    LD_LIBRARY_PATH=. ./main2                                   # => baz.c
    LD_LIBRARY_PATH=. LD_PRELOAD=libbaz.so ./main1              # => baz.c (!!)
    LD_LIBRARY_PATH=. LD_PRELOAD=libbaz.so ./main2              # => baz.c
    gcc -o main3 main.c bar.o baz.o
    gcc -o main4 main.c baz.o bar.o
    ./main3                                                     # => bar.c
    ./main4                                                     # => bar.c
    gcc -DV2 -o main5 main.c -L. -lbar -lbaz
    gcc -DV2 -o main6 main.c -L. -lbaz -lbar
    LD_LIBRARY_PATH=. ./main5                                   # => main's implementation
    LD_LIBRARY_PATH=. ./main6                                   # => main's implementation
    gcc -DV2 -o main7 main.c -L. -lbar -lbaz
    gcc -DV2 -o main8 main.c -L. -lbaz -lbar
    LD_LIBRARY_PATH=. LD_PRELOAD=libbaz.so ./main7              # => main's implementation
    LD_LIBRARY_PATH=. LD_PRELOAD=libbaz.so ./main8              # => main's implementation
    gcc -DV2 -o main9  main.c -L. -lbar -lbaz
    gcc -DV2 -o main10 main.c -L. -lbaz -lbar
    LD_LIBRARY_PATH=. LD_PRELOAD=libbar.so ./main9              # => main's implementation
    LD_LIBRARY_PATH=. LD_PRELOAD=libbar.so ./main10             # => main's implementation
    gcc -c bar.c
    gcc -c baz.c
    gcc -o main11 main.c bar.o baz.o
    gcc -o main12 main.c baz.o bar.o
    ./main11                                                    # => bar.c
    ./main12                                                    # => bar.c
    gcc -o main13 -DV2 main.c bar.o baz.o
    gcc -o main14 -DV2 main.c baz.o bar.o
    ./main13                                                    # => bar.c
    ./main14                                                    # => bar.c 
```

看看 main1 && main2 `main.c`... lib 定义了`bar()`.****

# typescript - 如何将 Type.registerNamespace 转换为 TypeScript？

> ID：13089167
> 
> 赞同：3
> 
> 时间：2012-10-26T14:46:45.267
> 
> 标签：typescript

我正在尝试将我们的一些 javascript 转换为 TypeScript，但我不知道 typescript 是否支持命名空间。我们的代码如下所示：

```
/// <reference name="MicrosoftAjax.js"/>
Type.registerNamespace("MyNamespace.Controls.FloatingErrorPane");

MyNamespace.Controls.FloatingErrorPane = function (element)
{
...
}
MyNamespace.Controls.FloatingErrorPane.prototype =
{
...
} 
```

有谁知道是否可以在打字稿中指定包含句点的命名空间？我们在 C# 类中引用这些相同的名称，例如：

```
[assembly: WebResource("MyNamespace.FloatingErrorPane.js", "text/javascript")]
ScriptControlDescriptor descriptor = new ScriptControlDescriptor("MyNamspace.Controls.Floating 
```

ErrorPane", this.ClientID);

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T14:52:54.043

您可以使用嵌套模块和类来获得命名空间样式语法。

第一个示例与您问题中的示例匹配...

```
module MyNamespace {
    export module Controls {
        export class FloatingErrorPane {
            constructor(private element: HTMLElement) {
            }
        }
    }
}

var errorPane = new MyNamespace.Controls.FloatingErrorPane(myElement); 
```

如果需要，您可以跨多个文件声明模块，因此可以`MyNamespace`通过再次声明第二个文件来添加它......

```
module MyNamespace {
    export module Messaging {
        export class MessageHandler {

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T06:47:32.210

是的，您可以使用 . 创建嵌套命名空间的符号，例如

```
module MyNamespace.Controls {
    export class FloatingErrorPane {
        constructor(element: HTMLElement) {
        }
    }
}

var errorPane = new MyNamespace.Controls.FloatingErrorPane(myElement); 
```

或者，您可以使用 Sohnee 所示的语法，在其中连续声明模块。但是，您不能以这种方式直接定义类或函数。所以这是无效的：

```
MyNamespace.Controls.FloatingErrorPane = function() { ... } 
```

# django - Django：如何通过自定义 Django_Admin 来动态过滤外键选择

> ID：13089168
> 
> 赞同：4
> 
> 时间：2012-10-26T14:46:47.897
> 
> 标签：django, django-admin

我有三个模型：LineType、Service、DomainName、Record，它们之间有 m2m 或外键关系。这是代码：

```
class LineType(models.Model):
    linename = models.CharField(max_length=30,primary_key=True)

    def __unicode__(self):
        return self.linename

class Service(models.Model):
    servicename = models.CharField(max_length=30,primary_key=True)
    price = models.DecimalField(max_digits=8, decimal_places=2)
    line = models.ManyToManyField(LineType)

    def __unicode__(self):
        return self.servicename

class DomainName(models.Model):
    domainname = models.CharField(max_length=30,primary_key=True)
    user = models.ForeignKey(SiteProfile)
    service = models.ForeignKey(Service)

    def __str__(self):
        return self.domainname

class Record(models.Model):
    TYPE_CHOICES = (
                ('A','A'),
                ('CNAME','CNAME'),
                ('MX','MX'),
               )
    domainname = models.ForeignKey(DomainName)   

    def get_line(self):
        domain = DomainName.objects.get(pk=self.domainname_id)
        service = Service.objects.get(pk=domain.service_id)
        lines = service.line.all()
        choices = []
        for x in lines:
           choices.append((x.linename,x.linename))
        return choices

    host = models.CharField(max_length=30)
    type = models.CharField(max_length=5,choices=TYPE_CHOICES,default='A')
    line = models.ForeignKey(LineType)
    destaddress = models.CharField(max_length=30) 
```

让我介绍一下模型。每个域名只能有一个其他域名可以拥有的服务。每个域名都有多条记录。服务定义可以应用于记录的 LineTypes。

我使用Django admin来管理这些模型，但是Record中“line”的选择都是LineType对象。所以问题是如何根据它的父（DomainName）的“服务”来过滤Record的LineType。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-12T15:06:40.087

取决于您的确切要求和您的 Django 版本，答案可能是设置[`limit_choices_to`外键的属性](https://docs.djangoproject.com/en/1.7/ref/models/fields/#django.db.models.ForeignKey.limit_choices_to)，或者自定义 ModelAdmin 表单：

## 使用`limit_choices_to`

只需将行选择限制为匹配的行`linename == 'foo'`

```
class Record(models.Model):
    # ...
    line = models.ForeignKey(LineType, limit_choices_to={'linename': 'foo'})) 
```

## 使用自定义`form`

如果实例化表单时存在实例，我们可以选择它的域服务行作为查询集选项

```
class RecordAdminForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(RecordAdminForm, self).__init__(*args, **kwargs)

        # access object through self.instance...
        if self.instance:
            valid_lines = self.instance.domainname.service.line.objects.all()
            self.fields['line'].queryset = valid_lines

class RecordAdmin(admin.ModelAdmin):
    form = RecordAdminForm
    # ... 
```

## 参考SO问题：

*   [如何使用约束限制外键下拉列表？](https://stackoverflow.com/questions/3064368/how-to-limit-the-foreignkey-dropdown-with-constraints)

*   [如何过滤 Django ModelForm 中的 ForeignKey 选择？](https://stackoverflow.com/questions/291945/how-do-i-filter-foreignkey-choices-in-a-django-modelform)

# java - Javabeans 不能持久化输入数据

> ID：13089170
> 
> 赞同：0
> 
> 时间：2012-10-26T14:46:51.807
> 
> 标签：java, user-interface, javabeans

我遇到了一个问题，即输入的数据不能持久化。我想将 java Swing GUI 存储到 XML 文件并在以后重用它们。现在我成功存储了 GUI。但是在我在文本字段中输入一些数据之后。输入的数据不能编码成 XML 文件。你能帮我存储 GUI 和键入的内容吗？下面是使用 javabeans XMLencoder 的代码：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSeparator;
import javax.swing.JTextField;
import javax.swing.JTextPane;
import java.beans.*;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JOptionPane;

public class ResourceName extends JFrame implements ActionListener{
static JFileChooser chooser;
JButton save,load;
JTextField  tf; 
static JFrame frame;
 public ResourceName(){

     chooser = new JFileChooser();
     chooser.setCurrentDirectory(new File("."));

     frame = new JFrame("ResourceName");
     frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
     frame.setLayout(new FlowLayout());
     save = new JButton("Save");
     save.setActionCommand("Save");
     save.addActionListener(this);

     load = new JButton("Load");
     load.setActionCommand("Load");
     load.addActionListener(this);
     tf = new JTextField(10);

     frame.add(save);
     frame.add(tf);
     frame.add(load);       

    frame.pack();
    frame.setVisible(true);
 }

  public void actionPerformed(ActionEvent e){

      if((e.getActionCommand()).equals("Save"))
      {
          save();
      }else if((e.getActionCommand()).equals("Load"))
      {
          load();
      }
  }

 public void save()
{
    if(chooser.showSaveDialog(null)==JFileChooser.APPROVE_OPTION)
    {
        try{
            File file = chooser.getSelectedFile();
            XMLEncoder encoder = new XMLEncoder(new FileOutputStream(file));
            encoder.writeObject(frame);
            encoder.close();
        }
        catch(IOException e)
        {
            JOptionPane.showMessageDialog(null, e);
        }
    }
}
  public void load()
{
    //show file chooser dialog
    int r = chooser.showOpenDialog(null);

    // if file selected, open
    if(r == JFileChooser.APPROVE_OPTION)
    {
        try
        {
          File file = chooser.getSelectedFile();
          XMLDecoder decoder = new XMLDecoder(new FileInputStream(file));
          decoder.readObject();
          decoder.close();
        }
        catch(IOException e)
        {
            JOptionPane.showMessageDialog(null, e);
        }
    }
}

public static void main(String[] args) {

    ResourceName test = new ResourceName();

}
} 
```

请帮我解决这个问题。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:09:36.920

可能是`text`属性 is `transient`，这意味着它不会被自动保存到输出中`ObjectOutputStream`。您可能必须明确编写该字段。

# xampp - 错误 403 和 XAMPP 错误 20024

> ID：13089176
> 
> 赞同：1
> 
> 时间：2012-10-26T14:47:04.240
> 
> 标签：xampp, http-status-code-403

所以我查看了很多地方来尝试找到这个问题的答案，但实际上可以使用其他一些想法来解决这个问题。我已经进入了新的 XAMPP 安全概念并将拒绝更改为允许

```
#
# New XAMPP security concept
#
<LocationMatch "^/(?i:(?:xampp|security|licenses|phpmyadmin|webalizer|server-     status|server-info))">
Order deny,allow
Allow from all
Allow from ::1 127.0.0.0/8 \
fc00::/7 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 \
fe80::/10 169.254.0.0/16

ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var
</LocationMatch> 
```

以上是我的 httpd-xampp.conf 在底部的样子。当我转到本地主机时，我仍然在网站上收到 403 错误。所以我然后查看了错误日志，发现我收到了这个错误。

```
[Fri Oct 26 08:58:29.731458 2012] [core:error] [pid 5096:tid 1680] (20024)The given path is misformatted or contained invalid characters: [client ::1:59590] AH00127: Cannot map GET /system/%3C?echo($template. HTTP/1.1 to file 
```

我不知道这意味着什么，但我已经没有选择了。如果有人可以帮助我或知道什么可能会给我这个错误。我会尝试任何事情。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:04:53.740

好吧，事实证明问题出在XAMPP上。不知道为什么，但是当我在另一台开发服务器上测试它时，一切正常。我猜它与新的 XAMPP 安全概念有关。我对此的最佳答案是在 httpd-xampp.conf 文件的该部分中将拒绝更改为允许。该解决方案适用于除我之外的许多人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T04:35:54.227

这主要是由于[Apache 错误 41441 造成](https://issues.apache.org/bugzilla/show_bug.cgi?id=41441)的。Apache 编码人员并未将其称为错误，并已在 2009 年底将其作为 WONTFIX 关闭。但是，我在 heidisql.com 上也遇到了此错误，我收到大量来自垃圾邮件发送者、收割机和其他损坏客户端的格式错误的请求。我的错误日志中充满了这些，我很高兴有办法通过重定向或重写来处理此类请求。

您的网址不包含冒号 (:)

> /system/%3C?echo($template.

...但是 %3C 转换为“<”，它也用于 Windows 文件系统路径，这就是 Apache 出于安全原因阻止该请求的原因。

# jquery - 如何返回 xml 节点并从其子节点获取 .text()？

> ID：13089177
> 
> 赞同：1
> 
> 时间：2012-10-26T14:47:08.167
> 
> 标签：jquery, xml

我对 Jquery 很陌生。我正在尝试做一个从多个页面检索信息的插件。我做了一个ajax调用并得到一个xml，然后我想选择一个节点的特定文本，xmlc看起来像这样：

```
<status>
  <item>
    <name>NameA</name>
    <serviceUrl>theURL</serviceUrl>
    <timeout>184</timeout>
    <errorMessage></errorMessage>
    <statusMessage>SpecificMessage</statusMessage>
  </item>
  <item>
    <name>NameB</name>
    <serviceUrl>theURL</serviceUrl>
    <timeout>200</timeout>
    <errorMessage></errorMessage>
    <statusMessage>SpecificMessageB</statusMessage>
  </item>
  <item>
    <name>NameC</name>
    <serviceUrl>theURL</serviceUrl>
    <timeout>300</timeout>
    <errorMessage></errorMessage>
    <statusMessage>SpecificMessageC</statusMessage>
  </item>
</status> 
```

我无法工作的代码是：

```
 function parseXml(xml)
{
    item = getItemFor(xml, "NameB");
    console.log("name: " + item.find("name").text());
    console.log("serviceUrl: " + item.find("serviceUrl").text());
    console.log("timeout: " + item.find("timeout").text());
}

var getItemFor= function(xml, name){
    $(xml).find("item").each(function(){
        var itName = $(this).find("name").text();
        if (itName === name){
            console.log("Found: " + name);
            return $(this);
        }

    });
} 
```

底线，我无法从 getItemFor 函数中获取名称为 nameB 的 xml 项节点，我也无法停止 .each() 循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:54:45.427

一种解决方法是修改您的`getItemFor`函数以传递从内部循环返回的结果：

```
var getItemFor = function(xml, name) {
    var result = null;
    $(xml).find("item").each(function() {
        var itName = $(this).find("name").text();
        if (itName === name) {
            console.log("Found: " + name);
            result = $(this);
        }
    });
    return result;
} 
```

或者`parseXml`完全简化（减少到一个选择器）：

```
function parseXml(xml) {

    var item = $('item name:contains("NameB")', xml).parent();

    console.log("name: " + item.find("name").text());
    console.log("serviceUrl: " + item.find("serviceUrl").text());
    console.log("timeout: " + item.find("timeout").text());
} 
```

看到这个[FIDDLE](http://jsfiddle.net/NUsY9/)。

# input - 超过 1 行

> ID：13089182
> 
> 赞同：73
> 
> 时间：2012-10-26T14:47:27.510
> 
> 标签：input, textarea, rows, lines

我`<input type="textarea" />`很难让我的行数超过 1 行，

我尝试在 html 中添加属性，就像你对这样的正常情况所做的`<textarea></textarea>`那样：`<input type="textarea" rows="x" cols="x" />`

我什至尝试在 CSS 中做到这一点，但它不起作用。我已经在互联网上搜索了一个解决方案，但我似乎无法在任何地方找到关于我的确切问题的主题。

我正在经历的文本区域在这个网站上： [Vilduhelst](http://trendlining.com/~vilduhel/)

当您按下“Lav dit eget dilemma”按钮时，它们会出现。

我正在寻找 HTML 或 CSS 解决方案。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-10-26T14:50:59.540

为什么不使用`<textarea>`标签？

```
​&lt;textarea id="txtArea" rows="10" cols="70"></textarea> 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-12-01T14:39:33.313

虽然`<input>`忽略了`rows`属性，但您可以利用`<textarea>`不必在`<form>`标签内的事实，但仍然可以通过引用表单的 id 成为表单的一部分：

```
<form method="get" id="testformid">
    <input type="submit" />
</form> 
<textarea form ="testformid" name="taname" id="taid" cols="35" wrap="soft"></textarea> 
```

当然，`<textarea>`现在出现在“提交”按钮下方，但也许你会找到重新定位它的方法。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-11-23T21:42:40.880

正如*Sparky*在对这个问题的许多答案的评论中所说，标签的属性**没有**任何`textarea`值。`type``input`

换句话说，以下标记**无效**：

```
<input type="textarea" /> 
```

浏览器**默认**替换它：

```
<input type="text" /> 
```

**要定义多行文本输入，请使用：**

```
<textarea></textarea> 
```

[有关详细信息，](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea)*请参阅[*textarea*](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea)[元素文档](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea)。*

 ** * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-02-07T03:05:34.280

“输入”标签不支持行和列属性。这就是为什么最好的选择是使用带有 rows 和 cols 属性的 textarea。您仍然可以添加“名称”属性，并且还有一个有用的“包装”属性，可以在各种情况下很好地服务。*

# ios - Apple AWT 内部异常：-[NSView CGLPBufferObj]：无法识别的选择器发送到实例 0x7fc73d201960

> ID：13089183
> 
> 赞同：1
> 
> 时间：2012-10-26T14:47:33.893
> 
> 标签：ios, jogl

我正在尝试在 mac 下使用一些本机 jogl 库启动应用程序。它在linux和windows上运行。错误信息是：

```
2012-10-26 16:35:49.160 java[1440:1703] invalid drawable
2012-10-26 16:35:49.163 java[1440:1703] -[NSView CGLPBufferObj]: unrecognized selector sent to instance 0x7fc73d201960
2012-10-26 16:35:49.164 java[1440:1703] Apple AWT Internal Exception: -[NSView CGLPBufferObj]: unrecognized selector sent to instance 0x7fc73d201960
2012-10-26 16:35:49.165 java[1440:1703] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSView CGLPBufferObj]: unrecognized selector sent to instance 0x7fc73d201960'
*** First throw call stack:
(
    0   CoreFoundation                      0x00007fff929e60a6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff8f7533f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff92a7c6ea -[NSObject(NSObject) doesNotRecognizeSelector:] + 186
    3   CoreFoundation                      0x00007fff929d45ce ___forwarding___ + 414
    4   CoreFoundation                      0x00007fff929d43b8 _CF_forwarding_prep_0 + 232
    5   AppKit                              0x00007fff8c6395be -[NSOpenGLContext setPixelBuffer:cubeMapFace:mipMapLevel:currentVirtualScreen:] + 59
    6   libjogl_desktop.jnilib              0x00000001284708cb setContextPBuffer + 203
    7   libjogl_desktop.jnilib              0x00000001284d428b Java_jogamp_opengl_macosx_cgl_CGL_setContextPBuffer__JJ + 43
    8   ???                                 0x000000010790ef90 0x0 + 4421906320
)
libc++abi.dylib: terminate called throwing an exception

Process finished with exit code 134 
```

任何想法？

# objective-c - 从搅拌机中导出模型以在 ios 应用程序中使用

> ID：13089190
> 
> 赞同：1
> 
> 时间：2012-10-26T14:47:59.463
> 
> 标签：objective-c, ios, c, opengl-es, blender

我在搅拌机中创建了一个模型，并将其导出为 .obj 文件。为了让 open gl 渲染三角形，我相信坐标必须是逆时针的。搅拌器是否默认执行此操作，还是我需要编写一些代码来重新排序顶点？

![模拟器屏幕截图](../Images/7aff0388d08981a5053389bac0f42b19.png)

运行我的应用程序时，我得到以下信息。我认为这可能是因为顶点的顺序导致它们被剔除？

这是我的坐标

0.741670, 0.189542, 0.333219, 0.736962, 0.176234, 0.092931, 0.737054, -0.036978, 0.135064, 0.745167, -0.021633, 0.348303, 0.955526, 0.188491, 0.327129, 0.950747, 0.177176, 0.084729, 0.952274, -0.036216, 0.100027, 0.953441, -0.028794, 0.336081, 0.721120, 0.174601, -0.526814, 0.726614, -0.063783, -0.532670, 0.935062, 0.175649, -0.527249, 0.936101, -0.038258, -0.531152, 0.955526, 0.188491, 0.327129, 0.741670, 0.189542, 0.333219, 0.740995, -0.023997, 0.346373 , 0.953816, -0.026579, 0.335892, 0.950747, 0.177176, 0.084729, 0.735527, 0.176414, 0.119766, 0.737054, -0.036978, 0.135064, 0.952274, -0.036216, 0.100027, 0.124535, 0.198942, 0.348308, 0.125736, -0.026534, 0.372816, 0.117333, 0.181928 ，0.135162，0.115363，-0.034357，0.150613，0.091805，0.199118，0.349619，0.093005，0.026358，0.374127，0.374127，0.084603，0.1823，0.182104，0.1364，0.1364，0.1364,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4444444,44444，，0.1364 in721330, 0.207354, -0.745853, 0.720410, -0.006582, -0.747520, 0.726598, -0.033529, -0.533201, 0.727519, 0.180408, -0.531534, 0.934337, -0.158101, -0.750111, 0.940526, -0.185047, -0.535791, 0.941446, 0.028890, -0.534124, 0.721374, -0.645783, -0.751908, 0.723957, -0.647461, -0.537985, 0.935302, -0.646683, -0.754498, 0.937885, -0.648361, -0.540576, 0.934592, 0.209805, -0.741689, 0.720650, 0.208757, -0.741253, 0.721104 , 0.204856, -0.527345, 0.935046, 0.205904, -0.527780, 0.935631, -0.004102, -0.745592, 0.721689, -0.005150, -0.745156, 0.722144, -0.009051, -0.531248, 0.936086, -0.008003, -0.531683, 0.103302, 0.203762, - 0.746541, 0.105341, 0.210287, -0.519837, 0.103302, -0.010183, -0.746541, 0.102406, -0.012058, -0.529706, 0.720650, 0.208757, -0.741253, 0.720650, 0.208757, -0.741253, 0.721119, 0.206804, -0.525190, 0.721104, 0.204856, -0.527345, 0.934592,0.209805, -0.741689, 0.934577, 0.207857, -0.743844, 0.935046, 0.205904, -0.527780, 0.935046, 0.205904, -0.527780, 0.721374, -0.645783, -0.751908, 0.723957, -0.647461, -0.537985, 0.935302, -0.646683, -0.754498, 0.937885, -0.648361, -0.540576, 0.934592, 0.209805, -0.741689, 0.720650, 0.208757, -0.741253, 0.721104, 0.204856, -0.527345, 0.935046, 0.205904, -0.527780, 0.935631, -0.004102, -0.745592, 0.721689, -0.005150, - 0.745156, 0.722144, -0.009051, -0.531248, 0.936086, -0.008003, -0.531683, 0.103302, 0.203762, -0.746541, 0.105341, 0.210287, -0.519837, 0.103302, -0.010183, -0.746541, 0.102406, -0.012058, -0.529706, -0.986491 , 0.847652, 0.031098, -0.987709, 0.843956, -0.164961, -0.986318, 0.637021, -0.166461, -0.984346, 0.647845, 0.011650, -0.777551, 0.843796, 0.052705, -0.773801, 0.845320, -0.161202, -0.772410, 0.631385, -0.162702 , -0.776160, 0。629861, 0.051205, -0.976949, 0.848330, -0.778808, -0.975558, 0.634395, -0.780308, -0.763042, 0.849694, -0.775049, -0.761651, 0.635759, -0.776549, -0.966568, 0.824917, -0.172216, -0.719671, 0.847137, - 0.153942, -0.720530, 0.633195, -0.153342, -0.982316, 0.641381, -0.182278, -0.986363, 0.841550, 0.031924, -0.721447, 0.847745, 0.059995, -0.722306, 0.633803, 0.060595, -0.997095, 0.634657, 0.025697, -0.105714, 0.844402 , -0.136023, -0.104162, 0.632010, -0.133601, -0.107833, 0.846389, 0.077902, -0.109821, 0.634471, 0.082080, -0.114350, 0.016580, -0.128420, -0.112118, 0.230505, -0.130385, 0.101805, 0.228293, -0.128246, 0.099573 , 0.014368, -0.126281, -0.110643, 0.018567, 0.085505, -0.114237, 0.232492, 0.083540, 0.099686, 0.230280, 0.085680, 0.097454, 0.016355, 0.087644, -0.105714, 0.844402, -0.136023, 0.108209, 0.842190, -0.133884, -0.107833, 0.846389, 0。077902, 0.106090, 0.844177, 0.080041, -0.110643, -0.010183, 0.081361, -0.110643, -0.010183, -0.132584, 0.103302, -0.010183, -0.132584, 0.103302, -0.010183, 0.081361, -0.117934, 0.232671, 0.082464, -0.114864, 0.227828, -0.140563, 0.104356, 0.225305, -0.131726, 0.097681, 0.232683, 0.091157, -0.110643, -0.010183, -0.746541, 0.103302, -0.010183, -0.746541, -0.110643, 0.203762, -0.746541, 0.103302, 0.203762, -0.746541, -0.000131, 0.090791, -0.004629, -0.090885, -0.000973, 0.001877, -0.090871, -0.000419, 0.002596, 0.090902, -0.000181, -0.001123, 0.000109, 0.001963, -0.090888, 0.090878, 0.000484, -0.002330, 0.005764, -0.090706 , 0.001896, -0.000427, 0.090908, -0.000222, 0.003094, 0.007769, 0.090524, 0.000102, -0.090793, 0.004591, 0.090901, -0.000106, -0.001197, 0.003563, 0.004619, 0.090722, 0.003670, 0.009835, 0.090301, -0.002305, -0.006484, -0.090648, 0。000142, -0.090805, 0.004353, 0.000936, 0.090676, -0.006436, -0.090835, 0.000487, 0.003639, 0.000196, 0.090620, -0.007240, -0.003665, -0.006439, -0.090607, -0.000359, -0.090852, 0.003215, -0.090890, 0.000108, 0.001869, -0.090869, 0.000370, 0.002670, -0.000391, -0.090905, -0.000708, 0.000031, 0.090907, -0.000542, -0.000442, 0.090893, 0.001658, -0.090907, 0.000606, 0.000228, 0.000590, -0.090899, -0.001218, 0.000660, - 0.002871, 0.090861, 0.000484, 0.000830, -0.090904, -0.000454, 0.067440, -0.060960, -0.090907, -0.000198, 0.000644, -0.000454, 0.067439, -0.060961, 0.090908, -0.000465, -0.000202, 0.090908, -0.000453, -0.000201 , 0.090907, 0.000198, -0.000644, 0.001095, -0.001358, 0.090892, -0.001096, 0.001132, -0.090895, 0.000564, 0.090906, -0.000478, -0.090893, -0.000589, -0.001594, -0.005295, -0.090730, 0.002128, -0.013410, -0.004661，0.089794，-0。090902, -0.000832, 0.000807, 0.090893, 0.000580, 0.001597, 0.001593, 0.000648, -0.090893, 0.090893, 0.000580, 0.001597, -0.000905, -0.090904, -0.000145, -0.000591, 0.090905, 0.000637, -0.004675, 0.090701, -0.003982, 0.002779, -0.000640, -0.090864, -0.001368, -0.090888, -0.001371, -0.090349, 0.006450, -0.007735, 0.008350, 0.001805, -0.090507, -0.010526, -0.000917, 0.090293, 0.090894, -0.000068, 0.001646, -0.002918, 0.001039, 0.090856, -0.000060, -0.090907, 0.000648, 0.000319, 0.090907, -0.000548, -0.090908, -0.000286, 0.000340, 0.000900, -0.000844, -0.090901, 0.090900, -0.000940, 0.000909, -0.000961, -0.090900, 0.000848, -0.000913, 0.000832, 0.090901, 0.000948, 0.090900, -0.000835, -0.000900, 0.000844, 0.090901, 0.090900, -0.000940, 0.000909, -0.090900, 0.000940, -0.000909, -0.090881, -0.002185, -0.000614, 0.000000, -0.090909, -0.000000, 0.090895,0.000837, 0.001375, -0.001839, -0.002088, 0.090867, 0.000624, 0.090873, -0.002477, -0.000000, 0.000000, -0.090909, 0.000598, 0.090844, -0.003392, 0.090909, -0.000213, -0.000074, -0.090905, -0.000854, -0.000298

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:29:46.207

经过进一步研究，您可以指定是否启用剔除禁用。您还可以指定是顺时针还是逆时针进行剔除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T09:21:55.670

Blender 的元素（索引）从 1 开始，但是 OpenGL 从 0 开始计数。从每个元素中减去 1。

# c# - 有人知道我可以添加到我的 VB.Net 应用程序中的一个好的掩码重命名类吗？

> ID：13089194
> 
> 赞同：1
> 
> 时间：2012-10-26T14:48:08.757
> 
> 标签：c#, .net, vb.net

我不认为这对自己来说太难写了，但我希望我不必在这里重新创建轮子，并且有人已经这样做了/可以为我指明正确的方向......

基本上，我正在寻找一个类（最好在 VB.Net 中，这样我可以将它附加到我现有的应用程序并在必要时对其进行自定义），它允许用户格式化程序的输出文件名的样子。例如，假设我的程序正在创建关于狗的信息并创建输出文件。也许我会为用户提供掩码，例如：

```
<Breed>
<Sex>
<Age>
etc 
```

然后用户可以使用此实用程序创建一个输出文件名，例如：

```
"Dog Info - "<Sex>" "<Breed><Index>".txt" 
```

该程序将输出文件：

```
"Dog Info - Male Doberman.txt"
"Dog Info - Female Maltese.txt"
"Dog Info - Female Rottweiler1.txt"
"Dog Info - Female Rottweiler2.txt" 
```

......沿着这些路线......

同样，我很确定这对编程来说没什么大不了的，但是如果它已经存在并且也许有人做得比我考虑潜在问题的更好，那将是非常酷的。

谢谢！！

# regex - 正则表达式匹配单个、双位或三位数

> ID：13089196
> 
> 赞同：1
> 
> 时间：2012-10-26T14:48:28.670
> 
> 标签：regex

我正在尝试查找在我的代码中使用 (x,y) 的地方的所有实例，其中 x 和 y 是整数。

我试过`[0-9]+,[0-9]+`

这可以检测到 (0,2) (3,5) 等，但它没有检测到

(0,50) 或 (255,255)

如何使支票包含所有号码？

这不是一种编程语言，这适用于 Notepad++，我想我必须在逗号之前和之后包含空格 \s*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T14:50:32.150

试试这个正则表达式：

```
\(\d{1,3},\d{1,3}\) 
```

在此处查看实际操作：[http ://regexr.com?32jph](http://regexr.com?32jph)

* * *

这是细分：

**`\(`**- 匹配一个文字`(`
**`\d{1,3}`**- 匹配一到三个数字
**`,`**- 好吧，匹配一个文字`,`
**`\d{1,3}`**- 再次匹配一到三个数字
**`\)`**- 匹配一个文字`)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T14:50:10.883

用于`\d`匹配任何数字，大括号用于匹配 1-3 个字符 - `\d{1,3}`。为了您的完整比赛使用：

```
\d{1,3},\d{1,3} 
```

如果要包含括号，则需要对其进行转义：

```
\(\d{1,3},\d{1,3}\) 
```

# .htaccess - 该页面包含过多的服务器重定向？

> ID：13089197
> 
> 赞同：1
> 
> 时间：2012-10-26T14:48:33.273
> 
> 标签：.htaccess, mod-rewrite, redirect

我正在尝试将 android/Iphone/Ipad 用户重定向到不同的网址（子域），但每次它在我的平板电脑上重定向时都会弹出“该页面包含太多服务器重定向”？？我在服务器上的 htaccess 代码如下 >

```
Options -MultiViews +FollowSymLinks
RewriteEngine On

RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteCond %{HTTP_HOST} !^eco-fireplaces.co.uk/mob.html
RewriteRule ^(.*)$ http://m.eco-fireplaces.co.uk/mob.html[R=307,L,NC] 
```

这会将我的 android 设备重定向到`http://m.eco-fireplaces.co.uk/mob.html%5bR=307,L,NC%5d`

但出现“页面包含太多服务器重定向”？？错误

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:14:40.663

> 这会将我的 android 设备重定向到`http://m.eco-fireplaces.co.uk/mob.html%5bR=307,L,NC%5d`

这是因为您在`mod.html`重写标志和重写标志之间缺少一个空格，并且这些标志被附加，就好像它是目标 URL 的一部分：

```
RewriteRule ^(.*)$ http://m.eco-fireplaces.co.uk/mob.html [R=307,L,NC] 
```

不过，不确定为什么这会导致“服务器重定向过多”错误。

* * *

该`%{HTTP_HOST}`变量不包含路径信息，仅包含“Host:”标头指定的主机名。但在你的情况下，它需要阅读：

```
RewriteCond %{HTTP_HOST} !^m\.eco-fireplaces.co.uk$ [NC] 
```

# oracle - 如何在 Oracle 中生成脚本列表

> ID：13089199
> 
> 赞同：0
> 
> 时间：2012-10-26T14:48:37.547
> 
> 标签：oracle, plsql

在 SQL Server 中有一个任务功能，然后您可以“生成脚本”，这对于视图和存储过程等非常有用。

在 Oracle 中，我可以生成这样的视图副本吗？这是怎么做到的？我正在使用 PL SQL。

我正在尝试更新笔记本电脑上的 Oracle 数据库。最近，我正在工作的数据库中添加了许多新视图和存储过程。我也在笔记本电脑上工作以进行开发。

而不是备份整个数据库，如果我可以复制这些视图和 sp 会容易得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:12:59.663

听起来您可能正在寻找该[`DBMS_METADATA`包和该包中的`GET_xxx`功能](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_metada.htm#i1019414)。这就是 SQL Developer 和其他 GUI 等工具将调用以生成特定对象的 DDL。

因此，例如，如果您想在 SQL（或 PL/SQL）`EMP`的模式中获取表的 DDL，您可以`SCOTT`

```
SQL> ed
Wrote file afiedt.buf

  1  select dbms_metadata.get_ddl( 'TABLE', 'EMP', 'SCOTT' )
  2*   from dual
SQL> /

DBMS_METADATA.GET_DDL('TABLE','EMP','SCOTT')
--------------------------------------------------------------------------------

  CREATE TABLE "SCOTT"."EMP"
   (    "EMPNO" NUMBER(4,0),
        "ENAME" VARCHAR2(10),
        "JOB" VARCHAR2(9),
        "MGR" NUMBER(4,0),
        "HIREDATE" DATE,
        "SAL" NUMBER(7,2),
        "COMM" NUMBER(7,2),
        "DEPTNO" NUMBER(2,0),
         CONSTRAINT "PK_EMP" PRIMARY KEY ("EMPNO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DE
FAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"
  ALTER INDEX "SCOTT"."PK_EMP"  UNUSABLE ENABLE,
         CONSTRAINT "FK_DEPTNO" FOREIGN KEY ("DEPTNO")
          REFERENCES "SCOTT"."DEPT" ("DEPTNO") ENABLE
   ) SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DE
FAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"
  CACHE 
```

# video - 使用 webrtc DOM 异常 12 进行视频聊天

> ID：13089200
> 
> 赞同：1
> 
> 时间：2012-10-26T14:48:42.457
> 
> 标签：video, html5-video, livechat, webrtc

我正在使用 webrtc 在单个网页中尝试简单的视频聊天，并收到以下错误 Uncaught Error: SYNTAX_ERR: DOM Exception 12

我的代码是

```
 <button id='btn2' onclick='call();'>call</button>
    ...... 
    function call(){
        pc1 = new webkitPeerConnection00(null,icecallback1);
        console.log('created local peer connection object pc1');
        pc2 = new webkitPeerConnection00(null,icecallback2);
        console.log('created local peer connection object pc2');
        pc2.onaddstream = gotremotestream;

        pc1.addstream = localstream;
        console.log('loclastream added');
        var offer = pc1.createOffer(null);
        pc1.setLocalDescription(pc1.SDP_OFFER,offer);
        console.log('localdesc');
        pc2.setRemoteDescription(pc2.SDP_OFFER,offer);
        console.log('pc2remotedesc');

        var answer = pc2.createAnswer(offer.toSdp(),{has_audio:true,has_video:true});

        pc2.setLocalDescription(pc2.SDP_ANSWER,answer);
        pc1.setRemoteDescription(pc1.SDP_ANSWER,answer);

        pc1.startIce();
        pc2.startIce();

};

function gotremotestream(e){
    video2.src = webkitURL.createObjectURL(e.stream);
}

function icecallback1(candidate,bmore){
    if(candidate){
        pc2.processIceMessage(candidate);
        console.log("local ICE candidate: " + candidate.toSdp());
    }

}

function icecallback2(candidate,bmore){
    if(candidate){
        pc1.processIceMessage(candidate);
        console.log("remote ICE candidate: " + candidate.toSdp());
    }

} 
```

有人可以帮我解决我的问题，因为我完全被它难倒了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T07:15:47.913

What version of Chrome are you using? Note the PeerConnection00 deprecation described at www.webrtc.org/blog.

# c# - 使用 TagLib 时如何读取音频 (mp3) 标签（时长和字幕）？

> ID：13089205
> 
> 赞同：1
> 
> 时间：2012-10-26T14:49:19.737
> 
> 标签：c#, .net-4.0, mp3, id3

我正在使用 TagLib（UltraID3Lib 无法读取每个 MP3 文件）。也许 TagLib 会做。而且我找不到像字幕或持续时间或时间这样的属性？

我如何找到这种标签？

示例：“Ondertitel”表示字幕

![在此处输入图像描述](../Images/a6dffb75da9f61c20a1724f18af66db2.png) **第二个问题是：如何使用 TagLib 找到标签 Subtitle？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:03:52.257

这样，您可以获得持续时间：

```
var file = TagLib.File.Create(@"xyz.mp3");

Console.WriteLine(file.Properties.Duration); 
```

# c# - 使用“低完整性级别”时，信号量 ctor 在 Windows 8 x64 中失败

> ID：13089206
> 
> 赞同：2
> 
> 时间：2012-10-26T14:49:38.887
> 
> 标签：c#, .net, .net-4.0, windows-8, .net-4.5

我正在尝试使用 .Net 4.0/4.5 在具有低完整性级别的 Windows 8 x64 桌面应用程序中创建/打开命名信号量。

相同的代码在 Windows 7 x64 上有效，但在 Windows 8 Entreprise x64 上失败，并出现 System.IO.IOException：“客户端不持有所需的权限”。

代码如下（控制台应用程序）：

```
class Program
{
   static void Main(string[] args)
   {
      System.Security.AccessControl.SemaphoreSecurity sec = null;

      //[low integrity level[
      sec = new System.Security.AccessControl.SemaphoreSecurity();
      sec.SetSecurityDescriptorSddlForm("S:(ML;;NW;;;LW)");
      //]low integrity level]

      try
      {
         bool createdNew;
         var sem = new System.Threading.Semaphore(0, int.MaxValue, "MySemaphoreName", out createdNew, sec);
         if (createdNew) { Console.WriteLine("Semaphore created"); }
         else            { Console.WriteLine("Semaphore opened"); }
      }
      catch (Exception ex)
      {
         Console.WriteLine("Exception occured {0}", ex);
      }
      ConsoleKeyInfo cki = Console.ReadKey();
   }
} 
```

删除以下块时，它适用于两个系统：

```
sec = new System.Security.AccessControl.SemaphoreSecurity();
sec.SetSecurityDescriptorSddlForm("S:(ML;;NW;;;LW)"); 
```

欢迎任何帮助。

# android - 使用 2 个声音池会导致我出现任何类型的内存泄漏吗？

> ID：13089207
> 
> 赞同：2
> 
> 时间：2012-10-26T14:49:39.417
> 
> 标签：android, soundpool

我想在我的活动中使用两个声音池。有时我会卸载和释放并加载不同的声音，然后我再次卸载/释放并再次与其他声音一起使用，另一个将始终包含相同的声音并且永远不会被卸载。我在文档中没有找到任何关于此的文字，所以它会给我带来任何问题吗？如果我使用 MediaPlayer 而不是 SoundPool 的恒定声音？它会导致任何内存泄漏或问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:16:46.457

如果您根据生命周期正确处理对象`SoundPool`和`MediaPlayer`对象，则不会出现内存泄漏或声音播放问题`Activity`（见下文）。

首先，你不应该做“太多”`SoundPool`的`MediaPlayer`对象。这取决于您设备的实际状态，但我相信您可以同时使用 2 个`SoundPool`对象，例如 4 个`MediaPlayer`对象。

说明：每人`SoundPool`预留一名本地人`AudioTrack`，每人`MediaPlayer`也预留一名本地人`AudioTrack`。因此，使用 2`SoundPool`和 4 个`MediaPlayer`对象，您将有 6 个底层`AudioTrack`对象在使用中。这通常很好，因为系统通常有更多的空闲`AudioTrack`对象。（有关更多详细信息，请参阅[此主题](https://groups.google.com/d/topic/android-platform/tyITQ09vV3s/discussion)。）

关于您的具体问题：是的，只要您考虑以下几点，也可以使用永久的`SoundPool`和有时重新创建/发布的另一个：`SoundPool`

*   在您的活动的`onPause()`或`onStop()`事件处理程序中，您应该**释放所有** `SoundPool`和`MediaPlayer`对象，因为它们使用本机资源。然后在您的`onResume()`or`onStart()`中，您可以再次重新创建它们。因此，从这个意义上说，您的陈述*“...永远不会被卸载”*是不正确的，因为您需要在整个生命周期中处理对象的状态`SoundPool`和`MediaPlayer`对象`Activity`。

# r - 在循环中构造变量并使用它们

> ID：13089208
> 
> 赞同：0
> 
> 时间：2012-10-26T14:49:45.257
> 
> 标签：r, loops, for-loop

我正在尝试遍历变量（我仍在努力了解 apply() 系列，很快就会有一天）并构造我希望为其获取标签的变量名称。

一个简化的例子可能是最简单的......

```
library(Hmisc)
t <- data.frame(matrix(1:100, 10))
label(t$X1)  <- "This is my first variable"
label(t$X2)  <- "This is my second variable"
label(t$X3)  <- "This is my third variable"
label(t$X4)  <- "This is my fourth variable"
label(t$X5)  <- "This is my fifth variable"
label(t$X6)  <- "This is my sixth variable"
label(t$X7)  <- "This is my seventh variable"
label(t$X8)  <- "This is my eighth variable"
label(t$X9)  <- "This is my ninth variable"
label(t$X10) <- "This is my tenth variable"
for(x in 1:10){
  my.label <- label(paste("t$X", x, sep=""))
  print(my.label)
} 
```

当运行这给出....

```
[1] ""
[1] ""
[1] ""
[1] ""
[1] ""
[1] ""
[1] ""
[1] ""
[1] ""
[1] "" 
```

当我期待看到

```
[1] "This is my first variable"
[1] "This is my second variable"
[1] "This is my third variable"
[1] "This is my fourth variable"
[1] "This is my fifth variable"
[1] "This is my sixth variable"
[1] "This is my seventh variable"
[1] "This is my eighth variable"
[1] "This is my ninth variable"
[1] "This is my tenth variable" 
```

我知道 paste() 函数工作正常，因为...

```
for(x in 1:10){
  print(paste("t$X", x, sep=""))
}
[1] "X$1"
[1] "X$2"
[1] "X$3"
[1] "X$4"
[1] "X$5"
[1] "X$6"
[1] "X$7"
[1] "X$8"
[1] "X$9"
[1] "X$10" 
```

我很难过，我尝试将 paste() 放在 eval() 中，如...

```
for(x in 1:10){
  my.label <- label(eval(paste("t$X", x, sep="")))
  print(my.label)
} 
```

......但没有快乐。这似乎是一件简单的事情，我已经尝试寻找解决方案，但显然没有用我正在尝试的短语正确描述它，因此在这里问。

非常感谢您的见解和指示。

谢谢，

松紧线

编辑：上面是一个简化的例子来说明我想要实现的有点复杂，目前我的代码看起来像......

```
for(type1 in c("bouldering", "routes")){
  if(type1 == "bouldering"){
    part   <- c("indoors", "outdoors")
    xlabel <- "Grade (Fontainebleau)"
  }
  else if(type1 == "routes"){
    part <- c("onsight", "redpoint")
    xlabel <- "Grade (French Sports)"
  }
  for(type2 in part){
    for(training in c("pullup.rep", "pullup.weight", "hang.time", "hang.size", "bench.press", "bench.press.scaled", "dead.lift", "dead.lift.scaled", "front.lever", "height", "weight", "bmi")){
      ### Obtain the current variables label for using in the graph
      ylabel <- label(paste("clean.data", training, sep="$"))
      ### Paste the bouldering/routes together with indoors/
      ### outdoors or onsight/redpoint so variables and files can be constructed
      file.stub <- paste(type1, type2, sep="-")
      metric    <- paste(type1, type2, sep=".")
      file.out  <- paste("latex/figures/", gsub("\\.", "-", training) , "-", file.stub, ".png", sep="")
      png(file.out, width=1024, height=768)
      t <- qplot(metric, training,
                 data     = clean.data,
                 geom     = "boxplot",
                 fill     = factor(metric),
                 xlab     = xlabel,
                 ylab     = ylabel)
      t + opts(legend.position = "none")
      dev.off()
    }
  }
} 
```

所以目前我没有得到标签，也没有得到图表，因为命令（`label()`和`qplot()`）不知道我指的是带有数据框的列名`clean.data`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:23:15.880

这将起作用：

```
for(x in 1:10){
  my.label <- label(t[paste("X", x, sep="")])
  print(my.label)
} 
```

这会更简单：

```
label(t) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:23:21.933

嘿，这是一种“黑客”，但试试这个：

```
for (i in 1:10)    {
my.label <- label(t[,names(t)==paste("X", i, sep="")])
print(my.label)
} 
```

因此，不是将粘贴的材料转换为数据框列调用，而是将列名转换为字符串。当我尝试它时，它对我有用。

# jakarta-ee - 带有可移动控件的 SWT Composite（拖放）

> ID：13089211
> 
> 赞同：3
> 
> 时间：2012-10-26T14:49:50.597
> 
> 标签：jakarta-ee, drag-and-drop, swt

我正在尝试`DragAndDrop`在`ScrolledForm`具有多个可扩展`Sections`. 我应该能够在表格中移动部分，重新​​排序。

经过一些（大量）研究，我了解到我最好的机会是为`DragSource`and定义我自己的自定义传输`DropTarget`。

总而言之，你怎么能在 a`Control`中移动`Composite`？

**更新：**

好吧，所以。我`Sections`不再需要可扩展。它们是不同尺寸的“实心”部分。这缓解了我的问题，但并没有解决它。

我尝试了`Drag and Drop`，有和没有`Transfer`. 万能的互联网没有想过要实现这样的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:39:28.290

正如您所提到的，您必须实现`DragSource`and `DropTarget`。当您拖动 a`control`时，您实际上可以更改`cursor`为实际控件的图像（查看`Control.print(GC)`创建方法`Image`）。放置完成后，您需要做的就是更改`Control`.`(Control.setBounds (int x, int y, int width, int height) )`

由于您想以`Controls`自由形式布局，我建议您限制`Layout`在表单上设置任何内容，并且您必须手动计算并设置每个 child 的界限`Control`。

# c++ - MSVSP100D.dll 在窗口 8 中缺少使用 opencv 2.4.1

> ID：13089212
> 
> 赞同：2
> 
> 时间：2012-10-26T14:49:54.690
> 
> 标签：c++, visual-studio, opencv

我有以下情况：

我正在尝试在 Windows 8 中使用 Visual Studio 2012、opencv 2.4.1。然后当我尝试运行我的应用程序时，我收到以下消息错误：

![在此处输入图像描述](../Images/6fd6e81f3466f9ba14915c70ab0c3ad7.png)

我知道以前在 stackoverflow 中询问过有关丢失 MSVCP100D.dll 的问题，但发生了一些不同的事情：当我在计算机中查找 dll 时，我注意到我有一个 MSVCP110D.dll，这可能是第一个的更高版本。

有人可以回答这里发生了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T14:51:43.260

您没有安装 Visual C++ 2010 运行时。Visual Studio 2012 安装的是 11.0 版本，但您的 OpenCV 似乎已使用 Visual Studio 2010 编译，因此需要 2010 运行时 (10.0)。你应该可以从这里得到它：http: [//www.microsoft.com/en-us/download/details.aspx?id=14632](http://www.microsoft.com/en-us/download/details.aspx?id=14632)

因为它正在寻找**D**版本，所以您可以看到它是在 Debug 中构建的。从法律上讲，运行时库不能在调试中重新分发，因此您有以下选项：

*   安装 Visual Studio 2010（至少 VC++），这样您就拥有所需的文件。
*   在发布模式下编译 OpenCV（因此它不需要运行时的调试版本）。然后，您只需要安装 vcredist100 可再发行组件。

在部署应用程序的任何情况下，您都需要包含两个版本的 VC++ redists：应用程序版本 11 和 OpenCv 版本 10（这是强制性的）。

请注意，您*可能*无法在 Visual Studio 2010 和 12 之间链接二进制文件。

# c# - managedmetadata 字段中的 AfterProperties 和 BeforeProperties 根据语言返回不同的字符串

> ID：13089213
> 
> 赞同：2
> 
> 时间：2012-10-26T14:50:01.763
> 
> 标签：c#, sharepoint, sharepoint-2010

我在列表中有一个托管元数据列。英文值：布鲁塞尔法文：Bruxelles。

我需要在 ItemUpdating 事件中比较 before 和 after 属性。我知道之前不能使用，因为它会在项目更新中返回 null，所以我必须使用 properties.ListItem。

如果用户使用英文 UI，那么下面的代码可以正常工作，因为术语是相同的。

但是，如果用户选择法语，那么这将不起作用。因为后属性将是布鲁塞尔

```
private void ValidateAssignmentDate(SPItemEventProperties properties, SPListItem item)
        {
            string currentBudgetSection = properties.ListItem["BudgetSection"] == null ? string.Empty : properties.ListItem.GetTaxonomyFieldValue("BudgetSection").ValidatedString.ToString();
            string newBudgetSection = properties.AfterProperties["BudgetSection"].ToString();
            bool budgetSectionSame = newBudgetSection.Equals(currentBudgetSection);

            if(!budgetSectionSame))      
            {

//dosomething 
```

他的扩展方法是：（我不能改变扩展方法）

```
public static TaxonomyFieldValue GetTaxonomyFieldValue(this SPListItem item, string fieldName)
        {

            TaxonomyFieldValue returnValue = null;
            try
            {
                TaxonomyField taxonomyField = GetTaxonomyField(item, fieldName);
                if (taxonomyField != null && taxonomyField.Id != null)
                    returnValue = item[taxonomyField.Id] as TaxonomyFieldValue;
            }
            catch (Exception ex)
            {                   
                throw;
            }               
            return returnValue;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:48:48.847

我是这样修好的。[关于它的博客： http](http://levalencia.wordpress.com/) ://levalencia.wordpress.com/

```
string currentBudgetSection = properties.ListItem["BudgetSection"] == null ? string.Empty : properties.ListItem.GetTaxonomyFieldValueByLanguage(item.Web.Site, "BudgetSection", Thread.CurrentThread.CurrentUICulture.LCID).ToString();
            string newBudgetSection=string.Empty ;
            if (properties.AfterProperties["BudgetSection"] != null && !string.IsNullOrEmpty(properties.AfterProperties["BudgetSection"].ToString()))
            {
                 int startIndex = properties.AfterProperties["BudgetSection"].ToString().IndexOf("#")+1;
                 int endIndex = properties.AfterProperties["BudgetSection"].ToString().IndexOf("|");
                 int length = endIndex - startIndex;
                 newBudgetSection = properties.AfterProperties["BudgetSection"] == null ? string.Empty : properties.AfterProperties["BudgetSection"].ToString().Substring(startIndex, length);
            }

 bool budgetSectionSame = newBudgetSection.Equals(currentBudgetSection);
            if((!budgetSectionSame )
//do something 
```

# hadoop - Mahout Euclidean 实现中的 NaN 距离

> ID：13089214
> 
> 赞同：4
> 
> 时间：2012-10-26T14:50:06.897
> 
> 标签：hadoop, mahout, euclidean-distance

我们使用 EuclideanDistanceSimilarity 类来计算使用 Hadoop 的一堆项目的相似度。

不幸的是，尽管与项目高度相似，但一些项目得到的相似项目为零或很少。

我想我已经在 EuclideanDistanceSimilarity 类中追踪到了这一行：

`double euclideanDistance = Math.sqrt(normA - 2 * dots + normB);`

传递给 sqrt 的值有时为负数，在这种情况下返回 NaN。我想也许那里应该有一个 Math.abs ，但我的数学还不够强大，无法理解欧几里得计算是如何重新排列的，所以不确定效果会是什么。

谁能更好地解释数学并确认是否

`double euclideanDistance = Math.sqrt(Math.abs(normA - 2 * dots + normB));`

将是一个可以接受的修复？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T15:46:53.877

代码在`org.apache.mahout.math.hadoop.similarity.cooccurrence.measures. EuclideanDistanceSimilarity`.

是的，它是以这种方式编写的，因为在计算中它具有向量 A 和 B 的范数，以及它们的点积，因此以这种方式计算距离要快得多。

身份很简单。令 C = A - B 并令 a、b 和 c 为相应向量的长度。我们需要c。由余弦定理可知，c ² = a ² + b ² - 2ab· *cos* (θ)，而ab· *cos* (θ)就是点积的值。请注意，`normA`在代码中实际上是范数（长度）的平方——实际上应该更好地命名。

回到这个问题：你是对的，这里有一个错误，因为四舍五入会使论点变为否定。修复不是`abs()`，但是：

```
double euclideanDistance = Math.sqrt(Math.max(0.0, normA - 2 * dots + normB)); 
```

它只需要限制为 0。我可以承诺。

# c++ - 你用什么工具来分析你的 C++ 应用程序？

> ID：13089215
> 
> 赞同：5
> 
> 时间：2012-10-26T14:50:07.843
> 
> 标签：c++, c, linux, profiling, perf

我必须分析我的多线程 C++ 应用程序并找到它的瓶颈。问题是：我需要查看挂钟配置文件。我用过`oprofile`和`perf`。没有人可以向我提供这样的信息。

我使用过`perf record -g -e sched:sched_stat_sleep <cmd>`但`perf record`属于 SIGFPE 异常。这让我很生气。

`Valgrind`不适合我，因为我使用`fanotify_mark`了未在此工具中实现的系统调用。

我不确定谷歌是否`perftools`可以进行挂钟分析 - 我在他们的文档中没有看到任何信息。

任何人都可以建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:19:32.277

试试 PAPI [http://web.eecs.utk.edu/~terpstra/using_papi/](http://web.eecs.utk.edu/~terpstra/using_papi/)，它是一个开源分析器。我通常使用这个分析器来测量某些算法中的缓存性能（例如，未命中和访问）。也许它对你想要的也有用。

如果您有 MAC，请查看分析器“仪器”

# select - IE8 复选框或收音机选择

> ID：13089217
> 
> 赞同：-1
> 
> 时间：2012-10-26T14:50:19.567
> 
> 标签：select, checkbox, internet-explorer-8, radio

有什么方法可以在 Internet Explorer 8 中运行收音机或复选框

我认为解决方案可能是在 jquery 中使用一些值来模拟？

```
:active
:before
:after 
```

例如：http: [//jsfiddle.net/x5E3W/](http://jsfiddle.net/x5E3W/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:53:47.360

“运行”是指它在 IE 8 中应该具有相同的样式吗？由于该示例使用了许多 CSS3 功能（圆角、阴影），因此答案肯定是否定的。

# java - 我可以从建设者那里获得匿名课程吗？

> ID：13089221
> 
> 赞同：4
> 
> 时间：2012-10-26T14:50:26.237
> 
> 标签：java, builder-pattern

我知道在手动创建它的实例时可以创建一个匿名类，如下所示：

```
ClassName c = new ClassName() {
    public void overridenMethod() { method body }
} 
```

但是，有些类使用构建器模式来创建新实例。我的问题是是否有一个技巧可以让我使用其超类提供的构建器创建一个匿名类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T14:54:53.900

不，或者至少不是直接的：在 Java 中你不能从实例继承；你需要从一个类继承。

但是，您可以构建一个匿名类来*包装*从构建器返回的实例。您可以根据需要调用包装实例上的方法，同时覆盖您需要覆盖的方法。

```
final ClassName wrapped = builder.buildClassName();
ClassName c = new ClassName() {
    public void passedThroughMethod1() { wrapped.passedThroughMethod1() }
    public void overridenMethod() { method body }
    public void passedThroughMethod2() { wrapped.passedThroughMethod2() }
}; 
```

此时，`c`行为就像`wrapped`实例一样，除了`overridenMethod`. 一个不幸的后果是您无法访问`wrapped`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:17:26.283

如果我理解正确的问题，您希望构建器返回匿名类型的实例。如果是这种情况，我会`create`在基类中添加一个方法，构建器调用该方法来创建新实例。在您的派生类覆盖`create`以返回匿名类的实例。这假定构建器可以访问基类的实例。另一种机制是提供`Supplier`给建造者。

[供应商](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Supplier.html)

# excel - Excel/openoffice Calc 嵌套 if 语句的问题

> ID：13089223
> 
> 赞同：0
> 
> 时间：2012-10-26T14:50:31.580
> 
> 标签：excel, if-statement, calc

我几乎没有在 Excel 中处理公式的经验，但我正在尝试为无法让宏工作的人一起破解一些东西。

本质上，我已经完成了一组数据的排序列表，并且需要抓取前四项。使用 VLookup 或 Index 似乎是最有意义的，但是表格的格式（由于各种原因我无法更改）似乎我无法让它们工作（如果我可以切换它们中的列/行定义，然后我可以，但我不确定我是否可以/如何）。因此，无论如何，我已经将这个长嵌套的 if 语句放在一起应该可以解决问题，但是它给我一个缺少元素的 509 错误。我已经做了几乎所有我能想到的事情来弄清楚发生了什么，但没有运气。

所以这里是：

```
=IF(AO2=13, D2, IF(AP2=13, E2, IF(AQ2=13, F2, IF(AR2=13, G2, IF(AS2=13, H2, IF(AT2=13, I2, IF(AU2=13, J2, IF(AV2=13, K2, IF(AW2=13, L2, IF(AX1=13, M2, IF(AY2=13, N2, IF(AZ2=13, O2, IF(BA2=13, P2, "foo"))))))))))))) 
```

其中 A02... 值是排序列表（因此索引号 13 对应于 D2:P2 中的最大值），而 D2... 是我希望它返回的相应值列表。

我想知道是否有人可以快速看一下，看看是否有什么东西跳出来。我确定它是愚蠢的和/或结构性的，但我无法让它发挥作用。

PS - 我在 .xlsx 文件上使用 Calc，但我很确定这应该没有什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:56:49.857

我看到的第一件事是您的公式正在引用

```
IF(AX1=13, M2, 
```

我敢肯定你的意思是：

```
IF(AX2=13, M2, 
```

但这可以提高效率 - 最简单的方法之一（并且有很多）是 SUMIF 函数。鉴于 AO2:BA2 中只有一个值等于 13，您可以编写如下内容：

```
=SUMIF(AO2:BA2,13,D2:P2) 
```

但是，就像我说的，有很多方法可以获得这个解决方案——这取决于你想要完成什么......

# memory - 内存内容模式

> ID：13089228
> 
> 赞同：1
> 
> 时间：2012-10-26T14:50:46.133
> 
> 标签：memory, operating-system

在内存中程序代码是只执行的并且数据区域是只读的，这是否正确。从来都不是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:54:39.290

实际上很少出现这种情况，尤其是当您正在查看 Microsoft Windows 或 Linux 等主流操作系统时。

恶意软件的一个非常常见的攻击向量是[缓冲区溢出](http://en.wikipedia.org/wiki/Buffer_overflow)，恶意攻击者借此强制程序写入数据结构的末尾，并覆盖程序代码。

您还可以编写[自我修改程序](http://en.wikipedia.org/wiki/Self-modifying_code)，用新代码覆盖自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:27:55.610

在现代操作系统中，默认启用 W xor X。但是，很容易将页面保护更改为同时允许 W 和 X。

# html - 使用 Joomla 加载另一个样式表

> ID：13089231
> 
> 赞同：-3
> 
> 时间：2012-10-26T14:50:53.310
> 
> 标签：html, css, joomla

我在 Joomla 中建立了一个网站。设计确实依赖于背景图像，因此我需要为每个屏幕分辨率提供一个图像。我听说有一种简单的方法可以做到这一点，例如`<link>`在头部添加一个标签。但我不知道怎么做。其次，我不知道将我的 css 文件放在我的 FTP 方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T11:49:38.180

把自己打昏 ：

[http://extensions.joomla.org/extensions/style-a-design/page-background](http://extensions.joomla.org/extensions/style-a-design/page-background)

这就是扩展目录的用途！

# asp.net-mvc-3 - 在带有 EnterpriseLibary 5.0 的 ASP.NET 3.5 ASPX 页面中使用 ScriptManager

> ID：13089232
> 
> 赞同：0
> 
> 时间：2012-10-26T14:50:55.737
> 
> 标签：asp.net-mvc-3, enterprise-library, reportviewer, enterprise-library-5

我正在一个 MVC3 应用程序中工作，该应用程序引用了使用 Microsoft Enterprise Library 版本 5 的程序集。

我正在做一个关于使用 ReportViewer 创建报告的研究项目。我了解到 ReportViewer 不能在 Razor 视图中使用，所以我必须使用 ASPX 页面。页面如下：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Index.aspx.cs" Inherits="Test.BirthdayReport.BirthdayReport" %>

<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title>Birthday Report</title>
    </head>
    <body>
        <form id="form1" runat="server">
        <div>
            <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
            <rsweb:ReportViewer ID="ReportViewer1" runat="server" Width="100%">                        </rsweb:ReportViewer>
        </div>
        </form>
    </body>
</html> 
```

为了使用 ReportViewer，我必须包含 ScriptManager，但是当页面加载时我收到此错误：

> 无法加载文件或程序集“Microsoft.Practices.EnterpriseLibrary.Common，Version=4.1.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

我知道我不能在 bin 目录中同时拥有 4.0 和 5.0 EnterpriseLibrary 程序集，所以我尝试在项目中添加对 5.0 版本的 Microsoft.Practices.EnterpriseLibrary.Common 的引用，但我仍然得到相同的错误。

如何将 ScriptManager 与 EnterpriseLibary 5.0 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:19:58.677

我们的另一个程序集（在 Web 应用程序中使用）是引用 EnterpriseLibrary.Common 5、EnterpriseLibrary.Logging 5、EnterpriseLibrary.Data 4.1 和 EnterpriseLibrary.Logging.Database 4.1。

一旦我确定这个程序集引用了所有这些程序集的 5.0 版本，我的错误就停止了。

# python - 用 Python 替换文件中的文本

> ID：13089234
> 
> 赞同：34
> 
> 时间：2012-10-26T14:50:56.087
> 
> 标签：python, string, file, replace

我是 Python 新手。我希望能够打开一个文件并通过 Python 用给定的替换替换某些单词的每个实例。例如，将每个单词“zero”替换为“0”，将“temp”替换为“bob”，将“garbage”替换为“nothing”。

我第一次开始使用这个：

```
for line in fileinput.input(fin):
        fout.write(line.replace('zero', '0'))
        fout.write(line.replace('temp','bob'))
        fout.write(line.replace('garbage','nothing')) 
```

但我认为这不是一种更正确的方法。然后我考虑使用 if 语句来检查该行是否包含这些项目，如果包含，则替换该行包含哪一个，但据我对 Python 的了解，这也不是一个真正理想的解决方案。我很想知道最好的方法是什么。提前谢谢！

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-10-26T14:58:06.390

这应该这样做

```
replacements = {'zero':'0', 'temp':'bob', 'garbage':'nothing'}

with open('path/to/input/file') as infile, open('path/to/output/file', 'w') as outfile:
    for line in infile:
        for src, target in replacements.items():
            line = line.replace(src, target)
        outfile.write(line) 
```

**编辑**：为了解决[Eildosa 的评论](https://stackoverflow.com/questions/13089234/replacing-text-in-a-file-with-python/13089373?noredirect=1#comment49137404_13089373)，如果您想在不写入另一个文件的情况下执行此操作，那么您最终将不得不将整个源文件读入内存：

```
lines = []
with open('path/to/input/file') as infile:
    for line in infile:
        for src, target in replacements.items():
            line = line.replace(src, target)
        lines.append(line)
with open('path/to/input/file', 'w') as outfile:
    for line in lines:
        outfile.write(line) 
```

**编辑：**如果您使用的是 Python 2.x，请使用`replacements.iteritems()`而不是`replacements.items()`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-21T23:20:57.213

如果您的文件很短（甚至不是很长），您可以使用以下代码段来替换文本：

```
# Replace variables in file
with open('path/to/in-out-file', 'r+') as f:
    content = f.read()
    f.seek(0)
    f.truncate()
    f.write(content.replace('replace this', 'with this')) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-26T15:00:42.800

我可能会考虑使用`dict`and`re.sub`来做这样的事情：

```
import re
repldict = {'zero':'0', 'one':'1' ,'temp':'bob','garage':'nothing'}
def replfunc(match):
    return repldict[match.group(0)]

regex = re.compile('|'.join(re.escape(x) for x in repldict))
with open('file.txt') as fin, open('fout.txt','w') as fout:
    for line in fin:
        fout.write(regex.sub(replfunc,line)) 
```

这有一个轻微的优势`replace`，因为它对重叠匹配更加健壮。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-26T14:56:45.083

基本的方法是

*   `read()`,
*   `data = data.replace()`只要你需要，然后
*   `write()`.

如果您一次读取和写入整个数据或以较小的部分读取和写入数据，则取决于您。您应该使其取决于预期的文件大小。

`read()`可以用对文件对象的迭代替换。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-26T15:08:12.773

更快的写作方式将是......

```
in = open('path/to/input/file').read()
out = open('path/to/input/file', 'w')
replacements = {'zero':'0', 'temp':'bob', 'garbage':'nothing'}
for i in replacements.keys():
    in = in.replace(i, replacements[i])
out.write(in)
out.close 
```

这消除了其他答案建议的许多迭代，并将加快处理更长文件的过程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T16:09:28.987

从标准输入读取，编写“code.py”如下：

```
import sys

rep = {'zero':'0', 'temp':'bob', 'garbage':'nothing'}

for line in sys.stdin:
    for k, v in rep.iteritems():
        line = line.replace(k, v)
    print line 
```

[然后，使用重定向或管道（ http://en.wikipedia.org/wiki/Redirection_(computing)](http://en.wikipedia.org/wiki/Redirection_%28computing%29)）执行脚本

```
python code.py < infile > outfile 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-03-05T02:16:38.820

这是我刚刚使用的一个简短的示例：

如果：

```
fp = open("file.txt", "w") 
```

然后：

```
fp.write(line.replace('is', 'now'))
// "This is me" becomes "This now me" 
```

不是：

```
line.replace('is', 'now')
fp.write(line)
// "This is me" not changed while writing 
```

# eclipse - 无法在 elcpse w/android 中使用默认程序。（标签+滑动）

> ID：13089237
> 
> 赞同：2
> 
> 时间：2012-10-26T14:51:18.553
> 
> 标签：eclipse

我是android新手，所以我可能有一个愚蠢的时刻。我不这么认为，因为在整个互联网上，其他人都很好。我正在尝试`tabs + swipe`使用 android 在 eclipse 中使用默认导航。我正在创建一个需要使用标签的 android 应用程序，我认为人们自然希望能够滑动。

我一直无法让 eclipse 加载的默认包正常工作。即使在遵循其他人已经在多个站点上完成的操作之后。雪上加霜的是，我几乎永远无法让图形 gui 出现在 eclipse 中（在任何程序上，而不仅仅是`tab + swipe`.

我发现您必须选择`theme`下拉菜单，这显然适用于所有人。但是对我来说不是。我可以坐在那里选择屏幕尺寸，然后来回选择方向大约一分钟，然后神奇地出现了！如果我离开该屏幕去编辑`.java`文件或任何文件，当我回来时，gui 又会丢失！它几乎无法使用。我已经尝试重新安装。`T`在安装 eclipse 和 android adt 时， 我遵循了所有说明。

我有带有 Eclipse 经典的 Windows 7 64 位。截至昨天（25 日）所有软件的当前版本。

有没有其他人有这个问题？

谢谢。

# html - CSS3渐变对角线如何应用？

> ID：13089238
> 
> 赞同：1
> 
> 时间：2012-10-26T14:51:18.313
> 
> 标签：html, css, button, gradient

我需要创建这样一个响应式按钮：

[http://666kb.com/i/c8fo3yb8fna7ji17u.jpg](http://666kb.com/i/c8fo3yb8fna7ji17u.jpg)

我只是想在 css3 中重新创建它，因为当我将它嵌入为图像时，它没有响应。

但是正如你所看到的，它只有左上角的渐变，那我怎么实现呢？

我使用了几个梯度生成器，但没有一个起作用。

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T14:59:28.853

我发现了这个，效果很好。[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

我得到了一些可以用作模板的代码。

```
background: #1e5799; /* Old browsers */

background: -moz-linear-gradient(-45deg,  #1e5799 0%, #2989d8 50%, #207cca 63%, #7db9e8 100%); /* FF3.6+ */

background: -webkit-gradient(linear, left top, right bottom, color-stop(0%,#1e5799), color-stop(50%,#2989d8), color-stop(63%,#207cca), color-stop(100%,#7db9e8)); /* Chrome,Safari4+ */

background: -webkit-linear-gradient(-45deg,  #1e5799 0%,#2989d8 50%,#207cca 63%,#7db9e8 100%); /* Chrome10+,Safari5.1+ */

background: -o-linear-gradient(-45deg,  #1e5799 0%,#2989d8 50%,#207cca 63%,#7db9e8 100%); /* Opera 11.10+ */

background: -ms-linear-gradient(-45deg,  #1e5799 0%,#2989d8 50%,#207cca 63%,#7db9e8 100%); /* IE10+ */

background: linear-gradient(135deg,  #1e5799 0%,#2989d8 50%,#207cca 63%,#7db9e8 100%); /* W3C */

filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-24T12:13:59.993

这是在模板中获得正确渐变对角线样式的方法：

```
background: linear-gradient(-40deg, #4378bf 18%,#3689ce 48%,#428fd0 59%,#8fb3da 100%); 
```

# php - Preg_match 在尝试获取字符串中的数字时不起作用

> ID：13089239
> 
> 赞同：1
> 
> 时间：2012-10-26T14:51:19.763
> 
> 标签：php, regex, preg-match

嗯..我的意思是我不能让它工作......所以这就是我所做的......

```
$url = 'http://test/test/9244349';
$test = preg_match('#\d*#', $url, $matches); 
```

数组（大小=1）0 => 字符串''（长度=0）

我只想抓住“9244349”，但我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:54:41.993

尝试用 替换`*`，`+`如果你想匹配数字，那么匹配的模式没有意义，零数字也是如此，是吗？

```
preg_match('/\d+/','http://test/test/9244349',$matches);
echo $matches[0];//output:9244349 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:59:52.887

让我们玩正则表达式引擎：

*   `\d*`表示任意位数。包括零。
*   我们从字符串的开头开始。我们看到一个`h`.
*   `h`不匹配`\d`。
*   但是 - 我们也可以匹配`\d`. 所以匹配*之前* `h`的空字符串。
*   我们已经到了正则表达式的末尾，并且找到了匹配项。
*   成就解锁！
*   （当然，这是零个字符的匹配，但没关系。Perl 兼容的正则表达式将始终返回最左边的可能匹配，即使字符串中可能有更多匹配可能更长）。

因此，正如其他帖子中提到的，将 更改`*`为`+`强制至少一位数字匹配，然后其余的将随之而来。

你也可以使用`preg_match_all()`，但是你会得到很多空匹配，两个非数字之间的每个位置一个......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T14:54:27.183

更改`*`为`+`，它将起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T14:55:24.070

这是[**基本名称**](http://php.net/manual/en/function.basename.php)

```
echo basename($url); 
```

# jakarta-ee - 在为 CQ5.4 应用程序编写 JUnit 测试用例时需要帮助

> ID：13089240
> 
> 赞同：1
> 
> 时间：2012-10-26T14:51:26.203
> 
> 标签：jakarta-ee, junit, aem, sling

我正在使用 JMockito 和 sling commons testing api 为 CQ5 应用程序编写 JUnit 测试用例。我能够模拟请求参数。我的实际 java 方法有一些逻辑来迭代请求参数映射，例如 requestParamMapObj.keySet().iterator() 并获取一些节点属性。但是当我运行单元测试用例时，所述 keySet 迭代器没有被执行并抛出目标调用即使是 requestParamMapObj 也有异常数据。

这是我第一次为内容管理应用程序编写 JUnit 测试用例。

任何帮助都是非常可观的。

这是我的测试方法代码：

```
this.context.checking(new Expectations() {
    { 
        this.one(mockRequest).getRequestParameterMap();
        this.will(returnValue(paramsMap)); 
    } 
}); 
```

当 Junit 到达下面的代码时，它会抛出目标调用异常。

```
private Map<String, String> getAllAnswers(final RequestParameterMap reqParamMap) { 
    final Iterator<String> keySetIterator1 = reqParamMap.keySet().iterator();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:40:14.590

查看完整代码会很有帮助，但根据您列出的内容和到目前为止的评论，听起来您可能需要设置调用 keySet() 方法时会发生什么的预期。我怀疑您可能已经模拟了 ParameterMap 对象，但可能没有设置对该 ParameterMap 的期望，以便在调用它的 keySet 方法时它会知道要做什么/返回。同样，我只是在猜测，但我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:40:22.683

是的，肖恩。你是对的，当我为 keySet() 方法设置期望时，它正在被调用。this.allowing(paramsMap).keySet(); 但我的问题是，我们需要为每一种行为设定期望。这是否有意义，我的意思是单元测试代码变得比实际的java代码更多:)。我们是否有任何替代解决方案，以便我们可以减少测试代码。

```
 this.allowing(resource).adaptTo(Node.class);
            this.will(returnValue(node));

            this.allowing(node).hasNode("voting");
            this.will(returnValue(true));

            allowing(repository).loginAdministrative(null);
            will(returnValue(session));

            allowing(session).getWorkspace();
            will(returnValue(workspace));

            allowing(workspace).getQueryManager();
            will(returnValue(queryManager)); 
```

# c# - 在 VS2010 Express 中安装 MathNet.Numerics 时遇到问题，缺少 System.Numerics？

> ID：13089241
> 
> 赞同：2
> 
> 时间：2012-10-26T14:51:26.653
> 
> 标签：c#, visual-studio-2010, nuget-package, linear-regression

我是新来的，刚刚开始编写我的第一个 Windows Phone 7 应用程序。具体来说，我需要对一些数据进行线性回归以获得简单的 y=Ax^2+Bx+C 最佳拟合曲线。经过一番搜索后，我计划按照我找到的示例使用 MathNet.Numerics。

但是，当我在 NuGet 包管理器中运行时： PM> Install-Package MathNet.Numerics

安装失败，出现以下错误：

安装包：无法添加对“System.Numerics”的引用。请确保它在全局程序集缓存中。

在行：1 字符：16

*   安装包 <<<< MathNet.Numerics

    *   CategoryInfo : NotSpecified: (:) [Install-Package], InvalidOperationException
    *   FullyQualifiedErrorId : uGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand

我认为第一个明显的步骤是将 System.Numerics 添加到我的项目中，但它不存在于“添加引用”菜单（或我计算机上的任何位置）中。我原以为它包含在 .NET 4.0 中。所以我想我有几个问题：

*   我的项目配置不正确吗？
*   有没有比 www.dllme.com 更官方的下载 System.Numerics 的方式？或者这是获取官方微软软件包的正常方式？
*   或者，是否有人对可以进行简单线性回归的轻型数学库提出建议？我想我可以停止偷懒，自己写，但我宁愿使用我知道写正确的一个。

谢谢！

**编辑：** 所以我被告知 Windows 手机不存在 System.Numerics。我做了一些更多的搜索，发现这个写得很好的类来解决我的问题，我想我会把链接放在这里以防其他人发现它有用： http: [//www.codeproject.com/Articles/63170/Least-Squares - 二次曲线拟合回归](http://www.codeproject.com/Articles/63170/Least-Squares-Regression-for-Quadratic-Curve-Fitti)

我仍然有点困惑，因为这个官方页面似乎暗示 MathNet.Numerics 在 Windows Phone 上运行良好。我仍然有兴趣让该库在手机上运行以满足我的好奇心： http: [//msdn.microsoft.com/en-us/library/hh304363 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/hh304363(v=vs.100).aspx)

# java - 在 LinkedList 中添加字节时出错

> ID：13089242
> 
> 赞同：0
> 
> 时间：2012-10-26T14:51:26.863
> 
> 标签：java

为什么我不能这样做：

```
Byte b = new Byte("0");

LinkedList<Byte> begin = new LinkedList<Byte>().add(b); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T14:52:30.057

因为 的结果`new LinkedList().add(b);`不是`LinkedList`. 它是`boolean`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T14:53:10.950

尝试

```
List<Byte> begin = new LinkedList<Byte>();
byte b = 0;
begin.add(b); 
```

如果你想要一个字节集合，那么有许多集合可以更有效地执行此操作。例如，一个 LinkedList 将使用您添加的每个字节大约 20 个字节。尝试使用

*   ArrayList（每个实际字节 4 个字节），
*   ByteArrayOutputStream（每字节 1 个字节）和 ByteArrayInputStream（每字节 1 个字节）或
*   ByteBuffer（每字节 1 个字节）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T14:53:13.320

**新的 LinkedList().add(b);** 不返回链表对象尝试

```
Byte b = new Byte("0");
LinkedList<Byte> list= new LinkedList<Byte>();
list.add(b); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T14:53:14.833

```
LinkedList<Byte> begin = new LinkedList<Byte>()
begin.add(b); 
```

# c++ - 具有 GSL、LAPACK 或 CBLAS 等数学库的 C++ 与具有 R 函数的 Rinside 的 C++ 性能对比？

> ID：13089243
> 
> 赞同：1
> 
> 时间：2012-10-26T14:51:29.363
> 
> 标签：c++, r, lapack, gsl, rinside

有没有人做过直接的苹果对苹果比较：

1.  使用 RInside 调用在 R 函数中完成的算法的 C++ 应用程序
2.  一个 C++ 应用程序调用等价算法，但使用 GSL、LAPACK 或 CBLAS 等数学库之一？

我正在尝试获得更快的基准。我也对什么样的并行化/多线程设计感兴趣，可以使 C++ 中的计算更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:13:00.070

除了初始化 R 的启动成本（您只能在案例 1）中通过研究设计获得，结果应该是相同的，因为如果构建正确*，R 本身使用完全相同的 BLAS 和 LAPACK 库。*

我有一个待更新的包/小插图，它为这些问题提出了一个基准测试框架，因为这个问题很容易被误解——请参阅[gcbd 的 CRAN 页面](http://cran.r-project.org/package=gcbd)以及[相应的 pdf vignette](http://cran.r-project.org/web/packages/gcbd/vignettes/gcbd.pdf)。

如果您以不同的方式构建 R（例如，静态构建，或使用其自己的 BLAS / LAPACK 源），那么您会得到不同的结果，但您也不会进行苹果对苹果的比较。

# jquery - jquery星级评分获取价值收音机隐藏

> ID：13089246
> 
> 赞同：2
> 
> 时间：2012-10-26T14:51:35.333
> 
> 标签：jquery

我使用星级[http://www.fyneworks.com/jquery/star-rating/](http://www.fyneworks.com/jquery/star-rating/)

我不明白如何在提交表单后获取用户检查的隐藏收音机的值

这里的代码：

```
 <div class="line mrgT mrgB" id="starVin">
            <input name="star1" type="radio" class="star" value="1" />
            <input name="star1" type="radio" class="star" value="2" />
            <input name="star1" type="radio" class="star" value="3" />
            <input name="star1" type="radio" class="star" value="4" />
            <input name="star1" type="radio" class="star" value="5" />
        </div> 
```

我试试这个

```
alert( $('#formComent .star1:checked').val() ); 
```

不工作...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T14:54:13.847

您将需要`[name="star1"]`在选择器中使用，因为它是名称，或者`.star`因为它是类，而不是`star1`. 您的 表单上可能有一个 ID `formComment`，但由于它不包含在您的示例中，因此也可以`starVin`在选择器中使用：

```
jQuery.noConflict();
alert( jQuery('#starVin input[name="star1"]:checked').val() ); 
```

或者

```
alert( jQuery('#starVin .star:checked').val() ); 
```

[http://jsfiddle.net/tayNH/](http://jsfiddle.net/tayNH/)

如果你想测试`checked`你可以使用以下`is()`方法：

```
$('#starVin input[name="star1"]').each(function(){ alert($(this).is(':checked')); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:06:25.680

根据您的标记，我认为您想要`$('#starVin input[name="star1"].star:checked').val()`（将容器 div 的 id 从 '#formComent' 更改为 '#starVin'，添加名称特异性 '[name="star1"]' 并将 ':checked' 过滤器移动到选择器中，*然后*获取价值。

[有关工作示例，请参阅我的 jsfiddle](http://jsfiddle.net/jhfrench/qH9Je/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-19T11:49:07.100

如果有评级星，作为单选按钮，要获取该评级星的值，我编写了以下代码。它对我来说很好。这是我的 html 和 jquery 代码。

```
<fieldset class="rating">
    <input type="radio" class="get_value" id="star5" name="rating" value="5" /><label class = "full" for="star5" title="Awesome - 5 stars"></label>
    <input type="radio" class="get_value" id="star4half" name="rating" value="4 and a half" /><label class="half" for="star4half" title="Pretty good - 4.5 stars"></label>
    <input type="radio" class="get_value" id="star4" name="rating" value="4" /><label class = "full" for="star4" title="Pretty good - 4 stars"></label>
    <input type="radio" class="get_value"id="star3half" name="rating" value="3 and a half" /><label class="half" for="star3half" title="Meh - 3.5 stars"></label>
    <input type="radio" class="get_value" id="star3" name="rating" value="3" /><label class = "full" for="star3" title="Meh - 3 stars"></label>
    <input type="radio" class="get_value" id="star2half" name="rating" value="2 and a half" /><label class="half" for="star2half" title="Kinda bad - 2.5 stars"></label>
    <input type="radio" class="get_value" id="star2" name="rating" value="2" /><label class = "full" for="star2" title="Kinda bad - 2 stars"></label>
    <input type="radio" class="get_value" id="star1half" name="rating" value="1 and a half" /><label class="half" for="star1half" title="Meh - 1.5 stars"></label>
    <input type="radio" class="get_value" id="star1" name="rating" value="1" /><label class = "full" for="star1" title="Sucks big time - 1 star"></label>
    <input type="radio" class="get_value" id="starhalf" name="rating" value="half" /><label class="half" for="starhalf" title="Sucks big time - 0.5 stars"></label>
</fieldset>

<script>
var star_rating = 0;
$(".get_value").click(function () {
    if($(this).prop("checked")) {
        star_rating = $(this).val();
        console.log(star_rating);
    }
});
</script> 
```

# javascript - javascript 原型链：Rectangle.prototype = new Shape() 还是 Rectangle.prototype = Shape？

> ID：13089250
> 
> 赞同：0
> 
> 时间：2012-10-26T14:51:47.413
> 
> 标签：javascript, inheritance, prototype

我看到了两种不同的模式和解释。一个来自 DailyJS 和许多其他： Rectangle.prototype = new Shape();

然后是 Crockford's [here](http://javascript.crockford.com/prototypal.html)，这意味着 Rectangle.prototype = Shape;

现在从理论上讲，为什么需要运行“新”？它运行构造函数，是的。它还将矩形的原型分配给形状的原型。但是我们应该能够通过简单地将父代分配到原型中来进行继承。

我想知道原因是否是原型链接。看来，在案例 1 中，它将创建一个原型**链**。这意味着， Rectangle 原型将具有 Shape**原型**。在第二种情况下，矩形的原型将只有 Shape 的方法——但没有 Shape 的**原型**方法。

那正确吗？非常感谢您的任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T14:54:44.693

> [克罗克福德](http://javascript.crockford.com/prototypal.html)，这意味着只是`Rectangle.prototype = Shape;`

我真的看不出来。

> 现在从理论上讲，为什么需要运行“新”？它运行构造函数，是的。

然而我们实际上并不需要（想要）那个，我们只需要从`Shape.prototype`

> 它还将矩形的原型分配给形状的原型。

并不真地。`new Shape`创建一个继承自的*新对象*`Shape.prototype`，这对我们来说很重要。你说得对。

> 在第二种情况下，矩形的原型将只有 Shape 的方法——但没有 Shape 的原型方法。

对，那是正确的。您应该继承自`Shape.prototype`- 但 via `Object.create(Shape.prototype)`，而不是通过创建实例。请参阅[JavaScript 继承：Object.create vs new](https://stackoverflow.com/q/13040684/1048572)或[What is the reason [not] to use the 'new' keyword here？](https://stackoverflow.com/q/12592913/1048572). 这就是 Crockford 实际所做的——甚至在`Object.create`EcmaScript 5.1 引入之前，他就找到了一种巧妙的方法来使用他的辅助函数来做到这一点

```
function object(o) {
    function F() {}
    F.prototype = o;
    return new F();
} 
```

这现在是`Object.create`本机不支持它的浏览器中的常见填充程序。

# mysql - 层次结构中的 MySQL 世界数据库

> ID：13089255
> 
> 赞同：1
> 
> 时间：2012-10-26T14:51:58.873
> 
> 标签：mysql, algorithm, hierarchical-data, graph-algorithm, topological-sort

我正在尝试将 MySQL 世界数据库转换为缩进格式，以便与[Drupal Taxonomy Manager](http://drupal.org/project/taxonomy_manager)一起使用。我有一个平面电子表格格式的层次结构：[world_hierarchy.xlsx](http://www.mediafire.com/?d5bukzkg7wmlojm)。

我需要以这种格式输出该文件的层次结构：

```
Region
-Continent
--Country
---City 
```

因此，树的随机样本如下所示：

```
Central America
-North America
--Panama
---San Miguelito
Eastern Africa
-Africa
--British Indian Ocean Territory
--Ethiopia
---Nazret 
```

任何节点都不应在树中出现一次以上（例如，中美洲应该只出现一次，其子节点也应如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T23:23:46.253

我最终使用按大陆订购电子表格并切掉了地区和城市（我将使用自动完成将这个开放式结束，以便用户可以添加他们的城市。我使用分类管理器模块中的导出到 CSV 功能导出了结构和想出了这个（分号分隔）：

```
"5";"364";"Africa";"";"0"
"5";"394";"Algeria";"";"364"
"5";"365";"Angola";"";"364"
"5";"406";"Benin";"";"364"
"5";"401";"Botswana";"";"364"
"5";"374";"British Indian Ocean Territory";"";"364"
"5";"407";"Burkina Faso";"";"364"
"5";"375";"Burundi";"";"364"
"5";"366";"Cameroon";"";"364"
"5";"408";"Cape Verde";"";"364"
"5";"409";"CÃ´te dâ€™Ivoire";"";"364"
"5";"367";"Central African Republic";"";"364"
"5";"368";"Chad";"";"364"
"5";"376";"Comoros";"";"364"
"5";"369";"Congo";"";"364"
"5";"370";"Congo, The Democratic Republic of the";"";"364"
"5";"377";"Djibouti";"";"364"
"5";"395";"Egypt";"";"364"
"5";"371";"Equatorial Guinea";"";"364"
"5";"378";"Eritrea";"";"364"
"5";"379";"Ethiopia";"";"364"
"5";"372";"Gabon";"";"364"
"5";"410";"Gambia";"";"364"
"5";"411";"Ghana";"";"364"
"5";"412";"Guinea";"";"364"
"5";"413";"Guinea-Bissau";"";"364"
"5";"380";"Kenya";"";"364"
"5";"402";"Lesotho";"";"364"
"5";"414";"Liberia";"";"364"
"5";"396";"Libyan Arab Jamahiriya";"";"364"
"5";"381";"Madagascar";"";"364"
"5";"382";"Malawi";"";"364"
"5";"415";"Mali";"";"364"
"5";"416";"Mauritania";"";"364"
"5";"383";"Mauritius";"";"364"
"5";"384";"Mayotte";"";"364"
"5";"397";"Morocco";"";"364"
"5";"385";"Mozambique";"";"364"
"5";"403";"Namibia";"";"364"
"5";"417";"Niger";"";"364"
"5";"418";"Nigeria";"";"364"
"5";"386";"RÃ©union";"";"364"
"5";"387";"Rwanda";"";"364"
"5";"419";"Saint Helena";"";"364"
"5";"373";"Sao Tome and Principe";"";"364"
"5";"420";"Senegal";"";"364"
"5";"388";"Seychelles";"";"364"
"5";"421";"Sierra Leone";"";"364"
"5";"389";"Somalia";"";"364"
"5";"404";"South Africa";"";"364"
"5";"398";"Sudan";"";"364"
"5";"405";"Swaziland";"";"364"
"5";"390";"Tanzania";"";"364"
"5";"422";"Togo";"";"364"
"5";"399";"Tunisia";"";"364"
"5";"391";"Uganda";"";"364"
"5";"400";"Western Sahara";"";"364"
"5";"392";"Zambia";"";"364"
"5";"393";"Zimbabwe";"";"364"
"5";"423";"Antarctica";"";"0"
"5";"424";"Antarctica";"";"423"
"5";"425";"Bouvet Island";"";"423"
"5";"426";"French Southern territories";"";"423"
"5";"427";"Heard Island and McDonald Islands";"";"423"
"5";"428";"South Georgia and the South Sandwich Islands";"";"423"
"5";"429";"Asia";"";"0"
"5";"467";"Afghanistan";"";"429"
"5";"438";"Armenia";"";"429"
"5";"439";"Azerbaijan";"";"429"
"5";"440";"Bahrain";"";"429"
"5";"468";"Bangladesh";"";"429"
"5";"469";"Bhutan";"";"429"
"5";"456";"Brunei";"";"429"
"5";"457";"Cambodia";"";"429"
"5";"430";"China";"";"429"
"5";"441";"Cyprus";"";"429"
"5";"458";"East Timor";"";"429"
"5";"442";"Georgia";"";"429"
"5";"431";"Hong Kong";"";"429"
"5";"470";"India";"";"429"
"5";"459";"Indonesia";"";"429"
"5";"471";"Iran";"";"429"
"5";"443";"Iraq";"";"429"
"5";"444";"Israel";"";"429"
"5";"432";"Japan";"";"429"
"5";"445";"Jordan";"";"429"
"5";"472";"Kazakstan";"";"429"
"5";"446";"Kuwait";"";"429"
"5";"473";"Kyrgyzstan";"";"429"
"5";"460";"Laos";"";"429"
"5";"447";"Lebanon";"";"429"
"5";"433";"Macao";"";"429"
"5";"461";"Malaysia";"";"429"
"5";"474";"Maldives";"";"429"
"5";"434";"Mongolia";"";"429"
"5";"462";"Myanmar";"";"429"
"5";"475";"Nepal";"";"429"
"5";"435";"North Korea";"";"429"
"5";"448";"Oman";"";"429"
"5";"476";"Pakistan";"";"429"
"5";"449";"Palestine";"";"429"
"5";"463";"Philippines";"";"429"
"5";"450";"Qatar";"";"429"
"5";"451";"Saudi Arabia";"";"429"
"5";"464";"Singapore";"";"429"
"5";"436";"South Korea";"";"429"
"5";"477";"Sri Lanka";"";"429"
"5";"452";"Syria";"";"429"
"5";"437";"Taiwan";"";"429"
"5";"478";"Tajikistan";"";"429"
"5";"465";"Thailand";"";"429"
"5";"453";"Turkey";"";"429"
"5";"479";"Turkmenistan";"";"429"
"5";"454";"United Arab Emirates";"";"429"
"5";"480";"Uzbekistan";"";"429"
"5";"466";"Vietnam";"";"429"
"5";"455";"Yemen";"";"429"
"5";"481";"Europe";"";"0"
"5";"504";"Albania";"";"481"
"5";"505";"Andorra";"";"481"
"5";"519";"Austria";"";"481"
"5";"487";"Belarus";"";"481"
"5";"520";"Belgium";"";"481"
"5";"506";"Bosnia and Herzegovina";"";"481"
"5";"488";"Bulgaria";"";"481"
"5";"507";"Croatia";"";"481"
"5";"489";"Czech Republic";"";"481"
"5";"497";"Denmark";"";"481"
"5";"482";"Estonia";"";"481"
"5";"498";"Faroe Islands";"";"481"
"5";"499";"Finland";"";"481"
"5";"521";"France";"";"481"
"5";"522";"Germany";"";"481"
"5";"508";"Gibraltar";"";"481"
"5";"509";"Greece";"";"481"
"5";"510";"Holy See (Vatican City State)";"";"481"
"5";"490";"Hungary";"";"481"
"5";"500";"Iceland";"";"481"
"5";"485";"Ireland";"";"481"
"5";"511";"Italy";"";"481"
"5";"483";"Latvia";"";"481"
"5";"523";"Liechtenstein";"";"481"
"5";"484";"Lithuania";"";"481"
"5";"524";"Luxembourg";"";"481"
"5";"512";"Macedonia";"";"481"
"5";"513";"Malta";"";"481"
"5";"491";"Moldova";"";"481"
"5";"525";"Monaco";"";"481"
"5";"526";"Netherlands";"";"481"
"5";"501";"Norway";"";"481"
"5";"492";"Poland";"";"481"
"5";"514";"Portugal";"";"481"
"5";"493";"Romania";"";"481"
"5";"494";"Russian Federation";"";"481"
"5";"515";"San Marino";"";"481"
"5";"495";"Slovakia";"";"481"
"5";"516";"Slovenia";"";"481"
"5";"517";"Spain";"";"481"
"5";"502";"Svalbard and Jan Mayen";"";"481"
"5";"503";"Sweden";"";"481"
"5";"527";"Switzerland";"";"481"
"5";"496";"Ukraine";"";"481"
"5";"486";"United Kingdom";"";"481"
"5";"518";"Yugoslavia";"";"481"
"5";"528";"North America";"";"0"
"5";"529";"Anguilla";"";"528"
"5";"530";"Antigua and Barbuda";"";"528"
"5";"531";"Aruba";"";"528"
"5";"532";"Bahamas";"";"528"
"5";"533";"Barbados";"";"528"
"5";"553";"Belize";"";"528"
"5";"561";"Bermuda";"";"528"
"5";"562";"Canada";"";"528"
"5";"534";"Cayman Islands";"";"528"
"5";"554";"Costa Rica";"";"528"
"5";"535";"Cuba";"";"528"
"5";"536";"Dominica";"";"528"
"5";"537";"Dominican Republic";"";"528"
"5";"555";"El Salvador";"";"528"
"5";"563";"Greenland";"";"528"
"5";"538";"Grenada";"";"528"
"5";"539";"Guadeloupe";"";"528"
"5";"556";"Guatemala";"";"528"
"5";"540";"Haiti";"";"528"
"5";"557";"Honduras";"";"528"
"5";"541";"Jamaica";"";"528"
"5";"542";"Martinique";"";"528"
"5";"558";"Mexico";"";"528"
"5";"543";"Montserrat";"";"528"
"5";"544";"Netherlands Antilles";"";"528"
"5";"559";"Nicaragua";"";"528"
"5";"560";"Panama";"";"528"
"5";"545";"Puerto Rico";"";"528"
"5";"546";"Saint Kitts and Nevis";"";"528"
"5";"547";"Saint Lucia";"";"528"
"5";"564";"Saint Pierre and Miquelon";"";"528"
"5";"548";"Saint Vincent and the Grenadines";"";"528"
"5";"549";"Trinidad and Tobago";"";"528"
"5";"550";"Turks and Caicos Islands";"";"528"
"5";"565";"United States";"";"528"
"5";"566";"Alabama";"";"565"
"5";"567";"Alaska";"";"565"
"5";"568";"Arizona";"";"565"
"5";"569";"Arkansas";"";"565"
"5";"570";"California";"";"565"
"5";"571";"Colorado";"";"565"
"5";"572";"Connecticut";"";"565"
"5";"573";"Delaware";"";"565"
"5";"574";"Florida";"";"565"
"5";"575";"Georgia";"";"565"
"5";"576";"Hawaii";"";"565"
"5";"577";"Idaho";"";"565"
"5";"578";"Illinois";"";"565"
"5";"579";"Indiana";"";"565"
"5";"580";"Iowa";"";"565"
"5";"581";"Kansas";"";"565"
"5";"582";"Kentucky";"";"565"
"5";"583";"Louisiana";"";"565"
"5";"584";"Maine";"";"565"
"5";"585";"Maryland";"";"565"
"5";"586";"Massachusetts";"";"565"
"5";"587";"Michigan";"";"565"
"5";"588";"Minnesota";"";"565"
"5";"589";"Mississippi";"";"565"
"5";"590";"Missouri";"";"565"
"5";"591";"Montana";"";"565"
"5";"592";"Nebraska";"";"565"
"5";"593";"Nevada";"";"565"
"5";"594";"New Hampshire";"";"565"
"5";"595";"New Jersey";"";"565"
"5";"596";"New Mexico";"";"565"
"5";"597";"New York";"";"565"
"5";"598";"North Carolina";"";"565"
"5";"599";"North Dakota";"";"565"
"5";"600";"Ohio";"";"565"
"5";"601";"Oklahoma";"";"565"
"5";"602";"Oregon";"";"565"
"5";"603";"Pennsylvania";"";"565"
"5";"604";"Rhode Island";"";"565"
"5";"605";"South Carolina";"";"565"
"5";"606";"South Dakota";"";"565"
"5";"607";"Tennessee";"";"565"
"5";"608";"Texas";"";"565"
"5";"609";"Utah";"";"565"
"5";"610";"Vermont";"";"565"
"5";"611";"Virginia";"";"565"
"5";"612";"Washington";"";"565"
"5";"613";"West Virginia";"";"565"
"5";"614";"Wisconsin";"";"565"
"5";"615";"Wyoming";"";"565"
"5";"551";"Virgin Islands, British";"";"528"
"5";"552";"Virgin Islands, U.S.";"";"528"
"5";"616";"Oceania";"";"0"
"5";"635";"American Samoa";"";"616"
"5";"617";"Australia";"";"616"
"5";"618";"Christmas Island";"";"616"
"5";"619";"Cocos (Keeling) Islands";"";"616"
"5";"636";"Cook Islands";"";"616"
"5";"622";"Fiji Islands";"";"616"
"5";"637";"French Polynesia";"";"616"
"5";"627";"Guam";"";"616"
"5";"628";"Kiribati";"";"616"
"5";"629";"Marshall Islands";"";"616"
"5";"630";"Micronesia, Federated States of";"";"616"
"5";"631";"Nauru";"";"616"
"5";"623";"New Caledonia";"";"616"
"5";"620";"New Zealand";"";"616"
"5";"638";"Niue";"";"616"
"5";"621";"Norfolk Island";"";"616"
"5";"632";"Northern Mariana Islands";"";"616"
"5";"633";"Palau";"";"616"
"5";"624";"Papua New Guinea";"";"616"
"5";"639";"Pitcairn";"";"616"
"5";"640";"Samoa";"";"616"
"5";"625";"Solomon Islands";"";"616"
"5";"641";"Tokelau";"";"616"
"5";"642";"Tonga";"";"616"
"5";"643";"Tuvalu";"";"616"
"5";"634";"United States Minor Outlying Islands";"";"616"
"5";"626";"Vanuatu";"";"616"
"5";"644";"Wallis and Futuna";"";"616"
"5";"645";"South America";"";"0"
"5";"646";"Argentina";"";"645"
"5";"647";"Bolivia";"";"645"
"5";"648";"Brazil";"";"645"
"5";"649";"Chile";"";"645"
"5";"650";"Colombia";"";"645"
"5";"651";"Ecuador";"";"645"
"5";"652";"Falkland Islands";"";"645"
"5";"653";"French Guiana";"";"645"
"5";"654";"Guyana";"";"645"
"5";"655";"Paraguay";"";"645"
"5";"656";"Peru";"";"645"
"5";"657";"Suriname";"";"645"
"5";"658";"Uruguay";"";"645"
"5";"659";"Venezuela";"";"645" 
```

# php - 当用户使用输入按钮关闭页面时删除服务器端临时文件

> ID：13089258
> 
> 赞同：0
> 
> 时间：2012-10-26T14:52:06.227
> 
> 标签：php, javascript, html, forms

我有一个自定义 PHP 类，它存储大量数据（文本文件中的序列化数组）以供程序使用。我已经设置了一个垃圾收集，每次任何用户运行该程序时，它都会通过临时控制器解析以删除任何超过一小时的文件。之后，该文件将由程序重新创建以供使用。

但是，我真正想要的是在用户按下我的表单上关闭页面的输入按钮时删除文件。我尝试使用 POST 使用 JavaScript/AJAX 传递 JSON 对象，但我无法将变量放在需要的位置。我的意思是我有一个主页，该主页有一个用户输入表单，该表单根据用户输入进一步填充 iframe 中的页面。iframe 是我需要 JSON 对象去的地方。我试图将布尔标志设置为 true（即 dead=true）并让我的垃圾收集检查“dead”，然后取消链接/删除文件。

在这一点上，我只是在寻找有关如何进行的任何想法。我有一些限制，阻止我更改基本框架（即不能安装或使用 jQuery 或任何其他 JavaScript LIB）。

我见过很多类似的问题，但没有一个有我可以使用的方法。其他解决方案使用定时垃圾收集，我已经在这样做了。我希望新技术或解决方案已经浮出水面。我不是在寻找代码，而是在寻找处理这个问题的新技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:12:38.247

您可以只使用[cron](http://linux.die.net/man/8/cron)和一个简单的 shell 脚本，该脚本使用[find](http://linux.die.net/man/1/find)删除一些文件（例如）一个小时没有使用。当然，在 Windows 中，道德等价物是可能的。

这应该够了吧。

# iphone - UINavigation 控制器后退按钮自升级到 iOS 6 后未显示

> ID：13089259
> 
> 赞同：0
> 
> 时间：2012-10-26T14:52:08.280
> 
> 标签：iphone, uinavigationcontroller, uibarbuttonitem, back-button

这是我在 UINavigationController 中创建和显示后退按钮的代码：

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] init];
backButton.title = @"Home";
self.navigationItem.backBarButtonItem = backButton; 
```

这在 iOS 5 中完美运行，但自从升级到 iOS 6 后就无法正常工作了。

为了确保我处理所有可能性，我已将此代码放在我`viewDidLoad`的`viewDidAppear`, 和`viewWillAppear`- 所以它在 3 种不同的方法中 - 它仍然没有出现。它也显然在 rootViewController 的`didSelectRowAtIndexPath`方法中——我们从中导航到其他 viewController 的方法。

我在 rootViewController 的横幅/标题中也有一个自定义图形：

```
// Banner Code:
bannerImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
[bannerImageView setImage:[UIImage imageNamed:@"logo-banner@2x.png"]];    
[self.navigationController.navigationBar addSubview:bannerImageView]; 
```

但同样，这在 iOS 5 中运行良好，并且与后退按钮没有冲突。但现在我只是得到没有后退按钮的横幅/标题图形。

最后一点：当我点击它应该在的 EMPTY 空间时，后退按钮确实会显示一秒钟。所以它就在那里 - 但你不能看到它，直到你点击它应该在的空白空间。然后它会出现一瞬间 - 但随后应用程序会导航回一个屏幕，因此它会立即消失。很奇怪。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:26:35.107

假设您的自定义标题图形与不可见的后退按钮有关（如果您删除标题图像，请注意后退按钮将再次可见），您是正确的。

如果您不支持 iOS 5 之前的固件，请使用`setBackgroundImage:forBarMetrics:`自定义标题背景：

```
[self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"logo-banner.png"] forBarMetrics:UIBarMetricsDefault]; 
```

（请注意`@2x`图像名称中没有 - 您的应用程序将自动知道是使用标准版本还是视网膜版本。）

# c# - 用户控件 html 未包含在页面中

> ID：13089260
> 
> 赞同：0
> 
> 时间：2012-10-26T14:52:08.343
> 
> 标签：c#, asp.net

我正在尝试为我工作的网站清理旧版母版页。我遇到了一个问题，即我添加到标记中的用户控件没有将其 html 转储到页面上。

在 web.config 中，我添加了这一行来注册控件的路径：

```
<add tagPrefix="uc" namespace="Site.Controls.Modules" assembly="Site" /> 
```

在 SiteMain.Master 中，我添加了这样的控件：

```
...
    <div id="HeaderTop">
        <!-- dynamic insert of header top -->
        <uc:MainHeaderTop ID="homepageHeader" Visible="false" runat="server" />
    </div>
... 
```

当我加载主页时，我将 homepageHeader.Visible 属性设置为 true。这段代码被击中并且运行良好。它看起来像这样：

```
protected void Page_Load(object sender, EventArgs e)
{
    ...
    // _item is the current item for this page.
    if (_item.TemplateName == "Homepage")
        homepageHeader.Visible = true;
    else
        phNotHomepageHeader.Visible = true;
    ... 
} 
```

如果我在 MainHeaderTop 的代码隐藏中设置断点，我会很好地击中断点。但是 - 当页面加载时，我得到的只是包装标签的空 div，其中没有标记。它看起来像这样：

```
<div id="HeaderTop"  class="homeHeader">
    <!-- dynamic insert of header top -->
</div> 
```

我是否缺少一些基本的东西才能让它工作？

编辑：在 SiteMain.Master OnPreRender 事件中，我放置了以下代码：

```
protected override void OnPreRender(EventArgs e)
{
    base.OnPreRender(e);
    string markup = string.Empty;
    using (var sw = new System.IO.StringWriter())
    {
        using (var hw = new System.Web.UI.HtmlTextWriter(sw))
        {
            homepageHeader.RenderControl(hw);
            markup = sw.ToString();
        }
    }
} 
```

运行后，标记是一个空字符串。这是 MainHeaderTop 中的标记：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="MainHeaderTop.ascx.cs" 
        Inherits="Site.Controls.Modules.MainHeaderTop" %>

<a href="http://www.site.com" style="width:100; height=200;">
    <img src="~/media/F7E4164AF46A4B1791FCC60CE99763EC.ashx" alt="site" />
</a> 
```

及其背后的代码：（添加的语句只是为了设置断点）

```
namespace Site.Controls.Modules
{
    public partial class MainHeaderTop : UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (true)
            {
                int i = 0;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:12:59.137

根据我刚刚完成的测试，您需要`.ascx`在 web.config 设置中专门引用该文件。

ASP.NET 需要确切地知道控件的标记所在的位置，因为它不能仅仅根据您正在调用的类的名称“知道”文件的位置。

通过仅引用命名空间/程序集（如您当前所拥有的），它看起来就像是在加载该类的一个实例。这是有效的，因为您的代码中的相关类没有尝试对位于 .ascx 标记中的任何服务器控件执行任何操作。

如果你确实有一个服务器控件，并试图用它做点什么，那么我认为你会发现一个异常引发，因为在这种情况下控件“不存在”。

**所以我相信你需要做的是：**为你想在 web.config 中注册的每个控件放置以下内容（显然设置`tagName`和正确`src`）......

```
<add tagPrefix="uc" tagName="MainTopHeader" src="~/CorrectPath/MainTopHeader.ascx"/> 
```

正如您所说，您有 200 多个用户控件，您可能只想注册常用控件，然后在需要它们的各个页面中，使用普通参考...

```
<%@ Register TagPrefix="uc" TagName="AnotherCtrl" Src="~/CorrectPath/AnotherCtrl.ascx" %> 
```

我希望这是有道理的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:00:13.330

**替代方式使用 -**

`style="display:none;"`默认

```
<uc:MainHeaderTop ID="homepageHeader" Visible="true" style="display:none;" 
runat="server" /> 
```

& 使用 jQuery：

```
$(function(){
$("#<%=homepageHeader.ClientID %>").css("display", "");
}); 
```

# android - 无法运行 Android 项目

> ID：13089262
> 
> 赞同：2
> 
> 时间：2012-10-26T14:52:18.483
> 
> 标签：android, eclipse

我已经构建我的 Android 应用程序 2 年了，直到现在我从来没有遇到过这个问题。

当我加载 Eclipse 时，窗口右下角有一个小进度条，上面写着“Android 库更新”。如果您单击它，则会打开一个名为“进度”的选项卡，并向您显示正在发生的事情。

![这是它显示的内容](../Images/b73ea59711bb6006fdc6236f96944d5b.png)

在过去的 20 分钟里，它一直坐在这里不动。如果我尝试运行该项目，Eclipse 会冻结，我必须强制退出它。如果我什么都不做，什么都不会发生。我完全被卡住了，无法工作。

我能想到的唯一可能相关的是，今天早上早些时候我在没有互联网连接的情况下工作（我在其他没有 wifi 的地方）。我现在显然有联系（我正在写这篇文章）。

如果我关闭 wifi 并在没有互联网连接的情况下启动 Eclipse，一切正常。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:59:38.840

我做的第一件事是

*   确保将项目及其所有资源保存在不同的位置，以在出现问题时确保其安全，这通常是一个好主意（我个人使用投递箱，这样即使情况变得更糟，我仍然可以恢复它）

*   **尝试关闭 eclipse 并重新启动，如果您有机会在使用以太网**线插入路由器时尝试它。

*   确保检查 Eclipse 是否是最新的，以便绝对没有冲突。

*   如果这不起作用，请尝试卸载并重新安装 eclipse。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:27:41.423

据我所知，这解决了问题：

1.  禁用互联网连接。就我而言，这仅仅意味着关闭无线。
2.  启动 Eclipse。一切都会正常加载。
3.  重新启用互联网。
4.  关闭 Eclipse。

现在打开 Eclipse 就好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:14:36.363

今天突然我遇到了同样的问题，除了我没有`Android Library Update`消息，关闭互联网也帮助我开始了这个项目：

![在此处输入图像描述](../Images/59bc2e2b7d869234d18c1eb700fa47aa.png)

我打开了 WireShark 来调查为什么它在启动时依赖于互联网连接，我发现它正在发出一些 HTTP 调用`http://developer.android.com/reference/`

![在此处输入图像描述](../Images/dd8cfc2ea900b374b4d7cf24194d6e1e.png)

将以下行添加到我的`/etc/hosts`文件中，使我可以在 Internet 上启动项目：

```
127.0.0.1       developer.android.com 
```

# junit - 如何测试应用程序异常 Arquillian、EJB、JUnit

> ID：13089265
> 
> 赞同：1
> 
> 时间：2012-10-26T14:52:22.963
> 
> 标签：junit, ejb, jboss-arquillian

我在测试 EJB 中抛出的应用程序异常时遇到问题。我正在使用 JUnit、Arquillian、JBoss。我可能对 EJB 应该如何编程/测试有误解。如果我需要澄清任何事情，或者提供更多细节，或者提供更多代码，请告诉我。我将不胜感激有关如何在 EJB 中测试应用程序异常的任何建议。

当在 EJB 中引发运行时异常时，事务将被销毁，并引发 TransactionRequiredException。任何后续测试（作为单个测试运行时通过）都会失败，但出现以下异常：

```
javax.transaction.NotSupportedException: BaseTransaction.checkTransactionState - ARJUNA016051: thread is already associated with a transaction!
at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.begin(BaseTransaction.java:63)
at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.begin(BaseTransactionManagerDelegate.java:65)
at org.jboss.tm.usertx.client.ServerVMClientUserTransaction.begin(ServerVMClientUserTransaction.java:142)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.jboss.weld.util.reflection.SecureReflections$13.work(SecureReflections.java:264)
at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52)
at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:137)
at org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:260)
at org.jboss.weld.bean.builtin.CallableMethodHandler.invoke(CallableMethodHandler.java:51)
at org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56)
at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105)
at org.jboss.weldx.transaction.UserTransaction$-294104632$Proxy$_$$_Weld$Proxy$.begin(UserTransaction$-294104632$Proxy$_$$_Weld$Proxy$.java)
at com.soccerx.PersistenceTest.beginTransaction(PersistenceTest.java:106)
at com.soccerx.PersistenceTest.tearDown(PersistenceTest.java:115)
at com.soccerx.PersistenceTest.preparePersistenceTest(PersistenceTest.java:82)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
at org.jboss.arquillian.junit.Arquillian$StatementLifecycleExecutor.invoke(Arquillian.java:351)
at org.jboss.arquillian.container.test.impl.execution.BeforeLifecycleEventExecuter.on(BeforeLifecycleEventExecuter.java:35)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:90)
at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
at org.jboss.arquillian.test.impl.TestContextHandler.createTestContext(TestContextHandler.java:89)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:90)
at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
at org.jboss.arquillian.test.impl.TestContextHandler.createClassContext(TestContextHandler.java:75)
at sun.reflect.GeneratedMethodAccessor63.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:90)
at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
at org.jboss.arquillian.test.impl.TestContextHandler.createSuiteContext(TestContextHandler.java:60)
at sun.reflect.GeneratedMethodAccessor56.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:90)
at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135)
at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:115)
at org.jboss.arquillian.test.impl.EventTestRunnerAdaptor.before(EventTestRunnerAdaptor.java:95)
at org.jboss.arquillian.junit.Arquillian$4.evaluate(Arquillian.java:222)
at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:314)
at org.jboss.arquillian.junit.Arquillian.access$100(Arquillian.java:46)
at org.jboss.arquillian.junit.Arquillian$5.evaluate(Arquillian.java:240)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.jboss.arquillian.junit.Arquillian$2.evaluate(Arquillian.java:185)
at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:314)
at org.jboss.arquillian.junit.Arquillian.access$100(Arquillian.java:46)
at org.jboss.arquillian.junit.Arquillian$3.evaluate(Arquillian.java:199)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.jboss.arquillian.junit.Arquillian.run(Arquillian.java:147)
at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
at org.junit.runner.JUnitCore.run(JUnitCore.java:136)
at org.jboss.arquillian.junit.container.JUnitTestRunner.execute(JUnitTestRunner.java:65)
at org.jboss.arquillian.protocol.jmx.JMXTestRunner.runTestMethodInternal(JMXTestRunner.java:128)
at org.jboss.arquillian.protocol.jmx.JMXTestRunner.runTestMethod(JMXTestRunner.java:107)
at org.jboss.as.arquillian.service.ArquillianService$ExtendedJMXTestRunner.runTestMethod(ArquillianService.java:226)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:111)
at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:45)
at com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:235)
at com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
at com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:250)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:791)
at org.jboss.as.jmx.PluggableMBeanServerImpl$TcclMBeanServer.invoke(PluggableMBeanServerImpl.java:498)
at org.jboss.as.jmx.PluggableMBeanServerImpl.invoke(PluggableMBeanServerImpl.java:246)
at org.jboss.remotingjmx.protocol.v1.ServerProxy$InvokeHandler.handle(ServerProxy.java:1034)
at org.jboss.remotingjmx.protocol.v1.ServerProxy$MessageReciever$1.run(ServerProxy.java:215)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalStateException: BaseTransaction.checkTransactionState - ARJUNA016051: thread is already associated with a transaction!
at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.checkTransactionState(BaseTransaction.java:257)
at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.begin(BaseTransaction.java:59)
... 98 more 
```

其次，如果我尝试断言抛出的异常是 TransactionRequiredException 类型，那么我会得到以下异常：

```
java.lang.Exception: Unexpected exception, expected<javax.persistence.TransactionRequiredException> but was<java.lang.AssertionError>
at org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:31)
at org.jboss.arquillian.junit.Arquillian$4.evaluate(Arquillian.java:226)
at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:314)
at org.jboss.arquillian.junit.Arquillian.access$100(Arquillian.java:46)
at org.jboss.arquillian.junit.Arquillian$5.evaluate(Arquillian.java:240)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.jboss.arquillian.junit.Arquillian$2.evaluate(Arquillian.java:185)
at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:314)
at org.jboss.arquillian.junit.Arquillian.access$100(Arquillian.java:46)
at org.jboss.arquillian.junit.Arquillian$3.evaluate(Arquillian.java:199)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.jboss.arquillian.junit.Arquillian.run(Arquillian.java:147)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.AssertionError: Expected exception: javax.persistence.TransactionRequiredException
at org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:35)
at org.jboss.arquillian.junit.Arquillian$4.evaluate(Arquillian.java:226)
at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:314)
at org.jboss.arquillian.junit.Arquillian.access$100(Arquillian.java:46)
at org.jboss.arquillian.junit.Arquillian$5.evaluate(Arquillian.java:240)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.jboss.arquillian.junit.Arquillian$2.evaluate(Arquillian.java:185)
at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:314)
at org.jboss.arquillian.junit.Arquillian.access$100(Arquillian.java:46)
at org.jboss.arquillian.junit.Arquillian$3.evaluate(Arquillian.java:199)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.jboss.arquillian.junit.Arquillian.run(Arquillian.java:147)
at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
at org.junit.runner.JUnitCore.run(JUnitCore.java:136)
at org.jboss.arquillian.junit.container.JUnitTestRunner.execute(JUnitTestRunner.java:65)
at org.jboss.arquillian.protocol.jmx.JMXTestRunner.runTestMethodInternal(JMXTestRunner.java:128)
at org.jboss.arquillian.protocol.jmx.JMXTestRunner.runTestMethod(JMXTestRunner.java:107)
at org.jboss.as.arquillian.service.ArquillianService$ExtendedJMXTestRunner.runTestMethod(ArquillianService.java:226)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:111)
at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:45)
at com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:235)
at com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:138)
at com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:250)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:791)
at org.jboss.as.jmx.PluggableMBeanServerImpl$TcclMBeanServer.invoke(PluggableMBeanServerImpl.java:498)
at org.jboss.as.jmx.PluggableMBeanServerImpl.invoke(PluggableMBeanServerImpl.java:246)
at org.jboss.remotingjmx.protocol.v1.ServerProxy$InvokeHandler.handle(ServerProxy.java:1034)
at org.jboss.remotingjmx.protocol.v1.ServerProxy$MessageReciever$1.run(ServerProxy.java:215)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

重要代码如下：

```
@PersistenceContext
protected EntityManager em;

@Inject
protected UserTransaction utx;    

@Before
public void preparePersistenceTest() throws Exception {
    beginTransaction();
}

@After
public void commitTransaction() throws Exception {
    utx.commit();
}

protected void beginTransaction() throws Exception {
    utx.begin();
    em.joinTransaction();
}

@Test(expected=TransactionRequiredException.class)
public void testRetirePlayerOnFutureDateBean() throws Exception {

    // SETUP
    Player player = playerDao.findAll().get(0);

    // TEST - method throws IllegalArgumentException if the date is after today...
    playerBean.retirePlayer(player.getId(), new DateTime().plusDays(1));

    // ASSERT - TransactionRequiredException
}

@Test
public void testSavePlayerProfile() throws Exception {
    // another test using an EJB, which passes if above test is commented out
    // its fails only when the previous test has caused the destruction of the transaction
} 
```

# php - Image Magick 或 Imagick Instagram 效果

> ID：13089277
> 
> 赞同：2
> 
> 时间：2012-10-26T14:53:10.113
> 
> 标签：php, imagemagick, imagick, instagram

我想在 PHP 中应用类似于 instagram 的过滤器（http://en.wikipedia.org/wiki/Instagram#Effects）。

我可以管理将发出 Image Magick 命令、路径、读入/读出等的调用放在一起`exec`，但我想知道 instagram 提供的效果是否已在任何地方开源，以便再次运行 Image Magick。

我已经进行了广泛的搜索，我能想到的最接近的是： http: [//net.tutsplus.com/tutorials/php/create-instagram-filters-with-php/](http://net.tutsplus.com/tutorials/php/create-instagram-filters-with-php/)

我已经在 IM 6.6.x 和 6.8x 下测试了这些，并且都出现了它们自己独特的错误。想知道是否有任何人拥有应用这些过滤器的资源。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-10T05:14:59.847

查看 Fred 的漂亮过滤器：[http ://www.fmwconcepts.com/imagemagick/kaleidoscope/index.php](http://www.fmwconcepts.com/imagemagick/kaleidoscopic/index.php)

# r - 将指示四分位数的线添加到散点图中

> ID：13089282
> 
> 赞同：2
> 
> 时间：2012-10-26T14:53:20.483
> 
> 标签：r, scatter-plot

我必须在双变量分布的每个四分位数的散点图上绘制线条。我以这种方式绘制了散点图：

```
plot (data1, data2, col = "blue") 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:16:55.513

（评论转发为答案。）

你的意思是双变量分布？就像是

```
abline(v=quantile(data1,c(0.25,0.5,0.75)))
abline(h=quantile(data2,c(0.25,0.5,0.75))) 
```

可能会做你想做的事，但你还没有说得很清楚......

# mysql - 如何为每个成员选择最近的输入？

> ID：13089284
> 
> 赞同：5
> 
> 时间：2012-10-26T14:53:34.767
> 
> 标签：mysql

假设我有一个 MySQL 表：

```
╔══════╦═════╦═════════╦═════════╗
║ 时间 ║ 中 ║ field_1 ║ field_2 ║
╠══════╬═════╬═════════╬═════════╣
║ 100 ║ 1 ║ 32 ║ 54 ║
║ 100 ║ 2 ║ 0 ║ 34 ║
║ 100 ║ 3 ║ 44 ║ 99 ║
║ 200 ║ 1 ║ 0 ║ 45 ║
║ 200 ║ 2 ║ 0 ║ 45 ║
║ 200 ║ 3 ║ 4 ║ 59 ║
║ 200 ║ 4 ║ 45 ║ 45 ║
╚══════╩═════╩═════════╩═════════╝

```

time 是一个 UNIX 时间戳。mid 是成员ID。field_1 由成员提供。field_2 会自动填充。

我希望为所有成员选择具有最新非零字段_1 的行。因此查询将导致：

```
╔══════╦═════╦═════════╦═════════╗
║ 时间 ║ 中 ║ field_1 ║ field_2 ║
╠══════╬═════╬═════════╬═════════╣
║ 100 ║ 1 ║ 32 ║ 54 ║
║ 200 ║ 3 ║ 4 ║ 59 ║
║ 200 ║ 4 ║ 45 ║ 45 ║
╚══════╩═════╩═════════╩═════════╝

```

我想出的唯一解决方案似乎不是很优雅：

```
选择 *
从 （
    选择 *
    从 t1
    WHERE field_1 > 0
    按时间顺序排列
） 作为一个
按中间分组

```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T14:56:21.837

这里的想法是创建一个子查询，它`time`为每个查询获取最大值`mid`并将其加入表本身。

```
SELECT a.*
FROM tableName a
INNER JOIN
(
SELECT mid, MAX(time) maxV
FROM tableName
WHERE field_1 > 0
GROUP BY mid
) b ON a.mid = b.mid and
        a.time = b.maxV 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/6af44/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:59:57.560

```
SELECT a.*
FROM t1 AS a
INNER JOIN
(
    SELECT mid, MAX(time) AS maxTime
    FROM t1
    WHERE field_1 <> 0
    GROUP BY mid
) b ON a.mid = b.mid AND a.time = b.maxTime 
```

[SQL小提琴](http://sqlfiddle.com/#!2/798d9/1)

# c# - 如何在不调用构造函数的情况下创建对象？

> ID：13089291
> 
> 赞同：4
> 
> 时间：2012-10-26T14:54:06.140
> 
> 标签：c#, .net, reflection, microsoft-metro

我想实现一些非标准的序列化格式。

当我进行反序列化时，我需要在不调用构造函数的情况下创建对象的实例。

框架中有
`System.Runtime.Serialization.FormatterServices.GetUninitializedObject(Type type)`，`.NET`但 Windows Metro 框架中没有`FormatterServices`类。

有没有人知道如何在不调用 Windows Metro Framework 中的构造函数的情况下实例化对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:27:27.320

据我所知：你不能。您也不能调用私有/受保护/内部构造函数：.netcore 具有受限反射（如 Silverlight 模型，但增加了 GetTypeInfo() 的痛苦）。

我可以建议的唯一选择可能是为用户提供的执行适当操作的工厂方法提供单独的支持，或者类似地提供传入工厂接口的能力。这将构造从序列化引擎中移开，并使其重新控制了解特定类型的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:37:09.697

我可能是错的，但是当你实例化一个对象时，你至少必须运行一个构造函数。即使没有声明构造函数，也会调用默认的空构造函数。实例化使类成为对象。

所以对我来说，你的问题没有答案。

如果需要，也许您可​​以在运行时构建一个默认的空构造函数。[看看这里](https://stackoverflow.com/questions/3551452/how-to-create-a-method-at-runtime-using-reflection-emit)

# c# - 未能在 C# 中使用 String.Format

> ID：13089296
> 
> 赞同：2
> 
> 时间：2012-10-26T14:54:18.170
> 
> 标签：c#, c++, .net, wpf, string

我是一名 C++ 开发人员，上周转到 wpf。好吧，我在我的 c++ 应用程序中使用了 sprintf 很多次，现在我需要在 C# 中使用与它等效的东西。这是我所做的是C++：

```
char t_str[4] = {};
for(int i = 0; i < 4; i++)
{ 
    sprintf(t_str, "%02X", buffer[i]);
m_apiResponse[i]->setText(String(t_str));
} 
```

where`buffer[0] = 20; buffer[1] = 30; buffer[2] = 40; buffer[3] = 50;`和`m_apiResponse`是一个文本框。

我在我的 C# 中这样做了，如下所示：

```
Byte[] t_str = new Byte[4];
for (int i = 0; i < 4; i++)
{
         string bufstring = String.Format("{0:02}", buffer[i]);
         t_str = Encoding.UTF8.GetBytes(bufstring);
}

Response1Box = Convert.ToString(t_str[0]);
Response2Box = Convert.ToString(t_str[1]);
Response3Box = Convert.ToString(t_str[2]);
Response4Box = Convert.ToString(t_str[3]); 
```

其中 ResposeBox 是我绑定到的文本框：

```
// Description of Response1Box
    private string _Response1Box;
    public string Response1Box
    {
        get
        {
            return _Response1Box;
        }

        set
        {
            _Response1Box = value;
            OnPropertyChanged("Response1Box");
        }
    } 
```

`buffer[64]`是字节[]。

它没有给我我的 C++ 方法所做的预期答案。这是正确的做法吗：`string bufstring = String.Format("{0:02}", buffer[i]); t_str = Encoding.UTF8.GetBytes(bufstring);`我错在哪里？？？

请帮忙 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T15:01:03.413

尝试

```
string bufstring = String.Format("{0:D2}", buffer[i]); 
```

或（用于十六进制输出）

```
string bufstring = String.Format("{0:X2}", buffer[i]); 
```

或（带有 C/C++ 样式的十六进制前缀）

```
string bufstring = String.Format("0x{0:X2}", buffer[i]); 
```

请参阅[复合格式](http://msdn.microsoft.com/en-us/library/txafckwd.aspx) 和[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

当然，在您调用的 C++ 循环中`m_apiResponse[i]->setText`，您应该在 C# 循环中执行类似的操作以达到相同的结果。

```
string[] response = new TextBox[] {Response1Box, Response2Box, Response3Box, Response4Box};
for (int i = 0; i < 4; i++)
     response[i] = String.Format("{0:X2}", buffer[i]); 
```

更新：我不清楚 ResponseBox 是什么，但如果您在名为 ResponseBox 的对象实例中有 4 个名为 Response[X]Box 的字符串属性，那么您可以通过这种方式在循环外设置这些属性

```
ResponseBox.Response1Box = response[0];
ResponseBox.Response2Box = response[1];
....... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:04:42.050

我认为您的字节数组逻辑有问题。

你有`byte[] t_str = new byte[4];`一个 4 字节数组。

但是，您`t_str`多次分配，覆盖原来的 4 个字节。

您可能正在寻找如下声明：

```
byte[][] t_str = new byte[4][]; 
```

这将是一个数组数组。

在你的循环中：

```
t_str[i] = Encoding.UTF8.GetBytes(bufstring); 
```

编辑：

或者，如果我离题了，你可以这样做：

```
Response1Box = buffer[0].ToString("X2");
Response2Box = buffer[1].ToString("X2");
Response3Box = buffer[2].ToString("X2");
Response4Box = buffer[3].ToString("X2"); 
```

假设这`buffer`是一个字节数组，并且您想写出每个单独的字节值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:19:25.590

这是您在 C# 中可能需要的所有字符串格式[检查这里](http://www.dotnetperls.com/string-format) 我希望您可能需要以下内容

```
String str = String.Format("Hello {0:0.00} {1:0.00}", 55, 20); 
```

# .net - 如何将 RTF 文本复制到剪贴板以在 excel 中使用

> ID：13089299
> 
> 赞同：5
> 
> 时间：2012-10-26T14:54:20.247
> 
> 标签：.net, winforms, excel, clipboard, rtf

是否可以将 rtf 字符串复制到 excel 的剪贴板。应尽可能保留格式（例如文本颜色）。

以下 .Net 代码用于填充剪贴板

```
var dataObject = new DataObject();
dataObject.SetData(DataFormats.Rtf, rtf);
Clipboard.SetDataObject(data_object); 
```

1.  Excel 拒绝 rtf 剪贴板内容
2.  MS Word 接受 rtf 内容。
3.  当我粘贴到 MSWord 并从 MSWord 复制到 Excel 中时，它可以工作。

将 rtf 转换为 excel 接受的格式的最佳方法是什么？

备注：正如@KreepN 所建议的， System.Windows.Documents.TextRange 可用于将 RTF 转换为 HTML，反之亦然。Excel 可以识别 HTML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-28T13:17:27.850

我认为这部分取决于变量“rtf”的定义。这是我用来将 RTF 数据复制到粘贴到 Excel 中的剪贴板的片段。

```
 FlowDocument doc = CreateDoc();
        TextRange range = new TextRange(doc.ContentStart, doc.ContentEnd);
        using (Stream stream = new MemoryStream())
        {
            range.Save(stream, DataFormats.Rtf);
            dataObj.SetData(DataFormats.Rtf, Encoding.UTF8.GetString((stream as MemoryStream).ToArray()));
        }
        Clipboard.SetDataObject(dataObj); 
```

# python - 如何将 pycharm 配置为“灰显”排除的文件夹？

> ID：13089305
> 
> 赞同：2
> 
> 时间：2012-10-26T14:54:33.503
> 
> 标签：python, pycharm

如何将 pycharm 配置为“灰显”排除的文件夹，而不仅仅是从项目视图中删除它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:13:39.933

目前不可能，[有一个开放的功能请求](http://youtrack.jetbrains.com/issue/IDEA-23537)提供半排除文件夹。

**更新：**如果您需要用特定颜色标记某些目录/文件或不在所有视图中显示它们，请考虑使用[Scopes 功能](http://www.jetbrains.com/phpstorm/webhelp/scope.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-02T13:03:51.620

使用新版本的 Pycharm，可以将文件夹“变灰”，同时仍将其保留在项目视图中。（如果这就是你的要求）

您只需右键单击项目视图中的文件夹并“将目录标记为已排除”即可。

然后，您可以使用项目视图面板上的设置按钮选择显示/不显示排除的文件夹/文件。

有关更多选项，请参阅此官方文档：[https ://www.jetbrains.com/pycharm/help/configuring-ignored-files.html](https://www.jetbrains.com/pycharm/help/configuring-ignored-files.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T13:32:12.797

同时，可以将目录或单个文件标记为“排除”，这样它们对于 PyCharm 就变得“不可见”。只需右键单击该项目并从上下文菜单中选择*Mark Directory As > Excluded*

PyCharm 帮助参考：[链接](https://www.jetbrains.com/pycharm/help/configuring-folders-within-a-content-root.html#d916122e117)

# javascript - 转义字符串中的特殊字符

> ID：13089306
> 
> 赞同：2
> 
> 时间：2012-10-26T14:54:36.267
> 
> 标签：javascript

我有一个字符串： `c:\build\target`。

这来自外部源，按原样直接传递。在 javascript 中使用它之前，我无法修改它。

但是`\b`和`\t`是特殊字符，但我只是想按它的样子打印（或使用它），而不是按照它的解释`c:uild arget`。

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-10-04T23:25:56.903

使用单个正则表达式替换（而不是多个）更快并且避免与替换顺序相关的错误。

```
console.info('c:\build\target'); // cuild   arget

console.info(escape('c:\build\target')); // c:\build\target

function escape(str) {
  return str.replace(/[\b\f\n\r\t\v\0\'\"\\]/g, match => {
    return {
      '\b': '\\b',
      '\f': '\\f',
      '\n': '\\n',
      '\r': '\\r',
      '\t': '\\t',
      '\v': '\\v',
      '\0': '\\0',
      '\'': '\\\'',
      '\"': '\\\"',
      '\\': '\\\\'
    }[match]
  })
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:06:21.153

你可以试试：

```
string = "c:\build\target";
string = string.replace(/[\n]/g,'\\n');
string = string.replace(/[\r]/g,'\\r');
string = string.replace(/[\t]/g,'\\t');
string = string.replace(/[\b]/g,'\\b');
string = string.replace(/[\f]/g,'\\f');
console.log(string);​ 
```

但可能还有其他一些问题，因为您必须捕获所有其他特殊字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T14:58:22.503

最简单的方法是转义每个反斜杠（因此它被解释为文字反斜杠）。

如果您不能在远程系统本身上执行此操作，则您需要执行此操作，因为数据是在 Javascript 中解析的。显然，一旦你已经*有了*一个 Javascript 字符串，反斜杠就已经丢失了。

因此，当您从“远程字符串”（包括一个`\`后跟一个字符`b`）到“Javascript 字符串”（包括一个`\b`不可打印的字符）时，您需要注意反斜杠。并确保它们作为文字反斜杠（即转义）而不是作为转义前缀传递。

# ruby-on-rails - 带有错误字段的导轨脚手架

> ID：13089310
> 
> 赞同：1
> 
> 时间：2012-10-26T14:54:43.680
> 
> 标签：ruby-on-rails

假设我想创建一个具有 2 个字段的模型的脚手架，但是我在做 rails g scaffold 时错误地添加了一个额外的字段。我 rake 迁移了它。扭转局面的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:57:24.317

你可以做

```
rake db:rollback
rails destroy scaffold ScaffoldName 
```

并重复。

# mysql - MySQL EXPLAIN 自动解析

> ID：13089315
> 
> 赞同：1
> 
> 时间：2012-10-26T14:54:55.567
> 
> 标签：mysql, explain, sql-execution-plan

我需要实现对 MySQL EXPLAIN 命令输出的自动分析，它将查询标记为“坏”（例如，如果不使用索引）、“中”（可以优化）和“好”。

是否有任何现有的解决方案或任何算法来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:11:03.613

> 是否有任何现有的解决方案或任何算法来实现它？

据我所知，这可能有一个很好的理由，即它不是可以分解为一组固定规则的东西（分析）。

但是，您可以确定一些事情，例如`Using temporary; Using filesort`并解析您对这些术语的计划。

有关更多信息，请参见[此处](https://stackoverflow.com/questions/6114880/mysql-5-1-using-filesort-event-when-an-index-is-present)和[此处](https://stackoverflow.com/questions/725366/mysql-not-using-indexes-using-filesort-when-using-order-by?rq=1)。

# php - 检测用 PHP 编码的 Google Analytics

> ID：13089316
> 
> 赞同：2
> 
> 时间：2012-10-26T14:55:02.610
> 
> 标签：php, google-analytics, preg-match, strpos

正确的家伙，

我在 PHP 中寻找一种方法来检测页面源代码中是否存在 Google Analytics，通过以下方式检索页面源代码：file_get_contents($url)

我知道页面上使用的分析代码应该是 UA-xxxxxxxx-x 格式

到目前为止，我尝试过：

```
return preg_match("/^ua-\d{4,9}-\d{1,4}$/i", strval($source)) ? true : false;

if(preg_match("/^ua-\d{4,9}-\d{1,4}$/", $source)){

if(strpos($source, "setAccount','UA-")!=''){

if(strpos($source, 'urchin.js')!=''){ 
```

不是最好的方法，每次它返回false。

任何帮助都会很棒..

[[ **UPDATE** ]] 好的，所以我已经搞砸了 preg_match 很多，（非常令人沮丧），在尝试了一些事情之后，我发现唯一可以匹配的是

```
if ( preg_match("/\bUA-\b/i", $source) ){
    echo "A match was found.";
} else {
    echo "A match was not found.";
} 
```

这将与 Google Analytics 代码中的 UA- 匹配。但为了更好地匹配，我认为它需要在表达式中添加一些东西。

真正需要的是匹配第一部分 UA- 然后匹配一系列数字，即：UA-{range of numbers like 32692708}-{then just 1 number}

如果有人可以向我展示所需表达的预览，那就太好了.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T14:27:04.680

您已关闭`(preg_match("/^ua-\d{4,9}-\d{1,4}$/", $source)`，只需更改`^`并`$`使用单词边界`\b`：

```
(preg_match("/\bua-\d{4,9}-\d{1,4}\b/i", $source)
//     here __^^       and here __^^ 
```

# java - 需要将字符串月份作为 int

> ID：13089317
> 
> 赞同：2
> 
> 时间：2012-10-26T14:55:22.100
> 
> 标签：java

我将“Jan”、“Feb”等作为整数传递给数据库我需要在相应月份传递 1-12，但我从日历中得到 0-11

这就是我这样做的方式，请帮助我调整它以将月份设为 1-12 而不是 0-11

```
//Get month as an integer.
Date date = new SimpleDateFormat("MMM", Locale.ENGLISH).parse(stringMonth);
Calendar cal = Calendar.getInstance();
cal.setTime(date);
int month = cal.get(Calendar.MONTH);
System.out.println("month ==" + month); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T14:56:25.910

```
 int month = cal.get(Calendar.MONTH) + 1; 
```

日历的月份是 0 索引的 (Jan = 0)。尽管上面的代码看起来很奇怪，但它在 Java 中很常见，因为 Calendar 中月份的索引相当奇怪。

这篇文章讨论了这个话题：[为什么Java日历中的一月是0月](https://stackoverflow.com/questions/344380/why-is-january-month-0-in-java-calendar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:55:58.297

那是因为[`Calendar`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)类使用[`Month`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#MONTH)索引`[0-11]`

因此，要从中获取索引`[1-12]`，您可以将 1 添加到获得的索引：-

```
int month = cal.get(Calendar.MONTH) + 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T14:57:07.330

要么改变：

```
int month = cal.get(Calendar.MONTH) + 1; 
```

或者

```
System.out.println("month ==" + (month) + 1) ; 
```

（但不要两者都做！）

这会将 1 的“偏移量”添加到`month`由 表示的 ' 中`int`，从而将其从 0-11 转移到 1-12 =)

# php - 在php中检查时间时出现问题

> ID：13089320
> 
> 赞同：1
> 
> 时间：2012-10-26T14:55:26.253
> 
> 标签：php, time, connection

我试图确保我的所有用户在某些时候都不会登录，所以我在 mysql 中注册了开始时间和离开时间，当他们登录时，我首先检查登录和密码是否与数据库中的相同

如果相同，则检查时间是否正常，否则显示错误。但在所有情况下，它都不会显示错误，但它每次都会让用户登录，即使他因为时间错误而没有被授权。

我编写了以下代码：

登录：

```
 $sql='SELECT * FROM `gestionnaire` WHERE `login`="'.mysql_real_escape_string($_POST['pseudo']).'"';
     $req=mysql_query($sql) or die;
     $data=mysql_fetch_assoc($req); 

      // si on obtient une réponse, alors l'utilisateur est un membre
      if ($data['login']==$_POST['pseudo'] AND md5($_POST['pass'])==$data['pass_md5']) { 
        if(date("H:i")<$data['depart'] OR date("H:i")>$data['depart'])
        {
             $erreur = '<font color=red>Vous n\'&ecirc;tes pas autoris&eacute; &agrave; vous connecter, revenez &agrave; '.$data['depart'].'.</font>'; 
        }

        else{
        }
         session_start(); 
         $sql="INSERT INTO `session` SET
`temps` = now(),
`login`='".$data['login']."',
`mouvement`='1'";  
mysql_query($sql) or die;

          $_SESSION['id'] = $data['id']  ;
          $users['id'] = $_SESSION['id'] ;
          $_SESSION['login'] = $data['login'];
         header('Location: GESTION/index.php'); 
         exit(); 
      } 
      // si on ne trouve aucune réponse, le visiteur s'est trompé soit dans son login, soit dans son mot de passe
      elseif ( md5($_POST['pass'])!=$data['pass_md5']) { 
         $erreur = '<font color=red>Compte non reconnu.</font>'; 
      } 
      // sinon, alors la, il y a un gros problème :)
      else { 
         $erreur = '<font color=red>Probème dans la base de données : plusieurs membres ont les mêmes identifiants de connexion.</font>'; 
      } 
   } 
   else { 
      $erreur = '<font color=red>Au moins un des champs est vide.</font>'; 
   }  
}  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:59:48.603

你的问题是`if(date("H:i")<$data['depart'] OR date("H:i")>$data['depart'])`因为 php 无法进行这种类型的比较。

您需要将字符串时间转换为数字表示形式，即 unix 时间戳。

所以如果`$data['depart']`=== '17:30' (for 5:30 pm) 你需要做这样的事情：

```
$today_depart = strtotime(date('Y-m-d ').$data['depart'].':00');
$time = time(); 
```

现在你可以做`if($time < $today_depart`...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:00:03.860

Je ne comprend pas francais，但您的`if`陈述归结为：

```
if {

} else {
    exit();
} else if {

} else {

} 
```

此外，就像 Anthony 指出的那样，PHP 在比较日期方面真的很糟糕。由于开始和结束时间已经在数据库中，我建议`WHERE NOW() BETWEEN a AND b`在您的查询中使用或一些类似的结构。

# actionscript-3 - as3 孩子不会被移除

> ID：13089331
> 
> 赞同：0
> 
> 时间：2012-10-26T14:56:03.773
> 
> 标签：actionscript-3

好的，所以当单击时我有一个按钮转到第 15 帧。如果 xpsafety 为 0，我希望创建一个孩子并将 xpsafety 设置为 1。因此，如果再次单击该按钮，它将不会显示孩子并进行计算

名声10：

```
var xpsafety:int = 0;
var xpclip:MovieClip = new xp();

RememberButton.addEventListener(MouseEvent.CLICK, GoToRemember); 

function GoToRemember(evt:MouseEvent):void { 
gotoAndPlay(15, "Scene 1");
if (xpsafety == 0) {
    addChild(xpclip);
    xpclip.x=41;
    xpclip.y=835;
    calculateExp(8);
    xpsafety = xpsafety +1;
}

} 
```

第 15 帧：

```
stop();

    BackButton.addEventListener(MouseEvent.CLICK, GoBackSafety); 

    function GoBackSafety(evt:MouseEvent):void { 
        gotoAndPlay(10, "Scene 1");
        removeChild(xpclip);
        } 
```

我得到的错误是：ArgumentError: Error #2025: 提供的 DisplayObject 必须是调用者的子对象。

没看懂什么意思，有什么技巧吗？谢谢，麻烦您了。

其他问题，但它可能是相关的，尽管 xpsafety 不等于 0，但该功能仍然会关闭（我知道是因为发生了 calculateExp(8)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:12:04.207

自从我编写任何框架脚本以来已经有一段时间了，因为它很快变得繁琐且难以管理。见 [这里](https://stackoverflow.com/questions/4028250/passing-a-variable-between-frames-with-actionscript-3)。

在这个`xpsaftey`问题上，当您返回到第 10 帧时，整个脚本将再次运行，并且`xpsaftey`使用默认值重新定义变量`0`。为了防止这种情况，您需要将声明`var xpsafety:int`放在较早的框架上。

您`xpsaftey`在 for 循环中的第二个示例只是进一步混淆了事情，因为您在 if 语句的范围内再次重新定义它。我建议对变量[范围](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f9d.html)进行一般性阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:57:17.417

尝试做类似的事情：

```
xpclip.parent.removeChild(xpclip); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T15:13:35.310

您正在尝试`xpclip`从侦听器内部访问您的变量，试试这个。

```
var mc:MovieClip = (root as MovieClip).xpchild;
(root as MovieClip).removeChild(mc); 
```

如果这仍然不起作用，请检查是否`mc`不为空。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-26T15:29:49.983

我需要做的就是将我的变量放在第 15 帧的 if 语句中......如下所示：

```
stop();

BackButton.addEventListener(MouseEvent.CLICK, GoBackSafety); 

function GoBackSafety(evt:MouseEvent):void { 
    gotoAndPlay(10, "Scene 1");

    }

var xpclip:MovieClip = new xp();
if (xpsafety==0) {
    var xpsafety:int = 0;
    addChild(xpclip);
    xpclip.x=41;
    xpclip.y=835;
    calculateExp(8);
    xpsafety = xpsafety +1;
    trace(xpsafety);
    } 
```

# java - 如何在项目中打包资源文件

> ID：13089335
> 
> 赞同：2
> 
> 时间：2012-10-26T14:56:11.243
> 
> 标签：java, resources, package

我不确定我是否正确执行此操作。我想在我的 Java 项目中有一个包含一堆文本文件的文件夹或包。在代码中，我想列出文件夹中的所有文件，并能够读取它们。我希望这些资源文件成为我项目目录结构的一部分（以便可以使用我的源代码对它们进行版本控制）。

我已经看到 ClassLoader.*resource 方法，但无法识别我的源目录中的文件夹并列出它的内容......

顺便说一句，我正在使用 Eclipse。有谁知道如何实现这个目标？

谢谢

===========================================

更新：

感谢您的回复！我发现通过添加源文件夹，我只能通过名称访问里面的文件。但是，这不符合我的需要，因为文件夹的内容会发生变化，我希望能够动态读取所有内容，而不必在每次内容更改时都更改读取逻辑。我尝试为源文件夹中的常规文件夹创建一个文件并迭代它的内容。只要在 Eclipse 中运行，它就可以工作，但根据 Edwin 的评论，当我导出到 JAR 时这将不起作用，所以我回到了第一方。

我在想必须有一种方法可以在我的项目中包含可以以编程方式访问的资源文件（Android 会这样做并且它基于 java 对吗？）。那么有没有另一种方法来创建一个包含一堆文件的“资源”包，我可以在运行时访问这些文件，而无需更新代码来查找每个文件？我真的不想将此文件夹与我的源文件分开并将其维护在不同的位置，因为这会使部署复杂化......有人有什么想法吗？

谢谢

=====================================

解决方案：

我刚刚意识到 Android 在编译时会清点它的资源文件，以便在运行时使它们可用。所以这可能是要走的路：我将在我的 Ant 脚本中添加一个步骤，该脚本编写一个包含我文件夹中文件列表的文件（始终命名相同，以便我可以访问它）。这样我就可以知道所有可用资源文件的名称。感谢埃德温的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:00:19.677

确保您的资源文件夹是 Eclipse Build Path 对话框中的源文件夹。然后，您将能够使用问题中提到的 ClassLoader 方法加载它们。

![在此处输入图像描述](../Images/343ef86337647547772c0687352bfa5c.png)

如果您使用此技术，源文件夹中的每个子文件夹都被视为一个包。因此，请确保在加载资源时考虑到这一点。

这种技术基本上可以确保这个文件夹中的所有 Java 文件都被编译并放置在分发文件夹下。并且任何其他文件都简单地从该文件夹复制到分发文件夹（即 bin 或 classes 文件夹）。

稍后，当您将项目打包到 jar 或 war 中时，您必须确保这些文件包含在打包文件中。

# artificial-intelligence - ubuntu 中的 fann 库错误：/usr/local/lib/libfann.so.2：未定义符号：pow

> ID：13089336
> 
> 赞同：-1
> 
> 时间：2012-10-26T14:56:13.180
> 
> 标签：artificial-intelligence, neural-network, ubuntu-12.04, fann

我正在尝试在 ubuntu 12.04 中构建 fann 神经网络库，但由于测试例程不起作用而未能使用它。按照[http://leenissen.dk/fann/wp/help/installing-fann/](http://leenissen.dk/fann/wp/help/installing-fann/)中的说明进行操作。在 cmake 并安装后，当我想测试库是否正常工作时，通过 cd 到示例然后运行：

```
make runtest 
```

我得到的是这里：

```
gcc -O3 xor_train.c -o xor_train -lfann -lm
gcc -O3 xor_test.c -o xor_test -lfann -lm
gcc -O3 -DFIXEDFANN xor_test.c -o xor_test_fixed -lfixedfann -lm
gcc -O3 simple_train.c -o simple_train -lfann -lm
gcc -O3 steepness_train.c -o steepness_train -lfann -lm
gcc -O3 simple_test.c -o simple_test -lfann -lm
gcc -O3 robot.c -o robot -lfann -lm
gcc -O3 mushroom.c -o mushroom -lfann -lm
gcc -O3 cascade_train.c -o cascade_train -lfann -lm
gcc -O3 scaling_test.c -o scaling_test -lfann -lm
gcc -O3 scaling_train.c -o scaling_train -lfann -lm

Training network
./xor_train
Creating network.
./xor_train: symbol lookup error: /usr/local/lib/libfann.so.2: undefined symbol: pow
make: *** [runtest] Error 127 
```

我用不同的来源和版本尝试了这几次，但仍然遇到同样的错误。

有没有人有解决方案？或使用此库的任何其他选项而不会出现所有这些错误。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T01:25:04.127

为避免这种情况，请确保以下事项：

确保您已安装 g++：

```
sudo aptitude install g++ 
```

确保你已经安装了 libfann2

```
sudo aptitude install libfann-dev libfann2 
```

检查您是否有 gcc、make、cmake-data 和 cmake-dbg 也很棒

```
sudo aptitude install make cmake-data cmake-dbg 
```

最后安装

```
sudo aptitude install build-essential 
```

一旦进入文件，导入：

```
#include <stdio.h>
#include <floatfann.h>
#include <fann.h> 
```

通过这些步骤，它应该可以工作！

# algorithm - 我怎么知道谁可以在圣诞节给谁送礼物？

> ID：13089352
> 
> 赞同：8
> 
> 时间：2012-10-26T14:57:04.597
> 
> 标签：algorithm, language-agnostic

假设有一个七口之家，比如说，

```
["John", "James", "Jenna", "Joseph", "Jane", "Jacob", "Joanne"] 
```

他们都在为圣诞节送礼季节做准备。他们已经商定了一些规则，以确保一切顺利进行：

*   每个人都必须送一份礼物。
*   每个人都必须收到一份礼物。
*   没有人可以给自己送礼物。
*   任何人不得向其配偶赠送礼物。（简和约翰是夫妻）
*   没有人可以给他去年给的同一个人。（去年，约翰给了詹姆斯，詹姆斯给了珍娜，珍娜给了约瑟夫，约瑟夫给了简，简给了雅各布，雅各布给了乔安妮，乔安妮给了约翰）
*   最后，没有两个人可以互相赠送礼物。例如，如果约翰正在给珍娜，珍娜可能不会回馈给约翰。

规则如此复杂，他们很难在遵守规则的情况下弄清楚谁能给谁。因此，他们聘请我编写一个程序，该程序将显示人们可以相互给予的所有可能的合法方式。

我可以使用什么算法优雅地解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T10:52:31.273

我会使用一个简单的回溯算法。使用 Python 生成器函数：

```
def calc_gifts(names, blacklist, gifts={}):
    if len(names) > 0:
        name, rest = names[0], names[1:]
        for other in names + list(gifts):
            if (other != name and 
                    other not in blacklist[name] and
                    (other not in gifts or gifts[other] != name) and
                    other not in gifts.values()):

                gifts_new = dict(gifts.items() + [(name, other)])
                for solution in calc_gifts(rest, blacklist, gifts_new):
                    yield solution
    else:
        yield gifts 
```

现在，我们设置名称和黑名单，并让生成器生成解决方案：

```
all_names = ["john", "james", "jenna", "joseph", "jane", "jacob", "joanne"]
blacklist = {"john":   ["james", "jane"],
             "james":  ["jenna"],
             "jenna":  ["joseph"],
             "joseph": ["jane"],
             "jane":   ["jacob", "john"],
             "jacob":  ["joanne"],
             "joanne": ["john"]}
generator = calc_gifts(all_names, blacklist)
solution = next(generator) 
```

`solution`then 是`dict`送礼者和接受者的一个，例如`{'joanne': 'joseph', 'james': 'john', 'jane': 'joanne', 'joseph': 'jacob', 'jacob': 'jane', 'john': 'jenna', 'jenna': 'james'}`.

对于第一个解决方案，即 using `next(generator)`，`calc_gifts`仅调用了 10 次；对于所有 224 个解决方案，例如使用`list(generator)`它被调用大约。1000 次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:43:33.970

如果你从一个 7x7 的网格开始，每个人有一行和一列，表示是否允许行中提到的人向列中提到的人赠送礼物。

最初，将每个组合标记为允许，然后开始删除约束 3、4 和 5 明确禁止的组合。每个有效的礼物组合*必须*是您此时剩下的组合的子集。这将是您的起始位置。

现在你必须开始做决定，每一个决定都会影响你剩下的可能性。有些决定可能会被证明是错误的，最终导致并非每个人都能得到礼物。在这种情况下，您应该收回该决定并尝试另一个决定（提示：为此使用递归）。

如果您以结构化的方式尝试所有可能性，那么您一定会找到所有解决方案（如果存在）。

现在，让他们的钱物有所值:)

# java - 通过 Rserve 将多维数组从 Java 分配给 R

> ID：13089356
> 
> 赞同：4
> 
> 时间：2012-10-26T14:57:17.187
> 
> 标签：java, r, rserve

我正在为一个项目使用 Java/R/Rserve。我面临将多维数组从 Java 传输到 R 工作区进行计算的问题。到目前为止，对象的`assign`方法`RConnection`只允许传递以下内容：`byte[], double[], int[], REXP, String,and String[]`.

我通过在 Java 中创建一个循环来回避这一点，并单独传递变量。尽管这可行，但它看起来丑陋且效率低下。

```
RConnection c = new RConnection();
c.eval("x <- matrix(0,nrow=dimX[1],ncol=dimX[2])");
for (int i = 0; i < dimX[0]; i++){
  c.assign("i",Integer.toString(i+1));
  c.eval("i <- as.numeric(i)");
  for (int j = 0; j < dimX[1]; j++){
    c.assign("j",Integer.toString(j+1));
c.eval("j <- as.numeric(j)");
c.assign("tmp", Double.toString(XOBS[i][j]));
c.eval("x[i,j] <- as.numeric(tmp)");
  }             
} 
```

[http://www.rforge.net/Rserve/dist/JRclient/JavaDoc/org/rosuda/JRclient/REXP.html](http://www.rforge.net/Rserve/dist/JRclient/JavaDoc/org/rosuda/JRclient/REXP.html)上的 Rserve 文档似乎已经过时，并且 Rserve 的示例相当有限。谁能给我一个关于如何改进这段代码的建议？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-23T10:20:57.523

供参考（在提出问题时方法可能尚不可用）：

```
REXP REXP.createDoubleMatrix(double[][] arg); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-13T16:39:00.607

我找到了一个解决方案，只是让它更友好一点，还附上了源链接。

评论：它是现成的实用方法。它基于 JRI，现在是 rJava 的一部分。

来源：
[http ://www.lbgi.fr/wikili/index.php/JRI](http://www.lbgi.fr/wikili/index.php/JRI)

```
 /**
     * Creates and assigns a matrix object in R from 2D table of double
     *
     * @param rEngine        the  R instance used
     * @param sourceArray    the 2D table of double
     *                       the matrix must have always the same column number on every row
     * @param nameToAssignOn the R object name
     * @return R matrix instance or null if R return an error
     */
    public static REXP assignAsRMatrix(Rengine rEngine, double[][] sourceArray, String nameToAssignOn) {
        if (sourceArray.length == 0) {
            return null;
        }

        rEngine.assign(nameToAssignOn, sourceArray[0]);
        REXP resultMatrix = rEngine.eval(nameToAssignOn + " <- matrix( " + nameToAssignOn + " ,nr=1)");
        for (int i = 1; i < sourceArray.length; i++) {
            rEngine.assign("temp", sourceArray[i]);
            resultMatrix = rEngine.eval(nameToAssignOn + " <- rbind(" + nameToAssignOn + ",matrix(temp,nr=1))");
        }

        return resultMatrix;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T07:04:32.050

如果你做这样的事情（根据你的需要改变行号和行号）怎么办？

```
RConnection c = new RConnection();

double[][] test = { { 1.0D, 2.0D }, { 3.0D, 4.0D } };

c.assign("res", test[0]);
for (int i = 1; i < 2; i++) {
  c.assign("tmp", test[i]);
  c.eval("res<-rbind(res,tmp)");
}

REXP x = c.eval("sum(res)");
System.out.println(x.asString()); 
```

正如预期的那样，这将返回 10，但是，这

```
String s = c.eval("rowSums(res)").asString();
System.out.println(s); 
```

没有打印出它假设的内容，它只是返回`3`，也许我的 Ubuntu 安装的 RServe 已损坏并且无法打印结果字符串中空格之后的任何内容`3 7`：

```
> rowSums(d)
c1 c2 
3  7 
```

我也找不到好的例子:(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-15T00:49:15.983

你可以：

*   将数组展平为整数行向量，这样

    a11 a12

    a21 a22

=>

```
flat_array = new int[] {a11, a12, a21, a22} 
```

*   将其分配给局部变量，例如：

    rEngine.assign(".values", flat_array);

*   调用在全局中创建矩阵（或数据帧）的 R 函数，例如：

在 R 中：

```
 make.matrix <- function(nrows, ncols, values) {

        value_mat <- matrix(values, nrow=nrows, ncol=ncols, byrow=TRUE)
        temp.res <<- res
        res
    } 
```

在 Java 中：

```
rEngine.eval("make.matrix(2,2,.values)"); 
```

*   现在你在 temp.res 有了矩阵

# javascript - Phonegap 不支持交易功能

> ID：13089357
> 
> 赞同：0
> 
> 时间：2012-10-26T14:57:17.237
> 
> 标签：javascript, android, sqlite, cordova, opendatabase

我正在使用带有 phonegap 的开放数据库，并且在我桌面上的 Chrome 浏览器中一切正常，但是当我在我的 android 设备上运行它并单击调用 insertRecord() 的按钮时，它说不是用 eclipse 我得到错误

```
10-26 10:37:13.191: E/Web Console(12134): Uncaught ReferenceError: insertRecord is not defined at file:///android_asset/www/index.html:137 
```

我的代码看起来像这样

```
document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is ready
//
function onDeviceReady() {

var minChange;
var pumpBore;
var sInches;
var sMin;
var maxEfficiency;
var field;
var percent;
var calcSlide;
var results;
var id;
var listing;
var slider_value;
var getMin;

var dateDay = "Wed";
var dateNum = "22";
var date = new Date();
var dateDay = date.getDay();
var dateNum = date.getDate();
var hour = date.getHours();
var min = date.getMinutes();
var dateTime = hour + ":" + min;

pumpBore = $("#pumpBore").val();
sInches = $("#sInches").val();
sMin = $("#sMin").val();
calcSlide = $("#calcSlide").val();
field = $('#field').val();
results = $('#results');
id = $('#id');
getMin = $('#slider-1').val();

// FUNCTION TO CALCULATE AND DISPLAY PRODUCTION
function calculate(sMin) {
    if (sMin == null)
        sMin = sMin

    pumpBore = $("#pumpBore").val();
    sInches = $("#sInches").val();
    calcSlide = $("#calcSlide").val();
    field = $('#field').val();

    console.log("Calc pump Bore: " + pumpBore);
    console.log("Calc Inches: " + sInches);
    console.log("Calc Min: " + sMin);
    console.log("Field Amount: " + field);
    console.log("Percentage: " + percent);
    console.log('Time: ' + dateTime);
    maxEfficiency = Math.round(parseFloat(pumpBore) * parseFloat(sInches)
            * parseFloat(sMin));

    console.log("Max Efficiency " + maxEfficiency);
    // console.log(calcSlide);
    $("#sMin").val(sMin);
    $("#barrels").val(maxEfficiency);

    percent = Math.round(parseFloat(field) / parseFloat(maxEfficiency) * 100);

    $('#percent').val(percent + "%");

    console.log("========================================");
    sMin = $('#sMin').val();
} // eof calculate

function consoleList() {
    console.log('============================');
    console.log("pump Bore: " + pumpBore);
    console.log("Stroke Inches: " + sInches);
    console.log("Strokes Per Minute: " + $('#sMin').val());
    console.log("Max Efficiancy: " + maxEfficiency);
    console.log("Field: " + field);
    console.log("Field %: " + percent);
    console.log('Time: ' + dateTime);
    console.log('Slider Value: ' + slider_value);
    console.log('============================');
    console.log(results);

}

var strokeMin = $('#sMin').val();
var createStatement = "CREATE TABLE IF NOT EXISTS Notes (id INTEGER PRIMARY KEY AUTOINCREMENT, dateDay TEXT, dateNum TEXT, dateTime TEXT, pumpBore TEXT, sInches TEXT, sMin TEXT, maxEfficiency TEXT, field TEXT, prodPercent TEXT)";
var selectAllStatement = "SELECT * FROM Notes ORDER BY id DESC";
var insertStatement = "INSERT INTO Notes (dateDay, dateNum, dateTime, pumpBore, sInches, sMin, maxEfficiency, field, prodPercent) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)";
var deleteStatement = "DELETE FROM Notes WHERE id=?";
var dropStatement = "DROP TABLE Notes";
var insertValues = "[pumpBore.value, sInches.value, sMin.value, maxEfficiency.value, field.value, percent.value]";
var testInsertValues = '["123", "234", "567", "657", "753", "2654"]';

var db = openDatabase("noteList", "1.0", "Note List", 500000);
var dataset;
createTable();

function onError(tx, error) {
    alert(error.message);
}

function showRecords() {
    results.html('');
    db.transaction(function(tx) {
        tx.executeSql(selectAllStatement, [], function(tx, result) {
            dataset = result.rows;
            for ( var i = 0, item = null; i < dataset.length; i++) {
                item = dataset.item(i);

                listing = '<div class="noteContainer">'
                        + '<div class="dateContainer">'
                        + '<span id="weekDay" class="">'
                        + item['dateDay']
                        + '</span>'
                        + '<span id="date" class="">'
                        + item['dateNum']
                        + '</span>'
                        + '<span id="time" class="">'
                        + item['dateTime']
                        + '</span>'
                        + '</div><!-- eof dateContainer -->'
                        + '<div class="specContainer">'
                        + '<span class="">pump Bore: '
                        + item['pumpBore']
                        + '</span>'
                        + '<span class="">Stroke Length: '
                        + item['sInches']
                        + '</span>'
                        + '<span class="">Stroke/Min: '
                        + item['sMin']
                        + '</span>'
                        + '<span class="">Barrels: '
                        + item['maxEfficiency']
                        + '</span>'
                        + '<span class="">Field Prod: '
                        + item['field']
                        + '</span>'
                        + '<span class="">Production %: '
                        + item['prodPercent']
                        + '</span>'
                        + '</div><!-- eof specContainer -->'
                        + '<div class="mailButton">'
                        + '<img src="images/mail_Button.png" alt="mail" />'
                        + '</div><!-- eof mail -->'
                        + '<div id="" style="clear:both"></div>'
                        + '<a href="#" onclick="deleteRecord('
                        + item['id']
                        + ')">delete</a></li>';
                +'</div><!-- eof noteContainer -->';
                console.log(i);
                results.append(listing);
            }
        });
    });
}

function createTable() {
    db.transaction(function(tx) {
        tx.executeSql(createStatement, [], showRecords, onError);
    });
}

function insertRecord() {
    db.transaction(function(tx) {
        // consoleList();
        console.log("The field:" + field);
        tx.executeSql(insertStatement, [ dateDay, dateNum, dateTime, pumpBore, sInches, getMin,
                maxEfficiency, field, percent ], loadAndReset, onError);
        // ("Row Inserted!");
    });
}

function loadRecord(i) {
    var item = dataset.item(i);
    dateDay.value = item['dateDay'];
    dateNum.value = item['dateNum'];
    dateTime.value = item['dateTime'];
    pumpBore.value = item['pumpBore'];
    sInches.value = item['sInches'];
    sMin.value = item['sMin'];
    maxEfficiency.value = item['maxEfficiency'];
    field.value = item['field'];
    percent.value = item['prodPercent'];
    id.value = item['id'];
}

function updateRecord() {
    db.transaction(function(tx) {
        tx.executeSql(updateStatement, [ dateDay.value, dateNum.value,
                dateTime.value, pumpBore.value, sInches.value, sMin.value,
                maxEfficiency.value, field.value, percent.value ],
                loadAndReset, onError);
    });
}

function deleteRecord(id) {
    db.transaction(function(tx) {
        tx.executeSql(deleteStatement, [ id ], showRecords, onError);
    });
    resetForm();
}

function dropTable() {
    db.transaction(function(tx) {
        tx.executeSql(dropStatement, [], showRecords, onError);
    });
    resetForm();
}

function loadAndReset() {
    // alert(listing);
    resetForm();
    showRecords();
}

function resetForm() {
    dateDay.value = '';
    dateNum.value = '';
    dateTime.value = '';
    pumpBore.value = '';
    sInches.value = '';
    sMin.value = '';
    field.value = '';
    percent.value = '';
    id.value = '';
}

$(function() {
    $('#slider-1').live('change', function(){
        slider_value = $(this).val()
        console.log(slider_value)
        minChange = slider_value;
        // minChange = 100 - minChange;
        minChange = Math.round(minChange);
        console.log("Min Change " + minChange);

        calculate(minChange);
        // do whatever you want with that value...
    })
});

// / Knob Turn Function
$(function() {

    $('#dialBG, #dialBG2 ').knobKnob({
        snap : 1,
        value : -10,
        turn : function(ratio) {
            console.log(ratio);
            //minChange = (ratio * 100);
            // minChange = 100 - minChange;
            //minChange = Math.round(minChange);
            //console.log("Min Change " + minChange);

            //calculate(minChange);
        }
    });

});

} 
```

我有一个指向它的链接 kzoomarketing.com/apps/oilapp/121/ 所以可以看到它。在计算器页面上，右上角的保存按钮记录所有字段并将它们填充到笔记页面中。它在网络浏览器中运行良好。

如果我将 js 函数更改为包装在 ondeviceready 中并运行它，我会收到上面提到的 log cat 错误。

谁能帮我让它在android设备上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T09:09:27.880

函数在函数`insertRecord`内部定义`onDeviceReady`。

您必须重新组织您的代码，以便这样的事件处理程序可以全局访问（即，从 HTML）。

# python - 使用 pandas 在 HDF 中存储包含字符串的数据帧时的谜团

> ID：13089359
> 
> 赞同：7
> 
> 时间：2012-10-26T14:57:26.567
> 
> 标签：python, pandas, hdf5

万圣节的熊猫和 HDF 有一些令人毛骨悚然的东西：

```
df = pandas.DataFrame([['a','b'] for i in range(1,1000)])
store = pandas.HDFStore('test.h5')
store['x'] = df
store.close() 
```

然后

```
ls -l test.h5
-rw-r--r-- 1 arthur arthur 1072080 Oct 26 10:50 test.h5 
```

1.1M？有点陡峭，但为什么不呢。这就是事情变得非常诡异的地方

```
store = pandas.HDFStore('test.h5') #open it again
store['x'] = df #do the same thing as before!
store.close() 
```

然后

```
ls -l test.h5
-rw-r--r-- 1 arthur arthur 2122768 Oct 26 10:52 test.h5 
```

你现在已经进入了暮光区。不用说，运行后store是没有区别的，但是每次迭代都让文件变胖了一点。

似乎只有在涉及字符串时才会发生。在我提交错误报告之前，我想知道我是否在这里遗漏了什么......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T19:08:56.983

似乎这可能是原因：[http ://www.hdfgroup.org/hdf5-quest.html#del](http://www.hdfgroup.org/hdf5-quest.html#del)

这是一个大问题 HDF5，wtf。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T13:37:15.390

是的：“HDF5 不是数据库”。人们经常使用 ptrepack（PyTables 的一部分）来“重新打包”HDF5 文件而没有任何死字节。

# asp.net-mvc - GenericPrincipal 角色在 MVC 视图中不可用

> ID：13089361
> 
> 赞同：3
> 
> 时间：2012-10-26T14:57:38.073
> 
> 标签：asp.net-mvc, asp.net-roles

在我们的 MVC 应用程序中，我们绕过 RolesProvider，而只是将我们的角色缓存在将被传递的 cookie 中。根据互联网上的一些建议，我们正在利用该`Application_AuthenticateRequest`事件，如下所示：

```
 protected void Application_AuthenticateRequest(Object sender, EventArgs e)
    {
        var user = HttpContext.Current.User;
        if (user == null || !user.Identity.IsAuthenticated)
        {
            return;
        }

        // read the roles from the cookie and set a custom generic principal
        var fi = (FormsIdentity)HttpContext.Current.User.Identity;
        var httpCookie = HttpContext.Current.Request.Cookies["Roles"]; // custom cookie set during authentication
        if (httpCookie != null)
        {
            string rolesCookie = httpCookie.Value;
            var pmUserRoles = rolesCookie.Split(',');
            GenericPrincipal gp = new GenericPrincipal(fi, pmUserRoles);
            HttpContext.Current.User = gp;
        }
    } 
```

我逐步完成了该方法，并在我们的一些角色中加入了几个条件，并且在设置当前用户后立即`User.IsInRole("rolename")`工作，就像一个魅力。

但是，当尝试在视图中进行相同的调用时：

```
@if(Request.IsAuthenticated)
{
    if (User.IsInRole("role1") || User.IsInRole("role2"))
    {
        <!-- show something -->
    }
    else if (User.IsInRole("role3"))
    {
        <!-- show something else -->
    }
} 
```

无法访问角色。当我此时深入研究用户时，看起来角色甚至不存在，就在我确认用户在`AuthenticateRequest`事件结束时拥有它们之后。

[这个问题](https://stackoverflow.com/questions/8717085/setting-roles-by-using-genericprincipal-instance)有类似的问题，我打算在那里发表评论，但我想我不能因为我的低代表 - 但看起来这不仅仅是我的问题。

我还查看了具有类似方法的[这个问题](https://stackoverflow.com/questions/2767616/asp-net-replace-genericprincipal)，但这给了我相同的结果。

对正在发生的事情有任何建议或意见吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:23:40.373

我终于找到了答案，使用`Application_OnPostAuthenticateRequest`处理程序而不是`Application_AuthenticateRequest`.

感谢[这个答案](https://stackoverflow.com/a/5560411/1615007)（令人惊讶的是，这不是该线程中接受的答案！）。感谢蒂亚戈·马蒂亚斯！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:02:36.590

尝试`HttpContext.Current.User.IsInRole`代替`User.IsInRole`.

# sphinx - sphinx search：如何获取词干的频率词列表？

> ID：13089362
> 
> 赞同：0
> 
> 时间：2012-10-26T14:57:39.927
> 
> 标签：sphinx, stemming

我正在尝试`indexer`从命令行工具获取单词的频率列表，并使用未提取的单词来获取它，尽管我设置了`morphology = stem_en`索引设置并且搜索本身在具有相同词干的单词上工作正常。有没有办法用词干获得该列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:26:16.160

我能想到的唯一方法是获取索引器的输出，然后通过 BuildKeywords API 运行它，以获得词干计数。可以在一个 API 调用中放置数千个关键字，因此非常轻量级。

# python - 为什么 help(42) 有效，但 help("") 和 help("x") 都无效？

> ID：13089367
> 
> 赞同：6
> 
> 时间：2012-10-26T14:57:50.833
> 
> 标签：python, python-2.7

> **可能重复：**
> [python help('string') 与 help(list) 不一致？](https://stackoverflow.com/questions/9998488/inconsistency-in-python-helpstring-versus-helplist)

在 Python 的交互式 shell 中，如果我键入，`help(42)`我将获得有关 int 对象的所有信息。如果我输入`help("")`，我什么也得不到，如果我输入`help("x")`，我会得到“没有找到'x'的 Python 文档”。

我知道我可以打字`help(str)`，但我想了解为什么其他两个工作方式不同`help(42)`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T15:04:34.393

请参阅[有关帮助功能的文档](http://docs.python.org/library/functions.html#help)：

> 如果没有给出参数，交互式帮助系统将在解释器控制台上启动。如果参数是字符串，则将该字符串作为模块、函数、类、方法、关键字或文档主题的名称进行查找，并在控制台上打印帮助页面。如果参数是任何其他类型的对象，则会生成有关该对象的帮助页面。

换句话说，当`help`给定一个类或类型时，它会返回该类或类型的帮助。

```
class C: pass
help(C) 
```

当`help`给出除字符串以外的任何实例时，例如`help(1)`，它提供关于该变量类型（`int`、`float`或定义的类）的文档。

```
help(1)
help(C()) 
```

当给定一个字符串时，它会提供有关该字符串所引用的类型或类的文档。如果您需要`str`课程本身的帮助，您可以执行以下操作：

```
help(str) 
```

或者

```
help("str") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T15:06:11.527

从[Python 文档](http://docs.python.org/library/functions.html#help "Python 文档")：

> *帮助（[对象]）*
> 
> 调用内置帮助系统。（此函数用于交互式使用。）如果没有给出参数，交互式帮助系统将在解释器控制台上启动。如果参数是字符串，则将该字符串作为模块、函数、类、方法、关键字或文档主题的名称进行查找，并在控制台上打印帮助页面。如果参数是任何其他类型的对象，则会生成有关该对象的帮助页面。

因此，只有当参数`help()`是字符串时，行为才会有所不同。

# knockout.js - 下拉菜单更改时不会触发淘汰赛手动订阅

> ID：13089368
> 
> 赞同：5
> 
> 时间：2012-10-26T14:57:57.920
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

另一个我似乎无法找到帮助的淘汰赛问题。

我基本上是在尝试实现级联下拉菜单。前几天我就如何解析我的复杂 JSON（来自 cakePHP 控制器）请求帮助。前几天我收到的帮助非常好，但我遇到了另一个小问题。

我遇到的问题是在调用 JSON 以获取国家/地区列表后，我正在更新 viewModel。填充下拉列表后，我希望显示县列表并最终显示城市列表，但我还没有。不幸的是，当我更改时，我从列表中选择了一个国家，我的 observable 不会触发。我怀疑这是因为我已经`this.selectedCountry = ko.observable()`使用映射创建和更新了，但我不知道这应该是什么有效选项。当然，我也可以成为标志：/

我有以下代码

HTML：

```
<select id="countries" 
            data-bind='
                options: countries, 
                optionsValue : "Id", 
                optionsText: "country", 
                optionsCaption: "[Please select a country]", 
                value: selectedCountry'>
</select>

<select id="counties" 
                data-bind='
                    options: selectedCountry() ? counties : null, 
                    optionsValue : "Id", 
                    optionsText: "County", 
                    optionsCaption: "[Please select a county]", 
                    value: selectedCounty,
                    visible: (counties() && counties().length > 0)'>
        </select> 
```

​Javascript

```
var countryData= {"countries":[{"Country":{"id":"1","country":"England"}},{"Country":{"id":"2","country":"Wales\/Cymru"}},{"Country":{"id":"3","country":"Scotland"}},{"Country":{"id":"4","country":"Republic of Ireland"}},{"Country":{"id":"5","country":"Northern Ireland"}}]};

var countyData= {"country":[{"County":{"id":"1","county":"Essex"}}]};

var countryMappingOptions = {
    'countries': {
        'update': function (options) {
            return ko.mapping.fromJS(options.data.Country);
        },
        'ignore': ["selectedCountry"]
    }
};

 var countyMappingOptions = {
    'counties': {
        'update': function (options) {
            return ko.mapping.fromJS(options.data.County);
        }
    }
};
        var vm= function () {
            this.selectedCountry = ko.observable(); 
            this.selectedCounty =  ko.observable();
            this.countries = ko.mapping.fromJS([]); 
            this.counties =  ko.mapping.fromJS([]);
            // Whenever the continent changes, reset the country selection
            this.selectedCountry.subscribe(function (countryId) {
                alert(countryId);   
                this.selectedCounty(undefined);
                this.counties(undefined);
                if (countryId != null) {
                   ko.mapping.fromJS(countyData, countyMappingOptions,this.viewModel );
              }
            });
            this.selectedCounty.subscribe(function (countryId) {
                alert(countryId);    
            } .bind(this));
        };

        var viewModel = new vm();
        ko.applyBindings(viewModel );
        console.log(viewModel .countries());
        ko.mapping.fromJS(countryData, countryMappingOptions ,viewModel );
        console.log(viewModel .selectedCountry() ); 
```

我还创建了一个 JSFiddle 来演示这里的问题[http://jsfiddle.net/jbrr5/21/](http://jsfiddle.net/jbrr5/21/)

再次感谢您对这个问题的任何帮助，一旦我掌握了淘汰赛的窍门，它就会变得容易得多。

谢谢​</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T22:44:55.440

一些问题：

*   你忘了做`.bind(this)`第一次订阅
*   `this.viewModel`而不仅仅是`this`
*   你有`optionsValue: "Id"`而不是`optionsValue: "id"`
*   你有`optionsText: "County"`而不是`optionsText: "county"`
*   你`countyData`的数组被调用`country`而不是`counties`

更新小提琴：http: [//jsfiddle.net/antishok/jbrr5/23/](http://jsfiddle.net/antishok/jbrr5/23/)

# android - 如何使用生成的位图使我的列表工作顺利？

> ID：13089372
> 
> 赞同：0
> 
> 时间：2012-10-26T14:58:03.757
> 
> 标签：android

嗨，我有一个 android 应用程序的问题。我有一个包含位图和字符串的列表。

位图总是通过`BitmapFactory`. 我在自己的线程中没有这个，所以当列表变长时，页面的加载需要很多时间。

现在我的问题：

什么是使用户顺利完成此操作的最简单方法，因此他不必等待。最好的方法是先显示字符串，然后显示每个位图的加载条，然后一个接一个地生成它。

但是我应该为每个图像使用一个额外的线程还是一个线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:03:14.983

看下面的线程：

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

特别是这个答案：[https ://stackoverflow.com/a/3068012/586859](https://stackoverflow.com/a/3068012/586859)

您要查找的内容通常标记为“延迟加载”。该线程包含一种方法，甚至可以缓存您正在下载的图像以加快图像加载速度。我建议优化您的`ListView`using `ViewHolder`，并使用类似于该帖子中的适配器来获得更流畅的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:06:30.913

如果有很多图片，你不能为每张图片创建一个线程，因为它会抛出异常。最简单的 Android 方法是为这些作业创建一个 AsyncTask，如果文件很多，则创建一个具有后台线程的本地服务。如果你想要更优雅的方式，你可以使用 java.util.concurrent.*; 并为此作业创建线程轮询。

# c++ - 案例后如何循环回到switch语句的开头

> ID：13089374
> 
> 赞同：2
> 
> 时间：2012-10-26T14:58:06.440
> 
> 标签：c++, loops, switch-statement

我有一个我确定是一个简单的问题，但我无法弄清楚。在下面的代码中，我希望能够让案例 5 之后重新显示选项。我怎样才能做到这一点？提前致谢！

```
// Input the race of your character
    cout << "Choose a race here: " << endl
    << "1) Human, 2) Elf, 3) Dark Dwarf, 4) Commoner, 5) Race info, 6) Admin Debug Race : ";

    cin >> mCharRace;

    switch (mCharRace)
        {
        case 1:
        cout << "You have chosen Human!" << endl;
        mExpPoints = 999;
        mArmor = mArmor + 2;
        break;
    case 2:
        cout << "You have chosen Elf!" << endl;
        mAccuracy = mAccuracy + 2;
        mWeapon.mDamageRange.mLow = mWeapon.mDamageRange.mLow + 1;
        break;
    case 3:
        cout << "You have chosen Dark Dwarf!" << endl;
        mWeapon.mDamageRange.mHigh = mWeapon.mDamageRange.mHigh + 2;
        mMaxHitPoints = mMaxHitPoints + 3;
        break;
    case 4:
        cout << "You have chosen Commoner! Brave man." << endl;
        mAccuracy       = mAccuracy - 3;
        mHitPoints      = mHitPoints - 5;
        mMaxHitPoints   = 8;
        mExpPoints      = -250;
        mNextLevelExp   = 1500;
        mArmor          = -1;
        break;
    case 5:
        cout << "Placeholder for explanation text." << endl;
        break;
    case 6:
        cout << "ADMIN POWERS UNITE!!!!!!!" << endl;
        mAccuracy       = 20;
        mHitPoints      = 1000;
        mMaxHitPoints   = 1000;
        mExpPoints      = 0;
        mNextLevelExp   = 1000;
        mArmor          = 100;
        mWeapon.mName   = "Admin Sword of HNNNG!";
        mWeapon.mDamageRange.mLow   = 100;
        mWeapon.mDamageRange.mHigh  = 150;
        mGold           = 1000000;
        break; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T15:00:50.863

**switch-case 构造不是迭代构造。**它只能选择某个案例并执行它。因此，控制流无法恢复。

所以，你不能用它来循环。将其包装在**while**或**for**循环构造中。

```
while(condition){
   switch (mCharRace){
   ...
   ...
   }
} 
```

当您想停止循环时，只需将**条件**设置为**false 。**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T15:00:24.283

将输入和切换代码包装在一个循环中，并分配一个变量`exitLoop`以退出循环。默认情况下将该变量设置为 TRUE，除非在您想要重复输入的情况下。在那些中，设置`exitLoop`为 false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:00:15.643

在你的第一个 cout 之前添加一个标签

```
label:

cout << "Choose a race here: " << endl
<< "1) Human, 2) Elf, 3) Dark Dwarf, 4) Commoner, 5) Race info, 6) Admin Debug Race : ";

cin >> mCharRace;
... 
```

然后在案例 5 中，添加

```
goto label; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-28T02:45:55.440

将它放在一个`for(;;)`循环中并使用`continue`而不是`break`. `break`在语句结束后放置另一个`switch`以捕获真正想要中断的情况：

```
for (;;)
{
    switch (x)
    {
    case case_that_wants_to_loop:
        // ...
        continue;
    case case_that_wants_to_break:
        // ...
        break;
    }
    break;
} 
```

# javascript - 专注于搜索文本字段并使搜索列表可导航

> ID：13089375
> 
> 赞同：0
> 
> 时间：2012-10-26T14:58:12.537
> 
> 标签：javascript, user-interface, google-chrome-extension, dom-events, unobtrusive-javascript

我在其中一个代码中有一个搜索功能，它理想地在值列表（小数字）上执行搜索。

```
<li>abc</li> 
<li>def</li> 
... 
```

我在底部有一个搜索按钮，我放置了一个`keyup`事件侦听器来获取即时搜索。现在的问题是如何使它可导航。理想的场景搜索一些文本，按回车键，它应该打开第一个元素，否则你应该能够导航。

如果我在上面不清楚，我实际上是在要求一个与 Facebook Chat 侧边栏搜索非常相似的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:19:21.303

为了没有将jQuery添加到标签列表中的OP（恭喜你），我将添加一个纯JavaScript的小型导航插件。

**披露——实际逻辑的功劳归功于 Facebook 的 Eric Priestley，因为这是从他的 Javelin JS 库中提取的。**

我在[这里](http://jsfiddle.net/55R39/30/)发布了指向小提琴的链接。我还从您的问题中假设您已经有了*搜索*解决方案，并且只是在寻找导航解决方案。

从小提琴交叉张贴。我在代码中评论了很多，所以应该是自我解释的。虽然如果您确实有疑问，请与我们联系。

**HTML** 可以是你想要的任何东西。为简洁起见，我添加了这个

```
<input id='control' type='text' placeholder='Search text here' />
<!-- List of results - hardcoded for now -->
<ul id='hardpoint' class='hidden'>
    <li class='item'>Search item 1</li>
    <li class='item'>Search item 2</li>
    <li class='item'>Search item 3</li>
    <li class='item'>Search item 4</li>
</ul>​ 
```

**编码**

```
(function() {

    /**
     * Helper functions
     */
    var bind = function( context, func, more ){
        if (typeof func !== 'function') {
            throw new Error ("No function supplied to bind function");
        }
        var bound = Array.prototype.slice.call( arguments ).slice(2);
        if (func.bind) {
            return func.bind.apply(func, [context].concat(bound));
        }
        return function() {
            return func.apply(context || window, bound.concat(Array.prototype.slice.call( arguments )));
        }
    };

    var getChildElements = function(node) {
        var childNodes = Array.prototype.slice.call(node.childNodes);
        childNodes = childNodes.filter(function(item) {
            return item.tagName && item.nodeType && item.nodeType === 1 && item !== node;
        });
        return childNodes;
    };

    var hasClass = function(node, className) {
        return ((' ' + node.className + ' ').indexOf(' ' + className + ' ') > -1);
    };

    var alterClass = function(node, className, add) {
        var has = hasClass(node, className);
        if (add && !has) {
            node.className = node.className.trim() + ' ' + className;
        }
        else if (has && !add) {
            node.className = node.className.replace(
            new RegExp('(^|\\s)' + className + '(?:\\s|$)', 'g'), ' ');
        }
    };

    var getIndex = function( list, element ){
        var index = -1;
        for (var i = 0; i < list.length; i++) {
            if( list[i] === element ){
                index = i;
                break;
            }
        };
        return index;
    };

    // Start of plugin
    // Constructor
    var ListNavigator = function(config) {};

    // This can be moved within constructor if you so prefer
    ListNavigator.prototype.init = function(config) {
        // On what element do you want the controls to activate
        // Pressing up down etc on this element, triggers tha navigation
        this.control = document.getElementById(config.control);

        // The list of results that can be navigated
        this.hardpoint = document.getElementById(config.hardpoint);

        // A list of items ( usually, childNodes ) of hardpoint
        // Dynamically populated
        this.display =  getChildElements(this.hardpoint);;

        // What to set the focus on initially
        this.focus = -1;

        // Specify a function to execute when the user chooses a result
        // Keydown - Return : configured to be the choose event type now
        this.choose = config.choose;

        this.selector = config.selector;
    };

    ListNavigator.prototype.run = function() {
        var controlEvents = ['focus', 'blur', 'keydown', 'input'],
            mouseEvents = [ 'mouseover', 'mouseout', 'mousedown' ],
            self = this,
            selector = this.selector;

        controlEvents.forEach(function(event) {
            self.control.addEventListener(event, bind(self, self.handleEvent), false);
        });

        mouseEvents.forEach(function(event) {
            self.hardpoint.addEventListener(event, bind(self, self.onmouse), true);
        });
    };

    // Logic to change the focus on keydown
    ListNavigator.prototype.changeFocus = function(d) {
        var n = Math.min( Math.max( -1, this.focus + d ), this.display.length - 1);

        if (this.focus >= 0 && this.focus < this.display.length) {
            alterClass(this.display[this.focus], 'focused', false);
        }

        this.focus = n;
        this.drawFocus();
        return true;
    };

    // Set the focus on the targetted element
    ListNavigator.prototype.drawFocus = function() {
        var f = this.display[this.focus];
        if (f) {
            alterClass(f, 'focused', true);
        }
    };

    // Handle mouse events
    ListNavigator.prototype.onmouse = function(event) {
        var target = event.target, type = event.type;
        if ( hasClass( target, this.selector ) ) {
            if ( type === 'mousedown' ) {
                // Choose this element
                this.choose(target);
            }
            else if ( type === 'mouseover' ) {
                // Set the focus to element on which mouse is hovering on
                this.focus = getIndex( this.display, target );
                this.drawFocus();
            } 
            else if ( type === 'mouseout' ){
                // Reset the display to none
                this.changeFocus(Number.NEGATIVE_INFINITY);
            }
        };
    };

    ListNavigator.prototype.handleEvent = function(e) {
        var type = e.type;
        if (type === 'blur') {
            this.focused = false;
            this.hide();
        } else {
            alterClass(this.hardpoint, 'hidden', false);
            this.update(e);
        }
    };

    ListNavigator.prototype.hide = function() {
        this.changeFocus(Number.NEGATIVE_INFINITY);
        this.display = [];
        alterClass(this.hardpoint, 'hidden', true);
    };

    ListNavigator.prototype.submit = function() {
        if (this.focus >= 0 && this.display[this.focus]) {
            this.choose(this.display[this.focus]);
        } else {

            if (this.display.length) {
                this.changeFocus(1);
                this.choose(this.display[this.focus]);
            }
        }
        return false;
    };

    ListNavigator.prototype.update = function(event) {

        console.log( 'upadte' );
        this.display = getChildElements(this.hardpoint);

        if (event.type === 'focus') {
            this.focused = true;
        }

        var k = event.which;
        if (k && event.type == 'keydown') {
            switch (k) {
            case 38:
                if (this.display.length && this.changeFocus(-1)) {
                    event.stopPropagation();
                }
                break;
            case 40:
                if (this.display.length && this.changeFocus(1)) {
                    event.stopPropagation();
                }
                break;
            case 13:
                if (this.display.length) {
                    this.hide();
                    event.stopPropagation();
                    this.submit();
                }
                break;
            case 27:
                if (this.display.length) {
                    this.hide();
                    event.stopPropagation();
                }
                break;
            case 9:
                // If the user tabs out of the field, don't refresh.
                return;
            }
        }

    };

    window.ListNav = ListNavigator

})();

var nav = new ListNav();
nav.init({
    control: 'control',
    hardpoint: 'hardpoint',
    selector: 'item',
    choose: function(){
        console.log( arguments );
    }
});
nav.run();​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:53:06.377

```
<html lang="html">
<head>
<meta charset="utf-8" />
<title>Search Users</title>
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript">
$(function(){
    $("#searched_users_list").hide();
    $("#search_user").keyup(function(){
        var what_to_search = $(this).val().toLowerCase();
        if(what_to_search != ''){
            $("#users_list").hide();
            $("#searched_users_list").show();
        }else{
            $("#users_list").show();
            $("#searched_users_list").hide();
        }
        var searched_users = '';
        var user_name = '';
        $("#users_list").children('li:contains("'+what_to_search+'")').each(function(){
            user_name = $(this).html();
            searched_users += "<li>"+user_name+"</li>";
        });

        if(searched_users != '')
            $("#searched_users_list").html(searched_users);
        else
            $("#searched_users_list").html('<li>No user found....</li>');
    })
});
</script>
</head>
<body>
<ul id="users_list">
    <li>abc</li>
    <li>defa</li>
    <li>ghife</li>
</ul>
<ul id="searched_users_list">
    <li>No user found....</li>
</ul>
<input type="text" name="search_users" id="search_user" value="" />
</body>
</html>

It's my first post... Sorry If something is odd. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T02:46:07.130

如果这是我的页面，我会将可搜索元素标记为类，`<li class="searchable">abc</li>`并且我将使用 jQuery 通过选择器查找页面中的所有可搜索元素，例如`$("li.searchable:contains('" + SEARCHTERM + "')")`之前我们定义 var SEARCHTERM = $("#searchbox").文本（）;

您可能希望对此进行一些微调（例如：contains 区分大小写），但这听起来是否方向正确？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T13:09:39.937

您是否正在寻找自动完成功能...？如果是这样，您应该查看 jQuery UI 自动完成：http: [//jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

# windows - 在 Windows 7 中设置 MinGW 以编译充分可移植的 C++ 代码

> ID：13089383
> 
> 赞同：3
> 
> 时间：2012-10-26T14:58:37.980
> 
> 标签：windows, compilation, path, mingw

**前言**：我真的拒绝在 Visual Studios 和 Windows 中使用编译和使用东西的方式编写和学习 C/C++。我更喜欢带有 vim 和 g++ 的 Ubuntu，但除此之外，我还想拥有一个基于 Windows 的良好工作环境。

**问题**：基本上我正在使用 Notepad++ 学习 C++，并研究了 MinGW 作为我的编译器。我很难找到关于如何最好地设置它的好答案，以及编译代码所涉及的所有细节，以及它如何依赖于 MinGW 的 dll 文件。

看来我必须设置路径才能在 C:\MinGW\bin 文件夹之外进行编译，但即便如此，我也不得不在同一个文件夹中执行程序。否则我会收到一个错误，我缺少一个 dll。

虽然这不仅给实际开发带来麻烦（不要说迁移到 Linux，请阅读前言），但它会阻止我的代码对其他 Windows 系统具有任何形式的可移植性。也许我缺乏关于如何正确创建可执行文件和使用安装程序打包文件的知识。如果这就是我需要学习的内容，那么也许可以为我指明正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:33:33.710

下载mingw的[nuwen发行版](http://nuwen.net/mingw.html)。使用安装程序安装。这将创建（除其他外）一个名为`open_distro_window.bat`. 在桌面上创建一个快捷方式。双击它，它将打开一个窗口，其中设置了路径和其他环境变量，以便您可以编译、链接等（在您选择的任何目录中）。

为了让生活更轻松，一旦您创建了快捷方式，右键单击并编辑其属性 - 将“开始于”目录更改为您保留正在开发的项目的根目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T19:20:58.460

您需要做的就是让您的 exe 工作，或者将 GCC DLL 放在 PATH 中的某个位置（通过添加`C:\MinGW\bin`到您的 PATH），或者使用“-static”作为链接器参数编译所有代码以静态链接到 GCC 运行时 DLL。分发可执行文件时，您需要确保 libgcc*.dll 和 libstdc++-6.dll 都与可执行文件一起安装。（如果您仍在使用 MinGW.org 的工具链，那么是时候升级到 MinGW-w64 了，他们没有 a`mingwm10.dll`或其他名称）。

GCC DLL 与 Visual Studio 的 C++ 可再发行组件非常相似。要运行使用特定 VS 版本构建的代码，您需要 DLL。静态链接是没有这个问题的唯一方法。

此外，获得像 CMake 这样的跨平台构建系统。它会让你的生活轻松很多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T18:10:05.043

你写道：`I much prefer Ubuntu with vim and g++`。
我现在使用了很长时间的“msys / mingw”并且很高兴。

MSYS 是**GNU 实用程序的集合，**例如**bash**、make、gawk 和 grep，允许构建依赖于传统**UNIX 工具**的应用程序和程序。

它旨在补充MinGW和cmd shell的不足。[阅读更多 MSYS/minGW](http://www.mingw.org/wiki/MSYS)。将您的资源放在那里的`c:\msys\1.0\src`文件夹中，它们放在右边。

我也试过了，很久以前用“cygwin”。它总是一个或另一个问题。

# asp.net-mvc - 我可以将数据库列描述映射到 DisplayNameAttribute 吗？

> ID：13089387
> 
> 赞同：0
> 
> 时间：2012-10-26T14:58:47.687
> 
> 标签：asp.net-mvc, entity-framework-5

> **可能重复：**
> [Entity Framework 4.1 从数据库表列描述中动态检索标量属性的摘要](https://stackoverflow.com/questions/7950917/entity-framework-4-1-dynamically-retrieve-summary-for-scalar-properties-from-dat)

是否可以将列描述（`MS_Description`数据库中的扩展属性）映射到`DisplayNameAttribute`（所使用的名称`@Html.DisplayNameFor`）？

我不想使用数据注释，因为我希望 DBA 在数据库中设置正确的列描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:42:25.773

```
MvcApplication10.Models.Acesso_Usuario

   <div class="editor-label">
        @Html.LabelFor(model => model.Senha)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Senha)
        @Html.ValidationMessageFor(model => model.Senha)
    </div> 
```

如果您使用的是 CSHTML，他会从 DBA 自动设置名称，而无需数据注释。

# c++ - 如何拥有一个 unordered_map，其中值类型是它所在的类？

> ID：13089388
> 
> 赞同：15
> 
> 时间：2012-10-26T14:31:41.000
> 
> 标签：c++

这段代码：

```
class Foo {
    std::unordered_map<std::string, Foo> x;
}; 
```

给我一个错误：

```
/usr/include/c++/4.7/bits/stl_pair.h:94:11:
  error: 'std::pair<_T1, _T2>::second' has incomplete type
foo.cpp:4:7: error: forward declaration of 'class Foo' 
```

但是，这段代码编译得很好：

```
class Foo {
    std::vector<Foo> x;
}; 
```

这是库/编译器错误吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-26T15:14:38.850

C++ 标准为各种智能指针指定模板参数允许为不完整类型。

标准的 2017 及更高版本`value_type`仅在为容器模板`std::forward_list`、`std::list`和实例化类模板时允许容器为不完整类型`std::vector`，并且仅当分配器类型满足“[分配器完整性要求](https://en.cppreference.com/w/cpp/named_req/Allocator#Allocator_completeness_requirements)”时。默认分配器模板`std::allocator`始终满足分配器完整性要求。实例化容器类模板的任何成员仍然需要`value_type`完成。

对于任何其他标准容器类型，未提供此信息。在未指定的情况下，允许实现接受一个容器类模板而不是另一个容器类模板的不完整类型，并且仍然是一致的。

为了使您的代码可移植，请避免在类型完成之前制作任何类型的容器，除非标准特别允许。

形式上，一般约束可在适用于您的代码的以下规则 ( [[res.on.functions] ) 中找到：](https://timsong-cpp.github.io/cppwp/res.on.functions)

> 在某些情况下（替换函数、处理函数、用于实例化标准库模板组件的类型的操作），C++ 标准库依赖于 C++ 程序提供的组件。如果这些组件不满足其要求，则标准对实施没有要求。
> 
> 特别是，在以下情况下效果是不确定的：
> 
> ...
> 
> *   如果在实例化模板组件时将不完整的类型用作模板参数，除非该组件特别允许。

[在[forwardlist.overview] 、 [list.overview]](https://timsong-cpp.github.io/cppwp/list#overview-3)[和](https://timsong-cpp.github.io/cppwp/forwardlist#overview-4)[ vector.overview []](https://timsong-cpp.github.io/cppwp/vector#overview-4)部分中可以找到专门允许 、 和 的不完整模板参数的`forward_list`三个`list`语句。`vector`

# c# - 将 EditText 数据从一个活动发送到另一个活动

> ID：13089389
> 
> 赞同：0
> 
> 时间：2012-10-26T14:58:53.537
> 
> 标签：c#, android, mono

我是 Mono For Android 的新手，我试图将一个键入的文本数据从 activity1.cs 上的一个 EditText 发送到另一个活动中的 TextView，但它不起作用。这是代码：

这是 Activity1.cs：

```
 public string Item;

     protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // Set our view from the "main" layout resource
        SetContentView(Resource.Layout.Main);

        // Get our button from the layout resource,
        // and attach an event to it
        Button AddButton = FindViewById<Button>(Resource.Id.AddButton);
        Button ViewButton = FindViewById<Button>(Resource.Id.ViewButton);
        EditText addNewAssignmentField = FindViewById<EditText>(Resource.Id.addNewAssignmentField);

        AddButton.Click += delegate
        {
            if (addNewAssignmentField.Text == "")
            {
                Toast.MakeText(this, "Please Write Assignment To Add", ToastLength.Short).Show();
            }
            else
            {
                Item = addNewAssignmentField.Text;//.ToString();
                Toast.MakeText(this, "Assignment Added!", ToastLength.Short).Show();
                addNewAssignmentField.Text = "";

             ShowMessage(Item); //ignore this

              }

        };

        ViewButton.Click += delegate
        {
            StartActivity(typeof(ViewListActivity));
        };
    } 
```

这是另一个活动：

```
 Activity1 ac1 = new Activity1();

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        // Set our view from the "ListLayout" layout resource
        SetContentView(Resource.Layout.ListLayout);
        Button button1 = FindViewById<Button>(Resource.Id.button1);
        var listItemsTxt = new TextView(this);
        EditText itemsList = FindViewById<EditText>(Resource.Id.itemsList);
        itemsList.Text = ac1.Item;
    } 
```

其他活动上的 EditText 没有从 Activity1.cs 上的 EditText 获取文本

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:27:59.880

你应该通过意图传递它

在你的第一个活动中

```
Intent intent = new Intent(Activity1.this, Activity2.class);
intent.putStringExtra("edit_text_content", myEditText.getText().toString());
startActivity(intent); 
```

在你的第二个活动中`onCreate`

```
String text = getIntent().getStringExtra("edit_text_content");
myEditText.setText(text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:28:23.653

你的问题是假设你可以创建一个`Activity`using `new`...

```
Activity1 ac1 = new Activity1(); 
```

...永远不要尝试这样做，这是行不通的。因此这条线...

```
itemsList.Text = ac1.Item; 
```

...永远不会是从另一个访问数据的有效方式`Activity`。

正确的做法是将数据作为一个`extra`携带的 in传递`Intent`，用于启动第二个`Activity`.

我不使用 Mono 进行编程——尽管我最初是一名 C# 程序员，但我决定改为学习 Java（无论如何它们非常相似）。

将（在我的脑海中）从我如何在 Java 中完成转换为应该如何在 Mono 中完成，尝试这样的事情......

```
Intent i = new Intent();
i.SetClass(this, typeof(ViewListActivity));
i.PutExtra("TheItem", item);
StartActivity(i); 
```

然后在第二个`Activity`中，类似于以下内容`onCreate(...)`...

```
protected override void OnCreate(Bundle bundle)
{
    ...
    Intent i = GetIntent();
    itemsList.Text = i.GetStringExtra("TheItem");
} 
```

正如我所说，我不是 Mono 程序员，所以我可能没有正确的方法语法，但我希望能说明如何将数据从一个传递`Activity`到另一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T11:51:31.103

好的，我终于成功了！这是其他新用户的工作代码：活动 1.cs：

```
 protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // Set our view from the "main" layout resource
        SetContentView(Resource.Layout.Main);

        // Get our button from the layout resource,
        // and attach an event to it
        Button button = FindViewById<Button>(Resource.Id.sendBtn);
        EditText editText = FindViewById<EditText>(Resource.Id.editText1);
        button.Click += delegate
        {
            string username = editText.Text.ToString();
            Intent intent = new Intent();
            intent.SetClass(this, typeof(Activity2));
            intent.PutExtra("username", editText.Text);
            StartActivity(intent);
        };
    } 
```

Activity2.cs：

```
public class Activity2 : Activity
{
    string itemContent;
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        SetContentView(Resource.Layout.layout1);
        var textView1 = new TextView(this);
        EditText editTxt = FindViewById<EditText>(Resource.Id.editTxt);
        itemContent = Intent.GetStringExtra("username");
        editTxt.Text = itemContent;
    }
} 
```

谢谢大家帮助我！

# google-app-engine - Google App Engine 今天发生了什么？

> ID：13089391
> 
> 赞同：1
> 
> 时间：2012-10-26T14:59:03.413
> 
> 标签：google-app-engine

[GAE 状态页面](https://code.google.com/status/appengine)响应**非常**缓慢，有时只返回 500 错误。目前还没有关于这些问题的信息，而且[https://appengine.google.com/](https://appengine.google.com/)也只返回 500s。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T15:49:24.767

请关注此线程以获取更新：

[https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-downtime-notify/SMd2pDJsCPo](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-downtime-notify/SMd2pDJsCPo)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T15:43:38.103

这是[官方支持线程](https://groups.google.com/forum/#!topic/google-appengine-downtime-notify/SMd2pDJsCPo/discussion)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T15:37:49.947

昨天（在 python 环境中）我遇到了 GAE“自动缩放”创建数十个动态实例的问题。我通常运行 1-4 个实例，突然间，它达到 100 个实例，没有明显的流量峰值。

可能是侥幸，但我的猜测是，我遇到的问题只是传播到更大的范围，导致整个事情都崩溃了。在谷歌发表声明之前，我们不会有一个明确的想法。

# python - asyncmongo 嵌套查询

> ID：13089393
> 
> 赞同：1
> 
> 时间：2012-10-26T14:59:07.997
> 
> 标签：python, mongodb

我将项目的关系及其属性存储在结构中：

```
{'item': <item_id>,
 'rel_name': 'sizes:4762',
 'rel_type': 'sizes',
 'rel_value': '4762'} 
```

并拥有在 mongodb shell 中完美运行的 mongoDB 查询：

```
db.relations.distinct(
    'rel_name',
    {item:{
        $in: db.items.distinct('id', {
            'attributes.cat': {$in:[477]},
            'attributes.sizes': {$in:[4762,5071,5072,5089,5555,903]}
        })
    }}
) 
```

并且需要使用 asyncmongo 运行它以避免获取 items.distinct 值并将其传递回 mongo 的开销（它可能超过 10000）也许有没有办法将整个查询作为字符串传递并获得结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:48:46.333

这仅适用于 shell 和 db.eval() 因为您将运行 javascript。最后，您最终需要向 mongo 服务器发送 2 个不同的命令以

1.  从 db.items 集合中收集所有尺寸，这些尺寸在您发送的列表中

2.  与每个具有“real_name：id”的人匹配。

如果您使用异步框架，您唯一需要优化的是对于每个 cursor.next() 事件，您可以处理第二个查询。这些仍然是您将发送的 2 个单独的不同查询。

# python - scipy bisplrep 分段错误（核心转储）

> ID：13089395
> 
> 赞同：4
> 
> 时间：2012-10-26T14:59:21.537
> 
> 标签：python, numpy, segmentation-fault, scipy

我已将问题隔离为一个案例。这是代码：

```
import numpy as np
from scipy import interpolate

P = np.array([[-0.32617197, -0.2920095 , -0.46557174, -0.81794844, -1.29219631,-1.81947447, -2.32841281, -2.75178671, -3.03194729, -3.12576901,-3.00960991, -2.6846482 , -2.18283861, -1.57343334, -0.96880183,-0.52132021],[ 0.26979365,  0.21207852, -0.04285966, -0.44843864, -0.93769524,-1.43878605, -1.88334371, -2.21217161, -2.37976096, -2.35832431,-2.14170154, -1.74925879, -1.22957792, -0.66299164, -0.15978676,0.15787639],[ 0.88005791,  0.75688371,  0.45630493,  0.03749351, -0.42869796,-0.87313496, -1.2350965 , -1.46659168, -1.53565157, -1.42914945,-1.15533001, -0.74592665, -0.25731003,  0.230784  ,  0.62261907,0.83078598],[ 1.43941451,  1.27684403,  0.96136466,  0.55966746,  0.14141966,-0.23103704, -0.50731149, -0.65168608, -0.64504881, -0.48640796,-0.19400188,  0.19429156,  0.62197232,  1.017876  ,  1.30628307,1.4313914 ],[ 1.88963563,  1.71157922,  1.40653829,  1.04395233,  0.68826473,0.39234334,  0.19511948,  0.12049842,  0.17675042,  0.35620331,0.63536282,  0.97584839,  1.32687424,  1.6305647 ,  1.83245472,1.90239222],[ 2.18411701,  2.01162102,  1.73714652,  1.42853859,  1.14195763,0.91932419,  0.78821399,  0.76227809,  0.84176998,  1.01419604,1.25532094,  1.53093814,  1.80003031,  2.02024623,  2.15707825,2.19902306],[ 2.29104308,  2.1421795 ,  1.91361664,  1.66775429,  1.4503379 ,1.29192654,  1.20984338,  1.20983398,  1.28741951,  1.4291507 ,1.61406933,  1.8157611 ,  2.00546122,  2.15673162,  2.25214955,2.29158209],[ 2.19592259,  2.08585339,  1.91410389,  1.73433293,  1.58065059,1.47280881,  1.41982043,  1.4224534 ,  1.47500701,  1.56675335,1.68339946,  1.80889599,  1.9278646 ,  2.02875986,  2.10734416,2.16766927],[ 1.90364107,  1.84456778,  1.73613883,  1.62063181,  1.52025046,1.44542853,  1.39954856,  1.38175761,  1.38870078,  1.41571194,1.45783921,  1.51095031,  1.57299489,  1.64516681,  1.73180054,1.83422428],[ 1.44006075,  1.44084294,  1.39747465,  1.33903092,  1.27658655,1.2136941 ,  1.1514551 ,  1.09105368,  1.03495315,  0.98741407,0.95470048,  0.94511938,  0.96877897,  1.03648204,  1.15598539,1.31935859],[ 0.85310219,  0.91835379,  0.93613205,  0.9215548 ,  0.8765544 ,0.80122736,  0.69834088,  0.57492521,  0.44245456,  0.31632919,0.21496974,  0.15854801,  0.16705806,  0.25687478,  0.43359029,0.67392233],[ 0.21307688,  0.34155231,  0.40945286,  0.41859933,  0.36519017,0.25030719,  0.08279525, -0.1207412 , -0.33717397, -0.53865813,-0.69481594, -0.77541611, -0.75400979, -0.61357493, -0.35663432,-0.02737189],[-0.38828494, -0.20618069, -0.10828106, -0.10352304, -0.1963743 ,-0.37937371, -0.63300958, -0.92785655, -1.22745851, -1.49150626,-1.67930326, -1.75379581, -1.686765  , -1.46634547, -1.10937656,-0.68572898],[-0.84138209, -0.62697398, -0.53053551, -0.56670839, -0.73371373,-1.01170006, -1.36634378, -1.75332884, -2.12281348, -2.42382663,-2.60882774, -2.63885557, -2.48994855, -2.16200449, -1.69237297,-1.18012379],[-1.02796263, -0.81797582, -0.76730311, -0.88757639, -1.16219484,-1.55335615, -2.0095011 , -2.47170348, -2.87925404, -3.17486091,-3.30992002, -3.2503765 , -2.98386161, -2.52913175, -1.94957254,-1.37448646],[-0.8453655 , -0.69344726, -0.74272994, -0.98708156, -1.38715991,-1.88505859, -2.41377971, -2.90431974, -3.29154662, -3.51958352,-3.54724604, -3.35404368, -2.94730867, -2.3711353 , -1.71790821,-1.14235009]])
xnew = np.array([[ 0\. ,  0\. ,  0\. ,  0\. ,  0\. ,  0\. ,  0\. ,  0\. ,  0\. ,  0\. ,  0\. ,0\. ,  0\. ,  0\. ,  0\. ,  0\. ],[ 0.2,  0.2,  0.2,  0.2,  0.2,  0.2,  0.2,  0.2,  0.2,  0.2,  0.2,0.2,  0.2,  0.2,  0.2,  0.2],[ 0.4,  0.4,  0.4,  0.4,  0.4,  0.4,  0.4,  0.4,  0.4,  0.4,  0.4,0.4,  0.4,  0.4,  0.4,  0.4],[ 0.6,  0.6,  0.6,  0.6,  0.6,  0.6,  0.6,  0.6,  0.6,  0.6,  0.6,0.6,  0.6,  0.6,  0.6,  0.6],[ 0.8,  0.8,  0.8,  0.8,  0.8,  0.8,  0.8,  0.8,  0.8,  0.8,  0.8,0.8,  0.8,  0.8,  0.8,  0.8],[ 1\. ,  1\. ,  1\. ,  1\. ,  1\. ,  1\. ,  1\. ,  1\. ,  1\. ,  1\. ,  1\. ,1\. ,  1\. ,  1\. ,  1\. ,  1\. ],[ 1.2,  1.2,  1.2,  1.2,  1.2,  1.2,  1.2,  1.2,  1.2,  1.2,  1.2,1.2,  1.2,  1.2,  1.2,  1.2],[ 1.4,  1.4,  1.4,  1.4,  1.4,  1.4,  1.4,  1.4,  1.4,  1.4,  1.4,1.4,  1.4,  1.4,  1.4,  1.4],[ 1.6,  1.6,  1.6,  1.6,  1.6,  1.6,  1.6,  1.6,  1.6,  1.6,  1.6,1.6,  1.6,  1.6,  1.6,  1.6],[ 1.8,  1.8,  1.8,  1.8,  1.8,  1.8,  1.8,  1.8,  1.8,  1.8,  1.8,1.8,  1.8,  1.8,  1.8,  1.8],[ 2\. ,  2\. ,  2\. ,  2\. ,  2\. ,  2\. ,  2\. ,  2\. ,  2\. ,  2\. ,  2\. ,2\. ,  2\. ,  2\. ,  2\. ,  2\. ],[ 2.2,  2.2,  2.2,  2.2,  2.2,  2.2,  2.2,  2.2,  2.2,  2.2,  2.2,2.2,  2.2,  2.2,  2.2,  2.2],[ 2.4,  2.4,  2.4,  2.4,  2.4,  2.4,  2.4,  2.4,  2.4,  2.4,  2.4,2.4,  2.4,  2.4,  2.4,  2.4],[ 2.6,  2.6,  2.6,  2.6,  2.6,  2.6,  2.6,  2.6,  2.6,  2.6,  2.6,2.6,  2.6,  2.6,  2.6,  2.6],[ 2.8,  2.8,  2.8,  2.8,  2.8,  2.8,  2.8,  2.8,  2.8,  2.8,  2.8,2.8,  2.8,  2.8,  2.8,  2.8],[ 3\. ,  3\. ,  3\. ,  3\. ,  3\. ,  3\. ,  3\. ,  3\. ,  3\. ,  3\. ,  3\. ,3\. ,  3\. ,  3\. ,  3\. ,  3\. ]])
ynew = np.array([[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ],[ 0\. ,  0.2,  0.4,  0.6,  0.8,  1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ,2.2,  2.4,  2.6,  2.8,  3\. ]])
tckP=interpolate.bisplrep(xnew,ynew,P,s=0) 
```

如果我运行此代码，则会出现分段错误……为什么？！

感谢您提前提供任何帮助

[编辑]

使用 GDB 得到这个：

```
...
Program received signal SIGSEGV, Segmentation fault.
0x00007fffed3f53c4 in fprank_ () from /usr/lib64/python2.7/site-packages/scipy/interpolate/_fitpack.so 
```

在 python 中使用详细选项得到这个：

```
...
dlopen("/usr/lib64/python2.7/site-packages/scipy/spatial/_distance_wrap.so", 2);
import scipy.spatial._distance_wrap # dynamically loaded from /usr/lib64/python2.7/site- packages/scipy/spatial/_distance_wrap.so
import scipy.interpolate.interpnd # dynamically loaded from /usr/lib64/python2.7/site-packages/scipy/interpolate/interpnd.so 
```

我也将报告为错误，感谢您的评论

[编辑#2]

gdb 的回溯说：

```
(gdb) bt
#0  0x00007fffec7053c4 in fprank_ ()
from /usr/lib64/python2.7/site-packages/scipy/interpolate/_fitpack.so
#1  0x00007fffec6fcee3 in fpsurf_ ()
from /usr/lib64/python2.7/site-packages/scipy/interpolate/_fitpack.so
#2  0x00007fffec6df46b in surfit_ ()
from /usr/lib64/python2.7/site-packages/scipy/interpolate/_fitpack.so
#3  0x00007fffec6c995b in ?? ()
from /usr/lib64/python2.7/site-packages/scipy/interpolate/_fitpack.so
#4  0x0000003d564dd0e1 in PyEval_EvalFrameEx () from /lib64/libpython2.7.so.1.0
#5  0x0000003d564ddb1f in PyEval_EvalCodeEx () from /lib64/libpython2.7.so.1.0
#6  0x0000003d564dc113 in PyEval_EvalFrameEx () from /lib64/libpython2.7.so.1.0
#7  0x0000003d564ddb1f in PyEval_EvalCodeEx () from /lib64/libpython2.7.so.1.0
#8  0x0000003d564ddbf2 in PyEval_EvalCode () from /lib64/libpython2.7.so.1.0
#9  0x0000003d564f6b9a in ?? () from /lib64/libpython2.7.so.1.0
#10 0x0000003d564f7992 in PyRun_FileExFlags () from /lib64/libpython2.7.so.1.0
#11 0x0000003d564f83ab in PyRun_SimpleFileExFlags ()
from /lib64/libpython2.7.so.1.0
#12 0x0000003d56509882 in Py_Main () from /lib64/libpython2.7.so.1.0
#13 0x000000365e221735 in __libc_start_main () from /lib64/libc.so.6
#14 0x00000000004006f1 in _start () 
```

并且在stackoverflow中还有另一个类似问题的条目： [Scipy _fitpack fprank_()中的分段错误](https://stackoverflow.com/questions/11765510/segmentation-fault-in-scipy-fitpack-fprank) 我认为这里的问题是数据太多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:05:19.337

采用`s!=0`

```
s = len(x) +- sqrt(2*len(x)) 
```

# javascript - 回调引用和继承javascript

> ID：13089418
> 
> 赞同：0
> 
> 时间：2012-10-26T15:00:30.070
> 
> 标签：javascript, arrays, inheritance, for-loop

我在一个多级数组（对象？）中有两条数据，我在一个带有 2 个 for 循环的回调函数集中引用它们。但是，我不知道如何将当前循环值放入回调：它使用所有回调的最后一个值。

```
for (k in myobj.myarr) {
    for (m in myobj.myarr[k]){
        document.addEventListener(
            k,
            function(event){
                myobj.myfn(event, myobj['myarr'][k][m][0], myobj['myarr'][k][m][1]);
            },
            true
        );
    }
} 
```

`myobj['myarr'][k][m][0]`字符串在哪里，`myobj['myarr'][k][m][1]`函数在哪里。我`console.log`在函数中有一个，并且总是调用相同的函数（最后一个）。

是的，这可能是一个奇怪的实现，不，我不能使用库。如何从数组中获取正确的值以传递给回调函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:04:42.910

你真正想要的是 m 绑定到只有一个听众知道的上下文。为清楚起见，您可以定义如下函数：

```
function doEvent(k, myobj, m) {
  document.addEventListener(
    k,
    function(event){
      myobj.myfn(event, myobj['myarr'][k][m][0], myobj['myarr'][k][m][1]);
    },
    true
  );
} 
```

...并为数组中的每个对象调用它：

```
for (k in myobj.myarr) {
  for (m in myobj.myarr[k]){
      doEvent(k, myobj, m);  
  }
} 
```

现在，这些事件将特定`m`于循环中它们各自的 s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:03:02.447

您可以像这样“锁定”迭代器的值：

```
for( k in myobj.myarr) {
    for( m in myobj.myarr[k]) {
        (function(m,k) {
            // code that depends on m and k here
        })(m,k);
    }
} 
```

不过，我不得不问，您似乎正在创建大量的事件侦听器，这对性能不利。有没有办法将事件处理程序委托给父元素并用于`event.target`查找实际元素？

# maven - 安装 Maven 原型

> ID：13089419
> 
> 赞同：16
> 
> 时间：2012-10-26T15:00:32.597
> 
> 标签：maven, archetypes

我从现有项目中创建了一个 Maven 原型。我什至在我的本地存储库中安装了原型并用它来创建一个新项目。一切都很完美（难以置信）。

问题是我想分发这个原型，这样任何人都可以将它安装在他的本地机器上，甚至部署到一个 maven repo 以使用它。我正在考虑分发生成的工件 JAR，而不是我的项目的源代码，并让人们安装它，但它似乎没有作为原型安装，或者至少在我尝试使用它时无法识别。

我使用 mvn install:install-file 目标来做到这一点。

这是最好的方法吗？是否可以分发此 JAR 文件以将其安装为原型？JAR 文件是否缺少某些内容？

提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2016-04-10T22:14:12.580

这里有一些澄清：

```
// installs the project to your local repository (jar, archetype, etc.)
mvn install
// AND updates archetype catalog
mvn install archetype:update-local-catalog
// calls plugin archetype goal crawl
mvn archetype:crawl 
```

Crawl 遍历 Maven repo 和 CREATES 目录。

如果您希望以交互方式使用原型，则需要使用完整坐标调用 if 或将其列在目录中。

```
// use local catalog
mvn archetype:generate -DarchetypeCatalog=local
// full coordinate set, my example
mvn archetype:generate -DarchetypeGroupId=pl.lafk -DarchetypeArtifactId=simple-testng-quickstart -DarchetypeVersion=1.0 -DgroupId=pl.lafk -DartifactId=sample-app 
```

当您打电话时，`mvn deploy`您会执行所有安装操作并将包推送到远程存储库 - 如果您配置了它。

我使用的链接是用于插件的 Maven 站点：[https ://maven.apache.org/archetype/archetype-packaging/index.html](https://maven.apache.org/archetype/archetype-packaging/index.html)

此外：`mvn archetype:help`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-05T08:18:51.783

嗨，这是一个迟到的回应，但我遇到了同样的问题，我没有找到如何共享原型的明确说明。因此，我希望以下内容可以帮助像我一样挣扎的人：

*   开发您的原型：单独或使用*mvn archetype:create-from-project*。互联网上有足够的说明来解释如何做到这一点。
*   在 pom.xml 中输入分发管理元素，其中必须定义要发布/共享原型的关系存储库。*与连接属性等的maven/settings.xml*的链接是使用 id 元素而不是 url 元素创建的。
*   使用要在本地 maven 存储库中安装原型的所有选项调用“ *mvn clean install ”*
*   调用“ *mvn deploy* ”，maven 将完成剩下的工作并自行更新您的远程 archetype-catalog.xml！
*   要测试原型是否真正被识别，请调用“mvn archetype:generate -Dfilter=[your archetype artifactid]”，它应该在列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-02T23:40:17.783

对于那些寻找最新信息的人：在自定义存储库中为当前版本的插件使用原型目录的方法（请参阅此评论的日期），在您的设置中定义（Mac 中的 ~.m2/setting.xml） id 为“archetype”的存储库：

```
<repository>
    <id>archetype</id>
    <name>archetype_company_repo</name>
    <url>http://your.company.com/nexus/content/repositories/releases/</url>
</repository> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T21:15:16.470

Maven 原型是工件，就像任何其他项目构建工件一样。`deploy`您可以使用 Maven命令将它们部署到您的存储库。

有关这些主题的更多信息，请参阅[创建原型指南](http://maven.apache.org/guides/mini/guide-creating-archetypes.html)、[示例](http://www.sonatype.com/books/mvnex-book/reference/public-book.html)Maven和[Maven：完整参考](http://www.sonatype.com/books/mvnref-book/reference/public-book.html)。

# php - 将关联数组添加到数组 - 如何？

> ID：13089430
> 
> 赞同：0
> 
> 时间：2012-10-26T15:01:18.140
> 
> 标签：php, arrays

我有一个数组结构，如下所示：

```
$families = array
(
    "Griffin"=>array
    (
        "Father" => "Peter",
        "Mother" => "Lois",
        "Child" => "Megan"
    ),

    "Brown"=>array
    (
        "Father" => "Cleveland",
        "Mother" => "Loretta",
        "Child" => "Junior"
    )

); 
```

我的问题是：

如何以“Homer”、“Marge”和“Bart”为数据将另一个名为“Simpsons”的数组添加到该结构中？

多谢你们....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T15:02:40.590

```
$families['Simpsons'] = array(
  'Father' => 'Homer', 
  'Mother' => 'Marge', 
  'Child'  => 'Bart'
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:03:40.900

与您添加`Griffin`和布朗的方式相同。如果您稍后在代码中执行此操作：

```
 $families['Simpsons'] = array('Mother' => 'Marge','Father' =>'Homer','Child' => 'Bart'); 
```

# backbone.js - 将主干.js 与 Jenkins 的 JSONP API 一起使用

> ID：13089433
> 
> 赞同：1
> 
> 时间：2012-10-26T15:01:31.417
> 
> 标签：backbone.js, jsonp

我正在尝试使用[backbone.js](http://backbonejs.org/)来包装[Jenkins](http://jenkins-ci.org/) REST API。

要获取工作详细信息，可以对这样的 URL 执行 GET：

[https://jenkins.example.com/jenkins/job/test-job/api/json/?jsonp=jQuery18207471012645401061_1351262357807&_=1351262357850](https://jenkins.example.com/jenkins/job/test-job/api/json/?jsonp=jQuery18207471012645401061_1351262357807&_=1351262357850)

我非常简单的主干应用程序如下所示：

```
$(function () {
   var Job = Backbone.Model.extend({
      defaults:{
         displayName:'not set'
      }
   });

   var AppView = Backbone.View.extend({
      el:$("#hudApp"),

      initialize:function () {
         var job = new Job;
         job.url = 'https://jenkins.example.com/jenkins/job/test-job/api/json/?jsonp=?';
         job.fetch({dataType:"jsonp"});

         alert(job.get('displayName'));
      });
   });

   var app = new AppView;
}); 
```

我可以看到 HTTP 请求到达我的 Jenkins 服务器，并收到如下响应：

```
jQuery18207471012645401061_1351262357807(
{
description: "build a nice test job",
displayName: "test-job",
}
) 
```

但是，我的模型没有得到更新（`alert()`总是显示“未设置”）。

谁能发现我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:21:59.933

Complete operator error. Apparently, the "A" in AJAX stands for "asynchronous"...

I just needed to change my fetching code to:

```
 job.fetch({
           dataType:"jsonp",
           success: function(model, response) {
              alert(model.get('displayName'));
           }
        }); 
```

Sorry about the stupid question. Hopefully this is at least useful to Google, as I had lots of trouble finding examples of how to use Backbone with JSONP.

# tomcat - 联合连接测试异常

> ID：13089435
> 
> 赞同：0
> 
> 时间：2012-10-26T15:01:41.353
> 
> 标签：tomcat, adfs2.0, openam, federation

当我尝试从配置了 ADFS 服务器的 openam 运行联合连接测试时，出现以下异常：

HTTP 状态 500 -

类型异常报告

信息

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

javax.servlet.ServletException：AMSetupFilter.doFilter com.sun.identity.setup.AMSetupFilter.doFilter(AMSetupFilter.java:117) 根本原因

org.apache.jasper.JasperException: java.lang.NullPointerException org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:541) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:435) org .apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266) javax.servlet.http.HttpServlet.service(HttpServlet.java:803 ) com.sun.identity.setup.AMSetupFilter.doFilter(AMSetupFilter.java:91) 根本原因

java.lang.NullPointerException org.apache.jsp.validator_jsp._jspService(validator_jsp.java:424) org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) javax.servlet.http.HttpServlet.service(HttpServlet .java:803) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320) org.apache.jasper.servlet.JspServlet .service(JspServlet.java:266) javax.servlet.http.HttpServlet.service(HttpServlet.java:803) com.sun.identity.setup.AMSetupFilter.doFilter(AMSetupFilter.java:91)

我认为由于此异常而陷入困境，并且与 adfs 的连接未建立。所以我应该去做。

任何形式的帮助都会很有用。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:14:28.930

在 OpenAM 方面，将调试级别设置为“消息”并查看调试日志。应该有一个指向 NPE 的指针，可能缺少证书别名或元数据不足。

# css - 这个 CSS 发生了什么？

> ID：13089436
> 
> 赞同：0
> 
> 时间：2012-10-26T15:01:47.307
> 
> 标签：css

我有一些CSS应用于按钮。

我遇到的问题是渲染发生了变化，而我没有更改 css。它只发生在Firefox中。

它应该是这样的：

![在此处输入图像描述](../Images/adb4ccdf25a30b61f11843d92c6940ac.png)

这是我回帖时不时发生的事情

![在此处输入图像描述](../Images/e5eadae7543107413926dc8a4dd23f05.png)

如您所见，底部添加了一条额外的线。

这是CSS：

```
.button
{
    -moz-box-sizing:border-box; 
    -webkit-box-sizing:border-box; 
    box-sizing:border-box;
}

.button.nav
{
    background:#999;
    background: -moz-linear-gradient(top, rgba(187,187,187,1) 0%, rgba(153,153,153,1) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(187,187,187,1)), color-stop(100%,rgba(153,153,153,1)));
    background: -webkit-linear-gradient(top, rgba(187,187,187,1) 0%,rgba(153,153,153,1) 100%);
    background: -o-linear-gradient(top, rgba(187,187,187,1) 0%,rgba(153,153,153,1) 100%);
    background: -ms-linear-gradient(top, rgba(187,187,187,1) 0%,rgba(153,153,153,1) 100%);
    background: linear-gradient(to bottom, rgba(187,187,187,1) 0%,rgba(153,153,153,1) 100%);
    border:solid 1px #999;
    -moz-box-shadow:0 2px 1px -1px rgba(0,0,0,0.2), inset 0 1px 0 #ddd;
    -webkit-box-shadow:0 2px 1px -1px rgba(0,0,0,0.2), inset 0 1px 0 #ddd;
    box-shadow:0 2px 1px -1px rgba(0,0,0,0.2),inset 0 1px 0 #ddd;
    color:#fff;
    font-size:13px;
    height:26px;
    line-height:26px;
    text-shadow:#999 0 -1px;
}

.button.nav:hover
{
    background:#777;
    background: -moz-linear-gradient(top, rgba(153,153,153,1) 0%, rgba(119,119,119,1) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(153,153,153,1)), color-stop(100%,rgba(119,119,119,1)));
    background: -webkit-linear-gradient(top, rgba(153,153,153,1) 0%,rgba(119,119,119,1) 100%);
    background: -o-linear-gradient(top, rgba(153,153,153,1) 0%,rgba(119,119,119,1) 100%);
    background: -ms-linear-gradient(top, rgba(153,153,153,1) 0%,rgba(119,119,119,1) 100%);
    background: linear-gradient(to bottom, rgba(153,153,153,1) 0%,rgba(119,119,119,1) 100%);
    border-color:#777;
    -moz-box-shadow:0 2px 1px -1px rgba(0,0,0,0.2), inset  0 1px 0 #bbb;
    -webkit-box-shadow:0 2px 1px -1px rgba(0,0,0,0.2), inset  0 1px 0 #bbb;
    box-shadow:0 2px 1px -1px rgba(0,0,0,0.2), inset 0 1px 0 #bbb;
    text-shadow:#777 0 -1px;
} 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:19:48.390

尝试应用样式 button.nav 也已访问并处于活动状态

```
.button.nav, .button.nav:visited, .button.nav:active{
    /* style */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:07:43.207

得到了答案。

![在此处输入图像描述](../Images/6bbbbef23bc37c17daa5e64b53496dc2.png)

红色是没有设置高度的背景容器。绿色跨度的行高设置为与按钮的高度相同，但是它们的对齐方式将设置为默认的基线。

我可以做两件事中的一件。1）删除行高（虽然没有在 IE 中测试）或 2）添加 verical-align:middle；

感谢大家的建议。

# php - PHP 命名空间并在声明中使用 \ 前缀

> ID：13089437
> 
> 赞同：7
> 
> 时间：2012-10-26T15:02:02.783
> 
> 标签：php, namespaces

下面抛出一个错误，说明`Exception`不能重新声明。

```
namespace \NYTD\ReadingListBackend;

class Exception extends \Exception
{
} 
```

但是，删除`\`命名空间声明中的前缀不会：

```
namespace NYTD\ReadingListBackend; 
```

我最近采用了 PHP 命名空间。我的理解是，前缀为的命名空间`\`代表一个*完全限定的名称*。

那么为什么我不能在命名空间声明中使用前缀呢？我可以在引用时（例如`new \NYTD\ReadingListBackend\Exception`）。[希望得到完整的解释，因为我在文档](http://php.net/manual/en/language.namespaces.php)中找不到任何内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T20:42:05.333

如其他答案中所述，`namespace`声明始终采用完全限定的名称，因此尾随`\`将是多余的并且是不允许的。

写入`namespace \NYTD\ReadingListBackend { ... }`会导致正确的解析错误。

`namespace \NYTD\ReadingListBackend;`另一方面，当使用分号表示法时，它被解释为`namespace\NYTD\ReadingListBackend;`，这是对常量的访问`NYTD\ReadingListBackend`（`namespace`这里的关键字解析为当前活动的命名空间，在您的情况下是全局命名空间）。

所以你的代码没有声明任何命名空间（它是全局的），只是试图访问一个常量。这就是你最终重新定义`Exception`.

顺便说一句，未定义的常量访问不会引发致命错误的原因是类提升。首先评估您的类声明，因此 PHP 永远不会真正达到常量访问（即使它在代码中首先出现）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T17:01:56.990

> 那么为什么我不能在命名空间声明中使用前缀呢？

根据定义，当您声明命名空间名称时，它已经*是*完全限定的。

但是在代码的命名空间部分中，如果您需要指定完全限定的类名 (FQCN)，则需要使用前缀向 PHP 发出*该类*名是 FQCN 的信号。

这里令人恼火的是，在您的示例中，PHP 并没有在解析时出错。我不能告诉你为什么。

```
namespace \NYTD\ReadingListBackend;
          ^- this seems wrong but no parse error 
```

但是 PHP 使用花括号（一个文件中有多个命名空间）会出错：

```
namespace \NYTD\ReadingListBackend {}
                                   ^- parse error in this line 
```

但是对于您的问题，我认为命名空间名称和类名称之间的区别是值得的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:36:35.247

前缀表示“根”或类似的`\`东西。它使限定名称空间( )成为*完全限定名称**空间*( )。这仅在使用命名空间时有用，在声明命名空间时无效。例如：`/Foo/Bar`*`Foo/Bar`*

 *```
namespace Foo

class Bar {
    // ...
}

namespace Bar\Baz;

$b = new Bar(); // look for Bar\Baz\Bar()
$b = new Foo\Bar(); // look for Bar\Baz\Foo\Bar()
$b = new \Foo\Bar(); // look for Foo\Bar() (the right one) 
```

声明命名空间时它没有用，因为您总是从全局（“根”）命名空间声明命名空间：

```
namespace Foo; // the \Foo namespace
// ...
namespace Bar; // the \Bar namespace, not the \Foo\Bar namespace
// ...
namespace Foo\Bar; // the \Foo\Bar namespace 
```

因为每个命名空间声明都是“完全合格”的，所以 PHP 不希望`\`命名空间前面有 a 并给你一个错误。*

# mysql - 将值复制到列值等于的另一个字段

> ID：13089438
> 
> 赞同：0
> 
> 时间：2012-10-26T15:02:06.277
> 
> 标签：mysql

我试图通过使用另一个列值将列中的一个值复制到同一列中的另一个值，例如：

```
column 1 - column 2
703 - /2/3/image.jpg
106 - "empty"
100 - description 
```

所以我希望它复制第 2 列的值，其中第 1 列的值 = 706，并放入第 2 列，其中第 1 列的值 = 106，这样描述就可以了。有谁知道这样做的查询？

谢谢，西蒙

笔记：

在执行您的建议时出现以下错误

# 1093 - 您不能在 FROM 子句中指定目标表 'mage_catalog_product_entity_varchar' 进行更新

再次感谢您的回复：需要添加 INNER JOIN 不确定如何执行此方法，尽管再次感谢任何建议，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:08:17.293

~~您可以使用子查询来执行此操作，如下所示：~~

```
update tablename set column2 = (select column2 from tablename where column1 = 706 limit 1) where column1 = 106; 
```

**编辑**
事实证明，您不能有一个引用您正在更新的表的子查询。因此，您需要使用 INNER JOIN（请参阅此处的答案：[https](https://stackoverflow.com/a/4268431/1095946) ://stackoverflow.com/a/4268431/1095946 ）。

尝试这样的事情：

```
UPDATE mage_catalog_product_entity_varchar t1, mage_catalog_product_entity_varchar t2
SET t1.value = t2.value
WHERE t1.attribute_id = 106
  AND t2.attribute_id = 703 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:08:35.613

```
Update table t1, table t2 
SET t1.column2 = t2.column2 
WHERE t1.column1 = 106 AND t2.column1 = 706 
```

# java - 如何将现有的eclipse动态web项目拆分为web、jar和webservice

> ID：13089439
> 
> 赞同：1
> 
> 时间：2012-10-26T15:02:10.120
> 
> 标签：java, eclipse, web-services

我有一个大型 Eclipse 项目（动态网页，使用 tomcat），需要将其拆分为三个具有依赖关系的项目：

*   应用程序本身，通过tomcat提供网页
*   一个相对静态的部分，与其他项目共享，最好成为一个 JAR（某种框架）
*   一个网络服务，通过axis14和tomcat发布一些应用功能

我的问题是如何定义这三个项目，以便 eclipse 自动处理依赖关系，同时能够组合调试它们？

-- 我在 windows vista 32bits 中使用 Eclipse Helios Java EE R1

# objective-c - NSError 自己做了什么，如果有的话？

> ID：13089440
> 
> 赞同：2
> 
> 时间：2012-10-26T15:02:11.570
> 
> 标签：objective-c, nserror

我正在寻找开始在我的代码中添加错误捕获，并且我想看看`NSError`对象自己为我做了什么以及我必须自己添加什么。

查看[这个 SO question](https://stackoverflow.com/questions/4654653/how-to-use-nserror-in-my-iphone-app)和[Apple Docs](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/Reference/Reference.html)，看起来`NSError`所做的只是保留一个数字错误代码、错误的位置和错误的描述。对于所有这三个项目，我必须在我的代码中指定它们。然后，如果我想做一些事情，比如跳到当前正在执行的任何方法的末尾（如果应用程序试图运行它们很可能会导致崩溃），或者显示一个`UIAlertView`告诉用户有错误，我必须我自己也指定所有这些，对吗？

我有点初学者，所以还有什么我想考虑做的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:13:08.727

`NSError`是错误信息的容器，它自己*不做*任何事情。该类的设计使您的代码的不同部分可以以标准化的方式相互交流错误信息。简单地在一个没有任何作用的方法中设置一个错误`NSError**`- 调用者有责任检查是否`*error`是非`nil`，跳到方法的末尾，显示本地化描述，提示用户执行操作，等等。

但是，`NSError`它足够灵活，可以让您完成所有这些操作：调用者可以提供几乎任何类型的信息；您可以跟踪恢复尝试，向用户显示本地化消息，或在`NSError`对象中存储附加信息，并将其返回到调用链的下方。

注意：Cocoa 框架方法一般要求你在使用之前检查直接返回值`NSError`，而不是检查错误是否为`nil`. 如果方法指示失败，则错误保证有效，但不保证`nil`成功，即使您`nil`事先将其设置为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:08:31.240

NSError 作为错误的封装提供。这是一个很好的 OO 实践，它允许其他签名对其进行强类型化。这很像 Java 和 C# 中的 Exception 类。它还允许您创建一个指针以传递给以 NSError 作为参数的方法，在方法完成后，您可以检查 NSError 以了解您的应用程序可以处理的条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:10:28.663

您可能想考虑发布一些代码来帮助说明您要完成的工作。

您可以做的一件事是，在调用将填充错误对象的方法后，检查错误是否不为零，或评估错误对象的属性。

它可能看起来像：

```
-(void)someMethod {
    NSError *error;

    [self myMethod:&error];

    if ( error ) {
        // handle the error, display an alert, etc ...
    }
    else {
        // do other stuff when no error occurs
    }
} 
```

# javascript - 带有数组数组的 json 对象

> ID：13089444
> 
> 赞同：0
> 
> 时间：2012-10-26T15:02:25.567
> 
> 标签：javascript, google-maps-api-3, geojson

我正在尝试使用谷歌地图 API 在谷歌地图上创建两个多边形。

我收到以下错误：

> 误差：构造函数的无效值0：-94.963194,39.316858，-94.95967,39.32199，-95846,39.3219,95846,39.3214，-95846,39.3214，-95846,39.3214，-95846,39.39.32104，-94.95742,39.32064，-94.95698,39.32021，-94.95625,39.31927， - 94.95599,39.31876,-94.95578​​,39.31824,-94.95564,39.3177,-94.95557,39.31716,-94.95557,39.31661,-94.963194,39.316858

我希望有人可以帮助解释我做错了什么并提供解决方案。

```
<script
    src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=visualization">
</script>
<script>
var map;

function initialize() {
    var kansas_city = new google.maps.LatLng(39.00495613,-94.64780668);
    var mapOptions = {
        zoom: 10,
        center: kansas_city,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    };
    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

        // Create a <script> tag and set the USGS URL as the source.
        var script = document.createElement('script');
        script.src = 'sector.json';
        document.getElementsByTagName('head')[0].appendChild(script);
}

  // Loop through the results array and place a marker for each
  // set of coordinates.
  window.sector_callback = function(results) {
  for (var i = 0; i < results.features.length; i++) {
      var coords = results.features[i].geometry.coordinates;
      alert(coords);
      var polygons = new google.maps.Polygon({
      path: coords,
      map: map
      });
  }
}
</script> 
```

JSON 代码：

```
sector_callback({
    "type": "FeatureCollection",
    "features": [{
        "type": "Feature",
        "properties": {
            "Name": "1_1",
            "Description": ""
        },
        "geometry": {
            "type": "Polygon",
            "coordinates": [
                [
                    [-94.963194, 39.316858],
                    [-94.959670, 39.321990],
                    [-94.959050, 39.321720],
                    [-94.958460, 39.321400],
                    [-94.957920, 39.321040],
                    [-94.957420, 39.320640],
                    [-94.956980, 39.320210],
                    [-94.956250, 39.319270],
                    [-94.955990, 39.318760],
                    [-94.955780, 39.318240],
                    [-94.955640, 39.317700],
                    [-94.955570, 39.317160],
                    [-94.955570, 39.316610],
                    [-94.963194, 39.316858]
                ]
            ]
        }
    }, {
        "type": "Feature",
        "properties": {
            "Name": "214_1",
            "Description": ""
        },
        "geometry": {
            "type": "Polygon",
            "coordinates": [
                [
                    [-94.783917, 39.083417],
                    [-94.776470, 39.084670],
                    [-94.776340, 39.084140],
                    [-94.776290, 39.083590],
                    [-94.776300, 39.083040],
                    [-94.776380, 39.082500],
                    [-94.776530, 39.081960],
                    [-94.777020, 39.080940],
                    [-94.777360, 39.080460],
                    [-94.777760, 39.080000],
                    [-94.778210, 39.079570],
                    [-94.778710, 39.079180],
                    [-94.779260, 39.078830],
                    [-94.783917, 39.083417]
                ]
            ]
        }
    }]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:05:57.157

JS 中的数组循环永远不应该以默认方式进行。浏览器将在迭代的每一步查找 results.features.length。这是出于速度考虑。

```
window.sector_callback = function(results) {
  for (var i = 0, j = results.features.length; i < j; i++) {
      var coords = results.features[i].geometry.coordinates;
      alert(coords);
      var polygons = new google.maps.Polygon({
      path: coords,
      map: map
      });
  }
} 
```

如需答案，请查看**[此问题](https://stackoverflow.com/questions/7295068/google-maps-v3-invalid-value-for-constructor-parameter-0-while-drawing-polyline)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:11:10.867

Google Maps API 中的所有内容都需要使用基于 google 的`google.maps.LatLng`数据结构。由于 JSON 数据中的值为 ，因此`[longitude, latitude]`您需要`google.maps.LatLng`在创建多边形之前使用它们构建对象：

```
window.sector_callback = function(results) {
  for (var i = 0, len = results.features.length; i < len; i++) {
    var coords = results.features[i].geometry.coordinates[0];
    var path = [];

    for ( var j = 0, len2 = coords.length; j < len2; j++ ){
        path.push(new google.maps.LatLng(coords[j][1], coords[j][0]));
    }

    var polygons = new google.maps.Polygon({
      path: path,
      map: map
    });
  }
} 
```

编辑：我必须`0th`为坐标指定元素，哎呀！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T16:19:12.717

您的多边形数组是一个数组数组（以支持多边形中的多个路径）。要访问您需要做的数字（假设您有带有单个路径的简单多边形）：

```
var coords = results.features[i].geometry.coordinates[0]; 
```

然后将它们转换为 google.maps.LatLng 对象：

```
path.push(new google.maps.LatLng(coords[j][1], coords[j][0])); 
```

[工作示例](http://www.geocodezip.com/v3_polygonsFromJson.html)

# entity-framework - 如何检查数据库架构是否与实体框架架构匹配？

> ID：13089448
> 
> 赞同：19
> 
> 时间：2012-10-26T15:02:43.177
> 
> 标签：entity-framework, ef-code-first, database-schema, initializer

令我惊讶的是，使用**CreateDatabaseIfNotExists**上下文初始化程序，该行

```
context.Database.Initialize(true) 
```

**如果架构与我的代码优先架构不匹配，**则不会引发异常。****

 **有没有办法验证当前数据库是否与我们的模式匹配，例如，我们尝试访问一个实体，其表不再存在于数据库中，并且 EF 抛出异常？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-08-22T11:11:35.820

您可以调用 CompatibleWithModel 来确定数据库是否与模型匹配。如果将参数设置为 true，如果在数据库中找不到模型数据，则会引发异常。

```
bool isCompatible = context.Database.CompatibleWithModel(true); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-26T15:46:10.867

每次启动应用程序时，EF 都不会交叉检查数据库架构和模型。相反，它正在寻找保存到数据库（__MigrationsHistory 表和 EdmMetadata 之前）的模型，并将这个保存的模型与您正在使用的模型进行比较。如果模型匹配，则将使用数据库。如果模型不匹配，则会抛出异常。如果您的数据库中既没有 __MigrationHistory 也没有 EdmMetadata 表，EF 将假定您使用 DbContext 的数据库优先方法，并且您的数据库与模型匹配。如果您想将数据库与您的模型进行比较，您可以为您的模型转储 Edmx（使用 EdmxWriter.WriteEdmx）并使用 Visual Studio 和 EF 设计器从数据库中获取 Edmx 并比较 SSDL 部分。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-06-03T01:19:02.907

有两种工具可以做到这一点。第一个很受欢迎并且高度发达：

开发者的解释：[https ://www.thereformedprogrammer.net/ef-core-taking-full-control-of-the-database-schema/](https://www.thereformedprogrammer.net/ef-core-taking-full-control-of-the-database-schema/)

正如您将看到的，开发人员自己的解释包括对 Code-First、Database-First 和 SQL-First 方法的全面概述。他讨论了所有方法的优缺点。并说明为什么架构比较工具对于使用 SQL-First 方法是必要的。

github项目：[https ://github.com/JonPSmith/EfCore.TestSupport/wiki/9.-EfSchemaCompare](https://github.com/JonPSmith/EfCore.TestSupport/wiki/9.-EfSchemaCompare)

上面的另一位评论员提到了一个鲜为人知的第二个： [https ://github.com/reckface/EntityFramework.Verify](https://github.com/reckface/EntityFramework.Verify)

第二位开发人员还建议使用 DbUp，它提供了一篇哲学文章，我认为值得一读，说明为什么“Microsofty”代码优先和 db-first 方法存在问题，以及为什么将数据库更改视为状态系统的想法可以说是有争议的一个糟糕的选择。 [https://dbup.readthedocs.io/en/latest/philosophy-behind-dbup/](https://dbup.readthedocs.io/en/latest/philosophy-behind-dbup/)**

# objective-c - NSCache：尝试访问缓存项目时总是得到“不符合键值编码”

> ID：13089452
> 
> 赞同：9
> 
> 时间：2012-10-26T15:03:03.030
> 
> 标签：objective-c, ios, cocoa, nscache

我正在尝试使用 NSCache 将 PNG 存储为 NSData。每当我尝试从缓存中取回一个，无论缓存是否为空，我都会得到：

2012-10-26 09:49:28.860 SledMap [55917:11503] ***由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[valueForUndefinedKey:]：此类不符合键 0_0_5 的键值编码。”

如果我完全保留代码，但将 NSCache 更改为 NSMutableDictionary，它可以正常工作。

我声明我的缓存：

```
@property (nonatomic, strong) NSCache *tileCache; 
```

分配它（在 viewDidLoad 中）：

```
self.tileCache = [[NSCache alloc] init];
self.tileCache.delegate = self; 
```

向缓存中添加一些内容：

```
NSString *key = [NSString stringWithFormat:@"%i_%i_%i",x,y,endLevel];
NSData *pngData = [NSData dataWithData:UIImagePNGRepresentation(image)];
[self.tileCache setObject:pngData forKey:key]; 
```

然后当我把它拿出来时，我得到了上述错误。

```
NSString *key = [NSString stringWithFormat:@"%i_%i_%i",x,y,endLevel];
NSData *tile = [self.tileCache valueForKey:key];  //This is the line it crashes on 
```

如果它是空的，我希望它只返回 nil，当我将 self.tileCache 设置为 NSMutableDictionary 而不是 NSCache 时会发生这种情况。此外，在调试区域，它说：

```
tile = NSData * 0x0134dc59 <Variable is not NSData> 
```

如果我传入一个 NSString，它会做同样的事情并说变量不是 NSString。

此外，我可以硬编码`key`为“A”并尝试再次以“A”的形式访问它，结果相同。

有任何想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-26T20:30:15.697

`-valueForKey:`是一种KVC方法；采用`-objectForKey:`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T15:09:51.353

我认为问题不在于 NSData，我认为可能与您的密钥有关。仔细看看 stringWithFormat - 如果它们都是整数，你可能应该使用 %d 而不是 %i，因为 %d 是 32 位兼容的。如果它们是浮点数，您应该使用 %f。

# c# - 使用 WIF 和 ADFS 检索有关用户的声明

> ID：13089453
> 
> 赞同：0
> 
> 时间：2012-10-26T15:03:03.533
> 
> 标签：c#, .net, wif, adfs

**简短背景：**目前我的情况是我有一个服务（WCF），我**不**控制它的 WSDL/接口。当客户端调用“提交”时，用户传递凭证。然后，我想使用这些凭据对 ADFS 进行身份验证并接收加密声明。一旦我将这些声明作为 RequestSecurityTokenResponse 返回，我就有可用的 RequestSecurityTokenResponse.SecurityTokenXml（加密的 XmlElement）。似乎 RequestSecurityTokenResponse.SecurityToken 为空（也许只返回一个或另一个？）

**注意：**因为我不控制 WSDL，所以我不会强制用户进行身份验证以使用服务，而是使用他们通过请求发送的凭据进行身份验证。这意味着我在代码中而不是在 Config 中执行此操作。如果需要，我可以发布示例代码。

**问题：**

1.  考虑到这种情况，这听起来像是一种合理的方法吗？
2.  我将如何使用证书解密此 XmlElement？
3.  我不应该加密令牌吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:54:39.410

在搞砸了更多之后，我被带到了[这个](http://zamd.net/2010/03/10/extractsamlassertion/)网站，它至少为我解决了加密/解密问题。

# c# - 如何使用相同的接口注入两个或多个依赖项？

> ID：13089454
> 
> 赞同：4
> 
> 时间：2012-10-26T15:03:03.820
> 
> 标签：c#, autofac

考虑以下代码

```
public interface ISomeInterface
{
    void DoSomething();
}

public class A : ISomeInterface
{
    public void DoSomething() { }
}

public class B : ISomeInterface
{
    public void DoSomething() { }
} 
```

然后一个类使用 2 个接口：

```
public class C : IC
{
    protected ISomeInterface _dependency1;
    protected ISomeInterface _dependency2;

    public C ( ISomeInterface dependency1, ISomeInterface dependency2 )
    {
        _dependency1 = dependency1;
        _dependency2 = dependency2;
    }
} 
```

我想在dependency1中注入A，在dependency2中注入B。我知道我可以做这样的事情：

```
builder.RegisterType<C>().As<IC>()
    .WithParameter( "dependency1", new A() )
    .WithParameter( "dependency2", new B() ); 
```

但我知道使用 Autofac 有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:10:26.460

当您注册您的`ISomeInterface`植入物时，您可以为[它们命名](http://code.google.com/p/autofac/wiki/TypedNamedAndKeyedServices)：

```
containerBuilder.RegisterType<A>().Named<ISomeInterface>("A");
containerBuilder.RegisterType<B>().Named<ISomeInterface>("B"); 
```

然后你可以注册你`C`的使用定义的名称来解析它的参数：

```
containerBuilder.Register(c =>
    new C(c.ResolveNamed<ISomeInterface>("A"), 
        c.ResolveNamed<ISomeInterface>("B")))
    .As<IC>(); 
```

使用上面的代码，`C`即使某些参数不需要“命名”注册，您也必须指定所有构造函数参数。

因此，如果您只想指定“命名”参数，您可以`WithParameter`一起使用解析：

```
containerBuilder.RegisterType<C>().As<IC>()
    .WithParameter((p, c) => p.Name == "dependency1", 
                   (p, c) => c.ResolveNamed<ISomeInterface>("A"))
    .WithParameter((p, c) => p.Name == "dependency2", 
                   (p, c) => c.ResolveNamed<ISomeInterface>("B")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T08:47:39.590

首先，为什么要注入同一个接口的两个实例？一定是有什么区别他们的吗？

我的建议是你注册两个子接口，即。ISomeInterface1 : ISomeInterface ISomeInterface2 : ISomeInterface 并注入这两个。然后您不必处理命名参数。

# php - 如何在 PHP 中转换（非常）旧日期？

> ID：13089462
> 
> 赞同：1
> 
> 时间：2012-10-26T15:03:38.583
> 
> 标签：php, mysql, date, php-5.2

我必须将 Access 数据库迁移到 MySQL。我有两个问题：首先是年份是用两位数指定的；其次，这是一个生日数据库。例如我有这样的字符串：

```
"06/12/76 00:00:00"
"10/15/02 00:00:00" 
```

哪一年是指最后一个（10 月 15 日）？我假设所有年份值超过 12 的日期都指向 19XX，而另一个（从 0 到 12）指向本世纪：20XX。

一旦解决了这个问题，我需要格式化这些日期。我试过这个：

```
$bd = strtotime($birth);
if ($bd > time()) {
    $bd = strtotime("-100 years", $bd);
}
$birth = sua_date_unix2mysql($bd); 
```

但问题是`strtotime`只能管理 1970 年之后的日期。有解决这个问题的想法吗？

**注意**：日期时间不可用（5.2 版）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T15:10:26.423

只需将这些日期操作为字符串。

```
// "06/12/76 00:00:00"
list($month, $day, $year) = explode('/', $birth);
// $year is actually "76 00:00:00"...
$year = (int)$year;

$century = 2000;
if (($century + $year) > date('Y'))
    $century = 1900;
$year += $century;
$mysql = "$year-$month-$day"; // 19760612 will be recognized by MySQL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:09:24.003

我不知道它是否合适，但你可以很容易地通过字符串操作来做到这一点。

首先将传入的字符串解析为值。要解析字符串，您可以使用`sscanf`.

```
$date = '06/12/76 00:00:00';
$result = sscanf(
    $date, '%d/%d/%d %d:%d:%d', 
    $month, $day, $year, $hour, $minute, $second
); 
```

然后将年份从两个字母扩大到四个字母。这应该相当容易，一个简单的`if`.

```
$year += $year < 36 ? 2000 : 1900 
```

然后将字符串重新排列为 mysql 所需的日期格式。要连接字符串，您可以使用`sprintf`.

```
$iso = sprintf(
    '%04d-%02d-%02d %02d:%02d:%02d', 
    $year, $month, $day, $hour, $minute, $second
); 
```

# javascript - 检测退出全屏html视频

> ID：13089464
> 
> 赞同：2
> 
> 时间：2012-10-26T15:03:44.033
> 
> 标签：javascript, android, html

当我从我的 Android 打开一个 html5 视频并自动进入全屏时，我想检测用户何时点击后退按钮并退出视频，我已经尝试了一堆听众，如[IN THIS DOC](http://developer.apple.com/library/safari/#samplecode/HTML5VideoEventFlow/Listings/events_js.html#//apple_ref/doc/uid/DTS40010085-events_js-DontLinkElementID_5) 还尝试了 webkitfullscreenchange 和与此[URL](http://www.tutorialspoint.com/html5/html5_events.htm)中的所有事件。“结束”事件有效，但我还需要检测用户何时返回并退出视频。

特别是我的问题是在 android 2.3.5 中，当用户单击播放时，自动进入全屏，然后更改视频的方向，然后单击返回。那时我的页面完全搞砸了，因为它不会在视频中触发 onorientationchange 事件，这就是为什么我需要调整我的图层。如果有人知道或遇到类似的问题，请告诉我您是如何解决的，谢谢

编辑我还想知道是否有任何解决方案可以在播放视频后缩小海报的大小

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:39:03.047

我想不出直接解决您的问题的方法，但是我刚刚想到了一种解决方法。试试这个：

当用户单击视频开始播放时，您可以触发一个小的 JavaScript 函数来处理您的显示/页面大小调整。让功能每隔一秒左右重复一次。此功能可以检查屏幕宽度以确定显示器是否处于横向模式，然后相应地重新调整图层大小。视频完成后，您的页面布局将已重置。该功能可以继续侦听方向更改回纵向，此时它将简单地重新调整图层大小，然后停止调用/重复自身。

我意识到一旦您单击电影，某些设备可能会终止/停止您页面上的任何 JS 进程，在这种情况下，您可以简单地中断用户的点击，执行您的重新调整大小，然后通过 JavaScript 调用电影。

我希望这有帮助。祝你好运。

# java - SpringMVC 应用程序的 RESTful API

> ID：13089473
> 
> 赞同：4
> 
> 时间：2012-10-26T15:04:30.543
> 
> 标签：java, rest, spring-mvc

对于基于 SpringMVC (3.0.1) 堆栈构建的现有 GUI webapp，我想公开一个 RESTful API。你认为什么是合理的选择？

1.  与 Jersey 等其他框架集成（似乎从头开始）？
2.  使用 JAXB/Jackson 的内置 SpringMVC 集成？
3.  我应该添加另一个 servlet-mapping`/api/*`到同一个`DispatchServlet`吗？
4.  所有的视图都用jsp编码。我应该为我的 XML API 使用 jsp 模板吗？
5.  使用公共依赖项构建一个单独的新 web 应用程序？
6.  还要别的吗？

以下是我的 web.xml：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">

    <welcome-file-list>
        <welcome-file>home.html</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>spring-mvc</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/spring-mvc.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>spring-mvc</servlet-name>
        <url-pattern>/web/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

还有我的弹簧上下文描述符：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:security="http://www.springframework.org/schema/security" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
            http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context.xsd
            http://www.springframework.org/schema/security 
            http://www.springframework.org/schema/security/spring-security-3.0.xsd
            http://www.springframework.org/schema/mvc 
            http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd"
>

    <context:component-scan base-package="net.mycrub.poc.controllers" />

    <bean id="viewResolver" 
        class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
        p:prefix="/WEB-INF/jsp/views/" 
        p:suffix=".jsp"
        p:viewClass="org.springframework.web.servlet.view.JstlView" />

</beans> 
```

提前致谢 ; 欢迎映射示例:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:36:34.127

我会回答你的几个问题...

**集成/分离**：我建议您将 REST 应用程序与您的 WEB GUI 分开构建。人们构建 API 的一个重要原因是将其公开给多个应用程序，因此我不会将 WEB GUI 与 API 紧密联系在一起。这种思想符合整个关注点分离的概念。例如，如果稍后您构建一个移动应用程序来访问相同的 API，如果您需要关闭您的 WEB GUI 进行部署，它不会受到影响。

**杰克逊/ JAXB**：我强烈推荐杰克逊。在我看来，它是性能和功能的最佳组合。

**Spring MVC/Jersey**：我建议坚持使用 Spring 有几个原因：

1.) 学习曲线较少，如果您已经熟悉 Spring，那么坚持使用它并没有错。

2.）今天泽西岛的依赖注入或多或少被破坏了（http://java.net/jira/browse/JERSEY-517）。因此，如果您像我一样习惯了它在 Spring 中的效果，那么切换到 Jersey 会很痛苦。这应该在 2.0 版本中解决，但尚未最终确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:01:16.923

这取决于几个因素。我要问的第一个问题是关于性能的。如果您只有一个 webapp，则 GUI 用户或 WS 用户都可能使服务器过载。因此，也许更好的解决方案是拥有 3 个不同的工件。

GUI WebApp WS WebApp 业务通用神器

您可以根据需要升级每个 webapp。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-31T01:49:24.557

这个问题已经有好几年了，无论如何，今天一个合理的方法是将 Spring webapp 迁移到 Spring Boot，包括 Spring Data REST 模块。所有 JPA 存储库都将自动导出为全面且可发现的 REST API。

# grails - Grails 中的 data = null withRest（休息客户端）

> ID：13089476
> 
> 赞同：1
> 
> 时间：2012-10-26T15:04:35.047
> 
> 标签：grails, grails-2.0, httpbuilder

我在 grails 中遇到了 HTTPBuilder 休息客户端的问题。下面的代码：

```
withHttp(uri: "http://uclassify.com") {
                println "fetching comment sentiments for " + comment.content
                get(path : '/browse/uClassify/Sentiment/ClassifyText/', query : [readkey: key, text: comment.content, version: '1.01'], requestContentType: ContentType.XML){resp, data ->
                    println "data:"
                    println resp.getData()
                    println "status"
                    println resp.getStatus()
                    println "status line"
                    println resp.getStatusLine()
                    println "headers"
                    println resp.getAllHeaders()

                    println "data again"
                    println data        
                    println "finished"
                } 
```

与 firebug 和 curl 中显示的标头相比，标头返回正确，但是响应的主体始终为空。内容长度 383 表示服务器正在返回数据（与 firebug 中的标头大小相同）。

这是生成的标准输出。

```
fetching comment sentiments for something
data:
null
status
200
status line
HTTP/1.1 200 OK
headers
[Date: Fri, 26 Oct 2012 14:55:40 GMT, Server: Microsoft-IIS/6.0, X-Powered-By: ASP.NET, X-AspNet-Version: 2.0.50727, Set-Cookie: ASP.NET_SessionId=ipttqq55rini0t555i53zmvd; path=/; HttpOnly, Cache-Control: private, Content-Type: text/xml; charset=utf-8, Content-Length: 383]
data again

finished
fetching comments complete 
```

有什么想法或建议吗？

谢谢

# jquery - 如何在以编程方式创建的 jquery 按钮上设置图标

> ID：13089482
> 
> 赞同：1
> 
> 时间：2012-10-26T15:05:04.347
> 
> 标签：jquery, button, dynamic

您好我正在尝试动态创建一个按钮，但无法获取按钮上的图标。我无法获得显示图标的按钮。我将不胜感激任何帮助。如何在 removeBtn 按钮小部件上设置关闭图标。

```
var a = [{
"_id": {
    "$oid": "50894875744e80aa5fa59853"
},
"name": "Test 1",
"color": "#b63e3e",
"propertyNames": ["Notes"]},
{
"_id": {
    "$oid": "50894afe744e80aa5fa59854"
},
"name": "Test 2",
"color": "#413bb6",
"propertyNames": ["Notes"]},
{
"_id": {
    "$oid": "50894c23744e80aa5fa59855"
},
"name": "Test 3",
"color": "#95eba5",
"propertyNames": ["Notes"]}];

for (var i = 0; i < a.length; i++) {

  var button = document.createElement('span');
  button.className = 'color-button';
  button.style.backgroundColor = a[i].color;

  var selectionItem = document.createElement('li');
  selectionItem.id = a[i]._id.$oid;
  selectionItem.className = "ui-widget-content";
  selectionItem.appendChild(button);

  selectionItem.appendChild(document.createTextNode(a[i].name));
  $('#id1').append(selectionItem);

  var removeBtn = $('<button/>',
            {
                    click: function(){
                    alert(this.parentNode.id);
                }
            });
  removeBtn.css("float","right");
  $("#"+a[i]._id.$oid).append(removeBtn);
}​ 
```

这是代码的 jsFiddle 链接：http: [//jsfiddle.net/vivsriva/VmEeR/5/](http://jsfiddle.net/vivsriva/VmEeR/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:09:05.597

一种方法是`class`为每个按钮添加特定的背景图像。

```
removeBtn.addClass('btn1'); 
```

并拥有像这样的 CSS：

```
button.btn1 { 
   background-image: url('yourimage')
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:30:52.567

只是一个指针来帮助你。这是您使用更多 jQuery 的代码，并在您的关闭按钮上包含 jQueryUI 的关闭图标：

```
for (var i = 0; i < a.length; i++) {
    var button = $("<span />").addClass("color-button").css({ "background-color": a[i].color }),
        selectionItem = $("<li />").prop({ id: a[i]._id.$oid }).addClass("ui-widget-content").css({ "background-color": a[i].color }).text(a[i].name).prepend(button);

    $('#id1').append(selectionItem);

    var removeBtn = $("<button />").css({ "float": "right", "margin-top": ".1em", "width": "1em" }).appendTo($("#"+a[i]._id.$oid));

    removeBtn.button({ icons: { primary: 'ui-icon-circle-close' }, text: false })
    .click(function(e) {
        alert(this.parentNode.id);
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:12:39.710

就这样做

```
removeBtn.addClass('button-image').css("float","right");

.button-image 
{ 
   background-image: url('imageurl')
} 
```

# c# - 如何从使用 VB.NET 连接到计算机的设备获取信息

> ID：13089484
> 
> 赞同：0
> 
> 时间：2012-10-26T15:05:12.980
> 
> 标签：c#, vb.net, winforms, device, hid

没有直接资源，我可以在互联网上找到这个问题。

**我的问题是：**

1.  如何获取有关连接到 PC 的设备的信息。
2.  如何检查它是否连接到PC？
3.  我怎样才能得到这些设备正在传输到计算机的数据？
4.  上述问题是否需要 VB.NET 以外的其他专业知识？

**我们使用的软件：**

1.  Visual Studio 2010 终极版

我已经阅读了很多关于 HID 类和其他一些东西的东西，但我担心，也许我无法理解逻辑，或者它实际上不是这个主题的正确起点。

我需要有关上述查询的专家建议和注释，如果有人可以指导我制定相同的路线图，那就太好了。比如如何启动以及启动此类设备的编程需要哪些信息。

我知道这个问题很长，但我认为给出我们想要做什么的确切想法是明智的。另外，如果要回答这个问题需要任何先决条件，我会尽我所能，尽快将其提供给大家。

我会给你一个关于设备的想法：

**设备类型：**医疗设备

**该设备的软件作用：**该软件充当设备的接收器，因为设备通过其内置键盘获取用户输入的数据，然后设备将该数据发送到 PC。该软件获取设备发送的数据并显示在桌面应用程序中。

**编辑第 1 部分--------**

**连接方式：**设备上有一个串口，用另一端的串口连接到PC，另外，我们使用串口转USB的转换器将潜水器与有USB口的系统连接起来。

**编辑第 1 部分结束--------**

***以下是我开发此软件的一些详细情况，无需阅读，但您可以找到我的确切要求***

我一直在 IT 部门的一家公司工作，并为他们开发 VB.NET 应用程序。我对 VB 应用程序开发有很好的掌握。

但是，我的公司有一台可与 PC 应用程序配合使用的设备。这个PC应用程序是由其他公司开发的，开发时我们公司没有IT部门。自 3 年以来，我们有一个 IT 部门，我作为一名程序员为公司开发了许多 VB.NET 桌面应用程序。

现在，公司希望获得为其设备开发的具有一些新功能的全新软件。

现在公司不想让任何其他公司开发的这个新软件，因为担心这个想法会被盗。所以他们要求我们开发它。

我很欣赏他们的需求，因为我们与 IT 相关并且完全了解我们所做的事情，我们希望为自己开发这个软件。

但是我在互联网上经历了很多事情，却找不到任何启动说明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:20:47.077

Frist of all, you need to know the format of the messages sent by the device. If there is no documentation already available on that, get a tool like [HDD's Free Serial Port Monitor](http://www.serial-port-monitor.com/), or you can just use Windows' built in Hyper Terminal (at Accessories->Communication). Use that tool to see what goes down the serial cable when you do stuff on the device.

Once you figure out the messages' format, all you have to do is use [.NET's SerialPort class](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx) to read the data and parse it into something useful.

# asp.net-mvc - ASP.NET MVC：@section 的用途是什么？

> ID：13089489
> 
> 赞同：140
> 
> 时间：2012-10-26T15:06:00.807
> 
> 标签：asp.net-mvc

对于 ASP.NET MVC 应用程序，我看到了[这篇博客文章](https://weblogs.asp.net/scottgu/asp-net-mvc-3-layouts-and-sections-with-razor)。作者 ScottGu 添加`@section`到 Index.cshtml。

我有几个问题（参考上面的文章）：

*   Index.cshtml 是共享视图吗？
*   示例代码使用`@section`特定视图中的代码。为什么？

有人可以解释我为什么以及何时`@section`在视图中使用吗？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-10-26T15:11:20.150

`@section`用于定义从共享视图中覆盖的内容。基本上，这是您调整共享视图的一种方式（类似于 Web 表单中的母版页）。

您可能会发现[Scott Gu 对此的文章非常有趣](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)。

**编辑：基于额外的问题澄清**

语法进入`@RenderSection`共享视图，例如：

```
<div id="sidebar">
    @RenderSection("Sidebar", required: false)
</div> 
```

然后将使用`@Section`语法将其放置在您的视图中：

```
@section Sidebar{
    <!-- Content Here -->
} 
```

在 MVC3+ 中，您可以直接定义要用于视图的布局文件，也可以为所有视图设置默认视图。

通用视图设置可以在 _ViewStart.cshtml 中设置，它定义了类似于这样的默认布局视图：

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

您还可以将共享视图设置为直接在文件中使用，如 index.cshtml 直接如此片段所示。

```
@{
    ViewBag.Title = "Corporate Homepage";
    ViewBag.BodyID = "page-home";
    Layout = "~/Views/Shared/_Layout2.cshtml";
} 
```

您可以通过多种方式调整此设置，并在[此 SO answer](https://stackoverflow.com/questions/5161380/how-do-i-specify-different-layouts-in-the-asp-net-mvc-3-razor-viewstart-file)中提到更多。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-26T15:11:33.967

一个很好的例子是 Javascript。您希望它位于浏览器中呈现的页面底部，因为这是最佳实践。

您将如何从基于布局/母版页的视图中执行此操作，您只能访问页面的中间？

您可以通过在布局页面底部声明一个脚本部分来执行此操作。然后你可以添加内容，在这种情况下 Javascript 包括（我希望！），从你的视图页面到你的布局页面的底部。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-26T18:02:53.010

当您希望在布局页面中定义的占位符中呈现一些代码/内容时，您希望使用部分。

在您链接的具体示例中，他在_Layout.cshtml 中定义了RenderSection。使用该布局的任何视图都可以定义与布局中定义的名称相同的@section，它将替换布局中的 RenderSection 调用。

也许您想知道我们如何知道 Index.cshtml 使用该布局？这是由于一些 MVC/Razor 约定。如果您查看他添加视图的对话框，则会选中“使用布局或母版页”框，并在其下方显示“如果在 Razor _viewstart 文件中设置，则留空”。它没有显示，但在 _ViewStart.cshtml 文件中的代码如下：

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

viewstarts 的工作方式是同一目录或子目录中的任何 cshtml 文件将在 ViewStart 运行之前运行它。

这就是告诉我们 Index.cshtml 使用 Shared/_Layout.cshtml 的原因。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-26T15:14:29.333

它允许您在模板中定义一段`@Section`代码，然后您可以将其包含在其他文件中。例如，模板中定义的侧边栏可以在另一个包含的视图中引用。

```
//This could be used to render a @Section defined as @Section SideBar { ...
@RenderSection("SideBar", required: false); 
```

希望这可以帮助。

# c# - 为什么我不能直接调用 DbContext.ObjectContext？

> ID：13089496
> 
> 赞同：2
> 
> 时间：2012-10-26T15:06:23.237
> 
> 标签：c#, entity-framework

为什么不能`DbContext.ObjectContext`直接打电话？我可以做这个`((IObjectContextAdapter)context).ObjectContext`

我认为内部机制是这样的接口的隐式实现

```
class Program 
{ 
    static void Main(string[] args) 
    { 
        TestClass t = new TestClass(); 
        ((TestInterface)t).TestMethod(); 
        // I can't call t.TestMethod()
        Console.ReadKey(); 
    } 
} 

public interface TestInterface 
{ 
    void TestMethod(); 
} 

public class TestClass : TestInterface 
{ 
    void TestInterface.TestMethod() 
    { 
        Console.WriteLine("abcdefg"); 
    } 
} 
```

我之前遇到过这个问题，它是`IEnumerable<T>`继承`IEnumerable`的，它有通用版本`IEnumerator<T> GetEnumerator()`和非通用版本`IEnumerator GetEnumerator()`，但你只能调用通用版本而不是非通用版本。这是因为非泛型不是类型安全的，作者想隐藏它。

[但是DbContext](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx)类的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T15:15:13.513

Because ObjectContext is implemented explicitly in the DbContext class (as shown on the [MSDN - DbContext](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx)) you have to explicitly cast your object to the Interface to call the Property.

" When a member is explicitly implemented, it cannot be accessed through a class instance, but only through an instance of the interface. " - [MSDN - Explicit Interface Implementation Tutorial](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)

Hope this helps!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:08:44.443

我怀疑因为`ObjectContext`已被弃用而支持`DbContext`. `DbContext`是一个比`ObjectContext`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:33:27.087

如果您检查[Codeplex](http://entityframework.codeplex.com/SourceControl/changeset/view/c013cf02936a)上可用的 DbContext 类的源代码，则会显式实现 ObjectContext 属性。这是源代码中的一段代码（我已删除评论）：

```
ObjectContext IObjectContextAdapter.ObjectContext
        {
            get
            {
                InternalContext.ForceOSpaceLoadingForKnownEntityTypes();
                return InternalContext.ObjectContext;
            }
        } 
```

这就是为什么您不能使用 DbContext 对象调用属性 O​​bjectContext 而不将其转换为 IObjectContextAdapter 类型的原因。

# eclipse - Git Eclipse 插件如何知道我安装插件之前的修订？

> ID：13089501
> 
> 赞同：0
> 
> 时间：2012-10-26T15:06:46.053
> 
> 标签：eclipse, git, eclipse-plugin, egit, jgit

哇...所以我刚刚安装了 Git Eclipse 插件并踢了一些轮胎。进行了更改并将其全部签入。但我注意到文件的修订历史记录包括我昨天**在安装 GIT 之前**所做的更改。Eclipse Git 如何知道这些变化？它们确实是准确的。基本的 Eclipse 是否会缓存最近的文件更改，然后将它们移植到 Git 中，或者 Git 以某种方式读取它们？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:07:50.873

Eclipse 还具有独立于 EGit 的“本地历史”的概念。请参阅[Eclipse 帮助中的这一章](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2FgettingStarted%2Fqs-55.htm)。

# android - 使用 sharedPreferences 添加数字

> ID：13089502
> 
> 赞同：0
> 
> 时间：2012-10-26T15:06:47.487
> 
> 标签：android, sharedpreferences

我正在制作一个游戏，有点像一个琐事游戏，每个问题都有一个单独的类和 xml，我需要它来保持对我的主要活动的评分。所有活动 xml 都显示了它的玩家姓名，所以我决定，因为只有两件事需要记住 sharedpreferences 是完美的，我已经让用户名留下来，并且不会因为这个网站而导致任何强制关闭。但是几个小时以来，我一直在尝试弄清楚如何让我的 textview 从 0 变为 1，然后从 1 变为 2，依此类推，我有一个说错的类和 xml，一个说对的类。所以在那些课里面我想去

```
if(username1==displayedname.getText.toString ())
      PeepsScore.Userscore1+1 
```

（基本上）对不起语法，但没有我的笔记，我在这方面很糟糕，我正在通过谷歌和 YouTube 自学。基本上，我将该类中的 textxiew 设置为空白，并且我的 java 放入任何名称，所以我正在寻找一个 if 语句，它意识到 textview 与共享首选项 username1 相同。我相信我已经做到了。所以我只需要知道如何添加一个点。我也已经将 userscore1 存储在共享首选项中。如果有另一个与 if 语句完全不同的想法也可以，任何示例代码链接提示我都会在这一点上采取任何措施 Edit(

好的，我将其更改为 putint() 方法，就在这里

整数零=0；

```
 SharedPreferences peepsScores= PreferenceManager.getDefaultSharedPreferences(GamePlayFirst.this);
    SharedPreferences.Editor editor =peepsScores.edit();

    editor.putInt("userScore1", zero);
    editor.putInt("userScore2", zero);
    editor.putInt("userScore3", zero);
    editor.putInt("userScore4", zero);
    editor.putInt("userScore5", zero);
    editor.putInt("userScore6", zero);
    editor.putInt("userScore7", zero);
    editor.putInt("userScore8", zero);
    editor.commit();

    SharedPreferences peepsScores = PreferenceManager.getDefaultSharedPreferences(this);
    //tryed this
    int userScore1 = peepsScores.getInt("userScore1","u");
    //tryed this
    userScore2 = peepsScores.getInt("userScore2","0");
    //and tryed this
    String userScore3 = peepsScores.getInt("userScore3","0");
    String userScore4 = peepsScores.getInt("userScore4","0");
    String userScore5 = peepsScores.getInt("userScore5","0");
    String userScore6 = peepsScores.getInt("userScore6","0");
    String userScore7 = peepsScores.getInt("userScore7","0");
    String userScore8 = peepsScores.getInt("userScore8","0"); 
```

无论我改变什么随机的东西，get int 方法都带有下划线，然后如果我删除接收类的第一行 peepScore 带有下划线 我一直在 android dev webiste 这个网站和谷歌上，一切都说它像 getInt 一样简单我是什么做错事

稍后我会尝试弄清楚添加，我想当我最终得到这个时，我会将这个发布给像我这样的所有新手，看看哈哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:21:47.393

这是您将 int 保存到 sharedPreferences 的方式

```
SharedPreferences mSettings = mContext.getSharedPreferences(SETTINGS_FILE_NAME, 0);
SharedPreferences.Editor editor = mSettings.edit();
        editor.putInt("yourKey", yourInt);
        editor.commit(); 
```

如在“获取”对共享首选项的引用中，从共享首选项中获取编辑器，然后将 int 及其 Key 放入编辑器中。然后提交编辑器（这将保存到磁盘，以便您以后可以从另一个活动或另一个会话中获取它）。

也正如蒂姆提到的

```
if(username1==displayedname.getText.toString ()) 
```

错了，用

```
if(username1.equals(displayedname.getText.toString())) 
```

# ruby - 返回具有匹配交集的数组

> ID：13089504
> 
> 赞同：1
> 
> 时间：2012-10-26T15:06:52.293
> 
> 标签：ruby

我有一个数组：

```
a = [1,1,2,3,4] 
```

还有更多数组：

```
b =[[1,2,3], [1,1,4], [7,3,4], [1,5,6,1]] 
```

对于 , 中的每个元素`b`，`b_i`我想知道：

*   有没有`b_i`这样的`a & b_i == b_i`，和
*   那是什么`b_i`

这就是我的想法

```
def get_matching(a, b)
   b.each {|b_i|
      return b_i if (a & b_i) == b_i
   }
end 
```

我在哪里可以检查返回值是否为 nil 以确定第一个问题的答案？不过，也许我可以将它们实现为两个单独的函数，这样检查是否存在这样的匹配就不需要实际返回匹配。

假设如果有很多，我只需要第一个匹配。

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:17:37.917

这可能不是更有效，但使用[Enumerable#detect更像](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-detect)*是ruby​​-esque*

```
def get_matching(a, b)
  b.detect{ |b_i| (a & b_i) == b_i }
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:17:39.113

你忘了`return nil`在你的功能结束时做。

更好的方法是：

```
def get_matching(a, b)
   b.find do |b_i|
      (a & b_i) == b_i
   end
end 
```

还要记住，数组相等关心元素的顺序。最好写成：

```
(b_i - a).empty? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:35:20.040

在我看来，使用[Ruby Set是有原因的](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set.html)

```
require 'set'

def get_matching(a,b)
  a = a.to_set  
  b.detect { |b_i| b_i.to_set.subset?(a) }
end 
```

当然，这不是最短的答案，但如果您有很多类似的任务，那么使用 Set 可能是合理的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T20:30:03.330

这应该返回 b_i 是子集或等于 a 的所有数组：

```
b.select { |b_i| (b_i - a).empty? } 
```

# eclipse - eclipse rcp 启动问题

> ID：13089506
> 
> 赞同：0
> 
> 时间：2012-10-26T15:06:55.117
> 
> 标签：eclipse, rcp

我在运行 Eclipse RCP 应用程序时遇到问题。我可以从 Eclipse 运行它，但是当我创建一个 exe 文件并尝试运行它时，我看到以下错误。所有必需的插件都在插件文件夹中。任何人都知道问题可能是什么？

```
!ENTRY org.eclipse.osgi 2 0 2012-10-26 10:28:17.358

!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:

!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-26 10:28:17.359
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.ui.workbench_3.6.2.3-10-19-85532e_.jar/ was not resolved.

!SUBENTRY 2 org.eclipse.ui.workbench 2 0 2012-10-26 10:28:17.360

!MESSAGE Missing required bundle org.eclipse.core.databinding.observable_[1.2.0,2.0.0).

!SUBENTRY 2 org.eclipse.ui.workbench 2 0 2012-10-26 10:28:17.360

!MESSAGE Missing required bundle org.eclipse.core.databinding.property_[1.2.0,2.0.0).

!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-26 10:28:17.361

!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.jface.databinding_1.4.0.I20100601-0800.jar/ was not resolved.

!SUBENTRY 2 org.eclipse.jface.databinding 2 0 2012-10-26 10:28:17.362

!MESSAGE Missing required bundle org.eclipse.core.databinding.property_[1.3.0,2.0.0).

!SUBENTRY 2 org.eclipse.jface.databinding 2 0 2012-10-26 10:28:17.363

!MESSAGE Missing required bundle org.eclipse.core.databinding.observable_[1.3.0,2.0.0).

!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-26 10:28:17.364

!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.core.databinding_1.3.100.I20100601-0800.jar/ was not resolved.

!SUBENTRY 2 org.eclipse.core.databinding 2 0 2012-10-26 10:28:17.365

!MESSAGE Missing required bundle org.eclipse.core.databinding.observable_[1.3.0,2.0.0).

!SUBENTRY 2 org.eclipse.core.databinding 2 0 2012-10-26 10:28:17.366

!MESSAGE Missing required bundle org.eclipse.core.databinding.property_[1.3.0,2.0.0). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T09:46:57.050

尝试这个，

1.  转到“运行->运行配置...”。

2.  选择“插件”选项卡。

3.  单击“添加所需插件”按钮。

[这里](http://harikrushnav.blogspot.com/2013/04/eclipse-rcp-error-javalangruntimeexcept.html)提到了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:35:48.930

在eclipse中创建.exe之前你同步了吗？

# excel - 在 Access 2010 中制作日历

> ID：13089507
> 
> 赞同：0
> 
> 时间：2012-10-26T15:06:55.920
> 
> 标签：excel, vba, ms-access

我有一个日历表，列出了一定范围内的所有日期，然后一些日期附加了其他日期以供参考。

该表是 60_Days，它具有 Date 和 Date_60 字段，其中 Date 是实际日历，Date_60 是指需要在 Date 下面列出的其他日期。

我想制作一个显示普通日历的报告，但会在它存在的日期下方显示 Date_60 日期。有任何想法吗？如果可以做到，Visual Basic 会很好。如果我可以将它导出到 Excel 中并且以某种方式使它更容易，那也很好。谢谢！！

编辑

我不明白为什么这被否决了，因为似乎没有人知道我的答案。只是诚实。我找不到我要找的东西，也不知道从哪里开始。我确实读过，出于某种原因，MS 在 2010 版的 Access 中取出了表单和报告中的日历控件……对我来说没有意义，但无论如何。在做了更多研究之后，似乎这可能可以在 Excel 中完成，但我仍然不知道它是如何完成的。

下一个编辑。我想使用的日历类型应该有点像这样

[http://www.google.com/imgres?um=1&hl=en&safe=active&sa=N&biw=1280&bih=880&tbm=isch&tbnid=WR_gZPF0plXvWM:&imgrefurl=http://www.docstoc.com/docs/16553160/Year-Round- School-Calendar-2009-2010-March-2010-S-7-14-21-28-7-14-21-28-SM-1-8-15-22-29-T-2-9-16- 23-30-W-3-10-17-24-31-T-4-11-18-25-F-5-12-19-26-S-6-13-20-27-W-4- 11-18-25-T-5-12-19-26-F-6-13-20&docid=_aFOfbu3eBlxcM&imgurl=http://img.docstoccdn.com/thumb/orig/16553160.png&w=1275&h=1650&ei=Q8yKUJmuIZCK9gTd34HACg&zoom= 1&iact=rc&dur=357&sig=117327434000511743512&page=2&tbnh=150&tbnw=117&start=24&ndsp=35&ved=1t:429,r:5,s:20,i:158&tx=104&ty=49](http://www.google.com/imgres?um=1&hl=en&safe=active&sa=N&biw=1280&bih=880&tbm=isch&tbnid=WR_gZPF0plXvWM:&imgrefurl=http://www.docstoc.com/docs/16553160/Year-Round-School-Calendar-2009-2010-March-2010-S-7-14-21-28-7-14-21-28-S-M-1-8-15-22-29-T-2-9-16-23-30-W-3-10-17-24-31-T-4-11-18-25-F-5-12-19-26-S-6-13-20-27-W-4-11-18-25-T-5-12-19-26-F-6-13-20&docid=_aFOfbu3eBlxcM&imgurl=http://img.docstoccdn.com/thumb/orig/16553160.png&w=1275&h=1650&ei=Q8yKUJmuIZCK9gTd34HACg&zoom=1&iact=rc&dur=357&sig=117327434000511743512&page=2&tbnh=150&tbnw=117&start=24&ndsp=35&ved=1t:429,r:5,s:20,i:158&tx=104&ty=49)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:00:15.700

实际上，如果使用 Access 2010，您可以使用新的表和存储过程触发器功能。因此，您可以将预订文本写到一个有 42 列的表格中。

然后，您只需将表单绑定到表格。

这就是我在此处生成此示例的操作：

[http://www.youtube.com/watch?v=AU4mH0jPntI](http://www.youtube.com/watch?v=AU4mH0jPntI)

在上面，我使用了 Access 的新 Web 发布功能，因此它可以在任何浏览器中运行，包括我的 iPad。

但是，如果您有 VBA，则只需在表单上放置 42 个文本框，然后使用查询 + 循环来填写文本框。你会得到如下所示的东西：

![在此处输入图像描述](../Images/9fa97441d14ac43168562e817c145038.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:51:14.520

在我看来，您可以将 Excel 用于此类事情。看起来很简单。这是其中一个 excel 日历模板的图片，其中有很多内置于 excel 中：

![日历](../Images/de7edd101984f8785d089c8a7e3e8a7e.png)

如果在您设置了这样的模板后，您想将日期列表中的所有数据放入此日历中，您可以编写一个简单的循环宏。我将提供一些伪代码，您可以使用它们来帮助您处理逻辑。

* * *

首先将列表的所有数据放入与日历相同的工作簿的工作表中。

伪代码：

1.  开始循环以遍历日期列表
2.  每次通过循环都有代码：

    - 确定月份并相应地选择正确的工作表（模板中每个月的工作表） - 确定日期并使用`Find`函数搜索该日期`Value`
    - 将 Date_60 值粘贴到该日期下方的单元格中（就像在正常日历上的一天）

* * *

此外，这里是使用日期数据进行编码的一个很好的链接：http: [//www.classanytime.com/mis333k/sjdatetime.html](http://www.classanytime.com/mis333k/sjdatetime.html)

希望这可以帮助！

# sql - 是否可以将所有数据从一个表复制到另一个表，再加上一列？

> ID：13089513
> 
> 赞同：4
> 
> 时间：2012-10-26T15:07:44.860
> 
> 标签：sql, oracle

我有两张略有不同的桌子。表 A 有 4 列，表 B 只有 3 列。我想将表 B 中的所有数据复制到表 A 中，但我还想用`1`每一行的值填充额外的列。

如果不是额外的列，这将起作用：

```
insert into TABLEA (COL1, COL2, COL3) select COL1, COL2, COL3 from TABLEB; 
```

不幸的是，表 A 中的额外列不可为空，所以我不能在之后运行更新。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T15:08:28.953

指定列并使用常量作为值（请注意，您可以在 select 子句中混合使用常量和列引用）。在这种情况下，我们指定每一行都将获得`1`column的常量`COL4`。

```
insert into TABLEA (COL1, COL2, COL3, COL4)
select COL1, COL2, COL3, 1
from TABLEB; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:08:49.310

```
insert into TABLEA (COL1, COL2, COL3, extra) 
select COL1, COL2, COL3, 1 
from TABLEB; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:13:54.533

你试过这个吗？

```
insert into TABLEA (COL1, COL2, COL3, COL4) select COL1, COL2, COL3, 'Whatever' as COL4 from TABLEB; 
```

在我的电脑上工作:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-10T18:59:07.510

```
INSERT INTO tableA SELECT a.*,<VALUE FOR THE EXTRA COLUMN> FROM tableB a 
```

例如，如果额外的列`tableA`是`sys_creation_date`

```
INSERT INTO tableA SELECT a.*,sysdate FROM tableB a 
```

或者

```
INSERT INTO tableA SELECT a.*,'10-Jan-2013' FROM tableB a 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T15:08:42.727

您可以从`TableB`

```
INSERT INTO tableA( col1, col2, col3, col4 )
  SELECT col1, col2, col3, 1 col4
    FROM tableA 
```

# cuda - 共享内存中的 PTX 可变长度缓冲区

> ID：13089515
> 
> 赞同：2
> 
> 时间：2012-10-26T15:07:57.667
> 
> 标签：cuda, buffer, shared-memory, ptx

我正在尝试在 PTX 中实现一个全局归约内核，它使用共享内存在线程块内进行归约（就像那里的所有 CUDA C 示例一样）。在 CUDA C 中，可以在共享内存中定义一个可变长度数组

```
extern __shared__ float sdata[]; 
```

如何在 PTX 中获得等价物？

看起来不合适的是一个固定长度的数组，比如

```
.shared .f32 sdata[ LENGTH ]; 
```

因为我希望内核可重用于不同的输入数组长度。

我能做的是定义一个变量

```
.shared .f32 sdata; 
```

并将其用作数组的基地址。希望它是在共享内存开始时分配的。然后我可以访问数组元素

```
ld.shared.f32 %r4,[sdata + <offset>] 
```

这看起来也有点好笑，因为`sdata`它被定义为`float`. 但它实际上是浮点数的地址。从这个意义上说，上述行确实是正确的。但是我不确定这是否保证正确，只要偏移量不大于内核启动时指定的共享内存大小。

PTX 手册没有解释共享内存中的可变长度缓冲区。

任何人都知道如何在 PTX 中实现可变长度缓冲区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:33:33.543

这行得通。然而，它不是完美的解决方案，因为它引入了一个`extern`链接变量。

```
.version 2.3
.target sm_20
.extern .shared .align 4 .b8 sdata[];
.entry func (.param .s32 param0,...)
{
 //
 // Base addresses
 mov.u64 w2,sdata;  // shared memory
 ld.shared.s32 i9,[w2+0];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-02-05T18:52:05.827

> 在 CUDA C 中，可以在共享内存中定义一个可变长度数组
> 
> ```
> extern __shared__ float sdata[]; 
> ```

这不是[该术语通常意义上](https://en.wikipedia.org/wiki/Variable-length_array)的可变长度数组- 它只是用于访问动态限制数量的共享内存的语法，它是在内核启动期间设置的。

CUDA 编译器引入定义的事实`.extern`是，TBH，一个不幸的实现细节 - nVIDIA 不幸地将其作为 CUDA 语法的一部分公开。

# ruby-on-rails - Rails 控制台出错

> ID：13089517
> 
> 赞同：0
> 
> 时间：2012-10-26T15:08:10.207
> 
> 标签：ruby-on-rails, model

大家好，rails 控制台遇到了一些问题。这是错误。

```
>> Page.editors << me
NoMethodError: undefined method `editors' for #<Class:0x1038560e8>
    from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/dynamic_matchers.rb:50:in `method_missing'
    from (irb):5 
```

这是模型之间的关系。

```
class Page < ActiveRecord::Base
  attr_accessible :name, :permalink, :position
  has_and_belongs_to_many :editors, :class_name => "AdminUser"
  #has_and_belongs_to_many :AdminUser
  belongs_to :subject
  has_many :sections
end 
```

第二个

```
class AdminUser < ActiveRecord::Base
   attr_accessible :first_name, :last_name, :email, :username
  has_and_belongs_to_many :pages
  scope :named, lambda{|first,last| where(:first_name => first,:last_name => last)}
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:11:43.250

`editors`是 的**实例**方法`Page`，*而不是*的类方法`Page`。您需要实例化一个新的实例`Page`来调用`editors`它。

```
page = Page.find(...)
page.editors << me 
```

您要做的是`me`通过在没有意义`<<`的`Page` **类**上使用来追加，因为您没有指定要追加到**哪个** 。`Page``me`

一些阅读：

*   [http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)
*   [http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:10:31.597

这是错误的......应该是

```
p = Page.first

p.editors << me 
```

编辑器是一个通过关联自动生成的实例方法。有关更多信息，请参阅 Rails 指南...

# android - 我正在使用 AsyncTask 并收到线程错误

> ID：13089521
> 
> 赞同：3
> 
> 时间：2012-10-26T15:08:13.203
> 
> 标签：android, multithreading, android-asynctask

我正在通过 AsyncTask 内部类向 Yelp API 发出请求。当我尝试在 onPostExecute() 中打印结果时出现错误。这是我的代码：

```
public class MainActivity extends Activity {

Yelp yelp = new yelp(....);
yelp.execute();
public class Yelp extends AsyncTask<String,Void,Response> {
    double _long = 1;
    double _lat= 1;
    String _term = "sushi";     
  OAuthService service;
  Token accessToken;
  public Yelp(String consumerKey, String consumerSecret, String token, String tokenSecret) {
    this.service = new ServiceBuilder().provider(YelpApi2.class).apiKey(consumerKey).apiSecret(consumerSecret).build();
    this.accessToken = new Token(token, tokenSecret);
  }

    @Override
    protected void onPostExecute(Response re) {
        try{
            System.out.println(re.getBody());
        }
        catch(Exception e){
            e.printStackTrace();
        }
     }

    @Override
    protected Response doInBackground(String... params) {
        OAuthRequest request = new OAuthRequest(Verb.GET, "http://api.yelp.com/v2/search");
        request.addQuerystringParameter("term", _term);
        request.addQuerystringParameter("ll", _lat + "," + _long);
        this.service.signRequest(this.accessToken, request);
        Response r = request.send();
        return r;
    }
}
} 
```

还有我的错误信息：

```
10-26 10:55:45.630: W/System.err(1060): android.os.NetworkOnMainThreadException
10-26 10:55:45.640: W/System.err(1060):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
10-26 10:55:45.640: W/System.err(1060):     at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:163)
10-26 10:55:45.640: W/System.err(1060):     at libcore.io.IoBridge.recvfrom(IoBridge.java:513)
10-26 10:55:45.640: W/System.err(1060):     at java.net.PlainSocketImpl.read(PlainSocketImpl.java:488)
10-26 10:55:45.640: W/System.err(1060):     at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
10-26 10:55:45.651: W/System.err(1060):     at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
10-26 10:55:45.651: W/System.err(1060):     at java.io.BufferedInputStream.read(BufferedInputStream.java:304)
10-26 10:55:45.651: W/System.err(1060):     at libcore.net.http.FixedLengthInputStream.read(FixedLengthInputStream.java:45)
10-26 10:55:45.651: W/System.err(1060):     at java.io.InputStreamReader.read(InputStreamReader.java:244)
10-26 10:55:45.651: W/System.err(1060):     at org.scribe.utils.StreamUtils.getStreamContents(StreamUtils.java:29)
10-26 10:55:45.651: W/System.err(1060):     at org.scribe.model.Response.parseBodyContents(Response.java:40)
10-26 10:55:45.651: W/System.err(1060):     at org.scribe.model.Response.getBody(Response.java:66)
10-26 10:55:45.660: W/System.err(1060):     at com.example.first.MainActivity$Yelp.onPostExecute(MainActivity.java:109)
10-26 10:55:45.670: W/System.err(1060):     at com.example.first.MainActivity$Yelp.onPostExecute(MainActivity.java:1)
10-26 10:55:45.670: W/System.err(1060):     at android.os.AsyncTask.finish(AsyncTask.java:631)
10-26 10:55:45.670: W/System.err(1060):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
10-26 10:55:45.670: W/System.err(1060):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
10-26 10:55:45.681: W/System.err(1060):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-26 10:55:45.690: W/System.err(1060):     at android.os.Looper.loop(Looper.java:137)
10-26 10:55:45.690: W/System.err(1060):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-26 10:55:45.710: W/System.err(1060):     at java.lang.reflect.Method.invokeNative(Native Method)
10-26 10:55:45.710: W/System.err(1060):     at java.lang.reflect.Method.invoke(Method.java:511)
10-26 10:55:45.720: W/System.err(1060):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-26 10:55:45.720: W/System.err(1060):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-26 10:55:45.730: W/System.err(1060):     at dalvik.system.NativeStart.main(Native Method)
10-26 10:59:03.251: D/testtt(1109): BUS3333333TEDDDD
10-26 10:59:03.351: D/ddd(1109): BUSTEDDDD
10-26 10:59:03.521: D/gralloc_goldfish(1109): Emulator without GPU emulation detected.
10-26 10:59:05.431: D/dalvikvm(1109): GC_FOR_ALLOC freed 174K, 4% free 8126K/8391K, paused 53ms, total 56ms
10-26 10:59:05.440: W/System.err(1109): android.os.NetworkOnMainThreadException
10-26 10:59:05.451: W/System.err(1109):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
10-26 10:59:05.451: W/System.err(1109):     at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:163)
10-26 10:59:05.451: W/System.err(1109):     at libcore.io.IoBridge.recvfrom(IoBridge.java:513)
10-26 10:59:05.461: W/System.err(1109):     at java.net.PlainSocketImpl.read(PlainSocketImpl.java:488)
10-26 10:59:05.461: W/System.err(1109):     at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
10-26 10:59:05.471: W/System.err(1109):     at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
10-26 10:59:05.471: W/System.err(1109):     at java.io.BufferedInputStream.read(BufferedInputStream.java:304)
10-26 10:59:05.471: W/System.err(1109):     at libcore.net.http.FixedLengthInputStream.read(FixedLengthInputStream.java:45)
10-26 10:59:05.481: W/System.err(1109):     at java.io.InputStreamReader.read(InputStreamReader.java:244)
10-26 10:59:05.481: W/System.err(1109):     at org.scribe.utils.StreamUtils.getStreamContents(StreamUtils.java:29)
10-26 10:59:05.481: W/System.err(1109):     at org.scribe.model.Response.parseBodyContents(Response.java:40)
10-26 10:59:05.492: W/System.err(1109):     at org.scribe.model.Response.getBody(Response.java:66)
10-26 10:59:05.492: W/System.err(1109):     at com.example.first.MainActivity$Yelp.onPostExecute(MainActivity.java:104)
10-26 10:59:05.492: W/System.err(1109):     at com.example.first.MainActivity$Yelp.onPostExecute(MainActivity.java:1)
10-26 10:59:05.501: W/System.err(1109):     at android.os.AsyncTask.finish(AsyncTask.java:631)
10-26 10:59:05.501: W/System.err(1109):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
10-26 10:59:05.501: W/System.err(1109):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
10-26 10:59:05.501: W/System.err(1109):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-26 10:59:05.511: W/System.err(1109):     at android.os.Looper.loop(Looper.java:137)
10-26 10:59:05.511: W/System.err(1109):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-26 10:59:05.521: W/System.err(1109):     at java.lang.reflect.Method.invokeNative(Native Method)
10-26 10:59:05.521: W/System.err(1109):     at java.lang.reflect.Method.invoke(Method.java:511)
10-26 10:59:05.521: W/System.err(1109):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-26 10:59:05.521: W/System.err(1109):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-26 10:59:05.531: W/System.err(1109):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:27:32.017

那两行：

```
this.service = new ServiceBuilder().provider(YelpApi2.class).apiKey(consumerKey).apiSecret(consumerSecret).build();
this.accessToken = new Token(token, tokenSecret); 
```

他们正在进行网络操作，这就是您的应用程序崩溃的地方。从构造函数中获取所需的任何引用并在 doInBackground 上进行这些调用

**编辑：**

digitaljoel 指出日志指向 onPostExecute 行，你唯一合乎逻辑的答案是：

`re.getBody()`postExecute中的方法执行网络操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:13:24.967

`onPostExecute()`在您的主线程上运行，并且非常不鼓励/不允许在主线程上处理网络操作。将所有网络操作移动到`doInBackground()`以避免引发此错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:13:31.207

我猜 Response.getBody 会打开流并读取响应，这就是 android 在主线程上将其标记为网络的原因。您应该从 doInBackground 中的响应中读取字符串并返回 String 而不是 Response 到 onPostExecute，这意味着将声明更改为`extends AsyncTask<String,Void,Response>`并将 doInBackground 的返回类型更改为`String`。

# php - 酒店预订查询

> ID：13089536
> 
> 赞同：1
> 
> 时间：2012-10-26T15:08:49.243
> 
> 标签：php, mysql, sql, date

我在酒店预订系统中有三个查询，其中预订自动从房间总数中扣除。我想要的所有这三个查询都只在一个查询中完成。我的查询如下所示：

`$p =`在一个`foreach`循环中，其中`$p['id']`是每个房间类的*id*，是每个房间类`$p['qty']`的最大房间数。

```
$a = $p['id'];
$query = mysql_query("SELECT sum(qty) FROM prereservation where '$arrival' BETWEEN arrival and departure and room_id ='$a' and status = 'active'");
        while($rows = mysql_fetch_array($query))
          {
          $inogbuwin=$rows['sum(qty)'];
          }
$query = mysql_query("SELECT sum(qty) FROM prereservation where departure BETWEEN '$arrival' and '$departure' and room_id ='$a' and status = 'active'");
        while($rows = mysql_fetch_array($query))
          {
          $inogbuwin2=$rows['sum(qty)'];
          }
$query = mysql_query("SELECT sum(qty) FROM prereservation where '$departure' BETWEEN arrival and departure and room_id ='$a' and status = 'active'");
        while($rows = mysql_fetch_array($query))
          {
          $inogbuwin3=$rows['sum(qty)'];
          }

<select>
 <option value="0"></option>
 <? $counter = 1; ?>
 <? while ($counter <= ($p['qty'])-($inogbuwin + $inogbuwin2 + $inogbuwin3)){ ?>
 <option value="<?php echo $counter ?>"><?php echo $counter ?></option>
 <? $counter++;
 }?>
</select> 
```

每次我在这三个查询的范围之间加上一个日期，扣除的总金额也会增加三倍，这就是我希望这三个查询合二为一的原因。

例如，我在数据库中有一条记录 `arrival = 27/10/2012 and departure = 29/10/2012`

并且范围内不可用的输入日期是

```
 $arrival = 27/10/2012 and $departure = 29/10/2012 
 $arrival = 26/10/2012 and $departure = 27/10/2012 
 $arrival = 29/10/2012 and $departure = 30/10/2012 
 $arrival = 26/10/2012 and $departure = 30/10/2012 
 $arrival = 29/10/2012 and $departure = 29/10/2012 
```

所以在这三个查询中的每个日期也是扣除，所以我希望这些查询合二为一。多谢你们

毕竟我修复了错误，但只剩下一个问题。我只在一个月内固定了预订日期，问题是当到达和离开的输入不在同一个月时，它也不起作用。下面是我的代码。

```
<?
$a = $p['id'];
    $query = mysql_query("SELECT
    SUM(IF('$arrival' BETWEEN arrival and departure, qty, 0)) AS bu1,
    SUM(IF('$departure' BETWEEN arrival and departure, qty, 0)) AS bu2,
    SUM(IF(arrival > '$arrival' and departure < '$departure', qty, 0)) AS bu3
    FROM prereservation WHERE room_id ='$a' and status = 'active'");
    $row = mysql_fetch_array($query);

    $test1 = $row['bu1'];
    if ($row['bu1'] == $row['bu2']){
        $test2 = $row['bu2'] - $row['bu1'];
    }else{
        $test2 = $row['bu2'];
    }       
        $test3 = $row['bu3'];
    ?>      
<select id="select" name="qty[]" style=" width:50px;" onchange="checkall()">
<option value="0"></option>
    <? $counter = 1; ?>
<? while ($counter <= ($p['qty']) - ($test1 + $test2 + $test3)){ ?>
    <option value="<?php echo $counter ?>"><?php echo $counter ?></option>
    <? $counter++;
    }?> 
```

请帮助我如何解决这个预订查询，或者也许有另一种方法可以在 php 代码中解决这个问题。多谢你们。

**最后我完成并找到了解决方案，这里是：**

```
 $a = $p['id'];
        $query1 = mysql_query("SELECT DISTINCT id, SUM(qty)
        FROM prereservation 
        WHERE 
        (
            ( '$arival1' BETWEEN arrival AND departure ) OR 
            ( '$departure1' BETWEEN arrival AND departure ) OR 
            ( arrival > '$arival1' AND departure < '$departure1' )
        )
            AND room_id ='$a' 
            AND STATUS = 'active'");  
        while($rows1 = mysql_fetch_assoc($query1)){
        $set1 = $rows1['SUM(qty)'];
        }   
        ?> 
        <select id="select" name="qty[]" style=" width:50px;" onchange="checkall()">
        <option value="0"></option>
        <? $counter = 1; ?>
        <? while ($counter <= ($p['qty']) - $set1){ ?>
        <option value="<?php echo $counter ?>"><?php echo $counter ?></option>
        <? $counter++;
        }?>
        </select> 
```

**谢谢你们分享你的想法，这个解决方案是你的答案的组合..再次感谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:30:37.130

你可以这样做：

```
SELECT
    SUM(IF('$arrival'    BETWEEN arrival   and departure,    qty, 0)) AS bu1,
    SUM(IF(departure    BETWEEN '$arrival' and '$departure', qty, 0)) AS bu2,
    SUM(IF('$departure' BETWEEN arrival   and departure,    qty, 0)) AS bu3
FROM prereservation WHERE room_id ='$a' and status = 'active'" 
```

然后在 PHP 中：

```
$query = mysql_query(...);
$row = mysql_fetch_array($query);
$inogbuwin =$row['bu1'];
$inogbuwin2=$row['bu2'];
$inogbuwin3=$row['bu3'];
mysql_free($query); 
```

***[包括不鼓励](http://it2.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)****使用mysql_ 函数** *的习惯警告，**您可以通过迁移到`PDO`**

 *> 不应使用旧的 API，总有一天**它会被弃用并最终从 PHP**中删除。这是一个流行的扩展，因此这将是一个缓慢的过程，但强烈建议您使用`mysqli`或编写所有新代码`PDO_MySQL`。*

# tfs - TFS：回滚变更集但先签出？

> ID：13089537
> 
> 赞同：1
> 
> 时间：2012-10-26T15:08:54.423
> 
> 标签：tfs

是否可以回滚变更集但先将其签出。

我已将其回滚，因为我还没有准备好，但我不想将其完全删除，我希望将其签出，以便我可以更改它..

因此，服务器（TFS）会回滚文件，这很好，但我会签出这些文件，这样我就可以修改我的问题并重新签入

这可能吗？

我也安装了 CmdLets，所以使用该命令也没有问题。

问题是我正在回滚，因为它是错误的，但我希望在我的解决方案中签出所有这些文件，以便我可以在进行新签入之前修改它们

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T15:58:54.373

这就是你想要做的。我们将从完全回滚您想要从服务器中删除的变更集开始。

让我们将要回滚的变更集称为变更集 10。回滚变更集 10 并签入结果。假设创建了变更集 20。

现在，要将文件恢复到可以编辑它们的状态，您需要回滚变更集*20*。这将使您的工作区处于待处理原始更改的状态，您可以在签入之前对其进行修改。

# java - 在理解摇摆代码方面需要帮助

> ID：13089540
> 
> 赞同：4
> 
> 时间：2012-10-26T15:09:10.930
> 
> 标签：java, swing, graphics2d, paintcomponent, translucency

我开发了一个带有椭圆形和一个按钮的摇摆应用程序，其输出如下所示，代码如下：-

![在此处输入图像描述](../Images/8d00576c5213fb5ca55dc9a887e31aff.png)

代码：-

```
import java.awt.AlphaComposite;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class AlphaCompositeDemo extends JFrame{
AlphaCompositeDemo()
{
super("AlphaComposite Demo");
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setSize(400,400);
setLayout(new FlowLayout());

setBackground(new Color(0.2f,0.7f,0.1f,0.4f));
comp c=new comp();

add(c);
add(new JButton("Click"));
setVisible(true);
}
public static void main(String args[])
{
JFrame.setDefaultLookAndFeelDecorated(true);
SwingUtilities.invokeLater(new Runnable(){public void run(){new AlphaCompositeDemo();}});
}
}

class comp extends JComponent
{
public void paintComponent(Graphics g)
{
    Graphics2D g2=(Graphics2D)g.create();
    g2.setComposite(AlphaComposite.SrcOver);
    g2.setColor(Color.RED);
    g2.fillOval(50, 50, 220, 120);
}
public Dimension getPreferredSize()
{
    return new Dimension(200,200);
}
} 
```

现在我有以下问题：

1.  如果我为椭圆指定了 x,y 坐标，那么为什么在调整窗口大小时它会从其位置移动？（虽然我知道由于FlowLayout它在中心对齐，但它违反了它必须固定的属性，因为我已经指定了坐标x，y）。
2.  其次，如果输出很明显（我没想到），那么我指定的 x,y 坐标是哪个角？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T15:18:50.250

您指定的坐标在您自己的“组件”内，而不是在“父”容器内。

如果您将以下行添加到`paintComponent`方法中，可能更容易理解：

```
g2.drawRect( 0,0, 199, 199 ); 
```

矩形与`preferredSize`您返回的相匹配。您会看到此矩形始终被绘制，并在调整窗口大小时移动。椭圆在矩形内保持相同的相对位置。

请注意，您返回的尺寸`getPreferredSize`小于您尝试绘制的实际尺寸。这就解释了为什么你只能看到椭圆的一部分

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:16:31.687

`Q1`把你的椭圆放在坐标 50、50 上。你没有把你的椭圆居中。

来自[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Graphics.html#fillOval%28int,%20int,%20int,%20int%29)

尝试首先使用 获取框架的中心，`getWidth()`然后`getHeight()`将其用作椭圆中心的值。

就像是：

```
g2d.fillOval(frame.getHeight()/2, frame.getWidth()/2, 200, 200); 
```

`Q2`坐标从左上角开始

# c# - 优化 WPF 4.0 TreeView 滚动性能

> ID：13089541
> 
> 赞同：2
> 
> 时间：2012-10-26T15:09:13.407
> 
> 标签：c#, .net, wpf, wpf-4.0

距离我上一个问题已经太久了，所以这里有一个新问题！

我在滚动期间遇到了虚拟化 WPF TreeView 的性能问题。假设我的 TreeViewItems 下有任意复杂的控件，这些控件可能需要很长时间（比如说 10 毫秒）才能进行测量。向下滚动 TreeView 很快就会变得非常缓慢，因为每个向下滚动单元都会调用 Layout pass。

在这种情况下获得平滑滚动的想法是什么？我尝试了两种不同的方法，但我都遇到了问题。

第一个是缓冲最后一个 MeasureOverride 结果并使用它而不是再次调用 MeasureOverride，除非大小发生变化。只要我在树中只有一个层次结构级别，它就可以工作。但是一旦我得到更多，一些项目就不会被渲染（尽管大小是正确保留的）。使缓冲区无效将不是问题。

第二个是在滚动期间通过触发器替换 treeViewItems 下控件的 ControlTemplate，使用 ControlTemplate 非常快速地呈现。可悲的是，当我停止滚动已附加在逻辑树中的项目时，我遇到了奇怪的异常。

最后，我不在多线程环境中，因此无法使用异步绑定。:(

这是我想要改进的树的一个非常小的示例（这是实现我的第一个想法的树），我只是将 Thread.Sleep(10) 放在用于呈现我的项目的 ContentControl 的 MeasureOverride 中。

```
public class Item
{
    public string Index { get; set; }
    public Item Parent { get; set; }

    public IEnumerable<Item> Items
    {
        get
        {
            if (Parent == null)
            {
                for (int i = 0; i < 10; i++)
                {
                    yield return new Item() { Parent = this, Index = this.Index + "." + i.ToString() };
                }
            }
        }
    }
}

public class HeavyControl : ContentControl
{
    protected override Size MeasureOverride(Size constraint)
    {
        Thread.Sleep(10);
        return base.MeasureOverride(constraint);
    }
}

/// <summary>
/// Logique d'interaction pour MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
    }

    public IEnumerable<Item> Items
    {
        get
        {
            for (int i = 0; i < 20; i++)
            {
                yield return new Item() { Index = i.ToString() };
            }
        }
    }
}

public class MyTreeView : TreeView
{
    protected override DependencyObject GetContainerForItemOverride()
    {
        return new MyTreeViewItem();
    }
}

public class MyTreeViewItem : TreeViewItem
{
    static MyTreeViewItem()
    {
        MyTreeViewItem.IsExpandedProperty.OverrideMetadata(typeof(MyTreeViewItem), new FrameworkPropertyMetadata(true));
    }

    public Size LastMeasure
    {
        get { return (Size)GetValue(LastMeasureProperty); }
        set { SetValue(LastMeasureProperty, value); }
    }

    // Using a DependencyProperty as the backing store for LastMeasure.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty LastMeasureProperty =
        DependencyProperty.Register("LastMeasure", typeof(Size), typeof(MyTreeViewItem), new UIPropertyMetadata(default(Size)));

    protected override Size MeasureOverride(Size constraint)
    {
        if (LastMeasure != default(Size))
        {
            if (this.VisualChildrenCount > 0)
            {
                UIElement visualChild = (UIElement)this.GetVisualChild(0);
                if (visualChild != null)
                {
                    visualChild.Measure(constraint);
                }
            }

            return LastMeasure;
        }
        else
        {
            LastMeasure = base.MeasureOverride(constraint);
            return LastMeasure;
        }
    }

    protected override DependencyObject GetContainerForItemOverride()
    {
        return new MyTreeViewItem();
    }
} 
```

**主窗口.xaml**

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:local="clr-namespace:WpfApplication1"
    Title="MainWindow" Height="350" Width="525">

<Window.Resources>
    <HierarchicalDataTemplate DataType="{x:Type local:Item}" ItemsSource="{Binding Items}">
        <local:HeavyControl>
            <TextBlock FontSize="20" FontWeight="Bold" Text="{Binding Index}" />
        </local:HeavyControl>
    </HierarchicalDataTemplate>
</Window.Resources>

<local:MyTreeView x:Name="treeView" VirtualizingStackPanel.IsVirtualizing="True" ItemsSource="{Binding Items}" />

</Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:18:32.347

我会尝试在您的第二种方法中修复错误。

*   给树的每个节点/项目一个唯一的键
*   拥有包含每个节点/项目中的控件的字典
*   滚动时（甚至不在焦点时，只需在树中显示数据的文本/简单表示。
*   一旦一个节点/项目被聚焦，使用唯一键从字典中用适当的控件替换简单的表示。
*   当我的节点/项目失去焦点时，将其恢复为简单的表示，因为更改仍存储在引用控件的字典值中

# playframework - 播放框架Java客户端

> ID：13089552
> 
> 赞同：0
> 
> 时间：2012-10-26T15:09:56.283
> 
> 标签：playframework

我们有一个带有复杂 UI 的多窗口 Java 应用程序。我们希望通过将数据模型和数据管理移动到服务器并将其他所有内容保留在客户端上，将架构迁移到客户端-服务器设计。因此，应用程序不是从本地网络读取数据，而是从服务器获取数据。我想使用 Play！具有用于处理数据传输的双向异步套接字的框架。全部播放！示例具有浏览器/html 视图。我还没有找到任何客户端是 POJC（普通 ole Java 客户端）的示例。玩！似乎完全围绕浏览器客户端构建。有没有人有使用 POJC 的例子？或者关于设计视图和控制器的建议？我希望提供两种解决方案：用于多面板桌面机器的 POJC 和用于移动和平板设备的浏览器版本。

# php - 转换成安全的 PDO 语句？

> ID：13089557
> 
> 赞同：0
> 
> 时间：2012-10-26T15:10:17.263
> 
> 标签：php, mysql, pdo, mysqli, sql-injection

有人可以告诉我如何`UPDATE tablename SET column`使用 PDO 将我的当前转换为安全可靠的语句以防止 SQL 注入吗？我试图更好地理解绑定和 PDO，但在使用 PDO 进行设置时遇到了麻烦。这是我目前拥有的常规 msqli

```
<?php

session_start();
$db = mysqli_connect("hostname", "username", "password", "dbname"); 
$username = $_SESSION['jigowatt']['username'];
mysqli_query($db, "UPDATE login_users SET Points=Points+15 WHERE username='$username'");

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T15:46:20.783

## MySQL

为此，您不需要 PDO 或 MySQLi。[`mysql_real_escape_string`](http://php.net/mysql-real-escape-string)保护您免受 sql 注入：

```
$name = 'Bob';
$age = 25;
$description = "' OR 1=1"; // a SQL injection string

$query = "
UPDATE people(name, age, description) 
VALUES ('".mysql_real_escape_string($name)."', ".(int) $age.", '".mysql_real_escape_string($description)."');";

// a secure query execution
$result = mysql_query($query); 
```

## PDO

### 和`PDO::quote()`

`PDO::quote()`等于`mysql_real_escape_string`：

```
$pdo = new PDO(...);

$name = 'Bob';
$age = 25;
$description = "' OR 1=1"; // a SQL injection string

$query = "
UPDATE people(name, age, description) 
VALUES (".$pdo->quote($name).", ".(int) $age.", ".$pdo->quote($description).");";

// a secure query execution
$result = $pdo->query($query); 
```

### 使用准备好的语句

您可以使用准备好的语句。您可以将洞查询放在准备好的语句中，但最好对变量使用占位符：

```
$pdo = new PDO(...);

$name = 'Bob';
$age = 25;
$description = "' OR 1=1"; // a SQL injection string

$query = "
UPDATE people(name, age, description) 
VALUES (:name, :age, :description);";

$stmt = $pdo->prepare($query); // prepare the query

// execute the secure query with the parameters
$result = $pdo->execute(array(
    ':name' => $name,
    ':age' => $age,
    ':description' => $description,
)); 
```

# virtualenv - pip 和 virtualenv：删除非要求

> ID：13089561
> 
> 赞同：0
> 
> 时间：2012-10-26T15:10:34.067
> 
> 标签：virtualenv, pip

我一直在使用`pip`with `virtualenv`，我真的很喜欢它。我将所有要求保存在`requirements.txt`使用此命令获得的文件中：

```
`pip freeze > requirements.txt` 
```

我真正想弄清楚的唯一一件事是：
**如何删除不在我的需求文件中的包？**

当我在不同的分支之间移动时，这将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:39:30.257

一种可能的解决方案是执行以下操作：

```
virtualenv --clear PATH_TO_VENV
pip install -r requirements.txt 
```

然而，这是一个有点激烈的解决方案......

# javascript - ZeroClipboard 无法正常工作

> ID：13089563
> 
> 赞同：5
> 
> 时间：2012-10-26T15:10:40.413
> 
> 标签：javascript, google-chrome, typeerror, zeroclipboard, referenceerror

最初，这篇文章是关于我尝试通过 Chrome 扩展程序将 ZeroClipboard 注入网页并供我的 Chrome 扩展程序使用的，但我已经把这个场景变笨了，似乎是徒劳的试图找出问题，但我**仍然**不能让它工作。

我什至很难在 ZeroClipboard 自己的 GitHub 上获得[实际的、记录在案的“最小示例](https://github.com/jonrohan/ZeroClipboard/blob/master/docs/instructions.md#minimal-example)”（诚然，我已将源代码修改为实际上是 HTML5 有效的，但确切的原件也不起作用）。Even `test.html`，包含在`tar.gz`存档中，不起作用！

**“最小示例”：代码**

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>
    </head>
    <body>
        <input type="button" id="d_clip_button" data-clipboard-text="Copy Me!" value="Copy To Clipboard" />
        <script src="ZeroClipboard.js"></script>
        <script>
            var clip = new ZeroClipboard( document.getElementById('d_clip_button') );
        </script>
    </body>
</html> 
```

**“最小示例”：控制台输出**

```
Uncaught TypeError: object is not a function  index.html:11 
```

**信息**

*   [`zeroclipboard-1.0.7.tar.gz`存档](http://code.google.com/p/zeroclipboard/downloads/detail?name=zeroclipboard-1.0.7.tar.gz&can=2&q=)的全部内容与`index.html`.
*   该`ZeroClipboard.js`文件没有损坏/不完整，并且正在正确加载。
*   我正在使用 Chrome v24.0.1312.52

要么我在这里遗漏了一些非常非常明显的东西，要么 ZeroClipboard 的文档/功能非常糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:12:29.733

我刚刚发现的：

*   我已经[从 GitHub 下载了带有 JS/SWF 的 ZIP](https://github.com/jonrohan/ZeroClipboard)。
*   我查看了[Google Code 中的示例](https://code.google.com/p/zeroclipboard/wiki/Instructions#Usage)。

那不匹配。我有一个与这个问题的原始海报类似的错误。

在我使用[来自 GitHub 的示例](https://github.com/jonrohan/ZeroClipboard/blob/master/README.md)后，我成功了。

**结论：**

要么使用示例*并*从 Google Code 下载，要么（我更喜欢）同时使用示例*和*从 GitHub 下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:28:07.803

您需要指定 swf 文件的路径：

```
 var clip = new ZeroClipboard( document.getElementById('d_clip_button'),{moviePath: "/path/ZeroClipboard.swf"} ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:34:19.853

对我来说，问题是变量模块已经由我使用的框架定义，而不是像 ZeroClipboard 那样使用。实际上，如果您查看 ZeroClipboard.js 文件的末尾，您可以看到以下内容：

```
 if (typeof module !== "undefined") {
    module.exports = ZeroClipboard;
  } else if (typeof define === "function" && define.amd) {
    define(function() {
      return ZeroClipboard;
    });
  } else {
    window.ZeroClipboard = ZeroClipboard;
  } 
```

我只是将其替换为以下代码以解决此问题：

```
window.ZeroClipboard = ZeroClipboard; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-02T12:12:22.463

尝试 2.2.1-dev 版本：[http](http://datatables.net/download/build/dataTables.tableTools.nightly.js?_=60133663e907c73303e914416ea258d8) ://datatables.net/download/build/dataTables.tableTools.nightly.js?_=60133663e907c73303e914416ea258d8 我认为它应该在那里解决。我还要指出 new $.fn.dataTable.TableTools(...) 现在是首选形式。TableTools 全局仍在 2.2.x 中，但将在 2.3+ 中删除。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-26T18:24:09.187

对于加载外部脚本，`SCRIPT`在页面正文中插入元素*不会*立即加载并执行脚本。将*立即*`appendChild`返回，在当前脚本执行从所有函数返回并进入空闲状态*后*，脚本将被加载。

 **为此，`SCRIPT`元素的`onload`属性可用于在加载外部脚本后执行代码。

```
function inject_zeroClipboard(){
    var path_Root_zeroClipboard = chrome.extension.getURL("plugins/zeroClipboard");
    var element_Head = document.getElementsByTagName('head')[0];
    var element_zeroClipboard = document.createElement("script");
    element_zeroClipboard.src = path_Root_zeroClipboard + "/ZeroClipboard.js";

    element_zeroClipboard.onload = function() {
        ZeroClipboard.setMoviePath(path_Root_zeroClipboard + "/ZeroClipboard10.swf");
        var clip = new ZeroClipboard.Client();
        clip.glue("element_Example");
        clip.addEventListener("click", function(){
            clip.setText(data_Example);
        });
    };

    element_Head.appendChild(element_zeroClipboard);
} 
```**

# bash - 'sed' 没有替换文件中的匹配序列

> ID：13089564
> 
> 赞同：1
> 
> 时间：2012-10-26T15:10:42.147
> 
> 标签：bash, shell, sed

我在特定文件中有这样的输入

```
#- seeds: "12.123.233.213,123.231.3.2"
    - seeds: "12.12.21.21,43.435.54.54" 
```

如您所见，种子包含两个连续的 IP 地址，因此我想在文件中更改该 IP 地址。第一行将不被考虑，因为它以“#”开头

所以为了做到这一点，我有这个：

```
val=' - seeds: "'

newSeed=${val}${ip1}','${ip2}'"'     # ---> I'm creating the new seed
str=`grep "\s- seed" $file`          # ---> finding matching character
echo $str                            # ---> it does print out the 2nd line
sed -i 's|${str}|${newSeed}|g' $file # --> now replace the matched string with new seed value 
```

但它不会替换文件中的值。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:12:28.650

单引号不扩展变量名。使用双引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:13:33.640

bash 需要双引号来扩展变量。

`sed -i "s/${str}/${newSeed}/g"`

# android - 初始化录音

> ID：13089568
> 
> 赞同：2
> 
> 时间：2012-10-26T15:10:49.043
> 
> 标签：android, android-audiorecord

我正在尝试使用`AudioRecord`，但我无法正确初始化录制。我有两台设备，其中一台运行良好，但另一台一直出现异常。

我的代码：

```
bufferSize = AudioRecord.getMinBufferSize(8000,AudioFormat.CHANNEL_IN_STEREO, AudioFormat.ENCODING_PCM_16BIT);
AudioRecord recorder = new AudioRecord(AudioSource.DEFAULT, rate,channelConfig, audioFormat, bufferSize); 
```

为什么这是错误的，正确的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:13:12.020

```
 private int[] mSampleRates = new int[] { 8000, 11025, 22050, 44100 };
    int bufferSize;

    AudioRecord audioInput = findAudioRecord();

    public AudioRecord findAudioRecord() {
        for (int rate : mSampleRates) {
            for (short audioFormat : new short[] {
                    AudioFormat.ENCODING_PCM_8BIT,
                    AudioFormat.ENCODING_PCM_16BIT }) {
                for (short channelConfig : new short[] {
                        AudioFormat.CHANNEL_IN_MONO,
                        AudioFormat.CHANNEL_IN_STEREO }) {
                    try {
                        Log.d("Mic2", "Attempting rate " + rate
                                + "Hz, bits: " + audioFormat
                                + ", channel: " + channelConfig);
                        bufferSize = AudioRecord.getMinBufferSize(rate,
                                channelConfig, audioFormat);

                        if (RECORDINGDURATION * sampleRate != AudioRecord.ERROR_BAD_VALUE) {
                            // check if we can instantiate and have a
                            // success
                            AudioRecord recorder = new AudioRecord(
                                    AudioSource.DEFAULT, rate,
                                    channelConfig, audioFormat, bufferSize);
                            if (recorder.getState() == AudioRecord.STATE_INITIALIZED)
                                sampleRate = rate;
                            return recorder;
                        }
                    } catch (Exception e) {
                        Log.e(TAG, rate + "Exception, keep trying.", e);
                    }
                }
            }
        }
        return null;
    } 
```

该设备很可能不支持 16 位编码 -> AudioFormat.ENCODING_PCM_16BIT :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:13:28.757

模拟器不支持 CHANNEL_CONFIGURATION_STEREO & sampleRate = (11025, 16000, 22050, and 44100)，如果你想成功运行，那么使用 CHANNEL_CONFIGURATION_MONO & SampleRate =8000（它只支持每秒 8000 个样本）。

以下是有关操作的详细说明：http: [//developer.android.com/guide/topics/media/audio-capture.html](http://developer.android.com/guide/topics/media/audio-capture.html)

# command-line - 如何在 tcsh 的命令行中逐字移动光标

> ID：13089573
> 
> 赞同：1
> 
> 时间：2012-10-26T15:11:29.883
> 
> 标签：command-line, cursor, move, tcsh

我被这个困扰了很长时间。如何在 tcsh 的命令行中移动光标，就像在 vim 编辑器、ipython shell、firefox、word 等中通过 ctrl + 箭头所做的那样。以上所有这些都可以很好地做到这一点，excetp tcsh，这真的很令人沮丧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:07:37.917

尝试`Esc``b`和`Esc``f`。

为了将来参考，像这些与编程无关的问题可能更适合 SuperUser。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T20:51:09.483

tcsh 具有模仿 VI 风格的编辑命令的键绑定。只需将其放入您的 ~/.cshrc 文件中：

```
> bindkey -v 
```

然后，您可以通过按 esc 开始对以前的命令进行 vi 样式的编辑。然后，使用“k”或“j”在命令历史记录中向后/向前滚动。使用单词移动键“b”或“w”向后/向前移动一个单词。使用“cw”更改单词等。完成后，点击 ret（从命令行中的任何位置）执行新的（编辑的）命令。例如：

```
> bindkey -v
> echo a b c d
a b c d 
```

此时，键入“esc k b”以调用上一个命令并向后移动1个单词。然后键入“cw z esc”将单词“c”更改为“z”。然后点击 ret 执行新命令并得到：

```
> echo a b z d
a b z d
> 
```

享受！

艾伦汤普森

# android - TextView 无法解析

> ID：13089575
> 
> 赞同：9
> 
> 时间：2012-10-26T15:11:37.557
> 
> 标签：android, textview

现在我知道这些是相当普遍的问题，但我使用的文本视图无法解决。我已经清理了项目，导入了 android.widget.TextView，但它继续标记为未解决。

这是我正在使用的代码：

```
public void onStart() {
        super.onStart();

        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet("http://1.php");
        HttpResponse response = client.execute(request);

        // Get the response
        BufferedReader rd = new BufferedReader
          (new InputStreamReader(response.getEntity().getContent()));

        String line = "";
        while ((line = rd.readLine()) != null) {
            TextView.append(line);
        } 

    } 
```

activity_main 中的 TextView：

```
<TextView
        android:id="@+id/TextView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10">

    </TextView> 
```

请问有什么想法吗？

编辑：

```
TextView textView = (TextView) findViewById(R.id.TextView1);

String line = ""; 
while ((line = rd.readLine()) != null) { 
    TextView1.append(line);
} 
```

以 TextView1 开头的结尾行提供了错误，指出无法解决。只是`TextView1`，不是整条线。

编辑 28/10/2012：

好的，所以 TextView 现在可以工作了，但反过来，代码的其他部分却没有。这是一个屏幕截图，显示了确切的内容。我可以将这些中的每一个包装在 try and catch 语句中，但随后应用程序强制在我的 Android 设备上关闭。

[http://southwestdesign.org.uk/Code.jpg](http://southwestdesign.org.uk/Code.jpg)

请问对此有什么想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-11T09:40:47.217

你导入了textview吗？

```
import android.widget.TextView; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-26T15:13:50.257

您需要获取特定的 TextView：

```
TextView textView = (TextView) findViewById(R.id.TextView);
String line = "";
while ((line = rd.readLine()) != null) {
    textView.append(line);
} 
```

（你真的应该给 TextView 一个唯一且更具描述性的 id，比如`android:id="@+id/webContentTV"`。这样，当你使用 10-20 个 TextView 时，你可以轻松地跟踪它们。）

* * *

 **在您的`id`XML 中**添加：****

 **```
<!-- Notice I gave this TextView a more descriptive id. -->
<TextView
    android:id="@+id/webContentTV"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" /> 
```

*必须与*您传递给的确切 ID匹配`findViewById()`：

```
TextView textView = (TextView) findViewById(R.id.webContentTV);
String line = "";
while ((line = rd.readLine()) != null) {
    textView.append(line);
} 
```

目前您的 id 不匹配：不`android:id="TextView"`匹配`findViewById(R.id.TextView1)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-06T05:16:27.547

我遇到了同样的问题。问题是我先创建了一个项目，然后我没有完成它。所以我创建了第二个项目。Texview 是 Texview2 而 editText 是 editText2。您可能需要将 textView 更新为 textView2。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-08T00:01:12.890

由于海报问题指出“TextView”无法解决。问题在于应该解决 TextView 或 TextView 的位置。在这种情况下，它是 android.widget.TextView 类。

AS ide 并不友好，但如果你将光标留在类的最左边（字面意思是类的左边缘，它会暗示你当然是什么意思...... android.widget.TextView.. . 您可以自己输入，也可以点击 (windows) alt+ enter，它会将值正确设置为整个类引用。

当高光不是红色时，您就知道它是正确的参考。

对我来说，我更喜欢写出来

```
android.widget.TextView myText = (TextView)findViewById(R.id.myTextViewId); 
```

并且知道我指的是什么，其他人也可以。

但是，如果您想确定参考是否与您的期望相匹配...

点击/键入 ctrl+ 点击短语，即 TextView，它将带您进入确切的 java 类......在这种情况下，通过 android sdk

android.widget.TextView.java

```
package android.widget; 
```

恕我直言，这是我不喜欢 IDE 的地方。更不用说合并冲突/咆哮了。

希望这对其他人有帮助。**

# javascript - 禁用 jqGrid 中的列

> ID：13089577
> 
> 赞同：0
> 
> 时间：2012-10-26T15:11:41.743
> 
> 标签：javascript, jquery, jqgrid

我有这个 jqGrid：

```
$("#list").jqGrid({
    url: '/modulos/carga/cargaServiciosTarifa.ashx',
    datatype: 'xml',
    mtype: 'GET',
    colNames: ['Tipo_Servicio', 'Cantidad','Unidad'],
    colModel: [
        {name: 'Tipo_Servicio', index: 'TSI_TS_Id', width: 100, align: 'center',
            edittype: 'select', editable: true, sortable: true,
            editrules: { edithidden: false, required: true }, editoptions: {
                size: 1,
                dataUrl: '/modulos/carga/cargaServiciosTarifa.ashx?oper=getServicios'
            }},
        { name: 'Cantidad', index: 'TSI_Cantidad', width: 100, align: 'center',
            editable: true, edittype: 'select', editoptions: {
                value: "1:1;2:2;3:3;4:4;5:5;6:6;7:7;8:8;9:9;10:10;11:11;12:12" },
            editrules: { edithidden: true }, sortable: true },
        { name: 'Unidad', index: 'TSI_Unidad', width: 100, align: 'center',
            editable: true, edittype: 'select',
            editoptions: { value: "Dia:Dia;Hora:Hora" }, sortable: true }
    ],
    autoencode: true,
    pager: '#pager',
    rowNum: 20,
    sortname: 'TSI_TS_Id',
    sortorder: 'asc',
    sortable: true,
    autowidth: false,
    width: 733,
    height: -1,
    shrinkToFit: true,
    viewrecords: true,
    gridview: true,
    caption: 'Listado Servicios asociados a Tarifa',
    postData: {tarId: tarId.val()},
    editurl: '/modulos/carga/cargaServiciosTarifa.ashx'
}); 
```

有三个选择选项，我想知道如果我选择名为“Unidad”的第三个（最后一个）选择的选项“Dia”，我该如何禁用“Cantidad”（第二列）选择，但如果我选择“可以使用”霍拉的选择！当我创建或编辑（没有内联编辑）时，有没有可能的方法来做到这一点？

是否有任何属性（如禁用 html）可以添加到`colModel`定义中？

谢谢。

# c# - 使用 OleDb 数据检索读取 Excel ROW

> ID：13089581
> 
> 赞同：0
> 
> 时间：2012-10-26T15:12:07.993
> 
> 标签：c#, excel

有什么帮助我在这里做错了吗？如果我试图读取示例 TestCaseName 的唯一行，`case_1`那么我将获取不同行的数据。

我怎样才能确保它只阅读被要求阅读的内容？我正在使用 where 子句，但似乎没有过滤它。

```
string connectionString = String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=""Excel 8.0;HDR=YES;IMEX=1;""", EXCELFILENAME);

string testCaseName = "case_1
string query = String.Format("SELECT * from [{0}$] WHERE TestCaseName=\"{1}\"", workbookName, testCaseName);

OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, connectionString);

DataSet dataSet = new DataSet();
dataAdapter.Fill(dataSet);  
DataTable myTable = dataSet.Tables[0]; 

TestCaseName       Name    Active   Status  etc...
----------------------------------------------------------------
case_1             Tom     yes      Completed   etc...
----------------------------------------------------------------
case_2             John    yes                  etc...
----------------------------------------------------------------
case_3             Jim     yes                  etc...
----------------------------------------------------------------
case_4             Don     yes                  etc...
----------------------------------------------------------------
case_5             Sam     yes      Visitor     etc...
---------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:29:21.423

这是我测试的代码。它似乎完美地工作。如果您不这样做，那么我只能假设您的电子表格的结构与我的不完全相同。

```
string connectionString = "Provider=Microsoft.Ace.OLEDB.12.0;Data Source=" + filename + ";Extended Properties=\"Excel 8.0;HDR=YES;IMEX=1\"";
string testCaseName = "case_1";
string query = "SELECT * from [Sheet1$] WHERE TestCaseName=\"" + testCaseName + "\"";
DataTable dt = new DataTable();

using (OleDbConnection conn = new OleDbConnection(connectionString))
{
    conn.Open();

    using (OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, conn))
    {
        DataSet ds = new DataSet();
        dataAdapter.Fill(ds);
        dt = ds.Tables[0];
    }

    conn.Close();
} 
```

# macos - OS X - 如何计算标准化文件名

> ID：13089582
> 
> 赞同：5
> 
> 时间：2012-10-26T15:12:09.323
> 
> 标签：macos, unicode, utf-8, unicode-normalization, hfs+

我需要在 Windows 和 OS X 上生成的文件名之间创建映射。我知道 OS X [“将所有文件名转换为分解的 Unicode”](http://developer.apple.com/library/mac/#qa/qa1235/_index.html)，但是[“大多数卷格式不遵循这些正常形式的确切规范”](http://developer.apple.com/library/mac/#qa/qa1173/_index.html)

因此，使用标准 UTF8 API 将 Windows 名称转换为 NFD 并确保我拥有正确的 OS X 名称似乎不是一件简单的事情。有没有办法确定实际的 OS X 文件名，而无需在文件系统中实际创建文件，然后扫描目录以查看实际创建的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:22:57.320

我认为[答案](http://dubeiko.com/development/FileSystems/HFSPLUS/tn1150.html#UnicodeSubtleties)来自 TechNote 1150 HFS Plus Volume Format：

> 注意：Mac OS 文本编码转换器提供了几个常量，可让您与存储在 HFS Plus 卷上的规范、分解形式相互转换。使用 CreateTextEncoding 创建文本编码时，应将 TextEncodingBase 设置为 kTextEncodingUnicodeV2_0，将 TextEncodingVariant 设置为 kUnicodeCanonicalDecompVariant，并将 TextEncodingFormat 设置为 kUnicode16BitFormat。使用这些值可确保 Unicode 与 HFS Plus 卷上的格式相同，即使随着 Unicode 标准的发展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T19:34:43.023

您可能正在寻找`-[NSString fileSystemRepresentation]`方法。

请注意，此任务没有通用解决方案。什么是有效文件名取决于您要保存的卷的文件系统。例如，并非对 HFS+ 有效的每个文件名都对 FAT32 有效。

对于 Mac 的“标准”文件系统（目前是 HFS+），`fileSystemRepresentation`应该可以满足您的需求；对于其他文件系统，没有通用的方法。想想那些不存在但将来会引入的，例如:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:41:24.493

根据您的链接，文件系统驱动程序似乎（主要）遵循以下两种行为之一：*返回 NFD 中的所有名称，并根据需要转换名称。* 不要执行任何转换。

在这两种情况下，如果您在 NFD 中的 OSX 上创建文件，则在 OSX 上读取它应该会在 NFD 中为您提供名称。

OTOH，如果您的文件名来自 Windows → NFS → Mac 并且您想要进行某种同步，那么您就不走运了。这不是一件容易的事，因为潜在的问题有点哲学性：文件名应该是字节字符串还是 Unicode 字符串？我相信 Unix 传统上是前者，至少在 Linux 中，UTF-8 NFC 名称只是一种*约定*。

（情况变得更糟，因为 IIRC HFS+ 被定义为使用 Unicode 3.something，因此对于从那时起添加/更改的字符，天真转换为 NFD 可能是错误的，除非您使用的 API 可以保证特定的 Unicode 版本。）

# java - GWT 未能在其他项目中找到用户定义的类

> ID：13089586
> 
> 赞同：1
> 
> 时间：2012-10-26T15:12:22.547
> 
> 标签：java, eclipse, gwt

所以我在 Eclipse 中有一个常规的 Java 项目 IRBenchmarker，我在其中定义了几个类，其中一个是枚举 edu.mit.ll.irbenchmark.EvaluationMetric。现在我正在编写一个 Google Web Toolkit Eclipse 项目 IRBenchmarker-WebGUI，我希望客户端将一个 EvaluationMetric 值作为参数传递给服务器上的服务。

我已按照[Eclipse 3.4 GWT 1.6 项目中的说明进行操作 - 如何引用其他项目的源代码？](https://stackoverflow.com/questions/951926/eclipse-3-4-gwt-1-6-project-how-to-reference-source-from-other-projects)但一定是做错了什么。这就是我的设置方式。

```
workspace
-- IRBenchmarker-WebGUI
   -- src
      -- edu.mit.ll.irbenchmark
         -- IRBenchmarker_WebGUI.gwt.xml
-- IRBenchmarker
   -- src
      -- edu.mit.ll.irbenchmark
         -- IRBenchmarker.gwt.xml
      -- edu.mit.ll.irbenchmark.client
         -- EvaluationMetric.java 
```

文件 IRBenchmarker.gwt.xml 包含：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 1.7.0//EN" "http://google-web-toolkit.googlecode.com/svn/tags/1.7.0/distro-source/core/src/gwt-module.dtd">
<!--  Expose classes useful to the web client as a Google Web Toolkit module -->
<module rename-to='IRBenchmarker'>
    <inherits name='com.google.gwt.user.User' />
    <source path="client" />
</module> 
```

文件 IRBenchmarker_WebGUI.gwt.xml 包含：

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='irbenchmarker_webgui'>
  <!-- Inherit the core Web Toolkit stuff.                        -->
  <inherits name='com.google.gwt.user.User'/>

  <!-- Inherit the default GWT style sheet.  You can change       -->
  <!-- the theme of your GWT application by uncommenting          -->
  <!-- any one of the following lines.                            -->
  <inherits name='com.google.gwt.user.theme.clean.Clean'/>
  <!-- <inherits name='com.google.gwt.user.theme.standard.Standard'/> -->
  <!-- <inherits name='com.google.gwt.user.theme.chrome.Chrome'/> -->
  <!-- <inherits name='com.google.gwt.user.theme.dark.Dark'/>     -->

  <!-- Other module inherits                                      -->
  <inherits name="edu.mit.ll.irbenchmark.IRBenchmarker" />

  <!-- Specify the app entry point class.                         -->
  <entry-point class='edu.mit.ll.irbenchmark.client.IRBenchmarker_WebGUI'/>

  <!-- Specify the paths for translatable code                    -->
  <source path='client'/>
  <source path='shared'/>

</module> 
```

IRBenchmarker-WebGUI 的 Eclipse Java 构建路径包含项目 IRBenchmarker。

当我尝试运行项目并在浏览器中打开页面时，我得到

```
[ERROR] [irbenchmarker_webgui] - Line 124: No source code is available for type edu.mit.ll.irbenchmark.client.EvaluationMetric; did you forget to inherit a required module? 
```

请注意，在此错误上方，在“验证新编译的单元”下有

```
10:57:15.767 [INFO] [irbenchmarker_webgui] Ignored 3 units with compilation errors in first pass.
Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors. 
```

我错过了什么？

更新：所以我继续使用来自 IRBenchmarker 的源代码制作一个 JAR 文件，并将其包含在 IRBenchmarker-WebGUI 中。似乎可以工作，尽管每次我在 IRBenchmarker 中更改代码时都必须重建 jar 是不方便的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:34:05.560

您可能必须在DevMode 启动配置的*Classpath选项卡中显式添加**其他*项目的`src`文件夹。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:05:39.370

试着把

```
<inherits name="edu.mit.ll.irbenchmark.IRBenchmarker" /> 
```

在您的 IRBenchmarker.gwt.xml 中

我在 GWT 中有一个单独的项目来保存我的模型，并且我在两个 GWT.xml 文件中都有该行。

此外，请确保您的根客户端和服务器包与您的项目的文件夹结构匹配，与您的 GWT 项目中的结构完全相同。**

# java - 用户输入的问题

> ID：13089587
> 
> 赞同：-4
> 
> 时间：2012-10-26T15:12:22.783
> 
> 标签：java, user-input

我有以下形式的用户输入：

```
1234 abc def gfh
..
8789327 kjwd jwdn
stop 
```

现在，如果我使用扫描仪并反过来使用

```
Scanner sc=new Scanner(System.in);
String t=sc.nextLine();
while(!t.equals("stop"))
{
    int i=sc.nextInt();
    int str=sc.nextLine();
    t=sc.nextLine();
} 
```

有什么方法可以让我得到 i=1234 str="abc def gfh" ... 等等...并在用户输入停止时停止

我想分别接受数值和字符串......不使用正则表达式。我也想停止使用关键字“stop”进行输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:15:15.573

您永远不会更改 的值，`t`因此 while 条件将始终为真，除非文件的第一行是`stop`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:20:43.113

首先，你对接受的输入什么都不做，只是忽略它来接受下一个输入。

其次，`scanner.nextLine()`返回下一行读取的字符串。要单独获取令牌，您需要拆分`string`读取以获取它们。

第三，你应该检查你的 while，无论你是否有下一个输入[`scanner#hasNextLine`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNextLine%28%29)，如果它等于`true`，那么只有你应该在你的 while 循环中读取你的输入。

如果要分别读取每个令牌，最好使用[`Scanner#next`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)方法，该方法返回下一个读取的令牌。

此外，您想阅读`integers`and `strings`，因此您还需要测试是否有整数。您需要为此使用[`Scanner#hasNextInt`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNextInt%28%29)方法。

好的，因为您想在每一行上单独`integer`阅读。`string`

**您可以尝试以下方法：-**

```
while (scanner.hasNextLine()) {  // Check whether you have nextLine to read

    String str = scanner.nextLine(); // Read the nextLine

    if (str.equals("stop")) {  // If line is "stop" break
        break;
    }

    String[] tokens = str.split(" ", 1);  // Split your string with limit 1
                                          // This will give you 2 length array

    int firstValue = Integer.parseInt(tokens[0]);  // Get 1st integer value
    String secondString = tokens[1];  // Get next string after integer value
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:41:54.653

你的代码：

```
Scanner sc=new Scanner(System.in);
String t=sc.nextLine();
while(!t.equals("stop"))
{
    int i=sc.nextInt();
    int str=sc.nextLine();
    t=sc.nextLine();
} 
```

首先`int str=sc.nextLine();`是错误的，因为`nextLine()`返回字符串。据我所知，你可以做的是：

```
 Scanner sc=new Scanner(System.in);
    String t=sc.nextLine();
    int i;
    String str="";
    while(!t.equals("stop"))
    {
        int index=t.indexOf(" ");
        if(index==-1)
           System.out.println("error");
        else{
               i=Integer.parseInt(t.substring(0,index));
               str=t.substring(index+1);
        }
        t=sc.nextLine();
    } 
```

我希望它有所帮助。

# python - 带有空格填充的python struct pack

> ID：13089590
> 
> 赞同：5
> 
> 时间：2012-10-26T15:12:37.123
> 
> 标签：python, struct, pack

我需要使用给定的协议在 python 中创建/发送二进制数据。该协议要求固定宽度的字段，并添加空格填充。使用 python 的 struct.pack，我唯一能想到的是，计算空格填充并将其添加到我自己。有没有更好的方法来实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T15:16:04.777

struct has a [placeholder](http://docs.python.org/library/struct.html#format-strings) (`x`) for a padding byte you can use:

```
 # pack 2 16 bit values plus one pad byte
 from struct import pack
 packedStrWithOneBytePad = pack("hhx", 1000, 2000) 
```

# c# - 在 C# 中更改包含特定字符串的文件中的一行

> ID：13089592
> 
> 赞同：1
> 
> 时间：2012-10-26T15:12:42.320
> 
> 标签：c#

我遇到了一个问题：我想找到包含某个字符串的行，但我只知道如何替换文件中的字符串或所有行，我知道命令“string.Contains”，但它似乎无法正常工作当我使用它时：我尝试使用“if（data.contains（string））”，但它仍然将所有行更改为该字符串。这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    string replaceText = "peter";
    string withText = "Gilbert";
    using (System.IO.StreamReader streamReader = new System.IO.StreamReader(@"C:\Users\G\Documents\test.txt"))
    {
        using (System.IO.StreamWriter streamWriter = new System.IO.StreamWriter(@"C:\Users\G\Documents\test.txt" + ".tmp"))
        {

            while (!streamReader.EndOfStream)
            {
                string data = streamReader.ReadLine();
                data = data.Replace(replaceText, withText);
                streamWriter.WriteLine(data);
            }
        }

    }
    using (System.IO.StreamReader streamReader = new System.IO.StreamReader(@"C:\Users\G\Documents\test.txt" + ".tmp"))
    {
        using (System.IO.StreamWriter streamWriter = new System.IO.StreamWriter(@"C:\Users\G\Documents\test.txt"))
        {

            while (!streamReader.EndOfStream)
            {
                string data = streamReader.ReadLine();
                data = data.Replace(replaceText, withText);
                streamWriter.WriteLine(data);
            }

        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:40:25.810

尝试这个：

```
FileStream stream = File.Open("file", FileMode.Open);
StreamReader rdr = new StreamReader(rdr);
String[] flines = rdr.ReadToEnd().Split(new String[]{"\r\n"}, StringSplitOptions.None);
rdr.Close();
stream = File.Create("file");
StreamWriter wtr = new StreamWriter(stream);
foreach(String str in flines)
{
    wtr.WriteLine(str.Replace(replaceTxt, newText));
}
wtr.Close(); 
```

当然，您可以将逻辑放入循环中，根据您喜欢的任何标准更改或不更改写入的字符串。

# objective-c - xCode, ios 显示拆分键盘

> ID：13089604
> 
> 赞同：0
> 
> 时间：2012-10-26T15:13:23.000
> 
> 标签：objective-c, ios, xcode

我正在寻找一个显示“拆分键盘”而不是常规键盘的节目。我知道用户可以拖动常规并显示“拆分”，但是可以直接显示拆分吗？

谢谢（如果很简单，很抱歉！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:07:04.750

不，您不能预先设置键盘的位置。它以它认为最好的方式开始，用户可以根据需要进行调整。

# android - 在android上使用矢量图形

> ID：13089606
> 
> 赞同：3
> 
> 时间：2012-10-26T15:13:24.687
> 
> 标签：android, 2d, vector-graphics

我目前正在尝试为 Android 制作一个简单的 2D CAD 类型的查看器应用程序。基本上，输入文件包含一堆图元（矩形、线、圆、八边形，那种类型的东西），目标是以它们提供的任何坐标/大小将它们绘制到屏幕上。

我最初的直觉是使用 Canvas 将这些绘制到，使用四叉树或一些类似的结构来跟踪哪些项目将在任何给定时间显示在屏幕上。

有没有人有任何建议可以更好地实现这一点（我的图形编程经验很少，因此我什至找不到谷歌的起点）？

提前致谢，

-罗斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:24:39.367

这是一个非常广泛的问题，所以我的回答只会指向你应该看的课程。

将surfaceView 扩展为您的cadView，这样您就可以在主线程之外进行所有计算。

你仍然需要在画布上画画。从画布中，您可以`getWidth()`使用`getHeight()`这些值对您的位置进行基础比较。画布有一些基本的绘图类型，如弧、圆、点。此外，您可以使用 Path 为背景绘制完整的图形、线条、填充、二次等，您可以创建颜色可绘制对象并将其绘制在画布上。

差不多就是这样。

# django - Ajax、CSRF 和 DELETE

> ID：13089613
> 
> 赞同：16
> 
> 时间：2012-10-26T15:13:43.283
> 
> 标签：django, django-csrf

我使用[文档](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)`getCookie`中的函数来获取值。[`django`](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)`csrfmiddlewaretoken`

我有以下ajax调用：

```
var url = reverse_removeprofile.replace(/deadbeef/, key);
$.ajax({
    type:          "DELETE",
    url:           url,
    data:          "csrfmiddlewaretoken=" + getCookie("csrftoken"),
    success:       function() { ... },
}); 
```

执行此代码时，会`django`引发 403 异常，告诉我 CSRF 验证失败。但是，如果我将`type`from更改`DELETE`为`POST`then`django`就会对此感到高兴并且根本不会抱怨。

我真的无法在谷歌中找到有用的东西，但我发现了这张（现已关闭并修复）票：[https ://code.djangoproject.com/ticket/15258](https://code.djangoproject.com/ticket/15258)

如果我理解正确，则此问题已在 1.4 里程碑中得到修复。我使用 django 1.4，但仍然无法通过`DELETE`请求验证 CSRF 令牌。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-26T15:38:03.860

这似乎是一个 jQuery 错误，原因是关于 DELETE 数据是否应该附加到 URL（如 GET 请求）或请求正文（如 POST）的一些混淆

请参阅[此错误报告](http://bugs.jquery.com/ticket/11586)。

您可能可以通过使用 AJAX 调用的替代 CSRF 方法来解决此问题，`X-CSRFToken`在请求上设置标头。尝试将您的 AJAX 调用更改为如下所示：

```
$.ajax({
    type: "DELETE",
    url: url,
    beforeSend: function(xhr) {
        xhr.setRequestHeader("X-CSRFToken", getCookie("csrftoken"));
    },
    success: function() { ... },
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-29T17:29:05.163

**请注意，当涉及到`DELETE`请求时，DJango 不会`csrfmiddlewaretoken`在请求正文中进行检查。而是寻找`X-CSRFToken`标题**

开始 DJango CSRFMiddleware 的工作，您可以看到源代码，`django > middleware > csrf.py > CsrfViewMiddleware`其中很明显，`csrfmiddlewaretoken`如果请求类型为 DJango 不会在请求正文中扫描`DELETE`：

```
 # Check non-cookie token for match.
        request_csrf_token = ""
        if request.method == "POST":
            try:
                request_csrf_token = request.POST.get('csrfmiddlewaretoken', '')
            except OSError:
                # Handle a broken connection before we've completed reading
                # the POST data. process_view shouldn't raise any
                # exceptions, so we'll ignore and serve the user a 403
                # (assuming they're still listening, which they probably
                # aren't because of the error).
                pass

        if request_csrf_token == "":
            # Fall back to X-CSRFToken, to make things easier for AJAX,
            # and possible for PUT/DELETE.
            request_csrf_token = request.META.get(settings.CSRF_HEADER_NAME, '') 
```

# vb.net - 调用的目标已引发异常 - 对于属性 BackColor

> ID：13089615
> 
> 赞同：0
> 
> 时间：2012-10-26T15:13:45.217
> 
> 标签：vb.net, reflection

当我尝试为 textBox 的属性 BackColor 设置值时出现该错误
我拥有的是一个 formBuilder。
因此，通过我的 formBuilder 运行，我可以创建一个添加 TabControl 的表单，并在 tabControl 中创建一个 groupBox。在 GroubBox 内，我有一些文本框。
对于每个 TextBox，我将它们的属性（带有值）保存在 xml 中。
当我尝试从 xml（在另一个项目中）重新创建表单时，我使用该代码：

```
 For Each cntProperty As XElement In elem.Elements
     Dim propertyName As String = cntProperty.Name.ToString
     Dim targetProperty As PropertyInfo = parentControl.GetType().GetProperty(propertyName)
     If targetProperty IsNot Nothing Then
       Dim propType As Type = FindType(targetProperty.PropertyType.ToString)
       Dim convertedVal = ConvertValue(cntProperty.Value, targetProperty.PropertyType)
       parentControl.GetType().GetProperty(propertyName).SetValue(parentControl, convertedVal, Nothing)'Here I get the exception
     End If
    Next 
```

parentControl 是我要重新创建的控件（在这种情况下为 textBox） FindType 是一个返回属性类型的函数（工作正常） ConvertValue 是将字符串从 xml 转换为适当类型的函数 对于我使用的颜色这个功能：

```
 Color.FromName(val)'val is the string value from the xml 
```

因此，对于某些文本框，我将其作为字符串值： Color [White]
并且在转换后我有一个颜色：“{Name=Color [White], ARGB=(0, 0, 0, 0)}"
当我尝试将此颜色值设置为属性 BackColor 我得到异常：
*调用的目标已引发异常。*
和innerException： *控件不支持透明背景色*

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T02:05:54.807

aRGB(255, 255, 255, 255) 是白色的，第一个是 alpha 通道 - 0 是透明的。内部异常对于 winforms 控件是正确的。WPF 没有这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:50:10.810

我找到了解决方案。我的代码中的问题实际上是函数：

```
 Color.FromName(val as String) 
```

没有按预期工作。我应该只有名称（例如白色），但我有“颜色 [白色]”

所以我只是在使用该函数结束之前清理我的字符串，一切都很好。

# angularjs - AngularJS：需要将选定的集合附加到模型

> ID：13089618
> 
> 赞同：0
> 
> 时间：2012-10-26T15:13:49.427
> 
> 标签：angularjs

我正在构建一个 CRUD，我想要一些模型与其他模型相关联。所以在一些更新/创建模板上，我需要添加一些其他模型并在提交表单时保存它们的 id。所以我做了一个由我的后端提供的基本表格。这是我尝试显示链接模型的部分：

```
<div ng-repeat="item in otherItems">
    <select ng-model="item" name="item" >
        <option value="1" ng-selected="item">
        <option value="2" ng-selected="item">
        <option value="3" ng-selected="item">
    </select>
    <a class="remove" ng-click="removeRelated(item)">remove</a>
</div>
<a ng-click="addRelated()"><i class="icon-plus"></i></a> 
```

注意：otherItems 可以在开始时为空（在进行创建或项目未链接到任何其他相关模型的项目时）。因此，当一按添加/删除时，它将触发控制器的功能：

```
$scope.addRelated = function (){
    if (typeof $scope[otherItems]=="undefined")
        $scope[otherItems] = new Array();

    $scope[otherItems].push($scope[otherItems].length);
};

$scope.removeRelated = function (item){
    console.debug(item);
    var idx = $scope[otherItems].indexOf(item);
    if (idx !== -1) {
        $scope[otherItems].splice(idx, 1);
    }
}; 
```

我的问题是当我保存时，我得到了项目中项目的位置（所以它总是 0、1、2 ......）我不会有一个选定 ID 的数组。我想我的 addRelated 可能有问题。我究竟做错了什么？

这是一个截图来理解这个想法，因为我可能不是很清楚： ![在此处输入图像描述](../Images/a507c1a5bcf836b1c7dcd589460ab7dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:06:21.700

所以像这样的东西？ [http://plnkr.co/edit/6eqWL5](http://plnkr.co/edit/6eqWL5)

标记..

```
<body ng-controller="MainCtrl">
  <div ng-repeat="otherItem in otherItems">
    <select ng-model="otherItem.selectedItem" ng-options="item for item in otherItem.items"></select>
    <a ng-click="removeOtherItem($index)">remove</a>
  </div>
  <a ng-click="addOtherItem()">add</a>
  <hr/>
  Selected:
  <ul>
    <li ng-repeat="otherItem in otherItems">
      otherItem[{{$index}}].selectedItem = {{otherItem.selectedItem}}
    </li>
  </ul>
</body> 
```

编码

```
app.controller('MainCtrl', function($scope) {
  $scope.otherItems = [
      { 
        selectedItem: null,
        items: [1, 2, 3]
      },
      {
        selectedItem: null,
        items: [4, 5, 6] 
      }
    ];
  $scope.addOtherItem = function(){
    $scope.otherItems.push({ items: [7, 8, 9]});
  };
  $scope.removeOtherItem = function(index) {
    $scope.otherItems.splice(index, 1);
  };
}); 
```

抱歉，如果它与您的要求不符...问题有点含糊，所以我猜测其中的一些功能。

# android - Android - 仅在智能手机中强制定向

> ID：13089622
> 
> 赞同：1
> 
> 时间：2012-10-26T15:13:58.443
> 
> 标签：android, orientation, screen-orientation, orientation-changes, android-configchanges

我的应用程序有 3 个屏幕，所有这些屏幕在智能手机中都必须是纵向的，在平板电脑中必须是两个方向。

现在我在 Unitl 中使用以下代码`OnCreate`：

```
if (!getResources().getBoolean(R.bool.isTablet)) {
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
} 
```

但是，如果我将智能手机置于横向模式并启动应用程序，它将以横向显示几秒钟，然后旋转为纵向。

这里的许多答案建议通过清单锁定方向，但这会锁定平板电脑中的方向，这是不希望的。

我将非常感谢任何能引导我找到解决方案的信息。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:17:00.050

You could lock it in the Manifest and then unlock it in code if it's a tablet.

It may not matter for your case, but I've read that the Nexus 7 doesn't report itself as a tablet using the method you do. I'm not sure that's accurate though, never having tried it myself.

# java - JAXB2 注释：在列表中呈现值时出现问题

> ID：13089624
> 
> 赞同：0
> 
> 时间：2012-10-26T15:14:03.593
> 
> 标签：java, marshalling, jaxb2, unmarshalling

我在尝试使用 JAXB2 注释呈现以下 xml 代码时遇到一些问题：

```
....
<bizTransactionList>
    <bizTransaction type="urn:epcglobal:fmcg:btt:po">
        http://transaction.acme.com/po/54847
    </bizTransaction>
    <!--other entries -->
</bizTransactionList>
... 
```

按照[文档](http://jaxb.java.net/tutorial/section_6_2_7_4-Mapping-a-Class-to-Simple-Content-or-Simple-Type-XmlValue.html#Mapping%20a%20Class%20to%20Simple%20Content%20or%20Simple%20Type%3a%20XmlValue)，我设法解决了以下问题：1）在拥有列表的类中，我以这种方式注释列表吸气剂

```
@XmlElementWrapper(name="bizTransactionList")
@XmlElement(name="bizTransaction")
public List<BizTransaction> getBizTransactionList() {
    return bizTransactionList;
} 
```

2）我创建 BizTransaction 类如下

```
public class BizTransaction {

    private URI transactionId;
    private URI type;

    @XmlValue
    public URI getTransactionId() {
        return transactionId;
    }

    public void setTransactionId(URI transactionId) {
        this.transactionId = transactionId;
    }

    @XmlAttribute
    public URI getType() {
        return type;
    }

    public void setType(URI type) {
        this.type = type;
    }

    public BizTransaction() {
        // TODO Auto-generated constructor stub
    }

    public BizTransaction(URI transactionId, URI type) {
        super();
        this.transactionId = transactionId;
        this.type = type;
    }

} 
```

现在的问题是该属性工作正常，但值（即 transactionId 变量）始终为空。你能帮我找出问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:16:18.117

这是一个合理的模型，但您的示例 XML 无效，因为元素值周围的前导和尾随空格`bizTransaction`意味着它不是有效的 URI。如果你说

```
 <bizTransaction type="urn:foo">http://transaction.acme.com/po/54847</bizTransaction> 
```

那么它将按您的预期工作。

# php - 在产品标题 PHP & MySQL 下显示产品

> ID：13089625
> 
> 赞同：1
> 
> 时间：2012-10-26T15:14:03.927
> 
> 标签：php, mysql

我有两张桌子；sublevel 和 subcat1。sublevel 包含产品标题或集体组名称，另一个 subcat1 包含所有实际产品..

这是子级表；

`**CategoryID SublevelID Name**
67 1 Anaesthsia Thermometers
67 2 Forehead Thermometers
67 3 Drug Testing Thermometers
67 4 Drug Testing Thermometers`

这是另一个表，subcat1；

`**CategoryID SublevelID SubCatName**
67 2 12 Level Thermometer
67 1 Clinitrend
67 2 Forehead Thermometer
67 3 Briteline
67 3 BriteEvent`

我想要的想法是输出，当我的意思是输出时，我的意思是在 php 代码中是这样的；

**麻醉温度计**- Clinitrend

**额头温度计**- 6 事件一次性，6 事件可重复使用，12 事件

**药物测试温度计**- Briteline, BriteEvent

我一直遇到的问题是我一直对每个产品重复相同的标题，但我只想要一次。我尝试过 GROUP BY、DISTINCT 和 LEFT JOIN，但检索到的每个产品都显示它的类别标题 - 我知道我可能以错误的方式查看查询......每次我想到一些我可以改变的新东西我失败的查询..

[我什至画出了表格结构和理想的输出](https://twitter.com/D_Azzopardi/status/258340698900819968/photo/1/large)，以不同的方式看待它，但我的大脑不是这样工作的……

```
function catLevelsName(){

// This would be used to select which category $cat_id = $_GET['cat_id'];

global $dbc;

$query = "SELECT subcat1.SubCatName FROM subcat1 RIGHT JOIN sublevel ON sublevel.CategoryID = subcat1.CategoryID";  
$result = mysqli_query($dbc, $query) or die(mysqli_error(). "<p>with query;<br />$query");

while($row = mysqli_fetch_array($result)){

echo $row['Name'];
echo $row['SubCatName'];
} 
```

任何指向我做错了什么的指针？

附言。一百万为我的格式道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:54:27.600

*简短编辑*，回答您的问题：作为 sql 查询结果，**您不能只拥有**一次子级标签，因为它将在每个 sql-join 结果行中。我建议您更深入地了解连接理论以及 sql 本身如何提供输出行。

好吧，我对您的情况有两个很大的疑问：

1.  我会为表使用更详细的名称
2.  我对你的数据库结构有严重的怀疑。subcat 不是以一对多的关系嵌套在 sublevel 内吗？在这种情况下，您不应该在 subcat 表中有类别 ID，并且 SublevelID 应该是 Sublevel 表中的 PK。

无论如何，我假设你绑定到这个结构，所以我克隆了它（不使用键/外键，因为你的设计对我来说不是很清楚）

```
--
-- Table structure for table `SubCat`
--

CREATE TABLE IF NOT EXISTS `SubCat` (
  `CategoryID` int(11) NOT NULL,
  `SublevelID` int(11) NOT NULL,
  `SubCatName` varchar(127) NOT NULL,
  `Url` varchar(127) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `SubCat`
--

INSERT INTO `SubCat` (`CategoryID`, `SublevelID`, `SubCatName`, `Url`) VALUES
(67, 2, '12 Level Thermometer', 'http://www.example.com/subcat-1'),
(67, 1, 'Clinitrend', 'http://www.example.com/subcat-2'),
(67, 2, 'Forehead Thermometer', 'http://www.example.com/subcat-3'),
(67, 3, 'Briteline', 'http://www.example.com/subcat-4'),
(67, 3, 'BriteEvent', 'http://www.example.com/subcat-5');

-- --------------------------------------------------------

--
-- Table structure for table `SubLevel`
--

CREATE TABLE IF NOT EXISTS `SubLevel` (
  `CategoryID` int(11) NOT NULL,
  `SublevelID` int(11) NOT NULL,
  `Name` varchar(127) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `SubLevel`
--

INSERT INTO `SubLevel` (`CategoryID`, `SublevelID`, `Name`) VALUES
(67, 1, 'Anaesthsia Thermometers'),
(67, 2, 'Forehead Thermometers'),
(67, 3, 'Drug Testing Thermometers'),
(67, 4, 'Drug Testing Thermometers'); 
```

输出显示的PHP代码

```
<?php
// Weird database init
$connection = mysql_connect('localhost', 'root', 'my awesome root password');
mysql_select_db('stack', $connection);
$result = mysql_query("select * from SubLevel s inner join SubCat c on s.SublevelID=c.SublevelID", $connection);
// Output array
$subLevels = array();
// Build our output array
while ($row = mysql_fetch_assoc($result)) {
  $subLevelId = $row['SublevelID'];
  $subLevels[$subLevelId]['subLevelToDisplay'] = $row['Name'];
  $subLevels[$subLevelId]['subCats'][] = "<a href='{$row['SubCatName']}'>{$row['Url']}</a>";
}
// Format output
foreach ($subLevels as $id => $row) {
  print "{$row['subLevelToDisplay']} - " . implode(',', $row['subCats']) . "<br />";
} 
```

这是我的输出：

```
Forehead Thermometers - 12 Level Thermometer,Forehead Thermometer
Anaesthsia Thermometers - Clinitrend
Drug Testing Thermometers - Briteline,BriteEvent 
```

希望这实际上对您有所帮助，无论如何我会以更清晰和结构化的方式重新考虑数据库层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:56:24.557

你可以尝试一个肮脏的解决方案...... :)

使用 Emo Mosley 的回复......您可以使用数组。

例子：

```
$array_results = array();
$query = "select sl.Name, sc.SubCatName from sublevel sl 
  join subcat1 sc 
    on sc.CategoryID=sl.CategoryID
    and sc.SublevelID=sl.SublevelID
  order by sl.Name;"
$result = mysqli_query($dbc, $query) or die(mysqli_error(). "<p>with query;<br />$query");

while($row = mysqli_fetch_array($result)){
    $array_results[$row['Name']][] = $row['SubCatName'];
} 
```

然后：

```
foreach ($array_results as $key => $value) {
    if(is_array($value)){
        echo $key.": ".implode(", ", $value);
    }
} 
```

我没有测试过，但我认为它应该可以工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:45:42.213

我不确定这是否是您想要的，但这是我推荐的查询：

```
select sl.Name, sc.SubCatName from sublevel sl 
  join subcat1 sc 
    on sc.CategoryID=sl.CategoryID
    and sc.SublevelID=sl.SublevelID
  order by sl.Name; 
```

这为我提供了示例数据的输出，如下所示：

```
'Anaesthsia Thermometers', 'Clinitrend'
'Drug Testing Thermometers', 'BriteEvent'
'Drug Testing Thermometers', 'Briteline'
'Forehead Thermometers', 'Forehead Thermometer'
'Forehead Thermometers', '12 Level Thermometer' 
```

一旦您设计了您喜欢的查询，只需使用您的 PHP 代码读取数据并以您想要的格式打印它。

# android - “IllegalStateException：滚动视图只能承载一个直接子级”在一个 LinearLayout 中添加

> ID：13089628
> 
> 赞同：4
> 
> 时间：2012-10-26T15:14:17.860
> 
> 标签：android, textview, android-linearlayout, horizontalscrollview, illegalstateexception

我有附件列表，并想让我的 LinearLayout 可以水平滚动。我只向我的 Horizo​​ntalScrollView 添加了一个子 LinearLayout，除了我得到 IllegalStateException。我的xml：

```
 <HorizontalScrollView
android:id="@+id/scrollMessageFiles"
android:layout_width="fill_parent"
android:layout_height="65dp"
android:layout_below="@+id/editMessage"
android:orientation="horizontal"
android:weightSum="1.0" >
        <LinearLayout
    android:id="@+id/panelMessageFiles"
    android:orientation="horizontal"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:background="#FFFFFF"
    >

        </LinearLayout>

        </HorizontalScrollView> 
```

并希望将文件列表添加到 ScrollView 中的 LinearLayout，如下所示：

```
public void addFiles()
 {

    HorizontalScrollView scroll = (HorizontalScrollView) findViewById(R.id.scrollMessageFiles);
    LinearLayout layout = (LinearLayout) findViewById(R.id.panelMessageFiles);
    if(!FileManagerActivity.getFinalAttachFiles().isEmpty())
    {
             for (File file: FileManagerActivity.getFinalAttachFiles())
              {

                    View line = new View(this);

                    line.setLayoutParams(new LayoutParams(1, LayoutParams.MATCH_PARENT));
                    line.setBackgroundColor(0xAA345556);
                    informationView = new TextView(this);
                    informationView.setTextColor(Color.BLACK);
                    informationView.setTextSize(12);
                    informationView.setCompoundDrawablesWithIntrinsicBounds(
                            0, R.drawable.file_icon, 0, 0);
                    informationView.setText(file.getName().toString());
                    layout.addView(informationView, 0);
                    layout.addView(line, 1);

              }
             scroll.addView(layout);
      }

} 
```

我只向Horizo​​ntalScrollView添加了一个LinearLayout，除了get

```
 FATAL EXCEPTION: main
     java.lang.RuntimeException: Unable to start activity ComponentInfo{com.assignmentexpert/com.assignmentexpert.NewMessageActivity}: java.lang.IllegalStateException: HorizontalScrollView can host only one direct child
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.IllegalStateException: HorizontalScrollView can host only one direct child
    at android.widget.HorizontalScrollView.addView(HorizontalScrollView.java:223)
    at com.assignmentexpert.NewMessageActivity.addFiles(NewMessageActivity.java:165)
    at com.assignmentexpert.NewMessageActivity.onCreate(NewMessageActivity.java:90)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) 
```

在线

```
 scroll.addView(layout); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T15:22:49.157

您只需要删除此行：`scroll.addView(layout);`您已经在 xml 中声明了此行并尝试再次添加它，这就是您收到多个子异常的原因。

尝试运行这个：

```
public void addFiles() {
    HorizontalScrollView scroll = (HorizontalScrollView) findViewById(R.id.scrollMessageFiles);
    LinearLayout layout = (LinearLayout) findViewById(R.id.panelMessageFiles);
    if(!FileManagerActivity.getFinalAttachFiles().isEmpty()) {
        for (File file: FileManagerActivity.getFinalAttachFiles()) {

            View line = new View(this);

            line.setLayoutParams(new LayoutParams(1, LayoutParams.MATCH_PARENT));
            line.setBackgroundColor(0xAA345556);
            informationView = new TextView(this);
            informationView.setTextColor(Color.BLACK);
            informationView.setTextSize(12);
            informationView.setCompoundDrawablesWithIntrinsicBounds(
                    0, R.drawable.file_icon, 0, 0);
            informationView.setText(file.getName().toString());
            layout.addView(informationView, 0);
            layout.addView(line, 1);

        }
        // This line is telling the system to add your LinearLayout to the ScrollView when it is already there, declared in your xml layout file
        //scroll.addView(layout);
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T15:22:57.253

我解决了简单地删除`scroll.addView(layout);`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T15:23:23.723

删除旧的孩子，然后再尝试添加新的。尝试：

```
scroll.removeAllViews(); 
```

前

```
scroll.addView(layout); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-13T12:33:58.933

```
<HorizontalScrollView
       android:id="@+id/btnholder"
       android:layout_width="fill_parent"
       android:layout_height="50dp"
       android:layout_marginTop="131dp"
       android:scrollbars="horizontal" >

    <LinearLayout
        android:id="@+id/holderscroll"
        android:layout_width="fill_parent"
        android:layout_height="55dp"
        android:layout_marginTop="2dp" >

    </LinearLayout>
    </HorizontalScrollView> 
```

subcategoryscrollV = (Horizo​​ntalScrollView)findViewById(R.id.btnholder);

addbtnlinearlay = (LinearLayout)findViewById(R.id.holderscroll);

并在布局上添加您的按钮：

addbtnlinearlay.addView(btn[i]);

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-26T15:17:19.787

对不起，我什至懒得看你的代码，错误很清楚：

`HorizontalScrollView can host only one direct child`

不要在水平滚动视图中放置一个以上的孩子！在那里放一些组视图（线性布局，相对布局，任何你想要的），然后在那个组上放孩子。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-20T10:07:13.183

一个 ScrollView 只能有一个孩子，所以直接向它添加更多的孩子是没有意义的。假设您的 ScrollView 内部有一个 LinearLayout，那么您可以向 LinearLayout 添加更多视图：

# python - 用户定义的异常：

> ID：13089629
> 
> 赞同：13
> 
> 时间：2012-10-26T15:14:18.603
> 
> 标签：python, exception, python-2.7

我试图在 python 2.7 中定义我自己的异常类，派生自`BaseException`.

```
class NestedCommentException(BaseException):
    """
    Exception for nested comments
    """
    def __init__(self, file_path, list_lines):
        self.file_path = file_path
        self.list_lines = list_lines

    def __repr__(self):
        return self.__str__()

    def __str__(self):
        return 'File {0} contains nested comments at lines {1}'.format(self.file_path, ', '.join(self.list_lines)) 
```

但是扔的时候不能打印：`raise NestedCommentException(file_path, list_lines)`触发器

```
Traceback (most recent call last):
  File "D:\DATA\FP12210\My Documents\Outils\SVN\05_impl\2_tools\svn_tag_setup.py", line 85, in <module>
    tag_checks()
  File "D:\DATA\FP12210\My Documents\Outils\SVN\05_impl\2_tools\svn_tag_setup.py", line 66, in tag_checks
    check_nested_comments(ddl_path)
  File "D:\DATA\FP12210\My Documents\Outils\SVN\05_impl\2_tools\svn_tag_setup.py", line 54, in check_nested_comments
    raise NestedCommentException(file_path, list_lines)
NestedCommentException: <unprintable NestedCommentException object> 
```

即使我定义了`__str__`和`__repr__`方法，您能否解释一下为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-23T13:43:45.047

## TL;博士

`__str__()`当你看到这个东西时，它基本上意味着你的对象已经引发了某种异常。因此，除非问题微不足道，一眼就能看出来（例如被遗忘的“%s”），否则

*   将主体包裹`__str__`在 try/except 子句中作为 Anurag 建议，或

*   实例化您的异常并`__str__`在回溯模块之外手动调用（或您可能已覆盖的任何方法），以便您获得异常的完整描述。

## 分析

实际上，这`<unprintable MyException object>`可以来自 traceback 模块中的各种函数，当尝试获取值（异常）的字符串（即“可打印”）版本时，它

1.  调用`str()`它，如果出现任何问题，

2.  尝试将其视为 unicode 并将其转换为 ASCII，如果仍然出现任何问题

3.  只需打印上述表示。

负责代码（2.6 和 2.7 相同）：

> ```
> def _some_str(value):
>     try:
>         return str(value)
>     except Exception:
>         pass
>     try:
>         value = unicode(value)
>         return value.encode("ascii", "backslashreplace")
>     except Exception:
>         pass
>     return '<unprintable %s object>' % type(value).__name__ 
> ```

如您所见，来自调用或调用的*任何*异常都会在该过程中停止，并且只给出“神秘”的表示。`str()``unicode.encode()`

## 回溯模块与 Python 解释器的注意事项

与[`traceback`文档](http://docs.python.org/2/library/traceback.html)告诉我们的相反：

> 它在打印堆栈跟踪时完全模仿 Python 解释器的行为。

Python 解释器给出的表示在这里略有不同。与“不可打印”消息相反，解释器将简单地显示异常的名称，同时停止任何实际的异常。

这是[一个简单的脚本](https://gist.github.com/AloisMahdal/6670606)，演示了所有三种方法：将异常留给 Python 解释器，使用 traceback 模块，或手动调用函数。

```
#!/usr/bin/python

import sys, traceback

class Boom(Exception):

    def __init__(self, foo, bar, baz):
        self.foo, self.bar, self.baz = foo, bar, baz

    def __str__(self):
        return ("boom! foo: %s, bar: %s, baz: "     # ouch! forgot an %s!
                % (self.foo, self.bar, self.baz))

def goBoom(): raise Boom(foo='FOO', bar='BAR', baz='BAZ')

if __name__ == "__main__":

    if sys.argv[1].startswith("i"):
        goBoom()
        # __main__.Boom

    elif sys.argv[1].startswith("t"):
        try:    goBoom()
        except: traceback.print_exc(file=sys.stdout)
        # Boom: <unprintable Boom object>

    elif sys.argv[1].startswith("m"):
        e = Boom(foo='FOO', bar='BAR', baz='BAZ')
        e.__str__()
        # TypeError: not all arguments converted during string formatting

    else: pass 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-26T15:32:25.437

我的猜测是你有 unicode`file_path`或`list_lines`变量，因为它没有被打印在没有 unicode 功能的控制台上。

或任何其他异常都`__str__`可能导致这种奇怪的行为，最好的方法是捕获异常并查看发生了什么，也使用调试器

```
def __str__(self):
    try:
        s =  'File {0} contains nested comments at lines {1}'.format(self.file_path, ', '.join(self.list_lines))
    except Exception,e:
        print "-----",type(e),e
    return s 
```

# java - java.util.Timer

> ID：13089630
> 
> 赞同：2
> 
> 时间：2012-10-26T15:14:19.740
> 
> 标签：java, timer

```
if(e.getSource()==continuous)
{

    TimerTask task = new TimerTask()
    {
        public void run()
        {
            rollthedice();
        }
    };
    timer.schedule(task, java.util.Calendar.getInstance().getTime(), 500);

}

    if(e.getSource()==stop)
    {

        timer.cancel();

    } 
```

我按下连续按钮，rollthedice() 每秒执行两次循环，我按下停止按钮 rollthedice() 停止，我一直在寻找的是一种在我按下停止开始循环 rollthedice() 后再次按下连续按钮的方法再次方法，停止是停止rollthedice（）的连续循环，但我希望能够再次点击连续按钮，idk怎么做，我一直在寻找

更新的想法：

```
Runnable runner = new Runnable(){
    public void run()
    {
        rollthedice();
    }
}

if(e.getSource()==continuous)
{
  future = scheduler.scheduleAtFixedRate(runner, 0, 500, TimeUnit.MILLISECONDS);
}
if(e.getSource()==stop)
{

    future .cancel();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:20:18.523

从 javadoc 为[`Timer.cancel()`](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html#cancel%28%29)：

> 终止此计时器，丢弃任何当前计划的任务。不干扰当前正在执行的任务（如果存在）。一旦定时器被终止，它的执行线程就会优雅地终止，并且不能在其上安排更多的任务。

`Timer`这意味着将需要一个新的实例来`rollthedice()`再次执行方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:32:30.837

您可以改用[ScheduledThreadPoolExecutor.scheduleAtFixedRate](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#scheduleAtFixedRate%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29)。这将允许您提交任务，取消它然后再次提交。

# xml - How to read a XML file in batch?

> ID：13089631
> 
> 赞同：0
> 
> 时间：2012-10-26T15:14:20.213
> 
> 标签：xml, batch-file

I have a xml file containing a line like this:

```
<id>2012-10-19_23-10-04</id> 
```

I want to use the batch file to read the xml file, get the content and assign it to a variable.

I know batch is probably not the preferred way to do this, but I am only allowed to use batch in this case.

Any ideas? Thanks in advance!

EDIT:

I have a template like this:

```
setlocal disableDelayedExpansion

set input="xml.xml"
set output="result.txt"

REM Some Code here:

REM END 
```

**I think XML Starlet might be a good tool to start, any ideas how to do this using xmlstarlet?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:49:16.007

没关系，使用 XML Starlet 解决这个问题：

```
@echo off
setLocal EnableDelayedExpansion

for /f %%i in ('XML.EXE sel -t -v "/id" C:\xml.xml') do set var=%%i
echo date is %var% 
```

供您参考，从这里下载 XML starlet：http: [//xmlstar.sourceforge.net/](http://xmlstar.sourceforge.net/)

# linux - Fail to wake up from epoll_wait when other process closes fifo

> ID：13089632
> 
> 赞同：2
> 
> 时间：2012-10-26T15:14:22.617
> 
> 标签：linux, select, multiprocessing, fifo, epoll

I'm seeing different `epoll` and `select` behavior in two different binaries and was hoping for some debugging help. In the following, `epoll_wait` and `select` will be used interchangeably.

I have two processes, one writer and one reader, that communicate over a fifo. The reader performs an `epoll_wait` to be notified of writes. I would also like to know when the writer closes the fifo, and it appears that `epoll_wait` should notify me of this as well. The following toy program, which behaves as expected, illustrates what I'm trying to accomplish:

```
#include <errno.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/epoll.h>
#include <sys/stat.h>
#include <unistd.h>

int
main(int argc, char** argv)
{
  const char* filename = "tempfile";
  char buf[1024];
  memset(buf, 0, sizeof(buf));

  struct stat statbuf;
  if (!stat(filename, &statbuf))
    unlink(filename);

  mkfifo(filename, S_IRUSR | S_IWUSR);

  pid_t pid = fork();
  if (!pid) {
    int fd = open(filename, O_WRONLY);
    printf("Opened %d for writing\n", fd);
    sleep(3);
    close(fd);
  } else {
    int fd = open(filename, O_RDONLY);
    printf("Opened %d for reading\n", fd);

    static const int MAX_LENGTH = 1;
    struct epoll_event init;
    struct epoll_event evs[MAX_LENGTH];
    int efd = epoll_create(MAX_LENGTH);

    int i;
    for (i = 0; i < MAX_LENGTH; ++i) {
        init.data.u64 = 0;
        init.data.fd = fd;
        init.events |= EPOLLIN | EPOLLPRI | EPOLLHUP;
        epoll_ctl(efd, EPOLL_CTL_ADD, fd, &init);
    }

    while (1) {
      int nfds = epoll_wait(efd, evs, MAX_LENGTH, -1);
      printf("%d fds ready\n", nfds);
      int nread = read(fd, buf, sizeof(buf));
      if (nread < 0) {
        perror("read");
        exit(1);
      } else if (!nread) {
        printf("Child %d closed the pipe\n", pid);
        break;
      }
      printf("Reading: %s\n", buf);
    }
  }
  return 0;
} 
```

However, when I do this with another reader (whose code I'm not privileged to post, but which makes the exact same calls--the toy program is modeled on it), the process does not wake when the writer closes the fifo. The toy reader also gives the desired semantics with `select`. The real reader configured to use `select` also fails.

What might account for the different behavior of the two? For any provided hypotheses, how can I verify them? I'm running Linux 2.6.38.8.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:20:55.990

[strace](http://linux.die.net/man/1/strace)是一个很好的工具，可以确认系统调用被正确调用（即参数被正确传递并且它们不会返回任何意外错误）。

除此之外，我建议使用[lsof](http://linux.die.net/man/8/lsof)检查是否没有其他进程仍然打开该 FIFO。

# google-app-engine - Where to post ops support questions for GAE?

> ID：13089633
> 
> 赞同：-4
> 
> 时间：2012-10-26T15:14:27.080
> 
> 标签：google-app-engine

stackoverflow Mod just closed down an ops support request as non-programming. Fair from the stackoverflow perspective.

It's just that Google has dumped support for GAE on stackoverflow. [https://groups.google.com/group/google-appengine-java](https://groups.google.com/group/google-appengine-java) Struck me as odd, but I thought they'd be on the same page with stackoverflow for it. Apparently not.

So where does the (disenchanted!) user of GAE turn for ops support?!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:13:23.860

我认为您误解了公告电子邮件。它表明 Stack Overflow 将成为*开发问题*的官方渠道（非常适合 SO 模型）。而且，虽然特定于运行时的组已关闭，但通用论坛仍然开放：

> google-appengine [http://groups.google.com/group/google-appengine](http://groups.google.com/group/google-appengine)小组将继续开放，以供更适合小组形式的一般讨论和公告使用。

# java - JAVA Datasource

> ID：13089635
> 
> 赞同：0
> 
> 时间：2012-10-26T15:14:28.060
> 
> 标签：java, jdbc, weblogic

I am trying to use a datasource that I set up on my weblogic server. datasource JNDI name = thinOracleDataSource

in my code I have the following

```
public class DAOBean implements java.io.Serializable {
private Connection conn;
public void connect() throws ClassNotFoundException,
SQLException, NamingException {
Context ctx = new InitialContext();
// Lookup using JNDI name.
DataSource ds = (javax.sql.DataSource) ctx.lookup("thinOracleDataSource");
conn = ds.getConnection(); 
```

}

But I get this error

```
 javax.naming.NameNotFoundException: While trying to look up /thinOracleDataSource in /app/webapp/PreAssignment2/24911485.; remaining name '/thinOracleDataSource' 
```

am I looking the JNDI name in the right way? or am I missing something? Thanks for any help!!

EDIT: This is the jndi tree that I can get from the weblogic console ![enter image description here](../Images/ac8b25ef893e299926c4650f5362b60f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:58:13.773

尝试`jdbc/thisOracleDataSource`在 Weblogic 中命名您的数据源并将其引用为：

```
DataSource ds = (javax.sql.DataSource) ctx.lookup("jdbc/thinOracleDataSource"); 
```

此外，请确保数据源“针对”您的 weblogic Java 服务器。所有这些都可以在 Weblogic 管理控制台中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:32:26.470

您的 JNDI 密钥应该类似于`"java:comp/env/jdbc/thinOracleDataSource"`. 您可以使用允许在 JNDI 中访问（可能还包括搜索）的 Weblogic 控制台来验证它。因此，您可以在编写代码之前手动检查。

# c# - 使用静态列表和链接列表是否安全？

> ID：13089640
> 
> 赞同：2
> 
> 时间：2012-10-26T15:14:34.333
> 
> 标签：c#, asp.net

如果“安全”是一个误导性的词，我很抱歉，我不确定在这种情况下使用什么词。我想知道例如是否使用

```
 public static List<myObj> myList = new List<myObj>(); 
```

在 C# 中是可以接受的。无论如何，静态变量在应用程序的整个生命周期中都存在于 RAM 中，因此例如在 ASPX 等应用程序中，这可能会导致一些不需要的行为，并且 GC 不会收集分配。

我注意到，如果我有一个静态的对象列表，比如一个静态的“全局”类，即。

```
 globl.myList.add(foo); 
```

然后它们会在应用程序的整个生命周期中保持不变。这是否意味着如果我有一个静态对象列表，那么附加到列表中的对象本身就是静态的，还是因为有对它们的引用，GC 不收集它们？换句话说，如果我删除了一个元素，GC 会稍后收集它还是会卡在堆中直到应用程序死亡？

提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T15:17:03.357

安全在这里是一个非常非常可疑的术语。在什么情况下安全？

就内存而言是否安全：大多*是***的**。`static`如果稍后删除该引用并且没有其他人引用它，则添加对列表的引用仍然是可收集的，因此将项目添加到`static`列表本身并不会阻止它被收集。

现在，也就是说*，*如果该项目`static`在所有引用消失之前被列表持有很长时间，它可能会在 GC 生命周期中被提升到后面的世代，这可能会使项目的内存清理速度变慢很多。参考文献被释放。

就线程安全而言是否安全：*大多数***情况下没有**. 如果列表是可修改的，而其他线程可以读取它，那么您将需要同步对它的访问。也就是说，如果列表在创建时加载，多个线程可以安全地以“只读”方式访问它。

而且，如果您*确实*需要对可变集合进行并发访问，请考虑使用 .NET 4.0 中的并发集合 ( [MSDN](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:17:27.700

消极的。只要引用以这种方式保存，GC 就不会在您的列表中收集引用。

对象本身并不是“静态的”——它们只是相对于静态引用而存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:18:59.843

只有列表是静态的。对象不是。如果您删除了一个对象并且没有其他对该内存的引用，那么它将成为垃圾收集的候选对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T15:20:18.873

> 无论如何，静态变量在应用程序的整个生命周期中都存在于 RAM 中

它们在*AppDomain*的整个生命周期中都在内存中- 对于 IIS 来说，这意味着*AppPool*的生命周期。IIS 将定期回收 AppPools，因此无法保证数据将无限期地保留在内存中。

> 这是否意味着如果我有一个静态对象列表，那么附加到列表中的对象本身就是静态的，还是因为有对它们的引用，GC 不收集它们？

不，对象不是静态的——它们没有被收集，因为有对它们的引用。

> 如果我删除一个元素，GC 会稍后收集它还是会卡在堆中直到应用程序死亡？

只要有东西引用它，就不会收集 if 。如果列表是唯一引用它，则一旦从列表中删除它就有资格进行 GC。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T15:39:05.140

> 如果我删除一个元素，GC 会稍后收集它还是会卡在堆中直到应用程序死亡？

您可以创建实验，您可以编写一个程序，加载像位图这样的大图像并将其添加到列表中，然后将其从列表中删除，然后启动 gc 收集，您可以在任务管理器（cntr+shift+esc）内存中看到使用您的应用程序。例如：

```
class Program
    {
        public static List<Bitmap> Bitmaps = new List<Bitmap>(); 

        static void Main(string[] args)
        {
            Bitmaps.Add((Bitmap) Image.FromFile(@"C:\\image.bmp")); // the size of image 23 mb (in that case), you will see in task manager that you app start consumes a lot of memory
            Console.WriteLine("Memory state after loading image in list");
            Console.ReadKey();
            Bitmaps.RemoveAt(0);
            GC.Collect();
            Console.WriteLine("Memory after collect"); // and after deletion from list and start gc you will see that your app consume  less memory
            Console.ReadKey();
        }
    } 
```

这意味着 GC 将在从列表中删除后收集您的元素。

# .net - dll built with 3rd party dll stops working when 3rd party software changes version

> ID：13089642
> 
> 赞同：1
> 
> 时间：2012-10-26T15:14:40.667
> 
> 标签：.net, dll, versioning

If I am provided with a 3rd party dll, say version 1.1

then I build a dll of my own referencing this 3rd party dll (version 1.1)

now I supply my dll back to this 3rd party. my dll has been built using they 1.1 "api" dll.

Now the 3rd party changes the version of their dll, which is also used within their software to version 1.2

After this, their software can no longer use my dll compiled with version 1.1 until I recompile my plugin dll with their version 1.2 dll.

How can this problem be resolved?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:56:15.757

引用您所依赖的较新版本的程序集的程序集的使用者应在其应用程序配置文件中使用该[`<bindingRedirect>`元素，如下所示：](http://msdn.microsoft.com/en-us/library/eftw1fys.aspx)

```
<configuration>
   <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
         <dependentAssembly>
            <assemblyIdentity name="myDependency"
                              publicKeyToken="32ab4ba45e0a69a1"
                              culture="neutral" />
            <bindingRedirect oldVersion="1.0.0.0"
                             newVersion="2.0.0.0"/>
         </dependentAssembly>
      </assemblyBinding>
   </runtime>
</configuration> 
```

请注意，这`myDepdendency`是您所依赖的已升级程序集的名称。

这在 Entity Framework 和 ASP.NET MVC 中常用；通过 NuGet 添加它们通常会导致将上述部分添加到您的应用程序配置文件中。

# javascript - 使用 jQuery 对象表示法的变量闭包

> ID：13089645
> 
> 赞同：3
> 
> 时间：2012-10-26T15:14:47.493
> 
> 标签：javascript, jquery, loops, scope, closures

我有以下内容：

```
 for (var i = 0; i <= 10; i += 1) {

    var $page_button = $('<a>', {
        html : i,
        click : function () {

            var index = i;
            console.log(index);
            return false;
        }
    });

    $page_button.appendTo($wrapper);
} 
```

我认为这`var index`将为循环的每次迭代单独定义，因为它包含在一个函数中。在这种情况下，打印的索引值始终为 10。

链接文本是 i 的正确值，因为它被写入 DOM，然后是不可变的。

为什么会这样，我应该改变什么来解决我的问题？

我知道这与许多其他问题相似，但使用这种表示法的行为会导致不同的结果。我正在使用 jQuery 1.7.2（不幸的是不能使用任何更新的版本。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T15:17:08.410

您需要将其封闭在闭包中以解决问题..

```
var $page_button = $('<a>', {
        html : i,
        click : (function (num) {
           return function(){
               var index = num;
               console.log(index);
               return false;
            }
        })(i)
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:19:17.800

引用`i`作为匿名函数的一部分被关闭。注意：不是它的*value*，而是对它自己的引用`i`。运行该函数时，将评估该值。因为函数在循环结束后运行，所以该值将始终是 的最后一个值`i`。要仅传递*值*，您可以执行以下操作：

```
 click : (function (index) {
        return function () {
            console.log(index);
            return false;
        };
    })(i) 
```

您创建一个立即执行的匿名函数，它将一个值作为参数并返回您的实际函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:17:17.653

每个处理程序都共享相同的`i`变量。每个都需要自己的变量范围才能引用唯一索引。

```
 for (var i = 0; i <= 10; i += 1) {
    var $page_button = $('<a>', {
        html : i,
        click : makeHandler(i)  // invoke makeHandler, which returns a function
    });
    $page_button.appendTo($wrapper);
} 
```

* * *

```
function makeHandler(index) {
    return function () {
                console.log(index);
                return false;
           };
} 
```

在这里，我创建了一个`makeHandler`接受索引参数的函数，并返回一个用作处理程序的函数。

因为函数调用设置了一个新的变量范围，并且因为在 内部创建并返回了一个函数，所以返回的`makeHandler`每个处理程序都将引用其自己的范围索引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T15:18:24.100

该变量`index`是为函数的每次执行单独定义的，但是您从`i`函数内部的变量中复制值，因此您将`i`在函数运行时使用原样的值，而不是在创建函数时使用。

您需要一个在循环内执行的函数来捕获变量的值：

```
for (var i = 0; i <= 10; i += 1) {

  (function(){
    var index = i;

    var $page_button = $('<a>', {
      html : i,
      click : function () {
        console.log(index);
        return false;
      }
    });

  })();

  $page_button.appendTo($wrapper);
} 
```

# c# - 网格背景图像不透明度问题

> ID：13089656
> 
> 赞同：1
> 
> 时间：2012-10-26T15:15:29.940
> 
> 标签：c#, windows-phone-7

我对网格布局的背景图像有一个奇怪的问题。由于某种原因，ListPicker 没有完全覆盖图像。相反，应用了一些不透明度......（查看图片中的齿轮图标）

![带不透明度问题的网格背景](../Images/7854e0133e66526f42a04e40f27c9342.png)

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Grid>
            <Grid.Background>
                <ImageBrush 
                        ImageSource="/BrewingApp;component/Images/icon_gears_big.png" 
                        AlignmentX="Right" 
                        AlignmentY="Bottom" 
                        Stretch="None" 
                        Opacity="0.5" />
            </Grid.Background>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="1*"/>
            </Grid.RowDefinitions>
...
                <StackPanel
                Grid.Row="1"
                Margin="0,12,0,0">
                <TextBlock Text="More Stuff :-)"></TextBlock>
                <Rectangle
                        Grid.Row="1"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Top"
                        Height="1" 
                        Stroke="Red" 
                        StrokeThickness="1" >
                </Rectangle>

                <toolkit:ListPicker
                    Header="Hop Formula"
                    ItemsSource="{Binding HopFormulaList}"
                    SelectedItem="{Binding HopFormulaSelection, Mode=TwoWay}"
                    HorizontalAlignment="Stretch" OpacityMask="Blue" />

            </StackPanel>

        </Grid> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:00:23.353

`TextBox`并`ListPicker`使用`PhoneTextBoxBrush`他们的背景。此笔刷使用颜色`#BFFFFFFF`。即，具有一点透明度 (BF) 的白色 (FFFFFF)。因此你的问题。解决问题的一种方法是简单地更改这些控件的背景：

```
<Grid.Resources>
    <SolidColorBrush x:Key="PhoneTextBoxBrush" Color="#BEBEBE"/>
    <Style TargetType="toolkit:ListPicker">
        <Setter Property="Background" Value="{StaticResource PhoneTextBoxBrush}" />
    </Style>
    <Style TargetType="TextBox">
        <Setter Property="Background" Value="{StaticResource PhoneTextBoxBrush}" />
    </Style>
</Grid.Resources> 
```

# java - 没有为依赖找到匹配的类型 [org.springframework.social.twitter.api.Twitter] 的 bean

> ID：13089657
> 
> 赞同：3
> 
> 时间：2012-10-26T15:15:33.967
> 
> 标签：java, spring, spring-mvc, twitter, spring-social

我正在使用 Spring Social 连接到 Twitter。连接部分工作正常，但是当我尝试获取朋友列表时，出现以下错误：

```
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.springframework.social.twitter.api.Twitter] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {} 
```

我的控制器类：

```
@Controller
@RequestMapping("/social")
public class SocialController {

    private final Twitter twitter;

    @Inject
    public SocialController(Twitter twitter) {
        this.twitter = twitter;
    }

    @RequestMapping(value="/twitter/friends", method=RequestMethod.GET)
public String friends(Model model) {
    model.addAttribute("profiles", twitter.friendOperations().getFriends());
    return "twitter/friends";
}
} 
```

我的 XML 配置如下：（仅显示相关部分）

```
<!-- Spring Social -->
    <bean id="connectionFactoryLocator"
        class="org.springframework.social.connect.support.ConnectionFactoryRegistry">
        <property name="connectionFactories">
            <list>
                <bean
                    class="org.springframework.social.twitter.connect.TwitterConnectionFactory">
                    <constructor-arg value="${twitter.consumerKey}" />
                    <constructor-arg value="${twitter.consumerSecret}" />
                </bean>
                <bean
                    class="org.springframework.social.facebook.connect.FacebookConnectionFactory">
                    <constructor-arg value="${facebook.clientId}" />
                    <constructor-arg value="${facebook.clientSecret}" />
                </bean>
            </list>
        </property>
    </bean>

    <bean id="textEncryptor" class="org.springframework.security.crypto.encrypt.Encryptors"
        factory-method="noOpText" />

    <bean id="usersConnectionRepository"
        class="org.springframework.social.connect.jdbc.JdbcUsersConnectionRepository">
        <constructor-arg ref="jpaDataSource" />
        <constructor-arg ref="connectionFactoryLocator" />
        <constructor-arg ref="textEncryptor" />
    </bean>

    <bean id="connectionRepository" factory-method="createConnectionRepository"
        factory-bean="usersConnectionRepository" scope="request">
        <constructor-arg value="#{request.userPrincipal.name}" />
        <aop:scoped-proxy proxy-target-class="false" />
    </bean>

    <bean class="org.springframework.social.connect.web.ConnectController">
        <!-- relies on by-type autowiring for the constructor-args -->
        <property name="applicationUrl" value="${application.url}" />
    </bean>
    <!-- Spring Social --> 
```

请指导。我会非常感谢。

## 编辑

我想我忘了添加

```
@Bean
    @Scope(value="request", proxyMode=ScopedProxyMode.INTERFACES)   
    public Twitter twitter() {
        Connection<Twitter> twitter = connectionRepository().findPrimaryConnection(Twitter.class);
        return twitter != null ? twitter.getApi() : new TwitterTemplate();
    } 
```

到 XML 文件。任何想法如何在 XML 上下文中表示。我是基于注释的配置的新手，因此使用基于 xml 的配置。请帮忙。

## 编辑 2

我解决了一个解决方法。决定同时使用基于注释的配置和基于 XML 的配置。只需添加我为每个人所做的事情：

我添加了一个配置：

```
public class SocialApiConfig {
    @Bean
    @Scope(value="request", proxyMode=ScopedProxyMode.INTERFACES)   
    public Facebook facebook(ConnectionRepository connectionRepository) {
        Connection<Facebook> facebook = connectionRepository.findPrimaryConnection(Facebook.class);
        return facebook != null ? facebook.getApi() : new FacebookTemplate();
    }

    @Bean
    @Scope(value="request", proxyMode=ScopedProxyMode.INTERFACES)   
    public Twitter twitter(ConnectionRepository connectionRepository) {
        Connection<Twitter> twitter = connectionRepository.findPrimaryConnection(Twitter.class);
        return twitter != null ? twitter.getApi() : new TwitterTemplate();
    }
} 
```

然后将其包含在我的基于 XML 的配置中

```
<bean class="com.joinups.config.SocialApiConfig" /> 
```

感谢大家指导我得到正确答案！非常感谢。你们真棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:30:48.440

看来您没有声明 type 的 bean `Twitter`。

从[spring 文档](http://www.springframework.net/social-twitter/refdoc/api.html#twitter-getProfile)中，我可以看到您需要以`Twitter`某种方式实例化。

尝试使用实例化对象`<bean id="twitter" factory-bean="twitterConnectionFactory" />`所需的正确参数声明一个 bean`TwitterTemplate`

### 编辑：

这是通过xml的配置：

```
<bean id="twitter" factory-method="ﬁndPrimaryConnection"
    factory-bean="connectionRepository" scope="request" depends-on="connectionRepository">
    <constructor-arg value="org.springframework.social.twitter.api.Twitter" />
</bean> 
```

看到[这个 ohter - 可能的欺骗 - 问题](https://stackoverflow.com/questions/12687871/how-to-configure-spring-social-via-xml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:24:47.473

请在调试器中查看上下文中的 bean，并查看那里是否有派生自 org.springframework.social.twitter.api.Twitter 的类。我怀疑有。我没有使用 Twitter API，但我希望有一个 XML 配置元素来告诉 Spring 使用它，或者有一个 Twitter API jar 需要在你的类路径中的某个地方。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:43:25.857

组件扫描发生在配置中的 bean 加载之前。在注入时，Twitter 不存在。您可以像 PH 所说的那样在 XML 中定义 Twitter bean。还可以尝试使用 @Autowired 而不是 @Inject 来向 Controller 提供依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T15:44:50.020

您正在使用基于注释的声明，因为`Twitter`您可能需要在 spring 配置中添加类似这样的内容

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:context="http://www.springframework.org/schema/context"
     xsi:schemaLocation="http://www.springframework.org/schema/beans
         http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
         http://www.springframework.org/schema/context
         http://www.springframework.org/schema/context/spring-context-3.0.xsd">

   <context:annotation-config/>

</beans> 
```

[基于注解的容器配置](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-annotation-config)

# c# - 具有 n^n 种可能性的 C# 字符串连接

> ID：13089659
> 
> 赞同：0
> 
> 时间：2012-10-26T15:15:42.707
> 
> 标签：c#, string, arraylist, concatenation

我有一个字符串 [] 数组的通用列表，我需要构建一个字符串列表，其中包含这些数组中项目的所有可能组合。我很难理解最好的方法。

所以：列表 mylist = 新列表；// 然后我从数据库中填充它...

mylist 的内容如下所示：

```
Buildings ||| Facilities ||| Fields ||| Files; Groups; Entity; ||| Controllers; FX; Steam; 
```

管道“|||”分隔 mylist 中的每个字符串数组，分号是表示每个数组中的项目的分隔符。所以数组的最小长度为 1，最大为 N。我需要构建一个连字符“---”分隔的字符串列表，其中包含上述所有可能的组合，但要保持它们在列表。所以以上面的例子为例，我会想出这个字符串列表：

```
Buildings---Facilities---fields---Files---Controllers
Buildings---Facilities---fields---Groups---Controllers
Buildings---Facilities---fields---Entity---Controllers

Buildings---Facilities---fields---Files---Fx
Buildings---Facilities---fields---Groups---Fx
Buildings---Facilities---fields---Entity---Fx

Buildings---Facilities---fields---Files---Steam
Buildings---Facilities---fields---Groups---Steam
Buildings---Facilities---fields---Entity---Steam 
```

如果列表中的第三个数组有 2 个项目，而不是 1（“字段”） - 我们将有一个 18 个字符串的列表，而不是 9 个（3x3x2）。

我尝试使用 for 循环，知道哪个数组的长度最大，然后循环遍历每个列表项，但我就是无法让它工作。睡在上面真的没有帮助。

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:53:18.037

我会尝试递归：

```
private void button1_Click(object sender, EventArgs e)
        {
            List<string[]> strs = new List<string[]>();
            strs.Add(new string[] {"Buildings"});
            strs.Add(new string[] {"Facilities"});
            strs.Add(new string[] {"Fields"});
            strs.Add(new string[] {"Files", "Groups", "Entity"});
            strs.Add(new string[] {"Controllers", "FX", "Steam"});
            List<string> list = AddStringsToList(strs, 0);

        }

        List<string> AddStringsToList(List<string[]> list, int level)
        {
            List<string> listOfStrings = new List<string>();
            if (level == list.Count - 1)
            {
                foreach (string s in list[level])
                {
                    listOfStrings.Add(s);
                }
            }
            else if(level<list.Count-1)
            {
                List<string> list1 = AddStringsToList(list, level + 1);
                foreach (string s in list[level])
                {
                    foreach(string s1 in list1)
                        listOfStrings.Add(s + "---" + s1);
                }
            }
            return listOfStrings;
        } 
```

经过测试，它可以工作！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:21:17.977

我认为这可能会满足您的需求：

```
static IEnumerable<string> Combinations(IEnumerable<IEnumerable<string>> items)
{
    return items.Aggregate((outs, ins) => outs.SelectMany(o => ins.Select(i => o + "---" + i)));
} 
```

这是一个示例用法

```
static void Main(string[] args)
{
    IEnumerable<IEnumerable<string>> items = new string[][]
    {
        new [] { "Buildings" },
        new [] { "Facilities" },
        new [] { "Fields" },
        new [] { "Files", "Groups", "Entity" },
        new [] { "Controllers", "FX", "Steam" }
    };

    foreach (var c in Combinations(items))
        Console.WriteLine(c);

    Console.ReadLine();
} 
```

对于每组可能性，它会采用它目前拥有的所有字符串（例如“建筑物---设施---字段---文件”、“建筑物---设施---字段---实体”等)，然后对于每种可能性（例如 {“Controllers”、“FX”、“Steam”}），它将该可能性附加到输出字符串以获得一组新的输出字符串。聚合迭代此过程，仅从第一个元素作为输出字符串的可能性开始，然后连续重复此“笛卡尔积”，直到消耗完所有输入。

**编辑**

作为参考，这是示例程序的输出：

```
Buildings---Facilities---Fields---Files---Controllers
Buildings---Facilities---Fields---Files---FX
Buildings---Facilities---Fields---Files---Steam
Buildings---Facilities---Fields---Groups---Controllers
Buildings---Facilities---Fields---Groups---FX
Buildings---Facilities---Fields---Groups---Steam
Buildings---Facilities---Fields---Entity---Controllers
Buildings---Facilities---Fields---Entity---FX
Buildings---Facilities---Fields---Entity---Steam 
```

我想指出，这个解决方案非常有效。它不使用递归，这使得它对于长链的情况特别有效。此外，它会延迟评估结果，如果您要处理许多结果组合，则内存效率会更高（请记住，这些组合会随着链长呈指数增长）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:50:03.860

让我们生成这个：

```
Buildings---Facilities---fields---Files---Controllers
Buildings---Facilities---fields---Files---Fx
Buildings---Facilities---fields---Files---Steam

Buildings---Facilities---fields---Groups---Controllers
Buildings---Facilities---fields---Groups---Fx
Buildings---Facilities---fields---Groups---Steam

Buildings---Facilities---fields---Entity---Controllers
Buildings---Facilities---fields---Entity---Fx
Buildings---Facilities---fields---Entity---Steam 
```

首先，我们假设数据库中的数据是这种格式：

```
List<List<string>> dataFromDb; 
```

一些内部集合是否只有一个值并不重要。然后像这样的东西应该可以解决问题：

```
void ConcatString(string prefix, int index, List<List<string>> collection, List<string> output)
{
    if(index == collection.Count)
    {
        output.Add(prefix);
        return;
    }
    var subCollection = collection[index];
    foreach(var str in subCollection)
    {
        string newPrefix = ((prefix.Length > 0)? "---" : "") + str;
        ConcatString(newPrefix, index+1, collection, output);
    }
} 
```

像这样调用：

```
var output = new List<string>();
ConcatString("", 0, dataFromDb, output); 
```

您要查找的列表应该在输出中。现在，请注意，我还没有运行它（哎呀，我什至没有编译它）所以你需要调试它，但它至少应该让你朝着正确的方向前进。

# c - C将int值传递给float参数

> ID：13089662
> 
> 赞同：5
> 
> 时间：2012-10-26T15:15:48.397
> 
> 标签：c

这是我的代码片段：

```
float square_root(x)
float x;
{
 .......
}

int main(){
    printf("Square_root 2 = %f\n", square_root(4));
} 
```

当我将数字 4.0 传递给`square_root()`函数时，`x`函数内的参数是 4.0000000 所以没关系。但是当我只传递 4（如示例中）时，`x`函数内的变量变为 1.976262583365e-323#DEN

为什么会这样？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-26T15:17:57.643

您使用的是旧样式的函数声明，其中参数类型单独列出。请参阅[C 函数语法，在参数列表之后声明的参数类型](https://stackoverflow.com/questions/1585390/c-function-syntax-parameter-types-declared-after-parameter-list)

当您传递一个`int`时，默认情况下它不会被转换为`float`。但是，您的函数将参数**解释**为 a `float`，这会产生不良结果。

现代方法是在函数声明中包含参数类型，这将允许您的`int`参数自动转换为`float`.

```
float square_root(float x)
{
     .......
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T15:17:40.467

具有非原型函数的默认参数提升，并且没有像原型那样转换为参数的类型。所以基本上你`int`的价值`4`被解释为 a`float`而不是被转换为 a `float`。

改用原型定义：

```
float square_root(float x)
{
 .......
} 
```

将函数调用中的参数转换为`float`.

另请注意，旧式函数定义是过时的 C 功能，应避免使用。

# android - CustomListView 后台问题

> ID：13089666
> 
> 赞同：1
> 
> 时间：2012-10-26T15:16:31.293
> 
> 标签：android, xml, listview, layout, background

`Listview`我用图像定制。我`items.xml`的是这样的：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dip"
    android:soundEffectsEnabled="true"
>

    <ImageView
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:id="@+id/imgViewLogo"   
        android:layout_alignParentLeft="true"
        android:layout_centerInParent="true"
        android:scaleType="center">
    </ImageView>

    <TextView
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:id="@+id/txtViewTitle"
        android:layout_toRightOf="@+id/imgViewLogo"
        android:layout_marginLeft="2dip"
        android:textColor="#000000">
    </TextView>

    <TextView
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:id="@+id/txtViewDescription"
        android:layout_toRightOf="@+id/imgViewLogo"
        android:layout_below="@+id/txtViewTitle"
        android:layout_marginLeft="2dip"

        android:textColor="#000000">
    </TextView>

</RelativeLayout> 
```

![在此处输入图像描述](../Images/dfedbe0fff80557a5afd95bcd2931609.png)

这是有效的，但是当我触摸它并将其移动到我的自定义列表视图时，它就坏了。我认为这种背景可能存在问题`main.xml`：

![在此处输入图像描述](../Images/ca7f50af9c5d280e751c384035a9c9ab.png)

我`main.xml`的是这样的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
        android:background="@drawable/gradient_body"
android:focusable="true"
    >
    <ListView 
        android:id="@+id/listView1" 
        android:background="@drawable/gradient_body"
        android:focusable="true"
        android:layout_height="fill_parent" 
        android:layout_width="fill_parent"
        android:divider="#c0bbbb"
        android:dividerHeight="1dp"
></ListView>
</LinearLayout> 
```

我厌倦了更改其他属性，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:45:28.313

而不是放

```
android:background="@drawable/gradient_body" 
```

在您的 main.xml 的列表视图中将其添加到您的 items.xml 中的 relativeLayout 中，就像这样

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="5dip"
android:background="@drawable/gradient_body"
android:soundEffectsEnabled="true" > 
```

# ios - CGBitmapContextCreate 内存释放责任

> ID：13089671
> 
> 赞同：1
> 
> 时间：2012-10-26T15:16:52.580
> 
> 标签：ios, memory-management, cgbitmapcontext

这就是我创建`UIImage`. `piOutData`我用calloc分配。现在当我`CGImageRelease`最后打电话时，它会自动释放`piOutData`还是我需要通过免费手动完成。

```
int m_iH = iInMaxDim;
int m_iW = iInMaxDim;

UInt8*piOutData = calloc(iInMaxDim *iInMaxDim*4,sizeof(UInt8));
CGContextRef ctx = CGBitmapContextCreate(piOutData,  
                                         m_iW,  
                                         m_iH,  
                                             CGImageGetBitsPerComponent(inImage.CGImage),
                                         m_iW*4,  
                                         CGImageGetColorSpace(inImage.CGImage),  
                                         CGImageGetBitmapInfo(inImage.CGImage) 
                                         ); 
CGImageRef imageRef = CGBitmapContextCreateImage(ctx);  
CGContextRelease(ctx);
UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:21:35.363

> …当我最后调用 CGImageRelease 时，它​​会自动释放 piOutData 吗？

编号`piOutData`归您所有。

# c++ - MS Word COM 插件无法在 XP 中接收消息

> ID：13089675
> 
> 赞同：0
> 
> 时间：2012-10-26T15:16:56.700
> 
> 标签：c++, winapi, postmessage, office-automation, comaddin

在我的 COM 插件中，我创建了一个对话框，然后从外部进程向它发送消息。我使用`HWND_BROADCAST`和`RegisterWindowMessage`。

但是 COM 插件的对话过程永远不会收到这些消息。我知道这一点，因为我记录了对话过程接收到的所有消息，以及`RegisterWindowMessage`.

从外部过程：

```
static UINT nCloseMessage = 0;
if (!nCloseMessage)
    nCloseMessage = RegisterWindowMessage(_T("MyCloseMessage"));    
PostMessage(HWND_BROADCAST, nCloseMessage, 0, 0); 
```

从 COM 加载项：

```
INT_PTR CALLBACK ProgressDialogProc(__in  HWND hwndDlg,__in  UINT uMsg,__in  WPARAM wParam,__in  LPARAM lParam)
{
    static UINT nCloseMessage = 0;
    if (!nCloseMessage)
        nCloseMessage = RegisterWindowMessage(_T("MyCloseMessage"));    
    if (uMsg == nCloseMessage)
        MessageBox(0,_T("Caught"),0,0);

    return FALSE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:02:19.923

我找到了为什么我得到这个错误，`HWND_BROADCAST`当对话框有父窗口时不起作用。

传递`NULL`给`CreateDialog`父级修复了错误。

# html - 在 HTML 文件中链接 XML 和 XSLT 文件

> ID：13089682
> 
> 赞同：1
> 
> 时间：2012-10-26T15:17:16.780
> 
> 标签：html, xml, xslt

我仍在学习如何使用 XML 和 XSL 创建 HTML 输出文件，并且由于 stackoverflow 已经有了很大的改进。

我有一个自动生成的 XML 文件，但每次创建新的 XML 时我都无法告诉 XML 文件 XSLT 文件在哪里。
有没有办法创建一个 HTML 文件，当用户打开它时，HTML 将“href”到 XML 和 XSLT 并将其作为预期的 HTML 结果输出，就像 CSS 或 Javascript 包含在 HTML 中一样。

谢谢你，罗宾

这是从我们使用的程序生成的 XML 文件...

```
<Root>
<Ticket>
<TicketStart Date="2012-10-22" />
<Clubcard Opcode="96" Function="27" CardAcc="1" QualSpendInfo="0" SchemeNo="40" CardNo="1042540000026" PointsToDate="0" RedemptionValue="0" CustomerUpdateDate="000000" QualSpent="0" Date="2012-10-22" />
<ClubcardPoints Opcode="96" Function="28" SchemeNo="40" PromNo="0" CardNo="1042540000026" QualSpend="30005" PointSpend="0" Points="6" BonusPoints="0" PromCount="0" Date="2012-10-22" />
<Clubcard Opcode="96" Function="27" CardAcc="1" QualSpendInfo="1" SchemeNo="40" CardNo="1042540000026" PointsToDate="0" RedemptionValue="0" CustomerUpdateDate="000000" QualSpent="30005" Date="2012-10-22" />
<TicketEnd Date="2012-10-22" />
</Ticket>
<Ticket>
<TicketStart Date="2012-10-22" />
<TicketEnd Date="2012-10-22" />
</Ticket>
<Events>
</Events>
<Ticket>
<TicketStart Date="2012-10-22" />
<Clubcard Opcode="96" Function="27" CardAcc="1" QualSpendInfo="0" SchemeNo="40" CardNo="1042540000057" PointsToDate="0" RedemptionValue="0" CustomerUpdateDate="000000" QualSpent="0" Date="2012-10-22" />
<ClubcardPoints Opcode="96" Function="28" SchemeNo="40" PromNo="0" CardNo="1042540000057" QualSpend="18025" PointSpend="0" Points="3" BonusPoints="0" PromCount="0" Date="2012-10-22" />
<Clubcard Opcode="96" Function="27" CardAcc="1" QualSpendInfo="1" SchemeNo="40" CardNo="1042540000057" PointsToDate="0" RedemptionValue="0" CustomerUpdateDate="000000" QualSpent="18025" Date="2012-10-22" />
<TicketEnd Date="2012-10-22" />
</Ticket>
<Events>
</Events>
</Root> 
```

`

目前我必须把它放在 XML 文件的开头

```
<?xml version="1.0" encoding="utf-8"?>
 <?xml-stylesheet type="text/xsl" href="XSLnice.xsl"?> 
```

XSL 文件看起来像这样...

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html"/>
  <xsl:template match="/">
    <html>
      <head>
    <title>StoreLine Loyalty Sales</title>
      </head>
    <body>
      <br/>
      <br/>
      <br/>
       <b>Loyal Customers</b>
      <br/>
      <br/>
    <table width="100%" border="3">
      <THEAD>
      <TR bgcolor="RGB(0, 204, 51)">
      <TD width="25%">
        <font color="white"><B>Account Number</B></font>
      </TD>
      <TD width="25%">
        <font color="white"><B>Points</B></font>
      </TD>
      <TD width="25%">
        <font color="white"><B>Date</B></font>
      </TD>
      <TD width="25%">
        <font color="white"><B>Qualified Spent</B></font>
      </TD>
      </TR>
      </THEAD>
    <TBODY>
    <xsl:for-each select="Root/Ticket/ClubcardPoints">
      <TR>
      <TD width="25%"><xsl:value-of select="@CardNo" /></TD>
      <TD width="25%"><xsl:value-of select="@Points" /></TD>
      <TD width="25%"><xsl:value-of select="@Date" /></TD>
      <TD width="25%"><xsl:value-of select="format-number(@QualSpend div 100,'&#x52;#.##')" /></TD>
    </TR>
    </xsl:for-each>
    </TBODY>
    </table>
  </body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

`

将这些文件放在同一个文件夹中，我双击 XML 文件，它会为我提供一份关于我在 XML 中需要的值的友好报告。因此，如果我可以双击一个 HTML 文件，并且每次将新的 XML 放在同一个文件夹中，HTML 就会找到 XML 并使用 XSL 作为样式表来展示自己。不必每次都手动更新 XML 并告诉它使用 XSL。

我也尝试过但未成功将“CardNo”分组并报告使用了多少次，总共获得了多少“积分”以及“合格金额”是多少。而不是这个长长的条目列表，就像一个综合报告。

非常感谢...

这是首选的输出文件...

```
<THEAD>
                <TR bgcolor="RGB(0, 204, 51)">
                    <TD width="25%"><font color="white"><B>Account Number</B></font></TD>
                    <TD width="25%"><font color="white"><B>Total Points</B></font></TD>
                    <TD width="25%"><font color="white"><B>Date</B></font></TD>
                    <TD width="25%"><font color="white"><B>Total Qualified Spent</B></font></TD>
                </TR>
            </THEAD>
            <TBODY>
                <TR>
                    <TD width="25%">1042540000002</TD>
                    <TD width="25%">100</TD>
                    <TD width="25%">2012-10-22</TD>
                    <TD width="25%">R750.32</TD>
                </TR> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:04:18.757

如果我理解正确，您正在使用 XSLT 从您的 XML 文件创建 HTML。执行此操作的常规方法是运行 XSLT 处理器，为其提供 XSLT 和 XML 文件。无需修改 XML 文件即可执行此操作。您将 XSLT 和 XML 文件提供给处理器，它会为您提供转换后的输出文件，在您的情况下将是 HTML。

我相信 Saxon 和 Altova 都有免费版本的 theit XSLT 引擎（以及商业引擎），所以请尝试下载其中一个并试一试。您只需要从命令行调用 XSLT 引擎。只要您不需要 XSLT 2，您也可以使用 Microsoft 的引擎。

# android - adb remount 权限被拒绝，但能够在 shell 中访问超级用户 -- android

> ID：13089694
> 
> 赞同：70
> 
> 时间：2012-10-26T15:17:41.983
> 
> 标签：android, shell, permissions, adb, root

所以，我正在尝试将一些文件推送到我已经植根并与 ADB 连接的 android 设备（zte）上的 /system，

adb remount -> 我获得权限被拒绝 adb shell su -> 我能够访问 shell 并创建文件夹等并编辑文件系统

（但在 shell 中我无法将文件从计算机复制到设备）

请提供任何帮助

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-11-13T18:23:05.607

万一以后有人遇到同样的问题：

```
$ adb shell
$ su
# mount -o rw,remount /system 
```

在不改变 ro.secure 的情况下，两者`adb remount`都`adb root`不能用于生产构建，但您仍然可以通过打开 shell、请求 root 权限并键入 mount 命令来重新挂载 /system。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-04-02T01:23:07.353

**`emulator -writable-system`**

对于使用模拟器的人：另一种可能性是您需要使用 -writable-system 启动模拟器。当使用带有 4.1 图像的 android studio 打包的标准模拟器时，这是唯一对我有用的东西。在这里查看：[https ://stackoverflow.com/a/41332316/4962858](https://stackoverflow.com/a/41332316/4962858)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-06-20T20:00:35.930

尝试

```
adb root
adb remount 
```

以 root 身份启动 adb 恶魔并确保分区以读写模式挂载（基本部分是`adb root`）。在`push`ing 之后，再次使用以下命令撤销 root 权限：

```
adb unroot 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-07-24T07:47:10.793

一些较新的版本需要首先运行以下附加 adb 命令

```
adb root
adb disable-verity
adb reboot 
```

然后

```
adb root
adb remount 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-02-13T16:03:48.070

您可以使用：

```
adb shell su -c "your command here" 
```

只有带有 su 的 root 设备才有效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-10T02:14:36.653

# 启动 /w 可写系统

### *在没有*Google Play的情况下使用模拟器图像

**这不适***用于***生产 Android 图像，即带有 Google Play 的图像**

*使用非 Google Play 图像进行 root 访问和可写系统*

从命令提示符启动您的模拟器作为**可写系统**，使用其 AVD 名称（`Pixel3a`在此示例中，请参阅下面的**AVD 名称**以查找或更改您的。确保使用此命令时*没有运行另一个模拟器实例）：*

```
emulator @Pixel3a -writable-system 
```

（保持这个命令方便。你需要在任何时候使用它来访问你的模拟器作为'可写'。我在 gitbash 中使用别名从 gitbash 终端启动我的模拟器，每次。）

这将启动模拟器。

启动完成后，打开另一个命令提示符/终端（此命令提示符/终端卡在运行模拟器）并：

```
adb root 
```

结果应该是：

```
$ adb root
restarting adbd as root 
```

然后：

```
adb remount 
```

结果：

```
$ adb remount
remount succeeded 
```

当你：

```
adb shell 
```

和：

```
su 
```

您现在应该拥有完整的 root/可写访问权限：

```
$ adb shell
generic_x86_arm:/ # su
generic_x86_arm:/ # 
```

将域添加到主机文件

```
$ cd /etc
$ cp hosts hosts.bak1
$ cat hosts
127.0.0.1       localhost
::1             ip6-localhost

$ echo '10.0.2.2 my.newdomain.com' >> hosts
$ cat hosts
127.0.0.1       localhost
::1             ip6-localhost
10.0.2.2        my.newdomain.com 
```

10.0.2.2 是 Android 模拟器的“localhost”。它将委托给您的 Windows/Mac 主机文件和 DNS 服务。您添加到开发机器`hosts`文件中的任何域都将与您`10.0.2.2`的 Android 模拟器主机文件一样工作。

### AVD 名称

在 Android Studio 中，可以从菜单启动 AVD Manager：

工具 > AVD 管理器

[![AVD 列表](../Images/d1071a7c72749869ad1ec9c989bdfbec.png)](https://i.stack.imgur.com/DZLzG.jpg)

如果您的模拟器名称有空格，您可以通过单击右侧的铅笔图标来更改它。

为了便于输入，我将我的模拟器命名为“Pixel3a”，不带空格。 [![AVD 详细信息](../Images/9f4e92f02b4729c183dfdffba4d56444.png)](https://i.stack.imgur.com/EBUiB.jpg)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-14T20:03:35.360

尝试使用 API lvl 28 模拟器（Android 9）。我正在尝试使用 api lvl 29 并不断收到错误。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-20T05:39:23.950

然后我重新启动恢复

```
adb root; adb adb remount system; 
```

为我工作我的恢复是twrp v3.5

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2015-12-08T02:31:28.380

```
@echo off
color 0B
echo =============================================================================
echo.
echo              ClockworkMod Recovery for SAMSUNG GALAXY SIII E210L
echo.
echo                  ClockworkMod Recovery (v6.0.1.2 Touch)
echo.
echo     ¡ô¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¡ô
echo     ¨U                                                                  ¨U
echo     ¨U SAMSUNG GALAXY SIII E210L                                        ¨U
echo     ¡ô¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¨T¡ô
echo.
echo  1) (Settings\Developer options©¥ USB debugging)
echo.
echo  2) CWM SAMSUNG GALAXY SIII E210L 
echo.
echo  3) THANK!!!!!!
echo.
echo =============================================================================
echo                           ARE YOU READY? GO! ¡·¡·¡·
@pause
echo.
echo adb...
adb.exe kill-server
adb.exe wait-for-device
echo wiat¸!
echo.
echo conect...
adb.exe push IMG /data/local/tmp/
adb.exe shell su -c "dd if=/data/local/tmp/GANGSTAR-VEGAS-1.3.0-APK-Andropalace.net.apk of=/mnt/sdcard/Android/GANGSTAR-VEGAS-1.3.0-APK-Andropalace.net.apk
adb.exe shell su -c "rm /data/local/tmp/bootloader.img"
adb.exe shell su -c "rm /data/local/tmp/recovery.img"

echo ===============================================================
echo     ClockworkMod Recovery!
echo.
@pause 
```

# ios - 发布所有 GameCenter 玩家的分数

> ID：13089696
> 
> 赞同：1
> 
> 时间：2012-10-26T15:17:47.447
> 
> 标签：ios, leaderboard

您可以一次在 GameCenter 中为所有玩家发布分数吗？似乎 API 只允许为当前玩家发帖。我正在尝试实现投票功能，允许当前玩家在 GameCenter 中投票/评分其他玩家。

```
GKScore* gkScore = [[GKScore alloc] initWithCategory:category];

gkScore.value = score;

// ??? Score for current player ONLY - how to record score for other players ???
[gkScore reportScoreWithCompletionHandler:
 ^(NSError* error) {
     ....

     BOOL success = (error == nil);

     [delegate onScoresSubmitted:success];

 }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:02:27.303

您只能发布当前玩家的分数。这是出于安全目的。

如果多人在玩同一个游戏，当他们在自己的设备上打开他们的应用程序时，就是你提交分数的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T17:43:32.603

在 iOS 7 中，这不再适用。但是你只能在结束游戏时这样做，使用

```
endMatchInTurnWithMatchData:scores:achievements:completionHandler: 
```

# java - JRE1.7 中的 SSL 连接问题

> ID：13089697
> 
> 赞同：1
> 
> 时间：2012-10-26T15:17:48.270
> 
> 标签：java, ssl

我有两个 Java 程序（客户端和服务器），在我升级到 Java 1.7 之前，它们多年来一直运行良好。它们通过 SSL 套接字连接。

在 JRE 1.7 中，连接挂起，即读取函数在某些时候不返回任何内容（适用于多个字节，然后阻塞，甚至字节即将到来）。奇怪的是，如果我从 NetBeans IDE 运行代码，它可以完美运行，只有当我从命令行运行或双击 .jar 文件时才会出现这个问题。它也适用于 JRE 1.6 或更早版本。

如果我禁用 SSL，它似乎可以工作。

JRE 1.7 中的 SSL 是否存在已知问题，或者是否有人看到类似问题。

请指教。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T22:24:46.037

在使用基于 Diffie-Hellman 的密码时，我发现并报告了 Linux 和 Mac OS（但不在 Windows）上的 JDK 1.7 的类似问题。禁用这些密码可能是一种解决方法。请参阅[https://forums.oracle.com/message/11001587?tstart=0](https://forums.oracle.com/message/11001587?tstart=0)

# c++ - sqlite C API, UDATE 数据库

> ID：13089698
> 
> 赞同：2
> 
> 时间：2012-10-26T15:17:53.900
> 
> 标签：c++, sql, database, api, sqlite

我目前正在开发一种在我已经拥有的程序中创建编辑窗口的方法，该程序访问一个 Sqlite 数据库，该数据库设置并包含 4 个信息，条目的 ID，条目的名称（这是用户指定)、文件位置（也是用户输入的）和组成员。在编辑窗口中，有两个标签，一个用于名称的文本输入框和一个用于打开文件浏览器的按钮。我的问题是当我在添加新窗口中设置sql数据库时，所有数据都设置在数据库中，虽然当我想从数据库中编辑数据时，我目前删除旧数据然后添加新数据，虽然查看在线文档我发现了一个 UPDATE 方法，虽然这会更好，但无法以某种方式为数据库获取正确的索引，我如何调用索引 3，我得到一个错误

```
Unhandled exception at 0x01143622 in bv.exe: 0xC0000005: Access violation reading location 0x00000000. 
```

经过一番研究，我发现这是由 NULL 引用指针引起的，我能找到的唯一原因是该字段为空，但我清楚地在添加窗口中设置了它。请帮忙 ：（

```
std::string campaign_sql("SELECT id, name, config, members FROM bv_campaigns");

sqlite3_stmt *prepped_statement;
sqlite3_prepare(mainApp->GetAppData().db_conn, campaign_sql.c_str(), campaign_sql.length(), &prepped_statement, NULL);
//std::string name((const char *)sqlite3_column_text(prepped_statement, 1));
while ( SQLITE_ROW == sqlite3_step(prepped_statement) ) 
{
    std::string name((const char *)sqlite3_column_text(prepped_statement, 1));
    wxMessageBox(name);
    std::string config((const char *)sqlite3_column_text(prepped_statement, 3));
    wxMessageBox(config); 
```

返回 NULL 引用错误

```
std::string name = pds.getCampaignName();
            std::string config = pds.serialize();

            std::string update_sql("INSERT INTO bv_campaigns (name, type, config) VALUES(?,'campaignCallListDataSourcePython',?)");
            sqlite3_stmt *prepped_statement;
            sqlite3_prepare(this->GetAppData().db_conn, update_sql.c_str(), update_sql.length(), &prepped_statement, NULL);

            sqlite3_bind_text(prepped_statement, 1, name.c_str(), name.length(), NULL);
            sqlite3_bind_text(prepped_statement, 3, config.c_str(), config.length(), NULL); 
```

添加数据的地方，序列化和获取活动名称函数从添加窗口获取值，

我认为这就是所需要的一切。如果我缺少任何东西，请询问。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:34:58.203

您需要在调试器中单步执行您的程序。它将显示您在哪一行访问 NULL 指针。在那里，您将能够弄清楚它是如何进入这种状态的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:10:24.440

`sqlite3_column_text(..., 3)`读取第四`SELECT`列的值，即`members`.

此列尚未由您的`INSERT`命令设置，因此是`NULL`.

（另外，在`INSERT`命令中，参数有索引 1 和 2；你从来没有设置`config`过。）

# jquery - jquery 使用构造的 url 自动填充字段

> ID：13089704
> 
> 赞同：0
> 
> 时间：2012-10-26T15:18:08.317
> 
> 标签：jquery, auto-populate

我做得比它必须的要困难得多，所以我停止并从头开始。

我想使用 jquery 自动填充客户端的 url 字段。

当客户输入信息时，我想自动弹出**Complete Url**字段

*例如：* 当他们开始输入时`http://www.yahoo.com/finance`（我希望在输入每个字母时出现在**完整 URL**字段中）然后我需要在输入每个字母时添加来自**URL1**字段的输入然后这个`?cid=(lz)washcom(tz)` *[我将只是将其粘贴在变量中]* ，然后是**url2**字段中的值

*   网址 = [http://www.yahoo.com/finance](http://www.yahoo.com/finance)
*   url1 = 示踪剂
*   url2 = tracer_long_shore
*   $holdVar = ?cid=(lz)washcom(tz)

在所有这些结束时，**完整的 URL**字段将显示为：

```
http://www.yahoo.com/finance/tracer?cid=(lz)washcom(tz)tracer_long_shore 
```

当然，如果他们从字段中删除任何数据，我希望它从完整 URL 字段中清除

有谁知道如何做到这一点：

**jsFiddle在这里：http:** [//jsfiddle.net/justmelat/YWZPR/](http://jsfiddle.net/justmelat/YWZPR/)

**HTML 代码示例：**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
<title>Untitled</title>
</head>
<body>
<table border="1" width="85%">
<tr>
<td>Center Name:</td>
<td><input id="ctrName" type="text" /></td>
</tr>
<tr>
<td>URL:</td>
<td><input id="mainURL" type="text" /></td>
</tr>
<tr>
<td>url1 / url2:</td>
<td><input id="url1" type="text" size="15" /> / <input id="url2" type="text" size="15" /></td>
</tr>
<tr>
<td>Complete URL:</td>
<td><input id="completeURL" type="text" /></td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:13:28.103

我认为[这个更新的小提琴](http://jsfiddle.net/YWZPR/2/)是你正在寻找的。我对所有的排序和东西有点不清楚，但这是否完成了你想要做的事情？

我添加了这个 jQuery 代码：

```
$("input").keyup(
  function(){
        $("#completeURL").val($("#mainURL").val() + "/" + $("#url1").val() + "/?cid=(lz)washcom(tz)" + $("#url2").val());
    }
);​ 
```

每次您创建正确的字符串`keyup`。如果我理解您要正确完成的工作，请告诉我。

# sql - Access 中列出不在两个表中的值的 SQL 查询

> ID：13089705
> 
> 赞同：1
> 
> 时间：2012-10-26T15:18:13.167
> 
> 标签：sql, ms-access

我需要找出哪些司机在过去 6 个月内没有购买燃料。

我有两个表 TransactionReport（过去 6 个月的所有交易）和 DriverList（所有驱动程序）

```
TransactionReport
DriverID  |  DriverLastName | DriverFirstName | Other Columns not used for this query

DriverList
DriverID  |  DriverLastName | DriverFirstName | Other Columns not used for this query 
```

我想返回未在 TransactionReport 中列出的 DriverList 中列出的所有 DriverID。

结果应该给我以下

```
DriverID  |  DriverLastName | DriverFirstName 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:28:46.177

在右表中仅获得 NULL 结果的左外连接应该可以工作

```
select distinct driverlist.driverid, driverlist.driverlastname, driverlist.driverfirstname
from driverlist
left outer join transactionreport
on driverlist.driverid = transactionreport.driverid
where transactionreport.driverid is null 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:36:27.763

```
select 
    DriverID, DriverLastName, DriverFirstName

from
    DriverList

where
    DriverID not in (select DriverID from TransactionReport) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:27:43.623

```
SELECT dl.DriverID , dl.DriverLastName, dl.DriverFirstName FROM DriverList dl
 LEFT JOIN TransactionReport tr ON  dl.DriverID  = tr.DriverID  
WHERE tr.DriverID IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T15:41:52.247

你可以像前面提到的那样做：

```
Select dl.DriverID , dl.DriverLastName, dl.DriverFirstName From DriverList dl
 LEFT Join TransactionReport tr on  dl.DriverID  = tr.DriverID  
WHERE tr.DriverID is Null 
```

哪个会起作用。但是，使用反半联接可以获得更快的结果和更易读的查询。似乎更高版本的 MS Access 支持这一点：

```
SELECT dl.DriverID, dl.DriverLastName, dl.DriverFirstName From DriverList dl
WHERE NOT EXISTS (
     SELECT tr.DriverID 
     FROM TransactionReport tr 
     WHERE tr.DriverID = dl.DriverID) 
```

这里的关键是要注意EXISTS语句里面的WHERE。NOT 逻辑已经在 EXISTS 前面，因此您必须在语句中测试是否相等。

# php - 删除数据后在数据库中使用 id 字段

> ID：13089706
> 
> 赞同：0
> 
> 时间：2012-10-26T15:18:16.990
> 
> 标签：php, mysql, pdo

我有个问题。我创建了一个数据库（my_database），在其中创建了一个表（成员），并创建了字段（id、name、lastname、address）。id 字段设置为自动递增。现在我有 5 行，这意味着 id 的值是 1、2、3、4 和 5。当我删除 id 3 时，剩下的是 '1 2 4 5'。我的问题是我应该怎么做才能将“1 2 4 5”变为“1 2 3 4”？任何帮助将非常感激。

更新：我必须这样做，因为在我的网站上，我使用循环显示所有成员并访问 ID 号。或者甚至可以获取数据的 id 吗？示例我有数据这个数据：id=2，lastname=clyde，address=switzerland。如何仅通过姓氏值获取 id 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:01:05.733

出于多种原因，您真的不想这样做。

首先，如果页面打开，事情可能会出错。假设`id = 4`当您删除条目`id = 3`并按照您的建议更新 id 时，用户正在条目的编辑页面上。现在，当编辑者点击提交时，id 将从他的页面中获取，他将更新新条目 4 而不是旧条目 4。现在这是一个简单明了的例子，但除此之外还有很多东西在这个级别上可能会出错。

其次，在编程时需要做很多工作。首先，您需要更新列。然后，您还需要确保 MySQL 知道给下一个条目提供什么数字。然后所有这些都必须在确保我们不会遇到上述问题那么多问题的环境中工作（这是一件相当困难的事情）。与不做任何事情的替代方案相比，这是很多工作。

第三个问题是存在巨大的性能开销。想象一下，有一个包含成千上万个条目的数据库，然后删除一个低 id 的条目。突然，所有具有更高 id 的条目都必须更新。这很可能意味着您的网站变得无响应，因为它正在执行此任务并且无法同时处理太多其他事情（事实上，为了确保我们不会遇到第一点中的问题，我们必须确保我们不会同时做任何其他事情（或确保我们处理数据的不同副本或其他东西），因为我们最终可能会得到来自整个更新过程的结果。

我的建议将与其他人所说的一致：保持原样，不要担心。`auto_increment`仅用于一个目的：轻松地为每个值赋予唯一标识符。仅使用此标识符来标识和引用同一条目。也许人们也可以对这些标识符进行排序，但无非是有一个特定的顺序（即使这样人们也会不同意这种用法）。

我们应该寻找另一个地方来解决这个问题，而不是尝试更新 id。如果问题纯粹是你的感受，那很容易。您可能对此感觉不好，但您只需要说服自己更新所有这些 id 不是您正在寻找的解决方案。如果您在其他地方使用这些数字，则问题可能会更复杂一些。但是，总是有可能使用 PHP 为每个条目生成数字，如果在生成 html 内容时使用数字，这绝对是这样做的合乎逻辑的地方。如果您提供有关在何处使用序号的更多详细信息，则可以查看在这种情况下如何解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:20:30.030

您可以执行 UPDATE 查询，但大多数开发人员只是将 id 保留原样。如果对您很重要，您可以在 PHP 中进行编号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:46:18.327

您可以通过以下语句手动更新 id 值：

```
update members set id = (id-1) where id > 3; 
```

或者我的建议是保持原样。它不会引起任何歧义。

# android - 如何使用软件按钮构建您的 android 布局？

> ID：13089713
> 
> 赞同：1
> 
> 时间：2012-10-26T15:18:51.050
> 
> 标签：android, layout, button, user-interface

我目前正在做一个需要与平板电脑和手机兼容的项目。我一直在尝试找出如何构建或编程布局以处理软件按钮，因为这些按钮实际上占据了大约 0.5 英寸的屏幕，但我找不到任何好的文档。你真的会做一个全新的布局，当设备有软件按钮时使用那个布局，而当设备有物理按钮时使用另一个布局？

# c# - 在android中创建一个XML文件

> ID：13089715
> 
> 赞同：0
> 
> 时间：2012-10-26T15:18:55.993
> 
> 标签：c#, android, xml, xml-serialization

嗨，C# 的 Android 的 XML 序列化是否有等价物？有点坚持它无法真正找到解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:58:08.087

编辑：对于 XML 编写，我推荐第 3 方，相对较小的库[XML Simple](http://simple.sourceforge.net/)

您可能可以在 Android 示例中使用[XmlDocumentProvider](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.1_r1/com/example/android/xmladapters/XmlDocumentProvider.java)，您可以在 /android-sdk/samples/android-16/XmlAdapters/src/com/example/android/xmladapters/XmlDocumentProvider.java 中的 Android 发行版中找到这些示例

根据 JavaDocs 它是

> 从 XML 文档中提取数据的只读内容提供程序。

您将使用它作为常规内容提供程序（只读），以便您可以查询、过滤等，并获取可以在 CursorAdapter 等内容中使用的游标

# asp.net - 如何在我的 asp.net 项目中使用 rdl/rdlc 生成报告？

> ID：13089717
> 
> 赞同：0
> 
> 时间：2012-10-26T15:19:01.887
> 
> 标签：asp.net, visual-studio-2008, rdlc, rdl

我有一个将使用 MS ReportViewer 的 Web 应用程序。我有另一个团队为我创建了一个 rdl 文件。我将 rdl 重命名为 rdlc 并添加到我的项目中。我创建了一个 DataSet1.xsd 来获取这个 rdlc 所需的数据。在我的 aspx 页面中，我添加了一个 ReportViewer 控件，并将其报告属性设置为 rdlc 文件。

我的问题是：

(1) 是否可以在vs2008中编辑rdl/rdlc？当我打开它时，它以 xml 文件的形式打开。

(2) 如何将dataset1赋值给ReportViewer控件的数据源属性？当我右键单击reportviewer 时，选择选择数据源，dataset1 没有列出。我必须在后面的代码中这样做吗？

(3) 我收到以下错误报告定义无效。详细信息：报表定义具有无法升级的无效目标命名空间“http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:02:04.657

安..

1.  是的，可以在 vs2008 中编辑 rdlc 报告。我不知道rdl。
2.  有关第二个问题的分步解决方案，请参阅[此链接。](http://forums.asp.net/t/1078860.aspx/1)
3.  我认为这个问题是由于从 rdl 到 rdlc 的错误对话造成的。请按照[此](http://msdn.microsoft.com/en-us/library/ms252109%28v=vs.80%29.aspx)链接中指定的步骤进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:27:03.543

Limbani 先生在回答问题 2 和 3 方面做得很好。我相信您的第一个问题可能与您的开发 PC 上未安装 Business Intelligence Design Studio 有关。有关详细信息， 请参阅[此问题和答案。](https://stackoverflow.com/questions/1321045/editing-rdl-files-with-visual-studio-2008?rq=1)

# html - 如何将div定位在绝对位置？

> ID：13089721
> 
> 赞同：2
> 
> 时间：2012-10-26T15:19:22.230
> 
> 标签：html, positioning, absolute

我正在尝试将我的 div 移动到我想要的确切位置（以像素为单位）（坐标应该相对于父 div）。

我试着写这个：

```
<body>
    <div id="desk" style="position: absolute; width:400; height:400; background-color:blue;" >
        <div id="cell1" style="position: absolute; left: 51px; top: 1px; width: 48px; height: 48px; color:black; background-color:black;" />
        <div id="cell2" style="position: absolute; left: 1px; top: 51px; width: 48px; height: 48px; color:black; background-color:black;" />
    </div>
</body> 
```

这是 (51,1) 和 (1,51) 坐标中的两个正方形。

我期望得到这个：

![预期的](../Images/dee212a5c4a4b63d75b8988e4ac01059.png)

但得到了这个：

![在此处输入图像描述](../Images/b01317bf5414a92782fc74f37b39d140.png)

为什么？我做错了什么以及如何正确制作它？

PS 'fixed' 而不是 'absolute' 将完成这项工作，但方块不位于父 div 下方，并且不响应滚动。有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:22:09.050

您将结束标签留在了 div 中，因此`cell2`在内部`cell1`，因此相对于`cell1`and not的边缘定位`desk`。

您不能在 HTML 中使用 XML 自闭合标记语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:24:35.983

您需要正确关闭 DIV 标签：

```
<body>
    <div id="desk" style="position: absolute; width:400; height:400; background-color:blue;" >
        <div id="cell1" style="position: absolute; left: 51px; top: 1px; width: 48px; height: 48px; color:black; background-color:black;"></div>
        <div id="cell2" style="position: absolute; left: 1px; top: 51px; width: 48px; height: 48px; color:black; background-color:black;"></div>
    </div>
</body> 
```

[示例小提琴](http://jsfiddle.net/7za4f/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T15:24:39.900

这对我有用：

```
<div id="desk" style="position: relative; width:400px; height:400px; background-color:blue;" >
    <div id="cell1" style="position: absolute; left: 51px; top: 1px; width: 48px; height: 48px; color:black; background-color:black;"></div>
    <div id="cell2" style="position: absolute; left: 1px; top: 51px; width: 48px; height: 48px; color:black; background-color:black;" ></div>
</div> 
```

1.  关闭`<div>`标签。它认为，第 2 个 div 是第 1 个的孩子。

2.  在中使用 px`width:400px; height:400px;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T15:23:35.780

这是一个小提琴：http: [//jsfiddle.net/GvQ3x/](http://jsfiddle.net/GvQ3x/)

关闭你的`div`（`<div></div>`而不是`<div />`）标签，`px`当你想设置你的容器 div 大小时也使用（或其他任何东西）

# jquery - jquery ajax中的未定义变量

> ID：13089725
> 
> 赞同：0
> 
> 时间：2012-10-26T15:19:31.963
> 
> 标签：jquery

在这我的代码`data`是未定义的，为什么？我无法访问 data.message。

```
$.post("actions.php", {name_madan: madan , postaction:'sabte_madan' },
    function(data){
    if (data.success)
           alert(data.message);
    }); 
```

动作.php

```
case 'sabte_madan':
    $query="SELECT * from maadan WHERE name_madan='{$_POST['name_madan']}'";
    $result=$db->loadAssoc($db->setQuery($query));
    if ( !$result )
    {           
    $data['success']=true;  $data['message']='ok';
    }
    else $data['success']=false;    $data['message']='no';              

break;

if ( isset ($data)) echo json_encode($data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:27:55.417

你错过了“json”数据类型

```
$.post("actions.php", {name_madan: madan , postaction:'sabte_madan' },
    function(data){
        if (data.success)
           alert(data.message);
    },'json'); 
```

# java - 如何要求窗格重新布局

> ID：13089728
> 
> 赞同：0
> 
> 时间：2012-10-26T15:19:40.670
> 
> 标签：java, layout, javafx

似乎在 Javafx2 中，当您将项目添加到窗格时，然后使其不可见，它仍然会占用布局中的空间。有谁知道在孩子隐形后如何要求窗格调整其布局？

下面是一个演示我的问题的示例程序。VBox中有3个按钮。当您单击顶部或中间按钮时，它会变得不可见，但会留下一个间隙。

```
public class VisibilityTest extends Application {

Button button1 = null;
Button button2 = null;
Button button3 = null;
VBox   box     = null;

@Override
public void start(Stage primaryStage) {
    button1 = new Button("Button 1");
    button2 = new Button("Button 2");
    button3 = new Button("Button 3");

    box = new VBox();
    box.getChildren().add(button1);
    box.getChildren().add(button2);
    box.getChildren().add(button3);
    button1.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent t) {
            button1.setVisible(false);
        }
    });
    button2.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent t) {
            button2.setVisible(false);
        }
    });
    button3.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent t) {
            button3.setVisible(false);
        }
    });
    Scene scene = new Scene(box, 300, 250);
    primaryStage.setScene(scene);
    primaryStage.show();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:22:29.673

调用`validate()`更高级别的组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:07:23.423

您需要从场景图中删除控件。

```
parent.getChildren().remove(theControl); 
```

# php - PHP $_GET 数组嵌套参数不起作用

> ID：13089731
> 
> 赞同：1
> 
> 时间：2012-10-26T15:19:56.823
> 
> 标签：php, arrays, apache, parameters

我在带有 LAMP-Stack 的 debian 服务器上遇到了奇怪的行为。

这个简单的测试解释了我的问题：这是我的 test.php 脚本：

```
<?php
  $params = $_GET;
  print_r($params);
?> 
```

如果我发出 url:`http://localhost/test.php?arr[a]=1&arr[b]=2&arr[c]=3&test=xyz` 我希望服务器返回：

```

大批
(
    [arr] => 数组
        (
            [一] => 1
            [b] => 2
            [c] => 3
        )
    [测试] => xyz
)

```

但我只得到：

```
大批
(
    [arr] => 数组
        (
            [一] => 1
        )
    [测试] => xyz
)

```

我检查了 php.ini、apache 配置等等。我不知道为什么没有正确处理参数。甚至我的

```
$_SERVER[REQUEST_URI]
```

变量显示正确的参数，但它们根本没有被处理。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:25:05.263

你一定做错了什么：

当我打电话`www.mysite.com/test.php?arr[a]=1&arr[b]=2&arr[c]=3&test=xyz`

并做一个`print_r($_GET);`

我明白了

```
Array ( [arr] => Array ( [a] => 1 [b] => 2 [c] => 3 ) [test] => xyz ) 
```

**更新**

var_dump 的输出：

```
array(2) { 
  ["arr"]=> array(3) { ["a"]=> string(1) "1" ["b"]=> string(1) "2" ["c"]=> string(1) "3" }
  ["test"]=> string(3) "xyz" 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:42:14.017

我终于弄清楚了问题所在：

**这是 SUSE Enterprise Linux 上 PHP 5.3.8 中的一个错误**。我让管理员升级到 PHP 5.3.17，这种不当行为消失了。

# windows - Qt modal QDialog with Qt::CustomizeWindowHint 在 Windows 上显示错误

> ID：13089740
> 
> 赞同：1
> 
> 时间：2012-10-26T15:20:35.327
> 
> 标签：windows, qt

我有一个 Qt 对话框应用程序，两者都打开了 Qt::CustomizeWindowHint 标志。在这种情况下，最大化时的 QMainWindow 会覆盖任务栏。QDialog 的调用不会导致任何结果。为什么？

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    setWindowFlags(Qt::CustomizeWindowHint);
    showMaximized();
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_pushButton_clicked()
{
    TestDialog dlg(this);
    dlg.exec();
}

TestDialog::TestDialog(QWidget *parent) :
    CustomQDialog(parent),
    ui(new Ui::TestDialog)
{
    ui->setupUi(this);
    setWindowFlags(Qt::CustomizeWindowHint);
}

TestDialog::~TestDialog()
{
    delete ui;
} 
```

示例项目：[http ://rghost.ru/41171471](http://rghost.ru/41171471)

# php - if 语句在连接中间？

> ID：13089747
> 
> 赞同：17
> 
> 时间：2012-10-26T15:21:34.800
> 
> 标签：php, if-statement, concatenation

这不起作用吗？还是我做错了？尝试了它的多种变体，但似乎找不到关于该主题的任何可靠信息。有任何想法吗？

```
 $given_id = 1;
while ($row = mysql_fetch_array($sql))
{
    if ($i < 10){
    $display = '<a href="' . $row['info'] . '" onMouseOver="' . if($row['type']=="battle"){ . 'showB' . } else { . 'showA'() . "><div class="' . $row['type'] . "_alert" . '" style="float:left; margin-left:-22px;" id="' . $given_id . '"></div></a>'; 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-26T15:40:20.190

if 是一个独立的声明。这就像一个完整的陈述。所以你不能在字符串连接之间使用它。更好的解决方案是使用速记三元运算符

```
 (conditional expression)?(ouput if true):(output if false); 
```

这也可以用于字符串的连接。例子 ：

```
 $i = 1 ;
    $result = 'The given number is'.($i > 1 ? 'greater than one': 'less than one').'. So this is how we cuse ternary inside concatenation of strings'; 
```

您也可以使用嵌套三元运算符：

```
 $i = 0 ;
    $j = 1 ;
    $k = 2 ;
    $result = 'Greater One is'. $i > $j ? ( $i > $k ? 'i' : 'k' ) : ( $j > $k ? 'j' :'k' ).'.'; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-26T15:23:55.127

`if..else`是一个*语句*，不能在*表达式*中使用。您想要的是“三元”`?:`运算符： http: [//php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-26T15:24:20.660

使用使用三元运算符的简写 if 语句`?:`-

```
$display = 'start ' . (($row['type']=="battle")? 'showB' : 'showA') . ' end '; 
```

[请参阅http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)上的“三元运算符”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-26T15:24:32.053

`if`是一个声明。不能将语句放在表达式中。

```
$str = 'foo';
if (cond)
{
  $str .= 'bar';
};
$str .= 'baz'; 
```

# javascript - 显示/隐藏 使用 javascript

> ID：13089750
> 
> 赞同：0
> 
> 时间：2012-10-26T15:21:38.803
> 
> 标签：javascript, html, fadein, fadeout

例如，我有一个名为`showcontainer`. 当我单击激活它的按钮时，我希望某个 div 元素，在这种情况下`<div id="container">`，淡入。当我再次单击它时，淡出。我如何实现这一目标？

注意：我不习惯 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:58:38.547

所以你得到了一堆 jQuery 答案。没关系，我也倾向于使用 jQuery 来处理这类事情。但是在纯 JavaScript 中做到这一点并不难，只是更加冗长：

```
var container = document.getElementById('container');
var btn = document.getElementById('showcontainer');

btn.onclick = function() {

    // Fade out
    if(container.style.display != 'none') {
      var fade = setInterval(function(){
        var opacity = parseFloat(container.style.opacity);
        opacity = isNaN(opacity) ? 100 : parseInt(opacity * 100, 10);
        opacity -= 5;
        container.style.opacity = opacity/100;
        if(opacity <= 0) {
          clearInterval(fade);
          container.style.opacity = 0;
          container.style.display = 'none';
        }
      }, 50);

    // Fade in
    } else {
      container.style.display = 'block';
      container.style.opacity = 0;
      var fade = setInterval(function(){
        var opacity = parseFloat(container.style.opacity);
        opacity = isNaN(opacity) ? 100 : parseInt(opacity * 100, 10);
        opacity += 5;
        container.style.opacity = opacity/100;
        if(opacity >= 100) {
          clearInterval(fade);
          container.style.opacity = 1;
        }
      }, 50);
    }

}; 
```

检查[工作演示](http://jsbin.com/oroqod/2/edit)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:26:01.793

你能做的最好的事情就是现在开始并习惯 jQuery。

页面[http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)包含可以在此处编写的所有示例代码。基本上，您希望在 showcontainer 函数中调用 fadeIn。

```
function showcontainer() {
    $('#container').fadeIn();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:32:00.430

如果您不反对使用 jQuery 本身，您可以轻松实现：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function() {
        $('#showcontainer').click(function() {
            $('#container').fadeToggle();
        });
    });
</script>
...
<div id="container">
...
</div>
...

<input type="button" id="showcontainer" value="Show/hide"/>
... 
```

注意 jQuery 源代码开头的缺失`http:`。使用这个技巧，浏览器将自动使用`http:`或`https:`基于原始页面是否安全。

包含 jQuery 之后的代码将处理程序分配给按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T15:24:46.667

你可以看看[jQuery UI Toggle](http://api.jqueryui.com/toggle/)。

该文档使该库的使用变得非常简单，并且有许多代码示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T15:25:14.867

你最好学习 jQuery，因为它让做事变得更容易！

从它的声音来看，您可能已经在 HTML 中拥有容器 div，但样式为“display:none;”，然后使用 ( [jQuery](http://api.jquery.com/fadeIn/) ) 在单击事件中简单地显示它：

```
$('#container').fadeIn('slow', function() {
    //Any additional logic after it's visible can go here
  }); 
```

# javascript - .next() function

> ID：13089751
> 
> 赞同：0
> 
> 时间：2012-10-26T15:21:52.887
> 
> 标签：javascript, jquery

I have the following html code:

```
<span class="retrievedValue"><%= f.text_field :DIRECT_LABEL, :class=>"mandatory", :onblur =>"validate_this_textfield(this.value, this.id);" %></span>
<span style="display: none; float: left;"> <img src="../images/green_tick.png" /></span> 
```

I need to display the 'green_tick.png' image when user fills in the field. For this I used the javascript function below:

```
function validate_this_textfield(field_value, field_id)
{
    if( $j('#' + field_id).val() != "") {

        $j('#' + field_id ).next().show(); // show next element after field
    }
    else{
        $j('#' + field_id ).next().hide();
    }
} 
```

I am using ' .next().show(); ' to show the 'green_tick.png' image, but it does not seem to work.

Any suggestion??

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:25:41.307

尝试：

```
function validate_this_textfield(field_value, field_id)
{
    if( $j('#' + field_id).val() != "") {
        $j('#' + field_id ).removeClass('mandatory');
        $j('#' + field_id ).addClass('mandatory_field_completed')
        .parent().next().show(); // show next element after field
    }
    else{
        $j('#' + field_id ).removeClass('mandatory_field_completed');
        $j('#' + field_id ).addClass('mandatory')
        .parent().next().hide();
    }
} 
```

您想从跨度中获取下一个，而不是跨度内的字段，因此您需要先转到父级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:25:58.063

根据jQuery API docs，该`next`方法：

> 获取匹配元素集中每个元素的紧随其后的兄弟。如果提供了选择器，则仅当它与该选择器匹配时，它才会检索下一个兄弟。

`<img>`标签不是您的领域的兄弟。你必须做这样的事情：

```
$('#fieldID').parent().next().show(); 
```

这是一个工作示例：http: [//jsfiddle.net/wWeyj/](http://jsfiddle.net/wWeyj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:26:03.360

您需要先进入跨度，然后才能使用`.next()`，因为跨度是

```
<span class="retrievedValue"> and not the input itself try this.. 
```

因此，将其添加到您的选择器中.. `.closest('.retrievedValue')`

```
function validate_this_textfield(field_value, field_id)
{
    if( $j('#' + field_id).val() != "") {
        $j('#' + field_id ).removeClass('mandatory');
        $j('#' + field_id ).addClass('mandatory_field_completed')
        .closest('.retrievedValue').next().show(); // show next element after field
    }
    else{
        $j('#' + field_id ).removeClass('mandatory_field_completed');
        $j('#' + field_id ).addClass('mandatory')
        .closest('.retrievedValue').next().hide();
    }
} 
```

# c++ - 为什么我不应该使用 __fastcall 而不是标准的 __cdecl？

> ID：13089752
> 
> 赞同：11
> 
> 时间：2012-10-26T15:21:55.507
> 
> 标签：c++, c, function-calls, cdecl, fastcall

我会听一些人说它比其他调用`__fastcall`更快`__cdecl`，`__stdcall`因为它将两个参数放入寄存器，而不是其他调用之一；但是，另一方面，这不是 C 中使用的标准。

我想知道是什么让`__fastcall`C 中的标准变得不受欢迎，以及何时在我的代码中使用它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T15:31:02.850

x86 平台的不寻常之处在于它没有定义全局 ABI 和调用约定。

Win32/x86 可以，它在`stdcall`. 调用约定之间存在各种权衡——将参数放在寄存器中更快，但它会迫使调用者溢出以前使用这些寄存器的任何内容。所以很难预测哪个性能更好。

重要的是要有一个统一的标准调用约定，以实现不同编译器（甚至不同编程语言）之间的互操作性。

其他平台没有`cdecl`、`stdcall`或`fastcall`约定。它们没有相同的寄存器集。在某些情况下，他们甚至根本没有寄存器。但他们仍然可以使用 C 代码。

Win32/x86_64 不使用`stdcall`，它使用体系结构定义的约定。

Linux/x86 也有一个约定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T15:31:34.087

您是否正在寻找为库接口指定的调用约定？因为对于所有其他函数，我根本不会指定调用约定。编译器的优化过程（例如自动内联）可能会使调用约定无用。

但是关于fastcall：据我记得，它不是标准化的，因此不适合库代码。这是一个很好的概述：[调用约定揭秘](http://www.codeproject.com/Articles/1388/Calling-Conventions-Demystified)

# javascript - 当页面最初在 Jquery 中加载时过滤或搜索值

> ID：13089757
> 
> 赞同：0
> 
> 时间：2012-10-26T15:22:05.600
> 
> 标签：javascript, jquery, date, kendo-ui, pageload

我想在页面加载时过滤日期范围基础并将其显示在页面上。日期正在自动填充，我的问题是在 JQUERY 中使用准备好的文档时无法过滤它，有什么想法吗？

代码：

```
 <label for="from">Start date:</label>

                <input type="text" style="width: 196px;" id="from" />

                <label for="to">End date:</label>

                <input type="text" style="width: 196px;" id="to" />

 //function for datepicker and date range

                $(function() {
                $("#from").datepicker({
                    defaultDate: "-3w",
                    minDate: "-3w",
                    changeMonth: true,
                    numberOfMonths: 1,
                    onSelect: function(selectedDate) {
                        $("#to").datepicker("option", "minDate", selectedDate);
                    }
                }).datepicker('setDate', '-3w');
                $("#to").datepicker({
                    defaultDate: "+1w",
                    maxDate: "currentText",
                    changeMonth: true,
                    numberOfMonths: 1,
                    onSelect: function(selectedDate) {
                        $("#from").datepicker("option", "maxDate", selectedDate);
                    }
                }).datepicker('setDate', '+1w');
            }); 
```

功能尝试....在页面加载时进行调整

```
$(document).ready(function () {
                $filter = new Array();
                $from = new Date(Date.parse($("#from").datepicker('setDate', '-3w')));
                $to = new Date(Date.parse($("#to").datepicker('setDate', 'currentText')));
                $to = $to.setDate($to.getDate() + 1);

                if ($("#from").val()) {

                    $filter.push({ field: "DateEnrolled", operator: "islessthanorequalto", value: $to });
                }
                if ($("#to").val()) {

                    $filter.push({ field: "DateEnrolled", operator: "isgreaterthanorequalto", value: $from });
                }
                var grid = $("#grid").data("kendoGrid");
                grid.dataSource.load($filter);
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:56:59.110

尝试

```
grid.dataSource.filter($filter) 
```

代替

```
grid.dataSource.load($filter) 
```

**2012 年 2 月 11 日更新**

[这是您尝试做的事情。](http://jsfiddle.net/schapman/bxxYt/)

我使过滤器在按下按钮而不是 PageLoad 时执行操作，以便您可以在过滤器操作之前和之后查看数据。

您必须创建一个逻辑“和”过滤器对象并将您的过滤器添加到该对象。

1）创建“和”过滤器对象

```
var customFilter = {
    logic: "and",
    filters: []
}; 
```

2）将过滤器添加到对象

```
customFilter.filters.push({
    field: "DOB",
    operator: "isgreaterthanorequalto",
    value: date1
});

customFilter.filters.push({
    field: "DOB",
    operator: "islessthanorequalto",
    value: date2
}); 
```

3）在网格的数据源上设置过滤器

```
$("#testGrid").data("kendoGrid").dataSource.filter[customFilter]); 
```

抱歉第一个答案太懒了。那天我很着急，只是想找点东西帮忙。希望这有助于更好。

# php - 修改返回数组 CakePHP 2.2

> ID：13089759
> 
> 赞同：0
> 
> 时间：2012-10-26T15:22:14.677
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

我想知道是否有任何简单的方法可以在 CakePHP 中修改和添加新索引到给定数组。

目前我正在做这样的循环：

```
$posts = $this->paginate('Post');

$a=0;
foreach($posts as $post){
    $posts[$a]['Read'] = myfunction($post['Post']['id']);
    $a++;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:26:01.823

你必须循环，但你可以使用更少的代码：

```
$posts = $this->paginate('Post');
foreach($posts as $a=>$post){
    $posts[$a]['Read'] = myfunction($post['Post']['id']);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:21:01.683

与cakephp无关，寻找php周期

# int - 如何在短整数中添加一点

> ID：13089761
> 
> 赞同：1
> 
> 时间：2012-10-26T15:22:22.240
> 
> 标签：int, bit, short

我无法在给定位置放置 1 位。例如，如果***int e***为 1，我将**neset_t* ne**中的第一位 设为 1。

到目前为止，我已经这样做了，但是没有用。

```
typedef unsigned short int neset_t;

    void add(neset_t* ne,int e){

    int num = (int) *ne;
    num = num | e;
    *ne = (neset_t) num;
} 
```

提前致谢。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:44:32.517

e是位位置吗？在这种情况下，您应该使用

> 数 = 数 | (1 << e);

反而

> 数 = 数 | e;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:50:43.440

如果 e 是你应该做的位位置`num |= (1 << e)`

# html - Mozilla firefox 中的浏览器兼容性问题

> ID：13089762
> 
> 赞同：-1
> 
> 时间：2012-10-26T15:22:25.763
> 
> 标签：html, css, browser, cross-browser

我需要在我的应用程序中展开和折叠按钮。

支持 IE 和 chrome，但 mozilla firefox 显示的图像两侧有小空白。

它设置不正确，我的代码如下。

```
<div class="searchdiv">
    <b class="searchlabel">Advanced Search</b>
    <input type="button" class="Expand_button" onclick="javascript: Expand();"/>
</div> 
```

而CSS是，

```
.Expand_button {
    margin-right: 5px;
    cursor: pointer;
    padding-bottom: 10px;
    padding-top: 5px;    
    background: #fff url('../images/Expand.jpg') no-repeat center ;
    height:1px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:36:16.437

首先，内联 Javascript 不好。这就是所谓的“侵入式 Javascript”。相反，编写您的 Javascript 以便它对某个操作做出反应，并将其保存在一个单独的 Javascript 文件中（为了简洁，jQuery 风格）：

```
$(document).ready(function(){
    $('input.Expand_button').click(function(){
      Expand();
    });
}) 
```

然后删除`onclick`元素中的调用，如下所示：

```
<input type="button" class="Expand_button" /> 
```

也就是说，您是否试图通过设置使输入不可见`height: 1px`？如果是这样，那就是你的问题。它仍然存在，并且仍然可见。更重要的是，你有填充和边距，所以当然它仍然会出现。

您想要的是`display: none;`or `visibility: hidden`，具体取决于您正在寻找的确切行为。`display: none;`会将项目完全从 DOM 树中取出，其他元素也会相应地移动。`visibility: hidden;`只会使元素不可见，而不更改 DOM 树。

如果你使用一个库，比如 jQuery，那么你最好使用`display: none;`.，因为你可以使用 jQuery 的内置隐藏/显示函数，这些函数会`display`相应地改变。如果你不这样做，那么无论如何你都是在编写自己的行为反应，所以你可以使用任何你想要的。

# java - 在 Byte[] 中创建后检索我的号码

> ID：13089764
> 
> 赞同：1
> 
> 时间：2012-10-26T15:22:33.870
> 
> 标签：java

我想在 Byte[] 中创建后检索一个基本数字

```
 public static void main(String[] args) throws IOException {
           LinkedList<Byte> s1 = new LinkedList<Byte>();
           String a = "0.111112345";
           for (byte bb : a.getBytes()) {
                s1.add(bb);
            }
 //how to retrieve "0.111112345"; from s1 ? 
```

}

在 Byte[] 中取得我的号码后检索我的号码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:33:12.000

我认为您正在使用`Byte[]`代替`byte[]`：

```
 byte[] t = (byte[]) s1.subList(0, 3).toArray();
    System.out.println(convertByteToInt(t)); 
```

此外，您可能希望使用`parse()`将字符串转换为数字，例如：

```
 String intString= new String(t); //<--get String from byte array
    int numInt = Integer.parseInt(intString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:29:10.923

A`Byte[]`不是 a `byte[]`，但你不需要使用链表和子列表，你可以纯粹用 来做`byte[]`，比如

```
public static void main(String[] args) throws IOException {
  String a = "0.111112345";
  byte[] allBytes = a.getBytes("UTF-8");
  byte[] t = Arrays.copyOf(allBytes, 4);
  System.out.println(convertByteToInt(t));
} 
```

`java.util.Arrays.copyOf`返回给定数组的初始段的副本，该数组被截断或用零扩展至给定长度。

这应该打印结果`808333617`，它是十六进制的十进制表示`302E3131`（字符零、点、一、一的 UTF-8 字节）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:25:52.400

重写这一行：

```
Byte[] t = (Byte[]) s1.subList(0, 3).toArray(); 
```

如下：

```
Byte[] t = s1.subList(0, 3).toArray(new Byte[3]); 
```

方法`toArray()`返回`Object[]`。但是，方法`toArray(array)`返回作为参数传递给它的数组，或者，如果该数组不够长，则返回相同类型的其他数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T15:30:54.367

Byte[] t = s1.subList(0, 3).toArray(new Byte[3]); 然后，看看这个 BigInteger 构造函数[public BigInteger(byte[] val)](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html#BigInteger%28byte%5B%5D%29)

然后，使用： [int intValue();](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html#intValue%28%29)

# java - 在'for'循环java中重新启动当前迭代

> ID：13089765
> 
> 赞同：10
> 
> 时间：2012-10-26T15:22:38.133
> 
> 标签：java, for-loop

我有一个 for 循环，要求用户输入一个数字，然后用它做 10 次

我想要一个内置的检查，如果用户输入一个不被接受的输入，循环应该重新开始它的当前迭代

例如，如果用户在第 3 轮中输入错误，则应重新开始第 3 轮。

我怎么做？java中是否有类似REDO语句的东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T15:24:51.540

像这样的东西？

```
for(int i=0; i<10; i++){
   if(input wrong){
     i=i-1;
   }

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-26T15:27:45.560

你在这里有几个选择。

**Continue** Java 中 的*continue*语句告诉循环返回其起点。但是，如果您使用的是 for 循环，这将继续到下一次迭代，这可能不是您想要的，因此使用 while 循环实现效果更好：

```
int successfulTries = 0;
while(successfulTries < 10)
{
    String s = getUserInput();
    if(isInvalid(s))
        continue;

    successfulTries++;
} 
```

**递减** 这种方法对我来说似乎很难看，但如果您想使用 for 循环完成任务，您可以在检测到错误输入时减少 for 循环中的计数器（本质上是“重做”）。

```
for(int i = 0; i < 10; i++)
{
    String s = getUserInput();
    if(isInvalid(s))
    {
        i--;
        continue;
    }
} 
```

我建议您使用 while 循环。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-26T15:34:36.597

最好避免重新分配`i`变量，这可能会导致混淆。

```
 for(int i=0; i<10; i++){
      String command = null;
      do{
        command = takeCommandFromInput();
      } while(isNotValid(command));
      process(command);
  } 
```

# ruby-on-rails - rails模型中的无视图字段

> ID：13089766
> 
> 赞同：0
> 
> 时间：2012-10-26T15:22:41.197
> 
> 标签：ruby-on-rails

当我使用脚手架创建模型时，如何让某些字段不出现在视图中？我说的是诸如 user_id 之类的字段，我还需要做些什么来保护这个字段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:36:57.983

安迪，您的问题含糊不清，首先您表示您不希望该字段出现在您的视图中，然后您提到通常与 attr_accessible() 相关联的“安全”

要让字段“不显示在您的视图中”，请不要首先将它们写在那里！:) 说真的，我从你的问题中假设你正在使用脚手架。如果是这样，那么只需在脚手架生成视图后从视图中删除字段

# wpf - 转换器参数用法

> ID：13089771
> 
> 赞同：1
> 
> 时间：2012-10-26T15:23:05.543
> 
> 标签：wpf, binding

我有一个关于 ConverterParameter 使用的基本问题。从某种意义上说 - 我总是可以在我的视图模型中创建一个类型的集合，并在绑定期间将其传递给转换器。

然后在我的转换方法中 - 我可以执行多个 if 检查语句并相应地返回

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{

} 
```

所以问题是使用 ConverterParameter 的场景到底是什么，这证明了它的使用是合理的。

请注意 - 我不是在问如何使用 ConverterParameter - 我已经做到了 - 更感兴趣何时使用它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:51:35.183

这是我使用 Converter 参数的一些情况

1.  我有许多用户控件使用的转换器，每个用户控件代表特定的类类型。我使用转换器参数来保存类类型，因此我可以根据参数类型控制转换行为。
2.  我有一个将日期转换为字符串的转换器。我使用转换器参数来定义它是出发日期还是到达日期以返回所需格式的单个字符串

# c# - 如何从列表框中的另一个类调用方法？

> ID：13089778
> 
> 赞同：2
> 
> 时间：2012-10-26T15:23:22.977
> 
> 标签：c#, methods

在我的列表框表单中，我希望能够从不同文件夹中的类调用方法。这是我认为我应该做的事情：

```
public void ListBox_SelectedIndexChanged(object sender, EventArgs e)
{
    SharedClasses.Form.FormConsole newFormConsole = 
        new SharedClasses.Form.newFormConsole();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:27:07.383

您正在创建`FormConsole`该类的新实例，我猜这可能不是您想要做的。

您可能想要做的是让包含您的 ListBox 的表单具有对现有实例的*引用*`FormConsole`。然后您可以调用该实例上的方法。

因此，在包含您的 ListBox 的类中的某处：

```
private FormConsole _myForm; 
```

您可以在类的构造函数中设置它，或者提供一个 getter 和 setter：

```
public FormConsole MyForm
{
    get { return _myForm; }
    set { _myForm = value; }
}
// and/or...
public ListBoxForm(FormConsole myForm) 
{
    MyForm = myForm;
} 
```

然后您可以在 myForm 上调用（公共）方法：

```
public void ListBox_SelectedIndexChanged(object sender, EventArgs e)
{
    MyForm.MyMethod();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:37:47.730

我认为最简单的方法是将其他应用程序文件夹复制到当前应用程序的主文件夹中，然后使用其他应用程序文件夹中的类和以下代码片段：

```
using yourcurrentappname.otherappsfoldername; 
```

现在您可以在当前应用程序中轻松访问其他应用程序类的方法。

# c - C const 返回类型函数

> ID：13089779
> 
> 赞同：1
> 
> 时间：2012-10-26T15:23:32.710
> 
> 标签：c, function, return, constants

以下代码中的“const”会导致什么行为，特别是演员表：

```
const void *foo()
{
   void *bar = NULL;

   // Assign bar to some address here.

   return (const void *)bar;
} 
```

演员阵容有必要吗？编译器会发出警告，指出类型与返回类型不匹配，除非我执行强制转换，但结果行为有什么不同吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T15:27:21.260

演员表不是必需的，甚至是无用的。如果您不强制转换，C 不需要任何警告。

您可以在预期返回值`char *`时返回 a 。`const char *`对于其他类型也是如此：您可以在预期a`T *`时返回 a。`const T *`

C 说 for`return`声明：

> (C99, 6.8.6.4p3) “如果表达式的类型与它出现的函数的返回类型不同，则该值被转换为好像通过赋值给具有该函数的返回类型的对象一样。”

您可以将 a 分配`char *`给 a `const char *`（请注意，相反的情况无效）。C 表示指针赋值：

> （C99，6.5.16.1p1）“以下之一应成立：[...] 两个操作数都是指向兼容类型的合格或非合格版本的指针，并且左侧指向的类型具有所指向类型的所有限定符向右；[...]"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:40:40.797

您正在定义函数，`const void *foo()`它声明您将返回一个`const pointer`. 因此编译器期望返回类型为`const void *`

因此演员阵容。

但是，当您计算指针的值时，您违反了合同-您实际上是在返回`void *`，所以我建议正确的更改是修改声明以删除`const`（从而消除对演员表的需要）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T15:27:49.193

如果没有强制转换，您将返回一个应该是 const 的指针。所以返回类型不匹配。调用者收到一个 const void * 不管（因为那是返回类型），所以通过执行强制转换，您可以摆脱编译器警告，但是您必须确保在执行强制转换时，您知道自己在做什么，因为你在告诉编译器（我知道我在做什么，不要警告我）。

# c# - 从网站更新 Windows 窗体应用程序 UI [屏幕截图]

> ID：13089782
> 
> 赞同：1
> 
> 时间：2012-10-26T15:23:42.407
> 
> 标签：c#, javascript, webclient

我有使用 WebClient 的 GET 请求从网站更新其 GUI 的 Windows 窗体应用程序；然而，其中一些值是使用 JavaScript 在网页中更新的，因此用户不必不断刷新页面来获取它们。我怎样才能让我的程序获得这些值而不必继续发送新的 GET 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:01:02.767

完全按照您的意愿进行操作的最佳方法是对更新您正在抓取的页面上的值的 javascript 进行逆向工程。除此之外，恐怕你正在做的是我们能做的最好的。

从好的方面来说，javascript 只不过是纯文本源代码，所以你可以看一看。但是这样做的合法性取决于你在哪里。在包括美国在内的大多数地方，仅查看在线代码是合法的。复制它不是。但正如甲骨文与谷歌案中的法官所说：将版权应用于单个函数是没有意义的（我是在解释，他说“range_check”而不是“单个函数”）。

如果 javascript 被混淆，则将其复制粘贴到漂亮的打印机中。只是谷歌“javascript漂亮的打印机”。网上有很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:05:47.030

您说您希望能够像在 JavaScript 中一样在 C# 中做某事，但您不想“不断发送新的 GET 请求”。问题是，这*正是*JavaScript 正在做的事情。它只是碰巧在幕后异步进行。你可以用 C# 做同样的事情。JavaScript 只是在后台执行 GET 或 POST 请求，您可以使用 C# 执行相同的请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T17:00:29.933

或者，您可以简单地从隐藏的 Web 浏览器中将计时器设置为 GetElementById

# python - 如何为熊猫时间序列制作动画？

> ID：13089789
> 
> 赞同：4
> 
> 时间：2012-10-26T15:24:01.553
> 
> 标签：python, matplotlib, time-series, pandas

我有以日期时间列作为索引的熊猫时间序列：

```
2010-09-20    1828.27
2010-09-21    1843.30
2010-09-22    1898.05
2010-09-23    1897.00
2010-09-24    1902.00
2010-09-27    1828.96
2010-09-28    1824.85
2010-09-29    1808.17
2010-09-30    1833.04 
```

如何使用[简单的](http://matplotlib.org/examples/animation/simple_anim.html)matplotlib 示例为该数据集设置动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T23:13:18.570

[对于简单的列与列，您可以在此处http://www.scipy.org/Cookbook/Matplotlib/Animations](http://www.scipy.org/Cookbook/Matplotlib/Animations)尝试“pylab 中的 Gui 中性动画”下的第一个代码片段

这只会通过更新行来制作动画（非常有效），没有保存到文件的选项。

# sql - SQL Server - 使用 WHILE 循环问题执行语句

> ID：13089792
> 
> 赞同：1
> 
> 时间：2012-10-26T15:24:10.177
> 
> 标签：sql, sql-server

我正在尝试编写一个脚本，该脚本可用于在我们的合并复制快照代理完成将快照应用于订阅者后恢复对存储过程的权限。这个 SQL 需要有点动态。

目前，我正在选择我们所有存储过程的列表，并将它们与“授予”权限的字符串语句一起插入到临时表中。我正在尝试遍历该表上的所有行，使用 EXEC() 命令一一执行语句。我不断收到错误

> *不使用 EXISTS 引入子查询时，选择列表中只能指定一个表达式*

但我的 SQL 语句看起来应该没问题。也许我不明白 WHILE 在 SQL Server 中的工作原理。

这是我的代码：

```
BEGIN
CREATE TABLE sqltemp (id int IDENTITY(1, 1) , Stmt1 varchar(max), Stmt2 varchar(max),  Stmt3 varchar(max))

INSERT INTO sqltemp 
   SELECT 
      'GRANT EXECUTE ON OBJECT::' as Stmt1, name as Stmt2, 'TO edoc_only_execute' as Stmt3
   FROM sys.sysobjects
   WHERE 
      type = 'P' AND name NOT LIKE 'MSMerge%'

DECLARE @counter int = 1
WHILE (@counter < (SELECT COUNT(*) FROM sqltemp))
BEGIN
    DECLARE @sqlrun varchar(max)
    SET @sqlrun = (SELECT Stmt1, Stmt2, Stmt3 FROM sqltemp WHERE id = @counter)
    EXEC(@sqlrun)
    SET @counter = @counter + 1
END
END
GO
DROP TABLE sqltemp 
```

两个问题：

1.  如何为临时表中的每个项目执行上述脚本？

2.  应用快照后，是否有更好的编写脚本来恢复数据库中每个存储过程的权限的方法（注意：我必须能够使用 SQL 系统表来提取存储过程名称）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:30:35.333

你不能说

```
SET @sqlrun = (SELECT Stmt1, Stmt2, Stmt3 FROM sqltemp WHERE id = @counter) 
```

你将不得不连接它们

```
SELECT @sqlrun = Stmt1 +' '+ Stmt2 +' '+ Stmt3 FROM sqltemp WHERE id = @counter 
```

更好的解决方案可能是？

```
GRANT EXEC TO edoc_only_execute 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:29:28.410

为您的第一个问题更正了查询

```
 BEGIN
    CREATE TABLE sqltemp (id int IDENTITY(1, 1) , Stmt1 varchar(max), Stmt2 varchar(max),  Stmt3 varchar(max))

    INSERT INTO sqltemp SELECT 'GRANT EXECUTE ON OBJECT::' as Stmt1, name as Stmt2, 'TO edoc_only_execute' as Stmt3
                        FROM sys.sysobjects
                        WHERE type = 'P' AND name NOT LIKE 'MSMerge%'

    DECLARE @counter int = 1
    WHILE (@counter < (SELECT COUNT(*) FROM sqltemp))
    BEGIN
        DECLARE @sqlrun varchar(max)
        SELECT @sqlrun = Stmt1 + Stmt2 +' '+ Stmt3 FROM sqltemp WHERE id = @counter
        PRINT @sqlrun
        EXEC(@sqlrun)
        SET @counter = @counter + 1
    END
    END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:35:43.100

@010001100110000101110010011010 和 @podiluska 打败了我，但是......

```
SELECT COUNT(*) FROM sqltemp 
```

在此之外：

```
SET @end = SELECT COUNT(*) FROM sqltemp
WHILE (@counter < @end)
    ... 
```

无需为每次循环迭代重新计算结束条件。

# c# - XNA 2D Basic 碰撞列表

> ID：13089797
> 
> 赞同：2
> 
> 时间：2012-10-26T15:24:36.457
> 
> 标签：c#, xna, collision-detection

我是编程世界的初学者，现在我正在尝试用 C# 进行 XNA 编程，现在我正在开发一个基本游戏，玩家是飞机或宇宙飞船，你必须击落流星。

目前我正在尝试盒子碰撞检测，但我不太清楚，我不知道如何获取列表中每个项目的位置，我需要你的帮助！

所以基本上我有一个shiptexture和一个meteortexture。modeltexture 被绘制了 10 次，并获得随机位置。我想在每颗流星周围制作矩形，但我不知道怎么做。我尝试使用下面显示的 foreach 循环，但是当我与它碰撞时只有一颗流星起作用。对不起，如果我的英语不是最好的，我感谢大家的帮助！

```
List<Vector2> meteor_pos = new List<Vector2>();

              //loadcontent
            for (int i = 0; i < 10; i++)
            {
                meteor_pos.Add(new Vector2(myRnd.Next(800), myRnd.Next(600)));
                double tmp_angle = (myRnd.Next(1000) * Math.PI * 2) / 1000.0;
                double tmp_speed = 0.5 + 3.0 * (myRnd.Next(1000) / 1000.0);
                meteor_speed.Add(new Vector2((float)(tmp_speed * Math.Cos(tmp_angle)),
                (float)(tmp_speed * Math.Sin(tmp_angle))));
            }

              //protected override void Update(GameTime gameTime)
              for (int i = 0; i < meteor_pos.Count; i++)
                {
                    meteor_pos[i] += meteor_speed[i];
                    Vector2 v = meteor_pos[i];
                    //Outside the screen?
                    if (v.X < -80)
                        v.X = graphics.GraphicsDevice.Viewport.Width + 80;
                    if (v.X > graphics.GraphicsDevice.Viewport.Width + 80)
                        v.X = -80;
                    if (v.Y < -60)
                        v.Y = graphics.GraphicsDevice.Viewport.Height + 60;
                    if (v.Y > graphics.GraphicsDevice.Viewport.Height + 60)
                        v.Y = -60;
                    //Uppdate the list
                    meteor_pos[i] = v;

               }
                foreach (var item in meteor_pos)      
                 {
                     meteor_rect = new Rectangle((int)item.X, (int)item.Y, gfx_meteor.Width, gfx_meteor.Height);
                 }

                gfx_rect = new Rectangle((int)position.X, (int)position.Y, gfx.Width, gfx.Height);

                if (gfx_rect.Intersects(meteor_rect))
                {
                    position.X = 0;
                    position.Y = 0;
                }

    //protected override void Draw(GameTime gameTime)

                for (int i = 0; i < meteor_pos.Count; i++)
            {
                spriteBatch.Draw(gfx_meteor, meteor_pos[i], null, Color.White, 0,
                new Vector2(gfx_meteor.Width / 2, gfx_meteor.Height / 2), 1.0f, SpriteEffects.None, 0);
            }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:40:00.527

您的方法非常混乱，您将要创建一个类，至少可能是一个处理位置和其他一些基本信息的精灵类。

但是，要解决您当前的问题，您将在 foreach 循环中覆盖 meteor_rect 的值，然后只在最后检查一次碰撞。

所以切换你的代码看起来像这样：

```
gfx_rect = new Rectangle((int)position.X, (int)position.Y, gfx.Width, gfx.Height);

foreach (var item in meteor_pos)      
    {
        meteor_rect = new Rectangle((int)item.X, (int)item.Y, gfx_meteor.Width, gfx_meteor.Height);

        if (gfx_rect.Intersects(meteor_rect))
            {
                position.X = 0;
                position.Y = 0;
            }
    } 
```

但就像我说的，请查看一个基本教程来帮助你:)

# printing - Lua在文件读取之前不打印

> ID：13089798
> 
> 赞同：4
> 
> 时间：2012-10-26T15:24:36.450
> 
> 标签：printing, io, lua

在运行打开和读取文件之前让 Lua 打印时遇到问题。这将打印字符串 "Reading File..." 和 "File Read!" 但只有在它完成 getFileString() 函数之后。我希望它在运行之前打印“正在读取文件...”。我把它缩小到 file:read("*a") ，它弄乱了我（更大的）脚本中的所有打印。

```
function getFileString(path)

    local file, err = io.open(path, "r")
    local all = file:read("*a")
    file:close()

    return all

end

function main()

    local directory = "C:\\Documents and Settings\\All Users\\Documents\\"

    print("Reading File...")
    local file_all = getFileString(directory.."myFile.txt")
    print("File Read!\n")

end

main() 
```

我是否功能化似乎也无关紧要。我应该提一下，这主要是因为我正在阅读一个 150MB 左右的文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T17:48:16.273

我认为输出只是缓冲。尝试`io.stdout:setvbuf('no')`在打印前添加，这应该会关闭输出缓冲。

# c# - AppHarbor MassTransit CloudAMQP 抛出异常 指定的端点均不可访问

> ID：13089807
> 
> 赞同：1
> 
> 时间：2012-10-26T15:24:55.970
> 
> 标签：c#, exception, appharbor, masstransit, cloudamqp

我正在尝试从我的 AppHarbor 应用程序中将 Masstransit 与 CloudAMQP LEMUR 一起使用，但我收到了异常：

*“指定的端点均不可到达”*

这是 Masstransit 的配置方式：

```
Bus.Initialize(sbc =>
                     {
                         sbc.UseRabbitMq();
                         sbc.UseRabbitMqRouting();
                         sbc.ReceiveFrom("rabbitmq://********-243c-4e49-87fd-ed809c4839f1_apphb.com:EKhooikZAc9SM5t2YW2uc7RGoeFLD7Nv@bunny.cloudamqp.com/7752f6ce-243c-4e49-87fd-ed809c4839f1_apphb.com");
                         sbc.Subscribe(subs => subs.Handler<CreateTweetCommand>((message) => ....................................... 
```

我使用的版本是：MassTransit 2.6.3
MassTransit.RabbitMQ.2.6.3
RabbitMQ.Client.2.8.7
Magnum.2.0.1.0

我该如何解决这个错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T13:10:37.213

最后它正在工作，感谢@Carl Hörberg 评论。

我创建了一个队列并添加到我的 rabbitmq URL，现在一切正常。

感谢小伙伴们的支持

# javascript - 使用自己的方法扩展 jQueryUI Widget

> ID：13089808
> 
> 赞同：3
> 
> 时间：2012-10-26T15:25:01.427
> 
> 标签：javascript, jquery, jquery-ui

我正在构建一个小部件，但来自 OOP 背景，通过函数调用访问方法似乎很奇怪。

```
// create the widget in target_id
myWidget = jQuery('#target_id').superWidget();

// this works and accesses do_something, but it's long and redundant.
// After all, myWidget is already a superWidget
myWidget.data('superWidget').do_something('hello');

// also works, but is awkward
myWidget.superWidget('do_something', 'hello');

// what I want to be able to do:
myWidget.do_something('hello'); 
```

我认为应该可以通过在调用 _create 时自行扩展小部件来做到这一点，但我实际上不确定如何让它工作。

是否可以？如何？我应该避免这是一个真正可怕的想法吗？为什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:13:21.823

我们不提供此 API 的原因是它会产生冲突。如果小部件提供与现有 jQuery 方法同名的方法会发生什么？如果在同一个元素上初始化多个小部件会发生什么？

话虽如此，小部件是纯粹的 OO，带有一个提供通用 jQuery API 的包装器。如果您只想使用 OO 语法，则可以。

```
var widget = $.ns.superWidget( {}, "#elem" );
widget.doSomething( "hello" ); 
```

该`$.ns.superWidget`函数是一个实际的构造函数。将其作为函数调用只会导致另一个调用 with`new`以强制构造函数行为。

您可能有兴趣阅读[jQuery UI 1.9 升级指南](http://jqueryui.com/upgrade-guide/1.9/#improved-api-for-direct-instantiation)，其中列出了直接构建小部件实例的各种方法。

*注意：如果您使用的是 jQuery UI 1.8.x，元素参数将不接受选择器，您必须传递一个 DOM 元素。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:34:36.127

抱歉，jQueryUI Widget Factory 接口不支持您调用小部件方法的方式。

[http://api.jqueryui.com/jQuery.widget/](http://api.jqueryui.com/jQuery.widget/)

# wso2 - WSO2 ESB SFTP 侦听器未触发

> ID：13089816
> 
> 赞同：1
> 
> 时间：2012-10-26T15:25:41.757
> 
> 标签：wso2, sftp, wso2esb, vfs

我正在使用 WSO2 测试一些示例用例，其中 ESB 必须扫描 SFTP 文件夹并执行一些操作。这是我所做的：

1）我在axis2.xml中启用了VFS传输监听器：

```
<transportReceiver name="vfs" class="org.apache.synapse.transport.vfs.VFSTransportListener"/>
<transportSender name="vfs" class="org.apache.synapse.transport.vfs.VFSTransportSender"/> 
```

2）我插入了以下代理（出于显而易见的原因，我更改了 user:pass）：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="SFTPVFSProxy" transports="vfs" statistics="disable" trace="enable" startOnLoad="true">
   <target>
      <inSequence>
         <log level="full" />
      </inSequence>
   </target>
   <parameter name="transport.vfs.ActionAfterProcess">MOVE</parameter>
   <parameter name="transport.PollInterval">3</parameter>
   <parameter name="transport.vfs.MoveAfterProcess">vfs:sftp://user:pass@10.254.241.69:22/home/user/sftp/out</parameter>
   <parameter name="transport.vfs.FileURI">vfs:sftp://user:pass@10.254.241.69:22/home/user/sftp/in</parameter>
   <parameter name="transport.vfs.MoveAfterFailure">vfs:sftp://user:pass@10.254.241.69:22/home/user/sftp/out</parameter>
   <parameter name="transport.vfs.FileNamePattern">.*.txt</parameter>
   <parameter name="transport.vfs.ContentType">text/plain</parameter>
   <parameter name="transport.vfs.ActionAfterFailure">MOVE</parameter>
</proxy> 
```

在 4.5.0 和 4.5.1 两个版本中都不会触发任何内容。除了代理已成功部署的一些信息外，日志文件中没有输出。**完全相同的脚本适用于版本 3.0.1。**

此外，如果我将“sftp”更改为“ftp”或本地文件，监听器也会在 v4.X 中正常触发，这让我相信它可能是特定于 sftp 处理的东西。

我做错了什么还是软件中有错误？

先感谢您，

托多里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:23:10.187

我认为问题在于您定义 transport.vfs.FileURI 属性的方式。假设您的用户的用户名是“user”，那么当您登录到 sftp 时，您会转到 /home/user 文件夹。因此，尝试如下定义上述属性。

```
<parameter name="transport.vfs.FileURI">vfs:sftp://user:pass@10.254.241.69:22/sftp/in</parameter> 
```

或者

```
<parameter name="transport.vfs.FileURI">vfs:sftp://user:pass@10.254.241.69:22/in</parameter> 
```

我不能说出确切的配置，因为我不知道您的文件夹结构。我已经在带有 SFTP 的 WSO2 ESB 4.0.3 中尝试过这个。我的用户名是amilaftp。所以我将属性定义如下。

```
<parameter name="transport.vfs.FileURI">vfs:sftp://amilaftp:password@localhost/in?vfs.passive=true</parameter> 
```

当您尝试使用 FTP 时，您需要提供完整路径，就像您在提供的配置中所做的那样。这就是为什么它在 WSO2 ESB 4.X 中使用 FTP 为您工作的原因。如果这在 4.0.3 中适用于您，那么它也应该适用于 4.5.x。我建议您先尝试 4.0.3，因为它对我有用。

# objective-c - 如何获取访问令牌 Dropbox User IOS

> ID：13089817
> 
> 赞同：0
> 
> 时间：2012-10-26T15:25:41.043
> 
> 标签：objective-c, ios, dropbox

我几乎可以使用 Dropbox 框架连接、断开连接、下载等来完成所有操作。我想获取访问令牌，但以下方法返回`null`

在 .m 文件之一中

```
//try to get access token
    MPOAuthCredentialConcreteStore *credentials=[[MPOAuthCredentialConcreteStore alloc] init];
    NSLog(@"access token %@",credentials.accessToken); 
```

知道如何让用户访问令牌吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:47:32.930

您可能无法获得 accessToken 但您可以获得用户信息

```
[self.restClient loadAccountInfo];

- (void)restClient:(DBRestClient*)client loadedAccountInfo:(DBAccountInfo*)info {
    NSLog(@"UserID: %@ %@", [info displayName], [info userId]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:34:52.737

您可以通过此委托获取您的访问令牌.....

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url
{

    if ([[DBSession sharedSession] handleOpenURL:url])
    {
        if ([[DBSession sharedSession] isLinked])
        {
            // At this point you can start making API calls

            NSLog(@"App linked successfully!");
    }
    // Add whatever other url handling code your app requires here
    }
    return NO;
} 
```

返回的 url 有访问令牌、秘密令牌和用户 ID

# oracle - Oracle - 检查约束最大 x 字数

> ID：13089820
> 
> 赞同：0
> 
> 时间：2012-10-26T15:25:53.133
> 
> 标签：oracle, constraints, check-constraints

我想添加一个检查约束来检查一个字段是否有最大数量的 X 个空格“”。我在 oracle 网站上找不到任何关于它的信息。有人知道这是否可能吗？也许通过 PL/SQL 函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T15:44:04.903

如果您通过计算空格数来定义一个单词，那么您可能会执行以下操作：

```
constraint check_ws_count check (length(regexp_replace(field,'[^ ]','')) <= 99) 
```

但是，这并没有考虑双倍间距等。也许您可以将其调整为更健壮，但这似乎不是一个好主意！

* * *

**编辑**使用`regexp_count`并考虑多个间距：

```
constraint check_ws_count check (regexp_count(field, '\s+') <= 99) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:43:17.220

可能这样的事情应该可以解决问题：

```
check (length(field) - length(replace(field, ' ', '')) <= 99) 
```

这种方法也适用于那些停留在 Oracle 9i 或更早版本的数据库上而没有`regexp_`函数系列的人。

# objective-c - 在运行时编辑 Passbook Pass (.pkpass) 文件？

> ID：13089829
> 
> 赞同：3
> 
> 时间：2012-10-26T15:26:08.210
> 
> 标签：objective-c, ios, passbook

我知道如何`.pkpass`使用 Mac 上的工具制作文件，然后将它们压缩并签名（使用**signpass**工具），但是如何在 iOS 应用程序运行时编辑文件？

我意识到在 Apple[文档](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/YourFirst.html#//apple_ref/doc/uid/TP40012195-CH2-SW1)中，他们希望您使用服务器进行任何更新/编辑，但这不是我的目标（我意识到那里的安全问题，这不是这个问题的重点） .

我该怎么做（我不是要代码）？在文档中，这是唯一提到（我见过的）在运行时实际操作传递的内容：

```
In a production environment, the signing and compressing would be part of the system that generates passes. 
```

关于如何做到这一点的任何想法？是否有任何第三方 API 允许这样做（我检查了 Passdock 和 Passsource，但 Passdock 没有 Obj-C API 并且 Passource 不太清楚）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T23:30:26.930

正如您已经说过的，Apple 不希望您在 ios 应用程序中创建自己的 .pkpass 文件。当然可以这样做，Apple 不能不允许您包含或获取证书，尽管如果他们愿意，他们当然可以拒绝您的应用程序。

您可以调整来自任意数量的文章/教程的代码来构建各种文件，创建签名（可能是最神秘和最困难的部分），并在您的应用程序中创建一个 .pkpass 文件。如果它所依赖的框架在 iPhone SDK 中，signpass 应用程序中的一些代码可能可以按原样重复使用。

也许您可以查看一些已经存在的服务，这些服务通过可以从手机使用的高级 API 提供通行证生成。 [这个](http://www.passsource.com/apiInfo.php)，例如，我没有保证或背书。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:37:34.703

您将无法编辑 .pkpass 文件，因为它已被签名。如果更改它，签名将无效。

您可以做的唯一编辑是 pre-pkpass 生成。如果您可以在运行时创建 .pkpass 文件，则可以在签名**之前对其进行编辑。**否则，使用推送通知在生成后编辑它们的唯一其他选项，但这仅允许编辑特定字段。

# ios - iOS 中使用 UIDatePicker 的奇怪泄漏

> ID：13089834
> 
> 赞同：1
> 
> 时间：2012-10-26T15:26:34.170
> 
> 标签：ios, instruments

我的应用程序中有 UIDeviceRGBColor 泄漏。

这似乎是 UIKIt 的问题。

下面是问题：

![在此处输入图像描述](../Images/3af9c7a5beefd94ccb171c74a3643c69.png)

泄漏位于棕色提到的代码中：

![在此处输入图像描述](../Images/358d319f7d90aa24a4b8640ea44ece02.png)

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:52:04.330

是的，我也有同样的问题...

设备上的 iOS 6.0，但我的泄漏：

```
[pickerDate setDatePickerMode:UIDatePickerModeDate];
[pickerDate setMinimumDate:minimumDate];
[pickerDate setMaximumDate:today];

[pickerDate setDate:currentDateObject animated:YES]; // here is the leak, if I remove this line there is no leak, and leaks also a UIDeviceRGBColor 
```

可能重复，请参阅[此问题](https://stackoverflow.com/questions/12830278/uidatepicker-leaks)

**对不起，这应该是评论而不是答案**

# java - 将String（表示十进制数）转换为long

> ID：13089837
> 
> 赞同：2
> 
> 时间：2012-10-26T15:26:47.697
> 
> 标签：java, string, parsing, converter, long-integer

我用谷歌搜索了一下，但找不到找到解决方案的例子。这是我的问题：

```
String s = "100.000";
long l = Long.parseLong(s); 
```

尝试将字符串 's' 解析为 long 的第二行代码会引发**NumberFormatException**。

有没有解决的办法？问题是表示十进制数的字符串实际上是以毫秒为单位的时间，所以我不能将它转换为 int 因为我失去了精度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T15:28:13.850

您可以使用 BigDecimal 来处理双重解析（没有您可能会遇到的精度损失风险`Double.parseDouble()`）：

```
BigDecimal bd = new BigDecimal(s);
long value = bd.longValue(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T15:47:36.813

我不知道你的 100.000 等于 100 还是 100 000 我认为最安全的解决方案是：

```
NumberFormat nf = NumberFormat.getInstance();
Number number = nf.parse("100.000");
long l = number.longValue(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T15:30:14.353

'long' 是整数类型，因此字符串解析由于小数点而被拒绝。选择更合适的类型可能会有所帮助，例如双精度型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T15:29:39.723

只需删除数千个的所有占位符，点...

```
s.replaceAll(".",""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T17:54:06.453

您应该使用 NumberFormat 来解析值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-12T17:42:35.303

我们可以使用正则表达式来去除小数部分。然后使用 parseLong

Long.parseLong(data.replaceAll("\..*", ""));

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-10-26T15:36:13.420

如果您不想放松压力，那么您应该使用`multiplication`

```
 BigDecimal bigDecimal = new BigDecimal("100.111");
    long l = (long) (bigDecimal.doubleValue() * 1000);<--Multiply by 1000 as it
                                                         is miliseconds
    System.out.println(l); 
```

输出：

```
100111 
```

# git - Git 克隆因“错误包头”而失败，如何获取远程日志

> ID：13089838
> 
> 赞同：2
> 
> 时间：2012-10-26T15:26:47.337
> 
> 标签：git, version-control

我的构建系统有问题。

我有一个具有相对较大存储库的远程服务器（大约 12 GB，每个分支的大小为 3 GB）。

我还有 2 个构建服务器（Mac、Windows），它们正在从远程克隆 repo。

我正在使用[scm-manager](https://bitbucket.org/sdorra/scm-manager/wiki/Home)来管理我的存储库。

有时（经常同时发送几个 git clone 时），我有以下错误：

```
remote: internal server error
fatal: protocol error: bad pack header 
```

我知道当遥控器压缩对象时会发生这种情况（感谢`--progress -v`标志），因为错误之前日志的最后一行是：

```
remote: Compressing objects:  93% (17959/19284)   [K 
```

*   所以我有两个问题，有人知道问题出在哪里，我该怎么办？
*   有没有办法从远程获取更精确的日志来调试这个问题？

我将此消息发布到 git 用户邮件列表，有人建议我更新我的 git 版本。我在远程服务器上尝试了 1.8.0，但似乎没有解决问题。

该错误已报告给 git mailing list (这与 git user mailing list 不同:))

希望以后有更多的消息。

在与 git 人员讨论之后，问题似乎来自 scm-manager。我最终使用了 ssh 连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:08:56.933

替换 scm-server/bin/scm-server 或 scm-server/bin/scm-server.bat 中的字符串

```
EXTRA_JVM_ARGUMENTS="-Djava.awt.headless=true -Dlogback.configurationFile=logging.xml"

EXTRA_JVM_ARGUMENTS="-Djava.awt.headless=true -Dlogback.configurationFile=logging.xml -Xmx1024m -Xms1024m" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T13:53:48.883

尝试增加 SCM-Manager 的日志级别。查找文件 logback.xml，它位于应用程序服务器存储 scm webapp 的 WEB-INF/classes 文件夹中（例如 /var/lib/tomcat7/webapps/scm/WEB-INF/classes/logback.xml 时您在 ubuntu 下使用 Tomcat 7）或独立版本的 conf/logging.xml 文件夹下。代替

```
<logger name="sonia.scm" level="INFO" /> 
```

和

```
<logger name="sonia.scm" level="TRACE" /> 
```

重新启动，重试并检查日志文件。

# vhdl - 使用blockram在VHDL中按位矩阵转置

> ID：13089860
> 
> 赞同：1
> 
> 时间：2012-10-26T15:27:45.887
> 
> 标签：vhdl

我一直在试图找出一种使用块 ram（或类似的）在 VHDL 中转置大量数据的好方法。

使用向量的向量相对容易，但是对于大量数据来说会很麻烦。

我想使用双通道块内存，以便我可以写入一个块并读出另一个块。写入 8 位 std_logic_vectors，读出 32 位 std_logic_vectors，其中 32 位是（至少对于第一次旋转）输入向量的 MSB 0 - 31，然后是 32 - 63，一直到 294911，然后是 MSB-1，等等。

上面描述的案例是我的理想场景。这甚至可能吗？我似乎找不到这样做的好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:09:04.320

在这个答案中，我假设 18kbit Xilinx 风格的 BRAM。我对 Virtex-4 最为熟悉，所以以下我指的是 UG070。答案将微不足道地映射到其他 Xilinx FPGA，可能还有其他供应商的部件。

首先要注意的是，Virtex-4 BRAM 可用于双端口模式，每个端口具有不同的几何形状。然而，对于 1 位宽的端口，这些 RAM 的奇偶校验位没有用处。因此，18kbit BRAM 在这里实际上只有 16kbits。

接下来，考虑仅用于存储所需的 BRAM 数量（无论您的设计如何）。294912x8 位映射到 144 个 BRAM，这是一个相当大的资源承诺。吞吐量、设计复杂性和资源需求之间始终存在平衡；如果您需要从设计中挤出每 MBit/sec，那么基于 BRAM 的方法可能是理想的选择。如果没有，您应该考虑您的吞吐量和延迟要求是否允许您使用片外 RAM 而不是 BRAM。

如果您*确实*计划使用 BRAM，则应考虑使用 18x8 BRAM 阵列。8 列各存储一个输入位。每个 BRAM 通过 1 位端口写入，并通过 32 位端口读出。

每个 8 位写入映射到 8 个 1 位写入（每列写入一个 BRAM。）

每个 32 位读取都映射到来自*单个*BRAM的*单个*32 位读取。

 *您应该需要很少的排序逻辑（围绕 RAMB16 原语）才能使其正常工作。主要的复杂性是如何在 1 位端口和 32 位端口之间映射地址位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:33:59.953

经过一番研究和思考，这是我对这个问题的回答：

由于块 ram 寻址的性质，OP 中提到的理想场景对于当前的块 ram 寻址实现是不可能的。为了以所述方式执行按位矩阵转置，块 ram 寻址将需要能够在水平和垂直之间切换。也就是说，ram 必须可以按行和按列访问，并且寻址模式必须是可实时切换的。由于按位数据转置并不是真正“有用”的变换，因此没有真正的理由来实施这种切换方案。特别是因为块 RAM 的全部目的是将数据存储在超过 1 位的块中，并且这样的转换会打乱数据。

我发现了一种改变我的设计的方法，这样 294911 x 8 位不需要立即转换，而是使用一个过程分阶段完成。这不依赖于块 ram 来执行转换。*

# c# - 使用 Linq 时 SQL View 是否比 Table 快？

> ID：13089863
> 
> 赞同：0
> 
> 时间：2012-10-26T15:27:48.443
> 
> 标签：c#, sql-server, wpf, linq, view

我的 WPF 应用程序有一个用于选择客户的查找屏幕。客户表包含近 10,000 条记录。使用我的 Linq 查询加载和过滤记录时它非常慢（我没有对记录进行任何排序）。有没有办法提高速度？听说过使用索引视图。有人可以提供一些想法吗？

```
lstCustomerData = dbContext.customers.Where(c => c.Status == "Activated").ToList();
            dgCustomers.ItemsSource = lstCustomerData; 
```

过滤：

```
 string searchKey = TxtCustName.Text.Trim();

            var list = (from c in lstCustomerData
                        where (c.LastName == null ? "" : c.LastName.ToUpper()).Contains(searchKey.ToUpper())
                        select c).ToList();
            if (list != null)
                dgCustomers.ItemsSource = list; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:30:56.177

取决于什么是慢的。SQL 查询慢吗？UI渲染慢吗？您是在内存中排序/筛选还是返回数据库？

您应该分析您的应用程序以准确找出最慢的部分是什么，然后首先解决它。

如果您添加的 Linq 查询速度较慢，那么向`Status`数据库中的列添加索引可能会有所帮助。

通过更改您的`Where`子句，您可能会得到一些改进：

```
var list = (from c in lstCustomerData
            where (c.LastName != null && c.LastName.ToUpper()).Contains(searchKey.ToUpper())
            select c).ToList();
if (list != null)
    dgCustomers.ItemsSource = list; 
```

因为它不必比较空字符串。但是，如果您的 NULL 记录很少，那么这可能无济于事。

然而，在这种情况下，所有过滤都在内存中完成，因此在数据库中使用索引视图将无济于事，除非您将过滤推送回源存储库。

# codeigniter - Codeigniter 自定义路由问题

> ID：13089868
> 
> 赞同：1
> 
> 时间：2012-10-26T15:28:09.250
> 
> 标签：codeigniter, codeigniter-routing

这是我的路线设置代码

```
$route['general/(:any)'] = "videos/filter/$1/1"; 
$route['general/(:any)/(:num)'] = "videos/filter/$1/1/$2"; //pagination 
```

以下链接工作正常。

```
www.example.com/general/latest 
```

但是下面的链接不像我想要的那样工作

```
www.example.com/general/latest-trending/5 
```

$route['general/(:any)'] 只总是执行。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T15:42:39.757

颠倒顺序：

```
$route['general/(:any)/(:num)'] = "videos/filter/$1/1/$2"; //pagination
$route['general/(:any)'] = "videos/filter/$1/1"; 
```

您首先需要更具体的路线，因为如果较短的路线首先匹配，它将忽略所有其他路线。

# git - 将 Git 配置为每次签入都不需要评论

> ID：13089872
> 
> 赞同：-1
> 
> 时间：2012-10-26T15:28:22.327
> 
> 标签：git, egit, git-gui

> **可能重复：**
> [没有提交消息的 Git 提交](https://stackoverflow.com/questions/6218199/git-commit-with-no-commit-message)

我正在寻找一种将 Git 配置为在签入时不需要评论的方法。我希望它可以在存储库端完成，但如果它是客户端设置，那没关系。我将主要使用 Eclipse 插件，但有时可能会使用 Git GUI。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:43:47.057

这违背了良好的版本控制实践，但是这应该为您做到：

```
git commit -a --allow-empty-message -m '' 
```

# android - Android 布局缩放

> ID：13089874
> 
> 赞同：4
> 
> 时间：2012-10-26T15:28:30.077
> 
> 标签：android, android-layout, scale, android-screen-support

如果您将 Android 清单文件中的目标 SDK 版本设置为“3”，那么您在大屏幕设备上的布局将只是在小屏幕设备上的放大版本。将目标 SDK 设置为更高的 SDK 后，您可以为每个屏幕密度创建单独的布局，从而提供更好的用户体验。

**但是**，我的布局主要由图像组成，它们的分辨率足够高，即使在放大时也能在所有屏幕尺寸上正常显示，因为它们足够大，不需要拉伸。现在，对我来说，创建一个小屏幕布局并放大它会容易得多，因为它在大屏幕上仍然看起来不错。有什么方法可以在不返回 API 级别 3 的情况下获得这种效果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T15:37:42.677

您可以使用重量参数。
“权重”是一个术语，用于指定特定视图在绘制后是否还有空间时应占据屏幕的多少。

只需制作一个`LinearLayout`并在其中放置两个`TextViews`：

```
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
>
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="small"
    android:layout_weight="0.2"
    android:background="#123" />
 <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.8"
    android:text="huge"
    android:background="#456"
 />
</LinearLayout> 
```

您会注意到视图如何相应地占用空间。您可以为较小的屏幕创建任何您想要的布局并指定权重属性，并且每件事都会得到精美的调整

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T15:37:18.117

只是不要为更大的屏幕指定布局。默认情况下，它对所有屏幕使用相同的屏幕，除非有更具体的布局可用。如果您使用`match_parent`宽度和高度以及图像`scaleType="fitCenter"`或`"centerCrop"`- 类似的东西，它应该填充它运行的任何屏幕尺寸。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T10:01:45.707

不要忘记让您的应用与平板电脑兼容。您必须添加

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true" /> 
```

在您的应用清单中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T15:50:53.473

嗯。我认为只要您不使用 AbsoluteLayout 之类的东西，Android 就已经这样做了。有一些技巧可以帮助过渡。不完全确定问题在问什么，但我会试一试。API 级别 3 是否随宽高比或其他东西缩放？

我发现从手机到平板电脑的大部分 UI 丑陋都与宽度有关。您可以使用逻辑来将宽度固定在某个分辨率。否则，布局看起来和行为都很好。还有其他技巧，例如使用不同的 dimens.xml 调整资产大小，以及为不同的屏幕尺寸和密度设置不同的 dimens.xml 集。

您不必在每个版本中都有每个维度。您只需要设置每个值集的基本版本，并且可以在其他文件中设置不同的维度。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-03T22:20:30.413

通过不同的屏幕尺寸调整图像大小的唯一方法是使用九个补丁。这是关于该主题的更多资源：http: [//developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

我相信您唯一能做的就是在布局中使用相对宽度/高度（重量）和以 Ninepath 格式格式化的图像。

# ruby-on-rails - Fork 上的 Fork、Ruby、ActiveRecord 和文件描述符

> ID：13089875
> 
> 赞同：6
> 
> 时间：2012-10-26T15:28:30.857
> 
> 标签：ruby-on-rails, ruby, activerecord, fork, file-descriptor

我知道当我们分叉一个进程时，子进程会继承父进程打开文件描述符和偏移量的副本。根据手册页，这指的是父级使用的相同文件描述符。在以下程序中基于该理论

```
 puts "Process #{Process.pid}"

file = File.open('sample', 'w')

forked_pid = fork do
    sleep(10)
    puts "Writing to file now..."
    file.puts("Hello World. #{Time.now}")       
end

file.puts("Welcome to winter of my discontent #{Time.now}")
file.close
file = nil 

```

**问题1：** 睡眠10秒的分叉进程是否应该丢失其文件描述符并且在父进程完成并关闭文件并退出时无法写入文件。
**问题 2：**但是无论出于何种原因，如果这可行，那么 ActiveRecord 在这种情况下如何失去连接。它只有在我设置`:reconnect => true`ActiveRecord 连接时才有效，它才能真正连接，这意味着它失去了连接。

```
 require "rubygems"
require "redis"
require 'active_record'
require 'mysql2'

connection = ActiveRecord::Base.establish_connection({
    :adapter => 'mysql2',
    :username => 'root_user',
    :password => 'Pi',
    :host => 'localhost',
    :database => 'list_development', 
    :socket => '/var/lib/mysql/mysql.sock'

    })

class User < ActiveRecord::Base   
end

u = User.first

puts u.inspect

fork do
    sleep 3
    puts "*" * 50
    puts User.first.inspect
    puts "*" * 50

end

puts User.first.inspect 

```

However, the same is not true with Redis (v2.4.8) which does not lose connection on a fork, again. Does the it try to reconnect internally on a fork?

If thats the case then why isn't the write file program not throwing an error.

Could somebody explain whats going on here. Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T10:18:36.913

If you close a file descriptor in one process it stays valid in the other process, this is why your file example works fine.

The mysql case is different because it's a socket with another process at the end. When you call close on the mysql adapter (or when the adapter gets garbage collected when ruby exits) it actually sends a "QUIT" command to the server saying that you're disconnecting, so the server tears down its side of the socket. In general you really don't want to share a mysql connection between two processes - you'll get weird errors depending on whether the two processes are trying to use the socket at the same time.

If closing a redis connection just closes the socket (as opposed to sending a "I'm going away " message to the server) then the child connection should continue to work because the socket won't actually have been closed

# jquery - unwrap() / 使用 jQuery 移除特定的 HTML 元素

> ID：13089878
> 
> 赞同：0
> 
> 时间：2012-10-26T15:28:35.083
> 
> 标签：jquery, html

我正在尝试使用 jQuery 从该 HTML 中删除强元素，但无法使其正常工作（注意：这里的 message_id 实际上是 PHP 代码，但为了便于阅读，我将其删除）：

```
<p class="comments-layout" id="strong_messageid"><strong>text</strong></p> 
```

我试过他的：

```
$('#strong'+messageid).children().first().unwrap(); 
```

重新安排后，但没有工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:31:03.123

假设您想要该`<p>`元素，则必须选择子元素，然后打开它以仅删除该`#strongX`元素。

```
$('#strong'+messageid).children().unwrap(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:30:34.447

由于[**.unwrap**](http://api.jquery.com/unwrap/)方法实际上删除了所选元素的父元素，您可能需要这样的东西：

```
$('#strong'+messageid).children().first().unwrap(); 
```

但是，不禁想知道，为什么它是`<p>`element 包裹的`<strong>`，反之亦然？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:31:35.597

```
$('#strong'+messageid)
    .children()
    .insertAfter( $('#strong'+messageid) );
$('#strong'+messageid).remove(); 
```

如果您在强烈使用中使用文本节点`contents`而不是`children`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T16:50:11.133

如果您想保留 p 元素但只是删除周围的强标签，您可以尝试：

```
//get the DOM elements contained within the strong tag first then replace the strong tag
//with these elements
$element_contents = $('#strong'+  $messageid).contents();
$('#strong'+  $messageid).replaceWith($element_contents); 
```

# java - 具有复制功能的 memcachedb 的 Java 客户端

> ID：13089879
> 
> 赞同：1
> 
> 时间：2012-10-26T15:28:40.540
> 
> 标签：java, memcached, replication

我有一台主服务器和一台从 memcachedb 服务器。我需要一些 java 客户端来访问 memcache db 有这样的机会：

首先，它建立与主服务器的连接。如果 master 失败，slave 应该成为 master 并且 java 客户端应该重新连接到他。在第一台服务器修复后，它们必须在复制中再次工作。

那么，你能帮我为有这种要求的 memcachedb 选择最好的 java 客户端吗？

问候， 叶夫根尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:30:35.583

Spring Framework 应该包含通过缓存模块对 memcached 的支持。我知道 EhCache 是支持者。如果您使用 Java，EHCache 可能值得一看，因为它不需要像 memcached 那样的额外安装过程。此外，如果 Spring 没有适配器，提供一个适配器应该很简单，允许您在不更改代码的情况下动态切换缓存实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:12:49.933

我使用 xmemcached 作为 java 客户端，并有多个 Memcached 服务器并行工作。（不是主/从（只有一个问题，当您说 Memcached DB 时，使用 Memcached 的目的是什么？缓存还是数据库？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:24:19.060

最后，我还没有找到在复制模式下与多台服务器一起工作的任何解决方案。因此，如果您想在多个节点上拥有相同的数据，您应该手动添加它。此外，在某些服务器故障的情况下，您应该手动重新连接到另一台服务器。

如果您找到更好的解决方案，请告诉我。

问候， 叶夫根尼

# android - 活动之间的过渡动 画创建一个白尾神器

> ID：13089882
> 
> 赞同：2
> 
> 时间：2012-10-26T15:28:54.417
> 
> 标签：android, animation, transition, artifact

我使用以下代码通过自定义动画显示新活动。新活动从屏幕底部出现并移至顶部，旧活动淡入。

```
startActivity(intent);
overridePendingTransition(R.anim.slide_in_up, R.anim.fade_in); 
```

slide_in_up.xml：

```
<?xml version="1.0" encoding="utf-8"?>
 <set xmlns:android="http://schemas.android.com/apk/res/android">  
    <translate android:fromYDelta="100%" 
        android:toYDelta="0%"  
        android:duration="@android:integer/config_shortAnimTime"/>  
</set> 
```

淡入淡出.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">  
  <alpha android:fromAlpha="1.0" 
      android:toAlpha="0.5"  
      android:duration="@android:integer/config_mediumAnimTime" />  
</set> 
```

问题是，当活动出现并上升时，在它移动时在其顶部有白色条纹伪影或尾巴，然后很快消失。

我正在为 SDK 8 开发。奇怪的是，如果我在 Android 4.1.2 上运行我的应用程序，则在过渡期间没有工件，但对于所有以前的版本都有。

**反方向的动画有效**

当我设置相反的方向slide_in_up.xml：

```
<?xml version="1.0" encoding="utf-8"?>
 <set xmlns:android="http://schemas.android.com/apk/res/android" >  
    <translate 
        android:fromYDelta="-100%" 
        android:toYDelta="0%"  
        android:duration="@android:integer/config_shortAnimTime"/>  
</set> 
```

过渡效果很好。

我启动的活动具有以下布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/black"
        android:gravity="fill_vertical" >
        <Button
            android:id="@+id/goHomeButton"
            style="@style/HeaderTextStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:text="@string/comparison_title" />
    </RelativeLayout>
    <ListView
        android:id="@+id/listViewComparison"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/gray"
        android:cacheColorHint="@color/transp"
        android:divider="@null"
        android:listSelector="@color/transp" >
    </ListView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T21:56:49.633

您可能想尝试将此添加到您的活动/应用程序的主题中：

```
<item name="android:windowIsTranslucent">true</item> 
```

# c++ - Boost 将派生类反序列化为基类指针

> ID：13089884
> 
> 赞同：2
> 
> 时间：2012-10-26T15:29:08.027
> 
> 标签：c++, boost, boost-serialization

请帮助我将派生类反序列化为基类指针。我附上完整的源代码示例。

**request.hpp**（没有对 cpp 文件）

```
#ifndef REQUEST_HPP
#define REQUEST_HPP

#include <memory>
#include <string>

#include <boost/archive/xml_oarchive.hpp>
#include <boost/archive/xml_iarchive.hpp>

namespace demo {
namespace common {

        class request {
        public:
            static const int INVALID_ID = -42;

            request() 
                : id_(INVALID_ID), timestamp_(0), source_ip_("unknown") {};

            request(int id, long timestamp, const std::string& source_ip) 
                : id_(id), timestamp_(timestamp), source_ip_(source_ip) {};

            virtual ~request() {};

            int id() const { return id_; }
            long timestamp() const { return timestamp_; }
            std::string source_ip() const { return source_ip_; }

        protected:
            int id_;
            long timestamp_;
            std::string source_ip_;

        private:
            friend class boost::serialization::access;

            template<class Archive>
            void serialize(Archive& ar, const unsigned version) {
                ar & BOOST_SERIALIZATION_NVP(id_);
                ar & BOOST_SERIALIZATION_NVP(timestamp_);
                ar & BOOST_SERIALIZATION_NVP(source_ip_);
            }

        };

        typedef std::shared_ptr<request> request_ptr;

    }
};

#endif 
```

**command.hpp**（派生类）

```
#ifndef COMMAND_HPP
#define COMMAND_HPP

#include <memory>
#include <string>

#include <boost/serialization/export.hpp>

#include <demo/common/request.hpp>

namespace demo {
    namespace common {

            class command : public request {
            public:
                command(): name_("untitled") {};
                explicit command(const std::string& name) : name_(name) {};
                virtual ~command() {};

                virtual void execute();

                std::string name() const { return name_; }

            protected:
                std::string name_;

            private:
                friend class boost::serialization::access;

                template<class Archive>
                void serialize(Archive& ar, const unsigned version) {
                    ar & BOOST_SERIALIZATION_BASE_OBJECT_NVP(request);
                    ar & BOOST_SERIALIZATION_NVP(name_);
                }

            };

            typedef std::shared_ptr<command> command_ptr;

        }
};

BOOST_CLASS_EXPORT_KEY(demo::common::command)

#endif 
```

**命令.cpp**

```
#include "command.hpp"
#include <iostream>

BOOST_CLASS_EXPORT_IMPLEMENT(demo::common::command)

namespace demo {
    namespace common {

            void command::execute() {
                std::cout << "  I am '" + name_ +"' and I am executing..." << std::endl;
            }

    }
}; 
```

**序列化程序.hpp**

```
#ifndef SERIALIZER_HPP
#define SERIALIZER_HPP

#include <sstream>
#include <string>

/* classes to serialize */
#include <demo/common/request.hpp>
#include <demo/common/command.hpp>

namespace demo {
    namespace common {

        class serializer {
        public:
            serializer() : {};

            template<typename T>
            std::string serialize(const T& t){  
                std::stringstream stream;
                boost::archive::xml_oarchive archive(stream);
                archive << BOOST_SERIALIZATION_NVP(t);
                std::string serialized = stream.str();

                return serialized;
            }

            template<typename T>
            void deserialize(const std::string& serialized, T& t) {
                std::stringstream stream(serialized);
                boost::archive::xml_iarchive archive(stream);
                archive >> BOOST_SERIALIZATION_NVP(t);
            }
        };

    }
}

#endif 
```

**样品使用**

```
#include <iostream>

#include <demo/common/serializer.hpp>
#include <demo/common/command.hpp>

using namespace std;
using namespace demo::common;

int main(){
    serializer serializer_;

    command r("123"); // <-- (1) my desired way of declaring
    //request* r = new command("123"); <-- (2) replacing with this makes all work!
    //command* r = new command("123"); <-- (3) replacing with this crashes the app, like (1)
    std::string s = serializer_.serialize(r);
    std::cout << s << std::endl;
    request* rr = nullptr;
    serializer_.deserialize(s, rr); //this throws an exception

    command* rrr = dynamic_cast<command*>(rr);

    rrr->execute();
} 
```

我以为我做了所有需要做的事情，在任何类导出之前包含档案，所有默认构造函数都初始化成员..

***请注意，可序列化的类和序列化程序被编译为 lib 文件。然后，该库用于两个可以访问标头并链接该库的子项目。它们使用这些类相互通信，它们通过网络发送序列化对象。***

**为什么我不能将派生类反序列化为基类指针？** 我正在使用 Boost 1.51 和 VC11。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:10:17.407

**问题**：

我发现引起我问题的关于 Boost::serialization 的两个主要问题很挑剔并且没有足够的文档记录如下：

1.  **堆栈上的对象与堆上的对象混合的序列化/反序列化。**例如，如果您从堆栈上的对象序列化然后尝试反序列化到指针（例如调用您的 load_construct_data<>），则可能会发生异常。与相反的情况相同。
2.  **没有正确链接您的出口**。例如，如果您创建序列化模板/类并将它们放在 .lib 中，则似乎导出可能未正确链接/暴露。这适用于链接，然后从共享对象/DLL 中使用。

**解决方案**：

对于＃1，我发现最容易制定始终序列化/反序列化到/从指针的规则。甚至堆栈上的对象在序列化时也可以使用临时指针以允许此规则。例如：

```
// serialize
MyObject myobj;
std::ostringstream oss;
boost::archive::text_oarchive oa(oss);
MyObject* myObjPtr = &myObj;
oa << myObjPtr; // this is different than oa << myObj!!
std::string serialized = oss.str();

// deserialize
MyObject* myNewObjPtr;
std::stringstream iss(serialized);
boost::archive::text_iarchive ia(iss);
ia >> myNewObjPtr; // invokes new, don't forget to delete (or use smart ptrs!!!) 
```

对于 #2，只需创建一个包含所有导出的 .cpp 文件。将此 CPP 直接链接到您的模块中。换句话说，您将拥有一个带有一堆 BOOST_CLASS_EXPORT_IMPLEMENT() 的 .cpp：

```
BOOST_CLASS_EXPORT_IMPLEMENT(MyObject);
// ... 
```

**更完整的例子**：
下面是一个更完整的例子，展示了一些使用非侵入式模板的序列化技巧。侵入式成员方法将非常相似：

**我的对象.h**

```
// Can be broken into MyObject.h, MyObject.cpp, MyObjectSerialization.h for example as well. 
// This stuff can live in your .lib
#include <boost/serialization/export.hpp>
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>
// assume this class contains GetSomeMember() returning SomeMemberType
class MyObject { /* ... */ };
BOOST_CLASS_EXPORT_KEY(MyObject);
namespace boost { namespace serialization {
  template<class Archive>
      void serialize(Archive& ar, MyObject& myObj, const unsigned int version)
  {
      ar & myObj.m_someMember;
  }

  template<class Archive>
      inline void save_construct_data(Archive& ar, const MyObject* myObj, const unsigned int version)
  {
    ar & boost::serialization::make_nvp("SomeMemberType", static_cast<const SomeMemberType&>(myObj->GetSomeMember()));
  }

  template<class Archive>
  inline void load_construct_data(Archive& ar, MyObject* myObj, const unsigned int version)
  {
      SomeMemberType t;
      ar & boost::serialization::make_nvp("SomeMemberType", t);
      ::new(myObj)MyObject(t);
  }
} } // end boost::serialization ns 
```

**MyObjectExports.cpp**

```
// This file must be explicitly linked into your module(s) that use serialization.
// This means your executable or shared module/DLLs
#include <boost/serialization/export.hpp>
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>
#include "MyObject.h"

BOOST_CLASS_EXPORT_IMPLEMENT(MyObject); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T22:14:18.333

使用库时，您可能会在演示中遇到*input_stream_error*和*unregistered_class*异常。这是由 boost 自动注册类的方式引起的。

尽管使用了 BOOST_CLASS_EXPORT* 宏，但当您序列化派生对象并反序列化到其基时，自动注册过程似乎会变得混乱。

但是，您可以在对存档执行任何 i/o 操作之前显式注册类：

```
// ...
boost::archive::xml_iarchive archive(stream);
// register the class(es) with the archive
archive.template register_type<command>();
archive >> BOOST_SERIALIZATION_NVP(t);
// ... 
```

序列化时使用相同的注册顺序。这使得导出宏变得多余。

# wpf - WPF GroupBox 样式未应用于自定义控件

> ID：13089885
> 
> 赞同：1
> 
> 时间：2012-10-26T15:29:10.190
> 
> 标签：wpf, styles, stylesheet, groupbox

我创建了一个自定义控件，因此如果出现错误，只需将 Geroupbox 的边框绘制为红色。由于某种原因，当我使用控件时，前景色没有正确设置，它默认为白色而不是绿色。我的代码如下：

```
public class ErrorGroupBox : GroupBox
{
    static ErrorGroupBox()
    {
    }

    public bool ErrorState
    {
        get { return (bool)GetValue(ErrorStateProperty); }
        set { base.SetValue(ErrorStateProperty, value); }
    }

    public static readonly DependencyProperty ErrorStateProperty =
      DependencyProperty.Register("ErrorState", typeof(bool), typeof(ErrorGroupBox), new UIPropertyMetadata(false));
} 
```

风格是：

```
<Style x:Name="ErrorGroupBox" TargetType="local:ErrorGroupBox">
    <Setter Property="Foreground" Value="Green"/>
    <Setter Property="BorderThickness" Value="2"/>
    <Setter Property="FontFamily" Value="Tahoma"/>
    <Setter Property="FontSize" Value="13"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="GroupBox">
                <Grid SnapsToDevicePixels="True" Margin="5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="6"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="6"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="6"/>
                    </Grid.RowDefinitions>

                    <!--<Border Background="{TemplateBinding Background}" BorderBrush="Transparent" 
                         BorderThickness="{TemplateBinding BorderThickness}" 
                         CornerRadius="4" Grid.Column="1    " Grid.ColumnSpan="4" 
                         Grid.Row="1" Grid.RowSpan="3" HorizontalAlignment="Stretch"/>-->

                    <!--The Title-->
                    <Border x:Name="Header" Grid.Column="2" Grid.RowSpan="2" HorizontalAlignment="Left" 
                        Padding="3,1,3,0" VerticalAlignment="Stretch" >
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="5" Direction="334"/>
                        </Border.Effect>

                        <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                             Content="{TemplateBinding Header}" 
                             ContentSource="Header" 
                             ContentStringFormat="{TemplateBinding HeaderStringFormat}" 
                             ContentTemplate="{TemplateBinding HeaderTemplate}" 
                             RecognizesAccessKey="True" Height="Auto" 
                             VerticalAlignment="Center"
                             HorizontalAlignment="Center"
                             OpacityMask="#FF3844BD" Margin="0,1,0,0">
                        </ContentPresenter>
                    </Border>

                    <ContentPresenter Margin="5" 
    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
    Content="{TemplateBinding Content}" 
    ContentStringFormat="{TemplateBinding ContentStringFormat}" 
    ContentTemplate="{TemplateBinding ContentTemplate}" 
    Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="2" />
                    <Border BorderBrush="#BFBFBF" BorderThickness="{TemplateBinding BorderThickness}" 
                        CornerRadius="4" Grid.ColumnSpan="3" Grid.Row="1" Grid.RowSpan="3" RenderTransformOrigin="0.5,0.5" Margin="0">
                        <Border.OpacityMask>
                            <MultiBinding ConverterParameter="7" UpdateSourceTrigger="Default">
                                <MultiBinding.Converter>
                                    <BorderGapMaskConverter/>
                                </MultiBinding.Converter>
                                <Binding Path="ActualWidth" ElementName="Header"/>
                                <Binding Path="ActualWidth" RelativeSource="{RelativeSource Self}"/>
                                <Binding Path="ActualHeight" RelativeSource="{RelativeSource Self}"/>
                            </MultiBinding>
                        </Border.OpacityMask>
                    </Border>
                </Grid>
                <ControlTemplate.Triggers>                    
                    <Trigger Property="local:ErrorGroupBox.ErrorState" Value="True">
                        <Setter Property="Foreground" Value="Green"/>
                    </Trigger>
                    <Trigger Property="local:ErrorGroupBox.ErrorState" Value="False">
                        <Setter Property="Foreground" Value="Green"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我使用控件如下：

```
 <controls:ErrorGroupBox ErrorState="{Binding Error}" Header="Test Type" Margin="20,20,0,0" Name="groupBox1" HorizontalAlignment="Left" VerticalAlignment="Top" Width="226" Grid.Column="0"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:37:02.810

如果这是默认主题样式，则需要在静态构造函数中指定不同的元数据类型：

```
public class ErrorGroupBox : GroupBox
{
    static ErrorGroupBox()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(ErrorGroupBox), new FrameworkPropertyMetadata(typeof(ErrorGroupBox )));
    } 
```

# jsf - JSF/EJB3 避免视图层中的延迟初始化异常

> ID：13089888
> 
> 赞同：3
> 
> 时间：2012-10-26T15:29:14.303
> 
> 标签：jsf, ejb

我有以下 JSF/PrimeFaces EJB 架构：

[JSF/PrimeFaces xhtml 视图]--> [@ManagedBean JSF bean]--> [@Stateless EJB3 bean]--JPA--> [DB]

也就是说，JSF 视图显示它们在其支持 bean ( **@ManagedBean** ) 上访问的实体和集合，这些集合和实体又通过调用注入了**EntityManager的无状态****EJB3** “外观”bean 来获取，并使用由**JPA**支持的JPA 访问数据库**休眠**。无状态**EJB3** bean 也提供一些服务，但在大多数情况下，它们的作用是根据需要显示它们的**xhtml**视图的请求，提供来自数据库的实体对象（ **JPA -annotated）。**

 ******现在事情是这样的：如果我的理解是正确的，那么当无状态 EJB3 bean 返回实体 bean 时，它们就会分离，因为每个**EJB3** bean 方法都划分了一个事务。通常情况下，当**xhtml**视图和**JSF 托管**bean 导航如此获取的 Entity 对象（一对多集合等）的图形时，我经常会遇到如下所示的延迟初始化异常：

```
javax.el.ELException: ... org.hibernate.LazyInitializationException: failed
to lazily initialize a collection of role: ..., no session or session was closed 
```

唯一可行的是将集合更改为**EAGER** -ly 加载，但这不是一个实用的解决方案。当分离的 JPA 实体找到通往视图层的方式时，有哪些好的模式可以使用，以避免一劳永逸的延迟初始化异常，而不必以特别的方式处理每种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:37:07.237

有两种处理惰性关联的方法。第一种方法是使用以下方法初始化实体：

```
Hibernate.initialize(proxy) 
```

或将获取类型设置为 EAGER，这将在您加载它时获取整个实体。第二种也是更合适的方法（在我看来）是只要您保留实体，就保留实体经理。这可以使用像这样的@Stateful 会话来完成：

```
@Stateful
public class UserService {
   @PersistenceContext(type=EXTENDED)
   private EntityManager entityManager;

   ...... the business method
} 
```

只要您保留实体，就保留对 ejb 的引用。更多关于扩展持久性上下文的信息可以在[这里](https://blogs.oracle.com/enterprisetechtips/entry/extended_persistence_context_in_stateful)找到。保留实体管理器的其他方法是使用 CDI 模块，例如[seam-persistence](http://www.seamframework.org/Seam3/PersistenceModule)或[CODI](http://myfaces.apache.org/extensions/cdi/)，它们提供了创建 EntityManager 并将其保持在对话范围内的功能。******

# ios6 - iOS6 MKMapView 缩放

> ID：13089898
> 
> 赞同：0
> 
> 时间：2012-10-26T15:30:01.377
> 
> 标签：ios6, mkmapview, ios6-maps

我试图让我`MKMapView`放大到注释。我已经尝试了各种方法，但是我仍然缩小到我的`region`.

```
- (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views
{
    NSLog(@"Did add annotations");
    MKAnnotationView *annotationView = [views objectAtIndex:0];
    id <MKAnnotation> mp = [annotationView annotation];
    MKCoordinateSpan span;
    span.longitudeDelta = 0.02;
    span.latitudeDelta = 0.02;
    MKCoordinateRegion region;

    region.center = mapView.userLocation.coordinate;
    region.span = span;

    [mapView selectAnnotation:mp animated:YES];
    [self.spotMapView setRegion:region animated:YES];
    [self.spotMapView regionThatFits:region];
} 
```

确实可以运行，但是地图保持缩小状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:15:04.293

更改`didAddAnnotationViews`为：

```
- (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views
{
    NSLog(@"Did add annotations");
    MKAnnotationView *annotationView = [views objectAtIndex:0];
    id <MKAnnotation> mp = [annotationView annotation];
    [mapView selectAnnotation:mp animated:NO];
} 
```

似乎成功了，地图现在放大了。

# google-plus - Google Plus 分享网址是德文的？

> ID：13089901
> 
> 赞同：1
> 
> 时间：2012-10-26T15:30:07.967
> 
> 标签：google-plus

我正在使用 Google + 分享网址，例如：

```
<a href="https://plus.google.com/share?url=http://www.domain.com" target="_blank" ></a> 
```

但是我在浏览器中指向的页面始终是德语 - 为什么会这样？

我意识到 Chrome 会翻译该页面，但我的听众只会说英语，所以我想知道是否有人有任何想法。

**编辑**

只是认为知道该 url 是一个 facebook 粉丝页面标签可能是相关的，所以我不确定 Facebook 是否也参与其中，这就是它发生的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:42:19.447

我很高兴该网站的语言由您的 IP 决定。我坐在德国，也得到了用德语呈现的页面。我将浏览器的语言更改为 en-usa，但它仍然是德语。

编辑

使用参数 hl

```
https://plus.google.com/share?url=http%3A%2F%2Fdomain.com&hl=en 
```

[https://developers.google.com/+/plugins/share/#available-languages](https://developers.google.com/+/plugins/share/#available-languages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:35:54.033

我刚刚从我自己的网站上运行了你的代码，这很好。我唯一改变的是我对你试图分享的链接进行了 url 编码。尝试直接在浏览器中打开链接，看看是否能解决问题。

```
https://plus.google.com/share?url=http%3A%2F%2Fdomain.com 
```

我不知道为什么它会将您重定向到德国网站，但如果这能解决问题，请告诉我。

# android - Android 应用内计费未得到响应

> ID：13089904
> 
> 赞同：0
> 
> 时间：2012-10-26T15:30:16.533
> 
> 标签：android, in-app-billing

我已经下载了示例应用程序（“Dungeons”）并将 requestPurchase 方法中的 item-id 替换为调试 ID“android.test.purchased”。一切正常，我被引导到 Playstore，在那里我可以执行虚假购买（VISA xxx-FAKE），返回后我什至得到了一个 Toast，告诉我我的文章很快就会上架。但是 onRequestPurchaseResponse 和 onPurchaseStateChange 方法都没有被调用。我有一个 Galaxy S2。在我的朋友 Galaxy S 上，它运行良好。有谁知道问题可能是什么？

我发现了这个类似的问题：[Not Getting The Response From In-App Billing](https://stackoverflow.com/questions/12033363/not-getting-the-response-from-in-app-billing) 但我认为答案不正确，因为我在开发者控制台中找不到任何东西来注册我的设备 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:37:57.433

好的，现在我尝试将 'android:debuggable="false"' 添加到我的清单中并且有效。

显然在stackoverflow上发布问题可以帮助我自己解决问题，即使我之前失败了几天:-D

# wcf - MVVM 与 WCF 数据服务

> ID：13089909
> 
> 赞同：2
> 
> 时间：2012-10-26T15:30:20.793
> 
> 标签：wcf, mvvm

我正在开发 WPF 应用程序，需要帮助了解哪种模式更适合数据操作。我应该实施 MVVM 解决方案还是应该使用 WCF 数据服务？各有什么优缺点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T15:42:11.940

我想你不明白什么是 MVVM？什么是 WCF 数据服务？MVVM 是一种模式架构，而 WCF 数据服务是 .Net 平台提供的框架，可帮助您使用 OData 协议通过 REST 架构公开数据。

此外，MVVM 代表模型 - 视图 - 视图模型，您可以在同一应用程序中使用 MVVM 和 WCF 数据服务。您的 WCF 数据服务将仅代表您的模型（MVVM 中的第一个 M）

# c# - 是否有一个漂亮的 C# 打印机/代码格式化程序（作为构建系统的一部分）？

> ID：13089911
> 
> 赞同：28
> 
> 时间：2012-10-26T15:30:24.977
> 
> 标签：c#, pretty-print

是否有一个漂亮的 C# 打印机/代码格式化程序（作为构建系统的一部分）？读作：“生活在 Visual Studio 之外”。对于 Java、C++/C、Go 来说似乎有很多这样的东西——所以 C# 还应该有一些位于 IDE 之外的代码格式化程序似乎是非常合理的？

（我实际上想将格式化程序与 StyleCop 之类的东西结合起来，并让开发人员在提交之前将其作为流程的一部分运行）。

注意：不是语法高亮，如网页中的代码。取而代之的是*Code beautifier*或代码漂亮的打印机，它将获取代码并将其格式化为样式/标准编码格式...... StyleCop 会进行样式检查以查看代码是否符合格式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2020-06-12T17:09:37.130

JetBrains 还制作了一个名为[CleanupCode](https://www.jetbrains.com/help/resharper/CleanupCode.html)的免费命令行工具，它可以根据[.editorconfig](https://editorconfig.org/)设置格式化 c#。我为它编写了一个名为[ReGitLint](https://github.com/sethreno/ReGitLint#regitlint)的包装实用程序，它可以更轻松、更快速地作为预提交挂钩或在构建服务器上运行。如果您的队友使用 Visual Studio Code 而 ReSharper 不是一个选项，这会很有帮助。

要起床，只需运行以下命令

```
dotnet tool install JetBrains.ReSharper.GlobalTools
dotnet tool install ReGitLint 
```

然后将以下内容添加到 .git/hooks/pre-commit

```
#!/bin/sh
dotnet regitlint -f staged --fail-on-diff 
```

要在 jenkins 上强制格式化，请将其添加到您的构建脚本中

```
dotnet tool restore
dotnet regitlint --jenkins 
```

有关更多选项，请查看[自述文件](https://github.com/sethreno/ReGitLint#regitlint)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T17:03:25.923

首先想到的是[ReSharper](http://www.jetbrains.com/resharper/)。但是，它是 VS 的一个插件，这不是您所要求的。我不确定您是否可以将其设置为保存时自动格式化。

从他们的[网站](http://www.jetbrains.com/resharper/features/code_formatting.html)：

> ReSharper 可以根据您的代码样式首选项，重新格式化任意选定的代码块、当前文件中的所有代码、目录中的所有文件，甚至整个项目或解决方案中的所有代码。ReSharper 为 C#、VB.NET、JavaScript、CSS 和 XML 代码提供了不同的格式化选项。重新格式化会影响大括号布局、空行、换行和换行、各种上下文中的空格、缩进、对齐多个结构，以及您可以在 ReSharper 选项对话框中微调的更多选项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-08-30T09:31:56.907

对于 .NET SDK 项目，可以使用[dotnet format 命令。](https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-format)

> dotnet 格式是一种代码格式化程序，可将样式首选项应用于项目或解决方案。首选项将从`.editorconfig`文件中读取（如果存在），否则将使用一组默认首选项。

如果项目不导入 .NET SDK 上不可用的内容（例如文本模板化 msbuild 目标），它也可能适用于经典 .NET Framework 项目。

dotnet 格式源存储库位于[GitHub dotnet/format 上](https://github.com/dotnet/format)。

这些`.editorconfig`规则已[记录在案](https://docs.microsoft.com/en-us/dotnet/fundamentals/code-analysis/style-rules/)，并且可以从 Visual Studio 中导出，也可供 Visual Studio 使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2022-02-28T10:00:10.160

终于有了；[夏皮尔](https://csharpier.com/)！

它最初是从流行的[Prettier](https://prettier.io/)移植而来的，它**只是**C# 的代码格式化程序。它可以从命令行运行，并且不依赖于 IDE 或扩展，尽管也存在对这些的支持。你可以让它作为 git-hook 的一部分运行，例如在 git commit 上自动格式化更改的文件。

与其他格式化工具相比，选择 Csharpier 的一些好处是：

*   与大多数格式化程序（例如[dotnet-format](https://github.com/dotnet/format/issues/246)）不同，它会中断长行
*   它不保留原始格式。阅读Prettier 网页上的[构建和执行样式指南](https://prettier.io/docs/en/why-prettier.html)部分可能最好地解释这种好处。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-29T17:09:52.077

如果您有关于空格和大括号放置的现有且不寻常的样式指南，[AStyle](http://astyle.sourceforge.net/)可能足够灵活以匹配它。AStyle 不是特定于 C# 的，它可以执行许多类似 c 的语言。

[如果NArrange](http://www.narrange.net/doc/index.htm)恰好符合您的风格准则，它也很好。它可以更具侵略性，例如它可以将您的部分类放入不同的区域并对您的方法进行排序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-28T21:04:01.190

Microsoft 有一个代码格式化工具，它使用 Roslyn 根据他们的指南自动重写源代码。请检查该链接 [https://github.com/dotnet/codeformatter](https://github.com/dotnet/codeformatter)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-26T17:08:28.873

**更新**：NArrange 不再开发（另请参阅[https://github.com/MarcStan/narrange](https://github.com/MarcStan/narrange)以获得稍新的分叉）。

* * *

要在构建期间自动化代码格式化（一种微重构），您需要一个可以从命令行运行的工具（并且您可以轻松地集成到 msbuild 中）。

如果您的需要不是太高级（作者将其定义为 beautifier ），一个很好的*选择*是[NArrange](http://www.narrange.net/)。它完全支持 Framework 2.0 的 C# 和 VB.NET，但也支持新语言版本的许多广泛使用的功能。

> NArrange 是一个 .NET 代码美化器，可自动组织 .NET 类中的代码成员和元素。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-12T12:18:23.653

您现在可以使用[https://www.npmjs.com/package/narrange](https://www.npmjs.com/package/narrange)来利用 node.js 的强大功能 超级简单、可配置的设置 :)

```
const { createNArrange } = require("narrange");
const path = require("path");

createNArrange({
  srcPath: path.join(__dirname, "src/apps/mango"),
  configFilePath: path.join(__dirname, "config/NArrange.xml")
}); 
```

# python - 在 Python 上解决 End view 难题

> ID：13089914
> 
> 赞同：1
> 
> 时间：2012-10-26T15:30:32.697
> 
> 标签：python, puzzle, solver

我正在为 Python 上的 End View 拼图开发求解器。这就是我到目前为止所拥有的。我很抱歉代码混乱，但我是新来的。我的问题是规则。整代和运行等工作正常。
有人可以给我任何建议或帮助考虑规则吗？

```
import re
import sys
katia=0

def read_data(filename):
    try: f = open(filename, "r")
    except:
    print "\nERROR: File %s not found.\nNow try to open input.txt..." % filename
        try:
            f = open("input.txt", "r")
        except:
            print "\nERROR: File 'input.txt' not found."
            sys.exit(raw_input("Press enter to exit..."))

    return [ map(int, condition) for condition in 
[ re.findall(r'\d+', line) for line in f.readlines()]

#here comes the rules in which i am not sure 
    def check(tab, row, conditions):
    # check left-side conditions

    if (conditions[0][row] != 0): 
        if ( ( tab[row][0] != conditions[0][row] 
               and 
               tab[row][1] != conditions[0][row] 
               and
               tab[row][2] !=conditions[0][row]
              )
              or
              ( tab[row][1] == conditions[0][row]
              and
            tab[row][0] != 0
              )
              or
              ( tab[row][2] == conditions[0][row] 
              and 
              (tab[row][0] != 0 or tab[row][1] != 0)

                )
            ):
             return 0

    # right-side conditions
    if (conditions[1][row] != 0):
        if( ( tab[row][-1] != conditions[1][row] 
             and 
                  tab[row][-2] != conditions[1][row] 
             and
              tab[row][-3] !=conditions[1][row]
            )
            or
            ( tab[row][-2] == conditions[1][row]
                and
             tab[row][-1] != 0
            )
            or
            ( tab[row][-3] == conditions[1][row] 
                and 
            ( tab[row][-1] != 0 or tab[row][-2] != 0)

          )
           ):
               return 0
    if row < (len(tab) - 3):  # chek 3 below rows to uniqueness for uper numbers
        for i in range(len(tab)):
            if conditions[3][i] != 0:
                if tab[row][i]==conditions[3][i]:
                    return 0
    # check top-side conditions
    if row == 1:
    for col in range(len(tab)):
            if conditions[2][col] != 0 :
                if ( tab[1][col] == conditions[2][col]
                       and

                     ( tab[2][col] == conditions[2][col]
                       and
                       tab[0][col] != 0 or tab[0][col] != 7
                       and
                       tab[1][col] != 0 or tab[1][col] != 7 )
                     or 
                     ( tab[0][col] != conditions[2][col] 
                        and tab[1][col] != conditions[2][col] 
                        and tab[2][col] != conditions[2][col] )
                    ):
                    return 0
    if row == 2:
        for col in range(len(tab)):
            if conditions[2][col] != 0:
                if ( tab[1][col] != conditions[2][col] 
                     and 
                     tab[2][col] != conditions[2][col]
                   ):
                    return 0

    # check bottom-side conditions
    if row == len(tab)-2:
        for col in range(len(tab)):
            if conditions[3][col] != 0:
                if ( ( tab[-1][col] != conditions[3][col]
                     )
                     or 
                     ( tab[-2][col] == conditions[3][col]
                       and
                       tab[-1][col] == 0
                     )
                   ):
                    return 0
    if row == len(tab)-3:
        for col in range(len(tab)):
            if conditions[3][col] != 0:
                if ( tab[-3][col] != conditions[3][col] 
                     and 
                      tab[-1][col] == 0
                      and
                      tab[-2][col] == 0 
                   ):
                    return 0
    global katia
    katia+=1
    # check cols
    for col in range(len(tab)):
        for digit in range(1,4):
            if( ([tab[i][col] for i in range(len(tab))].count(digit) > 1)
            ):
                if katia%5000 == 0: 
                    print "errrrror in %d: " % col, 
                    print [tab[i][col] for i in range(len(tab))]
                return 0
    for col in range(len(tab)):
        for digit in range(len(tab)):
        if (( [tab[i][col]  for i in   range(len(tab))].count(digit)==0       
     and digit != 0 and digit !=7)
                or
    ([tab[i][col]  for i in range(len(tab))].count(digit) > 1  
     and  digit not       in range(1,7))
                or
                ([tab[i][col]  for 
    i in range(len(tab))].count(0)+ [tab[i][col] 
     for i in range(len(tab))].count(7) != 2)

                ):
                return 0
    katia++1
    if  katia/500 == 0: 
        for i in range(7):
            print tab[i]

    return 1

def generate(row):
    if (row[0] == -1):
        row[:] = range(len(row))
        return 1
    a = -1
    for j in reversed(range(len(row)-1)):
        if (row[j] < row[j+1]): 
            a = j 
            break
    if a == -1:
        return 0
    b = -1
    for j in reversed(range(a, len(row))):
        if (row[j] > row[a]): 
            b = j
            break

    row[a], row[b] = row[b], row[a]
    row[(a+1):] = reversed(row[(a+1):])
    return 1

def rekurs(tab, row, conditions):
    while (1):
        if (generate(tab[row]) == 0):
            tab[row] = [-1 for i in range( len(tab) )]
            return 0
        if check(tab, row, conditions) == 1:
            if row < 7:
                if (rekurs(tab, row+1, conditions)):
                    return 1
            else:  
                return 1

## -------------------- run program -------------------
if __name__ == '__main__':
    conditions = read_data(raw_input("Input file:  "))
    tab = [ [-1 for j in range(len(conditions[0]))] 
    for i in range( len(conditions[0]) ) ]
    print "\nSuccess. \nNow search for solutions..."
    if rekurs(tab, 0, conditions) == 0:
        print "\nThere is no solution:"
        for i in range(len(tab)): print tab[i]
    else:
        print "\nGood news:"
        for i in range(len(tab)): print tab[i]
    raw_input("Press enter to exit...") 
```

运行代码后，您必须添加输入文件的名称，其中应包含限制：

```
0 4 2 6 1 0 5 0
0 6 5 0 5 4 3 0
0 1 6 2 3 2 0 0
1 3 5 4 2 3 6 6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:12:40.230

我已经完成了这个任务：这里是# - *- coding: cp1251 -* - import re import sys

```
iterations = 0  # переменная для подсчета итераций (используется при выводе)

# ------------------------------------------------------------------------------------
# Функция считывания условий из файла
def read_data(filename):
    try: f = open(filename, "r")
    except:
        print "\nERROR: File %s not found.\nNow try to open input.txt..." % filename
        try:
            f = open("input.txt", "r")
        except:
            print "\nERROR: File 'input.txt' not found."
            sys.exit(raw_input("Press enter to exit..."))

    return [ map(int, condition) for condition in                       # для каждой "строки(массива)" массива 
                                                                        # каждый элемент превращаем в число.
                [ re.findall(r'\d+', line) for line in f.readlines()]
            ]                                                           # для каждой линии из считанного файла
                                                                        # регулярным выражением выделяем массив чисел в 
                                                                        # этой строке, которые разделены пробелом.

# ------------------------------------------------------------------------------------
# Функция проверки условий
def check(tab, row, conditions):
    # Вывод матрицы на итерации с шагом 1000
    global iterations
    iterations +=1
    if  iterations % 1000000 == 0 :
        for i in range(8):
            print tab[i]
        print "   "

    #Обязательное правило №1 #top-side conditions
    # Проверка строк на соответствие верхним ограничениям

    # Проверка первой строки 
    # Тут могут быть либо нули, либо ограничивающая цифра, иначе выход на перегенерацию строки
    if row == 0:
        for col in range(8):
            if (conditions[2][col] != 0):
                if (tab[0][col] != conditions[2][col]       and
                    tab[0][col] != 0                        and
                    tab[0][col] != 7
                    ):      # Грустный смайлик. Почему, ведь всё прекрасно работает?
                    return 0

    # Если в первой строке нули, то во второй должно быть верхнее ограничение, либо ноль
    if row == 1:
        for col in range(8):
            if (conditions[2][col] != 0):
                if (
                    (tab[0][col] == 0 or tab[0][col] == 7)  and
                     tab[1][col] != conditions[2][col]      and
                     tab[1][col] != 0                       and
                     tab[1][col] != 7
                    ):
                    return 0

    # Если в первой и второй строках нули, то в третьей должно быть верхнее ограничение, без вариантов
    if row == 2:
        for col in range(8):
            if (conditions[2][col] != 0):
                if (
                    (tab[0][col] == 0 or tab[0][col] == 7)  and
                    (tab[1][col] == 0 or tab[1][col] == 7)  and
                     tab[2][col] != conditions[2][col]
                    ):
                    return 0

    #Обязательное правило №2 #left-side conditions
    # Проверка строк на соответствие левым ограничениям, вызывается для каждой строки
    if (conditions[0][row] != 0): # если первое условин не нулевое. Какое первое? Левое! Первое оно у нас в файле, зачем привязывать к формату
        if (
            (tab[row][0] != conditions[0][row]      and # если на первой позиции не стоит граничное
             tab[row][1] != conditions[0][row]      and #если на второй тоже не стоит граничное
             tab[row][2] != conditions[0][row]          #если на 3-й тоже не стоит граничное
            )
            or
            (tab[row][1] == conditions[0][row]      and # вторая позиция равна условию
            (tab[row][0] != 0 and tab[row][0] != 7)     # при этом на 1-й позиции не 0 и не 7
            )
            or
            (
                tab[row][2] == conditions[0][row]   and
                (
                tab[row][0] != 0 and tab[row][0] != 7 
                or 
                tab[row][1] != 0 and tab[row][1] != 7
                )
            )
            ):
            return 0

    #Обязательное правило №3 #right-side conditions
    # Проверка строк на соответствие правым ограничениям, вызывается для каждой строки
    if (conditions[1][row] != 0):
        if (
            (tab[row][-1] != conditions[1][row]     and # если на первой позиции не стоит граничное
             tab[row][-2] != conditions[1][row]     and #если тут тоже не стоит граничное
             tab[row][-3] != conditions[1][row]
            )
            or
            (tab[row][-2] == conditions[1][row]     and
             tab[row][-1] != 0 and tab[row][-1] != 7
            )
            or
            (
                tab[row][-3] == conditions[1][row]      and
                (
                    tab[row][-1] != 0 and tab[row][-1] != 7 
                    or 
                    tab[row][-2] != 0 and tab[row][-2] != 7
                )
            )
            ):
            return 0

    #Необязательное правило #Оптимизация
    # Проверка того, что числа в нижних ограничениях не встречаются раньше 5-й строки
    if row < (len(tab) - 3):    # 8 - 3 = 5
        for i in range(len(tab)):
            if tab[row][i]==conditions[3][i]:
                return 0

    #Обязательные правила №5-6, переставлены сюда для оптимизации
    # Проверка того, что цифры в столбце не повторились и что количество пробелов не больше 2
    for j in range(0, row) :
            for h in range(0, 8):
                    if (tab[row][h] == tab[j][h] and tab[row][h] != 0 and tab[row][h] != 7) :
                            return 0
    sum = 0
    for k in range(0, 8) :
            for n in range(0, row + 1):
                    if (tab[n][k] == 0 or tab[n][k] == 7) :
                            sum += 1
                    if (sum > 2):
                            return 0
            sum = 0

    #Обязательное правило №4 #down-side conditions
    # Проверка строк на соответствие нижним ограничениям (ТОДО: исправить и проверить)
    if (row == 7):
        for col in range(len(tab)):
            if conditions[3][col] != 0 :  #если 3-е условие не равно 0\. Не 3-е, нижнее ведь. Давайте не будем путать людей
                if (
                    (tab[-1][col] != conditions[3][col] and # Исправил индексы так, чтобы они были единой системы счисления
                     tab[-2][col] != conditions[3][col] and
                     tab[-3][col] != conditions[3][col]
                    )
                    or
                    (tab[-2][col] == conditions[3][col] and
                     tab[-1][col] !=0 and tab[-1][col] !=7
                    )
                    or
                    (
                        tab[-3][col] == conditions[3][col]  and
                        (
                            tab[-1][col] !=0 and tab[-1][col] !=7 
                            or 
                            tab[-2][col] !=0 and tab[-2][col] !=7 
                        )
                    )
                    ):
                    return 0

    return 1

# ------------------------------------------------------------------------------------
# Функция генерирования строки (почти без комментариев, потому что поздно)
def generate(row):
    if (row[0] == -1):
        row[:] = range(len(row))
        return 1
    a = -1
    for j in reversed(range(len(row)-1)):
        if (row[j] < row[j+1]):
            a = j
            break
    if a == -1:
        return 0
    b = -1
    for j in reversed(range(a, len(row))):
        if (row[j] > row[a]):
            b = j
            break

    row[a], row[b] = row[b], row[a]     # Обмен значений для получения новой строки
    row[(a+1):] = reversed(row[(a+1):])
    return 1

# ------------------------------------------------------------------------------------
# Функция рекурсивного подбора строк матрицы
def rekurs(tab, row, conditions):
    while (1):
        if (generate(tab[row]) == 0):   # Если не осталось больше вариантов строк - забиваем минус единицы, выходим
            tab[row] = [-1 for i in range(len(tab))]
            return 0
        if (check(tab, row, conditions) == 1):
            if row < 7:                 # Пока не заполним таблицу полностью, спускаемся по уровням, т.е. по строкам
                if (rekurs(tab, row + 1, conditions)):
                    return 1
            else:
                return 1

## -------------------- run program -------------------
if __name__ == '__main__':
    conditions = read_data(raw_input("Input file:  "))
    tab = [ [-1 for j in range(len(conditions[0]))] for i in range( len(conditions[0]) ) ]
    print "\nSuccess. \nNow search for solutions..."
    if rekurs(tab, 0, conditions) == 0:
        print "\nThere is no solution:"
        for i in range(len(tab)): print tab[i]
    else:
        print "\nGood news:"
        for i in range(len(tab)): 
            for k in range(len(tab)):
                if (tab[i][k] == 7): tab[i][k] = 0
            print tab[i]
    raw_input("Press enter to exit...") 
```

这是输入文件：

2 2 3 0 4 2 6 0

5 1 0 6 1 0 0 4

0 1 5 3 4 6 2 0

0 6 4 5 2 4 3 0

# android - 使绝对定位的 span/div 在 android 上可滚动 - 多个 span/div

> ID：13089920
> 
> 赞同：0
> 
> 时间：2012-10-26T15:30:38.127
> 
> 标签：android, mobile, html, scroll, touch

我需要帮助解决一个我似乎无法掌握的小问题：

当我触摸一个字符（很多字符 -> 很多跨度）时，屏幕底部会显示跨度。在跨度中是有关角色的一些信息 - 因为我想让它适合移动设备，所以我希望用户滚动浏览这些信息。

到目前为止，我发现了一些对我有帮助的代码：

```
<body onload="touchScroll('test')">
<script>
function isTouchDevice(){
try{
    document.createEvent("TouchEvent");
    return true;
    }catch(e){
    return false;
   }
}

function touchScroll(id){
    if(isTouchDevice()){ //if touch events exist...
        var el=document.getElementById(id);
        var scrollStartPos=0;

        document.getElementById(id).addEventListener("touchstart", function(event) {
        scrollStartPos=this.scrollTop+event.touches[0].pageY;
        event.preventDefault();
        },false);

        document.getElementById(id).addEventListener("touchmove", function(event) {
        this.scrollTop=scrollStartPos-event.touches[0].pageY;
        event.preventDefault();
        },false);
    }
} 
```

并且 ID 为“test”的跨度变为可滚动的。伟大的。但是由于我有数百个跨度，我无法为每个跨度分配一个 id。所以我想知道你是否可以帮助想出一种让每个类“tt”都可以滚动的方法。

我尝试在触摸时将“test”-id 重新分配给下一个元素。但这没有用。我尝试将“test”-id 添加到每个类“tt” - 也没有工作。

如果您想让自己了解情况：[这是我的测试站点](http://p131548.webspaceconfig.de/mobilefirst/test.html)！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T08:41:05.567

我在评论中在[这个网站](http://chris-barr.com/index.php/entry/scrolling_a_overflowauto_element_on_a_touch_screen_device/)上找到了一个解决方案：

```
<script type='text/javascript'>
// Determine if this is a touch device
var hasTouch = 'ontouchstart' in document.documentElement,
startEvent = hasTouch ? 'touchstart' : 'mouseover',
moveEvent = hasTouch ? 'touchmove' : 'mousemove',
endEvent = hasTouch ? 'touchend' : 'mouseup';

var Last;

$(".tttw").live(startEvent, function() {
if (Last) Last.removeClass('ttth');
$(this).addClass("ttth");
Last=$(this);
}); 

function isTouchDevice(){
try{
    document.createEvent("TouchEvent");
    return true;
}catch(e){
    return false;
}
}

function touchScroll(selector) {
if (isTouchDevice()) {
  var scrollStartPosY=0;
  var scrollStartPosX=0;
  $('body').delegate(selector, 'touchstart', function(e) {
    scrollStartPosY=this.scrollTop+e.originalEvent.touches[0].pageY;
    scrollStartPosX=this.scrollLeft+e.originalEvent.touches[0].pageX;
  });
  $('body').delegate(selector, 'touchmove', function(e) {
    if ((this.scrollTop < this.scrollHeight-this.offsetHeight &&
      this.scrollTop+e.originalEvent.touches[0].pageY < scrollStartPosY-5) ||
      (this.scrollTop != 0 && this.scrollTop+e.originalEvent.touches[0].pageY > scrollStartPosY+5))
          e.preventDefault();
    if ((this.scrollLeft < this.scrollWidth-this.offsetWidth &&
      this.scrollLeft+e.originalEvent.touches[0].pageX < scrollStartPosX-5) ||
      (this.scrollLeft != 0 && this.scrollLeft+e.originalEvent.touches[0].pageX > scrollStartPosX+5))
          e.preventDefault();
    this.scrollTop=scrollStartPosY-e.originalEvent.touches[0].pageY;
    this.scrollLeft=scrollStartPosX-e.originalEvent.touches[0].pageX;
  });
}
}

$(document).ready(function(){
touchScroll('.tt');
});

</script> 
```

现在像魅力一样工作;-)

# javascript - 如何将对象添加到 html 字符串？

> ID：13089926
> 
> 赞同：0
> 
> 时间：2012-10-26T15:30:54.020
> 
> 标签：javascript

我正在尝试通过拖放操作加载多个图像，而不是调整它们的大小并将它们添加为缩略图。调整大小部分非常重要，因为图像可能非常大，我想让缩略图变小。

这是我的代码：

```
loadingGif(drop);

for (var i=0;i<files.length;i++) {
    var file = files[i];
    var reader = new FileReader();          

    reader.onload = function(e) {
        var src = e.target.result;

        var img = document.createElement('img');            
        img.src = src;
        var scale = 100/img.height;
        img.height = 100;
        img.width = scale*img.width;    

        output.push('<div id="imagecontainer"><div id="image">'+img+'</div><div id="delimage"><img src="img/del.jpg"" /></div></div>');

        if(output.length == files.length) {
            drop.removeChild(drop.lastChild);
            drop.innerHTML += output.join('');
            output.length = 0;
        }
    }

    reader.readAsDataURL(file);
} 
```

正如您可能会告诉我的那样，我在我的拖放区中插入了一个加载 gif 图像，直到所有文件都被加载（output.length == files.length）。加载文件时，我将 html 添加到数组中，如果加载完成，我将打印该数组。问题是我似乎无法将 img 对象（我需要这个对象来调整图像大小）添加到 html 字符串中，这似乎很明显，因为 img 是一个对象......所以我对你们的问题是：怎么做我这样做？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:43:31.467

一般来说，将 DOM 元素作为字符串来玩是个坏习惯。您应该改为使用本机 javascript（或您正在使用的库/框架）命令来创建元素并设置它们的属性。

例如，如果您有一个 id 为“image-container”的元素，其中包含您的所有图像，您可以编写。

```
var container = document.getElementById( 'image-container' );
var img = document.createElement( 'img' );

container.appendChild( img ); 
```

然后，您可以只引用包含所有其他元素的元素，而不是包含所有输出的大 HTML 字符串，并在所有元素加载后立即将其附加到正文，或将其隐藏并显示加载完成后。

```
if (output.length == files.length) {
    drop.removeChild(drop.lastChild);
    drop.appendChild( container );
    output.length = 0;
} 
```

请记住，ID 必须是唯一的。同一文档中不能有多个具有相同 ID 的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:44:06.390

HTML 在插入页面时被解析为元素，但这并不意味着两种格式可以 1 对 1 翻译。

您可以使用`outerHTML`将`<img>`元素转换为 HTML 字符串。但这不会是有效的。您正在将一个元素转换为一个字符串，只是为了再次被解析为一个元素。有点马虎

```
"<div id='image'>"+ img.outerHTML +"</div>" 
```

您可以将`<img>`标签构建为字符串。

```
"<div id='image'><img src='"+ src +"'></div>" 
```

但这也开始变得毛茸茸。所以最后你可以在创建另一个 html 之后附加图像元素。

```
drop.innerHTML = "<div class='image'></div>"
document.querySelectorAll('.image:last-child')[0].appendChild(img); 
```

然而，值得深思的是：当您开始在 JS 中包含这么多 HTML 时，您可能需要重新考虑一下您的方法。这是一种难以维护且非常容易出现人为错误的模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:40:30.020

您可以创建具有任意属性的对象，以便同时保存图像和 HTML 字符串：

```
var result = {
   html: '<div id="imagecontainer"><div id="image">'+img+'</div><div id="delimage"><img src="img/del.jpg"" /></div></div>',
   imgTag: img
}
output.push(result); 
```

然后稍后当您遍历结果数组时，您可以将这些部分作为`result.html`or访问`result.imgTag`（将第一部分更改为您已将对象分配给的任何变量）。

这确实意味着您需要将您的 current 更改`output.join('')`为一个循环，该循环实际上迭代了它们的值`output`并连接它们的`html`属性。如果您真的想避免这种情况，您可以将图像粘贴在单独的输出样式数组中。但这并不那么干净，并且存在两个数组内容不同步的风险。我会坚持让同一个对象有两个不同的属性，这样更干净更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T15:53:17.293

正如其他人所说，人们会避免/选择使用字符串来表示 DOM 元素是有原因的。此外，尝试混合表示 html 元素的两种方法，这有点 wtf 时刻阅读代码。也就是说，您可以跳过将图像创建为元素本身，而是将适当的字符串插入结果（堆栈？）。

这将具有所需的缩放效果：

```
var src = e.target.result;
var imgStr = "<img src='" + src + "' height='" + 100 + "'/>";
ouput.push('<div id="imagecontainer"><div id="image">'+imgStr+'</div><div id="delimage"><img src="img/del.jpg"" /></div></div>'); 
```

# perl - mojolicious morbo 服务器默认缓存？

> ID：13089931
> 
> 赞同：5
> 
> 时间：2012-10-26T15:31:04.150
> 
> 标签：perl, mojolicious, morbo

我从命令控制台生成了一个完整的应用程序：

```
 mojo generate app MyApp 
```

之后我启动了开发服务器：

```
morbo myapp 
```

我更改了一些代码，甚至更改了默认控制器的名称，但我在浏览器中看不到任何更改，只有重新启动 morbo 服务器才能正常工作。这对于开发来说真的很烦人。如何摆脱这种缓存行为？

更新：我注意到如果我使用 hypnotoad 代替 morbo，可以正常工作并更新更改，所以问题是 morbo。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T15:41:12.643

我以前从未遇到过这个问题，但是有 watch()。

[http://mojolicio.us/perldoc/Mojo/Server/Morbo#watch](http://mojolicio.us/perldoc/Mojo/Server/Morbo#watch)

也许如果您明确告诉服务器在哪里查找更改的文件，它将起作用。或者，也许这可以帮助您找到问题所在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-02T12:04:53.680

另外，如果您想直接使用 morbo+fullapp 进行实时更新，您应该 cd 到应用程序的文件夹，然后运行

```
$ morbo script/myapp 
```

然后它将正常工作。

# java - 像在Java中一样覆盖objective-c类中的方法

> ID：13089932
> 
> 赞同：0
> 
> 时间：2012-10-26T15:31:04.720
> 
> 标签：java, objective-c

我经常使用这个语句来扩展类而不需要编写一个完整的单独文件。假设 ClassFromFramework 是一个类，它是库中包含的框架的一部分。

```
public ClassFromFramework {

   public String myMethod() {
      // operations
   }

   //lot of other methods....

} 
```

然后在我的课堂上，我可以做到以下几点：

```
import com.framework.ClassFromFramework;

public MyClass {

   public void method() {

      ClassFromFramework m = new ClassFromFramework() {
        @Override
        public String myMethod() {
          // do operations...
        }
      } 

      m.myMethod();
   }
} 
```

我想知道是否可以在不声明新组合 .h .m 文件并在我的 using 类中导入的情况下使用 Objective-c 实现相同的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:59:29.050

您可以创建一个新的子类并覆盖方法，但所有新类必须在它们自己的 .h 和 .m 文件中。这就是 Obj-C 的运作方式。在这种情况下，拥有附加文件是有意义的。

您也可以使用 super 一词调用父方法。这在子类化 ViewController 时总是这样做的，例如在 viewDidLoad 中。

# tomcat - 为同一个 webapp 配置不同的超时值

> ID：13089933
> 
> 赞同：1
> 
> 时间：2012-10-26T15:31:06.067
> 
> 标签：tomcat, session-timeout

我有一个带有 2 个 url 模式的（grails）网络应用程序：

```
/web/**

/rest-api/** 
```

第一个用于普通网络用户访问，应该使用超时 30 分钟的 http-session。第二个由 REST 接口使用，并且根本不包含会话（超时 = 0）。

是否可以设置tomcat，在同一个webapp中支持这两种情况，或者我应该拆分它（后者不好笑）？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:12:23.750

可以以编程方式覆盖会话超时。在 java servlet 中，它是这样完成的：

```
request.getSession().setMaxInactiveInterval(30); 
```

因此，您可以为其中一项服务使用默认 web.xml 值，并以编程方式为另一项服务设置它。

另请注意，Tomcat 不会创建 HttpSession，除非某些代码正在访问它（通常通过调用`request.getSession()`）。因此，没有会话的最好方法是根本不访问它。但是，如果您使用一些在背后访问会话的 3rd 方库，这可能很难实现。

# regex - 正则表达式将文本转换为 Objective-C 风格的字符串

> ID：13089934
> 
> 赞同：0
> 
> 时间：2012-10-26T15:31:06.600
> 
> 标签：regex, xcode

我希望看到一个正则表达式，它可以转换一段文本，例如：

```
{
   "text": "The quick \brown\ ",
   "more_text": "fox",
   "even_more": "jumps over the",
   "lazy": "dog"
} 
```

变成一个objective-c编译器友好的字符串，例如：

```
NSString* mytext = 
@"{"
   "\"text\": \"The quick \\brown\\ \","
   "\"more_text\": \"fox\","
   "\"even_more\": \"jumps over the\","
   "\"lazy\": \"dog\""
"}"; 
```

特别是我需要这个正则表达式来将大型 JSON 文本转换为 NSString 以作为虚拟数据提供。

我计划在 Xcode 的查找和替换功能中使用此正则表达式，您可以将其设置为使用正则表达式。

我现在没有足够的时间来复习我的正则表达式魔法咒语，也没有在网上的其他地方找到它。我相信它对许多客观的 c 编码器很有用。

谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-26T17:41:35.547

$mytext=~s/\/\\/sg;
用 \\ 代替 \

$mytext=~s/"/\"/sg;
用 \" 代替 "

$mytext=~s/{(.*?)}/\@"{$1}";/sg;
替换 @"{...}"; 为了 {}

$mytext=~s/(\. *?),/"$1,"/g;
将每一行以 "," 结尾的行括在引号中

$mytext=~s/(\.* ?\"\s}";)/"$1/g;
将引号添加到最后一行

# ruby-on-rails - 跟踪/记录 ActiveRecord 回调

> ID：13089936
> 
> 赞同：10
> 
> 时间：2012-10-26T15:31:15.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有什么方法可以在每次 ActiveRecord 回调发生时自动记录？当记录有多个回调到位时，这将有助于追溯为什么会发生某些事情。

我希望看到自动日志消息，指示正在调用哪些消息以响应哪些回调，例如：`before_validation: calling update_capitalization`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-06-24T22:59:26.400

我只是为此写了一个宝石。

```
# Gemfile
gem "rails-callback_log", group: [:development, :test] 
```

*   [https://github.com/jaredbeck/rails-callback_log](https://github.com/jaredbeck/rails-callback_log)
*   [https://rubygems.org/gems/rails-callback_log](https://rubygems.org/gems/rails-callback_log)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-16T04:46:50.470

对于谷歌和后代（在 Rails 3 上）：

```
module CallbackTrace
  def self.included kls
    kls.send :alias_method_chain, :_compile_filter, :trace
  end

  def _compile_filter_with_trace filter
    generated_code = _compile_filter_without_trace(filter)
    return generated_code if filter.is_a?(Array)
    method_name = generated_code.to_s.split(%r{\(|\s}).first
    _klass = @klass
    prelogger = ->{
        Rails.logger.info("START [#{filter.class}](#{generated_code})")
        Rails.logger.info("#{_klass} #{Time.now}")
        if imethod=(_klass.instance_method(method_name) rescue nil)
          begin
            Rails.logger.info(imethod.source)
          rescue MethodSource::SourceNotFoundError
            Rails.logger.info("NO SOURCE FOR #{generated_code}")
          end
        else
          Rails.logger.info("NO METHOD: #{method_name} for #{@klass}")
        end
    }
    postlogger = ->{
      Rails.logger.info("ENDED #{generated_code} #{Time.now}")
    }
    @klass.send :define_method, "prelogger_#{method_name}", &prelogger
    @klass.send :define_method, "postlogger_#{method_name}", &postlogger
    "(prelogger_#{method_name}; retval = retval = #{generated_code}; " +
        "postlogger_#{method_name}; retval)"
  end
end
ActiveSupport::Callbacks::Callback.send :include, CallbackTrace 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:26:04.720

更简单的方法是使用 rails 本机记录器方法：

[调试 Rails 应用程序](http://guides.rubyonrails.org/debugging_rails_applications.html)

像这样使用它：

```
logger.debug "Person attributes hash: #{@person.attributes.inspect}"
logger.info "Processing the request..."
logger.fatal "Terminating application, raised unrecoverable error!!!" 
```

**编辑：**

检查发生异常时调用的内容也很有趣

```
logger.error("trace: #{ex.backtrace().join("\n")}") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-07T19:30:52.863

另一种方法是在所有要记录的模型上定义回调。为避免加载所有内容，您只需加载模型即可。为简单起见，这会尝试加载与`app/models/*.rb`. 我也会使用`puts`，但你可以使用`Rails.logger.info`或其他。对于临时调试，您可以将其放入初始化程序中，例如`config/initializers/001_log_callbacks.rb`：

```
# Log all callbacks
Dir[Rails.root.join('app/models/*.rb').to_s].each do |filename|
  name = File.basename(filename, '.rb')
  begin
    model = name.camelize.constantize
    ActiveRecord::Callbacks::CALLBACKS.each do |callback|
      if callback.to_s.start_with?('around_')
        model.class_eval "#{callback} do |*args, &prc|; puts \"#{model}(\#{id}).#{callback} start\"; prc.call(*args) if prc; puts \"#{model}(\#{id}).#{callback} end\" end"
      else
        model.class_eval "#{callback} do; puts \"#{model}(\#{id}).#{callback}\" end"
      end
    end
  rescue
  end
end 
```

# json - 将字符串转换为 MongoDB BsonDocument（续集）

> ID：13089938
> 
> 赞同：1
> 
> 时间：2012-10-26T15:31:29.297
> 
> 标签：json, mongodb, log4net, bson, appender

我在使用此处建议的方法将 JSON.NET 生成的 json 字符串转换为 BsonDocument 时遇到一些问题：[Convert string into MongoDB BsonDocument](https://stackoverflow.com/questions/5624934/convert-string-into-mongodb-bsondocument)。我正在构建一个 MongoDbLog4net 附加程序，它将 LogMessages 插入 mongodb。这些消息可能包含异常，并且在某些情况下，异常对象会序列化为包含点 '.' 的 json 字符串。在一些导致 BsonSerializer.Desrialize 方法抱怨的键中。有没有一种简单/有效的方法来告诉 JsonConvert 不要用其他东西放置或替换无效字符？

```
 protected override void Append(LoggingEvent loggingEvent)
    {
        // the log message here is used to filter and collect the
        // fields from loggingEvent we are interested in
        var logMessage = new LogMessage(loggingEvent);

        // since mongodb does not serialize exceptions very well we
        // will use JSON.NET to serialize the LogMessage instance
        // and build the BSON document from it
        string jsonLogMessage = JsonConvert.SerializeObject(logMessage);

        var bsonLogMessage = BsonSerializer.Deserialize<BsonDocument>(jsonLogMessage);

        this.logCollection.Insert(bsonLogMessage);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T14:28:34.043

Why not a simple string replace on a mutable string like StringBuilder?

```
protected override void Append(LoggingEvent loggingEvent)
{
    // the log message here is used to filter and collect the
    // fields from loggingEvent we are interested in
    var logMessage = new LogMessage(loggingEvent);

    // since mongodb does not serialize exceptions very well we
    // will use JSON.NET to serialize the LogMessage instance
    // and build the BSON document from it
    StringBuilder jsonLogMessageStringBuilder = new StringBuilder(JsonConvert.SerializeObject(logMessage));
    var jsonLogMessage = jsonLogMessageStringBuilder.Replace(".", "_").ToString();

    var bsonLogMessage = BsonSerializer.Deserialize<BsonDocument>(jsonLogMessage);

    this.logCollection.Insert(bsonLogMessage);
} 
```

# java - 使用 Ant 构建后更改类路径

> ID：13089941
> 
> 赞同：0
> 
> 时间：2012-10-26T15:31:35.580
> 
> 标签：java, xml, ant

我有一个客户端、服务器和客户端+服务器构建文件。它们是：
[客户端](http://pastebin.com/aNFk3QKF)
[服务器](http://pastebin.com/WxKiwLVg)
[客户端+服务器](http://pastebin.com/5MjAfb5U)

**编辑**：为了完全清楚，我现在唯一遇到问题的文件是`Server`. 我只包括其他人来展示它们是如何联系起来的，但它们是不必要的。

我遇到的问题是服务器。我将所有库与服务器端捆绑在一起，但是当创建类路径时，库的相对位置是`../`. 我需要这个`../../`。如果我在将类路径路径转换为 ​​的地方进行构建`../../`，那么它找不到库，因为它在构建之后才在那个位置。

制作 jar 后，我能否以某种方式让这个 ant 构建更改类路径？（我意识到这不太可能）

或者在构建之前有没有更好的方法来处理这个问题，以便我可以得到正确的类路径？

根据要求，这是我关心的部分。特别是`server.package`和`server.app_package`目标。这些库捆绑在耳朵中。因此，要获得它们，类路径需要是`../../`.

```
 <project name="GPServer" default="dist" basedir=".">
    <description>

    </description>
  <!-- set global properties for this build -->
  <dirname property="server.basedir" file="${ant.file.GPServer}"/>
  <property name="server.src" location="${server.basedir}/src"/>
  <property name="server.build" location="${server.basedir}/build"/>
  <property name="server.dist"  location="${server.basedir}/dist"/>
  <property name="server.lib"  location="${server.basedir}/lib"/>
  <property name="deploy.location"  location="${server.basedir}/../../jboss-as-7.1.1.Final/standalone/deployments"/>
  <property name="jboss.lib" location="${server.basedir}/../../jboss-as-7.1.1.Final/standalone/lib"/>

    <path id="server.class.path">
      <!-- <fileset dir="${server.basedir}/lib">
          <include name="*.jar"/>
      </fileset> -->
      <fileset dir="${server.lib}">
          <include name="*.jar"/>
      </fileset>
      <fileset dir="${server.basedir}">
          <include name="*.properties"/>
      </fileset>
    </path>

    <pathconvert property="server.modified.class.path" refid="server.class.path">
        <globmapper from="../*" to="../../*" />
    </pathconvert>

    <path id="final.server.classpath">
        <pathelement path="${server.modified.class.path}"/>
    </path>

  <target name="server.init">
    <!-- Create the time stamp -->
    <tstamp/>
    <!-- Create the build directory structure used by compile -->
    <mkdir dir="${server.build}"/>
    <mkdir dir="${server.dist}"/>
  </target>

  <target name="server.compile" depends="server.init" description="compile the source " >
    <!-- Compile the java code from ${src} into ${dist} -->
    <javac srcdir="${server.src}" destdir="${server.dist}" >
        <classpath>
            <path refid="final.server.classpath"/>
        </classpath>
    </javac>
  </target>

  <target name="server.package" depends="server.compile" description="create the jar" >
        <manifestclasspath property="manifest.path" jarfile="${server.dist}/GrahamsProjServer.jar">
            <classpath refid="final.server.classpath"/>
        </manifestclasspath>
        <jar destfile="${server.dist}/GrahamsProjServer.jar" basedir="${server.dist}" excludes="*.jar">
            <manifest>
                <attribute name="Class-Path" value="${manifest.path}"/>
            </manifest>
        </jar>
  </target>

  <target name="server.app_package" depends="server.package" description="create the jar" >
    <ear destfile="${server.dist}/GrahamsProjServer.ear" appxml="${server.basedir}/META-INF/application.xml" >
        <metainf dir="${server.basedir}/META-INF"/>
        <fileset dir="${server.dist}" includes="*.jar"/>
        <fileset dir="${server.basedir}" includes="lib/*.jar" />
    </ear>
  </target>

  <target name="server.deploy" depends="server.package" description="generate the distribution" >
    <!-- Create the distribution directory -->
    <ear destfile="${deploy.location}/GrahamsProjServer.ear" appxml="${server.basedir}/META-INF/application.xml" >
        <metainf dir="${server.basedir}/META-INF"/>
        <fileset dir="${server.dist}" includes="*.jar"/>
        <fileset dir="${server.basedir}" includes="lib/*.jar" />
    </ear>
  </target>

  <target name="server.clean"
        description="clean up" >
    <!-- Delete the ${build} and ${dist} directory trees -->
    <delete dir="${server.build}"/>
    <delete dir="${server.dist}"/>
    <echo message="Deleting files in ${deploy.location}"/>
    <delete>
        <fileset dir="${deploy.location}" excludes="*.txt"/>
    </delete>
  </target>

</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:50:54.797

您的问题是您将下标导入`client+server`.

```
<!-- ============================================= -->
<!--       Import Server/Client Build Files        -->
<!-- ============================================= -->
<import file="${basedir}/../GrahamsProjClient/build-client.xml"/>
<import file="${basedir}/../GrahamsProjServer/build-server.xml"/> 
```

你不应该那样做。如果要在单独的构建文件中执行目标，请使用`<ant>`task -> [http://ant.apache.org/manual/Tasks/ant.html](http://ant.apache.org/manual/Tasks/ant.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T22:07:57.627

我忘了提到我正在使用 java webstart。我根本不需要清单中的库。它们只需要在 webstart 的 jnlp 文件中。

# excel - Excel VBA复制公式直到为空

> ID：13089942
> 
> 赞同：1
> 
> 时间：2012-10-26T15:31:35.773
> 
> 标签：excel, vba

我从可以导出到 Excel 的系统中获取数据，但格式是“图片式”而不是普通电子表格形式（即：每组标题、时间和数据顶部的合并单元格中的名称；然后重复对于每个案例），所以排序和小计是不可能的。而且，当然，这一切都在文本中。

我取消合并并插入了一个空白列 (C)。B 列中的一些单元格有活动时间（即：“Act: 00:15”），其他单元格有重复的标题。

我需要将此公式放在 C 列“=mid(B#,7,5)”中以“整理”时间值，但前提是“Act：”一词出现在 B 列中。然后，我需要复制或重复 C 列下的公式（每个报告的长度不同）并小计每个案例以及总计。

```
Do 
    Cells.Find(What:="act:", After:=ActiveCell, LookIn:=xlFormulas, _
            LookAt :=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
            MatchCase:= False, SearchFormat:=False).Activate 

    ActiveCell.Offset(0, 1).Activate 
    ActiveCell.FormulaR1C1 = "=MID(act,7,5)" 
    ActiveCell.Offset(1, -1).Activate 
Loop While ActiveCell = "Email me" 
```

# jquery - jQuery 获取选定的选项值（不是文本，而是属性“值”）

> ID：13089944
> 
> 赞同：169
> 
> 时间：2012-10-26T15:31:36.443
> 
> 标签：jquery, html, html-select

好的，我有这个代码：

```
<select name="selector" id="selector">
<option value="1">Option 1</option>
<option value="2">Option 2</option>
</select> 
```

我想获得所选选项的值。示例：选择“选项2”，其值为“2”。“2”是我需要得到的值，而不是“选项 2”。

* * *

## 回答 #1

> 赞同：298
> 
> 时间：2012-10-26T15:32:45.923

**04/2020：更正了旧答案**

在选定的选项上使用[:selected](https://api.jquery.com/selected-selector/)伪选择器，然后使用[.val](http://api.jquery.com/val/)函数获取选项的值。

```
$('select[name=selector] option').filter(':selected').val() 
```

**旁注**：使用过滤器比`:selected`在第一个查询中直接使用选择器更好。

如果在更改处理程序中，您可以简单地使用`this.value`来获取选定的选项值。有关更多选项，请参见演示。

```
//ways to retrieve selected option and text outside handler
console.log('Selected option value ' + $('select option').filter(':selected').val()); 
console.log('Selected option value ' + $('select option').filter(':selected').text());

$('select').on('change', function () {
  //ways to retrieve selected option and text outside handler
  console.log('Changed option value ' + this.value);
  console.log('Changed option text ' + $(this).find('option').filter(':selected').text());
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<select>
  <option value="1" selected>1 - Text</option>
  <option value="2">2 - Text</option>
  <option value="3">3 - Text</option>
  <option value="4">4 - Text</option>
</select>
```

**老答案：**

**编辑：**正如许多人指出的那样，这不会返回选定的选项值。

~~ 使用[**.val**](http://api.jquery.com/val/)获取所选选项的值。见下文，

```
$('select[name=selector]').val()~~ 
```

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2014-07-16T10:27:11.823

我只是想分享我的经验

为了我，

`$('#selectorId').val()`

返回空值。

我不得不使用

`$('#selectorId option:selected').val()`

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-10-26T15:33:42.337

```
$('select').change(function() {
    console.log($(this).val())
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/764W9/)**

`.val()`将获得价值。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-26T15:32:50.480

您需要为您的选择添加一个 ID。然后：
`$('#selectorID').val()`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-06-28T10:50:51.663

试试这个：

```
$(document).ready(function(){
    var data= $('select').find('option:selected').val();
}); 
```

或者

```
var data= $('select').find('option:selected').text(); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-10-26T15:39:53.430

你可以使用`jquery`如下

**脚本**

```
 $('#IDOfyourdropdown').change(function(){
    alert($(this).val());
  }); 
```

小提琴在[这里](http://jsfiddle.net/qRpfx/1/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-06-22T22:37:52.773

对于这样的选择

```
<select class="btn btn-info pull-right" id="list-name" style="width: auto;">
   <option id="0">CHOOSE AN OPTION</option>
   <option id="127">John Doe</option>
   <option id="129" selected>Jane Doe</option> 
```

...您可以通过以下方式获取 id：

```
$('#list-name option:selected').attr('id'); 
```

或者您可以改用价值，并以简单的方式获得它......

```
<select class="btn btn-info pull-right" id="list-name" style="width: auto;">
   <option value="0">CHOOSE AN OPTION</option>
   <option value="127">John Doe</option>
   <option value="129" selected>Jane Doe</option> 
```

像这样：

```
$('#list-name').val(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-09-03T21:14:58.497

我的一个选项没有价值：`<option>-----</option>`. 我试图使用`if (!$(this).val()) { .. }`，但我得到了奇怪的结果。事实证明，如果您的元素上没有`value`属性`<option>`，它会返回其中的文本而不是空字符串。如果您不想`val()`为您的选项返回任何内容，请确保添加`value=""`.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-11-24T15:39:45.643

这段代码对我来说效果很好：这会返回所选选项的值。$('#select_id').find('option:selected').val();

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-05-02T10:28:55.163

```
 $(document ).ready(function() {
    $('select[name=selectorname]').change(function() { 
     alert($(this).val());});
 }); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-22T23:06:23.747

看例子：

```
 <select class="element select small" id="account_name" name="account_name"> 

        <option value="" selected="selected">Please Select</option>           
        <option value="paypal" >Paypal</option>
        <option value="webmoney" >Webmoney</option>

    </select>

 <script type="text/javascript">

        $(document).ready(function(){ 
             $('#account_name').change(function(){
               alert($(this).val());                                                          
             });
        });
 </script> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-08-22T19:57:39.447

```
$('#selectorID').val(); 
```

*或者*

```
$('select[name=selector]').val(); 
```

*或者*

```
$('.class_nam').val(); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-02-07T05:13:59.147

**来源[链接](https://www.freakyjolly.com/jquery-get-selected-value-and-text-from-dropdown-selectbox/)**

使用 jQuery **val()**获取选定值，使用**text()****获取**选项文本。

 **```
 <select id="myDropDown" class="form-control">
        <option value="0">Select Value 0</option>
        <option value="8">Option value 8</option>
        <option value="5">Option value 5</option>
        <option value="4">Option value 4</option>
    </select> 
```

**选择下拉菜单上的**更改事件****

 **```
 $("#myDropDown").change(function () {

            // Fetching Value
            console.log($(this).val());

            // Fetching Text
            console.log($(this).find('option:selected').text());

            alert('Value: '+$(this).val()+' | Text: '+$(this).find('option:selected').text());
        }); 
```

**按钮点击**

```
 $("button").click(function () {

        // Fetching Value
            console.log($("#myDropDown").val());

    // Fetching Text
            console.log($('#myDropDown option:selected').text());

            alert('Value: '+$("#myDropDown").val()+' | Text: '+$('#myDropDown option:selected').text());
        }); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-11-23T08:44:08.730

它工作得更好。尝试一下。

`let value = $("select#yourId option").filter(":selected").val();`****

# iphone - 从头开始重建 iPhone 应用程序？

> ID：13089945
> 
> 赞同：0
> 
> 时间：2012-10-26T15:31:38.070
> 
> 标签：iphone, ios

我[和这个人有同样的问题](https://stackoverflow.com/questions/11367507/re-developing-an-app-from-scratch)，但对于 iPhone 而不是 Android。我们正在完全从头开始重建以前开发的 iPhone 应用程序（也是新的开发商店），将其发布视为*更新*而不是新应用程序需要什么？包名称和签名密钥是否足够？

（注意我正在创建一个新问题，因为整个讨论最终都是针对 Android 的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:36:56.500

如果您在提交它的同一开发者中，您应该能够将其视为更新。如果您无权访问提交它的帐户，则需要重新提交。如果您的 iTunes Connect 登录帐户与原始提交者不同，这可能会变得很棘手。

# python - Python 日志记录 - 不同的日志但相同的输出

> ID：13089948
> 
> 赞同：0
> 
> 时间：2012-10-26T15:31:57.483
> 
> 标签：python, parsing, logging, lxml

对于不同的网站，我有几个不同的解析器，我还有一个名为*shared.py*的文件，它具有用于特殊解析的*lxml*函数和一个负责数据库（保存和其他）的*base.py文件。*如果某事失败（未找到图像）或通过（我们找到图像），我需要将其记录到日志文件中，为此我使用标准日志记录模块。

我写了一个*logger.py*文件，在其中创建了一个 Log 类，这样我就可以在我的解析器或*base.py/shared.py*中调用它，文件如下所示：

```
import logging
import os.path

__metaclass__ = type

class Log:
    def __init__(self, filename, loggername="fetchers", path="logs/", formater="%(asctime)s %(levelname)s %(message)s"):
        self.logger = logging.getLogger(loggername)
        self.hdlr = logging.FileHandler(path + os.path.splitext(filename)[0] + ".log")
        self.formater = logging.Formatter(formater)
        self.hdlr.setFormatter(self.formater)
        self.logger.addHandler(self.hdlr)
        self.logger.setLevel(logging.INFO)
    def info(self, msg):
        self.logger.info(msg)
    def warning(self, msg):
        self.logger.warning(msg)
    def error(self, msg):
        self.logger.error(msg)
    def critical(self, msg):
        self.logger.critical(msg)

if __name__ == "__main__":
    pass 
```

文件夹层次结构如下所示；

*   /解析器
*   /解析器/base.py
*   /解析器/shared.py
*   /解析器/解析器.py
*   /解析器/parsertwo.py
*   /解析器/parsersthree.py
*   /解析器/...
*   /Parsers/logs/base.log
*   /Parsers/logs/shared.log
*   /Parsers.logs/parserOne.log

每个解析器都导入记录器文件（base.py 和 shared.py 也），然后像这样初始化记录器：

```
logger = Log(os.path.basename(__file__))
logger.warning("Something has happened..") 
```

这工作正常，它确实写入日志，但问题是，base.py 写入有关查询等的日志，以及有关失败等的解析器（与 shared.py 相同）问题是它正在写入日志，但它们看起来都一样。。

```
➜  logs  tail parserOne.log 
2012-10-26 16:35:21,250 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/scherpe-omzetdaling-televisiereclame/
2012-10-26 16:35:21,286 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/nominaties-mercurs-bekend2/
2012-10-26 16:35:21,322 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/traditionele-media-nog-steeds-populair-bij-jongeren/
2012-10-26 16:35:21,371 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/persgroep-blijft-sponsor-san/
2012-10-26 16:35:21,407 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/pg-overtreft-verwachtingen/
2012-10-26 16:35:21,443 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/discovery-networks-introduceert-discovery-client-productions/
2012-10-26 16:35:21,479 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/stoelendans-bij-wehkamp.nl/
2012-10-26 16:35:21,563 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/amazon-duikt-in-rode-cijfers/
2012-10-26 16:35:21,599 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/linkedin-rabobank-meest-populaire-werkgever/
2012-10-26 16:35:21,683 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/veronica-uitgeverij-wil-naar-amsterdam/

➜  logs  tail base.log 
2012-10-26 16:35:21,250 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/scherpe-omzetdaling-televisiereclame/
2012-10-26 16:35:21,286 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/nominaties-mercurs-bekend2/
2012-10-26 16:35:21,322 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/traditionele-media-nog-steeds-populair-bij-jongeren/
2012-10-26 16:35:21,371 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/persgroep-blijft-sponsor-san/
2012-10-26 16:35:21,407 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/pg-overtreft-verwachtingen/
2012-10-26 16:35:21,443 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/discovery-networks-introduceert-discovery-client-productions/
2012-10-26 16:35:21,479 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/stoelendans-bij-wehkamp.nl/
2012-10-26 16:35:21,563 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/amazon-duikt-in-rode-cijfers/
2012-10-26 16:35:21,599 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/linkedin-rabobank-meest-populaire-werkgever/
2012-10-26 16:35:21,683 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/veronica-uitgeverij-wil-naar-amsterdam/

➜  logs  tail shared.log 
2012-10-26 16:35:21,250 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/scherpe-omzetdaling-televisiereclame/
2012-10-26 16:35:21,286 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/nominaties-mercurs-bekend2/
2012-10-26 16:35:21,322 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/traditionele-media-nog-steeds-populair-bij-jongeren/
2012-10-26 16:35:21,371 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/persgroep-blijft-sponsor-san/
2012-10-26 16:35:21,407 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/pg-overtreft-verwachtingen/
2012-10-26 16:35:21,443 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/discovery-networks-introduceert-discovery-client-productions/
2012-10-26 16:35:21,479 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/stoelendans-bij-wehkamp.nl/
2012-10-26 16:35:21,563 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/amazon-duikt-in-rode-cijfers/
2012-10-26 16:35:21,599 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/linkedin-rabobank-meest-populaire-werkgever/
2012-10-26 16:35:21,683 INFO Data was sucessfuly saved: http://www.adformatie.nl/nieuws/bericht/veronica-uitgeverij-wil-naar-amsterdam/ 
```

为什么所有的日志文件都一样？如果它们是不同的文件？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:02:43.647

您的记录器都称为“提取器”（因为您没有给出`loggername`参数），因此您将在所有日志中看到相同的消息。

我建议为您的记录器添加一个名称，并可能使用[过滤器](http://docs.python.org/library/logging.html#filter-objects)。

您可以将其应用于您的代码，如下所示：

```
logger = Log(os.path.basename(__file__), loggername='test')

def __init__(self, filename, loggername="fetchers", path="logs/", formater="%(asctime)s %(levelname)s %(message)s"):
    self.logger = logging.getLogger(loggername)
    self.hdlr = logging.FileHandler(path + os.path.splitext(filename)[0] + ".log")
    self.hdlr.addFilter(logging.Filter(name=loggername))
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:03:51.177

看起来它让记录器使用`loggerName`，并且始终设置为`"fetchers"`。因此，您在任何地方都使用相同的记录器，这解释了为什么输出相同。

# c - C语言将char类型'0'-'9'转换为int类型并打印到stdout

> ID：13089953
> 
> 赞同：2
> 
> 时间：2012-10-26T15:32:29.247
> 
> 标签：c, char, int, stdout

我编写了一个程序来接收用户输入并将其打印到屏幕上。

样本输入为`abc 12 34`。

样本输出为`abc 12 34`，但`12`和`34`应作为整数输入。

使用示例输入，我的程序始终输出为`abc 122 344`. 我已经研究了很长时间，但我仍然无法弄清楚。可以帮我检查我的代码吗？谢谢。

我的 gcc 版本是 4.1.2 。

```
#include<stdio.h>
#include<stdlib.h>
int main()
{
    char c;
    char *str = NULL;
    str = (char *)malloc(20*sizeof(char)); /*just sample code, not robust*/
    memset(str,'\0',20*sizeof(char)); 

    if(str == NULL)
    {
        fprintf(stderr,"Error: failed to allocate memory.\n"); fflush(stderr);
        return 0;
    }

    /*store user input*/
    int index = 0;
    while((c=getchar()) != '\n')
    {
        *(str+index) = c;
        index++;
    }

    int digit = 0;
    for(index = 0; *(str+index)>0; index++)
    {
        if((*(str+index)>='a') &&( *(str+index)<='z'))
        {
            fprintf(stdout,"%c",*(str+index)); fflush(stdout);
        }

        else if((*(str+index)>='0') &&( *(str+index)<='9'))
        {
            /*handling the case that a number with more than one digit*/
                    if(*(str+index+1)>='0' && *(str+index+1)<='9')
            {
                digit=10*(digit+atoi(str+index));
            }
            else
            {
                digit += atoi(str+index);   
                fprintf(stdout,"%d",digit); fflush(stdout);
                digit = 0;
            }           
        }

        else
        {   
            fprintf(stdout,"%c",*(str+index)); fflush(stdout);
        }
    }
    printf("\n");
    free(str);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:40:37.320

您不应该使用`atoi`：它将字符串转换为`int`，而不是单个`char`.

以下是发生的情况：当您看到一个两位数时，例如 ，`34`第一次迭代 pssses 两个数字到`atoi`，得到`34`，并将其乘以十，得到`340`。下面的迭代将提取`4`并愉快地将其添加`340`到`344`.

如果您想将`char`表示数字的单个转换为`int`，请使用减法：

```
digit = *str - '0'; 
```

此外，您处理多位数字的代码是非正统的，因此难以理解。当您看到下一个字符是数字时，不要将*当前值乘以 10，而应该在看到数字时将**先前*值乘以 10。这甚至适用于第一个数字，当先验值为 时`0`，因为十倍零仍然是零。

您应该消除`if(((*str+index+1)>='0') && (*str+index+1)<='9')`及其`then`分支，并修改其`else`分支如下：

```
digit = 10*digit + *(str+index) - '0';
if (((*str+index+1)<'0') || (*str+index+1)>'9') {
    fprintf(stdout,"%d",digit); fflush(stdout);
    digit = 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:21:06.083

为您提供两个快速更改。

首先，如前所述，`atoi()`获取一个字符串并返回一个 int。由于您只是在做 1 个字符 (0-9)，因此只需从字符 '0' 中减去它。

```
digit=10*(digit+(*(str+index)-'0')); //instead of atoi(str+index) 
```

为什么要减去“0”？它归结为数字的[ASCII 值](http://www.asciitable.com/)。

字符 '0' 的值是 30 [10]， '1' 的值是 31 [10]，所以：

```
int a = '0' - '0'; // that's  30-30, or 0 as an int
int b = '1' - '0'; // that's  31-30, or 1 as an int 
```

如果您在当前使用的两个地方进行此调整`atoi()`：

```
 ...
            digit=10*(digit+atoi(str+index));
        }
        else
        {
            digit += atoi(str+index); 
            ... 
```

更改为：

```
 ...
            digit=10*(digit+(*(str+index)-'0'));
        }
        else
        {
            digit += *(str+index)-'0';   
            ... 
```

您的代码现在将按照您希望的方式工作。还有一点，您有一个`if`//检查 az、0-9，然后是其他任何内容`if else`。`else`

因为您的第一个`if`和您`else`的代码相同，这意味着可以在那里进行简化。只需删除整个 first`if`并将您的更改`else if`为 just an 即可`if`为您提供与您正在做的完全相同的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:37:53.360

仅仅使用`sscanf`它怎么样？像这样：

```
sscanf(str, "%s %d %d", str1, &num1, &num2); 
```

如果由于某种原因您不能使用`sscanf`，那么您至少应该使用`isalpha()`and`isdigit()`分别检查字符和数字。

所以不要使用这个：

```
if((*(str+index)>='a') &&( *(str+index)<='z')) {
    .....
} 
```

用这个：

```
if (isalpha(*str+index)) {
    .....
} 
```

# php - 科学记数法出现在 php 中

> ID：13089956
> 
> 赞同：2
> 
> 时间：2012-10-26T15:32:34.927
> 
> 标签：php, configuration

> **可能重复：**
> [在 PHP 中显示更多数字](https://stackoverflow.com/questions/6492028/show-more-digits-in-php)

让我提供一些有关我的问题的背景信息。我们有一个旧的遗留应用程序正在迁移到不同的服务器。在新服务器中，我们发现长浮点数正在以科学计数法打印 - 这在我们之前的服务器中不是这种情况。

例如：

```
$num1 = 60000000000.0;
$num2 = 2000000000.0;
$sum  = $num1 + $num2;
echo $sum; //prints 6.2E+10 in new server but 62000000000 in old one.. 
```

现在，我知道我们可以使用`number_format()`or `printf()`etc 来解决这个问题。但是我的问题是应用程序中这样的计算太多了，并且很难更改所有实例。

那么任何人都可以帮助我解决我的情况吗？有没有全球解决方案？可以在 php.ini 或其他东西中配置的东西？谁能给我任何指示，为什么这在旧服务器上可以正常工作，但在新服务器上却不行？哪些服务器设置可能导致此问题？

很感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T15:34:43.490

这取决于`precision`ini 设置：

[http://php.net/manual/en/ini.core.php#ini.precision](http://php.net/manual/en/ini.core.php#ini.precision)

将不同的结果，被封顶。您的数据作为一些随机系统和精度设置的示例（在该系统上默认为 14）：

```
 0: 6.0E+10     7: 6.2E+10        14: 62000000000
 1: 6.0E+10     8: 6.2E+10        15: 6.2E+10    
 2: 6.2E+10     9: 6.2E+10        16: 6.2E+10    
 3: 6.2E+10    10: 6.2E+10        17: 6.2E+10    
 4: 6.2E+10    11: 62000000000    18: 6.2E+10    
 5: 6.2E+10    12: 62000000000    19: 6.2E+10    
 6: 6.2E+10    13: 62000000000    20: 6.2E+10 
```

# javascript - Javascript location.replace(url) 始终在 IE7 中提供缓存副本

> ID：13089971
> 
> 赞同：1
> 
> 时间：2012-10-26T15:33:42.983
> 
> 标签：javascript, internet-explorer

（对不起，我不小心删除了我的原帖）

我使用以下代码将用户重定向到网页：

> `window.location.replace('my.html' + '?_=' + (new Date()).getTime());`

我想要实现的是，当用户从该页面重定向到 my.html 时，用户应该始终从服务器获取新副本，而不是缓存版本。

这似乎在 Firefox 中运行良好，但在 IE7 中却不行，除非我手动按 F5。有任何解决这个问题的方法吗？谢谢

更新：我按照下面的建议尝试了 location.href，但它在 iE7 中仍然不起作用。

以下是有关我的问题的更多详细信息：

在 my.html 中，它在开头包含一个 javascript 文件，在该 js 文件中，我有一个全局变量 x。在 my.html 中，我调用`alert("x value=" + x);`. 很简单。现在我执行以下操作：

1.  编辑 js 文件并更改 x 的值。部署 Web 应用程序。
2.  转到重定向页面并重定向到 my.html。在 FF 中，警报显示新值，但在 IE7 中，它仍然显示旧 x 值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:41:02.583

我会将内森和阿德里亚诺的两个答案结合起来。IE

```
location.href = 'my.html?_=' + (new Date()).getTime(); 
```

我在 IE8 上测试时运行良好（没有安装 IE7）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:35:52.603

你试过这个吗？

```
 <HTML>
    <HEAD>
    <TITLE>---</TITLE>
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
    </HEAD>
    <BODY> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:36:37.423

你试过`location.href`代替`window.location`吗？

# c++ - 使用 Doxygen 分别提取一个类的公共方法列表

> ID：13089973
> 
> 赞同：4
> 
> 时间：2012-10-26T15:33:48.700
> 
> 标签：c++, github, markdown, doxygen

我将 Doxygen 用于我的 C++ 项目，该项目将托管在 github 中。

我想在自述文件中包含一个类的方法列表，我正在考虑自动化它的方法。

我将在 repo 中包含整个生成的 html 页面，但我认为通过在自述文件中包含主类的成员来提供 API 的想法会很好。

到目前为止，我找不到生成降价文件的方法。我的下一个想法是编写一些 shell 脚本，它会自动复制成员列表并将其包含在自述文件中，为此我需要单独生成一个类的成员函数列表。

是否可以将 doxygen 配置为单独输出一个类的成员列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T22:17:40.747

我最近有一个项目，我想确定几个函数作为公共 API 的一部分。我觉得没有必要将它们放在 README 文件中，所以我所做的并不是你真正想要的，但你可能会发现它是一个潜在的妥协。

我创建了一个组：

```
/**
\defgroup public_api Public API
\brief This is a list of the primary functions that comprise the
public API.

*/ 
```

然后我在主页上引用了它：

```
/**

\mainpage Some Project

...

See \ref public_api "Public API" for details on these functions.

*/ 
```

然后我明确地将每个公共 API 函数标记为属于该组。

```
/**
\brief Perform any necessary initialisation before processing.

\ingroup public_api

This function must be called prior to any of the other public
api functions to allow initialisation to be performed prior to use.

 */
void init(); 
```

最终结果是从主页链接到的单个页面上的功能列表。我知道这并不完全是您所追求的，但我有点喜欢 doxygen 将所有文档集中到一个易于浏览的地方。

如果您确实解决了您满意的问题，请发布。我一直对 doxygen 的非典型用途感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T19:22:34.177

[您可以从 doxygen XML 输出](http://www.doxygen.nl/manual/customize.html#xmlgenerator)中提取一个类的成员列表。在配置文件中设置`GENERATE_XML`为`YES`，生成如下所示的 xml 文件：

**xml/classTest.xml**

```
<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.7.6.1">
<compounddef id="classTest" kind="class" prot="public">
<compoundname>Test</compoundname>

  <sectiondef kind="public-func">

      <memberdef kind="function" id="classTest_1a99f2bbfac6c95612322b0f10e607ebe5" 
         prot="public" static="no" const="no" 
         explicit="no" inline="no" virt="non-virtual">

         <type></type>
         <definition>Test::Test</definition>
         <argsstring>()</argsstring>
         <name>Test</name>
         <briefdescription>  </briefdescription>
         <detaileddescription>
               <para>A constructor. A more elaborate description of the constructor. </para>        
         </detaileddescription>
         <inbodydescription>  </inbodydescription>
        <location file="/home/davidl/SO/test.cpp" line="23"/>
      </memberdef>

  </sectiondef>
</compounddef>
</doxygen> 
```

# homebrew - `此命令需要一个桶参数`是什么意思？

> ID：13089976
> 
> 赞同：5
> 
> 时间：2012-10-26T15:34:05.550
> 
> 标签：homebrew

我想酿造 rm mtr 及其部门，所以我执行

```
brew rm mtr
brew rm $(join <(brew leaves) <(brew deps mtr)) 
```

但它说`This command requires a keg argument`。什么是小桶论点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:45:24.090

我不认为该命令正在执行您认为的操作。

那些 < 重定向没有按照你的想法做，所以执行的 brew 命令是

```
brew rm 
```

这需要一个论据。

我喜欢你在没有临时文件的情况下使用 join 的尝试。看了一眼手册页后，我很确定你不能这样做。

尝试这个：

```
brew leaves > leaves
brew rm $(brew deps mtr | join leaves -) 
```

# cpu - 多核处理器上有多少个 CS:EIP 寄存器？

> ID：13089982
> 
> 赞同：0
> 
> 时间：2012-10-26T15:34:37.680
> 
> 标签：cpu

我正在使用 VS2008 调试 GPF（访问违规）。将 EIP 设置为崩溃地址，它会及时弹出我的一些源代码。这似乎不是 GPF 的原因。

我在一台8核机器上。这些东西上是否有多个 CS:EIP 寄存器？如果是这样，我如何在 Visual Studio 中访问它们？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:37:02.753

一般保护错误 (GPF) 可能由任何类型的无效内存访问引起。不仅通过尝试在无效内存地址上执行指令，还通过尝试访问指令使用的无效内存地址上的操作数。例如，

```
mov [eax], ebx 
```

如果存储在 eax 中的值为 NULL（经典的空指针解引用），将导致 GPF。如果 Visual Studio 调试器将您指向某个特定的指令地址 (CS:EIP)，并且您可以在该地址上找到代码，则故障原因将是该指令使用的内存操作数的地址。默认情况下，Visual Studio 将在错误线程的上下文中为您提供信息。因此，没有任何理由去查看另一个线程上下文。

例如： ![在此处输入图像描述](../Images/474457fcfb8ff62f4965f2ecea657180.png)

如果我们然后打开 Debug->Windows->Disassembly，我们将看到下一张图片： ![在此处输入图像描述](../Images/4a470ff8669ba1c80bef62ef069f11e7.png)

如您所见，GPF 是由 eax 中存储的无效地址引起的。第一张图消息框中指示的错误指令地址 0x012b1002 与第二张图上的调试器指向的相同。第一张图片中的错误地址 0x00000000 是存储在 eax 中的地址，并用作 mov 指令中的内存定位参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T08:32:20.920

如今，每个内核都有两套完整的寄存器，包括 CS:EIP，尽管在 64 位时代 CS 并不重要。两个是因为超线程（一个物理内核中的两个虚拟内核，或多或少）。但是每组寄存器都是独立的，你不会受到不同进程的干扰（除非你的操作系统真的很糟糕）。

至于你的问题。GPF 很棘手，它可能看起来不像问题出在调试器所说的那样，但相信它的话通常是件好事。您的程序中可能存在内存问题、错误的指针、溢出、悬空指针、未初始化的变量或类似的事情。如果您使用 Linux，我会说尝试 valgrind。如果您的应用程序是多线程的，那么所有这些都会变得更糟。

您的问题中没有足够的信息，但我建议您卷起袖子进行调试。例如添加一堆断言或变量记录。

# linux - Why does CR3 register contents vary, when read each time from a kernel module?

> ID：13089988
> 
> 赞同：5
> 
> 时间：2012-10-26T15:35:03.037
> 
> 标签：linux, linux-kernel, x86, linux-device-driver, x86-64

i was writing a kernel driver with the aim to dissect the Linux kernel page tables. I found that, whenever i read the CR3 register,from inside the driver, the **contents of CR3 vary each time its read**!

Why does this happen? S ince the driver executes in kernel mode, CR3 needs to point to the kernel page directory (right?), then why is CR3 changing every time?

If CR3 keeps changing, how would memory accesses by the driver happen correctly, as intended?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T11:48:55.443

As others have mentioned, you are seeing the "pagetable" for the current process. With x86, entering a privilege level lower than 3 does not change the page table. This is why most operating systems reserve sections of the virtual address space for the kernel. The memory in that space is mapped into every process. Memory in the kernel address space can be hidden from user mode code by setting the u/s flag in the page frame to "0". That marks it as "system" memory rather than as user memory.

Changing the page table is usually done after transitioning Kernel mode, which is why kernel memory needs to be part of the process's address space. It wouldn't know where to find it's data structures otherwise. One exception is "systems management mode", which switches address spaces transparently. Howeve this can only occur in response to a "system management interrupt", requires special hardware support from the motherboard, and by design cannot be suppressed by or responded to by the operating system.

Othwise, in protected mode, manipulation of the page table is always done by the OS, *after* transition into Kernel Mode. That is part of why a "mode switch" is faster than a full context switch.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T16:00:28.607

CR3 is the page directory pointer. It will change every time the address space changes at the very least. There is no single "kernel" memory space. In most (all?) memory models the CR3 value you see is going to be specific to the address space context you are in (e.g. which process you are handling a syscall from, etc...).

# c# - ASP MVC 3 - 来自 ViewModel 的图表

> ID：13089989
> 
> 赞同：2
> 
> 时间：2012-10-26T15:35:13.973
> 
> 标签：c#, asp.net-mvc-3, viewmodel, mschart

使用 ASP MVC 3，我创建了一个视图模型，我将其传递给视图，以便创建多个表来显示数据。但是，我还想使用图表助手以图表/图形图像的形式呈现一些数据。

是否可以为这些图表重用现有的视图模型，或者我是否需要通过另一个 MVC 循环来创建这个图表？我试图阻止返回数据库只是为了获取我在视图中已有的相同信息。我要访问的“数据库”实际上是一个 API，每当我需要获取此信息时，它都需要一个昂贵的登录、获取、注销周期。

如果这是不可能的，这不是“世界末日”，但感觉应该有一些巧妙的方法来实现这一点，而我只是想念。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:43:47.727

如果绝对可以重用表和视图模型中的数据。

一种方法是将视图模型渲染到视图中包含在表单中的隐藏字段中。然后，您可以将此表单发布到服务器，服务器会将其绑定回您的视图模型。

抱歉，我不能更具体，如果没有看到视图的视图模型和形状，这很困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:56:18.307

这可能不是您想要的，但我建议您使用 Google Charts。他们使用 HTML 5 和 SVG，它们看起来非常漂亮。在这里查看我的答案[Google 组合图表？](https://stackoverflow.com/questions/11828548/google-combo-charts)我在这里展示了如何将它连接到 ASP.NET MVC 中的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:31:36.650

我会将结果缓存在服务器上。不过，这确实引入了相当多的复杂性。但是，您的问题听起来像是缓存应用程序数据的最终用例。

如果您可以利用 ASP.NET 的缓存，如果您选择实现服务器端缓存，那么[这里有一篇 MSDN 文章应该可以帮助您。](http://msdn.microsoft.com/en-us/library/6hbbsfk6%28v=vs.100%29.aspx)

# xml - 使用 XSL 的 XML 子元素的不同值列表

> ID：13089991
> 
> 赞同：3
> 
> 时间：2012-10-26T15:35:21.113
> 
> 标签：xml, xslt, distinct-values

我有如下 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<Set>
<Bundles>
    <BundleID>1</BundleID>
    <BundleDetails>
        <Classification>A</Classification>
        <TrackingID>34675</TrackingID>
    </BundleDetails>
    <BundleQty>12</BundleQty>
</Bundles>
<Bundles>
    <BundleID>2</BundleID>
    <BundleDetails>
        <Classification>B</Classification>
        <TrackingID>4563</TrackingID>
    </BundleDetails>
    <BundleDetails>
        <Classification>A</Classification>
        <TrackingID>4563</TrackingID>
    </BundleDetails>
    <BundleQty>34</BundleQty>
</Bundles>
<Bundles>
    <BundleID>3</BundleID>
    <BundleDetails>
        <Classification>A</Classification>
        <TrackingID>2343243</TrackingID>
    </BundleDetails>
    <BundleQty>22</BundleQty>
</Bundles>
<Bundles>
    <BundleID>4</BundleID>
    <BundleDetails>
        <Classification>A</Classification>
        <TrackingID>123231</TrackingID>
    </BundleDetails>
    <BundleDetails>
        <Classification>B</Classification>
    </BundleDetails>
    <BundleDetails>
        <Classification>B</Classification>
        <TrackingID>42342</TrackingID>
    </BundleDetails>
    <BundleQty>33</BundleQty>
</Bundles>
<Bundles>
    <BundleID>5</BundleID>
    <BundleDetails>
        <Classification>A</Classification>
        <TrackingID>123231</TrackingID>
    </BundleDetails>
    <BundleDetails>
        <Classification>A</Classification>
        <TrackingID>42342</TrackingID>
    </BundleDetails>
    <BundleDetails>
        <Classification>B</Classification>
        <TrackingID>124512</TrackingID>
    </BundleDetails>
    <BundleQty>21</BundleQty>
</Bundles>
</Set> 
```

我需要获取每个 Set/Bundles 的详细信息，如下所示

```
Bundle# Qty  Classes
1      12      A
2      34      A,B
3      22      A
4      33     A,B
5      21     A,B 
```

我开始如下，但在获得不同的课程列表时感到震惊。需要一些指导，

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>
  <p>Set Details</p>
  <table>
       <xsl:for-each select="Set/Bundles">
        <tr>
          <td><xsl:value-of select="BundleID"/></td>
          <td><xsl:value-of select="BundleQty"/></td>
          <td>--Distinct List of ./BundleDetails/Classification </td>
        </tr>
      </xsl:for-each>
   </table>
  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

提前感谢您的帮助！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:28:47.807

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kClassByValAndGrParent" match="Classification"
  use="concat(generate-id(../..),'+', .)"/>

 <xsl:template match="*"><xsl:apply-templates/></xsl:template>

 <xsl:template match="/*">
   <table border="1">
    <tr>
      <th>Bundle#</th><th>Qty</th><th>Classes</th>
    </tr>
    <xsl:apply-templates/>
   </table>
 </xsl:template>

 <xsl:template match="Bundles">
  <tr>
    <xsl:apply-templates select="*[not(self::BundleDetails)]"/>
   <td>
    <xsl:apply-templates select=
      "BundleDetails/Classification
                      [generate-id()
                      =
                       generate-id(key('kClassByValAndGrParent',
                                        concat(generate-id(../..),'+', .)
                                      )[1]
                                  )
                      ]
      "/>
   </td>
  </tr>
 </xsl:template>

 <xsl:template match="BundleID|BundleQty">
  <td><xsl:value-of select="."/></td>
 </xsl:template>

 <xsl:template match="BundleDetails"/>

 <xsl:template match="Classification">
   <xsl:if test="position() > 1">,</xsl:if>
   <xsl:value-of select="."/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<Set>
    <Bundles>
        <BundleID>1</BundleID>
        <BundleDetails>
            <Classification>A</Classification>
            <TrackingID>34675</TrackingID>
        </BundleDetails>
        <BundleQty>12</BundleQty>
    </Bundles>
    <Bundles>
        <BundleID>2</BundleID>
        <BundleDetails>
            <Classification>B</Classification>
            <TrackingID>4563</TrackingID>
        </BundleDetails>
        <BundleDetails>
            <Classification>A</Classification>
            <TrackingID>4563</TrackingID>
        </BundleDetails>
        <BundleQty>34</BundleQty>
    </Bundles>
    <Bundles>
        <BundleID>3</BundleID>
        <BundleDetails>
            <Classification>A</Classification>
            <TrackingID>2343243</TrackingID>
        </BundleDetails>
        <BundleQty>22</BundleQty>
    </Bundles>
    <Bundles>
        <BundleID>4</BundleID>
        <BundleDetails>
            <Classification>A</Classification>
            <TrackingID>123231</TrackingID>
        </BundleDetails>
        <BundleDetails>
            <Classification>B</Classification>
        </BundleDetails>
        <BundleDetails>
            <Classification>B</Classification>
            <TrackingID>42342</TrackingID>
        </BundleDetails>
        <BundleQty>33</BundleQty>
    </Bundles>
    <Bundles>
        <BundleID>5</BundleID>
        <BundleDetails>
            <Classification>A</Classification>
            <TrackingID>123231</TrackingID>
        </BundleDetails>
        <BundleDetails>
            <Classification>A</Classification>
            <TrackingID>42342</TrackingID>
        </BundleDetails>
        <BundleDetails>
            <Classification>B</Classification>
            <TrackingID>124512</TrackingID>
        </BundleDetails>
        <BundleQty>21</BundleQty>
    </Bundles>
</Set> 
```

**产生想要的正确结果**：

```
<table border="1">
   <tr>
      <th>Bundle#</th>
      <th>Qty</th>
      <th>Classes</th>
   </tr>
   <tr>
      <td>1</td>
      <td>12</td>
      <td>A</td>
   </tr>
   <tr>
      <td>2</td>
      <td>34</td>
      <td>B,A</td>
   </tr>
   <tr>
      <td>3</td>
      <td>22</td>
      <td>A</td>
   </tr>
   <tr>
      <td>4</td>
      <td>33</td>
      <td>A,B</td>
   </tr>
   <tr>
      <td>5</td>
      <td>21</td>
      <td>A,B</td>
   </tr>
</table> 
```

**说明**：

1.  正确使用**[孟池分组法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

2.  正确的复合**[键](http://www.w3.org/TR/1999/REC-xslt-19991116#key)**定义指定任何`Classification`作为其祖父及其字符串值的函数。

# objective-c - NSFileManager fileExistsAtPath 仅适用于绝对路径

> ID：13089992
> 
> 赞同：1
> 
> 时间：2012-10-26T15:35:26.377
> 
> 标签：objective-c, ios, nsfilemanager

我在一个文件夹中有一堆客户图像（名为 [code].png），但有些客户没有图像，所以我想显示一个占位符。

我正在检查图像 [code].png 是否存在，如果存在，则显示该图像，否则显示占位符。但是，fileExistsAtPath*始终*返回 false，即使对于存在的图像也是如此。

```
NSFileManager *m    = [NSFileManager defaultManager];
NSString *imagePath = [NSString stringWithFormat:@"%@.png",code];
if ([m fileExistsAtPath:imagePath])
    self.detailViewController.imageFrame.image = [UIImage imageNamed:[NSString stringWithFormat:@"%@.png",code]];
else
    self.detailViewController.imageFrame.image = [UIImage imageNamed:@"customer_large.png"]; 
```

这始终显示 customer_large。

但是，如果我将 imagePath 更改为图像的绝对路径*并将显示的图像保留为相对文件名*，则布尔值可以正常工作，*并且显示的图像也可以正常工作*。

这证明了我正在检查的文件名确实存在，正如图像显示的那样，但我显然在 fileExistsAtPath 方面遗漏了一些东西，因为当程序证明文件存在时它返回 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:43:42.623

由于图像存储在项目中，而不是文档目录中，我根本不会使用 NSFileManager。

相反，使用 [UIImage imageNamed:@"IMAGE_FILENAME"] 并查看它是否返回 nil。如果是，则使用占位符。

这是一个代码片段：

```
UIImage *possibleImage = [UIImage imageNamed:@"IMAGE_FILENAME"];
if (possibleImage) {
   self.detailViewController.imageFrame.image = possibleImage;
} else {
   self.detailViewController.imageFrame.image = [UIImage imageNamed:@"customer_large.png"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:42:19.443

我假设您的文件存储在文档目录中？如果是这样，首先通过以下方式获取文档目录的路径：

```
NSString *destPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    destPath = [destPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png",nameOfImage]]; 
```

这将检查该文件是否存在。希望这会有所帮助：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:43:52.803

就目前而言，`imagePath`实际上只是图像的名称。试试这个：

```
NSString *imagePath = [[NSBundle mainBundle] pathForResource:code ofType:@"png"]; 
```