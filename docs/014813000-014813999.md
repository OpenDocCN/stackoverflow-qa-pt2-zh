# StackOverflow 问答 14813000-14813999

# java - 关系和建立数据库

> ID：14813002
> 
> 赞同：5
> 
> 时间：2013-02-11T13:29:45.687
> 
> 标签：java, mysql, jpa, entity-relationship

对于练习，我需要构建类似的东西：

对于一门课程，我需要创建一个由某些评论线和反馈分数组成的评论。

此评论对象（唯一实例）需要由客户列表填写。

根据审查所针对的课程，审查会发生变化（例如，对于一门课程，审查行的数量和反馈分数会发生变化）。每个客户可以注册一个以上的课程，每个评论都是针对他的。

![在此处输入图像描述](../Images/684bfa04dab637e96b63b801d21f3dfc.png)

现在，如果我想使用 JPA 将这一切保存到数据库，我需要如何查看“review”对象（唯一实例）和“customer”之间的关系？

*   客户可以有多个他/她需要填写的评论。
*   某个评论对象需要许多客户填写（但这是一个具有一定构建 [reviewlines and feedbackscores] 的评论对象）并且对他来说是唯一的。

也许我认为它很复杂，但构建它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:44:59.680

尝试以下操作：

![ER/类图](../Images/b736890521fa5fbf4057ed2be67e52cd.png)

我认为它涵盖了您所有的设计要点。

我正在尝试阅读您的评论，并且我认为您想要实现一个系统，您可以在其中捕获许多“规则” `Review`（我猜，但示例可能是评论最多可达*n*行，必须至少有*m* `CustomerReviews`才能`Review`获得一定程度的质量）。如果确实如此，我创建了一个`ReviewTemplate`类：

*   `ReviewTemplate`将为您需要的每个值提供属性/列。这些属性/*列*在`Review`
*   填充`ReviewTemplate`多行，然后在其中创建一行`Course`并将其链接到一个`ReviewTemplate`
*   当 a`Course`需要 a`Review`时，将字段从 the*复制*`ReviewTemplate`到`Review`
*   在 Java 中，实现`Review`使用*复制值*的业务规则- 而不是`ReviewTemplate`.

为什么要复制这些值？好吧，我敢打赌，在某些时候，用户想要编辑`ReviewTemplate`表格。如果是这样，`Review`使用编辑的对象会发生什么`ReviewTemplates`？修改后的值是否会以`ReviewTemplate`某种方式使过去无效`Reviews`并破坏您的业务逻辑？不，*因为您复制了规则值*，`Review`所以过去`Reviews`不会改变。

**编辑：对特定问题的回答**

> 你怎么看复制？我可以创建一个具有指定属性的实体 ReviewTemplate。在这个实体中，将有与审查线和反馈分数的关系。

我认为每个都`ReviewTemplate`持有特定“类型”的原型值`Review`，其中可能包括默认的 reviewLine（但这可能没有意义）和默认的 feedbackScore。创建 时`Review`，您将执行以下操作：

1.  实例化`Review`并使用来自的值填充`ReviewTemplate`
2.  根据需要实例化尽可能多`CustomerReview`的对象，将它们链接到相关`Customer`对象（我从您之前的评论中推断出这一步。省略这一步也可能有意义，直到 a`Customer`自愿选择审查 a `Course`）

    1.  （如果合适）使用来自的默认值填充`CustomerReview`属性`feedbackScore``ReviewTemplate`
    2.  根据需要实例化`CustomerReviewLine`记录

如果您遵循这种方法，则无需在`ReviewTemplate` 和之间添加关系`CustomerReviewLines`。

> 例如，当我声明客户 1 到 4 需要填写评论时，需要创建 4 个特定的“对象”来保存信息，还需要创建 4 组所需的评论和反馈分数，以便他们都可以保存信息.

绝对地。

> 我只是不知道如何实现这是一个 JPA 结构，所以信息保存在数据库中......？

JPA 允许您以多种方式解决问题，但最佳实践是手动创建 DB 模式和 Java 类（例如，请参阅[https://stackoverflow.com/a/2585763/1395668](https://stackoverflow.com/a/2585763/1395668)）。因此，对于图中的每个实体，您需要：

1.  编写 SQL DDL 语句来创建表、列、主键和外键，以及
2.  编写一个用`@entity`注解表示的 Java 类。在类中，您还需要使用 or 注释 id（主键）`@id`以及与`@OneToMany`or的关系`@ManyToOne`（它们在注释中的附加参数也需要设置）。

现在，在 JPA 方面，您可以执行以下操作：

```
ReviewTemplate template = course.getReviewTemplate(); //assuming the variable course
Review review = new Review();
review.setCourse(course);
review.setRuleOne(template.getRuleOne());
// Copy other properties here

EntityManager em = // get the entity manager here
em.persist(review);

// Assume a set or list of customers
for (Customer customer : customers) {
    CustomerReview cr = new CustomerReview();
    cr.setReview(review);
    cr.setCustomer(customer); 
    cr.setFeedbackScore(template.getDefaultFeedbackScore());
    // set other CustomerReview properties here

    em.persist(cr);

    // You can create CustomerReviewLine here as well 
```

如果写在标准的 EJB 会话 Bean 中，这一切都将得到很好的处理，并且您会将所有新记录提交到数据库中。

**编辑2：附加问题**

（我假设第二条评论完全取代了第一条）

> 因此，当我创建一个评论模板并将其链接到一堆客户时，我将模板写入数据库并基于模板创建一堆评论，但链接到特定客户并使用他自己独特的评论线和反馈分数。就像我现在看到的那样，每个评论（模板）的评论线（更多是问题或描述）都是相同的，只是客户之间的分数会发生变化

我终于想明白了`ReviewLine`。`Customer`我原以为这是一个输入文本行的地方，包括`CustomerReview`. 我现在相信这`ReviewLine`是一个`Customer`被问到的具体问题，并且`Customer`提供了一个反馈分数。

有了这种理解，这里是一个更新的 ER/Class 图。

![在此处输入图像描述](../Images/543ac2b9786494a199c1631bedae2585.png)

请注意，有一些重大变化 - 还有几个表：

1.  `ReviewLineTemplate`为模板问题提供了一个存储位置`ReviewTemplate`
2.  当 a`Review`被实例化/插入（它是特定的副本`ReviewTemplate`）时，将`ReviewLineTemplates`被复制为`ReviewLines`. 复制操作允许两个重要功能：

    1.  在创建时，可以自定义a`Review`及其而不影响or`ReviewLines``ReviewTemplate``ReviewLineTemplate`
    2.  随着时间的推移，`ReviewTemplate`可以`ReviewLineTemplate`更新、编辑和不断改进，*而不会改变`Customer`已经回答*的问题。如果直接`CustomerFeedbackScore`链接到`ReviewLineTemplate`，则编辑`ReviewLineTemplate`将更改`Customer`已回答的问题，从而使 feedbackScore 静默无效。
3.  FeedbackScore 已移至 和 之间的连接`ReviewLine`表`CustomerReview`。

请注意，此模型是完全非规范化的，这使得它更“正确”但更难为其构建 GUI。一个常见的“优化”可能是引入：

*   10（比如说）列在`ReviewTemplate`并通过`Review`调用。`reviewLine1``reviewLine10`
*   10（比如说）列 on`CustomerReview`调用`feedbackScore1`through `feedbackScore10`。
*   删除`ReviewTemplateLine`,`ReviewLine`和`CustomerReviewLine`表

这样做*是不规范*的，并且可能会引入一系列其他问题。YMMV

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:02:54.833

数据的结构总是取决于需求，从来不存在“一劳永逸”的解决方案。那么，您需要最大化的原子性还是高性能的数据系统？

最快和最简单的解决方案不是使用数据库，而是使用哈希表。在您的情况下，您可能有 3 个用于客户、评论的哈希表，可能还有另一个用于 n:n 关系的哈希表。或者，如果您使用的是数据库，则可以将一组 review-primary-keys 存储在 customer 表的一个字段中。

但是，我们都在学校学习做原子性，所以让我们这样做（我只写主键/外键！）：

*   客户（unique_ID，...）
*   审查（unique_ID，...）
*   Customer_Review (customer_ID, review_ID, ...) --> n:n-relationship

Customer_Review 描述了客户和评论之间的 n:n 关系。但是，如果每个评论可能只有一个客户，您将这样做：

*   客户（unique_ID，...）
*   审查（pk：unique_ID，fk：customer_ID，...）--> 1:n-relationship

但是，我建议您需要学习 ERM 作为一个很好的起点：[http ://en.wikipedia.org/wiki/Entity_relationship_model](http://en.wikipedia.org/wiki/Entity_relationship_model)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:20:20.867

你需要一个多对多关系：

*   一位客户-> 多条评论。
*   一条评论-> 几个客户。

因此，您的数据库架构中将有 3 个表：客户、评论和一个带有客户 ID 和评论 ID 的联结表。

参见[维基百科：多对多](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)

# java - 使用 JSoup 抓取 XML

> ID：14813006
> 
> 赞同：0
> 
> 时间：2013-02-11T13:30:01.917
> 
> 标签：java, jsoup, scrape

我正在尝试抓取位于[此处](http://www.amazon.com/gp/rss/movers-and-shakers/appliances/ref=zg_bsms_appliances_rsslink)的 RSS 提要。

目前，我只是想围绕 JSoup 进行思考，所以下面的代码只是概念证明（或者至少是一种尝试）。

```
 public static void grabShakers(String url) throws IOException {

    doc = Jsoup.connect(url).get();

    desc = doc.select("title");
    links = doc.select("link");
    price = doc.select("span.price");

} 
```

它完美地抓住了每个项目的标题。每个链接的输出只是十个重复的结束链接标签，它永远不会找到任何价格。我认为可能是 CDATA 问题，所以我将 doc 转换为 html，使用 .replace 删除注释，然后将其转换回 Document 以进行解析，但无济于事。任何见解将不胜感激。

以下代码是我用来打印每个元素的代码：

```
for (Element src : price) {
        System.out.println(src);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:19:07.083

该提要有**两个问题**：

1.  文档只包含`<link />..actual link..`而不是完整的链接标签
2.  描述（包含*价格*标签）是*转义*的Html，不会被解析

**解决方案：**

```
 final String url = "http://www.amazon.com/gp/rss/movers-and-shakers/appliances/ref=zg_bsms_appliances_rsslink";
    Document doc = Jsoup.connect(url).get();

    for( Element item : doc.select("item") ) // Select all items
    {
        final String title = item.select("title").first().text(); // select the 'title' of the item
        final String link = item.select("link").first().nextSibling().toString().trim(); // select 'link' (-1-)

        final Document descr = Jsoup.parse(StringEscapeUtils.unescapeHtml4(item.select("description").first().toString()));
        final String price = descr.select("span.price").first().text(); // select 'price' (-2-)

        // Output - Example
        System.out.println(title);
        System.out.println(link);
        System.out.println(price);
        System.out.println();
    } 
```

**注 1：**链接的解决方法；选择（空）`link`标签并获取*下一个*节点的文本（=带有实际链接的TextNode）。

**注 2：**价格的变通方法；选择`description`标签，取消转义 html，解析它并选择价格。对于取消转义，我使用了来自[Apache Commons Lang的](http://commons.apache.org/lang/)[StringEscapeUtils.unescapeHtml4()](http://commons.apache.org/lang/apidocs/org/apache/commons/lang3/StringEscapeUtils.html#unescapeHtml4%28java.lang.String%29)。

**输出：（**
*[使用上面的链接）]*

```
#1: Epicurean Gourmet Series 20-Inch-by-15-Inch Cutting Board with Cascade Effect, Nutmeg with Natural Core
http://www.amazon.com/Epicurean-Gourmet-20-Inch-15-Inch-Cutting/dp/B003MU9PLU/ref=pd_zg_rss_ms_la_appliances_1
$72.95

#2: GE 45600 Z-Wave Basic Handheld Remote
http://www.amazon.com/GE-45600-Z-Wave-Handheld-Remote/dp/B0013V6RW0/ref=pd_zg_rss_ms_la_appliances_2
$3.00

#3: First Alert RD1 Radon Gas Test Kit
http://www.amazon.com/First-Alert-RD1-Radon-Test/dp/B00002N83E/ref=pd_zg_rss_ms_la_appliances_3
$10.60

#4: Presto 04820 PopLite Hot Air Popper, White
http://www.amazon.com/Presto-04820-PopLite-Popper-White/dp/B00006IUWA/ref=pd_zg_rss_ms_la_appliances_4
$9.99

#5: New 20 oz Espresso Coffee Milk Frothing Pitcher, Stainless Steel, 18/8 gauge
http://www.amazon.com/Espresso-Coffee-Frothing-Pitcher-Stainless/dp/B000FNK3Z4/ref=pd_zg_rss_ms_la_appliances_5
$8.19

#6: PUR 18 Cup Dispenser with One Pitcher Filter DS-1800Z
http://www.amazon.com/PUR-Dispenser-Pitcher-Filter-DS-1800Z/dp/B0006MQCA4/ref=pd_zg_rss_ms_la_appliances_6
$22.17

#7: Hamilton Beach 70610 500-Watt Food Processor, White
http://www.amazon.com/Hamilton-Beach-70610-500-Watt-Processor/dp/B000SAOF5S/ref=pd_zg_rss_ms_la_appliances_7
$21.95

#8: West Bend 77203 Electric Can Opener, Metallic
http://www.amazon.com/West-Bend-77203-Electric-Metallic/dp/B00030J1U2/ref=pd_zg_rss_ms_la_appliances_8
$35.79

#9: Custom Leathercraft 2077L Black Ski Glove, Large
http://www.amazon.com/Custom-Leathercraft-2077L-Black-Glove/dp/B00499BS9A/ref=pd_zg_rss_ms_la_appliances_9
$8.83

#10: Cuisinart CPC-600 1000-Watt 6-Quart Electric Pressure Cooker, Brushed Stainless and Matte Black
http://www.amazon.com/Cuisinart-CPC-600-1000-Watt-Electric-Stainless/dp/B000MPA044/ref=pd_zg_rss_ms_la_appliances_10
$64.95 
```

# android - 应用程序未启动钛 android

> ID：14813007
> 
> 赞同：0
> 
> 时间：2013-02-11T13:30:02.430
> 
> 标签：android, titanium

到目前为止，我已经尝试了所有方法，包括用谷歌搜索 45 分钟。我真的不知道该做什么了。

当我启动我的 Android 模拟器时，我的应用程序不会启动。我很确定我的代码没有错误，因为它只是一个新的默认项目，没有任何编辑。

任何人都可以看看我的日志，看看发生了什么？

提前致谢

日志： http: [//pastie.org/private/imf4bi1cn5brcttn0gjta](http://pastie.org/private/imf4bi1cn5brcttn0gjta)

编辑：我在 Windows 7 64 位。不知道有没有用...

Ps My Debug 说应用程序安装程序已终止：

```
[INFO] logfile = C:\Users\xxxx\Desktop\xxxx\titanium\xxxx\build.log
[INFO] Building timen for Android ... one moment
[ERROR] JDK version 'javac' is not recognized as an internal or external command,
operable program or batch file. detected, but at least 1.6.0 is required
[ERROR] Application Installer abnormal process termination. Process exit value was 1 
```

# c - 编写一个将数字四舍五入为 2 的下一个幂的 C 函数

> ID：14813008
> 
> 赞同：11
> 
> 时间：2013-02-11T13:30:06.330
> 
> 标签：c

我在一次采访中得到了以下问题：“编写一个将数字四舍五入为 2 的下一个幂的 C 函数。”

我写了以下答案：

```
#include <stdio.h>

int next_pwr_of_2(int num)
{
    int tmp;

    do
    {
        num++;
        tmp=num-1;
    }
    while (tmp & num != 0);

    return num;
}

void main()
{
    int num=9;
    int next_pwr;
    next_pwr=next_pwr_of_2(num);
    printf(" %d \n",next_pwr);
} 
```

问题是：为什么程序`do-while`在达到值 11 和 10 时会跳出循环？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-11T13:35:31.730

优先我的朋友，优先。

`while ((tmp & num) != 0);`

会修复它。（*注意表达式周围的括号`tmp & num`*）

`!=`的优先级高于`&`，因此`num != 0`在 之前进行评估`tmp & num`。

如果跳过括号，则计算的表达式为：`tmp & (num != 0)`

1.  第一次循环，`tmp = 9 (1001)`并且`num != 0`is `1 (0001)`so`&`评估为 1（真），然后循环继续。

2.  现在在第二次迭代结束时，我们有`tmp = 10 (1010)`. `num != 0`再次为 0001，因此`1010 & 0001`计算结果为`0`，因此循环中断。

[这](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence)是供参考的表格。

[如此处](https://stackoverflow.com/questions/4685072/c-operator-precedence-bitwise-lower-than)所述，优先顺序非常不寻常。一直在发生:)。

当然你不必记住任何优先顺序，这只是为了帮助编译器在程序员没有明确说明的*情况下决定首先做什么。*您可以正确地将表达式括起来并避免这种情况。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-11T13:39:25.393

循环退出是因为您没有在条件周围加上括号。这应该教会你不要把不必要的东西`!= 0`放在你的 C/C++ 条件中。

不过，您可以大大简化您的代码。

首先，观察`temp`等于 的先验值`num`，因此您可以将循环更改为

```
int tmp;
do {
    tmp = mum++;
} while (tmp & num); // Don't put unnecessary "!= 0" 
```

其次，面试官可能是想看看你是否熟悉[这个小技巧：](http://graphics.stanford.edu/~seander/bithacks.html#RoundUpPowerOf2)

```
v--;
v |= v >> 1;
v |= v >> 2;
v |= v >> 4;
v |= v >> 8;
v |= v >> 16;
v++; 
```

与可能需要多达 1,000,000,000 次操作才能完成的代码不同，上述代码始终在十二次操作（减量、增量、五班和 5`OR`秒）后完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T09:41:35.997

这样的问题总是值得反问来澄清要求，如果只是为了展示你的思维和分析能力，甚至是创造力——这就是面试应该关注的内容。

例如，在没有任何说明所讨论的“数字”必须是整数的情况下，您可能会提出以下建议：

```
int nextPow2( double x )
{
    return (int)pow( 2, ceil(log10(x) / log10(2))) ;
} 
```

但是，如果您这样做了，您可能还会担心这种解决方案对可能没有浮点单元的嵌入式系统的适用性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T14:15:14.057

我会回答说没有人应该用纯 C 来写。尤其是在嵌入式环境中。如果芯片组没有提供计算单词中前导零数量的功能，那么它可能已经很老了，而且肯定不是您想要使用的东西。如果是这样，您会想要使用该功能。

作为使用 gcc 将无符号整数四舍五入为 2 的幂的非标准方法的示例（您确实需要澄清参数的类型，因为“数字”是不明确的），您可以这样做：

```
unsigned
round_up( unsigned x )
{
    if( x < 2 ) {
        return 1U;
    } else {
        return 1U << ( CHAR_BIT * sizeof x - __builtin_clz( x - 1 ));
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-09T02:34:34.347

又一个变种。

```
int rndup (int num)
{
    int tmp=1;
    while (tmp<num)
    {
        tmp*=2;

    }
    return tmp;

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-03T18:08:08.870

与其他人所说[的相反，比特旋转技巧](http://graphics.stanford.edu/~seander/bithacks.html#RoundUpPowerOf2)实际上*可以*便携地用于任意数量的比特。稍微改*一下*：

```
unsigned int shift = 1;

for (v--; shift < 8 * sizeof v; shift <<= 1)
{
    v |= v >> shift;
}

return ++v; 
```

我相信任何编译器都会优化循环，所以它应该在性能方面是相同的（而且我认为它看起来更好）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-14T01:27:43.287

另一个使用 while 循环和按位运算符的变体

```
int next_pwr_of_2(unsigned &num)
{
    unsigned int number = 1;
    while (number < num)
    {
    number<<=1;
    }
    return number;
}; 
```

# javascript - 禁用日历上的 Javascript 选择

> ID：14813010
> 
> 赞同：-1
> 
> 时间：2013-02-11T13:30:10.870
> 
> 标签：javascript

我需要禁用日历中的所有其他日子，但星期五，它们仍然需要可见但不可点击。

这是我从中获得示例的站点： [这里](http://javascriptcalendar.org/javascript-date-picker.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:23:21.153

您可以修改 jsDatePick js 文件，并像这样添加该功能：

```
if (this.oConfiguration.disableNotFriday){ 
    if (parseInt(oDay.getDay()) != 5  ){
      disabledDayFlag = true;
      aDayDiv.setAttribute("isJsDatePickDisabled",1);
}
} 
```

您还需要添加到配置：

```
this.oConfiguration.disableNotFriday    = (aConf["disableNotFriday"] != null) ? aConf["disableNotFriday"] : false; 
```

并在这样的javascripty调用对象上：

```
new JsDatePick({
        useMode:2,
        target:"inputField",
        dateFormat:"%d-%M-%Y",
        disableNotFriday:true
    }); 
```

此处设置示例：http: [//jqfiles.webege.com/calendar.html](http://jqfiles.webege.com/calendar.html)

这是你想要的吗？

# activerecord - has_one 关联是否需要外键引用

> ID：14813015
> 
> 赞同：0
> 
> 时间：2013-02-11T13:30:28.047
> 
> 标签：activerecord, foreign-keys

```
class Foo < ActiveRecord::Base {
  has_one :bar
} 
```

架构中的 bar 表是否需要对 foo_id 的外键引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:35:32.330

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

是的。bar 对 Foo 有一个 FK

```
class Bar < ActiveRecord::Base {
  belongs_to :foo 
 } 
```

架构将是：

```
CREATE TABLE bars (
  id int,
  foo_id int,
  .....

} 
```

has_one 和 has_many 都定义了外键关系，has_one 返回一个单数对象，has_many 返回一个集合。

# c - 在c中将元素插入二叉树

> ID：14813016
> 
> 赞同：0
> 
> 时间：2013-02-11T13:30:29.933
> 
> 标签：c

我想问一个关于将元素插入二叉树的问题，我需要将元素插入表中。但是，我想我误解了指针之类的东西，我无法创建二叉树。

插入函数由另一个包含主函数的文件调用，因此插入函数会定期调用，直到插入所有元素。然后 insert 函数调用 sub_insert 来插入所有元素。当我试图读取二叉树时，它是空的。任何人都可以建议解决什么问题吗？

```
 typedef struct node * tree_ptr;
   /*typedef char* Key_Type; */

   struct node {
     Key_Type element; // only data is the key itself
     tree_ptr left, right;
     int depth;
   };

   struct table {
     tree_ptr head; // points to the head of the tree

   };
   struct table head,tail;

   struct node* newNode(Key_Type key){
      struct node* node=(struct node*)malloc(sizeof(struct node));
      node->element=key;
      node->left=NULL;
      node->right=NULL;
      return (node);
   }

   tree_ptr sub_insert(Key_Type key, struct node *node, Table table) {
      printf("reading... %s\n", key);

     if(node==NULL)
       return(newNode(key));

     else
     {
       if(key <= node->element){
         printf("inserted");
         node->left = sub_insert(key, node->left, table);
       }else{
         node->right = sub_insert(key, node->right, table);
       } 
         return node;
     }
   }

   Table insert(Key_Type key, Table table) {

        struct node* root=NULL;
        root=sub_insert(key, root, table);

        return table;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:47:28.137

就像 Joachim 所说，你的问题是你总是使用 NULL 作为根节点：

```
 struct node* root=NULL;
    root=sub_insert(key, root, table); 
```

我猜，但似乎你想使用 table.head 作为起始节点：

```
 root=sub_insert(key, table.head, table); 
```

不知道 table 是否是指针，所以我只是使用了点表示法。

在任何情况下，在使用 sub_insert() 遍历之前，您绝对需要一个有效的根节点，否则您的所有新节点都只会在内存中徘徊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:36:35.507

让我们看一下`insert`函数：

```
Table insert(Key_Type key, Table table) {
    struct node* root=NULL;
    root=sub_insert(key, root, table);
    return table;
} 
```

在这里，您声明一个根节点，并在调用`sub_insert`. 然后您返回未知变量`table`，它永远不会在`sub_insert`. 这意味着您刚刚创建的节点丢失了。

# c# - 在c#中插入行时违反UNIQUE KEY约束

> ID：14813017
> 
> 赞同：-1
> 
> 时间：2013-02-11T13:30:35.827
> 
> 标签：c#, sql

我正在尝试在我的表“测验”中插入一些行。当我的表为空并且我尝试插入第一行时它可以工作，但是每当我尝试输入第二行时，我都会收到此错误：

`Violation of UNIQUE KEY constraint 'UQ__Quiz__D0C4726C5B2346B6'. Cannot insert duplicate key in object 'dbo.Quiz'. The duplicate key value is (<NULL>).`

我真的不知道是什么原因造成的，因为我总是为每一行输入不同的 ID。

表示层：

```
if (IsValidData())
{
    quiz.QuizID = Convert.ToInt32(quizIDTextBox.Text);               
    quiz.QuizNaam = quizNaamTextBox.Text;
    quiz.QuizDatum = Convert.ToString(quizDatumDateTimePicker.Text);
    quiz.Locatie = locatieTextBox.Text;
    quiz.Type = typeTextBox.Text;
    quiz.Moeilijkheidsgraad = moeilijkheidsgraadTextBox.Text;

    QuizDB.InsertQuiz(quiz);
    MessageBox.Show("Quiz Toegevoegd", "Quiz");
} 
```

数据库层：

```
public static void InsertQuiz(Quiz quiz)
{

    string insertStatement = "INSERT INTO Quiz (QuizID,QuizNaam,QuizDatum,Locatie,Type,Moeilijkheidsgraad) VALUES (@QuizID,@QuizNaam, @QuizDatum, @Locatie, @Type, @Moeilijkheidsgraad)";

    SqlCommand quizCommand = new SqlCommand(insertStatement, conn);
    quizCommand.Parameters.Clear();

    quizCommand.Parameters.AddWithValue("@QuizID", quiz.QuizID);
    quizCommand.Parameters.AddWithValue("@QuizNaam", quiz.QuizNaam);
    quizCommand.Parameters.AddWithValue("@QuizDatum", quiz.QuizDatum);
    quizCommand.Parameters.AddWithValue("@Locatie", quiz.Locatie);
    quizCommand.Parameters.AddWithValue("@Type", quiz.Type);
    quizCommand.Parameters.AddWithValue("@Moeilijkheidsgraad",quiz.Moeilijkheidsgraad);

    try
    {
        conn.Open();
        quizCommand.ExecuteNonQuery();
    }
    catch (SqlException ex)
    {
        throw ex;
    }
    finally
    {
        conn.Close();
    }
} 
```

业务层：

```
public class Quiz
{
    private int cQuizId;
    private string cQuizNaam;
    private string cQuizDatum;
    private int cWinnaarId;
    private string cLocatie;
    private string cType;
    private string cMoeilijkheidsgraad;

    public Quiz() { }

    public int QuizID
    {
        get { return cQuizId;}
        set { cQuizId = value; }
    }

    public string QuizNaam
    {
        get { return cQuizNaam; }
        set { cQuizNaam = value; }
    }
    public string QuizDatum
    {
        get { return cQuizDatum; }
        set { cQuizDatum = value; }
    }

    public int WinnaarId
    {
        get { return cWinnaarId; }
        set { cWinnaarId = value; }
    }

    public string Locatie
    {
        get { return cLocatie; }
        set { cLocatie = value; }
    }
    public string Type
    {
        get { return cType; }
        set { cType = value; }
    }
    public string Moeilijkheidsgraad
    {
        get { return cMoeilijkheidsgraad; }
        set { cMoeilijkheidsgraad = value; }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:35:05.513

不要使用 Convert，而是使用 TryParse，这样更安全。此外，getter 和 setter 可以简单地写成：

```
public string QuizNaam { get; set; } 
```

现在对于您的问题，您在数据库中使用什么作为主键？这听起来更像是你的数据库端的东西，而不是你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:35:58.747

> 违反 UNIQUE KEY 约束“UQ_ *Quiz* _D0C4726C5B2346B6”。无法在对象“dbo.Quiz”中插入重复键。重复键值为`(<NULL>)`。

根据错误消息，您的代码似乎没有按预期提供 Id 但将其留空（null），并且您的数据库允许 Id 列中的空值（这不是一个好习惯），所以第一次插入工作正常但是当您第二次尝试将 null 插入表中时，它会检测到带有 null 的数据集，并且您会收到此异常。

为什么不在此列上使用串行序列？你可以让你的数据库这样做，看看一个[数据库序列（MSSQL）](http://msdn.microsoft.com/en-us/library/ff878091.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:40:25.687

（假设这`QuizID`是您的表的主键。）

请检查以确保`quiz.QuizID`您的数据库层不是`Null`空的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T13:40:55.140

如果您不需要特殊有意义的 ID。

将**QuizID**字段设置为具有[标识增量](https://stackoverflow.com/questions/4379250/cant-set-auto-increment-via-sql-server-express-management-studio)的主键，然后您不需要插入它。

# joomla - 如何预览 Virtuemart2 订单验证电子邮件布局更改？

> ID：14813021
> 
> 赞同：2
> 
> 时间：2013-02-11T13:30:38.743
> 
> 标签：joomla, virtuemart

我正在尝试更改 Virtuemart 2 订单验证电子邮件的布局（css/html 结构）。问题是，每次我对创建此电子邮件模板的 10 个不同文件（位于 @ components/com_virtuemart/views/invoice/order/tmpl）进行更改时，我都必须进行虚假购买。

我得到的最接近的“预览”是这个直接访问网址“ [http://domain.com/index.php?option=com_virtuemart&view=invoice&layout=invoice&format=html&tmpl=component&virtuemart_order_id=1401](http://domain.com/index.php?option=com_virtuemart&view=invoice&layout=invoice&format=html&tmpl=component&virtuemart_order_id=1401) ”

但它再次加载了 Joomla 的头部/身体元素，而不是实际的电子邮件模板。

那么，在进行实际测试购买之前，如何“预览”模板与我的新更改的外观？这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:59:03.017

1.  您不应该更改核心文件，否则 VirtueMart 的下一次更新（其中有很多）将删除您的更改。

2.  您应该使用 Joomla! 的模板覆盖 VM2 支持的方式，这样您可以根据需要更新到新版本，而不会丢失您的更改。请参阅[docs.joomla.org](http://docs.joomla.org/)上的这篇关于“[如何覆盖 Joomla! 核心的输出](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)”的文章以及关于[模板覆盖](http://docs.joomla.org/Layout_Overrides_in_Joomla_1.6)的这篇文章。

~~3\. 您需要`&format=raw`在链接末尾添加 以仅检索组件的输出，而无需将模板/html 主体包裹在其周围。当然，这也依赖于组件。~~

我打算建议使用 raw，但是查看当前的 VM2 它并不能正确支持该`format=raw`选项。查看发票视图中的邮件布局，它没有按照您期望的方式返回它，它实际上默认生成一个 HTML 版本，并带有一个匹配的纯文本版本。

考虑到这两个选项，我能想到的最好的

1.  返回 HTML 电子邮件的近似等价物
    `http://domain.com/index.php?option=com_virtuemart&view=invoice&layout=mail&virtuemart_order_id=1401&tmpl=component`
2.  返回文本版本，尽管包含在 html 页面中……您可能必须查看源代码才能看到发票文本。
    `http://shop.craigphillips.biz/index.php?option=com_virtuemart&view=invoice&layout=mail_raw&virtuemart_order_id=4&tmpl=component`

# jquery - 如何使用jquery将插入符号后的数字转换为上标

> ID：14813023
> 
> 赞同：1
> 
> 时间：2013-02-11T13:30:45.440
> 
> 标签：jquery, text, superscript

我们数学论坛上的许多用户使用**插入符号输入****n 次方**，例如。**`x^(4y)`**

 **我们想替换插入符号并使用上标，将数字和变量包装在插入符号之后。所以 x^(4y) 变成 x ^((4y))。

规则：

1.  如果插入符号后面没有括号，则只为下一个字符上标。
2.  如果有左括号，则上标直到右括号。

这是一个[带有不同插入符号版本的帖子](http://www.gute-mathe-fragen.de/14099/berechnen-sie-den-inhalt-der-flache-und-das-volumen-und-g-x-x-3?show=14110#a14110)。

当然，我们可以使用许多 js 库，但难道不能用 jquery 来完成这个单一的文本转换任务吗？

有没有人已经建立了类似的东西？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:52:31.343

我认为这不是 jQuery 的工作。使用纯 javascript 遍历文本，虽然很冗长，但可能是最好的方法：

```
function superify(input) {
    if(!input) return input;

    var output = [];
    var buffer;
    for(var i=0;i<input.length;i++) {
        var current = input[i];

        if(buffer) {
            if(current === ')') {
                buffer.push('</sup>');
                output.push.apply(output, buffer);
                buffer = null;
            } else {
                buffer.push(current);
            }
        }
        else if(current === '^') {
            var next = input[++i]; 
            if(next === '(') {
                buffer = ['<sup>'];
            } else {
                output.push.apply(output, ['<sup>', next, '</sup>']);
            }   
        } else {
            output.push(current);
        }
    }

    return output.join('');
} 
```

（代码没有经过很好的测试。通过几个例子运行它，它似乎有效）**

# visual-studio-2010 - MainPage.xaml 文件未在 Visual Studio 2010 中正确加载

> ID：14813029
> 
> 赞同：1
> 
> 时间：2013-02-11T13:31:10.883
> 
> 标签：visual-studio-2010, silverlight-4.0

我正在尝试在 Visual Studio 2010 Professional 中使用银光进行锻炼。正如 Visual Studio 所说，我已经安装了 SilverLight SDK 4，因为 SDK 5 需要 SP1。安装完成后，我成功创建了 SilverLight 应用程序。但是当我加载 MainPage.xaml 文件时，它显示异常。我刷新它，重新创建项目，但没有任何效果。

```
System.NullReferenceException
Object reference not set to an instance of an object.

   at Microsoft.Windows.Design.Platform.SilverlightMetadataContext.SilverlightXamlExtensionImplementations.<GetXmlNamespaceCompatibilityMappings>d__8.MoveNext()

at MS.Internal.Design.Metadata.ReflectionProjectNode.BuildSubsumption() 
```

在 MS.Internal.Design.Metadata.ReflectionProjectNode.SubsumingNamespace（标识符标识符）

```
at MS.Internal.Design.Markup.XmlElement.BuildScope(PrefixScope parentScope, IParseContext context) 
```

我是 SilverLight 的新手，所以我不知道发生了什么。

任何帮助都会很棒！

# svn - 设置 subversion 存储库的权限

> ID：14813031
> 
> 赞同：1
> 
> 时间：2013-02-11T13:31:18.453
> 
> 标签：svn, tortoisesvn

我的 subversion 存储库数据位于办公室周围的几个人可以访问的服务器上。如果我向所有人授予完全控制权限，我就可以成功提交。但是，如果我只授予所有人读取权限并授予我自己的用户名完全控制权，则提交失败（是的，我已登录）。为什么是这样？

有没有办法在 Windows 中授予 svn 写访问权限？我不希望其他人能够浏览到此文件夹位置并进行修改，但不介意是否通过其他用户的 svn 客户端进行修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:18:29.910

首先，您不能通过 file:/// 共享 Subversion 存储库。它在技术上有效吗？是的。直到没有。由于所有用户都必须完全控制存储库目录结构，因此您可能会因一次错误的击键而丢失或损坏整个存储库。

file:/// 访问没有安全性。此外，任何钩子脚本都在提交的计算机上执行，您可能无法完全控制它 - 您的钩子可能会失败，或者可能无法按您想要的方式工作。

file:/// 访问方法仅设计用于本地、单用户使用和测试。它从未打算用于生产/与团队一起使用。

您需要通过 svn:// 协议或 HTTP 设置一个实际的 Subversion 服务器。然后通过 Subversion 自己的授权方法进行所有的访问控制。并将对文件系统上存储库的访问限制为仅运行服务器进程的用户帐户。

如果您想使用 Active Directory 帐户和组来管理您的访问，[VisualSVN Server](http://www.visualsvn.com/)可能是最简单的方法。

# jsp - Java EE 中动态 Web 模块 3.0 和 2.5 之间的区别？

> ID：14813040
> 
> 赞同：5
> 
> 时间：2013-02-11T13:31:44.380
> 
> 标签：jsp, jakarta-ee, servlets

谁能告诉我 Web Module 3.0 中添加了哪些新功能以及我可以从哪里获得相同的发行说明？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T14:02:52.447

区别之一是我们不需要 web.xml，我们可以注释我们的 servvet 被调用。

# c# - 如何使用返回 refcursor 的 FluentNHibernate 调用 postgresql 存储函数

> ID：14813043
> 
> 赞同：1
> 
> 时间：2013-02-11T13:31:53.417
> 
> 标签：c#, postgresql, nhibernate, stored-procedures, ref-cursor

如何使用 NHibernate 调用 postgresql 的存储函数，它返回 setof refcurosr 请帮助找到我的问题的解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:50:48.833

[看这里](http://www.dotnetguy.co.uk/post/2009/11/01/stored-procedures-with-fluent-nhibernate/)。基本上你可能需要混合 Fluent 和 xml。否则使用`Sql...()`方法`ClassMap<>`

# sp-send-dbmail - sp_send_dbmail：避免（受影响的 n 行）

> ID：14813045
> 
> 赞同：3
> 
> 时间：2013-02-11T13:32:06.503
> 
> 标签：sp-send-dbmail, rows-affected

调用 sp_send_dbmail：成功执行，但最后会出现一个额外的行，其中包含受查询影响的行。

有什么办法可以避免这条线？

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-21T17:51:03.290

cgsabari 所说的是真实但不完整的。您需要`NOCOUNT`在传递给`@query`参数的查询中进行设置。否则将无法正常工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-24T15:05:33.363

试试下面的查询

```
SET NOCOUNT ON
--some queries
SET NOCOUNT OFF 
```

它避免了行受影响的消息。

# prolog - 在 Prolog 中过滤列表

> ID：14813046
> 
> 赞同：3
> 
> 时间：2013-02-11T13:32:07.000
> 
> 标签：prolog, filtering

我正在开发一个用 Prolog 编写的应用程序。我想过滤一个元素列表并删除那些不满足特定约束或条件的元素，保持原始列表顺序。我认为最好的方法是这样的：

```
filter([],Filtered).
filter([L|List],[F|Filtered]) :-
    /* Conditions are met: bypass the element to the filtered list */
    check_conditions(L),
    filter(List,Filtered).
filter([L|List],Filtered) :-
    /* Conditions are not met: do not include the element in the filtered list */
    filter_aborts(List,Filtered). 
```

在接受它作为我的问题的解决方案之前，我想（独立地）尝试一下，所以我编译并运行了我的代码（SWI-Prolog）并测试了一些情况。当我使用硬编码列表（或任何您想称呼它的名称）输入 Prolog 查询时，我得到如下内容：

```
?- filter([id01,id02,id03,id04,id05,id06],F).
F = [id03, id05, id06|_G1024] . 
```

该列表肯定被过滤了，但我`_G1024`在它的末尾得到了这个实例名称“”。我知道发生这种情况是因为 F 没有实例化，但我不知道解决方案是什么。此外，如果我尝试做一些不同的事情，比如将列表作为实例化变量输入，我得到的就更奇怪了：

```
?- L=[id02,id03,id04,id05,id06].
L = [id02, id03, id04, id05, id06].

?- filter(L,F).
L = [] ;
L = [id01],
F = [id01|_G347] ;
L = [id01, id01],
F = [id01, id01|_G403] 
... and so on. 
```

Prolog变量不应该是一次赋值变量吗？我的程序是否真的发生了变化`L`，或者我没有正确理解它？其中的一部分，因为我是 Prolog 的新手，我将不胜感激任何关于我的 Prolog 的评论 - 比如说...... - “风格”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T14:15:22.940

您使用 SWI-Prolog，因此您可以根据您的条件编写成功或失败的谓词，然后使用**include(Predidate, Lst, Success)**。例如

```
include(check_conditions,Lst, Success) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T14:15:13.137

你的基本递归应该写成

```
filter([],[]). 
```

你有一个错字

```
filter([L|List],[L|Filtered]) :-
... 
```

而不是（第二个）L 你有单例 F

# jenkins - Jenkins，无法在并行作业中运行 Windows 批处理命令

> ID：14813049
> 
> 赞同：0
> 
> 时间：2013-02-11T13:32:18.933
> 
> 标签：jenkins, iar

我有几个构建作业，带有单独的工作区，用 Jenkins 中的 Windows 批处理命令使用 iarbuild 构建单独的模块。如果我分别运行这些作业中的每一个，它构建得很好，但是如果我尝试使用 iarbuild 并行运行两个不同的作业（彼此在 10 秒内开始），则至少一个构建将失败，仅显示“构建中止”消息.

如果我直接从各自的 Jenkins 工作区中的 Windows 命令提示符并行运行相同的两个构建，它们将构建得很好。只有在 Jenkins 中并行构建存在问题。

有谁知道什么可能导致这个问题？

Jenkins 中的 windows 批处理命令是否在构建作业之间共享资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:19:08.820

新版本的 iarbuild (6.50.3) 解决了这个问题

# java - 检查是否存在特定的数组索引

> ID：14813057
> 
> 赞同：1
> 
> 时间：2013-02-11T13:32:28.900
> 
> 标签：java

我收到以下错误

```
java.lang.ArrayIndexOutOfBoundsException: 6
    at data.connect(data.java:282)
    at data.<init>(data.java:78)
    at data.main(data.java:549) 
```

在 282 行我正在访问

```
int g = Integer.parseInt(arrtime[tempreload]) 
```

`arrtime`是一个`String[]`，我确实使用数组长度进行了检查：

```
int arrtimelen = arrtime.length - 1;
if(Integer.parseInt(arrtime[tempreload]) < arrtimelen) {
    g = Integer.parseInt(arrtime[tempreload]);
} 
```

我的程序流程是

int arrpagenolen=(arrpageno.length)-1; int arrtimelen=(arrtime.length)-1;

```
 String finalarr[][]=new String[3000000][5];
                int tempreload=0;

                int totalreload=0;
                /*System.out.println("Length="+arrpagenolen);
                for(int s=0;s<arrpagenolen;s++)
                {
                    System.out.println(s+"="+arrpageno[s]);
                }*/
                for(int n=0;n<arrpagenolen;n++)
                {
                        if(n==0)
                        {
                            totalreload=Integer.parseInt(arrreload[n]);
                            if(totalreload==1)
                            {
                                finalarr[finalvalue][1]=arrpageno[n];
                                finalarr[finalvalue][2]=arrreload[n];
                                finalarr[finalvalue][3]=arrtime[tempreload];
                                finalarr[finalvalue][4]=arrreferal[n];

                            }else
                            {
                                for(int y=0;y<totalreload;y++)
                                {
                                    //System.out.println(finalarr[finalvalue][3]);
                                    if(finalarr[finalvalue][3]!=null)
                                    {
                                        int x=Integer.parseInt(finalarr[finalvalue][3]);
                                        int g;
                                        if(Integer.parseInt(arrtime[tempreload]) < arrtimelen)
                                        {
                                         g=Integer.parseInt(arrtime[tempreload]);
                                        }
                                        else
                                        {
                                        g=0;
                                        }
                                        int temp=x+g;
                                        finalarr[finalvalue][3]=Integer.toString(temp);
                                    }else
                                    {
                                        if(Integer.parseInt(arrtime[tempreload]) < arrtimelen)
                                        {
                                        finalarr[finalvalue][3]=arrtime[tempreload];
                                        }else
                                        {
                                        int tmprl=0;
                                        arrtime[tempreload]=Integer.toString(tmprl);
                                        }                                       
                                    }
                                    tempreload++;
                                }
                                finalarr[finalvalue][1]=arrpageno[n];
                                finalarr[finalvalue][2]=arrreload[n];
                                finalarr[finalvalue][4]=arrreferal[n];

                            }
                            finalvalue++;

                        }
                        else
                        {
                            int flag=0;
                            int selectedindex=0;
                            for(int j=0;j<finalvalue;j++)
                            {
                                 int temp1=Integer.parseInt(finalarr[j][1]);
                                 int temp2=Integer.parseInt(arrpageno[n]);
                                if(temp1==temp2)
                                {
                                    flag=1;
                                    selectedindex=j;
                                }
                            }

                            if(flag==0)
                            {
                                totalreload=Integer.parseInt(arrreload[n]);
                                if(totalreload==1)
                                {

                                    finalarr[finalvalue][1]=arrpageno[n];
                                    finalarr[finalvalue][2]=arrreload[n];
                                    finalarr[finalvalue][3]=arrtime[tempreload];
                                    finalarr[finalvalue][4]=arrreferal[n];
                                }
                                else
                                {
                                    for(int y=0;y<totalreload;y++)
                                    {
                                        if(finalarr[finalvalue][3]!=null)
                                        {
                                            int x=Integer.parseInt(finalarr[finalvalue][3]);
                                            int g=Integer.parseInt(arrtime[tempreload]);
                                            System.out.println("g value="+g);
                                            int temp3=x+g;
                                            System.out.println("temp3 value="+temp3);
                                            finalarr[finalvalue][3]=Integer.toString(temp3);
                                        }else
                                        {
                                            finalarr[finalvalue][3]=arrtime[tempreload];
                                        }
                                        //finalarr[finalvalue][3]=finalarr[finalvalue][3]+arrtime[tempreload];
                                        tempreload++;
                                    }

                                    finalarr[finalvalue][1]=arrpageno[n];
                                    finalarr[finalvalue][2]=arrreload[n];
                                    finalarr[finalvalue][4]=arrreferal[n];
                                }   
                                finalvalue++;
                            }   
                            else
                            {
                                totalreload=Integer.parseInt(arrreload[n]);
                                if(totalreload==1)
                                {
                                    int x=Integer.parseInt(finalarr[selectedindex][2]);
                                    int g=Integer.parseInt(arrreload[n]);
                                    int temp4=x+g;
                                    finalarr[selectedindex][2]=Integer.toString(temp4);

                                    int a=Integer.parseInt(finalarr[selectedindex][3]);
                                    //System.out.println("reload 1 previous value "+a);
                                    int b=Integer.parseInt(arrtime[tempreload]);
                                    //System.out.println("reload 1 new value "+b);
                                    int temp5=a+b;
                                    //System.out.println("reload 1 temp value "+temp5);
                                    finalarr[selectedindex][3]=Integer.toString(temp5);

                                }
                                else            
                                {
                                    for(int y=0;y<totalreload;y++)
                                    {

                                            int x=Integer.parseInt(finalarr[selectedindex][3]);
                                            //System.out.println("else previous value "+x);
                                            int g;
                                            if(arrtime[tempreload]!=null)
                                            {
                                             g=Integer.parseInt(arrtime[tempreload]);
                                            }
                                            //System.out.println("else new value "+g);
                                            else
                                            {
                                            g=0;
                                            }
                                            int temp6 = x+g;
                                            //System.out.println("else temp value "+temp6);
                                            finalarr[selectedindex][3]=Integer.toString(temp6);
                                            tempreload++;
                                    }
                                    int p=Integer.parseInt(finalarr[selectedindex][2]);
                                    int q=Integer.parseInt(arrreload[n]);
                                    int temp7=p+q;
                                    finalarr[selectedindex][2]=Integer.toString(temp7);

                                }
                            }
                        }
                } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T13:36:33.670

您正在检查数组元素值，而不是索引。应该是：

```
int arrtimelen = arrtime.length;
if (tempreload < arrtimelen)                                           
{                                            
    g = Integer.parseInt (arrtime [tempreload]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:37:33.803

`tempreload`如果索引`tempreload`大于或等于 0 且小于数组的长度，则只能访问索引处的元素。所以检查一下：

```
if (tempreload >= 0 && tempreload < arrtime.length) {
    int g = Integer.parseInt(arrtime[tempreload])
    ... 
```

也就是说，除非`tempreload`是最终用户输入的值，如果它不满足这些条件，则意味着您的程序之前存在错误。确保修复错误的原因，而不是其症状。

# css - 有谁知道我可以如何调整这个 CSS 来实现我想要的超链接效果？

> ID：14813058
> 
> 赞同：0
> 
> 时间：2013-02-11T13:32:30.823
> 
> 标签：css

目前，我的 CSS 中只有这个：

```
a:link
{
color: #1d60ff;
text-decoration: underline;
outline: none;
}

a:hover
{
color: #1d60ff;
text-decoration: none;
outline: none;
} 
```

有人知道我如何为我的网站的超链接实现**这种**类型的 css 效果吗？基本上，超链接的背景是橄榄绿黄色，当悬停时，它们会变成亮黄色。

![在此处输入图像描述](../Images/dfb03c2310bea683d56a3848f8453f58.png)

我浏览了 w3schools 并用谷歌搜索、萤火虫、查看了源代码，但我似乎无法复制这种效果；我只是不知道我会使用正确的 css。我不是想复制这个网站的 CSS；我只是想知道他们是如何实现的，这样我就可以做一些与我类似的事情。任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:34:59.833

您是在寻找房产`background-color`还是我错过了什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:37:05.273

只需添加`background-color: yellow;`您的`a:hover`. 这是一个[小提琴](http://jsfiddle.net/QwUwc/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T13:37:45.260

```
a:link
{
color: #1d60ff;
text-decoration: underline;
outline: none;
}

a:hover
{
color: #000;
background-color: #1d60ff;
text-decoration: none;
outline: none;
} 
```

就是这样

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T13:38:06.300

背景颜色不起作用吗？

```
a:link 
{
 color: #1d60ff;
 background-color: #FF0000;
 text-decoration: underline;
 outline: none;
}

a:hover
{
 color: #1d60ff;
 background-color: #00FF00;
 text-decoration: none;
 outline: none;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T13:38:18.283

我为你创建了这个 JFiddle。 [http://jsfiddle.net/persianturtle/LBsJL/](http://jsfiddle.net/persianturtle/LBsJL/) 这有帮助吗？

```
P
{
background-color:black;
color:white;
}
a:link
{
background-color: #aeb05d;
text-decoration: underline;
outline: none;
}

a:hover
{
background-color: yellow;
text-decoration: none;
outline: none;
} 
```

# yeoman - 使用 yeoman 服务器截断 ajax 请求

> ID：14813060
> 
> 赞同：1
> 
> 时间：2013-02-11T13:32:32.477
> 
> 标签：yeoman

运行时，`yeoman server`我希望能够创建 URL 存根来模拟后端响应。

以下面的控制器为例：

```
angularApp.controller('AppuserListCtrl', function ($scope, $http) {

        $http({method: 'GET', url: '/admin/appuser/rest/?accept=json'})
        .success(function (data, status, headers, config) {
            $scope.page = data;
        })
        .error(function (data, status, headers, config) {
            $scope.error = data;
        });
}); 
```

这个控制器依赖于一个 ajax 请求来检索一个 json 对象来做任何工作。有没有办法用 stub 那些`yeoman server`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:08:23.983

您可以使用[$httpBackend](http://docs.angularjs.org/api/ngMock.%24httpBackend)来模拟 $http 对象。

# jquery - jQuery将2个ID添加到相同的内容

> ID：14813061
> 
> 赞同：0
> 
> 时间：2013-02-11T13:32:37.360
> 
> 标签：jquery, html, image, click

这是我到目前为止所拥有的。[http://jsfiddle.net/Scybf/22/](http://jsfiddle.net/Scybf/22/)

```
$('[id^=content]').hide();
$('#baseSection, #headSection').on("click", "li", function () {
    var id = ($(this).parent().attr('id') == 'selectable') ? $(this).attr('id').replace('base', '') : $(this).attr('id').replace('head', '');
    $("#customContent").html($("#content-" + id).html());
}); 
```

我需要它做的是获取基地的 ID 并前往相同的内容。例如，base1 + head1 = content1 或 base1 + head 2 = content2。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:26:06.980

如果您向每个列表添加一个公共类，您可以执行以下操作：

```
$('.selectable').on("click", "li", function () {
        var $li=$(this).addClass('selected')
        $li.siblings().removeClass('selected');
        var contentNum= this.id.replace( /\D/g,'')
        var $container= $li.closest('#headSection').length ? $('#headContent') : $('#baseContent');
        $container.html( $('#content-'+contentNum).html())

    }); 
```

演示：http: [//jsfiddle.net/Scybf/20/](http://jsfiddle.net/Scybf/20/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:02:48.730

这可以帮助您：

您需要定义用户是否单击`head`或`base`元素：

```
function isBase(element){
    return element.parents('div').attr('id').indexOf('base') !== -1;
} 

function isHead(element){
    return element.parents('div').attr('id').indexOf('head') !== -1;
} 
```

然后你可以创建一个缓冲区对象：

```
var buffer = {head: null, base: null}; 
```

然后您只需要保存用户操作并将其显示在您的`baseContent`元素 中

```
$('#baseSection, #headSection').on("click", "li", function () {
    if (isHead($(this))) {
        buffer.head = $(this).text();
    } else if (isBase($(this))) {
        buffer.base = $(this).text();
    }

    $("#baseContent").html(
        "Head: " + buffer.head + "<br/>Base:" + buffer.base);
}); 
```

# iphone - 为什么我的代码会因一些 UIWebView 异常而崩溃？

> ID：14813068
> 
> 赞同：2
> 
> 时间：2013-02-11T13:32:58.743
> 
> 标签：iphone, ios, ipad

我的应用程序崩溃并提供如下输出：

```
Tried to obtain the web lock from a thread other than the main thread or the web thread. This may be a result of calling to UIKit from a secondary thread. Crashing now...
1   WebThreadLock
2   -[UIWebDocumentView(UIWebDocumentViewTextSelecting) selectionBaseWritingDirection]
3   -[UITextField _resignFirstResponder]
4   -[UIResponder _finishResignFirstResponder]
5   -[UIResponder resignFirstResponder]
6   -[UITextField resignFirstResponder]
7   -[UIView(UITextField) endEditing:]
8   -[UIWindowController _prepareKeyboardForTransition:fromView:]
9   -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:]
10  -[UIViewController presentViewController:withTransition:completion:]
11  -[UIViewController presentViewController:animated:completion:]
12  -[UIViewController presentModalViewController:animated:]
13  -[studentlogViewController parse]
14  -[NSThread main]
15  __NSThread__main__
16  _pthread_start
17  thread_start 
```

谁能告诉我，我疯了，我不知道这里发生了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:40:00.697

您在后台解析一些数据（这很好），然后从后台线程更新 UI，这是错误的。您必须从主线程更新 UI：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [studentLogViewController parse];
    dispatch_async(dispatch_get_main_queue(), ^{
        // now present the new view controller
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-05T13:16:00.970

如果您要执行任何 UI 操作，则必须在主线程上完成..

只需将编码粘贴到以下语法中

```
dispatch_sync(dispatch_get_main_queue(), ^{
    //Your code goes here
}); 
```

或者您可以使用以下语法调用您的方法

```
[self performSelectorOnMainThread:@selector(yourmethod:)withObject:obj waitUntilDone:YES] 
```

# c# - 我在 gridview 的 RowDataBound 中找不到行，给出异常“索引超出范围。必须为非负数且小于集合的大小。”

> ID：14813070
> 
> 赞同：0
> 
> 时间：2013-02-11T13:33:01.343
> 
> 标签：c#, asp.net

我正在使用`gridview`，我想将特定行的颜色更改为网格视图，这就是为什么我必须在 rowdatabound 事件中找到行。我如何找到行？

源代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    string[] arr={"1","2","3","4"};
    GridView1.DataSource = arr;
    GridView1.DataBind();
}
protected void pagechangin(object sender, GridViewPageEventArgs e) {
    GridView1.PageIndex = e.NewPageIndex;
}
protected void databound(Object sender, GridViewRowEventArgs e) {
    GridViewRow grv=GridView1.Rows[0];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:38:53.660

您必须注册一个事件处理程序来处理事件。但是您没有向我们展示 aspx 标记，因此您可能错过了以声明方式添加处理程序：

```
<asp:gridview id="GridView1" 
    onrowdatabound="GridView1_RowDataBound" 
    runat="server">
  </asp:gridview>

void GridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
         // e.Row is the GridViewRow
         e.Row.BackColor = System.Drawing.Color.Green;
    }
} 
```

**更新**原因`IndexOutOfRangeException`是您在创建第一行之前正在访问它：

```
GridViewRow grv=GridView1.Rows[0]; 
```

这是一个讨厌的。`RowDataBound`被要求为每个`GridViewRow`，不仅为 ，`DataItems`而且为`Header`,`Footer`和`Pager`。将创建的第一个是`Header`. 但只`GridView.Rows`返回= 。因此，您试图在创建行期间访问第一个“数据行” 。`GridViewRows``RowType``DataRow``header`

要修复它，请使用上面的代码并检查`RowType`.

```
if(e.Row.RowType == DataControlRowType.DataRow)
{
    // now you ca safely access the first row in this way, 
    // altghough i assume that you should use my code above 
    // to set the color of every GridViewRow
    GridViewRow grv=GridView1.Rows[0]; 
```

除此之外，您还应该使用 Dragan 提到`DataBind`的网格（默认）。`if(!IsPostBack)``ViewState`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:50:14.833

您的 page_load 事件处理程序不正确。您不应该在每次页面加载时加载数据，而应仅在初始加载时加载。也许这会引起问题。

在您的 Page_Load 方法中尝试此操作

```
if (!Page.IsPostback)
{
    //copy your code from above
} 
```

# magento - 在 Magento 中准备布局后自定义核心块的更好方法是什么？

> ID：14813074
> 
> 赞同：2
> 
> 时间：2013-02-11T13:33:14.513
> 
> 标签：magento

Magento 中的所有块都继承自抽象，并且在代码片段内部：

```
#File: app/code/core/Mage/Core/Block/Abstract.php   
public function setLayout(Mage_Core_Model_Layout $layout)
{
    $this->_layout = $layout;
    Mage::dispatchEvent('core_block_abstract_prepare_layout_before', array('block' => $this));
    $this->_prepareLayout();
    Mage::dispatchEvent('core_block_abstract_prepare_layout_after', array('block' => $this));
    return $this;
} 
```

有两种方法可以连接到核心块的准备布局：

1.  将核心块重写为您自己的并创建 _prepareLayout 函数调用它的父级，然后在之后执行您的代码
2.  观察 core_block_abstract_prepare_layout_after 事件并检查块的实例是否是您感兴趣的实例

第二种的优点是事件/观察者模式是实现附加功能的更好、更稳定的选择。然而，缺点是观察者必须为*每个*准备好布局的块运行。

这里哪种编程技术更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:31:15.533

如果您重写 Abstract 类，大多数块仍将使用核心中的那个，因为它们直接从它扩展并且不使用 Magento 重写规则。所以我会用你的第二个解决方案来做。即使每个块都有观察者，性能问题也不应该那么大，因为在大多数情况下，您只需使用 instanceof 执行一个简单的条件，这非常快。

# php - SimpleXML：添加“xmlns:wp”属性只添加“wp”，为什么？

> ID：14813082
> 
> 赞同：2
> 
> 时间：2013-02-11T13:33:47.977
> 
> 标签：php, xml, wordpress, simplexml

我试图从头开始创建 WXR 文件（WordPress eXtended Rss）。

我的代码基于**wordpress 生成的 XML/WXR 文件**，开头如下：

```
<?xml version="1.0" encoding="UTF-8" ?>

<rss version="2.0"
    xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/"
    xmlns:content="http://purl.org/rss/1.0/modules/content/"
    xmlns:wfw="http://wellformedweb.org/CommentAPI/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:wp="http://wordpress.org/export/1.2/"
> 
```

**我是这样开始的：**

```
$newxml = new SimpleXMLElement("<rss></rss>");
$newxml->addAttribute('version', '2.0');
$newxml->addAttribute('xmlns:excerpt', 'http://wordpress.org/export/1.2/excerpt/');
$newxml->addAttribute('xmlns:content', 'http://purl.org/rss/1.0/modules/content/');
$newxml->addAttribute('xmlns:wfw', 'http://wellformedweb.org/CommentAPI/');
$newxml->addAttribute('xmlns:dc', 'http://purl.org/dc/elements/1.1/');
$newxml->addAttribute('xmlns:wp', 'http://wordpress.org/export/1.2/'); 
```

**在此之后我打印 XML 是这样的：**

```
echo htmlspecialchars($newxml->asXML()); 
```

**我得到这样的XML：**

```
<?xml version="1.0"?>
<rss version="2.0" 
     excerpt="http://wordpress.org/export/1.2/excerpt/" 
     content="http://purl.org/rss/1.0/modules/content/" 
     wfw="http://wellformedweb.org/CommentAPI/" 
     dc="http://purl.org/dc/elements/1.1/" 
     wp="http://wordpress.org/export/1.2/">

     <channel/>
</rss> 
```

（我添加了换行符以提高可读性）。

我如何强制使用完整属性，例如“xmlns：excerpt”而不是“excerpt”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:42:45.077

冒号之前的部分称为“命名空间”，需要单独指定。因为[`addAttribute`](HTTP://php.net/simplexmlelement.addattribute)它是第三个参数：

```
$newxml->addAttribute ('excerpt', 'http://wordpress.org/export/1.2/excerpt/', 'xmlns'); 
```

# javascript - 触发动态弹出 HTML 表单的密码自动填充

> ID：14813091
> 
> 赞同：2
> 
> 时间：2013-02-11T13:34:06.607
> 
> 标签：javascript, html, dom, twitter-bootstrap

假设我有一个允许用户登录网站的 HTML 表单。该表单不是静态可见的，而是通过[Bootstrap Popover](http://twitter.github.com/bootstrap/javascript.html#popovers)按需显示。

除了一个小细节外，这按预期工作：浏览器的密码管理器不提供这种形式的凭据的自动完成（很可能是因为它在页面最初呈现时不可见）。

添加`autocomplete="on"`到表单和输入元素并没有改变任何东西。

登录表单变得可见后，有什么方法可以再次触发表单完成？

表格如下所示：

```
<div id="login_popover_content">
  <form accept-charset="UTF-8" action="/users/sign_in" autocomplete="on" class="form-horizontal" id="new_user_popover" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"><input name="authenticity_token" type="hidden" value="..."></div>
  <fieldset>
    <div class="control-group">
      <label class="control-label" for="user_login">User</label>

      <div class="controls">
        <input autocomplete="on" class="input-medium" id="user_login" name="user[login]" size="30" type="text">
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="user_password">Password</label>

      <div class="controls">
        <input class="input-medium" id="user_password" name="user[password]" size="30" type="password">
        <span class="help-block"><a href="/users/password/new">Forgot your password?</a></span>
      </div>
    </div>
    <div class="control-group">
      <div class="controls pull-right">
        <input class="btn btn-warning pull-right" name="commit" type="submit" value="Login">
      </div>
    </div>
  </fieldset>
  </form>
</div> 
```

弹出窗口显示使用：

```
$(anchor).popover(
  content: $(content).html()
  placement: 'bottom'
  html: true
  trigger: 'click'
  template: '<div class="popover headless"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>'
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:55:27.537

大多数浏览器（如果不是全部）在页面的初始加载时触发自动填充，因此如果在第二个时刻操作 dom，则不会自动填充。一种解决方案是将登录表单放在页面上。

# ios - IOS：带有导航控制器的纵向窗口

> ID：14813099
> 
> 赞同：1
> 
> 时间：2013-02-11T13:34:36.760
> 
> 标签：ios, uinavigationcontroller, storyboard, splash-screen

在我的应用程序中，我想从我的 firstViewController 添加一个启动视图，我在 viewDidLoad 中执行此操作：

```
AppDelegate *appDelegate = (AppDelegate*)[UIApplication sharedApplication].delegate;

    splashImageView=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"splash.png"]];

    splashImageView.userInteractionEnabled=FALSE;

    [appDelegate.window addSubview:splashImageView];
    splashImageView.frame=CGRectMake(0,0,1024,768); 
```

它很好地添加了我的启动画面，但我有一个纵向窗口，我正在使用情节提要并从导航控制器开始，有什么方法可以在横向中设置此导航以在横向中有一个窗口？谢谢

# javascript - 使用 id 动态显示/隐藏 div 元素

> ID：14813101
> 
> 赞同：-2
> 
> 时间：2013-02-11T13:34:39.303
> 
> 标签：javascript, jquery, html, ajax

```
$(document).ready(function() {
 $("input[name$='type']").click(function() {
    var value = $(this).val();
    if(value == 'variant-3'){
        $('[id*=variant]').show();
    }
    else{
         $('[id*=variant]').hide();
         $('.'+ value ).show();
    }
}).click();
}); 
```

[http://jsfiddle.net/sushanth009/h6Q38/1/](http://jsfiddle.net/sushanth009/h6Q38/1/)

使用类来显示/隐藏 div 元素。如何使用 id 而不是类来实现相同的目标？我试过了，但我最终隐藏了所有或显示了所有。

这是我的代码 [http://jsfiddle.net/h6Q38/8/](http://jsfiddle.net/h6Q38/8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:37:26.627

我想你想要这个：

```
<div id="variant-1">Variant 1</div>
<div id="variant-2">Variant 2</div>
<div id="variant-1.1">Variant 1.1</div>     <!-- don't reuse id! -->
<div id="variant-2.1">Variant 2.1</div>     <!-- don't reuse id! -->

$("input[name$='type']").click(function() {
    if (this.value=='variant-3'){
        $('[id^=variant]').show();
    } else{
        $('[id^=variant]').hide();
        $('[id^='+this.value+']').show();
    }        
}); 
```

[示范](http://jsfiddle.net/rwH34/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:37:07.907

HTML

```
<p class="text1">Variants
 <label>
   <input type="radio" name="type" value="variant-1" id="type_0" checked="checked" />
   Variant 1</label>
 <label>
   <input type="radio" name="type" value="variant-2" id="type_1" />
   Variant 2</label>
    <label>
   <input type="radio" name="type" value="variant-3" id="type_2" />
   Show All</label>
</p>

<div class="variant-1">Variant 1</div>    
<div class="variant-2">Variant 2</div>    
<div class="variant-1">Variant 1.1</div>    
<div class="variant-2">Variant 2.1</div> 
```

JS

```
$(document).ready(function() {
    $("input[name$='type']").click(function() {
        var value = $(this).val();
        if(value == 'variant-3'){
            $('[class*=variant]').show();
        }
        else{
             $('[class*=variant]').hide();
             $('.'+ value ).show();
        }
    }).click();
}); 
```

**更新**：

这是更新的演示，考虑到 ID 不能在一个页面上多次使用：http: [//jsfiddle.net/h6Q38/14/](http://jsfiddle.net/h6Q38/14/)。代码已更新

将所有 ID 更改为类。ID 只能在页面上使用一次，因此请改用类。上面的代码是固定的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:36:54.070

改变 。在 ＃？`$('#'+ value ).show();`:-p 否则，老实说，我真的不明白这里发生了什么。作为类名的值有点粗略，但可以肯定......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T13:46:49.847

一件事是人们已经指出的-您没有更改`$('.'+ value )`为`$('#'+ value )`. 但是还有另一个问题。在您的带有 id 的版本中，您只需将`class`属性更改为`id`属性，因此您有 2 个相同的元素，`id`这是一个错误。`id`属性必须是唯一的。

如果您想使用 id，您应该将它们更改为唯一的。如果某些元素应该以某种方式连接，您可以在 末尾添加一些内容`id`，例如：

```
<div id="variant-1">Variant 1</div>

<div id="variant-2">Variant 2</div>

<div id="variant-1-1">Variant 1.1</div>

<div id="variant-2-1">Variant 2.1</div> 
```

然后更新显示特定元素的行：

```
$('[id*='+ value + ']' ).show(); 
```

检查更新的代码 - [http://jsfiddle.net/h6Q38/8/](http://jsfiddle.net/h6Q38/8/)

# php - 第一次尝试登录被拒绝，但第二次尝试成功

> ID：14813109
> 
> 赞同：0
> 
> 时间：2013-02-11T13:34:59.170
> 
> 标签：php, pdo

我目前在登录时遇到问题 - 第一次登录尝试总是被拒绝，但第二次尝试成功。知道如何解决这个问题吗？

**登录.php**

```
if(isset($_POST['pmsubmit']))
    {
    LoginSubmit('pm', 'pmname', 'pmpass');
    }

    if (isset($_POST['tssubmit'])) {
    LoginSubmit('ts', 'dept', 'tspass');
    }

function LoginSubmit($pm_or_ts, $the_name_input, $the_pass_input)
{
  global $pdo;
    $salt = "$2a$12ehTk6%^jswam)*usnyruhst";
  $posted_name = $_POST[$the_name_input];
    $posted_pass = crypt($_POST[$the_pass_input], $salt);   
  // check if password matches the one in the table
  $query = $pdo->prepare("SELECT * FROM db_pass WHERE pass = :pass");
  $query->execute(array(":pass" => $posted_pass));
  // if there is a match then we log in the user
  if ($query->rowCount() > 0)
  {
    // session stuff
    $_SESSION[$the_name] = $posted_name;
      $_SESSION['id'] = $row['id'];
    // refresh page
    header( 'Location: ' . $pm_or_ts . '/index.php' ) ;
    exit;
  } 
  // if there is no match then we present the user with an error
  else
  { 
    echo '
    <script>
    $(function() {
        $( "#dialog-message" ).dialog({
      modal: true,
      buttons: {
        Ok: function() {
          $( this ).dialog( "close" );
            }
        }
        });
    });
    </script>
        <div id="dialog-message" title="Incorrect password">
        The password you have provided is incorrect.<br>Please try again.
    </div>
    ';
  }
}
?> 
```

**下午/index.php**

```
<?php 
session_start();
setcookie("pmw", $_SESSION[$thename], time()+7200, '/');
require_once("../resources/php/connection.php");

if (empty($_SESSION[$thename]) || empty($_COOKIE['pmw']) ) {
    header("Location: ../login.php");
    exit;
}
?> 
```

**ts/index.php**

```
<?php 
session_start();
setcookie("ts", $_SESSION[$thename], time()+7200, '/');
require_once("../resources/php/connection.php");

if (empty($_SESSION[$thename]) || empty($_COOKIE['ts']) ) {
    header("Location: ../login.php");
    exit;
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:08:18.710

我认为在您 login.php 中您没有开始会话，而是直接将值初始化为 $_SESSION[$the_name] 。所以在 login.php 文件的开头写 session_start()。

# user-interface - 如何明确指出某些属性不能在编辑操作中修改

> ID：14813112
> 
> 赞同：0
> 
> 时间：2013-02-11T13:35:02.073
> 
> 标签：user-interface, usability

我们有一个要求，不允许用户在编辑时修改某些字段。我们目前禁用此类字段（例如下拉菜单或日期字段或文本字段）。应用程序如何提供一个字段不可修改的视觉感觉，有没有比上述方法更优雅的方式由应用程序完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:36:38.283

我觉得标准方法是用灰色文本/字体颜色“变灰”

另一种选择是对可变项目使用输入字段，并且在只读时使用纯 HTML。

一件困难的事情可能是选择框。如果它们显示了一个值列表，并且您可以更改选择了哪个值，那么您将拥有一个现在感觉像是编辑的控件。对于这个问题，我会考虑要么真的不使用选择框，而是直接列出所有选项，选择的选项以某种方式加粗，或者我会使用选择框并写一个字面注释，比如“this is read -仅，选择不同的值不会更改当前设置”。

# android - AsyncTask 中的 IOException

> ID：14813126
> 
> 赞同：0
> 
> 时间：2013-02-11T13:35:52.797
> 
> 标签：android, android-asynctask, httprequest, ioexception

我正在尝试使用 AsyncTask 执行一个简单的 Http 请求，代码如下：

```
public class MainActivity extends Activity implements OnClickListener {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button start = (Button) findViewById(R.id.button1);
    start.setOnClickListener(this);

}

public void onClick(View v) {

    String url = "http://www.mysamplecode.com/DowloadData";
    new MyAsyncTask(this).execute(url);

  }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public class MyAsyncTask extends AsyncTask<String, Void, String> {

    private static final int REGISTRATION_TIMEOUT = 3 * 1000;
    private static final int WAIT_TIMEOUT = 30 * 1000;
    private final HttpClient httpclient = new DefaultHttpClient();

    final HttpParams params = httpclient.getParams();
    HttpResponse response;
    private String content =  null;
    private boolean error = false;

    private Context mContext;
    private int NOTIFICATION_ID = 1;
    private Notification mNotification;
    private NotificationManager mNotificationManager;

    public MyAsyncTask(Context context){

        this.mContext = context;

        //Get the notification manager
        mNotificationManager = (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);

    }

    protected void onPreExecute() {
        createNotification("Data download is in progress","");
    }

    protected String doInBackground(String... urls) {

        String URL = null;
        String param1 = "abc";
        String param2 = "xyz";

        try {

            //URL passed to the AsyncTask
            URL = urls[0];
            HttpConnectionParams.setConnectionTimeout(params, REGISTRATION_TIMEOUT);
            HttpConnectionParams.setSoTimeout(params, WAIT_TIMEOUT);
            ConnManagerParams.setTimeout(params, WAIT_TIMEOUT);

            HttpPost httpPost = new HttpPost(URL);

            //Any other parameters you would like to set
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("param1",param1));
            nameValuePairs.add(new BasicNameValuePair("param2",param2));
            httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            //Response from the Http Request
            response = httpclient.execute(httpPost);

            StatusLine statusLine = response.getStatusLine();
            //Check the Http Request for success
            if(statusLine.getStatusCode() == HttpStatus.SC_OK){
                ByteArrayOutputStream out = new ByteArrayOutputStream();
                response.getEntity().writeTo(out);
                out.close();
                content = out.toString();
            }
            else{
                //Closes the connection.
                Log.w("HTTP1:",statusLine.getReasonPhrase());
                response.getEntity().getContent().close();
                throw new IOException(statusLine.getReasonPhrase());
            }

        } catch (ClientProtocolException e) {
            Log.w("HTTP2:",e );
            content = e.getMessage();
            error = true;
            cancel(true);
        } catch (IOException e) {
            Log.w("HTTP3:",e );
            content = e.getMessage();
            error = true;
            cancel(true);
        }catch (Exception e) {
            Log.w("HTTP4:",e );
            content = e.getMessage();
            error = true;
            cancel(true);
        }

        return content;
    }

  protected void onCancelled() {
        createNotification("Error occured during data download", content);
    }

    protected void onPostExecute(String content) {
        if (error) {
            createNotification("Data download ended abnormally!",content);
        } else {
            createNotification("Data download is complete!","");
        }
    }

    private void createNotification(String contentTitle, String contentText) {

        //Build the notification using Notification.Builder
        Notification.Builder builder = new Notification.Builder(mContext)
        .setSmallIcon(android.R.drawable.stat_sys_download)
        .setAutoCancel(true)
        .setContentTitle(contentTitle)
        .setContentText(contentText);

        //Get current notification
        mNotification = builder.getNotification();

        //Show the notification
        mNotificationManager.notify(NOTIFICATION_ID, mNotification);
    }

}
} 
```

它似乎有效，但 MyAsyncTask 总是给出一个 IOException 并且调用 onCancelled() 方法，关闭请求并显示错误消息，为什么？我怎么解决这个问题？日志（当我捕获异常时附加到参数“内容”）显示消息“方法不允许”，代码有问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2020-05-05T19:59:29.777

也许有点晚了，但是将您的 URL 从“ [http://www.mysamplecode.com/DowloadData](http://www.mysamplecode.com/DowloadData) ”更改为“ [https://www.mysamplecode.com/DowloadData](https://www.mysamplecode.com/DowloadData) ”可以处理它。

# shell - 找到所有的压缩包，并在原地解压 - Unix

> ID：14813130
> 
> 赞同：14
> 
> 时间：2013-02-11T13:36:09.803
> 
> 标签：shell, unix, find, zip, unzip

我已经尝试了一段时间，相信我已经很接近这个了，但是我对 Unix 还很陌生，所以一直觉得这很困难。

我有一个文件夹，其中包含许多文件夹，其中一些文件夹中有 zip 文件，而另一些则没有。我正在尝试解压缩任何子目录中的所有 zip 文件。

例如我有：

文件/A/something.java

文件/B/somezipfile.zip

文件/C/someotherfile.zip

文件/D/AnotherZipFile.zip

我想解压缩它们（假设 zip 只包含 .java 文件），得到如下结果：files/A/something.java

文件/B/javafile.java

文件/C/someotherfilefromzip.java

文件/D/Anotherfile.java

我不介意解压缩后 ZIP 文件是否保留或被删除，两者都可以。

到目前为止我所尝试的。

1）我希望我可以使用我不熟悉的管道，如下所示：

```
find . -name *.zip | unzip 
```

这行不通。

2）我花了一些时间搜索，我使用在线解决方案最接近的是：

```
find . -name '*.zip' -exec unzip '{}' ';' 
```

这解压缩，但将它们解压缩到当前工作目录中，我希望它们解压缩到位。我也不明白这个我想学习的命令。

任何帮助深表感谢。

谢谢，

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-11T13:45:36.567

```
find . -name '*.zip' -exec sh -c 'unzip -d `dirname {}` {}' ';' 
```

此命令在当前目录及其子目录中递归查找名称匹配`*.zip`模式的文件。对于找到的文件，它`sh`使用两个参数执行命令：

```
-c 
```

和

```
unzip -d `dirname <filename>` <filename> 
```

`<filename>`找到的文件的名称在哪里。命令`sh`是 Unix shell 解释器。选项`-c`告诉 shell 下一个参数应该被解释为 shell 脚本。所以shell解释了以下脚本：

```
unzip -d `dirname <filename>` <filename> 
```

在运行`unzip`shell 之前，通过进行各种替换来扩展命令。在这个特定的例子中，它替代了

```
`dirname <filename>` 
```

`dirname <filename>`使用实际输出放置文件的目录名称的命令输出。因此，如果文件名为`./a/b/c/d.zip`，shell 将`unzip`像这样运行：

```
unzip -d ./a/b/c ./a/b/c/d.zip 
```

如果您的 ZIP 文件名或目录名有空格，请使用：

```
find . -name '*.zip' -exec sh -c 'unzip -d "`dirname \"{}\"`" "{}"' ';' 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-02-11T14:17:55.550

使用`-execdir`而不是`-exec`，它在找到文件的目录中运行命令，而不是在您运行的目录`find`中。

```
find . -name '*.zip' -execdir unzip '{}' ';' 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-11T13:54:46.383

```
find . -name '*.zip' | xargs -n1 unzip 
```

# javascript - HighChart 中 y 轴的起始值

> ID：14813133
> 
> 赞同：2
> 
> 时间：2013-02-11T13:36:20.550
> 
> 标签：javascript, jquery, charts, highcharts

我最近将[HighChart](http://www.highcharts.com/)添加到我的项目中，我想通过它创建图表。我编写了这段代码来创建一些城市的月份温度图表：

```
function CreateChart() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                ype: 'line',
                //type: 'column',
                shadow: true,
                zoomType: 'x',
                style: {
                    fontFamily: 'Tahoma'
                }
            },
            title: {
                text: 'Nima Report',
                x: -20 //center
            },
            labels: {
                items: {
                    style: {
                        fontFamily: 'Tahoma'
                    }
                },
                style: {
                    fontFamily: 'Tahoma'
                }
            },
            subtitle: {
                text: 'Source: --',
                x: -20
            },
            xAxis: {                   
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                labels: {
                    rotation: -45,
                    align: 'right',
                    formatter: function () {
                        return '<span style="font-size: 18px;">' + this.value + '</span>';
                    }
                }
            },
            yAxis: {
                title: {
                    text: 'Temp'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }],
                labels: {
                    align: 'right',
                    formatter: function () {
                        return '<span style="font-size: 18px;font-weight: bold">' + this.value + '</span>';
                    }
                }
            },
            tooltip: {
                crosshairs: [true, true],
                enabled: true,
                style: {
                    fontFamily: "Tahoma",
                    textAlign: "right"
                },
                formatter: function () {
                    return '<b>' + this.series.name + '</b><br/>' +
                    this.x + ': ' + this.y + '°C';
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -10,
                y: 100,
                borderWidth: 0,
                labelFormatter: function () { return '<span style="font-family: Tahoma">' + this.name + '</span>'; }
            },
            series: [{
                name: 'Tokyo',
                data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
            }, {
                name: 'New York',
                data: [0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
            }, {
                name: 'Berlin',
                data: [0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
            }, {
                name: 'London',
                data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
            }]
        });
    } 
```

问题是尽管我没有任何负值，但图表创建的`Y-Axis`起始值是什么时候。我希望它从我如何设置它开始？谢谢`-25``Zero`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T13:41:24.533

添加`min`到 y 轴：

```
yAxis: {
     title: {
         text: 'Temp'
     },
     plotLines: [{
         value: 0,
         width: 1,
         color: '#808080'
     }],
     labels: {
        align: 'right',
        formatter: function () {
            return '<span style="font-size: 18px;font-weight: bold">' + this.value + '</span>';
        }
     },
      min:0,
}, 
```

[演示](http://jsfiddle.net/uSREH/1/)

# internet-explorer - internet explorer 10 - 如何应用灰度过滤器？

> ID：14813142
> 
> 赞同：37
> 
> 时间：2013-02-11T13:36:43.563
> 
> 标签：internet-explorer, css, internet-explorer-10

这个 CSS 代码在 Internet Explorer 9 之前工作得非常好。

```
img.gray {
    filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale");
    filter: gray;
    -webkit-filter: grayscale(1);
} 
```

但是我需要为 Internet Explorer 10 做什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-11T18:59:57.610

[IE10 不像](http://blogs.msdn.com/b/ie/archive/2012/06/04/legacy-dx-filters-removed-from-ie10-release-preview.aspx)IE9 和更早版本那样支持 DX 滤镜，也不支持灰度滤镜的前缀版本。

但是，您可以在 IE10 中使用 SVG 覆盖来完成灰度。例子：

```
img.grayscale:hover {
    filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'1 0 0 0 0, 0 1 0 0 0, 0 0 1 0 0, 0 0 0 1 0\'/></filter></svg>#grayscale");
}

svg {
    background:url(http://4.bp.blogspot.com/-IzPWLqY4gJ0/T01CPzNb1KI/AAAAAAAACgA/_8uyj68QhFE/s400/a2cf7051-5952-4b39-aca3-4481976cb242.jpg);
} 
```

（来自：[http](http://www.karlhorky.com/2012/06/cross-browser-image-grayscale-with-css.html) ://www.karlhorky.com/2012/06/cross-browser-image-grayscale-with-css.html ）

简化的 JSFiddle：http: [//jsfiddle.net/KatieK/qhU7d/2/](http://jsfiddle.net/KatieK/qhU7d/2/)

有关 IE10 SVG 滤镜效果的更多信息：http: [//blogs.msdn.com/b/ie/archive/2011/10/14/svg-filter-effects-in-ie10.aspx](http://blogs.msdn.com/b/ie/archive/2011/10/14/svg-filter-effects-in-ie10.aspx)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-02-12T22:28:00.393

内联 SVG 可用于 IE 10 和 11 以及 Edge 12。

我创建了一个名为 gray 的项目，其中包含用于这些浏览器的 polyfill。polyfill`<img>`使用内联 SVG 切换标签：[https ://github.com/karlhorky/gray](https://github.com/karlhorky/gray)

要实现，简短的版本是在上面的 GitHub 链接上下载 jQuery 插件，并在你的正文末尾添加 jQuery：

```
<script src="/js/jquery.gray.min.js"></script> 
```

然后每个具有该类的图像`grayscale`都将显示为灰色。

```
<img src="/img/color.jpg" class="grayscale"> 
```

如果你愿意，你也可以[看一个演示。](http://work.karlhorky.com/gray/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-23T20:31:33.510

使用这个 jQuery 插件 [https://gianlucaguarini.github.io/jQuery.BlackAndWhite/](https://gianlucaguarini.github.io/jQuery.BlackAndWhite/)

这似乎是唯一一个跨浏览器的解决方案。此外，它还有一个很好的淡入淡出效果。

```
$('.bwWrapper').BlackAndWhite({
    hoverEffect : true, // default true
    // set the path to BnWWorker.js for a superfast implementation
    webworkerPath : false,
    // to invert the hover effect
    invertHoverEffect: false,
    // this option works only on the modern browsers ( on IE lower than 9 it remains always 1)
    intensity:1,
    speed: { //this property could also be just speed: value for both fadeIn and fadeOut
        fadeIn: 200, // 200ms for fadeIn animations
        fadeOut: 800 // 800ms for fadeOut animations
    },
    onImageReady:function(img) {
        // this callback gets executed anytime an image is converted
    }
}); 
```

# regex - sed 正则表达式中的布尔 OR

> ID：14813145
> 
> 赞同：26
> 
> 时间：2013-02-11T13:37:04.980
> 
> 标签：regex, sed, logical-operators

我正在尝试替换`boots`配置文件中命名的包的所有引用。

行格式为`add fast (package OR pkg) boots-(any-other-text)`，例如：

```
add fast package boots-2.3
add fast pkg boots-4.5 
```

我想将其替换为：

```
add yinst pkg boots-5.0 
```

我尝试了以下`sed`命令：

```
sed -e 's/add fast (pkg\|package) boots-.*/add yinst pkg boots-5.0/g'
sed -e 's/add fast [pkg\|package] boots-.*/add yinst pkg boots-5.0/g' 
```

什么是正确的正则表达式？我想我在布尔或（`package`或`pkg`）部分遗漏了一些东西。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-11T13:45:33.173

```
sed -e 's/add fast \(pkg\|package\) boots-.*/add yinst pkg boots-5.0/g' 
```

你总是可以通过做两次来避免 OR

```
sed 's/add fast pkg boots-.*/add yinst pkg boots-5.0/g
s/add fast package boots-.*/add yinst pkg boots-5.0/g' 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-11T13:46:07.363

使用扩展正则表达式模式，不要转义`|`.

```
sed -E -e 's/add fast (pkg|package) boots-.*/add yinst pkg boots-5.0/g' 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-11T13:44:40.267

你正在混合 BRE 和 ERE 要么都逃逸`()`，`|`要么都不逃逸。

sed 默认使用基本正则表达式，启用扩展正则表达式的使用取决于实现，例如，使用 BSD sed 您使用`-E`开关，GNU sed 将其记录为`-r`，但`-E`也可以使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-05T04:31:15.053

GNU（Linux）：

1）制作以下随机字符串

```
 cidr="192.168.1.12"
   cidr="192.168.1.12/32"
   cidr="192.168.1.12,8.8.8.8" 
```

留白

2) sed 与 -r 一起使用 GNU 中的逻辑运算符，如提到的@Thor，以及 -i 即时编辑找到匹配的文件

```
$ echo '<user id="1000" cidr="192.168.1.12">' > /tmp/1000.xml
$ sed -r -i \ 
  s/'cidr="192.168.1.12\/32"|cidr="192.168.1.12"|192.168.1.12,'/''/ /tmp/1000.xml

-r = GNU sed
-i = search / match/ edit the changes to the file on the fly 
```

# jquery - JQuery移动到下一个元素不起作用

> ID：14813152
> 
> 赞同：0
> 
> 时间：2013-02-11T13:37:22.173
> 
> 标签：jquery

我已经和这些一起工作了几天，无法弄清楚如何实现它......请建议

[http://jsfiddle.net/kbspot/fjVhY/](http://jsfiddle.net/kbspot/fjVhY/)

所有拇指显示在底部，当用户单击拇指时，将显示一个大预览......我得到了它的工作

问题：我想添加的另一件事是，当用户单击大预览时，将选择下一个拇指（底部面板）。但它没有按我的意愿工作，没有选择下一个拇指。

```
//Click on thumbnail (this is working perfectly)
$(".panel-bottom li").click(function () {
    var $activetab = $('li.active');        
    //$activetab.('IMG').hide();
    $activetab.removeClass('active');       
    $(this).addClass('active');

    //$(this).next().css({'border': '2px solid red'});
});

//Large Preview  click (this is the problem)
$("li.active .container").click(function () {
    //alert($(this).parent().html());
    var $activetab = $(this);       
    var $nexttab = $activetab.next();   

    $(this).removeClass();      
    $nexttab.addClass("active");
}); 
```

对不起，我不知道如何解释，但我确定你明白了，希望

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:46:13.567

小提琴没有正确显示给我，但是从这里的代码来看，它看起来像在大预览点击中，`$activetab`不应该是`li.active .container`元素，而是它的 parent `li.active`，就像第一部分一样？

```
//Large Preview  click (this is the problem)
$("li.active .container").click(function () {
    //alert($(this).parent().html());
    var $activetab = $(this).parent(); // Updated this line    
    var $nexttab = $activetab.next();   

    $(this).removeClass();      
    $nexttab.addClass("active");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:52:17.333

您的 js 小提琴有点损坏，因为看起来图像指向您的本地开发。

```
<img src="http://lensamaya/basic/photo/images/1.jpg" alt="From off a hill whose concave womb reworded" /> 
```

但是，我认为我可以看到您的问题，因为您正在进入容器 div 并尝试转到下一个元素。但是，您需要先升一级到 li 元素，然后再降级。

像这样的东西会起作用。

```
$("li.active .container").click(function () {
    //alert($(this).parent().html());
    var $activetab = $(this);       
    var $nexttab = $activetab.parent().next().children('.container');

    $(this).removeClass();      
    $nexttab.addClass("active");
}); 
```

# jquery - jQuery 是否支持在 XML 文档中运行？

> ID：14813159
> 
> 赞同：1
> 
> 时间：2013-02-11T13:37:39.777
> 
> 标签：jquery, xml

作为[此处](https://stackoverflow.com/a/14812026/678801)讨论的结果，我很好奇 jQuery 是否正式支持在 XML 文档中运行，还是只是官方支持的 HTML 文档？

我知道 jQuery 可用于在 XML 文档中选择 DOM 元素等，但它是官方支持和维护的吗？

*注意：我不是在谈论使用 jQuery 解析 XML。*

# ruby - 在这种情况下，我应该在 Heroku 上使用 worker 还是 web dyno？

> ID：14813160
> 
> 赞同：1
> 
> 时间：2013-02-11T13:37:44.213
> 
> 标签：ruby, performance, heroku

我不确定我的应用程序是否适合工人或网络测功机。假设我有一个 Web 应用程序，它可以分析来自用户的纯文本并使用分析的关键字来查找我的数据库中的所有文档，这些文档是全文索引的。现在这个过程可能需要一些时间，因为在我获得所有文档后，我必须过滤掉一些用户不想看到的文档。我还使用 Levenshtein 距离算法来计算返回的文档与关键字的相关性。因此，我无法提前计算并缓存结果。

这个过程对我来说就像一个同步过程。所以，我不确定如何通过在工人测功机中排队来加快速度？因为无论如何用户都必须在网页上等待才能看到结果。有时我会收到 H12 请求超时。

而且我认为在这种情况下增加 web dyno 不会有帮助，因为即使它只是一个用户，它也会是一个进程，有时它会超过 30 秒。但我也不知道如何使用 worker dyno 使应用程序更快。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:30:18.633

增加测功机在这里无济于事。如果用户需要等待，最好让工作人员完成工作并在完成时异步更新用户。您可能无法通过这种方式使其更快（尽管也许您可以，因为您的工作加载的代码更少？），但您不会遇到 H12 并且用户不会卡在等待页面渲染，想知道它是否需要很长时间，或破碎。

# sql - 如何查看是否安装了 SQL server 报表服务和 BIDS？

> ID：14813166
> 
> 赞同：1
> 
> 时间：2013-02-11T13:38:09.753
> 
> 标签：sql, sql-server-2008, powershell, registry, prerequisites

我们的安装应该可以在 SQL 2008 R2 和 SQL 2012 上运行，前提是

> 在开始安装之前，应安装 SQL Server 报表服务和 BIDS（在 2012 SQL Server Data Tools 中）。

我们需要通过注册表项或文件夹（如果它在安装时创建一些文件夹）。但是即使没有安装 BIDS 仍然存在注册表项，如何查找是否安装了该功能。

即使有一个 powershell 脚本来验证这一点，它也会有所帮助。

# c# - 一次打开大量的AVAudioPlayers？

> ID：14813180
> 
> 赞同：0
> 
> 时间：2013-02-11T13:39:12.730
> 
> 标签：c#, xamarin.ios, avaudioplayer, audio-player

假设我想使用 AVAudioPlayer 而不是 SystemSound 来控制 AVAudioPlayer 提供的 SystemSound 不提供的音量控制。

似乎使用 AVAudioPlayer 可以同时打开的播放器数量是有限制的。您会在我的示例项目的代码中注意到，当我创建一个包含 200 个 AVAudioPlayer 的列表时，它工作得很好。但是当我将该数字增加到 300 时，它会因错误而崩溃。我唯一的结论是我可以创建一定数量的玩家。是这样吗？有什么方法可以创建更多玩家而不会崩溃？

```
 AVAudioPlayer player;
    NSUrl mediaFile;
    List<AVAudioPlayer> playerList;

    DateTime before = DateTime.Now;
    mediaFile = NSUrl.FromFilename("mySoundConvertedToCAF.caf");
    player = AVAudioPlayer.FromUrl(mediaFile);
    player.Delegate = new AVAudioPlayerDelegate();
    Console.WriteLine("total ms = " + DateTime.Now.Subtract (before).TotalMilliseconds);

    playerList = new List<AVAudioPlayer>();

    // For loop 200 times works
    // for ( int i = 0; i < 200; i++ )

    // For loop 300 times does NOT work.  Almost as if somewhere between 200 and 300 AVAudioPlayers is the max amount you can have open at once... Is it because all of them are accessing the same sound file?
    for ( int i = 0; i < 300; i++ )
    {
        playerList.Add (AVAudioPlayer.FromUrl(mediaFile));
        playerList[i].Delegate = new AVAudioPlayerDelegate();
    }

    Console.WriteLine("I made a list of " + playerList.Count() + " AVAudioPlayers!");

    playerList[0].Play();

    Thread.Sleep(500);

    playerList[1].Play(); 
```

至于我为什么要这样做，它是为了 iOS 游戏引擎的工作......我不是一次播放数百个声音，但我希望播放器打开，以便在任何时候我都可以播放它们而无需加载新的 AVAudioPlayer 或正在更改的媒体文件....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:39:12.730

我已经解决了这个问题。不要使用 NSURL 类型从音频文件中读取，而是使用 NSData 类型。而不是使用 AVAudioPlayer.FromUrl 函数导入，而是使用 AVAudioPlayer.FromData。这确实有大约 245 名玩家的限制。作为测试，我用 NSData 尝试了多达 6000 个 AVAudioPlayers，它们运行良好。

# android - HTML5 视频在浏览器中有效 - 但在 Android 模拟器中无效

> ID：14813183
> 
> 赞同：2
> 
> 时间：2013-02-11T13:39:17.690
> 
> 标签：android, html, mobile

我是 HTML5 Android 开发的新手。

我正在尝试播放本地 mp4 视频文件。代码如下：

```
<!DOCTYPE html>
<html>
<head>
<script src="scripts/jquery.mobile.min.js"></script>
</head>
<body>
  <video src="videos/video1.mp4" poster="videos/ph.jpg" onclick="this.play();"/>            
</body>
</html> 
```

这在浏览器中完美运行，但在 Android 模拟器中它带来了错误：

> 媒体播放器错误 (1, -2147483648)

我尝试了许多不同的选项，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:58:37.783

模拟器中的视频一直是一个相当不可靠的测试场景。很大程度上取决于您的机器以及模拟器的功能和性能。启用了硬件加速并安装了强大的编解码器集的 x86 优化图像让我更加幸运，但它似乎是一个缺乏全面支持的领域。

我无法找到一组确定的 MediaPlayer 错误返回代码，这将有助于追踪我所看到的问题所在，所以总的来说，我已经放弃尝试测试视频播放，而不是非常简单的低比特率 mp4除了真实设备之外的任何东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:11:30.023

你的视频分辨率是多少？视频可能无法播放，它太高了。还要确保它为 android 设备正确编码。

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:43:26.917

尝试这个，

```
 <video width="320" height="240" controls>
<source src="VIDEO.mp4" type="video/mp4">
</video> 
```

还要添加其他 jQuery 源。

# php - 简单的 PHP If / ElseIf 语句不起作用

> ID：14813185
> 
> 赞同：2
> 
> 时间：2013-02-11T13:39:20.947
> 
> 标签：php, if-statement

我有一个非常简单的 if / elseif 语句，它无法按照我想要的方式工作......

```
 if ( $title == 'New York' )
        {
        echo 'This is New York';
        }
        elseif ( $title == 'California' )
        {
        echo 'This Is California';
        }
        else if ($title = "Chicago" )
        {
        echo 'This is Chicago';
        }
        else if ($title = "Seattle" )
        {
        echo 'This is Seattle';
        }
        else
        {
        echo 'No Match Found';
        } 
```

如果 $title 设置为纽约或加利福尼亚，则脚本有效，但如果它设置为芝加哥、西雅图或其他地方，则仅显示“这是加利福尼亚”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T13:41:00.783

小心`=`和`==`。我认为这就是问题所在。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T13:41:45.387

您正在使用`=`而不是`==`最后一种情况。

这将永远是正确的，因为这是一个分配。

替换那些`==`，你就可以开始了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T13:40:59.610

```
if ( $title == 'New York' )
        {
        echo 'This is New York';
        }
        elseif ( $title == 'California' )
        {
        echo 'This Is California';
        }
        else if ($title == "Chicago" )
        {
        echo 'This is Chicago';
        }
        else if ($title == "Seattle" )
        {
        echo 'This is Seattle';
        }
        else
        {
        echo 'No Match Found';
        } 
```

您必须小心，`==`因为`=`在每次比较的条件下都无法正常工作

使用 == 表示字符串，使用 === 表示数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T13:41:47.750

不要使用`=`. 您必须使用`==`（[http://www.php.net/manual/en/language.operators.comparison.php](http://www.php.net/manual/en/language.operators.comparison.php)）

如下所示：

```
else if ($title = "Chicago" )
{
   echo 'This is Chicago';
}
else if ($title = "Seattle" )
{
   echo 'This is Seattle';
}
else
{
   echo 'No Match Found';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T13:42:31.990

在您的代码示例中，'Chicago' 和 'Seattle' 被分配而不是比较。“=”与“==”

对于这样的代码，我建议您检查`switch`语句。

[http://php.net/manual/en/control-structures.switch.php](http://php.net/manual/en/control-structures.switch.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T13:42:45.587

试试这个：

```
if ( $title == 'New York' )
{
   echo 'This is New York';
}
elseif ( $title == 'California' )
{
   echo 'This Is California';
}
elseif ($title == "Chicago" )
{
   echo 'This is Chicago';
}
elseif ($title == "Seattle" )
{
   echo 'This is Seattle';
}
else
{
   echo 'No Match Found';
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-11T13:42:48.587

将 = 替换为 ==

```
 if ( $title == 'New York' )
    {
      echo 'This is New York';
    }
    else if ( $title == 'California' )
    {
      echo 'This Is California';
    }
    else if ($title == "Chicago" )
    {
      echo 'This is Chicago';
    }
    else if ($title == "Seattle" )
    {
      echo 'This is Seattle';
    }
    else
    {
     echo 'No Match Found';
    } 
```

它的工作

# wpf - 按其他列对 DevExpress GridControl 进行排序

> ID：14813191
> 
> 赞同：0
> 
> 时间：2013-02-11T13:39:41.220
> 
> 标签：wpf, devexpress

我将服务器模式下的 GridControl 绑定到类数组 ( `List<Product>`)。数据部分取自数据库，这意味着 ID 取自数据库，但随后转换为代码中的名称（附加只读属性）。

网格显示名称，而不是 ID。但是当我单击网格标题时，我想按 ID 排序，即如果我单击“产品标题”标题，我实际上想按“产品 ID”排序。

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:12:34.663

您可以尝试对列表进行排序。

尝试以下操作：

```
myDataSource.Sort((x,y) => x.ProductID.CompareTo(y.ProductID));
myGridView.RefreshData(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T07:07:56.717

简单的解决方案：

添加`ID column`网格视图数据源并按照链接在网格中实现排序。实现这一点的方法很少。*您还**可以使用`Sorting`*：

```
grid.Columns["ID"].SortOrder = ColumnSortOrder.Ascending; 
```

或`Custom Sorting`如下使用：

[排序模式和自定义排序](http://documentation.devexpress.com/#WPF/CustomDocument6142)

```
grid.ItemsSource = your list datasource;
grid.PopulateColumns();
grid.Columns[0].SortMode = ColumnSortMode.Custom;
grid.SortBy(grid.Columns[0]); 
```

然后处理[GridControl.CustomColumnSort 事件](http://documentation.devexpress.com/#wpf/DevExpressXpfGridGridControl_CustomColumnSorttopic)：

```
private void grid_CustomColumnSort(object sender, CustomColumnSortEventArgs e) {
    e.Result = Comparer<int>.Default.Compare(e.ListSourceRowIndex1,
        e.ListSourceRowIndex2);

    e.Handled = true;
} 
```

参考：
[在代码中排序](http://documentation.devexpress.com/#WPF/CustomDocument6143)
[如何：实现自定义排序](http://documentation.devexpress.com/#wpf/CustomDocument6542)

# c# - 为什么我的测试二进制文件被复制到 TestResults\ \out 文件夹？

> ID：14813192
> 
> 赞同：7
> 
> 时间：2013-02-11T13:39:43.053
> 
> 标签：c#, visual-studio-2010, unit-testing, deployment, msbuild

我在我的 Visual Studio 中遇到了这种不寻常的行为，突然我的测试二进制文件（mytestsolution.dll）和在引用中添加的依赖二进制文件被从我的 Bin 文件夹复制到 TestResults\\Out 文件夹并开始执行那里？

这导致我的测试失败，因为我的 GetExecutionAssembly() 给出了 Out 文件夹的路径，而不是存在一些依赖二进制文件的 Bin 文件夹？

任何人都可以帮助我如何阻止这种情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-05T12:26:53.657

Visual Studio 2010 creates a folder *TestResults* and deploys all relevant files in subdirectories with the following schema: *username_computername date time*.

This is the normal behavior if you don't have a .testsettings file for your solution. The .testsettings file is situated in folder *Solution Items*.

**If you have a .testsettings file, it depends on the setting of *Enable Deployment* in the *Deployment* section. If *Enable Deployment* is checked, the TestResults folder will be created and filled.**

![enter image description here](../Images/42da1874fb58c136a312baf441fb6e47.png)

In some cases it is possible that the TestResults folder will be created although Enable Deployment is deactivated. But in this case the folder is used only for some temporary files, not for the execution files of your tests.

For more infos see:

[MSDN - Test Deployment Overview](http://msdn.microsoft.com/en-us/library/ms182474.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-02-19T05:44:22.977

参加聚会有点太晚了，但在这里我刚刚从实验中学到了什么

环境：net45、VS2017、Microsoft.VisualStudio.QualityTools.UnitTestFramework

当 my `TestMethod`has`DeploymentItemAttribute`时，它从`TestResults\....\Out`文件夹执行。当我删除`DeploymentItemAttribute`它时，它会从`bin\debug`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T00:09:50.900

这是 MSTest 的默认行为。解决方案编译后，测试运行程序将直接引用复制到 TestResults\_TestRun_\Out 文件夹。更改编译设置 (CopyLocal) 不会影响测试运行。

如果您有需要但不在 TestRun 输出文件夹中的依赖项，您有几个选项：

1.  在测试程序集中添加对这些程序集的引用。由于测试运行程序使用反射来确定依赖关系，因此您需要在该程序集中引用一个类。

2.  修改当前的测试设置并将依赖项作为部署项包括在内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T18:16:05.113

您可以通过在测试运行配置中禁用部署来修复此行为。例如，在 VS 2008 中：测试 > 编辑测试运行配置 > 本地测试运行 > 部署 > 启用部署 = 关闭。

有关更多详细信息，请参阅[测试部署概述](http://msdn.microsoft.com/en-us/library/ms182474%28v=vs.90%29.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T13:42:51.950

将属性更改`Copy Local`为`False`

1.  右键单击`mytestsolution.dll`，然后单击`Properties`
2.  从那里更改`Copy Local`为假
3.  构建解决方案并立即检查。

# java - 如何在 BD 中播放数据数组

> ID：14813204
> 
> 赞同：1
> 
> 时间：2013-02-11T13:40:48.363
> 
> 标签：java

如何创建一种方法来播放数组中的所有数据，并创建一段时间或将来自该数组的所有记录包含在 BD 上。由于每个记录器由数据库表中的两列组成。我有 1000 条记录。我如何将这个阵列插入播放给 BD？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:43:33.657

您可以使用准备好的语句（搜索 java.sql.PreparedStatement）来定义通用 INSERT 语句，并循环您的数据以放置每个数据的每个特定值，然后执行准备好的语句。

# c# - 每 x 秒在页面上重复任务并报告回 UI 线程（例如设置 TextBlock.Text 或 ViewModel 属性）

> ID：14813209
> 
> 赞同：0
> 
> 时间：2013-02-11T13:40:56.707
> 
> 标签：c#, mvvm, windows-runtime, task-parallel-library, windows-store-apps

我有一个 Windows 8 应用程序，并希望每 15 秒查询一次资源以获取状态更改（进入 web 服务 url），结果应写入绑定到 UI (XAML) 的 ViewModel 属性。

如果我们离开页面，任务应该终止。

我已经查看了后台任务，但对于这个特定于页面的任务来说，它们似乎有点过头了。

还玩过 Task.Run() 和 Dispatcher，但我无法让它与 while 循环一起工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:16:52.070

如果您想每 x 秒执行一次操作，那么您应该使用计时器。由于您想在 WinRT UI 线程上运行它，因此正确的是[`Windows.UI.Xaml.DispatcherTimer`](http://msdn.microsoft.com/en-us/library/windows/apps/br244250.aspx).

当您离开页面时，您应该`Stop()`设置计时器，以便`Tick`停止引发其事件。

如果你想`await`在事件处理程序中做一些事情，你需要做它`async`，例如：

```
timer.Tick += async (s, e) =>
{
    var client = new HttpClient();
    var response = await client.GetAsync(…);
    …
} 
```

这将创建一个`async void`方法。请注意，[您几乎不应该这样做](http://www.tonicodes.net/blog/why-you-should-almost-never-write-void-asynchronous-methods/)，除非您正在编写事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:54:15.573

您需要使用 UI 线程的**Dispatcher**。您可以将其保存到静态成员中以从任何地方获取它，或者您可以直接从活动 UI 中即时获取它。但是在您拥有**Dispatcher**之后，您可以调用（并等待）**RunAsync**方法。

```
await Windows.ApplicationModel.Core.CoreApplication.MainView.CoreWindow.Dispatcher.RunAsync(
    new CoreDispatcherPriority(), action); 
```

作为操作，您可以使用例如 lambda 表达式或您想要的任何其他预定义操作。在此操作中，您可以操作 UI 绑定元素。我希望它可以帮助你。

# matlab - Matlab - 没有输出返回

> ID：14813213
> 
> 赞同：0
> 
> 时间：2013-02-11T13:41:04.823
> 
> 标签：matlab, output

我有以下功能，只要代码`pdist2`在[这里](http://code.google.com/p/cs250b-projects/source/browse/trunk/Project3/toolbox/classify/pdist2.m?spec=svn81&r=81)。

```
function m = pixel_minimize_distance(x,y)

maximum = (sum(sum(pdist2(x,y))));
[r c] = size(y);
initialValue = y(1,1);
for i=1:r
    for j=1:c
        o = y(i,j);
        y(i,j) = 0;
        sum2 = (sum(sum(pdist2(x,y))));

        if sum2 >= maximum
            if o ~= 0
                maximum = sum2;
                m = o;
            end
        maximum = maximum;
        m = initialValue;
        end
        y(i,j)=o;
    end
    end
end 
```

现在，当我尝试运行该函数时，我没有得到如下所示的输出：

```
>> A=[0 0 0; 0 0 0];
>> B=[1 1 1; 1 1 1];
>> pixel_minimize_distance(A,B) 
```

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:01:05.290

不要调用该变量`maximum`，因为它是一个 Matlab 函数（实际上是 Simulink 的）。

不过，你知道吗

```
maximum=maximum 
```

是不是什么都不做？

你也知道这条线

```
if sum2 >= maximum 
```

不是什么都不做吗？`sum2`永远不会被更新，更好的说法是，它被多次更新为相同的值。检查您的代码，现在它几乎没有意义。

编辑：也许使用一些不同的矩阵会做一些事情......但你提供的矩阵不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:16:03.153

由于您在阅读此处后将**y的 (i,j) 元素替换为 0：**

`o = y(i,j); y(i,j) = 0;`

并且由于**y**的所有条目在您的测试用例中都是正数，因此条件：

`if sum2 >= maximum`

永远不会评估为**true**。连续地，输出变量**m**从未被初始化，因此该函数不返回任何内容。

尝试在函数开始时将**m**初始化为空或其他一些有意义的默认值。

# wcf - 从自身内部调用安全的 WCF Web 服务

> ID：14813215
> 
> 赞同：0
> 
> 时间：2013-02-11T13:41:10.683
> 
> 标签：wcf, wcf-security, wif, ws-security

我们有一个使用自定义 STS 活动联合实现来保护的 wcf Web 服务。

因此，客户必须联系 STS 以获取“令牌”，以便它可以调用 WCF 服务中的方法。

我很困惑如何从服务本身进行自助服务调用。

步骤如下

1.  客户端调用 STS 获取 Token
2.  使用此 Token 它调用 WCF 服务中的方法
3.  WCF 服务中的方法正在执行
4.  我需要通过创建通道工厂并使用线程中可用的引导令牌来调用另一个 Web 服务方法

第四步如何实现？

```
public int GetValue(string input)
{
    CallGetValue1();
    return int.Parse(input);
}

public int GetValue1()
{
    return int.MaxValue;
}

private void CallGetValue1()
{
    var channelFactory = new ChannelFactory<IWCFService>("WCFService");
    channelFactory.Credentials.SupportInteractive = false;
    channelFactory.ConfigureChannelFactory();
    var proxy = channelFactory.CreateChannelWithIssuedToken(GetSecurityToken());
    var result = proxy.GetValue1();
}

private static SecurityToken GetSecurityToken()
{
    var identity = Thread.CurrentPrincipal.Identity as IClaimsIdentity;
    return identity.BootstrapToken;
} 
```

CallGetValue1 给了我一些错误@proxy.GetValue1()

System.ServiceModel.FaultException`1[System.ServiceModel.ExceptionDetail]：安全令牌身份验证器“System.ServiceModel.Security.Tokens.GenericXmlSecurityTokenAuthenticator”无法验证“System.IdentityModel.Tokens.SamlSecurityToken”类型的令牌。（Fault Detail 等于 An ExceptionDetail，可能由 IncludeExceptionDetailInFaults=true 创建，其值为：System.IdentityModel.Tokens.SecurityTokenValidationException：安全令牌身份验证器 'System.ServiceModel.Security.Tokens.GenericXmlSecurityTokenAuthenticator' 无法验证类型为 ' System.IdentityModel.Tokens.SamlSecurityToken'。

对不起，我不知道要添加更多细节。如果您需要更多详细信息，请在评论中回复。谢谢 ：）

# typo3 - 如何排除typo3搜索表单中的字段？

> ID：14813216
> 
> 赞同：1
> 
> 时间：2013-02-11T13:41:18.947
> 
> 标签：typo3, typoscript

我有一个typo3 的网站，我想添加一个搜索表单（typo3 的搜索表单）。如何自定义搜索？我只想在页面的正文中搜索。我想排除元标题、关键字等字段。谢谢！我在一个网站上找到了这个，但我不知道在哪里修改

```
$TCA['tx_yourext_table'] = array(
    'ctrl' => array(
        'title' => 'Title of your table',
        'label' => 'title',
        'tstamp' => 'tstamp',
        'crdate' => 'crdate',
         // etc...
        'searchFields' => 'title, other_field, yet_other_field',
    ),
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:14:43.820

使用以下方法在模板设置中尝试：

```
tt_content.search.20.allowedCols = tt_content.bodytext
tt_content.search.30.dataArray.value = tt_content.bodytext 
```

在我的例子中，20 是 SEARCHRESULT 对象，30 是 FORM 对象；根据需要修改它们。

默认值是这样的，仅供参考：

```
pages.title-subtitle-keywords-description : tt_content.header-bodytext-imagecaption 
```

# java - Netbeans 和 SVN 恢复代码

> ID：14813217
> 
> 赞同：0
> 
> 时间：2013-02-11T13:41:20.980
> 
> 标签：java, svn, netbeans, collabnet

我在 Collabnet SVN 旁边使用 netbeans，我将对 svn 提交大量代码更改，但我有点担心将代码还原回来，该项目由几个包组成，其中这些包中的每个文件都有不同的版本号，我怎么看如果我想恢复代码，我将不得不手动一个一个地恢复每个文件。

我本质上想在提交所有内容之前创建代码的大型修订快照，这样我就可以通过一次还原轻松地还原代码。我对使用 svn 很陌生，所以不确定这是否可能？如果是这样，有人可以指出我正确的方向，我将如何去做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:47:49.250

默认情况下，SVN 将一组文件/目录一起提交 - 如果您说在顶级目录上提交。因此，假设您修改了 10 个文件，一次提交将包含所有更改，从而可以轻松还原。从理论上讲，您可以“逐个文件”提交，但无论如何似乎都不是您想要的。

根据您的问题，我了解到您只有一个 SVN 存储库（“到 svn”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:07:49.970

我可能只是要使用标记/分支在我的 SVN 中创建另一个版本，并在需要时切换到该版本。

# iphone - 获取特定密钥 JSON 解析器 IOS

> ID：14813222
> 
> 赞同：0
> 
> 时间：2013-02-11T13:41:38.150
> 
> 标签：iphone, json, parsing, nsdictionary, nsjsonserialization

我在获取 JSON 文件中的特定密钥时遇到了一些问题。事实上，我使用的是 MapView 和带有一些餐馆坐标的 JSON 文件。

我可以显示我的 JSON 文件的内容，但我无法获取关键内容：lat（纬度）和 lng（经度）。

这是我的 JSON 文件：

```
{
   "html_attributions" : [
      "Adresses fournies par \u003ca href=\"http://www.yellowpages.com.au/\"\u003eYellow Pages\u003c/a\u003e"
   ],
   "next_page_token" : "ClRNAAAAtyfgXsHo6S4iCel9hSfwlphKSXVDh6Nb-PyQfYSGmGhSygljtG9GpZRL8Yfpka-ijz3WvES9b7Fil_PBX4lCfdl2agVIuIACCkAgeS05M8gSEK7qCd3HTQZFLBCRNcqhzkwaFIONRXOWfLV7IG6WYdQvu9mLTpxL",
   "results" : [
      {
         "geometry" : {
            "location" : {
               "lat" : -33.8681990,
               "lng" : 151.1945850
            }
         },
         "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
         "id" : "edd23ebe6cd17dcbd9139e2643324c9195a9e3e3",
         "name" : "The Star",
         "opening_hours" : {
            "open_now" : true
         },
         "photos" : [
            {
               "height" : 1224,
               "html_attributions" : [ "Utilisateur Google" ],
               "photo_reference" : "CoQBfgAAAAecfnYhSZSQipHCYDPgsfLe8rkSAVmM6D6yQg7OKHviC_JvESqcgwFEQPITibnD-BrbNMQ5AvH81qJ99F5G6WmfWn3csIUOeXirwxUuqOUz7eWimBvEcPCaWVcL3E9NJCGQY3T12ElETuqZosJ2NV4igwxvNmmuqIzCOs7sRzpNEhDYfNl7hR5jKzdLoI0MW2WUGhTHmX-XTNrMJIJ0uATulmdpFGWg_Q",
               "width" : 1632
            }
         ],
         "rating" : 4.20,
         "reference" : "CnRlAAAA4XhqmCyMUjmvRIgn-Brf4uubjgcISREb1m7SR4HPlkYauFAKYTnbixBAKjbJE9gzZ7Sk_PaBT7qF5GWynfqIXv9_mgZqgQTVn6fA5Xy0QESzs2Q70o49T7G2E1wrrE4frK13o1_xx6iqxvPsYLSCjBIQX5NR5WgFPscjobiWYalyYxoUIy68fs-7HekAPhpmwRr2FraDi3c",
         "types" : [ "restaurant", "lodging", "food", "casino", "establishment" ],
         "vicinity" : "80 Pyrmont Street, Pyrmont"
      },
      {
         "geometry" : {
            "location" : {
               "lat" : -33.8656630,
               "lng" : 151.191280
            }
         },
         "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/bar-71.png",
         "id" : "78b3ab3969c71d9c4ca369a4c54e64291bc48013",
         "name" : "Sugaroom",
         "photos" : [
            {
               "height" : 459,
               "html_attributions" : [],
               "photo_reference" : "CnRjAAAAQTgc4gBnL5qnXSxQZHPwSklMTAhlIFOQVcAnRP54JhttkSnfYayzoXqEFVf1FgEcZDePXR_ak5VrX94WtuXCsAxFHTUjruEFS6t-KZ1pZkV0lMJr5ScrkyQKbkz_4RC5ndMdkV-zk_BEGxehXtf1TxIQk6d-sL5CE4jTCkFpy-xxLBoUGDRSr7-DByGfguvq66dIRl2u4sE",
               "width" : 612
            }
         ],
         "price_level" : 3,
         "rating" : 4.20,
         "reference" : "CnRmAAAAJRV1ZXqRygLrNNpVgXdLT6UVb9rtttnEJBzui5bc8154vk7b0cUleXuKOypo1t9Wf9rJGp8qzq2zEGg2ExCKbZKRz_Nw-PlTKd5TuzSFjkgucSKYwmtd0LsgAK1rmgrYsm167g4_gSjFiDUlKvkbkxIQpgOyN66atH_smg785i8ZlRoUApskjjgRN2EZP6_u6mvYUd7HA2U",
         "types" : [ "food", "bar", "establishment" ],
         "vicinity" : "2/1 Harris Street, Pyrmont"
      },
      {
         "geometry" : {
            "location" : {
               "lat" : -33.8698080,
               "lng" : 151.1971550
            }
         },
         "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/bar-71.png",
         "id" : "f08757f3d7c5d879297b3cb715b33f1fae63536b",
         "name" : "Oscars Lounge Bar and Restaurant",
         "opening_hours" : {
            "open_now" : false
         },
         "photos" : [
            {
               "height" : 640,
               "html_attributions" : [],
               "photo_reference" : "CpQBhgAAAFVwH5dzlEpvO1jsuTN6-I6bDc9Y3NUGbIOWpT7UjFJIVImCajv-kJYbObXXta1aR-eemuk4OgLA23rz5iNZcsqmWa9gt6tRoLmF5bO5ak4cgdQIUOJbf4LkxAKWYt5W1NGRMTqx_a6uf6SHQ0ftp-PuxneWKhpfddsMbvRE34pJnrgkJ8WftQf14V0jdQSSGRIQDODym-kvSkgFaTxEN-VRHxoUDohc30odzsSMhw3qcBEMrgfdP74",
               "width" : 427
            }
         ],
         "rating" : 3.50,
         "reference" : "CoQBfgAAALY2CvGQEQSrPlpvCQX_NMpuuwD7iy9tgqS3RT7cnssgodZ9_cenagjN7QKTlZO8_31AdwVSdvANIdceZsPI3YGhUyPO-NfeuE9-fIMHDVH5fy08OsDpVZXAIgeilwKx-Gbf6heZhte3Ec7OVJKh2jTZSvGEd_Q8TcYeaBRxp4hTEhCrqMLPES46AhV0pKw3_9xNGhREzvfuZepHG9rLEdy2HLUVwdK6YQ",
         "types" : [ "bar", "restaurant", "food", "establishment" ],
         "vicinity" : "84 Union Street, Pyrmont"
      }
   ],
   "status" : "OK"
} 
```

这是我的IOS代码：

```
- (IBAction)refreshTapped:(id)sender {

    // Charge le fichie JSON
    NSString *fileName = [[NSBundle mainBundle] pathForResource:@"map" ofType:@"json"];
    NSData *data = [NSData dataWithContentsOfFile:fileName];

    // Parse le fichier JSON
    NSError *error;
    NSDictionary *dico = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];
    NSArray *array = [dico valueForKeyPath:@"results"];

    if(error != nil)
    {
        NSLog(@"Erreur...");
    }else{
        NSLog(@"%@",array);
    }

    CLLocationCoordinate2D location;
    NSMutableArray *newAnnotations = [NSMutableArray array];
    MKPointAnnotation *newAnnonation;

    for (dico in array) {

        // Récupère longitude et latitude
        location.latitude = [dico[@"lat"] doubleValue];
        location.longitude = [dico[@"lng"] doubleValue];

        NSLog(@"Latitude: %f",[dico[@"lat"] doubleValue]);
        NSLog(@"Longitude: %f",[dico[@"lng"] doubleValue]);

        // Créer les annotations
        newAnnonation = [[MKPointAnnotation alloc] init];
        newAnnonation.title = dico[@"name"];
        newAnnonation.coordinate = location;

        // On ajoute l'objet au tableau
        [newAnnotations addObject:newAnnonation];  

    }

    // On ajoute les annotations à la vue
    [self._mapView addAnnotations:newAnnotations];

    // Ajouter la carte à la vue
    [self.view insertSubview:__mapView atIndex:0];

} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:48:20.440

那是因为`lat`and`lng`是数组中每个项目的子键：

```
 "geometry" : {
     "location" : {
          "lat" : -33.8698080,
          "lng" : 151.1971550
     }
   } 
```

因此，您必须检索完整路径：

```
location.latitude = [[dico valueForKeyPath:@"geometry.location.lat"] doubleValue];
location.longitude  = [[dico valueForKeyPath:@"geometry.location.lng"] doubleValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:57:30.790

```
NSArray *array = [dictionary valueForKeyPath:@"results"];

NSDictionary *subDict;
for (NSDictionary *dictionary in array) {
    subDict = dictionary[@"geometry"];
    subDict = subDict[@"location"];
    DLog(@"%@", subDict[@"lat"]);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:56:02.960

```
NSArray *array = [dico valueForKeyPath:@"results"];
for (NSDictionary *result in array)
{
    NSDictionary *geometry = result[@"geometry"];
    NSDictionary *location = geometry[@"location"];
    location.latitude = [dico[@"lat"] doubleValue];
    location.longitude = [dico[@"lng"] doubleValue];
} 
```

# c# - 显示条件确认消息然后继续的最佳做法是什么？

> ID：14813225
> 
> 赞同：0
> 
> 时间：2013-02-11T13:41:56.973
> 
> 标签：c#, javascript, asp.net-mvc

当用户提交表单时，我运行了业务逻辑。如;

```
.
.
.
//some process
if(model.UserName == "foo")
{
//some process
}
if(model.City != "Istanbul")
{
   //Alert user; Are you sure you want to continue bla bla bla...
  //Then user click if 'yes' some process else some process
} 
```

我想，将对象保留在会话中并显示 javascript 确认消息。如果用户单击“是”或“否”，我将创建隐藏输入匹配 viewModel 的属性并设置输入值用户的选择。然后自动提交表单。但我又想了想，这样不好。什么是最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:51:05.540

你对 javascript 的看法是完全正确的。JS 是此类场景的最佳实践。它会给你的页面增加一些吸引力。尽管您可以通过在触发事件时将“可见”属性设置为真/假来从 C# 本身执行此操作。

# jsf - 如何在 web.xml JSF 中分离会话超时值

> ID：14813227
> 
> 赞同：0
> 
> 时间：2013-02-11T13:42:07.353
> 
> 标签：jsf, timeout, web.xml

您好我尝试在 JSF 2.0 中分离超时会话值。

移动页面和网页中的持续时间必须不同。

在 web.xml 中只有一个 session-timeout 元素。我如何在移动页面和网页中区分这个值。

谢谢..

```
<filter>
    <filter-name>WebTimeoutFilter</filter-name>
    <filter-class>filters.webTimeoutFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>webTimeoutFilter</filter-name>
    <url-pattern>/web/*</url-pattern>
</filter-mapping>

<filter>
    <filter-name>MobileTimeoutFilter</filter-name>
    <filter-class>filters.MobileTimeoutFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>MobileTimeoutFilter</filter-name>
    <url-pattern>/Mobile/*</url-pattern>
</filter-mapping>

    <session-config>
        <session-timeout>10</session-timeout> --> ***this value***
    </session-config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:57:53.350

您必须使用[`HttpSession#setMaxInactiveInterval()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#setMaxInactiveInterval%28int%29). 您可以在 servlet 过滤器中执行此操作。

# servicestack - 如何在 ServiceStack.OrmLite 中查询复杂数据？

> ID：14813228
> 
> 赞同：1
> 
> 时间：2013-02-11T13:42:25.750
> 
> 标签：servicestack, ormlite-servicestack

我有以下课程：

```
class Device
{
    [AutoIncrement]
    public int Id { get; set; }
    public string Brand { get; set; }
    public string Name { get; set; }
    public string Price { get; set; }
    public DeviceType Type { get; set; }
    public Screen Display { get; set; }
}

enum DeviceType 
{ 
    Mobile, Tablet
};

class Screen
{
    public List<string> Options { get; set; }
} 
```

我可以这样做插入数据，

```
db.Insert(new Device { Name = "IPad2", Brand = "Apple", Price = "£450", Type = DeviceType.Tablet, Display = new Screen { Options = new List<string> { "opt1", "opt2", "opt3"} } }); 
```

并将显示数据添加到`Display`列中`{Options:[opt1,opt2,opt3]}`。现在我无法开始编写后续查询。

```
SELECT * FROM Device WHERE Display option "opt1" ; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:01:23.913

您想查询服务器端的任何内容都不应该被删除。解决方案是将它们从复杂类型中重构出来，并使它们成为一流的类/表。

# mysql - 由于 case 语句基于另一个表，如何更新表？（在 Mysql 中）

> ID：14813230
> 
> 赞同：2
> 
> 时间：2013-02-11T13:42:33.693
> 
> 标签：mysql, sql, join, sql-update

我有 2 张桌子：

TBL1

*   标准编号
*   ID
*   查看

TBL2

*   标准编号
*   告诉我

是`STDNum`公共列。在 TBL1 中，同一个 STDNum 可以有多个具有不同 ID 的行（在 TBL2 上不是这种情况）。*我想要的结果*是**更新`UpdateMe`TBL2 中的列**（*将其值设置为 1*）如果（*并且仅 IF*）该特定***STDNum***`Check` *的 TBL1 中的列***全部设置为 1 。**

 **有人可以帮我吗？或者有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:46:22.963

```
UPDATE  tbl2 b
        INNER JOIN
        (
            SELECT  STDNum
            FROM    tbl1 s
            GROUP   BY STDNum
            HAVING  MAX(s.check) = MIN(s.Check) AND
                    MAX(s.Check) = 1
        ) a ON a.STDNum = b.STDNum
SET     b.UpdateMe = 1 
```

或者

```
UPDATE  tbl2 b
        INNER JOIN
        (
            SELECT  STDNum
            FROM    tbl1
            GROUP   BY STDNum
            HAVING  SUM(Check = 1) = COUNT(*)
        ) a ON a.STDNum = b.STDNum
SET     b.UpdateMe = 1 
```**

# php - 具有正确纵横比的动态缩略图

> ID：14813231
> 
> 赞同：0
> 
> 时间：2013-02-11T13:42:40.187
> 
> 标签：php, image, thumbnails

我正在尝试为我的图像上传脚本创建缩略图，我成功了！但我有一个小问题。如果您熟悉它，我使用[pixlie创建缩略图。](https://github.com/SteffenHagdorn/Pixlie/)我试图获得相同的大小和效果，就好像我使用过的一样，`style="width:200px; height:auto;"` 我想保持缩略图的纵横比，但我还没有做到。

到目前为止我的代码是（我不确定我的“数学”）：

```
$img = imagecreatefromjpeg($uploaddir);
$width = imagesx($img); //get width and height of original image
$height = imagesy($img);
$maxwidth = '200';

//scaling
if ($height < $width) {
  $ratio = $height / $width;   
  $newheight = $ratio * $height;   
  $newwidth = $maxwidth;  
}
elseif ($height > $width) {
  $ratio = $height / $width;
  $newheight = $ratio * $maxwidth;
  $newwidth = $maxwidth;
}

require_once('Pixlie.php');

$pixlie = new Pixlie();
$pixlie->setCache(new PixlieFileCache('thumbnail_img/'));
$thumbnail = new PixlieRenderOptions();
$thumbnail->setWidth($newwidth);
$thumbnail->setHeight($newheight);
$image = $pixlie->render("$uploaddir", $thumbnail); 
```

如果你不熟悉[pixlie](https://github.com/SteffenHagdorn/Pixlie/)，可能很难帮助我。但也许你可以帮助我计算数学，或者你可能有比 pixlie 更好的东西.. idk。（一些拇指的大小调整得很好，但其他拇指变得真实了..长方形..？）

预先感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:00:51.053

嗯……你确定没有最大高度吗？要获得正确的纵横比，这应该没问题：

```
// Scaling
$newwidth = $maxwidth;
$ratio = $width / $height;
$newheight = $newwidth / ratio; 
```

所以宽度总是 200 和相应的高度。

# facebook - 2 月 6 日更改后无法登录 Facebook

> ID：14813238
> 
> 赞同：1
> 
> 时间：2013-02-11T13:43:00.270
> 
> 标签：facebook, windows-8

“2 月 6 日更改”后，我的应用无法登录 Facebook。我们在一周前启用了“2013 年 2 月重大变更”。但应用程序仍然无法正常工作。

我们使用 C# 和`WebAuthenticationBroker`OAUTH 连接。我尝试创建新的 FB 应用程序，但问题相同：“我们现在无法连接到您需要的服务。请检查您的网络连接或稍后再试一次”。

我注意到，如果我尝试在 webbrowser 中执行请求，我会重定向到[https://www.facebook.com/connect/login_success.html](https://www.facebook.com/connect/login_success.html)而无需输入任何私人数据。

重定向链接：[https ://www.facebook.com/connect/login_success.html#access_token=AAAEoZAxJSugQBAFSbqnZCmjqKVAw3oTMKaD1ZBq3RNAPNBEdyE0ntJILqjIcEmZA4H1zaPdj8C9RZA3XWKcv6xFtj9TdV4fVilKUMhDPCI0BUUtEf5650MvY&expires](https://www.facebook.com/connect/login_success.html#access_token=AAAEoZAxJSugQBAFSbqnZCmjqKVAw3oTMKaD1ZBq3RNAPNBEdyE0ntJILqjIcEmZA4H1zaPdj8C9RZA3XWKcv6xFtj9TdV4fVilKUMhDPCI0BUUtEf5MvY&expires_in=5650)

页面内容：

> 成功

也许是 uri 的格式发生了一些变化，因为 EndUri 是正确的。但是 WebAuthenticationBroker 无法解析 access_token。也许以前在 URI 中使用了符号“？” 代替 '＃' ？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:21:32.743

我不想更改您的解决方案，但您可能想要使用的是 Windows Azure 移动服务 Facebook 身份验证 API。这将为您处理所有混乱的 oauth，并且作为奖励，还为您提供 Google、Twitter 和 Windows Live 身份验证。它支持 C#（就像你一样），还支持 JavaScript、WinRT，甚至是 Objective C。根据你的使用方式，它是免费的。

观看：[http ://channel9.msdn.com/Series/Windows-Azure-Mobile-Services/Windows-Store-app-Getting-Started-with-Authentication-in-Windows-Azure-Mobile-Services](http://channel9.msdn.com/Series/Windows-Azure-Mobile-Services/Windows-Store-app-Getting-Started-with-Authentication-in-Windows-Azure-Mobile-Services)

阅读： http: [//www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-users-dotnet/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-users-dotnet/)

# php - GET 输入的基本 javascript 压缩

> ID：14813239
> 
> 赞同：1
> 
> 时间：2013-02-11T13:43:08.103
> 
> 标签：php, forms, input, get

我正在寻找一种简单的解决方案来减少我的 GET 输入代码的长度（在我的网站上）。

这些表单在 JavaScript 中处理，并使用一个函数使 URL 共享变得更简单。例如：具有不同名称的多个表单输入被转换为一个简单`settings=1,0,0,1`的并作​​为 GET 放置在 URL 中 - 然后此数据在 PHP 中被分解/内爆以使用/重用输入。

但是，考虑到表单的大小，它仍然会变得非常臃肿。我想在 JavaScript 中压缩相同的数据，然后在 PHP 中解压缩它，从而允许相当短的 URL 进行共享。

想想 TinyUrl。我做了一些*谷歌搜索*，但解决方案比我想要的更复杂 - 这不是隐藏数据的尝试，只是*让它更短*。

更新：我想要的一个更好的例子是将长 GET 输入（如：）转换`settings=1,1,1,1,1,1,1,1,1,1,1,1,1`为`settings=s8djh`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:47:23.843

您可以像这样创建自己的“短 URL”：从参数（例如 md5 哈希）创建唯一 id，并将 id-参数对存储在数据存储中。

您可以使用数据库、键值存储（如 BerkeleyDB）或存储两个值的 noSQL 数据库或纯文本文件。

如果 MD5 散列仍然太长，您有两个选择：1) 只需使用一个计数器，该计数器为您存储的每个参数字符串计数。但是请注意，可以通过简单的 URL 操作来访问每个参数组合。另一种选择是创建一个随机的 n 字符字符串（n 至少 >= 4），查看它是否存在于数据库中。如果不存在，则使用字符串作为 id。如果确实存在，请尝试使用 nerw 字符串 2-5 次，如果它们都存在，则将 n 提高 1。随着时间的推移，您将填满 4-char 命名空间，然后是 5-char 命名空间等。6-char 命名空间（使用大小写和数字）允许 62^6 组合 - 需要填满很多！

有关一些示例代码，请参阅这篇[介绍性文章](http://jeremygibbs.com/2012/01/16/how-to-make-a-url-shortener)。它使用以 base62 编码的 MD5 散列作为散列，使它们小于通常的 32 个十六进制字符长度。

编辑：如果您不想使用数据存储，也许[在 JavaScript 中使用像 LZW 这样的实际压缩算法](https://stackoverflow.com/a/294421/130121)可能会缩短相同参数的长行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:32:41.563

您也许可以使用某种固定的“方案”从 url 中删除冗余数据：

settings=1,0,0,1 可能变成：v=a&s=9

where a is the version of your scheme (if you need to change it in the future, and keep old url:s valid) and s are the values. If 1,0,0,1 represents booleans (1/0, true/false) then they can be stored in a single bit each. Wasting one character per bit is bad.. Pack them all in one bit, and send the result in hex: 4 bits per character.

This, however, makes everything more complicated when you need to change anything, this, however, depends on your scenario. But it's possible, and it's a really effective way of shortening the length of your url:s.

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-11T13:49:09.077

采用：

[http://phpjs.org/functions/base64_encode/](http://phpjs.org/functions/base64_encode/)

在 JS 中并通过内置的**base64_decode在 php 中对其进行解码**

# iphone - 如何自定义 EKEventEditViewController

> ID：14813240
> 
> 赞同：7
> 
> 时间：2013-02-11T13:43:22.977
> 
> 标签：iphone, ios, calendar, eventkit

我`EKEventEditViewController`在我的应用程序中使用默认值，我想对其进行自定义，目前它显示了默认值中的所有字段`EKEventEditViewController`，但我不想显示 URL 字段，也想添加时区字段。我可以这样做吗？如果可以，请告诉我该怎么做？ ![在此处输入图像描述](../Images/129eb32de44137e148874b49b8bd10f1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T03:27:01.203

你可以使用这个摘录：

1）使您的视图控制器成为您的 EKEventEditViewController 的代表

```
EKEventEditViewController *addController = [[EKEventEditViewController alloc] init];
addController.delegate = self; 
```

2）然后在您的视图控制器上实现它：

```
- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated {
    if ([viewController isKindOfClass:[UITableViewController class]]) {
        UITableView *tableView = ((UITableViewController *)viewController).tableView;

    for (NSInteger j = 0; j < [tableView numberOfSections]; ++j)
    {
        for (NSInteger i = 0; i < [tableView numberOfRowsInSection:j]; ++i)
        {
            UITableViewCell *cell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:j]];

            NSLog(@"cell => %@, row => %d, section => %d", cell.textLabel.text, i, j);

            if([cell.textLabel.text isEqualToString:@"Calendar"]) {
                [cell removeFromSuperview];
            } else if(j == 5) { // If URL Field
                [cell removeFromSuperview];
            }
        }
    }
} 
```

}

注意：我之前在另一个 Stackoverflow 答案中发现了这一点，并在我的项目中实现了它。我忘记了链接。希望这会有所帮助，并感谢我得到这个的原始答案。

# php - 模仿 MySQL 中的 array_intersect

> ID：14813246
> 
> 赞同：2
> 
> 时间：2013-02-11T13:43:34.203
> 
> 标签：php, mysql, arrays

我有一张这样的桌子：

```
Col1    Col2
word1   872
word1   333
word2   631
word3   982
word3   111
word4   111
word5   631
word6   333
word6   453 
```

我想接收多个 SELECT 的结果，但只接收所有结果中出现的结果。例如，如果我正在搜索`SELECT col2 FROM table WHERE col1='word1'`and `SELECT col2 FROM table WHERE col1='word6'`，我想将这两个语句连接在一起以生成一个 MySQL 语句，该语句将仅返回上述两个示例查询中出现的结果。（与 array_intersect 在 PHP 中的作用相同。）

我需要一个查询来对任意数量的 col1 单词执行此操作。

对不起，如果我没有很好地解释。很难解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:26:58.510

解决此问题的最佳方法是使用聚合：

```
select col2
from t
group by col2
having max(col1 = 'word1') = 1 and
       max(col1 = 'word2') = 1 
```

这很容易推广到更多的词。

# macos - 在沙盒 Mac OS x 应用程序中播放 Vimeo 视频？

> ID：14813247
> 
> 赞同：0
> 
> 时间：2013-02-11T13:43:37.143
> 
> 标签：macos, vimeo

至于现在我已经为一些视频教程的东西创建了一个 mac OS X 应用程序。这些文件被保存在 vimeo 中，我设计显示在 webview 中。一切正常，但由于 Apple 的 SandBoxing，我发现视频没有播放只是得到空白屏幕。有什么方法可以在 Sandboxed mac OS x 应用程序中播放 vimeo 视频..？

![沙盒选项](../Images/b3d89ba1d50d601f71e495c518d3788b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:12:28.330

Atlast 我想通了..实际上已经建立了连接，但是由于沙盒导致 Flash 插件被禁用，视频内容没有播放。感谢[Stack Overflow 问题](https://stackoverflow.com/questions/8281666/flash-videos-in-webview-not-working-in-sandboxed-app)。这真的帮助了我，最后我的应用程序在应用程序商店中.!!!!

# c++ - 如何将外部配置文件添加到 C++ 项目？

> ID：14813248
> 
> 赞同：-4
> 
> 时间：2013-02-11T13:43:37.317
> 
> 标签：c++, visual-studio, configuration-files

我使用 C++ 制作了一个类似 R 类型的游戏，在 Windows 上使用 Visual Studio 进行编码，我想知道是否可以将外部配置文件添加到我的项目中：在我的 main.cpp 中，我使用了很多我创建的方法在其他课程中为我的游戏做好一切准备。我有一组方法可以创建敌人的模式，另一种方法可以让我决定何时让它们移动和碰撞，等等......

目前我只有一个级别。现在我想要一个名为 istance level1 的配置文件，我可以在其中放置与我的关卡相关的所有内容，然后阅读其中的代码并继续我的主...

那么，有可能做这样的事情吗？如果是，我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:48:31.633

对的，这是可能的。您需要确切地确定帮助您定义关卡的数据。然后，您需要创建一种文件类型（可能使用预先存在的格式，如 XML 或 INI），将所有数据放入这些文件中。每个级别可以有一个文件，或者一个文件中有多个级别。此时，您可以在关卡开始时或在其他时间阅读它。

# modx-revolution - modx 多语言插件支持

> ID：14813249
> 
> 赞同：0
> 
> 时间：2013-02-11T13:43:41.260
> 
> 标签：modx-revolution

我是 MOdx 的新手。我需要在 modx 2.2.6 革命中提供多语言支持。

modx中是否有任何好的插件或有用的东西来支持多语言？任何建议都会对我有所帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:09:06.580

自从我看到这样的东西已经有一段时间了，但你可以使用 Babel 和服务器端的一些设置来做到这一点：[http ://rtfm.modx.com/display/revolution20/2012/04/15/MODX+Multilingual+ -+设置+up+Babel+and+have+a+网站+with+多种+语言](http://rtfm.modx.com/display/revolution20/2012/04/15/MODX+Multilingual+-+Setting+up+Babel+and+have+a+website+with+multiple+languages)

# vb.net - 查询嵌套视图模型列表

> ID：14813251
> 
> 赞同：0
> 
> 时间：2013-02-11T13:43:42.547
> 
> 标签：vb.net, linq, asp.net-mvc-4, viewmodel

我有以下嵌套视图模型：

```
Public Class ContentViewModel
    Public Property CONTENTID As Integer
    Public Property IMAGETOCONTENT() As IEnumerable(Of ImageToContentViewModel)
End Class

Public Class ImageToContentViewModel
    Public Property IMAGETOCONTENTID As Integer
    Public Property IMAGE As ImageViewModel
End Class

Public Class ImageViewModel
    Public Property IMAGEID As Integer
    Public Property TITLE As String
End Class 
```

我正在尝试查询嵌套的视图模型：

```
Function Test() As ContentViewModel
    Dim dataObject = (From a In db.CMS_CONTENT.OfType(Of CMS_EVENT)()
                 Where a.CONTENTID = contentId AndAlso a.DELETED = 0
                 Select New ContentViewModel With {
                     .CONTENTID = a.CONTENTID,                        
                     .IMAGETOCONTENT = (From b In db.CMS_IMAGES_TO_CONTENT
                      Where b.CONTENTID = a.CONTENTID
                      Select New ImageToContentViewModel With {
                          .IMAGETOCONTENTID = b.IMAGETOCONTENTID,
                          .IMAGE = (From c In db.CMS_IMAGES
                                    Where c.IMAGEID = b.IMAGEID And c.DELETED = False
                                    Select New ImageViewModel With {
                                        .IMAGEID = c.IMAGEID,
                                        .TITLE = c.TITLE
                                    })
                      })
                 })

    Return dataObject 
End Function 
```

我的问题是我无法返回填充的视图模型，因为我总是得到错误：

“System.Data.Objects.ObjectQuery`1[MvcApp.ContentViewModel]”类型的对象无法转换为“MvcApp.ContentViewModel”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:15:27.163

您的函数体创建一个`IQueryable`of `ContentViewModel`（实现为`System.Data.Objects.ObjectQuery`1[MvcApp.ContentViewModel]`），因为这就是`Select`返回的内容。

您应该使用`FirstOrDefault()`，或者将返回类型更改为`IQueryable`(of `ContentViewModel`)。

# php - 在关闭fancybox子iframe上，我想在父屏幕上更新我的文本框值而不重新加载父

> ID：14813253
> 
> 赞同：0
> 
> 时间：2013-02-11T13:43:50.233
> 
> 标签：php, javascript, jquery, html

我在第 1 页（父页面）中有一个表单，当用户按下单选按钮时，会出现 fancybox Iframe 页面（子页面），我在处理后得到一个值。

我想在关闭页面 2 后将该值传递给父页面 1 而不重新加载它，因为我不希望我的用户重新输入表单值，但我只想以任何格式显示该值，它可能是在 div 中打印的文本框或消息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:55:03.157

我相信您想要做的是将数据从子 iframe 传递给父级。您可以参考这篇文章：[http](http://www.roseindia.net/java/pass-value-example/pass-value-from-iframe-parent.shtml) ://www.roseindia.net/java/pass-value-example/pass-value-from-iframe-parent.shtml 。希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:48:03.080

使用事件处理`onClosed`程序见[http://fancybox.net/api](http://fancybox.net/api)

```
$("a#fancybox").fancybox({
  'onClosed': function (){
     /* Whatever you want to do */
  },
}); 
```

# jbutton - 如何更改 JButton 中的文本

> ID：14813254
> 
> 赞同：1
> 
> 时间：2013-02-11T13:43:58.027
> 
> 标签：jbutton

单击时是否可以更改 JButton 的文本？我有一个 JButton，文本是一个数字，我想要发生的是当用户单击它时，按钮中的文本会增加。那可能吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:47:04.577

`getSource()`您可以通过 的方法访问单击的按钮`ActionEvent`。因此，您可以随心所欲地操作按钮。

尝试这个：

```
@Override  
public void actionPerformed(ActionEvent e) {  
    JButton clickedButton = (JButton) e.getSource();
    clickedButton.setText("Anything you want"); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T02:48:58.563

这是我创建的解决方案。

```
public int number  = 1;
public Test() {
    final JButton test = new JButton(Integer.toString(number));
    test.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            number += 1; //add the increment
            test.setText(Integer.toString(number));
        }
    });
} 
```

首先，创建一个整数。然后，使用转换为字符串的整数值创建 JButton，因为 JButton 的文本只能是字符串。接下来，使用内部类为按钮创建一个动作监听器。按下按钮时，将执行以下代码，该代码增加整数的值并将按钮的文本设置为整数转换为字符串的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:51:16.373

另一种方法：

```
JButton button = new JButton("1");
button.addActionListener(new ActionListener() {
  public void actionPerformed(ActionEvent e) {
    int count = Integer.parseInt(button.getLabel());
    button.setLabel((String)count);
  }
}); 
```

# javascript - 读取本地文件内容并使用 Javascript 将其发送到服务器

> ID：14813256
> 
> 赞同：0
> 
> 时间：2013-02-11T13:44:15.597
> 
> 标签：javascript, ajax, xmlhttprequest, local-storage

我正在为我的虚拟课堂编写一个非常简单的电子学习应用程序。如果有一种方法可以使用在后台运行的 Javascript 来读取位于用户计算机上的文件的内容并将其内容发送到我的服务器，我会徘徊。任何人都知道这样做的Javascript的开源代码吗？我认为这可以使用 XMLHttpRequest（即 AJAX）来完成，但我无法通过。任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:12:10.423

您无法访问浏览器中的本地文件，因为您在**沙箱**中，但是有一些适用于 Html 5 的文件 API，您可以通过编程方式选择它们并访问它们的数据，只需查看以下链接

[文件 API](http://www.w3.org/TR/FileAPI/#introduction)

> Web 应用程序应该能够操作尽可能广泛的用户输入，包括用户可能希望上传到远程服务器或在富 Web 应用程序中操作的文件。该规范定义了文件、文件列表、访问文件引发的错误以及读取文件的编程方式的基本表示。此外，该规范还定义了一个表示“原始数据”的接口，该接口可以在符合标准的用户代理的主线程上进行异步处理。本规范中定义的接口和 API 可以与暴露给 Web 平台的其他接口和 API 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:49:10.053

不幸的是，没有办法让 JavaScript 访问用户的本地文件。有一个非常严重的安全问题。

然而，在 IE 浏览器上有 API（当您尝试访问文件时会发出很好的警告）

我建议要求用户上传他自己的文件（使用`<input type="file" />`）并将其上传到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:54:46.993

HTML5 规范指定了一个 API 来访问本地文件系统。最新版本的 Chrome 支持它。有关详细信息，请参见此处[http://net.tutsplus.com/tutorials/html-css-techniques/toying-with-the-html5-filesystem-api/](http://net.tutsplus.com/tutorials/html-css-techniques/toying-with-the-html5-filesystem-api/)。

如果环境是受控的（即在教室或 Intranet 中），您可以使用此 API 构建您的应用程序。

# mysql - csv文件插入mysql数据库，这是经常出现的记录

> ID：14813267
> 
> 赞同：0
> 
> 时间：2013-02-11T13:45:14.883
> 
> 标签：mysql, csv, upload, insert, repeat

# 问题

我有一个这样的 csv 文件：

```
char num  
aaa,123  
bbb,123  
bbb,123  
bbb,123  
ccc,123 
```

我只想将最常出现的
csv文件记录插入mysql数据库->这是[bbb，123]

所以我希望数据库是这样的：
（key：num）

```
char num  
bbb,123 
```

有没有办法做到这一点？

# 我试过这样

我有这样的尝试：

ALTER IGNORE TABLE table
ADD PRIMARY KEY (char,num);
但结果是

```
char num  
aaa,123 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T20:18:33.977

此查询将从 CSV 加载的表中返回指定的结果集：

```
SELECT c.char, c.num
  FROM loadtable c
 GROUP BY c.char, c.num
 ORDER BY COUNT(1) DESC
 LIMIT 1 
```

将查询返回的单行放入另一个表中，例如

```
INSERT INTO another_table (char,num)
SELECT c.char, c.num
  FROM loadtable c
 GROUP BY c.char, c.num
 ORDER BY COUNT(1) DESC
 LIMIT 1 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T14:07:25.863

此时您的数据库中是否已有 csv 文件？我从你的尝试中假设是这样，所以你可以尝试这样的事情：

```
SELECT char, num, MAX(count_column)
FROM
    (SELECT char, num, count(*) as count_column
    FROM table
    GROUP by 1, 2;) 
```

# xml - 无法生成临时类（结果=1）。错误 CS0030：无法转换类型

> ID：14813268
> 
> 赞同：3
> 
> 时间：2013-02-11T13:45:16.130
> 
> 标签：xml, class, xml-deserialization, xsd.exe

[与这篇文章](https://stackoverflow.com/questions/6678934/unable-to-generate-a-temporary-class-result-1-error-cs0030-cannot-convert-ty)中的症状相同

基本症状是，当我使用 xsd.exe 从我的 XML 创建 C# 类时，当我尝试反序列化它时，我收到此错误（它编译，但在运行时产生错误）。

> 无法生成临时类（结果=1）。错误 CS0030：无法将类型“ProductEnvironmentServerRolesServerRole[]”转换为“ProductEnvironmentServerRolesServerRole”

原文（来自（xsd.exe）产生的.cs：

```
[System.Xml.Serialization.XmlArrayAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
[System.Xml.Serialization.XmlArrayItemAttribute("ServerRole", typeof(ProductEnvironmentServerRolesServerRole), Form=System.Xml.Schema.XmlSchemaForm.Unqualified, IsNullable=false)]
public ProductEnvironmentServerRolesServerRole[][] ServerRoles
{
    get { return this.serverRolesField; }
    set { this.serverRolesField = value; }
} 
```

但是根据 Ajax 的建议，我将以下行从：

```
public ProductEnvironmentServerRolesServerRole[][] ServerRoles { 
```

至：

```
public ProductEnvironmentServerRolesServerRole[] ServerRoles { 
```

这会导致以下编译错误：

> **错误** 1 ​​无法将类型 'ProductEnvironmentServerRolesServerRole[][]' 隐式转换为 'ProductEnvironmentServerRolesServerRole[]' d:\Users...\Documents\Visual Studio 2012\Projects\ReadingXMLDummy\ReadingXMLDummy\ProductEnvironment.cs 40 20 ReadingXMLDummy
> **错误 2**无法隐式转换类型 'ProductEnvironmentServerRolesServerRole[]' 到 'ProductEnvironmentServerRolesServerRole[][]' d:\Users...\Documents\Visual Studio 2012\Projects\ReadingXMLDummy\ReadingXMLDummy\ProductEnvironment.cs 43 37 ReadingXMLDummy

两者都是对方的倒数。我很困惑，迫切需要帮助:-) 在此先感谢

PasteBin：[Program.cs](http://pastebin.com/43BEywm0) PasteBin：[ProductEnvironment.cs](http://pastebin.com/zdrQLC7K)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-02T06:20:07.817

这里的问题不是为属性生成类型，而是为属性输入属性：

```
[System.Xml.Serialization.XmlArrayItemAttribute("ServerRole", typeof(ProductEnvironmentServerRolesServerRole), Form=System.Xml.Schema.XmlSchemaForm.Unqualified, IsNullable=false)] 
```

应该改为

```
[System.Xml.Serialization.XmlArrayItemAttribute("ServerRole", typeof(ProductEnvironmentServerRolesServerRole[]), Form=System.Xml.Schema.XmlSchemaForm.Unqualified, IsNullable=false)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:17:24.970

属性及其支持字段都需要更改。在你的`ProductEnvironment.cs`你也应该改变这一行：

```
private ProductEnvironmentServerRolesServerRole[][] serverRolesField; 
```

阅读这个：

```
private ProductEnvironmentServerRolesServerRole[] serverRolesField; 
```

错误消息是相反的，因为该属性`get`试图将您的字段（锯齿状数组）作为单维数组返回，而该属性试图`set`将单维数组分配给（锯齿状数组）字段。（第 40 行是 get，第 43 行是 set。）

您可能也希望将相同的方法应用于您的`Servers`财产。

我不确定是什么会导致 XSD.exe 首先生成如此可怕的代码，但......

# compiler-construction - min sdk > target sdk > target compiler 在创建android应用程序中的区别

> ID：14813277
> 
> 赞同：0
> 
> 时间：2013-02-11T13:45:42.107
> 
> 标签：compiler-construction, sdk, kernel

`min sdk > target sdk >`1st：和`target sdk`编译器在创建android应用程序和比较编译器合规级别有什么区别？

第二：是否针对 sdk ex。`4.0.3 (Ice Cream Sandwich)`4.2 与我用于开发的android设备有关吗？

第三：使用下面使用android 4.2创建的代码作为新项目。我收到了 permgen 空间的通知。我有512M ..为什么？

这是代码

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    credential = GoogleAccountCredential.usingOAuth2(this, DriveScopes.DRIVE);
    startActivityForResult(credential.newChooseAccountIntent(), REQUEST_ACCOUNT_PICKER);
  }

  @Override
  protected void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
    switch (requestCode) {
    case REQUEST_ACCOUNT_PICKER:
      if (resultCode == RESULT_OK && data != null && data.getExtras() != null) {
        String accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
        if (accountName != null) {
          credential.setSelectedAccountName(accountName);
          service = getDriveService(credential);
          startCameraIntent();
        }
      }
      break;
    case REQUEST_AUTHORIZATION:
      if (resultCode == Activity.RESULT_OK) {
        saveFileToDrive();
      } else {
        startActivityForResult(credential.newChooseAccountIntent(), REQUEST_ACCOUNT_PICKER);
      }
      break;
    case CAPTURE_IMAGE:
      if (resultCode == Activity.RESULT_OK) {
        saveFileToDrive();
      }
    }
  }

  private void startCameraIntent() {
    String mediaStorageDir = Environment.getExternalStoragePublicDirectory(
        Environment.DIRECTORY_PICTURES).getPath();
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss", Locale.US).format(new Date());
    fileUri = Uri.fromFile(new java.io.File(mediaStorageDir + java.io.File.separator + "IMG_"
        + timeStamp + ".jpg"));

    Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);
    startActivityForResult(cameraIntent, CAPTURE_IMAGE);
  }

  private void saveFileToDrive() {
    Thread t = new Thread(new Runnable() {
      @Override
      public void run() {
        try {
          // File's binary content
          java.io.File fileContent = new java.io.File(fileUri.getPath());
          FileContent mediaContent = new FileContent("image/jpeg", fileContent);

          // File's metadata.
          File body = new File();
          body.setTitle(fileContent.getName());
          body.setMimeType("image/jpeg");

          File file = service.files().insert(body, mediaContent).execute();
          if (file != null) {
            showToast("Photo uploaded: " + file.getTitle());
            startCameraIntent();
          }
        } catch (UserRecoverableAuthIOException e) {
          startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
        } catch (IOException e) {
          e.printStackTrace();
        }
      }
    });
    t.start();
  }

  private Drive getDriveService(GoogleAccountCredential credential) {
    return new Drive.Builder(AndroidHttp.newCompatibleTransport(), new GsonFactory(), credential)
        .build();
  }

  public void showToast(final String toast) {
    runOnUiThread(new Runnable() {
      @Override
      public void run() {
        Toast.makeText(getApplicationContext(), toast, Toast.LENGTH_SHORT).show();
      }
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:34:01.083

与 API 级别相关的问题部分在 Android 文档的 API 指南中得到了相当全面的介绍：http: [//developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

我不明白您在问题的第三部分中要问什么，无论如何它可能应该作为一个单独的问题发布。

# canvas - 如何在easeljs中更改位图宽度和高度？

> ID：14813279
> 
> 赞同：4
> 
> 时间：2013-02-11T13:45:52.637
> 
> 标签：canvas, bitmap, height, width, easeljs

我正在使用 easeljs 创建 HTML5 页面。我必须在画布中加载图像。如何更改我正在加载的位图的宽度和高度。

```
var img = new Image();  
img.src = image_path+images; // image from folder        
var loading_img = new createjs.Bitmap(img);  
stage.addChild(loading_img); 
```

它只是在画布中显示图像，我尝试使用

```
loading_img.sourceRect = { x:img.width/2, y:img.height/2, width:280, height:150 }; 
```

但它裁剪图像（280 * 150）。

谢谢， 沙迪亚

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T15:46:56.140

您可以调整 scaleX 和 scaleY，而不是调整宽度和高度。要将图像的大小加倍，您可以这样做：

```
loading_img.scaleX=2.0;
loading_img.scaleY=2.0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-29T14:24:29.303

您必须首先加载图像（这样您就可以知道它的高度和宽度），然后创建位图并设置比例。

```
var image = new Image();
image.onload = function(){
    var bitmap = new createjs.Bitmap(image);
    bitmap.scaleX = YOUR_WIDTH/image.width;
    bitmap.scaleY = YOUR_HEIGHT/image.height;
    this.stage.addChild(bitmap);
};
image.src = 'thePathToYourImage.png'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:04:26.230

这对我有用

```
img[h] = new Image();
img[h].src = //image path
r_mc[h] = new createjs.Bitmap(img[h]);
r_mc[h].y = 15;
r_mc[h].x = 10
r_mc[h].scaleX=280/r_mc[h].image.width;  //200
r_mc[h].scaleY=140/r_mc[h].image.height; //100
stage.addChild(r_mc[h]); 
```

如果 r_mc[h].image.width 和 r_mc[h].image.height 没有影响您的图像大小意味着尝试在此之前获取图像大小并像这样设置

```
r_mc[h].scaleX=280/200;
r_mc[h].scaleY=140/100; 
```

谢谢，
沙迪亚

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-11T10:23:02.387

是的，scaleX/Y 函数非常适合调整图像大小。

奥尔阿塔

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-12T12:21:24.180

我通常这样做：

```
var bitmap = new createjs.Bitmap(image object);
bitmap.scaleX = (your width number value) / bitmap.image.width;    
bitmap.scaleY = (your height number value) / bitmap.image.height;
stage.addChild(bitmap); 
```

# python - 使用 numpy/scikit 函数保持 pandas 结构

> ID：14813289
> 
> 赞同：13
> 
> 时间：2013-02-11T13:46:22.263
> 
> 标签：python, pandas, numpy, scikit-learn

我正在使用`read_csv()`pandas 的出色功能，它提供：

```
In [31]: data = pandas.read_csv("lala.csv", delimiter=",")

In [32]: data
Out[32]: 
<class 'pandas.core.frame.DataFrame'>
Int64Index: 12083 entries, 0 to 12082
Columns: 569 entries, REGIONC to SCALEKER
dtypes: float64(51), int64(518) 
```

但是当我应用 scikit-learn 中的函数时，我会丢失有关列的信息：

```
from sklearn import preprocessing
preprocessing.scale(data) 
```

给出 numpy 数组。

有没有办法将 scikit 或 numpy 函数应用于 DataFrames 而不会丢失信息？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-11T14:37:44.550

This can be done by wrapping the returned data in a dataframe, with `index` and `columns` information in.

```
import pandas as pd
pd.DataFrame(preprocessing.scale(data), index = data.index, columns = data.columns) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-11T14:11:00.817

一种（有点天真）的方法是分别存储数据框的结构，即它的列和索引，然后从您的预处理结果创建一个新的数据框，如下所示：

```
In [15]: data = np.zeros((2,2))

In [16]: data
Out[16]: 
array([[ 0.,  0.],
       [ 0.,  0.]])

In [17]: from pandas import DataFrame

In [21]: df  = DataFrame(data, index = ['first', 'second'], columns=['c1','c2'])

In [22]: df
Out[22]: 
        c1  c2
first    0   0
second   0   0

In [26]: i = df.index

In [27]: c = df.columns

# generate new data as a numpy array    
In [29]: df  = DataFrame(np.random.rand(2,2), index=i, columns=c)

In [30]: df
Out[30]: 
              c1        c2
first   0.821354  0.936703
second  0.138376  0.482180 
```

正如您在 中看到的`Out[22]`，我们从一个数据框开始，然后在`In[29]`该框内放置一些新数据，行和列保持不变。我假设您的预处理将`not`打乱数据的行/列。

# php - 使用 MySQL 获取随机文本，单击按钮且不刷新

> ID：14813290
> 
> 赞同：-5
> 
> 时间：2013-02-11T13:46:23.900
> 
> 标签：php, mysql, text, random

我想从我的数据库中获取随机添加的文本。要获取新的随机文本，我不会刷新页面，但我希望能够单击前进按钮。

我有谁知道我该如何解决？

我想在同一页面上随机化三个不同的东西。

如果有人对此有与 PHP 和 MySQL 不同的解决方案，欢迎分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:57:49.183

我想你在这里表达你的问题有些困难，但标题暗示我你需要某种客户端随机数生成，不是吗？

尝试这个：

```
<input type="button" value="Random Number between 1 and 100" onclick="alert(Math.floor(Math.random() * 100) + 1);" /> 
```

编辑：好的，您编辑了您的请求，现在很明显您希望从数据库中获取它，以前不是！您应该真正解释一下如何生成数字，而您正在寻找的可能是 AJAX 请求，只是猜测。

# spring - 使用 SPRING + 简单 HTML 页面的 GWT 登录

> ID：14813291
> 
> 赞同：0
> 
> 时间：2013-02-11T13:46:25.933
> 
> 标签：spring, gwt, login

我的名字是 Lukas，我有一个登录问题。我正在使用 GWT + Spring 并且我想进行身份验证。我在谷歌上找到了很多例子，但两种情况都不像我的。

我有 Login.html 包含 HTML 表单，输入蚂蚁他们的名字（j_username，j_password）。我将 Login.gwt.xml 文件重命名为“login”（Login.html 也包含`<script type="text/javascript" src="login/login.nocache.js" ></script>`）。我的项目还包含 SecondModule.html 文件 + SecondModule.gwt.xml（重命名为“myModule”）。第二个模块负责业务逻辑。

我的问题是我不知道如何在 Login.html 的 HTML 表单元素中指定 URL 参数。我试过 /login/j_security_check、/j_security_check、/myModule/j_security_check 但我总是得到错误代码 404。我也不知道该 URL 在开发模式或托管模式下是否不同。

有谁能够帮我？

问候卢卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:07:47.907

在春天你应该使用

```
/j_spring_security_check 
```

# git - 为什么git创建空目录：build

> ID：14813292
> 
> 赞同：1
> 
> 时间：2013-02-11T13:46:32.560
> 
> 标签：git, svn, git-svn

为什么 git 创建空目录：build.

我正在使用以下命令克隆一个 SVN 存储库

```
git svn clone -s http://svn/java/project project 
```

我看到 git 创建了一个我在 SVN 中看不到的空目录，我一直在删除它，但每次我做

```
git svn rebase 
```

它回来了..有人可以告诉我为什么以及如何阻止它

# asp.net - 从不同的网页操作母版页中的 ASP.Net TreeView

> ID：14813294
> 
> 赞同：0
> 
> 时间：2013-02-11T13:46:34.680
> 
> 标签：asp.net, treeview, code-behind, protected

我们想从不同的网页操作母版页中的 ASP.Net TreeView。

此编码来自母版页 Web 表单代码隐藏文件。我们想在另一个网页的代码隐藏文件的 Page_Load 事件中复制此编码。当我尝试在其他网络表单中使用此编码时，

```
objTreeView = Knowledge_Academy1.loginView.FindControl("TreeViewMain") 
```

我们收到一个错误，指出 loginView 受保护。我们如何取消保护它以便我可以复制相同的编码？

这是主 Web 表单代码隐藏文件中的工作编码：

```
Public Class Knowledge_Academy1
    Inherits System.Web.UI.MasterPage

Protected Sub TreeViewMain_TreeNodeExpanded(sender As Object, e As TreeNodeEventArgs)

    Dim objTreeView As TreeView
    objTreeView = loginView.FindControl("TreeViewMain")

    Select Case e.Node.Text

        Case "Maintenance"

            ' Make sure all nodes except for Maintenance are collapsed.
            '----------------------------------------------------------
            For Each treenode As TreeNode In objTreeView.Nodes
                If treenode.Text = "Parents" Or
                    treenode.Text = "Students" Or
                    treenode.Text = "Financial" Then

                    treenode.Collapse()
                End If
            Next treenode

        Case "Students"

            ' Make sure all nodes except for Students are collapsed.
            '-------------------------------------------------------
            For Each treenode As TreeNode In objTreeView.Nodes
                If treenode.Text = "Parents" Or
                    treenode.Text = "Maintenance" Or
                    treenode.Text = "Financial" Then

                    treenode.Collapse()
                End If
            Next treenode

        Case "Parents"

            ' Make sure all nodes except for Parents are collapsed.
            '------------------------------------------------------
            For Each treenode As TreeNode In objTreeView.Nodes
                If treenode.Text = "Students" Or
                    treenode.Text = "Maintenance" Or
                    treenode.Text = "Financial" Then

                    treenode.Collapse()
                End If
            Next treenode

        Case "Financial"

            ' Make sure all nodes except for Financial are collapsed.
            '--------------------------------------------------------
            For Each treenode As TreeNode In objTreeView.Nodes
                If treenode.Text = "Parents" Or
                    treenode.Text = "Maintenance" Or
                    treenode.Text = "Students" Then

                    treenode.Collapse()
                End If
            Next treenode
        Case Else

    End Select
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:13:48.073

我建议看看这篇 MSDN 文章： http: [//msdn.microsoft.com/en-us/library/xxwa0ff0 (VS.80).aspx](http://msdn.microsoft.com/en-us/library/xxwa0ff0(VS.80).aspx)

例如：

```
Dim mpTreeview As Treeview

mpTreeview = CType(Master.FindControl("TreeViewMain"), Treeview) 
```

# php - php中的try/catch总是工作正常吗？

> ID：14813295
> 
> 赞同：0
> 
> 时间：2013-02-11T13:46:41.543
> 
> 标签：php, mongodb

我尝试按如下方式处理异常并编写代码，但是当文档成功保存在我的数据库中时，我也会遇到异常。

```
$table = "MyRequestTable";
$smsID = new MongoId();
$data = array("_id" => $smsID,
            "requestUserid" => 2500,
            "requestDate" => new MongoDate(strtotime(date('Y-m-d H:i:s'))),
            "requestNosSms" => 1
        );
try
{
     $result = $table->insert($data, array("safe" => TRUE)); 
     echo $smsID ;
}
catch (Exception $e) 
{
    echo $e->getMessage();
} 
```

我收到以下异常“指定的修饰符无效：$push”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:49:07.920

即使`INSERT`命令执行正确，也可能是某些其他指令引发异常的情况。你确定代码的其他部分是正确的吗？

# jsf - 调用一个 Javascript 函数，点击一个（隐藏的）按钮或链接

> ID：14813303
> 
> 赞同：3
> 
> 时间：2013-02-11T13:47:18.693
> 
> 标签：jsf, primefaces

我调用了一个javascript函数，该函数单击隐藏的commandButton，但单击在页面加载时运行，而不是在我调用该函数时运行。这是html代码：

```
<p:inputText id="aa" value="#{bonBonneManagedBean.sel}" onkeyup="fnc()" />
<h:commandButton id="hh" onclick="#{bonBonneManagedBean.kk()}" style="display:none"/> 
```

和 javaScript 函数：

```
function fnc()
{
    length = document.getElementById('form:aa').value.length;
    if(length == 10)
    {
        $("#hh").click();
        document.getElementById('form:aa').value = "";
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T13:51:01.813

您应该使用该`action`属性而不是`onclick`这样

```
<h:commandButton id="hh" action="#{bonBonneManagedBean.kk()}" style="display:none"/> 
```

请注意，您可能必须向选择器添加表单前缀，如下所示

```
$("#myFormId\\:hh").click(); 
```

这同样适用于一个`commandLink`或任何其他“可点击”组件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T14:47:03.700

此页面上必须有一个按钮（我怀疑，因为您无论如何都在隐藏它）？使用类似`<p:remoteCommand/>`这里的东西会更好地为您服务

放弃隐藏按钮并替换为

```
<p:remoteCommand name="fnc" actionListener="#{bonBonneManagedBean.kk}"/> 
```

**但是**，如果这是绝对要求，您可以使用`click()`您需要的函数中的方法非常轻松地模拟 js 中的按钮单击

1.  将 更改`<h:commandButton/>`为 a`<p:commandButton/>`以便您可以为按钮分配一个`widgetVar`属性（以保证 DOM 中元素的名称）。`widgtetVar`几乎所有 primefaces 组件都可以设置该属性，让您的生活更轻松

2.  使用`widgetVar`，只需调用`click()`函数中的方法

    ```
    <p:commandButton ajax="false" widgetVar="theButton" id="hh" action="#{bonBonneManagedBean.kk()}" style="display:none"/>
    <p:inputText id="aa" widgetVar="theTextBox" value="#{bonBonneManagedBean.sel}" onkeyup="fnc()" /> 
    ```

    并在函数中：

    ```
     function fnc(){
         length = theTextBox.value.length;
         if(length == 10){
           theButton.click()
            theTextBox.value = "";
               }
             } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-12T17:09:15.517

如果 Daniel 和 Kolossus 的最佳答案对某人没有帮助：我发现字符被放在了我在案例中设置的 id 前面，因此这对我有帮助：

```
$('[id$=hh]').click(); 
```

Basically the selector is saying the id ends with 'hh' but may not be the full id.
This is also helpful in SF development as the same thing happens with comandButtons, etc.

# hadoop - Mahout 推荐引擎：走向分布式

> ID：14813304
> 
> 赞同：1
> 
> 时间：2013-02-11T13:47:19.717
> 
> 标签：hadoop, distributed, mahout

有谁知道我可以如何转换[Mahout in Action](http://manning.com/owen/)书中关于推荐引擎的代码，使其与 Ηadoop 完全分布式环境一致？我的主要困难是转换我的代码（当前从本地磁盘读取和写入），使其在伪分布式环境（如 Cloudera）中运行。我的问题的解决方案是像[这个](http://fahlke.org/blog/?p=46)一样简单，还是我应该期待比这更复杂的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:15:51.320

真正的分布式计算与非分布式计算完全不同，即使计算相同的结果也是如此。结构不一样，它使用的基础设施也不一样。

如果您只是询问伪分布式解决方案如何处理本地文件：您将忽略 Hadoop 输入/输出机制并编写一个`Mapper`从 HDFS 上某处读取您的输入并复制到本地磁盘的程序。

如果您问的是如何实际分配计算，那么您将不得不切换到使用项目中的（完全不同的）分布式实现。这些实际上使用 Hadoop 来拆分计算。上面的过程是一个 hack，它只在 Hadoop 容器中运行许多非分布式任务。然而，这些实现是完全离线的。

如果你的意思是你想要一个像 Mahout 包一样的实时推荐`.cf.taste`器，但又想实际使用 Hadoop 的分布式计算能力，那么你需要的不仅仅是 Mahout。Mahout 中的一个或另一个；有代码可以执行其中一项，但它们不相关。

顺便说一句，这正是[Myrrix](http://myrrix.com)。我不介意在这里做广告，因为它听起来正是您可能正在寻找的东西。这是我在此 Mahout 代码中开始的工作的演变。除此之外，它是一个 2 层架构，具有 Taste 的实时元素，但也可以透明地将计算卸载到 Hadoop 集群。

# javascript - Javascript 图像滑块在 Chrome 中无法正常工作。图像堆叠。如何解决？

> ID：14813306
> 
> 赞同：0
> 
> 时间：2013-02-11T13:47:41.833
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3.2

在我客户的网站（[http://slnyaadev45.herokuapp.com/](http://slnyaadev45.herokuapp.com/)）中，我在顶部使用了一个 JS 滑块。它将在整个站点中连续移动图像。在 Firefox 中，它可以完美运行。但在谷歌浏览器中，它没有。有时它可以工作，但如果我重新加载页面，它就会停止工作。有时，它开始起作用。然后，如果我只是单击指向另一个页面的链接，它仍然可以工作。但如果我重新加载，它会再次中断。Android的默认浏览器也存在问题。出了什么问题？如何解决？

PS：该站点是使用 Rails 3.2 构建的。

的JavaScript：

```
$(function(){
    var scroller = $('#scroller div.innerScrollArea');
    var scrollerContent = scroller.children('ul');
    scrollerContent.children().clone().appendTo(scrollerContent);
    var curX = 0;
    scrollerContent.children().each(function(){
    var $this = $(this);
    $this.css('left', curX);
    curX += $this.width();
    });
    var fullW = curX / 2;
    var viewportW = scroller.width();

    // Scrolling speed management
    var controller = {curSpeed:0, fullSpeed:1};
    var $controller = $(controller);
    var tweenToNewSpeed = function(newSpeed, duration)
    {
    if (duration === undefined)
        duration = 600;
    $controller.stop(true).animate({curSpeed:newSpeed}, duration);
    };

    // Pause on hover
    scroller.hover(function(){
    tweenToNewSpeed(0);
    }, function(){
    tweenToNewSpeed(controller.fullSpeed);
    });

    // Scrolling management; start the automatical scrolling
    var doScroll = function()
    {
    var curX = scroller.scrollLeft();
    var newX = curX + controller.curSpeed;
    if (newX > fullW*2 - viewportW)
        newX -= fullW;
    scroller.scrollLeft(newX);
    };
    setInterval(doScroll, 20);
    tweenToNewSpeed(controller.fullSpeed);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:53:19.800

因为元素之间的距离是 4px，所以设置每个元素的 ''left'' 等于之前元素的宽度总和

或者

您可以删除`position:absolute`的样式`li`，并添加`float:left`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:14:50.170

因为我所有的图像都具有相同的大小，所以我在脚本的这一行中添加了宽度：

```
curX += $this.width(); 
```

作为 ：

```
curX += 224; 
```

# c# - 在遵守页面生命周期的同时以编程方式呈现控件（使用 LoadControl）

> ID：14813311
> 
> 赞同：0
> 
> 时间：2013-02-11T13:47:56.040
> 
> 标签：c#, asp.net, events, webforms, loadcontrol

我正在尝试使用`LoadControl`代码中的自定义控件来进行编程渲染。但是我注意到`OnInit`我的自定义控件的方法没有被调用。**我在这里错过了一个重要的步骤吗？**

```
//Loading the control
Page h = HttpContext.Current.Handler as Page;

UserControl userControl = (UserControl)h.LoadControl(pathToControl);
h.Controls.Add((Control)userControl);

//Rendering the control
StringWriter stringWriter = new StringWriter();
HtmlTextWriter writer = new HtmlTextWriter((TextWriter) stringWriter);
userControl.RenderControl(writer);
var result = stringWriter.ToString(); 
```

*这是调用上面代码的地方*

```
[ScriptService]
public partial class Ajax : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public static object AjaxMethod(string productCode) {
        //here...
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:21:05.393

因此，您正在对服务器进行 PageMethods 调用，并希望将标记流回以进行自定义控件更新，这就是它的样子。PageMethods 不执行生命周期，因此它永远不会触发 OnInit 事件处理程序。人们使用 JQuery 或 HTTP 处理程序使用了相同的技术，这里有一些他们如何做到的示例：

*   [我们如何使用通用处理程序加载用户控件？](https://stackoverflow.com/questions/5499753/how-can-we-load-usercontrol-using-generic-handler)
*   [http://weblogs.asp.net/sanjeevagarwal/archive/2008/07/22/Dynamically-create-ASP.NET-user-control-using-ASP.NET-Ajax-and-Web-Service.aspx](http://weblogs.asp.net/sanjeevagarwal/archive/2008/07/22/Dynamically-create-ASP.NET-user-control-using-ASP.NET-Ajax-and-Web-Service.aspx)

# ruby-on-rails - 使用自定义会话控制器设计 after_sign_in_path

> ID：14813312
> 
> 赞同：0
> 
> 时间：2013-02-11T13:48:00.377
> 
> 标签：ruby-on-rails, ruby, devise

如何在单击登录之前定义设计 after_sign_in_path 以重定向到页面用户？我已经在 application_controller 中尝试过这个：

```
 13   def after_sign_in_path_for(resource_or_scope)
 14     sign_in_url = url_for(:action => 'new', :controller => 'my_sessions', :only_path => false, :protocol => 'http')
 15     if request.referer == sign_in_url
 16       super
 17     else
 18       stored_location_for(resource_or_scope) || request.referer || root_path
 19     end
 20   end 
```

有了这个，我只会被重定向到 root_path。值得一提的是，我有用于 Sessions 的自定义控制器，称为 MySessionsController。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:45:52.243

您不需要触摸`after_sign_in_path_for(resource_or_scope)`，因为这是默认行为。

返回路径存储在`session["user_return_to"]`（如果用户是您的设计范围），并由[`store_location!`in设置`FailureApp`](https://github.com/plataformatec/devise/blob/master/lib/devise/failure_app.rb#L175)

每次守望者身份验证失败时都会调用此失败应用程序：请参阅[守望者配置](https://github.com/plataformatec/devise/blob/master/lib/devise.rb#L415)调用[`Delegator`](https://github.com/plataformatec/devise/blob/master/lib/devise/delegator.rb)。

你有可能以某种方式绕过其中的一些吗？

如果您在没有爆炸声的情况下进行监狱长身份验证，就会发生这种情况。如果你打电话，守望者只会通过失败应用程序保释`warden.authenticate!`，请参阅[守望者维基](https://github.com/hassox/warden/wiki/overview)，[如果你打电话给 devise's`authenticate_user!`](https://github.com/plataformatec/devise/blob/master/lib/devise/controllers/helpers.rb#L48)

确保您确实`after_sign_in_path_for`在会话控制器中用作重定向位置，[例如此处](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/sessions_controller.rb#L18)，以防您有自定义位置。

# django - 在 proxypass 后面托管一个 django 项目

> ID：14813314
> 
> 赞同：3
> 
> 时间：2013-02-11T13:48:06.763
> 
> 标签：django, django-admin, proxypass

我已经在本地机器 X 上托管了 django 管理项目。 我在另一台机器 Y 上有一个外部 IP，我正在做从 Y 到 X 的代理传递。 `[http://10.4.x.y/myapp/admin](http://10.4.x.y/myapp/admin) works.`

`[http://proxypassname.com/myapp/admin](http://proxypassname.com/myapp/admin) works.` 但是，当我在管理页面中编辑后单击链接“保存”或“保存继续编辑”按钮时，它会重定向到本地机器 ip（即`[http://10.4.x.y/myapp/blah_blah_blah](http://10.4.x.y/myapp/blah_blah_blah)`）。

如何确保 django 项目重定向到 proxypass 名称而不是本地 IP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:23:28.420

发生这种情况是因为管理员重定向到它认为拥有的 IP。它进入 HTTP 请求的标头。

但是，修复非常容易。假设您的代理服务器实现了[X-Forwarded-For](http://en.wikipedia.org/wiki/X-Forwarded-For)标准，它可以很容易地修复。

在您的**settings.py 中**，只需设置：

**USE_X_FORWARDED_HOST = 真**

并重新启动你的 Django。

如果这不起作用，您可以尝试查看您的代理是否设置了不同类型的标头，并编写一个执行相同操作的中间件。[这是Django 关于中间件的文档章节](http://www.djangobook.com/en/2.0/chapter17.html)的第一个示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T08:12:44.713

我做了这两件事，它奏效了。

1.  无论何时添加 ProxyPass，都应添加 ProxyPassReverse

2.  SITE_ID 应设置为您要指向此 django 项目的域。

# android - 带有单个滑动文本的 Horizo ntalScrollView

> ID：14813318
> 
> 赞同：0
> 
> 时间：2013-02-11T13:48:11.513
> 
> 标签：android, horizontal-scrolling

我正忙于一个水平滚动视图，里面有一个文本视图。我无法让 textview 能够在没有任何空间的情况下从一侧滑到另一侧。

如果我只是添加 textview 它不能滑动。

基本上我想要的是一个水平滚动视图，中间有一个文本视图，可以向左或向右滚动但不能过度滚动（仍然可见）

> ```
> eg:
>  |     Text     | 
>  |Text          | 
>  |          Text| 
> 
> But not 
>  |ext           |
>  |            Te| 
> ```

我当前的布局如下所示：

```
<HorizontalScrollView
    android:layout_width="250dp"
    android:layout_height="35dp"
    android:scrollbars="none" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="36dp" >

        <Space
            android:layout_width="125dp"
            android:layout_height="wrap_content"
            android:background="#808080" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TEST"
            android:textSize="30dp" />

        <Space
            android:layout_width="125dp"
            android:layout_height="wrap_content"
            android:background="#808080" />
    </LinearLayout>
</HorizontalScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:16:22.250

我实际上认为你的说法大部分是正确的。但是我认为您想要做的是在运行时获取屏幕分辨率，然后使用包装内容的文本视图，获取其运行时分辨率，然后将左侧空间和右侧空间的宽度（在运行时）设置为（ScreenResWidth-TextViewWidth）。

这意味着您需要为 TextView 和两个 Spaces 提供一个 ID，以便您可以从 Java 代码中访问它们。

采用：

```
android:gravity="center_horizontal" 
```

在您的文本视图中居中文本。

采用：

```
textview.getWidth(); 
```

在您的 java 代码中获取 textview 的后布局宽度（以像素为单位）。

采用：

```
leftOrRightView.layout(int left, int top, int right, int bottom); 
```

使用 top、left、right 和 bottom 参数设置左右空间的位置和大小。

使用以下命令在 XML 文件中提供您的视图 ID：

```
android:id="@+id/myText"
android:id="@+id/myLeftSpace"
android:id="@+id/myRightSpace" 
```

# objective-c - 无法与爱普生 POS 打印机通信

> ID：14813319
> 
> 赞同：0
> 
> 时间：2013-02-11T13:48:15.713
> 
> 标签：objective-c, printing, bonjour, epson

我正在为 EPSON 热敏打印机 TM-T20 实施 EPSON ePOS iOS SDK。打印机连接到 IP 为 192.168.0.10 的 Airport Express 的 USB 端口。

我按照 EPSON 文档的说明（压缩文件中的[https://download.epson-biz.com/modules/pos/index.php?page=single_soft&cid=3248&scat=50&pcat=3 ），这是我的代码：](https://download.epson-biz.com/modules/pos/index.php?page=single_soft&cid=3248&scat=50&pcat=3)

```
EposBuilder *builder = [[EposBuilder alloc] initWithPrinterModel:@"TM-T20" Lang:EPOS_OC_MODEL_ANK];
if (builder != nil)
{
    int errorStatus = EPOS_OC_SUCCESS;
    errorStatus = [builder addText: @"Hello,\t"];
    errorStatus = [builder addText: @"World!\n"];
    errorStatus = [builder addCut: EPOS_OC_CUT_FEED];

    EposPrint *printer = [[EposPrint alloc] init];
    if (printer != nil)
    {
        errorStatus = [printer openPrinter:EPOS_OC_DEVTYPE_TCP DeviceName:@"192.168.0.10"];
    }
} 
```

不幸的是，“errorStatus”的值为“2”，这是一个“打开错误”。

然后我告诉自己，我必须通过 Bonjour 协议，但还是一样。

我已经为此苦苦挣扎了3天。我快要疯了。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:01:34.617

我希望你已经能够解决这个问题，但这里有几件事需要考虑。首先，在我正在查看的 ePOS-Print_DK_iOS... 手册中，TM-T20 未列为 initWithPrinterModel 的有效打印机类型。它列出的有效值为：TM-T88V、TM-T70、TM-P60 和 TM-U220。也许试试T70？或者它可能与 ios sdk 不兼容？

要尝试的另一件事是查看您是否可以访问打印机的基于 Web 的配置实用程序。去

```
http://192.168.0.10 
```

（我假设您有一个，我使用的是 TM-U220B。）如果您无法访问配置 Web 实用程序，您可能无法访问打印机。

可能有一种方法可以转储打印机的 ip 配置。（在我的身上，我按住以太网接口上的“愚蠢的小按钮”3秒钟。

它也可能无法与 USB 一起使用——机场可能不会将其包含在 IP 网络中。我对此不太了解。

# php - 从六进制字符串中获取图像

> ID：14813322
> 
> 赞同：-8
> 
> 时间：2013-02-11T13:48:24.123
> 
> 标签：php, python, image, zlib

我使用 python 2.7

我在 DB 中有一个字符串，它代表 Hexa 中的图像。示例

```
sdata = "789C9D953D56C52010856363696D49E90AAC73ECDD4396C25228B210CE711B2CC2CAC622CECC9D0C0321313A27E411123EEEFCC07B7BFF7A9CC45EA9BD507BD6F620F769CAF4FEE3096DB76DDACEAEE9865D4CF79C6DAB34F46D441F7F23F88F6F728E6AD794724EDD5CBB9B790EF53FBF1595D9524C517E93CDEA3A433D984E83440327B318B633BF867A4C12734A5654CE26F24F29AB28704A067685363C665B0582D30ADF0F39A2717F3979C9412A6108A1D731C6992C04BD96252ECB9A2AC4A60F2B07904AA8166C84B51545D172C3C8D02B4CA3D51D841F7584B5CD2E17E2698A5DDE991302AD6240189666558242122D68F1C0F19F99475104D0F7C6216D5A6665AFAED62F8A27730A57E3BC4858669D25716B387BA04E39B41059BCC7E99CEAF4B05F971C75AAB0181AE938111CA9DB9A71C9B5443EA000D4231183A4F8ECEF79E7E5B40E2DEF647BDEA9AB6250EA59F70B6AC90E9FAABFB7D040E43C010107D4F1086A4ADA6D8DA66C8AEDD9C10E3514196A0F060220B59825C843883F5D71A67586809FEDF17FFCD75C4CFC012B43550B" 
```

现在，我想使用这个字符串创建图像。我只是知道该图像是 24x24 BMP（或 PNG？）图像。

我知道获取它的php代码，但不知道python。

php：

```
function imagecreatefrombmpstring($im) {
    $header = unpack("vtype/Vsize/v2reserved/Voffset", substr($im, 0, 14));
    $info = unpack("Vsize/Vwidth/Vheight/vplanes/vbits/Vcompression/Vimagesize/Vxres/Vyres/Vncolor/Vimportant", substr($im, 14, 40));
    extract($info);
    extract($header);
    if($type != 0x4D42)
            return false;
    $palette_size = $offset - 54;
    $ncolor = $palette_size / 4;
    $imres=imagecreatetruecolor($width, $height);
    imagealphablending($imres, false);
    imagesavealpha($imres, true);
    $pal=array();
    if($palette_size) {
            $palette = substr($im, 54, $palette_size);
            $gd_palette = "";
            $j = 0; $n = 0;
            while($j < $palette_size) {
                    $b = ord($palette{$j++});
                    $g = ord($palette{$j++});
                    $r = ord($palette{$j++});
                    $a = ord($palette{$j++});
                    if ( ($r == 255) && ($g == 0) && ($b == 255))
                            $a = 127; // alpha = 255 on 0xFF00FF
                    $pal[$n++] = imagecolorallocatealpha($imres, $r, $g, $b, $a);
            }
    }
    $scan_line_size = (($bits * $width) + 7) >> 3;
    $scan_line_align = ($scan_line_size & 0x03) ? 4 - ($scan_line_size & 0x03): 0;
    for($i = 0, $l = $height - 1; $i < $height; $i++, $l--) {
            $scan_line = substr($im, $offset + (($scan_line_size + $scan_line_align) * $l), $scan_line_size);
            if($bits == 24) {
                    $j = 0; $n = 0;
                    while($j < $scan_line_size) {
                            $b = ord($scan_line{$j++});
                            $g = ord($scan_line{$j++});
                            $r = ord($scan_line{$j++});
                            $a = 0;
                            if ( ($r == 255) && ($g == 0) && ($b == 255))
                                    $a = 127; // alpha = 255 on 0xFF00FF
                            $col=imagecolorallocatealpha($imres, $r, $g, $b, $a);
                            imagesetpixel($imres, $n++, $i, $col);
                    }
            }
            else if($bits == 8) {
                    $j = 0;
                    while($j < $scan_line_size) {
                            $col = $pal[ord($scan_line{$j++})];
                            imagesetpixel($imres, $j-1, $i, $col);
                    }
            }
            else if($bits == 4) {
                    $j = 0; $n = 0;
                    while($j < $scan_line_size) {
                            $byte = ord($scan_line{$j++});
                            $p1 = $byte >> 4;
                            $p2 = $byte & 0x0F;
                            imagesetpixel($imres, $n++, $i, $pal[$p1]);
                            imagesetpixel($imres, $n++, $i, $pal[$p2]);
                    }
            }
            else if($bits == 1) {
                    $j = 0; $n = 0;
                    while($j < $scan_line_size) {
                            $byte = ord($scan_line{$j++});
                            $p1 = (int) (($byte & 0x80) != 0);
                            $p2 = (int) (($byte & 0x40) != 0);
                            $p3 = (int) (($byte & 0x20) != 0);
                            $p4 = (int) (($byte & 0x10) != 0);
                            $p5 = (int) (($byte & 0x08) != 0);
                            $p6 = (int) (($byte & 0x04) != 0);
                            $p7 = (int) (($byte & 0x02) != 0);
                            $p8 = (int) (($byte & 0x01) != 0);
                            imagesetpixel($imres, $n++, $i, $pal[$p1]);
                            imagesetpixel($imres, $n++, $i, $pal[$p2]);
                            imagesetpixel($imres, $n++, $i, $pal[$p3]);
                            imagesetpixel($imres, $n++, $i, $pal[$p4]);
                            imagesetpixel($imres, $n++, $i, $pal[$p5]);
                            imagesetpixel($imres, $n++, $i, $pal[$p6]);
                            imagesetpixel($imres, $n++, $i, $pal[$p7]);
                            imagesetpixel($imres, $n++, $i, $pal[$p8]);
                    }
            }
    }
    return $imres;
}
$data = @gzuncompress(pack('H*', $sdata));
$image = imagecreatefrombmpstring($data); 
```

[我在http://code.google.com/p/fluxcp/source/browse/branches/fluxcp-1.0/modules/guild/emblem.php?r=696](http://code.google.com/p/fluxcp/source/browse/branches/fluxcp-1.0/modules/guild/emblem.php?r=696)上找到了这段代码

你能帮助我吗。

编辑：：

一个办法

```
 from binascii import unhexlify
    import zlib
    import Image
    from cStringIO import StringIO
    data = StringIO(zlib.decompress(unhexlify(sdata)))
    i = Image.open(data)
    i.show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:23:15.383

解决方案（与 OP 合作）是：

```
import PIL
from binascii import unhexlify
import zlib
from cStringIO import StringIO

sdata = "789C9D953D56C52010856363696D49E90AAC73ECDD4396C25228B210CE711B2CC2CAC622CECC9D0C0321313A27E411123EEEFCC07B7BFF7A9CC45EA9BD507BD6F620F769CAF4FEE3096DB76DDACEAEE9865D4CF79C6DAB34F46D441F7F23F88F6F728E6AD794724EDD5CBB9B790EF53FBF1595D9524C517E93CDEA3A433D984E83440327B318B633BF867A4C12734A5654CE26F24F29AB28704A067685363C665B0582D30ADF0F39A2717F3979C9412A6108A1D731C6992C04BD96252ECB9A2AC4A60F2B07904AA8166C84B51545D172C3C8D02B4CA3D51D841F7584B5CD2E17E2698A5DDE991302AD6240189666558242122D68F1C0F19F99475104D0F7C6216D5A6665AFAED62F8A27730A57E3BC4858669D25716B387BA04E39B41059BCC7E99CEAF4B05F971C75AAB0181AE938111CA9DB9A71C9B5443EA000D4231183A4F8ECEF79E7E5B40E2DEF647BDEA9AB6250EA59F70B6AC90E9FAABFB7D040E43C010107D4F1086A4ADA6D8DA66C8AEDD9C10E3514196A0F060220B59825C843883F5D71A67586809FEDF17FFCD75C4CFC012B43550B"

fh = StringIO(zlib.decompress(unhexlify(sdata)))

image = PIL.Image.open(fh) 
```

PIL 是 Python Imaging Library，使用 StringIO，我假装有一个类似文件的对象。

# checkbox - 签入/签入 HTML 复选框中的三元运算

> ID：14813323
> 
> 赞同：0
> 
> 时间：2013-02-11T13:48:28.680
> 
> 标签：checkbox, operator-keyword, ternary

我的 JavaScript 吐出动态 HTML，其中一个字段是基于布尔值的复选框，如下所示：

```
<input type="checkbox" disabled='true' (bool == true ? "Checked":"undefined") /> 
```

即使 Boolean 为 false ，我的复选框也始终返回选中状态。对三元运算有什么建议吗？

我也刚刚意识到，每行复选框都很难有 id。这是我的功能目前的样子：

函数 fnBuildWebSiteClipHtml（名称、url、id、allow_removal、use_full_screen）{

```
var html = "<tr id='wc_" + id + "'>" +
    tdstart + "<div style='float: left; width: 20px'><img src='/emm/websiteIcon.do?id="+id+"' height='16px' width='16px'/></div><div style='float: left; vertical-align: middle;'>" + OrionCore.escapeHtml(name) + "</div></td>" +
    tdstart + OrionCore.escapeHtml(url) + "</td>" +
    tdstart + "<input type='checkbox' disabled='true' " + (allow_removal ? "checked='true'" : "") + "/>" + "</td>" +
    tdstart + "<input type='checkbox' disabled='true' " + (use_full_screen ? "checked='true'" : "") + "/>" + "</td>" +
    tdstart +
    "<table>" +
    "<tr>" +
    "<td><a href='javascript:fnShowWebsiteclip(" + id + ")'>"+MESSAGES.edit+"</a> | </td>" +
    "<td><a href='javascript:fnDeleteWebsiteclip(" + id + ")'>"+MESSAGES.del +"</a></td>" +
    "</tr>" +
    "</table>" +
    "</td>" +
    "</tr>";
return html; 
```

}

第 8 行，我检查 allow_removal，然后检查 use_full_screen 是我试图让我的复选框跟随的行。对此的任何建议都非常感谢。

感谢您已经发布的回复，但我不确定在这种情况下如何适应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:01:53.460

可能你需要吗？

```
<body onload="(bool ==true) ? document.getElementById('myTernaryCheckBox').setAttribute('checked', 'checked')  : false">
<input type="checkbox" disabled id="myTernaryCheckBox"/>
</body> 
```

# c# - 将文本文件添加到列表中，然后添加到二维数组中

> ID：14813327
> 
> 赞同：1
> 
> 时间：2013-02-11T13:48:34.353
> 
> 标签：c#, list, for-loop, multidimensional-array

我有一个文本文件，其中包含以下内容：（不带引号和“空格”）

*   ##############
*   ＃ 空的空间＃
*   ＃ 空的空间＃
*   ＃ 空的空间＃
*   ＃ 空的空间＃
*   ##############

我想将整个文件逐行添加到列表中：

```
FileStream FS = new FileStream(@"FilePath",FileMode.Open);
StreamReader SR = new StreamReader(FS);
List<string> MapLine = new List<string>();

foreach (var s in SR.ReadLine())
{
    MapLine.Add(s.ToString());                   
}

foreach (var x in MapLine)
{
    Console.Write(x);
} 
```

我的问题来了：我想将它添加到二维数组中。我试过：

```
string[,] TwoDimentionalArray = new string[100, 100];

for (int i = 0; i < MapLine.Count; i++)
{
    for (int j = 0; j < MapLine.Count; j++)
    {
        TwoDimentionalArray[j, i] = MapLine[j].Split('\n').ToString();
    }
} 
```

我还是 C# 的新手，所以请提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:02:10.863

目前，您正在浏览文件的所有行，并且对于文件的每一行，您再次浏览文件的所有行，将它们拆分`\n`为已经通过将它们放入`MapLine`.

如果你想要一个线阵列的每个字符，并且再次在一个数组中，它应该大致如下所示：

```
string[,] TwoDimentionalArray = new string[100, 100];

for (int i = 0; i < MapLine.Count; i++)
{
     for (int j = 0; j < MapLine[i].length(); j++)
     {
          TwoDimentionalArray[i, j] = MapLine[i].SubString(j,j);
     }
} 
```

我没有测试就这样做了，所以它可能有问题。关键是您需要先遍历每一行，然后遍历该行中的每个字母。从那里，您可以使用[`SubString`.](http://www.dotnetperls.com/substring)

另外，我希望我正确理解了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:08:39.557

你可以试试这个：

```
 // File.ReadAllLines method serves exactly the purpose you need
        List<string> lines = File.ReadAllLines(@"Data.txt").ToList();

        // lines.Max(line => line.Length) is used to find out the length of the longest line read from the file
        string[,] twoDim = new string[lines.Count, lines.Max(line => line.Length)];

        for(int lineIndex = 0; lineIndex < lines.Count; lineIndex++)
            for(int charIndex = 0; charIndex < lines[lineIndex].Length; charIndex++)
                twoDim[lineIndex,charIndex] = lines[lineIndex][charIndex].ToString();

        for (int lineIndex = 0; lineIndex < lines.Count; lineIndex++)
        {
            for (int charIndex = 0; charIndex < lines[lineIndex].Length; charIndex++)
                Console.Write(twoDim[lineIndex, charIndex]);

            Console.WriteLine();
        }

        Console.ReadKey(); 
```

这会将文件内容的每个字符保存到它自己在二维数组中的位置。为此目的`char[,]`也可能被使用。

# java - 从 Java 中的 ArrayList 中删除对象

> ID：14813330
> 
> 赞同：0
> 
> 时间：2013-02-11T13:48:52.847
> 
> 标签：java, for-loop, arraylist, foreach

我有这个，每次子弹到达的位置大于我的屏幕宽度时，它都必须被销毁。当我尝试这个时，游戏崩溃了。

“bullet”是我的类，其中包含 i 作为对象。

“bullets”是我的数组列表，包含所有对象。

编辑：现在尝试使用迭代器，但仍然崩溃。

编辑：接受的答案帮助了我。现在工作。谢谢！

```
public ArrayList<bullet> bullets = new ArrayList<bullet>();
public Iterator<bullet> it = bullets.iterator();

while (it.hasNext()) {
           bullet s = it.next();
           if(s.xPosition > screenWidth - 10) {
               it.remove();
           }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:50:12.640

迭代列表时，您不能从列表中删除元素。`ConcurrentModificationException`如果你这样做，你会得到。您应该使用迭代器并从迭代器中删除元素。

```
Iterator<Bullet> itr = bullets.iterator();
while(itr.hasNext()) {
    if(itr.next().xPosition > screenWidth - 10) {
        itr.remove(i);
    }
} 
```

# batch-file - .bat 脚本可以将标记文本从一个文件复制到另一个文件中的标记位置吗？

> ID：14813340
> 
> 赞同：1
> 
> 时间：2013-02-11T13:49:16.247
> 
> 标签：batch-file

在源文件中，我有：

```
...
<!-- MARK_BEGIN -->
some text line 1
some text line 2
...
<!-- MARK_END -->
... 
```

我想将上面标记的内容（不带开始/结束标记）复制到目标文件中，无论是在开头、结尾还是在标记为的位置：

```
...
<!-- INSERT_HERE -->
... 
```

命令将是：

```
copyMarkedContent.bat sourceFile destFile [TOP | BOTTOM | MARKED ] 
```

**sourceFile**保证有包含**MARK_BEGIN**和**MARK_END**的行。如果将MARKED**参数**提供给**copyMarkedConent.bat**命令，则可以保证**destFile具有包含****INSERT_HERE的行。**

 ****有没有办法在 Windows（Windows 7 或 Windows 2008）上使用 .bat 脚本执行此操作，只使用操作系统附带的那些工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:30:42.023

我没有对此进行测试，但我认为它会满足您的需求。如果其中有错误，至少它会让你开始。

```
@echo off
setlocal enabledelayedexpansion
if #%3==# goto usage

:: convert %3 to upper case
for /f "tokens=5" %%I in ('find "" "%3" 2^>^&1') do set arg=%%I
for %%I in (TOP BOTTOM MARKED) do (if "%arg%"=="%%I" goto next)

:usage
echo usage: %~nx0 sourceFile destFile [TOP^|BOTTOM^|MARKED]
goto :EOF

:next
set /p I="Scraping data from %1... "<NUL
set tempfile=~%time::=%.txt
set tempfile=%tempfile: =%
set tag=0
for /f "tokens=1,2* delims=:" %%H in ('findstr /n ".*" %1') do (
    if not "%%J"=="" (set line=%%I:%%J) else (set line=%%I)
    if !tag!==1 (
        for /f "tokens=*" %%x in ('echo "!line!" ^| find /i "<!-- mark"') do (
            echo Done.
            goto %arg%
        )
        if "!line!"=="" (echo;>>%tempfile%) else (echo !line!>>%tempfile%)
    )
    for /f "tokens=*" %%x in ('echo "!line!" ^| find /i "<!-- mark"') do set tag=1
)

:TOP
set /p I="Prepending data to %2... "<NUL
type %2>>%tempfile%
move /y %tempfile% %2 >NUL
echo Done.
goto :EOF

:BOTTOM
set /p I="Appending data to %2... "<NUL
type %tempfile%>>%2
del /q %tempfile%
echo Done.
goto :EOF

:MARKED
set /p I="Inserting data into %2... "<NUL
set tag=0
set tempfile2=~%time::=%_2.txt
set tempfile2=%tempfile2: =%
for /f "tokens=1,2* delims=:" %%H in ('findstr /n ".*" %2') do (
    if not "%%J"=="" (set line=%%I:%%J) else (set line=%%I)
    if "!line!"=="" (echo;>>%tempfile2%) else (echo !line!>>%tempfile2%)
    if !tag!==0 (
        for /f "tokens=*" %%x in ('echo "!line!" ^| find /i "<!-- insert"') do (
            set tag=1
            type %tempfile%>>%tempfile2%
            del /q %tempfile%
        )
    )
)
move /y %tempfile2% %2 >NUL
echo Done. 
```

**编辑 1：**我进行了不区分大小写的检查，`<!-- MARK`并且不依赖于之前没有空格。`<!-- INSERT`

**编辑 2：**我崩溃了，实际上开始测试我的更改。我进行了一些更改以确保保留缩进和其他格式，并且脚本在我的 Win 7 机器上成功测试。****

# .net - .net 4.5 中的 c2WTS（对 Windows 令牌服务的声明）

> ID：14813344
> 
> 赞同：6
> 
> 时间：2013-02-11T13:49:25.767
> 
> 标签：.net, wcf, .net-4.5, claims-based-identity, adfs2.0

我需要从 Claims 获取 Windows 令牌。该解决方案是使用 ADFS 2.0 并在 IIS ASP.NET 4.0 中运行的 Claims Aware WCF Web 服务。（模拟数据库访问需要 kerberos 令牌）

在 .NET 3.5 和 4.0 中，c2WTS 服务用于从声明中获取 Windows 身份：

WindowsIdentity winId = S4UClient.UpnLogon(upn);

但是 c2WTS 的文档声明如下：“...[从 .NET Framework 4.5 开始，Windows Identity Foundation (WIF) 已完全集成到 .NET Framework。本主题讨论的 WIF 版本 WIF 3.5 , 已弃用，仅应在针对 .NET Framework 3.5 SP1 或 .NET Framework 4 进行开发时使用..."

.NET 4.5 中的 c2WTS 等价物是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T20:09:51.307

没有等价物。但是您仍然可以安装 WIF 以获得 C2WTS 服务。

Saml 安全令牌处理程序具有返回 Windows 标识的 MapToWindows 功能。这类似于 C2WTS 所做的 - 但

1) windows 身份只能用于本地授权 - 要模拟您需要 SYSTEM 权限。这就是 C2WTS 的运行方式。2) 委托您需要在 AD 中配置约束委托的令牌（就像使用 C2WTS 一样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T03:59:48.277

此时内置 S4U。你不需要 C2WTS。你可以这样做：

```
var id = new WindowsIdentity(valueFromClaim);
// continue your impersonation 
```

对于服务调用，如果您将凭据设置为 DefaultCredentials，您应该没问题，因为这似乎在 SAML 令牌处理程序上执行 ToWindowsIdentity。

由于您要使用 Oracle，因此您可能需要显式创建 Windows 上下文并进行模拟（请参阅：[为用户 (S4U) 令牌创建服务](https://stackoverflow.com/questions/24123440/creating-a-service-for-user-s4u-token)）。

综上所述，您必须正确配置约束委派，否则委派将不起作用。

# c# - Word 互操作移动表行

> ID：14813345
> 
> 赞同：2
> 
> 时间：2013-02-11T13:49:26.850
> 
> 标签：c#, ms-word, office-interop, office-automation, office-addins

有谁知道在表格中移动一行的方法？

我有一个动态行数的表，我想通过代码（interop c#）进行操作。例如，我想将索引为 5 的行移动到索引 8 或相反（索引 8 到索引 5）。

任何人的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:25:35.047

假设 wrd 是您的 Word 实例，aDoc 是您的文档，并且您希望（对于文档中的第一个表）将具有索引 src 的行移动到具有索引 dest 的行之前，您可以编写类似这样的内容（添加所有必要的检查）：

```
 Table tbl = aDoc.Tables[1];
        Row toMove = tbl.Rows[src];
        object beforeRow = tbl.Rows[dest];
        Row newRow = tbl.Rows.Add(ref beforeRow);
        toMove.Select();
        wrd.Selection.Copy();
        newRow.Select();
        wrd.Selection.Paste();
        toMove.Delete();
        newRow.Delete(); 
```

# compact-framework - 使用 cfAES 的问题

> ID：14813351
> 
> 赞同：0
> 
> 时间：2013-02-11T13:49:40.993
> 
> 标签：compact-framework, bouncycastle, opennetcf

我需要在 Windows CE 设备上使用 HMACSHA256-Encryption。

我尝试使用 BouncyCastle / cfAES（与 OpenNETCF 结合使用），但我无法让它们工作。

BouncyCastle：我总是收到错误“缺少方法异常：”关于 macUtilities.GetMac 方法。

cfAES：有一大堆错误消息......“找不到类型或命名空间'HashAlgorithm'”等等......

在 .NET Compact Framework 上使用 cfAES 或 BouncyCastle 的最佳实践是什么？陷阱在哪里？cfAES（OpenNETCF 的哪个版本）有什么要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:47:00.113

我早在 2011 年就为 Compact Framework 构建了 BouncyCastle 1.7，没有任何问题。由于无法在此处添加附件，因此我将[解决方案放在了我的博客上。](http://blog.opennetcf.com/ctacke/2011/07/28/BouncyCastleCryptoInTheCompactFramework.aspx)

对于 OpenNETCF 解决方案，最新版本的 SDF 中已经包含 HMACSHA256 - 为什么还要引入 cfAES（Casey 很久以前在他的代码中合并）。

# java - String 如何实现不变性？

> ID：14813352
> 
> 赞同：4
> 
> 时间：2013-02-11T13:49:43.763
> 
> 标签：java

在一次采访中，有人问我“字符串是如何变得不可变的？” 由于我不确定答案，所以我没有回复。我后来问了面试官同样的问题。答案是 String 类是最终的，这就是实现不变性的方式。

这是正确的答案吗？如果是，即使 StringBuffer 也被标记为最终类。那么为什么 StringBuffer 不是不可变的呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T13:51:42.580

它是以下各项的组合：

1.  字段是私有的 - 因此您不能直接更改它们。
2.  没有提供任何`set`方法 - 所以它们也不能间接改变。
3.  `String`是`final`- 所以你不能向它添加可变性（即设置器等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T13:52:09.163

不，这不是正确的答案。String 实现了不变性，因为它没有为您提供任何更改其内部内容的方法。因此，您可以实例化一个 String 对象，为其分配一个引用，但一旦初始化**就不能**更改其内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T13:59:14.563

字符串是不可变对象。

按照以下准则使类不可变：

*   确保类不能被覆盖
*   制作类`final`，或使用静态工厂并使构造函数保持私有
*   制作字段`private`和`final`
*   不提供任何可以以任何方式改变对象状态的方法——不仅仅是`setXXX`方法，还有任何可以改变状态的方法，如果类有任何可变对象字段，那么当在类和它的类之间传递时，它们必须被防御性地复制呼叫者
*   强制调用者在一个步骤中完全构造一个对象，而不是使用无参数构造函数和对`setXXX`方法的后续调用（即避免 Java Beans 约定）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T13:53:20.030

关键字与`final`不变性不同。`String`是不可变的，因为它没有定义任何允许用户更改其内容的方法，**并且**它是最终的，消除了在子类中更改事物的可能性。

制作像`List`实例变量 final 之类的东西仍然允许您更改其内容，使其可变。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T13:54:32.323

作为 final 意味着它不能被派生出来。这并不赋予不变性

不变性是通过封装实现的，并且不提供任何方法来修改内部保存的字符数组。即不存在修改内部字段的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T13:54:28.707

一个字符串池，最初是空的，由 String 类私下维护。

您应该查看 String 的 JavaDoc： `public native String intern();`

看：

*   [http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)
*   [http://en.wikipedia.org/wiki/String_interning](http://en.wikipedia.org/wiki/String_interning)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-11T14:21:11.213

使类不可变的常用方法是确保：

*   所有字段都是私有的；
*   构建后无法修改字段；
*   它是最终的（因此扩展不能破坏不变性）。

String 有点特殊，至少在 Sun/Oracle 实现中，它实际上*并没有*遵循这个过程。该实现有一个可变字段，它在其中缓存对象的哈希码。因此，虽然有一种方法可以改变对象的内部状态（`hashCode`），但这种状态改变不会以任何方式改变对象的行为。任何后续调用都`hashCode`将运行得更快，但结果不会有任何不同。

# c++ - 如何通过 .props 文件设置调试符号路径

> ID：14813356
> 
> 赞同：1
> 
> 时间：2013-02-11T13:49:49.910
> 
> 标签：c++, visual-studio

在对我们的项目进行重组后，所有第 3 方库最终都位于一个系统范围的目录中。一组 .props 文件可确保在包含此类 .props 文件时正确设置包含目录、库目录、前处理器定义等。

目前我们建议开发人员使用 Visual Studio -> 菜单工具 -> 选项 -> 调试 -> 符号手动指定符号路径。但是当将第 3 方库移动到另一个文件夹时，或者设置第二组进行测试时，我们必须手动更改它。

是否可以以及如何在 .props 文件中指定调试符号路径？如何？当然，是否可以在 .props 文件中设置源路径（用于调试）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:25:46.627

那是不可能的。这是 VS 设置，而不是项目设置。

一般来说，有这个问题是没有意义的。如果这些库是静态链接库，那么它们的 .pdb 文件将合并到最终可执行文件的 .pdb 文件中。如果它们是 DLL，那么操作系统需要有一种方法可以在运行时找到 DLL。在这种情况下，调试器在查找 DLL 的 .pdb 文件时也不会遇到任何问题。

您可以使用 Debug + Windows + Modules 诊断 DLL 的 .pdb 搜索问题。右键单击 DLL 并选择“符号加载信息”。它向您显示调试器在哪里搜索 .pdb

# java - PHP Java Bridge 是否具有与 JSP->Java 相同的性能？

> ID：14813357
> 
> 赞同：2
> 
> 时间：2013-02-11T13:49:53.293
> 
> 标签：java, php, jsp

我正在建立一个具有严格数据库访问权限的网站。它还应该具有良好的异常处理机制并且速度快。为了避免数据库访问，我想使用 Java 将一些值加载到 RAM 中。

1.  为了处理 MySQL 数据库句柄问题，我正在创建一个数据库句柄池并使用 Java 中的线程访问它们。

2.  Java 应提供接口来访问 RAM 中存在的值，并提供用户管理和一些其他接口。

3.  我需要详细的错误处理，与 PHP 相比，Java 中的异常处理非常好。

**现在我的问题是：** 

1.  在 PHP 中访问 Java 对象是一个问题，因为它没有一个很好的系统来在 PHP 中存储值。

2.  此外，PHP 需要通过 PHP 桥接器访问 Java。

那么，我应该使用 JSP 吗？但是 JSP 并非在所有服务器上都可用，所以这对我来说是一个两难的选择。

PHP -> Java 桥接器是一个好的解决方案吗？与 JSP->Java 组合相比，它是否具有可扩展性和良好的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:53:40.847

这实际上是一种常见的情况。虽然不一定在 Java 中，但将后端编译为伪解释（我知道 PHP 不是解释语言）前端是常见的做法。然后，您可以在具有 PHP 前端的迭代功能（阅读：无需编译）的 Java 等语言中获得速度和线程持久性的好处。

我的建议是让您查看[Apache Thrift](http://thrift.apache.org/)项目。这将在 Java 服务器和 PHP 客户端之间生成通用接口，允许您从 PHP 环境执行服务调用并将它们传递给 Java。

基本上，在 PHP 中，您建立到 Java 服务器的 TCP 连接。Java 执行数据库调用、加载数据以及它需要执行的任何其他操作，然后在 PHP 中将对象返回给您。Thrift 将帮助您创建一致的对象和接口，并使它们在两个环境之间保持同步。

# iphone - PageViewController 当前索引

> ID：14813358
> 
> 赞同：3
> 
> 时间：2013-02-11T13:49:59.150
> 
> 标签：iphone, ios, xcode, ipad, uipageviewcontroller

我想用 pageViewController 的当前索引设置滑块的值。我的想法是使用这种方法，但我不知道如何获得索引...

```
-(void)pageViewController:(UIPageViewController *)pageViewController didFinishAnimating:(BOOL)finished previousViewControllers:(NSArray *)previousViewControllers transitionCompleted:(BOOL)completed
{

    if(completed)
    {

        //self.slider.value = THE INDEX;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T14:46:46.220

我认为您必须在数据源上实现自定义方法，这将返回视图控制器的索引。您的数据源中很可能有带有 ViewControllers 的数组。像下面这样简单的调用应该做：

```
[pageViewController.datasource indexOfViewControler:[pageViewController.viewControllers]objectAtIndex:0]]; // index of viewcontroller is methond you need to implement on your datascource 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T18:08:36.707

你必须实现获取索引的方法。你可以通过在 NSArray 中添加你的 viewController 来做到这一点。

```
NSArray * viewControllers = [NSArray arrayWithObjects:firstViewController,secondViewController, nil]; 
```

& 然后像这样得到 iindex：

```
self.slider.value=[viewControllers indexOfObject:[pageViewControlle.viewController]]; 
```

# javascript - 如果填写了文本字段，则禁用表单提交按钮

> ID：14813364
> 
> 赞同：0
> 
> 时间：2013-02-11T13:50:19.380
> 
> 标签：javascript, jquery, validation

我正在尝试实现一些 Jquery，基本上说“如果填写了此文本字段，则禁用提交按钮，以便无法交付/提交表单”

到目前为止，我已经想出了这个，但它不起作用

```
$(document).ready(function(){
$this = $("#inputValue");
 if($this.val().length>0){ 
$('input[type=submit]').attr('disabled', 'disabled');
 }  
}); 
```

当我填写表格并在我不应该提交的字段中包含文本时，我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:53:35.620

您的代码仅在运行时运行一次。之后，它不再被检查。

```
$(document).ready(function (){
  $("#inputValue").on('change', function (){
    if($(this).val().length > 0){
      $('input[type=submit]').attr('disabled', 'disabled');
    } else {
      $('input[type=submit]').removeAttr('disabled');
    }
  });
}); 
```

或者，正如@thomasfedb 建议的那样：

```
$(document).ready(function (){
  $('#inputValue').on('change', function() {
    $("input[type=submit]").prop('disabled', $(this).val().length > 0);
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:54:32.483

我建议您[`keyup`](http://api.jquery.com/keyup/)每次在用户输入内容时绑定一个事件以进行检查`#inputValue`：

```
$(document).ready(function() {
    $("#inputValue").on("keyup", function() {
        $("input[type=submit]").prop("disabled", !!$.trim(this.value).length);
    }).trigger("keyup");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:00:41.327

由于您使用的是字段，因此绑定事件`hidden`可能会更好：`change`

```
$('#inputValue').on('change', function() {
  $('input[type="submit"]').prop('disabled', this.value.length > 0);
}).change(); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-11T13:54:33.047

尝试使用此代码。

```
$('input[type=submit]').attr("disabled", true); 
```

# linux - 可以在脚本中将所有输出都输出到标准输出吗？

> ID：14813367
> 
> 赞同：1
> 
> 时间：2013-02-11T13:50:41.227
> 
> 标签：linux, bash, ubuntu, centos

我想记录 Bash 脚本中的命令包含的所有错误消息。

问题是，如果我必须添加

```
E=$( ... 2>&1 ); echo $E >> $LOG 
```

对于所有命令，那么脚本将变得非常难以阅读。

**问题**

是否有可能获得一个全局变量，所以一切都`STDERR`变成了`STDOUT`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T14:00:59.040

只需使用以下命令开始您的脚本：

```
 exec 2>&1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:59:40.497

您可以执行以下操作：

```
#!/bin/sh

test -z "$DOLOGGING" && { DOLOGGING=no exec $0 "${@}" 2>&1 | tee log-file; exit; }
... 
```

将所有输出/错误复制到日志文件。尽管我似乎误读了这个问题，而且您似乎只想添加`exec 2>&1 >/dev/null`到脚本的顶部以将所有错误打印到标准输出并丢弃所有输出。

# android - 如何在 Facebook Wall 上获得清晰的图像

> ID：14813368
> 
> 赞同：1
> 
> 时间：2013-02-11T13:50:42.857
> 
> 标签：android, android-image, android-facebook

我使用了 facebook Wall POst Images 的图形 API Json Response 并显示在我的 APP 中，我成功获得了它。但是图像看起来很模糊..请告诉我如何像在 Facebook 中一样获得清晰的图像

这是我的代码

```
URL url=new URL("http://graph.facebook.com/"+hashMap.get("id")+"/picture?type=normal");
            Bitmap bitmap=BitmapFactory.decodeStream(url.openConnection().getInputStream());
            ((ImageView)view.findViewById(R.id.imageView_ProfilePicture)).setImageBitmap(bitmap);

            url=new URL(hashMap.get("picture_url"));
            bitmap=BitmapFactory.decodeStream(url.openConnection().getInputStream());
            ((ImageView)view.findViewById(R.id.imageView_FullImage)).setImageBitmap(bitmap); 
```

在 AsynTask 中

```
dobackground(){

hashMap.put("picture_url", data.getJSONObject(i).getString("picture"));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:51:43.560

While `?type=large` provides a bigger image it may still not be large enough for a xhdpi display. You can actually specify a actual size now and they'll try their best to fulfill it.

For example this gives you a large square of Mark Zuckerberg:

```
http://graph.facebook.com/4/picture?width=500&height=500 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:03:14.370

使用`"/picture?type=large"`而不是`"/picture?type=normal"`获得稍大的画面。

# javascript - Javascript中的回文检查

> ID：14813369
> 
> 赞同：53
> 
> 时间：2013-02-11T13:50:47.193
> 
> 标签：javascript

我有以下内容：

```
function checkPalindrom(palindrom)
{

    for( var i = palindrom.length; i > 0; i-- )
    {
        if( palindrom[i] = palindrom.charAt(palindrom.length)-1 )
        {
            document.write('the word is palindrome.');
        }else{
            document.write('the word is not palindrome!');
        }
    }
}
checkPalindrom('wordthatwillbechecked'); 
```

我的代码有什么问题？我想检查这个词是否是回文。

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-02-11T14:01:26.360

也许我会建议替代解决方案：

```
function checkPalindrom (str) {
  return str == str.split('').reverse().join('');
} 
```

UPD。但是请记住，这几乎是“作弊”方法，是对语言功能的智能使用的演示，但不是最实用的算法（时间 O(n)，空间 O(n)）。对于现实生活中的应用程序或编码面试，您绝对应该使用循环解决方案。[Jason Sebring 在此线程中](https://stackoverflow.com/a/25091111/949476)发布的内容既简单又高效（时间 O(n)，空间 O(1)）。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-08-02T02:33:34.353

# 比标准答案快 25 倍

```
function isPalindrome(s,i) {
 return (i=i||0)<0||i>=s.length>>1||s[i]==s[s.length-1-i]&&isPalindrome(s,++i);
} 
```

像这样使用：

```
isPalindrome('racecar'); 
```

因为它定义了“我”本身

小提琴：http: [//jsfiddle.net/namcx0yf/9/](http://jsfiddle.net/namcx0yf/9/)

这比下面的标准答案快约 25 倍。

```
function checkPalindrome(str) {
  return str == str.split('').reverse().join('');
} 
```

小提琴：http: [//jsfiddle.net/t0zfjfab/2/](http://jsfiddle.net/t0zfjfab/2/)

查看控制台以获取性能结果。

尽管该解决方案难以阅读和维护，但我建议您理解它以通过递归和位移来展示非分支，从而给您的下一位面试官留下深刻印象。

### 解释

|| 和 && 用于控制流，如“if”“else”。如果 || 剩下的东西 是真的，它只是以真退出。如果某些东西是假的 || 它必须继续。如果 && 左边的东西是假的，它会作为假退出，如果 && 的左边是真的，它必须继续。这被认为是“非分支”，因为它不需要 if-else 中断，而只是对其进行评估。

**1.**使用不需要将“i”定义为参数的初始化程序。如果已定义，则将“i”分配给自身，否则初始化为 0。始终为假，因此始终评估下一个 OR 条件。

```
(i = i || 0) < 0 
```

**2.**检查“i”是否走了一半但跳过检查中间奇数字符。此处的位移位类似于除以 2，但结果是最低的偶数邻居除以 2。如果为真，则假定回文，因为它已经完成。如果 false 评估下一个 OR 条件。

```
i >= s.length >> 1 
```

**3.**根据“i”从开始字符和结束字符比较最终作为邻居或邻居到中间字符。如果 false 退出并假设不是回文。如果 true 继续到下一个 AND 条件。

```
s[i] == s[s.length-1-i] 
```

**4.**再次调用自身进行递归，将原始字符串作为“s”传递。由于此时“i”已被确定定义，因此会预先递增以继续检查字符串的位置。返回布尔值，指示是否为回文。

```
isPalindrome(s,++i) 
```

## 但...

一个简单的 for 循环仍然是我喜欢的答案的两倍（[**又名 KISS 原则**](https://en.wikipedia.org/wiki/KISS_principle)）

```
function fastestIsPalindrome(str) {
  var len = Math.floor(str.length / 2);
  for (var i = 0; i < len; i++)
    if (str[i] !== str[str.length - i - 1])
      return false;
  return true;
} 
```

[http://jsfiddle.net/6L953awz/1/](http://jsfiddle.net/6L953awz/1/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-11T13:53:26.153

第一个问题

= 是赋值 == 是比较

第二个问题，你这里的逻辑是错误的

```
palindrom.charAt(palindrom.length)-1 
```

您从 charAt 中减去一个而不是长度。

第三个问题，它仍然是错误的，因为你没有将长度减少 i。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-02-11T13:56:31.057

这里的逻辑不太正确，你需要检查每个字母来确定这个词是否是回文。目前，您打印多次。怎么样做类似的事情：

```
function checkPalindrome(word) {    
    var l = word.length;
    for (var i = 0; i < l / 2; i++) {
        if (word.charAt(i) !== word.charAt(l - 1 - i)) {
            return false;
        }
    }
    return true;
}

if (checkPalindrome("1122332211")) {
    document.write("The word is a palindrome");
} else {
    document.write("The word is NOT a palindrome");
} 
```

这应该打印出它确实是一个回文。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-08-19T22:33:13.463

它对我有用

```
function palindrome(str) {
  /* remove special characters, spaces and make lowercase*/
  var removeChar = str.replace(/[^A-Z0-9]/ig, "").toLowerCase();

  /* reverse removeChar for comparison*/
  var checkPalindrome = removeChar.split('').reverse().join('');

  /* Check to see if str is a Palindrome*/
   return (removeChar === checkPalindrome);
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-05-12T11:01:42.803

作为一个更清晰的递归函数：http: [//jsfiddle.net/dmz2x117/](http://jsfiddle.net/dmz2x117/)

```
function isPalindrome(letters) {

    var characters  = letters.split(''),
        firstLetter = characters.shift(),
        lastLetter  = characters.pop();

    if (firstLetter !== lastLetter) {
        return false;
    }

    if (characters.length < 2) {
        return true;
    }

    return isPalindrome(characters.join(''));

} 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2016-03-04T06:46:26.053

# 最短代码（31 个字符）（ES6）：

```
p=s=>s==[...s].reverse().join``
p('racecar'); //true 
```

请记住，短代码不一定是最好的。可读性和效率可能更重要。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-02-11T13:56:34.393

至少三件事：

*   您正在尝试测试与 的相等性`=`，它用于设置。您需要使用`==`or进行测试`===`。（可能是后者，如果你没有前者的理由。）

*   您在检查每个字符后报告结果。但是，直到您检查了足够多的字符，您才知道结果。

*   您仔细检查每个字符对，因为您实际上只需要检查 if，say`first === last`而不是 if `last === first`。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-10-11T15:51:30.177

```
function palindromCheck(str) {
    var palinArr, i,
        palindrom = [],

    palinArr = str.split(/[\s!.?,;:'"-()]/ig);

    for (i = 0; i < palinArr.length; i++) {
        if (palinArr[i].toLowerCase() === palinArr[i].split('').reverse().join('').toLowerCase() &&
            palinArr[i] !== '') {
            palindrom.push(palinArr[i]);
        }
    }
        return palindrom.join(', ');
}
console.log(palindromCheck('There is a man, his name! was Bob.')); //a, Bob 
```

查找和从大写到小写。将字符串拆分为数组，我不知道为什么会留下几个空格，但我想捕捉和单个字母。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-01-15T10:53:11.387

我在上述函数中添加了更多内容，以检查诸如“去挂意大利腊肠，我是千层面猪”之类的字符串。

```
function checkPalindrom(str) {
    var str = str.replace(/[^a-zA-Z0-9]+/gi, '').toLowerCase();
    return str == str.split('').reverse().join('');
} 
```

谢谢

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-02-11T13:56:22.993

```
function checkPalindrom(palindrom)
{
   var flag = true;
   var j = 0;
    for( var i = palindrom.length-1; i > palindrom.length / 2; i-- )
    {
        if( palindrom[i] != palindrom[j] )
        {
           flag = false;
           break; // why this? It'll exit the loop at once when there is a mismatch.
        }
        j++;
    }
  if( flag ) {
  document.write('the word is palindrome.');
  }
  else {
document.write('the word is not palindrome.');
  }
}
checkPalindrom('wordthatwillbechecked'); 
```

为什么我要在循环外打印结果？否则，对于单词中的每个匹配项，它将打印“is or is or is not pallindrome”，而不是检查整个单词。

编辑：更新了 Basemm 建议的更改和修复。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2014-03-23T20:35:36.430

解决技术测试时最重要的事情是**不要使用捷径**——**他们想看看你在算法上是如何思考的！不是你使用的方法。**

这是我想出的一个（在我通过测试后 45 分钟）。不过，还有一些优化需要做。在编写任何算法时，`false`如果它看起来是，最好假设并更改逻辑`true`。

**`isPalindrome()`：**

基本上，要使其以**O(N)**（线性）复杂度运行，您需要 2 个*迭代器*，它们的向量相互指向。意思是，一个从开头开始的迭代器和一个从结尾开始的迭代器，每个迭代器都向内移动。您可以让迭代器遍历整个数组并使用条件 to `break`/`return`一旦它们在中间相遇，但默认情况下只为每个迭代器提供*一半长度可能会节省一些工作。*

`for`循环似乎强制使用更多检查，所以我使用了`while`循环——我不太习惯。

这是代码：

```
/**
 * TODO: If func counts out, let it return 0
 *  * Assume !isPalindrome (invert logic)
 */
function isPalindrome(S){
    var s = S
      , len = s.length
      , mid = len/2;
      , i = 0, j = len-1;

    while(i<mid){
        var l = s.charAt(i);
        while(j>=mid){
            var r = s.charAt(j);
            if(l === r){
                console.log('@while *', i, l, '...', j, r);
                --j;
                break;
            }
            console.log('@while !', i, l, '...', j, r);
            return 0;
        }
        ++i;
    }
    return 1;
}

var nooe = solution('neveroddoreven');  // even char length
var kayak = solution('kayak');  // odd char length
var kayaks = solution('kayaks');

console.log('@isPalindrome', nooe, kayak, kayaks); 
```

请注意，如果循环计数结束，则返回`true`. 所有逻辑都应该反转，以便默认返回`false`。我也使用了一种捷径方法`String.prototype.charAt(n)`，但我觉得这没问题，因为每种语言都支持这种方法。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2013-02-11T13:53:19.630

*   `=`在`palindrom[i] = palindrom.charAt(palindrom.length)-1`应该是`==`或`===`
*   `palindrom.charAt(palindrom.length)-1`应该`palindrom.charAt(palindrom.length - i)`

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-03-14T16:16:46.507

分享我的快速变体，它也支持空格

```
function isPalindrom(str) {
  var ia = 0;
  var ib = str.length - 1;
  do {
    if (str[ia] === str[ib]) continue;

    // if spaces skip & retry
    if (str[ia] === ' ' && ib++) continue;
    if (str[ib] === ' ' && ia--) continue;

    return false;
  } while (++ia < --ib);
  return true;
}
var palindrom="never odd or even";
var res = isPalindrom(palindrom);
document.getElementById('check').innerHTML ='"'+ palindrom + '"'+" checked to be :" +res;
```

```
<span id="check" />
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2019-04-09T18:01:40.860

您可以尝试以下方法

```
function checkPalindrom (str) {
      str = str.toLowerCase();
      return str == str.split('').reverse().join('');
    }

    if(checkPalindrom('Racecar')) {
        console.log('Palindrome');
    } else {
        console.log('Not Palindrome');
    } 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2017-12-21T04:26:04.017

上面的一些简短的答案很好，但不容易理解，我建议另一种方法：

```
function checkPalindrome(inputString) {

    if(inputString.length == 1){
        return true;
    }else{
        var i = 0;
        var j = inputString.length -1;
        while(i < j){
            if(inputString[i] != inputString[j]){
                return false;
            }
            i++;
            j--;
        }
    }
    return true;
} 
```

我比较每个字符，`i`从左`j`开始，从右开始，直到它们的索引无效（`i<j`）。它也适用于任何语言

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2015-04-26T23:08:16.017

```
function checkPalindrom(palindrom)
{
  palindrom= palindrom.toLowerCase();
   var flag = true;
   var j;
   j = (palindrom.length) -1 ;
   //console.log(j);
   var cnt = j / 2;
   //console.log(cnt);
    for( i = 0; i < cnt+1 ; i++,j-- )
    {
        console.log("J is => "+j);
        console.log(palindrom[i] + "<==>" + palindrom[j]);
        if( palindrom[i] != palindrom[j] )
        {
           flag = false;
           break; 
        }

    }
  if( flag ) {
  console.log('the word is palindrome.');
  }
  else {
console.log('the word is not palindrome.');
  }
}
checkPalindrom('Avid diva'); 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-10-13T16:20:10.393

我想我会分享我自己的解决方案：

```
function palindrome(string){
    var reverseString = '';
    for(var k in string){
       reverseString += string[(string.length - k) - 1];
    }
  if(string === reverseString){
    console.log('Hey there palindrome');
  }else{
    console.log('You are not a palindrome');
  }
}
palindrome('ana');
```

希望能帮助某人。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2016-06-22T09:09:43.020

递归方法：

```
var low;
var high;
var A = "abcdcba";  

function palindrome(A , low, high){
  A = A.split('');

 if((low > high) || (low == high)){
   return true;
 }

 if(A[low] === A[high]){
   A = A.join('');
   low = low + 1; 
   high = high - 1; 
   return palindrome(A , low, high);
 }
 else{
   return "not a palindrome";
 }
}

palindrome(A, 0, A.length-1); 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2016-06-02T12:14:51.023

我想知道为什么没有人建议这个：

ES6：

```
// "aba" -> true
// "acb" -> false
// "aa" -> true
// "abba" -> true
// "s" -> true
isPalindrom = (str = "") => {
  if (str[0] === str[str.length - 1]) {
    return str.length <= 1 ? true : isPalindrom(str.slice(1, -1))
  }

  return false;
}

alert(["aba", "acb", "aa", "abba", "s"].map((e, i) => isPalindrom(e)).join()) 
```

ES5：

```
// "aba" -> true
// "acb" -> false
// "aa" -> true
// "abba" -> true
// "s" -> true
function isPalindrom(str) => {
  var str = typeof str !== "string" ? "" : str;

  if (str[0] === str[str.length - 1]) {
    return str.length <= 1 ? true : isPalindrom(str.slice(1, -1))
  }

  return false;
}

alert(["aba", "acb", "aa", "abba", "s"].map(function (e, i) {
    return isPalindrom(e);
}).join()); 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2018-12-22T14:05:04.080

ES6 的另一种解决方案

```
isPalin = str => [...str].every((c, i) => c === str[str.length-1-i]); 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-09-29T18:33:39.890

(JavaScript) 使用正则表达式，这会检查字母数字回文并忽略空格和标点符号。

```
function palindrome(str) {
  str = str.match(/[A-Za-z0-9]/gi).join("").toLowerCase();
  //  (/[A-Za-z0-9]/gi) above makes str alphanumeric

  for(var i = 0; i < Math.floor(str.length/2); i++) { //only need to run for half the string length 
    if(str.charAt(i) !== str.charAt(str.length-i-1)) { // uses !== to compare characters one-by-one from the beginning and end
      return "Try again.";
    }
  }
  return "Palindrome!";
}
palindrome("A man, a plan, a canal. Panama.");
//palindrome("4_2 (: /-\ :) 2-4"); // This solution would also work on something like this. 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-02-10T12:57:20.830

我在一个采访网站上发现了这个：

> 编写一个有效的函数来检查输入字符串的任何排列是否是回文。你可以忽略标点符号，我们只关心字符。

玩弄它，我想出了这段丑陋的代码:)

```
function checkIfPalindrome(text) {
    var found = {};
    var foundOne = 0;
    text = text.replace(/[^a-z0-9]/gi, '').toLowerCase();
    for (var i = 0; i < text.length; i++) {
        if (found[text[i]]) {
            found[text[i]]++;
        } else {
            found[text[i]] = 1;
        }
    }
    for (var x in found) {
        if (found[x] === 1) {
            foundOne++;
            if (foundOne > 1) {
                return false;
            }
        }
    }
    for (var x in found) {
        if (found[x] > 2 && found[x] % 2 && foundOne) {
            return false;
        }
    }
    return true;
} 
```

就留在这里留给后人吧。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2017-02-02T17:44:04.797

Here is a solution that works even if the string contains non-alphanumeric characters.

```
function isPalindrome(str) {
    str = str.toLowerCase().replace(/\W+|_/g, '');
    return str == str.split('').reverse().join('');
} 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2016-12-23T22:27:34.803

```
function myPolidrome(polidrome){
 var string=polidrome.split('').join(',');
 for(var i=0;i<string.length;i++){
    if(string.length==1){
     console.log("is polidrome");
   }else if(string[i]!=string.charAt(string.length-1)){
     console.log("is not polidrome");
     break;
  }else{
     return  myPolidrome(polidrome.substring(1,polidrome.length-1));
  }
  }
  }
myPolidrome("asasdsdsa"); 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2017-07-05T08:35:57.863

遵循 JavaScript 的最佳实践编写检查回文的代码：

```
(function(){
	'use strict';

	var testStringOne = "Madam";
	var testStringTwo = "testing";
	var testNull = null;
	var testUndefined;

	console.log(checkIfPalindrome(testStringOne));
	console.log(checkIfPalindrome(testStringTwo));
	console.log(checkIfPalindrome(testNull));
	console.log(checkIfPalindrome(testUndefined));

	function checkIfPalindrome(testStringOne){

		if(!testStringOne){
			return false;
		}

		var testArrayOne = testStringOne.toLowerCase().split("");
		testArrayOne.reverse();

		if(testArrayOne.toString() == testStringOne.toLowerCase().split("").toString()){
			return true;
		}else{
			return false;
		}
	}

})();
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2019-11-17T01:07:55.850

如果您想要效率**和**简单性，我推荐这种方法：

```
function Palindrome(str = '') {
    let len = str.length;
    let i = -1;

    if (len < 3) { 
        return false;
    }

    while (len-- > i++) {
        if (str[i] !== str[len]) {
            return false;
        }
    }

    return true;
}

console.log(Palindrome('aba'))//true
console.log(Palindrome('abc'))//false 
```

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2016-06-09T08:48:10.053

这个怎么样，使用一个简单的标志

```
function checkPalindrom(str){
   var flag = true;
   for( var i = 0; i <= str.length-1; i++){
    if( str[i] !== str[str.length - i-1]){
      flag = false;  
     }
    }
    if(flag == false){
      console.log('the word is not a palindrome!');   
    }
    else{
    console.log('the word is a palindrome!');
    }
}

checkPalindrom('abcdcba'); 
```

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2016-12-28T21:59:27.497

以为我会使用 Array.prototype.filter() 分享我的解决方案。filter() 根据函数返回的布尔值过滤数组。

```
var inputArray=["","a","ab","aba","abab","ababa"]
var outputArray=inputArray.filter(function isPalindrome(x){
  if (x.length<2) return true;
  var y=x.split("").reverse().join("");
  return x==y;
})
console.log(outputArray); 
```

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2016-11-18T21:12:07.553

使用 for 循环向前 (i) 和向后 (j) 循环字符串字符。如果在任何时候字符`str[i]`不等于- 那么它不是回文*。*`str[j]`如果我们成功地遍历字符串，那么它就是一个回文。

```
function isPalindrome(str) {
  for(var i = 0, j = str.length - 1; i < str.length; i++, j--) {
    if (str[i] !== str[j]) return false
  }

  return true
} 
```

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2016-12-12T04:02:57.737

这避免了正则表达式，同时还处理具有空格和大写字母的字符串......

```
function isPalindrome(str) {
    str = str.split("");

    var str2 = str.filter(function(x){ 
        if(x !== ' ' && x !== ',') {
            return x;
        }
    });

    return console.log(str2.join('').toLowerCase()) == console.log(str2.reverse().join('').toLowerCase());
};

isPalindrome("A car, a man, a maraca"); //true 
```

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2017-01-13T08:59:56.553

这对我有用。

```
var number = 8008
number = number + "";
numberreverse = number.split("").reverse().join('');
console.log ("The number if reversed is: " +numberreverse);
if (number == numberreverse)
    console.log("Yes, this is a palindrome");
else
    console.log("Nope! It isnt a palindrome"); 
```

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2016-12-23T14:31:05.267

使用递归：

```
function isPalindromeRecursive(str) {
  const isLessThan2 = str.length < 2;
  const firstAndLastEqual = str.slice(0, 1) === str.slice(-1);
  return !isLessThan2 && firstAndLastEqual 
    ? isPalindromeRecursive(str.slice(1, -1)) 
    : isLessThan2;
} 
```

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2016-12-11T01:30:49.290

```
`
function checkPalindrome (str) {
    var str = str.toLowerCase();
    var original = str.split(' ').join('');
    var reversed = original.split(' ').reverse().join('');

  return (original === reversed);
}
` 
```

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2020-10-30T11:07:58.773

仅递归索引比较：

```
const isPalindrome = (str, start = 0, end = str.length - 1) => {
    if (start >= end) {
        return true;
    }

    if (str[start] === str[end]) {
        return isPalindrome(str, start + 1, end - 1);
    }

    return false;
}; 
```

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2017-06-10T18:06:45.763

```
function palindrome(str) {
// Good luck!
//convert the string into lowerCase.
 str = str.toLowerCase();
//this line remove all non=alphanumeric characters.
 strAlphaNum = str.replace(/[^a-z0-9]/g,"");
//this line create an array of the strAlphaNum string.
 strArray = strAlphaNum.split("");
//this line reverse the array
 strReversed = strArray.reverse();
//this line join the reversed array to make a string whithout space.
 strRevJoin = strReversed.join("");
//this condition check if the given string is a palindrome.
 if (strAlphaNum === strRevJoin){
 return true;}    
 else {return false;}
 } 
```

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2017-11-16T10:40:25.653

```
<script>
    function checkForPally() {
        var input = document.getElementById("inputTable").value;
        var input = input.replace(/\s/g, ''); 
        var arrayInput = input.split(); 
        var inputReversed = arrayInput.reverse();
        var stringInputReversed = inputReversed.join("");

        if (input == stringInputReversed) {
            check.value = "The word you enter is a palindrome"
        }
        if (input != stringInputReversed) {
            check.value = "The word you entered is not a palindrome"
        }
    }
</script> 
```

您首先使用 getElement 标签设置回文的初始变量。看到回文可以是多个单词，您使用正则表达式条目来删除空格。然后使用 split 函数将字符串转换为数组。

接下来，使用 reverse 方法反转数组，完成后将反转后的数组连接回字符串。最后，您只需使用一个非常基本的 if 语句来检查是否相等，如果反转的值等于初始变量，您自己就有一个回文。

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2021-09-05T19:39:48.240

# 回文检查的一些值得注意的逻辑

## 过滤 alphaNumeric 并使大小写不敏感

#### 铝过滤

```
str = text.toLowerCase().replace(/[^A-Za-z0-9]/g,''); 
```

#### 非单词字符过滤

```
str = text.toLowerCase().replace(/[\W_]/g,''); 
```

## 回文逻辑

#### 内置方法 [短]

```
const isPalindrome = (str) => str === [...str].reverse().join(''); 
```

#### 所有字符迭代[更简单]

```
const isPalindrome = (str) => {
    let rev = "";
    length = str.length;
    while(length--){
        rev += str[length];
    }
    return str === rev;
} 
```

#### 2指针方法[性能]

```
const isPalindrome = (str) => {
    const length = str.length;
    const halfLength = Math.floor(length /2);
    for(let i=0;i<halfLength; i++){
        if(str[i] !== str[length-1-i]){
            return false;
        }
    }
    return true;
} 
```

#### 递归的[雄辩]

```
const isPalindrome = (str) => {
const length = str.length;
    if (length <= 1){
        return true;
    } else if (str.charAt(0) !== str.slice(-1)){
        return false;
    } else{
        return isPalindrome(str.substring(1,length-1));
    } 
} 
```

```
// inbuilt methods [shorter]
const isPalindrome1 = (text) => {
  let str = text.toLowerCase().replace(/[^A-Za-z0-9]/g, '')
  return str === [...str].reverse().join('');
}

// native logic [easier]
const isPalindrome2 = (text) => {
  let str = text.toLowerCase().replace(/[^A-Za-z0-9]/g, '')
  let rev = "";
  length = str.length;
  while(length--){
    rev += str[length];
  }
  return str === rev;
}

// 2 pointer approach [performance]
const isPalindrome3 = (text) => {
  let str = text.toLowerCase().replace(/[\W_]/g,'');
  const length = str.length;
  const halfLength = Math.floor(length /2);
  for(let i=0;i<halfLength; i++){
    if(str[i] !== str[length-1-i]){
      return false;
    }
  }
  return  true;
}

// recursive [ eloquent ]
const isPalindrome4 = (text) => {
  let str = text.toLowerCase().replace(/[\W_]/g,'');
  const length = str.length;
  if (length <= 1){
    return true;
  } else if (str.charAt(0) !== str.slice(-1)){
    return false;
  } else{
    return isPalindrome4(str.substring(1,length-1));
  }
}

console.log(isPalindrome1("A man, a plan, a canal. Panama.")); //=> true
console.log(isPalindrome2("madam  # ")) //=> true // only alnum for consideration
console.log(isPalindrome3("table")) //=> false
console.log(isPalindrome4("malayalam")) //=> true
```

更多方式

[多种检查回文的方法](https://itnext.io/11-way-to-check-for-palindromes-in-javascript-85dbfe7dfb5d)

[奇怪的解决方案来测试你的技能](https://stackoverflow.com/questions/14813369/palindrome-check-in-javascript/25091111#25091111)

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2018-11-03T01:41:52.290

此版本允许特殊字符，如“ñ”或“àèìòù”，在其他答案中无法解决：

```
function palindromeUnicode(s)
{
     var sc = decodeURIComponent(escape(s));
     return sc === Array.from(sc).reverse().join('')
}
console.log(palindromeUnicode('áñitalavalatiñá')); //true 
```

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2019-02-26T00:54:31.073

很好的答案在这里。这是另一种方法。

```
 function checkPalindrom(palindrom){
      var len = palindrom.length; //get length of the word
      var pos = len-1;      //get index of the last character
      var median  = len/2  // get median character
      if(len <= 1){
         document.write("The word is a Palindrome");
      }else{
         for(var i = 0; i < median+1; i++){
           if(palindrom.charAt(i) == palindrom.charAt(pos-i)){
             document.write("The word is a Palindrome")
           }
         }
         document.write("The word is not a Palindrome")
      }       

      checkPalindrom('wordthatwillbechecked'); 
```

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2017-06-16T16:11:39.150

在这种情况下，我使用了一个三元来向后跟踪索引：

```
function palindromeCheck(string) {
  let str = string.toLowerCase();
  let palindrome;
   for (let i = 0; i < str.length; i++) {
    if (str[i] === str[str.length - (i == 0 ? 1 : i + 1)]) {
    palindrome = true;
    } else {
      palindrome = false;
   }
} 
```

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2021-08-01T16:02:38.920

回文检查可以在没有额外空间和空间复杂度 O(1) 的时间复杂度 O(n/2) 中完成，方法是使用左右索引指针并将它们移向中心。我们不需要创建额外的数组或列表来循环字符串。

```
 /*  
Check for planindrome
@string - input
@left - start index of string/input
@right - last index of string/input (which we can get from string.length - 1)
*/

function isPlaindrome(string, left, right) {
    while(left < right) {
        if(string[left] !== string[right]) {
            return false;
        };
        left++;
        right--;
    };

    return true;
};

console.log('abc =>', isPlaindrome('abc', 0, 'abc'.length - 1));
console.log('racecar => ', isPlaindrome('racecar', 0, 'racecar'.length - 1));
console.log('abba => ', isPlaindrome('abba', 0, 'abba'.length - 1));
console.log('xyzzyx => ', isPlaindrome('xyzzyx', 0, 'xyzzyx'.length - 1)); 
```

您可以根据字符串空或字符串小写的边缘情况轻松修改函数以忽略大写情况。

* * *

## 回答 #43

> 赞同：-1
> 
> 时间：2020-05-02T09:43:47.170

> **Palindrome is a string, which when read in both forward and backward way is same. Example: Example: madam, lol, pop, radar etc.**

**Simple Logic**

```
//Sample string
  let str1 = "radar";
//breaking into a char array and sort
  let str1Arr = str1.split("").sort();//a,a,d,r,r
  let str2Arr = str1.split("").reverse().sort();//a,a,d,r,r
//now join both string separately and compare, if both are same then it is pelindrome     
  if(str1Arr.join("") == str2Arr.join(""))
  {
       console.log("Palindrome"); 
  }
  else{
       console.log("Not Palindrome"); 
  } 
```

# c# - 如何在 Win7 和 Win8 上访问存储的凭据（PasswordVault？）？

> ID：14813370
> 
> 赞同：10
> 
> 时间：2013-02-11T13:50:55.313
> 
> 标签：c#, security, passwordvault

我刚刚发现 Win8 在控制面板上有一个名为*User Accounts and Family Safely* with *Credential Manager*的部分。我想访问存储在那里的凭据（不是**检索**密码，而是将它们用作登录令牌）。所以，基本上，我想搭上已经安装的软件。

[在这个讨论](https://stackoverflow.com/questions/12538367/using-credenumerate-to-pull-webcredentials)中已经提出了最接近解决方案的建议，但并不是**那么**接近。

1.  **在哪里可以找到*Windows.Security.Credentials.PasswordVault*的程序集？**我已经用谷歌搜索了两个小时，但我只获得有关应用程序开发的信息，而我将针对桌面。

2.  **有没有办法解决对 Win7 和 Win8 的预存储凭据的访问？**我有点担心保险库设施在 Win8 中已被彻底改造，因此无法同时针对两个平台。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T14:24:05.847

[如何：使用参考管理器添加或删除参考](http://msdn.microsoft.com/library/hh708954%28v=vs.110%29.aspx)说：

> 在桌面项目中，Core 选项卡默认不会出现。您可以通过打开项目节点的快捷菜单、选择**Unload Project**、添加以下代码段并重新打开项目（在项目节点上选择**Reload** **Project**）来添加 Windows 运行时。当您调用“**参考管理器**”对话框时，会出现“核心”选项卡。
> 
> ```
> <PropertyGroup>
>     <TargetPlatformVersion>8.0</TargetPlatformVersion>
> </PropertyGroup> 
> ```
> 
> 确保选中此选项卡上的 Windows 框。然后，您应该能够使用 WinRT 元素。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-10T20:13:40.780

我遇到了同样的问题，发现在任何地方都没有简单的答案。

这是我发现的：

1.  您需要卸载项目并添加`TargetPlatformVersion`上述内容。
2.  添加参考：`C:\Program Files (x86)\Windows Kits\8.1\References\CommonConfiguration\Neutral\Annotated\Windows.winmd`
3.  还要添加参考：`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETCore\v4.5\System.Runtime.WindowsRuntime.dll`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-30T10:41:24.013

您可以使用包装的[凭据管理包](https://www.nuget.org/packages/CredentialManagement/)。这是一个开源项目。我在 Windows 7 中检查了它，它工作正常。

为了保存您的数据，请使用以下代码：

```
 Credential saved = new Credential("username", "password", "MyApp", CredentialType.Generic);
    saved.PersistanceType = PersistanceType.LocalComputer;
    saved.Save(); 
```

并加载您的数据使用：

```
 Credential credential = new Credential { Target = "MyApp", Type = CredentialType.Generic };
    credential.Load(); 
```

# css - CSS：如何隐藏这样的字段？

> ID：14813373
> 
> 赞同：1
> 
> 时间：2013-02-11T13:51:07.277
> 
> 标签：css, formatting, textinput

我正在尝试设置文本输入字段的样式。到目前为止，我尝试使用边框和图像作为背景，但这不是一个可扩展的解决方案。如何设置如下图所示的输入字段样式？

![在此处输入图像描述](../Images/babc4b768e66d02d8654270c3aaee08d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T13:54:03.450

使用 CSS3`box-shadow`属性。例子：

```
input[type=text] {
    box-shadow: inset 2px 2px 2px 2px black;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:08:29.023

同意@Morpheus。您也可以同时使用 2 个阴影：

```
input[type=text] {
    box-shadow: inset 0 2px 2px 2px #000, inset 0 -2px 2px 2px #fff;
} 
```

# c# - 如何将c#内联查询转换为transact sql编写的存储过程？

> ID：14813376
> 
> 赞同：1
> 
> 时间：2013-02-11T13:51:12.990
> 
> 标签：c#, asp.net, sql-server, tsql

我有很多使用 .net 框架在 C# 中内联编写的 SQL 查询。例如

```
string sMysql = @"
SELECT
[Something]
from Person where person_uid=12" 
```

我希望它将其转换为将用事务 SQL 编写的存储过程。

像这样的东西：

```
CREATE PROCEDURE [dbo].[aspnet_AnyDataInTables]
    @uid int
AS
BEGIN
SELECT
    [Something]
    from Person where person_uid=@uid
END 
```

我可以手动完成，但我有很多内联查询要转换。有没有办法以编程方式完成这项繁忙的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:18:02.420

对于您的具体示例，放弃存储过程的想法，并将您的代码片段更改为以下内容：

```
// initialize UID value and SQL query with parameter placeholder
int uid = 12;
sql = "SELECT [Something] FROM [Person] WHERE [person_uid] = @UID";

// initialize connection and open
using (SqlConnection connection = new SqlConnection("<connection string>")
{     
    SqlCommand command = new SqlCommand(sql, connection)
    // add UID parameter
    command.Parameters.Add(new SqlParameter("UID", uid);

    try
    {
        connection.Open();        
        // execute and read results
        SqlDataReader reader = command.ExecuteReader();
        while (reader.Read())
        {
            // process results        
        }
    }
    catch (Exception ex)
    {
        // handle exceptions
    }
} 
```

如问题评论中所述，存储过程不一定比内联参数化查询快。SQL Server 甚至会缓存未参数化查询的执行计划，但我更喜欢显式声明参数。

如果您想了解更多信息，请查看[这篇关于 SQL Server 2008 的执行计划缓存和重用的文章。](http://msdn.microsoft.com/en-us/library/ms181055.aspx)

# elasticsearch - 在轮胎的弹性搜索映射中禁用日期检测

> ID：14813379
> 
> 赞同：3
> 
> 时间：2013-02-11T13:51:21.783
> 
> 标签：elasticsearch, tire

我正在用 property 索引一个文档`obj_properties`，它是 property name -> property value 的哈希。elasticsearch 推断某些属性值是日期，当遇到无法解析为日期的同一属性的后续值时，会导致以下错误。

`org.elasticsearch.index.mapper.MapperParsingException: failed to parse date field <NON-DATE FIELD within obj_properties>`

所以，我想禁用日期检测`obj_properties`以及其中嵌套的任何内容。每

[http://elasticsearch-users.115913.n3.nabble.com/Date-Detection-not-always-wanted-tp1638890p1639415.html](http://elasticsearch-users.115913.n3.nabble.com/Date-Detection-not-always-wanted-tp1638890p1639415.html)

（注意，我相信链接的帖子包含一个错字——该字段应该是`date_formats`而不是`date_format`，但我已经尝试了两种方法）

我创建了以下映射

```
mapping do
    indexes :name
    indexes :obj_properties, type: "object", date_formats: "none"
  end 
```

但我继续收到同样的例外。中的属性`obj_properties`无法提前知道，因此无法创建详尽的类型映射。有任何想法吗？禁用日期检测是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:28:52.050

`type`您可以通过在映射中指定特定日期来关闭特定日期检测：

```
curl -XPUT 'http://127.0.0.1:9200/myindex/?pretty=1'  -d '
{
   "mappings" : {
      "mytype" : {
         "date_detection" : 0
      }
   }
}
' 
```

或通过在默认映射中指定索引中的所有类型：

```
curl -XPUT 'http://127.0.0.1:9200/myindex/?pretty=1'  -d '
{
   "mappings" : {
      "_default_" : {
         "date_detection" : 0
      }
   }
}
' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:18:13.180

```
mapping(date_detection: false) do
  indexes :name
  indexes :obj_properties, type: "object"
end 
```

然后`curl 'http://127.0.0.1:9200/myindex/_mapping?pretty=1'`将包括[这里](http://www.elasticsearch.org/guide/reference/mapping/root-object-type.html)`date_detection = false`提到的

虽然我相信这适用于整个索引 - 而不是特定领域

# javascript - 过滤空间到字符串末尾的空间，同时在同一位置保留特殊字符

> ID：14813384
> 
> 赞同：0
> 
> 时间：2013-02-11T13:52:00.953
> 
> 标签：javascript, algorithm, logic

我有一个字符串**( ) - ( )** ，其中 "(",")" 和 "-" 是字符串中的特殊字符。这里的字符串用空格分隔字符。当用户输入字符串之间的字符时，空格被替换为输入。然后字符串看起来**"(9) -8 (7)"**。
我需要将所有输入放在最左侧，并将特殊字符保留在相同的位置并将空格推到字符串的末尾。然后字符串将如下所示**(987) - ( )**。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:30:55.927

这就是我最终的结果。现在似乎可行

```
var value = "(9 ) -8 ( 7 )";
        for (var i = 0; i < mask.length; i++) {
            var char = mask.charAt(i);
            if ('9XA'.indexOf(char) != -1) {
                if (value.charAt(i) == " ") {
                    var j = i + 1;
                    var matchPattern = /^[A-Za-z0-9]+$/                        
                    while (value.length)
                        if (value.charAt(j).match(matchPattern) || value.charAt(i) == " ")
                            break;
                        else
                            j++;
                    var temp = value.charAt(i);
                    value.charAt(i) = value.charAt(j);
                    value = value.insert(i, value.charAt(j));
                    value = value.insert(j, temp);
                }
            }
        } 
```

# matlab - Matlab - 在集合中插入一个元素

> ID：14813385
> 
> 赞同：-1
> 
> 时间：2013-02-11T13:52:02.160
> 
> 标签：matlab, output

我打算做以下事情`matlab`：

*   创建一个空集
*   插入一个在其中指定某个标准的元素

因此，作为在 matlab 命令行上的快速运行，我执行了以下操作：

```
>> e=78

e =

    78

>> Ck=[]

Ck =

     []

>> Cn=Ck+e

Cn =

     [] 
```

但是，我期待得到以下内容：

```
Cn = [78] 
```

为什么我没有得到预期的结果？而且，我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:07:59.767

`@plus`运算符被定义为算术运算，而不是集合运算。

要添加到指定位置的现有 (1D) 集，请执行连接和/或索引。例如，要在集合的末尾添加，您可以编写

```
Cn = [Ck,e]; 
```

或者

```
Cn = Ck;
Cn(end+1) = e; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:05:40.673

可能我错了，但我会通过 初始化一个空数组`zeros`，例如：

```
C = zeros(m,n)
with m,n = 1,2,...,N 
```

然后，您输入您的第二个数组/矩阵并根据您想到的任何算法对其进行处理。

我希望这有帮助。

# javascript - 更改 div 位置 ontouchdrag（如果这样的事件可用）

> ID：14813386
> 
> 赞同：0
> 
> 时间：2013-02-11T13:52:02.783
> 
> 标签：javascript, html, css, mobile

基本上，我有一个网页，它是一个 div 里面的一个 div。假设 div 1（容器）高 500px。Div 2 在该容器内高 100 像素。我想要做的是检测用户在屏幕上触摸 div 2（这是手机上的网页），当他们向上/向下拖动时，div 会随之移动。我已经进行了一些研究，并且看到这是在 CSS 3 中使用 matrix3d 和 transform y 完成的（但是对于像我这样对这类事情没有什么经验的人来说，我找不到一个好的解释）。我想要它，比如说，用户将第二个 div 拖到底部，并且一些内容超出了容器 div 的范围。我不希望它向下滚动，我确实希望它消失......但我希望它有点“反弹”回到视野中。所以这里是故障。

*   用户按下屏幕
*   用户拖动 div 1 内部的 div 2。当他们拖动 div 时，它会沿拖动方向移动。
*   用户可以将 div 向右拖动到顶部/底部。如果他们将它拖到容器 div 之外，那很好。容器 div 不应调整大小或变得可滚动，并且 div 2 的一部分应从视图中消失。
*   当用户释放拖动时，div 应该弹回原位。比方说，如果它被拖得太高，它会弹回位置 100、100。如果它被拖得太远，它就会弹回 100、500（我认为反弹可以通过 CSS 过渡来控制）。

那么，有没有人有一个例子可以让我看到它的实际效果，或者有一个教程可以帮助我理解如何实现这个目标？我很抱歉没有提供任何代码作为开始的基础，但事实上，我真的不知道从哪里开始。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:49:43.643

Safari 开发文档是您的朋友：

[http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)

查看用于移动 div 的 touch move 部分，对于您的情况，您希望设置条件以判断用户是否超出了外部 div 的范围，并使用隐藏的溢出禁用滚动。

# google-search-api - 在 google api 中过滤显式图像

> ID：14813391
> 
> 赞同：0
> 
> 时间：2013-02-11T13:52:23.837
> 
> 标签：google-search-api, google-image-search

嗨，我想在运行我的应用程序（在本地和服务器中）时过滤显式图像。如何限制包含成人图像的图像我应该如何使用谷歌自定义搜索引擎限制图像请任何人帮助我。

我正在使用下面的代码，但它不起作用。

```
 <script type="text/javascript">

        google.load('search', '1');

        function initialize() {

            var searchControl = new google.search.SearchControl();          
            searchControl.addSearcher(new google.search.ImageSearch());
            searchControl.draw(document.getElementById("searchcontrol"));
            searchControl.execute("sunset");
        }
        google.setOnLoadCallback(initialize);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T11:39:42.660

您可以使用[本指南中的以下代码](https://developers.google.com/image-search/v1/reference)

var searcher = new google.search.ImageSearch();
searcher.setRestriction(
google.search.Search.RESTRICT_SAFESEARCH,
google.search.Search.SAFESEARCH_STRICT);

imageSearch.setSearchCompleteCallback ...
imageSearch.execute ....

另请注意：

1.  成人过滤仅适用于少数语言（[请在此处查看](https://developers.google.com/custom-search/docs/xml_results?hl=ru#safeSearchLevels)）

2.  此 API 标记为已弃用。将来您可能应该使用某种[这种 API](https://developers.google.com/custom-search/docs/xml_results?hl=ru#safeSearchLevels)。我仍在使用已弃用的 API，但 Google 可以随时禁用此 API。

# python - Python：一种从 Python 字典中删除空列表的优雅方法

> ID：14813396
> 
> 赞同：10
> 
> 时间：2013-02-11T13:52:33.407
> 
> 标签：python, list, dictionary

我有一本字典：

```
default = {'a': ['alpha'], 'b': ['beta','gamma'], 'g': []} 
```

我希望将空值消除为：

```
default = {'a': ['alpha'], 'b': ['beta','gamma']} 
```

我写了一个函数（按照网上找到的一个例子）

```
def remove_empty_keys(d):
    for k in d.keys():
        try:
            if len(d[k]) < 1:
                del[k]
        except:
            pass
        return(d) 
```

我有以下问题：

1-我没有发现为什么它总是返回以下错误-

```
remove_empty_keys(default)
 {'a': ['alpha'], 'b': ['beta'], 'g': []} 
```

2- 是否有内置函数可以在不创建原始字典副本的情况下从 Python 字典中消除/删除 Null/None/空值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T13:54:00.643

没有内置的（AFAIK），但你可以通过 dict 理解轻松地做到这一点：

```
new_dict = {k:v for k,v in original_dict.items() if v} 
```

如果你被旧版本的python（没有dict理解的pre 2.7）困住，你可以使用dict构造函数：

```
new_dict = dict((k,v) for k,v in original_dict.items() if v) 
```

请注意，这并不适用（根据您的第二个问题）。并且字典不支持像列表那样的切片分配，所以你可以真正做到的最好的*是：

```
new_dict = {k:v for k,v in original_dict.items() if v}
original_dict.clear()
original_dict.update(new_dict) 
```

*当然，“最佳”一词完全是主观的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-11T13:59:24.490

要修复您的功能，请更改`del[k]`为`del d[k]`. 没有从字典中删除适当值的功能。

您正在做的是删除变量`k`，根本不更改字典。这就是为什么总是返回原始字典的原因。

重写后，您的函数可能如下所示：

```
def remove_empty_keys(d):
    for k in d.keys():
        if not d[k]:
            del d[k] 
```

这假设您要消除空列表和`None`值，并实际删除任何具有“假”值的项目。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-11T13:56:13.650

您可以使用 dict 理解：-

```
>>> default = {'a': ['alpha'], 'b': ['beta','gamma'], 'g': []}

>>> {key: value for key, value in default.iteritems() if value}
{'a': ['alpha'], 'b': ['beta', 'gamma']} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-11T13:57:28.487

```
dict((k, v) for k, v in default.iteritems() if v) 
```

这会过滤所有非空字符串、空字典/元组/列表的项目。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-04T15:07:29.280

另一个选项如下（不创建新字典）：

```
for e in [k for k,v in default.iteritems() if len(v) == 0]: default.pop(e) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-11T14:22:57.123

[迈克尔的回答](https://stackoverflow.com/a/14813529/284795)是正确的。

退后一步，您也许可以完全避免创建那些空列表，方法是使用[`collections.defaultdict(list)`](http://docs.python.org/2/library/collections.html#collections.defaultdict)

```
>>> import collections
>>> d = collections.defaultdict(list)
>>> d
defaultdict(<type 'list'>, {})
>>> d["hobbits"].append("Frodo")
>>> d["hobbits"].append("Sam")
>>> d
defaultdict(<type 'list'>, {'hobbits': ['Frodo', 'Sam']}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-20T11:57:23.920

如果这些值都是列表，那么您可以使用它们的真实值，您可以使用[`itertools.compress`](https://docs.python.org/3/library/itertools.html#itertools.compress)：

```
from itertools import compress
d = {'a': ['alpha'], 'b': ['beta','gamma'], 'g': []}
new_d = dict(compress(d.items(), d.values()))
print(new_d)  # {'a': ['alpha'], 'b': ['beta', 'gamma']} 
```

# winapi - CreateDIBSection + 16 位系统颜色

> ID：14813398
> 
> 赞同：0
> 
> 时间：2013-02-11T13:52:40.753
> 
> 标签：winapi

此代码适用于 32 位系统颜色（Windows 7），但不适用于 16 位颜色 - 菜单位图不透明！！！：

```
...
HBITMAP rv = rgb(hsrc, 16);
...

HBITMAP rgb(HBITMAP hsrc, WORD wBitsPixel) {

    HBITMAP hold = NULL;
    HDC hdcsrc = NULL, hdc = NULL;
    BITMAP bmp = {0};
    HBITMAP dib = NULL;
    UCHAR *dst = NULL, *src = NULL, *tmp = NULL;
    UCHAR alpha;
    int bpl;
    ULONG x, y;
    DWORD bmp_size = 0;
    HANDLE hdib = NULL;
    char *lpbitmap = NULL;
    int rv = 0;

    hdc    = GetDC(m_hMainDlg);
    hdcsrc = CreateCompatibleDC(hdc);
    hold   = (HBITMAP)SelectObject(hdcsrc, hsrc);
    rv     = GetObject(hsrc, sizeof(BITMAP), &bmp);

    BITMAPINFOHEADER bi = {0};
    bi.biSize          = sizeof(BITMAPINFOHEADER);
    bi.biWidth         = bmp.bmWidth;;
    bi.biHeight        = bmp.bmHeight;
    bi.biPlanes        = 1;
    bi.biBitCount      = wBitsPixel;
    bi.biCompression   = BI_RGB;
    bi.biSizeImage     = 0;
    bi.biXPelsPerMeter = 0;
    bi.biYPelsPerMeter = 0;
    bi.biClrUsed       = 0;
    bi.biClrImportant  = 0;

    bmp_size = ((bmp.bmWidth * bi.biBitCount + 31) / 32) * 4 * bmp.bmHeight;
    hdib = GlobalAlloc(GHND, bmp_size);

    lpbitmap = (char *)GlobalLock(hdib);

    /* Get bits of source bitmap. */
    GetDIBits(hdcsrc, hsrc, 0, bmp.bmHeight, lpbitmap, (BITMAPINFO *)&bi, DIB_RGB_COLORS);

    /* For destination bitmap */
    BITMAPINFO bmi = {0};
    bmi.bmiHeader.biSize          = sizeof(BITMAPINFO);
    bmi.bmiHeader.biWidth         = bmp.bmWidth;
    bmi.bmiHeader.biHeight        = bmp.bmHeight;
    bmi.bmiHeader.biPlanes        = 1;
    bmi.bmiHeader.biBitCount      = wBitsPixel;
    bmi.bmiHeader.biCompression   = BI_RGB;
    bmi.bmiHeader.biSizeImage     = 0;
    bmi.bmiHeader.biXPelsPerMeter = 0;
    bmi.bmiHeader.biYPelsPerMeter = 0;
    bmi.bmiHeader.biClrUsed       = 0;
    bmi.bmiHeader.biClrImportant  = 0;

    dib = CreateDIBSection(NULL, &bmi, DIB_RGB_COLORS, (void **)&dst, NULL, 0);

    bpl = 4 * bmp.bmWidth; /* bytes per line */
    src = (UCHAR *)lpbitmap;
    for (y = 0; y < bmp.bmHeight; y++, src += bpl) {
        tmp = src;
        for (x = 0; x < bmp.bmWidth; x++) {
            alpha  = tmp[3];

            dst[0] = tmp[0] * alpha / 255;
            dst[1] = tmp[1] * alpha / 255;
            dst[2] = tmp[2] * alpha / 255;
            dst[3] = alpha;

            dst += 4;
            tmp += 4;
        }
    }

    // free resources
    ReleaseDC(m_hMainDlg, hdc);
    SelectObject(hdcsrc, hold);
    DeleteDC(hdcsrc);
    GlobalUnlock(hdib);
    GlobalFree(hdib);

    return dib;
} 
```

# mysql - 在 MySQL 索引中 Collat ion="A" 是什么意思？

> ID：14813401
> 
> 赞同：5
> 
> 时间：2013-02-11T13:52:49.610
> 
> 标签：mysql, phpmyadmin, collation

在 phpMyAdmin 中，我在一列上创建了一个唯一索引，在屏幕底部我有以下内容：

```
Indexes:
Keyname = "[Name of column]"
Type = "BTREE"
Unique = "Yes"
Packed = "No"
Column = "[Name of column]"
Cardinality = "7"
Collation = "A"
Null = ""
Comment = "" 
```

排序规则“A”到底是什么意思？ANSI？ASCII？我的专栏在 utf8_unicode_ci 中，即使使用 utf8 字符也能保证它是唯一的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-27T12:53:10.840

[https://dev.mysql.com/doc/refman/5.7/en/show-index.html](https://dev.mysql.com/doc/refman/5.7/en/show-index.html)

列在索引中的排序方式。这可以具有值 A（升序）或 NULL（未排序）。

# c# - C# Outlook 加载项获取选定的电子邮件

> ID：14813402
> 
> 赞同：6
> 
> 时间：2013-02-11T13:53:06.567
> 
> 标签：c#, outlook-addin

我想在我的 Outlook 2010 加载项中获取所有选定的电子邮件。我找到了这个[MSDN 教程](http://msdn.microsoft.com/en-us/library/ms268994%28v=vs.100%29.aspx)，但我是 C# 的初学者，我不太明白这行代码：`Object selObject = this.Application.ActiveExplorer().Selection[3];`

我相信`Selection[]`类似于 C# 中的重写运算符、索引器。但是，有什么办法可以看到它的实现吗？如果我浏览代码，我只会看到接口而不是实现。所以我不知道 Selection 对象的结构。真正的背后是什么`operator []`。

另外，为什么所选项目从索引 1 而不是 0 开始？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-02-07T11:44:10.210

我知道这有点晚了，但这个问题在搜索引擎中排名很高。这是我用来在 Outlook Interop 中获取选定电子邮件的解决方案：

```
internal static IEnumerable<MailItem> GetSelectedEmails()
{
     foreach (MailItem email in new Microsoft.Office.Interop.Outlook.Application().ActiveExplorer().Selection)
     {
          yield return email;
     }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T14:07:53.800

该行检索第三条选定的消息。
Selection[] 等价于 Selection.Item() - Item 函数被标记为索引属性访问器。
您看不到实现 - 它全部在 Outlook 对象模型中。
所有 Outlook 集合都以 1 开头，而不是 0。这是它过去在 VB 中的方式，因此 Outlook 对象模型使用相同的约定。

# mysql - MYSQL Foreign Key Errno (150) 无法创建表

> ID：14813403
> 
> 赞同：0
> 
> 时间：2013-02-11T13:53:09.040
> 
> 标签：mysql, foreign-keys, errno

我刚开始在大学学习 MYSQL，我有一个重要的任务要为我的班级做。我必须创建一个小型数据库，但由于 errno(150) 这就是我所拥有的，我似乎无法添加带有外键的表。

```
create table Country
(CountryName varchar (50) not null,
Primary Key (CountryName));

create table InterestGroup
(IntrestgrpName varchar (30) not null,
Primary Key (IntrestgrpName));

create table Organisation
(OrgName varchar (50) not null,
OrgAddress varchar (30),
OrgTelNo.varchar (30),
Primary Key (OrgName));

create table Qualification
(QualName varchar (50) not null,
Primary Key (QualName));

create table Member
(MemberID varchar (15) not null,
MemberName varchar (30),
MemberAdd varchar (50) not null,
CountryName varchar (50) not null,
IntrestgrpName varchar (30) not null,
QualName varchar (50) not null,
OrgName varchar (50) not null,
Primary Key (MemberID),
Foreign Key (CountryName) References Country (CountryName),
Foreign Key (IntrestgrpName) References InterestGroup (InterestgrpName),
Foreign Key (QualName) References Qualification (Qualname),
Foreign Key (OrgName) References Organisation (OrgName)); 
```

我似乎无法创建要创建的成员表，它给出了这个错误，ERROR 1005 (HY000): Can't create table 'iicp.member' (errno: 150) 在此先感谢您的帮助，我真的需要解决这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:14:59.440

这里是工作查询

```
create table Country
(CountryName varchar (50) not null,
Primary Key (CountryName));

create table InterestGroup
(IntrestgrpName varchar (30) not null,
Primary Key (IntrestgrpName));

create table Organisation
(OrgName varchar (50) not null,
OrgAddress varchar (30),
OrgTelNo varchar (30),
Primary Key (OrgName));

create table Qualification
(QualName varchar (50) not null,
Primary Key (QualName));

create table Member
(MemberID varchar (15) not null ,
MemberName varchar (30),
MemberAdd varchar (50) not null,
CountryName varchar (50) not null,
IntrestgrpName varchar (30) not null,
QualName varchar (50) not null,
OrgName varchar (50) not null,
Primary Key (MemberID), 
Foreign Key (CountryName) References Country (CountryName),
Foreign Key (IntrestgrpName) References InterestGroup (IntrestgrpName),
Foreign Key (QualName) References Qualification (Qualname),
Foreign Key (OrgName) References Organisation (OrgName)); 
```

[**在这里演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/91480)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:06:19.243

你的 SQL 是正确的。通过更改以下更改对我有用：

```
OrgTelNo.varchar (30) to OrgTelNo varchar (30) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:16:50.187

`OrgTelNo.varchar (30),`

而不是这个，你应该写

`OrgTelNo varchar (30),`

在创建最后一个表成员时也是拼写错误。

```
FOREIGN KEY ( IntrestgrpName ) REFERENCES InterestGroup ( IntrestgrpName) 
```

试试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T14:10:48.510

```
SHOW ENGINE INNODB STATUS;

...

------------------------
LATEST FOREIGN KEY ERROR
------------------------
130211 15:09:26 Error in foreign key constraint of table test/member:
Foreign Key (IntrestgrpName) References InterestGroup (InterestgrpName),
Foreign Key (QualName) References Qualification (Qualname),
Foreign Key (OrgName) References Organisation (OrgName)):
Cannot resolve column name close to:
),
Foreign Key (QualName) References Qualification (Qualname),
Foreign Key (OrgName) References Organisation (OrgName))

... 
```

您在表**InterestGroup**中引用了名为**InterestgrpName**的列，但列的实际名称是**IntrestgrpName**

 ****```
Foreign Key (IntrestgrpName) References InterestGroup (InterestgrpName),

You have type error here -----------------------------------^ 
```****

# iphone - 向核心蓝牙框架 Xcode 发送数据

> ID：14813413
> 
> 赞同：0
> 
> 时间：2013-02-11T13:53:23.787
> 
> 标签：iphone, core-bluetooth

. 我正在开发一个使用核心蓝牙框架的应用程序。应用程序与启动、锁定、解锁门有关。在 Apple 提供的示例的帮助下，我几乎完成了该应用程序。那就是心率监测器和温度传感器。

我有 2 个问题。1：心率监视器应用程序从外围设备读取数据，而在我的情况下，我只需向`startButton`按下的外围设备发出信号。所以我的问题是我是否必须使用`writeValueForCharacteristic`方法 `discoverCharacteristics`。

2：如果是这样，请帮助我这里的按钮代码

```
- (IBAction) startButtonPressed: (id) sender {

}
- (IBAction) lockDoors: (id) sender {

}
 - (IBAction) unLockDoors: (id) sender {

} 
```

代码由 给出。

```
- (void) peripheral:(CBPeripheral *) peripheral didDiscoverServices:(NSError *)error 
{
    if (error) 
    {
        NSLog(@"Discovered services for %@ with error: %@", peripheral.name, [error localizedDescription]);
        return;
    }
    for (CBService * service in peripheral.services)
    {
        NSLog(@"Service found with UUID: %@", service.UUID);

    if([service.UUID isEqual:[CBUUID UUIDWithString:@"1809"]])
    {
        /* Car Start Service - discover  

         CAR_START_CHARACTERISTIC_UUID,   
         LOCK_DOOR_CHARACTERISTIC_UUID,  
         UNLOCK_DOOR_CHARACTERISTIC_UUID, 
         TRUNK_CHARACTERISTIC_UUID 
         ALARM_CHARACTERISTIC_UUID

         */
        [peripheralManager discoverCharacteristics:[NSArray arrayWithObjects:[CBUUID UUIDWithString:@"2A1E"], [CBUUID UUIDWithString:@"2A1C"], [CBUUID UUIDWithString:@"2A21"], [CBUUID UUIDWithString:@"2A1F"],[CBUUID UUIDWithString:@"2A1G"],nil] forService:service];
    }
    else if([service.UUID isEqual:[CBUUID UUIDWithString:@"180A"]])
    {
        /* Device Information Service - discover manufacture name characteristic */
        [peripheralManager discoverCharacteristics:[NSArray arrayWithObject:[CBUUID UUIDWithString:@"2A29"]] forService:service];
    }
    else if ( [service.UUID isEqual:[CBUUID UUIDWithString:CBUUIDGenericAccessProfileString]] )
    {
        /* GAP (Generic Access Profile) - discover device name characteristic */
        [peripheralManager discoverCharacteristics:[NSArray arrayWithObject:[CBUUID UUIDWithString:CBUUIDDeviceNameString]]  forService:service];
    }
} 
```

}

```
- (void) peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(NSError *)error 
{

    if (error) 
    {
        NSLog(@"Discovered characteristics for %@ with error: %@", service.UUID, [error localizedDescription]);
        return;
    }
    if([service.UUID isEqual:[CBUUID UUIDWithString:@"1809"]]) {
        for (CBCharacteristic * characteristic in service.characteristics)
        {
            /* Set Car Start */
            if([characteristic.UUID isEqual:[CBUUID UUIDWithString:@"2A1C"]])
            {
                self.carStartCharacteristic = characteristic;
                NSLog(@"Found Car Start Characteristic");
            } 
            /* Set Lock Doors */
            if([characteristic.UUID isEqual:[CBUUID UUIDWithString:@"2A1E"]])
            {
                self.lockDoorsCharacteristic = characteristic;
                NSLog(@"Found Lock Doors Characteristic");
            }    
            /* Set Un Lock Doors */
            if([characteristic.UUID isEqual:[CBUUID UUIDWithString:@"2A11"]])
            {
                self.unLockDoorsCharacteristic = characteristic;
                NSLog(@"Found UnLock Doors Characteristic");
            }  
            /* Set Trunk Open */
            if([characteristic.UUID isEqual:[CBUUID UUIDWithString:@"2A13"]])
            {
                self.trunkCharacteristic = characteristic;
                NSLog(@"Found Trunk Characteristic");
            }  
            /* Set Alarm */
            if([characteristic.UUID isEqual:[CBUUID UUIDWithString:@"2A14"]])
            {
                self.alarmCharacteristic = characteristic;
                NSLog(@"Found Alarm Characteristic");
            }  

        }
    }if([service.UUID isEqual:[CBUUID UUIDWithString:@"180A"]])
    {
        for (CBCharacteristic * characteristic in service.characteristics)
        {
            /* Read manufacturer name */
            if([characteristic.UUID isEqual:[CBUUID UUIDWithString:@"2A29"]])
            {                
                [peripheralManager readValueForCharacteristic:characteristic];
                NSLog(@"Found a Device Manufacturer Name Characteristic - Read manufacturer name");
            }           
        } 
    }

    if ( [service.UUID isEqual:[CBUUID UUIDWithString:CBUUIDGenericAccessProfileString]] )
    {
        for (CBCharacteristic *characteristic in service.characteristics) 
        {
            /* Read device name */
            if([characteristic.UUID isEqual:[CBUUID UUIDWithString:CBUUIDDeviceNameString]])
            {                
                [peripheralManager readValueForCharacteristic:characteristic];
                NSLog(@"Found a Device Name Characteristic - Read device name");
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T00:32:00.147

1.  您将同时使用两者。您将扫描（如果之前未连接），然后发现服务，然后发现特征。完成后，您将从按钮调用 writeValueForCharacteristic，并使用您希望写入的任何值。

2.  *   (IBAction) startButtonPressed: (id) sender { [peripheral writeValue:yourNSData forCharacteristic:yourCBCharacteristic type:yourWriteType]; }

# scala - 函数式编程 + 领域驱动设计

> ID：14813416
> 
> 赞同：16
> 
> 时间：2013-02-11T13:53:38.317
> 
> 标签：scala, functional-programming, domain-driven-design, entities

函数式编程促进了不可变类和引用透明性。

领域驱动设计由值对象（不可变）和实体（可变）组成。

我们应该创建不可变实体而不是可变实体吗？

假设，项目使用 Scala 作为主要语言，如果我们正在处理并发，我们如何将实体编写为**案例类（因此是不可变的）而不冒陈旧状态的风险？**

什么是好的做法？保持实体可变（`var`字段等...）并避免**案例类**的出色语法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-11T14:33:25.600

您可以在 Scala 中有效地使用不可变实体，并避免可变字段的恐惧以及源自可变状态的所有错误。使用不可变实体可以帮助您实现并发，不会让事情变得更糟。您之前的可变状态将成为一组转换，它将在每次更改时创建一个新的引用。

但是，在您的应用程序的某个级别，您需要有一个可变状态，否则您的应用程序将毫无用处。这个想法是在你的程序逻辑中尽可能地推动它。让我们以银行账户为例，它可能会因利率和 ATM 取款或存款而发生变化。

您有两种有效的方法：

*   您公开可以修改内部属性的方法并管理这些方法的并发性（实际上很少）

*   您使所有类不可变，并用可以更改帐户的“经理”包围它。

由于第一个非常简单，我将详细介绍第一个。

```
case class BankAccount(val balance:Double, val code:Int)

class BankAccountRef(private var bankAccount:BankAccount){
   def withdraw(withdrawal) = {
       bankAccount = bankAccount.copy(balance = bankAccount.balance - withdrawal)
       bankAccount.balance
   }
} 
```

这很好，但是天哪，你仍然被并发管理所困扰。好吧，Scala 为您提供了一个解决方案。这里的问题是，如果您将对 BankAccountRef 的引用共享给您的后台作业，那么您将不得不同步调用。问题是您正在以次优的方式进行并发。

**实现并发的最佳方式：消息传递**

如果另一方面，不同的作业不能直接调用 BankAccount 或 BankAccountRef 上的方法，而只是通知它们需要执行一些操作怎么办？那么，你就有了一个 Actor，这是 Scala 中最喜欢的并发处理方式。

```
class BankAccountActor(private var bankAccount:BankAccount) extends Actor {

    def receive {
        case BalanceRequest => sender ! Balance(bankAccount.balance)
        case Withdraw(amount) => {
            this.bankAccount = bankAccount.copy(balance = bankAccount.balance - amount)
        }
        case Deposit(amount) => {
            this.bankAccount = bankAccount.copy(balance = bankAccount.balance + amount)

        }

    }
} 
```

此解决方案在 Akka 文档中进行了广泛描述：http: [//doc.akka.io/docs/akka/2.1.0/scala/actors.html](http://doc.akka.io/docs/akka/2.1.0/scala/actors.html)。这个想法是您通过向其邮箱发送消息来与 Actor 进行通信，并且这些消息按接收顺序进行处理。因此，如果使用此模型，您将永远不会有并发缺陷。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-11T14:29:28.063

这是一个意见问题，它不像你想象的那么具体。

如果您真的想接受 FP，我会为您的所有域对象采用不可变的路线，并且永远不会对它们进行任何行为。

也就是有人将上述称为服务模式，在这种模式下，行为和状态总是分开的。这在 OOP 中避开了，但在 FP 中很自然。

这也取决于您的域是什么。对于有状态的东西，比如 UI 和视频游戏，OOP 有时会更容易。对于网站或 REST 等硬核后端服务，我认为服务模式更好。

除了经常提到的并发性之外，我喜欢不可变对象的两个非常好的地方是它们更可靠地缓存，并且它们对于分布式消息传递（例如，protobuf over amqp）也非常有用，因为意图非常明确。

同样在 FP 中，人们通过创建“语言”或“对话”也就是 DSL（[Builders](http://en.wikipedia.org/wiki/Builder_pattern)、Monads、Pipes、Arrows、[STM](http://doc.akka.io/docs/akka/1.3.1/java/stm.html)等）来对抗可变到不可变的桥梁，使您能够变异然后转换回不可变的领域。上面提到的服务使用 DSL 进行更改。这比你想象的更自然（例如 SQL 就是一个例子“对话”）。另一方面，OOP 更喜欢拥有可变域并利用语言的现有程序部分。

# vb.net - 如何在发送带附件的电子邮件之前将文件附加到临时位置？

> ID：14813419
> 
> 赞同：0
> 
> 时间：2013-02-11T13:53:41.437
> 
> 标签：vb.net, winforms, email-attachments

在按下我的提交按钮之前，我在将所选文件附加到我的 VB.net 表单时遇到了一些麻烦，然后我会发送一封带有附件的电子邮件。目前，我的表单可以打开一个对话框来浏览文件，但是从我机器上的某个位置选择文件后我收到错误消息。有人可以帮忙吗？谢谢。这是我用于附件按钮的代码：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim openDLG As New OpenFileDialog

    'openDLG.AddExtension = True
    openDLG.ReadOnlyChecked = True
    openDLG.Multiselect = True
    openDLG.Title = "Select the file(s) you want added to the message..."
    openDLG.Filter = "All Files (*.*)|*.*"

    If openDLG.ShowDialog = Windows.Forms.DialogResult.OK Then

        For Each item As String In openDLG.FileNames

            'Create a new System.NET.Mail.Attachment class instance for each file.
            attachToMsg = New System.Net.Mail.Attachment(item)

            'Then add the attachment to your message. You have to do this everytime you run the code
            'above.

            EmailMessage.Attachments.Add(attachToMsg)

        Next

        MsgBox("I have finished adding all of the selected files! You can do more if you want!")

    End If
End Sub 
```

按钮3代码：

```
Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
    Using message As New MailMessage()
        'set to the from, to and subject fields
        message.From = (New MailAddress(TextBox3.Text.ToString()))
        message.[To].Add(New MailAddress("NO.ONE@elsewhere.com"))
        message.Subject = "New commission query"

        'code the message body
        Dim MsgBody As String
        MsgBody = TextBox1.Text.ToString() & vbCr & _
                  TextBox2.Text.ToString() & vbCr & _
                  TextBox3.Text.ToString() & vbCr & _
                  ComboBox1.Text.ToString() & vbCr & _
                  ComboBox2.Text.ToString() & vbCr & _
                  ComboBox3.Text.ToString() & vbCr & _
                  ComboBox4.Text.ToString() & vbCr
        message.Body = MsgBody
        Dim client As New SmtpClient()
        client.Host = "mailhost"
        client.Send(message)
    End Using
        'display submitted box
        MessageBox.Show("Your request has been submitted!", "Congratulations!")
        'close form
        Me.Close()
  End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:28:09.487

将其放入临时文件（文件夹）中。这是一个从资源中提取文件，放入临时文件并打开它的示例。返回使用的临时文件夹。

```
 Public Overloads Function EXTRACT_FILE_FROM_RESOURCE(ByVal sFile As String, Optional ByVal andStart As Boolean = True) As String

        Dim assembly As System.Reflection.Assembly = System.Reflection.Assembly.GetExecutingAssembly()
        Dim root As String = assembly.GetName().Name
        Dim stream As System.IO.Stream = assembly.GetManifestResourceStream(root & "." & sFile)
        Dim buffer(Convert.ToInt32(stream.Length) - 1) As Byte
        stream.Read(buffer, 0, buffer.Length)
        stream.Close()
        Dim sFolderUsed As String = GetTempDirectory()
        Dim sFilePath As String

        sFilePath = IO.Path.Combine(sFolderUsed , sFile )

        Using f As New IO.FileStream(sFilePath , IO.FileMode.Create, IO.FileAccess.Write)
            f.Write(buffer, 0, buffer.Length)
            f.Close()
            File.SetAttributes(sFilePath , File.GetAttributes(sFilePath ) And Not FileAttributes.ReadOnly)
        End Using

        If andStart Then
            StartProcess(sFilePath )
        End If
        Return sFolderUsed 

    End Function

    Public Function GetTempDirectory() As String
        Dim pathx As String
        Do
            pathx = IO.Path.Combine(IO.Path.GetTempPath(), IO.Path.GetRandomFileName())
        Loop Until Not Directory.Exists(pathx)
        Directory.CreateDirectory(pathx)
        Return pathx

    End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:00:05.687

Button3_Click 代码中的“消息”对象和 Button1_Click 代码中的“EmailMessage”应该是同一个“消息”对象。

正如史蒂夫上面提到的......

> 您在哪里定义和初始化 EmailMessage 变量？当您尝试添加附件时，使用调试器并检查该变量是否为 Nothing – Steve 5 小时前

这都是您在哪里定义了 EmailMessage 对象的情况？

也许您应该在 FORM 级别范围内声明您的 EmailMessage 对象，然后修改您的 Button3 代码以访问相同的 EmailMessage 而不是在附件过程（Button1_Click 代码）中，您还需要在尝试修改之前“实例化”您的 EmailMessage 消息对象它的属性。

所以你会有类似的东西......

```
'Declarations section (form scope)

Dim TheEmailMessage As New MailMessage()

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

Dim openDLG As New OpenFileDialog

  'openDLG.AddExtension = True
  openDLG.ReadOnlyChecked = True
  openDLG.Multiselect = True
  openDLG.Title = "Select the file(s) you want added to the message..."
  openDLG.Filter = "All Files (*.*)|*.*"
  If openDLG.ShowDialog = Windows.Forms.DialogResult.OK Then
    For Each item As String In openDLG.FileNames
      'Create a new System.NET.Mail.Attachment class instance for each file.
      attachToMsg = New System.Net.Mail.Attachment(item)
      'Then add the attachment to your message. 
      'You have to do this everytime you run the code above
      TheEmailMessage.Attachments.Add(attachToMsg)
    Next
    MsgBox("I have finished adding all of the selected files! You can do more if you want!")
  End If
End Sub

Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
  Using TheEmailMessage

    'set to the from, to and subject fields
    TheEmailMessage.From = (New MailAddress(TextBox3.Text.ToString()))
    TheEmailMessage.[To].Add(New MailAddress("NO.ONE@elsewhere.com"))
    TheEmailMessage.Subject = "New commission query"

    'code the message body
    Dim MsgBody As String
    MsgBody = TextBox1.Text.ToString() & vbCr & _
      TextBox2.Text.ToString() & vbCr & _
      TextBox3.Text.ToString() & vbCr & _
      ComboBox1.Text.ToString() & vbCr & _
      ComboBox2.Text.ToString() & vbCr & _
      ComboBox3.Text.ToString() & vbCr & _
      ComboBox4.Text.ToString() & vbCr
    TheEmailMessage.Body = MsgBody
    Dim client As New SmtpClient()
    client.Host = "mailhost"
    client.Send(message)
  End Using
  'display submitted box
  MessageBox.Show("Your request has been submitted!", "Congratulations!")
  'close form
  Me.Close()
End Sub 
```

# ios - 向 UIImageView 添加文本，例如 Facebook 应用程序中的标记功能

> ID：14813420
> 
> 赞同：0
> 
> 时间：2013-02-11T13:53:42.610
> 
> 标签：ios, uiscrollview, tagging

我想实现与 facebook iPad 应用程序类似的功能，其中可以将文本添加到图像中，如下图所示。

![未缩放时的图像](../Images/ab9ef5112eefcd7eda2fc96780055ead.png)

我可以使用 imageview 中的文本添加这样的视图，但不知道如何在放大或缩小时保持添加视图的大小，如下图所示（如 mapview 中的图钉）？

![放大图像](../Images/69c74d5e1d815a3d6b13757e7781a727.png)

有人可以建议我在我的应用程序中实现上述 facebook 标记功能吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:23:14.637

你应该把你的图像放在一个滚动视图中以便能够缩放它。您的标签是添加在 [scrollView superView] 上的视图，因此您可以缩放图像并且您的标签保持相同的大小。然后通过一些逻辑和 UIView 的 convertPoint 方法，您应该在调整大小的图像中检索锚点的坐标。

```
- (CGPoint)convertPoint:(CGPoint)point toView:(UIView *)view 
```

这不是一个完全成熟的答案，但你应该有步骤。或许你还可以找到一些开源实现来使用或鼓舞人心

# php - Zend：黑屏

> ID：14813421
> 
> 赞同：0
> 
> 时间：2013-02-11T13:53:45.210
> 
> 标签：php, apache, zend-framework, zend-framework2, zend-session

对于我的工作，我必须编辑一个使用 Zend 框架创建的网站。当我将它们部署在我的测试服务器上并浏览到 index.php 时，我得到的只是一个空白屏幕。

我打开了 display_startup_errors 和 error_reporting 并且没有显示任何错误..

也许它与网站某些文件中的路径有关，因为它是由另一家公司创建的，该公司在他们将网站部署到实际服务器上后给了我文件。

我真的希望有人可以帮助我。我已经在互联网上进行了搜索，但即使有很多人遇到了我的问题，我也没有找到解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T01:13:14.247

如果您在 application.ini 文件中以标准 Zend 方式设置了 display_errors 和 error_reporting 并且仍然是白屏，那么您的问题甚至在您加载配置文件之前就开始了。

将这些值*临时*添加到 index.php 文件的开头

```
error_reporting(E_ALL ^ E_NOTICE);
ini_set('display_errors', 1); 
```

这应该告诉您 index.php 文件中的任何错误，例如路径设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T03:32:58.380

如果您的测试服务器是 Linux，则以下命令（或根据发行版的类似命令）将打印出最近的错误。

```
sudo tail -10 /var/log/httpd/error_log 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T10:23:24.690

我的空白屏幕是由于对我的日志文件的权限不正确（首先引用的是 application.log）。为了追踪它，我在驱动器中搜索了所有 .log 文件，然后按最新排序，错误消息是最新消息之一 - 无法使用模式“a”打开文件 - 所以我为我的站点设置了日志文件的权限使用 chmod 777 并且该站点有效。Zend 文件夹：应用程序；上市; 日志；图书馆; 所有文件都位于我网站的文档根目录下，并且日志文件夹中的文件分配了错误的权限（application.log 和 php_error.log）。

# java - 使用 Java 读取 HTTP 和（希望）自动化操作

> ID：14813427
> 
> 赞同：0
> 
> 时间：2013-02-11T13:54:11.340
> 
> 标签：java, apache, http, https, yahoo-finance

有没有办法在 java 中通过 HTTP 进行 get & put 调用？我还需要自动化任何用户输入，例如目标网页上的按钮单击（任何网页，不仅仅是雅虎财经）

**我尝试使用 apache commons library & 不能完全破解它：**

```
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

public class Fin {

    /**
     * @param args
     */
    public static void main(String[] args) {
        DefaultHttpClient httpclient = new DefaultHttpClient();

        HttpGet httpget = new HttpGet("http://finance.yahoo.com");
        try {
            HttpResponse response = httpclient.execute(httpget);
            HttpEntity entity = response.getEntity();
        } catch (Exception e) {
            e.printStackTrace();

        } finally {
            httpget.releaseConnection();
        }
    }

} 
```

我不断收到“java.net.ConnectException：连接被拒绝”，尽管我可以在浏览器中看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:08:14.277

如果你真的想自动化基于浏览器的交互，你可以更进一步并使用 Watij，它通过 JVM 运行浏览器并通过基于浏览器的 API 驱动（即你确定你想要按下的按钮，它实际上会*做*这个）

否则，像您确定的那样的库通常可以正常工作。您必须注意驱动请求的客户端 JavaScript 交互，并配置代理等（我怀疑这是您在上面的问题）

# regex - 如何使用正则表达式仅更改某些输入字段

> ID：14813429
> 
> 赞同：0
> 
> 时间：2013-02-11T13:54:19.753
> 
> 标签：regex

我有这些价值观

```
test1
test2
test3
test4
test6 
```

现在我想创建一个正则表达式，以便在输入 test1 或 test2 是输入的情况下，应将其更改为 Footest1 和 Footest2。如果有其他东西进来，它不应该被改变。

有人可以帮我吗。我不知道是否有可能用正则表达式解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:10:41.343

```
Set objRegExp = CreateObject("VBScript.RegExp")
objRegExp.Global = True
objRegExp.Pattern = "(test\d+)"
InputStr = "test1 test2"
Res = objRegExp.Replace(InputStr, "Foo$1") 
```

# php - WordPress 特定内容

> ID：14813434
> 
> 赞同：0
> 
> 时间：2013-02-11T13:54:33.030
> 
> 标签：php, wordpress

祝大家好日子，

我是wordpress的新手。我想问一下如何在不同的 div 中显示我的页面内容。但是当我尝试这段代码时。它不会显示任何东西，我的页面甚至不会加载。任何帮助将非常感激。谢谢！

`<?php if($_SERVER['REQUEST_URI'] == '/wordpress/?page_id=5'): ?>`

```
 <div style="width:960px; float:left;min-height:290px;word-wrap: break-word">
     <?php while ( have_posts() ) : the_post(); ?>
     <?php get_template_part( 'content', 'page' ); ?>   
     <?php endwhile; // end of the loop. ?>
   </div> 
```

`<?php else: ?>`

```
 <div style="width:640px; float:left;min-height:290px;word-wrap: break-word">
      <?php while ( have_posts() ) : the_post(); ?>
      <?php get_template_part( 'content', 'page' ); ?>
      <?php endwhile; // end of the loop. ?>
   </div> 
```

`<?php endif;?>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:01:55.420

如果您有权访问主题文件，请复制并粘贴`page.php`，将重复文件重命名为，页面的 slug 在`page-about.php`哪里。`about`同样，您可以有任意数量的`page`重复项。

要查找页面的 slug，请转到该`page editing`区域`Screen Option`> `View Slug`。

# solr - 从 cassandra 到 solr 的数据导入

> ID：14813435
> 
> 赞同：5
> 
> 时间：2013-02-11T13:54:33.887
> 
> 标签：solr, nosql, cassandra

你好朋友，我想知道我们可以通过任何方式将 solr 数据导入处理程序与 cassandra 一起使用。如果我能得到任何参考站点或示例将是很好的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:40:02.010

我会看一下关于[cassandra 与 solr 集成](http://www.datastax.com/dev/blog/cassandra-with-solr-integration-details)的 datastax 页面。另请查看这个[Github](https://github.com/tjake/Solandra)存储库，它是 cassandra 和 solr 的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-13T12:27:48.123

那个 gitHub 库很旧，只有 Datastax Enterprise 使用 Cassandra 与 Solr 的集成，但它不是免费的。

您可以看到 cassandra 的 Stargate-core 解决方案，但它使用 lucene 另一个是 Stratio Cassandra，它再次使用 Lucene

希望这可以帮助

问候阿西特

# reload - Trigger.io Reload - 缺少配置 - 无法重新加载我的实时应用程序

> ID：14813436
> 
> 赞同：1
> 
> 时间：2013-02-11T13:54:42.577
> 
> 标签：reload, trigger.io

我正在使用 Trigger.io Reload 为我的应用程序发送更新。

问题是当我转到 Trigger Toolkit 中的“重新加载”选项卡时，我的实时应用程序的配置未列出。

我单击“显示配置”并列出了过去 28 天的配置，但仅此而已。我最后一次发布并想重新加载的版本是大约 38 天前。

此外，列出的所有配置都没有显示任何活动用户。

帮助！配置去了哪里，如何取回它们以便更新我的用户？

我想知道这是否与最近的 Toolkit 更新有关，以支持多个开发人员和项目？其他人遇到过这个问题吗？

谢谢

# javascript - 在jquery ajax中将函数名作为字符串传递

> ID：14813441
> 
> 赞同：0
> 
> 时间：2013-02-11T13:54:51.540
> 
> 标签：javascript, ajax, jquery, asp.net-ajax

我不知道这个问题的标题是否正确，所以如果有人有更好的描述，请编辑它。

我有如下自定义属性的锚元素（更新：根据@Rune解决方案和@Shauna评论）

```
<a href="#" class="call-method" data-url="/Pages/mustafa/test_dialoge.aspx/GetDate" data-data="" data-success="handleResult">call me</a> 
```

其中 data-url、data-data、data-success 和 data-error 是自定义属性

然后我使用以下代码段将一些脚本附加到它

```
$('.call-method').live('click', function () {

    var obj = $(this);
    var options = new Object();

    options.url = obj.attr('data-url').toString();
    options.success = obj.attr('data-success');
    options.error = obj.attr('data-error');
    options.complete = obj.attr('data-complete');

    var _options = JSON.stringify(options);

    callServerGetMethod(_options);

});

  var callServerGetMethod = function (options) {
    var _options = new Object();
    var self = this;
    if (typeof options === 'string') {
      _options = JSON.parse(options, function (key, value) {
        if (typeof self[value] === 'function') {
          return eval(self[value]);
        }
        return value;
      });
    }

    $.ajax(
      {
        type: "post",
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        async: true,
        cache: false,
        error:
          function (xhr, ajaxOptions, thrownError) {
            console.log(xhr.statusText);
            console.log(thrownError);
          }
      }, $.extend(_options));
  }; 
```

现在我在浏览器控制台中收到以下错误

```
SyntaxError {popStackFrame: function}
arguments: Array[1]
get message: function () { [native code] }
get stack: function () { [native code] }
set message: function () { [native code] }
set stack: function () { [native code] }
type: "unexpected_token"
__proto__: Error
arguments: undefined
constructor: function SyntaxError() { [native code] }
name: "SyntaxError"
stack: undefined
type: undefined
__proto__: d 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:59:54.390

您将字符串而不是函数传递给 ajax 选项，这就是它不起作用的原因。

在您的示例中，您还不如写了

```
callServerGetMethod(url, data, function(msg) {
      alert("error " + msg);
    },
      function() {
        alert('comepleted');
      }
    , "handleSuccess"); 
```

注意最后一个参数是一个纯字符串

相反，您必须传递一个函数，最常见的方法是使用 JavaScript 而不是自定义属性附加函数。

Depending on how you treat the data attribute you might be able to use that attribute.

```
<a href="#" 
   class="call-method" 
   options="{url: "/Pages/mustafa/test_dialoge.aspx/GetDate",data:{param1: 1, param2: 2}, success:handleResult,error:doOnError}"
>call me</a>

var callServerGetMethod = function (options) {
    var self = this;
    if(typeof options === 'string'){
      options = JSON.parse(options,function (key, value) {
         if (typeof self[value] === 'function') {
            return self[value];
         }
         return value;
      });
    }
    $.ajax($.extend({type: "POST"},options);
}; 
```

if you can't use the data attribute like this then simply construct the options argument based on the attribute values

```
var call = function (url, data, onError, onComplete, onSuccess) {
    return callServerGetMethod('{"url":"' + url +'","data":' + data + ',"error":"' + onError + '","success":"' + onSuccess'"}');
} 
```

alternatively you can define a function to turn a string into an already defined function

```
var string2function = function string2function(functionName){
     if (typeof functionName === 'function') return functionName;

     if(typeof functionName === 'string'){
         if (typeof self[functionName] === 'function') {
            return self[functionName];
         }
     }
     return null;
} 
```

and then use it like this

options.success = string2function(obj.attr('data-success'));

Theoretically you could use `eval` on the attribute value however it's generally encouraged to avoid `eval`because of a lot of potential riscs associated with that funciton

# javascript - TinyMCE 添加切换样式

> ID：14813443
> 
> 赞同：7
> 
> 时间：2013-02-11T13:54:52.937
> 
> 标签：javascript, tinymce

我正在开发一个 TinyMCE 插件，我想要它做的一件事是注册用于切换自定义格式的命令/按钮。

例如，如果您单击 TinyMCE 中的粗体按钮，它将以粗体文本突出显示粗体按钮。深入研究源代码，我看到这是通过以下方式发生的：tinymce.EditorCommands.addCommands 认为我似乎无法弄清楚如何复制它。TinyMCE 的文档也很糟糕 =(

因此，给定 customFormat，我希望能够通过我的插件设置一个按钮，当应用 customFormat 时，它会像工具栏上的粗体、斜体和其他此类按钮一样显示。单击我的 customFormat 会打开/关闭该格式。我可以通过“addCommand”和“addButton”轻松完成工具，但它没有像 Bold 和其他人那样的状态跟踪。

显示我当前的非工作尝试（此代码在我的插件创建方法的 init 中）：

```
tinymce.EditorCommands.call('addCommands', {
   'MyFormat' :  function(name) {
      ed.formatter.toggle("customFormat");
    }
},'exec');

tinymce.EditorCommands.call('addCommands', {
   'MyFormat' : function(name) {
       return ed.formatter.match('customFormat');
    } 
},'state');

ed.addButton('customformat', {cmd : 'MyFormat'}); 
```

这里是 addCommands 的“文档”的链接： [http ://www.tinymce.com/wiki.php/API3:method.tinymce.EditorCommands.addCommands](http://www.tinymce.com/wiki.php/API3:method.tinymce.EditorCommands.addCommands)

在环顾四周后，我发现这似乎很完美： [http ://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.addQueryStateHandler](http://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.addQueryStateHandler)

但是当我实现代码时，它不会改变按钮的状态：

```
 ed.addCommand('MyFormat', function(ui, v) {
    ed.formatter.toggle("thoughtFormat");
  });

  ed.addQueryStateHandler('MyFormat', function() { 
      return ed.formatter.match('thoughtFormat');
  });

  ed.addButton('myformat', {cmd : 'MyFormat'}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-23T18:52:58.687

如果有人不想以“插件”方式进行操作，这里是`TinyMCE 4.x`.

首先，您需要定义一个自定义格式：

```
formats: {
   custom_format: {inline: 'span', styles: {color: "red"}, attributes: {class: 'some_css_class'}}
} 
```

然后你必须在你的工具栏上添加一个按钮：

```
toolbar: "mybutton", 
```

接下来，您需要设置按钮，以便它切换格式：

```
setup: function(editor) {
        editor.addButton('mybutton', {
            text: 'My button',
            icon: false,
            onclick: function() {
                tinymce.activeEditor.formatter.toggle('custom_format')
            }
        });
} 
```

此外，如果您希望编辑器将按钮的状态设置为指示当前节点的格式，请自动将其添加到`setup`函数中：

```
onPostRender: function() {
    var ctrl = this;                
    editor.on('NodeChange', function(e) {
        ctrl.active(e.element.className == "some_css_class")
    });
} 
```

您的`tinymce.init`函数应如下所示：

```
tinymce.init({
    selector: "textarea",
    formats: {
       // Other formats...
       custom_format: {inline: 'span', styles: {color: "red"}, attributes: {class: 'some_css_class'}}
    }
    // Other default toolbars
    toolbar_n: "mybutton",

    // Finally, setup your button
    setup: function(editor) {
        editor.addButton('mybutton', {
            text: 'My Button',
            icon: false,
            onclick: function() {
                tinymce.activeEditor.formatter.toggle('custom_format')
            },
            onPostRender: function() {
                var ctrl = this;                
                editor.on('NodeChange', function(e) {
                    ctrl.active(e.element.className == "some_css_class")
                });
            }
        });
    } 
```

请注意`class`我添加到自定义格式中的属性。这种方法使我可以在单独的样式表文件中定义我的自定义样式，并使我的标记尽可能干燥（没有内联样式！）。将选项指向`content_css`您的样式表，您会很高兴的。然而，由于我使用 Rails 作为后端和 BatmanJS 作为前端（我对后者相当陌生），我无法弄清楚资产路由是如何工作的，最终添加了我的自定义样式到 tinyMCE 皮肤本身的默认内容样式表文件（位于`skins/SKIN_NAME/content.min.css`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T01:04:39.427

感谢 Thariama 提供的见解，让我能够更深入地挖掘，最终弄清楚如何做到这一点。我不确定它是“正确的方式”，但正如我所说，TinyMCE 拥有可以想象的最糟糕的文档。

对我来说，关键是使用 setActive 技巧来挂钩 onNodeChange 事件。带有自定义按钮的完整示例插件，当光标所在的位置出现该格式时，该按钮将激活：

```
(function() {
   tinymce.create('tinymce.plugins.CoolPlugin', {  
   init : function(ed, url) {   

      ed.addCommand('MyFormat', function(ui, v) {
        ed.formatter.toggle("myFormat");
      });

      ed.addButton("coolformat", {
        title : 'MyFormat Tooltip', 
        cmd : 'MyFormat',
        image: url + '/coolformat.png',
      });

      ed.onNodeChange.add(function(ed, cm, n) {
        active = ed.formatter.match('myFormat');
        control = ed.controlManager.get('coolformat').setActive(active);
      });

      ed.onInit.add(function(ed, e) {
        ed.formatter.register('myFormat', 
           {inline: 'span', classes : ['cool'] } );
      });
  }
  });

  // Register plugin
  tinymce.PluginManager.add('cool', tinymce.plugins.CoolPlugin);
})(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:43:16.037

这是一个例子：

```
ed.controlManager.get('my_control_element').setActive(true); // could be bold or whatever 
```

# asp.net-mvc - LINQ to SQL 的“子句”

> ID：14813444
> 
> 赞同：2
> 
> 时间：2013-02-11T13:54:55.603
> 
> 标签：asp.net-mvc, linq, entity-framework

我想使用 SQL SERVER 的“In 子句”之类的东西。这是我的模型：

```
public partial class StationEvaluationBooks
{
    public int StationEvaluationBookID { get; set; }
    public Nullable<int> StationEvaluationID { get; set; }

    public virtual StationEvaluation StationEvaluation { get; set; }
    ...
 }
public partial class StationEvaluation
{
    public StationEvaluation()
    {
        this.StationEvaluationBooks = new HashSet<StationEvaluationBooks>();
    }
    public int StationEvaluationID { get; set; }
    public virtual ICollection<StationEvaluationBooks> StationEvaluationBooks { get; set; }
    ...
 } 
```

我使用以下代码通过 LINQ 实现“In 子句”，但出现错误：

```
 StationsEntities db = new StationsEntities();

        var stationevaluations = db.StationEvaluation;
       //some conditions:
        stationevaluations = stationevaluations.Where(/*condition*/);
       ..

        var result = from c in db.StationEvaluationBooks
                       where stationevaluations.Contains(c.StationEvaluationID)
                       select c; 
```

错误：“System.Data.Entity.DbSet”不包含“包含”的定义，并且最佳扩展方法重载“System.Linq.ParallelEnumerable.Contains(System.Linq.ParallelQuery, TSource)”有一些无效参数

**编辑：** 我想在 stationevaluations 变量中获取与所选评估相关的书籍。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T14:06:21.890

获取与所选电台相关的书籍：

```
var ids = db.StationEvaluation.Where(/*condition*/)
            .Select(s => s.StationEvaluationID)
            .ToList();

var result = from b in db.StationEvaluationBooks
             where b.StationEvaluationID.HasValue &&
                   ids.Contains(b.StationEvaluationID.Value)
             select b; 
```

或最佳选择

```
var result = db.StationEvaluation.Where(/*condition*/)
               .SelectMany(s => s.StationEvaluationBooks); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:02:21.970

根据您最近的更新，这个怎么样：

```
var stationEvaluations = db.StationEvaluation.Where(/*condition*/)
                                             .Select(st => st.StationEvaluationID);

var result = from c in db.StationEvaluationBooks
                       where stationEvaluations.Contains(c.StationEvaluationID)
                       select c; 
```

# java - 一次在 SQLite 数据库中输入 2 条相同的记录 - Android

> ID：14813445
> 
> 赞同：1
> 
> 时间：2013-02-11T13:54:55.753
> 
> 标签：java, android, sqlite, countdown

每个琐事游戏结束后，`Results`页面显示。大约 20 秒后，即在游戏中每个问题在您的时间用完之前给您的时间，然后进入下一个问题，`Results`页面重新加载。然后当你转到`Highscores`页面时，分数已经输入了两次。所以在我下面的课堂上有些东西搞砸了，`QuestionView`但我找不到这个错误。

如果需要任何进一步的信息，请告诉我。提前谢谢你！

结果.java

```
 total_score = dh.calculateTotalScore(score, percentage);
    if(dh.getLowest() == -1) {
        dh.insert(score, percentage, total_score, category);
    } else {
        dh.delete(dh.getLowest());
        dh.insert(score, percentage, total_score, category);
    } 
```

数据库助手.java

```
public long insert(long score, int percentage, long total_score, String category) {
    ContentValues values = new ContentValues();
    values.put(SCORE, score);
    values.put(PERCENTAGE, percentage);
    values.put(TOTAL_SCORE, total_score);
    values.put(CATEGORY, category);

    return db.insert(TABLE, null, values);
}

public void delete(long lowScore) {
    lowScore = getLowest();
    db.delete(TABLE, TOTAL_SCORE + "=" + lowScore, null);
}

public long getLowest() {
    Cursor c = db.rawQuery("SELECT * FROM " + TABLE + " ORDER BY " + TOTAL_SCORE, null);
    long count = c.getCount();
    long lowScore = -1;
    if(count == 10) {
        c.moveToLast();
        lowScore = c.getInt(c.getColumnIndex(TOTAL_SCORE));
    }
    return lowScore;
}

public long calculateTotalScore(long score, int percentage) {
    long i;
    return i = (percentage * 1000) + score;
} 
```

QuestionView.java

```
public class QuestionView extends Activity  {

    int correctAnswers = 0;
    int wrongAnswers = 0;
    int answer = 0;
    int i = 0;

    long score = 0;

    long startTime = 20000;
    long interval = 1000;
    long points;

    boolean timerHasStarted = false;

    String category;

    Button answer1, answer2, answer3, answer4;
    TextView question, pointCounter, questionNumber, timeCounter;

    ArrayList<Question> queries;
    Timer cdTimer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.questionviewmain);

        answer1 = (Button)findViewById(R.id.answer1);
        answer2 = (Button)findViewById(R.id.answer2);
        answer3 = (Button)findViewById(R.id.answer3);
        answer4 = (Button)findViewById(R.id.answer4);

        question = (TextView)findViewById(R.id.question);

        category = getIntent().getStringExtra("category");
        queries = getIntent().getParcelableArrayListExtra("queries");

        pointCounter = (TextView)findViewById(R.id.timer);
        questionNumber = (TextView)findViewById(R.id.timeElapsedView);
        timeCounter = (TextView)findViewById(R.id.timeCounter);

        cdTimer = new Timer(startTime, interval);

        loadQuestion();
    }

    public void loadQuestion() {

        if(i == 10) {

            endQuiz();

        } else {

            if(!timerHasStarted) {
                cdTimer.start();
                timerHasStarted = true;
            } else {
                cdTimer.start();
                timerHasStarted = false;
            }

            answer = queries.get(i).getCorrectAnswer();

            question.setText(queries.get(i).getQuery());

            answer1.setText(queries.get(i).getA1());
            answer2.setText(queries.get(i).getA2());
            answer3.setText(queries.get(i).getA3());
            answer4.setText(queries.get(i).getA4());

            answer1.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    queries.get(i).setSelectedAnswer(0);
                    if(answer == 0) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });

            answer2.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    queries.get(i).setSelectedAnswer(1);
                    if(answer == 1) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });

            answer3.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    queries.get(i).setSelectedAnswer(2);
                    if(answer == 2) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });

            answer4.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    queries.get(i).setSelectedAnswer(3);
                    if(answer == 3) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });
        } 
    }

    public ArrayList<Question> getQueries() {
        return queries;
    }

    public void nextQuestion() {
        score = score + points;
        i++;
        loadQuestion();
    }

    public class Timer extends CountDownTimer {

        public Timer(long startTime, long interval) {
            super(startTime, interval);
        }

        @Override
        public void onFinish() {
            if(i >= 9) {
                cdTimer.cancel();
                endQuiz();
            } else {
                wrongAnswers++;
                nextQuestion();
            }
        }

        @Override
        public void onTick(long millisUntilFinished) {
            timeCounter.setText("Time remaining: " + (millisUntilFinished / 100));
            points = (millisUntilFinished / 100) / 2;
            pointCounter.setText("Points remaining: " + points);
            if(i < 10) {
                questionNumber.setText("Question " + (i + 1) + " of 10");
            }
        }
    }

    public void endQuiz() {
        Intent intent = new Intent(QuestionView.this, Results.class);
        intent.putExtra("correctAnswers", correctAnswers);
        intent.putExtra("wrongAnswers", wrongAnswers);
        intent.putExtra("score", score);
        intent.putParcelableArrayListExtra("queries", queries);
        intent.putExtra("category", category);
        startActivity(intent);
    }
} 
```

**修复：**

**改变：**

```
if(i == 10) {
        endQuiz();
    } 
```

**...对此：**

```
if(i == 10) {
        cdTimer.cancel();
        endQuiz();
    }** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:12:23.423

可能`endQuiz`会被调用两次。只有当您在计时器结束之前回答最后一个问题时。

因为，当您回答最后一个问题时，我没有看到您取消计时器。所以，即使你已经回答了，计时器仍然在滴答作响，当它到时，它会调用`endQuiz`.

如果您不回答最后一个问题并让时间用完，那么结果将只插入一次，因为`endQuiz`只会从计时器调用一次。

# java - Hibernate 级联合并与非持久对象

> ID：14813450
> 
> 赞同：1
> 
> 时间：2013-02-11T13:55:16.157
> 
> 标签：java, hibernate, jpa, hibernate-cascade

我的项目中有以下结构：

```
public class A {
    @Cascade({org.hibernate.annotations.CascadeType.SAVE_UPDATE, org.hibernate.annotations.CascadeType.PERSIST,
        org.hibernate.annotations.CascadeType.REFRESH, org.hibernate.annotations.CascadeType.MERGE})
    @OneToMany(fetch = FetchType.LAZY)
    @JoinColumn(name = "a_id")
    private List<B> bs;
}

public class B {
    @Cascade(org.hibernate.annotations.CascadeType.ALL)
    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @JoinColumn(name = "b_id")
    private C c;
}

public class C {
    @ManyToMany(fetch = FetchType.EAGER, targetEntity = TjenesteFraIN.class,
        cascade = { CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})
    @JoinTable(name = "c_d",
        joinColumns = @JoinColumn(name = "c_id"),
        inverseJoinColumns = @JoinColumn(name = "d_id"))
    private List<D> ds;
}

public class D {
    ...
} 
```

然后，在一个场景中，我有一个分离的 A 对象，引用了一个分离的 B 对象，而 B 对象又引用了一个分离的 C 对象，它引用了几个 D 对象。（我使用的是 JMS，所以它们真的很分离）。像这样：

```
final A a = getA(123); //load A-object from database
final C c = a.getSpecialC();

c.addD(getD(1)); //get Ds from database
c.addD(getD(2));

//Serialize A and send JMS-call to store the A

//On the other side, deserialize A, and then call

public A mergeA(final A a) {
    return getSession(false).merge(a);
} 
```

现在，分离的 A 将与 A 的数据库表示合并，对于 B 和 C 也是如此，但是从 C 到 D 的新引用会发生什么？我在实践中看到它不起作用，c_d 连接表中没有存储任何内容，但我不明白为什么。是由于 Hibernate/JPA 的限制，还是我的配置遗漏了什么？

更新：

通过使用调试器，我能够在 C 对象上显式地 getSession().merge()，然后它对 D 的引用被存储在数据库中。仍然不太明白为什么 Hibernate 级联不会为我处理这个问题，但会继续挖掘。

# c# - 通过 LDAP 连接到 Active Directory

> ID：14813452
> 
> 赞同：49
> 
> 时间：2013-02-11T13:55:26.837
> 
> 标签：c#, active-directory

我想用 C# 连接到我们的本地 Active Directory。

我找到[了这个很好的文档](http://ianatkinson.net/computing/adcsharp.htm)。

但我真的不知道如何通过 LDAP 进行连接。

你们中有人可以解释如何使用所要求的参数吗？

示例代码：

```
 static DirectoryEntry createDirectoryEntry()  
  {  
     // create and return new LDAP connection with desired settings  

     DirectoryEntry ldapConnection     = new DirectoryEntry("rizzo.leeds-art.ac.uk");  
     ldapConnection.Path               = "LDAP://OU=staffusers,DC=leeds-art,DC=ac,DC=uk";  
     ldapConnection.AuthenticationType = AuthenticationTypes.Secure;  
     return ldapConnection;  
  } 
```

我只有 Active Directory 服务器的主机名和 IP 地址。`DC=xxx,DC=xx`等等是什么意思？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-02-11T14:48:56.433

DC 是您的域。如果您想连接到域 example.com，那么您的 dc 是：DC=example,DC=com

您实际上不需要域控制器的任何主机名或 IP 地址（可能有很多）。

想象一下，您正在连接到域本身。因此，要连接到域 example.com，您可以简单地编写

```
DirectoryEntry directoryEntry = new DirectoryEntry("LDAP://example.com"); 
```

你完成了。

您还可以指定用于连接的用户和密码：

```
DirectoryEntry directoryEntry = new DirectoryEntry("LDAP://example.com", "username", "password"); 
```

还要确保始终以大写形式编写 LDAP。我遇到了一些麻烦和奇怪的异常，直到我在某个地方读到我应该尝试用大写字母写它并解决了我的问题。

该`directoryEntry.Path`属性允许您更深入地了解您的领域。因此，如果您想在特定 OU（组织单位）中搜索用户，您可以在此处进行设置。

```
DirectoryEntry directoryEntry = new DirectoryEntry("LDAP://example.com");
directoryEntry.Path = "LDAP://OU=Specific Users,OU=All Users,OU=Users,DC=example,DC=com"; 
```

这将匹配以下 AD 层次结构：

*   com
    *   例子
        *   用户
            *   所有用户
                *   特定用户

只需从最深到最高编写层次结构。

[现在你可以做很多事情](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C)

例如，通过帐户名称搜索用户并获取用户的姓氏：

```
DirectoryEntry directoryEntry = new DirectoryEntry("LDAP://example.com");
DirectorySearcher searcher = new DirectorySearcher(directoryEntry) {
    PageSize = int.MaxValue,
    Filter = "(&(objectCategory=person)(objectClass=user)(sAMAccountName=AnAccountName))"
};

searcher.PropertiesToLoad.Add("sn");

var result = searcher.FindOne();

if (result == null) {
    return; // Or whatever you need to do in this case
}

string surname;

if (result.Properties.Contains("sn")) {
    surname = result.Properties["sn"][0].ToString();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T14:04:38.347

ldapConnection 是服务器地址： ldap.example.com Ldap.Connection.Path 是您喜欢以 LDAP 格式插入的 ADS 内的路径。

> OU=Your_OU,OU=other_ou,dc=example,dc=com

您从最深的 OU 开始，回到 AD 的根目录，然后为每个域部分添加 dc=X，直到拥有包括顶级域在内的所有内容

现在我错过了一个用于身份验证的参数，这与用户名的路径相同

> CN=用户名,OU=用户,DC=示例,DC=com

[LDAP 简介](http://ldapman.org/articles/intro_to_ldap.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-23T19:22:29.267

如果您的电子邮件地址是“myname@mydomain.com”，请尝试更改 createDirectoryEntry()，如下所示。

XYZ 是一个可选参数，如果它存在于 mydomain 目录中

```
static DirectoryEntry createDirectoryEntry()
{
    // create and return new LDAP connection with desired settings
    DirectoryEntry ldapConnection = new DirectoryEntry("myname.mydomain.com");
    ldapConnection.Path = "LDAP://OU=Users, OU=XYZ,DC=mydomain,DC=com";
    ldapConnection.AuthenticationType = AuthenticationTypes.Secure;
    return ldapConnection;
} 
```

这将基本上检查 com -> mydomain -> XYZ -> Users -> abcd

主要功能如下所示：

```
try
{
    username = "Firstname LastName"
    DirectoryEntry myLdapConnection = createDirectoryEntry();
    DirectorySearcher search = new DirectorySearcher(myLdapConnection);
    search.Filter = "(cn=" + username + ")";
    .... 
```

# c# - 如何在 asp.net 的 powerpoint 中显示辅助 y 轴和线系列

> ID：14813453
> 
> 赞同：1
> 
> 时间：2013-02-11T13:55:30.657
> 
> 标签：c#, asp.net, powerpoint

我对使用 asp.net 将图表和网格导出到 ppt 感到震惊。在下面的代码中，我能够显示图表但不能显示网格。我的图表由两个条形系列和两个线系列组成，我无法显示，线系列应与辅助 y 轴（右侧）绑定。在这里，我提供了我的代码，因此非常感谢任何修改或任何示例代码。这是使用 Microsoft.Office.Interop.PowerPoint 开发的

在 aspx.cs 页面下面的代码中

```
 try
        {
            bool bAssistantOn;
            Microsoft.Office.Interop.PowerPoint.Application objApp;
            Presentations objPresSet;
            _Presentation objPres;
            Slides objSlides;
            _Slide objSlide;
            TextRange objTextRng;
            Microsoft.Office.Interop.PowerPoint.Shapes objShapes;
            Microsoft.Office.Interop.PowerPoint.Shape objShape;
            SlideShowWindows objSSWs;
            SlideShowTransition objSST;
            SlideShowSettings objSSS;
            Microsoft.Office.Interop.PowerPoint.SlideRange objSldRng;
            Microsoft.Office.Interop.Graph.Chart objChart;
            Microsoft.Office.Interop.Graph.DataSheet dataSheet;

            //Create a new presentation based on a template.
            objApp = new Microsoft.Office.Interop.PowerPoint.Application();
            objApp.Visible = MsoTriState.msoTrue;
            objPresSet = objApp.Presentations;
            objPres = objPresSet.Open(@"D:\Template.pptx", MsoTriState.msoFalse, MsoTriState.msoTrue, MsoTriState.msoTrue);
            //.potx file is the template file of powerpoint.
            //Take a template file remove all it's slides and save it.
            //Then give it's physical path instead of it.
            objSlides = objPres.Slides;

            //Build Slide #1
            //Add text to the slide title, format the text. Also add a chart to the
            //slide and change the chart type to a 3D pie chart.
            objSlide = objSlides.Add(1, Microsoft.Office.Interop.PowerPoint.PpSlideLayout.ppLayoutTitleOnly);
            objTextRng = objSlide.Shapes[1].TextFrame.TextRange;
            objTextRng.Text = "My Chart";
            objTextRng.Font.Name = "Comic Sans MS";
            objTextRng.Font.Size = 48;

            objChart = (Microsoft.Office.Interop.Graph.Chart)objSlide.Shapes.AddOLEObject(150, 150, 480, 320, "MSGraph.Chart.8", "", MsoTriState.msoFalse, "", 0, "", MsoTriState.msoFalse).OLEFormat.Object;
            dataSheet = objChart.Application.DataSheet;

            // objChart.Legend.LegendEntries();
            //objChart.Axes(Microsoft.Office.Interop.Graph.XlAxisType.xlValue, Microsoft.Office.Interop.Graph.XlAxisGroup.xlSecondary);

            for (int i = 1; i < ds.Tables[0].Rows.Count + 1; i++)
            {
                if (i == 1)
                {
                    for (int j = 0; j < ds.Tables[0].Rows.Count; j++)
                        dataSheet.Cells[i, j + 1] = ds.Tables[0].Rows[j]["ProductGroup"];// x-axis values
                }
                else if (i == 2)
                {
                    //objChart.ChartType = Microsoft.Office.Interop.Graph.XlChartType.xlBarOfPie;

                    dataSheet.Cells[i, 1] = "ActualsQTD"; // Legend 1
                    for (int j = 1; j <= ds.Tables[0].Rows.Count; j++)
                    {
                        dataSheet.Cells[i, j + 1] = Convert.ToInt32(ds.Tables[0].Rows[j - 1]["ActualsQTD"])/1000;
                    }
                }
                else if (i == 3)
                {
                    //objChart.ChartType = Microsoft.Office.Interop.Graph.XlChartType.xlBarOfPie;

                    dataSheet.Cells[i, 1] = "ForecastQTD"; // Legend 2
                    for (int j = 1; j <= ds.Tables[0].Rows.Count; j++)
                    {
                        dataSheet.Cells[i, j + 1] = Convert.ToInt32(ds.Tables[0].Rows[j - 1]["ForecastQTD"])/1000;
                    }
                }
                else if (i == 4)
                {
                    //objChart.ChartType = Microsoft.Office.Interop.Graph.XlChartType.xlLine;

                    dataSheet.Cells[i, 1] = "QTDRatio"; // Legend 3
                    for (int j = 1; j <= ds.Tables[0].Rows.Count; j++)
                    {
                        dataSheet.Cells[i, j + 1] = ds.Tables[0].Rows[j-1]["QTDRatio"];
                    }
                }
                else if (i == 5)
                {
                    //objChart.ChartType = Microsoft.Office.Interop.Graph.XlChartType.xlLine;

                    dataSheet.Cells[i, 1] = "Target Attain"; // Legend 4
                    for (int j = 1; j <= ds.Tables[0].Rows.Count; j++)
                    {
                        dataSheet.Cells[i, j + 1] = ds.Tables[0].Rows[j-1]["Target Attain"];
                    }
                }

                objChart.Application.Update();
            }
            //objChart.ChartType = Microsoft.Office.Interop.Graph.XlChartType.xlLine; //changing the graph type : by default pie chart
            objChart.SeriesCollection(2);
            objChart.Legend.Position = Microsoft.Office.Interop.Graph.XlLegendPosition.xlLegendPositionBottom;
            objChart.HasTitle = true;
            objChart.ChartTitle.Text = "Chart";

            ///Build Slide #2:
            ///Change the background color of this slide only. Add a text effect to the slide
            ///and apply various color schemes and shadows to the text effect.
            objSlide = objSlides.Add(2, PpSlideLayout.ppLayoutBlank);
            objSlide.FollowMasterBackground = MsoTriState.msoFalse;
            objShapes = objSlide.Shapes;
            objShape = objShapes.AddTextEffect(MsoPresetTextEffect.msoTextEffect27, "The End", "Impact", 96, MsoTriState.msoFalse, MsoTriState.msoFalse, 230, 200);

            //Modify the slide show transition settings for all slides in
            //the presentation.
            int[] SlideIdx = new int[2];
            for (int i = 0; i < 2; i++) SlideIdx[i] = i + 1;
            objSldRng = objSlides.Range(SlideIdx);
            objSST = objSldRng.SlideShowTransition;
            objSST.AdvanceOnTime = MsoTriState.msoTrue;
            objSST.AdvanceTime = 3;
            objSST.EntryEffect = PpEntryEffect.ppEffectBoxOut;

            //Prevent Office Assistant from displaying alert messages:
            ////bAssistantOn = objApp.Assistant.On;
            ////objApp.Assistant.On = false;

            //Run the Slide show
            //objSSS = objPres.SlideShowSettings;
            //objSSS.StartingSlide = 1;
            //objSSS.EndingSlide = 2;![enter image description here][1]
            //objSSS.Run();

            //Wait for the slide show to end.
            ////objSSWs = objApp.SlideShowWindows;
            ////while (objSSWs.Count >= 1) System.Threading.Thread.Sleep(100);

            //Reenable Office Assisant, if it was on:
            ////if (bAssistantOn)
            ////{
            ////    objApp.Assistant.On = true;
            ////    objApp.Assistant.Visible = false;
            ////}

            //Close the presentation without saving changes and quit PowerPoint.
            objPres.SaveAs(@"D:\Sample", PpSaveAsFileType.ppSaveAsPresentation, MsoTriState.msoTrue);
            //"D:\Sample" is the location where the ppt will be saved.
            objPres.Close();
            objApp.Quit();
        }
        catch (Exception ex)
        {
            System.Text.StringBuilder sb = new System.Text.StringBuilder();

            sb.Append("<script type = 'text/javascript'>");

            sb.Append("window.onload=function(){");

            sb.Append("alert('");

            sb.Append(ex.Message);

            sb.Append("')};");

            sb.Append("</script>");

            ClientScript.RegisterClientScriptBlock(this.GetType(), "alert", sb.ToString());

       } 
```

[![我的图表](../Images/d02b76040976e79e11af110858c9ed32.png)](https://i.stack.imgur.com/VmkMT.jpg)

通过上面的代码，我只能显示条形图，但不能同时显示带有辅助 y 轴的条形和线系列。

提前致谢。

# c# - 如何从视频中提取关键帧？

> ID：14813454
> 
> 赞同：0
> 
> 时间：2013-02-11T13:55:36.423
> 
> 标签：c#, linux, video, mono

我需要从 mp4-video 中提取所有[关键帧（I 帧）](http://en.wikipedia.org/wiki/Video_compression_picture_types)作为[Bitmaps](http://msdn.microsoft.com/ru-ru/library/system.drawing.bitmap.aspx)数组。

我尝试了不同的 ffmpeg 包装器：[FFMpeg.NET](http://ffmpegdotnet.codeplex.com/)、[FFMpeg-Sharp](http://code.google.com/p/ffmpeg-sharp/)、[FFLib.NET](http://www.intuitive.sk/fflib/)。但是所有这些项目都只能在 Windows 下工作（也许我错了，但我无法在我的 linux 机器下编译它）。

那么，如何在 linux 下使用 Mono 解决这个问题呢？

# qt - 架构 x86_64 的未定义符号 - 可视化工具包编译 (VTK - QT)

> ID：14813459
> 
> 赞同：0
> 
> 时间：2013-02-11T13:55:47.110
> 
> 标签：qt, vtk, itk

我正在开发 QT 中的应用程序，基于几个现有工具的组合，例如：ITK、VTK、DCMTK 和 SoQT（以及其他......）。

我正在尝试编译这整个混乱，经过几次尝试，我忍不住得到了这个错误：

* * *

```
Undefined symbols for architecture x86_64:
  "vtkPolyDataReader::New()", referenced from:
      ModelBuildingControl::extractProfileModels(unsigned int)in ModelBuildingControl.cpp.o
      ModelBuildingControl::loadModel()      in ModelBuildingControl.cpp.o
      vtkPolydata2Points::vtkPolydata2Points()in vtkPolydata2Points.cpp.o
      vtkPolydata2Points::vtkPolydata2Points()in vtkPolydata2Points.cpp.o
  "vtkPolyDataReader::GetOutput()", referenced from:
      ModelBuildingControl::extractProfileModels(unsigned int)in ModelBuildingControl.cpp.o
      vtkPolydata2Points::readSurfaceFromFile(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)in vtkPolydata2Points.cpp.o
  "vtkPolyDataReader::SetOutput(vtkPolyData*)", referenced from:
      ModelBuildingControl::loadModel()      in ModelBuildingControl.cpp.o
  "vtkStructuredPointsReader::New()", referenced from:
      ModelBuildingControl::transformVolume()       in ModelBuildingControl.cpp.o
      ModelBuildingControl::transformAtlasInNaturalCOS(QString, QString) in ModelBuildingControl.cpp.o
      ModelBuildingControl::landmarkDist()       in ModelBuildingControl.cpp.o
  "vtkStructuredPointsReader::GetOutput()", referenced from:
      ModelBuildingControl::transformVolume()       in ModelBuildingControl.cpp.o
      ModelBuildingControl::transformAtlasInNaturalCOS(QString, QString) in ModelBuildingControl.cpp.o
  "vtkStructuredPointsWriter::New()", referenced from:
      ModelBuildingControl::transformVolume()       in ModelBuildingControl.cpp.o
      ModelBuildingControl::transformAtlasInNaturalCOS(QString, QString) in ModelBuildingControl.cpp.o
      ModelBuildingControl::buildAtlas()       in ModelBuildingControl.cpp.o
      ModelBuildingControl::exportPatientVolumes()       in ModelBuildingControl.cpp.o
  "vtkWriter::SetInput(vtkDataObject*)", referenced from:
      ModelBuildingControl::transformVolume()       in ModelBuildingControl.cpp.o
      ModelBuildingControl::transformAtlasInNaturalCOS(QString, QString) in ModelBuildingControl.cpp.o
      ModelBuildingControl::warpLensAtlasIntoPatients(std::basic_ofstream<char, std::char_traits<char> >&, vtkPolyData*, QString)in ModelBuildingControl.cpp.o
      ModelBuildingControl::warpScleraAtlasIntoPatients(std::basic_ofstream<char, std::char_traits<char> >&, vtkPolyData*, QString)in ModelBuildingControl.cpp.o
      ModelBuildingControl::landmarkDist()       in ModelBuildingControl.cpp.o
      ModelBuildingControl::buildAtlas()       in ModelBuildingControl.cpp.o
      ModelBuildingControl::exportPatientVolumes()       in ModelBuildingControl.cpp.o
      ...
  "vtkPolyDataWriter::New()", referenced from:
      ModelBuildingControl::warpLensAtlasIntoPatients(std::basic_ofstream<char, std::char_traits<char> >&, vtkPolyData*, QString)in ModelBuildingControl.cpp.o
      ModelBuildingControl::warpScleraAtlasIntoPatients(std::basic_ofstream<char, std::char_traits<char> >&, vtkPolyData*, QString)in ModelBuildingControl.cpp.o
      ModelBuildingControl::landmarkDist()       in ModelBuildingControl.cpp.o
      Points2vtkPolydata::Points2vtkPolydata()in Points2vtkPolydata.cpp.o
      Points2vtkPolydata::Points2vtkPolydata()in Points2vtkPolydata.cpp.o
  "vtkStructuredPointsReader::SetOutput(vtkStructuredPoints*)", referenced from:
      ModelBuildingControl::landmarkDist()       in ModelBuildingControl.cpp.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

* * *

关于我正在使用的软件版本，它们是：ITK：4.3.1 VTK：5.10.1 SoQT：1.5.1 DCMTK：3.6.1（[2012-11-02](http://dicom.offis.de/download/dcmtk/snapshot/)的快照）

到目前为止，我认为该错误与库 VTK 库的动态和静态链接有关，因为程序正在寻找的所有文件都已经存在！

您为解决我的问题提供的任何启发都将受到欢迎！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:18:53.360

看起来您没有链接到像 vtkIO 这样的一些 vtk 库。在 CMake 中，您可以通过将 ${VTK_LIBRARIES} 添加到您正在编译的应用程序的 TARGET_LINK_LIBRARIES() 来避免指定每个 vtk 库。

# templates - EmberJs：如何使用其“数据模板名称”呈现模板

> ID：14813460
> 
> 赞同：2
> 
> 时间：2013-02-11T13:55:48.830
> 
> 标签：templates, ember.js, nested

我有一个模板文件，它只生成一些 html（所以没有 App.ListView）。例如假设我有一个定义如下的“列表”：

```
<script type="text/x-handlebars" data-template-name="list"> 
    <div class="list">
    </div>
</script> 
```

现在的问题是如何在另一个模板中定位这个模板

```
{{view "list" contextBinding="this"}} 
```

这是一个[jsfiddle](http://jsfiddle.net/xz6t2/1/)

有什么建议么 ？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:59:18.823

您可以使用`{{template}}`.

[jsFiddle 示例](http://jsfiddle.net/xz6t2/2/)

```
<script type="text/x-handlebars" data-template-name="application">
    {{template list}}
</script> 
```

有关各种帮助程序的细分，请参阅相关答案：[emberjs 车把模板中的不同渲染技术](https://stackoverflow.com/questions/14802223/different-rendering-techniques-in-emberjs-handlebars-template)

# ios - 通过 AS3 编程原生振动以在 iOS 上工作

> ID：14813461
> 
> 赞同：0
> 
> 时间：2013-02-11T13:55:49.830
> 
> 标签：ios, actionscript-3, air, flash-cs6, vibration

我制作了一个测试器类来测试 iPod Touch 上的振动，但在设备上测试时振动不起作用。我已经按照[这个问题和答案](https://stackoverflow.com/questions/14777563/getting-native-vibration-to-work-on-ios-through-as3)导入了所有相关的扩展并链接到相关的 Adob​​e AIR 库类。我使用了错误的回调还是什么？

```
package  
{
    import flash.display.Sprite;
    import com.adobe.nativeExtensions.Vibration; 

    public class Test extends Sprite
    {
        public function Test()
        {
            run();
        }

        public function run(): void {
            var vibe:Vibration;
            if (Vibration.isSupported)
            {
                vibe = new Vibration();
                vibe.vibrate(25000);
            }
        }
    }
} 
```

编辑：发现 iPod Touch 没有振动传感器。在 iPhone 5 上测试后，它仍然无法正常工作。一旦应用程序启动，它就会崩溃（并关闭）而不振动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:57:09.373

iPod Touch 不支持振动。:)

# c# - 通用字典

> ID：14813463
> 
> 赞同：-2
> 
> 时间：2013-02-11T13:56:06.240
> 
> 标签：c#, .net

通常工作我得到一个`PropertyInfo`方法一个属性，这个属性将永远是一个

`Dictionary<someobject, customenum>`我需要通过这个属性知道什么类型的键（someobject）......

谁能帮我？

抱歉英语不是我的母语！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:01:54.103

我想这就是你想要的：

```
var d = new Dictionary<int, string>();
var arguments = d.GetType().GetGenericArguments();
var keyType = arguments[0];
var valueType = arguments[1]; 
```

# jquery - jQuery UI ipod 向下钻取菜单

> ID：14813467
> 
> 赞同：0
> 
> 时间：2013-02-11T13:56:22.170
> 
> 标签：jquery, css, jquery-ui

虽然我一直在试图弄清楚如何巧妙地显示很长的导航链接，但我遇到了这个[jQuery IOS Drill Down Menu](http://jamesarosen.github.com/jquery-ui/demos/menu/ios-menu.html)插件（来源文章：[jQuery Wiki Menu](http://wiki.jqueryui.com/w/page/12137997/Menu)）。我已经尝试将它作为一个小部件实现到我的解决方案中，但我认为问题在于它的一些已弃用的方法，例如 .left 和 .right。

我目前正在使用 jquery 1.9.0 和 jQuery UI 1.10.0。

我在编写小部件/升级它们方面并没有真正的经验，因此我们将不胜感激任何帮助，因为它似乎是一个用于显示复杂菜单的非常有用的小部件。

**CSS 片段：**

```
 .ios-style, .ios-style ul, .ios-style ol { background: #fff; height: 200px; padding: 2px; width: 260px; }
    .ios-style { overflow-x: hidden; overflow-y: auto; }
    .ios-style::-webkit-scrollbar { width: 5px; height: 5px; }
    .ios-style::-webkit-scrollbar-thumb { background: rgba(128, 128, 128, 0.6); border-radius: 4px; }
    .ios-style ul, .ios-style ol { overflow-y: visible; border: none; }
    .ios-style.ui-menu-icons .ui-menu-item a { position: inherit; }
    .ios-style .ui-menu-item a { cursor: pointer; outline: none; } 
```

**jQuery 小部件代码：**

```
<script type="text/javascript">
    $.widget( "ui.iosMenu", {
        options: {
            backText:      'Back',
            slideDuration: 400,
            slideEasing:   'linear'
        },

        _insertBackButtons: function() {
            this.element.find( 'li ul, li ol' ).prepend(
                $( '<li>' +
                     '  <span class="ui-icon ui-icon-carat-1-w"></span>' +
                     '  <a href="#menu-back" class="ios-menu-back-link">' +
                                this.options.backText +
                     '  </a>' +
                     '</li>'
            ) );
            return this;
        },

        _create: function( options ) {
            var iosMenu = this;

            iosMenu
                ._insertBackButtons()
                .element
                    .addClass( 'ios-style' )
                    .menu({
                        // When a submenu shows up, place it just to the right
                        // of the current menu. Later, we'll slide it into view.
                        position: {
                            my: 'left top',
                            at: 'right top',
                            of: iosMenu.element
                        }
                    });

            var menu = iosMenu.element.data( 'menu' );

            // Override menu#select to account for nesting and back buttons:
            menu.select = function( event ) {
                if ( menu.active && menu.active.find( '> .ios-menu-back-link' ).length ) {
                    // if you selected "back", go back:
                    menu.focus( event, menu.active );
                    if ( menu.left( event ) ) {
                        event.stopImmediatePropagation();
                    }
                    event.preventDefault();
                } else if ( menu.active && menu.active.find( '> ul' ).length ) {
                    // if you selected something with children, show the children:
                    menu.focus( event, menu.active );
                    if ( menu.right( event ) ) {
                        event.stopImmediatePropagation();
                    }
                    event.preventDefault();
                } else {
                    menu._trigger( 'select', event, { item: menu.active } );
                }
            };

            // Override menu#left to enable sliding behavior:
            menu.left = function( event ) {
                var newItem = this.active && this.active.parents( 'li:not(.ui-menubar-item) ').first(),
                        self        = this,
                        parent;
                if ( newItem && newItem.length ) {
                  newItem.find( '> a' ).addClass( 'ui-state-focus' ).removeClass( 'ui-state-active' );
                    parent = this.active.parent();
                    parent
                        .attr( 'aria-hidden', 'true' )
                        .attr( 'aria-expanded', 'false' )
                        .animate({
                            left: self.element.css( 'width' )
                        }, iosMenu.options.slideDuration, iosMenu.options.slideEasing, function() {
                            parent.hide();
                            self.focus( event, newItem );
                        })
                    return true;
                } else if ( event && event.which === $.ui.keyCode.ESCAPE ) {
                    // #left gets called both for left-arrow and escape. If it's the
                    // latter and we're at the top, fire a "close" event:
                    self._trigger( 'close', event );
                }
            };

            // Override menu#_open to enable sliding behavior:
            var menuOpenWithoutSliding = menu._open;
            menu._open = function ( submenu ) {
                menuOpenWithoutSliding.call( this, submenu );
                submenu.animate({
                    left: 0
                }, iosMenu.options.slideDuration, iosMenu.options.slideEasing);
            };

            // Override menu#_startOpening so that hovering doesn't
            // initiate the sliding:
            menu._startOpening = function() {
                clearTimeout( this.timer );
            }
        },

        destroy: function() {
          var menu = this.element && this.element.data( 'menu' );
            menu && menu.destroy();
        }
    });

    $(function() {
        var list    = $( '#breakfast-menu' );
        var firstLI = list.find( 'li' ).first();
        list
            .iosMenu()
            .focus()
            .menu( 'focus', {}, firstLI )
            .bind( 'menuselect', function( event, ui ) {
                $('#log').append( '<li>' + $(ui.item).text() + '</li>' );
            });
    });
</script> 
```

**运行时错误**

```
 var menu = iosMenu.element.data( 'menu' ); 
```

在萤火虫中引发“菜单”未定义错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:37:35.997

也遇到了同样的错误。我花了很长时间才找到罪魁祸首，但它是这样的：

**jquery.ui.menu.js**

添加

```
this.mouseHandled = false; 
```

折叠所有和扩展功能模糊功能`(within _create)`替换为 1.9.0 版本

**jquery.ui.widget.js**

添加

```
$.data( element, this.widgetName, this ); 
```

发挥`_createWidget`作用

**jquery-ui.iosmenu.js**

添加

```
menu.active = menu.active || $( event.target ).closest( ".ui-menu-item" ); 
```

到`menu.selec`吨

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:03:09.350

我不使用其他更改。我想使用 jquery UI 的 CDN 版本，所以我没有搞砸这些。这是我的兼容版本。

```
$.widget( "ui.iosMenu", {
    options: {
        backText:      'Back',
        slideDuration: 200,
        slideEasing:   'linear'
    },

    _insertBackButtons: function() {
        this.element.find( 'li ul, li ol' ).prepend(
            $( '<li class="ui-menu-item ios-menu-back-link" role="presentation">' +
                 '  <a href="#menu-back" class="ui-corner-role" tabindex="-1" role="menuitem" aria-haspopup="true" >' +
                '   <span class="ui-menu-icon ui-icon ui-icon-carat-1-w"></span>' +
                            this.options.backText +
                 '  </a>' +
                 '</li>'
        ) );
        return this;
    },

    _create: function( options ) {
        var iosMenu = this;

        iosMenu
            ._insertBackButtons()
            .element
                .addClass( 'ios-style' )
                .menu({
                    // When a submenu shows up, place it just to the right
                    // of the current menu. Later, we'll slide it into view.
                    position: {
                        my: 'left top',
                        at: 'right top',
                        of: iosMenu.element
                    }
                });

        var menu = iosMenu.element.data( 'uiMenu' );

        // Override menu#select to account for nesting and back buttons:
        menu.select = function( event ) {
            //menu.active = menu.active || $( event.target ).closest( ".ui-menu-item" ); //new random line
            if ( menu.active && menu.active.find('a').attr("href") == "#menu-back" ) {
                // if you selected "back", go back:
                menu.focus( event, menu.active );
                menu.collapse( event );
                /*
                if ( menu.collapse( event ) ) {
                    event.stopImmediatePropagation();
                }
                event.preventDefault();*/
            } else if ( menu.active && menu.active.find( '> ul' ).length ) {
                // if you selected something with children, show the children:
                menu.focus( event, menu.active );
                menu.expand( event );
                /*
                if ( menu.expand( event ) ) {
                    event.stopImmediatePropagation();
                }
                event.preventDefault();*/
            } else {
                menu._trigger( 'select', event, { item: menu.active } );
            }
        };
        /*
        // Override menu#expand to add return true:
        menu.expand = function( event ) {
            var newItem = this.active &&
                this.active
                    .children( ".ui-menu " )
                    .children( ".ui-menu-item" )
                    .first();

            if ( newItem && newItem.length ) {
                this._open( newItem.parent() );

                // Delay so Firefox will not hide activedescendant change in expanding submenu from AT
                this._delay(function() {
                    this.focus( event, newItem );
                });
                return true;
            }
        };*/

        // Override menu#collapse to enable sliding behavior:
        menu.collapse = function( event ) {
            var newItem = this.active && this.active.parents( 'li:not(.ui-menubar-item) ').first(),
                    self        = this,
                    parent;
            if ( newItem && newItem.length ) {
              newItem.find( '> a' ).addClass( 'ui-state-focus' ).removeClass( 'ui-state-active' );
                parent = this.active.parent();
                parent
                    .attr( 'aria-hidden', 'true' )
                    .attr( 'aria-expanded', 'false' )
                    .animate({
                        left: self.element.css( 'width' )
                    }, iosMenu.options.slideDuration, iosMenu.options.slideEasing, function() {
                        parent.hide();
                        self.focus( event, newItem );
                    })
                //return true;
            } else if ( event && event.which === $.ui.keyCode.ESCAPE ) {
                // #left gets called both for left-arrow and escape. If it's the
                // latter and we're at the top, fire a "close" event:
                self._trigger( 'close', event );
            }
        };

        // Override menu#_open to enable sliding behavior:
        var menuOpenWithoutSliding = menu._open;
        menu._open = function ( submenu ) {
            menuOpenWithoutSliding.call( this, submenu );

            submenu.animate({
                left: 0,
                height: menu.element[0].clientHeight - 4 ,
                width: menu.element[0].clientWidth 
            }, iosMenu.options.slideDuration, iosMenu.options.slideEasing);
        };

        // Override menu#_startOpening so that hovering doesn't
        // initiate the sliding:
        menu._startOpening = function( submenu ) {
            clearTimeout( this.timer );
            // Don't open if already open fixes a Firefox bug that caused a .5 pixel
            // shift in the submenu position when mousing over the carat icon
            if ( submenu.attr( "aria-hidden" ) !== "true" ) {
                return;
            }
        }
    },

    destroy: function() {
      var menu = this.element && this.element.data( 'uiMenu' );
        menu && menu.destroy();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T22:12:22.007

如果您需要在单页应用程序中使用此代码并且必须避免使用“href="menu-back"，请改用 rel="" 属性。

```
 $.widget( "ui.iosMenu", {
    options: {
        backText:      'Back',
        slideDuration: 200,
        slideEasing:   'linear'
    },

    _insertBackButtons: function() {
        this.element.find( 'li ul, li ol' ).prepend(
        $( '<li class="ui-menu-item ios-menu-back-link" role="presentation">' +
                 '  <a rel="#menu-back" class="ui-corner-role" tabindex="-1" role="menuitem" aria-haspopup="true" >' +
                '   <span class="ui-menu-icon ui-icon ui-icon-carat-1-w"></span>' +
                            this.options.backText +
                 '  </a>' +
                 '</li>'
        ) );
        return this;
    },

    _create: function( options ) {
        var iosMenu = this;

        iosMenu
            ._insertBackButtons()
            .element
                .addClass( 'ios-style' )
                .menu({
                    // When a submenu shows up, place it just to the right
                    // of the current menu. Later, we'll slide it into view.
                    position: {
                        my: 'left top',
                        at: 'right top',
                        of: iosMenu.element
                    }
                });

        var menu = iosMenu.element.data( 'uiMenu' );

        // Override menu#select to account for nesting and back buttons:
        menu.select = function( event ) {

             if ( menu.active && menu.active.find('a').attr("rel") == "#menu-back" ) {   
                // if you selected "back", go back:
                menu.focus( event, menu.active );
                menu.collapse( event );

            } else if ( menu.active && menu.active.find( '> ul' ).length ) {
                // if you selected something with children, show the children:
                menu.focus( event, menu.active );
                menu.expand( event );

            } else {
                menu._trigger( 'select', event, { item: menu.active } );
            }
        };

        // Override menu#collapse to enable sliding behavior:
        menu.collapse = function( event ) {
            var newItem = this.active && this.active.parents( 'li:not(.ui-menubar-item) ').first(),
                    self        = this,
                    parent;
            if ( newItem && newItem.length ) {
              newItem.find( '> a' ).addClass( 'ui-state-focus' ).removeClass( 'ui-state-active' );
                parent = this.active.parent();
                parent
                    .attr( 'aria-hidden', 'true' )
                    .attr( 'aria-expanded', 'false' )
                    .animate({
                        left: self.element.css( 'width' )
                    }, iosMenu.options.slideDuration, iosMenu.options.slideEasing, function() {
                        parent.hide();
                        self.focus( event, newItem );
                    })
                //return true;
            } else if ( event && event.which === $.ui.keyCode.ESCAPE ) {

                self._trigger( 'close', event );
            }
        };

        // Override menu#_open to enable sliding behavior:
        var menuOpenWithoutSliding = menu._open;
        menu._open = function ( submenu ) {
            menuOpenWithoutSliding.call( this, submenu );

            submenu.animate({
                left: 0,
                height: menu.element[0].clientHeight - 4 ,
                width: menu.element[0].clientWidth 
            }, iosMenu.options.slideDuration, iosMenu.options.slideEasing);
        };

        // Override menu#_startOpening so that hovering doesn't
        // initiate the sliding:
        menu._startOpening = function( submenu ) {
            clearTimeout( this.timer );
            // Don't open if already open fixes a Firefox bug that caused a .5 pixel
            // shift in the submenu position when mousing over the carat icon
            if ( submenu.attr( "aria-hidden" ) !== "true" ) {
                return;
            }
        }
    },

    destroy: function() {
      var menu = this.element && this.element.data( 'uiMenu' );
        menu && menu.destroy();
    }
}); 
```

更新：为了支持 jQuery 2.1.0，我不得不改变这一行......

```
var menu = iosMenu.element.data( 'uiMenu' ); 
```

进入这个

```
var menu = iosMenu.element.data( 'ui-menu' ); 
```

我还加载了 jquery-migrate-1.2.1.min.js 以防万一其他人有类似的问题。

# jquery - 寻找用于标记的 jquery 库，例如 Stackoverflow

> ID：14813469
> 
> 赞同：0
> 
> 时间：2013-02-11T13:56:25.183
> 
> 标签：jquery, tags

对于我的网站，我需要找到一个库来像 Stackoverflow 一样将标签放在方框中。当您将鼠标放在标签上时，会出现一个屏幕。在该屏幕上，您可以显示长文本和链接。

有人知道这样的图书馆吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:02:16.993

如果您正在寻找类似标签的功能（您在问题中插入的功能），您可以使用这个名为[tagit](http://aehlke.github.com/tag-it/)的 JQuery 插件，这是一个使用标签的示例

javascript代码..

```
var sampleTags = ['c++', 'java', 'php', 'coldfusion', 'javascript', 'asp', 'ruby', 'python', 'c', 'scala', 'groovy', 'haskell', 'perl', 'erlang', 'apl', 'cobol', 'go', 'lua'];

          $('#singleFieldTags').tagit({
            availableTags: sampleTags,
            // This will make Tag-it submit a single form value, as a comma-delimited field.
            singleField: true,
            singleFieldNode: $('#mySingleField')
        }); 
```

和 html

```
 <p>                 
         <input name="tags" id="mySingleField" value="Apple, Orange" disabled="true"> 
    </p>
       <ul id="singleFieldTags"></ul> 
```

至于悬停并显示长文本和链接的功能，我认为您应该自己实现，

# javascript - websocket 上的二进制数据，未编码为 UTF-8 或 base64

> ID：14813472
> 
> 赞同：7
> 
> 时间：2013-02-11T13:56:31.173
> 
> 标签：javascript, python, binary, websocket

我正在尝试以二进制模式使用 websockets 将二进制数据从用 Python 编写的服务器传输到客户端浏览器（运行 javascript）。我已经以文本模式实现了这种通信，但现在我希望通过以二进制模式进行通信来提高性能。

我见过的所有示例（例如，[如果](http://www.doughellmann.com/PyMOTW/socket/binary.html)有人通过使用 Tornado 的 matplotlib/webagg 的源代码进行挖掘）声称它们正在使用二进制模式，但实际上它们似乎将原始二进制数据编码为 UTF-8（或base64）在传输前的某个时间点。在我看来，这样做并不是真正的二进制传输，因为它会增加 30% 到 50% 的开销。

所以我的问题是，是否必须将二进制数据编码为 utf-8 或 base64 才能使用基于 IP 的 websocket？如果没有，请指出一个示例，该示例无需编码即可完成。

我一直认为套接字确实支持真正的二进制通信，但由于某种原因，IP websockets 可能并非如此。也许有人可以阐明这件事。在过去一年左右的时间里，该领域似乎取得了进展，这增加了混乱。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T15:54:20.627

[IETF 6455 WebSocket 协议](https://www.rfc-editor.org/rfc/rfc6455)支持直接发送/接收二进制数据（旧的Hixie 协议变体不支持）。如果您正在实现自己的框架，那么您只需将框架中的操作码设置为 0x2 以指示有效负载是原始二进制数据而不是 UTF-8 编码文本。如果您使用的是 python WebSocket 库，那么您需要使用该库提供的 API 来选择二进制模式（如果库支持的话）。

**注意**：您链接到的[示例](http://www.doughellmann.com/PyMOTW/socket/binary.html)不是 WebSocket 示例（它只是一个常规的 TCP 客户端和服务器）。此外，该示例**未**将数据编码为 UTF-8 或 base64。[Websockify](https://github.com/kanaka/websockify)是一个 WebSocket 服务器，它支持直接二进制数据（除了旧的 Hixie 变体的 base64 编码）。*免责声明*：我创建了 websockify。

# android - 印度语言的 TTS

> ID：14813475
> 
> 赞同：0
> 
> 时间：2013-02-11T13:56:37.940
> 
> 标签：android, text-to-speech

我想开发一个 Android 应用程序（使用一些库），它以印度语言显示和读取文本。主要是梵文（梵文/印地文/马拉地文等），最好的方法是什么？我应该为每个单词指定语音并将其提供给 Pico 吗？或者任何人都可以建议一个更好更简单的库。（这听起来很自然）。

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T10:19:21.657

这可能有效....尝试将您的 TTS 语言环境自定义为

```
   Locale loc=new Locale("en","IN");

```

```
   tts.setLanguage(loc);

```

# file - 读取 Zip 文件（ex.txt）的内容而不提取 zip 文件

> ID：14813479
> 
> 赞同：2
> 
> 时间：2013-02-11T13:56:54.150
> 
> 标签：file, ms-access, vba

我真的是 Access VBA 的新手。我的访问代码有问题，您能帮我解决下面提到的请求吗？

我的文件名称如`ex.zip`. 在本例中，Zip 文件只包含一个同名文件（即 `ex.txt'），这是一个相当大的文件。我不想每次都提取 zip 文件。因此我需要在不提取 zip 文件的情况下读取文件的内容（ex.txt）。我尝试了一些类似下面的代码但我无法读取文件的内容，也无法将内容存储在 Access VBA 的变量中。

如何读取文件的内容并将其存储在变量中？

我在 VBA 中尝试了一些代码来阅读压缩文本但我没有任何意义..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:03:22.427

这是压缩和解压缩的代码。如果您查看它的解压缩部分，您会看到它像目录一样读取 zip 文件的位置。然后您可以选择是否要提取该文件。

```
Private Declare Sub Sleep Lib "kernel32" ( _
    ByVal dwMilliseconds As Long _
)

Public Sub Zip( _
    ZipFile As String, _
    InputFile As String _
)
On Error GoTo ErrHandler
    Dim FSO As Object 'Scripting.FileSystemObject
    Dim oApp As Object 'Shell32.Shell
    Dim oFld As Object 'Shell32.Folder
    Dim oShl As Object 'WScript.Shell
    Dim I As Long
    Dim l As Long

    Set FSO = CreateObject("Scripting.FileSystemObject")
    If Not FSO.FileExists(ZipFile) Then
        'Create empty ZIP file
        FSO.CreateTextFile(ZipFile, True).Write "PK" & Chr(5) & Chr(6) & String(18, vbNullChar)
    End If

    Set oApp = CreateObject("Shell.Application")
    Set oFld = oApp.NameSpace(CVar(ZipFile))
    I = oFld.Items.Count
    oFld.CopyHere (InputFile)

    Set oShl = CreateObject("WScript.Shell")

    'Search for a Compressing dialog
    Do While oShl.AppActivate("Compressing...") = False
        If oFld.Items.Count > I Then
            'There's a file in the zip file now, but
            'compressing may not be done just yet
            Exit Do
        End If
        If l > 30 Then
            '3 seconds has elapsed and no Compressing dialog
            'The zip may have completed too quickly so exiting
            Exit Do
        End If
        DoEvents
        Sleep 100
        l = l + 1
    Loop

    ' Wait for compression to complete before exiting
    Do While oShl.AppActivate("Compressing...") = True
        DoEvents
        Sleep 100
    Loop

ExitProc:
    On Error Resume Next
        Set FSO = Nothing
        Set oFld = Nothing
        Set oApp = Nothing
        Set oShl = Nothing
    Exit Sub
ErrHandler:
    Select Case Err.Number
        Case Else
            MsgBox "Error " & Err.Number & ": " & Err.Description, vbCritical, "Unexpected error"
    End Select
    Resume ExitProc
    Resume
End Sub

Public Sub UnZip( _
   ZipFile As String, _
   Optional TargetFolderPath As String = vbNullString, _
   Optional OverwriteFile As Boolean = False _
   )
   'On Error GoTo ErrHandler
   Dim oApp As Object
   Dim FSO As Object
   Dim fil As Object
   Dim DefPath As String
   Dim strDate As String

   Set FSO = CreateObject("Scripting.FileSystemObject")
   If Len(TargetFolderPath) = 0 Then
      DefPath = CurrentProject.Path & "\"
   Else
      If Not FSO.FolderExists(TargetFolderPath) Then
         MkDir TargetFolderPath
      End If
     DefPath = TargetFolderPath & "\"
   End If

   If FSO.FileExists(ZipFile) = False Then
      MsgBox "System could not find " & ZipFile & " upgrade cancelled.", vbInformation, "Error Unziping File"
      Exit Sub
   Else
    'Extract the files into the newly created folder
    Set oApp = CreateObject("Shell.Application")

    With oApp.NameSpace(ZipFile & "\")
      If OverwriteFile Then
         For Each fil In .Items
            If FSO.FileExists(DefPath & fil.Name) Then
               Kill DefPath & fil.Name
            End If
         Next
      End If
      oApp.NameSpace(CVar(DefPath)).CopyHere .Items
    End With

    On Error Resume Next
    Kill Environ("Temp") & "\Temporary Directory*"

    'Kill zip file
    Kill ZipFile
   End If

ExitProc:
   On Error Resume Next
   Set oApp = Nothing
   Exit Sub
ErrHandler:
   Select Case Err.Number
      Case Else
         MsgBox "Error " & Err.Number & ": " & Err.Description, vbCritical, "Unexpected error"
   End Select
   Resume ExitProc
   Resume
End Sub 
```

# javascript - 避免调用已经包含的 Js 文件？

> ID：14813480
> 
> 赞同：0
> 
> 时间：2013-02-11T13:56:56.387
> 
> 标签：javascript, ajax, browser-cache

我在我的jsp中包含了下面的js文件

```
<script type="text/javascript" src='<s:url value="/script/customer.js?ver=1.2.3"/>'></script> 
```

Jsp 文件包含在其上进行 ajax 调用的超链接，并且该调用的响应再次包含上述代码以包含 js 文件。

理想情况下，不应再次调用相同的 js 文件，它们由浏览器缓存。然后我在 firebug 中检查，发现下面的 url 有点不同，即它包含额外的参数 _=1360589976328。如果已包含相同的 js 文件，我不想再次调用它。（由于某种原因，我无法从 ajax 响应 jsp 中删除）。我认为问题出在这个额外的参数上，可能是因为再次拨打了哪个电话。

知道为什么要附加额外的参数或进行双重调用以包含浏览器中已经存在的 js 文件吗？

```
http://localhost:8080/custModule/script/customer.js?ver=1.2.3?ver=4.5.8&_=1360589976328 
```

# xaml - Popup 中的 XAML TextBox 被屏幕键盘隐藏

> ID：14813482
> 
> 赞同：1
> 
> 时间：2013-02-11T13:57:05.337
> 
> 标签：xaml, textbox, popup, winrt-xaml, on-screen-keyboard

在我的 Metro 应用程序中，我有一页充满了 TextBox，它们在 StackPanel 中垂直排列。通常，当用户单击底部文本框之一时，页面会自动向上滚动，以便焦点文本框不会被屏幕键盘遮挡。

但是，如果页面显示在 Popup 中，则似乎不会发生这种自动滚动。我应该怎么做才能使我的弹出窗口具有与普通页面相同的滚动行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:23:08.867

没错，当输入窗格出现时，弹出窗口不会自动滚动，因为弹出窗口位于主视觉树中的根滚动查看器之外。

听起来您的弹出窗口中有相当复杂的 UI。您可能需要考虑是否可以在 Popup 的上下文之外以一种对 Metro 友好的方式重新设计此 UI。

如果您想在输入窗格显示时尝试重新定位弹出窗口，您应该能够挂钩 InputPane.Showing 事件。您必须自己进行计算并在 InputPane 隐藏时重置原始偏移量。

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.inputpane.showing.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.inputpane.showing.aspx)

# jquery - 减少中继器上图像的不透明度

> ID：14813484
> 
> 赞同：0
> 
> 时间：2013-02-11T13:57:11.580
> 
> 标签：jquery, asp.net

我有一个中继器控件，每个项目模板都有一个图像和链接按钮。

我想要做的是当点击链接按钮时，除了与点击相关的图像之外的每个图像都变为 50% 的不透明度。

```
<asp:Repeater ID="Categories" runat="server" OnItemCommand="showSubCat_itemCommand">
    <HeaderTemplate></HeaderTemplate>
    <ItemTemplate>
       <div class="catListing">   
       <img class="RepeaterImage" src="/images/<%#Eval("imageUrl").ToString()  ?? "" %>"/>
       <asp:LinkButton ID="showSubCats" runat="server" text='<%# Eval("Name") %>' CommandArgument='<%# Eval("id") %>'/>   
       </div>
    </ItemTemplate>
    <FooterTemplate></FooterTemplate>
</asp:Repeater> 
```

这是我的中继器，我希望这样的事情会起作用：

```
<script type="text/javascript">

$('[ID*="showSubCats"]').click(function () {
    debugger;
       $(".RepeaterImage").not(this).stop().animate({ opacity: 0.4 }, 300);
       $(this).stop().animate({ opacity: 1.0 }, 300);

    });
</script> 
```

单击任何 showsubcats 链接按钮时没有任何反应。我猜我可能走错路了！

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:02:16.433

`id`html-markup 中的属性`asp:LinkButton`不会是`showSubCats`. 我建议你`CssClass="showSubCats"`在 上设置`asp:LinkButton`，然后使用这个 javscript：

```
<script type="text/javascript">

    $('.showSubCats').click(function () {

       $(".RepeaterImage").not(this).stop().animate({ opacity: 0.4 }, 300);
       $(this).stop().animate({ opacity: 1.0 }, 300);

    });
</script> 
```

# logging - 如何在自定义 ColdFusion 日志文件中获得新行？

> ID：14813487
> 
> 赞同：2
> 
> 时间：2013-02-11T13:57:15.993
> 
> 标签：logging, coldfusion, custom-tags

我已经构建了一个 ColdFusion 自定义标签来记录错误消息和其他字符串，只要我在开发时需要它。

我的自定义标签是用 cfscript 编写的。我试着记录我能得到的一切。因此，每当我将新字符串附加到“logMessage”时，我都想记录一个新行。

我试图包含一个变量

```
crlf = chr(10) & chr(13); 
```

但这不起作用。我认为 writeLog（和相应的 cflog）不应该添加新行？

这就是我尝试使用解决方法的原因（每当出现管道时使用 writeLog()），但这会产生很多开销，因为每次运行 writeLog() 时都会有很多元数据。

这是我的脚本。第一行评估给定属性（如“logType”和 cfcatch 对象）并将值（如果已定义）附加到“logMessage”。

请查看包含 for 循环的最后几行。

```
<cfscript>
logMessageDelimiter="*******************************************************";
logMessage = "";
fileName = application.standard_log_path & application.server_name & "_standardLog";
logType = "information";
crlf = chr(10) & chr(13);

if(isDefined("attributes")){    //any attribute is given

    if(isDefined("attributes.text")){ //a custom text is given
        logMessage &= "LogMessage: " & attributes.text & " |" ;
    }

    if(isDefined("attributes.file")){   //output filename
        fileName = application.standard_log_path & application.server_name & "_" & attributes.file;
    }

    if(isDefined("attributes.logType")){ //a loglevel type
        switch(attributes.logType){
            case "i":
                logType = "information";
                break;
            case "w":
                logType = "warning";
                break;
            case "e":
                logType = "error";
                break;
            case "f":
                logType = "fatal";
                break;
            default:
                logType = "information";
        }
    }

    if(isDefined("attributes.catch")){ //catch object is defined
        logMessage &= "CFCATCH defined: " & " | ";

        if(isDefined("attributes.catch.detail"))
                logMessage &= "detail: "  & attributes.catch.detail & " | ";
        if(isDefined("attributes.catch.ErrorCode"))
                logMessage &= "ErrorCode: "  & attributes.catch.ErrorCode & " | ";
        if(isDefined("attributes.catch.ErrNumber"))
                logMessage &= "ErrNumber: "  & attributes.catch.ErrNumber & " | ";
        if(isDefined("attributes.catch.ExtendedInfo"))
                logMessage &= "QueryError: "  & attributes.catch.ExtendedInfo & " | ";
        if(isDefined("attributes.catch.message"))
                logMessage &= "message: "  & attributes.catch.message & " | ";
        if(isDefined("attributes.catch.RootCause"))
                logMessage &= "RootCause: "  & attributes.catch.RootCause & " | ";
        if(isDefined("attributes.catch.TagContext"))
        {
            for(i=1; i LTE ArrayLen(attributes.catch.TagContext); i=i+1)
            {
                logMessage &= "TagContext["& i &"] Column: " & attributes.catch.TagContext[i]["Column"] & " | ";
                logMessage &= "TagContext["& i &"] ID: " & attributes.catch.TagContext[i]["ID"] & " | ";
                logMessage &= "TagContext["& i &"] Line: " & attributes.catch.TagContext[i]["Line"] & " | ";
                logMessage &= "TagContext["& i &"] RawTrace: " & attributes.catch.TagContext[i]["Raw_Trace"] & " | ";
                logMessage &= "TagContext["& i &"] Template: " & attributes.catch.TagContext[i]["Template"] & " | ";
                logMessage &= "TagContext["& i &"] Type: " & attributes.catch.TagContext[i]["Type"] & " | ";
            }
        }

        if(isDefined("attributes.catch.Type"))
                logMessage &= "Type: "  & attributes.catch.Type & " | ";        
        if(isDefined("attributes.catch.NativeErrorCode"))
                logMessage &= "NativeErrorCode: "  & attributes.catch.NativeErrorCode & " | ";
        if(isDefined("attributes.catch.SQLState"))
                logMessage &= "SQLState: "  & attributes.catch.SQLState & " | ";
        if(isDefined("attributes.catch.SQL"))
                logMessage &= "SQL: "  & attributes.catch.SQL & " | ";
        if(isDefined("attributes.catch.QueryError"))
                logMessage &= "QueryError: "  & attributes.catch.QueryError & " | ";        
        if(isDefined("attributes.catch.Where"))
                logMessage &= "Where: "  & attributes.catch.Where & " | ";
        if(isDefined("attributes.catch.ErrNumber"))
                logMessage &= "ErrNumber: "  & attributes.catch.ErrNumber & " | ";          
        if(isDefined("attributes.catch.MissingFileName"))
                logMessage &= "MissingFileName: "  & attributes.catch.MissingFileName & " | ";
        if(isDefined("attributes.catch.MissingFileName"))
                logMessage &= "MissingFileName: "  & attributes.catch.MissingFileName & " | ";
        if(isDefined("attributes.catch.LockName"))
                logMessage &= "LockName: "  & attributes.catch.LockName & " | ";
        if(isDefined("attributes.catch.LockOperation"))
                logMessage &= "LockOperation: "  & attributes.catch.LockOperation & " | ";
        if(isDefined("attributes.catch.ExtendedInfo"))
                logMessage &= "ExtendedInfo: "  & attributes.catch.ExtendedInfo & " | ";
    }
}
splittedText = listToArray(logMessage,'|');
for(i=1; i LTE ArrayLen(splittedText); i=i+1)
{
    //I really need a better solution than this loop... 
    writeLog(splittedText[i],logType,true,fileName);
}
writeLog(logMessageDelimiter,logType,true,fileName); 
```

我像这样使用我的自定义标签：

```
<cftry>
  ...some buggy code
<cfcatch>
  <customTagName text="Hey, you've got an error!" file="myLogFile" type="e" catch="#cfcatch#">
</cfcatch>
</cftry> 
```

在日志中，我将得到以下输出（截断）：

```
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS","LogMessage: Hey, you've got an error!"
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS","CFCATCH defined:  "
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS"," detail:  "
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS"," ErrorCode:  "
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS"," ErrNumber: 0 "
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS"," QueryError:  "
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS"," message: Errormessage from CF telling me my errors "
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS"," TagContext[1] Column: 0 "
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS"," TagContext[1] ID: CF_CFPAGE "
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS"," TagContext[1] Line: 183 "
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS"," TagContext[1] RawTrace:       at cffileecfm1278323672._factor2(/the/path/to/my/file.cfm:183) "
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS"," TagContext[1] Template: /the/path/to/my/file.cfm"
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS"," TagContext[1] Type: CFML "
...
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS","*******************************************************" 
```

那你会吗？有没有办法获得一个新行，而无需一遍又一遍地执行 writeLog()。

我希望看到这样的结果：

```
"Information","ajp-bio-8013-exec-37118","02/11/13","14:26:09","SYS_MYSYS","LogMessage: Hey, you've got an error!"
    "CFCATCH defined:  "
    " detail:  "
    " ErrorCode:  "
    " ErrNumber: 0 "
    " QueryError:  "
    " message: Errormessage from CF telling me my errors "
    " TagContext[1] Column: 0 "
    " TagContext[1] ID: CF_CFPAGE "
    " TagContext[1] Line: 183 "
    " TagContext[1] RawTrace:       at cffileecfm1278323672._factor2(/the/path/to/my/file.cfm:183) "
    " TagContext[1] Template: /the/path/to/my/file.cfm"
    " TagContext[1] Type: CFML "
    ...
    "*******************************************************" 
```

我可以使用方法写入文件，但我认为这也不是最好的方法，不是吗？另外：我不能从我的应用程序中写入 ColdFusion 的标准日志文件夹（例如 /path/to/coldfusion/instancename/logs/myLogFolder）？！

有没有办法让我的日志文件有一些结构？你有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:57:51.087

不，我刚刚验证了 CF 用空格替换了 CRLF 字符。就是这样。我猜它这样做是为了让日志解析器可以告诉我 CRLF 表示日志条目的结束，而不必担心它是日志消息的一部分。这有点懒惰的CF，IMO。有趣的是，Railo 没有这样做。

您可以做的最好的事情是粘贴一些其他 ASCII 字符（我刚刚测试了 chr(30) - RECORD SEPARATOR），然后编写一个日志查看器，将其与 CRLF 交换。这不是一个很好的建议，但如果它对你很重要，它是一个选择。

# jquery - jVectorMap 自定义缩放按钮

> ID：14813490
> 
> 赞同：11
> 
> 时间：2013-02-11T13:57:24.347
> 
> 标签：jquery, jvectormap

使用[jVectorMap](http://jvectormap.com/)是否可以隐藏缩放按钮并使用其 API 调用放大/缩小？我检查[了 API 文档](http://jvectormap.com/documentation/javascript-api-v1/)，找不到任何方法，导致地图重新缩放。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-12T12:49:26.270

当然。

隐藏按钮：

```
$('#map').vectorMap({
    map: 'world_mill_en',
    zoomButtons : false
}); 
```

获取地图参考：

```
map = $("#world-map-gdp").vectorMap('get', 'mapObject'); 
```

设置缩放级别：

```
map.setScale(4); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-10-14T09:50:56.350

在旁注中，您还可以使用禁用/启用滚动缩放

```
zoomOnScroll: false 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-11T14:05:58.220

目前没有这样的功能。但...

1.  似乎其他人要求隐藏缩放按钮的选项，并且已经完成但似乎没有记录，请参阅功能请求状态：[https](https://github.com/bjornd/jvectormap/pull/136) ://github.com/bjornd/jvectormap/pull/136 。
2.  要允许通过代码放大/缩小，您可以并且应该通过 GitHub 创建功能请求：[https ://github.com/bjornd/jvectormap/issues/new](https://github.com/bjornd/jvectormap/issues/new)

我强烈建议您创建*功能请求*，以便项目背后的开发人员能够真正了解真正的需求。

## 编辑

通过[上述](https://github.com/bjornd/jvectormap/pull/136)功能请求，[我可以看到有一个参数来隐藏缩放按钮](https://github.com/bjornd/jvectormap/commit/b4a237631a331c603b5ec3041db762f04d9bda3d)。因此，您需要构建您的地图，将`zoomButtons`属性传递给`false`：

```
$('#map').vectorMap({
  map: 'world_mill_en',
  zoomButtons : false
}); 
```

您正在寻找的另一件事（通过 API 放大/缩小），我认为如果您真的确定没有办法做到这一点，您*应该*创建一个隐藏为功能请求的问题。

## 编辑 2

发布我的答案几个月后，该功能已发布，[请参阅该答案](https://stackoverflow.com/a/15361688/439427)。

# python - 从商业库中排除对子例程的调用

> ID：14813494
> 
> 赞同：0
> 
> 时间：2013-02-11T13:57:35.313
> 
> 标签：python, fortran, f2py

我有一个包含许多有用子例程的 fortran 文件，我想使用 f2py 为其创建一个 Python 接口。

出现问题的原因是某些 fortran 子例程从 NAG 库（名为 c06ebf）调用 FFT 子例程。当导入 Python 时，它会产生“未定义符号：co6eb​​f”警告。

有没有其他方法可以在我的 Fortran 子例程中执行 FFT 并能够使用 f2py 从它创建 Python 接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:59:30.063

这个问题通过以下方式解决：

1.  调用商业 FFT 库的所有实例都被调用免费 FFT 库（在本例中为 FFTW3）所取代。当然，如果需要，'include "fftw3.f"' 会放在 fortran 子例程的顶部。

2.  扩展模块是使用 f2py 创建的。第一行创建签名文件，第二行编译扩展模块。请注意，我们在此过程中链接了外部库 - 以前没有这样做，这导致了陈述的问题。

    > f2py -m splib -h splib.fpy splib.f
    > f2py -c splib splib.f -lfftw3

# mysql - 验证我的数据库关系？

> ID：14813497
> 
> 赞同：0
> 
> 时间：2013-02-11T13:57:44.177
> 
> 标签：mysql, database, database-design

有人可以检查并就以下数据库设计提供任何建议。请忽略实际字段，我想要更多的关系检查。谢谢 ：）

![在此处输入图像描述](../Images/fe032465867f14d7462eeb19c2d8a155.png)

**背景**

一个客户可以有很多宠物资料说

1 个客户：有很多宠物资料宠物资料有 1 种类型（例如狗）

狗有很多属性集

身高体重

1 个属性集有许多宠物属性答案，例如

重量 = 1 公斤、2 公斤、3 公斤

* * *

给出这个场景：

客户添加他/她的宠物。例如，如果是一只狗（来自宠物类型），则会针对该宠物类型询问一系列问题，即体重和身高。他们从下拉列表中选择最佳匹配。因为我需要比较答案，所以这不能是自由文本。

**根据建议更新**

![在此处输入图像描述](../Images/976a00047f9e4aca2f196cbc693a7dff.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:58:34.020

仔细看看它对宠物类型有意义，为什么不把它作为宠物资料的一部分呢？这不是一回事吗？和宠物形象？可能在宠物资料中没有任何原因吗？然后使用代理键作为唯一标识符，我认为这与宠物属性的相关性会更好一些，因为一切都被规范化并且在一个地方 - 反对三个单独的表......你怎么看？

本质上，您将客户与一个或多个宠物相关联，这些宠物是（宠物名称、宠物类型、宠物图片、宠物属性）的组合，将查找添加到宠物资料和宠物属性，以便您可以按特征和资料进行搜索......

提醒也是如此，在那里添加提醒类型？为什么要把它们分开？当一切都说完来检索信息时，您将需要大量的连接......而且这一切都在个人层面上，所以这不像你正在卷起任何东西......但是

# c++ - 从 C++ 程序中理解代码

> ID：14813498
> 
> 赞同：-6
> 
> 时间：2013-02-11T13:57:44.433
> 
> 标签：c++

我试图从编码网站解决方案中理解代码，但无法弄清楚很多事情。我可以理解 BIT 和 fenwick 部分，但无论我不明白，我都写在下面：
此代码的来源是**[http://www.codechef.com/viewsolution/1816336](http://www.codechef.com/viewsolution/1816336)**
如果有人解释一下，那将非常有帮助为什么我们倾向于使用这些概念而不是使用标准定义的输入输出函数：

```
char ioSpace[500000 * 17 + 128];
unsigned popcnt(unsigned x)
{
    #ifndef ONLINE_JUDGE
    return __builtin_popcount(x);
    #else
    unsigned ret;
    asm("popcntl %1, %0;":"=r"(ret) :"r"(x));
    return ret;
    #endif
}

unsigned readUInt(char*& readPos)
{
    unsigned num = 0;
    unsigned c;
    while ((c = *readPos++) >= '0')
    num = num * 10 + (c - '0');
    return num;
}

template<unsigned D>
void writeDigit(char*& writePos, unsigned& advance, unsigned& num)
{
    unsigned digit = num / D;
    num %= D;
    if (digit)
    advance = 1;
    *writePos = digit + '0';
    writePos += advance;
}

void writeUInt(char*& writePos, unsigned num)
{
    unsigned advance = 0;
    writeDigit<100000>(writePos, advance, num);
    writeDigit<10000>(writePos, advance, num);
    writeDigit<1000>(writePos, advance, num);
    writeDigit<100>(writePos, advance, num);
    writeDigit<10>(writePos, advance, num);
    advance = 1; // for zero number
    writeDigit<1>(writePos, advance, num);
    *writePos++ = '\n';
} 
```

然后在主输入功能中：

```
 read(STDIN_FILENO, ioSpace, sizeof(ioSpace)); 
```

有人能解释一下整个过程吗，因为我一直试图在我的 C++ 编程中加入这种风格，但由于缺乏理解而不可避免地失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:38:40.127

首先，我没有看到任何证据表明该代码是值得您研究的好范例。完全没有任何评论本身让我不信任代码。如果您真的想了解它，请在调试器中逐步了解它，您不会说您在哪里卡住了这段代码，它应该会变得清晰。为了让你开始，一些关于阅读的观察。

似乎很清楚 readUint() 和 writeUint() 方法正在针对缓冲区工作，大概是 ioSpace，尽管您没有显示实际调用，所以我们无法确定，但是您的

```
 read(STDIN_FILENO, ioSpace, sizeof(ioSpace)); 
```

显示从 STDIN 获取的 iospace 日期。如果文件大于 iospace 从您显示的内容中不清楚会发生什么。也没有进行错误处理。

readUint() 的代码如下：

```
 while ((c = *readPos++) >= '0') 
```

它抓取下一个字符，并增加 readPosition。当我们看到我们应该立即想知道我们什么时候停下来。在这种情况下，当字符 c 不是

```
 >= '0' 
```

换句话说，当我们看到的字符小于 ascii '0' 时，可能是任何字符，例如 '&' 或 '#'，但作者可能期待换行符 '\n'，因为这似乎是他们的用 writeUint() 终止数字 - 明白我的意思是缺少评论吗？然后

```
c - '0' 
```

产生字符 '9' 的数值 - '0' 是 9 的 ascii 代码减去 0, 57 - 48 的 ascii 代码，当然是 9。

```
while ((c = *readPos++) >= '0')
    num = num * 10 + (c - '0'); 
```

然后，我们通过乘以 10 并添加我们最近读取的值来构建十进制值。

现在此代码易受包含字母的文件的攻击。看看如果你有一条线会发生什么

```
 23A4\n 
```

因此，如果您使用此代码，您需要有一些理由相信您的输入。

写入只是通过调用 writedigit() 函数从数字中获取单个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:59:04.053

嗯...我很确定 readUInt 函数用于将字符串数字转换为实际数字，即等效于 atoi() 函数。我认为 WriteDigit 是相反的，但我不确定。

# image - Matlab可以显示多少个灰度级？

> ID：14813499
> 
> 赞同：5
> 
> 时间：2013-02-11T13:57:45.073
> 
> 标签：image, matlab, image-processing

假设我有`Image`一个`uint16`.

基本上每个像素的范围可以从`0`到`65535`。

如果我用`imshow(Image)`Matlab 将渲染多少灰度级来显示此图像？

标准`255`级别（因此将图像隐式转换为 uint8）？
（请注意我知道我可以更改颜色图，但我只想知道灰度级数）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T14:14:26.427

颜色图的大小告诉您 Matlab 试图显示多少种颜色（或灰度级，在这种情况下）。

```
numGrayLevels = size(get(gcf,'Colormap'),1) 
```

请注意，大多数显示器仅支持 8 位灰度。根据显示器的质量和校准，您看到的可能远少于此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T14:19:56.583

这可能是一个比这更复杂的答案。大多数计算机目前只能显示 256 种灰度。

MATLAB 不会做得比这更好。但是，使用伪着色方案，您可以让 MATLAB 代表每个像素的全部 16 位，在这种情况下，它将显示您在色标中选择的 65535 种以上的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:19:47.827

我不认为 Matlab 强制执行任何限制。RGB 和 HSV 颜色值也可以加倍 - 为您提供“近乎无限”的颜色（以及灰色）。

绘图窗口是用 Java 完成的。那里的颜色可以由四个浮点数定义（请参阅[Color](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Color.html#Color%28float,%20float,%20float,%20float%29)） - 让您仍然拥有比硬件可以处理的更多颜色。

帮助说明：

> 渲染中使用的实际颜色取决于在给定特定输出设备可用的颜色空间的情况下找到最佳匹配。

所以最终它似乎取决于你的硬件。

# regex - 在 Sublime Text 2 中查找和批量编辑 HTML 元素的内容

> ID：14813500
> 
> 赞同：1
> 
> 时间：2013-02-11T13:57:47.830
> 
> 标签：regex, sublimetext2, sublimetext

我想在 sublime text 2 中使用正则表达式替换链接文本

我的链接看起来像这样

```
<a href="#" class="link link1">This is a text for link 1</a>
<a href="#" class="link link2">This is a text for link 2</a>
<a href="#" class="link link3">This is a text for link 3</a> 
```

我的页面中有 100 多个链接。

我试过这样的正则表达式。

```
<a href="#" class="link.+">.+</a> 
```

它有效但它也匹配标签。

谁能告诉我如何只匹配这个文本`This is a text for link *`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:15:30.960

*不过，我不知道您为什么只想匹配文本。我几乎想不出任何可能需要这样做的用例。通常捕获组对于大多数替换场景就足够了。*

**如果标签中的文本没有任何模式，并且标签可以包含任意 classes**，那么**NO**，这是**不可能**的。SublimeText 似乎使用了 Boost 库，它不支持可变长度后视。

如果标签是一致的（直到空格的所有内容都相同），除了`class`属性中的链接号，那么在一定程度上可能：

```
(?<=<a href="#" class="link link\d">).+?(?=</a>) 
```

如果 number 类后面的链接有 2 位数字，则需要在相应的后视中添加：

```
(?:(?<=<a href="#" class="link link\d">)|(?<=<a href="#" class="link link\d\d">)).+?(?=</a>) 
```

（`\d{1,2}`不会在后视中工作。长度不是无限多的，但正则表达式引擎不支持它。）

[**工作截图**](http://i.stack.imgur.com/gX6gj.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T03:08:43.030

正如 nhahtdh 在他的回答中所暗示的那样，您可以在不使用后视或前瞻的情况下进行替换，使用此正则表达式进行替换：

搜索正则表达式：

```
(<a href="#" class="link.+?">)[^<]+(\d)(</a>) 
```

替换字符串：

```
\1Link number \2 has been replaced\3 
```

那将取代这个：

```
<a href="#" class="link link1">这是链接 1 的文本</a>
<a href="#" class="link link2">这是链接 2 的文本</a>
<a href="#" class="link link3">这是链接 3 的文本</a>

```

进入这个：

```
<a href="#" class="link link1">链接号 1 已被替换</a>
<a href="#" class="link link2">链接号 2 已被替换</a>
<a href="#" class="link link3">链接号 3 已被替换</a>

```

我上面给出的例子也表明可以在锚文本匹配中有捕获组，如果你不想要它，你可以删除它，并相应地更改捕获组号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:04:15.243

用于匹配**这是一个链接文本，**后跟一个空格，后跟一个数字，使用`This is a text for link \d+`.

**编辑：**要匹配链接的开始和结束标记对之间的任何文本，请使用捕获组，例如：

```
<a href="#" class="link.+?">(.+)</a> 
```

`$1`匹配标签之间的文本。

# magento - 为什么magento在负载收集中返回查询

> ID：14813502
> 
> 赞同：0
> 
> 时间：2013-02-11T13:57:50.710
> 
> 标签：magento, collections, product

我将使用产品集合，但是当我加载 id 为 20 的产品时，Magento 返回一个 SQL 查询。

代码 ：

```
$products = Mage::getModel('catalog/product')->getCollection();
$products
    ->addAttributeToFilter('status',array('eq' => 1))
    ->addAttributeToSelect('name')
    ->addAttributeToSelect('sku')
    ->addAttributeToSelect('price')
    ->setPageSize(6);

echo $products->load(20)->getname(); 
```

SQL查询：

```
SELECT `e`.*, IF(at_status.value_id > 0, at_status.value, at_status_default.value) AS `status` FROM `catalog_product_entity` AS `e` INNER JOIN `catalog_product_entity_int` AS `at_status_default` ON (`at_status_default`.`entity_id` = `e`.`entity_id`) AND (`at_status_default`.`attribute_id` = '96') AND `at_status_default`.`store_id` = 0 LEFT JOIN `catalog_product_entity_int` AS `at_status` ON (`at_status`.`entity_id` = `e`.`entity_id`) AND (`at_status`.`attribute_id` = '96') AND (`at_status`.`store_id` = 1) WHERE (IF(at_status.value_id > 0, at_status.value, at_status_default.value) = 1) LIMIT 6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:11:28.990

由于您在集合上调用 load ，因此该参数将被忽略。如果尚未执行，集合上的加载函数只会执行查询。

您可以使用模型：

```
$product = Mage::getModel( 'catalog/product' )->load( 20 ); 
```

遍历集合：

```
foreach( $products as $product ) {
    $product->load( $product->getId() ); // it would be better to add attributes to collection if possible instead of loading the product here
} 
```

从集合中获取第一个项目：

```
$product = products->getFirstItem();
$product->load( $product->getId() ); 
```

或者通过 Id 从集合中获取项目：

```
$product = $products->getItemById( 20 );
$product->load( $product->getId() ); 
```

请注意，在所有情况下，加载都是在产品而不是集合上调用的。

另请注意，如果可能（性能损失），您应该避免在产品上调用加载函数，并改为使用调用将必需的属性添加到集合中`addAttributeToSelect`。

# php - PHP 依赖注入 - 疙瘩等。 - 为什么使用关联数组与 getter？

> ID：14813504
> 
> 赞同：18
> 
> 时间：2013-02-11T13:57:59.947
> 
> 标签：php, dependency-injection

我们正在考虑将依赖注入容器集成到我们的项目中。我看过的每个 DIC 都使用关联数组和/或魔术方法。例如，这是 Pimple 页面中的一个示例：

```
$container['session_storage'] = function ($c) {
    return new $c['session_storage_class']($c['cookie_name']);
};

$container['session'] = function ($c) {
    return new Session($c['session_storage']);
}; 
```

是否有一个原因？我讨厌在我的代码中将字符串作为将在某处显示的文字字符串以外的任何内容。您失去了 IDE 的强大功能（这使得代码更难维护，这是我们试图避免的事情！）。

我的偏好更像是：

```
class Container {

    function getSessionStorage()
    {
        return new $this->getSessionStorageClass($this->getCookieName);
    }

    function getSession()
    {
        return new Session($this->getSessionStorage());
    }

} 
```

有理由不这样做吗？如果我们走这条路，我是否错过了一些不起作用的 Pimple 魔法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T00:05:45.593

Pimple 中扩展的“魔力”`ArrayAccess`在于它是完全可重用和*可互操作*的。Pimple 作为 DIC 的一大特点是定义的服务可以利用先前定义的服务和/或参数。假设（无论出于何种原因）您有一个`Session`需要`Filter`实例的对象。如果没有 DIC，您可以编写：

```
$session = new Session(new Filter); 
```

有了疙瘩，你可以写：

```
$pimple['filter'] = function($c) {
    return new Filter;
};
$pimple['session'] = function($c) {
    return new Session($c['filter']);
} 
```

Pimple 在 Session 对象的实例化中使用先前注册的“过滤器”服务。这种好处并不是实现 DIC 所**独有**`ArrayAccess`的，但可重用性对于代码重用和共享非常有用。您当然可以为某些服务或所有服务硬编码 getter/setter，但可重用性的好处几乎消失了。

另一种选择是使用魔术方法作为 getter/setter。这将为 DIC 提供一个更像您在代码中想要的 API，您甚至可以将它们用作 Pimple`ArrayAccess`代码的包装器（尽管此时您最好编写一个专门构建的 DIC）。包装 Pimple 的现有方法可能看起来像这样：

```
public function __call($method, $args) {
    if("set" === substr($method, 0, 3)) {
        return $this[substr($method, 3)];
    }
    if("get" === substr($method, 0, 3) && isset($args[0])) {
        return $this[substr($method, 3)] = $args[0];
    }
    return null;
} 
```

您还可以使用`__set`and`__get`提供对 DIC 中服务和参数的类似对象访问，如下所示：（仍然包装 Pimple 的`ArrayAccess`方法）

```
public function __set($key, $value) {
    return $this[$key] = $value;
}

public function __get($key) {
    return $this[$key];
} 
```

除此之外，您可以完全重写 DIC 以专门使用魔术方法，并使用类似对象的 API 语法而不是实现`ArrayAccess`，但这应该很容易弄清楚：]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-19T07:42:58.440

您关心 IDE 自动完成，因为您将使用您的容器作为**服务定位器**，即您将调用您的容器。

理想情况下，您不应该这样做。服务定位器模式是一种反模式：不是注入所需的依赖项（依赖项注入），而是从容器中获取它们。这意味着**您的代码与容器耦合**。

Pimple（及其数组访问）并没有真正解决这个问题，所以我没有直接回答你的问题，但我希望它能让它更清楚。

* * *

旁注：什么是“理想”的方式？依赖注入。

切勿使用或调用容器，除非在应用程序的根目录下（例如创建控制器）。始终注入您需要的对象（依赖项），而不是注入整个容器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T00:18:29.043

由于您想要高性能并保持可配置性，因此唯一的选择是生成 DI 容器代码。

简单的选择是准备您需要的方法并编写一个生成器。像这样的东西（未经测试的代码，仅供参考）：

```
$config_file = 'config.ini';
$di_file = 'var/di.php';
if (mtime($config_file) > mtime($di_file) // check if config changed
    || mtime(__FILE__) > mtime($di_file)  // check if generator changed
{ 
    $config = parse_ini_file($config_file, true); // get DI configuration
    ob_start(); // or use fopen($di_file) instead
    echo "<", "?php\n",
        "class DIContainer {\n";
    foreach ($config_file as $service_name => $service) {
        // generate methods you want, use configuration in $service as much as possible
        echo "function create", $service_name, "() {\n",
             "  return new ", $service['class'], "();\n\n";
    }
    echo "}\n";
    file_put_contents($di_file, ob_get_contents());
    ob_end_clean();
}

require($di_file);
$dic = new DIContainer(); 
```

用法：

```
$service = $dic->createSomeService();
// Now you have instance of FooBar when example config is used 
```

示例配置文件：

```
[SomeService]
class = "FooBar"

[OtherService]
class = "Dummy" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T23:46:30.413

Pimple 被设计为像数组一样被访问（它实现了[`ArrayAccess`](http://php.net/manual/en/class.arrayaccess.php)接口）。如果您想要一个类似方法的接口，只需扩展 Pimple 并使用[`__call()`](http://www.php.net/manual/en/language.oop5.overloading.php#object.call)魔法方法：

```
class Zit extends Pimple
{
    public function __call($method, array $args)
    {
        $prefix = substr($method, 0, 3);
        $suffix = isset($method[3])
                ? substr($method, 3)
                : NULL;

        if ($prefix === 'get') {
            return $this[$suffix];
        } elseif ($prefix === 'set') {
            $this[$suffix] = isset($args[0])
                           ? $args[0]
                           : NULL;
        }
    }
} 
```

用法：

```
$zit = new Zit();

// equivalent to $zit['Foo'] = ...
$zit->setFoo(function() {
    return new Foo();
});

// equivalent to ... = $zit['Foo']
$foo = $zit->getFoo(); 
```

至于为什么 Pimple 没有开箱即用的这个功能，我不知道。可能只是为了让它尽可能简单。

* * *

**编辑：**

关于 IDE 自动完成功能，它们也不能用于像这样的魔术方法。`@property`一些编辑器允许您使用and来提供 doc-block 提示来弥补这一点`@method`，我相信。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T15:02:36.777

我们最终采用了两种方法的混合。

在 dic Pimple 内部管理事物，外部对象通过 getter 检索。

例如

```
abstract class DicAbstract {

    /**
     * @var \Pimple
     */
    protected $_dic;

    /**
     * Initialise the pimple container
     */
    public function __construct()
    {
        $this->_dic = new \Pimple();

        $this->defineContainer();
    }

    /**
     * Define dependency items
     */
    protected abstract function defineContainer();
} 
```

* * *

```
class Dic extends DicAbstract {

    /**
     * @return \Component\Error\Manager
     */
    public function errorManager()
    {
        return $this->_dic['errorManager'];
    }

    /**
     * @return SomethingElse
     */
    public function somethingElse()
    {
        return $this->_dic['somethingElse'];
    }

    /**
     * Define the container
     */
    protected function defineContainer()
    {
        $this->_dic['errorTypesGeneral'] = function() {
            return new \Component\Error\Type\General();
        };

        $this->_dic['errorTypesSecurity'] = function() {
            return new \Component\Error\Type\Security();
        };

        $this->_dic['errorManager'] = function($dic) {
            $errorManager = new \Component\Error\Manager();

            $errorManager->registerMessages($dic['errorTypesGeneral']);
            $errorManager->registerMessages($dic['errorTypesSecurity']);

            return $errorManager;
        };
    }

} 
```

# c# - WPF中带有FolderBrowserDialog的DialogResult

> ID：14813506
> 
> 赞同：9
> 
> 时间：2013-02-11T13:58:03.297
> 
> 标签：c#, wpf, folderbrowserdialog

我第一次在 WPF 中实现 FolderBrowserDialog，但我一点也不喜欢它......

除了我发现我的项目中没有引用 Windows.Forms 的问题之外，现在我在尝试查看 DialogResult 返回值是什么时遇到了麻烦......

使用 OpenFileDialog，过去我是这样完成的：

```
OpenFileDialog ofd = new OpenFileDialog();
Nullable<bool> result = ofd.ShowDialog();

if (result == true)
{
    // all went well, carry on and do your thing here
} 
```

不幸的是，我现在收到了关于从 DialogResult 类型转换为 bool 以及任何你有的东西的错误。

似乎找不到任何关于如何在 WPF 中使用对话框来完成此步骤的信息，任何人都可以解释一下吗？

提前致谢！

**编辑**

这是我修改后的代码，没有类型转换错误。我不确定要检查什么值`result`。通常我会使用`DialogResult.OK`except 在这里没有显示为有效值。

```
 private void btnBrowse_Click(object sender, RoutedEventArgs e)
    {
        if (cmbTemplate.SelectedItem == "Blockbusters")
        {
            FolderBrowserDialog fbd = new FolderBrowserDialog();

            DialogResult result = fbd.ShowDialog();

            //
            // ERROR: 'System.Nullable<bool>' does not contain a definition for 'OK'
            // and no extention method 'OK' accepting a first argument of type
            // 'System.Nullable<bool>' could be found.
            //
            if (result == DialogResult.OK)
            {
                txtSource.Text = fbd.SelectedPath;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-12T07:22:56.217

好的，事实证明这里其他答案的所有答案都是正确的。

他们只是错过了一件事，我认为那是我的错......

每次我`DialogResult`在我的 if 语句中尝试使用 Intellisense 时看到它（正如我被告知要使用的那样，我看到了这个：

> 布尔？Window.Dialog.Result
> 获取或设置对话框结果值，该值是从
> System.Windows.Window.ShowDialog() 方法返回的值。
> 
> 例外：
> System.InvalidOperationException

这个特殊的 DialogResult 对象不是我要找的对象。

最终起作用的是以下内容：

```
DialogResult result = fbd.ShowDialog();

if (result == System.Windows.Forms.DialogResult.OK)
{
    // do work here
} 
```

值得注意的是，我确实`System.Windows.Forms`在 usings 中引用过，这就是为什么我从未想过像上面的代码片段那样从 System 中引用该类。我以为它无论如何都在使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:58:32.603

[DialogResult](http://msdn.microsoft.com/en-us/library/system.windows.forms.dialogresult.aspx)是一个枚举，定义了一些值来指示对话框的返回值。

在您的代码中，您应该检查是否`DialogResult.OK`使用对话框中选择的路径来初始化变量。`DialogResult.OK`在对话框中按下“确定”按钮时返回，否则`DialogResult.Cancel`返回。

```
if (result == DialogResult.OK){
  txtSource.Text = fbd.SelectedPath;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-14T10:24:02.090

这里迟到的答案，但为什么不只是。.

```
private void SelectFolder()
{
    var dialog = new FolderBrowserDialog();
    var status = dialog.ShowDialog(); // ShowDialog() returns bool? (Nullable bool)
    if (status.Equals(true))
    {
        SelectedFolderPath = dialog.SelectedPath;
    }
} 
```

您可以在调试会话中看到结果。单击取消按钮时返回 false。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-12T06:51:00.430

DialogResult.（好的，取消你想检查的任何内容），

```
if (result == DialogResult.OK) // DialogResult.(Your desired result, select from the list it generates)
{
    txtSource.Text = fbd.SelectedPath;
} 
```

# vbscript - 在 vbscript 中使用 HTA

> ID：14813507
> 
> 赞同：3
> 
> 时间：2013-02-11T13:58:03.403
> 
> 标签：vbscript, hta, wsh

在为 VBscript 使用 HTA 用户表单时，我发现 HTA 不支持 WScript 及其对象/方法。

有没有其他方法可以创建用户表单，或者有什么方法可以让 HTA 支持 WScript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T09:46:25.457

另一种方法`WScript.Echo`是简单地将内容添加到 DOM：

```
<script language="vbscript">
    dim div: set div = document.getElementById("output")
    div.innerText = "output"
</script>

<div id="output"/> 
```

或者如果你想要一个对话框，你可以使用`MsgBox()`

```
<script language="vbscript">
    MsgBox "output"
</script> 
```

你可以`Scripting.FileSystemObject`不用`WScript`

```
<script language="vbscript">
    dim fso: set fso = CreateObject("Scripting.FileSystemObject")
    dim path: path = fso.GetAbsolutePathName(".")
    '... etc
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T15:51:12.447

将您的`Wscript`代码放入[`.wsf`](http://msdn.microsoft.com/en-us/library/x4d5a2tx%28v=vs.84%29.aspx)-file 并像这样调用脚本：

```
shell=new ActiveXObject('WScript.Shell');
shell.Exec('WScript //Job:job_id PATH_TO_YOUR_WSF_FILE'); 
```

通过您还可以使用HTA 中不可用的`.wsf`方法`WScript.Sleep()`，例如 等。`WScript.SendKeys()`

MSDN 上的更多信息：[Windows 脚本主机](http://msdn.microsoft.com/en-us/library/98591fh7%28v=vs.84%29.aspx)

# python - SQLAlchemy 可以显式交叉连接吗？

> ID：14813516
> 
> 赞同：3
> 
> 时间：2013-02-11T13:58:27.083
> 
> 标签：python, sqlalchemy

是否可以使用 SQLAlchemy 生成显式 CROSS JOIN 查询，如下例所示：

```
SELECT * 
FROM foo 
CROSS JOIN bar 
```

如果是，如何？

我猜想类似的东西

```
session.query(Foo).crossjoin(Bar).all() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-02T10:29:13.180

您可以使用内连接制作笛卡尔积，应用始终为真的条件。例如对于 SQLAlchemy ORM：

```
from sqlalchemy.sql.expression import literal

session.query(Foo, Bar).join(Bar, literal(True)).all() 
```

SQLAlchemy目前只有`join`和`outerjoin`函数（v0.9）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T14:52:49.193

SQLAlchemy doesn't have explicit way to specify CROSS JOIN. IMHO all major relation databases do CROSS JOIN when you has tables in FROM clause, but no join criteria between them.

I would suggest to use SQL Expression API and not SQLAlchemy ORM API for tasks like that - so you'll get resulting records and otherwise SQLAlchemy ORM API will try to do object mapping. For your example I assume that Foo and Bar are mapped classes:

```
connection.execute(select[Foo.__table__,Bar.__table__]) 
```

Please see [example from the SQLAlchemy manual](http://docs.sqlalchemy.org/en/rel_0_8/core/tutorial.html?highlight=cartesian%20product#selecting) describing how to make query generate Cartesian product; each row from the users table is produced against each row from the addresses table:

```
>>> for row in conn.execute(select([users, addresses])):
...     print row  
SELECT users.id, users.name, users.fullname, addresses.id, addresses.user_id, addresses.email_address
FROM users, addresses
() 
```

# c# - 如何按值对这个整数列表列表词典词典进行排序？

> ID：14813517
> 
> 赞同：-1
> 
> 时间：2013-02-11T13:58:40.963
> 
> 标签：c#, sorting, dictionary

您好，我在按 int 值排序该字典时遇到了一点问题。

这是字典：

```
_cleanHelper = 
    new Dictionary<Direction, Dictionary<CleanTypes, List<List<int>>>>()
{
    {
        Direction.North, new Dictionary<CleanTypes, List<List<int>>>()
        {
            {
                CleanTypes.Walled, new List<List<int>>()
                { 
                    new List<int>()
                    {
                        0, -1
                    },
                    new List<int>()
                    {
                        1, -1
                    },
                    new List<int>()
                    {
                        1, 0
                    },
                    new List<int>()
                    {
                        1, 1
                    }, 
                    new List<int>()
                    {
                        0, 1
                    }
                }
            },
            {
                CleanTypes.Close, new List<List<int>>()
                { 
                    new List<int>()
                    {
                        0, 0
                    }
                }
            },
            {
                CleanTypes.Recurse, new List<List<int>>()
                { 
                    new List<int>()
                    {
                        -1, 0
                    }
                }
            }
        }
    },
    {
        Direction.South, new Dictionary<CleanTypes, List<List<int>>>()
        {
            {
                CleanTypes.Walled, new List<List<int>>()
                { 
                    new List<int>()
                    {
                        0, -1
                    },
                    new List<int>()
                    {
                        -1, -1
                    },
                    new List<int>()
                    {
                        -1, 0
                    },
                    new List<int>()
                    {
                        -1, 1
                    }, 
                    new List<int>()
                    {
                        0, 1
                    }
                }
            },
            {
                CleanTypes.Close, new List<List<int>>()
                { 
                    new List<int>()
                    {
                        0, 0
                    }
                }
            },
            {
                CleanTypes.Recurse, new List<List<int>>()
                { 
                    new List<int>()
                    {
                        1, 0
                    }
                }
            }
        }
    },
    {
        Direction.West, new Dictionary<CleanTypes, List<List<int>>>()
        {
            {
                CleanTypes.Walled, new List<List<int>>()
                { 
                    new List<int>()
                    {
                        -1, 0
                    },
                    new List<int>()
                    {
                        -1, 1
                    },
                    new List<int>()
                    {
                        0, 1
                    },
                    new List<int>()
                    {
                        1, 1
                    }, 
                    new List<int>()
                    {
                        1, 0
                    }
                }
            },
            {
                CleanTypes.Close, new List<List<int>>()
                { 
                    new List<int>()
                    {
                        0, 0
                    }
                }
            },
            {
                CleanTypes.Recurse, new List<List<int>>()
                { 
                    new List<int>()
                    {
                        0, -1
                    }
                }
            }
        }
    },
    {
        Direction.East, new Dictionary<CleanTypes, List<List<int>>>()
        {
            {
                CleanTypes.Walled, new List<List<int>>()
                { 
                    new List<int>()
                    {
                        -1, 0
                    },
                    new List<int>()
                    {
                        -1, -1
                    },
                    new List<int>()
                    {
                        0, -1
                    },
                    new List<int>()
                    {
                        1, -1
                    }, 
                    new List<int>()
                    {
                        1, 0
                    }
                }
            },
            {
                CleanTypes.Close, new List<List<int>>()
                { 
                    new List<int>()
                    {
                        0, 0
                    }
                }
            },
            {
                CleanTypes.Recurse, new List<List<int>>()
                { 
                    new List<int>()
                    {
                        0, 1
                    }
                }
            }
        }
    }
}; 
```

在运行时，我制作了几个副本，并且需要有一种方法按整数值升序对它们进行排序。我将如何最好地做到这一点？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-11T14:14:00.627

我想您想更改包含的值。这意味着这可能是您所追求的：

```
foreach (var item in _cleanHelper)
{
    foreach (var jtem in item.Value)
    {
        jtem.Value.Sort((a, b) =>
        {
            int cmp = a[0].CompareTo(b[0]);
            return (cmp == 0) ? a[1].CompareTo(b[1]) : cmp;
        });
    }
} 
```

也就是说，我永远不会像这样实现它......我可能会为坐标创建一个“点”类，并查看您用于字典的键，我可能会将它们实现为单个“方向”类或类似的东西。这可能会使您的代码更具可读性，并且作为奖励使结构更易于使用 f.ex 遍历。林克。

# c# - 还原数据库“服务器‘xxx’的还原失败”

> ID：14813523
> 
> 赞同：1
> 
> 时间：2013-02-11T13:59:01.223
> 
> 标签：c#, sql, database, restore, database-restore

我有个问题。我尝试了像 belov 这样的代码。但我得到了例外。例外是：

```
"Restore failed for Server 'SMART0090\SQL2008RR2'."  FailedOperationException. .... the error is at "restore.SqlRestore(server);" line 
```

你怎么看这个问题？代码是：

```
public void RestoreToDatabase(string NewDatabaseName, string BackUpFile, string ServerName, string UserName, string Password)
    {
        ServerConnection connection = new ServerConnection(ServerName, UserName, Password);
        Server sqlServer = new Server(connection);
        Microsoft.SqlServer.Management.Smo.Server server = new Microsoft.SqlServer.Management.Smo.Server(connection);
        Database database = new Database(server, NewDatabaseName);
        database.Create();

        database.Refresh();

        Restore restore = new Restore();

        restore.NoRecovery = false;

        restore.Action = RestoreActionType.Database;

        BackupDeviceItem bdi = default(BackupDeviceItem);

        bdi = new BackupDeviceItem(BackUpFile, DeviceType.File);

        restore.Devices.Add(bdi);

        restore.Database = NewDatabaseName;

        restore.ReplaceDatabase = true;

        restore.PercentCompleteNotification = 10;

        restore.SqlRestore(server);

        database.Refresh();

        database.SetOnline();

        server.Refresh();
    } 
```

编辑：所有异常消息都是这样的：![在此处输入图像描述](../Images/a0a4fced9eed90a0ef842355a0e858c3.png)

谢谢你的建议....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:56:34.063

最后我找到了解决方案。错误是：当您恢复 *.bak 文件时，*.mdf 和 *.ldf 文件被复制到一个特殊目录。例如：当我恢复 *.bak 文件时，我的 *.mdf 和 *.ldf 文件复制到“C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQL2008RR2\MSSQL\DATA\”下。所以：如果 *.mdf 或 *.ldf 文件有相同的名称，你可以像我一样得到异常。我通过更改 *.mdf 和 *.ldf 文件路径来解决它。我写了 belov 代码，它正在工作。

**C#代码是：**

```
 /// <summary>
    /// Var olan backup ın restore edilmesini sağlar
    /// </summary>
    /// <param name="NewDatabaseName">new database name</param>
    /// <param name="BackUpFile">backup file path</param>
    /// <param name="ServerName">server name</param>
    /// <param name="UserName">user name</param>
    /// <param name="Password">password</param>
    public void RestoreToDatabase(string NewDatabaseName, string BackUpFile, string ServerName, string UserName, string Password, string restorePath)
    {
        string provider = "Server    =" + ServerName +
                   ";Database =" + "master" +
                   ";User Id  =" + UserName +
                   ";password =" + Password +
                   "; Connect Timeout=2" +
                   ";Trusted_Connection=False";

        SqlConnection conn = new SqlConnection(provider);

        try
        {
            string ConnectionString = @"Data Source= " + ServerName + ";Initial Catalog=AudioMaster;Integrated Security=True";
            ServerConnection ServerConn = null;
            if (UserName == "" && Password == "")
            {
                ServerConn = new ServerConnection(ServerName);
            }
            else if (UserName != "" && Password != "")
            {
                ServerConn = new ServerConnection(ServerName, UserName, Password);
            }

            Server server = null;

            RegistryKey rk = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Microsoft\Microsoft SQL Server");
            String[] instances = (String[])rk.GetValue("InstalledInstances");

            server = new Server(ServerConn);
        first:
            foreach (Microsoft.SqlServer.Management.Smo.Database db in server.Databases)
            {
                if (NewDatabaseName == db.Name)
                {
                    UpdateScreen("> Same database name detected", Color.Red);
                    NewDatabaseName = Microsoft.VisualBasic.Interaction.InputBox(NewDatabaseName + " database allready exist. Please enter new database name ",
                    "Database owerride error", "Enter a name");
                    UpdateScreen("> New database name : " + NewDatabaseName, Color.Green);
                    goto first;
                }
            }
        }
        catch (Exception ex)
        {
            WriteError(ex);
            UpdateScreen("> An error ocurred when database names searching operation. Details : " + ex.Message, Color.Red);
        }

        try
        {
            conn.Open();
            top :
            FileInfo file = new FileInfo(Path.Combine(dirDebug, "scriptTry.txt"));
            string mdfName = String.Empty;
            SqlCommand cmd = new SqlCommand();

            cmd.CommandText = file.OpenText().ReadToEnd();
            cmd.Connection = conn;

            cmd.Parameters.Add("@Path", BackUpFile);

            cmd.Parameters.Add("@RestorePath", restorePath);

            cmd.Parameters.Add("@databaseName", NewDatabaseName);

            mdfName = cmd.ExecuteScalar().ToString();
            string[] names = Directory.GetFiles(restorePath, "*.mdf");

            int sayac = 0;
            for(int i=0; i<names.GetLength(0); i++) 
            {
                if (mdfName == GetSubPath(names[i].Replace(".mdf", "")))
                    sayac++;
            }

            if (sayac !=0)
            {
                MessageBox.Show("Please enter new directory for database *.mdf and *.ldf file", "Database owerride error",
                MessageBoxButtons.OK, MessageBoxIcon.Exclamation);

                try
                {
                    UpdateScreen("> Same path detected for *.mdf and *.ldf file.", Color.Red);
                    FolderBrowserDialog fbd = new FolderBrowserDialog();
                    fbd.ShowDialog();
                    if (fbd.SelectedPath == "")
                        return;
                    else
                    {
                        restorePath = fbd.SelectedPath + "\\";
                    }
                    UpdateScreen("> Selected new path for *.mdf and *.ldf file : " + fbd.SelectedPath, Color.Green);
                    goto top; 
                }
                catch (Exception exx)
                {
                    WriteError(exx);
                    UpdateScreen("> An error ocurred when database restore. Details : " + exx.Message, Color.Red);
                }
            }

            file = new FileInfo(Path.Combine(dirDebug, "backup script.txt"));

            cmd = new SqlCommand();

            cmd.CommandText = file.OpenText().ReadToEnd();
            cmd.Connection = conn;

            cmd.Parameters.Add("@Path", BackUpFile);

            cmd.Parameters.Add("@RestorePath", restorePath);

            cmd.Parameters.Add("@databaseName", NewDatabaseName);

            cmd.ExecuteNonQuery();

            conn.Close();
        }
        catch (Exception ex)
        {
            WriteError(ex);
        }
    } 
```

**"scriptTry.txt" SQL 代码是：**

```
use master

--DECLARE @Path VARCHAR(1000)= 'C:\bekap.bak',
--        @RestorePath NVARCHAR(max) = 'C:\New folder\',
--        @databaseName VARCHAR(1000)= 'isim'

DECLARE @Table TABLE
    (
      LogicalName VARCHAR(128) ,
      [PhysicalName] VARCHAR(128) ,
      [Type] VARCHAR ,
      [FileGroupName] VARCHAR(128) ,
      [Size] VARCHAR(128) ,
      [MaxSize] VARCHAR(128) ,
      [FileId] VARCHAR(128) ,
      [CreateLSN] VARCHAR(128) ,
      [DropLSN] VARCHAR(128) ,
      [UniqueId] VARCHAR(128) ,
      [ReadOnlyLSN] VARCHAR(128) ,
      [ReadWriteLSN] VARCHAR(128) ,
      [BackupSizeInBytes] VARCHAR(128) ,
      [SourceBlockSize] VARCHAR(128) ,
      [FileGroupId] VARCHAR(128) ,
      [LogGroupGUID] VARCHAR(128) ,
      [DifferentialBaseLSN] VARCHAR(128) ,
      [DifferentialBaseGUID] VARCHAR(128) ,
      [IsReadOnly] VARCHAR(128) ,
      [IsPresent] VARCHAR(128) ,
      [TDEThumbprint] VARCHAR(128)
    )

DECLARE @LogicalNameData VARCHAR(128) ,
    @LogicalNameLog VARCHAR(128)
INSERT  INTO @table
        EXEC ( '
RESTORE FILELISTONLY 
   FROM DISK=''' + @Path + '''
   '
            )

DECLARE @restoreScript NVARCHAR(max)='RESTORE DATABASE [' + @databaseName + '] FROM DISK =''' + @Path + ''' WITH FILE = 1 '

SELECT  @restoreScript +=CHAR(10) + ' ,MOVE  ''' +  LogicalName + ''' TO ''' + 
        @RestorePath  + LogicalName + RIGHT(PhysicalName,4) + ''''
                         FROM   @Table
                         WHERE  Type = 'D'

 SELECT  @restoreScript += ' ,MOVE  ''' +  LogicalName + ''' TO ''' + @RestorePath  + LogicalName + '.ldf'''
                        FROM    @Table
                        WHERE   Type = 'L'

SET @restoreScript += ' , NOUNLOAD, REPLACE, STATS = 10 '

--SELECT  @restoreScript
select LogicalName from @Table
--EXEC  (@restoreScript) 
```

**“backup script.txt”的 SQL 代码是：**

```
use master

--DECLARE @Path VARCHAR(1000),
--        @RestorePath NVARCHAR(max),
--        @databaseName VARCHAR(1000)

DECLARE @Table TABLE
    (
      LogicalName VARCHAR(128) ,
      [PhysicalName] VARCHAR(128) ,
      [Type] VARCHAR ,
      [FileGroupName] VARCHAR(128) ,
      [Size] VARCHAR(128) ,
      [MaxSize] VARCHAR(128) ,
      [FileId] VARCHAR(128) ,
      [CreateLSN] VARCHAR(128) ,
      [DropLSN] VARCHAR(128) ,
      [UniqueId] VARCHAR(128) ,
      [ReadOnlyLSN] VARCHAR(128) ,
      [ReadWriteLSN] VARCHAR(128) ,
      [BackupSizeInBytes] VARCHAR(128) ,
      [SourceBlockSize] VARCHAR(128) ,
      [FileGroupId] VARCHAR(128) ,
      [LogGroupGUID] VARCHAR(128) ,
      [DifferentialBaseLSN] VARCHAR(128) ,
      [DifferentialBaseGUID] VARCHAR(128) ,
      [IsReadOnly] VARCHAR(128) ,
      [IsPresent] VARCHAR(128) ,
      [TDEThumbprint] VARCHAR(128)
    )

DECLARE @LogicalNameData VARCHAR(128) ,
    @LogicalNameLog VARCHAR(128)
INSERT  INTO @table
        EXEC ( '
RESTORE FILELISTONLY 
   FROM DISK=''' + @Path + '''
   '
            )

DECLARE @restoreScript NVARCHAR(max)='RESTORE DATABASE [' + @databaseName + '] FROM DISK =''' + @Path + ''' WITH FILE = 1 '

SELECT  @restoreScript +=CHAR(10) + ' ,MOVE  ''' +  LogicalName + ''' TO ''' + 
        @RestorePath  + LogicalName + RIGHT(PhysicalName,4) + ''''
                         FROM   @Table
                         WHERE  Type = 'D'

 SELECT  @restoreScript += ' ,MOVE  ''' +  LogicalName + ''' TO ''' + @RestorePath  + LogicalName + '.ldf'''
                        FROM    @Table
                        WHERE   Type = 'L'

SET @restoreScript += ' , NOUNLOAD, REPLACE, STATS = 10 '

--SELECT  @restoreScript
EXEC  (@restoreScript) 
```

# python - numpy的泊松置信区间

> ID：14813530
> 
> 赞同：9
> 
> 时间：2013-02-11T13:59:28.137
> 
> 标签：python, math, numpy, statistics, scipy

我试图将泊松连续误差条放在我用 matplotlib 制作的直方图上，但我似乎找不到一个 numpy 函数，假设泊松数据会给我一个 95% 的置信区间。理想情况下，该解决方案不依赖于 scipy，但任何事情都会奏效。有这样的功能吗？我发现了很多关于引导的信息，但在我的情况下这似乎有点过分了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T12:25:45.487

我最终根据[在 Wikipedia 上找到的一些属性](http://en.wikipedia.org/wiki/Poisson_distribution#Confidence_interval)编写了自己的函数。

```
def poisson_interval(k, alpha=0.05): 
    """
    uses chisquared info to get the poisson interval. Uses scipy.stats 
    (imports in function). 
    """
    from scipy.stats import chi2
    a = alpha
    low, high = (chi2.ppf(a/2, 2*k) / 2, chi2.ppf(1-a/2, 2*k + 2) / 2)
    if k == 0: 
        low = 0.0
    return low, high 
```

这将返回连续（而不是离散）边界，这在我的领域中更为标准。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-11T15:00:31.573

使用[`scipy.stats.poisson`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.poisson.html), 和`interval`方法：

```
>>> scipy.stats.poisson.interval(0.95, [10, 20, 30])
(array([  4.,  12.,  20.]), array([ 17.,  29.,  41.])) 
```

尽管计算非整数值的泊松分布的意义有限，但可以计算 OP 要求的*确切*置信区间，它可以按如下方式完成：

```
>>> data = np.array([10, 20, 30])
>>> scipy.stats.poisson.interval(0.95, data)
(array([  4.,  12.,  20.]), array([ 17.,  29.,  41.]))
>>> np.array(scipy.stats.chi2.interval(.95, 2 * data)) / 2 - 1
array([[  3.7953887 ,  11.21651959,  19.24087402],
       [ 16.08480345,  28.67085357,  40.64883744]]) 
```

* * *

也可以使用以下`ppf`方法：

```
>>> data = np.array([10, 20, 30])
>>> scipy.stats.poisson.ppf([0.025, 0.975], data[:, None])
array([[  4.,  17.],
       [ 12.,  29.],
       [ 20.,  41.]]) 
```

但是因为分布是离散的，所以返回值将是整数，并且置信区间不会完全跨越 95%：

```
>>> scipy.stats.poisson.ppf([0.025, 0.975], 10)
array([  4.,  17.])
>>> scipy.stats.poisson.cdf([4, 17], 10)
array([ 0.02925269,  0.98572239]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-05T15:34:17.700

这个问题在天文学（我的领域！）中出现了很多，这篇论文是这些置信区间的首选参考：[Gehrels 1980](http://articles.adsabs.harvard.edu/cgi-bin/nph-iarticle_query?1986ApJ...303..336G&data_type=PDF_HIGH&whole_paper=YES&type=PRINTER&filetype=.pdf)

对于泊松统计的任意置信区间，它有很多数学运算，但是对于两侧的 95% 置信区间（对应于 2-sigma 高斯置信区间，或本文上下文中的 S=2）一些测量 N 个事件时的置信上限和下限的简单分析公式是

```
upper = N + 2\. * np.sqrt(N + 1) + 4\. / 3.
lower = N * (1\. - 1\. / (9\. * N) - 2\. / (3\. * np.sqrt(N))) ** 3. 
```

我已经为你把它们放在 Python 格式的地方了。您只需要 numpy 或您喜欢的其他平方根模块。请记住，这些将为您提供事件的上限和下限 - 而不是 +/- 值。您只需从这两个中减去 N 即可得到这些。

请查阅论文以了解这些公式对于您需要的置信区间的准确性，但对于大多数实际应用来说，这些公式应该足够准确。

# c# - 递归地将所有父母放入列表

> ID：14813535
> 
> 赞同：1
> 
> 时间：2013-02-11T13:59:37.550
> 
> 标签：c#, asp.net-mvc, entity-framework, razor

我有一个 Category 对象（使用 EF 获取），它有一个导航对象 Parent，它基本上是另一个 Category。

这些 Category 对象不断递归，直到 Parent 为空。

我需要得到什么：

```
<ul>
    <li>Highest level category (parent=null)</li>
    <li>
        <ul>
            <li>Second highest level category</li>
            <ul>
                <li>Local category</li>
            </ul>
        <ul>
    </li>
</ul> 
```

最好没有大量的字符串操作（因为涉及大量的类和其他东西），并且纯粹使用递归视图。现在的问题是，我不知道它应该如何工作。如果我从最高级别下降会很容易，但我需要上升（向后）。

是）我有的：

```
@model Domain.Category

@{
    ViewBag.Recursion = (int) ViewBag.Recursion + 1;
}

@if (Model.Parent != null)
{
    @Html.Partial("_RecursiveCategory", Model.Parent)
    <li>
        <ul class="categorylist">
            <li>@Html.ActionLink(Model.Name, "Index", "Categories", new {Model.Id, name = Model.FriendlyName}, null)</li>
        </ul>
    </li>
}
else
{
    <li>@Html.ActionLink(Model.Name, "Index", "Categories", new {Model.Id, name = Model.FriendlyName}, null)</li>
} 
```

这显然可以达到二级，但从那里开始，它们都在同一条线上。

那么，谁能想到一个很好的解决方案来解决这个问题？再一次，没有大量的字符串连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:19:32.863

尝试以下内容：

```
private string GenerateUL(IQueryable<Menu> menus)
{
    var sb = new StringBuilder();

    sb.AppendLine("<ul>");
    foreach (var menu in menus)
    {
        if (menu.Menus.Any())
        {
            sb.AppendLine("<li>" + menu.Text);
            sb.Append(GenerateUL(menu.Menus.AsQueryable()));
            sb.AppendLine("</li>");
        } 
        else
            sb.AppendLine("<li>" + menu.Text + "</li>");
        }
    }
    sb.AppendLine("</ul>");

    return sb.ToString();
} 
```

控制器

```
public ActionResult SomeAction()
{
    return View(GenerateUL(Category.Children));
} 
```

看法

```
@model string

@{
    ViewBag.Recursion = (int) ViewBag.Recursion + 1;
}

@if (Model != null)
{
    @Html.Partial("_RecursiveCategory", Model.Parent)
    @Model
}
else
{
    <li>@Html.ActionLink(Model.Name, "Index", "Categories", new {Model.Id, name = Model.FriendlyName}, null)</li>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:00:39.997

您可能需要调整创建的 ul/li，但这里是`View`：

```
@functions{

MvcHtmlString CreateTree(MvcApplication2.Models.Category  category)
{
    var swriter  = new StringWriter();
    var writer = new System.Xml.XmlTextWriter(swriter);

    CreateTree(category, writer);

    writer.Close();

    return new MvcHtmlString(swriter.ToString());
}

void CreateTree(MvcApplication2.Models.Category  category, System.Xml.XmlWriter outputWriter)
{
    if (category.Parent != null)
    {
        CreateTree(category.Parent, outputWriter);
    }

    // bubble up after recursion
    outputWriter.WriteStartElement("ul");
    outputWriter.WriteElementString("li", category.Title);
    outputWriter.WriteStartElement("li");
}  

}

    <div>

    @CreateTree(ViewBag.Category)

    </div> 
```

# php - Wordpress：更改帖子相对于数组的顺序

> ID：14813540
> 
> 赞同：0
> 
> 时间：2013-02-11T13:59:41.777
> 
> 标签：php, wordpress

在 Wordpress 中，我试图按特定顺序获取关于包含帖子 ID 的数组的帖子。

我尝试使用 pre_get_posts 和 $query->set 函数来设置 post__in。但即使它包含数组中的帖子，它也会按帖子 ID 对它们进行重新排序。

但我想保持数组中的顺序。

```
function do_sortbyvotes($query)
{
if(get_query_var('sortbyvote') == 1) {
    $query->set('post__in',array(109, 152, 127)); 
}
}

add_action( 'pre_get_posts', 'do_sortbyvotes' ); 
```

这不按我想要的方式工作，它重新排序..

如果没有 Wordpress 按 ID 重新排序帖子，我如何实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:53:19.600

[`orderby`](http://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters)在您的查询中添加一个。

```
$query->set('orderby','post__in'); 
```

这个“orderby”选项仅在 WordPress 3.5 之后才可用，因此它是最近添加的。

# web-services - WSO2 身份服务器

> ID：14813542
> 
> 赞同：0
> 
> 时间：2013-02-11T13:59:49.953
> 
> 标签：web-services, wso2

有没有办法从远程应用程序使用 WSO2 Identity Server 简单地验证用户名和密码？

我的场景：

1.  客户端发送`username:password`到服务器
2.  服务器在 WSO2 IS 中验证它
3.  服务器为客户端创建会话。

那么如何在不登录 WSO2 IS 的情况下对用户名和密码进行简单的验证呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:27:50.217

您可以尝试 WSO2 身份服务器的 AuthenticationAdmin API - https://[hostname]:9443/services/RemoteUserStoreManagerService?wsdl

使用 authenticate 方法，它将为身份验证事件返回 true 或 false。请记住，这是一个管理服务，因此您需要通过身份验证才能使用此服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-05T05:02:00.367

如果用户是您的应用程序的外部实体，理想情况下您的应用程序不应访问该用户的凭据。这应该传递给身份服务器本身，而无需通过您的应用程序代理凭据。

此外，如果您希望 Identity Server 为您的用户维护 SSO（单点登录）会话，您可能需要使用标准化的身份验证 (SSO) 协议，如 OpenIdConnect 和 WSO2 来满足上述两个原因。

通过这样做，您的用户将重定向到 WSO2 服务器的身份验证端点的登录窗口（当然通过浏览器）进行登录。（而不是为您的应用程序的登录提供凭据）此外，如果您有任何其他应用程序也注册到 WSO2 IS 作为服务提供者应用程序，并且用户尝试从同一浏览器对该应用程序进行身份验证，WSO2 将请注意，此浏览器已使用附加的 cookie 为该用户创建了一个会话，并在不要求返回其凭据的情况下对该用户进行身份验证。

[WSO2 OpenIdConnect](https://docs.wso2.com/display/IS530/OpenID+Connect)

# javascript - 如果 AJAX 请求在上一个请求的 5 秒内，我该如何阻止它？

> ID：14813544
> 
> 赞同：3
> 
> 时间：2013-02-11T13:59:57.973
> 
> 标签：javascript, jquery, events, event-handling

我有一个评论框，可以让用户通过按 Enter 发表评论。它使用`AJAX`（jQuery）请求来做到这一点。如果事件发生在上一条评论的 5 秒内并显示消息，有没有一种很好的方法来不让事件触发？还是应该在服务器端处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T14:01:46.727

根据您的用例，您可以使用`throttle`or `debounce`：

[http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/](http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/)

或者看看这个帖子：

[https://stackoverflow.com/a/8056049/190596](https://stackoverflow.com/a/8056049/190596)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:05:29.253

这肯定也应该在服务器上处理，因为可以绕过 javascript 限制。但是，javascript 解决方案可以节省一些流量和时间：

```
var last_req = 0;
var limit = 5000; //miliseconds
function send_comment() {
  var time = new Date().getTime();
  if(time-last_req<limit)  {
    alert("Wait please");
    return false;
  }
  last_req = time;
  $.get("comment.php", {/*data*/}, function() {});
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:13:00.823

这可以简单地用一个布尔标志来完成......

```
// declare this globally at the top of your script
var allowAjax = true;

// this would be in some event handler (on enter keypress, for example)
if (allowAjax) {
    $.ajax({
        ...
        ...
    });
} else {
    // show message saying to wait
}

allowAjax = false;

setTimeout(function() {
    allowAjax = true;
}, 5000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T14:16:11.057

我会用这个：

```
if(timerStarted){
    window.clearTimeout(timeout);
}
timerStarted = true;
timeout = window.setTimeout(function(){
    timerStarted = false;
    // ajax call
, 5000} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T14:03:10.893

这可能会帮助您完成您想做的事情：http: [//jeykeu.wordpress.com/2012/03/09/jquery-prevent-multiple-ajax-requests/](http://jeykeu.wordpress.com/2012/03/09/jquery-prevent-multiple-ajax-requests/)

您必须稍微修改它以添加一个计时器并使用它来测试是否有可能发出新请求。

# jsp - 逻辑迭代不起作用

> ID：14813547
> 
> 赞同：0
> 
> 时间：2013-02-11T14:00:07.207
> 
> 标签：jsp, struts

我正在研究 struts Web 应用程序。我在我的.JSP 文件中使用了.tld 文件。我使用了struts-logic.tld。问题是，当我在本地主机（在我的 PC 上的 Tomcat（Windows）上）以及我们的 Linux 演示服务器上运行我的应用程序时，逻辑迭代工作正常。但是当我在客户端的 Demo Linux Server 上部署这个应用程序时，逻辑迭代不起作用。这是代码：

```
<%@taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %>

<%@taglib uri="/WEB-INF/struts-html.tld" prefix="html" %>

<%@taglib uri="/WEB-INF/struts-logic.tld" prefix="logic"%>

<%@page contentType="text/html"%>

<%@page pageEncoding="UTF-8"%>

<div class="content"> 
        <% int i=1;
           String functionName = "submitFormforButton";
           String apend1 = "('";
           String apend2 = "')";
        %>
        <ul>
            <logic:iterate name="ProductsForm" id="arrayForMenuItems" property="arrayForMenuItems">
                <bean:define id="item" name="arrayForMenuItems" type="com.AmazonApiIntegration.ProductsForm"/>
                <li><a href ="javascript:<%=functionName+apend1+i+apend2%>"><span><bean:write name="item" property="titleOfMenuItem" /></span></a></li>
                <% i++;%>        
            </logic:iterate> 
       </ul>
    </div> 
```

我的代码是否有任何问题，或者我们必须以某种方式配置 Linux 演示服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:45:54.783

尝试更改`ProductsForm`为`productsForm`

# c# - 创建方法

> ID：14813548
> 
> 赞同：-1
> 
> 时间：2013-02-11T14:00:10.577
> 
> 标签：c#, methods, console

我正在创建一个基于文本的 RPG。你能帮我创建一个方法吗？我想学习如何创建一个方法，这样我就不必复制粘贴`"help"` `case`到每个循环中。

这是我希望该方法执行的操作：

```
string command;
while (command != "exit game")
 {
    command=Console.ReadLine();

     switch(command){
     case (help):
        Console.WriteLine("List of useableverbs and nouns");
        break;
    default:
        Console.WriteLine("Invalidcommand");
        break;
      }
    } 
```

另外，我该如何设置它以使“退出游戏”退出游戏？

**我几周前开始编程**，所以任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:08:10.707

[您可以在方法](http://msdn.microsoft.com/en-us/library/ms173114%28v=vs.80%29.aspx)中将其设置为 do while 。方法创建可重用的代码。这避免了复制和粘贴相同逻辑的需要。您只需通过以下方式调用方法，而不是复制粘贴代码：

`CheckCommand();`

该方法可能看起来像...

```
private static void CheckCommand()
{
    string command;
    do
    {
        command = Console.ReadLine();
        switch (command)
        {
            case ("help"):
                Console.WriteLine("List of useable verbs and nouns");
                break;
            default:
                Console.WriteLine("Invalid command");
                break;
        }
    }
    while (command != "exit game");

} 
```

这是设置的，因此如果用户输入“退出游戏”，循环将退出。另一方面，扩展此逻辑的一个好方法是进行不[区分大小写](http://msdn.microsoft.com/en-us/library/system.string.tolower%28v=vs.71%29.aspx)的比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:06:17.143

这是一个方法：

```
void HandleCommand(string command)
{
    switch (command)
    {
        case (help):
           Console.WriteLine("List of useable verbs and nouns");
           break;
        default:
           Console.WriteLine("Invalid command");
           break;
    }
} 
```

并使用它：

```
while (command != "exit game")
{
    command=Console.ReadLine();
    HandleCommand(command);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:11:51.350

您可以使用布尔变量来向循环发出游戏结束的信号。该命令必须在循环内查询，并且由于循环开始时不知道该命令，所以我会将循环条件放在循环的末尾。

```
bool doExit = false;
do {
    string command = Console.ReadLine().ToLower();
    switch (command) {
        case "exit":
        case "quit":
            doExit = true;
            break;
        case "otherCommand":
            HandleOtherCommand();
            break;
        case "?":
        case "h":
        case "help":
            PrintHelp();
            break;
        default:
            Console.WriteLine("Invalid command!");
            PrintHelp();
            break;
    } 
} while (!doExit); 
```

使用布尔变量的优点是，当满足其他条件时，您可以轻松终止游戏。例如，当玩家赢得或输掉游戏时。

* * *

现在来说说方法。您可以将方法放在同一源代码 (Program.cs) 中或创建新类。在 Program.cs 你会写类似

```
private static void PrintHelp()
{
    Console.WriteLine("Valid commands:");
    Console.WriteLine("help, h, ?: Print this help.");
    Console.WriteLine("exit, quit: End this game.");
    Console.WriteLine("...");
} 
```

请注意，由于该`Main`方法是静态的，因此同一类中的其他方法也必须是静态的。如果您正在为命令创建其他类，您可以选择是否要创建静态类。静态类只是放置方法的地方。

```
static class GameCommands
{
     // The `public` modifier makes it visible to other classes.
    public static void PrintHelp()
    {
        ...
    }

    public static void SomeOtherCommand()
    {
        ...
    }
} 
```

`className.MethodName()`您可以使用语法调用此类方法。

```
GameCommands.PrintHelp(); 
```

如果您必须存储不同的状态（例如分数）。创建非静态类是合适的。您可以创建此类称为类实例或对象的类的副本。这实际上只复制了类的状态，而不是方法代码。非静态方法可以作用于这种状态（字段、属性）。

```
class Player
{
    // Constructor. Initializes an instance of the class (an object).
    public Player (string name)
    {
        Name = name;
    }

    // Property
    public int Score { get; private set; }

    // Property
    public string Name { get; private set; }

    // Instance method (non-static method) having a parameter.
    public void IncreaseScoreBy(int points)
    {
        Score += points;
    }

    public void PrintWinner()
    {
        Console.WriteLine("The winner is {0} with a score of {2} points." Name, Score);
    }
} 
```

你可以使用这样的类

```
Player player1 = new Player("John"); // Pass an argument to the constructor.
Player player2 = new Player("Sue");

player1.IncreaseScoreBy(5);
player2.IncreaseScoreBy(100);

if (player1.Score > player2.Score) {
    player1.PrintWinner();
} else if (player2.Score > player1.Score)
    player2.PrintWinner();
} else {
    Console.WriteLine("The score is even!");
} 
```

* * *

到目前为止，我们使用没有返回值的方法。这由替换返回类型的 void 关键字表示。

```
void MethodWithNoReturnValue() { ... } 
```

如果你有一个返回值（即你的方法是一个函数），你必须指定返回类型。该`return`语句终止函数并指定返回值。

```
double Reciprocal(double x)
{
    return 1.0 / x;
} 
```

你会在同一个班级里这样称呼它

```
double y = Reciprocal(x); 
```

或者如果它是静态的，则在它前面加上对象名称或类名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T14:07:11.743

除非你有一个名为 help 的变量，否则你会想在它周围加上引号。IE：

```
case("help"): 
```

如前所述，输入“退出游戏”应该会中断循环并关闭控制台窗口（如果您将其放入您的案例中）。它可能更简洁，例如使用常量而不是硬编码字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T14:07:34.753

在 C# 中，您可以像看起来一样创建方法。假设您想显示帮助文本，然后在任何其他方法（可能是您的主要方法）之外，您将编写以下内容：

```
static void ShowHelp() {
    Console.WriteLine("This is some text. Enter some command!");
    var command = Console.ReadLine();
    //Do other things
} 
```

然后，每当您希望显示该文本时，您都可以使用`ShowHelp()`.

# php - 未定义索引 (PHP)

> ID：14813550
> 
> 赞同：-4
> 
> 时间：2013-02-11T14:00:23.577
> 
> 标签：php, indexing

需要一些解释。我制作的表格如下：

```
<form action="test4.php" method="post">
    <select name="code">
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
        <option value="D">D</option>
        <option value="E">E</option>
    </select>
    <input type="submit" value="Cus!">
</form> 
```

然后将表单的值存储到 $code，我使用了我在论坛中找到的一行脚本

```
$code= empty ($_POST['code']) ? null : $_POST['code']; 
```

实际上它有效，但没有解释。谁能给我解释一下？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:02:03.103

[`empty()`](http://php.net/manual/en/function.empty.php)`true`如果变量是`0`, `false`, `null`, 空字符串，未定义等，则返回。

`(condition ? result-if-condition-is-true : result-if-condition-is-false)`被称为 a`ternary operator`并且[可以在 PHP 手册中找到](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)。

也可以这样写：

```
if (empty($_POST["code"])) {
    $code = null;
} else {
    $code = $_POST["code"];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:02:35.760

是[三元](http://php.net/manual/en/language.operators.comparison.php)的。语法是`var = (true) ? trueValue : falseValue;`这样的：

```
if  ( empty($_POST['code']) ) {
    $code =  null;
} else {
    $code = $_POST['code'];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T14:03:24.490

这是一个三元运算符。

三元运算符采用以下形式：

```
condition ? value_if_true : value_if_false 
```

您的示例中的行等效于以下内容：

```
if (empty($_POST["code"])) {
    $code = null;
}
else {
    $code = $_POST["code"];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T14:07:19.497

Rad，它是一个三元表达式。它只是意味着检查 $_POST['code'] 的内容，如果为 true 则设置 null 否则将值设置为 $_POST['code'] 为 $code 。

Rad 如果您得到了答案，请在答案上打勾，这将减少未决问题的数量，并将从未决问题池中删除。

# oracle - 无论如何要获取有关 Oracle 中 BLOB 字段的信息？

> ID：14813551
> 
> 赞同：0
> 
> 时间：2013-02-11T14:00:26.140
> 
> 标签：oracle, blob, cx-oracle

我正在从一个既不是我自己制作也不是我自己管理的 Oracle 数据库中导入数据。

该数据中可能有一些 BLOB 字段。

假设字段标题不能很好地描述字段的内容，并且没有 blob_type 字段，那么无论如何要知道或猜测正在存储哪种二进制数据？

基本上，我如何区分存储在 BLOB 字段中的图像与可能是大量文本之间的区别。

我想这不是 Oracle BLOB 的事情，而更像是“我如何在没有先验信息的情况下解析和解释二进制数据”的事情。

抱歉，这不是一个奇怪的问题，就是一个相当愚蠢的问题，答案可能是“不”，但我想我还是会问。

如果有帮助，我计划将 cx_Oracle 与 Python 一起使用来进行导入，尽管我怀疑这是否相关。

感谢您的时间，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:40:06.080

Oracle 数据库实际上没有任何机制可以将 BLOB 呈现为原始字符串以外的任何内容，因此它没有兴趣确定它是 Word 文档还是 iOS6 的愤怒的小鸟。

话虽如此，您可以研究 Oracle 的多媒体功能。将 blob 存储为 ORDSource 对象而不是 BLOB 可能允许您对其内容进行一些探测。 [了解更多](http://docs.oracle.com/cd/E11882_01/appdev.112/e10776/ch_comref.htm)。

# sql - 日期时间顺序

> ID：14813552
> 
> 赞同：-1
> 
> 时间：2013-02-11T14:00:29.960
> 
> 标签：sql, sql-order-by

我有一个包含新闻数据的网站，我想按时间显示最新的数据，我的字段 column_time 包含 8 个数据。为什么当我使用这个 SQL 时：

```
select * from table_name order by waktu desc 
```

结果是这样的：

```
28 Jan 2013 | 15:36:47
28 Jan 2013 | 15:30:48
27 Jan 2013 | 21:38:36
27 Jan 2013 | 21:38:32
27 Jan 2013 | 21:38:29
11 Feb 2013 | 20:41:05
11 Feb 2013 | 20:40:37
11 Feb 2013 | 20:36:11 
```

而不是这个？

```
11 Feb 2013 | 20:41:05
11 Feb 2013 | 20:40:37
11 Feb 2013 | 20:36:11
28 Jan 2013 | 15:36:47
28 Jan 2013 | 15:30:48
27 Jan 2013 | 21:38:36
27 Jan 2013 | 21:38:32
27 Jan 2013 | 21:38:29 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:09:29.340

该列按**字符**数据、类型`varchar`或`text`.
您可能希望使用`timestamp`or`datetime`作为数据类型，具体取决于您的秘密 RDBMS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:25:20.757

试试这个按最新记录*（不仅仅是时间）*排序（[演示 - 转换为 DATETIME](http://sqlfiddle.com/#!3/d41d8/8718)）

```
Select * from table_name
Order by convert(Datetime,replace(your_column,' | ',' ')) desc 
```

***或者***，如果您只需要按*时间订购*而不考虑日期，请使用；（如果您在 sql-server 2008 以上，您也可以转换为时间）

```
Order by convert(Datetime, substring(your_column,
         charindex('|',your_column,1)+2,len(your_column))) desc 
```

# c# - 在 wpf Window.OnActivate 期间防止鼠标事件

> ID：14813555
> 
> 赞同：0
> 
> 时间：2013-02-11T14:00:50.933
> 
> 标签：c#, wpf

激活窗口时是否可以防止鼠标事件？

例如，我有一个 C# 窗口，我将焦点更改为其他东西，例如浏览器。当我通过单击重新激活 c# 窗口时，我不希望执行任何鼠标事件。第一次点击窗口应该只是激活它。仅当窗口已激活时才会触发鼠标事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:27:51.637

一个事件将被触发，然后用户单击您的 wpf 控件，但您为什么不直接处理该事件？

订阅事件并防止它冒泡可视化树：

```
private void Panel_KeyDown(object sender, KeyEventArgs e)
{
    e.Handled = true;
} 
```

看看这个[链接](http://www.codeproject.com/Articles/464926/To-bubble-or-tunnel-basic-WPF-events)，它描述了 WPF 中的事件气泡和隧道。

# security - 移动 API 安全范式

> ID：14813556
> 
> 赞同：0
> 
> 时间：2013-02-11T14:00:53.980
> 
> 标签：security, api, node.js, https, webserver

我已经使用**Node.js、Redis**和**MongoDB**编写了移动 API 。但是现在我正在寻找一种在我们的系统中提供安全性的**具体方法。**这个问题是我从奥古斯特·科克霍夫臭名昭著的原则中得到启发的；

*“绝不能要求保密，而且要能够落入敌人手中而不会造成不便”*

在检查了这个原理之后，我发现在嗅探器捕获整个数据包之后**没有安全的方法来保护数据。**当然还有其他方法，例如使用**API 密钥**、使用**MD5 和 MD6**、**Triple DES**、**SHA1**等**加密算法**。但是，如果捕获了整个数据包，这也将不起作用。并且有**HTTPS、SSL证书**等安全防范标准。但是，如果有才华的人再次捕获数据包，它就可以像我们系统中的经过验证的用户一样行事。

 ******如何应用一种安全方法，即使捕获了整个数据包，系统也能够区分来自外部来源而不是我们经过验证的用户的请求。

**PS：**我认为应用带有时间戳的自定义加密算法来防止这个问题可能有点混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:59:53.267

根据 Kerckhoffs 的原则“密码系统应该是安全的，即使系统的所有内容，除了密钥，都是公共知识。” 所以密码系统的工作方式是密钥是唯一可以用来破译系统的东西。如果钥匙落到敌人手中，那么一切都结束了。

> 实际上，当您通过 Internet 通信或尝试使用密码验证您的电子邮件帐户时。您的密码永远不会以纯文本形式发送到服务器，也不会存储在服务器上。如果你这样做，它不安全。最佳安全实践是根本不存储密码（甚至不加密），而是存储加密密码的加盐哈希。

这是一个用户的一个哈希值。这是一种方式，您无法取回用户信息，只需测试它是否在数据库中。现在即使敌人控制了数据库，它也无法访问您的用户名/密码。

言归正传，不管你在通讯通道中传输什么，因为通讯通道是敌人！！！它可供其他用户使用，任何人都可以嗅探它。就像敌人在无线电中互相扫描一样。

通过通道发送的哈希可以被嗅探并用于身份验证。是的，但服务器可以使用 HTTPS 连接区分欺骗尝试和实际尝试。服务器跟踪 HTTPS 会话，如果发生这种情况会要求重新验证。HTTPS 阻止使用嗅探数据/MITM 攻击。即使sniffer拿到hash（临时票），他也不能做任何恶意的事情，用户名和密码也无法破解。

感谢 Kerckhoff，我们的密码是安全的。

如何在 node.js 上实现它？寻找 passport.js 包。它实现了当前的标准 OpenAuth。******

# regex - preg_replace 不删除不需要的时期

> ID：14813557
> 
> 赞同：1
> 
> 时间：2013-02-11T14:00:54.910
> 
> 标签：regex, preg-replace

我需要在整个 HTML 文档中搜索以下行：

```
<img alt="Suppliers" class="showme 2-4supp" src="./images/2-4supp.jpg" /> 
```

并将 替换为`./`存储在 中的变量`$prepend`。

这是我几乎可以开始工作的代码：

```
$mypage = preg_replace('/src=\"([.])*?/', "src=\"$prepend_href$1", $mypage); 
```

但是，我得到的结果是：

```
<img alt="Suppliers" class="showme 2-4supp" src="02_topic/./images/2-4supp.jpg" /> 
```

它不会`.`从字符串中删除 。我尝试了不同的方法，我可以让它添加变量，但我不能让它删除 . 从字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:05:52.197

为什么`*?`在句号前面，应该替换为：

```
$mypage = preg_replace('#src="\.(?=/)#', "src=\"$prepend_href", $mypage); 
```

# asp.net - 控制 ViewEngine 的流程

> ID：14813561
> 
> 赞同：0
> 
> 时间：2013-02-11T14:01:08.077
> 
> 标签：asp.net, asp.net-mvc-3

在我的网络应用程序上安装了自定义视图引擎：

ViewEngines.Engines.Insert(0, new CustomViewEngine1()); ...第二个是 Razor 的默认 MVC 视图引擎

并定义了我的第一个视图引擎：

```
public class CustomViewEngine1: RazorViewEngine
    {
        public CustomViewEngine1(): this(null)
        { }
        public CustomViewEngine1(IViewPageActivator viewPageActivator)
        {
            ViewLocationFormats = new string[] { "~/Views/{1}/{0}.cshtml", "~/../Framework.Web/Views/{1}/{0}.cshtml", "~/Views/Shared/{0}.cshtml", "~/../Framework.Web/Views/Shared/{0}.cshtml"  };
            MasterLocationFormats = new string[] { "~/Views/{1}/{0}.cshtml", "~/../Framework.Web/Views/{1}/{0}.cshtml", "~/Views/Shared/{0}.cshtml", "~/../Framework.Web/Views/Shared/{0}.cshtml"  };
            PartialViewLocationFormats = new string[] { "~/Views/{1}/{0}.cshtml", "~/../Framework.Web/Views/{1}/{0}.cshtml", "~/Views/Shared/{0}.cshtml", "~/../Framework.Web/Views/Shared/{0}.cshtml" };
            FileExtensions = new string[] { "cshtml" };
        }
        protected override IView CreatePartialView (ControllerContext controllerContext, string partialPath)
        {
           if (controllerContext.RequestContext.HttpContext.Request.Browser.IsMobileDevice)
           {
              return base.CreatePartialView(controllerContext, partialPath);
           }
           else
           {
              //...What i have to put here in order to let the control to the next route engine in the collection ViewEngines.Engines
           }           
        }
        protected override IView CreateView (ControllerContext controllerContext, string viewPath, string masterPath)
        {
           if (controllerContext.RequestContext.HttpContext.Request.Browser.IsMobileDevice)
           {
            return base.CreateView(controllerContext, viewPath, masterPath);
           }
           else
           {
              //...What i have to put here in order to let the control to the next route engine in the collection ViewEngines.Engines
           }
        }
    } 
```

如果请求不是由移动设备发出的，我如何完成代码（我有评论），以便使用 ViewEngines 集合中的下一个视图引擎？（这是默认的 MVC Razor View 引擎）。

提前致谢。

问候。

何塞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:54:38.430

也许这篇博文对您来说是一个很好的起点：[更好的 ASP.NET MVC 移动设备功能 ViewEngine](http://www.hanselman.com/blog/ABetterASPNETMVCMobileDeviceCapabilitiesViewEngine.aspx)

# maven - 排除在 Maven 构建中读取/替换特定文件

> ID：14813564
> 
> 赞同：1
> 
> 时间：2013-02-11T14:01:17.667
> 
> 标签：maven, ant, build, resources

我们正在使用 Maven 来构建项目。这是遗产，也是巨大的遗产。我们新添加了几个 .keystore 文件到它的资源文件夹。

问题是，一旦构建完成，.keystore 文件就会被篡改[可能是 maven 正在尝试替换/搜索某些占位符]。由于它是遗留的，项目结构非常混乱，我们没有单独的发行版，也没有其他选择，只能使用简单的构建。

我想要的是，告诉 maven 复制这些文件而不接触它们并像以前一样保持构建。

之间，在 pom.xml 中没有明确提到，试图按照这个[http://maven.apache.org/plugins/maven-resources-plugin/examples/include-exclude.html](http://maven.apache.org/plugins/maven-resources-plugin/examples/include-exclude.html)来做，但它搞砸了项目建设。

我不想篡改构建，因为它是一个巨大的遗产。我们正在使用 Ant 插件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:39:39.033

只需关闭相应的过滤`<resource/>`或为其添加过滤`<exclude/>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:37:26.843

经过大量资源后，找到了解决方案[http://maven.apache.org/plugins/maven-resources-plugin/examples/binaries-filtering.html](http://maven.apache.org/plugins/maven-resources-plugin/examples/binaries-filtering.html)

谢谢 ：）

# excel - 平均重复时间

> ID：14813570
> 
> 赞同：0
> 
> 时间：2013-02-11T14:01:27.650
> 
> 标签：excel, datetime, excel-formula, average

嗨，我有一张 Excel 表格，上面列出了我们去过的每项工作，包括日期、姓氏、邮政编码。我们的很多业务都是重复工作，所以同一个客户会多次出现在桌子上，但当然有不同的日期。

我希望计算的是 D 列每行中每个客户重复之间的平均时间。

希望大家能帮忙。

谢谢

```
 A             B            C           D
  Date of Job   Surname     Postcode    Repetition
  07/02/2013    Smith       CV32 6LP      4.3
  06/02/2013    Taylor      CV3 2UD       5.6
  06/02/2013    Green       B9 5XU        6.7
  ......        .....       ....... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:23:08.280

如果您想要每个邮政编码每次出现之间的平均天数，那么您可以通过找到最早的日期，从最晚的日期中减去并除以出现的次数（减 1）来得到它，所以假设日期在 A2:A100 中， B2:B100 中的姓氏，然后在 D2 中尝试这个“数组公式”

`=IFERROR((MAX(IF(C$2:C$100=C2,A$2:A$100))-MIN(IF(C$2:C$100=C2,A$2:A$100)))/(COUNTIF(C$2:C$100,C2)-1),"Only one order")`

用 CTRL+SHIFT+ENTER 确认

我假设您可以仅通过邮政编码来区分....

# java - Spring - ldap 认证

> ID：14813572
> 
> 赞同：0
> 
> 时间：2013-02-11T14:01:30.767
> 
> 标签：java, spring, ldap

我想通过带有spring security的ldap-server进行身份验证，这是我的security.xml：

```
<http auto-config="true" use-expressions="true">
    <intercept-url pattern="/index*" access="permitAll" />
    <form-login login-page="/login" default-target-url="/index"
        authentication-success-handler-ref="loginSuccessHandler"
        authentication-failure-handler-ref="loginFailureHandler" />
</http>

<ldap-server id="ldapServer"
    url="ldap://example.net:389/DC=example,DC=net" />
<authentication-manager>
    <ldap-authentication-provider server-ref="ldapServer"
        user-dn-pattern="CN={0}, OU=First,OU=Second,OU=Third>
    </ldap-authentication-provider>
</authentication-manager> 
```

但它抛出异常 - “引起：javax.naming.NamingException：[LDAP：错误代码1 - 000004DC：LdapErr：DSID-0C0906E8，注释：为了执行此操作，必须在连接上完成成功的绑定。 , 数据 0, v1db1 ]; 剩余名称 ''"

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:07:20.010

检查 LDAP 客户端是否使用 LDAPv3。LDAPv2 要求连接上的第一个操作是 BIND 操作。一般来说，LDAP 客户端不应该使用 LDAPv2，并且应该修改现有代码以不使用 LDAPv2。

# android - 数字键盘实现

> ID：14813573
> 
> 赞同：0
> 
> 时间：2013-02-11T14:01:45.117
> 
> 标签：android

我正在尝试实现这样的数字键盘

[链接 http://getsetbro.com/img/android-number-input.png](http://getsetbro.com/img/android-number-input.png)。

我怎样才能为数字和字符设置不同的字体大小。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:33:52.043

得到它必须使用[SpannableStringBuilder](http://developer.android.com/reference/android/text/SpannableStringBuilder.html)

# xml - 在 VB.Net 运行时创建新属性

> ID：14813576
> 
> 赞同：0
> 
> 时间：2013-02-11T14:01:52.970
> 
> 标签：xml, vb.net, properties

是否可以在 .Net 的运行时创建新属性

它是一个 Win Form 应用程序。我在这个表单中有许多字段是从读入的 XML 设置文件中填充的。一旦用户填写完这些字段，他们就会单击“保存”按钮。然后，这会将表单上的所有信息写回 XML 文件，并设置一组不同类的公共共享属性。

我的问题是，在表单上我有一个数据网格视图。这个数据网格视图中的每一行都需要是这个不同类的一个属性。用户能够向此数据网格添加行，我想要由这些新添加的行组成的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:21:02.370

您不能在运行时向类添加属性。但是您可以将属性保存在数据源中并使用该类来读取/写入这些属性。

# typography - 使用 fontforge 脚本设置基线

> ID：14813583
> 
> 赞同：3
> 
> 时间：2013-02-11T14:02:04.403
> 
> 标签：typography, fontforge

我正在使用 FontForge 从 SVG 文件创建 ttf 字体。但是基线全错了，我不明白如何从 FontForge 命令行脚本工具设置基线。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T17:31:55.050

基线是 'em square' 的笛卡尔网格系统中的 y = '0'。如果您查看 emsize，它可能是 1,000，通常在基线以下 200 个单位和高于 800 个单位。

您可以移动字形，使其基点位于基线上，即它们的点的 ay 值为 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-17T16:03:40.830

如果你使用的是 FF 的 python 模块，你会做这样的事情来翻译一个字形：

```
import fontforge
import psMat
base_matrix = psMat.translate(0, 200)
# …
glyph.importOutlines(some_svg_file_object)
glyph.transform(base_matrix) 
```

# android - Android：禁用在插入时保持设备屏幕开启的设置

> ID：14813585
> 
> 赞同：0
> 
> 时间：2013-02-11T14:02:14.273
> 
> 标签：android, screen, user-inactivity

如何禁用阻止屏幕在插入时关闭的开发设置？

基本上我想通过检测屏幕何时关闭来检测 Android 设备上的用户不活动，但如果启用此设置，这将永远不会发生。根据我的发现，`WRITE_SECURE_SETTINGS`应该使用权限（生根设备/使用私有 API 不是问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:14:08.533

你可以尝试这样的事情：

```
Settings.System.putInt(getContentResolver(), Settings.System.STAY_ON_WHILE_PLUGGED_IN, 0); 
```

# c# - C#正则表达式在匹配一包含匹配二时分隔

> ID：14813590
> 
> 赞同：0
> 
> 时间：2013-02-11T14:02:38.220
> 
> 标签：c#, regex

我有一个包含由 . 包围的字符串的文本`#[ ]`。我需要匹配这些字符串并找出里面的字符串。

我的示例文本：

```
Lorem ipsum dolor #[This is my first string.] sit amet, consectetur elit,
sed do eiusmod tempor incididunt #[This is my second string?] ut et dolore magna. 
```

有了这个文本，我想有两个匹配项：

```
#[This is my first string.]
#[This is my second string?] 
```

现在我已经写了我的正则表达式：

```
\#\[([\w\s\W]*)\] 
```

我添加`\W`是因为我想包含点、问号和其他不是字母的字符。这给我带来了一个问题，因为 now `#`, `[`and`]`被包含在内，这导致我的文本只有一个匹配项：

```
#[This is my first string.] sit amet, consectetur elit,
sed do eiusmod tempor incididunt #[This is my second string?] 
```

当然，它在 的第一次出现`#[`和最后一次出现时匹配`]`。如何解决这个问题？我可以接受不包括`#`,`[`和`]`在我的字符串中，但如果可能的话，应该包括所有其他非字母字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:05:31.023

你的问题不是`\W`，而是`*`。是贪婪的`*`，将匹配可能的最长字符串。所以它将第一个`[`与最后一个匹配，`]`并在两者之间进行所有操作。

试试这个：

```
\#\[([\w\s\W]*?)\] 
```

实际上，您应该能够将其简化为：

```
\#\[(.*?)\] 
```

`?`限定符 ( `*`or ) 之后将`+`强制进行*最少*匹配。即非贪婪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:13:35.390

你的问题是`\W`也匹配`]`

解决此问题的简单方法是：`[`匹配尽可能多的非`]`字符后：

```
(#\[[^\]]*\]) 
```

这应该可以很好地解决问题。

# erlang - 在erlang中使用循环测试

> ID：14813593
> 
> 赞同：0
> 
> 时间：2013-02-11T14:02:50.607
> 
> 标签：erlang

我有一个值列表“Z0010”、“Z0011”、“Z0012”、“Z0013”“Z0014”、“Z0015”、“Z0016”、“Z0017”、“Z0018”、“Z0019”

我想开发一个在参数中取值的函数

如果作为参数传递的值等于列表中的值，我想在我的函数中进行测试，在这种情况下，它会显示“存在”，否则会显示“不存在”

我尝试：

```
test(Token)->
case get_user_formid_by_token(Token) of
                {ok, H} ->
                     FormId=string:substr(H, 2, length(H)),
                    Form=string:to_integer(FormId), 
                      case verify (0019,1,Form) of
                    {ok}->io:format("existe");
                    {notok}->io:format("not existe") 
                      end;

                {error, notfound}-> io:format("qq")

end.

verify(VariableLength,VariableIncrement,FormId)->

         lists:map(fun(I) -> if I =:= FormId ->
                             {ok};  
                             I =/= FormId ->
                          {notok}
                            end

                   end,
          lists:seq(0010, VariableLength, VariableIncrement)). 
```

但是当我执行此代码时，它显示：

```
1> model:test("21137900").
** exception error: no case clause matching [{notok},
                                             {notok},
                                             {notok},
                                             {notok},
                                             {notok},
                                             {notok},
                                             {notok},
                                             {notok},
                                             {notok},
                                             {notok}]
     in function  model:test/1 
```

我现在尝试使用此解决方案：

```
get_user_formid_by_token(Token) ->
    Q = qlc:q([{X#person.formid} || X <- mnesia:table(person),
                X#person.token =:= Token]),
    case do(Q) of
        [{H}] ->
            {ok, H};
        [] ->
            {error, notfound}
    end.

    test(Token)->
    case get_user_formid_by_token(Token) of
                    {ok, H} ->
                        io:format("~s~n",[H]),
                         FormId=string:substr(H, 5, length(H)),
    io:format("~s~n",[FormId]),
                        Form=string:to_integer(FormId), 
                         io:format("~p~n",[Form]),
                         lists:member(Form, lists:seq(313, 320, 1));
                    {error, notfound}-> io:format("qq")

    end. 
```

但是当我测试时，我在控制台中有这条消息：

```
1> model:test("21137900").
Z000313
313
{313,[]}
false 
```

结果应该是**真的**而不是**假的**

我认为`Form=string:to_integer(FormId),`在这种情况下它不会返回 313

还有一件事我想在我的代码中添加

例如如果**H**等于**"Z000010"** FormId=string:substr(H, 2, length(H)),

它返回 **“000010”** 现在我想消除第一个整数之前的第一个零不为空，所以在 1 之前提取 0000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:25:52.867

`lists:map/2`获取一个列表并创建一个具有相同数量值的新列表，因此您的 10 个值列表将转换为 10 个`{ok}`或`{notok}`元组的列表。

你可能想要`lists:member/2`。

```
5> lists:member(0, lists:seq(1, 3, 1)).               
false
6> lists:member(3, lists:seq(1, 3, 1)).
true
7> lists:map(fun(X) -> ok end, lists:seq(1, 3, 1)).
[ok,ok,ok] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:55:43.367

查看文档（[http://www.erlang.org/doc/man/string.html#to_integer-1](http://www.erlang.org/doc/man/string.html#to_integer-1)）：

```
to_integer(String) -> {Int, Rest} | {error, Reason}

Types:
String = string()
Int = integer()
Rest = string()
Reason = no_integer | not_a_list 
```

所以`to_integer`返回一个元组，其中包含从字符串中消耗的数字和字符串的其余部分。你甚至可以从你的测试输出中看出它在哪里`{313,[]}`。为了获得绑定到`Form`变量的数字的值，您需要分解元组，这通常通过模式匹配来完成：

```
{Form,_Rest}=string:to_integer(FormId) 
```

现在您的`Form`遗嘱中只包含数字`313`。

该`string:to_integer`函数还将愉快地吃掉前导零：

```
1> {Form, _} = string:to_integer("000010"), Form.
10 
```

# sum - 如何使用 MPI_Reduce 对来自不同处理器组的不同值进行独立求和

> ID：14813595
> 
> 赞同：5
> 
> 时间：2013-02-11T14:02:57.603
> 
> 标签：sum, mpi

我正在尝试将我的处理器分成组，然后独立添加每个组的总和......但直到现在我才能正确找到结果。一个简单的例子如下：

```
int main(int argc, char** argv) 
{
    int size, rank,i=0,localsum1=0,globalsum1=0,localsum2=0,globalsum2=0;

    MPI_Init(&argc,&argv);
    MPI_Comm_size(MPI_COMM_WORLD,&size);
    MPI_Comm_rank(MPI_COMM_WORLD,&rank);

    if(rank==0)
    {
    }
    else if(rank==1)
    {
        localsum1 += 5;
        MPI_Reduce(&localsum1,&globalsum1,2,MPI_INT,MPI_SUM,0,MPI_COMM_WORLD);
    }
    else if(rank==2)
    {
        localsum2 += 10;
        MPI_Reduce(&localsum2,&globalsum2,2,MPI_INT,MPI_SUM,0,MPI_COMM_WORLD);
    }

    if(rank==0)
    {
        printf("globalsum1 = %d \n",globalsum1);
        printf("globalsum2 = %d \n",globalsum2);
    }
    MPI_Finalize();

    return (EXIT_SUCCESS);
} 
```

我无法弄清楚这里缺少什么......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T15:12:11.980

[MPI_Reduce](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Reduce.html)是一个[集体操作](http://www.ncsa.illinois.edu/UserInfo/Resources/Hardware/CommonDoc/MessPass/MPIColl.html)。这意味着参与通信器中的所有任务都必须进行`MPI_Reduce()`调用。在上面，等级 0 永远不会调用`MPI_Reduce()`，因此该程序将挂起，因为其他一些处理器等待来自永远不会到来的等级 0 的参与。

另外，因为它是对整个通信器的集体操作，所以需要做一些工作来对归约进行分区。一种方法是减少整数数组，并让每个处理器仅对数组中的元素做出贡献：

```
#include <stdio.h>
#include <stdlib.h>
#include <mpi.h>

int main(int argc, char** argv)
{
    int size, rank;

    MPI_Init(&argc,&argv);
    MPI_Comm_size(MPI_COMM_WORLD,&size);
    MPI_Comm_rank(MPI_COMM_WORLD,&rank);

    int localsum[2] = {0,0};
    int globalsum[2] = {0,0};

    if(rank % 2 == 1)
    {
        localsum[0] += 5;
    }
    else if( rank > 0 && (rank % 2 == 0))
    {
        localsum[1] += 10;
    }

    MPI_Reduce(localsum,globalsum,2,MPI_INT,MPI_SUM,0,MPI_COMM_WORLD);

    if(rank==0)
    {
        printf("globalsum1 = %d \n",globalsum[0]);
        printf("globalsum2 = %d \n",globalsum[1]);
    }

    MPI_Finalize();

    return (EXIT_SUCCESS);
} 
```

现在跑步的地方

```
$ mpicc -o reduce reduce.c
$ mpirun -np 3 ./reduce
globalsum1 = 5 
globalsum2 = 10 
```

否则，您可以创建仅连接您希望参与每个求和的处理器的通信器，并在每个通信器内进行归约。下面是一个不太漂亮的方法来做到这一点。这通常非常强大，但比第一个解决方案更复杂：

```
#include <stdio.h>
#include <stdlib.h>
#include <mpi.h>

int main(int argc, char** argv)
{
    int size, rank;

    MPI_Init(&argc,&argv);
    MPI_Comm_size(MPI_COMM_WORLD,&size);
    MPI_Comm_rank(MPI_COMM_WORLD,&rank);

    int localsum = 0;
    int globalsum = 0;

    MPI_Comm  comm_evens_plus_root, comm_odds_plus_root;
    MPI_Group grp_evens_plus_root, grp_odds_plus_root, grp_world;

    MPI_Comm_group(MPI_COMM_WORLD, &grp_world);
    int *ranks = malloc((size/2 + 1) * sizeof(rank));
    int i,j;
    for (i=1, j=0; i<size; i+=2, j+=1)
        ranks[j] = i;
    MPI_Group_excl(grp_world, j, ranks, &grp_evens_plus_root);
    MPI_Comm_create(MPI_COMM_WORLD, grp_evens_plus_root, &comm_evens_plus_root);

    for (i=2, j=0; i<size; i+=2, j+=1)
        ranks[j] = i;
    MPI_Group_excl(grp_world, j, ranks, &grp_odds_plus_root);
    MPI_Comm_create(MPI_COMM_WORLD, grp_odds_plus_root, &comm_odds_plus_root);

    free(ranks);

    if(rank % 2 == 1)
    {
        localsum += 5;
        MPI_Reduce(&localsum,&globalsum,1,MPI_INT,MPI_SUM,0,comm_odds_plus_root);
    }
    else if( rank > 0 && (rank % 2 == 0))
    {
        localsum += 10;
        MPI_Reduce(&localsum,&globalsum,1,MPI_INT,MPI_SUM,0,comm_evens_plus_root);
    }

    if(rank==0)
    {
        MPI_Reduce(&localsum,&globalsum,1,MPI_INT,MPI_SUM,0,comm_odds_plus_root);
        printf("globalsum1 = %d \n",globalsum);
        MPI_Reduce(&localsum,&globalsum,1,MPI_INT,MPI_SUM,0,comm_evens_plus_root);
        printf("globalsum2 = %d \n",globalsum);
    }

    MPI_Comm_free(&comm_odds_plus_root);
    MPI_Comm_free(&comm_evens_plus_root);
    MPI_Group_free(&grp_odds_plus_root);
    MPI_Group_free(&grp_evens_plus_root);
    MPI_Finalize();

    return (EXIT_SUCCESS);
} 
```

运行给

```
$ mpicc -o reduce2 reduce2.c 
$ mpirun -np 3 ./reduce
globalsum1 = 5 
globalsum2 = 10 
```

# sql - 如何链接这些数据库项？(ERD)

> ID：14813598
> 
> 赞同：0
> 
> 时间：2013-02-11T14:03:14.357
> 
> 标签：sql, database, diagram, erd

只需要一些关于如何将表链接到我的数据库 ERD 的帮助。

我有两个表，制造商和模型存储有关汽车制造商（福特，大众）和模型的信息，存储汽车模型的信息，例如（焦点，高尔夫）。

这些在此图中链接在一起，但是我还需要一个陈列室表，以以下格式显示诸如汽车名称之类的信息：品牌、型号、价格

[ERD 的屏幕截图](http://speedcap.net/sharing/screen.php?id=files/81/ac/81ac49d42a73905db2f89a313ad47b95.png)

陈列室表需要从模型表中获取信息，例如型号名称和价格，还需要通过MakeID链接来获取汽车的品牌名称，我只是需要一些帮助关于哪些字段放入陈列室桌子以及如何将其链接到 ERD 的其余部分（我需要在模型和陈列室之间放置一张桌子吗？）。

感谢您阅读我感谢任何帮助。

更新的 ERD 图 - [http://speedcap.net/sharing/screen.php?id=files/a9/42/a94263ce9a39d37e30ebfe23cd75b233.png](http://speedcap.net/sharing/screen.php?id=files/a9/42/a94263ce9a39d37e30ebfe23cd75b233.png)

[图片](http://speedcap.net/sharing/screen.php?id=files/a9/42/a94263ce9a39d37e30ebfe23cd75b233.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:25:09.660

我认为您在这里缺少一个非常重要的表格`CAR`（或产品）。数据库中的每个产品都将具有 ModelID 和`CAR.ID`，因为您可以拥有许多相同型号的汽车。您还可以将一些汽车特定信息（作为该表的颜色或配置 ID）。

然后您的 ShowRoom 实际上将引用`Car.ID`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:06:13.377

我不会看你的 E/R 图，但 MODEL 应该与 MAKE 是一对多的。

SHOWROOM 是一个有趣的表，因为它听起来应该包含当前库存的东西。我称之为库存。它会有特定的 VIN - 这些是您可以实际购买的实例。

# magento - 在 Magento 中使用分页在主页上显示产品

> ID：14813601
> 
> 赞同：2
> 
> 时间：2013-02-11T14:03:21.277
> 
> 标签：magento, pagination

我是 magento 的新手。我正在创建一个包含大量产品的产品页面。

我试图在我的**CMS**页面上显示它们，但我每页只能显示**20 条记录**。我只想显示**分页**，以便用户可以轻松浏览产品。

我在网上搜索并找到了此代码并在**Layout Update XML中进行了更新**

```
<reference name="content">
    <block type="catalog/product_list" name="featured" template="catalog/product/list.phtml">
        <action method="setCategoryId"><category_id>2</category_id></action>
    </block>
</reference> 
```

但它不起作用。

Magento 中是否有任何默认的**分页机制？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T14:44:35.470

我找到了我的问题的解决方案

这里**布局更新 XML**

```
<reference name="content">
<block type="catalog/product_list" name="home" template="catalog/product/list.phtml">
<action method="setCategoryId"><category_id>2</category_id></action>

<action method="addColumnCountLayoutDepend"><layout>one_column</layout><count>5</count></action>
<block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
<block type="page/html_pager" name="product_list_toolbar_pager"/>
 </block>
<action method="setToolbarBlockName"><name>product_list_toolbar</name><count>5</count></action>
</block>
 </reference> 
```

只需更改要分页的类别**ID 。**

# regex - 字符串的 Perl 正则表达式开头

> ID：14813606
> 
> 赞同：-1
> 
> 时间：2013-02-11T14:03:56.297
> 
> 标签：regex, perl, match

你好，我有一个看起来像这样的文本：

假设我有一个如下所示的电话号码：

```
39349562486245 
```

和一个看起来像这样的文件中的条目：

```
1002978;ITM;39349;ITALIEN  MOBIL;5;0;414;177 
```

现在数字的开头与那里的数字匹配我如何检查Perl中是否以该数字开头。所以我到目前为止，但它没有工作：

zeile[5] 是电话号码。

```
open( DATEIMAIN, "<$dateimainc" ) || die("Datei $dateimainc kann nicht geöffnet werden!");
    my @zeilenMAIN = <DATEIMAIN>;   

    for(my $lineNMAIN = 1; $lineNMAIN < @zeilenMAIN; $lineNMAIN++)
        {
            @zeileMAINC =  split( /;/, $zeilenMAIN[$lineNMAIN] );

            if ($zeile[5] =~ /^$zeileMAINC[2]/)
            {
                $displaynameB = $zeileMAINC[3];
                last;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:16:40.243

构建字符串前缀的哈希，然后使用它：

```
use warnings;
use strict;

#Load the lines of input data into a hash.
my %prefixes = map { chomp; split ';' } <DATA>;

my @numbers = ('39349562486245','123456789');

#Create a single regex like /^(12345|48956|...)/ for efficiency.
my $regex = '^(' . join('|',map{quotemeta} keys %prefixes) . ')';

for my $num (@numbers)
{
    print "$num is $prefixes{$1}\n" if ($num =~ /$regex/);  
}

__DATA__
39349;ITALIEN
12345;FOO 
```

# php - PHP - 表单数据未显示在数据库表中

> ID：14813608
> 
> 赞同：-2
> 
> 时间：2013-02-11T14:03:56.447
> 
> 标签：php, forms

我正在做一个从表单中提取数据的练习，然后将数据输入到数据库中的表中。

我在表单上共有 6 个字段，但表中只注册了前 3 个字段。

**表中的数据类型**

```
first_name  varchar(30)
last_name   varchar(30)
pd          varchar(10)
b_month     varchar(2)
b_day       varchar(2)
b_year      varchar(4) 
```

**表单的 HTML 代码**

```
 <form action="handle_reg2.php" method="post">
    <p>first name: <input type="text" name="first_name" size="20" /></p>
    <p>last name: <input type="text" name="last_name" size="20" /></p>
    <p>Password: <input type="password" name="pwd" size="10" /></p>
    <p>confirm password: <input type="password" name="confirm" size="10" /></p>
     <select name="month">
    <option value="">Month</option>
    <option value="1">January</option>
     </select> 
     <select name="day">
    <option value="">Day</option>
    <option value="1">1</option>
  </select>
  <input type="text" name="year" value="yyyy" size="4"/>
  </p> 
```

**处理表单数据的 PHP 代码**

```
$db_connect = mysql_connect("localhost", "$db_user", "$db_pass");
 $sql = "insert into reg_data (first_name, last_name, pd, b_month, b_day, b_year) 
 values 
 ('$first_name', '$last_name', '$password', '$b_month',
 '$b_day', '$b_year')";

$insert_data = mysql_query ($sql, $db_connect ); 
```

请查看我的代码片段并告诉我是什么原因以及如何解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:07:44.303

您更改了变量的名称... EG

```
$byear = $_POST['year']; 
```

到

```
$b_year 
```

编辑：

您已更改 Q 并删除了显示您如何命名传入变量 $byear 的代码，然后尝试将其引用为 $b_year。

坚持命名约定，您将减少这些愚蠢的错误。EG 从您的表格到您的数据库：

```
<input type =text name="b_year" /> 
```

然后

```
$b_year = (int)$_POST['b_year']; 
```

然后

```
"insert into mytable (b_year) values ($b_year )"; 
```

当然，除了您将列出每个人所说的内容并使用准备好的语句或找到另一种保护您的数据库的方法。

# highcharts - 当我单击页面上的第一个饼图时，会出现第二个饼图，但是我对第一个饼图无能为力

> ID：14813610
> 
> 赞同：0
> 
> 时间：2013-02-11T14:04:00.300
> 
> 标签：highcharts, pie-chart

就像标题中所说的那样，当我点击一些馅饼时，我遇到了问题。我调用函数，它显示隐藏的 div 和第二个饼图。它显示正确，但是我无法单击第一个饼图，甚至没有显示工具提示。第二个馅饼全是黑色的，但我认为这是较小的问题......提前感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:38:53.467

这是您对我的更改的小提琴：[jsFiddle](http://jsfiddle.net/r36qe/)。

为了修复第一个图表上的悬停和单击事件，我删除`position: relative`了第二个容器。

为了解决黑色问题，我将颜色声明移到`Highcharts.Chart({...})`. 否则，您将在创建第二个图表时重新编写 Highchart 颜色。

# css - 强制显示内联响应图像

> ID：14813611
> 
> 赞同：0
> 
> 时间：2013-02-11T14:04:05.700
> 
> 标签：css, responsive-design, inline

我需要显示一个 5x3 的图像网格。无论屏幕分辨率如何，此网格都需要保持相同的格式和大小。图像本身将响应调整大小。

我有一个显示在内联块中的图像列表，如下所示：

```
<div class="gridView">
  <ul>
    <li>
      <img src="">
    </li>

    <li>
      <img src="">
    </li>

    <li>
      <img src="">
    </li>
  </ul>
</div> 
```

CSS是这样的：

```
.gridView {
    margin-left: auto;
    margin-right: auto;
    max-width: 1200px;
    text-align: center;
    width: 100%;
}

.gridView ul li {
    height: 100%;
    max-height: 150px;
    max-width: 200px;
    width: 100%;
} 
```

现在，当我调整窗口大小时，网格不会保持它的大小固定。如何确保网格保持不变，但只有图像自己调整大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:15:43.833

如果您想保持布局结构相同，如下所示：

```
[x] [x] [x] [x] [x]

[x] [x] [x] [x] [x]

[x] [x] [x] [x] [x] 
```

那么您将不需要液体网格系统，而是需要**液体图像**。我要做的是：更改 .gridView ul li 样式，以便**设置一个简单的高度和宽度声明**，而不是最大高度和宽度。

```
.gridView ul li {
height: 150px;
width: 200px;
} 
```

然后添加一个图像类以使图像响应：

```
.img {
max-width: 100%
height: auto;
} 
```

当然，图像文件的最大尺寸应为 150 像素 x 200 像素。

这样，您的网格不会随着您的浏览器宽度变小而折叠，并且您的图像将变小以适合网格。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:13:52.083

宽度：100%；将始终更改元素相对于父元素/窗口的大小。对于固定宽度，您需要固定宽度。就这么简单：

```
width: 1200px; 
```

# python - Python 日志记录模块在已安装的 Windows 服务中不起作用

> ID：14813614
> 
> 赞同：3
> 
> 时间：2013-02-11T14:04:12.023
> 
> 标签：python, logging, windows-services, pywin32

为什么在 python 服务中调用日志框架不会产生日志输出（文件、标准输出、...）？

我的 python 服务具有一般形式：

```
import logging

logger = logging.getLogger()
logger.setLevel(logging.DEBUG)
fh = logging.FileHandler('out.log')
logger.addHandler(fh)

logger.error("OUTSIDE")

class Service (win32serviceutil.ServiceFramework):
    _svc_name_ = "example"
    _svc_display_name_ = "example"
    _svc_description_ = "example"

    def __init__(self,args):
        logger.error("NOT LOGGED")
        win32serviceutil.ServiceFramework.__init__(self,args)
        self.hWaitStop = win32event.CreateEvent(None,0,0,None)
        servicemanager.LogMsg(servicemanager.EVENTLOG_INFORMATION_TYPE,
              servicemanager.PYS_SERVICE_STARTED,
              (self._svc_name_,''))

    def SvcStop(self):

        self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)
        win32event.SetEvent(self.hWaitStop)
        self.stop = True

    def SvcDoRun(self):

        self.ReportServiceStatus(win32service.SERVICE_RUNNING)
        self.main()

    def main(self):
        # Service Logic
        logger.error("NOT LOGGED EITHER")
        pass 
```

第一次调用 logger.error 会产生输出，但不是服务类中的两个（即使在安装服务并确保它正在运行之后）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-18T00:50:05.340

我发现只有在实际服务循环中的日志才能与日志模块一起使用，并且日志文件最终以`C:\python27\Lib\site-packages\win32`.

我放弃了使用 Windows 的日志记录模块进行日志记录，因为它似乎不是很有效。相反，我开始使用 Windows 日志服务，例如`servicemanager.LogInfoMsg()`和相关功能。这会将事件记录到 Windows 应用程序日志，您可以在事件查看器（开始->运行->事件查看器、Windows 日志文件夹、应用程序日志）中找到该日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-10T10:31:11.850

您必须编写日志文件的完整路径。

例如

```
fh = logging.FileHandler('C:\\out.log') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:16:50.710

实际上外部记录器初始化了两次。

这两个外部记录器处于不同的进程中。一个是python进程，另一个是windows-service进程。

由于某种原因，第二个没有配置成功，并且在这个过程中也没有配置内部记录器。这就是为什么你找不到内部日志的原因。

# javascript - 在 C 中编码 Huffman 并在 javascript 中解码

> ID：14813615
> 
> 赞同：1
> 
> 时间：2013-02-11T14:04:15.497
> 
> 标签：javascript, c, huffman-code

我的问题场景：文件中的一些数据应该被压缩到更小的大小。该文件的内容是 HTML 使用 javascript 即时需要的。

所以基本上我需要使用 C 编码该数据并使用 javascript 解码该数据并将其提供给 HTML。

**我只是想知道这件事是否可能**，因为在解码时我们需要二进制堆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:42:59.957

是的，这是可能的。Javascript 具有将值作为 32 位整数的位操作，即使它存储在浮点数中。这将允许您执行与 C 中相同的操作来压缩和解压缩数据。它不会那么快，但它会起作用。

# ajax - 使用 Django 实现 Ajax

> ID：14813620
> 
> 赞同：0
> 
> 时间：2013-02-11T14:05:00.007
> 
> 标签：ajax, django

我目前正在开发一个需要实现 Ajax 的 Django 项目。例如，将模型对象添加到数据库，从数据库中获取和更新模型实例等，而无需刷新页面。我到处搜索，但还没有找到任何相关材料。 **我会恳求房子里的大师们向我指出你知道可能会真正有帮助的材料的方向。谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:13:52.297

你问的看起来像是实现一个 RESTful API（创建、更新和获取对象......）

你应该看看[Tastypie](http://tastypieapi.org)或[Piston](https://bitbucket.org/jespern/django-piston/wiki/Home)

对于这两者的比较看看这个[问题](https://stackoverflow.com/questions/8430579/django-restful-api-django-piston-vs-django-tastypie)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:08:24.810

[Django Ajax 表单](http://www.jonhill.ca/programming/ajax-forms-in-django)

[达贾克斯项目](http://www.dajaxproject.com/multiply/)

[Ajax 和 Django 视图](http://brack3t.com/ajax-and-django-views.html)

# android - taphold 它不适用于输入类型的收音机

> ID：14813621
> 
> 赞同：0
> 
> 时间：2013-02-11T14:05:00.617
> 
> 标签：android, jquery, jquery-mobile

我使用 Jquery 移动

这是我下面的代码，但它不起作用。当我点击一个单选按钮使我的动作生效时，我想要。任何想法为什么不起作用？

```
$('#lbtn').append("<input name='opt1' class='rd_btn' checked type='radio' value="+results.rows.item(i).IdRubrique+"    id="+results.rows.item(i).IdRubrique+" />");

$('.rd_btn').live('taphold', function() 
          {
            var sel_id_rub = $('input[name=opt1]:checked').attr('id');//ID of Rubrique
            window.localStorage.setItem("id_rub", sel_id_rub);       //Id Rubrique
            liste_Phrase();
          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:49:23.897

上面的示例基于您的代码。当触发 taphold 事件时，输入元素的相应 id 将显示在警报框中。

这个想法是在创建的元素上附加 taphold 事件处理程序。

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Taphold Example</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script>
            var i = 0;
            $(document).on('click', '#add', function(e){
                i++;
                var labeledRadio = $(["<label><input name=\"opt1\" class=\"rd_btn\" checked type=\"radio\" id=myId_",i," value=myval_",i," id=myId_",i,">Label_",i,"</input></label>"].join("")).on('taphold', function() {  alert($(this).parent().children("input[type=radio]").attr('id')); });
                $('#lbtn').append(labeledRadio).trigger('create');
            });
        </script>
    </head>

    <body>
        <!-- /page -->
        <div data-role="page">
            <!-- /header -->
            <div data-role="header" data-theme="b">
                <h1>Taphold test</h1>
            </div>
            <!-- /content -->
            <div data-role="content">
                <input type="button" id="add" value="Add Inputs"/>        
                <div id="lbtn"></div>
             </div>
        </div>
    </body>
</html> 
```

我希望这有帮助。

# python - 在循环时比较python中的列表

> ID：14813624
> 
> 赞同：2
> 
> 时间：2013-02-11T14:05:11.783
> 
> 标签：python, list, loops, xlrd

我有一个脚本，用于读取 excel 文件并更新 SQL 数据库。我使用循环每 30 秒读取一次 excel 文件。但是我只想在excel文件更改时更新数据库

如果我在循环循环时使用 != 运算符，它会刷新“temp”的值，因此不会记录该值是相同的。

有谁知道如何解决这个问题..？

谢谢！编辑：更新以使我的问题更清楚！

```
def update(): 
    threading.Timer(1, update).start()
    book = open_workbook('bet.xls')

    def odds():
        sheet = book.sheet_by_name('xyz')
        match_sheet = sheet.cell(5,0).value  
        data = book.sheet_by_name(sheet)
        vv = data.cell(3,26).value

        temp= None 

        if vv != temp:
            print 'hello'

        temp= vv

odds() 
```

更新（）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:18:03.753

是的，[Python 内置容器按值](http://docs.python.org/2/reference/expressions.html#not-in)（元组、列表和字典）进行比较。

像这样的东西（我使用[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)来增加幻想）：

```
//init
pvv=None

<...>

//iteration
vv= [data.cell(i,j).value for (i,j) in ((2,26),(3,26),(4,26))]
if vv!=pvv: 
    //do something
    pvv=vv 
```

# android - 从imageview中删除图像onclick deletebutton

> ID：14813625
> 
> 赞同：1
> 
> 时间：2013-02-11T14:05:14.300
> 
> 标签：android, image, android-intent, user-interface

当用户单击删除按钮并替换为数组中的下一个图像时，我想删除图像。

在这里，我采用水平列表视图来显示图像，在每个视图中我都添加了删除按钮，单击删除按钮我想删除图像。

代码：

```
private class  Horiadapter extends BaseAdapter {

        public Horiadapter(){
            super();
        }
        private OnClickListener mOnButtonClicked = new OnClickListener() {

            public void onClick(View v) {
                Button bt = (Button) v;

                Toast.makeText(getApplicationContext(), "pressed " + bt.getText(), Toast.LENGTH_SHORT).show();          
            }
        };

        public int getCount() {
            return dataObjects.length;
        }

        public Object getItem(int position) {
            return null;
        }

        public long getItemId(int position) {
            return 0;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            View viewitems = LayoutInflater.from(parent.getContext()).inflate(R.layout.viewitem, null);

            ImageView images=(ImageView)viewitems.findViewById(R.id.image);
            Button button = (Button) viewitems.findViewById(R.id.delbutton);

            button.setOnClickListener(mOnButtonClicked);

            images.setImageResource(imageIds[position]);

            return viewitems;
        }

    }; 
```

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:35:46.863

尝试将其放入您的点击处理程序 images.SetVisibility(View.Gone) 或 images.Visibilty = ViewStates.Gone

# sql - dateadd - 查找过去的日期

> ID：14813629
> 
> 赞同：0
> 
> 时间：2013-02-11T14:05:35.113
> 
> 标签：sql, sql-server, dateadd

从日期中减去 18 个月，我遇到了一个奇怪的问题。考虑以下代码段：

```
Convert(dateTime,CREATION_DATE,103) > 
    DateAdd (MONTH, -18, Convert (DateTime, @IN_ACTIVITY_DATE, 103)) 
```

这构成了存储过程中 where 子句的一部分。当我运行时：

```
exec theSP @IN_ACTIVITY_DATE = '21/02/2013' 
```

它运行良好，但是当我将其更改为：

```
exec theSP @IN_ACTIVITY_DATE = '21/01/2013' 
```

它因错误而中断：

> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。

有没有人对为什么可能是一月（所有其他月份都可以）破坏我的代码有任何想法？

谢谢。

DS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:11:15.667

将字符串作为日期时间传递，使用`ISO format`它`yyyymmdd`保证可以在具有任何文化信息的任何服务器中工作。；

```
exec theSP @IN_ACTIVITY_DATE = '20130121' 
```

另外作为旁注， *如果`CREATION_DATE`*已经存在，`datetime`则无需`CONVERT CREATION_DATE`进行比较。

```
--if CREATION_DATE is DATETIME/DATE column
CREATION_DATE > 
DateAdd (MONTH, -18, Convert (DateTime, @IN_ACTIVITY_DATE)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:18:38.967

**以YYYY-MM-DD**格式指定日期。

例如。：

```
exec theSP @IN_ACTIVITY_DATE = '2013-01-21' 
```

此外，您可以使用[SET DATEFORMAT](http://msdn.microsoft.com/en-us/library/ms189491%28v=sql.100%29.aspx)指定日期格式：

例如。：

```
SET DATEFORMAT dmy;
exec theSP @IN_ACTIVITY_DATE = '21/02/2013'
exec theSP @IN_ACTIVITY_DATE = '21/01/2013' 
```

**SET DATEFORMAT：**为解释 date、smalldatetime、datetime、datetime2 和 datetimeoffset 字符串设置月、日和年日期部分的顺序。

```
SET DATEFORMAT { format | @format_var } 
```

格式 | @format_var：是日期部分的顺序。有效参数是**mdy、dmy、ymd、ydm、myd 和 dym**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:28:07.867

您的数据库中可能有一些`check constraint`不喜欢一月日期的东西，也许是 a。转换为似乎适用于 SQL Server 2008 ( [Fiddle](http://sqlfiddle.com/#!3/925e8/2) )。其他可能导致问题的原因。

此外，其他人提供的日期格式建议是很好的建议。

# c# - 使用 Simperium 在 Simplenote 中创建新笔记时的问题

> ID：14813640
> 
> 赞同：2
> 
> 时间：2013-02-11T14:06:06.880
> 
> 标签：c#, simperium

我正在使用 Simperium API 为 Simplenote 创建一个开源 C# 客户端。几乎一切都准备好了，但是我在创建新笔记时遇到了问题。

如何使用 Simperium API 在 Simplenote 中创建新笔记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T22:59:25.303

获得应用程序 ID 和 API 密钥后，您可以创建新注释，就像创建[文档](https://simperium.com/docs/reference/http/#objectpost)中引用的任何 Simperium 对象一样。

要发布到的存储桶是`note`，它还需要符合以下示例注释中的架构：

```
{
    "tags" : [ "todo", "later" ],
    "systemTags" : [],
    "creationDate" : 1335390338.091436,
    "modificationDate" : 1335390338.091436,
    "deleted" : false,
    "shareURL" : "",
    "publishURL" : "",
    "content" : "new note content!"
} 
```

创建时需要所有字段，但您可以指定更新时更改的字段。

# google-maps - 谷歌地图：为活跃国家着色并添加标记

> ID：14813641
> 
> 赞同：-2
> 
> 时间：2013-02-11T14:06:09.450
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, google-visualization

我正在建立一个旅游社交网络网站，我需要创建一个基于谷歌地图的自定义地图。

在他们的个人资料中，用户可以：

*   列出他们去过的国家；
*   对于每个国家，他们可以指定他们访问过的城市。

这意味着在同一张地图上，我需要：

*   为用户访问过的国家涂上颜色；
*   对于他访问过的每个（现在有颜色的）国家，在他去过的城市上添加一个标记。

据我所知，我应该使用 Google Charts API 来为国家/地区着色。但我需要一个实际的谷歌地图......有什么想法吗？

在此先感谢，E。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:10:30.303

使用谷歌地图 API v3。请参阅文档并搜索此站点以了解如何：

*   [添加标记](https://developers.google.com/maps/documentation/javascript/overlays#Markers)
*   创建[国家多边形](https://stackoverflow.com/questions/11831968/google-maps-single-country-boundary/11832316#11832316)

# javascript - 灯箱 iframe 关闭

> ID：14813642
> 
> 赞同：2
> 
> 时间：2013-02-11T14:06:10.630
> 
> 标签：javascript, jsf, iframe, primefaces

我在 Lightbox iframe 中有一个按钮。如何通过单击该按钮关闭该 iframe？

我的代码如下所示：

```
<p:lightBox id="posetastavkeListaLightBox" 
            widgetVar="posetastavkeListaLightBoxWidget" 
            iframe="true" width="900px" height="700px">          
</p:lightBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:09:56.047

通过[这个答案](https://stackoverflow.com/a/14639847/1085891)从[iframe 按钮关闭一个灯箱 primefaces](https://stackoverflow.com/questions/7874254/close-a-lightbox-primefaces-from-iframe-button)

```
<p:lightBox id="light" iframe="true" width="80%" height="80%" widgetVar="dlg"> 
```

`iframe`边：

```
<p:commandButton value="Close" onsuccess="parent.dlg.hide();" ajax="true" process="@none" /> 
```

# ruby-on-rails - 有没有办法在所有 Heroku dynos 上运行命令？

> ID：14813654
> 
> 赞同：6
> 
> 时间：2013-02-11T14:07:17.263
> 
> 标签：ruby-on-rails, ruby, heroku

我有 N dynos 用于 Rails 应用程序，我想在所有这些上运行命令。有没有办法做到这一点？是否会在所有测功机上执行运行`rails r "SomeRubyCode"`？

我正在使用一个插件，它每 M 分钟与第 3 方同步。问题是，有时 3rd 方服务超时，我想再次运行它，而不必再等待 M 分钟过去。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T14:25:55.343

不会。一次性命令（类似`heroku run bash`）在另一个一次性测功机上运行。您需要设置某种 pubsub/message 队列，所有 dynos 都听以完成此操作。[https://devcenter.heroku.com/articles/one-off-dynos](https://devcenter.heroku.com/articles/one-off-dynos)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T03:38:30.603

（被要求将我的评论变成答案......将借此机会阐述。）

我不知道您的插件需要做什么才能“同步”到第 3 方服务的详细信息，但我将继续假设该插件基本上会获取您的 Web 应用程序然后使用的一些瞬态数据不知何故。

因为同步或获取过程偶尔会失败，并且您的 Web 应用程序依赖于最新数据，您希望选择手动运行“同步”过程。目前，从插件本身执行此操作的唯一方法意味着您需要在所有测功机上运行一些代码，正如其他人指出的那样，目前不可能。

我在之前的类似场景（从外部服务获取分析）中所做的很简单：

1.  使用 Redis 配置和配置您的 Heroku 应用程序
2.  编写一个简单地执行代码（否则将由插件运行）以获取数据的 rake 任务，然后将该数据写入缓存
3.  您通常会在应用程序中获取数据的地方，首先尝试从缓存中获取（并且在缓存未命中时，只需再次运行相同的代码 - 只是意味着数据在刷新之前从缓存中过期）

然后我更进一步，使用 Heroku 简单调度程序每*n*分钟执行一次上述 rake 任务，以尝试保持数据最新更新并始终在缓存中（缓存到期设置为略小于*n*分钟）并减少可感知滞后的实例数据获取发生。我可以将缓存过期设置为*从不*或大于*n*，但这不是关键任务。

这样，如果我*确实*想确保显示最新的分析，我所要做的就是 a) 连接到 Redis 并从缓存中删除该项目，或者（更简单）b) 只是`heroku run rake task`.

再一次——这主要适用于你只是提取需要在所有测功机之间共享的数据。

这显然行不通。例如，如果您有一个集中式服务，您想定期发送指标（例如，每个请求花费的时间）到每个测功机的基础上。想不出一种使用 Heroku 的简单、优雅的方式来做到这一点（除了实时之外，还有所有需要的开销）。

# mysql - mysql查询以root身份运行

> ID：14813659
> 
> 赞同：2
> 
> 时间：2013-02-11T14:07:34.020
> 
> 标签：mysql, root

我的情况是这样的：我有两台服务器，一台是运行 IIS 并保存我的网站的 windows 服务器。另一个是装有我的 mysql 服务器的 linux 服务器。

我在 mysql 服务器上创建了一个具有最低权限的（mysql）用户，并且在从我的网站连接运行查询时使用它的凭据。

但是当我运行查询并检查 mysql 服务器上运行的进程（mysql> show processlist）时，我看到我执行的查询（来自网站）正在 (mysql) root 帐户下运行！

知道为什么会发生这种情况吗？

* * *

Hituptony 明白了 :-) 我的查询由 SP 处理，并变成一个准备好的语句然后运行......那个 SP 是用 root 帐户定义的（天知道为什么），而且更多的没有“调用者” "安全条款。

[http://dev.mysql.com/doc/refman/5.5/en/stored-programs-security.html](http://dev.mysql.com/doc/refman/5.5/en/stored-programs-security.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:46:51.113

我想这取决于你在做什么，如果你正在运行一个存储过程并且它是由一个 root 帐户创建的，那么当你运行它时，它仍然会显示“创建它的用户”作为运行它的用户，当实际上，它可能是连接用户。理论上，如果您正在运行一个 select 语句，那么您将在其中作为连接用户运行，因为选择不会有“创建者”......如果你发现我的偏差......

# c# - 如何避免 groupPrincipal.Members.Add 抛出 NoMatchingPrincipalException

> ID：14813661
> 
> 赞同：0
> 
> 时间：2013-02-11T14:07:35.493
> 
> 标签：c#, active-directory, principal

我得到了一个 Active Directory 域，在其中我在某个新创建的 OU 下创建组对象，如下所示，例如 SubOuB 下的组。GlobalGroups 下的全局组已经存在。

```
+MainOu
   +--SubOuA
     +--GroupA_A
     +--GroupA_B
     +--GroupA_C
  +--SubOuB
     +--GroupB_A
     ...
+GlobalGroups
  +--GlobalGroupA
  +--GlobalGroupB
  ... 
```

现在我想将新创建的 OU 下新添加的组作为成员添加到全局组之一，例如将 GroupA_A 作为成员添加到 GlobalGroupB：

```
using( PrincipalContext principalContext =
    new PrincipalContext( ContextType.Domain, Environment.UserDomainName ) )
{
    GroupPrincipal groupPrincipal = GroupPrincipal.FindByIdentity(
        principalContext, "GlobalGroupB" );
    if( groupPrincipal != null )
    {
        // Target group found.
        groupPrincipal.Members.Add( principalContext, IdentityType.Name, "GroupA_A" );
        // The next line throws a NoMatchingPrincipalException.
        groupPrincipal.Save();
    }
} 
```

当我查看 AD 结构和对象时，我可以看到这两个对象。ADSI 编辑器显示两个“名称”都是正确的。当我在创建新的 OU 和组对象后在测试应用程序中手动运行代码时，将组作为成员添加到全局组中也可以正常工作。我使用的所有代码都在具有相同结构的 AD 的暂存环境中工作，所以我不确定为什么它在生产环境中确实存在问题。

有任何想法吗？我已经看到`DirectoryEntry`对象具有`RefreshCache`强制重新加载特定对象的属性值的方法，但我认为这在这里没有帮助。我的问题是时间问题吗？我可以**强制**“重新加载”现有对象，以便找到新创建的组并将其添加到全局组中吗？

**更新**

这显然是 AD 同步的问题 - 当我不断检查新创建的组对象是否存在（例如，带有 Thread.Sleep(1000) 的循环）时，我的代码按预期工作。缺点是我不知道我必须等待多长时间（在我的环境中测试在 6 到 15 秒之间变化）而且我也认为这是一种非常肮脏的方法。不幸的是，我找不到有关如何“刷新”AD 对象或“刷新”缓存的任何信息。

**更新 2**

当我连接到特定的域控制器时，第一个查询很慢（3000+ 毫秒），后续查询更快，并且都需要大约相同的时间返回。我仍然不知道如何避免定期查询 AD，直到预期的对象确实可用（作为查询结果）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-05T10:35:26.483

据我所知，解决我的问题的唯一方法如下：

*   按照我的问题中的建议执行并定期查询“您的”域控制器，直到期望对象可用或达到可配置的超时
*   通过检索所有可用的域控制器`Domain.DomainControllers`并查询它们中的每一个，直到找到您的对象

我不太喜欢这两种方式，但我找不到任何其他选择。请随时提出更好的替代方案。

# android-emulator - Android Emulator 4.2（API 级别 17）“不幸的是相机已停止”尝试从主菜单访问相机时

> ID：14813662
> 
> 赞同：6
> 
> 时间：2013-02-11T14:07:35.020
> 
> 标签：android-emulator

我正在使用 Android 4.2（API 级别 17）模拟器。

每当我点击相机时，我都会收到以下错误消息：

**不幸的是，相机已停止**

**这些是 logcat 错误：**

```
E/CameraService(40): CameraService::connect X (pid 862) rejected (invalid cameraId 0).
E/CameraHolder(862): fail to connect Camera
E/CameraHolder(862): java.lang.RuntimeException: Fail to connect to camera service
E/CameraHolder(862): at android.hardware.Camera.native_setup(Native Method)
E/CameraHolder(862): at android.hardware.Camera.<init>(Camera.java:340)
E/CameraHolder(862): at android.hardware.Camera.open(Camera.java:302)
E/CameraHolder(862): at com.android.camera.CameraHolder.open(CameraHolder.java:131)
E/CameraHolder(862): at com.android.camera.Util.openCamera(Util.java:267)
E/CameraHolder(862): at com.android.camera.Camera$4.run(Camera.java:1100)
E/AndroidRuntime(862): java.lang.RuntimeException: openCamera failed
E/AndroidRuntime(862): at com.android.camera.Util.openCamera(Util.java:272)
E/AndroidRuntime(862): at com.android.camera.Camera$4.run(Camera.java:1100)
E/AndroidRuntime(862): Caused by: com.android.camera.CameraHardwareException: java.lang.RuntimeException: Fail to connect to camera service
E/AndroidRuntime(862): at com.android.camera.CameraHolder.open(CameraHolder.java:135)
E/AndroidRuntime(862): at com.android.camera.Util.openCamera(Util.java:267)
E/AndroidRuntime(862): Caused by: java.lang.RuntimeException: Fail to connect to camera service
E/AndroidRuntime(862): at android.hardware.Camera.native_setup(Native Method)
E/AndroidRuntime(862): at android.hardware.Camera.<init>(Camera.java:340)
E/AndroidRuntime(862): at android.hardware.Camera.open(Camera.java:302)
E/AndroidRuntime(862): at com.android.camera.CameraHolder.open(CameraHolder.java:131) 
```

我尝试了各种解决方案。但没有运气:(

到目前为止，还没有人针对这个问题给出一个可行的解决方案。请给我一个提示

*   网络摄像头：戴尔集成网络摄像头

*   操作系统：windows 8 Professional 64位版本

干杯！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T16:51:39.327

You probably don't care anymore but this was one of the first ones i got when i googled the same problem so in case anyone else runs into this i found that my problem was that i had selected no camera in the AVD (seems to be default)

![Android emulator no camera selected](../Images/309c88f6fe8f29571282e050e0305edb.png)

# ios - 在 YouTube v3 API 搜索请求中访问 viewCount 所需的请求过多

> ID：14813665
> 
> 赞同：6
> 
> 时间：2013-02-11T14:07:45.213
> 
> 标签：ios, mobile, youtube, youtube-api

我目前正在测试 YouTube v3 API...我的移动应用中有一个搜索结果视图，它显示需要以下字段的视频结果：

标题、作者、视图、描述、缩略图

在 v2 中，请求：

```
https://gdata.youtube.com/feeds/api/videos?q=bugatti&orderby=published&max-results=10&v=2&alt=jsonc 
```

为视频条目返回以下响应：

```
{
    "id": "rdprvN3g3EU",
    "uploaded": "2013-02-11T12:49:05.000Z",
    "updated": "2013-02-11T12:49:05.000Z",
    "uploader": "thelongsixteen",
    "category": "Games",
    "title": "GTA IV Mods: Most Wanted #29 (German) (HD) - Ford Fiesta HFHV von Ken Block",
    "description": "Wenn euch das Video gefallen hat dann hinterlasst bitte ein ganz brutalen Like. :D Es hilft mir und dem Projekt sehr weiter zu machen. ^_^ » Grand Theft Auto IV Most Wanted Playlist: www.youtube.com » Mehr Videos findet ihr hier: www.youtube.com » Left 4 Liberty Infection v5.1 (Halloween Special): www.youtube.com Eine kleine Info über dieses Projekt: In diesem Projekt nehme ich ein bestimmtes Fahrzeug wie zB den Hummer H2 und versuche vom Flughafen aus zum Alderny Staatsgefängnis zu kommen und der schwierigste Part daran ist: 6 Star Wanted! :O Ich fahre jedesmal eine bestimmte Route um das Ziel zu erreichen und werde sehen wie es die Polizei genießen wird mich gegen alles zu drücken was nicht auf 3 auf dem Baum ist. Ich wünsche euch viel Spaß mit dem Video und wie immer Sweet Lovin! :D Die Mods: Grand Theft Auto Ultimate Vehicle Pack V9 (TBOGT/EPM Support) www.gta4-mods.com Das Video von dem Car Pack www.youtube.com ChinaGreenElvis ENB 4 for GTA IV and EFLC www.gta4-mods.com Color Radio HUD www.gta4-mods.com Bigger and Realistic Explosion Mod V.2 www.gta4-mods.com [PUSH] M16 A2 www.gta4-mods.com 2003 Volkswagen Bora V6 www.gta4-mods.com 2013 Ferrari 458 Spider www.gta4-mods.com 2013 SRT Viper GTS www.gta4-mods.com 2012 Porsche Cayenne Turbo *update* www.gta4-mods.com 2010 Bentley Continental SuperSports [EPM] www.gta4-mods.com 2012 Chevrolet Camaro ZL1 www.gta4-mods.com Lincoln Town Car Limousine 2006 (beta) www.gta4-mods.com 1959 Chevrolet Biscayne www.gta4-mods.com GMC <b>...</b>",
    "thumbnail": {
        "sqDefault": "http://i.ytimg.com/vi/rdprvN3g3EU/default.jpg",
        "hqDefault": "http://i.ytimg.com/vi/rdprvN3g3EU/hqdefault.jpg"
    },
    "player": {
        "default": "https://www.youtube.com/watch?v=rdprvN3g3EU&feature=youtube_gdata_player",
        "mobile": "https://m.youtube.com/details?v=rdprvN3g3EU"
    },
    "content": {
        "1": "rtsp://v6.cache8.c.youtube.com/CiILENy73wIaGQlF3ODdvGvarRMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp",
        "5": "https://www.youtube.com/v/rdprvN3g3EU?version=3&f=videos&app=youtube_gdata",
        "6": "rtsp://v6.cache8.c.youtube.com/CiILENy73wIaGQlF3ODdvGvarRMYESARFEgGUgZ2aWRlb3MM/0/0/0/video.3gp"
    },
    "duration": 615,
    "aspectRatio": "widescreen",
    "rating": 5,
    "likeCount": "8",
    "ratingCount": 8,
    "viewCount": 35,
    "favoriteCount": 0,
    "commentCount": 4,
    "accessControl": {
        "comment": "allowed",
        "commentVote": "allowed",
        "videoRespond": "moderated",
        "rate": "allowed",
        "embed": "allowed",
        "list": "allowed",
        "autoPlay": "allowed",
        "syndicate": "allowed"
    }
} 
```

我得到了我需要的一切......使用 v3 看起来我必须提出以下请求

```
https://www.googleapis.com/youtube/v3/search?part=id&key={YOUR_API_KEY} 
```

这给了我一个名字和描述以及channelId

```
https://www.googleapis.com/youtube/v3/videos?id=rdprvN3g3EU&part=snippet%2C+contentDetails%2C+statistics&key={YOUR_API_KEY} 
```

然后这个人给了我观看次数

```
https://www.googleapis.com/youtube/v3/channels?part=snippet&id=rdprvN3g3EU&key={YOUR_API_KEY} 
```

而这个最后的请求，以获取作者的名字......

在 v2 中，我只需要发出一个请求即可获得所需的一切，并且您肯定希望我需要的字段出现在标准搜索请求中吗？我在 v3 中也看不到对批处理请求的任何支持。我错过了什么吗？甚至不要让我开始了解速率限制的含义:(

使用 v3 执行简单搜索，我为第一个请求使用 3 个配额单位，第二个请求使用 7 个配额单位，最后一个请求使用另外 3 个配额单位。

13 个配额单元，每个用户执行单个视频搜索，显示我认为相对标准的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:24:10.027

您可以通过逗号分隔 id= 参数中的视频 ID 来发出批处理请求，如下所示：

```
https://www.googleapis.com/youtube/v3/videos?id=9OBm7aYa6Ic%2C+PTlL2N5Iwh8&part=id%2Csnippet%2Cstatistics&key={YOUR_API_KEY} 
```

我不完全确定您的应用程序是如何工作的，但是您可以存储频道的名称，因此对给定频道 ID 的调用只需发生一次。

如果您想让请求更小，看起来您没有使用视频通话的 contentDetails 部分。

# mysql - 使用 TableGateway 在 ZF2 中左连接

> ID：14813668
> 
> 赞同：19
> 
> 时间：2013-02-11T14:07:54.140
> 
> 标签：mysql, frameworks, zend-framework2, tablegateway

我有一张桌子：

```
*CREATE TABLE IF NOT EXISTS `blogs_settings` (
  `blog_id` int(11) NOT NULL AUTO_INCREMENT,
  `owner_id` int(11) NOT NULL,
  `title` varchar(255) NOT NULL,
  `meta_description` text NOT NULL,
  `meta_keywords` text NOT NULL,
  `theme` varchar(25) NOT NULL DEFAULT 'default',
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  `date_created` int(11) NOT NULL,

  PRIMARY KEY (`blog_id`),
  KEY `owner_id` (`owner_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;* 
```

第二张表：

```
*CREATE TABLE IF NOT EXISTS `users` (
  `user_id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL,
  `password` varchar(128) NOT NULL,
  `sex` tinyint(1) NOT NULL,
  `birthday` date NOT NULL,
  `avatar_id` int(11) DEFAULT NULL,
  `user_level` tinyint(1) NOT NULL DEFAULT '1',
  `date_registered` int(11) NOT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT '0',
  `is_banned` tinyint(1) NOT NULL DEFAULT '0',

  PRIMARY KEY (`user_id`),
  KEY `is_active` (`is_active`),
  KEY `user_level` (`user_level`),
  KEY `is_banned` (`is_banned`),
  KEY `username` (`username`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;* 
```

如何从 blogs_settings 表中选择所有字段，并使用 ZF2 中的 TableGateway 仅加入 users 表中的“用户名”字段，在`blogs_settings.owner_id = users.user_id`. 提前致谢。非常感谢您的帮助。

# **编辑：**

```
namespace Object\Model;

use Zend\Db\TableGateway\TableGateway;
use Zend\Db\Sql\Select;

class BlogsSettingsTable {

protected $tableGateway;
protected $select;

public function __construct(TableGateway $tableGateway) {
    $this->tableGateway = $tableGateway;
    $this->select = new Select();
}

public function getBlogs($field = '', $value = '') {
    $resultSet = $this->tableGateway->select(function(Select $select) {
                $select->join('users', 'blogs_settings.owner_id = users.user_id', array('username'));
            });

    return $resultSet;
}

public function getBlog($blogID) {
    $id = (int) $blogID;

    $rowset = $this->tableGateway->select(array('blog_id' => $id));
    $row = $rowset->current();

    if (!$row) {
        throw new Exception('Could not find row with ID = ' . $id);
    }

    return $row;
}

public function addBlog(BlogsSettings $blog) {
    $data = array(
        'owner_id' => $blog->owner_id,
        'title' => $blog->title,
        'meta_description' => $blog->meta_description,
        'meta_keywords' => $blog->meta_keywords,
        'theme' => $blog->theme,
        'is_active' => $blog->is_active,
        'date_created' => $blog->date_created,
    );

    $this->tableGateway->insert($data);
}

public function deleteBlog($blogID) {
    return $this->tableGateway->delete(array('blog_id' => $blogID));
} 
```

}

有了这个，它执行以下查询：

选择`blogs_settings`.*, `users`. 从`username`INNER JOIN ON开始。= 。`username``blogs_settings``users``blogs_settings``owner_id``users``user_id`

但结果集不包含加入的“用户”表中的用户名字段。但是，当我在 phpmyadmin 中运行查询时，一切正常，并且我已经加入了“用户”表中的“用户名”字段。有什么问题？

**编辑 2** 好的，我现在尝试了以下操作：

```
public function getBlogs() {
    $select = $this->tableGateway->getSql()->select();
    $select->columns(array('blog_id', 'interest_id', 'owner_id', 'title', 'date_created'));
    $select->join('users', 'users.user_id = blogs_settings.owner_id', array('username'), 'left');

    $resultSet = $this->tableGateway->selectWith($select);

    return $resultSet;
} 
```

执行的查询是：

```
SELECT `blogs_settings`.`blog_id` AS `blog_id`, `blogs_settings`.`interest_id` AS `interest_id`, `blogs_settings`.`owner_id` AS `owner_id`, `blogs_settings`.`title` AS `title`, `blogs_settings`.`date_created` AS `date_created`, `users`.`username` AS `username` FROM `blogs_settings` LEFT JOIN `users` ON `users`.`user_id` = `blogs_settings`.`owner_id` 
```

当我在 phpmyadmin 中运行它时，它会从用户表中加入用户名字段。在zf2中，它没有。

这是整个对象的转储：

```
Zend\Db\ResultSet\ResultSet Object
(
[allowedReturnTypes:protected] => Array
    (
        [0] => arrayobject
        [1] => array
    )

[arrayObjectPrototype:protected] => Object\Model\BlogsSettings Object
    (
        [blog_id] => 
        [interest_id] => 
        [owner_id] => 
        [title] => 
        [meta_description] => 
        [meta_keywords] => 
        [theme] => 
        [is_active] => 
        [date_created] => 
    )

[returnType:protected] => arrayobject
[buffer:protected] => 
[count:protected] => 1
[dataSource:protected] => Zend\Db\Adapter\Driver\Pdo\Result Object
    (
        [statementMode:protected] => forward
        [resource:protected] => PDOStatement Object
            (
                [queryString] => SELECT `blogs_settings`.`blog_id` AS `blog_id`, `blogs_settings`.`interest_id` AS `interest_id`, `blogs_settings`.`owner_id` AS `owner_id`, `blogs_settings`.`title` AS `title`, `blogs_settings`.`date_created` AS `date_created`, `users`.`username` AS `username` FROM `blogs_settings` LEFT JOIN `users` ON `users`.`user_id` = `blogs_settings`.`owner_id`
            )

        [options:protected] => 
        [currentComplete:protected] => 
        [currentData:protected] => 
        [position:protected] => -1
        [generatedValue:protected] => 0
        [rowCount:protected] => 1
    )

[fieldCount:protected] => 6
[position:protected] => 
) 
```

上...有什么想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-09-22T22:02:32.153

添加到@samsonasik 的答案并解决其评论中的问题。您将无法从该语句返回的内容中获取连接值。该语句返回没有连接行的模型对象。您需要在将其准备为原始 SQL 并将每个结果行作为数组而不是对象返回给您的级别上作为 SQL 执行它：

```
$sqlSelect = $this->tableGateway->getSql()->select();
$sqlSelect->columns(array('column_name_yourtable'));
$sqlSelect->join('othertable', 'othertable.id = yourtable.id', array('column_name_othertable'), 'left');

$statement = $this->tableGateway->getSql()->prepareStatementForSqlObject($sqlSelect);
$resultSet = $statement->execute();
return $resultSet;

//then in your controller or view:

foreach($resultSet as $row){
    print_r($row['column_name_yourtable']);
    print_r($row['column_name_othertable']);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-11T20:49:52.947

如果您使用的是 TableGateway，则可以像这样选择加入

```
$sqlSelect = $this->tableGateway->getSql()->select();
$sqlSelect->columns(array('column_name'));
$sqlSelect->join('othertable', 'othertable.id = yourtable.id', array(), 'left');

$resultSet = $this->tableGateway->selectWith($sqlSelect);
return $resultSet; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T07:24:14.537

您必须在 BlogsSetting 模型中包含用户名字段，该模型用作 BlogsSettingTable （TableGateway）的模型

```
class BlogsSetting {
    public $blog_id;
    public $interest_id;
    public $owner_id;
    public $title;
    public $meta_description;
    public $meta_keywords;
    public $theme;
    public $is_active;
    public $date_created;
    public $username;

    public function exchangeArray($data)
    {
        // Create exchangeArray
    }
} 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-14T06:54:02.260

**这正是使用tableGateway的****Join**和**Where**子句的确切需要。

 **```
public function getEmployeefunctionDetails($empFunctionId) {
    $empFunctionId = ( int ) $empFunctionId;
    //echo '<pre>'; print_r($this->tableGateway->getTable()); exit;
    $where = new Where();
    $where->equalTo('FUNCTION_ID', $empFunctionId);

    $sqlSelect = $this->tableGateway->getSql()->select()->where($where);    

    $sqlSelect->columns(array('FUNCTION_ID'));
    $sqlSelect->join('DEPARTMENTS', 'DEPARTMENTS.DEPARTMENT_ID = EMPLOYEE_FUNCTIONS.DEPARTMENT_ID', array('DEPARTMENT_ID','DEPARTMENT_NAME'), 'inner');
    $sqlSelect->join('ROLES', 'ROLES.ROLE_ID = EMPLOYEE_FUNCTIONS.ROLE_ID', array('ROLE_ID','ROLE_NAME'), 'inner');

    //echo $sqlSelect->getSqlString(); exit;
    $resultSet = $this->tableGateway->selectWith($sqlSelect);

    if (! $resultSet) {
        throw new \Exception ( "Could not find row $empFunctionId" );
    }
    return $resultSet->toArray();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T18:57:37.133

在从 AbstractTableGateway 继承的类中，您可以像这样使用 Select with Closure：

```
use Zend\Db\Sql\Select;
...
public function getAllBlockSettings()
{
    $resultSet = $this->select(function(Select $select) {
        $select->join('users', 'blogs_settings.owner_id = users.user_id', array('username'));
    });

    return $resultSet;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-19T10:01:00.640

试试看：

```
namespace Object\Model;

use Zend\Db\TableGateway\AbstractTableGateway;
use Zend\Db\Sql\Select;

class BlogsSettingsTbl extends AbstractTableGateway {
    public function __construct($adapter) {
        $this->table = 'blogs_settings';
        $this->adapter = $adapter;
        $this->initialize();
    }

    public function fetchAll() {
        $where = array(); // If have any criteria
        $result = $this->select(function (Select $select) use ($where) {
                    $select->join('users', 'blogs_settings.owner_id = users.user_id', array('username'));
                    //echo $select->getSqlString(); // see the sql query
                });
        return $result;
    }
} 
```

在 Module.php 中添加到“getServiceConfig()”：

```
'Object\Model\BlogsSettingsTbl' => function($sm) {
    $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
    $table = new BlogsSettingsTbl($dbAdapter); // <-- also add this to 'USE' at top
    return $table;
}, 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-12T09:09:00.093

由于OP没有接受任何答案，我会尝试给出解决方案。我面临与 OP 状态相同的解决方案，修复它的唯一方法是将此行添加到模型类（在这种情况下，这可能是“Blogsetttings.php”）。

```
$this->username= (!empty($data['username'])) ? $data['username'] : null; 
```

您应该将上面的行添加到 exchangeArray() 方法中。希望能帮助到你**

# c# - 仅设置 setter 属性

> ID：14813674
> 
> 赞同：5
> 
> 时间：2013-02-11T14:08:00.160
> 
> 标签：c#

我有一个具有如下属性的对象模型：

```
public class SomeModel
{
   public string SomeString { get; set; }

   public void DoSomeWork()
   {
      ....
   }
} 
```

我希望该功能在属性更改`DoSomeWork`后自动执行。`SomeString`我试过这个，但它不工作：

```
public string SomeString { get; set { DoSomeWork(); } } 
```

什么是正确的语法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T14:10:59.320

改用私有字段，像这样......

```
public class SomeModel
{
    private string someString = "";

    public string SomeString {
        get { return this.someString; }
        set {
            this.someString = value;
            this.DoSomeWork();
        }
    }

   public void DoSomeWork()
   {
      ....
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T14:11:19.493

您不能使用自动属性执行此操作 - 您必须创建一个由字段支持的“手动”属性。

```
private string _someString;

public string SomeString
{ 
   get { return _someString; }
   set 
   {
        _someString = value;
        DoSomeWork();
   }
} 
```

如果你*真的*不能处理这个样板（比如你必须这样做数百次），考虑使用像[PostSharp](http://www.sharpcrafters.com/)这样的 AOP 框架来代表你实现它——你只需要声明一个自动属性和一个属性以获取二进制重写器以实现所需的方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T14:11:32.990

这将工作...

```
private string _someString;
public string SomeString { get { return _someString; } set { _someString = value; DoSomeWork(); } } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T14:12:09.060

```
private string _someString;

public string SomeString
{
    get
    {
       return _someString;
    }
    set 
    {
       DoSomeWork();
       _someString = value;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T14:40:28.810

C# 团队在 C# 3.0 中引入了自动实现属性。具有最小化模型制作的逻辑，该模型制作由编译器创建的匿名字段支持。当您不需要在对象类的属性上实现任何其他逻辑时，使用这个。所以它只是跟随。

```
public string Name{ get; set;}// auto-implemented property. no additional logic. 
```

如果我们想添加一些逻辑，就像您想添加一个功能一样。我们必须编写一个由私有字段支持的手动属性，如下所示。

```
private string _Name;
public string Name
{
  get {return _Name;}
 set {
        _Name=value;
        DoSomething(); //Additional logic implemented.
     }
} 
```

# javascript - 点击形状后 KineticJS 自动调用 moveToTop()

> ID：14813676
> 
> 赞同：0
> 
> 时间：2013-02-11T14:08:08.020
> 
> 标签：javascript, drag, layer, kineticjs

我在这里遇到了一个小问题，但我不知道这是错误还是新功能，因为在 KineticJS 更改日志中有以下更改：

“拖放操作现在会自动动态创建一个临时顶层，并在其中放置组和形状的节点，以大大提高拖放性能......”

我习惯于在我的测试项目中使用 4.0.0 版本，当我想将某个形状移到顶部时，我必须使用显式 moveToTop()（我认为这是正确的方法）。现在（版本 4.3.2）如果我只是点击一些图片，它会自动移动到顶部而不是我的意愿。这个临时层应该是内部的，没有视觉效果。那么这真的是一个错误还是有某种方法可以关闭这个东西。

我认为即使是实验室也发生了变化，在我认为如果您不调用 moveUp、moveToTop 等函数时，对象会保持空间顺序。例如，在下面的链接中没有 moveToTop() 函数调用，即使这样，如果您单击形状，它们也会移动到顶部。

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-move-shape-to-another-container-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-move-shape-to-another-container-with-kineticjs/)

感谢关注

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:09:48.937

虽然我认为您不能完全禁用该图层，但您可以关闭将形状移动到其中。假设您有一些形状，例如：

```
 var shape1 = new Kinetic.Rect({
      x: 100,
      y: 100,
      width: 100,
      height: 100,
      fill: 'blue',
      draggable: true
  }); 
```

您需要为此添加一个参数以禁用在拖动时将形状移动到临时图层：'dragOnTop' 必须为假，因此使您的形状类似于：

```
 var shape1 = new Kinetic.Rect({
      x: 100,
      y: 100,
      width: 100,
      height: 100,
      fill: 'blue',
      draggable: true,
      dragOnTop: false  //<-- add this line so that this shape doesn't use the drag layer.
  }); 
```

# java - 将 HTTP 响应中的 JSON 字符串与其他数据隔离开来

> ID：14813677
> 
> 赞同：0
> 
> 时间：2013-02-11T14:08:08.073
> 
> 标签：java, json

我在服务器上查询一个 PHP 脚本，返回一些 php 回显。

下面的片段是一个 JSON 片段：

```
 {"cid":"212"} 
```

整个输出有一些 HTML 片段

```
<br>Order posted 214 - 192.168.1.22:4444 <br>{"cid":"214"} 
```

从其余部分中过滤 JSON 部分的最简单方法是什么？

我知道杀死所有其他输出会更容易，但我仍然希望为这种情况找到一个快速的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:02:07.463

感谢正则表达式的想法

```
 Pattern pattern = Pattern.compile("\\{(.*?)\\}");
   Matcher matcher = pattern.matcher(text);
    while (matcher.find())
      {
        System.out.println(matcher.group(0));                                  
      } 
```

# android - ScheduledExecutorService does not execute if it has moved from the main activity

> ID：14813685
> 
> 赞同：0
> 
> 时间：2013-02-11T14:08:22.773
> 
> 标签：android, scheduledexecutorservice

I have the code below which is in ONCreate() method of the main activity and works fine. After moving to the next activity (B) which is a list view and then to activity (C ) which is the row selected from the listview and goes to sleep then the ScheduledExecutorService started in the main activity is not executing anymore .

Why is it not executing and how do I fix it? I am noob in Android .Please help me out.

Thanks in Advance .Really appreciate the help.

```
ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();
            executor.scheduleWithFixedDelay(new Runnable(){

                public void run() {

    //play audio file

    mp3.start();

                }

            }, 0, 60, TimeUnit.SECONDS); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:50:32.993

In order to cater the app running and the set sleeping scenario look in to using alarm manager with WAKELOCK... example : [http://code4reference.com/2012/07/tutorial-on-android-alarmmanager/](http://code4reference.com/2012/07/tutorial-on-android-alarmmanager/) and [Alarm Manager Example](https://stackoverflow.com/questions/4459058/alarm-manager-example)

# .htaccess - 在 mod_rewrite RewriteRule 中包含主机名

> ID：14813686
> 
> 赞同：0
> 
> 时间：2013-02-11T14:08:23.513
> 
> 标签：.htaccess, mod-rewrite

我在一个虚拟主机中有多个域，例如别名：example.com 是主要的，example1.com 和 example2.com 是别名

我需要将多个域重写为单个入口点，通过 GET 查询参数传递它，去掉 www 前缀，例如：

```
HOST -> rewrite to
www.example1.com/some/path -> [example.com]/index.php?q=domain/example1.com/some/path
    example2.com/some/path -> [example.com]/index.php?q=domain/example2.com/some/path 
```

我当前的 .htaccess 不能正常工作

```
RewriteRule   ^(.+) %{HTTP_HOST}$1 [C]
RewriteRule   ^(.*)/(.*) index.php?q=domain/$1/$2 [L,QSA] 
```

**更新1**

尝试使用 RewriteMap - rewrite.map 它遵循

```
example-site.com www.examplesite.com
www.example-site.com www.examplesite.com 
```

.htaccess

```
RewriteMap host2site txt:/var/www/rewrite.map
RewriteRule ^(.*)$ index.php?q=/domain/{host2site:$1|NOTFOUND} [PT] 
```

但它因 500 服务器错误而崩溃:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:14:04.580

尝试

```
RewriteCond %{HTTP_HOST} !=example.com [NC]
RewriteRule ^(.*)$ http://example.com/index.php?q=domain/%{HTTP_HOST}/$1 [L,QSA] 
```

# visual-studio-2012 - 你能在 Windows 7 上的 Visual Studio 2012 中设计 Windows RT 应用吗

> ID：14813689
> 
> 赞同：0
> 
> 时间：2013-02-11T14:08:28.887
> 
> 标签：visual-studio-2012

有谁知道如何在 Windows 7 PC 上设计 Windows RT 应用程序？

我安装了 Visual Studio 2012 并安装了 Windows SDK 工具包，但我在 Visual Studio 中仍然没有任何 Windows 商店/移动项目类型。

有人有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:12:12.313

Windows RT 应用程序只能在基于 Windows 8/Windows 8 RT 的操作系统上运行。这也适用于 Windows RT 开发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:12:33.553

不，很遗憾，您无法在 Windows 7 上开发任何 WinRT 应用程序

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T14:12:47.210

我相信您只能在 Windows 8 PC 上创建 Windows Store 应用程序。

# c# - 也许在 Linq 中找到了一个功能。具有多个字段的 Groupby

> ID：14813690
> 
> 赞同：3
> 
> 时间：2013-02-11T14:08:29.183
> 
> 标签：c#, linq, group-by

这两行似乎做同样的事情。可以使用加号 (+) 代替匿名类型。

```
var newlist1 = list.GroupBy(x => x.FIELD1 + x.FIELD2).Select(y => y.First());

var newlist2 = list.GroupBy(x => new {x.FIELD1, x.FIELD2}).Select(y => y.First()); 
```

现在我的问题：

加号 (+) 是为 GroupBy 记录的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T14:11:12.343

请注意这一点:) 例如，如果`x.FIELD1`和`x.FIELD2`是字符串类型的属性，那么您只是按连接两者的结果进行分组......这可能不是您想要的。当然，这同样适用于其他类型，但字符串中的示例仍然存在：

给定`Field1`= "ABC" 和`Field2`= "DEF"，您的分组将使用键 "ABCDEF"，对吗？

那么如果你有`Field1`= "AB" 和`Field2`= "CDEF" 呢？非常不同的值，但你的分组仍然是“ABCDEF”......

您应该坚持使用匿名类型进行分组（仅在方法中使用时），或者在外部需要时，使用新类、结构或使用元组。

**编辑**：另一个快速说明：执行`GroupBy`（没有投影）之后，看看你得到的键值......它应该向你展示我的意思的一个例子。

# viewstate - LoadRunner 视图状态

> ID：14813691
> 
> 赞同：0
> 
> 时间：2013-02-11T14:08:30.803
> 
> 标签：viewstate, loadrunner

在其他帖子中，我在应用程序的记录和回放方面遇到了一些问题，有人告诉我视图状态可能是我应该针对这个问题研究的东西。

我这里有一大段代码在重播期间*工作*（虽然不是同一个应用程序），但我要表达的观点是一样的：

```
web_submit_data("overview.jsf", 
    "Action=https://wasapp-q1.adeo.no/some/sa/overview.jsf?execution=e4s1", 
    "Method=POST", 
    "TargetFrame=", 
    "RecContentType=text/html", 
    "Referer=https://wasapp-q1.adeo.no/some/sa/overview.jsf?execution=e4s1", 
    "Snapshot=t4.inf", 
    "Mode=HTML", 
    ITEMDATA, 
    "Name=overviewSearchForm:searchCriteriaId", "Value=01024531232",   ENDITEM, 
    "Name=overviewSearchForm:j_id111", "Value=Get ", ENDITEM, 
    "Name=overviewSearchForm_SUBMIT", "Value=1", ENDITEM, 
    "Name=javax.faces.ViewState", "Value=cxeGmdwmyti6LtCKFbfHsLGYkE6QJ+eGozLlfTsidCNXrT2KqQ+JviDhkv7MCtdmlnxzQZVOMo9uO9ZrjUUdfpfFJMwwRfg/A09/Em5tTUJxNZ6fUe5LGK9oitXNeeBh0M5Yd7nwXn5uj1bLQzluR09kUUA2dnwrXajncw==", ENDITEM, 
    LAST); 
```

这段代码*不起作用*：

```
web_submit_data("hello_world_2", 
    "Action=http://d26jbsl00003.test.local:8080/wow/behold/83512/considervilkar?5-1.IBehaviorListener.0-vurdereVilkarListe-vurdereVilkarRepeater-4-considerVilkarListItem-considerHoved-innerPanel-vilkarDetaljer-vilkarForm-vilkarsregelValg",
    "Method=POST", 
    "TargetFrame=", 
    "RecContentType=text/xml", 
    "Referer=http://d26jbsl00003.test.local:8080/vedtak/behandling/83512/vurderevilkar?5", 
    "Snapshot=t4.inf", 
    "Mode=HTML", 
    ITEMDATA, 
    "Name=vilkarsregelValg", "Value=OPPFYLT", ENDITEM, 
    LAST); 
```

两个代码块都调用 web_submit_data。假设 Viewstate 与上一个的重播问题有关，那么是什么：

```
"Name=javax.faces.ViewState", "Value=cxeGmdwmyti6LtCKFbfHsLGYkE6QJ+eGozLlfTsidCNXrT2KqQ+JviDhkv7MCtdmlnxzQZVOMo9uO9ZrjUUdfpfFJMwwRfg/A09/Em5tTUJxNZ6fUe5LGK9oitXNeeBh0M5Yd7nwXn5uj1bLQzluR09kUUA2dnwrXajncw==", 
```

实际上是指在 LoadRunner 上下文中吗？它可能与我的第二块代码不起作用（没有 Viewstate）有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:59:59.173

状态是随着每个请求而变化的东西。因此，ViewState 是您需要为几乎每个请求（当它存在时）关联的东西。还有 jsessionstate 出现在 Java 应用程序上，ViewState 通常与 ASP 和 ASP.Net 相关联

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-06T13:41:10.400

尝试使用 AJAX Truclient，这将对您有很大帮助。那里不需要相关性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-18T19:14:09.933

Viewstate 是一个随着每次登录而变化的值。它是服务器在登录时返回的 64 位编码值。

您可以尝试从上一个请求的响应中关联该值。

# android - 可以创建两个 NotificationHelper 实例吗？

> ID：14813694
> 
> 赞同：0
> 
> 时间：2013-02-11T14:08:43.257
> 
> 标签：android, download, android-asynctask, android-notifications

所以我正在尝试实现 using`NotificationHelper`来通知用户下载进度。

```
public class MapDownload extends AsyncTask<String, Integer, String>{
    public MapDownload(ArrayList<PlaceDetails> placeList, int travelogueID, Context mContext, String travelogueName){ 
        this.places = placeList;
        this.zoom = 12;
        this.tID = travelogueID;
        mNotificationHelper = new NotificationHelper(mContext, travelogueName);
    }

    @Override
    protected void onPreExecute(){
        //Create the notification in the statusbar
        mNotificationHelper.createNotification();
    }
} 
```

但是，我想知道是否有可能实现它，如果我启动另一个`MapDownload`类来下载东西，我该怎么做才能使两者同时运行？似乎在启动 2nd`MapDownload`时，第一个消失了，之前的通知将被第二个替换。

这是错误`AsyncTask`实现的问题，还是错误的使用方式`NotificationHelper`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:13:12.193

我不知道是什么`NotificationHelper`，它来自第三方库吗？

但是，在创建通知时，您必须提供 ID。如果稍后重复使用相同的 ID，则先前的通知将被替换。请参阅[NotificationManger](http://developer.android.com/reference/android/app/NotificationManager.html#notify%28int,%20android.app.Notification%29)文档。

也许这就是正在发生的事情。

# php - 如何减少 PHP 条件用法？

> ID：14813696
> 
> 赞同：1
> 
> 时间：2013-02-11T14:08:51.033
> 
> 标签：php, class, conditional

我想知道是否可以简化我的 PHP 条件。

从：

```
/* Do nothing if there are no taxonomies. */
if(!property_exists(__CLASS__, 'taxonomies') || !$this->taxonomies || empty($this->taxonomies) || is_null($this->taxonomies)){
    return;
} 
```

至：

```
/* Do nothing if there are no taxonomies. */
if(!property_exists(__CLASS__, 'taxonomies') || !$this->taxonomies){
    return;
} 
```

`!$this->taxonomies`完成`!is_null($this->taxonomies)`了吗`!empty($this->taxonomies)`？

*   必须存在一个类属性。
*   数据不得为 NULL。
*   数据绝对不能为空。
*   数据绝不能有错误值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:08:47.803

1.  是的，`!$this->taxonomies`检查是否`$this->taxonomies`不包含评估为 bool false 的值，其中包括`empty string`, `NULL`, `FALSE`, `ZERO int`,`empty array`可能还有其他值。
2.  一般来说，`!property_exists(__CLASS__, 'taxonomies')`这似乎是一个糟糕的设计（这取决于你在做什么），但总的来说，你应该知道你正在使用什么实例以及它应该有什么相应的接口。所以`taxonomies`应该被定义，甚至应该有一个封装它的getter（例如getTaxonomies（））。然后简单的检查`if (!empty($obj->taxonomies))`或简单的（无论你更喜欢什么）`if(!$obj->taxonomies)`就足够了。

# mysql - Drupal 7 Mysql 查询（插入）

> ID：14813698
> 
> 赞同：2
> 
> 时间：2013-02-11T14:08:57.820
> 
> 标签：mysql, drupal-7

我是 Drupal 的新手。所以我想知道你是否可以帮助我。

我看到了很多关于 Drupal API mysql thing-y 的文档，这一直困扰着我，我必须再次学习才能完成我的工作。

这是我应用于我的问题的文档

![在此处输入图像描述](../Images/739f1cf58b68efd6a31d71e66c047677.png)

关于我关于**INSERT**函数的问题，我有这个表名为**embed**

![在此处输入图像描述](../Images/21028686770466e5f7855195d8abde2d.png)

这是我嵌入的表格中的数据。

![在此处输入图像描述](../Images/d15192ea1ef4a5b4434303c83dc9281b.png)

然后在我的**基本页面上**，我试图插入一个查询。

```
$id = db_insert("embed")
    ->fields(array(
        'uid' => 1,
        'fbp_id' => 22222,
        'prom_stat' => 3333,
        'status' => 1,
    ))
    ->execute(); 
```

它没有向表中插入数据，而是输出这样的错误。 ![在此处输入图像描述](../Images/c4844e522ca6080a992cc80137a23550.png)

有人知道这个东西的解决方案吗？我现在真的很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:55:58.627

正如@steve 在评论中所建议的那样，问题不在drupal 方面，而在MySql 方面。您需要将插入代码修改为

```
$id = db_insert("embed")
    ->fields(array(
        'uid' => 1,
        'fbp_id' => 22222,
        'prom_stat' => 3333,
        'status' => 1,
        'prom_id' => 0,
        'sweep_stat' => 0,
        'sweep_id' => 0,
        'comp_id' => 0,
        'comp_stat' => 0,
        'polls_stat' => 0,
        'polls_id' => 0
    ))
    ->execute(); 
```

因为我可以看到您的 MySql 表已经包含值，所以我假设之前的插入是通过显式提供所有值来完成的，而不是依赖于 MySql 配置中字段的默认值。

每当您遇到 PDOException 时，您都应该仔细阅读它以获取线索。这些错误实际上是非常口头的，并提供了很多解决问题的指示。例如在你的情况下，

> “prom_id”没有默认值

解释了很多。

# jquery - 如何在jQuery中连续触发函数？

> ID：14813699
> 
> 赞同：0
> 
> 时间：2013-02-11T14:09:04.200
> 
> 标签：jquery, function

我的基本设置是我有一个隐藏的表单，直到通过单击进行选择，例如“成员、非成员、员工等”。单击选择后，表单将显示，其中的计费区域也将隐藏，直到表单总额超过 0 美元。

现在我遇到的问题是，一旦点击了 5 个选项中的 4 个，总数应该立即大于 0 美元。既然如此，计费部分应该自动触发，但我无法让我的第二个函数（进行计算的那个）监听 onclick 事件或 on change 事件的第一个函数。有没有一种方法可以在我的每个“if”语句中，最后我放入“**执行计算函数**”之类的代码？

像这样的东西：

```
if(section == 'Member') {
            var base_cost = 150;

            $("#commentTable,#ClinicStaff,#IMSNonMember,#Resident,#Student").fadeOut('slow', function() {
                // Animation complete.
            });
            $("#commentTable, #IMSMember").fadeIn('slow', function() {
                // Animation complete
            });
            $("input[name=SectionChosen]").val('Member');// Section selected, pass as hidden field for processing
                    ***$runNextFunction();***

        } 
```

我试着做：`$(" 'input[name^=PROD]', 'base_cost ").change(function() {`

看看我是否可以让函数监视输入和基本成本字段的变化。但它不想触发。这是我的完整设置：

```
jQuery(function(ready){

    jQuery('.showForm').click(function(){

        var section = $(this).attr('target');
        var base_cost = ''; // reset base cost
        $("input[name=TOTAL]").val('');// Reset the Total field to 0 to hide the billing form again
        $("input[name^=PROD]").val('');// matches those that begin with 'PROD' and clears them
        $("input[name=SectionChosen]").val('');// Reset the section choice

        if(section == 'Member') {
            var base_cost = 150;

            $("#commentTable,#ClinicStaff,#IMSNonMember,#Resident,#Student").fadeOut('slow', function() {
                // Animation complete.
            });
            $("#commentTable, #IMSMember").fadeIn('slow', function() {
                // Animation complete
            });
            $("input[name=SectionChosen]").val('Member');// Section selected, pass as hidden field for processing

        }
        else if(section == 'Clinic') {
            var base_cost = 150;

            $("#commentTable,#IMSMember,#IMSNonMember,#Resident,#Student").fadeOut('slow', function() {
                // Animation complete.
            });
            $("#commentTable, #ClinicStaff").fadeIn('slow', function() {
                // Animation complete
            });
            $("input[name=SectionChosen]").val('Clinic');// Section selected, pass as hidden field for processing
        }
        else if(section == 'Nonmember') {
            var base_cost = 250;

            $("#commentTable,#IMSMember,#ClinicStaff,#Resident,#Student").fadeOut('slow', function() {
                // Animation complete.
            });
            $("#commentTable, #IMSNonMember").fadeIn('slow', function() {
                // Animation complete
            });
            $("input[name=SectionChosen]").val('Nonmember');// Section selected, pass as hidden field for processing
        }
        else if(section == 'Resident') {
            var base_cost = 75;

            $("#commentTable, #IMSMember,#ClinicStaff,#IMSNonMember,#Student").fadeOut('slow', function() {
                // Animation complete.
            });
            $("#commentTable, #Resident").fadeIn('slow', function() {
                // Animation complete
            });
            $("input[name=SectionChosen]").val('Resident');// Section selected, pass as hidden field for processing
        }
        else if(section == 'Student') {
            var base_cost = 0;

            $("#commentTable,#IMSMember,#ClinicStaff,#IMSNonMember,#Resident").fadeOut('slow', function() {
                // Animation complete.
            });
            $("#commentTable, #Student").fadeIn('slow', function() {
                // Animation complete
            });
            $("input[name=SectionChosen]").val('Student');// Section selected, pass as hidden field for processing
        }

        // Calculate order Total
        $('input[name^=PROD]').change(function() { 

            // Total cost of order, is equal to base cost + any additional selectoins made below
            var order_total = base_cost;

            // Run through all the form fields
            $('input[name^=PROD]').each(function(i) {

                // Get the current field and its name
                var form_name = $(this).attr('name');

                // If so, extract the price from the name
                var item_price = parseFloat(form_name.substring(form_name.lastIndexOf("_") + 1));

                // Get the quantity
                var item_quantity = parseInt($(this).val(), 10);

                // Update the order total
                if (item_quantity >= 0) {
                    order_total += item_quantity * item_price
                }

            });

            // Display the total rounded to two decimal places
            $('input[name=TOTAL]').val((Math.round(order_total*100)/100).toFixed(2));

            // Show the billing portion if total is not 0
            if (order_total > 1) {
                // show the section with the billing portion
                $("#BillingPortion").show();
            }
            else {
                // hide billing portion if total is 0
                $("#BillingPortion").hide();
            }
        });

    });
}); 
```

正如您从[此处的 jsFiddle](http://jsfiddle.net/madcaesar/MY3vd/)中看到的那样，表单有效，如果您单击一个选择，然后通过在客人中插入一个数字来添加更多“成本”，然后显示计费部分。但这还不够好，因为如果他们不想要任何客人，帐单部分仍应显示他们的基本成本是否大于 0 美元。

如果有人能指出我正确的方向，那就太好了。

此外，我在 jQuery 方面还很缺乏经验，所以我确信我的代码可以变得更加 DRY，并且对你们中的一些人来说可能看起来很糟糕，但至少这是一个开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:55:20.707

好吧，我继续对您的代码进行了一些重构。[这是结果。](http://jsfiddle.net/MattiasBuelens/rQcqG/)

## 部分链接的标记

您正在使用链接在表单之间切换。但是，链接本身（通过您的 JavaScript 代码）间接设置了一个名为`SectionChosen`. 您可以更清楚地表明单击链接代表一个**选择**，并且该选择也是表单数据的一部分。**因此，使用一组单选框**来选择一个选项比使用一组语义上不相关的链接更合适。由于单选框是带有 a和 a的适当`input`元素，因此它们可以替换您原来的隐藏输入。奖励：您甚至不需要任何 JavaScript 来设置值，因为所选单选框的值将被提交！`name``value``SectionChosen`

```
<label><input type="radio" name="SectionChosen" value="Member" /> I am an IMS Member Physician</label>
<label><input type="radio" name="SectionChosen" value="Clinic" /> I am a Clinic/Hospital Administrators or Clinic Staff</label>
... 
```

## 检索基本成本

在处理程序中，您尝试设置一个根据单击的链接`click`调用的局部变量来计算总数。`base_cost`问题是您将新的处理程序绑定到`input`'s`change`事件，**堆叠在**先前选择的链接中先前绑定的处理程序上。看起来它正在工作，但实际上您正在计算大量总数，只有最后一个绑定处理程序产生最终输出值。

实际上，基本成本是所选部分的属性，并且在切换部分和更改表单输入时都应该很容易访问。做到这一点的一个好方法是将每个选择的基本成本作为属性存储在单选框上。`data-*`专门针对此类自定义数据需求引入了属性：

```
<input type="radio" name="SectionChosen" value="Member" data-base-cost="150" /> 
```

然后可以通过以下方式检索基本成本：

```
var base_cost = $(...).data('base-cost'); 
```

要从*当前选定*的部分获取基本成本，只需查找当前选定的单选框：

```
var base_cost = $('input[name=SectionChosen]:checked').data('base-cost'); 
```

这里的所有都是它的！您不再需要`change`从处理程序中绑定处理`click`程序，因为您可以在标记本身中找到基本成本。这意味着您只需要`change`在 DOM 准备好时绑定处理程序一次，因为它应该是。

## 进一步改进

总是有更多改进的空间。例如，您可以为实际的表单部分提供`data-section`与部分名称匹配的属性，而不是`id`. 这样，您可以更轻松地选择需要隐藏的部分和需要显示的部分。无需写下相同的 ID 选择器列表，您只需选择类似`.section[data-section="Member"]`and之类的东西`.section:not([data-section="Member"])`。哎呀，该`data-section`值甚至可以来自所选的单选框本身，您甚至不再需要一棵长`if...else if`树！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:16:09.267

有几件事。通过在处理程序中进行`$('input[name^=PROD]').change`绑定，您`click`将在每次触发处理程序时添加相同的处理`click`程序。这意味着在第二次单击时，当您更改输入时，它将触发两次。这可能不是你想要的。

其次，为什么不将计算总数的部分抽象为您可以在`click`处理程序中调用的单独函数。

```
function calculateTotal() {
    // your code to calculate the total and make part of the UI visible if more than
    // $0.
} 
```

然后你也可以让你的`change`处理程序调用它：

```
 $('input[name^=PROD]').change(function() { 
     calculateTotal();
 } 
```

# php - 如何配置 cURL 以使用客户端代理？

> ID：14813703
> 
> 赞同：0
> 
> 时间：2013-02-11T14:09:21.840
> 
> 标签：php, curl, proxy

我正在获取一个 URL，但在某些国家/地区已被过滤。我正在寻找一种配置 cURL 以使用客户端代理的方法。

我的意思是已在浏览器或连接中设置的代理。

任何其他可以解决问题并确定网站是否被过滤的解决方案都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:16:07.777

对于 libcurl，使用 CURLOPT_PROXY：

[http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTPROXY](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTPROXY)

对于 curl 命令行工具，使用选项 --proxy host:port。

库和命令行工具都尊重环境变量 http_proxy、ftp_proxy、all_proxy，所以这是另一种选择。

编辑：如果您想在服务器上使用客户端的代理 - 这将无法可靠地工作。首先，您需要通过 javascript 确定客户端的代理设置——这可能有效。其次，您需要使用该代理在服务器上发出请求 - 这肯定不会可靠地工作，因为客户端的代理可能位于本地网络中（无法从外部访问），需要身份验证等。

一种选择是通过 JavaScript (AJAX) 发出客户端请求并验证结果 - 这是一种有点可疑的方法，因为您正在从客户端的计算机向可能被阻止的（非法？）站点发出请求。最好不要那样做。

# c# - ASP.net 图像处理并将此图像添加到图像控件

> ID：14813707
> 
> 赞同：0
> 
> 时间：2013-02-11T14:09:32.570
> 
> 标签：c#, asp.net

我有以下代码：

```
bmp = new Bitmap("C:\\resim.jpg");
Graphics g = Graphics.FromImage(bmp);
g.DrawString(metin, new Font(metin, 9, FontStyle.Regular), new SolidBrush(System.Drawing.Color.Black), 10, 10); 
```

使用此代码，我可以创建一个新图像。现在我将在我的网页上显示我的图像，即我将使用图像控件显示它。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:36:33.793

您必须将修改后的位图另存为服务器上的新文件，并将其分配给 Image 控件`ImageUrl`属性：

```
//after changes were made:
bmp.Save(Server.MapPath("~/images/resim_new.jpg"));

//set image control:
Image1.ImageUrl = "~/images/resim_new.jpg"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:49:47.070

如果将其保存到磁盘，则必须担心为每个图像生成不同的临时文件并在完成后进行清理。实现一个动态生成图像并将其写回的 IHttpHandler 可能会更好。当然，您仍然需要在 url 上附加一些内容，以便您知道要写什么文本，但是以后没有垃圾需要清理。

所以你会做这样的事情：

```
Image1.ImageUrl = "MyImageHandler.ashx?key=xyz"; 
```

您将在 web.config 中设置一个映射，以将 MyImageHandler.ashx 的请求发送到您的实现类。

# sharepoint - Sharepoint - 项目管理 - 任务分组

> ID：14813711
> 
> 赞同：1
> 
> 时间：2013-02-11T14:09:46.823
> 
> 标签：sharepoint, sharepoint-2010, project-management, gantt-chart

我有一个关于 Sharepoint 2010 的问题。我使用项目管理的站点模板创建了一个新站点。我在 Sharepoint 上使用甘特图，大部分内容都很直观且易于配置。剩下的唯一一点我无法做到的是 - 在甘特图中对任务进行分组。

我正在寻找类似于[http://www.slideshare.net/ASPE_INC/building-a-project-management-information-system-with-sharepoint](http://www.slideshare.net/ASPE_INC/building-a-project-management-information-system-with-sharepoint)上 Slide#11 的方式。

我要疯了，在网上搜索这个。谁能指导我。是否可以实现任务分组？

**在 2013 年 2 月 11 日编辑**
我尝试了几件事，发现在新项目下有一个添加“任务”和“摘要任务”的选项。摘要任务似乎是我一直在寻找的组。所以这很好，但现在我不知道如何在这个摘要任务下添加一个任务：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:18:38.643

一个简单的解决方案是在甘特视图组中创建一个子任务/类别/阶段或一些逻辑列。

您没有获得花哨的项目管理功能，但必须为每个前辈添加等等，但是您可以在同一视图中查看任务和子任务。

# jquery - 用jquery合并多个相同的html元素

> ID：14813717
> 
> 赞同：1
> 
> 时间：2013-02-11T14:10:12.193
> 
> 标签：jquery

我喜欢只在 div 中移动文本，使它像：

```
 <div class="field-item even">
 Job1<p><a href="">Name1</a></p>
 </div> 
```

ETC...

我喜欢合并并删除所有 .field-name-field-brief-text-team div

任何帮助请...谢谢

```
 <div class="field field-name-field-team field-type-entityreference">
   <label>Team</label>
   <div class="field-items">

     <div class="field-item even">
     <p><a href="">Name1</a></p>
     </div>

    <div class="field-item odd">
    <p><a href="">Name2</a></p>
    </div>

    <div class="field-item even">
      <p><a href="">Name3</a></p>
    </div>

   </div>
 </div>

<div class="field field-name-field-brief-text-team field-type-text">
    <div class="field-items">

    <div class="field-item even">Job1</div>
    <div class="field-item odd">Job2</div>
    <div class="field-item even">Job3</div>

</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:24:38.833

我相信这可以满足您的要求：

```
$('.field-name-field-brief-text-team .field-item').each(function (i) {
    var to = $('.field-item').eq(i)[0],
        toFirst = to.getElementsByTagName('*')[0],
        from = this,
        txt = document.createTextNode(this.textContent);
    to.insertBefore(txt,toFirst);
}).remove(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/w4xXv/)。

上面的一个稍微改变的版本，使用另一种方法从 jQuery 选择器中检索 DOM 节点（使用`get(0)`）并找到`to`节点的第一个子元素（`to.firstChild`）。这些只是替代方案，不一定比以前的方法推荐：

```
$('.field-name-field-brief-text-team .field-item').each(function (i) {
    var to = $('.field-item').eq(i).get(0),
        toFirst = to.firstChild,
        from = this,
        txt = document.createTextNode(this.textContent);
    to.insertBefore(txt,toFirst);
}).remove(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/w4xXv/1/)。

编辑以提供最快的（每个[JS Perf](http://jsperf.com/moving-text-around-with-jquery-or-dom)）方法：

```
$('.field-name-field-brief-text-team .field-item').each(function (i) {
    var to = $('.field-item')[i]
        toFirst = to.firstChild,
        txt = document.createTextNode(this.textContent);
    to.insertBefore(txt,toFirst);
}).remove(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/w4xXv/2/)。

* * *

**编辑**以将请求的（在下面的评论中）`:`添加到文本中：

```
$('.field-name-field-brief-text-team .field-item').each(function (i) {
    var to = $('.field-item')[i]
    toFirst = to.firstChild,
        txt = document.createTextNode(this.textContent + ': ');
    to.insertBefore(txt, toFirst);
}).remove(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/w4xXv/3/)。

参考：

*   jQuery：
    *   [`each()`](http://api.jquery.com/each/).
    *   [`get()`](http://api.jquery.com/get/).
    *   [`remove()`](http://api.jquery.com/remove/).
*   纯 JavaScript：
    *   [`document.createTextNode()`](https://developer.mozilla.org/en-US/docs/DOM/document.createTextNode).
    *   [`firstChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.firstChild).
    *   [`getElementsByTagName()`](https://developer.mozilla.org/en-US/docs/DOM/Element.getElementsByTagName).
    *   [`insertBefore()`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:12:28.770

用这个：

```
$(document).ready(function() {
    target = $("div.field-name-field-team").find("div.field-item");
    source = $("div.field-name-field-brief-text-team").find("div.field-item");

    for(var i = 0; i < target.length; i++) {
        $(target[i]).html($(source[i]).html() + $(target[i]).html());
    }
}); 
```

输出：

```
<div class="field field-name-field-team field-type-entityreference">
   <label>Team</label>
   <div class="field-items">

     <div class="field-item even">Job1
     <p><a href="">Name1</a></p>
     </div>

    <div class="field-item odd">Job2
    <p><a href="">Name2</a></p>
    </div>

    <div class="field-item even">Job3
      <p><a href="">Name3</a></p>
    </div>

   </div>
 </div> 
```

要全部删除`.field-name-field-brief-text-team div`，请使用

```
$("div.field-name-field-brief-text-team").remove() 
```

# java - 在提交时使用 Javascript 数组填充命令数组/列表？

> ID：14813718
> 
> 赞同：0
> 
> 时间：2013-02-11T14:10:15.763
> 
> 标签：java, javascript, jquery, spring, spring-mvc

我们在后端使用 Spring 3 MVC。

我们有一个使用 google maps api 在地图上创建点数组的页面。该数组是一个 Javascript 数组（包含 google api Marker 对象，但我们可以随时从它们获取 LatLng 和实际的 long 和 lat 值）。这实际上是题外话，重点是javascript数组。

该页面还有一个包含各种其他表单元素（名称、点描述等）的表单。

我们有一个表单支持 Command 对象，它显然具有名称、描述等变量，我们还可以为点添加一个数组/列表，或者如果更容易将 lat 和 long 分开并稍后匹配它们，则可以添加两个数组或列表通过他们的索引。

我们希望使用 javascript 来实际提交表单，但在它实际提交之前，我们希望将该 javascript 数组（或者更确切地说它的值）放入 Command 对象中。

我们应该怎么做？

我们已经看到了各种类似但不完全的问题，这些问题建议使用 JSON.stringify(pointsArray) ，但我认为这似乎不是我们想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:44:25.060

因此，如果您使用 javascript 提交表单并且在 javascript 中拥有所有坐标，那么在提交表单之前，只需将输入字段值（命令对象的属性）设置为您想要的任何格式。假设您选择了这种格式：`<input name="command.coords" value="[{lat:5, long:6}, {lat:7, long:8}]"`然后在服务器端（对于 spring），您注册一个自定义 PropertyEditor（转换器）以将您的输入格式转换为您在服务器端想要的格式（可能您会将 json 转换为 List )

它类似于 Spring 中使用的 CustomDateEditor。在 UI 中，您可能有不同格式的日期，但您注册 DateEditor 以告诉 spring 如何将 UI（字符串）格式转换为 java（日期对象）格式。

# jquery - 如何在模式中编辑记录

> ID：14813720
> 
> 赞同：-4
> 
> 时间：2013-02-11T14:10:22.397
> 
> 标签：jquery, ruby-on-rails, modal-dialog

我有一个在表格中显示记录的 rails 应用程序。我希望能够单击编辑按钮，它应该显示一个带有表单的模式来编辑记录。

单击编辑按钮时，我不知道如何实时加载对象。加载所有对象会是矫枉过正吗？

有什么技术可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:20:38.390

您可以拉出一条记录并弹出一个模式对话框进行编辑。例如，在您的控制器中定义一个编辑方法并提取一条记录 @record = Record.find(params[:record_id])。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T14:30:43.733

如果您遵循其约定，Rails 会提供编辑功能。

您可以创建自己的，也可以使用脚手架生成然后自定义。

后者很容易——

如果你有你的铁轨脚手架，比如`rails generate scaffold_controller Club name:string exclusive:boolean`

它将生成：

```
create app/controllers/clubs_controller.rb
invoke erb
create app/views/clubs
create app/views/clubs/index.html.erb
create app/views/clubs/edit.html.erb
create app/views/clubs/show.html.erb
create app/views/clubs/new.html.erb
create app/views/clubs/_form.html.erb
create app/views/layouts/clubs.html.erb
invoke test_unit
create test/functional/clubs_controller_test.rb 
```

您会看到**edit 方法**现在将在控制器中拥有，并且在**edit.html.erb中拥有相应的视图**

# c# - asp.net GridView 表不排序

> ID：14813725
> 
> 赞同：0
> 
> 时间：2013-02-11T14:10:38.043
> 
> 标签：c#, asp.net, sorting, gridview

我有以下asp网格控件：

```
 <asp:GridView ID="gwreportpub" CellPadding="5" AllowPaging="true" 
            runat="server" PageSize="15" OnPageIndexChanging="GridView1_PageIndexChanging" BackColor="White" Caption="" 
            AllowSorting="True" OnSorting="grdCause_Sorting" 
            BorderColor="MidnightBlue" 
            BorderStyle="Outset" Font-Size="Small" ForeColor="Navy" CssClass="mainBodyPosition" EnableSortingAndPagingCallbacks="True">

            <HeaderStyle BackColor="#E7E4DA" />

            <AlternatingRowStyle BackColor="#F8F6F0" />

            </asp:GridView> 
```

这是后面的c#代码，表格显示但排序不起作用，为什么？

```
 using System;
 using System.Collections;
 using System.Configuration;
 using System.Data;
 using System.Web;
 using System.Web.Security;

 public partial class ShowReportPub : System.Web.UI.Page 
 {  
    private DB_Utility dbu;
    protected double size = 1;
    private string connectionString;
    private OracleConnection connection;
    private OracleCommand processNumQuery;
    private int indexdropitem;
    private int coloreriga = 1;

    protected void Page_Load(object sender, EventArgs e)
         {

    if (!IsPostBack)
         {
        Session["CONNECTSTRING"] = Request["CONNECTSTRING"];

        if (Session["CONNECTSTRING"] == null)
        {
            Response.Redirect("sessionup.asp?type=ShowReportPub");
        }

        connectionString = Session["CONNECTSTRING"].ToString();

        if (connectionString.IndexOf("DSN=") >= 0)
        {
            Comuni.Utility util = new Utility();
            connectionString = util.ConnStr(connectionString);
            Session["CONNECTSTRING"] = connectionString;
        }
        connection = new OracleConnection(connectionString);
        connection.Open();
        dbu = new DB_Utility(Session["CONNECTSTRING"].ToString());

         }
         else
         {
        connectionString = Session["CONNECTSTRING"].ToString();
        if (connectionString.IndexOf("DSN=") >= 0)
        {
            Comuni.Utility util = new Utility();
            connectionString = util.ConnStr(connectionString);
            Session["CONNECTSTRING"] = connectionString;
        }
        connection = new OracleConnection(connectionString);
        connection.Open();
        dbu = new DB_Utility(Session["CONNECTSTRING"].ToString());
         }

    if (!IsPostBack)
    {
            //Response.Write("str :" + Request["param1"] + " - " + Request["param2"]);
            processNumQuery = new OracleCommand("select distinct nome_report from rpg_notification",connection);
            OracleDataReader reader = processNumQuery.ExecuteReader();

            while (reader.Read())
            {
                dropdownlist1.Items.Insert(0, new ListItem(reader.GetString(0), reader.GetString(0)));
            }
            reader.Close();

            //if(Request["param1"]!=""){
                //dropdownlist1.SelectedValue = Request["param1"];
            //}

    }
    if(Request["txtSchedDate"] == null)
    {

         //if(Request["param2"]!="")
            //txtSchedDate.Text = Request["param2"];
    }
    else
    {

         txtSchedDate.Text = Request["txtSchedDate"];
         gwreportpub.DataSource = getDatiFromDb();
         gwreportpub.DataBind();

    }

         }

    protected void Button1_Click(object sender, EventArgs e)
    {   
    string datarepo = "";
    if(Request["txtSchedDate"] != ""){
        DateTime schedDate = Convert.ToDateTime(Request["txtSchedDate"]);
        datarepo = schedDate.ToString("dd-MM-yyyy");
    }

    string reportname = dropdownlist1.SelectedItem.Text; 

    gwreportpub.DataSource = getDatiFromDb();
    gwreportpub.DataBind();
    gwreportpub.Visible = true;
    if (gwreportpub.Rows.Count == 0)
    {   
            tbnotif.Text = "Non vi sono report pubblicati";
            tbnotif.Visible = true;
    }
    else{
        tbnotif.Visible = true;
        tbnotif.Text = "Tabella dei Report Pubblicati: ";
    }
    return;

    }

    public DataSet getDatiFromDb()
    {
        DataSet dt;
        if(Request["txtSchedDate"] != ""){
            OracleDataAdapter adapter = new OracleDataAdapter();
            OracleCommand orclc = new OracleCommand("select relco, data_report, data_pubblicazione,anno_competenza, mese_competenza, pubblicato, md5, nome_file, path from rpg_notification where pubblicato = :flag and data_report <= TO_DATE(:repdate,'DD/MM/YYYY') and nome_report = :nome order by data_pubblicazione desc ",this.connection);
            orclc.Parameters.Add(new OracleParameter(":flag", OracleType.VarChar));
            orclc.Parameters.Add(new OracleParameter(":nome", OracleType.VarChar));
            orclc.Parameters.Add(new OracleParameter(":repdate", OracleType.VarChar));
            orclc.Parameters[":flag"].Value = "Y";
            orclc.Parameters[":nome"].Value = dropdownlist1.SelectedItem.Text;
            orclc.Parameters[":repdate"].Value = Request["txtSchedDate"].ToString();

            adapter.SelectCommand = orclc;

            dt = new DataSet("rpg_notification");   
            adapter.Fill(dt,"rpg_notification");
        }
        else{
            OracleDataAdapter adapter = new OracleDataAdapter();
            OracleCommand orclc = new OracleCommand("select relco, data_report, data_pubblicazione,anno_competenza, mese_competenza, pubblicato, md5, nome_file, path from rpg_notification where pubblicato = :flag and nome_report = :nome order by data_pubblicazione desc ",this.connection);
            orclc.Parameters.Add(new OracleParameter(":flag", OracleType.VarChar));
            orclc.Parameters.Add(new OracleParameter(":nome", OracleType.VarChar));
            orclc.Parameters[":flag"].Value = "E";
            orclc.Parameters[":nome"].Value = dropdownlist1.SelectedItem.Text;

            adapter.SelectCommand = orclc;

            dt = new DataSet("rpg_notification");   
            adapter.Fill(dt,"rpg_notification");
        }
        return dt;
    }
     protected void GridView1_PageIndexChanging(object sender,
     GridViewPageEventArgs e)
     {
         gwreportpub.PageIndex = e.NewPageIndex;
         gwreportpub.DataBind();
     }

 protected void grdCause_Sorting(object sender, GridViewSortEventArgs e)
{
    string sortExpression = e.SortExpression;

    if (GridViewSortDirection == SortDirection.Ascending)
    {
        GridViewSortDirection = SortDirection.Descending;
        SortGridView(sortExpression, DESCENDING);
    }
    else
    {
        GridViewSortDirection = SortDirection.Ascending;
        SortGridView(sortExpression, ASCENDING);
    }

}
private void SortGridView(string sortExpression, string direction)
{
    //  You can cache the DataTable for improving performance
    gwreportpub.DataSource = getDatiFromDb().Tables[0];
    gwreportpub.DataBind();
    DataTable dt = gwreportpub.DataSource as DataTable;
    DataView dv = new DataView(dt);
    dv.Sort = sortExpression + direction;

    gwreportpub.DataSource = dv;
    gwreportpub.DataBind();

}
private const string ASCENDING = " ASC";
private const string DESCENDING = " DESC";

public SortDirection GridViewSortDirection
{
    get
    {
        if (ViewState["sortDirection"] == null)
            ViewState["sortDirection"] = SortDirection.Ascending;

        return (SortDirection)ViewState["sortDirection"];
    }
    set { ViewState["sortDirection"] = value;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:00:05.737

好的，答案是这样的：

我不得不以这种方式更改控件：

```
 <asp:GridView ID="gwreportpub" CellPadding="5" AllowPaging="true" OnRowDataBound="gvdetails_RowDataBound" 
            runat="server" PageSize="15" OnPageIndexChanging="GridView1_PageIndexChanging" BackColor="White" Caption="" 
            AllowSorting="True" OnSorting="SortRecords" 
            BorderColor="MidnightBlue" autogeneratecolumns = "False"
            BorderStyle="Outset" Font-Size="Small" ForeColor="Navy" CssClass="mainBodyPosition" EnableSortingAndPagingCallbacks="False">

            <HeaderStyle BackColor="#E7E4DA" />

            <AlternatingRowStyle BackColor="#F8F6F0" />
            <columns>
                <asp:boundfield datafield="societa_di_vendita" headertext="Societa di vendita"  sortexpression="societa_di_vendita" />
                <asp:boundfield datafield="data_report" headertext="Data report" sortexpression="data_report" />
                <asp:boundfield datafield="data_pubblicazione" headertext="Data di pubblicazione" sortexpression="data_pubblicazione" />
                <asp:boundfield datafield="anno_competenza" headertext="Anno di competenza" sortexpression="anno_competenza" />
                <asp:boundfield datafield="mese_competenza" headertext="Mese di competenza" sortexpression="mese_competenza" />
                <asp:boundfield datafield="pubblicato" headertext="Pubblicato" sortexpression="pubblicato" />
                <asp:boundfield datafield="err_pubblicazione" headertext="Errore di pubblicazione" sortexpression="err_pubblicazione" />
                <asp:boundfield datafield="md5" headertext="Md5" sortexpression="md5" />
                <asp:boundfield datafield="nome_file" headertext="Nome del file" sortexpression="nome_file" />
                <asp:boundfield datafield="path" headertext="Percorso" sortexpression="Percorso" />
           </columns>
            </asp:GridView> 
```

注意 autogeneratecolumns = "False" 和列，排序名称

在此之后我使用了这两个功能：

```
 public SortDirection SortDirection
{
get
{
    if (ViewState["SortDirection"] == null)
    {
        ViewState["SortDirection"] = SortDirection.Ascending;
    }
    return (SortDirection)ViewState["SortDirection"];
}
set
{
   ViewState["SortDirection"] = value;
}
}   

protected void SortRecords(object sender, GridViewSortEventArgs e)
{
  sortexpr = e.SortExpression;
  string direction = string.Empty;

  if (SortDirection == SortDirection.Ascending)
  {
      SortDirection = SortDirection.Descending;
      direction = " DESC";
  }
  else
  {
     SortDirection = SortDirection.Ascending;
     direction = " ASC";
  }
  //Response.Write("" + sortexpr +  " -.- " + direction);
  DataTable table = this.getDatiFromDb().Tables[0];
  table.DefaultView.Sort = sortexpr + direction;
  gwreportpub.DataSource = table;
  gwreportpub.DataBind();

} 
```

现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:34:10.763

试试这个：

```
 protected void grdCause_Sorting(object sender, GridViewSortEventArgs e)
{
    string sortExpression = e.SortExpression;

    if (GridViewSortDirection == SortDirection.Ascending)
    {
        GridViewSortDirection = SortDirection.Descending;
        ViewState["sortExpr"] = sortExpression + DESCENDING;
    }
    else
    {
        GridViewSortDirection = SortDirection.Ascending;
        ViewState["sortExpr"] = sortExpression  + ASCENDING;
    }

    SortGridView();
} 
```

和

```
private void SortGridView()
{
    //  You can cache the DataTable for improving performance
    gwreportpub.DataSource = getDatiFromDb().Tables[0];
    gwreportpub.DataBind();
    if(ViewState["sortExpr"] != null){
      DataTable dt = gwreportpub.DataSource as DataTable;
      DataView dv = new DataView(dt);
      dv.Sort = (string)ViewState["sortExpr"];
    gwreportpub.DataSource = dv;
    gwreportpub.DataBind();
    }

} 
```

# android - Android 没有 JSONObject 的值

> ID：14813728
> 
> 赞同：0
> 
> 时间：2013-02-11T14:10:44.013
> 
> 标签：android, json

```
String wat = "";

        try{
                JSONObject responsee = new JSONObject(result);
                wat = responsee.getString("Result");
            }
            catch(JSONException e){
                    Log.e("log_tag", "Error parsing data "+e.toString());
            } 
```

结果 = {“结果”：“D”}

此代码使应用程序崩溃并引发以下错误：

`Error parsing data org.json.JSONException: No value for {"Result":"D"}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:12:48.753

`responsee`本身就是您需要的 json 对象。你不需要调用`getJSONObject`它。只需使用`responsee.getString("Result");`. 这是您可能需要使用的示例`getJsonObject`：

```
// result = {"name": "John", "age": 10, "father": {"name": "Tom", "age": 30"}}

JSONObject response = new JSONObject(result);
JSONObject father = response.getJSONObject("father");
String fathersName = father.getString("name"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T14:24:36.140

尝试这个：

```
JSon Response like  below
 {"data": { "name": "AAA", "Age": "11"}} 
```

您将使用该代码获取以下数据，

```
 JSONObject response = new JSONObject(result);
  JSONObject json= response.getJSONObject("data");
  String Name = json.getString("name");
  String Age =json.getString("Age"); 
```

响应是：AAA 和 11

# php - 转换mysql结果数组

> ID：14813730
> 
> 赞同：0
> 
> 时间：2013-02-11T14:10:48.833
> 
> 标签：php, arrays

我有

```
$query = "SELECT
PrivilageName,
PrivilageExp,
'true' hakkivarmi
FROM users
natural join usermemberships
natural join groupprivileges
natural join `privileges`
where UserID = '2' ";

$result = mysqli_query($link, $query);

$rows = Array();
while($row = mysqli_fetch_assoc($result)) {
    array_push($rows, $row);
}

print_r($rows);exit; 
```

它打印出来

```
Array
(
    [0] => Array
        (
            [PrivilageName] => AddBuilding
            [PrivilageExp] => Bina Ekleme
            [hakkivarmi] => true
        )

    [1] => Array
        (
            [PrivilageName] => RemoveBuilding
            [PrivilageExp] => Bina Silme
            [hakkivarmi] => true
        )

    [2] => Array
        (
            [PrivilageName] => EditBuilding
            [PrivilageExp] => Bina Düzenleme
            [hakkivarmi] => true
        )

) 
```

而我想要的是

```
Array
(
 AddBuilding => true
 RemoveBuilding => true
 EditBuilding => true
) 
```

我尝试了很多不同的事情，但没有成功。我会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:13:28.153

```
$permissions = array();

while($row = mysqli_fetch_assoc($result)) {
    $permissions[$row['PrivilageName']] = true; // You can use $row['hakkivarmi'] but it looks like it's always true based on your code
}

var_dump($permissions); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:13:55.307

```
foreach($rows as $key => $value){
    $f[$value['PrivilageName']] = $value['hakkivarmi']
}

var_dump($f); 
```

# android - 从 sencha 1 迁移到 sencha 2，在带有 phonegap 的 eclipse 中

> ID：14813732
> 
> 赞同：2
> 
> 时间：2013-02-11T14:10:59.917
> 
> 标签：android, cordova, sencha-touch, sencha-touch-2

我目前正在阅读《Beginning PhoneGap》一书中的教程。我刚刚完成了煎茶触摸教程。[我试图按照http://www.sencha.com/learn/upgrading-to-sencha-touch-2-pr2](http://www.sencha.com/learn/upgrading-to-sencha-touch-2-pr2)将本教程中的煎茶从煎茶 1 迁移到 2，但我什么也没得到。下面是我尝试迁移的第一个面板，但我得到的只是一个白屏，任何帮助将不胜感激。

```
Ext.setup({
tabletStartupScreen: 'tablet_startup.png',
phoneStartupScreen: 'phone_startup.png',
icon: 'icon.png',
glossOnIcon: false,

onReady: function(){ 
    var lastPanelId = 0;
    var SEARCHPAGE=0;
    var TABPAGE=1;
    var FAVPAGE=2;
    var DETAILSPAGE=3;
    var cachedDetails=null;

        Ext.define(' var searchPanel', {
extend: 'Ext.form.FormPanel',

         config: {
        layout: 'fit',
        fullscreen: true,
        scroll: 'vertical',
        standardSubmit: false,
         },

          items: [{
            xtype: 'fieldset',
            title: 'Local Search',
            items: [{
                xtype: 'textfield',
                name: 'search',
                label: 'Search',
                value: 'Pizza',
                useClearIcon: true,
                autoCapitalize: false
            }, {
                xtype: 'sliderfield',
                name: 'range',
                label: 'Range (0-10 Kms)',
                value: 5,
                minValue: 0,
                maxValue: 10
            }]
        }]            //Docking a toolbar at bottom         
        ,
        dockedItems: [{
            xtype: 'toolbar',
            dock: 'bottom',
            items: [{
                xtype: 'spacer'
            }, {
                text: 'Search',
                iconCls: 'search',
                title: 'Search',
                iconMask: true,
                ui: 'round',
                ui: 'confirm',

                handler: function(){
                    lastPanelId=TABPAGE;
                    fetchFromGoogle();
                    mainPanel.dockedItems.items[0].setTitle('Search Results');
                    mainPanel.setActiveItem(lastPanelId);
                }
            }]
        }]
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T05:51:28.537

我遇到了类似的问题...您是否将更新后的 app.css 文件转移到 eclipse 中？如果不是，那很可能是问题所在。

如果没有，Sencha 代码是否正在运行（通过在整个代码中插入一些警报来确定）？

# c# - WP - XAML 在矩形上覆盖网格

> ID：14813734
> 
> 赞同：0
> 
> 时间：2013-02-11T14:11:03.113
> 
> 标签：c#, windows-phone-7, xaml

我的`<Rectangle />`Windows 手机应用程序视图中有一个显示相机源的视图，我正在尝试找出`XAML`代码以在源上放置部分透明的图像。

我有工作代码：

```
<Grid x:Name="LayoutRoot">

        <Rectangle x:Name="_previewRect" 
                   Margin="0" 
                   Height="800" 
                   Width="600" 
                   HorizontalAlignment="Center" 
                   VerticalAlignment="Center"
                   Tap="OnTapDown">

            <Rectangle.Fill>
                <VideoBrush x:Name="_previewVideo">
                    <VideoBrush.RelativeTransform>
                        <CompositeTransform  
                            x:Name="_previewTransform" CenterX=".5" CenterY=".5" />
                    </VideoBrush.RelativeTransform>
                </VideoBrush>
            </Rectangle.Fill>

       </Rectangle>

    </Grid> 
```

它完美地显示了我的相机信息（当然，大部分代码都在代码隐藏中）。

但现在我想添加一个图像作为叠加层。我尝试添加：

```
<Grid.Background>
    <ImageBrush ImageSource="Images/Background/BackgroundBlurred.png" Stretch="UniformToFill" />
</Grid.Background> 
```

元素上方和下方`<Rectangle />`，但没有这样的运气。

有谁知道我该怎么做？这似乎并不难，但我才刚刚开始学习`XAML`。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:17:37.047

如果您希望图像覆盖在视频源矩形上，您必须使其成为“layoutRoot”网格中的单独控件。只需将其直接放在矩形的顶部并为其赋予更高的[Canvas.ZIndex](http://msdn.microsoft.com/en-us/library/bb980110%28v=vs.95%29.aspx)值：

```
<Grid x:Name="LayoutRoot">
    <Rectangle x:Name="_previewRect" 
               Margin="0" 
               Height="800" 
               Width="600" 
               HorizontalAlignment="Center" 
               VerticalAlignment="Center"
               Tap="OnTapDown"
               Canvas.ZIndex="1">
        <Rectangle.Fill>
            <VideoBrush x:Name="_previewVideo">
                <VideoBrush.RelativeTransform>
                    <CompositeTransform  
                        x:Name="_previewTransform" CenterX=".5" CenterY=".5" />
                </VideoBrush.RelativeTransform>
            </VideoBrush>
        </Rectangle.Fill>
    </Rectangle>

    <Image x:Name="myOverlayImage" Canvas.ZIndex="2">
        <!-- Your overlay is now a sibling of the video-feed Rectangle, but drawn on top of it -->
    </Image>
</Grid> 
```

# gtk - 如何在 GTK+ 的顶层窗口中创建可拖动和可调整大小的子窗口？

> ID：14813735
> 
> 赞同：0
> 
> 时间：2013-02-11T14:11:02.837
> 
> 标签：gtk, pygtk, gnome

我的问题似乎很简单，但我未能在互联网上找到答案：

![在此处输入图像描述](../Images/0ea8e93243b9782e26509105462953da.png)

图片取自Eclipse，是在Linux上用GTK+实现的，所以理论上应该是可以的，但是不知道怎么样。可能不是通过将 gtk.Window 类型设置为 gtk.WINDOW_TOPLEVEL 或 gtk.WINDOW_POPUP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:13:20.657

尽管我不知道他的回答中提出的功能 unwind ，但不确定这是否可以通过默认值实现。但是 AFAIK、GNOME IDE、[Anjuta](http://www.anjuta.org/)使用一些自定义小部件来处理停靠窗口。你可能想看看[Anjuta 的源代码](http://git.gnome.org/browse/anjuta)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:30:10.827

您可以通过将它们嵌入[GtkScrolledWindow](http://developer.gnome.org/gtk3/stable/GtkScrolledWindow.html)来创建滚动小部件。您可以通过将其嵌入[GtkHPaned](http://developer.gnome.org/gtk3/stable/GtkHPaned.html)和[GtkVPaned](http://developer.gnome.org/gtk3/stable/GtkVPaned.html)小部件中来创建可调整大小的滚动小部件。

# http - 查询字符串值的 http 结尾

> ID：14813736
> 
> 赞同：0
> 
> 时间：2013-02-11T14:11:02.780
> 
> 标签：http, encoding

我必须在 Java 的 http 请求中编码查询字符串值。例如：

[http://mysite.com/service?name=James](http://mysite.com/service?name=James) Smith&address=我的街道

必须变成：

[http://mysite.com/service?name=James%20Smith&address=my%20street](http://mysite.com/service?name=James%20Smith&address=my%20street)

我必须在输入中有查询字符串值的方法中执行此操作，因此我必须只对值进行编码（詹姆斯史密斯，我的街道，ecc。）。我正在考虑使用这种方法 org.apache.commons.httpclient.util.URIUtil.encodeWithinQuery：是这样吗？我见过很多关于编码 http 请求的令人困惑的讨论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:37:00.357

您可以使用 URLEncode URL

```
yourNewURL = java.net.URLEncoder.encode(oldurl.toString(), "ISO-8859-1").replace("+", "%20")); 
```

查看此讨论以获取更多解释：

[URLEncoder 无法翻译空格字符](https://stackoverflow.com/questions/4737841/urlencoder-not-able-to-translate-space-character)

# android - 设置按钮永久启用

> ID：14813738
> 
> 赞同：0
> 
> 时间：2013-02-11T14:11:12.370
> 
> 标签：android

我有一个名为 stage1 到 stage10 的不同按钮列表。那么 stage1 按钮是唯一启用的按钮，其余按钮被禁用。用户完成stage1内的所有问题后，将解锁stage2。如何永久设置启用按钮，以便每次用户退出应用程序并重新打开它时，设置启用的按钮仍应启用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:14:33.293

您可以在 SharedPreferences 中存储有关启用了哪些按钮的信息。回来后，您检查上次启用了哪些按钮并以编程方式启用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:59:25.807

首先，您创建一个共享首选项类：

```
 public class AppPreferences {
      private static final String APP_SHARED_PREFS = "com.aydabtu.BroadcastSMS_preferences"; //  Name of the file -.xml
         private SharedPreferences appSharedPrefs;
         private Editor prefsEditor;

         public AppPreferences(Context context)
         {
             this.appSharedPrefs = context.getSharedPreferences(APP_SHARED_PREFS, Activity.MODE_PRIVATE);
             this.prefsEditor = appSharedPrefs.edit();
         }

         public boolean getOnOrOff() {
             return appSharedPrefs.getBoolean("get_on_or_off", false);

         }

         public void setOnOrOFF(Boolean text) {
             prefsEditor.putBoolean("get_on_or_off", text);
             prefsEditor.commit();
         } 
```

然后从您的主要活动：

```
appPrefs = new AppPreferences(getApplicationContext());

Button buttonOff = (Button)findViewById(R.id.B_off);
//to get preferences and set button
buttonOff.setEnabled(appPrefs.getOnOrOff());
//to set preferences
appPrefs.setOnOrOff(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:55:15.620

根据您的需求，有不同的持久性存储解决方案。您可以检查[Android Storage Options](http://developer.android.com/guide/topics/data/data-storage.html#pref)中的选项。示例包括在那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T14:17:37.110

使用某种存储，以保存用户是否已经解锁了舞台。它可以通过以下方式完成：

*   共享首选项
*   数据库
*   文件

完成后，您可以检查每个按钮的“标志”，并在页面加载时进行相应设置。

# c#-4.0 - 如何使用反射设置属性值？

> ID：14813743
> 
> 赞同：1
> 
> 时间：2013-02-11T14:11:25.917
> 
> 标签：c#-4.0, asp.net-mvc-4, generic-programming, system.reflection

我尝试构建一个通用方法，它使用反射获取类和设置值并返回一个类类型。

```
protected static T GetSecureModel<T>(T model)
        {
            T secureModel = default(T);

            foreach (var property in model.GetType().GetProperties())
            {

                    if (string.CompareOrdinal(property.PropertyType.FullName, "System.String") == 0)
                    {
                        property.SetValue(property.Name, property.GetValue(model, null).ToString(), null);
                    }
             }

              return secureModel;
} 
```

设置值后如何返回一个类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:40:13.257

好的。我解决它。检查下面的代码，它可能对某人有帮助。

```
 protected static T GetSecureModel<T>(T model)
        {
            bool secureData = false;

            T secureModel = default(T);

            foreach (var property in model.GetType().GetProperties())
            {
                if (property.GetValue(model, null) != null && property.GetValue(model, null).ToString() != _blankGuid && property.GetValue(model, null).ToString() != _zero)
                {
                    if (string.CompareOrdinal(property.PropertyType.FullName, _uniqueIdentifier) == 0)
                    {
                        model.GetType().GetProperty(property.Name).SetValue(model, new Guid(Sanitizer.GetSafeHtmlFragment(property.GetValue(model, null).ToString())), null);
                    }
                    else if (string.CompareOrdinal(property.PropertyType.FullName, _numeric) == 0)
                    {
                        model.GetType().GetProperty(property.Name).SetValue(model, int.Parse(Sanitizer.GetSafeHtmlFragment(property.GetValue(model, null).ToString())), null);
                    }
                    else if (string.CompareOrdinal(property.PropertyType.FullName, _string) == 0)
                    {
                        model.GetType().GetProperty(property.Name).SetValue(model, Sanitizer.GetSafeHtmlFragment(property.GetValue(model, null).ToString()), null);
                    }

                    secureData = true;
                }

            }

            if (secureData)
            {
                secureModel = model;
            }

            return secureModel;
        } 
```

# jquery - HTML 复选框元素未将值传递给 jQuery 和 AJAX 字符串

> ID：14813748
> 
> 赞同：0
> 
> 时间：2013-02-11T14:11:35.970
> 
> 标签：jquery, mysql, ajax, jquery-ui, checkbox

我有一个带有几个复选框的简单 HTML 表单。我的目标是将此数据（复选框的值）传递给一个 jQuery 函数，并将这些值输入到一个字符串中，该字符串将通过 Ajax 传递给一个 php 脚本。这是我的html：

```
 <table class="ui-widget-content" border="0" style="width: 100%;">
            <tr>
                <td width="252px;">PVC's Required</td>
                <td align="left">
                        <input type="checkbox" id="pvc" name="pvc" value="abc" />abc<br />
                        <input type="checkbox" id="pvc" name="pvc" value="def" />def<br />
                        <input type="checkbox" id="pvc" name="pvc" value="ghi" />ghi<br />                            
                        <input type="checkbox" id="pvc" name="pvc" value="jkl" />jkl<br />
                        <input type="checkbox" id="pvc" name="pvc" value="NONE" />NONE<br />
                </td>           
            </tr>
</table> 
```

jQuery：

```
$("#addTechDetails")
                    .button()
                    .click(function(){

                        var pvc = $("#input[ type= 'checkbox']");
                        var pvcData = [];
                        pvc.filter(':checked').each(function(){
                            pvcData.push($(this).val());
                        })
                        pvc=pvcData.join(',');

                        //initial info required to process form
                        var newOrExisting = $("#newOrExisting").val();      
                        var numCircuits = $("#numCircuits").val();          

                            var str = "newOrExisting="+newOrExisting+"&numCircuits="+numCircuits+"&pvc="+pvc;

                                     //ajax request
                            $.ajax({
                                type : "POST",
                                cache : false,
                                url : "ajax/addTechDetails.php",
                                data : str,
                                complete : function(xhr, result){
                                    if (result != "success") return;
                                    var response = xhr.responseText;                                    
                                    $("#result").html(response);
                                }
                            })
            }); 
```

即使选中了某些选项，上面的输出也如下所示：'','','','',

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:14:16.070

您不应该在输入选择器的开头使用 # 。那是一个 id 选择器。你应该只有 input[type='checkbox']

..如上所述，复选框不能具有相同的ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:30:48.607

您的复选框需要唯一的 ID：

```
<input type="checkbox" id="pvc1" name="pvc" value="abc" />
<input type="checkbox" id="pvc2" name="pvc" value="def" />
... 
```

此外，此行`var pvc = $("#input[ type= 'checkbox']");`不应包含前导`#`，因为这用于通过 Id 进行标识（并且`input`不是 Id）。

您可以使用以下方法之一：

*   `$('input[type="checkbox"]:checked').each()`迭代所有选中的元素
*   `$('input[name="pvc"]:checked').each()`按名称迭代所有复选框
*   `$('#pvc'+indexOfiteration).val()`直接从Id获取值

文档中有更多选项。

# php - PHP 和 MySQL 中的分层消息/回复

> ID：14813749
> 
> 赞同：0
> 
> 时间：2013-02-11T14:11:34.963
> 
> 标签：php, mysql

我正在构建一个消息/回复应用程序。这个想法是显示一条消息，并且任何回复都直接显示在它下方的隐藏 div 中，并带有文本“显示来自...的消息”。

我对布局本身没有任何问题并且可以正常工作，但我不确定的是如何返回一条带有多个回复的消息。下面的 SQL 查询是我迄今为止的查询，但这将返回所有回复，但也会重复每个回复的主要消息。

我的问题是，我怎样才能一次返回主要消息，以及所有相关的回复？

```
SELECT u.userid, u.first, u.last, c.title, c.body, c.messid, 
   c.adddate, ru.first, ru.last, cr.body, cr.messreplyid 
FROM chat c INNER JOIN users u on u.userid = c.userid 
 LEFT JOIN chat_reply cr on cr.messid = c.messid 
 LEFT JOIN users ru on ru.userid = cr.userid 
WHERE c.messid =".$_GET['messid']." 
GROUP BY cr.messreplyid"

u.userid = the original posters primary key
u.first + u.last = the original posters name
c.title = the title of the post
c.body = the message body
c.messid = the message primary key
c.adddate = message timestamp
ru.first + ru.last = the name of the person who replied
cr.body = the the reply message body
cr.messreplyid = the reply primary key 
```

正如我所说，我似乎得到了两个结果，一个将显示一条消息和一个回复（如果我不使用 group by）或所有回复但重复该消息。我确信这可以通过复杂的查询来完成，例如选择中的选择，但如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:36:37.220

子帖子需要使用除主键之外的其他内容来引用其父帖子。您在 JOIN 中所做的操作将不起作用，因为主键总是不同的。

例如，如果`messreplyid`孩子的 包含`messid`父母的，你可以做`LEFT JOIN chat_reply cr on cr.messreplyid = c.messid`

不要分组，否则你只会得到一个回复​​。

拜托，看在上帝的份上，`$_GET`在组合 SQL 语句时不要使用未经处理的变量！您将对 SQL 注入敞开心扉！

# segmentation-fault - 分段错误 - fortran 90 - 对分子例程

> ID：14813750
> 
> 赞同：0
> 
> 时间：2013-02-11T14:11:40.007
> 
> 标签：segmentation-fault, fortran90, bisection

```
program bisect
real(8) ::  output
call bisection(3.d0,4.d0,2.d0,output)
print*, output
end program bisect

subroutine bisection(a,b,error,result)
real(8):: a,b,error,c,result
logical:: proceed
  proceed = .true.
  do while (proceed)
  if (sin(a)*sin(b).lt. 0.d0) then
     c=(a+b)/2
     if (sin(a)*sin(c).lt.0.d0) then
        b=c
     else
        a=c
     end if
  else  
     stop 'cannot be bisected'
  end if 

  if (abs(a-b).lt. error) then
     proceed = .false.
  end if
 end do
 result= a
end subroutine bisection 
```

[此处](http://ideone.com/KkLg8W)上传了相同代码的版本。

这是我能想到的最小例子。这会在使用 gfortran 以及在网站上运行可执行文件时产生分段错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:51:58.997

虚拟参数 a 和 b 与作为常量的实际参数相关联。常量是不可定义的——你的程序试图改变“3.0d0”或“4.0d0”的值。如果你的程序成功了，那么整个宇宙就会爆发混乱。

我强烈推荐：

*   使用模块过程。这允许编译器检查实际参数是否与虚拟参数一致。
*   在您的虚拟参数定义上使用 INTENT 规范。这允许编译器检查需要修改的东西是否是可修改的，以及不可修改的东西是否不是。

解决问题的方法是在主程序中使用适当的变量来保存初始值 3.0d0 和 4.0d0，并将这些可修改的变量传递给子程序。或者，您可以在子例程中创建虚拟参数的临时副本。在 F2003 中，VALUE 属性可用于自动执行此操作。

当我们这样做时 - 在所有范围内使用 IMPLICIT NONE。总是。

# web-services - 安全异常 - mscorlib，使用 CLSID 检索 COM 类组件失败

> ID：14813751
> 
> 赞同：1
> 
> 时间：2013-02-11T14:11:41.580
> 
> 标签：web-services, security, exception, mscorlib

我在初始化应用程序的这个阶段遇到了麻烦。

```
public static void Initialise()
    {
        Application.ThreadException += new System.Threading.ThreadExceptionEventHandler(Application_ThreadException); //throwing exception here
        Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);
        AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
    } 
```

我有网络配置在哪里

```
<trust level="full"/> 
```

消息是：

```
Request for the permission of type 'System.Security.Permissions.SecurityPermission, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed. 
```

堆栈跟踪如下：

```
at System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark& stackMark, Boolean isPermSet)
at System.Security.CodeAccessSecurityEngine.Check(CodeAccessPermission cap, StackCrawlMark& stackMark)
at System.Security.CodeAccessPermission.Demand()
at System.Windows.Forms.Application.add_ThreadException(ThreadExceptionEventHandler value)
at Chronos.Shared.ErrorHandler.Initialise()
at Chronos.TeamLeader.Program.Main()
at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
at System.AppDomain.nExecuteAssembly(RuntimeAssembly assembly, String[] args)
at System.Runtime.Hosting.ManifestRunner.Run(Boolean checkAptModel)
at System.Runtime.Hosting.ManifestRunner.ExecuteAsAssembly()
at System.Runtime.Hosting.ApplicationActivator.CreateInstance(ActivationContext activationContext, String[] activationCustomData)
at System.Runtime.Hosting.ApplicationActivator.CreateInstance(ActivationContext activationContext)
at System.Activator.CreateInstance(ActivationContext activationContext)
at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssemblyDebugInZone()
at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading.ThreadHelper.ThreadStart() 
```

让我知道是否有人需要有关它的更多信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:07:05.583

我在通过这个*安全异常*时遇到了很多困难。阅读大量博客，参与讨论，但没有任何结果。

最后在 msdn 中找到了“**启用 ClickOnce 安全设置”。**我只是按照这些步骤并禁用了项目属性中的安全设置。

这是一个链接，希望对您有所帮助：http: [//msdn.microsoft.com/en-us/library/1sfbfyk0.aspx](http://msdn.microsoft.com/en-us/library/1sfbfyk0.aspx)

# php - 如何使 Linux 服务器 url 不区分大小写？

> ID：14813755
> 
> 赞同：-1
> 
> 时间：2013-02-11T14:12:09.210
> 
> 标签：php, linux

我正在开发一个部署在**linux 服务器上的****网站**。我对此有一些小的改动。我有文件夹***读取***。要求是，如果我输入 url **localhost:80/tom/Read**或 .. **/READ**或**/read**它需要导航到**read.php**内的读取文件夹。我从2天开始挣扎。请尽可能做必要的事情。

 *******谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:20:16.620

你可以为小写的东西写一个 htaccess

[http://www.chrisabernethy.com/force-lower-case-urls-with-mod_rewrite/](http://www.chrisabernethy.com/force-lower-case-urls-with-mod_rewrite/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:15:23.767

您可以将 Document Root 指向安装不区分大小写的文件系统（例如 FAT32）的路径，或者使用类似于[mod_spelling](http://httpd.apache.org/docs/2.2/mod/mod_speling.html)的内容。*******

# php - 是否可以在 zend 框架中使用 mysql 函数（不是内置的）？

> ID：14813758
> 
> 赞同：0
> 
> 时间：2013-02-11T14:12:19.930
> 
> 标签：php, mysql, zend-framework

我需要在 php zend 框架中使用 mysql 函数

场景如下：

有一个在 zend 框架中实现的连接查询。我需要从

一个mysql函数。例如，下面是一个mysql函数

```
CREATE FUNCTION `junk`.`MakeDateList`
    -> (
    ->   BeginDate DATE,
    ->   EndDate DATE,
    ->   InclusionList VARCHAR(20)
    -> )
    -> RETURNS VARCHAR(4096)
    -> DETERMINISTIC
    -> BEGIN
    ->   DECLARE RunningDate DATE;
    ->   DECLARE rv VARCHAR(4096);
    ->   DECLARE comma CHAR(1);
    ->   DECLARE IncList,DOWValue VARCHAR(20);
    ->   DECLARE OK_To_Add INT;
    ->
    ->   SET IncList = CONCAT(',',InclusionList,',');
    ->   SET comma = '';
    ->   SET rv = '';
    ->   SET RunningDate = BeginDate;
    ->   WHILE RunningDate <= EndDate DO
    ->     SET OK_To_Add = 0;
    ->     SET DOWValue = CONCAT(',',DAYOFWEEK(RunningDate),',');
    ->     IF LOCATE(DOWValue,IncList) > 0 THEN
    ->       SET OK_To_Add = 1;
    ->     END IF;
    ->     IF OK_To_Add = 1 THEN
    ->       SET rv = CONCAT(rv,comma,RunningDate);
    ->       SET comma = ',';
    ->     END IF;
    ->     SET RunningDate = RunningDate + INTERVAL 1 DAY;
    ->   END WHILE;
    ->   RETURN rv;
    -> END $$ 
```

我需要在我的 zend 框架的 join 函数中使用它，以便所需的输出应该

在新列中可用

有没有什么办法或者方法

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:19:41.383

你试过了吗？

```
Zend_Db::factory('Pdo_Mysql', array(
    'host'             => '127.0.0.1',
    'username'         => 'webuser',
    'password'         => 'xxxxxxxx',
    'dbname'           => 'test',
    'adapterNamespace' => 'MyProject_Db_Adapter'
))->query('CALL MY_PROCEDURE(?, ?, ?)', array($beginDate, $endDate, $inclusionList))
->fetchAll(); 
```

# clojure - 如何在不退出 REPL 的情况下停止 Clojure 中的函数执行？

> ID：14813764
> 
> 赞同：11
> 
> 时间：2013-02-11T14:12:48.053
> 
> 标签：clojure, read-eval-print-loop

Clojure REPL 是否可以在不终止 REPL 会话的情况下停止函数的执行？我怎样才能做到这一点？

`lein repl`如果重要的话，我在 bash 中使用。我正在使用莱宁根 1.7.1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T15:10:38.343

你试过了`Ctrl-C`吗？它应该适用于您的情况。

**更新。**我已经降级到 Leiningen 版本 1.7.1。它真的通过 Ctrl-C 退出 repl。你应该像 Bozhidar Batsov 所说的那样升级 lein。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T19:44:34.500

对于稍后提出此问题的 emacs 用户：

在 Emacs + nrepl + lein2 中：点击`ctrl c` `ctrl b`返回你的 repl

# amazon-s3 - 如何使用 Dasein API 连接到 AWS S3？

> ID：14813771
> 
> 赞同：0
> 
> 时间：2013-02-11T14:13:17.227
> 
> 标签：amazon-s3

有人使用 Dasein API 来连接 AWS S3 吗？

我正在寻找如何使用 API 的示例，但我找不到任何东西。

# jquery - 元素滚动到固定位置，然后再次滚动出固定位置，具有动态内容

> ID：14813772
> 
> 赞同：1
> 
> 时间：2013-02-11T14:13:17.833
> 
> 标签：jquery, scroll, css-position

我正在尝试重新创建类似于artsy.net首页的效果

他们在垂直滚动布局中有一系列博客风格的帖子；但它的特别之处在于，博客文章中的元数据和文本内容一旦到达屏幕顶部就会滚动到固定位置，而来自文章的不同图像内容会继续滚动。一旦到达图像内容的底部，固定位置内容“滚动出”固定位置，并且下一篇博文向上滚动。这一切都非常无缝，感觉非常自然。

我已经尝试过使用导航菜单固定位置的类似效果（使用在这个问题中找到的解决方案：[在某个点停止固定位置滚动？](https://stackoverflow.com/questions/5902822/stopping-fixed-position-scrolling-at-a-certain-point)）但是我现在正在寻找的解决方案有什么不同，效果需要能够处理动态内容，即由不精通网络的贡献者使用 wordpress 生成的内容。

非常感谢您提前提供的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:14:09.980

我自己找到了解决方案！我发现这个名为 Stickem 的插件非常有用且非常容易实现：[https ://github.com/davist11/jQuery-Stickem](https://github.com/davist11/jQuery-Stickem)

因此，对于其他寻找答案的人，这是您的帮助:)

# git - 在 Git 中永远忽略文件夹

> ID：14813775
> 
> 赞同：0
> 
> 时间：2013-02-11T14:13:22.570
> 
> 标签：git

当我做一个 git status 这就是我得到的

```
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   .idea/ 
```

这个**.idea/ 文件夹**来自 IntelliJ 和 RubyMine，但我不希望它被添加到我的 Git 中。当我说`git add .` 我仍然希望能够做到这一点但不包括 .ida/ 文件夹时。

实现这一目标的正确 git 命令是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:15:18.533

放

```
.idea 
```

以及您想在存储库中调用的文件中忽略的任何其他路径`.gitignore`（并使用 Git 跟踪）。详情请参阅[`gitignore(5)`](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T14:15:36.710

`.gitconfig`添加或`.git/info/exclude`添加以下内容：

```
.idea/ 
```

前者可以提交并成为存储库的一部分。后者更适合不应影响其他用户的按用户设置。

# php - 将带有图像文件的 multipart/form-data 从 Actionscript 发送到 PHP

> ID：14813777
> 
> 赞同：2
> 
> 时间：2013-02-11T14:13:26.757
> 
> 标签：php, image, actionscript-3, post, multipartform-data

关于将图像从 Actionscript 发送到 PHP 的 SO 有很多问题`ByteArray`，但是，似乎没有一个问题适合我的具体问题。

我想从我的 flash 应用程序中发送一个包含一些文本字段和几个图像的发布请求。

发送一张图片我通过`ByteArray`直接发送一张图片作为`URLRequest`'s开始工作`.data`，但是当我想添加更多图片时，这种方法不再起作用。我弄清楚了如何使用文本字段构建和发布一个`multipart/form-data`，还发现了如何标记图像数据，以便它们可以在 PHP 的`$_FILES`数组中使用。

但是使用这种方法，我无法`ByteArray`正确发送图像数据。

使用在 actionscript 中构造请求的代码：

```
var request:URLRequest = new URLRequest(uri);
request.method = URLRequestMethod.POST;
request.contentType = "multipart/form-data; boundary=fooboundbar";

var _data:String ="";
_data += "--fooboundbar\n";
_data += "Content-Disposition: form-data; name=\"userId\"\n\n";

_data += _userId + "\n";
_data += "--fooboundbar\n";
_data += "Content-Disposition: form-data; name=\"title\"\n\n";

_data += _title + "\n";
_data += "--fooboundbar\n";
_data += "Content-Disposition: form-data; name=\"screenshot\"; filename=\"screenshot.jpg\"\n";
_data += "Content-Type: image/jpeg\n";
_data += "Content-Transfer-Encoding: binary\n\n";

_data += _screenshotByteArray.toString() + "\n";
_data += "--fooboundbar\n";
_data += "Content-Disposition: form-data; name=\"design\"; filename=\"design.jpg\"\n";
_data += "Content-Type: image/jpeg\n";
_data += "Content-Transfer-Encoding: binary\n\n";

_data += _designByteArray.toString() + "\n";
_data += "--fooboundbar\n";
_data += "Content-Disposition: form-data; name=\"test\"\n\n";

_data += "test\n";
_data += "--fooboundbar--";

request.data = _data;

trace(_data); 
```

我从动作脚本中得到了正确的跟踪，并且边界已经到位。问题是，`_screenshotByteArray`and`_designByteArray`数据包含换行符，这会弄乱整个帖子。该请求基本上在第一行之后结束，`_screenshotByteArray`并且不包括第二个图像或最后一个“测试”表单数据字段。

我的 PHP 脚本中的 var_dump 证实了这一点：

```
array(2) {
  ["userId"]=>
  string(1) "0"
  ["title"]=>
  string(9) "undefined"
}

array(1) {
  ["screenshot"]=>
  array(5) {
    ["name"]=>
    string(14) "screenshot.jpg"
    ["type"]=>
    string(0) ""
    ["tmp_name"]=>
    string(14) "/tmp/phpXZxIqg"
    ["error"]=>
    int(0)
    ["size"]=>
    int(8)
  }
} 
```

还要注意 ["size"]=>int(8); 那基本上是前 8 位，即图像的 ByteArray 的第一行。

我`Content-Type`为图像尝试了不同的 s ，也尝试了不同的`Content-Transfer-Encoding`，但这似乎没有生效。

我还考虑过是否只`ByteArray`使用 base64 对 s 进行编码并在 PHP 端对其进行解码，但这不适用于`$_FILES`数组，我也无法通过将 base64 编码图像作为普通文本字段发送然后使其工作将它存储到一个文件中，不知何故内容类型搞砸了。

所以，关于将一个编码图像从 Actionscript 发送到 PHP 的所有问题**，将多个图像和表单数据从 Actionscript 发送到 PHP 的正确方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-25T22:51:57.927

这个类对我有用：[https ://github.com/jonasmonnier/Multipart.as](https://github.com/jonasmonnier/Multipart.as)

# java - MySQLSyntaxErrorException - 准备好的语句中的参数无效

> ID：14813778
> 
> 赞同：2
> 
> 时间：2013-02-11T14:13:27.230
> 
> 标签：java, jsp, jdbc

我有如下代码。我已经尝试过堆栈中的其他解决方案，但似乎没有任何效果。生成错误的 Java 代码如下所示。

```
public Connection getConnection() 
    {
      try 
      {
        conn = DriverManager.getConnection(CONNSTR, USER, PASS);
        return conn;
      }
      catch (SQLException e) 
      {
        e.printStackTrace();
        return null;
      }
    }

    public boolean AuthenticateUser() 
    {   
        String UserName = "User";
        String Password = "Password";

        try 
        {
            PreparedStatement  pstmt = null;
            ResultSet          rs   = null;
            conn = getConnection();

            String strSQL = "SELECT UserName " +
                      "  FROM Users " +
                      " WHERE UserId   = ?  AND " + 
                      "       Password = ?";

          pstmt = (PreparedStatement) conn.prepareStatement(strSQL);
          pstmt.setString(1, UserName);
          pstmt.setString(2, Password);

          System.out.println(strSQL);

          rs = pstmt.executeQuery(strSQL);

          System.out.println(rs.getRow());

          rs.last();
          int TotalRows = rs.getRow();
          System.out.println(TotalRows);

          if(TotalRows > 0)
            return true;
          else
            return false;  

        } 
        catch (SQLException e) 
        {
          e.printStackTrace();
          return false;
        }         
    } 
```

数据库的表结构如下所示

```
CREATE TABLE Users(Id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
                   UserName VARCHAR(255),
                   UserId VARCHAR(255),
               Password VARCHAR(255)) 
```

错误如下[图所示](https://i.stack.imgur.com/HJUje.jpg) ![在此处输入图像描述](../Images/dc4890f45694dd7d4c36dc8be277d6e1.png)

例外情况如下

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '?  AND          Password = ?' at line 1
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2618)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2568)
    at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1557)
    at com.apryll.db.util.dbUtil.AuthenticateUser(dbUtil.java:55)
    at com.apryll.db.Login.doPost(Login.java:42)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:30:26.240

您再次将 SQL 传递给该`executeQuery`方法。该签名不会出现在 API 中。该方法不需要参数。

[执行查询（） javaDoc](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#executeQuery%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:16:52.690

您将变量 UserName 作为第一个查询参数传递，但在查询中您使用的是一个 int 而不是 String 的 UserId。

希望能帮助到你，

# c# - 需要多个锁对象吗？

> ID：14813780
> 
> 赞同：16
> 
> 时间：2013-02-11T14:13:35.037
> 
> 标签：c#, multithreading, concurrency, locking

给定以下课程：

```
class x
{
    Object lockOne = new Object();
    Object lockTwo = new Object();

    List<Something> listOne = new List<Something>();
    List<Something> listTwo = new List<Something>();

    void MethodOne()
    {
        lock(lockOne)
        {
            // some operation on listOne
        }
    }

    void MethodTwo()
    {
        lock(lockTwo)
        {
            // some operation on listTwo
        }
    }
} 
```

假设使用两个锁定对象是否正确，`MethodOne()`并且`MethodTwo()`可以从不同的线程同时调用并注意这一点`listOne`并且`listTwo`无论如何都不相关。锁定中涉及的唯一操作是上面注释中指定的操作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T14:15:58.917

是的，这是正确的。它避免了仅仅因为正在处理另一个列表而不必要地锁定一个列表。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-11T14:43:18.560

这里不需要单独的锁对象。以下代码也可以正常工作，代码更少，开销更少，错误使用错误锁的机会更少：

```
class x
{
    List<Something> listOne = new List<Something>();
    List<Something> listTwo = new List<Something>();

    void MethodOne()
    {
        lock (listOne)
        {
            // some operation on listOne
        }
    }

    void MethodTwo()
    {
        lock (listTwo)
        {
            // some operation on listTwo
        }
    }
} 
```

# scala - 如何编写比较两组的函数？

> ID：14813782
> 
> 赞同：1
> 
> 时间：2013-02-11T14:13:39.750
> 
> 标签：scala

我有类型 Set = Int => Boolean; , 和函数子集/如何获得两组 A 和 B 并比较它们？
我像这样写

```
def union(a: Set, b: Set): Set = {
  (i: Int) => a(i).&(b(i))==b(i) 
  } 
```

编译成功，但是`<function1>`当我运行代码时它显示在输出中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:03:46.183

我猜你正在做一些练习，可能来自 Odersky 教授的 Coursera 课程“Scala 中的函数式编程原理”。如果不是，您不应该重新定义内置名称，例如`Set`.

无论如何，为了回答您的问题，选择将“一组整数”表示为一个函数，`true`如果`Int`提供给它的函数是该集合的成员，则您的集合*是*一个函数（一个`Int`返回 a 的参数`Boolean`）。

Scala 在将函数编译为 JVM 字节码时不会记录任何源代码，因此它无法`String`以任何有意义的方式生成表示该函数的方法，而是仅生成`<functionN>`其中*N*是函数的数量（参数数量）的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:25:47.057

我可以推断你`Set`不是一个类，但它是一个类型别名`Int=>Boolean.`

由于`=>`是 的语法糖`FunctionN`,`Set`是 的类型别名`Function1[Int,Boolean]`

# shell - MongoDB 数据库集合链接

> ID：14813784
> 
> 赞同：0
> 
> 时间：2013-02-11T14:13:43.020
> 
> 标签：shell, mongodb

假设我在 mongoDB 中有两个集合

学生：

```
{_id: 1, name: "sa", teachers:[1,2,3]}
{_id: 2, name: "sb", teachers:[1,3]} 
```

教师：

```
{_id:1, name: "ta"}
{_id:2, name: "tb"}
{_id:3, name: "tc"} 
```

现在我想通过教师姓名查询学生收藏。像这样：

```
db.students.find({'teachers.name':"ta"}).count() 
```

我在某处读过可以链接集合或嵌入它。有什么办法吗？

[我试过什么？](http://whathaveyoutried.com)我已经尝试过`db.students.ensureIndex({'teachers':1})`，但它不起作用。我也觉得应该不行。我不知道该怎么做？

重复：嗯，我知道有很多帖子的标题相似，但我很困惑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:22:28.153

您是否研究过如何使用 MongoDB 完成关系模型？

我不确定你为什么认为 ensureindex 会在这里为你做任何事情。没有办法“链接”集合，MongoDB 是一个非关系型数据库。目前也无法将查询定义为使用子选择分别查询两个集合。

在这里嵌入的主要问题是你有一个多对多的关系：

*   一个学生有很多老师
*   一个老师有很多学生

这可能会在此处进行更新，从而造成性能不佳的情况。

现在，最好的办法是像这样实际执行 JOIN 客户端：

```
var teachers = [];
db.teachers.find({'name':"ta"}).forEach(function(doc){ 
    teachers[teachers.legnth-1] = doc._id; 
});
db.students.find({teachers: {$in: teachers}}); 
```

# php - 脸书页面编号

> ID：14813785
> 
> 赞同：0
> 
> 时间：2013-02-11T14:13:43.260
> 
> 标签：php, sdk, facebook-page

如何使用 php sdk 获取 facebook 粉丝页面 id？目前，我正在使用php sdk，我可以检索用户信息，但我无法检索粉丝页面信息。请帮我解释一下。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:17:05.143

您可以查找 URL 以检索 ID ...

[https://graph.facebook.com/?id=http://www.facebook.com/cocacola](https://graph.facebook.com/?id=http://www.facebook.com/cocacola)

# ios - indexpath 行没有准备好进行详细披露

> ID：14813786
> 
> 赞同：16
> 
> 时间：2013-02-11T14:13:43.357
> 
> 标签：ios, objective-c

```
 if([segue.identifier isEqualToString:@"Edit"]){

    AddCoffeeViewController *avc = [segue destinationViewController];

    Coffee *coffeeObj = [appDelegate.coffeeArray objectAtIndex:arow];
    NSLog(@"ViewController.m prepareForSegue: arow: %d coffeeName:%@ price:%@      coffeeID:%d",arow,coffeeObj.coffeeName,coffeeObj.price,coffeeObj.coffeeID);
    [coffeeObj setIsInEditMode:YES];
    avc.EditCoffeeObj = coffeeObj;

} 
```

当我按下附件按钮时，我没有得到正确的行。

虽然在下面的方法中我得到了正确的行。如果我不想使用任何 ivar，有什么方法可以让我为 segue 做好正确的准备。

```
-(void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath{

arow = indexPath.row;

} 
```

![在此处输入图像描述](../Images/2cce2126512eca9ae4d6cb0e321e0f78.png)

tableViewCell 辅助按钮：执行模态转场（编辑）
+ 按钮（导航栏按钮项）：执行模态转场（添加）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-11T14:33:23.283

如果您在情节提要中连接了辅助动作，那么`sender`in`prepareForSegue:sender:`将是被点击的单元格。这意味着你可以做类似的事情

```
NSIndexPath *indexPath = [self.tableView indexPathForCell:sender]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T14:18:29.463

点击的附件按钮和选择的行是两个不同的东西。在accessoryButtonTappedForRowWithIndexPath 中，只需将indexPath 设置为一个全局变量，然后在segue 中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-27T20:43:47.597

**SWIFT 3.0**解决方案；与 Objective-C 版本非常相似。所以 Cell 是发送者，我们通过**Cell接收****indexPath**，其中的附件被按下

 **```
override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
    if let destination = segue.destination as? YourViewController {
        let indexPath = tableView.indexPath(for: sender as! UITableViewCell)!
    }
} 
```**

# object - 如何使用 vb 脚本自动将对象添加到对象存储库？

> ID：14813791
> 
> 赞同：1
> 
> 时间：2013-02-11T14:13:53.740
> 
> 标签：object, vbscript

是否可以使用 VBScript 自动将对象添加到对象存储库？

假设我的网页/应用程序中有链接列表。当我手动添加对象时，这会很耗时，所以我尝试自动将对象添加到存储库。但无法继续，因为我不知道如何在 QTP 中激活对象存储库（在运行时）。

以下是我尝试过的代码：

```
Function Objects_Count(myObject)
  Dim Objects
  Set Objects=Description.Create
  Objects("micclass").value=myObject
  set obj=Browser("title:=.*").Page("title:=.*").ChildObjects(Objects)
  For i=0 to obj.count-1
    'msgbox i
    c=obj(i).getroproperty("name")
    If obj(i).Exist(1) Then
      obj(i).highlight
    End If
    Print c
  Next
End Function
Call Objects_Count("link") 
```

上面的代码将获取显示在日志文件中的链接名称，并且它将在应用程序/网页中突出显示。请指导我如何将该链接（对象）的属性添加到对象存储库。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:34:02.667

为了操作对象存储库，您需要`Mercury.ObjectRepositoryUtil`对象、`load`现有对象存储库并使用`AddObject`.

```
Set myRepository = CreateObject("Mercury.ObjectRepositoryUtil")
myRepository.Load "C:\QuickTest\Tests\Flights.tsr"
myRepository.AddObject myLink, Browser("B").Page("P"), "myLinkName" 
```

你必须稍微玩一下它才能让它在你的情况下工作。使用 QTP 帮助查找 ObjectRepositoryUtil 的所有可访问方法/属性，只需在`Index`选项卡下方的搜索框中输入“ObjectRepositoryUtil”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-25T12:17:04.707

**编辑：**您需要通过其[ProgId](https://msdn.microsoft.com/en-us/library/dd542719.aspx)而不是其`micclass`.

然后使用`SetTOProperty`为了从返回的值创建相关描述`ChildObjects`。

[有关详细信息，](https://stackoverflow.com/questions/30613543/)请参阅此问题。

* * *

~~我不相信有一种方法可以动态添加测试对象。`ObjectRepositoryUtil.AddObject`在它的文档中有这个：~~

 ~~> 您可以使用此方法添加从不同对象存储库检索到的对象的副本。~~ 

您可以使用在测试中获取的属性通过 XML 动态创建存储库，但我认为这比它的价值更麻烦。

在这种情况下，可能最好使用描述性编程。

~~有关更多详细信息，请参阅此[LinkedIn 线程](https://www.linkedin.com/grp/post/1079537-262719920)。~~

# sql-server - Azure VM：OS 磁盘或数据磁盘上的 SQL Server 数据库？

> ID：14813795
> 
> 赞同：2
> 
> 时间：2013-02-11T14:14:06.273
> 
> 标签：sql-server, sql-server-2008, azure, cloud, azure-storage

我正忙于迁移到 Azure 虚拟机。

我的 SQL Server 数据库 MDF 应该驻留在 OS 磁盘上还是数据磁盘上（据我所知，它是一个页面 blob - 也称为 Azure 磁盘驱动器）？

我会认为数据磁盘是正确的位置，但我刚刚[在这里](http://msdn.microsoft.com/en-us/library/windowsazure/jj156168.aspx)读到它比 OS 磁盘慢。

此外，如果我使用数据磁盘，那么操作系统磁盘和数据磁盘是否应该属于同一个存储帐户容器以提高性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:28:37.280

简短的回答是您想要使用 Azure 数据驱动器。

更长的解释：Azure 中有两种持久存储模型：Azure 驱动器和 Azure 数据磁盘

它们有一些共同的特点，但也有一些区别。

对于这两种情况，它们都由 PAGE Blob 支持。每个驱动器的最大大小为 1TB。

它们的不同之处在于它们如何暴露于 VM 和通信路径。

Azure 驱动器是第一个实现，旨在允许 Web/Worker/VM 角色将 Blob 挂载为可通过 NTFS 访问的持久存储（即允许旧版 PaaS 应用程序与 Blob 存储交互而无需更改）。它们被实现为在来宾 VM 内部运行的过滤器驱动程序。

Azure 数据磁盘是 IaaS 功能集的一部分。它们作为 SCSI 驱动器向来宾 VM 公开 - 因此您可以拥有多个驱动器并创建条带集以获得更好的性能。

有关详细说明和其他链接/说明/脚本

[http://msdn.microsoft.com/en-us/library/windowsazure/jj672979.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj672979.aspx)

# jquery - jQuery 选项卡：面板覆盖 100% 高度的选项卡

> ID：14813800
> 
> 赞同：12
> 
> 时间：2013-02-11T14:14:17.733
> 
> 标签：jquery, css, jquery-ui, tabs, jquery-tabs

我正在尝试使用具有面板内容的 jQuery-UI 的选项卡小部件来扩展到整个可用空间。

这是我到目前为止所获得的简化版本：http: [//jsfiddle.net/MhEEH/3/](http://jsfiddle.net/MhEEH/3/)

当我使用以下 CSS 时，您会看到 #tab-1 的绿色面板内容仅覆盖整个页面，而不仅仅是面板空间：

```
 #tab-1 {
    background: green;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
} 
```

我可以使用“顶部：27px；” 解决这个问题，但这会与两件事发生冲突：

1.  如果我更改选项卡“主题”，高度（27px）可能会改变
2.  如果我有很多选项卡，我将在第一行下方有第二行。所以我的面板内容将覆盖第二行......

一个干净而简短的解决方案就可以了。

JavaScript 是可以接受的，而（干净的！）纯 CSS 解决方案会更好......

- 问候，

斯特凡

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-15T03:00:55.823

不要使用自己的 CSS，而是使用 jQuery UI 的内置功能。

```
var tabs = $("#tabs").tabs({heightStyle: "fill"}); 
```

从[API 文档](http://api.jqueryui.com/tabs/#option-heightStyle)：

> **高度风格**
> 
> 类型：字符串
> 
> 默认值：“内容”
> 
> 控制选项卡小部件和每个面板的高度。可能的值：
> 
> *   “auto”：所有面板将设置为最高面板的高度。
> *   **“填充”：根据选项卡的父高度展开到可用高度。**
> *   “内容”：每个面板将仅与其内容一样高。

尽管您认为纯 CSS 解决方案会非常好是对的，但由于*无论如何*您都在使用 JavaScript来构建选项卡功能，因此最好使用您已经拥有的脚本的现有功能。

* * *

**更新**：

*   有关最简单的完整示例，请参见[http://jsfiddle.net/MhEEH/45/](http://jsfiddle.net/MhEEH/45/)。请注意，它不需要任何 CSS`position`规则。

*   您需要使用[http://benalman.com/projects/jquery-resize-plugin/](http://benalman.com/projects/jquery-resize-plugin/)（或类似的）来观察父级的大小变化。默认情况下，浏览器仅在窗口本身上触发[`resize`事件，但此插件将对事件的支持扩展到正在调整大小的任意元素。](http://api.jquery.com/resize)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T14:26:40.517

我尝试将标签放入标签容器并使用以下样式

```
#tab-container {position:relative; min-height:100%;} 
```

它似乎有效：

[http://jsfiddle.net/MhEEH/8/](http://jsfiddle.net/MhEEH/8/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T14:21:17.093

这就是你所追求的吗？

[http://jsfiddle.net/MhEEH/5/](http://jsfiddle.net/MhEEH/5/)

```
html, body {
    height: 100%;   
}
#tabs {
    position: absolute;
    top: 0;
    bottom:0;
    left: 0;
    right: 0;
}
#tab-1 {
    background: green;
    height: 100%;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T14:23:16.673

我只是尝试使用这个：

```
#tab-1 {
    background: green;
    position: relative;
    height:100%;
} 
```

在 jsfiddle 中它工作正常。不知道它会在你的页面上如何 [http://jsfiddle.net/MhEEH/7/](http://jsfiddle.net/MhEEH/7/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-13T22:02:19.083

操作，

检查[这个小提琴](http://jsfiddle.net/xZxHf/)。

父母`#tabs`有`overflow: hidden;`。除了孩子：`#tabs div[id*=tab]`有`overflow:auto`设定。这确保了父级将设置边界，并且如果选项卡中的内容溢出，滚动条的外观将由选项卡本身委托。

此外，对于那些不熟悉语法的人来说`#tabs div[id*=tab]`，这个通配符将匹配任何包含“tab”`div`的孩子。这可以通过多种方式完成，但我选择这条路线进行快速原型设计。`#tabs``id`

希望这可以帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-18T04:48:29.023

下面是我的 CSS 解决方案的链接，希望对您有用

[http://jsfiddle.net/MhEEH/17/](http://jsfiddle.net/MhEEH/17/)

```
html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
}
#tab-list {
    position: absolute;
    z-index: 10;
    top: 0;
    left: 0;
    width: 100%;
}
#tabs {
    position: absolute;
    top: 0;
    bottom:0;
    left: 0;
    right: 0;
}
#tab-1, #tab-2 {
    background: green;
    position: absolute;
    top: 48px;
    bottom: 0;
    left: 0;
    right: 0;
    padding-top: 10px;
} 
```

有人提到了 Coda 滑块，这也是一个很好的解决方案，作为替代方案，我可能会建议使用 codrops 的弹性内容滑块

[http://tympanus.net/codrops/2013/02/26/elastic-content-slider/](http://tympanus.net/codrops/2013/02/26/elastic-content-slider/)

希望能帮助到你，

干杯

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-18T12:44:16.317

最简单的解决方案，CSS的两处改动，问题解决了，`#tabs{height:100%;}`

和 `#tab-1{top:45px;}`

这会做:) 更新的[小提琴](http://jsfiddle.net/MhEEH/37/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-18T06:19:58.037

这个怎么样...如果内容溢出，您将看到滚动条完全可见

[http://jsfiddle.net/uHk5f/](http://jsfiddle.net/uHk5f/)

```
<div id="tab-1" class="customPanel">This content shall: fill up the entire space (left to right) until  the bottom of the page. But it shall -NOT- cover the tabs!</div> 
```

并为班级提供风格，用这个

```
 html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
}
#tabs {
    position: absolute;
    top: 0;
    bottom:0;
    left: 0;
    right: 0;
     overflow:auto;
}

 #tabs .customPanel {
    background: green;

} 
```

希望这可以帮助！！！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-15T14:59:17.290

我认为没有必要在此处使用 javascript 进行基本样式修改。我最近将一个单页全屏样式应用程序从使用定位和其他东西从 javascript 调整大小到纯 CSS 转换。

现在找到一个解决方案 - 试试这个。

[http://jsfiddle.net/MhEEH/16/](http://jsfiddle.net/MhEEH/16/)

```
#tab-1 {
    background: green;
    height: 100%;
} 
```

我认为不需要在绿色框元素上使用绝对定位，因为父元素填满了空间，你现在需要做的就是`height: 100%`它应该填满其余的空间。

**编辑**

此版本中的内容不滚动似乎存在问题。正在努力寻找解决此问题的方法。我觉得 jQuery UI 正在向 div 添加一堆样式和内容，`#tab-1`这可能会导致您的问题。可能值得尝试重置样式`#tab-1`并查看剩下的内容。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-18T14:02:56.033

我在#tab-1 id 中添加了一个顶部位置值，以将其推到选项卡本身下方。

见：http: [//jsfiddle.net/MhEEH/40/](http://jsfiddle.net/MhEEH/40/)

这是相关的CSS：

```
#tab-1 {
    background: green;
    position: absolute;
    top: 50px;
    bottom: 0;
    left: 0;
    right: 0;
} 
```

希望能帮助到你！

# lisp - 宣告，宣告，宣告

> ID：14813801
> 
> 赞同：27
> 
> 时间：2013-02-11T14:14:23.400
> 
> 标签：lisp, common-lisp

你能解释一下这三个符号之间的`proclaim`区别`declaim`吗`declare`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-11T16:12:57.733

它们是[*符号*](http://clhs.lisp.se/Body/t_symbol.htm)，而不是[*关键字*](http://clhs.lisp.se/Body/t_kwd.htm)。

1.  [`proclaim`](http://clhs.lisp.se/Body/f_procla.htm)命名一个用于进行*全局*[声明的](http://clhs.lisp.se/Body/03_c.htm)[*函数*](http://clhs.lisp.se/Body/03_ababc.htm)。您应该尽可能使用。 *[`declaim`](http://clhs.lisp.se/Body/m_declai.htm)*

**   [`declaim`](http://clhs.lisp.se/Body/m_declai.htm)命名一个[*宏*](http://clhs.lisp.se/Body/03_ababb.htm)来进行*全局* [声明](http://clhs.lisp.se/Body/03_c.htm)（如），这在*编译时*[`proclaim`](http://clhs.lisp.se/Body/f_procla.htm)也有效。

    **   [`declare`](http://clhs.lisp.se/Body/s_declar.htm)只是一个[*符号*](http://clhs.lisp.se/Body/t_symbol.htm)（即，它没有命名[函数](http://clhs.lisp.se/Body/03_ababc.htm)、[宏](http://clhs.lisp.se/Body/03_ababb.htm)或[特殊运算符](http://clhs.lisp.se/Body/03_ababa.htm)），用于在*某些*形式的开头进行*局部* [声明](http://clhs.lisp.se/Body/03_c.htm)（您可以将其视为这些形式的*语法*元素）。** 

 ***所以，前两个影响[全局环境](http://clhs.lisp.se/Body/26_glo_g.htm#global_environment)，最后一个是[本地](http://clhs.lisp.se/Body/26_glo_l.htm#local_declaration)的。

[`declaim`](http://clhs.lisp.se/Body/m_declai.htm)比它更可取，因为它在[编译环境](http://clhs.lisp.se/Body/26_glo_c.htm#compilation_environment)[`proclaim`](http://clhs.lisp.se/Body/f_procla.htm)中具有立竿见影的效果：

> 尽管[`proclaim`](http://clhs.lisp.se/Body/f_procla.htm)表单的执行具有可能影响编译的效果，但编译器不会尝试识别和专门处理声明表单。诸如以下的声明，即使是顶级形式，在执行之前也不会产生任何影响：
> 
> `(proclaim '(special *x*))`
> 
> 如果需要编译时副作用， [`eval-when`](http://clhs.lisp.se/Body/s_eval_w.htm)可能会有用。例如：
> 
> `(eval-when (:execute :compile-toplevel :load-toplevel) (proclaim '(special *x*)))`
> 
> 但是，在大多数此类情况下，最好将其 [`declaim`](http://clhs.lisp.se/Body/m_declai.htm)用于此目的。

即，如果您的代码是

```
(proclaim '(special *x*))
(defun foo () (print *x*)) 
```

编译器会抱怨`foo`读取了一个未知的特殊变量`*x*`，而

```
(declaim (special *x*))
(defun foo () (print *x*)) 
```

不会引起任何警告。

**附言**。如果您想知道为什么 CL 甚至有[`proclaim`](http://clhs.lisp.se/Body/f_procla.htm)：首先，它在历史上以前就存在[`declaim`](http://clhs.lisp.se/Body/m_declai.htm)，其次，[`proclaim`](http://clhs.lisp.se/Body/f_procla.htm)在宏中更简单且更有用。***

# interface - 打字稿函数接口

> ID：14813804
> 
> 赞同：81
> 
> 时间：2013-02-11T14:14:36.353
> 
> 标签：interface, typescript

为什么 Typescript 没有警告我我定义的函数与接口声明不匹配，但如果我尝试调用该函数，它会警告我。

```
interface IFormatter {
    (data: string, toUpper : boolean): string;
};

//Compiler does not flag error here.
var upperCaseFormatter: IFormatter = function (data: string) {
    return data.toUpperCase();
}  

upperCaseFormatter("test"); //but does flag an error here. 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-02-11T16:41:02.553

该接口确保实现该接口的所有函数调用者都提供所需的参数 -`data`和`toUpper`.

因为 TypeScript 知道 JavaScript 不介意您传递未使用的参数，所以它巧妙地在实现中允许这样做。

为什么这样可以？因为这意味着您可以替换接口的任何实现而不影响调用代码。

示例：您可以替换任`IFormatter`一实现并且代码有效。

```
interface IFormatter {
    (data: string, toUpper: boolean): string;
};

var upperCaseFormatter: IFormatter = function (data: string) {
    return data.toUpperCase();
}

var variableCaseFormatter: IFormatter = function (data: string, toUpper: boolean) {
    if (toUpper) {
        return data.toUpperCase();
    }

    return data.toLowerCase();
}

// Switch between these at will
//var formatter = upperCaseFormatter;
var formatter = variableCaseFormatter;

formatter("test", true); 
```

如果 TypeScript 不这样做，您`upperCaseFormatter`将不得不调用`toUpper`一个未在函数中的任何位置使用的参数——这会降低代码的可读性。

# linux - ALSA - 使用 alsa api (linux) 在 c 代码中更改麦克风增益

> ID：14813806
> 
> 赞同：2
> 
> 时间：2013-02-11T14:14:47.747
> 
> 标签：linux, alsa

我正在尝试使用 linux 机器上的 alsa api 从我的应用程序内部静音麦克风。我正在使用以下代码更改音量 = 0 的音量：

```
long min, max;
snd_mixer_t *handle;
snd_mixer_selem_id_t *sid;
const char *card = "default";
const char *selem_name = "Capture";
snd_mixer_open(&handle, 0);
snd_mixer_attach(handle, card);
snd_mixer_selem_register(handle, NULL, NULL);
snd_mixer_load(handle);
snd_mixer_selem_id_alloca(&sid);
snd_mixer_selem_id_set_index(sid, 0);
snd_mixer_selem_id_set_name(sid, selem_name);
snd_mixer_elem_t* elem = snd_mixer_find_selem(handle, sid);
snd_mixer_selem_get_capture_volume_range(elem, &min, &max);
snd_mixer_selem_set_capture_volume_all(elem, volume * max / 100);
snd_mixer_close(handle); 
```

这有效，并且在 alsamixer 中捕获量减少到零。但我也想使用 api 将麦克风增益更改为 0dB，但我似乎不知道如何实现这一点......

有任何想法吗？

谢谢

编辑：谢谢CL。有效。虽然不能再粘贴我的代码 7 个小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:25:39.560

这段代码：

```
const char *selem_name = "Capture";
snd_mixer_selem_id_set_index(sid, 0);
snd_mixer_selem_id_set_name(sid, selem_name); 
```

选择第一个名为“ `Capture`”的控件。

将名称更改为您的机器上碰巧控制麦克风增益的任何名称。

如果该控件的类型不是数字而是枚举，则必须使用`snd_mixer_selem_set_enum_item()`它来更改其值。

# mysql - 在减法时停止 mysql MEDIUMINT 最大到 16777214

> ID：14813807
> 
> 赞同：1
> 
> 时间：2013-02-11T14:14:55.057
> 
> 标签：mysql, sql, sql-update

我有以下问题：

```
UPDATE users SET posts = posts - 1 WHERE user_id = 5214 
```

但是，我认为当`posts = 0`此查询将帖子设置为`16777214`. 如果我尝试，我怎样才能让它保持@ 0（它是未签名的）`-1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:16:15.083

只需添加条件过滤所有大于零的记录。

```
UPDATE users 
SET    posts = posts - 1 
WHERE  user_id = 5214 AND 
       posts > 0 
```

# refresh - gdata OAuth2如何使用多个用户的令牌

> ID：14813810
> 
> 赞同：1
> 
> 时间：2013-02-11T14:15:11.143
> 
> 标签：refresh, oauth-2.0, token, gdata

# 设想：

授予访问权限时，我将令牌保存在每个应用程序用户的数据存储中。

我需要创建几个 GData 联系人授权客户端以访问不同用户的联系人，我从数据存储区获取所需用户的令牌并创建授权联系人客户端，例如将一个用户的联系人复制到其他用户的联系人。

# 问题：

授权客户端按预期工作并获取使用其令牌的用户的联系人提要，但使用令牌，令牌到期日期也被保存，它在一小时或 45 分钟内到期，然后它不再工作，我读到如果刷新令牌存在于令牌对象中，如果短期访问令牌已过期，则令牌将自动获取新的访问令牌，但这没有发生。

# 问题：

如果令牌已过期，我如何在从数据存储中获取令牌后刷新它，以便只要用户不撤销访问权限，我就可以访问用户的联系人？

# 代码 ：

> ```
> SCOPE = 'https://www.google.com/m8/feeds'
> REDIRECT_URI = 'http://localhost:8888/mainPage'
> USER_AGENT = 'shared-contacts'
> 
> token = gdata.gauth.OAuth2Token(client_id=CLIENT_ID,
>                               client_secret=CLIENT_SECRET,
>                               scope=SCOPE,
>                               user_agent=USER_AGENT)
> 
> class MyEntity(db.Model):
>   userEmail = db.StringProperty()
>     access_token = ObjectProperty()
> 
> class ObjectProperty(db.BlobProperty):
>     def validate(self, value):
>         try:
>             result = pickle.dumps(value)
>             return value
>         except pickle.PicklingError, e:
>             return super(ObjectProperty, self).validate(value)
> 
>     def get_value_for_datastore(self, model_instance):
>         result = super(ObjectProperty, self).get_value_for_datastore(model_instance)
>         result = pickle.dumps(result)
>         return db.Blob(result)
> 
>     def make_value_from_datastore(self, value):
>         try:
>             value = pickle.loads(str(value))
>         except:
>             pass
>         return super(ObjectProperty, self).make_value_from_datastore(value)
> 
> class MainHandler(webapp2.RequestHandler):
>     def get(self):
>         user = users.get_current_user()
>         if user:
>             self.redirect(token.generate_authorize_url(
>                                                   redirect_uri=REDIRECT_URI,
>                                                   access_type='offline')
>                                                   )
>         else:
>             self.redirect(users.create_login_url("/"))
> 
> class MainPage(webapp2.RequestHandler):
> 
>     def get(self):
>         # Getting the token from datastore, if token exists for this user then
>       # proceed otherwise get the access token and save in datastore.
> 
>       accessToken = Fetch_Access_Token()
> 
>         if accessToken:
>             pass
>         else:
>             url = atom.http_core.Uri.parse_uri(self.request.uri)
>             code = url.query
>             code = code['code']
> 
>             if 'error' in code:
>                 # User Did Not Grant The Access
>                 pass
>             else:
>                 token_user_email = users.get_current_user().email()
>                 token.GetAccessToken(code)
>                 entity = MyEntity(userEmail=token_user_email, access_token=token)
>                 entity.put()
> 
>         self.response.out.write(template.render('index.html',{}))
> 
> class RPCMethods():
>     def MoveContacts(self, *args):
> 
>       # All tokens except current user
>       shared_group_users = shared_users(skip_current_user)
> 
>         contact_client = gdata.contacts.client.ContactsClient(source=USER_AGENT)
> 
>       for sg_user in shared_group_users.itervalues():
> 
>           shared_user_token = sg_user[1]
> 
>           # PROBLEM OCCURS HERE, IT WORKS FOR ONLY 1 HOUR AND HERE I NEED
>           TO REFRESH THIS TOKEN.
> 
>           # For almost an hour i get other user's Data, but after that i
>           get current user's Data.
> 
>           shared_user_authorized_client = shared_user_token.authorize(contact_client)
>           shared_group_contact_feed = shared_user_authorized_client.GetContacts()
> 
> application = webapp2.WSGIApplication([
>                                       ('/', MainHandler),
>                                       ('/mainPage', MainPage),
>                                       ('/rpc', RPCHandler),
>                                       ], debug=True) 
> ```

# 更新：

# 工作代码：

```
shared_user_credentials = StorageByKeyName(CredentialsModel, shared_user_credentials_key, 'credentials').get()

    if shared_user_credentials.access_token_expired == True:
        http = httplib2.Http()
        http = shared_user_credentials.authorize(http)
        shared_user_credentials.refresh(http) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:10:29.787

所以 OAuth 2.0 代码“完全没问题”，但是您在后续需要它时获取令牌的方式是问题所在。

在另一篇[文章](https://stackoverflow.com/questions/8942340/get-refresh-token-google-api/10220362#10220362)中，我提到了 OAuth2.0 文档的[离线访问](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)部分：

> 当您的应用程序收到刷新令牌时，存储该刷新令牌以供将来使用非常重要。如果您的应用程序丢失了刷新令牌，则必须重新提示用户同意，然后才能获取另一个刷新令牌。如需重新提示用户同意，请`approval_prompt`在授权码请求中包含该参数，并将值设置为`force`。

# 简单修复：

所以当你打电话时`generate_authorize_url`，发送`approval_prompt='force'`：

```
self.redirect(token.generate_authorize_url(redirect_uri=REDIRECT_URI,
                                           access_type='offline',
                                           approval_prompt='force') 
```

您会注意到它`approval_prompt`已经在该方法的[签名](http://code.google.com/p/gdata-python-client/source/browse/src/gdata/gauth.py?r=624d33ad26f2664e8648cd4064ba5dc0a298e6b4#1239)中`generate_authorize_url`。

# 实际修复：

当您存储令牌时：

```
token_user_email = users.get_current_user().email()
token.GetAccessToken(code)
entity = MyEntity(userEmail=token_user_email, access_token=token) 
```

您知道您将为当前用户设置一个实体。我建议将其存储为

```
entity = MyEntity(id=token_user_email, access_token=token). 
```

当您让您的用户通过 OAuth 2.0 流程时，

```
user = users.get_current_user()
if user:
    self.redirect(token.generate_authorize_url(
    ... 
```

您应该首先检查给定用户是否已有令牌：

```
token = MyEntity.get_by_id(user.email())
if token is not None:
    # do something 
```

你应该真的，**真的**，**真的**，不要`token`用作全局对象！

老实说，有很多方法可以解决这个问题，你最好使用`OAuth2Decorator`from `google-api-python-client`。

有关如何将此装饰器与 结合的一些参考`gdata-python-client`，请查看我在另一个问题上发布的[答案。](https://stackoverflow.com/questions/13981641/gae-enforcing-sign-in-by-app-yaml-python-decorators-or-users-get-current-user/13981710#13981710)

# 离别说明：

您应该使用`ndb` [数据存储库](https://developers.google.com/appengine/docs/python/ndb/)。不必编写那个可怕的`ObjectProperty`，您可以简单地使用`ndb.PickleProperty`而无需您付出任何努力。

# cocoa - 覆盖 NSSearchField “清除字段”行为

> ID：14813813
> 
> 赞同：3
> 
> 时间：2013-02-11T14:15:14.027
> 
> 标签：cocoa, overriding, nscell, nssearchfield

我需要覆盖`NSSearchField`使用“清除”按钮清除字段内容时发生的操作。

默认触发的选择器是私有的：`_searchFieldCancel`。

**[更新]**

好的，我找到了解决方案。

但是，当单击“清除”按钮时，如何防止 searchField 辞去第一响应者的职务？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T14:23:33.440

对不起，这很明显，所以我会发布我的解决方案以防有人需要它：

```
[[[searchField cell] cancelButtonCell] setAction: @selector(desiredSelector)];
[[[searchField cell] cancelButtonCell] setTarget: desiredTarget]; 
```

# mobile - 手机系统之间的距离

> ID：14813814
> 
> 赞同：0
> 
> 时间：2013-02-11T14:15:15.477
> 
> 标签：mobile, geolocation, gps

我正在为我的手机开发一些东西，并希望实现一个功能，该功能将显示您附近的其他移动设备（如果可能，可更改半径）通过使用 wifi 或 gps 具有相同的应用程序，无论哪个更好。我该如何做这样的事情（参考一个很棒的指南/网站很棒）？有没有什么现成的插件之类的^^？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:22:14.017

1) 应用程序读取用户 ID 的 GPS 位置并将其发送到您的服务器并存储最新的

2) 应用程序连接到服务器并读取所有用户的位置，或与当前设备位置 GPS 接近的距离内的所有用户的位置。

Fpr aproximate distance 计算两个纬度/经度坐标之间的距离。ios和android都有内置函数。否则很容易自行实现。

# iphone - 使用 NSKeyedArchiver 归档时 UIImage 不会减小文件大小

> ID：14813817
> 
> 赞同：0
> 
> 时间：2013-02-11T14:15:21.870
> 
> 标签：iphone, ios

我在应用程序中使用我的 iphone 库中的图像。以下方法效果很好，但我的问题是当我使用 NSData 存档图像时。当图像稍后取消存档时，UIImage 大小会恢复到原始大小？

```
NSData *data = [[NSData alloc]init];
UIImage *reducedImage = [self imageWithImage:selectedImage      scaledToSize:CGSizeMake(50,50)];
data = [NSKeyedArchiver archivedDataWithRootObject:reducedImage]; 
```

这里是我使用的方法；

```
 - (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
UIGraphicsBeginImageContext(newSize);
UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
[image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return newImage;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:39:57.287

`UIImage drawInRect`只是将附加到 UIImage 的位图图像放入您给它的区域。数据本身并没有改变......

您正在寻找的是压缩。请参阅 UIKit`UIImagePNGRepresentation`或`UIImageJPEGRepresentation`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:25:18.470

这并不意味着制作一个像 zip 文件一样的压缩文件，它意味着将所有相关数据放在一起，然后将其保存到一个文件中。

> NSKeyedArchiver 是 NSCoder 的一个具体子类，它提供了一种将对象（和标量值）编码为可以存储在文件中的与体系结构无关的格式的方法。当您归档一组对象时，每个对象的类信息和实例变量都会写入归档。NSKeyedArchiver 的伴生类 NSKeyedUnarchiver 解码存档中的数据并创建一组与原始集合等效的对象。
> 
> 键控存档与非键控存档的不同之处在于，编码到存档中的所有对象和值都是给定的名称或键。在解码非键控档案时，必须以与编码相同的顺序对值进行解码。在对键控存档进行解码时，由于值是按名称请求的，因此值可能被解码为乱序或根本不解码。因此，键控档案为向前和向后兼容性提供了更好的支持。
> 
> 赋予编码值的键必须仅在当前正在编码的对象范围内是唯一的。带键存档是分层的，因此对象 A 用于对其实例变量进行编码的键与对象 B 使用的键不冲突，即使 A 和 B 是同一类的实例。然而，在单个对象中，子类使用的键可能与其超类中使用的键发生冲突。
> 
> NSArchiver 对象可以将归档数据写入文件或您提供的可变数据对象（NSMutableData 的一个实例）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:24:26.137

你问它是否应该恢复到原来的大小？如果是这样，是的，它应该。NSKeyedArchiver 用于将对象仅转换为数据，因此更容易将它们保存在核心数据或其他存储方法中。它不是一种压缩形式。

编辑：您使用的缩放比例也不是一种压缩形式，它只是缩小可见图像，所有图像数据仍然存在。

# c# - iFrame 未在 Chrome 中加载

> ID：14813821
> 
> 赞同：0
> 
> 时间：2013-02-11T14:15:27.597
> 
> 标签：c#, google-chrome, iframe

当用户登录我的网站时，我会检查是否有任何有效的促销活动，如果有，我想在弹出 iFrame 中显示一条消息。

这适用于 IE8 和 IE9，但不适用于 FF 或 Chrome。

使用 Chrome 时，页面只是循环通过 document.ready 函数...也就是说它执行 document.ready 和 showOpeningMessages() 中的代码，但没有显示 iFrame，然后立即返回 document.ready 并重复该过程好像页面正在重新加载。

这是代码：

在 C# 代码后面作为页面加载的一部分

```
 // session variable will be null to begin with to display message
        string promotionOpeningMessagesViewed = Session["promotionOpeningMessagesViewed"] == null ? "0" : "1";

        Page.ClientScript.RegisterClientScriptBlock(this.GetType(),
"pageScript", @"

function openingMessagesModalID()
{
    var id = '" + promotionOpeningMessagesPanel.ClientID + @"';
    return id;
}

function countOpeningMessages()
{
    var id = '" + mgr.PromotionOpeningMessageList.Count.ToString() + @"';
    return id;
}

function showOpeningMessages()
{
    $('#iframepromotionOpeningMessages').attr('src','PromotionOpeningMessages.aspx');
    document.getElementById('" + okayOpeningMessagesButton.ClientID + @"').style.display = 'block'; 
}

$(document).ready(function() {

    if (countOpeningMessages() != '0' && '" + promotionOpeningMessagesViewed + @"' == '0') {
        document.getElementById('" + dummyButton.ClientID + @"').click();
    };
});

", true); 
```

这是标记：

```
 <asp:Panel runat="server" ID="promotionOpeningMessagesPanel" style="display:none;" CssClass="openingMessageBox" >
    <iframe id="iframepromotionOpeningMessages" frameborder="0" src="about:blank" style="border:none; width: 100%; height: 90%  "></iframe>
     <asp:LinkButton ID="okayOpeningMessagesButton" runat="server" 
                Text="<%$ Resources:UIText,  OK%>" 
                CssClass="buttons positive BtnAdd rightAlignButton"
                style="display:none;" />
     <asp:LinkButton ID="dummyButton" runat="server" 
                Text="<%$ Resources:UIText,  OK%>"
                CssClass="buttons positive BtnAdd"
                OnClientClick="showOpeningMessages();"
                style="display:none;" />
</asp:Panel>

<ajaxControlToolkit:ModalPopupExtender runat="server" 
    ID="promotionOpeningMessagesModalPopupExtender"
    BehaviorID="promotionOpeningMessagesModalPopupExtender"
    BackgroundCssClass="modalBackground"
    PopupControlID="promotionOpeningMessagesPanel" 
    RepositionMode="RepositionOnWindowResizeAndScroll"
    OkControlID="okayOpeningMessagesButton"
    TargetControlID="dummyButton" /> 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T12:21:57.297

我决定采用另一条路线并重新编写代码，使其使用 JQuery Popup Dialog API，这样效果更好。

# php - 为什么 mysqli_insert_id 返回我 0

> ID：14813829
> 
> 赞同：0
> 
> 时间：2013-02-11T14:15:43.360
> 
> 标签：php, mysql

我实际上在这里阅读了一个答案，用户说当你的表没有任何`autoincrement`列但已经有了它时会发生这种情况，另一个是连接没有建立，但是当我使用这个时

```
if(!$running_db) {
    echo 'False';
} else {
    echo 'true'; //Returns me true so connection is establised
} 
```

比它为什么要还给我`0`？实际上正在插入，`page.php`并且在成功插入后用户被重定向到`result.php`我正在回显 id 的页面，`mysqli_insert_id`以便我可以突出显示该字段但它返回我 0，因此表格行无法突出显示

PS我使用程序方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:22:44.960

当您重定向到新脚本时，您会丢失该信息。在没有看到您的代码的情况下，我只能建议`mysqli_insert_id`在`page.php`脚本中重新读取，将其保存在 SESSION 变量中，然后重定向到`result.php`您检查该 SESSION 变量并在其中找到保存的 id 的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:24:47.720

php手册中的注意事项：

[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

“因为 mysql_insert_id() 作用于最后执行的查询，所以请务必在生成值的查询之后立即调用 mysql_insert_id()。”

检索同一页面上的值，将其放在会话中，然后从任何其他页面上的会话变量中访问该值。

# charts - 如何使用 d3.js 中的线叠加将堆积条形图上的 x 轴对齐

> ID：14813830
> 
> 赞同：2
> 
> 时间：2013-02-11T14:15:48.183
> 
> 标签：charts, d3.js, bar-chart, linechart

我正在尝试创建一个顶部带有折线图的堆积条形图，以显示总排放量和成本之间的关系。

我的例子在这里：

[http://bl.ocks.org/4754261](http://bl.ocks.org/4754261)

正如您从图表中看到的那样，折线图的点与底部的刻度不对齐，因此与条形的中心不对齐。

我一直在谷歌上进行了很多研究，但我还没有找到可以帮助我解决问题的东西。我需要第二个 x 轴吗？如果需要，它会是什么样子？

哦，如果这是显示成本和排放之间关系的一种糟糕或误导性的方式，我可以接受其他想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T14:36:00.247

您需要将每个条的一半宽度添加到线/点计算的 x 点。由于您已将每个条的宽度定义为 x.rangeBand()，这意味着将 x 属性更改为：

```
var valueline = d3.svg.line()
    .x(function(d) {
        return x(d.property) + x.rangeBand() / 2;
    })
    .y(function(d) { return yCost(d.normalised_cost); })
    .interpolate("step-after"); 
```

# appfuse - 在 Fuse IDE 中创建 fuse 项目时出错

> ID：14813832
> 
> 赞同：0
> 
> 时间：2013-02-11T14:15:52.523
> 
> 标签：appfuse

我是保险丝的新手。我刚开始学习Fuse。

我已经安装了 Fuse IDE（最新版本）。并设置对apache maven安装目录的引用。

我开始按照文档中的说明创建一个新的 fuse 项目，但是当我单击完成按钮时，出现错误“无法计算构建计划：插件 org.apache.maven.plugins:maven-resources-plugin:2.4.3或其依赖项之一无法解析：无法读取 org.apache.maven.plugins:maven-resources-plugin:jar:2.4.3 的工件描述符”。

我试图 clen 构建新的 POM.xml 我有以下错误：

[INFO] 正在扫描项目...

[信息]

[信息] --------------------------------------------- -------------------------

[INFO] 搭建骆驼泉路线 1.0.0

[信息] --------------------------------------------- -------------------------

下载：“ [http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom](http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom) ”

## [信息] -----------------------------------------

[信息] 构建失败 [信息] ------------------------------------------ ------------------------------

[INFO] 总时间：0.875s

[INFO] 完成于：2013 年 2 月 11 日星期一 19:31:43 IST

[INFO] 最终内存：4M/15M

[信息] --------------------------------------------- ------------------------- [错误] 插件 org.apache.maven.plugins:maven-clean-plugin:2.4.1 或其之一无法解析依赖项：无法读取 org.apache.maven.plugins:maven-clean-plugin:jar:2.4.1 的工件描述符：无法传输工件 org.apache.maven.plugins:maven-clean-plugin： pom:2.4.1 from/to central (repo.maven.apache.org/maven2): repo.maven.apache.org: Unknown host repo.maven.apache.org -> [Help 1]

[错误]

[错误] 要查看错误的完整堆栈跟踪，请使用 -e 开关重新运行 Maven。[错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。

[ERROR] [ERROR] 有关错误和可能解决方案的更多信息，请阅读以下文章：

[错误] [帮助 1] “ [http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException](http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException) ”

我尝试了链接中建议的所有解决方案。由于禁用了防火墙，对本地存储库有正确的引用，我可以看到存储库中的所有插件。

我删除了插件并再次构建项目，我可以看到插件下载到本地存储库。

我按照某处的建议删除了完整的存储库并尝试了，然后我们有了一个新的存储库，但仍然出现相同的错误。

一种观察是插件中没有 jar 文件，所以我手动下载了 jars 并放在存储库中，但仍然是错误。

请让我知道我需要尝试解决此问题的其他选项。因为我从过去 2 天开始一​​直在尝试这个，但没有成功。请帮助我。

谢谢维杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:48:24.243

您是否在 http 代理/防火墙后面。Apache Maven 需要通过 Internet 下载依赖项（例如 JAR 文件）。如果它失败了，那么通常你需要告诉它你需要使用的 http 代理。

请参阅 Maven 站点 [http://maven.apache.org/general.html#proxy-needed上的常见问题解答](http://maven.apache.org/general.html#proxy-needed)

# html - 如果没有安装闪光灯，显示图像？

> ID：14813834
> 
> 赞同：-1
> 
> 时间：2013-02-11T14:16:06.563
> 
> 标签：html, flash

如果没有安装闪光灯，我将无法显示图像。我不断在滚动窗口中显示奇怪的字符。这是我的代码：

```
<style>
    #MyFlashMovie {
        background: url("image/Year.gif");
        background-repeat: no-repeat;
        height: 300px;
        width: 460px;
    }
</style>

<div ID="MyFlashMovie">
    <object type="application/x-shockwave-flash" style="height: 300px; width: 460px;" data="460x300.swf" >
        <param name="movie" value="460x300.swf" >
        <param name="allowFullScreen" value="true" >
        <param name="wmode" value="transparent" >
    </object>    
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:19:53.860

您可以通过 JQuery 检测是否安装了 flash，然后显示图像

```
var hasFlash = false;
try {
  var fo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');
  if(fo) hasFlash = true;
}catch(e){
  if(navigator.mimeTypes ["application/x-shockwave-flash"] != undefined) hasFlash = true;
} 
```

# c# - 带有图像的 C# DataGridView 不显示

> ID：14813846
> 
> 赞同：2
> 
> 时间：2013-02-11T14:16:35.040
> 
> 标签：c#, image, datagridview

我需要你在这个问题上的专业知识：我有一个 dataGridView，我用一个表格适配器填充

```
public contractManage()
        {
            InitializeComponent();

            try
            {
                this.tblContractsTableAdapter.FillBy(this.tESTDataSet.tblContracts);
            }
            catch (System.Exception ex)
            {
                System.Windows.Forms.MessageBox.Show(ex.Message);
            }

            //Set color status
            setStatus();

        } 
```

然后我想添加 3 列（在索引 8、9 和 10 上），这将根据我在数据库中的值显示不同的图像对于每一行我在第一列中有我的记录 ID，我查询我的数据库以获得 3值 AtrOk 真/假，PrOk 真/假，PoOk 真/假

```
 public void setStatus()
    {
        SqlConnection conn;

        this.dataGridViewContractManage.AutoGenerateColumns = false;
        this.dataGridViewContractManage.ReadOnly = false;

        //Add images column
        DataGridViewImageColumn icAtr = new DataGridViewImageColumn();
            icAtr.HeaderText = "ATR";
            icAtr.Image = null;
            icAtr.Name = "cImgAtr";
            icAtr.Width = 35;
            icAtr.DefaultCellStyle.NullValue = null;
        this.dataGridViewContractManage.Columns.Add(icAtr);

        DataGridViewImageColumn icPr = new DataGridViewImageColumn();
            icPr.HeaderText = "PR";
            icPr.Image = null;
            icPr.Name = "cImgPr";
            icPr.Width = 35;
            icPr.DefaultCellStyle.NullValue = null;
        this.dataGridViewContractManage.Columns.Add(icPr);

        DataGridViewImageColumn icPo = new DataGridViewImageColumn();
            icPo.HeaderText = "PO";
            icPo.Image = null;
            icPo.Name = "cImgPo";
            icPo.Width = 35;
            icPo.DefaultCellStyle.NullValue = null;
        this.dataGridViewContractManage.Columns.Add(icPo);

        //Browse through dataGridView rows
        foreach (DataGridViewRow row in dataGridViewContractManage.Rows)
        {
            //Capture contract id in first cell
            int id = Convert.ToInt32(row.Cells[0].Value);
            bool atrOk = false;
            bool prOk = false;
            bool poOk = false;

            //Query this id to get atr, pr, po status values
            //Connection string
            conn = sqlDbConnection.GetConnection();

            //Connect
            conn.Open();

            try
            {
                SqlDataReader myReader = null;
                SqlCommand newCmd = new SqlCommand("SELECT * FROM tblContracts WHERE tblContracts.ContractId=" + id, conn);

                myReader = newCmd.ExecuteReader();

                while (myReader.Read())
                {
                    atrOk = Convert.ToBoolean(myReader["AtrOk"]);
                    prOk = Convert.ToBoolean(myReader["PrOk"]);
                    poOk = Convert.ToBoolean(myReader["PoOk"]);
                }

            }
            catch (Exception e)
            {
                MessageBox.Show(e.ToString());
            }
            finally
            {
                //Close DB connection
                conn.Close();
            }

            //MessageBox.Show("# " + id + "\nATR " + atrOk.ToString() + "\nPR " + prOk.ToString() + "\nPO " + poOk.ToString());

            //Set images in dataGridView depending on values
            DataGridViewImageCell cellAtr = row.Cells[8] as DataGridViewImageCell;
            DataGridViewImageCell cellPr = row.Cells[9] as DataGridViewImageCell;
            DataGridViewImageCell cellPo = row.Cells[10] as DataGridViewImageCell;

            cellAtr.ReadOnly = false;
            cellPr.ReadOnly = false;
            cellPo.ReadOnly = false;

            if (atrOk == true)
            {
                cellAtr.Value = (System.Drawing.Image)Properties.Resources.Bullet_Green;

            }
            else
            {
                cellAtr.Value = (System.Drawing.Image)Properties.Resources.Bullet_Red;

            }

            if (prOk == true)
            {
                cellPr.Value = (System.Drawing.Image)Properties.Resources.Bullet_Green;

            }
            else
            {
                cellAtr.Value = (System.Drawing.Image)Properties.Resources.Bullet_Red;

            }

            if (poOk == true)
            {
                cellPo.Value = (System.Drawing.Image)Properties.Resources.Bullet_Green;

            }
            else
            {
                cellAtr.Value = (System.Drawing.Image)Properties.Resources.Bullet_Red; 
            }

        }

        MessageBox.Show("Done");
    } 
```

我不明白为什么，但似乎 DataGridView 填充正确，设置图像列中的图像发送清除它在每个图像单元格中留下“null”

* * *

在 DJ Kraze 发表评论后，我已经“玩”了连接/关闭（将其移出循环），但它并没有真正改变任何东西。

绑定源（我使用 Visual C# GUI 为我完成）在我的 xx.Designer.cs 中定义

```
partial class contractManage
{
    /// <summary> 
    /// Variable nécessaire au concepteur.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    /// <summary> 
    /// Nettoyage des ressources utilisées.
    /// </summary>
    /// <param name="disposing">true si les ressources managées doivent être supprimées ; sinon, false.</param>
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    #region Code généré par le Concepteur de composants

    /// <summary> 
    /// Méthode requise pour la prise en charge du concepteur - ne modifiez pas 
    /// le contenu de cette méthode avec l'éditeur de code.
    /// </summary>
    private void InitializeComponent()
    {
        this.components = new System.ComponentModel.Container();
        System.Windows.Forms.DataGridViewCellStyle dataGridViewCellStyle1 = new System.Windows.Forms.DataGridViewCellStyle();
        System.Windows.Forms.DataGridViewCellStyle dataGridViewCellStyle2 = new System.Windows.Forms.DataGridViewCellStyle();
        this.tESTDataSet = new BombardierEngAdmin.TESTDataSet();
        this.tblContractsTableAdapter = new BombardierEngAdmin.TESTDataSetTableAdapters.tblContractsTableAdapter();
        this.dataGridViewContractManage = new System.Windows.Forms.DataGridView();
        this.tblContractsBindingSource = new System.Windows.Forms.BindingSource(this.components);
        this.agencyDataGridViewTextBoxColumn = new System.Windows.Forms.DataGridViewTextBoxColumn();
        this.endDateDataGridViewTextBoxColumn = new System.Windows.Forms.DataGridViewTextBoxColumn();
        this.startDateDataGridViewTextBoxColumn = new System.Windows.Forms.DataGridViewTextBoxColumn();
        this.contractTypeDataGridViewTextBoxColumn = new System.Windows.Forms.DataGridViewTextBoxColumn();
        this.surnameDataGridViewTextBoxColumn = new System.Windows.Forms.DataGridViewTextBoxColumn();
        this.firstNameDataGridViewTextBoxColumn = new System.Windows.Forms.DataGridViewTextBoxColumn();
        this.contractStatusDataGridViewTextBoxColumn = new System.Windows.Forms.DataGridViewImageColumn();
        this.contractIdDataGridViewTextBoxColumn = new System.Windows.Forms.DataGridViewTextBoxColumn();
        ((System.ComponentModel.ISupportInitialize)(this.tESTDataSet)).BeginInit();
        ((System.ComponentModel.ISupportInitialize)(this.dataGridViewContractManage)).BeginInit();
        ((System.ComponentModel.ISupportInitialize)(this.tblContractsBindingSource)).BeginInit();
        this.SuspendLayout();
        // 
        // tESTDataSet
        // 
        this.tESTDataSet.DataSetName = "TESTDataSet";
        this.tESTDataSet.SchemaSerializationMode = System.Data.SchemaSerializationMode.IncludeSchema;
        // 
        // tblContractsTableAdapter
        // 
        this.tblContractsTableAdapter.ClearBeforeFill = true;
        // 
        // dataGridViewContractManage
        // 
        this.dataGridViewContractManage.AllowUserToAddRows = false;
        this.dataGridViewContractManage.AllowUserToDeleteRows = false;
        this.dataGridViewContractManage.AllowUserToResizeRows = false;
        this.dataGridViewContractManage.AutoGenerateColumns = false;
        this.dataGridViewContractManage.BackgroundColor = System.Drawing.Color.White;
        this.dataGridViewContractManage.BorderStyle = System.Windows.Forms.BorderStyle.None;
        this.dataGridViewContractManage.ColumnHeadersBorderStyle = System.Windows.Forms.DataGridViewHeaderBorderStyle.Single;
        dataGridViewCellStyle1.Font = new System.Drawing.Font("Segoe UI", 8F);
        this.dataGridViewContractManage.ColumnHeadersDefaultCellStyle = dataGridViewCellStyle1;
        this.dataGridViewContractManage.ColumnHeadersHeight = 25;
        this.dataGridViewContractManage.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.DisableResizing;
        this.dataGridViewContractManage.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] {
        this.contractIdDataGridViewTextBoxColumn,
        this.contractStatusDataGridViewTextBoxColumn,
        this.firstNameDataGridViewTextBoxColumn,
        this.surnameDataGridViewTextBoxColumn,
        this.contractTypeDataGridViewTextBoxColumn,
        this.startDateDataGridViewTextBoxColumn,
        this.endDateDataGridViewTextBoxColumn,
        this.agencyDataGridViewTextBoxColumn});
        this.dataGridViewContractManage.DataSource = this.tblContractsBindingSource;
        dataGridViewCellStyle2.Alignment = System.Windows.Forms.DataGridViewContentAlignment.MiddleLeft;
        dataGridViewCellStyle2.BackColor = System.Drawing.SystemColors.Window;
        dataGridViewCellStyle2.Font = new System.Drawing.Font("Segoe UI", 8F);
        dataGridViewCellStyle2.ForeColor = System.Drawing.SystemColors.ControlText;
        dataGridViewCellStyle2.SelectionBackColor = System.Drawing.SystemColors.Highlight;
        dataGridViewCellStyle2.SelectionForeColor = System.Drawing.SystemColors.HighlightText;
        dataGridViewCellStyle2.WrapMode = System.Windows.Forms.DataGridViewTriState.False;
        this.dataGridViewContractManage.DefaultCellStyle = dataGridViewCellStyle2;
        this.dataGridViewContractManage.EnableHeadersVisualStyles = false;
        this.dataGridViewContractManage.GridColor = System.Drawing.Color.Gainsboro;
        this.dataGridViewContractManage.Location = new System.Drawing.Point(4, 4);
        this.dataGridViewContractManage.Name = "dataGridViewContractManage";
        this.dataGridViewContractManage.RowHeadersBorderStyle = System.Windows.Forms.DataGridViewHeaderBorderStyle.Single;
        this.dataGridViewContractManage.RowHeadersDefaultCellStyle = dataGridViewCellStyle1;
        this.dataGridViewContractManage.RowHeadersVisible = false;
        this.dataGridViewContractManage.RowHeadersWidth = 20;
        this.dataGridViewContractManage.RowTemplate.ReadOnly = true;
        this.dataGridViewContractManage.RowTemplate.Resizable = System.Windows.Forms.DataGridViewTriState.False;
        this.dataGridViewContractManage.Size = new System.Drawing.Size(897, 502);
        this.dataGridViewContractManage.TabIndex = 1;
        this.dataGridViewContractManage.CellContentDoubleClick += new System.Windows.Forms.DataGridViewCellEventHandler(this.dataGridViewContractManage_CellContentDoubleClick);
        // 
        // tblContractsBindingSource
        // 
        this.tblContractsBindingSource.DataMember = "tblContracts";
        this.tblContractsBindingSource.DataSource = this.tESTDataSet;
        // 
        // agencyDataGridViewTextBoxColumn
        // 
        this.agencyDataGridViewTextBoxColumn.DataPropertyName = "Agency";
        this.agencyDataGridViewTextBoxColumn.HeaderText = "Agency";
        this.agencyDataGridViewTextBoxColumn.Name = "agencyDataGridViewTextBoxColumn";
        this.agencyDataGridViewTextBoxColumn.Width = 150;
        // 
        // endDateDataGridViewTextBoxColumn
        // 
        this.endDateDataGridViewTextBoxColumn.DataPropertyName = "EndDate";
        this.endDateDataGridViewTextBoxColumn.HeaderText = "End";
        this.endDateDataGridViewTextBoxColumn.Name = "endDateDataGridViewTextBoxColumn";
        this.endDateDataGridViewTextBoxColumn.Width = 80;
        // 
        // startDateDataGridViewTextBoxColumn
        // 
        this.startDateDataGridViewTextBoxColumn.DataPropertyName = "StartDate";
        this.startDateDataGridViewTextBoxColumn.HeaderText = "Start";
        this.startDateDataGridViewTextBoxColumn.Name = "startDateDataGridViewTextBoxColumn";
        this.startDateDataGridViewTextBoxColumn.Width = 80;
        // 
        // contractTypeDataGridViewTextBoxColumn
        // 
        this.contractTypeDataGridViewTextBoxColumn.DataPropertyName = "ContractType";
        this.contractTypeDataGridViewTextBoxColumn.HeaderText = "Type";
        this.contractTypeDataGridViewTextBoxColumn.Name = "contractTypeDataGridViewTextBoxColumn";
        this.contractTypeDataGridViewTextBoxColumn.Width = 150;
        // 
        // surnameDataGridViewTextBoxColumn
        // 
        this.surnameDataGridViewTextBoxColumn.DataPropertyName = "Surname";
        this.surnameDataGridViewTextBoxColumn.HeaderText = "Surname";
        this.surnameDataGridViewTextBoxColumn.Name = "surnameDataGridViewTextBoxColumn";
        // 
        // firstNameDataGridViewTextBoxColumn
        // 
        this.firstNameDataGridViewTextBoxColumn.DataPropertyName = "FirstName";
        this.firstNameDataGridViewTextBoxColumn.HeaderText = "FirstName";
        this.firstNameDataGridViewTextBoxColumn.Name = "firstNameDataGridViewTextBoxColumn";
        // 
        // contractStatusDataGridViewTextBoxColumn
        // 
        this.contractStatusDataGridViewTextBoxColumn.DataPropertyName = "ContractStatus";
        this.contractStatusDataGridViewTextBoxColumn.HeaderText = "Status";
        this.contractStatusDataGridViewTextBoxColumn.Name = "contractStatusDataGridViewTextBoxColumn";
        this.contractStatusDataGridViewTextBoxColumn.Resizable = System.Windows.Forms.DataGridViewTriState.True;
        this.contractStatusDataGridViewTextBoxColumn.SortMode = System.Windows.Forms.DataGridViewColumnSortMode.Automatic;
        this.contractStatusDataGridViewTextBoxColumn.Width = 35;
        // 
        // contractIdDataGridViewTextBoxColumn
        // 
        this.contractIdDataGridViewTextBoxColumn.DataPropertyName = "ContractId";
        this.contractIdDataGridViewTextBoxColumn.HeaderText = "#";
        this.contractIdDataGridViewTextBoxColumn.Name = "contractIdDataGridViewTextBoxColumn";
        this.contractIdDataGridViewTextBoxColumn.ReadOnly = true;
        this.contractIdDataGridViewTextBoxColumn.Width = 50;
        // 
        // contractManage
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.BackColor = System.Drawing.Color.White;
        this.Controls.Add(this.dataGridViewContractManage);
        this.Name = "contractManage";
        this.Size = new System.Drawing.Size(921, 526);
        ((System.ComponentModel.ISupportInitialize)(this.tESTDataSet)).EndInit();
        ((System.ComponentModel.ISupportInitialize)(this.dataGridViewContractManage)).EndInit();
        ((System.ComponentModel.ISupportInitialize)(this.tblContractsBindingSource)).EndInit();
        this.ResumeLayout(false);

    }

    #endregion

    private TESTDataSet tESTDataSet;
    private TESTDataSetTableAdapters.tblContractsTableAdapter tblContractsTableAdapter;
    private System.Windows.Forms.DataGridView dataGridViewContractManage;
    private System.Windows.Forms.DataGridViewTextBoxColumn contractIdDataGridViewTextBoxColumn;
    private System.Windows.Forms.DataGridViewImageColumn contractStatusDataGridViewTextBoxColumn;
    private System.Windows.Forms.DataGridViewTextBoxColumn firstNameDataGridViewTextBoxColumn;
    private System.Windows.Forms.DataGridViewTextBoxColumn surnameDataGridViewTextBoxColumn;
    private System.Windows.Forms.DataGridViewTextBoxColumn contractTypeDataGridViewTextBoxColumn;
    private System.Windows.Forms.DataGridViewTextBoxColumn startDateDataGridViewTextBoxColumn;
    private System.Windows.Forms.DataGridViewTextBoxColumn endDateDataGridViewTextBoxColumn;
    private System.Windows.Forms.DataGridViewTextBoxColumn agencyDataGridViewTextBoxColumn;
    private System.Windows.Forms.BindingSource tblContractsBindingSource;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:04:25.360

您的代码的问题在于您将图像分配给了不正确的属性。您应该设置**Image**属性而不是**Value**属性。

您获得空值的原因是，当您创建列时，您将 Image 属性设置为空，然后从不更改它。

**** 编辑 ****

尝试这样做。我刚刚做到了，以便每个对象的创建都在同一个上下文中。

```
 if (atrOk == true)
        {
            DataGridViewImageCell cellAtr = row.Cells[8] as DataGridViewImageCell;
            cellAtr.Value = (System.Drawing.Image)Properties.Resources.Bullet_Green;

        }
        else
        {
            DataGridViewImageCell cellAtr = row.Cells[8] as DataGridViewImageCell;
            cellAtr.Value = (System.Drawing.Image)Properties.Resources.Bullet_Red;

        }

        if (prOk == true)
        {
            DataGridViewImageCell cellPr = row.Cells[9] as DataGridViewImageCell;
            cellPr.Value = (System.Drawing.Image)Properties.Resources.Bullet_Green;

        }
        else
        {
            DataGridViewImageCell cellAtr = row.Cells[8] as DataGridViewImageCell;
            cellAtr.Value = (System.Drawing.Image)Properties.Resources.Bullet_Red;

        }

        if (poOk == true)
        {
            DataGridViewImageCell cellPo = row.Cells[10] as DataGridViewImageCell;
            cellPo.Value = (System.Drawing.Image)Properties.Resources.Bullet_Green;

        }
        else
        {
            DataGridViewImageCell cellAtr = row.Cells[8] as DataGridViewImageCell;
            cellAtr.Value = (System.Drawing.Image)Properties.Resources.Bullet_Red; 
        } 
```

# java - 构建中央 Neo4j 图形服务器

> ID：14813847
> 
> 赞同：0
> 
> 时间：2013-02-11T14:16:36.413
> 
> 标签：java, neo4j, graph-databases

我想构建一个中央 neo4j 图形数据库服务器（不是嵌入式服务器），它将存储数百万信息及其许多关系。我在各种服务器上运行了数十个线程，这些线程处理一些信息并将其更新到这个中央存储库。Neo4j可以吗？如果是这样，那么它的构建效率如何？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:21:24.547

您绝对应该考虑使用[REST API](http://docs.neo4j.org/chunked/stable/rest-api.html)。

# ruby - 使用参数哈希在发布请求中获取获取参数

> ID：14813848
> 
> 赞同：1
> 
> 时间：2013-02-11T14:16:37.693
> 
> 标签：ruby, sinatra, rack

Sinatra 应用程序中有代码

```
post '/login' do
  return_url = params[:return_url] # it's nil
  #........
end 
```

页面的 url 可能包含`return_url`参数 - `/my_app/login?return_url='blabla'`。当我尝试获取它时，它返回 nil，因为`return_url`发布数据中没有参数。

我如何访问得到`params`的`return_url`？我知道我可能会创建一个隐藏字段并将其保存到其中，但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:47:46.390

查询字符串被转换为 GET 请求的参数。由于您指的是 POST 请求，我假设您已经在页面上有一个表单，该表单将在您的 sinatra 发布操作中转换为参数。在这种情况下，查询字符串将被忽略。

您可以按照您的建议将隐藏字段添加到表单中。当用户在登录之前加载表单时，您还可以将 return_url 存储在用户的会话中。它可能类似于：

```
enable :sessions

get '/login_form' do
  session[:return_url] = 'blahblah'
end

post '/login' do
  return_url = session.delete(:return_url)
  # login
end 
```

# network-programming - 通过 sk_buff 接收和过滤以太网帧

> ID：14813853
> 
> 赞同：0
> 
> 时间：2013-02-11T14:16:49.120
> 
> 标签：network-programming, linux-kernel, filtering

我正在尝试编写可以捕获以太网帧并做出决定的内核模块：“接受”或“丢弃”包（简单过滤）。我使用了 sk_buff 和 nf_hookfn 以及此处描述的设置[http://fcns.eu/2010/02/15/netfilter-hooks/](http://fcns.eu/2010/02/15/netfilter-hooks/)。
不幸的是，我的模块只适用于 IPv4/6 包。当我收到原始以太网帧时，不会触发回调函数。

是否可以在将处理原始 Eth 的内核空间中进行过滤。帧？还有其他解决方案吗？我关心性能，我想尽快拒绝所有不需要的帧，然后再将它们发送到用户空间。

我的 linux：内核 PREEMPT RT 3.6.6 的 Ubuntu。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:08:02.143

Netfilters 在 L3 上工作，L2 替代方案称为 ebtables，它位于以太网桥中。

看看 ebt_arp 是如何注册它的匹配规则的：

```
static struct xt_match ebt_arp_mt_reg __read_mostly = {
        .name           = "arp",
        .revision       = 0,
        .family         = NFPROTO_BRIDGE,
        .match          = ebt_arp_mt,
        .checkentry     = ebt_arp_mt_check,
        .matchsize      = sizeof(struct ebt_arp_info),
        .me             = THIS_MODULE,
};

static int __init ebt_arp_init(void)
{
        return xt_register_match(&ebt_arp_mt_reg);
}

static void __exit ebt_arp_fini(void)
{
        xt_unregister_match(&ebt_arp_mt_reg);
}

module_init(ebt_arp_init);
module_exit(ebt_arp_fini); 
```

# c# - 静态脚本方法中的 LoadControl 不遵守页面生命周期（未引发 Init 事件）

> ID：14813855
> 
> 赞同：1
> 
> 时间：2013-02-11T14:16:53.100
> 
> 标签：c#, asp.net, webforms, page-lifecycle

我正在使用`ScriptMethod`从 Javascript 调用的。在此方法中，我尝试使用`LoadControl`以编程方式获取控件。

我将此控件添加到当前`IHttpHandler`( ) 中，它是还包含 my (static)`HttpContext.Current.Handler`的实例。在这个实例中，我添加了使用加载的控件，但是我的控件的事件永远不会引发。`Page``ScriptMethod``LoadControl``Init`

**是否可以在遵守页面生命周期`LoadControl`的同时使用？`ScriptMethod`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:37:02.323

您需要[执行](http://msdn.microsoft.com/en-us/library/ms150027.aspx)包含控件的页面以触发相关事件：

```
static void RenderControlTo(string pathToControl, TextWriter writer)
{
   var page = new Page();
   var control = page.LoadControl(pathToControl);
   page.Controls.Add(control);

   HttpContext.Current.Server.Execute(page, writer, false);
} 
```

# php - 正则表达式边界和字符串'c#'

> ID：14813857
> 
> 赞同：1
> 
> 时间：2013-02-11T14:16:54.893
> 
> 标签：php, regex

只是好奇想知道。我注意到我的正则表达式在与 '\b' 一起使用时找不到字符串'C#'

```
if (preg_match('@\bC#\b@i', $userSkills)) {... 
```

但是，如果我删除 '\b' 它会设法找到字符串。

有人知道这里可能是什么问题吗？

查找匹配的字符串：

```
Unified Communications Design Specialist ~$~ Windows 95 or 98 ~$~ Windows 2000 
or XP ~$~ Linux ~$~ Visual Basic ~$~ ASP Net ~$~ C# ~$~ Contact Center Design 
Specialist ~$~ Internet Programming ~$~ Object oriented programming ~$~ 
Databases ~$~ Unified Commucations ~$~ Contact Center Solutions ~$~
Junior Developer ~$~ Solutions Engineer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:18:00.210

[转义序列](http://www.php.net/manual/en/regexp.reference.escape.php)不适`\b`用于`/b`单词边界。

```
if (preg_match('@\bC#\b@i', $userSkills)) {... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:49:50.807

这是因为`#`没有字字符。`C#`我在“ ”周围的字符串中标记了单词边界`|`：

```
|ASP| |Net| ~$~ |C|# ~$~ |Contact| 
```

你看，“ `#`”和“ `”之间没有界限，所以`\b`不匹配。`

# java - 在状态模式中实现继承层次结构

> ID：14813860
> 
> 赞同：1
> 
> 时间：2013-02-11T14:17:14.540
> 
> 标签：java, c#, php, design-patterns, state-pattern

我有一个与此非常相似的设计：

![在此处输入图像描述](../Images/83d49c5578ff53d8a43e9422918f8d5d.png)

这里**NewOrder**、**Registered**和**Granted**都具有通用方法`AddOrderline()`and `Cancel()`，因此将这两种方法重构为父类很容易。

**当我想要`Cancel`一条`Shipped`线时出现问题（目前图中未显示）。**

由于**Shipped**行不支持`AddOrderline()`，因此我需要将**NewOrder**、**Registered** & **Granted**的父类分为 2 个类，一个用于 the `Cancel()`，另一个用于`AddOrderline()`.

现在`NewOrder`必须扩展 2 个父类才能获得 2 个函数。

**笔记**

1.  这个例子非常简化。我的真实应用程序有大约 12 个状态。
2.  代码是用 PHP 编写的，但欢迎使用 C# 或 Java 的解决方案，因为我认为解决方案将是相似的，因为它们都不支持多重继承。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:19:38.293

我会考虑将接口与实现分离。例如在Java中

```
interface Cancellable {
   void cancel();
}
interface Shippable{
   void ship();
} 
```

等等

```
public class NewState implements Cancellable, Shippable {
  public void cancel() { ... }
  public void ship() { ... }
} 
```

如果你有一个底层的私有状态，它可以实现*所有*需要的接口，而你的公共状态只需要委托那些支持的状态。例如

```
 public class UnderlyingState implements Cancellable, Shippable ... {
    public void cancel() { ... }
    public void ship() { ... }
 }

  public class ShippableState implements Shippable {
     private UnderlyingState ustate = new UnderlyingState();
     public void cancel() {
        // you can *only* cancel this
        ustate.cancel();    
     }
   } 
```

在上面，您可能需要返回一个新的状态对象（而不是`void`）并让您`Order`采用该新状态。该`UnderlyingState`对象将强制执行某些状态机。

令人头疼的是，随着您的状态数量增加，您的接口和实现也会增加。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T14:23:55.300

首先，您需要一个状态管理器来处理状态：

```
<?php
class StateManager
{
    protected $states = array();

    public function registerState(StateInterface $state)
    {
        $this->states[$state->getName()] = $state;
    }

    public function getState($state)
    {
        if (!array_key_exists($state, $this->states)) {
            throw new InvalidArgumentException();
        }

        return $this->states[$state];
    }
} 
```

然后你有一个可以对订单执行操作的订单管理器：

```
<?php
class OrderManager
{
    protected $stateManager;

    public function ship(OrderInterface $order)
    {
        try {
            $this->stateManager->getState($order->getState())->ship($order);
        } catch (OperationNotAllowedException $exception) {
            // However you want to handle the fact that the state can't be shipped
        }
    }
} 
```

如果订单在特定状态下无法执行操作，则会引发异常：

```
<?php
class OperationNotAllowedException extends Exception
{
} 
```

状态接口：

```
<?php
interface StateInterface
{
    public function getName();

    // Then your normal functions
    public function ship(OrderInterface $order);
    public function cancel(OrderInterface $cancel);
    public function addOrderLine(OrderInterface $order);
    public function refund(OrderInterface $order);
} 
```

现在，当您设置应用程序时：

```
$newOrderState = new NewState($database, $otherdependencies);
$stateManager->registerState($newOrderState); 
```

您的订单对象仅返回其所在状态的字符串名称，该名称与该状态的`getName`方法之一返回的名称相匹配。

此方法还允许轻松模拟和测试（这对于任何应用程序都很重要，尤其是处理人们的金钱和产品的电子商务）。

# typo3 - TYPO3 - HMenu 忽略页面的访问规则“登录时隐藏”

> ID：14813862
> 
> 赞同：0
> 
> 时间：2013-02-11T14:17:22.877
> 
> 标签：typo3, typoscript

在我的网站上，我有 3 个不同的 HMENU，其中只有一个可以正常工作，但 TS 几乎相同。

问题是我看到了如果我登录（FE 登录）我不应该看到的菜单位置。我看到带有“登录时隐藏”规则的页面，但它们没有链接到任何地方（仅显示根页面）。

我的 TypoScript 配置（我在登录时看到“登录时隐藏”页面）：

```
lib.submenu = HMENU
lib.submenu.entryLevel = 1
lib.submenu {

  1 = TMENU
1.wrap = <ul> | </ul>  
1 {
        noBlur = 1
        ACT = 0
}
# Normal  
1.NO {
      wrapItemAndSub  =  <li>|</li>
}
# Active
1.ACT = 1
1.ACT.wrapItemAndSub = <li>|</li>  
1.ACT.ATagParams = class="meny_a"

# Current  
1.CUR = 1
1.CUR.wrapItemAndSub = <li>|</li>
1.CUR.ATagParams = class="meny_a"  

# If it has a submenu
1.IFSUB = 1
1.IFSUB.wrapItemAndSub = <li>|</li>

2 = TMENU
2.wrap = <ul>|</ul>
2 {
  noBlur = 1
  ACT = 0
}

2.NO.wrapItemAndSub = <li> | </li>

2.ACT = 1
2.ACT.wrapItemAndSub = <li> | </li>

2.CUR = 1
2.CUR.wrapItemAndSub = <li>|</li>
2.CUR.ATagParams = class="meny_a"

2.IFSUB = 1
2.IFSUB.wrapItemAndSub = <li>|</li>  
} 
```

TypoScript 配置（正常工作）：

```
lib.profilmenu = HMENU
lib.profilmenu.special = directory
lib.profilmenu.special.value = {$pp_homepage_id}
lib.profilmenu {

   1 {
        SPC = 1
        SPC.doNotShowLink = 0
        SPC.doNotLinkIt = 1
        SPC.allWrap = <div class="spacer"> | </div> 
  }  

  1 = TMENU

1.wrap = <ul> | </ul>  
1 {
        noBlur = 1
        ACT = 0
}
# Normal  
1.NO {
      wrapItemAndSub  =  <li>|</li>
}
# Active
1.ACT = 1
1.ACT.wrapItemAndSub = <li>|</li>  
1.ACT.ATagParams = class="meny_a"

# Current  
1.CUR = 1
1.CUR.wrapItemAndSub = <li>|</li>
1.CUR.ATagParams = class="meny_a"  

# If it has a submenu
1.IFSUB = 1
1.IFSUB.wrapItemAndSub = <li>|</li>
} 
```

子菜单和简介菜单显示相同的页面。

要在我的网页上实时查看，您可以转到[> 此页面 <](http://www.newwaveprofile.com/myshkin/kontakt.html) 在顶部菜单位置“Hitta Medlem”，子菜单（金条，在左侧站点）位置“Våra 目录”应该在您登录时消失（使用自动-黄金子菜单上的登录按钮（“Välj som startsida”或直接[>此链接<](http://www.newwaveprofile.com/index.php?id=203&user=myshkin&pass=myshkin&logintype=login&pid=29)）

我想添加整个登录功能正常工作，并隐藏在登录规则内容对我来说很好，但不是在菜单中（金条菜单“profimenu”除外）。

TYPO3 4.5.15

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:08:21.277

我不知道那里出了什么问题，但我认为下面的打字稿可能会对您有所帮助（在打字稿菜单代码之后添加）：

```
[usergroup=*] #checks whether a user is logged in.
lib.profilmenu.excludeUidList = 10,11,12  #list of page-uids to be excluded from menu after login.
[global] 
```

# c# - 如何在 ASP.NET 应用程序中定位路径

> ID：14813869
> 
> 赞同：0
> 
> 时间：2013-02-11T14:17:40.397
> 
> 标签：c#, asp.net

如何在 ASP.NET 应用程序中定位机器上的位置（虚拟路径），

问题是这样的，在 Windows 或桌面应用程序中，我们在调试文件夹中有 .exe，因此可以参考与 .exe 相关的其他文件，例如 ..\resources 意味着 .exe 的上一个文件夹有一个资源文件夹，如果我想做在 Web 应用程序中相同如何做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:19:31.930

在 HttpContext 中你可以找到很多有用的属性

```
HttpRequest.ApplicationPath
HttpRequest.PhysicalApplicationPath
HttpRequest.PhysicalPath 
```

和别的。

请参阅[http://msdn.microsoft.com/en-us/library/ms178116(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178116(v=vs.100).aspx) 页面末尾有一个带有详细说明的漂亮表格。

# orchardcms - 在 Orchard 1.6 中导出绑定

> ID：14813870
> 
> 赞同：3
> 
> 时间：2013-02-11T14:17:53.863
> 
> 标签：orchardcms, orchardcms-1.6

我在导出（通过导出模块）通过查询页面上的绑定选项卡创建的绑定时遇到问题，以前有人遇到过这个问题吗？

我首先尝试了我正在处理的项目，当它不起作用时，我设置了一个全新的 Orchard 安装并在那里尝试。但是绑定仍然没有出现在导出的 xml 中，我创建的指向绑定的查询结果正常并且仍然​​指向类型。

我检查了错误日志，但那里没有任何内容...

欢迎任何想法或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:22:51.220

在自己遇到这个错误后，我决定为成员绑定编写导出/导入功能。我把它作为一个模块添加到画廊..

[果园画廊：Contrib.ImportExportBindings](https://gallery.orchardproject.net/List/Modules/Orchard.Module.Contrib.ImportExportBindings/1.0)

[Github：Orchard-ImportExportBindings](https://github.com/StanleyGoldman/Orchard-ImportExportBindings)

它会成功的。我不确定它应该在果园的源头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:57:59.437

根据@Bertrand Le Roy 的建议，我在这个[http://orchard.codeplex.com/workitem/19447上提交了一个错误](http://orchard.codeplex.com/workitem/19447)

# magento - Magento 链接到另一个模块

> ID：14813872
> 
> 赞同：0
> 
> 时间：2013-02-11T14:17:58.570
> 
> 标签：magento

```
$fieldset->addField('orderinfo', 'link', array(
      'label'     => Mage::helper('web')->__('Order Info'),
      'style'   => "",
      'href' => "*/".$url,
      'value'  => 'Magento Blog',
      'after_element_html' => '',
    )); 
```

我在上面指定的自定义模块上的 magento 网格上有一个链接。我想将该字段重定向到“订单”选项卡上的特定条目，但我生成的网址如下：

```
/web/adminhtml_web/edit/id/67/key/62bc32b0168b446663ef7632a57a903a/*/admin/sales_order/view/order_id/47/key/f0ca76e31666c5bc62d802b0ff8404f4 
```

我想要这样的东西，现有的网址是：

```
/web/adminhtml_web/edit/id/67/key/62bc32b0168b446663ef7632a57a903a 
```

链接网址是

```
/admin/sales_order/view/order_id/47/key/f0ca76e31666c5bc62d802b0ff8404f4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:25:30.270

```
$fieldset->addField('orderinfo', 'link', array(
  'label'     => Mage::helper('web')->__('Order Info'),
  'style'   => "",
  'href' => Mage::helper('adminhtml')->getUrl('adminhtml/sales_order/view', array('order_id' => 47)),
  'value'  => 'Magento Blog',
  'after_element_html' => '',
)); 
```

来自：[https ://magento.stackexchange.com/questions/665/magento-link-to-another-module?answertab=active#tab-top](https://magento.stackexchange.com/questions/665/magento-link-to-another-module?answertab=active#tab-top)

# android - 如何使用命令行在android中获取imsi编号

> ID：14813875
> 
> 赞同：3
> 
> 时间：2013-02-11T14:18:08.410
> 
> 标签：android, shell, android-intent, adb

我想使用命令行获取手机`IMSI`的 SIM号码。`Android`

android中是否有任何adb命令或任何shell命令？

`adb shell getprop ril.IMSI`我在三星 Galaxy ace 中尝试过命令，它可以工作。它给了我`IMSI`号码。但我在三星 Galaxy S3 中尝试了相同的命令。它不返回任何东西。

我只想使用命令行获取`IMSI`SIM 卡的数量。`Samsung Galaxy S3`（不是 Android 应用程序代码）`adb`在`Android`.

另外，我知道有一个简单的代码`JAVA`可以在 Android 应用程序中运行，它给出了`IMSI`数字：

```
TelephonyManager mTelephonyMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
String imsi = mTelephonyMgr.getSubscriberId(); 
```

我可以以某种方式从命令行运行此`Android Java`代码吗？这也将解决我的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T17:01:51.957

通过运行调用`TelephonyManager.getSubscriberId()`Android 5.x-7.x 版本`adb shell`：

```
adb shell service call iphonesubinfo 7 
```

此命令不再（即在大多数 6.0+ 设备上）要求设备获得 root 权限。

为了*正确*解析`service call`设备端的命令输出并且没有外部依赖项，请参见我的[答案here](https://stackoverflow.com/a/29357619/1778421)

另请阅读[从 ADB shell 调用 Android 服务](http://ktnr74.blogspot.com/2014/09/calling-android-services-from-adb-shell.html)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-16T15:04:38.770

```
adb shell getprop ril.iccid.sim1 
```

如果您想知道您只能使用的所有数据`adb shell getprop`，它会向您显示所有数据，并且您会看到某些项目向您显示类似 IMSI 的项目`ril.iccid.sim1`或`persist.radio.cfu.iccid.0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-05T11:37:37.760

您可以使用下面的代码通过 java 代码中的命令获取 ccid。

```
public static String getSIMCCIDByCmd() {
        try {
            Process getSimCCIDProc = Runtime.getRuntime().exec(new String[]{"getprop", "ril.iccid.sim1"});
            try (final BufferedReader b = new BufferedReader(new InputStreamReader(getSimCCIDProc.getInputStream()))) {
                String ccid = b.readLine();
                return ccid;
            } catch (final IOException e) {
                DadsHelper.LOG(TAG, "Exception while reading inputstream", e);
                return null;
            }
        }
        catch (Exception e) {
            DadsHelper.LOG(TAG,"Exception in getSIMCCID",e);

            return null;
        }
    } 
```

上面的代码使用：getprop 命令从属性管理器中获取值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-20T12:59:00.207

```
adb shell getprop persist.radio.ddssim.iccid 
```

这在我的 Oneplus 设备上对我有用。就像提到的@j140781 一样，尝试`adb shell getprop`获取所有数据，然后尝试查找以`persist.radio.`或开头的项目`ril.iccid.`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-15T13:43:45.250

以下为我在植根的 Android 10 Moto G7 Plus 上工作：

```
adb shell
su 
```

然后一旦你在 root shell 中：

```
service call iphonesubinfo 7 | tail -3 | sed s/\'\)// | awk '{print $NF}' | sed s/[\'\.]//g | tr -d \\n 
```

# javascript - getElementById(child_div_id) VS $(parentDiv).attr("child_div")

> ID：14813876
> 
> 赞同：-1
> 
> 时间：2013-02-11T14:18:09.777
> 
> 标签：javascript, jquery, dom, html

我在页面上显示了许多不同的 Div 元素。其中一些相互之间有一些关系：例如，一个附加在另一个上。

我需要动态地添加、删除和更新它们中的许多，所以要随时访问它们，我想到了两个选项：

给每个 div 唯一的 ID，然后`getElementById`在我需要的时候做，

或者，提供尽可能少的 ID 并由其父级访问子 div。为此，我必须做这样的事情：

```
$(parentDiv).attr("child", childDiv), or $(parentDiv).data("child", childDiv)" 
```

并通过以下方式获取子元素：

```
$(parentDiv).attr("child"), or $(parentDiv).data("child") 
```

我的问题是，哪种方式更有效（更快，这被认为是更好的设计，等等..）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:21:34.100

> 或者，提供尽可能少的 ID 并由其父级访问子 div。为此，我必须这样做：$(parentDiv).attr("child", childDiv) 或 $(parentDiv).data("child", childDiv)"
> 
> 并使用 - $(parentDiv).attr("child") 或 $(parentDiv).data("child") 获取子元素

这不是您访问子元素或后代元素的方式。您使用[`children`](http://api.jquery.com/children),[`find`](http://api.jquery.com/find)等。

> 我的问题是，哪种方式更有效（更快，这被认为是更好的设计，等等..）。

这些可能是单独的问题。您不太可能比通过 更有效地访问元素，但是如果您的结构是合理的`id`，那么在效率上与在结构上找到它之间的差异可能不会*很大。*您可以从中导航的几个锚点就足够了。

如果没有有关您的结构的更多信息，很难提供一个可靠的示例，但让我们考虑一个相当经典的表格案例，您希望在其中响应对单元格的点击：

```
<table>
<tbody id="foo">
<tr data-info="first row">
<td>One</td>
<td>Two</td>
<td>Three</td>
</tr>
<tr data-info="second row">
<td>One</td>
<td>Two</td>
<td>Three</td>
</tr>
</tbody>
</table> 
```

希望根据对其他单元格的点击来更新单元格是很常见的。您可以通过使用表的 ID、事件委托和结构遍历方法来做到这一点。

```
$("#foo").on('click', 'td', function() {
    // `this` is the cell that was clicked. If I want row-level data, I'd use:
    alert("This row's info is " + $(this).closest('tr').data('info'));

    // Or maybe I want the last cell in the row
    alert("Last cell's text: " + $(this).siblings().last().text());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:24:20.220

为了更好的设计方法，尽量避免使用 id 创建动态元素。如果您只是根据动态添加的元素的需要创建 css 类，它通常要简单得多并且（更容易调试）。

如果您动态创建您的 id，您始终必须确保给定的 id 在页面上是唯一的，这将导致非平凡页面的复杂性。除此之外，IE 和 Chrome 对非唯一 ID 的处理方式不同（也取决于浏览器版本），这使得调试非常令人沮丧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:24:41.340

给元素一个类名，这样你可以将元素组合在一起，然后你可以使用 jQuery 直接访问它们。所以 parent1 下的任何东西都会给 parent1 类等

```
 $('.parent1').remove();  // will remove all parent1 classes 
```

# .net - 使用 try/catch 的优缺点

> ID：14813877
> 
> 赞同：1
> 
> 时间：2013-02-11T14:18:11.327
> 
> 标签：.net, try-catch, try-catch-finally

我想问一下**`advantage`**and **`disadvantages`**of using是**`try/catch`**什么？什么时候必须使用它，什么时候不能使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:24:22.317

当您在应用程序中使用一些外部控件/dll 并且您不确定它的功能并且您不希望该外部控件中的错误停止您自己的应用程序时，您可以使用 Try/Catch。由于该控件中的致命错误，它不会完全停止您的应用程序。但是使用该控件的代码部分将不起作用。

这并不意味着您可以在自己的代码中使用 Try Catch 来避免致命错误，这可能会导致您的应用程序出现严重缺陷。

Try/Catch 通常可用于调试应用程序，之后您可以删除 Try/Catch 块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T15:13:54.063

Try-Catch-Finally 语句是非常强大的结构，可以帮助您的程序在大多数系统上完美运行。这是一个很好的错误处理机制，可以帮助你的程序不崩溃。我想指出这种机制的缺点，因为缺点很少；首先，在 try-catch 语句中工作时，您将失去一些性能，因为某些内部机制正在检查要捕获的任何异常，但是这种性能损失在当前系统中是可以忽略的，并且与启动整体的想法相比，这种损失是如此之小程序从一开始就因为未捕获异常而发生崩溃。其次，try-catch 机制的概念一开始有点难以理解，你应该考虑好在何时何地使用 try-catch 语句。然而，在编程中理解复杂结构中的概念是最东方的之一。看优势的一面；异常捕获机制可帮助您决定在发生异常时要做什么。例如，在反击显示与服务器断开连接的异常时考虑在线游戏，您可以让用户离线玩游戏，而另一个人可能决定将他踢出游戏并告诉玩家他已断开连接。此外，异常系统使创建和使用框架成为可能，因为框架编码器会告诉您，当您使用他的框架时发生了异常，您将完成工作，遇到此异常您将如何反应。最后，它可以帮助您简化错误检测系统。考虑在 if-else 语句中执行每个方法并查看错误是否已解决，它很快就会变得混乱，一段时间后您将无法阅读自己的代码。但是，在 try-catch 块中，您可以执行数以百计的可能失败的操作，并将代码简单地封装到一个简单的 try-catch 块中。我现在没有更多的想法，但希望这可以帮助您理解为什么使用 try-catch 是有益的。

# java - Bauerca drag-sort-listview 简单示例

> ID：14813882
> 
> 赞同：41
> 
> 时间：2013-02-11T14:18:30.353
> 
> 标签：java, android, listview, drag-and-drop, android-fragments

Bauerca drag-sort-listview 是一个很棒的库，用于列表视图中的拖动功能。 [https://github.com/bauerca/drag-sort-listview](https://github.com/bauerca/drag-sort-listview)

但我的问题是演示项目非常复杂，我无法跟踪它以将功能包含在我的项目中..

任何简单的例子将不胜感激..

例如，我只需要一个包含三个项目的自定义列表的屏幕......或任何其他简单的例子......

谢谢

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-22T15:15:42.803

这是一个关于如何使用我自己编写的库的简短程序。基本上它与样本相同，只是都在一个地方。

```
package com.example.dndlist;

import java.util.ArrayList;
import java.util.Arrays;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.ArrayAdapter;

import com.mobeta.android.dslv.DragSortController;
import com.mobeta.android.dslv.DragSortListView;

public class MainActivity extends Activity
{ 
    DragSortListView listView;
    ArrayAdapter<String> adapter;

    private DragSortListView.DropListener onDrop = new DragSortListView.DropListener()
    {
        @Override
        public void drop(int from, int to)
        {
            if (from != to)
            {
                String item = adapter.getItem(from);
                adapter.remove(item);
                adapter.insert(item, to);
            }
        }
    };

    private DragSortListView.RemoveListener onRemove = new DragSortListView.RemoveListener()
    {
        @Override
        public void remove(int which)
        {
            adapter.remove(adapter.getItem(which));
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        listView = (DragSortListView) findViewById(R.id.listview);
        String[] names = getResources().getStringArray(R.array.random_names);
        ArrayList<String> list = new ArrayList<String>(Arrays.asList(names));
        adapter = new ArrayAdapter<String>(this,
                R.layout.item_layout, R.id.textView1, list);
        listView.setAdapter(adapter);
        listView.setDropListener(onDrop);
        listView.setRemoveListener(onRemove);

        DragSortController controller = new DragSortController(listView);
        controller.setDragHandleId(R.id.imageView1);
                //controller.setClickRemoveId(R.id.);
        controller.setRemoveEnabled(false);
        controller.setSortEnabled(true);
        controller.setDragInitMode(1);
                //controller.setRemoveMode(removeMode);

        listView.setFloatViewManager(controller);
        listView.setOnTouchListener(controller);
        listView.setDragEnabled(true);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
xmlns:dslv="http://schemas.android.com/apk/res/com.example.dndlist"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<com.mobeta.android.dslv.DragSortListView
    android:id="@+id/listview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="10dp"
    android:dividerHeight="5dp"
    android:paddingBottom="0dp"
    android:paddingLeft="10dp"
    android:paddingTop="0dp"
    dslv:collapsed_height="2dp"
    dslv:drag_enabled="true"
    dslv:drag_handle_id="@drawable/drag_handle" 
    dslv:drag_scroll_start="0.33"
    dslv:drag_start_mode="onMove"
    dslv:float_alpha="0.6"
    dslv:max_drag_scroll_speed="0.5"
    dslv:remove_enabled="true"
    dslv:remove_mode="flingRemove"
    dslv:slide_shuffle_speed="0.3"
    dslv:sort_enabled="true"
    dslv:track_drag_sort="false"
    dslv:use_default_controller="true" />
</RelativeLayout> 
```

# machine-learning - 相关特征和分类准确度

> ID：14813884
> 
> 赞同：39
> 
> 时间：2013-02-11T14:18:39.563
> 
> 标签：machine-learning, classification, correlation, feature-selection

想请教大家一个问题，相关特征（变量）如何影响机器学习算法的分类准确率。对于相关特征，我指的是它们之间的相关性，而不是与目标类别（即几何图形的周长和面积或教育水平和平均收入）之间的相关性。在我看来，相关特征会对分类算法的准确性产生负面影响，我想说是因为相关性使得其中一个变得无用。真的是这样吗？问题是否随分类算法类型而改变？任何关于论文和讲座的建议都非常欢迎！谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-11T14:45:40.007

相关特征本身不影响分类准确性。实际情况下的问题是，我们有有限数量的训练示例来训练分类器。对于固定数量的训练示例，增加特征数量通常会将分类准确度提高到一个点，但随着特征数量的不断增加，分类准确度最终会降低，因为我们相对于大量特征而言*采样不足。*要了解有关此含义的更多信息，请查看[维度诅咒](http://en.wikipedia.org/wiki/Curse_of_dimensionality)。

如果两个数字特征完全相关，则其中一个不会添加任何附加信息（由另一个决定）。因此，如果特征数量过多（相对于训练样本大小），则通过[特征提取](http://en.wikipedia.org/wiki/Feature_extraction)技术（例如，通过[主成分](http://en.wikipedia.org/wiki/Principal_component_analysis)）减少特征数量是有益的

相关性的效果确实取决于分类器的类型。一些非参数分类器对变量的相关性不太敏感（尽管训练时间可能会随着特征数量的增加而增加）。对于高斯最大似然等统计方法，相对于训练样本量有太多相关特征会导致分类器在原始特征空间中无法使用（样本数据的协方差矩阵变得奇异）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:43:20.590

一般来说，我会说特征越不相关，分类器的性能就会越好。给定一组高度相关的特征，可以使用 PCA 技术使它们尽可能正交，以提高分类器性能。

# ember.js - Ember 从路由过渡会阻止创建新记录

> ID：14813886
> 
> 赞同：1
> 
> 时间：2013-02-11T14:18:44.717
> 
> 标签：ember.js

直接访问可以正常工作，但是由于 Ember 之前在 Select 路由中所做的查询`/documents/new/1`，来自记录的访问已经可用。`/documents/select`

**路线**

```
this.resource('documents', function() {
  this.route('new', { path: '/new/:document_id' });
  this.route('show', { path: '/:document_id' });
  this.route('select');
}); 
```

**路线**

```
App.DocumentsSelectRoute = Ember.Route.extend({
  model: function() {
    return App.Document.find({public: true});
  }
});

App.DocumentsNewRoute = Ember.Route.extend({
    model: function (params) {
      console.log('New Model')
      var originalDoc = App.Document.find(params.document_id),
          newDoc = App.Document.createRecord();
          originalDoc.one('didLoad', function () {
               newDoc.setProperties(this.serialize());
          });
          return newDoc;
    }
}); 
```

`model`从 Select 路线来时永远不会被调用，因为`record`已经在那里加载了。我找到了一些关于这种行为的信息，但这对我的情况没有帮助[https://stackoverflow.com/a/14591851/555240](https://stackoverflow.com/a/14591851/555240)

更新：
**模板**

应用程序.handlebars

```
<li>{{#linkTo "documents.select"}}New{{/linkTo}}</li> 
```

select.handlebars

```
<ul>
{{#each doc in controller}}
  <li>
    {{#linkTo "documents.new" doc}}<div class="cover"></div>{{/linkTo}}
    {{#linkTo "documents.new" doc}}{{doc.title}}{{/linkTo}}
  </li>
{{/each}}
</ul> 
```

新的.handlebars

```
{{ model }}
{{#if model.slug }}
  {{ view App.DocumentView templateNameBinding="model.slug" class="document portrait" }}
{{ else }}
  Loading...
{{/if}} 
```

`{{ model }}`在转换到时`new.handlebars`显示`<App.Document:ember340:1>`，但`<App.Document:ember304:null>`在直接导航到时显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:14:47.687

首先，在您的资源定义中，您有：

```
this.route('new', { path: '/new/:document_id' }); 
```

这意味着您在新文档的 url 中有一个动态段，因此 Ember 期望当您访问 url /document/new/1 时，您将使用 id 为 1 的*Document*。默认行为是检索 id 为 1 的*Document*并使其可用作模型。

通常使用 RESTful 结构，您将拥有像*/document/new*这样的静态 url，它将创建一个新*Document*而不是查找现有的 Document。

但是，如果您确定要使用代码 DocumentsNewRoute.model 函数，那么我建议您更改 select.handlebars 文件中的链接。

在您的 select.handlebars 文件中，您有：

```
{{#linkTo "documents.new" doc}} 
```

这意味着它将通过*doc*对象作为 DocumentsNewRoute 路由的上下文。如果您将其更改为：

```
{{#linkTo "documents.new"}} 
```

那么它将没有上下文，因此它将在*DocumentsNewRoute*路由上执行模型函数。但是参数中不会有 id 来查找模型。所以你可以改变你的代码来简单地创建一条新记录

ps：您确定需要从数据库中检索该路由的*Document吗？*

# matlab - Matlab - 为向量提供索引

> ID：14813888
> 
> 赞同：-1
> 
> 时间：2013-02-11T14:18:52.263
> 
> 标签：matlab, vector, matrix

假设我想在中实现以下`while-loop`内容`matlab`：

```
n=10;
k=0;
while k<n
    a = 3;
    Cnew = Ck "union" a;
    if (Ck+1==0)
        Ck+1 = Cnew;
    end
end 
```

我该怎么做，尤其是索引`vectors`？如何在 matlab 中拥有以下向量 C1、C2、C3、...等？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:14:28.997

似乎您并不想生成不同的变量**名称**，例如`c1`, `c2`, ... 等。

您是否考虑过使用[元胞数组](http://www.mathworks.com/help/matlab/cell-arrays.html)？

你的代码看起来像

```
n=10;
k=1;
C{1} = [];
while k <= n
    a = 3;
    Cnew = [ C{k}, a ];
    if numel(C) < k+1 || isempty( C{k+1} ) % what you meant by Ck+1==0 ?
        C{k+1} = Cnew;
    end
end 
```

有关类似问题，请参阅[此问题。](https://stackoverflow.com/questions/14416582/changing-variable-name-in-loop)

# asp.net-mvc-3 - asp.net mvc 3，一瞥和空引用错误

> ID：14813889
> 
> 赞同：0
> 
> 时间：2013-02-11T14:19:09.670
> 
> 标签：asp.net-mvc-3, glimpse

几天前我安装了 glimpse。自从我安装它以来，我得到这个奇怪的错误，每隔一段时间就会弹出一次。我不确定错误是因为一瞥还是一瞥向我揭示了错误。无论如何，如果有人知道这个错误可能是什么以及如何解决它，我非常感谢您的帮助！！！！

堆栈：

```
 at System.Web.HttpContextWrapper..ctor(HttpContext httpContext)
   at Glimpse.AspNet.AspNetFrameworkProvider.get_HttpRequestStore()
   at Glimpse.Core.Framework.GlimpseRuntime.GetTabStore(String tabName)
   at Glimpse.Core.Extensibility.TabSetupContext.GetTabStore()
   at Glimpse.AspNet.GlimpseTraceListener.get_FirstWatch()
   at Glimpse.AspNet.GlimpseTraceListener.InternalWrite(String message, String category)
   at System.Diagnostics.TraceInternal.TraceEvent(TraceEventType eventType, Int32 id, String format, Object[] args)
   at Elmah.ErrorMailModule.ReportError(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
   at System.Threading.ThreadPoolWorkQueue.Dispatch() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:58:55.430

这已被验证为 Glimpse 中的错误。

您可以[在 Glimpse GitHub 问题跟踪器上跟踪修复的进度](https://github.com/Glimpse/Glimpse/issues/248)。

我希望这个错误会在接下来的几天内得到修复，并且可以在[每晚构建](http://www.myget.org/F/glimpsenightly/)和[下一个版本](http://nuget.org/packages/Glimpse/)中使用。

**2013 年 2 月 13 日更新**

此问题现已修复，并将在不久后发布的 Glimpse 1.0 稳定版中提供。如果您想以正确的方式使用它，请从 2 月 13 日起获取[夜间版本](http://www.myget.org/F/glimpsenightly/)。

# javascript - 全屏 HTML5 视频进度条不拉伸

> ID：14813893
> 
> 赞同：3
> 
> 时间：2013-02-11T14:19:14.210
> 
> 标签：javascript, html, css, html5-video

我已经制作了自定义视频控件，但是当视频播放时，我的进度条没有在全屏中相应地拉伸。因此，当视频到达结尾时，条形图大约是宽度的 1/3。

我相信这与将 barSize 设置为等于 fullScreen 之前的容器大小有关。条形尺寸设置为百分比，因此它会根据包装进行调整。我不知道如何使用 JS 使进度条适应包含栏。（不能使用 JQuery）

JS：

```
 bar = document.getElementById('defaultBar');
        barSize = bar.offsetWidth;
        progress = document.getElementById('progressBar');

function move(e){
    if(!media.paused && !media.ended){
        var mouseX= e.offsetX;
        newTime=((mouseX*media.duration)/barSize);
        media.currentTime=newTime;
        progress.style.width=mouseX+'px';
    }
} 
```

HTML：

```
<div id="defaultBar">
     <div id="progressBar"></div>
</div> 
```

CSS：

```
#defaultBar{
position:relative;
float:left;
width:59.5%;
height: 22px;
padding:0px;
border: 0px solid black;
background:yellow;
margin: 0px;
cursor: pointer;
}

#progressBar{
position:relative;
float:left;
height: 50%;
margin: 5px 0px;
border: 0px solid black;
background:green;
cursor: pointer;
} 
```

不是 fullScreen 你可以看到进度条几乎在容器的末尾（黄色）： ![在此处输入图像描述](../Images/dda2828fa2ce5ea50e242d83b9c1eaf7.png)

视频中的相同位置，进度条在容器末尾附近没有： ![在此处输入图像描述](../Images/0fa68efa7955890e607778cc48bd2735.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:32:03.797

这就是我解决它的方法：

我在更新函数中声明了 barSize 变量等于包含，然后我设置了一个间隔以连续运行更新函数，以便在包含更改大小（全屏/退出全屏）时调整进度条的大小。我觉得 setInterval 可能不是解决这个问题的最佳方法，因为它在预告片页面之外运行（没有视频播放器），但它似乎并没有影响我页面的性能，所以它是解决方案我一起去了。但是，在控制台中，您会看到 bar.offsetWidth 未定义错误不断增加，但就像我说的那样，性能不会受到影响。

```
updateBar=setInterval(update, 50);

function update(){
    barSize = bar.offsetWidth;
    if(!media.ended){
        var size = parseInt((media.currentTime/media.duration)*barSize);
        progress.style.width = size +'px';
    }else{
        progress.style.width='0px';
        playButton.firstChild.src = "images/icons/play.png";
        window.clearInterval(updateBar);
    }
    updateTimeDisplay();
} 
```

# ios - IOS：按键眩光

> ID：14813894
> 
> 赞同：0
> 
> 时间：2013-02-11T14:19:18.810
> 
> 标签：ios, uibutton, uibarbuttonitem

我在某些应用程序中看到，当我按下按钮时会比较眩光，获得此结果的方法是什么？我注意到它是在条形按钮上实现的，但是在普通的 UIButton 上是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:36:30.577

您可能指的是 的以下属性`UIButton`：

`[button setShowsTouchWhenHighlighted:YES]`

# queue - CocoaAsyncSocket / GCDAsyncSocket 在队列上的写入之间添加延迟

> ID：14813895
> 
> 赞同：0
> 
> 时间：2013-02-11T14:19:23.693
> 
> 标签：queue, delay, cocoaasyncsocket, gcdasyncsocket

我有以下功能：

```
if (socket==nil)
  socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];
if (elBuffer==nil) 
  elBuffer = [[NSMutableData alloc] init];
}

if ([socket isDisconnected]) {
  NSError *err = nil;
  [socket connectToHost:elControlador.ip onPort:9761 error:&err]
}

[socket writeData:@"A01" withTimeout:30 tag:1];
[socket writeData:@"A02" withTimeout:30 tag:1];
[socket writeData:@"A03" withTimeout:30 tag:1];
[socket writeData:@"A04" withTimeout:30 tag:1];
[socket writeData:@"A05" withTimeout:30 tag:1];
[socket readDataWithTimeout:30 buffer:elBuffer bufferOffset:0 maxLength:-1 tag:1]; 
```

它工作得很好，除了套接字服务器在两次写入之间需要一秒钟左右的时间才能工作。我想知道是否有人遇到过同样的问题，并且可以阐明如何实现这一目标。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:50:55.260

我能够使用以下方法使其正常工作：

```
int i=0;
for(id aItem in aIDs) {
  NSString *directCommand = [NSString stringWithFormat:@"A%@",aItem];
  [self performSelector:@selector(fSend:) withObject:directCommand afterDelay:(2.0*i)];
  i++;
}
[socket readDataWithTimeout:30 buffer:elBuffer bufferOffset:0 maxLength:-1 tag:1];

-(void)fSend : (NSString *)aCommand {
  [socket writeData:aCommand withTimeout:30 tag:1];
} 
```

这让我在执行 writeData 之间有 2 秒的时间，而不必冻结应用程序，也不会用写入淹没我的设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T04:42:41.990

如果您希望客户端在写入这些字符串之间等待：

*   将它们放入一个数组中。
*   使用重复`NSTimer`
*   在定时器回调中，一次写一行，直到数组用完，然后使定时器失效。

# c# - 无法在 DataGrid 中对日期列进行排序

> ID：14813901
> 
> 赞同：3
> 
> 时间：2013-02-11T14:19:38.587
> 
> 标签：c#, wpf, sorting, datagrid, datepicker

`DatePicker`我添加了一个带有 的日期列，`DataGrid`并且无法通过单击来对该列进行排序`Header`。

我想这与我的日期格式有关，但我找不到解决方案。

我的代码是：

```
<Grid>
    <Grid.Resources>
        <DataTemplate x:Key="DateTemplate">
            <TextBlock FontSize="12" Text="{Binding Date, StringFormat={}{0:dd\-MM\-yyyy}}"/>
        </DataTemplate>
        <DataTemplate x:Key="EditingDateTemplate">
            <DatePicker SelectedDate="{Binding Date}" />
        </DataTemplate>
    </Grid.Resources>
    <DataGrid AutoGenerateColumns="False" HorizontalAlignment="Stretch" Name="trainingsGrid" VerticalAlignment="Stretch" Margin="12,42,12,12">
        <DataGrid.Columns>
            <DataGridTemplateColumn CanUserSort="True" Header="Data" CellTemplate="{StaticResource DateTemplate}" CellEditingTemplate="{StaticResource EditingDateTemplate}" />
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:52:07.147

Try setting the [SortMemberPath](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcolumn.sortmemberpath%28v=vs.100%29.aspx).

# javascript - Three.js：获取相机正在看的方向

> ID：14813902
> 
> 赞同：24
> 
> 时间：2013-02-11T14:19:38.987
> 
> 标签：javascript, html, vector, three.js

我正在使用 html5 和 THREE.js 创建游戏，并且我有一个以“YXZ”的欧拉顺序旋转的相机。

这样相机就可以像头部一样上下左右旋转。就像第一人称视角一样。

使用此欧拉顺序，不使用 camera.rotation 中的 z 属性（始终为 0）。x 用于以弧度指定间距或纬度，y 用于描述经度。

我有许多目标以球形方式围绕用户移动，相机始终位于该球体的中心。假设球体的半径为 1000。

我的目标是计算相机正在看的位置和目标位置之间的角度。

我写了这段代码来计算两个向量之间的角度：

```
var A = new THREE.Vector3(1,0,0);
var B = new THREE.Vector3(0,1,0);

var theta = Math.acos( A.dot(B) / A.length() / B.length() );

// theta = PI/2; 
```

我有目标的向量（targets[0].position）。

问题是我无法找到一种方法来获取相机正在寻找的矢量。

我查看了 Vector3.applyProjection 和 applyEuler 方法，并玩过但仍然无法获得任何好的结果。

我相信在进行任何预测之前，必须首先将欧拉顺序改回“XYZ”？我已经尝试过了，但我不知道该怎么做，文档很难理解。

假设如果相机直接向右看，那么我需要得到一个向量，该向量在当前旋转方向上距中心的 RADIUS 距离。

所以我最终会得到 2 个向量，我可以对它们进行计算！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-11T16:33:01.020

相机正在向下看它的内部负 z 轴。因此，创建一个指向负 z 轴的向量：

```
var vector = new THREE.Vector3( 0, 0, - 1 ); 
```

现在，对应用于相机的向量应用相同的旋转：

```
vector.applyQuaternion( camera.quaternion ); 
```

您可以像这样获得与目标的弧度角：

```
angle = vector.angleTo( target.position ); 
```

* * *

编辑：您现在可以得到相机看起来像这样的方向：

```
var vector = new THREE.Vector3(); // create once and reuse it!
...
camera.getWorldDirection( vector ); 
```

注意：通过传入`vector`存储结果的方法，该方法不必在`THREE.Vector3`每次调用该方法时都实例化一个新方法。

更新为three.js r.107

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-12-17T08:29:29.913

我花了很长时间试图弄清楚船长明显的问题。

这就是它最终对我有用的方式：

```
 vector = camera.getWorldDirection();
    theta = Math.atan2(vector.x,vector.z); 
```

theta 以弧度为单位。这就是我如何让我的游戏角色以与摄像机相同的方式面对。getWorldDirection() 是相机上一个相当新的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-20T21:44:12.193

fluffybunny 搞定了。对他的绝妙想法稍作改动，您就可以获得以度数为单位的旋转：

```
var vector = camera.getWorldDirection();
angle = THREE.Math.radToDeg( Math.atan2(vector.x,vector.z) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-01T22:16:50.500

我无法发表评论，但 fluffybunny 的回答非常有效。`getWorldDirection()`然后将该向量更改为弧度是要走的路。

# java - 无法实例化 bean 类 [org.hibernate.cfg.AnnotationConfiguration]：

> ID：14813906
> 
> 赞同：2
> 
> 时间：2013-02-11T14:19:46.097
> 
> 标签：java, tomcat, servlets

我用 servlet 在 eclipse 中创建了一个简单的 Dynamic 项目，并试图让 hibernate 使用它

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    PrintWriter out = response.getWriter();
    out.println("Hello World");
    getIntravues();
}

/**
 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
 */
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
}

private ArrayList<String> getIntravues() {
    // this method will use hibernate to get the names of intravues and their ip addresses
    ArrayList<String> list = new ArrayList<String>();

    Intravue intravue = new Intravue();
    intravue.setIvid(11);
    intravue.setName("hibernate tes");
    ApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml");
    QueriesClass queriesClass = (QueriesClass) ctx.getBean("TestThree");
    queriesClass.saveInterVue(intravue);
} 
```

我的 ApplicationContext.xml 类

```
 <?xml version="1.0" encoding="UTF-8"?>

    <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-2.0.xsd"
default-lazy-init="true">

<!-- Datasource for LOCAL database connection -->

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/dashboardsupervisor" />
    <property name="username" value="root" />
    <property name="password" value="0502" />
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="annotatedClasses">
        <list>

            <value>svr.Intravue</value>

        </list>
    </property>
</bean>
<bean id="TestThree" class="svr.QueriesClass">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

我的构建路径

![在此处输入图像描述](../Images/692ad06693914de10d9ccb7d0eff3bd4.png)

我的 Tomcat 构建路径

![在此处输入图像描述](../Images/1be5e6264cf741a3bfcf85179492f771.png)

错误是：

```
 nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.hibernate.cfg.AnnotationConfiguration]: Constructor threw exception; nested exception is java.lang.ExceptionInInitializerError 
```

# html - 由于 nowrap 空白设置，元素超出了父 div 的宽度

> ID：14813917
> 
> 赞同：1
> 
> 时间：2013-02-11T14:20:16.710
> 
> 标签：html, css, overflow, whitespace

```
<div class="external_wall_right_col_sub_ad">
<div class="external_wall_right_col_sub_ad_img">
<h4>
<a href="http://localhost/PublishWall/oglasnik/oglas/ogled/2312/Razgorsek-Sedezne-garniture-Bari">Razgoršek, Sedežne garniture, Bari</a>
</h4>
<p></p>
</div> 
```

我有这个html结构。主包装的宽度设置为 165 像素。当我在 h4 a 中将空白更改为 nowrap 时，似乎换行的宽度不再适用，请查看下图（红色轮廓的标题应停在黑线处）。

![在此处输入图像描述](../Images/2aa3b395146b23056f90a747e9af7dd1.png)

我已将溢出设置为隐藏。当文本超过宽度时如何使文本停止

# c++ - 无法删除 unsigned char* 数组

> ID：14813918
> 
> 赞同：2
> 
> 时间：2013-02-11T14:20:17.527
> 
> 标签：c++, object, memory, heap-memory

在我的一个对象中，我创建了一个无符号字符数组成员来存储一些图像数据：

```
 unsigned char* imageData; 
```

在构造函数中我用 new 初始化它：

```
 MyObject::MyObject()
    {
        int imageSize = 6054400;
        imageData = new unsigned char[imageSize];
    } 
```

imageData 在整个循环过程中被填充。

这个对象（MyObject）直到循环结束才会被删除，但我需要在循环中途删除 imageData。所以我刚刚创建了这个函数：

```
 void MyObject::DeleteAllMembers
    {
        delete [] imageData;
    } 
```

我在循环结束时调用它：

```
 theObj.DeleteAllMembers(); 
```

问题是每次我的程序到达代码行时：

```
 delete [] imageData; 
```

它崩溃了，留下这个错误信息：

![错误](../Images/da222c255b3f74ba21fe8679f0d2e244.png)

在这一点上，我不知道为什么会这样。

我尝试过的一些事情是：

*   用 imageSize+1 而不是仅仅用 imageSize 初始化 imageData
*   将删除命令移动到析构函数并手动删除每个通过循环运行的对象
*   使用 delete imageData 而不是 delete [] imageData，即使我相当确定我需要使用 delete []
*   `imageData = 0`删除后我试过做，不幸的是我的程序仍然崩溃`delete [] imageData`。
*   我试过使用`memset(&imageData, 0, imageSize);`，但这给了我一个访问冲突错误。

每次，程序仍然在同一行崩溃。我知道有人在查看我的代码时在想“你这个白痴，你所要做的就是____________________”。有人可以告诉我我做错了什么吗？

**编辑：**对不起，我说的不正确。我每次在循环开始时创建这个对象并在**循环****结束**时被删除，我不知道为什么我在程序的开始和结束时说。

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T14:25:14.107

您可能需要稍微添加以防止多次删除同一指针：

```
void MyObject::DeleteAllMembers
{
    delete [] imageData;
    imageData = 0; // <-- here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T14:22:46.010

嗯？

如果仅`new[]`在构造对象时分配 (with )，则不能`delete[]`在循环中多次分配。你只能`delete[]`做一次，再次传递相同的指针`delete[]`会失败。

此外，它没有任何意义：如果您只在对象构造时*创建*一次数组，那么为什么需要多次*销毁它呢？*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:33:47.053

如果您需要重新使用它，请重置您的缓冲区而不是在循环中删除它。以 memset 为例。

```
memset(&imageData, 0, imageSize); 
```

然后，当您不再需要它时将其删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T14:37:44.013

你的问题有点不清楚，但有几点：

*   如果 'imageData' 是 'MyObject' 的成员，那么为什么要从 OUTSIDE 'MyObject' 如此明确地管理它的破坏呢？

*   如果“imageData”在“循环”的每次迭代中都被销毁，那么它必须在再次使用（和销毁）之前再次创建。

*   “循环”在哪里？如果它在作为“MyObject”成员的函数中，或者没有改变您管理“imageData”的方式

*   如果大小发生变化，您只需要在“循环”的每次迭代中删除并重新分配数组。

*   如果“imageData”最终在“循环”范围内被创建和销毁，为什么它会成为类成员？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T14:49:40.500

我怀疑你违反了[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。

这个问题的最佳解决方案是完全避免它，例如使用`std::vector`. 参见“[零规则](http://flamingdangerzone.com/cxx11/2012/08/15/rule-of-zero.html)”。

```
class MyObject 
{
  std::vector<unsigned char> imageData;
  ...
};

MyObject::MyObject() : imageData(6054400) {}

void MyObject::DeleteAllMembers
{
  imageData.resize(0);
} 
```**

# google-drive-api - 使用 .NET 客户端库在大于 ~10MB 的文件上上传 Google Drive 失败

> ID：14813924
> 
> 赞同：3
> 
> 时间：2013-02-11T14:21:00.510
> 
> 标签：google-drive-api, google-api-dotnet-client

我们编写了一个 .Net 控制台应用程序，可将文件上传到特定的 google Drive 帐户。该代码使用谷歌自己的.net 客户端库。代码的核心是：-

```
FilesResource.InsertMediaUpload upload = service.Files.Insert(metadata, fStream, mimeType);
upload.Upload();
metadataReturned = upload.ResponseBody; 
```

该应用程序适用于小于某个限制（似乎约为 10MB）的所有文件。对于较大的文件，上传失败并出现异常，消息为“请求已中止：请求已取消。”

我们将不胜感激有关如何上传更大文件的任何建议，或对异常的任何解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:13:05.593

它看起来像一个错误。您能否在[问题跟踪器](https://code.google.com/p/google-api-dotnet-client/issues/list)中打开一个问题（这是报告错误、请求等的最佳方式），并尝试提供尽可能多的信息，例如 Google 客户端库的版本、您运行代码的操作系统， ETC。

我会尽快进入它。

谢谢你，埃亚尔

# c++ - apache构建问题

> ID：14813927
> 
> 赞同：0
> 
> 时间：2013-02-11T14:21:07.463
> 
> 标签：c++, apache, apache2

我在尝试构建时一直看到这些错误，我正在尝试构建一个独立的可执行文件，但收效甚微，有人可以建议吗？

```
 undefined reference to `ap_get_server_name'
 undefined reference to `apreq_handle_apache2'
 undefined reference to `ap_hook_child_init'
 undefined reference to `ap_get_server_port'
 undefined reference to `ap_hook_handler'
 undefined reference to `ap_hook_post_config'
 undefined reference to `ap_log_error_'
 undefined reference to `ap_get_brigade'
 undefined reference to `ap_rwrite' 
```

这主要是我的 makefile 包含的内容：

```
all:libBidRequestTest.so InitTest

libBidRequestTest.so:
    g++ -g -fPIC -shared $(OBJS) -lxerces-c -lrtbshm -lb64  -lapr-1  -laprutil-1   -lapreq2 -lpcre -lrt -lpthread -lboost_date_time -lboost_thread -lzdb -lOpenRTBv1 -lOpenRTBv2 -lAdX -lRubicon -lIP2Location -L$(PREFIX)/lib  -L../common/shm -L../common/base64 -o /usr/local/infinity/lib/$@

InitTest: InitTest.cpp
    g++ -g -fPIC $< $(APXS_CFLAGS) $(APXS_CFLAGS_SHLIB) $(INCLUDES) -I$(APXS_INCLUDEDIR) $(INCLUDES)  -lboost_filesystem -lboost_unit_test_framework -lBidRequestTest -ldl -lboost_system  -L/usr/local/infinity/apache/lib -o $@ 
```

# c# - 为此操作创建一个类

> ID：14813928
> 
> 赞同：-1
> 
> 时间：2013-02-11T14:21:08.217
> 
> 标签：c#, class, executescalar

我正在从 mysqldatabase 中获取数据并在 C# 应用程序中输入变量。我正在使用这段代码：

```
int forcatime;
string comandomedia = "select avg(forca_jogador) from jogadores where nome_time = " + time;

ocon.ConnectionString = con;
MySqlCommand media = new MySqlCommand(comandomedia, ocon);
ocon.Open();
forcatime = Convert.ToInt32(media.ExecuteScalar());
ocon.Close(); 
```

完成此操作后，我将“forcatime”转换为 ToString 并将其放入 MessageBox 中。

我想知道是否有办法为此操作创建一个类，因为每次我必须这样做时，我都会一遍又一遍地编写所有代码。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:24:15.863

就像是...

```
int result = new DataLayerHelper().RunQuery();
MessageBox.Show(result.ToString()); 
```

[...]

```
public class DataLayerHelper
{
    public DataLayerHelper() { }

    public int RunQuery()
    {
        int forcatime;
        string comandomedia = "select avg(forca_jogador) from jogadores where nome_time = " + time;
        ocon.ConnectionString = con;
        MySqlCommand media = new MySqlCommand(comandomedia, ocon);
        ocon.Open();//consider a using statement
        forcatime = Convert.ToInt32(media.ExecuteScalar());
        ocon.Close();

        return forcatime;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:26:10.170

创建类时应牢记它们打算封装的逻辑。

你需要说出这是在做什么，为什么你把它扔到屏幕上......等等

另外，您的代码中可能存在 SQL 注入，具体取决于时间的来源。

PS我不能快速打字，因为这里有些人很抱歉，如果这没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:24:29.440

你不为此编写一个类，你为此编写一个函数。

```
public void Foo(params)  
{
    //your code here
} 
```

您要做的是将它放在一个“实用程序”类中，该类由具有私有构造函数的静态函数组成。

例子：

```
public class DBUtilities  
{  
       private DBUtilities(){}  
       public static void Foo(params)  
       {  
        int forcatime;
    string comandomedia = "select avg(forca_jogador) from jogadores where nome_time = " + time;
    ocon.ConnectionString = con;
    MySqlCommand media = new MySqlCommand(comandomedia, ocon);
    ocon.Open();
    forcatime = Convert.ToInt32(media.ExecuteScalar());
    ocon.Close();
       }  
} 
```

# php - PHP：在字符串中每第 4 个字符替换 3 个字符

> ID：14813934
> 
> 赞同：2
> 
> 时间：2013-02-11T14:21:33.383
> 
> 标签：php, string, replace, intervals

我有一个字符串，我想知道如何在 4 个字符的间隔中保留 1 个字符。

```
$string = "bc7yad3odf0x"; // and goes like this.. 
```

我希望我的新字符串是：

```
yox 
```

它来自~~bc7~~ y ~~ad3~~ o ~~df0~~ x

要省略的三个字符始终类似于 char-char-number。

编辑：谢谢大家的回答。我测试了你所有的答案，它们对我来说很好，除了 trisweb 的 preg_replace() 解决方案，我得到“未知修饰符'g'”。我接受 Bhavik Shah 的回答，因为我认为这是我理解的最简单的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T14:30:11.330

只是它

```
preg_replace("/\w{3}(\w)/","$1",$string); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T14:26:46.323

```
$nstr = "";
$str_array = array();

//split string in chunks of 4-char strings
$str_array = str_split($string, 4);

//loop through all elements of array and take the required character
foreach($str_array as $key => $value){
    $nstr .= $value[3];
}
echo $nstr; 
```

[**有关str_split**](http://php.net/manual/en/function.str-split.php)的更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:26:45.190

```
$str = "bc7yad3odf0x";
$final_str = "";
$len = strlen($str);

for($i = 3; $i < $len; $i = $i+4) {
    $final_str .= substr($str, $i, 1)." ";
}

echo $final_str; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T14:27:28.797

```
$newString = implode(
    '',
    array_map(
        function($value) {
            return substr($value,-1);
        },
        str_split($string,4)
    )
); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T14:29:11.493

```
$string = "bc7yad3odf0x";
$new_string = "";
$iterations = ceil(strlen($string)/4);

for ($i=1;$i <= $iterations; $i++)
{
    $new_string .= substr($string, $i*4-1, 1);
}

print $new_string; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-11T14:29:54.063

似乎是正则表达式的工作！

```
$kept = preg_replace('/[a-z]{2}[0-9]/gi', "", $string); 
```

我们在这里所做的是将出现的“字母-字母-数字”替换为空白字符串，并删除它们。

如果字符串始终是您所说的形式，那么它应该可以正常工作。但是，如果您总是只想保留第 4 个字符，则可以使用：

```
$kept = preg_replace('/.{3}(.)/gi', "$1", $string); 
```

或者，要使用类似的使用反向引用来使第一种形式更严格的想法，请使用：

```
$kept = preg_replace('/[a-z]{2}[0-9](.)/gi', "$1", $string); 
```

有关在 PHP 中使用正则表达式的更多信息，[请参阅这篇不错的文章。](http://www.noupe.com/php/php-regular-expressions.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-11T14:35:44.913

在 php 中，您可以访问像数组一样的字符串

例子：

```
$text = "abcde";
echo $text[1]; // b 
```

所以你可以把每四个字符连接到你的最终字符串。这是我目前能想到的最简单的方法。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-11T14:38:18.680

更好地使用正则表达式：

```
$var = "bc7yad3odf0x";

$var = preg_replace("/[a-z]{2}[0-9]([a-z])/i","$1",$var);

echo $var;

$var = "bc7yad3odf0x";

$var = preg_replace("/[a-z]{2}[0-9]/i","",$var);

echo $var; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-11T14:49:55.860

试试这个

```
$y = 3;
for($i=0; $i<strlen($string); $i++){
    if($y < strlen($string)){
        $out .= substr($string,$y,1);
        $y = $y+4;
    }else{
        break;
    }
}
echo $out; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-02-11T14:52:40.643

很简单的for循环

```
$ans = "";
for($i = 3, $l = strlen($s); $i < $l; $i += 4)
    $ans .= $s[$i]; 
```

# java - 安装 Apache Tomcat

> ID：14813936
> 
> 赞同：0
> 
> 时间：2013-02-11T14:21:40.747
> 
> 标签：java, linux, apache, tomcat

我已按照本教程（[http://www.mulesoft.com/tomcat-linux#.URj9weCy1Nh](http://www.mulesoft.com/tomcat-linux#.URj9weCy1Nh)）使用以下环境变量在 debian wheezy 上安装 tomcat：

```
Using CATALINA_BASE:   /usr/local/apache-tomcat-7.0.35
Using CATALINA_HOME:   /usr/local/apache-tomcat-7.0.35
Using CATALINA_TMPDIR: /usr/local/apache-tomcat-7.0.35/temp
Using JRE_HOME:        /usr/lib/jvm/java-6-openjdk-amd64/jre
Using CLASSPATH:       /usr/local/apache-tomcat-7.0.35/bin/bootstrap.jar:/usr/local/apache-   tomcat-7.0.35/bin/tomcat-juli.jar 
```

我给了 tomcat 用户一个 bash 登录名，当我运行 ./startup.sh 时没有任何反应，也没有打开端口。运行 version.sh 给了我：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/catalina/util/ServerInfo
 Caused by: java.lang.ClassNotFoundException: org.apache.catalina.util.ServerInfo
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266) 
```

找不到主类：org.apache.catalina.util.ServerInfo。程序将会退出。

任何想法缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:49:10.187

*   安装完整，兼容`JDK from Oracle (SUN) or IBM`
*   将`JAVA_HOME`环境变量设置为兼容 JDK 的根目录

> $`JAVA_HOME=/usr/java/jdk1.6.0_01`
> 
> $`export JAVA_HOME`

*   将兼容的 JDK 的 bin 目录放在`PATH` 环境变量的前面。

> `$ PATH=$JAVA_HOME/bin:$PATH`
> 
> `$ export PATH`

*   找到不兼容的 JDK 的 java 可执行文件，通常 `/usr/bin/java`并将其移开，如下所示：

> $`cd /usr/java`
> 
> $`mv java java.moved`

*   然后，检查以确保您的 java 可执行文件指向您已安装的 JDK：

> `$ which java`
> 
> `/usr/java/jdk1.6.0_01/bin/java`

# asp.net-mvc - Html.Editor 用于 MVC4 中的模型，而不是属性

> ID：14813938
> 
> 赞同：0
> 
> 时间：2013-02-11T14:21:46.630
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有以下看法：

```
<fieldset>
        <legend>CreateCardViewModel</legend>

        <div class="editor-field">
            @Html.EditorFor(model => model.SetId)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.DateCreated)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.DateCreated)
            @Html.ValidationMessageFor(model => model.DateCreated)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.IsReady)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.IsReady)
            @Html.ValidationMessageFor(model => model.IsReady)
        </div>

        @foreach (var side in Model.Sides)
        {
            @Html.EditorFor(model => model.Sides[side.SideId])
        }

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset> 
```

这个片段：

```
@foreach (var side in Model.Sides)
            {
                @Html.EditorFor(model => model.Sides[side.SideId])
            } 
```

显示 Sides 模型的所有属性的可编辑字段。定义该列表的哪些字段应该是可编辑的最合适的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:29:45.177

改用 for 循环：

```
@for (int i = 0; i < Model.Sides.Count; i++) {
   @Html.EditorFor(x => x.Sides[i])
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:40:35.243

从头开始 - 我意识到我可以做到以下几点：

```
@for (int i = 0; i < Model.Sides.Count; i++)
        {
            @Html.EditorFor(x => x.Sides[i].Content)
            @Html.EditorFor(x => x.Sides[i].IsFront)
            @Html.EditorFor(x => x.Sides[i].Stage)
        } 
```

# fix-protocol - FIX 安全定义请求 (MsgType=c) 和安全列表请求 (MsgType=x) 之间的差异

> ID：14813941
> 
> 赞同：4
> 
> 时间：2013-02-11T14:21:58.210
> 
> 标签：fix-protocol

在 FIX 中，安全定义请求 (MsgType=c) 和安全列表请求 (MsgType=x) 有什么区别

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T18:46:34.497

该[文档](http://fixprotocol.org/FIXimate3.0/)说明了以下内容：

> 证券列表请求消息用于从交易对手返回符合请求中提供的标准的证券列表

和

> 安全定义请求消息用于以下用途：
> 
> 1.  请求与第二方交易特定证券。请求证券可以定义为由一个或多个工具分支组成的多分支证券。
>     
>     
> 2.  为单个细分市场请求一组单独的证券。
>     
>     
> 3.  请求所有证券，独立于细分市场。

两种消息类型的声明意图之间似乎存在一些重叠。

鉴于 FIX 协议在实际应用中的普遍模糊性，您的最佳做法是检查预期交易对手的文档。奇怪的是，他们有非常特定的方式来使用每种消息类型，而且他们甚至可能不支持两者。

如果您正在设计自己的 FIX 界面，那么您可以根据需要灵活地使用这些消息中的一个或两个。你不必同时支持他们两个。

# asp.net - 删除数据网格中的行

> ID：14813946
> 
> 赞同：0
> 
> 时间：2013-02-11T14:22:13.327
> 
> 标签：asp.net, vb.net, datagrid

在 ASP/VB.net 中

在我的 DATAGRID 中，我想删除 Grid_ItemDataBound 中的一行

我已经尝试过 [如何从数据网格中删除行？](https://stackoverflow.com/questions/3814819/how-to-remove-row-from-datagrid) 但这不是我真正需要的吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:19:08.760

如果DataGrid 绑定到源，即数据表从源（数据表）中删除数据行，然后将网格重新绑定到数据源。

```
...
    dtable.rows(i).Delete
    myDataGrid.DataSource = dtable
    myDataGrid.DataBind
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:36:15.310

使用[DataGrid.ItemCommand 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.itemcommand.aspx)

示例代码：

```
 void ItemsGrid_Command(Object sender, DataGridCommandEventArgs e)
  {

     switch(((LinkButton)e.CommandSource).CommandName)
     {

        case "Delete":
           DeleteItem(e);
           break;

        // Add other cases here, if there are multiple ButtonColumns in 
        // the DataGrid control.

        default:
           // Do nothing.
           break;

     }

  }

  void DeleteItem(DataGridCommandEventArgs e)
  {

     // e.Item is the table row where the command is raised. For bound
     // columns, the value is stored in the Text property of a TableCell.
     TableCell itemCell = e.Item.Cells[2];
     string item = itemCell.Text;

     // Remove the selected item from the data source.         
     CartView.RowFilter = "Item='" + item + "'";
     if (CartView.Count > 0) 
     {     
        CartView.Delete(0);
     }
     CartView.RowFilter = "";

     // Rebind the data source to refresh the DataGrid control.
     BindGrid();

  } 
```

# foreach - Struts 显示标签 foreach

> ID：14813948
> 
> 赞同：0
> 
> 时间：2013-02-11T14:22:19.717
> 
> 标签：foreach, struts

`paramspermsForm.objects`是 BO 的 Arraylist。 `people`是每个 BO 内部的 ArrayList。我似乎无法输出人员数组列表中的项目。角色名输出正常。

```
<display:table name="${paramspermsForm.objects}"  sort="list" class="result" cellpadding="5" cellspacing="0" style="width: 775px;"> 
    <display:column property="rolename" title="Role"  sortable="true" class="smalltext border33"/>
    <c:if test='${CLabel=="Criterion"}'>
        <c:forTokens var ="permission"  items="A,B" delims =",">
            <display:column  title="${permission}"  sortable="true" class="smalltext border33">
                <c:forEach items="${people}" var="item" varStatus="loop">
                    <c:out value="${item}"/>
                </c:forEach>
            </display:column>
        </c:forTokens>
     </c:if>        
</display:table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:12:36.393

首先，您的代码无效。您打开了一个`<c:forEach>`，但它没有关闭。

其次，要访问表格的当前行元素，您需要为表格分配一个 uid，该表格将保存当前元素：

```
<display:table name="${paramspermsForm.objects}" uid="bo" ...>
    ...
    <c:forEach items="${bo.people}">
        ... 
```

这是[记录在案](http://www.displaytag.org/1.2/displaytag/tagreference.html#display-el%3atable)的：

# angularjs - .get() 网址不是我所期望的

> ID：14813952
> 
> 赞同：2
> 
> 时间：2013-02-11T14:22:25.410
> 
> 标签：angularjs

我第一次尝试 angular.js。我的休息服务配置如下：

```
get('/api/users') //returns a JSON Array with all the users
get('/api/users/:id') //returns a JSON object with the requested ID 
```

我的角度控制器设置如下：

```
UserCtrl.factory('User', function($resource) {
    return $resource('/api/users/:id', { id: '@id' }, { update: { method: 'PUT' } });
});

var EditCtrl = function($scope, $location, $routeParams, User){
    var id = $routeParams._id;
    $scope.user = User.get({id: id});
}; 
```

我的问题是当我跑步时

```
User.get({id: id}) 
```

请求的 URL 是：

```
http://localhost:8080/api/users?id=389498473294 
```

我希望它是

```
http://localhost:8080/api/users/389498473294 
```

我可以使用它来做到这一点`$http`，但我认为`.get()`应该能够做到......

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T14:51:35.297

您使用前缀 @ 定义 id 参数的默认值，这意味着该值必须取自作为参数传递给调用的对象。在 get 调用中没有发送对象，因此 id 参数被分配了空值。作为已分配的 id 参数，您传递的值将作为查询参数附加。有关这一点的解释，请查看Usage/Param defaults 段落下的 Angular[文档。](http://docs.angularjs.org/api/ngResource.%24resource)声明服务的正确方式应该是：

> UserCtrl.factory('User', function($resource) { return $resource('/api/users/:id', { id: '' }, { update: { method: 'PUT' } }); }) ;

# linux - 如何在 Linux 虚拟网桥中创建 DHCP 侦听规则

> ID：14813954
> 
> 赞同：0
> 
> 时间：2013-02-11T14:22:34.787
> 
> 标签：linux, dhcp, ebtables

我有一台运行 DHCP 服务器和虚拟网桥的 Linux 服务器 (10.0.0.1)。虚拟网桥连接 4 个以太网接口，作为连接我的用户的主交换机。

如果某些用户不小心创建了一个恶意 DHCP 服务器，该服务器在他们到达主 DHCP 服务器之前回答了 DHCP 请求，就会出现问题。

因此，我想阻止所有进入虚拟交换机端口之间的 DHCP 请求，但不阻止发往/来自主 DHCP 服务器的请求。我可以设置哪些 ebtables 规则来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-09T18:59:50.627

正确的方法是使用 ebtable 的过滤器链，通常包括转发和输出，规则集匹配 UDP 端口 67:68。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:18:34.237

您必须在交换机上阻止 DHCP 响应，这是唯一的方法，因为数据包不通过路由器（在本例中为 linux 服务器），某些交换机可以选择进行 DHCP 侦听。这会过滤来自端口的 DHCP 响应。

我希望对您有所帮助

# c# - 如何在 WPF 文本框中只接受整数

> ID：14813960
> 
> 赞同：6
> 
> 时间：2013-02-11T14:22:53.370
> 
> 标签：c#, wpf, xaml

你知道如何限制用户在文本框中输入，这个文本框只接受整数吗？顺便说一句，我正在为 Windows 8 开发。我已经尝试过从 SO 和 Google 搜索的内容，但它不起作用，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T14:36:03.493

如果您不想下载 WPF 工具包（它同时具有 IntegerUpDown 控件或 MaskedTextBox），您可以自己实现它，改编自这篇关于[Masked TextBox In WPF](https://www.c-sharpcorner.com/uploadfile/rahul4_saxena/masked-textbox-in-wpf/)的文章，使用[**`UIElement.PreviewTextInput`**](https://docs.microsoft.com/en-us/dotnet/api/system.windows.uielement.previewtextinput?view=netframework-4.7.2)和[**`DataObject.Pasting`**](https://docs.microsoft.com/en-us/dotnet/api/system.windows.dataobject.pasting?view=netframework-4.7.2)事件。

以下是您将在窗口中放入的内容：

```
<Window x:Class="WpfApp1.MainWindow" Title="MainWindow" 
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <StackPanel Orientation="Vertical" Width="100" Height="100"  HorizontalAlignment="Left" VerticalAlignment="Top">

        <TextBlock Name="NumericLabel1"  Text="Enter Value:"  />
        <TextBox   Name="NumericInput1" 
                   **PreviewTextInput="MaskNumericInput"** 
                   **DataObject.Pasting="MaskNumericPaste"**  />
    </StackPanel>
</Window>
```

然后在你的代码隐藏中实现 C#：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    **private void MaskNumericInput(object sender, TextCompositionEventArgs e)**
    {
        e.Handled = !TextIsNumeric(e.Text);
    }

    **private void MaskNumericPaste(object sender, DataObjectPastingEventArgs e)**
    {
        if (e.DataObject.GetDataPresent(typeof(string)))
        {
            string input = (string)e.DataObject.GetData(typeof(string));
            if (!TextIsNumeric(input)) e.CancelCommand();
        }
        else
        {
            e.CancelCommand();
        }
    }

    **private bool TextIsNumeric(string input)**
    {
        return input.All(c => Char.IsDigit(c) || Char.IsControl(c));
    }
}
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T14:38:24.893

```
public class IntegerTextBox : TextBox
{
    protected override void OnTextChanged(TextChangedEventArgs e)
    {
        base.OnTextChanged(e);

        Text = new String(Text.Where(c => Char.IsDigit(c)).ToArray());
        this.SelectionStart = Text.Length;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:26:14.570

在最原始的级别，您可以拦截`KeyUp`事件或`TextChanged`查看正在添加的字符，如果无法将其解析为 Int，则将其删除。

还要检查 -[只接受文本框的数字](https://stackoverflow.com/questions/4801430/only-accept-digits-for-textbox) 和[掩码文本框只接受小数](https://stackoverflow.com/questions/12209484/masking-textbox-to-accept-only-decimals)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T14:25:02.127

您可以使用整数上下控制。WPF 工具包中有一个可以解决问题：

[https://wpftoolkit.codeplex.com/wikipage?title=IntegerUpDown](https://wpftoolkit.codeplex.com/wikipage?title=IntegerUpDown)

# system.reactive - 将历史和实时股票价格数据与 Rx 合并

> ID：14813963
> 
> 赞同：11
> 
> 时间：2013-02-11T14:22:57.527
> 
> 标签：system.reactive

我正在尝试 Rx，因为它似乎很适合我们的领域，但学习曲线让我感到惊讶。

我需要将历史价格数据与实时价格数据结合在一起。

我正在尝试将通常的方法调整为 Rx 的语言：

1.  立即订阅实时价格并开始缓冲我返回的值
2.  发起对历史价格数据的请求（这需要在订阅实时价格之后发生，因此我们的数据中没有任何空白）
3.  发布历史价格，因为它们回来
4.  收到所有历史数据后，发布缓冲的实时数据，删除与我们的历史数据重叠的任何值
5.  继续重播实时价格馈送中的数据

我有这个令人作呕且不正确的稻草人代码，它似乎适用于我编写的幼稚测试用例：

```
IConnectableObservable<Tick> live = liveService
    .For(symbol)
    .Replay(/* Some appropriate buffer size */);
live.Connect();

IObservable<Tick> historical = historyService.For(since, symbol);

return new[] {historical, live}
    .Concat()
    .Where(TicksAreInChronologicalOrder());

private static Func1<Tick,bool> TicksAreInChronologicalOrder()
{
    // Some stateful predicate comparing the timestamp of this tick 
    // to the timestamp of the last tick we saw
} 
```

这有一些缺点

1.  不知道适当的重播缓冲区大小。无法设置无限缓冲区 - 这是一个长时间运行的序列。真的，我们想要某种一次性缓冲区，在第一次调用订阅时刷新。如果这存在于 Rx 中，我找不到它。
2.  即使我们切换到发布实时价格，回放缓冲区仍将继续存在。此时我们不需要缓冲区。
3.  同样，一旦我们跳过了历史价格和实时价格之间的初始重叠，就不需要过滤掉重叠报价的谓词。我真的很想做类似的事情：`live.SkipWhile(tick => tick.Timestamp < /* lazily get last timestamp in historical data */)`. `Wait(this IObservable<TSource>)`这里有用吗？

必须有更好的方法来做到这一点，但我仍在等待我的大脑像 FP 一样摸索 Rx。

我考虑解决的另一个选项 1\. 是编写我自己的 Rx 扩展，它将`ISubject`消息排队，直到它获得第一个订阅者（然后拒绝订阅者？）。也许这就是要走的路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:04:32.167

为了记录，这就是我最后所做的。我仍然是一个 Rx 学习者，并且在 2.0 版最后一次看到它后返回 .Net。非常感谢所有反馈。

下面使用的 Ticks 对象可能包含一个或多个刻度值。历史数据服务以多个 Ticks 形式返回数据。

```
public class HistoricalAndLivePriceFeed : IPriceFeed
{
    private readonly IPriceFeed history;
    private readonly IPriceFeed live;
    private readonly IClock clock;

    public HistoricalAndLivePriceFeed(IPriceFeed history, IPriceFeed live)
:            this(history, live, new RealClock())
        {
    }
    public HistoricalAndLivePriceFeed(IPriceFeed history, IPriceFeed live, IClock clock)
    {
        this.history = history;
        this.live = live;
        this.clock = clock;
    }

    public IObservable<Ticks> For(DateTime since, ISymbol symbol)
    {
        return Observable.Create<Ticks>(observer =>
        {
            var liveStream = Buffer<Ticks>.StartBuffering(live.For(since, symbol));

            var definitelyInHistoricalTicks = clock.Now;
            // Sleep to make sure that historical data overlaps our live data
            // If we ever use a data provider with less fresh historical data, we may need to rethink this
            clock.Wait(TimeSpan.FromSeconds(1));

            var liveStreamAfterEndOfHistoricalTicks = liveStream
               .SkipWhile(ticks => ticks.LastTimestamp <= definitelyInHistoricalTicks)
               .Select(ticks => ticks.RemoveBefore(definitelyInHistoricalTicks + 1));

            var subscription = history.For(since, symbol)
               .Select(historicalTicks => historicalTicks.RemoveAtOrAfter(definitelyInHistoricalTicks + 1))
               .Concat(liveStreamAfterEndOfHistoricalTicks)
               .Subscribe(observer);

            return liveStream.And(subscription);
        });
    }
}
public static class CompositeDisposableExtensions
{
    public static CompositeDisposable And(this IDisposable disposable, Action action)
    {
        return And(disposable, Disposable.Create(action));
    }

    public static CompositeDisposable And(this IDisposable disposable, IDisposable other)
    {
        return new CompositeDisposable(disposable, other);
    }
} 
```

它使用了这个 Rx 代码，我仍然不太信任：

```
using System;
using System.Collections.Generic;
using System.Reactive.Disposables;
using System.Reactive.Subjects;

namespace My.Rx
{
    /// <summary>
    /// Buffers values from an underlying observable when no observers are subscribed.
    /// 
    /// On Subscription, any buffered values will be replayed.
    /// 
    /// Only supports one observer for now.
    /// 
    /// Buffer is an ISubject for convenience of implementation but IObserver methods
    /// are hidden. It is not intended that Buffer should be used as an IObserver,
    /// except through StartBuffering() and it is dangerous to do so because none of 
    /// the IObserver methods check whether Buffer has been disposed.
    /// </summary>
    /// <typeparam name="TSource"></typeparam>
    public class Buffer<TSource> : ISubject<TSource>, IDisposable
    {
        private readonly object gate = new object();
        private readonly Queue<TSource> queue = new Queue<TSource>();

        private bool isDisposed;
        private Exception error;
        private bool stopped;
        private IObserver<TSource> observer = null;
        private IDisposable subscription;

        public static Buffer<TSource> StartBuffering(IObservable<TSource> observable)
        {
            return new Buffer<TSource>(observable);
        }

        private Buffer(IObservable<TSource> observable)
        {
            subscription = observable.Subscribe(this);
        }

        void IObserver<TSource>.OnNext(TSource value)
        {
            lock (gate)
            {
                if (stopped) return;
                if (IsBuffering)
                    queue.Enqueue(value);
                else
                    observer.OnNext(value);
            }
        }

        void IObserver<TSource>.OnError(Exception error)
        {
            lock (gate)
            {
                if (stopped) return;
                if (IsBuffering)
                    this.error = error;
                else
                    observer.OnError(error);
                stopped = true;
            }
        }

        void IObserver<TSource>.OnCompleted()
        {
            lock (gate)
            {
                stopped = true;
            }
        }

        public IDisposable Subscribe(IObserver<TSource> observer)
        {
            lock (gate)
            {
                if (isDisposed)
                    throw new ObjectDisposedException(string.Empty);

                if (this.observer != null)
                    throw new NotImplementedException("A Buffer can currently only support one observer at a time");

                while(!queue.IsEmpty())
                {
                    observer.OnNext(queue.Dequeue());
                }

                if (error != null)
                    observer.OnError(error);
                else if (stopped)
                    observer.OnCompleted();

                this.observer = observer;
                return Disposable.Create(() =>
                                             {
                                                 lock (gate)
                                                 {
                                                                             // Go back to buffering
                                                     this.observer = null;
                                                 }
                                             });
            }
        }

        private bool IsBuffering
        {
            get { return observer == null; }
        }

        public void Dispose()
        {
            lock (gate)
            {
                subscription.Dispose();

                isDisposed = true;
                subscription = null;
                observer = null;
            }
        }
    }
} 
```

它通过了这些测试（我还没有费心检查线程安全）：

```
private static readonly Exception exceptionThrownFromUnderlying = new Exception("Hello world");

[Test]
public void ReplaysBufferedValuesToFirstSubscriber()
{
    var underlying = new Subject<int>();
    var buffer = Buffer<int>.StartBuffering(underlying);
    underlying.OnNext(1);
    underlying.OnNext(2);

    var observed = new List<int>();

    buffer.Subscribe(Observer.Create<int>(observed.Add));

    Assert.That(observed, Is.EquivalentTo(new []{1,2}));
}

[Test]
public void PassesNewValuesToObserver()
{
    var underlying = new Subject<int>();
    var buffer = Buffer<int>.StartBuffering(underlying);

    var observed = new List<int>();
    buffer.Subscribe(Observer.Create<int>(observed.Add));

    underlying.OnNext(1);
    underlying.OnNext(2);

    Assert.That(observed, Is.EquivalentTo(new[] { 1, 2 }));
}

[Test]
public void DisposesOfSubscriptions()
{
    var underlying = new Subject<int>();
    var buffer = Buffer<int>.StartBuffering(underlying);

    var observed = new List<int>();

    buffer.Subscribe(Observer.Create<int>(observed.Add))
        .Dispose();

    underlying.OnNext(1);

    Assert.That(observed, Is.Empty);
}

[Test]
public void StartsBufferingAgainWhenSubscriptionIsDisposed()
{
    var underlying = new Subject<int>();
    var buffer = Buffer<int>.StartBuffering(underlying);

    // These should be buffered
    underlying.OnNext(1);
    underlying.OnNext(2);

    var firstSubscriptionObserved = new List<int>();
    using (buffer.Subscribe(Observer.Create<int>(firstSubscriptionObserved.Add)))
    {
        // Should be passed through to first subscription
        underlying.OnNext(3);
    }
    Assert.That(firstSubscriptionObserved, Is.EquivalentTo(new[] { 1, 2, 3 }));

    // First subscription has been disposed-
    // we should be back to buffering again
    underlying.OnNext(4);
    underlying.OnNext(5);

    var secondSubscriptionObserved = new List<int>();
    using (buffer.Subscribe(Observer.Create<int>(secondSubscriptionObserved.Add)))
    {
        // Should be passed through to second subscription
        underlying.OnNext(6);
    }
    Assert.That(secondSubscriptionObserved, Is.EquivalentTo(new[] { 4, 5 ,6}));
}

[Test]
public void DoesNotSupportTwoConcurrentObservers()
{
    // Use .Publish() if you need to do this

    var underlying = new Subject<int>();
    var buffer = Buffer<int>.StartBuffering(underlying);

    buffer.Subscribe(Observer.Create<int>(i => { }));

    Assert.Throws<NotImplementedException>(() => buffer.Subscribe(Observer.Create<int>(i => { })));
}

[Test]
public void CannotBeUsedAfterDisposal()
{
    var underlying = new Subject<int>();
    var buffer = Buffer<int>.StartBuffering(underlying);
    buffer.Dispose();

    Assert.Throws<ObjectDisposedException>(() => buffer.Subscribe(Observer.Create<int>(i => { })));
}

[Test]
public void ReplaysBufferedError()
{
    var underlying = new Subject<int>();
    var buffer = Buffer<int>.StartBuffering(underlying);

    underlying.OnNext(1);
    underlying.OnError(exceptionThrownFromUnderlying);

    var observed = new List<int>();
    Exception foundException = null;
    buffer.Subscribe(
        observed.Add, 
        e => foundException = e);

    Assert.That(observed, Is.EquivalentTo(new []{1}));
    Assert.That(foundException, Is.EqualTo(exceptionThrownFromUnderlying));
}

[Test]
public void ReplaysBufferedCompletion()
{
    var underlying = new Subject<int>();
    var buffer = Buffer<int>.StartBuffering(underlying);

    underlying.OnNext(1);
    underlying.OnCompleted();

    var observed = new List<int>();
    var completed = false;
    buffer.Subscribe(
        observed.Add,
        () => completed=true);

    Assert.That(observed, Is.EquivalentTo(new[] { 1 }));
    Assert.True(completed);
}

[Test]
public void ReplaysBufferedErrorToSubsequentObservers()
{
    var underlying = new Subject<int>();
    var buffer = Buffer<int>.StartBuffering(underlying);

    underlying.OnNext(1);
    underlying.OnError(exceptionThrownFromUnderlying);

    // Drain value queue
    using (buffer.Subscribe(Observer.Create<int>(i => { }, e => { }))) ;

    var observered = new List<int>();
    Exception exceptionEncountered = null;
    using (buffer.Subscribe(Observer.Create<int>(observered.Add, e=>exceptionEncountered=e)));

    Assert.That(observered, Is.Empty);
    Assert.That(exceptionEncountered, Is.EqualTo(exceptionThrownFromUnderlying));
}

[Test]
public void ReplaysBufferedCompletionToSubsequentObservers()
{
    var underlying = new Subject<int>();
    var buffer = Buffer<int>.StartBuffering(underlying);

    underlying.OnNext(1);
    underlying.OnCompleted();

    // Drain value queue
    using (buffer.Subscribe(Observer.Create<int>(i => { }))) ;

    var observered = new List<int>();
    var completed = false;
    using (buffer.Subscribe(Observer.Create<int>(observered.Add, ()=>completed=true)));

    Assert.That(observered, Is.Empty);
    Assert.True(completed);
}

[Test]
public void DisposingOfBufferDisposesUnderlyingSubscription()
{
    var underlyingSubscriptionWasDisposed = false;
    var underlying = Observable.Create<int>(observer => Disposable.Create(() => underlyingSubscriptionWasDisposed=  true   ));

    var buffer = Buffer<int>.StartBuffering(underlying);
    buffer.Dispose();

    Assert.True(underlyingSubscriptionWasDisposed);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T00:02:25.560

怎么样：

```
public static IObservable<T> CombineWithHistory<T, TSelectorResult>(this IObservable<T> live, IObservable<T> history, Func<T, TSelectorResult> selector)
{
    var replaySubject = new ReplaySubject<T>();
    live.Subscribe(replaySubject);
    return history.Concat(replaySubject).Distinct(selector);
} 
```

这使用序列 id 和 distinct 来过滤重复项。

以及相应的测试：

```
var testScheduler = new TestScheduler();

var history = testScheduler.CreateColdObservable(
    OnNext(1L, new PriceTick { PriceId = 1 }),
    OnNext(2L, new PriceTick { PriceId = 2 }),
    OnNext(3L, new PriceTick { PriceId = 3 }),
    OnNext(4L, new PriceTick { PriceId = 4 }),
    OnCompleted(new PriceTick(), 5L));

var live = testScheduler.CreateHotObservable(
    OnNext(1L, new PriceTick { PriceId = 3 }),
    OnNext(2L, new PriceTick { PriceId = 4 }),
    OnNext(3L, new PriceTick { PriceId = 5 }),
    OnNext(4L, new PriceTick { PriceId = 6 }),
    OnNext(5L, new PriceTick { PriceId = 7 }),
    OnNext(6L, new PriceTick { PriceId = 8 }),
    OnNext(7L, new PriceTick { PriceId = 9 })
    );

live.Subscribe(pt => Console.WriteLine("Live {0}", pt.PriceId));
history.Subscribe(pt => Console.WriteLine("Hist {0}", pt.PriceId), () => Console.WriteLine("C"));

var combined = live.CombineWithHistory(history, t => t.PriceId);

combined.Subscribe(pt => Console.WriteLine("Combined {0}", pt.PriceId));

testScheduler.AdvanceTo(6L); 
```

如果执行此测试，combined 会发出 id 为 1 到 8 的价格变动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T18:31:52.840

如果您的历史数据和实时数据都是基于时间或调度器的，也就是说，随着时间的推移，事件流看起来像这样：

```
|---------------------------------------------------->  time
    h   h   h   h  h  h                                 historical
                l  l  l  l  l  l                        live 
```

您可以使用一个简单的`TakeUntil`构造：

```
var historicalStream = <fetch historical data>;
var liveStream = <fetch live data>;

var mergedWithoutOverlap = 
     // pull from historical
     historicalStream
       // until we start overlapping with live
       .TakeUntil(liveStream)
       // then continue with live data
       .Concat(liveStream); 
```

如果您一次获得所有历史数据，例如 a `IEnumerable<T>`，您可以使用`StartWith`和其他逻辑的组合：

```
var historicalData = <get IEnumerable of tick data>;
var liveData = <get IObservable of tick data>;

var mergedWithOverlap = 
    // the observable is the "long running" feed
    liveData
    // But we'll inject the historical data in front of it
    .StartWith(historicalData)
    // Perform filtering based on your needs
    .Where( .... ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-10T23:05:31.143

在内存和交易重叠（正确性）方面的便捷方式。
等待您的反馈意见：

```
var tradeIds = new HashSet<string>();
var replayQuotationTrades = new ReplaySubject<IntradayTrade>();
var replaySubscription = _quotationTrades.Subscribe(replayQuotationTrades);
return _historyTrades
                .DelaySubscription(TimeSpan.FromMilliseconds(500), _backgroundScheduler)
                .Do(t => tradeIds.Add(t.TradeId))
                .Finally(() => DisposeAndCompleteReplayStream(replaySubscription, replayQuotationTrades))
                .Concat(replayQuotationTrades.Where(t => !tradeIds.Contains(t.TradeId)))
                .Finally(tradeIds.Clear)
                .Concat(_quotationTrades)
                .Subscribe(observer); 
```

# android - retriever.getFrameAtTime 不准确，如何获取视频截图？

> ID：14813964
> 
> 赞同：2
> 
> 时间：2013-02-11T14:22:59.643
> 
> 标签：android, frame, android-videoview, screen-capture

这是我正在使用的功能：

```
public Bitmap getVideoFrame(String FD, long time) {
    MediaMetadataRetriever retriever = new MediaMetadataRetriever();
    try {
        retriever.setDataSource(FD);
        return retriever.getFrameAtTime(time * 1000, MediaMetadataRetriever.OPTION_CLOSEST);
    } catch (IllegalArgumentException ex) {
        ex.printStackTrace();
    } catch (RuntimeException ex) {
        ex.printStackTrace();
    } finally {
        try {
            retriever.release();
        } catch (RuntimeException ex) {
        }
    }
    return null;
} 
```

其中：FD是视频时间的路径= videoview.getCurrentPosition();

问题是这个函数没有得到我需要得到的确切帧。在较长的视频（20 分钟）上，它会比在短视频（10-20 秒）中更准确。我有什么遗漏的吗，如果没有，我可以用什么来代替检索器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-28T11:35:08.830

尝试不带选项使用 ...

**retriever.getFrameAtTime(time * 1000);**

我有同样的问题，在我做了这个修改之后它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:14:47.527

该功能有一个错误，它显然不适用于小型视频并且非常不可靠，我最近在这里问了这个问题`SO`，[看到这个帖子](https://stackoverflow.com/questions/11881641/retrieve-thumbnails-from-a-video-file-periodically)，但没有得到正确的答案，所以我做了很多研究并使用`FFMPEG`相反，使用`FFMPEG`我能够提取精确到毫秒的视频帧，还请注意，在手机上提取帧的过程很慢，对于一个大于 50Mb 的大视频，我通常需要 2 分钟才能提取我想要的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-11T10:44:52.010

```
retriever.getFrameAtTime(second* 1000*1000); 
```

它需要微秒而不是毫秒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-11T10:09:27.823

**是的，我同意retriever.getFrameAtTime 不准确。**

`getFrameAt`替代Android 方法的替代解决方案`MediaMetadataRetriever`。**AV_FrameCapture**用于`MediaCodec`解码视频帧并将`OpenGL`视频帧转换为 RGB 位图。由于 Android`MediaMetadataRetriever`不保证调用时返回结果，因此**可以使用**`getFrameAtTime`此AV_FrameCapture 准确提取一帧视频。

 **[https://stackoverflow.com/a/60633395/6676310](https://stackoverflow.com/a/60633395/6676310)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-11-24T06:40:59.170

```
ImageView imageView1=(ImageView)findViewById(R.id.imageView1);

Bitmap bm=ThumbnailUtils.createVideoThumbnail(Environment.getExternalStorageDirectory() + "/videocapture.3gp",Thumbnails.MICRO_KIND);

imageView1.setImageBitmap(bm); 
```**

# c++ - 如何为来自其他库的类型专门化 std::hash

> ID：14813965
> 
> 赞同：2
> 
> 时间：2013-02-11T14:23:07.377
> 
> 标签：c++, hash, stl, unordered-set, stdhash

所以我使用的库有一个枚举（比如说它的名字`LibEnum`）。我需要一个`std::unordered_set`of `LibEnum`，但我得到编译错误，没有专门`std::hash`针对它的。我可以轻松编写它并返回值的数量（第一个元素是 0，第二个元素是 1 等），但是我应该把这个专业化放在哪里，它应该是什么样子？我无法修改库源。

```
 enum LibEnum { A, B, C, D};
  std::unordered_set <LibEnum> mySet;
  //need std::hash for LibEnum
  //how should it look like? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T14:27:28.317

您可以专门`std::hash`针对您的类型：

```
namespace std {
    template <>
    struct hash<FullyQualified::LibEnum> {
        size_t operator ()(FullyQualified::LibEnum value) const {
            return static_cast<size_t>(value);
        }
    };
} 
```

或者，您可以`hash`在任何您喜欢的地方定义一个类型，并在实例化时将其作为附加模板参数提供`std::unordered_map<FooEnum>`：

```
// Anywhere in your code prior to usage:

struct myhash {
    std::size_t operator ()(LibEnum value) const {
        return static_cast<std::size_t>(value);
    }
};

// Usage:

std::unordered_map<LibEnum, T, myhash> some_hash; 
```

这两种方法都不需要您修改库。

# javascript - iframe 仅在 IE8/9 中显示垂直滚动条

> ID：14813968
> 
> 赞同：1
> 
> 时间：2013-02-11T14:23:09.223
> 
> 标签：javascript, html, css, iframe

我有一个 iframe 包含在主页的 div 中。所以代码如下；

```
<DIV id=abcPanel>
<IFRAME style="WIDTH: 660px; HEIGHT: 680px" id=abciFrame src="/someSrc" name=abciFrame></IFRAME>
</DIV> 
```

现在垂直滚动条在 IE 8/9 中显示，但在其他浏览器中没有。

即使我将高度增加到任何值，滚动条也不会消失。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:48:05.010

如果 iframe 上的 overflow:hidden 不起作用；尝试将这些属性添加到其中：

```
scrolling="no" horizontalscrolling="no" verticalscrolling="no" 
```

例如

```
<iframe scrolling="no" horizontalscrolling="no" verticalscrolling="no"></iframe> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:25:19.173

添加到 iframe 的样式

```
overflow-x:hidden; overflow-y:hidden; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:24:15.250

你可以使用 CSS：`overflow:hidden;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T14:34:46.660

根据您的代码，

```
<DIV id=abcPanel>
<IFRAME style="WIDTH: 660px; overflow: hidden; HEIGHT: 680px" id=abciFrame src="/someSrc" name=abciFrame></IFRAME>
</DIV> 
```

# javascript - three.js 获取立方体的正面

> ID：14813969
> 
> 赞同：0
> 
> 时间：2013-02-11T14:23:10.530
> 
> 标签：javascript, three.js, webgl, cubes

我目前在这里玩这个例子：http: [//mrdoob.github.com/three.js/examples/canvas_geometry_cube.html](http://mrdoob.github.com/three.js/examples/canvas_geometry_cube.html)

我想知道是否有可能知道立方体的哪一侧当前是正面，意思是：指向相机的一侧。到目前为止，我不知道如何找到它。

任何帮助表示赞赏。迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:30:56.550

下面是一些可以帮助您的示例代码，用于查找鼠标和场景之间的交集：

[http://stemkoski.github.com/Three.js/Mouse-Tooltip.html](http://stemkoski.github.com/Three.js/Mouse-Tooltip.html)

您的代码版本将比这简单得多；例如，要让 Raycaster 从相机开始并朝向立方体中心的方向，请尝试：

```
var ray = new THREE.Raycaster( camera.position, cube.position.clone().sub( camera.position ).normalize() ); 
```

然后获取相交的对象，例如：

```
var intersects = ray.intersectObjects( scene.children ); 
```

我希望这可以帮助您入门！

# c# - Unity3d角色无法水平移动

> ID：14813971
> 
> 赞同：0
> 
> 时间：2013-02-11T14:23:14.667
> 
> 标签：c#, unity3d

也许是因为如果现在尝试修复它几个小时。但是我的角色并没有水平移动。

首先，我使用立方体作为字符来编写它。当我用播放器模型替换这个立方体时，它仍然上下移动，但不再左右移动。即使经过 2 个小时的尝试，我还是实在受不了了，决定把它贴在这里。

由于代码很长，我决定将其粘贴到 pastebin 中。

[http://pastebin.com/iAsN51rW](http://pastebin.com/iAsN51rW)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:37:06.657

我找到了解决我的问题的方法。就像我想的那样，当切换到我的玩家模型时，我必须从

```
transform.Translate(speed* Time.deltaTime,0,0); 
```

到

```
transform.Translate(0,0,speed* Time.deltaTime); 
```

当我的立方体在看相机时，但我的玩家在看侧面

# java - 从 JTable 返回 JComboBox

> ID：14813974
> 
> 赞同：1
> 
> 时间：2013-02-11T14:23:19.333
> 
> 标签：java, swing, jtable, jcombobox, tablemodel

所以我有许多组成 JTable 的 JComboBox。我的问题是；如果无法直接访问这些 JComboBox，如何从 JTable 中获取它们？下面是我如何将 JComboBoxes 放入 JTable 中...

```
TableColumn columnModel = table.getColumnModel().getColumn(i);
columnModel.setCellEditor(new DefaultCellEditor(combo)); 
```

......所以我想你可以通过做类似的事情来归还它们......

```
JComboBox retrievedDropDowns = (JComboBox)table.getColumnModel().getColumn(1).getCellEditor(); 
```

但显然不是...

我离得很远吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:26:26.390

尝试：

```
JComboBox retrievedDropDowns = (JComboBox)table.getColumnModel().getColumn(i).getCellEditor().getComponent(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:27:12.820

如果您将 a`DefaultCellEditor`放入您的 columnModel 中，那么它将返回 a `DefaultCellEditor` not a `JComboBox`。

但是你可以使用`DefaultCellEditor.getComponent()`来获取内部的editorComponent。

# wpf - 如何在 Microsoft Expression Blend 4 中的 WPF 应用程序中使用 Silverlight？

> ID：14813976
> 
> 赞同：0
> 
> 时间：2013-02-11T14:23:26.003
> 
> 标签：wpf, silverlight, expression-blend

我有一个模板/模式，我在[http://gallery.expression.microsoft.com/](http://gallery.expression.microsoft.com/)（模拟扫描时钟 - [http://gallery.expression.microsoft.com/AnalogSweepingClock](http://gallery.expression.microsoft.com/AnalogSweepingClock)），我想在我的 WPF 应用程序上使用使用 Microsoft Expression Blend 4。有可能吗？我使用 WPF 的目的是让您拥有更多的窗口。

我尝试将模拟类的 .xaml 和 .cs 添加到我的 WPF 应用程序中。但它只显示时钟本身，但时钟指针不工作。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:56:42.313

时钟指针不会在设计模式下移动。您需要构建并运行项目才能看到它们移动。

为了构建项目，我必须`UseLayoutRounding="False"`从第 106、107、118、135、140、145 和 150 行的元素中删除该属性。

您可能会发现的另一个问题是 WPF 似乎没有为`CurrentDay`和`CurrentMonth`属性获取属性更改事件。最简单的选择是将这些更改为依赖属性：

```
public static readonly DependencyProperty CurrentMonthProperty 
   = DependencyProperty.Register("CurrentMonth", 
   typeof(string), typeof(AnalogSweepingClock),
   new PropertyMetadata(null));

public string CurrentMonth
{
   get { return (string)GetValue(CurrentMonthProperty); }
   set { SetValue(CurrentMonthProperty, value); }
}

public static readonly DependencyProperty CurrentDayProperty 
   = DependencyProperty.Register("CurrentDay", 
   typeof(string), typeof(AnalogSweepingClock),
   new PropertyMetadata(null));

public string CurrentDay
{
   get { return (string)GetValue(CurrentDayProperty); }
   set { SetValue(CurrentDayProperty, value); }
} 
```

# jquery - 插件中的 jQuery 查找和绑定

> ID：14813985
> 
> 赞同：0
> 
> 时间：2013-02-11T14:23:52.300
> 
> 标签：jquery

我认为我不了解 jQuery 行为，在我的插件中我想处理滑动控件的单击事件，使用查找功能它不起作用，当我直接抓取元素时一切都很好。

```
jQuery.fn.whoscheering = (function () {
    var el = $(this),
    left = el.find('.nav-prev'),
    right = el.find('.nav-next'),
    bubble;

    // this doesn't work
    left.bind("click", function (e) {
        console.log('left');
        e.preventDefault();
    });

    // below works!
    $('.nav-prev').bind('click', function (e) {
        console.log(e);
        e.preventDefault();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:31:23.620

您在插件中使用了自调用函数，它应该是：

```
jQuery.fn.whoscheering = function () {
   ---
}; 
```

不是：

```
jQuery.fn.whoscheering = (function () {
   ---
}); 
```

如果`.find()`不起作用，`.nav-prev`并且`.nav-next`可能不在您初始化插件的元素内。在插件内部，`this` **是**jQuery 对象：

```
jQuery.fn.whoscheering = function () {
    var left  = this.find('.nav-prev'),
        right = this.find('.nav-next'),
        bubble;

    left.on('click', function (e) {
        e.preventDefault();
        console.log('left');
    });
}; 
```

[**小提琴**](http://jsfiddle.net/vuJLw/)

# git - 这是在本地还是远程运行？

> ID：14813988
> 
> 赞同：0
> 
> 时间：2013-02-11T14:24:00.643
> 
> 标签：git, clone, git-clone

我正在尝试做一些非常简单的事情：克隆存储库。

这里的文档：http: [//git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository](http://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository)对克隆命令的使用不是特别清楚。

我假设你会在一个空目录中运行克隆，它会将所有文件作为一个新的存储库拉下来。然而，这似乎不像我预期的那样工作：

我已经这样做了：

```
mkdir newrepo
cd newrepo
git clone /repo/i/want/to/clone 
```

它不起作用，但我得到的消息令人困惑：“克隆到 /repo/i/want/to/clone”。这是否意味着它试图将文件从“newrepo”复制到/repo/i/want/to/clone？

从这个角度来看，文档和命令打印的消息是矛盾的。

tl;博士：应该从现有的仓库运行克隆，传递我想要将文件复制到的仓库的 URL，还是应该从空目录运行并传递我想要从中复制文件的仓库的 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:31:42.790

你做错了。您忘记指定协议。往这边`git clone`走

```
$ git clone <url> [<folder>] 
```

因此，如果要从本地文件夹克隆，则需要编写：

```
$ git clone file:///repo/you/want/to/clone 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:26:45.140

您正在以正确的方式进行操作，git 应该将参数中给出的存储库克隆到当前目录中。

错误消息令人困惑，但这可能是因为远程存储库不存在或没有良好的协议处理程序（`git://`、`file://`或）。`ssh://``http://`

# c++ - (void*) 和 & 之间的区别

> ID：14813989
> 
> 赞同：1
> 
> 时间：2013-02-11T14:24:02.863
> 
> 标签：c++

嗨，我一直在练习放置 new 并使用它来创建对象。考虑以下：

```
class PNewTesting
{
private:
    string words;

public:
    PNewTesting(const string & w = "Placement new testing");
};

PNewTesting::PNewTesting(const string & w)
{
    words = w;
    cout << words << " constructed" << endl;
}

int main()
{
    char * buffer = new char[BUF];

    PNewTesting *p1,*p2;

    p1 = new (buffer)PNewTesting;

    p2 = new PNewTesting("Placing object in heap");

    cout << "Memory addresses: " << endl;
    cout << "buffer: " << (void *)buffer << endl;
    cout << "object placed in buffer: " << p1 << endl;
    cout << "object in heap: " << p2 << endl;
} 
```

这部分让我感到困惑，是当我写作时`cout << "buffer: " << &buffer << endl;`，这会给我一个与写作时不同的地址`cout << "buffer: " << (void *)buffer << endl;`

问题是 和 之间有什么区别`&buffer`，`(void*)buffer`为什么每个人都给我一个不同的地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:30:21.143

您的问题**[基本上可以简化为](http://ideone.com/JqswSi)**：

```
#include<iostream>

int main()
{
    int i = 10;
    int *ptr = &i;

    std::cout<<(void*)ptr<<"\n";
    std::cout<<(void*)&i<<"\n";
    std::cout<< &ptr<<"\n";
} 
```

**输出：**

```
0xbfa080b8
0xbfa080b8
0xbfa080bc 
```

`ptr`为您提供指针指向的对象的地址，即与`&i`.
`&ptr`给出存储指针本身的位置的地址.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:29:55.220

该表达式`&buffer`将为您提供 的地址`buffer`，该地址位于您的堆栈中的某个位置。

表达式`(void *)buffer`将为您提供缓冲区中包含的地址，作为 void 指针（在这种情况下，这意味着`cout`将值打印为表示指针的十六进制数，而不是尝试例如将值打印为字符串，这将是代码通常对`char *`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:30:04.970

其中一个显示变量的地址，另一个显示变量的值。考虑这些：

```
int i = 7;
std::cout << &i << "\n";
std::cout << i << "\n"; 
```

前者显示被调用变量的地址`i`（可能是一个大的偶数）。另一个显示其值 (7)。

相似地：

```
char *buffer;
std::cout << &buffer << "\n";
std::cout << (void*)buffer << "\n"; 
```

前者显示 的地址`buffer`。后者显示其施法值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T14:30:42.320

区别很简单。`buffer`是指向字符的指针，因此`(void*)buffer`分配的字符数组在内存中的位置（作为`void`指针）也是如此。`&buffer`另一方面，是`buffer` *自身*内存中的位置。

图表可能会有所帮助；**这是正在发生的事情的象征，并不代表实际的内存布局会是什么样子！**

```
Memory
AB AB AB AB 00 00 00 08  <-- buffer = 00 00 00 08; the characters are stored starting at 0x08
             ^
             |---------     &buffer is the memory location of buffer, and is 0x04
30 31 32 32 AB AB AB AB
^
|-------- char array starts at 0x08, and contains the string "1234" 
```

# regex - 如何在 oracle sql 查询中使用正则表达式？

> ID：14813992
> 
> 赞同：0
> 
> 时间：2013-02-11T14:24:06.533
> 
> 标签：regex, oracle

在我的位置字段中，我有：

```
"Location:
SOME PLACE

Additional Details:
DEFECT
" 
```

不知何故，我需要这个来取出`"SOME PLACE"`. 我试图了解该`regexp_substr()`函数是如何工作的，但它与我的 C# 背景非常不同，而且我不断得到奇怪的结果，比如空值。

通常我会期望做类似的事情：

```
regexp_substr(LocationField, 'Location:(.*)\n') as "NewLocation" 
```

并且要删掉括号中的部分……但我错了。有任何想法吗？

**解决方案 ：**

```
regexp_replace(FIELD, 'Location:'||CHR(13)||CHR(10)||'(.*).*$'||CHR(13)||CHR(10)||CHR(13)||CHR(10)||'Additional Details:.*$', '\1', 1, 1, 'n' ) as "Location" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:55:36.590

你可以这样做：

```
regexp_replace(LocationField, 
               'location:'||chr(10)||'([^'||chr(10)||']*).*$', '\1', 
                1, 1, 'n' ) 
```

即正则表达式字符串

```
location:\n([^\n]*).*$ 
```

但由于 oracle 无法与我们一起使用，我们在其位置进行`\n`拼接。`chr(10)`

该`n`模式意味着`.`将匹配换行符（因此`.*$`在某些文本之后的换行符之后删除所有内容。

如果位置可以有多行文本，后跟添加详细信息，您可以使用：

```
regexp_replace(LocationField, 
               'location:'||chr(10)||'(.*)'||chr(10)||'Additional.*$',  
               '\1', 1, 1, 'n' ) as "NewLocation" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:05:04.837

您需要在多行模式下运行正则表达式，这意味着填充 REGEXP_SUBSTR() 调用的完整签名：

```
select regexp_substr( locationField, '^([A-Z ]+)$', 1, 1, 'm')
from your_table
/ 
```

这`'m'`是一个指定多行模式的匹配参数。这意味着`^`和`$`在匹配模式中被视为`newline`边界而不是字符串的开始和结束。 [了解更多](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions131.htm#i1239858)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:31:12.530

请改用[REGEXP_REPLACE](http://www.sqlsnippets.com/en/topic-11744.html)：

```
select REGEXP_REPLACE( target, LocationField, 'Location:(.*)\n', '' ) as "NewLocation"
from your_table; 
```

应该让你朝着正确的方向前进。

# java - 在soapui java API中加载外部请求文件

> ID：14813998
> 
> 赞同：0
> 
> 时间：2013-02-11T14:24:21.270
> 
> 标签：java, file, request, soapui

我正在为 java 使用 SOAPUI API，这是我代码的一小部分

```
 for (Operation operation : wsdlInterface1.getOperationList()) {
        operationString = WSDL + ":" + wsdlInterface1.getName() + ":" + operation.getName();
        WsdlOperation wsdlOperation = (WsdlOperation) operation;
        // create a new empty request for that operation
        WsdlRequest request = wsdlOperation.addNewRequest("My request");
        request.setTimeout("2000");                 
        requestContent = wsdlOperation.createRequest(true);
        request.setRequestContent(requestContent);
        WsdlSubmit submit = (WsdlSubmit) request.submit(new WsdlSubmitContext(request), false); 
```

现在我需要做与此类似的事情，但加载现有的外部请求文件，我在 SOAPUI api 文档中找不到帮助，欢迎任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:19:20.837

我能够自己找到解决方案

此代码加载由 soapUI api 生成的空白请求

```
WsdlOperation wsdlOperation=wsdlInterface1.getOperationByName(operationName);
WsdlRequest request = wsdlOperation.addNewRequest("My request");
request.setTimeout("2000");
String requestContent = wsdlOperation.createRequest(true); // Create a blank request
request.setRequestContent(requestContent); 
```

要使用现有请求，您需要将该请求保存在这样的字符串中，在我的情况下，我从数据库中获取 xml

```
WsdlOperation wsdlOperation=wsdlInterface1.getOperationByName(operationName);
WsdlRequest request = wsdlOperation.addNewRequest("My request");
String requestContent;              
   if(rd.useXmlRequest(artifactId)!=null){ //Verify if exist an xml request for that service
requestContent=rd.useXmlRequest(artifactId); // uses the existing request
   }else{
requestContent = wsdlOperation.createRequest(true); // create a new blank request                       
 }
request.setRequestContent(requestContent); 
WsdlSubmit submit = (WsdlSubmit) request.submit(new WsdlSubmitContext(request), false); 
```