# StackOverflow 问答 15979000-15979999

# eclipse - 如何管理构建。 Liferay IDE 的.properties 文件内容？

> ID：15979000
> 
> 赞同：0
> 
> 时间：2013-04-12T19:05:47.600
> 
> 标签：eclipse, liferay, liferay-ide

我有以下内容的文件

```
#Managed by Liferay IDE (remove this comment to prevent future updates)
#Tue Jan 24 22:42:39 MSK 2012
app.server.portal.dir = D:\\APPS\\liferay-portal-6.1.0-ce-ga1\\tomcat-7.0.23\\webapps\\ROOT
app.server.lib.global.dir = D:\\APPS\\liferay-portal-6.1.0-ce-ga1\\tomcat-7.0.23\\lib\\ext
app.server.deploy.dir = D:\\APPS\\liferay-portal-6.1.0-ce-ga1\\tomcat-7.0.23\\webapps
app.server.type = tomcat
app.server.dir = D:\\APPS\\liferay-portal-6.1.0-ce-ga1\\tomcat-7.0.23 
```

因此，我可以删除注释并手动编辑此文件，也可以从 Liferay IDE 管理此文件。假设我选择了最后一个选项。

如何执行？如何`build.<username>.properties`在 Liferay IDE (Eclipse) 中进行管理？

**重述**

换句话说，Liferay IDE 在什么情况下将路径写入提到的文件中，以及从哪里获取这些路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:10:13.237

AFAIK 没有用于维护此文件的特定 UI，但通常不会有太多项目被覆盖。“由 Liferay IDE 管理”是指 Liferay IDE 自行管理。如果您想自己进行一些更改，则不能让 IDE 管理它。

请记住：这是与 build.properties 不同的文件。您不应更改 build.properties 以便在升级期间进行更好的维护 - build.username.properties 包含您的私人设置。从 Liferay IDE 为您生成的内容开始，然后根据需要手动更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T14:44:53.423

这些值是从在特定项目上设置的已配置 Liferay 运行时中写出的。因此，在使用 SDK 对插件执行操作之前，用户配置的运行时“Window > Prefs > Servers > Runtim 环境”（特别是 liferay 运行时）中的值会在调用操作之前保存到 build..properties . 也就是说，如果您有一个配置了 Liferay Portal 6.1 运行时的项目，那么该运行时的路径将在属性文件中使用。

[在此处查看此代码。](https://github.com/liferay/liferay-ide/blob/master/tools/plugins/com.liferay.ide.server.core/src/com/liferay/ide/server/util/ServerUtil.java#L584)

# java - 对选项进行一些更改后，GUI 计算关闭

> ID：15979007
> 
> 赞同：0
> 
> 时间：2013-04-12T19:06:15.700
> 
> 标签：java, swing, combobox, awt, actionlistener

我在一个问题上遇到了一些麻烦。我不完全理解问题是什么，但是当我尝试计算它时，我不断得到奇怪的值。它在我更改组合框值几次时起作用。但随后它开始吐出不可行的数字。错误在这里的某个地方：

```
private void updateTripDurationText()
{

    String speed = (String)avgspeedBox.getSelectedItem();
    String dist = (String)distanceText.getText();
    double d = Double.parseDouble(dist);
    double s = Double.parseDouble(speed);
    double durationT = d/s;
    String durationTime = String.format("%.1f",(Double.valueOf(durationT)));
    durationText.setText(durationTime);

 }

private class ComboBoxListener implements ActionListener
 {

  public void actionPerformed(ActionEvent e)
  {

          setCities(destinationBox.getSelectedIndex(),originBox.getSelectedIndex());
     updateDistanceText();
        updateTripDurationText();   

   }

 }

//This is the actionlistender that triggers our actions when the radio buttons are used. Miles is selected  by default however.
private class RadioButtonListener implements ActionListener
   {

   public void actionPerformed (ActionEvent event)
    {   

    if (event.getSource() == kilometersRadioButton)
     {
            distanceLabel.setText("Distance (kilometers):");
            avgspeedLabel.setText("Avg. Speeg (kph): ");
            setKm(true);

     }
     else if (event.getSource() == milesRadioButton)
     {
            distanceLabel.setText("Distance (miles): ");
            avgspeedLabel.setText("Avg. Speeg (mph): ");
            setKm(false);

     }
        updateDistanceText();
        updateTripDurationText();

    }

 }

public static void main(String[] args)
 {
  new TripCalculator();
 }
} 
```

问题完全在于 updateTripDuration。但我找不到是什么原因造成的。有关更多详细信息。当这计算两个位置之间的距离时，然后取平均速度并将距离除以它。但是，使用此设置，它只能进行一两次更改，然后它会关闭并保持关闭状态。

# web-config - 我在我的网站上收到此错误

> ID：15979011
> 
> 赞同：0
> 
> 时间：2013-04-12T19:06:21.807
> 
> 标签：web-config

请告诉我出了什么问题以及解决方案是什么

```
&lt;?xml version="1.0"?> 
```

Visual Studio 中的 Asp.Net 配置选项。设置和注释的完整列表可以在 machine.config.comments 中找到，通常位于 \Windows\Microsoft.Net\Framework\v2.x\Config -->

```
<configSections>
  <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
    <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
      <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere" />
        <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
        <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
        <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
      </sectionGroup>
    </sectionGroup>
  </sectionGroup>
</configSections>  

<appSettings/>
<connectionStrings/>
<system.web>
    <!-- 
        Set compilation debug="true" to insert debugging 
        symbols into the compiled page. Because this 
        affects performance, set this value to true only 
        during development.
    -->
    <compilation debug="false">

<compilation debug="true"/> 
<authentication mode="None"/>

      <assemblies>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>

    </compilation>
    <!--
        The <authentication> section enables configuration 
        of the security authentication mode used by 
        ASP.NET to identify an incoming user. 
    -->
    <authentication mode="Windows" />
    <!--
        The <customErrors> section enables configuration 
        of what to do if/when an unhandled error occurs 
        during the execution of a request. Specifically, 
        it enables developers to configure html error pages 
        to be displayed in place of a error stack trace.

    <customErrors mode="off" />
    --> 
```

```
 <pages>
    <controls>
      <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </controls>
  </pages>

  <httpHandlers>
    <remove verb="*" path="*.asmx"/>
    <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
  </httpHandlers>
  <httpModules>
    <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
  </httpModules>

</system.web>

<system.codedom>
  <compilers>
    <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4"
              type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <providerOption name="CompilerVersion" value="v3.5"/>
      <providerOption name="WarnAsError" value="false"/>
    </compiler>
    <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4"
              type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <providerOption name="CompilerVersion" value="v3.5"/>
      <providerOption name="OptionInfer" value="true"/>
      <providerOption name="WarnAsError" value="false"/>
    </compiler>
  </compilers>
</system.codedom>

<!-- 
    The system.webServer section is required for running ASP.NET AJAX under Internet
    Information Services 7.0\.  It is not necessary for previous version of IIS.
-->
<system.webServer>
  <validation validateIntegratedModeConfiguration="false"/>
  <modules>
    <remove name="ScriptModule" />
    <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
  </modules>
  <handlers>
    <remove name="WebServiceHandlerFactory-Integrated"/>
    <remove name="ScriptHandlerFactory" />
    <remove name="ScriptHandlerFactoryAppServices" />
    <remove name="ScriptResource" />
    <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode"
         type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode"
         type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </handlers>
</system.webServer>

<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
      <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
      <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-15T15:23:52.827

当您处于开发模式时，将此属性保留为“true”，当您想在 Web 上部署您的应用程序时，将此值保留为“false”。

此属性可增强您的应用程序的性能。更多请查看

[https://blogs.msdn.microsoft.com/prashant_upadhyay/2011/07/14/why-debugfalse-in-asp-net-applications-in-production-environment/](https://blogs.msdn.microsoft.com/prashant_upadhyay/2011/07/14/why-debugfalse-in-asp-net-applications-in-production-environment/)

# asp.net - 使用 web.config 转换，如何在顶部注入规范的 url 规则？

> ID：15979017
> 
> 赞同：2
> 
> 时间：2013-04-12T19:06:29.500
> 
> 标签：asp.net, web-config, configuration-files, web-config-transform

在 ASP.Net 项目中，对于发布版本的 Web.Config（使用 Web.Release.Config 转换文件），如何在重写部分注入规范的 url 规则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:10:28.860

`xdt:Transform`下面是一个对我有用的示例，您必须使用 XPath 选择器才能通过属性将您的规则注入到正确的位置。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="CanonicalHostNameRule1" enabled="true" stopProcessing="true" 
                    xdt:Transform="InsertBefore(/configuration/system.webServer/rewrite/rules/rule[position() = 1])"
                >
                    <match url="(.*)" />
                    <conditions>
                        <add input="{HTTP_HOST}" negate="true" pattern="^www\.yoursite\.com$" />
                    </conditions>
                    <action type="Redirect" url="http://www.yoursite.com/{R:1}" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration>
```

您也可以使用 xpath 语句进行一些其他有趣的替换。我希望上面的示例对我有所帮助，因为 StackOverflow 通常是我这些天首先寻找此类事物的地方。

# youtube-api - 视频播放结束时隐藏标题

> ID：15979022
> 
> 赞同：1
> 
> 时间：2013-04-12T19:06:47.923
> 
> 标签：youtube-api

```
<iframe src="snip?showinfo=0&controls=0&rel=0"></iframe> 
```

[JSF](http://jsfiddle.net/jeremejevs/zjLgE/)中。包括标题在内的所有控件在播放之前和播放过程中都会隐藏，但是当视频结束时，会出现标题，而忽略`showinfo`设置。这是预期的行为吗？

*不值得再问一个问题。*是否可以使用此设置隐藏`YouTube`水印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T13:03:10.670

我知道我迟到了，但由于这个问题从未得到回答......

标题仅在您使用[HTML5 播放](http://youtube.com/html5)（如果启用）和通过 iframe 嵌入视频时显示。Flash 播放最后不显示标题。

您可以使用[带有](https://developers.google.com/youtube/iframe_api_reference)`if (event.data == YT.PlayerState.ENDED)`. 但请注意，YouTube 不允许您掩盖太多。只要有一个可见的（无右键单击）返回 YouTube 的链接，如水印、控件中的徽标或可点击的标题，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:29:36.610

要回答第一个问题，这是预期的行为。YouTube 希望另一端的人点击更多视频。

至于第二个，你要找的是`modestbranding=1`参数。不幸的是，您必须先使用该参数，并且不能将其与`showinfo=0`. 我猜 YouTube 必须获得某种类型的信用，对吧？那里可能有调整或未列出的参数。我再拍几张。

此外，您还可以在 YouTube 上找到[Brian Glick](http://www.labnol.org/internet/embed-youtube-videos-logoless/19532/)对此功能的解释。

# c# - 如何在 C# 中使用 RegisterStartupScript 和 jquery 显示带有动画的面板？

> ID：15979024
> 
> 赞同：2
> 
> 时间：2013-04-12T19:06:53.093
> 
> 标签：c#, jquery, asp.net

我正在尝试从后面的代码中显示一个带有动画的面板。面板确实显示但没有动画，这是行不通的：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "ScriptBlock", "$(document).ready(function(){$('#" + pUserActions.ClientID + "').show(\"slow\" );});", true); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:06:43.733

问题是在 PostBack 之后面板（或 div）已经可见，并且`.show()`如果元素已经可见则不起作用。试试这个例如：

html:

```
<div style="background-color:red; width:100px; height:100px"></div>
<input type="button" value="Show" id="btnShow" />
<input type="button" value="Hide" id="btnHide" /> 
```

js：

```
$("#btnShow").on("click",function(){$("div").show("slow");});
$("#btnHide").on("click",function(){$("div").hide("slow");}); 
```

小提琴：http: [//jsfiddle.net/hescano/VY9jt/](http://jsfiddle.net/hescano/VY9jt/)

如您所知，如果您在 div 可见时按下*Show*按钮，则不会发生任何事情。在调用服务器端脚本之前尝试让面板可见，你会明白我的意思。请注意，Panel 控件的 Visible 属性将不起作用，因为这会将元素从 DOM 中完全移除。

# javascript - 当用户选择相同时发出警报 在动态创建

> ID：15979025
> 
> 赞同：0
> 
> 时间：2013-04-12T19:07:00.027
> 
> 标签：javascript, php, html, html-select

我有一个 PHP 页面，它创建多个选择，具体取决于它提供之前的页面数量，并创建与选择的选项相同数量的选项（它是选择优先级）。

```
<select name="select1" id="idSelect" onchange="javascript:SelectOnChange();">
    <option value="Select one">Select one</option>
    <option value="1">1</option>
    <option value="2">2</option>
</select> 
```

我想要做的是，每当用户选择一个已经在另一个选择中选择的选项时，显示一个`alert`以便让他们知道他们的选择已经被采纳并拒绝更改。

每次用户从每个`select`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:11:16.140

基本上，您正在寻找一个更改事件来遍历每个选择并通知重复项。

```
$("select").change(function() {
    var currentSelection = this.value;
    $("select").each(function() {
        if (this.value == currentSelection)  {
            alert("you've already chosen this!");
        } 
    });
}); 
```

像这样的东西应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:11:36.193

*   监听变更事件
*   获取元素的selectedIndex
*   抓住所有的选择`getElementsByTagName()`
*   循环并获取选定的索引
*   比较看是否使用过

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:20:35.690

这可能有效：

```
var $selects = $('select');

// WHen a select is changed.
$selects.onchange(function() {
    // Storing it's selected value, assuming there is only one per select.
    var value = $(this).selected().first().attr('value');
    var $changedSelect = $(this);
    // For each select...
    $selects.each(function() {
        var $otherSelect = $(this);
        // ...that is not the one that just changed.
        if( ! $otherSelect.is($changedSelect)) {
            // If that other select's selected value is the same as the changed one's
            if($otherSelect.selected().first().attr('value') === value) {
                alert('...');
            }
        }
    });
} 
```

不过我没有尝试过，如果它不起作用，您可能需要更改其中的一些细节。

# java - 拆分复杂字符串

> ID：15979026
> 
> 赞同：6
> 
> 时间：2013-04-12T19:07:07.027
> 
> 标签：java, regex, string, split

我有一个这样的字符串：

```
1|f1|</a1|a2/></a3|a4/>|f2 
```

我想用'|'分割 通过 java 但我需要忽略`</`and `/>`。我怎样才能做到这一点？似乎是一个正则表达式方法

上面的字符串应该分成：

1

f1

a1|a2

a3|a4

f2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:30:23.783

`split`方法使用正则表达式作为参数，`|`在正则表达式中是特殊字符，表示或。让它`\\`在它之前成为正常的字符位置

```
"yourString".split("\\|"); 
```

在您的情况下，您还需要[前瞻](http://www.regular-expressions.info/lookaround.html#lookahead)机制，以便您的正则表达式看起来像

```
/></|(/>)?\\|(?=[^>]*(</|$))(</)? 
```

它会分裂

*   `/></`
*   `|``/>`在它之前或之后是可选的`</`，但只有在它`>`之后没有，直到`</`你的输入结束`$`。这将保证`|`在`</ />`

此外，为了摆脱在输入开始和结束时出现的问题，您需要在拆分之前将其删除`"</a|b/>|c|</d|e/>"`。`</``/>`

这似乎是必要的，因为我们不想产生空字符串作为产生的数组中的第一个或最后一个元素，就像万一`"ab".split("a")`会产生`{"", "b"}`

让我们测试一下：

```
for (String s : "</a0|b0/>|1|f1|</a1|a2/></a3|a4/>|f2|</a5|a6/>"
        .replaceAll("^</", "").split("/></|/>$|(/>)?\\|(?=[^>]*(</|$))(</)?")) {
    System.out.println(s);
} 
```

输出：

```
a0|b0
1
f1
a1|a2
a3|a4
f2
a5|a6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:28:15.977

您可以尝试以下使用否定前瞻的正则[表达式](http://www.regular-expressions.info/lookaround.html)。

```
(?!</[^\|]*)[\|](?![^\|]*/>) 
```

结果如下：

`[\|]`匹配的出现`|`

`(?!</[^\|]*)`声明所述匹配不能在前面`</sometext`

`(?![^\|]*/>)`声明所述匹配后不得跟随`sometext/>`

注意：在上面的例子`sometext`中是零个或多个不是`|`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T19:20:08.653

这个正则表达式应该匹配。如果一个失败转到下一个，我会留下一份可能的事情清单。第一个是 \b 应该转义词绑定，但 java 可能不需要转义转义反斜杠，所以我添加了第二个。如果这两个都失败，则移动到最后一个。这个说它必须是大写A到普通z之间的字母。现在应该没有任何空间的选择。

最后一个的最终结果是匹配：

"<" 任何字符，多次，">" 如果失败则

匹配：

任何字母或数字的字符

```
"(<.*?>|[^|\\b]*)" "(<.*?>|[^|\b]*)" "(<.*?>|[A-z0-9]*)"

public String[] methodName(String s)
{
ArrayList<String>list= new ArrayList<String>();
Pattern p=Pattern.compile("(<.*?>|[^|]*)");
Matcher match=p.matcher(s);
while(match.find())
{
 list.add(match.group());
}
String[] listArray= new String[list.size()];
return listArray.toArray(listArray);
} 
```

记得投票如果它有助于欢呼队友

# emacs - 托管在 github 上的已安装包的子模块的 emacs

> ID：15979032
> 
> 赞同：0
> 
> 时间：2013-04-12T19:07:16.303
> 
> 标签：emacs, github

我已经在几台计算机上安装了 emacs，为了在它们之间同步配置，我设置了一个 github 存储库来存储我的 emacs 配置，即我的文件夹 ~/.emacs.d

现在，我开始在一台计算机上使用 emacs，我使用 MELPA 安装了某些软件包，比如说 package_foo。现在我的 .emacs.d/elpa 目录中有一个名为 package_foo 的文件夹。我还发现 package_foo 实际上托管在 github 上。如果我可以对它进行子模块，那就太好了，因为我的 .emacs.d 也在 github 上。

因此，如果我通过 emacs 包管理器安装的 package_foo 在 github 上，我该如何自动对其进行子模块而不是将其复制到我的 .emacs.d/elpa 文件夹中？是否有一个 emacs 插件知道 package_foo 的来源，并将它的子模块安装（如果可能）而不是提取所有文件？这样不仅可以节省 github 上的空间，还可以在同步时节省我的带宽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T08:54:09.620

不要将子模块用于包。不要将包提交到您的存储库。

相反，将 Emacs 配置为自动为您安装缺少的包。您可以为此目的使用一些特殊功能：

```
(defun package-required (package) (unless (package-installed-p package) (package-install package))

(package-required 'magit) 
```

或者您可以使用[Carton](https://github.com/rejeep/carton)`Carton`通过在文件中声明它们来管理您的包。然后，您可以使用 shell 命令`carton install`安装缺少的包，并`carton update`更新所有包。

# ethernet - libpcap 没有实时接收，似乎正在缓冲数据包

> ID：15979033
> 
> 赞同：4
> 
> 时间：2013-04-12T19:07:17.293
> 
> 标签：ethernet, libpcap, buffering

所以我正在使用需要发送和接收原始以太网帧的设备。它是一种无线电，它使用以太网向其主机发送状态消息。它使用的协议实际上是 IPX，但我认为使用 libpcap 发送原始以太网帧比挖掘实现 IPX 的几十年前的代码更容易（它被 TCP/IP 取代，所以它已经很老了）。

我的程序发送了一个请求包（这个包每次都完全一样，它是无状态的），设备返回一个包含我需要的数据的响应包。我正在使用 pcap_inject 在另一个线程中发送帧和 pcap_loop 来进行接收。我最初将它放在一个线程中，但尝试了 2 个线程以查看它是否解决了我遇到的问题。

问题是 libpcap 似乎没有实时接收数据包。它似乎缓冲了大约 5 个，然后一次处理它们。我希望能够以最快的速度阅读它们。有什么方法可以在 libpcap 上禁用这种缓冲，或者提高刷新率？

一些示例输出（我刚刚打印出接收数据包的时间）。注意每组之间有大约一秒钟的时间

```
Time: 1365792602.805750 
Time: 1365792602.805791
Time: 1365792602.805806
Time: 1365792602.805816
Time: 1365792602.805825
Time: 1365792602.805834

Time: 1365792603.806886
Time: 1365792603.806925
Time: 1365792603.806936
Time: 1365792603.806944
Time: 1365792603.806952

Time: 1365792604.808007
Time: 1365792604.808044
Time: 1365792604.808055
Time: 1365792604.808063
Time: 1365792604.808071

Time: 1365792605.809158
Time: 1365792605.809194
Time: 1365792605.809204
Time: 1365792605.809214
Time: 1365792605.809223 
```

这是注入代码：

```
char errbuf[PCAP_ERRBUF_SIZE];
char *dev="en0";
if(dev==NULL){
    fprintf(stderr,"Pcap error: %s\n",errbuf);
    return 2;
}

printf("Device: %s\n",dev);

pcap_t *handle;
handle=pcap_open_live(dev, BUFSIZ, 1, 1000, errbuf);
if(handle==NULL){
    fprintf(stderr, "Device open error: %s\n",errbuf);
    return 2;
}

//Construct the packet that will get sent to the radio
struct ether_header header;
header.ether_type=htons(0x0170);
int i;
for(i=0;i<6;i++){
    header.ether_dhost[i]=radio_ether_address[i];
    header.ether_shost[i]=my_ether_address[i];
}

unsigned char frame[sizeof(struct ether_header)+sizeof(radio_request_packet)];
memcpy(frame, &header, sizeof(struct ether_header));
memcpy(frame+sizeof(struct ether_header), radio_request_packet, sizeof(radio_request_packet));
if(pcap_inject(handle, frame, sizeof(frame))==-1){
    pcap_perror(handle, errbuf);
    fprintf(stderr, "Couldn't send frame: %s\n",errbuf);
    return 2;
}

bpf_u_int32 mask;
bpf_u_int32 net;
if(pcap_lookupnet(dev,&net,&mask,errbuf)==-1){
    pcap_perror(handle, errbuf);
    fprintf(stderr,"Net mask error: %s\n",errbuf);
    return 2;
}

char *filter="ether src 00:30:30:01:b1:35";
struct bpf_program fp;
if(pcap_compile(handle, &fp, filter, 0, net)==-1){
    pcap_perror(handle, errbuf);
    fprintf(stderr,"Filter error: %s\n",errbuf);
    return 2;
}

if(pcap_setfilter(handle, &fp)==-1){
    pcap_perror(handle, errbuf);
    fprintf(stderr, "Install filter error: %s\n",errbuf);
    return 2;
}

printf("Starting capture\n");
pthread_t recvThread;
pthread_create(&recvThread, NULL, (void *(*)(void *))thread_helper, handle);

while(1){
    if(pcap_inject(handle, frame, sizeof(frame))==-1){
        pcap_perror(handle, errbuf);
        fprintf(stderr, "Couldn't inject frame: %s\n",errbuf);
        return 2;
    }
    usleep(200000);
}

pcap_close(handle); 
return 0; 
```

和接收代码：

```
void got_packet(u_char *args,const struct pcap_pkthdr * header,const u_char * packet){
    struct timeval tv;
    gettimeofday(&tv, NULL);
    double seconds=(double)tv.tv_sec + ((double)tv.tv_usec)/1000000.0;
    printf("Time: %.6f\n",seconds);
}

void *thread_helper(pcap_t *handle){
    pcap_loop(handle, -1, got_packet, NULL);
    return NULL;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:57:05.097

> 有没有办法在 libpcap 上禁用这种缓冲

目前没有 libpcap API 可以做到这一点。

但是，根据您正在运行的操作系统，可能有一些方法可以针对该特定操作系统执行此操作，即您可以执行此操作，但以非便携式方式进行。

对于使用 BPF 的系统，包括 *BSD 和...

...OS X，鉴于`"en0"`，我怀疑您正在使用，这样做的方法是执行以下操作：

创建包含以下内容的`set_immediate_mode.h`头文件：

```
extern int set_immediate_mode(int fd); 
```

创建包含以下内容的`set_immediate_mode.c`源文件：

```
#include <sys/types.h>
#include <sys/time.h>
#include <sys/ioctl.h>
#include <net/bpf.h>

#include "set_immediate_mode.h"

int
set_immediate_mode(int fd)
{
    int on = 1;

    return ioctl(fd, BIOCIMMEDIATE, &on);
} 
```

如果尚未包含这些文件，则将 和 添加`#include <string.h>`到您的程序中，添加到您的程序中，并在调用成功后添加以下代码：`#include <errno.h>``#include "set_immediate_mode.h"``pcap_open_live()`

```
int fd;
fd = pcap_fileno(handle);
if (fd == -1) {
    fprintf(stderr, "Can't get file descriptor for pcap_t (this should not happen)\n");
    return 2;
}
if (set_immediate_mode(fd) == -1) {
    fprintf(stderr, "BIOCIMMEDIATE failed: %s\n", strerror(errno));
    return 2;
} 
```

这将*完全*禁用 BPF 通常执行的缓冲（这是您在 libpcap 中看到的缓冲；请参阅 BPF(4) 手册页），以便数据包一到达就被传递。这改变了缓冲完成的方式，可能导致 BPF 的内部缓冲区比正常缓冲完成时更快地填满，因此这*可能会*导致数据包丢失，否则它们不会丢失，但是使用`pcap_set_buffer_size()`, as Kiran Bandla 建议的，*如果*发生这种情况可能会有所帮助（它可能不会，特别是考虑到您使用过滤器来防止“无趣”的数据包首先被放入 BPF 的缓冲区）。

在 Linux 上，这目前是没有必要的 - 完成的缓冲对于数据包的传递没有超时。在 Solaris 上，它会在 Solaris 11 上以类似方式完成（因为 libpcap 使用 BPF），但在早期版本的 Solaris 上会以不同方式完成（因为它们没有 BPF 而 libpcap 使用 DLPI）。在带有 WinPcap 的 Windows 上，`pcap_open()`有一个标志。

未来版本的 libpcap 可能会为此提供 API；我不能保证什么时候会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:36:30.443

您可以使用[pcap_set_buffer_size](http://linux.die.net/man/3/pcap_set_buffer_size)设置捕获缓冲区大小。确保在激活捕获句柄之前执行此操作。

降低缓冲区大小并不总是一个好主意。当心你的 CPU 并以高捕获率丢弃数据包。

# vim - 在启动 vim 后的固定时间调用函数

> ID：15979034
> 
> 赞同：0
> 
> 时间：2013-04-12T19:07:17.767
> 
> 标签：vim

我想调用一个函数，该函数在调用后的固定时间（比如 30 秒）执行某些操作。该函数可以在初始化时或在使用期间的某个时候调用。在我等待的时候，我会像往常一样继续使用 vim。这可能吗？

如果它有帮助，我正在使用用 perl 和 python 编译的 vim，并且我有插件 vimproc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:36:05.400

你最好的候选人是`CursorHold,CursorHoldI`事件。当用户暂停 4 秒时它们会触发，因此它经常发生，但他也很可能不会注意到随后触发的缓慢操作。

你无法避免 Vim 阻塞；特别是不适合加载慢速插件。Vim(script) 是单线程的；无法进行后台处理。虽然您可以使用（小心！）集成（Perl，Python，...）解释器（用于后台任务）的多线程支持，但当您需要“回调”到 Vim 核心时，这无济于事，您需要为用 Vimscript 编写的插件做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:03:54.163

我想出了以下内容：

```
if has('python') "{{{ LoadPythonDelayed
function! LoadPythonDelayed()

python << ENDP
import time
from threading import Thread
import vim

def LoadAddonPy():
    time.sleep(2)
    vim.command('call LoadAddon()')

Thread(target=LoadAddonPy).start()

ENDP
return ''
endfunction

call LoadPythonDelayed()
endif 
```

到目前为止它似乎工作，也许它可能会触发错误（如果有的话我会放在这里）。到目前为止我注意到的一件事是，通过使用它，我无法在线程存在之前退出 vim。

# c++ - STL 集上的引用运算符 []

> ID：15979036
> 
> 赞同：2
> 
> 时间：2013-04-12T19:07:26.683
> 
> 标签：c++, visual-c++, stl, reference, set

我刚刚熟悉 STL，但我不太明白为什么`operator []`会出现错误。

```
 int main(){
          set< int > s;
          for(int i=0; i<=1000; i++) s.insert((i*1777)%123);
          for(int i=0; i<s.size(); i++) cout<<s[i]<<endl;
        } 
```

然后我尝试了这个并收到另一个错误消息

```
 int main(){
          set< int > s;
          for(int i=0; i<=1000; i++) s.insert((i*1777)%123);
          for(int i=0; i<s.size(); i++) cout<<*(s.begin() + i)<<endl;
        } 
```

**我理解为什么它没有成员 like `push_back`，`pop_back`但我不明白为什么这两种引用方法不起作用（但它们适用于`vector`and `string`）。我知道这些运算符在库中没有重载，但为什么呢？**

经过一些网络搜索后，我确实弄清楚了如何引用它

```
 int main(){
          set< int > s;
          for(int i=0; i<=1000; i++) s.insert((i*1777)%123);
          for(set< int >::iterator i=s.begin(); i!=s.end(); i++) cout<<*i<<endl;
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T19:17:51.377

该标准没有为集合或其迭代器指定这些运算符，因为这些不是访问集合的有效方法。集合具有双向迭代器。这意味着为了移动到迭代序列中的第 n 个元素，您需要遍历其间的每个元素。因此，例如，如果要为集合的迭代器实现 operator+，在内部，它将是这样的：

```
iterator operator+(iterator it, size_t n)
{
    for (int i=0; i<n; ++i)
        ++it;
    return it;
} 
```

因此，换句话说，这将是一个 O(n) 操作。如果您要像在 for 循环中那样迭代集合，它就会变成 O(n^2) for 循环。如果实施了同样的事情`operator[]`。正因为如此，考虑到效率的人都不会想要使用这些运算符，因此没有实现它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:14:15.017

STL 集不会重载下标运算符`[]`。您不能像使用其他容器（例如`vector`. 您可以在此处找到 STL 集的完整参考：[STL 集](http://en.cppreference.com/w/cpp/container/set)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T19:14:17.420

好吧，这是因为由于集合的性质，它`std::set`没有提供`operator[]`完全可以理解的下标。set[4] 应该是什么意思？从数学上讲，这是不正确的。在数学中 set1={1,2,3,4} 和 set2={4,3,2,1} 是相等的，所以如果这些集合中的每两个 set1[n] 和 set2[n] 仍然是正确的是不同的（如果`std::set`元素被排序，那么它会是相同的）？所以`std::set`没有下标`operator[]`，但是你仍然可以遍历这个容器。

```
int myints1[]= {10,20,30,40,50};
int myints2[]= {50,40,30,20,10}; 
std::set<int> s1 (myints1,myints1+5);
std::set<int> s2(myints2,myints2+5); // Internally, the elements in a set are 
                                     // always sorted following a specific strict
                                     // weak ordering criterion indicated by its
                                     // internal comparison object, so this set
                                     // will be the same as s2
if(s1==s2){
    printf("sets: true");
}else printf("sets: false");
std::set<int>::iterator it2=s2.begin();
for(std::set<int>::iterator it1=s1.begin();it1!=s1.end();it1++){
            printf("\ns1: %d  s2: %d",*it1,*it2);
    it2++;
} 
```

> 输出：
> 
> 套：真
> 
> s1：10 s2：10
> 
> s1：20 s2：20
> 
> s1：30 s2：30
> 
> s1：40 s2：40
> 
> s1：50 s2：50

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T20:34:03.767

@BenjaminLindley 正确地指出，`T& operator[](std::size_t)`对于没有随机访问迭代器的容器没有意义，因为所有随机访问循环都是`O(N^2)`复杂的（在元素的外部循环中是线性的，`std::advance`在迭代器上的时间是线性的）。出于这个原因，在**序列容器**`std::array`之外，只有`std::vector`和`std::deque`提供`operator[]`，但`std::list`（双向迭代器）和`std::forward_list`（前向迭代器）没有。

**有序关联容器**（、及其多个表亲）仅提供双向迭代器，而无序`std::set`关联**容器**（及其多个表亲）至少具有前向迭代器。他们也没有成为会员。因此，您需要编写而不是，这使得这种调用的复杂性非常明显。`std::map`**`std::unordered_set``std::unorderd_map``operator[](std::size_t)``std::advance(my_set.begin(), n)``my_set[n]``O(N)`**

 **作为补充说明：类似地图的容器包含键值对，这些容器的关联性质通过另一个表示`operator[]`，但不是由偏移量索引，而是使用“关联”键，并且它们具有签名`Value& operator[](Key const&)`（和自 C++11 以来的右值引用重载）。这些运算符对 具有`O(log N)`复杂性`std::map`和摊销`O(1)`复杂性`std::unordered_map`。这将分别给出这些容器的所有键`O(N log N)`和`O(N)`复杂性的循环。

关联`operator[]`版本还具有**插入语义**：调用 like`my_map[my_key] = my_value;`将尝试将对插入`my_key, my_value`映射，如果这样的元素已经存在，则返回一个迭代器。请注意，`const`这些关联元素访问也没有重载：为此使用`find()`成员函数。

对于`std::set`重载`operator[](Key const&)`没有任何意义，因为它只会表达键与自身相关联的事实，而插入语义已经通过`insert()`成员函数更直接地表达了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-27T04:29:59.187

如果 BST 的每个节点都维护其后代的计数，则可以在 O(log(n)) 时间内找到 BST 的第 i 个元素，并且可以在 O(1) 时间内返回整个树的大小。每次插入和删除的开销将是 O(log(n))，这已经是 O(log(n)) 时间的操作。**

# c# - 在我的 .net 网站中使用 Directory.GetFiles

> ID：15979037
> 
> 赞同：1
> 
> 时间：2013-04-12T19:07:31.890
> 
> 标签：c#, .net

当我建立我的 .net 站点时，我使用 Directory.GetFiles(@"D:\project\images"); 检索文件路径。

但是当我将它部署在互联网服务器上时，我必须更改这个文件夹的链接，你能帮我怎么做吗？我可以在 Directory.GetFiles() 中使用相对链接还是如何使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:14:41.910

将路径放在您的*web.config*中。无论如何，您不应该是硬编码路径。如果将来发生变化怎么办？

在您的设置中添加：

```
<appSettings>
    <add key="myPath" value="D:\project\images"/>
</appSettings> 
```

...然后从您的应用程序中调用它：

```
var myPath = WebConfigurationManager.AppSettings["myPath"]; 
```

如果您真的想发疯，请查看[web.config 转换](http://msdn.microsoft.com/en-us/library/dd465318%28v=vs.100%29.aspx)，以便在您发布时，您的发布配置将被转换并为您应用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:17:40.763

在 web.config 中有类似的东西：

```
<configuration>
    <appSettings>
        <add key="ImagesFolder" value="\Images" />
    </appSettings>
</configuration> 
```

然后在你的 ASP.NET C# 代码后面你可以使用：

```
var ImagesFolder = ConfigurationManager.AppSettings["ImagesFolder"];

var files = Directory.GetFiles(Server.MapPath(ImagesFolder)); 
```

请注意，您需要添加对`System.Configuration`程序集的引用，否则您将无法添加 using 语句并访问`ConfigurationManager`.

这样就没有硬编码值，您可以通过编辑 web 服务器上已部署文件夹中的 web.config 文件来为该应用设置编写所需的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T19:14:06.297

执行此操作的正确方法是使用[Server.MapPath](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx) ，它将您的 Web 应用程序中的虚拟路径映射到服务器中的物理路径。

# python - Python 逻辑辅助从主算法分支

> ID：15979043
> 
> 赞同：-1
> 
> 时间：2013-04-12T19:07:56.140
> 
> 标签：python, algorithm, python-3.x, tkinter, logic

我对一些 Python 代码有一些问题，这取决于我的逻辑。我有一个通过 UI 中的按钮单击调用的主函数，在此函数中取决于按钮单击的结果，将执行几个语句，我遇到的问题是分支到函数，然后返回到这一点执行下一个函数调用。这是我的代码：

```
 return #This is where I want this function to terminate and then return to the function above to execute the nextFunctionCall() function. 
```

将不胜感激任何帮助，谢谢。我在这里遇到的问题是每个函数运行一次，第一个函数应该执行 30 次，然后执行 else 子句，前提是 elif 语句中更改的状态没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:54:43.823

如果你想`nextFunctionCall(root)`在 30 次调用后执行`alarmActive`，你不需要让自己复杂化。只需将其删除并在块`enableCode`中调用它：`else`

```
def alarmActive(root, period=0):
    # ...
    else:
        nextFunctionCall(root) 
```

但是，可以减少很多冗余代码。例如，如果您只想`Flash`从 True 或 False 进行设置，反之亦然，并根据值打印`"On"`和，这更短更直接：`"Off"`

```
def alarmActive(root, period=0):
    global Flash
    if period <30 and AlarmStatus == "On":
        Flash = not Flash
        print("On" if Flash else "Off")
        period += 1
        print(period)
        root.after(500, lambda: alarmActive(root, period))
    else:
        if (AlarmStatus == "Off"):
            print("Alarm has been disabled before activation")
        nextFunctionCall(root) 
```

# shell - PowerShell 相当于 bash `exec > >(tee -a $logfile); 执行 2> >(tee -a $logfile >&2)`

> ID：15979060
> 
> 赞同：3
> 
> 时间：2013-04-12T19:08:30.333
> 
> 标签：shell, powershell

我正在将 bash 脚本日志记录移植到 Powershell，它在文件顶部有以下内容：

```
# redirect stderr and stdout
backupdir="/backup"
logfile=$backupdir/"std.log"
exec >  >(tee -a $logfile)
exec 2> >(tee -a $logfile >&2)
echo "directory listing:"
ls -la 
```

使用 exec 语句，stdout 和 stderror 都被重定向到日志文件。

bash 中的 exec 命令非常好，因为重定向是在脚本开始时设置的。如果可能，我想避免在每个命令上显式设置重定向。

PowerShell中是否有与上述内容等效的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:26:52.943

PowerShell 2,3,x 具有尝试将 PowerShell 窗口的所有输出记录到文本文件的[Transcript cmdlet 。](http://technet.microsoft.com/en-us/library/hh849687.aspx)有[一些限制](http://rkeithhill.wordpress.com/2009/03/06/effective-powershell-item-14-capturing-all-output-from-a-script/)。

*   未捕获外部可执行标准输出、标准错误

这是演示这一点的示例代码：

```
$this_path = Split-Path -Path $MyInvocation.MyCommand.Path -Parent
$log_path = Join-Path -Path $this_path -ChildPath script_log.txt
Start-Transcript -Path $log_path
$VerbosePreference = "continue"
$ErrorActionPreference = "continue"
$DebugPreference = "continue"
$WarningPreference = "continue"
& hostname.exe
Write-Host "write-host"
Write-Verbose "write-verbose"
Write-Error "write-error"
Write-Debug "write-debug"
Write-Warning "write-warning"
Get-Date
Stop-Transcript
& notepad $log_path 
```

上面的所有内容都将在 script_log.txt 中捕获，除了输出之外，`hostname.exe`因为它是一个外部可执行文件。

有一些解决方法：

```
powershell.exe -noprofile -file script.ps1 > script.log 
```

这会捕获包括`hostname.exe`' 的输出在内的所有内容，但它是在脚本之外完成的。

另一个是对于每个外部命令，通过主机 API 管道输出：

```
& hostname.exe | Out-Default 
```

这是在脚本中完成的，但是您会丢失 shell 窗口上 exe 中的任何文本着色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T01:22:57.993

如果我真的需要选择性地重定向整个脚本的输出流，我会将它作为后台作业运行。子作业的每个作业流都在一个单独的缓冲区中，可以从作业对象中读取，因此您几乎可以对它们做任何您想做的事情，包括在作业运行时读取它们。

# backup - 您如何在 Embarcadero Rapid SQL 中备份/导出数据源？

> ID：15979062
> 
> 赞同：2
> 
> 时间：2013-04-12T19:08:37.707
> 
> 标签：backup, rapidsql

您如何备份/导出快速 SQL 的数据源？（可以输入 rapidsql）

每个开发人员都需要设置自己的数据源，或者如果您需要转移到不同的机器上，这很麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:31:51.710

如果您正在运行更高版本之一，请选择“数据源”菜单，然后选择“管理数据源”。从那里，您可以选择单个数据源或所有数据源并将它们提取到 XML 文件中，以便于移植。

使用相同的选项（数据源 > 管理数据源）将数据源导入到新机器上的安装中，或在其他 Rapid SQL 用户之间共享数据源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:10:07.010

打开`regedit`并导出密钥：`HKEY_CURRENT_USER\Software\Embarcadero\Registered Datasources`

只需运行保存的 .reg 文件，即可将设置导入任何计算机。

# iphone - google chrome浏览器iphone中的Sencha标签栏底部没有出现

> ID：15979067
> 
> 赞同：1
> 
> 时间：2013-04-12T19:08:50.130
> 
> 标签：iphone, extjs, touch, tabbar

我是 sencha 的新手，我从一个适用于 ios 和 android 的网络应用程序开始，但是这个示例[Kitchen Sink](http://cdn.sencha.io/touch/sencha-touch-2.1.0/examples/kitchensink/index.html#demo/icons)谷歌浏览器 iPhone 中的标签栏底部没有完全出现，有人知道为什么吗？

# jquery - 使用 jQuery 替换表格行和列颜色

> ID：15979072
> 
> 赞同：0
> 
> 时间：2013-04-12T19:09:18.167
> 
> 标签：jquery, html

我正在尝试使用以下代码来交替表的行和列。

```
<script>
  $(document).ready(function()
  {
    $("table#id2 td:even").css("background-color", "LightGray");
    $("table#id2 tr:even").css("background-color", "LightBlue");
    $("table#id2 tr:odd").css("background-color", "LightYellow");
  });
</script> 
```

当我使用它时，我的 2 列表看起来像这样：

```
Gray Blue
Gray Yellow
Gray Blue
Gray Yellow 
```

我希望我的桌子看起来像这样：

```
Gray Blue
Yellow Yellow
Gray Blue
Yellow Yellow 
```

这可以使用 td:even、tr:odd 等吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:11:24.503

基本上，仅对`odd`行应用颜色尝试： 

```
<script>
  $(document).ready(function()
  {
    $("table#id2 td:even").css("background-color", "LightGray");
    $("table#id2 tr:even").css("background-color", "LightBlue");
    $("table#id2 tr:odd td").css("background-color", "LightYellow");
  });
</script> 
```

[在这里摆弄](http://jsfiddle.net/rB6Md/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:12:35.527

您必须指定背景颜色`tr:odd td`

```
$("table#id2 td:even").css("background-color", "LightGray");
$("table#id2 tr:even").css("background-color", "LightBlue");
$("table#id2 tr:odd td").css("background-color", "LightYellow"); 
```

这是一个显示解决方案的小提琴：http: [//jsfiddle.net/mEFWm/](http://jsfiddle.net/mEFWm/)

# php - 如何在 PHP 表单中显示“用户名”而不是“域\用户名”？

> ID：15979073
> 
> 赞同：0
> 
> 时间：2013-04-12T19:09:24.663
> 
> 标签：php, windows

我一直在寻找这个好几天。居然没有回答，真是意外。我有一个 PHP 表单，我想只显示没有域前缀的 IIS 登录用户。它一直让我发疯！感谢您的关注。

这就是我现在拥有的：

```
 $user = $_SERVER['REMOTE_USER'];
        echo "$user"; ?>" type="text" readonly="readonly" name="uneditablefield"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:15:41.017

你为什么不直接砍掉前缀？

```
$user = $_SERVER['REMOTE_USER'];
$user = array_pop (explode ("\\", $user));
    echo "$user"; ?>" type="text" readonly="readonly" name="uneditablefield"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:13:31.570

您是否尝试过使用 str_ireplace() 删除域\？假设域是恒定的，否则 Jon 的评论将是更好的选择。

# java - Spring AOP 未检测到自定义注释

> ID：15979074
> 
> 赞同：0
> 
> 时间：2013-04-12T19:09:27.680
> 
> 标签：java, spring, annotations, aop

所以，我一直在尝试使用 Spring AOP，但是一旦我开始使用自定义方法注释，AOP 就会停止工作。

这是注释：

```
package com.test.annotations;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface Performance {

} 
```

方面：

```
package com.test.aspects;

import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Pointcut;
import org.springframework.stereotype.Component;

@Component
@Aspect
public class Audience {
    @Pointcut("@annotation(com.test.annotations.Performance)")
    public void performance() {
    }

    @Around("performance()")
    public void beforePerformance(ProceedingJoinPoint jointPoint) throws Throwable{
        System.out.println("The audience is getting ready for the show");

        jointPoint.proceed();

        System.out.println("The show is over, audience's leaving");
    }

} 
```

使用自定义注释的类：

```
package com.test.performers;

import com.test.annotations.Performance;
import com.test.exceptions.PerformanceException;

public interface Performer {
    @Performance
    void perform() throws PerformanceException;
} 
```

最后是main方法的相关部分。

```
Performer kenny = (Performer) context.getBean("guitarist");
kenny.perform(); 
```

Guitarist 类正在实现执行者接口。

我已经环顾了几个小时，我看不出我做错了什么。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:32:24.590

注释中没有继承。在`Guitaritst`课堂上，当重写`perform()`方法时，你也应该注释它。

# html - 为什么我的 URL 被 Facebook 弄乱了？

> ID：15979077
> 
> 赞同：0
> 
> 时间：2013-04-12T19:10:16.060
> 
> 标签：html, facebook, url, url-rewriting, pretty-urls

我编写的网站上某些页面的链接如下所示：

```
http://myhymnal.net/2/be-thou-my-vision 
```

那将是id和slug。当我将此 URL 粘贴到 Facebook 帖子字段时，它最终获取“示例”的 URL 如下：

```
http://myhymnal.net/2/2/be-thou-my-vision 
```

谁能帮我弄清楚这些额外的`2/`来自哪里？我不明白。

* * *

**发现**

*   我粘贴的 URL`http://myhymnal.net/2/be-thou-my-vision`在浏览器中运行良好。
*   基本 href 设置为`http://myhymnal.net/`，我已将规范设置为`2/be-thou-my-vision`，这是相对于基本 URL 的，应该可以正常工作。虽然我想这可能是什么搞砸了？

除此之外，我真的不知道...... :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:22:38.790

查看[Facebook 的调试工具](https://developers.facebook.com/tools/debug)- 您正在设置相对于当前目录的规范 URL，而不是站点根目录 - 然后 facebook 正在获取[http://myhymnal.net/2/2/be-thou-my-vision](http://myhymnal.net/2/2/be-thou-my-vision)

对规范 URL 使用完全限定的 URL

# ruby-on-rails - 在 Rails 应用程序中仅使用单个控制器

> ID：15979078
> 
> 赞同：0
> 
> 时间：2013-04-12T19:10:18.543
> 
> 标签：ruby-on-rails, ruby

我正在尝试开发一个只需要一个控制器的应用程序，并使用 url 中的任何内容作为该控制器的参数。

我读过通常将 url 解析为 GET 控制器/动作，如 example.com/controller/action/params，但我想使用特定的控制器和特定的动作。

有什么方法可以将 URL 解析为 example.com/params，始终由相同的操作和控制器处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:34:03.933

我认为这是个坏主意，但是您可以使用渲染操作来做到这一点：

```
def index
  if self.class.instance_methods(false).include? params[:page].to_sym
    render action: params[:page]
  else
    #error_404
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:18:41.800

就在这里。在您的`config/routes.rb`文件中定义路线：

```
match "catchall/*page", :to => "catchall#respond" 
```

然后在你的控制器中：

```
class CatchallController < ApplicationController

  def respond

  end 
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:19:07.527

[Rails路由](http://guides.rubyonrails.org/routing.html#segment-constraints)指南中有几个这样的例子。该文件`config/routes.rb`是您设置从 URL 到控制器的映射的位置。

一个具体的例子是这样的：

```
match '/:username' => 'users#show' 
```

任何不匹配的请求都将被路由到`UsersController`'`show`方法，并在`params`哈希中传递字符串作为`username`键的值。

# ios - 是否可以在 PFImageView 中为新加载的图像设置动画？与 parse.com PFImageView 相关

> ID：15979084
> 
> 赞同：0
> 
> 时间：2013-04-12T19:10:35.687
> 
> 标签：ios, animation, uiimageview, parse-platform

我正在创建一个带有默认图像的 PFImageView。然后我在后台加载图像，当图像完成从服务器下载后，它会立即显示并替换占位符/默认图像。问题是从默认图像到下载图像的过渡不是很愉快。有没有办法创建淡出默认并淡入下载的动画？

这是我的代码。

```
// set the pfImageView into the webView
_pfImageView = [[PFImageView alloc] initWithImage:[UIImage imageNamed:[NSString stringWithFormat:@"%dpTall.jpg", [self.drink.glassId intValue]]]];
_pfImageView.frame = CGRectMake(244, 0, 76, 114);
[webView.scrollView addSubview:_pfImageView];

// create a query for finding images on Parse
PFQuery *query = [PFQuery queryWithClassName:@"Images"];
[query whereKey:@"drinkId" equalTo:[NSNumber numberWithInt:self.drink.primaryKey]];

    [query getFirstObjectInBackgroundWithBlock:^(PFObject *object, NSError *error) {

    if (!error) {
        PFFile *imageFile = [object objectForKey:@"image"];
        _pfImageView.file = imageFile;
        [_pfImageView loadInBackground];

    } else {
        NSLog(@"PFQuery Error:%@", [error localizedDescription]);
    }
}]; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-12T09:59:54.400

我在 PFImageView 上有一个类别，可以在每次出现图像时获得交叉淡入淡出动画：

```
@implementation PFImageView (Utility)

// Add a fade animation to images
-(void) setImage:(UIImage *)image {
    if ([self.layer animationForKey:KEY_FADE_ANIMATION] == nil) {
        CABasicAnimation *crossFade = [CABasicAnimation animationWithKeyPath:@"contents"];
        crossFade.duration = 0.6;
        crossFade.fromValue  = (__bridge id)(self.image.CGImage);
        crossFade.toValue = (__bridge id)(image.CGImage);
        crossFade.removedOnCompletion = NO;
        [self.layer addAnimation:crossFade forKey:KEY_FADE_ANIMATION];
    }

    [super setImage:image];
}

@end 
```

您只需要一个占位符图像，这样动画就可以第一次出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:59:41.593

在我看来，我认为放弃对 PFImageView 的依赖并只使用普通的 UIImageView 并首先使用占位符设置它会更容易，就像你目前正在做的那样。然后在从 IF 语句开始的 getFirstObjectInBackgroundWithBlock 完成块中执行类似的操作....

```
if(!error)
{
    PFFile *imageFile = [object objectForKey:@"image"];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData *data = [imageFile getData];

        if(data)
        {
            dispatch_async( dispatch_get_main_queue(), ^{ 

                [UIView animateWithDuration:2.0 
                animations:^{ 
                    //imageView is your UIImageView you are trying to set/change
                    imageView.alpha = 0.0f;
                } 
                completion:^(BOOL finished){
                    [UIView animateWithDuration:2.0
                    animations:^{ 
                        imageView.image = [UIImage imageWithData:data];
                        imageView.alpha = 1.0f;
                    } 
                    completion:^(BOOL finished)
                    {
                    }];  
                }];//outside block
            });
        }
        else
        {
           //no data error handling here
        }                

    });
else
{
    //error handling here
} 
```

披露：我不在编译器附近，所以我还没有运行这段代码。

您也可以不使用外部 dispatch_async 而是使用带有完成块的 imageFile getdata 方法调用（它在 parse.com 网站 API 上），然后将 if(data) 中的所有内容放入该块而不是异步块中制成。我只是习惯于这样做。

# android - 格式化 ListView android 的“空列表”文本

> ID：15979085
> 
> 赞同：1
> 
> 时间：2013-04-12T19:10:39.463
> 
> 标签：android, listview

如何格式化 Android 中列表为空时显示的文本`ListView`？

```
<ListView
    android:id="@+id/android:list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/transparent"
    android:cacheColorHint="@android:color/transparent"
    android:dividerHeight="1dip" />

<TextView
    android:id="@+id/android:empty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/test_list"
    android:textColor="@color/white"
    android:textSize="25sp"
     /> 
```

我想将字体设置为资产中的字体..

```
mTypeFace = Typeface.createFromAsset(context.getAssets(), "fonts/myFont.ttf");
mEmptyTextView = (TextView)findViewById(**????**)    
mEmptyTextView.setTypeface(mTypeFace); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:13:18.263

您将需要`android.R.id.empty`用于初始化`mEmptyTextView`. 试试看：

```
mTypeFace = Typeface.createFromAsset(context.getAssets(), "fonts/myFont.ttf");
mEmptyTextView = (TextView)findViewById(android.R.id.empty);
mEmptyTextView.setTypeface(mTypeFace); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:22:28.540

```
<TextView
    android:id="@+id/empty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/test_list"
    android:textColor="@color/white"
    android:textSize="25sp"/> 
```

然后你可以通过 id 找到这个视图（不要使用`android:`前缀）：

```
import <your.package>.R;
...
mEmptyTextView = (TextView)findViewById(R.id.empty); 
```

ListView 也有一个特殊的方法来设置空视图：

```
ListView#setEmptyView 
```

[http://developer.android.com/reference/android/widget/AdapterView.html#setEmptyView(android.view.View)](http://developer.android.com/reference/android/widget/AdapterView.html#setEmptyView(android.view.View))

顺便说一句，您需要以某种方式隐藏空的 TextView （无需调用） `#setVisible(View.GONE)`，`TextView`方法是将其放入某种容器中并隐藏一个容器 - 但这是一种不好的方法。

`TextView`所以要么从不同的布局膨胀，要么在运行时创建他。

# wpf - 使用远程桌面连接打开应用程序时 WPF 应用程序崩溃

> ID：15979086
> 
> 赞同：1
> 
> 时间：2013-04-12T19:10:53.770
> 
> 标签：wpf, wpf-controls

全部，

我正在使用 VS2010 运行我的 WPF 应用程序，它在我的机器上运行良好。但是当我从另一台机器远程桌面进入我的机器（同一台机器）时，当我拖动滚动条时应用程序突然崩溃。相同的功能在我的机器上运行良好。

与 RDP 会话有什么关系吗？理想情况下，我在有和没有 RDP 的情况下从我的机器上运行应用程序。

有人可以帮我解决这个问题吗，我几天以来一直在研究这个

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:41:39.407

正如grantnz 建议的那样，您可以尝试订阅未处理的异常事件。这将允许您捕获异常并查看堆栈跟踪以获取更多详细信息。如果使用 .net framework 2.0 或更高版本，则不会捕获线程异常。为了解决这个问题，您可以将遗留异常处理添加到您的 app.config：

```
<configuration>
    <runtime>
        <legacyUnhandledExceptionPolicy enabled="1" />
    </runtime>
</configuration> 
```

注意：我建议仅将上述内容用于调试，而不是分发用于生产。

# objective-c - 多维 NSArray 的 NSPredicate

> ID：15979087
> 
> 赞同：1
> 
> 时间：2013-04-12T19:11:06.470
> 
> 标签：objective-c, nsarray, nspredicate, nsnumber

给定的是一个带有对象的 NSArray，每个对象都有一个带有浮点数的 NSArray，存储为 NSNumber。

我正在尝试创建一个 NSPredicate 来根据浮点值过滤我的主数组。那么，例如，如何获取所有值为 234.6 +/- 0.8 的对象作为子数组中的浮点数之一？

我可以为浮点数的一维 NSArray 做这样的事情：

```
float targetFloat = 234.6;
float delta = 0.8;

filterPredicate = [NSPredicate predicateWithFormat: @"myFloat > %f AND myFloat < %f", (targetFloat - delta),  (targetFloat + delta)];
filteredArray = [originalArray filteredArrayUsingPredicate: filterPredicate]; 
```

但是如何使用 NSNumbers 为我的 2D NSArray 更改它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:25:31.820

您可以在谓词中使用“SELF[index]”来访问子数组的特定元素。以下谓词查找第一个元素在指定范围内的所有子数组：

```
float lowValue = 1.5;
float hiValue = 2.5;
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF[0] > %f AND SELF[0] < %f", lowValue, hiValue];
NSArray *filtered = [array filteredArrayUsingPredicate:predicate]; 
```

如果要查找包含指定范围内*任意数字的子数组，请使用*

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY SELF BETWEEN %@", @[@(lowValue), @(hiValue)]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:46:24.257

您的谓词可以访问对象的属性，该属性按名称保存数组；我`list`在下面的示例中调用了它。然后使用`ANY`关键字检查数组中的所有值，并`BETWEEN`确定这些值是否在您选择的范围内。

```
#import <Foundation/Foundation.h>

@interface Grumolo : NSObject
@property (copy, nonatomic) NSArray * list;
@end

@implementation Grumolo
- (NSString *)description
{
    return [NSString stringWithFormat:@"%@: %p, list: %@", NSStringFromClass([self class]), self, [self list]];
}
@end

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        float target = 234;
        float delta = 0.8;
        NSPredicate * p = [NSPredicate predicateWithFormat:@"ANY list BETWEEN %@", @[@(target-delta), @(target+delta)]];

        NSArray * yes = @[@234, @10, @100];
        NSArray * yes2 = @[@0, @16, @234];
        NSArray * no = @[@1, @2, @3];

        Grumolo * g1 = [Grumolo new];
        [g1 setList:yes];
        Grumolo * g2  = [Grumolo new];
        [g2 setList:yes2];
        Grumolo * g3 = [Grumolo new];
        [g3 setList:no];

        NSLog(@"%@", [@[g1, g2, g3] filteredArrayUsingPredicate:p]);

    }
    return 0;
} 
```

您可能还想尝试`predicateWithBlock:`，它可以让您表达您正在尝试对每个数组进行传统循环执行的操作，`YES`如果您找到符合您的标准的元素并且`NO`如果您用尽列表，则返回。

```
NSPredicate * pb = [NSPredicate predicateWithBlock:^BOOL(Grumolo * evaluatedObject, NSDictionary *bindings) {
        NSArray * list = [evaluatedObject list];
        __block BOOL result = NO;
        [list enumerateObjectsUsingBlock:^(NSNumber * obj, NSUInteger idx, BOOL *stop) {
            BOOL moreThanLower = (NSOrderedDescending == [obj compare:@(target-delta)]);
            BOOL lessThanUpper = (NSOrderedAscending == [obj compare:@(target+delta)]);
            if( moreThanLower && lessThanUpper ){
                *stop = YES;
                result = YES;
                return;
            }
        }];

        return result;
    }]; 
```

# web-services - 发布 BizTalk 服务。它如何将参数返回给调用应用程序？

> ID：15979089
> 
> 赞同：0
> 
> 时间：2013-04-12T19:11:09.437
> 
> 标签：web-services, wcf, biztalk, biztalk-2010

我有一个调用 BizTalk WCF 服务（由 BizTalk WCF 发布向导生成）的 MVC Web 应用程序。预计在向此 Service 传递参数后，会从 BizTalk 业务流程中获得一个返回值。

我的问题是，如何创建一个可以将参数返回给调用 MVC Web 应用程序的编排？

这里的任何示例或教程都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:21:54.617

不确定您是否能够通过编排来做到这一点。

我认为这是一个类似的问题 - [BizTalk web service to return a value 而不是 void + ref](https://stackoverflow.com/questions/6627798/biztalk-web-service-to-return-a-value-rather-than-void-ref)

代码项目[示例](http://www.codeproject.com/Articles/462628/BizTalk-Server-WCF-Custom-Service-Behaviour)

# perl - 我可以在 Moose 中重载方法吗？

> ID：15979095
> 
> 赞同：2
> 
> 时间：2013-04-12T19:11:28.627
> 
> 标签：perl, moose

我正在寻找一种类似于 Java 的解决方案，借此我可以创建具有相同名称但具有不同参数列表的方法。

例如

```
method makeDeposit() {
    system("cls");
    print "How much money do you want to deposit?: ";
    chomp (my $amount = <STDIN>);
    $self->insufficientFunds(0);
    $self->balance($self->balance() + $amount);
    $self->performBalanceInquiry();
    return;
}

method makeDeposit(Int $amount) {
    $self->insufficientFunds(0);
    $self->balance($self->balance() + $amount);
    $self->performBalanceInquiry();
    return;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T19:20:09.720

Perl 是一种类型相当松散的语言，方法签名中的（伪）类型名称只是动态输入验证代码的简写。

然而，在 CPAN 的无限领域中，有一个模块[`MooseX::MultiMethods`](https://metacpan.org/module/MooseX%3a%3aMultiMethods)可以让你做你想做的事——但你必须在你的方法前面加上`multi`关键字。

例如

```
multi method makeDeposit() { ... }
multi method makeDeposit(Int $amount) { ... } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T19:57:24.480

您可以通过检查长度来检查传递了多少个参数`@_`

```
sub makeDeposit {
    my $amount;
    if (@_) {
       ($amount) = @_;
    } else {
        system("cls");
        print "How much money do you want to deposit?: ";
        chomp($amount = <STDIN>);
    }

    $self->insufficientFunds(0);
    $self->balance($self->balance() + $amount);
    $self->performBalanceInquiry();
} 
```

通常，就像这里的情况一样，检查参数是否已定义更简单。

```
sub makeDeposit {
    my ($amount) = @_;
    if (!defined($amount)) {
        system("cls");
        print "How much money do you want to deposit?: ";
        chomp($amount = <STDIN>);
    }

    $self->insufficientFunds(0);
    $self->balance($self->balance() + $amount);
    $self->performBalanceInquiry();
} 
```

请注意，您的示例显示了不适当的关注点划分。不同的模块应该处理 IO 和帐户。

# asp.net-mvc - 使用基本身份验证注销用户？

> ID：15979098
> 
> 赞同：1
> 
> 时间：2013-04-12T19:11:38.337
> 
> 标签：asp.net-mvc, authentication, asp.net-web-api

我四处搜索，似乎没有一种非hacky的方法可以使用基本身份验证从浏览器中清除用户凭据。

我正在构建一个带有接受用户名/密码的 HTML 客户端的 WebAPI - 如果用户登录，他们当然也应该能够注销，或者系统应该在一段时间后自动注销。

是否有任何标准方法可以使用基本身份验证（通过 SSL）来完成此操作，还是我应该开始研究其他形式的身份验证？

编辑：查看 SimpleMembershipProvider，使用“IsLoggedIn”属性扩展 Membership 表是否有任何“错误”，我可以切换并检查每个请求？如果他们单击注销，那么我将重定向到登录页面并返回 401 Unauthorized ，除非他们再次提交凭据。这听起来好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:23:45.950

不会。在浏览器关闭之前，凭据会被浏览器缓存。没有非 hacky 的方法来清除凭据。看看[这个](http://blog.stevensanderson.com/2008/08/25/using-the-browsers-native-login-prompt/)。

# asp.net - ServiceStack、请求、线程 ID、log4net

> ID：15979101
> 
> 赞同：2
> 
> 时间：2013-04-12T19:11:47.847
> 
> 标签：asp.net, log4net, servicestack

我需要有一个使用 log4net 启用深度调试日志记录的选项。我熟悉经典的 ASP.Net 如何处理线程，但我想知道线程如何与 ServiceStack 一起工作。目标是使用 %Thread 在日志中将请求分组。我认为唯一的问题是可能存在线程池，并且 %thread id 将在后续请求中重用。

实际上，我正在寻找的是一个可以公开给 log4net 的唯一 ID，因此我可以在构建报告时将单个请求的整个日志记录分组在一起。

任何人都可以提供一些指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:37:06.583

[请参阅有关ServiceStack 中的并发性的](https://github.com/ServiceStack/ServiceStack/wiki/Concurrency-model)此页面，即托管在 ASP.NET 中的 ServiceStack 本身不会创建任何新线程，请求只是在处理请求的同一 IIS/Nginx/etc ASP.NET HTTP WebWorker 上处理。线程池和线程实例的最终控制权取决于底层的 ASP.NET，但它们共同重用相同的线程来处理不同的请求。

`IHttpRequest.Items`每当您想在单个请求的整个生命周期内**共享任何数据**时使用，例如，您可以使用 PreRequestFilters[在请求开始时简单地分配一个 Guid：](https://github.com/ServiceStack/ServiceStack/wiki/Order-of-Operations)

```
this.PreRequestFilters.Add((req, res) => req.Items["ReqId"] => Guid.NewGuid()); 
```

它持续请求的整个生命周期，并且`IHttpRequest`在所有过滤器、服务、视图等中都可以使用相同的实例。

# mysql - 在 MySQL WorkBench 中是否有用于创建具有重复列的表的宏？

> ID：15979104
> 
> 赞同：0
> 
> 时间：2013-04-12T19:11:54.347
> 
> 标签：mysql, database, database-design, mysql-workbench, workbench

我发现自己在 MySQL Workbench 中构建了许多具有相同前三列的表：

1.  ID
2.  活跃
3.  上次更改

这三列不仅重复了，而且它们的确切属性（不为空、id 的自动递增、isActive 的默认值 1 等）也重复了。

所以我的问题：

- 是否存在一个宏来开始为给定的表名构建表，以加快这个过程？

- 如果没有，有人可以提供一个链接让我开始构建这样的东西吗？

（然后在使用这个宏之后，我可以填写额外的列，但是数据库开发时间会更少）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:44:09.540

我的问题的答案 - 我根据 Ed Heal 的一个很好的建议（见他上面的评论）想到的，是使用 SQL Additions to workbench - Snippets。

您可以在“我的片段”下添加一个包含创建表脚本的新片段，而不是在文本文件中维护，然后在您执行鼠标右键 +“在文本光标处插入片段”后填写其余列

# ios - Lazytableimages 未加载到自定义单元故事板上

> ID：15979107
> 
> 赞同：-1
> 
> 时间：2013-04-12T19:12:07.833
> 
> 标签：ios, uitableview

我正在尝试将 Lazy Tableview 加载到情节提要的自定义单元格中，但表格视图看起来只是空白：

![空白表视图](https://i.stack.imgur.com/d667S.jpg)

这是源代码：

**延迟加载表.m**

```
#import "CellData.h"
#import "LazyLoadTableView.h"
#import "CustomCell.h"
#import "ParseOperation.h"
#import "ImageDownloader.h"
#define kCustomRowHeight    157
#define kCustomRowCount     1

static NSString *const xmlDataUrl =
@"http://itunes.apple.com/us/rss/topfreeapplications/limit=300/xml";

@interface LazyLoadTableView ()

@end

@implementation LazyLoadTableView
@synthesize tableElements;
@synthesize queue;
@synthesize connection;
@synthesize xmlData;
@synthesize tView;
@synthesize imageDownloadsInProgress;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization

        self.tableElements=[[NSMutableArray alloc] init];
        self.imageDownloadsInProgress = [NSMutableDictionary dictionary];

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    self.title=@"Menu";
    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:xmlDataUrl]];
    self.connection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];

    // Test the validity of the connection object.
    NSAssert(self.connection != nil, @"Failure to create URL connection.");

    // show in the status bar that network activity is starting
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

}

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        int count = [tableElements count];

        // ff there's no data yet, return enough rows to fill the screen
        if (count == 0)
        {
            return kCustomRowCount;
        }
        return count;
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        // customize the appearance of table view cells

        static NSString *placeholderCellIdentifier = @"PlaceholderCell";

        // add a placeholder cell while waiting on table data
        int nodeCount = [self.tableElements count];

        if (nodeCount == 0 && indexPath.row == 0)
        {
            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:placeholderCellIdentifier];
            if (cell == nil)
            {
                cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                              reuseIdentifier:placeholderCellIdentifier];
                cell.detailTextLabel.textAlignment = NSTextAlignmentCenter ;
                cell.selectionStyle = UITableViewCellSelectionStyleNone;
            }

            cell.detailTextLabel.text = @"Loading…";

            return cell;
        }

        static NSString *CustomCellIdentifier = @"CustomCellIdentifier";

        CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CustomCellIdentifier];
        if (cell == nil) {
            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
            for (id oneObject in nib) if ([oneObject isKindOfClass:[CustomCell class]])
                cell = (CustomCell *) [nib objectAtIndex:0];
        }
        // Leave cells empty if there's no data yet
        if (nodeCount > 0)
        {
            // Set up the cell...
            CellData *cellData = (self.tableElements)[indexPath.row];

            cell.name.text = cellData.name;

            // Only load cached images; defer new downloads until scrolling ends
            if (!cellData.icon)
            {
                if (self.tView.dragging == NO && self.tView.decelerating == NO)
                {
                    [self startIconDownload:cellData forIndexPath:indexPath];
                }
                // if a download is deferred or in progress, return a placeholder image

                cell.itemImage.image = [UIImage imageNamed:@"Placeholder.png"];
            }
            else
            {
                cell.itemImage.image = cellData.icon;
            }

        }

        return cell;
    }

    - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
        return kCustomRowHeight;

    }

    - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    self.xmlData = [NSMutableData data];    // start off with new data
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [self.xmlData appendData:data];  // append incoming data
}
#pragma mark -
#pragma mark NSURLConnection delegate methods

- (void)handleError:(NSError *)error
{
    NSString *errorMessage = [error localizedDescription];
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Cannot Show Data"
                                                        message:errorMessage
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
    [alertView show];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    if ([error code] == kCFURLErrorNotConnectedToInternet)
    {
        // if we can identify the error, we can present a more precise message to the user.
        NSDictionary *userInfo = @{NSLocalizedDescriptionKey: @"No Connection Error"};
        NSError *noConnectionError = [NSError errorWithDomain:NSCocoaErrorDomain
                                                         code:kCFURLErrorNotConnectedToInternet
                                                     userInfo:userInfo];
        [self handleError:noConnectionError];
    }
    else
    {
        // otherwise handle the error generically
        [self handleError:error];
    }

    self.connection = nil;   // release our connection
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    self.connection = nil;   // release our connection

    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    // create the queue to run our ParseOperation
    self.queue = [[NSOperationQueue alloc] init];
    ParseOperation *operation = [[ParseOperation alloc] initWithData:self.xmlData delegate:self];

    [queue addOperation:operation]; // this will start the "ParseOperation"

    self.xmlData = nil;
}
- (void)didFinishParsing:(NSArray *)cellDataList
{
    [self performSelectorOnMainThread:@selector(handleLoadedApps:) withObject:cellDataList waitUntilDone:NO];

    self.queue = nil;   // we are finished with the queue and our ParseOperation
}

- (void)parseErrorOccurred:(NSError *)error
{
    [self performSelectorOnMainThread:@selector(handleError:) withObject:error waitUntilDone:NO];
}
- (void)handleLoadedApps:(NSArray *)loadedCellData
{
    [self.tableElements addObjectsFromArray:loadedCellData];

    // tell our table view to reload its data, now that parsing has completed
    [self.tView reloadData];
}

// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return YES;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)startIconDownload:(CellData *)cellData forIndexPath:(NSIndexPath *)indexPath
{
    ImageDownloader *imageDownloader = imageDownloadsInProgress[indexPath];
    if (imageDownloader == nil)
    {
        imageDownloader = [[ImageDownloader alloc] init];
        imageDownloader.cellData = cellData;
        imageDownloader.indexPathInTableView = indexPath;
        imageDownloader.delegate = self;
        imageDownloadsInProgress[indexPath] = imageDownloader;
        [imageDownloader startDownload];
    }
}

// this method is used in case the user scrolled into a set of cells that don't have their app icons yet
- (void)loadImagesForOnscreenRows
{
    if ([self.tableElements count] > 0)
    {
        NSArray *visiblePaths = [self.tView indexPathsForVisibleRows];
        for (NSIndexPath *indexPath in visiblePaths)
        {
            CellData *cellData = (self.tableElements)[indexPath.row];

            if (!cellData.icon) // avoid the app icon download if the app already has an icon
            {
                [self startIconDownload:cellData forIndexPath:indexPath];
            }
        }
    }
}

// called by our ImageDownloader when an icon is ready to be displayed
- (void)imageDidLoad:(NSIndexPath *)indexPath
{
    ImageDownloader *imageDownloader = imageDownloadsInProgress[indexPath];
    if (imageDownloader != nil)
    {
        CustomCell *cell = (CustomCell *)[self.tView cellForRowAtIndexPath:imageDownloader.indexPathInTableView];

        // Display the newly loaded image
        cell.itemImage.image = imageDownloader.cellData.icon;
    }
}

#pragma mark -
#pragma mark Deferred image loading (UIScrollViewDelegate)

// Load images for all onscreen rows when scrolling is finished
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    if (!decelerate)
    {
        [self loadImagesForOnscreenRows];
    }
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    [self loadImagesForOnscreenRows];
}

@end 
```

**CustomCell.m**

```
#import "CustomCell.h"

@implementation CustomCell

@synthesize itemImage;

@synthesize name;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:46:24.160

没有通读所有代码，但看起来您正在尝试延迟加载带有一些文本的图像。我强烈建议使用[SDWebImage](https://github.com/rs/SDWebImage)进行延迟加载。设置简单且非常直接。

# javascript - 如何将滚动事件附加到 Ace Editor？

> ID：15979110
> 
> 赞同：2
> 
> 时间：2013-04-12T19:12:20.527
> 
> 标签：javascript, richtextbox, ace-editor

我正在使用 Javascript 富文本编辑器[ACE Editor](http://ajaxorg.github.io/ace/)。我已经设法完成了大部分我需要做的事情，但我需要在编辑器上附加一个滚动事件。

我怎么做？API 说要使用 ScrollBar ( [http://ajaxorg.github.io/ace/#nav=api&api=scrollbar](http://ajaxorg.github.io/ace/#nav=api&api=scrollbar) )，但我不知道如何使用它！

如果有人能指出我正确的方向，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T07:44:51.923

有从[这里发出的](https://github.com/ajaxorg/ace/blob/master/lib/ace/editor.js#L163)[changeScrollTop](https://github.com/ajaxorg/ace/blob/master/lib/ace/edit_session.js#L988)和 changeScrollLeft 事件`editor.session` 被编辑器使用

# heroku - 如何使用 Heroku 的调度程序在 2X 大小的测功机中运行作业？

> ID：15979111
> 
> 赞同：0
> 
> 时间：2013-04-12T19:12:22.473
> 
> 标签：heroku, scheduled-tasks

我想使用 Heroku 的[调度程序插件在](https://devcenter.heroku.com/articles/dyno-size)[大型 Heroku dyno](https://devcenter.heroku.com/articles/scheduler)上运行作业 。这可能吗？如果是这样，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:08:14.337

目前这是不可能的，但是它在 2X dynos 的请求功能列表中很高，Heroku 正在研究它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-07T18:42:56.443

Heroku 现在支持在 Heroku Scheduler 上选择您的测功机大小（请参阅[Heroku 文档](https://devcenter.heroku.com/articles/scheduler)）

> 在调度程序仪表板上，单击“添加作业...”，输入任务，选择频率、测功机大小和下次运行时间。

此功能于 2013 年 6 月 6 日添加（请参阅[Heroku 变更日志）](https://devcenter.heroku.com/changelog-items/273)

# java - 我们如何让 Java 代码跳转到 finally

> ID：15979113
> 
> 赞同：1
> 
> 时间：2013-04-12T19:12:32.710
> 
> 标签：java, exception, try-catch-finally

这是我看到的一段代码

```
 1 session s=null; 
 2 try{
 3    s= SessionCreator.createSession();
 4    System.out.println("Session Created");
 5    s.validate(); 
 6 }catch (Exception e){
 7    e.printStackTrace(); 
 8 }finally{
 9    s.close();
10 } 
```

调试器从第 3 行跳到第 9 行，这怎么可能？4,5 和 7 均未执行。这让我很困惑。第 3 行是供应商代码，所以我不知道发生了什么。有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:18:36.357

尝试使用`catch (Throwable e)`而不是`Exception`. [可能会抛出错误](http://docs.oracle.com/javase/6/docs/api/java/lang/Error.html)，并且错误不是“异常”的子类，而是扩展了“可抛出” 。

这是一个例子：http: [//ideone.com/Zs7HGw](http://ideone.com/Zs7HGw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:16:04.097

在这里阅读。

[http://docs.oracle.com/javase/tutorial/essential/exceptions/handling.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/handling.html)

放入`try`块中的任何代码都有可能失败。如果它确实失败了（可能在第 2 行或第 4 行），它应该跳出`try`块并进入`catch`块。该`finally`块将以任何一种方式执行。

如果第 2 行失败，您的描述听起来是正确的，除了第 6 行**应该**被执行。如果第 6 行没有被执行，那么你的整个`try`块就成功了。确切的输出是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:18:46.037

如果第 4 行和第 7 行都没有被执行，那么**可能**（我强调“可能”，因为我不太了解 Java 异常机制）第 3 行不是抛出一个`Exception`对象，而是一个`Error`或一个`Throwable`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T19:19:04.377

我只从远程调试会话中知道这个问题，其中底层代码服务器端与我们在本地看到的代码不对应。由于调试器只传达行而不是代码本身，它可能导致不可能的跳转。

你远程调试吗？即使没有，你能重新构建整个项目吗？

# c# - 无法连接到自托管 WCF 服务

> ID：15979114
> 
> 赞同：0
> 
> 时间：2013-04-12T19:12:34.943
> 
> 标签：c#, wcf, soap, windows-services

我正在尝试构建一个相当基本的 WCF SOAP Web 服务，作为 Windows 服务自托管。Windows 服务本身已在我的机器上启动并运行——我只是无法通过 Visual Studio 或 Web 浏览器在本地访问它。

相关的 C# 代码如下。假设`MyDummyService`执行合同`IDummyService`：

```
public class Program : ServiceBase
{
    private ServiceHost host = null;
    private readonly Uri baseAddress = new Uri("http://localhost:8000/DummyAPI");

    public static readonly ILog log = LogManager.GetLogger(typeof(Program));
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    public static void Main(string[] args)
    {
        ServiceBase.Run(new Program());
    }

    public Program()
    {
        this.ServiceName = "DummyService";
    }

    protected override void OnStart(string[] args)
    {
        log.Info("Starting service");

        try
        {
            base.OnStart(args);

            host = new ServiceHost(typeof(MyDummyService), baseAddress);

            host.Open();
        }
        catch (Exception ex)
        {
            log.Error(ex.ToString());
        }
        finally
        {
            if (host != null)
                ((IDisposable)host).Dispose();
        }
    }

    protected override void OnStop()
    {
        log.Info("Stopping service");
        base.OnStop();
        host.Close();
    }
} 
```

相关`app.config`：

```
<system.serviceModel>
    <services>
        <service name="DummyAPI.MyDummyService" 
                 behaviorConfiguration="MyDummyBehavior">
           <endpoint 
               address="" 
               binding="basicHttpBinding" 
               contract="DummyAPI.IDummyService" />
           <endpoint address="mex" binding="mexHttpBinding" 
                     contract="IMetadataExchange" />
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="MyDummyBehavior">
                <serviceMetadata httpGetEnabled="True" policyVersion="Policy15"/>
                <serviceDebug includeExceptionDetailInFaults="True"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
</system.serviceModel> 
```

当我访问

```
http://localhost:8000/DummyAPI 
```

或者

```
http://localhost:8000/DummyAPI/MyDummyService 
```

（或后面跟着 ?wsdl 的任何一个）在网络浏览器中，我得到一个 404。显而易见的第一个问题：我在上面搞砸了什么？

`web.config`命名空间（或看起来像命名空间的东西）让我有点困惑。我可以在现场安全地弥补什么，以及什么需要反映 C# 类命名空间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T21:35:22.033

看起来您在 Start 方法中处理您的 ServiceHost，这实际上让您没有运行 ServiceHost。

```
finally
{
    if (host != null)
        ((IDisposable)host).Dispose();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:09:19.083

一个很好的入门读物是[使用配置文件配置服务](http://msdn.microsoft.com/en-gb/library/ms733932.aspx)。

service 元素上的 name 属性必须是实现服务的类型的完全限定名称。

端点元素上的契约属性必须是服务实现的接口的完全限定名称。

如果满足这两个条件，则 ServiceHost 应该找到并应用应用程序配置中指定的配置。

如果您是 WCF 新手，一个简单的入门方法是使用 WCF 服务配置编辑器，该编辑器可从 Visual Studio 的工具菜单中获得。

# javascript - 通过 javascript/ajax php 在动态创建的表中创建表单时出错

> ID：15979117
> 
> 赞同：0
> 
> 时间：2013-04-12T19:12:39.103
> 
> 标签：javascript, php, forms, file, html-table

我遇到的问题是`var myFileList = document.getElementById('upload_file').files;`当我尝试获取我的 PHP 文件“动态创建”的信息时，没有获取文件并且没有在代码中进行任何进一步的操作。但是，如果我在我的 HTML 页面中创建同一个表格并将表单附加到表格中，则代码可以完美运行。

总结一下：因为表格来自 PHP，所以表格不起作用。

我在 PHP 中的 col`appendChild`是这样完成的：

```
$display_String .= '<td><div id = "image'.$f1.'"></div></td>'; 
```

制作表单的 JavaScript 是：

```
 var f = document.createElement("form");
f.setAttribute('enctype',"multipart/form-data");
f.setAttribute('method',"post");
f.setAttribute('action',"uploadImage.php");

var i = document.createElement("input"); //input element, text
i.setAttribute('type',"file");
i.setAttribute('name',"upload_file");
i.setAttribute('id',"upload_file");
i.setAttribute('size',4);

f.appendChild(i);
document.getElementById("image1").appendChild(f); 
```

“image1”是 php 表中 div 的名称，正如我所说，如果我像这样在 html 文件中静态创建表，它可以正常工作

```
 <table>
    <tr>
        <td>test </td>
        <td> bah </td>
    </tr>
    <tr>  
        <td> <div id ="image1">  </div> </td>
        <td> col2</td>
    </tr>
    <tr>  
        <td></td>
        <td> col2 </td>
    </tr>
    </table> 
```

我知道这将是一件非常简单的事情，也很抱歉我不能为此使用 JQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:20:47.783

尝试将它放在加载文档时执行的函数中。

```
document.onload = doYourThing();

function doYourThing() {
    //Your code here
} 
```

# android - 如何使用 listview 将类添加到 viewpager

> ID：15979119
> 
> 赞同：0
> 
> 时间：2013-04-12T19:12:52.950
> 
> 标签：android, android-fragments, android-viewpager

我对 Android 很陌生，所以如果这是一个可怕的问题，请原谅我，但我已经搜索了高低，我一直在阅读很多材料，似乎无法弄清楚这一点。我使用默认视图之一（固定选项卡 + 滑动）在 Eclipse 中创建了一个应用程序。我用列表视图创建了第二个类，我正在尝试添加这个类以加载到其中一个选项卡中。

**编辑以包含完整的 MainActivity.java**

```
package com.sonnyparlin.gracietampa;

import java.util.Locale;
import android.app.ActionBar;
import android.app.FragmentTransaction;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.text.Html;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends FragmentActivity implements
    ActionBar.TabListener {

    SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Set up the action bar.
        final ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        // Create the adapter that will return a fragment for each of the three
        // primary sections of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(
                getSupportFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        // When swiping between different sections, select the corresponding
        // tab. We can also use ActionBar.Tab#select() to do this if we have
        // a reference to the Tab.
        mViewPager
                .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                    @Override
                    public void onPageSelected(int position) {
                        actionBar.setSelectedNavigationItem(position);
                    }
                });

        // For each of the sections in the app, add a tab to the action bar.
        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            // Create a tab with text corresponding to the page title defined by
            // the adapter. Also specify this Activity object, which implements
            // the TabListener interface, as the callback (listener) for when
            // this tab is selected.
            actionBar.addTab(actionBar.newTab()
                    .setText(mSectionsPagerAdapter.getPageTitle(i))
                    .setTabListener(this));
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onTabSelected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, switch to the corresponding page in
        // the ViewPager.
        mViewPager.setCurrentItem(tab.getPosition());
    }

    @Override
    public void onTabUnselected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
    }

    @Override
    public void onTabReselected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the sections/tabs/pages.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            // getItem is called to instantiate the fragment for the given page.
        // Return a DummySectionFragment (defined as a static inner class
            // below) with the page number as its lone argument.
            Fragment fragment = new DummySectionFragment();
            Bundle args = new Bundle();
            args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
        // Show 3 total pages.
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            Locale l = Locale.getDefault();
            switch (position) {
            case 0:
                return getString(R.string.title_section1).toUpperCase(l);
            case 1:
                return getString(R.string.title_section2).toUpperCase(l);
            case 2:
                return getString(R.string.title_section3).toUpperCase(l);
            }
            return null;
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply
     * displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static final String ARG_SECTION_NUMBER = "section_number";

        public DummySectionFragment() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View rootView;

            if (getArguments().getInt(ARG_SECTION_NUMBER) == 1) {
                rootView = inflater.inflate(R.layout.fragment_main_dummy,
                            container, false);
                TextView dummyTextView = (TextView) rootView
                        .findViewById(R.id.section_label);
                    dummyTextView.setText(Html.fromHtml(getString(R.string.page1text)));
            } else if (getArguments().getInt(ARG_SECTION_NUMBER) == 2) {

                    // I want to add my listview here

            } else {
                rootView = inflater.inflate(R.layout.fragment_main_dummy,
                        container, false);
                TextView dummyTextView = (TextView) rootView
                        .findViewById(R.id.section_label);
                dummyTextView.setText(Integer.toString(getArguments().getInt(
                        ARG_SECTION_NUMBER)));
            }
            return rootView;
        }
    }

} 
```

我的 TechniqueActivity.java 文件：

```
public class TechniqueActivity extends ListActivity{

    public TechniqueActivity() {
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // storing string resources into Array
        String[] technique_list = getResources().getStringArray(R.array.technique_list);

        // Binding resources Array to ListAdapter
        this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, R.id.label, technique_list));

    }

} 
```

如果有人能指出我正确的方向，我将非常感激，以便我可以使用我在 TechniqueActivity.java 中创建的列表视图填充我的应用程序的第二个选项卡。或者也许有一种完全不同/更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:22:31.050

好的，经过更多的研究和玩耍，我找到了解决方案，这基本上就是 Rarw 在他的答案的第二部分中所说的，即使用 Fragment 而不是 Activity。所以，我摆脱了 TechniqueActivity.java 并创建了一个 TechniqueFragment 代替。然后我在 getItem() 中调用它。

```
package com.sonnyparlin.gracietampa;

import java.util.Locale;

import android.app.ActionBar;
import android.app.FragmentTransaction;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.text.Html;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends FragmentActivity implements
        ActionBar.TabListener {

    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide
     * fragments for each of the sections. We use a
     * {@link android.support.v4.app.FragmentPagerAdapter} derivative, which
     * will keep every loaded fragment in memory. If this becomes too memory
     * intensive, it may be best to switch to a
     * {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Set up the action bar.
        final ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        // Create the adapter that will return a fragment for each of the three
        // primary sections of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(
                getSupportFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        // When swiping between different sections, select the corresponding
        // tab. We can also use ActionBar.Tab#select() to do this if we have
        // a reference to the Tab.
        mViewPager
                .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                    @Override
                    public void onPageSelected(int position) {
                        actionBar.setSelectedNavigationItem(position);
                    }
                });

        // For each of the sections in the app, add a tab to the action bar.
        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            // Create a tab with text corresponding to the page title defined by
            // the adapter. Also specify this Activity object, which implements
            // the TabListener interface, as the callback (listener) for when
            // this tab is selected.
            actionBar.addTab(actionBar.newTab()
                    .setText(mSectionsPagerAdapter.getPageTitle(i))
                    .setTabListener(this));
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onTabSelected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, switch to the corresponding page in
        // the ViewPager.
        mViewPager.setCurrentItem(tab.getPosition());
    }

    @Override
    public void onTabUnselected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
    }

    @Override
    public void onTabReselected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the sections/tabs/pages.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            // getItem is called to instantiate the fragment for the given page.
            // Return a DummySectionFragment (defined as a static inner class
            // below) with the page number as its lone argument.

            Fragment fragment;
            if (position == 0 || position == 2) {
                fragment = new DummySectionFragment();
                Bundle args = new Bundle();
                args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
                fragment.setArguments(args);
            } else {
                fragment = new TechniqueFragment();
                //setContentView(R.layout.technique_activity);
            }
            return fragment;
        }

        @Override
        public int getCount() {
            // Show 3 total pages.
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            Locale l = Locale.getDefault();
            switch (position) {
            case 0:
                return getString(R.string.title_section1).toUpperCase(l);
            case 1:
                return getString(R.string.title_section2).toUpperCase(l);
            case 2:
                return getString(R.string.title_section3).toUpperCase(l);
            }
            return null;
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply
     * displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static final String ARG_SECTION_NUMBER = "section_number";

        public DummySectionFragment() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View rootView;

            if (getArguments().getInt(ARG_SECTION_NUMBER) == 1) {
                rootView = inflater.inflate(R.layout.fragment_main_dummy,
                            container, false);
                TextView dummyTextView = (TextView) rootView
                        .findViewById(R.id.section_label);
                dummyTextView.setText(Html.fromHtml(getString(R.string.page1text)));
            } else {
                rootView = inflater.inflate(R.layout.fragment_main_dummy,
                        container, false);
                TextView dummyTextView = (TextView) rootView
                        .findViewById(R.id.section_label);
                dummyTextView.setText(Integer.toString(getArguments().getInt(
                        ARG_SECTION_NUMBER)));
            }
            return rootView;
        }
    }

    public static class TechniqueFragment extends Fragment {

        public TechniqueFragment() {
            // TODO Auto-generated constructor stub
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            View rootView;

            rootView = inflater.inflate(R.layout.technique_activity,
                    container, false);

            ListView lv1 = (ListView) rootView.findViewById(R.id.ListView01);
            String[] technique_list = getResources().getStringArray(R.array.technique_list);
            lv1.setAdapter(new ArrayAdapter<String>(lv1.getContext(), R.layout.list_item, technique_list));

            return rootView;
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:27:21.020

看起来您实际上并没有使用任何选项卡。查看[本教程](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)以了解基本思想。如果您要使用选项卡，您需要 (1) 创建选项卡，然后 (2) 将您的活动设置为由该选项卡加载。上面的代码看起来就像您正在创建一个活动，然后扩展该布局。博客文章很好地概述了一个简单的 3 选项卡应用程序，您可以根据自己的情况进行调整。

另一种方法是使用 a `ViewPager`，您可以[在此处阅读更多信息](http://developer.android.com/training/animation/screen-slide.html)。该`ViewPager`方法使用`Fragment`而不是`Acitivity`. 基本上，您创建一个`ViewPager`和一个适配器，然后将您的片段实例添加到其中。当您按照将片段添加到适配器的顺序滑动`ViewPager`旋转片段时。

这些看起来像是处理这种情况的两种最相关的方法。

# jquery - JSON 数据 $.每个函数上的前十个结果

> ID：15979120
> 
> 赞同：0
> 
> 时间：2013-04-12T19:12:56.683
> 
> 标签：jquery, json, each

我目前有一个 json 数据提要，我只想使用其中的“前十名”结果。

这是我当前的代码：

```
$.each(data.Categories, function (keyCat, valueCat) 
{
   //perform some actions here
}); 
```

我只想对数据执行此操作。`valueCat.Value`如果`data.Categories.length > 10`. 这`valueCat.Value`只是该类别中的一些项目。

我希望这足够清楚......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:15:40.850

**编辑：**如果可能，对数据进行排序。分类服务器端，这将更快/更可靠，那么下面的答案将起作用。

假设 data.Categories 已排序，这将起作用：

```
$.each(data.Categories, function (index, valueCat) {
    if(index<10) {
        //perform some actions here
    } else {
        return false; //break out of $.each()
    }
}); 
```

或者如果 Categories 是一个对象：

```
var i=0
$.each(data.Categories, function (keyCat, valueCat) {
    i++;
    if(i<10) {
        //perform some actions here
    } else {
        return false; //break out of $.each()
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:17:33.460

绝对没有必要为此使用 jQuery。它可以通过 vanilla JavaScript 功能轻松处理：

```
data.Categories.sort(function(a,b){
    return a.Value - b.Value;
});

for(var i = 0; i < 10; i++){
    var valueCat = data.Categories[i];
    // Perform Some Actions Here
} 
```

# c# - 无法使用 NPOI 编辑现有 Excel 文件？

> ID：15979121
> 
> 赞同：0
> 
> 时间：2013-04-12T19:13:02.040
> 
> 标签：c#, export-to-excel, npoi

我尝试使用 NPOI 创建一个新的 Excel 文件，它工作正常，读取（仅）一个 Excel 文件也可以。但是现在我想打开一个现有的 Excel 文件并在其上附加一些行，它在 NPOI.HSSF.UserModel.HSSFWorkbook 构造函数的代码行中崩溃了。这是代码：

```
using(FileStream fs = new FileStream(myFile, FileMode.Append)){
    HSSFWorkbook wb = new HSSFWorkbook(fs); //<-- It is crashed right at here
    ....
} 
```

没有异常细节，只是显示一个窗口说应用程序崩溃并提供3个选项可供选择，中间一个是关闭应用程序：
[快照](http://i.stack.imgur.com/WalJr.png)
这就是为什么我无法理解并很难解决它。

如果我将 FileMode 更改为 FileMode.Open，则构造函数可以正常工作，但这只是为了阅读。我认为有一些与 FileAccess 政策相关的事情并尝试了这个：

```
using(FileStream fs = new FileStream(myFile, FileMode.Append, FileAccess.ReadWrite)){//<-- However it is crashed right at here
    HSSFWorkbook wb = new HSSFWorkbook(fs); 
    ....
} 
```

我尝试了一种解决方法，方法是打开（只读）现有的 Excel 文件，复制其中的 1 张并将此表添加到新的 HSSFWorkbook 并将（只写）写入新的文件流，但是没有办法做到这一点，因为 HSSFWorkbook 没有 Worksheet 的集合，也没有 Add 方法，所以新的工作表只是通过 CreateSheet() 方法创建的。这太烦人了。

你能帮我解决这个问题吗？我先尝试 NPOI，然后再尝试 EPPlus。
您的帮助将不胜感激。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T18:32:27.567

你的文件格式是什么？xls 还是 xlsx？如果是 xlsx，您现在可以尝试 NPOI 2.0。支持 xlsx。这是下载链接：[https ://npoi.codeplex.com/releases/view/112932](https://npoi.codeplex.com/releases/view/112932)

# c# - c#中的if返回语句

> ID：15979122
> 
> 赞同：1
> 
> 时间：2013-04-12T19:13:03.787
> 
> 标签：c#, if-statement, return, overriding

我正在重写一个虚拟方法，我需要根据布尔表达式返回一个值。

```
 public override float Q()
    {
        return (float)Math.Sqrt(2 * A* B / C);
    } 
```

如果上面显示的计算值小于 D，我需要为 Q() 返回一个本地成员（称为 D）。我尝试使用常规 if 语句，但它不会返回值，除非它在 ​​if 语句之外返回。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T19:16:34.543

如何`if`完全跳过：

```
return Math.Max(D, Math.Sqrt (2*A*B/C)); 
```

或使用三元运算符

```
return  Math.Sqrt (2*A*B/C) < D ? D :  Math.Sqrt (2*A*B/C); // too verbose but you get the idea 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:15:46.617

我认为这会起作用

```
public override float Q(){
    var returnValue = (float)Math.Sqrt(2 * A * B / C);

    if (returnValue < D){
        return D;
    }

    return returnValue;
} 
```

**编辑：**
或者你可以清理它

```
public override float Q(){
    var returnValue = (float)Math.Sqrt(2 * A * B / C);

    return returnValue < D ? D : returnValue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:17:19.013

```
public override float Q()
{
    var result = (float)Math.Sqrt(2 * A* B / C);
    return result < D ? D : result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T19:17:19.147

除非这是一个技巧问题，因为`D`它是类本地的，代码应该如下所示：

```
public override float Q()
{
    var result = (float)Math.Sqrt(2 * A* B / C);
    return result < D ? D : result;
} 
```

但请注意，如果不是，则`D`需要在返回时为 a`float`或强制转换为 a 。`float`此外，如果`D`不是，`float`您可能只想做这样的事情，因为它的类型可能不是隐式可转换的：

```
public override float Q()
{
    var d = (float)D;
    var result = (float)Math.Sqrt(2 * A* B / C);
    return result < d ? d : result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T19:17:24.233

像这样的东西：

```
public override float Q(){
    var r = (float)Math.Sqrt(2 * A * B / C);

    if (r < D){
        r = D;
    }

    return r;
} 
```

# windows - grunt-contrib-build' 不在 npm 注册表中

> ID：15979130
> 
> 赞同：4
> 
> 时间：2013-04-12T19:13:44.997
> 
> 标签：windows, npm, gruntjs

当我尝试`npm install grunt-contrib-build --save-dev`使用命令提示符在我的 Windows 7 系统上安装时出现以下错误。

```
C:\css-base>npm install grunt-contrib-build --save-dev
npm WARN package.json my-project@0.1.0 No README.md file found!
npm http GET https://registry.npmjs.org/grunt-contrib-build
npm http 404 https://registry.npmjs.org/grunt-contrib-build
npm ERR! 404 'grunt-contrib-build' is not in the npm registry.
npm ERR! 404 You should bug the author to publish it
npm ERR! 404
npm ERR! 404 Note that you can also install from a
npm ERR! 404 tarball, folder, or http url, or git url.

npm ERR! System Windows_NT 6.1.7601
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nod
ejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "grunt-contrib-build" "--save
-dev"
npm ERR! cwd C:\css-base
npm ERR! node -v v0.10.3
npm ERR! npm -v 1.2.17
npm ERR! code E404
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\css-base\npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T05:22:34.443

如果有人在尝试安装此插件时发现此问题：

```
grunt-contrib-build 
```

现在被称为

```
grunt-usemin 
```

但是可能不支持新插件中的任务，请查看 [https://github.com/yeoman/grunt-usemin/issues/3](https://github.com/yeoman/grunt-usemin/issues/3)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:42:28.347

您是否尝试阅读错误消息？

> npm 错误！404 'grunt-contrib-build' 不在 npm 注册表中。
> npm 错误！404你应该让作者发布它

# asp.net-mvc - 相对于我的模型，我应该拥有多少个 DbContext 子类？

> ID：15979131
> 
> 赞同：6
> 
> 时间：2013-04-12T19:13:48.453
> 
> 标签：asp.net-mvc, entity-framework

我正在学习 ASP.NET MVC，并且我有一些问题，我到目前为止阅读的教程还没有以涵盖我的方式进行探索。我试过搜索，但我没有看到任何问题问这个。不过，如果我错过了现有的，请原谅我。

如果我有一个 ASP.NET MVC 应用程序，它有多个模型（其中一些相互关联，一些相互不相关），`DbContext`我应该创建多少个子类，如果我想为我的全局使用*一个连接字符串*和*一个数据库*应用？

*   每个模型都有一个上下文？
*   每组相关模型都有一个上下文？
*   所有模型的一个上下文？

如果答案是前两个之一，那么我应该考虑什么来确保为整个应用程序只创建*一个数据库？*我问是因为，在 Visual Studio 中进行本地调试时，在我看来，它创建的数据库与上下文一样多。这就是我发现自己使用第三个选项的原因，但我想知道这是否是正确的做法，或者我是否犯了某种错误，以后会回来咬我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T19:29:23.653

我使用 Julie Lerman 所说的[限界上下文](http://msdn.microsoft.com/en-us/magazine/jj883952.aspx)

代码可能与此`SystemUsers`无关`Products`- 所以我可能有一个 System DbContext 和一个 Shop DbContext（例如）。

在小型应用程序中使用单个上下文会更轻松，但对于较大的应用程序，它有助于分解上下文。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T21:31:12.127

@jrummell 只是部分正确。*如果*您将其留给自己的设备，实体框架将为每种 DbContext 类型创建一个数据库。使用 @NeilThompson 从 Julie Lerhman 提到的“有界上下文”的概念，您所做的实际上就是告诉每个上下文实际使用相同的数据库。Julie 的方法使用通用模式，因此实现它的每个 DbContext 最终都在同一个数据库上，但您可以为每个 DbContext 手动执行，如下所示：

```
public class MyContext : DbContext
{
    public MyContext()
        : base("name=DatabaseConnectionStringNameHere")
    {
        Database.SetInitializer(null);
    }
} 
```

换句话说，Julie 的方法只是设置了一个基类，您的每个上下文都可以从该基类继承，它会自动处理这部分内容。

这做了两件事：1）它告诉您的上下文使用特定的数据库（即，与所有其他上下文相同）和2）它告诉您的上下文禁用数据库初始化。最后一部分很重要，因为这些上下文现在基本上被视为数据库优先。换句话说，您现在没有可以实际导致创建数据库或发出需要进行迁移的信号的上下文。因此，您实际上需要*另一个*“主”上下文，其中包含应用程序中的每个实体。但是，除了创建迁移和更新数据库之外，您不必将此上下文用于其他任何事情。对于您的代码，您可以使用更专业的上下文。

使用专门的上下文要记住的另一件事是，每个上下文的每个实例都代表一个*独特的*状态，即使它们共享实体也是如此。例如，`Cat`一个上下文中的实体与第二个上下文*中*`Cat`的实体不同，即使它们共享相同的主键。`Cat`如果您从第一个上下文中检索，更新它，然后尝试通过第二个上下文保存它，您将收到错误。该示例有点做作，因为您不太可能在两个不同的上下文中明确拥有相同的实体，但是当您进入外键关系等时，遇到此问题更为常见。即使您没有明确声明`DbSet`对于一个相关实体，它在上下文中的一个实体依赖于它，EF 会隐式地`DbSet`为它创建一个。这就是说，如果您使用专门的上下文，您需要确保它们是真正专门的，并且在任何级别的相关项目上都存在*零交叉。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:17:47.297

`DbContext`通常，每个数据库都应该有一个。但是，如果您有单独的、不相关的模型组，那么拥有单独的实现是有意义的`DbContext`。

> 在我看来，它创建的数据库与上下文一样多。

没错，Entity Framework 将为每种`DbContext`类型创建一个数据库。

# android - Android：在升级时安排新警报的正确方法

> ID：15979134
> 
> 赞同：0
> 
> 时间：2013-04-12T19:13:59.017
> 
> 标签：android, alarmmanager

我在 Play 商店中有一个应用程序。现在，我将发布一个升级，其中必须安排一个新的警报。警报的一些背景：

*   当用户安装应用程序并登录时，会安排此警报进行定期后台同步。

但是，我将如何为已经安装我的应用程序并登录的用户启动此警报？警报最终将在下次重新启动时启动，但我想了解在升级后立即尝试启动警报时的正确方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:19:04.333

您可以使用广播接收器并捕获`Intent.ACTION_PACKAGE_REPLACED`操作以完成此操作。

示例代码可在[http://alvinalexander.com/java/jwarehouse/android/core/java/com/android/internal/content/PackageMonitor.java.shtml找到](http://alvinalexander.com/java/jwarehouse/android/core/java/com/android/internal/content/PackageMonitor.java.shtml)

# codemirror - 加载codemirror时是否可以突出显示搜索模式

> ID：15979135
> 
> 赞同：2
> 
> 时间：2013-04-12T19:14:01.560
> 
> 标签：codemirror

页面加载时，codemirror 有没有办法突出显示与模式匹配的代码（例如，如果我使用搜索插件）？所以我可以使用 ?search=my_pattern 加载页面并将模式传递给 codemirror。

这是一个示例代码和一个 jsfiddle。您可以使用 CTRL+F 来使用搜索插件。

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
        <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/codemirror/2.36.0/codemirror.css" />
        <script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/2.36.0/codemirror.min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/2.36.0/search.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/2.36.0/searchcursor.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/2.36.0/match-highlighter.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/2.36.0/python.js"></script>
    </head>
    <body>
        <textarea id="myTextArea">print "hello world"</textarea>
        <script>
        var myTextArea = document.getElementById('myTextArea');
        var myCodeMirror = CodeMirror.fromTextArea(myTextArea, {
            'mode': 'python',
            'lineNumbers': true
        });
        </script>
    </body>
</html> 
```

[http://jsfiddle.net/ErxMb/](http://jsfiddle.net/ErxMb/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T18:30:34.533

我通过查看[CodeMirror: Overlay Parser Demo](http://codemirror.net/demo/mustache.html)了解了如何使用 overlay.js 来做到这[一点](http://codemirror.net/addon/mode/overlay.js)。

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
        <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/codemirror/2.36.0/codemirror.css" />
        <script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/2.36.0/codemirror.min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/2.36.0/search.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/2.36.0/searchcursor.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/2.36.0/overlay.min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/2.36.0/match-highlighter.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/2.36.0/python.js"></script>
    </head>
    <style type="text/css">
        .cm-highlightSearch {background: yellow;}
    </style>
    <body>
        <textarea id="myTextArea">print "hello world"</textarea>
        <script>
        var keyword = 'hello';

        CodeMirror.defineMode("highlightSearch", function(config, parserConfig) {
          var searchOverlay = {
            token: function(stream, state) {
                if (stream.match(keyword)) {
                    return "highlightSearch";
                }

                while (stream.next() != null && !stream.match(keyword, false)) {}
                return null;
            }
          };
          return CodeMirror.overlayMode(CodeMirror.getMode(config, parserConfig.backdrop || "python"), searchOverlay);
        });

        var myTextArea = document.getElementById('myTextArea');
        var myCodeMirror = CodeMirror.fromTextArea(myTextArea, {
            'mode': 'highlightSearch',
            'lineNumbers': true
        });
        </script>
    </body>
</html> 
```

[http://jsfiddle.net/HkjY7/](http://jsfiddle.net/HkjY7/)

# c# - 如何为 C# SqlCommand 中的表指定模式限定符？

> ID：15979146
> 
> 赞同：3
> 
> 时间：2013-04-12T19:14:40.003
> 
> 标签：c#, sql-server

工作代码的形式为：

```
string sql = "SELECT foo from myTable";
SqlCommand cmd = new SqlCommand(sql, conn);
SqlDataAdapter da = new SqlDataAdapter(cmd);
contractTable = new DataTable();
da.Fill(contractTable); 
```

现在数据库架构已从 dbo 更改为 mySchema，它不是我用户的默认架构，而且我没有管理员权限来更改它。当我尝试运行代码时，我得到：

> System.Data.SqlClient.SqlException：对象名称“myTable”无效。

好的，我明白了，它没有找到它，因为它不再存在`dbo.`了。

我尝试添加该行：

```
cmd.Parameters.AddWithValue("@SchemaName", 'mySchema'); 
```

但这没有明显的效果。

然后基于[如何使用 SqlCommand 参数来指定选择查询的架构名称](https://stackoverflow.com/questions/9094370/how-to-use-a-sqlcommand-parameter-to-specify-the-schema-name-for-a-select-query)

我尝试将这些行添加到我的 SQL

```
DECLARE @SchemaName sysname
SET @SchemaName = 'mySchema'
SELECT foo FROM @SchemaName.[myTable] 
```

但这给了我在执行 SQL SELECT 时表名的无效语法错误

什么是正确的语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:24:47.567

如果您的 SQL 确实是您的代码，则应该可以：

```
string aSchema = "newSchema";
string sql = "SELECT foo from " + aSchema + ".myTable"; 
```

但是它确实有SQL注入的危险

此外，您可以将架构名称放在配置文件中，并在 C# 代码中引用配置条目。如果架构再次更改，这将在将来保护您。

```
string aSchema = ConfigurationManager.AppSettings.Get("schema_name");
string sql = "SELECT foo from " + aSchema + ".myTable"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:16:49.490

模式限定符是不能用变量指定的项目之一（很像列名和表名）。

为此，您将需要使用[动态 SQL](http://www.sommarskog.se/dynamic_sql.html) - 构建 SQL 并执行它。

这有其自身的危险（主要是[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)）。

The Curse and Blessings of Dynamic SQL 是 Erland Sommarskog 的一篇文章，详细讨论和解释了不同的问题。

# javascript - 如何将工具提示添加到 chart.js 图表

> ID：15979149
> 
> 赞同：19
> 
> 时间：2013-04-12T19:14:46.597
> 
> 标签：javascript, charts, chart.js

我正在开发一个 web 应用程序，我最近用 chart.js 交换了谷歌图表，因为它在视觉上更具吸引力。但是，我遭受的一个损失是我无法再在数据点上方获得工具提示。我想知道是否有人知道如何做到这一点，因为我是 javascript 的新手。这是图形和设置的代码：

```
 var data = {
            labels : graphData[0],
            datasets : [
                {
                    fillColor : "rgba(200,160,100,0.5)",
                    strokeColor : "rgba(80,240,70,1)",
                    pointColor : "rgba(80,240,70,1)",
                    pointStrokeColor : "#fff",
                    data : graphData[3]
                },
                {
                    fillColor : "rgba(220,220,220,0.5)",
                    strokeColor : "rgba(220,220,220,1)",
                    pointColor : "rgba(220,220,220,1)",
                    pointStrokeColor : "#fff",
                    data : graphData[1]
                },
                {
                    fillColor : "rgba(151,187,205,0.5)",
                    strokeColor : "rgba(151,187,205,1)",
                    pointColor : "rgba(151,187,205,1)",
                    pointStrokeColor : "#fff",
                    data : graphData[2]
                }
            ]
        };

        var options = {
            scaleShowGridLines : true,
            scaleShowLabels : true,
            animationSteps : 150,
            scaleOverride: true,
            scaleSteps : Math.max.apply(Math, graphData[3]),
            scaleStepWidth : 1,
            scaleStartValue : 1
        };

        var ctx = document.getElementById("chart_div").getContext("2d");
        ctx.canvas.width  = Math.max(graphData[0].length * 60, 600);
        var myNewChart = new Chart(ctx).Line(data,options);
        $('#chart_area').fadeIn();
        $('html, body').animate({
             scrollTop: $("#picture_area").offset().top
         }, 1000); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-24T09:01:26.960

有一个 chartjs 版本以及工具提示，您可以在此 github 页面 [https://github.com/Regaddi/Chart.js/tree/tooltips中获得它](https://github.com/Regaddi/Chart.js/tree/tooltips)

上面的链接似乎不再可用

但是它可以[在](https://github.com/chartjs/Chart.js)Github上找到

[您可以在此处](http://www.chartjs.org/docs/latest/)查看文档

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-13T12:46:55.897

您只需从[https://github.com/nnnick/Chart.js/blob/master/Chart.min.js](https://github.com/nnnick/Chart.js/blob/master/Chart.min.js)复制 Chart.min.js 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-24T06:35:21.610

```
var ctx = document.getElementById("canvas").getContext("2d");
    window.myLine = new Chart(ctx).Line(lineChartData, {
        responsive: true,
        showTooltips: true,
        multiTooltipTemplate: "<%= value %>",
    }); 
```

使用它在 chartjs 中设置全局设置。

# javascript - 在 d3.js 中使用 mouseenter 和 mouseleave 使圆圈出现和消失

> ID：15979150
> 
> 赞同：0
> 
> 时间：2013-04-12T19:14:56.173
> 
> 标签：javascript, d3.js

我正在尝试在 d3.js 中绘制一个图，这是一个小黑点的散点图，如果将鼠标悬停在一个小黑点上，*除了*原来的黑色之外，还会在相同位置出现一个新的半透明大红点点，当鼠标离开原来黑点的区域时，红点就消失了。

我有两个问题。第一个是红色圆圈在它被创建的那一刻就消失了。我知道它是创建的，因为如果我删除`.on("mouseleave")`部分（方法？），那么红色圆圈会成功出现，尽管当然会留下来。

第二个问题是，`.on("mouseleave")`去掉部分后，当一个红色圆圈出现时，被那个较大的红色圆圈遮住的其他黑点都不会产生自己的红色圆圈。

我尝试使用“mouseover”和“mouseout”而不是“mouseenter”和“mouseleave”，结果相同。如果有人有任何建议，我将不胜感激。谢谢！

这是相关的代码。如果需要，很高兴发布更多内容，但希望将注意力集中到重要部分。

```
drawdots = function() {
    sg.selectAll("circle")
        .remove();
    sg.selectAll("circle")
        .data(df)
        .enter()
        .append("circle")
        .attr("cx", function(d) {return xScale(Math.log(d.x)/Math.log(10));})
        .attr("cy", function(d) {return yScale(Math.log(d.y)/Math.log(10));})
        .attr("fill", "black")
        .attr("id", function(d, i) {return "point" + i})
        .attr("r", 5)
        .on("mouseenter", function(d, i) {
            var cx = sg.select("#point" + i)
                        .attr("cx");
            var cy = sg.select("#point" + i)
                        .attr("cy");
            sg.append("circle")
                .attr("cx", cx)
                .attr("cy", cy)
                .attr("r", 20)
                .attr("fill", "red")
                .attr("opacity", 0.5)
                .attr("id", "red_circle" + i);
        })
        .on("mouseleave", function(d, i) {
            sg.select("#red_circle" + i)
                .remove();
        });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:37:51.050

我会以不同的方式实现这一点——不是有一个红点，而是为每个黑点画一个，并且只在鼠标悬停时显示。这将简化代码，基本上看起来像这样。

```
sg.selectAll("circle.black")
    .data(df)
    .enter()
    .append("circle")
    .attr("class", "black")
    .attr("cx", function(d) {return xScale(Math.log(d.x)/Math.log(10));})
    .attr("cy", function(d) {return yScale(Math.log(d.y)/Math.log(10));})
    .attr("fill", "black")
    .attr("id", function(d, i) {return "point" + i})
    .attr("r", 5);

sg.selectAll("circle.red")
    .data(df)
    .enter()
    .append("circle")
    .attr("class", "red")
    .attr("cx", function(d) {return xScale(Math.log(d.x)/Math.log(10));})
    .attr("cy", function(d) {return yScale(Math.log(d.y)/Math.log(10));})
    .attr("fill", "red")
    .attr("id", function(d, i) {return "red_circle" + i})
    .attr("r", 20)
    .attr("opacity", 0)
    .on("mouseenter", function() { d3.select(this).attr("opacity", 0.5); })
    .on("mouseleave", function() { d3.select(this).attr("opacity", 0); }); 
```

# clojure - 我可以从同一个映射中的另一个值引用 clojure hashmap 值吗？

> ID：15979151
> 
> 赞同：2
> 
> 时间：2013-04-12T19:14:58.567
> 
> 标签：clojure

我试图想出一些方法让 clojure 哈希图中的值相互引用。从概念上讲，是这样的：

```
(def m {:a 1 :b 5 :c (+ (:a m) (:b m))}  ;Implies (= (:c m) 6) 
```

当然，这不起作用，因为我循环引用`m`. 我可以做类似的事情

```
(def m {:a 1 :b 5 :c (fn [a b] (+ a b))})
((:c m) (:a m) (:b m)) ;=> 6 
```

但这并没有真正获得任何好处，因为我仍然必须知道将哪个放入函数中`a`。`b`另一种尝试：

```
(def m {:a 1 :b 5 :c (fn [m] (+ (:a m) (:b m)))})
((:c m) m) ;=> 6 
```

好一点，因为我现在已经将函数内化为*一个*地图，虽然不是专门的*这个*地图。我可能会尝试用这样的东西来解决这个问题

```
(defn new-get [k m]
  (let [v-or-fn (get m k)]
    (if (fn? v-or-fn) (v-or-fn m) v-or-fn)))

(def m {:a 1 :b 5 :c (fn [m] (+ (:a m) (:b m)))})
(new-get :a m) ;=> 1
(new-get :b m) ;=> 5
(new-get :c m) ;=> 6 
```

我认为这是我能做的最好的事情。我错过了更聪明的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:39:20.960

忍不住写了一个宏：

```
(defmacro defmap [name m]
  (let [mm (into [] (map (fn [[k v]] `[~k (fn [~name] ~v)]) m))]
    `(def ~name
       (loop [result# {} mp# (seq ~mm)]
         (if (seq mp#)
           (let [[k# v#] (first mp#)]
             (recur (assoc result# k# (v# result#)) (rest mp#)))
           result#)))))

(defmap m [[:a 1]
           [:b 5]
           [:c (+ (:a m) (:b m))]])

;; m is {:a 1 :b 5 :c 6} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:34:18.280

正如我在上面的评论中已经说过的，您可以使用 let 形式：

```
(def m 
  (let [a 1 b 5] 
    {:a a :b b :c (+ a b)})) 
```

如果您使用仅在 m 定义中已知的值，这应该没问题。否则，您最好使用[@Michiel 所示](https://stackoverflow.com/a/15979322/298389)的函数参数。

PS顺便说一句，您可以自由使用def中的所有内容，您通常在clojure中使用。此外，有时您可以在其他一些形式中自由使用糖化形式的 let（尽管这个 let 使用与通常的 let 形式不同的机制）：

```
(for [x (...) xs]
     :let [y (+ x 1)]
     ; ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:23:59.873

由于`c`是派生值，因此是函数，`a`并且`b`您可能最好定义一个生成此映射的函数：

```
 (defn my-map-fn [a b]
   {:a a :b b :c (+ a b)})

 (def my-map (my-map-fn 1 2))
 (:c my-map) ;;=> 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-21T01:03:27.690

这是我的看法：

```
(defmacro let-map [& bindings]
  (let [symbol-keys (->> bindings (partition 2) (map first))] 
    `(let [~@bindings]
       (into {} ~(mapv (fn [k] [(keyword k) k]) symbol-keys)))))

;; if you view it as similar to let, when it's more complicated:
(let-map
  a 1
  b 5
  c (+ a b)) ; => {:a 1, :b 5, :c 6}

;; if you see it as an augmented hash-map, when it's simple enough:
(let-map a 1, b 5, c (+ a b)) ; => {:a 1, :b 5, :c 6} 
```

# get - 隐藏 Jersey GET 方法的价值

> ID：15979153
> 
> 赞同：0
> 
> 时间：2013-04-12T19:15:02.263
> 
> 标签：get, jersey, java-ee-6

使用 Jersey 的 GET，是否可以返回一个只有一些字段的实体？所以其他人不会显示给用户？例如，如果我有一个包含个人信息的实体，我可以只返回非私密信息作为密码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:13:50.417

您应该在控制层中手动隐藏此字段。或者您可以编写一些 DTO，这比 .

# jquery - 内容面板切换器和 SwipeJS

> ID：15979158
> 
> 赞同：0
> 
> 时间：2013-04-12T19:15:19.537
> 
> 标签：jquery, jquery-plugins

我正在尝试同时使用内容面板切换器 ( [http://code.google.com/p/jquery-content-panel-switcher/](http://code.google.com/p/jquery-content-panel-switcher/) ) 和 Swipejs ( [http://swipejs.com/](http://swipejs.com/) )。我能够让这两个独立工作，但是当我将 swipejs 代码放在其中一个内容面板中时，代码会中断。我假设必须与 jQuery 发生冲突，但我对 jQuery 还很陌生，我一直坚持如何调试问题。以下是我当前的代码。谢谢你的帮助。

```
<script type='text/javascript' src='js/jquery.js'></script>
<script type='text/javascript' src='js/jquery.content-panel-switcher.js'></script>  
<script type='text/javascript'>
$(document).ready(function() {
    jcps.fader(300, '#switcher-panel', '.set1');
    jcps.slider(500, '#switcher-panel2', '.set2');
});
</script>

<table>
<tr>
<td>
<div class="block mid margin_auto">
    <div class="header">
        <div class="nav_buttons"> 
            <a id="set1panel1" class="switcher set1">Home</a> 
            <a id="set1panel2" class="switcher set1">Photography</a> 
            <a id="set1panel3" class="switcher set1">Design</a> 
        </div> 
    </div>
        <div id="switcher-panel"></div>

        <!-- Dummy Data -->
        <div id="set1panel1-content" class="switcher-content set1 show">
            <h2>Set 1 Panel 1</h2>
            Set 1 Panel 1 content goes here.....
            <div id='mySwipe' style='max-width:500px;margin:0 auto' class='swipe'>
                <div class='swipe-wrap'>
                    <div><b>0</b></div>
                    <div><b>1</b></div>
                    <div><b>2</b></div>
                    <div><b>3</b></div>
                    <div><b>4</b></div>
                    <div><b>5</b></div>
                </div>
            </div>
            <div style='text-align:center;padding-top:20px;'>
              <button onclick='mySwipe.prev()'>prev</button> 
              <button onclick='mySwipe.next()'>next</button>
            </div>
        </div>
        <div id="set1panel2-content" class="switcher-content set1">
        <h2>Set 1 Panel 2</h2>
            Set 1 Panel 2 content goes here.....
        </div>
        <div id="set1panel3-content" class="switcher-content set1">
        <h2>Set 1 Panel 3</h2>
            Set 1 Panel 3 content goes here.....
        </div>
</div>
</td>
<td>
<div class="block mid margin_auto">
    <div class="header">
        <div class="nav_buttons"> 
            <a id="set2panel1" class="switcher set2">Experience</a> 
            <a id="set2panel2" class="switcher set2">Sports</a> 
            <a id="set2panel3" class="switcher set2">Hobbies</a> 
        </div> 
    </div>
        <div id="switcher-panel2"></div>

        <!-- Dummy Data -->
        <div id="set2panel1-content" class="switcher-content set2 show">
        <h2>Set 2 Panel 1</h2>
        Set 2 Panel 1 content goes here.....
            <div id='mySwipe2' style='max-width:500px;margin:0 auto' class='swipe'>
                <div class='swipe-wrap'>
                    <div><b>A</b></div>
                    <div><b>B</b></div>
                    <div><b>C</b></div>
                    <div><b>D</b></div>
                    <div><b>E</b></div>
                </div>
            </div>
            <div style='text-align:center;padding-top:20px;'>
              <button onclick='mySwipe.prev()'>prev</button> 
              <button onclick='mySwipe.next()'>next</button>
            </div>
        </div>
        <div id="set2panel2-content" class="switcher-content set2">
        <h2>Set 2 Panel 2</h2>
        Set 2 Panel 2 content goes here.....
        </div>
        <div id="set2panel3-content" class="switcher-content set2">
        <h2>Set 2 Panel 3</h2>
        Set 2 Panel 3 content goes here.....
        </div>
</div>
</td>
</tr>
</table>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src='js/swipe.js'></script>
<script>
// pure JS
var elem = document.getElementById('mySwipe');
window.mySwipe = Swipe(elem, {
  startSlide: 0,
  // auto: 3000,
  // continuous: true,
  // disableScroll: true,
  // stopPropagation: true,
  // callback: function(index, element) {},
  // transitionEnd: function(index, element) {}
});
// with jQuery
// window.mySwipe = $('#mySwipe').Swipe().data('Swipe');
</script>
<script>
// pure JS
var elem = document.getElementById('mySwipe2');
window.mySwipe2 = Swipe(elem, {
  startSlide: 0,
  // auto: 3000,
  // continuous: true,
  // disableScroll: true,
  // stopPropagation: true,
  // callback: function(index, element) {},
  // transitionEnd: function(index, element) {}
});
// with jQuery
// window.mySwipe = $('#mySwipe').Swipe().data('Swipe');
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T16:26:54.157

冲突是两个插件的技术之间的冲突，而不是 jquery 中的任何东西。

两个大问题：

1) div#mySwipe(2) 元素在调用 setup() 函数时需要在页面上可见。Swipe 需要这个，所以它可以计算幻灯片的宽度。setup() 在滑动开始时调用，它也会在页面调整大小时以及在某些浏览器中切换浏览器选项卡时触发。你也可以自己调用它 mySwipe.setup()

content-panel 的 css 隐藏了 .switcher-content 中的所有内容。两个滑动 div 都属于此类。

您可以通过在内容面板之后初始化滑动来解决此问题，但由于问题二，这将是一个短期修复。

2) 内容面板似乎可以通过显示 div 并根据需要从切换器内容 div 复制内容来工作。如果您在内容面板之后初始化滑动，您实际上将在面板副本上初始化滑动，一旦您导航到不同的面板，该副本将丢失，当您导航返回时，您将再次出现损坏的滑动。

你需要发生的是：

1.  当滑动调用 setup 最初它需要在一个可见的 div 中
2.  修改 swipe.js 以便页面调整大小事件调用一个包装函数，该函数检查滑动 div 是否可见，如果不可见，则不执行任何操作。
3.  理想情况下，每次滑动面板可见时调用设置

这三个任务需要更改您选择的插件的代码。

为了调试问题，我推荐各种浏览器开发工具。使用检查元素工具可以让您看到插件生成的 html，即当它是隐藏的 div 时，您会看到 swipe 将宽度设置为 0 而不是 3000。Javascript 调试可让您打破刷卡代码的设置方法并查看原因。

# css - 如何在选择器中匹配具有“data[title]”等名称的元素？

> ID：15979162
> 
> 赞同：0
> 
> 时间：2013-04-12T19:15:22.427
> 
> 标签：css

我有一个这样的元素：

```
<input type="text" name="data[title]" /> 
```

是否可以根据其名称匹配该输入元素？这不起作用：

```
input[name=data[title]] {} 
```

我正在使用最新版本的 Chrome。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T19:16:24.900

您需要使用引号：

```
input[name="data[title]"] {} 
```

# ios - 当我第二次尝试解密 CipherBuffer 时，应用程序“崩溃”

> ID：15979163
> 
> 赞同：1
> 
> 时间：2013-04-12T19:15:24.817
> 
> 标签：ios, encryption, rsa

您好，我正在尝试实现一个 iPhone 应用程序，该应用程序记录笔记并对其进行加密，然后在您在 UIAlertView 上输入正确的 PIN 时对其进行解密。当应用程序第一次加载时，我在我的 AppDelegate 中包含了一些代码，用于检查是否已经存在公钥和私钥。如果不是，它会生成一对并将它们添加到内部存储中。当应用程序第一次启动时，它工作得很好。然后我终止应用程序并再次打开它，当我进入现有笔记并尝试解密它时它只是挂起。从控制台我可以看到它在解密方法中加载了密码缓冲区，但这次 textView 从未加载过解密的文本。Button 只是保持在按下状态，并且该过程不会终止。这是代码。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSData *data2 = [defaults objectForKey:@"publicKey"];

if (data2 == nil) {

    encrypt = [[SecKey alloc]init];
    [encrypt generateKeyPairRSA];
    SecKeyRef publicKey =[encrypt getPublicKeyRef];
    SecKeyRef privateKey = [encrypt getPrivateKeyRef];

    size_t keySize = SecKeyGetBlockSize(publicKey);
    NSData* keyData = [NSData dataWithBytes:publicKey length:keySize];
    [[NSUserDefaults standardUserDefaults] setObject:keyData forKey:@"publicKey"];

    keySize = SecKeyGetBlockSize(privateKey);
    keyData = [NSData dataWithBytes:privateKey length:keySize];
    [[NSUserDefaults standardUserDefaults] setObject:keyData forKey:@"privateKey"];

} 
```

当我第一次运行应用程序时，它工作正常。

```
- (IBAction)save:(id)sender {
//save the context and dismiss the AddNewNotesViewcontroller

uint8_t *cipherBuffer = NULL;
SecKey *encrypt = [[SecKey alloc]init];

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSData *data2 = [defaults objectForKey:@"publicKey"];
encrypt.publicKey =(SecKeyRef)[data2 bytes];
cipherBuffer = [encrypt Encryption:plainTextField.text];

NSMutableData *data = [[NSMutableData alloc]init];
[data appendBytes:cipherBuffer length:strlen((char*)cipherBuffer)+1];

[self.currentNote setNotesTitle:titleField.text];
[self.currentNote setEncryptedText:data];

[self.delegate addNewNoteViewControllerDidSave];        
}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
if([title isEqualToString:@"Decrypt"])
{
    UITextField *passcode = [alertView textFieldAtIndex:0];
    if ([passcode.text isEqual: @"1234"]) {

        SecKey *encrypt = [[SecKey alloc]init];

        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        NSData *data2 = [defaults objectForKey:@"publicKey"];
        encrypt.publicKey =(SecKeyRef)[data2 bytes];

        data2 = [defaults objectForKey:@"privateKey"];
        encrypt.privateKey =(SecKeyRef)[data2 bytes];

        NSData *etData = [[NSData alloc]init];
        etData = [self.currentNote encryptedText];

        const void *bytes = [etData bytes];
        uint8_t *crypto_data = (uint8_t*)bytes;
        NSLog(@"test %s",crypto_data);
        NSString *pb =[encrypt Decryption:crypto_data];
        self.encryptedText.text =pb;

    }
   else self.encryptedText.text = @"WRONG PASSWORD";
}
} 
```

这是解密过程

```
- (void)decryptWithPrivateKey:(uint8_t *)cipherBuffer plainBuffer:(uint8_t *)plainBuffer
{
OSStatus status = noErr;

size_t cipherBufferSize = strlen((char *)cipherBuffer);

NSLog(@"decryptWithPrivateKey: length of buffer: %lu", BUFFER_SIZE);
NSLog(@"decryptWithPrivateKey: length of input: %lu", cipherBufferSize);

size_t plainBufferSize = BUFFER_SIZE;

status = SecKeyDecrypt([self getPrivateKey],
                       PADDING,
                       &cipherBuffer[0],
                       cipherBufferSize,
                       &plainBuffer[0],
                       &plainBufferSize
                       );
NSLog(@"decryption result code: %ld (size: %lu)", status, plainBufferSize);
NSLog(@"FINAL decrypted text: %s", plainBuffer);

}

-(NSString *)Decryption:(uint8_t *)cipherBuffer {

plainBuffer = (uint8_t *)calloc(CIPHER_BUFFER_SIZE, sizeof(uint8_t));
[self decryptWithPrivateKey:cipherBuffer plainBuffer:plainBuffer];
NSLog(@"DECRYPTED DATA : %s",plainBuffer);
NSString *s = [[NSString alloc] initWithBytes:plainBuffer length:BUFFER_SIZE encoding:NSUTF8StringEncoding];
return s;
} 
```

任何想法为什么会发生这种情况？我猜它一定是当它试图从 NSUserDefaults 检索私钥时。因为第一次创建该对时，它存储在 NSUserDefaults 中，但稍后我解密笔记时不会检索它，因为我还没有关闭应用程序。

# asp.net - asp.net 文本框的 onchange 不起作用

> ID：15979164
> 
> 赞同：0
> 
> 时间：2013-04-12T19:15:29.587
> 
> 标签：asp.net

我有一个文本框，旁边有一个日期选择器和一个下拉列表，在一个用户控件中，我在一个 aspx 页面中使用。如果我们从日期选择器中选择日期，我想启用下拉列表的常规字段验证器文本框，否则它应该是假的。那我该怎么走？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:40:38.927

基本上像这样的东西对你有用吗：

标记：

```
<asp:TextBox ID="MyTextBox" runat="server" AutoPostBack="true"  
         OnTextChanged="MyTextBox_TextChanged">
<asp:RegularExpressionValidator ID="MyValidator" runat=server 
        ControlToValidate="MyTextBox" 
        ErrorMessage="Must be in correct format" 
        ValidationExpression="[a-zA-Z]" /><!-- use whatever regex you need here --> 
```

后面的代码：

```
protected void MyTextBox_TextChanged(object sender, System.EventArgs e)  
{  
    MyValidator.IsEnabled = !String.IsNullOrEmpty(MyTextBox.Text);  
} 
```

# ruby - Watir-Webdriver 未与 Jruby 1.7.2 一起运行

> ID：15979165
> 
> 赞同：2
> 
> 时间：2013-04-12T19:15:33.677
> 
> 标签：ruby, jruby, watir, watir-webdriver

我正在尝试使用 jruby 1.7.2 运行我的 watir-webdriver 脚本。

我们有一个运行 jenkins 并执行我们的脚本的 windows8 虚拟机。当我通过 Jenkins 构建它们时，我有一套它们不会运行。

我注意到当我使用我的 Windows7 VM 并选择 jruby 1.7.2 作为 ruby​​mine 中的 SDK 时。它开始了，但没有其他任何事情发生。没有错误。当我将 SDK 更改为 ruby​​ 1.9.3 时，它工作正常。

我不知道如何解决这个问题或从哪里开始调查。帮助将不胜感激。

# cassandra - 设置 cassandra 多节点集群：“节点具有相同的令牌 0”

> ID：15979170
> 
> 赞同：1
> 
> 时间：2013-04-12T19:15:46.470
> 
> 标签：cassandra, installation, cluster-computing

我试图在我的计算机中设置一个 Cassandra 多节点集群只是为了测试，但它似乎不起作用...... Cassandra 版本是 1.1，它在 Ubuntu 上运行。

首先，我为每个节点修改了 cassandra.yaml 文件，如下所示：

**节点0**

*   初始令牌：0
*   种子：“127.0.0.1”
*   听地址：127.0.0.1
*   rpc_address：0.0.0.0
*   endpoint_snitch：RackInferringSnitch

**节点1**

*与node0*相同，除了：

*   initial_token：28356863910078205288614550619314017621 *（使用 cassandra 令牌生成器获取）*
*   听地址：127.0.0.2

* * *

之后，我首先启动了种子节点 127.0.0.1，一旦节点启动，我就启动了另一个节点 127.0.0.2。我有以下内容：

[...]

信息 06:09:27,146 倾听节俭客户...

INFO 06:09:27,909 节点 /127.0.0.1 现在是集群的一部分

信息 06:09:27,911 InetAddress /127.0.0.1 现在已启动

INFO 06:09:27,913 节点 /127.0.0.1 和 /127.0.0.2 具有相同的令牌 0。忽略 /127.0.0.1

* * *

运行*nodetool -h localhost ring*它显示：

地址：127.0.0.2

DC：数据中心1

机架：机架1

状态：上升

状态：正常

加载：11,21 KB

拥有：100,00%

代币：0

如您所见，仅显示第二个节点的信息拥有 100% 的环。实际上，令牌被初始化为 0 而不是我在其 cassandra.yaml 文件中定义的值。

* * *

八卦信息是：

/127.0.0.2

加载：25559.0

状态：正常，0

架构：59adb24e-f3cd-3e02-97f0-5b395827453f

RELEASE_VERSION:1.1.6-SNAPSHOT

RPC_ADDRESS:0.0.0.0

/127.0.0.1

加载：29859.0

状态：正常，0

架构：59adb24e-f3cd-3e02-97f0-5b395827453f

RELEASE_VERSION:1.1.6-SNAPSHOT

RPC_ADDRESS:0.0.0.0

* * *

有谁知道发生了什么，我该如何解决？非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T04:15:10.897

initial_token 仅在首次启动时被检查，当它被写入系统表时。删除系统表文件并重新启动。

# android - NullPointerException - Android 中的数据库游标 - 解决方法

> ID：15979176
> 
> 赞同：0
> 
> 时间：2013-04-12T19:16:05.773
> 
> 标签：android, database, nullpointerexception

我在以下代码中尝试调试/解决空指针异常时遇到问题。我正在尝试将 waypointCursor 初始化为 null 并且我需要稍后在代码中检查它是否等于 null。这样做虽然给了我一个 NullPointerException。我需要帮助来解决它。这是以下代码和详细信息。

这是调用该方法的代码：

```
private void displayCursor(Cursor tracksCursor)
{
  UnitsI18n mUnits;
  mUnits = new UnitsI18n( this, new UnitsI18n.UnitsChangeListener()
  {
     @Override
     public void onUnitsChange()
     {
         //Do Nothing
     }
  } );

  Log.i(TAG, "TRACKS CONTENT URI:"+Tracks.CONTENT_URI);
  StatisticsCalculator stats = new StatisticsCalculator(this, mUnits, this); 

  //UNCOMMENT THIS ONCE I FIGURE OUT WHAT IS GOING ON
  if (Tracks.CONTENT_URI != null) { 
      stats.updateCalculations(Tracks.CONTENT_URI);
      //stats.updateCalculations(Uri.withAppendedPath(Tracks.CONTENT_URI, TRACKURI));
  } 
```

这是发生 NullPointerException 的 StatisticsCalculator 中的代码：

```
public void updateCalculations( Uri trackUri )
{
  mStarttime = -1;
  mEndtime = -1;
  mMaxSpeed = 0;
  mAverageActiveSpeed = 0;
  mMaxAltitude = 0;
  mMinAltitude = 0;
  mAscension = 0;
  mDistanceTraveled = 0f;
  mDuration = 0;
  long duration = 1;
  double ascension = 0;

  ContentResolver resolver = mContext.getContentResolver();

  Cursor waypointsCursor = null;
  try
  {
     waypointsCursor = resolver.query( 
           Uri.withAppendedPath( trackUri, "waypoints" ), 
           new String[] { "max  (" + Waypoints.TABLE + "." + Waypoints.SPEED + ")"
                        , "max  (" + Waypoints.TABLE + "." + Waypoints.ALTITUDE + ")"
                        , "min  (" + Waypoints.TABLE + "." + Waypoints.ALTITUDE + ")"
                        , "count(" + Waypoints.TABLE + "." + Waypoints._ID + ")" },
           null, null, null );
     if( waypointsCursor.moveToLast() )
     {
        mMaxSpeed = waypointsCursor.getDouble( 0 );
        mMaxAltitude = waypointsCursor.getDouble( 1 );
        mMinAltitude = waypointsCursor.getDouble( 2 );
        long nrWaypoints = waypointsCursor.getLong( 3 );
        waypointsText = nrWaypoints + "";
     }
     waypointsCursor.close();
     waypointsCursor = resolver.query( 
           Uri.withAppendedPath( trackUri, "waypoints" ), 
           new String[] { "avg  (" + Waypoints.TABLE + "." + Waypoints.SPEED + ")" },
           Waypoints.TABLE + "." + Waypoints.SPEED +"  > ?", 
           new String[] { ""+Constants.MIN_STATISTICS_SPEED }, 
           null );
     if( waypointsCursor.moveToLast() )
     {
        mAverageActiveSpeed = waypointsCursor.getDouble( 0 );
     }
  }
  finally
  {
     if( waypointsCursor != null )
     {
        waypointsCursor.close();
     }
  } 
```

StatisticsCalculator 类中的代码行（第 75 行）是这行代码：

```
if( waypointsCursor.moveToLast() ) 
```

它不喜欢在这一行将 waypointsCursor 设置为 null ：

```
Cursor waypointsCursor = null; 
```

就在上面的 try 语句之上。我确实需要将其设置为 null，以便我可以检查这一行上的 waypointsCursor 是否等于 null：在 finally 语句中的 if( waypointsCursor != null )。

这是 logcat 输出：

```
04-12 18:29:16.795: I/OGT.TrackList(6115): TRACKS CONTENT URI:content://com.android.gpstracker/tracks
04-12 18:29:16.795: E/OGT.GPStrackingProvider(6115): Unable to come to an action in the query uri: content://com.android.gpstracker/tracks/waypoints
04-12 18:29:16.795: D/AndroidRuntime(6115): Shutting down VM
04-12 18:29:16.807: W/dalvikvm(6115): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-12 18:29:16.915: E/AndroidRuntime(6115): FATAL EXCEPTION: main
04-12 18:29:16.915: E/AndroidRuntime(6115): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.gpstracker/com.polaris.epicriders.Rides.RidesActivity}: java.lang.NullPointerException
04-12 18:29:16.915: E/AndroidRuntime(6115):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at android.os.Looper.loop(Looper.java:137)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at java.lang.reflect.Method.invoke(Method.java:511)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at dalvik.system.NativeStart.main(Native Method)
04-12 18:29:16.915: E/AndroidRuntime(6115): Caused by: java.lang.NullPointerException
04-12 18:29:16.915: E/AndroidRuntime(6115):     at com.android.gpstracker.actions.utils.StatisticsCalculator.updateCalculations(StatisticsCalculator.java:75)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at com.polaris.epicriders.Rides.RidesActivity.displayCursor(RidesActivity.java:901)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at com.polaris.epicriders.Rides.RidesActivity.displayIntent(RidesActivity.java:880)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at com.polaris.epicriders.Rides.RidesActivity.access$6(RidesActivity.java:832)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at com.polaris.epicriders.Rides.RidesActivity$8.onCheckedChanged(RidesActivity.java:198)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at android.widget.RadioGroup.setCheckedId(RadioGroup.java:174)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at android.widget.RadioGroup.access$600(RadioGroup.java:54)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at android.widget.RadioGroup$CheckedStateTracker.onCheckedChanged(RadioGroup.java:358)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at android.widget.CompoundButton.setChecked(CompoundButton.java:129)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at com.polaris.epicriders.Rides.RidesActivity.onCreate(RidesActivity.java:222)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at android.app.Activity.performCreate(Activity.java:5104)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-12 18:29:16.915: E/AndroidRuntime(6115):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:11:23.377

如果查询没有要返回的结果，则返回值为 null。在将查询用作游标之前检查查询的返回值是否不为空是一种很好的做法。因此，在您的情况下，您可以在查询后立即获得以下内容

```
if(waypointsCursor == null)
    return null; 
```

或者如果您不想返回，则将随后的代码包装在 if 块中

```
if(waypointsCursor == null){
    if( waypointsCursor.moveToLast() )
    ...
 } 
```

# apache - 在开发和登台服务器上设置 X-Robots-Tag

> ID：15979177
> 
> 赞同：0
> 
> 时间：2013-04-12T19:16:09.117
> 
> 标签：apache, .htaccess, http-headers, conditional, setenv

将此添加到旧系统并尝试在 .htaccess 文件中执行此操作。

```
# Prevent search engine indexing on dev sites:
SetEnvIf Host myliveserver\.com$ isproduction 
Header set X-Robots-Tag "noindex, nofollow, noarchive" env!=isproduction 
```

使用 mod_setenvif 在 Apache 2.2.22 上运行

得到一个可怕的 500。如果我删除`env!=isproduction`它运行的条件。我对条件从句缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:19:14.170

`500`状态码有两种可能

*   mod_header 未启用
*   根据[`Header`](https://httpd.apache.org/docs/current/mod/mod_headers.html#header)

> **语法：** Header [condition] set|append|merge|add|unset|echo|edit header [value] [replacement] [early|env=[!]variable]
> ...
> **env=[!]varname**
> 该指令适用于并且仅当环境变量 varname 存在时。*一个 ！在 varname 前面反转 test*，因此该指令仅在 varname 未设置时适用。

所以，你的头指令应该是

```
Header set ... env=!isproduction 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T21:20:06.677

啊..它是...
`=!`vs `!=`
NOT 应用于变量，而不是相等。

# iphone - CoreData 迁移失败，没有合适的映射模型

> ID：15979179
> 
> 赞同：2
> 
> 时间：2013-04-12T19:16:13.487
> 
> 标签：iphone, core-data

我正在尝试进行 CoreData 迁移，但它突然停止工作。从调试日志：

```
2013-04-12 11:59:17.600 Redacted[7684:3607] CoreData: annotation: (migration)    will attempt automatic schema migration
2013-04-12 11:59:17.712 Redacted[7684:3607] CoreData: annotation: (migration) looking for mapping model with 
 source hashes: 
{
    Redacted = <ad40b955 0fdcbf91 efd12f35 5ab2737a ad57635a 7b9bd32a a4aaecaf 6eb6ffb0>;
    Redacted = <8be6112c 2517affe 7496c522 c267a485 1b002285 057a735b d38e79c1 b2700406>;
    Redacted = <180e1207 9c41a970 bcd190bb 33b1d55e f4f6fe93 99167a2c c5b9aadd add4281e>;
    Redacted = <a55bab71 2e03c10f 6f59c567 64bd48c3 bed015c8 05ed9cbf a3253b44 02a9c783>;
}
 destination hashes: {
    Redacted = <45a621cd 1a04df96 ab756b9d 6f4e05ca 14790dd6 04dda71b e9d13894 6218a5d5>;
    Redacted = <4cdc3543 38cb3d0b f3edea4d 6f262f6e bff97ae0 cf8c9924 cdbacb3d b6fa7c8c>;
    Redacted = <ff7be1ae 0f120d47 cb2c39e1 33a24fff 1cb880b5 e5bd2ede 85470fea 2c77512a>;
    Redacted = <ca532228 da5b5471 1521b15c 203a8df2 da8e4639 4fb6b8fb 1510732a d538ab6a>;
    Redacted = <97e6c0c6 0eea0170 3870ca94 348d8ff8 437fc4ca ce8e11c1 1623ff07 5ea78ad4>;
    Redacted = <b48aabf8 4ac4b29c 77ae366d b941a441 23f909b1 81c7447e 44925268 c26e83df>;
}
2013-04-12 11:59:17.717 Redacted[7684:3607] CoreData: annotation: (migration) checking mapping model at path file://redacted/MappingModel.cdm
 source hashes: 
 {(
     <180e1207 9c41a970 bcd190bb 33b1d55e f4f6fe93 99167a2c c5b9aadd add4281e>,
     <ad40b955 0fdcbf91 efd12f35 5ab2737a ad57635a 7b9bd32a a4aaecaf 6eb6ffb0>,
     <a55bab71 2e03c10f 6f59c567 64bd48c3 bed015c8 05ed9cbf a3253b44 02a9c783>,
     <8be6112c 2517affe 7496c522 c267a485 1b002285 057a735b d38e79c1 b2700406>
 )}
 destination hashes: {(
    <ca532228 da5b5471 1521b15c 203a8df2 da8e4639 4fb6b8fb 1510732a d538ab6a>,
    <45a621cd 1a04df96 ab756b9d 6f4e05ca 14790dd6 04dda71b e9d13894 6218a5d5>,
    <4cdc3543 38cb3d0b f3edea4d 6f262f6e bff97ae0 cf8c9924 cdbacb3d b6fa7c8c>,
    <b48aabf8 4ac4b29c 77ae366d b941a441 23f909b1 81c7447e 44925268 c26e83df>,
    <97e6c0c6 0eea0170 3870ca94 348d8ff8 437fc4ca ce8e11c1 1623ff07 5ea78ad4>,
    <ff7be1ae 0f120d47 cb2c39e1 33a24fff 1cb880b5 e5bd2ede 85470fea 2c77512a>
)}
2013-04-12 11:59:18.440 Redacted[7684:3607] CoreData: annotation: (migration) no suitable mapping model found 
```

据我所知，所有哈希都匹配。试过清洗。任何想法为什么这会失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:30:16.787

回答我自己的问题：我的模式存在缺陷。我有一个一对一的关系，0 作为一个有效的最小值。

我不知道是否有一个额外的日志标志设置也会突出这个问题。似乎奇怪的 CoreData 会暗示我的映射文件实际上是我的架构时很糟糕。

# java - 在 Linux 上启动 java web start 应用程序的问题

> ID：15979191
> 
> 赞同：0
> 
> 时间：2013-04-12T19:17:01.293
> 
> 标签：java, linux, java-web-start

操作系统：Linux 版本 2.6.18-308.1.1.el5 (mockbuild@x86-002.build.bos.redhat.com) (gcc 版本 4.1.2 20080704 (Red Hat 4.1.2-52)) #1 SMP Fri 2012 年 2 月 17 日 16:47:13 EST

```
Java Version: Match: digest selected JREDesc: JREDesc[version 1.6+, heap=134217728-536870912, args=-ea, href=null, sel=false, null, null], JREInfo: JREInfo for index 0:
    platform is: 1.7
    product is: 1.7.0_17
    location is: http://java.sun.com/products/autodl/j2se
    path is: /usr/java/jre1.7.0_17/bin/java 
```

尝试使用 Mozilla Firefox。

问题：无法启动 JRE 1.7.0 的 java web start 应用程序，即使我正在使用部署工具包。

*   JRE 7.0 的 html 源代码：deployJava.createWebStartLaunchButton(url,'1.7.0');
*   JRE 6.0 的 html 源代码：deployJava.createWebStartLaunchButton(url,'1.6.0');

注意：该应用程序在 Windows 环境中运行良好，Linux 运行 1.6 版本也很好。我还注意到机器的默认 JRE 仍然是 1.6.0，即使我从[这里](http://java.com/en/download/linux_manual.jsp?host=java.com)使用 RPM 安装了 JRE 1.7.0 ，当我现在尝试安装时，它说 JRE 已经安装。

更新：我已经更新了默认的 JRE，现在它显示了 JRE 1.7.0

```
[root@L3FMV80 defaults]# java -version
java version "1.7.0_17"
Java(TM) SE Runtime Environment (build 1.7.0_17-b02)
Java HotSpot(TM) Client VM (build 23.7-b01, mixed mode, sharing)

[root@L3FMV80 Downloads]# rpm -ivh jre-7u17-linux-i586.rpm 
Preparing...                ########################################### [100%]
        package jre-1.7.0_17-fcs.i586 is already installed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:50:05.267

你没有说你正在使用什么发行版。尝试安装openjdk icedtea-web，后者是一个web start 实现和一个浏览器插件。

您不必使用浏览器插件。您可以使用“javaws”程序打开该文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-14T06:07:47.497

我有很好的解决[方案](http://yuenhoe.com/blog/2010/03/working-with-java-web-start-jnlp-in-firefoxopensuse-and-linux-in-general/)

> 因此，在很长一段时间无法玩我们为 P2P 相关研究构建的这个 Facebook 游戏之后，它在 Java Web Start 上运行，我今天终于生气了，坐下来，终于找到了它。
> 
> 由于 Java 不是免费技术，OpenSUSE 实际上预装了 OpenJDK，而不是 Sun 分发的通用 Java 版本。使用此默认配置，互联网上的 Web Start (JNLP) 文件将默认在名为“IcedTea Web Start”的 Java Web Start 的开放实现中打开，我听说它工作得相当好——但在某些情况下完全不起作用，像我的一样。
> 
> 对于像我一样需要从 Firefox 运行 Sun 版本的 Web Start 的人——首先，您需要使用软件包管理器获取并安装 Sun 版本的 Java 运行时（在 OpenSUSE 中，该包称为 java-1_6_0-sun） . 在此步骤之后验证您是否有一个名为“javaws”的程序。您可以简单地在打开的终端中键入“javaws”并确保它被识别为 Java(TM) Web Start。
> 
> 好的，接下来我们需要做的是让 Firefox 在打开 **JNLP 文件时使用 javaws。**对于其他发行版，您可以转到Firefox 中的**Edit > Preferences >** Applications，查找 JNLP，然后更改设置以使其使用 javaws。在 OpenSUSE 上集成了 Firefox，因此它直接从 KDE 获取文件关联设置。因此，您必须转至 KDE 的系统设置（配置桌面）> 高级选项卡 > 文件关联。在这里，搜索 JNLP，然后将“/usr/bin/javaws”添加到 Application Preference Order 的顶部。
> 
> 我们完成了！下次您在 Firefox 中打开 JNLP Web Start 文件时，它应该提供使用 Sun 的 Java Web Start 来打开它:)

有用的链接：[如何在 ubuntu 下运行 jnlp 文件](http://yuenhoe.com/blog/2010/03/working-with-java-web-start-jnlp-in-firefoxopensuse-and-linux-in-general/)

# ios - renderInContext 抛出崩溃

> ID：15979193
> 
> 赞同：1
> 
> 时间：2013-04-12T19:17:06.720
> 
> 标签：ios, objective-c, core-graphics, quartz-graphics

我正在从 webview 渲染图像。所以 renderIncontext 方法在 for 循环中调用了 50 多次。由于更多的内存消耗，我的应用程序在 20 或 30 次后崩溃了。

我使用了这段代码：

```
UIGraphicsBeginImageContext(CGSizeMake([w floatValue], [h floatValue]));
CGContextRef ctx = UIGraphicsGetCurrentContext();
[[UIColor blackColor] set];
CGContextFillRect(ctx, webview.frame);
[self.webview.layer renderInContext:ctx];
image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

20次后就崩溃了。我需要它的解决方案。

为什么会出现这种情况？有谁知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:30:46.783

听起来您正在紧密循环中创建大量位图图像。您需要保存所需的图像（如果您需要它们，可能在磁盘上而不是在内存中），并允许自动释放内存中的图像。将循环体包裹在一个`@autorelease`块中，例如：

```
for (whatever) {
    @autorelease {
        // Work that makes big autoreleased objects.
    }
} 
```

这样，您的内存消耗将不会在循环内失控。同样，如果您使所有这些 UIImage 对象保持不变，您仍将分配大量内存。将生成的图像保存到磁盘上的临时目录（或其他方便的位置），并根据需要单独获取它们。

# c - 带有 Arduino WiFi Shield 的稳定 HTTP 服务器？

> ID：15979212
> 
> 赞同：1
> 
> 时间：2013-04-12T19:18:06.270
> 
> 标签：c, http, wifi, arduino, httpserver

我正在构建我的第一个 Arduino 项目。您可以在这里查看我所做工作的基础知识：http: [//lostechies.com/derickbailey/2013/04/10/a-first-look-at-my-arduino-bbq-thermometer/](http://lostechies.com/derickbailey/2013/04/10/a-first-look-at-my-arduino-bbq-thermometer/) - 这是一个网络启用烧烤温度计，告诉我我的肉何时在烤架上煮熟。

我已经用一个基本的 HTTP 服务器设置了这个，以便在发出 HTTP 请求时生成一个 JSON 文档。我使用的所有 HTTP 处理代码都来自 Arduino IDE 软件中内置的示例。

此代码的 Ethernet Shield 版本似乎运行良好。只要我让它保持插入/打开状态，它似乎就会运行。但是当我切换到我的 Arduino WiFi shield 并上传我的代码的 WiFi 版本时——它也是基于 WiFi 库演示中的示例——它在大约 10 分钟左右后停止响应请求。

我正在使用带有最新 Arduino WiFi 扩展板的 Arduino Undo R3。我的 Mac 上有 Arduino IDE v1.0。一切都编译得很好，并且似乎运行了一段时间。

HTTP 服务器代码很快就开始出现问题。如果我用 jQuery.ajax 调用创建一个简单的网页，每 3 秒访问一次 http 服务器，大约三分之一的请求将失败，几乎是立即失败。一旦超过 10 分钟，Arduino 上的 HTTP 服务器代码就会完全停止响应。

就好像我在 HTTP 客户端上有资源泄漏，并且它们没有被清理......但这是一个完全的猜测。

有关我正在做的事情的要点，请参阅此处的代码：[https ://github.com/arduino/wifishield/tree/master/libraries/WiFi/examples/WifiWebServer](https://github.com/arduino/wifishield/tree/master/libraries/WiFi/examples/WifiWebServer)

我实际上只是复制并粘贴了这段代码，打开它，然后它开始出错。我什至不需要修改代码，只需设置正确的 SSID 和密码，并在 HTTP 响应中设置 CORS: * 标头。一旦我将它上传到我的 Arduino，它就会频繁地开始轰炸请求，几分钟后，它完全停止响应。

有没有人用 WiFi 屏蔽见过这个问题？有没有人为 Arduino WiFi shield 提供更好的 HTTP 请求处理代码？

我也可以提供更多信息、我的实际代码或其他任何需要的信息。

# entity-framework - Entity Framework 5：如何外连接表值函数

> ID：15979213
> 
> 赞同：5
> 
> 时间：2013-04-12T19:18:06.610
> 
> 标签：entity-framework, entity-framework-5

我试图在我的 LINQ 查询中使用内联表值函数外部连接一个表，但在运行时出现查询编译错误：

**“查询试图通过嵌套查询调用‘OuterApply’，但‘OuterApply’没有适当的键。”**

我的 linq 语句如下所示：

```
 var testQuery = (from accountBase in ViewContext.AccountBases

                         join advisorConcatRaw in ViewContext.UFN_AccountAdvisorsConcatenated_Get()
                                on accountBase.AccountId equals advisorConcatRaw.AccountId into advisorConcatOuter
                         from advisorConcat in advisorConcatOuter.DefaultIfEmpty()

                         select new
                         {
                             accountBase.AccountId,
                             advisorConcat.Advisors
                         }).ToList(); 
```

函数定义如下：

```
CREATE FUNCTION dbo.UFN_AccountAdvisorsConcatenated_Get()
RETURNS TABLE
AS
RETURN
    SELECT  AP.AccountId,
            LEFT(AP.Advisors, LEN(AP.Advisors) - 1) AS Advisors
      FROM  (   SELECT  DISTINCT 
                        AP.AccountId,
                        (   SELECT  AP2.PropertyValue + ', '
                            FROM    dbo.AccountProperty AP2 WITH (NOLOCK)
                            WHERE   AP2.AccountId = AP.AccountId
                            AND     AP2.AccountPropertyTypeId = 1 -- Advisor 
                            FOR XML PATH('')) AS Advisors
                FROM    dbo.AccountProperty AP WITH (NOLOCK)) AP; 
```

我可以直接在sql中成功执行join，如下：

```
 SELECT ab.accountid,
       advisorConcat.Advisors
FROM   accountbase ab
       LEFT OUTER JOIN dbo.Ufn_accountadvisorsconcatenated_get() advisorConcat
                    ON ab.accountid = advisorConcat.accountid 
```

有没有人有一个左外部将内联 TVF 连接到 LINQ to entity 中的表的工作示例 - 或者这是一个已知的缺陷等？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-15T19:23:42.547

Entity Framework 需要知道 TVF 结果的主键列是什么来进行左连接。基本上，您需要创建一个与 TVF 结果具有相同架构的假表，并在模型浏览器中更新 TVF 以返回新创建的表类型而不是默认的复杂类型。您可以参考 [此答案](https://stackoverflow.com/questions/27255181/linq-left-outer-join-query-error-outerapply-did-not-have-the-appropriate-keys)以获取更多详细信息。

# php - 使用 PHP 连接到 MySQL，未解决的错误

> ID：15979218
> 
> 赞同：0
> 
> 时间：2013-04-12T19:18:14.273
> 
> 标签：php, mysql, connection

我正在尝试通过 PHP 连接到 MySQL。

```
$dbc = mysqli_connect([ string $host = ini_get("mysqli.default_host")
                        [, string $username = ini_get("mysqli.default_user")
                         [, string $passwd = ini_get("mysqli.default_pw")
                          [, string $dbname = "site"
                           [, int $port = ini_get("mysqli.default_port")
                            [, string $socket = ini_get("mysqli.default_socket") ]]]]]]) OR die('Could not connect to MySQL: ' . mysqli_connect_error() ); 
```

我在代码的第一行显示错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:20:21.837

将变量放入方括号中，而不是声明：

```
$dbc = mysqli_connect(ini_get("mysqli.default_host"),
                      ini_get("mysqli.default_user"),
                      ini_get("mysqli.default_pw"),
                      "site",
                      ini_get("mysqli.default_port"),
                      ini_get("mysqli.default_socket")) 
       or die('Could not connect to MySQL: ' . mysqli_connect_error() ) 
```

此外，使用`or die()`会生成非常不健壮的代码。获取错误并正确处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:21:08.003

```
$dbc = new mysqli('localhost', 'my_user', 'my_password', 'my_db'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T19:42:09.917

您似乎误解了如何阅读手册。手册规定如下：

```
mysqli::__construct() ([ string $host = ini_get("mysqli.default_host") [, string $username = ini_get("mysqli.default_user") [, string $passwd = ini_get("mysqli.default_pw") [, string $dbname = "" [, int $port = ini_get("mysqli.default_port") [, string $socket = ini_get("mysqli.default_socket") ]]]]]] ) 
```

这几乎就是您在代码中添加的内容。该手册描述了函数*期望*给出的内容，而不是您应该复制到代码中的内容。您需要*输入*的内容很简单：

```
$dbc = mysqli_connect("yourHostName", "yourUserName", "yourPassword", "yourDatabase") OR die ('Could not connect to MySQL: ' . mysqli_connect_error() ); 
```

让我们快速回顾一下如何阅读手册。之后`__construct()`，有一对括号，其中包含您希望给它运行所需的全部内容（参数）。A`string`代表主机，a`string`代表用户名，以此类推。

括在方括号中的参数是*可选*的- 它们不必提供，`__construct()`而是使用默认值。例如，我们可以`string $host = ini_get("mysqli.default_host")`在参数列表中看到。如果我们在`mysqli_connect`没有证明[主机](http://php.net/manual/en/function.ini-get.php)（`$dbc = mysqli_connect()``ini_get("mysqli.default_host")`

请注意，如果您选择省略一个可选参数，则必须省略所有跟随它的参数 - 例如，您不能尝试给它主机和密码，但省略用户名。然而，我们可以（就像我在上面所做的那样）提供主机、用户名、密码和数据库（必须按此顺序提供！），然后省略端口和套接字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T19:59:06.777

好吧，至少他们没有教你 mysql_ 扩展.. 这是第一次。不要让你陷入太多循环，你可能无法在课堂上做到这一点，但我会像这样使用 PDO：

```
<?php #db_connect.inc.php

try {
    $dbh = new PDO('mysql:host=localhost;dbname=dbname', 'user', 'pass');
} catch (PDOException $e) {
    echo $e->getMessage(); //or return $e->getMessage();
}

?> 
```

# php - 使用 PHP 从 JSON 响应访问数组值

> ID：15979222
> 
> 赞同：0
> 
> 时间：2013-04-12T19:18:23.797
> 
> 标签：php, arrays, json, api

我是 JSON 新手，在访问从 API 调用返回的 JSON 数组中的特定值时遇到问题。例如，我想访问下面响应数据中的名称值（这是来自 API 调用的前两个响应）。我知道我错过了一些明显的东西，但我不能放弃得到它。任何帮助，将不胜感激：

```
ReadResponse::__set_state(array(
   0 => 
  array (
    'address' => '6866 N Rochester Rd',
    'category' => 'Food & Beverage > Restaurants',
    'category_ids' => 
    array (
      0 => 347,
    ),
    'category_labels' => 
    array (
      0 => 
      array (
        0 => 'Social',
        1 => 'Food and Dining',
        2 => 'Restaurants',
      ),
    ),
    'country' => 'us',
    'factual_id' => '8e6aacfa-b435-407d-83f9-90cec16c1cf8',
    'latitude' => 42.69804075,
    'locality' => 'Rochester Hills',
    'longitude' => -83.134586375,
    'name' => 'Sushi Little Tokyo',
    'neighborhood' => 
    array (
      0 => '\\Livernois-Tienken\\',
    ),
    'postcode' => '48306',
    'region' => 'MI',
    'status' => '1',
    'tel' => '(248) 608-1260',
  ),
   1 => 
  array (
    'address' => '2964 S Rochester Rd',
    'category' => 'Food & Beverage > Restaurants',
    'category_ids' => 
    array (
      0 => 347,
    ),
    'category_labels' => 
    array (
      0 => 
      array (
        0 => 'Social',
        1 => 'Food and Dining',
        2 => 'Restaurants',
      ),
    ),
    'country' => 'us',
    'factual_id' => '35d2fc06-a941-4dbf-9dcb-204964fec730',
    'latitude' => 42.636786765426,
    'locality' => 'Rochester Hills',
    'longitude' => -83.131888674506,
    'name' => 'Pudthi and Sushi',
    'postcode' => '48307',
    'region' => 'MI',
    'status' => '1',
    'tel' => '(248) 299-6890',
    'website' => 'http://www.pudthaiandsushi.com',
  ), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:21:12.253

这是 var_export 的结果。数据全部包含在`ReadResponse`. 要了解如何访问数据，请阅读该类的源代码或文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:39:36.123

试试这个 PHP 函数`json_decode()`，将您的 JSON 响应转换为 PHP 多维数组，您可以在其中轻松访问数组中的值，就像名称一样

```
$name = $myPHPArray->country->name; 
```

# php - 来自网络服务的数组

> ID：15979226
> 
> 赞同：0
> 
> 时间：2013-04-12T19:18:32.787
> 
> 标签：php

我很难阅读下面的数组。我想获取任何现有名称的值。请帮我解决这个问题。我说谢谢你的帮助。

```
Array
(
    [Attribute] => Array
        (
            [0] => Array
                (
                    [name] => ContactName
                    [value] => Ridwan
                )

            [1] => Array
                (
                    [name] => Email
                    [value] => Ridwan@yahoo.com
                )

        )

) 
```

以上webservice提交的结果如下。

```
 <ContactAttr>
        <Attribute>
           <name>ContactName</name>
           <value>Ridwan</value>
        </Attribute>
         <Attribute>
           <name>Email</name>
           <value>Ridwan@yahoo.com</value>
        </Attribute>
     </ContactAttr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:24:32.170

```
<?php
$xml = ...; // Your XML

$sx = new SimpleXMLElement($xml);

foreach($sx->Attribute as $attr) {
    echo $attr->name,': ',$attr->value,'<br />';
}
?> 
```

输出：

> 联系人姓名：Ridwan
> 
> 电子邮件：Ridwan@yahoo.com

# vim - 任何支持或可能被黑客入侵以支持在编辑时实时查看差异的编辑器/IDE？

> ID：15979232
> 
> 赞同：2
> 
> 时间：2013-04-12T19:18:47.850
> 
> 标签：vim, emacs, editor, diff

是否有任何编辑器/IDE`diff`在我编辑文件时提供差异的实时视图（可能使用）。理想的设置是当我以这种差异模式打开文件进行编辑时，该文件缓冲在两个独立的窗格中（但并排放置），因此当我编辑其中一个的内容时，两者的差异为我突出显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:31:26.003

似乎没有现有的 Emacs 模式可以完全满足您的需求，但粗略的谷歌搜索发现了[this](http://emacswiki.org/emacs/EdiffMode)和[this](http://jclark.org/weblog/2005/06/10/diffbuffer/)。

从第二个开始（格式稍微固定）：

```
(defun diff-buffer-against-file (context)
    "diff the current [edited] buffer and the file of the same name"
    (interactive "P")
    (let (($file buffer-file-name)
          ($tempFile "/tmp/emacs.diff")
          ($tempBuffer "emacs.diff"))
        (delete-other-windows)
        (push-mark (point) t)
        (generate-new-buffer $tempFile)
        (copy-to-buffer $tempBuffer (point-min) (point-max))
        (set-buffer $tempBuffer)
        (write-file $tempFile)
        (shell-command (concat (if context "diff -c " "diff ") $file " " $tempFile))
        (kill-buffer $tempFile)
        (pop-mark)))

(global-set-key "\C-cd" 'diff-buffer-against-file) 
```

该操作看起来有点过于激烈，无法绑定到[change hook](http://www.gnu.org/software/emacs/manual/html_node/elisp/Change-Hooks.html#Change-Hooks)，但是如果您喜欢这种事情，没有什么可以阻止您这样做。

**编辑：** Stefan 指出`diff-buffer-with-file`存在，并且具有您正在寻找的行为（它需要一个缓冲区，并且`diff`s 该缓冲区及其文件，在未聚焦的临时缓冲区中显示该输出），因此您甚至不需要定义以上。不过我确实试过了，而且天真

```
(defun diff-current (start end len) (diff-buffer-with-file (current-buffer)))
(add-hook 'after-change-functions 'diff-current) 
```

使编辑对我的口味来说太不舒服了。您可能希望遵循 Stefan 的建议并使用超时而不是`diff`在每次更改时立即 ing。

# apache - make: *** /lib/modules/2.6.32-279.el6.x86_64/build: 没有这样的文件或目录。停止

> ID：15979233
> 
> 赞同：3
> 
> 时间：2013-04-12T19:18:48.990
> 
> 标签：apache, centos

我从他们的网站下载了 RALINK 驱动程序

```
untar -xvf rtl* 
```

然后我在其中运行“make”。谷歌搜索建议需要安装“kernel-devel”。

我安装了 kernel-devel 包，但我仍然收到此错误

```
make: *** /lib/modules/2.6.32-279.el6.x86_64/build: No such file or directory.  Stop. 
```

当我检查该文件是否存在时.. 我 cd 进入 /lib/modules/2.6.32-279.el6.x86_64/

我相信这个错误发生在“make”命令尝试执行这个命令之后

```
make ARCH=x86_64 CROSS_COMPILE= -C /lib/modules/2.6.32-279.el6.x86_64/build M=/home/a/Desktop/3/rtl8712_8188_8191_8192SU_usb_linux_v2.6.6.0.20120405  modules 
```

它在那里被称为“构建”

那么为什么它说没有这样的文件或目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-13T23:39:48.837

****编辑****

如果您的问题与我遇到的问题一样（见下文），则似乎未安装内核开发包。

尝试：

```
yum install kernel-devel 
```

**原始信息**

我有同样的问题。但是，有趣的是，当我在父目录上 ls-l 到“缺少的目录”（所以，ls -l /lib/modules/2.6.32-431.el6.x86_64/）时，它表明构建是一个**断开的链接**指向到 /usr/src/kernels/2.6.32-431.el6.x86_64，但 /usr/src/kernels/ 是空的。

所以，我不知道这是否有很大帮助，但希望它能让其他人更好地了解问题所在。

```
[root@xx libreswan-3.7]# ls -l /lib/modules/2.6.32-431.el6.x86_64/
total 3524
lrwxrwxrwx.  1 root root     46 Dec 12 13:42 build -> ../../../usr/src/kernels/2.6.32-431.el6.x86_64
drwxr-xr-x.  2 root root   4096 Nov 21 22:41 extra
drwxr-xr-x. 11 root root   4096 Dec 12 13:42 kernel
-rw-r--r--.  1 root root 589679 Dec 12 13:43 modules.alias
...
-rw-r--r--.  1 root root 851070 Dec 12 13:43 modules.usbmap
lrwxrwxrwx.  1 root root      5 Dec 12 13:42 source -> build
drwxr-xr-x.  2 root root   4096 Nov 21 22:41 updates
drwxr-xr-x.  2 root root   4096 Dec 12 13:42 vdso
drwxr-xr-x.  2 root root   4096 Nov 21 22:41 weak-updates

[root@xx libreswan-3.7]# ls /usr/src/kernels/
[root@xx libreswan-3.7]# 
```

请注意，“源”链接也被破坏，因为它指向构建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-29T05:47:12.577

```
cd /lib/modules/2.6.32-431.el6.x86_64
sudo rm build
sudo ln -s ../../../usr/src/kernels/2.6.32-431.29.2.el6.x86_64/ build 
```

上面的命令为我解决了这个问题但基本上你必须能够在最后一个命令中使用任何版本的 2.6.32* 目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-20T21:07:47.323

感谢 Nighthawk663。

我有同样的问题`./configure --with-linux=/lib/modules/uname -r/build/`。它也说“不是文件......”。

原因：当前内核缺少内核头文件。

我是如何解决的：

查找当前内核：`uname -r`

`yum install kernel-devel-$(uname -r)`

你可能找不到它...只是谷歌那个版本的 kernel-devel-...下载 rpm 文件，然后做

`rpm -i kernel-devel-xxxx.rpm`

然后它对我有用！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-08T12:21:36.703

`/usr/lib/modules/your-kernel-edition/build`是一个链接文件。链接文件存在。但目标文件可能不存在。所以可以看到链接文件，但是文件夹不能改成它（`cd`）。

fedora 29 上的类似示例。

lrwxrwxrwx。1 根 40 Oct 21 07:38 /usr/lib/modules/4.18.16-300.fc29.x86_64/build -> /usr/src/kernels/4.18.16-300.fc29.x86_64

只需安装内核开发。

例子。

`sudo dnf install kernel-devel-$(uname -r)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-31T09:10:01.163

因为该链接与您的内核版本无关。

1.  删除错误的链接。

    ```
    $ rm build` 
    ```

2.  用于 `$ uname -r`检查内核版本

3.  使用您的内核版本构建新链接。

    ```
    $ ln -s ../../../usr/src/kernels/($(uname -r)/ build 
    ```

完毕

# javascript - CSS 过渡 - 平滑地显示 div

> ID：15979235
> 
> 赞同：1
> 
> 时间：2013-04-12T19:18:50.957
> 
> 标签：javascript, html, css, css-transitions

想法是这样的：顶部的 div 默认情况下是隐藏的，并且会向下滑动，通过单击按钮来*推送其他内容。*再次单击将滑动 div 再次隐藏，提升其他内容。

## HTML

```
<div id="topDiv" class="hidden">
    Some content<br>
    More very complex content
</div>
<button id="thebutton" onclick="toggle('topDiv');">Toggle the div</button>
<div id="bottomDiv">
    Some content<br>
    More content!<br>
    Even more content!<br>
</div> 
```

## CSS

```
div.hidden {
    height: 0px;
}
div {
    height: 400px;
    transition: height 0.5s;
} 
```

## Javascript

```
function toggle(someId) {
    var someElem = document.getElementById(someId);
    someElem.className = someElem.className == 'hidden' ? '' : 'hidden';
} 
```

这里的问题是显示了我想要隐藏的 div 的内容。如果我改变`div.hidden`为有`display: none;`或`visibility: hidden;`然后我失去了“滑动”效果。

我想要一个不使用 jQuery 的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T19:20:32.230

`overflow:hidden`在 div 上添加。

# installation - git flow 安装程序无法在 Mac OS X 10.8.3 上安装 shFlags

> ID：15979242
> 
> 赞同：3
> 
> 时间：2013-04-12T19:19:09.497
> 
> 标签：installation, git-flow

尝试了几次，包括核对以前的下载和手动获取子模块。有人有解决方法吗？

```
SilverFir-2:SRC mike$ sudo ./git-flow-installer 
### gitflow no-make installer ###
Installing git-flow to /usr/local/bin
Cloning repo from GitHub to gitflow
Cloning into 'gitflow'...
remote: Counting objects: 1407, done.
remote: Compressing objects: 100% (602/602), done.
remote: Total 1407 (delta 893), reused 1285 (delta 790)
Receiving objects: 100% (1407/1407), 358.18 KiB | 121 KiB/s, done.
Resolving deltas: 100% (893/893), done.
Updating submodules
Submodule 'shFlags' (git://github.com/nvie/shFlags.git) registered for path 'shFlags'
Cloning into 'shFlags'...
fatal: unable to connect to github.com:
github.com[0: 204.232.175.90]: errno=Operation timed out

Clone of 'git://github.com/nvie/shFlags.git' into submodule path 'shFlags' failed
install: gitflow/git-flow -> /usr/local/bin/git-flow
install: gitflow/git-flow-init -> /usr/local/bin/git-flow-init
install: gitflow/git-flow-feature -> /usr/local/bin/git-flow-feature
install: gitflow/git-flow-hotfix -> /usr/local/bin/git-flow-hotfix
install: gitflow/git-flow-release -> /usr/local/bin/git-flow-release
install: gitflow/git-flow-support -> /usr/local/bin/git-flow-support
install: gitflow/git-flow-version -> /usr/local/bin/git-flow-version
install: gitflow/gitflow-common -> /usr/local/bin/gitflow-common
install: gitflow/gitflow-shFlags: No such file or directory
SilverFir-2:SRC mike$ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T21:17:30.177

看起来这可能只是一个临时连接问题（尽管您能够手动获取子模块但脚本无法做到这一点是不寻常的）。make-less 安装程序似乎在我的 Mac OS 10.8.3 系统上运行良好。make-less 安装程序没有做太多，您可以自己运行步骤来安装它-

```
git clone https://github.com/nvie/gitflow.git
cd gitflow
git submodule init
git submodule update
sudo make install 
```

# java - 添加 X-Content-Type-Options 无嗅探

> ID：15979244
> 
> 赞同：0
> 
> 时间：2013-04-12T19:19:10.413
> 
> 标签：java, jsp, spring-security, http-headers, security

我目前正在尝试为我的 java 应用程序实施更多安全措施，并且遇到了使用 x-content-type-options no sniff 的建议。经过搜索，我找不到任何方法来实现此功能。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:58:36.563

假设您使用的是 Spring，您可以尝试 -

```
<mvc:annotation-driven/>
<mvc:interceptors>
    <bean id="webContentInterceptor" 
          class="org.springframework.web.servlet.mvc.WebContentInterceptor">
        <property name="X-Content-Type-Options" value="nosniff"/>
    </bean>
</mvc:interceptors> 
```

# ruby-on-rails - 嵌套模型上的 Rails STI

> ID：15979245
> 
> 赞同：0
> 
> 时间：2013-04-12T19:19:19.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, single-table-inheritance

我有一个关于 Rails 中 STI 的问题，我似乎无法理解。

我有2个模型，`order.rb`

```
class Order < ActiveRecord::Base
    has_many :answers
end 
```

和`answer.rb`

```
class Answer < ActiveRecord::Base
    belongs_to :order
    attr_accessible :value, :input_id, :type
end 
```

`answer.rb`还有几个 STI 课程，例如`select.rb`

```
class Select < Answer
    validates presence: true
end 
```

这样做的原因是我希望能够对不同类型的答案进行自定义验证和计算。

一切正常，直到我尝试在与每个订单相关联的答案上创建 fields_for。我能够在呈现表单时启动每个 STI 类。然而，当提交表单时，所有答案都将在数组中结束，`answers_attributes`并且都将被视为`class Answer`代替 example `class Select`。

有人对我如何解决这个问题有一些想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:50:04.640

我不确定我是否解决了您的问题，但也许您正在寻找`becomes`？

```
Answer.last.becomes(Select) 
```

# jquery - chrome 扩展 - 提交值不起作用

> ID：15979247
> 
> 赞同：0
> 
> 时间：2013-04-12T19:19:30.607
> 
> 标签：jquery, html, google-chrome, google-chrome-extension

Chrome 扩展程序不起作用，这是我的代码...

//manifest.json

```
{
    "manifest_version": 2,
    "name": "auto login",
    "description": "With this extension you can auto login.",
    "version": "1.0",
    "permissions": [ "http://*/*" ],

    "browser_action": {
        "default_icon": "icon.png",
        "default_popup": "popup.html"
    }
} 
```

// popup.html

```
<!DOCTYPE HTML>
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
            $('#submit').click(function(){
                var data = document.getElementById("username").value;
                localStorage["username"] = data;
            });
        });
</script>
    <title>Hello World!</title>
</head>
    <body>
        <form name="login">
            <fieldset>
                <legend>Log In</legend>
                <table>
                    <tr>
                        <td><label for="username">Username</label></td>
                        <td><input type="text" name="username" id="username"/></td>
                    </tr>
                    <tr>
                        <td><label for="password">Password</label></td>
                        <td><input type="password" name="password" id="password"/></td>
                    </tr>
                    <tr>
                        <td><input type="submit" value="verzenden" name="submit" id="submit"/></td>
                    </tr>
                </table>
            </fieldset>
        </form>
    </body>
</html> 
```

为什么这段代码不起作用？无法使用此脚本保存用户名和密码的值。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:22:44.040

1.  永远不要在表单提交中调用任何东西
2.  返回 false 或调用 preventDefault 不提交表单
3.  给表单一个 ID 并从提交按钮中删除名称和 ID

    ```
    $(document).ready(function(){
        $('#login').on("submit",function(e){
            var data = document.getElementById("username").value;
            localStorage["username"] = data;
            e.preventDefault();
        });
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:22:50.690

您必须`form`从那里删除标签。当您单击按钮时，表单会自动提交并且您的函数没有机会运行

# php - 如何将路径图像用户存储到数据库中：Codeigniter

> ID：15979249
> 
> 赞同：2
> 
> 时间：2013-04-12T19:19:48.777
> 
> 标签：php, codeigniter, file-upload, image-uploading

我正在尝试将不同用户的图片路径上传到数据库中。我对 codeigniter 很陌生，我阅读了很多教程，但我仍然在挣扎。这是我的控制器，但我什至不知道如何将图像与用户会话链接。

这是我的代码：

```
function do_upload()

{
$config['upload_path'] = './uploads/';
$config['allowed_types'] = 'gif|jpg|jpeg|png';
$config['max_size'] = '100';
$config['max_width']  = '1024';
$config['max_height']  = '768';
$config['overwrite'] = false;

$this->load->library('upload', $config);

  if ( ! $this->upload->do_upload())
{
$error = array('error' => $this->upload->display_errors());

$this->load->view('upload_form', $error);
}else

{    
$data = $this->upload->data();
$file_array = $this->upload->data('file_name');
$profile['profile_picture'] = $file_array['file_name'];
$this->db->where('username', $this->input->post('username'));
$this->db->update('users', $profile);
$this->load->view('upload_success', $data);

   }

} 
```

我的数据库有一个名为 users 的表，'profile_picture' 是路径的字段。当我上传一张图片时，我只是让我的所有用户字段都填充了相同的文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:45:09.620

感谢我以这种方式解决的提示：

```
 function do_upload(){

    if($this->session->userdata('is_logged_in'))
    {
     $id = $this->session->userdata('id');
     $config['upload_path'] = './uploads/';
     $config['allowed_types'] = 'gif|jpg|jpeg|png';
     $config['max_size']    = '100';
     $config['max_width']  = '1024';
     $config['max_height']  = '768';
     $config['overwrite'] = false;

     $this->load->library('upload', $config);

     if ( ! $this->upload->do_upload())
     {
      $error = array('error' => $this->upload->display_errors());
      $this->load->view("site_header");
      $this->load->view("site_nav");
      $this->load->view('upload_form', $error);
      }else{    

      $data = $this->upload->data();
      $file_array = $this->upload->data('file_name');
      $profile['profile_picture'] = $file_array['file_name'];
      $this->db->where('id', $id);
      $this->db->update('users', $profile);
      $this->load->view('upload_success', $data);
      }
     }else{
      $this->load->view("site_header");
      $this->load->view("site_nav");
      $this->load->view("login_view");
      $this->load->view("site_footer");
      }   
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:43:53.170

如果您的用户有 ID，只需执行 imagePath = /upload/avatar/'.$userID.'.jpg' 或使用随机文件名并将其存储为新字段

# ios - 根据方向更改 iOS 更改视图

> ID：15979254
> 
> 赞同：1
> 
> 时间：2013-04-12T19:19:57.150
> 
> 标签：ios, ipad

所以我在几个视图控制器中使用了以下代码来实现一些自定义对象，这些对象根据方向的变化以不同的方式绘制。

出于某种原因，以下两种方法的这种特定实现不起作用：

```
- (void)awakeFromNib
{
    isShowingLandscapeView = NO;
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(orientationChanged:)
                                                 name:UIDeviceOrientationDidChangeNotification
                                               object:[UIDevice currentDevice]];
}

- (void)orientationChanged:(NSNotification *)notification
{
    NSLog(@"Are we changing orientations?");
    UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;
    if (UIDeviceOrientationIsLandscape(deviceOrientation) &&
        !isShowingLandscapeView)
    {
        isShowingLandscapeView = YES;
        NSLog(@"Landscape!");

        /*

         // Landscape orientation
         [txtLoginID setFrame:CGRectMake(489, 200, 145, 30)];
         [txtPassword setFrame:CGRectMake(489, 235, 145, 30)];
         [loginLabel setFrame:CGRectMake(378, 203, 69, 21)];
         [pwdLabel setFrame:CGRectMake(378, 238, 80, 21)];
         loginButton.frame = CGRectMake(561, 273, 73, 30);

         // Set iPad landscape background
         background.frame = CGRectMake(0, 0, 1024, 748);
         [background setContentMode:UIViewContentModeScaleToFill];
         [background setImage:[UIImage imageNamed:@"ipadLandscape.jpg"]];
         [self.view addSubview:background];
         */
    }
    else if (UIDeviceOrientationIsPortrait(deviceOrientation) &&
             isShowingLandscapeView)
    {
        isShowingLandscapeView = NO;
        NSLog(@"Portrait!");

        /*
         // Portrait orientation
         txtLoginID.frame = CGRectMake(367, 254, 145, 30);
         txtPassword.frame = CGRectMake(367, 289, 145, 30);
         loginLabel.frame = CGRectMake(256, 257, 69, 21);
         pwdLabel.frame = CGRectMake(256, 292, 80, 21);
         loginButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
         loginButton.frame = CGRectMake(439, 327, 73, 30);

         // Set iPad portrait background
         background.frame = CGRectMake(0, 0, 768, 1004);
         [background setContentMode:UIViewContentModeScaleToFill];
         [background setImage:[UIImage imageNamed:@"ipadPortrait.jpg"]];
         [self.view addSubview:background];
         */
    }
} 
```

关于为什么这不起作用的任何想法？我的日志语句似乎没有产生任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:37:21.867

对于滞后，也许试试这个方法：

```
- (void)willAnimateRotationToInterfaceOrientation:
(UIInterfaceOrientation)toInterfaceOrientation
duration:(NSTimeInterval)duration 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:24:30.547

我认为您可以通过覆盖该`didRotateFromInterfaceOrientation:`方法直接从您的视图控制器订阅通知而无需订阅通知。[在此处](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926)查看 Apple 文档。

# winforms - 除了传统的“带状”样式之外，还有其他的报表设计器吗？

> ID：15979257
> 
> 赞同：0
> 
> 时间：2013-04-12T19:19:59.567
> 
> 标签：winforms, devexpress, reporting

当我想到报告时，我想到了带状报告。Microsoft Access、Crystal Reports、SSRS 甚至 VisualFox 等工具都使用它。动态行为必须提前预测，并通过条件字段、子报表和参数进行控制。这些报告非常适合财务报告或事物列表，只要您运行此报告（通常在某个日期范围之间），外观和感觉都是由用户预先确定和期望的。

但是，我们公司需要一种解决方案，任何用户都应该能够更改报告的任何方面。报表运行时，字段、格式和布局都会发生变化。如果您愿意，它不是传统的“报告”，因为它不是某种静态的输出。

在这种情况下诉诸带状报告会使一些开发人员进入水晶报告的世界，因为我们在任何**一天都会**生成 2-6 份报告。我无法想象一个典型的用户也会对学习如何使用水晶报表设计器感到满意。

有哪些替代报告解决方案可以让您构建报告，而无需一时兴起学习诸如 Crystal Reports 之类的整个报告套件？我添加了我自己的答案，以展示我们目前正在使用的一个很好的替代方案，并希望获得一些好的输入以供将来使用。然而，这篇文章的重点是收集一些替代解决方案的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:19:59.567

**DevExpress 快照**

经过一番挖掘，我们发现了[DevExpress Snap](http://www.devexpress.com/Products/NET/Controls/WinForms/Snap/)，它允许您使用类似于 Microsoft Word 的字处理器构建报告，方法是将字段从字段工具箱拖到文档中！感觉就像带有数据字段拖放功能的 Microsoft Word。极好的！

我们已经创建了一个模板结构，因此用户可以将他们预定的布局保存为“通用”模板以开始工作，但几乎每个生成的报告都包含不同的字段和格式。有时甚至将图像放入文档中以说明观点。

现在我不必被放逐到SSRS的土地上！这是一个了不起的解决方案，尽管我仍然通过 SSRS 生成某些报告（例如 P&L），因为它应该是一种预设的报告样式，它的字段和设计对用户来说是锁定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T03:45:36.203

我发现另一个看起来非常强大且易于使用的解决方案是[Windward Autotag](http://windward.net/products/autotag/)。这是一个真正的 Word 插件，它只是在功能区顶部为您的所有报告选项添加了一个额外的选项卡。因此，您可以直接在 Word 中设计所有报告。通过转到添加到功能区的“自动标记”选项卡并单击按钮将数据插入到所需的位置，您可以将数据放置在所需的任何位置。我还没有尝试过，但网站和[演示视频](http://www.youtube.com/watch?v=KHyW1mMhl4I)看起来非常令人印象深刻。

# iphone - UITableView 在滚动和 [reloadData] 时崩溃

> ID：15979259
> 
> 赞同：2
> 
> 时间：2013-04-12T19:20:06.227
> 
> 标签：iphone, objective-c, jailbreak, uitableview

我正在使用 theos（越狱）创建一个应用程序，并且`loadView`在我的 RootViewController.mm 文件的方法中创建了一个 UITableView：

```
- (void)loadView {
    self.view = [[[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]] autorelease];
    self.view.backgroundColor = [UIColor redColor];

    NSError * error;
    NSArray * directoryContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:@"/var/mobile/Library/BannerImage" error:&error];

    countries = [NSDictionary dictionaryWithObject:directoryContents forKey:@"Themes"];
   mainTableView = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, 320, 480) style:UITableViewStyleGrouped];

    [mainTableView setDataSource:self];
    [mainTableView setDelegate:self];
    [self.view addSubview:mainTableView];
} 
```

我的其余代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [countries count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [[countries allKeys] objectAtIndex:section];
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSString *continent = [self tableView:tableView titleForHeaderInSection:section];
    return [[countries valueForKey:continent] count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
        // Configure the cell...

    NSString *continent = [self tableView:tableView titleForHeaderInSection:indexPath.section];
    NSString *country = [[countries valueForKey:continent] objectAtIndex:indexPath.row];

    cell.textLabel.text = country;

    cell.accessoryType = UITableViewCellAccessoryNone;
    if([self.checkedIndexPath isEqual:indexPath])
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
    else
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
    return cell;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *object = [tableView cellForRowAtIndexPath:indexPath];
    [object setSelected:NO animated:YES];
    NSString *selectedTheme = [[object textLabel] text];

    NSDictionary *plistFile = [NSDictionary dictionaryWithObject:selectedTheme forKey:@"CurrentTheme"];
    [plistFile writeToFile:@"/Applications/BannerImage.app/CurrentTheme.plist" atomically:YES];

    if(self.checkedIndexPath)
    {
        UITableViewCell* uncheckCell = [tableView
                                        cellForRowAtIndexPath:checkedIndexPath];
        uncheckCell.accessoryType = UITableViewCellAccessoryNone;
    }
    UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
    self.checkedIndexPath = indexPath;
} 
```

当我向上滚动并尝试向下滚动时它崩溃，当调用 [mainTableView reloadData] 时它崩溃。我怎样才能解决这个问题？ [**崩溃日志**](http://cl.ly/OF9D)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:06:52.203

我发现我需要保留字典，因为它正在发布。所以而不是

```
NSDictionary *countries; 
```

改成这个

```
@property(nonatomic, retain) NSDictionary *countries; 
```

和

```
@synthesize countries; 
```

在您的 .mm 文件中并使用

```
self.countries = [NSDictionary dictionaryWithObject:directoryContents forKey:@"Themes"]; 
```

代替

```
countries = [NSDictionary dictionaryWithObject:directoryContents forKey:@"Themes"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:54:03.750

嗨，请检查国家/地区是否有任何数据，并且在此行之前的 dic 中是否存在“大陆”值键

```
NSString *country = [[countries valueForKey:continent] objectAtIndex:indexPath.row]; 
```

# jquery - Jquery 循环遍历选择器并单击事件处理程序

> ID：15979264
> 
> 赞同：1
> 
> 时间：2013-04-12T19:20:11.620
> 
> 标签：jquery, events, loops, click, handler

认为这是一个先有鸡还是先有蛋的问题或关闭问题或我遗漏的其他问题。当有 onClick 事件处理程序时，如何循环遍历 JQuery 中的数字选择器值？

```
$("#q01").click(function() {
    clearIt();
    $("#item01").show();
}); 
$("#q02").click(function() {
    clearIt();
    $("#item02").show();
});
$("#q03").click(function() {
    clearIt();
    $("#item03").show();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:30:36.783

你可能想试试这个：

```
$("[id^=q]").each(function () {
    $(this).click(function () {
        clearIt();
        var id = this.id.replace(/[^\d]/g, ''); 
        $("#item" + id).show();
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:39:27.483

很难准确地说，因为您的示例可能已简化。但是尝试使用更通用的选择器，而不是通过 ID 选择它们（您可以使用`$('[id^="q"]')`，但这并不是最佳实践）。您像使用类一样使用 ID 元素，这并不是真正`id`的用途。

如果你给它们一个`class`属性，比如`class="q"`按钮和`class="item"`目标，你可以这样做：

```
$('.q').each(function(index) {
    var targetItem = $('.item').eq(index);
    $(this).click(function() {
        clearIt();
        targetItem.show();
    });
}); 
```

但是在标记中指定每个可点击元素的目标会更容易、更安全和更好的做法：

```
<a href="#" class="p" target-index="01">p01</a>
<a href="#" class="p" target-index="02">p02</a>

<div class="item" item-index="01">item01</div>
<div class="item" item-index="02">item02</div> 
```

那么他们在页面上的顺序和位置就无关紧要了。您可以直接选择它们：

```
var num = $(this).attr('target-index');
var targetItem = $('.item[item-index="' + num + '"]'); 
```

* * *

最后（也是我的首选建议），您可以**将目标的 ID 直接放入按钮本身：**

```
<a href="#" class="p" for="item01">p01</a>
<div id="item01">item01</div> 
```

然后，您可以快速、安全地选择目标，无论其位置如何：

```
var targetItem = $('#' + $(this).attr('for')); 
```

* * *

**编辑1：**

我的第一个片段对元素的顺序进行了假设，因为单击的元素与目标项目相关联的方式有很多。只有你知道标记的规则，所以只有你知道哪些假设会起作用。例如：

```
var targetItem = $('#' + $(this).attr('id').replace(/^q/, 'item'));
var targetItem = $(this).siblings('[id^="item"]');
var targetItem = $(this).children('[id^="item"]');
var targetItem = $(this).parents('[id^="item"]');
var targetItem = $(this).find('[id^="item"]'); 
```

如果您不使用`target-index`我建议的技术，您将不得不根据您对 HTML 的了解做出至少一些假设。

* * *

**编辑2：**

根据您尝试*触发*处理程序的评论，而不是改进事件绑定代码，您可以这样做：

```
//quick and dirty zero-padding function from http://stackoverflow.com/q/10073699/399649
var pad = function(num, size) {
  return (Math.pow(10, size) + ~~num).toString().substring(1);
};
for(var i = 1; i < $('[id^="q"]').length; i++) {
    var index = pad(i, 2);
    $('#q' + index).trigger('click');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T19:29:41.703

您可以利用 jquery 从选择器开始。在使用以选择器开头时，它总是建议在元素驻留中使用上下文。但是您也可以为按钮使用类名，并将其与单击事件与单个选择器绑定。

```
$('[id^=q]','çontext').click(function(){...} 
```

或者

```
$('input.classSelector',context).click(function(){...}) 
```

## 带有 ID 选择器

[http://jsfiddle.net/Beffv/](http://jsfiddle.net/Beffv/)

```
function clearIt()
{
$('[id^=item]','#section').hide();
}
clearIt();
$('[id^=q]','#section').click(function(){

    clearIt();
  $('#item' + $(this).attr('id').replace('q',''),'#section').show();
}); 
```

## 使用类选择器

[http://jsfiddle.net/vrVcL/](http://jsfiddle.net/vrVcL/)

### html

```
<div id="section">
<input id="q01" type="button" class="itemBtn" value="q1"/>
<input id="q02" type="button" class="itemBtn" value="q2"/>
<input id="q03" type="button" class="itemBtn" value="q3"/>

<div id="item01" class="itemDiv">test</div>
<div id="item02" class="itemDiv">test2</div>
<div id="item03" class="itemDiv">test3</div>
</div> 
```

### 脚本

```
 function clearIt()
{
$('.itemDiv','#section').hide();
}
clearIt();
$('.itemBtn','#section').click(function(){
    clearIt();
    $('.itemDiv:nth-of-type(' + parseInt($(this).attr('id').replace('q','')) + ')','#section').show();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T19:30:56.147

您可以使用 jquery `each()`：

[看演示](http://jsfiddle.net/xrBMy/)

```
$('[id^=q0]').each(function (i) {
    ++i;
    $(this).click(function () {
        $('#item0' + i).show();
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T19:31:59.490

## javascript

```
 var items= $('.item');
        $('.btn').click(function(){
           var num = $(this).attr('id').match(/\d+/ig)
           var item = $('#item'+num[0]+'.item');
           if(item.length){
              clearIt();
              item.show();
           }
        })

        function clearIt(){
           items.hide();
        } 
```

## 标记

```
 <a id="q01" href="#" class="btn">Q01</a>
     <a id="q02" href="#" class="btn">Q02</a>
     <a id="q03" href="#" class="btn">Q03</a>

     <div id="item01" class="item">Item 01</div>
     <div id="item02" class="item">Item 02</div>
     <div id="item03" class="item">Item 03</div> 
```

这样，您可以`show/hide`通过简单地删除类`.btn`或`.item`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-09T08:02:09.870

您应该尝试[数据属性](https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes)。这样，您不需要任何字符串替换。只需将目标的 id 保存在数据属性中，在此示例中我使用`data-target`. 您可以更改为您喜欢的任何名称。`data-show` , `data-blah`.

**HTML**

```
<button type="button" class="clear-it" data-target="item01">Clear it and 
show the target</button> 
```

**JavaScript**

```
$('.clear-it').each(function() {
  clearIt();
  $(this).click(function() {
    var whereToGo = this.getAttribute('data-target');
    // or var whereToGo = this.dataset.target;
    // or var whereToGo = $(this).data('target');

    $("#" + whereToGo).show();
  });
}) 
```

# c# - 如何在 MonoTouch 中反映到内部和私有嵌套类？

> ID：15979266
> 
> 赞同：1
> 
> 时间：2013-04-12T19:20:18.750
> 
> 标签：c#, reflection, xamarin.ios

环境：

*   单触 (6.2.1.201)
*   Mac OSX (10.8.3)
*   iOS 模拟器 6.0

我正在尝试编写测试以确保`NSNotifications`我想要的`NSNotificationCenter.DefaultCenter`. *没问题*，我想。我有我的清单，`Notifications`我可以问`DefaultCenter`它注册了什么......

哦，等等，不，你不能。:\

好的，我可以反映到我的班级并获取我创建的（私人）观察员列表并在那里签到。`NSObjects`除了它是一个`MonoTouch.Foundation.InternalNSNotificationHandler`对象列表。

好的，让我们做一些检查，`InternalNSNotificationHandler`它是一个内部类，它对“notificationCenter”和“notify”`MonoTouch.Foundation`有一个非公开的引用。`NSNotificationCenter``NSNotification`

notify 似乎是一个不错的起点，但我在其中找不到任何对通知名称的引用。好吧，让我们检查一下通知中心。就在那里！在`notificationCenter.__mt_ObserverList_var._items[i].Name`. 我尝试反映到`__mt_ObserverList_var`（这是 a `List<ObservedData>`），所以我可以遍历它们并将其`.Names`与我的列表进行比较，并确保它们都在其中。

```
var ifcType = typeof(myClass);
var observerField = ifcType.GetField("_observers", BindingFlags.NonPublic | BindingFlags.Static);
var observers = observerField.GetValue(null);
var internalNSNotHandlerType = observers[0].GetType();
// so far so good
var notCenterField = internalNSNotHandlerType.GetField("notificationCenter", BindingFlags.NonPublic); // this returns null 
```

无论我做什么，它都会返回 null。我尝试像这样从程序集中加载类型：

```
var assembly = Assembly.GetAssembly(typeof(NSNotificationCenter));
var internalNSNotHandlerType = assembly.GetType("MonoTouch.Foundation.InternalNSNotificationHandler");
// so far so good
var notCenterField = internalNSNotHandlerType.GetField("notificationCenter", BindingFlags.NonPublic); // this returns null 
```

如果我达不到，我就达不到`List<ObservedData>`。

为什么这总是返回null？是因为它没有集会的全部权利吗？在这种环境下甚至有可能获得完全权利吗？

# ruby-on-rails-3 - rake 迁移因未定义的局部变量或方法而中止

> ID：15979268
> 
> 赞同：0
> 
> 时间：2013-04-12T19:20:24.327
> 
> 标签：ruby-on-rails-3, rails-migrations

运行 rake db:migrate 时出现问题。错误信息就像

```
-- create_table(:addresses)
   -> 0.1792s
-- contact_id()
rake aborted!
An error has occurred, this and all later migrations canceled:

undefined local variable or method `contact_id' for #<CreateAddresses:0x00000001724718>/var/lib/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/migration.rb:465:in `block in method_missing' 
```

我在迁移之前使用了命令

```
rails g model address street:string city:string region:string postalcode:string country:string contact_id:integer 
```

还有我的迁移文件：

```
class CreateAddresses < ActiveRecord::Migration
  def change
    create_table :addresses do |t|
      t.string :street
      t.string :city
      t.string :region
      t.string :postalcode
      t.string :country
      t.integer :contact_id

      t.timestamps
    end
    add_index :addresses, [contact_id, :create_at]
  end
end 
```

谁能告诉我哪里出错了？十分感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:24:20.200

你`:`之前失踪了`contact_id`：

```
add_index :addresses, [:contact_id, :create_at] 
```

# c# - Windows 8 - 如何正确获取嵌套文件夹？

> ID：15979273
> 
> 赞同：2
> 
> 时间：2013-04-12T19:20:38.980
> 
> 标签：c#, windows, asynchronous, windows-8, windows-runtime

我有一个绑定到从磁盘加载图像的对象集合的 GridView。

当对象变得可见时，它们被放入堆栈，并且图像按顺序从堆栈中加载。

问题是 GetFolderAsync() 在包含对象的 ScrollViewer 停止滚动之前不会返回。

代码如下：

```
 public static async Task<StorageFolder> GetFileFolderAsync(String fileUrl)
    {
        try
        {
            string filePathRelative = DownloadedFilePaths.GetRelativeFilePathFromUrl(fileUrl);
            string[] words = filePathRelative.Split('\\');
            StorageFolder currentFolder = await DownloadedFilePaths.GetAppDownloadsFolder();
            for (int i = 0; (i < words.Length - 1); i++)
            {
                //this is where it "waits" for the scroll viewer to slow down/stop
                currentFolder = await currentFolder.GetFolderAsync(words[i]);
            }
            return currentFolder;
        }
        catch (Exception)
        {
            return null;
        }
    } 
```

我已将其精确定位到它获取包含图像的文件夹的那一行。这甚至是获取嵌套文件夹的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:23:43.213

您可以尝试使用在线程池线程上`ConfigureAwait(false)`运行循环：`for`

```
public static async Task<StorageFolder> GetFileFolderAsync(String fileUrl)
{
    try
    {
        string filePathRelative = DownloadedFilePaths.GetRelativeFilePathFromUrl(fileUrl);
        string[] words = filePathRelative.Split('\\');
        // HERE added ConfigureAwait call
        StorageFolder currentFolder = await
            DownloadedFilePaths.GetAppDownloadsFolder().ConfigureAwait(false);
        // Code that follows ConfigureAwait(false) call will (usually) be 
        // scheduled on a background (non-UI) thread.
        for (int i = 0; (i < words.Length - 1); i++)
        {
            // should no longer be on the UI thread, 
            // so scrollviewer will no longer block
            currentFolder = await currentFolder.GetFolderAsync(words[i]);
        }
        return currentFolder;
    }
    catch (Exception)
    {
        return null;
    }
} 
```

请注意，在上述情况下，由于没有在 UI 上完成任何工作，您可以使用`ConfigureAwait(false)`. 例如，以下内容将不起作用，因为在 之后有一个与 UI 相关的调用`ConfigureAwait`：

```
// HERE added ConfigureAwait call
StorageFolder currentFolder = await
    DownloadedFilePaths.GetAppDownloadsFolder().ConfigureAwait(false);
// Can fail because execution is possibly not on UI thread anymore:
myTextBox.Text = currentFolder.Path; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:14:03.193

事实证明，我用来确定对象可见性的方法阻塞了 UI 线程。

> 我有一个绑定到从磁盘加载图像的对象集合的 GridView。
> 
> **对象在变得可见时被放入堆栈**，并且图像按顺序从堆栈中加载。
> 
> 问题是 GetFolderAsync() 在包含对象的 ScrollViewer 停止滚动之前不会返回。

# firefox - @font-face 停止在 Firefox 中工作

> ID：15979275
> 
> 赞同：0
> 
> 时间：2013-04-12T19:20:42.987
> 
> 标签：firefox, font-face

**再次编辑说没关系，因为问题不再发生（？）**

**编辑添加链接**

我的网站：

[http://www.mainstreetmassage.co/index.html](http://www.mainstreetmassage.co/index) - 样式表的相对路径

[http://www.mainstreetmassage.co/index2.html](http://www.mainstreetmassage.co/index2) - 样式表的绝对路径

在同一主机帐户上复制站点：

http://

www.mcdanielcounseling.com/index.html

这个“复制站点”是昨晚更改的站点，仅删除了其中包含自定义字体的蓝丝带的 html 和 css - 但实际的字体文件仍在“复制站点”的 css 文件夹中

这 2 个站点位于 2 个单独的文件夹中，不共享任何资源。

**编辑结束**

无论使用什么浏览器，2 种自定义字体都可以正常工作。最初让 FF 工作时我遇到了一些麻烦，但不久前通过将字体文件“松散”放在 css 文件夹中而不是它们自己的文件夹中进行了排序，并且从那时起它运行良好。

我做的所有链接都是绝对的，因为这似乎使页面更快，但这也是不久前的事情，直到今天早上才出现问题。

我能想到的唯一改变是，我在同一个托管帐户或服务器上设置了第二个站点，起初只是我站点的复制和粘贴，但我一直在为所有者慢慢更改它，最后晚上，仅在该站点的文件夹中，我没有删除自定义字体文件，而是删除了 CSS 文件中对它们的引用，以及使用它们的 HTML 元素 - 但仅在第二个站点中，而不是我的。

然后突然之间，今天我的网站上的字体根本没有显示在 FF 中。我通过遵循此处的另一个答案来修复它，该答案建议使 url 与 css 相关，并且有效，但我想知道是什么导致了它发生以及我是否需要更永久的修复。

谢谢

# java - “不能从静态上下文引用非静态方法” JPA Java

> ID：15979278
> 
> 赞同：2
> 
> 时间：2013-04-12T19:20:57.957
> 
> 标签：java, jpa

我从这一行得到“不能从静态上下文引用非静态方法”错误：

`createStudent("stu00001", new Date(631152000000)), "m", "WB", new Type_Name("Bob", "", "Smith"));`

你如何正确形成“日期”？我查看了 API 并尝试了不同的方法，但我仍然收到日期错误。

```
package grade_db;

import bean.Student;
import bean.Type_Name;
import bean.University;
import java.util.Date;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
/**
 *
 * @author Sam
 */

public class Main {

EntityManager em;
EntityManagerFactory emf;

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here

        EntityManagerFactory emf = Persistence.createEntityManagerFactory("db/grades.odb");

        EntityManager em;
        em = emf.createEntityManager();

        createStudent("stu00001", new Date(631152000000)), "m", "WB", new Type_Name("Bob", "", "Smith"));

        em.close();
        emf.close();
    }

    public Student createStudent(String student_id, Date dob, String gender, String nationality, Type_Name name){
    Student stu = new Student();
    stu.setDob(dob);
    stu.setGender(gender);
        stu.setName(name);
    stu.setNationality(nationality);

        stu.setCampus_id("cam00001");
        stu.setCourse_id(null);
        stu.setStudent_id(student_id);

    em.persist(stu);
    return stu;
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T19:22:22.493

问题是您试图`createStudent()`从`main()`. 如果您将`createStudent()`方法更改为静态的，那么您应该很高兴：

```
public static Student createStudent(String student_id, Date dob, String gender, String nationality, Type_Name name) {
    // ... And so on 
} 
```

**编辑**： OP 指出，仅此更改在访问变量`em`和时给他另一个错误`emf`。要解决这个问题，您还需要制作这些 variables `static`：

```
static EntityManager em;
static EntityManagerFactory emf; 
```

那时，您班级中的所有内容都是静态的。假设这是一个简单的一次性或示例——我很乐意假设因为这个类被调用了`Main`——让一切都是静态的就可以了。总而言之，代码如下所示：

```
package grade_db;

import bean.Student;
import bean.Type_Name;
import bean.University;
import java.util.Date;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
/**
 *
 * @author Sam
 */

public class Main {

    static EntityManager em;
    static EntityManagerFactory emf;

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here

        EntityManagerFactory emf = Persistence.createEntityManagerFactory("db/grades.odb");

        EntityManager em;
        em = emf.createEntityManager();

        createStudent("stu00001", new Date(631152000000)), "m", "WB", new Type_Name("Bob", "", "Smith"));

        em.close();
        emf.close();
    }

    public static Student createStudent(String student_id, Date dob, String gender, String nationality, Type_Name name){
        Student stu = new Student();
        stu.setDob(dob);
        stu.setGender(gender);
        stu.setName(name);
        stu.setNationality(nationality);

        stu.setCampus_id("cam00001");
        stu.setCourse_id(null);
        stu.setStudent_id(student_id);

        em.persist(stu);
        return stu;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:23:52.973

制作方法

```
 public static Student createStudent(String student_id, Date dob, String gender, String nationality, Type_Name name){
Student stu = new Student(); 
```

静止的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:23:09.467

这是因为 CreateStudent 是对象的成员方法。Main 是静态的，不是对象的一部分。

您需要创建一个新的 Main 对象，或使 student 成为静态对象才能使其正常工作。

如果您将 createStudent 设为静态，它将起作用。

```
public static Student createStudent(String student_id, Date dob, String gender, String nationality, Type_Name name) 
```

# php - 后控制器挂钩中的 CodeIgniter 重定向循环

> ID：15979282
> 
> 赞同：0
> 
> 时间：2013-04-12T19:21:08.253
> 
> 标签：php, codeigniter, redirect, oauth, hook

这是我的控制器：

```
<?php
  class Check_Login {
    var $CI;
    var $class;
    var $allowed_klasses = array('user', 'testing', 'home', 'lesson_assets', 's3_handler', 'ajax', 'api', 'pages', 'invite', 'mail', 'partner', 'renew', 'store', 'news', 'breathe','popup','subscription', 'lessons');

    public function __construct() {
      $this->CI =& get_instance();

      if(!isset($this->CI->session)) {
        $this->CI->load->library('session');
      }

      if(!nash_logged_in()) {
        $this->CI->session->sess_destroy();
        redirect('/');
      }

      $this->_set_accessed_klass();
    }

    public function auth_check() {
      if($this->CI->session->userdata('id')) {
        $query = $CI->db->query("SELECT authentication_token FROM users WHERE id = ".$this->CI->session->userdata('id')." AND authentication_token IS NOT NULL");
        if(!in_array($this->class, $this->allowed_klasses)) {
          if($query->num_rows() == 0){
            redirect('/user/logout');
          }
        }else{
          return;
        }
      }else{
        return;
      }
    }

    private function _set_accessed_klass() {
      $this->class = $this->CI->router->fetch_class();
    }
  } 
```

我指的也是：

```
if(!nash_logged_in()) {
        $this->CI->session->sess_destroy();
        redirect('/');
      } 
```

本质上，该应用程序使用该`nash_logged_in()`方法检查我们的 OAuth 系统，以查看用户是否真正“登录”。当这种情况发生时，会发生重定向循环。

该`nash_logged_in`方法仅返回 TRUE 或 FALSE 的 JSON 键。为什么我会遇到这个重定向循环？

nash_logged_in 方法：

```
if(!function_exists('nash_logged_in')) {
  function nash_logged_in(){
    $url = NASH_OAUTH_URL . '/api/v1/loggedin.json';
    $json = file_get_contents($url);
    $data = json_decode($json);
    return $data->loggedin;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:36:37.927

如果 nash_logged_in() 不返回布尔值 false 或整数 0 或 null，则该语句被评估为 true，因此您的重定向。

在此处发布 nash_logged_in() 以查看发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:47:12.297

您不需要为此方法使用钩子

> **后控制器挂钩**

您可以扩展 CI_Controller 并在需要验证的子类的 __constructor 中运行 Authentication 库。

您当前的控制器有点乱，对我来说它看起来像一个库，而不是控制器，如果您在控制器中完成所有操作，则无需重新实例化超级对象！

但是，我的建议是将所有内容都移到库中（因为有许多依赖于它的控制器/类）。

您的代码的某些元素对我来说没有意义，可能是因为我无法从您发布的代码中看到更大的图景。

这可能会给你一些食物（或不），不管我会如何处理它。

**应用程序/库/authentication.php**

```
class Authentication
{

    protected $allowedClasses = array ( ) ;
    protected $userId         = null ;
    protected $nashURL ;

    const NASH_OAUTH_URL = '' ;

    public function __construct ()
    {
        $this->nashURL = static::NASH_OAUTH_URL . '/api/v1/loggedin.json' ;

        //check for a user id in session
        //this may not be set yet!!
        $this->userId = (isset ( $this->session->userdata ( 'id' ) ))
            ? $this->session->userdata ( 'id' )
            : null ;

        /** Load dependancies * */
        $this->load->model ( 'Authentication_Model' ) ;
        $this->load->library ( 'Session' ) ;

    }

    /**
     * nashCheckLoginViaCurl
     * @return boolean
     */
    protected function nashCheckLoginViaCurl ()
    {
        if ( function_exists ( 'curl_init' ) )
        {
            return show_error ( "Enabled CURL please!" , 500 ) ;
        }

        $curl = curl_init () ;
        curl_setopt_array ( $curl ,
                            array (
            CURLOPT_URL => $this->nashURL ,
            /** CHECK CURL DOCS FOR FULL LIST OF OPTIONS - FILL THE REST YOURSELF * */
        ) ) ;

        if ( curl_errno ( $curl ) )
        {
            return false ;
        }

        $info     = curl_getinfo ( $curl ) ;
        $responce = curl_exec ( $curl ) ;
        curl_close ( $curl ) ;

        //Check and make sure responce is a BOOLEAN and not a STRING
        //we will typecast below just incase
        $responce = json_decode ( $responce ) ;

        return ($info[ 'http_code' ] == '200' and ( bool ) $responce->loggedin === true)
            ? true
            : false ;

    }

    /**
     * verifyAccess
     * @param CI_Controller $class (Dependancy Injection)
     * @return Mixed
     *
     */
    public function verifyAccess ( CI_Controller $class )
    {
        //Is there a userId in the session
        //ie: is user logged In
        if ( is_null ( $this->userId ) or ! ( int ) $this->userId )
        {
            return false ;
        }

        //grab list of allowed classes
        $this->allowedClasses = $this->listAllowedClasses () ;

        //check to see if $class is in list of allowed classes
        if ( ! in_array ( $class , $this->allowedClasses ) )
        {
            return false ;
        }
        //check to see if nashCheckLoginViaCurl returned true
        if ( ! $this->nashCheckLoginViaCurl () )
        {
            $this->logout () ;
            return false ;
        }

        //return boolean or $authentication_token based on DB query
        return $this->Authentication_Model->isUserIdRegistered ( $this->userId ) ;

    }

    /**
     * logout
     * @return void
     */
    public function logout ()
    {
        $this->session->unset_userdata ( array ( 'id' => 0 ) ) ;
        $this->session->sess_destroy () ;
        $this->session->sess_start () ;
        return redirect ( '/' ) ;

    }

    /**
     * listAllowedClasses
     * MAYBE USE A CONFIG FILE FOR THIS?
     * @return array
     */
    protected function listAllowedClasses ()
    {
        return array (
            'user' , 'testing' , 'home' , 'lesson_assets' , 's3_handler' , 'ajax' ,
            'api' ,
            'pages' , 'invite' , 'mail' , 'partner' , 'renew' , 'store' , 'news' ,
            'breathe' ,
            'popup' , 'subscription' , 'lessons'
            ) ;

    }

    /**
     * Load CI Super object object
     *
     * @param string $object
     * @return object
     */
    public function __get ( $object )
    {
        return get_instance ()->$object ;

    }

} 
```

**应用程序/模型/authentication_model.php**

```
class Authentication_Model extends CI_Model
{

    public function isUserIdRegistered ( $uid )
    {
        $this->db->select ( 'authentication_token' )
            ->from ( 'users' )
            ->where ( 'id' , $uid )
            ->where ( 'authentication_token IS NOT' , 'NULL' )
            ->limit ( 1 ) ;

        $query = $this->db->get () ;

        return ( $query->num_rows () > 0 )
            ? $query->result ()
            : FALSE ;

    }

} 
```

**应用程序/核心/MY_Controller.php**

```
class MY_Controller extends CI_Controller
{

    protected $authentication_token ;

    public function __construct ()
    {
        parent::__construct () ;
        $this->load->library ( 'authentication' ) ;

    }

    protected function _verifyAccess ( $class )
    {
        $authorized = $this->authentication->verifyAccess ( strtolower ( $class ) ) ;

        if ( ! $authorized )
        {
            //kill further script execution by returning
            //redirect url
            return redirect ( 'login' ) ;
        }
        else
        {
            $this->authentication_token = $authorized ;
        }
        return ; //return control back to the controller who called me

    }

} 
```

**测试不同的控制器 - 模拟后控制器挂钩 **

```
class Some_Controller extends MY_Controller
{

    public function __construct ()
    {
        parent::__construct () ;

        $this->_verifyAccess ( __CLASS__ ) ;

    }

} 
```

-

```
class Another_Controller extends MY_Controller
{

    public function __construct ()
    {
        parent::__construct () ;

        $this->_verifyAccess ( __CLASS__ ) ;

    }

} 
```

# java - 如何将信息从 from 中的 jList 传递到另一个框架中的另一个 jList？

> ID：15979290
> 
> 赞同：0
> 
> 时间：2013-04-12T19:21:58.240
> 
> 标签：java, swing, jframe, jlist

我必须做一个项目，我正在申请医院。我有患者和医生的屏幕（jFrames），我可以在其中通过 jFields（或医生）输入患者的信息，患者将被添加到带有标识符（int）和患者姓名的 jList 中。当我单击每个患者时，每个字段都会包含我之前为患者设置的信息。事情是我需要为约会制作一个屏幕（jFrame），其中我有一个我之前在患者框架中输入的患者的列表，当我点击时，我将能够看到约会的信息。我怎样才能做到这一点？

谢谢！

# performance - 什么可以使开发模式和产品模式之间的性能不同？

> ID：15979291
> 
> 赞同：2
> 
> 时间：2013-04-12T19:21:59.770
> 
> 标签：performance, grails, opencsv, grails-2.2

# 这个例子

我正在编写一个实用程序来使用 OpenCSV 在 CSV 中转换域类、pojos 和 pogos。我创建的示例[在 git](https://github.com/sergiomichels/grails-csv-example)上可用。

这个想法是转到 index 操作`TestController`并点击将进行 ajax 调用的按钮。此 ajax 将在 CSV 中转换在引导程序上创建的域类的所有实例，`Test`并将此文本返回到视图。

## 流量

*   Bootstrap 创建 5000 条域类记录`Test`
*   用户转到索引页面：**/csv-example/test/index**
*   用户点击按钮，发出ajax请求
*   控制器列出所有测试记录
*   csv 格式 `ArrayList`的控制器转换`String`
    *   `DefaultCSVConverter`将寻找类 Test 的序列化程序
    *   `DomainClassSerializer`将实例转换为`List<String[]>`
    *   `DefaultCSVConverter`将使用**OpenCSV**编写`List<String[]>`

## 问题

如果我在模式下运行这个示例应用程序，Grails 会快得多`production`，我试图理解为什么。我已经尝试在`dev`模式下运行，禁用重新加载代理：

```
grails Ddisable.auto.recompile=true -noreloading run-app 
```

这对转换实例所花费的时间没有影响。

所以我的问题是：除了重载代理，还有什么可以让开发模式和生产模式之间的性能有所不同？

## 环境

圣杯 2.2.1

赢 7 x64

JDK 1.6.0_43 64 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:51:58.797

似乎差异是由国际化引起的。`PluginAwareResourceBundleMessageSource`在 dev 和 prod 运行模式之间具有不同的性能。发现我使用了 Jvisualvm，在开发和生产模式下分析 CPU。

**启动 Grails**

```
set GRAILS_OPTS=-Xverify:none -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8500 -Dcom.sun.management.jmxremote.authenticate=false -

grails  -Ddisable.auto.recompile=true -noreloading run-app 
```

**启动 jvisualvm**

```
jvisualvm -J-Xms1G -J-Xmx1G –cp:a path/to/app/target/classes 
```

**分析结果应如下所示**

![在此处输入图像描述](https://i.stack.imgur.com/VhXTQ.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:28:43.237

我查看了您的 github 代码，并查看了 prod dataSource - pooled=true？这能做到吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:32:16.680

我的理解是，关于应用程序可执行文件，prod 和 dev 的主要区别在于 grails-app/conf 中定义的内容。假设您对 prod 和 dev 具有相同的硬件/操作系统配置和启动参数，我将首先查看您的配置文件中的不同之处。

你的 Config.groovy

```
environments {
    development {
        grails.logging.jul.usebridge = true
    }
    production {
        grails.logging.jul.usebridge = false
        // TODO: grails.serverURL = "http://www.changeme.com"
    }
} 
```

数据源.groovy

```
development {
        dataSource {
            dbCreate = "create-drop" // one of 'create', 'create-drop', 'update', 'validate', ''
            url = "jdbc:h2:mem:devDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
        }
}
...
production {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:prodDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
            pooled = true
            properties {
               maxActive = -1
               minEvictableIdleTimeMillis=1800000
               timeBetweenEvictionRunsMillis=1800000
               numTestsPerEvictionRun=3
               testOnBorrow=true
               testWhileIdle=true
               testOnReturn=true
               validationQuery="SELECT 1"
            }
        }
} 
```

突出的一件事（如果我错了，请纠正，因为我为 H2 配置数据源已经有一段时间了）是在 dev 中，您在内存中运行 H2，而在 prod 中，您正在写入磁盘。

# python - Python 无法在我的电脑上打开 .py 脚本，但它可以在 execfile 中运行它们

> ID：15979293
> 
> 赞同：0
> 
> 时间：2013-04-12T19:22:13.923
> 
> 标签：python

我一直试图解决这个问题 3 小时无济于事。我从安装 Python 2.7.4

[http://www.python.org/download/releases/2.7.4/](http://www.python.org/download/releases/2.7.4/)

（点击 Windows x86 MSI 安装程序，不确定是否需要程序数据库？也许这就是问题所在）

并且python.exe工作正常，当我用notepad ++制作文本文件然后将它们保存为.py，然后当我进入python.exe时

我输入 Python file.py 并且每次无论我输入什么（无论我是否有参​​数）它都会出现 SyntaxError: Invalid Syntax

但是，如果我将文件作为 execfile("file.py") 运行，它就可以工作。唯一的问题是，如果我尝试运行带有参数的脚本，则 execfile 无法传递参数。

那么有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:26:46.780

不要尝试`python.exe`直接在控制台中运行脚本表单，如下所示：

```
python.exe file.py arg1 arg2 [...] 
```

如果文件关联`.py`设置正确，您甚至可以只键入

```
file.py arg1 arg2 [...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:35:16.140

你可以更进一步。将此行保存在名为“python”的 .bat 脚本中

```
@C:\Python27\python.exe %* 
```

并将该 .bat 文件放在 C:\Windows\System32 下

这将使您不必在每次要运行 python 脚本时在命令行中键入“python.exe”。

我更喜欢上面的方法，而不是弄乱环境变量。

# visual-studio-2008 - RDLC 页脚不显示 Visual Studio 2008

> ID：15979294
> 
> 赞同：3
> 
> 时间：2013-04-12T19:22:16.477
> 
> 标签：visual-studio-2008, export-to-excel, rdlc

我有一个项目，我必须在其中使用 Visual Studio 2008，并且我正在狂热地尝试添加页脚。它从“报告”下的 VS 2008 的顶部菜单中添加

但是，我看不到它显示出来。我有一个 Excel 导出链接，该链接将所有将 RDLC 渲染到 Excel 中的代码撕开。

我在顶部添加了一个公司徽标图像作为页眉，效果很好，但不确定为什么文本/图像/静态和动态文本中的零没有出现在 RDLC 的 excel 页面的页脚/底部。

任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-06T16:45:33.427

哇，花了很多时间在这上面。最后在打印预览模式下查看电子表格后发现页脚实际上存在，它们只是没有出现在行中。

# mysql - 选择 * WHERE status <> 'deleted' OR status <> 'completed' AND update_datetime < unix_timestamp(now() - interval 7 day)

> ID：15979297
> 
> 赞同：1
> 
> 时间：2013-04-12T19:22:36.260
> 
> 标签：mysql, sql, datetime

如果 update_datetime 列早于 7 天（MySQL 版本 2013-04-11 11:22:44），我想提取状态列未标记为“已删除”且状态标记为“已完成”的所有行。

这是我微弱而失败的尝试：

```
WHERE
    status <> 'deleted'
 OR status <> 'completed'
AND update_datetime < unix_timestamp( now() - interval 7 day ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:51:23.080

```
WHERE
    status <> 'deleted'
AND (
        (update_datetime < unix_timestamp( now() - interval 7 day ) AND status = 'completed')
    OR  (update_datetime >= unix_timestamp( now() - interval 7 day ))
) 
```

如果`update_datetime`是一`DATETIME`列，请改用：

```
WHERE
    status <> 'deleted'
AND (
        (update_datetime < DATE_SUB(NOW(), INTERVAL 7 day) AND status = 'completed')
    OR  (update_datetime >= DATE_SUB(NOW(), INTERVAL 7 day))
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:50:02.493

你是这个意思吗？

```
WHERE
    (status <> 'deleted'
 OR status <> 'completed')
AND update_datetime < unix_timestamp( now() - interval 7 day ) 
```

它等于

```
WHERE
    (not status in ('deleted', 'completed'))
AND update_datetime < unix_timestamp( now() - interval 7 day ) 
```

# .htaccess - htaccess：将 url 从一个域/文件夹重写到另一个域

> ID：15979298
> 
> 赞同：-2
> 
> 时间：2013-04-12T19:22:38.727
> 
> 标签：.htaccess, mod-rewrite

我们有两个域名停在一个公共站点上。对于特定的文件夹路径，我们需要确保始终使用其中一个域。我需要一个重写规则，该规则仅在访问某个文件夹（及其子文件夹）时才指向正确的域。

[http://www.domain1.com/admin/](http://www.domain1.com/admin/) 重定向到 [http://www.domain2.com/admin/](http://www.domain2.com/admin/)

我需要考虑第一个 url 可能是： [http](http://domain1.com/admin/) ://domain1.com/admin/ （即根域或 www 形式）的可能性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:05:24.787

这可以通过一个简单[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)的[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(?:www\.)?domain1\.com$
RewriteRule ^admin.* http://www.domain2.com/$0 [R,L] 
```

当一切按预期工作时，您可以更改`R`为`R=301`.

# java - JPanel 的空指针异常

> ID：15979304
> 
> 赞同：0
> 
> 时间：2013-04-12T19:22:48.680
> 
> 标签：java, swing, nullpointerexception, jpanel

当我试图在 actionPerformed 方法中调用 panel2 时，我得到了 nullpointerexception。请帮助我摆脱这个愚蠢的prblm。

```
public class PanelEventTest implements ActionListener {
    /**
     * @param args
     */
     JFrame frame;
     JPanel panel1, panel2;
     String[] list = {"Sachin","Tarun","Vipin"};
     JList jlist;
     JButton next;

     void originalFrame()
     {
         frame = new JFrame();
         frame.setSize(500, 300);
         frame.setVisible(true);
         frame.setLayout(new FlowLayout());
         frame.add(panel1());
         frame.add(panel2());
     }

     JPanel panel1()
     {
         panel1 = new JPanel();
         next = new JButton("Next");
         next.addActionListener(new PanelEventTest());
         panel1.add(next);
         return panel1;
     }

    JPanel panel2()
    {
         panel2 = new JPanel();
         jlist = new JList(list);
         panel2.add(jlist);
         panel2.add(new JLabel("Test"));
         return panel2;
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        new PanelEventTest().originalFrame();
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        // TODO Auto-generated method stub
        if(e.getActionCommand() == "Next")
        {
            panel2.removeAll();
        }
    }
 } 
```

操作事件未与 panel2 关联，这是此异常背后的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:26:38.930

代替

```
next.addActionListener(new PanelEventTest()); 
```

你应该有

```
next.addActionListener(this); 
```

否则，事件侦听器将是PanelEventTest 的*另一个*`originalFrame()`实例，其方法从未被调用过，`panel2`因此其变量为空。（请注意，即使`originalFrame()`调用了它的方法，它也会从它*自己的*panel2 中删除所有内容，而不是从包含按钮的框架的 panel2 中删除）。

您应该更喜欢为您的侦听器使用（匿名）内部类，而不是使框架本身成为侦听器：

```
next.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        panel2.removeAll();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:27:02.977

也许

`next.addActionListener(this);`

# c# - LINQ - SelectMany OrderBy 外部值然后内部值

> ID：15979308
> 
> 赞同：4
> 
> 时间：2013-04-12T19:23:07.817
> 
> 标签：c#, linq, linqpad

我一直在浏览[Linqpad](http://www.linqpad.net/)示例 linq 示例。在“Projecting - SelectMany”下，他们要求您尝试将以下 linq 语法翻译成 Fluent 语法。这是那里的样本：

```
var fullNames = new[] { "Anne Williams", "John Fred Smith", "Sue Green" }
    .AsQueryable();

IEnumerable<string> query =
    from fullName in fullNames
    from name in fullName.Split()
    orderby fullName, name
    select name + " came from " + fullName;

query.Dump(); 
```

我使用以下方法对其进行了转换：

```
var myQuery = fullNames
   .SelectMany(
      fullName => fullName.Split()
          .OrderBy(fn => fullName)
          .ThenBy(fn=> fn)
      , (fullName, name) => ((name + " came from ") + fullName)
   ); 
```

但是 linqpad 生成以下内容：

```
 IEnumerable<string> query2 = fullNames
    .SelectMany (fName => fName.Split().Select (name => new { name, fName } ))
    .OrderBy (x => x.fName)
    .ThenBy  (x => x.name)
    .Select  (x => x.name + " came from " + x.fName); 
```

**两者都返回相同的结果。一个比另一个快吗？你觉得哪一个更好看？**想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:34:58.663

是，有一点不同。**您的查询返回不正确的结果。**检查以下输入数组的查询结果：

```
var fullNames = new[] { "Anne Williams", "Sue Green", "John Fred Smith" }
                .AsQueryable(); 
```

示例查询结果：

```
Anne came from Anne Williams
Williams came from Anne Williams
Fred came from John Fred Smith
John came from John Fred Smith
Smith came from John Fred Smith
Green came from Sue Green
Sue came from Sue Green 
```

您的查询结果：

```
Anne came from Anne Williams
Williams came from Anne Williams
Green came from Sue Green
Sue came from Sue Green
Fred came from John Fred Smith
John came from John Fred Smith
Smith came from John Fred Smith 
```

问题是您要分别为源数组中的每个项目排序，因此您的项目与输入数组中的顺序完全相同。示例查询在生成所有项目后对其进行排序。

* * *

**您的查询以下列方式工作：**

1.  取输入数组中的元素。第一个是`"Anne Williams"`. 如果没有更多元素，则结束查询。

2.  它被分成几部分，所以我们得到：`["Anne", "Williams"]`.

3.  排序应用于当前输入元素`"Anne Williams"`和拆分部分`["Anne", "Williams"]`。

4.  排序后的元素一个接一个地返回：`"Anne came from Anne Williams"`和`"Williamscame from Anne Williams"`.

5.  它回到第 1 点。

**示例查询以这种方式工作：**

1.  取输入数组中的元素。第一个是`"Anne Williams"`. 如果没有更多元素转到 5。

2.  它被分成几部分，所以我们得到：`["Anne", "Williams"]`.

3.  元素一个接一个地返回：`"Anne came from Anne Williams"`和`"Williamscame from Anne Williams"`.

4.  它回到第 1 点。

5.  排序应用于所有选定的元素。

# c# - 按钮未启用/禁用

> ID：15979317
> 
> 赞同：0
> 
> 时间：2013-04-12T19:23:38.967
> 
> 标签：c#, events, button, visible

我的程序通过串行连接运行测试。单击“运行测试”按钮后，一切正常。RUN TEST 按钮消失，STOP 按钮弹出。数据收集按预期运行。我的问题是停止按钮没有响应。我所有的测试代码都在 RUN TEST 按钮单击事件下运行。我的第二个按钮不会中断吗？

注意：我使用whateverButton.enable 和whateverButton.visible 属性。我需要设置另一个才能使其正常工作吗？

```
runButton.Enabled = false;
runButton.Visible = false;
STOPbutton.Enabled = true;
STOPbutton.Visible = true; 
```

该计划的其余部分太大而无法完全包括在内。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:27:17.333

让我猜猜 - 你禁用“运行”，启用“停止”，执行你的任务，反转“运行”和“停止”的启用/禁用？

您的问题是 UI 未更新，因为 UI 线程正忙于运行您的任务。

使用`BackgroundWorker`或`Task.Run`为任务生成一个新线程，可能需要进行一些重要的重构以使 UI 交互脱离后台线程并支持取消。

# javascript - 如何使用 jquery 检查多个复选框而不给每个复选框一个 id？

> ID：15979318
> 
> 赞同：2
> 
> 时间：2013-04-12T19:23:42.497
> 
> 标签：javascript, jquery, input, checkbox

我正在尝试使用一个带有 jQ​​uery 的复选框来检查多个复选框。我知道如何检查所有复选框或检查多个复选框是否有 ID。不过，我希望能够做到这一点。

我所有的复选框都在一个类似的分组中。我以一致的方式将它们分组。

我有我的工作在[这里](http://jsfiddle.net/sandeepd/W75dy/18/)小提琴。

这是我的代码

```
window.onCheck = function () {
var totals = [0, 0, 0];
$('tr.checkRow').each(function () {
    var $row = $(this);
    if ($row.children('td:first').find('input:checkbox').prop('checked')) {
        $(this).find('td.imageBox').each(function (index) {
            var $imageBox = $(this);
            if ($imageBox.children('img:first').attr('src').indexOf('yes') >= 0) {
                ++(totals[index]);
            }
        });
    }
});

$('#total1').text(totals[0]);
$('#total2').text(totals[1]);
$('#total3').text(totals[2]);
};
window.onCheckForm = function (cb) {
var $cb = $(cb);
var $table = $cb.parents("table");
$('input.subFieldCheck').find($table).prop('checked', function () { return cb.prop('checked')});

} 
```

我的问题是 onCheckForm 函数。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T06:11:32.603

注意：我开始为这个问题的[副本](https://stackoverflow.com/questions/18266369/how-can-i-check-multiple-check-boxes-in-jquery)写这个答案，并意识到我不能发布这个，所以我把它贴在这里。在这个答案中，表结构不同并且简化了很多。

让我们从一个带有复选框列的非常简单的表格开始：

```
<table>
    <thead>
        <tr>
            <th scope='col' id='toggler'>
                <input type='checkbox' id='toggleAll'>
                <label for='toggleAll'>Select all</label>
            </th>
            <th scope='col'>A column</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td headers='toggler'>
                <input type='checkbox'>
            </td>
            <td>some cell data</td>
        </tr>
        <tr>
            <td headers='toggler'>
                <input type='checkbox'>
            </td>
            <td>some cell data</td>
        </tr>
        <tr>
            <td headers='toggler'>
                <input type='checkbox'>
            </td>
            <td>some cell data</td>
        </tr>
        <tr>
            <td headers='toggler'>
                <input type='checkbox'>
            </td>
            <td>some cell data</td>
        </tr>
        <tr>
            <td headers='toggler'>
                <input type='checkbox'>
            </td>
            <td>some cell data</td>
        </tr>
    </tbody>
</table> 
```

在这里，我在标题中有一个复选框以及一个用于可访问性目的的标签（如果您愿意，您可以隐藏标签）。

我还为标题单元格提供了一个 ID，并为元素使用了`headers`属性。这对于我们正在做的事情并不是绝对必要的，但是使用该属性`td`似乎是一个合适的情况。`headers`如果您想将复选框移动到某些行的另一列，您只需将`headers`属性添加到该单元格即可。

下面是一些 JavaScript 代码：

```
$('#toggleAll').change(function () {
    $('td[headers~="toggler"] >  input[type="checkbox"]').prop('checked', $(this).prop('checked'));
}); 
```

我们将一个函数绑定到`change`标题中的复选框的事件。

选择器将在属性中以空格分隔的标记列表中查找作为`td`包含 ID的元素的子元素的所有复选框。`toggler``headers`

该`.prop()`方法设置复选框的`checked`属性以匹配`checked`标题中的复选框（“this”）的属性值。

我们的基本功能在这里完成。

不过，我们可以通过更改顶部复选框的状态以匹配行中复选框的状态来进行改进。

标题复选框的状态应为：

*   如果选中 0，则未选中
*   确定是否检查 (0, `n`)
*   已检查 是否`n`已检查

其中`n`表示所有复选框。

为此，我们将一个函数绑定到`change`表行中每个框的事件：

```
$('td[headers~="toggler"] > input[type="checkbox"]').change(function() {
    var allChecked = true, noneChecked = true;
    var headerCheckbox = $('#toggleAll');

    $('td[headers~="toggler"] > input[type="checkbox"]').each(function(i, domElement) {
        if(domElement.checked) {
            // at least one is checked
            noneChecked = false;
        } else {
            // at least one is unchecked
            allChecked = false;
        }
    });

    if(allChecked) {
        headerCheckbox.prop('checked', true);
        headerCheckbox.prop('indeterminate', false);
    } else if (noneChecked) {
        headerCheckbox.prop('checked', false);
        headerCheckbox.prop('indeterminate', false);
    } else {
        headerCheckbox.prop('indeterminate', true);
    }
}); 
```

我在`.each()`这里使用循环遍历所有适当的复选框，以确定是否选中了全部、无或某些。

请参阅[jsFiddle 演示](http://jsfiddle.net/mkJtu/)。

希望这会有所帮助，我在回答问题时确实学到了很多东西！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:53:23.403

请参阅此小提琴以获得更清洁的方式：

[http://jsfiddle.net/W75dy/19/](http://jsfiddle.net/W75dy/19/)

```
<td class="field">
    <form class="fieldCheck">
        <input type="checkbox" id="Row1Chk" name="Row1" value="Row1" />
    </form> Programs
</td>

$('#Row1Chk').on('change', function(event) {
    $('table.checkTable input[type=checkbox]').prop('checked', $(this).prop('checked'));
}); 
```

# java - 在安卓中登录推特

> ID：15979323
> 
> 赞同：0
> 
> 时间：2013-04-12T19:24:04.047
> 
> 标签：java, android, twitter, twitter4j, jtwitter

我使用库“twitter4j”与 Twitter API 交互。我需要编写登录代码，但我不太明白我该怎么做。我必须编写一个应用程序，用户可以在其中指定用户名和密码，并且我必须使用这个值（用户名和密码）并登录 Twitter。我找到了很多种类的文档，但我不明白我必须如何使用它。详细来说，我不明白为什么我必须使用这样的 twitter 帐户创建应用程序：

[http://xmeng.wordpress.com/2011/07/10/how-to-handle-sign-in-with-twitter-using-twitter4j/](http://xmeng.wordpress.com/2011/07/10/how-to-handle-sign-in-with-twitter-using-twitter4j/)

我需要使用用户名和密码登录，但网络上的示例使用 CONSUMER KEY 和 CONSUMER SEGRET KEY 登录，有人可以帮助我提供一些文档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:22:31.103

> 我需要使用用户名和密码登录，但网络上的示例使用 CONSUMER KEY 和 CONSUMER SEGRET KEY 登录

Twitter API 使用[OAuth 身份验证](https://dev.twitter.com/docs/auth/oauth)。这意味着您不直接使用用户名/密码，而是使用用户登录 Twitter 后返回给您的 OAuth 令牌。没有文档向您展示如何仅使用用户名/密码，因为这不是 Twitter API 的预期用途。

# php - 找不到对象 404 错误

> ID：15979324
> 
> 赞同：-1
> 
> 时间：2013-04-12T19:24:05.447
> 
> 标签：php, mysql, http-post, http-status-code-404, submit-button

此代码返回我无法通过修改代码解决的 404 Object Not Found 错误。而且我不知道这是代码问题还是本地主机问题。我需要为我的最后一年项目运行它。请帮忙。非常感谢你们。

```
<?php

 session_start();

 require "dbc.php";

 echo "<center>";
 echo "<img src='web_header.jpg'/>";
echo "</center>";

if($_SESSION['admin_username'])
{
echo "Hello : ".$_SESSION['admin_username'];

echo "<p><a href ='admin_panel.php'>Admin Main</a> || <a href='manage_patients.php'>Manage Patients</a> || <a href ='manage_doctor.php'>Manage Doctors</a> || <a href ='mail_form.php'>Send Email</a> || <a href='logout.php'>Logout</a> "; 

echo "<title>Manage Patients</title>";

echo "<h2>Manage Patients</h2>";

$query = mysql_query("SELECT * FROM users");
$numrows = mysql_num_rows($query);

if ($numrows != 0)

{
    echo "<table width='1285' height='102' border='1'>";
    echo "<tr><th>ID</th><th>Name</th><th>IC Number</th><th>Address</th><th>Mobile Number</th><th>E-mail Address</th><th>Doctor ID</th></tr>";
    while ($rows = mysql_fetch_assoc($query))
    {
        echo "<tr>";
        echo "<td width='57' height='33'>";
        echo "<center>";
        echo $rows['id'];
        echo "</center>";
        echo "</td>";
        echo "<td width='173'>";
        echo $rows['name'];
        echo "</td>";
        echo "<td width='113'>";
        echo "<center>";
        echo $rows['icnum'];
        echo "</center>";
        echo "</td>";
        echo "<td width='622'>";
        echo $rows['address'];
        echo "</td>";
        echo "<td width='110'>";
        echo "<center>";
        echo $rows['mobile'];
        echo "</center>";
        echo "</td>";
        echo "<td width='170'>";
        echo "<center>";
        echo $rows['email'];
        echo "</center>";
        echo "</td>";
        echo "<td width='90'>";
        echo "<center>";
        echo $rows['docID'];
        echo "</center>";
        echo "</td>";
        echo "</tr>";
    }   
   echo "</table>";

   echo"<br>";
   echo"</br>";
   echo "<form action = 'manage_patients.php method=POST'>";
   echo "<p>Assign Doctor ID : ";
   echo "<input type='text' name='assign_id' value='Insert Doctor ID Here'>";
   echo " for Patient ID : ";
   echo "<input type='text' name='id' value='Insert Patient ID Here'></p>";
   echo "<input type= 'submit' name='submit' value='Assign Now'>";
   echo "</form>";

if (isset($_POST['submit']))
{
    require "dbc.php";
    $name = mysql_real_escape_string($_POST['assign_id']);
    $id   = mysql_real_escape_string($_POST['id']);
    $query = mysql_query("UPDATE users SET docID='$assign_id' WHERE id='$id'");
    echo "Doctor ID Successfully Assigned for Patient ID : $name ";
    echo "<p>Refresh page to view changes.</p>";
}   

}

 }
 else
{
header("location:index.html");  

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:26:22.633

如果您收到 404 错误，则表示找不到该页面。因此，您的代码很可能不是问题（这会给您带来 500 服务器错误）。相反，您很可能使用了错误的 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:31:02.893

改变这个

```
 <form action = 'manage_patients.php method=POST'> 
```

到

```
<form action = 'manage_patients.php' method='POST'> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T19:29:30.627

```
<form action = 'manage_patients.php method=POST'> 
```

我觉得你的这行有点可疑

# css - 两列，等高布局 - 列之间的空间

> ID：15979328
> 
> 赞同：1
> 
> 时间：2013-04-12T19:24:19.313
> 
> 标签：css, layout, multiple-columns

我发现一些代码可以创建完美的带有页眉和页脚的两列布局。无论内容如何，​​这两列都完美地向右延伸，这正是我所寻找的。

问题：我找不到在两列之间创建空间的方法。我需要空间，因为我正在使用边框，而且看起来很拥挤。列不浮动，边距也不起作用。

有人能想出一种在不破坏功能的情况下将两者分开的方法吗？

这是 jsfiddle 链接：http: [//jsfiddle.net/7M9rg/3/](http://jsfiddle.net/7M9rg/3/)

非常感谢！

这是代码：

```
<div id="wrapper">
<div id="header">
</div>

<div id="main">

<div id="side">
<div id="side-stuff">
<ul>
<li><a href="../English/index.html">Home</a></li>
</ul>
</div>
</div>

<div id="content">
<p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has</p>
</div>
</div>

<div id="footer">&copy; 2013 </div>
</div> 
```

CSS：

```
/*css reset*/
html,body {position:relative;margin:0;padding:0;min-height:100%;width:100%;
height:100%;}
div,p,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,
textarea,p,blockquote,th,td, figure {margin:0;padding:0;}
ol,ul {list-style:none;}
li {list-style-type: none;}
* { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing:
border-box; }

html, body {
font-family: Helvetica;
height: 100%; /*important for equal height columns*/
min-width: 650px;
}

#wrapper{
height: 100%; /*important for equal height columns*/
padding-bottom:130px; /*This must equal the height of your header*/}

#header{
height: 130px; /*This must equal padding bottom of wrap*/
display:block;
padding: 5px;
color: #fff;
border: thin solid #ebebeb;
border-radius: 10px;
margin: 10px;
background-image: url(Images/gradient.png);
background-repeat: repeat-x;    
width: 99%;}

#main {
position: relative;
height: 100%; /*important for equal height columns*/
width: 99%;
overflow:auto;
display: table; /* This is needed fo children elements using display table cell*/
table-layout: fixed;
padding-bottom: 50px; /*This needs to match footer height*/
overflow: auto;
margin-left: 10px;}

#side{
background-color: #fff;
width: 150px;
margin: 10px;
vertical-align: top;
padding-top: 20px;
padding-right: 10px;
display: table-cell;
border-radius: 10px;
border: thin solid #CCC;}

#side-stuff{
display: block;
padding-left: 10px;}

#content{
background-color: #fff;
padding: 10px;
display: table-cell; /*To make sibling columns equal in height*/
margin-bottom:10px;
border-radius: 10px;
border: thin solid #CCC;}

#content-stuff{
width: auto;
height: auto;}

#footer{
position: relative;
height: 40px;
margin-top: -40px; /* margin-top is negative value of height */
margin-left: 10px;
clear: both; /* Use if floating elements */
color: #999;
width: 99%;
border: thin solid #ebebeb;
border-radius: 10px;
background-image: url(Images/footer_gradient.png);
background-repeat: repeat-x;
background-position: bottom;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:31:13.770

因为您正在使用`display: table-cell`，所以边距不起作用。

这是一种解决方法。`#side`如下创建一个分隔符，并在and之间插入`#content`：

```
<hr class="spacer"> 
```

将新元素设置为：

```
hr.spacer {
    display: table-cell;
    border: 1px;
    width: 10px;
} 
```

将宽度设置为合适的值。

小提琴：http: [//jsfiddle.net/audetwebdesign/navc5/](http://jsfiddle.net/audetwebdesign/navc5/)

这引入了一个额外的元素，但它易于实现且可靠。

请注意，`table-cell`IE7 及更早版本不支持此功能。对于某些人来说，这是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:38:10.443

因为您的元素现在实际上是一个表格，所以您可以使用适用于表格的所有属性。该`border-spacing`属性是您正在寻找的，它适用于*表格*元素。

[http://jsfiddle.net/7M9rg/6/](http://jsfiddle.net/7M9rg/6/)

```
#main {
    border-spacing: 10px;
} 
```

您需要对周围元素的边缘进行一些修补，以使您的`#main`元素回到应有的位置。

# javascript - 每次访问只执行一次 js 函数，并在刷新时再次执行

> ID：15979329
> 
> 赞同：2
> 
> 时间：2013-04-12T19:24:19.267
> 
> 标签：javascript

我希望以下代码每次访问仅运行一次。如果我从主页导航到不同的页面并返回主页，我应该不会再看到效果。如果我刷新页面，我应该看到效果。这是代码：

```
function stack(){
       $('#image').animate({
            width: 200,
            height: 150,
            top: 0,

        },1500);
}
$(function(){
    stack();
}); 
```

这是我在做什么：http: [//jsfiddle.net/kq5M4/](http://jsfiddle.net/kq5M4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:36:23.817

设置一个 cookie 来标记效果已经发生，但还要在每个页面加载时设置一个 cookie，以跟踪最后一页。如果主页加载时，上次访问的页面也是主页，再次运行效果。

（使用[https://github.com/carhartl/jquery-cookie。](https://github.com/carhartl/jquery-cookie.)）

在主页上：

```
var lastPage = $.cookie('last_page');
if (!lastPage || lastPage == document.location.pathname)
    stack(); 
```

在每个页面（包括主页）上：

```
$.cookie('last_page', document.location.pathname, {expires: 0}); // expires: 0 makes it a session-only cookie 
```

您可能*还*需要检查引荐来源网址，以便在他们离开您的网站并稍后返回时再次运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:32:21.900

在页面加载时，检查`document.referrer`是否与您的域不同或空白，然后执行动画。在您的页面之间导航或刷新页面将包含您的域，`document.referrer`因此您将跳过动画。

```
$(function(){
    if (!document.referrer.match(/buybluesky.com/) || document.referrer == document.location.href) {
      stack();
    }
}); 
```

编辑：似乎我错过了一些东西，但我重新编辑了代码以匹配您的所有标准。除了检查referer来决定是否需要显示动画，它还检查referrer是否等于当前位置。如果是，则意味着自从您从该页面来到该页面以来，这是一次刷新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T19:38:51.357

使用 sessionStorage & 存储最后一页：

```
var visited = sessionStorage.getItem('visit');

if (visited == null || document.location.href == sessionStorage.getItem('lastPage')) {
    stack();
    sessionStorage.setItem('visit', 1);
}

sessionStorage.setItem('lastPage', document.location.href); 
```

# uitextfield - 如何拆分 UIBarButtonItem？

> ID：15979333
> 
> 赞同：0
> 
> 时间：2013-04-12T19:24:28.440
> 
> 标签：uitextfield, uibarbuttonitem, uitoolbar

我有一个带有两个 UIBarButtonItems（“上一个”和“下一个”）的 UIToolbar，我将其用作我的 UITextFields 的 inputAccessoryView。这些按钮在文本字段中循环。

我在某些地方看到按钮实际上是一个拆分按钮。我将如何实现这一目标？

这是一张图片：

![上一个-下一个拆分按钮](https://i.stack.imgur.com/QtzaS.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:30:50.987

查看 UISegmented Control 按钮。如果不是这样，请发布您想要的按钮的图像，以便我们更好地帮助您。

# git - 为什么 git 子模块路径错误？

> ID：15979337
> 
> 赞同：3
> 
> 时间：2013-04-12T19:24:44.360
> 
> 标签：git, git-submodules

我有一个 git 存储库（我将其称为`ml`）位于

```
ssh://ml-fey/usr/projects/data/nuclear/mc/type1 
```

这个存储库有一个子模块。`.gitmodules`文件看起来像这样

```
[submodule "Appendix"]
    path = Appendix
    url = /usr/projects/data/nuclear/mc/type1/Appendix 
```

我可以将存储库克隆到一个新的存储库（我将其称为`XL`），但是当我尝试更新子模块时出现此错误

```
$ git submodule update
Cloning into 'Appendix'...
fatal: '/usr/projects/data/nuclear/mc/Appendix' does not appear to be a git repository
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
Clone of 'ssh://ml-fey/usr/projects/data/nuclear/mc/Appendix' into submodule path 'Appendix' failed 
```

请注意，从中搜索`Appendix`子模块的目录缺少最终`type1`目录。git无法更新子模块的原因`XL`是因为`ssh://ml-fey/usr/projects/data/nuclear/mc/Appendix`不存在。去哪儿了`type1`？

存储库的`.gitmodules`文件`XL`如下所示：

```
[submodule "Appendix"]
    path = Appendix
    url = /usr/projects/data/nuclear/mc/type1/Appendix 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-13T04:06:55.697

子模块也在您的`.git/config`文件中被调用。那里的网址正确吗？如果没有，您可以使用`git submodule sync`同步内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-20T04:15:29.463

我还没有足够的声誉，所以我把它作为新的答案。在子模块目录中执行命令`git submodule sync`，而不是父 git 根目录。

# python - 如何在忽略索引对齐的同时分配列

> ID：15979339
> 
> 赞同：12
> 
> 时间：2013-04-12T19:24:48.823
> 
> 标签：python, pandas

假设我有两个数据框`x`，`y`在 Pandas 中，我想`x`用`y`. 我试过这个：

```
x['foo']  = y['bar'].order(ascending=False) 
```

但它没有用，我**怀疑**是因为 Pandas在分配期间**对齐**`x`和`y`（具有相同的索引集）之间的索引

如何让 Pandas 填充另一个数据框中的`x['foo']` 另一列**而忽略**索引的对齐？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T19:44:48.247

我能想到的最简单的方法`pandas`来忽略索引是给它一些没有索引的东西来忽略。从...开始

```
>>> x = pd.DataFrame({"foo": [10,20,30]},index=[1,2,0])
>>> y = pd.DataFrame({"bar": [33,11,22]},index=[0,1,2])
>>> x
   foo
1   10
2   20
0   30
>>> y
   bar
0   33
1   11
2   22 
```

我们有通常的对齐方法：

```
>>> x["foo"] = y["bar"].order(ascending=False)
>>> x
   foo
1   11
2   22
0   33 
```

或未对齐的，通过设置`x["foo"]`为列表：

```
>>> x["foo"] = y["bar"].order(ascending=False).tolist()
>>> x
   foo
1   33
2   22
0   11 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-15T14:23:17.127

我尝试了代码，但似乎该`order()`方法已被弃用，这并不奇怪，因为最初的问题已经很老了。所以现在我们`sort_values()`要达到同样的结果。最重要的是，还有一个改进在于使用，`to_numpy()`因为它稍微快一些，并且在大数据帧的情况下可能有用（`.values`甚至更快，但建议在`to_numpy()`生产时使用，如下所述：[https ://stackoverflow.com /a/54324513/4909087](https://stackoverflow.com/a/54324513/4909087) )

```
>>> x["foo"] = y["bar"].sort_values(ascending=False)
>>> x
   foo
1   33
2   22
0   11

>>> %timeit x["foo"] = y["bar"].sort_values(ascending=False).to_list()
165 µs ± 965 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
>>> %timeit x["foo"] = y["bar"].sort_values(ascending=False).to_numpy()
136 µs ± 421 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
>>> %timeit x["foo"] = y["bar"].sort_values(ascending=False).values
129 µs ± 826 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each) 
```

# java - 如何从 EclipseLink 获取连接池

> ID：15979340
> 
> 赞同：1
> 
> 时间：2013-04-12T19:24:52.977
> 
> 标签：java, jpa, persistence, eclipselink, connection-pooling

你好，我有一个 JPA (EclipseLink) 应用程序已经在工作，另一个应用程序使用纯 JDBC 部署到同一台服务器上并指向相同的数据库和模式，所以希望 JDBC 应用程序能够从 EcipeLink 获取连接池以便集中池连接..如果有人知道或知道如何做到这一点，请告诉我。提前致谢。-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:59:50.877

有关在 JPA 1.0 或 JPA 2.0 中进行设置的示例，请参见 [http://wiki.eclipse.org/EclipseLink/Examples/JPA/EMAPI#Getting_a_JDBC_Connection_from_an_EntityManager 。](http://wiki.eclipse.org/EclipseLink/Examples/JPA/EMAPI#Getting_a_JDBC_Connection_from_an_EntityManager)

# javascript - 无法让 .preventDefault() 工作

> ID：15979343
> 
> 赞同：2
> 
> 时间：2013-04-12T19:25:05.970
> 
> 标签：javascript

```
 <script type="text/javascript">
        $(".recaptchaButton").click(function(event) {
            var recaptchaHidden = true;
            if (recaptchaHidden == true) {
                event.preventDefault();
                $(".recaptcha").css("display","block");
                recaptchaHidden = false;
            }
        });
    </script> 
```

我不知道为什么 event.preventDefault(); 在上面的脚本中不起作用。如果您需要更广阔的视野，请访问网站 buybluesky.com。代码对我来说看起来非常好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:27:14.400

您可能还想停止传播，具体取决于行为是什么。您可能不会触发默认浏览器行为，而是实际上将事件通过 DOM 传递给另一个处理程序。我总是`return false`从我想立即停止的事件中停下来。

这相当于`e.stopPropagation()`AND`e.preventDefault()`

澄清一下：从 javascript 中的事件处理程序中，如果回调返回 false，则冒泡停止并阻止默认行为（表单提交或锚点 href 之后）。

# vba - 根据col C中的时间值在excel中添加倒计时秒表

> ID：15979345
> 
> 赞同：0
> 
> 时间：2013-04-12T19:25:27.710
> 
> 标签：vba, excel

我不知道从哪里开始。我需要在 C 列中有时间，当我单击运行宏按钮时，我需要一个秒表才能从 C 列的时间开始并向下运行。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:29:07.100

下面是一个示例程序。

```
Sub stopWatch()

Dim startTime As Date
Dim entTime As Date
Dim mins As Long

startTime = Time

'you code here

entTime = Time

mins = DateDiff("n", startTime, entTime)
MsgBox "Difference in minutes" & mins

End Sub 
```

# linux - 区分 2 个大目录的文件存在差异

> ID：15979347
> 
> 赞同：2
> 
> 时间：2013-04-12T19:25:33.580
> 
> 标签：linux, unix, diff

我正在尝试递归地区分 2 个目录，其中包含很多层次结构/文件。解析结果是压倒性的。

我想要的是一份简单的摘要报告，它显示一个目录中的内容，而不是另一个目录中的内容。我可以编写一个简单的 perl 脚本来完成它，但想知道我是否缺少一些明显的解决方案。

**编辑：**我找到了这个线程：[给定两个目录树，我怎样才能找出哪些文件不同？](https://stackoverflow.com/questions/4997693/given-two-directory-trees-how-can-i-find-out-which-files-differ)像这样的东西似乎有效：

```
diff --brief -r dir1/ dir2/ |grep -v differ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:47:26.940

你不使用`diff`？

```
diff <(find dirA | sort) <(find dirB | sort) >bigdiff 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T03:10:07.170

试试这个 scriptlet（修改后的三元组的答案）

```
diff <(find prod/ | sort | cut -d"/" -f2- ) <(find test/ | sort| cut -d"/" -f2-) 
```

在我的情况下，剪切会删除目录名称“prod”和“test”提示：添加 -y 以查看并排视图

# c# - 将opencv中的高斯噪声转换为emgu cv

> ID：15979356
> 
> 赞同：0
> 
> 时间：2013-04-12T19:26:06.577
> 
> 标签：c#, opencv, noise, emgucv

我正在研究图像处理，我需要使用 emgu cv 在 c# 中制作高斯噪声。我找到代码

> Mat gaussian_noise = img.clone();
> 
> randn(gaussian_noise,128,30);

在开放式简历中制造高斯噪声。emgu cv中的翻译代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:23:14.900

经过一番搜索，我发现[在 Emgu 上与 randn 等效的](http://www.emgu.com/wiki/files/2.4.2/document/html/af09d20f-6e72-ed1a-bcfc-3cee082865a8.htm)是 Matrix 上的 SetRandNormal(MCvScalar, MCvScalar) 方法。因此，要制作与您的代码类似的内容，您必须执行以下操作：

```
//Create your image as Image<Bgr,byte> here, for example.
Matrix<byte> matrix = new Matrix<byte>(img.Width, img.Height);
CvInvoke.cvConvert(img, matrix);
matrix.SetRandNormal(new MCvScalar(128), new MCvScalar(30));
//And Here you can convert back to image and do whatever you want. 
```

这应该可以，但是我没有在这台机器上安装 Emgu，所以我现在无法测试它。

祝你好运！

# facebook - 如何使用 FQL 获取 sharedposts 字段？

> ID：15979357
> 
> 赞同：2
> 
> 时间：2013-04-12T19:26:09.827
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk, facebook-fql

我正在使用一个收集用户列表的应用程序，这些用户在 Facebook 粉丝页面中喜​​欢或评论过帖子。我想修改这个应用程序以收集分享了他们在粉丝页面上看到的帖子的用户列表。从我在其他地方读到的内容来看，这应该是不可能做到的，或者只能通过不使用 Facebook API 的困难变通方法来实现。

我没有发现任何提及“sharedposts”字段的内容，这是我在玩 Graph API Explorer 时发现的。我什至没有在 Facebook 自己的 Graph API 文档中看到这一点。但它存在并且似乎提供了有关状态份额的数据（它不适用于帖子）。例如，这个指向 Graph API Explorer 的链接应该会在 Walmart 粉丝页面上显示特定状态更新的 Shares 列表： [https ://developers.facebook.com/tools/explorer/?method=GET&path=10151617223914236%3Ffields %3Dsharedposts](https://developers.facebook.com/tools/explorer/?method=GET&path=10151617223914236%3Ffields%3Dsharedposts)

我对使用此字段的其他人的问题：我可以通过 FQL 获取此字段吗？我尝试了一些查询，但无法提出一个有效的查询。我没有看到它为 FQL 记录，但又没有为 Graph API 记录它，它仍然存在。

我想使用 FQL，因为我正在使用 Facebook SDK for .Net ( [http://facebooksdk.net/](http://facebooksdk.net/) )，它有一个名为“ExecuteFQL”的方法，我用它来向 Facebook 发送 FQL 查询。

或者，如果 FQL 无法返回该字段，是否有一种方法可以使用 Facebook SDK for .Net 以不同的方式查询 Graph API？

谢谢，汤姆

# log4net - 如何使用 GUID 属性提供程序使用 log4net 记录到可为空的 GUID 表列

> ID：15979358
> 
> 赞同：1
> 
> 时间：2013-04-12T19:26:11.843
> 
> 标签：log4net, log4net-configuration

我在我的 Web 应用程序中尝试使用来自 log4net 的存储过程来更新 SQL Server 表中有一个可为空的 GUID 列。
我正在使用[此博客文章](http://piers7.blogspot.com/2005/12/log4net-context-problems-with-aspnet.html "这篇博客文章")中描述的属性提供程序方法作为在 log4net LogicalThreadContext 中设置属性的最佳实践，`Application_BeginRequest`以利用在运行时 log4net 将调用对象的`ToString`方法来获取值而不会被 ASP 破坏的事实.NET 线程切换：

```
protected void Application_BeginRequest() {
    log4net.LogicalThreadContext.Properties["userid"] = new UserIdProvider(); 
```

这是 UserIdProvider：

```
public class UserIdProvider {
    public Guid IConvertible() { //attempt at resolving error on IConvertible
        if (HttpContext.Current.Request.IsAuthenticated) {
            MembershipUser myObject = Membership.GetUser();
            Guid currentUserID = (Guid)myObject.ProviderUserKey;
            return currentUserID;
        }
        else {
            return Guid.Empty;
        }
    }

    public override string ToString() {
        if (HttpContext.Current.Request.IsAuthenticated) {
            MembershipUser myObject = Membership.GetUser();
            Guid currentUserID = (Guid)myObject.ProviderUserKey;
            return currentUserID.ToString();
        }
        else {
            return null;
        }
    }
} 
```

log4net 布局属性是：

```
<parameter>
  <parameterName value="@UserID" />
  <dbType value="Guid" />
  <layout type="log4net.Layout.RawPropertyLayout">
    <key value="userid" />
  </layout>
</parameter> 
```

使用用户 ID 提供程序 log4net 会引发异常：

```
log4net:ERROR [AdoNetAppender] Exception while writing to database
    System.InvalidCastException: Failed to convert parameter value from a 
    UserIdProvider to a Guid. ---> System.InvalidCastException: Object must 
    implement IConvertible. 
```

看到这个后，我向提供者添加了公共 Guid IConvertible() 位，但这有点在黑暗中刺伤。

我还尝试查看是否可以尝试使用 log4net 进行一些技巧并告诉它 dbType 是字符串以查看它是否会使用 ToString() 覆盖并将参数传递给存储过程，但它导致了这个异常：

```
log4net:ERROR [AdoNetAppender] Exception while writing to database
    System.InvalidCastException: Failed to convert parameter value from a
    UserIdProvider to a String. ---> System.InvalidCastException: Object 
    must implement IConvertible. 
```

我相信我需要使用 RawPropertyLayout 来让 log4net 传递空值。我从其他可以为空的 int 或可以为空的日期时间的属性中知道这一点。

我编写 IConvertible 方法的方式有什么问题，还是我需要将 UserIdProvider 放在一起以返回 GUID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:51:32.283

> 对象必须实现 IConvertible。

您实际上并没有**实现**IConvertible

您的类需要定义为

```
public class UserIdProvider  : IConvertible
{ 
```

...

```
} 
```

当你这样做时，你可能会发现你需要添加更多的方法。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/tyz9cd4z.aspx](http://msdn.microsoft.com/en-us/library/tyz9cd4z.aspx)

# javascript - 如何在引导下拉列表中获取选定元素，其中下拉列表是动态填充的

> ID：15979359
> 
> 赞同：9
> 
> 时间：2013-04-12T19:26:13.867
> 
> 标签：javascript, jquery, html, ajax, twitter-bootstrap

这类似于 [How to Display Selected Item in Bootstrap Button Dropdown Title](https://stackoverflow.com/questions/13437446/how-to-display-selected-item-in-bootstrap-button-dropdown-title)

唯一不同的是，我的下拉列表不是静态的，而是通过 ajax 响应填充的。下面的代码**不仅适用于** `<li>`动态填充的项目。

`<li>`为了进行上面的测试，当我单击该项目时，我故意放了一个静态，我可以在控制台中看到成功消息。但是，当我单击`<li>`动态附加的内容时，我在控制台中什么也得不到。

我相信，我在这里缺少一些 jQuery 基础知识。jQuery 大师，评论/想法？

这是一些用于进一步说明的代码。

Java脚本代码：

在控制台中打印选定的选项

```
$(".dropdown-menu li a").click(function () {
        console.log("Selected Option:"+$(this).text());
}); 
```

从 ajax JSON 响应填充下拉列表

```
$.each(response, function (key, value) {
    $("#dropDownUL").append("<li> <a tabindex=\"-1\" href=\"#\" align=\"left\"> " + value + "</a> </li>");
}) 
```

HTML 代码：

```
<div class="dropdown btn">
    <div id="dropDownId" class="dropdown-toggle" id="dLabel" role="button" data-toggle="dropdown" data-target="#">
        Collections
        <b class="caret"></b>
    </div>           
    <ul id="dropDownUL"  class="dropdown-menu pull-left" role="menu" aria-labelledby="dLabel">
    <li><a tabindex="-1" href="#" align="left">Static test Option</a></li>
    </ul>

</div> 
```

所以，再一次，如果我点击`Static test Option`我可以在控制台中看到消息：`Selected Option: Static test Option`

但是，当我单击`Option2` `Option 3`从 ajax 响应中填充的内容时，我在控制台中看不到任何内容。

如果有不清楚的地方，请告诉我。我将尝试进一步解释。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-12T19:34:10.283

```
$(document).on('click', '.dropdown-menu li a', function () {
    console.log("Selected Option:"+$(this).text());
}); 
```

这只是简单的事件委托...页面加载时不存在的元素必须将事件委托给页面加载时**确实**存在的静态父元素。

我们利用 jQuery 的 .on() 来完成这项工作。

```
 $(staticElement).on(event, dynamicElement, function(){ //etc }); 
```

**强制编辑**

请不要实际将元素绑定到`$(document)`，而是选择最接近的静态父元素。这是出于性能原因。

# javascript - 从隐藏值创建 Java 脚本数组

> ID：15979368
> 
> 赞同：1
> 
> 时间：2013-04-12T19:27:03.027
> 
> 标签：javascript, jquery, arrays

```
var a1=$("#orderprogress").val().toFixed(2);//a1=50
var a2=$("#poprogress").val().toFixed(2); //a2=70 
```

如果我想创建一个这样的数组，我会怎么做？

```
graphData = new Array(
             [a1 value,'#222222'],//[50,'#222222']
             [a2 value ,'#7D252B']//[70,'#222222']
        ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:29:13.167

尝试使用以下代码：

```
var a1 = +(+$("#orderprogress").val()).toFixed(2);
var a2 = +(+$("#poprogress").val()).toFixed(2);

graphData = [
    [a1, '#222222'],//[50,'#222222']
    [a2, '#7D252B']//[70,'#222222']
]; 
```

**演示：http:** [//jsfiddle.net/ERccS/4/](http://jsfiddle.net/ERccS/4/)

这将获取文本框值（字符串），将其转换为数字，调用`toFixed(2)`它，然后将其转换回数字。

不幸的是（如果你关心的话），`"50"`将显示为`50`（这发生在尾随`0`s 中）。如果无论如何你总是需要 2 位小数，请去掉`+`我代码中的第一个 - 它们将被保存为字符串并且总是有 2 位小数。

我不完全确定你想用`toFixed`. 该`.val()`方法**总是**返回一个字符串。`toFixed`不是一种`String`方法——它是一种`Number`方法。它的结果是原来的`Number`四舍五入到一定数量的小数位（你传递给方法的）。在你的情况下，它是`2`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:32:28.867

任何一个

```
var graphData = new Array(new Array(a1,'#222222'),new Array(a2 ,'#7D252B')); 
```

或者

```
var graphData = [[a1,'#222222'],[a2,'#7D252B']]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T19:30:43.220

```
graphData = [[a1, '#222222'], [a2, '#7D252B']]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T19:31:35.287

试试[这个](http://jsfiddle.net/hcx4J/6/)，

```
var xArray=[];

var a1=$("#orderprogress").val().toFixed(2);//a1=50
var a2=$("#poprogress").val().toFixed(2); //a2=70

InsertIntoArray(a1,'#fff')
InsertIntoArray(a2,'#fff')

function InsertIntoArray(x,y)
{
var yArray=[x,y];

xArray.push(yArray);

} 
```

或者简单地说，

```
 var xArray=[];

    var a1=$("#orderprogress").val().toFixed(2);//a1=50
    var a2=$("#poprogress").val().toFixed(2); //a2=70

    xArray.push([a1,"#fff"],[a2,"#fff"]); 
```

# asp.net-mvc-3 - 在客户端修改 ModelState

> ID：15979370
> 
> 赞同：0
> 
> 时间：2013-04-12T19:27:06.413
> 
> 标签：asp.net-mvc-3, validation, jquery-validate

所以这就是问题所在：我有一个表单和一个属性，`[RequiredAttribute]`初始时它被隐藏在表单上。有一个复选框。当它被点击时，它会显示元素。所以我只想在它没有隐藏时验证属性，但是当它发送模型到控制器时提交时我仍然看到 `ModelState.IsValid == false`（虽然元素它是隐藏的）所以当元素隐藏时如何删除与属性相关的所有错误（在javascript中，在浏览器将模型发送到控制器之前）？

修改`$('form').validate().errorList`无济于事

当然，我可以有一个布尔标志（`isHidden`或其他东西）并根据该标志在控制器上手动检查模型。但也许有更简单的方法来修改客户端上的验证属性，也许它们会以某种方式影响模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:45:01.903

尝试

```
<script type="text/javascript">
    $.validator.setDefaults({
        ignore: ""
    })
</script> 
```

或者您可以考虑制作自定义验证器。

[这个答案](https://stackoverflow.com/a/5744530/413670)可能会有所帮助

# maven-3 - 在 Maven 中怎么说“带入 B 而不是 A”？

> ID：15979381
> 
> 赞同：0
> 
> 时间：2013-04-12T19:27:41.553
> 
> 标签：maven-3, dependency-management, transitive-dependency

我有一个项目有 N 个依赖项，这些依赖项都依赖于某个库 A（比如 commons-logging），我想使用其他一些库 B（比如 jcl-over-slf4j，它被称为 commons-logging 的替代品) 作为该库的替代品，因此在任何情况下都始终使用 B，而 A 根本不会包含在项目中。

我知道处理这种情况的唯一方法是将 B 添加为显式依赖项，然后为 N 个库中的每一个添加一个排除项，表示不要引入 A。这似乎与声明性的精神背道而驰，更不用说它是疯狂的了如果 A 是常用的东西（如 commons-logging），则重复。有没有办法说，“只要有任何东西需要 A 作为传递依赖，就给它 B”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:13:00.433

SLF4J FAQ 中讨论了[用 jcl-over-slf4j 替换 commons-logging](http://slf4j.org/faq.html#excludingJCL)的问题。我个人认为替代方案 3)，即空工件，非常吸引人。

# c# - 当 AutoPostBack = true 时防止在 AJAX TabContainer 上重新加载页面？

> ID：15979386
> 
> 赞同：3
> 
> 时间：2013-04-12T19:27:50.070
> 
> 标签：c#, asp.net, .net, tabcontainer

这可能吗？我有一个 AJAX TabContainer，容器中有 3 个选项卡。在选项卡 #2 上，我有一个复选框，选中后会启用一个文本框。未选中复选框时，应禁用文本框。

我的 ASP 表单中有此代码：

```
 <AJAXControls:TabContainer runat="server" ID="tabContainer" Height="373" Width="900" > 
        <AJAXControls:TabPanel ID="firstTab" HeaderText="First Tab" runat="server"> 
            <ContentTemplate> 
                <asp:Label ID="Label1" runat="server">You are in the First tab.</asp:Label> 
            </ContentTemplate> 
        </AJAXControls:TabPanel> 
        <AJAXControls:TabPanel ID="secondTab" HeaderText="Second Tab" runat="server"> 
            <ContentTemplate> 
                <div>
                <asp:Panel ID="Panel1" runat="server" Height="70px" style="margin-left: 19px" 
                    Width="860px" BorderStyle="Groove" BorderWidth="2px">
                        <table>
                            <tr>
                                <td width="170">Review Validated:</td>
                                <td width="50"><asp:CheckBox ID="chkRevVal" runat="server" Text=" " oncheckedchanged="chkRevVal_CheckedChanged" AutoPostBack="true" /></td>
                                <td width="40"></td>
                                <td width="170">Validation Comments:</td>
                                <td width="380" rowspan = "4"><asp:textbox id="txtValComm" runat="server" textmode="multiline" rows="4" Width="380px"></asp:textbox></td>
                            </tr>
                            <tr></tr>
                            <tr></tr>
                            <tr></tr>
                        </table>
                </asp:Panel>             
            </ContentTemplate> 
        </AJAXControls:TabPanel> 
    </AJAXControls:TabContainer> 
```

我在我的代码隐藏中有这个：

```
 protected void chkRevVal_CheckedChanged(object sender, EventArgs e)
    {
        if (chkRevVal.Checked == true)
        {

            this.txtValComm.Enabled = true;
            this.txtValComm.Focus();

        }
    } 
```

问题是，当我选中该框时，TabContainer 每次都会返回到选项卡 #1。选中复选框后，有没有办法将其保留在选项卡 #2 上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:23:53.583

只需将`Panel1`控件放入 UpdatePanel 中`UpdateMode="Conditional"`。顺便说一句，重写`chkRevVal_CheckedChanged`为：

```
this.txtValComm.Enabled = chkRevVal.Checked;
if (txtValComm.Enabled) 
    txtValComm.Focus(); 
```

# c# - 一个月中没有周末的天数到 xml 文件

> ID：15979388
> 
> 赞同：0
> 
> 时间：2013-04-12T19:27:54.557
> 
> 标签：c#, xml, datetime

我已经找到了一种方法来为每月的每一天创建文件。

像这样：

```
public static IEnumerable<DateTime> AllDatesInMonth(int year, int month)
{
    int days = DateTime.DaysInMonth(year, month);

    for (int day = 1; day <= days; day++)
    {
        yield return new DateTime(year, month, day);
    }
} 
```

并这样称呼它：

```
foreach (DateTime day in AllDatesInMonth(DateTime.Now.Year, DateTime.Now.Month))
{
   //Blablabla
} 
```

这些文件被命名为 1.xml,2.xml,...

现在我想知道的是做同样的事情，但周末（周六和周日）没有文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:31:45.430

代替：

```
yield return new DateTime(year, month, day); 
```

和：

```
DateTime dt = new DateTime(year, month, day);
if(dt.DayOfWeek != DayOfWeek.Saturday && dt.DayOfWeek != DayOfWeek.Sunday)
    yield return dt; 
```

当然，该方法必须重命名为`AllWeekDaysInMonth`，因为这改变了它的意图。我实际上更喜欢另一个答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:32:55.120

将 linq 添加到方法的结果中

```
foreach (DateTime weekDay in AllDatesInMonth(...).Where(d=>d.DayOfWeek!= DayOfWeek.Saturday && d.DayOfWeek!=DayOfWEek.Sunday)){

...
} 
```

这样，如果您需要对包含的日期（假期？）施加更多条件，那么您可以添加另一个 .Where

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:36:55.827

您可以使用相同的代码，只需将星期几的检查添加到 where 循环：

```
public static IEnumerable<DateTime> AllDatesInMonth(int year, int month)
        {
        int days = DateTime.DaysInMonth(year, month);

        for (int day = 1; day <= days; day++)
        {
            var dateToTest = new DateTime(year, month, day);
            if (dateToTest.DayOfWeek == DayOfWeek.Saturday || dateToTest.DayOfWeek == DayOfWeek.Sunday) continue;
            yield return dateToTest;
        }
    } 
```

# google-app-engine - Google App Engine 上的 JPA：调用persist(...) 时，是否总是在事务中发生？

> ID：15979389
> 
> 赞同：4
> 
> 时间：2013-04-12T19:27:55.850
> 
> 标签：google-app-engine, jpa, guice, datanucleus, guice-persist

在我的应用程序中，我坚持一个具有许多无主子级的实体。

似乎`persist`对持久化实体和所有子级的调用发生在事务内部，因为当我不启用跨组事务时出现错误（并且子级作为父实体生活在不同的实体组中）。

是否有可能以非交易方式进行持久化？

（如果需要此信息：我正在使用 Guice 将请求范围内的请求注入`Provider<EntityManager>`到我的服务对象中。）

添加：

这是一个简单的测试用例：

```
@Entity public class Department {

    @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; 

    @OneToMany(mappedBy = "department", cascade = CascadeType.ALL)
    @Unowned
    Collection<Employee> employees = new ArrayList<Employee>();

    public Collection<Employee> getEmployees() {
        return employees;
    }

}

@Entity public class Employee {

    @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id;        @ManyToOne  private Department department;      private String name;

    public Employee(String name) {      this.name = name;   }       public String getName() {       return name;    }

    public void setName(String name) {      this.name = name;   }    } 
```

现在，当我这样做时：

```
EntityManager em = EMF.get().createEntityManager();
try {
    Department department = new Department();
    department.getEmployees().add(new Employee("Joe"));
    em.persist(department);
} finally {
    em.close();
} 
```

我得到：

> ```
> Illegal argument 
> ```
> 
> 造成的：
> 
> javax.persistence.PersistenceException：在 org.datanucleus.api.jpa.JPAEntityManager.close(JPAEntityManager.java:197) 在 org.datanucleus.api.jpa.jpa.NucleusJPAHelper.getJPAExceptionForNucleusException(NucleusJPAHelper.java:298) 的非法参数。 .jpa.JpaServlet.doGet(JpaServlet.java:23) at javax.servlet.http.HttpServlet.service(HttpServlet.java:617) at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) at org. mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166) 在 com.google.appengine.api.socket.dev。 DevSocketFilter.doFilter(DevSocketFilter.java:74) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development。ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java: 34) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61) 在 org.mortbay .jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain .doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.StaticFileFilter。doFilter(StaticFileFilter.java:125) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388) 在 org.mortbay.jetty.security.SecurityHandler .handle(SecurityHandler.java:216) 在 org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182) 在 org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765) 在 org. mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418) 在 com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94) 在 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 在 com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409) 在 org.mortbay.jetty .handler.HandlerWrapper.handle(HandlerWrapper.java:152) 在 org.mortbay.jetty.Server.handle(Server.java:326) 在 org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542) 在 org. mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923) at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547) at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409) 在 org.mortbay.thread。QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 原因：java.lang.IllegalArgumentException：需要明确指定跨组事务，请参阅 TransactionOptions.Builder.withXG 找到 Element { type: "Department" id: 17 } 和元素{类型：“员工”ID：18}
> 
> 在 com.google.appengine.api.datastore.DatastoreApiHelper$1.convertException(DatastoreApiHelper.java:70) 在 com.google.appengine 的 com.google.appengine.api.datastore.DatastoreApiHelper.translateError(DatastoreApiHelper.java:33)。 com.google.appengine.api.datastore.FutureHelper$CumulativeAggregateFuture.get(FutureHelper.java:142) com.google.appengine.api.datastore.FutureHelper$ 上的 api.utils.FutureWrapper.get(FutureWrapper.java:94) TxnAwareFuture.get(FutureHelper.java:218) 在 com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:86) 在 com.google.appengine.api.datastore.FutureHelper.getInternal(FutureHelper.java: 71) 在 com.google.appengine.api.datastore.FutureHelper.quietGet(FutureHelper.java:32) 在 com.google.appengine.api.datastore.DatastoreServiceImpl.put(DatastoreServiceImpl.java:85) 在 com.google.appengine.datanucleus.WrappedDatastoreService.put(WrappedDatastoreService.java:112) 在 com.google.appengine.datanucleus.EntityUtils.putEntitiesIntoDatastore(EntityUtils.java:766) 在 com.google.appengine.datanucleus.DatastorePersistenceHandler .insertObjectsInternal(DatastorePersistenceHandler.java:314) 在 com.google.appengine.datanucleus.DatastorePersistenceHandler.insertObject(DatastorePersistenceHandler.java:218) 在 org.datanucleus.state.JDOStateManager.internalMakePersistent(JDOStateManager.java:2381) 在 org.datanucleus。 state.JDOStateManager.flush(JDOStateManager.java:3778) 在 org.datanucleus.store.types.sco.SCOUtils.validateObjectForWriting(SCOUtils.java:1518) 在 com.google.appengine.datanucleus.scostore.AbstractFKStore.validateElementForWriting(AbstractFKStore.爪哇：396) 在 com.google.appengine.datanucleus.scostore.FKListStore.internalAdd(FKListStore.java:195) 在 com.google.appengine 的 com.google.appengine.datanucleus.scostore.FKListStore.validateElementForWriting(FKListStore.java:1036) .datanucleus.scostore.FKListStore.addAll(FKListStore.java:114) 在 org.datanucleus.store.mapped.mapping.CollectionMapping.postInsert(CollectionMapping.java:134) 在 com.google.appengine.datanucleus.StoreFieldManager.storeRelations(StoreFieldManager .java:809) 在 com.google.appengine.datanucleus.DatastorePersistenceHandler.insertObjectsInternal(DatastorePersistenceHandler.java:367) 在 com.google.appengine.datanucleus.DatastorePersistenceHandler.insertObject(DatastorePersistenceHandler.java:218) 在 org.datanucleus.state。 JDOStateManager.internalMakePersistent(JDOStateManager.java:2381) 在 org.datanucleus.state.JDOStateManager.flush(JDOStateManager.java:3778) 在 org.datanucleus.ObjectManagerImpl.flushInternalWithOrdering(ObjectManagerImpl.java:3888) 在 org.datanucleus.ObjectManagerImpl.flushInternal(ObjectManagerImpl.java:3811) 在org.datanucleus.ObjectManagerImpl.flush(ObjectManagerImpl.java:3751) at org.datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:4141) at org.datanucleus.ObjectManagerImpl.transactionPreCommit(ObjectManagerImpl.java:428) at org.datanucleus.TransactionImpl .internalPreCommit(TransactionImpl.java:398) 在 org.datanucleus.TransactionImpl.commit(TransactionImpl.java:287) 在 org.datanucleus.ObjectManagerImpl.close(ObjectManagerImpl.java:1090) 在 org.datanucleus.api.jpa.JPAEntityManager。关闭（JPAEntityManager.java:193）... 36 更多还有 36 个还有 36 个还有 36 个还有 36 个datanucleus.state.JDOStateManager.flush(JDOStateManager.java:3778) at org.datanucleus.ObjectManagerImpl.flushInternalWithOrdering(ObjectManagerImpl.java:3888) at org.datanucleus.ObjectManagerImpl.flushInternal(ObjectManagerImpl.java:3811) at org.datanucleus.ObjectManagerImpl .flush(ObjectManagerImpl.java:3751) 在 org.datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:4141) 在 org.datanucleus.ObjectManagerImpl.transactionPreCommit(ObjectManagerImpl.java:428) 在 org.datanucleus.TransactionImpl.internalPreCommit(TransactionImpl. java:398) 在 org.datanucleus.TransactionImpl.commit(TransactionImpl.java:287) 在 org.datanucleus.ObjectManagerImpl.close(ObjectManagerImpl.java:1090) 在 org.datanucleus.api.jpa.JPAEntityManager.close(JPAEntityManager.java :193) ... 36 更多datanucleus.state.JDOStateManager.flush(JDOStateManager.java:3778) at org.datanucleus.ObjectManagerImpl.flushInternalWithOrdering(ObjectManagerImpl.java:3888) at org.datanucleus.ObjectManagerImpl.flushInternal(ObjectManagerImpl.java:3811) at org.datanucleus.ObjectManagerImpl .flush(ObjectManagerImpl.java:3751) 在 org.datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:4141) 在 org.datanucleus.ObjectManagerImpl.transactionPreCommit(ObjectManagerImpl.java:428) 在 org.datanucleus.TransactionImpl.internalPreCommit(TransactionImpl. java:398) 在 org.datanucleus.TransactionImpl.commit(TransactionImpl.java:287) 在 org.datanucleus.ObjectManagerImpl.close(ObjectManagerImpl.java:1090) 在 org.datanucleus.api.jpa.JPAEntityManager.close(JPAEntityManager.java :193) ... 36 更多JDOStateManager.flush(JDOStateManager.java:3778) at org.datanucleus.ObjectManagerImpl.flushInternalWithOrdering(ObjectManagerImpl.java:3888) at org.datanucleus.ObjectManagerImpl.flushInternal(ObjectManagerImpl.java:3811) at org.datanucleus.ObjectManagerImpl.flush(ObjectManagerImpl .java:3751) 在 org.datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:4141) 在 org.datanucleus.ObjectManagerImpl.transactionPreCommit(ObjectManagerImpl.java:428) 在 org.datanucleus.TransactionImpl.internalPreCommit(TransactionImpl.java:398)在 org.datanucleus.TransactionImpl.commit(TransactionImpl.java:287) 在 org.datanucleus.ObjectManagerImpl.close(ObjectManagerImpl.java:1090) 在 org.datanucleus.api.jpa.JPAEntityManager.close(JPAEntityManager.java:193) 。 .. 还有 36 个JDOStateManager.flush(JDOStateManager.java:3778) at org.datanucleus.ObjectManagerImpl.flushInternalWithOrdering(ObjectManagerImpl.java:3888) at org.datanucleus.ObjectManagerImpl.flushInternal(ObjectManagerImpl.java:3811) at org.datanucleus.ObjectManagerImpl.flush(ObjectManagerImpl .java:3751) 在 org.datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:4141) 在 org.datanucleus.ObjectManagerImpl.transactionPreCommit(ObjectManagerImpl.java:428) 在 org.datanucleus.TransactionImpl.internalPreCommit(TransactionImpl.java:398)在 org.datanucleus.TransactionImpl.commit(TransactionImpl.java:287) 在 org.datanucleus.ObjectManagerImpl.close(ObjectManagerImpl.java:1090) 在 org.datanucleus.api.jpa.JPAEntityManager.close(JPAEntityManager.java:193) 。 .. 还有 36 个3778) 在 org.datanucleus.ObjectManagerImpl.flushInternalWithOrdering(ObjectManagerImpl.java:3888) 在 org.datanucleus.ObjectManagerImpl.flushInternal(ObjectManagerImpl.java:3811) 在 org.datanucleus.ObjectManagerImpl.flush(ObjectManagerImpl.java:3751) 在 org. datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:4141) at org.datanucleus.ObjectManagerImpl.transactionPreCommit(ObjectManagerImpl.java:428) at org.datanucleus.TransactionImpl.internalPreCommit(TransactionImpl.java:398) at org.datanucleus.TransactionImpl.commit (TransactionImpl.java:287) 在 org.datanucleus.ObjectManagerImpl.close(ObjectManagerImpl.java:1090) 在 org.datanucleus.api.jpa.JPAEntityManager.close(JPAEntityManager.java:193) ... 还有 36 个3778) 在 org.datanucleus.ObjectManagerImpl.flushInternalWithOrdering(ObjectManagerImpl.java:3888) 在 org.datanucleus.ObjectManagerImpl.flushInternal(ObjectManagerImpl.java:3811) 在 org.datanucleus.ObjectManagerImpl.flush(ObjectManagerImpl.java:3751) 在 org. datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:4141) at org.datanucleus.ObjectManagerImpl.transactionPreCommit(ObjectManagerImpl.java:428) at org.datanucleus.TransactionImpl.internalPreCommit(TransactionImpl.java:398) at org.datanucleus.TransactionImpl.commit (TransactionImpl.java:287) 在 org.datanucleus.ObjectManagerImpl.close(ObjectManagerImpl.java:1090) 在 org.datanucleus.api.jpa.JPAEntityManager.close(JPAEntityManager.java:193) ... 还有 36 个java:3888) 在 org.datanucleus.ObjectManagerImpl.flushInternal(ObjectManagerImpl.java:3811) 在 org.datanucleus.ObjectManagerImpl.flush(ObjectManagerImpl.java:3751) 在 org.datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:4141) 在org.datanucleus.ObjectManagerImpl.transactionPreCommit(ObjectManagerImpl.java:428) 在 org.datanucleus.TransactionImpl.internalPreCommit(TransactionImpl.java:398) 在 org.datanucleus.TransactionImpl.commit(TransactionImpl.java:287) 在 org.datanucleus.ObjectManagerImpl .close(ObjectManagerImpl.java:1090) 在 org.datanucleus.api.jpa.JPAEntityManager.close(JPAEntityManager.java:193) ... 36 更多java:3888) 在 org.datanucleus.ObjectManagerImpl.flushInternal(ObjectManagerImpl.java:3811) 在 org.datanucleus.ObjectManagerImpl.flush(ObjectManagerImpl.java:3751) 在 org.datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:4141) 在org.datanucleus.ObjectManagerImpl.transactionPreCommit(ObjectManagerImpl.java:428) 在 org.datanucleus.TransactionImpl.internalPreCommit(TransactionImpl.java:398) 在 org.datanucleus.TransactionImpl.commit(TransactionImpl.java:287) 在 org.datanucleus.ObjectManagerImpl .close(ObjectManagerImpl.java:1090) 在 org.datanucleus.api.jpa.JPAEntityManager.close(JPAEntityManager.java:193) ... 36 更多3751) 在 org.datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:4141) 在 org.datanucleus.ObjectManagerImpl.transactionPreCommit(ObjectManagerImpl.java:428) 在 org.datanucleus.TransactionImpl.internalPreCommit(TransactionImpl.java:398) 在 org. datanucleus.TransactionImpl.commit(TransactionImpl.java:287) at org.datanucleus.ObjectManagerImpl.close(ObjectManagerImpl.java:1090) at org.datanucleus.api.jpa.JPAEntityManager.close(JPAEntityManager.java:193) ... 36更多的3751) 在 org.datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:4141) 在 org.datanucleus.ObjectManagerImpl.transactionPreCommit(ObjectManagerImpl.java:428) 在 org.datanucleus.TransactionImpl.internalPreCommit(TransactionImpl.java:398) 在 org. datanucleus.TransactionImpl.commit(TransactionImpl.java:287) at org.datanucleus.ObjectManagerImpl.close(ObjectManagerImpl.java:1090) at org.datanucleus.api.jpa.JPAEntityManager.close(JPAEntityManager.java:193) ... 36更多的datanucleus.ObjectManagerImpl.close(ObjectManagerImpl.java:1090) 在 org.datanucleus.api.jpa.JPAEntityManager.close(JPAEntityManager.java:193) ... 36 更多datanucleus.ObjectManagerImpl.close(ObjectManagerImpl.java:1090) 在 org.datanucleus.api.jpa.JPAEntityManager.close(JPAEntityManager.java:193) ... 36 更多
> 
> 造成的：
> 
> java.lang.IllegalArgumentException：需要显式指定跨组事务，请参阅 TransactionOptions.Builder.withXG 发现 Element { type: "Department" id: 17 } 和 Element { type: "Employee" id: 18 }
> 
> 在 com.google.appengine.api.datastore.DatastoreApiHelper$1.convertException(DatastoreApiHelper.java:70) 在 com.google.appengine 的 com.google.appengine.api.datastore.DatastoreApiHelper.translateError(DatastoreApiHelper.java:33)。 com.google.appengine.api.datastore.FutureHelper$CumulativeAggregateFuture.get(FutureHelper.java:142) com.google.appengine.api.datastore.FutureHelper$ 上的 api.utils.FutureWrapper.get(FutureWrapper.java:94) TxnAwareFuture.get(FutureHelper.java:218) 在 com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:86) 在 com.google.appengine.api.datastore.FutureHelper.getInternal(FutureHelper.java: 71) 在 com.google.appengine.api.datastore.FutureHelper.quietGet(FutureHelper.java:32) 在 com.google.appengine.api.datastore.DatastoreServiceImpl.put(DatastoreServiceImpl.java:85) 在 com.google.appengine.datanucleus.WrappedDatastoreService.put(WrappedDatastoreService.java:112) 在 com.google.appengine.datanucleus.EntityUtils.putEntitiesIntoDatastore(EntityUtils.java:766) 在 com.google.appengine.datanucleus.DatastorePersistenceHandler .insertObjectsInternal(DatastorePersistenceHandler.java:314) 在 com.google.appengine.datanucleus.DatastorePersistenceHandler.insertObject(DatastorePersistenceHandler.java:218) 在 org.datanucleus.state.JDOStateManager.internalMakePersistent(JDOStateManager.java:2381) 在 org.datanucleus。 state.JDOStateManager.flush(JDOStateManager.java:3778) 在 org.datanucleus.store.types.sco.SCOUtils.validateObjectForWriting(SCOUtils.java:1518) 在 com.google.appengine.datanucleus.scostore.AbstractFKStore.validateElementForWriting(AbstractFKStore.爪哇：396) 在 com.google.appengine.datanucleus.scostore.FKListStore.internalAdd(FKListStore.java:195) 在 com.google.appengine 的 com.google.appengine.datanucleus.scostore.FKListStore.validateElementForWriting(FKListStore.java:1036) .datanucleus.scostore.FKListStore.addAll(FKListStore.java:114) 在 org.datanucleus.store.mapped.mapping.CollectionMapping.postInsert(CollectionMapping.java:134) 在 com.google.appengine.datanucleus.StoreFieldManager.storeRelations(StoreFieldManager .java:809) 在 com.google.appengine.datanucleus.DatastorePersistenceHandler.insertObjectsInternal(DatastorePersistenceHandler.java:367) 在 com.google.appengine.datanucleus.DatastorePersistenceHandler.insertObject(DatastorePersistenceHandler.java:218) 在 org.datanucleus.state。 JDOStateManager.internalMakePersistent(JDOStateManager.java:2381) 在 org.datanucleus.state.JDOStateManager.flush(JDOStateManager.java:3778) 在 org.datanucleus.ObjectManagerImpl.flushInternalWithOrdering(ObjectManagerImpl.java:3888) 在 org.datanucleus.ObjectManagerImpl.flushInternal(ObjectManagerImpl.java:3811) 在org.datanucleus.ObjectManagerImpl.flush(ObjectManagerImpl.java:3751) at org.datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:4141) at org.datanucleus.ObjectManagerImpl.transactionPreCommit(ObjectManagerImpl.java:428) at org.datanucleus.TransactionImpl .internalPreCommit(TransactionImpl.java:398) 在 org.datanucleus.TransactionImpl.commit(TransactionImpl.java:287) 在 org.datanucleus.ObjectManagerImpl.close(ObjectManagerImpl.java:1090) 在 org.datanucleus.api.jpa.JPAEntityManager。在 com.example 处关闭（JPAEntityManager.java:193）。jpa.JpaServlet.doGet(JpaServlet.java:23) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:617) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 在 org.mortbay .jetty.servlet.ServletHolder.handle(ServletHolder.java:511) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166) 在 com.google.appengine.api.socket.dev.DevSocketFilter .doFilter(DevSocketFilter.java:74) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123 ) 在 com.google.appengine.tools.development.HeaderVerificationFilter 的 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)。doFilter(HeaderVerificationFilter.java:34) at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java: 61) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43) 在 org.mortbay.jetty .servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter (ServletHandler.java:1157) 在 com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97）在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388) 在 org.mortbay.jetty.security .SecurityHandler.handle(SecurityHandler.java:216) 在 org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182) 在 org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765) 在org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418) 在 com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94) 在 org.mortbay.jetty.handler.HandlerWrapper。 org.mortbay 的 com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409) 的句柄（HandlerWrapper.java:152）。jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) at org.mortbay.jetty.Server.handle(Server.java:326) at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542) at org .mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923) 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547) 在 org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212 ) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409) 在 org.mortbay.thread.QueuedThreadPool$PoolThread.run( QueuedThreadPool.java:582)java:542) 在 org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923) 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547) 在 org.mortbay.jetty.HttpParser.parseAvailable (HttpParser.java:212) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409) 在 org.mortbay.thread。 QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)java:542) 在 org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923) 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547) 在 org.mortbay.jetty.HttpParser.parseAvailable (HttpParser.java:212) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409) 在 org.mortbay.thread。 QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)在 org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 运行（SelectChannelEndPoint.java:409）在 org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 运行（SelectChannelEndPoint.java:409）

这就是为什么我一直认为这`persist`会发生在交易中，尽管我还没有明确地开始交易。

以下是来自 DataNucleus 的相关调试消息：

> ObjectManagerImpl@e4eb585 08:38:18,027 调试 [DataNucleus.Persistence] - ObjectManager.internalFlush() 进程开始使用有序刷新 - 2 个脏对象 08:38:18,105 调试 [DataNucleus.Persistence] - 管理类的持久性：com.example。 jpa.Employee [表：com.example.jpa.Employee，InheritanceStrategy：new-table] 08:38:18,136 调试 [DataNucleus.Persistence] - 管理类的持久性：com.example.jpa.Department [表：com.example .jpa.Department, InheritanceStrategy : new-table] 08:38:18,316 DEBUG [DataNucleus.Persistence] - 字段“com.example.jpa.Department.employees”正在为“cascade-persist”保留。08:38:18,331 INFO [DataNucleus.Persistence] - 对象“com.example.jpa.Department@55b7bf86”有一个集合“com.example.jpa.Department.employees” 然而元素“com.example.jpa.Employee@95d0a50”没有所有者集。管理关系并设置所有者。08:38:18,333 WARN [DataNucleus.MetaData] - com.example.jpa.Employee.department 的元数据警告：com.example.jpa.Employee.department 的元数据错误：数据存储不支持连接和因此不能接受将相关对象放在默认提取组中的请求。该字段将在首次访问时延迟获取。您可以通过在配置中设置 datanucleus.appengine.ignorableMetaDataBehavior 属性来修改此警告。NONE 值将使警告静音。ERROR 值会将警告转换为异常。08:38:18,354 DEBUG [DataNucleus.Persistence] - ObjectManager.internalFlush() 进程完成 08:38:18,355 DEBUG [DataNucleus.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-06T18:47:33.400

刚遇到同样的问题，可以自信地说，当你打电话时事务已提交

```
EntityManager.close(); 
```

这是来自 DataNucleus JPA 实现的一些[证明](http://grepcode.com/file/repo1.maven.org/maven2/org.datanucleus/datanucleus-core/3.2.5/org/datanucleus/ExecutionContextImpl.java#383)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-22T14:38:32.590

有点晚了，但我认为这对其他人有用。在将 JPA 与 Google App Engine 一起使用时，我遇到了同样的问题。但是以下代码对我有用。希望能帮助到你-

```
try{
    EntityTransaction t = em.getTransaction();
    try{
        t.begin();
        //Do stuff
        em.persist(persistObject);
        t.commit();
    }finally {
        if (t.isActive())
            t.rollback();
    }
} finally {
    em.close();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-01T18:17:40.830

您需要指定您的交易是 jpa 的跨组交易。阅读以下文件，特别是 jpa/jdo 的跨组交易

[https://cloud.google.com/appengine/docs/java/datastore/transactions?csw=1](https://cloud.google.com/appengine/docs/java/datastore/transactions?csw=1)

对于我的情况，在persistance.xml 中添加以下行解决了这个问题。

```
<property name="datanucleus.appengine.datastoreEnableXGTransactions" value="true"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T15:10:07.430

显然从异常

```
java.lang.IllegalArgumentException: cross-group transaction need to be explicitly specified, see TransactionOptions.Builder.withXGfound both Element { type: "Department" id: 17 } and Element { type: "Employee" id: 18 }

at com.google.appengine.api.datastore.DatastoreApiHelper.translateError(DatastoreApiHelper.java:33) 
```

数据存储在（低级）事务中运行（也显示在日志中），并且它需要启用多实体组才能在那里执行您想要的操作。

# java - Ant、Ivy 和 JUnit 找不到类 - build.xml 中的错误？

> ID：15979391
> 
> 赞同：3
> 
> 时间：2013-04-12T19:27:58.770
> 
> 标签：java, ant, junit, ivy

我正在尝试使用 Ant、Ivy 和 JUnit 构建一个简单的（？）测试项目。基本思想是 Ivy 将下载 junit.jar，然后 Ant 将使用它。

请注意，*junit jar 在类路径上，*因为否则（没有`classpath`junit 任务中的元素）我看到“<junit> 的 <classpath> 必须包含 junit.jar 如果不在 Ant 自己的类路径中”。此外，下面给出的类 (junit.framework.TestListener) 在 junit-4.8.2.jar 中。

但是，当我尝试`ant test`以下操作时，我看到：

```
test:

BUILD FAILED
/home/andrew/project/guice/hg/build.xml:33: java.lang.NoClassDefFoundError: junit/framework/TestListener
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
...
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.lang.ClassNotFoundException: junit.framework.TestListener
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
... 
```

所以我猜我的 build.xml 有问题？什么？

这是build.xml：

```
<project xmlns:ivy="antlib:org.apache.ivy.ant" 
         name="java-example" default="dist" basedir=".">

  <description>
    simple example build file
  </description>

  <property name="src" location="src"/>
  <property name="build" location="build"/>
  <property name="dist" location="dist"/>
  <property name="lib" location="lib"/>

  <path id="lib.path">
    <fileset dir="${lib}"/>
  </path>

  <target name="init">
    <tstamp/>
    <mkdir dir="${build}"/>
  </target>

  <target name="compile" depends="init,resolve"
          description="compile the source">
    <javac srcdir="${src}" destdir="${build}" classpathref="lib.path"
           includeantruntime="false">
      <compilerarg value="-Xlint"/>
    </javac>
  </target>

  <target name="test" depends="compile"
          description="run the tests">
    <junit>
      <classpath refid="lib.path"/>
      <batchtest>
        <fileset dir="${build}">
          <include name="**/*Test.class"/>
        </fileset>
      </batchtest>
    </junit>
  </target>

  <target name="dist" depends="compile"
          description="generate the distribution">
    <mkdir dir="${dist}/lib"/>
    <jar jarfile="${dist}/lib/example-${DSTAMP}.jar" basedir="${build}"/>
  </target>

  <target name="clean"
          description="clean up">
    <delete dir="${build}"/>
    <delete dir="${dist}"/>
  </target>

  <target name="resolve"
          description="download required dependencies">
    <ivy:retrieve/>
  </target>

</project> 
```

以及编译后的现有目录结构：

```
.
├── build
│   └── com
│       └── isti
│           └── example
│               ├── AppendToList.class
│               ├── DumpToStdout.class
│               ├── LimitedCounter.class
│               ├── MessageSink.class
│               ├── MessageSource.class
│               └── SinkToSourceTest.class
├── build.xml
├── dist
│   └── lib
│       └── example-20130412.jar
├── ivy.xml
├── lib
│   ├── junit-4.8.2.jar
│   ├── junit-4.8.2-javadoc.jar
│   └── junit-4.8.2-sources.jar
├── README.md
└── src
    ├── main
    │   └── java
    │       └── com
    │           └── isti
    │               └── example
    │                   ├── AppendToList.java
    │                   ├── DumpToStdout.java
    │                   ├── LimitedCounter.java
    │                   ├── MessageSink.java
    │                   └── MessageSource.java
    └── test
        └── java
            └── com
                └── isti
                    └── example
                        └── SinkToSourceTest.java 
```

**更新**顺便说一句，`ant -lib lib test`（明确给出 lib 目录）有效。并且在随机网络搜索结果中对此处理有很多混乱的描述 - 但我的印象是上面的方法与[最新的文档](http://ant.apache.org/manual/Tasks/junit.html)一致（我使用的是 ant 1.9） - 见第 5 点。所以我想这可能成为一个[错误](https://github.com/junit-team/junit/issues/667)；[错误](https://issues.apache.org/bugzilla/show_bug.cgi?id=54835)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T22:56:30.647

# 例子

项目包含以下文件：

```
├── build.xml
├── ivy.xml
└── src
    ├── main
    │   ├── java
    │   │   └── org
    │   │       └── demo
    │   │           └── App.java
    │   └── resources
    │       └── log4j.properties
    └── test
        └── java
            └── org
                └── demo
                    └── AppTest.java 
```

构建运行如下：

```
$ ant 
Buildfile: /home/mark/Files/Dev/ivy/demo/build.xml

resolve:
[ivy:resolve] :: Apache Ivy 2.3.0 - 20130110142753 :: http://ant.apache.org/ivy/ ::
[ivy:resolve] :: loading settings :: url = jar:file:/home/mark/.ant/lib/ivy.jar!/org/apache/ivy/core/settings/ivysettings.xml
[ivy:resolve] :: resolving dependencies :: com.myspotontheweb#demo;working@mark-Lemur-Ultra
[ivy:resolve]   confs: [compile, runtime, test]
[ivy:resolve]   found org.slf4j#slf4j-api;1.7.5 in public
[ivy:resolve]   found org.slf4j#slf4j-log4j12;1.7.5 in public
[ivy:resolve]   found log4j#log4j;1.2.17 in public
[ivy:resolve]   found junit#junit;4.11 in public
[ivy:resolve]   found org.hamcrest#hamcrest-core;1.3 in public
[ivy:resolve] :: resolution report :: resolve 347ms :: artifacts dl 14ms
    ---------------------------------------------------------------------
    |                  |            modules            ||   artifacts   |
    |       conf       | number| search|dwnlded|evicted|| number|dwnlded|
    ---------------------------------------------------------------------
    |      compile     |   1   |   0   |   0   |   0   ||   1   |   0   |
    |      runtime     |   3   |   0   |   0   |   0   ||   3   |   0   |
    |       test       |   5   |   0   |   0   |   0   ||   5   |   0   |
    ---------------------------------------------------------------------
[ivy:report] Processing /home/mark/.ivy2/cache/com.myspotontheweb-demo-compile.xml to /home/mark/Files/Dev/ivy/demo/build/ivy-reports/com.myspotontheweb-demo-compile.html
[ivy:report] Processing /home/mark/.ivy2/cache/com.myspotontheweb-demo-runtime.xml to /home/mark/Files/Dev/ivy/demo/build/ivy-reports/com.myspotontheweb-demo-runtime.html
[ivy:report] Processing /home/mark/.ivy2/cache/com.myspotontheweb-demo-test.xml to /home/mark/Files/Dev/ivy/demo/build/ivy-reports/com.myspotontheweb-demo-test.html

resources:
     [copy] Copying 1 file to /home/mark/Files/Dev/ivy/demo/build/classes

compile:
    [javac] Compiling 1 source file to /home/mark/Files/Dev/ivy/demo/build/classes

compile-tests:
    [mkdir] Created dir: /home/mark/Files/Dev/ivy/demo/build/test-classes
    [javac] Compiling 1 source file to /home/mark/Files/Dev/ivy/demo/build/test-classes

test:
    [mkdir] Created dir: /home/mark/Files/Dev/ivy/demo/build/test-reports
    [junit] Running org.demo.AppTest
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.085 sec

build:
[ivy:retrieve] :: retrieving :: com.myspotontheweb#demo
[ivy:retrieve]  confs: [runtime]
[ivy:retrieve]  3 artifacts copied, 0 already retrieved (512kB/16ms)
      [jar] Building jar: /home/mark/Files/Dev/ivy/demo/build/dist/demo.jar

BUILD SUCCESSFUL
Total time: 4 seconds 
```

## 常春藤.xml

ivy 的一个非常强大的功能是[配置](http://ant.apache.org/ivy/history/latest-milestone/concept.html)。这些允许您将依赖项组合在一起。

```
<ivy-module version="2.0">
    <info organisation="com.myspotontheweb" module="demo"/>

    <configurations>
        <conf name="compile" description="Required to compile application"/>
        <conf name="runtime" description="Additional run-time dependencies" extends="compile"/>
        <conf name="test"    description="Required for test only" extends="runtime"/>
    </configurations>

    <dependencies>
        <!-- compile dependencies -->
        <dependency org="org.slf4j" name="slf4j-api" rev="1.7.5" conf="compile->default"/>

        <!-- runtime dependencies -->
        <dependency org="org.slf4j" name="slf4j-log4j12" rev="1.7.5" conf="runtime->default"/>

        <!-- test dependencies -->
        <dependency org="junit" name="junit" rev="4.11" conf="test->default"/>
    </dependencies>

</ivy-module> 
```

笔记：

*   配置使用“扩展”功能来模拟 Maven“编译”、“运行时”和“测试”Maven 范围。
*   请注意每个依赖项的特殊“conf”属性。这是从本地到远程的映射。有关 ivy 如何管理远程 Maven 模块的更多详细信息，请参阅：[Maven 范围如何通过 ivy 映射到 ivy 配置](https://stackoverflow.com/questions/7104364/how-are-maven-scopes-mapped-to-ivy-configurations-by-ivy/7116577#7116577)

## 构建.xml

Ivy 配置可以被[缓存](http://ant.apache.org/ivy/history/latest-milestone/use/cachepath.html)路径（创建 ANT 路径）和[检索](http://ant.apache.org/ivy/history/latest-milestone/use/retrieve.html)（将文件复制到构建中）等任务利用。我还建议使用[报告](http://ant.apache.org/ivy/history/latest-milestone/use/report.html)目标，以便您可以查看每个配置中出现了哪些 jar（对管理传递依赖项很有用）

```
<project name="demo" default="build" xmlns:ivy="antlib:org.apache.ivy.ant">

    <!--
    ================
    Build properties
    ================
    -->
    <property name="src.dir"          location="src/main/java"/>
    <property name="resources.dir"    location="src/main/resources"/>
    <property name="test.src.dir"     location="src/test/java"/>
    <property name="build.dir"        location="build"/>
    <property name="classes.dir"      location="${build.dir}/classes"/>
    <property name="test.classes.dir" location="${build.dir}/test-classes"/>
    <property name="ivy.reports.dir"  location="${build.dir}/ivy-reports"/>
    <property name="test.reports.dir" location="${build.dir}/test-reports"/>
    <property name="dist.dir"         location="${build.dir}/dist"/>

    <property name="jar.main.class" value="org.demo.App"/>
    <property name="jar.file"       value="${dist.dir}/${ant.project.name}.jar"/>

    <available classname="org.apache.ivy.Main" property="ivy.installed"/>

    <!--
    ===========
    Build setup
    ===========
    -->
    <target name="install-ivy" description="Install ivy" unless="ivy.installed">
        <mkdir dir="${user.home}/.ant/lib"/>
        <get dest="${user.home}/.ant/lib/ivy.jar" src="http://search.maven.org/remotecontent?filepath=org/apache/ivy/ivy/2.3.0/ivy-2.3.0.jar"/>
        <fail message="Ivy has been installed. Run the build again"/>
    </target>

    <target name="resolve" depends="install-ivy" description="Use ivy to resolve classpaths">
        <ivy:resolve/>

        <ivy:report todir='${ivy.reports.dir}' graph='false' xml='false'/>

        <ivy:cachepath pathid="compile.path" conf="compile"/>
        <ivy:cachepath pathid="test.path"    conf="test"/>
    </target>

    <!--
    ===============
    Compile targets
    ===============
    -->
    <target name="resources" description="Copy resources into classpath">
        <copy todir="${classes.dir}">
            <fileset dir="${resources.dir}"/>
        </copy>
    </target>

    <target name="compile" depends="resolve,resources" description="Compile code">
        <mkdir dir="${classes.dir}"/>
        <javac srcdir="${src.dir}" destdir="${classes.dir}" includeantruntime="false" debug="true" classpathref="compile.path"/>
    </target>

    <target name="compile-tests" depends="compile" description="Compile tests">
        <mkdir dir="${test.classes.dir}"/>
        <javac srcdir="${test.src.dir}" destdir="${test.classes.dir}" includeantruntime="false" debug="true">
            <classpath>
                <path refid="test.path"/>
                <pathelement path="${classes.dir}"/>
            </classpath>
        </javac>
    </target>

    <!--
    ============
    Test targets
    ============
    -->
    <target name="test" depends="compile-tests" description="Run unit tests">
        <mkdir dir="${test.reports.dir}"/>
        <junit printsummary="yes" haltonfailure="yes">
            <classpath>
                <path refid="test.path"/>
                <pathelement path="${classes.dir}"/>
                <pathelement path="${test.classes.dir}"/>
            </classpath>
            <formatter type="xml"/>
            <batchtest fork="yes" todir="${test.reports.dir}">
                <fileset dir="${test.src.dir}">
                    <include name="**/*Test*.java"/>
                    <exclude name="**/AllTests.java"/>
                </fileset>
            </batchtest>
        </junit>
    </target>

    <!--
    =====================
    Build and run targets
    =====================
    -->
    <target name="build" depends="test" description="Create executable jar archive">
        <ivy:retrieve pattern="${dist.dir}/lib/[artifact]-[revision](-[classifier]).[ext]" conf="runtime"/>

        <manifestclasspath property="jar.classpath" jarfile="${jar.file}">
            <classpath>
                <fileset dir="${dist.dir}/lib" includes="*.jar"/>
            </classpath>
        </manifestclasspath>

        <jar destfile="${jar.file}" basedir="${classes.dir}">
            <manifest>
                <attribute name="Main-Class" value="${jar.main.class}" />
                <attribute name="Class-Path" value="${jar.classpath}" />
            </manifest>
        </jar>
    </target>

    <target name="run" depends="build" description="Run code">
        <java jar="${jar.file}" fork="true"/>
    </target>

    <!--
    =============
    Clean targets
    =============
    -->
    <target name="clean" description="Cleanup build files">
        <delete dir="${build.dir}"/>
    </target>

    <target name="clean-all" depends="clean" description="Additionally purge ivy cache">
        <ivy:cleancache/>
    </target>

</project> 
```

笔记：

*   有条件的“install-ivy”目标将自动安装 ivy。只需重新运行构建，只需执行一次。

## 应用程序.java

你好世界日志记录示例。

```
package org.demo;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/**
 * Hello world!
 *
 */
public class App {
    static final Logger log = LoggerFactory.getLogger(App.class);

    public static void main( String[] args ) {
        App a = new App();
        a.speak("hello world");
    }

    public void speak(String message) {
        log.info(message);
    }
} 
```

## AppTest.java

这是我档案中的一个老例子。不使用 Junit 断言。

```
ackage org.demo;

import junit.framework.Test;
import junit.framework.TestCase;
import junit.framework.TestSuite;

/**
 * Unit test for simple App.
 */
public class AppTest 
    extends TestCase
{
    /**
     * Create the test case
     *
     * @param testName name of the test case
     */
    public AppTest( String testName )
    {
        super( testName );
    }

    /**
     * @return the suite of tests being tested
     */
    public static Test suite()
    {
        return new TestSuite( AppTest.class );
    }

    /**
     * Rigourous Test :-)
     */
    public void testApp()
    {
        assertTrue( true );
    }
} 
```

## log4j.properties

```
# Set root logger level to DEBUG and its only appender to A1.
log4j.rootLogger=DEBUG, A1

# A1 is set to be a ConsoleAppender.
log4j.appender.A1=org.apache.log4j.ConsoleAppender

# A1 uses PatternLayout.
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 
```

# c++ - 创建了我自己的字符串类——重载赋值运算符和析构函数的错误

> ID：15979394
> 
> 赞同：1
> 
> 时间：2013-04-12T19:28:18.397
> 
> 标签：c++, memory-leaks, destructor

创建了我自己的字符串类，它在调用重载赋值运算符时意外中断（即我相信）。在调用重载赋值运算符后尝试删除 mStr 时，它会完全中断。

被删除的 mStr 是 "\nPlatinum: 5 \nGold: 5 \nSilver: 6 \nCopper: 5 "

我做错了什么，如何确保我的程序不会因没有内存泄漏而中断？

**此处代码中断**

```
String::~String()
{
delete [] mStr;
mStr = nullptr;
} 
```

**代码在此之前中断**

```
 String tempBuffer;

    //Store entire worth of potions
    tempBuffer = "Platinum: ";
    tempBuffer += currencyBuffer[0];
    tempBuffer += "\nGold: ";
    tempBuffer += currencyBuffer[1];
    tempBuffer += "\nSilver: ";
    tempBuffer += currencyBuffer[2];
    tempBuffer += "\nCopper: ";
    tempBuffer += currencyBuffer[3];

    mCost = tempBuffer; 
```

**重载赋值运算符**

```
String &String::operator=(const String & rhs)
{
//Check for self-assignment
if(this != &rhs)
{
    //Check if string is null
    if(rhs.mStr != nullptr)
    {
        //Delete any previously allocated memory
        delete [] this->mStr;

        //Deep copy
        this->mStr = new char[strlen(rhs.mStr) + 1];
        strcpy(this->mStr, rhs.mStr);
    }
    else
        this->mStr = nullptr;
}

//Return object
return *this;
} 
```

**重载的 add 和 assign 运算符**

```
String &String::operator+=( String rhs)
{
//Check for self-assignment
if(this != &rhs)
{
    //Convert to cString
    char * buffer = rhs.c_str();

    //Find length of rhs
    int length = strlen(buffer);

    //Allocate memory
    char * newSize = new char[length + 1];

    //Copy into string
    strcpy(newSize, buffer);

    //Concatenate
    strcat(this->mStr, newSize);

    //Deallocate memory
    delete [] newSize;

}

//Return object
return *this;
} 
```

**复制构造函数**

```
String::String(const String & copy)
:mStr()
{
*this = copy;
} 
```

**字符串构造函数**

```
String::String(char * str)
{
//Allocate memory for data member
mStr = new char[strlen(str) + 1];

//Copy str into data member
strcpy(mStr, str);
} 
```

**字符的字符串构造函数**

```
String::String(char ch)
{
//Assign data member and allocate space
mStr = new char[2];

//Assign first character to the character
mStr[0] = ch;

//Assign second character to null
mStr[1]= '\0';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:31:28.053

*   可能的内存泄漏`operator=()`as`this->mStr`分配给`nullptr`没有`delete[]`if`rhs`包含`nullptr`.
*   In 在`operator+=()` `this->mStr`连接之前没有被扩展。这意味着`strcat()`将写入不应该写入的内存，从而导致未定义的行为，并且可能是析构函数中出现问题的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:59:35.163

我假设这是一个练习（否则你会使用`std::string`）。您的问题似乎是`operator+=`只为您要添加的字符串分配足够的空间，*没有*足够的空间为原始字符串和您追加到其末尾的新部分分配空间。您需要分配更多空间：`char * newSize = new char[strlen(this->mStr) + length + 1];`，然后删除旧的字符串指针并将指针分配给`newSize`类成员。

# css - Tumblr 如何为其导航栏链接创建如此平滑的悬停效果？没有 JavaScript 可能吗？

> ID：15979395
> 
> 赞同：0
> 
> 时间：2013-04-12T19:28:21.447
> 
> 标签：css, html, animation

将鼠标悬停在 Tumblr 仪表板上的导航栏链接（例如，文本、照片、引用）上会产生平滑的效果，其中图标上升约 5-10 像素，然后逐渐回到原位，就好像有动画一样。

Tumblr 仪表板：[http ://www.tumblr.com/dashboard](http://www.tumblr.com/dashboard)

在我们的网站上使用纯 CSS 来实现相同的效果（即位置：相对；顶部：-8px）会在图标立即卡回原位时产生不和谐的效果。

有没有办法在没有 JavaScript 的情况下实现这种效果？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:32:39.733

他们使用 CSS3 过渡效果 DEMO [http://jsfiddle.net/kevinPHPkevin/xejsM/500/](http://jsfiddle.net/kevinPHPkevin/xejsM/500/)

```
a {
    color:blue;
    /* First we need to help some browsers along for this to work.
     Just because a vendor prefix is there, doesn't mean it will
     work in a browser made by that vendor either, it's just for
     future-proofing purposes I guess. */
    -o-transition:color .2s ease-out, background 2s ease-in;
    -ms-transition:color .2s ease-out, background 2s ease-in;
    -moz-transition:color .2s ease-out, background 2s ease-in;
    -webkit-transition:color .2s ease-out, background 2s ease-in;
    /* ...and now for the proper property */
    transition:color .2s ease-out, background 2s ease-in;
} 
```

# android - minVersion 8 (2.2) - 什么可以代替这些功能？

> ID：15979396
> 
> 赞同：0
> 
> 时间：2013-04-12T19:28:22.990
> 
> 标签：android

```
// I use this method to determine the change screen orientation    
Activity.isChangingConfiguration() 
```

和

```
ColorDrawable.getColor() // I use this method to get activity background color 
```

这些方法是在 api 版本 11 中添加的。现在我必须使用最低版本的 api - 8。

对不起我的英语不好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:42:53.243

这项工作为颜色

```
getResources().getColor(R.color.gray_light); 
```

对于方向：[旧帖子](https://stackoverflow.com/questions/4697631/android-screen-orientation)。尝试使用谷歌，或者这个网站搜索引擎 :) 祝你好运

# c# - C# 在文件名中查找特殊字符

> ID：15979398
> 
> 赞同：1
> 
> 时间：2013-04-12T19:28:41.187
> 
> 标签：c#, regex, special-characters

我需要简单地查看文件名中的一组特殊字符是否有任何匹配项我已经尝试了所有常见的正则表达式，包括以下表达式。所有这些示例都会找到除括号之外的任何特殊字符。

```
Regex.Match(filename, "[\\[\\]{}!@#]");
// I even separated this out into 3 like this
Regex.Match(filename, "[");
Regex.Match(filename, "]");
Regex.Match(filename, "[{}!@#]");

filename.IndexOfAny("[]{}!@#".ToCharArray()) != -1 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:39:27.000

```
Regex.Match(test, @"[\[\]{}!@#]"); 
```

为我工作：

```
string test = "aoeu[aoeu";

Match m = Regex.Match(test, @"[\[\]{}!@#]");
// m.Success == true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:48:21.473

您的解决方案

```
filename.IndexOfAny("[]{}!@#".ToCharArray()) != -1 
```

已经很完美了。将转义正则表达式留给 Houdini。

# regex - 正则表达式-在括号之间捕获多个重叠的条目

> ID：15979401
> 
> 赞同：-1
> 
> 时间：2013-04-12T19:28:44.593
> 
> 标签：regex, sed, awk, grep

我有一个字符串

```
.....((((...)))...((((..)))).... 
```

我想拥有 `.....((((...)))...`和`...((((..))))....`分开..

我想出了`/[.(]*(.?)[.)]*/`哪些输出

`.....((((...)))...`和`((((...)))...`

请注意，我希望在第一次切割中位于右端的三个点也出现在第二次切割的左侧。

任何输入表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:55:19.657

```
$ cat file
.....((((...)))...((((..))))....

$ sed -r 's/([^)]+[)]+([^(]+))/\1 \2/' file
.....((((...)))... ...((((..)))).... 
```

或者如果您的 sed 不支持 ERE（-r 选项），那么您可以执行以下操作：

```
$ sed 's/\([^)]*[)]*\([^(]*\)\)/\1 \2/' file
.....((((...)))... ...((((..)))).... 
```

语义有点不同（* = 零或更多，而 + = 1 或更多）但你的例子似乎没问题。

编辑：按要求解释：

```
sed -r ' # use sed with Extended Regular Expressions enabled so "+" works.
s/       # search command and search start delimiter
(        # start of 1st saved RE-matching string (\1 later) which will contain:
[^)]+    #    1 or more non-) characters (e.g. "."s) then
[)]+     #    1 or more )s then
(        #    start of 2nd saved RE-matching string (\2 later) which will contain:
[^(]+    #        1 or more non-) characters (e.g. "."s)
)        #    end of 2nd saved RE-matching string so by this point \2 = "..."
)        # end of 1st saved RE-matching string so by this point \1 = ".....((((...)))..."
/        # search end delimiter and replacement start delimiter
\1 \2    # print \1=".....((((...)))..." then a space then \2="..." then the remaining unmatched input text="((((..))))...."
/        # replacement end delimiter
' file   # operate on the contents of file "file" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:47:18.200

我认为你必须分 3 步完成。原因是你中间的“...”在两个输出中都很常见，我怀疑它在单个正则表达式命令中的可能性。注意：我使用的是“.(.)”。参考您的特定字符串输出模式。

第 1 步：匹配“.(.)”。并返回第一个输出。
第 2 步：匹配第一个“.(.)”并将其从字符串中删除。
第 3 步：将第 2 步中剩余的字符串与“.(.)”匹配。并返回其输出。

我在 rubular.com 上玩过它，我得到的正则表达式与你的不同。
/(.*(+.*)+.*)(.*(+.*)+.*)/ 这不是你想要
的 /(.*(+.*)+.*)/ 这将匹配一个个人 ”。（。）。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:17:17.597

HM1 是对的，你不能在 RE 中匹配两次一些字符。一个想法是单独匹配公共部分并在之后连接。gawk 的一个例子：

```
echo "begin(first round bracket)middle(second round bracket)end" | gawk 'match($0, /^([^)]+\))([^(]+)(.+)$/, a) { first=a[1] a[2]; second=a[2] a[3]; print first "\n" second }' 
```

# android - 无法将 SQLiteDatabase 编码设置为 UTF-8 以外的任何内容

> ID：15979402
> 
> 赞同：5
> 
> 时间：2013-04-12T19:28:47.807
> 
> 标签：android, character-encoding, android-sqlite

我正在解决一个问题，我需要将一个 sqlite 数据库附加到另一个数据库。其中一个数据库是由我的应用程序创建的，另一个是从远程服务器下载的。我更喜欢以合法的数据格式（如 JSON）获取它，但我无法控制这方面。

问题是下载的sqlite文件的编码是UTF-16le。本地文件是 UTF-8（Android 的默认）。我可以自己读取这两个文件，但 SQLite 仅在编码匹配时才允许 ATTACH 操作。

解决方案应该像在我创建本地数据库时使用 UTF-16le 编码一样简单，但似乎总是在我获取数据库对象之前设置编码并且我无法更改它。我正在使用 SQLiteOpenHelper 并且我假设所有 PRAGMA 语句都应该发生在 onConfigure() 中，如下所示：

```
@Override 
public void onConfigure(SQLiteDatabase db) { 
    db.execSQL("PRAGMA encoding = \"UTF-16le\""); 
} 
```

当我在此之后检查编码时，它始终是 UTF-8。

```
Log.d(TAG, DatabaseUtils.dumpCursorToString(db.rawQuery("PRAGMA encoding", null))); 
```

结果：

```
04-12 11:10:07.116: D/MainActivity(10743): >>>>> Dumping cursor android.database.sqlite.SQLiteCursor@b3636fd0
04-12 11:10:07.116: D/MainActivity(10743): 0 {
04-12 11:10:07.116: D/MainActivity(10743):    encoding=UTF-8
04-12 11:10:07.116: D/MainActivity(10743): }
04-12 11:10:07.116: D/MainActivity(10743): <<<<< 
```

我什至尝试在内存中创建一个数据库并设置它的编码，但它总是在之后报告 UTF-8：

```
SQLiteDatabase db = SQLiteDatabase.create(null);
db.execSQL("PRAGMA encoding = \"UTF-16le\""); 
```

我有点困惑，因为我可以打开这些 UTF-16le 编码的数据库并且它们的编码被正确报告，但我似乎无法在设备上创建一个。有没有办法在我创建数据库时设置它的编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:33:30.603

根据[this](https://stackoverflow.com/questions/6735263/sqlite-encoding-android)和[this](https://stackoverflow.com/questions/13862930/sqlite-database-in-persian-language) Android sqlite仅支持UTF-8和UTF-16。

这有帮助吗？亚龙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:28:55.323

想出了一个笨拙的解决方案。基本上，我的资产文件夹中有一个空白的 UTF-16le 数据库文件。当我创建一个新数据库时，我将这个文件复制过来（在我的 SQLiteOpenHelper 中），然后正常执行所有操作。

# ruby-on-rails - 尝试生成设计用户时出现语法错误

> ID：15979404
> 
> 赞同：0
> 
> 时间：2013-04-12T19:29:01.573
> 
> 标签：ruby-on-rails, devise, syntax-error

我最近将设计 gem 添加到我的 rails 应用程序中，并且捆绑安装进行得很顺利。当我运行“rails generate devise:install”时，它生成了一个我应该对各种文件进行的更改列表，我将其合并。

我接下来运行`rails generate devise User`并收到以下错误消息：

```
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/ac
tive_support/dependencies.rb:251:in `require': C:/code/omrails/config/environmen
ts/development.rb:41: syntax error, unexpected keyword_end, expecting $end (Synt
axError)
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.13/lib/active_support/dependencies.rb:251:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/engine.rb:571:in `block in <class:Engine>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/initializable.rb:30:in `instance_exec'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/initializable.rb:30:in `run'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/initializable.rb:55:in `block in run_initializers'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/initializable.rb:54:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/initializable.rb:54:in `run_initializers'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/application.rb:136:in `initialize!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/railtie/configurable.rb:30:in `method_missing'
        from C:/code/omrails/config/environment.rb:5:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.13/lib/active_support/dependencies.rb:251:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-
3.2.13/lib/active_support/dependencies.rb:251:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/application.rb:103:in `require_environment!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
3/lib/rails/commands.rb:25:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

我查看了引用的文件，但无法真正弄清楚需要修复什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:42:08.193

您的 config/environments/development.rb:41 有一个 msising“结束”标签。如果您使用的是 git 或其他东西，请尝试 diff 来查找问题。如果找不到，请将您的文件粘贴到此处以供检查。

# ssrs-2008 - 如何在报表中插入另一个级别的钻取？

> ID：15979406
> 
> 赞同：0
> 
> 时间：2013-04-12T19:29:09.350
> 
> 标签：ssrs-2008, reporting-services

我目前有一份工作钻取报告。

我想添加另一个级别的向下钻取，但我不知道该怎么做。

我现在有这个：

![在此处输入图像描述](https://i.stack.imgur.com/ziMAQ.png)

但是显示的最后一行`<<Expr>>`需要包含在它上面的行下。

**我怎样才能包括一个额外的向下钻取级别？**

我按照@eestein 的建议做了，结果如下：

![在此处输入图像描述](https://i.stack.imgur.com/OOfXN.png)

正如你所看到的，最下面一行并没有与上面的那一行相关联！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:22:54.110

好的，从你最后的评论中我想我明白你的意思了。例如，要实现这一点，您需要在`+`标志上方的行中创建一个元素，然后将其绑定到下方行的隐藏属性。

1.  创建一个带有`+`符号的元素
2.  在要展开/缩回的行上按 F4
3.  一直滚动到最后，直到看到可见性组
4.  在`ToggleItem`选择带有`+`符号的项目的名称
5.  设置你`Hidden`为真

[http://technet.microsoft.com/en-us/library/dd220405(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/dd220405(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T20:42:08.267

听起来您只想要两个级别的“详细信息”，但这也可能在一个组中。SSRS 有一个选项，当您单击单元格时，您可以选择“插入行”，该选项扩展为“组内...”或“组外...”。如果您希望与前一行继续并行的详细信息级别，只需选择“内部组”，它应该仅将信息级别继续到“详细信息”行、“父组 1”、“父组 2”等的该级别...

# node.js - 安装 Karma (Testacular) 时出错

> ID：15979409
> 
> 赞同：4
> 
> 时间：2013-04-12T19:29:17.607
> 
> 标签：node.js, npm, karma-runner

我的机器上运行了 v0.8.18 版本的节点，我正在尝试安装 Karma (Testacular)，但不断收到以下错误。我无法理解错误，有没有人遇到过这个或知道缺少什么？

```
ruby-2.0.0-p0 AngularTut marty$ npm install -g karma
npm http GET https://registry.npmjs.org/karma
npm http 304 https://registry.npmjs.org/karma
npm ERR! Error: EACCES, mkdir '/usr/local/lib/node_modules/karma'
npm ERR!  { [Error: EACCES, mkdir '/usr/local/lib/node_modules/karma']
npm ERR!   errno: 3,
npm ERR!   code: 'EACCES',
npm ERR!   path: '/usr/local/lib/node_modules/karma',
npm ERR!   fstream_type: 'Directory',
npm ERR!   fstream_path: '/usr/local/lib/node_modules/karma',
npm ERR!   fstream_class: 'DirWriter',
npm ERR!   fstream_stack: 
npm ERR!    [ 'DirWriter._create (/usr/local/lib/node_modules/npm/node_modules/fstream/lib/dir-writer.js:36:23)',
npm ERR!      '/usr/local/lib/node_modules/npm/node_modules/mkdirp/index.js:37:53',
npm ERR!      'Object.oncomplete (fs.js:297:15)' ] }
npm ERR! 
npm ERR! Please try running this command again as root/Administrator.

npm ERR! System Darwin 12.3.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "-g" "karma"
npm ERR! cwd /Users/marty/Web/AngularTut
npm ERR! node -v v0.8.18
npm ERR! npm -v 1.2.2
npm ERR! path /usr/local/lib/node_modules/karma
npm ERR! fstream_path /usr/local/lib/node_modules/karma
npm ERR! fstream_type Directory
npm ERR! fstream_class DirWriter
npm ERR! code EACCES
npm ERR! errno 3
npm ERR! stack Error: EACCES, mkdir '/usr/local/lib/node_modules/karma'
npm ERR! fstream_stack DirWriter._create (/usr/local/lib/node_modules/npm/node_modules/fstream/lib/dir-writer.js:36:23)
npm ERR! fstream_stack /usr/local/lib/node_modules/npm/node_modules/mkdirp/index.js:37:53
npm ERR! fstream_stack Object.oncomplete (fs.js:297:15)
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/marty/Web/AngularTut/npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T19:32:37.900

`sudo`在命令前面加上。

```
sudo npm install -g karma 
```

# javascript - HTML 输入元素没有方法“isValid”

> ID：15979417
> 
> 赞同：0
> 
> 时间：2013-04-12T19:29:38.813
> 
> 标签：javascript, html, events

我有一个 javascript 类`c`，我试图在输入提交按钮`isValid()`的事件中调用它的方法。`onClick`我目前`c`在我的提交按钮下方有一组脚本标签。当我点击提交按钮时，我得到

`Uncaught TypeError: Object #<HTMLInputElement> has no method 'isValid'`

经过一番折腾，我尝试在页面底部的类脚本下方放置相同的提交按钮。这允许正确调用该方法。

这是我的javascript：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
var c = {
        container : $('#c_c'),
        r1 : 0,
        r2 : 0,
        c_i : "",
        createCaptcha : function(){
            var newHtml;

            this.r1 = this.randomNumber(10);
            this.r2 = this.randomNumber(10);
            // alert(this.r1 + this.r2);

            newHtml += "<p>What is " + this.r1 + " plus " + this.r2 + "?<br/><input type='text' name='c'></p>";

            this.container.html(newHtml);
        },
        isValid : function(){
            // alert(this.r1);
            this.c_i = $('input[name="c"]');
            if (this.r1 + this.r2 == this.c_i.val()) {
                alert('correct!');
                return true;
            } else{
                alert('incorrect =[');
                return false;
            }
        },
        randomNumber : function(max){ return Math.floor(Math.random()*(max+1)); }
    }
    c.createCaptcha();
</script> 
```

这是我的按钮：

```
<input id="form_0001_ao_submit_input" type="button" name="SUBMIT" value="Submit" style="color:#fff; font-size: 18px; height: 30px; width: 250px; background-color: #00a94f;" onClick="c.isValid();"> 
```

我在页面上也有一个带有 ID 的跨度。这就是在`createCaptcha()`（对不起，我错过了这条重要的信息 =[）中引用的内容：

```
<span id="c_c"></span> 
```

所以这是页面的样子：

```
<span id="c_c"></span>
<input id="form_0001_ao_submit_input" type="button" name="SUBMIT" value="Submit" style="color:#fff; font-size: 18px; height: 30px; width: 250px; background-color: #00a94f;" onClick="c.isValid();">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
    var c = {
        container : $('#c_c'),
        r1 : 0,
        r2 : 0,
        c_i : "",
        createCaptcha : function(){
            var newHtml;

            this.r1 = this.randomNumber(10);
            this.r2 = this.randomNumber(10);
            // alert(this.r1 + this.r2);

            newHtml += "<p>What is " + this.r1 + " plus " + this.r2 + "?<br/><input type='text' name='c'></p>";

            this.container.html(newHtml);
        },
        isValid : function(){
            // alert(this.r1);
            this.c_i = $('input[name="c"]');
            if (this.r1 + this.r2 == this.c_i.val()) {
                alert('correct!');
                return true;
            } else{
                alert('incorrect =[');
                return false;
            }
        },
        randomNumber : function(max){ return Math.floor(Math.random()*(max+1)); }
    }
    c.createCaptcha();
</script> 
```

似乎调用尚未定义的`c`对象的方法不允许该方法运行，这是有道理的。

无需将脚本移动到页面顶部（出于性能方面的考虑，js 最好放在底部）来缓解这种情况的最佳方法是什么？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:34:58.973

也许您可以稍后在代码中将事件侦听器添加到输入对象。使用 JQuery：

```
$("#form_0001_ao_submit_input").click(function() { c.isValid(); }); 
```

（在声明 c 之后）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T20:00:29.590

我将对您的代码进行以下更改：

1.  从全局范围中删除 var "c"。应该非常小心地使用这个范围。想象一下，如果另一个 javascript 文件也使用此范围声明了一个名为“c”的 var（对他们感到羞耻）。它会被你覆盖。

2.  删除直接在输入上声明的“onClick”属性。

3.  由于您使用的是 jQuery，因此您可以在“就绪”方法中声明您的代码（该方法在 DOM 加载后立即执行 - 无论您将脚本放在哪里。像这样：

```
 $(function(){
        //c now is inside a function, so it's not declared on the global scope
        var c = {
           // ... your code
        };  

        //creates the captcha when the DOM is loaded
        c.createCaptcha(); 

        $('#form_0001_ao_submit_input').click(function(){
            c.isValid();
        });

    }); 
```

还可以考虑将您的 javascript 代码提取到另一个文件（并像使用 jQuery 一样将其导入），以便浏览器能够缓存它以加快加载速度。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T19:34:57.210

您的`input`元素正在尝试访问全局变量`c`。

只需将您的 JavaScript 更改为显式声明`c`为全局变量，如下所示：

```
window.c = {
    ...
}; 
```

工作示例：http: [//jsfiddle.net/ud66S/1/](http://jsfiddle.net/ud66S/1/)

# iphone - 第 5 代 iPod Touch 的内部名称？

> ID：15979419
> 
> 赞同：0
> 
> 时间：2013-04-12T19:29:49.393
> 
> 标签：iphone, ipod-touch

Apple 对第 5 代 iPod Touch 的内部名称是什么？

我可以从[iphonewiki.com](http://theiphonewiki.com/wiki/IPhone)看到 iPhone 的内部名称。例如，iPhone 4S 的内部名称为“iPhone4,1”。但是，我在该站点上找不到任何信息，也找不到有关 iPod Touch 设备内部名称的搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:33:12.683

看起来是 iPod5,1

资料来源：[http ://www.everymac.com/ultimate-mac-lookup/?search_keywords=iPod5,1](http://www.everymac.com/ultimate-mac-lookup/?search_keywords=iPod5,1)

# web-services - Azure System.Web.Services.Protocols.SoapException

> ID：15979420
> 
> 赞同：1
> 
> 时间：2013-04-12T19:29:50.767
> 
> 标签：web-services, azure

我在服务器上使用 Web 服务，它工作正常。现在我想将我的站点转移到 Azure 服务器。现在我在 azure 上创建了一个免费网站来测试它。

它是一个调用服务来创建报告的 Silverlight 应用程序。

当我调用此服务时，出现以下错误

错误：

```
<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><soap:Fault><faultcode>soap:Server</faultcode><faultstring>System.Web.Services.Protocols.SoapException: Server was unable to process request. ---&gt; System.ArgumentException: Parameter is not valid.
   at System.Drawing.Graphics.GetHdc()
   at C1.Util.FontSubSet.#e.#cA.#Kn(FontSubSet owner, String tableName)
   at C1.Util.FontSubSet.GetFontTableStream(String name)
   at C1.Util.FontSubSet.#TDd()
   at C1.Util.FontSubSet.Init()
   at C1.Util.FontSubSet.GetFontSubSet(FontKey fk)
   at C1.C1Preview.C1PrintDocument.#ydd(String s, String fontName, Boolean fontBold, Boolean fontItalic, Boolean updateDocumentFonts)
   at C1.C1Preview.C1PrintDocument.#zdd(String s, String fontName, Byte fontCharSet, FontStyle fontStyle)
   at C1.C1Preview.RenderText.InternalResolvingFinished()
   at C1.C1Preview.RenderObject.ResolvingFinished()
   at C1.C1Report.Layout.RenderDirect(ILengthCacheProvider lcp, RenderObject ro, RenderFragment rf, Double x, Double y, Double width, Double height)
   at C1.C1Report.Layout.RenderDirect(ILengthCacheProvider lcp, RenderObject ro, RenderFragment rf, RectangleD bounds)
   at C1.C1Report.Field.#RLd(ExportFilter export, Layout layout, RectangleD bounds, String str, Boolean rtf, Double lineWidthTw, Int32 firstCharIndex, Int32 length)
   at C1.C1Report.Field.Render(Layout layout, Double x, Double y, Boolean measure)
   at C1.C1Report.Field.Render(Layout layout, Double x, Double y)
   at C1.C1Report.Section.Render(Boolean keepPage, Group ownerGroup)
   at C1.C1Report.Layout.#fMd(Section s)
   at C1.C1Report.Layout.StartDoc()
   at C1.C1Report.C1Report.RenderFirstPass(Boolean releaseDocument)
   at C1.C1Report.C1Report.#fNd()
   at C1.C1Report.C1Report.#dNd(ExportFilter filter, Boolean reuse)
   at C1.C1Report.C1Report.RenderToStream(Stream stream, FileFormatEnum fmt, String idPrefix, String fileName)
   at C1.C1Report.C1Report.RenderToStream(Stream stream, FileFormatEnum fmt)
   at Gestion1.Web.RapportS.GetReportCommunique()
   --- End of inner exception stack trace ---</faultstring><detail /></soap:Fault></soap:Body></soap:Envelope> ` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-16T18:26:22.213

根据提供的堆栈跟踪，您似乎正在尝试从服务器上的 ComponentOne 运行报告工具。

该问题是由于出于安全和性能原因，对 Azure 网站实例限制使用的 API 的访问引起的。本机 GDI 呈现方法属于这些受限 API。

请参阅本文末尾的 Jim Cheshire 的[帖子](http://social.msdn.microsoft.com/Forums/en-US/b4a6eb43-0013-435f-9d11-00ee26a8d017/report-viewer-error-on-export-pdf-or-excel-from-azure-web-sites?forum=windowsazurewebsitespreview)。

除非这些限制被放宽（它们可能不会），否则您的选择是将服务移至云服务实例，或移至不使用本机 GDI 方法进行呈现的另一个组件。

# php - 从字符串中获取一些文本（正则表达式）

> ID：15979425
> 
> 赞同：0
> 
> 时间：2013-04-12T19:30:14.080
> 
> 标签：php, regex

我有一个像这样的字符串：

`Lorem Ipsum Dolor Sir 2013-10-22 Lorem Ipsum Dolor...`

我应该如何约会？我只想要确定日期（`yyyy-mm-dd`）的文本部分。我试过`preg_match`了，但无法只得到文本的那部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:32:51.777

```
preg_match('/(\d{4}-\d{2}-\d{2})/', $text, $matches);
echo $matches[1];

\d - any digit
{4} require 4 of the previous match
\d{4}   - require 4 digits 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:32:34.493

括号内的匹配项放在 的第三个参数中`preg_match`，因此其中的第一项是整个匹配项，下一项是括号内的匹配项。

```
preg_match("/(\d{4}-\d{2}-\d{2})/", $text, $regs);
echo $regs[0]; // The whole match is in $regs[0]
echo $regs[1]; // The match inside the 1\. parenthesis is in $regs[1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T19:35:19.960

您可以使用此正则表达式：

```
$str = 'Lorem Ipsum Dolor Sir 2013-10-22 Lorem Ipsum Dolor...';
if (preg_match('/(\d{4}-\d{2}-\d{2})/', $str, $match))
   echo $match[1] . "\n"; 
```

# c# - MonthCalendar 的用户控件

> ID：15979426
> 
> 赞同：1
> 
> 时间：2013-04-12T19:30:20.920
> 
> 标签：c#, user-controls, monthcalendar

我正在尝试修改月历，但在将用户控件添加到表单之前，VS 冻结。问题出在无限循环中，但我找不到错误。请帮忙

```
private void SetDayBoxSize()
{
  int bottom = this.Height;

  while (HitTest(1, dayTop).HitArea != HitArea.Date &&
         HitTest(1, dayTop).HitArea != HitArea.PrevMonthDate) dayTop++;

  while (HitTest(1, bottom).HitArea != HitArea.Date &&
    HitTest(1, bottom).HitArea != HitArea.NextMonthDate) bottom--;

  dayBox = new Rectangle();
  dayBox.Size = new Size(this.Width / 7, (bottom - dayTop) / 6);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-19T13:52:47.537

您可以使用以下代码来解决此问题：

```
private void SetDayBoxSize()
{
  int bottom = this.Height;

  while (HitTest(25, dayTop).HitArea != HitArea.Date &&
         HitTest(25, dayTop).HitArea != HitArea.PrevMonthDate) dayTop++;

  while (HitTest(25, bottom).HitArea != HitArea.Date &&
    HitTest(25, bottom).HitArea != HitArea.NextMonthDate) bottom--;

  dayBox = new Rectangle();
  dayBox.Size = new Size(this.Width / 7, (bottom - dayTop) / 6);
} 
```

# amazon-web-services - 每种 Amazon 实例类型的适当 Gunicorn 工作人员数量是多少？

> ID：15979428
> 
> 赞同：22
> 
> 时间：2013-04-12T19:30:26.637
> 
> 标签：amazon-web-services, amazon-ec2, gunicorn, worker, worker-process

我目前正在尝试确定每种 Amazon 实例类型的适当工作人员数量。我曾经运行过一名 Gunicorn 工人，但事实证明这很慢。

许多开发人员目前正在使用这个公式来衡量多少工人是合适的：

```
NUM_WORKERS=3  #recommended formula here is 1 + 2 * NUM_CORES 
```

我遇到的问题是亚马逊对每个实例运行的核心数量不太清楚。例如，一个 M1 小型实例有 1 个 EC2 计算单元（1 个虚拟核心和 1 个 EC2 计算单元）

这本质上是什么意思？它有一个核心？或者它有两个核心？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-12-27T03:20:19.903

我知道这是一个老问题。但我认为我对这个问题有更好的答案。Gunicorn 文档建议 2n+1 [ `gunicorn -w <2n+1> myapp:wsgi`] 是对工人数量的一个很好的猜测（是的，n = 核心数）。我想出了一个小 shell 脚本来应用这个公式。您需要做的就是：

```
gunicorn -w $(( 2 * `cat /proc/cpuinfo | grep 'core id' | wc -l` + 1 )) myapp:wsgi 
```

命令在哪里

```
cat /proc/cpuinfo | grep 'core id' | wc -l 
```

将返回实际 CPU 内核的总数 (n)。所以

```
$(( 2 * `cat /proc/cpuinfo | grep 'core id' | wc -l` + 1 )) 
```

等于 2n+1 公式。

这会将 2n+1 公式应用于所有基于 linux 的机器。您不需要知道每种类型的实例或类似实例的工作人员数量。

参考：[http ://dhilipsiva.com/2015/10/22/appropriate-number-of-gunicorn-workers.html](http://dhilipsiva.com/2015/10/22/appropriate-number-of-gunicorn-workers.html)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-07-29T20:22:13.483

在[epicbrew 的](https://stackoverflow.com/a/23569003/143880 "SO：命令行中Linux中的CPU/内核数？")工作基础上，以下是如何启动 2N+1 个 Gunicorn 工作者，其中 N = CPU 内核数：

```
gunicorn --workers=$((2 * $(getconf _NPROCESSORS_ONLN) + 1)) wsgi:application 
```

这适用于 Linux 和 macOS！有关[John Tells All 博客的更多详细信息。](http://johntellsall.blogspot.com/2016/07/tip-running-2n1-gunicorn-workers.html "约翰告诉所有博客")

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-12T19:53:11.557

[Amazon EC2](http://aws.amazon.com/ec2/) `m1.small`实例类型肯定只有一个虚拟核心；从线程/工作人员的角度来看，您可以完全忽略*EC2 计算单元 (ECU)规范，并按字面意思获取*[Amazon EC2 实例类型](http://aws.amazon.com/ec2/instance-types/)页面上列出的（虚拟）内核数量，乘以列出的 CPU 数量（如果适用）（仅相关对于集群实例）。

如果您想避免进行数学计算和/或以编程方式访问该信息，您可能需要查看[missingcloud](https://github.com/garnaat/missingcloud)项目 - [aws.json数据集在](https://github.com/garnaat/missingcloud/blob/master/aws.json)[instance_types](https://github.com/garnaat/missingcloud/blob/ce837e214ff43742594821b3e5a995e1d99c095b/aws.json#L627)集合中具有 cores 字段，例如：

```
"instance_types" : {
        "m1.small" : {
            "compute_units" : 1,
            "cores" : 1,
            "gpus" : 0,
            "ramMB" : 1700,
            "storageGB" : [10, 160],
            "i/o" : "moderate",
            "ebs_optimized_iopsMbps" : 0,
            "arch" : [32,64]},
        ...
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-13T07:06:21.697

查看检测到多少 cpu 的简单方法是运行 top 并按“1”以显示 cpu 的数量。您将看到 cpu0、cpu1、cpu2 等。

# html - 表格单元格中的溢出文本

> ID：15979430
> 
> 赞同：0
> 
> 时间：2013-04-12T19:30:40.037
> 
> 标签：html, css

我有一长串没有空格的文件路径。例如：

这显示在 a`table`中，类似于：

```
<td>
    /thisisthetopfolder/thisisthebottomfolder/thisisthefile.html
</td> 
```

但是，文本不会溢出到下一行，它只是在表格单元格宽度的末尾被截断/截断。我无法增加表格或表格单元格的宽度。有没有办法强制溢出表格单元格中的文本，使其不会被切断？

它看起来像这样：

```
------------------------------------------
| /thisisthetopfolder/thisi | other info  |
------------------------------------------ 
```

它需要看起来像这样：

```
------------------------------------------
| /thisisthetopfolder/thisi  |            |
|  sthebottomfolder/thisisth |            |
|  efile.html                | other info |
------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:35:09.413

添加此 CSS 规则：

```
td {
    word-break:break-word;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/j8TzJ/)**

[word-break](https://developer.mozilla.org/en-US/docs/CSS/word-break) CSS 属性用于指定如何（或是否）在单词中换行。

# html - 如何在不移动其他 div 的情况下隐藏引导导航栏？

> ID：15979435
> 
> 赞同：0
> 
> 时间：2013-04-12T19:30:48.257
> 
> 标签：html, twitter-bootstrap

我创建了一个页面，我想在单击按钮时显示或隐藏引导导航栏。

但是当我点击按钮时，整个“内容” div 会向上移动。我试图设置一个`z-index`，但它仍然没有工作。

这是我的代码：

```
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html" />
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>

<style type="text/css">
 .pull-center {
    text-align: center;
}
.pull-center > .nav {
    float:none;
    display:inline-block;
    *display: inline; *zoom: 1;
    height: 32px;
}  
body { 
background: url(img/background.gif) no-repeat center center fixed; 
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
} 

</style>

</head>

<body>    
 <div class="container">

    <div class="row">

        <div class="span1"></div>

        <div class="span10">           
                <div class="navbar" >
                    <div id="navbar">                    
                    <div class="navbar-inner pull-center" >
                        <ul class="nav">
                        <li class="active"><a href="#">Home</a></li>
                        <li class="divider-vertical"></li>                        
                        <li><a href="#">Rules</a></li>
                        <li class="divider-vertical"></li>                        
                        <li><a href="#">Requirements</a></li>
                        <li class="divider-vertical"></li>                                                
                        <li><a href="#">Contacts</a></li>                        
                        </ul>
                    </div>
                    </div>                        
                    <center><button id="btx" class="btn" style="margin:0;"   onclick="showhide('navbar','btx','hide','show')" >MENU</button></center>
                </div>
            <div class="span1"> </div>                                                   
            <div id="content" class="span8 pagination-centered">                
                <img src="img/final2.gif" class="img-rounded" style="text-align: center;"/>
            </div>
            <div class="span1"></div> 

        </div>

        <div class="span1"></div>

    </div>   

</div>    

<script>
function showhide(targetElementId,thisId,newName,oldName){
var thisElement = document.getElementById(thisId);
$("#"+targetElementId).slideToggle("slow");
if(targetElement.style.display!='none'){
    thisElement.value=oldName;
}
else{
    thisElement.value=newName;
}
}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:42:16.087

U 可以添加到类导航栏固定高度和相对位置。像这样的东西：

```
<div class="navbar" style="height:30px;position:relative;">... 
```

并将按钮放在 div class="navbar" 之外

[http://jsbin.com/ukotar/2/](http://jsbin.com/ukotar/2/)

# testing - 如何在已安装的 bugzilla 4.2 上设置 testopia 2.5

> ID：15979438
> 
> 赞同：-1
> 
> 时间：2013-04-12T19:30:51.240
> 
> 标签：testing

我们在我们的组织中使用 bugzilla 4.2。我想在此设置 testopia 2.5。我们在设置时对 bugzilla 进行了一些自定义。我想保留它们，但也想在上面配置 testopia。当 bugzilla 已经安装了自定义时，任何人都可以解释如何在 linux 上设置 testopia 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:52:00.003

您必须升级到 Bugzilla > 4.2.1。然后你就可以安装 Testopia 2.5 而无需任何补丁。Testopia 的安装非常简单。

更多详情：[https ://web.archive.org/web/20140326234952/http://lpsolit.wordpress.com/2012/05/30/testopia-2-5-released-works-with-bugzilla-4-2 -1/](https://web.archive.org/web/20140326234952/http://lpsolit.wordpress.com/2012/05/30/testopia-2-5-released-works-with-bugzilla-4-2-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T13:54:33.447

1.  Download Testopia from mozilla: [https://developer.mozilla.org/en-US/docs/Mozilla/Bugzilla/Testopia](https://developer.mozilla.org/en-US/docs/Mozilla/Bugzilla/Testopia)

2.  Move this file to your Bugzilla folder and extract it there.

3.  Go to terminal and navigate to your Bugzilla folder

4.  Run ./checksetup.pl from terminal to complete Testopia installation.

# powershell - 在远程计算机上运行本地功能？

> ID：15979445
> 
> 赞同：4
> 
> 时间：2013-04-12T19:31:22.003
> 
> 标签：powershell, powershell-remoting

我的电脑上有一个简单的功能

```
MYPC> $txt = "Testy McTesterson"
MYPC> function Do-Stuff($file) { 
  cd c:\temp; 
  $txt > $file; 
} 
```

我想在远程计算机上运行它

```
MYPC> Invoke-Command -ComputerName OTHERPC { Do-Stuff "test.txt" } 
```

可以理解，`Do-Stuff`在 OTHERPC 上不存在，这不起作用。我怎样才能让它工作呢？该`Do-Stuff`函数抽象了一些基本代码并在其他几个地方调用，所以我不想复制它。

请注意，在我的示例中，值是通过参数和范围闭包传递给函数的。那可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T20:11:52.440

我不知道您如何使用闭包值，但您可以将两者都作为参数传递，如下所示：

```
$txt = "Testy McTesterson"
$file = "SomeFile.txt"
function Do-Stuff { param($txt,$file) cd c:\temp; $txt > $file }
Invoke-Command -ComputerName SomeComputer -ScriptBlock ${function:Do-Stuff} -ArgumentList $txt, $file 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-01T06:47:15.127

不确定是否有人仍然关心，但您实际上可以通过 PSSession 将保存在 .ps1 文件中的自定义函数加载到远程计算机。我试过了，它对我有用。 [看看这个人的解决方案](https://stackoverflow.com/questions/14441800/how-to-import-custom-powershell-module-into-the-remote-session)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-05T14:24:51.900

有人真正关心的风险更小:)，但这是一种方法。

```
MYPC> $myPCscript = @'
$txt = "Testy McTesterson"
function Do-Stuff($file) { 
    cd c:\temp
    $txt > $file
}
'@
MYPC> Invoke-Command -ComputerName OTHERPC { Invoke-Expression $using:myPCscript; Do-Stuff "test.txt" } 
```

# sql-server - T-SQL 'InString' 或删除操作

> ID：15979449
> 
> 赞同：0
> 
> 时间：2013-04-12T19:31:26.863
> 
> 标签：sql-server, tsql

是否可以执行某种内联操作来删除正在检索的值的某个部分？例如，我有

```
SELECT VersionNumber, [Description], 
FROM tblVersions 
```

并且值`VersionNumber`可能是 编辑：来发现一个整数可以是一个值，例如 1、25、100 等。所以在这种情况下`CHARINDEX`并且`LEFT`不会工作。

```
 1.1
 1.55
10.01
10.99
99.1 (a)
50.17 Interim 
```

我需要做的是在句号之后剪切所有内容（值类型为`VARCHAR`）。这是`PIVOT`查询的一部分（见下文），因此实际`Select`语句是固定字符串的一部分。

```
SELECT 
   @cols = STUFF(( SELECT DISTINCT TOP 100 PERCENT '],[' + [Description] 
FROM 
   GIIA.vQualScoringGrade 
ORDER BY 
   '],[' + [Description] 
FOR XML PATH('')), 1,2,'') + ']'

SET @query = N'SELECT VersionNumber, ' + @cols + 
              ' FROM (SELECT VersionNumber, Description, Value, OrderBy FROM GIIA.vQualScoringGrade) p
PIVOT (SUM([Value]) for [Description] IN ( ' + @cols + ' )) AS pvt ORDER BY VersionNumber'

execute(@query) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:45:04.293

也许你想要类似的东西：

```
LEFT(VersionNumber, CHARINDEX('.',VersionNumber + '.')-1) 
```

添加自己的句点是一个小技巧，无论原始字符串中是否有句点，它都能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:12:04.847

获取主要版本的最简单方法可能是附加句点并使用 left/charindex：

```
select left(VersionNumber, charindex('.', VersionNumber + '.') - 1) as Major
from tblVersions 
```

我还使用 parsename 来获取版本号的所有四个部分：

```
select VersionNumber
    , parsename(VersionNumber + replicate('.0', 3 - (len(VersionNumber) - len(replace(VersionNumber, '.', '')))), 4) as Major
    , parsename(VersionNumber + replicate('.0', 3 - (len(VersionNumber) - len(replace(VersionNumber, '.', '')))), 3) as Minor
    , parsename(VersionNumber + replicate('.0', 3 - (len(VersionNumber) - len(replace(VersionNumber, '.', '')))), 2) as Build
    , parsename(VersionNumber + replicate('.0', 3 - (len(VersionNumber) - len(replace(VersionNumber, '.', '')))), 1) as Revision
from tblVersions 
```

使用句点分隔的四个元素以外的任何内容都可能最好使用任意数量的 T-SQL 拆分器（Tally、CTE、UDF、XML）来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T16:42:35.967

我最初对 VersionNumber 字段中可以有什么样的值的理解是关闭的。基本上我可以有文本、看起来像小数的数字或整数。要求是将此归档保留为“开放”文本，这对程序员来说很困难，但还有什么新内容？

因此，正如@Pondlife 所建议的那样，我已经实现了一个`SELECT CASE`声明，并且在大多数情况下它都有效 - 我有订购问题，但我可以稍后处理。

我最终修改了像这样提供 sproc 的视图：

```
 SELECT CASE CHARINDEX('.', VersionNumber) WHEN 0 THEN VersionNumber ELSE REPLACE(LEFT(VersionNumber, CHARINDEX('.', VersionNumber)), '.', '') 
 END AS [Award Fee Period], 'Unsatisfactory' AS Description, COUNT(Description) AS GradeCount, 6 AS OrderBy
 FROM GIIA.vQualScoringGrade 
```

非常感谢所有做出贡献的人！

# ios - iOS InterfaceBuilder：当 y 位置更改时，SearchBar 不会显示

> ID：15979455
> 
> 赞同：0
> 
> 时间：2013-04-12T19:31:50.257
> 
> 标签：ios, uitableview, uiview

我在 UIview 中有一个带有搜索栏的 UITableView。我更改了 Y 位置，以便 UITableView 向下移动，但是当我加载应用程序时，y 位置似乎被重置并向上移动。我该如何解决？

UITableView/SearchBar 在 UIView 中下移：

![带有搜索栏的 UITableView](https://i.stack.imgur.com/cDSOa.png)

应用加载后的 UITableView/SearchBar：

![加载应用程序后的 UITableView](https://i.stack.imgur.com/vzMBo.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:22:40.893

我会避免表格视图完全覆盖搜索栏的问题，方法是把它放在表格视图的`tableHeaderView`属性中而不是封闭`UIView`- 我认为这是一种相当标准的做法：

```
UISearchBar *searchBar = [[UISearchBar alloc]initWithFrame:CGRectMake(0, 0, 320, 44)];
self.tableView.tableHeaderView = searchBar; 
```

表格视图中数据的存在与否应该没有任何区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:46:06.740

Go it working:

```
_recipeList = [[RecipeViewController alloc] initWithStyle:UITableViewStylePlain];

//Create a frame for the current table view controller
CGRect frame = _recipeList.view.frame;
frame.origin.x = 0;
frame.origin.y = 57;
_recipeList.view.frame = frame;

[self.view addSubview:_recipeList.view]; 
```

# android - 在 Android 项目中使用 echonest api jEN

> ID：15979459
> 
> 赞同：0
> 
> 时间：2013-04-12T19:32:02.820
> 
> 标签：android, api

我正在尝试将 jEN 库用于我拥有的一个小项目。我是 android 开发的新手，所以这可能是我错过的一些愚蠢的东西，但我已经用谷歌搜索了，还没有弄清楚问题是什么。

我已将 jEN 和 json_simple jar 添加到我的构建路径中，它们在我的 android 项目的引用库中可见。一切似乎都可以正常编译，但是在模拟器上运行应用程序时，我得到了

> 安装错误：INSTALL_FAILED_MISSING_SHARED_LIBRARY

logcat 没有输出。我已经在清单中添加了 uses-library 标记，但我不清楚这是否真的有必要？无论哪种方式，我都无法在没有遇到这个问题的情况下运行。这发生在任何人身上吗？有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:39:16.403

事实证明，删除 uses-library 标签解决了这个问题。就像我提到的那样，我一开始就不确定是否有必要。有趣的是，我以为我曾尝试在清单文件中没有标签的情况下运行我的应用程序，但我想我没有......

# c# - Linq 按日期分组（月）

> ID：15979462
> 
> 赞同：4
> 
> 时间：2013-04-12T19:32:08.370
> 
> 标签：c#, linq, lambda, sum, linq-group

我想知道如何按月对一些数据进行分组并对一个字段求​​和。例如，我有一个`MyObjects(DateTimeField, AmountField)`. 我想按月分组`DateTimeField`，但不是整个日期，然后`AmountField`按月汇总。

我不知道为什么`objectgrouped`是空的？

```
 IEnumerable<MyObject> objectList= GetMyObject();

    var ObjectGrouped = objectList.GroupBy(l => l.ObjectDate.GetValueOrDefault().Month)
                          .Select(lg =>
                                new
                                {
                                    CurrentMonth = lg.Key,
                                    Total = lg.Sum(w => w.ObjectAmount)
                                });

ObjectDate      ObjectAmount

1/1/2013              3.3
3/1/2013              6.9
13/2/2013            5
3/4/2013              3.6
13/4/2013            15.2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T19:48:42.030

~~我假设“月”是指“月和年”：~~

要忽略空值：

```
var query = myList.Where(i => i.DateTimeField.HasValue)
                  .GroupBy(i => i.DateTimeField.Value.Month)
                  .Select(g => new {
                            Month=g.Key,
                            Total=g.Sum(i=>i.AmountField) 
                         }); 
```

将空值放入单独的存储桶（“0”月）：

```
var query = myList.GroupBy(i => i.DateTimeField.HasValue ? i.DateTimeField.Value.Month : 0)
                  .Select(g => new {
                            Month=g.Key,
                            Total=g.Sum(i=>i.AmountField) 
                         }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:34:04.923

尝试这个：

```
List<DateTime> list = new List<DateTime>();
var grouppedResult = list.GroupBy(x => x.Month); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T19:44:14.767

```
var groups = list.GroupBy(l => l.DateTimeField.Year * 12 + l.DateTimeField.Month)
                .Select(g => new {
                                Month=g.First().DateTimeField,
                                Sum=g.Select(a=>a.AmountField).Sum() 
                             })
                .ToList(); 
```

# java - 为什么这个java代码给出不同的答案？

> ID：15979465
> 
> 赞同：-3
> 
> 时间：2013-04-12T19:32:17.980
> 
> 标签：java, string

为什么下面的 java 代码给出的答案是：

不等于
等于。

代码：

```
 String a=new String("abc");
    String b=new String("abc");
    String c="abc";
    String d="abc";

    if(a==b){
        System.out.println("equal");
    }else{
        System.out.println("not equal");
    }

    if(c==d){
        System.out.println("equal");
    }else{
        System.out.println("not equal");
    } 
```

我对这两种陈述的方式感到困惑

```
 String a=new String("abc");
        String c="abc"; 
```

有什么不同？
简而言之，这两个作业有什么区别？
任何帮助将不胜感激。
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:34:53.887

当您使用字符串文字*直接*初始化字符串变量时，Java 将[实习 Java 文字 string](http://javatechniques.com/blog/string-equality-and-interning/)，以便两个字符串变量引用相同的实际字符串对象。

使用`new`运算符时，即使新字符串的内容与字符串文字相同，也会得到不同的对象。

并且正如已经多次指出的那样，`==`运算符比较对象引用以查看它们是否指向同一个对象，而不是比较字符串内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:33:12.420

不要`==`用来比较字符串；使用`equals()`方法。

```
if(a.equals(b)) {
    System.out.println("equal");
}else{
    System.out.println("not equal");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T19:34:27.813

分配字符串文字将利用字符串池（因此使用相等引用），`new`String 将始终创建一个新实例，从而产生不同的对象。

# java - ProcessBuilder 在使用多个参数时表现不佳

> ID：15979476
> 
> 赞同：7
> 
> 时间：2013-04-12T19:32:42.653
> 
> 标签：java, command, processbuilder

我有一个 ProcessBuilder：

```
String src = c:/hello/
String dst = c:/hello/2

ProcessBuilder builder = null;
builder = new ProcessBuilder("c:/file/file.exe", "-i", src, "-f", "-l 500", dst);
builder.redirectErrorStream(true);
process = builder.start(); 
```

问题是，只要我添加`"-l 500"`我就会得到输出：

> “l 500” 无效命令

即使我输入了`"-l 500"`而不是`"l 500"`. 如果我输入`"--l 500"`我得到：

> “-l 500” 无效命令

即使`-l 500`在命令提示符下运行它时是一个有效的命令。

如果我删除`"-l 500"`它再次工作。

我使用 Processbuilder 错了吗？

**编辑：**

好的，如果我将“-l”和“500”作为单独的条目执行，似乎它可以工作，如下所示：

```
new ProcessBuilder("c:/file/file.exe", "-i", src, "-f", "-l", "500", dst); 
```

为什么会这样？我不能有一个带有空格的命令作为同一个条目吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T19:54:53.383

当您在命令提示符下运行它时，您不会将`-l 500`引号括起来，因此它们被视为两个不同的参数。在命令行输入：

> file.exe -i some_source -f "-l 500" some_dest

我希望您会看到与错误使用时相同的错误消息`ProcessBuilder`。该`file.exe`程序必须解析命令行，搜索带有前导`-`字符的字符串。当它找到单个字符串`"-l 500"`时，它会删除`-`并且不识别`l 500`为有效参数。

to 的参数`ProcessBuilder`类似于命令行中的引用参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-21T18:29:07.393

我在使用 ffmpeg 命令时遇到了同样的问题，其中我有许多带有值的参数。我最终创建了一个 ArrayList 并将每个项目逐个添加到列表中。这是一个例子：

```
List<String> command = new ArrayList<>();
command.add(ffmpegCommand);
command.add("-re");
command.add("-i");
command.add(videoFile);
command.add("-vcodec");
command.add("libx264");
command.add("-vcodec");
command.add("libx264");
command.add("-vb");
command.add("500000");
command.add("-g");
command.add("60");
command.add("-vprofile");
command.add("main");
command.add("-acodec");
command.add("aac");
command.add("-ab");
command.add("128000");
command.add("-ar");
command.add("48000");
command.add("-ac");
command.add("2");
command.add("-vbsf");
command.add("h264_mp4toannexb");
command.add("-strict");
command.add("experimental");
command.add("-f");
command.add("mpegts");
command.add("udp://127.0.0.1:10000?pkt_size=1316");

ProcessBuilder pb = new ProcessBuilder(command);
pb.redirectErrorStream(true);
Process process;
try {
  process = pb.start();
  process.waitFor();
  if (process.exitValue() == 0) {
    // success
  } else {
    // failure
  }
} catch (IOException | InterruptedException e) {
  // handle exception
} 
```

where`ffmpegCommand`是命令`videoFile`的完整路径，是视频的完整路径。这是我能够让命令成功运行的唯一方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-11T19:55:18.913

我认为 ProcessBuilder 的目的是提供帮助，但它并不直观，并且[缺乏](https://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)有关其行为方式的文档。无论如何，其他人的回答都是正确的，在这里我只是粘贴了一段关于如何使用它的小代码，而无需费力。

```
String command = String.format("c:/file/file.exe -i %s -f -l 500 %s", src, dst);

ProcessBuilder ps = new ProcessBuilder(command.split(" ")); 
```

是的，像往常一样编写命令，然后使用`split`接收字符串列表的构造函数。

# linux - 从 makefile 执行复杂的 shell 命令

> ID：15979487
> 
> 赞同：2
> 
> 时间：2013-04-12T19:33:19.620
> 
> 标签：linux, makefile, gnu-make

我有以下在 Linux 命令提示符下工作的命令行：

```
vi /tmp/test.txt -s <( echo ":1 s/^\/\/ VERSION: .*$/\/\/VERSION: $(date)/g" ) 
```

它创建一个包含以下`vim`命令的临时文件（使用 Process Substitution）：

```
:1 s/^\/\/ VERSION: .*$/\/\/ VERSION: $(date)/g 
```

它打开文件`/tmp/test.txt`进行编辑并从先前创建的临时文件中执行命令。它找到第 1 行并用当前时间戳替换该行。它看起来有点像这样：

```
// VERSION: Fri Apr 12 21:20:03 CEST 2013
...
... 
```

接下来我可以进行任何需要的编辑，只有当我决定保存文件时，所有更改才会提交到磁盘。首先更改磁盘上的文件，然后启动编辑器不是一个选项，因为文件将具有不同的时间戳，而内容本身没有更改。

到目前为止，它按设计/预期工作。

现在我试图将这个 vi 命令行移动到一个 make 文件中，这就是我失败的地方。我尝试了一个`$(shell .....)`构造，但是 make 向我抛出了错误。

```
edit:
        $(shell vi $(src).cpp -s <( echo ":1 s/^\/\/ VERSION: .*$/\/\/VERSION: $(date)/g" ) 
```

我试图弄清楚 Makefile 中的行应该如何读取额外的引号和括号，但我还没有解决它。

我正在运行 Ubuntu Linux 12.10 和 GNU Make 3.81

### `vi project.cpp -s <( echo ":1 s/^\/\/ VERSION: .*$/\/\/VERSION: $(date)/g" )`

Make 似乎不喜欢“过程替换”结构`<( command )`。我不想使用额外的（真实）文件。

```
€ make edit
vi project.cpp -s <( echo ":1 s/^\/\/ VERSION: .*$/\/\/VERSION: $(date)/g" )
/bin/sh: 1: Syntax error: "(" unexpected
make: *** [edit] Error 2 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T19:45:30.270

在制作配方中使用`$(shell ...)`实际上是不正确的。你已经在 shell 中了……只需直接输入你想要的命令。尝试使用 make`$(shell ...)`函数只会增加混乱。你将不得不`$`通过写作来逃避`$$`。

您还有另一个问题：总是使用 bash 特定的构造 ( )`make`调用它的脚本。`/bin/sh``<(...)`

当然，更大的问题是您为什么要使用可视化编辑器 vi 来进行这样的自动更改，而不是`sed`专门为它设计的。我会将其重写为：

```
edit:
        sed -i "1 s,^// VERSION: .*,// VERSION: $$(date)," $(src).cpp 
```

如果您真的想使用 vi，则必须执行以下操作：

```
SHELL := /bin/bash

edit:
        vi '$(src).cpp' -s <( echo ":1 s/^\/\/ VERSION: .*$$/\/\/VERSION: $$(date)/g" ) 
```

# ruby-on-rails - 给一个haml链接一个id

> ID：15979489
> 
> 赞同：1
> 
> 时间：2013-04-12T19:33:30.890
> 
> 标签：ruby-on-rails, haml

我有以下代码，但是如何设置它以使链接具有 *"title_header"* 的 id 标签，如下所示

```
<a href="/movies?sort=title" id="title_header">Movie Title</a>
%th{:class => @title_header}= link_to 'Movie Title', :sort => "title" 
```

我试过了，但没有用

```
%th{:class => @title_header}= link_to 'Movie Title', :sort => "title", :id => "title_header" 
```

它给了我这个

```
<a href="/movies?id=title_header&amp;sort=title">Movie Title</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:00:27.443

为什么不使用哈希 (#) 来设置 Id？

```
%th{:class => @title_header}
%a#title_header{:href => "/movies?sort=title"} Movie Title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T23:57:40.547

你的第二个例子很接近：

```
 %th{:class => @title_header}= link_to 'Movie Title', :sort => "title",
      :id => "title_header" 
```

应该：

```
 %th{:class => @title_header}= link_to "Movie Title",
      movies_path({:sort => 'title'}), {:id => 'title_header'} 
```

指定 URL 时不要使用文字（如您接受的答案所示）；当应用程序稍后更改时，您只是在为自己创建工作。

# macos - OpenGL 应用程序在我的 Mac 上失败，在 virtualbox 上运行

> ID：15979491
> 
> 赞同：2
> 
> 时间：2013-04-12T19:33:39.493
> 
> 标签：macos, opengl, ssh, x11, kivy

我有一台装有 AMD Radeon 显卡和山狮 10.8.3 的 macbook pro。

我正在尝试使用我的 mac 中的 ssh 访问驻留在 ubuntu 12.04.1 机器上的 OpenGL 应用程序（在 python 上使用 kivy 制作）。应用程序退出说运行应用程序所需的最低 OpenGL 版本是 2.0（它检测到的版本是 1.4）。

但是，我可以在 ubuntu 机器本身上运行该应用程序，也可以在我的 mac 上安装的虚拟机上使用 ssh 并启用 X11。

是否有一些 X11 配置选项我在我的 Mac 上的某个地方丢失了在使用 ssh 时将最低 OpenGL 版本更改为 2.0 而不是 1.4？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T07:37:44.167

如果您在 Mac 上使用 XQuartz 作为 X 服务器，我认为您不走运，至少对于从远程计算机运行应用程序而言。看来（通过使用`glxinfo`）对于基于 GLX 的*间接*渲染，支持的 OpenGL 如您所说：1.4。如果您正在执行基于 GLX 的*直接*渲染，那么 XQuartz 似乎公开了 2.1 版。

通过 X 服务器公开的 OpenGL 版本在 X 服务器的 GLX 实现中是硬编码的，所以你真的不能只配置一个新版本。它在您的 Ubuntu 系统上运行的可能原因是您获得了直接渲染支持，而您无法通过 ssh 访问其他机器。虚拟盒子一有点令人困惑，但似乎它们有 X 服务器（在虚拟盒子中）链接到本机 X 服务器，允许直接渲染，因此能够运行。您可以通过运行`glxinfo`命令并检查它为**直接渲染**报告的内容来检查设置：

```
% glxinfo | grep direct
directing rendering: Yes 
```

这表明 X 客户端直接与 OpenGL 对话。将其与以下内容进行比较：

```
% glxinfo | grep direct
direct rendering: No (If you want to find out why, try setting LIBGL_DEBUG=verbose) 
```

这意味着所有 OpenGL 命令都发送到远程 X 服务器，该服务器代表应用程序与本地 OpenGL 实现通信，但不等同于直接渲染。

如果您可以将应用程序移植到可以通过 X 服务器直接渲染的 Mac（可能使用[MacPorts](http://www.macports.org)或类似工具），您将获得 OpenGL 2.1，并且该应用程序应该可以工作。

# swing - 在 SQL 查询中使用文本框值作为“Where”子句

> ID：15979492
> 
> 赞同：0
> 
> 时间：2013-04-12T19:33:41.623
> 
> 标签：swing, javadb

我正在为一个项目使用 javadb(netbeans)，我是一个完全的初学者。

我有一个小型应用程序，它搜索地址数据库并返回结果数据网格。

用户将全部或部分街道名称输入到 jtextfield 中，点击搜索按钮，然后在数据网格中过滤记录。

我正在编写运行良好的简单 sql 查询，但我正在努力指出 where 子句必须是 jtextfield 文本。例如，我需要做的是以下几点：

```
SELECT * FROM tbl_addresses WHERE Street_Name = jTextfield.getstring() 
```

但显然这是行不通的。我还需要确保它可以作为通配符查询。

有人可以帮忙吗？？请？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:11:13.910

你使用了错误的方法。您必须使用 jTextField.getText () 而不是 jTextField.getString ()

# android - Spinner 在 OnClick 内返回 NullPointerException

> ID：15979505
> 
> 赞同：1
> 
> 时间：2013-04-12T19:34:15.860
> 
> 标签：android

我有一个由字符串数组中的值填充的微调器。我可以通过 LogCat 从微调器完美地获取值，但是当我尝试在包含 onClick 方法的内部类中获取值时，LogCat 不显示该值或任何消息。我正在尝试将微调器中的值添加到我的助手中，但它返回 NullPointerException。我不太清楚为什么，我提供了一个 LogCat 屏幕截图和我在下面使用的代码。非常感谢所有帮助！

**截屏：** ![在此处输入图像描述](https://i.stack.imgur.com/CEefj.png)

```
package com.example.weatherapplication;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.Toast;

public class AddCity extends Activity {
EditText name, country;
Button add;
String textSpin;
Spinner sp;

// ISOCodes - this took forever!
String[] ISOCODES = new String[] { "GB", "US" };

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.addcity);

    name = (EditText) findViewById(R.id.name);
    add = (Button) findViewById(R.id.add);
    sp = (Spinner) findViewById(R.id.countryList);

    // populate spinner with ISOCODES
    sp.setAdapter(new ArrayAdapter<String>(this,
             android.R.layout.simple_spinner_item, ISOCODES));

    textSpin = sp.getSelectedItem().toString();

    add.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (name.getText().toString().matches("") || country.getText().toString().matches("")) {
                Toast.makeText(AddCity.this , "Field can't be empty" , Toast.LENGTH_SHORT).show();
            } else {
                DataBaseHelper helper = new DataBaseHelper(AddCity.this);
                helper.openDataBase();
                Log.w("Spinner value two:", textSpin);
                helper.insert(name.getText().toString(), textSpin, R.drawable.red_bg);
                helper.close();
                finish();
            }
        }
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:37:01.253

你需要初始化`country`

```
name = (EditText) findViewById(R.id.name);
add = (Button) findViewById(R.id.add);
sp = (Spinner) findViewById(R.id.countryList);
country = (/* Appropriate Cast */)findViewById(/* Appropriate resource ID */) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:42:42.570

1）检查是否已正确初始化`name`和`country`字段

2）以这种方式检查它们是否为空：

```
if (TextUtils.isEmpty(name.getText().toString()) || TextUtils.isEmpty(country.getText().toString()) {
    Toast.makeText(AddCity.this , "Field can't be empty" , Toast.LENGTH_SHORT).show();
} 
```

您检查的方式`.matches()`可能会导致`NullPointerException`它们为空。

# mysql - 是否可以将表中的每条记录与查询中其他记录的平均值进行比较

> ID：15979511
> 
> 赞同：3
> 
> 时间：2013-04-12T19:34:34.673
> 
> 标签：mysql, sql

对于 MySQL 中的表，我有两列

```
col1   col2
  1     4.5
  1     4.8
  1     4.4
  1     3.9
  1     7.6
  1     4.5
  2     2.9
  2     4.8
  2     5.6
  2     4.5
  3     8.9
  3     9.7
  3     7.8
  3     8.2
  3     4.3 
```

我想做的是

1.  计算 col1 的不同值的 col2 的平均值，这很容易

SELECT col1,AVG(col2) FROM mytable GROUP BY col1

```
1   4.95
2   4.45
3   7.78 
```

2\. 如果 col2 值小于 col2 值的平均值，则选择该记录，其中 col1 等于 col1-1。我无法弄清楚这部分：

```
 SELECT col1,col2 FROM mytable WHERE col2<AVG(col2 where col1= current col1-1) 
```

结果集应该是：

```
2   2.9
2   4.8
2   4.5
3   4.3 
```

由于没有 col1=0 的记录，所以 col1=1 将没有记录

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:37:15.420

尝试这个：

```
SELECT t1.*
FROM @yourtable AS t1
INNER JOIN
(
   SELECT col1, AVG(col2) col2avg
   FROM @yourtable
   GROUP BY col1
) AS t2  ON t1.col1 - 1 = t2.col1
        AND t1.col2 < t2.col2avg; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:48:00.870

拥有子句和自连接允许您执行此操作

```
Select a.col1, a.col2, 
   Avg(b.Col2) AvgCol2
From yourTable a
   Join yourTable b 
       On b.col1 = a.col1 - 1     
Group By a.col1, a.col2
Having a.col2 < Avg(b.Col2) 
```

对于您的示例数据，例如，它返回

```
col1     col2     AvgCol2
-------- -------- --------
2        2.9      4.95
3        4.3      4.45
2        4.5      4.95
2        4.8      4.95 
```

说明：考虑这一点的一种方法是，`Having`用于过滤在 Group By 查询中聚合之后构造的结果集的子句，而`Where`子句是在聚合之前（或在非 Group By 查询中排序之前）构造的临时结果集的过滤器。

# android - ViewPagerIndicator 工作，但不移动

> ID：15979517
> 
> 赞同：2
> 
> 时间：2013-04-12T19:34:56.743
> 
> 标签：android, viewpagerindicator

我在我的项目中使用库“ViewPagerIndicator”。

我在xml中有ViewPager和ViewPagerIndicator，好吧。

我的问题是我无法编写正确的适配器来工作。我已经将它与 Jake Warton 在他的示例中使用的适配器进行了比较，但无法使其正常工作 ViewPager 工作正常，屏幕上看到的 ViewPagerIndicator ......但没有移动。

如果脉冲，例如，在 viewpagerindicator 的第二个项目上，移动 viewpager ...但从不移动 viewpagerindicator

![在此处输入图像描述](https://i.stack.imgur.com/qbezj.png)

这是主要的活动代码：

```
//...
        pager = (ViewPager) findViewById(R.id.pager);

        ViewPagerAdapter adapterViewPager = new ViewPagerAdapter(getSupportFragmentManager());
        adapterViewPager.addFragment(new FRG_home());
        adapterViewPager.addFragment(new Fragment_One());
        adapterViewPager.addFragment(new Fragment_Two());
        adapterViewPager.addFragment(new Fragment_Three());

        pager.setOffscreenPageLimit(5);
        pager.setAdapter(adapterViewPager);

        PageIndicator mIndicator = (TitlePageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(pager);

//... 
```

这是 Jake Wharton 示例中使用的适配器代码：

```
class TestFragmentAdapter extends FragmentPagerAdapter implements IconPagerAdapter {
    protected static final String[] CONTENT = new String[] { "This", "Is", "A", "Test", };
    protected static final int[] ICONS = new int[] {
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher,
            R.drawable.ic_launcher
    };

    private int mCount = CONTENT.length;

    public TestFragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return TestFragment.newInstance(CONTENT[position % CONTENT.length]);
    }

    @Override
    public int getCount() {
        return mCount;
    }

    @Override
    public CharSequence getPageTitle(int position) {
      return TestFragmentAdapter.CONTENT[position % CONTENT.length];
    }

    public int getIconResId(int index) {
      return ICONS[index % ICONS.length];
    }

    public void setCount(int count) {
        if (count > 0 && count <= 10) {
            mCount = count;
            notifyDataSetChanged();
        }
    }
} 
```

我想使用从主要活动中添加 ViewPager 的片段：

```
adapterViewPager.addFragment(new FRG_home());
            adapterViewPager.addFragment(new Fragment_One());
            adapterViewPager.addFragment(new Fragment_Two());
            adapterViewPager.addFragment(new Fragment_Three()); 
```

这是我的适配器：

```
public class ViewPagerAdapter extends FragmentPagerAdapter{

    List<Fragment> fragments = null;
    protected static final String[] CONTENT = new String[] { "This", "Is","a","Test", };

    protected static final int[] ICONS = new int[] {
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher
    };
    private int mCount = CONTENT.length;

    public ViewPagerAdapter(FragmentManager fm) {
        super(fm);
        fragments = new ArrayList<Fragment>();
    }
    public void addFragment(Fragment fragment){
        fragments.add(fragment);
    }
    @Override
    public Fragment getItem(int arg0) {
        return fragments.get(arg0);
    }
    @Override
    public int getCount() {
        return fragments.size();
    }
    @Override
    public CharSequence getPageTitle(int position) {
        return ViewPagerAdapter.CONTENT[position % CONTENT.length];
    }
} 
```

我尝试了将近两天，但我无法创建正确的适配器来移动 ViewPagerIndicator

感谢您的帮助，在此先感谢

问候。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-12T19:55:52.670

你有没有机会设置`OnPageChangeListener`一个`ViewPager`？如果是这样，您不应该将您的设置`OnPageChangeListener`为`ViewPager`，而是设置为指标本身。

# regex - 检测 Lua 中最后一个字符是否不是多字节

> ID：15979519
> 
> 赞同：4
> 
> 时间：2013-04-12T19:34:57.333
> 
> 标签：regex, lua, coronasdk, multibyte

第一个问题。Lua中确定字符串中的最后一个字符是否不是多字节的最简单方法是什么。或者从字符串中删除最后一个字符的最简单方法是什么。

以下是有效字符串的示例，以及我希望函数的输出是什么

```
hello there     --- result should be:   hello ther
anñ             --- result should be:   an
כראע            --- result should be:   כרא
ㅎㄹㅇㅇㅅ       --- result should be:   ㅎㄹㅇㅇ 
```

我需要类似的东西

```
function lastCharacter(string)
    --- some code which will extract the last character only ---
    return lastChar
end 
```

或者如果它更容易

```
function deleteLastCharacter(string)
--- some code which will output the string minus the last character --- 
    return newString
end 
```

这就是我要走的路

```
local function lastChar(string)
    local stringLength = string.len(string)
    local lastc = string.sub(string,stringLength,stringLength)
    if lastc is a multibyte character then
        local wordTable = {}
        for word in string:gmatch("[\33-\127\192-\255]+[\128-\191]*") do
            wordTable[#wordTable+1] = word
        end
    lastc = wordTable[#wordTable]
end
    return lastc
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T20:56:17.990

首先，请注意 Lua 的`string`库中没有任何函数了解 Unicode/多字节编码（来源：Lua 编程，第 3 版）。就 Lua 而言，字符串只是由字节组成。如果您使用的是 UTF-8 编码字符串，则由您决定哪些字节构成一个字符。因此，`string.len`会给你*字节*数，而不是*字符*数。并且`string.sub`会给你一个*字节*子串而不是*字符*子串。

**一些 UTF-8 基础知识：**

如果您需要重新了解 Unicode 的概念基础知识，您应该查看[这篇文章](http://www.joelonsoftware.com/articles/Unicode.html)。

UTF-8 是 Unicode 的一种可能（也是非常重要的）实现 - 并且可能是您正在处理的那个。与 UTF-32 和 UTF-16 不同，它使用可变数量的字节（从 1 到 4）对每个字符进行编码。特别是，ASCII 字符 0 到 127 用单个字节表示，因此可以使用 UTF-8 正确解释 ASCII 字符串（反之亦然，如果您只使用这 128 个字符）。所有其他字符都以 194 到 244 范围内的字节开头（这表示后面有更多字节来编码完整字符）。这个范围被进一步细分，因此您可以从这个字节中看出，后面是 1、2 还是 3 个字节。这些额外的字节称为连续字节，并保证只取自 128 到 191 的范围。因此，

*   如果在 中`[0,127]`，则为单字节 (ASCII) 字符
*   如果它在 中`[128,191]`，则它是较长字符的一部分，并且本身没有意义
*   如果它在 中`[191,244]`，它标志着一个较长字符的开始（并告诉我们该字符有多长）

这些信息足以计算字符数、将 UTF-8 字符串拆分为字符并执行各种其他 UTF-8 敏感操作。

**一些模式匹配基础知识：**

对于手头的任务，我们需要一些 Lua 的模式匹配结构：

`[...]`是一个字符类，它匹配类中的单个字符（或者更确切地说是*byte*）。例如，`[abc]`匹配`a`、 或`b`或`c`。您可以使用连字符定义范围。因此`[\33-\127]`，例如，匹配从`33`到的任何单个字节`127`。请注意，这`\127`是一个转义序列，您可以在*任何*Lua 字符串（不仅仅是模式）中使用它来通过其数值而不是相应的 ASCII 字符来指定一个字节。例如，`"a"`与 相同`"\97"`。

您可以通过以 ( 开头的字符类来否定它，`^`以便它匹配*不*属于该类的任何单个字节。

`*`重复前一个令牌 0 次或更多次（任意多次 - 尽可能频繁）。

`$`是一个锚。如果它是模式的最后一个字符，则模式将只匹配字符串的末尾。

**结合所有这些...**

...您的问题简化为单行：

```
local function lastChar(s)
    return string.match(s, "[^\128-\191][\128-\191]*$")
end 
```

这将匹配不是 UTF-8 连续字符的字符（即，单字节字符或标记较长字符开头的字节）。然后它匹配任意数量的连续字符（由于选择的范围，这不能超过当前字符），然后是字符串的结尾（`$`）。因此，这将为您提供构成字符串中最后一个字符的所有字节。它为您的所有 4 个示例生成所需的输出。

等效地，您可以使用`gsub`从字符串中删除最后一个字符：

```
function deleteLastCharacter(s)
    return string.gsub(s, "[^\128-\191][\128-\191]*$", "")
end 
```

匹配是相同的，但是我们不返回匹配的子字符串，而是将其替换为`""`（即删除它）并返回修改后的字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T21:14:41.120

这是另一种方法；它显示了如何遍历 utf8 中的字符串：

```
function butlast (str)
    local i,j,k = 1,0,-1
    while true do
        s,e = string.find(str,".[\128-\191]*",i)
        if s then
            k = j
            j = e
            i = e + 1
        else break end
    end
    return string.sub(str,1,k)
end 
```

样品用途：

```
> return butlast"כראע"
כרא
> return butlast"ㅎㄹㅇㅇㅅ"
ㅎㄹㅇㅇ
> return butlast"anñ"
an
> return butlast"hello there"
hello ther
> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T21:14:04.817

[在这里](https://stackoverflow.com/questions/13235091/extract-the-first-letter-of-a-utf-8-string-with-lua/13238257#13238257)通过 prapin 的解决方案：

```
function lastCharacter(str)
  return str:match("[%z\1-\127\194-\244][\128-\191]*$")
end 
```

然后您可以获取返回值的长度以查看它是否为多字节；您还可以使用`gsub`以下函数将其从字符串中删除：

```
function deleteLastCharacter(str)
  -- make sure to add "()" around gsub to force it to return only one value
  return(str:gsub("[%z\1-\127\194-\244][\128-\191]*$", ""))
end

for _, str in pairs{"hello there", "anñ", "כראע"} do
  print(str, " -->-- ", deleteLastCharacter(str))
end 
```

请注意，这些模式仅适用于**有效的 UTF-8 字符串**。如果你有一个可能无效的，你可能需要应用[更复杂的逻辑](http://notebook.kulchenko.com/programming/fixing-malformed-utf8-in-lua)。

# r - 分面时间序列数据

> ID：15979531
> 
> 赞同：1
> 
> 时间：2013-04-12T19:35:27.257
> 
> 标签：r, ggplot2

我正在尝试创建两个变量的多面图，km0 的密度和 km22 的 SPL（声压级）。两者的时间戳不匹配，因为测量相距 22 公里。这里的想法是在 km22 处跟踪水批次（密度 ~1），观察 SPL 水平。

[这](https://cidra.sharefile.com/d/sd5aa8d13c314fdca)是我正在使用的数据框。

如您所见，有 5 个变量。这是我在将数据导入 R 之后所拥有的：

```
# Melting the data
mydata2 <- melt(mydata, id = c('TIMESTAMP'))

# Create the faceted plot
ggplot(mydata2, aes(TIMESTAMP, value)) + geom_point() + facet_grid(variable~., scale  = "free_y") 
```

其中绘制了这个：

![在此处输入图像描述](https://i.stack.imgur.com/WeXTC.jpg)

我的问题是：

1.  我只能从原始数据框 (mydata) 中绘制变量 DENSITY 和 SPL 吗？

2.  如果我必须创建一个新的熔融数据框（mydata2），我怎样才能只绘制变量 DENSITY 和 SPL（而不删除其他变量）？

我希望我已经说清楚了，如果没有，请告诉我如何改进我的问题。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:43:18.537

您可以对需要绘制的子集数据使用`subset()`内部调用。`ggplot()`在您的特定情况下：

```
ggplot(data=subset(mydata2,variable %in% c("DENSITY","SPL")), aes(TIMESTAMP, value)) + 
  geom_point() + facet_grid(variable~., scale  = "free_y") 
```

# xml - 混合子元素的 XSLT 排序

> ID：15979533
> 
> 赞同：1
> 
> 时间：2013-04-12T19:35:40.117
> 
> 标签：xml, sorting, xslt

我有以下 XML：

```
<root>
  <nodeLevel1>
    <nodeType1>node type 1</nodeType1>
    <nodeType2><rank>3</rank></nodeType2>
    <nodeType2><rank>1</rank></nodeType2>
    <nodeType2><rank>4</rank></nodeType2>
    <nodeType2><rank>2</rank></nodeType2>
    <nodeType3>node type 3</nodeType3>
  </nodeLevel1>
</root> 
```

我使用以下 XSLT 对该 XML 进行排序：

```
<?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <xsl:output method="xml" version="1.0" encoding="UTF-8" omit-xml-declaration="no" indent="yes" media-type="text/html"/>

      <xsl:template match="node()|@*">
        <xsl:copy>
          <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
      </xsl:template>

      <xsl:template match="nodeLevel1">
          <xsl:copy>
            <xsl:apply-templates select="node()|@*">
              <xsl:sort select="rank" data-type="number" />
            </xsl:apply-templates>
          </xsl:copy>
      </xsl:template>

      </xsl:stylesheet> 
```

结果是：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
  <nodeLevel1>
    <nodeType1>node type 1</nodeType1>
    <nodeType3>node type 3</nodeType3>
    <nodeType2>
        <rank>1</rank>
    </nodeType2>
    <nodeType2>
        <rank>2</rank>
    </nodeType2>
    <nodeType2>
        <rank>3</rank>
    </nodeType2>
    <nodeType2>
        <rank>4</rank>
    </nodeType2>
</nodeLevel1>
</root> 
```

问题是所有“nodeType2”都不在我的 XML 中的正确位置。如何在“nodeType2”之前保留节点“nodeType1”，在“nodeType2”之后保留节点“nodeType3”。（解决方案不能使用元素名称“nodeType1”或“nodeType3”，因为它可以重命名为任何名称）

所以，结果应该是：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
  <nodeLevel1>
    <nodeType1>node type 1</nodeType1>
    <nodeType2>
        <rank>1</rank>
    </nodeType2>
    <nodeType2>
        <rank>2</rank>
    </nodeType2>
    <nodeType2>
        <rank>3</rank>
    </nodeType2>
    <nodeType2>
        <rank>4</rank>
    </nodeType2>
    <nodeType3>node type 3</nodeType3>
</nodeLevel1>
</root> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:16:08.170

**此转换适用于任何元素名称（没有名称是硬编码的）并且效率很高，因为它使用键来识别组**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:key name="kSameNamed" match="nodeLevel1/*" use=
  "generate-id(preceding-sibling::*[not(name()=name(current()))][1])"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="nodeLevel1">
  <nodeLevel1>
   <xsl:apply-templates select=
   "*[not(name() = name(preceding-sibling::*[1]))]"/>
  </nodeLevel1>
 </xsl:template>

 <xsl:template match="nodeLevel1/*">
  <xsl:for-each select="key('kSameNamed', generate-id(preceding-sibling::*[1]))">
   <xsl:sort select="rank" data-type="number"/>
   <xsl:copy-of select="."/>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
  <nodeLevel1>
    <nodeType1>node type 1</nodeType1>
    <nodeType2><rank>3</rank></nodeType2>
    <nodeType2><rank>1</rank></nodeType2>
    <nodeType2><rank>4</rank></nodeType2>
    <nodeType2><rank>2</rank></nodeType2>
    <nodeType3>node type 3</nodeType3>
  </nodeLevel1>
</root> 
```

**产生了想要的正确结果：**

```
<root>
   <nodeLevel1>
      <nodeType1>node type 1</nodeType1>
      <nodeType2>
         <rank>1</rank>
      </nodeType2>
      <nodeType2>
         <rank>2</rank>
      </nodeType2>
      <nodeType2>
         <rank>3</rank>
      </nodeType2>
      <nodeType2>
         <rank>4</rank>
      </nodeType2>
      <nodeType3>node type 3</nodeType3>
   </nodeLevel1>
</root> 
```

**如果我们现在将相同的转换应用于完全不同的 XML 文档：**

```
<r>
  <nodeLevel1>
    <X1>node type 1</X1>
    <Y2><rank>3</rank></Y2>
    <Y2><rank>1</rank></Y2>
    <Y2><rank>4</rank></Y2>
    <Y2><rank>2</rank></Y2>
    <Z3>node type 3</Z3>
    <A4><rank>8</rank></A4>
    <A4><rank>2</rank></A4>
    <A4><rank>9</rank></A4>
    <A4><rank>3</rank></A4>
    <B5><rank>8</rank></B5>
    <B5><rank>2</rank></B5>
    <B5><rank>9</rank></B5>
    <B5><rank>3</rank></B5>
    <C7>Node of Type C7</C7>
  </nodeLevel1>
</r> 
```

**我们再次得到正确的结果：**

```
<r>
   <nodeLevel1>
      <X1>node type 1</X1>
      <Y2>
         <rank>1</rank>
      </Y2>
      <Y2>
         <rank>2</rank>
      </Y2>
      <Y2>
         <rank>3</rank>
      </Y2>
      <Y2>
         <rank>4</rank>
      </Y2>
      <Z3>node type 3</Z3>
      <A4>
         <rank>2</rank>
      </A4>
      <A4>
         <rank>3</rank>
      </A4>
      <A4>
         <rank>8</rank>
      </A4>
      <A4>
         <rank>9</rank>
      </A4>
      <B5>
         <rank>2</rank>
      </B5>
      <B5>
         <rank>3</rank>
      </B5>
      <B5>
         <rank>8</rank>
      </B5>
      <B5>
         <rank>9</rank>
      </B5>
      <C7>Node of Type C7</C7>
   </nodeLevel1>
</r> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:03:00.547

一种方法是使用与第一个**nodeType2**元素匹配的模板

```
<xsl:template match="nodeType2[1]"> 
```

在此，您选择并排序所有 nodeType2 元素

```
<xsl:for-each select="self::*|following-sibling::nodeType2">
   <xsl:sort select="rank" data-type="number" />
    <!-- Copy element -->
    <xsl:call-template name="identity" />
 </xsl:for-each> 
```

您唯一需要的另一件事是另一个模板来阻止其他**nodeType2**元素被输出两次

```
<xsl:template match="nodeType2" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <xsl:output method="xml" version="1.0" encoding="UTF-8" omit-xml-declaration="no" indent="yes" media-type="text/html"/>

      <xsl:template match="node()|@*" name="identity">
        <xsl:copy>
          <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
      </xsl:template>

      <xsl:template match="nodeType2[1]">
          <xsl:for-each select="self::*|following-sibling::nodeType2">
              <xsl:sort select="rank" data-type="number" />
              <xsl:call-template name="identity" />
            </xsl:for-each>
      </xsl:template>

       <xsl:template match="nodeType2" />
 </xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<root>
   <nodeLevel1>
      <nodeType1>node type 1</nodeType1>
      <nodeType2>
         <rank>1</rank>
      </nodeType2>
      <nodeType2>
         <rank>2</rank>
      </nodeType2>
      <nodeType2>
         <rank>3</rank>
      </nodeType2>
      <nodeType2>
         <rank>4</rank>
      </nodeType2>
      <nodeType3>node type 3</nodeType3>
   </nodeLevel1>
</root> 
```

# api - 动态嵌入 Twitter 时间线 (API V 1.1)

> ID：15979541
> 
> 赞同：5
> 
> 时间：2013-04-12T19:36:09.620
> 
> 标签：api, twitter

Twitter 的新嵌入式时间线似乎不允许动态创建嵌入式时间线。

这是他们网站上的部分： [https ://dev.twitter.com/docs/embedded-timelines](https://dev.twitter.com/docs/embedded-timelines)

在旧版本的 API 中，可以动态切换小部件中的用户名，但新 API 会强制您将完整的小部件存储在其服务器上并通过小部件 ID 进行访问。有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:49:39.110

不：（不幸的是，Twitter 将所有小部件（嵌入的时间线是小部件）与它们`id`的 s 匹配。因此，它会识别您的时间线小部件`id`并显示您的时间线，因此您不能简单地更改它查询的 Twitter 句柄。

以下是您的选择：

1.  创建多个小部件并根据某些事件显示/隐藏它们
2.  使用 AJAX 并查询服务器端脚本以获取用户的时间线。

为了获得最大的灵活性，第二种选择可能是您的最佳途径。如果您使用的是 PHP 或 .NET，我可以为您提供帮助，因此请告诉我您是否（以及哪一个）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T14:59:22.987

这对于使用新的 Twitter API 1.1 的 Timeline 非常有效

[1) 在http://twitter4j.org/en/](http://twitter4j.org/en/)中下载 twitter4j-core-3.0.3.jar 2) 尝试使用以下代码：

```
private static final String TWITTER_CONSUMER_KEY = "xxxxxxxxxxxxxxxxxx";
private static final String TWITTER_SECRET_KEY = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
private static final String TWITTER_ACCESS_TOKEN = "xxxxxxxxxxxxxxxxxxxxxxx";
private static final String TWITTER_ACCESS_TOKEN_SECRET = "xxxxxxxxxxxxxxxxxxxxxxxxx";

ConfigurationBuilder cb = new ConfigurationBuilder();
cb.setDebugEnabled(true)
    .setOAuthConsumerKey(TWITTER_CONSUMER_KEY)
    .setOAuthConsumerSecret(TWITTER_SECRET_KEY)
    .setOAuthAccessToken(TWITTER_ACCESS_TOKEN)
    .setOAuthAccessTokenSecret(TWITTER_ACCESS_TOKEN_SECRET);
TwitterFactory tf = new TwitterFactory(cb.build());
Twitter twitter = tf.getInstance();
try {
    Query query = new Query("MrEdPanama");
    QueryResult result;
    do {
        result = twitter.search(query);
        List<Status> tweets = result.getTweets();
        for (Status tweet : tweets) {
            System.out.println("@" + tweet.getUser().getScreenName() + " - " + tweet.getText());
        }
    } while ((query = result.nextQuery()) != null);
    System.exit(0);
} catch (TwitterException te) {
    te.printStackTrace();
    System.out.println("Failed to search tweets: " + te.getMessage());
    System.exit(-1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-16T18:46:40.640

我意识到这个问题是几个月前提出的，但实际上可以通过在 URL 中添加“data-”标签来轻松实现。

检查 Twitter 页面以自定义嵌入式时间线： [https ://dev.twitter.com/docs/embedded-timelines#customization](https://dev.twitter.com/docs/embedded-timelines#customization)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-14T19:03:24.587

我最终也采用了这种方法。这个例子非常适合学习如何使用 scala： http: [//bcomposes.wordpress.com/2013/02/09/using-twitter4j-with-scala-to-access-streaming-tweets/](http://bcomposes.wordpress.com/2013/02/09/using-twitter4j-with-scala-to-access-streaming-tweets/)

基本上，通过创建一个 twitter oauth 应用程序并使用 twitter4j，我们创建了一个客户端并使用 javascript 对其进行样式设置。我们使用带有 javascript 的正则表达式来制作链接和用户名超链接。

# python - 使用 Python 验证 PKCS#7 签名文件的签名

> ID：15979542
> 
> 赞同：1
> 
> 时间：2013-04-12T19:36:16.583
> 
> 标签：python, linux, openssl, pkcs#7

在 Linux 上，我需要验证 PKCS#7 签名文件的签名并使用 Python 及其标准库检索其原始内容。

目前，我可以使用 OpenSSL 终端实用程序验证此文件的内容（并检索其实际内容），如下所示：

```
openssl smime -verify -in myfile.xml -inform DER -noverify 
```

我从朋友那里收到了这个命令。我不太了解选项和指令。有没有办法在不使用任何 3rd 方库的情况下使用 Python 做到这一点？

提前致谢。

# java - 确保在线程中的 notify() 之前调用 wait()，这可能吗？

> ID：15979547
> 
> 赞同：0
> 
> 时间：2013-04-12T19:36:35.003
> 
> 标签：java, thread-safety, race-condition

当我遇到使用等待/通知方法的示例时，我正在查看 Kathy Sierra 书中的线程章节：

```
 class ThreadA {
 public static void main(String [] args) {
 ThreadB b = new ThreadB();
 b.start();

 synchronized(b) {
 try {
    System.out.println("Waiting for b to complete...");
    b.wait();
     } catch (InterruptedException e) {}
 System.out.println("Total is: " + b.total);
 }
}
}

class ThreadB extends Thread { 
 int total;
 public void run() {
  synchronized(this) {
   for(int i=0;i<100;i++) {
   total += i;
   }
  notify();
 }
}
} 
```

运行代码总是产生相同的输出：

> 等待 b 完成...总计：4950

我通过添加以下内容修改了 ThreadB 中 run() 的同步块：

```
System.out.println("ThreadB is executed"); 
```

问题是：为什么我不断得到

> “等待b完成……”

前

> “线程B被执行”

? 线程 b 是否有可能在主线程之前执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T19:40:27.310

> 线程 b 是否有可能在主线程之前执行？

是的，一点没错。

通常`wait`伴随一些谓词来防止此类问题。

例如，ThreadB 可以有一个变量表示它已经完成。在您的情况下，您可以检查总计是否不为 0。

```
synchronized (b) {
    try {
        System.out.println("Waiting for b to complete...");
        while (b.total == 0) {
            b.wait();
        }
    } catch (InterruptedException e) {
    }
    System.out.println("Total is: " + b.total);
} 
```

这会在总读取相对于 ThreadB 中的写入创建之前发生的关系。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T19:48:36.020

> 线程 b 是否有可能在主线程之前执行？

是的，这种可能性是存在的，尽管对于像这段代码这样的狭隘种族来说，这种可能性很小。

`b.start()`代码在获取 b 的监视器（同步块）之前调用。主线程有可能在该窗口期间被抢占，并且线程 B 将首先运行并获取该监视器。

在那种情况下，这个程序会挂起，因为主线程将`wait()`永远因为它错过了`notify()`来自线程 B的线程。

# css - 如果嵌套元素，CSS会更改样式

> ID：15979554
> 
> 赞同：0
> 
> 时间：2013-04-12T19:36:59.543
> 
> 标签：css

如果存在嵌套元素，CSS中有没有办法调整父元素的样式？

例如，假设我们有一个在 10px 左右有内边距的按钮。

```
<button>Submit</button> 
```

现在，假设我们为此添加了一个图标：

```
<button><i class="icon"></i> Submit</button> 
```

由于图标的原因，按钮左侧的间距过宽。有没有办法不向按钮添加额外的类，说如果它包含`<i>`，使左边的填充更少？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:38:36.283

唉，你现在不能这样做。建议用于[css4](http://www.w3.org/TR/selectors4/#subject)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:45:14.267

听起来你应该只使用不同的元素来定位。这是没有语义意义的元素`<span>`派上用场的地方：

```
<button><span class="text">Submit</span></button>
<button><i class="icon"></i> <span class="text">Submit</span></button> 
```

如果您使用该 HTML，则可以只`.text`使用`margin`/`padding`来定位。

# jquery - 在锚点上使用 before() 和 after()

> ID：15979564
> 
> 赞同：0
> 
> 时间：2013-04-12T19:37:41.307
> 
> 标签：jquery

我有一张图片

```
<img id="dynamic" src="www.google.com.br" /> 
```

如何使用 jquery 的 before() 和 after() 方法在该 img 中设置锚点？

像这样：

```
$('#dynamic').before('<a href="http://google.com">');
$('#dynamic').after('</a>'); 
```

但是......当我做这样的事情时，jquery会自动添加锚点的关闭标签

```
<a href="http://google.com"></a>
<img id="dynamic" src="www.google.com.br" /> 
```

有什么想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:39:25.040

您不能附加元素的一部分。

```
$('#dynamic').before('<a href="http://google.com">'); 
```

生成一个完整的元素和

```
$('#dynamic').after('</a>'); 
```

生成整个元素（或根本不生成，取决于浏览器）。

使用`.wrap`方法。

```
$('#dynamic').wrap('<a href="http://google.com"></a>'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T19:39:08.257

jQuery DOM 添加函数，如`append`、`before`、`after`等，不会将 HTML 编辑为字符串，而是附加由元素组成的有效 DOM 片段。这就是为什么你不能只附加类似的东西`</a>`，这会使 DOM 无效。

你想要的是[包装](http://api.jquery.com/wrap/)你的元素：

```
$('#dynamic').wrap('<a href="http://google.com"/>'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T19:39:21.043

改用[`.wrap()`](http://api.jquery.com/wrap/)：

```
$('#dynamic').wrap('<a href="http://google.com"></a>'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T19:39:07.540

尝试

```
$('#dynamic').wrap('<a href="http://google.com"/>'); 
```

# azure - Azure 角色缓存 - 过期时间不起作用

> ID：15979567
> 
> 赞同：1
> 
> 时间：2013-04-12T19:37:57.957
> 
> 标签：azure, azure-caching

我正在 Azure WebRole 中运行角色缓存。当我在缓存中插入一个对象时，我指定了 15 秒的时间跨度，但对象在插入后 1 分半过期。

问题是：到期时间是否有最小值..可以是 15 秒吗？

**更新：** 当我说对象在指定时间内没有过期时，我的意思是我没有在配置的时间内收到预期的“删除回调”。我有以下配置：

```
 DataCacheFactoryConfiguration config = new DataCacheFactoryConfiguration();
            config.NotificationProperties = new DataCacheNotificationProperties(1000, TimeSpan.FromSeconds(1));

            cacheFactory = new DataCacheFactory(config);
            cacheAbsolute = cacheFactory.GetCache("absolute");

            foreach (CacheAbsoluteRegion reg in Enum.GetValues(typeof(CacheAbsoluteRegion)))
            {
                cacheAbsolute.CreateRegion(reg.ToString());
                cacheAbsolute.AddRegionLevelCallback(reg.ToString(), DataCacheOperations.RemoveItem, new DataCacheNotificationCallback(RemoveCallback));
            } 
```

在我添加一个时间跨度为 15 秒的对象后，在插入后 1 到 2 分钟之间调用回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:22:51.033

确保您使用的是类似的东西：

```
cache.Add("item", "value", TimeSpan.FromSeconds(15)); 
```

并且您的缓存设置为“绝对”到期，而不是“滑动”。 [在这里阅读更多...](http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)

# asp.net - 下拉列表未将数据保存到会话

> ID：15979568
> 
> 赞同：1
> 
> 时间：2013-04-12T19:38:02.067
> 
> 标签：asp.net, vb.net

我无法为应该跨多个页面工作的 DropDownList 保存会话。这是我现在拥有的代码：

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        ddlOffice.SelectedValue = Session("Office")
End Sub 
```

这是我分配值的代码......

```
Protected Sub ddlOffice_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles ddlOffice.SelectedIndexChanged
    Session("Office") = ddlOffice.SelectedItem.Value.ToString
End Sub 
```

我检查了最后一个值的断点，它肯定正确传递了 - 为加载参数传递的值是“2”，这是正确的，但 SelectedIndexChanged 会话值似乎默认回到 1。总是。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:42:27.107

控制事件处理程序在事件发生**后**`Page_Load`触发。`ddlOffice_SelectedIndexChanged`事件处理程序也是如此。代码`ddlOffice.SelectedValue = Session("Office")`已在`Page_Load`阶段中运行，然后会话具有旧值。要解决这个问题，请更改`ddlOffice_SelectedIndexChanged`如下：

```
Protected Sub ddlOffice_SelectedIndexChanged(
         ByVal sender As Object, 
         ByVal e As EventArgs) Handles ddlOffice.SelectedIndexChanged
     Session("Office") = ddlOffice.SelectedItem.Value.ToString
     ddlOffice.SelectedValue = ddlOffice.SelectedItem.Value.ToString
End Sub 
```

并且，在`Page_Load`事件中添加一个检查：

```
If Not Page.IsPostback
    ddlOffice.SelectedValue = Session("Office") 
```

后者不是强制性的，但您在回发中不需要它，因为`SelectedIndexChanged`事件处理程序将完成这项工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:41:29.337

您似乎确信 SelectedIndexChange 事件是问题所在，但我想我会提到这一点：

如果您将此行放在 Page_Load 的最顶部，如您所示：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        ddlOffice.SelectedValue = Session("Office")
End Sub 
```

它不会找到任何东西，因为应该在下拉列表中填充的数据尚未绑定。您需要在用于将数据绑定到下拉列表的任何代码之后设置所选值，除非 DDL 中的项目是静态的（在标记中定义）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:44:01.667

将选定值的赋值移动到下拉列表的 DataBound 事件中，并将会话变量转换为字符串，如下所示：

```
ddlOffice.SelectedValue = (string)(Session("Office")) 
```

# android - 菜单作为 android listview 的数据源？

> ID：15979571
> 
> 赞同：1
> 
> 时间：2013-04-12T19:38:19.353
> 
> 标签：android, design-patterns, android-listview

我对常见的列表视图模式如何工作感到困惑。

在我发现的所有指南中，我看到了类似的内容：

1.  将您的菜单项写入字符串数组（在 XML 或代码中）。
2.  将该数组设置为列表视图的数据源。
3.  如果用户单击（选择）任何项目，则获取该项目的索引，然后以某种方式弄清楚您应该做什么（通过案例构造或其他方式检查它）

甚至这还不是全部。

外貌。如果我想为每个列表项设置不同的图标怎么办？再次遍历该列表并设置相应的图标看起来很愚蠢。

但。也许我错过了什么？

是否可以使用类似的东西：

（伪代码）

```
<menu id="list">
    <item name="first" icon="icon1.png">First</item>
    <item name="second" icon="icon2.png">Second</item>
    <item name="third" icon="icon3.png">Third</item>
</menu>
...
<listview  entries="@list"></listview> 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:43:57.020

你几乎完全糊涂了。

ListView 与菜单无关。ListView 是一个小部件，它允许无限数量的行，在屏幕上显示这些行的子集，并提供有效的滚动。就这样。

ListViews 有适配器。适配器允许您获取数据结构并将它们映射到列表视图中的行位置。还通过提供 ListVIew 用作行视图的 getView 函数来定义行在屏幕上的外观。有内置的适配器可以做非常简单的事情，如果你想做更复杂的事情，编写你自己的也很简单。

这就是列表视图的基础。

# excel - 在创建 Excel 数据透视图的数据规范化想法方面需要帮助

> ID：15979572
> 
> 赞同：0
> 
> 时间：2013-04-12T19:38:20.503
> 
> 标签：excel, sql-server-2008, pivot, database-normalization

我有一个表格中的 Excel 表：

![在此处输入图像描述](https://i.stack.imgur.com/GB9AL.png)

我想将其转换为：

```
DtWeek  WsName  CValues  TValues 
```

这样我就可以有一个透视图，我可以在其中选择一个 WS 名称，然后查看它的 CValue 和 TValues 图表，省略所有其他 WsNames。

什么是避免手动复制粘贴的好方法！我想把它转储到一个 sql dbs 然后做一个

```
select WsName, 
       ,case when Current/Target='CurrentEcap' then..... 
```

但这就是我能想到的。之后就输了！有一段时间，转置数据似乎使它看起来更整洁，但很快这也无济于事。主要是因为我不知道如何将当前值绘制为离散项目，而不是垂直轴上的总和或计数。（水平方向为 ww/dtweek）。还有其他更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:28:45.377

我会根据您必须处理的 DtWeek 列数推荐两种方法之一。您不一定需要将 Current/Target 反规范化为两个不同的字段来获得所需的结果，因为您可以按列旋转该字段以获得由 Current 与 Target 拆分的图表的数据系列。您需要在普通 Excel 图表中执行此操作，但对于数据透视图是可选的。但是，您肯定需要规范化 DtWeek，以便您可以按数据透视表中的行在此字段上进行透视。

**一些 DtWeek 专栏 - 追加**

如果只有几个，我建议将当前表加载到 Access 或 SQL 等 RDBMS 中，并运行多个附加语句来创建新表。然后，为每个 DtWeek 值设置 WHERE 子句，以便仅附加这些值，并使用您指定的值创建名为 DtWeek 的新字段（例如，在 Access 中，DtWeek:'201310'）。此外，如果数据是非易失性的和/或您一次获得一周的数据，您可能只需要运行一次。

**许多 DtWeek 列或定期报告 - UNPIVOT**

在这种情况下，我会查看 DtWeek 的 SQL Server UNPIVOT。然后，您可以从 Excel 链接或运行使用 CASE 创建目标与当前列的附加查询。[这里](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)的 MSDN 简介或[这篇](http://www.bidn.com/blogs/DustinRyan/ssis/1193/t-sql-unpivot-y-goodness)文章（有一个很好的前后数据可视化）可能会有所帮助。如果您每周获得新数据和/或数据不稳定，这是一个更好的选择。

如果您的源数据非常混乱（例如来自以非关系格式转储格式化文本的遗留应用程序），您可能还需要考虑像 Monarch 这样的产品，您可以在其中构建自定义“陷阱”并且软件对给你的数据。

祝你好运！

# php - PHP 表单处理程序 - 日期格式

> ID：15979575
> 
> 赞同：0
> 
> 时间：2013-04-12T19:38:34.037
> 
> 标签：php, html, forms, email

我正在使用 PHP 邮件处理程序从我的网站发送查询信息。

除了我希望日期格式不同之外，一切都运行良好。

目前它正在发送日期`yyyy-mm-dd`，我希望它是`dd-mm-yyyy`一个长日期，例如`dd-month-yyyy`.

```
<?php
$myWeb = "My Website";
$name = trim($_POST['name']);
$email = trim($_POST['email']);
$number = trim($_POST['number']);
$message = trim($_POST['message']);
$date = trim($_POST['date']);

$EmailTo = "mymail@myweb.com";

$Subject = "Enquiry from $myweb"; /// Add a subject

$Body = "$name has made an enquiry about: $myWeb\n\n";

$Body .= "Name:  $name\n\n";

$Body .= "Email Address:  $email\n\n";

$Body .= "Contact Telephone Number:  $number\n\n";

$Body .= "Date of Event:  $date\n\n";

$Body .= "$name's Enquiry:\n\n$message\n\n";

if($Subject == NULL) {$Subject = "From $myWeb";}
$success = mail($EmailTo, $Subject, $Body, "From: $myWeb");

if ($success){ 

header('Location: contact-form-thank-you.html','_self');

}
?> 
```

有什么想法请我如何更改格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:42:25.627

```
$date = date('dd-mm-yyyy'); 
```

我真的不明白为什么你需要从你的帖子表单中获取日期，这没有任何意义，只需在 $message var 之后在你的 php 脚本中生成日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:41:41.690

您可以使用 $dateComponents = explode('-', $date) 解析日期，然后根据需要连接组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:43:56.920

使用`php` [日期](http://php.net/manual/en/function.date.php)格式化日期字符串

```
$firstDate = $_POST['date'];

$formattedDate = date('dd-mm-yyyy',strtotime($firstDate)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T19:46:40.217

刚看到你的更新：

这应该有助于：

```
$date = trim($_POST['date']);
$newDate = date("m-d-Y", strtotime($date)); 
```

# ksh - ksh 中的数组大小限制

> ID：15979578
> 
> 赞同：0
> 
> 时间：2013-04-12T19:38:50.330
> 
> 标签：ksh

我有以下 ksh 脚本要运行：

```
temp=`<some_command>`
eval set -A array $temp 
```

该变量`temp`包含命令的输出，输出为空格分隔的字符串。

但在某些情况下，我会遇到以下错误：

```
 array: 0403-046 The specified subscript cannot be greater than 4095. 
```

在这种情况下，有没有办法将数组设置为中的前 4096 个空格分隔的字符串`temp`？

另一种选择是将`<some_command>`（输出到标准输出）的输出限制为不超过 4096 行（每行一个字符串）。这可以用ksh完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T07:46:44.997

您当然可以使用更新版本的 ksh93 - 对数组大小有更大的限制。如果这不是一个选项，请尝试以下操作：

```
# some_command <n> produces <n> lines of text:
$ function some_command {
     echo a{1..$1} | tr ' ' $'\n'
}
$ some_command 5
a1
a2
a3
a4
a5 
```

这是你的答案：

```
$ set -A array $(
     some_command 4100 | head -4096
)
$ echo ${#array[@]}
4096 
```

# java - JAXWS 肥皂处理程序大型 MTOM 附件

> ID：15979580
> 
> 赞同：1
> 
> 时间：2013-04-12T19:38:56.610
> 
> 标签：java, jax-ws, websphere-7, websphere-8

IBM WebSphere 7 和 8 中的 JAXWS 实现在涉及到肥皂处理程序和大型 MTOM 附件时似乎存在一些问题。当对 SOAPMessageContext 对象调用 getMessage() 时，整个消息（包括所有附件二进制内容）似乎都被读入内存。这很容易导致 JVM 耗尽可用内存。

```
@Override
public boolean handleMessage(SOAPMessageContext context) {
    SOAPMessage soapMsg = context.getMessage();

    ...
} 
```

在上面的代码片段中，如果传入的请求附件大于 JVM 中可用的可用内存量，则 context.getMessage() 可能会导致内存不足异常。

如何在不触发这种不需要的功能的情况下访问 SoapHeader 元素？我看到 SOAPMessageContext 类有一个 getHeaders(...) 方法，但我不确定如何准确地使用它。我特别不确定要为 JAXBContext 传递什么。任何人都可以提供一个例子或解释如何使用这种方法吗？

这是另一篇相关的 stackoverflow 文章：[带有大消息的 JAX-WS SoapHandler：OutOfMemoryError](https://stackoverflow.com/questions/15462192/jax-ws-soaphandler-with-large-messages-outofmemoryerror)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:28:22.900

以下是如何使用 WebSphere 内置 JAX-WS 实现在不读取整个消息的情况下访问标头。

```
public boolean handleMessage(SOAPMessageContext context) {

    AttributedURI messageIdURI = (AttributedURI)context.get("com.ibm.wsspi.wsaddressing.inbound.MessageID");
    String messageId = "";
    if (messageIdURI != null && messageIdURI.getURI() != null) {
        messageId = messageIdURI.getURI().toString();
    }
    EndpointReference fromApplicationEPR = (EndpointReference)context.get("com.ibm.wsspi.wsaddressing.inbound.FromEPR");
    String fromApplication = "";
    if (fromApplicationEPR != null && fromApplicationEPR.getAddress() != null &&
        fromApplicationEPR.getAddress().getURI() != null) {
        fromApplication = fromApplicationEPR.getAddress().getURI().toString();
    }

    ...

    return true;
} 
```

请注意，这取决于精确的 JAX-WS 实现。当我有机会时，我将通过 Apache CXF 发布如何做到这一点。以下是上述代码所需的导入：

```
import com.ibm.ws.wsaddressing.AttributedURI;
import com.ibm.ws.wsaddressing.EndpointReference; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T18:02:21.290

对于 Apache CXF，最好的方法是使用特定于 CXF 实现的拦截器。下面是一个示例自定义拦截器类。

```
package com.company.app.interceptor;

import javax.xml.namespace.QName;

import org.apache.cxf.binding.soap.SoapMessage;
import org.apache.cxf.binding.soap.interceptor.AbstractSoapInterceptor;
import org.apache.cxf.headers.Header;
import org.apache.cxf.interceptor.Fault;
import org.apache.cxf.phase.Phase;
import org.apache.log4j.Logger;
import org.w3c.dom.Element;

public class SOAPHeaderInterceptor extends AbstractSoapInterceptor  {
    private static Logger logger = Logger.getLogger(SOAPHeaderInterceptor.class);

    public SOAPHeaderInterceptor() {
        super(Phase.USER_PROTOCOL);
    }

    @Override
    public void handleMessage(SoapMessage message) throws Fault {
        try {
            Header fromHeader = message.getHeader(new QName("http://www.w3.org/2005/08/addressing", "From"));
            Header messageIdHeader = message.getHeader(new QName("http://www.w3.org/2005/08/addressing", "MessageID"));

            String from = null;
            if (fromHeader != null && fromHeader.getObject() != null) {
                from = ((Element)fromHeader.getObject()).getTextContent();
            }
            String messageId = null; 
            if (messageIdHeader != null && messageIdHeader.getObject() != null) {
                messageId = ((Element)messageIdHeader.getObject()).getTextContent();
            }
        } catch (Exception e) {
            logger.error("Unable to read SOAP Headers", e);
        } 
    }
} 
```

然后，在您的 JAX-WS 服务实现类中指定 @InInterceptors 注释。

```
@InInterceptors(interceptors ="com.company.app.interceptor.SOAPHeaderInterceptor") 
```

# python - 如何在 get_object_or_404 或 objects.get 中为模型使用变量

> ID：15979586
> 
> 赞同：0
> 
> 时间：2013-04-12T19:39:21.603
> 
> 标签：python, django, django-models, django-views

在Django中，如何使用变量来动态使用get_object_or_404或objects.get之类的

```
get_object_or_404(${Variable}, pk=id) 
```

或者

```
${Variable}.objects.get(pk=id) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:52:38.570

如果您保证在参数中传递**Django ORM 模型类**，get_object_or_404() 将正常工作。

```
def do_something(id,MyDjangoModelObject = None)
    if MyDjangoModelObject:
        get_object_or_404(MyDjangoModelObject, pk=id) 
```

还

```
MyDjangoModelObject.objects.get(pk=id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:44:27.447

没问题，假设你有两个模型`Post`，`Comment`你可以有这个：

```
from app import models as app_models

dynamic_object = getattr(app_models, 'post') 
```

所以你可以使用它：

```
dynamic_object.objects.get(pk=id) 
```

或者

```
get_object_or_404(dynamic_object, pk=id) 
```

# c# - 在 WP8 中指示服务器不可用

> ID：15979592
> 
> 赞同：0
> 
> 时间：2013-04-12T19:39:39.993
> 
> 标签：c#, networking, wpf-controls, windows-phone-8

我正在寻找一种最佳实践来通知与服务器的连接是否可用。不可用可能意味着没有网络连接或服务器已关闭。

显示错误消息对话框是可以的，但我也想给用户一个视觉指示器，表明服务器再次可用（画一些绿色的东西）。有没有标准的方式来表示它？

我还需要禁用不同屏幕中的各种控件（例如禁用发送按钮...），所以我必须在所有视图中处理网络/服务器可用性？

有任何想法吗？

我正在使用 MVVM 灯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:09:54.880

唯一的方法是分配一个全局变量来检查可用性。

```
eg. bool serviceAvailable=true or false; 
```

然后在 wp7/wp8 应用程序的构造函数中加载屏幕时禁用按钮。

```
public MainPage()
    {
        InitializeComponent();
        if(serviceAvailable==false)
        {
        xamlButton.IsEnabled = false;
        }
        else
        xamlButton.IsEnabled = true;
    } 
```

**或者**

```
public void functionName()
{
if(doCheck()==true or false)
{
disable or enable button
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T07:11:27.080

您也可以使用后台工作人员来实现这一点。 [http://www.dotnetperls.com/backgroundworker](http://www.dotnetperls.com/backgroundworker)

# php - 用于 Linux 的 xdebug dbgp 客户端

> ID：15979595
> 
> 赞同：3
> 
> 时间：2013-04-12T19:40:01.980
> 
> 标签：php, linux, client, xdebug

我正在寻找某种类型的程序，它可以让我在 Linux 上进行远程调试 PHP，它可以满足这两个不起眼的要求：

1.  没有厚实的 Java IDE。我希望能够快速启动它，或者让它在后台运行，以便在需要时使用。我需要使用我的 RAM，而不是把它浪费在中间调试器上。

2.  良好的学习曲线。Vim 工作 - 不知何故，但是.. 我需要在调试时专注于其他事情，而不是我可怜的 vim-fu 和挖掘手册以了解如何挖掘 vim 手册，只是为了弄清楚 Vim 中的选项卡有多接近。我不喜欢调试调试器。我没有尝试emacs，我有点害怕这样做。我更喜欢简单的面向鼠标的程序，所以我可以完全专注于调试。

有这样的程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T01:36:48.830

好的，其中一种可能性，似乎有用于 Sublime 文本的新插件。还没准备好，但看起来很有希望。

[https://github.com/martomo/SublimeTextXdebug](https://github.com/martomo/SublimeTextXdebug)

# javascript - FP：在没有实际状态变化的情况下反映状态？

> ID：15979597
> 
> 赞同：3
> 
> 时间：2013-04-12T19:40:03.007
> 
> 标签：javascript, functional-programming, reactive-programming

我对一些高级函数式编程思想很陌生，特别是：如何使用不可变数据。数据结构通常是复合的，由较小的数据结构组成。例如，如果我们有一个家庭集合，它由一个家庭的所有成员组成。我们可以构建家庭：

```
var flintstones = new Family().
    add(new Member({name: 'Fred'})).    //returns new instance of family 
    add(new Member({name: 'Wilma'}).    // "
    add(new Member({name: 'Pebbles'})); // "
var fred = flintstones.get({name: 'Fred'}).set({lname: 'Flintstone'});
flintstones = fred.family(); //new instance of family with latest fred. 
```

注意改变`fred`实际上并没有改变`flintstones`。我可以获取一个新的参考，`flintstones`但出于什么目的？由于所有对象都只是快照，我看不到保留引用的意义。状态变化已经被抽象掉了，所以我们不打算使用观察者模式。因此，像 GUI 这样关心状态变化的依赖事物是如何处理的？为了使事物保持同步，观察的功能替代方法是什么？我不认为对象本身在渲染自己方面有任何业务。功能程序如何处理保持单页 webapp GUI 的状态同步？

物有所值[Rich Hickey 的演讲](http://qconlondon.com/dl/qcon-london-2009/slides/RichHickey_PersistentDataStructuresAndManagedReferences.pdf)启发了我探索函数式编程。我得到了他的概念，但我很难跳到一个实际的实现（在 JavaScript 中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:39:18.643

在您的示例中，`Family`应该是不可变的。所以每次调用都`add`必须返回一个全新的对象，该对象基于现有对象的内容（它们本身是不可变的，所以复制它们不是问题）加上新的东西。同样，`set`您调用的`Fred`必须返回一个基于 Fred 但姓氏不同的全新家庭成员。（因此里面原来的Fred`Flintstones`根本没有改变。）

这种函数式风格的优点是，一旦你得到一个对象的引用，你就知道它不会改变。如果它在构建时是有效的，您不必继续检查它是否仍然有效。任何您都可以将对象从代码中传递出去，而无需先克隆它以保护您的内部副本不被更改。

如果你想了解更多关于函数式编程的知识，你最好尝试一门纯粹的函数式语言，比如 Haskell 或 F#；尝试在 JavaScript 中进行函数式编程可能会令人困惑。

# git - 在 .gitignore 排除的文件上添加 git

> ID：15979601
> 
> 赞同：3
> 
> 时间：2013-04-12T19:40:16.590
> 
> 标签：git

有没有办法在 git 中跟踪被 .gitignore 中存在的规则排除的新文件？我想在我的 .gitignore 规则中不添加单个文件/目录排除项来执行此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T19:40:16.590

好吧，我很难找到答案，但老实说我还没有尝试过。结果是在 .gitignore 中排除的文件上运行“git add”（如下所示）

```
git add Test.exe 
```

输出以下内容：

```
The following paths are ignored by one of your .gitignore files:
Test.exe
Use -f if you really want to add them.
fatal: no files added 
```

所以像这样修改'git add'会起作用：

```
git add -f Test.exe 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-15T21:40:45.133

> ```
> Use -f if you really want to add them. 
> ```

使用 Git 2.26（2020 年第一季度），这现在是一个“提示”，当“ `git add`”注意到用户没有添加任何内容时，会通过两条新的帮助消息进行控制。

这意味着，确保`git config advice.addIgnoredFile`未设置为`true`（默认情况下确实如此：其默认值为`false`），否则您不会意识到`git add -f`这里需要 a 。

请参阅[提交 887a0fd](https://github.com/git/git/commit/887a0fd57336dc5ff3ac28b6de0be91278e9e179)（2020 年 2 月 6 日）和[提交 bf66db3](https://github.com/git/git/commit/bf66db37f1e17b71e8edb93d78ec407fbc1e0989)（2020 年 1 月 7 日），作者是[Heba Waly ( `HebaWaly`)](https://github.com/HebaWaly)。
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 daef1b3](https://github.com/git/git/commit/daef1b300b07c3d17d47c3bf01ebde28b62ff3fe)中，2020 年 2 月 14 日）)

> ## [`add`](https://github.com/git/git/commit/887a0fd57336dc5ff3ac28b6de0be91278e9e179)：更改添加 API 使用的建议配置变量
> 
> ^(签字人：Heba Waly)
> 
> **`advice.addNothing`**config 变量用于控制添加库中两条建议消息的可见性。
> 这个 config 变量被**[两个新变量](https://github.com/git/git/blob/887a0fd57336dc5ff3ac28b6de0be91278e9e179/Documentation/config/advice.txt#L113-L118)**替换，它们的名称更清晰并且与这两种情况相关。
> 
> 还将这两个新变量添加到文档中。
> 
> *   `addIgnoredFile`：
>     如果用户尝试将忽略的文件添加到索引中，则会显示建议。
> *   `addEmptyPathspec`：
>     如果用户在不提供 pathspec 参数的情况下运行 add 命令，则会显示建议。

现在的提示是：

```
Use -f if you really want to add them.
Turn this message off by running
"git config advice.addIgnoredFile false" 
```

和：

```
Maybe you wanted to say 'git add .'?
Turn this message off by running
"git config advice.addEmptyPathspec false" 
```

# php - 如何使此输出显示在两列而不是一个长列表中？

> ID：15979605
> 
> 赞同：0
> 
> 时间：2013-04-12T19:40:32.240
> 
> 标签：php

当前输出为一个长列表

```
$output .= "<div class=\"selector\">\n";
$output .= "<form method=\"post\">\n";
if ($type == "new") {
    $output .= "<input type=\"hidden\" name=\"type\" value=\"new\">\n";
    $output .= getPhaseDD("phase", $phase) . " &nbsp; ";
    $output .= "Day:" . getDayDD($day) . " &nbsp; ";
    $output .= "Number:" . getNumDD($num) . " ";
} else {
    $output .= "<input type=\"hidden\" name=\"type\" value=\"existing\">\n";
    $output .= "<input type=\"hidden\" name=\"phase\" value=\"{$phase}\">\n";
    $output .= "<input type=\"hidden\" name=\"day\" value=\"{$day}\">\n";
    $output .= "<input type=\"hidden\" name=\"num\" value=\"{$num}\">\n";
    $output .= "<div>Phase: {$phase}, Day: {$day}, Number: {$num}</div>";
}
if ($type == "new") {
    $output .= "<div><textarea name=\"msg\" rows=\"8\" cols=\"50\" id=\"msg\"   onkeyup=\"javascript:countTXT(this, 'cnt', 160);\" onkeydown=\"javascript:countTXT(this, 'cnt', 160);\">" . stripslashes($msg) . "</textarea></div>\n";
    $output .= "<div id=\"cnt\"></div>\n";
} else {
    $output .= "<div><textarea name=\"msg\" id=\"msg_{$day}_{$num}\" onkeyup=\"javascript:countTXT(this, 'cnt_{$day}_{$num}', 160);\" onkeydown=\"javascript:countTXT(this, 'cnt_{$day}_{$num}', 160);\">" . stripslashes($msg) . "</textarea></div>\n";
    $output .= "<div id=\"cnt_{$day}_{$num}\"></div>\n";
}
$output .= "<div>\n";
if ($type == "new") {
    $output .= "<input type=\"submit\" name=\"create_btn\" value=\"Create\" class=\"create_btn\">\n";
} else {
    $output .= "<input type=\"submit\" name=\"update_btn\" value=\"Update\" class=\"update_btn\"> \n";
    $output .= "<input type=\"submit\" name=\"delete_btn\" value=\"Delete\" class=\"delete_btn\" onclick=\"javascript:return confirmDelete();\">\n";
}
$output .= "</div>\n";
$output .= "</form>\n";
$output .= "</div>\n";
if ($type == "new") {
    $output .= "<script type=\"text/javascript\">countTXT(document.getElementById('msg'), 'cnt', 160);</script>\n";
} else {
    $output .= "<script type=\"text/javascript\">countTXT(document.getElementById('msg_{$day}_{$num}'), 'cnt_{$day}_{$num}', 160);</script>\n";
}
return $output; 
```

我想在两列中显示，因为显示了很多消息，而且它会比一个长滚动条更干净。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:48:11.847

你可以做两个div，一个float:left，另一个float:right。如果这不是动态生成的（似乎不是），那么您可以对 HTML 进行硬编码。我错过了什么吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:01:08.883

看起来您发布的代码是在一个循环中创建的，x 次。一种方法是将第一半包裹在 a`<div style="float:left">`中，第二半包裹在 a`<div style="float:right">`或 plain`<div>`中。

例如。

```
// start the left float div
echo "<div style=\"float:left; padding:50px;\">";

// # of total divs in the 2 columns
$x = 12;

// for loop, change
for($i=1;$i<=$x;$i++){

// if we have reached the halfway mark, close the left float div and create the right side
if($i==(($x/2)+1)) {echo "</div><div style=\"padding:50px;\">";}

// this is where your div loop goes
echo "<div>Phase: Pre-Quit, Day: 1, Number:{$i}<br /><textarea cols=\"30\">Message {$i}</textarea></div>";}

// close the right div
echo "</div>"; 
```

[你可以在 - http://phpfiddle.org/main/code/9be-ax8](http://phpfiddle.org/main/code/9be-ax8)看到这个例子

![在此处输入图像描述](https://i.stack.imgur.com/FckJR.png)

# php - 如何链接 mcrypt？

> ID：15979612
> 
> 赞同：3
> 
> 时间：2013-04-12T19:40:50.893
> 
> 标签：php, magento, terminal, mcrypt

我正在尝试安装 mcrypt 以在我的本地机器开发环境中使用。我需要这个来安装 Magento。

我使用此答案[安装 mcrypt](https://stackoverflow.com/questions/14595841/installing-mcrypt-extension-for-php-on-osx-mountain-lion)，但收到以下错误：

```
$ brew link mcrypt
Linking /usr/local/Cellar/mcrypt/2.5.8... Warning: Could not link mcrypt. Unlinking...

Error: Could not symlink file: /usr/local/Cellar/mcrypt/2.5.8/include/mutils/mcrypt.h
Target /usr/local/include/mutils/mcrypt.h already exists. You may need to delete it.
To force the link and delete this file, do:
  brew link --overwrite formula_name

To list all files that would be deleted:
  brew link --overwrite --dry-run formula_name 
```

尝试按照不允许的建议覆盖链接。

```
$ brew link --overwrite mcrypt
Linking /usr/local/Cellar/mcrypt/2.5.8... Warning: Could not link mcrypt. Unlinking...

Error: Permission denied - /usr/local/include/mutils/mcrypt.h 
```

在此命令前面加上“sudo”并不能解决此问题，因为这也是不允许的。

运行`php -m`不会将 mcrypt 显示为已安装的模块，并且还会引发以下错误：

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php/extensions/no-debug-non-zts-20100525/mcrypt.so' - dlopen(/usr/lib/php/extensions/no-debug-non-zts-20100525/mcrypt.so, 9): image not found in Unknown on line 0 
```

这一切似乎都与我无法链接这个事实有关，但我似乎无法解决这个问题。有没有人遇到过这个？感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-25T16:35:11.877

我实际上只是第二次遇到这个问题。不记得我第一次是如何解决的。这次对我有用的是我实际上删除了 mutils 下的 mcrypt.h 文件。然后当我运行`brew link --overwrite mcrypt`它成功链接。然后我跑了`brew install php53-mcrypt`，这似乎成功了。同时重启服务器。

如果这对每个人都不起作用，但对我有用，我不会感到惊讶。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T20:10:19.520

Thomas，从我在上面看到的情况来看，您似乎正在尝试使用 Homebrew 将`mcrypt`软件包安装到您的**系统**，但`mcrypt`已经由另一个软件包管理系统安装（或者可能默认在您的 OS X 版本中提供 - 我不要跟上这些事情）

由于 mcrypt 已经安装在您的***nix**系统上，您需要做的是为 mycrypt 安装**PHP 扩展，或者安装支持 mcrypt 的 PHP 版本。**

我通常的做法是使用[hp-osx.liip.ch](http://php-osx.liip.ch/)包（它似乎是 Marc Liyanage 旧`entropy.ch`包的继承者）。这会将 PHP 的独立版本安装为二进制文件，并且应该具有运行 Magento 所需的库。

# emacs - elisp 错误的类型参数：整数或标记-p 错误

> ID：15979615
> 
> 赞同：-1
> 
> 时间：2013-04-12T19:41:01.360
> 
> 标签：emacs, elisp

我有下面的文本（用实际的制表符代替 \t），我需要在“描述”之后的制表符后面获取所有文本，直到缓冲区结束。

```
key1\tval1      
key2\tval2
key3\tval3      
Description\tlots and lots and lots and lots and lots lots 
and lots and lots and lots and lots lots and lots and lots and 
lots and lots lots and lots and lots and lots and lots lots and 

lots lots and lots and lots and lots and lots lots and lots lots 

and lots and lots and lots and lots lots and lots lots and lots 

and lots and lots and lots lots and lots lots and lots and lots 
and lots and lots lots and lots lots and lots and lots and lots 
and lots lots and lots lots and lots and lots and lots and lots 
```

这是lisp函数：

```
(defun find-description()
  (interactive) 
  (goto-char (point-min))
  (when (re-search-forward "Description\t")
    (setq myStr (buffer-substring (point) (end-of-line)))
    (goto-char (point-max))
    (insert "\n\n\ndescription=")
    (insert myStr)
   )
) 
```

这在 (setq 行出现错误：

```
Wrong type argument: integer-or-marker-p, nil 
```

我假设在正则表达式搜索之后，该点将在 Description\t 之后。那么为什么设置变量不起作用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:00:06.320

的值`end-of-line`不是标记或位置，因此尝试使用它`buffer-substring`会导致错误消息。简单的解决方法是在移动到行尾后获取缓冲区位置；

```
(let ((beg (point))
  (end-of-line)
  (setq myStr (buffer-substring beg (point)) ) 
```

另请注意[https://stackoverflow.com/a/15974319/874188](https://stackoverflow.com/a/15974319/874188)指出这`line-end-position`是一个更简单的解决方法。

您也可以重构它以避免临时变量，例如通过搜索`"Description\t\([^\n]*\)"`并提取匹配的子字符串，但我认为任何一种方式都可以。

到那时，检查通过设置`debug-on-error`为真值获得的回溯将很快揭示问题的原因。

# php - AWSSDK S3 - if_object_exists 在文件确实存在时不断返回 false

> ID：15979619
> 
> 赞同：0
> 
> 时间：2013-04-12T19:41:28.003
> 
> 标签：php, amazon-web-services, amazon-s3, file-exists

我目前正在使用以下代码：

```
include 'lib/sdk.class.php';
$s3 = new AmazonS3();
$bucket = 'mybucket'.strtolower($s3->key);
$key = 'myfile.txt';
$response = $s3->if_object_exists($bucket,$key); 
```

但是`$response`当文件确实存在时不断返回错误，我缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:20:04.890

在到处乱搞代码之后，我查看了我之前创建的其他站点的一些 S3 调用，并比较了这些调用是如何完成的。我注意到我以前的代码没有使用以下代码：

```
$bucket = 'mybucket'.strtolower($s3->key); 
```

相反，我使用了：

```
$bucket = 'mybucket'; 
```

最终代码如下所示：

```
include 'lib/sdk.class.php';
$s3 = new AmazonS3();
$bucket = 'mybucket';
$key = 'myfile.txt';
$response = $s3->if_object_exists($bucket,$key); 
```

这最终奏效了。但是，我不知道为什么这适用于[amazon](http://docs.aws.amazon.com/AWSSDKforPHP/latest/index.html#m=AmazonS3/if_object_exists)提供的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:21:58.917

如果文件确实存在并且可以访问，那么这个函数应该返回 true。我会尝试通过执行以下操作将 SDK 置于调试模式：

```
$s3->enable_debug_mode(true); 
```

这会打开`CURL_VERBOSE`输出，您应该能够在执行代码时查看到 S3 的实际 HTTP 请求和响应。这应该可以帮助您弄清楚可能出了什么问题。在此之后，如果您认为存在错误，您可以在 GitHub 上为 SDK 提交问题，网址为[https://github.com/amazonwebservices/aws-sdk-for-php/issues](https://github.com/amazonwebservices/aws-sdk-for-php/issues)。

# user-interface - OCaml-Wodi：安装 Lablgtk2？

> ID：15979624
> 
> 赞同：0
> 
> 时间：2013-04-12T19:41:41.870
> 
> 标签：user-interface, gtk, ocaml, godi, lablgtk

我一直在尝试在我的 wodi32 cygwin 上安装 lablgtk2，因为软件包环境最初没有附带 lablgtk（只是 lablgtk）。

我按照这些指示自己手动完成：

```
2) 在 OCaml 发行版中安装 lablgtk2 二进制文件和脚本
     箱/* -> 箱
     库/站点库/lablgtk2 -> 库/站点库/lablgtk2
   然后编辑 lib/ld.conf，并添加该行
     \lib\site-lib\lablgtk2

3) 如果您的发行版比 4.00.0 更新，请转到
   lib/site-lib/lablgtk2 目录并执行

        ocaml build.ml

```

但它似乎无法正常工作。有没有这样做的 Wodi 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:57:20.137

在 cygwin 安装的根文件夹中有一个名为“Wodi32 Package Manager.lnk”的链接。单击它（从 Windows 资源管理器）以启动 GUI 以进行软件包安装。或者从cygwin内部运行/opt/wodi32/gui/bin/gui.exe（顺便说一句：gui是用你正在寻找的包编写的:)）

这个包叫做 (godi-)lablgtk2。（lablgtk3 尚未发布，lablgtk1 已过时）。godi-lablgtk2 支持几乎所有的绑定，包括 gnomecanvas、gktspell、gtksourceview2 等。

# c# - 如何在 C# 中完成安全打印？

> ID：15979629
> 
> 赞同：0
> 
> 时间：2013-04-12T19:41:56.137
> 
> 标签：c#, printing, printdocument

我需要将文档打印到打印机，以便用户在打印文档之前需要输入 PIN。

到目前为止，在我的研究中，我看到的唯一方法是将文档打印到 PRN 文件中，然后在二进制文件中编辑文件以查找

```
byte[] searchfor = System.Text.Encoding.ASCII.GetBytes(@"@PJL SET HOLD=OFF" + "\n" + "@PJL SET USERNAME=\"SYSTEM\""); 
```

并将其替换为

```
byte[] new_lines = System.Text.Encoding.ASCII.GetBytes(@"@PJL SET HOLD=ON" + Environment.NewLine + @"@PJL SET HOLDTYPE=PRIVATE" + Environment.NewLine + "@PJL SET HOLDKEY=\"" + User_Pin + "\"" + Environment.NewLine + "@PJL SET USERNAME=\"" + User_Name + "\""); 
```

这对我来说似乎有点傻。我在 PrintDocument 或 PrinterSettings 中没有发现任何似乎有帮助的东西。

虽然这是一种解决方案，但我们打印出大图像文件，然后如果我们通过复制命令将其直接发送到打印机，则打印机上的 RAM 不足以容纳整个文档。我希望有一种更优雅的方式通过打印队列将文档发送到文档，以便队列将其假脱机到打印机，因为它可以处理它。

任何帮助将不胜感激。

谢谢，

理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:49:12.803

那是因为它是一种打印机功能，可以通过驱动程序选择性地公开，而不是 Windows 可以做的事情。

# php - 如何使用正则表达式排除 YouTube 链接？

> ID：15979631
> 
> 赞同：-3
> 
> 时间：2013-04-12T19:41:57.643
> 
> 标签：php, regex, url

知道为什么这个正则表达式不起作用吗？

```
'#((http://|www.)(.*^(youtube)\.(com|org|co.il|net|us|ws|info|tv|me|tk|co.uk).*))#' 
```

我想查找不属于 YouTube 的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:43:48.013

您的正则表达式中有此段：`^(youtube)`

请理解，这不会否定 string `youtube`。

您将需要否定前瞻或后视来否定匹配这样的文本：

```
(?!youtube) 
```

或者

```
(?<!youtube) 
```

对于您的正则表达式，它可以是：

```
#((http://|www.)((?!youtube)[^.]+\.(com|org|co.il|net|us|ws|info|tv|me|tk|co.uk).*))# 
```

但是，您需要在问题中提供输入字符串的示例。

*   在此处阅读有关环视的信息：[http ://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:49:00.203

我会走相反的路

```
$youtubePattern = '%(https?:\/\/(www\.)?youtube\.([a-z]{2,3}).*)%six';

if (!preg_match($youtubePattern, $subject)) {
   // not youtube, do whatever...
} 
```

# php - Facebook查询结果展示

> ID：15979633
> 
> 赞同：0
> 
> 时间：2013-04-12T19:42:00.270
> 
> 标签：php, facebook-graph-api

我想以用户友好的方式显示来自 Facebook 的查询结果。

例如，我想显示照片而不是它的链接。

这是我的代码：

```
//fql query example using legacy method call and passing parameter

try{
$fql = "select name, hometown_location, sex, pic_square from user where uid=" . $user;
$param = array(
'method' => 'fql.query',
'query' => $fql,
'callback' => ''
);
$fqlResult = $facebook->api($param);

}
catch(Exception $o){
d($o);

} 
```

当我这样做时`print_r`，以下内容显示为：

```
FQL Query Example by calling Legacy API method "fql.query" Array ( [0] => Array ( [name] => Mohamed Abdelrahman [hometown_location] => [sex] => male [pic_square] => http://profile.ak.fbcdn.net/hprofile-ak-prn1/623888_100000415601915_463726603_q.jpg ) ) 
```

或者当我使用：

```
foreach ($fqlResult as $a => $b)
{

print "$a: $b\n";
} 
```

它输出：

```
0: Array 
```

感谢大家的回答，我自己解决了这个问题，这是解决方案

```
foreach($fqlResult as $inner_arr)
foreach($inner_arr as $value)
echo "$value<br/>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:54:18.087

请使用更新的方法和代码

```
//run fql query
    $fql_query_url = 'https://graph.facebook.com/'
        . 'fql?q=SELECT+uid2+FROM+friend+WHERE+uid1=me()'
        . '&access_token=' . $access_token;
    $fql_query_result = file_get_contents($fql_query_url);
    $fql_query_obj = json_decode($fql_query_result, true); 
```

[您可以在https://developers.facebook.com/docs/technical-guides/fql/](https://developers.facebook.com/docs/technical-guides/fql/)上遵循完整教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:01:15.047

`FQL Query Example by calling Legacy API method "fql.query" Array ( [0] => Array ( [name] => Mohamed Abdelrahman [hometown_location] => [sex] => male [pic_square] => http://profile.ak.fbcdn.net/hprofile-ak-prn1/623888_100000415601915_463726603_q.jpg ) )`

在你的情况下，`$fqlResult`是你的数组。`$a`是您的键`[0]`，对应的值 ,是包含、、和`$b`的数组。`name``hometown_location``sex``pic_square`

如果要为此显示照片，则`$fqlResult`需要将 img src 设置为`$b['pic_square']`

# jquery - Jquery ui Append无法调整大小

> ID：15979636
> 
> 赞同：0
> 
> 时间：2013-04-12T19:42:10.553
> 
> 标签：jquery

我正在学习 jquery，我遇到了一个问题

我有一个可调整大小的 div 并想通过一个按钮在内部动态添加另一个，但我希望下一个也是可调整大小的，所以我使用的是同一个类。

但不工作

另一个 div 出现，但它不可调整大小

```
 <div id="row" class="ui-widget-content">
        <div id="bot_add">X</div>
    </div>
    <script type="text/javascript">
    $(document).ready(function() {
        $('#row')
                    .draggable()
                     .resizable({
            stop: function(e, ui) {
            var temp = $('#row').css('width');
            alert(temp);
        }
    });

$('#bot_add').live('click', function(){

    $('#row').append("<div id='row' class='ui-widget-content'></div>");

});

});
    </script> 
```

对不起我的英语不好，我是巴西人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:48:30.637

当您动态添加元素时 - 尝试这种方式

```
$('body').on("mouseenter", "ui-widget-content", function(e) {
    var target = $(e.target);
    if (target.data("resizable")) return;
    target.resizable({
        stop: function(e, ui) {
           var temp = $('#row').css('width');
           alert(temp);
         }
    });
}); 
```

正如[@roasted](https://stackoverflow.com/users/1414562/roasted)提到的，你`id='row'`将是重复的，使用类代替

# asp.net-mvc-3 - 我的模型为数据库创建了一个额外的密钥，为什么？

> ID：15979642
> 
> 赞同：0
> 
> 时间：2013-04-12T19:42:41.087
> 
> 标签：asp.net-mvc-3, entity-framework

**注意：**使用的技术是 ASP.Net MVC 3、Entity、SQL Server Management Studio

## 问题？

似乎当我运行时，上下文为：`public class DatabaseInit : DropCreateDatabaseAlways<LocationAppContext>`

它创建了数据库，但是我的服务分配表有一个额外的外键 `ServiceAssignment_Service`，它不应该调用。

我的服务分配模型是这样的：

```
namespace LocationApp.Models
{
    public class ServiceAssignment
    { 
        public int id { get; set; }
        public int locationID { get; set; }
        public int ServiceID { get; set; }

        public virtual Location Location { get; set; }
        public virtual ServiceAssignment Service { get; set;}
    }

} 
```

服务模式是这样的：

```
namespace LocationApp.Models
{
    public class Service
    {
        public Service()
        {
            this.ServiceAssignments = new HashSet<ServiceAssignment>();
        }

        public int id { get; set; }
        public string name { get; set; }
        public string description { get; set; }
        public bool active { get; set; }
        public string icon { get; set; }

        public virtual ICollection<ServiceAssignment> ServiceAssignments { get; set; }
    }
} 
```

话虽如此，关系很简单：

服务分配有许多位置 ID 和服务 ID。

为什么会生成这个额外的外键？当前密钥，应该有：

*   **PK** : 表的主 PK
*   **FK 1** : Location_ServiceAssignment
*   **FK 2**：Service_ServiceAssignment

那些是他们的，这第三个怎么莫名其妙....

第二部分是：如果 id 2 的位置的服务 id 为 2,3,6,7 我如何获得所有服务 id 的返回，以便我可以将对象传递给服务查询以获取有关服务的所有信息根据身份证？

## 更新：

上下文类：

```
namespace LocationApp.DAL
{
    public class LocationAppContext : DbContext
    {
        public DbSet<Content> Contents { get; set; }
        public DbSet<Location> Locations { get; set; }
        public DbSet<ServiceAssignment> ServiceAssignments { get; set; }
        public DbSet<Service> Services { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
            modelBuilder.Entity<Location>().HasMany(sa => sa.ServiceAssignments);
            modelBuilder.Entity<Service>().HasMany(sa => sa.ServiceAssignments);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:08:31.073

我认为您必须告诉 EF 这是 的反向`Service.ServiceAssignments`导航属性，`ServiceAssignment.Service`而. 现在使用您的映射，您只需指定或有许多. EF 会将导航属性视为单独关系的末端。`Location.ServiceAssignments``ServiceAssignment.Location``Location``Service``ServiceAssignments``ServiceAssignment`

试试映射：

```
modelBuilder.Entity<Location>()
    .HasMany(l => l.ServiceAssignments)
    .WithRequired(sa => sa.Location)
    .HasForeignKey(sa => sa.LocationID);

modelBuilder.Entity<Service>()
    .HasMany(s => s.ServiceAssignments)
    .WithRequired(sa => sa.Service)
    .HasForeignKey(sa => sa.ServiceID); 
```

您可能可以完全删除此映射作为替代方法，因为 EF 应该按照约定检测正确的关系。

因此，要么不使用映射（=按惯例映射），要么使用完整映射（=指定关系的*两端*）。只是您使用的 50% 映射可能是问题所在。

# matlab - 如何在 Matlab 中找到 X 矩阵的元素？

> ID：15979650
> 
> 赞同：0
> 
> 时间：2013-04-12T19:43:02.837
> 
> 标签：matlab, matrix

当我在 Matlab 中有 X（转位）与 X.（非厄米矩阵）的乘积时，如何找到 X 矩阵的元素？

```
X'*X = [ 10+2*i  2+3*i  90+5*i ; 2+36*i 56-3*i 52+37*i  ; 8+13*i   20+13*i  20-9*i ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:57:32.577

# 选项1 -`fsolve`

使用[fsolve](http://www.mathworks.com/help/symbolic/solve.html) - 参见[示例 2](http://www.mathworks.com/help/optim/ug/fsolve.html)。

# 选项 #2 -`solve`

1.  您有`n^2`变量`{a_ij} [i,j = 0,...,n]`，每个变量对应一个矩阵输入。
2.  为每个变量`A'*A`定义一个方程并求解`n^2`方程。例如`A11^2 +A12*A21 +A13*A31 = 10+2*i`。使用符号变量和[求解函数](http://www.mathworks.com/help/symbolic/solve.html)

* * *

```
>> s = solve(a^2+3 ==5, u+v+a ==32, a*u==1)

s = 

    a: [2x1 sym]
    u: [2x1 sym]
    v: [2x1 sym]

>> s.a

ans =

  2^(1/2)
 -2^(1/2)

>> s.v

ans =

 32 - (3*2^(1/2))/2
 (3*2^(1/2))/2 + 32

>> s.u

ans =

  2^(1/2)/2
 -2^(1/2)/2 
```

# javascript - 任务时只需要隐藏特定的“.answer”。再次点击该答案

> ID：15979651
> 
> 赞同：0
> 
> 时间：2013-04-12T19:43:13.117
> 
> 标签：javascript, jquery

现在这个函数隐藏了所有显示的答案。我需要它来仅隐藏属于第二次单击的特定问题的答案。我对 JQuery 很陌生，所以可能有一个简单的解决方案，但任何帮助都会很棒。

```
$(document).ready(function() {
        $(".question").click(function () {
            $('.answer').hide(); // hides open answers before showing a new answer 
        if ($(this).next().is(":hidden")) { // check the visibility of the next element in the DOM
            $(this).next().show(); // show it
        } else {
            $(this).next().hide(); // hide it
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:13:16.023

由于没有 HTML 可供使用，我在[**这里**](http://jsfiddle.net/8gjRY/1/)模拟了一个示例：

**HTML**

```
<span class="question">What is your name?</span>
<span class="answer">Chase</span>
<br/>
<label class="question">How old are you?</label>
<span class="answer">25</span>
<br/>
<label class="question">What is your favorite color?</label>
<span class="answer">Blue</span>
<br/>
<label class="question">Do you like cheese?</label>
<span class="answer">Duh</span> 
```

**JavaScript / jQuery**

```
$(document).ready(function() {
   $(".question").click(function () {
     $(this).next("span.answer").fadeToggle();
   });
}); 
```

我正在使用该[`next`](http://api.jquery.com/next/)方法来获取ed的以下`.answer`内容。`click``question`

# cocoa - NSTabView 中非活动选项卡的窗口大小调整和视图更新

> ID：15979654
> 
> 赞同：0
> 
> 时间：2013-04-12T19:43:19.543
> 
> 标签：cocoa, resize, window, autolayout, nstabview

我有一个带有多个选项卡的 NSTabView，每个选项卡都包含一个 NSScrollView。在 scollviews 中，我动态放置使用自动布局和约束调整大小的自定义视图。

现在，如果我将自定义视图添加到例如。tab1 并在此选项卡处于活动状态时调整窗口大小一切正常，自动布局不会抱怨。

另一方面，如果我将自定义视图添加到 tab1，切换到另一个选项卡，调整窗口大小，然后切换回 tab1 自动布局中断并显示以下消息：

```
Unable to simultaneously satisfy constraints:
(
    "<NSAutoresizingMaskLayoutConstraint:0x4011d8f60 h=-&- v=-&- H:|-(0)-[FlippedDocumentView:0x4011b76e0]   (Names: '|':NSClipView:0x40120eb80 )>",
    "<NSLayoutConstraint:0x4012a5c80 H:|-(10)-[TextViewModuleView:0x401236e80]   (Names: '|':FlippedDocumentView:0x4011b76e0 )>",
    "<NSLayoutConstraint:0x4011148e0 H:[TextViewModuleView:0x401236e80]-(10)-|   (Names: '|':FlippedDocumentView:0x4011b76e0 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x4011d8f00 h=-&- v=-&- H:[FlippedDocumentView:0x4011b76e0]-(0)-|   (Names: '|':NSClipView:0x40120eb80 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x4011d5e00 h=--& v=--& H:[NSClipView:0x40120eb80(0)]>"
) 
```

我的问题是，为什么自动布局对活动选项卡工作正常而对非活动选项卡工作？

* * *

更新：我很确定这是一个错误。我只在自动布局模式下使用 IB 制作了最简单的程序（根本没有代码）：

*   我拖动一个选项卡视图（它会自动获得前导、尾随、顶部和底部约束）

*   在其中一个选项卡上我拖动滚动视图（它会自动获得前导、尾随、顶部和底部约束）

*   在滚动视图上我拖动一个文本字段（它有一些自动约束），但我设置了前导、尾随、顶部和底部约束，以允许使用窗口调整文本字段的大小

因此，现在选择带有滚动视图的选项卡=>文本字段时，我可以调整窗口大小 - 没有问题。但是，当我激活另一个选项卡时，调整窗口大小，然后使用滚动视图激活我的选项卡 - 自动布局抱怨与我之前报告的类似消息。事实上，如果只设置前导和尾随约束，也会发生同样的情况。

任何人都可以尝试复制它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T15:48:35.130

好的，看来切换到 OSX10.8.3 和最新的 XCode 解决了主要问题。

# sql - 仅使用 SELECT 语句模拟具有多行的表

> ID：15979658
> 
> 赞同：7
> 
> 时间：2013-04-12T19:43:40.410
> 
> 标签：sql, tsql, sql-server-2008-r2

如果我可以执行以下选择语句来创建一个具有一个值的表

```
 SELECT 'myname' AS 'Name' 
```

这将返回一个列 = 名称和一个值 = myname 的表

如何解决此问题以仅从 select 语句返回具有多个值的一列

我不想这样做：

```
 DECLARE @tmp TABLE (Name varchar(50)) 

 INSERT INTO @tmp (Name) VALUES ('myname1'),('myname2') 
    SELECT * FROM @tmp 
```

**如果可能的话，只**用一个`SELECT`语句

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T19:48:50.437

如果您想仅使用`SELECT`语句模拟具有多行的表，通常可以使用`UNION`of rows 来完成：

```
SELECT 'myname1' AS 'Name' UNION
SELECT 'myname2' UNION
SELECT 'myname3'
-- etc 
```

演示：[http ://www.sqlfiddle.com/#!3/d41d8/12433](http://www.sqlfiddle.com/#!3/d41d8/12433)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-12T21:36:28.740

或者，您可以在 SELECT 中使用多个 VALUES，例如：

```
SELECT [Name]
FROM (VALUES ('myname1'),('myname2')) AS X([name]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T01:46:00.963

如果您想像示例中那样模拟顺序数据。您可以定义递归`CTE`并像表格一样使用它。

下面的代码将生成 10 条记录

```
;With Users as
(
    Select 1 as ID, CAST('Username1' AS varchar(25)) as Name
        union all
    Select ID + 1 , CAST('Username'+CAST(ID+1 AS varchar(5) ) AS varchar(25))
        from Users
        where ID < 10
)
SELECT * FROM Users 
```

这是 SQL Fiddle [http://www.sqlfiddle.com/#!3/d41d8/12452](http://www.sqlfiddle.com/#!3/d41d8/12452)

但是CTE不能在多个语句中使用。如果您需要在多个语句中使用它。然后将数据从 CTE 插入到临时表或表变量中。

# c++ - boost Range 库会成为下一个 C++ 标准的一部分吗？

> ID：15979661
> 
> 赞同：4
> 
> 时间：2013-04-12T19:43:48.827
> 
> 标签：c++, boost, c++11, c++14, boost-range

我正在尝试确定是否可以开始在代码中使用基于范围的算法。如果它更有可能成为 c++ 标准的一部分，我可以在新代码中从 boost 中使用它。尽管它看起来比迭代器好得多，但它可能会让其他人难以审查和为项目做出贡献。我在这里的论文列表中没有找到。[http://www.meetingcpp.com/](http://www.meetingcpp.com/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T19:48:54.537

围绕范围仍有很多讨论和工作。

[http://isocpp.org/blog/2013/01/update-from-the-ranges-study-group](http://isocpp.org/blog/2013/01/update-from-the-ranges-study-group)

现有的升压范围不太可能以目前的形式标准化。但这并不意味着您不应该继续使用现有的可用工具来改进您自己的程序。

# android - android-junit-report 创建的 adb pull junit-report.xml 权限被拒绝

> ID：15979665
> 
> 赞同：0
> 
> 时间：2013-04-12T19:44:00.353
> 
> 标签：android, junit, adb

我正在使用[android-junit-report](http://zutubi.com/source/projects/android-junit-report/documentation/)能够在我的 Jenkins 机器中发布 Junit 测试结果报告。我遵循了该文档，它说：

*注意：默认情况下，只有被测应用程序才能完全访问存储报告的目录。例如，除非您有根设备，否则您将无法列出目录的内容。但是，运行程序将该文件标记为全球可读，因此知道您可以从设备中提取它的完整路径。*

当我尝试**adb pull**时，我得到**了权限被拒绝**。有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:46:50.367

您应该将 reportDir 设置为外部存储中的某个位置：

> 报告目录
> 
> 如果指定，则为写入报告文件的目录的绝对路径。**可能以external**开头，它将替换为被测应用程序的外部存储区域的路径。这需要外部存储可用并且在被测应用程序中具有 WRITE_EXTERNAL_STORAGE 权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:15:45.430

junit-report 生成与权限问题无关，只要在 /data/data/package_name/ 下的任何位置创建它

你能在ddms中看到文件吗？如果你这样做，你对 Junit-report 没有任何问题。离开junit-report方面。但如果你不这样做，你可以尝试一些其他的仪器，比如[这个](http://zutubi.com/source/projects/android-junit-report/)。

现在，如果您看到该文件，那么用 adb 解决问题？

*   这是关于这个特定设备的吗？尝试不同的。
*   错误的路径？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T20:24:30.507

我设法使用[此处输入链接描述](http://zutubi.com/source/projects/android-junit-report/documentation/)中给出的**蚂蚁**解决方案来解决。我不知道该文件是否是世界可读的，但我的设备上的**adb pull**返回权限被拒绝。也许这取决于设备类型。

 **我在 build.xml 中添加：

```
<target name="fetch-test-report" >
    <xpath
        expression="/manifest/@package"
        input="${tested.project.dir}/AndroidManifest.xml"
        output="tested.package" />
    <echo>Downloading XML test report...</echo>
    <exec
        executable="${adb}"
        failonerror="true" >
        <arg line="${adb.device.arg}" />
        <arg value="pull" />
        <arg value="/data/data/${tested.package}/files/junit-report.xml" />
        <arg value="report/junit-report.xml" />
    </exec>
</target> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-14T10:17:26.863

复制到 sdcard/datas/ 然后再拉。希望好玩**

# python - 将命令的输出重定向到python中的文件，如何做到这一点

> ID：15979670
> 
> 赞同：-3
> 
> 时间：2013-04-12T19:44:06.807
> 
> 标签：python, output, redirect

我正在尝试将命令的值输出到文件。我试过了：

```
threaddump() >> /dir/newdir/newfile.log 
```

它不工作。

那么，如何将命令的输出重定向到目录中的文件？python的版本是2.3.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:27:19.687

您的方法存在误解。Python 不是一个 shell，而是一个简单的解释器。shell 允许启动程序，并且它总是可以[1] 向启动的程序提供一些上下文数据，例如环境变量、当前工作目录以及用于重定向到文件的标准 IO 流（stdin、stdout、stderr）。由于任何 Python 函数都与调用者在同一进程中运行，因此它可以使用相同的全局对象，其中包括流。

这为您提供了几种解决问题的方法：

1.  临时将 sys.stdout 重定向到文件。如果更改调用的代码不是一个好的选择，这尤其有用，否则我宁愿不这样做，因为它会影响整个过程。

2.  从函数返回数据并将其打印到调用者站点的文件中。

3.  将文件传递给函数，函数打印到该函数。

[1] 我知道的唯一例外是 MS Windows CE，它没有环境变量、工作目录或传递标准 IO 流的方法。

# jquery - 使用 jQuery IE7 下拉的 JSON 提要

> ID：15979675
> 
> 赞同：0
> 
> 时间：2013-04-12T19:44:24.737
> 
> 标签：jquery, json, select

我正在尝试使用来自 accessdb 的 JSON 提要使用 Jquery 填充 Drop Down Select 元素（一个很棒的 Javascript 库，用于将访问 .mdb 文件作为本地数据库访问）。

我的 HTML：

```
<select id="instructors"></select> 
```

我的Javascript：

```
$(document).ready(function(){

     var myDB = new ACCESSdb("accessdb.mdb", {showErrors:true});

     var instructorquery = "SELECT * FROM Instructors";

     var instructorJson = myDB.query(instructorquery, {json:true});
     $.each(instructorJson, function(key, value) {   
                    $('#instructors').append($("<option></option>").attr("value", key).text(value));  
    });

}); 
```

alert(instructorJson) 的输出是：

```
[{"ID":"1","Name":"Capt Hogg","Date last completed":"8/4/2013"},{"ID":"2","Name":"Capt Baker","Date last completed":"8/4/2013"}] 
```

所以提要正在工作。IE7 抛出“预期对象”错误。

我承认自己是一个学习者，如果我的错误很明显，请原谅我。

**编辑 Palash 下面的答案适用于现代浏览器。我找到了 IE7 的解决方案（见下文）。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:47:39.517

尝试这个：

```
$.each(instructorJson, function (key, value) {
    $('#instructors').append($("<option></option>").attr("value", value.ID).text(value.Name));
}); 
```

[**在这里演示**](http://jsfiddle.net/6PmzC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:31:09.777

我通过添加 JSON.parse 并[在此处](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)使用 Douglas Crockfords Json2 库使其工作：（这是一个 IE7 修复程序，Palashs 的答案适用于体面的浏览器）。

```
$(document).ready(function(){

 var myDB = new ACCESSdb("accessdb.mdb", {showErrors:true});

 var instructorquery = "SELECT * FROM Instructors";

 var instructor = myDB.query(instructorquery, {json:true});
var instructorJson = JSON.parse(instructor);
 $.each(instructorJson, function (key, value) {
$('#instructors').append($("<option></option>").attr("value", value.ID).text(value.Name));
});
    }); 
```

感谢您对帕拉什的支持

我讨厌 IE ;(

# neo4j - Neo4j 匹配多个关系

> ID：15979677
> 
> 赞同：4
> 
> 时间：2013-04-12T19:44:28.777
> 
> 标签：neo4j, cypher

如何编写一个查询来获取与集合的所有节点有关系的节点。例如：

```
START n=node:people("username:*"), 
g=node:groups("groupname:A groupname:B") 
MATCH n-[:M]->g 
RETURN n 
```

这将返回与 A*或*B 有关系的用户。但我想要与 A*和*B 有关系的用户。但我不知道该怎么做。

编辑：

我需要对任意数量的组执行此操作，而不仅仅是 A 和 B。我使用索引语法的原因是这是来自用户输入，所以它可能是这样的：

```
START n=node:people("username:*"), 
g=node:groups("groupname:*") 
MATCH n-[:M]->g 
RETURN n 
```

而且我需要返回与所有组有 M 关系的用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:59:59.880

```
START n=node:people("username:*"), 
g=node:groups("groupname:*") 
with n, collect(g) as groups
MATCH n-[:M]->ug
with n, collect(ug) as user_groups
where ALL(g in groups WHERE g in user_groups)
RETURN n 
```

它甚至可能像这样工作（应该更快）

```
START n=node:people("username:*"), 
g=node:groups("groupname:*") 
with n, collect(g) as groups
MATCH n-[:M]->ug
WHERE ug in groups
with n, count(*) as found, length(groups) as group_count
WHERE found = group_count
RETURN n 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:57:15.890

将 A 组和 B 组分成不同的变量，然后确保每个匹配项单独存在。

```
START n=node:people("username:*"), 
gA=node:groups("groupname:A"),
gB=node:groups("groupname:B") 
MATCH n-[:M]->gA, n-[:M]->gB 
RETURN n 
```

# javascript - JSLint 严格违规。面向对象的 Javascript 挫折

> ID：15979678
> 
> 赞同：3
> 
> 时间：2013-04-12T19:44:34.823
> 
> 标签：javascript, jslint, strict, use-strict

我正在尝试学习在 JavaScript 中进行面向对象的编程并严格违反 JSLint。我知道我在非全局环境中使用它（或类似的东西......），但我不知道如何正确地做到这一点。这是我的代码：

```
function piece(color, type, x, y, captured, hasMoved) {
    "use strict";
    this.color = color;
    this.type = type;
    this.x = x;
    this.y = y;
    this.captured = captured;
    this.hasMoved = hasMoved;

    this.movePiece = movePiece;
    function movePiece(x, y) {
        // if(isLegal(x, y, this.type){
            // this.x  =  x;
            // this.y  =  y;
        // }
         alert("you moved me!");
    }
}

var whitePawn1  =  piece("white", "pawn", 0, 1, false, false);
var blackBishop1  =  piece("black", "bishop", 8, 3, false, false); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T19:47:44.923

您需要将您的`piece`函数用作构造函数——换句话说，使用`new`关键字调用它。

~~就目前而言，`this`您的函数内部是全局对象。基本上，您不是创建一个新对象并向其添加属性，而是用垃圾来破坏全局对象。~~

由于您处于严格模式，`this`因此将未定义，因此您的代码将出错。

这就是你想要的：

```
function Piece(color, type, x, y, captured, hasMoved) {
    "use strict";
    this.color = color;
    this.type = type;
    //...

var whitePawn1  = new Piece("white", "pawn", 0, 1, false, false);
var blackBishop1  = new Piece("black", "bishop", 8, 3, false, false); 
```

请注意，我重命名为`piece`以大写字母开头，因为按照惯例应该使用构造函数。

* * *

另外，假设像这样的构造函数确实是您想要的，与 Ian 的回答相比，您应该考虑将`movePiece`函数移出函数的原型，这样就不必每次创建函数时都重新创建一个新片。所以这

```
this.movePiece = movePiece;
function movePiece(x, y) {
   //...
} 
```

会变成这样

```
//this goes **outside** of your function
Piece.prototype.movePiece = function movePiece(x, y) {
       //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T20:16:54.957

啊，谢谢亚当·拉基斯。做到了。作为参考，这是我的最终 JSLint 验证代码：

```
function Piece(color, type, x, y, captured, hasMoved) {
    "use strict";
    this.color = color;
    this.type = type;
    this.x = x;
    this.y = y;
    this.captured = captured;
    this.hasMoved = hasMoved;
}
Piece.prototype.movePiece = function movePiece(x, y) {
    "use strict";
    /*global alert */
    alert("you moved me to " + x + ", " + y + "!");
};
var whitePawn1  =  new Piece("white", "pawn", 0, 1, false, false);
var blackBishop1  =  new Piece("black", "bishop", 8, 3, false, false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T19:57:28.107

我不确定它在内部/功能上会有什么不同，但你可以使用：

```
function piece(color, type, x, y, captured, hasMoved) {
    "use strict";
    return {
        color: color,
        type: type,
        x: x,
        y: y,
        captured: captured,
        hasMoved: hasMoved
    };
}

var whitePawn1 = piece("white", "pawn", 0, 1, false, false); 
```

不需要使用`this`or `new`。

尽管我猜您不能使用 将`.prototype`共享属性/方法应用于所有实例。并且返回的对象初始化也是额外的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T19:50:34.897

在调用构造函数之前，您缺少`new`关键字。代码应如下所示：

```
var whitePawn1    = new piece("white", "pawn", 0, 1, false, false);
var blackBishop1  = new piece("black", "bishop", 8, 3, false, false); 
```

在你的情况下，用大写字母命名构造函数也是一个很好的模式`Piece`

说明：没有`new`你的构造函数可能会破坏他们调用的环境。创建新环境并将其`new`绑定到构造函数。

# java - 如何在 Java 中处理 csv 数据中的逗号

> ID：15979688
> 
> 赞同：1
> 
> 时间：2013-04-12T19:45:05.470
> 
> 标签：java, csv, java.util.scanner

我正在使用scanner.delimiter 来拆分我的csv，分隔符是“，”。但是，我有一些数据在数据中包含逗号，例如“Monsters, Inc.”。

但是，如果我将分隔符设置为“\”，\“”，那么它会在其他所有内容上崩溃。

不需要我编写自己的scanner.delimiter 方法的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T19:48:05.423

我认为scanner.delimiter 不适用于此类问题。如果您在存在额外逗号的数据中有引号，则可以使用正则表达式或代码来解决此类问题，也可以使用类似答案/问题中提到的 String.split。如果你没有报价，那么你真的无能为力。

stackoverflow上有类似的例子。例如，我认为这适用于您：

[使用 String.split() 将带有引号的 csv 文件拆分为文本分隔符](https://stackoverflow.com/questions/15738918/splitting-a-csv-file-with-quotes-as-text-delimiter-using-string-split/15905916#15905916)

**使用拆分**

```
public static void main(String[] args) {
    String s = "Sachin,,M,\"Maths,Science,English\",Need to improve in these subjects.";
    String[] splitted = s.split(",(?=([^\"]*\"[^\"]*\")*[^\"]*$)");
    System.out.println(Arrays.toString(splitted));
} 
```

**使用自定义代码**

```
public static ArrayList<String> customSplitSpecific(String s)
{
    ArrayList<String> words = new ArrayList<String>();
    boolean notInsideComma = true;
    int start =0, end=0;
    for(int i=0; i<s.length()-1; i++)
    {
        if(s.charAt(i)==',' && notInsideComma)
        {
            words.add(s.substring(start,i));
            start = i+1;                
        }   
        else if(s.charAt(i)=='"')
        notInsideComma=!notInsideComma;
    }
    words.add(s.substring(start));
    return words;
} 
```

# box-api - 搜索最近创建的文件夹没有结果

> ID：15979692
> 
> 赞同：0
> 
> 时间：2013-04-12T19:45:24.253
> 
> 标签：box-api

我能够通过 v2 API 在我的 Box 帐户的根目录中成功创建一个文件夹。但是，如果我立即对其发出搜索请求，我将得不到任何结果。如果我等待一段时间（可能是 20 分钟）然后发出搜索请求，则返回我创建的文件夹。

Box 端是否有一些缓存？如果是这样，有没有办法通过 API 或一些解决方法使缓存无效？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T23:08:50.900

正在发生的是文件的后台后端处理。就像一个新网站在谷歌有时间“了解”新网站之前不会出现在谷歌搜索中一样，Box 的搜索引擎必须处理文件并将内容的文本版本添加到 Box 搜索引擎。添加所需的确切时间取决于很多变量，包括文件的大小和格式。

如果您将大型文档上传到 Box，然后尝试立即预览，您会看到几乎相同的行为。Box 会发出一些魔法，将您的文件转换为可预览的格式。除了预览的情况，Box 网站会给你一些反馈，说“正在生成预览”。搜索栏不会告诉您“将新文件添加到搜索索引”。

这主要是因为 Box 更重要的是获取您的文件并确保我们安全地存储它并让您知道 Box 拥有它。几毫秒后，我们开始处理您的文件以进行全文搜索以及我们所做的所有其他处理。

# javascript - 在 Marionette 中使用变量作为区域名称

> ID：15979695
> 
> 赞同：0
> 
> 时间：2013-04-12T19:45:41.067
> 
> 标签：javascript, backbone.js, marionette, javascript-objects

我正在构建一个大量使用 Marionette 的布局和区域的应用程序。但是，我希望能够在渲染时将变量作为区域传递，就像这样。

```
var x = "main_region";
someLayout.x.show(new SomeView()); 
```

但是，我不断收到这样的错误：

```
TypeError: 'undefined' is not an object (evaluating 'someLayout.x.show') 
```

这可能只是一个纯 Javascript 错误，或者是主干错误，或者是 Marionette 错误。有人有建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:35:27.687

somelayout[x].show( ... ) 是您正在寻找的语法。在 JS 中，所有成员都可以使用 . 或 [] 符号。前者更易于阅读和优化工具，但后者支持变量。

# python - 使用 python-zmq 的多个 ipc 发布者和一个订阅者

> ID：15979701
> 
> 赞同：1
> 
> 时间：2013-04-12T19:46:14.773
> 
> 标签：python, zeromq, pyzmq

我想知道是否可以使用 zmq ipc 为一个订阅者设置多个 ipc 发布者...

抽象地说，我只有一个这样的发布者，但我需要运行它的多个实例来获取多种数据类型，但每次都发布相同的格式。

```
 context = zmq.Context()
    publisher = context.socket(zmq.PUB)
    publisher.connect("ipc://VCserver")
    myjson = json.dumps(worker.data)
    publisher.send(myjson) 
```

我的订阅者：

```
 context = zmq.Context()
    subscriber = context.socket(zmq.SUB)
    subscriber.bind("ipc://VCserver")
    subscriber.setsockopt(zmq.SUBSCRIBE, '')
    while True:
        response = subscriber.recv()
        if response:
            data = json.loads(response)
            check_and_store(data) 
```

我的订阅者每次都从数据中检查相同的参数并将其存储在数据库中。

我不知道这是否可能，因为这种通信模式使用共享文件，也许我应该考虑每个实例的发布者 - 订阅者对......

已编辑：每个发布者将发送 2kb aprox，100 次/秒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:17:03.493

您绝对可以有多个发布者，唯一的限制是您不能在一个 IPC 套接字上拥有多个*绑定*器- 每个连续的绑定只会破坏以前的绑定（与 TCP 相反，如果您尝试绑定到已经在- 使用界面）。您的情况应该可以正常工作。

# actionscript-3 - Actionscript 3：将坐标从对象的 3D 空间转换到另一个空间？

> ID：15979702
> 
> 赞同：3
> 
> 时间：2013-04-12T19:46:17.560
> 
> 标签：actionscript-3, flash, 3d

我觉得这可能已经在这里被问过/回答了，如果是这样，我为带宽道歉，但我没有看到任何解释。

在 Flash AS3 中如何从一个对象的坐标空间转换到另一个对象的坐标空间？我可以在对象中取一个点并使用 local3DToGlobal() 将其转换为全局坐标，然后使用 globalToLocal3D() 将其转换为另一个对象的本地坐标——但有直接的方法吗？

因此，如果我希望一个对象能够对另一个对象说：“将你的左上角移动到我的左上角”，即使这两个对象位于不同的 z 空间中、3 维旋转等。

我假设它在 matrix3D 矩阵操作中——</p>

矩阵乘法？变换向量（）？deltaTransformVector（）？

我一直在研究 API，但非常感谢一个具体的例子。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T01:21:25.880

一种方法是[`getRelativeMatrix3D()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Transform.html#getRelativeMatrix3D%28%29)，从`transform`显示对象的属性中调用，如：`transform.getRelativeMatrix3d(root).position`。

> 返回一个 Matrix3D 对象，该对象可以将指定显示对象的空间相对于当前显示对象的空间进行变换。您可以使用 getRelativeMatrix3D() 方法相对于另一个 3D 显示对象移动一个 3D 显示对象。

在 Adob​​e 的[Performing complex 3D transformations](http://help.adobe.com/en_US/as3/dev/WSA340940C-A537-450c-8069-A4A052A98CAA.html)中，有一个使用 Matrix3D 对象进行重新排序显示的示例，其中对框的面进行重新排序以确保 3D 显示对象的分层对应于应用旋转后的相对深度：

```
var faces:Array;

for (var i:uint = 0; i < 6; i++) 
{ 
    faces[i].z = faces[i].child.transform.getRelativeMatrix3D(root).position.z; 
    this.removeChild(faces[i].child); 
} 
faces.sortOn("z", Array.NUMERIC | Array.DESCENDING); 
for (i = 0; i < 6; i++) 
{ 
    this.addChild(faces[i].child); 
} 
```

# c# - c#arraylist搜索混乱

> ID：15979713
> 
> 赞同：0
> 
> 时间：2013-04-12T19:47:08.007
> 
> 标签：c#, search, arraylist

我在搜索我的`Arraylist`. 数组列表存储有关多个团队的各种信息，例如他们徽标的图像路径和团队名称等。它是使用一个单独的数据文件填充的`StreamReader`

我希望用户`Textbox`从 Windows 表单中输入一些内容，例如团队名称，然后程序将在我的数组列表中搜索所述字符串并打开另一个表单，其中搜索团队的信息将加载到屏幕上使用`Form.Load`程序_

简而言之。

```
private void btn_Search_Click(object sender, EventArgs e)
{
   //what code do I write here?
} 
```

我知道我可能对我目前的编码知识有点深入，因此将不胜感激。

编辑：不幸的是它必须在一个数组列表中，很抱歉给您带来不便。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:54:36.990

如果您可以使用 LINQ：

```
string nameToMatch = "Tigers"; //can you tell who's from Michigan?
List<Team> teams = new ArrayList<Team>();
//fill team data here

Team selected = teams.FirstOrDefault(t => t.TeamName.Equals(nameToMatch, StringComparison.OrdinalIgnoreCase)); 
```

像这样的东西应该工作。（这将与文本完全匹配，但允许搜索不区分大小写。您可以[在此处](http://msdn.microsoft.com/en-us/library/vstudio/cc165449.aspx)阅读其他选项。）

如果你想匹配所有“部分匹配”的列表，你可以这样做：

```
List<Team> matchedTeams = teams.Select(t => t.TeamName.Contains(nameToMatch)); 
```

阅读[此处](https://stackoverflow.com/a/444818/128217)以获取包含`StringComparison`枚举值的扩展重载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T20:10:26.733

如果您像我一样不熟悉 LINQ，您可以使用 foreach 循环。像这样的东西：

```
String nameToMatch = textBox1.text; //read from the text box
foreach (Object obj in Teams) 
{
   MyTeam team = (MyTeam)obj; //MyTeam is an object you could write that would store team information.
   if (team.TeamName.ToUpper() == nameToMatch.ToUpper()) //case insensitive search.
   {
       FormTeam frmTeam = new FormTeam(team); //windows form that displays team info.
       frmTeam.Visible = true;
       break; //if team names are unique then stop searching.
   }
} 
```

最坏的情况非常糟糕，但至少对我来说，它比 LINQ 更容易理解。祝你好运，希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T20:37:32.433

您可以使用一些这样的代码来填充您的数组列表：

```
 // ArrayList class object
    ArrayList arrlist = new ArrayList();

    // add items to arrlist collection using Add method
    arrlist.Add("item 1");
    arrlist.Add("item 2");
    arrlist.Add("item 3");
    arrlist.Add("item 4");
    arrlist.Add("item 5"); 
```

并使用像这样的一些代码在你的数组列表中搜索

```
string teamName= this.txtTeamName.Text;
// for loop to get items stored at each index of arrlist collection
for (int i = 0; i < arrlist.Count; i++)
{
    if(arrlist[i].toString()==teamName)
      // open a new form for show the found team details
} 
```

更改“团队详细信息”表单的创建者以获得“团队名称”是一个很好的做法

```
frmTeamDetails(team myteam) 
```

然后在上面的 FOR 语句中使用此代码：

```
frmTeamDetals frm=new frmTeamDetals(teamName);
frm.ShowDialog(); 
```

# .net - 如何保护 WebAPI 应用程序/HTML+JS 客户端？

> ID：15979714
> 
> 赞同：3
> 
> 时间：2013-04-12T19:47:15.000
> 
> 标签：.net, asp.net-mvc, security, authentication, asp.net-web-api

过去一周我在 SO 和阅读有关身份验证的书籍中度过，并开始为我的 WebAPI 推出基本身份验证，以便 HTML*客户端*可以让*用户*登录/注册/注销，但基本身份验证不利于注销，所以我'米回到广场一。

细节：

1.  我不需要让用户使用其他服务登录。我不需要 facebook 或 google 登录。只是一个用户名/密码。

2.  我需要用户能够从客户端应用程序（而不是浏览器）登录/注销/注册。

3.  我不介意通过网络发送凭据，因为我将使用 SSL。

4.  目前只有一个客户端，但会有其他客户端访问 API，所以我将来需要实现类似于 api 密钥的东西。也许这是一个单独的问题。

5.  我有一个 RESTish WebAPI，它接受/返回 JSON 给其他域中的 html/js 客户端。

6.  这是用于原型设计的，所以我不需要最好的解决方案，只需要对预发布足够好并且实现时间短的东西。

我应该从哪里开始？你会怎么做，为什么？表单身份验证是一种选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:52:27.640

在你的问题中

> 我不介意通过网络发送凭据，因为我将使用 SSL。

在对您所说的答案的评论中

> 我只是不希望用户通过网络发送明文密码。

不确定您到底在寻找什么，但表单身份验证绝对是一种选择。您也可以使用基本身份验证，但它有您提到的一些缺点：没有注销等。您必须使用带有基本身份验证的 HTTPS。

如果浏览器弹出是主要问题，您可以通过在第一个请求中抢先发送凭据来解决这个问题。通常，第一个请求没有 Authorization 请求标头。服务以 401 响应并发回指示基本方案的 WWW-Authenticate 响应头。这是浏览器弹出对话框并询问用户ID和密码，将其打包在基本方案中并发送授权标头的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:55:07.890

首先，更重要的是；SSL, SSL *SSL* 这是一个非常简单的步骤，即使是主要网站都错过了，但它非常重要（即使 SSL 存在许多当前难以利用的缺陷）。

您可以使用 webapi 进行几乎任何类型的身份验证；基本身份验证；证书; 你可以看看使用 OAUTH 风格的身份验证（注意我说的是风格，因为规范的定义很松散，它提供了几乎每一个选项和多种实现方式）。

首先，我将 WebApi 视为一种选择；你考虑过别的吗？例如[http://www.servicestack.net/](http://www.servicestack.net/)它包含一系列的身份验证适配器[https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)

其次，了解您的身份验证内容及其身份验证内容（私人数据/上传/访问某些内容）会很有帮助；为了得到一个包含“足够安全”的答案。

“可以”使用表单身份验证，并且假设您的客户端不是基于浏览器的，您可以通过服务返回登录名并使用您需要在使用期间保留在某种上下文中的表单身份验证令牌进行响应来实现此目的；假设一旦软件完成使用 api 就设置了超时，那么用户下次必须再次登录才能重用它。

* * *

就 web api / JS-Html 前端而言；引用我自己的话。

> 作为一个 JS 应用程序，它可能值得快速浏览一下与 JS 相关的 owasp 前 10 名
> 
> [http://erlend.oftedal.no/blog/?blogid=125](http://erlend.oftedal.no/blog/?blogid=125)

```
A1 - Injection
A2 - Cross Site Scripting (XSS)
A3 - Broken Authentication and Session Management
A4 - Insecure Direct Object References
A5 - Cross Site Request Forgery (CSRF)
A6 - Security Misconfiguration
A7 - Insecure Cryptographic Storage
A8 - Failure to Restrict URL Access
A9 - Insufficient Transport Layer Protection
A10 - Unvalidated Redirects and Forwards 
```

* * *

这里有一篇关于为 WebApi 创建自定义授权过滤器的好帖子[http://www.west-wind.com/weblog/posts/2013/Apr/18/A-WebAPI-Basic-Authentication-Authorization-Filter](http://www.west-wind.com/weblog/posts/2013/Apr/18/A-WebAPI-Basic-Authentication-Authorization-Filter) (how-to /带代码）

# ruby-on-rails - 在 Rails ActiveRecord 中事务开始之前是否有一个回调运行？

> ID：15979717
> 
> 赞同：0
> 
> 时间：2013-04-12T19:47:28.120
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我只想在新创建或更新模型级对象时对其进行操作。例如，假设有一个带有 name 属性的测试表：

```
class Test < ActiveRecord::Base
  custom_callback :hi
  def hi
    name = "h"
  end
end
m = Test.new(:name => "hello")
m.save 
```

我只想编写一个自定义回调，它应该在 before_validation 之前执行，并且应该在保存或保存时执行！叫做。理想情况下，我希望在 rails 2.3 中有一些回调，它应该被执行并挂接到 ActiveRecord::Base。是否有任何宝石可以做到这一点，或者有人知道如何编写一个在“before_validation”回调之前执行的回调吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:11:41.977

您可以覆盖`save`and`save!`方法来有效地注入代码。`initialize`根据您要执行的操作，还有可能适合的方法。此外，`before_validation`运行 before `validate`，那么您需要提前多长时间才能准确运行，为什么？

你能多说一下你**为什么**要这样做吗？听起来您可能遇到了设计问题，并且您正在尝试寻找破解方法，而不是解决更基本的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T20:39:11.850

看来您正在寻找 before_save，它在验证后运行：http: [//api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

请参考[这个答案](https://stackoverflow.com/questions/6249475/ruby-on-rails-callback-what-is-difference-between-before-save-and-before-crea)

# javascript - 注册一个具有多个视图的 Backbone 模型

> ID：15979719
> 
> 赞同：1
> 
> 时间：2013-04-12T19:47:41.837
> 
> 标签：javascript, backbone.js

这是一个架构问题。假设我有一个模型，N 个视图可能（或可能不）绑定到它。如何在此模型中进行更改以使所有视图都更改？我怀疑必须有一些设计模式。我想过让我的主干模型有一个视图数组，并有一个函数可以简单地通过所述数组并将视图的名称作为事件触发。

这是一种方法吗？我可以使用什么模式？我应该如何构建这样的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:52:38.523

您的模型不应该知道呈现它的视图，以保持 MVC 关注点分离。阅读有关[events](http://backbonejs.org/#Events)的文档。您可以让您的视图监听`change`事件，然后相应地更新自己。

[Views](http://backbonejs.org/#View)的文档有一个很好的例子：

```
var DocumentRow = Backbone.View.extend({

  tagName: "li",

  className: "document-row",

  events: {
    "click .icon":          "open",
    "click .button.edit":   "openEditDialog",
    "click .button.delete": "destroy"
  },

  initialize: function() {
    this.listenTo(this.model, "change", this.render);
  }

  render: function() {
    ...
  }

}); 
```

# gcc - Fortran 语法基础？

> ID：15979724
> 
> 赞同：1
> 
> 时间：2013-04-12T19:47:52.747
> 
> 标签：gcc, cygwin, gfortran, fortran95

所以我试图让我的 Fortran 95 代码仅用于基本功能和程序定义。对于每行“意外”或“未分类”，我几乎都会得到一个错误。我想知道它是我的编译器（在 cygwin 终端中使用的 gfortran）还是我应该在文件的开头放一些东西？如果有人可以告诉我任何事情，那就在这里。

```
 double precision :: pi = 3.14159265359

    PROGRAM Diffraction
            write (*,*) sinc(0)
            write (*,*) sinc(pi)
            write (*,*) 1_Slit(0, 1, 550E-9)
    end PROGRAM Diffraction

    function SINC(angle) result(sinc)
    double precision :: sinc
    double precision :: angle
    if angle == 0.0 then
            sinc == 1
    else
            sinc = (sin(angle)/angle)
    endif
    end function SINC

    function I(angle, d, wl) result(I)
            double precision :: I_0 = 0.01
            double precision :: angle, d, wl, I
            A = (d * pi)/wl
            B = SIN(angle)
            I = I_0 * (SINC(A*B)**f2)
    return
    end function I 
```

我编译的方式是：gfortran Diffraction.f95

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:43:09.147

一般来说，将所有定义放在主程序或模块中是个好主意。所以你的“浮动”定义有点奇怪。

您的程序应该`PROGRAM [name]`以您使用的模块开头。在您的情况下，没有这样的模块。在此之后，编写`IMPLICIT NONE`. 这意味着，没有变量具有预定义的类型。`I`否则，每个以to开头的变量`N`都是 type `INTEGER`，而其他所有变量都是 type `REAL`。

下一部分是变量定义部分，在这里定义您的变量。（您示例中的第一行。）

在此之后，主要部分是执行代码的地方。

最后一部分是`CONTAINS`放置函数和子例程的部分，它可以使用程序中定义的每个变量（但这将是不好的实践......）。

所以你的例子（有一些更正）看起来像：

```
PROGRAM Diffraction
IMPLICIT NONE

double precision :: pi = 3.14159265359d0

  write (*,*) sinc(0.d0)
  write (*,*) sinc(pi)
  write (*,*) one_slit(0.d0, 1.d0, 550.d-9)

CONTAINS

  function SINC(angle) result(snc)
    double precision :: snc
    double precision :: angle

    if (angle == 0.d0) then
      snc = 1.d0
    else
      snc = (sin(angle)/angle)
    endif
  end function SINC

  function one_slit(angle, d, wl) result(I)
    double precision :: I0 = 0.01d0, A, B
    double precision :: angle, d, wl, I, f2=2.d0

      A = (d * pi)/wl
      B = SIN(angle)
      I = I0 * (SINC(A*B)**f2)
  end function one_slit

end PROGRAM Diffraction 
```

# c - 如何使用变量 p 声明一个指向函数的新指针，使用以下

> ID：15979728
> 
> 赞同：-1
> 
> 时间：2013-04-12T19:48:06.830
> 
> 标签：c

我`p`喜欢：

```
typedef int (*p)(); 
```

假设我要声明指针的函数是`int foo()`. 我想使用变量 p 声明一个指向函数 foo 的新指针，以使用 typedef 语句，例如：

```
typedef int emp[10]; 
emp p;// so now p is an array of size 10 of type int 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:58:53.193

1.  `p`是：

    ```
    typedef int (*p) (); 
    ```

2.  foo() 是：

    ```
    int foo(){
    } 
    ```

3.  `p`类型变量是`f`：

    ```
    p  f = &foo; 
    ```

4.  如何使用指针调用：

    ```
    (*f)(); 
    ```

示例代码：

```
#include<stdio.h>
int foo(){
 printf("\n In FOO\n");
 return 4;
}
typedef int(*p)();

int main(){
 p f = &foo;
 int i = (*f)();
 printf("\n i = %d\n", i);
 return 1;
} 
```

你会发现它[**在键盘上工作。**](http://codepad.org/qKUg2h5W)

**注意：**您可以像在[键盘](http://codepad.org/zU9bKhp6)上找到的第二种形式 一样*简单地*分配`p f = foo;`和调用`f()`

编辑：正如@Akash 评论的：

它编译并运行如下：

```
~$ gcc x.c -Wall 
~$ ./a.out 
 In FOO
 i = 4 
```

[这是一个](http://www.cs.rit.edu/~ats/books/ooc.pdf)帮助解释函数指针有用性的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:49:57.927

```
int foo()
{
   // do something
}

typedef int (*p)();

int main( int argc, char** argv )
{
    int result;

    p funcPtr = foo;    
    result = funcPtr();

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:56:46.957

使用 typedef：

```
typdef int (*FunctionPtr)();

int foo()
{
    return 4; // chosen by fair dice roll, should be random
}

FunctionPtr fptr = foo; // or &foo 
```

没有 typedef：

```
int (*fptr)() = foo; // or &foo 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T20:01:05.047

来自这篇文章：[将 C 函数数组转换为 C++ 函数指针数组？](https://stackoverflow.com/questions/11591165/convert-c-function-array-to-c-functions-pointer-array)

```
 #include <stdio.h>

void f1() {printf("helo\n");}
void f2() {printf("world\n");}

typedef struct func
{
    void (*f)();
}func;

int main()
{
    func a[] = {{f1}, {f2}};
    a[0].f();
    return 0;
} 
```

# xslt - 我们如何在 xslt 中将 XML 元素转换为不同的命名空间

> ID：15979732
> 
> 赞同：3
> 
> 时间：2013-04-12T19:48:17.940
> 
> 标签：xslt, xslt-1.0, xml-namespaces

我有一个输入 xml

```
<Request xmlns="http://hgkg.ghg.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">

   <AppointmentInfo xmlns="">

      <AppointmentId/>

      <CountryCode>US</CountryCode>

      <Division>A</Division>
    </AppointmentInfo>
  <AppointDate xmlns="">
   <Day>Monday</Day>
    <Date>April 2</Date>
  <AppointDate>

</Request> 
```

我需要这样的输出

```
<Request xmlns="http://hgkg.ghg.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">

   <AppointmentInfo>

      <AppointmentId/>

      <CountryCode>US</CountryCode>

      <Division>A</Division>
    </AppointmentInfo>
    <AppointDate>
       <Day>Monday</Day>
        <Date>April 2</Date>
      <AppointDate>
</Request> 
```

我只想删除其中的 xmlns="" 并假设响应 AppointmentInfo 和 ApppointDate 在 hgkg 命名空间中。我想转换为它..请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:45:04.287

基于[JLRishe 之前的回答](https://stackoverflow.com/a/15978939/423105)，你可以试试这个：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*/*">
    <xsl:element name="{name()}" namespace="{namespace-uri(/*)}">
      <xsl:apply-templates select="@* | node()"/>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

这意味着，每个不是最外层元素 ( `match="*/*"`) 的元素都被复制到具有相同名称但具有最外层元素 ( `namespace-uri(/*)`) 的命名空间的输出元素。

看看有没有效果...

# ant - 业力 - JUnitReport - ANT：空报告

> ID：15979738
> 
> 赞同：1
> 
> 时间：2013-04-12T19:48:32.407
> 
> 标签：ant, junit, angularjs, karma-runner

我有一些正常运行的 AngularJS E2E 测试，并将记者设置为：

```
...
reporters = ['junit'];
junitReporter = {
    outputFile : 'test/e2e-results.xml',
    suite : 'e2e'
};
... 
```

生成报告 xml 文件并包含 testsuites->testsuite->testcases...的层次结构。

我正在尝试使用 ANT 生成 HTML 报告。

```
<junitreport todir="./reports">
   <fileset dir="./reports">
      <include name="e2e-results.xml"/>
   </fileset>
   <report format="frames" todir="./report/html"/>
</junitreport> 
```

HTML 文件生成正确，但表中的所有值都是空的，0 次测试，0 次失败等...

我究竟做错了什么？

提前致谢

# jquery - jQuery - 替换链接内的部分文本

> ID：15979741
> 
> 赞同：0
> 
> 时间：2013-04-12T19:48:43.543
> 
> 标签：jquery, hyperlink, replacewith

我正在尝试用图像替换该页面上包含链接前 5 个字母的所有链接`#OFN#`中的前 5 个字母以替换`#OFN#`文本，但希望保留链接文本的其余部分。

这是我到目前为止使用的...

```
$(document).ready(function() {
    $("a:contains('#OFN#')").each(function() {
        var calSubject = $(this).text().substring(5);
        $(this).replaceWith("<img src='/images/ofn_bullet.gif' width='10' height='10' style='width: 10px; height: 10px; border: none;' />" + calSubject);
    });
}); 
```

但是这种方法`<a> tag`完全从文本中删除了。我怎样才能做到这一点而不删除`<a> tags`

这是链接的示例 HTML：

```
<a href="#" onclick="eventDisplay('980','4/18/2013')">#OFN# 2013 Midwest Regional Meeting</a> 
```

我尝试使用`.children()`，但这似乎也不起作用。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:51:59.067

使用`html`方法将代码放在链接中而不是替换它：

```
$(this).html("<img src='/images/ofn_bullet.gif' width='10' height='10' style='width: 10px; height: 10px; border: none;' />" + calSubject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:53:14.550

选择文本节点并更新它们。`[jsFiddle Demo](http://jsfiddle.net/eqbaQ/2/)`

```
$(document).ready(function() {
    $("a:contains('#OFN#')").contents().each(function(){
        // skip if not a text node
        if (this.nodeType != 3) {
            return true;
        }
        this.nodeValue = this.nodeValue.substr(5);
        $(this).before("<img src='/images/ofn_bullet.gif' width='10' height='10' style='width: 10px; height: 10px; border: none;' />");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:54:24.870

我会做一些更冗长的事情：

```
var regex = /^#0FN#/;
$("a").each(function() {
    var $this = $(this), html = $this.html();
    if (regex.test(html)) {
        html.replace(/#0FN#/, "image stuff");
        $this.html(html);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T19:51:46.810

使用[`html`](http://api.jquery.com/html/)而不是`replaceWith`. 看看这个小提琴：

[http://jsfiddle.net/lbstr/MPTp7/](http://jsfiddle.net/lbstr/MPTp7/)

`replaceWith`将替换调用它的元素，这解释了您描述的行为。通过使用`$.fn.html`，您将替换锚标记*内的所有内容。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T19:59:54.467

这对我来说看起来更清楚：

```
<a href="#" class="ofn" onclick="eventDisplay('980','4/18/2013')">
    <span>2013 Midwest Regional Meeting</span>
</a> 
```

和

```
$(document).ready(function() {
    $('a.ofn').prepend('<img class="icon" src="/images/ofn_bullet.gif" />');
}); 
```

和

```
a.ofn .icon {
   width: 10px;
   height: 10px;
   border: none; /* Actually i think you mean outline rather than border */
} 
```

除非出于某些您没有告诉我们的原因，您必须按照您的方式进行操作。

如果 eventDisplay 的参数始终相同，您也可以将 onlick 从 a 标签移动到 javascript。

# vb.net - 如何使用 VB 读取 JSON http post 响应

> ID：15979742
> 
> 赞同：16
> 
> 时间：2013-04-12T19:48:45.850
> 
> 标签：vb.net, visual-studio-2010

我有以下代码，它连接到 PHP 服务器并成功检索数据，我对 VB 不是很好，我如何读取 JSON 响应文本并提取它的元素？

```
Public Class Form1
    Private Sub submit_Click(sender As System.Object, e As System.EventArgs) Handles submit.Click
        Dim user As String
        Dim pass As String
        user = uname.Text
        pass = passwd.Text

        Dim request As WebRequest = WebRequest.Create("http://domain.com/test.php")
        request.Method = "POST"
        Dim postData As String
        postData = "username=" & user & "&password=" & pass
        Dim byteArray As Byte() = Encoding.UTF8.GetBytes(postData)
        request.ContentType = "application/x-www-form-urlencoded"
        request.ContentLength = byteArray.Length
        Dim dataStream As Stream = request.GetRequestStream()
        dataStream.Write(byteArray, 0, byteArray.Length)
        dataStream.Close()
        Dim response As WebResponse = request.GetResponse()
        Console.WriteLine(CType(response, HttpWebResponse).StatusDescription)
        dataStream = response.GetResponseStream()
        Dim reader As New StreamReader(dataStream)
        Dim responseFromServer As String = reader.ReadToEnd()
        If responseFromServer = "0" Then
            MsgBox("Login Failed")
        Else
            MsgBox("json data")
        End If
        reader.Close()
        dataStream.Close()
        response.Close()
    End Sub
End Class 
```

JSON 响应将类似于：

```
{"comments": [
               {
               "comment" : "some text",
               "date"    : "some date",
               "user"    : "user name"
               },
               {
               "comment" : "some text",
               "date"    : "some date",
               "user"    : "user name"
               }
             ],
 "messages": [ .... ]
} 
```

如何将json字符串输出到：

```
Comments
user      date      comment
-----------------------------------
user 1    date 1    comment 1
user 2    date 2    comment 2

Messages
user      date      message
-----------------------------------
user 1    date 1    message 1
user 2    date 2    message 2 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-14T19:17:08.073

经过长时间的研究和多次测试，我发现了一个非常好的扩展名为`Newtonsoft.json`，它非常简单，可以`package manager console`像这样安装：

```
install-package Newtonsoft.json 
```

并像这样包含它：

```
Imports Newtonsoft.Json
Imports Newtonsoft.Json.Linq 
```

然后我需要做的就是像这样声明元素名称和值：

```
Else
    Dim json As String = responseFromServer
    Dim ser As JObject = JObject.Parse(json)
    Dim data As List(Of JToken) = ser.Children().ToList
    Dim output As String = ""

    For Each item As JProperty In data
        item.CreateReader()
        Select Case item.Name
            Case "comments"
                output += "Comments:" + vbCrLf
                For Each comment As JObject In item.Values
                    Dim u As String = comment("user")
                    Dim d As String = comment("date")
                    Dim c As String = comment("comment")
                    output += u + vbTab + d + vbTab + c + vbCrLf
                Next

            Case "messages"
                output += "Messages:" + vbCrLf
                For Each msg As JObject In item.Values
                    Dim f As String = msg("from")
                    Dim t As String = msg("to")
                    Dim d As String = msg("date")
                    Dim m As String = msg("message")
                    Dim s As String = msg("status")
                    output += f + vbTab + t + vbTab + d + vbTab + m + vbTab + s + vbCrLf
                Next

        End Select
    Next
    MsgBox(output)
End If 
```

希望有人会觉得这很有用

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-09T17:14:25.100

@razzak 使用 Json.Net NuGet 包是绝对正确的。另一个可以显着减少这种情况的选项是使用内置的 DeserializeObject 函数。只要您有一个定义良好的模型，那么您就可以使用以下方法将 Json 反序列化为对象的实例：

```
dim myObject as MyDefinedObject = JsonConvert.DeserializeObject(responseFromServer) 
```

或者这个在 C#

```
MyDefinedObject m = JsonConvert.DeserializeObject<MyDefinedObject>(responseFromServer); 
```

此外，如果您不想循环，您还可以使用以下方式选择令牌：

```
Dim d = ser.SelectToken("$..resources[?(@)].travelDistance") 
```

上面的代码用于从 Bing API 定位两点之间的 travelDistance。如果您曾经处理过 Bing 或 Google Map REST API，那么您就会知道，当您寻找非常具体的值时，JSon 通常太大而无法遍历数据。

JSon.Net 网站有一个博客页面，其中包含一些额外的示例：

[http://james.newtonking.com/json](http://james.newtonking.com/json)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-14T21:48:22.907

使用

```
Imports Newtonsoft.Json
Imports Newtonsoft.Json.Linq 
```

应该安装“Json.Net”库。

![截屏](https://i.stack.imgur.com/j5KxI.jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-18T22:28:25.450

```
Imports Newtonsoft.Json
Imports Newtonsoft.Json.Linq 
```

**这似乎在 VB.net 上针对 youtube API V.3 进行了削减**
，当然这取决于您要完成的工作，但 Youtube 以 Json 格式返回数据

# java - 在提交中途使用 AbstractTransactionalJUnit4SpringContextTests

> ID：15979757
> 
> 赞同：5
> 
> 时间：2013-04-12T19:49:26.863
> 
> 标签：java, spring, hibernate, transactions, h2

我们想要一个运行多个线程的简单单元测试——这个想法是主线程向数据库提交一个保存，然后等待辅助线程来获取它。

我们发现必须为第二个线程提交事务才能查询数据库并找到项目。否则，它将不存在。

我们正在尝试使用 H2 数据库、Hibernate 来管理访问以及单元测试扩展来实现这一点`AbstractTransactionalJUnit4SpringContextTests`。

当我们尝试`commit()`现有事务时：

```
... // Create and save our model object

sessionFactory.getCurrentSession().getTransaction().commit();
sessionFactory.getCurrentSession().beginTransaction();

... // Create and start second Thread, query, etc. 
```

我们收到错误：

```
org.springframework.transaction.TransactionSystemException: Could not commit Hibernate transaction; nested exception is org.hibernate.TransactionException: Transaction not successfully started
    at org.springframework.orm.hibernate4.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:484)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.test.context.transaction.TransactionalTestExecutionListener$TransactionContext.endTransaction(TransactionalTestExecutionListener.java:521)` 
```

但是当我们尝试仅扩展`AbstractJUnit4SpringContextTests`并使用`@Transactional`注释时：

```
@TransactionConfiguration(defaultRollback=false, transactionManager="transactionManager")
@Transactional()
public class DatabaseIntegrityTest extends AbstractJUnit4SpringContextTests { 
```

使用上面相同的提交代码，我们会收到：

```
org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:1041) 
```

在我们第一次调用`getCurrentSession()`.

**有没有办法在 JUnit Transactional Spring 测试中途提交？**

此外，当我们尝试使用 创建自己的嵌套事务`AbstractTransactionalJUnit4SpringContextTests`时，我们会收到：

```
org.hibernate.TransactionException: nested transactions not supported
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:152)
    at org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1396) 
```

**编辑带答案：**

感谢`axtavt`，我能够通过以下方式解决问题：

1) 扩展`AbstractJUnit4SpringContextTests`

2）使用@Autowired `PlatformTransactionManager`：

```
 @Autowired
   protected PlatformTransactionManager transactionManager; 
```

3）把我的交易代码里面：

```
TransactionStatus status = transactionManager.getTransaction(null);
... // The Model-Saving Code
transactionManager.commit(status); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T20:03:08.860

因此，您需要在测试方法中创建多个事务。如您所见，您不能使用`AbstractTransactionalJUnit4SpringContextTests`，因为它为整个测试方法创建单个事务，并且不能使用 bare `AbstractJUnit4SpringContextTests`，因为它根本不创建事务。

解决方案是以编程方式在测试方法中使用`AbstractJUnit4SpringContextTests`和管理事务。

您需要注入`PlatformTransactionManager`您的测试，`TransactionTemplate`从中创建并使用它来划分您的事务，如[11.6 编程事务管理](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-programmatic)中所述。

# php - 使用 PHP 在 Linux 服务器上启用写入的最佳方法

> ID：15979759
> 
> 赞同：0
> 
> 时间：2013-04-12T19:49:31.790
> 
> 标签：php, permissions, chmod

我有一个用 PHP 制作的 CMS，我想向它添加一些自我更新功能。

自我更新系统可能是一件复杂而乏味的事情，我知道，但那是完全不同的故事。底线是我最终会创建新的 PHP 文件，用新代码编辑现有的文件，并且可能会在更新发生时删除一些 PHP 文件。

我知道如何在 PHP 中读取、写入和删除文件，但是当我没有`chmod`首先使用 FTP 客户端的文件夹时，这几乎总是会给我在 Linux 服务器上带来问题`0777`。

我也知道 PHP 有`chmod`和`chown`功能。但大多数时候这些功能对我也**不起作用**。主要是因为所有 PHP 文件都是通过 FTP 上传的，这赋予了将文件和文件夹写入 FTP 组（或类似的东西）的权限。

我还在 Linux 服务器上安装了一个 Wordpress 博客，但由于某种原因，这个 Wordpress 站点在更新自身时没有问题。我认为它和我说的一样；创建、更新和删除某些文件。但是，我使用过的所有 Wordpress 网站都没有抱怨因为文件夹/文件权限而无法自行更新。

所以我猜测 Wordpress 在需要时使用一种智能方式来更改文件夹权限。我只是想不通怎么做。

所以基本上我的问题是，在 Linux 系统上授予 PHP 对 chmod 文件和文件夹的权限的最佳方法是什么？像 Wordpress 这样的系统如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:51:46.813

您可以将文件夹设置为 0777，这将使 PHP 能够在其中创建文件。您还可以将文件夹更改为 www-data 或您的 PHP 副本运行为...

# ios - 在 UIView init 中添加 CALayer 子层

> ID：15979762
> 
> 赞同：5
> 
> 时间：2013-04-12T19:49:47.383
> 
> 标签：ios, uiview, calayer, quartz-2d, uiwindow

我正在尝试将 CALayer 添加为 UIView 子类中的子层，但是当我在 init 方法中添加子层`EXC_BAD_ACCESS`时，我会在将视图添加到另一个视图或窗口时得到。

# 初始化方法：

```
- (id)initWithTitle:(NSString *)title message:(NSString *)message
{
    if ((self = [super init]))
    {
        self.title = title;
        self.message = message;

        self.alertLayer = [[CALayer alloc] init];

        self.layer.cornerRadius = kCORNER_RADIUS;
        self.layer.shadowRadius = 3.0;
        self.layer.shadowColor = [UIColor blackColor].CGColor;
        self.layer.shadowOffset = CGSizeMake(15, 20);
        self.layer.shadowOpacity = 1.0;

        self.alertLayer.delegate = self;
        self.alertLayer.masksToBounds = YES;
        self.alertLayer.cornerRadius = kCORNER_RADIUS;

        [self.layer addSublayer:self.alertLayer]; // This line of code seems to cause EXC_BAD_ACCESS
    }

    return self;
} 
```

`EXC_BAD_ACCESS``[self.view addSubview:alertView]`是在视图控制器或 UIWindow 内部调用后引起的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T20:16:01.073

您有两个具有相同委托的层 (`self.layer`和)，当将此视图 ( ) 添加到视图树时，这会导致内部方法中的无限递归。因此，您必须删除以避免崩溃。如果您需要委托，您可以创建不同的对象。`self.alertLayer``self``-[UIView(Hierarchy) _makeSubtreePerformSelector:withObject:withObject:copySublayers:]``self``self.alertLayer.delegate = self;``alarmLayer`

# javascript - 有人可以解释响应式设计而不是响应式功能吗？

> ID：15979769
> 
> 赞同：3
> 
> 时间：2013-04-12T19:50:17.957
> 
> 标签：javascript, html, css, responsive-design

我只是想知道如何构建一个响应式设计网站，除了不断变化的布局之外，我还负责处理各种尺寸的响应式功能。例如，在桌面上，特定元素上可能不存在链接，但在移动设备上，它不仅应该存在，而且还应该做一些在更大尺寸下没有做的事情。

我可以理解使用媒体查询来更改 CSS 中任何特定元素的大小或位置，但是如何在各种断点处更改功能（即 JS 和 HTML）？

（我不确定该术语是否存在，但由于没有更好的名称，我将其称为响应式功能。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:09:19.197

**您正在描述响应**式设计和**自适应**设计之间的区别。

*   **响应**式布局响应不同的屏幕尺寸（使用灵活的网格和媒体查询）。他们通常会在较小的屏幕上隐藏内容或应用不同的 CSS 规则。
*   **自适应布局通过采取有预谋的方法和****优化提供给用户的内容来**适应不同的屏幕尺寸和/或设备。

例如，响应式设计可能只是在较小的分辨率上隐藏侧边栏，而自适应设计可能会显示特定于移动设备的内容（因为网站知道用户正在使用手机）。

关于这个主题有一些很好的[博客文章：](http://www.techrepublic.com/blog/webmaster/what-is-the-difference-between-responsive-vs-adaptive-web-design/2540)

> 这两种方法最大的相似之处在于，它们都允许在移动设备和各种屏幕尺寸中查看网站，最终为访问者提供更好的移动用户体验。这两种方法的不同之处在于它们提供的响应式/自适应结构：RWD 依赖于灵活和流动的网格，而 AWD 依赖于预定义的屏幕尺寸。两者之间的主要区别之一是 RWD 可能会采用流体网格、CSS 和灵活基础的更多代码和实施策略，而 AWD 具有简化的分层方法，它利用脚本来帮助适应各种设备和屏幕尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:02:03.770

响应式功能可以通过几种不同的方式实现：

1.  您可以使用媒体查询来隐藏和显示与它们相关的不同行为的不同 HTML 片段。

2.  您可以使用 javascript 触发您的行为，其中事件处理程序中的 javascript 检查大小/平台并决定调用什么行为。

3.  您可以根据大小使用 javascript 动态生成 HTML 的不同部分及其相应的事件处理程序。

# asp.net - 使用 ASP.NET 应用程序中的令牌访问 WCF 服务

> ID：15979770
> 
> 赞同：0
> 
> 时间：2013-04-12T19:50:22.793
> 
> 标签：asp.net, wcf, claims

我有以下情况

我有一个发行我的令牌的 STS，我用它来联合我的 ASP.NET 应用程序，这个应用程序调用 WCF 服务来执行一些需要的功能。

但是，当我检查 ASP.NET 应用程序中的 ClaimsPrinicipal.Current 时，我发现它与我用来访问 STS 的用户的声明是正确的。但是当我从 ASP.NET 应用程序调用服务并检查 ClaimsPricipal.Current 时，我发现它等于 null。

作为一种解决方法，我从 ASP.NET 应用程序传递了 ClaimsPricipal.Current，并将 Thread.CurrentPricipal 放在 WCF 服务中。

但是，我不认为这是一个正确的方法。

所以我的问题是：

1) 为什么 ASP.NET 声明主体不像 WCF 主体？2）使用访问令牌访问 WCF 服务的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:56:42.647

identit 不会自动流向您的后端服务 - 您需要进行身份委托 - 或在 WIF 中经常调用的 ActAs。

发现这个： [http ://weblogs.asp.net/gsusx/archive/2010/07/02/enabling-wif-actas-via-configuration.aspx](http://weblogs.asp.net/gsusx/archive/2010/07/02/enabling-wif-actas-via-configuration.aspx)

这是针对 WIF 1.0 - 那里有更多示例。

# iphone - Admob 和 Cocos2d - 无法点击 admob - 视图不在层次结构中

> ID：15979777
> 
> 赞同：1
> 
> 时间：2013-04-12T19:50:58.230
> 
> 标签：iphone, ios, objective-c, xcode, admob

我遇到了一个问题，即 Admob 横幅显示，但是，当您点击它时，它要么使应用程序崩溃，要么什么都不做。

它使用admob中介，与iAd分开，如果显示iAd，可以点击它没有问题...

```
- (void) onEnter {

    if (![MKStoreManager featureAPurchased])
    {

        controller = [[RootViewController alloc]init];
        bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeSmartBannerPortrait];
        bannerView_.adUnitID = MY_BANNER_UNIT_ID;
        CGRect screenRect = [[UIScreen mainScreen] bounds];
        CGFloat screenWidth = screenRect.size.width;
        CGFloat screenHeight = screenRect.size.height;
        CGFloat screenXPos = (screenWidth /2);
        CGFloat screenYPos = screenHeight - 25;
        [bannerView_ setCenter:CGPointMake(screenXPos, screenYPos)];
        bannerView_.rootViewController = controller;
        bannerView_.adUnitID = MY_BANNER_UNIT_ID;
        bannerView_.rootViewController = controller;
        [[[CCDirector sharedDirector]view] addSubview: bannerView_];
        [bannerView_ loadRequest:[GADRequest request]];

    }else{

        bannerView_.hidden = YES;
    } 
```

错误是如果我尝试点击横幅没有任何反应，并且在控制台中我看到以下错误；

```
Attempt to present <GADBrowserController: 0x1d576ca0> on <RootViewController: 0x1e8ed3f0> whose view is not in the window hierarchy! 
```

将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:00:38.087

不要将横幅视图添加到 CCDirector 的 EAGLView，将其添加到应用程序的 RootViewController

做类似的事情：

```
 AppDelegate * delegate =[[UiApplication sharedApplication]delegate];
 [delegate.viewController addSubview: bannerView_];
 [delegate bringSubViewToFront:bannerView_] 
```

这样做你根本不需要“控制器”

因此，您基本上是将广告添加到与 EAGLView 相同的级别上。因此，当您展示广告（点击它时）时，您只需将其显示在 glView 上

**编辑：**

```
 - (void) onEnter {
   if (![MKStoreManager featureAPurchased])
   {
    bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeSmartBannerPortrait];
    bannerView_.adUnitID = MY_BANNER_UNIT_ID;
    CGRect screenRect = [[UIScreen mainScreen] bounds];
    CGFloat screenWidth = screenRect.size.width;
    CGFloat screenHeight = screenRect.size.height;
    CGFloat screenXPos = (screenWidth /2);
    CGFloat screenYPos = screenHeight - 25;
    [bannerView_ setCenter:CGPointMake(screenXPos, screenYPos)];
    AppDelegate * delegate =[[UiApplication sharedApplication]delegate];
    [delegate.rootViewController addSubview: bannerView_];
    [delegate bringSubViewToFront:bannerView_]
    [bannerView_ loadRequest:[GADRequest request]];
}else{
    bannerView_.hidden = YES;
}
}
} 
```

# css - jQuery Datatables - 列标题（）文本重叠

> ID：15979778
> 
> 赞同：1
> 
> 时间：2013-04-12T19:51:06.903
> 
> 标签：css, datatables

我不知道为什么文本重叠。

这是显示问题的屏幕截图：http:
[//i.imgur.com/rLIcww4.png](http://i.imgur.com/rLIcww4.png?1)

?1 如您所见，列标题“Subcontratada”是重叠的。

我的代码有什么问题？

这是我的 CSS 代码：

* * *

```
/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 * DataTables display
 */
table.display {
    margin: 0 auto;
    clear: both;
    width: 100%;
    table-layout:fixed;
}

table.display thead th {
    padding: 3px 18px 3px 10px;
    border-bottom: 1px solid black;
    font-weight: bold;
    cursor: pointer;
    * cursor: hand;
} 
```

* * *

这是我的 HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <link rel="shortcut icon" type="image/ico" href="http://www.datatables.net/favicon.ico" />

        <title>DataTables Editor example</title>
        <style class="include" type="text/css">
            @import "support/bootstrap/css/bootstrap.css";
            @import "support/bootstrap/dataTables/dataTables.bootstrap.css";
            @import "css/customTable.css";
        </style>

        <script class="include" type="text/javascript" charset="utf-8" src="../../../media/js/jquery.js"></script>
        <script class="include" type="text/javascript" charset="utf-8" src="../../../media/js/jquery.dataTables.js"></script>
        <script class="include" type="text/javascript" charset="utf-8" src="../../TableTools/media/js/TableTools.js"></script>
        <script class="include" type="text/javascript" charset="utf-8" src="../../TableTools/media/js/ZeroClipboard.js"></script>
        <script class="include" type="text/javascript" charset="utf-8" src="../media/js/dataTables.editor.js"></script>

        <script class="include" type="text/javascript" charset="utf-8" src="support/bootstrap/js/bootstrap.js"></script>
        <script class="include" type="text/javascript" charset="utf-8" src="support/bootstrap/dataTables/dataTables.bootstrap.js"></script>
        <script class="include" type="text/javascript" charset="utf-8" src="support/bootstrap/dataTables/dataTables.editor.bootstrap.js"></script>

        <script class="include" type="text/javascript" charset="utf-8" src="./js/custom.js"></script>
    </head>
    <body id="dt_example">
        <div id="mContainer" style="border: red 4px dashed;width:1200px;margin-left:auto;margin-right:auto;">
            <div id="demo"  style="border: blue 4px dashed;width:1200px;">
                <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered display" id="example"">
                    <thead>
                        <tr>
                            <th style="text-align: center;">Data</th>
                            <th style="text-align: center;">Tema</th>
                            <th style="text-align: center;">V&iacute;nculo</th>
                            <th style="text-align: center;">Empresa</th>
                            <th style="text-align: center;">Subcontratada</th>
                            <th style="text-align: center;">NDP</th>
                            <th style="text-align: center;">CH</th>
                            <th style="text-align: center;">HHT</th>
                            <th style="text-align: center;">Ger&ecirc;ncia</th>
                            <th style="text-align: center;">Área Solicitante</th>
                            <th style="text-align: center;">CC</th>
                            <th style="text-align: center;">Rateio</th>
                        </tr>
                    </thead>
                </table>
            </div>
            <div class="spacer"></div>

        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:02:02.283

浏览器不会在单词中间打断文本。`<br />`如果要在单词中间换行，则需要手动插入换行符。或者可能减小该列标题中的字体大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:02:03.237

不知道为什么，但是您可以通过在名称之间留出空格来解决此问题

```
<th style="text-align: center;">Sub contratada</th> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-17T12:41:43.250

**一些选项**

滚动 - 水平： [https ://datatables.net/examples/basic_init/scroll_xy.html](https://datatables.net/examples/basic_init/scroll_xy.html)

或者

响应 [式 https://datatables.net/extensions/responsive/](https://datatables.net/extensions/responsive/)

*ps：这对我有帮助！*

# jquery - 使用 YouTube 视频的 ID 作为 HTML 标签的 ID？

> ID：15979780
> 
> 赞同：-2
> 
> 时间：2013-04-12T19:51:27.483
> 
> 标签：jquery, html, css

如果使用 YT 视频 ID 作为标签 ID，CSS 或 jQuery 会不会有任何问题？
如本例所示：

```
http://www.youtube.com/watch?v=_0qkIdfa3qY 
```

```
<div id="_0qkIdfa3qY"></div> 
```

```
$('#_0qkIdfa3qY').html(); 
```

但请考虑 ID[可以是](https://stackoverflow.com/q/6180138/1287812)具有以下字符的任何内容：

> ```
> ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_- 
> ```

我在[文档](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)中没有看到任何关于使用大写/小写、数字或字符`-`和`_`. 我特别想知道ID开头的数字或分数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T19:54:50.997

这可能会有所帮助，来自[Selectors 3 模块：](http://www.w3.org/TR/css3-selectors/)

> 在 CSS 中，标识符（包括选择器中的元素名称、类和 ID）只能包含字符 [a-zA-Z0-9] 和 ISO 10646 字符 U+00A0 及更高，加上连字符 (-) 和下划线 ( _); **它们不能以数字、两个连字符或一个连字符后跟一个数字开头**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T20:33:47.983

使用 data 属性可能会更好。

```
http://www.youtube.com/watch?v=_0qkIdfa3qY

<div data-videoid="_0qkIdfa3qY"></div> 

$('div[data-videoid=_0qkIdfa3qY]').html(); 
```

# wpf - EventToCommand 从不适合我

> ID：15979784
> 
> 赞同：0
> 
> 时间：2013-04-12T19:51:51.710
> 
> 标签：wpf, vb.net, mvvm, mvvm-light

我正在尝试更改我当前的代码并将其移向 MVVM 设计。

我有一个这样的网格控件：

```
 <ctl:GridContainer x:Name="GridResponses" CellValueChanged="GridResponses_CellValueChanged">
            .
            .
            .
        </ctl:GridContainer> 
```

甚至这样：

```
 Private Sub GridResponses_CellValueChanged(sender As Object, e As CellValueEventArgs)
            If e.Column.FieldName = "PRIORITY" Then
               .
               .
               .
            End If
        End Sub 
```

现在我将上面的代码移动到使用 MVVM Light 并执行以下操作：

```
 <ctl:GridContainer DataContext="{Binding ResponsesDataView}">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="CellValueChanged">
                    <cmd:EventToCommand Command="{Binding GridCellValueChangedCommand}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </ctl:GridContainer> 
```

在我的 ViewModel 我有以下 RelayCommand 声明如下：

```
 Private m_cmdGridCellValueChanged As RelayCommand(Of CellValueEventArgs)

        .
        .
        .

        m_cmdGridCellValueChanged = New RelayCommand(Of CellValueEventArgs) _
                (Sub(e)
                     If e.Column.FieldName = "PRIORITY" Then
                         .
                         .
                         .
                     End If
                 End Sub) 
```

它永远不会执行！我什至尝试使用无参数的 RelayCommand 并尝试显示一个 MessageBox，但没有成功。

EventToCommand 在特定事件方面是否受到限制？难道我做错了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T07:34:57.930

其实问题出在绑定上。您正在搜索中的命令`ResponsesDataView`。你需要遍历你的视图的 DataContext -

```
 <cmd:EventToCommand Command="{Binding DataContext.GridCellValueChangedCommand, 
                     RelativeSource={RelativeSource FindAncestor, 
                                         AncestorType=UserControl}}"/> 
```

# java - 如何解决 javac 编译器错误，“包 com.sun.tools.internal.ws.processor.model 不存在”？

> ID：15979788
> 
> 赞同：1
> 
> 时间：2013-04-12T19:52:15.297
> 
> 标签：java, xml, compiler-errors, jaxb, javac

当我使用 Java 6 通过 Jenkins 启动 Maven 构建时，我看到一个奇怪的错误。我在测试编译阶段遇到错误，这些错误是

```
[ERROR] /scratch/jenkins/workspace/subco/subco/myproject/src/test/java/org/mainco/subco/ebook/mvc/  CorrelationUpdateControllerTest.java:[77,48] error: package com.sun.tools.internal.ws.processor.model does not exist
[ERROR] /scratch/jenkins/workspace/subco/subco/myproject/src/test/java/org/mainco/subco/ebook/mvc/CorrelationUpdateControllerTest.java:[77,48] error: package com.sun.tools.internal.ws.processor.model does not exist
[INFO] 2 errors 
```

这些错误与上面提到的第 77 行无关。那条线是

```
public class CorrelationUpdateControllerTest extends AbstractNTsubcoTests 
```

如果这很重要，我正在使用 jaxb-api, v 2.2.9。Maven依赖是

```
<dependency>
    <groupId>javax.xml.bind</groupId>
    <artifactId>jaxb-api</artifactId>
    <version>2.2.9</version>
</dependency> 
```

下面是正在发生的事情的更详细的输出......

```
[INFO] ------------------------------------------------------------------------
[INFO] Building subco Admin Module 16.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
Downloading: http://repo.ourrepo.com/content/groups/public/org/springframework/spring-oxm/3.1.1.RELEASE/spring-oxm-3.1.1.RELEASE.pom 
```

下载：[http](http://repo.ourrepo.com/content/groups/public/org/springframework/spring-oxm/3.1.1.RELEASE/spring-oxm-3.1.1.RELEASE.pom) ://repo.ourrepo.com/content/groups/public/org/springframework/spring-oxm/3.1.1.RELEASE/spring-oxm-3.1.1.RELEASE.pom （4 KB，23.5 KB/秒）下载：[http](http://repo.ourrepo.com/content/groups/public/org/springframework/spring-webmvc-portlet/3.1.1.RELEASE/spring-webmvc-portlet-3.1.1.RELEASE.pom) ://repo.ourrepo.com/content/groups/public/org/springframework/spring-webmvc-portlet/3.1.1.RELEASE/spring-webmvc-portlet-3.1.1.RELEASE.pom 已 下载: [http://repo.ourrepo.com/content/groups/public/org/springframework/spring-webmvc-portlet/3.1.1.RELEASE/spring-webmvc-portlet-3.1.1.RELEASE.pom](http://repo.ourrepo.com/content/groups/public/org/springframework/spring-webmvc-portlet/3.1.1.RELEASE/spring-webmvc-portlet-3.1.1.RELEASE.pom) (4 KB at 42.6 KB/秒）下载：[http ://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-web/3.1.3.RELEASE/spring-security-web-3.1.3 .RELEASE.pom](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-web/3.1.3.RELEASE/spring-security-web-3.1.3.RELEASE.pom) 下载：[http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-web/3.1.3.RELEASE/spring-security-web-3.1.3.RELEASE.pom](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-web/3.1.3.RELEASE/spring-security-web-3.1.3.RELEASE.pom) (4 KB 133.4 KB/秒）下载：[http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-core/3.1.3.RELEASE/spring-security-core-3.1。 3.RELEASE.pom](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-core/3.1.3.RELEASE/spring-security-core-3.1.3.RELEASE.pom) 下载：[http ://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-core/3.1.3.RELEASE/spring-security-core-3.1.3 .RELEASE.pom](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-core/3.1.3.RELEASE/spring-security-core-3.1.3.RELEASE.pom)（4 KB，47.5 KB/秒）下载：[http ://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-config/3.1.3.RELEASE/spring -security-config-3.1.3.RELEASE.pom](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-config/3.1.3.RELEASE/spring-security-config-3.1.3.RELEASE.pom) 下载：[http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-config/3.1.3.RELEASE/spring-security-config-3.1.3.RELEASE.pom](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-config/3.1.3.RELEASE/spring-security-config-3.1.3.RELEASE.pom) (4 KB 41.5 KB/秒）下载：[http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-taglibs/3.1.3.RELEASE/spring-security-taglibs-3.1。 3.RELEASE.pom](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-taglibs/3.1.3.RELEASE/spring-security-taglibs-3.1.3.RELEASE.pom) 下载：[http ://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-taglibs/3.1.3.RELEASE/spring-security-taglibs-3.1.3 .RELEASE.pom](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-taglibs/3.1.3.RELEASE/spring-security-taglibs-3.1.3.RELEASE.pom)（4 KB，16.5 KB/秒）下载：[http ://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-acl/3.1.3.RELEASE/spring -security-acl-3.1.3.RELEASE.pom](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-acl/3.1.3.RELEASE/spring-security-acl-3.1.3.RELEASE.pom) 下载：[http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-acl/3.1.3.RELEASE/spring-security-acl-3.1.3.RELEASE.pom](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-acl/3.1.3.RELEASE/spring-security-acl-3.1.3.RELEASE.pom) (4 KB 145.5 KB/秒）下载： http [://repo.ourrepo.com/content/groups/public/org/springframework/spring-oxm/3.1.1.RELEASE/spring-oxm-3.1.1.RELEASE.jar](http://repo.ourrepo.com/content/groups/public/org/springframework/spring-oxm/3.1.1.RELEASE/spring-oxm-3.1.1.RELEASE.jar)：[http](http://repo.ourrepo.com/content/groups/public/org/springframework/spring-webmvc-portlet/3.1.1.RELEASE/spring-webmvc-portlet-3.1.1.RELEASE.jar) ://repo.ourrepo.com/content/groups/public/org/springframework/spring-webmvc-portlet/3.1.1.RELEASE/spring-webmvc-portlet-3.1.1.RELEASE.jar 下载：[http： //repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-web/3.1.3.RELEASE/spring-security-web-3.1.3.RELEASE.jar](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-web/3.1.3.RELEASE/spring-security-web-3.1.3.RELEASE.jar) 下载：[http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-core/3.1.3.RELEASE/spring-security-core-3.1.3.RELEASE.jar](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-core/3.1.3.RELEASE/spring-security-core-3.1.3.RELEASE.jar) 下载：[http ://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-config/3.1.3.RELEASE/spring-security-config-3.1.3.RELEASE.jar](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-config/3.1.3.RELEASE/spring-security-config-3.1.3.RELEASE.jar) 下载：[http： //repo.ourrepo.com/content/groups/public/org/springframework/spring-oxm/3.1.1.RELEASE/spring-oxm-3.1.1.RELEASE.jar（72](http://repo.ourrepo.com/content/groups/public/org/springframework/spring-oxm/3.1.1.RELEASE/spring-oxm-3.1.1.RELEASE.jar) KB，1372.9 KB/秒）下载：[http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-taglibs/3.1.3.RELEASE/spring-security-taglibs-3.1.3.RELEASE.jar](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-taglibs/3.1.3.RELEASE/spring-security-taglibs-3.1.3.RELEASE.jar) 下载：[http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-taglibs/3.1.3.RELEASE/spring-security-taglibs-3.1.3.RELEASE.jar](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-taglibs/3.1.3.RELEASE/spring-security-taglibs-3.1.3.RELEASE.jar) (21 KB 176.6 KB/秒）下载：[http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-acl/3.1.3.RELEASE/spring-security-acl-3.1。 3.RELEASE.jar](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-acl/3.1.3.RELEASE/spring-security-acl-3.1.3.RELEASE.jar) 下载：[http ://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-config/3.1.3.RELEASE/spring-security-config-3.1.3 .RELEASE.jar](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-config/3.1.3.RELEASE/spring-security-config-3.1.3.RELEASE.jar) (199 KB at 1156.6 KB/sec) 下载：[http ://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-web/3.1.3.RELEASE/spring -security-web-3.1.3.RELEASE.jar](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-web/3.1.3.RELEASE/spring-security-web-3.1.3.RELEASE.jar)（248 KB，1369.5 KB/秒）下载：[http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-acl/3.1.3.RELEASE/spring-security-acl-3.1.3.RELEASE.jar](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-acl/3.1.3.RELEASE/spring-security-acl-3.1.3.RELEASE.jar) (78 KB 2678.2 KB/秒）下载：[http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-core/3.1.3.RELEASE/spring-security-core-3.1。 3.RELEASE.jar](http://repo.ourrepo.com/content/groups/public/org/springframework/security/spring-security-core/3.1.3.RELEASE/spring-security-core-3.1.3.RELEASE.jar) (333 KB at 1721.7 KB/sec) 下载：[http ://repo.ourrepo.com/content/groups/public/org/springframework/spring-webmvc-portlet/3.1.1.RELEASE/spring- webmvc-portlet-3.1.1.RELEASE.jar](http://repo.ourrepo.com/content/groups/public/org/springframework/spring-webmvc-portlet/3.1.1.RELEASE/spring-webmvc-portlet-3.1.1.RELEASE.jar)(187 KB at 621.6 KB/sec) mojoStarted org.apache.maven.plugins:maven-clean-plugin:2.4.1(default-clean) [INFO] [INFO] --- maven-clean-plugin:2.4.1 :clean (default-clean) @myproject --- mojoSucceeded org.apache.maven.plugins:maven-clean-plugin:2.4.1(default-clean) [debug] 执行 contextualize mojoStarted org.apache.maven.plugins:maven -resources-plugin:2.5(default-resources) [INFO] [INFO] --- maven-resources-plugin:2.5:resources (default-resources) @myproject --- [INFO] 使用 'UTF-8' 编码复制过滤的资源。[INFO] 复制 7 个资源 mojoSucceeded org.apache.maven.plugins:maven-resources-plugin:2.5(default-resources) mojoStarted org.codehaus.mojo:properties-maven-plugin:1.0-alpha-2(default) [INFO ] [INFO] --- properties-maven-plugin:1.0-alpha-2:

```
[INFO] 
[INFO] --- sql-maven-plugin:1.5:execute (create-test-db) @ myproject --- 
```

mojoSucceeded org.codehaus.mojo:sql-maven-plugin:1.5(create-test-db) mojoStarted org.apache.maven.plugins:maven-compiler-plugin:2.3.2(default-compile) [INFO] [INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @myproject --- [INFO] 将 40 个源文件编译到 /scratch/jenkins/workspace/subco/subco/myproject/target/classes mojoSucceeded org .apache.maven.plugins:maven-compiler-plugin:2.3.2(default-compile) [debug] 执行 contextualize mojoStarted org.apache.maven.plugins:maven-resources-plugin:2.5(default-testResources) [INFO] [INFO] 使用 'UTF-8' 编码复制过滤的资源。

```
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ myproject ---
[INFO] Copying 10 resources 
```

mojoSucceeded org.apache.maven.plugins:maven-resources-plugin:2.5(default-testResources) mojoStarted org.codehaus.mojo:sql-maven-plugin:1.5(create-stored-proc)[INFO] 跳过 sql 执行

```
[INFO] 
[INFO] --- sql-maven-plugin:1.5:execute (create-stored-proc) @ myproject --- 
```

mojoSucceeded org.codehaus.mojo:sql-maven-plugin:1.5(create-stored-proc) mojoStarted org.apache.maven.plugins:maven-antrun-plugin:1.7(unzip-liquibase-archive) [INFO] [INFO] --- maven-antrun-plugin:1.7:run (unzip-liquibase-archive) @myproject --- [INFO] 执行任务

```
main:
mojoSucceeded org.apache.maven.plugins:maven-antrun-plugin:1.7(unzip-liquibase-archive)[INFO] Executed tasks

mojoStarted org.apache.maven.plugins:maven-antrun-plugin:1.7(format-liquibase-files)
[INFO] 
[INFO] --- maven-antrun-plugin:1.7:run (format-liquibase-files) @ myproject ---
[INFO] Executing tasks

main:
[INFO] Executed tasks
mojoSucceeded org.apache.maven.plugins:maven-antrun-plugin:1.7(format-liquibase-files)
mojoStarted com.google.code.maven-replacer-plugin:replacer:1.5.1(create-init-db-test-scripts)
[INFO] 
[INFO] --- replacer:1.5.1:replace (create-init-db-test-scripts) @ myproject ---
[INFO] Replacement run on 1 file.
mojoSucceeded com.google.code.maven-replacer-plugin:replacer:1.5.1(create-init-db-test-scripts)
mojoStarted org.apache.maven.plugins:maven-compiler-plugin:2.3.2(default-testCompile)
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ myproject ---
[INFO] Compiling 8 source files to /scratch/jenkins/workspace/subco/subco/myproject/target/test-classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /scratch/jenkins/workspace/subco/subco/myproject/src/test/java/org/mainco/subco/ebook/mvc/  CorrelationUpdateControllerTest.java:[77,48] error: package com.sun.tools.internal.ws.processor.model does not exist
[ERROR] /scratch/jenkins/workspace/subco/subco/myproject/src/test/java/org/mainco/subco/ebook/mvc/  CorrelationUpdateControllerTest.java:[77,48] error: package com.sun.tools.internal.ws.processor.model does not exist
[INFO] 2 errors 
[INFO] -------------------------------------------------------------
mojoFailed org.apache.maven.plugins:maven-compiler-plugin:2.3.2(default-testCompile)
projectFailed org.mainco.subco:myproject:16.0.0-SNAPSHOT
An attempt to send an e-mail to empty list of recipients, ignored. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:11:01.350

`com.sun.tools.internal.ws`看起来您正在使用 Web 服务和一些 JAX-WS 工具，例如该工具`wsgen`。

JAX-WS 工具是 Java 开发工具包 (JDK) 的一部分 - 它在 JRE 中找不到的`tools.jar 中。不太可能是原因，但您应该检查 Jenkins 是否使用 JRE。

更有可能是您在 Linux 工作站/服务器上执行此操作，并且您没有安装 Oracle 的 JDK。OpenJDK 可能没有 Sun 的“私有”工具/实现。

# javascript - 无法确定 box-sizing、媒体查询或 javascript

> ID：15979789
> 
> 赞同：2
> 
> 时间：2013-04-12T19:52:18.110
> 
> 标签：javascript, css, media-queries

不能为我的生活弄清楚这个。我正在建立一个站点： http: [//ingenious.jit.su/](http://ingenious.jit.su/)，并且我已经设置了一个侧边栏，它会跟随您在页面的一部分下方。在我发现这个错误之前，我对此非常满意。

如果您在 Windows 机器上的 Chrome 中打开，并将浏览器宽度调整到 781 到 798 之间，侧边栏将固定在页面内容上：（

由于某种原因，我的媒体查询似乎在低于 780 像素的最大屏幕宽度之前被激活。

任何帮助都会摇滚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:04:14.450

有几种方法可以解决这个问题。您的 JavaScript 导致您`#followbar`被修复，您可以在那里进行编辑，或者只是将其添加到您的 css 下`@media screen and (max-width: 780px)`

```
#followbar
{
    position:static !important;
} 
```

这只是一个快速修复。您的 JavaScript 可能需要进行一些调整，但这会处理它。

# python - 有没有办法找到文件对象的缓冲区大小

> ID：15979793
> 
> 赞同：5
> 
> 时间：2013-04-12T19:52:49.783
> 
> 标签：python, file, io-buffering

我正在尝试“映射”一个非常大的 ascii 文件。基本上我会阅读行，直到找到某个标签，然后我想知道该标签的位置，以便稍后我可以再次寻找它以提取相关数据。

```
from itertools import dropwhile
with open(datafile) as fin:
    ifin = dropwhile(lambda x:not x.startswith('Foo'), fin)
    header = next(ifin)
    position = fin.tell() 
```

现在这`tell`并没有给我正确的位置。这个问题以前曾以各种形式提出过。原因大概是因为python正在缓冲文件对象。所以，python 告诉我它的文件指针在哪里，而不是我的文件指针在哪里。 [我不想关闭这个缓冲](https://stackoverflow.com/a/3539122/748858)......这里的性能很重要。但是，很高兴知道是否有办法确定 python 选择缓冲多少字节。在我的实际应用中，只要我关闭以 开头的行，`Foo`就没有关系。我可以在这里和那里写几行。所以，我实际上打算做的是：

```
position = fin.tell() - buffer_size(fin) 
```

有什么办法可以找到缓冲区大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:53:30.710

对我来说，缓冲区大小在 Cpython 中被[硬编码](http://hg.python.org/cpython/file/84cd07899baf/Objects/fileobject.c#l2313)为 8192。据我所知，除了在打开文件时读取一行之外，没有办法从 python 接口获取这个数字,`f.tell()`计算出 python 实际读取了多少数据，然后在继续之前返回文件的开头。

```
with open(datafile) as fin:
    next(fin)
    bufsize = fin.tell()
    fin.seek(0)

    ifin = dropwhile(lambda x:not x.startswith('Foo'), fin)
    header = next(ifin)
    position = fin.tell() 
```

当然，如果第一行的*长度*超过 8192 字节，这将失败，但这对我的应用程序没有任何实际影响。

# android - 如何使用 Google Now 的自我意向？

> ID：15979794
> 
> 赞同：3
> 
> 时间：2013-04-12T19:52:52.290
> 
> 标签：android, gmail

我知道这不是最佳实践，但我想使用 thr Note To Self 意图在后台发送电子邮件。我找到了 Keep 使用的 AUTO_SEND 意图，但我似乎无法打开 Gmail 或 Keep 使用它 - 它们不会显示在活动选择器中，只有 Evermore 和 Notif 会显示。

这是我目前正在尝试的：

```
 Intent mailClient = new Intent("com.google.android.gm.action.AUTO_SEND");
    mailClient.setClassName("com.google.android.gm", "com.google.android.gm.AutoSendActivity");
    startActivity(mailClient); 
```

但是，我仍然遇到错误 -

```
04-12 15:06:28.393: W/ActivityManager(443): Permission Denial: starting Intent { act=com.google.android.gm.action.AUTO_SEND cmp=com.google.android.gm/.AutoSendActivity } from ProcessRecord{41adee50 11298:com.email_to_self/u0a10113} (pid=11298, uid=10113) requires com.google.android.gm.permission.AUTO_SEND 
```

我通过执行将权限添加到我的清单中

```
<uses-permission android:name="com.google.android.gm.permission.AUTO_SEND"> 
```

但问题仍然存在。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-21T21:48:40.707

你不能。

此操作由此活动处理，需要权限`com.google.android.gm.permission.AUTO_SEND`

```
 <activity android:name="com.google.android.gm.AutoSendActivity"
              ...
              android:permission="com.google.android.gm.permission.AUTO_SEND">

        <intent-filter android:label="@string/app_name">
            <action android:name="com.google.android.gm.action.AUTO_SEND" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="*/*" />
        </intent-filter>
    </activity> 
```

此权限在 Gmail 的清单中定义，并且仅限于 Google 的应用程序（或更准确地说，使用与 Gmail 相同的密钥签名）。

```
<permission android:name="com.google.android.gm.permission.AUTO_SEND"
            android:permissionGroup="android.permission-group.MESSAGES"
            android:protectionLevel="signature" android:label="@string/auto_send_perm_label"
            android:description="@string/auto_send_perm_desc"/> 
```

# sql-server - 将 NEAR 与 maximum_distance 值一起使用时出现语法错误

> ID：15979796
> 
> 赞同：1
> 
> 时间：2013-04-12T19:52:59.760
> 
> 标签：sql-server, sql-server-2008, tsql, full-text-indexing

如何修改此查询以搜索仅相隔两个单词的关键字？

```
select id, SubjectText from dbo.email  where contains
 ([ContentText],'execute NEAR class near program near code near SQL'); 
```

去

这些是我得到的结果：

```
id  SubjectText
1   examples for you 
3   Oracle classes starting soon 
4   Toms Hardware nes letter 
5   Registration starts soon  
7   Dreamspark SQL order  ready  
8   SQL classes free online  
10  Visual Basic key  
20  SQL Help   
21  A Free SQL Server Monitoring Package  
22  A Monitoring Package 
```

试过： -

```
select id, SubjectText
from dbo.email
where contains (ContentText,
                'NEAR ((execute, class , program, SQL ,code),2,true)'
               ); 
```

但得到错误`Msg 7630, Level 15, State 2, Line 2 Syntax error near '(' in the full-text search condition 'NEAR ((execute, class , program, SQL ,code),2,true)';`

我努力了

select id, SubjectText from dbo.email where contains ([ContentText],'"( (execute near class, near program ,NEAR code,near SQL ))"',2,true); 去

和

select id, SubjectText from dbo.email where contains ([ContentText],'near( (execute , class, program code, SQL ))',2,true); 去

和

select id, SubjectText from dbo.email where contains ([ContentText],' (execute near class near program NEAR code near SQL)',2,true); 去

他们都没有工作他们都产生错误请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:27:41.813

如[文档](http://msdn.microsoft.com/en-us/library/ms187787%28v=sql.110%29.aspx)所述，只有 SQL Server 2012 允许您指定搜索词之间的最大距离，因此如果您使用的是 SQL Server 2008，则会收到此错误。

# git - 使用 git-svn 时，有没有办法提交“git svn dcommit”将忽略推送到其远程？

> ID：15979801
> 
> 赞同：0
> 
> 时间：2013-04-12T19:53:14.993
> 
> 标签：git, git-svn

我想知道是否有办法告诉 git-svn 忽略历史中的提交，并且永远不要将其推送到远程服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:57:47.707

事实证明，我可以通过正确配置我的 .gitignore 文件来做我需要的事情。经过更多搜索，我找不到阻止特定提交推送到服务器的方法。回想起来，即使你能想到的用例也不会最终将你的本地存储库历史变成意大利面条。

# linux - 如何使用 AWK 或 Sed 在 x 个单词后插入换行符 \n

> ID：15979802
> 
> 赞同：4
> 
> 时间：2013-04-12T19:53:15.150
> 
> 标签：linux, bash, shell, unix, awk

我在一行中有这个：

```
We were born in the earth beyond the land 
```

我希望它在 3 个单词行中，如下所示：

```
We were born
in the earth 
beyond the land 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T19:58:24.383

```
$ xargs -n3 < file
We were born
in the earth
beyond the land

$ egrep -o '\S+\s+\S+\s+\S+' file 
We were born
in the earth
beyond the land 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:08:14.693

使用 GNU sed：

```
sed 's/\(\w\w*\W*\w\w*\W*\w\w*\W*\)/\1\n/g' input 
```

和短版：

```
sed 's/\(\(\w\w*\W*\)\{3\}\)/\1\n/g' input 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T20:00:55.833

使用`awk`：

```
awk '{ 
    for ( i = 1; i <= NF; i++ ) { 
        printf "%s%c", $i, (i % 3 == 0) ? ORS : OFS 
    } 
}' infile 
```

它产生：

```
We were born
in the earth
beyond the land 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T20:12:44.400

这是一个 sed 解决方案：

```
sed -e 's/\s/\n/3;s/\s/\n/6;s/\s/\n/9' 
```

它用换行符替换第三、第六和第九个空格。

这个将处理更长的行，即使它们不是三个单词的倍数：

```
sed -e 's/\(\(\S\{1,\}\s*\)\{3\}\)/\1\n/g' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T20:13:02.953

任何有 awk 和 sed 的系统几乎肯定也会有 Perl：

```
 cat myfile.txt | perl -lane 'while(($a,$b,$c) = splice(@F,0,3)){print "$a $b $c"}' 
```

# c# - 如何从 C# 调用 SHExtractIconsW？

> ID：15979804
> 
> 赞同：2
> 
> 时间：2013-04-12T19:53:41.773
> 
> 标签：c#, pinvoke, dllimport

如何在 C# 中使用 SHExtractIconsW dll 函数，我设法在 AutoIt 中做到这一点，

```
Local $arResult = DllCall('shell32.dll', 'int', 'SHExtractIconsW', _
        'wstr', $sIcon, _
        'int', $aDetails[5], _
        'int', $iSize, _
        'int', $iSize, _
        'ptr*', 0, 'ptr*', 0, 'int', 1, 'int', 0) 
```

这是来自微软网站的参考， http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb762163 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762163(v=vs.85).aspx)

基本上我想从exe文件中提取图标，但是这里几乎所有的例子都不能做到这一点，在autoit中我可以用SHExtractIconsW做到这一点，所以我想在C#中尝试一下。

**注意**：我想要 64x64 到 256x256 的图标大小，而不是下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:11:27.727

这似乎是一个[记录](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb762163.aspx)得很差的函数。

的文档`phIcon`说：

> 当此函数返回时，包含一个指向图标句柄数组的指针。

但由于参数具有 type `HICON*`，调用者必须提供数组。

的文档`pIconId`也是错误的。原来它也是一个数组。

所有编组都可以使用默认设置完成。由于此 API 没有 ANSI 版本，因此请为其提供全名，`SHExtractIconsW`并将其设置`Charset`为 Unicode。

就[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb762163.aspx)而言，没有提到`SetLastError`被调用。

```
[DllImport("Shell32.dll", CharSet=CharSet.Unicode, ExactSpelling=true)]
static extern uint SHExtractIconsW(
    string pszFileName,
    int nIconIndex,
    int cxIcon,
    int cyIcon,
    IntPtr[] phIcon,
    uint[] pIconId,
    uint nIcons,
    uint flags
); 
```

要调用它，您需要像这样分配数组：

```
IntPtr[] Icons = new IntPtr[nIcons];
uint[] IconIDs = new uint[nIcons]; 
```

最后，我回应@Cody 的评论。由于此 API 的文档记录明显不正确，因此我会尝试使用已正确记录且您将来可以依赖的替代 API。

* * *

由于您似乎很难让这一切正常工作，这里有一个有趣的程序，它从`shell32.dll`. 我没有尝试进行任何错误检查，也没有`DestroyIcon`在图标上调用等等。

```
using System;
using System.Drawing;
using System.Runtime.InteropServices;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication12
{
    public partial class Form1 : Form
    {
        [DllImport("Shell32.dll", CharSet = CharSet.Unicode, ExactSpelling = true)]
        static extern uint SHExtractIconsW(
            string pszFileName,
            int nIconIndex,
            int cxIcon,
            int cyIcon,
            IntPtr[] phIcon,
            uint[] pIconId,
            uint nIcons,
            uint flags
        );

        public Form1()
        {
            InitializeComponent();
        }

        private IntPtr[] Icons;
        private int currentIcon = 0;
        uint iconsExtracted;

        private void Form1_Load(object sender, EventArgs e)
        {
            uint nIcons = 1000;
            Icons = new IntPtr[nIcons];
            uint[] IconIDs = new uint[nIcons];
            iconsExtracted = SHExtractIconsW(
                @"C:\Windows\System32\shell32.dll",
                0,
                256, 256,
                Icons,
                IconIDs,
                nIcons,
                0
            );
            if (iconsExtracted == 0)
                ;//handle error
            Text = string.Format("Icon count: {0:d}", iconsExtracted);
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            pictureBox1.Image = Bitmap.FromHicon(Icons[currentIcon]);
            currentIcon = (currentIcon + 1) % (int)iconsExtracted;
        }
    }
} 
```

# python - OpenCV中轮廓之间的仿射变换

> ID：15979811
> 
> 赞同：18
> 
> 时间：2013-04-12T19:54:19.287
> 
> 标签：python, opencv

我有从需要注册的胶片扫描的海底图像的历史时间序列。

```
from pylab import *
import cv2
import urllib

urllib.urlretrieve('http://geoport.whoi.edu/images/frame014.png','frame014.png');
urllib.urlretrieve('http://geoport.whoi.edu/images/frame015.png','frame015.png');

gray1=cv2.imread('frame014.png',0)
gray2=cv2.imread('frame015.png',0)
figure(figsize=(14,6))
subplot(121);imshow(gray1,cmap=cm.gray);
subplot(122);imshow(gray2,cmap=cm.gray); 
```

![在此处输入图像描述](https://i.stack.imgur.com/XP2F3.png)

我想使用每个图像左侧的黑色区域进行配准，因为该区域在相机内部，应该及时修复。所以我只需要计算黑色区域之间的仿射变换。

我通过阈值化和找到最大轮廓来确定这些区域：

```
def find_biggest_contour(gray,threshold=40):
    # threshold a grayscale image 
    ret,thresh = cv2.threshold(gray,threshold,255,1)
    # find the contours
    contours,h = cv2.findContours(thresh,mode=cv2.RETR_LIST,method=cv2.CHAIN_APPROX_NONE)
    # measure the perimeter
    perim = [cv2.arcLength(cnt,True) for cnt in contours]
    # find contour with largest perimeter
    i=perim.index(max(perim))
    return contours[i]

c1=find_biggest_contour(gray1)
c2=find_biggest_contour(gray2)

x1=c1[:,0,0];y1=c1[:,0,1]
x2=c2[:,0,0];y2=c2[:,0,1]

figure(figsize=(8,8))
imshow(gray1,cmap=cm.gray, alpha=0.5);plot(x1,y1,'b-')
imshow(gray2,cmap=cm.gray, alpha=0.5);plot(x2,y2,'g-')
axis([0,1500,1000,0]); 
```

![在此处输入图像描述](https://i.stack.imgur.com/yU88w.png)

蓝色是第一帧最长的轮廓，绿色是第二帧最长的轮廓。

**确定蓝色和绿色轮廓之间的旋转和偏移的最佳方法是什么？**

我只想在台阶周围的某个区域使用轮廓的右侧，比如箭头之间的区域。

当然，如果有更好的方法来注册这些图像，我很想听听。我已经在原始图像上尝试了标准的特征匹配方法，但效果不够好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T11:30:20.820

遵循 Shambool 建议的方法，这就是我想出的。我使用了 Ramer-Douglas-Peucker 算法来简化感兴趣区域的轮廓，并确定了两个转折点。我打算使用两个转折点来获得我的三个未知数（xoffset、yoffset 和旋转角度），但是第二个转折点向右有点太远了，因为 RDP 简化了该区域中更平滑的曲线。因此，我使用了通往第一个转折点的线段的角度。在 image1 和 image2 之间区分这个角度给了我旋转角度。我仍然对这个解决方案并不完全满意。它对这两个图像运行良好，但我不确定它是否能在整个图像序列上运行良好。走着瞧。

将轮廓拟合到黑色边框的已知形状确实会更好。

```
# select region of interest from largest contour 
ind1=where((x1>190.) & (y1>200.) & (y1<900.))[0]
ind2=where((x2>190.) & (y2>200.) & (y2<900.))[0]
figure(figsize=(10,10))
imshow(gray1,cmap=cm.gray, alpha=0.5);plot(x1[ind1],y1[ind1],'b-')
imshow(gray2,cmap=cm.gray, alpha=0.5);plot(x2[ind2],y2[ind2],'g-')
axis([0,1500,1000,0]) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Ynebo.png)

```
def angle(x1,y1):
    #  Returns angle of each segment along an (x,y) track
    return array([math.atan2(y,x) for (y,x) in zip(diff(y1),diff(x1))])

def simplify(x,y, tolerance=40, min_angle = 60.*pi/180.): 
    """
    Use the Ramer-Douglas-Peucker algorithm to simplify the path
    http://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm
    Python implementation: https://github.com/sebleier/RDP/
    """
    from RDP import rdp   
    points=vstack((x,y)).T
    simplified = array(rdp(points.tolist(), tolerance))
    sx, sy = simplified.T

    theta=abs(diff(angle(sx,sy)))
    # Select the index of the points with the greatest theta
    # Large theta is associated with greatest change in direction.
    idx = where(theta>min_angle)[0]+1
    return sx,sy,idx

sx1,sy1,i1 = simplify(x1[ind1],y1[ind1])
sx2,sy2,i2 = simplify(x2[ind2],y2[ind2])
fig = plt.figure(figsize=(10,6))
ax =fig.add_subplot(111)

ax.plot(x1, y1, 'b-', x2, y2, 'g-',label='original path')
ax.plot(sx1, sy1, 'ko-', sx2, sy2, 'ko-',lw=2, label='simplified path')
ax.plot(sx1[i1], sy1[i1], 'ro', sx2[i2], sy2[i2], 'ro', 
    markersize = 10, label='turning points')
ax.invert_yaxis()
plt.legend(loc='best') 
```

![在此处输入图像描述](https://i.stack.imgur.com/g2xxx.png)

```
# determine x,y offset between 1st turning points, and 
# angle from difference in slopes of line segments approaching 1st turning point
xoff = sx2[i2[0]] - sx1[i1[0]]
yoff = sy2[i2[0]] - sy1[i1[0]]
iseg1 = [i1[0]-1, i1[0]]
iseg2 = [i2[0]-1, i2[0]]
ang1 = angle(sx1[iseg1], sy1[iseg1])
ang2 = angle(sx2[iseg2], sy2[iseg2])
ang = -(ang2[0] - ang1[0])
print xoff, yoff, ang*180.*pi

-28 14 5.07775871644

# 2x3 affine matrix M
M=array([cos(ang),sin(ang),xoff,-sin(ang),cos(ang),yoff]).reshape(2,3)
print M

[[  9.99959685e-01   8.97932821e-03  -2.80000000e+01]
 [ -8.97932821e-03   9.99959685e-01   1.40000000e+01]]

# warp 2nd image into coordinate frame of 1st
Minv = cv2.invertAffineTransform(M)
gray2b = cv2.warpAffine(gray2,Minv,shape(gray2.T))

figure(figsize=(10,10))
imshow(gray1,cmap=cm.gray, alpha=0.5);plot(x1[ind1],y1[ind1],'b-')
imshow(gray2b,cmap=cm.gray, alpha=0.5);
axis([0,1500,1000,0]);
title('image1 and transformed image2 overlain with 50% transparency'); 
```

![在此处输入图像描述](https://i.stack.imgur.com/n2ZuP.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T07:43:39.893

好问题。

一种方法是将轮廓表示为 2d 点云，然后进行配准。Matlab 中更[简单明了的代码](http://www.cs.cmu.edu/~ytsin/KCReg/)，可以为您提供仿射变换。

以及包含 python 和 matlab 包装器的[更复杂的 C++ 代码（使用 VXL 库） 。](http://code.google.com/p/gmmreg/)或者您可以使用一些改进的 ICP（迭代最近点）算法，该算法对噪声具有鲁棒性并且可以处理仿射变换。

此外，您的轮廓似乎不是很准确，因此可能是个问题。

另一种方法是使用某种使用像素值的配准。 [Matlab代码](http://www.mathworks.com/matlabcentral/fileexchange/34510-image-registration-gui)（我认为它使用某种最小化器+互相关度量）也可能有某种用于医学成像的光流配准（或其他类型）。

您也可以将点特征用作 SIFT(SURF)。

[您也可以在FIJI(ImageJ)](http://fiji.sc/Fiji)中快速尝试 此[链接](http://fiji.sc/Landmark_Correspondences)。

1.  打开 2 张图片
2.  插件->特征提取->筛选（或其他）
3.  将预期变换设置为仿射
4.  查看 ImageJ 日志中估计的变换模型 [3,3] 单应矩阵。如果它运行良好，那么您可以使用 OpenCV 在 python 中实现它，或者使用 Jython 和 ImageJ。

如果您发布原始图像并描述所有条件会更好（似乎图像在帧之间发生变化）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T07:17:25.293

您可以用它们各自的椭圆来表示这些轮廓。这些椭圆以轮廓的质心为中心，并且朝向主密度轴。您可以比较质心和方向角。

1）填充轮廓=> drawContours 厚度=CV_FILLED

2) 寻找时刻 => cvMoments()

3）并[使用它们](http://en.wikipedia.org/wiki/Image_moment)。

质心：{ x, y } = {M10/M00, M01/M00 }

方向（θ）： ![在此处输入图像描述](https://i.stack.imgur.com/MYahf.png)

编辑：我为您的案例定制了遗留（enteringblobdetection.cpp）的示例代码。

```
 /* Image moments */
            double      M00,X,Y,XX,YY,XY;
            CvMoments   m;
            CvRect      r = ((CvContour*)cnt)->rect;
            CvMat       mat;
            cvMoments( cvGetSubRect(pImgFG,&mat,r), &m, 0 );
            M00 = cvGetSpatialMoment( &m, 0, 0 );
            X = cvGetSpatialMoment( &m, 1, 0 )/M00;
            Y = cvGetSpatialMoment( &m, 0, 1 )/M00;
            XX = (cvGetSpatialMoment( &m, 2, 0 )/M00) - X*X;
            YY = (cvGetSpatialMoment( &m, 0, 2 )/M00) - Y*Y;  
            XY = (cvGetSpatialMoment( &m, 1, 1 )/M00) - X*Y; 

            /* Contour description */
            CvPoint myCentroid(r.x+(float)X,r.y+(float)Y);
            double myTheta =  atan( 2*XY/(XX-YY) ); 
```

此外，请[使用](http://opencvpython.blogspot.gr/2012/06/contours-3-extraction.html)OpenCV 2.0 示例进行检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T02:13:51.757

如果您不想找到两个图像之间的单应性并且想要找到仿射变换，那么您有三个未知数，旋转角度 (R) 以及 x 和 y 中的位移 (X,Y)。因此，至少需要两个点（每个点有两个已知值）才能找到未知数。两个点应该在两个图像或两条线之间匹配，每个点都有两个已知值，即截距和斜率。如果您使用点匹配方法，则点之间的距离越远，找到的噪声转换就越稳健（如果您记住错误传播规则，这非常简单）。

在两点匹配法中：

1.  在第一幅图像 I1 中找到两个点 (A 和 B) 以及在第二幅图像 I2 中找到它们的对应点 (A',B')
2.  找到A和B之间的中点：C，以及A'和B'之间的中点：C'
3.  C和C'（CC'）的差异给出了图像（X和Y）之间的平移
4.  使用 CA 和 C'-A' 的点积，您可以找到旋转角度 (R)

为了检测稳健点，我会找到您在计数器侧面找到的具有最高二阶导数（Hessian）绝对值的点，然后尝试匹配它们。由于您提到这是一个视频片段，您可以轻松地假设每两帧之间的转换很小以拒绝异常值。

# rest - 请求资源子集的 RESTful 方式

> ID：15979812
> 
> 赞同：5
> 
> 时间：2013-04-12T19:54:24.627
> 
> 标签：rest

假设我有一个名为 user_stats 的资源，其中包含用户拥有多少帖子、评论、喜欢和关注者等信息。是否有一种 RESTful 方式只询问部分统计信息（即对于 user_stats/3，告诉我这个用户有多少帖子和评论，但不要告诉我这个用户有多少粉丝。）

我问的原因是一些统计属性可能是计算密集型的（是的，我在查询时生成它们）。因此，简单地不要求它可以减少工作量。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T20:52:55.120

有一本非常[有用的 38 页免费电子书](https://blog.apigee.com/detail/announcement_new_ebook_on_web_api_design/)，其中包含有关设计 Web API 的最佳实践，您可能会发现它很有帮助，至少我做到了。

对于您的情况，说明：

> **在逗号分隔的列表中添加可选字段**
> 
> 谷歌的方法非常有效。
> 
> 以下是如何使用这种方法从我们的狗 API 中获取我们需要的信息：
> 
> `/dogs?fields=name,color,location`
> 
> 读起来很简单；开发人员可以只选择应用程序在给定时间所需的信息；它减少了带宽问题，这对于移动应用程序很重要。部分选择语法还可用于包含相关资源，从而减少获取所需信息所需的请求数量。

也许这就是你要找的东西？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T20:53:28.913

至少有三个选项：

1.  使用查询参数作为过滤器

    例如 user_stats?fields=posts,comments

2.  制作 user_stats 复合资源并为特定统计创建新资源

    例如 JSON 中的 /user_stats

    ```
    {
      "blogs" : {
          "count" : 10,
          "link" : "/user_stats_blobs"
       },
       ...
    } 
    ```

    然后您可以获得整个统计信息 (GET /user_stats) 或只是一个 (GET /user_stats_blobs)

3.  创建过滤器表示；使用 POST 将过滤器表示作为请求的一部分发布

    例如请求 POST /user_stats/filter

    ```
     {
         "fields" : [ "blogs", ...]
     } 
    ```

    响应正文仅包含请求/过滤的数据。

所有解决方案都是 RESTful。解决方案 1\. 易于实施，但可扩展性和透明度有限。解决方案 2\. 期望您创建新资源，在这种情况下这是开销（您只需要一个数字）。所以，我会推荐解决方案 3。因为实施起来并不难，易于扩展和透明。

# mysql - 将 MySQL 查询转换为 Microsoft SQL Server

> ID：15979814
> 
> 赞同：1
> 
> 时间：2013-04-12T19:54:25.157
> 
> 标签：mysql, sql-server, database

我需要将此`MySQL`查询转换`SQL Server`为语法`'LIMIT ?, ?'`是我的主要主要问题的查询，因为不兼容`SQL Server`.

同时我不知道结尾的从句的含义`SELECT FOUND_ROW()`。

我是数据库的初学者，所以我将不胜感激。

```
SELECT SQL_CALC_FOUND_ROWS TITLE, URL FROM SITE WHERE CITY='Berlin' LIMIT ?, ?

...

stmt.setInt(1, offset);
stmt.setInt(2, numRecords);

...

rs = stmt.executeQuery("SELECT FOUND_ROWS()");
if (rs.next())
this.noOfRecords = rs.getInt(1);

... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:25:27.487

如果 MySQL 是：

```
SELECT URL
  FROM SITE
  WHERE CITY='Berlin'
  LIMIT 30, 20 
```

然后它返回第 31 到 50 行。在 SQL Server 中，您可以执行以下操作：

```
WITH somerows AS (
  SELECT TOP 50 URL, ROW_NUMBER() OVER (ORDER BY URL) AS SeqValue
  FROM SITE
  WHERE CITY='Berlin'
)
SELECT * FROM somerows
WHERE SeqValue BETWEEN 31 and 50 
```

请注意， SQL Server 查询中的 是 MySQL值`50`的总和，并且MySQL 中的 是零索引的，因此它在 SQL Server 中变成了计数器是一索引的。非常感谢 Kevin Suchlicki 在下面的评论中指出这一点。`LIMIT``30``31``ROW_NUMBER`

另请注意，与 MySQL 查询不同，您必须使用 SQL Server 查询对行进行排序。

最后，`SQL_CALC_FOUND_ROWS`是启用该`FOUND_ROWS()`功能的 MySQL 关键字。它在[文档](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)中进行了解释。没有等效的 SQL Server。您需要以其他方式`this.noOfRecords`在代码中设置行数，但您应该能够解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:26:47.017

问号在 MySQL 中用于将参数绑定到语句。因此，根据您的代码，传递的参数是 LIMIT 函数要使用的偏移量和数字或记录。在我看来，它正在分页结果。在您的 SQL Server 语句上尝试此 SQL 作为 MySQL 的替换

```
DECLARE @offset INT
DECLARE @numRecords INT
SET @offset = 1
SET @numRecords = 2

SET ROWCOUNT @numRecords
WITH RowsResult AS 
(
    SELECT ROW_NUMBER() OVER (ORDER BY TITLE) AS RowNum,
        TITLE, 
        URL 
    FROM [SITE] 
    WHERE CITY='Berlin' 
    ORDER BY TITLE
)
SELECT  TITLE
FROM    URL
WHERE   RowNum > @offset
SET ROWCOUNT 0 
```

# javascript - 即使没有附加到 DOM，HTML 元素也会加载吗？主干视图呢？

> ID：15979817
> 
> 赞同：0
> 
> 时间：2013-04-12T19:54:35.027
> 
> 标签：javascript, jquery, html, backbone.js

如果我创建一个图像标签而不实际将其添加到 DOM 并向其添加源代码，它仍然会获取图像并加载它。我的意思是当我将它附加到 DOM 时，我是否会立即看到图像而没有任何延迟？

更具体地说，我目前正在与骨干合作。因此，如果我创建一堆主干视图并将它们存储在一个数组中，每个都包含单独的图像，即使我不将其附加到 DOM，这些图像是否会呈现？当我将这些视图附加到 DOM 时。我是否可以立即看到图像而不会有任何延迟？

```
this.$el.append(view.render().el); // where view object was created before and stored in an array 
```

这是一个好的预取策略吗？内存限制呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T19:55:31.490

是的，这是加载背景图像的一种常见（而且不是很好）方案：您将 src 添加到 Image 元素，但不将其添加到 DOM。浏览器加载它就像它在 DOM 中一样。

当您在加载图像后将它们添加到 DOM 时，它们会立即被渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:09:51.753

即使您不将图像元素添加到 DOM 树中，它仍然是使用`document`对象创建的，因此它属于该文档。您根本无法创建独立于文档而存在的元素，因此一旦元素存在，浏览器就会请求图像。

但是，在视图的情况下，这取决于您实际创建元素的时间。如果该`render`方法创建了图像元素，那么直到您使用它之前它才会存在。

# java - 网格包约束不起作用

> ID：15979818
> 
> 赞同：0
> 
> 时间：2013-04-12T19:54:35.633
> 
> 标签：java, swing, gridbaglayout

每当我使用 gridbaglayout 将缩略图添加到 Jpanel 时，我使用 gridbaglayout 来显示 JLabel（缩略图数）和一些缩略图，它会显示在中心，忽略网格值。gridx 值工作正常，但 gridy 值被完全忽略......

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import javax.swing.*;

public class grid {

    private JFrame frame = new JFrame();

    private JLabel a = new JLabel("Welcome to PhotoAlbum55");

    /**
     * Create the frame.
     */
    public grid() {

        createAndShowGUI();

    }

    private void addComponentsToPane(Container pane) {

        SpringLayout layout = new SpringLayout();
        pane.setLayout(layout);

        layout.putConstraint(SpringLayout.WEST, a, 60, SpringLayout.WEST, pane);
        layout.putConstraint(SpringLayout.NORTH, a, 0, SpringLayout.NORTH, pane);       
        a.setFont(new Font("Segoe UI", Font.BOLD, 20));
        pane.add(a);

        JPanel photoPanel = new JPanel();
        GridBagLayout gbl = new GridBagLayout();
        photoPanel.setLayout(gbl);
        GridBagConstraints gbc = new GridBagConstraints();

        JScrollPane photoScroll = new JScrollPane(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS); 
        photoScroll.setViewportView(photoPanel);
        pane.add(photoScroll);

        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.ipadx = 15;
        gbc.fill = GridBagConstraints.HORIZONTAL;

        JLabel photo = new JLabel();        
        Image img = new ImageIcon("C:\\Users\\Public\\Pictures\\Sample Pictures\\Desert.jpg").getImage();
        Image newimg = img.getScaledInstance(50, 50,  java.awt.Image.SCALE_SMOOTH);  
        ImageIcon newIcon = new ImageIcon(newimg); 
        photo.setIcon(newIcon);

        gbl.setConstraints(photo, gbc);                                 
        photoPanel.add(photo);

        JLabel photo1 = new JLabel();       
        Image img1 = new ImageIcon("C:\\Users\\Public\\Pictures\\Sample Pictures\\Lighthouse.jpg").getImage();
        Image newimg1 = img1.getScaledInstance(50, 50,  java.awt.Image.SCALE_SMOOTH);  
        ImageIcon newIcon1 = new ImageIcon(newimg1); 
        photo1.setIcon(newIcon1);

        gbc.gridx = 1;
        gbc.gridy = 0;
        gbc.ipadx = 15;
        gbc.fill = GridBagConstraints.HORIZONTAL;

        gbl.setConstraints(photo1, gbc);                                    
        photoPanel.add(photo1);

    //  photoPanel.setPreferredSize(new Dimension(900, 900));
        photoScroll.setPreferredSize(new Dimension(500, 500));

        layout.putConstraint(SpringLayout.WEST, photoScroll, 60, SpringLayout.WEST, a);
        layout.putConstraint(SpringLayout.NORTH, photoScroll, 100, SpringLayout.NORTH, a);

    }

    private void createAndShowGUI() { // Creating the GUI...

        frame.getContentPane().setBackground(Color.WHITE);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("PhotoAlbum55");

        // Set up the content pane.
        addComponentsToPane(frame.getContentPane());

        frame.pack();
        frame.setSize(690, 622);
        frame.setLocationRelativeTo(null);
        frame.setResizable(true);
        frame.setVisible(true);

    }

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        SwingUtilities.invokeLater(new Runnable() {

            public void run() {

                try {

                    new grid();
                }

                catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:06:23.797

两个图像都在相同的 y 坐标上，因此应用程序的行为符合预期。另一方面，x 坐标不同，因此您需要设置

```
gbc.weightx = 1; 
```

以便他们定位。如果您需要将图像添加到面板顶部，则需要将它们*锚定*在那里并沿 y 轴设置权重：

```
gbc.anchor = GridBagConstraints.NORTH;
gbc.weighty = 1; 
```

# .net - 对状态机进行单元测试

> ID：15979820
> 
> 赞同：1
> 
> 时间：2013-04-12T19:54:38.177
> 
> 标签：.net, unit-testing, state-pattern

我对`C#`他们的单元测试设施不熟悉。`state`我使用来自的模式编写了一个状态机`GoF`

```
public class Program
{
    private static void Main()
    {
        var c = new Context(SimpleStateMachine.StateInit);
        c.Run();
        Console.Read();
    }
}

public static class SimpleStateMachine
{
    public static void StateInit(Context context)
    {
        // ... do some init
        context.State = StateConfigure;
    }
    public static void StateConfigure(Context context)
    {
        // do some conifigure
        context.State = StateMeasurement;
    }
    public static void StateMeasurement(Context context)
    {
        // do some measurement
        context.State = GetMeasurement()? StateConfigure : StateFinished;
    }
    public static void StateFinished(Context context)
    {
        // do some deinit
        context.State = (Action<Context>)null;
    }
}

public class Context
{
    public Action<Context> State { get; internal set; }

    public Context(Action<Context> state)
    {
        State = state;
    }

    public void Run()
    {
        while (State != null)
        {
            State(this);
        }
    }
} 
```

如何正确测试这样的状态机？这个具体的状态机只是一个示例实现。正确的实现有更多的状态和条件进行转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:58:39.130

有多种方法可以做到这一点。

如果您真正使用严格的“状态机”模式，则需要通过 monad 处理副作用。

如果您只是想在几个输入后测试状态，您可以为其提供几个输入，然后测试您期望它处于的状态。

# java - 实例化抽象类解决方法

> ID：15979822
> 
> 赞同：0
> 
> 时间：2013-04-12T19:54:44.963
> 
> 标签：java, graph, abstract

因此，由于我将使用各种类型的图表，我决定将常见行为放在抽象类中：

```
public abstract class Graph {

private List<Node> nodes;
private List<Edge> edges;

public void addNode(Node n) {
    nodes.add(n);
}

public void addEdge(Edge e) {
    edges.add(e);
}

public Node getNode(Node n) {
    return nodes.get(nodes.indexOf(n));
}

public Edge getEdge(Node left, Node right) {
    return edges.get(edges.indexOf(new Edge(left, right)));
   }
} 
```

`getNode()`即使`Node`类是抽象的，也不会抱怨（还）。问题是边也是抽象的，但是在哪里`equals()`和`hashCode()`已被覆盖，以便可以通过其节点识别边。似乎没有必要使边缘列表受保护或其他东西并`getEdge()`在每个子类中实现相同的方法。

有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:06:06.170

只是不要使`Edge`类抽象。如果您有只希望在子类中实现的方法，请在`Edge`该 throw中进行存根实现`UnsupportedOperationException`。在实践中，这会导致非常少的实际问题，因为这些实施中的错误很早就被发现了。

另一种选择是不依赖`List#indexOf`而是构建自己的自定义算法，该算法不是基于`equals`而是基于节点对的显式比较来定位边缘。基本上，它相当于`equals`通过外部方法实现语义（`Edge`为方便起见，它可以是静态方法）。

# php - 使用ajax更新股票价格

> ID：15979823
> 
> 赞同：0
> 
> 时间：2013-04-12T19:54:48.120
> 
> 标签：php, javascript, ajax, jquery

我正在做一个小型的个人网络投资组合，以学习网络开发。我有一份我“购买”的所有股票的清单，我想从雅虎财经实时更新价格。我已经可以进行价格更新，但是我用一个使用 javascript 调用的新股票覆盖了显示股票的表格。

我知道必须有更清洁的方法。我正在尝试使用 javascript 更新价格，但我认为我没有做对所有事情。

这是我到目前为止所拥有的。

Portfolio.php 显示我拥有的所有股票

```
<?php foreach ($shares as $row): ?>

        <tr >
        <td><?php echo $row["symbol"];?></td>
        <td><a href="funds.php" id="<?php echo $row["symbol"]?>"><?php echo $row["name"];?></a></td>
        <td style="text-align: right;"><?php echo $row["shares"];?></td>
        <td id="price" style="text-align: right;">$ <?php echo number_format($row["price"],2);?></td>
        <td style="text-align: right;"><?php 
        $change = number_format($row["change"],2);
        echo sprintf( "%+1.2f", $change );
        echo "   ( ";
        echo $row["pct"]; 
        echo "   )";
        ?></td>
        <td style="text-align: right;">$ <?php echo $row["dayGain"];?></td>    
        <td style="text-align: right;">$ <?php echo number_format($row["total"],2);?></td>
        </tr>

<?php endforeach; ?>

</table>    
<script type="text/javascript" src="../html/js/update.js"  ></script> 
```

然后我有 update.php，它以 json 格式返回来自 yahoo Finance 的所有股票信息

```
<?php
// configuration
require("../includes/config.php"); 

//query user's portfolio

$rows = query("SELECT * FROM shares WHERE id = ?", $_SESSION["id"]);
$cash = query("SELECT cash FROM users WHERE id = ?", $_SESSION["id"]);

    //create array to store the shares
    $shares = array();

    //for each of the user info
   foreach($rows as $row){

        $yql_base_url = "http://query.yahooapis.com/v1/public/yql";

        $yql_query = "select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20(%22".$row['symbol']."%22)%0A%09%09";

        $env = "env=http%3A%2F%2Fdatatables.org%2Falltables.env";
        $yql_full_query = $yql_base_url . "?q=" . $yql_query . "&format=json&" . $env;
        $session = curl_init($yql_full_query);
        curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
        $json = curl_exec($session);
        $stock = json_decode($json);

        if($stock->query->results !== false){

            $shares [] = array(

                "symbol" => $stock->query->results->quote->symbol,
                "price" => $stock->query->results->quote->LastTradePriceOnly

            );

        }

    }
   $return = array("price" => $shares ); 
    echo json_encode($return);

?> 
```

第三个文件是 update.js，我在其中尝试使用 javascript

```
 $(document).ready(function(){
 function stock() {
        $(function() {
            $.getJSON('../update.php',function(result){
            $("div#price2").html(result.price);

        });
    });
        stock();
        setInterval(stock(), 10000);

    });
}); 
```

如果我直接访问 update.php，我可以将价格查看为 json。我认为问题出在 update.js 文件上，但我无法弄清楚问题所在。我什至无法在价格字段中从 update.js 打印 Hello。

我要做的是显示我存储在数据库中的股票，然后使用 ajax 和 javascript 更新价格。任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:01:36.487

使用 php 的 json 函数和 .getJSON 来更新它......这是一些示例代码：

```
// pull_stock_price.php
<?php
$return = array("content" => "New Stock Price: $2000");
json_encode($return);
?>

// Jquery to pull stock price once every 10 seconds:
function stock() {
    $(function() {$.getJSON("pull_stock_price.php",function(result){
    $("#StockPrice").html(result.content);
});
});
stock();
setInterval(stock, 10000);

// HTML!
<td><div id="StockPrice"></div></td> 
```

这是做什么的：每 10 秒，用户的浏览器将拉取 pull_stock_price.php 并从 json 和更新中获取提供的内容。您可以让 pull_stock_price.php 从数据库、curl 或任何地方拉取数据，并按照您的需要格式化数据。

# c++ - 将子菜单项添加到菜单项

> ID：15979824
> 
> 赞同：2
> 
> 时间：2013-04-12T19:54:50.107
> 
> 标签：c++, menu, win32gui

我在 C++ 中将子菜单项添加到我的窗口菜单时遇到了麻烦。我正在为我的游戏添加一些（确切地说是 20 个）保存槽。

这是我保存槽的代码：

```
 HMENU win32MENU = CreateMenu();//Menu bar

    HMENU win32SETTINGS = CreateMenu();//Settings option
        HMENU win32SAVESLOTS = CreateMenu();//Save Slots

    AppendMenu(win32MENU,MF_POPUP,(UINT_PTR)win32SETTINGS,"Settings");

    //Settings
    AppendMenu(win32SETTINGS,MF_STRING,(UINT_PTR)win32SAVESLOTS,"Save                       Ctrl+S");

        //Save Slots
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Default ~");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 1");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 2");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 3");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 4");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 5");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 6");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 7");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 8");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 9");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 10");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 11");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 12");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 13");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 14");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 15");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 16");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 17");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 18");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 19");
        AppendMenu(win32SAVESLOTS,MF_STRING,NULL,"Save Slot 20"); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:20:48.440

改变：

`AppendMenu(win32SETTINGS,MF_STRING,(UINT_PTR)win32SAVESLOTS,"Save Ctrl+S");`

至

`AppendMenu(win32SETTINGS,MF_STRING | MF_POPUP,(UINT_PTR)win32SAVESLOTS,"Save Ctrl+S");`

还有，改变

`HMENU win32SAVESLOTS = CreateMenu();//Save Slots`

至

`HMENU win32SAVESLOTS = CreatePopupMenu();//Save Slots`

# java - 循环遍历 HashMaps Java 的 ArrayList

> ID：15979828
> 
> 赞同：6
> 
> 时间：2013-04-12T19:55:14.060
> 
> 标签：java, arraylist, hashmap

```
ArrayList<HashMap<String, Integer>> myList = new ArrayList<HashMap<String, Integer>>();

    HashMap<String, Integer> check = new HashMap<String, Integer>(); 
```

我的数组列表中有一些哈希图，我想比较哈希图的重复项，例如 0,1 0,2 0,3 0,4....1,2 1,3 1,4.... .2,3 2,4 等

我正在做一个嵌套的 for 循环，但被困在如何访问哈希图并尝试了这个

```
for (int a =0; a<myList.size();a++){
            for(int b=a+1; b<myList.size();b++){
                for (String key : myList[a].check.keySet())
            }
        } 
```

但这不起作用。如果它们在数组列表中，我如何访问我的哈希图的所有键？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T20:21:35.997

这是一个迭代的例子。我创建了虚拟数据来测试代码

```
private void ArrayListAndHashMap()
    {
        ArrayList<HashMap<String, Integer>> myList = new ArrayList<HashMap<String, Integer>>();

        HashMap<String, Integer> data1 = new HashMap<String, Integer>();
         data1.put("0",new Integer(1));
         data1.put("1",new Integer(2));
         data1.put("2",new Integer(3));
         data1.put("3",new Integer(4));

        HashMap<String, Integer> data2 = new HashMap<String, Integer>();
        data1.put("10",new Integer(10));
         data1.put("11",new Integer(20));
         data1.put("12",new Integer(30));
         data1.put("13",new Integer(40));

         myList.add(data1);
         myList.add(data2);

        for (int a =0; a<myList.size();a++)
        {
            HashMap<String, Integer> tmpData = (HashMap<String, Integer>) myList.get(a);
            Set<String> key = tmpData.keySet();
            Iterator it = key.iterator();
            while (it.hasNext()) {
                String hmKey = (String)it.next();
                Integer hmData = (Integer) tmpData.get(hmKey);

                System.out.println("Key: "+hmKey +" & Data: "+hmData);
                it.remove(); // avoids a ConcurrentModificationException
            }

        }       
    } 
```

**输出是**

```
Key: 3 & Data: 4
Key: 2 & Data: 3
Key: 10 & Data: 10
Key: 1 & Data: 2
Key: 0 & Data: 1
Key: 13 & Data: 40
Key: 11 & Data: 20
Key: 12 & Data: 30 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T19:58:29.367

运算符`[]`只能用于数组。List 有一个`get(int index)`方法来获取给定索引处的元素：

```
for (String key : myList.get(a).keySet()) {
    ...
} 
```

记录了 Java 类： http: [//docs.oracle.com/javase/6/docs/api/](http://docs.oracle.com/javase/6/docs/api/)

# ruby - 如何将数组数组（从读取 csv 文件）转换为哈希

> ID：15979834
> 
> 赞同：0
> 
> 时间：2013-04-12T19:55:41.317
> 
> 标签：ruby, arrays, csv, hash

读取 csv 文件后，我有以下数据结构：

```
[["name1 | value1 | value2 | value3 | value4 "],
 ["name2 | value1 | value2 | value3 | value4 "],...] 
```

我需要将其转换为哈希，如下所示：

```
{"name1" => "value1 | value2 | value3 | value4", 
 "name2" => "value1 | value2 | value3 | value4",...} 
```

或者，更好的是：

```
{"name1" => ["value1","value2","value3","value4"],
 "name2" => ["value1","value2","value3","value4"],...} 
```

我找到了许多将数组数组转换为哈希的方法，但没有一种方法将内部数组中的第一个元素用作哈希的键。

谁能提出一个优雅的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:11:26.390

```
rows = [["name1 | value1 | value2 | value3 | value4 "],
        ["name2 | value1 | value2 | value3 | value4 "],]

h = Hash[
   rows.flatten.
   map { |r| r = r.split('|').map(&:strip); [r.first, r.drop(1)] }
]

# => {"name1"=>["value1", "value2", "value3", "value4"],
#     "name2"=>["value1", "value2", "value3", "value4"]} 
```

我有点好奇你是如何得出那个输入结构的。如果您阅读带有分隔符“|”的 CSV，您可能会从以下内容开始：

```
[["name1", "value1", "value2", "value3", "value4"],
 ["name2", "value1", "value2", "value3", "value4"]] 
```

这就是`r = r.split('|').map(&:strip)`外部地图中要转换的内容。如果您确实有这种形式，则转换为哈希会简单得多：

```
Hash[ rows.map { |r| [r.first, r.drop(1)] } ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T06:37:47.547

除了@dbenhur 的回答。假设 CSV 类可以处理分隔符，并且您得到一个基本结构，例如：

```
rows = [["name1", "value1", "value2", "value3", "value4"],
        ["name2", "value1", "value2", "value3", "value4"]] 
```

您可以使用 splat 运算符对其进行转换：

```
Hash[rows.map { |name, *values| [name, values] }]
# => {"name1"=>["value1", "value2", "value3", "value4"], "name2"=>["value1", "value2", "value3", "value4"]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T10:43:42.117

你可以试试这个：

```
csv.inject({}) do |memo, item|
    parts = item.first.split('|').map(&:strip)
    memo[parts.first] = parts.slice(1,parts.size)
    memo
end 
```

给你`{"name1" => ["value1","value2","value3","value4"], "name2" => ["value1","value2","value3","value4"],...}`

附带说明一下，每当我编写代码时，`memo[parts.first] = parts.slice(1,parts.size)`我真的希望 Ruby 只添加一个`head`and`tail`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T20:05:31.213

```
def to_hash(a)
  h = {}
  a.each do |item|
    a2 = item.first.strip.split(' | ')
    h[a2.shift] = a2
  end
  h
end 
```

用法：

```
a = [["name1 | value1 | value2 | value3 | value4 "],
     ["name2 | value1 | value2 | value3 | value4 "]]
to_hash(a)
# => {"name1"=>["value1", "value2", "value3", "value4"],
#     "name2"=>["value1", "value2", "value3", "value4"]} 
```

# shell - 如何从另一个文件中删除文件的特 定内容？

> ID：15979838
> 
> 赞同：2
> 
> 时间：2013-04-12T19:55:53.527
> 
> 标签：shell, sed, command

我有一个文件 foo.txt：

$cat foo.txt

```
<ul>
<li>
<p>something</p>
</li>
<li>
<p>something else</p>
</li>
</ul> 
```

还有一个 bar.txt：

$cat bar.txt

```
<li>
<p>something</p>
</li> 
```

我想要所需的输出：

```
<ul>
<li>
<p>something else</p>
</li>
</ul> 
```

我努力了：

```
$sed '{/r bar.txt/} d' foo.txt 
```

但它没有用，我不能这样做：

```
$sed '/<li>/,/</li>/ d' foo.txt 
```

因为还有其他元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:32:46.570

此 awk 单行代码适用于您的示例：

```
 awk -v RS="" '{gsub(/\n/,"\x99")}NR==FNR{t=$0;next}{gsub(t,"");gsub(/\x99/,"\n");print}' bar foo 
```

不完全相同的输出（空行），但你明白了。请参阅示例下方的简短说明。

请参见下面的示例：

```
kent$  head foo bar
==> foo <==
<ul>
<li>
<p>something</p>
</li>
<li>
<p>something else</p>
</li>
</ul>

==> bar <==
<li>
<p>something</p>
</li>

kent$  awk -v RS="" '{gsub(/\n/,"\x99")}NR==FNR{t=$0;next}{gsub(t,"");gsub(/\x99/,"\n");print}' bar foo
<ul>

<li>
<p>something else</p>
</li>
</ul> 
```

**添加简短说明**

基本思想是，用不可见的字符替换换行符（在我使用的示例中`\x99`），然后我们有两个单行字符串。我们可以进行匹配和替换。在我们处理完字符串后，将所有字符串全部替换`\x99`回换行符以获取原始格式。这个想法也适用于 sed，但有点复杂，你必须制作一个标签并使用模式/保持空间......

在我刚刚使用的示例中`RS=""`（我有点懒）。您可以使用`sprintf`函数来构建单行字符串，它会更通用，因为您的两个真实文件都可能有空行。（但是你的例子没有）

关键是看不见的字符替换部分。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:12:38.827

sed is an excellent tool for simple subsitutions on a single line, for anything else use awk. Here is a GNU awk solution:

```
$ gawk -v RS='\0' -v ORS= 'NR==FNR{re=$0;next} {sub(re,"")} 1' bar.txt foo.txt
<ul>
<li>
<p>something else</p>
</li>
</ul> 
```

If "bar.txt" can contain RE metacharacters and you find those causing undesirable matches in the sub() (unlikely when matching large amounts of text) then you need to switch to an index()+substr()s solution to work with strings instead of REs, e.g.:

```
$ gawk -v RS='\0' -v ORS= '
   NR==FNR { str=$0; rlength=length(str); next }
   rstart = index($0,str) { $0 = substr($0,1,rstart-1) substr($0,rstart+rlength) }
   1' bar.txt foo.txt
<ul>
<li>
<p>something else</p>
</li>
</ul> 
```

# tomcat - 是否可以在 Tomcat 上下文停止时关闭 QuartzScheduler？

> ID：15979839
> 
> 赞同：2
> 
> 时间：2013-04-12T19:55:53.520
> 
> 标签：tomcat, grails, quartz-scheduler

我有一个 Grails 应用程序，我想在 Tomcat 停止上下文时关闭 Quartz。

我尝试使用 BootStrap 破坏闭包但没有成功，但我不确定它是否可以通过那条路线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:19:49.113

可能您需要设置是否等待正在运行的作业在关机时完成。添加到配置：

```
quartz {
    waitForJobsToCompleteOnShutdown = false
} 
```

# asp.net-mvc - 不显眼的验证消息不适用于没有名称属性的输入

> ID：15979842
> 
> 赞同：4
> 
> 时间：2013-04-12T19:56:07.487
> 
> 标签：asp.net-mvc, jquery-validate, unobtrusive-validation

我们的信用卡处理器（Braintree Payments）要求我们不要在信用卡字段（卡号、到期日期和 CCV）上使用“名称”属性，以确保它们不会以未加密的方式发布到服务器。我找到了一个自定义扩展来生成一个无名文本框（[如何扩展 html.textboxfor 以删除名称属性？](https://stackoverflow.com/questions/12311364/how-to-extend-html-textboxfor-to-remove-the-name-attribute)）。这很好用，因为它允许我们生成一个没有 name 属性的文本框，但它仍然会自动添加所有其他验证属性等。但是我遇到了一个问题。

当我`@Html.NameLessTextBoxFor(model => model.CardNumber)`在我的视图中使用时，它会正确生成没有名称属性的文本框。我们还在视图模型中使用数据注释来生成不显眼的验证。实际网站上的明显问题是，当这些无名字段之一出现验证错误时，ValidationMessage 跨度不会显示任何错误消息。无名称字段正确变为红色，但不显示错误消息。

我相信我已经推断出*为什么*这不起作用，但我不知道如何解决它。我查看了为 ValidationMessage 跨度生成的 HTML，我看到了这个属性：

```
data-valmsg-for="MyViewModel.CardNumber" 
```

如果我的无名字段的 name 属性设置正常，那将是正确的。但是由于我无法设置 name 属性，如何让 ValidationMessage 仍然有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:26:57.217

擦洗提交时的名称属性将类似于：

```
$("form").submit(function () {
    $(this.find(":input").removeAttr("name");
}); 
```

不过，这可能在事件链中为时已晚，因此您可能必须阻止默认并重新发布表单，如下所示：

```
$("form").submit(function (e) {
    if($(this.find(":input[name]").length > 0) {
        e.preventDefault();
        $(this.find(":input").removeAttr("name");
        $(this).trigger("submit");
    }
}); 
```

或者确实像我一样做，并将回调编码为不显眼的验证，以检查验证是否已通过，然后*删除*名称属性。这是我添加该回调的注释：

```
//Added the following to the onErrors function:
    if ($.isFunction(callBackOnError)) {
        setTimeout(function () {
            callBackOnError();
        }, 100);
    }
//Then in the exposing declarative section of the plugin
    onError: function (callBack) {
        callBackOnError = callBack;
    } 
```

玩一玩，看看你发现了什么。渴望知道你的最终结论，所以请更新。希望这对您有所帮助。

# c# - 在浏览器中运行时，Asp.Net WebApp URL 有额外的文件夹信息

> ID：15979844
> 
> 赞同：0
> 
> 时间：2013-04-12T19:56:32.603
> 
> 标签：c#, asp.net, visual-studio-2008

我在 C# 中有一个使用 VS 2008 和 Framework 3.5 的 Web 应用程序。突然之间，当我在调试中运行应用程序时，URL 变为“ [http://ServerName.com/IncidentReporting/(S(vrrpiuumx3ueqfbm0ljjnh45))/Default.aspx](http://ServerName.com/IncidentReporting/(S(vrrpiuumx3ueqfbm0ljjnh45))/Default.aspx) ”，而不是我所期望的“ [http:// /ServerName.com/IncidentReporting/Default.aspx](http://ServerName.com/IncidentReporting/Default.aspx) ”。这导致我的一些图像链接嵌入在应用程序生成的电子邮件中，导致严重的胃灼热。任何想法为什么会发生这种情况？当我将项目部署到生产 Web 服务器时也会发生这种情况。

谢谢，唐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:01:24.413

您启用了无 cookie 会话。这实际上是一个很大的安全风险。在您的 web.config 中，确保您有：

```
<sessionState cookieless="UseCookies" /> 
```

# android - 以编程方式解析内存快照 hprof 索引文件

> ID：15979846
> 
> 赞同：11
> 
> 时间：2013-04-12T19:56:44.260
> 
> 标签：android, android-memory, hprof, eclipse-mat

我正在尝试以编程方式分析 hprof 文件。使用 android-sdk 中的 hprof-conv 工具，我生成了一堆 com.your.package.index 文件。

如何以编程方式解析这些 .index 文件？

我想在支配树上运行一些自定义分析，这很容易通过 MAT（Eclipse 的内存分析器）手动完成，但希望以自动化方式完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T05:54:14.757

您可以尝试从命令行使用 MAT 并生成自定义报告（支配树）。在此，您可以使用可用于生成报告的 XML 进行过滤，也可以通过外部代码解析报告。

参考： http: [//www.eclipse.org/forums/index.php/t/489594/](http://www.eclipse.org/forums/index.php/t/489594/)

上面的链接应指导您完成此任务...

# php - 比较两个数组以获得差异并（可能）在 PHP 中返回单个数组

> ID：15979850
> 
> 赞同：0
> 
> 时间：2013-04-12T19:57:07.707
> 
> 标签：php, arrays, compare, diff

我有一个 MYSQL 表来记录 Web 应用程序的状态日志更新。

有几个字段将被填充，但并不是所有字段都会一次更新。

我的计划是提取最后一个日志条目（如果存在），并将其与传入的新数据进行比较。如果新值中的任何内容为空白，它将继承先前设置的值。

我应该提到，这是为了允许查看更改并在更新日志时跟踪它们。

所以我想知道解决这个问题的最佳方法是什么。现在我的计划是提取我以前的值并循环通过将其与`$submittedData`数组进行比较（使用 if 语句）。当`$submittedData`具有与先前数据不同的值时，它将从 中获取值`$submittedData`。但是，如果 in 的`$submittedData`值为空，它将保留前一组中的值。

我知道 php 中有 4 个不同的 array_diff 函数，但不确定我是否应该使用它们，这是否对我有帮助，或者我是否过度思考。想法是编写一个函数，我可以将两个数组传递给它并让它返回一个具有相同结构（关联）的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:00:00.323

我很确定[array_merge](http://php.net/array_merge)可以解决您的所有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T20:13:15.450

您可以简单地*添加*数组（它也应该比 更快`array_merge()`）。所以基本上，如果你有`$previousData`，`$submittedData`你可以简单地做：

```
$finalData = $submittedData + $previousData; //It is *not* commutative 
```

`$previousData`第一个数组中不存在的所有值将与所有值合并到`$finalData`一起`$submittedData`。

# javascript - iFrame 中的 HTML 按钮在 iPad 上无法正常工作

> ID：15979853
> 
> 赞同：0
> 
> 时间：2013-04-12T19:57:15.107
> 
> 标签：javascript, html, ipad, iframe

我有一个 Web 应用程序，其中有一个带有 onclick javascript 操作的 div 元素。此 Web 应用程序在 iPad 和台式机上运行良好。

然而，当它在 iPad 上的 iFrame 中启动时，突然之间，我的点击/点击很少且不一致。在桌面浏览器上的 iFrame 中运行时，我看不到这种行为。

有没有人见过这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T03:19:29.327

我不确定您的确切情况，但是当我的按钮绑定了“mouseenter”事件触发器时，我遇到了类似的问题。鼠标输入将在第一次“点击”时调用，而按钮将在“第二次”时调用。因为 ipad 使用这两个事件的方式。

我的解决方案是使用[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)中的浏览器检测工具并将 var ismolible = 设置为 true 或 false，具体取决于浏览器是否为移动设备，然后我使用 if 语句立即取消绑定 mouseenter如果浏览器是移动的。您必须修改 ipad 的[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)代码。

希望这可以帮助！

# iphone - NSInternalInconsistencyException 原因：'-[__NSCFArray replaceObjectAtIndex:withObject:]：发送到不可变对象的变异方法'

> ID：15979862
> 
> 赞同：1
> 
> 时间：2013-04-12T19:58:02.563
> 
> 标签：iphone, ios

你能帮我解决以下错误吗：

由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[__NSCFArray replaceObjectAtIndex:withObject:]: mutating method sent to immutable object”

```
array_Info = [[NSMutableArray alloc] init];
array_Info = [dict_Temp objectForKey:@"Children"];

NSMutableArray *temp = [[NSMutableArray alloc] initWithArray:self.array_Info];

            int ran, arrayIndexing = 0;
            while ([temp count] != 0)
            {
                ran = arc4random();
                if(ran < 0)
                    ran*=-1;
                ran = ran % [temp count];

                if([temp count] == 1)
                    ran = 0;

                NSLog(@"%d  %d",arrayIndexing,ran);

                [self.array_Info replaceObjectAtIndex:arrayIndexing withObject:[temp objectAtIndex:ran]];

                [temp removeObjectAtIndex:ran];
                arrayIndexing++;
            } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T20:28:48.963

假设这`array_Info`是`self.array_Info`属性的支持变量，您应该将第二行更改为：

```
array_Info = [[dict_Temp objectForKey:@"Children"] mutableCopy]; 
```

这将为您提供`replaceObjectAtIndex:withObject:`调用所需的可变数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:59:47.597

这似乎`self.array_Info`是一个不可变的数组。使其可变。

# curl - 卷曲错误请求

> ID：15979866
> 
> 赞同：1
> 
> 时间：2013-04-12T19:58:16.007
> 
> 标签：curl, bad-request

[我在https://github.com/fazakis/transifex-javascript-client/blob/master/api](https://github.com/fazakis/transifex-javascript-client/blob/master/api)调查了 php-javascript transifex 客户端，这是一个很好的例子。我正在准备 java 客户端，但我总是收到关于 put 和 post 的错误请求

这个 GET 请求是完美的：

```
curl -i -L --user gccster:test -X GET http://www.transifex.com/api/2/project/demoproject1/resource/test/translation/el/string/bff3b5b0513a5e4821f649ffcca93069/ 
```

但是此 PUT 请求返回错误请求

```
curl -i -L --user gccster:test -X PUT -H "Content-Type: application/json" --data '{"translation": "nick"}' http://www.transifex.com/api/2/project/demoproject1/resource/test/translation/el/string/bff3b5b0513a5e4821f649ffcca93069/ 
```

可能是什么问题？

# css - 如何为 Font Awesome 添加悬停效果？

> ID：15979872
> 
> 赞同：7
> 
> 时间：2013-04-12T19:58:37.360
> 
> 标签：css, font-awesome

我有一些灰色的社交网站图标。当您将鼠标悬停在它们上方时，我希望它们更改为适当的颜色（facebook：蓝色，google+：红色等）。我玩过它，无济于事。这是代码：

```
 <li style="float:left;">
      <!-- start social bookmarks -->
      <div style="font-size: 32px; color: grey;">
      <i class="icon-facebook-sign" style="margin-left: 0px;"></i>
      <i class="icon-twitter-sign" style="margin-left: -12px;"></i>
      <i class="icon-linkedin-sign" style="margin-left: -12px;"></i>
      <i class="icon-google-plus-sign" style="margin-left: -12px;"></i>
      </div>
      <!-- end social bookmarks -->
    </li> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T20:12:40.773

您可以使用：

```
 .icon-facebook-sign:hover{color:lightblue;}
   .icon-twitter-sign:hover{color:yellow} 
```

[http://jsbin.com/opeyoy/1/](http://jsbin.com/opeyoy/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T20:02:42.507

你可以试试这样的

```
.icon-facebook-sign:hover
{
  background-color:blue;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-23T22:32:13.290

基于您已经拥有默认颜色的事实，您可以将这三个用于 facebook、google plus 和 twitter：

```
 .icon-facebook-sign:hover {
    color: rgba(59, 89, 152, .7);
  }

  .icon-twitter-sign:hover {
    color: rgba(0, 172, 237, .7);
  }

  .icon-google-plus-sign:hover {
    color: rgba(172, 0, 0, .7);
  } 
```

# java - 无法编译此命令（Java 和 Ant 相关）

> ID：15979878
> 
> 赞同：0
> 
> 时间：2013-04-12T19:58:53.073
> 
> 标签：java, ant

基本上，我正在按照我的练习步骤进行操作，但我似乎无法让这个命令正常运行。我试图改变一些东西，但它不起作用。这是我必须执行的示例：

```
C:\Users\Bill\My Documents\Antbook\ch04>javac -d build\test test\org\example\antbook\junit\SimpleTest.java 
```

这不能正常运行。我已经创建了这些文件，但它没有执行。

继承人，我得到的错误：

```
javac: not a directory: build\test
Usage: javac <options> <source files>
use -help for a list of possible options 
```

有什么建议么？我假设命令有问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:16:11.653

> javac：不是目录：build\test

听起来像 build\test 不存在。尝试先创建该目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:10:31.927

你的目录叫`test test`?
如果是这样，您的问题是两者之间的空间，您应该`"`为这种情况添加引号。
试试这个：

```
javac -d "build\test test\org\example\antbook\junit\SimpleTest.java" 
```

或者

```
javac -d build\"test test"\org\example\antbook\junit\SimpleTest.java 
```

只要目录名中的空格在`"`any 之间就可以了，你甚至可以使用这个: `TESTE~1`，而不是完整的目录名，但这太麻烦了>_<

# algorithm - R中的Hyper LogLog算法

> ID：15979882
> 
> 赞同：1
> 
> 时间：2013-04-12T19:59:12.500
> 
> 标签：algorithm, r

R中是否有hyper LogLog算法的实现？我找到了一个 javascript 实现： [LogLog 和 HyperLogLog 算法，用于计算大基数](https://stackoverflow.com/questions/5990713/loglog-algorithm-for-counting-of-large-cardinalities)

哪种方式更好地实现算法？例如，转换 javascript 实现会很好吗？还是我应该从头开始。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:05:05.990

我不知道已经存在的实现，尽管这绝对不意味着没有。关于自己编写代码，我不会从字面上将代码翻译成 javascript 代码。我在 R 中选择的风格非常不同（更多的应用循环和矢量化），可能代码会更短。

我不会从字面上翻译代码，而是用伪代码写下算法的步骤，然后从该伪代码实现 R 代码。这样，您可以更轻松地以真正的 R 风格编写解决方案，并且您有很好的机会准确了解算法的工作原理。

# excel - 使用 vba 将当前日期与“mmm-yy”格式的字符串日期进行比较

> ID：15979883
> 
> 赞同：0
> 
> 时间：2013-04-12T19:59:17.603
> 
> 标签：excel, vba

我的工作簿中有几张名为“user”、“52”和“Oct-13”等名称的工作表。我需要能够将当前日期与以日期命名的工作表进行比较，例如“Oct-13”。如果当前日期在工作表命名日期之后的任何时间，例如 Oct-13，那么我需要让 VBA 删除工作表。我知道这样做的唯一方法是从工作表名称和当前日期中提取月份和年份并进行比较。有没有更简单的方法？我一直无法找到更简单、更有效的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:02:18.490

```
Sub convertDates()
Dim strDate As String   'Formatted name of current sheet in loop
Dim deleteDate As Date  'The first day sheet is eligible for deletion
Dim currentDate As Date 'The current date as of the last time the Sub was ran
Dim sheet As Worksheet  'Used to loop through the sheets of the workbook

currentDate = DateSerial(Year(Now), Month(Now), Day(Now))

On Error GoTo InvalidDate

For Each sheet In ThisWorkbook.Worksheets
    If InStr(1, sheet.Name, "-", vbBinaryCompare) >= 4 Then
        strDate = Format(DateAdd("m", 1, sheet.Name), "yyyy,mmm")
        deleteDate = DateSerial(Year(strDate), Month(strDate), Day(strDate))
        If deleteDate <= currentDate Then
            Application.DisplayAlerts = False
            sheet.Delete
            Application.DisplayAlerts = True
        End If
    End If
NextSheet:

Next

Exit Sub
InvalidDate:
Err.Clear
'this worksheet's name cannot be interpreted as a date, so ignore and
' resume next
Resume NextSheet

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:13:34.873

这应该让你开始。我试图通过检查工作表名称是否包含“-”来考虑数字工作表名称（*可以*但*不应将其解释为日期。您可能需要对此进行一些改进。*

```
Sub convertDates()
Dim strDate As String
Dim myDate As Date
Dim testDate As Date

testDate = DateSerial(Year(Now), Month(Now), Day(Now))

On Error GoTo InvalidDate
myDate = DateSerial(Year(strDate), Month(strDate), Day(strDate))

'You could do:
 For w = Sheets.Count To w Step -1
    strDate = Sheets(w).Name
    If InStr(1, strDate, "-", vbBinaryCompare) >= 4 Then
        If myDate < testDate Then
            Application.DisplayAlerts = False
            Sheets(w).Delete
            Application.DisplayAlerts = True
        End If
    End If
NextSheet:

 Next

Exit Sub
InvalidDate:
Err.Clear
'this worksheet's name cannot be interpreted as a date, so ignore and
' resume next
Resume NextSheet

End Sub 
```

# java - Java libmodbus 本机库 unsatisfiedLinkError

> ID：15979885
> 
> 赞同：0
> 
> 时间：2013-04-12T19:59:24.033
> 
> 标签：java, linux, java-native-interface, modbus

嗨，当我执行我的项目 jar 时，我得到以下信息。

```
java -Djava.library.path=. -jar RDC.jar 

Exception in thread "main" java.lang.UnsatisfiedLinkError: com.enfragy.rdc.main.ModbusNativeReader.readInputRegisters(III)[I
        at com.enfragy.rdc.main.ModbusNativeReader.readInputRegisters(Native Method)
        at com.enfragy.rdc.main.ModbusReader.getInputRegisterValue(ModbusReader.java:14)
        at com.enfragy.rdc.main.RdcExecutor.main(RdcExecutor.java:70) 
```

该库在我的路径中。我也尝试过绝对路径，但没有任何安慰。但是当我运行一个具有相同共享库的小型测试程序时，它运行良好。但是当我将它包含在我的项目中时，它会产生异常。我不知道为什么它表现得很奇怪。

这是我的文件

JNI Java 类 ::

```
public class ModbusNativeReader {

    static {
        System.loadLibrary("adder");
    }
    // A native method that receives nothing and returns void

    public native int[] readInputRegisters(int slaveId, int registerAddr, int registerCount);
} 
```

C 代码的头文件

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class com_enfragy_rdc_main_ModbusNativeReader */

#ifndef _Included_com_enfragy_rdc_main_ModbusNativeReader
#define _Included_com_enfragy_rdc_main_ModbusNativeReader
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     com_enfragy_rdc_main_ModbusNativeReader
 * Method:    readInputRegisters
 * Signature: (III)[I
 */
JNIEXPORT jintArray JNICALL Java_com_enfragy_rdc_main_ModbusNativeReader_readInputRegisters
  (JNIEnv *, jobject, jint, jint, jint);

#ifdef __cplusplus
}
#endif
#endif 
```

本机 C 代码

```
JNIEXPORT jintArray JNICALL Java_com_enfragy_rdc_main_ModbusNativeReader_readInputRegisters
 (JNIEnv *env, jobject thisObj, jint slaveId, jint registerAddr, jint registerCount) 
{

jintArray result;
modbus_t *ctx;
uint16_t tab_reg[10];
int rc;
int i;

result = (*env)->NewIntArray(env, 2);
if (result == NULL) {
return NULL; /* out of memory error thrown */
}

...
...

(*env)->SetIntArrayRegion(env, result, 0, 2, pointer);
return result;
} 
```

我没有奇怪的行为。谁能指导我解决我的问题？

谢谢

# batch-file - 批处理脚本的Reg查询脚本

> ID：15979892
> 
> 赞同：2
> 
> 时间：2013-04-12T19:59:51.667
> 
> 标签：batch-file

我试过问这个，但我觉得有些混乱，所以我要试试这个新鲜的。这是代码：

```
set regVar=HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall
set excluded=Microsoft MDOP Dell 
set count=0
for /f "tokens=2,*" %%a in ('Reg Query %regVar% /S^|find " DisplayName" ^| findstr /v "%excluded%"') do (
    set /a count+=1
    setlocal EnableDelayedExpansion
    for %%n in (!count!) do (
        endlocal
        set product[%%n]=%%b
        echo  %%n.%tab%%%b
        echo  %%a
    )   
) 
```

这样做是遍历所有卸载注册表，然后将每个 DisplayName 键添加到名为 product[] 的数组中，然后将其在循环中的当前编号的结果打印到屏幕上以获取菜单。然后你可以做的是输入数字，它会返回该数组中的显示名称：

因此，就目前而言，它过滤掉了所有 microsoft、mdop 和 dell

我想要它做的是还查看那个 DisplayName 的键并返回另一个名为 UninstallString 的键，并将其分配给具有相同关联索引的数组 uninstallprod[]。我遇到的问题是我无法弄清楚如何使用 sql 中的语句进行查询

```
Select UninstallString from REGISTRY where DisplayName="Program name" 
```

程序名称是从您选择的 DisplayName 返回的字符串，或者有一个 SINGLE 查询，这将允许我像您在上面看到的那样过滤掉 DisplayNames，并在同一语句中包含 UninstallString 值。以任何其他方式尝试它的问题是我无法过滤并执行两个数组而没有它以完全错误的索引结束（它会跳过显示名称但仍然分配卸载字符串，因为它不允许我过滤两者）

**更新：**

在这一点上，我让它拉回了 DisplayName 和 Uninstall 字符串，但它没有正确推进计数器。在当前状态下，它分配了 2 个变量，用于分配和比较键是什么的键的名称 (%%a)，以及作为程序名称的键的值 (%%c)或稍后在脚本中用于卸载的卸载路径（字符串）。所以最终发生的事情是我最终得到了一个跳过的数字列表，因为即使没有显示名称被打印到列表中，计数器也在前进。这是我现在正在使用的代码。

```
@echo off
set tab=    
set regVar=HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall
set excluded=Microsoft MDOP Dell 
set count=1
for /f "tokens=1,2,*" %%a in ('Reg Query %regVar% /S^|findstr "DisplayName UninstallString" ^| findstr /v "%excluded%"') do (
    setlocal EnableDelayedExpansion
    for %%n in (!count!) do (
        endlocal
        if "%%a"=="DisplayName" set product[%%n]=%%c&echo %%n.%tab%%%c
        if "%%a"=="UninstallString" if defined product[%%n] set uninstall[%%n]==%%c&set/a count+=1
    )
) 
```

举个例子，我的列表中有 Sublime Text 2.0.1 和 64 位 HP CIO Components Installer。最终发生的是我得到一个这样的列表：

```
1\.  Sublime Text 2.0.1
3\.  64 bit HP CIO Components Installer 
```

因此，由于某种原因，即使没有定义产品 [2]，计数器也会超过 2。在 32 位版本中，我显示了 5 个条目，其中一个是空白的，打印如下：

```
1\.  Adobe Flash Player 11 ActiveX
2\.  Google Chrome
3\.  TeamViewer 8
4\.  
4\.  Google Update Helper. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:03:23.733

你需要让“UninstallString”和“Displayname”都通过初始门，所以改变

for /f "tokens=2,*" %%a in ('Reg Query %regVar% /S^|find " DisplayName" "...

至

for /f "tokens=1,2,*" %%a in ('Reg Query %regVar% /S^|FINDSTR "Displayname UninstallString"...

这将设置`%%a`为`Displayname`或`UninstallString`和`%%c`所需的数据值。

那么你必须处理序列

显示名称 x
显示名称 y
卸载 y

或者

显示名称 y
卸载 y
卸载 z

这实际上并不是特别难。

您已经在设置 ​​Product[n] - 您需要为每个`%%a`==Displayname 执行此操作。对 Uninstall[n] 重复 - 仅在定义 Product[n] 时对每个`%%a`==UninstallString 执行此操作。

```
IF "%%a"=="UninstallString" if defined Product[%%n] set uninstall[%%n]=%%c&set/a count+=1 
```

在 SETLOCAL 之前取出计数增量，因为只有当您有一对匹配的 PRODUCT 和 UNINSTALL 时才需要这样做；将初始值更改为 1（除非您喜欢从零开始计数）

并祈祷你没有得到一个序列

显示名称 y
卸载 z

现在，如果你确实得到了这个序列，只需找到一个方便的字符串来让通过门 - 比如，也许是“HKEY_”，如果`%%a`开始“HKEY_”然后`set "Product[%%n]="`清除任何没有卸载字符串出现的显示名称。

你甚至可能想稍微改变一下。

如果你设置

*   针对第一个显示名称的产品
*   根据第一个卸载字符串卸载（即仅`if not defined unistall[%%n]`）
*   当 HKEY_ 出现时，如果 product[%%n] 和 uninstall[%%n] 都定义了，则递增计数器，否则将 product[%%n] 和 uninstall[%%n] 设置为 [nothing]

那么卸载和显示名称的顺序不相关，尽管您需要在循环后重复 HKEY_ 测试以处理最后一个实例......

* * *

解决部分问题的附录

```
@ECHO OFF
setlocal
set regVar=HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall
set excluded=/c:" Microsoft" /c:"MDOP" /c:"Dell" 
set count=1
for /f "tokens=1,2,*" %%a in ('Reg Query %regVar% /S^|findstr "DisplayName HKEY_ UninstallString" ^| findstr /v %excluded%') do (
    setlocal EnableDelayedExpansion
    for %%n in (!count!) do (
        ENDLOCAL
        SET HKEY=Y
        IF "%%a"=="DisplayName" SET "HKEY="&set product[%%n]=%%c
        IF "%%a"=="UninstallString" SET "HKEY="&IF NOT DEFINED uninstall[%%n] set uninstall[%%n]=%%c
        IF "%%a"=="QuietUninstallString" SET "HKEY="&IF NOT DEFINED uninstall[%%n] set uninstall[%%n]=%%c
    IF DEFINED hkey IF DEFINED product[%%n] IF defined uninstall[%%n] SET /a count+=1&SET "hkey="
    IF DEFINED hkey set "product[%%n]="&SET "uninstall[%%n]="
    )   
)

::
:: Last entry may not be complete
::
IF NOT DEFINED product[%count%] SET "uninstall[%count%]="&SET /a count-=1
IF NOT DEFINED uninstall[%count%] SET "product[%count%]="&SET /a count-=1

ECHO %count% entries found
SET prod
SET unins 
```

请注意，既然`HKEY`现在允许通过门，但测试起来很痛苦`line beginning HKEY`，如果它不是字符串“Displayname”、“UninstallString”或“QuietUninstallString”之一，那么它被假定为 HKEY。`IF DEFINED`适用于允许更容易 - er，koff - 编程的变量的 RUN-TIME 存在/不存在。

* * *

显示来自“数组”的数据

```
FOR /l %%i IN (1,1,%count%) DO (
CALL ECHO %%i. %%product[%%i]%%
) 
```

* * *

附加数据 20130419-1756Z

```
@echo OFF
setlocal
set tab=    
set regVar=HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall
set excluded=Microsoft MDOP Dell 
FOR /f "delims=" %%i IN ('Reg Query %regVar% /S^|find "HKEY_"') DO (
 FOR %%s IN (dn us qu pu dn ut) DO SET "%%s="
 FOR /f "tokens=1,2,*delims= " %%s IN ('Reg Query "%%i" /S') DO (
  if /i "%%s"=="Displayname" SET /a dn+=1&SET dn=%%u
  if /i "%%s"=="Uninstallstring" SET /a us+=1&SET ut=%%u
  if /i "%%s"=="quietUninstallstring" SET /a qu+=1
  if /i "%%s"=="publisher" SET pu=%%u
 )
 FOR %%s IN (dn us qu) DO SET /a %%s+=0
 CALL :report
)

GOTO :eof

:report
SET /a tus=us+qu
ECHO %dn%   %us%   %qu%   %tus%   %pu% %dn% %ut%
GOTO :eof 
```

这个过程应该显示有趣的细节。

报告栏是

1.  找到的“显示名称”数
2.  找到的“卸载字符串”的数量
3.  找到的 'quiteuninstallstring' 的数量
4.  总共前 2 列
5.  发布者字符串 - 如果找到
6.  显示名称 - 如果找到
7.  卸载文本 - 如果找到

我建议您使用这些数据进行过滤和分配给您的数组 - 内部循环正在处理单个卸载项。选择所需的部分并将它们添加或不添加到您的阵列中。

# sql-server - 当另一列递减时，sql server 触发器增加一列

> ID：15979893
> 
> 赞同：-2
> 
> 时间：2013-04-12T19:59:52.217
> 
> 标签：sql-server, database, triggers

我有一个包含 id、title、inventory 列的电影表，我添加了一个列 rent_count。我在网上找到了在更新行后增加rental_count的解决方案，但是只有在库存减少时（当有人租用东西时）才能增加租用计数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:07:59.177

```
 Create trigger trigUpdateRentalCount 
   On Movies for Update 
   As
         if Exists( Select * from inserted I
                       Join deleted d
                            On d.pk = i.pk
                    Where i.inventory = d.inventory - 1)

            Update m Set rental_count += 1
            From Movies m 
               join (inserted i Join deleted d 
                        on i.pk = d.Pk
                           and i.inventory = d.inventory - 1)
                  on i.PK = m.PK 
```

编辑解释触发器。在任何触发器中，用户都可以访问由导致触发器触发的 sql 语句删除或更新（使用旧值）的行集。可以使用关键字访问该集合`deleted`。

它还可以使用关键字访问所有正在插入或更新的行（使用新的更新值）`inserted`。

因此，如果已删除表中存在与插入表中的行匹配的任何行，其中库存的新插入值比旧值小一，那么，对于每个这样的行，您要更新（增量）`rental_count`场地。

触发器依赖于 If Exists 语句来确定插入和删除中是否存在任何此类行。然后，如果有的话，它会增加`rental_count`Movies 表中匹配行中的值。

# performance - AS3 单独函数文件和静态方法之间的性能差异

> ID：15979898
> 
> 赞同：1
> 
> 时间：2013-04-12T20:00:04.183
> 
> 标签：performance, actionscript-3

任何人都可以告诉我使用函数文件与静态方法之间的性能差异。

即：myFunction.as - 只是一个包含一个函数“myFunction()”的 as 文件，然后您将导入该文件并调用 myFunction(); 或者 Utils.as 有一个静态方法： public static function myFunction(){} 然后你会导入这个类和我们 Utils.myFunction();

前者是否遭受与静态类相同的包查找命中？

我的猜测是，如果我的静态类有更多方法并且我只使用 1 种方法，它只会更轻，因为它仍然会导入整个类。

# node.js - IIS、Node.js 和带有 IISNode 的 Web 应用程序未使用虚拟目录正确配置

> ID：15979904
> 
> 赞同：17
> 
> 时间：2013-04-12T20:00:27.680
> 
> 标签：node.js, iis, express, iisnode

我在 IIS 中有以下设置：

*   默认网站 (www.foo.com) 托管标准 html 网站
*   运行 IIS 节点的默认网站 (www.foo.com/bar) 下的 Web 应用程序
*   Node 项目正在使用 express

我一辈子都无法正确配置这个东西，所以当我点击 Web 应用程序时，它会正确地提供节点应用程序。我认为我的问题在于 web.config。任何人都可以帮我编写一个正确的 web.config 以使其正常工作吗？我的配置的当前版本将为我提供一个节点响应，该响应说它无法在我输入的任何 url 处获取资源。

这是我的配置的当前版本：

```
<configuration>
  <system.webServer>    
    <handlers>
      <add name="iisnode" path="app.js" verb="*" modules="iisnode" />
    </handlers>    
    <rewrite>
      <rules>
        <rule name="bar">
          <match url="bar/*" />
          <action type="Rewrite" url="app.js" />
        </rule>
      </rules>
    </rewrite>    
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-07-17T18:17:17.827

不久前我在虚拟目录中运行我的应用程序时遇到了同样的问题。

经过大量时间的浪费和挣扎，我能够将所有部分放在一起，让我的应用程序在虚拟目录中运行，其中包括使用 Socket.io 的应用程序

由于没有太多关于这个特定场景的文档和可用的资源，我发现，只部分描述了如何解决这个问题。这是有关如何使所有这些工作的教程。我个人有多个使用此设置实现 REST API 或 Socket.io 的 Node.js Web 服务。

**我强烈建议使用下面的 Web.config 模板来完成这项工作。**

## IISNode Web.config 模板

[https://gist.github.com/pbaio/f63918181d8d7f8ee1d2](https://gist.github.com/pbaio/f63918181d8d7f8ee1d2)

上面链接中的配置有一些我放在那里的注释以帮助易用性。它配置为使用 app.js 作为主文件，但如果您的文件命名不同，只需切换值以使用该文件。

**要使此配置正常工作，如果您尚未安装它，您将需要[用于 IIS 的 URL 重写模块。](http://www.iis.net/downloads/microsoft/url-rewrite)**

## 默认设置

默认情况下，此模板设置为在 IIS 中运行的标准 Web 应用程序中工作，而不是在虚拟目录环境中。但是，通过一些小的调整，您可以使用相同的 Web.config 在虚拟目录中运行 Node.js 应用程序。

## 获取 Express 以使用您的虚拟目录

IISNode 在您的`<appSettings>`环境变量中声明所有键。我们可以利用它来设置我们的虚拟目录路径并将其公开给我们的主文件。在上面的模板中，我们的主文件是`app.js`.

### 获取我们的虚拟目录路径

我们需要在我们的 Web.config 文件中获取我们的应用程序将从中路由的路径。我们通过访问进程对象上的环境变量来做到这一点。将以下行添加到我们的`app.js`文件中。

```
var virtualDirPath = process.env.virtualDirPath || ''; 
```

这会从我们的 Web.config 中检索我们的 virtualDirPath，并给它一个空字符串的默认值。

### 路由页面

然后我们可以将 virtualDirPath 添加到我们的路由中，如果您使用的是 Jade 或 EJS 等视图引擎，我们可以将我们的虚拟目录路径传递给视图：

```
var app = require('express')();
app.get(virtualDirPath + '/', function(req, res) {
  res.render('index', { virtualDirPath: virtualDirPath });
}); 
```

### 静态内容

我们可以很容易地提供如下服务：

```
app.use(express.static(path.join(virtualDirPath, 'public'))); 
```

如果您使用的是 Bower.io，同样的事情：

```
app.use('/bower_components', express.static(path.join(virtualDirPath,'bower_components'))); 
```

## 使用 Express 和 Socket.io 的虚拟目录

在 Socket.io 中使用虚拟目录时，我们需要更改服务器和客户端的配置。

### 服务器端

我们需要配置我们的 Socket.io 服务器，这与您通常的做法略有不同。

```
var app = require('express')();

var virtualDirPath = process.env.virtualDirPath || '';

var server = require('http').Server(app);
var io = require('socket.io')(server, { path: virtualDirPath + '/socket.io' });
// Get the port that we should be listening on
server.listen(process.env.PORT || 8080); 
```

在上面的代码中，我们正在修改我们的 Socket.io 服务器以在我们的 virtualDirpath 上运行，而不是默认路径（`'/socket.io'`是默认路径）。

Web.config 更改

为了让 IISNode 与 socket.io 正常工作，我们还需要添加一些额外的 url 重写并换出我们的处理程序。在上面的模板配置文件中，我们可以在第 57 行看到 Socket.io 处理程序，它在模板中被注释掉了。

```
<add name="iisnode-socket.io" path="app.js" verb="*" modules="iisnode" /> 
```

然后我们需要为 Socket.io 路径添加我们的 url 重写

```
<rule name="SocketIO" patternSyntax="ECMAScript">
    <match url="socket.io.+" />
    <action type="Rewrite" url="app.js"/>
</rule> 
```

### 客户端

在客户端，我们只需要指定 Socket.io 服务器正在侦听的路径，而不是其默认路径。

```
var socket = io.connect('http://example.com:port', { path: '/virtualDirPath/socket.io' }); 
```

此时一切都应该很好，您的 Socket.io 应用程序在带有 IISNode 的虚拟目录中运行。

## 环境信息

使用此配置的应用程序是使用 Node.js、Express 4.12.3 构建的，并在安装了 IISNode 的 IIS 7.5 中运行。此外，通过更改配置文件中的处理程序，Socket.io 也可以在虚拟目录中使用。上例中使用的 Socket.io 版本是 1.3.5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-20T14:17:00.977

我遇到了[同样的问题](https://github.com/tjanczuk/iisnode/issues/354)。

最终，起作用的是在我的应用程序中修复请求 url。我们已经从使用 express 切换到 hapi，所以我已经将这段代码从 hapi 转换回 express，而无需先对其进行测试，但它应该能让你大致了解。

```
app.use(function (req, res, next) {
    if(!settings.serverPath) return next();

    console.log(req.url);
    var regex = new RegExp('(' + settings.serverPath + ')(/.+)', "i");
    req.url = req.url.replace(regex, "$2");
    console.log(req.url);
    return reply.continue();
});

//set up your routes here... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-02T17:34:16.787

对于那些无法提供静态文件的人，请务必在进行 ng build 之前将您的基本 href url 更改为虚拟目录路径，然后从服务器提供您的静态文件。希望这对某人有所帮助。

# c# - DataGridView.IsCurrentRowDirty() 未使用可编辑的 DataGridViewComboBoxColumn 设置

> ID：15979905
> 
> 赞同：2
> 
> 时间：2013-04-12T20:00:29.467
> 
> 标签：c#, winforms, datagridview

我有一个`DataGridView`与 a`DataGridViewComboBoxColumn`绑定的 a `List<IBrand>`。在此组合框列中，我允许用户选择现有值或键入新值。当用户选择现有值时，`IsCurrentRowDirty()`正确返回 true。当用户输入一个值时，`IsCurrentRowDirty()`当它显然应该返回 true 时，总是返回 false。

我已经尝试`DataGridView.CommitEdit()`在`CurrentCellDirtyStateChanged`事件中调用，但这不起作用

如何让用户在 a 中输入值`DataGridViewComboBoxColumn`以将行设置为脏？

相关代码如下。

谢谢，

凯尔

```
 public void BindBrands()
        {
            DataGridViewComboBoxColumn comboBox = (DataGridViewComboBoxColumn)dgvReference.Columns[(int)ReferenceColumnsIndex.Brand];

            comboBox.DisplayMember = "Name";
            comboBox.ValueMember = "Self"; //"Self" returns "this"
            comboBox.DataSource = brands;
        }

            //This enables the DataGridViewComboBoxColumn to be editable by the user
            private void dgvReference_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
            {
                DataGridViewComboBoxColumn column = GetColumn<DataGridViewComboBoxColumn>(dgvReference,

                (int) ReferenceColumnsIndex.Brand);

            if (column != null)
            {
                ComboBox comboBox = e.Control as ComboBox;
                if (comboBox != null)
                {
                    comboBox.DropDownStyle = ComboBoxStyle.DropDown;
                }
            }
        }

        private void dgvReference_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
        {
            switch (e.ColumnIndex)
            {
                case (int)ReferenceColumnsIndex.Brand:

                    DataGridViewComboBoxColumn comboBox = dgvReference.Columns[(int)ReferenceColumnsIndex.Brand] as DataGridViewComboBoxColumn;
                    if (e.ColumnIndex == comboBox.DisplayIndex)
                    {
                        IBrand brand = new Brand(e.FormattedValue.ToString());
                        if (!brands.Contains(brand))
                        {
                            //If the brand does not exist, add it to the datasource of the combobox
                            brands.Add(brand);
                            dgvReference.NotifyCurrentCellDirty(true); //<== THIS LINE FIXES THE ISSUE

                        }

                        //When setting the .Value to brand here, IsCurrentRowDirty() does not return true
                        dgvReference.Rows[e.RowIndex].Cells[(int)ReferenceColumnsIndex.Brand].Value = brand;
                    }

                    break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:09:19.610

好的，我想出了如何强制`IsCurrentRowDirty()`方法返回`true`。我需要添加以下代码行，如我的示例所示：

```
dgvReference.NotifyCurrentCellDirty(true); 
```

对新输入的品牌调用此方法将强制该行为方法返回 true `IsCurrentRowDirty()`。

# session - 让 Windows Azure 共享缓存与 ReportViewer 一起使用

> ID：15979909
> 
> 赞同：1
> 
> 时间：2013-04-12T20:00:54.320
> 
> 标签：session, azure, reportviewer, session-state, report-viewer2010

[Azure 的共享缓存会话提供程序使用](http://msdn.microsoft.com/en-us/library/windowsazure/gg278339.aspx)[Microsoft.Reporting.WebForms.SyncList](http://social.msdn.microsoft.com/Forums/en-US/appfabricctp/thread/6ffe2f0a-c482-4514-9cf1-14685f0ecd3a/)提供间歇性 System.Runtime.Serialization.InvalidDataContractException 会话错误，并使用我们对报告进行本地处理的序列化报告查看器。

Microsoft 似乎拥有的唯一解决方案是必须在每次启动 webrole 期间安装一个[修补程序。](http://msdn.microsoft.com/en-us/library/windowsazure/hh825825.aspx)似乎是其他人会使用的通用控件。有没有其他人找到更好的解决方案，仍然使用共享缓存来管理会话？

REPORT VIEWER 2012 有没有人尝试在 Windows azure 中使用带有 azure 共享缓存的 ReportViewer 2012？他们在[来自 Microsoft 的这封电子邮件中](http://social.msdn.microsoft.com/Forums/en-US/appfabricctp/thread/6ffe2f0a-c482-4514-9cf1-14685f0ecd3a/)声称，缺少默认无参数构造函数的问题将在 ReportViewer 2010 之后的版本中得到修复。在我完成试用过程之前，我想知道其他人是否有开箱即用的使用 Azure 的共享缓存会话提供程序时 ReportViewer 2012 的成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:01:23.367

是的，我升级到了 2012 版的报表查看器，不再需要热修复。作为附加提示，请确保安装最新版本的报表查看器，并且 2012 附带的版本不会在带外更新。要获得最新版本，您可以[下载可再发行包](http://www.microsoft.com/en-nz/download/details.aspx?id=35747)。

# sharepoint - 如何用共享点中的静态菜单替换快速启动菜单

> ID：15979914
> 
> 赞同：0
> 
> 时间：2013-04-12T20:01:23.330
> 
> 标签：sharepoint, sharepoint-2010

我想删除快速启动菜单和

想把我的asp菜单控件如下。

```
 <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                <Items>
                    <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/>
                    <asp:MenuItem Text="Invoices" NavigateUrl="#">
                    <asp:MenuItem Text="Add New" NavigateUrl="~/CP/AddInvoice.aspx"></asp:MenuItem>
                    <asp:MenuItem Text="View All" NavigateUrl="~/CP/ViewAllInvoice.aspx"></asp:MenuItem>
                    </asp:MenuItem>
                    <asp:MenuItem Text="Manage">
                    <asp:MenuItem Text="Users">
                    <asp:MenuItem Text="Create User" NavigateUrl="~/Account/Register.aspx"></asp:MenuItem>
                    <asp:MenuItem Text="Manage User" NavigateUrl="~/CP/ManageUser.aspx"></asp:MenuItem>
                    </asp:MenuItem>
                    <asp:MenuItem Text="City" NavigateUrl="~/CP/City.aspx"></asp:MenuItem>
                    <asp:MenuItem Text="Customers">
                    <asp:MenuItem Text="Add Customer" NavigateUrl="~/CP/Customer.aspx"></asp:MenuItem>
                    <asp:MenuItem Text="Manage Customer" NavigateUrl="~/CP/ManageCustomer.aspx"></asp:MenuItem>
                    </asp:MenuItem>
                    <asp:MenuItem Text="Products" NavigateUrl="~/CP/Products.aspx"></asp:MenuItem>
                    </asp:MenuItem> 
                    <asp:MenuItem Text="Reports">
                    <asp:MenuItem Text="Daily/Monthly Sales" NavigateUrl="~/Reports/DailyMonthly.aspx"></asp:MenuItem>
                    <asp:MenuItem Text="Monthly Average Report" NavigateUrl="~/Reports/MonthlyAverageWithChart.aspx"></asp:MenuItem>
                    <asp:MenuItem Text="Agent wise Sales Report" NavigateUrl="~/Reports/AgentWise.aspx"></asp:MenuItem>
                    </asp:MenuItem>
                </Items>
            </asp:Menu> 
```

我该怎么做，请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:06:56.910

你不能只删除快速导航链接并用你的链接替换它们吗？转到站点操作>站点设置，然后在外观下转到导航，您可以在那里删除当前的快速链接并用您的链接替换它们。我认为这比编辑母版页更容易（更少的担忧和更少的错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:43:20.230

这可以通过[编辑您的母版页来完成](http://office.microsoft.com/en-us/sharepoint-designer-help/customize-a-master-page-to-brand-your-site-HA102449505.aspx)

`#s4-leftpanel`用您的自定义控件替换内容，如果您需要为控件添加任何引用，请将它们添加到[控件代码上方](https://sharepoint.stackexchange.com/questions/58749/sp2013-adding-a-custom-usercontrol-to-masterpage-using-design-manager)

# c# - 如何转换嵌套列表 to nested object[] array in C# How do I build a single function with which I can convert a nested List to a nested object[] array effectively? p.s. the depth of the nested List varies. for example: < 问问题 问问题 2013-04-12T20:01:34.830 1305 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. How do I build a single function with which I can convert a nested List to a nested object[] array effectively? p.s. the depth of the nested List varies. for example: public class ProductBindingViewSC { public int ProductID { get; set; } public string aName { get; set; } public List<Product_SuperType_Info> SuperTypeList { get; set; } public List<Product_Image_Info> Product_ImageList { get; set; } public List<Product_Property_BindingViewSC> Property1 { get; set; } } Property1 has structure like ProductBindingViewSC ( it has fields and List) I need to do the following with only a few lines List<ProductBindingViewSC> productList = new GetProductObject().getProductBySomeCondition( 123 ); var productArray = SomeFunction(productList ); or ProductBindingViewSC product = new GetProductObject().getProductById( 345 ); var product = SomeFunction(product ); ProductArray has the exact same structure as ProductBindingViewSC but all the List Type are Array Type instead. And if one of the object in List is empty, the array class will have one record of empty object in the Array . EDIT: Question : how should I write the SomeFunction. I can only think of looping with very ineffecient way and mine is not generic. I need a function which I can throw in any object type. productList.ToArray(); What is wrong with List, btw? c#arrayslistnested-class 4 2 回答 2 This answer is useful 0 Personnally, I'd just manually write a function that converts a ProductBindingViewSC into a ProductArray member by member, and then use List.ToArray()+Array.ConvertAll() or Linq's .Select().ToArray(). You could also use reflection, even make that not too slow thanks to open property delegates and generic type instantiation (in short, anything to avoid a sluggish GetValue()), to automatically convert from one type to the other, but that's quite a long story to explain. It involves first writing a generic interface ICopyMember<TIn, TOut> to expose a copy method but not the type of the members. Then implement this interface in a generic class PropertyCopier<Tin, TOut, TPropIn, TPropOut> that copies a member using open property delegates and probably later a recursive call to the mass-copy function. The next step would be dynamically instantiating these generic types using reflection. For a simple pair of classes TIn and TOut, you should obtain a collection of ICopyMember<TIn, TOut>, one for each property. With this, you should be able to copy all properties from one object to the next. Just write a function that does this in a loop. Keep in mind that caching these property copiers and collections thereof would probably be a good idea. Keep them in a collection using the Type of the source and destination objects as key (or just that of the source object, if it's always copied to the same destination class). 于 2013-04-12T20:32:56.220 回答 This answer is useful -1 productList.ToArray(); 顺便说一句，List 有什么问题？ 于 2013-04-12T20:04:05.217 回答 Related 4 javascript - jQuery 中的 $.post 语法 0 msbuild - 带变量的 Msbuild 任务 1 java - 计算时间戳之间的年、月、日差异 1 php - php：无法获得带有 readfile 的 Excel 的下载提示 1 silverlight - Hotmail 中邮件正文的富文本编辑器在首先输入主题和收件人时冻结 2 javascript - 在运行函数之前确保我的循环完全完成？ 1 uitextfield - 无法通过 theos 挂钩 UITextfield 类 2 javascript - 图片说明无法正常工作 2 javascript - 如何使用 jQuery 或 JavaScript 打印不断变化的 div 3 sql - SUBSTRING 和 SUBSTR 函数 (SQL) 有什么区别？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15979917
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, arrays, list, nested-class

How do I build a single function with which I can convert a nested List to a nested object[] array effectively?

p.s. the depth of the nested List varies.

for example:

```
public class ProductBindingViewSC
{
    public int ProductID { get; set; }
    public string aName { get; set; }
    public List<Product_SuperType_Info> SuperTypeList { get; set; }
    public List<Product_Image_Info> Product_ImageList { get; set; }
    public List<Product_Property_BindingViewSC> Property1 { get; set; }

} 
```

Property1 has structure like ProductBindingViewSC ( it has fields and List)

I need to do the following with only a few lines

```
List<ProductBindingViewSC> productList =  new GetProductObject().getProductBySomeCondition( 123 );
var productArray = SomeFunction(productList ); 
```

or

```
ProductBindingViewSC product =  new GetProductObject().getProductById( 345 );
var product = SomeFunction(product ); 
```

**ProductArray** has the exact same structure as **ProductBindingViewSC** but all the **List** Type are **Array** Type instead. And if one of the object in **List** is empty, the array class will have one record of empty object in the **Array** .

EDIT: Question : how should I write the **SomeFunction**. I can only think of looping with very ineffecient way and mine is not generic. I need a function which I can throw in any object type.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:32:56.220

Personnally, I'd just manually write a function that converts a ProductBindingViewSC into a ProductArray member by member, and then use List.ToArray()+Array.ConvertAll() or Linq's .Select().ToArray().

You could also use reflection, even make that not *too* slow thanks to open property delegates and generic type instantiation (in short, *anything* to avoid a sluggish GetValue()), to automatically convert from one type to the other, but that's quite a long story to explain.

*   It involves first writing a generic interface `ICopyMember<TIn, TOut>` to expose a copy method but not the type of the members. Then implement this interface in a generic class `PropertyCopier<Tin, TOut, TPropIn, TPropOut>` that copies a member using open property delegates and probably later a recursive call to the mass-copy function.
*   The next step would be dynamically instantiating these generic types using reflection. For a simple pair of classes `TIn` and `TOut`, you should obtain a collection of `ICopyMember<TIn, TOut>`, one for each property.
*   With this, you should be able to copy all properties from one object to the next. Just write a function that does this in a loop. Keep in mind that caching these property copiers and collections thereof would probably be a good idea. Keep them in a collection using the `Type` of the source and destination objects as key (or just that of the source object, if it's always copied to the same destination class).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T20:04:05.217

```
productList.ToArray(); 
```

顺便说一句，List 有什么问题？

# ios - 2013年如何申请iOS开发证书？

> ID：15979924
> 
> 赞同：5
> 
> 时间：2013-04-12T20:02:08.310
> 
> 标签：ios, xcode

过去，我们使用 Keychain Access 创建一个 CSR 文件，然后通过 Apple Dev 网站上传该文件。现在有了最新的 Xcode (4.6.1)，我们似乎应该能够通过 Xcode 本身来请求它。我在任何地方都看不到那个选项！组织者中有一个“刷新”按钮，但即使我的证书无效，它也不会为我请求证书。

有小费吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T14:46:08.353

我遇到过同样的问题。这不是很清楚，但您需要先删除过期的证书。

*   点击进入证书/开发。
*   单击过期的证书并将其吊销。（这将允许您创建一个新的。）
*   单击加号图标并选择 iOS 应用程序开发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T09:32:42.877

您需要先删除所有过期的证书，然后才能申请新证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T07:04:25.933

现在 iOS App Development 选项变灰了，不知道为什么。

即使我遇到这种情况，我也使用以下步骤解决了它（启用它）。

1.  从证书/开发中删除过期的开发证书。

2.  吊销未使用的开发证书。

3.  现在单击 + 按钮，您可以自由选择

4.  iOS 应用程序开发选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T20:35:52.407

我的开发配置文件过期了，而 iOS 开发订阅仍然有效，所以我遇到了同样的问题。谢谢大家！

在玩了一段时间的证书/配置文件/等之后，这对我有用：

*   如此处所述，在线删除了旧的过期证书
*   生成了一个新的开发证书请求，如此处所述
*   我也有多次 XCode“刷新证书”崩溃。
    *   将 XCode 从 4.6.1 更新到刚刚发布的 4.6.2，仍然崩溃。
*   从开发网站手动下载列为“活动（由XCode管理）”的“Provisioning Profile/Development”并双击它，然后才将其添加到XCode OK。看来您可能必须手动执行此操作，XCode Refresh 按钮不会自动执行此操作？
*   最后，为了解决编译（针对 iOS 设备）错误“身份‘iPhone 开发者’与钥匙串中任何有效的、未过期的证书/私钥对不匹配”，我需要更改“项目设置-目标- Code Signing Identity" 到我当前的身份，如[Code Sign error: The identity 'iPhone Developer' doesn't match any valid certificate/private key pair in the default keychain 中所述](https://stackoverflow.com/questions/2108503)。然后签约成功。

对于其他 Google 搜索者的好处，我收到的错误消息是“您的团队没有当前的 iOS 开发证书......请稍等并刷新”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T20:07:00.553

您仍然可以使用钥匙串创建 CSR，然后将其上传到新的供应门户。前几天刚做的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T20:10:33.827

我不认为你的理解是正确的。我已经“手动”生成了我的 CSR，然后在上传到门户网站后通过 XCode 下载了其余部分。

我知道 XCode 功能对团队很有用，因为您有一个团队供应配置文件和一个用户证书。多 Mac 开发也可能是这种情况（例如，当我在 MBA 或 iMac 上时，这需要将私钥从一个钥匙串导入到另一个）。

编辑：我很乐意提供更多帮助，但是在运行“刷新”时，XCode 崩溃了:-)

```
UNCAUGHT EXCEPTION (NSInvalidArgumentException): *** setObjectForKey: object cannot be nil (key: teamId)
UserInfo: (null)
Hints: None
Backtrace:
  0  0x00007fff89ffcaee __exceptionPreprocess (in CoreFoundation)
  1  0x00007fff8b3de3f0 objc_exception_throw (in libobjc.A.dylib)
  2  0x00007fff8a08b5b7 -[__NSDictionaryM setObject:forKey:] (in CoreFoundation)
  3  0x000000010acffd88 +[DTDKTeamBasedService _createRequestDictionaryForTeam:andPlatform:] (in DTDeviceKit) 
```

奇怪的是，XCode 似乎试图将 TeamId 设置为 null ：/

# c# - 使用 HttpContext.Current (C#) 访问 Global.asax.cs 中的公共静态变量时出现问题

> ID：15979926
> 
> 赞同：3
> 
> 时间：2013-04-12T20:02:16.983
> 
> 标签：c#, static, global-asax

在一个 Web 项目中，我在 global.asax.cs 中定义了一个公共静态变量 (Store)，它需要在整个应用程序中都可以访问。

```
public class Global : HttpApplication
{
    public static UserDataStore Store;

    void Application_Start(object sender, EventArgs e)
    {
        Store = new UserDataStore();
        Store.CurrentUsers = new Hashtable();
    }

    void Session_Start(object sender, EventArgs e)
    {
        if (!Store.UserExists(HttpContext.Current.Session.SessionID))
            Store.AddUser(HttpContext.Current.Session.SessionID, "StubUser");
    }
} 
```

我需要在另一个无法引用 Web 项目（并且它是全局对象）的项目中访问它，因为它会导致循环引用。

我的解决方法是尝试使用 HttpApplication 对象检索 Store：

```
UserDataStore udStore = (UserDataStore) HttpContext.Current.Application["Store"]; 
```

这会编译，但会返回一个空对象。

我已经对谷歌视而不见，试图找到其他类似的例子，但我发现的大部分内容都支持以下两种方法之一：

1.  根据这篇文章，使用 Application[""] 变量，这是次优的，旨在用于经典 ASP 兼容性：http: [//support.microsoft.com/kb/312607](http://support.microsoft.com/kb/312607)
2.  通过 Web 项目的 Global 类访问它，这在我们当前的设置中不是一个选项。

这似乎应该是可能的，所以希望我错过了一些愚蠢的东西。

您能提供的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:05:17.957

使用共享数据创建第三个（库）项目，并从其他两个项目中引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T20:20:33.957

Application[""] 应该与 HttpContext.Current.Application 相同。你记得添加那个值吗？您可以从 Application_Start 调用其中任何一个。

```
Application["Store"] = Store 
```

或者

```
HttpContext.Current.Application["Store"] = Store 
```

# java - 跳棋的 MinMax AI

> ID：15979928
> 
> 赞同：0
> 
> 时间：2013-04-12T20:02:30.437
> 
> 标签：java, artificial-intelligence, minimax

我用 minmax AI 用 Ja​​va 创建了简单的 Checkers 游戏，但我不工作。我使用 minmax 的递归版本，但它一定有问题，因为它返回的移动不是最好的，但可能是第一次生成的。

```
public int minmax(int [][] board, int depth, int curPlayer){
    ArrayList<Move> moves = findMoves(curPlayer, board);

    if (depth == 0 || moves.size() == 0){
        return heurValue(curPlayer, board); 
    }

    int bestVal = 0;
    if (curPlayer == GameCore.BLACK){
        bestVal = Integer.MIN_VALUE;
        curPlayer = GameCore.RED;
    }else{
        bestVal = Integer.MAX_VALUE;
        curPlayer = GameCore.BLACK;
    }

    for(int i = 0; i<moves.size(); i++){
        Move m = moves.get(i);

    int [][] boardNew = makeMove(m, board);

    int value = minmax(boardNew, depth-1, curPlayer);

    board = undoMove(m, boardNew);

    // computer plays as black
    if (curPlayer == GameCore.BLACK){
        if (value < bestVal){
            bestMove = m;
            bestVal = value;
        }
    }else{
        if (value >= bestVal){
            bestMove = m;
            bestVal = value;
        }   
    }
    } 
    return bestVal; 
} 
```

如果我用 depth = 1 调用 minmax 它应该“返回 7 个值（有 7 个可能的移动），但如果我从 2,4 移动到 3,3，它只返回 1 ...但是当我尝试调试它时，ArrayList move 有正确的大小。所以我不知道它有什么问题。:(

编辑： **“返回”我错误地表示第一个条件（当深度为 0 或移动为空时）只发生一次，但如果它是正确的，它应该发生 7 次。对不起，我的英语不好。**

你知道一些网站，哪里有正确的 minmax 递归伪代码（最好使用 alpha/beta，因为我需要扩展它）或者你能帮我解决这个问题吗？应该只是小事。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:17:35.310

编辑：所以这不是我最初想到的签名问题。

我已经快速搜索了 MinMax 算法，这就是我找到[的一篇文章](http://www.code2learn.com/2012/01/minimax-algorithm-tutorial.html)

很快我认为这个页面很重要的是：

> 这里的值代表了移动的好坏。所以 MAX 玩家最终会尝试选择价值最高的着法。

因此，如果我是正确的，MinMax 只会返回一招，即带有`bestValue`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:09:02.713

您编写此代码仅返回最佳值，即`return bestVal;`如果您希望它全部返回它们，请将它们存储在`List`某种类型的 a 中并相应地更改方法签名。

# quickblox - 从对手那里检索所有 blob（iOS 内容/聊天模块）

> ID：15979930
> 
> 赞同：0
> 
> 时间：2013-04-12T20:02:34.717
> 
> 标签：quickblox

如何检索“对手”（不仅仅是对手.blobId）上传的所有 blob？对于 currentUser 的 blob，有没有像 PagedRequest 这样的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:04:10.730

没有基本的方法可以做到这一点，因为所有文件都可以是私有的或类似的东西

我建议接下来做：使用自定义对象 API [http://quickblox.com/developers/Custom_Objects](http://quickblox.com/developers/Custom_Objects)

创建**UserFiles**或**UserAlbum**表并将您想要向用户打开的所有文件（我的意思是 blobx ID）写入其中

接下来，其他用户将能够检索所有文件 - 只需使用过滤器**user_id=从该表中获取所有数据**

# javascript - 在嵌入式 Google 文档查看器中从父级打印文档

> ID：15979932
> 
> 赞同：6
> 
> 时间：2013-04-12T20:02:42.943
> 
> 标签：javascript, iframe, google-docs

我正在使用 Google Docs Viewer 在页面上嵌入各种文档。我可以手动聚焦嵌入的 iframe 和 ctrl+p 以启动 iframe 适当处理的打印。问题是嵌入式查看器上没有实际的打印按钮，因此任何不知道键盘快捷键的人都可能无法打印文档。

我试图在关注 iframe 的父级上添加一个链接，然后发送一个 print()，但该命令是由父级而不是 iframe 本身拾取的。

我有任何选项可以向嵌入式查看器发出打印命令吗？

# css - 这种悬停效果是如何在谷歌浏览器页面中完成的？

> ID：15979933
> 
> 赞同：2
> 
> 时间：2013-04-12T20:02:47.210
> 
> 标签：css, google-chrome

当您将鼠标悬停在以下给定链接中的此 chrome 徽标上时，如何在 google chrome 页面中完成此悬停效果？

[https://www.google.com/intl/en/chrome/](https://www.google.com/intl/en/chrome/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T15:09:58.697

我为此制作了一个角度插件：http: [//x1a0.net/angular-shiny/](http://x1a0.net/angular-shiny/)

（目前仅适用于 webkit 浏览器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:24:45.523

好吧，它看起来最初具有以下样式：

```
-webkit-mask: -webkit-gradient(radial, 17 17, 123, 17 17, 138, from(rgb(0, 0, 0)), color-stop(0.5, rgba(0, 0, 0, 0.2)), to(rgb(0, 0, 0))); 
```

在悬停时，渐变迅速从：

```
-webkit-gradient(radial, 17 17, 0, 17 17, 0, 
```

并回到原来的状态。

它如何执行这种影响是多云的。我想它实现了 Javascript 并在悬停时，重置渐变并执行某种循环，当这些数字小于原始数字时，增加

# javascript - 如何限制 Kendo UI Web Upload 只允许一次上传？

> ID：15979935
> 
> 赞同：12
> 
> 时间：2013-04-12T20:02:48.383
> 
> 标签：javascript, c#, asp.net-mvc, kendo-ui, kendo-asp.net-mvc

我目前正在使用 Kendo UI 使用 MVC3 和 Razor 和实体框架将文件上传到数据库。我在我网站的几个区域都运行良好，除非我需要将其限制为仅允许单个上传。我有多个设置为false，我需要禁止多项选择，但仍然允许用户多次单击选择按钮来添加文件，这违反了数据库中该字段的要求。

我尝试了一些我认为在他们的网站上找到的建议，但它们指的是当前请求中发送的当前选定项目，而不是整个上传列表（见下图）。

```
<script type="text/javascript">
  function singleFile(e) {
    var files = e.files;
    if (e.files.length > 1) {
      alert('Only one file may be uploaded, cancelling operation...');
      e.preventDefault();
    }
  }
</script> 
```

```
@(Html.Kendo().Upload()
  .Name("resumeAttachments")
  .Multiple(false)
  .Async(async => async
      .Save("ResumeSave", "File")
  )
  .Events(c => c
      .Upload("resumeOnUpload")
  )
  .Events(c => c
      .Success("resumeOnSuccess")
  )
  .Events(c => c
      .Complete("singleFile")
  )
) 
```

![文件列表 - 允许单独上传多个文件](https://i.stack.imgur.com/PtJv7.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-10T07:44:39.030

在我被要求防止多次上传后，我偶然发现了这个页面。
**如果正确完成，“multiple”设置为 FALSE 就可以正常工作。**

（虽然您可以使用 Kendo Razor 语法，但请注意，当您查看页面源代码时**.Kendo** () 实际上已转换为 .kendoUpload

因此我更喜欢**javascript中的这种语法**（在@using之后）：

```
@using Kendo.Mvc.UI;

<script type="text/javascript">

$(document).ready(function() {
    $("#files").kendoUpload({"multiple":false,
        async: {
            saveUrl: '@Url.Action("Save", "Upload", new { typeOfUploadedFile= @Model.DocName.ToString(), @proposalNo = @Model.ProposalNo.ToString(),  area = ""})',
            removeUrl: '@Url.Action("Remove", "Upload")',
            autoUpload: true
        }
    });
});   

</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T15:59:24.290

在周末（以及一个长周末的假期放松）稍微思考之后，它击中了我......将singleFile函数更改为以下将禁用文件上传后的控件。

```
function singleFile(e) {
  var upload = $("#resumeAttachments").data("kendoUpload");

  // disables the upload after upload
  upload.disable();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-28T05:23:40.193

您必须`multiple`将剑道的属性`upload`设置为`false`；
例如 `@(Html.Kendo().Upload().Multiple(false))`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-13T12:49:44.873

我知道这是一个非常古老的线程，但是我只想发布我们遇到的问题。通过异步上传添加多个将使用以下简单代码

```
$("#files").kendoUpload({
                        multiple : false,
                        async : {
                                saveUrl : FileUploadURL,
                                removeUrl : FileRemoveURL,
                                autoUpload : true
                                },
                        remove : onRemove,
                        success : onSuccess
                        }); 
```

但是会有一个非常烦人的行为，当用户在之前选择的文件上传仍在进行中时选择另一个文件，然后从首页看起来之前选择的文件被删除了，但实际上是之前的文件上传选定的文件仍将继续，这意味着该文件无论如何都会上传到您的服务器，您没有机会触发 removeUrl 删除未使用的文件，当然会消耗额外的带宽。

到目前为止，我们为解决这个问题所做的是在 onRemove 事件处理程序中添加一个小处理，这将调用 clearFileByUid 来停止上传。

```
function onRemove(e) {
        for(var removedFileId of getFileId(e)){
            //All in progress file should be stopped!
            var fileEntry=$('.k-file-progress[' + kendo.attr('uid') + '="' + removedFileId + '"]', this.wrapper)
            if(fileEntry!=null&&fileEntry.length>0){this.clearFileByUid(removedFileId);}
        }

}
function getFileId(e) {
        return $.map(e.files, function(file) {
                var fileId = file.uid;
                return fileId;
                });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T14:46:03.320

另外，添加：

```
var dropzone = $(".k-dropzone").addClass("hide"); 
```

到 singleFile() 函数将在上传完成后隐藏选择按钮，给人一种无法再上传的非常真实的印象，因为：

```
.hide {
  display: none; } 
```

是在你的css中定义的。

# c++ - 从内存缓冲区创建一个 fstream 对象

> ID：15979936
> 
> 赞同：2
> 
> 时间：2013-04-12T20:02:49.580
> 
> 标签：c++, c, file, memory, buffer

假设我有一些由 malloc 分配的内存。现在我想将它用作流缓冲区作为 fstream 对象。在另一种情况下，假设我有一个 FILE*. 是否可以从中创建一个 fstream 对象？

* * *

实际上我有一个现有的库，它在它的函数中接受 FILE* 参数。现在我想用 cpp 类型的文件处理来实现这个库，保持向后兼容性。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:15:02.613

您不能`fstream`从`FILE*`.

您应该亲自编写基于 C++ 标准 I/O 流的流，该流由`FILE*`

# python - 试图得到对角线和

> ID：15979937
> 
> 赞同：3
> 
> 时间：2013-04-12T20:02:50.857
> 
> 标签：python, python-2.7, sum, diagonal

试图在#6 创建的列表的#7 中对角求和。所以说列表是这样`[[2,3,1],[1,1,1],[5,6,4]]`的，总和是 2+1+4

```
#6

def randomlists(s):
    b=s
    list1 = []
    while s>0:
        sublist = []
        for x in range(0,b):
            sublist.append(randrange(-100,101))
        list1.append(sublist)
        s-=1
    return list1
#print(randomlists(5))
#7

def diagonalsum(x):
    a=randomlists(x)
    count=0
    print (a)
    for b in a:
        while count<x:
            d=a[0]
            b=a[1]
            c=a[2]
            print (a[(count)])
            count+=1
        return d+b+c
print (diagonalsum(3)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T20:36:14.083

假设矩阵是方形的，这是使用循环的标准解决方案：

```
def diagonalsum(m):
  count = 0
  for i in xrange(0, len(m)):
    count += m[i][i]
  return count 
```

...通过使用生成器表达式和`sum`函数，可以以更简洁的方式编写：

```
def diagonalsum(m):
    return sum(m[i][i] for i in xrange(len(m))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-07T20:00:37.573

使用 numpy.trace：[http](http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.trace.html) ://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.trace.html 。它返回沿数组对角线的总和。

```
import numpy as np

M = np.array([[2,3,1],[1,1,1],[5,6,4]])

print(M.trace())

#7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T20:13:13.167

要获得对角线元素，您需要第一行中的第一个，第二行中的第二个......第 n 行中的第 n 个。

```
def diagonalsum(x):
    a = randomlists(x)
    return sum(row[i] for i, row in enumerate(a)) 
```

*使用普通*for 循环读取的不太简洁的替代方案

```
def diagonalsum(x):
    a = randomlists(x)
    result=0
    for i, row in enumerate(a):
        result += row[i]
    return result 
```

# c# - 在 ASP.NET 中拆分数据

> ID：15979938
> 
> 赞同：1
> 
> 时间：2013-04-12T20:02:54.477
> 
> 标签：c#, asp.net, database, drop-down-menu, split

我正在尝试将本地数据库中的列显示到下拉列表中。问题是我需要拆分数据，以便它们不会全部显示在一行中。我用过“;” 分离数据，然后使用 split(";") 方法拆分它们。我已经尝试了我在下面编写的代码，但它不起作用。任何帮助将不胜感激。

```
public string DisplayTopicNames()
{
    string topicNames = "";

    // declare the connection string 
    string database = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|/Forum.accdb;Persist Security Info=True";

    // Initialise the connection 
    OleDbConnection myConn = new OleDbConnection(database);
    //Query
    string queryStr = "SELECT TopicName FROM Topics";
    // Create a command object 
    OleDbCommand myCommand = new OleDbCommand(queryStr, myConn);
    // Open the connection 
    myCommand.Connection.Open();
    // Execute the command 
    OleDbDataReader myDataReader = myCommand.ExecuteReader();

    // Extract the results 
    while (myDataReader.Read())
    {
        for (int i = 0; i < myDataReader.FieldCount; i++)
            topicNames += myDataReader.GetValue(i) + " ";
        topicNames += ";";
    }

    //Because the topicNames are seperated by a semicolon, I would have to split it using the split()
    string[] splittedTopicNames = topicNames.Split(';');
    // close the connection 
    myCommand.Connection.Close();

    return Convert.ToString(splittedTopicNames);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:06:50.173

您只返回表中的一列。
没有理由对字段计数使用 for 循环（它始终为 1）
相反，您可以使用 a`List(Of String)`来保存找到的行返回的值。
然后返回此列表以用作 DropDownList 的数据源

```
List<string> topicNames = new List<string>();
// Extract the results 
while (myDataReader.Read())
{
    topicNames.Add(myDataReader.GetValue(0).ToString();
}
....
return topicNames; 
```

但是，不清楚该字段是否`TopicName`包含由分号分隔的自身字符串。
在这种情况下，您可以编写：

```
List<string> topicNames = new List<string>();
// Extract the results 
while (myDataReader.Read())
{
    string[] topics = myDataReader.GetValue(0).ToString().Split(';')
    topicNames.AddRange(topics);
}
...
return topicNames; 
```

如果您更喜欢返回一个字符串数组，那么只需将列表转换为数组即可

```
return topicNames.ToArray(); 
```

**编辑**
当然返回数组或 List(Of String) 需要更改方法的返回值

```
 public List<string> DisplayTopicNames()
 {
     ......
 } 
```

或者

```
 public string[] DisplayTopicNames()
 {
     ......
 } 
```

如果您仍然喜欢返回用分号分隔的字符串，那么以这种方式更改 return 语句

```
 return string.Join(";", topicNames.ToArra()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:08:58.297

除非我失去理智，否则这样的事情应该有效：

```
while (myDataReader.Read())
{
    for (int i = 0; i < myDataReader.FieldCount; i++)
        ddl.Items.Add(myDataReader.GetValue(i))
} 
```

`ddl`你的名字在哪里`DropDownList`。如果您`ddl`在此处不可用，请将它们添加到`List<string>`集合中并返回。然后这段代码现在可能变得无关紧要：

```
//Because the topicNames are seperated by a semicolon, I would have to split it using the split()
string[] splittedTopicNames = topicNames.Split(';');
// close the connection 
myCommand.Connection.Close();

return Convert.ToString(splittedTopicNames); 
```

但是，除此之外，我想为您稍微重构一下代码，因为您需要利用`using`.

```
public string DisplayTopicNames()
{
    string topicNames = "";

    // declare the connection string 
    string database = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|/Forum.accdb;Persist Security Info=True";

    // Initialise the connection 
    using (OleDbConnection myConn = new OleDbConnection(database))
    {
        myConn.Open();

        // Create a command object 
        OleDbCommand myCommand = new OleDbCommand("SELECT TopicName FROM Topics", myConn);

        // Execute the command 
        using (OleDbDataReader myDataReader = myCommand.ExecuteReader())
        {
            // Extract the results 
            while (myDataReader.Read())
            {
                for (int i = 0; i < myDataReader.FieldCount; i++)
                {
                    ddl.Items.Add(myDataReader.GetValue(i));
                }
            }
        }
    }

    // not sure anything needs returned here anymore
    // but you'll have to evaluate that
    return "";
} 
```

您想要利用该`using`语句的原因是确保存在于 中的非托管资源`DataReader`并`Connection`得到正确处理。离开`using`语句时，它将自动调用`Dispose`对象。此语句**仅用于**实现`IDisposable`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T20:09:46.970

我认为这应该有效：

```
public List<string> DisplayTopicNames()
{
    List<string> topics = new List<string>();

    // Initialise the connection 
    OleDbConnection conn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|/Forum.accdb;Persist Security Info=True");
    OleDbCommand cmd = new OleDbCommand("SELECT TopicName FROM Topics");
    using(conn)
    using(cmd)
    {
        cmd.Connection.Open();
        // Execute the command 
        using(OleDbDataReader myDataReader = cmd.ExecuteReader())
        {
            // Extract the results 
            while(myDataReader.Read())
            {
            topics.Add(myDataReader.GetValue(0).ToString());
        }
    }
}

return topics; 
```

}

# android - JSON 解析器返回一些 HTML/CSS 内容，而不是实际的 JSON 字符串

> ID：15979942
> 
> 赞同：0
> 
> 时间：2013-04-12T20:03:05.923
> 
> 标签：android, json

我有一个`asyncTask`这样的：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnCancelListener;
import android.os.AsyncTask;
import android.util.Log;

public class OfficeJSONParser extends AsyncTask<String, String, JSONObject> {

    private ProgressDialog progressDialog;
    InputStream inputStream = null;
    String result = "";
    Context c;
    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";
    String url;

    public OfficeJSONParser(Context c, String url) {
        this.c = c;
        this.url = url;
    }

    protected void onPreExecute() {
        progressDialog = new ProgressDialog(c);
        progressDialog.setMessage("Downloading your data...");
        progressDialog.show();
        progressDialog.setOnCancelListener(new OnCancelListener() {
            public void onCancel(DialogInterface arg0) {
                OfficeJSONParser.this.cancel(true);
            }
        });
    }

    @Override
    protected JSONObject doInBackground(String... params) {
        return getJSONFromUrl(url);
    }

    protected void onPostExecute(JSONObject jObj) {
        JSONObject json = jObj;
    }

    public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "UTF-8"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json.substring(json.indexOf("{"),
                    json.lastIndexOf("}") + 1));
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }
        // return JSON String
        return jObj;

    }
} 
```

我知道提供的 URL 是有效的 JSON 文档，但我的解析器返回：

```
{"MARGIN-LEFT":"30px","PADDING-BOTTOM":"2em","FONT-SIZE":"0.7em"} 
```

为什么？怎么了？

编辑：

JSON 是挪威语，但结构很容易理解：

[http://data.helsenorge.no/External.svc/Services/KA02/10.75/59.91](http://data.helsenorge.no/External.svc/Services/KA02/10.75/59.91)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:05:54.377

我已经编译并运行了您的代码，除了没有提供有关该主题的太多信息之外，我不确定为什么另一个答案被否决了。我将您的 HttpPost 更改为 HttpGet，我返回给我的 JSON 字符串确实是该站点的 JSON 内容。只是改变：

```
HttpPost httpPost = new HttpPost(url); 
```

至

```
HttpGet httpGet = new HttpGet(url); 
```

并记录或调试您从中获得的 JSON 字符串

```
json = sb.toString(); 
```

你应该有你想要的。然后，您需要做的就是将 json 字符串解析为 JSON 对象，然后您就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:09:30.350

我不知道这是什么原因，但你真的想做http post吗？如果我看得很清楚，您只想调用服务。为什么不使用 HttpGet？

# css - 删除边框时，边距超出 div

> ID：15979945
> 
> 赞同：2
> 
> 时间：2013-04-12T20:03:29.993
> 
> 标签：css, border

源于我网站上的边框和边距的实际问题，我制作了这个测试示例，我认为它有点奇怪：

```
<!DOCTYPE html>
<html>
    <head>
        <style>
            body {
                background-color:black;
            }

            .outer {
                width:100px;height:100px;

            }

            .inner {
                margin-top:40px;
                height:20px;
                border:1px solid red;
            }

            #outer-1 {
                background-color:blue;

                border-top:10px solid yellow; 
            }

            #outer-2 {
                background-color:green;

                border-top:none;
            }

            #sep {
                background-color:white;
            }

        </style>
    </head>
    <body>
        <div id="outer-1" class="outer">
            <div class="inner">
                CONTENT
            </div>
        </div>

        <div id="sep">TEST</div>

        <div id="outer-2" class="outer">
            <div class="inner">
                CONTENT
            </div>
        </div>  
    </body>
</html> 
```

为什么在#outer-2 中移除border-top 时，“.inner”的上边距会移动到“外部”？我会认为红色边框会留在相对相同的位置的蓝色和绿色区域内？但事实并非如此。

为什么？有没有办法让它看起来像我想象的那样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:08:20.963

您的问题是边距正是名称所说的：它们将边距设置为其他元素，而不是定位偏移量。如果两个元素彼此相邻且具有不同的边距，则它们将被放置在最高边距的位置，这样两个边距都得到满足。在这种情况下，存在 2 个边距，没有任何东西将它们分开，因此从逻辑上讲它们会折叠。

在 .outer 上使用填充应该可以解决这个问题，或者说相对定位。边距严格用于保持与其他元素的距离。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T20:10:01.107

因为边距是邪恶的（并且往往会崩溃->[这是一个错误吗？ P 元素的边距超出了包含 div](https://stackoverflow.com/questions/685967/is-it-a-bug-margins-of-p-element-go-outside-the-containig-div)）。在您的情况下，您可以简单地添加`overflow:hidden;`到`.outer`

[http://jsfiddle.net/yhAaQ/](http://jsfiddle.net/yhAaQ/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T20:11:44.420

outer2 元素上的边距是从其上方元素的底部计算的，没有应用到 outer2 元素的顶部边距。但是，如果添加边框，则从边框底部计算。

此外，当底部和顶部边距应用于彼此跟随的元素时，它们会折叠，这正是盒子模型的工作方式。

如果要控制一个元素在另一个元素内的偏移量，请使用填充。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-07T14:12:12.870

```
body{/* just a reset to simplify example */
    padding:0;
    margin:0
  }
  .inner {
    margin-top:40px;
    height:40px;
    width:40px;
    background-color:blue;
  }
  #outer{
    background-color:green;
    height:60px;
    width:60px;
  }
```

```
<div id="outer">
  <div class="inner">
    <div class="inner">
      <div class="inner">
        <div class="inner">
          test
        </div>
      </div>
    </div>
  </div>
</div>
```

上面的代码是您提到的问题的更一般情况。都`.inner`在`margin-top=40px`CSS 中。但实际上，由于不涉及边框，所有边距都只是缩小到最后一个 40px 的边距，它在根父级之外“冒泡”。

# php - 购物车会话 php

> ID：15979952
> 
> 赞同：1
> 
> 时间：2013-04-12T20:04:14.547
> 
> 标签：php, shopping

```
 <?php

session_start(); 
print '<h1>Your Shopping Cart:</h1>';
print '<h4>The Product ID: '.$_SESSION['id'].' </h4>';
print '<h4>The Quantity: '.$_SESSION['quantity'].' </h4>';

$dbc = mysql_connect('127.0.0.1', 'root', ''); 
mysql_select_db('product', $dbc);

$query = "SELECT * FROM prod WHERE id='".$_SESSION['id']."'";

if ($r = mysql_query($query, $dbc)) {

while ($row = mysql_fetch_array($r)) { 
print "<p><b>Product Name: {$row['name']}<br />
             The Price: {$row['price']}<br />
             Shipping Cost: {$row['shipping']}<br />

 </p><hr />\n";
 }}
?> 
```

此代码用于带有 Session 的购物车，但问题是它只保留一种产品。

例如，如果您购买产品 A 并在购物车中删除产品 B 然后添加产品请帮助我我想添加多个产品并打印在屏幕上##

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:05:38.950

将另一个级别添加到您的购物车：

```
$_SESSION['cart'][$productID]['quantity'];
                 ^^^^^^^^^^^^^ 
```

所以你保留每个产品的数据。现在，您使用的是随着新产品的添加而不断覆盖的单一级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T20:08:01.457

向 php 数组问好：[http](http://www.php.net/manual/en/book.array.php) ://www.php.net/manual/en/book.array.php :)
基本上不是：

```
$_SESSION['id'] = 1234; 
```

你会想要：

```
$_SESSION['products'][] = array('id'=>1234, 'quantity'=>10); 
```

然后你将迭代 $_SESSION['products'] 像

```
foreach($_SESSION['products'] AS $product){
   echo $product['id'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T16:12:23.330

```
$_SESSION['cart'] = array();
$_SESSION['cart']['1'] = 2;//add product A,id=1,quality=2
$_SESSION['cart']['2'] = 3;//add product B,id=2,quality=3

//get all items
foreach($_SESSION['cart'] as $item)
{
    print_r($item);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T20:16:38.623

您应该在单个会话变量中维护您的购物车`$_SESSION['cart']`。添加新产品时，您可以使用它，

```
$_SESSION['cart'] = array();         //initialize once
array_push($_SESSION['cart'], array("id" => $id, "quantity" => $q));
print_r($_SESSION['cart']); 
```

这样，您可以在购物车中拥有多个产品。

对于特定框架 CodeIgniter，有一个类提供购物车功能。看看[这个](http://ellislab.com/codeigniter/user-guide/libraries/cart.html)。

# c++ - 在多线程循环中调用函数

> ID：15979953
> 
> 赞同：1
> 
> 时间：2013-04-12T20:04:24.517
> 
> 标签：c++, multithreading, openmp

我对 OpenMP 中的多线程循环有疑问。-`private`子句声明其列表中的变量对每个线程都是私有的。到目前为止，一切都很好。但是当我在多线程循环中调用函数时会发生什么？看这个最小的例子：

```
#include <iostream>
#include <vector>
#include "omp.h"

using namespace std;

int second(int num)
{
    int ret2 = 2*num;
    return ret2;
}

int first(int num)
{
    int ret1 = num;
    return second(ret1);
}

int main()
{
    int i;
    #pragma omp parallel
    {
        vector<int> test_vec;
        #pragma omp for
        for(i=0; i<100; i++)
        {
            test_vec.push_back(first(omp_get_thread_num()));
        }
        #pragma omp critical
        cout << test_vec[0] << endl;
    }
    return 0;
} 
```

每个线程是否会获得自己的函数版本，`first`以便`second`线程可以相互独立地调用它们？或者线程是否必须“排队”才能不同时调用它们？

无论发生什么，我都希望变量`ret1`和`ret2`每个线程都是私有的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:17:21.390

`ret2`和`ret1`被声明在堆栈上，每个线程都有自己的堆栈，因此如果`first`或被`second`多个线程同时调用不会有干扰。

我是否正确理解您的问题？

# matlab - 积分器可以用作双向换向阀吗？

> ID：15979955
> 
> 赞同：1
> 
> 时间：2013-04-12T20:04:36.483
> 
> 标签：matlab, controls, real-time, simulink

我是在 simulink 中设计实时工厂模型的新手，我必须在我的模型中包含一个 2 路换向阀，我可以采用孔板模型并在方向从 B->A 时使压差为零。我可以使用积分器来做同样的事情吗？还是有更合适的更简单的块？我正在使用 MATLAB 2012b

谢谢！

# c++ - 双链表节点运算符=

> ID：15979956
> 
> 赞同：0
> 
> 时间：2013-04-12T20:04:37.320
> 
> 标签：c++, doubly-linked-list

我正在尝试为双向链表中的节点编写复制赋值运算符。但是，以下代码给了我一个堆栈溢出：

```
template <class DataType>
ListNode<DataType>& ListNode<DataType>::operator=(const ListNode<DataType>& Node)
{
if(this == &Node)
    return *this;
else
{
    if(Child != NULL)
        delete Child;
    if(Parent != NULL)
        delete Parent;

    if(Node.Child != NULL)
    {
        Child = new ListNode<DataType>();
        *Child = *Node.Child;
    }
    else
        Child = NULL;

    if(Node.Parent != NULL)
    {
        Parent = new ListNode<DataType>();
        *Parent = *Node.Parent;
    }
    else
        Parent = NULL;

    _data = Node._data;
}
return *this;
} 
```

像这样复制节点的标准方法是什么，我是否需要使用其他方式（即不是复制赋值运算符）来实现这一点？我想尽可能避免这样做，因为它会涉及重写我现有的大量程序。这个函数似乎对单链表工作得很好，但是通过添加父指针的复制，它似乎遇到了问题。我似乎无法确定原因，或者想出另一种方法来编写这个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:10:05.557

```
*Parent = *Node.Parent; 
```

将为父级调用 operator=，开始递归。
顺便说一句

```
if(Child != NULL)
    delete Child; 
```

if 是多余的，因为 delete NULL 是一个有效的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:10:39.377

我建议您将名称更改`parent`为`previous`和。只是为了澄清它们的真正含义。似乎更适合一棵树。`child``next``Parent``child`

```
if(Node.Child != NULL)
{
    Child = new ListNode<DataType>();
    *Child = *Node.Child;
} 
```

请记住，这将调用`ListNode<DataType>::operator=`第二个任务。它将一次又一次地调用它，直到复制整个子链。

父母也一样。

```
if(Node.Parent != NULL)
{
    Parent = new ListNode<DataType>();
    *Parent = *Node.Parent;
} 
```

所以基本上你只是复制了整个列表。

* * *

如果您只想将一个节点复制到另一个节点。您应该只复制`value`节点中的。不是实际的节点。我认为复制实际的节点没有意义。

例如，如果链接包含`int`s 并且您想将成员复制到`5th`成员，`8th`那么您只需复制节点**中 int 的值。**

# iphone - Iphone 4 上的 HTML5 视频标签问题

> ID：15979958
> 
> 赞同：0
> 
> 时间：2013-04-12T20:04:57.650
> 
> 标签：iphone, ios, video, html5-video

您好，我对 HTML5 视频非常陌生，当使用 HTML5 视频标签时，我遇到了视频无法在我的 iPhone 4（运行 iOS 6.1.2）上播放的问题。

该视频在装有 Google Chrome 的计算机上运行良好。我在 iPhone 上使用 Safari 的浏览器。

我尝试过同时使用多种文件格式，例如 .OGG .webM 和 h264 MP4。[然而，真正让我困惑的是，我曾尝试在我的 iPhone 上播放本文](http://diveintohtml5.info/video.html)底部的 HTML5 视频，但它仍然无法正常工作。

我认为这个博客将成为 HTML5 视频的示例，但现在我真的不知道出了什么问题。我也在另一台 iPhone4 上试了一下，还是不行。

有谁知道这里发生了什么或 iPhone 上的 HTML5 视频有什么问题？有人可以帮助我用一种好方法来显示不使用 Youtube 之类的视频，而是更多地使用 HTML5 的方式吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-14T13:13:44.857

这可能会帮助你

我们需要三种格式的 HTML5 才能在包括手机在内的所有浏览器上工作。

1.  使用 H.264 编码的 mp4
2.  网站
3.  OGV

使用 ffmpeg 编码视频：

```
ffmpeg -i input.mp4 -codec:v libx264 -profile:v high -preset slow -b:v 500k -maxrate 500k -bufsize 1000k -vf scale=-1:480 -threads 0 -codec:a libfdk_aac -b:a 128k output.mp4 
```

详细信息在这里[http://skillrow.com/html5-video-for-all-browsers/](http://skillrow.com/html5-video-for-all-browsers/)

# c# - 使用 groupby 将 SQL 转换为 lambda

> ID：15979961
> 
> 赞同：2
> 
> 时间：2013-04-12T20:05:01.873
> 
> 标签：c#, sql, lambda, linq-to-entities

我正在尝试翻译这个 sql 语句

```
SELECT row, SUM(value) as VarSum, AVG(value) as VarAve, COUNT(value) as TotalCount 
FROM MDNumeric
WHERE collectionid = 6 and varname in ('C3INEV1', 'C3INEVA2', 'C3INEVA3', 'C3INVA11', 'C3INVA17', 'C3INVA19')
GROUP BY row 
```

进入使用 lambda 表达式的 EF 4 查询并且缺少一些东西。

我有：

```
sumvars = sv.staticvararraylist.Split(',');

var aavresult = _myIFR.MDNumerics
    .Where(r => r.collectionid == _collid)
    .Where(r => sumvars.Contains(r.varname))
    .GroupBy(r1 =>r1.row)
    .Select(rg =>
          new
          {
              Row = rg.Key,
              VarSum = rg.Sum(p => p.value),
              VarAve = rg.Average(p => p.value),
              TotalCount = rg.Count()
          }); 
```

其中 staticvararraylist 具有字符串“C3INEV1”、“C3INEVA2”、“C3INEVA3”、“C3INVA11”、“C3INVA17”、“C3INVA19”（不带单引号）和 _collid 变量 = 6。

虽然我得到了正确的分组，但我的总和、平均值和计数值不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:49:55.417

尝试这个：

```
var aavresult = _myIFR.MDNumerics
.Where(r => r.collectionid == _collid && sumvars.Contains(r.varname))
.GroupBy(r1 =>r1.row,
  (key,res) =>    new
      {
          Row = key,
          VarSum = res.Sum(r1 => r1.value),
          VarAve = res.Average(r1 => r1.value),
          TotalCount = res.Count()
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:38:12.337

您没有发布错误消息，但我怀疑它与`Contains`. 我发现它`Any`也同样有效。

这应该让你非常接近：

```
var result =
    from  i in _myIFR.MDNumerics
    where i.collectionid == _collid && sumvars.Any(v => i.varname == v)
    group i by i.row into g
    select new {
        row = g.Key,
        VarSum = g.Sum(p => p.value),
        VarAve = g.Average(p => p.value),
        TotalCount = g.Count()
    }; 
```

# java - 有什么方法可以立即停止线程吗？

> ID：15979962
> 
> 赞同：0
> 
> 时间：2013-04-12T20:05:04.050
> 
> 标签：java

我想知道Java中是否有某种方法可以立即停止线程。我不想检查它的中断状态，我需要立即停止它。那是因为在线程的 run 方法中有很多计算，为了实现我想要使用的中断，我必须在任何地方注入状态检查。那么有什么方法可以立即中断线程吗？也许 stop() 方法？我知道据说它不应该因为死锁而使用，但如果它可以解决我的问题（即使它会导致另一个问题；））我可以使用它。所以？***PS****我知道还有其他类似的问题，但是到处有人向不适合我的interrupted()提出类似的问题。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:22:00.437

[@Alya'aGamal 指出的问题/答案](https://stackoverflow.com/questions/11911118/stopping-thread-immediately)是正确的。

如果您的应用程序的设计假设强制停止线程、进程或程序（例如`kill -9`通过 Windows 上的任务管理器使用或停止它）是可以做的，那么您确实需要证明这一点，因为这听起来像一个糟糕的设计选择。如果你使用了别人的应用程序，并且按需关闭它的唯一方法是强行停止它，你不认为这是一个相当大的缺陷吗？

如果您有长时间运行的循环或算法，并且能够在任意点停止它们很重要，那么您**必须**设置某种常规状态或信号检查才能正确执行此操作。

始终以一种很好、友好、优雅的方式设计您的应用程序，使它们能够从您无法控制的事情之外的所有情况中退出（例如，另一个应用程序开始使 CPU 饱和，硬盘死机，RAM 芯片被炸毁） ，流星撞击地球等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T20:23:45.130

正如其他人所说，仅仅杀死一个线程并不是一个好主意，这就是该`stop()`方法已被弃用的原因。以这种方式引入死锁太容易了。从外部停止线程不好还有其他原因，但我不会在这里讨论它们。

状态检查确实是唯一的其他方法，但我可以理解您为什么要避免它们。如果您的方法有很多代码行，检查会增加开销并使代码变得繁琐`run()`......但是根本没有其他线程安全的方法来停止线程。

也就是说 - 死锁有四个组成部分：互斥、保持和等待、非抢占和循环等待。如果您可以保证在您的`run()`方法中永远不会满足这些条件中的任何一个，那么您将永远不会通过调用遇到死锁`stop()`。

# python - 是否有使用 xhtml2pdf python 模块的当前教程或操作文档？

> ID：15979969
> 
> 赞同：3
> 
> 时间：2013-04-12T20:05:32.517
> 
> 标签：python, xhtml2pdf

我似乎找不到此模块的工作教程或操作文档。某处存在吗？

* * *

这里的“待完成”部分： [https ://github.com/chrisglass/xhtml2pdf/blob/master/doc/usage.rst](https://github.com/chrisglass/xhtml2pdf/blob/master/doc/usage.rst)

是错误的，并且似乎不包含工作代码。更正后，此代码序列：

```
from xhtml2pdf import pisa as pisa
filename = u'test.pdf'
pdf = pisa.CreatePDF("Hello <strong>World</strong>",file(filename, "wb"))
pisa.startViewer(filename) 
```

生成一个空的 test.pdf 文件（嗯，不完全是空的，它是一个没有内容的 pdf 文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:22:30.537

由于它大量基于 ReportLab，您可能会[发现他们的教程](http://www.reportlab.com/software/documentation/tutorial/)很有用。

（我不使用任何一个包）。

# iphone - 在 Objective C 中设置静态变量

> ID：15979973
> 
> 赞同：8
> 
> 时间：2013-04-12T20:05:41.600
> 
> 标签：iphone, ios, objective-c, variables, static

我似乎无法找到一种方法来设置我创建的静态 int 来为我保存到持久内存的每个对象分配唯一的 ID。以下为我提供了一个用于分配给属性的“无设置方法”setIdGen。

```
-(void)viewDidLoad
{
    PlayerMenuController.idGen = [[NSUserDefaults standardUserDefaults] floatForKey:@"idGen"];
} 
```

除了上述之外，我还尝试创建一个静态 setIdGen 方法，该方法会返回错误的访问错误，并使用自己的 set 方法制作 NSIntegers。当我尝试使用 = 分配它时，我的静态 NSMutableArray 给出了相同的错误，但在使用 setArray 时工作正常。

idGen 方法：

```
+ (int) idGen
{
    /*static int idGen;
    if(!idGen)
    {
        idGen = 0;
        NSLog(@"idGen reset");
    }*/
    return self.idGen;
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-12T20:30:08.317

**2017 年更新**

Xcode 8 向 Objective-C 引入了类属性，来自发行说明：

> Objective-C 现在支持与 Swift 类型属性互操作的类属性。它们被声明为`@property (class) NSString *someStringProperty;`，并且永远不会被合成。

这意味着我们下面的示例界面可以变成：

```
@interface PlayerMenuController : NSObject

@property (class) int idGen;

@end 
```

**但是**，您仍然必须自己实现这些方法，如下所示，因为永远不会综合类属性。请注意，这也意味着如果您指定属性属性，例如`copy`，您的方法必须实现语义。

* * *

**原始答案**

看起来你正在尝试实现一个*类属性*，但在 Objective-C 中没有这样的东西——一个属性是一对实例方法。

但是，你可以伪造它......

虽然`@property`声明对您不可用，但如果您声明遵循正确命名约定的类方法，那么您的编译器*可能*（在 Xcode 4.6.1 上测试，“可能”，因为我不能直接指出支持这一点，但测试起来很简单如果没有，将编译时错误）允许您使用点表示法，即它看起来像一个类属性，即使它缺少`@property`.

示例界面：

```
@interface PlayerMenuController : NSObject

// a class "property"
+ (int) idGen;
+ (void) setIdGen:(int)value;

@end 
```

实施：

```
@implementation PlayerMenuController

static int idGen = 0;

+ (int) idGen { return idGen; }
+ (void) setIdGen:(int)value { idGen = value; }

@end 
```

并测试它：

```
NSLog(@"initial value: %d", PlayerMenuController.idGen);
PlayerMenuController.idGen = 42;
NSLog(@"updated value: %d", PlayerMenuController.idGen); 
```

生产：

```
initial value: 0
updated value: 42 
```

所以我们有一个“类属性”——它看起来、走路和嘎嘎声都像一个属性;-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-08T10:30:53.300

如果您使用静态变量并且您想要对其进行子类化，则静态变量对于父类和子类将是相同的，因此在寻址子类时的任何更改也会更改其父类的相同“属性”。（反之亦然）

安全的方法是使用 objc/runtime.h 关联对象

```
+(int) idGen
{
    NSNumber* idGen = objc_getAssociatedObject(self, @selector(idGen));

    if (idGen == nil)
    {
        idGen = @0;
    }
    else
    {
        idGen = @([idGen intValue] + 1);
    }

    self.idGen = [idGen intValue];

    return [idGen intValue];
}

+(void)setIdGen:(int)idGen
{
    objc_setAssociatedObject(self, @selector(idGen), @(idGen), OBJC_ASSOCIATION_RETAIN);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T20:11:46.893

您不应该返回`self.idGen`，因为 an`int`不是属性。如果您这样做，您的代码应该可以工作：

```
 + (int) idGen {
     static int idGen;
     return idGen;
   } 
```

# php - preg_match_all()：原始 ASCII 十六进制匹配

> ID：15979976
> 
> 赞同：2
> 
> 时间：2013-04-12T20:05:50.983
> 
> 标签：php, regex, ascii, preg-match-all, hex

我正在尝试为 ASCII 字符的十六进制表示的原始形式找到一种模式。示例输入如下所示（包括撇号）：

```
'\x61\x62\x63\x87\x72\x52' 
```

或者

```
'\x61\x62\x63\x64\x61\x42\x93\x3a' 
```

问题是，`\x61\x62\x63`总是一样的。我尝试了许多不同的模式，例如：

```
'/\'\\x61\\x62\\x63(.+)\'/i' 
```

和

```
'/\'\x61\x62\x63(.+)\'/i' 
```

以及各种替代品，`(.+)`但我无法使其正常工作。

如果有人可以帮助我，我将不胜感激。

PS。请注意，*输入*包含 ASCII 字符的**十六进制表示**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:16:59.273

要`\`在 PHP 字符串中包含一个您需要使用的字符串，以及在您需要使用的正则表达式`\\`中包含一个。结合这些要求和 PHP 正则表达式中的单个反斜杠将看起来像. 尝试以下操作：`\``\\``\\\\`

```
$pattern = "/'\\\\x61\\\\x62\\\\x63(.+)'/i"; 
```

例如：

```
preg_match_all($pattern, "'\\x61\\x62\\x63\\x64\\x61\\x42\\x93\\x3a'", $matches);
print_r($matches); 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => '\x61\x62\x63\x64\x61\x42\x93\x3a'
        )

    [1] => Array
        (
            [0] => \x64\x61\x42\x93\x3a
        )

) 
```

ideone：http: [//ideone.com/RIDa64](http://ideone.com/RIDa64)

# wordpress - 1 个博客可能有 2 个 Feedburner RSS 提要（1 个提供完整内容，1 个仅用于取笑）

> ID：15979981
> 
> 赞同：1
> 
> 时间：2013-04-12T20:06:21.423
> 
> 标签：wordpress, rss, blogs, feedburner

我想在多个站点上联合一个 Wordpress 博客。但是，Feedburner 的设置方式是只提供博客的第一部分，因此人们会来博客获取更多信息并查看更多内容。

一个联合出版物要求他们访问包含整个博客文章的提要。

您如何或有可能在 Feedburner 中为提供完整内容的 Wordpress 博客创建额外的提要（私下为那些需要整个帖子的联合网站）？

您是否会简单地刻录一个新的提要，将其命名为其他名称，然后设置设置以提供完整的内容而不破坏现有的内容？

谢谢你。阿克塞尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T04:47:36.137

自从有人问这个问题以来已经有一段时间了，但是是的，听起来在这种情况下您可能想要创建第二个提要。插件 FeedWrangler 可让您生成提要并自定义其输出。

[http://wordpress.org/plugins/feed-wrangler/](http://wordpress.org/plugins/feed-wrangler/)

# python - 令人困惑的python运算符

> ID：15979983
> 
> 赞同：0
> 
> 时间：2013-04-12T20:06:25.713
> 
> 标签：python

我遇到了这段代码，我似乎无法理解它。

```
def _conditional_distribution(self, m, w):
    """
    Conditional distribution (vector of size n_topics).
    """
    vocab_size = self.nzw.shape[1]
    left = (self.nzw[:,w] + self.beta) / \
           (self.nz + self.beta * vocab_size)
    right = (self.nmz[m,:] + self.alpha) / \
            (self.nm[m] + self.alpha * self.n_topics)
    p_z = left * right
    # normalize to obtain probabilities
    p_z /= np.sum(p_z)
    return p_z 
```

这是什么意思？谁能告诉我这段代码转换成什么方程？

作为参考，我相信 m 和 w 都只是整数。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T20:07:58.687

`/`是除法运算符。`\`用于行延续。它与以下内容相同：

```
left = (self.nzw[:,w] + self.beta) / (self.nz + self.beta * vocab_size) 
```

只是写在两行而不是一行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T20:14:46.297

换行符之前的反斜杠`\`是在下一行继续，就好像换行符不存在一样。

使用多行的一种更易读的方法是使用括号，如下所示：

```
left = ((self.nzw[:,w] + self.beta) /
           (self.nz + self.beta * vocab_size)) 
```

或像这样：

```
right = ((self.nmz[m,:] + self.alpha)
         / (self.nm[m] + self.alpha * self.n_topics)) 
```

如果方括号没有对应的右方括号，Python 将继续解析下一行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T20:08:03.407

`/`是除法运算符，`\`是将当前行继续到下一行。他们在一起的时候看起来很奇怪。

# css - Firefox 和 Chrome 中的页脚可见水平滚动条/CSS 问题

> ID：15979986
> 
> 赞同：0
> 
> 时间：2013-04-12T20:06:29.780
> 
> 标签：css, google-chrome, firefox, internet-explorer-9, footer

我是一个旧时代的 htmler，编码一切。这一切在 IE9 中都按预期工作，除了在分辨率 1366 x 768 上缩小到 90% 或更低时可见水平滚动条。

我难以克服的主要问题是我的页脚。它出现在 Firefox 和 Chrome 的页面中心。

我已经尝试添加`<!DocType>`到页面顶部，但这在 IE 中将其顶起。我的网站：[http ://www.ffldraftoptimizer.com](http://www.ffldraftoptimizer.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:16:25.647

元素的`div#main`高度为 600px，页脚出现在这一点上，文本溢出。

从您的`public.css`（第 42 行）中删除它：

```
#main {
 margin: 0px;
 padding: 0px;
 height: 600px;
 ...
} 
```

# c# - 在 xaml 中将内容设置为 xaml 文件的实例

> ID：15979987
> 
> 赞同：1
> 
> 时间：2013-04-12T20:06:30.013
> 
> 标签：c#, wpf, xaml

如果我在执行此操作的代码后面的类中有代码：

```
MyElement.Content = new XamlUserControlFile(); 
```

我怎样才能在 xaml 中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:12:34.147

也许您想要的是一个带有包含用户控件的 XAML 的 ContentControl？

但是，对于 ContentControl 的内容有一些限制， [您可以在此处看到](http://msdn.microsoft.com/de-de/library/ms742554%28v=vs.85%29.aspx)。内容必须是 Text（使用 ToString() 方法）或 UIElement 派生对象。

您可以简单地在 ContentControl 中构建某种 UserControl，将 xaml 与控件的使用分开。

**更新**

使用像[caliburn.micro](https://caliburnmicro.codeplex.com/)这样的 MVVM 框架会让你非常接近 MVVM。您只需从 ViewModels 引用 ViewModels。您可以完全摆脱代码隐藏。

假设您有一个像这样的 UserControl

```
<UserControl x:Class="MyUserControlView"
             ...>
    <Grid Background="Green">
    </Grid>
</UserControl> 
```

然后你有一些 ViewModel ：

```
public class MyUserControlViewModel : PropertyChangedBase
{
} 
```

然后你可以很容易地在屏幕（视图和视图模型）中有一个绑定，它应该包含那个`UserControl`

```
public MyUserControlViewModel MyUserControlViewModel { get; set; } 
```

通过包含类中的构造函数注入对其进行初始化

```
public ShellViewModel(MyUserControlViewModel viewModel)
{
    this.MyUserControlViewModel = viewModel
} 
```

并设置绑定（在包含 XAML 中），如：

```
<ContentControl Name="MyUserControlViewModel " /> 
```

这就是你所要做的，就这么简单。

请注意，caliburn.micro 具有“约定优于配置”，因此您必须将视图命名为“...View”，并将您的 ViewModel 命名为“...ViewModel”。（但您可以设置自己的规则）。

而且，在这个例子中非常重要：caliburn.micro 可以并且将设置一个绑定，`<x:Name="...">`正如您在上面的 ContentControl 中看到的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T21:17:39.307

这并不完全清楚，但缺少更多信息......

如果您正在使用类似...

```
hostControl.Content = XamlReader.Load(YourXAML); 
```

或者`LoadComponent`等等。

我认为 XAML 中没有任何“速记”（如果有的话，我想看看：）。

**1）**你可以使用其中之一...

```
Content="{x:Static my:YourStaticClass.XAMLProperty, Converter=...}"
Content="{Binding Source={x:Static my:YourStaticClass.XAMLProperty}, Converter=...}"  
Content="{Binding ViewModelXAMLProperty}, Converter=...}" 
```

要绑定到一个属性，该属性会公开您想要放入 的`Content`or 内部（已加载并准备好）。`Control`

你需要`prepare`它，所以它是你想要的形式（直接的 XAML 不起作用，但某种形式的负载）。

我已经指定`Converter`这是另一种方式 - 如果需要，您可以即时转换 XAML。

**2）**您也可以`Load`从后面的代码中获取 XAML - 并将其放入资源中 - 或定义一些您在 XAML 中实例化的包装器。

然后你使用`{StaticResource ...}`或 DynamicResource 等。

可能性是无穷无尽的——你应该提供一些更相关的信息。

# android - 外部类中的 Android 对话框处理程序

> ID：15979988
> 
> 赞同：0
> 
> 时间：2013-04-12T20:06:30.317
> 
> 标签：android, android-alertdialog

晚上好。我是Android开发的初学者。我不想弄脏我的主要活动课程，这就是为什么我要使用一些外部课程（我可以为某些外部课程提供“这个”吗？）。我的问题可能很简单。我想显示 AlertDialog。所以我的课

```
public class Dialogs {

public static void exitActivity(Context c ){
    AlertDialog.Builder builder = new AlertDialog.Builder(c);

    //Construct dialog
    builder.setMessage("Are your sure you want to exit?");
    builder.setCancelable(false);

    //Listener for yes button
    builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            FifteenActivity.c.finish(); ////<<< Here is an error >>>>//
        }
    });

    //Listener for no button
    builder.setNegativeButton("No", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
        }
    });

    AlertDialog alert = builder.create();
    alert.show();
}

}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.newGame:
        restart();
        return true;
    case R.id.settings:

        return true;
    case R.id.info:
        return true;
    case R.id.help:
        return true;
    case R.id.exit:
        Dialogs.exitActivity(this);
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

在外部课程中创建所有菜单是一种“好习惯”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:38:53.303

在第三类中分离对话代码并不是一个坏主意。特别是当您在整个应用程序中显示相同的对话框时。

在传递上下文时，请确保传递活动上下文而不是应用程序上下文。

您将能够使用相同的上下文来完成您的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:42:27.977

我的理解是，您想通过传递上下文然后调用完成来使用单独的类来完成一个活动。上面描述的方法应该足够了。

```
public static void exitActivity(Context activityContext){
   ...
   (Activity)activityContext.finish();
   ...
} 
```

是的，正如在另一篇文章中提到的，你应该确保你传递了正确的上下文。上下文可能与视图或线程等相关。因此请确保传入 Activity 上下文。

# regex - 如何使用 NSRegularExpression 从文件中删除注释

> ID：15979989
> 
> 赞同：1
> 
> 时间：2013-04-12T20:06:33.567
> 
> 标签：regex, nsregularexpression

我搜索了高低，但找不到一个好的正则表达式来剥离目标 C 中的 // 和 /* */ 注释。

但是，我找到了一个很好的答案Regex 从我已移植到 Objective C[的 C# 中删除行注释。](https://stackoverflow.com/questions/3524317/regex-to-strip-line-comments-from-c-sharp/3524689)

它没有那么优雅或写得很好，我很想得到关于如何改进它的反馈，所以我会把它作为答案发布，希望它对某人有所帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T20:09:26.013

好的 - 这里是：

```
+ (NSString *) stripComments:(NSString *)text{

    NSString *blockComments = @"/[*](.*?)[*]/";
    NSString *lineComments = @"//(.*?)\r?\n";
    NSString *strings = @"\"((\\[^\n]|[^""\n])*)\"";
    NSString *verbatimStrings = @"@(\"[^\"]*\")+";
    NSMutableArray *removes = [NSMutableArray array];

    NSError *error = NULL;
    NSRegularExpression *regexComments = [NSRegularExpression regularExpressionWithPattern:[NSString stringWithFormat:@"%@|%@|%@|%@",blockComments,lineComments,strings,verbatimStrings] options:NSRegularExpressionCaseInsensitive | NSRegularExpressionDotMatchesLineSeparators
                                                                              error:&error];

    NSArray* matches = [regexComments matchesInString:text options:0 range:NSMakeRange(0, text.length)];

    for (NSTextCheckingResult* match in matches){

        NSString *outer = [text substringWithRange:[match range]];
        if([outer hasPrefix:@"/*"] || [outer hasPrefix:@"//"]){
            [removes addObject:outer];
        }
    }

    for(NSString *match in [removes valueForKeyPath:@"@distinctUnionOfObjects.self"]){
        text = [text stringByReplacingOccurrencesOfString:match withString:@""];
    }

    return text;
} 
```

# ruby - ruby 2.0，为什么#each_line 变异文件对象

> ID：15979990
> 
> 赞同：0
> 
> 时间：2013-04-12T20:06:37.693
> 
> 标签：ruby, file, printing, each, mutated

我将 irb 作为一次性文本预处理工具运行。我在打印文本时遇到了直接的麻烦。

```
foo = File.open "bar"
foo.each_line {|l| puts l} 
```

这按预期打印并返回`#<File:emails plaintext>`。

但是，如果我`#each_line`再次调用同一个对象，则不会发生打印，尽管它仍然返回`#<File:emails plaintext>`.

为什么`File`对象的内容被调用覆盖`#each_line`？我认为类似方法的存在理由`#each`是确保不会发生突变。这样做的正确“红宝石方式”是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:11:08.037

你必须[倒带它](http://ruby-doc.org/core-2.0/IO.html#method-i-rewind)：`foo.rewind`。

考虑`$stdin.each_line`应该如何表现。由于 IO 对象可能是磁盘上的文件，也可能是流或管道，因此保证您可以在其中随机搜索是没有意义的。如果要迭代多次，请将其加载到数组中。

# scala - 为什么可以在 .map(println) 等表达式中省略参数？

> ID：15979991
> 
> 赞同：1
> 
> 时间：2013-04-12T20:06:40.470
> 
> 标签：scala, syntax

我有一个字符串列表

```
val myStrings = List("One", "Two", "Three") 
```

我想检查列表是否包含我所做的字符串。

```
myStrings.exists("One".contains) 
```

我从谷歌搜索得到这个。但我想了解它。

我看你能做到`"One".contains("O")`

检查`One`包含`O`有道理。但是我不明白传递给 myStrings.exists 时没有参数是如何工作的。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T20:10:57.817

这是速记，或“语法糖”。

我相信你已经看到了`List("A","B").foreach(println)`。

同理，只有一个参数就不需要指定了。

`myStrings.exists("One".contains)`简写也是

```
myStrings.exists("One" contains _) 
```

它本身就是完整函数文字的简写

```
myStrings.exists(x => "One" contains x) 
```

请注意，这不会检查您的列表是否`contains`为`String`“One”，它会检查您是否`List`包含`String`包含*在*“One”中的 a。

您可能只需要`contains`在`List`.

另请注意，`contains`on`List`是 O(n)。相同的方法`Set`是 O(1) - 即恒定时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T01:57:58.937

将 Function1 传递给需要 Function1 的函数或方法时，*可以*省略下划线。

`List#foreach`期望 a `Function1[X,Unit]`，所以你可以说`myList.foreach(println)`代替`myList.foreach(println(_))`or `myList.foreach(x => println(x))`。

相似地：

```
scala> val xs = List("a","b","c")
xs: List[String] = List(a, b, c)

scala> val set = Set("c","d","e")
set: scala.collection.immutable.Set[String] = Set(c, d, e)

scala> xs.filter(set.contains)
res0: List[String] = List(c) 
```

# c# - C# 中的简单 SELECT 抛出“'=' 附近的语法不正确”

> ID：15979996
> 
> 赞同：0
> 
> 时间：2013-04-12T20:06:57.880
> 
> 标签：c#, asp.net, sql, sql-server

我正在尝试使用**SqlDataReader从我的数据库中获取数据**

但是我收到一个语法错误**“System.Data.SqlClient.SqlException：'=' 附近的语法不正确”**，我不知道它是怎么回事。

这是我的代码

```
cmd = new SqlCommand("Select Submission_Attachment as Path from Tasks where Submission_FileName =" + FileName, con);
reader = cmd.ExecuteReader();
while (reader.Read())
{
   FilePath = reader["Path"].ToString();
   TextBox1.Text = FilePath;
} 
```

在**reader = cmd.ExecuteReader();处显示错误**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T20:08:17.627

使用参数来避免 SQL 注入。

您当前的字符串没有被单引号引起来，这会导致错误。

```
string sqlText = "Select Submission_Attachment as Path from Tasks where Submission_FileName = @fileName";
cmd = new SqlCommand(sqlText, con);
cmd.Parameters.AddWithValue("@fileName", FileName);
reader = cmd.ExecuteReader(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T20:08:39.273

`Submission_FileName`可能是一个字符串（varchar）字段。您需要将值括在单引号中：

```
cmd = new SqlCommand("Select Submission_Attachment as Path from Tasks where Submission_FileName = '" + FileName + "'", con); 
```

您仍然需要使用参数化查询来抵消 SQL 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T20:12:45.387

```
cmd = new SqlCommand("Select Submission_Attachment as Path from Tasks where Submission_FileName = @filename", con);
cmd.Parameters.Add("@filename", SqlDbType.VarChar, [varchar length here]).Value = FileName;
reader = cmd.ExecuteReader();
while (reader.Read())
{
   FilePath = reader["Path"].ToString();
   TextBox1.Text = FilePath;
} 
```

# jboss - java.util.logging 和 log4j

> ID：15979999
> 
> 赞同：0
> 
> 时间：2013-04-12T20:07:08.120
> 
> 标签：jboss, log4j, java.util.logging

我的应用程序已经在使用 Java.Util 日志记录，我无法控制将其更改为**SLF4J**。它部署到 JBoss 5.1，我需要控制消息的日志级别。在 java.util.logging 中，级别与 log4j 不同。

我的源代码中有以下内容。

`logger.log(Level.FINE,"a debug level message")`

`...`

`logger.log(Level.INFO,"info level message")`

目前它在 System.out 中显示 INFO 级别的消息，我的 jboss-log4j.xml 如下所示。如果我需要显示**调试**级别消息，我应该如何更改 jboss-log4j.xml ？

```
<appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
  <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
  <param name="Target" value="System.out"/>
  <param name="Threshold" value="INFO"/>

  <layout class="org.apache.log4j.PatternLayout">
     <!-- The default pattern: Date Priority [Category] Message\n -->
     <param name="ConversionPattern" value="%d{ABSOLUTE} %-5p [%c{1}] %m%n"/>
  </layout>
</appender> 
```