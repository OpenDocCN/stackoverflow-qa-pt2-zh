# StackOverflow 问答 14207000-14207999

# delphi - Delphi中的字符串：在简单情况下预分配内存以提高性能？

> ID：14207000
> 
> 赞同：3
> 
> 时间：2013-01-08T01:37:51.413
> 
> 标签：delphi, optimization, delphi-xe2, string-concatenation

我是那些在没有真正理解甚至没有考虑基础知识的情况下就使用 Delphi 的所谓开发人员之一。在这种情况下，我说的是**字符串**。

虽然我确实了解**预分配内存**如何导致显着的速度提升。我不明白如何在简单的真实案例中使用它（对于 TStringBuilder 更是如此）。

例如，假设我有这样的代码递归搜索文件夹并将结果添加到哈希列表：

```
var
   FilesList : TDictionary<String, Byte>;  // Byte = (file = 0, folder = 1)

// ------------------------------------------------------------------------------ //
procedure AddFolder(const AFolderName : String);
var
   FileName : String;
   AHandle  : THandle;
   FindData : TWin32FindData;
begin
     AHandle := FindFirstFile(PChar(AFolderName + '*'), FindData);
     if (AHandle = INVALID_HANDLE_VALUE) then
        Exit;

     repeat
           if (FindData.dwFileAttributes And FILE_ATTRIBUTE_DIRECTORY = 0) then
           begin
                { Add a file. }
                FileName := FindData.cFileName;
                FilesList.Add(AFolderName + FileName, 0);
           end
           else if ((FindData.cFileName[0] <> '.') OR Not ((FindData.cFileName[1] = #0) OR (FindData.cFileName[1] = '.') And (FindData.cFileName[2] = #0))) then
           begin
                FileName := AFolderName + FindData.cFileName + '\';
                FilesList.Add(FileName, 1);
                AddFolder(FileName);
           end;
     until Not FindNextFile(AHandle, FindData);

     Windows.FindClose(AHandle);
end; 
```

我不确定这是否是一个很好的例子，但在这种情况下，我不清楚为变量预分配内存如何`FileName`有助于提高执行速度，尤其是我对它的长度一无所知。**假设这是可能的，怎么办？**

还是**仅在连接/构建字符串时才使用预分配技术？**

* * *

**关于我的问题的注释：**

1.  问题主要针对**XE2**，但请随意参考其他 delphi 版本，因为我确信其他开发人员将从分享智慧中受益（也就是说，假设 mods 不会将其删除为健谈或主观）

2.  我对需要通过优化字符串内存预分配**在非常大的循环/大量数据中进行微优化的****简单日常案例更感兴趣。**

 *** * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T01:49:08.023

直接的字符串连接（例如）可能会很慢，因为字符串的内存是为每个附加的片段重新分配的。有时新大小实际上可以就地容纳，但有时必须将数据复制到新位置，释放旧缓冲区，等等。这需要时间。

不过，一般来说，除非您已使用性能分析器或明确的时序声明确认您确实存在性能问题，否则您应该不会担心这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T12:10:47.407

当然，您在不了解字符串的真正工作原理的情况下就逃脱了：Delphi 在这方面非常出色，它的字符串操作非常有效，它的内存管理器对于小内存块也非常有效。你可以用 Delphi 做很多事情，并且对字符串操作没有问题。

您应该注意某些类别的问题，特别是如果您正在查看的例程将被重用（库代码）。

例如，这应该*总是*引发一个标志：

```
Result := '';
for i:=1 to N do
  Result := Result + Something; // <- Recursively builds the string, one-char-at-a-time 
```

如果不经常使用或在时间不重要的情况下使用，即使这也可能与 Delphi 一起使用。尽管如此，应该优化这种代码，以便预先分配字符串的整个（可能）长度，然后在结束时修剪：

```
SetLength(Result, Whatever);
for i:=1 to N do
  Result[i] := SomeChar;
SetLength(Result, INowKnowTheLength); 
```

现在举一个`TStringBuilder`闪耀的例子。如果你有这样的事情：

```
var Msg: string;
begin
  Msg := 'Mr ' + MrName + #13#10;
  if SomeCondition then
    Msg := Msg + 'We were unable to reach you'
  else
    Msg := Msg + 'We need to let you know';
  Msg := Msg + #13#10 
end; 
```

即：构建一个复杂（并且可能很大）消息的代码，然后您可以使用以下方法*轻松*优化它`TStringBuilder`：

```
var Msg: TStringBuilder;
begin
  Msg := TStringBuilder.Create;
  try
    Msg.Append('Mr ');
    Msg.Append(MrName);
    Msg.Append(#13#10);
    if SomeCondition then
      Msg.Append('We were unable to reach you')
    else
      Msg.Append('We need to let you know');
    Msg.Append(#13#10);
    ShowMessage(Msg.ToString); // <- Gets the whole string
  finally Msg.Free;
  end;
end; 
```

无论如何，始终在易于编写、易于维护和性能的真正好处之间取得平衡。不要超出您编写的代码的自然限制：优化字符串生成例程以使其比 HDD 可以写入的速度更快是浪费精力。优化一些 GUI 代码以在 1 毫秒（而不是 20 毫秒）内生成消息也是浪费精力 - 用户永远不会知道您的代码快 20 倍，它会是即时的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T10:29:51.680

基本上，您正在谈论的是这些串联：

```
AFolderName + '*'
AFolderName + FindData.cFileName
AFolderName + FindData.cFileName + '\' 
```

第一个执行一次，循环执行第二个和第三个。

System.pas 中的这些方法在内部用于 3 行：

```
procedure _UStrCat3(var Dest: UnicodeString; const Source1, Source2: UnicodeString);
procedure _UStrCat3(var Dest: UnicodeString; const Source1, Source2: UnicodeString);
procedure _UStrCatN(var Dest: UnicodeString; ArgCnt: Integer; const Strs: UnicodeString); varargs; 
```

由于 3 个值不同，因此您无法仅使用一个表达式对其进行优化。

所有函数都会预先计算最终长度，并在需要时进行适当的分配工作。

在循环内部，您可能会尝试自己进行预分配`AFolderName + FindData.cFileName + '\'`，然后取出该`AFolderName + FindData.cFileName`部分，但是您需要为`then`案例分配 2 次。

所以我认为你的代码不能得到进一步优化（即你不能让它更好地执行一个数量级）。**

# java - 警告 ArrayList 是原始类型。对泛型类型 ArrayList 的引用 应该参数化

> ID：14207005
> 
> 赞同：29
> 
> 时间：2013-01-08T01:38:36.683
> 
> 标签：java, list, generics

> **可能重复：**
> [ArrayList 是原始类型。应参数化对泛型类型 ArrayList<E> 的引用](https://stackoverflow.com/questions/13045788/arraylist-is-a-raw-type-references-to-generic-type-arrayliste-should-be-param)

为了保存由一个成员完成的付款的 ArrayList，我想将付款 ID 列表更改为字符串，因此我创建了以下方法：

```
public String fromArraytoString(ArrayList items){
       JSONObject json = new JSONObject();
        json.put("uniqueArrays", new JSONArray(items));
        return json.toString();
           } 
```

但我收到以下警告：

```
 ArrayList is a raw type. References to generic type ArrayList<E> should be parameterized 
```

谁能解释我为什么？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-08T01:49:21.220

**您绝对应该阅读本关于 Java 泛型的教程**：http : [//docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)

**简而言之：**

许多 Java 类和类型（称为*泛型类*或*泛型类型*），通常是集合，具有所谓的*类型参数*，例如`E`in `ArrayList<E>`（`E`只是一个任意选择的名称，其他类将其命名为`T`或其他名称）：

```
public class ArrayList<E> extends ... {

    public E get(int index) { ... }

    public boolean add(E element) { ... }

    // other methods...
} 
```

现在，当您创建此类的实例时，您定义了类型参数的具体值，例如`String`（`E`通常可以评估为您想要的任何类型）：

```
ArrayList<String> stringList = new ArrayList<String>(); 
```

从现在开始，所有的`E`s 都被“替换”`String`为`stringList`变量，所以你可以只向它添加字符串，并且只能从中获取字符串。编译器会检查您是否错误地添加了另一种类型的对象：

```
stringList.add(Integer.valueOf(1));
// compile error - cannot add Integer to ArrayList of Strings 
```

* * *

但是，由于 Java 5 中添加了泛型，因此仍然可以在没有它们的情况下编写代码以实现向后兼容性。所以你可以写：

```
ArrayList list = new ArrayList(); 
```

但是你失去了所有类型检查的好处。`E`方法签名中的 s 变成了简单`Object`的 s。

```
list.add(Integer.valueOf(42)); // adding an Integer
list.add("aaa"); // adding a String

Object something = list.get(0); // unknown type of returned object, need to cast
Integer i0 = (Integer) something; // this unsafe cast works...
Integer i1 = (Integer) list.get(1); // but this fails with a ClassCastException
// because you cannot cast a String to Integer 
```

使用*原始类型*（即省略了类型参数的泛型类型）是不安全的，这就是您收到警告的原因。而不是 just `ArrayList`，使用`ArrayList<String>`or`ArrayList<Integer>`或任何你的类型`items`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T01:44:32.403

ArrayList 中存储了哪些类型的对象？您需要将其添加到声明中。总是如此

```
ArrayList<Type> 
```

所以如果它是 JSONObjects 的列表，你会放

```
ArrayList<JSONObject> 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T01:46:04.523

这是因为 Java 编译器会尝试为您进行某些检查。您编写它的方式有效地告诉编译器您将收到对象的 ArrayList 作为参数。它只是鼓励您指定要存储在 ArrayList 中的对象类别。指定`ArrayList<MyClass>`or`ArrayList <?>`将摆脱警告。第二个版本有效地告诉编译器您将传递在编译时未知的类对象的 ArrayList。

我认为阅读一些有关 Java 泛型的知识可能对您有用。 [http://docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T01:46:47.613

`JsonArray`的构造函数期望接收`Collection`带有参数的泛型类型`T`，而`items`' 的类型`ArrayList`没有指定类型（即原始类型）。您可以查看这个问题以了解原始类型：[什么是原始类型，我们为什么不应该使用它？](https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it)

`items`解决方案 1（推荐）：带参数传递`T`或指定具体类型，例如`String`. 这个问题可能会对您的具体问题有所帮助：[将 ArrayList<MyCustomClass> 转换为 JSONArray](https://stackoverflow.com/questions/4841952/convert-arraylist-to-jsonarray)。

解决方案2：`@SuppressWarnings("unchecked")`在方法之前添加`fromArraytoString`。不推荐这样做，但是可以参考这个问题：[What is SuppressWarnings ("unchecked") in Java?](https://stackoverflow.com/questions/1129795/what-is-suppresswarnings-unchecked-in-java)

# ios - 每次应用注册时都会调用 didRegisterForRemoteNotificationsWithDeviceToken 吗？

> ID：14207008
> 
> 赞同：2
> 
> 时间：2013-01-08T01:38:46.867
> 
> 标签：ios, push-notification

标题说明了一切......我在每次应用启动时都会调用 registerForRemoteNotificationTypes。它第一次工作得很好。得到了一个设备令牌，但我所做的只是 NSLog 它。

现在再次运行应用程序... didRegister* 和 didFail* 回调都没有被执行。我的代码/网络没有任何变化。

这是正确的行为吗？我在 StackOverflow 上看到了相互矛盾的答案。 [这个 SO 答案](https://stackoverflow.com/questions/10983536/when-is-didregisterforremotenotificationswithdevicetoken-called)意味着 didRegister* 回调应该每次都发生。有人说你永远不应该缓存设备令牌。好吧，那很好……但是我第一次得到令牌时没有对我的令牌做任何事情，所以现在它丢失了？？？通常，应用程序当然应该将令牌推送到我的推送通知服务器，但我只是在这里处于开发阶段并没有这样做。所以现在这个令牌丢失了，我的应用程序不会收到另一个？这似乎很奇怪，因为 Apple 文档说在每次应用启动时调用 registerForRemoteNotificationTypes！如果您每次都没有取回新的（或回收的）令牌，那么这有什么意义呢？还是这里发生了其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:28:37.313

didRegisterForRemoteNotificationsWithDeviceToken 应该每次都执行。

我的手机一定是处于奇怪的状态。我终于注意到，在 Notifications Center 中，列出了该应用程序，但应用程序名称下方没有 Badges、Alerts 或 Sounds 文本。我手动编辑了设置并启用了这些通知。然后下次我运行应用程序时，触发了 didRegister 回调。

无法通过禁用警报/徽章/声音来复制不良状态。每次仍然收到回调。要把这归结为侥幸。

# android - 在 Eclipse 之外使用 ADT Android 设计器？

> ID：14207009
> 
> 赞同：0
> 
> 时间：2013-01-08T01:39:02.877
> 
> 标签：android, eclipse, android-layout, adt

是否可以在 Eclipse 之外使用 ADT Android 布局设计器？如果是这样，有什么必要这样做？

我意识到 ADT 是 Eclipse 的一个插件，但我希望通过少量的黑客攻击，它可以在 Eclipse 环境之外使用。甚至只是能够编辑一个 Android 布局，而无需它成为 Eclipse Android 项目的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:18:38.193

您可以使用 droid draw 来修改 Eclipse 之外的布局。[http://droiddraw.org/](http://droiddraw.org/)

# netty - Netty 4.0 频道本地

> ID：14207014
> 
> 赞同：3
> 
> 时间：2013-01-08T01:39:57.307
> 
> 标签：netty

我正在使用 Netty 4（alpha8）。

我想在管道中的 ChannelHanders 之间共享一些数据，在以前版本的 Netty 中，我想我会使用 ChannelLocal，是否有 Netty 4 等价物？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T04:11:38.760

在我发布我的问题后不久就找到了答案。

我需要使用 Channel 上可用的属性映射：

[http://netty.io/wiki/new-and-noteworthy.html](http://netty.io/wiki/new-and-noteworthy.html)

# linux - 文件名匹配，数字和字符区分

> ID：14207015
> 
> 赞同：1
> 
> 时间：2013-01-08T01:39:57.290
> 
> 标签：linux, string, bash, shell, match

我有一个包含很多文件的文件夹，一些文件的名称类似于 file_1 file_10 file_21 file_345 其他类似于 file_fr file_de file_cn 我想将第一种类型的文件移动到另一个文件夹中，例如

```
mv file_* another_folder 
```

但 file_* 将匹配所有文件

有什么好的剧本吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:42:49.883

尝试这个

```
mv file_[0-9]* another_folder 
```

回应[**格伦杰克曼的评论**](https://stackoverflow.com/questions/14207015/file-name-matching-differentiation-with-numbers-and-characters/14207051#comment19703602_14207051)

```
ls | grep 'file_[0-9]*$' | xargs mv -t another_folder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T05:41:25.410

重击：

```
shopt -s extglob
mv file_+([0-9]) .. 
```

[http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)

# iphone - 计算 UIView 的比例

> ID：14207018
> 
> 赞同：1
> 
> 时间：2013-01-08T01:40:06.620
> 
> 标签：iphone, ios, cocoa-touch, cgaffinetransformscale

假设我的当前规模`UIView`是`x`。`UIView`假设我对我的金额应用比例转换，`y`即：

```
view.transform = CGAffineTransformScale(view.transform, y, y); 
```

. 我如何确定`UIView`发生比例转换后的比例值是多少（根据`x`和`y`？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:43:46.663

缩放通过乘法组合，平移（移动）通过加法，旋转是矩阵乘法。所有这三个都可以组合成一个 AffineTransformation（一个比空间维度多 1 行的矩阵），它们通过矩阵乘法组合。2D AffineTransformations 是 3x2 或 3x3 矩阵，额外的列只是让它们更容易使用。

编辑：使用更清晰的名称：如果他当前的比例是 currxs、currys 并且应用的比例是 xs、ys，那么新的比例将是 currxs*xs、currys*ys。请注意，应用比例也会缩放包含在 AffineTransformation 中的任何平移组件，这就是应用顺序很重要的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:43:51.603

比例变换将当前比例与您的比例 y 相乘。如果视网膜的比例为 2.0，则之后为 y* 2.0。
所以 x*y 就是答案。但不要忘记 x.achsis 比例和 y achsis 可以不同。
x, 和 y 的比例令人困惑，最好使用 s1 和 s2，或者 sx, sy 如果你的 y 和 x achsis 有不同的比例，在你的代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T02:27:26.373

如果您只使用 CGAffineTransformScale 而不是其他转换（如旋转），它非常简单，您可以使用视图框架和边界大小来计算生成的比例值。

```
float scaleX = view.frame.size.width/view.bounds.size.width;
float scaleY = view.frame.size.height/view.bounds.size.height; 
```

# wpf - 将组合框绑定到数据网格的 MVVM 问题

> ID：14207021
> 
> 赞同：1
> 
> 时间：2013-01-08T01:40:27.053
> 
> 标签：wpf, mvvm, binding, datagrid, combobox

我有一种主/详细信息视图。我有一些文本框和一个组合框绑定到数据网格的选定项。我想要的是文本框和组合框，用于在选择一行时填充数据网格中的数据。这部分工作正常。我遇到的问题是当我更改组合框的值时，数据网格字段没有更新。我已经实现了 INotifyPropertyChanged，但似乎我有问题。数据网格包含用户类型的记录，相关的组合框包含角色类型的记录。User 实体具有到 RoleID 的导航属性。如何确保在更改详细信息中的角色组合框时数据网格会更新？

谢谢，

RG

这是 XAML ......

```
<UserControl x:Class="Compliance.Views.UserAdministrationView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:local="clr-namespace:Compliance"
         xmlns:views="clr-namespace:Compliance.Views"
         xmlns:helpers="clr-namespace:Compliance.Helpers"
         xmlns:vm="clr-namespace:Compliance.ViewModels"
         xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
         mc:Ignorable="d" 
         d:DesignHeight="1000" d:DesignWidth="800">
<UserControl.Resources>
    <helpers:ActiveStatusConverter x:Key="ActiveStatusConverter"/>
</UserControl.Resources>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Row="0" Margin="15">
        <Label Content="User" Height="25" FontSize="14" HorizontalContentAlignment="Center" />
        <Grid HorizontalAlignment="Center" VerticalAlignment="Top" DataContext="{Binding ElementName=usersDG, Path=SelectedItem, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" MinHeight="35" />
            </Grid.RowDefinitions>
            <telerik:Label Content="User Name: " Grid.Column="0" Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Center" />
            <TextBox Grid.Column="1" Grid.Row="0" MinHeight="23" HorizontalAlignment="Left" VerticalAlignment="Center" MinWidth="180" MaxWidth="180" >
                <TextBox.Text>
                    <Binding Path="UserName" Mode="TwoWay" ValidatesOnDataErrors="True" NotifyOnValidationError="True" UpdateSourceTrigger="PropertyChanged"/>
                </TextBox.Text>                    
            </TextBox> 
            <telerik:Label Content="First Name: " Grid.Column="2" Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Center" />
            <TextBox Grid.Column="3" Grid.Row="0" MinHeight="23" HorizontalAlignment="Left" VerticalAlignment="Center" MinWidth="180" MaxWidth="180">
            <TextBox.Text>
                <Binding Path="FirstName" Mode="TwoWay" ValidatesOnDataErrors="True" NotifyOnValidationError="True" UpdateSourceTrigger="PropertyChanged"/>
            </TextBox.Text>
            </TextBox>
            <telerik:Label Content="Last Name: " Grid.Column="4" Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Center" />
            <TextBox Grid.Column="5" Grid.Row="0" MinHeight="23" HorizontalAlignment="Left" VerticalAlignment="Center" MinWidth="180" MaxWidth="180">
            <TextBox.Text>
                <Binding Path="LastName" Mode="TwoWay" ValidatesOnDataErrors="True" NotifyOnValidationError="True" UpdateSourceTrigger="PropertyChanged"/>
            </TextBox.Text>
            </TextBox>
            <telerik:Label Content="Email: " Grid.Column="0" Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Center" />
            <TextBox Grid.Column="1" Grid.Row="1" MinHeight="23" HorizontalAlignment="Left" VerticalAlignment="Center" MinWidth="180" MaxWidth="180">
                <TextBox.Text>
                    <Binding Path="Email" Mode="TwoWay" ValidatesOnDataErrors="True" NotifyOnValidationError="True" UpdateSourceTrigger="PropertyChanged"/>
                </TextBox.Text>
            </TextBox>
            <telerik:Label Content="Active Status: " Grid.Column="2" Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Center" />
            <telerik:RadComboBox x:Name="comBoxActiveStatus" Grid.Column="3" Grid.Row="1" MinHeight="23" MinWidth="180" HorizontalAlignment="Left" VerticalAlignment="Center"
                    SelectedItem="{Binding Path=ActiveStatus, 
                                    Converter={StaticResource ResourceKey=ActiveStatusConverter}, 
                                    Mode=TwoWay, 
                                    ValidatesOnExceptions=True, 
                                    NotifyOnValidationError=True,
                                    UpdateSourceTrigger=PropertyChanged}"
                    EmptyText="Please Set Active Status">
            </telerik:RadComboBox>
            <telerik:Label Content="Role: " Grid.Column="4" Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Center" />
            <telerik:RadComboBox x:Name="cmbRoles" 
                        Grid.Column="5" 
                        Grid.ColumnSpan="3"
                        Grid.Row="1" 
                        MinHeight="23" 
                        HorizontalAlignment="Left" 
                        Margin="5" 
                        VerticalAlignment="Center" 
                        MinWidth="180" 
                        ItemsSource="{Binding}" 
                        DisplayMemberPath="RoleName" 
                        SelectedValue="{Binding RoleID, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        SelectedValuePath="RoleID"
                        EmptyText="Please Choose A Role">
            <telerik:RadComboBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <VirtualizingStackPanel />
                </ItemsPanelTemplate>
            </telerik:RadComboBox.ItemsPanel>
            </telerik:RadComboBox>
            <Button Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="3" Content="Save User" Width="100"  />
            <Button Grid.Column="4" Grid.Row="2" Grid.ColumnSpan="3" Content="Add User"  Width="100"  />
        </Grid>
    </StackPanel>
    <Border CornerRadius="10" BorderThickness="5" Grid.Row="1" VerticalAlignment="Top" HorizontalAlignment="Center">
        <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Label Content="Users" Grid.Row="0" Height="25" FontSize="14" HorizontalContentAlignment="Center" />
            <telerik:RadGridView x:Name="usersDG" ItemsSource="{Binding Users}" AutoGenerateColumns="False" ShowGroupPanel="False" IsReadOnly="True">
                <telerik:RadGridView.Columns>
                    <telerik:GridViewDataColumn DataMemberBinding="{Binding UserName}" Header="User Name" />
                    <telerik:GridViewDataColumn DataMemberBinding="{Binding FirstName}" Header="First Name" />
                    <telerik:GridViewDataColumn DataMemberBinding="{Binding LastName}" Header="Last Name" />
                    <telerik:GridViewDataColumn DataMemberBinding="{Binding Email}" Header="Email" />
                    <telerik:GridViewDataColumn DataMemberBinding="{Binding Role.RoleName, Mode=TwoWay}" Header="Role Name" />
                    <telerik:GridViewDataColumn DataMemberBinding="{Binding ActiveStatus, Converter={StaticResource ActiveStatusConverter}}" Header="Active Status" />
                </telerik:RadGridView.Columns>
            </telerik:RadGridView>
        </Grid>
    </Border>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:34:26.957

你的`ComboBox`绑定看起来很奇怪

你有`ItemsSource="{Binding }"`这表明 DataContext`ComboBox`是 Role 对象的集合，但是你也有`SelectedValue="{Binding RoleID}`，这表明`DataContext`包含一个名为的属性`RoleId`

此外，您`GridView`绑定到，所以如果它们引用内存中的相同对象`Role.RoleName`，我希望您希望将您绑定`ComboBox.SelectedValue`到`Role.RoleId`或可能绑定`ComboBox.SelectedItem`到属性。`Role``Role`

所以我希望你的 ComboBox 绑定看起来像

```
<ComboBox ItemsSource="{Binding Source={x:Static local:StaticLists.RoleList}}"
          SelectedValue="{Binding Role.RoleID}" ... /> 
```

或类似的东西：

```
<ComboBox ItemsSource="{Binding 
              RelativeSource={RelativeSource AncestorType={x:Type views:UserAdministrationView}},
              Path=DataContext.AvailableRoles}"
          SelectedItem="{Binding Role}" ... /> 
```

我建议看看你`ComboBox.DataContext`是什么（我使用[Snoop](http://snoopwpf.codeplex.com/)来调试这样的事情），并仔细检查你的绑定是否正确

# javascript - Facebook 评论计数 IE8 innerHTML 错误

> ID：14207023
> 
> 赞同：1
> 
> 时间：2013-01-08T01:40:29.403
> 
> 标签：javascript, facebook, internet-explorer-8

在 Internet Explorer 8 上，在有评论计数标记的页面上，`<fb:comments-count href="<%= item_url(@item) %>"></fb:comments-count>`Internet Explorer 8 会出现错误。

> 无法设置 innerHTML：未知的运行时错误。
> 行：40，字符：327
> [http://connect.facebook.net/en_US/all.js](http://connect.facebook.net/en_US/all.js)

所有其他 Facebook 插件（如按钮、评论框）都按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T01:40:29.403

我发现 facebook 命名空间声明必须在头部级别。

我从

```
<html>
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object#"> 
```

至

```
<html xmlns:fb="http://ogp.me/ns/fb#">
  <head prefix="og: http://ogp.me/ns# object: http://ogp.me/ns/object#"> 
```

并且错误消失了。

我在关注[Open Graph 命名空间声明：HTML with XMLNS or head prefix?](https://stackoverflow.com/questions/8235687/open-graph-namespace-declaration-html-with-xmlns-or-head-prefix) 但是 ie8 的 use-prefix-all-the-way 显然有一些问题。

**更新**

我意识到我错误地使用了`<fb:comments-count>`标签也是错误的，而我`<div class="fb-comments-count">`在所有其他地方都使用了 HTML5 标签。

如果我保留命名空间声明，但使用正确的 HTML5 注释标签，那么错误也会消失。

# java - Android App搜索网站并显示信息

> ID：14207032
> 
> 赞同：-1
> 
> 时间：2013-01-08T01:41:29.703
> 
> 标签：java, android, search, information-retrieval

我将如何编写一个将上线的 Android 应用程序，例如搜索某个国家/地区的首都（用户在应用程序的搜索栏中输入国家/地区名称），并显示该国家/地区的名称应用程序内的资本？假设有一个在线网站有这些信息——你可以去那里，输入一个国家的名字，它会给你资本——我的应用程序是否可以搜索那个网站（显然是在后台）获取信息并在应用程序中向用户显示？或者也许只是通过谷歌搜索获取信息？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:58:48.173

简短的回答：是的，这是可能的。

更长的答案是 - 你需要找到一个可以帮助你的 API。Wolfram alpha 可能正是您所需要的。看看这里：[http ://products.wolframalpha.com/api/](http://products.wolframalpha.com/api/)

iPhone 版 Siri 使用相同的 API。

# php - 无法通过 jquery 更改表单操作

> ID：14207033
> 
> 赞同：3
> 
> 时间：2013-01-08T01:41:30.827
> 
> 标签：php, javascript, jquery, forms, submit

我试图在使用 jquery 提交期间将我的表单操作更改为另一个链接。请查看以下代码：

javascript

```
$(document).ready(function(){
    $("form[name='search']").submit(function(e){
        var submit=$(this);
        submit.attr('action','?search='+submit.find("input[name='tsearch']").val());
    });
}); 
```

HTML/PHP

```
 <form name="search" method="post">
          <input class="inputbox" type="text" name="tsearch" value="<?php echo $text_search; ?>" /> 
```

虽然我似乎无法让它工作。这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T01:52:54.770

这是一个工作示例：http: [//jsfiddle.net/RmKDT/4/](http://jsfiddle.net/RmKDT/4/)

您可以通过警报看到操作正在发生变化。您只需要重新提交表格即可。

编辑：修复了潜在的无限循环

```
$(function(){

  var submitted = false;
  $('form').submit(function(e){

    if (submitted == true) {

      return;

    }
    e.preventDefault();
    var action = $(this).attr('action');

    alert(action);

    $(this).attr('action', 'two.php');
    action = $(this).attr('action');

    alert(action);

    submitted = true;
    // resubmit the form
    $(this).submit();

  });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T01:47:03.920

您的代码似乎很好。您可以尝试做一些事情来使其正常工作。

1.  确保您的脚本被拉入页面，一种检查方法是使用 Chrome 调试器中的“源”选项卡并在 html 头部分中搜索其他文件

2.  确保在包含 jQuery 之后包含了 datatale 脚本，因为它肯定依赖于它。

3.  检查是否正确包含 jQuery，并且只包含一次。

4.  注意 jQuery 冲突。还有一些其他库覆盖了 $，因此您的代码无法正常工作，因为 $ 不再是 jQuery 的别名。您可以使用它`jQuery.noConflict()`来避免与页面上使用相同变量 $ 的其他库发生冲突。

5.  `alert('?search='+submit.find("input[name='tsearch']").val())`看看你是否得到了你想要的价值。

# android - Android：尝试扩展 ScrollView 以适应屏幕上的空白，即使我只有一行文本

> ID：14207034
> 
> 赞同：0
> 
> 时间：2013-01-08T01:41:31.657
> 
> 标签：android, textview, scrollview

所以我想做的是能够点击我的TextView。我的 ScrollView 中有一个 TextView，我正在尝试制作它，所以当我点击屏幕时会发生一个事件。目前，当我点击我的 TextView 时，该事件将会发生。但是，问题就出在这里：当我只有一行文字时，我必须点击那一行文字才能检测到onTouch。我想扩展我的 TextView 以覆盖屏幕上的空白区域（我的屏幕底部有两个按钮）。使用真正的手势控制的问题在于，当我点击屏幕上的按钮时，它也会检测到，这使得它对单击毫无用处。我一直试图弄清楚这一点，但由于某种原因它不起作用。这是我的代码。

```
 @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()){
            case R.id.close:
                finish();
                break;  
            case R.id.flashcard:
                if(tv.getText().equals(myCursor.getString(iFront)))      {
                    tv.setText(myCursor.getString(iBack));
                    break;
                }
                tv.setText(myCursor.getString(iFront));
                break;
            case R.id.add_new:
                Intent list = new Intent("com.example.flashcards.ADD_FLASHCARD");
                startActivity(list);
                break;
        }
    }

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ScrollView 
    android:id="@+id/scrollable"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight=".1"
    android:gravity="center">
    <TextView
        android:id="@+id/flashcard"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:scrollbars="vertical"
        android:textSize="20dp" />
</ScrollView>
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/add_new"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.55"
        android:text="Add New" />

    <Button
        android:id="@+id/close"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.55"
        android:text="close" />
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T01:57:37.973

你想[`fillViewport`](http://developer.android.com/reference/android/widget/ScrollView.html#attr_android%3afillViewport)为`true`你的`ScrollView`. [Romain Guy 在这里](http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/)有更深入的解释。

# java - 如果再次选择项目，则微调器

> ID：14207035
> 
> 赞同：1
> 
> 时间：2013-01-08T01:41:39.610
> 
> 标签：java, android, android-spinner

我在我的包中创建了一个名为 NoDefaultSpinner 的类文件。但是，当我尝试在我的 Android 应用程序中使用它时，我得到了一个导致程序崩溃的异常。

[我从这个链接](https://stackoverflow.com/questions/5335306/how-can-i-get-an-event-in-android-spinner-when-the-current-selected-item-is-sele)复制了 Dimitar Vukman 和 Blundell 提供的代码，然后按照 Alex Miragall 的指示更新了这段代码（因为现在我正在为 Android 4.0 创建一个应用程序）。我删除了 Dimitar 的 onClick 方法，并将 Alex 的代码粘贴到了课程的最后。

然后我用微调器编辑了我的活动，我改变了

```
static Spinner spinner1; 
```

至

```
static NoDefaultSpinner spinner1; 
```

和

```
variables.spinner1 = (Spinner) findViewById(R.id.spinner1); 
```

至

```
variables.spinner1 = (NoDefaultSpinner) findViewById(R.id.spinner1); 
```

我也试图改变

```
<Spinner
        android:id="@+id/spinner1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/place" /> 
```

至

```
<NoDefaultSpinner
        android:id="@+id/spinner1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/place" /> 
```

问题：我做错了什么，为什么我的应用程序崩溃了，我可以做些什么来让它正常工作？

如果我不更新布局，这些是错误：

```
01-08 01:50:48.835: E/AndroidRuntime(13362): FATAL EXCEPTION: main
01-08 01:50:48.835: E/AndroidRuntime(13362): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.life/com.example.life.search_activity}: java.lang.ClassCastException: android.widget.Spinner cannot be cast to com.example.life.NoDefaultSpinner
01-08 01:50:48.835: E/AndroidRuntime(13362):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-08 01:50:48.835: E/AndroidRuntime(13362):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-08 01:50:48.835: E/AndroidRuntime(13362):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-08 01:50:48.835: E/AndroidRuntime(13362):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-08 01:50:48.835: E/AndroidRuntime(13362):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-08 01:50:48.835: E/AndroidRuntime(13362):    at android.os.Looper.loop(Looper.java:137)
01-08 01:50:48.835: E/AndroidRuntime(13362):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-08 01:50:48.835: E/AndroidRuntime(13362):    at java.lang.reflect.Method.invokeNative(Native Method)
01-08 01:50:48.835: E/AndroidRuntime(13362):    at java.lang.reflect.Method.invoke(Method.java:511)
01-08 01:50:48.835: E/AndroidRuntime(13362):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-08 01:50:48.835: E/AndroidRuntime(13362):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-08 01:50:48.835: E/AndroidRuntime(13362):    at dalvik.system.NativeStart.main(Native Method)
01-08 01:50:48.835: E/AndroidRuntime(13362): Caused by: java.lang.ClassCastException: android.widget.Spinner cannot be cast to com.example.life.NoDefaultSpinner
01-08 01:50:48.835: E/AndroidRuntime(13362):    at com.example.life.search_activity.onCreate(search_activity.java:181)
01-08 01:50:48.835: E/AndroidRuntime(13362):    at android.app.Activity.performCreate(Activity.java:5104)
01-08 01:50:48.835: E/AndroidRuntime(13362):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-08 01:50:48.835: E/AndroidRuntime(13362):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-08 01:50:48.835: E/AndroidRuntime(13362):    ... 11 more 
```

如果我更新布局，这些是错误（将 Spinner 更改为 NoDefaultSpinner）

```
01-08 01:53:22.803: E/AndroidRuntime(13417): FATAL EXCEPTION: main
01-08 01:53:22.803: E/AndroidRuntime(13417): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.life/com.example.life.search_activity}: android.view.InflateException: Binary XML file line #7: Error inflating class NoDefaultSpinner
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.os.Looper.loop(Looper.java:137)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at java.lang.reflect.Method.invokeNative(Native Method)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at java.lang.reflect.Method.invoke(Method.java:511)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at dalvik.system.NativeStart.main(Native Method)
01-08 01:53:22.803: E/AndroidRuntime(13417): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class NoDefaultSpinner
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.app.Activity.setContentView(Activity.java:1881)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at com.example.life.search_activity.onCreate(search_activity.java:177)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.app.Activity.performCreate(Activity.java:5104)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-08 01:53:22.803: E/AndroidRuntime(13417):    ... 11 more
01-08 01:53:22.803: E/AndroidRuntime(13417): Caused by: java.lang.ClassNotFoundException: Didn't find class "android.view.NoDefaultSpinner" on path: /data/app/com.example.life-1.apk
01-08 01:53:22.803: E/AndroidRuntime(13417):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:643)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
01-08 01:53:22.803: E/AndroidRuntime(13417):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
01-08 01:53:22.803: E/AndroidRuntime(13417):    ... 21 more 
```

我在堆栈上找到了两种解决我的问题的方法：

[首先](https://stackoverflow.com/questions/5335306/how-can-i-get-an-event-in-android-spinner-when-the-current-selected-item-is-sele)

[第二](https://stackoverflow.com/questions/8937150/android-spinner-fire-event-when-same-item-selection-is-made?rq=1)

我有同样的问题，有人问这些问题。问题在那里得到了很好的体现。

我尝试了所有解决方案，但每次我尝试使用这些特殊的微调器启动活动时，应用程序都会崩溃。也许我确实使用了错误的课程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T02:07:20.597

您的第一个异常是由

```
java.lang.ClassNotFoundException: Didn't find class "android.view.NoDefaultSpinner" on path: /data/app/com.example.life-1.apk 
```

`com.myPackage.NoDefaultSpinner`因此，在您的 xml 布局中使用完全限定名称 ( )。否则，Android 假定该类是它自己的包的一部分，它显然会失败。

另外，这个：

```
ClassCastException: android.widget.Spinner cannot be cast to com.example.life.NoDefaultSpinner 
```

建议`NoDefaultSpinner`不要扩展`Spinner`，确定是。

# ios - 为什么 NSOperationQueue 在主线程上处理大量任务时比 GCD 或 performSelectorOnMainThread 快？

> ID：14207036
> 
> 赞同：4
> 
> 时间：2013-01-08T01:41:40.900
> 
> 标签：ios, multithreading, grand-central-dispatch, nsoperationqueue

例如，我有 100 次 for 循环。并且需要更新UIImageView，最后2个方法一样慢。为什么？他们之间有什么不同？

```
//fastest
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
                       [btnThumb setImage:[UIImage imageWithData:data] forState:UIControlStateNormal];
                        [scrollView addSubview:btnThumb];
                   }];
//slowly
                     dispatch_async(dispatch_get_main_queue(), ^
                    {
                        [btnThumb setImage:[UIImage imageWithData:data] forState:UIControlStateNormal];
                        [scrollView addSubview:btnThumb];
                    });       
//slowly
                   [btnThumb setImage:[UIImage imageWithData:data] forState:UIControlStateNormal];
                   [self performSelectorOnMainThread:@selector(testMethod:) withObject:[NSArray arrayWithObjects:scrollView, btnThumb, nil] waitUntilDone:NO];

    -(void) testMethod:(NSArray*)objs
    {

        UIScrollView *scroll = [objs objectAtIndex:0];
        UIButton *btn = [objs lastObject];
        [scroll addSubview:btn];
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-07T14:52:14.690

为了后代，以免对此有任何疑问，让我们考虑以下测试工具，它内置在一个简单的空应用程序模板中。它使用每种机制执行 1000 次操作，并且还有一个运行循环观察器，因此我们可以看到我们排队的异步任务如何与主运行循环的旋转相关联。它记录到控制台，但异步执行，因此成本`NSLog`不会混淆我们的测量。它还在入队//任务时故意阻塞主线程`NSOperations`，`dispatch_asyncs`以便`performSelectors`入队的行为也不会干扰。这是代码：

```
#import "NSAppDelegate.h"

dispatch_queue_t gLogQueue;
#define NSLogAsync(...) dispatch_async(gLogQueue, ^{ NSLog(__VA_ARGS__); });

@implementation NSAppDelegate
{
    dispatch_group_t g;
    NSUInteger numOps;
    useconds_t usleepDuration;
}

static void MyCFRunLoopObserverCallBack(CFRunLoopObserverRef observer, CFRunLoopActivity activity, void *info);

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // parameters of test
    numOps = 1000;
    usleepDuration = 1000;

    // Set up a serial queue so we can keep the cost of calling NSLog more or less out of our test case.
    gLogQueue = dispatch_queue_create(NULL, DISPATCH_QUEUE_SERIAL);
    // Group allows us to wait for one test to finish before the next one begins
    g = dispatch_group_create();

    // Insert code here to initialize your application
    CFRunLoopObserverRef rlo = CFRunLoopObserverCreate(NULL, kCFRunLoopAllActivities, YES, 0, MyCFRunLoopObserverCallBack, NULL);
    CFRunLoopAddObserver(CFRunLoopGetCurrent(), rlo, kCFRunLoopCommonModes);
    CFRelease(rlo);

    NSCondition* cond = [[NSCondition alloc] init];

    dispatch_async(dispatch_get_global_queue(0, 0), ^{
        NSTimeInterval start = 0, end = 0;

        // pause the main thread
        dispatch_async(dispatch_get_main_queue(), ^{
            [cond lock];
            [cond signal];
            [cond wait];
            [cond unlock];
        });

        // wait for the main thread to be paused
        [cond lock];
        [cond wait];

        // NSOperationQueue
        for (NSUInteger i = 0; i < numOps; ++i)
        {
            dispatch_group_enter(g);
            [[NSOperationQueue mainQueue] addOperationWithBlock:^{
                NSLogAsync(@"NSOpQ task #%@", @(i));
                usleep(usleepDuration); // simulate work
                dispatch_group_leave(g);
            }];
        }

        // unpause the main thread
        [cond signal];
        [cond unlock];

        // mark start time
        start = [NSDate timeIntervalSinceReferenceDate];
        // wait for it to be done
        dispatch_group_wait(g, DISPATCH_TIME_FOREVER);
        end = [NSDate timeIntervalSinceReferenceDate];
        NSTimeInterval opQDuration = end - start;
        NSLogAsync(@"NSOpQ took: %@s", @(opQDuration));

        // pause the main thread
        dispatch_async(dispatch_get_main_queue(), ^{
            [cond lock];
            [cond signal];
            [cond wait];
            [cond unlock];
        });

        // wait for the main thread to be paused
        [cond lock];
        [cond wait];

        // Dispatch_async
        for (NSUInteger i = 0; i < numOps; ++i)
        {
            dispatch_group_enter(g);
            dispatch_async(dispatch_get_main_queue(), ^{
                NSLogAsync(@"dispatch_async main thread task #%@", @(i));
                usleep(usleepDuration); // simulate work
                dispatch_group_leave(g);
            });
        }

        // unpause the main thread
        [cond signal];
        [cond unlock];

        // mark start
        start = [NSDate timeIntervalSinceReferenceDate];
        dispatch_group_wait(g, DISPATCH_TIME_FOREVER);
        end = [NSDate timeIntervalSinceReferenceDate];
        NSTimeInterval asyncDuration = end - start;
        NSLogAsync(@"dispatch_async took: %@s", @(asyncDuration));

        // pause the main thread
        dispatch_async(dispatch_get_main_queue(), ^{
            [cond lock];
            [cond signal];
            [cond wait];
            [cond unlock];
        });

        // wait for the main thread to be paused
        [cond lock];
        [cond wait];

        // performSelector:
        for (NSUInteger i = 0; i < numOps; ++i)
        {
            dispatch_group_enter(g);
            [self performSelectorOnMainThread: @selector(selectorToPerfTask:) withObject: @(i) waitUntilDone: NO];
        }

        // unpause the main thread
        [cond signal];
        [cond unlock];

        // mark start
        start = [NSDate timeIntervalSinceReferenceDate];
        dispatch_group_wait(g, DISPATCH_TIME_FOREVER);
        end = [NSDate timeIntervalSinceReferenceDate];
        NSTimeInterval performDuration = end - start;
        NSLogAsync(@"performSelector took: %@s", @(performDuration));

        // Done.
        dispatch_async(dispatch_get_main_queue(), ^{
            CFRunLoopRemoveObserver(CFRunLoopGetCurrent(), rlo, kCFRunLoopCommonModes);
            NSLogAsync(@"Done. NSOperationQueue: %@s dispatch_async: %@s performSelector: %@", @(opQDuration), @(asyncDuration), @(performDuration));
        });
    });
}

- (void)selectorToPerfTask: (NSNumber*)task
{
    NSLogAsync(@"performSelector task #%@", task);
    usleep(usleepDuration); // simulate work
    dispatch_group_leave(g);
}

static NSString* NSStringFromCFRunLoopActivity(CFRunLoopActivity activity)
{
    NSString* foo = nil;
    switch (activity) {
        case kCFRunLoopEntry:
            foo = @"kCFRunLoopEntry";
            break;
        case kCFRunLoopBeforeTimers:
            foo = @"kCFRunLoopBeforeTimers";
            break;
        case kCFRunLoopBeforeSources:
            foo = @"kCFRunLoopBeforeSources";
            break;
        case kCFRunLoopBeforeWaiting:
            foo = @"kCFRunLoopBeforeWaiting";
            break;
        case kCFRunLoopAfterWaiting:
            foo = @"kCFRunLoopAfterWaiting";
            break;
        case kCFRunLoopExit:
            foo = @"kCFRunLoopExit";
            break;
        default:
            foo = @"ERROR";
            break;

    }
    return foo;
}

static void MyCFRunLoopObserverCallBack(CFRunLoopObserverRef observer, CFRunLoopActivity activity, void *info)
{
    NSLogAsync(@"RLO: %@", NSStringFromCFRunLoopActivity(activity));
}

@end 
```

在此代码的输出中，我们看到以下内容（删除了不相关/重复的部分）：

```
RLO: kCFRunLoopEntry
RLO: kCFRunLoopBeforeTimers
RLO: kCFRunLoopBeforeSources
RLO: kCFRunLoopBeforeWaiting
RLO: kCFRunLoopAfterWaiting
NSOpQ task #0
RLO: kCFRunLoopExit
RLO: kCFRunLoopEntry
RLO: kCFRunLoopBeforeTimers
RLO: kCFRunLoopBeforeSources
RLO: kCFRunLoopBeforeWaiting
RLO: kCFRunLoopAfterWaiting
NSOpQ task #1
RLO: kCFRunLoopExit

... pattern repeats ...

RLO: kCFRunLoopEntry
RLO: kCFRunLoopBeforeTimers
RLO: kCFRunLoopBeforeSources
RLO: kCFRunLoopBeforeWaiting
RLO: kCFRunLoopAfterWaiting
NSOpQ task #999
RLO: kCFRunLoopExit
NSOpQ took: 1.237247049808502s
RLO: kCFRunLoopEntry
RLO: kCFRunLoopBeforeTimers
RLO: kCFRunLoopBeforeSources
RLO: kCFRunLoopBeforeWaiting
RLO: kCFRunLoopAfterWaiting
dispatch_async main thread task #0
dispatch_async main thread task #1

... pattern repeats ...

dispatch_async main thread task #999
dispatch_async took: 1.118762016296387s
RLO: kCFRunLoopExit
RLO: kCFRunLoopEntry
RLO: kCFRunLoopBeforeTimers
RLO: kCFRunLoopBeforeSources
performSelector task #0
performSelector task #1

... pattern repeats ...

performSelector task #999
performSelector took: 1.133482992649078s
RLO: kCFRunLoopExit
RLO: kCFRunLoopEntry
RLO: kCFRunLoopBeforeTimers
RLO: kCFRunLoopBeforeSources
Done. NSOperationQueue: 1.237247049808502s dispatch_async: 1.118762016296387s performSelector: 1.133482992649078 
```

这向我们展示的是，`NSOperation`在主队列中排队的 s 每次运行循环都会执行一次。（顺便说一句，这将允许为每个操作绘制视图，因此，如果您像 OP 一样更新这些任务中的 UI 控件，这将允许它们绘制。）所有入队`dispatch_async(dispatch_get_main_queue(),...)`的`-[performSelectorOnMainThread:...]`块/选择器都称为一个在另一个没有让视图绘制或类似的东西之后。（如果在入队任务时没有强制暂停主运行循环，*有时*会在入队过程中看到运行循环旋转一两次。）

最后，结果与我预期的差不多：

*   NSOperationQueue：1.2372s
*   dispatch_async：1.1188s
*   执行选择器：1.1335s

`NSOperationQueue`总是会更慢，因为旋转运行循环不是免费的。在这个测试工具中，运行循环甚至没有*做*任何实质性的事情，它已经比`dispatch_async`. 如果它正在做任何实质性的事情，比如重绘一个视图，它会慢得多*。*至于`dispatch_async`vs`performSelectorOnMainThread:`都在运行循环的一次旋转中执行所有排队的项目，因此差异非常小。我希望这取决于消息发送开销和管理目标的保留/释放和`performSelector...`.

因此，与问题的含义相反`NSOperationQueue`，客观上不是三种机制中最快的，而是最慢的。我的怀疑是，在 OP 的情况下，它`NSOperationQueue` *看起来*更快，因为它的“第一次可见更改的时间”会更短，而 for`dispatch_async`和`performSelector`所有排队的操作都将被执行，只有*这样*视图才会重绘并显示新状态. 在病态的情况下，我希望这意味着只看到最后一帧，尽管如果你在排队时不阻塞主线程，你可能会得到一些可见的帧（但你实际上会丢弃大部分地面上的框架。）

无论哪种异步执行机制客观上最快，它们*都是*非常糟糕的动画制作方式。

# sql - 如何在 SQL Server 中为 ID 字段创建随机数？

> ID：14207038
> 
> 赞同：0
> 
> 时间：2013-01-08T01:41:46.647
> 
> 标签：sql, sql-server

如何在 SQL Server 中为 ID 字段创建随机数？

我想创建 1000 到 9999 之间的随机数。

如何创建这个结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:59:11.143

`RAND`是一个内置函数。它应该满足您的需求。这应该会给你想要的结果：`select cast(rand() * 8999 + 1000 as int)`

[http://msdn.microsoft.com/en-us/library/ms177610%28v=SQL.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms177610%28v=SQL.105%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T04:30:02.450

您没有提到是否要生成唯一非重复的随机数。

```
DECLARE @Random INT;
DECLARE @Upper INT;
DECLARE @Lower INT;

---- This will create a random number between 1 and 999
SET @Lower = 1000 ---- The lowest random number
SET @Upper = 9999 ---- The highest random number
SELECT @Random = ROUND(((@Upper - @Lower -1) * RAND() + @Lower), 0)
SELECT @Random; 
```

[资源](http://blog.sqlauthority.com/2007/04/29/sql-server-random-number-generator-script-sql-query/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T08:01:50.310

另一种方法

```
select number/power(10,len(number)-4) as number from
(
select top 10000 abs(checksum(newid())) as number 
from sysobjects s1 cross join sysobjects s2
) as T 
```

另请参阅此[http://beyondrelational.com/modules/2/blogs/70/posts/10810/generating-random-numbers-part-ii.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10810/generating-random-numbers-part-ii.aspx)

# html - CSS 下拉菜单仅显示 ul 而不是 ie9 中的元素

> ID：14207039
> 
> 赞同：2
> 
> 时间：2013-01-08T01:41:49.630
> 
> 标签：html, css, drop-down-menu, internet-explorer-9

这是我当前用于导航栏的 jsfiddle。 [http://jsfiddle.net/EPh6j/28/](http://jsfiddle.net/EPh6j/28/)

请拉伸条，使其成为单行，否则您将得到不同的结果。

据我所知，该问题仅发生在ie9中。当您将鼠标悬停在其中一个主要链接上时，会发生什么下拉菜单。但是，一旦下拉菜单通过主菜单的底部，它就会变得不可见。更令人困惑的是子菜单的 ul 边框显示但不显示元素。

这是我的意思的一个例子：注意它是如何可见的，然后消失在底部。 [http://i.imgur.com/jXsoE.png](http://i.imgur.com/jXsoE.png)

当我试图找出我的问题开始时，我做了上述事情。在 jsfiddle 中，它会一直向下移动，因此完全是空白的。我完全无法让这个工作。

我的 CSS：

```
.menu li li {
    float:none;
    position: relative;
}

.menu li ul {
    left:0;
    position:absolute;
    top:0;
    visibility:hidden;
}

.menu li:hover > ul {
    top:100%;
    visibility:visible ;
} 
```

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:18:22.623

我怀疑是 z-index 问题，所以我把它们都从你的小提琴中去掉了。似乎已经修好了。

顺便说一句，“赞助”。;-)

# php - $_POST 不工作？使困惑？

> ID：14207040
> 
> 赞同：0
> 
> 时间：2013-01-08T01:42:02.383
> 
> 标签：php, pdo

在这里成员的建议下，我放弃了 mysql_ 函数并研究了 PDO。

我以为我会制作一个简单的页面来开始播放，但我想我现在是最简单的页面......

我在这里错过了什么吗？已经晚了，但我无法弄清楚为什么这不起作用。

PHP：

```
<?php

session_start();

include"dbconnect.php";

$query = "SELECT * FROM user WHERE username=?";
$statement = $db->prepare($query);

if ($_POST['submit']){

    if ($_POST['name'] === ""){
        echo "Please enter a name";
    }else{

$user=$_POST['name'];

$statement->execute(array($user));
$fuser = $statement->fetchObject();

}
}

?> 
```

HTML：

```
<body>
<form method="post" action="">  
<table width="400" border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td>enter username here</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><input name="name" id="name" type="text" maxlength="20" /></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><input name="submit" id="submit" type="button" value="submit" /></td>
    <td><? echo "$fuser->online" ?></td>
    <td>&nbsp;</td>
  </tr>
</table>
</form>
</body> 
```

我已正确连接到数据库，因为如果我删除此部分：

```
if ($_POST['submit']){

    if ($_POST['name'] === ""){
        echo "Please enter a name";
    }else{

$user=$_POST['name']; 
```

并替换`$user=$_POST`为`$user="Mike";`

它按应有的方式显示 Mikes 的详细信息。

有人可以帮忙吗？

编辑：在这里重读后立即发现问题>_<

我将提交按钮设置为 type=button 当它应该是 =submit ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:46:42.593

```
if(isset($_POST['somename'])
{
//dosomething
} 
```

您必须使用`isset`which 返回`true`或`false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:50:22.760

查看 HTML，试试这个：

```
<tr>
    <td><input name="submit" id="submit" type="submit" value="submit" /></td>
    <td><? echo "$fuser->online" ?></td>
    <td>&nbsp;</td>
</tr> 
```

然后，当您单击按钮时，表单将实际提交。

//按照mandouh所说的编辑，我也建议更改`=== ""`为`isset()`

# c# - C# dll 强版本问题

> ID：14207047
> 
> 赞同：0
> 
> 时间：2013-01-08T01:42:29.000
> 
> 标签：c#, .net, dll, runtime

我四处搜索，但找不到我的 dll 问题的解决方案。
我的解决方案添加了许多 dll 引用，并且每个 dll 都强烈依赖于版本。
我只想单独重新编译其中一个并将其添加回解决方案。
但是，由于其他 dll 依赖于版本并引用此 dll，因此会发生一些运行时错误，说明版本不是预期的版本。
我该如何解决这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:49:15.820

这实际上取决于您如何制定解决方案。如果您将 DLL 作为 PROJECTs 在与使用它们的程序和其他 DLL 文件**相同**的解决方案中，您只需右键单击要重新编译的 DLL 项目并单击重建。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T03:19:22.227

[配置文件中的程序集重定向发布者策略](http://msdn.microsoft.com/en-us/library/7wd6ex19%28v=vs.100%29.aspx)条目可以解决这个问题。这是文章中的示例片段（您也可以重定向版本范围）：

```
<configuration>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="myAssembly" 
          publicKeyToken="32ab4ba45e0a69a1" culture="en-us" />
        <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0" />
        .... 
```

旁注：您应该更仔细地考虑您的版本政策。如果您将程序集提供给其他人，最好避免自动生成的版本，并为每个正式版本使用一个版本，可能为临时构建使用次要版本。同时构建所有项目可能是个好主意。

# database - 将列添加到表和视图时锁定

> ID：14207048
> 
> 赞同：2
> 
> 时间：2013-01-08T01:42:31.183
> 
> 标签：database, postgresql, locking, postgresql-9.1

假设我在 PostgreSQL 9.1 数据库中有这个*foo表：*

```
CREATE TABLE foo
(
  bar integer,
  flg_deleted boolean
); 
```

除了这个*vwfoo*视图：

```
CREATE VIEW vwfoo AS
  SELECT bar
  FROM foo
  WHERE flg_deleted = false; 
```

还假设我有一个应用程序每秒运行几个短期事务，使用*vwfoo*。

现在，我想在*foo中添加一个**baz*列，并且我希望*baz*也可以在*vwfoo*中。但是，当然，我不希望我的应用程序因为这些更改而出现任何错误。

 ***如果我执行以下步骤（在单个事务中）以执行所需的更改：

1.  删除*vwfoo*。
2.  将列*baz*添加到*foo*。
3.  再次创建*vwfoo*（现在包括*baz*）。

我是否获得了所需的行为（应用程序中没有错误）？

*在整个事务期间是否会在vwfoo*上持有排他锁（这就是我想要的）？

是否有可能任何事务都会尝试在步骤 1 和 3 之间使用视图然后失败（而不仅仅是阻塞，等待锁定）？

*重新创建时vwfoo*的“身份”是否会改变？换句话说：任何事务是否有可能在第 1 步和第 3 步之间尝试使用视图、阻塞、在第 3 步之后恢复，然后因为重新创建视图而失败？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:31:59.743

快速测试表明这会导致您的应用程序出现问题。要重新创建，请创建两个连接（`A`和`B`），然后运行：

```
A: BEGIN;
A: DROP VIEW vwfoo;
B: SELECT * FROM vwfoo;
(B blocks… )
A: CREATE VIEW vwfoo AS SELECT * FROM foo;
A: COMMIT;
(B yields:
    ERROR:  could not open relation with OID 326418
    LINE 1: SELECT * FROM vwfoo
) 
```

相反，您应该通过重命名视图来进行这种原子交换：

```
A: CREATE VIEW vwfoo_new AS SELECT * FROM foo;
A: BEGIN;
A: ALTER VIEW vwfoo RENAME TO vwfoo_old;
B: SELECT * FROM vwfoo;
(B blocks…)
A: ALTER VIEW vwfoo_new RENAME TO vwfoo;
A: COMMIT;
(B completes as expected)
A: DROP TABLE vwfoo_old; 
```

这将按预期工作（并且您不需要`DROP TABLE`在事务中运行（相对）昂贵的！）

**编辑**：您也可以使用相同的策略来解决您的“真正”问题：

```
ALTER TABLE foo ADD COLUMN bar_new TEXT;
UPDATE foo SET bar_new = bar;
CREATE VIEW vwfoo_new AS SELECT bar_new AS bar FROM foo;
… do the view switcheroo …
DROP VIEW vwfoo_old;
BEGIN;
ALTER TABLE foo RENAME bar TO bar_old;
ALTER TABLE foo RENAME bar_new TO bar;
COMMIT;
ALTER TABLE foo DROP COLUMN bar_old; 
```

视图引用`bar_new`也将正确更新：

```
# \d vwfoo
View definition:
 SELECT foo.a
   FROM foo
  WHERE foo.b = false;
# ALTER foo RENAME a TO new_a;
ALTER TABLE
# \d vwfoo
View definition:
 SELECT foo.newa AS a
   FROM foo
  WHERE foo.b = false; 
```***

# svn - 为什么在使用 maven 的发布插件时出现 svn: Illegal repository URL '' 错误？

> ID：14207049
> 
> 赞同：1
> 
> 时间：2013-01-08T01:42:37.750
> 
> 标签：svn, maven, branch, release, svn-externals

我正在使用

```
mvn release:branch ... 
```

我得到了这个神秘的错误：

```
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 27.391s
[INFO] Finished at: Mon Jan 07 17:22:46 PST 2013
[INFO] Final Memory: 7M/245M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.3.2:branch (default-cli) on project XXX: Unable to commit files
[ERROR] Provider message:
[ERROR] The svn command failed.
[ERROR] Command output:
[ERROR] svn: Commit failed (details follow):
[ERROR] svn: Illegal repository URL ''
[ERROR] -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:42:37.750

这实际上与maven关系不大。 [答案在另一个堆栈溢出答案中。](https://stackoverflow.com/a/5187535/61624)maven 发布插件[会修改项目中的所有 pom](http://maven.apache.org/maven-release/maven-release-plugin/examples/branch.html)以更新版本号，然后提交它们。如果其中一个 pom 在 svn extern 中，它会尝试在一个修订版中提交本地和外部修改，并给出这个非常神秘的错误消息。希望这会对其他人有所帮助。

不幸的是，我知道的唯一解决方法是停止使用 externs 或停止使用发布插件。

# arrays - OpenGL 顶点数组所需版本

> ID：14207055
> 
> 赞同：4
> 
> 时间：2013-01-08T01:42:59.060
> 
> 标签：arrays, opengl, server-side, vertex

我的程序可以有效地使用 VBO，但是据我所知，除了 1 个人之外，我所知道的没有人拥有一台甚至接近于支持 OpenGL 3.0 的计算机。当他们都运行程序时，我所做的只是没有深度的平面纹理，因为他们的卡不支持 VBO 也不支持我正在使用的着色器语言。

我现在正在编码以支持旧计算机（之前的 OpenGL 3.0 支持）。除非完全必要，否则我不想在立即模式下进行绘图编码，所以我将恢复到顶点数组。

支持顶点数组需要什么版本的 OpenGL？

我似乎无法在任何地方找到它。

扩展注册： [http ://www.opengl.org/registry/](http://www.opengl.org/registry/)

只是为了澄清我在谈论客户端顶点数组，不要与服务器端顶点数组对象（VAO）或顶点缓冲区对象（VBO）混淆

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T03:07:27.497

我会在这里有点全面。

自 OpenGL 1.1 以来，基本的顶点数组 API 一直是核心。

**OpenGL 1.1**介绍：

*   `glDrawArrays`和`glDrawElements`（以及`glArrayElement`，但实际上没有人应该将它用于任何事情*）*进行渲染。
*   `glVertexPointer`, `glTexCoordPointer`, `glNormalPointer`, 和`glColorPointer`“属性”。请注意，您只会得到一个纹理坐标指针。

**OpenGL 1.2**介绍：

*   `glDrawRangeElements`，以提高某些驱动程序的性能。这些天不是很有用，但是如果您正在为旧硬件编码，请查看它。

**OpenGL 1.3**介绍：

*   `glActiveTexture`，因此允许s 的`GL_MAX_TEXTURE_UNITS`数量`glTexCoordPointer`。

**OpenGL 1.4**介绍：

*   `glMultiDrawArrays`和`glMultiDrawElements`。
*   `glSecondaryColorPointer`和`glFogCoordPointer`。

**OpenGL 1.5**介绍：

*   缓冲对象。

**OpenGL 2.0**介绍：

*   `glVertexAttribPointer`用于通用着色器属性。可用于客户端顶点数组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T02:06:49.237

我在[规范](http://www.opengl.org/registry/#oldspecs)中最早提到的顶点数组是[OpenGL 1.1](http://www.opengl.org/registry/doc/glspec11.ps)（第 2.8 节顶点数组，第 21 页）。

# c++ - 在 C++ 中测试数据是否属于某种数据类型？

> ID：14207056
> 
> 赞同：-3
> 
> 时间：2013-01-08T01:43:02.603
> 
> 标签：c++, types, runtime

```
datatype *x;//where datatype is a class defined earlier;
//...

if (isDataType(x[0]))//test whether x[0] belong to datatype defined.

//do something 
```

是否有任何 C++ 函数可以完成上述工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T01:44:00.240

使用[`std::is_same`](http://en.cppreference.com/w/cpp/types/is_same)：

```
#include <type_traits>

if ( std::is_same<datatype, decltype(x[0])>::value ) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T02:14:48.310

```
bool isDataType(const datatype&) { return true; }

template<typename T> bool isDataType(const T&) { return false; } 
```

可能不是你真正想要的...

# java - 在 ISO-8559-1 和 cp1251 之间转换

> ID：14207059
> 
> 赞同：1
> 
> 时间：2013-01-08T01:43:28.660
> 
> 标签：java, android, character-encoding, cp1251

我的 Android 应用程序使用一个只接受 ISO-8859-1 编码的文本数据的开源库。我有几个来自东欧的用户想要输入 cp1251 编码的文本。这似乎是开源库的一个限制，因为 Java 完全能够支持这些格式以及 unicode 格式。

一种选择是修改开源库以支持多个字符集。是否可以将 cp1251 转换为 ISO-8859-1 然后再转换回来？由于它们都是 8 位语言编码，因此您似乎会以字节级别存储相同数量的数据。但是，当开源库将字节数据加载到使用 ISO-8859-1 编码的字符串中时，ISO-8859-1 中不存在的任何字节值都可能会引发异常。

我不是字符集专家，但我找不到执行此转换的代码示例这一事实让我相信它不会工作，至少不可靠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T01:49:28.320

你是对的，这根本不会很好地工作。CP1251 中的大多数非 ASCII 字符在 ISO8859-1 中不存在。（CP1251 是东欧的，包含很多西里尔字符；ISO8859-1 是西欧的，包含重音拉丁字符、标点符号和符号的混合。）两者都有一些字符，但很少（几乎所有这些都是标点符号）它可能对你没有任何好处。

# vb.net - 如何检查字符串的第一个字符在vb中是什么

> ID：14207060
> 
> 赞同：0
> 
> 时间：2013-01-08T01:43:30.173
> 
> 标签：vb.net

我有以下代码，它从 VB 中的一些 DateTimePickers 中读取日期和时间。

我需要能够确定第一个值是 0 还是 1（例如 09:12... 或 12:13...），以及它是否以 0 开头以从字符串中删除该字符。

这是我到目前为止所拥有的，但无论如何它都需要第一个字符。

```
 DateFrom = Form1.DateTimePickerFrom.Value.ToString
    DateTo = Form1.DateTimePickerTo.Value.ToString
    VarTimeFrom = Form1.HourTimePickerFrom.Value.ToString
    VarTimeTo = Form1.HourTimePickerTo.Value.ToString

    Dim DateFromManipulated = Left(DateFrom, 10)
    Dim DateToManipulated = Left(DateTo, 10)
    Dim TimeFromManipulated = Right(VarTimeFrom, 9)
    Dim TimeToManipulated = Right(VarTimeTo, 9)

    If Left(DateFromManipulated, 1) = 0 Then

        TimeFromMan = TimeFromManipulated.Remove(0, 1)
    Else
        TimeFromMan = TimeFromManipulated
    End If

    If Left(TimeFromManipulated, 1) = 0 Then

        TimeToMan = TimeToManipulated.Remove(0, 1)
    Else
        TimeToMan = TimeToManipulated
    End If

    Console.WriteLine(DateFromManipulated)
    Console.WriteLine(TimeToMan)
    Console.WriteLine(TimeFromManipulated)
    Console.WriteLine(TimeFromMan)
    Console.WriteLine(DateToManipulated)
    Console.WriteLine(TimeToManipulated) 
```

我得到以下信息：

```
09/11/2012
1:36:00 
06:36:00 
6:36:00 
08/01/2013
11:36:00 
```

提前致谢！

麦克风

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T01:50:32.550

VB.NET 中的字符串不会与整数进行比较。不过，您可以只引用字符零：

```
If DateFromManipulated(0) = "0"c Then DateFromManipulated = DateFromManipulated.Substring(1) 
```

...*但是*，您应该只是按照您希望的方式格式化您的日期：

```
Dim dateFrom As String = DateTimePickerFrom.Value.ToString("M/dd/yyyy H:mm:ss") 
```

... 例如。（`M`没有前导零，与`MM`; 相同`H`。）您可以在此处找到所有格式字符串：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# java - 在太空侵略者风格的游戏中使用 ArrayLIst 创建子弹对象

> ID：14207061
> 
> 赞同：0
> 
> 时间：2013-01-08T01:43:33.830
> 
> 标签：java, arraylist, slick2d

我目前正在开发一款太空侵略者风格的游戏，但我遇到了多个子弹实例的问题。目前我只能发射一个。我一直试图让它与一个数组列表一起工作，但我似乎无法让它工作。我得到它最接近工作的是，它发射了多发子弹，但它们都从相同的位置产生，因为子弹没有相对于船只的位置产生。当我移除一个超出边界的对象时，游戏也崩溃了。谁能帮我看看我哪里出错了。这是我到目前为止的一些代码，注释掉的部分是我尝试让数组列表工作

```
 import java.util.ArrayList;
    import org.newdawn.slick.Input;
    import org.newdawn.slick.Graphics;
    import org.newdawn.slick.GameContainer;

    public class Player extends Entity 
    {
 private int speed = 5;
 private ArrayList<Bullet> bulletList;
 private boolean firing;
 private Bullet bullet;

public Player()
{   
    bullet = new Bullet();
    //bulletList = new ArrayList<Bullet>();
    this.setImage("ship");
    this.setPosition(350,450);
    this.setDimenseions(100, 100);
    this.createRectangle();
}

@Override
public void entityLogic(GameContainer gc, int deltaTime) 
{
    Input input = gc.getInput();

    if(input.isKeyDown(Input.KEY_A))
    {
        this.x -= speed;
    }

    if(input.isKeyDown(Input.KEY_D))
    {
        this.x += speed; 
    }

    if(input.isKeyDown(Input.KEY_W))
    {
        this.y -= speed;
    }

    if(input.isKeyDown(Input.KEY_S))
    {
        this.y += speed;
    }

    if(input.isKeyPressed(Input.KEY_SPACE))
    {
        firing = true;
        bullet.x = this.getX()+40;

        //BulletList.add(new Bullet());
    }

    if(firing)
    {
        /*Carries out the logic for the bullet*/

        //for(Bullet b : bulletList)
        //{
            //b.entityLogic(gc, deltaTime);
        //}

        //Moves the bullet negativly along the y axis
        bullet.entityLogic(gc, deltaTime);
    }
}

@Override
public void entityRendering(Graphics g) 
{
    g.drawImage(this.getImage(), this.getX(), this.getY());

    if(firing)
    {
        /*Draws each bullet object in the list*/

        //for(Bullet b : bulletList)
        //{
            //b.entityRendering(g);
        //}

        bullet.entityRendering(g);
    }
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T02:00:15.913

首先忘记你的`Bullet bullet`实例变量。你不需要它，清单就足够了。

另一件事是您可以使用 a`LinkedList`而不是 an`ArrayList`因为您不需要随机访问并且您必须经常添加和删除项目，当您迭代子弹以检查碰撞时使用 a`ListIterator<T>`并即时删除它们。

最后它应该是这样的：

```
List<Bullet> bullets = new ArrayList<Bullet>();

public void entityLogic(GameContainer gc, int deltaTime) {
  // since this method is called many times you should shoot a bullet just every X msec
  if (spacebar pressed) {
    // you spawn a new bullet according to player position
    Bullet bullet = new Bullet(player.x,player.y);
    // you add it to the list
    bullets.add(bullet);
  }

  // destroy bullets which are outside the viewport
  for (int i = 0; i < bullets.size(); ++i) {
    Bullet bullet = bullets.get(i);
    if (bullet.isOutsideBounds()) {
      bullets.remove(i);
      i--;      
    }
}

public void entityRendering(Graphics g) {
  for (Bullet bullet : bullets)
    bullets.entityRenering(g);
}
  } 
```

这只是给你一个基本的想法。

我不知道 slick2d 以及它如何管理渲染和逻辑线程，如果它们是两个不同的线程，那么您应该使用同步列表，例如：

```
List<Bullet> bullets = Collections.synchronizedList(new ArrayList<Bullet>()); 
```

# java - 通过网络共享创建文件副本

> ID：14207063
> 
> 赞同：-2
> 
> 时间：2013-01-08T01:43:49.153
> 
> 标签：java, file, networking, copy

我们有一个企业应用程序，它将一些文件保存在网络共享 (\\physicalfileserver\files\) 上。我们需要使用网络共享，因为应用程序安装在多个应用程序服务器实例上，这些应用程序服务器实例分布在通过 LAN 连接的多个物理服务器上。有时，我们需要在网络共享本身上创建某些文件的副本，并将其保存在同一个目录（在同一个网络共享上）以不同的名称或在一个新目录中（再次在同一个网络共享上）。创建文件副本的最有效方法是什么？我不想在网络上创建任何 IO 流量，因为源文件和目标文件位于同一台服务器上。它还增加了创建文件副本的时间。然而，从我目前所见的情况来看，这很困难。

*   读取输入流中的文件并通过具有不同路径/名称的输出流将它们写回服务器。
*   FileUtils.copyFile() 来自 apache commons。
*   JAVA 的 NIO Channels 库 (java.nio.channels.FileChannel.transferFrom())

但是，它们似乎都将文件复制到执行程序的服务器，然后将数据复制回网络共享，这并不是真正需要的。

大师们可以建议什么是处理这种情况的最佳方法？由于一些限制，我只能使用 JAVA 1.5/1.6，但我也愿意接受使用更高 Java 版本的建议。

该应用程序安装在 Windows 2008 服务器上，并且网络共享也存在于 Windows 2008 服务器上。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:09:31.147

如果您想避免网络流量，您可以用 Java 编写一个小型服务器，允许您在本地复制文件（这将在文件服务器本身上运行）。确保这一点非常重要，因为如果有人可以使用它来覆盖系统文件，这可能会带来巨大的安全风险。

# json - postgres中的部分更新json字段

> ID：14207068
> 
> 赞同：4
> 
> 时间：2013-01-08T01:44:04.727
> 
> 标签：json, postgresql, postgresql-9.2

在 Postgres 中，我有一张这样的表：

```
CREATE TABLE storehouse
(
  user_id bigint NOT NULL,
  capacity integer NOT NULL,
  storehouse json NOT NULL,
  last_modified timestamp without time zone NOT NULL,
  CONSTRAINT storehouse_pkey PRIMARY KEY (user_id)
) 
```

并且`storehouse.storehouse`正在存储这样的数据：

```
{
    "slots":[
        {
            "slot" : 1,
            "id" : 938
        },
        {
            "slot" : 2,
            "id" : 127
        },
    ]
} 
```

问题是，我想更新`storehouse.storehouse.slots[2]`，但我不知道如何去做。

我知道如何更改整个`storehouse.storehouse`字段，但我想知道 Postgres 支持`json`类型，它应该支持部分修改，否则`json`类型和`text`类型之间没有区别。（我知道`json`type 也有与不同的类型验证`text`）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T02:56:28.757

目前不支持 JSON 索引和部分更新。PostgreSQL 9.2 中的 JSON 支持是初级的，仅限于验证 JSON 并将行和数组转换为 JSON。在内部，`json`确实差不多`text`。

正在进行部分更新、索引等增强功能的工作。无论如何，当 JSON 值的一部分发生更改时，PostgreSQL 将无法避免重写整行，因为这是 MVCC 并发模型所固有的。使这成为可能的唯一方法是将 JSON 值拆分为边关系中的多个元组，例如 TOAST 表 - 这是可能的，但可能表现不佳，而且目前还远远没有考虑到这一点。

正如 Chris Travers 所指出的，您*可以*使用 PL/V8 函数或其他支持 json 的语言（如 Perl 或 Python）来提取值，然后在这些函数上创建表达式索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-21T14:53:03.243

从 PostgreSQL 9.5 开始，有一个函数被[`jsonb_set`](https://wiki.postgresql.org/wiki/What's_new_in_PostgreSQL_9.5#jsonb_set_function)称为输入参数：

*   一个 JSON 对象
*   指示路径的数组（键和子键）
*   要存储的新值（也是 JSON 对象）

例子：

```
 # SELECT jsonb_set('{"name": "James", "contact": {"phone": "01234 567890", "fax": "01987 543210"}}'::jsonb,
            '{contact,phone}',
            '"07900 112233"'::jsonb);
                                  jsonb_replace                                  
 --------------------------------------------------------------------------------
  {"name": "James", "contact": {"fax": "01987 543210", "phone": "07900 112233"}}
 (1 row) 
```

# java - Java项目中的Eclipse Open声明

> ID：14207074
> 
> 赞同：56
> 
> 时间：2013-01-08T01:45:43.680
> 
> 标签：java, eclipse, declaration

在 Eclipse SVN 项目中，我遇到了问题；当我试图打开一个类的声明时，我收到了这个错误：

```
Problems opening an editor Reason : projectname does not exist. 
```

重构也不起作用。

我已经在网上搜索并尝试了所有找到的解决方案，但没有任何帮助。我已经下载了不同的 Eclipse 和 Java 版本并切换到一个干净的工作区，但我仍然遇到问题。

我该如何解决我的问题或我可以尝试哪种解决方案？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-10-30T19:17:45.180

右键单击项目-> 属性-> 项目构面-> 单击配置链接-> 单击应用按钮-> 单击确定按钮。

上述步骤应该将您的项目设置为 Java 项目。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-04-02T21:01:46.880

如果项目是多模块 Maven 项目，那么除了 parent/pom 项目外，还需要导入 child/module 项目。然后确保您只通过子项目打开源文件。以这种方式打开的Java文件会有Refactor右键菜单项，F3 Open Declaration等正常工作。但是，如果从父项目打开 Java 文件，这些 Eclipse 函数将丢失。

通过搜索结果打开文件时非常令人沮丧，因为该文件将在父项目和子项目中找到并列出。您需要确保仅使用通过子项目访问的文件。

我无法准确解释 Eclipse 发生了什么，但 Eclipse 似乎无法将父项目识别为 Java 项目，尽管无论是通过父项目还是子项目访问 Java 文件，它都会正确地语法高亮显示它们。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-08T22:17:46.360

您需要将其作为 Java 项目检出，或者最好是它的创建者应该为它提交 .project 和 .classpath 文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-02T09:42:43.197

您可以通过创建一个新的 java 项目来解决该问题。签出项目时，应选择默认选项 [签出为使用新项目向导配置的项目]。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-03T08:35:56.160

它可能缺少构建器。检查你`PROJ_HOME/.project`的应该是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>the-one-user</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>org.eclipse.jdt.core.javanature</nature>
    </natures>
</projectDescription> 
```

参考： [常见问题解答 如何将构建器添加到给定项目？](https://wiki.eclipse.org/FAQ_How_do_I_add_a_builder_to_a_given_project%3F)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-12T16:48:40.443

我也有这个问题。看起来像是在工作区中搜索 Eclipse 打开了错误的文件。

我按下`Ctrl`++ （在层次结构中打开类型`Shift`）`H`，输入类名，然后打开它。该文件在新选项卡中打开，并且所有内容都可以再次导航。

图标的区别在于：

[![不可导航的 J 是轮廓字体](../Images/c3a6e94002f7e516a8875e7dec7a54e8.png)](https://i.stack.imgur.com/E6hlW.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-09-10T07:22:15.263

你是在导入一个 Maven 项目吗？如果你导入一个 maven 项目，一个文件将以几个视角查看，特别是如果你通过“打开资源（Ctrl + Shift + R）”打开文件。

[![在此处输入图像描述](../Images/23b1e56b00e3bdfd24afd139a43d9b14.png)](https://i.stack.imgur.com/xsclu.png)

再看上面的例子，“servlet-filter”（标记为1）作为maven项目导入，2中创建的maven透视项目。如果在1中打开文件，你的“Open Declaration F3”将不起作用，因为它不是一个有效的 Maven 项目。如果您在 2 中打开相同的文件，它将起作用。

希望这可以帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-04T06:46:57.283

您需要将其作为 Java/Maven 项目导入。完成导入项目后，请执行以下步骤

> 转到项目-> 选择属性-> 选择项目引用-> 选择/检查您在代码库中引用的所有依赖/子项目-> 应用并关闭

完成后，尝试清理整个项目。这应该可以解决问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-31T16:19:15.630

如果你签出的项目的格式是Maven类型的，你需要先把它转换成一个Maven项目。这可能是因为尚未生成所需的类。为此，请右键单击项目，单击配置，然后单击转换为 Maven 项目。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-22T22:59:50.133

Eclipse 中（至少在 Luna 中）存在一个非常具体的工作流程的错误，这可能不是这个特定问题的答案，但可能对其他人有帮助。

如果您从提取的 jar（作为源代码）执行导入到 src（意味着 src 文件夹在执行导入之前具有焦点）文件夹，并且您在嵌套包中的嵌套 *.java 文件中放置断点，它将不会命中那些断点。为了让事情正常工作，您必须一直按 F3 而不是使用“打开声明”来访问要在其中设置断点的 *.java 文件，然后双击最左边的空白处添加断点。然后运行 ​​> 调试为 > Java 应用程序。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-28T11:49:14.120

我在 Debian 8 上的 Eclipse Luna 中也有同样的情况`.classpath`。从 SVN 签出时我丢失了该文件。我手动复制它并更改了一些路径名，刷新了项目并且它再次工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-03-28T18:34:32.663

我正在使用 Eclipse Oxygen.2 (4.7.2)。单击项目-> 属性后，我没有看到项目构面。我的解决方案是右键单击项目并单击配置，然后选择配置和检测嵌套项目，Eclipse 会自动为您生成嵌套项目。在新创建的项目中可能会出现一些构建错误，这应该很容易修复。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-05-18T10:44:41.977

当库在 F3 不起作用的项目的类路径上不可用时，就会发生这种情况。选择任何其他项目并尝试使用 f3 进行导航。它会起作用的。

解决方案是在您的库中添加 JAR 文件或在您的项目中添加库。尝试使用 MAVEN 项目，这样问题就不会发生。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2016-02-24T15:15:12.073

转到项目属性，选择项目构面，然后转换为项目构面，然后单击确定，然后您将能够打开编辑器。

# javascript - 用 window.open 打开新网页会弹出对话框

> ID：14207085
> 
> 赞同：0
> 
> 时间：2013-01-08T01:47:25.023
> 
> 标签：javascript, google-maps

我正在使用谷歌页面建立一个网站，但遇到了一个我不明白的问题。我在登录表单上使用 window.open 来使用谷歌地图打开一个新窗口。提交按钮打开一个对话框，询问我是否要下载或保存文件。我点击打开，它确实按预期打开了页面。但该文件是我 C 盘上的下载文件。如何消除对话框并让 html 代码自动呈现。这是浏览器问题还是编码问题？有一些我不明白的网络问题正在发生，对于经验丰富的网络程序员来说可能非常明显。我会感激所有的想法和想法。

谢谢

window.open 代码如下所示：

```
window.open('https://sites.google.com/site/mywebsite/mykmlfiles   
/agserver2.htm','_blank'); 
```

agserver2.htm 如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
  <ModulePrefs title="MAP" /> 
  <Content type="html">

<![CDATA[

<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<meta http-equiv="content-type" content="text/HTML; charset=UTF-8">

<title>AgServer</title>
<link href="http://code.google.com/apis/maps/documentation/javascript/examples   
/default.css" rel="stylesheet" type="text/css">
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false& 
libraries=visualization"></script>
<script LANGUAGE="JavaScript" type="text/javascript">

var map;
var layers = [];

function initialize() {
  var montana = new google.maps.LatLng(46.0, -110.0);
  var myOptions = {
    zoom: 11,
    center: montana,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }

  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  layers[0] = new google.maps.KmlLayer('https://sites.google.com/site/mywebsite
  /mykmlfiles/soils.kml', {preserveViewport:true});

  layers[0].setMap(map);
}

function togglelayer(i) {
   if(layers[i].getMap() === null) {
      layers[i].setMap(map);
   }
   else {
      layers[i].setMap(null);
   }

</script>
</head>

<body onload="initialize()">
   <div id ="toolbar" style="width: 100%; height:20px; text-align:center">
      <input type="button" value="Toggle Soils" onclick="togglelayer(0);"></input>
   </div>
   <div id="map_canvas" style="top:30px;"></div>
</body>
]]>
  </Content> 
</Module> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:50:38.307

如果您只是想重定向，请使用 window.location("put address here")

# qt - Qt 5 ODBC 驱动程序问题

> ID：14207088
> 
> 赞同：3
> 
> 时间：2013-01-08T01:48:02.217
> 
> 标签：qt, odbc, qt5

我正在尝试在我的 Qt5 项目之一中使用 ODBC 驱动程序。

我编译`QODBC`了驱动程序并将驱动程序 dll 复制到 Qt\Qt5.0.0\5.0.0\msvc2010\plugins\sqldrivers 文件夹中。

当我尝试以下代码时：

```
 QSqlDatabase db = QSqlDatabase::addDatabase("QODBC"); 
```

我收到以下错误：

```
QSqlDatabase: QODBC driver not loaded
QSqlDatabase: available drivers: QSQLITE QODBC QODBC3 
```

如果我尝试加载，也会遇到同样的错误`QODBC3`。

即使存在驱动程序`QODBC`，`QODBC3`Qt 仍然无法加载`QODBC`驱动程序。

我正在运行 Windows 7（64 位）PC。

有没有人遇到过这样的错误？关于什么可能是错的任何线索？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T01:30:19.800

我发现这个问题是由于编译 odbc sql 驱动程序时使用了不正确的 Visual Studio 版本引起的。

我的电脑里有 VS 2008 和 VS 2010。我的 Qt5.0 使用的是 VS2010。但是当我编译odbc sql驱动时，我使用的是VS2008。这导致了问题。

Qt 能够检测到 sql odbc 驱动程序，但无法加载它。

我通过使用 VS2010 重新编译 odbc 驱动程序解决了这个问题，并且 odbc 驱动程序运行良好。

**下面是在Qt 5.0中编译和使用sql odbc驱动的步骤**

1.  打开qt命令提示符：
2.  这可以在 Qt 下的开始菜单中找到
3.  设置vc++环境变量：

    *   为此，cd 到 C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\ 文件夹并运行 vcvarsall.bat
        *重要的一点是，使用 Qt 使用的相同版本的 Visual Studio 编译驱动程序.*
4.  cd 进入 \Qt5.0.0\5.0.0\Src\qtbase\src\plugins\sqldrivers\odbc 源文件夹

5.  `qmake odbc.pro`

6.  `nmake`

    *   如果运行正确，编译后的 qsqlodbc.dll 和 qsqlodbcd.dll 将在 \Qt5.0.0\5.0.0\Src\qtbase\plugins\sqldrivers 文件夹中可用。
7.  在部署基于 qt 的应用程序时，需要将 qsqlodbc.dll（发行版）复制到 sqldrivers 文件夹中。

# c# - 如何在不使用剪贴板的情况下将 RTF 从 Richtextbox 传输到 MS Word？

> ID：14207092
> 
> 赞同：1
> 
> 时间：2013-01-08T01:48:44.280
> 
> 标签：c#, ms-word, richtextbox, rtf

我需要将 RTF (RichTextBox) 传输到 MS Word。但是传输的 RTF 数据被破坏了。像这样。

```
{\rtf1\ansi\ansicpg949\deff0\deflang1033\deflangfe1042{\fonttbl{\f0\fnil\fcharset129 \'b1\'bc\'b8\'b2;}}
{\colortbl ;\red135\green206\blue235;}
\viewkind4\uc1\pard\lang1042\f0\fs18 AAA\highlight1 AAAAAAAAAA\highlight0 AAAA\par
AAAAAAAAAAAAAAAAA\par
AAAAAAAAAAAAAAAAA\par
AAAAAAAAAAAAAAAAA\par
AAAAAAAAAAAAAAAAA\par
\par
} 
```

我怎么解决这个问题？它可以用剪贴板来完成。但我想要另一种方式，作为 DataObject 或其他对象。

这是我的代码。

```
object oEndOfDoc = "\\endofdoc"; /* \endofdoc is a predefined bookmark */
//Start Word and create a new document.
Word._Application oWord;
Word._Document oDoc;
oWord = new Word.Application();
oWord.Visible = true;
oDoc = oWord.Documents.Add(ref oMissing, ref oMissing,
ref oMissing, ref oMissing);
Word.Paragraph oPara1;
oPara1 = oDoc.Content.Paragraphs.Add(ref oMissing);
**oPara1.Range.Text = richTextBox1.Rtf;** 
```

# java - 正则表达式：如何结合 Lookahead 和 Lookbehind

> ID：14207093
> 
> 赞同：0
> 
> 时间：2013-01-08T01:48:47.943
> 
> 标签：java, regex

我有一串逗号分隔的字符，我正在拆分。但是，其中一些字符可能是逗号。例如：

`test = "a,b,c,d,,,e,f,g"`

我知道这`(?<!,),`是“任何逗号前面没有逗号”`,(?!,)`的正则表达式，并且是“任何逗号后面跟着一个逗号”的正则表达式。有人可以指出我正确的方向并告诉我如何将这两者结合起来。所需的输出是：

```
a  
b  
c  
d  
,  
e  
f  
g 
```

该程序是用 Java 编写的，所以如果有人知道 Java 特有的函数，那也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:58:15.033

Regex中解决的类似问题[：替换单个字符](https://stackoverflow.com/questions/13875084/regex-replace-single-characters)

只需合并您拥有的两个正则表达式，就`(?<!,),(?!,)`可以做到这一点，除非 ruby​​ 和 Java 在这方面存在细微差别。

如果要删除所有单个`,`并专门替换`,,,`为`,`，则可以运行搜索并从`(?<!,)?,(?!,)`两次中删除匹配的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T02:13:54.860

您可以使用`(.)(?:,|$)`而不是前瞻/后视。

`(?:,|$)`将匹配最后一个字符之间的逗号或行尾，而`(.)`将捕获该字符。

显然，这仅在您与正则表达式匹配时才有效，而不是在您使用字符串`split`方法上的表达式时；在这种情况下，您应该按照您的建议使用`^(?<=,),^(?!=,)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T02:58:58.370

`,`只有在没有`,`之前或之后的情况下才能拆分。

```
 String str = "a,b,c,d,,,e,f,g";
    String regex = "(?<!,),|,(?!,)";

    for(String s : str.split(regex)) {            
        System.out.println(s);
    } 
```

输出：

> ```
> a
> b
> c
> d
> ,
> e
> f
> g 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T02:10:44.867

以下将找到一个字符后跟一个逗号，然后通过仅取第一个字符来删除最后一个逗号：

```
 String test = "a,b,c,d,,,e,f,g";
        Pattern p=Pattern.compile(".,|.$");
        Matcher m=p.matcher(test);
        while(m.find() ){                    
            System.out.println(m.group().charAt(0));
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T02:35:50.370

假设对于数据`"a,b,c,d,,,,,e,f,g"`拆分应该看起来像`a b c d , , e f g`您可以找到一对昏迷并在它们之间放置一些特殊标记。这样你就会知道，带有特殊标记的昏迷需要被移除，而带有特殊标记的昏迷需要保留。基于该想法的代码看起来像

```
String data = "a,b,c,d,,,,,e,f,g";
data = data.replace(",,", ",XspecialSplitX,");

String[] tokens = data.split(",XspecialSplitX|(?<!XspecialSplitX),");
for (String s : tokens)
    System.out.print(s+" "); 
```

输出：`a b c d , , e f g`

* * *

没有正则表达式的更快更简单的方法。
如果您的字符串仅包含用逗号分隔的**单个**字符，那么所有想要的字符都将具有偶数索引并且分隔逗号奇数。在这种情况下，您需要做的就是像这样遍历所有偶数索引

```
char[] data="a,b,c,d,,,e,f,g".toCharArray();
for(int i=0; i<data.length; i+=2)
    System.out.println(data[i]); 
```

# android - 我是否需要增加版本名称才能自动更新？

> ID：14207094
> 
> 赞同：1
> 
> 时间：2013-01-08T01:48:48.783
> 
> 标签：android

在我的应用程序中，自动更新不起作用。

我发现版本名称仍然是 1.0，尽管我已将 VersionCode 从 1 增加到 2。

我是否需要增加版本名称才能自动更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:52:30.273

Android 市场大约需要 5 个小时来更新您的 APK。如果用户为您的应用程序启用了自动更新，那么它才会更新。但是我不完全确定版本名称对此有影响，我不相信它会

# php - 更新 PHP Mysql 表的最后 10 条记录

> ID：14207097
> 
> 赞同：6
> 
> 时间：2013-01-08T01:49:09.723
> 
> 标签：php, mysql

这似乎是一个简单的问题，但不幸的是我找不到例子。

假设我想在 php 中使用 UPDATE 语句来更新数据库“users”的表“users”的最后 10 条记录。它的代码是什么？我的意思是 INSERT 句子有一个
使用 LIMIT 等的答案，但 UPDATE 没有它。

在此先感谢您的帮助。

pd：例如，我想在最后 10 条记录中用“michael”字词更新“Firstname”字段。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-08T02:07:22.190

Try this

```
UPDATE table SET notes="hi"
ORDER BY id DESC
LIMIT 10 
```

As per Mysql docs, if there is a unique column, order by it DESC, and use LIMIT 10 to select last 10 records.

```
UPDATE [LOW_PRIORITY] [IGNORE] table_reference
        SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...
        [WHERE where_condition]
        [ORDER BY ...]
        [LIMIT row_count] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T02:06:28.010

你可以做这样的事情。

**方法一**

```
UPDATE table_name SET column_name='value' WHERE id IN (SELECT id FROM table_name ORDER BY id desc LIMIT 0, 10); 
```

**方法二**

如果您查看[文档](http://dev.mysql.com/doc/refman/5.5/en/update.html)

```
UPDATE [LOW_PRIORITY] [IGNORE] table_reference
    SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...
    [WHERE where_condition]
    [ORDER BY ...]
    [LIMIT row_count] 
```

这意味着下面也应该为你工作

```
UPDATE table_name SET column_name='value' ORDER BY id desc LIMIT 10; 
```

Try one of them which suits you and let me know if you have any issues.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T02:01:32.767

您尚未在表架构中提供任何输入，但这里有一个可行的想法：

```
UPDATE users SET firstname='michael' WHERE id >= (SELECT MAX(id)-10 FROM users); 
```

# groovy - 使用 MarkupBuilder 或 StreamingMarkupBuilder 生成嵌套 XML

> ID：14207103
> 
> 赞同：1
> 
> 时间：2013-01-08T01:49:59.577
> 
> 标签：groovy, xml-serialization, markupbuilder

我有一个分组查询，可以生成诊所列表。诊所里有病人。患者体内有处方。我正在尝试使用 MarkupBuilder 输出这个结构，但我似乎无法让遏制工作。

我得到的是：

```
<worklist>
   <clinics>
      <clinic id="1" name="Clinic 1"/>
      <patient firstName="John" id="2" lastName="Doe"/>
      <prescription id="4">
         <prescriptionType/>
         <duration/>
         <drugName>Tums</drugName>
         <route/>
         <refills>0</refills>
      </prescription>
      <clinic id="2" name="Clinic 2"/>
      <patient firstName="John" id="2" lastName="Doe"/>
      <prescription id="2">
         <prescriptionType>Formulary</prescriptionType>
         <duration>duration</duration>
         <drugName>Lipitor</drugName>
         <route>route</route>
         <refills>5</refills>
      </prescription>
      <patient firstName="Sylvia" id="4" lastName="Plath"/>
      <prescription id="5">
         <prescriptionType/>
         <duration/>
         <drugName>BandAids</drugName>
         <route/>
         <refills>0</refills>
      </prescription>
   </clinics>
</worklist> 
```

请注意，诊所元素关闭且不包含患者。并且患者元素关闭并且不包含处方。这是不正确的。它应该如下所示：

```
<worklist>
   <clinics>
      <clinic id="1" name="Clinic 1">
          <patient firstName="John" id="2" lastName="Doe">
              <prescription id="4">
                 <prescriptionType/>
                 <duration/>
                 <drugName>Tums</drugName>
                 <route/>
                 <refills>0</refills>
              </prescription>
          </patient>
      </clinic>   
      <clinic id="2" name="Clinic 2"/>
          <patient firstName="John" id="2" lastName="Doe">
              <prescription id="2">
                 <prescriptionType>Formulary</prescriptionType>
                 <duration>duration</duration>
                 <drugName>Lipitor</drugName>
                 <route>route</route>
                 <refills>5</refills>
              </prescription>
          </patient>
          <patient firstName="Sylvia" id="4" lastName="Plath">
              <prescription id="5">
                 <prescriptionType/>
                 <duration/>
                 <drugName>BandAids</drugName>
                 <route/>
                 <refills>0</refills>
              </prescription>
          </patient>
      </clinic>   
   </clinics>
</worklist> 
```

这是我的代码：

```
 import groovy.xml.StreamingMarkupBuilder
    import groovy.xml.XmlUtil

    import javax.ws.rs.GET
    import javax.ws.rs.Path
    import javax.ws.rs.Produces

    @Path('/api/worklist')
    class WorklistResource {
        def addClinic = { idx, name ->
            clinic(id:idx, name:name)
        }

        def addPatient = { idx, fname, lname ->
            patient(id:idx, firstName:fname, lastName:lname)
        }

        @GET
        @Produces(['application/xml','application/json'])
        String getWorklistRepresentation() {
            def groupedScripts = Prescription.createCriteria().list {
                createAlias('clinic', 'clinicAlias')
                createAlias('patient', 'patientAlias')
                projections {
                    groupProperty "id"
                    groupProperty "clinicAlias.id"
                    groupProperty "patientAlias.id"
                }
                order "clinicAlias.name"
                order "patientAlias.lastName"
                order "patientAlias.firstName"
            }

            def curClinic = null
            def curPatient = null

            def worklist = new StreamingMarkupBuilder().bind {
                worklist {
                    clinics {
                        groupedScripts.each { arr ->
                            def (rx, clinic, patient) = arr
                            def script = Prescription.get(rx)
                            def cl = Clinic.get(clinic)
                            def pat = Patient.get(patient)

                            if( curClinic != cl ) {
                                curClinic = cl
                                addClinic.delegate = delegate
                                addClinic(cl.id, cl.name)
                            }

                            if( curPatient != pat ) {
                                curPatient = pat
                                addPatient.delegate = delegate
                                addPatient(pat.id, pat.firstName, pat.lastName)
                            }

                            prescription(id:script.id) {
                                prescriptionType(script.prescriptionType)
                                duration(script.duration)
                                drugName(script.drugName)
                                route(script.route)
                                refills(script.refills)
                            }
                        }
                    }
                }
            }

            def xml = XmlUtil.serialize(worklist)
            xml
        }
    } 
```

显然，我需要以某种方式让诊所关闭，直到我找到一家新诊所或达到收藏的尽头。与患者关闭相同。我只是不知道该怎么做。

提前感谢您的帮助。我需要让这个工作今晚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:02:15.670

您可以只使用`each`列表上的方法。您必须注意以下事项： 内部的每个匹配的方法调用`builder.bind`都将调用相应的方法/变量；因此您将需要不同的名称。那就更好了，因为你不会做出模棱两可的命名。您可以在`eachs`. 它有点大，但这会以您想要的方式填充您的 XML：

**更新：**

由于您的模型颠倒了，我做了以下操作：

```
// definition of the model and mock data
@Canonical class Prescription {
  int id
  String prescriptionType, duration, drugName, route
  int refills
  Clinic clinic
  Patient patient
}

@Canonical class Clinic {
  int id
  String name
}

@Canonical class Patient {
  int id
  String firstName, lastName
}

def patient2 = new Patient(2, "John", "Doe")
def patient4 = new Patient(4, "Sylvia", "Plath")

def clinic1 = new Clinic(1, "Clinic 1")
def clinic2 = new Clinic(2, "Clinic 2")

def prescriptions = [
  new Prescription(2, "Formulary", "duration", "Lipitor", "route", 5, clinic1, patient2),
  new Prescription(4, null, null, "Tums", null, 0, clinic2, patient2),
  new Prescription(5, null, null, "BandAids", null, 5, clinic2, patient4)
] 
```

最好的办法是反转模型，使其与 XML 结构相匹配。您可以使用以下代码段轻松反转它：

```
clins = prescriptions.inject([:].withDefault({ [:] })) { map, pres -> 
  map[ pres.clinic ] << [ (pres.patient) : pres ]
  map
} 
```

现在根据地图结构构建 XML：

builder = new groovy.xml.StreamingMarkupBuilder()

```
xml = builder.bind { 

  clinics { 

    clins.each { cliEntry -> cli = cliEntry.key

      clinic(id: cli.id, name: cli.name) {

        cliEntry.value.each { patEntry -> pat = patEntry.key

          patient(id: pat.id, firstName: pat.firstName, lastName: pat.lastName){

            patEntry.value.each { pres ->

              prescription(id: pres.id) {
                prescriptionType pres.prescriptionType
                duration pres.duration
                drugName pres.drugName
                route pres.route
                refills pres.refills
              }
            }
          }
        }
      }
    }
  } 
} 
```

和测试：

```
assert xml.toString() == """<clinics><clinic id='1' name='Clinic 1'><patient id='2' firstName='John' lastName='Doe'><prescription id='2'><prescriptionType>Formulary</prescriptionType><duration>duration</duration><drugName>Lipitor</drugName><route>route</route><refills>5</refills></prescription></patient></clinic><clinic id='2' name='Clinic 2'><patient id='2' firstName='John' lastName='Doe'><prescription id='4'><prescriptionType/><duration/><drugName>Tums</drugName><route/><refills>0</refills></prescription></patient><patient id='4' firstName='Sylvia' lastName='Plath'><prescription id='4'><prescriptionType/><duration/><drugName>Tums</drugName><route/><refills>0</refills></prescription></patient></clinic></clinics>""" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T05:19:40.943

全局 _index 变量、终止条件和 try..catch 废话在这里有些丑陋，但我已经在这里工作了很多小时，并且这段代码有效：

```
 import groovy.xml.StreamingMarkupBuilder
    import groovy.xml.XmlUtil

    import javax.ws.rs.GET
    import javax.ws.rs.Path
    import javax.ws.rs.Produces

    @Path('/api/worklist')
    class WorklistResource {
        def _index = null   // global index into groupedScripts collection

        def addClinic = { scripts, index ->
            addPatient.delegate = delegate
            def (rxId, clinicId, patientId) = scripts[index]
            def startingClinicId = clinicId
            def cl = Clinic.get(clinicId)

            clinic(id:cl.id, name:cl.name) {
                while( clinicId == startingClinicId ) {
                    _index = index
                    index = addPatient(scripts, index)
                    if( index == -1 ) return -1
                    try {
                        (rxId, clinicId, patientId) = scripts[++index]
                    } catch(NullPointerException e) {
                        return -1
                    }
                }
            }
            return _index
        }

        def addPatient = { scripts, index ->
            def result = index
            def (rxId, clinicId, patientId) = scripts[index]
            def startingPatientId = patientId
            def pat = Patient.get(patientId)

            patient(id:pat.id, firstName:pat.firstName, lastName:pat.lastName) {
                while( patientId == startingPatientId ) {
                    _index = index
                    def script = Prescription.get(rxId)
                    prescription(id:script.id) {
                        prescriptionType(script.prescriptionType)
                        duration(script.duration)
                        drugName(script.drugName)
                        route(script.route)
                        refills(script.refills)
                    }
                    try {
                        (rxId, clinicId, patientId) = scripts[++index]
                    } catch(NullPointerException e) {
                        return -1
                    }
                }
            }
            return _index
        }

        @GET
        @Produces(['application/xml','application/json'])
        String getWorklistRepresentation() {
            def groupedScripts = Prescription.createCriteria().list {
                createAlias('clinic', 'clinicAlias')
                createAlias('patient', 'patientAlias')
                projections {
                    groupProperty "id"
                    groupProperty "clinicAlias.id"
                    groupProperty "patientAlias.id"
                }
                order "clinicAlias.name"
                order "patientAlias.lastName"
                order "patientAlias.firstName"
            }

            def finished = false
            def worklist = new StreamingMarkupBuilder().bind {
                worklist {
                    clinics {
                        _index = 0
                        addClinic.delegate = delegate

                        while( !finished && _index < groupedScripts.size() ) {
                            _index = addClinic(groupedScripts, _index)
                            if( _index == -1 ) finished = true
                            ++_index
                        }
                    }
                }
            }

            def xml = XmlUtil.serialize(worklist)
            xml
        }
    } 
```

输出是：

```
 <worklist>
       <clinics>
          <clinic id="1" name="Clinic 1">
             <patient firstName="Mariah" id="3" lastName="Brookstone">
                <prescription id="1">
                   <prescriptionType>New</prescriptionType>
                   <duration>30 days</duration>
                   <drugName>Lisinopril 20mg Tablet</drugName>
                   <route>By Mouth</route>
                   <refills>2</refills>
                </prescription>
             </patient>
             <patient firstName="John" id="2" lastName="Doe">
                <prescription id="4">
                   <prescriptionType/>
                   <duration/>
                   <drugName>Tums</drugName>
                   <route/>
                   <refills>0</refills>
                </prescription>
             </patient>
          </clinic>
          <clinic id="2" name="Clinic 2">
             <patient firstName="Mariah" id="3" lastName="Brookstone">
                <prescription id="11">
                   <prescriptionType/>
                   <duration/>
                   <drugName>Milk Duds</drugName>
                   <route/>
                   <refills>0</refills>
                </prescription>
                <prescription id="12">
                   <prescriptionType/>
                   <duration/>
                   <drugName>Hershey</drugName>
                   <route/>
                   <refills>0</refills>
                </prescription>
                <prescription id="7">
                   <prescriptionType/>
                   <duration/>
                   <drugName>Skittles</drugName>
                   <route/>
                   <refills>0</refills>
                </prescription>
             </patient>
             <patient firstName="John" id="2" lastName="Doe">
                <prescription id="2">
                   <prescriptionType>Formulary</prescriptionType>
                   <duration>duration</duration>
                   <drugName>Lipitor</drugName>
                   <route>route</route>
                   <refills>5</refills>
                </prescription>
             </patient>
             <patient firstName="Sylvia" id="4" lastName="Plath">
                <prescription id="5">
                   <prescriptionType/>
                   <duration/>
                   <drugName>BandAids</drugName>
                   <route/>
                   <refills>0</refills>
                </prescription>
             </patient>
          </clinic>
          <clinic id="3" name="Clinic 3">
             <patient firstName="Jane" id="12" lastName="Doe">
                <prescription id="9">
                   <prescriptionType/>
                   <duration/>
                   <drugName>Reese's Pieces</drugName>
                   <route/>
                   <refills>0</refills>
                </prescription>
             </patient>
             <patient firstName="Jill" id="13" lastName="Doe">
                <prescription id="8">
                   <prescriptionType/>
                   <duration/>
                   <drugName>Toothpaste</drugName>
                   <route/>
                   <refills>0</refills>
                </prescription>
             </patient>
             <patient firstName="Jim" id="11" lastName="Doe">
                <prescription id="10">
                   <prescriptionType/>
                   <duration/>
                   <drugName>Hallmark</drugName>
                   <route/>
                   <refills>0</refills>
                </prescription>
             </patient>
             <patient firstName="John" id="2" lastName="Doe">
                <prescription id="6">
                   <prescriptionType/>
                   <duration/>
                   <drugName>Gauze</drugName>
                   <route/>
                   <refills>0</refills>
                </prescription>
             </patient>
          </clinic>
       </clinics>
    </worklist> 
```

这（几乎）正是我所追求的。

# html - 在响应式布局中隐藏元素？

> ID：14207109
> 
> 赞同：333
> 
> 时间：2013-01-08T01:50:57.813
> 
> 标签：html, css, twitter-bootstrap, responsive-design

通过引导程序查看，它们似乎支持折叠菜单栏项以用于较小的屏幕。页面上的其他项目是否有类似的东西？

例如，我有一个与 nav-pills 一起浮动的权利。在小屏幕上，这会导致问题。我想至少把它放到一个类似的点击显示更多下拉菜单中。

这在现有的 Bootstrap 框架中是否可行？

* * *

## 回答 #1

> 赞同：667
> 
> 时间：2013-12-27T14:53:46.390

## Bootstrap 添加了新的可见类

**超小型设备** 电话（<768px）`(Class names : .visible-xs-block, hidden-xs)`

**小型设备** 平板电脑（≥768px）`(Class names : .visible-sm-block, hidden-sm)`

**中型设备** 台式机（≥992px）`(Class names : .visible-md-block, hidden-md)`

**大型设备** 台式机（≥1200px）`(Class names : .visible-lg-block, hidden-lg)`

## 欲了解更多信息： http: [//getbootstrap.com/css/#responsive-utilities](http://getbootstrap.com/css/#responsive-utilities)

* * *

**以下自 v3.2.0 起已弃用**

* * *

超小型设备电话（<768px）`(Class names : .visible-xs, hidden-xs)`

小型设备平板电脑（≥768px）`(Class names : .visible-sm, hidden-sm)`

中型设备台式机（≥992px）`(Class names : .visible-md, hidden-md)`

大型设备台式机（≥1200px）`(Class names : .visible-lg, hidden-lg)`

* * *

**更老的引导程序**

* * *

`.hidden-phone, .hidden-tablet`等不受支持/已过时。

**更新：**

在 Bootstrap 4 中有两种类型的类：

*   当`hidden-*-up`视口位于给定断点或更宽时隐藏元素。
*   `hidden-*-down`当视口处于给定断点或更小时隐藏元素。

此外，`xl`为宽度超过 1200 像素的设备添加了新的视口。[欲了解更多信息，请单击此处](https://v4-alpha.getbootstrap.com/layout/responsive-utilities/#available-classes)。

* * *

## 回答 #2

> 赞同：191
> 
> 时间：2016-01-15T01:22:08.657

## Bootstrap 4 Beta 答案：

> **`d-block d-md-none`**隐藏在**中型、大型和超大型**设备上。
> 
> **`d-none d-md-block`**隐藏在**小型和超小型**设备上。
> 
> [![在此处输入图像描述](../Images/938989a4c3b1bf4578c0f72b6a240b58.png)](https://i.stack.imgur.com/1CdFT.png)

请注意，您也可以通过替换为内`d-*-block`联`d-*-inline-block`

* * *

旧答案：Bootstrap 4 Alpha

*   您可以使用这些类`.hidden-*-up`在给定尺寸和更大的设备上隐藏

    > **`.hidden-md-up`**隐藏在**中型、大型和超大型**设备上。

*   `.hidden-*-down`隐藏在给定尺寸和较小的设备上也是如此

    > **`.hidden-md-down`**隐藏在**中型、小型和超小型**设备上

*   visible-* 不再是 bootstrap 4 的选项

*   要**仅在中型设备上**显示，您可以将两者结合起来：

    > **`hidden-sm-down`**和**`hidden-xl-up`**

有效尺寸为：

*   `xs`适用于纵向模式的手机 (<34em)
*   `sm`适用于横向模式的手机 (≥34em)
*   `md`用于片剂 (≥48em)
*   `lg`台式机 (≥62em)
*   `xl`台式机 (≥75em)

这是自 Bootstrap 4，alpha 5（2017 年 1 月）开始的。更多细节在这里：http: [//v4-alpha.getbootstrap.com/layout/responsive-utilities/](http://v4-alpha.getbootstrap.com/layout/responsive-utilities/)

在 Bootstrap 4.3.x 上：[https ://getbootstrap.com/docs/4.3/utilities/display/](https://getbootstrap.com/docs/4.3/utilities/display/)

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2017-10-12T09:25:12.457

**Bootstrap 4.x 答案**

`hidden-*`从 Bootstrap 4 beta 开始删除类。

如果您想在中上显示，请使用这些`d-*`课程，例如：

```
<div class="d-none d-md-block">This will show in medium and up</div> 
```

如果您只想以较小的尺寸显示，请使用以下命令：

```
<div class="d-block d-md-none"> This will show only in below medium form factors</div> 
```

**屏幕尺寸和类图**

```
| Screen Size        | Class                          |
|--------------------|--------------------------------|
| Hidden on all      | .d-none                        |
| Hidden only on xs  | .d-none .d-sm-block            |
| Hidden only on sm  | .d-sm-none .d-md-block         |
| Hidden only on md  | .d-md-none .d-lg-block         |
| Hidden only on lg  | .d-lg-none .d-xl-block         |
| Hidden only on xl  | .d-xl-none                     |
| Visible on all     | .d-block                       |
| Visible only on xs | .d-block .d-sm-none            |
| Visible only on sm | .d-none .d-sm-block .d-md-none |
| Visible only on md | .d-none .d-md-block .d-lg-none |
| Visible only on lg | .d-none .d-lg-block .d-xl-none |
| Visible only on xl | .d-none .d-xl-block            | 
```

> 您无需使用显式类，而是`.visible-*`通过简单地不以该屏幕尺寸隐藏元素来使元素可见。您可以将一`.d-*-none`类与一`.d-*-block`类结合起来，以仅在给定的屏幕尺寸间隔上`.d-none.d-md-block.d-xl-none` 显示元素（例如，仅在中型和大型设备上显示元素）。

[文档](https://getbootstrap.com/docs/4.0/migration/#responsive-utilities)

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2013-01-08T02:24:22.100

您可以为任何模块输入这些模块类后缀，以更好地控制它的显示或隐藏位置。

```
.visible-phone  
.visible-tablet     
.visible-desktop    
.hidden-phone   
.hidden-tablet  
.hidden-desktop 
```

[http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html) 滚动到底部

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2014-10-25T11:44:15.607

我有几个澄清要在这里添加：

1) Bootstrap 3 中不推荐使用显示的列表（可见手机、可见平板电脑等）。新值是：

*   可见-xs-*
*   可见-sm-*
*   可见-md-*
*   可见-lg-*
*   隐藏-xs-*
*   隐藏-sm-*
*   隐藏-md-*
*   隐藏-lg-*

每个星号都转换为以下内容（我在下面仅显示 visible-xs-* ）：

*   可见-xs-块
*   可见-xs-内联
*   可见-xs-内联块

2）当您使用这些类时，您不要在前面添加句点（如上面答案的一部分所示）。

例如：

```
<div class="visible-md-block col-md-6 text-right text-muted">
   <h5>Copyright &copy; 2014 Jazimov</h5>
</div> 
```

3) 您可以使用 visible-* 和 hidden-*（例如，visible-xs 和 hidden-xs），但这些在 Bootstrap 3.2.0 中已被弃用。

有关更多详细信息和最新规格，请转到此处并搜索“可见”： http: [//getbootstrap.com/css/](http://getbootstrap.com/css/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-09-18T09:42:32.277

对于 Bootstrap 4.0 beta（我认为这将保留为最终版本）有一个变化 - 请注意隐藏的类已被删除。

请参阅文档：[https ://getbootstrap.com/docs/4.0/utilities/display/](https://getbootstrap.com/docs/4.0/utilities/display/)

为了在移动设备上隐藏内容并在更大的设备上显示，您必须使用以下类：

```
d-none d-sm-block 
```

第一个类集在所有设备上都显示 none，第二个类集为设备“sm”显示它（如果你想在不同的设备上显示，你可以使用 md、lg 等而不是 sm。

我建议在迁移之前阅读一下：

[https://getbootstrap.com/docs/4.0/migration/#responsive-utilities](https://getbootstrap.com/docs/4.0/migration/#responsive-utilities)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-08-15T11:56:47.683

All `hidden-*-up`, `hidden-*`classes 对我不起作用，所以我`hidden`之前添加了自制类`visible-*`（适用于当前的引导版本）。如果您只需要在一个屏幕上显示 div 并为所有其他屏幕隐藏，这将非常有用。

CSS：

```
.hidden {display:none;} 
```

HTML：

```
<div class="col-xs-12 hidden visible-xs visible-sm">
   <img src="photo.png" style="width:100%">
</div> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-08-13T02:26:09.193

附加 CSS 从移动视图中的所有页面中删除侧边栏：

```
@media only screen and (max-width:767px)
{
#secondary {
display: none;
}
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-16T12:35:47.517

在 boostrap 4.1 中（运行代码片段，因为我从 Bootstrap 文档中复制了整个表格代码）：

```
.fixed_headers {
  width: 750px;
  table-layout: fixed;
  border-collapse: collapse;
}
.fixed_headers th {
  text-decoration: underline;
}
.fixed_headers th,
.fixed_headers td {
  padding: 5px;
  text-align: left;
}
.fixed_headers td:nth-child(1),
.fixed_headers th:nth-child(1) {
  min-width: 200px;
}
.fixed_headers td:nth-child(2),
.fixed_headers th:nth-child(2) {
  min-width: 200px;
}
.fixed_headers td:nth-child(3),
.fixed_headers th:nth-child(3) {
  width: 350px;
}
.fixed_headers thead {
  background-color: #333;
  color: #FDFDFD;
}
.fixed_headers thead tr {
  display: block;
  position: relative;
}
.fixed_headers tbody {
  display: block;
  overflow: auto;
  width: 100%;
  height: 300px;
}
.fixed_headers tbody tr:nth-child(even) {
  background-color: #DDD;
}
.old_ie_wrapper {
  height: 300px;
  width: 750px;
  overflow-x: hidden;
  overflow-y: auto;
}
.old_ie_wrapper tbody {
  height: auto;
}
```

```
<table class="fixed_headers">
  <thead>
    <tr>
      <th>Screen Size</th>
      <th>Class</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Hidden on all</td>
      <td><code class="highlighter-rouge">.d-none</code></td>
    </tr>
    <tr>
      <td>Hidden only on xs</td>
      <td><code class="highlighter-rouge">.d-none .d-sm-block</code></td>
    </tr>
    <tr>
      <td>Hidden only on sm</td>
      <td><code class="highlighter-rouge">.d-sm-none .d-md-block</code></td>
    </tr>
    <tr>
      <td>Hidden only on md</td>
      <td><code class="highlighter-rouge">.d-md-none .d-lg-block</code></td>
    </tr>
    <tr>
      <td>Hidden only on lg</td>
      <td><code class="highlighter-rouge">.d-lg-none .d-xl-block</code></td>
    </tr>
    <tr>
      <td>Hidden only on xl</td>
      <td><code class="highlighter-rouge">.d-xl-none</code></td>
    </tr>
    <tr>
      <td>Visible on all</td>
      <td><code class="highlighter-rouge">.d-block</code></td>
    </tr>
    <tr>
      <td>Visible only on xs</td>
      <td><code class="highlighter-rouge">.d-block .d-sm-none</code></td>
    </tr>
    <tr>
      <td>Visible only on sm</td>
      <td><code class="highlighter-rouge">.d-none .d-sm-block .d-md-none</code></td>
    </tr>
    <tr>
      <td>Visible only on md</td>
      <td><code class="highlighter-rouge">.d-none .d-md-block .d-lg-none</code></td>
    </tr>
    <tr>
      <td>Visible only on lg</td>
      <td><code class="highlighter-rouge">.d-none .d-lg-block .d-xl-none</code></td>
    </tr>
    <tr>
      <td>Visible only on xl</td>
      <td><code class="highlighter-rouge">.d-none .d-xl-block</code></td>
    </tr>
  </tbody>
</table>
```

[https://getbootstrap.com/docs/4.1/utilities/display/#hiding-elements](https://getbootstrap.com/docs/4.1/utilities/display/#hiding-elements)

# java - 将数字组合成一个 Java 变量

> ID：14207110
> 
> 赞同：3
> 
> 时间：2013-01-08T01:51:10.077
> 
> 标签：java

我正在尝试制作一个程序，该程序根据调用的 int`length`向名为的变量添加一定数量的 9 `nines`。例如，如果`length`是4，那么我想`nines`等于9999。如果`length`是7，我想`nines`等于9999999。 的值`length`需要对应于`nines.`Is this possible, 如果可以，怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T01:53:58.213

是的，有可能：观察你的目标数是 10 的 Length 次方，减一：

```
int res = Math.pow(10, length) - 1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T01:53:05.727

你可以这样做：

```
StringBuilder sb = new StringBuilder();
while (length-- > 0) {
    sb.append('9');
]
nines = sb.toString(); 
```

或者，如果`nines`是`int`：

```
nines = 0;
while (length-- > 0) {
    nines = 10 * nines + 9;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T01:52:58.060

最简单的方法：

```
String nines = "";
for(int i = 0; i < length; i++) {
  nines += "9";
}
return Integer.parseInt(nines); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T01:55:54.733

您可以通过创建具有正确数量的数字字符的字符串来做到这一点，然后将其解析为`int`. 像这样的东西...

```
String bigNumber = "";
for (int i=0;i<length;i++){
    bigNumber += "9";
    }
int intNumber = Integer.parseInt(bigNumber); 
```

但是，请注意，文件的大小是有限制的`int`。我建议你...

1.  也许尝试使用可以容纳更大数字的东西，例如`long`（意识到`long`仍然有限制，但它的限制比 更高`int`）。
2.  提供错误检查 - 如果字符太多或数字太大，向用户显示错误，而不是让您的应用程序崩溃。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T02:12:55.633

如果您不反对包含另一个库，则可以使用 Apache Commons Lang `StringUtils.repeat` [http://commons.apache.org/lang/api-release/org/apache/commons/lang3/StringUtils.html#repeat(char](http://commons.apache.org/lang/api-release/org/apache/commons/lang3/StringUtils.html#repeat(char) , int )

```
String nines = StringUtils.repeat('9',length); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-08T02:13:10.560

既然我们在...

```
char[] nineChars = new char[length];
Arrays.fill(nineChars, '9');

String nines = new String(nineChars); 
```

# sql - 如何将两个选择与不同的 where 子句结合起来？

> ID：14207111
> 
> 赞同：0
> 
> 时间：2013-01-08T01:51:10.273
> 
> 标签：sql, sql-server, database

```
select kota ,total, totalsum from 
(
SELECT  i.[Antam_Unit] as kota ,count(p.[Id_Pks_Pk])as total FROM [SIMPKBL].[dbo].[Pks_Pk] p join [SIMPKBL].[dbo].[Par_Unit_Antam] i on  i.Id_Unit_Antam = p.Id_Unit_Antam  group by i.[Id_Unit_Antam],i.Antam_Unit
UNION ALL
SELECT  i.[Antam_Unit] as kota , count(p.[Id_Proposal_Pk])as totalsum  FROM [SIMPKBL].[dbo].[Pks_Pk] p join [SIMPKBL].[dbo].[Par_Unit_Antam] i on  i.Id_Unit_Antam = p.Id_Unit_Antam where YEAR(p.Tanggal_Cetak_Pks_Pk) = '2012'   group by i.[Id_Unit_Antam],i.Antam_Unit 
) t
group by kota,total 
```

我想要这样的输出：

```
kota total totalsum
A     12      4
B     16      5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:04:18.493

由于查询非常相似，因此它们似乎可以合并为一个`select`：

```
select i.[Antam_Unit] as kota,
  count(p.[Id_Pks_Pk]) as total,
  count( case when YEAR(p.Tanggal_Cetak_Pks_Pk) = '2012' then p.[Id_Proposal_Pk] else null end ) as totalsum
  FROM [SIMPKBL].[dbo].[Pks_Pk] p join [SIMPKBL].[dbo].[Par_Unit_Antam] i on  i.Id_Unit_Antam = p.Id_Unit_Antam
  group by i.[Id_Unit_Antam], i.Antam_Unit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:04:36.480

如果我正确理解了您的要求，则可以使用以下简单语句来实现您正在寻找的结果：

```
SELECT  i.[Antam_Unit] as kota, 
count(p.[Id_Pks_Pk]) as total,
SUM(CASE WHEN YEAR(p.Tanggal_Cetak_Pks_Pk) = '2012' AND p.[Id_Proposal_Pk] IS NOT NULL THEN 1 ELSE 0 END) as totalsum  
FROM [SIMPKBL].[dbo].[Pks_Pk] p 
 join [SIMPKBL].[dbo].[Par_Unit_Antam] i 
 on  i.Id_Unit_Antam = p.Id_Unit_Antam 
group by i.[Id_Unit_Antam],i.Antam_Unit 
```

# vba - VBA刷新onchange事件内的目标单元格内容

> ID：14207112
> 
> 赞同：0
> 
> 时间：2013-01-08T01:51:16.283
> 
> 标签：vba, excel, onchange

在某些工作表上使用 onchange 事件时，我希望在 onchange 脚本中更改目标单元格的值。

我还没有找到办法做到这一点。我试过了：

```
Target = "some value"
Range(Target.Address) = "some value"
Target.Value = "some value" 
```

但无济于事。

我知道这可能会再次触发 onchange 事件，但脚本已为此做好了准备。如果它不应该被触发，我可以使用

```
Application.EnableEvents = False 
```

在任何更新和

```
Application.EnableEvents = True 
```

完成后...

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T02:13:36.347

我知道这不是一个很好的答案，但我需要能够发布代码。

在工作表代码部分输入以下内容对我来说绝对没问题：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Application.EnableEvents = False
    Target.Value = "some value"
    Application.EnableEvents = True
End Sub 
```

我选择一个单元格，输入“a”并按回车；它被文本“一些价值”所取代。如果您希望在键入时替换单元格内容，那您就不走运了；据我所知，该事件只会在单元格内容更改*后触发。*

# php - JSON PHP 无法从 Steam URL 调用值

> ID：14207115
> 
> 赞同：0
> 
> 时间：2013-01-08T01:52:13.177
> 
> 标签：php, json, steam

我正在尝试使用 Steam 登录创建一个网站，但是当我尝试从 JSON 调用一个值时，它不起作用。除了获取 JSON 值外，一切都在源代码中有效。我什至尝试打印蒸汽 ID，所以我知道 ID 有效。该 URL 也有效。

这是[我的源代码](http://pastebin.com/td4CdvQU)：

```
<?php
require 'openid.php';
try {
    $openid = new LightOpenID('workinganonymouswebsite.com');
    if (!$openid->mode) {
        $openid->identity = 'http://steamcommunity.com/openid';
        header('Location: ' . $openid->authUrl());
    } elseif ($openid->mode == 'cancel') {
        echo 'User has canceled authentication!';
    } else {
        $steamurl = ($openid->validate() ? $openid->identity . '' : 'error');
        if ($steamurl == 'error') {
            print "There was an error signing in.";
        } else {
            $id          = end(explode('/', $steamurl));
            $jsonurl     = "http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=XXXXXXXXXXXXXXXXXX&steamids=" . $id . "&format=json";
            $json        = file_get_contents($jsonurl, 0, null, null);
            $json_output = json_decode($json);
            echo $json_output['players']['personaname'];
        }
    }
} catch (ErrorException $e) {
    echo $e->getMessage();
}
?> 
```

这是网站上的 JSON。

```
{
"response": {
    "players": [
        {
            "steamid": "76561198049205920",
            "communityvisibilitystate": 3,
            "profilestate": 1,
            "personaname": "baseman101",
            "lastlogoff": 1357603378,
            "profileurl": "http://steamcommunity.com/id/baseman101/",
            "avatar": "http://media.steampowered.com/steamcommunity/public/images/avatars/24/24bb7c0505db7efe1f1a602d09a5ea412e0ab4bd.jpg",
            "avatarmedium": "http://media.steampowered.com/steamcommunity/public/images/avatars/24/24bb7c0505db7efe1f1a602d09a5ea412e0ab4bd_medium.jpg",
            "avatarfull": "http://media.steampowered.com/steamcommunity/public/images/avatars/24/24bb7c0505db7efe1f1a602d09a5ea412e0ab4bd_full.jpg",
            "personastate": 1,
            "primaryclanid": "103582791429521408",
            "timecreated": 1316469294,
            "loccountrycode": "US",
            "locstatecode": "VA",
            "loccityid": 3918
        }
    ]

}
} 
```

我试过用谷歌搜索一切。如果有什么我错过了，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:27:22.370

感谢您所有的帮助。我基本上把 JSON 代码放在一个变量中，从 Steam 网站上检索它。这是最好的解决方案，我会坚持下去。

```
<?php
require 'openid.php';
try {
$openid = new LightOpenID('blah.com');
if (!$openid->mode) {
    $openid->identity = 'http://steamcommunity.com/openid';
    header('Location: ' . $openid->authUrl());
} elseif ($openid->mode == 'cancel') {
    echo 'User has canceled authentication!';
} else {
    $steamurl = ($openid->validate() ? $openid->identity . '' : 'error');
    if ($steamurl == 'error') {
        print "There was an error signing in.";
    } else {
        $id          = end(explode('/', $steamurl));
        $context = stream_context_create(array('http' => array('header'=>'Connection: close\r\n')));
        $json_source = file_get_contents("http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=XXXXXXXXXXXXXXXXXXXXXXXX&steamids=" . $id . "&format=json",false,$context);
        $json_output = json_decode($json_source,true);
        $json_output->response->players[0]->personaname;
        echo $json_output["response"]["players"][0]["personaname"];
    }
}
} catch (ErrorException $e) {
echo $e->getMessage();
}
?> 
```

谢谢你，Passerby 和 hakre 的帮助。

将来，我必须创建 cookie 和所有简单的东西。实际上我现在就开始了。

# c# - 是否可以突出显示列表框中的某些字符（c#winform）

> ID：14207116
> 
> 赞同：1
> 
> 时间：2013-01-08T01:52:19.697
> 
> 标签：c#, winforms, listbox

当用户在文本框中键入字符时，我想编写一个本地搜索程序，列表框应该列出所有可能的结果。

例如。如果用户键入“AB”，则列表框会显示可能的结果，例如：

```
"AB"
"ABDDD"
"ADDDB" 
```

我希望强调字符“A”和“B”，例如粗体或黄色背景，但我找不到为列表框中的某些字符赋予样式的方法。是否可以？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T01:59:03.087

是的，这在winforms中是可能的。它在 WPF 中要容易得多。要在 winforms 中完成此操作，您需要使用`drawitem`事件，[此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.drawitem.aspx)对此进行了说明。此外，[这](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsBaseListBoxControl_DrawItemtopic)是一个使用它`listbox`来更改列表框外观的示例。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:47:29.137

我能够完全完成您在此控件中寻找的内容：[https](https://advancedlistbox.codeplex.com/) ://advancedlistbox.codeplex.com/ 。它支持过滤，因此您可以使用它来修剪列表，就像您尝试做的那样。

# javascript - 单击时显示输入字段的标题工具提示

> ID：14207126
> 
> 赞同：0
> 
> 时间：2013-01-08T01:53:34.330
> 
> 标签：javascript, jquery, tooltip, jquery-ui-tooltip

不使用任何工具提示库，除了默认情况下随 jQuery 提供的内容。
jsfiddle [http://jsfiddle.net/bobbyrne01/xZzQ9/](http://jsfiddle.net/bobbyrne01/xZzQ9/)
有带有工具提示的输入字段，在悬停时可以很好地显示..

```
Name:
<input type="text" id="name" title="Please input your name" />
<button id="start" type="button">Click Me!</button> 
```

工具提示的jquery设置：

```
$(document).ready(function () {

    $(document).tooltip();
    $("#name").tooltip({
        show: {
            effect: "slideDown",
            delay: 250
        }
    });
}); 
```

单击按钮时是否可以以编程方式显示相同的工具提示？例如

```
$("#start").click(function () {
    //show tooltip
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:01:08.673

假设您的示例代码段遵循工具提示库的 API，并且从您的问题来看，我认为您不想在提交时重定向。如果是这两件事，这段代码**可能会**起作用

```
$('#start').submit(function(e) {
  e.preventDefault();
  $("#name").tooltip({
    show: {
      effect: "slideDown",
      delay: 250
    }
  });
}); 
```

You are grabbing the event object that gets sent in as the first argument to jQuery event functions and stopping it from submitting the page and redirecting, the default action. I hope this is what you meant.

You will have to handle that submit now all by yourself

## Update

Here's a fiddle that seems to hit more of the actual question you were asking. [http://jsfiddle.net/xZzQ9/3/](http://jsfiddle.net/xZzQ9/3/)

# networking - 如何在我的数据中心设置 CloudFoudry

> ID：14207132
> 
> 赞同：0
> 
> 时间：2013-01-08T01:54:32.797
> 
> 标签：networking, cloud-foundry

我想在我的数据中心部署 CloudFoundry 私有。我确实想公开端口 80 流量以进行 Internet 访问。

我不想在公共网络上公开所有 CloudFoundry 角色（云控制器、DEA、Haelth Manager ..等）。

是否有关于配置 Cloud Foundry 的最佳实践文档？

我是否需要实现一个将端口 80 端口转发到 Uhuru NGIX 路由器的外部路由器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:51:29.070

网络隔离在云层完成，即 vSphere、OpenStack、VCloud 或 AWS。假设您使用 bosh 进行部署，您需要配置您的网络，以便所有内容都在专用网络上，但路由器除外，路由器需要在面向互联网的一侧有一个接口。但是在路由器之前，你应该有你的负载均衡器，所以即使是路由器也不需要直接连接到互联网。

# mysql - 如何将数据存储为 facebook 的“喜欢”

> ID：14207137
> 
> 赞同：5
> 
> 时间：2013-01-08T01:56:05.810
> 
> 标签：mysql, database

我有存储在数据库中的对象，它是一些带有属性的文本。该文本有评级。我需要存储这个评级，并防止一个用户多次提高这个评级。如果我将“text id”和“user id”存储在其他表中并计算所有需要“text id”的记录，我的表中记录太多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T02:09:58.447

有两种方法：

1.  您可以使用多对多关系，即使用名称为“user_likes”的单独表，它将有`user_id`和`like_id`列，它们都是主键（它使用户可能只喜欢一次like_object）

2.  另一种方式 - 高流量网站使用：用户表中的每个用户记录都有列：喜欢这只是序列化数组或 json，等等。在更新此列之前，您的应用程序检索此数据并查找特定`like_object_id`是否不存在 - 您更新数据库。请注意，在这种情况下，所有关心应用程序中的数据一致性（例如，like_object_id 存在于某些用户记录中，但不存在于 like_object 表中）都应该在您的应用程序代码中实现，而不是在数据库中实现。

PS对不起我的英语，但我尽力解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-20T20:11:22.113

我将喜欢的内容与帖子本身一起存储，但不确定其性能，因为我的网站都没有达到非常重的负载。

但我执行以下操作：

```
Post {
id int;
likes_count int; // likes count to quickly retrive it
likes string; // id of the users liked this post, comma separated
} 
```

当用户喜欢一个帖子时，（使用 ajax）：

1.  UI 将直接更新并显示用户喜欢该帖子

2.  ajax 将使用 post id 和 user id 向服务器发送请求，然后 post 数据将更新如下：

```
post.likes_count += 1;
post.likes += userId + ',' ; 
```

当用户重新加载页面时，它会检查他的 id 是否在喜欢，然后帖子将显示为`liked`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-26T00:45:34.840

> 如果我将“text id”和“user id”存储在其他表中并计算所有需要“text id”的记录，我的表中记录太多。

你怎么知道什么是太多记录？

我支持的一些 MySQL 表有数十亿行。如果他们需要更多，他们会将数据拆分到多个 MySQL 服务器。100 万行对于 MySQL 数据库来说不是问题。

如果您想限制数据以便每个用户只能“喜欢”给定文本一次，则必须为每个用户单独存储数据。如果用户可以“不喜欢”他们以前喜欢的文本，这也是正确的。

```
CREATE TABLE likes (
  user_id BIGINT UNSIGNED NOT NULL,
  post_id BIGINT UNSIGNED NOT NULL,
  PRIMARY KEY (user_id, post_id),
  KEY (post_id, user_id)
); 
```

此示例表使用其主键约束来确保每个用户只能喜欢给定帖子一次。通过添加第二个索引，这有助于优化对特定帖子的喜欢的查询。

每行只有 16 个字节，加上索引的大小。我用超过 100 万行填充了一个 InnoDB 表，它使用了大约 60MB。

```
mysql> show table status\G

           Name: likes
         Engine: InnoDB
           Rows: 1046760
    Data_length: 39419904
   Index_length: 23658496 
```

如今，将数据库存储在 TB 大小的存储空间上很常见，因此 60MB 的表似乎并不算大。

# string - 如何存储两个字符串之间的不同值？

> ID：14207138
> 
> 赞同：1
> 
> 时间：2013-01-08T01:56:20.593
> 
> 标签：string, diff

例如，这里是简单的文本：

`This is a texting sentence.`

这是修改后的：

`This is a testing sentence.`

如您所见，`x`替换为`s`，我该如何存储这些信息？当然，我可以存储整个新字符串，但我想存储差异，是否有任何格式或标准来表示字符串的差异？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:16:36.077

[RCS](http://en.wikipedia.org/wiki/Revision_Control_System)将是存储文件差异的一种标准方式。

# db2 - 捕获表中的值大写或小写

> ID：14207139
> 
> 赞同：0
> 
> 时间：2013-01-08T01:56:26.573
> 
> 标签：db2, cognos, cognos-8, cognos-bi

我想要

```
SELECT * FROM table1 WHERE name=petter 
```

现在，如果表中有多种类型，`petter`例如 `PETTER`, `Petter`And `petter`。

想要在 cognos report studio 中考虑这三个（PETTER、Petter、petter）的命令？

或者在 DB2 中不使用 'IN' 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T05:29:07.827

我想你想要[`UPPER`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000867.html)（或者[`LOWER`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0002411.html)，效果应该是一样的）：

```
SELECT *
FROM table1
WHERE UPPER(name) = 'PETTER' 
```

但是请记住，如果您有一个索引 on `name`，那么它将无法使用该索引。您可以使用该功能创建（至少如果您在 z/OS 上）索引。在其他平台上，您可以创建[生成的列](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.dbobj.doc/doc/c0020109.html)并在其上创建索引。

# sql-server-2005 - 尝试更改 SQL Server 数据库中的架构时出现语法错误

> ID：14207140
> 
> 赞同：0
> 
> 时间：2013-01-08T01:56:29.880
> 
> 标签：sql-server-2005, syntax-error, database-schema, alter, management-studio-express

我正在尝试重命名 SQL Server 2005 上旧数据库中的十几个表的架构。我使用的是 SQL Server Management Studio Express 9.0 版。根据此处找到的详细建议以及其他站点上的几个论坛，我一直在尝试这个简单的命令：

```
ALTER SCHEMA newschemaname TRANSFER oldschemaname.table1 
```

我一直收到此错误：

> *消息 156，级别 15，状态 1，第 1 行
> 关键字“SCHEMA”附近的语法不正确*

无论是直接在“新建查询”窗口中运行还是构建到存储过程中，都是一样的。

数据库的所有者是“SA”，可以追溯到几年前我的网络主机（物理服务器的所有者）首次设置此数据库时。这让我认为可能存在权限问题，或者所有者名称和我正在使用的登录名之间存在一些模糊的不匹配。但如果这是真的，我希望错误告诉我我无权执行该命令。

我是否遗漏了一些明显的语法错误，或者我是否需要更深入地研究所有权和权限以获得解决此问题的权利？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-23T17:11:19.587

新的 Schema 名称需要放在括号中，否则会失败

示例语句： `ALTER SCHEMA [NewSchemaName] TRANSFER dbo.Tracking`

# c# - 使用 .ini 的 SQL 连接

> ID：14207141
> 
> 赞同：-4
> 
> 时间：2013-01-08T01:56:42.917
> 
> 标签：c#, sql-server

伙计们，我还是开发系统的新手，我遇到过这个

这是我用来连接的字符串。它在一个类里面。

```
 public string connections1 = "user id=sa;" +
                              "password=;server=SEAN\\SQLEXPRESS;" +
                              "Trusted_Connection= false;" +
                              "database= METROEXPRESS; "; 
```

如何更改此设置以将连接信息放入`.ini`文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:15:16.537

您不会使用 .ini 文件；您将使用 .config 文件，这是一个包含您的配置的 XML 文件。如果您正在做一个富客户端应用程序（控制台、winforms、wpf），请将应用程序配置添加到您的项目中并从那里开始（查找该部分）。如果你正在做一个 asp.net 应用程序，你应该已经有一个 web.config，你也可以在其中添加一个部分。

这是一个例子：[http ://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/9a8c9f5a-092e-4c4a-87bb-9f35d8f55da1/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/9a8c9f5a-092e-4c4a-87bb-9f35d8f55da1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:17:21.923

.NET 和 C# 没有内置机制来编辑 *.ini 文件。.NET 中配置文件的标准格式是 XML。

如果您仍想使用 *.ini 文件，请检查下一个问题。 [读/写一个INI文件](https://stackoverflow.com/questions/217902/reading-writing-ini-file-in-c-sharp)

# ios - 在 UITableViewController 中使用 UISearchDisplayController 时断言失败

> ID：14207142
> 
> 赞同：80
> 
> 时间：2013-01-08T01:56:56.913
> 
> 标签：ios, ios6, uitableview, uisearchdisplaycontroller

我一直在尝试向我的应用程序中的 TableViewController 添加简单的搜索功能。我遵循了 Ray Wenderlich 的教程。我有一个带有一些数据的 tableView，我在情节提要中添加了搜索栏 + 显示控制器，然后我有了以下代码：

```
#pragma mark - Table View
     - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"BreedCell" forIndexPath:indexPath];

        //Create PetBreed Object and return corresponding breed from corresponding array
        PetBreed *petBreed = nil;

        if(tableView == self.searchDisplayController.searchResultsTableView)
            petBreed = [_filteredBreedsArray objectAtIndex:indexPath.row];
        else
            petBreed = [_breedsArray objectAtIndex:indexPath.row];

        cell.accessoryType  = UITableViewCellAccessoryDisclosureIndicator;
        cell.textLabel.text = petBreed.name;

        return cell;
    }

#pragma mark - Search
    -(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString {
        [_filteredBreedsArray removeAllObjects];
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF.name contains[c] %@",searchString];
        _filteredBreedsArray = [[_breedsArray filteredArrayUsingPredicate:predicate] mutableCopy];

        return YES;
    }

    -(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchScope:(NSInteger)searchOption {
        // Tells the table data source to reload when scope bar selection changes

        [_filteredBreedsArray removeAllObjects];
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF.name contains[c] %@",self.searchDisplayController.searchBar.text];
        _filteredBreedsArray = [[_breedsArray filteredArrayUsingPredicate:predicate] mutableCopy];
        return YES;
    } 
```

标准的东西，但是当我在搜索栏中输入文本时，它每次都会因以下错误而崩溃：

```
2013-01-07 19:47:07.330 FindFeedo[3206:c07] *** Assertion failure in -[UISearchResultsTableView dequeueReusableCellWithIdentifier:forIndexPath:], /SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:4460
2013-01-07 19:47:07.330 FindFeedo[3206:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'unable to dequeue a cell with identifier BreedCell - must register a nib or a class for the identifier or connect a prototype cell in a storyboard' 
```

我知道在 iOS 6 中，单元格的处理和出队系统发生了变化，并且搜索使用了不同的 tableView，所以我认为问题是带有过滤结果的搜索 tableView 不知道单元格，所以我把这在我的 viewDidLoad 中：

```
[self.searchDisplayController.searchResultsTableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"BreedCell"]; 
```

瞧！它起作用了...仅在您第一次搜索时。如果您返回原始结果并再次搜索，应用程序会因相同的错误而崩溃。我想也许添加所有

```
if(!cell){//init cell here}; 
```

向 cellForRow 方法添加内容，但这不违背 dequeueReusableCellWithIdentifier:forIndexPath: 方法的全部目的吗？无论如何，我迷路了。我错过了什么？请帮忙。提前感谢您的所有时间（：

亚历克斯。

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2013-01-08T18:50:38.960

尝试在 dequeueReusableCellWithIdentifier 中使用 self.tableView 而不是 tableView：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"BreedCell"];

    //Create PetBreed Object and return corresponding breed from corresponding array
    PetBreed *petBreed = nil;

    if(tableView == self.searchDisplayController.searchResultsTableView)
        petBreed = [_filteredBreedsArray objectAtIndex:indexPath.row];
    else
        petBreed = [_breedsArray objectAtIndex:indexPath.row];

    cell.accessoryType  = UITableViewCellAccessoryDisclosureIndicator;
    cell.textLabel.text = petBreed.name;

    return cell;
} 
```

这段代码工作得很好

**笔记**

如果您有自定义高度单元格，请不要使用

```
[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

改用这个

```
[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-08-14T09:48:25.567

它在第一次运行时运行良好但如果您退出结果表并返回进行另一次搜索时崩溃的原因是因为`UITableView`每次进入搜索模式时搜索显示控制器都会加载一个新的。

通过搜索模式，我的意思是，您已经点击了文本字段并开始输入，此时会生成一个表格视图来显示结果，通过点击取消按钮退出此模式。当您第二次点击文本字段并再次开始输入时 - 这是第二次进入“搜索模式”。

因此，为了避免崩溃，您应该为表格视图注册单元类以在`searchDisplayController:didLoadSearchResultsTableView:`委托方法（from `UISearchDisplayDelegate`）中使用，而不是在您的控制器`viewDidLoad`方法中使用。

如下：

```
- (void)searchDisplayController:(UISearchDisplayController *)controller didLoadSearchResultsTableView:(UITableView *)tableView
{
    [tableView registerClass:[DPContentTableCell class] forCellReuseIdentifier:cellIdentifier];
    [tableView registerClass:[DPEmptyContentTableCell class] forCellReuseIdentifier:emptyCellIdentifier];
} 
```

这让我感到意外，因为在 iOS 7 上……表格视图正在被重用。因此，您可以根据需要注册课程`viewDidLoad`。为了遗产，我将在我提到的委托方法中保留我的注册。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-07-12T18:30:24.890

搜索后，cellForRowAtIndexPath 方法的“tableView”似乎不是您定义的 Table 的实例。因此，您可以使用定义单元格的表格实例。代替：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath]; 
```

采用：

```
UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath]; 
```

（不要使用 cellForRowAtIndexPath 方法的**tableView**，使用**self.tableView**。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-24T14:51:06.403

在不使用“indexPath”的情况下将单元格出列，如果您获得 nil 元素，则必须手动分配它。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"YourCellId"];
    if (!cell)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"YourCellId"];

    // fill your cell object with useful stuff :)

    return cell;
} 
```

当您有一个分段的主列表和一个普通的搜索列表时，尝试使用 self.tableView 使单元格出列可能会导致崩溃。相反，此代码适用于任何情况。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-02T20:23:50.283

当我遇到这个问题时，解决方案是将`tableView`dequeueReusableCellWithIdentifier:@yourcell替换为`self.tableView`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-10T15:49:35.153

我也在研究那个教程。默认的 TableViewController 具有“forIndexPath”，在他的示例中它不存在。一旦我删除它，搜索就会起作用。

```
//Default code
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

//Replace with
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-04-18T17:43:35.810

对于 swift 3，您只需要添加自我：

```
func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell
{
    let cell = self.tableView.dequeueReusableCell(withIdentifier: "yourCell", for: indexPath) as! YourCell

    ...
} 
```

# multithreading - 多线程应用，并行读取和写入可能性

> ID：14207145
> 
> 赞同：1
> 
> 时间：2013-01-08T01:57:24.540
> 
> 标签：multithreading

例如，我有一个多线程应用程序，可以表示为：

```
Data bigData;

void thread1()
{
  workOn(bigData);
}
void thread2()
{
  workOn(bigData);
}
void thread3()
{
  workOn(bigData);
} 
```

很少有线程在处理数据。我可以保持原样，但问题是有时（很少）数据会被 thread4 修改。

```
void thread4()
{
  sometimesModifyData(bigData);
} 
```

可以在此处添加关键部分，但对多线程没有意义，因为只有一个线程可以同时处理数据。

在使其线程安全的同时使其感知多线程的最佳方法是什么？

我正在考虑一种状态（sempahore？），它会阻止同时读取和写入，但会允许并行读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:10:02.757

这称为[读写锁](https://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock)。您可以实现所谓的互斥锁，以确保在写入进行时没有人读取，并且在读取进行时没有人写入。解决问题的一种方法是设置标志。如果作者要修改某些内容，请打开锁。在此之后，没有更多的读者可以阅读，并且在所有当前读者都读完之后，作者将开始完成其工作，然后读者再次阅读。

# javascript - 2 多个 JavaScript 间隔计时器的问题

> ID：14207153
> 
> 赞同：0
> 
> 时间：2013-01-08T01:59:05.333
> 
> 标签：javascript, setinterval, clearinterval

我正在构建一个应用程序，它可能会在单个网页上为用户提供无限的倒数计时器。每个计时器都被设计为相互独立。例如，点击计时器 A 将倒计时 10 分钟，点击计时器 B 将倒计时 2 小时。只需单击一下即可随时取消任何计时器。（计时器基本上是html按钮）我正在使用Javascript的window.setInterval（）每秒倒计时

```
function initTimer()
{
    window.clearInterval(myTimer);
    myTimer = window.setInterval(function (){Countdown()}, 1000);
} 
```

我的倒计时功能如下所示：

```
function Countdown()
{
 if (((intCurrentTime == intEndTime) || (intCurrentTime > intEndTime))||(blnIsAbort == true))
     {
        isActive=false;
        Toggle(btnID, intButtonType, intCurrentTime, intTimeDelay,blnIsAbort); //toggles the button state
        clearInterval(myTimer);
     }
     else
     {
        isActive=true;
        intCurrentTime++;
        UpdateTimer((intEndTime - intCurrentTime), btnID);
     }
} 
```

intCurrentTime 是我当前的服务器时间，intEndTime 是从 SQL 数据库中检索的，当用户决定终止计时器时，blnIsAbort 为真。(blnIsAbort=true)

1.) 现在我遇到的第一个问题是，当我刷新网页时 clearInterval(myTimer); 似乎不起作用，而是在一个按钮上运行了两个计时器。（我在页面加载和单击按钮时调用 initTimer()）。

2.）当我尝试取消计时器时，这导致了我的第二个问题，单击按钮 A 也会清除按钮 B 的计时器。

任何有助于避免这些问题的帮助将不胜感激。也许有更有效的方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:00:11.073

你是否试图实现这样的目标：http: [//jsfiddle.net/zVMaQ/1/](http://jsfiddle.net/zVMaQ/1/)

1.  在这里，我创建了一个简单的`CountDownTimer`类。
2.  而不是使用`setInterval`我已经使用`setTimeout`的更准确。
3.  我为每个计时器创建了一个超时而不是多个超时。
4.  清除计时器就像重置计时器`tick`方法一样简单。
5.  我已经使用[javascript/augment](https://github.com/javascript/augment)来构建计时器类。

您可以轻松修改它以满足您的需求。

# c++ - 用 TBB 编译 R 包

> ID：14207154
> 
> 赞同：1
> 
> 时间：2013-01-08T01:59:14.680
> 
> 标签：c++, r, parallel-processing, tbb

我想使用 TBB（线程构建块）编译 R 包。我在网上用了一个简单的例子来测试是否可以用 TBB 开发 R 包。

我创建了 Makevars 文件，其中包含 gcc 的这些标志：

```
PKG_CPPFLAGS=-I/opt/tbb41_20121003oss/include/ -O3 -g3 -Wall -c -fmessage-length=0
PKG_LIBS=-L/opt/tbb41_20121003oss/build/linux_intel64_gcc_cc4.4.6_libc2.12_kernel2.6.32_release/ 
```

源代码是：

```
#include <iostream>
#include <string>
#include <algorithm>
#include "tbb/parallel_for.h"
#include "tbb/blocked_range.h"

using namespace tbb;
using namespace std;
static const size_t N = 23;

class SubStringFinder {
 const string str;
 size_t *max_array;
 size_t *pos_array;
   public:
    void operator() ( const blocked_range<size_t>& r ) const {
    for ( size_t i = r.begin(); i != r.end(); ++i ) {
    size_t max_size = 0, max_pos = 0;
    for (size_t j = 0; j < str.size(); ++j)
    if (j != i) {
    size_t limit = str.size()-max(i,j);
    for (size_t k = 0; k < limit; ++k) {
      if (str[i + k] != str[j + k]) break;
      if (k > max_size) {
        max_size = k;
        max_pos = j;
      }
    }
  }
  max_array[i] = max_size;
  pos_array[i] = max_pos;
 }
 }
 SubStringFinder(string &s, size_t *m, size_t *p) :
  str(s), max_array(m), pos_array(p) { }
};

extern "C" {
int test() {

 string str[N] = { string("a"), string("b") };
 for (size_t i = 2; i < N; ++i) str[i] = str[i-1]+str[i-2];
 string &to_scan = str[N-1];
 size_t num_elem = to_scan.size();

  size_t *max = new size_t[num_elem];
  size_t *pos = new size_t[num_elem];

  parallel_for(blocked_range<size_t>(0, num_elem ),
           SubStringFinder( to_scan, max, pos ) );
   //
  for (size_t i = 0; i < num_elem; ++i)
  cout << " " << max[i] << "(" << pos[i] << ")" << endl;
  delete[] pos;
  delete[] max;

}
} 
```

当我编译代码时，我得到这个错误：

```
 library/2.14/test/libs/test.so: undefined symbol: _ZTIN3tbb4taskE 
```

如果我删除这一行，我可以编译程序：

```
parallel_for(blocked_range<size_t>(0, num_elem ),
           SubStringFinder( to_scan, max, pos ) ); 
```

这使得 TBB 库毫无用处！

另外我添加了

```
 export /opt/tbb41_20121003oss/build/linux_intel64_gcc_cc4.4.6_libc2.12_kernel2.6.32_release/ 
```

到 .bashrc

我用centos。

# java - 您是否应该在 java 枚举中包含未知/默认值

> ID：14207155
> 
> 赞同：5
> 
> 时间：2013-01-08T02:00:11.727
> 
> 标签：java, coding-style, enums

对于最佳实践，最好使用下面的代码`return "red"`来模拟未知值？或者我应该添加一个`unknown("red")`选项并执行`return Shape.unknown.color;`？关于未知值的枚举是否有标准的 Java 约定？

```
private enum Shape {
    triangle("yellow"),
    square("green"),
    circle("red");

    private final String color;
    Shape(String color) {
        this.color = color;
    }
};

public String getShapeColor() {
    if(shape != null) {
        return shape.color;
    }
    return "red";
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T02:06:40.450

枚举隐含地是一种不应该具有未初始化值的变量。

实际上，您的推理对于每种变量都是正确的，不仅是枚举，而且在枚举的特定情况下，您声明的类型可以具有有限数量的可能值，因此`null`不应该是一种选择。

最好的解决方案确实是具有未知值：

```
private enum Shape {
    TRIANGLE("yellow"),
    SQUARE("green"),
    CIRCLE("red"),

    UNKNOWN("unknown");

    private final String color;
    Shape(String color) {
        this.color = color;
    }
}; 
```

并初始化每个`Shape`类型的变量`Shape.UNKNOWN`以避免进行任何空检查，这是一种[空设计模式](http://en.wikipedia.org/wiki/Null_Object_pattern)。在使用枚举时，这种模式更有意义。

注意：由于枚举表示常量，因此约定是给它们加上下划线的大写名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:14:20.620

据推测，如果形状变量未知，它将为空，所以我会选择一个静态方法，您将实例传递给

```
public static String getShapeColor(Shape shape) {
    if(shape != null) {
        return shape.color;
    }
    return "red";
} 
```

# ruby-on-rails - 如何在我现有的应用程序中实现“irwi (wikipedia gem)”？

> ID：14207160
> 
> 赞同：0
> 
> 时间：2013-01-08T02:00:51.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3, wiki

我将`irwi`( [https://github.com/alno/irwi](https://github.com/alno/irwi) ) 添加到我的应用程序中。

当用户访问[http://example.com/shop/:shop_name/wiki](http://example.com/shop/:shop_name/wiki)时，我希望它可以访问 （我需要知道 routes.rb 应该如何）

任何人都可以告诉我如何制作它？

:shop_name 是蛞蝓，所以它可以是各种模式。
当然，每条`shop`记录都应该有一个维基百科（这里是一对一的。在创建商店时，应该同时自动为其创建一个维基百科页面。）

我正在使用 Cancan，并设计了身份验证，所以如果可能的话，我希望它只有注册用户可以编辑和更新维基百科页面。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:21:23.643

有关如何进行路由的信息，请参见 - [http://guides.rubyonrails.org/routing.html如果您需要更详细的帮助，则必须提供更多代码。](http://guides.rubyonrails.org/routing.html)将是一些类似的东西——

```
resource :wiki, :controller => :shop, :only => [] do
  get :wiki
  post :wiki
end 
```

根据您需要 wiki 能够做什么，您的控制器等，您应该能够使用

```
before_filter :authenticate_user! 
```

用于您的身份验证

# php - 使用链接下载文件

> ID：14207166
> 
> 赞同：-2
> 
> 时间：2013-01-08T02:01:52.307
> 
> 标签：php, mysql

> **可能重复：**
> [使用 php 和 mysql 下载文件](https://stackoverflow.com/questions/14124450/downloading-files-using-php-and-mysql)

嗨，我是 php 和 mysql 的新手。我在我的服务器中上传了一个文件夹，它存储了不同的简历，现在我尝试使用链接下载它们。

```
 <?php

       $host="xxxx"; // Host name 
       $username="xxxx"; // Mysql username 
       $password="xxxx"; // Mysql password 
       $db_name="xxxx"// Database name 

       // Connect to server and select databse.
       $conn = mysql_connect("$host", "$username", "$password")or die("cannot 
       connect"); 
       mysql_select_db("$db_name");
       $query="SELECT * FROM userinfo";

         $result=mysql_query($query);
         $num=mysql_numrows($result);

             $i=0;

             while ($i < $num) {

             $f1=mysql_result($result,$i,"FirstName");
             $f2=mysql_result($result,$i,"MiddleName");
             $f3=mysql_result($result,$i,"LastName");
             $f4=mysql_result($result,$i,"EmailAdd");
             $f5=mysql_result($result,$i,"Nationality");
             $f6=mysql_result($result,$i,"Street");
             $f7=mysql_result($result,$i,"City");
             $f8=mysql_result($result,$i,"Region");
             $f9=mysql_result($result,$i,"Mobile");
             $f10=mysql_result($result,$i,"ExamResult");
             $f11=mysql_result($result,$i,"res");

             ?>
             <tr   onmousedown="HighLightTR(this,'#A0A0A0  ',' #47433F'); "   
             onmouseup="p.onload();"   >

    <td><a href='MemPage.php?selected=<?php echo $f4?>'><?php echo $f4?></td>
    <td><?php echo $f1," ",$f2," ",$f3?></a></td>
    <td><?php echo $f5?></td>
    <td><?php echo $f6,",",$f7,",",$f8?></td>
    <td><?php echo $f9?></td>
    <td><?php echo $f10?>/27</td>
    <td><a href='sms.php?selected=<?php echo $f4 ?>'>Send</td>
    <td><a href='http://www.goodfaithjobs.bugs3.com/upload/CRUZSEM2HW.doc'><?                
            php echo $f11 ?></td>

             <?php
             $i++;
             }
             mysql_close($conn);
             ?> 
```

我能够成功下载文件。因为我指定了一个特定的文件名，但我的问题是如果我想下载一个具有不同文件名的文件怎么办？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:23:28.463

如果`$f11`有文件名，你应该可以这样做：

```
<a href='http://www.goodfaithjobs.bugs3.com/upload/<?php echo $f11; ?>'><?php echo $f11 ?></a> 
```

请注意，这假设这`$f11`不是恶意的。如果此变量来自用户，请考虑确保它是安全的（在这种情况下可能没什么大不了的，因为它仅用作链接）。

# python - 无法使用 v3 api 添加 YouTube 播放列表

> ID：14207168
> 
> 赞同：3
> 
> 时间：2013-01-08T02:02:18.267
> 
> 标签：python, youtube, youtube-api, google-api-python-client

我已经为此工作了一段时间，似乎无法超越这个障碍。

我可以使用 v3 api 创建服务，并且可以取回一些用户特定的数据，但是在添加播放列表时，我遇到了一个似乎无法解决的错误。

--EDIT-- 传递对象而不是 jsonified 字符串将起作用。

```
json_obj = {'snippet':{'title':title}}
#json_str = json.dumps(json_obj)
playlist = self.service.playlists().insert(part='snippet, status', body=json_obj)
playlist.execute() 
```

这给了我这样的东西：

请求标头：

```
{'Authorization': u'Bearer TOKEN',
 'accept': 'application/json',
 'accept-encoding': 'gzip, deflate',
 'content-length': '73',
 'content-type': 'application/json',
 'user-agent': 'google-api-python-client/1.0'} 
```

请求正文：

```
'"{\\"snippet\\":{\\"title\\":\\"2013newTest\\"}}"' 
```

响应标头：

```
{'cache-control': 'private, max-age=0',
 'content-type': 'application/json; charset=UTF-8',
 'date': 'Tue, 08 Jan 2013 01:40:13 GMT',
 'expires': 'Tue, 08 Jan 2013 01:40:13 GMT',
 'server': 'GSE',
 'status': '400',
 'transfer-encoding': 'chunked',
 'x-content-type-options': 'nosniff',
 'x-frame-options': 'SAMEORIGIN',
 'x-xss-protection': '1; mode=block'} 
```

回复正文：

```
'{"error": {
   "errors": [
     {"domain": "youtube.parameter",
      "reason": "missingRequiredParameter",
      "message": "No filter selected.", 
      "locationType": "parameter",
      "location": ""}
             ],
  "code": 400,
  "message": "No filter selected."}}' 
```

图书馆提出的回应是：

```
Traceback (most recent call last):
  File "playlist.py", line 190, in <module>
    yt_pl.add_playlist('2013newTest')
  File "playlist.py", line 83, in add_playlist
    playlist.execute()
  File "oauth2client/util.py", line 121, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "apiclient/http.py", line 693, in execute
    raise HttpError(resp, content, uri=self.uri)
apiclient.errors.HttpError: <HttpError 400 when requesting https://www.googleapis.com/youtube/v3/playlists?alt=json&part=snippet%2C+status&key=[KEY] returned "No filter selected."> 
```

我唯一能找到的人在哪里遇到相同的错误只是模糊相关并且在 C# 中。有没有人能够在 python 中使用 v3 添加播放列表，如果可以，你能看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T02:52:54.457

发送的有效负载`body`必须是可以序列化为 JSON 的对象。

这是因为`JsonModel` [用于您的请求](http://code.google.com/p/google-api-python-client/source/browse/apiclient/model.py?r=30bef71e91a278dc769340e5ac9668f5fdd4f654#256)正文的默认值有一个`serialize`始终`dumps`为 json 的方法：

```
class JsonModel(BaseModel):
  ...
  def serialize(self, body_value):
    if (isinstance(body_value, dict) and 'data' not in body_value and
        self._data_wrapper):
      body_value = {'data': body_value}
    return simplejson.dumps(body_value) 
```

所以当你传入已经序列化的 JSON 字符串时，你会得到双重序列化。

例如：

```
>>> json.dumps({'a': 'b'})
'{"a": "b"}'
>>> json.dumps('{"a": "b"}')
'"{\\"a\\": \\"b\\"}"' 
```

这基本上就是您的请求正文发生的事情：

```
'"{\\"snippet\\":{\\"title\\":\\"2013newTest\\"}}"' 
```

您能否指出一些导致您误入歧途的文档，以便对其进行修复？

# android - 不断检查 Android 服务中的音量变化

> ID：14207169
> 
> 赞同：8
> 
> 时间：2013-01-08T02:02:25.050
> 
> 标签：android, audio, android-service, android-audiomanager

我写了这段代码，它显然有缺陷。如何创建一个不断检查音量变化的服务？按键监听器不能在服务中使用，请不要使用音量键监听器发布答案。

我的代码是错误的，因为我为 while 循环提供了虚拟条件。我的服务检查音量变化而不崩溃的条件是什么？不可能是`isScreenOn()`因为在听音乐时可以改变音量并且屏幕是关闭的。

**代码**

```
AudioManager audio = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    int currentVolume = audio.getStreamVolume(AudioManager.STREAM_RING);
    int newVolume=0;
    while(1==1)
    {
        newVolume = audio.getStreamVolume(AudioManager.STREAM_RING);
        if(currentVolume!=newVolume)
        {
            Toast.makeText(this, "Volume change detected!", Toast.LENGTH_LONG).show();
        }

    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T02:12:33.633

如果您想查看设置何时更改，您可以向设置提供者注册一个 ContentObserver 来监控它。例如，这是设置应用程序中的观察者：

```
 private ContentObserver mVolumeObserver = new ContentObserver(mHandler) {
        @Override
        public void onChange(boolean selfChange) {
            super.onChange(selfChange);
            if (mSeekBar != null && mAudioManager != null) {
                int volume = mAudioManager.getStreamVolume(mStreamType);
                mSeekBar.setProgress(volume);
            }
        }
    }; 
```

它被注册以观察如下设置：

```
 import android.provider.Settings;
        import android.provider.Settings.System;

        mContext.getContentResolver().registerContentObserver(
                System.getUriFor(System.VOLUME_SETTINGS[mStreamType]),
                false, mVolumeObserver); 
```

# html - 单击孩子后如何使CSS菜单保持可见

> ID：14207171
> 
> 赞同：0
> 
> 时间：2013-01-08T02:02:53.017
> 
> 标签：html, css, menubar, submenu

我有这个 CSS：

```
#menuBar {
  /*width: 960px;*/
  height: 35px;
  clear: both;
}

ul#nav {
  float: left;
  width: 100%;
  margin: 0;
  padding: 0;
  list-style: none;
  background-color: #0068b4;
}

ul#nav li {
  display: inline;
}

ul#nav li a {
  float: left;
  line-height: 35px;
  color: #ffffff;
  text-decoration: none;
  margin: 0;
  padding: 0 30px;
  background-color: #0068b4;
}

/* APPLIES THE ACTIVE STATE TO PARENT*/
ul#nav .currentParent a, ul#nav li:hover > a  {
  color: #ffffff;
  text-decoration: none;
  background: #005899;
}

/* THE SUBMENU LIST HIDDEN BY DEFAULT */
ul#nav  ul {
  display: none;
}

/* WHEN THE FIRST LEVEL MENU ITEM IS HOVERED, THE CHILD MENU APPEARS */
ul#nav li:hover > ul {
  position: absolute;
  display: block;
  width: 97%;
  height: 35px;
  margin: 35px 0 0 0;
  background-color: #e0e0e0;
}

ul#nav li:hover > ul li a {
  float: left;
  line-height: 35px;
  color: #000000;
  text-decoration: none;
  margin: 0;
  padding: 0 30px 0 30px;
  background-color: #e0e0e0;
}

/* APPLIES THE ACTIVE STATE TO CHILD*/
ul#nav li ul li.currentChild a, ul#nav li:hover > ul li a:hover {
  color: #000000;
  text-decoration: none;
  background-color: #afafaf;
} 
```

这个HTML：

```
<div id="menuBar">
    <ul id="nav">
    <li><a href="javascript: void;">Menu 1</a>
        <ul>
            <li><a href="menu1submenuitem1.html">Menu 1 Submenu item 1</a></li>
            <li><a href="menu1submenuitem2.html">Menu 1 Submenu item 2</a></li>
            <li><a href="menu1submenuitem3.html">Menu 1 Submenu item 3</a></li>
        </ul>
    </li>
    <li><a href="javascript: void;">Menu 2</a>
        <ul>
            <li><a href="menu2submenuitem1.html">Menu 2 Submenu item 1</a></li>
            <li><a href="menu2submenuitem2.html">Menu 2 Submenu item 2</a></li>
        </ul>
    </li>
    <li class="currentParent"><a href="javascript: void;">Menu 3</a>
        <ul>
            <li><a href="menu3submenuitem1.html">Menu 3 Submenu item 1</a></li>
            <li class="currentChild"><a href="menu3submenuitem2.html">Menu 3 Submenu item 2</a></li>
            <li><a href="menu3submenuitem3.html">Menu 3 Submenu item 3</a></li>
        </ul>
    </li>   
    </ul>
</div> 
```

我用它来显示一个两级水平菜单。我想要实现的是，当单击第二级的选项时，我希望父级和子级本身保持突出显示。为此，我实际上是在我的 ASP.net 页面后面的代码中为菜单构建 HTML，并使用样式：currentParent 和 currentChild 来突出显示它们。那行得通，我无法弄清楚的是如何使包含被单击以保持可见的子级的第二级。我尝试了添加`display: none`很多地方，但没有任何效果。我想知道是否有人可以帮助我并就我需要添加到 CSS 中以实现此目的的修改提供一些建议？

**编辑1：**

我已经完成了代码并查看了它是否正常工作（您可以在此处查看：http: [//jsfiddle.net/cesarvinas/ZQWe7/](http://jsfiddle.net/cesarvinas/ZQWe7/)）。您可以在 HTML 代码中看到我已将类*current Parent*应用于父菜单*Menu 3*并将类*currentChild*应用于子菜单项*Menu 3 Submenu item 2*。有了这个，父母和孩子现在被突出显示。我还想要的是包含子菜单项的行（灰色的）：*Menu 3 Submenu item 1*、*Menu 3 Submenu item 2*和*Menu 3 Submenu item 3*保持可见。

正如我在主帖中解释的那样，我已将代码添加到 ASP .net 页面背后的代码中，以构建 HTML 并在必要时分配 CSS 类。

有没有办法让我可以分配给父级`<li>`（在示例中为*Menu 3*父级）的 CSS 类以保持其子级可见？

**编辑 2**

感谢我在这里得到的帮助，特别是来自 3dgoo 的帮助，这几乎完成了。我在这里更新了示例：http: [//jsfiddle.net/cesarvinas/ZQWe7/5/](http://jsfiddle.net/cesarvinas/ZQWe7/5/)。但是，为了使不是当前的子菜单项保持银色（而不是像 3dgoo 示例中那样为蓝色），我必须再创建一个 CSS 类“.notselected”，将其应用于那些未选择的子菜单项. 我的问题是：有没有办法在不添加额外的 CSS 类的情况下实现相同的目标？这就是我所做的：

```
ul#nav li ul li.notselected a,
ul#nav li:hover > ul li a {
  float: left;
  line-height: 35px;
  color: #000000;
  text-decoration: none;
  margin: 0;
  padding: 0 30px 0 30px;
  background-color: #e0e0e0;
} 
```

和 HTML：

```
<li class="currentParent"><a href="#">Menu 3</a>
    <ul>
        <li class="notselected"><a href="#">Menu 3 Submenu item 1</a></li>
        <li class="currentChild"><a href="#">Menu 3 Submenu item 2</a></li>
        <li class="notselected"><a href="#">Menu 3 Submenu item 3</a></li>
    </ul>
</li> 
```

我已经在 CSS 中尝试过：

```
ul#nav li ul li a,
ul#nav li:hover > ul li a {
  float: left;
  line-height: 35px;
  color: #000000;
  text-decoration: none;
  margin: 0;
  padding: 0 30px 0 30px;
  background-color: #e0e0e0;
} 
```

并`class="notselected"`从 HTML 中删除，但它不起作用。这是为什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:18:32.007

您可以使用以下 css 选择器来执行此操作，如下`ul#nav li.currentParent > ul`所示：

**CSS**

```
...
ul#nav li.currentParent > ul, // Add this
ul#nav li:hover > ul {
    position: absolute;
    display: block;
    width: 97%;
    height: 35px;
    margin: 35px 0 0 0;
    background-color: #e0e0e0;
}
ul#nav li:hover > ul { // And add these three lines
    z-index: 10;
}
... 
```

**[演示](http://jsfiddle.net/ZQWe7/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:04:59.500

因此，您希望突出显示第二行中单击的项目，并在单击后显示相应的第二行。

如果菜单将使用标准链接（每次单击时刷新页面），最好使用 ASP 变量来表示当前页面，并根据该变量进行 CSS 修改以使正确的子菜单可见并突出显示正确的项目（您可以从 3dgoo 的 CSS 示例选择器开始`ul#nav li.currentParent > ul`）。

第二种情况是您没有在点击时刷新页面（例如，使用 AJAX 仅加载页面的一部分）。在这种情况下，您必须使用 Javascript/jQuery 来监听点击并相应地更改类。这意味着当您单击一个项目时，它的父`li`元素当然需要成为唯一的`currentChild`类和它的父元素`currentParent`。

编辑

您可以像这样选择所有`currentParent`子菜单锚点：`ul#nav li.currentParent ul li a`然后在其上添加悬停/活动效果`currentChild`。

# asp.net - 在按钮单击时动态加载用户控件

> ID：14207174
> 
> 赞同：0
> 
> 时间：2013-01-08T02:03:44.523
> 
> 标签：asp.net, html, c#-4.0

我在用户控件中添加了一个标签和一个文本框。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="AddMultiLoc.ascx.cs" Inherits="CRM_Streamline_Forms.UserControls.AddMultiLoc" %>
<table>
<tr>
    <td style="width:25%">
        <asp:Label ID="lblLocName_UC_G0138" runat="server" Text="Location Name:" />
    </td>
    <td style="width:25%">
        <asp:TextBox ID="txtLocName_UC_G0138" runat="server" Width="200px" />
    </td>
    <td style="width:25%">
        <asp:Label ID="lblLocID_UC_G0138" runat="server" Text="Location ID:" />
    </td>
    <td style="width:25%">
        <asp:TextBox ID="txtLocID_UC_G0138" runat="server" Width="200px" />
    </td>
</tr> 
```

我的一个 aspx 页面中有一个链接按钮，单击该按钮时应填充此用户控件。

```
<asp:LinkButton ID="lnkAddLoc_AGBI2_G0138" runat="server" Text="+ Add Another Location" onclick="lnkAddLoc_AGBI2_G0138_Click" /> 
```

后面的代码，我为按钮单击编写了以下代码：

```
protected void lnkAddLoc_AGBI2_G0138_Click(object sender, EventArgs e)
    {
        AddMultiLoc con = (AddMultiLoc)LoadControl("~/UserControls/AddMultiLoc.ascx");
        pnlMultiInvoiceInfo1_AGBI2_G0138.Controls.Add(con);
        Panel p = new Panel();
        Control uc = (Control)Page.LoadControl("~/UserControls/AddMultiLoc.ascx");
                    p.Controls.Add(uc);
                    p.Width = 200;
                    p.Height = 100;
                    pnlMultiInvoiceInfo1_AGBI2_G0138.Controls.Add(p);
    } 
```

第一次填充用户控件，因为我在 aspx 页面中调用它，但第二次单击链接按钮时，它没有第二次填充用户控件。我是编码新手，请帮助:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:51:11.033

我认为的问题是，当控件加载到 ViewState 时，您在回发过程中丢失了控件。

这是一个示例，您可以在其中将控件加载到会话中，这不是很好的做法，但它可以满足您的目的：

**添加MultiLocPage.aspx**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <asp:LinkButton ID="lnkAddLoc_AGBI2_G0138" runat="server" Text="+ Add Another Location" OnClick="lnkAddLoc_AGBI2_G0138_Click" />
        </div>
        <asp:PlaceHolder runat="server" ID="Placeholder1"></asp:PlaceHolder>
    </form>
</body>
</html> 
```

**AddMultiLocPage.aspx.cs**

```
public partial class AddMultiLocPage : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        LoadControlsFromSession();
    }

    private List<AddMultiLoc> ViewStateControls
    {
        get { return (List<AddMultiLoc>) Session["ViewStateControls"]; }
        set { Session["ViewStateControls"] = (List<AddMultiLoc>)value; }
    }

    private void LoadControlsFromSession()
    {
        if (ViewStateControls != null)
        {
            Placeholder1.Controls.Clear();

            foreach (var c in ViewStateControls)
            {
                Placeholder1.Controls.Add(c);
            }
        }
    }

    protected void lnkAddLoc_AGBI2_G0138_Click(object sender, EventArgs e)
    {
        var con = (AddMultiLoc)LoadControl("~/AddMultiLoc.ascx");
        con.ID = Guid.NewGuid().ToString();

        List<AddMultiLoc> tmpList = ViewStateControls;
        if(tmpList == null) tmpList = new List<AddMultiLoc>();
        tmpList.Add(con);
        ViewStateControls = tmpList;

        LoadControlsFromSession();
    }
} 
```

**用户控件标记**

```
<table>
    <tr>
        <td style="width: 25%">
            <asp:Label ID="lblLocName_UC_G0138" runat="server" Text="Location Name:" />
        </td>
        <td style="width: 25%">
            <asp:TextBox ID="txtLocName_UC_G0138" runat="server" Width="200px" />
        </td>
        <td style="width: 25%">
            <asp:Label ID="lblLocID_UC_G0138" runat="server" Text="Location ID:" />
        </td>
        <td style="width: 25%">
            <asp:TextBox ID="txtLocID_UC_G0138" runat="server" Width="200px" />
        </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-08T05:41:18.783

无需在会话中存储控制，您的问题的解决方案是：

ASPX 代码：

```
< asp:LinkButton ID="lnkAddLoc_AGBI2_G0138" runat="server" Text="+ Add Another Location" onclick="lnkAddLoc_AGBI2_G0138_Click" />
    <asp:Panel ID="Panel1" runat="server"> 
```

代码背后：

```
protected void lnkAddLoc_AGBI2_G0138_Click(object sender, EventArgs e)
    {
        Control uc = (Control)Page.LoadControl("~/AddMultiLoc.ascx");
        Panel1.Controls.Add(uc);
    } 
```

每当您单击链接按钮 lnkAddLoc_AGBI2_G0138 时，它都会将用户控件的新实例添加到 Panel1。

# php - Echo 0 用于 Mysql 查询，没有结果

> ID：14207175
> 
> 赞同：2
> 
> 时间：2013-01-08T02:03:46.210
> 
> 标签：php, mysql, loops

我正在为过去 30 天的运行列表中的 mysql 数据库构建一个特定客户端的调用次数数组。到目前为止，我的代码可用于添加调用数组的日期，但我需要在没有调用的日期显示“0”（数据库中没有条目）。到目前为止，这是我的代码：

```
$query="SELECT COUNT(*) FROM my_db WHERE client_phone='clint_phone#' GROUP BY calldate"; 
$result = mysql_query($query);
    $data = array();
    while ($row = mysql_fetch_row($result)) {
       $data[] = $row[0];
    } 
```

我只需要一种方法来显示今天我有 30 个电话，而昨天我有 0 个电话，我需要它来显示 [30,0]。我所拥有的只会显示 [30]。

编辑 * 我有一个 mysql 数据库将列 client_phone、calldate。我希望使用数组中的数据构建图表。图表的每个点将代表一天以及该客户当天的呼叫次数。我正在构建上述查询来填充该数组。我试图倒数三十天，并将每天的总呼叫数输入数组。

编辑 2* 我已经差不多了。我在“foreach”区域遇到问题。下面是带有两个 print_r() 转储数组的代码。第一个看起来不错，但第二个显示一些不应该被覆盖的数组条目：

```
$query="SELECT calldate, COUNT(*) FROM my_db WHERE client_phone='phone#' and calldate>='20130101' AND calldate<='20130107' GROUP BY calldate ORDER BY calldate"; 
$result = mysql_query($query);
    $data = array();
    while ($row = mysql_fetch_array($result)) {
      $data[$row['calldate']] = $row[1];
    }

$startDate = '20130101'; 
    $endDate = '20130107'; 
    $dates = array(); 

    for($current = $startDate; $current != $endDate; $current = date('Ymd', strtotime("$current +1 day"))) {
        $dates[] = $current; 
    }
    $dates[] = $endDate;  

print_r ($data);
echo "<br />";

foreach($dates as $date){
if (in_array($date, $data)) {
    // that date was found in your db_date array(therefore had queries)
}else{
$data[$date] = 0; //date was not found in your db_array so we set that date with no   queries to zero
}
}

print_r ($data); 
```

我在浏览器中运行它，我得到了这个：

```
Array ( [20130101] => 1 [20130104] => 6 [20130105] => 2 [20130106] => 1 [20130107] => 3 ) 
Array ( [20130101] => 0 [20130104] => 0 [20130105] => 0 [20130106] => 0 [20130107] => 0 [20130102] => 0 [20130103] => 0 ) 
```

顶部输出看起来不错，只是缺少分配给不在 data[] 数组中的日期的零。第二个数组在缺失的日期中有零，但其他不应该被覆盖的日期。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:07:26.513

找到该时间跨度内的每个日期并为此执行任务并不是真正的解决方案标准。但取决于您的主机是否允许 cron 任务；如果那天没有查询，您是否能够使用 cron 任务在该日期晚上 11:59 自动将 0 插入到您的数据库中；您可以简单地提取所有日期。

如果您不想使用 cron 任务执行此操作，我认为您可以通过这种方式进行管理...

```
 $startDate = '2009-01-28'; 
        $endDate = '2009-02-04'; 
        $dates = array(); 

        for($current = $startDate; $current != $endDate; $current = date('Y-m-d', strtotime("$current +1 day"))) {
            $dates[] = $current; 

        $dates[] = $endDate;  
    } 
```

然后这样做

```
foreach($dates as $date){
if (array_key_exists($date, $data)) {
    // that date was found in your db_date array(therefore had queries)
}else{
$data[$date] = 0; //date was not found in your db_array so we set that date with no queries to zero
}
} 
```

这可能需要一些小的调整，因为我没有测试过；但这应该有效；如果不是非常接近它的东西应该。希望这可以帮助。

# java - NSData 到 NSString 转换失败

> ID：14207177
> 
> 赞同：1
> 
> 时间：2013-01-08T02:04:50.117
> 
> 标签：java, ios, nsstring, converter, nsdata

我有一个由 Java Web 服务返回到我的 iOS 应用程序的加密字符串。我能够将它解密为 iOS 端的 NSData 对象，但是当我尝试将其转换为 NSString 时，我总是会返回一个空值。我尝试了以下命令：

```
NSString *msg1 = [[NSString alloc] initWithData:messageData encoding:NSUTF8StringEncoding];
NSString *msg2 = [NSString stringWithUTF8String:[messageData bytes]];
NSString *msg3 = [[NSString alloc] initWithData:messageData encoding:NSASCIIStringEncoding];
NSString *msg4 = [[NSString alloc] initWithUTF8String:[messageData bytes]]; 
```

解密的消息应该说“这是测试消息：”。这些命令中唯一接近的一个是 msg3，但即使这样也会使输出出现乱码，看起来像“This is test mes¯5[Lqë÷£©ìÇt1”

谁能向我解释为什么这种转换失败了？

# python - 在警告被压制后控制警告的出现

> ID：14207178
> 
> 赞同：2
> 
> 时间：2013-01-08T02:04:52.363
> 
> 标签：python, warnings

考虑一下：

```
>>> import warnings
>>> warnings.filterwarnings("always", category=DeprecationWarning)
>>> warnings.warn("Hello", DeprecationWarning)
/usr/bin/bpython:2: DeprecationWarning: Hello 
```

好的，那里收到警告。

```
>>> warnings.filterwarnings("ignore", category=DeprecationWarning)
>>> warnings.warn("Silence", DeprecationWarning) 
```

这里没有警告。

```
>>> warnings.filterwarnings("always", category=DeprecationWarning)
>>> warnings.warn("Silence", DeprecationWarning) # why remain silent?
>>> 
```

这里没有警告，但我所看到的*应该*有一个警告。如果您同时删除 python 2 和 3 上的“忽略”过滤器，也会发生同样的情况。

虽然原则上这不应该是一个问题，（除非有其他原因），我在不知不觉中在某处创建了这个静音警告。这使得很难确定在给定的警告上下文中控制警告。

**注意：**在脚本中，此示例可以正常工作。但是我最初的问题可能只与这个例子相似，所以我怀疑它是否仅限于交互式提示。在最初的问题中，即使第一个过滤器`warnings.filters`应该与“总是”匹配，我也没有看到任何警告（我检查过）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:26:27.933

[好的，所以我猜这个错误报告](http://bugs.python.org/issue4180)实际上回答了这个特定问题。不幸的是，这似乎并不是我的问题，但那是另一回事......

如果有人感兴趣......我最初的问题仅仅是因为忘记了`warnings.filters`使用正则表达式`re.match`并且需要字符串的开头来匹配。

为了在测试弃用警告时避免此问题`function`

```
if hasattr(function, '__globals__'):
    if function.__globals__.has_key('__warningregistry__'):
        function.__globals__['__warningregistry__'].clear() 
```

这至少在我的情况下有所帮助。（在测试另一个警告时忽略了一个警告，然后在测试第一个忽略的警告期间触发了此问题）

# windows - Indy TCP 服务器上的 TCP 流控制

> ID：14207182
> 
> 赞同：1
> 
> 时间：2013-01-08T02:05:02.053
> 
> 标签：windows, delphi, indy

Indy TIdTCPServer 组件有一个 OnExecute 事件，您可以在其中处理传入数据。我的应用程序涉及在进入打印机之前处理的流数据，因此我依赖于准备好的输出设备。我想要做的是让 TCP 流控制在输出流繁忙的情况下管理输入流。

我不知道如何最好地处理这种情况。Indy 文档对使用示例略知一二，感谢您提供任何指导！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T03:30:59.460

您不需要手动处理 TCP/IP 流控制。如果设备没有准备好，就不要在 OnExecute 代码中读取任何新的输入数据，这就是您所要做的。数据将位于套接字的接收缓冲区中，直到 Indy 将其读入它自己的缓冲区，然后它将一直存放在那里，直到您在自己的代码中读取它为止。如果socket的接收缓冲区满了，TCP/IP会自动通知对方停止发送数据，直到缓冲区腾出一些空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:50:57.660

不确定您已经开发了自己的代码到什么等级。如果您还是初学者，您可能会从[http://sourceforge.net/projects/indy10clieservr/](http://sourceforge.net/projects/indy10clieservr/)找到 有用的演示样本作为起点。

# javascript - 查找一块画布的 rgb 值

> ID：14207184
> 
> 赞同：0
> 
> 时间：2013-01-08T02:05:15.213
> 
> 标签：javascript, html5-canvas, getimagedata

所以我有我的画布，我从中获取一些图像数据，如下所示：

```
// assume canvas already has an image on it
var data = ctx.getImageData(0, 0, 20, 20); 
```

现在在数据中我有很多废话，我不知道它到底是什么，因为我有一个包含 1600 个项目的数组？不知道那是怎么回事..

我想获得整个 20x20 块的平均 RGB 值。我什至如何从图像数据中获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:08:32.100

`getImageData`返回一个具有`data`属性的对象。该属性是一个值数组，这就是您所看到的。

基本上，它是这样构建的：

```
[
    pixel (0,0) red, pixel (0,0) green, pixel (0,0) blue, pixel (0,0) alpha,
    pixel (1,0) red, pixel (1,0) green, pixel (1,0) blue, pixel (1,0) alpha
    ......
] 
```

等等。

因此，要获取像素 (X,Y) 的颜色，您需要获取`(Y*W+X)*4`红色、`(Y*W+X)*4+1`绿色、`(Y*W+X)*4+2`蓝色和`(Y*W+X)*4+3`alpha 的值，其中 W 是图像数据的宽度（在您的情况下， 20)

# javascript - 保持导航问题的状态

> ID：14207185
> 
> 赞同：1
> 
> 时间：2013-01-08T02:05:24.213
> 
> 标签：javascript, jquery

嗨，我正在尝试保留多个页面页面的导航状态。我已经设法获取了我想要保留的每个元素的索引，问题是设置它们。由于某种原因，似乎只设置了一些元素。

我已经调试了代码，似乎有时只考虑了一个元素。我不知道我在这里做错了什么。这是我的代码：

```
<ul id="ProductNav">
          <li>
              <h2><a href="#">@category.Key.ToUpper()</a></h2>
              <ul>
                  <li>
                      <img src="@Url.Content("~/Content/Images/arrow.gif")" class="arrow"/>
                      @Html.ActionLink(subcategory,"Index" , "Products" , new { subcat = subcategory} , null)
                  </li>
              </ul>
          </li>
      </ul>
     ......
 var menuState = JSON.parse(sessionStorage["navigation"]);

 for (var i = 0; i < menuState.length; i++) {
        var menuIndex = menuState[i].eq;
        $("ul#ProductNav li").eq(menuIndex).children("ul").css("display", "block");
 } 
```

menuState 将我们一个包含索引数组的对象据我所知，到目前为止，问题从这里开始：

```
$("ul#ProductNav li").eq(menuIndex).children("ul").css("display", "block"); 
```

# objective-c - 有多个部分时使用 sectionIndexTitlesForTableView 进行索引

> ID：14207186
> 
> 赞同：3
> 
> 时间：2013-01-08T02:05:25.990
> 
> 标签：objective-c, ios, uitableview, uiscrollview, indexing

我有一个`sectionIndexTitlesForTableView`用于显示索引的表格视图。我必须显示位于不同国家的大学列表。每个国家/地区可以拥有不止一所大学，因此表格显示如下：

```
 1\. Ecuador
    1\. Universidad Catolica del Ecuador
 2\. El Salvador
    1\. Universidad Don Bosco
 3\. Estonia
    4\. Tallin University
    4\. Tartu Health Care College
    4\. University of Tartu
 4\. Finland
    5\. Aalto University

.... 
```

我打算做的是，使用侧面的滚动搜索，当用户触摸“A”时，它将带您到第一个带有字母 A 的条目。例如，当我按“E”时，它应该带我到“厄瓜多尔”部分（显示在上面的“图像”上）。

问题一开始是因为我有多个部分，当我按“B”时，它会将我带到“澳大利亚”，第二部分（第一个是阿根廷）而不是带我到“比利时”，这将是第一个国家与 B 字母。我设法解决了这个问题，但它给了我错误。这是代码：

```
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView
{
   return [[UILocalizedIndexedCollation currentCollation] sectionIndexTitles];
}

- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index
{
    NSArray* bu =[self SectionsASaltar];
    int ins =[[bu objectAtIndex:index] intValue];

    return [[UILocalizedIndexedCollation currentCollation] sectionForSectionIndexTitleAtIndex:ins];

}

-(NSArray*)SectionsASaltar
{
    NSArray* ALF= [[NSArray alloc] initWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",@"L",@"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z", nil];

    NSMutableArray* jumps =[[NSMutableArray alloc]initWithObjects:@"0", nil];

    int i=0; //contador de elementos
    int j=0; //contador del alfabeto

    [titl addObject:[self.secc objectAtIndex:i]];
    do {

        if ([[self.secc objectAtIndex:i] hasPrefix:[ALF objectAtIndex:j]]) {
            i++;
        }else{
            [jumps addObject:[NSString stringWithFormat:@"%d",i]];
            i++;
            j++;

        }

    } while (i<[self.secc count]);

    [jumps addObject:[NSString stringWithFormat:@"0"]];
    NSLog(@"%@",jumps);
    return jumps;
} 
```

self.secc是我的数组，其中包含部分，而*jumps**是*一个数组，其中包含我必须跳过索引才能到达下一个字母的元素数量。

上面代码的想法是计算有多少元素有字母 A，存储并在用户按下 B 时跳过它们，所以它会直接转到第一个字母 B。它适用于大多数字母，但是一旦我按下字母 M 它会给我以下错误：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '-[__NSCFArray objectAtIndex:]: index (29) beyond bounds (28)'
*** First throw call stack:
(0x25f9012 0x21c6e7e 0x25f8deb 0x25ed7e0 0x13137be 0x1dcd2 0x10d27ee 0x21da705 0x102e920 0x102e8b8 0x10ef671 0x10efbcf 0x124396d 0x12439a6 0x10ee7e2 0x105e16d 0x105e552 0x103c3aa 0x102dcf8 0x32b3df9 0x32b3ad0 0x256ebf5 0x256e962 0x259fbb6 0x259ef44 0x259ee1b 0x32b27e3 0x32b2668 0x102b65c 0x2bbd 0x2af5 0x1)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

我真的不知道我在哪里超越界限，我认为它在这条线上：

> 返回 [[UILocalizedIndexedCollat​​ion currentCollat​​ion] sectionForSectionIndexTitleAtIndex:ins];

但我不知道该语句是如何工作的，所以我不知道如何解决它。有任何想法吗？此外，这是我索引的最佳方法还是有更简单的方法来管理相同字母的部分。我知道我可以提出另一种观点，然后第一种观点只有按字母排序的国家，第二种观点是大学，但我试图避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:25:45.683

您的代码假定字母表中的每个字母都有一个条目。如果不是，那么它将增加 i 和 J，跳过活动条目。因此，如果您有一个以字母 a、c、d、e 开头的数组，那么您的代码将用 a 测试 a，然后用 b 测试 c，同时递增两个索引器，在下一个循环中，它将用 c 而不是 c 测试 d与 c。因为你不断增加 j 你可以超过你的项目索引。

# search - 从 XYplorer 11.90 开始比较两个字符串

> ID：14207188
> 
> 赞同：1
> 
> 时间：2013-01-08T02:05:50.313
> 
> 标签：search

XYplorer 是一个用于 Windows 的选项卡式文件管理器。在脚本菜单中，如何比较从 xplorer 帮助中找不到信息的两个字符串？想知道是否有人知道命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:15:18.013

从该 xplorer 帮助中获取的信息可以通过按 F1 访问。

* * *

> 比较（）
> 
> 比较两个字符串。
> 
> 句法
> 
> 比较（字符串 1，字符串 2，[方法=b]）
> 
> 方法：
> 
> b：[默认]二进制，字节：字符串按字母顺序比较
> 
> i：与 b 相同，但不区分大小写：A=a
> 
> n：数字：字符串转换为数字（分数使用点），然后进行数字比较
> 
> v：版本：比较#.##或#.##.####或#.##.##.##等格式的文件版本
> 
> d: date: 比较日期，可选地包括时间；string1 和 string2 都默认为当前日期/时间。有效的日期语法取决于您的语言环境。
> 
> 返回：
> 
> -1 如果字符串 1 < 字符串 2
> 
> 0 如果字符串 1 == 字符串 2
> 
> 1 如果字符串 1 > 字符串 2
> 
> 例子
> 
> 回声比较（“a”，“b”）；// -1
> 
> 回声比较（“一”，“一”）；// 1 (a 排在 A 之后)
> 
> 回声比较（“a”，“A”，“i”）；// 0
> 
> 回声比较（“2”，“12”，“b”）；// 1
> 
> 回声比较（“2”，“12”，“n”）；// -1
> 
> 回声比较（“10.20.0025”，“7.60.0026”，“b”）；// -1
> 
> 回声比较（“10.20.0025”，“7.60.0026”，“v”）；// 1
> 
> 回声比较（“24.08.2012”，“25.08.2012”，“d”）；//-1
> 
> 回声比较（“24.08.2012”，“24.08.2012”，“d”）；//0
> 
> 回声比较（“25.08.2012”，“24.08.2012”，“d”）；//1
> 
> 回声比较（“24.08.2012 08:43:01”，“24.08.2012 08:43:02”，“d”）；//-1
> 
> 回声比较（“24.08.2012 08:43:02”，“24.08.2012 08:43:01”，“d”）；

在此处查找最新版本和信息。该网站经常更新。

[http://www.xyplorer.com/](http://www.xyplorer.com/)

用户论坛

XYplorer 用户论坛：

[http://www.xyplorer.com/xyfc/](http://www.xyplorer.com/xyfc/)

# gcc - crosstools-ng 找不到 pthread.so

> ID：14207189
> 
> 赞同：7
> 
> 时间：2013-01-08T02:05:55.623
> 
> 标签：gcc, cross-compiling

我正在尝试使用 crosstools-ng 编译使用 pthread 的程序，但是由于某种原因，链接器找不到该库。我已经检查过，这些库位于`-L`参数指定的链接路径中。

这是错误：

```
/home/***/raspberrypi/toolchain/lib/gcc/arm-unknown-linux-gnueabi/4.6.3/../../../.. /arm-unknown-linux-gnueabi/bin/ld: cannot find /lib/arm-linux-gnueabihf/libpthread.so.0

/home/***/raspberrypi/toolchain/lib/gcc/arm-unknown-linux-gnueabi/4.6.3/../../../../arm-unknown-linux-gnueabi/bin/ld: cannot find /usr/lib/arm-linux-gnueabihf/libpthread_nonshared.a 
```

为什么 ld 找不到路径内的文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-17T16:36:59.620

编辑您的 .../usr/lib/arm-linux-gnueabihf/libpthread.so：

```
/* GNU ld script
Use the shared library, but some functions are only in
the static library, so try that secondarily.  */
OUTPUT_FORMAT(elf32-littlearm)
GROUP ( /lib/arm-linux-gnueabihf/libpthread.so.0 /usr/lib/arm-linux-gnueabihf/libpthread_nonshared.a ) 
```

至

```
/* GNU ld script
Use the shared library, but some functions are only in
the static library, so try that secondarily.  */
OUTPUT_FORMAT(elf32-littlearm)
GROUP ( libpthread.so.0 libpthread_nonshared.a ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-19T21:09:10.793

请参阅此信息页面： [https ://sourceware.org/binutils/docs-2.24/ld/File-Commands.html#File-Commands](https://sourceware.org/binutils/docs-2.24/ld/File-Commands.html#File-Commands)

阅读 INPUT 和 GROUP 的定义，特别是：

如果配置了 sysroot 前缀，并且文件名以 `/' 字符开头，并且正在处理的脚本位于 sysroot 前缀内，则将在 sysroot 前缀中查找文件名。否则，链接器将尝试打开当前目录中的文件。如果没有找到，链接器将通过归档库搜索路径进行搜索。请参阅命令行选项中的“-L”描述。

所以你的链接器脚本应该是：

```
/* GNU ld script
Use the shared library, but some functions are only in
the static library, so try that secondarily.  */
OUTPUT_FORMAT(elf32-littlearm)
GROUP ( /lib/libpthread.so.0 /usr/lib/libpthread_nonshared.a ) 
```

...因为您的工具链使用的是 sysroot 前缀。

您可以使用以下命令找到您的 sysroot 前缀：

```
<tuple>-gcc -print-sysroot 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-10T15:58:15.890

使用 GCC`--sysroot=dir`标志应该可以解决问题。这个标志告诉 GCC 搜索`dir`文件夹下的头文件和库。

在您的情况下，如果您添加`--sysroot=/home/user/rpi_root`到链接器标志，`ld`将搜索`/home/user/rpi_root/lib/libpthread.so.0`而不是仅搜索`/lib/libpthread.so.0`.

这对于修复与库的完整路径的链接特别有用。

使用 CMake 生成构建系统时，应使用`SET(CMAKE_SYSROOT ${RPI_ROOT_PATH})`, 其中`RPI_ROOT_PATH`包含 RPi sysroot 的路径，而不是直接设置编译器标志。

# jquery - JQuery - 悬停时带有文本阴影的连续动画

> ID：14207194
> 
> 赞同：0
> 
> 时间：2013-01-08T02:06:31.313
> 
> 标签：jquery, animation, loops

所以我正在尝试使用以下标记制作此按钮：

CSS：

```
.button {
    text-shadow: 0px 7px 0px #3b6e62;
    color: #f2b191;
    top:0px;
    -webkit-transition: all 1.4s ease-in-out; -moz-transition: all 1.4s ease-in-out; -ms-transition: all 1.4s ease-in-out; -o-transition: all 1.4s ease-in-out; transition: all 1.4s ease-in-out;
} 
```

html:

```
<a href="#"><div class="button">Text</div></a> 
```

现在当用户要按下这个按钮时，我想通过动画文本阴影 -7px 和顶部 +7px 使它看起来像被按下。

应该发生几件事：

首先，我希望按钮在用户仅悬停时进行动画处理。它应该在 4px 和 3px 文本阴影 / 4px 顶部和原始标记之间进行动画处理。

比，当按下按钮时，它应该一直向下，文本阴影-7px，顶部+7px。（然后再返回，因为它是同一页面上的链接）。

我希望这仍然有意义。

我已经在这里尝试了许多 JQuery 示例，但我似乎无法让它工作。目前我正在试验这段代码：

```
var timer;

    $(".button").hover(function() {
        timer = setInterval(function() {
            $(".button").css('top', '4px');
            $(".button").css('text-shadow', '0px 3px 0px #3b6e62');
        }, 600);
        timer = setInterval(function() {
            $(".button").css('top', '0px');
            $(".button").css('text-shadow', '0px 7px 0px #3b6e62');
        }, 600);
         // Change the interval as you see fit.
    }, function() {
        clearInterval(timer);
    }); 
```

我也无法让它按照我的意图工作。它只是在悬停时只保持动画一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:17:55.010

我创建了一个小提琴，看看这是否是你想要的，因为你想要的对我来说不是很清楚

**编辑**：将动画设置为在悬停时循环播放（但现在单击 .button 时它似乎正在播放您想要的内容）

**脚本**

```
var timer;

$(".button").hover(function() {
  timer = setInterval(function(){
     $(".button").css('top', '4px');
     $(".button").css('text-shadow', '0px 3px 0px #3b6e62');

     setTimeout(function(){
        $(".button").css('top', '0px');
        $(".button").css('text-shadow', '0px 7px 0px #3b6e62');
     },400);
  },800);                     
}, function() {
     clearInterval(timer);
});

$(".button").mousedown(function() {
  $('.button').css({top: '7px'});
});

$('.button').mouseup(function() {
  $('.button').css({top: '0px'});
}); 
```

我也将过渡持续时间从更改`1.4s`为`.4s`

为了应用**顶级**属性，您需要提供**`position`**

**[演示](http://jsfiddle.net/4BTD4/1/)**

**[新演示](http://jsfiddle.net/4BTD4/2/)**

# windows - AWS Elastic Beanstalk - 使用 eb 将 git repo 附加到现有的 EB 环境

> ID：14207203
> 
> 赞同：21
> 
> 时间：2013-01-08T02:07:21.300
> 
> 标签：windows, amazon-web-services, amazon, amazon-elastic-beanstalk

我已经设置了 Elastic Beanstalk 应用程序和环境。我刚刚在 Windows 上下载了 Dev Tools CLI/eb，并希望`eb`用于推送到所述环境。

如果我使用`eb init`，我必须创建一个新的 EB 应用程序和环境。

如何将 git 存储库初始化为现有的 EB 应用程序和环境？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-08T19:12:42.890

我最终这样做的方式是：

[1) 从http://aws.amazon.com/developertools/AWS-Elastic-Beanstalk/6752709412171743](http://aws.amazon.com/developertools/AWS-Elastic-Beanstalk/6752709412171743)下载 AWSDevTools

2) 在 CLI 上移动到您的 git 存储库

3) 运行 /Downloads/elasticbeanstalk-cli/AWSDevTools/ `[Linux or Windows]`/AWSDevTools-RepositorySetup.sh

编辑：3a）`git aws.config`

4) 输入 AWS 访问密钥、AWS 密钥、AWS 区域，然后输入您的 AWS 应用程序和 AWS 环境的现有名称。

5）现在你可以像往常一样git add，git commit，使用git aws.push推送到你的EB环境

7）您可以按照上述步骤添加其他环境。例如，如果您有生产和登台环境，然后使用 git aws.push --environment 使用相同的 repo 推送到这两个环境。

如果您在 Windows 上遇到错误`The specified module 'AWSDevTools' was not loaded`，这很可能是因为 AWSDevTools 模块不在 C:\Users\\ `USER`Documents\WindowsPowerShell\AWSDevTools\AWSDevTools.ps1 中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-09T20:14:43.903

1.  安装开发工具
2.  运行存储库设置
3.  git aws.config

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-11T01:42:13.283

如果你安装了，`brew install aws-elasticbeanstalk`你可以在`/usr/local/Cellar/aws-elasticbeanstalk/2.5.1/libexec/AWSDevTools/Linux/AWSDevTools-RepositorySetup.sh`.

运行后，您需要运行`git aws.config`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-03T18:16:42.203

安装 EB CLI 版本 3 或更高版本：

[http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install.html)

然后运行

```
eb init 
```

CLI 版本 3 允许您通过 init 将 git 存储库附加到现有环境。

# java - 生成 PDF，然后下载为 JPEG 或图像文件

> ID：14207207
> 
> 赞同：0
> 
> 时间：2013-01-08T02:07:44.327
> 
> 标签：java, jsp, itext

我正在使用 iText 生成 PDF 并且工作正常，我也可以通过浏览器将其下载为 PDF。但是，java 或 iText 是否可以将其转换为 JPEG 或任何 IMAGE 文件并允许用户下载图像文件。

```
response.setContentType("application/pdf; charset=utf-8"); 
```

仅将 contentType 更改为 image/jpg 是不可能的。我一直在寻找答案，但很难找到答案。

任何想法都会有很大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:22:17.617

您只能将 iText 用于生成 pdf，仅此而已。请参阅链接[http://itextpdf.com/itext.php](http://itextpdf.com/itext.php) 。看到这个将pdf转换为图像。请参阅此链接，以便通过示例更清楚地理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:28:45.207

我对 iText 不太了解。但是使用[PDFBox](http://pdfbox.apache.org/index.html)我们可以将 pdf 文档转换为图像。拆分后，您可以推送图像以响应。

这里有一些参考链接：

[http://pdfbox.apache.org/commandlineutilities/PDFToImage.html](http://pdfbox.apache.org/commandlineutilities/PDFToImage.html)

[使用 iText 或其他工具将 PDF 转换为多个 JPG](https://stackoverflow.com/questions/6421967/converting-a-pdf-into-multiple-jpgs-with-itext-or-other?rq=1)

[http://www.javatpoint.com/example-to-display-image-using-servlet](http://www.javatpoint.com/example-to-display-image-using-servlet)

# javascript - 使用 JavaScript 显示 Google 地图标记

> ID：14207208
> 
> 赞同：1
> 
> 时间：2013-01-08T02:08:01.117
> 
> 标签：javascript, html, google-maps, google-maps-api-3

我似乎无法在我的地图上添加标记。我正在使用 Google Maps v.3 和 Ruby on Rails。

这是我的 JavaScript：

```
<script type="text/javascript">
var map;
    function initialize()
    {
        var lat, lon, myOptions;
        if(navigator.geolocation)
        {
            navigator.geolocation.getCurrentPosition(function(position)
            {
                lat = position.coords.latitude;
                lon = position.coords.longitude;
                myOptions = {
                   center: new google.maps.LatLng(lat, lon),
                   zoom: 8,
                   mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
            },
            function(error)
            {
                alert('Error: An error occur while fetching information from the Google API');
            });
        }
        else 
        {
            alert("Your browser doesn't support geolocations, please consider downloading Google Chrome");
        }
    }

    // Function for adding a marker to the page.
    function addMarker(lat, lng) {
        marker = new google.maps.Marker({
            position: new google.maps.LatLng(lat, lng),
            map: map
        });
    }

</script> 
```

这是 HTML 页面以及我如何称呼它：

```
<div id="maps">
  <div id="map_canvas" style="width:100%; height:400px">
</div>
<script type="text/javascript">
initialize();
addMarker(46.4352,-80.9455);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T06:07:36.753

这是因为在完成`addMarker()`之前被调用`initialize()`。

`initialize()`需要等待来自地理位置 api 的响应，这意味着当您尝试创建标记时地图未初始化。

如果您将 addMarker 包装在回调中并将其传递给初始化函数，该函数在收到响应后调用回调函数，那么它应该按预期工作。

```
initialize(function() {
    addMarker(46.4352,-80.9455);
});

function initilize(callback) {
    navigator.geolocation.getCurrentPosition(function(position) {
       // set up the map
       callback();
    });
} 
```

# javascript - JavaScript：通过鼠标单击获取输入文本位置（以字符为单位）

> ID：14207209
> 
> 赞同：5
> 
> 时间：2013-01-08T02:08:06.203
> 
> 标签：javascript, input, text, caret

我有一个 HTML`<input type="text">`或`<textarea>`随机的现有文本，例如 [12345678] 或 [12345
67890]
我在此文本中有一个任意定位 mousedown 点击事件。我需要将 2D mousedown 点击页面坐标转换为 1D 基于字符的文本坐标，以便 JS 正确定位插入符号。显然，浏览器有一些在内部进行这种转换的功能；最好叫这个。输入具有标准的可变宽度字体，并且可以处于任何放大级别。浏览器仅限于 FireFox。我们有 JQuery 和 JCursor。

背景：输入字段是在深度嵌套的盒子中动态生成的，每个盒子都有粗糙的重载。遗留代码与最新的 FF 实现的结合以某种方式窃取了从输入元素冒出的时间和它点击默认浏览器设置插入符号动作的时间之间的 mousedown 传播/焦点，这没有发生。我需要自己设置插入符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:18:15.683

此示例的解决方法是对事件使用 2 级 stopPropagation() 调用，同时为 0 级 onmousedown 处理程序返回 true（继续传播）。这避免了在冒泡 [进入父结构的遗留代码] 中的进一步级别 2 调用，同时仍然确保本机默认操作 [放置插入符号] 在冒泡阶段之后确实发生。但是，它仍然没有回答原始问题，该问题还有其他应用程序。

# java - 让 SonaType 的发布插件在使用 git 时运行。还是更好的选择？

> ID：14207214
> 
> 赞同：1
> 
> 时间：2013-01-08T02:08:49.067
> 
> 标签：java, git, maven, maven-3, sonatype

*注意：很长的问题，所以本质上：我想知道如何通过 Maven 发布**我**控制下的现有项目的神圣发布。我目前使用 sonatype 及其插件，但他们的发布插件不允许我将 SHA1 推送为发布。如果有现成的解决方案，我随时都会采用，只要你告诉我如何修改我的 pom.xml，链接如下*

我有一个 Java 项目（在[GitHub](https://github.com/fge/json-schema-validator)上可用并且已经在使用中），我在 Ubuntu 12.10、64 位上使用 Intellij IDEA 12.0.1（社区版）开发。安装的版本`maven`是我的发行版（3.0.4）捆绑的版本。

我遇到的问题在于`pom.xml`项目的：

[https://raw.github.com/fge/json-schema-validator/master/pom.xml](https://raw.github.com/fge/json-schema-validator/master/pom.xml)

我遵循[了 SonaType 的发布指南](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide)。我已经设置了 GPG 等，一切正常。我可以使用他们的插件发布，我猜，这是由以下几行触发的`pom.xml`：

```
<parent>
    <groupId>org.sonatype.oss</groupId>
    <artifactId>oss-parent</artifactId>
    <version>7</version>
</parent> 
```

但是，我对这个插件有几个问题（但真的是那个吗？）：

*   它会创建垃圾提交，总是以 为前缀`[mvn-release-plugin]`，我不希望这样；
*   `developerConnection`它每次想要释放时都会从 URI 克隆，坦率地说，对于任何知道 git 如何工作的人来说都是愚蠢的（一个简单的`fetch`SHA1 比较可以检测到差异）——而且这种行为更令人讨厌，因为我的网络连接很差，委婉地说；
*   它要求创建一个标签：我不想要那个，我可以自己创建它，非常感谢；
*   它甚至不允许您自定义发布提交消息（我想在其中包含一个简短的日志）。

因此，当我准备好发布时，我会执行以下步骤：

1.  在 上创建一个标签`HEAD`，称为`before`
2.  `git cherry-pick`一个提交（我知道它的 SHA1），它将所有 git 存储库 URI 替换`pom.xml`为我的本地存储库，我根据需要进行同步；
3.  在 shell 提示符下，让插件添加到它的内容中，以便该版本“普遍”可用：

    ```
    mvn release:clean
    mvn release:prepare
    mvn release:perform 
    ```

4.  `git rebase before`：摆脱更改 git URI、挤压/改写等的提交，以便垃圾提交消失，并且发布消息包含更改的简短日志；

5.  创建真实标签；
6.  推送到github。

当然，这意味着我保证健全和健全的 Maven 版本与 Github 项目上等效版本的 SHA1 不匹配。我想摆脱这种差异。

那么，如何让 Sonatype 发布插件正常运行？也就是说，我如何告诉它：

*   信任本地 git 存储库，而不是`git clone`ing from `developerConnection`，
*   不要创建无用的提交，
*   让我自定义发布消息？

或者有没有更好的选择可以让我不经历这些繁琐的过程？

可按需提供详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:27:02.813

发布插件是“官方”的 maven-release-plugin，而不是特殊的 Sonatype 版本。 [查看](http://maven.apache.org/maven-release/maven-release-plugin/)准备和执行目标的文档，尤其是`localCheckout`,`pushChanges`和`suppressCommitBeforeTag`（尽管我不确定最后一个是否能满足您的需求）。

如果您通过更改为发布版本并添加标签来手动准备项目，您甚至可以省略`release:prepare`并只运行 run `release:perform -DlocalCheckout=true`，这（理论上;）将从您的标签构建并将这些工件推送到 OSSRH。

# math - 自由定理和参数性

> ID：14207218
> 
> 赞同：4
> 
> 时间：2013-01-08T02:09:44.610
> 
> 标签：math, haskell, types, functional-programming, logic

我找到了这个[webapp](http://www-ps.iai.uni-bonn.de/cgi-bin/free-theorems-webui.cgi)，它可以让你为给定的类型生成一个免费的定理。

生成的定理量化了这些类型的类型和关系。这些定理（公式）是哪个理论/逻辑系统的定理？这个系统与语言的等式理论有什么关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:52:52.430

请参阅介绍这一切的论文。

[http://ttic.uchicago.edu/~dreyer/course/papers/wadler.pdf](http://ttic.uchicago.edu/~dreyer/course/papers/wadler.pdf)

![在此处输入图像描述](../Images/9614a17c956c07ff3c17f52fd7ebb4a6.png)

# html - 我应该使用 DIVS 还是 display: table？

> ID：14207219
> 
> 赞同：0
> 
> 时间：2013-01-08T02:09:46.473
> 
> 标签：html, css

我有以下代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>

   <style type="text/css">

       body, html{
    height: 100%;
}
        #outer {
            width: 90%;
            height: 90%;
            margin: 5% 5% 5% 5%;
            background-color: #333;
        }
        #left-content {
            height: 100%;
            width: 50%;
        }
        #right-content {
            height: 100%;
            width: 50%;
        }
    </style>

    <div id="outer" style="display: block">
      <div id="left-content" style="display: block; background-color: red;">xx</div>
      <div id="right-content" style="display: block; background-color: yellow;">xx</div>
    </div>

</body>
</html> 
```

外部 DIV 周围有一个边距，内部是两个 DIV。我希望两个 DIV 并排，但似乎一个低于另一个。

我怎样才能让他们并排？

另一个相关的问题。对于这样的事情，使用 display: table 和 table-cell 会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:16:38.720

首先，您不需要指定 display:block; 对于每个 div - 这是默认设置。

您“将它们并排”所需要的是**floats**。

这里：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>

   <style type="text/css">

       body, html{
    height: 100%;
}
        #outer {
            width: 90%;
            height: 90%;
            margin: 5% 5% 5% 5%;
            background-color: #333;
        }
        #left-content {
            height: 100%;
            width: 50%;
            float:left;
        }
        #right-content {
            height: 100%;
            width: 50%;
            float:left;
        }
    </style>

    <div id="outer">
      <div id="left-content" style="background-color: red;">xx</div>
      <div id="right-content" style="background-color: yellow;">xx</div> 

<!-- we need to clear -->
<br style="clear:both" />

    </div>

</body>
</html> 
```

在此处了解有关花车的更多信息：http: [//css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:13:14.790

尝试添加 css`display: inline-block`属性，如下所示：

```
#left-content, #right-content{
   display: inline-block;
} 
```

或者使用`float`属性，两个 div 都具有“左”值，但我更喜欢`inline-block`这种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T02:13:44.790

在 CSS 中添加 float:right 和 float:left 。如果仍然显示相同，请增加外部 div 的总宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T02:13:59.793

常见的方法是使用 CSS float

[http://css-tricks.com/all-about-floats](http://css-tricks.com/all-about-floats)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T02:23:50.557

内部两个 div-boxes 使用 float，为了兼容低版本的 IE，out box 也应该浮动，注意`margin`应该替换为`padding`. `display:block`对于像 div 这样的框元素来说，这是多余的。

```
 <style type="text/css">

       body, html{
       height: 100%;

}
        #outer {
            width: 90%;
            height: 90%;
            padding: 5% 5% 5% 5%;
            background-color: #333;
            float:left;
        }
        #left-content {
            height: 100%;
            width: 50%;
        }
        #right-content {
            height: 100%;
            width: 50%;
        }
    </style>

    <div id="outer" style="display: block">
      <div id="left-content" style="display: block; background-color: red;">xx</div>
      <div id="right-content" style="display: block; background-color: yellow;">xx</div>
    </div>

</body>
</html> 
```

# extjs - 如何将今天的日期设置为 cq5 页面属性中日期字段的默认日期

> ID：14207222
> 
> 赞同：3
> 
> 时间：2013-01-08T02:10:02.230
> 
> 标签：extjs, aem

我在页面属性中有一个日期字段（创建日期），我想将其默认为今天的日期。

我怎么能做到这一点，我在渲染事件上使用了一个监听器

即使我可以读回该值，我也看不到页面属性中设置的日期。

在我看来，我缺少一些基本的东西

```
function(dateField) {

console.log("in render");
var todaysDate=new Date().format('m/d/Y');
console.log(todaysDate);
dateField.setValue(todaysDate);
CQ.Ext.getCmp("dateCreated").setValue(todaysDate);
console.log( CQ.Ext.getCmp("dateCreated").getValue());

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:27:11.627

**您可以使用 xtype“ datetime** ”创建一个小部件并将值应用为“now”，以便在作者没有选择任何内容的情况下使用今天的日期初始化日期字段。

一个示例小部件如下所示：

```
"date":{"fieldLabel":"datetime","xtype":"datetime","name":"./date","value":"now","jcr:primaryType":"cq:Widget"} 
```

这也适用于 Pageproperties。

[日期时间小部件 API](http://dev.day.com/docs/en/cq/5-5/widgets-api/?class=CQ.from.DateTime)。

# android - 能够在 webview 中播放 YouTube 视频吗？

> ID：14207223
> 
> 赞同：1
> 
> 时间：2013-01-08T02:10:13.580
> 
> 标签：android, flash, webview, youtube-api, webclient

我想使用 Flash 在 web 视图中播放 YouTube 视频。

例如，当 WebView 加载 youtube.com 并且您单击视频时，它将完全播放，没有任何限制。目前，我收到一个带有损坏的 Flash 播放器图片的灰色视频。

我试图添加：

```
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setPluginState( WebSettings.PluginState.ON ); 
```

我还添加`android:hardwareAccelerated="true"`到 Manifest XML 中，但没有任何运气。

我在我的 Nexus 7 上运行它，不知道这是否会有所作为。我已经检查了互联网的每个角落和缝隙，但没有找到解决方案。

```
WebView mWebView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.setWebViewClient(new ClientOP());
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setPluginState( WebSettings.PluginState.ON );
    mWebView.loadUrl("http://www.youtube.com");
    mWebView.getSettings().setLoadWithOverviewMode(true);
    mWebView.getSettings().setUseWideViewPort(true);
    mWebView.getSettings().setBuiltInZoomControls(true);
    mWebView.setVerticalScrollBarEnabled(false);
    mWebView.setHorizontalScrollBarEnabled(false);
}

public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {
        mWebView.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

private class ClientOP extends WebViewClient {

    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        System.out.println("URL: " + url);
        view.loadUrl(url);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:22:51.103

Android 不再支持 Flash。为什么不使用新的 Youtube api？ [https://developers.google.com/youtube/android/player/](https://developers.google.com/youtube/android/player/)

# php - 获取 Magento 中产品图像的高度

> ID：14207224
> 
> 赞同：1
> 
> 时间：2013-01-08T02:10:22.043
> 
> 标签：php, magento

在 Magento 的 media.phtml 文件中，您可以获得第一个产品图像的图像高度：

```
<?php $imageWidth = $this->helper('catalog/image')->init($_product, 'image')->getOriginalWidth(); ?> 
```

但是，这不适用于进一步的产品图像（在 foreach 循环中）：

```
<?php if (count($this->getGalleryImages()) > 1): ?>
<?php foreach ($this->getGalleryImages() as $_image): ?> 
```

也没有。。

```
<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'image', $_image->getFile())->getOriginalWidth(); ?> 
```

有人有答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:23:29.507

目录图像助手缺乏对这些操作的支持。您将不得不初始化您的图像模型并从那里获取大小。所以：

```
<?php foreach ($this->getGalleryImages() as $_image): ?>
  <?php $image = new Varien_Image($_image->getPath()); ?>
  <?php echo $image->getOriginalWidth(); ?>
  <?php echo $image->getOriginalHeight(); ?>
<?php endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:37:36.450

Jernej 答案的另一种选择是：

```
$imagelink = $this->helper('catalog/image')->init($this->getProduct(), 'image', $_image->getFile());                        

list($width, $height, $type, $attr) = getimagesize($imagelink);

echo $width; 
```

# whitespace - Freemarker插值剥离空白？

> ID：14207225
> 
> 赞同：2
> 
> 时间：2013-01-08T02:10:27.020
> 
> 标签：whitespace, freemarker

我似乎在文本区域中的前导/尾随空格有问题！

如果最后一个用户在文本区域中输入了跨多行前导/尾随空格的值，则除了开头和结尾的一个空格外，它们都会消失。

示例：如果文本框有以下几行：（引号仅用于帮助说明空格）

```
"   3.0"
"  2.2  "
"0.3   " 
```

它将被保存在后端

```
"<textarea id=... >   3.0/n  2.2  /n0.3   </textarea>" 
```

我的模板（对于这部分）非常简单（整个模板，不是那么简单......）：
**${label} ${textField}**

当我再次加载值时，我注意到 getTextField() 正在正确获取所需的字符串，之前引用过......但是当我查看它显示的 html 页面时

```
" 3.0"
"2.2"
"0.3 " 
```

当然，当“查看采购”时，它没有在 getTextField() 中看到的字符串

我试过的：

*   确保后端有 setWhitespaceStripping(false); 放
*   添加 <#ftl strip_whitespace=false>
*   在 ${textField} 所在的同一行添加 <#nl>

无论我尝试过什么，我都没有运气在插值后保留空格。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:50:49.937

也许您在`<#compress>...</#compress>`（或`<@compress>...</@compress>`）块内。那些在运行时过滤整个输出并减少空格，无论它来自哪里。我建议不要使用这个指令。它使输出变得更小，但它具有运行时开销，并且在这种情况下可能会破坏输出。

FreeMarker 插值不会从插入的值中删除空格，也不会以任何方式更改值。除非，如果您在词法上位于`<#escape ...>....</#escape>`, 块中，则会自动应用。但是你不太可能有一个破坏空白的转义表达式。但可以肯定的是，您可以检查*同一个*`<#escape ...>`模板文件中是否有任何内容（无需检查其他地方，因为它不是运行时指令）。

 *`strip_whitespace`并且`#nt`仅在解析期间删除空格（即在执行之前），因此它们是不相关的。

*您还可以在插入之前检查插入值*中是否仍然存在空格，如下所示：

```
${textField?replace(" ", "[S]")?replace("\n", "[N]")?replace("\t", "[T]")} 
```

如果您发现它们已被删除，则可能意味着在将值放入数据模型之前它们已被删除。那么如果不是 FreeMarker。*

# rest - Hbase Stargate 返回打乱的值

> ID：14207227
> 
> 赞同：1
> 
> 时间：2013-01-08T02:10:54.827
> 
> 标签：rest, hbase, stargate

我正在尝试将 Hbase Stargate 作为与我的 Hbase 安装捆绑在一起的 REST 服务器。启动和运行很简单，但我想知道如何查看实际的行数据？当我在我的 REST 客户端中执行 GET 请求时，我返回了乱码：

**获取本地主机：8282/article/row1/**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<CellSet>
<Row key="cm93MQ==">
<Cell column="Y2Y6QXJ0aWNsZUlE" timestamp="1357592601561">MQ==</Cell>
<Cell column="Y2Y6Q2FwRGF0ZQ==" timestamp="1357592790624">dG9kYXk=</Cell>
<Cell column="Y2Y6Q292ZXJhZ2U=" timestamp="1357592715068">U2FtcGxlIENvdmVyYWdl</Cell>
<Cell column="Y2Y6RW5jb2Rpbmc=" timestamp="1357592773388">VVRGLTg=</Cell>
<Cell column="Y2Y6TENvZGU=" timestamp="1357592744929">ZW4=</Cell>
<Cell column="Y2Y6TGFuZw==" timestamp="1357592760758">RW5nbGlzaA==</Cell>
<Cell column="Y2Y6TmF0aXZlTmFtZQ==" timestamp="1357592681884">U2FtcGxlIE5hdGl2ZSBOYW1l</Cell>
<Cell column="Y2Y6UHViRGF0ZQ==" timestamp="1357592786561">dG9kYXk=</Cell>
<Cell column="Y2Y6U291cmNlSUQ=" timestamp="1357592732763">MQ==</Cell>
<Cell column="Y2Y6U291cmNlSUQ=" timestamp="1357592663427">U2FtcGxlIFNvdXJjZSBJRA==</Cell>
<Cell column="Y2Y6U291cmNlVHlwZQ==" timestamp="1357592701595">U2FtcGxlIFNvdXJjZSBUeXBl</Cell>
<Cell column="Y2Y6VGV4dA==" timestamp="1357592802878">U2FtcGxlIFRleHQ=</Cell>
<Cell column="Y2Y6VGl0bGU=" timestamp="1357592629292">U2FtcGxlIFRpdGxl</Cell>
<Cell column="Y2Y6VHJUaXRsZQ==" timestamp="1357592640605">U2FtcGxlIFRyVGl0bGU=</Cell>
<Cell column="Y2Y6VXJs" timestamp="1357592616187">aHR0cDovL3d3dy5nb29nbGUuY29t</Cell>
</Row>
</CellSet> 
```

我确实参考了 WIKI，它也显示了带有乱码结果的示例：[http](http://wiki.apache.org/hadoop/Hbase/Stargate#A5) ://wiki.apache.org/hadoop/Hbase/Stargate#A5 ，但我找不到任何关于如何解码它的信息。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T05:17:11.350

解码结果的一种方法是使用 shell 中的 base64 函数。例如。

```
echo "cm93MQ==" | base64 -d 
```

# actionscript-3 - 策略请求是否需要延迟？

> ID：14207228
> 
> 赞同：0
> 
> 时间：2013-01-08T02:11:21.263
> 
> 标签：actionscript-3, flash, cross-domain-policy

我和我的朋友一直在用 as3 开发多人游戏。没有策略请求的测试在本地成功，但最后我们添加了它，以便我们可以在浏览器上测试。

发生了奇怪的事情，因为它设法连接到服务器，但需要向连接按钮发送垃圾邮件才能开始发送数据。

有了计时器，问题就解决了，但我们不想等待 5 秒才能连接。我不知道出了什么问题，在互联网上几乎没有关于这件事的信息。有人尝试过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:30:11.080

策略请求不应该要求您手动添加延迟，所以肯定有其他事情发生。

> 即使该方法名为 Security.loadPolicyFile()，也不会加载策略文件，直到发出需要策略文件的网络调用。对 loadPolicyFile() 的调用只是告诉 Flash Player 在需要时到哪里查找策略文件。
> 
> 您无法收到有关何时启动或完成策略文件请求的通知，也没有理由这样做。Flash Player 异步执行策略检查，并自动等待启动连接，直到策略文件检查成功。

来源：[http ://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e08.html](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e08.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T07:04:46.493

这可能是因为 Flash 游戏必须先从 Web 加载到缓存中。它可能取决于互联网速度、计算机缓存、您正在使用的浏览器等。同样适用于所有其他文档、flash、HTML 等，在本地测试它可以让您即时访问，但从网络打开它需要时间

# android - 将 ImageView 设置为背景 Android

> ID：14207230
> 
> 赞同：2
> 
> 时间：2013-01-08T02:11:52.150
> 
> 标签：android, eclipse, background, imageview

我发现了许多类似的问题和答案，但我没有成功解决这些问题。

我想将 ImageView 设置为背景，以便我所做的一切都在它前面。（我不想使用 xml 背景选项，因为我将在活动中更改我的背景，我不知道如何防止它拉伸。）

谢谢！

```
bg = (ImageView) findViewById(R.id.bg);
bg.setImageResource(R.drawable.marbles); 
```

* * *

```
<ImageView
    android:id="@+id/bg"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:src="@drawable/marbles" /> 
```

* * *

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Nim" >

    <ImageView
        android:id="@+id/bg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:src="@drawable/marbles" />

    <TextView
        android:id="@+id/tvTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/tvTitle"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/tvInfo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvTitle"
        android:layout_centerHorizontal="true"
        android:text="@string/tvInfo"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <SeekBar
        android:id="@+id/sbMarbles"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/tvInfo" />

    <Button
        android:id="@+id/butMarbles"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="@string/butMarbles" />

    <EditText
        android:id="@+id/tvMarbles"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toLeftOf="@+id/butMarbles"
        android:layout_toRightOf="@+id/sbMarbles"
        android:ems="10"
        android:inputType="number" />

    <TextView
        android:id="@+id/tvInfo2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvInfo"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:text="@string/tvInfo"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Button
        android:id="@+id/butYes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvInfo2"
        android:layout_marginTop="83dp"
        android:layout_toLeftOf="@+id/tvTitle"
        android:text="@string/butYes" />

    <Button
        android:id="@+id/butNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/butYes"
        android:layout_alignBottom="@+id/butYes"
        android:layout_toRightOf="@+id/tvInfo2"
        android:text="@string/butNo" />

</RelativeLayout> 
```

* * *

日志猫

```
01-07 21:00:00.453: E/AndroidRuntime(568): FATAL EXCEPTION: main
01-07 21:00:00.453: E/AndroidRuntime(568): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.evorlor.gameofnim/com.evorlor.gameofnim.Nim}: java.lang.ClassCastException: android.widget.TextView
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.os.Looper.loop(Looper.java:123)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-07 21:00:00.453: E/AndroidRuntime(568):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 21:00:00.453: E/AndroidRuntime(568):  at java.lang.reflect.Method.invoke(Method.java:507)
01-07 21:00:00.453: E/AndroidRuntime(568):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-07 21:00:00.453: E/AndroidRuntime(568):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-07 21:00:00.453: E/AndroidRuntime(568):  at dalvik.system.NativeStart.main(Native Method)
01-07 21:00:00.453: E/AndroidRuntime(568): Caused by: java.lang.ClassCastException: android.widget.TextView
01-07 21:00:00.453: E/AndroidRuntime(568):  at com.evorlor.gameofnim.Nim.listener(Nim.java:56)
01-07 21:00:00.453: E/AndroidRuntime(568):  at com.evorlor.gameofnim.Nim.onCreate(Nim.java:41)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-07 21:00:00.453: E/AndroidRuntime(568):  ... 11 more
01-07 21:18:20.403: E/AndroidRuntime(704): FATAL EXCEPTION: main
01-07 21:18:20.403: E/AndroidRuntime(704): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.evorlor.gameofnim/com.evorlor.gameofnim.Opening}: java.lang.NullPointerException
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.os.Looper.loop(Looper.java:123)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-07 21:18:20.403: E/AndroidRuntime(704):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 21:18:20.403: E/AndroidRuntime(704):  at java.lang.reflect.Method.invoke(Method.java:507)
01-07 21:18:20.403: E/AndroidRuntime(704):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-07 21:18:20.403: E/AndroidRuntime(704):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-07 21:18:20.403: E/AndroidRuntime(704):  at dalvik.system.NativeStart.main(Native Method)
01-07 21:18:20.403: E/AndroidRuntime(704): Caused by: java.lang.NullPointerException
01-07 21:18:20.403: E/AndroidRuntime(704):  at com.evorlor.gameofnim.Opening.listener(Opening.java:36)
01-07 21:18:20.403: E/AndroidRuntime(704):  at com.evorlor.gameofnim.Opening.onCreate(Opening.java:28)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-07 21:18:20.403: E/AndroidRuntime(704):  ... 11 more
01-07 21:19:32.743: E/AndroidRuntime(737): FATAL EXCEPTION: main
01-07 21:19:32.743: E/AndroidRuntime(737): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.evorlor.gameofnim/com.evorlor.gameofnim.Opening}: java.lang.NullPointerException
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.os.Looper.loop(Looper.java:123)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-07 21:19:32.743: E/AndroidRuntime(737):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 21:19:32.743: E/AndroidRuntime(737):  at java.lang.reflect.Method.invoke(Method.java:507)
01-07 21:19:32.743: E/AndroidRuntime(737):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-07 21:19:32.743: E/AndroidRuntime(737):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-07 21:19:32.743: E/AndroidRuntime(737):  at dalvik.system.NativeStart.main(Native Method)
01-07 21:19:32.743: E/AndroidRuntime(737): Caused by: java.lang.NullPointerException
01-07 21:19:32.743: E/AndroidRuntime(737):  at com.evorlor.gameofnim.Opening.listener(Opening.java:36)
01-07 21:19:32.743: E/AndroidRuntime(737):  at com.evorlor.gameofnim.Opening.onCreate(Opening.java:28)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-07 21:19:32.743: E/AndroidRuntime(737):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T02:14:43.923

使用 a`RelativeLayout`或 a`FrameLayout`并将您的定义`ImageView`为第一个孩子。定义的第一个对象在 z 顺序中是最低的（即它们将位于其他视图的“下方”）。

# c++ - Cocos2d-x 中不能调用两次按钮点击函数

> ID：14207231
> 
> 赞同：0
> 
> 时间：2013-01-08T02:11:57.500
> 
> 标签：c++, cocos2d-x

我是 cocos2dx 的基础。我正在使用“UIviewcontroller”如下

```
-(void)showLeaderBoar:(NSString*) category
{
GKLeaderboardViewController *leaderboad=[[GKLeaderboardViewController alloc] init];
   if(leaderboad!=nil)
   {
       UIWindow *window=[[UIApplication sharedApplication]keyWindow];
       UIViewController * currentModalViewController=[[UIViewController alloc]init];
      [window addSubview:currentModalViewController.view];
      leaderboad.category=category;
       leaderboad.timeScope=GKLeaderboardTimeScopeAllTime;
       leaderboad.leaderboardDelegate=self;
       [[LeaderBoardManager sharedManager] reportScore:10000 forCategory:category];

       [currentModalViewController presentModalViewController:leaderboad animated:YES];
    }
[leaderboad release];
}

-(void) leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)viewController
{

  [viewController dismissModalViewControllerAnimated:YES];  
   [viewController release];

} 
```

当我第一次运行并单击排行榜按钮时，我可以获得，但下次我单击时，我无法调用此函数。谁能指出我的错误？谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T17:19:17.560

尝试这个：

```
 self.modalPresentationStyle = UIModalPresentationCurrentContext; 
```

此外，考虑从不同的视图控制器呈现它。

# unix - 将列修剪为unix文件中的固定长度

> ID：14207232
> 
> 赞同：1
> 
> 时间：2013-01-08T02:11:59.050
> 
> 标签：unix, sed, awk

我的文件包含以下格式的数据。第三和第四字段是日期。我想只保留这些字段的日期部分并删除时间部分。第二个分数始终是“.0Z”。

输入：

```
1,2,2012-04-11T00:06:52.0Z,2012-04-11T00:06:52.0Z 
```

输出：

```
1,2,2012-04-11,2012-04-11 
```

谢谢吉滕德拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T02:20:32.503

你可以这样使用`sed`：

```
sed 's/T[^,]*//g' file 
```

或与`awk`：

```
awk '{ gsub(/T[^,]*/,"") }1' file 
```

* * *

或者如果前两个字段可能包含字母“T”：

```
sed 's/\([^,]*,[^,]*,[^T]*\)[^,]*\([^T]*\).*/\1\2/' file 
```

或与`awk`：

```
awk -F, '{ sub(/T.*/,"",$3); sub(/T.*/,"",$4) }1' OFS=, file.txt 
```

结果：

```
1,2,2012-04-11,2012-04-11 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T02:19:56.380

使用[sed](/questions/tagged/sed "显示标记为“sed”的问题")：

```
sed 's/T[^,]*//g' input_file 
```

## 输出：

```
1,2,2012-04-11,2012-04-11 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T02:16:15.547

如果您的环境可用，一种可能性是使用 perl 来解决此问题。

```
perl -pe 's/^(\d+),(\d+),(.*)T.*,(.*)T.*/\1,\2,\3,\4/' < yourfile 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T03:16:03.020

由于前两个字段可能包含`T`,`awk`应该是比 更好的选择`sed`：

```
awk -F, '{sub("T.*","",$3); sub("T.*","",$4); print}' OFS=, input_file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T10:06:48.120

```
perl -F, -ane '$F[3]=~s/T.*//g;$F[2]=~s/T[^,]*//g;print join ",",@F;' your_file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T15:14:58.127

我会使用逗号和“T”作为字段分隔符。然后`$4`和`$6`是时间字段。然后，您可以丢弃不需要的字段

```
awk -F '[,T]' -v OFS=, '{print $1,$2,$3,$5}' 
```

# tabs - 在 Ace 编辑器中隐藏标签标记

> ID：14207233
> 
> 赞同：1
> 
> 时间：2013-01-08T02:12:06.317
> 
> 标签：tabs, editor, markers, ace-editor

Ace 编辑器显示选项卡标记。选项卡用点标记。有没有办法隐藏它们？

这是我用来加载编辑器的代码：

```
var themeCssAceEditor = ace.edit("themeCssAceEditor");
baseCssAceEditor.setTheme("ace/theme/monokai");
themeCssAceEditor.getSession().setMode("ace/mode/css");
themeCssAceEditor.on("change", function test() { }); 
```

另外，任何人都可以解释以下行的含义吗？ `themeCssAceEditor.getSession().setUseSoftTabs(true);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:00:00.353

`themeCssAceEditor.setDisplayIndentGuides(false)`（见厨房水槽演示）

`useSoftTabs`表示制表符扩展到空格

# javascript - 确定单击元素时是否发生某些事情

> ID：14207235
> 
> 赞同：0
> 
> 时间：2013-01-08T02:12:18.537
> 
> 标签：javascript

是否有人对单击 DOM 元素时确定是否发生某些事情（javascript 事件，或者在简单的情况下为标记）的万无一失的方法有想法？

要检查的事情有哪些可能性？例如，您可以检查`<a>`标签、`onclick`事件等。

在更复杂的情况下，Javascript 可能会简单地检测点击在页面上的位置并根据它采取行动（即事件与元素无关，而是与整个页面相关联，当点击发生时，它会检查它落在哪个元素上）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:23:45.237

也许不是一个直接的答案，但[VisualEvent](https://github.com/DataTables/VisualEvent)是一个 JS 库，它检查大量事件处理程序，包括本机和库附加处理程序。它是开源的，所以你可以看到他们是如何做到的。

# r - 从 GAM 平滑对象确定导数

> ID：14207250
> 
> 赞同：6
> 
> 时间：2013-01-08T02:14:02.887
> 
> 标签：r, mgcv

我有一个非常简单的时间序列数据集，由单个变量（“AVERAGE”）的年平均值组成。我希望研究时间序列的“趋势”分量的变化率（一阶导数）和加速度（二阶导数）以及相关的标准误差。我使用MGCV的GAM和PREDICT函数得到了“趋势”，简单如下：

```
A <- gam(AVERAGE ~ s(YEAR), data=DF, na.action=na.omit)
B <- predict(A, type="response", se.fit=TRUE) 
```

我已经通过 2 种不同的方法确定了导数，应用了高自由度三次平滑样条曲线，并通过一阶和二阶差分（轻微平滑）和引导来近似误差，两者都产生了可比较的结果。

我注意到“gam.fit3”函数有助于确定最多二阶导数，但不直接调用。我还注意到使用类型为“lpmatrix”的“predict.gam”有助于平滑的导数。我想直接使用“GAM”函数来计算一阶和二阶导数，但我没有足够的技能来计算或提取这些导数。我试图在“Predict.gam”帮助页面末尾为一个变量重新配置 Wood 的示例，但没有成功。任何能让我朝着正确方向前进的帮助都会非常棒。谢谢菲尔。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T03:03:25.607

示例`predict.gam`使用[有限差分](http://en.wikipedia.org/wiki/Finite_difference)来近似平滑项的导数

这是为单个预测器模型执行此操作的示例。这比帮助中的示例更直接。

```
A <- gam(AVERAGE ~ s(YEAR), data=DF, na.action=na.omit)
# new data for prediction
newDF <- with(DF, data.frame(YEAR = unique(YEAR)))
# prediction of smoothed estimates at each unique year value
# with standard error    
B <- predict(A,  newDF, type="response", se.fit=TRUE)

# finite difference approach to derivatives following
# example from ?predict.gam

eps <- 1e-7
X0 <- predict(A, newDF, type = 'lpmatrix')

newDFeps_p <- newDF + eps

X1 <- predict(A, newDFeps_p, type = 'lpmatrix')

# finite difference approximation of first derivative
# the design matrix
Xp <- (X0 - X1) / eps

# first derivative
fd_d1 <- Xp %*% coef(A)

# second derivative
newDFeps_m <- newDF - eps

X_1 <- predict(A, newDFeps_m, type = 'lpmatrix')
# design matrix for second derivative
Xpp <- (X1 + X_1 - 2*X0)  / eps^2
# second derivative
fd_d2 <- Xpp %*% coef(A) 
```

如果您使用引导程序来获取置信区间，您应该能够获得这些近似值的置信区间。

# webbrowser-control - 禁用WP8手机中出现的长按应用栏：WebBrowser控件

> ID：14207257
> 
> 赞同：1
> 
> 时间：2013-01-08T02:14:55.850
> 
> 标签：webbrowser-control, windows-phone-8, application-bar

Windows Phone 8 中的 phone:WebBrowser 控件具有这样一种行为：如果您在控件中点按并按住文本块，将启用选择机制并出现具有复制粘贴功能的 ApplicationBar。在我的应用程序中，这个 ApplicationBar 隐藏了我内容的关键部分。如何禁用手机中的长按复制粘贴应用程序栏：Windows Phone 8 中的 WebBrowser 控件？

谢谢！

这是显示我的意思的屏幕截图：

![在此处输入图像描述](../Images/939a75665f8ac17badae34ff8a4551bb.png)

# ruby-on-rails - 控制器没有收到 id 参数

> ID：14207258
> 
> 赞同：0
> 
> 时间：2013-01-08T02:15:02.290
> 
> 标签：ruby-on-rails, controller, routes

我正在尝试显示一个页面，显示喜欢微博的用户。我希望 Uri 是 localhost:3000/microposts/someid#/into_it。似乎通过路径没有响应控制器？

我在 view/microposts/_micropost.html.erb 文件中链接到此页面：

```
<%= link_to micropost.votes_for, into_it_micropost_path(@micropost) %> 
```

由于此路径，我在浏览器中收到以下错误并且页面未加载：

```
No route matches {:action=>"into_it", :controller=>"microposts", :id=>nil} 
```

在我的微帖子控制器中：

```
def into_it  #for the view; displays who likes the post
  @title = "Into_it!"
  @micropost = Micropost.find(params[:id])
  render 'show_users_into_it'
end 
```

micropost/show_users_into_it 当前是一个空白文件

路由文件：

```
resources :microposts, only: [:create, :destroy, :into_it] do
  member do
    get :into_it
  end
end 
```

在耙式路线中，我有：

```
into_it_micropost GET    /microposts/:id/into_it(.:format)     microposts#into_it 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T05:55:36.733

发生此错误是因为 @micropost 无效。@micropost 应该是来自数据库的对象。它应该有一个ID。在您的错误消息中，您可以看到 micropost 的 id 为 nil（我猜 @micropost 是新记录）。

```
:id=>#<Micropost id: nil 
```

如果你通过现有的@micropost 一切都会好起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:59:54.973

真的只是一个愚蠢的错误。路线没有得到 id 参数。我所要做的只是改变：

```
into_it_micropost_path(@micropost) 
```

到

```
into_it_micropost_path(micropost.id) 
```

以便它从数据库中的现有记录中获取 id

# php - php：比较 UUID 和字符串

> ID：14207259
> 
> 赞同：0
> 
> 时间：2013-01-08T02:15:03.677
> 
> 标签：php, uuid

以下代码不起作用：

```
if ($entryByPhaseID["activity_ID"] == "50e5cde678bf94.62826693")
                        {
                            echo $entryByPhaseID["activity_ID"]. "<BR>";
                            $DIB = $DIB + $entryByPhaseID["net_value"]; 
                        } 
```

我正在尝试将使用查询 $entryByPhaseID["activity_ID"] 检索到的 UUID 与它的字符串表示进行比较。我从来没有看到回声消息...你能帮忙吗？谢谢你。

# android - 两片一屏

> ID：14207260
> 
> 赞同：3
> 
> 时间：2013-01-08T02:15:11.263
> 
> 标签：android, android-listfragment

我已经实现了一个`Activity`托管两个片段的。我在左边有一个片段，在右边有一个。左侧的片段是要单击的项目列表。当您单击它时，它会在右侧膨胀一个新片段。

左侧列表中的一项应该扩充右侧的不同列表。我让它运行良好，除非当您单击该项目时，它会使列表膨胀以覆盖整个屏幕。我只希望它覆盖屏幕右侧的空间。

有没有办法让片段不覆盖整个屏幕？所有其他人都留在屏幕的右侧，只是这个没有。但这是唯一一个试图`ListView`在右侧充气的。

以下`ListFragemnt`是应该在右侧充气的相关方法：

```
public void onActivityCreated(Bundle inState) {
    super.onActivityCreated(inState);
    //setContentView(R.layout.results_list_activity);
    //mIntent = getIntent();
    mActivity = getActivity();
    mArrayListRecipe = generateList();

    ListView listView = (ListView) mActivity.findViewById(android.R.id.list);
    ArrayAdapter<Recipe> adapter = new ArrayAdapter<Recipe>(mActivity,
            android.R.layout.simple_list_item_1, mArrayListRecipe);

    listView.setAdapter(adapter);
    //listView.setOnItemClickListener((OnItemClickListener) this);
}

public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    LinearLayout layout = (LinearLayout) inflater.inflate(R.layout.results_list_activity, container, false);
    return layout;
} 
```

这里是扩展名为 results_list_activity.xml 的 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

<ListView xmlns:android="http://schemas.android.com/apk/res/android" android:id="@android:id/list"
          android:layout_width="0dp" android:layout_height="match_parent" android:layout_weight="1"/> 
```

这是包含我希望`ListView`放置在**main_activity.xml**中的框架的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:tools="http://schemas.android.com/tools" android:id="@+id/main_layout_land"
          android:layout_width="match_parent" android:layout_height="wrap_content"
          android:orientation="horizontal" android:layout_alignParentBottom="true">

<!-- Left side fragment -->
<fragment class="com.jasoncrosby.app.recipeorganizer.MainFragment" android:id="@+id/left_fragment"
              android:layout_width="0dp" android:layout_height="match_parent" android:layout_weight="1"/>

<!-- Right side fragment -->
<FrameLayout android:id="@+id/right_fragment" android:layout_width="0dp" android:layout_height="match_parent"
                 android:layout_weight="1"/>
</LinearLayout> 
```

编辑：

加载片段的活动很简单，只包含对以下内容的调用：

```
setContentView(R.layout.main_activity); 
```

这是**MainFragment.java**：

```
public class MainFragment extends ListFragment {

//*******
// Fields
//*******

    /** Indicated weather there is enough room on the screen to use 2 panes. */
    private boolean mDualPane;

    /** Indicates which item in the main list was clicked. */
    private int mCurCheckPosition = 0;

    /** The name of the save button. */
    private String mStringSaveItemName;

    /** The name of the search button. */
    private String mStringSearchItemName;

    /** The name of the browse button. */
    private String mStringBrowseItemName;

    /** The name of the random button. */
    private String mStringRandomItemName;

    /** The {@code Activity} associated with this {@code Fragment}. */
    private Activity mActivity;

//*************
// Constructors
//*************

/**
 * This constructor is only provided to avoid a compiler warning. It should not be used to crate a new
 * {@code MainFragment} object.
 */
public MainFragment(){}

/**
 * Used to create a new {@code MainFragment} object with the id.
 * 
 * @param id
 */
//public MainFragment(int id) {
    //mIntFragmentId = id;
    //mContext = context;
//}

//*******************
// Overridden methods
//*******************

@Override
public void onActivityCreated(Bundle savedState) {
    super.onActivityCreated(savedState);

    mActivity = getActivity();

    mStringSaveItemName = mActivity.getString(R.string.save_button);
    mStringSearchItemName = mActivity.getString(R.string.search_button);
    mStringBrowseItemName = mActivity.getString(R.string.browse_button);
    mStringRandomItemName = mActivity.getString(R.string.random_button);

    // Populate list with our static array of titles.
    setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1,
            new String[] {mStringSaveItemName, mStringSearchItemName, mStringBrowseItemName,
            mStringRandomItemName}));

    // Check to see if we have a frame in which to embed the details
    // fragment directly in the containing UI.
    View detailsFrame = mActivity.findViewById(R.id.right_fragment);
    mDualPane = detailsFrame != null && detailsFrame.getVisibility() == View.VISIBLE;

    if (mDualPane) {
        // In dual-pane mode, list view highlights selected item.
        getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        // Make sure our UI is in the correct state.
        showDetails(mCurCheckPosition);
    }
}

@Override
public void onListItemClick(ListView l, View v, int pos, long id) {
    showDetails(pos);
}

//****************
// Private methods
//****************

private void showDetails(int index) {
    mCurCheckPosition = index;

    if (mDualPane) {

        switch (mCurCheckPosition) {
            case 0  : inflateFirstUi(); break;
            case 1  : inflateSecondUi(); break;
            case 2  : inflateThirdUi(); break;
            case 3  : inflateFourthUi(); break;
            default : inflateFirstUi(); break;
        }

    } else {
        // Otherwise we need to launch a new activity to display
        // the dialog fragment with selected text.
        Intent intent = new Intent();
        //intent.setClass(getActivity(), DetailsActivity.class);
        intent.putExtra("index", index);
        startActivity(intent);
    }
}

private void inflateFirstUi() {
    SaveFragment details = new SaveFragment();

    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.replace(R.id.right_fragment, details);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    ft.commit();
}

private void inflateSecondUi() {
    SearchFragment details = new SearchFragment();

    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.replace(R.id.right_fragment, details);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    ft.commit();
}

private void inflateThirdUi() {
    ResultsListFragment details = new ResultsListFragment(Constants.BROWSE_REQUEST);

    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.replace(R.id.right_fragment, details);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    ft.commit();
}

private void inflateFourthUi() {
    ResultsListFragment details = new ResultsListFragment(Constants.RANDOM_REQUEST);

    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.replace(R.id.right_fragment, details);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    ft.commit();
}
} 
```

问题出`showDetails()`在 switch 语句中的方法上。案例 0 和案例 1 工作得很好，可以加载到我在屏幕右侧的窗格中。案例 3 是我遇到这个问题的地方。它会加载 UI，但会覆盖整个屏幕，而不是局限于窗格的右侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:10:23.673

好的，我已经解决了问题。在我的`onActivityCreated()`方法中，我调用了：

```
listView.setAdapter(adapter); 
```

我回去比较了与这个不起作用的片段一起工作的片段。我发现在那些我称之为的工作中：

```
setListAdapter(adapter); 
```

我将非工作片段更改为 call`setListAdatpter(adapter)`而不是`listView.setAdapter(adapter)`。现在片段正像它应该的那样显示在屏幕的右侧。感谢所有帮助并正在调查此事的人。

# iphone - 如何从不在网络上的计算机连接到 MySQL 服务器？

> ID：14207263
> 
> 赞同：-1
> 
> 时间：2013-01-08T02:15:31.630
> 
> 标签：iphone, mysql, remote-access

因此，有很多关于将 MySQL 配置为通过本地网络通过远程计算机访问的内容。我正在尝试使用不在同一网络上的设备连接到它，并且无法弄清楚如何做到这一点！

进一步来说：

*   我在家里运行 Ubuntu 12.04 LTS 的计算机上有 MySQL
*   我希望能够使用 iPhone 应用程序与数据库进行通信（我知道如何在 iPhone 上执行 sqlite 的操作，但我不知道如何从城市/配置的另一端连接到数据库支持这个的数据库）
*   我想如果我可以使用不在网络上的另一台计算机连接到它，我将能够创建一个基于 JSON 的服务来收集数据，我不需要专门的 iPhone 代码

我假设我需要在服务器上设置一些用户名/配置 IP 以进行远程访问，但在这方面我是个菜鸟。任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:43:06.320

可能想要创建一个中间层来处理与数据库的连接，它可以是一个有用的 Web 服务来连接到 MySQL，并从 iPhone 连接到 WS。

# algorithm - 使用 HMM 和 Viterbi 算法来纠正印刷错误

> ID：14207267
> 
> 赞同：0
> 
> 时间：2013-01-08T02:16:14.073
> 
> 标签：algorithm, machine-learning, artificial-intelligence, hidden-markov-models, viterbi

我想使用 HMM 和 Viterbi 算法来纠正印刷错误，我计算了所需的概率，但是当我应用 Viterbi 算法时，我得到了非常糟糕的结果，我逐行检查了代码，我找不到错误

```
public ForwardViterbi(string[] states, string[] observations, double[] startProbability, double[,] transitionProbability, double[,] emissionProbability, double scaleFactor)
        {

            this.states = states;
            this.observations = observations;
            this.startProbability = startProbability;
            this.transitionProbability = transitionProbability;
            this.emissionProbability = emissionProbability;
            this.scaleFactor = scaleFactor;

        }

        //----------------------------------------------------------------------
        //The Methods

        public void Process(int[] problem)
        {

            double[,] T = new double[states.Length, 3];  //We will store the probability sequence for the Viterbi Path
            vPath = new int[problem.Length];
            vProbs = new double[problem.Length];

            //initialize T
            //------------------------------------------------------------------    
            for (int state = 0; state < states.Length; state++)
            {
                T[state, 0] = startProbability[state];
                T[state, 1] = state;
                T[state, 2] = startProbability[state];
            }

            for (int output = 0; output < problem.Length; output++)
            {

                double[,] U = new double[states.Length, 3];  //We will use this array to calculate the future probabilities

                Console.WriteLine("\nTesting hypothesis {0} ({1})", output, observations[problem[output]]);
                double highest = 0;

                for (int nextState = 0; nextState < states.Length; nextState++)
                {
                    double total = 0;
                    double argMax = 0;
                    double valMax = 0;

                    Console.WriteLine("  Estimating probability for future state {0} ({1})", nextState, states[nextState]);
                    for (int state = 0; state < states.Length; state++)
                    {
                        Console.WriteLine("    The testing state is {0} ({1})", states[state], state);
                        double prob = T[state, 0];
                        double v_path = T[state, 1];
                        double v_prob = T[state, 2];
                        double p = emissionProbability[state, problem[output]] * transitionProbability[state, nextState] * scaleFactor;
                        prob *= p;
                        v_prob *= p;
                        total += prob;

                        if (v_prob > valMax)
                        {
                            valMax = v_prob;
                            argMax = nextState;
                        }

                        Console.WriteLine("    VProbability of {0} is {1} with scale {2}^{3}", states[nextState], v_prob, scaleFactor, output + 1);

                        if (v_prob > highest)
                        {
                            highest = v_prob;
                            vPath[output] = nextState;
                            vProbs[output] = v_prob;
                        }
                    }

                    U[nextState, 0] = total;
                    U[nextState, 1] = argMax;
                    U[nextState, 2] = valMax;
                }
                T = U;
                Console.WriteLine("The highest probability was {0} in state {1} (scale factor of {2}^{3})", highest, states[vPath[output]], scaleFactor, output + 1);
            }

            //Apply SumMax
            double Total = 0;
            double ValMax = 0;

            for (int state = 0; state < states.Length; state++)
            {
                double prob = T[state, 0];
                double v_path = T[state, 1];
                double v_prob = T[state, 2];

                Total += prob;
                if (v_prob > ValMax)
                {
                    ValMax = v_prob;
                }
            }

            Console.WriteLine("\nAnalysis: Total probability (sum of all paths) for the given state is :: {0}\nThe Viterbi Path Probability is :: {1}", Total, ValMax);
            Console.WriteLine("The above results are presented with a scale factor of {0}^{1}", scaleFactor, problem.Length);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:10:45.083

我刚刚检查了这个实现以及[在 wikipedia 上发布](http://en.wikibooks.org/wiki/Algorithm_Implementation/Viterbi_algorithm#C.23_implementation)的那个。这个好像不行 维基百科上的那个确实有效。如果你愿意 - 你可以比较它们，但我懒得这样做。

（我已经为您的问题实施了解决方案，如此[处](http://www.cs.princeton.edu/courses/archive/fall06/cos402/hw/hw5/hw5.html)所述）

# spring - spring静态资源问题

> ID：14207269
> 
> 赞同：1
> 
> 时间：2013-01-08T02:16:27.297
> 
> 标签：spring, jsp, resources

我的 JSP 文件视图中缺少所有静态资源。我一直在使用以下控制器和调度程序 servlet 配置。

spring 3.0.1 应用程序中的 dispatcher-servlet 文件

```
context:component-scan base-package="com.iop.outreach"/>
<mvc:resources mapping="/resources/**" location="/resources/"/><mvc:annotation-driven/> 
```

示例 JSP 文件

```
...
<link rel="stylesheet" type="text/css" href="resources/css/style.css" /> 
```

请求命中下面的控制器

```
@Controller
@RequestMapping("/superadmin")
public Street Controller {

} 
```

它寻找资源`<applicaton_rootname>/superadmin/resources`而不是`<application_root>/resources/`

我不确定这是在哪里发生的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:00:44.270

尝试这个：

```
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/resources/css/style.css" /> 
```

# asp.net - 列表框选择事件未在启用 UpdatePanel 和 JQuery 的情况下触发

> ID：14207273
> 
> 赞同：0
> 
> 时间：2013-01-08T02:17:06.323
> 
> 标签：asp.net, vb.net, jquery, updatepanel

我有一个列表框，其中存储了一些项目，并且从文本框的按键事件中我选择了我的选择

我面临的问题是，一旦我选择了我的选择 Listbox1_selectIndexchanged 事件（它将我的选择设置为另一个文本框）没有正确触发，它只会在我点击某个按钮或某些页面回发事件时触发......

[我使用过 JQuery 和更新面板]

这是我的代码

```
 <%@ Page Language="vb" AutoEventWireup="false" MasterPageFile="~/Main.Master"             CodeBehind="WebForm1.aspx.vb" Inherits="WebApplication2.WebForm1" 
title="Untitled Page" %>
    <asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    </asp:Content>
    <asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1"  runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:UpdatePanel ID="uppnl" runat="server">
        <ContentTemplate>
        <script type="text/javascript" >
            var prm = Sys.WebForms.PageRequestManager.getInstance();

            prm.add_endRequest(function() {
            $('select[id$=ListBox1]').filterByText($('input[id$=TextBox1]'), true);
            });
            </script>
    <asp:Panel ID="Panel1" runat="server" Style="border-right: thin groove; border-top: thin groove; border-left: thin groove; border-bottom: thin groove; vertical-align: middle; width: 100%; text-align: center; padding-right: 5px; padding-left: 5px; padding-bottom: 5px; padding-top: 5px;">

    <br />

            <asp:Label ID="Label1" runat="server" Text="Type"></asp:Label>
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <asp:Label ID="Label2" runat="server" Text="SelectedText"></asp:Label>
            <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>

    &nbsp;<asp:ListBox ID="ListBox1" runat="server" Height="119px" Width="126px">
        <asp:ListItem Text="Apple" Value="1"></asp:ListItem>
        <asp:ListItem Text="Orange" Value="2"></asp:ListItem>
        <asp:ListItem Text="Peache" Value="3"></asp:ListItem>
        <asp:ListItem Text="Banana" Value="4"></asp:ListItem>
        <asp:ListItem Text="Melon" Value="5"></asp:ListItem>
        <asp:ListItem Text="Lemon" Value="6"></asp:ListItem>
        <asp:ListItem Text="Pineapple" Value="7"></asp:ListItem>
        <asp:ListItem Text="Pomegranate" Value="8"></asp:ListItem>
        <asp:ListItem Text="Mulberry" Value="9"></asp:ListItem>
        <asp:ListItem Text="Apricot" Value="10"></asp:ListItem>
        <asp:ListItem Text="Cherry" Value="11"></asp:ListItem>
        <asp:ListItem Text="Blackberry" Value="12"></asp:ListItem>
    </asp:ListBox>
    <asp:Button ID="Button1" runat="server" Text="Refresh" />
    <br />
    </asp:Panel>
    </ContentTemplate>
    </asp:UpdatePanel>

    <script type="text/javascript">
         jQuery.fn.filterByText = function(textbox, selectSingleMatch) {
        return this.each(function() {
            var select = this;
            var options = [];
            $(select).find('option').each(function() {
                options.push({value: $(this).val(), text: $(this).text()});
            });
            $(select).data('options', options);
            $(textbox).bind('change keyup', function() {
                var options = $(select).empty().data('options');
                var search = $.trim($(this).val());
                var regex = new RegExp(search,"gi");

                $.each(options, function(i) {
                    var option = options[i];
                    if(option.text.match(regex) !== null) {
                        $(select).append(
                           $('<option>').text(option.text).val(option.value)
                        );
                    }
                });
                if (selectSingleMatch === true && $(select).children().length === 1) {
                    $(select).children().get(0).selected = true;
                }
            });            
        });
    };

    $(function() {
         $('select[id$=ListBox1]').filterByText($('input[id$=TextBox1]'), true); 
    });

    </script>

    </asp:Content> 
```

在我后面的代码中我有

```
 Protected Sub ListBox1_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles ListBox1.SelectedIndexChanged
    TextBox2.Text = ListBox1.SelectedItem.ToString()
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:02:35.823

你的事件确实发生了。

控件属性在 Page_Load 方法期间加载，并且您的事件将在 Page_Load 方法之后触发，因此您的页面不会反映其结果。根据页面生命周期，所有事件都将在 Page_Load 方法之后触发。

尝试这个：

```
Protected Sub ListBox1_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles ListBox1.SelectedIndexChanged
    TextBox2.Text = ListBox1.SelectedItem.ToString()
    Page_Load(sender, e)
End Sub 
```

要了解有关页面生命周期的更多信息，请查看[http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx)

**编辑：**

您还需要将列表框绑定到您的事件：

```
<asp:ListBox ID="ListBox1" OnSelectedIndexChanged="ListBox1_SelectedIndexChanged" runat="server"> 
```

# php - 如何创建具有百分比的随机奖品生成器？

> ID：14207274
> 
> 赞同：-8
> 
> 时间：2013-01-08T02:17:09.873
> 
> 标签：php, javascript, html

所以我们可以说，例如，1/20 倍你将获得 200 个硬币。如果失败，您将获得 3 个硬币。或 1/2 次您将获得 9 个硬币，依此类推。

有人可以教我吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-08T02:18:54.543

PHP：

```
if(rand(1,20) == 1) $prize = 200;
else $prize = 3; 
```

JS：

```
if(Math.random() < 1/20) prize = 200;
else prize = 3; 
```

这种事情很琐碎；）

# html - HTML5 - 我无法让最简单的画布元素工作。我究竟做错了什么？

> ID：14207285
> 
> 赞同：1
> 
> 时间：2013-01-08T02:18:32.777
> 
> 标签：html, html5-canvas

我对进入 HTML5 游戏开发很感兴趣，所以很自然地，我做的第一件事就是学习使用 canvas 元素。然而，尽管从众所周知的资源中学习并实际上复制粘贴了他们的代码，但我连画一个矩形都做不到。下面是我的 HTML 和 Javascript 的示例

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="mainStyle.css">

    <script src="mainScript.js"></script>

</head>
<body onload="draw();">

    <canvas id="tut" width="300" height="200" style="border:1px solid #c3c3c3;"></canvas>

</body>
</html>

function draw(){
    var c = document.getElementById("tut");
    if(c.getContext){
        var ctx = c.getContext("2d");

        ctx.fillStyle = "rgb(200, 0 , 0)";
        ctx.fillRect(10, 10 55, 50);

        ctx.fillStyle = "rgba(0, 0 200, 0.5)";
        ctx.fillRect(30, 50, 55, 50)
    }
} 
```

我在这里错过了什么吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T02:22:50.307

您的绘图功能在`html`块之外。它需要在`script`标签内，例如

```
<script>
function draw(){
var c = document.getElementById("tut");
if(c.getContext){
    var ctx = c.getContext("2d");

    ctx.fillStyle = "rgb(200, 0 , 0)";
    // You were also missing a comma in this next line...
    ctx.fillRect(10, 10, 55, 50);

    // ...and also here.
    ctx.fillStyle = "rgba(0, 0, 200, 0.5)";
    ctx.fillRect(30, 50, 55, 50)
    }
}
</script> 
```

# python - 如果先前超时，如何运行条件步骤

> ID：14207289
> 
> 赞同：6
> 
> 时间：2013-01-08T02:20:07.800
> 
> 标签：python, buildbot

我有一个带有几个步骤的 buildbot 构建工厂。其中一个步骤会定期超时，导致 buildbot 抛出异常并退出。但是，即使在这种情况下，我也希望能够存储生成的日志。一种选择是添加一个仅在上一步超时时才运行的步骤。使用`doStepIf`是可能的。但是，没有办法看到状态，因为`TIMEOUT`只有`SUCCESS, WARNINGS, FAILURE, or SKIPPED`. 解决此问题的最佳方法是什么？

函数示例`doStepIf`：

```
from buildbot.status.builder import Results, SUCCESS

def doStepIf(step):
    allSteps = step.build.getStatus().getSteps()
    lastStep = allSteps[-1]
    rc = lastStep.getResults()[0] # returns a tuple of (rc, string)
    # if the rc == SUCCESS then don't continue, since we don't want to run this step
    return Results[rc] == Results[SUCCESS] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:51:37.313

这是部分解决方案：

```
##-----------------------------------------------------------------------------
# Run checker for the timeout condition.
# It will return True if the last step timed out.
def if_tmo(step):
    allSteps = step.build.getStatus().getSteps()
    lastStep = allSteps[0]
    for bldStep in allSteps:
        if (bldStep.isFinished() == True):
            (result, strings) = bldStep.getResults()       # returns a tuple of (rc, string)
            lastStep = bldStep
        else:
            # this step didn't run yet. The one before is the last one
            break;

    # In the timed out step the log is either empty or has the proper string
    logText = lastStep.getLogs()[0].getText()
    timedOutStep = False
    if (len(logText) == 0 or (logText.find("command timed out") != -1)):
        timedOutStep = True

    return (timedOutStep) 
```

我看到了一些不同方法的示例（[链接](https://github.com/isotoma/caroline/blob/master/caroline.cfg)），但这也应该有效。

`getSteps()`将返回*所有*步骤的列表。只需要找出哪些已经运行。

注意：此代码是*部分*解决方案，因为如果脚本打印任何内容，它将无法正常工作。只有在根本**没有**输出的情况下才会起作用。

# text - 如何有效地删除文本文件中一行的前几个字符？

> ID：14207290
> 
> 赞同：0
> 
> 时间：2013-01-08T02:20:19.547
> 
> 标签：text, batch-file, formatting, command

文本文件 (abc.txt) 中的 2 行示例：

```
 PMIP_TSD_2012120323.csv:03/12/2012,22:51:53,CAU TACS,TS,PPT4I_TS22,   AJAY,595959,P,Legal Exit,(6 0) AJAY,G1234567M,SERVICES P L,8401352W,  

    PMIP_TSD_2012111300.csv:12/11/2012,23:20:13,CAU TACS,TS,PPT4O_TS32,ARUMUGAM,620466,P,Legal Exit,(5 0) ARUMUGAM,G686W,SUPERSONIC SERVICES P L,1982W, 
```

我希望每一行都以日期而不是 csv 文件名开头。意味着删除 PMIP......csv: 对于每一行。我如何使用批处理文件来做到这一点？我有数百行，我不想手动完成。我的文件名是 abc.txt，它位于 D:\Int\ KGX

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:50:02.987

这个批处理文件这样做：

```
@echo off
cd /D "D:\Int\KGX"
(for /F "tokens=1* delims=:" %%a in (abc.txt) do (
   echo %%b
)) > abc-NEW.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T02:25:22.740

`perl -npi -e 's/[^:]+://' /tmp/abc.txt`产量：

```
03/12/2012,22:51:53,CAU TACS,TS,PPT4I_TS22,   AJAY,595959,P,Legal Exit,(6 0) AJAY,G1234567M,SERVICES P L,8401352W,  
12/11/2012,23:20:13,CAU TACS,TS,PPT4O_TS32,ARUMUGAM,620466,P,Legal Exit,(5 0) ARUMUGAM,G686W,SUPERSONIC SERVICES P L,1982W, 
```

从你的数据。希望有帮助...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T02:31:04.020

我可以告诉你我对这个问题的看法

我们可以使用 C++ 或 Java 来解决这个问题

1.  打开文件
2.  在一个循环中，我们获取字符串变量中的行
3.  使用 SubString （或某种类似的函数或实用程序）来指定第一个索引号（在我们的例子中是 23）
4.  将子字符串存储在新文件中
5.  完成循环

新文件是您想要的，希望对您有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T09:17:39.340

这应该这样做

```
setlocal enabledelayedexpansion
for /f "tokens=1,* delims=:" %%a in (abc.txt) do (
echo !date!:%%b >>new.txt
)
del abc.txt /f /q
ren new.txt abc.txt 
```

# c# - C# 有 make_tuple 吗？

> ID：14207293
> 
> 赞同：7
> 
> 时间：2013-01-08T02:20:50.487
> 
> 标签：c#, .net, tuples

是否有 C#/.NET 的 make_tuple 等效项？我想做这样的事情

```
mylist.Add(new Tuple<string,int>("", 1)); 
```

当我创建自己的函数时，C# 似乎支持它

```
Tuple<T, U> make_tuple<T, U>(T t, U u) { return new Tuple<T, U>(t, u); }
...
var a = make_tuple(1, ""); //compiles! 
```

但是[msdn tuple](http://msdn.microsoft.com/en-us/library/dd268536.aspx)显示没有使用它

```
 Tuple<string, Nullable<int>>[] scores = 
                { new Tuple<string, Nullable<int>>("Jack", 78),
                  new Tuple<string, Nullable<int>>("Abbey", 92), 
                  ... 
```

有还是没有？我可以使用 4.5

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-08T02:23:31.683

您正在寻找[`Tuple.Create()`](http://msdn.microsoft.com/en-us/library/system.tuple.create.aspx)方法：

```
var a = Tuple.Create(1, ""); 
```

# javascript - Math.random() 有多随机？

> ID：14207295
> 
> 赞同：0
> 
> 时间：2013-01-08T02:21:21.053
> 
> 标签：javascript, random

> **可能重复：**
> [JavaScript 的 Math.random 有多随机？](https://stackoverflow.com/questions/1062902/how-random-is-javascripts-math-random)

究竟使用什么算法`Math.random()`来生成其随机数？

给定双精度数的格式和`Math.random()`产生的范围，有多少可能的结果？

考虑到上述情况和浮点数的（不）准确性，准确`Math.random()`返回 0 的几率是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:26:46.367

它使用一个伪随机数生成器，种子是它被调用的时间。

这个页面有一些图像来比较真正的随机噪声和伪随机噪声。有趣的模式：[http ://boallen.com/random-numbers.html](http://boallen.com/random-numbers.html)

JS 伪随机可能不一定完全一样，但应该很接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:29:09.653

Math.random 使用数字的均匀分布。

# c# - 带有字节字段的结构整理到字节[]

> ID：14207296
> 
> 赞同：1
> 
> 时间：2013-01-08T02:21:46.043
> 
> 标签：c#, struct, bytearray

嗨，我的结构如下

```
 private struct MessageFormat
    {
        public byte[] Header; //start of message
        public byte Fragmentation; //single packet or not
        public byte Encryption; //encrypted message
        public byte[] Authentication; //password
        public byte[] Flag; //to locate end of auth
        public byte[] Data; //info
        public byte[] Trailer; //end of message
    } 
```

在我填充所有字段后，有没有一种方便的方法可以将整个 MessageFormat 转换为单字节数组 []？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:28:46.413

每个字节数组实际上都存储了对字节数组的引用，因此它不是直接的单个数组。

您需要根据这些数据构建一个数组。我个人会制定方法来执行此操作，创建`byte[]`适当长度的结果，然后使用[Array.Copy](http://msdn.microsoft.com/en-us/library/z50k9bft.aspx)复制到结果数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:43:04.353

我已经编写了一个示例代码，它将完全按照您的要求进行。它结合了反射，`Buffer.BlockCopy`但它可以提高性能（即`format`提前装箱，避免匿名类型 - 以及示例中它们尴尬的冗余初始化 - 甚至根本不使用反射并硬编码序列化方法）。请注意，我提供的方法不使用结果缓冲区，而是在分配数组之前计算最终长度。

```
var format = new MessageFormat
{
    //Initialize your format
};
//Gets every instance public field in the type
//Expects it to be either byte, either byte[]
//Extracts value, length and type
var fields = typeof (MessageFormat).GetFields().
    Select(f => f.GetValue(format)).
    Select(v => new
    {
        Value = v,
        Type = v is byte ? typeof (byte) : typeof (byte[]),
        Length = v is byte ? 1 : (v as byte[]).Length
    }).
    ToArray();
//Calculates the resulting array's length
var totalLength = fields.Sum(v => v.Length);
var bytes = new byte[totalLength];
var writingIndex = 0;
foreach (var field in fields)
{
    //If the field is a byte, write at current index,
    //then increment the index
    if (field.Type == typeof (byte))
        bytes[writingIndex++] = (byte) field.Value;
    else
    {
        //Otherwise, use a performant memory copy method
        var source = field.Value as byte[];
        var sourceLength = source.Length;
        Buffer.BlockCopy(source, 0, bytes, writingIndex, sourceLength);
        writingIndex += sourceLength;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T02:44:58.970

有很多方法可以做到这一点，但所有这些方法都需要逐个字段地提取字节。

这是一个：

```
var msg = new MessageFormat();
var arr = new byte[msg.Header.Length + 1 + 1 + msg.Authentication.Length + msg.Flag.Length + msg.Data.Length + msg.Trailer.Length];
using (var stream = new MemoryStream(arr, 0, arr.Length, true))
{
    stream.Write(msg.Header, 0, msg.Header.Length);
    stream.WriteByte(msg.Fragmentation);
    stream.WriteByte(msg.Encryption);
    stream.Write(msg.Authentication, 0, msg.Authentication.Length);
    stream.Write(msg.Flag, 0, msg.Flag.Length);
    stream.Write(msg.Data, 0, msg.Data.Length);
    stream.Write(msg.Trailer, 0, msg.Trailer.Length);
} 
```

您也可以使用`Buffer.BlockCopy`或`Array.Copy`。

# javascript - jQuery AJAX：如何查询返回的 HTML 文档

> ID：14207297
> 
> 赞同：0
> 
> 时间：2013-01-08T02:21:46.427
> 
> 标签：javascript, ajax, jquery

我的问题如下：我已经开始在 jQuery 中使用 $.ajax 函数，我想知道如何处理 HTML 页面的返回。请求完成，我可以 console.log 返回的 HTML 页面，但是我现在想从该页面中选择一个元素。我进行了几次尝试，其中包括：

```
$(data).find('p');

$('button').click(function() {

  $.ajax(funciton() {
  dataType: 'html',.
  url: 'localhost/sw',
  success: function(data) {
      // This is where I would like to select a element or node from the complete
      // returned html document
 });

}); 
```

我知道我可以简单地使用 .load() ，您可以提供选择标准，但 .ajax 是开始的根函数，我也想学习这种方式来处理更复杂的查询。后半部分是我不应该尝试以这种方式选择元素而只提供 json 或单个关键字而不是整个 html 页面吗？感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:24:33.353

只需将返回的 HTML 传递给 jQuery，并将其视为常规 jQuery 集合：

```
$.ajax({
    dataType: 'html',.
    url: 'localhost/sw',
    success: function (html) {
        var paragraphs = $(html).find('p');
        // Manipulate `paragraphs` however you like. For example:
        $(document.body).append( paragraphs );
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:17:32.013

如果您只想获得`objects`.

但是如果你想加载那个元素的内容，你可以改变这个
`var paragraphs = $(html).find('p');`
：
`var paragraphs = $(html).find('p').html();`

希望能帮助到你。

# php - 表格在不应该被替换时被替换

> ID：14207298
> 
> 赞同：1
> 
> 时间：2013-01-08T02:21:52.510
> 
> 标签：php, javascript, html

我有一个您可以在这里访问的应用程序：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/Text96.php)

现在在应用程序中，将模块下拉菜单留给`Please Select`选项并提交。您将看到一条消息显示选择一个模块。所以现在从下拉列表中选择一个模块并提交。您可以看到它`Assessment`在下方显示一个下拉菜单（与该模块相关的评估）。

现在我希望`Assessment`下拉菜单的执行方式与`Module`下拉菜单相同。如果没有选择评估，则在下方显示一条消息，如果选择了评估，则在下方显示下一个表单，`Assessment`下拉菜单和提交仍然像`Module`下拉菜单一样显示，并且提交仍然显示在页面上。

问题是，您将能够看到您是否选择评估选项，而是它被下一个表单块替换（显示多个选择框）。如果用户在提交时没有在下拉菜单中选择评估，我希望不显示选择框，或者如果选择评估，则在评估下拉菜单和提交按钮下方显示它，而不是替换它。

但是是什么导致了这种情况，我可以让它执行它应该做的功能吗？

以下是代码的简化版本：

代码：

```
 <script type="text/javascript">

    function validation(e) {

                    var isDataValid = true;

                    var moduleTextO = document.getElementById("modulesDrop");

                    var errModuleMsgO = document.getElementById("moduleAlert");

             if (moduleTextO.value == ""){
              $('#targetdiv').hide();
              $('#assessmentForm').hide();
              errModuleMsgO.innerHTML = "Please Select a Module";
              isDataValid = false;    
            }else{
                    errModuleMsgO.innerHTML = ""; 
                    $('#assessmentForm').show();
                }

                    if (isDataValid === false)
        {
            if (e.preventDefault)
            {
                e.preventDefault();
                e.stopPropagation();//VERY important
            }
            e.returnValue = false;
            e.cancelBubble = true;
        }

                return isDataValid;

                }

                function sessionvalidation(e) {

                    var isDataValid = true;

                    var sessionTextO = document.getElementById("sessionsDrop");

                    var errAssesMsgO = document.getElementById("assessmentAlert");

             if (sessionTextO.value == ""){
              $('#assessmentdiv').hide();
              $('#studentExistForm').hide();
              errAssesMsgO.innerHTML = "Please Select an Assessment";
              isDataValid = false;    
            }else{
                    errAssesMsgO.innerHTML = ""; 
                    $('#studentExistForm').show();   
                     $('#assessmentForm').show();
                }

                    if (isDataValid === false)
        {
            if (e.preventDefault)
            {
                e.preventDefault();
                e.stopPropagation();//VERY important
            }
            e.returnValue = false;
            e.cancelBubble = true;
        }

                return isDataValid;

                }

                </script>

        <?php

    $moduleHTML  = "";  
    $moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL;
    $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
    $moduleHTML .= '</select>'; 

        ?>

    <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" onsubmit="return validation(event);">
    <table>
    <tr>
    <th>Module: <?php echo $moduleHTML; ?></th>
    </tr>
    </table>
    <p><input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" /></p>
    <div id="moduleAlert"></div>
    <div id="targetdiv"></div>
    </form>

    <?php

    if (isset($_POST['moduleSubmit'])) {    

     $moduleInfo = explode("_", $_POST['modules']);
     $moduleNo = $moduleInfo[0];
     $moduleName = $moduleInfo[1];
     $moduleId = $moduleInfo[2];
     $outputmodule = sprintf("<p><strong>Selected Module:</strong> %s - %s <input type='hidden' value='%s'></p>", $moduleNo, $moduleName, $moduleId);

    $sessionHTML = '';  
    $sessionHTML = '<select name="session" id="sessionsDrop">'.PHP_EOL;
    $sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;           
    $sessionHTML .= sprintf("<option value='%s'>%s - %s - %s</option>", $dbSessionId, $dbSessionName, date("d-m-Y",strtotime($dbSessionDate)), date("H:i",strtotime($dbSessionTime))) . PHP_EOL;            
    $sessionHTML .= '</select>';

    $assessmentform = "<div id='lt-container'>
    <form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post' id='assessmentForm'>
    {$outputmodule}
    <p><strong>Assessments:</strong> {$sessionHTML} </p>  
    <p><input id='assessmentSubmit' type='submit' value='Submit Assessment' name='assessmentSubmit' /></p>
    <div id='assessmentAlert'></div>
    <div id='assessmentdiv'></div> 
    </form>
    </div>";

    echo $assessmentform;

    }

    if (isset($_POST['assessmentSubmit'])) {     

    $studentHTML = '';      
    $studentSELECT = '<select name="studenttextarea" id="studentselect" size="6">'.PHP_EOL;      
    $studentSELECT .= "<option disabled='disabled' class='red' value=''>No Students currently in this Assessment</option>"; 
    $studentSELECT .= sprintf("<option disabled='disabled' value='%s'>%s - %s %s</option>", $dbStudentId, $dbStudentAlias, $dbStudentForename, $dbStudentSurname) . PHP_EOL;    
    $studentSELECT .= '</select>';

    $studentexist="
    <form id='studentExistForm'>
    <p><strong>Current Active Students in Assessment:</strong></p>
    <p>{$studentSELECT}</p>
    </form> 
    </div>";

    echo $studentexist;

    }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:31:18.333

它没有显示第二部分的原因是因为当您单击评估提交表单时，`$_POST['moduleSubmit']`将不会设置。

你可以改变

`if (isset($_POST['moduleSubmit']))`

到

`if (isset($_POST['moduleSubmit']) || isset($_POST['assessmentSubmit']))`

如果设置了任何一个（提交的任何一个表单），它都会显示该部分

# java - Struts 2 Convention Plugin 定义多个父包

> ID：14207301
> 
> 赞同：1
> 
> 时间：2013-01-08T02:22:20.433
> 
> 标签：java, struts2, annotations, struts2-convention-plugin

我正在开发 Struts 2 Web 应用程序，使用 Convention Plugin 通过注释来配置所有内容。我的一些动作类遇到了障碍，我想在其中使用多个父包。我确实在[Apache 的网站](http://struts.apache.org/2.2.1/docs/zero-configuration.html)上找到了一种方法——但这似乎已被弃用。它不起作用，返回类型不匹配：无法转换`String[]`为`String`错误。

```
@ParentPackage({"my-parent-package1, my-parent-package2"})
package com.mycompany.myapp.actions

import org.apache.struts2.config.ParentPackage; 
```

我正在使用 Struts 2.2.1。是否可以通过注释授予多个父包的操作？他们会将此作为一项功能删除，这似乎很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:17:47.230

您不能使用注释来做到这一点，但仍然可以通过 XML 配置来实现。javadoc说

> 此注释允许操作修改它们正在使用的父包。由于 XWork 包是由 Convention 插件通过动作所在的 Java 包创建的，因此对 XWork 父包和 XWork 包的命名空间进行一些棘手的处理以发现动作，因此同一包中的两个动作可以指定不同的父包和没有冲突的命名空间。
> 
> 为了正确处理这个问题，操作所在的 XWork 包的名称使用以下格式构建：
> 
> <java-package>#<parent-xwork-package>#<namespace>

这意味着 java 包中可能有多个父包。但是你不能`@ParentPackage`在同一个类或包上放置两个或多个注解。正如您注意到的那样，父包不能有数组。但是您至少可以有两个父包，一个在包定义中，另一个在动作类中。不幸的是，配置构建器为此注释构建了两个配置，但操作配置仅针对具有注释的配置创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T08:05:50.963

我帮你查`org.apache.struts2.convention.annotation.ParentPackage`了，不允许定义多父包。这是片段：

```
@Target({ElementType.TYPE, ElementType.PACKAGE})
@Retention(value = RetentionPolicy.RUNTIME)
public @interface ParentPackage {
    /**
     * @return  The parent package.
     */
    String value();
} 
```

# java - Java 类与另一个类交互

> ID：14207310
> 
> 赞同：-3
> 
> 时间：2013-01-08T02:23:38.220
> 
> 标签：java, swt

类视图用于用户界面，它包含一个大的白色样式文本。

```
public class View extends ViewPart{
   public static StyledText txtArea;

   public void createPartControl(Composite parent){
   //...

   txtArea = new StyledText(parent, SWT.MULTI | SWT.BORDER | SWT.V_SCROLL);
   txtArea.addText("My first line !");

   new Server("This is my new second line !").start();
   }

   public static void addText(String str){
      txtArea.append(str);
   }
}

class Server extends Thread{
   private String str;

   Server(String str){
      this.str = str;   
   }

   @Override
   public void run(){
      View.addText(str);
   }
} 
```

类服务器不能调用 View.addText()。

如果我引用 txtArea 对象，它会起作用，但我必须调用 addText() 方法。

**编辑：**

线程“Thread-3”org.eclipse.swt.SWTException 中的异常：org.eclipse.swt.SWT.error（SWT.java:4361）处的线程访问无效

在 org.eclipse.swt.SWT.error(SWT.java:4276)

在 org.eclipse.swt.SWT.error(SWT.java:4247)

在 org.eclipse.swt.widgets.Widget.error(Widget.java:468)

在 org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:359)

在 org.eclipse.swt.custom.StyledText.setText(StyledText.java:9885)

在 com.project.udp.views.View.log(View.java:255)

在 com.project.udp.views.Server.run(View.java:294)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:22:01.727

问题是您的 Server 类的代码不在 SWT Display 线程上，因此告诉您的小部件更新是无效的线程访问。

您可能应该执行以下操作：

```
public static void addText(final String str){
  txtArea.getDisplay().asyncExec (new Runnable () {
    public void run () {
       if (!txtArea.isDisposed())
          txtArea.append(str);
    }
  }); 
} 
```

使附加在正确的线程上执行。

有关 SWT 和线程的更多信息，请参阅 eclipse 指南：

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fswt_threading.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fswt_threading.htm)

# javascript - 文本框不应允许使用正则表达式的 html 数据

> ID：14207311
> 
> 赞同：0
> 
> 时间：2013-01-08T02:23:42.783
> 
> 标签：javascript, regex

```
<input type="text" id="NotesReturn" />
<script type="text/javascript">
    $("#NotesReturn").keypress(function (e) {
         kCode = e.keyCode || e.charCode
         var htmlRegExp=new RegExp("/<(\w+)((?:\s+\w+(?:\s*=\s*(??:'[^']*')|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/");
         if (htmlRegExp.test(kCode) || $(this).val().length >= 512)
            e.preventDefault();
    });

    $("#NotesReturn").bind('paste', function(e){
         var pastedValue=this.value+window.clipboardData.getData('Text');
         var trimmedValue=pastedValue.substring(0, 512);
         var htmlRegExp = new RegExp("/<(\w+)((?:\s+\w+(?:\s*=\s*(??:'[^']*')|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/");
         if(!htmlRegExp.test(trimmedValue))
         {
             $(this).val(null);
             $(this).val(trimmedValue.toString());
         }
         e.preventDefault();
    });

</script> 
```

我的文本框不应该允许 html 数据。但它抛出了意外的量词错误。有人可以帮助我。我无法弄清楚错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:57:35.760

意外的量词错误是由于`??`in `(??:`which 可能只是`(?:`表示非捕获组。
正如 Barmer 所说，不应该包括开始和结束的正斜杠，并且圆括号是不平衡的。您需要删除右圆括号或添加另一个左圆括号。
使用 RegExp 构造函数时，您还需要通过在它们前面加上反斜杠来转义反斜杠。
执行上述操作将为您提供有效的正则表达式，但它是否可以正常工作以禁止 html 是另一个问题。

# tidesdk - 潮汐dk 可以与Web Audio API 一起使用吗？

> ID：14207317
> 
> 赞同：0
> 
> 时间：2013-01-08T02:24:12.273
> 
> 标签：tidesdk

如果我构建了一个使用网络音频 api 的网络应用程序，可以使用 titesdk 将其打包并将其转换为桌面应用程序，并且仍然具有“网络音频 API”功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:54:45.493

WebKit 目前正在升级中。一旦完成，就可以完全按照您的意愿去做。当它可用时，我们将宣布它的可用性。

# jquery - 在引导模式窗口中提交表单时创建 fullCalendar 日历事件

> ID：14207318
> 
> 赞同：7
> 
> 时间：2013-01-08T02:24:17.703
> 
> 标签：jquery, jquery-ui, twitter-bootstrap, fullcalendar

我有一个完整的日历实现，并试图在单击日历上的任意位置时创建一个引导模式窗口，然后在模式窗口中“提交”表单时保存日历条目。

```
$(document).ready(function() {
    var calendar = $('#calendar').fullCalendar({
    //header and other values
    select: function(start, end, allDay) {
        var endtime = $.fullCalendar.formatDate(end,'h:mm tt');
    var starttime = $.fullCalendar.formatDate(start,'ddd, MMM d, h:mm tt');
    var mywhen = starttime + ' - ' + endtime;
        $('#createEventModal #when').text(mywhen);
        $('#createEventModal').modal('show');
     },
    //other functions
  }); 
```

这是模态屏幕的 HTML：

```
<div id="createEventModal" class="modal hide" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
        <h3 id="myModalLabel1">Create Appointment</h3>
    </div>
    <div class="modal-body">
    <form id="createAppointmentForm" class="form-horizontal">
        <div class="control-group">
            <label class="control-label" for="inputPatient">Patient:</label>
            <div class="controls">
                <input type="text" name="patientName" id="patientName" tyle="margin: 0 auto;" data-provide="typeahead" data-items="4" data-source="[&quot;Value 1&quot;,&quot;Value 2&quot;,&quot;Value 3&quot;]">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="when">When:</label>
            <div class="controls controls-row" id="when" style="margin-top:5px;">
            </div>
        </div>
    </form>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
        <button type="submit" class="btn btn-primary" id="submitButton">Save</button>
    </div>
</div> 
```

在主 HTML 中调用的另一个 javascript 文件中，我有以下内容：

```
$('#submitButton').on('click', function(e){
    // We don't want this to act as a link so cancel the link action
    e.preventDefault();

    // Find form and submit it
    $('#createAppointmentForm').submit();
  });

$('#createAppointmentForm').on('submit', function(){
    alert("form submitted");
    $("#createEventModal").modal('hide');
    $calendar.fullCalendar('renderEvent',
        {
            title: $('#patientName').val();,
            start: start,
            end: end,
            allDay: allDay
        },
        true
    ); 
```

这是行不通的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T20:14:58.667

您需要保留函数中的`start`,`end`和`allDay`参数`select`。

例如，将它们存储在对话框表单中的隐藏输入中：

```
 <div class="controls">
            <input type="text" name="patientName" id="patientName" tyle="margin: 0 auto;" data-provide="typeahead" data-items="4" data-source="[&quot;Value 1&quot;,&quot;Value 2&quot;,&quot;Value 3&quot;]">
              <input type="hidden" id="apptStartTime"/>
              <input type="hidden" id="apptEndTime"/>
              <input type="hidden" id="apptAllDay" />
        </div> 
```

并在`select`fullcalendar 的功能中设置隐藏字段的值：

```
 select: function(start, end, allDay) {
      endtime = $.fullCalendar.formatDate(end,'h:mm tt');
      starttime = $.fullCalendar.formatDate(start,'ddd, MMM d, h:mm tt');
      var mywhen = starttime + ' - ' + endtime;
      $('#createEventModal #apptStartTime').val(start);
      $('#createEventModal #apptEndTime').val(end);
      $('#createEventModal #apptAllDay').val(allDay);
      $('#createEventModal #when').text(mywhen);
      $('#createEventModal').modal('show');
   } 
```

然后您可以使用以下字段中的值`submit`：

```
function doSubmit(){
    alert("form submitted");
    $("#createEventModal").modal('hide');

    $("#calendar").fullCalendar('renderEvent',
    {
        title: $('#patientName').val(),
        start: new Date($('#apptStartTime').val()),
        end: new Date($('#apptEndTime').val()),
        allDay: ($('#apptAllDay').val() == "true"),
    },
    true);
} 
```

[在这里摆弄一个演示](http://jsfiddle.net/mccannf/AzmJv/16/)。

# mongodb - MonoDb Cshare Samus 使用 Collection.Count (func) 或 shell db.collection.find(condition).count() 非常慢

> ID：14207322
> 
> 赞同：0
> 
> 时间：2013-01-08T02:24:49.510
> 
> 标签：mongodb, count

很抱歉给你一个 MongoDb for Cshare 驱动程序（Samus）的问题，你能帮忙看看吗？

```
 using (Mongo mongo = new Mongo(config.BuildConfiguration()))
        {
            mongo.Connect();
            try
            {
                var db = mongo.GetDatabase("MyCollection");//Collection 's count > 500,000,000
                var collection = db.GetCollection<BasicData>();
                Console.WriteLine("Count by LINQ on typed collection: {0}", collection.Linq().Count(x => x.Id > 1));////error ,timeout     
                Console.WriteLine("Count by not LINQ on typed collection: {0}", collection.Count());  //no condition is ok                   
                Console.ReadKey();
            }
            finally{
                mongo.Disconnect();
            }  } 
```

使用 Mongodb 外壳：

db.collection.find(condition).count() 或 db.collection.count(condition); //非常慢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T02:52:19.253

如果它在 shell 中也很慢，那么它与 C# 驱动程序没有任何关系。

用于[`explain`](http://docs.mongodb.org/manual/reference/explain/)确定您的查询是否正在使用您期望的索引。如果它不使用索引，任何超过 500M 文档的查询都需要一些时间。在外壳中：

```
db.collection.find(condition).explain(); 
```

为了加快查询速度，您可能需要添加一个[索引](http://docs.mongodb.org/manual/indexes/)，其中包含`condition`您正在使用的查询引用的字段。

# mysql - sql更新不起作用

> ID：14207324
> 
> 赞同：0
> 
> 时间：2013-01-08T02:25:13.753
> 
> 标签：mysql, sql, sql-update

这有效

```
SELECT * FROM productinfo a 
WHERE NOT EXISTS(SELECT NULL 
                FROM productinfo_temp b 
                            WHERE a.ProductID = b.ProductID) 
```

但是，它想根据该结果更新 productinfo 表

```
UPDATE a SET Deleted = '1' FROM productinfo a 
    WHERE NOT EXISTS(SELECT NULL 
                    FROM productinfo_temp b 
                                WHERE a.ProductID = b.ProductID) 
```

但它不起作用。更新有什么问题？这是错误

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM productinfo a WHERE NOT EXISTS(SELECT NULL FROM productinfo' at line 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T02:27:25.103

尝试：

```
UPDATE productinfo a SET Deleted = '1'
    WHERE NOT EXISTS(SELECT NULL 
                    FROM productinfo_temp b 
                                WHERE a.ProductID = b.ProductID) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T02:28:13.067

 ~~删除`FROM`子句。

```
UPDATE productinfo a 
SET Deleted = '1'
WHERE NOT EXISTS(SELECT NULL 
                 FROM productinfo_temp b 
                 WHERE a.ProductID = b.ProductID) 
```

 ~~或者简单地使用这个`LEFT JOIN`

```
UPDATE  productinfo a 
        LEFT JOIN productinfo_temp b 
            ON a.ProductID = b.ProductID
SET     a.Deleted = 1
WHERE   b.ProductID IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T02:30:56.710

我也进！

```
UPDATE a SET Deleted = '1'
WHERE NOT EXISTS(SELECT NULL 
FROM productinfo_temp  b
WHERE a.ProductID = b.ProductID) 
```~~~~

# python - 如何使用 reStructuredText / Sphinx 插入空白行

> ID：14207327
> 
> 赞同：31
> 
> 时间：2013-01-08T02:25:32.077
> 
> 标签：python, python-sphinx, restructuredtext

我想使用 ReStructuredText 在标题和图像之间添加一个空白行（或添加更多空白）：

```
====
John 
====

.. image:: _static/john.JPG
   :alt: John
   :height: 300px
   :width: 400px 
```

但我不知道该怎么做？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-10-17T14:11:32.860

如下图使用管道竖线键

```
 ====
   John 
   ====

   |

       .. image:: _static/john.JPG
           :alt: John
           :height: 300px
           :width: 400px 
```

那应该行得通。

# asp.net - HTMLEncode/HTMLDecode 和撇号 ASP.net

> ID：14207328
> 
> 赞同：1
> 
> 时间：2013-01-08T02:25:37.077
> 
> 标签：asp.net, html-encode

我有一个文本框，允许用户输入存储在数据库中的内容，然后是另一个文本框，它从数据库中检索该值并显示它。目前，我有这样的事情：

```
 string text = Server.HTMLDecode(userEnteredText);
 //code to put this text into the database

 Textbox1.Text = Server.HTMLDecode(textFromDatabase); 
```

Server.HTMLDecode 解决了用户输入 ' 字符时遇到的任何问题。

但是，我注意到如果用户在文本框中输入“'”，那么 ASP 会再次给出错误，认为客户端正在输入具有潜在危险的文本。有没有办法解决？我注意到在大多数网站上，这会自动变成撇号。知道如何避免用户输入问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:58:01.950

如果你确定你想要这个，那么在你的`web.config`：

```
<system.web>
    <httpRuntime requestValidationMode="2.0" />
    <pages validateRequest="false" />
</system.web> 
```

# javascript - angularjs - 表单和验证

> ID：14207331
> 
> 赞同：2
> 
> 时间：2013-01-08T02:26:03.633
> 
> 标签：javascript, forms, validation, angularjs

如何防止表单上的自动验证？每次我用表单加载模板时，即使没有输入任何数据，它也会自动验证自己。
我想在提交时触发验证。

HTML：

```
<span ng-show='message.$invalid == true'>This e-mail is black-listed!</span>
    <form novalidate class="dealermessageform" name="message">
        <input type="text" name="messagename" placeholder="Name" class="messagename" ng-model="user.name" required>
        <input type="email" name="messageemail" placeholder="E-Mail Adresse*" class="messageemail" ng-model="user.email" required>
        <textarea class="message" name="message" placeholder="Schreibe eine Nachricht. *" required></textarea>
        <span class="help-block">*alle markierten Felder sind Pflichtfelder</span>
        <div class="grid_4 alpha omega submitbutton">
            <input type="submit" class="submitbutton" value="Senden" id="submit" ng-click="send()">
        </div>
    </form> 
```

仅当提交后某些错误为 TRUE 时，才可能在表单上方显示“span”字段？
当我输入表格时，它也会直接显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:03:58.723

如果验证已经发生，这应该不是问题。您只是不应该显示错误消息。您可以使用[$pristine 或 $dirty](http://docs.angularjs.org/api/ng.directive%3aform.FormController)执行此操作，具体取决于您是否使用`ng-show`or `ng-hide`：

```
<span class="help-block" ng-show="message.$dirty && message.$invalid">*alle markierten Felder sind Pflichtfelder</span> 
```

在您的`send()`函数中，您最好添加`message`为参数。您也可以`ng-submit`在表单标签上使用。

# actionscript-3 - Flex 4.6：在 textInput 上设置 textFormat

> ID：14207333
> 
> 赞同：0
> 
> 时间：2013-01-08T02:26:22.500
> 
> 标签：actionscript-3, apache-flex, adobe, flash-builder, flex4.6

我正在尝试在 textInput 组件上设置 textFormat 。像这样：

```
var testText:TextInput = new TextInput();
testText.text = "TESTING";
addChild(testText);

var tf:TextFormat = new TextFormat();
tf.leftMargin = 50;
tf.size = 20;
tf.color = 0xFF0000;
testText.setStyle("textFormat", tf); 
```

根据[adobe 文档](http://help.adobe.com/en_US/ActionScript/3.0_UsingComponentsAS3/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7f9f.html)（以及网络上的众多示例），这应该是可能的。然而，文本从未应用过它的风格。我尝试过使用 spark 和 MX TextInput（甚至是 TextArea），但结果始终相同。我错过了什么吗？或者这不再是受支持的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T02:50:08.820

注意有3个`TextInput`类。

*   [fl.controls.TextInput](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/TextInput.html) -- 这是来自 Flash Professional，它在 Flex 应用程序中不是很有用。它具有“textFormat”样式（Flex 没有这种样式）。

*   [mx.controls.TextInput](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/TextInput.html) -- 来自 Flex 3 SDK 的旧版 Flex 组件

*   [spark.components.TextInput](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/TextInput.html#styleSummary) -- Flex 4 SDK 中组件的 Spark 版本

最后两个没有“textFormat”样式，所以上面的代码不起作用。

您可以使用 Flex 组件支持的个别样式，而不是尝试使用“textFormat”样式……这些在 Actionscript 中应用有些乏味，但在 MXML 中很容易。我链接到的文档有一个样式部分，您可以在其中查看可应用于文本的样式...

AS3：

```
var t:TextInput = new TextInput();
t.setStyle("fontSize", 18);
t.setStyle("color", 0xFF0000); 
```

MXML：

```
<s:TextInput fontSize="18" color="0xFF0000" /> 
```

# ios - 如何在iOS中检测同时按下主页按钮和锁定按钮？

> ID：14207339
> 
> 赞同：1
> 
> 时间：2013-01-08T02:27:21.587
> 
> 标签：ios

> **可能重复：**
> [通知或检测正在拍摄的屏幕截图？](https://stackoverflow.com/questions/2121970/notification-of-or-detecting-screenshot-being-taken)

目前，我意识到你不能在 iOS 应用程序中同时抓住主页和锁定按钮？如果我的结论是错误的，请指点我如何检测此事件。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:18:44.487

`- (void)applicationWillResignActive:(UIApplication *)application` 当用户截取屏幕截图时，将调用您的应用程序委托方法。如果您想模拟 SnapChat，那么只需在此方法中隐藏您的窗口（请务必取消隐藏`- (void)applicationDidBecomeActive:(UIApplication *)application`）

# objective-c - 如何在子类中使用构造函数类方法？

> ID：14207347
> 
> 赞同：2
> 
> 时间：2013-01-08T02:28:20.000
> 
> 标签：objective-c, class, inheritance, constructor, class-method

> **可能重复：**
> [创建新实例的类方法](https://stackoverflow.com/questions/5987969/class-methods-which-create-new-instances)

我觉得我错过了一些重要的东西。我正在为矩阵代数创建一个矩阵类作为抽象超类，该矩阵中的条目作为其子类具有不同的可能性。我的超类被称为`Matrix`，我的子类被称为`FractionMatrix`，其中的条目是`Fraction`对象。所以我有这个方便的构造函数：

```
+ (Matrix *)matrix { // creates an empty matrix object
    return [[Matrix alloc] init];
} 
```

如果在我的代码中`[FractionMatrix matrix]`，我会得到一个`Matrix`对象而不是一个`FractionMatrix`对象。有什么方法可以编写这个方法，这样我就不需要在子类中重写它——`self`本质上是一个类？

虽然在这个非常简单的情况下，简单地覆盖该方法并不是很多工作，但还有更多实质性的方法，覆盖将代表无意义的代码重复。

# playframework-2.0 - 在 Play 框架中测试模型：initial-data.yaml 验证失败

> ID：14207349
> 
> 赞同：0
> 
> 时间：2013-01-08T02:28:28.830
> 
> 标签：playframework-2.0, yaml

我正在尝试使用 initial-data.yaml 文件在我的 Play 应用程序中设置 JUnit 测试，就像在 Play 中包含的示例 zentasks 应用程序中一样。

我的应用程序有用户，一个用户可以创建一个负载，因此负载与用户是多对一的关联。在我的 Load.java 模型中，我有代码：

```
@ManyToOne
@JoinColumn(name="uid",nullable=false)
public User user; 
```

在 User.java 中：

```
@OneToMany(mappedBy="user")
public Set<Load> loads; 
```

在 app/conf/ 中的 initial-data.yaml 中，我正在尝试像这样设置两个带有用户的负载，以用作测试数据：

用户：

```
- !!models.User
    id:         1
    username:   rachael
    password:   secret
    name:       Rachael P
    email:      email@gmail.com
    userclass:  1

- !!models.User
    id:         2
    username:   wildbill
    password:   secret
    name:       Billy Z
    email:      email2@gmail.com
    userclass:  1

- !!models.User
    id:         3
    username:   sammydude
    password:   secret
    name:       Sammy
    userclass:  0 
```

负载：

```
- !!models.Load
    id:                 1
    user:               !!models.User
                            id: 3
    created:            2013-1-4 10:00:00 -05:00
    modified:           2013-1-5 15:30:00 -05:00
    invoiceNumber:      324
    billOfLadingNumber: 435d
    proNumber:          334mqr86547tr
    status:             PENDING
    rawCharge:          25.00
    totalWeight:        50.00
    numPallets:         1
    units:              box(es)

- !!models.Load
    id:                 2
    user:               !!models.User
                            id: 2
    created:            2013-1-4 10:00:00 -05:00
    modified:           2013-1-5 15:30:00 -05:00
    invoiceNumber:      328
    billOfLadingNumber: 97re
    proNumber:          43y43j5yh4
    status:             PENDING
    rawCharge:          60.00
    totalWeight:        400.00
    numPallets:         1
    units:              box(es) 
```

在 app/Global.java 中，这些行`Ebean.save(all.get("users"));`和`Ebean.save(all.get("loads"));`编译没有错误，但我`validation failed for: models.User`在以下行中收到错误：

```
 for(Object load : all.get("loads")) {
        // Insert load/user relation
        Ebean.saveAssociation(load, "user");
    } 
```

任何人都可以发现错误吗？我一遍又一遍的代码，但据我所知，我正在使用正确的方法来保存关联。我想不出另一个原因，为什么它会分别保存用户和负载没有问题，但在保存关联时出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:26:10.347

我不知道它是否会有所帮助，但不要`User`用作表名，因为它是许多数据库服务器中的关键字：

```
@Entity
@Table(name = "myUserTable")
public class User extends Model {
...
} 
```

在您的映射中相应地更改它。

# java - 在方法中调用方法？在这种情况下如何工作？（爪哇）

> ID：14207350
> 
> 赞同：0
> 
> 时间：2013-01-08T02:28:37.670
> 
> 标签：java, sorting, methods, mergesort

这是一个使用归并排序的程序 - 从 1 到 1000 对 1000 个数字的列表进行排序。它显示原始列表，然后调用递归方法对其进行排序，然后显示它。

我在代码中不明白的是这两行：

> MergeSort（数字，低，中）；// 在方法中它会说“这里”
> 
> MergeSort（数字，中间+1，高）；

我是java的初学者，这与我学到的一切背道而驰，因为我无法理解如何在方法中调用方法。除非它是我怀疑的对象。**有人可以解释一下这两行代码的作用吗？**

```
import java.io.*;
import java.util.*;
import java.text.*;

public class MergeSortExample
{
    static final int Max = 1000;

    static void MergeSort (int[] numbers, int lo, int n) // recursive method
    {

        int low = lo; // 0
        int high = n; // 999

        if (low >= high) // return case;
        {
            return;
        }

        int middle = (low + high) / 2;
        MergeSort (numbers, low, middle); // HERE
        MergeSort (numbers, middle + 1, high); // HERE

        int end_low = middle;
        int start_high = middle + 1;

        while ((lo <= end_low) && (start_high <= high))
        {
            if (numbers [low] < numbers [start_high])
            {
                low++;
            }
            else
            {
                int Temp = numbers [start_high];

                for (int k = start_high - 1 ; k >= low ; k--)
                {
                    numbers [k + 1] = numbers [k];
                }
                numbers [low] = Temp;
                low++;
                end_low++;
                start_high++;
            }
        }

    }

    public static void main (String str[]) throws IOException
    {
        BufferedReader stdin = new BufferedReader (new InputStreamReader (System.in));
        DecimalFormat df = new DecimalFormat ("#");
        BufferedReader reader = new BufferedReader (new FileReader ("unsorted.txt"));
        //BufferedWriter writer = new BufferedWriter (new FileWriter ("test.txt", true)); // text to write

        int[] numbers = new int [Max];  // if its int the 0's in the beginiing would be cut off
        String line = null;
        int[] count = {0};

        int low = 0;
        int high = count [0] - 1;

        while ((line = reader.readLine ()) != null)
        {
            numbers [count [0]] = Integer.parseInt (line);
            System.out.println (numbers [count [0]]);

            count [0]++;
        }
        reader.close ();
        System.out.println ();
        System.out.println ("There are " + count [0] + " numbers.");
        System.out.println ();

        ///////////////////////////////////////////////////////////////////////////////

        MergeSort (numbers, 0, count [0] - 1);

        for (int i = 0 ; i < count [0] ; i++)
        {
            System.out.println (numbers [i]);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:33:46.657

It's basic recursion. A merge sort works by splitting the list into two parts, merge sorting each one, and then merging the two lists together. The part you are asking about is the part that merge sorts each of the two parts.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T02:33:51.847

It is a recursive call of static method `MergeSort()`. Bad convention is used here. Names of methods should start with a lower case

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T02:31:46.733

Of course a method may invoke another method. The only confusing part here is that this method is **static**, which means it is invoked on a *class* instead of an *object*. Since it is called inside of the class it is defined in, you do not need to write `MergeSortExample.MergeSort()`. If you want to understand the differences between static and instance methods and fields, I suggest you look at the [tutorials](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html) on the Java website.

# android - 翻车机器人

> ID：14207354
> 
> 赞同：1
> 
> 时间：2013-01-08T02:29:01.973
> 
> 标签：android, rollover

我想用android翻车。我看到有必要编写如下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/verde" />
    <item android:drawable="@drawable/rojo" />    
</selector> 
```

我用名称 button.xml 保存它。我不知道它保存在哪个文件夹中。

然后我尝试在我的 layout.xml 中使用该引用我从我的 layout.xml 中更改了我的按钮的背景属性 `android:background="@drawable/red"` 并使用 `android:background="@drawable/button"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:49:19.557

如果它适用于所有屏幕尺寸/设备，则保存`button.xml`在文件夹中，否则将其放入具有适当限定符后缀（例如，等）的文件夹中。`res/drawable``drawable-hdpi``drawable-ldpi`

请参阅[此处](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)(http://developer.android.com) 获取完整示例，以及您可以包含的其他状态的说明。

# ruby-on-rails - 如何使用 Rails 从 S3 或 Cloudfront 向用户发送 HTML 文件？

> ID：14207364
> 
> 赞同：0
> 
> 时间：2013-01-08T02:31:13.583
> 
> 标签：ruby-on-rails, ruby, amazon-s3, amazon-cloudfront

我想简单地将用户重新路由到一个页面（比如 bucket.amazons3.com/hello.html），同时仍然让它看起来好像他们在 DOMAIN.COM/hello.html 上......我想这样做说如果某个 IF 条件通过..

例如：

```
if (RAILS == "cool") && (S3.exists?("hello.html"))
 send_to_s3
end 
```

其中“send_to_s3”只是将用户重定向到 Amazon Cloudfront 或 S3 并在他们的浏览器中呈现“hello.html”页面。但他们觉得他们从未离开过我的网站。

现在想象一下，我想对 Hello1.html、Hello2.html、Hello3.html 做同样的行为...... Hello20Million.html......

如何在不显着增加服务器负载的情况下有效地做到这一点？

我将如何在 Thin/Puma/Webrick 等服务器上运行的 RAILS 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T02:44:21.227

有两种方法可以做到这一点：

1.  在您的视图中使用指向 S3 URL 的 iframe。
2.  向亚马逊 URL 发出服务器端请求，并将响应呈现为您的 Rails 视图之一。

第一个选项非常简单。如果您的条件得到满足，您将打开一个具有嵌入式 iframe 的 rails 视图，其`src`属性指向 S3 URL。您将不得不在 JS 中动态处理 iframe 尺寸（宽度 x 高度），以便为用户提供无缝体验（窗口调整大小等）。

在第二个选项中，您实际上可以使用 ruby​​ 请求 S3 URL `open-uri`，然后将您获得的响应呈现到您自己的视图中。要请求文件 URL，请使用以下代码：

```
require 'open-uri'
url_response = open('http://example.com/file_to_read.htm').read 
```

在您看来，您需要渲染`url_response`：

```
<%= url_response.html_safe %> 
```

使用`html_safe`你告诉rails你想输出字符串，没有任何编码，以使其安全。

使用这些选项中的任何一个都会使请求*看起来*好像来自您的服务器。

PS：我还想知道也可以通过 URL 重写或代理传递使用`.htaccess`或类似方法来做到这一点，但在您的问题中，您特别询问了“Rails”。

# html - 用户活动关注

> ID：14207369
> 
> 赞同：0
> 
> 时间：2013-01-08T02:31:56.493
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3

我有一个活动模型

```
id | activity_model | activity_type | user_id | activity_id | created_at | updated_at|
1  | Article        | Created       | 1       |   25        | a time     |  a time   |
2  | Headline Story | Created       | 1       |   26        | a time     |  a time   | 
```

**activity_model 是一个字符串

现在假设我的控制器有（实际上更干净，因为模型中的第二部分）：

```
@user_activity = Activity.where(user_id: 1).all 
```

我希望我的观点是这样的：

```
 - @user_activity.each do |activity|
        - if activity_model == "Article"
          = link_to Article.find(activity.activity_id).name, activity
        elsif activity_model == "Headline Story"
          = link_to HeadlineStory.find(activity.activity_id).name, activity
        = activity.activity_type
        = "#{time_ago_in_words(activity.created_at)} ago" 
```

我专注于上面块的 if 语句部分。

我的问题是。当我遍历这些不同的模型类型时，如何让我的 link_to 变得干净？我在视图中使用 find ，那是不对的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:53:35.293

如果您想遍历`Activity`对象并同时查找`Article`对象，您可以通过以下几种方式执行此操作：

*   在控制器中填充哈希表并在视图中使用它。
*   创建您在控制器中填充的*视图模型*并使用它来呈现您的视图。
*   创建一个可以在视图中使用的辅助函数。

第一个和最后一个选项是最快实施的。

# php - 如何在 PHP 的 DateTime 中启用对闰秒的完整 UTC 支持？

> ID：14207371
> 
> 赞同：5
> 
> 时间：2013-01-08T02:32:13.033
> 
> 标签：php, datetime, leap-second

我想用[Leap Seconds](http://en.wikipedia.org/wiki/Leap_second)`DateTime`做一些计算，但它很早就停止了，因为我不知道我的意思：`DateTime`

```
### June 30, 2012 at 23:59:60 UTC ###

$leap = new DateTime('2012-06-30T23:59:60UTC');
var_export($leap); 
```

输出：

```
DateTime::__set_state(array(
   'date' => '2012-07-01 00:00:00',
   'timezone_type' => 3,
   'timezone' => 'UTC',
)) 
```

我无法为`DateTime`去年的 UTC 闰秒创建一个（也不是我尝试过的其他闰秒）。我想知道是否[`DateTime`](http://php.net/DateTime)支持闰秒，我*认为*它支持UTC，但可能不支持闰秒，所以只支持GMT？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T03:53:48.917

UNIX 时间不知道闰秒。就它而言，每一天正好由 86,400 秒组成，而时间只是偶尔跳过或重复一秒。（这在很大程度上是必要的，因为闰秒没有完全提前安排。如果闰秒在 UNIX 时间中计算，则 UNIX 时间和人类可读日期/时间之间的“映射”将随着闰秒的宣布而发生不可预测的变化.)

由于它的日期/时间原语都是基于 UNIX 时间，PHP 也不能轻易地表示闰秒。它们实际上是不可见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T03:30:19.767

这不是一个完整的答案，但至少它是一些东西。

这里有两个可能的问题：

1.  正如 ircmaxell 所提到的，PHP 可能会在时区操作位内的某个地方吃掉闰秒，但还需要更多的研究。
2.  但是我个人希望 PHP 将秒的“溢出”“修复”到几分钟。构造`DateTime`函数将给定的参数传递给与处理相同的代码，[`strtotime`](http://php.net/strtotime)众所周知，这会采用完全虚假的日期（例如 2 月 31 日）并将它们转换为某种可能有意义的东西。

文档中对闰秒的唯一参考是[`strptime`](http://php.net/strptime)：

> **“tm_sec”**包括任何闰秒（目前每年最多 2 个）。

例如，从 PHP 交互提示中缩写：

```
php > $eviler_format = '%Y-%m-%d %H:%M:%S %z';
php > $evil = '2012-12-31 23:59:59 +0000';
php > var_dump(strptime($evil, $eviler_format));
array(9) {
  'tm_sec' =>
  int(59) // ...
}
php > $evil = '2012-12-31 23:59:60 +0000';
php > var_dump(strptime($evil, $eviler_format));
array(9) {
  'tm_sec' =>
  int(60) // ...
}
php > $evil = '2012-12-31 23:59:61 +0000';
php > var_dump(strptime($evil, $eviler_format));
array(9) {
  'tm_sec' =>
  int(61) // ...
}
php > $evil = '2012-12-31 23:59:62 +0000';
php > var_dump(strptime($evil, $eviler_format));
bool(false) 
```

不幸的是，它还需要在 12 月 31 日*没有的“闰秒”：*

```
php > $evil = '2012-01-07 23:59:61 +0000';
php > var_dump(strptime($evil, $eviler_format));
array(9) {
  'tm_sec' =>
  int(61)
  'tm_min' =>
  int(59)
  'tm_hour' =>
  int(23)
  'tm_mday' =>
  int(7)
  'tm_mon' =>
  int(0)
  'tm_year' =>
  int(112)
  'tm_wday' =>
  int(6)
  'tm_yday' =>
  int(6)
  'unparsed' =>
  string(0) ""
} 
```

或者不在午夜：

```
php > $evil = '2012-01-07 08:59:61 +0000';
php > var_dump(strptime($evil, $eviler_format));
array(9) {
  'tm_sec' =>
  int(61)
  'tm_min' =>
  int(59)
  'tm_hour' =>
  int(8)
  'tm_mday' =>
  int(7)
  'tm_mon' =>
  int(0)
  'tm_year' =>
  int(112)
  'tm_wday' =>
  int(6)
  'tm_yday' =>
  int(6)
  'unparsed' =>
  string(0) ""
} 
```

`DateTime`此外，它完全是一个没有以任何方式附加的表示功能。鉴于事物的明确性质，您无法对其进行数学运算，并且在现实生活中不可能从中获得*真正的闰秒。*在这里没用。

结论：PHP 没有考虑闰秒。确保您的服务器与*确实*关心它的上游 NTP 服务器同步，您最终会没事的。如果您需要关心闰秒的秒级精度，那么 PHP 可能对您来说是错误的语言。

# android - 查询数据库中的多个字段

> ID：14207374
> 
> 赞同：0
> 
> 时间：2013-01-08T02:33:28.623
> 
> 标签：android, sqlite

例如，我有这张表：

![在此处输入图像描述](../Images/85f93793ae6f2141d6d9961712cbd7ee.png)

我正在使用以下方法从该表中查询：

```
public ArrayList<ArrayList<String>> getAllViandCategory() {
        ArrayList<ArrayList<String>> data2 = new ArrayList<ArrayList<String>>();
        ArrayList<String> data = new ArrayList<String>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + "tbl_viand_category";

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        if (cursor.moveToFirst()) {
            do {
                data.add(cursor.getString(0));
                data.add(cursor.getString(1));
                data2.add(data);
            } while (cursor.moveToNext());

        }
        return data2;
    } 
```

我没有得到想要的输出。我得到这个：`[1,Fish,2,Vegetables,3,Meat,4,Rice,5,Etc]`而不是`[[1,Fish],[2,Vegetables],[3,Meat],[4,Rice],[5,Etc]]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:51:53.163

你所拥有的是一个列表列表。外部列表具有具有列表的对象。

```
// Code to add a list object into outer list.
data2.add(data); 
```

您会注意到您只创建了一次数据对象。所以基本上相同的对象一次又一次地插入到data2中。

您需要为每次迭代创建一个新的数据对象。

```
// New Code
if (cursor.moveToFirst()) {
        do {
            data = new ArrayList<String>();
            data.add(cursor.getString(0));
            data.add(cursor.getString(1));
            data2.add(data);
        } while (cursor.moveToNext());

    } 
```

希望有帮助：D

# javascript - jquery touchwipe 如何获取 $(this)

> ID：14207375
> 
> 赞同：1
> 
> 时间：2013-01-08T02:33:44.623
> 
> 标签：javascript, jquery, web-applications, mobile, touch

我在滚动列表上使用 jquery touchwipe 插件，但无法
从 $(this) 获取属性。我想使用 $(this) 获取其子元素 elment class="t7 edit" 并添加类“show”到它。有谁知道如何解决它？

html:

```
 <div id="main_list_wrapper">
                    <div class="item">
                        <div class="t7 edit"></div>
                        <div class="t8 cancel"></div>
                    </div>
                    <div class="item">
                        <div class="t7 edit"></div>
                        <div class="t8 cancel"></div>
                    </div>
                    <div class="item">
                        <div class="t7 edit"></div>
                        <div class="t8 cancel"></div>
                    </div>
                    <div class="item">
                        <div class="t7 edit"></div>
                        <div class="t8 cancel"></div>
                    </div>
                    <div class="item">
                        <div class="t7 edit"></div>
                        <div class="t8 cancel"></div>
                    </div>
                </div> 
```

脚本代码：

```
var $main_list_wrapper = $("#main_list_wrapper").find('.item');

$main_list_wrapper.touchwipe({
    preventDefaultEvents: false,
    wipeLeft: function() { 
        $(this).find('.t8.cancel').removeClass('show');
        $(this).find('.t7.edit').removeClass('show');
        var thisclass = $(this).attr('class');
        alert(thisclass);
        return false;
    },
    wipeRight: function() { 
        $sb(this).find('.t8.cancel').addClass('show');
        $sb(this).find('.t7.edit').addClass('show');
        return false;
    }
}); 
```

像警报（这个类）。它显示“未定义”。

* * *

谢谢大家。我的朋友给我写了这个，它工作！

```
$main_list_wrapper.each(function () {
    var $this = $sb(this);

    $this.touchwipe({
        preventDefaultEvents: false,
        wipeLeft: function() { 
            var $pcs = $this;
            $pcs.find('.t8').removeClass('show');
            $pcs.find('.t7').removeClass('show');
            return false;
        },
        wipeRight: function() { 
            var $pcs = $this;
            $pcs.find('.t8').addClass('show');
            $pcs.find('.t7').addClass('show');
            return false;
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:06:29.813

嗯，`$("#main_list_wrapper")`是`NULL`。确保这段代码位于您的 JQuery onLoad 中：`$(document).ready(function () { /* CODE */ });`

`find()`采用逗号分隔的类名列表。
更改：`$(this).find('.t8.cancel')`对此：`$(this).find('.t8, .cancel')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:08:43.020

`$(this)`指的是`function()`属于的对象，而不是指您的`$main_list_wrapper`.

参考这篇[文章](https://stackoverflow.com/a/4700899/1953933)

你可以`$main_list_wrapper.find('.t8.cancel').removeClass('show');`改用。

# javascript - Backbone.js 集合获取，无法检索项目

> ID：14207378
> 
> 赞同：0
> 
> 时间：2013-01-08T02:33:57.170
> 
> 标签：javascript, rest, backbone.js, fetch, backbone.js-collections

我是 Backbone.js 的新手，我正在学习一个教程，试图使其适应我的需求。
我正在从主应用程序视图调用 fetch 方法，以便检索要插入集合中的多个对象。我可以在 chrome 中看到返回了 json 数据，提取函数返回成功，但未填充集合。

我正在使用 IcanHaz 进行渲染。它只打印出我在 Job 模型中定义的默认模型。

```
 var Job = Backbone.Model.extend({
   defaults: {
        title: 'Not specified',
        status: 0,
        created_at: 'Not specified'
    }
 });

var JobView = Backbone.View.extend({
   render: function () {
        // template with ICanHaz.js (ich)
        this.el = ich.jobRowTpl(this.model.toJSON());
        return this;
    }
});

// define the collection of jobs
var JobCollection = Backbone.Collection.extend({
    model: Job,
    url: '/api/1.0/jobs/'
});

// main app, the collection view
var AppView = Backbone.View.extend({
    tagName: 'tbody', 

    initialize: function() {
        this.jobs = new JobCollection();
        this.jobs.on('all', this.render, this);
        this.jobs.fetch({
                           error: function () {
                             console.log("error!!"); 
                           },
                           success: function () {
                              console.log("no error"); 
                           }
                        }).complete(function () {
                            console.log('done');
                            console.log('length1:' +  this.jobs.length);
                        });
       console.log('length2: '+ this.jobs.length);
    },

    render: function () {
        this.jobs.each(function (job) {
            var tmpjob = new JobView({model: job}).render().el;
            $(this.el).append(tmpjob);
            console.log('job': + this.tmpjob);
        }, this);

        return this;
    }

});

var app = new AppView();
$('#app').append(app.render().el); 
```

在 Chrome 控制台中，我得到了这个：

```
length2:0
job:undefined 
no error 
done 
Uncaught TypeError: Cannot read property 'length' of undefined //referring to the lenght1 logging 
```

这些是我从 network/xhr/response 下的 chrome 检查器获取的数据：

```
{"count": 2, "next": null, "previous": null, "results": [{"id": 1, "title": "testAlbum", "status": 0, "created_at": "2012-12-31"}, {"id": 2, "title": "testAlbum2", "status": 0, "created_at": "2012-12-31"}]} 
```

我不明白为什么在调用 fetch 方法后存在 'jobs' 集合，但是当调用 'success' 助手时，它在 fetch 块内未定义。

为什么集合没有被填充，尽管它返回成功并且 json 数据是从服务器返回的？

我很迷茫。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T02:48:20.007

`parse`向您的集合添加一个仅返回`results`数组的方法。一个集合需要是一个模型数组，而不是你的整个 JSON 响应。

[Backbone 文档](http://backbonejs.org/#Collection-parse)解释了如何使用`parse`.

# android - Android ListView 动画奇怪的行为

> ID：14207379
> 
> 赞同：1
> 
> 时间：2013-01-08T02:34:07.650
> 
> 标签：android, android-listview, android-animation

我想在我的列表视图上为 onFling 事件设置动画。

动画效果很好，但在错误的行。

例如：

1.  ListView 只有一项，动画按预期工作。
2.  ListView 有两个项目：手势是在第一个项目上进行的，第二个项目是动画的，反之亦然。
3.  ListView 包含三个项目：在第一个项目上做出手势，最后一个是动画的，在第二个项目上，第二个项目是动画的（如预期的那样），在最后一个项目上，第一个项目是动画的。

**代码：**

```
@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {
    int position = listView.pointToPosition(Math.round(e1.getX()),
            Math.round(e1.getY()));
    View row = listView.getChildAt(position);
    TranslateAnimation anim = null;
    if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH || row == null)
        return true;
    if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
            && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
        anim = new TranslateAnimation(Animation.RELATIVE_TO_SELF,1,Animation.RELATIVE_TO_SELF, 0,
                Animation.RELATIVE_TO_SELF,0,Animation.RELATIVE_TO_SELF,0);
        this.handleSwipe.onHandleSwipeLeft(position);
    } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE
            && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
        anim = new TranslateAnimation(Animation.RELATIVE_TO_SELF,-1,Animation.RELATIVE_TO_SELF, 0,
                Animation.RELATIVE_TO_SELF,0,Animation.RELATIVE_TO_SELF,0);
        this.handleSwipe.onHandleSwipeRight(position);
    }else{
        return true;
    }

    anim.setDuration(500);
    row.startAnimation(anim);
    return true;
} 
```

**OBS：**

已经调试好了，位置和行总是对的。

我正在使用 api 级别 7。

该代码在 android 4.2 上运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:45:32.633

Guilherme，可能是代码：

```
 int position = listView.pointToPosition(Math.round(e1.getX()),
        Math.round(e1.getY())); 
```

没有返回行 id 3。你能确认一下吗？

# javascript - Google Closure Compiler：如何保留缓存 “this”的代码？

> ID：14207380
> 
> 赞同：3
> 
> 时间：2013-01-08T02:34:13.193
> 
> 标签：javascript, this, google-closure-compiler

# 介绍

我经常使用 Google Closure Compiler 来压缩我的 JavaScript 文件。现在，它似乎很好地压缩了我的代码。

现在，我尝试养成将`this`对象存储在局部变量中的习惯，因为`this`不能混淆，但局部变量肯定可以混淆。但是，Google Closure Compiler 无法识别这一点，而是删除了局部变量的所有实例，将其替换为`this`.

### 关于优化...

我很清楚在编写代码时应该避免预先优化。但是，我觉得缓存`this`是可以接受的，因为这样做可以提供清晰性（因为`this`可以有很多上下文，并且用另一个名称引用它会减少歧义）。

# 例子

下面的代码非常基本，我知道它可能写得不好。但是，代码将准确地展示我面临的问题。

这是压缩前的原始源文件：

```
(function() {
  var that = this;
  that.a = 3;
  that.b = 4;
  this.c = 5;
  return that;
}()); 
```

现在这里是压缩的源文件。请注意，`this`to的分配`that`已被删除。

```
(function(){this.a=3;this.b=4;this.c=5;return this})(); 
```

理想情况下，我希望分配以`that`某种形式保留，可能类似于以下内容：

```
(function(){var t=this;t.a=3;t.b=4;t.c=5;return t})(); 
```

现在，上面的代码几乎没有节省任何字节，但是当使用更大的脚本时（就像我经常做的那样），节省的钱肯定会加起来。

# 问题

简而言之，如何防止 Closure Compiler 删除`that`上述脚本中的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:21:34.473

您正试图超越编译器。这是一场失败的战斗。然而，这是人们尝试做这类事情的两个主要原因。

1.  减少代码的大小。理论是单个字母变量小于关键字`this`。然而，这个理论在大多数情况下是有缺陷的。请参阅[编译器常见问题解答](https://code.google.com/p/closure-compiler/wiki/FAQ#Closure_Compiler_inlined_all_my_strings,_which_made_my_code_size)。

2.  防止关键字的上下文`this`发生变化。但是，在 SIMPLE_OPTIMIZATIONS 中这是不必要的。如果创建引用变量的内部闭包，编译器将不会内联该值。在 ADVANCED_OPTIMIZATIONS 下，在`this`原型函数或构造函数之外使用关键字可能很危险，应该小心操作。请参阅[解释原因的文章](http://closuretools.blogspot.com/)。

如果你真的想阻止编译器内联你的值，你需要使用带引号的语法将它添加为对象的属性：

```
(function() {
  var config = {};
  config['that'] = this;
})() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T05:18:13.670

我想如果你真的必须这样做，你可以这样做：

```
(function() {
  var that = this || 1;
  that.a = 3;
  that.b = 4;
  this.c = 5;
  return that;
}()); 
```

# android - XML相对布局顺序更改崩溃程序（Android）

> ID：14207382
> 
> 赞同：2
> 
> 时间：2013-01-08T02:34:40.573
> 
> 标签：android, eclipse, android-relativelayout

我想将 ImageView 移动到布局的顶部，以便它位于其他对象的后面。当我这样做时，它会崩溃。这有效，程序编译并运行：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Nim" >

    <TextView
        android:id="@+id/tvTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/tvTitle"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/tvInfo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvTitle"
        android:layout_centerHorizontal="true"
        android:text="@string/tvInfo"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <SeekBar
        android:id="@+id/sbMarbles"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/tvInfo" />

    <Button
        android:id="@+id/butMarbles"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="@string/butMarbles" />

    <EditText
        android:id="@+id/tvMarbles"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toLeftOf="@+id/butMarbles"
        android:layout_toRightOf="@+id/sbMarbles"
        android:ems="10"
        android:inputType="number" />

    <TextView
        android:id="@+id/tvInfo2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvInfo"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:text="@string/tvInfo"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Button
        android:id="@+id/butYes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvInfo2"
        android:layout_marginTop="83dp"
        android:layout_toLeftOf="@+id/tvTitle"
        android:text="@string/butYes" />

    <Button
        android:id="@+id/butNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/butYes"
        android:layout_alignBottom="@+id/butYes"
        android:layout_toRightOf="@+id/tvInfo2"
        android:text="@string/butNo" />

    <ImageView
        android:id="@+id/bg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:src="@drawable/marbles" />

</RelativeLayout> 
```

但是当我将 ImageView 移动到布局的顶部时，程序崩溃了，我不知道为什么！这是使程序与 LogCat 一起崩溃的小改动：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Nim" >

    <ImageView
        android:id="@+id/bg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:src="@drawable/marbles" />

    <TextView
        android:id="@+id/tvTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/tvTitle"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/tvInfo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvTitle"
        android:layout_centerHorizontal="true"
        android:text="@string/tvInfo"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <SeekBar
        android:id="@+id/sbMarbles"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/tvInfo" />

    <Button
        android:id="@+id/butMarbles"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="@string/butMarbles" />

    <EditText
        android:id="@+id/tvMarbles"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toLeftOf="@+id/butMarbles"
        android:layout_toRightOf="@+id/sbMarbles"
        android:ems="10"
        android:inputType="number" />

    <TextView
        android:id="@+id/tvInfo2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvInfo"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:text="@string/tvInfo"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Button
        android:id="@+id/butYes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvInfo2"
        android:layout_marginTop="83dp"
        android:layout_toLeftOf="@+id/tvTitle"
        android:text="@string/butYes" />

    <Button
        android:id="@+id/butNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/butYes"
        android:layout_alignBottom="@+id/butYes"
        android:layout_toRightOf="@+id/tvInfo2"
        android:text="@string/butNo" />

</RelativeLayout> 
```

* * *

```
01-07 21:00:00.453: E/AndroidRuntime(568): FATAL EXCEPTION: main
01-07 21:00:00.453: E/AndroidRuntime(568): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.evorlor.gameofnim/com.evorlor.gameofnim.Nim}: java.lang.ClassCastException: android.widget.TextView
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.os.Looper.loop(Looper.java:123)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-07 21:00:00.453: E/AndroidRuntime(568):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 21:00:00.453: E/AndroidRuntime(568):  at java.lang.reflect.Method.invoke(Method.java:507)
01-07 21:00:00.453: E/AndroidRuntime(568):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-07 21:00:00.453: E/AndroidRuntime(568):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-07 21:00:00.453: E/AndroidRuntime(568):  at dalvik.system.NativeStart.main(Native Method)
01-07 21:00:00.453: E/AndroidRuntime(568): Caused by: java.lang.ClassCastException: android.widget.TextView
01-07 21:00:00.453: E/AndroidRuntime(568):  at com.evorlor.gameofnim.Nim.listener(Nim.java:56)
01-07 21:00:00.453: E/AndroidRuntime(568):  at com.evorlor.gameofnim.Nim.onCreate(Nim.java:41)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-07 21:00:00.453: E/AndroidRuntime(568):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-07 21:00:00.453: E/AndroidRuntime(568):  ... 11 more
01-07 21:18:20.403: E/AndroidRuntime(704): FATAL EXCEPTION: main
01-07 21:18:20.403: E/AndroidRuntime(704): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.evorlor.gameofnim/com.evorlor.gameofnim.Opening}: java.lang.NullPointerException
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.os.Looper.loop(Looper.java:123)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-07 21:18:20.403: E/AndroidRuntime(704):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 21:18:20.403: E/AndroidRuntime(704):  at java.lang.reflect.Method.invoke(Method.java:507)
01-07 21:18:20.403: E/AndroidRuntime(704):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-07 21:18:20.403: E/AndroidRuntime(704):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-07 21:18:20.403: E/AndroidRuntime(704):  at dalvik.system.NativeStart.main(Native Method)
01-07 21:18:20.403: E/AndroidRuntime(704): Caused by: java.lang.NullPointerException
01-07 21:18:20.403: E/AndroidRuntime(704):  at com.evorlor.gameofnim.Opening.listener(Opening.java:36)
01-07 21:18:20.403: E/AndroidRuntime(704):  at com.evorlor.gameofnim.Opening.onCreate(Opening.java:28)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-07 21:18:20.403: E/AndroidRuntime(704):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-07 21:18:20.403: E/AndroidRuntime(704):  ... 11 more
01-07 21:19:32.743: E/AndroidRuntime(737): FATAL EXCEPTION: main
01-07 21:19:32.743: E/AndroidRuntime(737): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.evorlor.gameofnim/com.evorlor.gameofnim.Opening}: java.lang.NullPointerException
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.os.Looper.loop(Looper.java:123)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-07 21:19:32.743: E/AndroidRuntime(737):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 21:19:32.743: E/AndroidRuntime(737):  at java.lang.reflect.Method.invoke(Method.java:507)
01-07 21:19:32.743: E/AndroidRuntime(737):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-07 21:19:32.743: E/AndroidRuntime(737):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-07 21:19:32.743: E/AndroidRuntime(737):  at dalvik.system.NativeStart.main(Native Method)
01-07 21:19:32.743: E/AndroidRuntime(737): Caused by: java.lang.NullPointerException
01-07 21:19:32.743: E/AndroidRuntime(737):  at com.evorlor.gameofnim.Opening.listener(Opening.java:36)
01-07 21:19:32.743: E/AndroidRuntime(737):  at com.evorlor.gameofnim.Opening.onCreate(Opening.java:28)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-07 21:19:32.743: E/AndroidRuntime(737):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-07 21:19:32.743: E/AndroidRuntime(737):  ... 11 more
01-07 21:23:52.323: E/AndroidRuntime(747): FATAL EXCEPTION: main
01-07 21:23:52.323: E/AndroidRuntime(747): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.evorlor.gameofnim/com.evorlor.gameofnim.Opening}: java.lang.NullPointerException
01-07 21:23:52.323: E/AndroidRuntime(747):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-07 21:23:52.323: E/AndroidRuntime(747):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-07 21:23:52.323: E/AndroidRuntime(747):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-07 21:23:52.323: E/AndroidRuntime(747):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-07 21:23:52.323: E/AndroidRuntime(747):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 21:23:52.323: E/AndroidRuntime(747):  at android.os.Looper.loop(Looper.java:123)
01-07 21:23:52.323: E/AndroidRuntime(747):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-07 21:23:52.323: E/AndroidRuntime(747):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 21:23:52.323: E/AndroidRuntime(747):  at java.lang.reflect.Method.invoke(Method.java:507)
01-07 21:23:52.323: E/AndroidRuntime(747):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-07 21:23:52.323: E/AndroidRuntime(747):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-07 21:23:52.323: E/AndroidRuntime(747):  at dalvik.system.NativeStart.main(Native Method)
01-07 21:23:52.323: E/AndroidRuntime(747): Caused by: java.lang.NullPointerException
01-07 21:23:52.323: E/AndroidRuntime(747):  at com.evorlor.gameofnim.Opening.listener(Opening.java:36)
01-07 21:23:52.323: E/AndroidRuntime(747):  at com.evorlor.gameofnim.Opening.onCreate(Opening.java:28)
01-07 21:23:52.323: E/AndroidRuntime(747):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-07 21:23:52.323: E/AndroidRuntime(747):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-07 21:23:52.323: E/AndroidRuntime(747):  ... 11 more
01-07 21:33:28.122: E/AndroidRuntime(813): FATAL EXCEPTION: main
01-07 21:33:28.122: E/AndroidRuntime(813): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.evorlor.gameofnim/com.evorlor.gameofnim.Opening}: java.lang.NullPointerException
01-07 21:33:28.122: E/AndroidRuntime(813):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-07 21:33:28.122: E/AndroidRuntime(813):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-07 21:33:28.122: E/AndroidRuntime(813):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-07 21:33:28.122: E/AndroidRuntime(813):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-07 21:33:28.122: E/AndroidRuntime(813):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 21:33:28.122: E/AndroidRuntime(813):  at android.os.Looper.loop(Looper.java:123)
01-07 21:33:28.122: E/AndroidRuntime(813):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-07 21:33:28.122: E/AndroidRuntime(813):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 21:33:28.122: E/AndroidRuntime(813):  at java.lang.reflect.Method.invoke(Method.java:507)
01-07 21:33:28.122: E/AndroidRuntime(813):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-07 21:33:28.122: E/AndroidRuntime(813):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-07 21:33:28.122: E/AndroidRuntime(813):  at dalvik.system.NativeStart.main(Native Method)
01-07 21:33:28.122: E/AndroidRuntime(813): Caused by: java.lang.NullPointerException
01-07 21:33:28.122: E/AndroidRuntime(813):  at com.evorlor.gameofnim.Opening.listener(Opening.java:36)
01-07 21:33:28.122: E/AndroidRuntime(813):  at com.evorlor.gameofnim.Opening.onCreate(Opening.java:28)
01-07 21:33:28.122: E/AndroidRuntime(813):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-07 21:33:28.122: E/AndroidRuntime(813):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-07 21:33:28.122: E/AndroidRuntime(813):  ... 11 more 
```

* * *

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:22:31.143

[我在使用 Android Annotations ( http://androidannotations.org/](http://androidannotations.org/) )时得到了同样的结果。一个 project->clean 修复了它，所以我认为 EJK 关于通过索引引用元素的猜测是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:31:30.707

有一个铸造错误。不知道为什么会导致问题，但这就是解决方法。

# php - (A|B) 测试 Google Analytics，从 URL 中删除 utm_expid

> ID：14207383
> 
> 赞同：1
> 
> 时间：2013-01-08T02:34:42.583
> 
> 标签：php, .htaccess, google-analytics, ab-testing, google-experiments

我是新手，我试图重写 URL，以便隐藏 utm_expid，所以如果我的 url 是：

> [http://www.myweb.com/?utm_expid=67183125-2](http://www.myweb.com/?utm_expid=67183125-2)

当用户访问时，我将如何做到这一点

> myweb.com

它没有在 url 中显示 utm_expid

这可能使用 PHP/JS 吗？

注意：我不能使用 RUBY 或除 PHP/JS/HTML 之外的任何其他语言

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T05:06:19.853

有一种方法。一旦获得，只需将页面重定向到基本 url `utm_expid=67183125-2`。IE，

```
if($_GET['utm_expid']) { //header to redirect to myweb.com } 
```

这是一个棘手的方式。希望你被允许使用它。

只需启动一个会话并将值存储在会话变量中。即使页面被重定向，您也可以重新获得它。

IE

```
<?php
session_start();
if($_GET['utm_expid']) {
$_SESSION['variable_name']=$_GET['utm_expid']
 //header to redirect to myweb.com 
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-26T10:36:32.143

让我添加这个与服务器无关的 Javascript 技巧。

```
if (location.search.indexOf('utm_expid') > -1) {
  history.replaceState('page', 'Title', '/')
} 
```

我建议你把它放在`body`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-13T00:13:35.163

如果您想要一个干净的 URL（就像您出于品牌和手动共享目的所做的那样），我会编写脚本以便您加载一个完整的页面 iFrame，该 iFrame 会加载 gA 测试查询的 URL。这样，用户在地址栏中看到了干净的 URL，仍然可以看到实验。

您可以使用 PHP 来设置您的索引页面（或任何服务器端，甚至客户端脚本）。

# gdb - 总是收集 libc 回溯的优缺点是什么？

> ID：14207391
> 
> 赞同：1
> 
> 时间：2013-01-08T02:36:04.853
> 
> 标签：gdb, glibc, backtrace

正如问题所述，在所有错误函数和信号处理程序中*始终*收集基于软件的回溯（如使用 libc 回溯[http://www.gnu.org/software/libc/manual/html_node/Backtraces.html](http://www.gnu.org/software/libc/manual/html_node/Backtraces.html) ）是否有用?

对调试各种各样的错误（如内存、并发错误等）不是很有帮助吗？我想它不会损害正常性能，并且只会在错误路径中触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T04:17:41.667

> 正如问题所述，始终收集基于软件的回溯是否有用

是的，在以下情况下进行崩溃堆栈跟踪通常非常有用：

*   您的代码在您自己的环境中运行，您不必担心堆栈跟踪会泄露任何秘密。
*   当崩溃处理程序没有进一步破坏 coredump、没有挂起等时。

> 就像使用 libc 回溯

glibc在某些条件下`backtrace`调用`calloc`，并且在崩溃处理程序中是不安全的。它可能导致挂起和上述进一步的损坏。编写一个能够以异步信号安全的方式可靠地打印堆栈跟踪的崩溃处理程序非常重要。

> 为什么“标准”应用程序中的错误函数不调用回溯？

考虑`cat /no/such/file`。目前它产生：

```
cat: /no/such/file: No such file or directory 
```

这就是*你*真正需要知道的。让这个印刷品做其他任何事情都是没有用的。如果你有很多这样的文件，并且 cat 为每个文件打印了一个完整的堆栈跟踪，你会得到很多页的错误输出，这只会让找到真正的问题变得更加困难。

对于致命信号处理程序（例如`SIGSEGV`），答案是大多数“标准”应用程序实际上并不处理此类信号，而只是使用默认操作，这会产生核心转储。

但是，如果他们确实捕获了信号，那么从信号处理程序调用`backtrace`、`backtrace_symbols`或`backtrace_symbols_fd`将同样不安全，并且可能死锁，这比简单地转储核心要糟糕得多。考虑一下如果您有一个包含 1000 个命令的长时间运行的脚本会发生什么。您启动它，一周后发现它没有取得任何进展，因为第二个命令在尝试打印崩溃堆栈跟踪时崩溃并陷入僵局。

# android - Android 按钮单击转到另一个 xml 页面

> ID：14207392
> 
> 赞同：2
> 
> 时间：2013-01-08T02:36:44.693
> 
> 标签：android, xml, button, next

所以我在 Eclipse 中所做的，在布局中我有：activity_main.xml 和 activity_main2.xml。我尝试的是在activity_main.xml中创建一个按钮，然后点击进入activity_main2.xml的屏幕

所以在`com.example.myfirstapp`我有

MainActivity.Java：

```
package com.example.myfirstapp;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void click1(View v) {
        Log.i("clicks","You Clicked B1");
        Intent i=new Intent(
                     MainActivity.this,
                     MainActivity2.class);
        startActivity(i);
    }
} 
```

MainActivity2.java

```
package com.example.myfirstapp;

import android.os.Bundle;
import android.view.Menu;
import android.app.Activity;

public class MainActivity2 extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main2);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T05:06:29.303

在您的 MainActivity.java 文件中写入以下代码，而不是您的代码。

```
public class MainActivity extends Activity implements OnClickListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button mBtn1 = (Button) findViewById(R.id.mBtn1);
        mBtn1.setOnClickListener(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
        Log.i("clicks","You Clicked B1");
        Intent i=new Intent(MainActivity.this, MainActivity2.class);
        startActivity(i);
    }
} 
```

并使用以下代码将 MainActivity2 声明到您的 Androidmanifest.xml 文件中。

```
<activity
    android:name=".MainActivity2"
    android:label="@string/title_activity_main">
</activity> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T04:55:07.617

将您的 FirstyActivity 更改为：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button btn_go=(Button)findViewById(R.id.YOUR_BUTTON_ID);
            btn_go.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                  Log.i("clicks","You Clicked B1");
              Intent i=new Intent(
                     MainActivity.this,
                     MainActivity2.class);
              startActivity(i);
            }
        }
    });

} 
```

希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:45:53.407

有不止一种方法可以做到这一点。

这是直接来自 Google 的一个很好的资源： [//developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

在 developer.android.com，他们有大量的教程解释了你需要知道的关于 android 的一切。他们甚至为每个类提供了详细的 API。

如果这没有帮助，有许多不同的资源可以帮助您解决这个问题和其他 android 问题。

# android - 如何判断屏幕中的瓷砖

> ID：14207395
> 
> 赞同：0
> 
> 时间：2013-01-08T02:37:04.237
> 
> 标签：android, canvas, map

当我移动画布时，我在画布上绘制了很多图像切片，我希望屏幕外的切片不绘制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:00:18.043

我会在你的 onDraw 中放一些这样的东西，告诉它不要只在屏幕上绘制。

```
if (imageslice.getX() > 0 + screenXOffset 
    && imageslice.getX < screenWidth + screenXOffset){

  //Draw your image

 } 
```

# node.js - Mongoose 和 EveryAuth 参考/示例/教程

> ID：14207397
> 
> 赞同：0
> 
> 时间：2013-01-08T02:37:23.620
> 
> 标签：node.js, mongodb, coffeescript, mongoose, everyauth

我正在为我的网站开发身份验证系统。我目前正在使用用于节点的 MongoDB 驱动程序和我自己的自定义身份验证系统，但我希望切换到 mongoose 抽象和everyauth 系统，因为我希望用户能够使用不同的方法登录，比如脸书。

这是我的注册路线：

```
AM = require('../modules/account-manager')

routes = (app) ->
  app.get '/register', (req, res) ->
    res.render "#{__dirname}/views/register",
    title: 'Register | WebSite Title'
    stylesheet: 'register'

  app.post '/register', (req, res) ->
    AM.addNewAccount({
      name  : req.param('name'),
      email   : req.param('email'),
      user  : req.param('user'),
      pass  : req.param('pass'),
    }, (e) ->
      if e 
        res.send(e, 400)
      else
        res.redirect '/home'
    )

module.exports = routes 
```

我的问题是是否有人对此有任何好的参考资料或教程或示例代码，因为我对 node.js 相当陌生。我在网上进行了广泛的搜索，但找不到任何东西。

谢谢-CB

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-08T17:10:27.210

你有没有看过everyauth的github repo，因为它似乎有相当不错的文档，还有一个包含代码的示例文件夹。

[https://github.com/bnoguchi/everyauth](https://github.com/bnoguchi/everyauth)

# ruby-on-rails - Rails ajax 更新

> ID：14207399
> 
> 赞同：1
> 
> 时间：2013-01-08T02:37:35.117
> 
> 标签：ruby-on-rails

我想根据 html 中的数据更改 Workorder.wostatus_id。

在我的索引 html 中，我的 wostatus.id 存储如下：

```
<span id="woid">4</span> 
```

我想更新 workorder.wostatus_id = 4

这是在 workorders.js.coffee - 但是，它不起作用：

```
 $.ajax
     type: 'POST'
     url: 'http://localhost:5000/workorders'
     data:
       workorder:
         wostatus_id: $("#woid").val() 
```

也许我没有得到正确的工单记录？

即使这样做也没有更新 workorder.wostatus_id

```
 $.ajax
       type: 'POST'
         url: "http://localhost:5000/workorders"
       data:
         workorder:
           wostatus_id: '3' 
```

这也不起作用：

```
 $.ajax
      type: 'POST'
      url: "http://localhost:5000/workorder/17"
      data:
        wostatus_id: '7' 
```

我错过了一些重要的事情。

ajax POST 是否在工单控制器中执行此代码？？？？

```
 # PUT /workorders/1
 # PUT /workorders/1.json
 def update
  @workorder = Workorder.find(params[:id])

  respond_to do |format|
  if @workorder.update_attributes(params[:workorder])
    format.html { redirect_to @workorder, notice: 'Workorder was successfully updated.' }
    format.json { head :ok }
  else
    format.html { render action: "edit" }
    format.json { render json: @workorder.errors, status: :unprocessable_entity }
  end
end 
```

更新：

我将此添加到工作订单控制器中：

```
 def changestatus
  @workorder = Workorder.find(params[:id])
  @workorder.update_attribute :wostatus_id, '4'
  render nothing: true
 end 
```

我将此添加到路线中：

```
 resources :workorders do
   member { put :changestatus }
  end 
```

目前在 js.coffee 中：

```
 $.ajax
    type: 'PUT'
    url: "http://localhost:5000/workorders/11/changestatus"
    data:
      wostatus_id: 4 
```

（在我开始下一步工作之前，我一直在努力编写代码。）

所以 - 这行得通，工单 11 将 wostatus_id 更改为 4。

但是，现在我无法从 html 中获取正确的信息。html 包含我需要的 2 个数据字段 - 一个是哪个工作订单，另一个是 wostatus_id 是什么。

这是更新网址的html：

```
<div class="false" data-change-url="http://localhost:5000/workorders/16/changestatus"> 
```

我以为这会得到那个网址 - 但是，它不起作用：

```
$(this).data('change-url') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:24:31.087

如果我理解正确，那么我认为您在控制器需要一个数组时发送一个值，并且您使用不同的参数名称（`wostatus_id`在客户端，`workorder`在服务器上）。

也许你想要的是这样的：

```
$.ajax
  type: 'POST'
  url: $('#sort2').data('update-url')
  data:
    workorder: $('#sort2 span').map((i, el) ->
      el.text()
    ) // Change the selector to the elements that holds the ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:37:24.250

发现我不需要任何新的控制器代码 - 我可以使用更新。这是用于 jquery-ui 可排序的。

```
 receive: (event, ui) ->
     str_id =  $(ui.item).attr('id')
     woid = str_id.split('_')[1]
     $.update "/workorders/" + woid,
       workorder:
         wostatus_id: $(this).data('wostatus-id') 
```

感谢您的帮助-您让我朝着正确的方向前进。

# java - Java：JVM 将如何优化对 void 和 empty 函数的调用？

> ID：14207401
> 
> 赞同：14
> 
> 时间：2013-01-08T02:37:36.460
> 
> 标签：java, jvm, javac

假设我们有以下类：

```
public class Message extends Object {}

public class Logger implements ILogger {
 public void log(Message m) {/*empty*/}
} 
```

和以下程序：

```
public static void main(String args[]) {
  ILogger l = new Logger();
  l.log((Message)null); // a)
  l.log(new Message()); // b)
} 
```

Java 编译器会去掉语句**a**和**b**吗？在这两种情况下（剥离或不剥离），Java 编译器决定背后的基本原理是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-08T03:37:26.320

> Java 编译器会去掉语句`a`和`b`?

（`javac`源到字节码）编译器不会剥离任何一个调用。（通过检查字节码很容易检查这一点；例如查看`javap -c`输出。）

> 在这两种情况下（剥离或不剥离），Java 编译器决定背后的基本原理是什么？

符合 JLS :-)。

从务实的角度来看：

*   如果`javac`编译器优化了调用，Java 调试器就根本看不到它们……这对开发人员来说是相当混乱的。
*   如果类和主类是独立编译/修改的，早期优化（by `javac`）将导致损坏。`Message`例如，考虑这个序列：

    *   `Message`被编译，
    *   编译主类，
    *   `Message`被编辑以便`log`做一些事情......并重新编译。

    现在我们有一个错误编译的主类，它没有做正确的事情，`a`因为`b`过早内联的代码已经过时了。

* * *

但是，JIT 编译器*可能会**在运行时*以多种方式优化代码。例如：

*   如果 JIT 编译器可以推断出不需要虚拟方法分派，则方法调用`a`并可能被内联。`b`（如果`Logger`是应用程序使用的唯一实现`ILogger`这一点的类，那么对于一个好的 JIT 编译器来说，这是不费吹灰之力的。）

*   在内联第一个方法调用之后，JIT 编译器可能会确定主体是 noop 并优化调用。

*   在第二个方法调用的情况下，JIT 编译器可以进一步推断（通过转义分析）`Message`对象不需要在堆上分配......或者实际上根本不需要。

（如果你想知道 JIT 编译器（在你的平台上）*实际上*做了什么，Hotspot JVM 有一个 JVM 选项，可以为选定的方法转储 JIT 编译的本机代码。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T02:50:21.487

反汇编以下文件（带有`javap -c`）表明它们在编译为字节码时不会被 1.7.0 编译器剥离：

```
public class Program
{
    public static class Message extends Object {}

    public interface ILogger {
        void log(Message m);
    }

    public static class Logger implements ILogger {
        public void log(Message m) { /* empty */ }
    }

    public static void main(String[] args) {
        ILogger l = new Logger();
        l.log((Message)null); // a)
        l.log(new Message()); // b)
    }
} 
```

结果如下。关键位是第 13 行和第 26 行的调用。

```
Compiled from "Program.java"
public class Program {
  public Program();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public static void main(java.lang.String[]);
    Code:
       0: new           #2                  // class Program$Logger
       3: dup
       4: invokespecial #3                  // Method Program$Logger."<init>":()V
       7: astore_1
       8: aload_1
       9: aconst_null
      10: checkcast     #4                  // class Program$Message
      13: invokeinterface #5,  2            // InterfaceMethod Program$ILogger.log:(LProgram$Message;)V
      18: aload_1
      19: new           #4                  // class Program$Message
      22: dup
      23: invokespecial #6                  // Method Program$Message."<init>":()V
      26: invokeinterface #5,  2            // InterfaceMethod Program$ILogger.log:(LProgram$Message;)V
      31: return
} 
```

编辑：但是，正如@mikera 指出的那样，JIT 编译器可能会在程序运行时进行进一步优化，这可能能够消除调用。不幸的是，我对细节知之甚少，无法对此发表评论。

旁注：您可能对此链接感兴趣，该链接涉及 Hotspot JVM 使用的性能技术：

[https://wikis.oracle.com/display/HotSpotInternals/PerformanceTechniques](https://wikis.oracle.com/display/HotSpotInternals/PerformanceTechniques)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T02:44:48.607

可能最终，绝对不是立即，也不一定永远。JIT 不做任何保证，尤其是对于只被调用几次的方法。（它可能会被归类为简单地内*联*`log`调用，而内联代码恰好是......什么都没有。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-08T02:48:25.923

不可能**明确地说**- 这将取决于 JVM / Java 编译器的实现。

一个足够聪明的编译器可以证明这两个语句都没有效果，因此可以消除它们。我相信大多数现代 JVM 都会这样做，尽管您需要测试您的特定配置才能确定。

a) 比 b) 更容易优化，因为 b) 包含一个构造函数调用，编译器还需要证明它没有副作用，然后才能优化整个语句。

请注意，您希望 JIT 编译器而不是 Java 编译器本身完成这种消除，即可能会生成包含日志函数调用的字节码，但稍后 JIT 编译器会在编译时对其进行优化到本机代码。

此外，由于 JIT 可以根据运行时统计信息等重新编译，因此代码可能会在那里开始，但稍后在连续优化时被编译掉。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-06T22:44:37.863

如果您将引用设为 final，服务器 JIT 肯定会内联并最终完全消除代码： final ILogger l = new Logger(); 在现代 JVM 中，大部分优化都是由 JIT 执行的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-08T02:45:55.170

我不认为 java 编译器会删除调用，因为被调用的方法是空的，因为您将来也可以更改方法，而无需对 main 方法进行任何更改。

# c++ - 覆盖方法错误 C++

> ID：14207402
> 
> 赞同：0
> 
> 时间：2013-01-08T02:38:41.027
> 
> 标签：c++, exception, inheritance, visual-studio-2012

我正在编写一个程序，在该程序中我从 C++ 中的另一个类继承并重写了几个方法。因为我只想在这些方法中添加一行，所以我尝试在基类中调用该方法并在其下方添加一行。我收到以下错误。

```
"Unhandled exception at 0x00FA4456 in Ch.12.exe: 0xC0000005: Access violation reading location 0x67525A64." 
```

这是我在java中最接近“超级”的（据我所知）。

类的简化版

```
using namespace std;

#include <iostream>
#include <string>
#include "dateType2.h"

class extDateType : public dateType
{
private:
    string monthString;
    void updateMonthString()
    {
        string months[12] = {"January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"};
        monthString = months[getMonth()];
    }
public:
void printDateString()
{
    string months[12] = {"January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"};
    cout << months[getMonth()];
    cout << " ";
    cout << getYear();
}
extDateType(int month, int day, int year)
{
    dateType(month, day, year);
    updateMonthString();
}
void addDays(int x)
{
    dateType::addDays(x);
    updateMonthString();
}
};

int main()
{
    extDateType x(2, 25, 1996);
    x.addDays(10);
    x.printDateString();
    system("pause");
    return 0;
} 
```

基类的简化版本

```
using namespace std;

#include <iostream>
#include <string>

class dateType
{
private:
    int dMonth;
    int dDay;
    int dYear;
    bool isLeapYear;
public:
    dateType(){}
    void addDays(int x)
    {
        int days[12] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};

        dDay += x;
        for(int i = dMonth-1; dDay > days[i]; i++)
        {
            dDay -= days[i];
            dMonth++;
            if(dMonth == 13)
            {
                dMonth = 0;
                dYear++;
            }
            i = i % 11;
        }
    }
    dateType(int month, int day, int year)
    {
        isLeapYear = false;
        int days[12] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if(month > 0 && month <= 12)
        {
            if(month == 2)
            {
                    if(year % 4 == 0)
                {
                    isLeapYear = true;
                    if(day > 0 && day <= 29)
                    {
                        dMonth = month;
                        dDay = day;
                        dYear = year;
                    }
                    else
                    {
                        cout << "Error" << endl;
                        dMonth = 1;
                        dDay = 1;
                        dYear = 2000;
                    }
                }
                else
                {
                    isLeapYear = false;
                    if(day > 0 && day <= 28)
                    {
                        dMonth = month;
                        dDay = day;
                        dYear = year;
                    }
                    else
                    {
                        cout << "Error" << endl;
                        dMonth = 1;
                        dDay = 1;
                        dYear = 2000;
                    }
                }
            }
            else
            {
                if(day > 0 && day <= days[month-1])
                {
                    dMonth = month;
                    dDay = day;
                    dYear = year;
                }
                else
                {
                    cout << "Error" << endl;
                        dMonth = 1;
                    dDay = 1;
                    dYear = 2000;
                }    
            }
        }
        else
        {
                cout << "Error" << endl;
            dMonth = 1;
            dDay = 1;
            dYear = 2000;
        }
    }
}; 
```

使用 Visual Studio 2012。如果有人能帮我找出问题所在，将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T02:51:51.180

```
extDateType(int month, int day, int year)
{
    dateType(month, day, year); 
```

这是解决您的问题的方法，将上面的内容替换为下面的内容。

```
extDateType(int month, int day, int year)
:dateType(month, day, year)
{ 
```

前者只是创建一个未使用的临时对象，然后在执行该行后将其销毁，而后者正确调用基类构造函数。`dateType(){}`如果您删除了会导致编译器错误的 ，这可能会更明显。

由于未正确调用基类构造函数，因此在`updateMonthString`调用时，该行涉及对月份的**大型未初始化垃圾值**作为索引`monthString = months[getMonth()];`的数组访问。**从而崩溃**。

 ****后一种语法称为[初始化列表](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)是初始化没有默认（无参数）构造函数的基类和成员对象的正确方法。

也`addDays`不会像您在 Java 中所期望的那样工作。您需要阅读名为[Virtual Functions](http://en.wikipedia.org/wiki/Virtual_function)的概念。默认情况下[，所有（非静态）函数都`virtual`在 Java 中](https://stackoverflow.com/questions/4547453/virtual-functions-in-java)，但您需要通过执行以下操作在 C++ 中手动使它们成为虚拟函数

```
class dateType
{

    ...
    virtual void addDays(int x){
  //^^^^^^^
    ...

}; 
```****

# ruby-on-rails - 将 Rails 应用程序部署到 heroku 时出错（无法使用供应商创建资源）

> ID：14207403
> 
> 赞同：3
> 
> 时间：2013-01-08T02:38:41.763
> 
> 标签：ruby-on-rails, git, heroku

我想开发一个小的 Rails 应用程序并将其部署到 Heroku。这是我第二次使用 Heroku 但第一次没有问题

这一次，当我尝试使用这个命令行部署它时：

```
git push origin master 
```

我有这个：

```
Counting objects: 73, done.
Delta compression using up to 4 threads.
>Compressing objects: 100% (59/59), done.
Writing objects: 100% (73/73), 27.16 KiB, done.
Total 73 (delta 9), reused 0 (delta 0)
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.0.pre.2
   Running: bundle install --without development:test --path vendor/bundle -- binstubs bin/ --deployment
   Fetching gem metadata from https://rubygems.org/.........
   Fetching gem metadata from https://rubygems.org/..
   Installing rake (10.0.3)
   Installing i18n (0.6.1)
   Installing multi_json (1.5.0)
   Installing activesupport (3.2.9)
   Installing builder (3.0.4)
   Installing activemodel (3.2.9)
   Installing erubis (2.7.0)
   Installing journey (1.0.4)
   Installing rack (1.4.3)
   Installing rack-cache (1.2)
   Installing rack-test (0.6.2)
   Installing hike (1.2.1)
   Installing tilt (1.3.3)
   Installing sprockets (2.2.2)
   Installing actionpack (3.2.9)
   Installing mime-types (1.19)
   Installing polyglot (0.3.3)
   Installing treetop (1.4.12)
   Installing mail (2.4.4)
   Installing actionmailer (3.2.9)
   Installing arel (3.0.2)
   Installing tzinfo (0.3.35)
   Installing activerecord (3.2.9)
   Installing activeresource (3.2.9)
   Installing coffee-script-source (1.4.0)
   Installing execjs (1.4.0)
   Installing coffee-script (2.2.0)
   Installing rack-ssl (1.3.2)
   Installing json (1.7.6)
   Installing rdoc (3.12)
   Installing thor (0.16.0)
   Installing railties (3.2.9)
   Installing coffee-rails (3.2.2)
   Installing daemons (1.1.9)
   Installing eventmachine (1.0.0)
   Installing jquery-rails (2.1.4)
   Installing pg (0.14.1)
   Using bundler (1.3.0.pre.2)
   Installing rails (3.2.9)
   Installing sass (3.2.5)
   Installing sass-rails (3.2.5)
   Installing thin (1.5.0)
   Installing uglifier (1.3.0)
   Your bundle is complete! It was installed into ./vendor/bundle
   Post-install message from rdoc:
   Depending on your version of ruby, you may need to install ruby rdoc/ri data:
   <= 1.8.6 : unsupported
   = 1.8.7 : gem install rdoc-data; rdoc-data --install
   = 1.9.1 : gem install rdoc-data; rdoc-data --install
   >= 1.9.2 : nothing to do! Yay!
   Cleaning up the bundler cache.
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
   Running: rake assets:precompile
   Asset precompilation completed (11.92s)
-----> Rails plugin injection
   Injecting rails_log_stdout
   Injecting rails3_serve_static_assets
-----> Discovering process types
   Procfile declares types      -> (none)
   Default types for Ruby/Rails -> console, rake, web, worker
-----> Compiled slug size: 10.1MB
-----> Launching... !     Heroku push rejected, Could not create resource with vendor, please try again later

To git@heroku.com:stage-2013.git
 ! [remote rejected] HEAD -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:stage-2013.git' 
```

在 .git/config 我有这个：

```
[remote "origin"]
    url = git@heroku.com:stage-2013.git
    fetch = +refs/heads/*:refs/remotes/origin/*
push = +HEAD:refs/heads/master 
```

如果有人有想法，谢谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T04:00:29.003

这听起来像是供应商（Heroku）问题而不是我们的问题。

# php - 从 JavaScript 调用 PHP 方法

> ID：14207407
> 
> 赞同：-7
> 
> 时间：2013-01-08T02:38:45.583
> 
> 标签：php, javascript, function, web

我的印象是，由于 JavaScript 是客户端而 PHP 是服务器端，因此不可能从 JavaScript 调用 PHP；但是，此代码段有效：

```
<script>
  function otherCourse(){
    var course = prompt("prompt?");
    document.write("
      <?php
        $con->query("INSERT INTO `Courses` (`Name`) VALUES ('blah')");
      ?>
    ");
  }
</script> 
```

为什么这行得通？该条目已插入数据库

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T02:42:20.250

您的 PHP 正在从服务器端执行。您嵌入在 JavaScript 中的 PHP 实际上永远不会渲染任何东西。

通过删除对该函数的任何调用来测试它`otherCourse`，您会看到查询仍在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:50:54.957

在 JavaScript 到达客户端之前，您的 PHP 在服务器上执行。

# python - 无法理解 scikit 随机森林的输出

> ID：14207410
> 
> 赞同：5
> 
> 时间：2013-01-08T02:39:16.757
> 
> 标签：python, machine-learning, scikit-learn, random-forest

假设我有一个这样的数据集：

```
5.9;0.645;0.12;2;0.075;32;44;0.99547;3.57;0.71;10.2;5
6;0.31;0.47;3.6;0.067;18;42;0.99549;3.39;0.66;11;6 
```

其中第 11 列表示特征（酸度、氯化物等），最后一列表示给予项目的评级（例如 5 或 6）

数据集是这样训练的：

```
target = [x[11] for x in dataset]
train = [x[0:11] for x in dataset]

rf = RandomForestClassifier(n_estimators=120, n_jobs=-1)
rf.fit(train, target)

predictions = rf.predict_proba(testdataset)
print predictions[0] 
```

打印类似的东西

```
[ 0\.          0.01666667  0.98333333  0\.          0\.          0\.        ] 
```

现在，为什么它不输出单个分类，例如 5 或 6 评级？

文档说“输入样本的预测类别概率被计算为森林中树木的平均预测类别概率”，我无法理解。

如果你使用

```
print rf.predict(testdataset[-1])
[ 6\.  6\.  6\.  6\.  6\.  6\.  6\.  6\.  6\.  6\.  6.] 
```

它打印的东西更像你所期望的——至少它看起来像评级——但我仍然不明白为什么每个特征都有一个预测，而不是考虑到所有特征的单一预测？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T10:07:22.833

除了迭戈的回答：

`RandomForestClassifier`是一个分类器，用于预测离散数量的类别的类别分配，而无需在类别标签之间进行排序。

如果要输出连续的浮点评分，则应尝试使用回归模型，例如`RandomForestRegressor`。

您可能必须将输出限制在 [0, 6] 范围内，因为无法保证模型不会输出预测`6.2`，例如。

**编辑**回答你的第二点，该`predict`方法需要一个样本列表。因此，您应该在您的案例中为其提供一个样本列表。尝试：

```
print rf.predict([testdataset[-1]]) 
```

或者：

```
print rf.predict(testdataset[-1:]) 
```

我想知道为什么在这种情况下你没有收到错误。

**编辑**：输出没有真正意义：你的数据集的形状是什么？

```
>>> print np.asarray(train).shape

>>> print np.asarray(target).shape

>>> print np.asarray(testdataset).shape 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T02:51:04.877

从文档中，`predict_proba`返回：

> p : shape = [n_samples, n_classes] 的数组，或者如果 n_outputs > 1，则为 n_outputs 此类数组的列表。输入样本的类概率。类按算术顺序排序。

这里的关键是最后一个短语“***类按算术顺序排序***”。我的猜测是，您的一些训练样本的类别小于 5，其`predict_proba`概率为零，而类别 5 和 6 的概率分别为 0.01666667 和 0.98333333，而另外 3 个类别均 > 6，概率也为零。

# xcode - Cornerstone 与 Xcode 4.5 的内置 SVN 之间是否有技术优势？

> ID：14207411
> 
> 赞同：2
> 
> 时间：2013-01-08T02:39:24.760
> 
> 标签：xcode, svn, version-control, cornerstone

我使用 Zennaware 的 Cornerstone 2 已经有一段时间了，我对它非常满意。但是，我即将开始一个新项目，并且使用 Xcode 4，Apple 重新编写了他们的内置 SVN 客户端（并且还添加了 GIT），所以我正在考虑切换。

现在我知道不要问“您更喜欢哪个以及为什么”类型的问题（例如：[Cornerstone vs Versions for Mac OS X](https://stackoverflow.com/questions/2426811/cornerstone-vs-versions-for-mac-os-x)），因为它们是主观的，因此很可能被关闭，但我是从技术角度询问，而不是用户偏好的角度，是否有限制或优势？

例如，虽然 Xcode 中的并排版本审查似乎是一个非常有用的功能，能够“清理”您的历史记录，但这是一种偏好/功能。但是，我读过内置的 SVN 客户端在外部有问题（这可能是 4.x 之前的版本......他们没有说），这是一个技术限制，可能会使内置无论可用性如何，源代码控制都无法满足我们的需求。

也就是说，从技术角度来看（即支持的存储库版本等）是否存在任何已知的限制、缺失的功能、优点和缺点？内置听起来很吸引人，但我不想承诺只是撞到兼容性墙，或者更糟的是，腐败。

# git - 如何仅使用“git log”显示更改的文件名

> ID：14207414
> 
> 赞同：155
> 
> 时间：2013-01-08T02:40:29.623
> 
> 标签：git

是否只能显示更改的**文件名**`git log`？

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2013-01-09T02:40:28.247

我用

```
git log --name-only 
```

或者

```
git log --name-only --oneline 
```

简而言之。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-01-08T21:14:20.193

我想你可以使用`--name-only`国旗。就像是：

```
git log 73167b96 --pretty="format:" --name-only 
```

我个人`git show`用于查看提交中更改的文件：

```
git show --pretty="format:" --name-only 73167b96 
```

（73167b96 可以是任何提交/标签名称）

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-09-08T23:45:29.370

我在这里偶然发现了一个没有“git log”限制的类似答案。这里的答案没有给我我需要的东西，但是这样做了，所以我会添加它以防其他人发现它有用：

```
git diff --name-only 
```

您还可以将其与标准提交指针结合使用，以查看自特定提交以来发生了什么变化：

```
git diff --name-only HEAD~3
git diff --name-only develop
git diff --name-only 5890e37..ebbf4c0 
```

这简洁地*只*提供了非常适合脚本编写的文件名。例如：

```
git diff --name-only develop | while read changed_file; do echo "This changed from the develop version: $changed_file"; done

#OR

git diff --name-only develop | xargs tar cvf changes.tar 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2013-01-08T04:19:31.823

这几乎可以满足您的需求：

```
git log --stat --oneline 
```

提交 ID 和一小行仍然保留，然后是该提交更改的文件列表。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2016-04-07T08:01:38.797

现在我使用以下内容获取当前分支的已更改文件列表，并将其与 master 进行比较（比较分支很容易更改）：

```
git log --oneline --pretty="format:" --name-only master.. | awk 'NF' | sort -u 
```

* * *

以前，我曾经依靠这个：

```
git log --name-status <branch>..<branch> | grep -E '^[A-Z]\b' | sort -k 2,2 -u 
```

它仅输出文件列表及其状态（添加、修改、删除）：

```
A   foo/bar/xyz/foo.txt
M   foo/bor/bar.txt
... 
```

`-k2,2`排序选项使其按文件路径而不是更改类型（A、M、D）排序。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-06-04T10:35:07.140

如果您**只**需要文件名，例如：

```
dir/subdir/file1.txt
dir/subdir2/file2.sql
dir2/subdir3/file6.php 
```

（我将其用作**tar**命令的来源），您还需要过滤掉提交消息。

为此，我使用以下命令：

```
git log --name-only --oneline | grep -v '.{7} ' 
```

[grep](https://en.wikipedia.org/wiki/Grep)命令排除（`-v`参数）以七个符号（这是命令的 Git 哈希的长度）开头的每一行，后跟`git log`空格。所以它会过滤掉所有 Git`hash message`行，只留下带有文件名的行。

一项有用的改进是追加[`uniq`](https://en.wikipedia.org/wiki/Uniq)以删除重复的行，因此它将如下所示：

```
git log --name-only --oneline | grep -v '.{7} ' | uniq 
```

# c# - C#、XNA 和 Mono。这一切都会奏效吗？

> ID：14207416
> 
> 赞同：3
> 
> 时间：2013-01-08T02:41:18.080
> 
> 标签：c#, xna, mono, cross-platform

如果我使用 XNA 在 C# 中编程，Mono 是否能够可靠地将我的程序编译到 Mac 和 Linux 上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T02:55:36.487

你会想要使用[Monogame](http://monogame.codeplex.com/)。这是一个开源解决方案，您可以将您的 XNA 程序移植到其中，几乎不需要更改任何代码。您可以轻松地为 Mac/Linux 甚至移动设备构建。

我最近一直在 Monogame 和 Farseer Physics Engine 上为 Windows 8 编写游戏，它很容易移植到你想要的任何设备上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T02:45:47.483

Microsoft XNA 在您的 CLR 中需要额外的程序集，我认为 Mono 没有任何等效的东西。但是，有一个关于 Mono 的 XNA 实现的项目，称为[MonoGame](http://monogame.codeplex.com/)，这可能是您正在寻找的。

# c# - 数据表合并问题

> ID：14207418
> 
> 赞同：0
> 
> 时间：2013-01-08T02:41:28.430
> 
> 标签：c#, asp.net, datatable, dataset

我有两个要合并的数据表。

我知道有很多方法`2 for loops`和`dataset merge`和`linq`。

但我发现他们都需要确切地知道每个数据表有多少列。

我的情况有点不同。

我正在从 2 个 csv 文件中获取数据并填充两个数据表。

所以，我不知道每个数据包有多少列。

我所知道的是每个表都有唯一的“NRIC”列。

现在，我想合并它们。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:55:39.337

```
You can try like the below one.Here location is common entity between two tables.

var results = t1.AsEnumerable().Join(t2.AsEnumerable(),
                a => a.Field<String>("Location"),
                b => b.Field<String>("Location"),
                (a, b) =>
                {
                    DataRow row = table.NewRow();
                    row.ItemArray = a.ItemArray.Concat(b.ItemArray).ToArray();
                    table.Rows.Add(row);
                    return row;
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:46:47.047

您不能通过遍历每个 DataTables 的 Columns 属性来获取列名和/或列数吗？

以下链接可能会有所帮助：

[http://msdn.microsoft.com/en-us/library/system.data.datatable.columns.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatable.columns.aspx)

# grand-central-dispatch - 为什么我们需要在 iOS 上同步？

> ID：14207419
> 
> 赞同：1
> 
> 时间：2013-01-08T02:42:01.187
> 
> 标签：grand-central-dispatch, synchronous

事实上，同步连接和异步连接之间的唯一区别是运行时将为异步连接创建一个线程，而它不会为同步连接做这样的事情。

在这种情况下，一个同步运行在当前线程中，为什么我们还需要同步呢？同步代码和普通代码有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:47:55.043

同步调用会停止您当前的操作并在调用返回时返回。使用异步调用，您可以继续（例如构建您的用户界面）并在结果可用时读取结果。async 通常更复杂，因此它取决于首选解决方案的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:06:25.437

如果 API 公开同步方法，通常是因为线程处理可以由用户完成，或者至少这样做有好处。异步连接很适合在主线程上使用以避免阻塞用户界面，但如果您*已经*在后台线程上，那么为您不介意阻塞的操作生成*另一个线程*是浪费资源，因为线程创建是不便宜。此外，异步 API 需要更多的开发人员努力来控制逻辑流。

正如 AlexWien 所说，同步与异步代码相反，因此是*普通代码*。

# xml - 使用 xi:include 将 JAXB 导出到模块化 xml 文件

> ID：14207421
> 
> 赞同：4
> 
> 时间：2013-01-08T02:42:14.177
> 
> 标签：xml, jaxb, include, modular

我有两个 XML 文件

树.xml

```
<tree>
    <xi:include href="fruit.xml" xmlns:xi="http://www.w3.org/2001/XInclude">
        <xi:fallback>
            <fruit/>
        </xi:fallback>
    </xi:include>
</tree> 
```

水果.xml

```
<fruit>
     ...
</fruit> 
```

我继承了解组文件的代码，它返回一个 java 对象。我现在需要将单个 java 对象编组回两个文件。我意识到还有其他解决方案（即使用两个对象而不是一个，这是一个选项）但我需要知道是否可以编组单个对象并维护 xi:include （或重新引入它）并导出到两个（或更多）xml文件。

这甚至可能吗？如果是这样，有什么提示/想法吗？

谢谢

更新：

我一直在研究这个（我在询问之前研究过）。我确实找到了本教程[http://tutorial.waycoolsearch.com/java/jaxb2.php](http://tutorial.waycoolsearch.com/java/jaxb2.php)似乎有我的答案，但是当我整理文件时，它需要两个并生成一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T12:42:42.437

下面我将演示如何使用 an`XmlAdapter`来支持此用例的编组和解组。

**XmlAdapter（包括水果适配器）**

An`XmlAdapter`可用于此用例。

```
import java.io.File;
import javax.xml.bind.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class IncludeFruitAdapter extends XmlAdapter<IncludeFruitAdapter.Include, Fruit> {

    private JAXBContext jc;
    private String href = "fruit.xml";

    public IncludeFruitAdapter() {
        try {
            jc = JAXBContext.newInstance(Fruit.class);
        } catch(Exception e) {
            throw new RuntimeException(e);
        }
    }

    public static class Include {

        @XmlAttribute
        public String href;

        @XmlElement(namespace="http://www.w3.org/2001/XInclude")
        public Fallback fallback;

    }

    public static class Fallback {

        @XmlElementRef
        public Fruit value;

    }

    @Override
    public Include marshal(Fruit fruit) throws Exception {
        File xml = new File(href);
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(fruit, xml);

        Include include = new Include();
        include.href = href;
        include.fallback = new Fallback();
        include.fallback.value = new Fruit();
        return include;
    }

    @Override
    public Fruit unmarshal(Include include) throws Exception {
        File xml = new File(include.href);
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        try {
            return (Fruit) unmarshaller.unmarshal(xml);
        } catch(Exception e) {
            return include.fallback.value;
        }
    }

} 
```

**树**

`@XmlJavaTypeAdapter`用于`XmlAdapter`引用.

```
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Tree {

    @XmlJavaTypeAdapter(IncludeFruitAdapter.class)
    @XmlElement(name="include", namespace="http://www.w3.org/2001/XInclude")
    private Fruit fruit;

} 
```

**水果**

```
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Fruit {

    private String name;

} 
```

**演示**

下面是一些演示代码，您可以运行它来证明一切正常：

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Tree.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("input.xml");
        Tree tree = (Tree) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(tree, System.out);

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:53:25.157

我想出了一个答案，至少可以解决。我想这可能是这样做的方法。

我希望 JAXB 有某种方法来定义对象的一部分作为编组的包含，但我什么也找不到。

注意：我有一个额外的技巧，我将在下面解释，我想你可以不用但我无法让它工作，并且在其他人需要这样做的情况下，至少他们会知道。

流程如下。

1.  一个带有 XI:Include 的 XML 文件被解组为一个 java 对象。此对象包含 2 个文件（父文件和包含文件）的内容。
2.  对象已更新。
3.  该对象被编组回单个临时文件（这是 hack）。
4.  单个临时文件被编组到 DOM 文档中。（我想直接编组到一个 DOM 文档，但我总是得到一个空的 DOM 文档，没有例外）。
5.  然后我通过首先删除需要进入 XI:Include 的节点然后插入一个新的 XI:include 文件来操作 DOM 文档。
6.  将 DOM 文档转换为 xml 文件。请注意，在我的情况下，XI:include 的内容不会改变，但我认为该节点可以放入新文档并进行转换。

我将很快更新代码。

还有其他方法可以解决这个问题吗？

谢谢，特拉维斯

# c# - 计算两个位图之间差异的快速方法

> ID：14207423
> 
> 赞同：0
> 
> 时间：2013-01-08T02:42:24.293
> 
> 标签：c#, bitmap, differentiation

> **可能重复：**
> [我可以比较两个相同大小的位图以确定它们是否相同的最快方法是什么？](https://stackoverflow.com/questions/2031217/what-is-the-fastest-way-i-can-compare-two-equal-size-bitmaps-to-determine-whethe)

我正在尝试有效地计算两个位图之间的差异并将任何匹配的像素设置为黑色。我试过这个：

```
for (int x = 0; x < 1280; x++)
{
    for (int y = 0; y < 720; y++)
    {
        if (bitmap.GetPixel(x, y) == bitmap2.GetPixel(x, y))
        {
            bitmap2.SetPixel(x, y, Color.Black);
        }
    }
} 
```

但事实证明 GetPixel 和 SetPixel 很慢，所以这并不能很好地工作。有人知道这样做的另一种（更快）方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T03:08:18.187

此方法使用不安全代码，假设位图大小相同且每像素 4 个字节。

```
Rectangle bounds = new Rectangle(0,0,bitmapA.Width,bitmapA.Height);
var bmpDataA = bitmapA.LockBits(bounds, ImageLockMode.ReadWrite, bitmapA.PixelFormat);
var bmpDataB = bitmapB.LockBits(bounds, ImageLockMode.ReadWrite, bitmapB.PixelFormat);

const int height = 720;
int npixels = height * bmpDataA.Stride/4;
unsafe {
    int * pPixelsA = (int*)bmpDataA.Scan0.ToPointer();
    int * pPixelsB = (int*)bmpDataB.Scan0.ToPointer();

    for ( int i = 0; i < npixels; ++i ) {
        if (pPixelsA[i] != pPixelsB[i]) {
             pPixelsB[i] = Color.Black.ToArgb();
        }
    }
}
bitmapA.UnlockBits(bmpDataA);
bitmapB.UnlockBits(bmpDataB); 
```

对于安全的方法，将像素数据复制到数组缓冲区以使用这些`InteropServices.Marshal.Copy`方法进行处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T02:48:45.863

原始位图数据和 LockBitmap。

[http://www.codeproject.com/Tips/240428/Work-with-bitmap-faster-with-Csharp](http://www.codeproject.com/Tips/240428/Work-with-bitmap-faster-with-Csharp)

问题（缺少示例）。 [我可以比较两个相同大小的位图以确定它们是否相同的最快方法是什么？](https://stackoverflow.com/questions/2031217/what-is-the-fastest-way-i-can-compare-two-equal-size-bitmaps-to-determine-whethe)

忘记是否关闭调试模式会提高速度。大约 10 倍，但 lockbit 仍然更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T02:48:57.183

几乎可以肯定这已经回答过了。你应该使用：

[位图.LockBits](http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx)

访问 Width 和 Height （或具有相同信息的其他属性）也很慢，因此如果您想在循环中使用它们（而不是示例中的 720 和 1280），请将它们复制到局部变量。

# css - CSS 字体“？#iefix”

> ID：14207425
> 
> 赞同：27
> 
> 时间：2013-01-08T02:42:49.953
> 
> 标签：css, font-face

我有一个关于 css @font-face 的问题。我正在使用本网站（http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax）中的以下代码。

```
@font-face {
font-family: 'MyFontFamily';
src: url('myfont-webfont.eot?#iefix') format('embedded-opentype'), 
     url('myfont-webfont.woff') format('woff'), 
     url('myfont-webfont.ttf')  format('truetype'),
     url('myfont-webfont.svg#svgFontName') format('svg');
} 
```

为什么最后一行“ `url('myfont-webfont.eot?#iefix')`”有“ `#iefix`”？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-08T02:45:45.993

这是因为 IE8 及以下版本解释字体声明的方式。在这些版本的IE中正常`url('myfont-webfont.eot')`会导致404 Server错误；添加`?#iefix`修复服务器问题。（出于同样的原因，IE 有条件样式表。）

根据 Fontspring （直接来自源）：

> Internet Explorer <9 在 src 属性的解析器中有一个错误。如果您在 src 中包含多个字体格式，IE 将无法加载它并报告 404 错误。原因是 IE 试图将左括号之间的所有内容作为文件加载到最后一个右括号。要处理这种错误行为，您只需先声明 EOT 并附加一个问号。问号使 IE 误以为字符串的其余部分是查询字符串并仅加载 EOT 文件。其他浏览器遵循规范，根据 src 级联和格式提示选择他们需要的格式。

所以必要的部分是`?`; 我想这`#iefix`只是程序员的语义线，浏览器不会以任何特定方式解释。

如果您愿意，这里有更多信息：[https](https://github.com/stubbornella/csslint/wiki/Bulletproof-font-face) ://github.com/stubbornella/csslint/wiki/Bulletproof-font-face 。

# python - 从另一个模块引用的变量的值在它自己的模块中更改后不会更改

> ID：14207426
> 
> 赞同：2
> 
> 时间：2013-01-08T02:42:50.953
> 
> 标签：python

我开始写python程序有一段时间了，但我不是很擅长，目前我遇到一个问题，这似乎很奇怪，至少对我来说是这样。

假设我们有两个名为`A.py`and的源文件`B.py`，它们的内容如下：

`A.py`

```
import B

__global__ = 'not set yet'

class Data:
    __var__ = 'not set yet'

def init():
    global __global__
    __global__ = 'value set for global'
    Data.__var__ = 'value set for class var'

if __name__ == '__main__':
    init()

    t = B.Test()
    t.display()

    print '============================'
    print 'global(in A):    ' + __global__
    print 'class var(in A): ' + Data.__var__ 
```

`B.py`

```
import A

class Test:
    def __init__(self):
        self.glo = A.__global__
        self.var = A.Data.__var__

    def display(self):
        print 'global:          ' + self.glo
        print 'class var:       ' + self.var
        print '============================'
        print 'global(in B):    ' + A.__global__
        print 'class var(in B): ' + A.Data.__var__ 
```

然后我跑了`python A.py`，输出如下：

```
global:          not set yet
class var:       not set yet
============================
global(in B):    not set yet
class var(in B): not set yet
============================
global(in A):    value set for global
class var(in A): value set for class var 
```

在我看来，前 4 个输出应该与后 2 个输出一致，但事实并非如此，似乎该值是在类和方法定义期间设置的，无法更改。它与许多其他语言（例如 Java）非常不同。那么，任何人都可以帮助解释这一点，或者向我粘贴一些链接以帮助理解它吗？有什么解决方法可以解决这个问题吗？

提前致谢，

开尔文

==============编辑===============

感谢@icktoofay、@hop 和@RocketDonkey，在我尝试了下面的代码之后，我确实找到了根本原因：

```
import sys
import A
import __main__

__global__ = 'not set yet'

class Data:
    __var__ = 'not set yet'

def init():
    global __global__
    __global__ = 'value set for global'
    Data.__var__ = 'value set for class var'

if __name__ == '__main__':
    init()

    for key in sys.modules.keys():
        if key in ['__main__', 'A']:
            print key + ' : ' + sys.modules[key].__file__
    print '===================='
    print 'A: ' + A.__global__
    print 'A: ' + A.Data.__var__
    print '===================='
    print __main__.__global__
    print __main__.Data.__var__ 
```

输出是：

```
__main__ : A.py
A : D:\test\python\A.py
====================
A: not set yet
A: not set yet
====================
value set for global
value set for class var 
```

这是因为文件`A.py`被导入了两次，一个是命名的`__main__`，另一个是命名`A`的，模块中的值发生了变化`__main__`，但是对于模块`B`，值是从模块中获取`A`的，所以值没有改变。

我确实需要更深入地了解python的模块导入。:-D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T02:53:52.747

循环导入（`A`导入`B`、`B`导入`A`）与作为主脚本的模块之一相结合是问题所在。

## Python 如何导入模块

当您要求 Python 导入一个模块时，它首先`sys.modules`会查看该名称的模块是否已经存在。如果是这样，它只使用该模块。如果没有该名称的模块，它会创建一个新的模块对象，将其放入 中`sys.modules`，并在该模块中运行适当的 Python 代码。

## 主要脚本

Python 脚本中使用了一个流行的成语：无处不在

```
if __name__ == '__main__': 
```

当 Python 想要运行主脚本时，它会导入*名为 的`__main__`*模块。

当你的主脚本只对其他模块做一些事情时，这很好，但是当其他模块想再次对主模块做一些事情时，你就会遇到麻烦：再次导入主模块的脚本可能是通过一个正常的名称导入它（比如在这种情况下，`A`)。不幸的是，已经加载的模块没有命名`A`；它被命名为`__main__`。

## 解决方案

一个非常简单的解决方案就是删除其他模块对主模块的依赖。那么您将不会遇到这种不直观的行为。您可能会这样做的一种方法是让主脚本只是一个调用另一个模块的`main`函数或其他东西的存根。

一种不同的解决方案是手动更改主脚本`sys.modules`以将其置于另一个名称下。这有点hacky，但它有效：

```
sys.modules['A'] = sys.modules[__name__] 
```

现在你知道了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T03:13:50.667

+1 到@icktoofay - 我会在这个答案中投入比我更多的股票，所以请带上一点盐，因为这是我公认的对过程缺乏经验的理解：

正如其他人所提到的，您的主要问题是循环进口。其他人会更聪明地发表评论，但正在发生的事情的要点是：

1.  `import B`- 这会在您运行 A.py` 时立即发生，因此您然后转到 B.py 并立即遇到 import A。
2.  由于`A`在当前命名空间中具有不同的名称，它会再次被导入（要验证这一点，请在上面添加-`print __name__`您会看到出现两个不同的名称）。`import B``A.py`
3.  当`A`被导入时`B`，它会带来`__global__ = 'not seen yet'`声明，因此当您说 时`self.glo = A.__global__`，您将获得该变量（而不是修改后的变量，因为该特定代码不会在*此*版本中执行`A`）。
4.  与`A.Data.__var__`- 您尚未`init`在此模块中运行相同（因为它不是您的 'main' `A`），因此尚未修改任何内容。
5.  根据上述内容，您可以看到原因`A.__global__`并且`A.Data.__var__`还会显示“尚未看到” - 它们尚未修改并且与上面的变量相同。
6.  您`A`在该`__main__`部分中的代码正常执行，因为它在该模块版本上运行，该版本确实经过了您指定的所有初始化。

# php - 有哪些使用 throw、try 和 catch 处理异常的简单示例？我对这些都没有扎实的了解

> ID：14207427
> 
> 赞同：-1
> 
> 时间：2013-01-08T02:43:01.663
> 
> 标签：php, exception, try-catch, throw

所以我已经阅读了 php.net 上的所有示例。他们的任何一个例子都没有真正让我印象深刻。我知道异常用于什么，只是不知道如何在我的代码中正确使用 throw、try 和 catch。另外，我想知道这是否仅用于OOP？或者只是任何 PHP 代码？我不知道如何处理“抛出新异常”。我所知道的是代码进入 try 块，如果发生任何错误，catch 应该处理错误。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:58:18.380

使用伪代码，因为这不仅仅在 PHP 中有用。

有时方法会遇到他们无法（或不想）处理的问题。假设我们有一个`sendExDrunkenText($ex)`方法。这期待一个`$ex`争论，并会查找那个前女友并向他们发送一条漫无边际的短信。

如果此方法找不到`$ex`提供的返回 false 或类似方法的替代方法，则抛出某种异常：

```
if(! exExists($ex)){
    throw NoSuchExException("Cant't find supplied ex");
} 
```

（作为预编译语言的旁白——即java——您可以要求调用您的方法的方法处理或重新抛出您的异常。因此，imo异常在这些语言中更有用）。

现在，如果您使用上述方法，如果抛出异常，您可能需要采取一些措施。在这种情况下，您可以捕获异常并适当地处理它：

```
foreach($exList as $ex){
    try{
          sendExDrunkenText($ex);
    }catch(NoSuchExException $exception){
        removeFromAddressBook($ex);
    }

} 
```

希望这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:48:36.370

当您因为出现问题而想要停止执行时，请抛出错误（而不是 die() 或继续执行但结果不可预测）。

即使抛出的异常没有被 try catch 块捕获，仍然可以获得堆栈跟踪、行号和文件路径以方便调试。

异常是 PHP 中最好的错误处理机制。它们将帮助您查找并抛出错误以简化调试。

# django - 从 Django 发送文本的最简单方法是什么？

> ID：14207434
> 
> 赞同：0
> 
> 时间：2013-01-08T02:44:08.143
> 
> 标签：django, sms

我正在尝试创建一个能够向用户手机发送短信的应用程序。我总共只会发送大约 500 条短信，所以我不想注册像 Twilio 这样的付费服务。我用谷歌搜索了一下，所有的解决方案都可以追溯到 2008 年，所以我想知道是否有更新和更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:28:22.223

最近调查了一下，我敢肯定，在这种情况下，您绝对必须为所有 SMS 服务（甚至是 Google Voice）付费。一旦你决定了一项服务，可能有一种方法可以在 python 中通用地与它交互，因此也可以在 django 中使用。

# android - 将 ViewPager 与本机片段一起使用

> ID：14207441
> 
> 赞同：7
> 
> 时间：2013-01-08T02:44:32.573
> 
> 标签：android, android-layout, android-fragments, android-support-library

似乎无法找到解决此问题的方法。我正在创建一个使用 Fragments 的 Android 应用程序。到目前为止，我一直在使用本机而不是支持库，因为我将应用程序瞄准 Nexus 7。但是，如果它对开发没有影响，我使用支持库没有问题（我读了一些东西关于没有ActionBar？）。

我的问题是我想要一个填充一半屏幕并显示可滑动标签类型区域的片段。我希望用户能够左右滑动并为每个“页面”显示不同的片段（我知道嵌套片段，但我读到现在支持它们）。基本上，当您在 Top Paid、Top Free 等之间滑动时，我希望它像 Play Store已经写好了。另一件事是，在每个“页面”（例如 Top Free 等）中，我想要有 2 个 ListView。

![粗略描绘我想要实现的目标](../Images/5f8bcb679cbbd3d01387cf1aae909103.png)

然而，ViewPager 组件似乎只是支持库的一部分，我认为这意味着我必须将所有片段更改为支持库。这是实现这种布局的唯一方法吗？必须有更简单的方法；我之前在 Google I/O 视频中看到过名为 Workspace 的东西，所以我认为这是一种非常常见的 UI 设计模式。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-25T19:54:35.703

您可以将 ViewPager 与原生片段一起使用，在[android.support.v13.app](http://developer.android.com/reference/android/support/v13/app/package-summary.html)包中有适用于它的适配器。您需要 v13 支持 jar 才能使用它们。

但是无论如何使用支持片段可能会有优势：[片段还是支持片段？](https://stackoverflow.com/questions/17295497/fragment-or-support-fragment)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-08T02:56:12.823

您需要 ViewPager，并且将您的片段切换到支持库的片段是一个非常容易的转换。

你可能会想要更多的定制:) [http://viewpagerindicator.com/](http://viewpagerindicator.com/)

# drools - DROOLS 中的单线程执行？

> ID：14207447
> 
> 赞同：2
> 
> 时间：2013-01-08T02:44:58.127
> 
> 标签：drools, drools-flow

我的应用程序处理多个请求，但我的知识会话中的规则仅由单线程执行。例如：线程1和线程2以2毫秒的间隔进入知识会话但是线程1执行自己的规则，甚至线程2的规则也由线程1执行。想象一下如果有1000个请求，这意味着每个请求的规则将仅由 1 个线程执行？

在 DROOLS 中有什么方法可以防止这种情况并确保规则由多个线程执行？

下面是我尝试的一个小样本测试：

**Java 类：**

```
 import java.math.BigDecimal;

        import org.drools.KnowledgeBase;
        import org.drools.KnowledgeBaseFactory;
        import org.drools.builder.KnowledgeBuilder;
        import org.drools.builder.KnowledgeBuilderError;
        import org.drools.builder.KnowledgeBuilderErrors;
        import org.drools.builder.KnowledgeBuilderFactory;
        import org.drools.builder.ResourceType;
        import org.drools.io.ResourceFactory;
        import org.drools.runtime.StatefulKnowledgeSession;
import org.drools.runtime.rule.WorkingMemoryEntryPoint;
import org.springframework.context.support.ClassPathXmlApplicationContext;

        public class DJ_Test {

            public static void main(String[] args) {
                try {
                    System.out.println("In main");
                    // load up the knowledge base
                    KnowledgeBase kbase = readKnowledgeBase();
                    final StatefulKnowledgeSession ksession = kbase.newStatefulKnowledgeSession();
                    final WorkingMemoryEntryPoint entry =ksession.getWorkingMemoryEntryPoint("RequestStream");

                    final Object  obj_1= new Object();
                    Thread t1 = new Thread(){
                        public void run(){System.out.println(Thread.currentThread().getName() + " is running");
                        entry.insert(obj_1);
                        ksession.fireAllRules();
                        System.out.println(Thread.currentThread().getName() + " is terminated");
                        }
                        };

                   final Object  obj_2= new Object();
                   Thread t2 = new Thread(){
                    public void run(){
                    try{
                        Thread.sleep(8000); 
                    }catch(Exception e){

                    }
                    System.out.println(Thread.currentThread().getName() + " is running");
                    entry.insert(obj_2);
                    ksession.fireAllRules();
                    System.out.println(Thread.currentThread().getName() + " is terminated");
                    }
                    };
                  t1.start();
                  t2.start();

                } catch (Throwable t) {
                    t.printStackTrace();
                }
            }

            private static KnowledgeBase readKnowledgeBase() throws Exception {
               /* KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();
                kbuilder.add(ResourceFactory.newClassPathResource("rulesFlow.bpmn"), ResourceType.BPMN2);
                kbuilder.add(ResourceFactory.newClassPathResource("KansasSalesTax.drl"), ResourceType.DRL);
                kbuilder.add(ResourceFactory.newClassPathResource("MissouriSalesTax.drl"), ResourceType.DRL);
                kbuilder.add(ResourceFactory.newClassPathResource("SalesTax.drl"), ResourceType.DRL);
                KnowledgeBuilderErrors errors = kbuilder.getErrors();
                if (errors.size() > 0) {
                    for (KnowledgeBuilderError error: errors) {
                        System.err.println(error);
                    }
                    throw new IllegalArgumentException("Could not parse knowledge.");
                }
                KnowledgeBase kbase = KnowledgeBaseFactory.newKnowledgeBase();
                kbase.addKnowledgePackages(kbuilder.getKnowledgePackages());
                return kbase;*/
                ClassPathXmlApplicationContext serviceContext = new ClassPathXmlApplicationContext( "droolsContext.xml" );
                return (KnowledgeBase) serviceContext.getBean("kbase1");
            }

            public static class DJ_Message {

                public static final int thread_1 = 1;
                public static final int thread_2 = 2;

                private String message;

                private int status;

                public String getMessage() {
                    return this.message;
                }

                public void setMessage(String message) {
                    this.message = message;
                }

                public int getStatus() {
                    return this.status;
                }

                public void setStatus(int status) {
                    this.status = status;
                }

            }

        } 
```

**DRL 文件**

```
package com.sample

import com.sample.DroolsTest.Message;

//global CepService cepService;
declare Object
    @role( event )
end

rule "rule_1"
salience 100
    when
        $o : Object() from entry-point RequestStream
    then
        System.out.println( "Rule 1 fired by " + Thread.currentThread().getName() );
        Thread.sleep(5000);

end

rule "rule_2"
salience 80
    when
        $o : Object() from entry-point RequestStream
    then
        System.out.println( "Rule 2 fired by " + Thread.currentThread().getName() );
        Thread.sleep(5000);

end

rule "rule_3"
salience 60
    when
        $o : Object() from entry-point RequestStream
    then
        System.out.println( "Rule 3 fired by " + Thread.currentThread().getName() );
        //cepService.executingThread1();
end

rule "4"
    when
        Message( status == Message.GOODBYE, myMessage : message )
    then
        System.out.println( myMessage );
        //cepService.executingThread2();
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:37:21.340

`StatefulKnowledgeSession`根据[API 文档](http://docs.jboss.org/jbpm/v5.2/javadocs/org/drools/KnowledgeBase.html#getStatefulKnowledgeSessions%28%29)， s 不是线程安全的。如果您绝对需要在多个线程上执行规则，请改用`StatelessKnowledgeSession`s 重新表述您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T07:06:56.787

您可以在多线程环境中使用有状态知识会话。在您的应用程序启动之前，您必须将“KnowledgeBase”序列化为文件/db”。稍后每个线程将不会创建自己的“KnowledgeBase”副本，而是会从“file/db”中反序列化“KnowledgeBase”。

如果我们不序列化/反序列化“KnowledgeBase”，每个线程将在需要时尝试加载规则并创建自己的“KnowledgeBase”，最后在线程增加时，您的应用程序可能最终会抛出“java.lan.OutOfMemory permgen”空间错误。因为每个线程都会尝试通过一次又一次地将类加载到内存中来创建自己的知识库副本。

# asp.net - 如何让我的 web.config 文件远程显示错误？

> ID：14207449
> 
> 赞同：19
> 
> 时间：2013-01-08T02:45:18.567
> 
> 标签：asp.net, web-config

我正在尝试查看我的网站的错误，当我访问该网站时，我收到以下消息：

```
Server Error in '/' Application.

Runtime Error

Description: An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine. 

Details: To enable the details of this specific error message to be viewable on remote machines, please create a <customErrors> tag within a "web.config" configuration file located in the root directory of the current web application. This <customErrors> tag should then have its "mode" attribute set to "Off".

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration>

Notes: The current error page you are seeing can be replaced by a custom error page by modifying the "defaultRedirect" attribute of the application's <customErrors> configuration tag to point to a custom error page URL.

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="RemoteOnly" defaultRedirect="mycustompage.htm"/>
    </system.web>
</configuration> 
```

所以我所做的是在其中创建一个 web.config 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.web>
     <customErrors mode="Off"/>
  </system.web>
</configuration> 
```

但对我来说可悲的是，这真的让杰克变得与众不同。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-11-24T12:29:44.847

试试这个： [CustomErrors mode="Off"](https://stackoverflow.com/questions/101693/customerrors-mode-off)

顺便说一句，asp net 项目模板包含 web.config 文件（它应该在项目的根文件夹中），因此您不必手动创建它。可能是你创造了另一个？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-12-14T18:34:18.660

如果您在本地而不是远程看到错误，请尝试将其添加到 web.config；

```
<system.webServer>
    <httpErrors errorMode="Detailed" />
</system.webServer> 
```

这是 IIS 的一项功能，可以向外部用户隐藏可能损害您网站的内部工作，因此它不是默认设置是有原因的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-17T17:44:39.033

它可能不是IIS！

我在此页面上尝试了这两种解决方案，以及更多。他们都没有解决我们的问题，但它们是值得检查的好东西，会引起问题。所以先检查一下。如果您仍然不放心，并且正在使用 PHP，请检查您的 PHP 设置。

为我解决的问题是编辑我们的**php.ini**文件并指定：

```
display_errors: On 
```

我还设置：

```
display_startup_errors: On 
```

只是为了很好的衡量。

这解决了问题，我们真正的问题原来是在开发阶段迁移过程中遗漏了一个被忽视的逗号。

# .net - 在移植到 windows 的 mac 上编写的 C 代码

> ID：14207453
> 
> 赞同：0
> 
> 时间：2013-01-08T02:45:50.840
> 
> 标签：.net, c

我们有一个用 C 编写的源代码，旨在用于不同的应用程序。我们已经有一个为 mac OSX 编写的应用程序。

现在我们想在 windows 中编写一个应用程序（prolly 使用 c#/.net）并重用相同的库。不确定在 Windows 平台上调用这些 C 函数需要什么。

既然我有源代码，我可以在 Windows 中创建一个 DLL 并在我的 .net 应用程序中通过 p/invoke 使用它吗？

任何指针都是有帮助的。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:52:48.407

P/Invoke 绝对是一种选择。此外，您可以使用 C++/CLI 将本机 C 代码包装到与 CLR 兼容的 .dll 中。

唯一的症结是确保您的 C 源代码没有实现/操作系统特定的代码。

# json - 以 JSON 格式记录 - 标准是多个根元素，为什么？

> ID：14207459
> 
> 赞同：2
> 
> 时间：2013-01-08T02:46:33.280
> 
> 标签：json, apache, node.js, logging, winston

我正在寻找用 JSON 编写日志文件。

在查看了一些用于格式化灵感和最佳实践的库（Node.JS 的 Winston、Apache 的 JSON 日志记录选项等）之后，我注意到几乎所有这些库都编写多个根元素，而不是使用数组或根元素。

例子：

{"time":"2012-09-20T20:27:59Z","level":"info","message":"Hello World"} {"time":"2012-09-20T21:37:59Z" ,"level":"info","message":"Hello Again"}

对比

[{"time":"2012-09-20T20:27:59Z","level":"info","message":"Hello World"},{"time":"2012-09-20T21:37: 59Z","level":"info","message":"Hello Again"}]

为什么在技术上具有多个根元素的 JSON 无效时会这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T02:50:41.767

记录时，您会不断添加新的日志条目。你怎么知道什么时候关闭数组？您的日志记录何时“完成”？你可以用一个空数组开始日志`[]`，但是当添加一个条目时，你必须继续在文件中寻找正确的位置，并检查是否需要逗号。

或者您只需将每个条目写为一个单独的根对象，每次您写出一些内容时，它都是独立的并附加到文件的末尾。这要简单得多。

日志不是单个 JSON 对象，即整个日志没有形成有效的 JSON 字符串。它是一系列独立的 JSON 对象。各个条目是您应该考虑的单位，而不是整个日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:52:35.007

因为日志每秒都在增加。

如果没有 Root 元素，新日志只能附加旧项目。如果有一个根元素，或者在一个数组中，你必须查询新的日志项，并附加它。

所以，你有正确的选择。

# ios - 将 NSStrings 添加到一起舍入问题

> ID：14207461
> 
> 赞同：-2
> 
> 时间：2013-01-08T02:47:08.683
> 
> 标签：ios, objective-c, xcode, nsstring

我有一个简单的应用程序，我试图将两个 NSStrings 添加在一起并在标签中生成值。

```
NSString *one= @"0.00";
NSString *two= @"20.15";

NSString *total = [[NSString alloc]  initWithFormat:@"%d",[one integerValue] + [two integerValue]];

label.text = [NSString stringWithFormat:@"%@",total]; 
```

这很好用，除了我希望它考虑小数点后的数字。输出变为 20 而不是 20.15。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T02:52:02.343

使用浮点数而不是整数

```
NSString *total = [[NSString alloc]  initWithFormat:@"%f",[one floatValue] + [two floatValue]]; 
```

如果要指定 2 位小数，请替换`%f`为`%.2f`

请注意，在您的示例中`[two integerValue]`评估为。`20`从那时起，您将失去小数精度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T02:53:45.943

找到 的`floatValue`而`NSString`不是`intValue`。整数是整数，因此小数点后的任何内容都将被忽略。

```
NSString *one= @"0.00";
NSString *two= @"20.15";

NSString *total = [NSString stringWithFormat:@"%f", [one floatValue] + [two floatValue]];

label.text = total; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T02:53:28.793

整数没有小数。

尝试：

```
NSString *total = [NSString stringWithFormat:@"%f", [one floatValue] + [two floatValue]]; 
```

# c# - 如何读取 PICT 图像文件的宽度和高度？

> ID：14207467
> 
> 赞同：0
> 
> 时间：2013-01-08T02:48:02.910
> 
> 标签：c#, .net, mono

给定一个 PICT 图像文件（文件格式的任一版本），我如何从标题数据中读取宽度和高度？

例如，这是我为 GIF 文件确定此信息的方式：

```
using (FileStream fs = new FileStream(fileName, FileMode.Open, FileAccess.Read)) {
    int c1 = fs.ReadByte();
    int c2 = fs.ReadByte();
    int c3 = fs.ReadByte();

    if (c1 == 'G' && c2 == 'I' && c3 == 'F') {
        fs.Seek(3, SeekOrigin.Current);
        width = ReadInt(fs, 2, false);
        height = ReadInt(fs, 2, false);
        return true;
    }
}

// Signature for ReadInt:
// int ReadInt(FileStream fs, int bytes, bool bigEndian) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T04:47:32.573

我相信您会发现 PICT 文件有一个 512 字节的标头，后跟文件大小和图像尺寸。

```
[Platform Header] - 512 byte
[File Size] - short
[Image Top Left x] - short
[Image Top Left y] - short
[Image Bottom Right x] - short
[Image Bottom Right y] - short 
```

坐标以 72 dpi 存储。

知道了这一点，你就可以计算出图像的高度和宽度了：）

# java - 一句话检查HashMap中的key是否存在

> ID：14207470
> 
> 赞同：1
> 
> 时间：2013-01-08T02:48:17.730
> 
> 标签：java, hashmap

我有一个 HashMap 存储 <city, state> 对，其中城市是键，状态是值。现在城市名称可能是多个单词，例如“新德里”。现在有很多句子可能包含也可能不包含城市名称。我想为他们每个人检查一下。

一种方法是继续扫描 HashMap 并检查每个键是否存在于句子中。但是，如果 HashMap 包含数百万个条目，那将是一种非常低效的方法。

所以我正在寻找是否有任何有效的方法来做同样的事情。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:01:04.770

1、将句子拆分为单词，将城市名称拆分为单词，您可以通过哈希检查它们。

2、算法思路：

AC FSM，你可以用一个句子匹配多个字符串，只需一次。

后缀树，还有一个算法。

我认为两者相似。您可以选择一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:46:57.240

尝试

```
 TreeMap<String, String> map = new TreeMap<>();
    map.put("Delhi", "State");
    map.put("New Delhi", "State");
    map.put("New York", "State");
    String[] a = map.keySet().toArray(new String[0]);
    Set<String> found = new HashSet<>();

    Scanner s = new Scanner("First is Delhi, next is New Delhi");
    s.useDelimiter("[ .,\n\t\r]");
    String prev = "";    // previous word
    while (s.hasNext()) {
        String n = s.next();
        if (!prev.isEmpty()) {
            n = prev + n;
        }
        int i = Arrays.binarySearch(a, n);
        if (i >= 0) {
            found.add(n);
            prev = "";
        } else {
            i = -i - 1;
            if (i < a.length && a[i].startsWith(n)) {
                prev = n + " ";
            } else {
                prev = "";
            }
        }
    }
    System.out.println(found); 
```

输出

```
[New Delhi, Delhi] 
```

也许它有一些错误，但想法是使用排序的字符串数组（城市）和 Arrays.binarySearch 快速找到插入位置并检查元素（城市）是否以当前单词开头。

# ios - Appstore 中的应用程序（使用 iOS 5 提交）适用于 iOS 6，但在调试时不适用

> ID：14207474
> 
> 赞同：2
> 
> 时间：2013-01-08T02:48:27.903
> 
> 标签：ios, app-store

我们创建一个应用程序（在 iOS 5 中）并上传到 Appstore。之后，Apple 发布了 iOS 6，我的应用程序在 iOS 6 中仍然运行良好。但是，当我使用我的旧代码（在我的笔记本电脑中）构建（目标是 iOS 5）并在 iOS 6 中运行时，一个功能不起作用。我调试并发现这是因为方向api更改。

我的客户担心为什么 Appstore 中的应用程序可以在 iOS 6 上正常工作，但我们的应用程序却不能（尽管代码相似）。我不知道如何解释这个问题，因为他们需要参考。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:57:55.757

您的基础 SDK 很可能是构建目标指定为 iOS 5 的 6.0 SDK。“基础 SDK”和“构建目标”是两个不同的东西。

在这种情况下，可以将 SDK 视为操作系统和您的应用程序之间的一层。看起来 6.0 SDK 对您的行为与 5.0 SDK 不同。这可能会发生，并且可能不必对下面的操作系统做任何事情。

最有可能的是，您会发现使用新的 SDK，您的应用程序不仅会在 iOS 6 上失败，而且在 iOS 5 上也会失败。因此，随着时间的推移，您应该使用 6.0 SDK 解决问题。

但是，这与您当前在 App Store 上可用的版本无关。

# c++ - 在 boost::filesystem::path 中使用 boost::algorithm

> ID：14207475
> 
> 赞同：0
> 
> 时间：2013-01-08T02:48:29.210
> 
> 标签：c++, boost, c++11

**问题 1：**我想删除`file://`a 中 URI 的“”部分`boost::filesyetem::path`而不转换为`std::string`第一个。可以用`boost::algorithm::replace_first`算法写这个吗？

我尝试了以下但它没有编译。

```
std::string s("file://"), empty("");
boost::filesystem::path path = oldPath.generic_string();
boost::algorithm::replace_first(path.generic_string(), s, empty); 
```

编译错误：

```
cannot convert parameter 2 from 'std::_String_const_iterator<std::_String_val<std::_Simple_types<char>>>' to 'std::_String_iterator<std::_String_val<std::_Simple_types<char>>>' 
```

**问题2：**`boost::algorithm` s 除了应用于字符串还有什么用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:54:56.113

A`boost::filesystem::path`不是*字符*数组。您不能迭代 a 中的字符`path`，也不能假设包含的字符串采用*任何特定*编码。`path`将 a存储为 a是完全合法的`std::vector<SomeStringType>`，其中向量的每个元素都是路径的一个元素。

总之，`path`不是字符容器；这是一个特殊的对象。如果您需要将路径信息存储在字符容器中，则需要将其转换为这样的容器。

# c# - 使用 C# 连接到 WiFi

> ID：14207477
> 
> 赞同：0
> 
> 时间：2013-01-08T02:48:32.937
> 
> 标签：c#, android, wifi

我将开发一个通过**WiFi**连接安卓设备的应用程序。但是我的**电脑没有wifi**设施。他们是否有任何程序可以在**不使用 PC 上的 WiFi 适配器的情况下**模拟 wifi 连接？（但我有 LAN 连接）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:58:25.187

我认为您将在您的 c# 代码中使用套接字...他们不知道/不在乎您是使用电缆还是 wifi 连接到网络...这只是另一个以太网接口

也许您的意思是您想模拟“较慢/不稳定”的连接？

在任何情况下，在某些时候，您将定义一个通信协议，您将在 TCP/IP（或 UDP/IP）之上使用，以便在 PC 和 Android 设备之间进行通信，这就是您想要模拟的内容和测试。

*   您可以创建 Android 应用程序的 PC 版本，通过 localhost (127.0.0.1) 连接到它
*   您可以启动 Android 调试器，设置网络并连接到它
*   您可以在虚拟机（vmware、virtualbox 等）中运行 Android[将 Android 用于 x86](http://www.android-x86.org/)
*   如果您的 Android 设备有以太网接口，请将其连接到您的网络并不时将其置于飞行模式以模拟通信中断（wifi 断开连接）

所有这些解决方案都允许您在没有 wifi 设备的情况下模拟通信

# html - 如果没有 HTML/CSS 的专业知识，我可以使用什么来免费创建类似 web 2.0 的网站？

> ID：14207479
> 
> 赞同：0
> 
> 时间：2013-01-08T02:48:39.200
> 
> 标签：html, css, web-applications

如果没有 HTML/CSS 的专业知识，我可以使用什么来免费创建类似 web 2.0 的网站？我不知道如何创建具有专业外观的图标、平滑效果、边框、阴影等。

是否有 WYSIWIG 编辑器、Web 服务或其他资源可以用来在相对较短的时间内将某些东西组合在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:51:25.630

您可以试用 Webnode (http://www.webnode.com)。那里有一些，但这是我使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:55:58.653

[Squarespace](http://www.squarespace.com/)是我最常听到网络专业人士提到的一个。如果您访问他们的网站，您会发现他们在 web 2.0 美学方面非常出色。这可能也是我推荐的服务。

否则[Weebly](http://www.weebly.com/)也很受欢迎，我相信谷歌搜索可以带来更多。

# javascript - 中心窗口。在表单提交时打开

> ID：14207482
> 
> 赞同：1
> 
> 时间：2013-01-08T02:48:50.800
> 
> 标签：javascript, window.open

我的代码如下所示：

```
<script type="text/javascript">
      function directions(sacred) {
        var x = screen.width / 2 - 700 / 2;
        var y = screen.height / 2 - 450 / 2;
        window.open(sacred.action, 'Directions', 'height=485,width=700,left=' + x + ',top=' + y);
        return false;
      }
</script>

<form action="http://maps.google.com/maps" method="get" target="Directions"
      onsubmit="return directions(sacred);"> 
```

我不懂js，所以如果看起来很草率，请放心。

我可以让它正常工作：

```
<form action="http://maps.google.com/maps" method="get" target="Directions"
    onsubmit="Directions=window.open('about:blank','Directions','width=600,height=400');"> 
```

一旦我尝试连接`onsubmit`到上面的脚本，我就迷路了。我什至不知道上面的功能是否可靠。

我在这里打开了引擎盖：[jsFiddle](http://jsfiddle.net/jamesfinn/Dds3W/2/)

问题是表单提交到新选项卡中，并`window.open`完全忽略。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:01:20.650

试试这个：http: [//jsfiddle.net/333Qy/1/](http://jsfiddle.net/333Qy/1/)

```
<script>
  function directions(sacred) {
  var x = screen.width / 2 - 700 / 2;
  var y = screen.height / 2 - 450 / 2;
  console.info(sacred);
  window.open(sacred.action, 'Directions', 'height=485,width=700,left=' + x + ',top=' + y);
  return false;
}
</script>
<p>
  <form action="http://maps.google.com/maps" method="get" target="Directions"
  onsubmit="directions(this);">
    <input class="directions-input" id="saddr" name="saddr" type="text" placeholder="enter zip-code"
    value="enter zip-code" onfocus="this.value = this.value=='enter zip-code'?'':this.value;"
    onblur="this.value = this.value==''?'enter zip-code':this.value;" />
    <input type="submit" class="directions-submit" />
    <input type="hidden" name="daddr" value="210+East+Northampton+Street,+Bath,+PA"
    />
    <input type="hidden" name="hl" value="en" />
  </form>
</p> 
```

onsubmit 应该是一个函数调用。此外，神圣是未定义的。我已经在上面的代码中进行了更改

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T03:16:35.250

```
<form action="http://maps.google.com/maps" method="get" target="Directions"
      onsubmit="Directions=window.open('about:blank','Directions','width=600,height=400,left={left},top={top}'.replace('{left}', screen.width/2-700/2).replace('{top}', screen.height/2-450/2));">..</form> 
```

我不知道为什么，但我并不总是工作。
[http://jsfiddle.net/greatghoul/MCRAG/embedded/result/](http://jsfiddle.net/greatghoul/MCRAG/embedded/result/)

代码在这里。

[http://jsfiddle.net/greatghoul/MCRAG/](http://jsfiddle.net/greatghoul/MCRAG/)

# ios - 访问文本字段时从其他线程获取锁的警告

> ID：14207483
> 
> 赞同：0
> 
> 时间：2013-01-08T02:48:55.107
> 
> 标签：ios, objective-c, multithreading, cocoa-touch, uitextfield

我有一个`UITextField`named `_passwordTextField`，我在其中隐藏输入：

```
[_passwordTextField  setSecureTextEntry:YES]; 
```

每次我使用 访问该字段的文本时`passwordTextField.text`，都会看到以下警告：

> void _WebThreadLockFromAnyThread(bool), 0x9077460：从主线程或web线程以外的线程获取web lock。不应从辅助线程调用 UIKit。

如何删除此警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T02:52:47.193

这与`UITextField`. iOS`UIKit`要求对 UI 的任何直接操作都在主线程上完成，而不是在后台线程上完成。

如果您这样做，您的应用程序将不稳定，在某些情况下甚至可能崩溃。所以作为**一项规则，不要从后台线程更新 UIKit 元素。**请检查您的代码。

如果您使用的是 iOS >= 4，则可以使用[GCD](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)代替：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self doSomething:1 b:2 c:3 d:4 e:5]; //changes UI method
}); 
```

**更新：**请再次检查您的代码。在处理线程问题时，您需要观察的不是出现此警告的哪一行，而是需要完整查看。查看是从主线程还是后台线程调用整个方法..

# android - 如何在 Android 上使用 FaceDetector.Face 进行人脸识别

> ID：14207485
> 
> 赞同：7
> 
> 时间：2013-01-08T02:48:55.807
> 
> 标签：android, face-detection, javacv, face-recognition

这是我在这里的第一篇文章，如果我的问题不清楚或没有提供足够的信息，我很抱歉。

我目前正在开发一个可以从图片中识别人脸的 Android 应用程序。

我的第一种方法是使用 JavaCV，一切正常，除了面部检测需要太多时间才能完成！

之后，我尝试使用 FaceDetector.Face 来检测人脸。然后我使用检测到的人脸来训练我的人脸识别器模型。目前没有发现错误。

我的问题是我的模型无法识别 FaceDetector.Face 给出的任何检测到的人脸。我总是从预测函数中得到-1。谁能告诉我可能出了什么问题？先感谢您！

这是我在检测后裁剪人脸的方式：

```
 for(int count=0;count<NUMBER_OF_FACE_DETECTED;count++)
    {
        Face face=detectedFaces[count];
        PointF midPoint=new PointF();
        face.getMidPoint(midPoint);         
        eyeDistance=face.eyesDistance();

        left = midPoint.x - (float)(1.4 * eyeDistance);
        top = midPoint.y - (float)(1.8 * eyeDistance);

        bmFace = Bitmap.createBitmap(origiImage, (int) left, (int) top, (int) (2.8 * eyeDistance), (int) (3.6 * eyeDistance));          
        bmFaces.add(bmFace);
    } 
```

这是训练模型的主要部分。

```
 MatVector images = new MatVector(imageFiles.length);            
    int[] labels = new int[imageFiles.length];

    IplImage img;
    IplImage grayImage;
    FaceRecognizer faceRecognizer = createLBPHFaceRecognizer(1, 8, 8, 8, binaryTreshold);
    try
    {          
        FileInputStream fstream = new FileInputStream(working_Dir.getAbsolutePath()+"/csv.txt");
        BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
        String imgInfo;

        for (int i = 0; (imgInfo = br.readLine()) != null; i++)  
        {
            String info[] = imgInfo.split(";");

            String imagePath = info[0];             
            img = cvLoadImage(imagePath);
            grayImage = IplImage.create(img.width(),img.height(), IPL_DEPTH_8U, 1);
            cvCvtColor(img, grayImage, CV_BGR2GRAY);
            images.put(i, grayImage);
            labels[i] = Integer.parseInt(info[1]);;
        }
        in.close();

        //train the FaceRecognizer model         
        faceRecognizer.train(images, labels);
    }catch (Exception e)
    {
        System.err.println("Error: " + e.getMessage());
    } 
```

最后我用下面的代码识别人脸：

```
 public static String identifyFace(IplImage grayImg)
{
    String predictedName = "";

    //identify face from the image
    int predictedLabel = faceRecognizer.predict(grayImg);

    if(predictedLabel != -1 )
    {
        predictedName = new String(idToName.get(predictedLabel));
    }
    return predictedName;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:25:24.030

仅当您没有正确设置阈值时才会发生这种情况，请参阅文档：

*   [http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_api.html#createlbphfacerecognizer](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_api.html#createlbphfacerecognizer)

创建一个的方法`LBPHFaceRecognizer`是：

```
Ptr<FaceRecognizer> createLBPHFaceRecognizer(int radius=1, int neighbors=8, int grid_x=8, int grid_y=8, double threshold=DBL_MAX) 
```

， 在哪里：

*   threshold – 预测中应用的阈值。如果到最近邻居的距离大于阈值，则此方法返回 -1。

因此，在您看到的上述方法签名中，阈值`DBL_MAX`默认设置为。因此，如果您只是将阈值排除在外，那么它将永远不会屈服`-1`。另一方面，如果您将阈值设置得太低，FaceRecognizer 总是会屈服`-1`。也就是说，请检查您`binaryTreshold`在代码中设置的内容。为您的数据找到合适的决策阈值是一个经典的优化问题，您必须根据给定的标准（例如基于错误接受率/错误拒绝率）优化最佳阈值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-19T05:53:46.993

我知道这真的很晚了，但是尝试使用 JavaCV 的 Haar 级联分类器而不是 Android 本身的 facedetector

# c# - 获取所有应用程序的列表

> ID：14207487
> 
> 赞同：9
> 
> 时间：2013-01-08T02:49:29.787
> 
> 标签：c#, process

我正在尝试获取所有打开的应用程序的列表。具体来说，如果您打开任务管理器并转到应用程序选项卡，该列表。

我试过使用这样的东西：

```
foreach (var p in Process.GetProcesses())
{
    try
    {
        if (!String.IsNullOrEmpty(p.MainWindowTitle))
        {
            sb.Append("\r\n");
            sb.Append("Window title: " + p.MainWindowTitle.ToString());
            sb.Append("\r\n");
        }
    }
    catch
    {
    }
} 
```

就像我发现的几个例子一样，但这并没有为我拉出所有的应用程序。它只抓取了我在任务管理器中可以看到的或者我知道我已经打开的大约一半。例如，由于某种原因，此方法不支持 Notepad++ 或 Skype，但支持谷歌浏览器、计算器和 Microsoft Word。

有谁知道为什么这不能正常工作或如何这样做？

另外，一位朋友建议这可能是权限问题，但我以管理员身份运行 Visual Studio，并且它没有改变。

编辑：我遇到的问题是，我得到的大多数解决方案只是返回一个所有进程的列表，这不是我想要的。我只想要打开的应用程序或窗口，例如任务管理器上显示的列表。不是每个进程的列表。

另外，我知道这里有错误的代码，包括空的 catch 块。这是一个一次性项目，只是为了首先弄清楚它是如何工作的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-27T12:49:37.907

[这里](http://pinvoke.net/default.aspx/user32.EnumDesktopWindows)的代码示例似乎给出了您的要求。修改版：

```
public class DesktopWindow
{
    public IntPtr Handle { get; set; }
    public string Title { get; set; }
    public bool IsVisible { get; set; }
}

public class User32Helper
{
    public delegate bool EnumDelegate(IntPtr hWnd, int lParam);

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool IsWindowVisible(IntPtr hWnd);

    [DllImport("user32.dll", EntryPoint = "GetWindowText",
        ExactSpelling = false, CharSet = CharSet.Auto, SetLastError = true)]
    public static extern int GetWindowText(IntPtr hWnd, StringBuilder lpWindowText, int nMaxCount);

    [DllImport("user32.dll", EntryPoint = "EnumDesktopWindows",
        ExactSpelling = false, CharSet = CharSet.Auto, SetLastError = true)]
    public static extern bool EnumDesktopWindows(IntPtr hDesktop, EnumDelegate lpEnumCallbackFunction,
        IntPtr lParam);

    public static List<DesktopWindow> GetDesktopWindows()
    {
        var collection = new List<DesktopWindow>();
        EnumDelegate filter = delegate(IntPtr hWnd, int lParam)
        {
            var result = new StringBuilder(255);
            GetWindowText(hWnd, result, result.Capacity + 1);
            string title = result.ToString();

            var isVisible = !string.IsNullOrEmpty(title) && IsWindowVisible(hWnd);

            collection.Add(new DesktopWindow { Handle = hWnd, Title = title, IsVisible = isVisible });

            return true;
        };

        EnumDesktopWindows(IntPtr.Zero, filter, IntPtr.Zero);
        return collection;
    }
} 
```

使用上面的代码，调用`User32Helper.GetDesktopWindows()`应该给你一个包含所有打开的应用程序的句柄/标题的列表，以及它们是否可见。请注意，`true`无论窗口的可见性如何，都会返回，因为该项目仍会按照作者的要求显示在任务管理器的应用程序列表中。

然后，您可以使用集合中某个项目的相应 Handle 属性来使用其他[窗口函数](https://msdn.microsoft.com/en-us/library/windows/desktop/ff468919(v=vs.85).aspx)（例如[ShowWindow](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633548(v=vs.85).aspx)或[EndTask](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633492(v=vs.85).aspx)）执行许多其他任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T02:57:56.723

正如马修指出的那样，这可能是因为它们没有主要标题，因此您将它们过滤掉了。下面的代码让所有进程运行。然后，您可以使用它`Process.ProcessName`来过滤掉您不想要的那个。[这](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.processname.aspx)是有关使用 ProcessName 的文档。

```
using System.Diagnostics;

Process[] processes = Process.GetProcesses();

foreach (Process process in processes)
{
   //Get whatever attribute for process
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T03:02:48.847

我认为，出于某种原因，某些进程的 MainWindowTitle 为空，因此您正在跳过这些进程。试试这个只是为了测试：

```
foreach (var p in Process.GetProcesses())
{
     sb.Append("\r\n");
     sb.Append("Process Name: " + p.ProcessName);
     sb.Append("\r\n");
} 
```

如果你的 try...catch 出现错误，可能会跳过一些进程，所以也可以尝试不使用它。

**更新：** 试试这个，它很难看，并采取一些没有窗口的进程，但也许你可以过滤..

```
var proc = new Process()
{
    StartInfo = new ProcessStartInfo
    {
        FileName = "tasklist",
        Arguments = "/V",
        UseShellExecute = false,
        RedirectStandardOutput = true,
        CreateNoWindow = true
    }
};
proc.Start();
StreamReader sr = proc.StandardOutput;
while (!sr.EndOfStream)
{
    string line = sr.ReadLine();
    Match m = Regex.Match(line, @".{52}(\d+).{94}(.+)$");//157
    if (m.Success)
    {
        int session = Convert.ToInt32(m.Groups[1].Value);
        string title = m.Groups[2].Value.Trim();
        if (session == 1 && title != "N/A") sb.AppendLine(title);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T02:58:27.440

你可以试试像这样的克里斯

//下面的更新将为您提供在应用程序选项卡中运行的所有进程

```
Process[] myProcesses = Process.GetProcesses();

foreach (Process P in myProcesses)
{
    if (P.MainWindowTitle.Length > 1)
    {
        Console.WriteLine(P.ProcessName + ".exe");
        Console.WriteLine(" " + P.MainWindowTitle);
        Console.WriteLine("");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T02:59:20.350

正如其他人所说，这是因为某些应用程序（Notepad++ 就是其中之一）没有 MainWindowTitle，为了解决这个问题，我的代码（例如）如下所示：

```
Process[] processes = Process.GetProcesses();

foreach (Process pro in processes)
{
    if (pro.MainWindowTitle != "")
    {
        listBox.Items.Add(pro.ProcessName + " - " + pro.MainWindowTitle);
    }
    else
    {
        listBox.Items.Add(pro.ProcessName);
    }
} 
```

# sql-server - 经典的asp嵌套循环sql查询为什么会出现以下情况

> ID：14207488
> 
> 赞同：0
> 
> 时间：2013-01-08T02:49:35.653
> 
> 标签：sql-server, asp-classic, ado

我现在很困惑，如果有人可以在这里帮助我，我会很高兴我希望从 table1 中选择的值与 table2 的值一起显示，但不是只为 sql2 获取 3 条记录，table2 的输出给了我相同的 3 条记录.

如果我在 sql 分析器中输入这两个查询，它工作正常。目标是使用经典的 asp 在 3 行，一个循环中获取 sql1 和 sql1 的输出：

```
line1 rs("firstname") & space(1) & rs("boss")
line2 rs("firstname") & space(1) & rs("boss")
line3 rs("firstname") & space(1) & rs("boss") 
```

程序：我首先必须在（sql2）之后进行查询（sql1），这取决于sql1的结果

```
table1
id| |user| |firstname| |lastname| |acc|
1    user1   firstname1  lastname1 loc1
2    user2   firstname2  lastname2 loc2
3    user3   firstname3  lastname3 loc3
4    user4   firstname4  lastname4 loc1
5    user5   firstname5  lastname5 loc1

table2
id| |boss| |first_name| |username|
1     boss1  boss1email   user1 
2     boss2  boss2email   user2 
2     boss3  boss3email   user3
2     boss4  boss4email   user4
2     boss5  boss5email   user5

sql="select * from table1 where acc='loc1'"
Set rs=dbcon.Execute(sql)
do until rs.EOF
Response.Write rs("firstname")

Set rs1 = server.CreateObject ("adodb.recordset")
sql2="Select * from table2 where username='user1'"
set rs1=dbcon.execute(sql2)
do until rs1.eof

response.write rs1("boss")

rs1.movenext
loop

rs.movenext
loop< 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:45:30.383

我已经使用了视图函数并保存了它并使用asp调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:38:45.797

似乎在你的代码中你需要在这一行替换

```
sql2="Select * from table2 where username='user1'" 
```

带有某种对 rs("username") 的引用的 'user1'。使用您拥有的代码，您将从 table2 中为 table1 的每条记录获得相同的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T03:01:05.633

为什么不：

```
SELECT t1.firstname, t2.boss FROM table1 t1
JOIN table2 t2 on t1.user = t2.username
WHERE t1.acc ="loc1" 
```

# ruby - 如何编写这个解析更多 Ruby 惯用语的字符串？

> ID：14207489
> 
> 赞同：-2
> 
> 时间：2013-01-08T02:50:07.467
> 
> 标签：ruby

我正在解析简单的字符串输入，例如：“Hello world！:-)”并将它们转换为一个数组，该数组拆分单词并可能进行一些修改。我已经生成了以下有效的代码，但它似乎不是非常 Ruby 惯用的。我该如何改进它？

```
$mapping = Hash[
  "X" => "CODE_X",
  "Y" => "CODE_Y",
  "Z" => "CODE_Z",
]

def translate(input)
  result = []
  tmp = ""
  input.each_char do |c|
    if $mapping.has_key?(c)
      if result != ""
        result << "normal " + tmp
        tmp = ""
      end
      result << "special " + $mapping[c]
    else
      tmp += c
    end
  end
  if tmp != ""
    result << "normal " + tmp
  end
  return result
end 
```

它似乎包含不必要的许多行，使其难以阅读。它有什么作用，也许一个例子有帮助：

```
translate("HelloXworldYZ") =>
["normal Hello", "special CODE_X", "normal world", "special CODE_Y", "special CODE_Z"] 
```

或者用英语：按字符解析字符串并再次连接字符。将它们作为“普通”+字符串添加到结果数组中，直到（1）没有更多字符或（2）有特殊字符（映射），他们将字符串添加到数组中并将特殊字符添加为“特殊” + 映射并继续字符串的其余部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:35:08.877

怎么样

```
$mapping = { 'X' => 'CODE_X', 'Y' => 'CODE_Y', 'Z' => 'CODE_Z' }

def translate(input)
  input.
    split(/([#{$mapping.keys.map(&Regexp.method(:escape)).join}])/).
    each_slice(2).
    map {|normal, special| [unless normal.empty? then "normal #{normal}" end, "special #{$mapping[special]}"] }.
    map(&:compact).
    flatten
end

translate("HelloXworldYZ")
# => ["normal Hello", "special CODE_X", "normal world", "special CODE_Y", "special CODE_Z"] 
```

请注意，您的简单英文描述和您的测试用例不匹配。根据您简单的英文描述，结果应该是`["normal Hello", "special CODE_X", "normal world", "special CODE_Y", "normal", "special CODE_Z"]`. 在这种情况下，它甚至更简单：

```
$mapping = { 'X' => 'CODE_X', 'Y' => 'CODE_Y', 'Z' => 'CODE_Z' }

def translate(input)
  input.
    split(/([#{$mapping.keys.map(&Regexp.method(:escape)).join}])/).
    each_slice(2).
    map {|normal, special| [['normal', unless normal.empty? then normal end].compact.join(' '), "special #{$mapping[special]}"] }.
    flatten
end

translate("HelloXworldYZ")
# => ["normal Hello", "special CODE_X", "normal world", "special CODE_Y", "normal", "special CODE_Z"] 
```

但是`strscan`图书馆可能是更好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T03:38:59.303

```
def translate(input,map)
  input.split(/([#{Regexp.escape map.keys.join}])/).map do |part|
    map.key?(part) ? "special #{map[part]}" : "normal #{part}" unless part.empty?
  end.compact
end

p translate( "HelloXworldYZ", 'X'=>'CODE_X', 'Y'=>'CODE_Y', 'Z'=>'CODE_Z' )
#=> ["normal Hello", "special CODE_X", "normal world", "special CODE_Y", "special CODE_Z"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T03:46:39.500

```
$mapping = Hash[
  "x" => "CODE_X",
  "y" => "CODE_Y",
  "z" => "CODE_Z",
]

def translate(input)
  $mapping.keys.each { |char| input.gsub!(char, "___#{char}___") } 
  array = input.split(/(___.___)/)
  result = []

  array.each do |word|
    if word.match /___.___/
      result << "special #{$mapping[word[3]]}"
    else
      result << "normal #{word}" unless word.empty?
    end
  end
  result
end

translate("Helloxworldyz")
#=> ["normal Hello", "special CODE_X", "normal world", "special CODE_Y", "special CODE_Z"] 
```

# java - Android - SQLite - 在 Date1 和 Date2 之间选择

> ID：14207494
> 
> 赞同：3
> 
> 时间：2013-01-08T02:50:40.600
> 
> 标签：java, android, sqlite, date, android-sqlite

Mac OS-X

安卓

带有 ADT 的 Eclipse

SQLite

我是创建 Android 应用程序的新手，我对此进行了大量研究，但我一无所获。我需要查询我的 SQLite 数据库以返回两个日期之间的所有行。到目前为止，我从研究中了解到，Androids SQLite 数据库中没有 DateTime 列，我必须将其保存为文本列。但我认为问题在于尝试比较字符串，但我无法找到解决方法。这是我的代码：

```
DB = currentContext.openOrCreateDatabase(DBName, 0, null);
DB.execSQL("CREATE TABLE IF NOT EXISTS " + tableName + " (ID INTEGER PRIMARY KEY AUTOINCREMENT, Date VARCHAR(40), Hours INT(3));"); 
```

我没有收到任何错误，但我没有从我的 RawQuery 返回任何结果。这是我的代码：

```
Cursor c = newDB.rawQuery("select ID, Date, Hours from " + tableName + " where Date BETWEEN '" + date1 + " 00:00:00' AND '" + date2 + " 99:99:99'", null);

if (c != null ) {
  Log.d(TAG, "date1: "+date1);
  Log.d(TAG, "date2: "+date2);
  if  (c.moveToFirst()) {
     do {
        int id = c.getInt(c.getColumnIndex("ID"));
        String date1 = c.getString(c.getColumnIndex("Date"));
        int hours1 = c.getInt(c.getColumnIndex("Hours"));
        results.add(+ id + "    Date: " + date1 + "    Hours: " + hours1);
     }
         while (c.moveToNext());
      }
} 
```

我也尝试了以下语句，但它们也没有产生结果：

```
Cursor c = newDB.rawQuery("select ID, Date, Hours from " + tableName + " where Date BETWEEN " + Date(date1) + " AND " + Date(date2) + "", null); 
```

我从其他 StackOverflow 答案中得到了这个声明，但我找不到关于 date() 方法的任何文档。我不确定它现在是否已过时，但我收到错误消息“类型（类名）的日期（字符串）方法未定义”并且我尝试导入一些 JAVA 库。

有谁知道创建 rawData() 查询的正确方法，该查询将获取所选日期之间的行？

更多信息，这些是我的 INSERT 语句和进入数据库的日期格式：

```
newDB.execSQL("INSERT INTO " + tableName + " (Date, Hours) Values ('" + ph_date + "'," + hours + ");");
String date1 = "12/1/13"
String date2 = "25/1/13" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T01:27:53.890

好的，所以我无法让字符串日期工作，所以我必须在将它们添加到 SQLite 数据库之前将字符串日期转换为日历日期到 Unix 时间，并在显示它们时将它们转换回来（Unix 时间到日历日期到字符串）。Unix Time 允许在日期列上进行计算（排序、升序、介于等），这是经过长时间反复试验后使用的最佳方法。这是我最终使用的代码：

```
Cursor c = newDB.rawQuery("select ID, Date, Hours from " + tableName + " where Date BETWEEN '" + startDateQueryDate + "' AND '" + endDateQueryDate + "' ORDER BY Date ASC", null);

            if (c != null ) {
                if  (c.moveToFirst()) {
                    do {
                        int tempId = c.getInt(c.getColumnIndex("ID"));
                        long tempUnixTime = c.getLong(c.getColumnIndex("Date"));

                        //convert tempUnixTime to Date
                        java.util.Date startDateDate = new java.util.Date(tempUnixTime);

                        //create SimpleDateFormat formatter
                        SimpleDateFormat formatter1;
                        formatter1 = new SimpleDateFormat("dd/MM/yyyy", Locale.UK);

                        //convert Date to SimpleDateFormat and convert to String
                        String tempStringStartDate = formatter1.format(startDateDate);

                        int tempHours = c.getInt(c.getColumnIndex("Hours"));
                        results.add(+ tempId + "    Date: " + tempStringStartDate + "    Hours: " + tempHours);
                    }while (c.moveToNext());
                }
            } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T09:17:13.417

[您必须以 SQLite 理解](http://www.sqlite.org/datatype3.html#datetime)的格式存储日期值。对于普通日期，这将是一个`YYYY-MM-DD`字符串、一个秒值或一个儒略日期数字。

要将日期格式化为字符串，请使用以下内容：

```
Date date1 = ...;
DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
String dateAsString = df.format(date1); 
```

要将日期格式化为秒值，请将返回值`Date.getTime()`除以 1000。

* * *

如果您的日期变量已经是字符串，您必须确保它们具有正确的格式。

如果您的日期字符串没有`yyyy-MM-dd`格式，SQLite 的[日期函数](http://www.sqlite.org/lang_datefunc.html)将无法理解它们，并且比较将不起作用（因为字符串必须以最重要的字段开头，年份，并且所有字段必须具有固定长度，因此字符串比较结果是正确的）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-05T06:00:00.373

**获得前两个名字 2 天**

```
Calendar cal = Calendar.getInstance();
            Date now = new Date();
            cal.setTime(now);
            String currentDate = sdf.format(cal.getTimeInMillis());
            cal.add(Calendar.DAY_OF_YEAR, -1);
            String previusdDate = sdf.format(cal.getTimeInMillis());

            Log.e("Start date", currentDate);
            Log.e("End date", previusdDate);
            SQLiteOpenHelper helper;
            SQLiteDatabase db;
            helper = new My_SQliteHelper(mContext, "MyDB", null, 1);
            db = helper.getWritableDatabase();

            Cursor cr = db.rawQuery("SELECT name,sum(minutes),date FROM Historyinfo WHERE date BETWEEN '" + previusdDate + "' AND '" + currentDate + "' GROUP BY name ORDER BY SUM(minutes) DESC LIMIT 2", null); 
```

**100% 工作**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-08T05:25:02.827

不知道你在哪里读到日期/时间应该存储为字符串！！！我不同意。

我更喜欢将日期/时间存储为 INTEGER 值。阅读：[http ://www.sqlite.org/datatype3.html#datetime](http://www.sqlite.org/datatype3.html#datetime)

插入数据时，将您的日期/时间转换为 Unix 时间，即自 1970-01-01 00:00:00 UTC 以来的秒数。例如 2012 年 1 月 1 日 00:00:00 GMT 表示为 1356998400000

Android Date / Calendar 类具有在 UNIX Times 中转换日期的内置函数，反之亦然。

检查：http: [//developer.android.com/reference/java/util/Date.html#getTime%28%29](http://developer.android.com/reference/java/util/Date.html#getTime%28%29)

选择时，您可以使用正常的选择语句，例如 BETWEEN 或任何您喜欢的语句。

我已经使用它很多年了，它就像一个魅力：D

# javascript - Javascript递归在遍历整个树之前完成？

> ID：14207496
> 
> 赞同：2
> 
> 时间：2013-01-08T02:50:43.227
> 
> 标签：javascript, recursion

我正在做一个项目，其中一个练习要求遍历下面的数据结构并返回一个包含所有文件的数组（即*.js、*.css）：

```
var fileData = {
  dir : 'app',
  files : [
    'index.html',
    {
      dir : 'js',
      files: [
        'main.js',
        'app.js',
        'misc.js',
        {
          dir : 'vendor',
          files : [
            'jquery.js',
            'underscore.js'
          ]
        }
      ]
    },
    {
      dir : 'css',
      files : [
        'reset.css',
        'main.css'
      ]
    }
  ]
}; 
```

我想出了一个递归解决方案，这样当您`listFiles`使用参数调用时，`fileData`它应该返回所需的数组：

```
function listFiles(data) {
  var retval = [];
  var files;

  (function crawl(filedata) {
    files = filedata.files;

    if (typeof files !== 'undefined') {
      for (var i = 0; i < files.length; i++) {
        if (typeof files[i] === 'string') {
          retval.push(files[i]);
        } else {
          crawl(files[i]);
        }
      }
    }
  })(data);

  return retval;
} 
```

但是，在运行代码时，它只返回 *.js。这意味着在目录中`app`，我的程序应该遍历所有三个元素，但是在第二个递归调用之后它不会检查第三个（/css）。谁能解释为什么？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T02:59:07.320

您需要将`files`变量设为递归函数的本地变量。否则，当您递归时，您将覆盖调用者中使用的值。

```
function listFiles(data) {
  var retval = [];

  (function crawl(filedata) {
    var files = filedata.files;

    if (typeof files !== 'undefined') {
      for (var i = 0; i < files.length; i++) {
        if (typeof files[i] === 'string') {
          retval.push(files[i]);
        } else {
          crawl(files[i]);
        }
      }
    }
  })(data);

  return retval;
} 
```

# .htaccess - 如何通过白名单检查将域屏蔽到一个域中？

> ID：14207499
> 
> 赞同：0
> 
> 时间：2013-01-08T02:51:04.710
> 
> 标签：.htaccess, mod-rewrite, dns, apache2, masking

我需要能够以域为例：

[http://study.example.com](http://study.example.com)将被屏蔽为[http://maindomain.com?site=study.example.com](http://maindomain.com?site=study.example.com)

但是当客户查看页面时，他们会看到[http://study.example.com](http://study.example.com)

如果他们我们要导航到网站上的其他地方，它仍然会显示类似

[http://study.example.com/index.php?members/23566234](http://study.example.com/index.php?members/23566234)基本上会变成 [http://maindomain.com/index.php?members/23566234&site=study.example.com](http://maindomain.com/index.php?members/23566234&site=study.example.com)

基本上我已经做到了，这样第一种方法就可以很好地使用 RewriteRules

```
RewriteCond %{HTTP_HOST} !^maindomain\.com
RewriteCond %{HTTP_HOST} (.+) [NC]
RewriteRule ^.*$ index.php?site=%1 [NC,L] 
```

有效，但我的问题只是图像，有没有办法“保留”重写以保留为 maindomain.com 但在地址栏中其 study.example.com？

请记住，我将拥有大量域来执行此操作，而不仅仅是一个域，因此我试图避免使用代理，并且每次都必须重新启动 apache2 服务器......

# symfony - 无法使用请求类检索获取参数

> ID：14207505
> 
> 赞同：3
> 
> 时间：2013-01-08T02:51:53.043
> 
> 标签：symfony

我有一个简单的博客包，其中包含以下路线：

```
blog_post:
    pattern:  /blog/{year}/{month}/{filename}/
    defaults: { _controller: ProjectBlogBundle:Post:index }
    requirements:
        year: "[0-9]{4}"
        month: "[0-9]{2}"
        filename: "([^/.]+)" 
```

匹配的 url`symfony.local/blog/2012/04/hello-world/`没有问题。但是由于某种原因，我无法使用 Request 类访问查询参数，如下所示：

```
use Symfony\Component\HttpFoundation\Request;

class PostController extends Controller
{
    /**
     * @Template()
     */
    public function indexAction(Request $request)
    {

    print_r($request->query->keys()); // outputs blank array
    print_r($request->request->keys()); // outputs blank array

    echo $request->get('filename'); // outputs hello-world

    ....

   } 
```

谁能解释为什么我无法使用访问查询参数`$request->query->get('filename');`？

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T03:04:37.663

因为`$request->query`只包含作为查询字符串传递的`GET`参数（仅参数）而不是那些定义为路由参数的参数（它们是从 解析的属性`PATH_INFO`）

所以，你可以同时使用，

```
$request->attributes->get('parameterName');
$request->get('parameterName'); 
```

访问 url 参数。

**实际上**，在使用时[`$request->get('XXXX')`](https://github.com/symfony/symfony/blob/53fad04f3e7cdcd37a0a4b0c225c3e8c25078b78/src/Symfony/Component/HttpFoundation/Request.php#L527)，它会检查所有参数包（$request->query、$request->request 和 $request->attributes），直到找到适合给定名称的参数。

# php - 用 PHP 显示行的范围

> ID：14207517
> 
> 赞同：0
> 
> 时间：2013-01-08T02:53:03.527
> 
> 标签：php, range

要显示文件中的内容，我使用：`<?php echo file_get_contents("file.php"); ?>`.

我怎样才能只显示从 10 到 23 的行`file.php`？

试过没有成功：

```
$lines = file('file.php');

$range = array_merge($lines,range(10, 23)); 

foreach ($range as $line_num => $line) {
  echo $line."\n";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T02:55:22.683

您可以[`array_slice`](http://php.net/array_slice)改用：

```
$range = array_slice($lines, 10, 13); 
```

或者，如果您希望行号保持在 10 到 23 之间，只需像这样循环并避免复制：

```
for($line = 10; $line <= 23; $line++) {
    echo $line, ': ', $lines[$line - 1];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T02:55:50.117

```
$range = array_slice($lines, 10, 13, true);
                                      ^--- required, as long as you want to
                                         have the original line numbers available 
```

文档： http: [//php.net/array_slice](http://php.net/array_slice)

# matlab - 如何将文本+数字 TSV 读入 MATLAB？

> ID：14207518
> 
> 赞同：0
> 
> 时间：2013-01-08T02:53:15.437
> 
> 标签：matlab

这应该是微不足道的，但我在 MATLAB 文档中找不到答案。我有一个包含约 60,000 行和 38 列的 TSV 文件。第一行包含列的名称，第一列完全由字母数字字符串组成。其余条目都是浮点数（尽管在许多情况下，该值仅表示为 0，没有明确的小数点）。

如何将这些数据读入 MATLAB？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T03:09:31.540

MATLAB`textscan`为此提供了一个函数。第二个参数是格式说明符。在您的情况下，第一个字段是字符串，所以我们使用`%s`，其余字段是浮点值，所以我们使用`%f`. 您将需要 37 次重复`%f`- 比此示例中的多一些：

```
fid = fopen('yourfile.tsv');
C = textscan(fid, '%s %f %f %f %f %f %f', 'HeaderLines', 1);
fclose(fid); 
```

`HeaderLines`告诉`textscan`在开始之前要跳过多少行。您提到文件中的第一行包含列名，因此我们跳过`1`行。

# xml - Clojure：使用拉链从 xml 中提取值

> ID：14207519
> 
> 赞同：1
> 
> 时间：2013-01-08T02:53:23.927
> 
> 标签：xml, clojure, zipper

我一直在努力解决这个问题，这可能是平庸的（或不是）。在这里 - 我想从 xml 中提取一些值。这是我的程序（应该重构，这是一个工作版本）

```
 (ns datamodel
    (:import (java.io ByteArrayInputStream))
    (:use 
    [net.cgrand.enlive-html :as en-html ])
    (:require
[clojure.zip :as z] 
[clojure.data.zip.xml :only (attr text xml->)]
[clojure.xml :as xml ]
[clojure.contrib.zip-filter.xml :as zf]
))
 (def data-url "http://api.eventful.com/rest/events/search?app_key=4H4Vff4PdrTGp3vV&keywords=music&location=Belgrade&date=Future")

 (defstruct event :event-name :performers :start-time :stop-time)

(defn get-events [xz] 
(map (juxt #(zf/xml1-> % (:title text)) 
    #(zf/xml1-> % (:performers :performer :name text)) 
    #(zf/xml1-> % (:start_time text)) 
     #(zf/xml1-> % (:stop_time text)))
 (zf/xml-> xz  :events :event)))

 (defn create-map-of-events []
(map #(apply struct event %) (get-events (z/xml-zip (xml/parse "http://api.eventful.com/rest/events/search? app_key=4H4Vff4PdrTGp3vV&keywords=music&location=Belgrade&date=Future"))))) 
```

在 REPL (create-map-of-events) 中给了我一个 java.lang.RuntimeException: java.lang.NullPointerException

我对 xml1-> 做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:47:35.527

问题就在这里

```
 (defn get-events
    [xz] 
   (map (juxt 
    #(zf/xml1-> % :title zf/text) 
    #(zf/xml1-> % :performers :performer :name zf/text) 
    #(zf/xml1-> % :start_time zf/text) 
     #(zf/xml1-> % :stop_time zf/text))
    (zf/xml-> xz  :events :event))) 
```

我把 :title zf/text 放在括号里，这是一个错误。现在它工作得很好。

# windows - 我在一列中有一个重复的结果，即使我有针对它的规则。我怎样才能消除这种重复发生？

> ID：14207526
> 
> 赞同：2
> 
> 时间：2013-01-08T02:54:06.333
> 
> 标签：windows, pascal, freepascal

程序问题是这样的：

**友好号码**：

有些数字对被称为“友好数字”。根据定义，友好数字是两个不同的数字，其真除数之和等于另一个数字。

例如：最小的友好数字对是 220 和 284。220 的真因数是：1,2,4,5,10,11,20,22,24,44,55 和 110。这些的和除数为 284。

另一方面，284 的真除数是：1、2、4、71 和 142。这些除数的总和是 220。

因此，220 和 284 被称为“友好号码”。编写一个程序来查找并打印前两打友好的数字。

可以在[此处](http://mathforum.org/kb/thread.jspa?forumID=13&threadID=72239&messageID=319474 "友好号码列表")找到友好号码列表。我正在尝试访问 80620 和 389924。

我的源代码在这里：

```
program  Friendly Numbers;

type List=Array[1..50] of Integer;

var Num,Sum,Sum2,C,C2,C3,C4,CheckNum,LastNum:Integer;
    NumUsed:String;
    CheckedNum,CheckedSum:List;

begin
Num:=200;

while C3<=23 Do
  begin

    while C<Num Do
      begin  
        C:=C+1;
        if (C<>Num) and (Num mod C=0) then Sum:=Sum+C;
      end;

    while C2<Sum Do
      begin
        C2:=C2+1;
        if (C2<>Sum) and (Sum mod C2=0) then Sum2:=Sum2+C2;
      end;

    if Num=Sum2 then
      begin

        for C4:=1 to 35 do
          begin
            if CheckedNum[C4]=C2 then NumUsed:='T';
            if CheckedSum[C4]=Num then NumUsed:='T';
          end;

        if (C2<>LastNum) and (NumUsed<>'T') and (Num<>C2) then
          begin
            C3:=C3+1;
            Writeln(C3,')',Num:8,C2:8);
            LastNum:=Num;
          end;

      Checknum:=CheckNum+1;
      CheckedNum[CheckNum]:=Num;
      CheckedSum[CheckNum]:=C2;    
    end;

  NumUsed:='F';
  Num:=Num+1;
  Sum:=0;
  Sum2:=0;
  C:=0;
  C2:=0;
  end;

Readln;        
end. 
```

输出：

> ```
> 1)     220     284
> 2)    1184    1210
> 3)    2620    2924
> 4)    5020    5564
> 5)    6232    6368
> 6)   10744   10856
> 7)   12285   14595
> 8)   17296   18416
> 9)   63020   76084
> 10)   66928   66992
> 11)   67095   71145
> 12)   69615   87633
> 13)   79750   88730
> 14)  100485  124155
> 15)  122265  139815
> 16)  122368  123152
> 17)  141664  153176
> 18)  142310  168730
> 19)  171856  176336
> 20)  176272  180848
> 21)  176336  171856 
> ```
> 
> *176336 在前一行重复，而 176336 已经出现在右列前两行。
> 
> ```
> 22)  180848  176272
> 23)  185368  203432
> 24)  196724  202444 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:56:15.063

您存储到数组中的内容与您在屏幕上显示的内容之间存在差异。您正在存储*每一*对，但仅显示（或至少尝试显示）唯一的。而且您枚举显示的对与存储的对不同。除此之外，当检查是否已经遇到（并且显然显示）一个数字时，您只搜索数组的前 35 个元素。

现在，如果您决定显示程序发现的*所有*对，即查看存储在数组中的内容以及在哪些索引下，您可以看到以下内容：

```
1)     220     284
2)     284     220
3)     496     496
4)    1184    1210
5)    1210    1184
6)    2620    2924
7)    2924    2620
8)    5020    5564
9)    5564    5020
10)    6232    6368
11)    6368    6232
12)    8128    8128
13)   10744   10856
14)   10856   10744
15)   12285   14595
16)   14595   12285
17)   17296   18416
18)   18416   17296
19)   63020   76084
20)   66928   66992
21)   66992   66928
22)   67095   71145
23)   69615   87633
24)   71145   67095
25)   76084   63020
26)   79750   88730
27)   87633   69615
28)   88730   79750
29)  100485  124155
30)  122265  139815
31)  122368  123152
32)  123152  122368
33)  124155  100485
34)  139815  122265
35)  141664  153176
36)  142310  168730
37)  153176  141664
38)  168730  142310
39)  171856  176336  <<<
40)  176272  180848
41)  176336  171856
42)  180848  176272
43)  185368  203432
44)  196724  202444
... 
```

请注意第一次遇到 176336 的时间：在 #39 对中。现在您明白了为什么您的程序在第二次显示数字时似乎忽略了它：仅仅是因为它不会费心搜索第 35 个元素之后的数组。

另一方面，如果您只存储显示的内容，则 35*可能就足够了。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:18:29.940

您最终列表的条件是 `If (C2<>LastNum) and (NumUsed<>'T') and (Num<>C2) Then`

使用
`If (C2<>LastNum) and (NumUsed<>'T') and (Num<C2) Then`
应该只留下具有较小数字的一对。

交换对也在 20) 和 22) 中，并且可能还有更多要遵循的。

不过还没有检查正确性。

# android - Android 中 TableLayout 中的 layout_span

> ID：14207527
> 
> 赞同：7
> 
> 时间：2013-01-08T02:54:25.127
> 
> 标签：android, android-tablelayout

我想为一个安卓应用程序创建一个登录屏幕。我正在使用`TableLayout`以获得正确的对齐方式。所以两行由 a`TextView`和 an组成`EditText`，我想`Button`在它们下面添加一个宽度被拉伸到屏幕的。因此，我将 放入`Button`另一个`TableRow`并添加`layout_span="2"`了`Button`，但`Button`显示在第一列中。

我认为这应该是正确的，但我必须在 xml 文件中做错事。你知道出了什么问题吗？

```
<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    tools:context=".LoginActivity"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="5dp"
            android:paddingRight="15dp"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:text="@string/evUsername" />
        <EditText
            android:id="@+id/username"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:inputType="text" />
    </TableRow>
    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="5dp"
            android:paddingRight="15dp"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:text="@string/evPassword" />
        <EditText
            android:id="@+id/password"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:inputType="textPassword" />
    </TableRow>
    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
        <Button
            android:id="@+id/btnLogin"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="2"
            android:text="@string/btnLogin" />
    </TableRow>
</TableLayout> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:02:58.023

最后，我将我的包裹`TableLayout`在 a 中`LinearLayout`，并`Button`在`TableLayout`.

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    tools:context=".LoginActivity"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
        <TableRow
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingLeft="5dp"
                android:paddingRight="15dp"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:text="@string/evUsername" />
            <EditText
                android:id="@+id/username"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:inputType="text" />
        </TableRow>
        <TableRow
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingLeft="5dp"
                android:paddingRight="15dp"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:text="@string/evPassword" />
            <EditText
                android:id="@+id/password"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:inputType="textPassword" />
        </TableRow>
    </TableLayout>
    <Button
        android:id="@+id/btnLogin"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/btnLogin" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-31T17:52:48.973

在您的原始 xml 文件中，您可以简单地添加

安卓：layout_weight="1"

在您的按钮中

# c# - 如何从代码隐藏中获取 UserControl 中的 GridView 事件

> ID：14207536
> 
> 赞同：0
> 
> 时间：2013-01-08T02:54:55.617
> 
> 标签：c#, asp.net, user-controls, code-behind, webusercontrol

我有一个包含 gridview 的用户控件。我将此用户控件注册到页面 aspx 正常。但是当我在 GridView 按下选择时，它设置**str_btn 始终为空。**

```
if(!Page.IsPostBack)
{

}
else
{
  string str_btn = null;
  if (Request.Form.Keys[Request.Form.Keys.Count - 1]!=null)
       str_btn=Request.Form.Keys[Request.Form.Keys.Count - 1].ToString();
  if(!string.IsNullOrEmpty(str_btn))
       handleClick(str_btn);
} 
```

如何从 aspx 页面获取用户控件中的 Gridview 事件？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-13T04:50:19.733

只需在设计模式下选择您的“Gridview”并打开它的属性。

现在只需单击下图中给出的事件图标：

[![在此处输入图像描述](../Images/274166b737472fc0d3afe783cabb4531.png)](https://i.stack.imgur.com/dylI2.jpg)

之后，无论您想生成什么事件，您只需双击即可。例如。这里已经生成了“RowDeleting”和其他事件。

现在，如果您想为“Rowdeleted”生成事件，只需双击该“Rowdeleted”的右侧。

[![在此处输入图像描述](../Images/0a764fccad9b0cf9e7c4d29c99021352.png)](https://i.stack.imgur.com/pR4Y9.jpg)

这都是事件，它的相关代码将在 .cs 文件中可用。

如果您想了解更多信息，请点击此链接[GridView Events](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=21&cad=rja&uact=8&ved=0ahUKEwiU446VxovPAhVCKpQKHSknAiQ4FBAWCBowAA&url=http%3A%2F%2Fwww.lateshtclick.com%2Fblogpost%2Fhow-to-use-gridview-events-in-aspnet-to-update-or-delete-record&usg=AFQjCNExkeA3DNiGK_eLGSdlBy80-mdOXA&sig2=wU_MEPoLyML-OugSVo_AlA&bvm=bv.132479545,d.dGo "一步步")

# google-app-engine - 使用 GQL 的实体上的 Appengine 数据存储行计数

> ID：14207537
> 
> 赞同：1
> 
> 时间：2013-01-08T02:54:57.500
> 
> 标签：google-app-engine, gql

有没有办法使用 GQL 获取 Google App Engine 数据存储表（实体）中的总行数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:02:07.757

您可以使用计数。它在文档中：[https ://developers.google.com/appengine/docs/python/datastore/gqlqueryclass?hl=nl#GqlQuery_count](https://developers.google.com/appengine/docs/python/datastore/gqlqueryclass?hl=nl#GqlQuery_count)

# php - 使用连接表中的 mPDF 打印

> ID：14207544
> 
> 赞同：0
> 
> 时间：2013-01-08T02:55:57.303
> 
> 标签：php, mysql, printing, row, mpdf

表格1

```
+------+--------+
| code | name   |
+------+--------+
| 1056 | Alex   |
| 1057 | Rudy   |
| 1058 | Brian  |
+------+--------+ 
```

表_2

```
+------+------+
| code | rate |
+------+------+
| 1056 |    9 |
| 1057 |    7 |
| 1058 |    8 |
+------+------+ 
```

基于这些表格，我想制作一张加入它们的表格。

第一个文件，show.php

```
echo "<td><a href=print.php?code=$row[code]>Print....</a></td>"; 
```

打印连接表的第二个文件 print.php

```
//...

$code = $_GET['code'];
$res = mysql_query("select table_1.code, table_1.name, table_2.rate from table_1, table_2, where table_1.code = table_2.code");

//...

while($row = mysql_fetch_array($res)){
    $a=$row['code'];
    $b=$row['name'];
    $c=$row['rate'];

$html .= '<tr><td>'.$a.'</td><td>' .$b. '</td><td>'.$c.'</td></tr>'; 
}
$html .= '</table> </center>';

$mpdf->WriteHTML($html,2); 
$mpdf->Output('print.pdf','I');
exit;

//... 
```

但结果显示所有行：

```
+------+--------+------+
| code | name   | rate |
+------+--------+------+
| 1056 | Alex   |    9 |
| 1057 | Rudy   |    7 |
| 1058 | Brian  |    8 |
+------+--------+------+ 
```

如何使结果只显示这样的一行？：

```
+------+--------+------+
| code | name   | rate |
+------+--------+------+
| 1056 | Alex   |    9 |
+------+--------+------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:20:22.537

现在检查它

```
$res = mysql_query("SELECT table_1.code, table_1.name, table_2.rate FROM table_1 INNER JOIN table_2 ON table_1.code = table_2.code WHERE table_1.code ='".$code."'"); 
```

# java - 在 Java 正则表达式中转义点序列会引发异常

> ID：14207547
> 
> 赞同：1
> 
> 时间：2013-01-08T02:56:14.287
> 
> 标签：java, regex, escaping

我正在尝试做一个简单的正则表达式，在部分中搜索一些字符等，包括查找`.`文字。但是，`Pattern`编译器说它无效。

以下是引发格式异常的完整正则表达式的摘录。逃逸看起来是对的，它只是将`.`视为不应该逃逸的东西。

```
([a-zA-Z0-9_-\.\s]{1,})
              ^ 
```

我也试过`"([a-zA-Z0-9_-\\\\.\\s]{1,})"`（与​​上面相同，但有两个`\`逃脱`.`）没有运气。

我可以在互联网上找到的所有用于转义点字符的资源都表明这应该有效。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T02:58:46.810

问题不在于它，`.`而在于`-`它之前。尝试`"([a-zA-Z0-9_\\-.\\s]{1,})"`

`-`是字符类中的元字符`[...]`。它指定字符范围，例如`[a-z]`可以匹配Unicode 表中`a`和（包括）之间的字符。`z`如果您在不可能将其视为范围运算符的地方使用它，例如在字符类的开头或结尾，`[-...]` `[...-]`它将被视为普通字符，因此在这种情况下您不必转义它。否则，您将需要使用`\`before 将其更改为简单的文字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T03:18:13.367

在正则表达式中，破折号`-`和点`.`都被视为元字符。如果您需要查找`.`和`-`除了字母数字，它应该是`[a-zA-Z0-9[\.\-]]`or `[a-zA-Z0-9[\Q.-\E]]`。

# javascript - 用于将正则表达式匹配转换为按钮的 Javascript 库

> ID：14207548
> 
> 赞同：2
> 
> 时间：2013-01-08T02:56:21.493
> 
> 标签：javascript, regex, input, widget

我看到了几个自动完成（标签）库，但找不到任何将正则表达式结果转换为按钮的东西。就像输入中的电子邮件到电子邮件按钮系统一样。

我发现的只是在 js 中标记小部件。这是存在的东西吗？

我正在寻找的是：

![在此处输入图像描述](../Images/d2839a0bda7f041d9e58f2a649741ba4.png)

这不是标记功能，只是正则表达式匹配按钮功能。

所以，我所要做的就是指定一个 div、一个正则表达式和一个类，其余的由它来处理。

编辑： http: [//jsfiddle.net/leye0/nLnBk/6/](http://jsfiddle.net/leye0/nLnBk/6/)`Code`这是我所做的电子邮件到按钮和自动完成功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:11:31.017

这是您如何使用匹配中的文本创建内容的方式：

```
var regexMatch = "Test Regex Here".match(/[\w\d ]*/i);
var btn = document.createElement("button");
var t = document.createTextNode(regexMatch);

if(regexMatch)
{
  btn.appendChild(t);
  document.body.appendChild(btn);
} 
```

然后使用[JQuery的](http://jquery.com/) [令牌输入插件](http://loopj.com/jquery-tokeninput/)来实现你要找的结果。

# gwt - 滚动面板到窗口的垂直中心？

> ID：14207551
> 
> 赞同：0
> 
> 时间：2013-01-08T02:56:51.220
> 
> 标签：gwt

我有一个带有许多子面板的 FlowPanel。它有足够的子面板，浏览器窗口会自动显示一个垂直滚动条。

有没有办法将特定的子面板滚动到浏览器窗口的中心？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:24:53.983

您可以将子面板放置在[scrollPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/ScrollPanel.html)中，以便每个子面板都可以滚动，或者选择您需要滚动的子面板。

# php - PHP 邮件脚本

> ID：14207552
> 
> 赞同：-2
> 
> 时间：2013-01-08T02:57:03.350
> 
> 标签：php, html, email

我制作了一个超过 2 页的小型 PHP 脚本，这就是它们的样子。

第 1 页：

```
<! DOCTYPE html>
<head>
<body>

<form method='post' action='handle.php'>
<p>To:<input type='text' name='To'></p>
<p>From:<input type='text' name='From' value='From:'></p>
<p>Subject:<input type='Subject' name='Subject'></p>
<p>Body:<textarea ROWS=60 COLS=40></textarea></p>
<input type='submit'>
</form>

</body>
</head> 
```

第2页：

```
<?php

$to = $_POST['To'];
$subject = $_POST['Subject'];
$body = $_POST['Body'];
$from = $_POST['From']

mail($to, $subject, $body, $from);
echo $from;

?> 
```

它给了我这个错误（并且从“发件人”框中开始的“发件人：”没有被删除！）：

```
Parse error: syntax error, unexpected T_STRING in /home/a8923462/public_html/handle.php        on line 8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T02:58:41.443

您在声明`;`的末尾缺少您的`$from`。

# ruby - 在 Sinatra 中处理分块请求

> ID：14207553
> 
> 赞同：1
> 
> 时间：2013-01-08T02:57:05.737
> 
> 标签：ruby, http, nginx, sinatra, passenger

在 Sinatra 中，我有一个类似于以下的路线设置：

```
put '/test' do
  begin
    logger.info 'In put begin block'

    write_to_file(request.body.read)

    [200, '']
  rescue RuntimeError => e
    [500, 'some error']
  end
end

def write_to_file(data)
  logger.info "writing data with size #{data.size}"
  # Code to save file...
end 
```

当我发送 < ~500 MBytes 的数据时，它似乎一切正常，但是当我尝试发送 >= 500 MBytes 的数据时，我得到一些奇怪的日志输出，然后客户端最终出现以下错误：Excon::错误::SocketError: EOFError (EOFError)

来自服务器 (Sinatra) 的日志如下所示：

对于 < 500 MB 的数据：

```
I, [2013-01-07T21:33:59.386768 #17380]  INFO -- : In put begin block
I, [2013-01-07T21:34:01.279922 #17380]  INFO -- : writing data with size 209715200
xxx.xxx.xxx.xxx - - [07/Jan/2013 21:34:22] "PUT /test " 200 - 22.7917 
```

对于 > 500 MB 的数据：

```
I, [2013-01-07T21:47:37.434022 #17386]  INFO -- : In put begin block
I, [2013-01-07T21:47:41.152932 #17386]  INFO -- : writing data with size 524288000
I, [2013-01-07T21:48:16.093683 #17380]  INFO -- : In put begin block
I, [2013-01-07T21:48:20.300391 #17380]  INFO -- : writing data with size 524288000
xxx.xxx.xxx.xxx - - [07/Jan/2013 21:48:39] "PUT /test " 200 - 62.4515
I, [2013-01-07T21:48:54.718971 #17386]  INFO -- : In put begin block
I, [2013-01-07T21:49:00.381725 #17386]  INFO -- : writing data with size 524288000
I, [2013-01-07T21:49:33.980043 #17267]  INFO -- : In put begin block
I, [2013-01-07T21:49:41.990671 #17267]  INFO -- : writing data with size 524288000
xxx.xxx.xxx.xxx - - [07/Jan/2013 21:50:06] "PUT /test " 200 - 110.2076
xxx.xxx.xxx.xxx - - [07/Jan/2013 21:51:22] "PUT /test " 200 - 108.5339 
```

不完全确定这里发生了什么，所以我想我的问题有两个，A. 这两种情况之间有什么根本不同会导致它们以这种方式表现？B. 有没有更好的方法来处理数据以减轻这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:10:58.170

问题出在 apache/passenger 上。使用 WEBrick 运行服务器缓解了这个问题。

# sql-server-2008 - 我正在查询最大值，它是重复值

> ID：14207562
> 
> 赞同：-1
> 
> 时间：2013-01-08T02:58:15.273
> 
> 标签：sql-server-2008, subquery, max

我想从 sql server 2088 R2 查询。但它是重复值。

我需要它不是重复值​​​。

代码：

```
Select es.EmpCode,es.Eff,es.Year,MAX(es.Month)
From SP_EffEmpAnalysis es
Where es.Year = '2012'
Group By es.EmpCode,es.Eff,es.Year
Order By es.EmpCode,MAX(es.Month) desc 
```

**输出**

```
EmpCode | Eff | Year | Month
1410013 | 0 | 2012 |    11
1450021 | 0.952700018882751 |   2012 |  8
1460037 | 0.653999984264374 |   2012 |  9
1460037 | 0.809899985790253 |   2012 |  8
1460037 | 0.863600015640259 |   2012 |  7
1460047 | 0.796299993991852 |   2012 |  7
1480013 | 0             | 2012 |    11
1480080 | 0.91839998960495 |    2012 |  12
1480080 | 0.982299983501434 |   2012 |  11
1480080 | 1.08259999752045 |    2012 |  10
1480080 | 0.989700019359589 |   2012 |  9 
```

**我需要输出**

```
EmpCode | Eff | Year | Month
1410013 | 0 | 2012 |    11
1450021 | 0.952700018882751 |   2012 |  8
1460037 | 0.653999984264374 |   2012 |  9
1460047 | 0.796299993991852 |   2012 |  7
1480013 | 0             | 2012 |    11
1480080 | 0.91839998960495 |    2012 |  12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:10:19.337

我认为您正在寻找的是上个月每位员工的价值。您可以使用 row-number 函数获得它：

```
SELECT EmpCdoe, Eff, Year, Month
FROM(
SELECT *,ROW_NUMBER()OVER(PARTITION BY EmpCode ORDER BY Year DESC, Month DESC) AS frn
WHERE Year = '2012'
)X
WHERE frn=1
ORDER BY EmpCode; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:15:26.153

塞巴斯蒂安打字更快，但我认为这更完整：

```
select EmpCode, Eff, Year, Month
  from (
    select es.EmpCode, es.Eff, es.Year, es.Month,
      Row_Number() over ( partition by es.EmpCode order by es.Year desc, es.Month desc ) as RN
      from SP_EffEmpAnalysis es
      where es.Year = '2012' ) as Placeholder
  where RN = 1
  order By es.EmpCode 
```

# php - 有什么解决办法不执行标签（其中包含 $values）？

> ID：14207584
> 
> 赞同：-1
> 
> 时间：2013-01-08T03:01:09.857
> 
> 标签：php, html, tags, textarea

> **可能重复：**
> [如何正确转义 php 中的 html 表单输入默认值？](https://stackoverflow.com/questions/6249151/how-to-properly-escape-html-form-input-default-values-in-php)

我在面对`</textarea>`元素时遇到问题。我正在处理整个 php 文件编辑。如果 php 文件有`</textarea>`标签，它会关闭文件代码。例如

```
$data=file_get_contents($file);
..
'<textarea>'
'.$data.'
'</textarea>'
.. 
```

问题是：如果`</textarea>`在数据中包含标签，我的代码会被标签截断。因为`</textarea>`是 textarea 值的结束标记。有什么解决办法不执行`</textarea>`标签（其中包含 $data）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:07:16.860

在输出之前尝试清理`$data`一下，例如：

`'.htmlentities($data).'`

此外，请查看[PHP 文档](http://php.net/manual/en/function.htmlentities.php)中函数的可用标志。

# php - str_replace 用数组

> ID：14207588
> 
> 赞同：2
> 
> 时间：2013-01-08T03:01:31.430
> 
> 标签：php

```
$a = $_GET['a'];
$d = array("æ", "ø", "å", "Æ", "Ø", "Å");
$e = array("&aelig", "&oslash", "&aring", "&AElig", "&Oslash", "&Aring");
$new = str_replace("$d","$e","$a");
echo $new; 
```

谁能告诉我我在这里做错了什么。如果我只写，它工作得很好：

```
$a = $_GET['a'];
new = str_replace("ø","&oslash","$a");
echo $new; 
```

然后至少替换“ø”，但我真的想用两个数组而不是一次替换一个字母，6次......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T03:04:28.960

```
$new = str_replace($d, $e, $a); 
```

您正在传递变量，而不是由变量组成的字符串。

如果您比较此代码中的输出

```
$a = array(123);
var_dump($a);
var_dump("$a"); 
```

您会注意到，第一个是数组，第二个是字符串，其中数组隐式转换为字符串。

# cocos2d-x - cocos2d-x 将 nsstring 转换为 char*

> ID：14207590
> 
> 赞同：3
> 
> 时间：2013-01-08T03:02:00.943
> 
> 标签：cocos2d-x

```
NSString *_str=@"rank";
const char *color_char1 = [_str cStringUsingEncoding:NSASCIIStringEncoding]; 
```

我在 iphone 6.0 Simulator 中运行它，它运行良好；但是当我在新 iPad 上运行它时它崩溃了。

收不到`color_char1`，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:44:31.353

const char * myChar = [@"嘿，我是 NSString" UTF8String];

那应该工作：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T09:02:01.483

试试这个代码。

```
NSString *_str=@"rank";

const char *color_char1 = (char *)_str; 
```

# jquery - 无法在 jQuery 帖子中读取变量

> ID：14207593
> 
> 赞同：0
> 
> 时间：2013-01-08T03:02:08.963
> 
> 标签：jquery, forms, dialog, .post

当我在 $.post 调用中将元素传递给 .remove() 函数时，我无法从页面中删除我的表单。

这是我的代码：

```
function cancelUpload(form) {
$( "#closeModal" ).dialog({
        resizable: false,
        height:200,
        modal: true,
        buttons: [
        {   
            text: "Yes", 
            click: function() {
                $.post(
                    "misc/removeMedia.php",
                    {location: form.location.value},
                    function(result) {
                        if(result.split('|')[0] == "Success"){
                            $(form).remove();
                            noty({text: result.split('|')[1], type: "information"});

                        } else {
                            noty({text: result.split('|')[1], type: "error"});

                        }

                    },
                    "html"
                    );
                $(this).dialog("close");
            },
            class: "btn btn-success"
        },
        {
            text: "No",
            click: function() {
                $(this).dialog("close");
            },
            class: "btn btn-danger"
        }
        ]
    });
} 
```

如果我完全摆脱 $.post 调用并只输入 $(form).remove()，它就可以工作。所以我知道我正在将正确的元素传递给函数。

jsFiddle 示例：http: [//jsfiddle.net/4NDFR/](http://jsfiddle.net/4NDFR/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:51:53.610

改变：

```
{location: form.location.value}, 
```

到：

```
{location: $("[name=location]", form).val()}, 
```

`form`是一个 jQuery 对象，而不是一个 DOM 元素，所以`form.location`不存在。

[小提琴](http://jsfiddle.net/barmar/cSYCM/1/)

# android - Android中具有一对多和多对多关系的INSERT和SELECT语句

> ID：14207598
> 
> 赞同：3
> 
> 时间：2013-01-08T03:03:27.147
> 
> 标签：android, sql, sqlite, persistence

我正在使用 SQLite 数据库来存储数据，这些数据可用于重建我正在开发的应用程序中使用的一些对象。我正在存储 CheckIns、Recipients 和 ContactMethods。

这些对象的关系如下：

```
CheckIn <--many -- to -- many--> Recipient
Recipient <--one -- to -- many--> ContactMethod 
```

在 Java 中，这些对象的字段定义如下：

```
public class CheckIn {
    private int id;
    private boolean isEnabled;
    private Date startTime;
    private Repetition repetition; 
    private Set<Recipient> recipients;
}

public class Recipient {    
    private String name;
    private Set<ContactMethod> contactMethods;    
}

public class ContactMethod {    
    private String type;
    private String address;    
} 
```

我为这些对象提出的数据库模式定义如下：

```
CREATE TABLE checkIn(
  _id               INTEGER PRIMARY KEY AUTOINCREMENT,
  isEnabled         INTEGER,
  startTime         INTEGER,
  repetitionNum     INTEGER,
  repetitionUnits   TEXT
);

CREATE TABLE recipient(
  _id               INTEGER PRIMARY KEY AUTOINCREMENT,
  name              TEXT
);

CREATE TABLE contactMethod(
  _id                       INTEGER PRIMARY KEY AUTOINCREMENT,
  type                      TEXT,
  address                   TEXT,
  recipientID               INTEGER,
  FOREIGN KEY(recipientID) REFERENCES recipient(_id) ON DELETE CASCADE
);

CREATE TABLE checkIn_recipient(
  checkInID         INTEGER,
  recipientID       INTEGER,
  FOREIGN KEY(checkInID) REFERENCES checkIn(_id),
  FOREIGN KEY(recipientID) REFERENCES recipient(_id)
); 
```

我有两个问题。

**1\. 如何有效地将 CheckIn 及其相关对象插入到数据库中？**

更具体地说，如果我在 Java 中有一个 CheckIn 对象，但尚未提交到数据库，我如何构造一个 INSERT 语句，将 CheckIn 插入到 CheckIn 表中，同时存储新的 CheckIn 与一个或多个收件人的关系? 似乎要存储与收件人的关系，我需要已经知道尚未设置的 checkIn._id，因为尚未将 CheckIn 输入数据库。

**2\. 在 Android 中，重建 CheckIn 对象的最佳方法是什么，例如，从数据库查询？**

我想我知道获取正确数据所需的 SQL 查询：

```
SELECT checkIn.*, recipient.name, contactMethod.type, contactMethod.address
FROM checkIn
JOIN checkIn_recipient
    ON (checkIn._id = checkIn_recipient.checkInID)
JOIN recipient
    ON (checkIn_recipient.recipientID = recipient._id)
JOIN contactMethod
    ON (recipient._id = contactMethod.recipientID) 
```

此查询将获取包含我需要为数据库中的每个 CheckIn 和 Recipient 构建对象的所有信息的数据行，并且我知道如何获取将遍历这些行的 Cursor 对象。但是，由于单个 CheckIn 所需的数据出现在多行上，我对构造单个 CheckIn 对象的最佳方法感到困惑。如果我正在尝试编写一个这样的方法`public Set<CheckIn> getAllCheckIns()`，它将返回一组存储在数据库中的所有 CheckIn，我是否需要运行上面的查询，然后使用相同的 checkIn._id 遍历每一行，并在该循环中，每一行都有相同的接收者._id，等等？有没有更好的方法来做到这一点？

我很抱歉这个冗长的问题。从今天早上开始，我只在单表数据库之外使用 SQL，我不想遗漏任何重要信息。如果我错过了什么，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T05:12:10.950

对问题 1 的回答：有 2 种可能的方法。

一种。您找到插入行的 ID 并使用它插入到第二个表中。如果您使用此处记录的 Android Insert 方法，则可以找到插入行的 ID：http: [//developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String， %20java.lang.String,%20android.content.ContentValues%29](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)

在这里，您必须确保所有数据库表都已提交或没有。

湾。您可以创建触发器。触发器是发生指定数据库事件时自动执行的数据库操作。了解如何创建触发器：[http ://www.sqlite.org/lang_createtrigger.html](http://www.sqlite.org/lang_createtrigger.html)

因此，例如，您可以创建一个 AFTER INSERT 触发器，当在表中插入一行时将触发该触发器。然后在该触发器中，您可以将一行插入另一个表。触发触发器时，您可以访问新插入的行。

对问题 2 的回答：我通常会执行以下操作：

*   从表 1 中选择 - 签入表
*   遍历光标并准备 Check In 对象。
*   在循环中，从表 2 中选择 - 收件人表
*   遍历收件人表并准备 Check in 对象。

这将涉及太多的数据库选择。

或者，您可以选择所有数据一次，然后迭代以准备对象。

我想说的是你必须迭代：D

# html - 如何放置一个带有两个 DIV 的 DIV，以便 DIV 填满我的屏幕的 90%？

> ID：14207600
> 
> 赞同：1
> 
> 时间：2013-01-08T03:04:07.670
> 
> 标签：html, css

我很抱歉一直问同一个问题的不同版本，但这似乎很难实现。这是我到目前为止的代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>

   <style type="text/css">

       body, html{
    height: 100%;
}
        #outer {
            width: 90%;
            height: 90%;
            margin: 5% 5% 5% 5%;
            background-color: #333;
        }
        #left-content {
            height: 100%;
            width: 50%;
            float:left;
        }
        #right-content {
            height: 100%;
            width: 50%;
            float:left;
        }
    </style>

    <div id="outer">
      <div id="left-content" style="background-color: red;">xx</div>
      <div id="right-content" style="background-color: yellow;">xx</div> 

<!-- we need to clear -->
<br style="clear:both" />

    </div>

</body>
</html> 
```

现在似乎我看到了滚动条，但我只想让外部 DIV 占据屏幕的 90%，并且没有滚动条。

在这里找到[小提琴](http://jsfiddle.net/arunpjohny/5uMkM/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:18:26.170

这是一个我从未见过的非常有趣的错误。在不采用讨厌的`body { overflow:hidden; }`方法的情况下，我找到了一些修复方法：

**1 - 使用 display:inline-block**（不是真正想要的）

```
 #outer {
      display:inline-block;
        width: 90%;
        height: 90%;
        margin: 5% 5% 5% 5%;
        background-color: #333;
    } 
```

**2 - 使用填充而不是边距**（不是实际想要的）

```
 #outer {
        width: 90%;
        height: 90%;
        padding: 5% 5% 5% 5%;
        background-color: #333;
    } 
```

**3 - 使用绝对位置**（推荐）

```
 #outer {
        position:absolute;top: 5%;bottom: 5%;right: 5%;left: 5%;
        background-color: #333;
    } 
```

我将在进一步调查此问题时编辑此答案。

根据[http://www.w3.org/TR/CSS2/box.html#box-dimensions](http://www.w3.org/TR/CSS2/box.html#box-dimensions)

> 百分比是根据生成框的包含块的宽度计算的。请注意，“margin-top”和“margin-bottom”也是如此。

这意味着通过将 90% 的宽度放在 body 上，将导致 5% 的边距是 90% 中的 5%，而不是预期的 100%，这会导致“错误”。- 同样适用于填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:18:09.023

试试这个：

```
body, html{
        height: 100%;
        margin: 0;
    }
    #outer {
        width: 90%;
        height: 90%;
        position: absolute;
        margin: 5%;
        background-color: #333;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T03:18:38.623

这是我的做法：http: [//jsfiddle.net/remibreton/8hfwp/1/](http://jsfiddle.net/remibreton/8hfwp/1/)

这里的技巧是让浏览器计算出外部元素的宽度和高度。为此，您指定`top:0; bottom:0; left:0; right:0;`以确保它填满整个可用空间。然后添加`margin:5%;`以将高度和宽度减小到 90%。外部元素应该`position:relative;`允许在其中进行绝对定位。

对于内容元素，它们都可以是`width:50%; height:100%`. 您需要做的是确保正确的人得到特殊`left:50%`待遇。

HTML

```
<div id="outer">
    <div class="content left">xx</div>
    <div class="content right">xx</div> 
</div> 
```

CSS

```
body, html { height: 100%; }
#outer { position:absolute; margin:5%; bottom:0; top:0; left:0; right:0; overflow:hidden; } /* margin:5% to make sure the width and height are actually 90%. Overflow is optional */
.content { position:absolute; width:50%; height:100%; } /* Applies to both content element */
.content.left { background-color:yellow; }
.content.right { background-color:red; left:50%; } /* Left position is equal to the right content element */ 
```

这种方法允许比您以前使用的更清洁和更灵活的 CSS。奖励互联网积分！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T03:35:36.467

将溢出属性更改为 hidden( `overflow:hidden;`) 然后将 #outer 的边距更改为`margin:2.5% 5%;`. 这是完整的代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>

   <style type="text/css">

       body, html{
    height: 100%;
    overflow:hidden;
}
        #outer {
            width: 90%;
            height: 90%;
            background-color: #333;
            margin: 2.5% 5%;
        }
        #left-content {
            height: 100%;
            width: 50%;
            float:left;
        }
        #right-content {
            height: 100%;
            width: 50%;
            float:left;
        }
    </style>

    <div id="outer">
      <div id="left-content" style="background-color: red;">xx</div>
      <div id="right-content" style="background-color: yellow;">xx</div> 

<!-- we need to clear -->
<br style="clear:both" />

    </div>

</body>
</html> 
```

希望它会工作！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-08T03:16:36.497

这似乎是由边距折叠出错引起的。添加`padding:0.01px`到`<body>`它，它应该像它一样工作。

如果你想在屏幕上显示固定大小的东西，你可能应该`position:fixed`像这样使用：

```
#outer {
    position:fixed;
    left: 5%; right: 5%; top: 5%; bottom: 5%;
    background:#333;
}
#left-content {
    position:absolute;
    left:0; top: 0; width:50%; bottom: 0;
}
#left-content {
    position:absolute;
    left:50%; top: 0; width:50%; bottom: 0;
} 
```

# linux - 如何将 12GB 数据传输到新服务器

> ID：14207606
> 
> 赞同：-1
> 
> 时间：2013-01-08T03:04:39.177
> 
> 标签：linux, webserver, hosting, storage, file-transfer

我正在更改我们的服务器。我们在不同位置购买了服务器空间，需要将所有内容从当前服务器转移到新服务器。我需要将 12GB 移动到新服务器。将所有这些数据传输到新服务器的最方便、最快和更简单的方法是什么？进行“物理”传输不是一种选择。

我知道这将是一个漫长的过程。我正在使用一些数据进行测试，并且需要很长时间。

我实际上在我们的本地服务器上托管了大约 10 个网站，所以我想将所有这些数据移动到新服务器......我备份了所有重要文件：/var/www、/home/、/var /lib/mysql 和其他使用 tar -czf 的文件，它会生成一个 12GB 的压缩包。

我没有大的上传管道，所以我需要在非高峰时段（凌晨 1 点到 6 点）进行可靠的传输......

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T03:12:18.523

rsync

```
rsync -av --progress localpath usrname@remote:remotepath 
```

我昨晚通过这个cmd传输了300GB的数据。

不需要恢复选项，如果中断，只需再次运行此 cmd。它将自动恢复。

实际上， rsync 是增量的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T03:23:28.817

如果您的驱动器上有空间，请创建一个包含所有您需要的 zip 或 rar 存档。将存档移动到您的网站之一的根目录。使用“多线程”HTTP 下载加速器在新服务器上获取文件。此类工具会创建与服务器的多个连接，因此应该会显着提高您的下载速度。

使用您的存档工具制作几个较小的存档，让您更快地开始并更好地防止传输错误。

也有具有类似功能的 FTP 客户端和服务器，但我认为 HTTP 方法更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T03:13:34.183

由于您在一个带有 的系统上`tar`，您可能还拥有`split`可以将您的 12G 大文件转换成大量较小文件的系统。

然后用 ftp 传输那些“可靠”的文件（做`md5sum`或`cksum`在两端检查所有文件是否正确复制）并将它们放在一起回到目的地。

使用管道，您不必担心超出 tarred 文件所需的任何额外存储空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T03:16:06.747

看看`nc`还是netcat。您可以将其设置为在“服务器”上侦听，然后通过 12 GB 文件提供机器的详细信息。如果您追求安全性，这`scp`是另一个考虑因素，但它会比`nc`（或者我记得读过）慢得多。

# c# - 启用迁移 Visual Studio 2012

> ID：14207607
> 
> 赞同：0
> 
> 时间：2013-01-08T03:04:47.603
> 
> 标签：c#

输入的代码

```
======================================
PM> Enable-Migrations -ContextTypeName MvcMovie.Models.MovieDBContext

Problem
=======================================
Enable-Migrations : A parameter cannot be found that matches parameter name 
'ContextTypeName'.
At line:1 char:19
+ Enable-Migrations -ContextTypeName MvcMovie.Models.MovieDBContext
+ ~~~~~~~~~~~~~~~~
+ CategoryInfo          : InvalidArgument: (:) [Enable-Migrations], Parameter 
   BindingException
+ FullyQualifiedErrorId : NamedParameterNotFound,Enable-Migrations 
```

有人能告诉我这个问题的原因是什么吗？

问题发生时我正在关注[本教程](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-new-field-to-the-movie-model-and-table)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:43:01.543

确保您的默认项目设置正确。然后输入不带任何参数的命令“Enable-Migrations”。这将为您的默认项目启用 Code First 迁移。来自 [http://forums.asp.net/t/1855667.aspx/1?Mvc+4+Enable+Migrations+Problem](http://forums.asp.net/t/1855667.aspx/1?Mvc+4+Enable+Migrations+Problem)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T16:23:55.860

我得到了同样的错误，问题是因为你`MovieDbContext`在*Movie.cs*类中定义了。在 Models 文件夹下创建另一个类并复制`DBContext`over 的代码，如下所示：

```
using MvcMovie.Models;
using System;
using System.Collections.Generic;
using System.Data.Entity;

namespace MvcMovie.Models
{
    public class MovieDBContext : DbContext
    {
        public DbSet<Movie> Movies { get; set; }
    }
} 
```

然后跑了

```
Enable-Migrations -ContextTypeName MvcMovie.Models.MovieDBContext 
```

那应该解决它。

# windows - 如何在 CreateFile 中打开一个卷的文件系统？

> ID：14207608
> 
> 赞同：5
> 
> 时间：2013-01-08T03:04:49.630
> 
> 标签：windows, winapi, filesystems, runtime-error, createfile

CreateFile 上的 MSDN 页面说：该字符串`"\\.\C:\"`可用于打开 C: 卷的文件系统。但是，以下代码总是返回错误：ERROR_PATH_NOT_FOUND。

```
HANDLE h = CreateFile(L"\\\\.\\C:\\", FILE_READ_ATTRIBUTES, 
    FILE_SHARE_READ|FILE_SHARE_WRITE|FILE_SHARE_DELETE, 0, OPEN_EXISTING, 0, 0); 
```

我应该如何正确传递参数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T04:15:46.680

如果您想要一个卷句柄（用于 I/O 控制代码），您将需要删除尾部斜杠。

为了获得根目录的句柄，您需要保留尾部斜杠并在参数中传递`FILE_FLAG_BACKUP_SEMANTICS`标志。`dwFlagsAndAttributes`这记录在“目录”标题下的 MSDN 页面上。例如，如果您打算调用`GetFileInformationByHandle`或，这就是您想要做的`GetFileInformationByHandleEx`。

但是，通常情况下，您不会打开根目录的句柄来列出文件。相反，您将使用`FindFirstFile`/`FindNextFile`或相关功能之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:39:12.697

尝试删除尾部斜杠：

```
L"\\\\.\\C:" 
```

# java - 在 NetBeans 上运行 JavaFX 应用程序时“URI 不是分层的”

> ID：14207611
> 
> 赞同：1
> 
> 时间：2013-01-08T03:05:09.693
> 
> 标签：java, netbeans, javafx-2, javafx

我在运行 JavaFX 应用程序时收到此“URI 不是分层”错误。异常在下面代码的第 4 行中引发。你知道我该如何解决这个问题吗？

```
001          { // HISTORY
002              try {
003                  URI uri = MainClass.class.getResource("history.txt").toURI();
004                  File f = new File(uri);
005                  String text = FileUtils.readFileToString(f);
006                  historyTextArea.setText(text);
007              } catch (URISyntaxException | IOException ex) {
008                  Constants.LOGGER.log(Level.SEVERE, ex.toString());
009              }
010          } 
```

.

```
URI is not hierarchical
file:/C:/Users/Carlos/Desktop/projetos_java/CodePaster/dist/CodePaster.jar!/com/googlecode/codepaster/gui/about.fxml
  at java.io.File.<init>(File.java:392)
  at com.googlecode.codepaster.gui.AboutWindowController.initialize(AboutWindowController.java:142)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2152)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2028)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2742)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2721)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2707)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2694)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2683)
  at com.googlecode.codepaster.MainClass.start(MainClass.java:97)
  at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
  at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:206)
  at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
  at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
  at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
  at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
  at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:16:50.103

问题是您有一个引用JAR 文件*内资源的 URI。*`File(URI)`构造函数无法处理这样的 URI 。它只理解文件的 URI。

你需要做的是这样的：

```
 String text;
    try (InputStream is = MainClass.class.getResourceAsStream("history.txt")) (
        text = IOUtils.toString(is);
    } catch (... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T03:52:16.337

对于那些想要加载作为资源包含的 FXML 文档的人......

```
Parent page = new FXMLLoader().load(getClass().getResourceAsStream("/fxml/Gui.fxml")); 
```

您的 fxml 不能包含样式表。

# java - 在JLabels java的网格布局中获取元素的位置（行和列）

> ID：14207612
> 
> 赞同：0
> 
> 时间：2013-01-08T03:05:12.447
> 
> 标签：java, swing, jpanel, jlabel, grid-layout

我有`JPanel`一个 10x10`GridLayout`的`JLabels`，当用户单击其中一个标签时，我希望能够获取他们单击的单元格的行和列（或者布局中的索引，如果这样更方便的话）。如果有人知道如何执行此操作，或有任何建议，我们将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T03:09:11.257

使用组合并将这个结构包装到一个 POJO 中，每个标签都有一个注册`MouseListener`的......它是一个基本的管理器对象，或者可能使用一个`JTable`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T03:37:05.627

创建标签时，您可以使用它们的“名称”属性来保存 ID

```
for(int x ....)
{
  ...
  label[x] = new JLabel(...);
  label[x].setName(String.valueOf(x));//<------------
  ...
} 
```

如果你通过 mouseListener getSource()，你可以将 source 转换为 JLabel 然后 label.getName()

这将返回一个可以解析为 int 的字符串。

# jquery - 我怎样才能简化这一点jquery？每个点击函数中有两个不同选择器的某种数组？

> ID：14207613
> 
> 赞同：0
> 
> 时间：2013-01-08T03:05:33.737
> 
> 标签：jquery, arrays, popup, click, simplify

为了解释这是做什么的>>每个点击功能都会对徽标轮播内的元素的点击做出反应，并在轮播外创建一个弹出窗口，解释元素/徽标是什么......

只是得到一些想法，玩得开心提前谢谢你！

要查看处于工作状态的 HTML 和脚本，请暂时使用@此链接>>

[http://grayghostventures.com/x3.2/portfolio/portfolio3.html](http://grayghostventures.com/x3.2/portfolio/portfolio3.html)

只是想在一切都说完之前支持一些代码！

```
jQuery(document).ready(function() {

var hideAll = "#hoverState1,#hoverState2,#hoverState3,#hoverState4,#hoverState5,#hoverState6,#hoverState7,#hoverState8,#hoverState9,#hoverState10,#hoverState11,#hoverState12,#hoverState13,#hoverState14,#hoverState15";

// Hover States for pop Ups

$("#logoPop1").click(function(){$(hideAll).fadeOut("slow");$("#hoverState1").fadeIn("slow");});
$("#logoPop2").click(function(){$(hideAll).fadeOut("slow");$("#hoverState2").fadeIn("slow");});
$("#logoPop3").click(function(){$(hideAll).fadeOut("slow");$("#hoverState3").fadeIn("slow");});
$("#logoPop4").click(function(){$(hideAll).fadeOut("slow");$("#hoverState4").fadeIn("slow");});
$("#logoPop5").click(function(){$(hideAll).fadeOut("slow");$("#hoverState5").fadeIn("slow");});
$("#logoPop6").click(function(){$(hideAll).fadeOut("slow");$("#hoverState6").fadeIn("slow");});
$("#logoPop7").click(function(){$(hideAll).fadeOut("slow");$("#hoverState7").fadeIn("slow");});
$("#logoPop8").click(function(){$(hideAll).fadeOut("slow");$("#hoverState8").fadeIn("slow");});
$("#logoPop9").click(function(){$(hideAll).fadeOut("slow");$("#hoverState9").fadeIn("slow");});
$("#logoPop10").click(function(){$(hideAll).fadeOut("slow");$("#hoverState10").fadeIn("slow");});
$("#logoPop11").click(function(){$(hideAll).fadeOut("slow");$("#hoverState11").fadeIn("slow");});
$("#logoPop12").click(function(){$(hideAll).fadeOut("slow");$("#hoverState12").fadeIn("slow");});
$("#logoPop13").click(function(){$(hideAll).fadeOut("slow");$("#hoverState13").fadeIn("slow");});
$("#logoPop14").click(function(){$(hideAll).fadeOut("slow");$("#hoverState14").fadeIn("slow");});
$("#logoPop15").click(function(){$(hideAll).fadeOut("slow");$("#hoverState15").fadeIn("slow");});

$(".closePop").click(function(){$(hideAll).fadeOut("slow");});

// JQuery End
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:07:17.653

您可以使用[以 Selector 开头的属性](http://api.jquery.com/attribute-starts-with-selector/)：

```
jQuery(document).ready(function ($) {
    var $hoverState = $("[id^=hoverState]");

    $("[id^=logoPop]").click(function() {
        var id = ( this.id.match(/\d+$/) || [] )[0];
        $hoverState.not('#hoverState' + id).fadeOut("slow")
        $hoverState.filter('#hoverState' + id).fadeIn("slow");
    });

    $('.closePop').click(function () {
        $hoverState.fadeOut("slow");
    });
}); 
```

# php - PHP 从数组中查找域名和域扩展名

> ID：14207616
> 
> 赞同：1
> 
> 时间：2013-01-08T03:05:54.987
> 
> 标签：php, dns, tld, pathinfo

我有一组数据，其中包含一些带有 TLD 扩展名的域。我想分别收集域名和 TLD 扩展名。

例如，从“hello.com”我想收集“hello”作为一个变量，然后收集“.com”作为另一个变量。

另一个重要的例子，从“hello.co.uk”我想收集“hello”作为一个变量，然后收集“.co.uk”作为另一个变量。

我当前使用 pathinfo() 的代码将在“hello.com”上正常工作，但不能在“hello.co.uk”上正常工作。对于“hello.co.uk”，它将收集“hello.co”作为一个变量，然后收集“.uk”作为另一个变量。

这是我正在使用的代码：

```
// Get a file into an array
$lines = file($_FILES['file']['tmp_name']);

// Loop through array
foreach ($lines as $line_num => $line) {
    echo $line;

    //Find TLD
    $tld = ".".pathinfo($line, PATHINFO_EXTENSION);
    echo $tld;

    //Find Domain
    $domain = pathinfo($line, PATHINFO_FILENAME);
    echo $domain;
    } 
```

希望我解释得足够好。我经常使用stackoverflow，但找不到一个具体的例子。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T03:18:31.163

您可以使用一些简单的字符串操作，而不是使用用于文件的函数：

```
$domain = substr($line, 0, strpos($line, "."));
$tld = substr($line, strpos($line, "."), (strlen($line) - strlen($domain))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T03:17:42.363

第一种方法：

```
$domains = array("hello.co.uk", "hello.com");

foreach ($domains as $d) {

    $ext = strstr($d, '.'); // extension
    $index = strpos($d, '.');

    $arr = str_split($d, $index);

    $domain = $arr[0]; // domain name

    echo "domain: $domain, extension: $ext <br/>";

} 
```

第二种方法：（感谢 hakre）

```
$domains = array("hello.co.uk", "hello.com");

foreach ($domains as $d) {

    list($domain, $ext) = explode('.', $d, 2);
    echo "domain: $domain, extension: $ext <br/>";

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T04:03:00.213

这是一个非常灵活的函数，适用于从 example.com 到[http://username:password@example.com/public_html/test.zip](http://username:password@example.com/public_html/test.zip)到[ftp://username@example.com](ftp://username@example.com)到[http://www的所有内容.reddit.com/r/aww/comments/165v9u/shes_allergic_couldnt_help_herself/](http://www.reddit.com/r/aww/comments/165v9u/shes_allergic_couldnt_help_herself/)

```
function splitDomain($url) { 
 $host = "";
 $url = parse_url($url);
 if(isset($url['host'])) { 
    $host = $url['host'];
 } else {
    $host = $url['path'];
 }
 $host = str_replace('www.','',$host);
 $tmp = explode('.', $host);
 $name = $tmp[0];
 $tld = $tmp[1];
return array('name'=>$name,'tld'=>$tld);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T07:53:56.637

除了使用一大张合法扩展表之外，没有可靠的方法可以做到这一点。

一种流行的表是称为[Public Suffix List](http://publicsuffix.org/)的表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-20T10:20:09.037

对于使用两个 ( *co.uk* ) 和三个级别的 TLD ( *act.edu.au* )，您需要使用[公共后缀列表](https://publicsuffix.org/)（顶级域列表）的库，我建议使用[TLDExtract](https://github.com/layershifter/TLDExtract)。

# winapi - 从 HBITMAP 获取字节

> ID：14207618
> 
> 赞同：5
> 
> 时间：2013-01-08T03:06:02.350
> 
> 标签：winapi, hbitmap

如果给定 HBITMAP 指针，并且我的应用程序是控制台应用程序，如何从 hbitmap 获取图像字节。我尝试使用需要诸如 HDC 之类的参数的 GetDIBits，但我无法获得。

编辑：我从文件加载位图：

```
HBITMAP bm = 0; 
BITMAP Bitmap;
bm = (HBITMAP)LoadImage (0, TEXT("C:\\img1.bmp"), IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE); 
```

我将 HBITMAP 传递给函数并期望得到另一个处理图像的 HBITMAP：

```
HBITMAP out1 = func(bm); 
```

其中 func 是：

```
HBITMAP func(HBITMAP im); 
```

问题是如何从 HBITMAP 获取图像字节。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-10-31T11:49:26.193

最简单的方法是**不**使用`GetDIBits`(nor `GetBitmapBits`)。这些功能很糟糕，因为它们复制了数据。
如果您直接想要数据，只需使用（对于 DDB 位图）

```
BITMAP bitmap;
GetObject(hBitmap, sizeof(bitmap), (LPVoid)&bitmap); 
```

对于 DIB 位图使用

```
DIBSECTION dib;
GetObject(hBitmap, sizeof(dib), (LPVOID)&dib); 
```

GetObject 信息，请参阅：http:
[//msdn.microsoft.com/en-us/library/windows/desktop/dd144904%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144904%28v=vs.85%29.aspx)

这不会涉及任何数据复制，从而避免了与 GetDIBits 相关的复杂问题，请参阅：http:
[//msdn.microsoft.com/en-us/library/windows/desktop/dd144879%28v=vs.85%29。 aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144879%28v=vs.85%29.aspx)
埃斯普。底部的评论以解释困难`GetDIBits`。

请注意，您**没有**获得调色板信息，但由于大多数位图无论如何都是 24 位或 32 位，这在大多数情况下几乎不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T05:33:47.443

既然你是[`LoadImage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648045.aspx)用来获取的`HBITMAP`，那么它确实是一个 DIB（与设备无关的位图）（他们称之为 DIB 部分）。但是，您没有颜色信息。

[此 MSDN HOWTO](http://support.microsoft.com/kb/158898)向您展示了如何将 DIB 部分选择到内存 DC 中。然后他们继续使用`GetDIBColorTable`来获取调色板。但是，我相信从那里开始，您可以使用该 DC[`GetDIBits`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144879.aspx)来获取 RGB 位图信息，就像您尝试做的那样。

这是它的一般要点：

```
// Create a memory DC and select the DIBSection into it
hMemDC = CreateCompatibleDC( NULL );
(HBITMAP)SelectObject( hMemDC, hBitmap );

GetDIBits(hMemDC, hBitmap, ...); 
```

您会在他们的代码中注意到`SelectObject`返回DC 中内容*的句柄。*然后他们在调用之前恢复它`DeleteDC`。我不确定它是否完全有必要，但他们会这样做。为了清楚起见，我把它留在这里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-18T13:59:57.580

对我们有用的是：`GetDIBits`在设备上下文中仍然选择正确的调色板（如果是索引颜色）时调用。（如果没有选择调色板，颜色就会出现乱码。）

但在我们的用例中，事实证明 DIB 部分的性能要好得多，所以也要检查它们并进行基准测试。但是，有一些问题。Windows 不会使用调色板，我们必须`SetDIBColorTable`在使用前调用。但是设备上下文仍然需要一个条目（仅限黑色）虚拟调色板选择**并实现**到设备上下文中，否则 Windows 也会忽略由`SetDIBColorTable`. 两者都`SetDIBColorTable`需要`RealizePalette`存在，否则颜色会乱码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T03:14:33.933

***编辑问题后查看新答案...***

如果没有设备上下文句柄 ( )，您将无法执行此操作`HDC`。这是因为[`GetDIBits`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144879.aspx)期望`HBITMAP`

> 位图句柄。这必须是兼容的位图 (DDB)。

DDB 是一个与[*设备相关的位图*](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183561.aspx)，（与 DIB 或与设备无关的位图相反）。这意味着：

> 请注意，DDB 不包含颜色值；相反，颜色采用与设备相关的格式。

这就是为什么`GetDIBits`需要一个`HDC`. 否则无法获取颜色信息。

也许一个很好的问题是，你从哪里得到一个`HBITMAP`没有陪伴的`HDC`？

* * *

如果您尝试在内存中创建此位图，首先您可以调用[`CreateCompatibleDC`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183489.aspx)创建与某些设备兼容的内存 DC，然后使用该 DC[创建兼容位图。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183488.aspx)然后你有一个`HBITMAP`和`HDC`你喜欢的工作。否则，如果你不知道你`HBITMAP`指的是什么，你就不能指望用它做任何有用的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T03:18:02.397

您甚至可以从控制台尝试 GetBitmapBits API。更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd144850%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144850%28v=vs.85%29.aspx)

只需传递 HBITMAP 句柄，你就会得到你的字节

# ruby - 数组或哈希值的单一接口

> ID：14207620
> 
> 赞同：1
> 
> 时间：2013-01-08T03:06:26.533
> 
> 标签：ruby

尝试从可能是 an`Array`或 a的集合中获取值`Hash`，但基于类型切换似乎很尴尬：

```
def values_from_collection(array_or_hash)
  case array_or_hash
  when array_or_hash.is_a? Array
      array_or_hash
  when array_or_hash.is_a? Hash
      array_or_hash.values
  end
end 
```

似乎应该有一个两个类都支持的接口/方法，但在`Enumerable`. 有没有标准的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T03:10:49.600

好吧，在我看来并非如此。哈希和数组是非常不同的数据结构。为什么你认为他们应该支持这一点？

无论如何，您可以，例如，monkey-patch Array 类来添加`values`方法

```
class Array
  def values
    self
  end
end 
```

然后您的方法大大简化：

```
def values_from_collection(array_or_hash)
  array_or_hash.values
end 
```

但在我看来，这比分支更糟糕。

# c++ - C++ 设计：将指针/引用传递给引用计数的对象

> ID：14207622
> 
> 赞同：2
> 
> 时间：2013-01-08T03:06:46.390
> 
> 标签：c++, parameters, c++11, shared-ptr

我有一个有向无环图，由 Node 对象组成。每个节点都有一个`std::shared_ptr`到其他节点的 s 列表，这些节点是它在图中的子节点。我需要很多有用的方法，例如插入/放置/重新设置节点，测试一个节点是否是另一个节点的祖先等。有些是标准的类似 STL 的方法，有些是特定于有向无环图和特定于我的需要。

问题是，当这样的方法以一个节点为参数时，它应该带一个引用吗？一个`weak_ptr`？还是一个`shared_ptr`？我试图检查用例，但很难说。这里最好的设计是什么？我是智能指针的新手，我不确定什么是最佳选择。我应该将`shared_ptr<Node>`其视为节点对象的“表示”吗？或者也许选择的方式更复杂？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:26:27.637

仅在所有者集有意义地扩展时传递`shared_ptr`（按值）或复制它。在将节点作为纯信息处理时传递指针是安全且首选的。

请注意从任何图形对象`std::enable_shared_from_this`中检索正确的工具。`std::shared_ptr`使用该基类，有效的裸指针和共享指针本质上是等价的。我不确定它增加了多少（如果有的话）开销。（它绝对确保不会有额外的堆碎片，这`std::make_shared`也是。）

在任何地方传递`shared_ptr`只是对`shared_from_this`. 但是，当您这样做时，请通过`const`引用传递它们，因为它们只是提供信息而没有主动仲裁所有权。

# html - 将图像与表格中的文本对齐

> ID：14207627
> 
> 赞同：0
> 
> 时间：2013-01-08T03:07:30.367
> 
> 标签：html, image, text, html-table, alignment

我正在尝试将图像与表格中的文本对齐，以使图像与文本**底部**对齐。

我对表格的当前代码是：

```
<table class="table table-striped">
    <thead>  
      <tr>  
        <th><h4><img src="image.png" />Title1</h4></th>  
        <th><h4><img src="image2.png" />Title2</h4></th>  
      </tr>  
    </thead>  
    <tbody>  
      <tr>  
        <td>Subtitle1</td>
        <td>Subtitle2</td>
      </tr>  
      <tr>  
        <td>Subtitle1</td>
        <td>Subtitle2</td>
      </tr>
    </tbody>
</table> 
```

它目前看起来像这样：![http://i.stack.imgur.com/gm319.png](../Images/6eaec894cab99a6c0c2fccd0122211ef.png)

如何使图像与文本底部对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:24:05.723

也许这会做到...

```
<table class="table table-striped">
  <thead>  
    <tr>  
      <th><h4><img src="image.png" style="vertical-align: text-bottom;" />Title1</h4></th>  
      <th><h4><img src="image2.png" style="vertical-align: text-bottom;" />Title2</h4></th>  
    </tr>  
  </thead>  
  <tbody>  
    <tr>  
      <td>Subtitle1</td>
      <td>Subtitle2</td>
    </tr>  
    <tr>  
      <td>Subtitle1</td>
      <td>Subtitle2</td>
    </tr>
  </tbody>
</table> 
```

它使用样式属性 -VERTICAL-ALIGN 并分配值 TEXT-BOTTOM

# android - 测试 Android 应用内计费订阅：未找到项目

> ID：14207628
> 
> 赞同：1
> 
> 时间：2013-01-08T03:08:03.003
> 
> 标签：android, in-app-billing

我正在尝试为订阅项目实施应用内计费。

我的应用内购买工作正常，但是当我将产品 ID 更改为订阅项目 prodID 时，会出现一条错误消息，并显示“未找到项目”消息

我做错了什么？感谢您的回复。

问候

# assembly - 这个 hvmloader.c 引导加载程序代码有什么作用？

> ID：14207629
> 
> 赞同：2
> 
> 时间：2013-01-08T03:08:05.300
> 
> 标签：assembly, x86, bootloader, real-mode

我阅读了xen的代码并找到了下面的代码。但我不知道它的含义。是初始化`idt`和的代码`gdt`吗？是从实模式跳转到保护模式的代码吗？如果是，`gdt`和的物理地址在`idt`哪里？Hvmloader.c：

```
asm (
    "    .text                       \n"
    "    .globl _start               \n"
    "_start:                         \n"
    /* C runtime kickoff. */
    "    cld                         \n"
    "    cli                         \n"
    "    lgdt gdt_desr               \n"
    "    mov  $"STR(SEL_DATA32)",%ax \n"
    "    mov  %ax,%ds                \n"
    "    mov  %ax,%es                \n"
    "    mov  %ax,%fs                \n"
    "    mov  %ax,%gs                \n"
    "    mov  %ax,%ss                \n"
    "    ljmp $"STR(SEL_CODE32)",$1f \n"
    "1:  movl $stack_top,%esp        \n"
    "    movl %esp,%ebp              \n"
    "    call main                   \n"
    /* Relocate real-mode trampoline to 0x0\. */
    "    mov  $trampoline_start,%esi \n"
    "    xor  %edi,%edi              \n"
    "    mov  $trampoline_end,%ecx   \n"
    "    sub  %esi,%ecx              \n"
    "    rep  movsb                  \n"
    /* Load real-mode compatible segment state (base 0x0000, limit 0xffff). */
    "    mov  $"STR(SEL_DATA16)",%ax \n"
    "    mov  %ax,%ds                \n"
    "    mov  %ax,%es                \n"
    "    mov  %ax,%fs                \n"
    "    mov  %ax,%gs                \n"
    "    mov  %ax,%ss                \n"
    /* Initialise all 32-bit GPRs to zero. */
    "    xor  %eax,%eax              \n"
    "    xor  %ebx,%ebx              \n"
    "    xor  %ecx,%ecx              \n"
    "    xor  %edx,%edx              \n"
    "    xor  %esp,%esp              \n"
    "    xor  %ebp,%ebp              \n"
    "    xor  %esi,%esi              \n"
    "    xor  %edi,%edi              \n"
    /* Enter real mode, reload all segment registers and IDT. */
    "    ljmp $"STR(SEL_CODE16)",$0x0\n"
    "trampoline_start: .code16       \n"
    "    mov  %eax,%cr0              \n"
    "    ljmp $0,$1f-trampoline_start\n"
    "1:  mov  %ax,%ds                \n"
    "    mov  %ax,%es                \n"
    "    mov  %ax,%fs                \n"
    "    mov  %ax,%gs                \n"
    "    mov  %ax,%ss                \n"
    "    lidt 1f-trampoline_start    \n"
    "    ljmp $0xf000,$0xfff0        \n"
    "1:  .word 0x3ff,0,0             \n"
    "trampoline_end:   .code32       \n"
    "                                \n"
    "gdt_desr:                       \n"
    "    .word gdt_end - gdt - 1     \n"
    "    .long gdt                   \n"
    "                                \n"
    "    .align 8                    \n"
    "gdt:                            \n"
    "    .quad 0x0000000000000000    \n"
    "    .quad 0x008f9a000000ffff    \n" /* Ring 0 16b code, base 0 limit 4G */
    "    .quad 0x008f92000000ffff    \n" /* Ring 0 16b data, base 0 limit 4G */
    "    .quad 0x00cf9a000000ffff    \n" /* Ring 0 32b code, base 0 limit 4G */
    "    .quad 0x00cf92000000ffff    \n" /* Ring 0 32b data, base 0 limit 4G */
    "    .quad 0x00af9a000000ffff    \n" /* Ring 0 64b code */
    "gdt_end:                        \n"
    "                                \n"
    "    .bss                        \n"
    "    .align    8                 \n"
    "stack:                          \n"
    "    .skip    0x4000             \n"
    "stack_top:                      \n"
    "    .text                       \n"
    ); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:42:16.207

从代码的开头：

`cld`- 清除方向标志。

`cli`- 清除中断标志以屏蔽中断。

`lgdt gdt_desr`- 将 的值加载`gdt_desr`到中`gdt`。在源代码中查找`gdt_desr`加载到的值`gdt`。

```
"    mov  $"STR(SEL_DATA32)",%ax \n"
"    mov  %ax,%ds                \n"
"    mov  %ax,%es                \n"
"    mov  %ax,%fs                \n"
"    mov  %ax,%gs                \n"
"    mov  %ax,%ss                \n" 
```

将值存储`STR(SEL_DATA32)`到，`ax`然后从`ax`到`ds`、`es`、`fs`和（到除 之外的所有段寄存器）。`gs``ss``cs`

```
"    ljmp $"STR(SEL_CODE32)",$1f \n" 
```

跳远/远跳到`STR(SEL_CODE32):0x1f`，实际上设置`cs`到`STR(SEL_CODE32)`和`eip`到`0x1f`。

如果这是一个 32 位代码段，则处理器进入 32 位保护模式。请参阅[Stackoverflow 问题：引导加载程序 - 将处理器切换到保护模式](https://stackoverflow.com/questions/5211541/bootloader-switching-processor-to-protected-mode)。但是，我在这里看不到用于设置寄存器`PE`位的代码，`cr0`如上述示例和[Wikipedia article on protected mode](http://en.wikipedia.org/wiki/Protected_mode#Entering_and_exiting_protected_mode)中所示。

在那行代码`cs:eip`移动到这段代码`STR(SEL_CODE32):0x1f`中没有显示的那个地址（）之后，所以我不能说接下来会发生什么。`cs:eip`如果指向那里（如果那是跳转地址），它也可能在下一行继续。无论如何，其余的代码和注释看起来就像用于从保护模式切换回实模式的代码。

指令`lidt 1f-trampoline_start`将 的值加载`1f-trampoline_start`到中`idt`，因此要了解使用的实际值，请在源中搜索`if-trampoline_start`。

# sql - 将 PostgreSQL 触发器移植到 SQL Server 2008

> ID：14207631
> 
> 赞同：0
> 
> 时间：2013-01-08T03:08:10.980
> 
> 标签：sql, sql-server-2008, postgresql, triggers, migration

我必须移植一个 PostgreSQL 触发器，但由于我没有太多经验，我不知道如何更改某些部分。原始触发器是：

```
CREATE TRIGGER aerolinea_tr
AFTER UPDATE
ON public.aerolinea FOR EACH ROW
EXECUTE PROCEDURE public."actualizaWarehoseTemplate"();

DECLARE
  mviews RECORD;
BEGIN
  IF (TG_OP = 'UPDATE') THEN
    FOR mviews  IN SELECT DISTINCT template.idtemplate
                    FROM template
                    INNER JOIN vueloaerolinea ON (template.idvueloaerolinea = vueloaerolinea.idvueloaerolinea)
                    WHERE vueloaerolinea.codigolinea = old.codigolinea
    LOOP
         UPDATE detalletemplate SET idwarehose = new.idwarehouse WHERE detalletemplate.idtemplate = mviews.idtemplate;
    END LOOP;
  END IF;
  RETURN old;
END; 
```

我所做的是：

```
CREATE TRIGGER aerolinea_tr
ON aerolinea
AFTER UPDATE
AS
BEGIN
  -- if no row affected, the trigger ends.
  IF @@ROWCOUNT = 0
  BEGIN
    RETURN;
  END;

  IF EXISTS(SELECT * FROM inserted)
  BEGIN
    IF EXISTS(SELECT * FROM deleted)
    BEGIN
      --Update code goes here.
    END
  END
END; 
```

但是我找不到与 SQL Server 的 RECORD 等效的东西，而且我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:06:21.410

看起来您需要使用[cursor](http://msdn.microsoft.com/en-us/library/ms190028%28v=sql.105%29.aspx)。你可以尝试这样的事情——它不完整，因为我不知道 aerolinea 表的表模式，但尽管如此，应该让你朝着正确的方向前进：

```
DECLARE @idtemplate INT //Assuming this is an int
DECLARE @mviews CURSOR
DECLARE @newidwarehouse INT

SELECT @newidwarehouse = idwarehouse FROM INSERTED

SET @mviews = CURSOR FOR
SELECT DISTINCT template.idtemplate
FROM template
    INNER JOIN vueloaerolinea ON (template.idvueloaerolinea = vueloaerolinea.idvueloaerolinea)
    INNER JOIN DELETED ON DELETED.codigolinea = vueloaerolinea.codigolinea

OPEN @mviews 
FETCH NEXT
FROM @mviews INTO @idtemplate 
WHILE @@FETCH_STATUS = 0
BEGIN
    UPDATE detalletemplate
    SET idwarehose = @newidwarehouse 
    WHERE detalletemplate.idtemplate = @idtemplate 
FETCH NEXT
FROM @mviews INTO @idtemplate 
END
CLOSE @mviews 
DEALLOCATE @mviews 
```

顺便说一句，您在检查更新时不需要检查已插入和已删除。您只需检查已删除：

```
IF EXISTS (SELECT * FROM DELETED) 
```

# c++ - 决定在 CMakeLists.txt 中写什么 - 主要在子文件夹中

> ID：14207635
> 
> 赞同：0
> 
> 时间：2013-01-08T03:08:38.357
> 
> 标签：c++, cmake

我有一个使用 CMake 和 gtest 的简单项目。我有一个基本的 CMakeLists.txt 文件正在工作，但我想更好地了解如何使用多个 CMakeLists.txt 并连接它们。到目前为止，该项目的代码是这样的：

[https://github.com/dmonopoly/writeart/tree/10b62048e6eb6a6ddd0658123d85ce4f5f601178](https://github.com/dmonopoly/writeart/tree/10b62048e6eb6a6ddd0658123d85ce4f5f601178)

为了更快地参考，我利用的唯一 CMakeLists.txt 文件（在项目根目录中）有这个：

```
cmake_minimum_required(VERSION 2.8)

# Options
option(TEST "Build all tests." OFF) # makes boolean 'TEST' available

# Make PROJECT_SOURCE_DIR, PROJECT_BINARY_DIR, and PROJECT_NAME available
set(PROJECT_NAME MyProject)
project(${PROJECT_NAME})

set(CMAKE_CXX_FLAGS "-g") # -Wall")

#set(COMMON_INCLUDES ${PROJECT_SOURCE_DIR}/include) if you want your own include/ directory
# then you can do include_directories(${COMMON_INCLUDES}) in other cmakelists.txt files

################################
# Normal Libraries & Executables
################################
add_library(standard_lib Standard.cpp Standard.h)
add_library(converter_lib Converter.cpp Converter.h)
add_executable(main Main.cpp)

target_link_libraries(main standard_lib converter_lib)

################################
# Testing
################################
if (TEST)
    # This adds another subdirectory, which has project(gtest)
    add_subdirectory(lib/gtest-1.6.0)

    enable_testing()

    # Include the gtest library
    # gtest_SOURCE_DIR is available due to project(gtest) above
    include_directories(${gtest_SOURCE_DIR}/include ${gtest_SOURCE_DIR})

    ##############
    # Unit Tests
    ##############
    # Naming
    set(UNIT_TESTS runUnitTests)

    add_executable(${UNIT_TESTS} ConverterTest.cpp)

    # standard linking to gtest stuff
    target_link_libraries(${UNIT_TESTS} gtest gtest_main)

    # extra linking for the project
    target_link_libraries(${UNIT_TESTS} standard_lib converter_lib)

    # This is so you can do 'make test' to see all your tests run, instead of manually running the executable runUnitTests to see those specific tests.
    add_test(NAME myUnitTests COMMAND runUnitTests)
endif() 
```

**我的目标是将 Standard.cpp 和 Standard.h 移入 lib/。**不过，在我这样做的那一刻，我发现我在 CMakeLists.txt 中所做的事情的顺序很复杂。我的 gtest 设置需要该库，但该库必须在 lib/CMakeLists.txt 中创建，对吗？查找所有库和可执行文件的位置不会变得非常复杂，因为您必须查看所有 CMakeLists.txt 文件吗？

如果我在概念上遗漏了一些东西，或者如果有一个很好的例子可以用来轻松解决这个问题，那就太好了。

帮助表示赞赏，并提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:18:07.610

如果您不想使用多个`CMakeLists.txt`文件，请不要。

```
################################
# Normal Libraries & Executables
################################

add_library(standard_lib lib/Standard.cpp lib/Standard.h)
add_library(converter_lib lib/Converter.cpp lib/Converter.h)

# Main.cpp needs to know where "Standard.h" is for the #include, 
#   so we tell it to search this directory too. 
include_directories(lib) 
```

如果您确实想要 multiple `CMakeLists.txt`，则将其移出：

```
# Main CMakeLists.txt:
add_subdirectory(lib)

include_directories (${standard_lib_SOURCE_DIR}/standard_lib) 

link_directories (${standard_lib_BINARY_DIR}/standard_lib) 
```

并在`/lib/CMakeLists.txt`：

```
add_library (standard_lib Standard.cpp) 
```

这是[一个例子](http://www.cmake.org/cmake/help/examples.html)。

# c++ - 声明指向 *this* 对象的指针有什么好处或理由？

> ID：14207637
> 
> 赞同：0
> 
> 时间：2013-01-08T03:08:41.603
> 
> 标签：c++, oop

声明指向*该*对象的指针有什么好处或理由？

假设一个对象有一个私有变量“x”。

我经常看到这段代码：

```
class_name<T> &ma = *this;
ma.x = 1; 
```

代替

```
this->x = 1; 
```

甚至更简单

```
x = 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:17:30.603

当您的类的基类是模板类时，`this`指针对于引用基类的任何成员都是必需的。这就是为什么在这种情况下可能会出现前两个版本，而第三个版本会出错的原因。

前 2 个版本是相同的（在它们被修复后 - 见下文），只是在个人风格上有所不同。

```
class_name<T>& ma = *this; 
ma.x = 1;
ma.y = 2; 
```

对比

```
this->x = 1;
this->y = 2; 
```

正如@chris 指出的那样，您的第二个版本有一个编译错误，并且在您的第一个版本中，如果您不使用`&`它**涉及一个副本**，这意味着它正在做**一些非常不同**的事情（可能是**错误**的），因为更改不会影响当前对象但是一个局部变量，它将在作用域的末尾被销毁。

在不涉及模板基类的一般情况下，

```
x=1; 
```

击败所有。

# javascript - 可以修改头部吗？

> ID：14207643
> 
> 赞同：-4
> 
> 时间：2013-01-08T03:09:07.717
> 
> 标签：javascript, html, head

`<head>`页面加载后是否可以在使用 JavaScript 内部进行修改？例如，如果我为外部样式表添加元素，那会有效吗？或者如果我改变了`<title>`，那会反映吗？如果没有，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T03:10:06.603

绝对地。

虽然，更改标题最好用`document.title = "new title here";`

# c++ - 为什么我不能使用 fstream 向量？

> ID：14207646
> 
> 赞同：2
> 
> 时间：2013-01-08T03:09:30.120
> 
> 标签：c++, c++11, vector, fstream

当我尝试使用 a`vector <fstream>`时，它会输出一个编译错误。为什么 C++ 禁止 fstream 的向量？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T03:10:04.223

因为 fstream 不可复制

# jasper-reports - 如何在每页上打印组页脚

> ID：14207649
> 
> 赞同：1
> 
> 时间：2013-01-08T03:09:30.850
> 
> 标签：jasper-reports, ireport

*iReport*中是否有任何组选项可以在**每页上打印组页脚**？

这意味着组页脚将出现在组出现的每个页面中。

看看这里[链接](https://stackoverflow.com/questions/14189616/how-to-print-current-total-in-the-column-footer-of-each-intermediate-page)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:39:50.413

要使页脚出现在每个页面中，请使用页脚带。拖放一个静态文本/文本框并将页脚内容放入其中。您无需为此使用任何组选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:27:23.590

您可以尝试创建一个列页脚并使用一个变量来计算组的总和。将此变量放在列脚中，并将评估时间保留为现在。我认为这会给你你正在寻找的东西。

列页眉和页脚出现在每一页上。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T10:21:02.033

Add a Report group in Ireport then move all the text and Chart to this group then you can see page footer in each pages.

# jquery - 使用 AJAX 为多个表单提交表单 OnChange

> ID：14207653
> 
> 赞同：2
> 
> 时间：2013-01-08T03:10:36.740
> 
> 标签：jquery, ajax, forms, form-submit, onchange

我有一个包含多个表单的页面，我想通过 PHP 将其值提交并存储到 mySQL 数据库中。我的问题与此处提出的问题非常相似（[使用 AJAX 提交多个表单](https://stackoverflow.com/questions/7998050/submitting-multiple-forms-with-ajax)），除了理想情况下我想提交每个表单 onChange() 以进行处理并存储在数据库中。

我的表格一般看起来像这样：

```
<form name="form1" id="form1" action="" method="POST"> 
  <input type="text" class="input-block-level" placeholder="Placeholder text">
  <input type="text" class="input-block-level" placeholder="Placeholder text">
</form>
....
<form name="form2" id="form2" action="" method="POST"> 
  <input type="text" class="input-block-level" placeholder="Placeholder text">
  <input type="text" class="input-block-level" placeholder="Placeholder text">
</form>
.... 
```

还有我当前的 jQuery/AJAX 代码：

```
$(document).ready(function () {
    $('#form1').change(function () {
    $.post('process.php', $("#form1").serialize(), function(data) {
        $('#results').html(data);
        });
    });

}); 
```

理想情况下，我不需要为每个表单复制/粘贴此代码段（我有很多不同的表单），而是可以有一段代码在更改时适用于任何表单。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:17:05.080

您可以将 CSS 类添加到所有表单并检索所有表单以完成相同的工作。

```
$(document).ready(function () {

    // Retrieve all form on the page
    $('.formAjax').change(function () {
        $.post('process.php', $(this).serialize(), function(data) {
            // Update the result area
            $('#results').html(data);
        });
    });
}); 
```

假设您已将良好的 CSS 类添加到所有表单中。

```
<form name="form1" id="form1" action="" class="formAjax" method="POST"> 
```

注意：每个表单的id是没用的

# python - python类头中的对象有什么作用？

> ID：14207656
> 
> 赞同：-2
> 
> 时间：2013-01-08T03:11:16.230
> 
> 标签：python, class

> **可能重复：**
> [python 类继承对象](https://stackoverflow.com/questions/4015417/python-class-inherits-object)

在 Python 2.7 中，有什么区别：

```
class MyClass(Object): 
```

和

```
class MyClass: 
```

对象做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:13:27.333

在`Object`这种情况下， 的基类`MyClass`，意味着它“继承” 的方法和变量，`Object`除非被覆盖。然而，继承自`object`会创建一个“新式类”，而不是一个“旧式类”。有关更多信息，请参阅[jozzas 的评论](https://stackoverflow.com/questions/14207656/what-does-the-object-in-python-class-header-do#comment19701676_14207656)

有关继承的信息，请参阅[本教程](http://docspy2zh.readthedocs.org/en/latest/tutorial/classes.html#inheritance)。

# javascript - 使用 JavaScript 选择嵌套列表中的第一个子项

> ID：14207658
> 
> 赞同：0
> 
> 时间：2013-01-08T03:11:41.273
> 
> 标签：javascript, jquery

我试图只选择 Sally 下的第一个孩子。使用 JavaScript，如何选择 Car、Boat 和 Bike 并将字体颜色更改为红色？

```
<script type="text/javascript">
$(document).ready(function() {
    var j = jQuery.noConflict();
    j('#content2 ul li ul').children().css('color', '#ff0000');
});
</script>

<div id="content2">
    <div>
        <div>
            <ul>
                <li>Bob</li>
                <li>Sally
                    <ul>
                        <li>Car</li>
                        <li>Boat</li>
                        <li>Bike
                            <ul>
                                <li>Red</li>
                                <li>Green</li>
                                <li>Blue</li>
                            </ul>
                        </li>
                    </ul>
               </li>
               <li>Larry</li>
               <li>Mo</li>
            </ul>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:13:56.587

`querySelectorAll`将基于 CSS 选择器选择元素，因此一种方法是：

```
var elements = document.querySelector('#content2 > div > div > ul > li > ul > li'); 
```

哦，你有 jQuery。然后你只需要更具体一点，因为默认情况下会匹配后代：

```
j('#content2 > div > div > ul > li > ul > li').css('color', 'red'); 
```

# java - 标记 "," 的语法错误，此标记后应有名称

> ID：14207659
> 
> 赞同：-2
> 
> 时间：2013-01-08T03:12:12.913
> 
> 标签：java, syntax, comma

有人能告诉我这里的语法错误是什么吗？

```
 @Override
     protected void onDraw(Canvas canvas) {
        canvas.drawBitmap(titleGraphic, (0, 0, null);
     } 
```

我收到我在“titleGraphic”之后的逗号主题行中输入的错误消息。我想我在“null”之后错过了另一个“）”，但逗号给我带来了麻烦。这就是我尝试从书中得到的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:13:44.713

你有一个额外的父母：

```
canvas.drawBitmap(titleGraphic, (0, 0, null);
                                ^ 
```

# jquery - Bottlepy：无法访问静态文件夹中的数据文件

> ID：14207661
> 
> 赞同：1
> 
> 时间：2013-01-08T03:12:19.457
> 
> 标签：jquery, bottle

我是python和bottlepy框架的新手。我遇到了静态文件的问题。由于某种原因（我不知道），它没有找到数据文件。

在我的模板文件中，我试图通过 JQUERY AJAX 方法访问数据文件，但收到以下错误消息：`POST /static/jsonFile HTTP/1.1" 404 41`

这是我的python脚本：

```
from bottle import route, template, request, error, debug, static_file,run, TEMPLATE_PATH, get

TEMPLATE_PATH.insert(0,'./templates/')

@路线（'/'）
@路线地图'）
@route('/mapfile')

定义地图文件（）：
   输出 = 模板（'slippyMap'）
   返回输出

@route('/数据/')
   def 数据点（文件名）：
   返回静态文件（文件名，root='/home/www/htmldocs/bottleapp3/'）  

```

* * *

这是我模板中的 ajax 方法：

```
$(文档).ready(函数(){

$.ajax({
         url: '静态/jsonFile',
         类型：“发布”，
         数据类型：'json'，
         缓存：假，
         数据：'静态/jsonFile'，
         成功：功能（数据）{
         .
         .
         .

```

任何想法我做错了什么？

编辑：我认为问题可能是由于我在 AJAX 方法中没有（或不需要）我的 URL 参数的脚本。我的问题是如何让 AJAX 忽略 URL 参数并访问 data 参数上的数据文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:21:13.493

试试 url “/data/jsonFile”。

或像这样修改您的代码：

```
@route('/static/')
def data_points(filename):
   return static_file (filename, root='/home/www/htmldocs/bottleapp3/') 
```

# css - 有什么方法可以在没有样式属性的情况下修复这个间距？引导程序

> ID：14207671
> 
> 赞同：0
> 
> 时间：2013-01-08T03:14:21.590
> 
> 标签：css, twitter-bootstrap

看看这个：http: [//jsfiddle.net/TtYtS/8/](http://jsfiddle.net/TtYtS/8/)

```
<div class="indent input-prepend pull-right" style="margin:2px 0 0 20px">
    <span class="add-on">
        <i class="icon-search"></i>
    </span>
    <input type="text" class="input-medium" placeholder="Search by brand name">
</div> 
```

由于我添加了样式属性，搜索框（垂直）与菜单项对齐。它还在它们之间创建了一些间距。

有没有办法在没有样式属性或创建我自己的类的情况下完成这两者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:55:11.843

你可以尝试改变

```
<div class="indent input-prepend pull-right" style="margin:2px 0 0 20px"> 
```

至 `<div class="input-prepend offset1">`

# c# - C# XNA 和单体游戏。这值得么？

> ID：14207676
> 
> 赞同：-3
> 
> 时间：2013-01-08T03:15:06.930
> 
> 标签：c#, java, xna, monogame

我了解到我可以通过 monogame 使带有 XNA 的 C# 与 Mac/Linux 兼容，但是 monogame 是从 C# 单独开发的，所以没有人知道他们是否会跟上 C# 的发展？

使用 C# 是否值得冒险，或者我应该安全地使用它并在 Java 中编程以实现跨平台兼容性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T03:19:01.327

取决于您正在开发的环境：

*   MonoGame 支持 XNA 4，所以如果您愿意长期坚持使用 XNA 4，那么您就可以了。
*   这两种语言本身有各种优点和缺点，例如参见[http://en.wikipedia.org/wiki/Comparison_of_C_Sharp_and_Java](http://en.wikipedia.org/wiki/Comparison_of_C_Sharp_and_Java)。与现在更好地满足您的需求的那个一起使用是有好处的，除非您有理由相信您需要跟上最新的 XNA 并随着时间的推移维护您的游戏。
*   可移植性是一件好事（我通常赞成），但这并不是全部。仔细看看你是否真的需要你的游戏是可移植的。

还：

*   你在和别人一起工作吗？他们更懂哪种语言？他们的看法是什么？
*   您是否需要招募/寻找更多具有一种或另一种语言经验的人？你附近有更多的一个或另一个吗？

# jquery - 将 div 放在一个圆圈中

> ID：14207689
> 
> 赞同：2
> 
> 时间：2013-01-08T03:17:06.600
> 
> 标签：jquery, jquery-ui

我有以下代码将 div 放在一个圆圈周围。但是，我想旋转圆圈以从圆圈顶部更改 div 的顺序。

```
function drawCircle(selector, center, radius, angle, x, y)
    {

    var total = $(selector).length;
    var alpha = Math.PI * 2 / total;

    $(selector).each(function(index)
    {
        var theta = alpha * index;
        var pointx = Math.floor(Math.cos( theta ) * radius);
        var pointy = Math.floor(Math.sin( theta ) * radius );

        $(this).css('margin-left', pointx + x + 'px');
        $(this).css('margin-top', pointy + y + 'px');
    });

   }

  $(document).ready(function()
  {

   drawCircle('.box', 0, 250, 0, 500, 500);

  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:18:45.220

```
var theta = Math.PI/2 - alpha * index; 
```

那很难：p

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:03:24.643

为什么不用 CSS 旋转一切？只需使用[转换](https://developer.mozilla.org/en-US/docs/CSS/transform)属性。

# android - 在 PhoneGap 中的后退按钮 Android 上停止退出 - 构建

> ID：14207690
> 
> 赞同：5
> 
> 时间：2013-01-08T03:17:10.527
> 
> 标签：android, cordova

我正在通过**PhoneGap Build** online 构建我的应用程序。我想更改后退按钮的默认行为

```
$(document).ready(function(e) {
    document.addEventListener("backbutton", onBackKeyDown, false);
});

function onBackKeyDown(){
    alert('back');
    return false;
} 
```

它不起作用我已经寻找解决方案。但是，他们都显示要更改 PhoneGap 库中的**java**代码，这不是我的情况。我正在以*.zip*格式提交我的应用程序，其中包含*config.xml*。

是否可以使用*config.xml*？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T05:44:30.657

首先，正如@Mejo 指出的那样，我做错了，谢谢。这是问题的解决方案。

**第 1 步：**将脚本包含在 HTML 中不需要物理地包含在应用程序 zip 中，*PhoneGap Build 会自动包含它*

`<script src="cordova.js"></script>`或者`<script src="phonegap.js"></script>`其中任何一个都可以正常工作。

**第 2 步：**将此添加到脚本以获取**设备就绪**调用：

```
document.addEventListener("deviceready", onDeviceReady, false); 
```

**第 3 步：**将*事件侦听*器添加到**后退按钮**并将您的代码添加到该调用：

```
function onDeviceReady(){
    document.addEventListener("backbutton", onBackKeyDown, false);
}
function onBackKeyDown(){
    alert('back');
    return false;
} 
```

如果您不通过*config.xml将***minSDK的首选项设置为应用程序，现在仍然无法正常工作**

 ***第 4 步：**将此添加到*config.xml的首选项区域*

`<preference name="android-minSdkVersion" value="5" />`

供参考：http: [//community.phonegap.com/nitobi/topics/how_to_handle_back_button_in_android](http://community.phonegap.com/nitobi/topics/how_to_handle_back_button_in_android)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T04:30:07.897

它在 Cordova API 文档中说

> **通常，一旦您收到 PhoneGap 'deviceready' 事件**，您将希望使用 document.addEventListener 附加一个事件侦听器。

 **所以像这样改变你的代码

```
document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is loaded and it is now safe to make calls PhoneGap methods
function onDeviceReady() {
    // Register the event listener
    document.addEventListener("backbutton", onBackKeyDown, false);
}

// Handle the back button
function onBackKeyDown() {
         //Your backbutton code
} 
```***

# spring-webflow - 从word文档调用时带有url参数的Spring webflow问题

> ID：14207691
> 
> 赞同：2
> 
> 时间：2013-01-08T03:17:11.553
> 
> 标签：spring-webflow

我有一个受站点管理员保护的 spring webflow 应用程序。url 通常有一些应用程序用来执行其功能的参数。实施细节如下——

1.  当调用 url 时，我有一个名为 authorize 的初始流程，它接受请求参数并验证它们，如果一切正常，我将所有参数都保存在 javabean 中，并且这个 bean 存储在“flowscope”中

2.  上面的 bean 被传递给下一个流进行各种操作

当从浏览器调用 url 时，这很好用，但是当从 word 文档调用 url 时，我们会获得两次身份验证对话框，但 url 参数不会传递给浏览器。

任何人都面临类似的问题 - 请让我知道

提前致谢。

问候， Kiran C Sagi。

# installshield - 主要升级与次要升级版本号

> ID：14207692
> 
> 赞同：1
> 
> 时间：2013-01-08T03:17:14.083
> 
> 标签：installshield

我们有一个应用程序，其中有一系列版本。生产中的应用程序的当前版本是 V2.1

现在我们有一组要添加的新 UI 屏幕以及对应用程序的相关更改。我们计划将这些更改发布为 V3.0。

我们需要进行主要升级还是次要升级？如果我们使用主要升级，我们是否需要重新安装应用程序？或将版本更改为 2.2 并进行次要升级？

请建议我使用这些安装程序的最佳方法。

注意：我们使用**Install Shield Premium** 来构建安装程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:05:21.453

如果您所做的唯一更改是对安装向导的 UI，则没有根本理由偏爱小升级或大升级。通常，选择是由您对应用程序本身或组成它的文件所做的更改驱动的。

次要升级将支持首次安装，并为升级体验提供更短的更新。重大升级将在安装新版本之前卸载当前存在的内容。任何一种都可以使用任何一组版本号来完成 - 区别主要取决于您是否更改了`ProductCode`.

有关详细信息，请参阅[修补和升级](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370579.aspx)。有些人更喜欢创建主要升级，因为它们更容易推理。

# java - 格式化字符串并在java中写入文件

> ID：14207693
> 
> 赞同：0
> 
> 时间：2013-01-08T03:17:15.313
> 
> 标签：java

我有一些要格式化并写入文件的字符串，

示例字符串，

```
text1
text2
text3
text4
text5
text6
text7
text8
text9
text10
text11
text12
text13 
```

前 10 行应位于第一列，其余行应位于第二列。从第一列到第二列应该有 30 个空格

这是我试过的，

```
 File f = new File("sample.txt");
        FileWriter fw = new FileWriter(f);
        pw = new PrintWriter(fw);
        String text;

        for(int i=0; i<15; i++){
                text = "text" + i;

                if(i <= 10){
                    pw.format(text + "\n");
                } else{
                    pw.format("%30s",text + "\n");
                }    
            }
        } 
```

我附上了预期输出的图像。

![在此处输入图像描述](../Images/a190a181cdf1b93a131e9d19943cb905.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:22:07.987

您的循环需要进行十次迭代（每行一次），而不是十五次（每个单词一次）。在每次迭代中，您必须考虑两个数字：

*   行号，和
*   行号加十

第一个数字总是被打印出来；仅当第二个数字为 15 或更少时，第二个数字才会与第一个数字一起打印：

```
for(int i=0; i != 10 ; i++) {
    String text1 = "text" + i;
    String text2 = "text" + (i+10);
    if(i <= 5){
        pw.format("%s%30s\n",text1, text2);
    } else {
        pw.format(text + "\n");
    }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:53:31.423

尝试

```
 for (int i = 1; i <= 10; i++) {
        String text1 = "text" + i;
        String text2 = i <= 3 ? "text" + (i + 10) : "";
        System.out.printf("%s%30s\n", text1, text2);
    } 
```

输出

```
text1                        text11
text2                        text12
text3                        text13
text4                              
text5                              
text6                              
text7                              
text8                              
text9                              
text10 
```

# c++ - 使用 sscanf 提取不带分隔符的浮点数（仅使用预期长度）

> ID：14207694
> 
> 赞同：0
> 
> 时间：2013-01-08T03:17:19.983
> 
> 标签：c++, c, text-parsing

假设我们正在读取一个格式为每行包含两个浮点数的文件，第一个浮点数占用该行的前 7 个字符，第二个浮点数占用该行的接下来的 7 个字符。例如：

```
 1.111222.222
333.333 44.444 
```

鉴于此示例代码

```
float a, b;
sscanf("  1.111222.222", "%7f%7f", &a, &b);
printf("%f %f\n", a, b); 
```

以下是输出：

```
1.111220 2.222000 
```

在跳过空格之前，这 7 个字符不会开始计入第一个浮点数。有没有办法解析这些浮点数并将空格作为浮点数的一部分包含在内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:17:19.983

我能想到的最好的办法是将浮点数作为字符串读取，`%7[^\n]`然后将该输入解析为浮点数。

```
float a, b;
char a_buff[7 + 1];
char b_buff[7 + 1];
sscanf("  1.111222.222", "%7[^\n]%7[^\n]", a_buff, b_buff);
sscanf(a_buff, "%f", &a);
sscanf(b_buff, "%f", &b);
printf("%f %f\n", a, b); 
```

# c++ - 如果我还需要使用 ODE，是否应该从 Eigen 切换到 MTL4？

> ID：14207698
> 
> 赞同：2
> 
> 时间：2013-01-08T03:17:29.710
> 
> 标签：c++, matrix, eigen, ode

我正在寻找可在 Linux (Fedora) 系统上使用的 C++ 矩阵库。目的是为计算神经科学实现[连续吸引子神经网络](http://en.wikipedia.org/wiki/Attractor_network)等。我已经开始使用[Eigen](http://eigen.tuxfamily.org/dox/index.html)了。然而，我意识到我的任务也需要微分方程求解器并遇到了[Odeint](http://headmyshoulder.github.com/odeint-v2/)（最近似乎已被 boost 接受）。Odeint 与 MTL4 一起使用作为[此页面的详细信息](http://headmyshoulder.github.com/odeint-v2/highlights.html)。我现在想知道是否应该使用 MTL4 而不是 Eigen 重写我的代码，以便能够正确使用 odeint。

我查看了 google 和 stackoverflow 本身，但没有找到比较

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:15:50.400

我很确定 Eigen 也可以与 odeint 一起使用。因此，是否要更改为 MTL 取决于您。

odeint [http://headmyshoulder.github.com/odeint-v2/doc/boost_numeric_odeint/odeint_in_detail/state_types__algebras_and_operations.html](http://headmyshoulder.github.com/odeint-v2/doc/boost_numeric_odeint/odeint_in_detail/state_types__algebras_and_operations.html)的文档展示了如何使任意类型适应 odeint。我认为 Eigen 支持表达式模板（因此您可以编写向量或矩阵表达式，如`M1=a*M2+b*M3;`），以便您可以将 odeint 与`vector_space_algebra`和`default_operations`. 您所要做的就是调整 odeint 的大小调整机制。查看 odeint 中的 MTL 绑定以了解其工作原理。这很简单。

# c# - c# Function 与 Timer(AutoFunction) 一起使用

> ID：14207703
> 
> 赞同：0
> 
> 时间：2013-01-08T03:18:00.633
> 
> 标签：c#, function, automation

我确实有一个检查功能，一旦打开应用程序就会运行。如何让它像每 20 秒自动运行该功能一样？

```
Main()
{
  Checking();
}

public void Checking() // run this function every 20 seconds
{ // some code here   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:24:46.087

您可以使用 C# Timer 类

```
public void Main()
{
    var myTimer = new Timer(20000);

    myTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

    myTimer.Enabled = true;

    Console.ReadLine();
}

private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
        Console.WriteLine("The Elapsed event was raised at {0}", e.SignalTime);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:29:50.053

```
Main()
{
   Timer tm = new Timer();
   tm.Interval = 20000;//Milliseconds
   tm.Tick += new EventHandler(tm_Tick);
   tm.Start();
}
void tm_Tick(object sender, EventArgs e)
{
   Checking();       
}

public void Checking()
{
   // Your code
} 
```

# python - IOError：[Errno 32] 管道时管道损坏：`prog.py | 其他命令`

> ID：14207708
> 
> 赞同：103
> 
> 时间：2013-01-08T03:18:28.020
> 
> 标签：python, python-3.x, sigpipe

我有一个非常简单的 Python 3 脚本：

```
f1 = open('a.txt', 'r')
print(f1.readlines())
f2 = open('b.txt', 'r')
print(f2.readlines())
f3 = open('c.txt', 'r')
print(f3.readlines())
f4 = open('d.txt', 'r')
print(f4.readlines())
f1.close()
f2.close()
f3.close()
f4.close() 
```

但它总是说：

```
IOError: [Errno 32] Broken pipe 
```

我在网上看到了解决这个问题的所有复杂方法，但是我直接复制了这段代码，所以我认为代码有问题而不是 Python 的 SIGPIPE。

我正在重定向输出，所以如果上面的脚本被命名为“open.py”，那么我要运行的命令是：

```
open.py | othercommand 
```

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-05-31T20:05:58.950

问题是由于 SIGPIPE 处理造成的。您可以使用以下代码解决此问题：

```
from signal import signal, SIGPIPE, SIG_DFL
signal(SIGPIPE,SIG_DFL) 
```

**更新**：正如评论中指出的那样，[python 文档](https://docs.python.org/3/library/signal.html#note-on-sigpipe)已经有了一个很好的答案。

[有关此解决方案的背景信息，请参见此处](http://newbebweb.blogspot.com/2012/02/python-head-ioerror-errno-32-broken.html)。更好的答案[在这里](https://stackoverflow.com/questions/34718208/catch-broken-pipe-in-python-2-and-python-3)。

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2015-05-07T03:50:10.460

将来自许多有用答案的信息与一些附加信息结合在一起：

*   **[`SIGPIPE`](https://www.gnu.org/software/libc/manual/html_mono/libc.html#Error-Codes)当没有进程从管道*读取*时（不再），[标准 Unix 信号](https://www.gnu.org/software/libc/manual/html_mono/libc.html#Error-Codes)被发送到写入*管道*[的进程。](https://en.wikipedia.org/wiki/Anonymous_pipe)**

     **   这不一定是*错误*情况；某些 Unix 实用程序（例如`head` *设计*使然）一旦接收到足够的数据，就会过早地停止从管道中读取。
    *   因此，引发此错误的一种简单方法是通过管道传输到`head`^([1])；例如：
        *   `python -c 'for x in range(10000): print(x)' | head -n 1`* 
**   **默认情况下**- 即**如果写入过程没有显式*陷阱* `SIGPIPE`*`141`****-`128`写入**过程简单*****终止*****，其**退出*代码*设置为.`13``SIGPIPE`*

    ***   **但是**，根据设计，**Python*本身会*捕获`SIGPIPE`**并将**其转换为`BrokenPipeError``IOError`**`errno`具有value的 Python **(Python 3) /** **(Python 2)**实例`errno.EPIPE`。

    *   注意：如果您*在 Windows 上*使用 Unix 仿真环境，错误可能会有所不同 - 请参阅此答案。*   **如果 Python*脚本*没有捕获异常***，Python***会*****输出错误消息`BrokenPipeError: [Errno 32] Broken pipe`**（**Python 3**，可能*两次*，`Exception ignored in: <_io.TextIOWrapper name='<stdout>' mode='w' encoding='utf-8'>`夹在中间）/ **`IOError: [Errno 32] Broken pipe`**（**Python 2**）并使用退出代码^([2])**终止脚本`1`**- 这是 Johannes 的症状（OP ） 锯。**** 

 *****Windows*注意事项（`SIGPIPE`仅 Unix 信号）**

*   如果您的脚本也需要直接在 Windows 上运行，您可能必须有条件地绕过引用的代码`SIGPIPE`，如[本答案](https://stackoverflow.com/a/66872418/45375)所示。

*   如果您的脚本在 Windows 上的*Unix 子系统*`SIGPIPE`中运行，则信号的显示方式可能与 Unix 上*不同*- 请参阅[此答案](https://stackoverflow.com/a/66874837/45375)。

* * *

有两种方法可以解决这个问题：

**通常，*不*建议将此异常*静音***，因为它可能表示严重的错误情况，具体取决于脚本的用途，例如网络套接字的接收端意外关闭。

*   但是，**如果您的脚本是一个*命令行实用程序***，那么安静终止可能不仅可以接受而且是*首选*，以便与标准`head`实用程序很好地配合，例如，您可以按照以下方式***安静地*****中止***[`signal.signal()`](https://docs.python.org/3/library/signal.html#signal.signal)，用于安装平台的*默认信号处理程序*（其行为如上所述），也如[akhan 的回答](https://stackoverflow.com/a/16865106/45375)所示（适用于 Python 3 和 2）：*

 *```
# ONLY SUITABLE FOR COMMAND-LINE UTILITIES

# Install the default signal handler.
from signal import signal, SIGPIPE, SIG_DFL
signal(SIGPIPE, SIG_DFL)

# Start printing many lines.
# If this gets interrupted with SIGPIPE, 
# the script aborts quietly, and the process exit code is set to
# 141 (128 + SIGPIPE)
for x in range(10000): print(x) 
```

*   否则，如果您想**自己处理 SIGPIPE 触发的异常**（适用于 Python 3 和 2，改编自[docs](https://docs.python.org/3/library/signal.html#note-on-sigpipe)）：

```
import sys, os, errno

try:

  # Start printing many lines.
  for x in range(10000): print(x)

  # IMPORTANT: Flush stdout here, to ensure that the 
  # SIGPIPE-triggered exception can be caught.
  sys.stdout.flush()

except IOError as e: 
  # Note: Python 3 has the more specific BrokenPipeError,
  #       but this way the code works in Python 2 too.
  if e.errno != errno.EPIPE: raise e # Unrelated error, re-throw.

  # Python flushes standard streams on exit; redirect remaining output
  # to devnull to avoid another BrokenPipeError at shutdown
  devnull = os.open(os.devnull, os.O_WRONLY)
  os.dup2(devnull, sys.stdout.fileno())

  # ... perform other handling.
  # Note: You can't write to stdout here.
  #       (print() and sys.stdout.write won't work)
  #       However, sys.stderr.write() can be used.
  sys.stderr.write("SIGPIPE received, terminating.\n")

  # Finally, exit with an exit code of choice.
  sys.exit(141) 
```

* * *

^([1] 请注意，`bash`默认情况下，您只会看到`head`' 退出代码 - 这是`0`- 反映在`$?`之后。用于`echo ${PIPESTATUS[0]}`查看 Python 的退出代码。)

^([2] 奇怪的是，在 macOS 10.15.7 (Catalina) 和 Python 3.9.2（但不是 2.x）上，我看到了 exit code `120`，但文档说`1`，这也是我在 Linux 上看到的。)

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2013-01-08T04:33:42.813

我没有重现这个问题，但也许这种方法可以解决它：（逐行写入`stdout`而不是使用`print`）

```
import sys
with open('a.txt', 'r') as f1:
    for line in f1:
        sys.stdout.write(line) 
```

* * *

你能接住坏掉的管子吗？这将文件`stdout`逐行写入，直到管道关闭。

```
import sys, errno
try:
    with open('a.txt', 'r') as f1:
        for line in f1:
            sys.stdout.write(line)
except IOError as e:
    if e.errno == errno.EPIPE:
        # Handle error 
```

您还需要确保`othercommand`在管道变得太大之前从管道中读取 - [https://unix.stackexchange.com/questions/11946/how-big-is-the-pipe-buffer](https://unix.stackexchange.com/questions/11946/how-big-is-the-pipe-buffer)

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2013-01-08T11:10:14.187

当您尝试写入另一端已关闭的管道时，会发生“Broken Pipe”错误。由于您显示的代码不直接涉及任何管道，我怀疑您正在 Python 之外执行某些操作，以将 Python 解释器的标准输出重定向到其他地方。如果您正在运行这样的脚本，则可能会发生这种情况：

```
python foo.py | someothercommand 
```

您遇到的问题`someothercommand`是退出时未读取其标准输入中可用的所有内容。这会导致您的写入（通过`print`）在某些时候失败。

我能够在 Linux 系统上使用以下命令重现该错误：

```
python -c 'for i in range(1000): print i' | less 
```

如果我在`less`不滚动其所有输入（1000 行）的情况下关闭寻呼机，Python 将以`IOError`您报告的相同方式退出。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2016-03-03T00:59:34.543

我觉得有必要指出使用的方法

```
signal(SIGPIPE, SIG_DFL) 
```

确实很**危险**（正如 David Bennet 在评论中已经建议的那样），并且在我的情况下，结合使用会导致依赖于平台的有趣业务`multiprocessing.Manager`（因为标准库依赖于在多个地方提出的 BrokenPipeError）。简而言之，这是一个漫长而痛苦的故事，这就是我修复它的方法：

首先，您需要捕获`IOError`(Python 2) 或`BrokenPipeError`(Python 3)。根据您的程序，您可以尝试在此时提前退出或忽略异常：

```
from errno import EPIPE

try:
    broken_pipe_exception = BrokenPipeError
except NameError:  # Python 2
    broken_pipe_exception = IOError

try:
    YOUR CODE GOES HERE
except broken_pipe_exception as exc:
    if broken_pipe_exception == IOError:
        if exc.errno != EPIPE:
            raise 
```

然而，这还不够。Python 3 可能仍然会打印这样的消息：

```
Exception ignored in: <_io.TextIOWrapper name='<stdout>' mode='w' encoding='UTF-8'>
BrokenPipeError: [Errno 32] Broken pipe 
```

不幸的是，摆脱该消息并不简单，但我终于找到了[http://bugs.python.org/issue11380](http://bugs.python.org/issue11380)，罗伯特柯林斯建议我把这个解决方法变成一个装饰器，你可以用它来包装你的主要功能（是的，这有点疯狂缩进）：

```
from functools import wraps
from sys import exit, stderr, stdout
from traceback import print_exc

def suppress_broken_pipe_msg(f):
    @wraps(f)
    def wrapper(*args, **kwargs):
        try:
            return f(*args, **kwargs)
        except SystemExit:
            raise
        except:
            print_exc()
            exit(1)
        finally:
            try:
                stdout.flush()
            finally:
                try:
                    stdout.close()
                finally:
                    try:
                        stderr.flush()
                    finally:
                        stderr.close()
    return wrapper

@suppress_broken_pipe_msg
def main():
    YOUR CODE GOES HERE 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-12-06T20:52:12.003

我知道这不是“正确”的做法，但如果您只是对摆脱错误消息感兴趣，您可以尝试以下解决方法：

```
python your_python_code.py 2> /dev/null | other_command 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-04-08T14:54:59.817

这里的最佳答案 ( `if e.errno == errno.EPIPE:`) 对我来说并没有真正起作用。我有：

```
AttributeError: 'BrokenPipeError' object has no attribute 'EPIPE' 
```

但是，如果您只关心在特定写入时忽略损坏的管道，这应该可以工作。我认为它比捕获 SIGPIPE 更安全：

```
try:
    # writing, flushing, whatever goes here
except BrokenPipeError:
    exit( 0 ) 
```

显然，如果您遇到损坏的管道，您显然必须决定您的代码是否真的，真正完成，但对于大多数目的，我认为这通常是正确的。（不要忘记关闭文件句柄等）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-17T18:23:24.107

如果脚本输出的读取端过早终止，也会发生这种情况

即 open.py | 其他命令

如果 otherCommand 退出并且 open.py 尝试写入标准输出

我有一个糟糕的 gawk 脚本，它对我来说很可爱。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-07-08T01:16:09.443

根据问题的确切原因，设置一个环境变量可能会有所帮助，`PYTHONUNBUFFERED=1`这会强制 stdout 和 stderr 流不缓冲。请参阅：[https ://docs.python.org/3/using/cmdline.html#cmdoption-u](https://docs.python.org/3/using/cmdline.html#cmdoption-u)

所以，你的命令

```
open.py | othercommand 
```

变成：

```
PYTHONUNBUFFERED=1 open.py | othercommand 
```

例子：

```
$ python3 -m http.server | tee -a access.log
^CException ignored in: <_io.TextIOWrapper name='<stdout>' mode='w' encoding='UTF-8'>
BrokenPipeError: [Errno 32] Broken pipe

$ PYTHONUNBUFFERED=1 python3 -m http.server | tee -a access.log
Serving HTTP on 0.0.0.0 port 8000 (http://0.0.0.0:8000/) ...
^C
$ 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2015-01-28T09:56:05.397

关闭应该按照打开的相反顺序进行。***

# php - 意识形态查询：PHP 上的重构与预加载方法

> ID：14207711
> 
> 赞同：2
> 
> 时间：2013-01-08T03:18:38.493
> 
> 标签：php, theory

好吧，我不知道我是否可以在这里发布类似的东西。但我很确定这一切都是我们可以讨论新想法以提高知识的正确场所。正确的？

我在想这个：当使用 PHP 作为 APACHE 模块时，对 PHP 文件的每个请求都会生成一个新进程来运行您的代码。通常我们加载多个文件（`include`'s）并执行各种程序。所以猜猜我们在哪里运行了“index.php”，整个过程会重复几次，必要时会重复几次。

一个实际的例子：如果我们运行一个加载 10 个类的特定 index.php，PHP 将解析所有文件并在需要时执行有趣的部分。它将生成 CPU、内存和存储的 I/O 使用情况。

```
<?php

    require_once 'classes/File.php';
    require_once 'classes/Event.php';
    require_once 'classes/Mobile.php';
    // ...

    File::emptyDir('tmp');

?> 
```

它将加载每个类，解析并执行它。好的。

因此，在我不需要多次执行所需文件的环境中，只需执行一次，并且只使用您的方法，如果我创建一个套接字环境以将其用于每个用户请求，是否可以通过避免冗余来超速 PHP 访问？

一个简单的用户交互示例：

1.  用户发起请求`/page?version=1.3`。
2.  `.htaccess`重定向到`request.php`引擎。
3.  引擎检查是否存在空闲的预加载服务（`service.php`的套接字）并使用它。如果没有，请启动一个新服务（预加载您的代码）并使用它。
4.  将用户数据（as`$_SERVER`和`$_GET`）发送到服务（例如 JSON），它将变为 WORKING 状态。
5.  服务将`request.php`再次返回用户数据。并将其转为 IDLE 以在下一个请求中使用。并且会在很长的空闲时间后关闭。

问题是：这种方法可以通过避免每次都解析所有代码（不包括操作码优化器）、准备类等来超速 PHP？

我想到了一些理论上的缺点/优势：

*   GOOD：可能会很快转过请求；
*   GOOD：将避免每次加载同一个文件，或者每次都创建一个新进程；
*   好：可以控制每个线程实例和你的状态；
*   中性：如果您更改某些文件，您需要关闭所有服务以创建一个新的更新文件。解决方案：避免这种情况，在开发环境中，每个主要请求都会启动一个新服务。
*   坏：将使用内存更多时间，而不是在每次请求后释放；

# gdb - 如何查看分段错误（核心转储）

> ID：14207712
> 
> 赞同：1
> 
> 时间：2013-01-08T03:18:42.430
> 
> 标签：gdb, segmentation-fault

我无法继续看到核心被倾倒。

我打字的时候得到了这个

```
gdb normal_estimation core

Reading symbols from /home/sai/Documents/pcl_learning/normal_estimation/build/normal_estimation...(no debugging symbols found)...done.

warning: core file may not match specified executable file.
[New LWP 11816]

warning: Can't read pathname for load map: Input/output error.
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/i386-linux-gnu/libthread_db.so.1".
Core was generated by `./normal_estimation'.
Program terminated with signal 11, Segmentation fault.
#0  0xb53101d6 in free () from /lib/i386-linux-gnu/libc.so.6
(gdb) 
```

请让我知道我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T04:06:20.193

> 程序以信号 11 终止，分段错误。
> `#0 0xb53101d6 in free () from /lib/i386-linux-gnu/libc.so.6`

您需要学习的第一个命令是`backtrace`（或其同义词：）`where`。

这将告诉您哪些代码调用了`free`，哪些代码崩溃了。

但是，该代码可能与实际问题无关：任何崩溃`free`总是由某种堆损坏引起的（释放未分配的内存，释放相同的内存两次，写入已经释放的内存，或溢出分配的缓冲区）。

在 Linux 上诊断堆损坏最有用的工具是[Valgrind](http://valgrind.org)和[AddressSanitizer](http://code.google.com/p/address-sanitizer/wiki/AddressSanitizer)。这些工具中的任何一个都有可能*准确地*告诉您您做错了什么。

# iis - 尝试在 IIS 上运行第一个 python 脚本时出错

> ID：14207717
> 
> 赞同：4
> 
> 时间：2013-01-08T03:19:07.777
> 
> 标签：iis, python-3.x

我遵循了如何为 IIS 设置 Python 的步骤：IIS 上的[Python：如何？](https://stackoverflow.com/questions/6823316/python-on-iis-how?s=554506ed-4da3-4f4b-a548-0944c9bad077)

但是当我编写脚本并尝试运行它时，它在第一行就失败了。我收到此错误消息：

> HTTP 错误 502.2 - Bad Gateway 指定的 CGI 应用程序因未返回完整的 HTTP 标头集而行为不端。它确实返回的标题是“ File "C:\Development\Python\helloworld.py", line 1 print 'Content-Type: text/plain' ^ SyntaxError: invalid syntax ”。

这是我对 python 的第一次尝试。出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T03:45:34.637

因此，您的示例`helloworld.py`需要更改为：

```
print('Content-Type: text/plain')
print('')
print('Hello, world!') 
```

Python 3 将 print 更改为使用函数调用语法（可以在 python 2 中使用）。

# row-number - 根据行号更新 SQL Server 2008

> ID：14207719
> 
> 赞同：1
> 
> 时间：2013-01-08T03:19:10.837
> 
> 标签：row-number

这个有点奇怪，我缺乏经验让我问这个。

我有一个更新要做，因为我在抓取这些数据的地方把表格放在一起有多糟糕，这让它有点困难。

场景：每位患者可能有 1 到 x 次就诊。我想抓住最后一次访问。这就是问题所在 - 一名患者可以有两个或三个 ID。这些 ID 链接到一个 ID，以帮助将它们迁移到一个新的数据库并在一个 ID 下。

现在，我尝试了交叉应用中的前 1 名和 maxid 的加入。我可以让其中一些工作，但不是全部。所以我使用行号排名来获取特定人访问的次数。但是，我必须为每次访问运行更新以获取最后一个，因为它将覆盖前一个。

有没有办法使用 row_number() over (partition by B.Uid order by B.Uid) PID

所以我会在 pid = 1 的地方运行一个传递，然后在 pid = 2 的地方运行另一个传递，依此类推。

我认为必须有一种方法让它完成一次通过 - 通过设置一些 while 循环或检查以查看最高 PID 然后更新。

# magento-1.4 - 为什么从 Magento 1.3 升级后订单中没有付款方式信息

> ID：14207721
> 
> 赞同：3
> 
> 时间：2013-01-08T03:19:15.560
> 
> 标签：magento-1.4, magento

我正在调查一个问题，即在将客户端站点从 1.3 升级到 1.7 之前下的订单无法使用“*退款”按钮。*我正在尝试从销售订单 > 发票 > 贷项通知单创建贷项通知单。

深入研究代码和数据，似乎`$this->getCardsStorage()`没有返回任何存储的信用卡以用于升级之前的订单付款。事实上，`additional_information`对于这些订单，sales_flat_order_payment 表中的字段为 NULL - 我相信该字段是在 1.4 或更高版本中创建的。

对我来说奇怪的是，对于 1.4 之前创建的支付数据将没有向后兼容性。我已经对这个问题进行了相当多的搜索，我能找到的最接近的事情是人们在升级后完全遇到退款问题。对我来说不是这种情况 - 升级后订单的退款似乎效果很好。

如果是根本不存在向后兼容性的情况，那么至少看到一个关于它的错误报告会很好。

我将此发布到 magento 错误跟踪器：[错误 #28601](http://www.magentocommerce.com/bug-tracking/issue?issue=14603)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T01:20:45.433

确实，1.4升级有问题。

1.4中引入了transactions和used `additional_information`field，之前有不同的field，称为`additional_data`，也被序列化了，但是方式不同，可以在1.4之前和1.4之后查找支付记录，比较数据结构是如何变化的。当您看到数据的差异时，您可以创建一个脚本来迁移旧值。

真诚的，伊万

**更新**

检查以下代码： [https ://github.com/LokeyCoding/magento-mirror/blob/magento-1.3/app/code/core/Mage/Paygate/Model/Authorizenet.php](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.3/app/code/core/Mage/Paygate/Model/Authorizenet.php)

在授权过程中，事务 id 存储在两个属性中：cc_trans_id 和 last_trans_id。当客户执行捕获时，只有 last_trans_id 得到更新。

在 1.3 方法中 getRefundTransactionId() 返回 last_trans_id 值。

在 1.7 中，相同的方法如下所示： [https ://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Paygate/Model/Authorizenet.php](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Paygate/Model/Authorizenet.php)

所以你看到它被完全重写了！

为了使您的 1.7 代码适用于 1.3 事务，您需要对旧事务执行以下操作：

1.  如果`last_trans_id == cc_trans_id`订单有发票，则只在 order_payment_transaction 表中创建捕获交易记录。
2.  如果`last_trans_id == cc_trans_id`订单没有发票，创建授权交易记录
3.  如果`last_trans_id !== cc_trans_id`创建 2 个记录，第一个`cc_trans_id`是 auth 事务，第二个是捕获类型的子事务。

当您导出具有此类值的旧订单时，您将能够从管理员处退还旧订单。

# javascript - 为什么一个 CSS 动画工作多次，另一个每次页面加载只工作一次

> ID：14207724
> 
> 赞同：0
> 
> 时间：2013-01-08T03:20:06.243
> 
> 标签：javascript, css

真的被这个难住了......两个动画，基本上相同的结构，
它们的 JavaScript 也相同，但是一个动画会像一个想要悬停在
它上面一样频繁地工作，而另一个动画在悬停时只工作一次，然后消失，直到手动刷新页面。

准备了一个 JSfiddle [，](http://jsfiddle.net/MountainMan72/HVH6K/41/)
如果有人愿意的话，如果你的堆栈准备好进行测试，下面的代码块已经完成并且可以运行了；它将准备好复制和粘贴并运行以说明问题。

总结：为什么红色不透明的展开div动画只运行一次？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>

    <Head>
        <Title>Bleu Goat F</title>
        <meta http-equiv="X-UA-Compatible" ; content="text/html  application/pdf  text/plain text/css text/php; charset=utf-8"
        ;>
        <link rel="stylesheet" type="text/css" href="Some Name CSS FuddleDuddle.css"
        />
        <script type="text/JavaScript">
            window.onload = function () {
                var el = document.getElementById("el");
                var button = document.getElementById("button");
                el.addEventListener("webkitAnimationEnd", function (evt) {
                    el.className = "hidden";
                }, false);
                el.addEventListener("mouseover", function (evt) {
                    el.className = (window.WebKitAnimationEvent) ? "hiding" : "hidden";
                }, false);
                button.addEventListener("webkitAnimationEnd", function (evt) {
                    button.className = "bottomFADED";
                }, false);
                button.addEventListener("mouseover", function (evt) {
                    button.className = (window.WebKitAnimationEvent) ? "expandDown" : "bottomFADED";
                }, false);
            }
        </script>
        <style type="text/css">
            /* 6:05 PM Monday, January 07, 2013
          Animation code for teal color *div el*
          Animation code for mouseover/reveal div *button* */
            #el {
                position:absolute;
                top:7px;
                left:17px;
                width:153px;
                height:32px;
                background-color:teal;
                border:1px solid white;
                font-size:17px;
                font-family:palatino linotype;
                display:block;
                cursor: pointer;
                z-index:160;
            }
            div.hiding {
                -webkit-animation-duration: 3s;
                -webkit-animation-name: fade-out;
                -webkit-animation-iteration-count:1;
                -webkit-animation-timing-function: ease-in-out;
                -webkit-animation-play-state: running;
                -webkit-animation-direction: alternate;
            }
            div.hidden {
                display: none;
            }
            @-webkit-keyframes fade-out {
                from {
                    background-color:yellow;
                    opacity: .3;
                }
                to {
                    background-color:teal;
                    opacity: .9;
                }
            }
            /* *************************************** */
            /* Codeblock For Div Which **Should** become
         visible upon hovering over Name there on the
         Menu bar, and animate, increasing in size
         downward and becomeing more opaque (redder)
         then stopping, then finishing the animation and
         disappearing.
          */
            @-webkit-keyframes slidein {
                from {
                    background-color:transparent;
                    width:62px;
                    height:25px;
                }
                to {
                    background-color:red;
                    opacity: 0.6;
                    width:62px;
                    height:73px;
                }
            }
            #button {
                position:absolute;
                top:7px;
                left:149px;
                width:62px;
                height:25px;
                display: block;
                z-index:100;
            }
            #button.bottomFADED {
                display:none;
            }
            #button.expandDown {
                -webkit-animation-duration: 2s;
                -webkit-animation-name: slidein;
                -webkit-animation-iteration-count:1;
                -webkit-animation-direction: alternate;
                -webkit-animation-play-state: running;
                -webkit-animation-timing-function: ease-in-out;
                -webkit-transition: height 2s ease-in-out, background-color 2s, width 2s, margin 2s, color 2s, font-size 2s, z-index 1s;
                position: absolute;
                top:7px;
            }
            /* Below: the simple CSS transition on a div;
           it is in the red square below *Name* item on
           the brown Menu Bar.
           It is triggered by a :hover.  Not an animation,
           and works reliably.
          */
            #BlackAsHeidizHeart {
                position:absolute;
                top:32px;
                left:107;
                width:62px;
                height:48px;
                border:1px solid red;
                z-index:100;
            }
            #suresureBOSS22 div {
                position:absolute;
                top:32px;
                left:164px;
                width:53px;
                height:43px;
                background-color:transparent;
                color:#30000C;
                border:1 solid transparent;
                z-index:12;
                font-family:French Script MT;
                font-weight:bold;
                font-style:oblique;
                font-size:0px;
                z-index:55;
                -webkit-transition: height 2s ease-in-out, background-color 2s, width 2s, font-size 1s, border .3s;
                -webkit-transition-timing-function: cubic-bezier(0.600, -0.230, 0.735, 0.845);
            }
            #suresureBOSS22 div:hover {
                position:absolute;
                top:32px;
                left:164px;
                width:151px;
                height:47px;
                background-color:green;
                color:#30000C;
                border:2px solid white;
                z-index:12;
                font-family:French Script MT;
                font-weight:bold;
                font-style:oblique;
                font-size:15px;
                z-index:55;
                -webkit-transition: height 2s ease-in-out, background-color 2s, width 2s, font-size 1s, border 3s;
                -webkit-transition-timing-function: cubic-bezier(0.600, -0.230, 0.735, 0.845);
            }
            /* ************************* */
            /*  The uninteresting page~stuff */
            /* body */
            #VerdadSIxCorpusZsestyJa {
                background-color:#A9D4B6;
                color:black;
                font- size:12px;
                color:black;
            }
            /* main div */
            #BigPicturesScreen {
                position:absolute;
                top:3px;
                left:3px;
                width:97%;
                height:273px;
                background-color: #112299;
                color:black;
                border-top-color: rgb(198, 132, 19);
                border-top-style: inset;
                border-top-width: 3px;
                border-right-color: rgb(198, 132, 19);
                border-right-style: inset;
                border-right-width: 3px;
                border-bottom-color: rgb(198, 132, 19);
                border-bottom-style: inset;
                border-bottom-width: 3px;
                border-left-color: rgb(198, 132, 19);
                border-left-style: inset;
                border-left-width: 3px;
                font-size:31px;
                font-family:bookman old style;
                font-style:normal;
                z-index:2;
            }
            /* top outter div */
            #SequesterJSFiddleCODE {
                position:absolute;
                top:47px;
                left:19px;
                width:200px;
                height:53px;
                background-color:#8DA57C;
                border:2px solid forestgreen;
                font-size:17px;
                font-family:tahoma;
                z-index:140;
            }
            /* grey div with green border, holds MenuBar */
            #CODExSnippetNumberSupport {
                position:absolute;
                top:173px;
                left:5px;
                width:273px;
                height:74px;
                background-color:lightgrey;
                border:3px solid forestgreen;
                -webkit-border-radius: 0.5em 0.5em 0.5em 0.5em;
                font-size:11px;
                font-family:tahoma;
                padding-top:3px;
                padding-right:0;
                padding-bottom:3px;
                padding-left:12px;
                z-index:10;
            }
            /* the lower, Menue Bar, dark brown */
            #TitleOfTitleThingyie {
                position:absolute;
                top:3px;
                left:16px;
                width:237px;
                height:19px;
                background-color:#30000C;
                color:white;
                border:4px solid #AFEF23;
                -webkit-border-radius: 1.2em 1.2em 1.2em 1.2em;
                font-size:14px;
                font-family:bookman old style;
                padding-top:3px;
                padding-right:0;
                padding-bottom:3px;
                padding-left:12px;
                z-index:15;
            }
            /* the div holding that 7, on Menu Bar  */
            #JobCrrnt {
                position:absolute;
                top:0px;
                left:79px;
                width:29px;
                height:19px;
                background-color:#30000C;
                color:white;
                border:none;
                font-size:14px;
                font-family:bookman old style;
                padding-top:3px;
                padding-right:0;
                padding-bottom:3px;
                padding-left:12px;
                z-index:15;
            }
        </style>
    </head>

    <body id="VerdadSIxCorpusZsestyJa">
        <div id="BigPicturesScreen">
            <div id="SequesterJSFiddleCODE">
                <br />
                <div id="el">Hide Me &nbsp&nbsp&nbsp*div el*</div>
                <!-- el -->
            </div>
            <!-- SequesterJSFiddleCODE -->
            <div id="CODExSnippetNumberSupport">
                <div id="Shellnum1" class="hover">
                    <div id="suresureBOSS22" class="hover">
                        <div id="BlackAsHeidizHeart" class="hover">Why Must WE, Suffer?
                            <br />HA! why not :)</div>
                    </div>
                    <!-- suresureBOSS22 -->
                    <a href="#" id="button" style="text-decoration:none;" class="hover"></a>
                </div>
                <!-- Shellnum1 -->
                <div id="TitleOfTitleThingyie">&nbsp&nbsp&nbsp Job #
                    <div id="JobCrrnt">&nbsp&nbsp 7</div>&nbsp&nbsp&nbsp&nbsp &nbsp&nbsp&nbsp&nbsp &nbsp&nbsp&nbsp&nbsp
                    &nbsp&nbsp&nbsp&nbsp Name</div>
                <!-- TitleOfTitleThingyie -->
            </div>
            <!-- CODExSnippetNumberSupport -->
        </div>
        <!-- BigPictureScreen -->

        <body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:36:46.980

```
-webkit-animation:slidein 5s infinite; /* Safari and Chrome */ 
```

您不必在动画结束 [链接到小提琴后隐藏（添加显示：无）](http://jsfiddle.net/HVH6K/49/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:38:43.850

我认为原因是 -webkit-animation-iteration-count: 1;

用。。。来代替：

```
#button.expandDown {
                -webkit-animation-duration: 2s;
                -webkit-animation-name: slidein;
                -webkit-animation-iteration-count:infinite;
                -webkit-animation-direction: alternate;
                -webkit-animation-play-state: running;
                -webkit-animation-timing-function: ease-in-out;
                -webkit-transition: height 2s ease-in-out, background-color 2s, width 2s, margin 2s, color 2s, font-size 2s, z-index 1s;
                position: absolute;
                top:7px;
            } 
```

小提琴：http: [//jsfiddle.net/HVH6K/44/](http://jsfiddle.net/HVH6K/44/)

# google-apps-script - 如何从谷歌应用程序脚本中的 JSON 解析对象中提取数字命名属性？

> ID：14207725
> 
> 赞同：0
> 
> 时间：2013-01-08T03:20:07.543
> 
> 标签：google-apps-script

Google Apps 脚本

```
Utilities.jsonParse('{"1":"123","a":"abc"}')["a"] // "abc"
Utilities.jsonParse('{"1":"123","a":"abc"}')["1"] // undefined 
```

在 Google Chrome JavaScrpt 控制台中

```
JSON.parse('{"1":"123","a":"abc"}')["a"] // "abc"
JSON.parse('{"1":"123","a":"abc"}')["1"] // "123" 
```

这是一个错误吗？如何从 Google Apps 脚本中的 JSON 对象中提取数字命名属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T04:45:38.850

Utilities.jsonParse 在数字键周围有一些奇怪之处。更喜欢更新的（和更标准的）`JSON.parse`，`JSON.stringify`而不是：

```
JSON.parse('{"1":"123","a":"abc"}')["1"]  // "123" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:27:02.337

这是在黑暗中拍摄的，但这是否会返回任何不同的结果：

```
Utilities.jsonParse('{"1":"123","a":"abc"}')[1] 
```

# zurb-foundation - 我在哪里可以找到 zurb-foundation 的完整文档

> ID：14207727
> 
> 赞同：2
> 
> 时间：2013-01-08T03:20:31.783
> 
> 标签：zurb-foundation

如何（以及在​​何处）获得 zurb-foundation 的完整文档。我正在使用 Zurb 的 Foundation 3 并从[http://foundation.zurb.com/docs/index.php](http://foundation.zurb.com/docs/index.php)获取文档。但是，缺少一些文档，例如用于表单验证的文档。在基础案例中，它表明表单元素可以具有必需的属性，或者输入元素可以具有等于电子邮件的类型。但是当我提交表单（在我的应用程序中）时，它会自动验证，我无法获得任何有关它的文档。

在哪里可以找到其他文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:37:03.380

Zurb 文档是完整的。我想鉴于 Zurb 提供了如此丰富的框架，我们都希望 Foundation 包含完整的表单验证。

该框架[不包括](https://github.com/zurb/foundation/issues/117)[表单验证 javascript](https://github.com/zurb/foundation/issues/586)，仅包含表单验证感知**表单**，Zurb 文档中有详细描述。

话虽如此，我已经使用[jQuery Validation Plugin](http://docs.jquery.com/Plugins/Validation)进行了验证。需要一点点解谜才能把事情完全整理好，但我想下面的代码应该提供一些关于如何充分使用 Foundation 3.0 提供的验证状态的初步指导：

```
<form id="contactForm">
   <div class="five columns">
        <label>First Name:</label>
        <input type="text" maxlength='40' name='First Name' class='required' minlength='2'/>
   </div>
<form>

<script>
$(document).ready(function(){
    $("#contactForm").validate({
      errorElement: "small",
      highlight: function(element, errorClass, validClass) {
         $(element).addClass(errorClass).removeClass(validClass);
         $(element).parent().children("input").addClass(errorClass);
      },
      unhighlight: function(element, errorClass, validClass) {
         $(element).removeClass(errorClass).addClass(validClass);
         $(element).parent().children("input").removeClass(errorClass);
      }
    });
});
</script> 
```

关键是：

** 使用 jQuery 验证类来定义验证规则，使用选项`highlight`并将`unhighlight`错误类添加/删除到正在验证的输入元素，并指定将`errorElement`错误消息粘贴到`<small>`标签而不是标签中。

希望这可以帮助

# c# - 如何从 C# 中的代码中呈现具有多个数据源的 rdlc 主报告？

> ID：14207728
> 
> 赞同：0
> 
> 时间：2013-01-08T03:20:47.003
> 
> 标签：c#, winforms, pdf, rdlc

我正在使用数据集的 2 个数据表生成 pdf 文件，但是，pdf 中的数据仅来自 ds.Tables[0]，而不是 ds.Tables[1]。请建议解决方案..我的代码如下..

```
ReportViewer viewer = new ReportViewer();

viewer.ProcessingMode = ProcessingMode.Local;
viewer.Reset();
viewer.LocalReport.ReportEmbeddedResource = @"D:\Projects\NIKHIL\NIKHIL\Report3.rdlc;
viewer.LocalReport.ReportPath = @"D:\Projects\NIKHIL\NIKHIL\Report3.rdlc;
viewer.LocalReport.DataSources.Clear();
viewer.LocalReport.DataSources.Add(new ReportDataSource("DataSet1", ds.Tables[0]));
viewer.LocalReport.DataSources.Add(new ReportDataSource("DataSet2", ds.Tables[1]));
viewer.LocalReport.Refresh();

byteViewer = viewer.LocalReport.Render(reportType, deviceInfo, out mimeType, out encoding, out extension, out streamIds, out warnings);

byte[] file = byteViewer;
FileStream stream = new FileStream(FileStorageLocation + "\\" + fileName, FileMode.Create, FileAccess.Write);
stream.Write(file, 0, file.Length);
stream.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:44:49.300

当您有多个数据源时，您必须指定您在 RDLC 文件中引用的数据源。

对于每个表达式，您必须以这种方式编辑公式：

`=First(Fields!nameOfYourField.Value, "nameOfYourDataSet")`

所以会有两个单元格，一个带有：

`=First(Fields!nameOfYourField.Value, "DataSet1")`

另一个是：

``=First(Fields!nameOfYourField.Value, "DataSet2")`

# list - JPA OneToMany - 添加/删除对象后列表不会更新，但会保留在数据库中

> ID：14207731
> 
> 赞同：6
> 
> 时间：2013-01-08T03:21:22.970
> 
> 标签：list, jpa, one-to-many

我使用的是 JPA 而不是休眠。我的关系有如下问题。我有一个 1:N 的关系（父母：孩子）。

在 JSP 站点上，将显示父项和子项。如果我（第一次）加载 JSP-Site 并保存一个父级和一个子级，一切都很好。父母被保存，孩子也被保存到带有外键的数据库中。

之后，将显示第二个 JSP-Site，其中包含 Parent 和 Children。

但是如果我回到第一个站点并将第二个子项（添加子项）保存到现有的父项中，那`childEntityList`仍然是旧的，我的意思是，新的子项不在此列表中，而是插入到数据库中。

为什么`childEntityList`是旧的并且不更新？

家长：

```
@Entity
@Table(schema = "test", name = "Parent")
@XmlRootElement
@NamedQueries({...})
public class Parent implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY, generator = "A_SEQ")
    @Basic(optional = false)
    @NotNull
    @Column(name = "ID")
    private int id;

    @OneToMany(mappedBy = "p", fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    private List<ChildEntity> childEntityList = new ArrayList<ChildEntity>();
    // ...

    public List<ChildEntity> getChildEntityList() {
        return childEntityList;
    }

    public void setChildEntityList(List<ChildEntity> childEntityList) {
        this.childEntityList = childEntityList;
    }

    public void addChildEntityToParent(ChildEntity c) {
        this.childEntityList.add(c);
        if(c.getParent() != this) {
            c.setParent(this);
        }
    }

    public void removeChildEntityFromParent(ChildEntity c) {
        childEntityList.remove(c);
    }
    // ...
} 
```

孩子：

```
@Entity
@Table( name = "Child" )
@NamedQueries({...})
public class ChildEntity implements Serializable {
    @Id
    @GeneratedValue( strategy = GenerationType.IDENTITY )
    @Column( name = "CHILD_ID" )
    private Long childId;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "PARENT_ID")
    private Parent p;
    // ...

    public Parent getParent() {
        return p;
    }

    public void setParent(Parent p) {
        this.p= p;
        if(!p.getChildEntityList().contains(this)) {
            p.getChildEntityList().add(this);
        }
    } 
```

保存代码：

```
Parent p = new Parent(...);
ChildEntity c = new ChildEntity(...);
p.addChildEntityToParent(c);
childEntityFacade.create(c); 
```

查看代码：

```
// ...
public doSomething(Parent p) {
    super(p);
}
// ...
List<ChildEntity> cList = p.getChildEntityList();
System.out.print("Size: " + c.size());
// ... 
```

在 View-Code 中，`childEntityList`即使我添加了一个 Child，每次的大小都是相同的。只有当我重新启动服务器时，才会显示父级的所有子级。

什么时候`childEntityList`填写父类中的？它是自动的，因为`@OneToMany`?

有人可以解释一下吗？

**更新：** 每次从父列表中添加/删除子对象时，我应该合并 EntityManager 还是做其他事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T14:43:07.210

您需要保持双向关系的双方。见[这里](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T00:21:41.160

> （我使用的是 JPA 而不是 Hibernate！）

我猜你的意思是你没有使用 Hibernate API。
JPA 只是一个持久性 API 规范，它本身什么也不做。
所以，如果你使用 JPA ......你正在使用*一些东西*来做持久性。

JPA 将持久性工作委托给持久性引擎，例如 Hibernate、EclipseLink、OpenJPA 或其他东西。

您可以将应用程序配置为使用具有特定持久性提供程序的 JPA 接口，或者如果应用程序在 JEE 容器中运行，则应为您提供 JPA 实现：GlassFish（使用 OpenJPA）、WebLogic（使用 EclipseLink）、TomEE（使用 OpenJPA）。

> 每次我从父列表中添加/删除子对象时，我是否应该合并 EntityManager...

您不合并 EntityManager；你用它来合并父实体：

```
parent = em.merge(parent); 
```

关于您的问题，当您以这种方式使用 merge() 时......（并且因为映射指定 CascadeType.ALL）然后在重新加载页面（“站点 1”）时，您应该获得刷新的父对象，其中包含更新的对象网络您在 merge(parent) 之前所做的更改，包括任何新添加的子项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T06:02:35.803

是的，您需要合并父实体。我遇到了同样的问题，一旦我合并了父实体，它就得到了解决。你也需要维护双方的关系。

# windows - 您能否将 $home 定义为安装程序的“C:/user/%username%/”属性

> ID：14207733
> 
> 赞同：0
> 
> 时间：2013-01-08T03:21:36.980
> 
> 标签：windows, properties, installation, directory

我一直在查看[属性参考](http://msdn.microsoft.com/en-us/library/aa370905%28VS.85%29.aspx)，但找不到与“C:/user/%username%/”或 $home 直接相关的任何内容，因此我可以将文件安装到通常位于“下载”文件夹中的文件夹中。与 [AppDataFolder] 类似，但与漫游文件夹不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:06:15.977

您将找不到该文件夹​​的预定义属性，您需要在安装时创建路径。下面的文章解释了如何使用[Advanced Installer](http://www.advancedinstaller.com)进行操作，我不知道您使用的是什么工具，但也许您也可以使用它完成相同的操作。 [http://www.advancedinstaller.com/user-guide/qa-custom-folder.html](http://www.advancedinstaller.com/user-guide/qa-custom-folder.html)

此外，这也应该可以通过高级安装程序的免费版本来实现，即“简单”项目类型。

# makefile - 具有可选依赖项的 Makefile

> ID：14207735
> 
> 赞同：5
> 
> 时间：2013-01-08T03:21:45.257
> 
> 标签：makefile, dependencies, optional

我有一些 .c 和 .h 文件，它们是由基于一个 XML 文件和可选的另一个 XML 文件的脚本生成的。

根据我的阅读，我应该能够使用通配符，例如：

```
%Generated.c %Generated.h : %Compulsory.xml $(wildcard %Optional.xml)
   generation-script $< $* 
```

当我更改 XXXCompulsory.xml 时，文件 XXXGenerated.c/h 正在重新生成，但在我更改 XXXOptional.xml 时不会。有谁知道为什么？

我可以通过重复规则解决问题，如下所示：

```
%Generated.c %Generated.h : %Compulsory.xml
   generation-script $< $*

%Generated.c %Generated.h : %Compulsory.xml %Optional.xml
   generation-script $< $* 
```

但我原以为有更好的方法来指定可选依赖项？

谢谢！

注意：之前已经问过同样的问题（例如[，如何管理 C 头文件依赖项？](https://stackoverflow.com/questions/9598595/how-to-manage-optional-dependencies)）但在这种情况下，我不能让编译器生成 .d 文件。

**编辑：** Optional.xml 的位置很好，因为如果我只指定规则，它就可以工作：

```
%Generated.c %Generated.h : %Compulsory.xml %Optional.xml
   generation-script $< $* 
```

并尝试仅针对 Optional.xml 存在的目标进行编译。

但我注意到这不适用于括号：

```
%Generated.c %Generated.h : %Compulsory.xml $(%Optional.xml)
   generation-script $< $* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:38:40.987

使用函数通配符时，通配符是*，而不是%

($wildcard *Optional.xml)

# r - 如何删除R中箱线图中的异常值？

> ID：14207739
> 
> 赞同：31
> 
> 时间：2013-01-08T03:22:52.330
> 
> 标签：r, boxplot, outliers

> **可能重复：**
> [更改箱线图中的异常值规则](https://stackoverflow.com/questions/4994313/changing-the-outlier-rule-in-a-boxplot)

我需要使用箱线图来可视化我的结果。

```
x<-rnorm(10000)
boxplot(x,horizontal=TRUE,axes=FALSE) 
```

如何在可视化过程中过滤异常值？

(1) 这样我就可以在屏幕上看到完整的图像，而不会出现丑陋的异常值。

[http://postimage.org/image/szzbez0h1/a610666d/](http://postimage.org/image/szzbez0h1/a610666d/)

(2) 有什么方法可以显示一定范围内的异常值？ [http://postimage.org/image/np28oee0b/8251d102/](http://postimage.org/image/np28oee0b/8251d102/)

问候

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-08T03:37:19.123

查看`?boxplot`您需要的所有帮助。

```
 outline: if ‘outline’ is not true, the outliers are not drawn (as
          points whereas S+ uses lines).

boxplot(x,horizontal=TRUE,axes=FALSE,outline=FALSE) 
```

并且为了扩展胡须的范围并抑制该范围内的异常值：

```
 range: this determines how far the plot whiskers extend out from the
          box.  If ‘range’ is positive, the whiskers extend to the most
          extreme data point which is no more than ‘range’ times the
          interquartile range from the box. A value of zero causes the
          whiskers to extend to the data extremes.

# change the value of range to change the whisker length
boxplot(x,horizontal=TRUE,axes=FALSE,range=2) 
```

# websocket - Chrome WebSocket 停止接收

> ID：14207740
> 
> 赞同：0
> 
> 时间：2013-01-08T03:22:58.210
> 
> 标签：websocket

当我发送

`'\x81\x04pong'`

到websocket，它接收良好。

当我发送

`'\x81\x7e\xd0\x00abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklm nopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNO PQRSTUVWXYZabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'`

它不接收，也不接收任何进一步的帧。

我认为问题可能出在第二个、第三个或第四个字节上。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:55:03.550

第三个和第四个字节中指定的长度是 little-endian，而应该是 big-endian。正确的框架是`'\x81\x7e\x00\xd0abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklm nopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNO PQRSTUVWXYZabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'`

# java - 为什么我们需要 Java NIO 选择器？

> ID：14207748
> 
> 赞同：0
> 
> 时间：2013-01-08T03:24:16.290
> 
> 标签：java, nio, serversocket

如果我们正在创建一个在线聊天服务器，我认为我们应该只需要一个 ServerSocketChannel，不是吗？

如果我们只得到一个 ServerSocketChannel，为什么我们需要一个 Selector 呢？

谁能给我一个需要使用 Selector 的真实项目示例？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T04:53:52.873

当您`accept()`使用 时`ServerSocketChannel`，您得到的是一个新`SocketChannel`的，然后您将`read()`与`write()`该客户进行交流。

您的选择代码通常会`select()`，然后遍历选定的键，接受任何键`isAcceptable()`（从而打开一个新通道），然后读取和写入任何键（可能是您接受的客户端通道之一）`isReadable()`或`isWritable()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T07:01:04.210

你需要一个选择器来支持非阻塞 NIO。如果您使用阻塞 NIO（这是默认设置），则不需要选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:30:25.857

> 如果我们只得到一个 ServerSocketChannel，为什么我们需要一个 Selector

因为您将有很多被接受`SocketChannels,`，并且`Selector`可以让您在同一个线程中处理它们。

# objective-c - viewWillAppear 强制框架 y 为 0？

> ID：14207749
> 
> 赞同：0
> 
> 时间：2013-01-08T03:24:21.913
> 
> 标签：objective-c, ios, uiview, uiviewcontroller, viewwillappear

我创建了一个视图控制器并将其 frame.y 设置为 80，稍后我需要在模态 VC 关闭时显示另一个模态视图控制器，`viewWillAppear`调用第一个视图控制器的，然后将其 frame.y 设置回 0。

我可以防止这种行为吗？我知道我可以`viewWillAppear`将 frame.y 重置为 80。但是有什么更聪明的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:38:00.287

这可能是因为 AutoLayout... 尝试 NSLogging 以查看在调用 ViewDidAppear 时或调用完成后变量是否发生变化... ViewDidLoad 怎么样？在您的 .h 文件中，您可以创建整数并在 ViewDidLoad 中将其设置为等于 frame.y，然后在 ViewDidAppear 中将其重置为零后只需将其更改回该整数......这样您就不必每次调整 xib 文件的大小时，都要担心更改那段代码的麻烦。

# android - 每天换弦

> ID：14207751
> 
> 赞同：2
> 
> 时间：2013-01-08T03:24:38.980
> 
> 标签：android

我正在制作每日圣经经文小部件。我正在制作一个包含 236 节不同经文的字符串数组。我需要该应用程序来每天更改经文。我实际上想从名为 1 的字符串开始，然后按顺序往下走。这是可能的还是我需要随机调用字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:37:41.380

它将基于您的逻辑。我的将是另一列，其中显示该行的相应日期。然后在您的设备上获取日期并在我的查询中添加（类似或相等）（基于列和您设备上注册的日期）。

我不知道，.. 这取决于您作为开发人员..

干杯..

# java - 除了 Netty 或 Apachae MINA 之外，还有什么轻量级的 java IO/NIO 客户端框架吗？

> ID：14207754
> 
> 赞同：-1
> 
> 时间：2013-01-08T03:25:16.387
> 
> 标签：java, io, client, client-side, nio

我希望在 java NIO/IO 上创建一个客户端。是否有专门针对客户端应用程序的轻量级框架。我使用 Netty 框架创建了一个服务器，但它对 client.so 来说太重了。所以我正在寻找一个轻量级的框架工作。

请帮我找出最好的。

任何帮助都是可观的

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T06:58:12.950

如果你想要轻量级，我会使用阻塞 IO 或 NIO。您可以编写一个简单的类和接口来满足您的需求/协议。

# c++ - 具有大量代码文件的 C++ 条件编译

> ID：14207755
> 
> 赞同：1
> 
> 时间：2013-01-08T03:25:46.247
> 
> 标签：c++, conditional-compilation

我想在 Windows 和 Linux 上编译并运行一份 C++ 代码。所以我需要使用条件编译（CC）。**但是，在大量的代码文件**中如何使用 CC 就遇到了问题。

比如，我有：

```
//A.cpp
#define _WINDOWS_
#ifdef _WINDOWS_
#include <windows.h>
//some code for windows
#else
#include <pthread.h>
//some code for linux
#endif 
```

我也有B.cpp，C.cpp...

**我应该在每个文件中都写“#define _WINDOWS_”，还是有更好的方法？**

我试图这样做：

1.  创建头文件 Platform.h

    ```
     #ifndef _PLAT_
     #define _PLAT_
     #define _WINDOWS_
     #endif 
    ```

2.  包括文件 Platform.h，例如：

    ```
     //A.cpp
     #include "Platform.h"
     #ifdef _WINDOWS_
     #include <windows.h>
     //some code for windows
     #else
     #include <pthread.h>
     //some code for linux
     #endif 
    ```

3.  它编译错误！可能在 include`"Platform.h"`之前包含`<windows.h>`会导致错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:56:53.257

使用编译器中的一些预定义宏。

[http://sourceforge.net/p/predef/wiki/OperatingSystems/](http://sourceforge.net/p/predef/wiki/OperatingSystems/)

```
#ifdef _WIN32
// Code specific to Windows.
#elif defined __linux__ // Many variants; check the link above.
// Code specific to Linux.
#else
// Portable code.
#endif 
```

这在大多数情况下都有效。

请注意，这些宏中的大多数用于检测*主机*操作系统（即您正在构建程序的系统），而不是*目标*操作系统（打算运行生成的程序的系统）。但是，通常情况下两个系统都重合。另请注意，这些宏中的任何一个是否实际上是预定义的，显然取决于您的特定编译器。

如果一切都失败了（例如，目标系统与主机不同，或者你的编译器很奇怪，根本没有预定义任何系统检测宏），只需在编译器的命令行中定义它们中的任何一个（例如，`-D`在 POSIX-兼容的 C 编译器）通过将其放入构建脚本或 makefile 中。不要`#define`在标题中自己写这样的s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:43:54.870

您可以在编译期间使用 -D_WINDOWS_。对于 (3) 请注意，标题对排序很敏感。

# php - PHP查找匹配文件名的文件扩展名

> ID：14207756
> 
> 赞同：0
> 
> 时间：2013-01-08T03:25:47.450
> 
> 标签：php

假设我的目录中有 image.jpg。

并假设我知道的唯一细节是我有一个文件名 name = 'image' 但我不知道它的扩展名是什么。

是否有 PHP 函数可以知道文件的扩展名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T03:27:52.820

您可以通过以下方式找到文件[`glob`](http://php.net/glob)：

```
$matching = glob('/some/directory/' . $name . '.*'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:27:40.100

[http://php.net/manual/en/function.pathinfo.php](http://php.net/manual/en/function.pathinfo.php)显示您需要的所有内容、路径、文件名和扩展名。

# c# - 如何在 WPF 4.5 中为按钮单击事件制作 MarkupExtenstion？

> ID：14207759
> 
> 赞同：0
> 
> 时间：2013-01-08T03:26:27.810
> 
> 标签：c#, .net, wpf, .net-4.5

我想创建 MarkupExtension 来为按钮单击事件提供支持。[我在这里](http://www.jonathanantoine.com/2011/09/23/wpf-4-5s-markupextension-invoke-a-method-on-the-viewmodel-datacontext-when-an-event-is-raised/)有一篇 PreviewKeyDown 的文章。我试图为 Click 修改它，但无法这样做，因为它会引发异常

请建议如何实施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:47:29.600

看起来它试图转换`MethodInfo`为`EventInfo`，返回的目标属性可能是 a`MethodInfo`或者`EventInfo`您必须在创建委托之前检查它

试试这个

```
 public class Call : MarkupExtension
    {
        public string ActionName { get; set; }
        public Call(string actionName) { ActionName = actionName; }

        public override object ProvideValue(IServiceProvider serviceProvider)
        {
            IProvideValueTarget targetProvider = serviceProvider
                .GetService(typeof(IProvideValueTarget)) as IProvideValueTarget;
            if (targetProvider == null)
                throw new InvalidOperationException(@"The CallAction extension 
                can't retrieved the IProvideValueTarget service.");

            var target = targetProvider.TargetObject as FrameworkElement;
            if (target == null)
                throw new InvalidOperationException(@"The CallAction extension 
                    can only be used on a FrameworkElement.");

            if (targetProvider.TargetProperty is MethodInfo)
            {
                var targetEventAddMethod = targetProvider.TargetProperty as MethodInfo;
                if (targetEventAddMethod != null)
                {
                    ParameterInfo[] pars = targetEventAddMethod.GetParameters();
                    Type delegateType = pars[1].ParameterType;
                    MethodInfo methodInfo = this.GetType().GetMethod("MyProxyHandler", BindingFlags.NonPublic | BindingFlags.Instance);
                    return Delegate.CreateDelegate(delegateType, this, methodInfo); ;
                }

            }
            else if (targetProvider.TargetProperty is EventInfo)
            {
                var targetEventInfo = targetProvider.TargetProperty as EventInfo;
                if (targetEventInfo != null)
                {
                    Type delegateType = targetEventInfo.EventHandlerType;
                    MethodInfo methodInfo = this.GetType().GetMethod("MyProxyHandler", BindingFlags.NonPublic | BindingFlags.Instance);
                    return Delegate.CreateDelegate(delegateType, this, methodInfo);
                }
            }
            return null;
        }

        void MyProxyHandler(object sender, EventArgs e)
        {
            FrameworkElement target = sender as FrameworkElement;
            if (target == null) return;
            var dataContext = target.DataContext;
            if (dataContext == null) return;

            //get the method on the datacontext from its name
            MethodInfo methodInfo = dataContext.GetType()
                .GetMethod(ActionName, BindingFlags.Public | BindingFlags.Instance);
            methodInfo.Invoke(dataContext, null);
        }
    } 
```

# scala - 在 Scala 2.10 中为所有集合设置并行级别？

> ID：14207762
> 
> 赞同：10
> 
> 时间：2013-01-08T03:27:26.947
> 
> 标签：scala, parallel-processing, scala-2.10

`tasksupport`我了解如何通过可变字段（参见[https://stackoverflow.com/a/5425354/82970](https://stackoverflow.com/a/5425354/82970)）为单个并行集合设置并行度级别。

> 如何在 Scala 2.10 中为所有新的并行集合设置并行级别？

一个附属问题 ---`tasksupport`与并行集合相关联的是由它构建的新并行集合“继承”吗？（例如，使用`take`,`map`等）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T08:36:55.650

1.  我简要查看了源代码，如果我理解正确，可以使用三个系统属性来配置默认执行上下文，这似乎用作默认任务支持。这些决定了任务支持对象的并行度。

    *   `scala.concurrent.context.minThreads`: Int, 最小并行度
    *   `scala.concurrent.context.numThreads`: 要么是 Int，直接指定要使用的并行级别，要么是 String：“x”后跟一个 Double（例如“x1.5”），然后乘以`Runtime.getRuntime.availableProcessors`
    *   `scala.concurrent.context.maxThreads`: Int, 最大并行度

    相关的源文件（如果我正确地遵循了一切）似乎是[ExecutionContextImpl](https://github.com/scala/scala/blob/2.10.x/src/library/scala/concurrent/impl/ExecutionContextImpl.scala)。

2.  至于你的问题的第二部分：
    转换操作，如等`map`，`filter`应保留已在原始集合上设置的任务支持。至少消息来源看起来是这样的。:)
    大多数并行操作是在[ParIterableLike](http://github.com/scala/scala/blob/v2.10.0/src/library/scala/collection/parallel/ParIterableLike.scala)`resultWithTaskSupport`中定义的，它们要么调用[Combiner](http://www.scala-lang.org/api/current/index.html#scala.collection.parallel.Combiner)（它通过 ParIterableLike 中的第 568 行或第 581 行中的工厂获取原始任务支持集），要么直接在结果集合上设置任务支持。

# java - 列表视图适配器的空异常

> ID：14207768
> 
> 赞同：0
> 
> 时间：2013-01-08T03:27:55.233
> 
> 标签：java, android, eclipse, listview, adapter

我在使用适配器实现自定义视图时遇到问题，代码没有显示任何错误，但是当我运行它时，它给了我一个空点异常。

```
 01-08 12:21:43.949: E/AndroidRuntime(12646): FATAL EXCEPTION: main
 01-08 12:21:43.949: E/AndroidRuntime(12646): java.lang.RuntimeException: Unable to start    activity ComponentInfo{com.jp.blueoceans2/friends.ListFriendsMain}:  java.lang.NullPointerException
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1816)
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1837)
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at android.app.ActivityThread.access$1500(ActivityThread.java:132)
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1033)
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at android.os.Handler.dispatchMessage(Handler.java:99)
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at android.os.Looper.loop(Looper.java:143)
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at android.app.ActivityThread.main(ActivityThread.java:4196)
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at java.lang.reflect.Method.invokeNative(Native Method)
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at java.lang.reflect.Method.invoke(Method.java:507)
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at dalvik.system.NativeStart.main(Native Method)
 01-08 12:21:43.949: E/AndroidRuntime(12646): Caused by: java.lang.NullPointerException
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at friends.ListFriendsMain.onCreate(ListFriendsMain.java:95)
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
 01-08 12:21:43.949: E/AndroidRuntime(12646):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1780)
 01-08 12:21:43.949: E/AndroidRuntime(12646):   ... 11 more 
```

适配器的代码如下：

```
public class FriendsAdapter extends BaseAdapter{

private Activity activity;
ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public FriendsAdapter (Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.row_friend_cell, null);

    TextView surname_friend = (TextView)vi.findViewById(R.id.surname_friend);
    TextView name_friend = (TextView)vi.findViewById(R.id.name_friend);
    TextView relation = (TextView)vi.findViewById(R.id.relation);
    ImageView avatar = (ImageView)vi.findViewById(R.id.avatar);

    HashMap<String, String> friends = new HashMap<String, String>();
    friends = data.get(position);

    // Setting all values in listview
    surname_friend.setText(friends.get(ListFriendsMain.KEY_SURNAME));
    name_friend.setText(friends.get(ListFriendsMain.KEY_NAME));
    relation.setText(friends.get(ListFriendsMain.KEY_RELATION));
    imageLoader.DisplayImage(friends.get(ListFriendsMain.KEY_AVATAR_URL), avatar);
    return vi;
 }
} 
```

关于我为什么会收到该错误的任何想法？

**编辑**

主要活动代码指出了错误和我使用的信息。

```
 XMLParser parser = new XMLParser();
    //HashMap<String, String> map = parser.getXmlFromUrl(URL, userid);
    String xml = parser.getXmlFromUrl(URL, userid);
    //Log.v("pictures", "string xml " + xml);
    Document doc = parser.getDomElement(xml); // getting DOM element
    NodeList nl = doc.getElementsByTagName(KEY_FRIEND);

    for (int i = 0; i < nl.getLength(); i++){
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_SURNAME, parser.getValue(e, KEY_SURNAME));
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        map.put(KEY_RELATION, parser.getValue(e, KEY_RELATION));
        map.put(KEY_AVATAR_URL, parser.getValue(e, KEY_AVATAR_URL));

        // adding HashList to ArrayList
        info.add(map);
    }

    list=(ListView)findViewById(R.id.list);
    adapter = new FriendsAdapter(this, info);
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

        }
    }); 
```

第 95 行具体指的是这一行：

```
list.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:08:24.743

看看你的代码：

```
list=(ListView)findViewById(R.id.list);
adapter = new FriendsAdapter(this, info);
list.setAdapter(adapter); 
```

适配器绝对不为空。
您在 setContentView() 中使用哪种布局？
确保布局有一个 id = list 的 ListView。如果您的跟踪正确，这是我能想到的唯一问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T03:34:28.760

您显示的调用堆栈表明该错误位于`ListFriendsMain`. 具体来说，如果您在以下位置显示代码会有所帮助：

```
friends.ListFriendsMain.onCreate(ListFriendsMain.java:95) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T03:32:41.973

根据this ，问题`ListFriendsMain class in onCreate()`出在行号处。`95``Caused by: java.lang.NullPointerException at friends.ListFriendsMain.onCreate(ListFriendsMain.java:95)`

如果您可以使用相关代码编辑您的问题，那么您的问题就有可能得到准确解决。

# javascript - 我正在尝试解决如何更新 asp 代码但不刷新页面。（html、ASP 和 javascript）

> ID：14207769
> 
> 赞同：0
> 
> 时间：2013-01-08T03:28:03.693
> 
> 标签：javascript, html, asp-classic, refresh, reload

所以这是一个很奇怪的问题，但基本上我有一个服务器，它可以使用自己的 asp 指令从 PLC 中读取数据。您可以创建自己的网页以放在可以使用这些 asp 指令的服务器上。所以我有一些非常基本的 html 代码，其中包含一些 javascript 和一些 asp 指令，以从 PLC 获取数据。PLC 中的值不断变化，我希望页面不断更新这些值。我尝试使用元重新加载，但屏幕闪烁，它不是很好。我还尝试使用 java 脚本在间隔后刷新，我设法让计数器工作而无需更新整个页面，但 asp 不会更新（看来您需要重新加载页面以刷新 asp 值）。有没有办法请求服务器刷新asp值，无需重新加载实际网页？还是有更好的方法来完全做到这一点？这是我尝试过的一些代码，因此您基本上可以看到发生了什么：

```
<script type="text/javascript">
window.onload = setupDataRefresh;
function setupDataRefresh() {
  setInterval("refreshData();",100);
}
function refreshData() {
  document.getElementById("Tag0").innerHTML="<% ReadLogixTag("1,0","doLight","BOOL");%>";
}
</script> 
```

在上面的代码中，asp 代码 ReadLogixTag 特定于服务器设备。任何帮助将不胜感激。

谢谢，

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:45:47.367

看看[这里](http://ajaxed.org/)它是一个很棒的库 - 基本上它是经典 asp 中 php xajax 的实现。

你可以自己做到这一点，但 ajaxed 有一些有用的其他类......

基本上你在你的javascript方法refreshData（）中做了一个ajax请求（例如使用jQuery）。在服务器端执行 ReadLogixTag() 并将 html 代码发送回客户端。

示例（使用 jQuery 且没有 ajaxed）：

```
<%

if request.form("ajax") = true then
  call ReadLogixTag( Request.Form("param1"), Request.Form("param2"), Request.Form("param3") )
end if

sub ReadLogixTag(param1, param2, param3)
  ' do stuff
  response.write "<b>" & param1 & "</b>"
end sub

%>

<script type="text/javascript">
window.onload = setupDataRefresh;
function setupDataRefresh() {
  setInterval("refreshData();",100);
}
function refreshData() {
  $.post("myASPPage.asp", {
    ajax: true,
    param1: "1,0",
    param2: "doLight",
    param3: "BOOL"
  }, function(data) {
    $("#Tag0").html(data);
  });
}
</script>

<div id="Tag0"></div> 
```

# c# - 日历 asp.net

> ID：14207770
> 
> 赞同：0
> 
> 时间：2013-01-08T03:28:07.553
> 
> 标签：c#, asp.net

我正在寻找在调度系统中使用的日历控件。我已经搜索了一个，但只能找到这个糟糕的一个[http://www.daypilot.org/try.html](http://www.daypilot.org/try.html)

我只是想知道我可以使用标准的 ASP.NET 日历，更改它的大小并像 Outlook 日历一样使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:27:14.617

我发现这个控制器之一是 Javascript 和其他 asp.net 可以与 asp.net web Form 或 MVC 一起使用

```
http://arshaw.com/fullcalendar/
http://scheduler-net.com/index.html
http://www.daypilot.org/compare-versions.html 
```

# sharepoint-2010 - Web 部件设置中缺少 SP2010 目标受众选项

> ID：14207773
> 
> 赞同：3
> 
> 时间：2013-01-08T03:28:26.353
> 
> 标签：sharepoint-2010, web-parts, target-audience

突然之间，SharePoint 2010 Web 部件设置中的目标受众选项不见了。到目前为止，我已经尝试过：

1.  IIS重置
2.  检查用户配置文件服务正在运行
3.  确保用户配置文件服务列在 Web 应用程序的服务连接中
4.  发布功能未在 PRODUCTION 和 TEST 环境中激活。但是 TEST 环境的目标受众工作正常

任何帮助深表感谢。

问候，艾伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T22:07:13.670

我们遇到了同样的问题，我们找到了一个非常简单（而且愚蠢）的解决方案。只需对 SharePoint 的 web.config 进行一些无意义的小编辑，例如空间或其他内容，然后保存即可。它对我们有用。这是我们找到此解决方案的地方：

[https://sharepoint.stackexchange.com/questions/11184/target-audiences-property-not-visible-in-web-part-tool-pane](https://sharepoint.stackexchange.com/questions/11184/target-audiences-property-not-visible-in-web-part-tool-pane)

对我们来说，这个问题是从我们今天早上 2:00 运行几次更新并重新启动时开始的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T20:24:59.723

今天遇到这个问题，我们的问题是因为用户配置文件被破坏了。所以目标受众不会出现。

我们的解决方法是将运行用户配置文件关联的虚拟应用程序的应用程序池的用户帐户（在 IIS 网站 SharePoint Web 服务下）添加到服务应用程序的权限。

转到 IIS > 展开 SharePoint Web 服务 > 突出显示虚拟应用程序 > 单击操作窗格中的高级设置 > 在进程模型部分中查找身份（希望您的 appPool 命名会有所帮助！）

然后转到服务器场的管理中心 > 管理服务应用程序（在应用程序管理下）> 突出显示服务应用程序 > 单击顶部的权限 > 添加具有完全控制权的应用程序池的名称。

这为我们解决了这个问题。希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-18T12:50:52.197

看起来我找到了解决这个问题的方法。对发布在互联网上的这些误导性答案感到沮丧和困惑。只需按照以下步骤操作：

中央管理员 -> Web 应用程序常规设置 -> 选择您的 Web 应用程序（托管您的网站集）-> 单击顶部功能区中的服务连接 -> 检查用户配置文件服务连接并保存更改。

这应在 Web 部件的高级属性上显示目标受众属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-06T14:01:14.643

以下是 SharePoint 2010 受众定位缺失的原因和解决方案：

1.  在 SharePoint 2010 网站集中启用受众定位 转到网站操作>>网站设置>>单击“网站集导航”>>在网站集管理下>>确保选中“启用受众定位”。

# c# - HttpContext.Current.Session 与 Context.Session

> ID：14207775
> 
> 赞同：10
> 
> 时间：2013-01-08T03:28:38.517
> 
> 标签：c#, asp.net

它们是一样的吗？还是他们不同？

我读过这篇 SO[文章](https://stackoverflow.com/questions/7954844/what-is-the-difference-between-these-two-httpcontext-current-session-and-session)和[这篇](https://stackoverflow.com/questions/940742/difference-between-session-and-httpcontext-current-session)文章，但他们正在比较 HttpContext.Current.Session 和 Session 而不是 Context.Session。我错过了什么/误解了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-08T03:38:06.720

[Context.Session](http://msdn.microsoft.com/en-us/library/system.web.ui.page.session.aspx)在一个页面中与 HttpContext.Current.Session 相同。[HttpContext.Current.Session](http://msdn.microsoft.com/en-US/library/system.web.httpcontext.session%28v=vs.100%29.aspx)通常用于不直接在页面上或没有对当前页面的引用的代码中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T03:43:52.077

HttpApplication 的 Session 属性表现出与 HttpContext.Current.Session 属性不同的行为。如果可用，它们都将返回对同一个 HttpSessionState 实例的引用。当当前请求没有可用的 HttpSessionState 实例时，它们的作用不同。

在这个答案上，您有完整的答复：

[Session 和 HttpContext.Current.Session 的区别](https://stackoverflow.com/questions/940742/difference-between-session-and-httpcontext-current-session)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T03:53:24.657

两者都是相同的，没有区别，有时当前会话需要通过不从 Page 继承的代码访问（尽管是一种不好的做法），在这些情况下 httpcontext.current.session 非常方便并且可以访问会话。

还要研究一下： [Session and HttpContext.Current.Session 之间的区别](https://stackoverflow.com/questions/940742/difference-between-session-and-httpcontext-current-session)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T03:38:24.160

是的，它们完全相同。 [Context](http://msdn.microsoft.com/en-us/library/system.web.ui.page.context.aspx)是页面上下文，因此它比[HttpContext.Current](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.current.aspx) “更大”（包含更多数据） ，但两者的属性 Session 具有相同的值。

# javascript - 当 Div 包含浮动内容（不使用 jQuery）时，在 Javascript 中获取 Div 容器高度

> ID：14207780
> 
> 赞同：4
> 
> 时间：2013-01-08T03:29:03.207
> 
> 标签：javascript

我正在尝试获取最初没有设置高度并包含浮动元素的 div 容器的高度。该`offsetHeight`物业不断涌现`0`。如果我将包含 div 的溢出属性设置为`hidden`. 还有比这更好的方法吗？

我在 jsFiddle 中有一个示例 - [http://jsfiddle.net/6RQMb/](http://jsfiddle.net/6RQMb/)。这是我第一次使用 jsFiddle 进行测试，所以如果我做错了什么，请告诉我......

如果我把 jsFiddle 搞砸了（并且因为 stackoverflow 要求它），这里是示例信息：

HTML

```
<div id="container"><p>Some text that gives this element height</p></div> 
```

CSS

```
p {float:left;}

/* uncomment next line and it works, without it the alert comes back with 0

#container {overflow:hidden;}

*/ 
```

JAVASCRIPT

```
alert( document.getElementById('container').offsetHeight ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:37:48.607

您可以使用该`clearfix`方法强制容器元素“展开”并实际包装其所有子浮动元素。

```
#containerDiv:after { content:"."; clear:both; visibility:hidden; display:block; height:0; position:relative; } 
```

该技术要求浏览器支持 CSS 生成的内容。这种技术的变体可用于支持低至 IE6 的浏览器。[Chris Coyier 在这里解释](http://css-tricks.com/snippets/css/clear-fix/)。

这是在行动：http: [//jsfiddle.net/remibreton/2vQVJ/1/](http://jsfiddle.net/remibreton/2vQVJ/1/)

编辑：如果您只对支持 IE8+ 感兴趣，您可以使用更清洁的工具`.clearfix:after { content: ""; display: table; clear: both; }`并将`clearfix`类添加到您希望自行清除的元素中，以将 CSS 保持在最低限度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:46:14.303

因为子元素`p`是浮动的，容器分割没有任何图形高度。

这是 MSDN 的摘录，其中讨论了`offsetHeight`将返回的内容。[http://msdn.microsoft.com/en-us/library/ms534199%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms534199%28VS.85%29.aspx)

> 当您在文档中使用 !DOCTYPE 声明打开符合标准的模式时，为了符合级联样式表、级别 1 (CSS1) 框模型、Microsoft Internet Explorer 6 和更高版本以不同方式计算对象的高度。这种差异可能会影响 offsetHeight 属性的值。打开标准兼容模式时，height 属性指定围绕对象内容的边界框的顶部和底部边缘之间的距离。如果未打开标准兼容模式，并且使用早期版本的 Windows Internet Explorer，height 属性还包括围绕对象边界框的边框和填充带。

您必须使用任何元素清除技术才能获得`containerDiv`. 清除父元素的方法有很多种。由您决定哪一个最适合您。我一般用`overflow: hidden`.

清除属性已在此处详细说明。[https://developer.mozilla.org/en-US/docs/CSS/clear](https://developer.mozilla.org/en-US/docs/CSS/clear)

# objective-c - 它没有在目标 c 中手动显示更新的数据库

> ID：14207782
> 
> 赞同：0
> 
> 时间：2013-01-08T03:29:24.707
> 
> 标签：objective-c, ios, sqlite, ios-simulator

我在我的 iOS 开发中使用 SQLite 数据库（firefox 插件）。我手动将数据插入我的数据库。但第一次运行程序，显示该数据。但是在手动将数据再次插入数据库后，该数据未显示。我是ios开发的初学者。贝娄有我的数据库连接。请帮忙。

```
- (void)viewDidLoad
{
    NSString *defaultDBPath;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;
    NSString *ddPath = [self getDBPath];
    BOOL success = [fileManager fileExistsAtPath:ddPath];

    if(!success) {

        defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"AddressBook.sqlite"];
        success = [fileManager copyItemAtPath:defaultDBPath toPath:ddPath error:&error];

        if (!success)
            NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }

   // const char *dbpath=[ddPath UTF8String];
    const char *dbpath1=[ddPath UTF8String];
    sqlite3_stmt *statement;
     NSMutableArray  *company =[[NSMutableArray alloc]init];

    if (sqlite3_open(dbpath1, &contactDB)==SQLITE_OK)
    {
        NSString *querySQL=[NSString stringWithFormat:@"SELECT CompanyName FROM tblCompany order by CompanyName"];

        const char *query_stmt=[querySQL UTF8String];

        if (sqlite3_prepare_v2(contactDB, query_stmt, -1, &statement, NULL)==SQLITE_OK)
        {
            int i=0;
            while(sqlite3_step(statement)==SQLITE_ROW)
            {
                NSString *my=[[NSString alloc]initWithUTF8String:(const char*)sqlite3_column_text(statement, 0)];
                NSLog(@"name %@",my);

               [company insertObject:my atIndex:i];
               i=i+1;
                companyDetails=[NSDictionary dictionaryWithContentsOfFile:my];

               // [[cell textlabel] setText:my];
            }
            companies =company;
            companyKey=[companyDetails allKeys];
            sqlite3_finalize(statement);
        }
        else
            NSLog(@"Not connected");
        sqlite3_close(contactDB);
    } 
```

获取数据库路径方法::

```
- (NSString *) getDBPath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    return [documentsDir stringByAppendingPathComponent:@"Address.sqlite"];
} 
```

我尝试了这些，但 ti 没有在我的 iOS 应用程序中显示更新的数据库数据。请给我一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:20:57.433

您没有检查项目文件夹中的 .sqlite 文件，而是像这样检查文件路径

```
/Users/username/Library/Application Support/iPhone Simulator/5.0/Applications/4F4574E2-AD8A-493E-9B16-2D456AFAEB6C/Documents/your file.sqlite 

//username - your user name
//4F4574E2-AD8A-493E-9B16-2D456AFAEB6C  -it changed for projects 
```

# php - 我们如何使用 PHP 代码去除图像的白色背景颜色

> ID：14207785
> 
> 赞同：4
> 
> 时间：2013-01-08T03:29:44.617
> 
> 标签：php, image, image-processing

> **可能重复：**
> [使用以下代码将 Ruby 翻译成 PHP 代码](https://stackoverflow.com/questions/14207639/translate-ruby-into-php-code-with-the-following-code)

我发现了一个非常有用的 Ruby 代码来删除图像的白色背景颜色。

请参阅下面的参考代码： [从图像中删除白色背景并使其透明](https://stackoverflow.com/questions/8041703/remove-white-background-from-an-image-and-make-it-transparent?answertab=active#tab-top)

我试图将代码翻译成 php。但是我得到了一个不想要的结果。这是我第一次在这里发布问题，有人可以给我一些指导并原谅我糟糕的英语。

```
function setTransparency($new_image,$image_source) 
{         
    $transparencyIndex = imagecolortransparent($image_source); 
    $transparencyColor = array('red' => 255, 'green' => 255, 'blue' => 255); 

    if ($transparencyIndex >= 0) { 
        $transparencyColor = imagecolorsforindex($image_source, $transparencyIndex);    
    } 

    $transparencyIndex = imagecolorallocate($new_image, $transparencyColor['red'], $transparencyColor['green'], $transparencyColor['blue']); 
    imagefill($new_image, 0, 0, $transparencyIndex); 
    imagecolortransparent($new_image, $transparencyIndex); 

}

//create image from the source link
$image = imagecreatefrompng('http://i.stack.imgur.com/k7E1F.png');

//create image mask layer
$new_image = ImageCreateTruecolor(imagesx($image), imagesy($image));

//remove white background 
setTransparency($new_image,$image); 

//merge mask with original image source
ImageCopyMerge($new_image, $image, 0, 0, 0, 0, imagesx($image), imagesy($image), 100);

imagejpeg($new_image, null, 95); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T04:25:13.797

JPEG 格式不支持透明度。您应该考虑使用 png 作为输出格式。将最后一行更改为：

```
imagepng($new_image, null, 9); 
```

# windows - 从 powershell 访问卷影复制 (VSS) 快照

> ID：14207788
> 
> 赞同：19
> 
> 时间：2013-01-08T03:30:00.163
> 
> 标签：windows, powershell, volume-shadow-service

我正在尝试使用 Windows 7 中的 Windows Power Shell 创建和访问卷影复制快照。我发现我可以通过之前的[超级用户问题](https://superuser.com/questions/385797/how-to-use-volume-shadows-copy-and-robocopy-on-win7)使用以下内容创建快照：

```
(Get-WmiObject -list win32_shadowcopy).create("C:\","ClientAccessible") 
```

我找不到任何文档表明可以将卷影副本设置为“已公开”，以便可以使用`WMI`. 同一个问题中链接的一篇[文章](http://blogs.msdn.com/b/adioltean/archive/2008/02/28/a-simple-way-to-access-shadow-copies-in-vista.aspx)显示了使用联结访问快照的黑客行为。

当我尝试访问符号链接时，我得到以下信息：

```
PS C:\Windows\system32> ls C:\shadowcopy
Get-ChildItem : The parameter is incorrect.

At line:1 char:3
+ ls <<<<  C:\shadowcopy
    + CategoryInfo          : ReadError: (C:\shadowcopy:String) [Get-ChildItem], IOException
    + FullyQualifiedErrorId : DirIOError,Microsoft.PowerShell.Commands.GetChildItemCommand 
```

尝试直接访问快照会给出以下结果：

```
PS C:\Windows\system32> ls '\\?\GLOBALROOT\Device\HarddiskVolumeShadowCopy14'
Get-ChildItem : Paths that begin with \\?\GlobalRoot are internal to the kernel and should not be opened by managed applications.
At line:1 char:3
+ ls <<<<  '\\?\GLOBALROOT\Device\HarddiskVolumeShadowCopy14'
    + CategoryInfo          : NotSpecified: (:) [Get-ChildItem], ArgumentException
    + FullyQualifiedErrorId : System.ArgumentException,Microsoft.PowerShell.Commands.GetChildItemCommand 
```

如何从 powershell 脚本访问 VSS 快照？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-08T10:49:48.180

你是如何创建符号链接的？如该文章中所述，您必须使用尾部反斜杠指定设备路径：

```
$s1 = (Get-WmiObject -List Win32_ShadowCopy).Create("C:\\", "ClientAccessible")
$s2 = Get-WmiObject Win32_ShadowCopy | Where-Object { $_.ID -eq $s1.ShadowID }
$d  = $s2.DeviceObject + "\\" 
```

然后`$d`是您的卷字母说明符：

```
cmd /c mklink /d C:\shadowcopy "$d" 
```

在此之后，我能够访问安装的卷影副本`C:\shadowcopy`就好了。

`$s2.Delete()`正如@KeyszerS 在评论中指出的那样，要卸载卷影复制调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-03T22:30:50.733

因此，使用此处提供的信息和此处的官方 microsoft 文档[https://docs.microsoft.com/en-us/previous-versions/windows/desktop/vsswmi​​/](https://docs.microsoft.com/en-us/previous-versions/windows/desktop/vsswmi/create-method-in-class-win32-shadowcopy) create-method-in-class-win32-shadowcopy我创建了一个几个解决这个问题的 powershell 函数/cmdlet。随机注意，从 powershell 5 开始，新项目的 itemType 为 symbolicLink，但是当我尝试使用目标为影子快照制作一个时，它失败说路径不存在，所以 mklink 工具仍然是要走的路。

```
function New-ShadowLink {
[CmdletBinding()]
param (
    $linkPath="$($ENV:SystemDrive)\ShadowCopy"
)

begin {
    Write-Verbose "Creating a snapshot of $($ENV:SystemDrive)\"
    $class=[WMICLASS]"root\cimv2:win32_shadowcopy";
    $result = $class.create("$ENV:SystemDrive\", "ClientAccessible");
    Write-Verbose "Getting the full target path for a symlink to the shadow snapshot"
    $shadow = Get-CimInstance -ClassName Win32_ShadowCopy | Where-Object ID -eq $result.ShadowID
    $target = "$($shadow.DeviceObject)\";
}

process {
    Write-Verbose "Creating SymLink to shadowcopy at $linkPath"
    Invoke-Expression -Command "cmd /c mklink /d '$linkPath' '$target'";
}

end {
    Write-Verbose "Created link to shadowcopy snapshot of $($ENV:SystemDrive)\ at $linkPath";
    Write-Verbose "Returning shadowcopy snapshot object"
    return $shadow;
} 
```

}

```
function Remove-ShadowLink {
[CmdletBinding()]
param (
    $shadow,
    $linkPath="$($ENV:SystemDrive)\ShadowCopy"
)

begin {
    Write-verbose "Removing shadow copy link at $linkPath"
}

process {
    Write-Verbose "Deleting the shadowcopy snapshot"
    $shadow.Delete();
    Write-Verbose "Deleting the now empty folder"
    Try {
        Remove-Item -Force -Recurse $linkPath -ErrorAction Stop;
    }
    catch {
        Invoke-Expression -Command "cmd /c rmdir /S /Q '$linkPath'";
    }
}

end {
    Write-Verbose "Shadow link and snapshot have been removed";
    return;
} 
```

}

这些可以通过复制粘贴两个函数然后像这样运行它们来使用

```
$shadow = New-ShadowLink -Verbose;
ls C:\ShadowCopy # would show snapshot version of c drive
Remove-ShadowLink -shadow $shadow -Verbose;
ls C:\ShadowCopy # will give error as it doesn't exist

$s = New-ShadowLink -verbose
VERBOSE: Creating a snapshot of C:\
VERBOSE: Getting the full target path for a symlink to the shadow snapshot
VERBOSE: Creating SymLink to shadowcopy at C:\ShadowCopy
VERBOSE: Created link to shadowcopy snapshot of C:\ at C:\ShadowCopy
VERBOSE: Returning shadowcopy snapshot object
PS C:\> ls C:\ShadowCopy
    Directory: C:\ShadowCopy
#ommitted my C drive listing, but it would be here
PS C:\> Remove-ShadowLink -shadow $s -Verbose
VERBOSE: Removing shadow copy link at C:\ShadowCopy
VERBOSE: Deleting the shadowcopy snapshot
VERBOSE: Deleting the now empty folder
VERBOSE: Shadow link and snapshot have been removed
PS C:\> ls C:\ShadowCopy
ls : Cannot find path 'C:\ShadowCopy' because it does not exist. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-28T10:35:26.657

这是因为`Invoke-Expression`in`New-ShadowLink`返回一个字符串。如果将行修改为：

```
Invoke-Expression -Command "cmd /c mklink /d '$linkPath' '$target'" | Out-Null 
```

它将解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-24T10:40:26.070

尝试用 Remove-CimInstance -InputObject $shadow 替换$ **shadow.Delete** **()**

 **这对我有用

在我收到类似错误之前：

**$shadow.Delete()**给了我错误：

Error en la invocación del método porque [Microsoft.Management.Infrastructure.CimInstance] no contiene ningún método llamado 'Delete'。En línea: 42 Carácter: 9 + $shadow.Delete(); + ~~~~~~~~~~~~~~~~ + CategoryInfo : InvalidOperation: (Delete:String) [], RuntimeException + FullyQualifiedErrorId : MethodNotFound**

# parsing - Haskell，语法错误

> ID：14207790
> 
> 赞同：0
> 
> 时间：2013-01-08T03:30:19.137
> 
> 标签：parsing, haskell, syntax

```
temperatura :: Float->Float
temperatura qCalor
    | qCalor == 0 = 10
    | 0 < qCalor < 3 = 30--fTem1
    | 3 <= qCalor <= 9 = 50
    | qCalor > 9 = 60--fTemp2
    | 15 <= qCalor <= 24 = 150
    | 24 < qCalor <= 27 = 170--fTemp3
    | otherwise = "Nao existe temperatura correspondente a esse calor no grafico!" 
```

优先级解析错误为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T03:39:33.647

首先，在提出问题时，发布实际错误很有帮助。这是我得到的：

```
test.hs:3:7:
    Precedence parsing error
        cannot mix `<' [infix 4] and `<' [infix 4] in the same infix expression

test.hs:4:7:
    Precedence parsing error
        cannot mix `<=' [infix 4] and `<=' [infix 4] in the same infix expression

test.hs:6:7:
    Precedence parsing error
        cannot mix `<=' [infix 4] and `<=' [infix 4] in the same infix expression

test.hs:7:7:
    Precedence parsing error
        cannot mix `<' [infix 4] and `<=' [infix 4] in the same infix expression 
```

* * *

现在，问题基本上是`<`（和其他比较运算符）实际上只是二进制函数 - 带有两个参数的函数。编译器告诉您它无法知道如何在表达式中放置括号，因为这些函数具有相同的优先级。举个例子，这个：

```
| 0 < qCalor < 3 = 30 
```

编译器不知道它是指`(0 < qCalor) < 3`还是`0 < (qCalor < 3)`。无论如何，该行没有合理的打字。

我建议使用类似的东西`(0 < qCalor) && (qCalor < 3)`，或者更好的是，使用这样的函数（可能有一个内置函数）：

```
betweenNums a b c = (a < b) && (b < c) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T09:21:44.770

请注意，python 样式的表达式如下：

```
x < y < z 
```

不是合法的Haskell。即使这样也不对：

```
(x < y) < z 
```

因为：

```
Prelude> :t (<)
(<) :: Ord a => a -> a -> Bool 
```

您与 <、>、<= 和 >= 比较的东西必须是相同的类型。`(x < y)`会产生一个布尔值。因此，下一步（在您的情况下）将`Bool < Float`是不可能的。

# sql - 两个用户使用相同的帐户，相同的数据库中的相同代码但结果不同

> ID：14207792
> 
> 赞同：0
> 
> 时间：2013-01-08T03:30:54.140
> 
> 标签：sql, oracle, plsql

有两个数据库，用户 A 的 DB1 和用户 B 的 DB2。A 需要从 DB2 获取数据，A 向 B 寻求支持。B 使用 sql 如下

```
select t.column1, t.column2, m.column3
from   view1 t, table1 m 
```

和 view1 声明如下

```
select a.column4, b.column5
from   view2 a, table2 b 
```

B 被授予 userA 的 view1 并使用 userA 帐户在 DB1 中进行测试，如下所示

```
select t.column1, t.column2, m.column3
from   view1@lnk2db2 t, table1@lnk2db2 m 
```

B的测试结果显示信息。但是当 A 使用相同的代码时，它只显示列但没有数据。

问题 ：

1.  同一个账号，同一个代码，同一个数据库，同一个时间编译，有没有读者（你）有同样的经历？

2.  B 只将 view1 授予 A 而 view2 不授予，这是关键点吗？

**感谢您的支持，如果有任何地方没有描述清楚，请告诉我。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:54:32.103

您是否使用[虚拟专用数据库](http://docs.oracle.com/cd/B28359_01/network.111/b28531/vpd.htm)？在这种情况下，两个用户在查询同一个表时可能会看到不同的结果。

# wifi-direct - wifi直接创建组失败

> ID：14207795
> 
> 赞同：1
> 
> 时间：2013-01-08T03:31:17.137
> 
> 标签：wifi-direct

我的操作系统是android 4.0.4，当我开发wifi direct时，我创建组有时会成功，有时会失败，失败后会导致系统重启

以下是失败后的错误信息

```
01-01 11:31:30.003: DEBUG/NetworkManagementService(1331): flags <[down broadcast multicast]>
01-01 11:31:30.793: DEBUG/WifiP2pService(1331): P2p start successful
01-01 11:31:30.913: DEBUG/ViewRootImpl(1408): pckname = com.android.systemui
01-01 11:31:31.753: DEBUG/audio_hw_primary(1293): start_output_stream: card:0, port:0, rate:44100
01-01 11:31:31.813: DEBUG/WifiP2pSettings(1556): Update device info: Device: ID_9f68
01-01 11:31:31.813: DEBUG/WifiP2pSettings(1556):  deviceAddress: 00:09:01:55:18:49
01-01 11:31:31.813: DEBUG/WifiP2pSettings(1556):  interfaceAddress: null
01-01 11:31:31.813: DEBUG/WifiP2pSettings(1556):  primary type: 10-0050F204-5
01-01 11:31:31.813: DEBUG/WifiP2pSettings(1556):  secondary type: null
01-01 11:31:31.813: DEBUG/WifiP2pSettings(1556):  wps: 0
01-01 11:31:31.813: DEBUG/WifiP2pSettings(1556):  grpcapab: 0
01-01 11:31:31.813: DEBUG/WifiP2pSettings(1556):  devcapab: 0
01-01 11:31:31.813: DEBUG/WifiP2pSettings(1556):  status: 3
01-01 11:31:31.813: DEBUG/WifiP2pSettings(1556):  discover success
01-01 11:31:32.573: ERROR/WifiP2pService(1331): Unhandled message { what=147462 when=0 obj=android.net.wifi.StateChangeResult@410225f8 }
01-01 11:31:32.583: DEBUG/WifiP2pSettings(1556):  create group success
01-01 11:31:32.693: ERROR/wpa_supplicant(2438): Using interface wlan0 with hwaddr 00:09:01:55:18:49 and ssid 'DIRECT-3p'
01-01 11:31:32.693: DEBUG/NetworkManagementService(1331): rsp <213 00:00:00:00:00:00 0.0.0.0 0 [up broadcast running multicast]>
01-01 11:31:32.703: DEBUG/NetworkManagementService(1331): flags <[up broadcast running multicast]>
01-01 11:31:33.013: ERROR/wpa_supplicant(2438): random: Cannot read from /dev/random: Try again
01-01 11:31:33.013: ERROR/wpa_supplicant(2438): WPA initialization failed.
01-01 11:31:33.013: ERROR/wpa_supplicant(2438): wlan0: Unable to setup interface.
01-01 11:31:33.013: ERROR/wpa_supplicant(2438): Failed to initialize AP interface
01-01 11:31:33.063: ERROR/wpa_supplicant(2438): Failed to remove interface (ifidx=27)
01-01 11:31:33.353: DEBUG/Tethering(1331): sendTetherStateChangedBroadcast 1, 0, 0
01-01 11:31:33.353: DEBUG/Tethering(1331): InitialState.processMessage what=4
01-01 11:31:33.353: DEBUG/Tethering(1331): sendTetherStateChangedBroadcast 0, 0, 0 
```

# javascript - 在脚本中添加图像

> ID：14207797
> 
> 赞同：1
> 
> 时间：2013-01-08T03:31:32.177
> 
> 标签：javascript, image

我想知道是否有任何方法可以从脚本中添加图像。例如，我想这样做的原因是我可以在每次用户点击时添加一个图像。我可以在正文中添加大量图像，然后将它们全部隐藏并在有人单击时一一显示，但似乎还有更好的方法。（如果你不明白，我对 JavaScript**很**陌生）:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:40:54.457

要动态添加照片，请使用如下代码：

```
<div id="holder"></div>

<script type="text/javascript">
var img = new Image();
img.src = 'path/to/image.jpg';
var holder = document.getElementById('holder');
holder.appendChild(img);
</script> 
```

`Image`对象对应于元素`<img>`。要了解有关`Image`(aka `HTMLImageElement`) 对象的更多信息，[请参见此处](https://developer.mozilla.org/en-US/docs/DOM/HTMLImageElement)。要了解有关该`appendChild`方法的更多信息，[请参见此处](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T05:09:22.787

您可以按照以下步骤操作：

1.  在 html 中选择要添加图像的元素。例子：`<div id='maker'></div>`
2.  在您的 html 中为您的按钮添加一个事件。例子：`<button onclick='addImg()'>Add</button>`
3.  然后将这些代码写入您的脚本标签或 .js 文件。这是代码：

    ```
    function addImg()
    {
       var maker = document.getElementById('maker');
        var image = document.createElement('img');
        image.src = '/image/path/with/extension.jpg';
        maker.appendChild(image);
    } 
    ```

# php - 第 404 页 CodeIgniter index.php

> ID：14207798
> 
> 赞同：3
> 
> 时间：2013-01-08T03:31:46.860
> 
> 标签：php, codeigniter, controller, routes, http-status-code-404

我有这个关于 Codeigniter 的问题，不幸的是，这个网站上关于这个问题的其他帖子对我没有帮助，或者我没有很好地应用它。

**编辑* 添加截图：**

![在此处输入图像描述](../Images/1160ad9497fbd0d43ed57551c9c4d456.png)

![在此处输入图像描述](../Images/fc91ac5651cd83ce0b1c949a1e5cbba3.png)

我的目录结构：

*   调度程序（主文件夹）
    *   **系统**
        *   **应用**
            *   配置（文件夹）
            *   控制器（文件夹）
                *   **BS.php**
    *   和其他文件夹和文件
    *   **索引.php**

正如标题所说，当我输入

**[http://mysite.com/folder/index.php](http://mysite.com/folder/index.php)**

它输出找不到页面 404。但是，当我输入**[http://mysite.com/scheduler/index.php/BS](http://mysite.com/scheduler/index.php/BS)**时，它显示“这是一个 BS 文件”，因为我使用下面的代码回应了它。

**BS.php**

```
 function index($flag = NULL)
{

 echo "This is a BS File.";
 } 
```

**路由.php**

```
$route['default_controller'] = "BS";
$route['scaffolding_trigger'] = ""; 
```

**索引.php**

```
error_reporting(E_ALL);

$system_folder = "system";

$application_folder = "application";

if (strpos($system_folder, '/') === FALSE)
{
    if (function_exists('realpath') AND @realpath(dirname(__FILE__)) !== FALSE)
    {
        $system_folder = realpath(dirname(__FILE__)).'/'.$system_folder;
    }
}
else
{
    // Swap directory separators to Unix style for consistency
    $system_folder = str_replace("\\", "/", $system_folder); 
}

define('EXT', '.php');
define('SELF', pathinfo(__FILE__, PATHINFO_BASENAME));
define('FCPATH', str_replace(SELF, '', __FILE__));
define('BASEPATH', $system_folder.'/');

if (is_dir($application_folder))
{
    define('APPPATH', $application_folder.'/');
}
else
{
    if ($application_folder == '')
    {
        $application_folder = 'application';
    }
    define('APPPATH', BASEPATH.$application_folder.'/');
}

require_once BASEPATH.'codeigniter/CodeIgniter'.EXT; 
```

最后，我的**config.php**

```
$config['base_url'] = "http://" . $_SERVER['HTTP_HOST']. "/scheduler/";
$config['secure_base_url'] = "https://" . $_SERVER['HTTP_HOST']. "/scheduler/";

$config['index_page'] = "index.php";

$config['uri_protocol'] = "REQUEST_URI"; 
```

现在做了几天，仍然没有一个过程给出。很高兴有任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T07:27:40.627

我终于想通了，如上我的问题所示，还记得目录结构吗？

在 Controller 文件夹中，我有这个 BS.php 文件。然后，如果我没记错的话，那就是文件的大小写敏感问题。这可能是由于域不支持文件名中的大写字母，我在本网站其他问题的一些答案中读到了它。

简而言之，我将**BS.file**制作成了**bs.file**。它起作用了。

**编辑**

此外，在**routes.php**中，我将 BS 更改为 bs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:37:10.813

我看到你已经发布了 index.php 的代码。我认为您不需要，因为您应该尽量不要在那里编辑任何内容。

您的根文件夹中有 .htaccess 吗？

每当我开发任何 CI 应用程序时，我总是将这个 .htaccess 文件放在手边。

[http://pastebin.com/nTsThZHv](http://pastebin.com/nTsThZHv)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T04:51:19.123

您应该从 index.php 文件中删除代码并在您的 Web 应用程序的根目录中创建 .htaccess 文件。（即应用程序，系统文件夹存在）。

这是我的重复答案： [Codeigniter 与 localhost (XAMPP) 中的路径有关的问题](https://stackoverflow.com/questions/13146395/codeigniter-issues-with-paths-in-localhost-xampp/13154286#13154286)

请在项目文件夹中创建 .htaccess 文件并写入：

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule ^(.*)$ index.php?url=$1 [PT,L] 

</IfModule>
<IfModule !mod_rewrite.c>
 ErrorDocument 404 index.php
</IfModule> 
```

您不需要在配置文件的 base_url 中定义：

```
$config['base_url'] = ''; // blank it. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-03T11:35:05.433

就我而言，这是控制器的案例问题，但与@Brain 的答案略有不同。这是因为我使用了一个名为“AxxxxBxxx.php”的默认控制器。我总是收到 404 错误。在我将其更改为“Axxxxxxxxxxx.php”并更改相应的类名之后。有用。

顺便说一句，我使用 codeigniter 3.0。希望能帮助到你！

# javascript - 过滤结果上的 jquery 同位素排序异常

> ID：14207801
> 
> 赞同：1
> 
> 时间：2013-01-08T03:32:23.377
> 
> 标签：javascript, jquery, sorting, filtering, jquery-isotope

我使用复选框组合过滤器（使用 jquery UI 样式）、组和哈希历史记录将同位素用作产品排序矩阵。总而言之，一切都按预期工作，结果非常好。我遇到了一个问题，我需要根据某些复选框对过滤结果进行重新排序。如果你看这里的小提琴：http: [//jsfiddle.net/rwbennet/B8kV3/2/](http://jsfiddle.net/rwbennet/B8kV3/2/)你可以看到我的结果。问题是，如果您向下滚动到复选框并选择“健康奖励”，我需要将所有“万事达卡”标记的结果排在结果的首位。因此，作为基本排序，所有内容都按字母顺序排列，如果您选择某些复选框，结果将保持字母顺序，但如果您选择“健康激励”作为“用途”之一，结果应重新排序并以“万事达卡”开头“ 结果。还有其他例外，但这只是一个例子。有没有办法做我在这里解释的内置同位素？非常感谢您对此问题的任何考虑。

目前，这是我的同位素代码：

```
 var $container = $('#container');
 var $filterDisplay = $('#filter-display');

 // Initiate Isotope and pass in hash change filter
 $container.isotope({
    filter: hashfilter
 });

 if( location.hash != "" ){
   var hashfilter = location.hash.substr( 1 );
 } else {
   var hashfilter = "*";
 }

 var filters = {};

 isOptionLinkClicked = false;

 $('#options').on( 'change', function( jQEvent ) {

   var checkbox = jQEvent.target;
   var $checkbox = $( checkbox );
   var value = checkbox.value;
   var group = $checkbox.parents('.option-set').attr('data-group');

   // create array for filter group, if not there yet
   if ( !filters[ group ] ) {
     filters[ group ] = [];
   }

var index = $.inArray( checkbox.value, filters[ group ] );

if ( checkbox.checked ) {
  var selector = 'input';
  $checkbox.siblings( selector ).removeAttr('checked');

  if ( index === -1 ) {
    // add filter to group
    filters[ group ].push( checkbox.value );
    isOptionLinkClicked = true;
    $(this).data('clicked', true);
    //console.log($(this).data());
  }

  } else {
    // remove filter from group
    filters[ group ].splice( index, 1 );

  }

   var i = 0;
   var comboFilters = [];

  for ( var prop in filters ) {
    var filterGroup = filters[ prop ];

    // skip to next filter group if it doesn't have any values
    if ( !filterGroup.length ) {
      continue;
    }

    if ( i === 0 ) {
      // copy to new array
      comboFilters = filterGroup.slice(0);

    } else {

    var filterSelectors = [];

    // copy to fresh array
    var groupCombo = comboFilters.slice(0); // ex: [ A, B ]

    // merge filter Groups
    for (var k=0, len3 = filterGroup.length; k < len3; k++) {

      for (var j=0, len2 = groupCombo.length; j < len2; j++) {
        filterSelectors.push( groupCombo[j] + filterGroup[k] ); // [ 1, 2 ]
      }

    }

    // apply filter selectors to combo filters for next group
    comboFilters = filterSelectors
  }
  i++

  location.hash = comboFilters.join(', ');

  var hashObject = location.hash.replace( /^#/, '' );

  //return false;
}

$container.isotope({ filter: comboFilters.join(', ') });

// Helpful for messing with hashchange URLs
//$filterDisplay.text( comboFilters.join(', ') );

});

var hashObject = location.hash.replace( /^#/, '' );
var hashChanged = false;

$(window).bind( 'hashchange', function( event ){

if(location.hash != "") {
    var hashfilter = location.hash.substr(1);
} else {
    var hashfilter = "*";
}

$container.isotope({
    filter: hashfilter
});

})

// trigger hashchange to capture initial hash options
.trigger( 'hashchange' );

// trigger ui clicks to mirror initial hash options
var strHash = location.hash.substr(1); // Get our url hash
var arHash = strHash.split(" ").join("").split(",").join("").split("."); 
// get rid of the spaces, commas, and conver to an array
var arHashUnique = Array(); // remove duplicates from the array
$.each(arHash, function(i, item){
   if($.inArray(item, arHashUnique) === -1 && item != "") 
   {
      arHashUnique.push(item);
   }
});

for(var i in arHashUnique) // click the appropriate filters {
  $("#" + arHashUnique[i]).click();
} 
```

# javascript - 如何跟踪对我的 Javascript 的更改？

> ID：14207805
> 
> 赞同：0
> 
> 时间：2013-01-08T03:32:43.670
> 
> 标签：javascript, html, css

我有文字，当您单击它时，背景颜色会变为绿色，如果再次单击它会变为红色，然后再单击一次它会变回白色。我已成功链接我的 javascript 以将颜色更改为绿色，但我无法弄清楚如何跟踪对 javascript 的更改以识别它是绿色，然后将其更改为红色。

我所拥有的是这样的：

```
<script type="text/javascript">
function change_color($id){

    var link = document.getElementById('link-'+$id);

    var color = link.style.backgroundColor;
    if (color == "green"){
    link.style.backgroundColor="red";
    }if (color == "red"){
    link.style.backgroundColor="white";
    }if (color == "white"){
    link.style.backgroundColor="green";
    }else{
    link.style.backgroundColor="green";
    }

}

</script> 
```

当我运行程序时，它只使用我相信的 else 语句。如何跟踪当前的 backgroundColor 以激活上述 if 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:36:56.047

如果要检查多个条件但*只运行其中一个*`else if`条件，则需要在第一个条件之后使用for 所有条件：

```
if (color == "green"){
    link.style.backgroundColor="red";
}else if (color == "red"){
    link.style.backgroundColor="white";
}else if (color == "white"){
    link.style.backgroundColor="green";
}else{
    link.style.backgroundColor="green";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T03:35:46.483

如果颜色为绿色，则将其设置为红色。然后下一个条件检查红色（现在为真）并再次更新颜色。

考虑使用[`switch`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)语句而不是`if`/`else`语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T03:38:13.383

`if..else if..else`在您`if`的 's 之间使用或使用 a代替`switch-case`：

```
var color = link.style.backgroundColor;
var newColor = "green";
switch (color) {
    case "green":
    {
        newColor="red";
        break;
    }

    case "red":
    {
        newColor="white";
        break;
    }

    case "white":
    {
        newColor = "green";
        break;
    }

    default:
    {
        break;
    }
}

link.style.backgroundColor = newColor; 
```

# html - HTML 代码宽度

> ID：14207806
> 
> 赞同：0
> 
> 时间：2013-01-08T03:33:06.170
> 
> 标签：html, coding-style

HTML中的代码宽度是否有约定？我的一些台词变得非常长（由于属性），而且很难查看所有内容。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:58:45.277

我使用每行 120 个字符的宽度。

作为我自己的一条规则，如果该行超过 120，那么在某些情况下它可能会写得更好，这意味着可能会删除一些在样式表中定义为样式的属性。

在一天结束时，只要我个人对我所看到的感到满意。而且我可以很好地理解它，而不必在这里和那里滚动以查看发生了什么......那么就我而言，这很好。

关于材料的未来读者/编辑，我会让他们担心他们希望如何根据自己的个人编辑风格来格式化信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:42:25.553

许多人同意 79-80 列作为幻数。当然，这取决于您和您的同事。还要记住，有一天，除了你们之外的其他人可能不得不进来重构它。

相关问题： [在当今时代，是否有正当理由在代码文件中强制最大宽度为 80 个字符？](https://stackoverflow.com/questions/110928/is-there-a-valid-reason-for-enforcing-a-maximum-width-of-80-characters-in-a-code)

注意：当`HTML`我不介意线条有点长时，尤其是当你有嵌套时`div`，线条可能会开始远离左边距。

# python-2.7 - 在 python 中调用 SimpleCV 时出现 SimpleCV 错误

> ID：14207807
> 
> 赞同：1
> 
> 时间：2013-01-08T03:33:17.607
> 
> 标签：python-2.7, simplecv

我用 Python 安装了 simplecv 超级包。但是，当我运行时`from SimpleCV import ImageSet`，出现以下错误：

```
Traceback (most recent call last):
  File "<pyshell#10>", line 1, in <module>
    from SimpleCV import ImageSet
ImportError: No module named SimpleCV 
```

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:12:55.237

有两种可能的情况。它可能没有正确安装，或者您的 python 路径设置不正确。我不确定您使用的是什么操作系统（通过代码输出我猜是 windows），

要验证它是否正确安装，请从文件资源管理器中搜索“SimpleCV”并查看是否在 python 库目录下找到它。如果是这样，那么它可能已安装，然后您只需要执行以下操作：

```
SETX PATH C:/Python27/;C:/Python27/Scripts/;C:/OpenCV2.3/opencv/build/x86/vc10/bin/;%PATH%
SETX PYTHONPATH C:/OpenCV2.3/opencv/build/python/2.7/;%PYTHONPATH% 
```

如果这不起作用，您可能必须手动安装： [https ://github.com/ingenuitas/SimpleCV#windows-7vista](https://github.com/ingenuitas/SimpleCV#windows-7vista)

# javascript - 父函数JavaScript中的while循环

> ID：14207809
> 
> 赞同：2
> 
> 时间：2013-01-08T03:33:42.127
> 
> 标签：javascript

我无法解释这段代码在做什么。这里是：

```
function parent(e, n) { 

    if (n === undefined) n = 1; //if n is not defined, use 1 by default

    while(n-- && e) e = e.parentNode; 

    if (!e || e.nodeType !== 1) return null; 

    return e;   

} 
```

该函数接受两个参数。一个用于元素，第二个用于元素的祖先。因此，在第二个参数中传递 2 将检索元素的祖父母（DOM 树上的 2 个元素）。

我理解所有这一切，除了`while`循环。我不确定如何倒数选择那个特定的祖先。这个while循环如何使这个函数选择一个祖先？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:38:01.243

这里的重点是数字是“真实的”（或虚假的）。 `0`作用相同`false`。因此，当`n`达到零时，循环结束。

因此，如果`n`从 2 开始，循环将最多运行 2 次。

另一种情况稍微容易理解。如果节点没有父节点，则循环也将终止。

循环的每次迭代都会执行`e = e.parentNode`，它会获取“当前”节点的父节点。如果循环执行 2 次迭代，则将 dom 向上移动 2 层（“祖父母”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:39:05.160

看起来它获得了第 n 个父元素......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T03:43:21.090

循环的每次迭代都会查看传入元素的 parentNode。因此，如果您以 1 作为迭代因子传入特定的 div，它将查看该 div 的直接父级。如果你传入 2，它将查找 2 个父级（div 的父级的父级）。它通过使用 e.parentNode 并在循环的每次迭代中将 e 重置为其父级来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T03:47:23.133

试试这个：

```
var n = 2;
while(n--) console.log("do this " + n + " more times.");

if(0){
  console.log("never executed because zero is evaluated as false");
} 
```

在支持 console.log 的浏览器中。

在说明数字 0 被评估为假之前已经给出了答案。

n-- 表示返回 n 的值，然后减一。如果您在上面的代码中有 --n ，那么它只会执行一次（先减去）。

在您的代码中，如果 n 为 2，则循环将执行 2 次，在循环变量 e（元素）中设置为元素的父节点。如果没有父节点，那么在这种情况下，语句 if(e){...} 将不会做任何事情，因为评估未定义的值会导致错误。因此，当 e 未定义时（例如没有父节点），即使 n 不为 0，n && e 也会返回 false。

# c# - 使用 C# 从 xml 文件中获取值

> ID：14207811
> 
> 赞同：2
> 
> 时间：2013-01-08T03:33:47.647
> 
> 标签：c#, xml, xmlreader

我对 xml 很陌生，我不知道如何从下面的 xml 文件中读取/获取值：

```
<?xml version="1.0" encoding="utf-8" ?>
<Jeopardy>
  <category name = 'People in Computing'>
<first points = '100' answer = 'Alan Turing'>Known as the questioner of the human   mind, this man is known for helping tell humans and computers apart.</first>
<second points = '200' answer = 'Grace Hopper'>This female pioneer of the COBOL computer programming language was an Admiral in the US Navy.</second>
<third points = '300' answer = 'Tim Berners-Lee'>Called the father of the world wide web, this man is the director of the W3C.</third>
<fourth points = '400' answer = 'Lawrence Lessig'>An American academic and political activist who founded the Creative Commons, this man lobbies for reduced legal restrictions on copyrights and trademarks in the technology sector.</fourth>
<fifth points = '500' answer = 'Ada Lovelace'>This woman, known as the world's first computer programmer was also a Countess.</fifth>
  </category>
</Jeopardy> 
```

对不起，糟糕的格式，无法正确处理。

首先，我尝试在 XDocument 中加载此文件导致“无法将非空格添加到内容”异常，但如果加载到 XmlDocument 中则不会发生。

我尝试获取名称值的代码：

```
 string fileName = @"C:\Users\Kara\documents\visual studio 2010\Projects\Final Project\Final Project\Jeopardy.xml";

        XmlDocument doc = new XmlDocument();

        doc.Load(fileName);

        List<string> categories = new List<string>();

        XmlNodeList nList = doc.SelectNodes("/category/name");

        foreach (XmlNode node in nList)
        {
            categories.Add(node.ToString());
        } 
```

可悲的是，在调试 nList 时计数为零，我不知道为什么。我已经尝试在这里查看大量问题以及其他地方的教程，但我只是感到沮丧。我到底如何从名称和其他节点中获取值？有人可以解释一下吗？也许为什么我会在 XDocument 中出现非空白错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T03:36:12.463

`doc.SelectNodes("/category/name")`

您没有找到任何节点，因为 1）第一个节点是`Jeopardy`，而不是`category`2）`name`是类别的属性而不是子元素。

尝试：`doc.SelectNodes("/Jeopardy/category/@name")`

像这样：

```
foreach (XmlNode node in nList) {
  categories.Add(node.Value);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T03:39:41.543

确保文件的编码与您的文档加载方法所期望的编码相匹配。通常 UTF8 是 XML 文件的首选编码。

如上所述，您可以使用：

```
doc.SelectNodes("/Jeopardy/category/name"); 
```

或者

```
doc.SelectNodes("//category/name"); 
```

或者

```
doc.SelectNodes("//name"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-29T07:05:03.007

您需要打开 XML 文档

```
 XmlDocument _document = new XmlDocument();
    byte[] bytes = File.ReadAllBytes(filePath);
   string xml = Encoding.UTF8.GetString(bytes);
    try
    {
    _document.LoadXml(xml);
    }
    catch (XmlException e)
    {
    //exception handling
    }                  

    var doc = (XmlDocument)_document.CloneNode(true);

    XmlNode node = doc.GetElementsByTagName("your child node name"); 
```

一旦你得到你的节点，你就可以用它做必要的事情

# java - Java AES 加密未正确解密

> ID：14207813
> 
> 赞同：2
> 
> 时间：2013-01-08T03:34:04.907
> 
> 标签：java, gzip, aes

我在下面有这个测试，我试图验证我的压缩/解压缩的 AES 加密/解密是否正常工作。我对加密/解密进行了测试，对压缩/解压缩进行了测试，我知道它们单独工作正常，但由于某种原因，当我将它们组合在一起时，IV 在解压后搞砸了。我被卡住了，不知道还要寻找什么，有人可以提供任何建议或帮助吗？如果我需要发布更多代码，请告诉我。我想我包括了重要的东西。

对于上下文：我要做的是获取一些敏感数据，用 AES 加密，用 RSA 公钥加密 AES 密钥，然后压缩这两个数据，以便它们可以通过网络发送。然后在另一端我想解压缩数据，使用 RSA 私钥解密 AES 密钥，然后用它来解密数据。如果有另一种方法可以做到这一点，我不会被锁定在自己写所有东西上。如果您建议一个库，请只建议我可以在商业产品中使用的库。

```
@Test
public void testEncryptionDecryptionProcesses() throws SSHException {

    SSHKey key1 = generateKeyPair();

    UnencryptedData data = new UnencryptedData();
    data.setUserName("hardy");
    data.setHashedPassword("somepassword");
    data.setRequest("eat");
    data.setResponse("");
    data.setTimestamp(new Timestamp(new Date().getTime()).toString());
    data.setPublicKeyMod(key1.getPublicMod().toString());
    data.setPublicKey(key1.getPublicKey().toString());

    byte[] bytes = encryptAndCompress(data, key1);

    assertTrue(bytes != null);
    assertTrue(bytes.length > 0);

    UnencryptedData decryptedData = decompressAndDecrypt(bytes, key1);
    assertEquals(data.getDataForEncryption(), decryptedData.getDataForEncryption());

}

public static byte[] encryptAndCompress(UnencryptedData data, SSHKey sshKey) {

    byte[] results = null;

    try {
        byte[] aesKey = createKeyForAES(AES_BIT_LENGTH);
        //this should use the servers public key so that only the server can decrypt it
        //gather data, get a digest, encrypt the data
        UnencryptedData digestedData = createDigest(data);
        //encrypt it
        EncryptedData toCompress = encryptDataAES(digestedData, aesKey);
        String encryptedAESKey = encryptKey(sshKey, aesKey);
        toCompress.setEncryptedAESKey(encryptedAESKey);
        //compress it
        byte[] compressed = compressString(toCompress.getDataForCompression());
        //return the compressed and encrypted data.
        results = compressed;
    } catch(SSHException e) {

        Log.e("SSHFunctions.encryption", "Unable to run the encryption/compression process on the data");
    } catch (UnsupportedEncodingException e) {

        Log.e("SSHFunctions.encryption", "Charset not supported");
    } 

    return results;
}

public static UnencryptedData decompressAndDecrypt(byte[] data, SSHKey sshKey) {

    UnencryptedData results = null;

    try {
        //take the data and decompress it, should result in encryptedData|encryptedAESKey
        byte[] decompressed = decompressString(data);
        String decompressedStr = new String(decompressed, CHAR_SET);
        String[] decompressedArr = decompressedStr.split(SPLIT_STRING);
        //using the users private key decrypt the data
        byte[] decryptedKey = decryptKey(sshKey, decompressedArr[1]);
        EncryptedData encryptedData = new EncryptedData();
        encryptedData.setAesEncryptedData(decompressedArr[0].getBytes(CHAR_SET));
        encryptedData.setIV(decompressedArr[2].getBytes(CHAR_SET)); //TODO: this doesn't seem to decompress correctly
        //create a digest from the decrypted data and compare it with the digest that was included.
        UnencryptedData decryptedDate = decryptDataAES(encryptedData, decryptedKey);
        if(validDigest(decryptedDate)) {

            results = decryptedDate;
        }
        //if equal return the data, if not equal return null
    } catch(Exception e) {

        Log.e("SSHFunctions.decryption", "Unable to run the uncompress/decrypt process on the data");
    }

    return results;
}

public static byte[] decompressString(byte[] toDecompress) {

    ByteArrayInputStream bis = new ByteArrayInputStream(toDecompress);
    byte[] uncompressed;

    try {

        ByteArrayOutputStream buffer = new ByteArrayOutputStream();
        GZIPInputStream is = new GZIPInputStream(bis);

        byte[] tmp = new byte[256];

        while (true) {

            int r = is.read(tmp);
            if (r < 0) {

                break;
            }
            buffer.write(tmp, 0, r);
        }
        is.close();

        uncompressed = buffer.toByteArray();

        try {
            bis.close();
        } catch (IOException e) {
            ;
        }

        try {
            buffer.close();
        } catch (IOException e) {
            ;
        }
    } catch(IOException e) {

        uncompressed = null;
        Log.e("Zipfunctions.decompress", "Unable to decompress");
    }

    return uncompressed;    
}

public static byte[] compressString(byte[] toCompress) {

    byte[] toCompressBytes = toCompress;
    byte[] compressed;

    ByteArrayOutputStream bos = new ByteArrayOutputStream(toCompressBytes.length);
    try {
        GZIPOutputStream compressor = new GZIPOutputStream(bos);

        compressor.write(toCompressBytes, 0, toCompress.length);
        compressor.close();

        compressed = bos.toByteArray();

        try {
            bos.close();
        } catch(IOException e) {
            ;
        }
    } catch(IOException e) {

        compressed = null;
        Log.e("ZipFunctions.compress", "Unable to compress data");
    }

    return compressed;      
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:07:50.640

您正在尝试实现类似于[OpenPGP](https://www.rfc-editor.org/rfc/rfc4880)的加密系统。也就是说，您希望使用对称密钥加密任意数量的数据，并与接收者安全地共享此密钥（和加密数据）。

因此，我建议您考虑使用[BouncyCastle 团队提供](http://www.bouncycastle.org/docs/pgdocs1.5on/index.html)的 Java OpenPGP 库。

他们的执照[很宽松](http://www.bouncycastle.org/licence.html)。然而，他们的文档是出了名的差，所以你需要谷歌很多例子来看看如何实现你的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:14:33.530

首先，您不应该使用字符串分隔符来分隔字节缓冲区的各个部分。如果您的数据中存在分隔符，则会导致问题。

我建议您阅读有关[TLV 结构](http://en.wikipedia.org/wiki/Type-length-value)的信息！

这是传输数据的简单实现！

```
class TransportData {
private byte[] iv;
private byte[] aesKey;
private byte[] encryptedData;

public TransportData() {
}

public TransportData(byte[] iv, byte[] aesKey, byte[] encryptedData) {
this.iv = iv;
this.aesKey = aesKey;
this.encryptedData = encryptedData;
}

public byte[] encode() throws IOException {
ByteArrayOutputStream baos = new ByteArrayOutputStream();
DataOutputStream dos = new DataOutputStream(baos);
dos.writeInt(iv.length);
dos.write(iv);
dos.writeInt(aesKey.length);
dos.write(aesKey);
dos.writeInt(encryptedData.length);
dos.write(encryptedData);
dos.close();
return baos.toByteArray();
}

public void decode(byte[] buffer) throws IOException {
ByteArrayInputStream bais = new ByteArrayInputStream(buffer);
DataInputStream dis = new DataInputStream(bais);
iv = new byte[dis.readInt()];
dis.read(iv);
aesKey = new byte[dis.readInt()];
dis.read(aesKey);
encryptedData = new byte[dis.readInt()];
dis.read(encryptedData);
dis.close();
}

public byte[] getAesKey() {
return aesKey;
}
public byte[] getEncryptedData() {
return encryptedData;
}
public byte[] getIv() {
return iv;
}
} 
```

# c# - Visual Studio 拆分容器和表单

> ID：14207814
> 
> 赞同：0
> 
> 时间：2013-01-08T03:34:11.307
> 
> 标签：c#, winforms, splitcontainer

我想在我的应用程序的拆分容器 Panel2 上添加 12 个小表单。那是一个 4x3 = 12 个表格的网格。

所以在我的应用程序的主窗体中，我添加了一个 SplitContainer 控件。我分别创建了 12 个单独的表单。
要将 12 个表单添加到 splitcontainer，我这样做：

```
 form1 _form1 = new form1();
        _form1.TopLevel = false;
        this.splitContainer1.Panel2.Controls.Add(_form1);
        _form1.Show();
        ....
        form12 _form12 = new form12();
        _form12.TopLevel = false;
        this.splitContainer1.Panel2.Controls.Add(_form12);
        _form12.Show(); 
```

这里的问题是所有表单（form1...form12）都显示在同一个位置（Location），behing form1。所以我必须手动移动和替换每个表单

我想要得到的是一个包含所有 12 个表单的 SplitCONtainer，每个表单都位于彼此不同的特定位置。

因此，当 SplitContainer 调整大小时，所有 12 个表单也都在调整大小，并且当一个表单关闭时，它的速度保持为空，直到一个新表单被放置在那里。

编辑。我在这里编辑以展示我如何解决这个问题

```
 int _width = this.flowLayoutPanel1.Width;
        int _height = this.flowLayoutPanel1.Height;

        _width = (int)_width / 4;
        _height = (int)_height / 3;

        _form1.TopLevel = false;
        _form1.Width = _width;
        -form1.height = _height;
        _form1.Owner = this;
        _form1.TopLevel = false;
        flowLayoutPanel1.Controls.Add(_form1);
        _form1.Show();
....
_form12.TopLevel = false;
            _form12.Width = _width;
            -form12.height = _height;
            _form12.Owner = this;
            _form12.TopLevel = false;
            flowLayoutPanel1.Controls.Add(_form12);
            _form12.Show(); 
```

它可以按我的意愿工作。感谢您将 FlowLayoutPanel 引入 SplitContainer.panel

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T04:59:55.297

```
 Form frm;
        for (int i = 0; i < 12; i++)
        {
            frm = new Form(); //generate new instance
            frm.Width = 150;
            frm.Height = 150;
            frm.Owner = this;
            frm.TopLevel = false;
            flowLayoutPanel1.Controls.Add(frm);
            frm.Show();
        } 
```

您可以使用 FlowlayoutPanel。只需将 Flowlayoutpanel 添加到 SplitContainer1.Panel2 并设置 flowLayoutPanel1.dock = Fill

# php - PHP MySQL 数据库测试

> ID：14207817
> 
> 赞同：1
> 
> 时间：2013-01-08T03:34:34.657
> 
> 标签：php, mysql

我可以使用以下代码连接到数据库。

```
<?php
$con = mysql_connect("localhost","peter","abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
  echo "Connected...!";
?> 
```

但是，上面的代码只是检查PHP到MySQL服务器的连接是否建立，并不能检查数据库用户是否与数据库名称连接。

好吧，我试图连接到我项目中的数据库，但我无法连接到它。我已经为不清楚的自定义错误报告，但我可以使用 PHP 从 PHP 连接到数据库服务器

```
mysql_connect(servername,username,password); 
```

那么，任何人都可以建议我一些代码来测试数据库用户是否有权连接到数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T03:40:48.993

可以这样做（使用 mysqli 扩展）：

```
<?php

$link = @mysqli_connect('host', 'user', 'secret');
if(!$link) {
    die('failed to connect to the server: ' . mysqli_connect_error());
}

if(!@mysqli_select_db($link, 'dbname')) {
    die('failed to connect to the database: ' . mysqli_error($link));
} 
```

在我的示例中，我使用了 mysqli 的功能 api。这与旧的 mysql 扩展中的工作方式相同。

# spring-aop - 面向方面的编程 - 建议在同一个线程中运行？

> ID：14207819
> 
> 赞同：8
> 
> 时间：2013-01-08T03:35:13.723
> 
> 标签：spring-aop

如果我有一个适用于方法的建议（之前、之后或周围），该建议是否会在调用该方法的同一线程中运行？这是 Spring 的 AOP。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T03:43:43.047

是的，它将在同一个线程中运行。Aspect 将创建对象方法的代理，该代理与将围绕方法执行的切入点定义相匹配。但它不会在不同的线程上做任何事情。

# java - 几个 if else if 条件

> ID：14207823
> 
> 赞同：-5
> 
> 时间：2013-01-08T03:35:40.913
> 
> 标签：java

我有一个java类里面有一个方法需要根据现在满足的条件返回一些整数值，我`if...else`在类的方法中放置了一些条件，如下所示，并在注释中我写了这个条件何时执行。

请告知我在方法`def()` `if`条件中的逻辑是否正确，还请让我知道是否执行了任何条件是否会检查剩余条件。

```
class abc
{
  private static SUCCESS = 1;
  private static FAILURE = 2;

  public void int def()
  {
    if (a=20 && b==30)
    {
        if (c==30 && d==40)  // nesting IF condition will go if a=20 & b=30
        { // do something
          return SUCCESS; // IF this condion is met will it check remaing conditions or not
        }
        else
        {
          return FAILURE; // IF this condion is met will it check remaing conditions or not
        }
    }
    else if( g==50 && d==60)
    {
      // do something
      if (t==56 && p==98) // nesting IF condition will go if g=50 & d=60
      {
        // do something
        return SUCCESS; // IF this condion is met will it check remaing conditions or not
      }
      return FAILURE; // IF this condion is met will it check remaing conditions or not
    }
    else
      return FAILURE; // default return means if any othe if or else if block is satisfied then this default value will be returned from the method
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:41:10.787

那应该是一样的

```
if ((a==20 && b==30 && c==30 && d==40) || (g==50 && d==60 && t==56 && p==98))
    return  SUCCESS; 
else
    return  FAILURE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:41:22.417

首先，如果您缺少相等的

```
if (a==0 && b==30) 
```

在这两个 if 中，您都可以删除 else 词（和括号），以避免一些不必要的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T03:41:46.043

您的逻辑是否正确尚不清楚，因为您没有提供有关它应该如何工作的规范。

但是，您可能至少有一个问题：

```
if (a=20 && b==30) 
```

因为那`=`几乎可以肯定是一个`==`.

此外，如果您摆脱产生以下内容的思维定势，您会发现您的代码更容易遵循：

```
if (something)
    return something;
else
    do_something_else; 
```

如果将其更改为以下内容，则可读性会大大提高：

```
if (something)
    return something;
do_something_else; 
```

*特别是*当您像您一样拥有多个图层时。

关于您的评论：

> 如果满足此条件，它将检查剩余条件。

答案是不。从函数中取出的那一刻`return`，不会执行该函数中的其他代码。

# php - 标头重定向问题

> ID：14207825
> 
> 赞同：1
> 
> 时间：2013-01-08T03:36:08.557
> 
> 标签：php, redirect, header, http-redirect

我`header();`用来重定向到文件： http: [//ozonostudio.com/wp-content/uploads/downloads/2012/09/free.psd_.zip](http://ozonostudio.com/wp-content/uploads/downloads/2012/09/free.psd_.zip)

```
header('Location: ' . $row[3]); 
```

`$row[3]`SQL 的值在哪里。这适用于除 Safari 和 Opera 之外的所有浏览器。

在 Opera 中，它显示地址但不下载任何内容。我正在尝试从外部 URL 下载文件。用户使用表单将链接添加到我的数据库。

更新 //////////////////

原网址为： [http ://ozonostudio.com/wp-content/plugins/download-monitor/download.php?id=3](http://ozonostudio.com/wp-content/plugins/download-monitor/download.php?id=3)

Safari & Opera 显示文件地址，但浏览器不开始下载，这是怎么回事？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-08T04:33:48.623

如果在这种情况下您的数据库值总是返回一个外部下载 url，您应该使用

```
header('Content-type: application/pdf'); 
OR header('Content-type: application/zip'); 
```

或所需的文件格式

# c++ - 可变模板函数和引用类型

> ID：14207827
> 
> 赞同：0
> 
> 时间：2013-01-08T03:36:38.997
> 
> 标签：c++, c++11

作为 OpenCL 绑定的 DSL 的一部分，我必须计算给函数的参数`f`并单独处理它们，在下面的代码中，这将是`h`. 对于大多数类型，该函数应该接受 LValues 和 RValues。但是，对于某些类型（此处`int`：），只有 LValue 引用是可接受的（在实际代码中，这些是可能需要延迟初始化的对象）。

我的问题：我该如何摆脱它`const_cast`？`f(T...)`不起作用，也不起作用`f(T&...)`或`f(T&&...)`

```
template<typename T>
void h(int i, const T &x) {/* generic things */}

void h(int i, const int &x) { const_cast<int&>(x) = 123; }

template<int i> void g() {}

template<int i, typename H, typename... T>
void g(H &x, T... xs) {
    h(i, x);
    g<i + 1>(xs...);
}

template<typename... T>
void f(const T&... xs) { g<0u>(xs...); }

#include <cassert>
int main(int, char**) {
    int x = 1;
    f(x, 2.0 + 3.0, 'c');
    assert(x == 123);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:43:42.787

在写这个问题时我找到了一个解决方案，但我不明白为什么签名`int &&`不是`int &`（虽然似乎并不重要？）

```
template<typename T>
void h(int i, T x) {cerr << i << "=" << x << endl;}

void h(int i, int &&x) {
    x = 123;
    cerr << i << "=" << x << " (new)" << endl;
}

template<int i> void g() {}

template<int i, typename H, typename... T>
void g(H &&x, T &&... xs) {
    h(i, std::move(x));
    g<i + 1>(xs...);
}

template<typename... T>
void f(T &&... xs) { g<0u>(xs...); } 
```

此外，所有三个参数,和都调用`h(int, T&)`了重载，这对我来说看起来很可疑（或者这是因为也有效？）`h(int, int&&)``int``double``char``int x = 2.0, y = 'a';`

# apache - 将子域中的多个目录重定向到普通域

> ID：14207830
> 
> 赞同：0
> 
> 时间：2013-01-08T03:36:56.323
> 
> 标签：apache, .htaccess, redirect

我正在尝试使用 htaccess 执行此操作，但它无法正常工作。

例如，我需要重定向：

[http://sub.domain.com/category/](http://sub.domain.com/category/)到[http://www.domain.com/sub/category/](http://www.domain.com/sub/category/) http://sub.domain.com/category/movies/ 到[http://www.domain。 com/sub/listings/movies/](http://www.domain.com/sub/listings/movies/) http://sub.domain.com/category/movies/horror/ 到[http://www.domain.com/sub/listings/movies/horror/](http://www.domain.com/sub/listings/movies/horror/) http://sub.domain .com/events/ 到[http://www.domain.com/sub/local/events/](http://www.domain.com/sub/local/events/)

这是我试图做的，但其中一些像 /category/ 正在捕捉所有这些。我想只用一个斜杠而不是斜杠来精确匹配，就是这样。不是子文件夹或文件。我将 htaccess 文件放在 sub.domain.com 根目录中。

```
Redirect 301 /category/ http://www.domain.com/sub/category/
Redirect 301 /category/movies/ http://www.domain.com/sub/listings/movies/
Redirect 301 /category/movies/horror/ http://www.domain.com/sub/listings/movies/horror/
Redirect 301 /events/ http://www.domain.com/sub/local/events/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T04:16:11.797

我发现使用 mod_rewrite 指令更容易，如下所示：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^sub\.domain\.com$
RewriteCond %{REQUEST_URI}   ^/category/?$   [NC]
RewriteRule .*   http://www.domain.com/sub/category/ [R=301,L]

RewriteCond %{HTTP_HOST} ^sub\.domain\.com$
RewriteCond %{REQUEST_URI}   ^/category/movies/?$   [NC]
RewriteRule .*    http://www.domain.com/sub/listings/movies/ [R=301,L]

RewriteCond %{HTTP_HOST} ^sub\.domain\.com$
RewriteCond %{REQUEST_URI}   ^/category/movies/horror/?$   [NC]
RewriteRule .*    http://www.domain.com/sub/listings/movies/horror/ [R=301,L]

RewriteCond %{HTTP_HOST} ^sub\.domain\.com$
RewriteCond %{REQUEST_URI}   ^/events/?$   [NC]
RewriteRule .*    http://www.domain.com/sub/local/events/ [R=301,L] 
```

根据：

`I want to do exact match with just a trailing slash and no slash and that's it. Not sub folders or files.`

它将永久重定向您问题中描述的 URL

# windows - 在批处理文件中使用 icacls

> ID：14207839
> 
> 赞同：4
> 
> 时间：2013-01-08T03:38:11.963
> 
> 标签：windows, batch-file, permissions

我想制作一个批处理文件，使用 icacls 将权限应用于给定的用户文件夹。这是我制作的批处理文件：

```
@echo 关闭

设置 /p 用户名=输入用户名：

回声选择权限：

echo N - 无法访问
echo F - 完全访问
echo M - 修改访问
echo RX - 读取和执行
echo R - 只读 acc
echo W - 只写交流
echo D - 删除访问

回声。

set /p perm=输入权限：

如果 %perm%==F

icacls "C:\Users\%username%" /grant:r "%username%:(OI)(CI)F"
```

当我运行此文件并将权限输入为 F 时，它显示此**错误：命令的语法不正确。**但如果我直接在 cmd 中运行相同的命令，它会完美运行。那么，如何更正批处理文件中的命令，使其运行没有任何问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:01:39.270

看起来您的`if`命令的语法导致了问题。您正在检查所选择的权限是否是`F`但随后不做任何事情。

尝试将它放在一条线上

```
if %perm%==F icacls "C:\Users\%username%" /grant:r "%username%:(OI)(CI)F" 
```

或在括号中

```
if %perm%==F (
icacls "C:\Users\%username%" /grant:r "%username%:(OI)(CI)F"
) 
```

# python - 退出 Python 解释器而不运行垃圾回收

> ID：14207841
> 
> 赞同：4
> 
> 时间：2013-01-08T03:38:17.150
> 
> 标签：python, python-3.x, garbage-collection, interrupt

在我的程序结束时，实际上什么都不需要发生，CPython 3.2 解释器花了将近 2 分钟来进行垃圾收集。这是一个[已知问题](https://stackoverflow.com/questions/3916553/python-garbage-collection-can-be-that-slow)。

幸运的是，就我而言，在程序结束之前我不需要进行任何垃圾收集。因此，我只需要找到一种方法在程序完成后退出程序，而不给`gc.collect()`运行的机会。

在 Windows 上按“CTRL+C”似乎可以做到这一点。我想我还可以找到 python 解释器的进程 ID，并使用操作系统调用将其杀死。

有没有办法使用纯 Python（可能是异常或标准库调用）实现相同的效果，希望与平台无关？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T03:41:49.947

```
import os
os._exit(0) 
```

不鼓励这样做，因为析构函数可以执行一些有用的操作。如果您确定不需要运行这些析构函数，则应该可以。

# android - 发布到 Facebook 时，NPObject 上的 Phonegap 2.3 错误调用方法

> ID：14207842
> 
> 赞同：0
> 
> 时间：2013-01-08T03:38:22.010
> 
> 标签：android, facebook, cordova

我刚刚更新了Phonegap，发现出现了问题。

有一个用于向 Facebook 发布消息的 api，它适用于 PhoneGap2.2，但在 PhoneGap 2.3 上出现错误。

```
var obj = {
    method: 'feed',
    link: link,
    picture: picture,
    name: name,
    description: description,
    redirect_uri: 'http://facebook.com'
};
function callback(response) {
    document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
}
if (!isFbInit) {
    FB.init({
        appId: "...",
        status: true,
        cookie: true
    });
    isFbInit = true;
}
FB.ui(obj, callback); 
```

错误信息：

> 未捕获的错误：在 NPObject 上调用方法时出错。在文件：///android_asset/www/lib/cordova/cordova-2.3.0.js:1062
> 
> 应用程序配置不允许给定 URL。：应用程序的设置不允许一个或多个给定 URL。它必须与网站 URL 或画布 URL 匹配，或者域必须是应用程序域之一的子域。

顺便说一句，我的设备是Android。

这是PhoneGap的问题吗？我能修好吗？

提前致谢。

# php - 搜索不同的标签并在单个 preg_replace 函数中替换

> ID：14207851
> 
> 赞同：0
> 
> 时间：2013-01-08T03:39:08.433
> 
> 标签：php, regex, preg-replace, bbcode, phpbb3

我有这种从数据库中检索到的记录，我想在其中解码格式值并将其替换为适当的 html 标记，以便它在显示时正常工作：

```
[size=150:3a9xfsiy][color=#000080:3a9xfsiy]hello world[/color:3a9xfsiy][/size:3a9xfsiy] 
```

这条记录是由 phpBB 创建的，我用它来显示在 phpBB 控制之外的网站的其他部分。

我试过的是使用 PREG_REPLACE 但问题是，有没有办法在正则表达式中读取不同格式的标签？例子：

```
[size=150:3a9xfsiy] and [/size:3a9xfsiy] must be searched in a single preg_replace 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:41:39.337

```
<?
    $ret = 'I gave my Word to you Word.';
    $pattern = '/\bWord\b/i';
    $ret = preg_replace($pattern,"Heart",$ret);
    var_dump($ret);
?> 
```

string(29) “我把我的心给了你心。”

或者如果这适合你

你可以只使用 str_replace：

```
$str = str_replace(array('<tag>', '</tag>'), array('<newtag>', '</newtag>', $str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T03:48:22.930

Phpbb 为此提供了一个功能。[Generate_text_for_display](https://wiki.phpbb.com/Generate_text_for_display)。当您从 db 中检索它时，包括 phpbb 函数并应用此函数。

你也可以使用[这个类](https://github.com/phpbb/phpbb3/blob/develop/phpBB/includes/bbcode.php)。

阅读有关[解析文本](https://wiki.phpbb.com/Tutorial.Parsing_text)的更多信息。

# ruby-on-rails - rails active admin - 使用 active admin 时经常（不连续）分段错误

> ID：14207854
> 
> 赞同：1
> 
> 时间：2013-01-08T03:39:23.773
> 
> 标签：ruby-on-rails, ruby, activeadmin

当我单击标题上的某些表名时，我开始使用活动管理员并收到以下错误。有时我得到，有时我没有得到。解决办法是什么。这是一个错误还是我做错了什么？有什么解决办法？

```
 * Process memory map:

   00400000-00401000 r-xp 00000000 08:01 8792382                            /home/someuser/.rvm/rubies/ruby-1.9.3-p362/bin/ruby
   00600000-00601000 r--p 00000000 08:01 8792382                            /home/someuser/.rvm/rubies/ruby-1.9.3-p362/bin/ruby
   00601000-00602000 rw-p 00001000 08:01 8792382                            /home/someuser/.rvm/rubies/ruby-1.9.3-p362/bin/ruby
   00cde000-01cf8000 rw-p 00000000 00:00 0                                  [heap]
   01cf8000-04d0c000 rw-p 00000000 00:00 0                                  [heap]
   04d0c000-05006000 rw-p 00000000 00:00 0                                  [heap]
   7f2a98000000-7f2a98021000 rw-p 00000000 00:00 0 
   7f2a98021000-7f2a9c000000 ---p 00000000 00:00 0 
   7f2a9ca51000-7f2a9ca56000 r-xp 00000000 08:01 16781043                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/bcrypt-ruby-3.0.1/lib/bcrypt_ext.so
   7f2a9ca56000-7f2a9cc55000 ---p 00005000 08:01 16781043                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/bcrypt-ruby-3.0.1/lib/bcrypt_ext.so
   7f2a9cc55000-7f2a9cc56000 r--p 00004000 08:01 16781043                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/bcrypt-ruby-3.0.1/lib/bcrypt_ext.so
   7f2a9cc56000-7f2a9cc58000 rw-p 00005000 08:01 16781043                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/bcrypt-ruby-3.0.1/lib/bcrypt_ext.so
   7f2a9cc58000-7f2a9cc59000 r-xp 00000000 08:01 9443704                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/digest/md5.so
   7f2a9cc59000-7f2a9ce58000 ---p 00001000 08:01 9443704                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/digest/md5.so
   7f2a9ce58000-7f2a9ce59000 r--p 00000000 08:01 9443704                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/digest/md5.so
   7f2a9ce59000-7f2a9ce5a000 rw-p 00001000 08:01 9443704                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/digest/md5.so
   7f2a9ce5a000-7f2a9ce5e000 r-xp 00000000 08:01 9443691                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/racc/cparse.so
   7f2a9ce5e000-7f2a9d05d000 ---p 00004000 08:01 9443691                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/racc/cparse.so
   7f2a9d05d000-7f2a9d05e000 r--p 00003000 08:01 9443691                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/racc/cparse.so
   7f2a9d05e000-7f2a9d05f000 rw-p 00004000 08:01 9443691                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/racc/cparse.so
   7f2a9d05f000-7f2a9d060000 r-xp 00000000 08:01 9443706                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/digest/sha2.so
   7f2a9d060000-7f2a9d260000 ---p 00001000 08:01 9443706                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/digest/sha2.so
   7f2a9d260000-7f2a9d261000 r--p 00001000 08:01 9443706                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/digest/sha2.so
   7f2a9d261000-7f2a9d262000 rw-p 00002000 08:01 9443706                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/digest/sha2.so
   7f2a9d262000-7f2a9d26a000 r-xp 00000000 08:01 16781175                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/json-1.7.5/lib/json/ext/generator.so
   7f2a9d26a000-7f2a9d469000 ---p 00008000 08:01 16781175                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/json-1.7.5/lib/json/ext/generator.so
   7f2a9d469000-7f2a9d46a000 r--p 00007000 08:01 16781175                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/json-1.7.5/lib/json/ext/generator.so
   7f2a9d46a000-7f2a9d46b000 rw-p 00008000 08:01 16781175                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/json-1.7.5/lib/json/ext/generator.so
   7f2a9d46b000-7f2a9d46c000 r-xp 00000000 08:01 9443604                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/enc/utf_32le.so
   7f2a9d46c000-7f2a9d66b000 ---p 00001000 08:01 9443604                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/enc/utf_32le.so
   7f2a9d66b000-7f2a9d66c000 r--p 00000000 08:01 9443604                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/enc/utf_32le.so
   7f2a9d66c000-7f2a9d66d000 rw-p 00001000 08:01 9443604                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/enc/utf_32le.so
   7f2a9d66d000-7f2a9d66e000 r-xp 00000000 08:01 9443597                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/enc/utf_32be.so
   7f2a9d66e000-7f2a9d86d000 ---p 00001000 08:01 9443597                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/enc/utf_32be.so
   7f2a9d86d000-7f2a9d86e000 r--p 00000000 08:01 9443597                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/enc/utf_32be.so
   7f2a9d86e000-7f2a9d86f000 rw-p 00001000 08:01 9443597                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/enc/utf_32be.so
   7f2a9d86f000-7f2a9d875000 r-xp 00000000 08:01 16781179                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/json-1.7.5/lib/json/ext/parser.so
   7f2a9d875000-7f2a9da74000 ---p 00006000 08:01 16781179                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/json-1.7.5/lib/json/ext/parser.so
   7f2a9da74000-7f2a9da75000 r--p 00005000 08:01 16781179                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/json-1.7.5/lib/json/ext/parser.so
   7f2a9da75000-7f2a9da76000 rw-p 00006000 08:01 16781179                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/json-1.7.5/lib/json/ext/parser.so
   7f2a9da76000-7f2a9da7b000 r-xp 00000000 08:01 16909205                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/thin-1.5.0/lib/thin_parser.so
   7f2a9da7b000-7f2a9dc7b000 ---p 00005000 08:01 16909205                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/thin-1.5.0/lib/thin_parser.so
   7f2a9dc7b000-7f2a9dc7c000 r--p 00005000 08:01 16909205                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/thin-1.5.0/lib/thin_parser.so
   7f2a9dc7c000-7f2a9dc7d000 rw-p 00006000 08:01 16909205                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/thin-1.5.0/lib/thin_parser.so
   7f2a9dc7d000-7f2a9dc92000 r-xp 00000000 08:01 5508623                    /lib/x86_64-linux-gnu/libgcc_s.so.1
   7f2a9dc92000-7f2a9de91000 ---p 00015000 08:01 5508623                    /lib/x86_64-linux-gnu/libgcc_s.so.1
   7f2a9de91000-7f2a9de92000 r--p 00014000 08:01 5508623                    /lib/x86_64-linux-gnu/libgcc_s.so.1
   7f2a9de92000-7f2a9de93000 rw-p 00015000 08:01 5508623                    /lib/x86_64-linux-gnu/libgcc_s.so.1
   7f2a9de93000-7f2a9df75000 r-xp 00000000 08:01 17046902                   /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
   7f2a9df75000-7f2a9e174000 ---p 000e2000 08:01 17046902                   /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
   7f2a9e174000-7f2a9e17c000 r--p 000e1000 08:01 17046902                   /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
   7f2a9e17c000-7f2a9e17e000 rw-p 000e9000 08:01 17046902                   /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
   7f2a9e17e000-7f2a9e193000 rw-p 00000000 00:00 0 
   7f2a9e193000-7f2a9e1ba000 r-xp 00000000 08:01 16785026                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/eventmachine-1.0.0/lib/rubyeventmachine.so
   7f2a9e1ba000-7f2a9e3ba000 ---p 00027000 08:01 16785026                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/eventmachine-1.0.0/lib/rubyeventmachine.so
   7f2a9e3ba000-7f2a9e3bb000 r--p 00027000 08:01 16785026                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/eventmachine-1.0.0/lib/rubyeventmachine.so
   7f2a9e3bb000-7f2a9e3bd000 rw-p 00028000 08:01 16785026                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/eventmachine-1.0.0/lib/rubyeventmachine.so
   7f2a9e3bd000-7f2a9e45b000 r-xp 00000000 08:01 17040705                   /usr/lib/x86_64-linux-gnu/libsqlite3.so.0.8.6
   7f2a9e45b000-7f2a9e65b000 ---p 0009e000 08:01 17040705                   /usr/lib/x86_64-linux-gnu/libsqlite3.so.0.8.6
   7f2a9e65b000-7f2a9e65d000 r--p 0009e000 08:01 17040705                   /usr/lib/x86_64-linux-gnu/libsqlite3.so.0.8.6
   7f2a9e65d000-7f2a9e65f000 rw-p 000a0000 08:01 17040705                   /usr/lib/x86_64-linux-gnu/libsqlite3.so.0.8.6
   7f2a9e65f000-7f2a9e660000 rw-p 00000000 00:00 0 
   7f2a9e660000-7f2a9e668000 r-xp 00000000 08:01 14816972                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/sqlite3-1.3.6/lib/sqlite3/sqlite3_native.so
   7f2a9e668000-7f2a9e867000 ---p 00008000 08:01 14816972                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/sqlite3-1.3.6/lib/sqlite3/sqlite3_native.so
   7f2a9e867000-7f2a9e868000 r--p 00007000 08:01 14816972                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/sqlite3-1.3.6/lib/sqlite3/sqlite3_native.so
   7f2a9e868000-7f2a9e869000 rw-p 00008000 08:01 14816972                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/sqlite3-1.3.6/lib/sqlite3/sqlite3_native.so
   7f2a9e869000-7f2a9e87c000 r-xp 00000000 08:01 9320820                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/bigdecimal.so
   7f2a9e87c000-7f2a9ea7c000 ---p 00013000 08:01 9320820                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/bigdecimal.so
   7f2a9ea7c000-7f2a9ea7d000 r--p 00013000 08:01 9320820                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/bigdecimal.so
   7f2a9ea7d000-7f2a9ea7e000 rw-p 00014000 08:01 9320820                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/bigdecimal.so
   7f2a9ea7e000-7f2a9ead0000 r-xp 00000000 08:01 5505146                    /lib/x86_64-linux-gnu/libssl.so.1.0.0
   7f2a9ead0000-7f2a9ecd0000 ---p 00052000 08:01 5505146                    /lib/x86_64-linux-gnu/libssl.so.1.0.0
   7f2a9ecd0000-7f2a9ecd3000 r--p 00052000 08:01 5505146                    /lib/x86_64-linux-gnu/libssl.so.1.0.0
   7f2a9ecd3000-7f2a9ecd9000 rw-p 00055000 08:01 5505146                    /lib/x86_64-linux-gnu/libssl.so.1.0.0
   7f2a9ecd9000-7f2a9ecda000 rw-p 00000000 00:00 0 
   7f2a9ecda000-7f2a9ed26000 r-xp 00000000 08:01 9320819                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/openssl.so
   7f2a9ed26000-7f2a9ef25000 ---p 0004c000 08:01 9320819                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/openssl.so
   7f2a9ef25000-7f2a9ef26000 r--p 0004b000 08:01 9320819                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/openssl.so
   7f2a9ef26000-7f2a9ef28000 rw-p 0004c000 08:01 9320819                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/openssl.so
   7f2a9ef28000-7f2a9ef29000 rw-p 00000000 00:00 0 
   7f2a9ef29000-7f2a9ef2f000 r-xp 00000000 08:01 16909361                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/raindrops-0.10.0/lib/raindrops_ext.so
   7f2a9ef2f000-7f2a9f12e000 ---p 00006000 08:01 16909361                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/raindrops-0.10.0/lib/raindrops_ext.so
   7f2a9f12e000-7f2a9f12f000 r--p 00005000 08:01 16909361                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/raindrops-0.10.0/lib/raindrops_ext.so
   7f2a9f12f000-7f2a9f130000 rw-p 00006000 08:01 16909361                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/raindrops-0.10.0/lib/raindrops_ext.so
   7f2a9f130000-7f2a9f13b000 r-xp 00000000 08:01 16909548                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/unicorn-4.5.0/lib/unicorn_http.so
   7f2a9f13b000-7f2a9f33a000 ---p 0000b000 08:01 16909548                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/unicorn-4.5.0/lib/unicorn_http.so
   7f2a9f33a000-7f2a9f33b000 r--p 0000a000 08:01 16909548                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/unicorn-4.5.0/lib/unicorn_http.so
   7f2a9f33b000-7f2a9f33c000 rw-p 0000b000 08:01 16909548                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/unicorn-4.5.0/lib/unicorn_http.so
   7f2a9f33c000-7f2a9f344000 r-xp 00000000 08:01 16909287                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/kgio-2.7.4/lib/kgio_ext.so
   7f2a9f344000-7f2a9f543000 ---p 00008000 08:01 16909287                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/kgio-2.7.4/lib/kgio_ext.so
   7f2a9f543000-7f2a9f544000 r--p 00007000 08:01 16909287                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/kgio-2.7.4/lib/kgio_ext.so
   7f2a9f544000-7f2a9f545000 rw-p 00008000 08:01 16909287                   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/kgio-2.7.4/lib/kgio_ext.so
   7f2a9f545000-7f2a9f568000 r-xp 00000000 08:01 9320812                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/socket.so
   7f2a9f568000-7f2a9f768000 ---p 00023000 08:01 9320812                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/socket.so
   7f2a9f768000-7f2a9f769000 r--p 00023000 08:01 9320812                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/socket.so
   7f2a9f769000-7f2a9f76a000 rw-p 00024000 08:01 9320812                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/socket.so
   7f2a9f76a000-7f2a9f76b000 r-xp 00000000 08:01 9320800                    /home/someuser/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-linux/fcntl.so
 7f2aa3a0c000-7f2aa3a28000 rw-p 00000000 00:00 0 
   7f2aa3a28000-7f2aa3a4a000 r-xp 00000000 08:01 5508928                    /lib/x86_64-linux-gnu/ld-2.15.so
   7f2aa3b23000-7f2aa3c29000 rw-p 00000000 00:00 0 
   7f2aa3c42000-7f2aa3c43000 rw-p 00000000 00:00 0 
   7f2aa3c43000-7f2aa3c44000 rw-s 00000000 00:04 1586321                    /dev/zero (deleted)
   7f2aa3c44000-7f2aa3c45000 ---p 00000000 00:00 0 
   7f2aa3c45000-7f2aa3c4a000 rw-p 00000000 00:00 0 
   7f2aa3c4a000-7f2aa3c4b000 r--p 00022000 08:01 5508928                    /lib/x86_64-linux-gnu/ld-2.15.so
   7f2aa3c4b000-7f2aa3c4d000 rw-p 00023000 08:01 5508928                    /lib/x86_64-linux-gnu/ld-2.15.so
   7fff96f7e000-7fff96f9f000 rw-p 00000000 00:00 0                          [stack]
   7fff96fff000-7fff97000000 r-xp 00000000 00:00 0                          [vdso]
   ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]

   [NOTE]
   You may have encountered a bug in the Ruby interpreter or extension libraries.
   Bug reports are welcome.
   For details: http://www.ruby-lang.org/bugreport.html

   E, [2013-01-07T17:13:07.848237 #24082] ERROR -- : reaped #<Process::Status: pid 24289 SIGIOT (signal 6) (core dumped)> worker=0
   I, [2013-01-07T17:13:07.866502 #24297]  INFO -- : worker=0 ready
   /home/someuser/.rvm/gems/ruby-1.9.3-p362@mygems/gems/activerecord-3.2.9/lib/active_record/relation.rb:241: [BUG] Segmentation fault
   ruby 1.9.3p362 (2012-12-25 revision 38607) [x86_64-linux] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T20:53:14.127

Ruby `1.9.3-p362`（您正在使用的）有一个[segfault bug](https://bugs.ruby-lang.org/issues/7629)。您应该升级到`1.9.3-p374`或降级到`1.9.3-p327`.

# sql - 我正在使用 openoffice 创建 sql，并且日期在计算中变成了数字

> ID：14207858
> 
> 赞同：0
> 
> 时间：2013-01-08T03:39:42.167
> 
> 标签：sql, date, openoffice.org

这是我的计算

```
="insert into tableName values('" & A1 &",'" & B1 & "','"& C1 &"','" & D1 & "','" & E1 & "','" & F1 & "','" & G1 & "');" 
```

和单元格中的数据

```
01/05/13   1   2   3   4   5   6 
```

但是当计算完成时，字符串是

```
insert into tableName '41279', '1', '2', '3', '4', '5' ,'6' 
```

如果我`'`在日期的末尾添加一个，`01/05/13'`那么它会正确地保持日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:11:16.237

[TEXT](http://wiki.openoffice.org/wiki/Documentation/How_Tos/Calc%3a_TEXT_function)功能就是您的答案。使用“dd/mm/yy”（如果您在美国，则使用“mm/dd/yy”）作为格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:08:37.567

OpenOffice 不喜欢用字符串连接日期。试试下面的方法：

```
="insert into tableName values('" & TEXT(A1; "dd/mm/yyyy") & ",'" & B1 & "','"& C1 &"','" & D1 & "','" & E1 & "','" & F1 & "','" & G1 & "');" 
```

您还可以使用连接功能：

```
=CONCATENATE("INSERT INTO TableName VALUES ('"; TEXT(A1; "dd/mm/yyyy"); "')") 
```

# sql - 如何在表中插入n个xml节点

> ID：14207861
> 
> 赞同：1
> 
> 时间：2013-01-08T03:40:55.030
> 
> 标签：sql, sql-server, xml

我的存储过程是这样的：

```
alter procedure insertxml
   @inxml xml
as

insert into imagess
  (ids, photo, names)
values 
  (@inxml.value('(/imagess/ids)[1]', 'int'),
   @inxml.value('(/imagess/photo)[1]', 'char'),
   @inxml.value('(/imagess/names)[1]', 'varchar(10)'))

exec insertxml '<imagess>
                  <ids>31</ids>
                  <photo>N</photo>
                  <names>30</names>
                  <ids>11</ids>
                  <photo>O</photo>
                  <names>20</names>
                  <ids>12</ids>
                  <photo>A</photo>
                  <names>43</names>
                </imagess>' 
```

通过这个，我只能插入第一行。我想插入所有 3 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:59:29.193

正如 OMG Ponies 在他的评论中指出的那样，需要调整 XML 代码才能使其正常工作；但是，我认为您正在寻找的是类似的东西（注意 XML 中的附加标签）：

```
DECLARE @imagess TABLE (ids INT, photo VARCHAR(1), NAMES INT)
DECLARE @inxml XML = '<imagess>
                  <image><ids>31</ids>
                  <photo>N</photo>
                  <names>30</names>
                  </image><image>
                  <ids>11</ids>
                  <photo>O</photo>
                  <names>20</names>
                  </image><image>
                  <ids>12</ids>
                  <photo>A</photo>
                  <names>43</names>
                  </image>
                </imagess>'

insert into @imagess
  (ids, photo, names)
SELECT c.value('(./ids)[1]', 'int'),
   c.value('(./photo)[1]', 'char'),
   c.value('(./names)[1]', 'varchar(10)')
FROM @inxml.nodes('//image') T(c)

SELECT *
FROM @imagess 
```

# php - 多选查询数据库

> ID：14207867
> 
> 赞同：1
> 
> 时间：2013-01-08T03:41:45.537
> 
> 标签：php, javascript, sql, multiple-select

我把最近的一个帖子想多了，把它删了。希望这个版本更清晰一些。

我有一个多选下拉列表，我希望能够使用它来过滤数据库表。

因此，如果我有以下包含大约 70 个条目的下拉列表：

```
<select multiple="multiple" id="filter" name="filter">
  <optgroup label="category1"> <!--jquery ui plugin allows for grouping -->
    <option value="sub1">Subcategory 1</option>
    <option value="sub2">Subcategory 2</option>
    <option value="sub3">Subcategory 3</option>
  </optgroup>
  <optgroup label="category2">
    <option value="sub4">Subcategory 4</option>
    <option value="sub5">Subcategory 5</option>
    <option value="sub6">Subcategory 6</option> 
```

...

我有 6 个类别需要在我的 sql 语句中搜索，到目前为止我有：

```
<?php
    include ("connect.php");

    $filter = $_POST["filter"];

        $result = mysql_query("SELECT * FROM edt_images
                                WHERE category1= '$filter'
                                OR category2= '$filter'
                                OR category3 = '$filter'
                                OR category4 = '$filter'
                                OR category5 = '$filter'
                                OR category6 = '$filter'")
            or die(mysql_error());
        while ($row = mysql_fetch_array($result)) {
            echo "<img src='files/small/thumb0_".$row['item_name'].".".$row['file_extension']."' border='0'/>"; 
        }
?> 
```

现在，如果我只从下拉列表中选择一项，它就可以工作，因为它会在六列中搜索该条目。所以我的问题是如何在这六列中搜索多个条目？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:49:15.447

`IN`如果 filter 是您可以在查询中使用的所选类别的数组：

```
$filterIn = implode("','",$filter);

SELECT * FROM edt_images
        WHERE category1 IN ('$filterIn')
        OR category2 IN ('$filterIn')
        OR category3 IN ('$filterIn')
        OR category4 IN ('$filterIn')
        OR category5 IN ('$filterIn')
        OR category6 IN ('$filterIn') 
```

但是请注意，您不应该在 SQL 查询中使用未经处理的用户输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:00:27.380

恕我直言，首先您需要允许从多选中返回多个值。为此，您需要将括号添加到 name 属性，如下所示：

```
<select multiple="multiple" id="filter" name="filter[]"> 
```

# android - EditTextPreference 和屏幕旋转

> ID：14207871
> 
> 赞同：2
> 
> 时间：2013-01-08T03:41:58.310
> 
> 标签：android, rotation, screen, edittextpreference

我搜索了这个地方，但找不到对我有帮助的答案：我有一个与 PreferenceFragment 一起使用的设置活动。其中一个设置有一个 EditTextPreference。它很好地保存了它的价值。但是，当我旋转屏幕时，EditTextPreference 会消失，所做的更改也会丢失。

这是因为 Activity 是新创建的。知道了。

我知道我可以使用 onSaveInstanceState 来获取输入的数据，但是，我不清楚如何使 EditTextPreference 再次出现（实际上我没有为此添加任何编码，这一切都是通过 xml 定义发生的）。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T13:43:25.473

我有完全相同的问题。经过反复试验，我发现了一些对我有用的东西：

我刚刚添加`android:configChanges="orientation|screenSize"`到清单中的首选项活动。`EditText`不会在方向更改时消失，并且其内容（文本）仍然保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:58:42.540

[http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange](http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)阅读开发人员文档，这将对您有所帮助。

# database - 访问外部字段时删除数据库命中

> ID：14207875
> 
> 赞同：0
> 
> 时间：2013-01-08T03:42:41.643
> 
> 标签：database, django, orm

我正在为我的模型创建一个字典并使用该字典来制作 json 数据。

```
class MyImage(models.Model):
  ...
  album = models.ForeignKey(Album)
  def to_dict(self):
     result = {}
     result['id'] = self.id
     .. additional data...
     result['album_id'] = self.album.id  // database hit
     result['album_title'] = self.album.title  // another database hit
     result['album_something'] = self.album.something // another hit 
```

我刚刚发现要创建 MyImage 字典，我需要 1+3，如上面的评论中所述。

我可以以某种方式将 DB 命中减少到 1+1 而不是 1+3 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:46:35.740

您可以通过 1 次点击来管理将数据捕获到值对象（具有所有数据库实体属性的简单类） - 1 次点击

并从值对象服务/构造您的 json 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:31:50.617

使用 select_related。

从文档

返回一个 QuerySet，它将自动“遵循”外键关系，在执行查询时选择附加的相关对象数据。这是一个性能提升器，它会导致（有时很多）更大的查询，但意味着以后使用外键关系不需要数据库查询。

```
# Hits the database.
e = Entry.objects.get(id=5)

# Hits the database again to get the related Blog object.
b = e.blog

# Hits the database.
e = Entry.objects.select_related().get(id=5)

# Doesn't hit the database, because e.blog has been prepopulated
# in the previous query.
b = e.blog 
```

# javascript - jQuery 无法访问附加元素

> ID：14207883
> 
> 赞同：2
> 
> 时间：2013-01-08T03:43:23.483
> 
> 标签：javascript, jquery, html, append

我在一个函数中有这个：

```
$('#users').append($("<div id='usuarios'>").text(mensaje[1][i])); 
```

我想为这个新的`<div>`. 我怎样才能做到这一点？我在函数之外尝试这样：

```
$(document).ready(function(){
$('#usuarios').click(function() {
        alert("click");
    });
}); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T03:45:32.687

[对于 jQuery 1.7+，您可以使用.on()](http://api.jquery.com/on/)将事件处理程序附加到父元素

```
$(document).ready(function(){
  $('body').on('click', '#usuarios', function() {
     alert("click");
  });
}); 
```

甚至更好：

```
$(document).ready(function(){
  $('#users').on('click', '#usuarios', function() {
     alert("click");
  });
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T03:45:14.863

你可以内联（通过链接`.append`after `.text`），因为这正是 jQuery 的 API 的工作方式，但你也可以将它放在一个看起来更好的变量中：

```
var usarios = $("<div id='usuarios'>").text(mensaje[1][i]);

usarios.click(function() {
    alert('click');
});

$('#users').append(usarios); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-08T11:47:58.920

我也遇到过这个问题，如果你把它放在 document.ready 里面就行不通了。我认为这是我的语法，但事实并非如此。

使用

```
$(document).on('click', "input[id^='radiobox']", function () { 
    alert('hihi'); 
}); 
```

然后它工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T03:51:15.903

您正在动态创建一个元素，因此正常的事件处理程序将不起作用。您将不得不使用`on()`将事件处理程序附加到您的文档。

```
$(document).on('click', "#usuarios", function() {
    // do your job here
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T03:53:24.010

两种方式

1.jQuery 1.7+

```
$(document).ready(function(){
  $('body').on('click', '#usuarios', function() {
     alert("click");
  });
}); 
```

2.jQuery<1.7

```
$(document).ready(function(){
  $('body').delegate('#usuarios','click', function() {
     alert("click");
  });
}); 
```

# batch-file - 如何获取从 python (py2exe) 移植的 .exe 并将其作为后台进程运行？

> ID：14207884
> 
> 赞同：1
> 
> 时间：2013-01-08T03:43:36.970
> 
> 标签：batch-file, python-2.7, exe, py2exe

我用IDLE写了一个程序，通过py2exe做成了EXE。我希望它在后台运行，并且在我启动计算机时运行。我怎么能这样做？我应该在原始脚本中实现一段代码，还是需要创建一个 BATCH 文件，还是需要做其他事情？我对编程很陌生，所以如果这是一个愚蠢的问题，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:05:48.617

将其添加到您的启动文件夹：

```
C:\users\%username%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup 
```

一位用户；

```
C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Startup 
```

对于所有用户。

# iphone - Iphone 的 GIF 支持

> ID：14207889
> 
> 赞同：2
> 
> 时间：2013-01-08T03:44:01.217
> 
> 标签：iphone, nsdata, gif

我的先生们，我的女士们（啊..只是另一个骑士的事情，...）

我有一个问题，我已经为此奋斗了好几天，这是我的场景：

我有一个 HTTP 响应，其中包含指向 GIF 图像的链接，然后将 GIF 图像转换为 NSData，然后用于填充 ImageView。出乎意料或出人意料的是，仅显示 GIF 的第一帧/过渡。简单地说，图像加载但不动画。

我想知道iPhone中是否有对GIF的本机支持，同样我在这里找到了一个扩展类[SCGifExample](https://github.com/shichangone/SCGifExample) ，它似乎只在我在应用程序中导入GIF图像时才起作用，而不是当图像来自URI时->NS 数据。

我不想创建多个图像然后创建一组图像，因为这对我的设置不起作用，因为它会给服务器和客户端带来很多负载。

我已经在 SO 上进行了搜索，但我没有找到任何实质性的结果来阻止我发布我自己的问题，因为事实上我发现这里有很多与 iphone+gif 相关的问题都没有得到解答。

我确实有一个怀疑，我希望有人能帮助我弄清楚并理解它。我怀疑在从 Image 转换为 NSDATA 格式的过程中，GIF 动画/过渡是“丢失”的。但是我没有任何具体的证据来支持这一点。

这是我将图像转换为 NSData 的方法；

```
contentURI = http://gta.champion.com/content?cmsFileId=513af9e9-a96d-4a56-8239-92be273393e0&mt=image/gif //lets just assume that when view using the browser, this would display the image.

NSData * imageData = [[NSData alloc] initWithContentsOfURL: [NSURL URLWithString: contentURI]]; 
```

如果还有其他人战胜了这种困境，请帮助我也战胜这种壮举。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:06:08.257

不幸的是，iOS 不支持 GIF 图像，您也不能将它们用于动画。如果您使用 GIF 图像，则 imageview 将显示该图像的第一帧，仅此而已。

请参考[**UIImage**](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)以了解支持的格式。

![图像格式](../Images/0273a258869a77f2dc56b1bbcf4ee4d9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:15:29.283

虽然 Apple 的 API 不支持开箱即用的动画 GIF，但有一个用户创建的解决方案同样有效：

LBGIFImage：
[https ://github.com/larcus94/LBGIFImage](https://github.com/larcus94/LBGIFImage)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T04:50:53.327

是的，有一个替代方案，但这取决于您的情况。但是让我与您分享这个想法，因为使用`UIWebView`解决了我的问题，因为我只需要为单个图像制作动画，即广告。

**这是代码片段：**

```
UIWebView *webV = [[[UIWebView alloc]initWithFrame:appDel.isiPad==TRUE?CGRectMake(260, 35, 500, 100):CGRectMake(40, 18, 250, 60)] autorelease] ;
                webV.delegate =self;
                webV.multipleTouchEnabled=NO;
                [webV setBackgroundColor:[UIColor whiteColor]];
                webV.userInteractionEnabled=NO;
                [webV loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"YourImageUrl"]]]; 
```

**并实现他们的委托方法：**

```
- (void)webViewDidStartLoad:(UIWebView *)webView;

- (void)webViewDidFinishLoad:(UIWebView *)webView;

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T01:46:05.300

看看我对在 iOS 中显示动画 gif 的发现。[http://iosnotestoremember.blogspot.com/2013/01/showing-animated-gif-in-ios.html](http://iosnotestoremember.blogspot.com/2013/01/showing-animated-gif-in-ios.html)

我希望这有帮助。

# symfony - 安装 AdmingeneratorGeneratorBundle

> ID：14207891
> 
> 赞同：1
> 
> 时间：2013-01-08T03:44:08.507
> 
> 标签：symfony

我正在尝试在 symfony 的最新版本中安装 AdmingeneratorGeneratorBundle 但我遇到了几个问题

首先我尝试使用作曲家，但我得到了这个错误

```
Loading composer repositories with package information
Updating dependencies
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - The requested package cedriclombardot/admingenerator-generator-bundle could not be found in any version, there may be a typo in the package name.
  Problem 2
    - The requested package knplabs/knp-menu-bundle master could not be found. 
```

最后我用 git 安装了所有的 vendor

这个vendor的安装比较广泛，所以在安装TwigGenerator之前必须执行

```
php app/console admin:setup 
```

但我收到此错误

```
PHP Fatal error:  Call to undefined method Composer\Autoload\ClassLoader::registerNamespaces() in 
```

autoLoad 文件中的第 14 行包含此..

```
$loader->registerNamespaces(array(
    'Admingenerator'    => array(__DIR__.'/../src', __DIR__.'/../vendor/bundles'),
    'Sensio\Bundle'     => __DIR__.'/../vendor/bundles',
    'Knp\Bundle' => __DIR__.'/../vendor/bundles',
    'Knp\Menu'   => __DIR__.'/../vendor/KnpMenu/src',
)); 
```

任何的想法！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:03:48.653

我有类似的问题，但是我没有使用 git 手动安装，而是将`minimum-stability`flag 更改为`dev`in `composer.json`：

```
{
    "minimum-stability": "dev",
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution", 
```

并添加了这些部门：

```
"require": {
    ...
    "knplabs/knp-menu-bundle": "dev-master",
    "cedriclombardot/admingenerator-generator-bundle": "dev-master" 
```

# audio - 网络音频 API 注意

> ID：14207892
> 
> 赞同：2
> 
> 时间：2013-01-08T03:44:13.240
> 
> 标签：audio, web-audio-api

我正在尝试构建一个接口，允许将时序/节奏（可能是音高）输入到 Web Audio Oscillator 节点。实际上创建了一个“步进音序器”。

为 Web 音频 API 振荡器节点触发预定 NoteOn 的最佳方式是什么？

在特定模式中，即 1/4 音符、1/8 音符或用户输入的模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:46:46.090

这是一个很好的问题，事实上我刚刚发表了一篇关于这个主题的 HTML5Rocks 文章：http: [//www.html5rocks.com/en/tutorials/audio/scheduling/](http://www.html5rocks.com/en/tutorials/audio/scheduling/)。

# eclipse - 在 Eclipse 中签出 GIT 中的 repo 的问题

> ID：14207894
> 
> 赞同：0
> 
> 时间：2013-01-08T03:44:27.493
> 
> 标签：eclipse, git, eclipse-plugin, egit, ubuntu-server

我在我的 Ubuntu 服务器设置中有一个 git repo。

我想将我的 Windows 机器上的那个 repo 签出到 eclipse 中。

我已经安装了我的 Eclipse 的 EGIT 插件。

我尝试通过在 Eclipse 中选择 URI 选项来检查使用插件导入文件，并得到一个未知主机异常。

这些是我给的设置：

```
1) URI  : user@hostname:/path/to/repo
2) Host : hostname
3) Repository Path : /path/to/repo
4) Protocol :SSH
5) Port : 22
6) user : username
7) pwd : password 
```

有没有需要输入ip地址的地方。服务器在我的局域网上，我可以使用 putty 访问和处理我的 repo。这里缺少什么信息。

错误信息也如图所示： ![在此处输入图像描述](../Images/b8be0119bbda70f7f9f29f9b5d7779e3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:23:30.267

根据[文档](http://wiki.eclipse.org/EGit/User_Guide#Working_with_remote_Repositories)，您需要使用完整的 URI。

```
URI: ssh://user@hostname:/path/to/repo 
```

# c# - 图片框位图缩放

> ID：14207895
> 
> 赞同：6
> 
> 时间：2013-01-08T03:45:02.920
> 
> 标签：c#, winforms

我有`Picturebox`很多`Bitmaps`可以显示在其中。与其他位图相比，位图的相对大小对用户很重要。他们需要能够看到一幅图像比另一幅图像更小或更大。位图还必须完全适合图片框，并且图片框不能调整大小。

当简单地在一个巨大的图片框中显示未缩放的位图时，位图的相对大小很容易看到，但是当试图将它们放在一个小盒子中并且不得不缩小它们时，我的问题就开始了。

当使用 Stretch 时`PictureBoxSizeMode`，您会想象图像有时会因为位图的非特定尺寸而出现扭曲，并且事实上它们会被拉伸以填充整个框，但 Stretch sizemod 是最接近我需要的那种。

其他尺寸模式都不适合我的需要，所以我现在知道我需要创建一个函数来调整位图的大小，这是我尝试的开始，直到我意识到我走错**了**方向，这里返回的图像不保留“比例” '。

```
 private Bitmap ResizeBitmap(Bitmap img)
    {
        int newWidth = 0;
        int newHeight = 0;
        double imgRatio;

        if (img.Width > img.Height)
        {
            imgRatio = ((double)img.Height / (double)img.Width) * 100;

            newWidth = pictureBox.Width;

            newHeight = (int)(((double)newWidth / 100) * imgRatio);
        }
        else
        {
            imgRatio = ((double)img.Width / (double)img.Height) * 100;

            newHeight = pictureBox.Height;

            newWidth = (int)(((double)newHeight / 100) * imgRatio);
        }

        Bitmap newImg = new Bitmap(newWidth, newHeight);

        using (Graphics g = Graphics.FromImage(newImg))
            g.DrawImage(img, 0, 0, newWidth, newHeight);

        return newImg;
    } 
```

我已经盯着屏幕看了一段时间了，目前我无法进行缩放的数学运算，我希望有人能指出我正确的方向。现在快凌晨 4 点了，所以也许我的大脑没有掌握一些简单的概念。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T03:55:29.433

将 PictureBoxSizeMode 设置为[Zoom](http://msdn.microsoft.com/en-us/library/system.windows.forms.pictureboxsizemode.aspx)。这样可以保持纵横比。

# sql - 在 sqlite manager 中从 sqlite 创建 DB Schema

> ID：14207897
> 
> 赞同：1
> 
> 时间：2013-01-08T03:45:15.930
> 
> 标签：sql, database, sqlite, information-schema

我在 sqlite manager 中有一个 sqlite 数据库。我想创建数据库模式。我怎样才能做到这一点？还是最好使用一些软件来创建 DB Schema？

需要一些建议和指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T04:16:28.830

有一个名为 sqlite_master 的系统表。它包含所有对象的 SQL CREATE 语句。

因此，您需要做的就是从该表中选择所有行，然后运行 ​​sql 语句。

您也可以使用 Database->Export Database Structure，这将有效地做同样的事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T04:17:37.907

当然你可以去数据库菜单+创建新数据库

[http://code.google.com/p/sqlite-manager/wiki/CommonTasks](http://code.google.com/p/sqlite-manager/wiki/CommonTasks)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T03:58:48.320

SQLite 中只有一个数据库用于文件。

也许您可以创建一个新文件并使用 sqlite manager 打开它。

# python - 使用 Python 绘制图表

> ID：14207898
> 
> 赞同：-1
> 
> 时间：2013-01-08T03:45:18.907
> 
> 标签：python, matplotlib

我正在使用 python 分析股市数据。我正在使用 matplotlib 绘制图表。我想知道是否有任何其他库可以在 python 中绘制图表。我想画出更具吸引力和设计感的图表，以便最终用户会发现它非常有吸引力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:00:35.273

以前从未在 Python 中使用过图表和绘图，但[Cairoplot](http://cairoplot.sourceforge.net)看起来非常用户友好。

这些[图像](https://www.google.com/search?q=cairoplot&sugexp=chrome,mod%3D1&um=1&ie=UTF-8&hl=en&tbm=isch&source=og&sa=N&tab=wi&ei=i5nrUJypE4nO9ASvs4DoBQ&biw=1280&bih=702&sei=jJnrUNrHHY369gSGh4DoCA)使它看起来非常干净和光滑，所以我想你可能想尝试一下。

# android - ExpandableListView

> ID：14207902
> 
> 赞同：0
> 
> 时间：2013-01-08T03:45:57.180
> 
> 标签：android, android-layout, user-interface, expandablelistview

我正在努力`Expandable List View`让它旁边有图像和文字。我有这个例子的大部分工作，我在这里找到了

--->[如何在 android 的父级扩展列表中添加图像？](https://stackoverflow.com/questions/1353101/how-to-add-image-in-expandable-list-in-parent-in-android)

但我不断得到一个`Error`

```
01-07 22:42:26.182: E/AndroidRuntime(28475):    at gui.ExpandActivity$1.getChildView(ExpandActivity.java:115)
01-07 22:42:26.182: E/AndroidRuntime(28475):    at android.widget.ExpandableListConnector.getView(ExpandableListConnector.java:450) 
```

有什么想法吗？谢谢。

```
// Construct Expandable List
            final String NAME = "name";
            final String IMAGE = "image";
            final LayoutInflater layoutInflater = (LayoutInflater) this
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            final ArrayList<HashMap<String, String>> headerData = new ArrayList<HashMap<String, String>>();

            final HashMap<String, String> group1 = new HashMap<String, String>();
            group1.put(NAME, "Group 1");
            headerData.add(group1);

            final HashMap<String, String> group2 = new HashMap<String, String>();
            group2.put(NAME, "Group 2");
            headerData.add(group2);

            final ArrayList<ArrayList<HashMap<String, Object>>> childData = new ArrayList<ArrayList<HashMap<String, Object>>>();

            final ArrayList<HashMap<String, Object>> group1data = new ArrayList<HashMap<String, Object>>();
            childData.add(group1data);

            final ArrayList<HashMap<String, Object>> group2data = new ArrayList<HashMap<String, Object>>();
            childData.add(group2data);

            // Set up some sample data in both groups
            for (int i = 0; i < 10; ++i) {
                final HashMap<String, Object> map = new HashMap<String, Object>();
                map.put(NAME, "Child " + i);
                map.put(IMAGE,
                        getResources().getDrawable(R.drawable.ic_launcher));
                (i % 2 == 0 ? group1data : group2data).add(map);
            }

            setListAdapter(new SimpleExpandableListAdapter(this,
                    headerData, android.R.layout.simple_expandable_list_item_1,
                    new String[] { NAME }, // the name of the field data
                    new int[] { android.R.id.text1 }, // the text field to
                                                        // populate with the
                                                        // field data
                    childData, 0, null, new int[] {}) {
                @Override
                public View getChildView(int groupPosition, int childPosition,
                        boolean isLastChild, View convertView, ViewGroup parent) {
                    final View v = super.getChildView(groupPosition,
                            childPosition, isLastChild, convertView, parent);

                    // Populate your custom view here
                    // ((TextView) v.findViewById(R.id.name))
                    // .setText((String) ((HashMap<String, Object>) getChild(
                    // groupPosition, childPosition)).get(NAME));
                    // ((ImageView) v.findViewById(R.id.image))
                    // .setImageDrawable((Drawable) ((HashMap<String, Object>)
                    // getChild(
                    // groupPosition, childPosition)).get(IMAGE));

                    ((TextView) v.findViewById(R.id.name))
                            .setText("This should be child one corrent?");
                    // ((ImageView) v.findViewById(R.id.image))
                    // .setImageDrawable((Drawable) getResources()
                    // .getDrawable(R.drawable.ic_launcher));

                    return v;
                }

                @Override
                public View newChildView(boolean isLastChild, ViewGroup parent) {
                    return layoutInflater.inflate(R.layout.expand_layout,
                            null, false);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T12:23:37.963

“这是一个非常愚蠢的解决方案，我在那里的布局错误，我只是想加快速度。`expand_layout.xml`应该是`expand_child_layout.xml`。

# backbone.js - 强调向后兼容性

> ID：14207903
> 
> 赞同：0
> 
> 时间：2013-01-08T03:46:12.197
> 
> 标签：backbone.js, underscore.js

我正在尝试使用一个用旧版本的下划线（1.2.0）制作的主干应用程序，该应用程序在一个新的rails应用程序中加载了更新版本的下划线（当前版本的主干附带的下划线-on-rails gem），所以这是一个向后兼容性问题，即使在更改日志[http://underscorejs.org/#changelog](http://underscorejs.org/#changelog)的帮助下我也无法弄清楚，但是，当我试图保存数据。

语境：

由 Companies 集合创建的 Company 正在尝试保存（使用 setBucket 函数）它所在的 Bucket 的 ID（参见下面的代码）。

这是我尝试保存数据时遇到的错误。

**错误**

```
<error>
    _.extend
    _.clone
    _.extend.toJSON
    _.extend.save
    _.extend.update
    Backbone.sync
    _.extend.sync
    _.extend.save
    window.Company.Backbone.Model.extend.setBucket
    window.AppView.Backbone.View.extend.createCompanyOnEnter
    jQuery.event.dispatch
    elemData.handle.eventHandle 
```

源代码

...（代码省略）...

```
 var company = Companies.create({text: text});    #this works. company is created
  company.setBucket(initialBucket.id);    #this triggers the error 
```

....（代码省略）

```
setBucket: function(bucketId) {
this.save({bucket: bucketId}, {silent: true});   #the function that's not working 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:39:11.987

您可以同时运行两个版本的 Underscore。只需先在页面上加载您的 Underscore 版本，然后添加以下行：

```
var underscore = _.noConflict(); 
```

将您的 Underscore 版本别名为`underscore`变量（如果您愿意，当然可以使用不同的别名）。然后在所有现有的下划线使用代码上运行查找/替换，将“ `_`”替换为“ `underscore`”（或您的别名）。

最后，将您的 Rails 应用程序及其版本的 Underscore 加载到页面。它将获得`_`别名，并且您的代码可以使用它的版本而不会影响您的库的版本。

*** 编辑 ***

好的，这里有一点背景。在 Javascript 中（就像我相信在 Ruby 中一样），函数是一流的对象。这意味着从`_`技术上讲，它不是 Underscore 函数本身，它只是一个指向“真正的”Underscore 函数（它本身就是一个对象）的变量。这也意味着您可以像使用任何其他变量一样为函数创建别名。就像你可以做的那样：`var a = 5; var b = a`你也可以做`var b = _;`，然后你可以做`b.map()`或其他任何事情。好吧，几乎；因为Underscore保留了对Underscore的内部引用，所以需要更新它，这就是`noConflict`进来的地方；该代码确实应该是：`var b = _.noConflict();`

顺便说一句，这也意味着你可以去另一个方向改变`_`，如果你愿意：`_ = alert; _('hello world')`。

因此，您目前正在发生的事情是您将下划线引入您的页面。大概您是通过`<script src='underscore.js'></script>`在主 html.erb 文件中放置一个来执行此操作的。这带来了下划线版本#1。然后你加载你的 Rails 应用程序；我不确定这是如何工作的，因为它取决于您的应用程序，但不知何故，该应用程序在页面上放置了另一个脚本标签，指向下划线版本 #2。

这是一个问题，因为 Underscore 版本 #2 刚刚替换了您的版本 #1（与我刚才替换的方式相同`_`）`alert`。这会破坏您的代码。您*可以*`<script>`通过在 Rails 应用程序的标签之后添加标签来修复它。这将恢复版本 #1 并修复您的代码……但会破坏您的应用程序代码。

您真正想要的是您的代码使用版本#1，而您的应用程序代码使用版本#2。这就是我最初的答案所在：通过重新为`_`to `underscore`（或其他任何东西）的版本 #1 重新别名，您的 Rails 应用程序可以继续将版本 #2 引用为`_`，并且您的代码可以继续使用版本 #1 作为`underscore`。

# playframework - Scala Play 读取表单输入

> ID：14207908
> 
> 赞同：0
> 
> 时间：2013-01-08T03:46:41.697
> 
> 标签：playframework

我想读取“输入”的值，然后控制器会将输入传递给`getTask(task: String)`方法。

我怎样才能做到这一点？这是我的代码片段。

```
@form(routes.Application.getTask("url")) {

        @inputText(taskForm("hash"))

        <input type="submit" value="Get">

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:55:28.540

html`<input>`标签应该在浏览器中呈现，你的 dom 应该看起来像这样（例如，对于一个带有 twitter bootstrap 样式的表单，它处理使用用户名和密码登录）：

```
<form class="form-horizontal" action="/support/login" method="post">
  <div class="control-group">
    <label class="control-label" for="inputUsername">User Name</label>
    <div class="controls">
      <input type="text" id="inputUsername" name="username" placeholder="User Name">
    </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="inputPassword">Password</label>
    <div class="controls">
      <input type="password" id="inputPassword" name="password" placeholder="Password">
    </div>
  </div>
  <div class="control-group">
    <div class="controls">
      <button type="submit" class="btn">Log in</button>
      <button type="submit" class="btn">Forgot Password</button>
    </div>
  </div>
</form> 
```

您可以使用 jquery.ajax 或单击`<button type="submit" ...>`. 这将向播放框架将处理的服务器发送一个请求，该代码在 scala 中对我来说看起来像这样：

```
 private def loginForm() = Form(
    tuple("username" -> text, "password" -> text)
      .verifying("Invalid username or password", result => Auth.authenticate(result._1, result._2)))

  def doLogin = Action { implicit request =>
    loginForm().bindFromRequest.fold(
      formWithErrors => authenticationFailed(request),
      form => gotoLoginSucceeded(UserId(form._1))
    )
  } 
```

`formWithErrors`并且`form`是解析后的表单对象。

# c++ - 可以从内存块中识别堆管理器吗？

> ID：14207911
> 
> 赞同：1
> 
> 时间：2013-01-08T03:47:27.307
> 
> 标签：c++, memory-management, dll, heap-memory, reference-counting

我有一个由主机程序和一些插件组成的应用程序。插件在可以动态加载和卸载的 dll 中实现。插件的代码（在 dll 内）为对象分配内存并将指针传递给主机程序。这些对象在 dll 堆上分配，无法更改接口以使用专门的内存分配函数。

主机程序是否有办法检测对象已分配在哪个堆管理器上？我想为 dll 实现某种引用计数。只要宿主程序仍然使用 dll 的内存，就无法卸载 dll。这意味着我想从主机程序中跟踪谁（哪个插件）分配了一个内存块（保存在主机内的各种列表中的对象）。当前接口包括一个卸载 dll 的调用。此调用应安排卸载，但仅在主机使用完内存后才执行。

感谢您的任何建议。

# ruby-on-rails - Heroku / ruby on rails ...我如何确定我是作为工人还是网络运行

> ID：14207917
> 
> 赞同：1
> 
> 时间：2013-01-08T03:47:53.380
> 
> 标签：ruby-on-rails, heroku, process

我在（ruby/rails）heroku上有一个应用程序。它正在运行 1 个网络和 1 个工作人员（例如）我希望能够知道应用程序正在运行的测功机的“类型”。

我怀疑这是一件简单的事情，但我看不到任何告诉我如何说的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T04:21:28.423

我不知道是否有更优雅的方法可以做到这一点，但您可以在 Procfile 中设置一个环境变量：

```
web: bundle exec ... PROC_TYPE=web
worker: bundle exec ... PROC_TYPE=worker 
```

然后在您的 Rails 代码中，您可以检查 ENV['PROC_TYPE']

编辑：更详细的 Procfile 示例，典型的 Rails 应用程序：

```
web: bundle exec rails server -p $PORT PROC_TYPE=web
worker:  bundle exec rake jobs:work PROC_TYPE=worker 
```

# javascript - Javascript 错误 Null 不是对象

> ID：14207922
> 
> 赞同：26
> 
> 时间：2013-01-08T03:48:17.863
> 
> 标签：javascript, html

我在 Web Inspector 中遇到错误，如下所示：

```
TypeError: 'null' is not an object (evaluating 'myButton.onclick = function() {
var userName = myTextfield.value;
greetUser(userName);

return false;

}') 
```

这是我的代码（HTML）：

```
<h2>Hello World!</h2>
<p id="myParagraph">This is an example website</p>

<script src="js/script.js" type="text/javascript"></script>

<form>
  <input type="text" id="myTextfield" placeholder="Type your name" />
  <input type="submit" id="myButton" value="Go" />
</form> 
```

这是JS：

```
var myButton = document.getElementById("myButton");
var myTextfield = document.getElementById("myTextfield");

function greetUser(userName) {
var greeting = "Hello " + userName + "!";
document.getElementsByTagName ("h2")[0].innerHTML = greeting;
}

myButton.onclick = function() {
var userName = myTextfield.value;
greetUser(userName);

return false;

} 
```

知道为什么我会收到错误吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-08T03:49:26.383

放置代码，使其在定义元素后执行，或者使用*DOM 就绪*回调，或者将源代码放在 HTML 中的元素下。

`document.getElementById()``null`如果找不到元素，则返回。属性分配只能发生在对象上。`null`不是一个对象（与`typeof`所说的相反）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T04:20:18.307

任何执行和处理 DOM 元素的 JS 代码都应该在创建 DOM 元素之后执行。JS 代码按照 HTML 中的布局从上到下进行解释。因此，如果在 DOM 元素之前有一个标签，则 script 标签内的 JS 代码将在浏览器解析 HTML 页面时执行。

因此，在您的情况下，您可以将 DOM 交互代码放在一个函数中，以便只定义函数但不执行。

然后您可以为文档加载添加事件侦听器以执行该功能。

这会给你类似的东西：

```
<script>
  function init() {
    var myButton = document.getElementById("myButton");
    var myTextfield = document.getElementById("myTextfield");
    myButton.onclick = function() {
      var userName = myTextfield.value;
      greetUser(userName);
    }
  }

  function greetUser(userName) {
    var greeting = "Hello " + userName + "!";
    document.getElementsByTagName ("h2")[0].innerHTML = greeting;
  }

  document.addEventListener('readystatechange', function() {
    if (document.readyState === "complete") {
      init();
    }
  });

</script>
<h2>Hello World!</h2>
<p id="myParagraph">This is an example website</p>

<form>
  <input type="text" id="myTextfield" placeholder="Type your name" />
  <input type="button" id="myButton" value="Go" />
</form> 
```

小提琴 - [http://jsfiddle.net/poonia/qQMEg/4/](http://jsfiddle.net/poonia/qQMEg/4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T04:31:08.337

我认为错误是因为元素未定义，因此您需要添加`window.onload`事件，该事件将在加载窗口时定义您的元素。

```
window.addEventListener('load',Loaded,false);

    function Loaded(){
    var myButton = document.getElementById("myButton");
    var myTextfield = document.getElementById("myTextfield");

    function greetUser(userName) {
    var greeting = "Hello " + userName + "!";
    document.getElementsByTagName ("h2")[0].innerHTML = greeting;
    }

    myButton.onclick = function() {
    var userName = myTextfield.value;
    greetUser(userName);

    return false;
    }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T03:56:23.380

之后尝试加载您的 javascript。

试试这个：

```
<h2>Hello World!</h2>
<p id="myParagraph">This is an example website</p>

<form>
  <input type="text" id="myTextfield" placeholder="Type your name" />
  <input type="submit" id="myButton" value="Go" />
</form>

<script src="js/script.js" type="text/javascript"></script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T04:07:44.603

我同意 alex 关于确保 DOM 已加载的观点。我也认为提交按钮会触发刷新。

这就是我会做的

```
<html>
<head>
<title>webpage</title>
</head>
<script type="text/javascript">
var myButton;
var myTextfield;

function setup() {
  myButton = document.getElementById("myButton");
  myTextfield = document.getElementById("myTextfield");
  myButton.onclick = function() {
    var userName = myTextfield.value;
    greetUser(userName);
    return false;
  }
}

function greetUser(userName) {
  var greeting = "Hello " + userName + "!";
  document.getElementsByTagName("h2")[0].innerHTML = greeting;
}

</script>
<body onload="setup()">
  <h2>Hello World!</h2>
  <p id="myParagraph">This is an example website</p>

  <form>
    <input type="text" id="myTextfield" placeholder="Type your name" />
    <input type="button" id="myButton" value="Go" />
  </form>
  </body>
</html> 
```

玩得开心！

# mysql - 在 MySQL 事务中执行

> ID：14207923
> 
> 赞同：1
> 
> 时间：2013-01-08T03:48:18.033
> 
> 标签：mysql, stored-procedures, transactions

我正在与 MySQL 存储过程和`PREPARE`/`EXECUTE`语句对搏斗。我正在尝试运行下面的（简化的）代码，以创建一个存储过程，该存储过程将几个查询封装到一个带有回滚的事务中。我继续得到

```
 Error Code: 1064
 You have an error in your SQL syntax; 
 check the manual that corresponds to your MySQL server version for the right syntax 
 to use near 'goodID; 
```

如果我删除事务和处理程序，代码一切正常。如果我删除该`EXECUTE`语句，则可以创建该过程。

我在这里想念什么？

```
DELIMITER $$

USE `casc`$$

DROP PROCEDURE IF EXISTS `sp_T_MergeMemberIDs`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `sp_T_MergeMemberIDs`(IN goodID VARCHAR(8), OUT param_sp_success TINYINT)

BEGIN

   DECLARE EXIT HANDLER FOR SQLEXCEPTION ROLLBACK;
   DECLARE EXIT HANDLER FOR SQLWARNING ROLLBACK;

   START TRANSACTION;

      SET param_sp_success = 0;

      SET @SQL=
      "SELECT * FROM member
      WHERE memberID = ?";

      PREPARE stmt FROM @SQL;

      EXECUTE stmt USING goodID;

      -- queries executed here using the same parameter
      -- omitted for simplicity

      SET param_sp_success = 1; 

   COMMIT;

END$$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:56:53.457

据我记得，您需要在以下位置使用会话用户变量`execute ...using`：

```
...
PREPARE stmt FROM @SQL;
SET @tmp_var = goodID;
EXECUTE stmt USING @tmp_var;
... 
```

# vim - 如何在 Vim 中映射多个键

> ID：14207925
> 
> 赞同：5
> 
> 时间：2013-01-08T03:48:41.137
> 
> 标签：vim, macvim

我将如何映射`ctrl+w+o`执行`:Bonly<CR>`？

我努力了

```
unmap <C-W>o
map <C-W>o :Bonly<CR> 
```

保存文件并使用 获取它`so %`，但不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T04:21:03.407

您的映射（`:unmap`不是必需的）应该使用一系列`Ctrl`+ `W`，然后是`o`.

如果你想要`Ctrl`+`W`后跟`Ctrl`+ `O`，那就是`<C-w><C-o>`.

在 Vim 中，只能用一个键（如）来映射`Ctrl`/ `Shift`/组合（不幸的是，并不是所有组合！ ）。但是有一个插件可以帮助您实现同时按下的所有键的映射：[arpeggio - Key mappings for 同时按下的键](http://www.vim.org/scripts/script.php?script_id=2425)`Alt``W`

# jquery - Mouseup 和 Mousedown

> ID：14207927
> 
> 赞同：1
> 
> 时间：2013-01-08T03:48:48.620
> 
> 标签：jquery, mousedown, mouseup

所以我希望按钮在鼠标按下时改变样式，并在鼠标上升时返回上一个。我有这个代码：

```
$('#divMenu > #menu li a').mousedown(function(){
  $(this).css({
  'font-size': '25px',  
  'color': 'red'     
  });               
}).mouseup(function(){
  $(this).css({
  'font-size': '30px',  
  'color': 'black'     
  });               
}); 
```

问题是，当我按下鼠标但将其从我的对象上移开而不立即释放时，字体大小和颜色保持 25 像素和红色。我该怎么做才能通过？

**编辑：**这里的 JsFiddle：http: [//jsfiddle.net/h64Uz/](http://jsfiddle.net/h64Uz/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T03:51:56.263

您还需要使用鼠标移出。

```
$('#divMenu > #menu li a').mousedown(function(){
  $(this).css({
  'font-size': '25px',  
  'color': 'red'     
  });               
}).mouseup(function(){
  $(this).css({
  'font-size': '30px',  
  'color': 'black'     
  });               
}).mouseout(function(){
  $(this).css({
  'font-size': '30px',  
  'color': 'black'     
  });               
}); 
```

单击鼠标时，您的事件代码会设置 css。一旦你离开它就不能注册鼠标。但是在离开时它会注册一个 mouseout 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T03:53:16.863

jQuery 有一个`mouseleave()`事件可以用来补充现有代码：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T03:53:48.370

这应该可以工作（假设您使用的是`jQuery`1.7 或更高版本）：

```
$('#divMenu > #menu li a').on("mousedown", function () {
  $(this).css({
    'font-size': '25px',
      'color': 'red'
  });
}).on("mouseup mouseout", function () {
  $(this).css({
    'font-size': '30px',
      'color': 'black'
  });
}); 
```

# html - 在 mvc3 视图中创建无模式 div

> ID：14207934
> 
> 赞同：0
> 
> 时间：2013-01-08T03:49:45.970
> 
> 标签：html, asp.net-mvc-3

我的动机是在 mvc3 视图中回发到服务器时创建进度图像。当进程正在运行带有背景 div 的进度图像时，应该弹出。弹出窗口不应允许访问页面上的控件。例如，我的视图中有下拉菜单，当我回发进度图像时，我应该不允许点击下拉菜单。

如果不是回发，我已经尝试了很多方法，但是当回发发生时，我可以点击实际的页面控件。但我不应该允许点击。有什么帮助吗？

我试过的代码是......

```
<style type="text/css">
.modal
{
    position: fixed;
    top: 0;
    left: 0;
    background-color: #f7f7f7;
    z-index: 99;
    opacity: 0.8;
    filter: alpha(opacity=80);
    -moz-opacity: 0.8;
    min-height: 100%;
    width: 100%;
}
.loading
{
    font-family: Arial;
    font-size: 10pt;
    border: 5px solid #67CFF5;
    width: 200px;
    height: 100px;
    display: none;
    position: fixed;
    background-color: White;
    z-index: 999;
}
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript">
function ShowProgress() {
    setTimeout(function () {
        var modal = $('<div />');
        modal.addClass("modal");
        $('body').append(modal);
        var loading = $(".loading");
        loading.show();
        var top = Math.max($(window).height() / 2 - loading[0].offsetHeight / 2, 0);
        var left = Math.max($(window).width() / 2 - loading[0].offsetWidth / 2, 0);
        loading.css({ top: top, left: left });
    }, 200);
}
$('form').live("submit", function () {
    ShowProgress();
}); 
```

```
<div class="loading" align="center">
Loading. Please wait.<br />
<br />
<img src="loader.gif" alt="" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:55:39.937

您应该为它使用 jquery UI 对话框并设置不透明度。你可以在这里找到一些例子 [http://jqueryui.com/dialog/#modal-confirmation](http://jqueryui.com/dialog/#modal-confirmation)

# php - JSON字符串在服务器端表现得很有趣

> ID：14207936
> 
> 赞同：0
> 
> 时间：2013-01-08T03:50:17.407
> 
> 标签：php, javascript, ajax, json

在试图解决我遇到的问题时，我几乎感到沮丧。我正在尝试使用 javascript 在使用 JSON 的同时将一些数据发送到 PHP 服务器。根据我的经验，一旦字符串到达​​ PHP 服务器并且我使用 json_decode PHP 命令将字符串解码回其 json 格式，它就会失败。它失败了，因为我无法获得关联数组 json_decode 要返回的大小。有趣的是，如果我宁愿将字符串保存到我的数据库中的一列 blob 类型，然后尝试重复使用 json_decode 并使用它返回的关联数组的过程，我会得到积极的结果。

请看一些涉及的代码。

## Javascript代码

```
var products = {
        product: [],
        companyId: ""
    };

products.companyId = nameofCompany;

for(var c=0; c<count; c++)
{
    var product = {
        productItems: []
    };
    productTitle=document.getElementById('productTitle' + c).innerHTML;
    product.productItems.push({ "productTitle" : productTitle});
    products.product.push({ "product" : product});
}

var JSONObject = new Object;
    JSONObject = products;
    JSONstring = JSON.stringify(JSONObject);
    addNewProduct(JSONstring, 'addNewProduct')

//make ajax calls to PHP server here. I have shorted it to show that I am passing the string

function addNewProduct(inputStr, fieldStr)
{

    inputValue = encodeURIComponent(inputValue);
    fieldID = encodeURIComponent(fieldID);
    cache.push("inputStr=" + inputStr + "&fieldStr=" + fieldStr);
    if ((xmlHttp.readyState == 4 || xmlHttp.readyState == 0) && cache.length > 0)
    {
        xmlHttp.open("POST", phpServerAddress, true);
    }
 } 
```

## PHP 代码

下面的代码将不起作用，因为它为 sizeof() 命令返回值 0。但是，如果我将 $_POST['inputStr'] 保存到 blob 类型的数据库列中，然后尝试读取并执行相同的代码，则效果很好

```
if(isset($_POST['inputStr']))
{

    $jsonStrArr= (json_decode($_POST['inputStr'], true));
    die sizeof($jsonStrArr);
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:16:11.047

All, Thanks for your response. However I was able to finally get the issue resolved. Resolved it by writing the JSON.stringify value to a file where I noticed the value had escape characters in it. Using stripslashes on the PHP server simply helped out. All the same thanks

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:20:14.997

您的代码不完整，我认为这是因为它非常大并且可能分布在多个文件中。如前所述：encodeURIComponent(inputValue) 应该是 inputStr。

这是一个工作的 php 页面，也许您可​​以使用它来添加您的代码并跟踪哪里出了问题。

```
<?php
if(isset($_POST["object"])){
    var_dump($_POST);
    var_dump($_GET);
    var_dump($_POST["object"]);
    var_dump(json_decode($_POST["object"]));
}
?>
<!DOCTYPE html>
<html>
<head>
    <script>
        var myObj={value1:"value1",value2:"value2"};
        var someOtherVal="hello there";
        var postString="object=" + escape(JSON.stringify(myObj))
            +"&someOtherval="+escape(someOtherVal);
        var xhr = new XMLHttpRequest();
    xhr.open("POST", "index.php" ,true);
        xhr.setRequestHeader("Content-type",
            "application/x-www-form-urlencoded");
        xhr.onreadystatechange=function(){
            if(this.readyState != 4){
        return;
            }
            if (this.status === 200 || this.status == 304) {
                document.getElementById("output")
                    .innerHTML=this.responseText;
            }
        };
        xhr.send(postString);
    </script>
</head>
<body>
<div id="output"></div>
</body>
</html> 
```

# c++ - 使用 G++ 构建时出现错误 1

> ID：14207938
> 
> 赞同：0
> 
> 时间：2013-01-08T03:50:25.963
> 
> 标签：c++, compiler-errors, g++

我正在使用 eclipse Junior 并构建我的 C++ 程序。控制台中的命令行如下：

```
make all 
Building file: ../src/misc/bt_misc.cpp
Invoking: GCC C++ Compiler 
```

> g++ -DNDEBUG=1 -DEPOLL=1 -D__GXX_EXPERIMENTAL_CXX0X__ -I"/home/adtech/workspace/mtracker/src/misc" -I"/home/adtech/workspace/mtracker/src/Tracker" -I"/home/adtech /workspace/mtracker/src/misc/xbt" -I/usr/include -I/usr/lib64/mysql -O0 -g3 -Wall -c -fmessage-length=0 -std=c++0x -MMD -MP -MF"src/misc/bt_misc.d" -MT"src/misc/bt_misc.d" -o "src/misc/bt_misc.o" "../src/misc/bt_misc.cpp"

在编译阶段我没有收到任何错误，不幸的是，最后遇到了一个错误，如下所示：

```
make: *** [src/Tracker/server.o] Error 1 
```

你们能帮我解释一下这个错误吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:05:33.603

该错误意味着它执行的命令（可能是`g++`在构建时`server.o`）遇到了错误。**向上滚动**并确保没有任何错误。如果您并行运行多个作业，则错误可能不会出现在最后。

# opengl - 摄像头控制opengl

> ID：14207940
> 
> 赞同：0
> 
> 时间：2013-01-08T03:50:27.820
> 
> 标签：opengl, camera

我在我正在创建的 opengl 游戏中发现了一个困难。我有一个 camara 类，其中的代码应该都可以工作。IE

```
void keyboard (unsigned char key, int x, int y) {

    keyStates[key] = false;

    if (key=='q')
    {
    xrot += 1;
    if (xrot >360) xrot -= 360;
    }

    if (key=='z')
    {
    xrot -= 1;
    if (xrot < -360) xrot += 360;
    }
etc..

} 
```

但是，当我尝试将其放入我的 main() 中时，它会引发异常处理错误。我的主要代码是：

```
int main(int argc,char** argv)
{

    SDL_Init(SDL_INIT_EVERYTHING);
    SDL_Surface* screen=SDL_SetVideoMode(640,480,32,SDL_SWSURFACE|SDL_OPENGL);
    bool running=true;
    Uint32 start;
    SDL_Event event;
    init();
    glutKeyboardFunc(keyboard);

    while(running)
    {

        start=SDL_GetTicks();

        while(SDL_PollEvent(&event))
        {
            switch(event.type)
            {

                case SDL_QUIT:
                    running=false;
                    break;
            }
        }

        display();

        SDL_GL_SwapBuffers();
        angle+=0.0;
        if(angle>360)
            angle-=360;
        if(1000/30>(SDL_GetTicks()-start))
            SDL_Delay(1000/30-(SDL_GetTicks()-start));  
    }

    SDL_Quit();

    return 0;   

} 
```

抱歉，如果我的代码不清楚，我已将搅拌机集成到 opengl 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:57:24.313

首先，为什么要同时使用 GLUT 和 SDL？SDL 提供了 GLUT 提供的所有功能，但通常更好。您可以使用 SDL 提供的事件队列进行输入，而不是使用 GLUT 的键盘功能。

其次，我很确定尝试使用任何 GLUT 函数而不调用 glutInit(argc, argv) 会导致它硬关闭程序。查看一些[文档](http://www.opengl.org/documentation/specs/glut/spec3/node9.html)，似乎确实如此。尝试删除它，并扩展您的 SDL 事件案例以处理键盘输入。[这](http://content.gpwiki.org/index.php/SDL%3aTutorials%3aPractical_Keyboard_Input)是一个小而简单的例子。

# java - 如何偏移 GridView 的行边距

> ID：14207941
> 
> 赞同：2
> 
> 时间：2013-01-08T03:50:33.613
> 
> 标签：java, android, gridview, margin

我有一个充满图像的网格视图，并且网格视图的行按这样的列对齐

1_2_3

4_5_6

7_8_9

但是我想抵消某些行以获得这样的东西

1_2_3_

_4_5_6

7_8_9_

以便将第二行和未知数量的附加行移到右侧。

一种解决方案是制作多个网格视图并相应地移动它们，但是当我有很多行时这将不起作用。另一种方法是以某种方式更改 ImageAdapter 中的边距，使用位置来获取行，但我无法在不崩溃的情况下完成这项工作。是否正在尝试编辑 ImageAdapter 中的 LayoutParams 甚至是处理此类事情的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T05:10:38.857

您可以使用具有两种布局的两种类型的视图，例如：

在您的适配器中，您可以实现：

```
@Override
public int getViewTypeCount() {
  return 2;
}

@Override
public int getItemViewType(int position) {
 if (isImageLeft(position)) {
  return VIEW_TYPE_LEFT_IMAGE; //TODO: you should define it 
} else {
  return VIEW_TYPE_RIGHT_IMAGE;//TODO: you should define it
}    

@Override
public View getView(int position, View convertView, ViewGroup parent) {
  View view = convertView;
  if (view == null){
    if (getItemViewType(int position) == VIEW_TYPE_LEFT_IMAGE){
      view = inflater.inflate(R.layout.layout_image_left, null);//TODO: you should have set the reference of LayoutInflater
    }else{
      view = inflater.inflate(R.layout.layout_image_right, null);
    }    
  } 
  //.......
} 
```

在这两个布局文件中，您可以设置一个 LinearLayout （或您喜欢的其他布局），其中 ImageView 分别带有左边距或右边距。例如：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"     
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="horizontal" >

  <ImageView
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_marginLeft="50dp" />
</LinearLayout> 
```

# scala - 如何在play 2.1中处理JSON解析中的可选字段

> ID：14207942
> 
> 赞同：11
> 
> 时间：2013-01-08T03:50:48.600
> 
> 标签：scala, playframework, playframework-2.0

我正在使用新的 Play 2.1-RC1 框架，并且我有一个具有 Option[] 字段的类，如下所示：

```
import play.api.libs.json._
import play.api.libs.json.util._
import play.api.libs.json.Reads._
import play.api.libs.json.Writes._
import play.api.libs.json.Format._
import play.api.libs.functional.syntax._

case class Test(name: String, value: Option[String])

object Test {
  implicit val testFormat = (
    (__ \ "name").format[String] and
    (__ \ "value").format[Option[String]] 
  )(Test.apply, unlift(Test.unapply))
  def fromJson(js: String): Test = {
    Json.fromJson[Test](Json.parse(js)).fold(
        valid   = { t => t},
        invalid = { e => {
          val missingField = (e(0)._1).toString.substring(1)
          val badJs = js.trim
          val newJs = badJs.substring(0, badJs.length()-1)+",\""+missingField+"\":null}"
          fromJson(newJs)
        }} 
    )
  }
} 
```

我希望能够处理省略可选“值”数据的 JSON 字符串，例如

```
val y = """{"name":"someone"}""" 
```

（编辑过的问题）我可以重写 json 字符串（相当笨拙），如验证步骤所示，但是有没有更简单的模式可以用来为缺少的可选字段提供 None ？请注意，这种重写不适用于嵌套结构，或者我不能简单地附加缺失字段的任何地方。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T04:07:53.153

你可以简单地这样做：

```
import play.api.libs.json._
import play.api.libs.functional.syntax._

case class Test(name: String, value: Option[String])

implicit val testFormat = Json.format[Test]

def hoge = Action(Json.parse.json) { request => 
    Json.fromJson[Test](request.body)
    ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T21:21:29.157

好的......所以答案很简单。利用

```
fomatOpt() 
```

对于可选字段。所以测试格式化程序现在看起来像这样：

```
import play.api.libs.json._
import play.api.libs.json.util._
import play.api.libs.json.Reads._
import play.api.libs.json.Writes._
import play.api.libs.json.Format._
import play.api.libs.functional.syntax._

case class Test(name: String, value: Option[String])

object Test {
  implicit val testFormat = (
    (__ \ "name").format[String] and
    (__ \ "value").formatOpt[String] 
  )(Test.apply, unlift(Test.unapply))

  def fromJson(js: String): Test = {
    Json.fromJson[Test](Json.parse(js)).fold(
      valid   = { t => t},
      invalid = { e => {
        println("BAD JSON!")
        null
      }} 
    )
  }
} 
```

# java - 集群环境中 JMS 主题的 HTTP 使用者

> ID：14207943
> 
> 赞同：2
> 
> 时间：2013-01-08T03:50:54.560
> 
> 标签：java, http, session, jakarta-ee, jms

我已经看到了这个问题的点点滴滴，但没有直接回答它。

这是假设的环境：

*   20 个以 Java 为中心的服务器（即 Tomcat / Glassfish / Jboss / 其他）通过 HTTP 与客户端通信
*   服务器前面的 HTTP 负载平衡器*不能*保证每次客户端连接都能将您带回同一台服务器。
*   其他任何东西都是可用的技术明智。（JMS / Camel / Memcached / Hazelcast / 不管）

我们希望 Joe 和他的浏览器（可能使用 Flash 或 HTML5 或任何客户端技术）接收发布到所有 20 个服务器都可用的 JMS 主题的所有消息。

这是一个例子：

*   Joe 的第一个 HTTP 连接到达服务器 A
*   服务器 A 现在有一个针对 Joe 的 HTTP 会话（通过 cookie 等）
*   服务器 A 为他订阅主题（基于他的会话 ID 等）
*   Joe 的 HTTP 连接结束。
*   一条消息发布到该主题。
*   Joe 建立另一个连接，但这次它由服务器 F 处理。

这对我来说有点模糊。

*   我们知道 Joe 返回时的会话 ID（并且可能会话在所有服务器之间共享），但是 JMS 订阅呢？如果服务器 F 必须再次订阅 Joe 的主题，他只是错过了一条消息吗？A 是 Joe 可以从中检索该消息的唯一服务器，还是当他订阅 F 并且它只知道他没有收到消息时会发生某种魔术（大概在 A 上等待他）。

我想我有点不清楚“订阅”的作用（过程明智）以及它与集群服务器的关系。我正在使用长轮询（cometd）和 websockets 来帮助客户端在接收主题消息时响应，但是必须考虑当有许多服务器可以处理连接和订阅时这将如何工作。我想避免服务器固定。

感谢您的任何指示。

EDIT1：希望有所澄清。我在这里指的是 BlazeDS 框架中提供的特定内容。它允许 HTTP 客户端订阅 JMS 主题并使用长轮询来实现近乎实时的客户端更新，但它要求一旦客户端访问服务器，所有请求都必须返回到该服务器。因此，它必须（以某种方式？）保持该服务器上该客户端的主题订阅处于活动状态。我想摆脱这个要求（使用任何技术/框架）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T05:08:35.550

JMS 服务器跟踪所做的每个订阅，并在持久订阅和非持久订阅之间产生差异。假设您有客户 A、B、C 和主题 T。

1.  Client A 订阅 Topic T 并等待消息
2.  客户端 B 订阅主题 T 等待消息
3.  客户端 C 对主题 T 进行持久订阅并等待消息
4.  客户端 B 和 C 在将消息 M 放入主题 T 前几秒崩溃
5.  客户端 A 获取消息 M 的副本，因为它已订阅并且当前连接到 jms 服务器
6.  客户端B重启但没有得到消息的副本，因为消息到达主题时它没有连接到jms服务器
7.  客户端 C 重新启动并获取消息 M，因为它提供了一个持久订阅，JMS 服务器保留了消息 M 的副本，而 C 崩溃并等待 C 回来并声明该消息。

消息服务器上有管理设置，用于控制 jms 服务器在将消息发送到死信队列之前等待持久订阅者返回并声明消息的时间长度或主题上的最大消息数等待订阅者回来并索取。您确实需要在永不丢失消息与流消息和内存或磁盘空间不足之间取得平衡。

请注意，持久队列的概念与持久订阅者的概念不同。持久队列和主题通过在确认收到消息之前将队列和消息的内容写入磁盘来保护您免受 JMS 服务器崩溃的影响。持久订阅者是关于当消息到达而客户端未连接时消息会发生什么。

* * *

老答案。

以您对 SQL 数据库的看法来考虑 JMS 服务器。从 Web 容器的角度来看，应该有一个到 JMS 服务器的连接池，所以你要做的是获取到 JMS 服务器的连接并订阅一个主题。例如。

*   JMS 服务器有一个名为 AddressChangeTopic 的主题
*   每个 tomcat 实例都有一个对 AddressChangeTopic 的订阅
*   Joe / Jim / John ... 等的地址更改事件都转到相同的 AddressChangeTopic 而不是转到 JohnAddressTopic、JimAddressTopic 等。如果您有 1 个应用程序，为每个用户创建一个单独的主题是不切实际的百万用户 你会有一百万个话题吗？

因此，如果正在使用一个主题，您必须使用选择性消费者来使用来自该主题的消息，请参阅[http://www.eaipatterns.com/MessageSelector.html](http://www.eaipatterns.com/MessageSelector.html) 选择性消费者将做的是从主题中检索与某些匹配的消息标准。例如，将 JMS 消息发布到主题的消息生产者应该包括一个标题或一个名为 targetUser 的 JMS 属性或类似的东西，然后消费者可以说给出来自 AddressChangeTopic 的任何消息，其中自定义属性 targetUser="Joe"[在此处](http://publib.boulder.ibm.com/infocenter/wmbhelp/v6r1m0/index.jsp?topic=/com.ibm.etools.mft.doc/ac24876_.htm)查看一些示例选择器示例

关键是要意识到您可以像查询数据库表一样查询队列或主题，但查询语法非常有限。从概念的角度来看，我强烈推荐企业集成模式书[http://www.amazon.ca/Enterprise-Integration-Patterns-Designing-Deploying/dp/0321200683](http://www.amazon.ca/Enterprise-Integration-Patterns-Designing-Deploying/dp/0321200683)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:53:25.843

[**虚拟主题**正是我一直在寻找的解决方案。](http://activemq.apache.org/virtual-destinations.html)它描述了问题和解决方案（用我所拥有的更简洁的话 :-) 请参阅“JMS 持久主题的限制”

# batch-file - 批处理 if 语句不起作用

> ID：14207952
> 
> 赞同：3
> 
> 时间：2013-01-08T03:52:11.453
> 
> 标签：batch-file

以下代码不起作用。无论我输入什么都只会返回一个错误，然后返回到`Retry`.

```
@echo off

:maths
set /p Mathsa="first number? "
echo your first number is %Mathsa%

:retry

set /p Mathso="operator?(+-*/) "
if "%Mathso%" ==* GOTO run
if "%Mathso%" ==/ GOTO run
if "%Mathso%" ==+ GOTO run
if "%Mathso%" ==- GOTO run
echo Error, wrong operator. & goto retry

:run
set /p Mathsb="Second Number? "
set /a Mathsans=%Mathsa%%Mathsp%%Mathsb%
echo %Mathsans%
pause 
```

我完全不知道它为什么这样做。这是一个学校项目，您可以提供的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T03:56:12.543

`Mathso`这是变量周围的引号。*将它们全部更改为在等式两边*使用引号，例如：

```
if "%Mathso%" == "+" GOTO run 
```

他们应该工作得更好。

原因是它`cmd`与 UNIXy shell 不太一样。引号保留在等式的左侧，因此您最终得到的是：

```
if "+" == + then ... 
```

并且`"+"`不等于。*_*`+`

通过在两边加上引号，它变成：

```
if "+" == "+" then ... 
```

这*是*真的。

* * *

而且，正如 Aacini 在评论中指出的那样，您的计算`set`为运算符使用了错误的变量。你应该改变：

```
set /a Mathsans=%Mathsa%%Mathsp%%Mathsb% 
```

进入：

```
set /a Mathsans=%Mathsa%%Mathso%%Mathsb%
                              ^
                              |
                              see here 
```

# objective-c - ARC __bridge 修饰符揭秘

> ID：14207960
> 
> 赞同：32
> 
> 时间：2013-01-08T03:53:35.600
> 
> 标签：objective-c, automatic-ref-counting

我的一位朋友最近向我询问了在 ARC 下启用的新桥梁修改器。他问我是否知道在特定时间使用哪些，以及不同 __bridge 修饰符之间的区别是什么。他问我，“那么它们是如何工作的，我什么时候使用它们，我如何使用它们，以及它们是如何“在引擎盖下”工作的？

注意：这应该是“分享你的知识”类型的问题，我自己回答了这个问题，但我不确定我是否正确设置了它。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-01-08T03:53:35.600

因为我最近才知道它们是什么以及它们是如何运作的，所以我想与其他任何希望了解 ARC 下的 __bridge 修饰符的人分享，这可能会导致混淆，因为过去曾经完成免费桥接用一个简单的演员表。

过去，如果您想出于任何目的将 NSArray 对象转换为 CFArrayRef，则可以通过如下简单的转换来完成：

```
 NSArray* myArray = [NSArray alloc]initWithObjects:....]; //insert objects

     CFArrayRef arrayRef = (CFArrayRef) myArray; 
```

在这种情况下，也许你有一个颜色的 NSArray 并且需要将其转换为 CFArrayRef 以便与 CoreGraphics 一起使用来绘制渐变。

但是，对于 ARC，这将不再适用于您，您将收到此错误：

![在此处输入图像描述](../Images/b9315a2d644c81d07be209d68348e687.png)

那么这到底是什么意思！？！

事实证明，ARC 不喜欢你做这种类型的演员，甚至会给你一些“修复它”的解决方案，它们似乎都有相同的**__bridge**关键字，所以让我们开始吧！

在 ARC 下，我们有 3 个主要的 __bridge 修饰符：

**__桥**

**__bridge_retained** （与**CFBridgingRetain**函数合作）

**__bridge_transfer** （与**CFBridgingRelease**函数合作）

所以我们将从__bridge 开始。它是什么？__bridge 只是另一种说法：“嘿编译器，给我我该死的铸造对象！”。编译器将很乐意这样做并返回给您一个您喜欢的铸造对象！

然而，因为你想要一个这样的“自由”转换对象，**你**仍然有责任为最初分配的对象释放内存。在这种情况下，如果我要这样做：

```
 NSArray* myArray = [NSArray alloc]init];
    CFArrayRef arrayRef = (__bridge CFArrayRef) myArray; 
```

我仍然负责释放**myArray 内存**，因为它是最初分配的对象。请记住，__bridge 只是告诉编译器执行转换！而且因为我是在 ARC 下编译的，所以我不必在 myArray 对象上显式调用 [-release]，ARC 会为我做这件事！

请注意，__bridge 修饰符可以双向工作！（因此，免费桥接），您可以以同样的方式轻松地将 CF 对象转换为 NS 对象（即免费桥接！），如下所示：

```
CFArrayRef arrayRef; // allocate this arrayRef and give it a value later on
//... amazing code.....
NSArray* myArray = (__bridge NSArray*)arrayRef; 
```

但由于 CF 对象将是最初分配的对象，我**必须**调用 CFRelease(whatever);

现在让我们继续讨论**__bridge_retained**及其在犯罪**CFBridgingRetain()**中的合作伙伴。这个 __bridge 修饰符明确用于将 NS 对象的所有权转移 **到 CF 对象**（因此，由于它是 CF 类型的对象，因此我们期望手动 CFRelease(whatever) this）

意思是，如果我要再次执行我的旧场景，但这次使用 __bridge_retained：

```
 NSArray* myArray = [NSArray alloc]initWithObjects:....]; //insert objects

 CFArrayRef arrayRef = (__bridge_retained) myArray; 
```

arrayRef 对象现在拥有以前由 myArray 指针拥有的内存的**显式所有权。**因为现在 CF 类型拥有所有权，所以我必须自己使用 CFRelease(whatever); 释放它；

那么**CFBridgingRetain()**函数在所有这些混乱中扮演什么角色呢？它和我们刚才谈到的演员扮演着同样的角色！让我们看一下 CFBridgingRetain 的函数原型：

```
 CFTypeRef CFBridgingRetain(id x); 
```

我们可以看到，它几乎只是将整个 (__bridge_retained) 概念简化为一个函数！在“输入”一个 NS 类型的对象后，我们将返回一个 CF 对象！激进的！是的，我知道这太棒了！太酷了，不能一口气坐下来！是的，它还执行内存“所有权”转移……太棒了！

最后但并非最不重要的是**__bridge_transfer**和全能的**CFBridgingRelease()**！

__bridge_transfer 的工作方式几乎与 __bridge_retained 相反。__bridge_transfer 修饰符将 CF 对象类型的所有权转移到 NS 对象类型。

因此，让我们参考在整个过程中使用的示例来剖析它：

```
 NSArray* myArray = [NSArray alloc]initWithObjects:....]; //insert objects

 CFArrayRef arrayRef = (__bridge_retained) myArray;

 // at this point, arrayRef holds the ownership
 // Let's add this new line to change things up a bit:

 NSArray* otherArray = (__bridge_transfer NSArray*)arrayRef; 
```

那么我们刚刚编写的这个很棒的小程序到底是做什么的呢？

第 1 步：我们分配了一个 NSArray

第 2 步：我们将数组的所有权传递给 arrayRef 对象

// 在我们继续第3步之前，我们先了解一下此时arrayRef是owner

第 3 步：我们将曾经由 arrayRef 拥有的所有权重新转移回 NSArray*

因为此时 otherArray 指针是所有者，在这一点上，当我们完成时说 [otherArray release]似乎很**自然，对吧？**好吧，这就是 ARC 发挥作用的地方，它将负责为您释放该数组！

你知道它会变凉吗？这个 __bridge 修饰符的犯罪伙伴：CFBridgingRelease()

让它更酷！CFBridgingRelease 有这个函数原型：

```
 id CFBridgingRelease(CFTypeRef x); 
```

我们看到，这与使用 __bridge_transfer 进行转换时发生的事情完全相同。而且这个函数还将所有权转移给了 NS 对象！这太棒了！

起初使用 CFBridgingXXX 函数可能更有意义，因为许多 Objective-c 程序员仍然有 NARC 规则的概念：

所有被调用的东西：

**新**的

**一个**lloc

**保留**_****

 ****复制**_****

 ****必须**有一个平衡释放调用

所以这样做：

```
 NSArray* myArray = [[NSArray alloc]init]; 
                                       // there's the A of NARC! 
                                       //(cleaned by ARC)
     CFArrayRef arrayRef = CFBridgingRetain(myArray); // there's the R of NARC!!
     //NSArray* other = CFBridgingRelease(arrayRef); // cleaned up by ARC 
```

由于**保留**与**发布相匹配，可以使学习 __bridge 强制转换的过程更容易**

如果这一切仍然令人困惑，请这样想：您是指向任何 NS 对象类型的指针。为了保持一致性，假设你是一个 NSArray 指针，它现在没有指向任何东西。所以你可以想象你，作为零指针，站在浴室里关灯。（灯熄灭表示您没有指向任何东西）。

然后，稍后在代码中，您的程序员决定将您分配给一个新的 NSArray。即，他/她这样说：

```
 you = [[NSArray alloc]init]; 
```

突然，你站着的浴室里的灯亮了！你指向一个对象！现在在正常的程序执行中，当您使用完对象时，您释放它。所以在这种情况下，当你用完浴室时，你关掉了灯。

但是不幸的是，您所在的程序不是很“正常”。程序员决定使用一些 CoreFoundation 对象！呸！

他写了这行代码：

```
 CFArrayRef other = (__bridge_retained CFArrayRef) you; 
```

所以现在发生的事情是，在你离开的**同时**，另一个人走进了浴室。出于*礼貌*，你不要关灯，因为*有另一个人在使用洗手间，并负责在他/她离开时关灯*

在这种情况下，因为厕所的新*主人*是一个 CF 对象，程序员必须*手动*释放它。

但是如果他/她要写这个怎么办：

```
 CFArrayRef ref = (__bridge CFArrayRef) you; 
```

这里发生的事情是，另一个人甚至没有问就闯入了与你同一个洗手间！真没礼貌！最重要的是，他希望你也能在他之后清理干净！*所以你，作为一个绅士/女士，当你们俩都*完成后，请关掉灯 。

然而，由于你是一个 NS 类型的对象，ARC 来为你清理它:)

最后，如果程序员这样写：

```
 you = (__bridge_transfer NSArray*)arrayRef; 
```

这里发生的情况与第一种情况完全相反。与其在有人进入的同时*离开洗手间，不如***在另一个人离开的同时进入洗手间**

相同的内存管理规则适用。由于您接管了“拥有”洗手间，因此您必须手动关闭灯。而且因为你是一个 NS 类型的对象，ARC 会为你做这件事......再次:) ARC 不是这么美吗！

我知道这可能看起来有点令人生畏和困惑，但只要按照自己的方式进行操作，再读一遍，你就会发现这个 ARC 机制的工作原理是多么不可思议！

感谢大家阅读！希望这有帮助:)

感谢@rob mayoff 和@ Krishnabhadra 提供的所有额外帮助和建议！****

# arrays - 在mathematica中填充数组

> ID：14207965
> 
> 赞同：0
> 
> 时间：2013-01-08T03:54:09.577
> 
> 标签：arrays, wolfram-mathematica, 2d

我有一组大约 500 (x,y,z) 的实际值。由于我需要根据它们的 (x,y) 坐标对值进行分类，因此我剥离了 z 值并存储在单独的列表中。我只剩下 x,y 值；我重新调整并舍入它们以索引 1..100 范围内的对。

现在我想在特定 (x,y) 坐标处用 100x100 矩阵中的 z 值填充一个数组。

更确切地说，

例如，我有一组值：`data = {{2.62399, 0.338057, 2.09629}, {1.8424, 0.135817, 3.21925}, {0.702257, 1.14502, 3.9335}...`

我剥离了它的 zvalues 并将其存储在 zvalues 列表中：

```
zvalues = {2.09629, 3.21925, 3.9335.... 
```

我四舍五入，重新调整并创建了一个新的索引数组

```
indices = {{53, 7}, {37, 3}, {14, 23}... 
```

我想创建一个新的 100x100 矩阵并将 zvalues 放在与索引矩阵对应的坐标上

例如，在伪代码中

```
For (int i = 1, i < 101, i++){

NewArray(indices[i]) = zvalues[i];
} 
```

循环第一次运行时，它应该执行`NewArray(53,7) = 2.09629`.

我想知道遍历索引数组并使用 zvalues 填充二维 100x100 NewArray 的语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:19:28.237

虽然我不明白您为什么要创建一种新的索引数组的方法，但这将满足您的要求：

```
data = {{2.62399, 0.338057, 2.09629}, {1.8424, 0.135817, 3.21925}, {0.702257, 1.14502, 3.9335}};
zvalues = {2.09629, 3.21925, 3.9335};
indices = {{53, 7}, {37, 3}, {14, 23}};

newArray[xIndex_, yIndex_]:=Take[data, Position[indices, {xIndex, yIndex}][[1, 1]]][[1, 3]]

newArray[53, 7]
(* 2.09629 *) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:01:51.830

要遵循您的基本方法，您需要初始化数组：

```
newArray=Table[,{100},{100}] 
```

然后在循环中的语法是：

```
newArray[[indices[[i,1]],indices[[i,2]]]]=zdata[[i]] 
```

注意用于引用数组部分（或 Mathematica 术语中的列表）的方括号

更好的方法是创建一个 SparseArray，一方面不需要预初始化，甚至不需要提前知道维度。

最后在mathematica中，您通常可以使用面向对象的方法，一起避免“do”循环：

```
data = {{1.5, 1.1, 1.1}, {2.2, 2.2, 2.2}, {1.01, 2.3, 1.2}};
m1 = Table[, {2}, {2}];
(m1[[Floor[#[[1]]], Floor[#[[2]]]]] = #[[3]]) & /@ data;
m1
m2 = SparseArray[ Floor[#[[1 ;; 2]]] -> #[[3]] & /@ data , Automatic,];
Normal[m2]

{{1.1, 1.2}, {Null, 2.2}}
{{1.1, 1.2}, {Null, 2.2}} 
```

# python - 仅使用 C 风格的 fprintf() 语句的高效数据交换格式？

> ID：14207966
> 
> 赞同：3
> 
> 时间：2013-01-08T03:54:25.127
> 
> 标签：python, binaryfiles, printf, dataformat, data-representation

我需要将非常大的数据集（在 1-10 百万条记录之间，可能更多）从特定领域的语言（其唯一的输出机制是 C 风格的`fprintf`语句）传输到 Python。

目前，我正在使用 DSL`fprintf`将记录写入平面文件。平面文件如下所示：

```
x['a',1,2]=1.23456789012345e-01
x['a',1,3]=1.23456789012345e-01
x['a',1,4]=1.23456789012345e-01
y1=1.23456789012345e-01
y2=1.23456789012345e-01
z['a',1,2]=1.23456789012345e-01
z['a',1,3]=1.23456789012345e-01
z['a',1,4]=1.23456789012345e-01 
```

如您所见，每条记录的结构都非常简单（但将双精度浮点数表示为 20 字符的字符串效率非常低！）：

```
<variable-length string> + "=" + <double-precision float> 
```

我目前正在使用 Python 读取每一行并将其拆分为“=”。

我可以做些什么来使表示更紧凑，以便让 Python 更快地阅读？是否可以使用某种二进制编码`fprintf`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:30:04.870

Err.... 你每分钟从 Python 读取这些数据多少次？

因为在我的系统中，我可以在一秒钟内读取这样一个包含 2000 万条记录（~400MB）的文件。

除非您在有限的硬件中执行此操作，否则我会说您太担心什么了。

```
>>> timeit("all(b.read(20) for x in xrange(0, 20000000,20)  ) ", "b=open('data.dat')", number=1)
0.2856929302215576
>>> c = open("data.dat").read()
>>> len(c)
380000172 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T04:23:21.243

用于序列化浮点值的紧凑二进制格式在[基本编码规则](http://en.wikipedia.org/wiki/Basic_Encoding_Rules#BER_encoding)(BER) 中定义。在那里，它们被称为“真实”。有可用的 Python BER 实现，但也不太难编写。也有 C 的库。您可以使用这种格式（这就是它的设计目的）或变体（CER、DER）。一个这样的 Python 实现是[pyasn1](http://pyasn1.sourceforge.net/http://)。

# freemarker - Freemarker 中可以有私有宏吗？

> ID：14207971
> 
> 赞同：1
> 
> 时间：2013-01-08T03:55:39.590
> 
> 标签：freemarker

我有一个案例，我在宏中有一些通用功能。我已将其编码为宏，但不希望在当前 ftl 之外访问它（就像 Java 中的私有实例变量一样）。这样做的一种方法是将内部宏保存在一个单独的文件中，并且只将它包含在这个 ftl 中，但这似乎有点小技巧。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:56:11.777

FreeMarker 中没有私有宏。

如果您唯一关心的是命名空间污染（而不是安全性），您可能需要查看`#import`. 如果您只是想传达不应从外部调用此宏的信息，则可以将其名称以`_`;开头。这对 FreeMarker 没有任何意义，而是一种文档，除非您知道自己在做什么，否则您不应该调用它。

# c# - 命名空间“MicrosoftSqlServer”中不存在类型或命名空间名称“Management”您是否缺少程序集引用

> ID：14207972
> 
> 赞同：11
> 
> 时间：2013-01-08T03:55:41.273
> 
> 标签：c#, .net

我在用：

```
using Microsoft.SqlServer.Management.Smo;
using Microsoft.SqlServer.Management.Common; 
```

我正在使用上述命名空间从 还原数据库`c# window form`，但编译器告诉我

> 命名空间“MicrosoftSqlServer”中不存在类型或命名空间名称“Management”是否缺少程序集引用

我遵循谷歌的一些建议，找到`DLL`了 `C:\Program Files\Microsoft SQL Server\100\SDK\Assemblies`：

```
Microsoft.SqlServer.Smo.dll;
Microsoft.SqlServer.ConnectionInfo.dll 
```

我将它们复制并粘贴到我项目中的所有位置，但我仍然收到来自编译器的错误消息。

任何人都可以在哪里提供参考？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-05-23T21:08:31.010

我通过 Nuget 控制台重新安装 SqlServer 脚本来“修复”这个问题：

```
>> Uninstall-Package Microsoft.SqlServer.Scripting

>> Install-Package Microsoft.SqlServer.Scripting 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T04:02:28.520

不要手动将 SQL 管理 DLL 复制到项目文件夹中。

在 Visual Studio 中，在解决方案资源管理器的项目中，右键单击“引用”>“添加”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-27T20:12:00.050

## 从 MS 发布的 NuGet 包安装 SMO

[SQL Server 管理对象 (SMO) 框架](https://docs.microsoft.com/en-us/sql/relational-databases/server-management-objects-smo/overview-smo?view=sql-server-ver15)是一组对象，旨在以编程方式管理 Microsoft SQL Server 和 Microsoft Azure SQL 数据库。

从 SQL Server 2017 开始，SMO 作为[`Microsoft.SqlServer.SqlManagementObjects`NuGet 包](https://www.nuget.org/packages/Microsoft.SqlServer.SqlManagementObjects)分发，以允许用户使用 SMO 开发应用程序。这意味着不再需要单独安装 Microsoft SQL Server SDK。

要将 SMO 作为 NuGet 包安装：

1.  首先，打开那个包管理器控制台。在 Visual Studio 中： `Tools`⯈ `NuGet Package Manager`⯈`Package Manager Console`

2.  使用控制台安装`Microsoft.SqlServer.SqlManagementObjects`NuGet 包：

    `Install-Package Microsoft.SqlServer.SqlManagementObjects`

现在，SMO 参考可作为包参考（扩展给定项目的参考）*：*

[![项目 SMO 参考](../Images/35f4d1360a3c440e35598d8cb8a1591d.png)](https://i.stack.imgur.com/6HvoT.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-05T17:48:51.970

我没有使用任何解决方法，而是找到了问题的根本原因：我的 SQL Server ISO 下载错误。我通过仔细检查下载文件的 SHA1 哈希 (74279286C2ABFBA9E9FF6DBEE60B71669BD234D2) 确认了这一点。

重新下载并重新安装后，我的项目按预期工作。

额外信息：[在 Windows 10 中查找校验和值](https://answers.microsoft.com/en-us/windows/forum/all/finding-checksum-values-in-windows-10/dbc3c569-4b5a-4967-8810-c25255cdc1fd)

我使用了 PowerShell：

```
Get-FileHash -Path .\en_sql_server_2016_developer_with_service_pack_2_x64_dvd_12194995.iso -Algorithm SHA1 
```

# c# - 所有 IE 窗口的进程 ID 相同

> ID：14207973
> 
> 赞同：1
> 
> 时间：2013-01-08T03:56:11.540
> 
> 标签：c#, watin

当我手动启动 Internet Explorer 窗口时，每个窗口都会获得不同的 PID。

但是，假设我手动打开了一个浏览器窗口，它获得了 PID 12345，然后运行 ​​WaitiN 打开了一些浏览器窗口，所有 WaiiN 窗口的 PID 变为 12345。我怎样才能改变行为，以便让 WatiN 像手动工作一样工作。

我需要 PID，以便我可以在我的清理代码中关闭由 WatiN 打开的浏览器窗口，并确保关闭仅由 WatiN 打开的浏览器窗口的 PID。

**编辑：**
我使用的代码是：

```
//Where I am using WatiN 1
IE ReportWindow = IE.AttachToNoWait<IE>(Find.ByTitle("New Activity Recap"), 120);
ReportWindowPID = ReportWindow.ProcessID;

//Where I am using WatiN 2
IE ReportWindow = IE.AttachToNoWait<IE>(Find.ByTitle("New Activity Recap"), 120);
ReportWindowPID = ReportWindow.ProcessID;

//Cleanup code
            foreach (Process p in System.Diagnostics.Process.GetProcessesByName("iexplore"))
            {
                if (p.Id == ApplicationWindowPID || p.Id == ReportWindowPID)
                {
                    try
                    {
                        p.Kill();
                        p.WaitForExit();
                    }
                    catch
                    {
                    }
                }
            } 
```

上面的代码正在关闭 WatiN 打开的 2 个窗口以及其他窗口。

**PS：**任何通过 URL 杀死浏览器窗口的代码也可以这样做，因为基本 URL 在 2 个 WatiN 窗口中将是相同的。

# ruby-on-rails - 数据库索引是否可以优化 pg_search、pg_search_scope 方法？

> ID：14207976
> 
> 赞同：0
> 
> 时间：2013-01-08T03:56:36.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, postgresql-9.1, pg-search

我正在努力将搜索添加到我的 PostgreSQL 9.1 rails 应用程序中。这是设置：

```
class Comment < ActiveRecord::Base
  include PgSearch
  pg_search_scope :search_by_content, :against => :content 
```

Rails C，命令：

```
 Comment.where(:commentable_id => 33).search_by_content('pgsql').count 
```

导轨日志：

```
(348.1ms)  SELECT COUNT(*) FROM "comments" WHERE "comments"."commentable_id" = 33 AND (((to_tsvector('simple', coalesce("comments"."content"::text, ''))) @@ (to_tsquery('simple', ''' ' || 'pgsql' || ' ''')))) 
```

安装 gem 并设置评论模型后，说明中没有提到添加数据库索引以优化性能。鉴于查询在本地已经占用了 348.1 毫秒，我很好奇这可以优化为更高性能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T06:26:30.540

Rails 似乎正在使用全文搜索 - 请参阅[PostgreSQL 文档中的全文搜索](http://www.postgresql.org/docs/current/static/textsearch.html)，尤其是[创建索引](http://www.postgresql.org/docs/current/static/textsearch-tables.html#TEXTSEARCH-TABLES-INDEX)部分。

Rails 对 tsearch2 表达式做了一些非常奇怪的事情，这可能会使创建 PostgreSQL 识别为匹配的索引变得更加困难。请参阅[此先前的问题](https://stackoverflow.com/q/10880327/398670)。

用于`EXPLAIN ANALYZE`验证它是否正在使用索引。

# html - 获取 youtube 视频 url 表单网页源

> ID：14207977
> 
> 赞同：3
> 
> 时间：2013-01-08T03:56:39.813
> 
> 标签：html, url, youtube

是否可以从 YouTube 网页源获取当前播放视频的下载 URL？提前谢谢。请帮助我。

实际上我有一个下载器，但它现在不工作。当我尝试在浏览器中使用下载器提供的 URL 时，它返回一个错误页面，显示“访问网页被拒绝”。我为视频获得的 URL 为 **" [http://r14---sn-h557snel.c.youtube.com/videoplayback?gcr=in&ip=121.241.181.70&upn=OOcjKEO_S6I&cp=U0hUTFZQT19KU0NONF9OSlNGOmFRT2JSUUs2bDVi&ipbits=8&fexp=900148,920704,912806,928001,922403,922405,929901, 913605,929104,913546,913556,908496,920201,913302,919009,911116,901451,902556&ms=au&mt=1357625350&mv=m&id=31a79fcdbfc6c2f6&sparams=cp,gcr,id,ip,ipbits,itag,ratebypass,source,upn,expire&expire= 1357651559&itag=18&key=yt1&newshard=yes&source=youtube&ratebypass=yes&sver=3](http://r14---sn-h557snel.c.youtube.com/videoplayback?gcr=in&ip=121.241.181.70&upn=OOcjKEO_S6I&cp=U0hUTFZQT19KU0NONF9OSlNGOmFRT2JSUUs2bDVi&ipbits=8&fexp=900148,920704,912806,928001,922403,922405,929901,913605,929104,913546,913556,908496,920201,913302,919009,911116,901451,902556&ms=au&mt=1357625350&mv=m&id=31a79fcdbfc6c2f6&sparams=cp,gcr,id,ip,ipbits,itag,ratebypass,source,upn,expire&expire=1357651559&itag=18&key=yt1&newshard=yes&source=youtube&ratebypass=yes&sver=3) "**

几个月前 URL 的格式是 **“ [http://oo---preferred---sn-h557snes---v24---lscache3.c.youtube.com/videoplayback?upn=AmmxhSpq470&sparams=cp,gcr,id ,ip,ipbits,itag,ratebypass,source,upn,expire&fexp=917013,906437,916626,922401,920704,912806,927201,925706,922403,913546,913556,916805,920201,901451&ms=au&expire=1353668177&itag=18&ipbits=8&gcr =in&sver=3&ratebypass=yes&mt=1353646087&ip=121.241.181.70&mv=m&source=youtube&key=yt1&cp=U0hUSFZRVl9MUUNONF9OS1pCOmhtUTVMak5oTVNy&id=c429fa5466ee9447&newshard=yes](http://o-o---preferred---sn-h557snes---v24---lscache3.c.youtube.com/videoplayback?upn=AmmxhSpq470&sparams=cp,gcr,id,ip,ipbits,itag,ratebypass,source,upn,expire&fexp=917013,906437,916626,922401,920704,912806,927201,925706,922403,913546,913556,916805,920201,901451&ms=au&expire=1353668177&itag=18&ipbits=8&gcr=in&sver=3&ratebypass=yes&mt=1353646087&ip=121.241.181.70&mv=m&source=youtube&key=yt1&cp=U0hUSFZRVl9MUUNONF9OS1pCOmhtUTVMak5oTVNy&id=c429fa5466ee9447&newshard=yes) "**

所以我不知道下载器是否给出了正确的 URL。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T05:41:56.760

抱歉，我环顾四周，找不到直接从 youtube 链接下载源文件的方法。那里有一些指南，但都在 2009 年左右；并且由于 youtube 更改了很多代码，目前它们都不起作用。

尽管有许多网站、插件、应用程序可以让您下载视频；但我认为它们不能通过链接中的代码工作。由于要观看视频，您必须临时下载它，我认为他们都使用打开页面，播放（下载）视频并实际保存它的方法。我会列出这些网站和插件，但因为这些来源并不难找到；我假设您正在尝试构建自己的下载器，而不是使用已经存在的下载器。

如果您能以某种方式获得指向视频源文件的链接，请另外注意。我确信 youtube 有权阻止访问其后端的所有文件夹和文件，以采取安全措施；只允许这些文件被转发并显示在实际的播放器页面上。如果您认为嵌入的视频会以某种方式工作，他们仍然只是向 youtube 发出请求，然后 youtube 会返回 video-feed-data，因此仍然没有与文件的直接连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T06:01:23.413

您应该使用播放器 API [https://developers.google.com/youtube/js_api_reference#Retrieving_video_information](https://developers.google.com/youtube/js_api_reference#Retrieving_video_information)

`player.getVideoUrl():String`

返回当前加载/播放视频的 YouTube.com URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-19T06:30:02.587

我编写了一个简单的 python 代码，可以从 html 代码中获取 youtube href。希望它可以帮助你：

```
#!/usr/bin/env python

import re

pattern = '.*<(iframe|param).*(src|value)="(?P<link>http://www.youtube.com/(embed|v)/[a-zA-Z0-9/\.\?&;=\+_-]+);?.*".*>.*</(iframe|param)>.*'

action = re.compile(pattern)
result = action.findall('<div><iframe.....></iframe><param......></param></div>')

print result 
```

[https://gist.github.com/Mortezaipo/5707738](https://gist.github.com/Mortezaipo/5707738)

# ajax - jquery - on("change", function() 在 IE 9 中不起作用

> ID：14207978
> 
> 赞同：1
> 
> 时间：2013-01-08T03:56:40.513
> 
> 标签：ajax, jquery

我在除 IE 之外的所有浏览器中都可以使用的 jquery 上遇到一些问题。

jquery代码如下：

```
$('#FormIndustryId, #FormIndustries').on("change", function () {
  if ($(this).val()) {
    $.getJSON('/categories/list_categories/industry_id:' + $(this).val(),
    function (cats) {
      if (cats !== null) {
        populateCategorySelect(cats);
      }
    });
  }
}); 
```

从前端的角度来看，这可以在这里进行测试：[http](http://www.beanclaim.com/) ://www.beanclaim.com/ - 有一个带有**行业选择**标签的字段，它是分配给它的#FormIndustries 的下拉列表，它应该是一个行业选择使用 ajax 内容更新第二个下拉列表。Chrome、Firefox 和 Safari 都可以，但在 IE 中似乎什么也没做。

任何想法我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T04:14:36.980

这是因为只有在 IE 中才能执行以下代码：

```
// IF IE (BROWSER) USE jQUERY TO SET THE PLACEHOLDER
   // -------------------------------------------------->
    if ( $.browser.msie ) {
        $("#TemplateName").placeholder();
        $("#FormIndustries").placeholder();
    } 
```

但是，这会返回这个 JS 错误：

```
SCRIPT438: Object doesn't support property or method 'placeholder' 
```

并阻止您的 JS 正确执行。我不知道占位符是什么（IE 也不知道 :)），但如果你解决了这个问题，页面在 IE 中就可以正常工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:06:33.950

编写完全相同的函数，但使用以下命令进行复制：

```
$('#FormIndustryId, #FormIndustries').on("click", ... 
```

# jsf-2 - 单个数据表中的两个多重选择器 primefaces

> ID：14207982
> 
> 赞同：0
> 
> 时间：2013-01-08T03:57:01.163
> 
> 标签：jsf-2, primefaces

我想要一个数据表中有两个多个选择器。这可能吗？或者我怎么能得到那个...... ![这里有两个带有两个选择器的表....](../Images/0131fdd4ce1a2122d9aa53909108f5f7.png)

我想要一个表，两个选择器需要指向不同的值。请分享你的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:30:56.733

我实际上是使用简单的 css 和 jsf UI 重复标记完成的......

# gruntjs - 如何在 uglify grunt 任务中指定多个源映射？

> ID：14207983
> 
> 赞同：12
> 
> 时间：2013-01-08T03:57:09.737
> 
> 标签：gruntjs, uglifyjs

我`grunt-contrib-uglify`在我的`grunt 0.4`.

我有以下任务：

```
uglify: {
  dist: {
    options: {
      sourceMap: 'dist/sm/sm.js'
    },
    files: grunt.file.expandMapping(['*.js'], 'dist/js', {
      cwd: 'dist/js'
    })
  }
}, 
```

可以看到，uglify 被配置为压缩多个文件，并且只指定了一个 source-map。（我无法找到指定多个源映射输出的方法）。

另外，uglify 会在压缩每个 js 文件后覆盖 soucemap。

如何配置此插件以输出我所有 js 文件的完整源映射？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-06T13:35:42.037

您可以在 sourceMap 中设置功能。

```
uglify: {
  options: {
      sourceMap: function(path) { return path.replace(/.js/,".map")} 
  },
  ..... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-05T03:04:18.653

在V0.4.0版本中，`sourceMap`是`Boolean`超值的。使用动态构建生成具有多个`.min.js`文件的多个 sourceMap。

```
uglify: {
  options: {
    sourceMap: true
  },
  build: {
    files: [{
        expand: true,
        cwd: 'src/',
        src: '*.js',
        dest: 'build/',
        ext: '.min.js',
        extDot: 'first'
    }]
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-19T01:40:16.203

```
options: {
  beautify: false,
  banner: 'lorem ipsum',
  mangle: false,
  sourceMap: true,
  compress: {
    conditionals: true,
    booleans: true,
    unused: true,
    sequences: true,
    dead_code: true,
    if_return: true,
    join_vars: true,
    drop_console: true
  }
},
min: {
  files: [{
    expand: true,
    cwd: '<%= config.destination.js %>',
    src: ['**/*.js', '!**/*.min.js'],
    dest: '<%= config.destination.js %>',
    ext: '.min.js'
  }]
} 
```

# unit-testing - JUnit 测试 FacesContext.getExternalContext

> ID：14207985
> 
> 赞同：0
> 
> 时间：2013-01-08T03:57:58.017
> 
> 标签：unit-testing, jakarta-ee, junit, mocking, mockito

我在 Java EE 托管 bean 中有以下代码：

```
FacesContext context = facesContextProvider.getCurrentInstance();
HttpServletResponse response = (HttpServletResponse) context.getExternalContext(); 
```

facesContextProvider 是一个自定义类，用于返回人脸上下文（用于模拟测试）。

我想知道如何使用 mockito 在 JUnit 中对此进行测试。我正在尝试以下组合：

```
FacesContextProvider mockFacesContextProvider = mock(FacesContextProvider.class);
when(mockFacesContextProvider.getCurrentInstance()).thenReturn(mockFacesContext);
// this line is wrong ~> when(mockFacesContext.getExternalContext()).thenReturn((ExternalContext) new MockHttpServletResponse()); 
```

如何将某种模拟或自定义 HttpServletResponse 注入我的外部上下文？

谢谢您的帮助。

**回答**

我的控制器代码错误。您可以使用 ExternalContext 来做任何您需要的事情。所以在控制器中，它实际上应该是：

```
FacesContext facesContext = facesContextProvider.getCurrentInstance();
ExternalContext externalContext = facesContext.getExternalContext();
externalContext.responseReset(); 
```

如果您仍然想要响应，您可以从以下位置获取：

```
HttpResponse response = externalContext.getResponse(); 
```

那么单元测试工具将是：

```
mockFacesContextProvider = mock(FacesContextProvider.class);
mockFacesContext = mock(FacesContext.class);
mockExternalContext = mock(ExternalContext.class);
mockHttpSession = mock(HttpSession.class);
when(mockFacesContextProvider.getCurrentInstance()).thenReturn(mockFacesContext);
when(mockFacesContext.getExternalContext()).thenReturn(mockExternalContext);
when(mockExternalContext.getSession(true)).thenReturn(mockHttpSession); 
```

然后单元测试代码将是：

```
verify(mockExternalContext).responseReset(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:36:52.580

```
FacesContextProvider mockFacesContextProvider = mock(FacesContextProvider.class);
HttpServletResponse mockResponse = mock(HttpServletResponse.class);
when(mockFacesContextProvider.getCurrentInstance()).thenReturn(mockFacesContext);
when(mockFacesContext.getExternalContext()).thenReturn(mockResponse); 
```

# python - 过于复杂的列表理解？

> ID：14207986
> 
> 赞同：0
> 
> 时间：2013-01-08T03:57:58.787
> 
> 标签：python, list-comprehension

我有一个对象列表，其属性名为 mgmt_classes，它本身就是一个列表。

```
systems = [System, System, System,...]
System.mgmt_classes = ['foo','bar'] 
```

我想识别系统列表中具有名为“foo”的 mgmt_class 的系统对象。我想出了两种方法来做到这一点，但我不喜欢任何一种。

丑陋的列表理解

```
matching = [system for system in systems 
            if len([mc for mc in system.mgmt_classes 
                    if re.search(search, mc)]) > 0] 
```

丑陋的嵌套循环

```
matching = []
for system in systems:
    for mgmt_class in system.mgmt_classes:
        if re.search(search, mgmt_class):
            matching.append(system) 
```

我不喜欢其中任何一个。有没有更优雅的方式来做到这一点？我的直觉告诉我，丑陋的嵌套循环将是两者中更好的解决方案，因为它更容易理解。

*编辑*：

我希望能够在 mgmt_classes 中搜索部分术语，例如，'foo' 会让我得到 'food' 或 'football'。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T04:02:38.123

如果您的匹配标准很复杂，请考虑将其分解到另一个函数中，例如：

```
systems = [System, System, System,...]
System.mgmt_classes = ['foo','bar']

def hasmatches(classes):
    return any(re.search(search, mc) for mc in classes)

matching = [system for system in systems
    if hasmatches(system.mgmt_classes)] 
```

`hasmatches`第一次在类列表中找到匹配项时返回 True，如果没有匹配项则返回 False。然后列表推导在每个系统上调用它并收集`hasmatches`评估为 True 的那些。

如果它真的像查找特定值一样简单，请放弃正则表达式以支持直接字符串比较：

```
matching = [system for system in systems if 'foo' in system.mgmt_classes] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T04:03:27.013

```
matching = [system for system in systems if 'foo' in system.mgmt_classes] 
```

该`if`语句检查是否`'foo'`在属性中`mgmt_classes`- 比使用正则表达式简单得多。

但是，如果您的条件需要使用正则表达式，请使用：

```
matching = [system for system in systems if any(re.search('foo', i) for i in system.mgmt_classes)] 
```

这只是柯克答案的单行版本。

# c# - Visual stuio C#中的Sql连接错误

> ID：14207987
> 
> 赞同：0
> 
> 时间：2013-01-08T03:58:23.127
> 
> 标签：c#, sql, sql-server, c#-4.0, ado.net

我是 Visual Studio 的新手，并试图连接到数据库“demoDB”并更新具有两列 UID 和名称的表“Table1”。下面是我的代码。

```
SqlConnection con = new SqlConnection("Data Source=./SqlExpress;Initial Catalog=DemoDB;Integrated Security=SSPI;");
con.Open();
SqlCommand cmd = new SqlCommand("insert into Table1 values ('WCGC1212','Watson')", con);
int x = cmd.ExecuteNonQuery();
MessageBox.Show(x.ToString());
con.Close(); 
```

当我调试它时，我遇到了错误

* * *

索引 #0

消息：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

行号：0

来源：.Net SqlClient 数据提供者

程序：

* * *

你能告诉我如何解决这个错误..

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T04:01:34.033

尝试：`Data Source=.\SqlExpress`而不是`Data Source=./SqlExpress`

# scala - 为什么 Scala 中的辅助构造函数只能包含对另一个构造函数的一次调用？

> ID：14207989
> 
> 赞同：14
> 
> 时间：2013-01-08T03:58:46.987
> 
> 标签：scala

我认为我看到了以主构造函数是类的唯一入口点的方式定义辅助构造函数的优点。但是为什么我不能做这样的事情呢？

```
class Wibble(foo: Int, bar: String) {
  def this(baz: List[Any]) = {
    val bazLength = baz.length
    val someText = "baz length is " ++ bazLength.toString
    this(bazLength, someText)
  }
} 
```

这可能是一种保证辅助构造函数没有副作用和/或不能提前返回的方法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-08T08:25:10.387

辅助构造函数可以包含多个对另一个构造函数的调用，但它们的第一个语句必须表示调用。

正如*在 Scala 编程中*所解释的那样，ch。6.7：

> 在 Scala 中，每个辅助构造函数都必须调用与其第一个操作相同的类的另一个构造函数。换句话说，每个 Scala 类中的每个辅助构造函数中的第一条语句都将具有`this(. . . )`. 调用的构造函数要么是主构造函数（如`Rational` 示例中所示），要么是另一个辅助构造函数，它以文本形式出现在调用构造函数之前。这条规则的最终结果是 Scala 中的每个构造函数调用最终都会调用该类的主构造函数。因此，主构造函数是类的单一入口点。
> 
> 如果您熟悉 Java，您可能想知道为什么 Scala 的构造函数规则比 Java 的规则更严格一些。在 Java 中，构造函数必须要么调用同一个类的另一个构造函数，要么直接调用超类的构造函数，作为它的第一个动作。在 Scala 类中，只有主构造函数可以调用超类构造函数。Scala 中增加的限制实际上是一种设计权衡，需要付出代价以换取 Scala 的构造函数比 Java 更简洁和简单。

就像在 Java 中一样，可以通过在主构造函数调用之前将要执行的代码提取到单独的方法中来绕过这个限制。在 Scala 中，它比在 Java 中更棘手，因为显然您需要将此辅助方法移动到伴随对象中，以便允许从构造函数中调用它。

此外，您的具体情况很尴尬，因为您有两个构造函数参数，并且 - 尽管可以从函数返回元组 - 这个返回的元组然后不被接受作为主构造函数的参数列表。[对于普通函数，您可以使用`tupled`](https://stackoverflow.com/questions/1987820/applying-a-function-to-a-tuple-in-scala)，但是，这似乎不适用于构造函数。一种解决方法是添加另一个辅助构造函数：

```
object Wibble {

  private def init(baz: List[Any]): (Int, String) = {
    val bazLength = baz.length
    val someText = "baz length is " ++ bazLength.toString
    println("init")
    (bazLength, someText)
  }
}

class Wibble(foo: Int, bar: String) {

  println("Wibble wobble")

  def this(t: (Int, String)) = {
    this(t._1, t._2)
    println("You can execute more code here")
  }

  def this(baz: List[Any]) = {
    this(Wibble.init(baz))
    println("You can also execute some code here")
  }

} 
```

这至少有效，即使它有点复杂。

```
scala> val w = new Wibble(List(1, 2, 3))

init
Wibble wobble
You can execute more code here
You can also execute some code here
w: Wibble = Wibble@b6e385 
```

### 更新

正如@sschaef 在他的评论中指出的那样，这可以使用伴随对象中的工厂方法来简化：

```
object Wobble {

  def apply(baz: List[Any]): Wobble = {
    val bazLength = baz.length
    val someText = "baz length is " ++ bazLength.toString
    println("init")
    new Wobble(bazLength, someText)
  }
}

class Wobble(foo: Int, bar: String) {
  println("Wobble wibble")
} 
```

因此我们不再需要`new`创建一个对象：

```
scala>  val w = Wobble(List(1, 2, 3))

init
Wobble wibble
w: Wobble = Wobble@47c130 
```

# javascript - jQuery 子菜单不会显示

> ID：14207991
> 
> 赞同：1
> 
> 时间：2013-01-08T03:59:02.313
> 
> 标签：javascript, jquery, html, css

使用以下代码，我可以显示关于和常见问题子菜单，但鼠标悬停时不会出现任何内容，我不知道为什么。请帮忙！如果我应该显示更多代码，请告诉我！在此先感谢您的帮助:)

的HTML：

```
 <ul class="navigation">
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a>
                <ul>
                    <li><a href="#">History</a></li>
                    <li><a href="#">Location</a></li>
                    <li><a href="#">Gallery Tour</a></li>
                    <li><a href="#">Testimonials</a></li>

                </ul>
            </li>
            <li><a href="#">Accomodations</a></li>
                <ul>
                    <li><a href="#">Event Space</a></li>
                    <li><a href="#">Guest Rooms</a></li>
                    <li><a href="#">Kitchen and Catering Facility</a></li>
                </ul>           
            </li>
            <li><a href="#">Activities</a></li>
                <ul>
                    <li><a href="#">The Katy Trail</a></li>
                    <li><a href="#">Augusta</a></li>
                    <li><a href="#">St. Louis Attractions</a></li>
                </ul>
            <li><a href="#">Reservations</a></li>
                <ul>
                    <li><a href="#">Rates</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">Request Info</a></li>
                    <li><a href="#">Event Agreement Form</a></li>
                 </ul>
                    <li><a href="#">FAQ</a>
                <ul>
                    <li><a href="#">Additional Info</a></li>
                    <li><a href="#">Catering</a></li>
                </ul>
</ul> 
```

CSS：

```
.navigation  {margin:0; padding:0;list-style:none;  }   

    .navigation  li {
        float:left;         
        width:120px; 
        position:relative; 
    }

    .navigation  li a {
        background:#262626; 
        color:#fff;
        display:block;      
        padding:8px 7px 8px 7px; 
        text-decoration:none; 
        border-top:1px solid #F2861D;
        text-align:center; 
        text-transform:uppercase;
    }

    .navigation  li a:hover {
        color:#F2861D;
    }

    .navigation  ul {
        position:absolute; 
        left:0; 
        display:none; 
        margin:0 0 0 -1px; 
        padding:0; 
        list-style:none;
        border-bottom:3px solid #F2861D;
    }

    .navigation  ul li {
        width:150px; 
        float:left; 
        border-top:none;
        overflow: visible;
    }

    .navigation  ul a {
        display:block;      
        height:15px;
        padding:8px 7px 13px 7px; 
        color:#fff;
        text-decoration:none;   
        border-top:none;
        border-bottom:1px dashed #6B6B6B;
    }

    .navigation  ul a:hover {
        color:#F2861D;
    }` 
```

Javascript：

```
$(document).ready(function() {
    // Navigation function
    $('.navigation li').hover(function () {
            $('ul', this).fadeIn();
    },
    function () {$('ul', this).fadeOut();}
    ); 
```

[jsFiddle](http://jsfiddle.net/py5UQ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:12:06.983

住宿、活动和预订的元素`li`没有正确嵌套子菜单的`ul`元素。查看此 JS Fiddle 中的代码以获取更正版本：

[http://jsfiddle.net/9NdZC/](http://jsfiddle.net/9NdZC/)

这里只是 HTML 部分：

```
<ul class="navigation">
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a>
            <ul>
                <li><a href="#">History</a></li>
                <li><a href="#">Location</a></li>
                <li><a href="#">Gallery Tour</a></li>
                <li><a href="#">Testimonials</a></li>

            </ul>
        </li>
        <li><a href="#">Accomodations</a>
            <ul>
                <li><a href="#">Event Space</a></li>
                <li><a href="#">Guest Rooms</a></li>
              <li><a href="#">Kitchen and Catering Facility</a></li>
            </ul>           
        </li>
        <li><a href="#">Activities</a>
            <ul>
                <li><a href="#">The Katy Trail</a></li>
                <li><a href="#">Augusta</a></li>
                <li><a href="#">St. Louis Attractions</a></li>
            </ul>
        </li>
        <li><a href="#">Reservations</a>
            <ul>
                <li><a href="#">Rates</a></li>
                <li><a href="#">Contact</a></li>
                <li><a href="#">Request Info</a></li>
                <li><a href="#">Event Agreement Form</a></li>
             </ul>
           </li>
           <li><a href="#">FAQ</a>
            <ul>
                <li><a href="#">Additional Info</a></li>
                <li><a href="#">Catering</a></li>
            </ul>
           </li>
     </ul> 
```

# ms-access - NZ 无效使用 Null

> ID：14207992
> 
> 赞同：3
> 
> 时间：2013-01-08T03:59:09.957
> 
> 标签：ms-access, ms-access-2010

我有一个在 OnOpen 事件中打开的表单。部分事件包含以下代码：

```
nid = Val(DMax("id2", "claims", "yr =" & yr) + 1)
nid = Val(Nz([nid], 1)) 
```

但是，运行时出现“无效使用 Null”错误。有任何想法吗？

***在下面编辑*** 这是完整的代码：

```
Private Sub Form_Open(Cancel As Integer)
If Not IsNull(Me.OpenArgs) Then
Dim lngID As Long
Dim rs As Object

Set rs = Me.Recordset.Clone
lngID = Val(Me.OpenArgs)
rs.FindFirst "[ID] = " & lngID
If Not rs.EOF Then Me.Bookmark = rs.Bookmark
End If
Me.LOGID.SetFocus

'Display Suggested ID Numbers
Dim yr As Long
Dim nid As Long

yr = Format(Date, "yy")
nid = Val(DMax("id2", "claims", "yr =" & yr) + 1)
nid = Val(Nz([nid], 1))
Me.SugID = yr & "-" & nid

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T07:02:11.257

仔细检查表达式返回的值`DMax`。如果没有行匹配条件选项 ( `"yr =" & yr`)，`DMax`将返回 Null。或者如果`id2`在所有符合条件的行中为 Null，`DMax`将返回 Null。

如果`DMax`表达式返回 Null，则`Val()`表达式等价于：

```
Val(Null + 1) 
```

但是 Null + 1 会产生 Null，因此这与询问`Val(Null)`哪个触发错误 #94“无效使用 Null”相同。

我不确定你想要什么。如果`claims.id2`是数字数据类型，也许这会起作用：

```
nid = Nz(DMax("id2", "claims", "yr =" & yr), 0) + 1 
```

# java - 使用添加按钮java在文本字段中添加数字

> ID：14207994
> 
> 赞同：-1
> 
> 时间：2013-01-08T03:59:23.267
> 
> 标签：java, button, applet, awt, actionlistener

我正在尝试`textfield`使用小程序编写一个和一个按钮。主要问题是我似乎无法弄清楚如何添加多个数字，例如一个数字，然后点击添加按钮，然后点击数字，然后添加按钮并在相同的文本字段中显示总数，就像基本的计算器程序一样。这是我到目前为止所得到的：

```
import java.applet.Applet;
import java.awt.Button;
import java.awt.TextField;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class addition extends Applet implements ActionListener {
    TextField tf;
    Button btnAdd;
    Button btnEqual;
    Button btnExit;

    public addition() {
        tf = new TextField(15);
        btnAdd = new Button(" + ");
        btnEqual = new Button(" = ");
        btnExit = new Button("exit");
    }

    public void init() {
        add(tf);
        add(btnAdd);
        add(btnEqual);
        add(btnExit);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == btnAdd.getFocusListeners()) {
            tf.setText("text goes here");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:26:17.357

尝试

```
tf.repaint(); 
```

告诉组件使用新值再次布局。

这是编程中的经典失败。这仅对有效的数据绑定是自动的，例如当使用数据绑定设置表时。

**编辑：** 到目前为止，您的代码看起来不错，动作的来源是按钮本身而不是 FocusListener ：

```
@Override
public void actionPerformed(ActionEvent e) {
    if (e.getSource() == btnAdd) {
        tf.setText("text goes here");
        // create sum here (class variable, should be 0 at start)
        // update TF with new value
        // tell TF or Panel underneath to layout newly  
    }
    if (e.getSource() == btnEqual){
        // update value
        // layout newly
    }
} 
```

# gwt - 在超级开发模式下运行 MGWT 不会获取代码更改

> ID：14207995
> 
> 赞同：0
> 
> 时间：2013-01-08T03:59:26.583
> 
> 标签：gwt, mgwt, dev-mode, gwt-dev-mode, gwt-super-dev-mode

我正在为我们网站的新移动版本评估 MGWT。所以我下载了 MGWT 的展示项目并在我的 Eclipse 中进行了设置。我能够编译该项目并运行它。然后我尝试将展示设置为在超级开发模式环境中运行，这将有助于大大提高开发速度。我按照丹尼尔博客中的步骤操作：[http](http://blog.daniel-kurka.de/2012/07/mgwt-super-dev-mode.html) ://blog.daniel-kurka.de/2012/07/mgwt-super-dev-mode.html 。

一切都很好。我能够启动 Codeserver。打开应用程序时，我能够看到 Super Dev Mode 弹出窗口。我能够请求 Codeserver 重新编译，并且可以在控制台中看到编译消息。我还可以看到重新编译生成的 JS 文件。

但是，Codeserver 似乎没有接受我所做的更改。我尝试更改一个简单的文本，然后要求 Codeserver 重新编译，但重新编译后没有显示更改。当我检查新生成的 JS 文件时，我可以看到 Codeserver 仍然使用旧代码重新编译。

当我重新启动 Codeserver 时，更改已正确重新编译，我可以在应用程序中看到它们。

如果有人知道我可能做错了什么，请告诉我。我非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:28:45.860

碰巧找到了我自己的问题的解决方案：

[我没有像 Daniel 的说明](http://blog.daniel-kurka.de/2012/07/mgwt-super-dev-mode.html)那样将源文件夹添加到 Codeserver 运行配置的类路径中，而是使用**-src**参数将此源文件夹添加为命令行参数的一部分（有关更多信息，请参见[此处](https://developers.google.com/web-toolkit/articles/superdevmode)）。

因此 Codeserver 启动配置的参数字符串应如下所示：

```
-bindAddress <codeserver-ip-address> -src <gwt-source-path> <gwt-module-name> 
```

# php - 128 位 PHP 数据加密和解密

> ID：14207997
> 
> 赞同：2
> 
> 时间：2013-01-08T03:59:58.083
> 
> 标签：php, encryption

我有一个客户要求存储在 MySQL 数据库中的所有数据都使用 128 位加密进行加密。

假设在所有数据插入数据库之前，运行 PHP 函数对其进行加密。然后，当我从数据库中提取数据时，我运行一个解密函数来吐出原始文本/信息。

有人可以指出我正确的方向。我知道这些功能将使用共享/公共密钥来加密和解密，但是是什么使它成为 128 位？PHP中是否有执行此操作的预构建函数？

感谢任何建议。

斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:50:22.603

通常，“128 位加密”是指使用 128 位密钥的 [对称加密。](http://en.wikipedia.org/wiki/Symmetric-key_algorithm)[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard) -128 是加密算法的绝佳选择。

您还需要选择一种[操作模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)：如果您只需要隐私，CBC、CFB、OFB 和 CTR 都是不错的选择，但如果您还想保护数据不被篡改，则应该使用经过[身份验证的加密](http://en.wikipedia.org/wiki/Authenticated_encryption)模式，例如[EAX](http://en.wikipedia.org/wiki/EAX_mode) . 不要使用 ECB 模式，除非您的所有记录都短于单个 AES 块（也是 128 位），最好*不要*使用，即使它们是。

根据您选择的模式，您通常还需要为每条记录生成一个初始化向量 (IV)，它应该是一个唯一且不可预测的随机密码块（AES 为 128 位）。有很多方法可以生成一个，但有两种好的方法（[NIST 推荐](http://csrc.nist.gov/publications/nistpubs/800-38a/sp800-38a.pdf)）要么使用[加密安全伪随机数生成器](http://en.wikipedia.org/wiki/CSPRNG)的输出，要么在 ECB 模式下加密唯一 ID（这是可以的罕见情况之一使用）。根据您使用的加密库，它可能会为您解决这个问题。请注意，如果您曾经更改记录中的加密数据，您也应该始终更改 IV。

正如其他答案所指出的，如果您使用 PHP ， [mcrypt是加密库的不错选择。](http://php.net/manual/en/book.mcrypt.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T04:05:54.433

我希望[这](http://php.net/manual/en/book.mcrypt.php)是您的解决方案。在页面上引用两个函数`encrypt`并`decrypt`抓住这个想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T04:11:30.087

是的。您需要研究他们必须提到的用于加密的类/API。它们还取决于您使用的算法类型。请[点击此链接了解更多信息](http://www.coderelic.com/examples/AES_Encryption_Example.php)。[这是](http://www.ssa.gov/encryption.htm)关于加密的简要说明。您可以在[此处找到代码示例，](http://www.coderelic.com/examples/AES_Encryption_Example.php)但更推荐使用[mycrypt](http://de3.php.net/manual/en/ref.mcrypt.php)

# javascript - 如何在谷歌地图中自动打开特定标记的信息框？

> ID：14207999
> 
> 赞同：1
> 
> 时间：2013-01-08T04:00:06.163
> 
> 标签：javascript, google-maps, google-maps-markers

我想通过给定标记的 id 自动打开标记的信息框。

```
//Data of markers are from JSON
var markers = new google.maps.Marker({
      id: place.id,
      map: map,
      title:place.title,
      icon : 'assets/frontend/images/marker.png'
    });
infoWindow = new google.maps.InfoWindow();
infoWindow.open(map, markers); 
```

例如，假设我想打开 id = 243 的标记信息框

```
var marker_id = 243; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:43:43.407

您可以使用`google-maps-utility-library-v3`信息框，修改您的代码如下，如果您有多个标记并且根据标记需要多个信息框，您可以重复代码`infobox`，首先尝试单个标记，您可以有想法。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox.js"></script>
<script type="text/javascript" src="//maps.googleapis.com/maps/api/js?sensor=true&libraries=places"></script>
<script language="javascript">
//Data of markers are from JSON
$(document).ready(function(){   
            /*Your map code needs to be here*/
            /*Marker being created below*/
    var markers = new google.maps.Marker({
          id: place.id,
          map: map,
          title:place.title,
          icon : 'assets/frontend/images/marker.png'
        });

    var boxText = document.createElement("div");
      boxText.style.cssText = "border: 1px solid black; margin-top: 8px; background: yellow; padding: 5px;";
      boxText.innerHTML = "Your map info here";
      var myOptions_txtbox = {
         content: boxText
        ,disableAutoPan: false
        ,maxWidth: 0
        ,pixelOffset: new google.maps.Size(-140, 0)
        ,zIndex: null
        ,boxStyle: { 
          background: "url('tipbox.gif') no-repeat"
          ,opacity: 0.75
          ,width: "280px"
         }
        ,closeBoxMargin: "10px 2px 2px 2px"
        ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
        ,infoBoxClearance: new google.maps.Size(1, 1)
        ,isHidden: false
        ,pane: "floatPane"
        ,enableEventPropagation: false
            };
            /*Text box being created for marker `markers` */
    var infobox_new = new InfoBox(myOptions_txtbox);
            /*Created text box is assigned for marker `markers`. You can assign any event. For now, I have selected on `click` */
    google.maps.event.addListener(markers, "click", function (e) {
        infobox_new.open(map, this);
    });
});
    </script> 
```