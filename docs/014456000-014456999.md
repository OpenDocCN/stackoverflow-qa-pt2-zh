# StackOverflow 问答 14456000-14456999

# graph - 如何使用 BFS 在无向二部图中找到最短循环？

> ID：14456002
> 
> 赞同：0
> 
> 时间：2013-01-22T10:09:04.790
> 
> 标签：graph, cycle, breadth-first-search, bipartite, shortest

如何使用广度优先搜索在简单（非有向）二部图中找到最短循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:27:47.193

在二分图中，最短的圆至少有 4 条边长。由于您使用的是广度优先搜索，只要您相应地增加您的旅行距离，您就会很快找到最佳选择。所有可能的 4 条边长路径，所有可能的 5 条边长路径，依此类推。当您找到一条圆形路径时，您就完成了，它是最短的，或者至少与该奖品并列。

保持探索所有路径，以便在每个搜索循环中仅将这些路径增加 1 个边缘。并使用 BFS 确保您已经探索了所有路径。

# google-chrome - 我们能否检测到我们的 chrome 扩展程序是否崩溃了？

> ID：14456007
> 
> 赞同：1
> 
> 时间：2013-01-22T10:09:33.293
> 
> 标签：google-chrome, google-chrome-extension

我们已经构建了一个 chrome 扩展，它在一台机器上崩溃了几次。一旦我们将它部署到整个世界，我们想知道它是否在任何其他机器上崩溃。是否有任何 API 可以让我们检测崩溃并将其报告给我们？或者，如果用户为 chrome 启用了崩溃日志记录，Google 会传递报告吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:58:59.823

`chrome://crashes/`是记录崩溃 ID 等所有信息的地方。到目前为止，还没有用于检测 Chrome 崩溃的 API。

# matlab - 在 MATLAB 中计算组均值/中位数，其中组 ID 在单独的列中

> ID：14456009
> 
> 赞同：3
> 
> 时间：2013-01-22T10:09:41.483
> 
> 标签：matlab

我有一列包含每个参与者的组 ID。共有三组，因此该列中的每个数字都是 1、2 或 3。

然后我有第二列，其中包含每个参与者的响应分数。我想计算每个组内的平均/中值响应分数。

我已经设法通过遍历每一行来做到这一点，但我觉得这是一个缓慢且次优的解决方案。有人可以建议一种更好的做事方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-10T12:46:30.133

`grpstats`是一个很好的功能（[文档here](http://www.mathworks.co.uk/help/stats/grpstats.html?searchHighlight=grpstats)）

这是嵌入式统计信息的列表：

*   '意思' 意思
*   'sem' 均值的标准误
*   'numel' 非 NaN 元素的计数或数量
*   'gname' 组名
*   'std' 标准差
*   'var' 方差
*   'min' 最小值
*   '最大' 最大值
*   '范围' 范围
*   'meanci' 平均值的 95% 置信区间
*   'predci' 新观测值的 95% 预测区间

它也接受函数句柄（例如：`@mean`，`@skeweness`）

```
>> groups = [1 1 1 2 2 2 3 3 3]';
>> data   = [0 0 1 0 1 1 1 1 1]';
>> grpstats(data, groups, {'mean'})
ans =

    0.3333
    0.6667
    1.0000

>> [mea, med] = grpstats(data, groups, {'mean', @median})

mea =

    0.3333
    0.6667
    1.0000

med =

     0
     1
     1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:14:04.020

这是一个使用的好地方`accumarray`（[文档](http://www.mathworks.com/help/matlab/ref/accumarray.html)和[博客文章](http://blogs.mathworks.com/loren/2008/02/20/under-appreciated-accumarray/)）：

```
result = accumarray(groupIDs, data, [], @median); 
```

您当然可以给出矩阵的一行或一列，而不是一个名为的变量`groupIDs`和另一个 for `data`。如果您更喜欢平均值而不是中位数，请`@mean`用作第四个参数。

* * *

注意：文档指出，如果您需要依赖输出的顺序，您应该对输入参数进行排序。不过，我会把这个练习留到另一天。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:17:34.060

使用逻辑条件，例如假设您的数据在矩阵`m`中如下：第一个 col 是`ID`第二个 col 是响应分数，

```
mean(m(m(:,1)==1,2))
median(m(m(:,1)==1,2)) 
```

将为您提供`1`响应分数等的平均值和中位数

# jquery - 选择选项悬停进出jquery

> ID：14456016
> 
> 赞同：-1
> 
> 时间：2013-01-22T10:10:08.500
> 
> 标签：jquery

我有一个选择下拉菜单和一定数量的选项。

每当我将鼠标悬停在选项中时，我都想更改选项的颜色。

像：-当我将鼠标悬停在一个选项上时，颜色应该变成红色，当我悬停时，我应该再次透明。

它工作不正常。

JS

```
$("select").hover(function (e){
    var $target = $(e.target); 
    if($target.is('option')){
        $target.css('background-color', 'red');
    }
}); 
```

HTML

```
<select class="select1" size="8" >
 <option>Ajwa Finance Ltd. </option>
 <option>Ajwa Fun World & Resort Ltd. </option>
 <option>Akar Tools Ltd.</option>
 <option>Akasaka Electronics Ltd.</option>
 <option>Akash Agencies Ltd.</option>
 <option>Akash Agro Inds. Ltd.</option>
</select> 
```

请在这件事上给予我帮助

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T10:26:23.900

以下问题的答案将指导您实现这一目标。

一切顺利 ：）

[Html 在悬停时选择框选项？](https://stackoverflow.com/questions/4599975/html-select-box-options-on-hover)

# javascript - 如何在提交和键入时验证表单

> ID：14456017
> 
> 赞同：1
> 
> 时间：2013-01-22T10:10:11.540
> 
> 标签：javascript, jquery, ajax

我的表单在 keyup 上验证，但是当我尝试在提交时验证它时，我只是想不出该怎么做。

这是我的 HTML：

```
 <form action="#" method="post">                      
        <section class="col">   

            <section class="row">                   
                <label for="name">Name</label>
                <input type="text" name="name" value="" id="name" class="field validate-field valid-name" />                    
            </section>

            <section class="row">                   
                <label for="email">Email Address</label>
                <input type="text" name="email" value="" id="email" class="field validate-field valid-mail" />                  
            </section>

            <section class="row">                   
                <label for="phone">Phone Number</label>
                <input type="text" name="phone" value="" id="phone" class="field validate-field valid-phone" />                     
            </section>                  
        </section>

        <section class="col">               
            <label for="message">Message</label>
            <textarea class="field validate-field valid-text" name="message" id="message-field"></textarea>
            <input type="submit" value="Submit" class="submit-button" />
        </section>
   </form> 
```

JS：

```
function validate( field ){
    var value = field.val();
    var to_label = field.parent().find('label');
    var error = false;
    var error_message = '';

    to_label.find('span').remove();

    if ( field.hasClass('validate-field') && value == '' ) {
        error = true;
        error_message = 'Empty Field';  
    } else if ( field.hasClass('valid-name') && valid_name(value) == false ) {
        error = true;
        error_message = 'Name must consist characters only';
    } else if ( field.hasClass('valid-mail') && valid_email(value) == false ) {
        error = true;
        error_message = 'Invalid Email';
    } else if ( field.hasClass('valid-phone') && valid_phone(value) == false ) {
        error = true;
        error_message = 'Your phone must be digits only';
    };

    if ( error == true ) {
        to_label.append('<span>'+ error_message +'</span>');
    }
};

$('.validate-field').live('keyup', function(){
    validate( $(this) );
});

function valid_name(value){
    var valid = /^([a-zA-Z_\.\-\+])+$/;
    return valid.test(value);
};

function valid_email(value){
    var valid = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    return valid.test(value);
};

function valid_phone(value){
    var valid = /^[0-9-+]+$/;
    return valid.test(value); 
```

};

我必须添加这样的内容：

```
$('form').live('submit', function(){

    if ( "...validated..." ) {  
        $.post('send.php', $('form').serialize(), function(){
            alert('sent to PHP.');
        })  
    };
    return false;
}); 
```

提交功能应该是什么？

我努力了：

```
$('form').live('submit', function(){

    var valid = validate( $('.field') )

    if ( valid  == true ) { 
        $.post('send.php', $('form').serialize(), function(){
            alert('sent to PHP.');
        })  
    };
    return false;
}); 
```

但这会通过所有验证（电子邮件、电话...）验证所有表单。我已经尝试在`validation()`函数中添加`if (error == false){ return: true }`，然后在**提交函数**中运行`validation()`并添加`if ( validation() == true ){ .. to send php ..}`。那也没有用。我需要做什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:16:44.887

我想您可以通过以下方式验证整个表格：

```
function validateAll() {
    var valid = true;
    $('form').find('.validate-field').each(function (i, e) {
        if (!validate($(this))) {
           valid = false;
            return;
        }
    });
    return valid;
}

function validate( field ){
    var value = field.val();
    var to_label = field.parent().find('label');
    var error = false;
    var error_message = '';

    to_label.find('span').remove();

    if ( field.hasClass('validate-field') && value == '' ) {
        error = true;
        error_message = 'Empty Field';  
    } else if ( field.hasClass('valid-name') && valid_name(value) == false ) {
        error = true;
        error_message = 'Name must consist characters only';
    } else if ( field.hasClass('valid-mail') && valid_email(value) == false ) {
        error = true;
        error_message = 'Invalid Email';
    } else if ( field.hasClass('valid-phone') && valid_phone(value) == false ) {
        error = true;
        error_message = 'Your phone must be digits only';
    };

    if (error) {
        to_label.append('<span>'+ error_message +'</span>');
    }
    return !error;

};

$('form').live('submit', function(){

    if (validateAll()) {  
        $.post('send.php', $('form').serialize(), function(){
            alert('sent to PHP.');
        })  
    };
    return false;
}); 
```

在我看来，这是需要最少重构的选项。

让我解释一下这个函数的`validateAll`作用。它找到所有具有类的字段`validate-field`并将其作为参数传递给`validate`函数。由于我在其中进行的重构，如果该字段无效`validate`则返回`false`，所以当我们`validate`使用特定输入调用并且它无效时，我们只返回 false（表单无效）。

这是[JSfiddle](http://jsfiddle.net/mgechev/rb7kG/4/)中的一个示例。

对于更高级的验证，我可以向您推荐验证插件，例如：[http](http://docs.jquery.com/Plugins/Validation) ://docs.jquery.com/Plugins/Validation或[jqxValidator](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxvalidator/defaultfunctionality.htm?classic)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:18:44.367

你快完成了。只需添加以下代码，它会工作

```
$('form').submit(function(){
    var field = $(this).find('.validate-field');
    validate( field );
}); 
```

希望这能解决您的问题。

小提琴：http: [//jsfiddle.net/r1webs/cFeCx/](http://jsfiddle.net/r1webs/cFeCx/)

# java - 以 XML 格式导出 SQLite 表

> ID：14456033
> 
> 赞同：0
> 
> 时间：2013-01-22T10:11:02.987
> 
> 标签：java, android, xml, sqlite

**情况：**
我正在尝试将我的 SQLite 表导出到 XML 文件并遵循[这个答案](https://stackoverflow.com/a/2593752/1184579)以及[从这里删除](http://www.java2s.com/Open-Source/Android/App/and-bookworm/com/totsp/bookworm/data/DataXmlExporter.java.htm)的帖子和[这个问题](https://stackoverflow.com/questions/8567677/an-error-occured-while-executing-doinbackground)（显然两个最后一个链接来自同一作者:)）

**更新 2：**我已经有另一个名为的类`DBAdapter`扩展了`SQLiteOpenHelper`. 所以我有这个：

```
public DBAdapter(Context ctx) {
  this.context = ctx;
  DBHelper = new DatabaseHelper(context);
}
private static class DatabaseHelper extends SQLiteOpenHelper {
  DatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
  }
  /*...*/
  onCreate()
  /*...*/
  onUpgrade()
  /*...*/
} 
```

已经在我的 DBAdapter 类文件中。我怎样才能重用这个？

另外，我尝试传递为：

```
DataXmlExporter dm = new DataXmlExporter(SQLiteDatabase 
                           Database(getReadableDatabase ())); 
```

但还是报错。

**Update-1：**我使用第二个链接来实现我的解决方案。

**问题：**我得到一个空指针异常；我猜是因为我没有正确初始化我的对象。
在调用 DataXmlExporter / exportData 方法时，作为参数提供了什么？:
`DataXmlExporter dm = new DataXmlExporter(WHAT_IS_PASSED_HERE?);`

谢谢。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:19:22.323

您需要传递 SQLiteDatabase 数据库（ getReadableDatabase () ）：

根据构造函数

```
public DataXmlExporter(final SQLiteDatabase db) {
  this.db = db;
} 
```

根据评论：Android DataExporter 允许传入的 SQLiteDatabase 以 XML 格式导出到外部存储（SD 卡）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:16:09.990

看起来你需要一个`SQLiteDatabase`.

例如，你可以得到一个 with[`getReadableDatabase()`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getReadableDatabase%28%29)或 with [`getWritableDatabase()`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getWritableDatabase%28%29)。

如果您`DatabaseAssistant`像在您提供的第一个链接中那样实现，则作为构造函数参数，您可以引用`SQLiteDatabase`....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:14:37.810

我所做的是扩展类`SQLiteOpenHelper`内部`DatabaseAssistant`并使用它。

# oop - OOP：类继承仅添加一个属性与构造函数参数

> ID：14456035
> 
> 赞同：0
> 
> 时间：2013-01-22T10:11:15.757
> 
> 标签：oop, inheritance, language-agnostic

我是 OOP 的新手，我处于以下情况：我有一个类似报告“引擎”的东西，用于多个报告，唯一需要的是配置文件的路径。

我将用 Python 编写代码，但这是一个不可知的问题。所以，我有以下两种方法

**A)**类 ReportEngine 是一个抽象类，除了配置文件的路径之外，它具有所需的一切。这样你只需要实例化 ReportX 类

![在此处输入图像描述](../Images/b0b0b8c148414dc749b89c8a62b809a3.png)

```
class ReportEngine(object):
    ...

class Report1(ReportEngine):
    _config_path = '...'

class Report2(ReportEngine):
    _config_path = '...'

report_1 = Report1() 
```

**B)**类 ReportEngine 可以通过配置文件路径实例化

```
class ReportEngine(object):
    def __init__(self, config_path):
        self._config_path = config_path
    ...

report_1 = ReportEngine(config_path="/files/...") 
```

哪种方法是正确的？万一这很重要，报表对象将被插入到另一个类中，使用组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:28:48.407

恕我直言，如果您需要实现彼此不同的报表引擎，**A)方法会更好。**如果您的报告使用不同的逻辑填充，请遵循此方法。

但是，如果您的报告引擎之间的唯一区别是`_config_path`我认为**B)**方法适合您。显然，通过这种方式，您将有一个共享逻辑来构建每个报告，而不管报告类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:36:05.267

一般来说，将*每个*Report 具有的所有内容都放在超类中。将特定的东西放在子类中。

因此，在您的情况下，将 放在**B)**`_config_path`中的超`ReportEngine`类中（因为*每个*Report 都有一个），但是像**A**中那样实例化特定的 Reports ，而每个 Report 都可以设置自己的路径。***`_config_path`***

 *****我不了解 Python，但快速搜索了*Python 3.0+*的正确语法，我希望它有意义：

```
class ReportEngine(object):
    def __init__(self, config_path):
        self._config_path = config_path

    def printPath(self):
        print self._config_path
    ...

class Report1(ReportEngine):
    def __init__(self):
        super().__init__('/files/report1/...') 
```

然后一个

```
reportObj = Report1()
reportObj.printPath() 
```

应该打印

```
'/files/report1/...' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:25:05.960

基本上主要区别在于方法 A 比 B 更灵活（在一个报告中不相互更改不会影响其他报告），而 B 更简单、更清晰（准确显示差异在哪里）但影响一种报告类型的更改需要更多的工作。如果您非常确定报告不会及时更改 - 选择 B，如果您觉得未来不会出现差异 - 选择 A。*****

# c - 将结构文字作为函数参数传递的麻烦

> ID：14456043
> 
> 赞同：7
> 
> 时间：2013-01-22T10:11:34.553
> 
> 标签：c

请看看这个程序

```
#include<stdio.h>
#include<string.h>

typedef struct hs_ims_msrp_authority
{
   int     host_type;
   char    buf[50];
   int     port;
}hs_i;

int main()
{
 char dom[50];
 int i = 10, j = 20;
 strcpy(dom, "ine");
 fun((hs_i){i, dom, j});   // doesnt work
 fun((hs_i){i, "dom", j}); // this works
}

int fun(hs_i c)
{
 printf("%d %s %d\n", c.host_type, c.buf, c.port);
} 
```

调用 main 中的 fun 函数；当传递字符串文字（“dom”）时函数调用如何工作，而当传递数组变量（dom）时它不起作用？

为了使变量起作用，它应该以特定的方式进行类型转换吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T10:25:24.263

复合文字的存在让人分心，错误的原因是尝试`char[]`用另一个`char[]`数组初始化 a。以下是非法的：

```
char dom[50] = "test";
char dom1[50] = dom;  /* Line 16, the cause of the error. */ 
```

并且clang报告以下错误：

> main.c:16:10：错误：数组初始化程序必须是初始化程序列表或字符串文字

*第6.7.8*节C99 标准的初始化中的第 14 点指出：

> 字符类型的数组可以由字符串字面量初始化，可选地用大括号括起来。字符串文字的连续字符（如果有空间或数组大小未知，则包括终止的空字符）初始化数组的元素。

因此，允许使用字符串文字进行调用，因为使用字符串文字`"dom"`初始化数组是合法的，但`char[]`不允许使用 调用。

可能的解决方案：

*   将类型更改`buf`为`const char*`
*   将成员包装`buf`在 a`struct`中，使其能够被复制。例如：

    ```
    struct char_array
    {
        char data[50];
    };

    typedef struct hs_ims_msrp_authority
    {
        int     host_type;
        struct char_array buf;
        int     port;
    } hs_i;

    struct char_array dom = { "ine" };
    int i = 10, j = 20;

    fun((hs_i){i, dom, j});
    fun((hs_i){i, { "dom" }, j});
          /* Note ^       ^ */ 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:17:02.220

在这种情况下，

```
fun((hs_i){i, dom, j}); 
```

您只是将指针传递给字符串。换句话说，你只是通过

`&"ine"[0]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:19:55.667

首先，您需要转发声明您的函数：

```
 fun(hs_i c) 
```

其次，您需要为您的结构创建存储，因此您将需要某种临时变量。

```
 hs_i temp = { i, NULL, j };
 strcpy(temp.buf, "ine")
 fun(temp); 
```

或作为单个变量传递给您的函数：

```
 fun(int host_type, char *buf, int port);

....
 fun(10, "ine", 20); 

.....

int fun(int host_type, char *buf, int port)
{
 printf("%d %s %d\n", host_type, buf, port);
} 
```

# java - 最接近 20 的整数值

> ID：14456047
> 
> 赞同：6
> 
> 时间：2013-01-22T10:11:42.983
> 
> 标签：java, division

如果我有一个大于 20 的数字，但它可以除以 2 而没有任何余数，我想确定哪个数字最接近 20。例如：

对于 2048 年，除以 2 足够的倍数将使我得到 16，这是我能得到的最接近 20。如果数字是 800，则最接近的是 25。

我可以编写一个循环，然后继续划分和比较范围并选择最接近的值。有没有更简单的方法，可能是通过移位？

编辑：当我说它除以 2 时，我的意思是它也一直除以 2。70 的数量只能平均分成 35。像 2048 或 1024 这样的数字将一直平分到 2。

样本编号：2048、1920、1600、1536、1080..640、352、320、176。这些是来自相机的典型图像尺寸。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T10:22:50.823

如果您输入的数字是`x`，我认为您想要`x/2^[(log x/14)/log 2]`，假设您希望您的目标数字在区间内`[14,27]`。

在 java 代码中，`Math`的`log`函数会派上用场（尽管以 2 为底的对数会更好），并且您还需要整数转换（或者以某种方式找到小于 中的表达式的最大整数`[]`）。

这是做什么的：让`x`成为您的输入并`y`成为您想要找到的数字。然后，`x=y*2^n`对于尚未未知`n`的，while`y`大约是 20（见上文）。显然，`n`是 的以 2 为底的对数`x/y`。现在，如果你选择最小的`y`，调用它`y'`，以 2 为底的对数的整数部分`x/y'`仍然是`n`我们正在寻找的，除非`x/y'`相差`x/y`超过 2 倍，假设重复除以 2 它不能。因此，我们有`n`和`y=x/2^n`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:38:53.347

您实际上想要修剪所有尾随零位，直到您有一个大于 13 的数字。

另一种方法是修剪所有零，如果结果太小，则将它们添加回来。

```
public static long func(long num) {
    if (num <= 26) return num;
    long trimZeros = num >>> Long.numberOfTrailingZeros(num);
    while(trimZeros <= 13) trimZeros <<= 1;
    return trimZeros;
} 
```

26 比 13 更接近 20，但 14 比 28 更接近 20。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:28:54.237

如果您想使用移位，可以从以下内容开始：

```
public static int func2(int val) {
    int min = Integer.MAX_VALUE;
    int close = 0;
    while (val > 1) {
        val = val >>> 1;
        if (Math.abs(val - 20) < min) {
            min = Math.abs(val - 20);
            close = val;
        }
    }
    return close;
}

public static void main() {
    for ( int i : new int []{2048, 1920, 1600, 1536, 1080, 640, 352, 320, 176}) {
       System.out.println( i + " -> " + func2( i ));
    }
} 
```

印刷

```
2048 -> 16
1920 -> 15
1600 -> 25
1536 -> 24
1080 -> 16
640 -> 20
352 -> 22
320 -> 20
176 -> 22 
```

# c - Perl 的解释器是用 C 编写的，但与 C 相比，perl 的字符串匹配速度更快

> ID：14456048
> 
> 赞同：1
> 
> 时间：2013-01-22T10:11:44.957
> 
> 标签：c, perl

Perl 的解释器是用 C 编写的，但与 C 相比，perl 的字符串匹配速度更快。如果我错了，有人可以纠正我。如果这是事实可以解释吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T10:17:11.873

Perl 确实是用 C 编写的（我想也是用 Perl 编写的）。

C 没有字符串匹配能力，所以它不可能比 Perl 慢（或快）。当然，您可以在 C 中编写一个字符串匹配库并将其与 Perl 中的字符串匹配进行比较，但是您无法比较 C，因为 C 没有。

* * *

demerphq（Perl 的正则表达式引擎专家之一）最近回复了“P5 RE 与其他语言的其他 RE 相比的速度（我不会定义）是多少？” 具有以下内容：

> 这是一个棘手的问题。我的一般经验是，某些正则表达式引擎对某些模式的匹配速度更快，但许多正则表达式引擎*无法*匹配得更慢，通常慢得多，并且实际上 perls 引擎具有竞争力或优于许多其他引擎。所以你必须非常小心这方面的基准测试，很多人只看成功案例，Perl 通常比较慢。这是一个经过深思熟虑的设计决定，在许多情况下，模式匹配失败的次数多于匹配的次数，通常我们会尝试快速失败。
> 
> 使这种比较变得棘手的另一个主题是 Perls 正则表达式引擎具有非常丰富的功能集，而其他引擎经常以功能换取性能。Perls 正则表达式引擎具有非常好的 unicode 支持，您经常会发现其他引擎不支持这种支持（通常这是尽管他们声称。）
> 
> 这种东西的一个例子是 Perl 使用的“强制子串”逻辑。引擎将在模式中找到最长的字符串，该字符串必须存在才能使模式匹配。然后我们使用 Fast-Boyer-Moore (FBM) 匹配来确定字符串是否存在。如果没有，那么我们永远不会启动正则表达式引擎。这意味着理论上 Perl 可以比真正的 DFA 更快地拒绝一个模式，而且实际上它经常这样做。DFA 通常需要对长度为 N 的字符串执行 N 次操作，FBM 可以进行最佳情况 N/L 检查，其中 N 是字符数，L 是强制字符串的长度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T10:31:33.773

Perl 的字符串匹配代码不必使用 C 的（少数）字符串处理库函数。因此它不受C库实现者算法选择的限制，它可以做出自己的决定。

我想我的答案是 Perl 的字符串匹配没有理由不应该比给定的 C 实现更快，只是因为 Perl 是用 C 实现的。我不知道它是否真的更快*。*

# c# - 如何在 C# (web) 中集中维护一个数学公式，以便在需要时对其进行更改？

> ID：14456049
> 
> 赞同：14
> 
> 时间：2013-01-22T10:11:45.580
> 
> 标签：c#, javascript, configuration

我们有一个应用程序，它在页面上有很多数学检查，根据它，给用户一个红绿灯（红、绿、黄）。

绿色 = 他可以继续
红色 = 不要让他继续
黄色 = 允许继续但警告

这些公式对页面上的各种文本字段进行操作。因此，例如，如果 textbox1 有“10”而 texbox2 有“30”......公式可能是：
**T1 * T2 > 600 ？“绿色”：“红色**”

我的问题是：
是否有可能以某种方式集中这些公式？

为什么我需要它？
现在，如果公式有任何更改，我们也必须在服务器端复制更改（违反 DRY，代码难以维护）

一种选择可能是
- 将（简单）公式存储为带有占位符的文本在配置（？）中
- 用 javascript 中的值以及服务器端代码替换占位符
- 在 JS 中使用 eval() 进行计算
- 使用概述的技巧[这里](https://stackoverflow.com/questions/333737/c-sharp-evaluating-string-342-yield-int-18)是 C#

在这种方法中，问题*可能*是 JS 和 C# 中相同数学字符串的不同解释。

我有道理还是应该报告这个问题？！:P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:42:22.437

根据您的应用程序的要求，只在服务器上进行所有验证可能是可以接受的。特别是如果您的用户很少或大多数用户都在相当快的 Intranet 上，您可以“浪费”一些网络调用来省去维护上的麻烦。

如果用户想要在每个字段条目（或每隔几个条目，或每隔几秒）之间获得反馈，您可以使用 AJAX 调用来请求服务器进行验证，而无需刷新整个页面。

当然，这将导致比完全在客户端上进行验证更多的请求，并且如果您的许多用户的网络连接不良，则在向他们提供反馈时可能会有延迟。我的猜测是总带宽使用量大致相同。您在每次验证往返时都使用一些，但这些都很小。您不会发送给客户端的所有验证 JS 可能会超过它。

主要好处是维护和 FUD，否则您将保持客户端和服务器验证同步。不必编写验证 javascript 也可以节省时间。

无论如何，可能值得退后一步，询问您的要求是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:36:41.803

[Microsoft.CSharp.CSharpCodeProvider](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)提供程序可以即时编译代码。特别是，请参阅[CompileAssemblyFromFile](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.compileassemblyfromfile.aspx)。

例如，这将允许您在运行时从 web.config 执行代码；但是请谨慎使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T07:26:01.993

您可以编写 C# 类来使用 Expression、Value、BooleanExpr 等类对表达式进行建模（抽象语法树）

例如

```
Expression resultExpression = new ValueOf("T1").Times(new ValueOf("T2")).GreaterThan(600).IfElse("RED","GREEN")
                                    ^Variable              ^Variable        ^Value=>BoolExpr   ^(Value, Value) => Value 
```

然后可以使用这些表达式在 C# 中进行评估并发出用于检查的 Java 脚本：

```
String result = resultExpression.bind("T1", 10).bind("T2",20).evaluate() //returns "RED"
String jsExpression resultExpression.toJavaScript // emits T1 * T2 > 600 ? "RED" : "GREEN" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:51:46.423

您可以创建一个低级计算器类，该类使用字符串作为输入并将事物推送和弹出到堆栈中。查找“**逆波兰计算器**”。如果您使用的输入数量没有改变，这将是一种非常巧妙的方式来存储您的方程。您将能够非常轻松地将它们存储在文本文件或配置文件中。

例如：

```
string Equation = "V1,V2,+";

string ParseThis = Equation.Replace("V1", "34").Replace("V2", "45");

foreach(string s in ParseThis.split(',')) {
   if (s == "+") {
     val1 = stack.Pop();
     val2 = stack.Pop();
     return int.parse(val1) + int.Parse(val2);
   }
   else {
     stack.Push(s);
   }
} 
```

显然，使用不同的方程式会变得更加复杂，但它可以让您将方程式存储为您想要的任何地方的字符串。

如果任何语法不正确，我们深表歉意，但这应该会让您朝着正确的方向前进。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T16:41:57.590

最简单的解决方案是在 C# 服务器端实现一次公式，并在进行更改时使用 AJAX 评估来自客户端的表达式。这可能会减慢页面速度。

如果您希望在客户端和服务器端评估公式但只编写一次，那么我认为您需要执行以下操作：

*   将公式拉到一个单独的类中
*   对于客户端：
    *   [将类编译为 Javascript](https://stackoverflow.com/questions/7667327/best-c-sharp-to-javascript-translator)
    *   调用 javascript 版本，从 DOM 传入值
    *   使用公式的结果更新 DOM
*   对于服务器端：
    *   调用公式类，传入表单数据中的值（或控件，如果这是网络表单）
    *   使用公式的结果采取必要的行动

.. 或者您可以反过来，用 Javascript 编写公式，然后使用[C# Javascript 引擎](https://stackoverflow.com/questions/4744105/parse-and-execute-js-by-c-sharp)在服务器端评估该代码。

正如其他一些答案所建议的那样，我不会花时间编写自定义表达式语言，或编写将 C# 转换为 Javascript 的代码。如我链接到的问题所示，这些已经存在。这会分散您对业务问题的注意力。我会找到一个适合并从其他人的工作中受益的现有解决方案。

# android - 按下后退按钮并在 android 模拟器上崩溃时，Android 应用程序变得无响应

> ID：14456054
> 
> 赞同：1
> 
> 时间：2013-01-22T10:12:06.363
> 
> 标签：android, android-activity, intentservice

我的应用程序由两个活动组成。在第一个活动中，从用户那里获取一些输入并通过意图传递给第二个活动。第二个活动启动两个`IntentServices`来执行一些长时间运行的后台任务。我有一个停止服务的**停止**按钮。当我在停止服务后尝试按下后退按钮时，之前的活动会加载，但应用程序变得无响应并关闭。我试图通过查看此站点上的建议来解决问题，但问题仍然存在。

**从第一个开始第二个活动的代码**

```
Intent intent = new Intent(ConnectActivity.this, MessageActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
intent.putExtra("ip", ip);
intent.putExtra("port", port);
intent.putExtra("tcpport", tcpport);
intent.putExtra("tcpip", tcpip);
intent.putExtra("packetType", PT);
startActivity(intent); 
```

**`backButtonPressed()`来自第二个活动的代码**

```
public void onBackPressed() {
    if(UdpSendService.send)
    while(!endTransmission());
    //Intent intent = new Intent(this, ConnectActivity.class);
    //intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
    //startActivity(intent);
    finish();
    //super.onBackPressed();
} 
```

**`endTransmission()`方法_**

```
boolean endTransmission() {
    UdpSendService.send=false;
    if(receiver1!=null && receiver2!=null){
        unregisterReceiver(receiver1);
        unregisterReceiver(receiver2);
        receiver1=null;
        receiver2=null;
    }
    while(stopService(udpReceiveIntent)!=true);
    System.out.println("\nreceive service stopped");
    while(stopService(udpServiceIntent)!=true);
    System.out.println("\nsend service stopped");
    return true;
} 
```

**日志猫：**

```
01-22 15:18:39.893: E/ActivityManager(162): ANR in com.example.udpmessageclient (com.example.udpmessageclient/.ConnectActivity)
01-22 15:18:39.893: E/ActivityManager(162): Reason: keyDispatchingTimedOut
01-22 15:18:39.893: E/ActivityManager(162): Load: 1.39 / 1.05 / 0.66
01-22 15:18:39.893: E/ActivityManager(162): CPU usage from 12723ms to 0ms ago:
01-22 15:18:39.893: E/ActivityManager(162):   63% 162/system_server: 53% user + 9.6% kernel / faults: 593 minor
01-22 15:18:39.893: E/ActivityManager(162):   35% 1467/com.example.udpmessageclient: 27% user + 7.9% kernel / faults: 44 minor
01-22 15:18:39.893: E/ActivityManager(162):   0.1% 293/com.android.phone: 0.1% user + 0% kernel / faults: 4 minor
01-22 15:18:39.893: E/ActivityManager(162): 99% TOTAL: 82% user + 17% kernel
01-22 15:18:39.893: E/ActivityManager(162): CPU usage from 3151ms to 3707ms later:
01-22 15:18:39.893: E/ActivityManager(162):   58% 162/system_server: 47% user + 10% kernel
01-22 15:18:39.893: E/ActivityManager(162):     9% 334/Binder_3: 9% user + 0% kernel
01-22 15:18:39.893: E/ActivityManager(162):     7.2% 173/Binder_1: 5.4% user + 1.8% kernel
01-22 15:18:39.893: E/ActivityManager(162):     7.2% 174/Binder_2: 7.2% user + 0% kernel
01-22 15:18:39.893: E/ActivityManager(162):     5.4% 162/system_server: 3.6% user + 1.8% kernel
01-22 15:18:39.893: E/ActivityManager(162):     5.4% 195/InputDispatcher: 1.8% user + 3.6% kernel
01-22 15:18:39.893: E/ActivityManager(162):     5.4% 336/Binder_4: 3.6% user + 1.8% kernel
01-22 15:18:39.893: E/ActivityManager(162):     5.4% 367/Binder_5: 5.4% user + 0% kernel
01-22 15:18:39.893: E/ActivityManager(162):     5.4% 374/Binder_6: 5.4% user + 0% kernel
01-22 15:18:39.893: E/ActivityManager(162):     5.4% 380/Binder_7: 3.6% user + 1.8% kernel
01-22 15:18:39.893: E/ActivityManager(162):     5.4% 383/Binder_8: 3.6% user + 1.8% kernel
01-22 15:18:39.893: E/ActivityManager(162):   39% 1467/com.example.udpmessageclient: 28% user + 10% kernel / faults: 2 minor
01-22 15:18:39.893: E/ActivityManager(162):     35% 1467/dpmessageclient: 25% user + 10% kernel
01-22 15:18:39.893: E/ActivityManager(162): 100% TOTAL: 78% user + 21% kernel
01-22 15:18:43.783: E/InputDispatcher(162): channel '4119ec38 com.example.udpmessageclient/com.example.udpmessageclient.ConnectActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
01-22 15:18:43.853: E/InputDispatcher(162): Received spurious receive callback for unknown input channel.  fd=187, events=0x9
01-22 15:21:45.544: E/Trace(1523): error opening trace file: No such file or directory (2)
01-22 15:21:46.265: E/ActivityThread(278): Failed to find provider info for com.android.inputmethod.latin.dictionarypack
01-22 15:21:46.265: E/BinaryDictionaryGetter(278): Could not find a dictionary pack
01-22 15:21:46.355: E/ActivityThread(278): Failed to find provider info for com.android.inputmethod.latin.dictionarypack
01-22 15:21:46.355: E/BinaryDictionaryGetter(278): Could not find a dictionary pack 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:49:29.790

而（！endTransmission（））；

看起来更危险，因为这个循环锁定了 ui 线程。您的活动花了太长时间才对 Android 操作系统说“嘿，我还活着”！（这就是 UI 线程所做的）。

[应用响应时间](http://developer.android.com/guide/practices/design/responsiveness.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:17:28.723

可能是您的问题出在这部分代码中：

```
public void onBackPressed() {
    if(UdpSendService.send)
    while(!endTransmission());
    //Intent intent = new Intent(this, ConnectActivity.class);
    //intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
    //startActivity(intent);
    finish();
    //super.onBackPressed();
} 
```

您在 while 循环中花费了足够多（很少太多）的时间，因为它会阻塞 UI 线程以使您的应用程序无响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:31:43.220

将过程延迟 1 秒，而不是使用 while。使用处理程序 postdelay 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T10:40:27.573

应用程序不应阻塞主线程超过 5 秒。使用线程和处理程序使您的应用程序更具响应性。 [http://developer.android.com/training/articles/perf-anr.html](http://developer.android.com/training/articles/perf-anr.html)

# python - python检测文档中的图像

> ID：14456057
> 
> 赞同：0
> 
> 时间：2013-01-22T10:12:08.547
> 
> 标签：python, apache-tika

如何检测文档中的图像，例如 doc、xls、ppt 或 pdf ？

我遇到了 Apache Tika，我正在尝试命令行选项。[http://tika.apache.org/1.2/gettingstarted.html](http://tika.apache.org/1.2/gettingstarted.html)

我正在使用 Python2.7 ..

但不太确定它将如何检测图像。

我是 Django 的新手，感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T14:42:47.873

这个线程很旧，我正在恢复它，因为现在有各种解决方案来解决这个问题。tika 的开发人员之一 Chris Mathamm 为 tika 进行了 python 集成，它使用 JCC 库的 c++ 绑定来访问 jvm 并运行 tika。你可以在[这里](https://github.com/cruns/python-tika-with-deps)找到。

还有一个[使用门户转换的 Plone 的 Apache Tika 集成。](https://pypi.python.org/pypi/ftw.tika/1.1.1) 它使用 tika-jaxrs 服务器来解析文档。

# cocoa-touch - 如何交换 2 UIWebView

> ID：14456062
> 
> 赞同：0
> 
> 时间：2013-01-22T10:12:15.910
> 
> 标签：cocoa-touch, uiwebview, uikit

是否可以交换 2 个 UIWebView，就像我需要交换 UIWebView* currentView 和 UIWebView* nextView 的地址一样？是否可以？？主要问题是 UIWebView 不符合 NSCopying 协议。所以可以换吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:19:43.900

如果通过交换你的意思是：

```
UIWebView* temp = firstWebView;
firstWebView = secondWebView;
secondWebView = temp; 
```

这是完全合法的，因为它不需要复制 Web 视图，只需要复制它们的指针。

# html - 如何在不使用表格的情况下在两列中布置三个 div？

> ID：14456063
> 
> 赞同：1
> 
> 时间：2013-01-22T10:12:15.740
> 
> 标签：html

我需要以下 div 布局：

```
+-----------+-----------+
|           |           |
|   Div A   |           |
|           |           |
|           |           |
+-----------+   Div C   |
|           |           |
|    Div B  |           |
|           |           |
|           |           |
+-----------+-----------+ 
```

我努力搜索，但我发现很多关于将 div 放在两列中的类似问题（如[this](https://stackoverflow.com/questions/6748178/simple-2-column-div-layout)和[this](https://stackoverflow.com/questions/144375/2-column-layout-in-css)）。似乎没有人处理这个确切的问题。

我已经尝试使用`float:left`and `clear:both`，但我无法到达任何地方。

显然它可以使用表格来实现，但是使用表格进行布局不是坏习惯。可以不做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:15:35.660

这应该工作

```
<div style="width:100%">
<div id="topLeft" style="float:left; width:50%; height:200px">
</div>
<div id=topRight style="float:right; width:50%; height:400px">
</div>
<div id="bottomLeft" style="float:left; width:50%; width:200px">
</div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:18:40.483

如果它们不必按该顺序排列，则应该可以：

**HTML**

```
<div id="container">    
    <div id="div3"></div>
    <div id="div1"></div>
    <div id="div2"></div>
</div> 
```

**CSS**

```
#container {
    width:200px;
}

#div1, #div2 {
    width: 100px;
    height: 100px;
    float: left;
    clear: left;
}

#div3 {
    height: 200px;
    width: 100px;
    float: right;
}

#div1 {
    background-color: red;
}

#div2 {
    background-color: blue;
}

#div3 {
    background-color: green;
} 
```

jsfiddle - [http://jsfiddle.net/3UTcP/](http://jsfiddle.net/3UTcP/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:19:23.217

```
<div>
    <div id="AB-Wrapper" style="float:left;width:50%;">
        <div id="DivA">some content</div>
        <div id="DivB">some more content</div>
    </div>
    <div id="DivC" style="float:right;width:50%;">even more content</div>
    <div style="clear:both;"><!-- clearer --></div>
</div> 
```

[http://jsfiddle.net/xREQK/](http://jsfiddle.net/xREQK/)

# java - java中的定时器和定时器任务

> ID：14456064
> 
> 赞同：4
> 
> 时间：2013-01-22T10:12:16.827
> 
> 标签：java

我想每天晚上 5 点使用 Java Timer 和 TimerTask 做作业。请帮我解决这个问题。

我认为以下方法存在问题...

```
schedule(TimerTask task, Date time) 
```

----日期可以指定为第一天，但​​不能指定未来几天。

```
schedule(TimerTask task, Date firstTime, long period) 
```

----可以给出初始开始时间和执行多长时间，这里如果我在晚上 4 点开始我的调度程序，那么如何提及下一个执行时间。如果我设置 1 小时延迟，它将每隔一小时调用一次。

```
schedule(TimerTask task, long delay) 
```

--这不适用，它将根据开始时间做事。

```
schedule(TimerTask task, long delay, long period) 
```

--这不适用，它将根据开始时间做事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:17:01.720

我建议您改用[Quartz Cron Trigger](http://quartz-scheduler.org/documentation/quartz-2.1.x/examples/Example3)，它非常轻巧且易于使用

```
SchedulerFactory sf = new StdSchedulerFactory();
Scheduler sched = sf.getScheduler();
//Job1 is scheduled to run everyday evening at 5 O' clock

JobDetail job = newJob(SimpleJob.class)
    .withIdentity("job1", "group1")
    .build();

CronTrigger trigger = newTrigger()
    .withIdentity("trigger1", "group1")
    .withSchedule(cronSchedule("0 0 17 * * ?"))
    .build();

sched.scheduleJob(job, trigger); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:33:32.937

尝试

```
 Calendar c = Calendar.getInstance();
    c.clear(Calendar.MILLISECOND);
    c.clear(Calendar.MINUTE);
    c.clear(Calendar.SECOND);
    if (c.get(Calendar.HOUR_OF_DAY) > 17) {
        c.add(Calendar.DATE, 1);
    }
    c.set(Calendar.HOUR_OF_DAY, 17);
    Date firstTime = c.getTime();
    new Timer().scheduleAtFixedRate(task, firstTime, 24 * 3600 * 1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:50:22.047

好吧，更合适的答案是 Grooveek 的答案，但作为替代

```
import java.awt.Toolkit;
import java.util.Date;
import java.util.Timer;
import java.util.TimerTask;
public class demo 
{
  Toolkit toolkit;
  Timer timer;
  public demo()
  {
    toolkit = Toolkit.getDefaultToolkit();
    timer = new Timer();
    timer.schedule(new scheduleDailyTask(), 0, //initial delay
        1 * 1000); //subsequent rate
  }
  class scheduleDailyTask extends TimerTask 
  {
    public void run() 
    {
      Date date = new Date();
      if(date.getHours()==5 && date.getMinutes()==0 && date.getSeconds()==0)
      {
          System.out.println("its 5 O clock");
          System.out.println("run the daily schedule method now");
      }
    }
  }
  public static void main(String args[]) {
    new demo();
  }
} 
```

# php - 狮身人面像不从结果中返回 ID

> ID：14456065
> 
> 赞同：0
> 
> 时间：2013-01-22T10:12:24.930
> 
> 标签：php, linux, sphinx

我有 Sphinx 正在运行，我可以搜索（YAY），但是当我得到结果时，我的选择的 id 不存在，这是我的 sphinx.conf：

```
source willem
{
type                            = mysql
sql_host                        = localhost
sql_user                        = root
sql_pass                        = ********
sql_db                          = test
sql_port                        = 3306

sql_query       = SELECT id, question, answer, UNIX_TIMESTAMP(created) AS date_added FROM faq

sql_attr_timestamp  = date_added

sql_ranged_throttle = 0

# document info query, ONLY for CLI search (ie. testing and debugging)
sql_query_info      = SELECT id, question, answer, UNIX_TIMESTAMP(created) AS date_added FROM faq WHERE id = $id
}

index willem {
source = willem
path = /home/willem/sphinx
morphology = stem_en
min_word_len = 3
min_prefix_len = 0
}

searchd {
compat_sphinxql_magics = 0
port = 3313
log = /home/willem/searchd.log
query_log = /home/willem/query.log
pid_file = /home/willem/searchd.pid
max_matches = 10000
} 
```

这是我的 PHP 代码：

```
$this->load->library('SphinxClient');
    $this->sphinxclient->SetServer('localhost', 3313);
    //$this->sphinxclient->SetLimits(10, 10);
    $this->sphinxclient->SetMatchMode( SPH_MATCH_ANY );
    $this->sphinxclient->SetSortMode( SPH_SORT_RELEVANCE );
    //$this->sphinxclient->SetWeights ( array ( 100, 1 ) );
    $res = $this->sphinxclient->Query('contact', 'willem');
    $error = $this->sphinxclient->GetLastError();
    var_dump($res);var_dump($error); 
```

这是结果：

```
array(10) {
["error"]=>
string(0) ""
["warning"]=>
string(0) ""
["status"]=>
int(0)
["fields"]=>
array(2) {
[0]=>
string(8) "question"
[1]=>
string(6) "answer"
}
["attrs"]=>
array(1) {
["date_added"]=>
int(2)
}
["matches"]=>
array(1) {
[6]=>
array(2) {
  ["weight"]=>
  string(1) "2"
  ["attrs"]=>
  array(1) {
    ["date_added"]=>
    int(0)
  }
}
}
["total"]=>
string(1) "1"
["total_found"]=>
string(1) "1"
["time"]=>
string(5) "0.000"
["words"]=>
array(1) {
["contact"]=>
array(2) {
  ["docs"]=>
  string(1) "1"
  ["hits"]=>
  string(1) "3"
}
}
}
string(0) "" 
```

所以我得到了结果，但不是 id 字段，我需要它来从我们的数据库中获取找到的字段。

提前致谢。

PS：第一次发帖，如果我做错了什么或错过了回答我问题的另一个话题，请告诉我，stackoverflow 是有史以来最好的老师。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:31:10.927

```
["matches"]=>
array(1) {
[6]=>
array(2) { 
```

那就是那里的ID。6 是匹配文档的 id。

只能做

```
$ids = array_keys($res['matches']); 
```

得到一个 id 数组，你可以稍后使用。

# php - php continue - 替代方式？

> ID：14456068
> 
> 赞同：0
> 
> 时间：2013-01-22T10:12:28.953
> 
> 标签：php, continue

我刚开始学习`php`，我必须做这样的事情，我得到它的工作，但我只是有几个问题我想问另一种做的方式，但首先是 br/ 应该是，`<>`但不知何故，如果我这样做底部的编码会将其视为换行符。

无论如何，如果有问题...

1.  使用下面的编码，结果将是 0-9（没有 5）但是我必须设置`$zero=-1`如果我输入`$zero=0`那么结果将是 1-9（没有 5）有没有一种方法我不必让 $zero=- 1并且仍然有0-9的结果（没有5）？

2.  我意识到如果在脚本无法按需要运行`$zero++`之后将其放在脚本末尾，我必须将其放在 if 和 continue 语句之前。`echo "$zero" . "br/";`这是假设的方式还是我只是不知道其他方式。

提前谢谢回复的人^_^

```
$squared = pow(3,2);

echo "\"3 squared is $squared:";
echo "br/";

$zero = -1;
while ($squared > $zero)
{
    $zero++;
    if ($zero == 5)
    {
        continue;
    }
    else if ($squared == $zero)
    {
        echo "$squared\"";
    }
    else
    {
        echo "$zero" . "br/";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:17:05.773

在这里（你几乎在那里：P）

```
$nr = 0;
while ($squared > $nr) {

    if (5 == $nr) {
        $nr++; // add this
        continue;
    } else if ($squared == $nr) {
        echo "$squared\"";
    } else {
        echo "$nr" . "<br/>";
    }
    $nr++; // move to the bottom
} 
```

PS：不客气@clement

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:17:20.703

将您的 while 循环更改为 while ($squared >= $zero) 然后设置 $zero = 0; 应该管用！

# java - 我正在尝试使用线程在小程序中移动一个球，但它没有移动

> ID：14456072
> 
> 赞同：2
> 
> 时间：2013-01-22T10:12:29.983
> 
> 标签：java, multithreading, swing, awt, event-dispatch-thread

我正在尝试使用线程在小程序中移动一个球，但它没有移动。任何人都可以帮助我作为小程序的新手并继续进行游戏开发..这里是我的代码供参考

```
public class ballGame extends JApplet implements Runnable
{
    int x_pos=50;
    int y_pos=100;
    int rad=10;
    Thread t;

    public void start() 
    {
        super.start();
        t=new Thread("t");
        t.start();
    }

    public void paint(Graphics g) 
    {
        super.paint(g);
        g.setColor(Color.red);
        setBackground(Color.BLACK);
        g.drawOval(x_pos,y_pos,2*rad,2*rad); 

        while(true)
        {
            x_pos++;

            //validate();
            repaint();

            try
            {
                Thread.sleep(100);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }

        }//end of while
    }//end of paint()
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:18:04.853

有一个无限循环`paint` 意味着无法完成该方法的单次传递。

此外，您永远不应该调用`Thread.sleep(100)`该`paint`方法。这会阻塞`EDT`并降低性能。

而是使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)来进行更新和重绘工作。我也将子类 a`JComponent`并覆盖`paintComponent`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:49:03.007

Swing 是一个单线程环境。也就是说，所有更新和交互都在单个线程中执行。Swing 也不是**线程**安全的。这意味着对 UI 的所有更新都**必须**在该线程（事件调度线程或 ETD）的上下文中执行。

任何阻止 EDT 的代码都会阻止它（除其他外）重新绘制 UI 并响应用户的输入。

您的绘制代码将永远不会更新屏幕，实际上它会使您的应用程序看起来“挂起”，因为该`paint`方法不允许完成并且阻塞了 ETD。

`paint`方法被调用后会快速返回，并且可能会快速连续重复调用，这是一个例外。

一般来说，a`Thread`可能有点过头了，`javax.swing.Timer`在这种情况下，像 a 这样的东西会更合适。

![在此处输入图像描述](../Images/7373cb749a286389bc8dc31db700fa8d.png)

```
public class AnimatedBoat {

    public static void main(String[] args) {
        new AnimatedBoat();
    }

    public AnimatedBoat() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new AnimationPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class AnimationPane extends JPanel {

        private BufferedImage boat;
        private int xPos = 0;
        private int direction = 1;

        public AnimationPane() {
            try {
                boat = ImageIO.read(new File("boat.png"));
                Timer timer = new Timer(40, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        xPos += direction;
                        if (xPos + boat.getWidth() > getWidth()) {
                            xPos = getWidth() - boat.getWidth();
                            direction *= -1;
                        } else if (xPos < 0) {
                            xPos = 0;
                            direction *= -1;
                        }
                        repaint();
                    }

                });
                timer.setRepeats(true);
                timer.setCoalesce(true);
                timer.start();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return boat == null ? super.getPreferredSize() : new Dimension(boat.getWidth() * 4, boat.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            int y = getHeight() - boat.getHeight();
            g.drawImage(boat, xPos, y, this);

        }

    }

} 
```

作为旁注。您应该很少需要覆盖像or`paint`这样的顶级容器的方法，虽然这样做有很多充分的理由，但您最感兴趣的一个事实是它们不是双缓冲的，这意味着当屏幕更新时，您可能会看到闪烁。`JApplet``JFrame`

最好使用类似的东西`JPanel`并覆盖它的`paintComponent`方法。

看一眼

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

了解更多信息

nb 虽然我在`JFrame`示例中使用了 a ，但将动画面板放入 a 将是一件简单的事情`JApplet`，这是您不需要/不想从顶级容器扩展的另一个原因；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:17:35.447

您不能在paint() 中调用repaint() 方法。而且你不能在paint() 方法中组织无限循环——这样做，你会阻止在你的小程序中绘图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T10:19:00.370

在 Runnable 的 run 方法中有 while 循环。

**更新：**

在 start 方法中有这个。

```
t=new Thread(this);
t.start(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T10:19:26.363

`x_pos`是一个 int 值，因此它通过值而不是引用传递给方法。这就是为什么当你改变它的值时，你圈内的值不会更新......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T10:23:43.533

You create a Thread without a `run()` method. This method should contain the runnable code... Furthermore, the `paint()` method is to *paint stuff, not update stuff!*

So move your while loop from the `paint()` method into the `run()` method of your thread:

```
t=new Thread("t") {
    @Override
    public void run()
    {
        while(true)
        {
            x_pos++;

            //validate();
            repaint();

            try
            {
                Thread.sleep(100);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
        }//end of while
    }
}; 
```

Note that `ballGame` does not require the `implement Runnable` part. As the thread you created will provide it.

# c# - 如何在标准 WPF ListView 中启用 UI 虚拟化

> ID：14456075
> 
> 赞同：9
> 
> 时间：2013-01-22T10:12:33.757
> 
> 标签：c#, wpf

我正在使用 .NET 4.5/VS2012，我有一个 ListView 看起来像这样

```
<ListView 
    VirtualizingPanel.IsContainerVirtualizable="True"
    VirtualizingPanel.IsVirtualizing="True"
    VirtualizingPanel.IsVirtualizingWhenGrouping="True"
    Grid.Row="1"
    Name="eventLogList"
    Margin="5,0,5,0"
    BorderBrush="Black"
    BorderThickness="2"
    ItemsSource="{Binding EventLogs}"
    SelectedItem="{Binding SelectedEventLog}"
    local:ListViewSorter.CustomListViewSorter="EventLogViewer.UI.EventLogItemComparer"
    SelectionMode="Single">

    <ListView.GroupStyle>
        <GroupStyle HidesIfEmpty="False">
            <GroupStyle.ContainerStyle>
                <Style TargetType="GroupItem">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="GroupItem">
                                <Expander IsExpanded="True">
                                    <Expander.Header>
                                        <TextBlock FontSize="20" TextWrapping="Wrap" Margin="0,10,0,5" >
                                        <Bold><TextBlock Text="{Binding Name}"/></Bold> - <TextBlock FontSize="20" Text="{Binding ItemCount}"/> logs
                                    </TextBlock>
                                    </Expander.Header>
                                    <ItemsPresenter/>
                                </Expander>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </GroupStyle.ContainerStyle>
        </GroupStyle>
    </ListView.GroupStyle>
    <ListView.View>
        <GridView>
            <GridViewColumn 
                Header="event id"
                Width="120"
                DisplayMemberBinding="{Binding EventID}" />
            <GridViewColumn 
                Header="level"
                Width="160"
                DisplayMemberBinding="{Binding Level}" />
            <GridViewColumn 
                Header="server" 
                Width="160"
                DisplayMemberBinding="{Binding Server}" />
            <GridViewColumn 
                Header="log name" 
                Width="160"
                DisplayMemberBinding="{Binding LogName}" />
            <GridViewColumn 
                Header="source"
                Width="240"
                DisplayMemberBinding="{Binding Source}" />
            <GridViewColumn 
                Header="logged"
                Width="240"
                DisplayMemberBinding="{Binding Logged}" />
        </GridView>
    </ListView.View>
</ListView> 
```

但是性能仍然没有改善。我找到了一个使用 ListBox 的示例，但是如何虚拟化 ListView？我很挣扎。我听说在以前版本的 WPF 中，通过分组，虚拟化是关闭的，但是在 .NET 4.5 中，WPF 有一个`IsVirtualizingWhenGrouping`属性，我已经将它设置为`True`.

**更新**：罪魁祸首是自定义样式，删除它后，列表视图运行流畅如黄油

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-10-27T17:14:26.470

“UI 虚拟化仅将可见项存储在内存**中，但在数据绑定场景中，将整个数据结构存储在内存中**。相比之下，数据虚拟化仅将屏幕上可见的数据项存储在内存中。”

“默认情况下，当 ListView 和 ListBox 控件的列表项绑定到数据时，会启用 UI 虚拟化。”

[有关更多信息，请查看原始 MSDN 源。](https://msdn.microsoft.com/en-us/library/cc716879(v=vs.110).aspx#Displaying)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T13:25:23.173

[这篇](http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization)文章对你有很大帮助。也可以看看..

*   [ListView UI 虚拟化](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/8727eb5b-03ae-449d-a7f0-3f0e71cee58f)
*   [WPF数据虚拟化ListView](https://stackoverflow.com/questions/981040/wpf-data-virtualizing-listview)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-09-26T21:59:51.283

我知道这是一个老问题，但我发现它是为了寻找我的问题的答案，并想分享我的发现，以防它对其他人有用。我遇到了一个非常相似的情况，即没有虚拟化的 ListView 控件。我删除了我在它上面的自定义样式（在阅读了这个线程和相关链接之后），它开始正确地进行虚拟化。

经过大量调查，与默认模板进行比较并缩小范围后，我发现它是该模板内 ScrollContentPresenter 上的“CanContentScroll”属性。我根本没有设置它，当我将它设置为 true 时，它​​开始正确虚拟化。我还注意到默认模板有 'CanHorizo​​ntallyScroll="False"' 和 'CanVerticallyScroll="False"'; 我在有限的测试中可以看出这些似乎没有什么不同（我相信有人可以插话并说出他们的所作所为），但无论如何我还是把它们留下了。

这是我的最终样式（请注意，这是从默认开始并修改的，所以不确定 CanContentScroll 属性在哪里被删除......）：

```
<Style x:Key="{x:Static GridView.GridViewScrollViewerStyleKey}"
   TargetType="ScrollViewer">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ScrollViewer">
                <Grid Background="{TemplateBinding Background}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <DockPanel Margin="{TemplateBinding Padding}">
                        <ScrollViewer DockPanel.Dock="Top"
                                      HorizontalScrollBarVisibility="Hidden"
                                      VerticalScrollBarVisibility="Hidden"
                                      Focusable="false">
                            <GridViewHeaderRowPresenter Margin="2,0,2,0"
                                                        Columns="{Binding Path=TemplatedParent.View.Columns, RelativeSource={RelativeSource TemplatedParent}}"
            ColumnHeaderContainerStyle="{Binding
                         Path=TemplatedParent.View.ColumnHeaderContainerStyle,
                         RelativeSource={RelativeSource TemplatedParent}}"
            ColumnHeaderTemplate="{Binding
                         Path=TemplatedParent.View.ColumnHeaderTemplate,
                         RelativeSource={RelativeSource TemplatedParent}}"
            ColumnHeaderTemplateSelector="{Binding 
                         Path=TemplatedParent.View.ColumnHeaderTemplateSelector,
                         RelativeSource={RelativeSource TemplatedParent}}"
            AllowsColumnReorder="{Binding
                         Path=TemplatedParent.View.AllowsColumnReorder,
                         RelativeSource={RelativeSource TemplatedParent}}"
            ColumnHeaderContextMenu="{Binding
                         Path=TemplatedParent.View.ColumnHeaderContextMenu,
                         RelativeSource={RelativeSource TemplatedParent}}"
            ColumnHeaderToolTip="{Binding
                         Path=TemplatedParent.View.ColumnHeaderToolTip,
                         RelativeSource={RelativeSource TemplatedParent}}"
            SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        </ScrollViewer>

                        <ScrollContentPresenter Name="PART_ScrollContentPresenter"
                                                KeyboardNavigation.DirectionalNavigation="Local" 
                                                CanContentScroll="True"
                                                CanHorizontallyScroll="False"
                                                CanVerticallyScroll="False"/>
                    </DockPanel>

                    <ScrollBar Name="PART_HorizontalScrollBar"
                               Orientation="Horizontal"
                               Grid.Row="1"
                               Maximum="{TemplateBinding ScrollableWidth}"
                               ViewportSize="{TemplateBinding ViewportWidth}"
                               Value="{TemplateBinding HorizontalOffset}" 
                               Style="{StaticResource StScrollBarNoMargin}"
                               Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>

                    <ScrollBar Name="PART_VerticalScrollBar"
                               Grid.Column="1"
                               Style="{StaticResource StScrollBarNoMargin}"
                               Maximum="{TemplateBinding ScrollableHeight}"
                               ViewportSize="{TemplateBinding ViewportHeight}"
                               Value="{TemplateBinding VerticalOffset}"
                               Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>

                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# javascript - 使 HTML 文本加粗

> ID：14456079
> 
> 赞同：1
> 
> 时间：2013-01-22T10:12:44.687
> 
> 标签：javascript, html, bold

我编写了这个函数，它接受一个单词作为输入并将它放在一个`<b>`标签中，以便在 HTML 中呈现时它会是粗体的。但是当它真的被渲染时，这个词不是粗体，而是只有`<b>`标签围绕着它。

这是功能：

```
function delimiter(input, value) {
    return input.replace(new RegExp('(\\b)(' + value + ')(\\b)','ig'), '$1<b>$2</b>$3');
} 
```

在提供值和输入时，例如“消息”和“这是一条测试消息”：

输出是：`This is a test <b>message</b>`
期望的输出是：`This is a test **message**`

即使将值替换为`value.bold()`, 也会返回相同的结果。

**编辑** 这是我正在处理的与 JS 一起的 HTML：

```
 <!DOCTYPE html>
            <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
            <head>
            <title>Test</title>

            <script>

            function myFunction(){
                var children = document.body.childNodes;
                for(var len = children.length, child=0; child<len; child++){
                 if (children[child].nodeType === 3){ // textnode
                    var highLight = new Array('abcd', 'edge', 'rss feeds');
                    var contents = children[child].nodeValue;
                    var output = contents; 
                    for(var i =0;i<highLight.length;i++){
                        output = delimiter(output, highLight[i]); 
                    }

                                children[child].nodeValue= output; 
                }
                }
            }

            function delimiter(input, value) {
                return unescape(input.replace(new RegExp('(\\b)(' + value + ')(\\b)','ig'), '$1<b>$2</b>$3'));
            }
            </script>

            </head>
            <body>
            <img src="http://some.web.site/image.jpg" title="knorex"/>

            These words are highlighted: abcd, edge, rss feeds while these words are not: knewedge, abcdefgh, rss feedssss

            <input type ="button" value="Button" onclick = "myFunction()">
            </body>
            </html> 
```

我基本上得到了分隔符函数的结果并更改`nodeValue`了子节点的结果。

我收回函数返回给我的内容的方式是否可能有问题？

这就是我所做的：

```
children[child].nodeValue = output; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T13:34:51.637

您需要将标记作为 HTML 处理，而不是仅仅设置为替换文本节点中的现有内容。为此，替换语句

```
children[child].nodeValue= output; 
```

通过以下方式：

```
var newNode = document.createElement('span');
newNode.innerHTML = output;
document.body.replaceChild(newNode, children[child]); 
```

# c - C：使用epoll ET的数据转发服务器填满发送缓冲区

> ID：14456083
> 
> 赞同：0
> 
> 时间：2013-01-22T10:12:52.007
> 
> 标签：c, sockets, epoll, sctp, epollet

我有以下情况。我的服务器从远程服务器（fd_server）接收数据并将其转发给客户端（fd_client）。我正在使用边缘触发的 epoll，因此我可以处理多个客户端和多个服务器连接。

程序：

1.  客户端连接到服务器。
2.  我的服务器连接到远程服务器并请求数据。
3.  远程服务器响应，我的服务器将数据转发给客户端。

细节：

在我的服务器连接到远程服务器后，fd_server 被添加到带有 EPOLLIN 标志的 epoll 控件中。服务器等待事件。

当 epoll_wait 返回 fd_server 可读时，我将进入下面显示的以下循环。

经过一些读/写后，我的 sctp_sendmsg 返回 EAGAIN，这意味着 sctp 发送缓冲区已满。我应该如何处理这种情况而不会丢失我已经从 fd_server 套接字读取的数据？

有没有办法事先知道，我可以发送多少数据，所以我只读取正确的数量？

```
while(1){
    N = recv(fd_server,buf, sizeof buf,0);
    if (N == -1){
      /* If errno == EAGAIN, that means we have read all
         data. So go back to the main loop. */
      if (errno != EAGAIN){
          perror ("tcp_recv error");

        }
      break;
    }
    if(N == 0){
      /* End of file. The remote has closed the
         connection. */
         close(fd_server);      
         break;
    }
    pos = 0;
    while(pos < N){
        got = sctp_sendmsg(fd_client, &buf[pos], N-pos, to, tolen, 0, 0, stream, 0, 0);

        if(got<=0){
            if (errno == EAGAIN){
                //what to do?
            }else{
                perror("tcp to sctp send error");
            }
        }
        else{
        pos += got;}
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:58:48.997

> 经过一些读/写后，我的 sctp_sendmsg 返回 EAGAIN，这意味着 sctp 发送缓冲区已满。我应该如何处理这种情况而不会丢失我已经从 fd_server 套接字读取的数据？

您需要为每个 fd_client 套接字保留某种“上下文”（数据结构）。对于连接到服务器的每个新客户端套接字，创建一个“连接状态”结构的实例并将其存储在哈希表中。这将类似于以下内容：

```
struct ConnectionState
{
    int fd_client; // socket
    uint8_t buffer[MAX_CHUNK_SIZE];  // protocol buffer for this connection
    int buffer_length; // how many bytes received into this buffer
    int pos;           // how many bytes transmitted back out on fd_client from "buffer"
    int has_data;      // boolean to indicate protocol state (1 if there's still data in buffer to send)
}; 
```

如果您不能一次发送所有内容，请在您的 epoll 模式中将 fd_client 套接字从 EPOLLIN 切换到 EPOLLOUT。在 ConnectionState 结构中将“has_data”更改为 true。然后返回等待套接字事件。当您能够再次发送时，您会查看该套接字的 ConnectionState 结构，以确定您是否仍需要继续发送或接收新缓冲区。

小心边缘触发的套接字。当您从 EPOLLOUT 转换回 EPOLLIN 时，您需要继续执行 recv() 以确保您不会丢失任何数据。（同理进入发送状态，尝试初始发送）。

# postsharp - PostSharp 和 EntityFramework 5 不能一起工作

> ID：14456094
> 
> 赞同：0
> 
> 时间：2013-01-22T10:13:30.203
> 
> 标签：postsharp

我正在尝试将我的 MVC 3 项目升级到 MVC 4，当我安装`EF5`时，`PostSharp`不要让编译项目。我在下面收到错误。花几个小时试图解决问题而没有任何运气。PostSharp 指的是 `entityframework, version=4.3.1.0`但我的项目中没有这样的版本，我只留下了`5.0 version`. 即使使用外部文本编辑器搜索所有项目文件也不会给出“4.3.1.0”的任何搜索结果。所以我不知道 PostSharp 在哪里捡到它。任何建议如何解决这个问题？

```
Error   2   Unhandled exception (2.1.7.28, 32 bit, CLR 4.0, Release): PostSharp.Sdk.CodeModel.AssemblyLoadException: Cannot find assembly 'entityframework, version=4.3.1.0, culture=neutral, publickeytoken=b77a5c561934e089'. [Version mismatch]
============ PostSharp Assembly Loading Log ===================
LOG: Finding the assembly with binding identity 'entityframework, version=4.3.1.0, culture=neutral, publickeytoken=b77a5c561934e089'.
LOG: Probing location 'C:\Users\Administrator\Projects\PC\trunk\packages\EntityFramework.5.0.0\lib\net45\EntityFramework.dll' because this file was explicitly added to the search path.
LOG: File 'C:\Users\Administrator\Projects\PC\trunk\packages\EntityFramework.5.0.0\lib\net45\EntityFramework.dll' has identity 'entityframework, version=5.0.0.0, culture=neutral, publickeytoken=b77a5c561934e089, processorarchitecture=msil'.
LOG: File 'C:\Users\Administrator\Projects\PC\trunk\packages\EntityFramework.5.0.0\lib\net45\EntityFramework.dll' does not match the reference.
LOG: Probing location 'C:\Users\Administrator\Projects\PC\trunk\packages\PostSharp.2.1.7.28\tools\Release\EntityFramework.exe' because this directory was explicitly added to the search path.
LOG: The file 'C:\Users\Administrator\Projects\PC\trunk\packages\PostSharp.2.1.7.28\tools\Release\EntityFramework.exe' could not be found.
LOG: Probing location 'C:\Users\Administrator\Projects\PC\trunk\packages\PostSharp.2.1.7.28\tools\Release\EntityFramework.dll' because this directory was explicitly added to the search path.
LOG: The file 'C:\Users\Administrator\Projects\PC\trunk\packages\PostSharp.2.1.7.28\tools\Release\EntityFramework.dll' could not be found.
LOG: Probing location 'C:\Users\Administrator\Projects\PC\trunk\PC\EntityFramework.exe' because this directory was explicitly added to the search path.
LOG: The file 'C:\Users\Administrator\Projects\PC\trunk\PC\EntityFramework.exe' could not be found.
LOG: Probing location 'C:\Users\Administrator\Projects\PC\trunk\PC\EntityFramework.dll' because this directory was explicitly added to the search path.
LOG: The file 'C:\Users\Administrator\Projects\PC\trunk\PC\EntityFramework.dll' could not be found.
LOG: Probing location 'C:\Users\Administrator\Projects\PC\trunk\PC\bin\EntityFramework.exe' because this directory was explicitly added to the search path.
LOG: The file 'C:\Users\Administrator\Projects\PC\trunk\PC\bin\EntityFramework.exe' could not be found.
LOG: Probing location 'C:\Users\Administrator\Projects\PC\trunk\PC\bin\EntityFramework.dll' because this directory was explicitly added to the search path.
LOG: File 'C:\Users\Administrator\Projects\PC\trunk\PC\bin\EntityFramework.dll' has identity 'entityframework, version=5.0.0.0, culture=neutral, publickeytoken=b77a5c561934e089, processorarchitecture=msil'.
LOG: File 'C:\Users\Administrator\Projects\PC\trunk\PC\bin\EntityFramework.dll' does not match the reference.
LOG: Probing location 'C:\Users\Administrator\Projects\PC\trunk\PC\obj\Debug\EntityFramework.exe' because this directory was explicitly added to the search path.
LOG: The file 'C:\Users\Administrator\Projects\PC\trunk\PC\obj\Debug\EntityFramework.exe' could not be found.
LOG: Probing location 'C:\Users\Administrator\Projects\PC\trunk\PC\obj\Debug\EntityFramework.dll' because this directory was explicitly added to the search path.
LOG: The file 'C:\Users\Administrator\Projects\PC\trunk\PC\obj\Debug\EntityFramework.dll' could not be found.
LOG: Probing location 'C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\EntityFramework.exe' because this directory was explicitly added to the search path.
LOG: The file 'C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\EntityFramework.exe' could not be found.
LOG: Probing location 'C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\EntityFramework.dll' because this directory was explicitly added to the search path.
LOG: The file 'C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\EntityFramework.dll' could not be found.
LOG: Probing location 'C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\Facades\EntityFramework.exe' because this directory was explicitly added to the search path.
LOG: The file 'C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\Facades\EntityFramework.exe' could not be found.
LOG: Probing location 'C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\Facades\EntityFramework.dll' because this directory was explicitly added to the search path.
LOG: The file 'C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\Facades\EntityFramework.dll' could not be found.
LOG: Looking in GAC for EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=x86.
LOG: Looking in GAC for EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=msil.
LOG: Looking in GAC for EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089.
LOG: The assembly 'EntityFramework_28' was not found.
===============================================================
   at PostSharp.Sdk.CodeModel.Domain.GetAssembly(IAssemblyName assemblyName, BindingOptions bindingOptions)
   at PostSharp.Sdk.CodeModel.AssemblyRefDeclaration.GetAssemblyEnvelope()
   at PostSharp.Sdk.CodeModel.TypeRefDeclaration.GetTypeDefinition(BindingOptions bindingOptions)
   at PostSharp.Sdk.CodeModel.TypeRefDeclaration.GetTypeDefinition()
   at ^I3av2ouCqwmI.^4+F3cylo(INamedType _0, INamedType _1, BindingOptions _2)
   at PostSharp.Sdk.CodeModel.TypeRefDeclaration.^A9yFoe2uB3TC(ITypeSignature _0, BindingOptions _1)
   at ^I3av2ouCqwmI.^4+F3cylo(IMethodSignature _0, IMethodSignature _1, BindingOptions _2)
   at PostSharp.Sdk.CodeModel.Binding.MethodSignatureComparer.Equals(IMethodSignature x, IMethodSignature y)
   at System.Collections.Generic.Dictionary`2.FindEntry(TKey key)
   at System.Collections.Generic.Dictionary`2.TryGetValue(TKey key, TValue& value)
   at ^/vWxD3eYDOIx.^wdkNIZCy[??0](^/fRRnkiTvxqu _0, ??0 _1, ^EyL1LQX01Ck8 _2, ^0RC0kpHqS6Uy _3, Dictionary`2 _4, Int32 _5, Int32 _6)
   at PostSharp.Sdk.Binary.ModuleWriter.SetMemberSignatureIndex(MemberRefDeclaration _0, ^EyL1LQX01Ck8 _1, ^0RC0kpHqS6Uy _2)
   at PostSharp.Sdk.Binary.ModuleWriter.WriteMemberRef(MemberRefDeclaration _0, MetadataToken _1)
   at PostSharp.Sdk.Binary.ModuleWriter.GetMappedDeclarationToken(MetadataDeclaration _0)
   at PostSharp.Sdk.Binary.ModuleWriter.SetMappedMetadataToken(MetadataDeclaration _0, UInt32* _1)
   at ^R00FfLNj7vE0.^rk33N/hO(OpCodeNumber _0, MetadataDeclaration _1)
   at ^R00FfLNj7vE0.EmitInstructionMethod(OpCodeNumber _0, IMethod _1)
   at PostSharp.Sdk.CodeModel.Instruction.Write(BaseInstructionWriter writer, InstructionPrefixes allowedPrefixes)
   at ^zpGNRK5nUM9z.^x98p/iJs13L+(InstructionReader _0)
   at PostSharp.Sdk.CodeModel.MethodBodyDeclaration.^uPrQJ6gs(InstructionBlock _0, IMethodBodyVisitor[] _1, MethodBodyVisitLevel _2, InstructionAction _3, InstructionReader _4, InstructionBlockExceptionHandlingKind _5)
   at PostSharp.Sdk.CodeModel.MethodBodyDeclaration.^uPrQJ6gs(InstructionBlock _0, IMethodBodyVisitor[] _1, MethodBodyVisitLevel _2, InstructionAction _3, InstructionReader _4, InstructionBlockExceptionHandlingKind _5)
   at ^zpGNRK5nUM9z.^e2BtLyuT(^Kh85h0nXrulm& _0, Int32& _1)
   at ^zpGNRK5nUM9z.^SkiT(^ceSOybcTEumb _0)
   at PostSharp.Sdk.Binary.ModuleWriter.WriteMethodBodies(^ceSOybcTEumb _0, UInt32 _1)
   at ^Up6wxUIUnN6a.^VfvrABjR()
   at ^Up6wxUIUnN6a.^SkiT()
   at ^cyC/TYSlPGB/.^wvPm(^RtksFin57NJ8 _0, ^8gP93Xsl\+Imn _1)
   at PostSharp.Sdk.Extensibility.Tasks.CompileTask.Execute()
   at PostSharp.Sdk.Extensibility.Project.ExecutePhase(String phase)
   at PostSharp.Sdk.Extensibility.Project.Execute()
   at PostSharp.Hosting.PostSharpObject.ExecuteProjects()
   at PostSharp.Hosting.PostSharpObject.InvokeProject(ProjectInvocation projectInvocation)  C:\Users\Administrator\Projects\PC\trunk\PC\POSTSHARP   PC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:59:53.497

我想你可能有一些程序集绑定策略`app.config`，这使得 CLR 寻找 v5.0 而不是 v4.3.1。PostSharp 不支持 .NET 中的绑定策略`app.config`，但仅支持系统范围的策略（例如将 .NET 1.0 重定向到 2.0 的策略）。

PostSharp 3 支持绑定策略`app.config`，但在编写此功能时尚未记录，并且 PostSharp 3 仍然是 CTP。

目前唯一的解决方案是确保项目的所有组件和引用都引用（链接）到 v5.0，因此不需要绑定策略。

# iphone - 在日期选择器中选择日期后如何返回

> ID：14456095
> 
> 赞同：0
> 
> 时间：2013-01-22T10:13:30.763
> 
> 标签：iphone

我在日期选择器中遇到问题。我什么时候点击日期选择器完成按钮。然后我的代码崩溃了。

```
-(IBAction)btn:(id)sender
{

    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    df.dateStyle = NSDateFormatterMediumStyle;
    datelabel.text = [NSString stringWithFormat:@"%@",
                  [df stringFromDate:[NSDate date]]];
    [df release];
    [self.view addSubview:datelabel]; 
    [datelabel release];
        datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 250, 325, 300)];
    datePicker.datePickerMode = UIDatePickerModeDate;
    datePicker.hidden = NO;
    datePicker.date = [NSDate date];   
    [datePicker addTarget:self
                   action:@selector(LabelChange:)
         forControlEvents:UIControlEventValueChanged];
    [self.view addSubview:datePicker];    
    [datePicker release];
          }
    - (void)LabelChange:(id)sender{
    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    df.dateStyle = NSDateFormatterMediumStyle;
    datelabel.text = [NSString stringWithFormat:@"%@",
                  [df stringFromDate:datePicker.date]];  
                }
    UIToolbar *toolbar = [[UIToolbar alloc] init];
    toolbar.barStyle = UIBarStyleBlackOpaque;
    toolbar.frame=CGRectMake(0,4,datePicker.frame.size.width,40);
    [datePicker addSubview:toolbar];    
    UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    UIBarButtonItem *doneBtn=[[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleBordered target:self action:@selector(DoneSelected)];
    [toolbar setItems:[NSArray arrayWithObjects:flexibleSpace,doneBtn,nil]];
    [flexibleSpace release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:30:57.033

```
-(void)DoneSelected
{
   your implementation code
} 
```

# asp.net - 如何动态创建自定义控件？

> ID：14456098
> 
> 赞同：0
> 
> 时间：2013-01-22T10:13:40.230
> 
> 标签：asp.net, gridview, checkbox

让我说清楚。我设法`Gridview`用单个创建自定义，`checkbox`但我的问题是我想包含多个动态`Checkbox`.

这是我的代码：

```
<%@ Control Language="C#" AutoEventWireup="true" EnableTheming="true" CodeFile="GridviewControl.ascx.cs" Inherits="UserControl_GridviewControl" %>

<link href="../Template/CSS/Style.css"type="text/css" rel="Stylesheet" />

<div>
  <span id="Span5" style="font-family: Arial; font-size:12px;" ><asp:Label ID="lblCount" runat="server" Text="0" Font-Bold="true"></asp:Label>
                     Record/s</span>
  <span class="maintenance-btns">
     <asp:Button ID="btnNew" runat="server" Text=" New " onclick="btnNew_Click"/>
     <asp:Button ID="btnDel" runat="server" Text=" Delete " onclick="btnDel_Click"/>
  </span>
</div>

<asp:Panel ID="pnlPc" runat="server" CssClass="div-grid" ScrollBars="Auto">  
<asp:GridView ID="gvListing" runat="server" AllowPaging="True" AutoGenerateSelectButton="true"
            OnRowDataBound="gvListing_RowDataBound" skinid="gvListing"
            onselectedindexchanged="gvListing_SelectedIndexChanged"
            onpageindexchanging="gvListing_PageIndexChanging" PageSize="50" >

<FooterStyle CssClass="grid-footer" />

<Columns>
<asp:TemplateField HeaderText="CheckAll">
<HeaderTemplate>
<asp:CheckBox ID="chkSelectAll" runat="server" AutoPostBack="true" 
OnCheckedChanged="chkSelectAll_CheckedChanged" CssClass="select-all"/>
</HeaderTemplate>

<ItemTemplate>
<asp:CheckBox ID="chkSelect" runat="server" AutoPostBack="true" 
OnCheckedChanged="chkSelect_CheckedChanged" CssClass="listing-checkbox"/>
</ItemTemplate>

</asp:TemplateField>

</Columns>

</asp:GridView>
</asp:Panel> 
```

在这`gridview`我只有`checkboxes`在第一列。我想把动态生成`checkboxes`的放在最后一列。

PS：如何通过动态创建的方式检索 id `checkboxes`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:23:22.443

你可以这样做

```
 protected void gvData_DataBound(object sender, EventArgs e) 
  {
    foreach (GridViewRow objRow in gvData.Rows)
    {
      TableCell tcCheckCell = new TableCell();
      var checkBox = new CheckBox();
      checkBox.CheckedChanged += checkBox_CheckedChanged;
      tcCheckCell.Controls.Add(checkBox);
      objRow.Cells.AddAt(0, tcCheckCell);
   }
  }
 void checkBox_CheckedChanged(object sender, EventArgs e)
 {
    //do something
 } 
```

# ios - ios搜索栏范围按钮不更新结果tableview

> ID：14456099
> 
> 赞同：4
> 
> 时间：2013-01-22T10:13:41.700
> 
> 标签：ios, uisearchbar, uisearchdisplaycontroller

我正在尝试在我的表格视图上实现搜索栏。当用户输入文本时，过滤效果很好。当搜索栏中有文本时，范围按钮也可以工作（它过滤来自文本过滤的结果）。我的问题是当搜索栏范围按钮中没有文本时不起作用。过滤方法成功过滤数组；但是tableview没有更新。我试过了；

```
searchBar:(UISearchBar *)searchBar selectedScopeButtonIndexDidChange:(NSInteger)selectedScope 
```

但它没有用。我在用着

```
-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString {
// Tells the table data source to reload when text changes
[self filterContentForSearchText:searchString
                           scope:[[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:[self.searchDisplayController.searchBar selectedScopeButtonIndex]]];
// Return YES to cause the search result table view to be reloaded.
return YES; 
```

}

```
-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchScope:(NSInteger)searchOption {
// Tells the table data source to reload when scope bar selection changes
[self filterContentForSearchText:self.searchDisplayController.searchBar.text
                           scope:[[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:searchOption]];
// Return YES to cause the search result table view to be reloaded.
return YES; 
```

}

用于文本过滤。我也试过重新加载数据，它也没有用。我无法弄清楚为什么 tableview 在文本更改后更新但在范围栏更改后它不更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:17:41.623

我解决了这个问题。我不再使用 searchDisplayController，而是使用`textDidChange`and `selectedScopeButtonIndexDidChange`。另外，我没有使用两个表视图（正常和`self.searchDisplayController.searchResultsTableView`），而是使用单个表视图并更改了它的数据源，现在看来这解决了我的问题。但仍然无法弄清楚为什么 `shouldReloadTableForSearchScope:`不调用`cellForRowAtIndexPath:`和更新我的表格视图

# controller - 如何从 kohana 2.3.4 的子目录访问控制器？

> ID：14456100
> 
> 赞同：0
> 
> 时间：2013-01-22T10:13:42.713
> 
> 标签：controller, routes, kohana, subdirectory, kohana-2

我正在 kohana2.3.4 中开发一个新网站。我在控制器中创建了一个名为 admin 的文件夹。我在 application/controllers/admin/main.php 中有一个控制器文件 main.php。如何在 kohana2.3.4 中调用这个控制器？是否需要在 routes.php 中定义任何路由？我在 routes.php 中添加了以下内容。

```
$config['admin/login.html'] = "admin/main/login"; 
```

但它显示错误为“找不到请求的视图_error/404”。什么是错误以及如何调用 kohana 2.3.4 中的控制器/子文件夹中存在的控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:29:20.827

对不起..我找到了答案。（模块或控制器）名称/函数名称/变量 1/变量 2/...。这是格式。它是什么子文件夹，只需给出控制器名称即可。我们可以在 routes.php 中设置路由，例如，

```
$config['admin/login.html'] = "admin/main/login"; 
```

# java - 在 Jbutton 上按下快速双键导致两次相同的操作

> ID：14456103
> 
> 赞同：0
> 
> 时间：2013-01-22T10:13:51.333
> 
> 标签：java, swing, jbutton

1> 我在**Jframe中有一个****JButton**。

 **2> 点击**JButton**打开另一个**JFrame的新****实例**。

 ****问题是当在上面的Jbutton**上快速按下 Key时。打开了同一个**JFrame的两个实例。**

我必须打开这些框架。我知道还有其他选项也没有在我阅读时使用 Jframe。

我设法通过**setMultiClickThreshHold('time in miliseconds')**解决了 Mouce 的 Doulbl 点击问题。但它只**适用于 mouse**。

尝试了我在谷歌中得到的其他一些东西，但没有一个奏效。有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:48:42.233

为了完全控制触发动作的频率/速度，实现它以在其 actionPerformed 中禁用自身。就像是：

```
singlePerform = new AbstractAction("DoSomthing") {

    @Override
    public void actionPerformed(ActionEvent e) {
        setEnabled(false);
        doSomething();
    }
};
JButton button = new JButton(singlePerform); 
```

当再次触发 doSomething 是安全的时，只需重新启用 Action：

```
singlePerform.setEnabled(true); 
```****

# c - Open CV 中的人脸检测代码

> ID：14456108
> 
> 赞同：0
> 
> 时间：2013-01-22T10:14:11.123
> 
> 标签：c, opencv

在我的程序中，我正在检测人脸，我的代码运行良好，但我担心这段代码，因为眼睛检测“cascade.detectMultiScale()”有很多参数，而对于人脸检测，我使用这几个参数，以及它是如何检测人脸的，我们是否没有在“cascade.detectMultiScale()”中初始化检测对象的大小

```
 cascade.detectMultiScale(gray, faces, 1.2, 2);

for (int i = 0; i < faces.size(); i++)
{
    Rect r = faces[i];
    rectangle(src, Point(r.x, r.y), Point(r.x + r.width, r.y + r.height), CV_RGB(0,0,255));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:07:41.570

您可能应该阅读一些有关集成 Open CV 功能的手册（[Open CV 级联分类器](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html?highlight=detectmultiscale#cascadeclassifier-detectmultiscale)）。最后两个参数是“minSize”和“maxSize”，可以设置检测对象的最小和最大尺寸。对于我的项目，我在一些 1080p HDTV 频道上检测叙述者的脸，所以我的配置是这样的：

```
face_cascade.detectMultiScale( frame_gray, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, Size(500, 500) ); 
```

...这意味着我的比例因子=1.1，只检测到 1 个可能的人脸。 `CV_HAAR_SCALE_IMAGE`意味着算法负责缩放图像，而不是检测器（通常较慢）。你也可以使用类似的东西`0|CV_HAAR_FIND_BIGGEST_OBJECT`如果要提取所有候选对象中最大的对象。就我而言，我还强制检测器搜索不小于 500x500 像素的物体，这也加快了我的实时处理速度并防止检测器进行错误检测。您还应该记住，集成检测器源自一些预定义的参数（尤其是在训练阶段）。如果您真的有兴趣为您的应用程序制作更好的检测器（以及更好的检测精度和/或性能），您应该考虑定制分类器。但请注意：虽然修改后的参数（训练迭代次数、训练模式、对象属性、对象对齐等）可以使事情变得更好，但要很好地理解它们中的每一个（以及它们之间以及对最终结果的影响），

# soapui - SOAPUI 可以按顺序运行 LoadTest TestSteps

> ID：14456110
> 
> 赞同：0
> 
> 时间：2013-01-22T10:14:12.473
> 
> 标签：soapui, loadui

我在 SoapUI 中有一个 LoadTest，其中包含 3 个 TestSteps、Step1、Step2 和 Step3 的 TestSuite。我想从 10 个并发线程运行 TestSuite，每个线程运行 TestSuite 10 次。当我在 SoapUI 中进行设置时，TestSuite 并没有像我想象的那样运行。而不是运行 Step1 然后 Step2 然后 Step3 并重复这 10 次，似乎 SoapUI 先运行 Step1 10 次，然后 Step2 10 次，然后最后 Step3 10 次。

有谁知道如何强制 SoapUI 运行 TestSuite 10 次？

请不要说“运行 loadUI”，因为我不想 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:59:35.143

我有同样的问题，如果你添加' `DataSource`'和' `DataSourceLoop`'并延迟，你可以这样做。从数据源和 DataSourceLoop 中设置测试数据（将 datasourcestep 设置为，Target 设置为延迟（将延迟设置为最小）），然后它将起作用。

我已经设置了固定负载，其中 25 个用户来执行一个步骤，然后下一组来测试它是如何工作的。在 Loadui 中设置后，选择“RunOnce”，您将看到一个接一个的步骤。

希望这可以帮助你。

# ssrs-2008-r2 - 我们如何在报告中使用复选框作为参数？

> ID：14456111
> 
> 赞同：0
> 
> 时间：2013-01-22T10:14:13.943
> 
> 标签：ssrs-2008-r2

我是 SSRS 世界的新手。是否可以使用复选框作为参数？例如，假设我的报告中有 3 个参数。第一个是站点，第二个是组件，第三个是复选框（名称“ISComponentIncluded”）。如果我们检查第三个参数，那么将考虑第二个参数，否则它将被禁用。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:54:41.057

我不相信您可以在运行时动态隐藏/显示参数。最好的选择是更改您的查询以说明复选框是否被选中。大概是这样的？

```
在哪里
 1 = @iscomponentincluded = 1 时的情况，然后在 @component = 字段时为 1，然后为 1，否则为 0 结束

```

# .net - 将 Access *.accdb 数据库嵌入 .NET 应用程序

> ID：14456112
> 
> 赞同：0
> 
> 时间：2013-01-22T10:14:16.190
> 
> 标签：.net, database, visual-studio-2010, ms-access, embedded-database

我希望我的用户看不到我正在使用的 MS Access *.accdb 数据库。因此，我想将它嵌入到程序集中。我该怎么做？

我的猜测是修改连接字符串。

已使用导入向导自动建立与数据库的连接。连接字符串可以在文件中找到，`Settings.Designer.vb`并且是这样写的：

```
Global.System.Configuration.ApplicationScopedSettingAttribute(), _
Global.System.Diagnostics.DebuggerNonUserCodeAttribute(), _
Global.System.Configuration.SpecialSettingAttribute(Global.System.Configuration.SpecialSetting.ConnectionString), _
Global.System.Configuration.DefaultSettingValueAttribute("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\MyDatabase.accdb;" & "Persist Security Info=True") 
```

有没有办法可以将`Data Source=|DataDirectory|\MyDatabase.accdb`（最后一行，向右滚动）更改为其他内容？

我找到了一篇关于[如何嵌入资源](http://support.microsoft.com/kb/319291/en-us)的文章，但它们似乎不适用于连接字符串。此外，似乎（至少在 2008 年），[要访问 MS Access 数据库，必须将其从嵌入状态中取出](http://www.codeproject.com/Messages/2684948/Re-Connection-String-to-an-Embedded-MS-Access-Data.aspx)。这将使这种嵌入在我的程序中变得毫无用处。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:50:06.593

我确认：如果目的是隐藏它，那么尝试将数据库嵌入到程序集中是没有意义的。

由于程序集是静态结构，因此无法更改任何位。因此，像数据库这样动态的东西肯定必须先从程序集中*取出*，然后才能使用。

为了让我的用户看不到我正在使用的数据库，我选择了将其复制到`&AppData&`目录中的解决方案。不是很安全（尽管有密码保护），但至少不是很明显。

看看这个[答案](https://stackoverflow.com/a/14644532/1458491)，看看如何。

# java - Http post请求不起作用

> ID：14456117
> 
> 赞同：0
> 
> 时间：2013-01-22T10:14:31.727
> 
> 标签：java, http, jsoup

我想在 Google 查询框中搜索以下内容：

```
http://www.cmu.edu/silicon-valley/ faculty directory 
```

不幸的是，以下代码不起作用：

```
Jsoup.connect("http://www.google.com/search?hl=en&q=http%3A%%2F%%2F%www.cmu.edu%2F%silicon-valley%2F%20faculty20directory").get(); 
```

这个也没有：

```
Jsoup.connect("http://www.google.com/search?hl=en&q=http%3A%%2F%%2F%www.cmu.edu%2F%silicon-valley%2F%20faculty20or20directory").get(); 
```

我在这里想念什么？

**编辑**：*不工作*意味着谷歌没有返回我们从浏览器看到的任何结果。

```
Jsoup.connect("http://www.google.com/search?hl=en&q=http%3A%"%2F%%2F%www.cmu.edu%2F%silicon-valley%2F%20faculty").get(); 
```

上面的代码虽然有效。它相当于谷歌搜索“ `http://www.cmu.edu/silicon-valley/ faculty`”。

**编辑**：我的程序中有以下技巧，所以机器人规则不是问题：

```
.userAgent("Mozilla") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:26:50.313

`Jsoup.connect("http://www.google.com/search?hl=en&q=http%3A%2F%2Fwww.cmu.edu%2Fsilicon-valley%2F+faculty+directory")`导致 403 错误（禁止），因为谷歌禁止机器人访问其结果

如果您想这样做，您必须更改用户代理字符串

`doc = Jsoup.connect("http://www.google.com/search?hl=en&q=http%3A%2F%2Fwww.cmu.edu%2Fsilicon-valley%2F+faculty+directory").header("User-Agent", "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17").get()`应该可以按预期工作，但可能违反 Google 的使用条款。

# python - python中的eval和exec有什么区别？

> ID：14456121
> 
> 赞同：2
> 
> 时间：2013-01-22T10:14:40.807
> 
> 标签：python, exec, eval

> **可能重复：**
> [Python 中的 eval、exec 和 compile 有什么区别？](https://stackoverflow.com/questions/2220699/whats-the-difference-between-eval-exec-and-compile-in-python)

我知道

1.  评估是一个`function`
2.  执行是一个`statement`

两者的简单用法是：

```
eval('1+2')
exec 'print 1+2' 
```

但是还有其他一些我无法理解的用法。

1.  使用变量存储函数名，并使用此变量调用函数，
    例如：

    ```
    def test():
        print 'hello world'
    func = 'test'
    func = eval(func)
    func() # this will call test() 
    ```

    `func = eval(func)`
    我在它返回后键入（func）
    `<type 'function'>`
    我阅读了 的文档`eval`，但我不知道为什么 eval 可以这样做。

2.  使用变量存储模块名称，并使用此变量导入模块。
    例如。

    ```
    m = 'sys'
    exec "import " +　m 
    ```

    是不是这个原因：
    `import module_name`是陈述，不是表达？
    和：
    `eval`是否只计算一个表达式
    `exec`是否运行str中的语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:23:02.940

您关于存储函数名称的部分问题可以通过以下事实来解释：这将是等效的：

```
def test():
    print 'hello world'
func = test
func() # this will call test() 
```

您的示例中的调用`eval()`与以下调用没有什么不同：

```
y = eval('x + 1') 
```

[我相信您的第二个问题与此](https://stackoverflow.com/questions/2220699/whats-the-difference-between-eval-exec-and-compile-in-python)相同，答案可能会有所帮助。

# php - 在php中爆炸

> ID：14456132
> 
> 赞同：1
> 
> 时间：2013-01-22T10:15:11.630
> 
> 标签：php, mysql, explode

在我的表“用户”中有“朋友”，

像这样 ：

```
+----+------+---------+
| id | name | friends |
+----+------+---------+
|  1 | a    | 0,1,2   |
|  2 | b    | 0,1,3   |
|  3 | c    | 0,1     |
+----+------+---------+ 
```

如何使用explode函数逐一（不是0,1,2）获取以逗号（，）分隔的朋友ID；

如何选择身份证？（例子） ：

```
$sql = Select id from users where id = (exploded)

if (mysql_num_rows($sql) > 0 ) {
  $TPL->addbutton('Unfriend');
}else{
  $TPL->addbutton('Add as Friend')
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T10:23:47.443

这里的解决方案实际上是对你的数据库结构稍作改动。我建议您创建一个**“多对多”**关系表，其中包含用户引用的所有用户朋友。

```
+---------+-----------+
| user_id | firend_id |
+---------+-----------+
|       1 |         2 |
|       1 |         3 |
|       1 |         4 |
|       2 |         1 |
|       2 |         5 |
+---------+-----------+ 
```

如果您在一个字段中存储值列表，那么这是您的数据库设计不是很优化的第一个迹象。如果您需要搜索数值，最好在该字段上放置索引以提高效率并使数据库为您工作，而不是相反:)

然后要查明用户是否是某人的朋友，您将查询此表 -

```
SELECT * FROM users_friends WHERE 
  `user_id` = CURRENT_USER AND `friend_id` = OTHER_USER 
```

要获得某个用户的所有朋友，您可以这样做 -

```
SELECT * FROM users_friends WHERE `user_id` = CURRENT_USER 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:19:18.903

只是一个简单的例子，可以让你清楚如何进行：

```
// Obtain an array of single values from data like "1,2,3"...
$friends = explode(',', $row['friends']); 
```

然后，回到您的查询中：

```
// Obtain back data like "1,2,3" from an array of single values...
$frieldslist = implode(',', $friends);
$sql = "SELECT * FROM users WHERE id IN ('" . $frieldslist . "')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:20:20.953

从你的字符串中获取一个 if ids 的数组[explode](http://php.net/manual/en/function.explode.php)将像这样使用

```
$my_array = explode("," , $friends); 
```

但你可能会更好地使用 mysql[`IN`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)子句

```
$sql = "Select id from users where id in (".$row['friends'].")"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T10:34:32.467

只是一个快速的想法。更改数据库的表。可以肯定的是，过一段时间会出现很多问题。

你可以有这样的东西。

```
 id      hasfriend
    1          2
    1          3
    2          1 no need to be here (You have this already) 
    2          4 
       ..... 
```

您可以通过使用索引来实现唯一性或编程来做到这一点。你可能会想到更好的东西。将您解决问题的方法改为这样。

# model-view-controller - Symfony2 和过滤器，正确的策略

> ID：14456133
> 
> 赞同：1
> 
> 时间：2013-01-22T10:15:12.543
> 
> 标签：model-view-controller, symfony, filter

我在问什么是使用 Symfony2 进行过滤的最佳策略。

我想过滤一个实体表（酒店）。这个过滤器应该允许我：

*   选择有或没有电子邮件、有或没有网站等的酒店。
*   根据州和/或城市选择酒店（关系 OneToMany）
*   用复选框选择我想在桌子上显示的信息（例如在酒店桌子上显示“电子邮件地址”，但不显示“电话”或“网站”）。

首先，我想在 HotelController 上构建过滤器表单。提交过滤器后，我为每个发送的 $_POST 提供一个 FlashBag，重定向到同一页面，如果有 FlashBag，我将 cookie 发送到 $reponse。然后我显示使用 cookie 上的数据过滤的表格。

但我不太喜欢这样，因为我在 HotelController 上有一个非常大的 indexAction()，而且我认为将 $_POST 更改为 FlasBag 为 Cookie 并不是很干净，是吗？我做这个重定向，因为刷新页面，数据不会再次发布。

我也在问一个问题，为了防止 IndexAction() 方法太大，**我可以将一些代码放到另一个方法**中吗，例如方法 PostToFlashBag() 和另一个 FlashBagToCookie()，**或者 Controller 上的每个方法都必须以单词“Action”并且必须可以通过路由器访问**？

然后，我想到另一件事：有一个实体“过滤器”，我需要的每一行。例如“WithEmail”、“DisplayTel”等。然后我可以轻松地构建一个 FilterType，并更新过滤器实体，以重定向到同一页面（同样，如果用户刷新页面，防止重新发布数据）。最后，我可以使用 HotelRepository 上的方法显示带有对象过滤器的表。

这看起来不错，但我有点担心，因为过滤器实体只有一个条目，我必须找到过滤器（1）。**由于 MVC，只有一个条目的模型是否正确**？

**你会选择什么策略（也许是另一种策略）？**我很高兴学习 MVC 和 Symfony2 devloppemnt 的良好实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:40:56.670

拥有一个专用的模型类——让我们称之为`Filter`——将接收用户输入的值，绝对是要走的路。

此外，在此输入上使用 Symfony2 表单，这样您就可以进行验证，并确保它确实`withEmail`是一个布尔值等。从您`Filter`那里，构建您的 SQL/Doctrine 查询并返回您的控制器必须返回的内容，无论是查看或原始数据。

您可以**在控制器中使用任何您想要的方法**。毕竟，Symfony2 中的控制器是普通的旧 PHP 对象。他们只需要执行`ContainerAwareInterface`。通常它们继承`Controller`，但是这种继承只带来了一些代理方法，比如`getDoctrine`or `render`。

唯一的约定是用作路由的方法必须以`Action`

# c - 设置串口参数

> ID：14456137
> 
> 赞同：0
> 
> 时间：2013-01-22T10:15:20.233
> 
> 标签：c, linux, serial-port

我在设置串口参数时遇到了困难。
在同一设备上运行良好的程序，留下以下 stty 输出：

```
$ stty -a -F /dev/ttyUSB0  
speed 1200 baud; rows 0; columns 0; line = 0;
intr = ^C; quit = ^\; erase = ^?; kill = ^U; eof = ^D; eol = <undef>; eol2 = <undef>;     swtch = <undef>; start = ^Q;
stop = ^S; susp = ^Z; rprnt = ^R; werase = ^W; lnext = ^V; flush = ^O; min = 0; time =     0;
-parenb -parodd cs8 -hupcl -cstopb cread clocal -crtscts
ignbrk -brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr -icrnl -ixon -ixoff -iuclc -ixany -imaxbel -iutf8
-opost -olcuc -ocrnl onlcr -onocr -onlret -ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0
-isig -icanon -iexten -echo -echoe -echok -echonl noflsh -xcase -tostop -echoprt -echoctl -echoke 
```

我的尝试是这样的：

```
tcgetattr(fd, &options);

cfsetispeed(&options, B9600);
cfsetospeed(&options, B9600);
options.c_cflag |= (CLOCAL | CREAD);
options.c_cflag &= ~PARENB;
options.c_cflag &= ~CSTOPB;
options.c_cflag &= ~CSIZE;
options.c_cflag |= CS8;
options.c_cflag &= ~( ICANON | ECHO | ECHOE |ISIG );
options.c_iflag &= ~(IXON | IXOFF | IXANY );
options.c_iflag |= IGNBRK;
options.c_oflag |= ONLCR;

options.c_oflag &= ~(OCRNL|ONLRET|NLDLY|CRDLY|TABDLY|BSDLY|VTDLY|FFDLY);

tcsetattr(fd, TCSANOW, &options); 
```

我试过设置 B1200 和 B9600 的速度，但是没有用（在手册中说应该是 B9600）

这个选项有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:14:38.280

这些`stty`设置似乎适用于*原始*模式，而您的`tcgetattr()`/`tcsetattr()`代码尝试使用非规范模式，但输出处理不完整（未清除 OPOST）。
结果是串行端口处于半原始模式以进行输出。

尝试使用`cfmakeraw()`设置非规范模式。

> cfmakeraw() 将终端设置为类似于旧版本 7 终端驱动程序的“原始”模式：输入是逐个字符可用的，回显被禁用，并且终端输入和输出字符的所有特殊处理都被禁用。终端属性设置如下：

```
termios_p->c_iflag &= ~(IGNBRK | BRKINT | PARMRK | ISTRIP
            | INLCR | IGNCR | ICRNL | IXON);
termios_p->c_oflag &= ~OPOST;
termios_p->c_lflag &= ~(ECHO | ECHONL | ICANON | ISIG | IEXTEN);
termios_p->c_cflag &= ~(CSIZE | PARENB);
termios_p->c_cflag |= CS8; 
```

有关工作示例代码，请参阅[此](https://stackoverflow.com/questions/12437593/how-to-read-a-binary-data-over-serial-terminal-in-c-program/12457195#12457195)。
请注意，在初始化期间检查系统调用的*返回码*。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-22T11:05:23.360

你应该试试

```
B115200
B57600
B38400
B19200
B9600 
```

如果您不知道要设置哪个波特率，请一一进行....

# javascript - 解析脚本？

> ID：14456139
> 
> 赞同：-1
> 
> 时间：2013-01-22T10:15:22.317
> 
> 标签：javascript, ios, objective-c, parsing

我习惯于解析 XML 以在应用程序中显示数据，但现在我正在处理一个嵌入片段形式的源：

```
<script type="text/javascript" src="//www.google.com/trends/embed.js?hl=en-US&cat=0-29&date=today+7-d&cmpt=q&content=1&cid=RISING_QUERIES_0_0&export=5&w=300&h=420"></script> 
```

我该如何解析这个？我只是想获取列表中的第一项以及与之关联的值。我发现了一些关于数据抓取的事情——但是我必须建立一个网站来抓取它？肯定有更好的办法。

非常感谢任何帮助。谢谢！安托万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:12:36.593

[www.google.com/trends/embed.js](http://www.google.com/trends/embed.js)是一个 javascript，它只做一个`document.write function`. 没有办法解析它！如果你想解析写入页面的 iframe，你需要打开页面（你可以用`node.js`and来做`phantom.js`）

# javascript - 如何逐行读取 HTML 文件并使用 Javascript 为每一行返回 document.write()？

> ID：14456141
> 
> 赞同：1
> 
> 时间：2013-01-22T10:15:24.107
> 
> 标签：javascript, html, header, footer

我有 3 个文件：index.html、header.js 和 footer.js。

我想知道是否可以只使用一个 JS 脚本逐行读取 HTML 文件 header.html 和 footer.html（文件而不是 header.js 和 footer.js）并为文件的每一行返回 document.write( '行内容');?

而不是 header.js 和 footer.js 我想要 header.html 和 footer.html 以及一个用于将 HTML 转换为 JS 文件的 JS 文件：**header.html 转换为 header.js**。

**索引.html**

```
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>

<script type="text/javascript" src="header.js"></script>

<!-- CONTENT -->
<div id="content">
<h1>Title</h1>
<h2>Substitle</h2>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
<!-- END OF CONTENT -->

<script type="text/javascript" src="footer.js"></script>

</body>
</html> 
```

**header.js**

```
document.write('<!-- HEADER -->');
document.write('<div id="header">HEADER</div>');
document.write('<!-- END OF HEADER -->'); 
```

**页脚.js**

```
document.write('<!-- FOOTER -->');
document.write('<div id="footer">FOOTER</div>');
document.write('<!-- END OF FOOTER -->'); 
```

最后 index.html 将如下所示：

**索引.html**

```
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>

<script type="text/javascript" src="include.js?file=header.html"></script>

<!-- CONTENT -->
<div id="content">
<h1>Title</h1>
<h2>Substitle</h2>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
<!-- END OF CONTENT -->

<script type="text/javascript" src="include.js?file=footer.html"></script>

</body>
</html> 
```

其余文件将如下所示：

**header.html**

```
<!-- HEADER -->
<div id="header">HEADER</div>
<!-- END OF HEADER --> 
```

**页脚.html**

```
<!-- FOOTER -->
<div id="footer">FOOTER</div>
<!-- END OF FOOTER --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:29:04.257

请解释为什么需要 document.write - 实际原因是什么？如果内容来自与您想要组装它的页面相同的站点，jQuery 可以轻松地抓取内容并插入到页面上

例如

```
$(function() {
  var $body = $("body");
  $.get("header.html",function(data) {
    $body.prepend(data);
  });
  $.get("footer.html",function(data) {
    $body.append(data);
  });
}); 
```

这将使您的页面看起来像这样

```
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript" src="include.js"></script>
</head>
<body>
<!-- CONTENT -->
<div id="content">
<h1>Title</h1>
<h2>Substitle</h2>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
<!-- END OF CONTENT -->
</body>
</html> 
```

其中 include.js 看起来像我在上面发布的

* * *

如果您不想使用 jQuery，则需要将页面 ajax 插入，使用例如 PHP 转换服务器上的页面或使用 iFrames 来保存它们

* * *

**没有**框架的例子：

[演示](http://plungjan.name/SO/insertheadfoot.html)

```
<!DOCTYPE HTML>
<html>
<head>
<title>Test header footer insertion without jQuery</title>
<script>
var pages = [
{url:"header.html",tag:"body",where:"before"},
{url:"footer.html",tag:"body",where:"after"}
];
var req,cnt = pages.length;
function ajax_fragment(){
    cnt--; if (cnt<0) return;
    if (!req) { // singleton
      if (window.XMLHttpRequest){
          req=new XMLHttpRequest(); 
      } else{ 
          req=new ActiveXObject("Microsoft.XMLHTTP"); 
      }
    }

    req.onreadystatechange=function(){
        if(req.readyState==4 && req.status==200){
            var tempDiv = document.createElement("div");       
            tempDiv.innerHTML = req.responseText; 
            var fragment = document.createDocumentFragment();  
            fragment.appendChild(tempDiv);                     
            var tag = document.getElementsByTagName(pages[cnt].tag)[0]; 
            if (pages[cnt].where=="before") tag.insertBefore(fragment, tag.firstChild);
            else tag.appendChild(fragment);
            ajax_fragment(); // next 
        }
    }
    req.open("GET",pages[cnt].url,true); 
    req.send();
}
window.onload=function() {
  ajax_fragment();
}
</script>
</head>
<body>
<div id="content">Here is some content</div>
</body>
</html> 
```

# c# - 使用 MEF 导出多个接口，结果为一个实例

> ID：14456146
> 
> 赞同：3
> 
> 时间：2013-01-22T10:15:54.463
> 
> 标签：c#, .net, vb.net, mef, extensibility

我有一个实现两个接口A和B的类：

```
public class Test
{
    public Test()
    {
        Usage<IA> x = new Usage<IA>();
        Usage<IB> y = new Usage<IB>();
        var b = x.Implementation.Value.Equals(y.Implementation.Value);
    }
}

public interface IA { }
public interface IB { }

[Export(typeof(IA))]
[Export(typeof(IB))]
public class Impl : IA, IB
{
    public Impl()
    {

    }
}

public class Usage<T>
{
    public Usage()
    {
        CompositionContainer c = new CompositionContainer(new AssemblyCatalog(this.GetType().Assembly));
        c.ComposeParts(this);

        var x = Implementation.Value.ToString();
    }

    [Import]
    public Lazy<T> Implementation { get; set; }
} 
```

我遇到的问题是这两个属性都有自己的 Impl 类实例。我希望他们指向同一个实例。我尝试使用 来完成此操作`CreationPolicy.Shared`，但这也不起作用。知道我做错了什么，还是这是不受支持的场景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T09:41:41.123

问题是您为 Usage 类的每个实例使用不同的 CompositionContainer。导出的实例不会在不同的容器之间共享。

理查德·德明

# javascript - 在javascript中单击复选框时如何将复选框的值添加到url

> ID：14456152
> 
> 赞同：0
> 
> 时间：2013-01-22T10:16:20.420
> 
> 标签：javascript, jquery, joomla

```
<input class="messageCheckbox" type="checkbox" name="options[]" value="<?php echo $catrecord[0] ; ?>"/> 
```

这是复选框，当有人选择它时，我想在 url 中使用复选框值转到另一个 url，而不是作为 post。

这是我想附加复选框值案例'Addnew'的地方：

```
window.location = '<?php echo JURI::base()."index.php?option=com_flatorb&view=entity"?>';
break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:18:13.647

您可以将更改事件处理程序与复选框绑定并使用 window.location 打开页面。

```
$('#checkboxId').change(function(){
   if(this.checked)
      window.location = 'index.php?option=com_flatorb&view=entity&chkValue=' + this.value;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:19:39.560

```
document.[name of form].[name of checkbox].checked 
```

或使用 jQuery：

```
$('#[id of checkbox]').is(':checked'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:32:15.710

您可以执行以下操作，

**方法一**

```
$('.messageCheckbox').change(function(){
   if(this.checked)
      window.location = 'index.php?option=com_flatorb&view=entity&value=' + $(this).val('');
}); 
```

**方法二**

```
$('.messageCheckbox').change(function(){
   if($('#edit-checkbox-id').is(':checked'))
      window.location = 'index.php?option=com_flatorb&view=entity&value=' + $(this).val('');
}) 
```

# windows - 如何实现高可用性？

> ID：14456153
> 
> 赞同：1
> 
> 时间：2013-01-22T10:16:24.250
> 
> 标签：windows, message-queue, nservicebus

我即将建立一个新系统，我想要最大的可用性！我将不得不使用Windows！

我将让客户使用 Web 服务与我的系统交谈。我还将从周围的系统中获取数据。该数据使用消息传递、MQ 系列和 MSMQ 传递。系统将产生一些数据，这些数据使用队列发送回周围的系统。

新数据进入系统后，不同的进程将使用这些数据执行不同的任务，如打印、写入数据库等。

为了实现高可用性，我计划让系统的两个版本在两台不同的机器上并行运行。客户端将尝试使用第一个正确响应的服务器。我认为一个理想的方案是将来自两台服务器中任何一台的传入数据放在一个公共队列中（在第三台机器上？）。队列中的数据可以被两个服务器上的进程获取（想想生产者-消费者模式）。

我认为*也许* **NServiceBus**会满足我的需求。根据上述，我有几个问题。

*   队列可以在两台服务器之间共享吗？如果服务器出现故障，我不希望数据卡在服务器上。在那种情况下，我希望其他服务器继续处理。
*   不同机器上的两个（或更多）“消费者”/进程能否从一个公共队列中挑选数据？

欢迎任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:36:12.473

NSB 分销商的目的不是解决可用性问题，而是解决规模问题，分销商帮助以低成本扩展系统。

通过查看描述，您的系统由 WebService 端点、多个数据库和排队基础设施组成。如果要实现完全的高可用性，则必须确保没有单点故障。为了做到这一点，你需要，

1.  用于 Web 服务端点（2 个或更多服务器）的负载平衡 Web 场
2.  队列和依赖于这些队列的应用程序的应用程序集群。
3.  高度可用的数据库服务器，再次集群。
4.  最重要的是一个好的 SAN。

但是，如果您指的是对消费者可用，您只需要确保目标队列和 Web 服务端点可用。并确保整体架构促进延迟执行。

两个或多个应用程序可以远程读取 MSMQ 队列，但这是您不想做的事情，因为它基于 DTC。这是一个真正的性能杀手。

一些参考资料

*   [http://blogs.msdn.com/b/clustering/archive/2012/05/01/10299698.aspx][1]
*   [http://msdn.microsoft.com/en-us/library/ms190202.aspx][2]

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T18:53:05.737

简而言之，您将要使用分销商... [http://support.nservicebus.com/customer/portal/articles/859556-load-balancing-with-the-distributor](http://support.nservicebus.com/customer/portal/articles/859556-load-balancing-with-the-distributor)

这里的关键是分发节点是单点故障，因此您希望在集群上运行它。

# php - php应用程序在本地而不是在实时/生产服务器上工作

> ID：14456158
> 
> 赞同：0
> 
> 时间：2013-01-22T10:16:28.427
> 
> 标签：php

我有一个用 PHP 编写的考勤管理系统应用程序。该软件包在我的本地计算机上运行良好，但是当我尝试在生产服务器上托管它时，主页正在加载，但我无法使用任何用户帐户/数据登录。

```
<?php 

session_start();
include_once("include\config.php");
if (isset($_POST['textfield1'])&&isset($_POST['textfield2'])){
$login = $_POST["textfield1"];
$pwd = $_POST["textfield2"];
$recordset = mysql_query("select * from users");

while($record = mysql_fetch_array($recordset)){
    if($login == $record["ulogin"] && $pwd == $record["upassword"]) 
    {

    $_SESSION["ulogin"] = $record["ulogin"];
    $_SESSION["uid"] = $record["uid"];  
            if($record["utype"] == 1){
            $_SESSION["utype"] = $record["utype"];
            header("Location:admin.php?uid=".$record["uid"]);
            exit;
            }else{
        header("Location:home.php");
        exit;
        }
   }
} 
}
header("Location:login.php?invalid=1");  
?> 
```

这是我的用户密码验证码基础连接。一切正常。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:24:46.277

Confirm DB is on server. Confirm your config. One quick MYSQL tip(if you are using it): if information_schema table shows, then you DB is not properly configured.

# java - 列表迭代类型不匹配

> ID：14456159
> 
> 赞同：0
> 
> 时间：2013-01-22T10:16:32.703
> 
> 标签：java, swing, collections, jtabbedpane

```
List holder = new List();
holder.add(new JTabbedPane());
holder.add(new JTabbedPane());

for(JTabbedPane tab : holder)
{
    System.out.println(tab.toString());
} 
```

为什么在 for-each 循环中显示类型不匹配错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T10:25:01.590

试试这个

```
ArrayList<JTabbedPane> holder = new ArrayList<JTabbedPane>();
        holder.add(new JTabbedPane());
        holder.add(new JTabbedPane());
        for (JTabbedPane jTabbedPane : holder) {
            System.out.println(holder.toString());
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:29:35.567

```
Try:
for(Object tab : holder)
{
System.out.println( ( (JTabbedPane )tab).toString());
} 
```

它显示错误，因为持有人 `is List of Object , not List of JTabbedPane`。所以当你使用 for-each 循环时`for(JTabbedPane tab : holder)`，它会显示编译错误。

# jquery - jquery过滤器，如果不匹配，返回默认值

> ID：14456162
> 
> 赞同：0
> 
> 时间：2013-01-22T10:16:39.303
> 
> 标签：jquery, filter

[http://jsfiddle.net/jeepstone/kxuMC/](http://jsfiddle.net/jeepstone/kxuMC/)

```
if($('#deliveryPostcodeEstimator').length > 0) {
    $('#deliveryPostcodeEstimator')
        .blur(function() {
            $('select[name=country] option').filter(function(index) { 
                if ($(this).text() == $('#deliveryPostcodeEstimator').val().toUpperCase()) {
                    var result = true;
                } else {
                    // return the last item in the dropdown list
                }
                console.log(result);
                return result;
            }).prop('selected', true);
            var thisForm = $(this).closest("form");
            //thisForm.submit();
        })
        .keyup(function() {
            $(this).val($(this).val().toUpperCase());
        })
} 
```

在上面的代码中，用户输入邮政编码的外码。如果有匹配项（onblur），则选择该项目。我一生都无法弄清楚如何将默认设置为最后一项（英国其他地区）。我可以设置默认选定项目，但如果没有匹配项，我希望它默认返回英国其他地区。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:29:36.660

为什么不在`Rest of UK`进行过滤之前将所选选项设置为。然后让过滤器在适当的情况下覆盖默认选择。

```
if($('#deliveryPostcodeEstimator').length > 0) {
        $('#deliveryPostcodeEstimator')
            .blur(function() {
                //Set to default
                $('select[name=country] option:last').prop('selected', true);
                $('select[name=country] option').filter(function(index) { 
                    if ($(this).text() == $('#deliveryPostcodeEstimator').val().toUpperCase()) {
                        var result = true;
                    }
                    return result;
                }).prop('selected', true);
                var thisForm = $(this).closest("form");
                //thisForm.submit();
            })
            .keyup(function() {
                $(this).val($(this).val().toUpperCase());
            })
    } 
```

示例：http: [//jsfiddle.net/kxuMC/1/](http://jsfiddle.net/kxuMC/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:28:50.453

您需要检查过滤器是否匹配任何内容。这样的事情应该做：

```
if($('#deliveryPostcodeEstimator').length > 0) {
        $('#deliveryPostcodeEstimator')
            .blur(function() {
                var sel = $('select[name=country] option').filter(function(index) { 
                    return ($(this).text() == $('#deliveryPostcodeEstimator').val().toUpperCase())                      
                });
                if (sel.length > 0)
                    sel.prop('selected', true);
                else
                    $('select[name=country] option').last().prop('selected', true);
                var thisForm = $(this).closest("form");
                //thisForm.submit();
            })
            .keyup(function() {
                $(this).val($(this).val().toUpperCase());
            })
    } 
```

[JSFiddle](http://jsfiddle.net/qThYs/3/)

# c++ - 如何在 const struct 中初始化联合？

> ID：14456163
> 
> 赞同：1
> 
> 时间：2013-01-22T10:16:41.317
> 
> 标签：c++

```
 const struct EbmlSyntax {
    uint32_t id;
    EbmlType type;
    int list_elem_size;
    int data_offset;
    union {
        uint64_t    u;
        double      f;
        const char *s;
        const struct EbmlSyntax *n;
    } def;
} ; 
```

我必须使用上面的 const 结构并想使用创建一个常量结构

`{ EBML_ID_DOCTYPE, EBML_STR, 0, offsetof(Ebml,doctype), {.def.s = "(none)"} }`

但是，VS8.0 编译器给出了一个错误 error C2143: syntax error : missing '}' before '.' 当我编译 C++ 项目时。

我尝试了几种方法，但是，我只找到了将 char * 转换为 uint64_t（分配给第一种类型）的方法，

```
(uint64_t)("none") 
```

我可以使用工会。这种方法安全吗？我使用 VS 调试工具检查了这个和其他 struct-union 对象的结构。struct 和 union 的成员可以正确解释似乎没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:35:28.013

您只能使用该语法初始化联合的第一个元素。你需要另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:33:29.427

给`struct`一个构造函数，并在那里进行初始化。当然，这不是静态初始化，但是如果在您进入 struct 之前不使用该结构`main`，那应该不是问题。

如果您确实需要静态初始化，请将 替换`union` 为`struct`. 这会增加对象的大小，但如果它仅用于少数具有静态初始化的对象，这应该不是什么大问题。

# c# - 根据索引查找通用列表记录

> ID：14456166
> 
> 赞同：1
> 
> 时间：2013-01-22T10:16:46.580
> 
> 标签：c#, asp.net-mvc-3

我处于需要使用其位置从通用列表中查找记录的情况，意味着需要找到第 1 条第 5 条和第 9 条记录，然后是第 2 条第 6 条和第 10 条记录，依此类推...

情况是

分配给团队列表的项目列表，所以如果我们有 20 个项目和 4 个团队

然后第一个项目转到第一个团队，第二个转到第二个团队，第三个转到第三个团队，第四个转到第四个团队然后再第五个项目转到第一个团队

所以它就像

```
Projects              Team
1                     1
2                     2
3                     3
4                     4
5                     1
6                     2
7                     3
8                     4
9                     1
.
. 
```

所以现在我想在通用列表上运行一个查询来获取每个团队的记录，所以对于第一个团队记录 1,5 和 9.... 需要获取。

就像是

```
 List<Project> lst = list (from Database)
 //For 1stTeam 
lst = lst.Index(1,5,9...);

//For 2nsTeam 
lst = lst.Index(2,6,10...); 
```

希望我能澄清我的观点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:28:15.850

你可以用 LINQ 做这样的事情，`Select`并且`GroupBy`：

```
List<int> list = new List<int>{1,2,3,4,5,6,7,8,9,10};
int numberOfTeams = 4;
var projectsByTeam = list
 .Select((number, index) => new {Value = number, Index = index})
 .GroupBy(item => item.Index % numberOfTeams)
 .Select(item => new {TeamNumber = item.Key+1, ProjectIDs = item.Select(x => x.Value).ToList()})
 .ToList(); 
```

将原始列表拆分为

```
{
  {TeamNumber = 1, ProjectIDs = {1,5,9}}, 
  {TeamNumber = 2, ProjectIDs = {2,6,10}}, 
  {TeamNumber = 3, ProjectIDs = {3,7}}, 
  {TeamNumber = 4, ProjectIDs = {4,8}}, 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:19:10.357

首先，这并不特定于通用列表。

* * *

您必须创建一个新列表，然后将原始列表中所需的项目一一添加到新列表中。您可以通过索引器（方括号）访问给定位置的单个项目。

```
List<Project> lst = // list (from Database)

List<Project> firstTeam = new List<Project>();
firstTeam.Add(lst[1]);
firstTeam.Add(lst[5]);
firstTeam.Add(lst[9]);

List<Project> secondTeam = new List<Project>();
secondTeam.Add(lst[2]);
secondTeam.Add(lst[6]);
secondTeam.Add(lst[10]); 
```

* * *

当然，如果项目在整个原始文件中有规律地分布`lst`，您可以自动确定项目：

```
List<Project> firstTeam = new List<Project>();
for (int i = 1; i < lst.Count; i += 4) {
    firstTeam.Add(lst[i]);
} 
```

即你循环遍历原始列表，每4个项目。

* * *

如果要添加到其中一个团队的项目*没有*定期分布在整个过程中`lst`，您将不得不一个一个地添加它们，但您可以使用较短的列表初始化器语法：

```
List<Project> firstTeam = new List<Project>() { lst[1], lst[5], lst[9] }; 
```

* * *

最后，请注意`List<T>`从零开始计算索引，因此第一项是`lst[0]`，而不是`lst[1]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:21:44.977

您正在寻找[params](http://msdn.microsoft.com/en-us/library/w5zay9db%28v=vs.100%29.aspx)关键字。它将允许您传入`Index`一个参数数组，这些参数是您案例中的索引。

在您的情况下，扩展方法可以解决问题：

```
public static List<Project> Index(this List<Project> list, params int[] indexes) 
{
  var newList = new List<Project>();
  foreach(var index in indexes)
  {
     newList.Add(list[index]);
  }
  return newList;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T10:21:45.667

您可以使用：

```
List<Project> projects; // = something from db
var neededIndexes = new[] { 0, 4, 8 };

var result = projects.Where((project, index) => neededIndexes.Contains(index)).ToList(); 
```

或者如果索引均匀分布：

```
List<Project> projects; // = something from db

var result = projects.Where((project, index) => index % 4 == 0).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T10:25:33.510

```
// Define other methods and classes here
static IEnumerable<IEnumerable<T>> CustomSplit<T>(this IEnumerable<T> source, int max)
{
    var results = new List<List<T>>();
    for (int i = 0; i < max; i++)
    {
        results.Add(new List<T>());
    }

    int index = 0;
    using (var enumerator = source.GetEnumerator())
    {
        while (enumerator.MoveNext())
        {
            int circularIndex = index % max;
            results[circularIndex].Add(enumerator.Current);
            index++;
        }
    }

    return results;
} 
```

以下是如何使用它：

```
void Main()
{
    var elements = Enumerable.Range(0, 100).CustomSplit(4);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T10:27:23.793

这解决了你的问题：

每个团队的列表：

```
List<List<Project>> projectsPerTeam = new List<List<Project>> ();
for(int i=0;i<teamsList.Count();i++)
{
    projectsPerTeam.Add(new List<Project> ());
} 
```

现在您的问题（为正确的团队添加项目）：

```
for(int i=0;i<projectsList.Count();i++)
{
    projectsPerTeam[i%teamList.Count()].Add(projectsList[i]);
} 
```

# java - 禁用网络连接的事件日志

> ID：14456168
> 
> 赞同：2
> 
> 时间：2013-01-22T10:16:56.363
> 
> 标签：java, blackberry, event-log

在事件记录器中，如果我将最小日志级别更改为“调试信息”并进行一些网络调用，我注意到连接工厂记录了网络 url。例如，我看到了这个

guid：0x287F0A38583E7BC6 时间：2013 年 1 月 21 日星期一 18:29:15 严重性：5 类型：2 app:net.rim.networkapi 数据：FcoC [https://xyz.co.uk/abc/test?appversion=1.2.3&; deviceside=false;ConnectionType=mds-public;ConnectionTimeout=20000;EndToEndRequired](https://xyz.co.uk/abc/test?appversion=1.2.3&;deviceside=false;ConnectionType=mds-public;ConnectionTimeout=20000;EndToEndRequired)

这发生在我工作的所有应用程序上。有什么办法可以避免连接工厂在事件记录器中记录这些信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:53:49.843

`EventLogger.DEBUG_INFO`你是对的，完整的 URL由应用程序以严重性 5 ( ) 记录`net.rim.networkapi data`。有时，在使用 Wi-Fi 或直接 TCP 时，URL 甚至会被记录两次。这可能是一个安全问题，因为会记录主机和查询字符串。

将严重级别更改为`EventLogger.INFORMATION`似乎可以防止不需要的日志记录。

示例应用程序（首先手动清理事件记录器）：

```
 public class Main extends Application{

        public Main(){
            doTest();
        }

        private void doTest(){
            long GUID = 0x9cf1bac07b565732L; 
            EventLogger.register(GUID, "conn_factory_logging_test", EventLogger.VIEWER_STRING);
            EventLogger.setMinimumLevel(EventLogger.INFORMATION);

            ConnectionFactory factory = new ConnectionFactory();
            factory.setPreferredTransportTypes(new int[]{ TransportInfo.TRANSPORT_TCP_WIFI, TransportInfo.TRANSPORT_TCP_CELLULAR});
            ConnectionDescriptor cd = factory.getConnection("http://www.google.com");
            HttpConnection httpConnection = (HttpConnection) cd.getConnection();
            try {
                httpConnection.setRequestMethod(HttpConnection.GET);
                int responseCode = httpConnection.getResponseCode();
                String result = "Server Response: " + responseCode;

                EventLogger.logEvent(GUID, result.getBytes(), EventLogger.INFORMATION);
                EventLogger.startEventLogViewer();          
            } catch (Exception e) {
                System.err.println(e);
            } finally {
                try {
                    httpConnection.close();
                } catch (IOException e) {}
            }       
            System.exit(0);
        }

        public static void main(String[] args){
             new Main().enterEventDispatcher();
        }
    } 
```

# facebook - Facebook Graph API 非英语搜索查询

> ID：14456179
> 
> 赞同：1
> 
> 时间：2013-01-22T10:17:16.237
> 
> 标签：facebook, facebook-graph-api

我一直在尝试使用 facebook graph api 公共搜索。它适用于英语搜索查询，例如 [http://graph.facebook.com/search?q=watermelon%20&type=post](http://graph.facebook.com/search?q=watermelon%20&type=post)

另一方面，在设置非英语搜索结果时，我也只收到英语结果，但在搜索查询语言的结果中没有收到结果。

例如， [http://graph.facebook.com/search?q=ביבי&type=post](http://graph.facebook.com/search?q=%D7%91%D7%99%D7%91%D7%99&type=post)

不返回任何相关结果（搜索查询是 "ביבי" ，一个希伯来语单词。返回的结果都不是希伯来语）。

我能做些什么来解决它？

任何建议都会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:42:12.760

要在与您的计算机默认区域设置不同的区域设置中接收响应，您应该在请求中指定它。目前有两种方法可以做到这一点：

1.  `&locale=he_IL`在 URL（[语言环境](https://www.facebook.com/translations/FacebookLocales.xml)[列表）中`Facebook`](https://www.facebook.com/translations/FacebookLocales.xml)使用，例如

    [https://graph.facebook.com/search?q=YOUR_QUERY&type=post&fields=message&locale=he_IL](https://graph.facebook.com/search?q=YOUR_QUERY&type=post&fields=message&locale=he_IL)

2.  在您的请求中使用`Accept-Language`标头，例如

    `'Accept-Language': 'he_IL,he,iw;q=0.9'`

最近，第一种方法有一个错误（现在效果很好），所以我会同时使用它们（第一种方法的优先级高于另一种方法）。

**注意：**在指定语言环境中搜索将返回在该语言环境中可用的帖子。

# xml - 如何使用 XSD 在 XML 中定义交替元素

> ID：14456190
> 
> 赞同：1
> 
> 时间：2013-01-22T10:17:53.137
> 
> 标签：xml, xsd

我想在我的 XSD 文件中定义两个元素，它们可以多次“无限”出现，但它们必须总是一个接一个地出现。例子：

XML 文件：

```
<company/>
<address/>
<customer/>
<customerContact/>
<customer/>
<customerContact/>
<customer/>
<customerContact/> 
```

现在的问题是，下面的 XSD 定义

```
<xs:element name="company" type="companyType"/>
<xs:element name="address" type="addressType"/>
<xs:element name="customer" type="customerType" maxOccurs="unbounded"/>
<xs:element name="customerContact" type="customerContactType" maxOccurs="unbounded"/> 
```

仅使用 XML 文件，例如

```
<company/>
<address/>
<customer/>
<customer/>
<customer/>
<customerContact/>
<customerContact/>
<customerContact/> 
```

*customer*和*customerContact*不交替。我有定义一个元素的想法，该元素表示*customer* **或** *customerContact*并允许重复该元素。这将解决我的问题，但它也将允许其他不应被接受为有效的解决方案。

我认为干净的解决方案是让 XML 像

```
<company/>
<address/>
<customerEnvelope>
    <customer/>
    <customerContact/>
<customerEnvelope>
<customerEnvelope>
    <customer/>
    <customerContact/>
</customerEnvelope> 
```

并重复*customerEnvelope*。不幸的是，我的客户已经提供了 XML 结构，因此我无法在此处进行更改。

是否可以使用 XSD 定义这种结构，还是需要使用上述解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T01:25:31.457

```
<xs:element name="company" type="companyType"/>
<xs:element name="address" type="addressType"/>
<xs:sequence maxOccurs="unbounded">
  <xs:element name="customer" type="customerType"/>
  <xs:element name="customerContact" type="customerContactType"/>
</xs:sequence> 
```

# android - android数据保存目录

> ID：14456191
> 
> 赞同：1
> 
> 时间：2013-01-22T10:17:55.173
> 
> 标签：android, filesystems, directory

我的应用程序主要是 c++（使用 NDK），所以我使用`fopen`,`fwrite`等标准函数来创建和游戏保存文件并写入它们。

当我使用`fopen("game.sav", "wb")`时，它似乎是在路径创建的

`/data/user/10/com.my.game/files/game.sav`.

我的应用程序是多用户的。所以我想要一个单独的文件夹，用户可以在其中存储他们的保存文件。而不是上面的路径，我想要像这样的路径

`/data/user/10/com.my.game/files/user0/game.sav`,

`/data/user/10/com.my.game/files/user1/game.sav`， ETC

我的应用程序的前端是 Java，当注册新用户时，我想创建一个文件夹`/data/user/10/com.my.game/files/user0/`。但我不知道该怎么做，因为

```
final File newDir = context.getDir("user0", Context.MODE_PRIVATE); 
```

导致在`/data/user/10/com.my.game/app_user0`不同的路径上创建路径。

可以在`/data/user/10/com.my.game/files/`以及如何创建文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:46:24.423

**简单的方法，**这个代码你可以改变它以适应许多条件。如果您知道您的路径与 getFilesDir() 获取的路径不同，那么您可以首先使用您知道的路径创建一个文件，最后两行代码仍然相同。

```
 File file = this.getFilesDir(); // this will get you internal directory path
    Log.d("BLA BLA", file.getAbsolutePath());
    File newfile = new File(file.getAbsolutePath() + "/foo"); // foo is the directory 2 create
    newfile.mkdir(); 
```

**如果您知道“文件”目录的路径：**

```
 File newfile2 = new File("/data/data/com.example.stackoverflow/files" + "/foo2");
    newfile2.mkdir(); 
```

两种代码都有效。

**工作证明：**

![工作证明：](../Images/7a55ff7e19adf192c9edcc8d959bc4b8.png)

# linux - linux-如何确定C程序中每个函数花费的时间

> ID：14456192
> 
> 赞同：1
> 
> 时间：2013-01-22T10:18:03.573
> 
> 标签：linux, linux-kernel

我想检查项目中每个函数和系统调用所花费的时间。我的代码是用户空间和内核空间的一部分。所以我需要在这两个空间上花费时间。我有兴趣了解 CPU 时间和磁盘 IO 方面的性能。我应该使用探查器工具吗？如果是，哪个更可取？或者我还有什么其他选择？

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:29:15.023

对于内核空间函数跟踪和分析（包括调用图格式和单个函数所花费的时间），请考虑使用**Ftrace**框架。

专门针对函数分析（在内核中），启用 CONFIG_FUNCTION_PROFILER 内核配置：在 Kernel Hacking / Tracing / Kernel function profiler 下。

这是帮助：

> CONFIG_FUNCTION_PROFILER：
> 
> 此选项启用内核函数分析器。在 debugfs中创建了一个
> 名为 function_profile_enabled 的文件，默认为零。
> 当 1 回显到此文件时，分析开始，当
> 输入零时，分析停止。
> 在trace_stats 目录中创建一个“functions”文件；此文件显示已命中的函数列表及其计数器。

一些资源：

[文档/trace/ftrace.txt](http://lxr.linux.no/linux+v3.7.4/Documentation/trace/ftrace.txt)

[Ftrace 函数跟踪器的秘密](http://lwn.net/Articles/370423/)

[使用 ftrace 识别调用内核函数的进程](http://swapspace.forshee.me/2011/12/using-ftrace-to-identify-process.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:04:03.017

至于内核级别的分析或某些指令或函数所花费的时间可以用所用的时钟来衡量。要获得实际用于执行给定任务的时钟滴答数，可以通过内核函数测量为...

```
#include <sys/time.h>
unsigned long ini,end;
rdtscl(ini);
...your code....
rdtscl(end);

printk("time lapse in cpu clics: %lu\n",(end-ini)); 
```

有关更多详细信息[http://www.xml.com/ldd/chapter/book/ch06.html](http://www.xml.com/ldd/chapter/book/ch06.html) ，如果您的代码需要更多时间，那么您也可以有效地使用**jiffies**。

对于用户空间分析，您可以使用各种计时函数，以纳秒分辨率或 oprofile（[http://oprofile.sourceforge.net/about/](http://oprofile.sourceforge.net/about/)）提供时间，并参考[使用 C++ 以纳秒为单位提供时间的 Timer 函数](https://stackoverflow.com/questions/275004/c-timer-function-to-provide-time-in-nano-seconds)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T11:34:44.677

好吧，我只在用户空间开发，所以我不知道这对磁盘 IO 或内核空间分析有多大帮助，但我用 oprofile 分析了很多。

我已经有一段时间没有使用它了，所以我无法为您提供分步指南，但您可以在此处找到更多信息：

[http://oprofile.sourceforge.net/doc/results.html](http://oprofile.sourceforge.net/doc/results.html)

通常这有助于我找到我的问题。您可能需要对 opreport 输出进行一些操作，以获得您想要的结果。

# python - 在python中查找大量列表的交集

> ID：14456201
> 
> 赞同：1
> 
> 时间：2013-01-22T10:18:29.000
> 
> 标签：python, processing-efficiency, computation

我有一个文件，每行包含空格分隔的数字。每行对应一个数字列表。
现在大约有 300,000 条这样的行（每行平均包含大约 100 个数字）。
我想找到所有此类列表的相互交集，即第一个列表与所有其他列表相交，然后第二个列表与所有其他列表相交，依此类推。
我在用

```
set(a) & set(b) 
```

其中 a 和 b 是我在双循环中迭代的列表。
但这需要太多时间。例如：对于与所有其他列表相交的第一个列表，大约需要 3 分钟。
我怎样才能有效地做到这一点？（可能与其他一些语言/工具一起使用）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T10:21:59.247

您应该在这里使用生成器表达式，它们会进行惰性计算并节省大量内存：

```
In [46]: from itertools import imap

In [47]: a = [[1,2,3], [2,3,4], [3,4,5]]

In [48]: reduce(set.intersection,imap(set,a))
Out[48]: set([3]) 
```

考虑到您的文件如下所示：

```
1 2 3
2 3 4
3 4 5 
```

代码：使用`itertools.combinations()`：

```
with open("abc.txt") as f:
    lines=(map(int,x.split()) for x in f)
    for x in combinations(lines,2):
        print x,'-->',reduce(set.intersection,imap(set,x))
   ....:         
([1, 2, 3], [2, 3, 4]) --> set([2, 3])
([1, 2, 3], [3, 4, 5]) --> set([3])
([2, 3, 4], [3, 4, 5]) --> set([3, 4]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:42:38.447

出现的第一个想法是首先构建所有集合一次，如果它们都适合内存，然后将它们相交。

如果你真的需要 300000 行与 300000 行的所有交点，无论如何都需要时间。也许你应该重新考虑你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T11:25:26.640

我认为您可以通过创建倒排索引来优化这一点，即映射编号 => 包含此编号的行列表。例如，如果`10`发生在第 5、100、200 行，那么您将拥有

```
10: [5, 100, 200] 
```

为了进一步优化这一点，您可以将行列表存储为一组对：

```
10: set( (5,100), (5,200), (100,200) ) 
```

然后，要计算 list_a + list_b 的交集，只需找到关联的 rowlist 包含的所有数字`(list_a, list_b)`。

# iphone - 如何模糊 UIImage，但保留清晰的对象边界？

> ID：14456202
> 
> 赞同：0
> 
> 时间：2013-01-22T10:18:30.247
> 
> 标签：iphone, ios, image-processing, uiimage

我想对 UIImage 执行“智能”模糊，其中内容模糊，但边缘仍然清晰。

例如，这是我的原始图像：

![清晰的原始图像](../Images/669e5dc2c81ee34ca5cfad6349a2c20f.png)

这是应用此模糊后我想看到的内容：

![图像模糊](../Images/0f93e32ed5c477fb27db69ae04bb2f95.png)

如何在 UIImage 上进行这样的“智能”模糊？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T20:37:03.557

您在此处寻找的模糊称为双边模糊。与标准高斯模糊不同，周围像素颜色与中心像素颜色基于它们与中心像素的相似程度进行平均。这会模糊对象的内部区域，但保留清晰的轮廓。

在我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架中，我有一个过滤器，称为 GPUImageBilateralFilter。这是应用于图像时的输出（使用 1.0 的 blurSize 和 1.6 的 distanceNormalizationFactor）：

![使用双边模糊过滤橙色](../Images/480abc668cc543086b70c276bb6d4823.png)

我的结果和您的目标之间存在一些细微差别，但这可能是由于我使用的特定权重。通过在此处调整参数，您应该能够更接近上述情况。

OpenCV 也有双边模糊过滤器，如果你想在这个框架之外使用它，你可以将源代码带到我的片段着色器并使用它来构建你自己的 OpenGL ES 实现：

```
 uniform sampler2D inputImageTexture;

 const lowp int GAUSSIAN_SAMPLES = 9;

 varying highp vec2 textureCoordinate;
 varying highp vec2 blurCoordinates[GAUSSIAN_SAMPLES];

 uniform mediump float distanceNormalizationFactor;

 void main()
 {
     lowp vec4 centralColor;
     lowp float gaussianWeightTotal;
     lowp vec4 sum;
     lowp vec4 sampleColor;
     lowp float distanceFromCentralColor;
     lowp float gaussianWeight;

     centralColor = texture2D(inputImageTexture, blurCoordinates[4]);
     gaussianWeightTotal = 0.18;
     sum = centralColor * 0.18;

     sampleColor = texture2D(inputImageTexture, blurCoordinates[0]);
     distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);
     gaussianWeight = 0.05 * (1.0 - distanceFromCentralColor);
     gaussianWeightTotal += gaussianWeight;
     sum += sampleColor * gaussianWeight;

     sampleColor = texture2D(inputImageTexture, blurCoordinates[1]);
     distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);
     gaussianWeight = 0.09 * (1.0 - distanceFromCentralColor);
     gaussianWeightTotal += gaussianWeight;
     sum += sampleColor * gaussianWeight;

     sampleColor = texture2D(inputImageTexture, blurCoordinates[2]);
     distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);
     gaussianWeight = 0.12 * (1.0 - distanceFromCentralColor);
     gaussianWeightTotal += gaussianWeight;
     sum += sampleColor * gaussianWeight;

     sampleColor = texture2D(inputImageTexture, blurCoordinates[3]);
     distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);
     gaussianWeight = 0.15 * (1.0 - distanceFromCentralColor);
     gaussianWeightTotal += gaussianWeight;
     sum += sampleColor * gaussianWeight;

     sampleColor = texture2D(inputImageTexture, blurCoordinates[5]);
     distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);
     gaussianWeight = 0.15 * (1.0 - distanceFromCentralColor);
     gaussianWeightTotal += gaussianWeight;
     sum += sampleColor * gaussianWeight;

     sampleColor = texture2D(inputImageTexture, blurCoordinates[6]);
     distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);
     gaussianWeight = 0.12 * (1.0 - distanceFromCentralColor);
     gaussianWeightTotal += gaussianWeight;
     sum += sampleColor * gaussianWeight;

     sampleColor = texture2D(inputImageTexture, blurCoordinates[7]);
     distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);
     gaussianWeight = 0.09 * (1.0 - distanceFromCentralColor);
     gaussianWeightTotal += gaussianWeight;
     sum += sampleColor * gaussianWeight;

     sampleColor = texture2D(inputImageTexture, blurCoordinates[8]);
     distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);
     gaussianWeight = 0.05 * (1.0 - distanceFromCentralColor);
     gaussianWeightTotal += gaussianWeight;
     sum += sampleColor * gaussianWeight;

     gl_FragColor = sum / gaussianWeightTotal;
 } 
```

# unix - 如何使用 Wget 下载 XML 网页

> ID：14456203
> 
> 赞同：9
> 
> 时间：2013-01-22T10:18:32.337
> 
> 标签：unix, wget

我想使用 Unix从[网上](http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=%28Alum%29%20AND%20Adjuvant&retmax=10)`wget`下载一个 XML 。原则上简单地获取它并将其保存到文件中。

这是我使用的命令：

```
wget http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=Alum+AND+Adjuvant&retmax=100 --output-document=test.xml 
```

但是如果下载失败。正确的方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T10:23:07.663

You must quote the url like

```
 wget "http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=Alum+AND+Adjuvant&retmax=100" --output-document=test.xml 
```

since the url contains meta characters that influence the processing of the line.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-02-07T08:10:58.993

如果`--output-document`不起作用，您可以使用`-O`

```
wget -O test.xml
    "http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=Alum+AND+Adjuvant&retmax=100" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:29:27.140

```
 wget --output-document=test.xml "http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=Alum+AND+Adjuvant&retmax=100" 
```

# time - 仅在特定时间运行的批处理文件

> ID：14456204
> 
> 赞同：2
> 
> 时间：2013-01-22T10:18:36.163
> 
> 标签：time, batch-file, range

我想只在一天中的特定时间（范围）运行批处理。

例如，想法是让它从早上 7:00 运行到下午 06:00。

我知道`%TIME%`返回当前时间，现在缺少的是检查这个值的方法，如果她在批处理将执行的范围内，如果不是批处理将停在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:08:29.963

这对我有用（Win7）：

> for /f "tokens=1-3 delims=:" %%a in ("%time%") do if %%a geq 7 if %%a leq 18 echo hello

您可以更改`echo hello`为任何类似`goto ok`的内容，接下来的两行将是例如`goto end`and `:ok`。

如果您直接在命令提示符下尝试，请不要忘记将其粘贴到批处理文件或使用 %a 而不是 %%a。

# ember.js - Ember.js pre4，怎么做之前pre2 connectOutlet的东西

> ID：14456215
> 
> 赞同：5
> 
> 时间：2013-01-22T10:19:11.750
> 
> 标签：ember.js, ember-router

在 pre2 中，假设我在路由器外部有这个应用程序代码：

```
 var controller = App.MyController.create();
  controller.content = [...];

  App.get('router').get('applicationController').connectOutlet({
    outletName: 'modal',
    controller: controller,
    viewClass: App.MyView,
    context: controller
  }); 
```

也就是说，我用我的数据填充添加到“应用程序”模板中的名为“模态”的插座。

现在，在 pre4 中，我没有参考路由器创建的控制器。您将如何填充路由器外部的插座？

我可以要求路由器进行转换，但我不想修改 URL，因为我只是在当前内容上打开一个模式。

编辑：

这就是我想出的临时修复方法，通过从 App.Router.router 对象查找应用程序视图.. 显然这是一个肮脏的黑客，有人知道在 pre4 中最好和正确的方法吗？

```
 var controller = App.MyController.create();
  controller.content = this.get('content');

  var theView = App.MyView.create();
  theView.set('controller', controller);

  App.Router.router.currentHandlerInfos[0].handler.router._activeViews.application[0].connectOutlet('modal', theView); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:40:07.670

如果您只需要将视图添加到应用程序中，您可以在这个问题中使用我的解决方案：

[使用 Ember 路由器 v2 进入和退出模态状态的正确方法是什么？](https://stackoverflow.com/questions/14327949/whats-the-right-way-to-enter-and-exit-modal-states-with-ember-router-v2/14342628#14342628)

但是，如果您还需要将其添加为一个出口，您可以通过向路由器发送一个事件并在事件中渲染它而不将其转换到另一个路由来实现。

```
events: {
    showModal: function(){
        this.render('modal', {into: 'index', outlet: 'modalOutlet', controller = this.controllerFor('modal')}); 
    }
} 
```

请参阅小提琴的示例：

[http://jsfiddle.net/Energiz0r/gChWa/1](http://jsfiddle.net/Energiz0r/gChWa/1)

# flume - Flume 代理 - 使用 tail -F

> ID：14456216
> 
> 赞同：1
> 
> 时间：2013-01-22T10:19:14.013
> 
> 标签：flume

我是 Apache Flume 的新手。我创建了我的代理，例如：

```
agent.sources=exec-source
agent.sinks=hdfs-sink
agent.channels=ch1

agent.sources.exec-source.type=exec
agent.sources.exec-source.command=tail -F /var/log/apache2/access.log

agent.sinks.hdfs-sink.type=hdfs
agent.sinks.hdfs-sink.hdfs.path=hdfs://<Host-Name of name node>/
agent.sinks.hdfs-sink.hdfs.filePrefix=apacheaccess

agent.channels.ch1.type=memory
agent.channels.ch1.capacity=1000

agent.sources.exec-source.channels=ch1
agent.sinks.hdfs-sink.channel=ch1 
```

我得到的输出是：

```
13/01/22 17:31:48 INFO lifecycle.LifecycleSupervisor: Starting lifecycle supervisor 1
13/01/22 17:31:48 INFO node.FlumeNode: Flume node starting - agent
13/01/22 17:31:48 INFO properties.PropertiesFileConfigurationProvider: Configuration provider starting
13/01/22 17:31:48 INFO nodemanager.DefaultLogicalNodeManager: Node manager starting
13/01/22 17:31:48 INFO lifecycle.LifecycleSupervisor: Starting lifecycle supervisor 9
13/01/22 17:31:48 INFO properties.PropertiesFileConfigurationProvider: Reloading configuration file:conf/flume_exec.conf
13/01/22 17:31:48 INFO conf.FlumeConfiguration: Added sinks: hdfs-sink Agent: agent
13/01/22 17:31:48 INFO conf.FlumeConfiguration: Processing:hdfs-sink
13/01/22 17:31:48 INFO conf.FlumeConfiguration: Processing:hdfs-sink
13/01/22 17:31:48 INFO conf.FlumeConfiguration: Processing:hdfs-sink
13/01/22 17:31:48 INFO conf.FlumeConfiguration: Processing:hdfs-sink
13/01/22 17:31:48 INFO conf.FlumeConfiguration: Post-validation flume configuration contains configuration  for agents: [agent]
13/01/22 17:31:48 INFO properties.PropertiesFileConfigurationProvider: Creating channels
13/01/22 17:31:48 INFO properties.PropertiesFileConfigurationProvider: created channel ch1
13/01/22 17:31:48 INFO sink.DefaultSinkFactory: Creating instance of sink: hdfs-sink, type: hdfs
13/01/22 17:31:48 INFO hdfs.HDFSEventSink: Hadoop Security enabled: false
13/01/22 17:31:48 INFO nodemanager.DefaultLogicalNodeManager: Starting new configuration:{ sourceRunners:{exec-source=EventDrivenSourceRunner: { source:org.apache.flume.source.ExecSource{name:exec-source,state:IDLE} }} sinkRunners:{hdfs-sink=SinkRunner: { policy:org.apache.flume.sink.DefaultSinkProcessor@715d44 counterGroup:{ name:null counters:{} } }} channels:{ch1=org.apache.flume.channel.MemoryChannel{name: ch1}} }
13/01/22 17:31:48 INFO nodemanager.DefaultLogicalNodeManager: Starting Channel ch1
13/01/22 17:31:48 INFO instrumentation.MonitoredCounterGroup: Monitoried counter group for type: CHANNEL, name: ch1, registered successfully.
13/01/22 17:31:48 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: ch1 started
13/01/22 17:31:48 INFO nodemanager.DefaultLogicalNodeManager: Starting Sink hdfs-sink
13/01/22 17:31:48 INFO nodemanager.DefaultLogicalNodeManager: Starting Source exec-source
13/01/22 17:31:48 INFO source.ExecSource: Exec source starting with command:tail -F /var/log/apache2/access.log
13/01/22 17:31:48 INFO instrumentation.MonitoredCounterGroup: Monitoried counter group for type: SINK, name: hdfs-sink, registered successfully.
13/01/22 17:31:48 INFO instrumentation.MonitoredCounterGroup: Component type: SINK, name: hdfs-sink started 
```

但它不会将日志写入 HDFS。

当我运行`cat /var/log/apache2/access.log`而不是`tail –F /var/log/apache2/access.log`运行时，我的文件是在 HDFS 上创建的。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:42:53.730

“tail -F”默认情况下仅在开始时打印文件的最后 10 行。看起来 10 行不足以填满 HDFS 块，所以你看不到 Flume 写的任何东西。你可以：

*   尝试“tail -n $X -F”在开始时打印最后 X 行（X 的值将根据 HDFS 设置中的块大小而有所不同）
*   等到在 Flume 运行时 access.log 变得足够大（同样，等待的时间将取决于块的大小和 access.log 的增长速度；我认为在生产模式下它会足够快）
*   将以下行添加到您的 flume.conf 中。无论写入数据的大小如何，它将强制 Flume 每 10 秒滚动一次新文件（假设它不为零）：

    agent.sinks.hdfs-sink.hdfs.rollInterval = 10

    agent.sinks.hdfs_sink.hdfs.rollSize = 0

# android - FragmentManager popBackStack 不起作用 - 错误？

> ID：14456222
> 
> 赞同：9
> 
> 时间：2013-01-22T10:19:32.843
> 
> 标签：android, android-fragments, android-sdk-tools

我正在使用此代码将我的 backstack 清理到我的主视图：

```
while(mFragmentManager.getBackStackEntryCount() > 1) {
            mFragmentManager.popBackStack(null, 0);
} 
```

我很确定这段代码以前可以工作，但是现在 backstack 计数没有改变，也没有 Fragment 被删除，这会导致内存不足异常，因为 while 循环继续运行。

有谁知道它是否有问题，或者 SDK 工具的最新版本中是否存在错误。我不知道是什么导致了问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-05T00:09:47.677

您可能正在寻找`popBackStackImmediate()`. 这会立即执行回栈弹出。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-12T11:31:41.630

你也可以`.executePendingTransactions();`在之后使用`popBackStack();`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-22T12:47:43.720

我当然不会认为这`popBackStack()`会立即产生影响，而您的循环似乎会这样做。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-15T06:00:38.040

什么文件说 `popBackStack()`：

> 弹出所有返回堆栈状态，直到具有给定标识符的状态。 **该函数是异步**的——它将要弹出的请求排入队列，但直到应用程序返回其事件循环后才会执行该操作。

因此，在 `mFragmentManager.popBackStack(null, 0);`您的后台堆栈不为空之后，直到您的事件完全处理。

用于`popBackStackImmediate()`在当前事件本身中立即清空它。

# phpdoc - 是否有任何 phpDocumentor 2 可打印输出？

> ID：14456226
> 
> 赞同：0
> 
> 时间：2013-01-22T10:19:44.397
> 
> 标签：phpdoc

有没有使用 phpDocumentor 2 快速输出可打印文档的方法？

选项 -o 不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T20:36:44.827

一种可能的方法是创建一个自定义模板（基于 XSLT 或 Twig），将已编译的类信息转换为可打印的 HTML。[查看PHPDocumentor 2 存储库](https://github.com/phpDocumentor)中的现有模板，了解模板的外观。您可以删除许多不需要的导航内容。

# jquery - 在 Django 模板或 Jquery 中实现选项卡

> ID：14456231
> 
> 赞同：0
> 
> 时间：2013-01-22T10:20:07.207
> 
> 标签：jquery, django, django-templates

我正在构建一个带有标签导航的 django 应用程序。当点击选项卡时，只有页面的中间部分发生了变化，其余部分保持不变。我还想在有人单击选项卡并加载它时放置一种加载信号。如果 django 模板可以工作或者我应该使用 jquery，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:08:04.567

忽略加载信号，您可以通过多种方式实现您所追求的结果。

**不使用 javascript/jquery**

单击的每个选项卡都会执行完整的页面加载。可以使用 Django 模板来填充屏幕的公共部分，中间可以根据单击的选项卡进行渲染。您可以使用模板继承来避免重复。如果没有 javascript 的帮助，在单击新选项卡后重新加载页面期间可能无法显示信号。

**使用 jQuery**

使用 jquery，可以使用 AJAX 从服务器请求刚刚单击的选项卡的页面内容。由您决定将哪些数据作为来自 Django 的 AJAX 请求的一部分。

您可以选择让 Django 提供数据的 JSON 表示，内容由执行格式化的 javascript 库在客户端处理。在这种情况下，不需要模板。

或者，您可以让 Django 将每个选项卡的数据作为呈现的 HTML 提供，您只需将其插入 DOM 客户端。在这种情况下，您可能会使用 Django 模板来格式化选项卡 HTML 数据。

使用任何 javascript 选项，都可以将事件处理程序附加到显示适当加载信号的加载函数。

**概括**

回答您关于是否使用 jquery*或*模板的问题？这取决于。您可能想同时使用两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:59:55.363

我还在我的 Django 应用程序中实现了相同的选项卡概念:)，

为了实现这一点，你需要使用 jQuery 这个[链接 1](http://jqueryui.com/tabs/#cookie)和[链接 2](http://www.my-html-codes.com/jquery-tabs-my-first-plugin)会给你一些想法。

如果您只想加载单击的选项卡内容，请使用 Jquery 单击事件和 Ajax 调用，请参阅[此](https://code.djangoproject.com/wiki/AJAX)

# xaml - 如何在 mvvm silverlight 中创建树视图

> ID：14456235
> 
> 赞同：0
> 
> 时间：2013-01-22T10:20:10.997
> 
> 标签：xaml, mvvm, silverlight-4.0

任何人都可以有简单的程序在silverlight mvvm中创建树视图。我们可以在没有使用 system.Interactivity.dll 或没有触发器的情况下在 silverlight mvvm 中编写树视图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:55:38.213

看看这里的示例[http://dotnetslackers.com/articles/silverlight/Using-the-TreeView-control-in-Silverlight-4.aspx](http://dotnetslackers.com/articles/silverlight/Using-the-TreeView-control-in-Silverlight-4.aspx)为什么你不想使用交互 dll？在我看来，这是 Silverlight 中最好的东西之一。触发器使代码保持非常干净。

# concurrency - 为什么我无法使用 GTX 480 和 CUDA 5 重叠数据传输和计算？

> ID：14456236
> 
> 赞同：6
> 
> 时间：2013-01-22T10:20:13.943
> 
> 标签：concurrency, cuda, overlapping, nsight

我试图将内核执行与 memcpyasync 重叠，但它不起作用。我遵循编程指南中的所有建议，使用固定内存、不同的流等。我看到内核执行确实重叠，但它与内存传输无关。我知道我的卡只有一个复制引擎和一个执行引擎，但是执行和传输应该重叠，对吧？

似乎“复制引擎”和“执行引擎”总是执行我调用函数的顺序。工作包括执行 [HtoD x2, Kernel, DtoH] 的 4 个流。如果我在每个流上发出 HtoDx2,Kernel,DtoH 系列，我会在分析器中看到 stream2 HtoD 第一个操作在第一个 DtoH 操作结束之前不会开始。如果我首先在每个流上发布 HtoD，然后是第二个 HtoD，然后是内核，然后是 DtoH（宽度），我看不到重叠，并且发布顺序也由 GPU 强制执行。

我已经尝试过使用 CUDA SDK 中给出的 simpleStreams 示例，我也看到了相同的行为。

我附上了一些屏幕截图，显示了 VS2008 的视觉分析器和 Nsight 中的问题。

附言。我没有设置 CUDA_LAUNCH_BLOCKING 环境

**简单流可视化分析器** ![简单流可视化分析器](../Images/c874c5c809e656ebefbd50882c9bf51c.png)

**MyApp Nsight 时间线广度优先** ![MyApp Nsight 时间线广度优先](../Images/1adcc08ea1ffd33b3b58497f50714725.png)

**MyApp Nsight 时间线深度优先** ![MyApp Nsight 时间线深度优先](../Images/320a3762fce07691ce7de43ba5d70d11.png)

**编辑**：

放置额外的 x4 内核（总共 2HtoD，5 个内核，每个流 1DtoH）--> 如果我在使用和不使用 --concurrent-kernels-off 的情况下运行 nvprof，则经过的时间是相同的。如果我设置 env CUDA_LAUNCH_BLOCKING=1，那么我会看到（从命令行）7.5% 的性能提升！

系统规格：

*   Windows 7的
*   第一个 PCI-E 插槽中的 NVIDIA 6800 VGA
*   第二个 PCI-E 插槽中的 GTX480
*   英伟达驱动程序：306.94
*   视觉工作室 2008
*   CUDA v5.0
*   可视化探查器 5.0
*   Nsight 3.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T11:49:28.323

正如我在评论中所说，CUDA 驱动程序确实存在一个错误，它使流媒体无法与我的设置一起使用。我已经测试了 1.1 功能卡 (8800 GTS) 和 3.5 功能卡 (GTX Titan) 并且两张卡都可以正常工作。似乎某些 Fermi 卡有问题（我的 GTX 480 不工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T02:24:59.223

I just incurred with the same problem. I agree with your that there is a BUG. I think the bug is either in CUDA driver for Windows, or in the Windows itself. I have tested my code and it works well (with overlapping) in Linux.

In fact, you could test the "simpleStreams" example in SDK. I found that the "simpleStreams" running in Windows doesn't have overlapping between kernel and memory copy at all, but when in Linux it works perfectly.

I am using CUDA 5.0 and Fermi GTX570\. With your test on 8800GT and GTX Titan, I would agree it is a bug in the CUDA driver for Windows. Hopefully it will be fixed soon.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T08:31:49.307

> **TL;DR:** The issue is caused by the WDDM TDR delay option in Nsight Monitor! When set to false, the issue appears. Instead, if you set the TDR delay value to a very high number, and the "enabled" option to true, the issue goes away. **Please, try the options described below (more common), because they are also related to the problem!**

*Read below for other (older) steps followed until i came to the solution above, and some other possible causes.*

I just recently were able to partially solve this problem! It is specific to windows and aero i think. Please try these steps and post your results to help others! I have tried it on GTX 650 and GT 640.

> **Before you do anything, consider [using both onboard gpu(as display) and the discrete gpu (for computations)](https://stackoverflow.com/a/28895372/4382376), because there are verified issues with the nvidia driver for windows! When you use onboard gpu, said drivers don't get fully loaded, so many bugs are evaded. Also, system responsiveness is maintained while working!**

1.  Make sure your concurrency problem is not related to other issues like old drivers (including bios), wrong code, incapable device, etc.
2.  Go to computer>properties
3.  Select advanced system settings on the left side
4.  Go to the Advanced tab
5.  On Performance click settings
6.  In the Visual Effects tab, select the "adjust for best performance" bullet.

This will disable aero and almost all visual effects. If this configuration works, you can try enabling one-by-one the boxes for visual effects until you find the precise one that causes problems!

> Alternatively, you can:

1.  Right click on desktop, select personalize
2.  Select a theme from basic themes, that doesn't have aero.

This will also work as the above, but with more visual options enabled. For my two devices, this setting also works, so i kept it.

> Please, when you try these solutions, come back here and post your findings!

~~For me, it ***solved the problem for most cases (a tiled dgemm i have made)***,but NOTE THAT **i still can't run "simpleStreams" properly and achieve concurrency...**~~

> **更新：**问题已**通过新的 Windows 安装完全解决**！之前的步骤改善了某些情况下的行为，但全新安装解决了所有问题！

我会尝试找到一种不太激进的方法来解决这个问题，也许只恢复注册表就足够了。

# c++ - MSXML 方法是否获取其 BSTR 参数的内存所有权？

> ID：14456240
> 
> 赞同：1
> 
> 时间：2013-01-22T10:20:30.667
> 
> 标签：c++, memory-management, com, msxml, bstr

[MSXML 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/ms757828%28v=vs.85%29.aspx)是否获取其 BSTR 参数的内存所有权？

例如：[`load`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762722%28v=vs.85%29.aspx)、[`getElementsByTagName`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms765549%28v=vs.85%29.aspx)或[`selectSingleNode`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms757846%28v=vs.85%29.aspx)

我问这个是因为我看到代码只是调用`CString`'s`AllocSysString()`并将其传递给 MSXML 方法而不`SysFreeString()`随后调用。

***编辑：***
快速修复我看到的代码`_bstr_t`： [https](https://stackoverflow.com/a/14471409/109747) ://stackoverflow.com/a/14471409/109747 （我的帖子）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:19:30.667

请注意，关于所有权的规则与特定库无关（假设一个尊重规则的合理编写的库！）。

大多数情况下，它们都是关于常识的。

1.  如果您从方法*接收*参数，那么您现在就是它的所有者。
    **常识**：其方法将值传回的对象无法知道参数值将如何使用以及何时不再需要。它别无选择，只能放弃所有权，而您是新的所有者。
2.  如果您*将*参数“按值”传递给方法，您仍然是所有者。
    **常识**：方法不知道参数来自哪里。它无法知道您是否还需要它。因此，它不可能是所有者。你是。
3.  如果*将*参数“通过引用”传递给方法：

    *   您仍然是*引用*的所有者（*参见 2.*）。
    *   您放弃了对传入值的所有权。
    *   您获得了您获得的价值的所有权。

    **常识**：该方法可以更改参考指向的内容。由于您无法提前知道这是否会发生，因此您无法控制发送给该方法的值的生命周期，因此您必须放弃对该方法的所有权。如果方法必须替换引用指向的值，那么它必须是释放它的方法。
    此外，无论该方法将参考点指向其他位置还是保持原始值不变，该方法都无法控制您将如何处理该值（*参见 1.*），因此它必须在调用结束时放弃其所有权.
    如果该方法不修改引用指向的内容，那么它基本上会获得参数值的所有权，并在返回时将相同的所有权放弃给相同的值。

我知道; 这可能都闻起来很臭……您*知道*您通常不拥有方法返回的底层对象。例如，从语义上可以理解，您从给定方法获得的对象与对同一方法（例如某个`->GetCurrentSession()`方法）的相同调用返回的对象相同，那么您怎么能成为它的所有者呢？但我并没有说你拥有对象——我说你拥有参数值，在这种情况下，参数值是一个 COM 接口指针。在这种情况下，所有权意味着您必须`->Release()`在完成后调用它，这不会影响指向同一底层对象的其他接口指针。

*更新以添加一些信息*：
某些类型的事情可能会让人感到困惑，但您只需要剥离图层即可知道该怎么做：

*   BSTR 是指向内存的指针。是的，您通过引用传递内存，但在 COM 中您管理的是指针，而不是底层内存；因此“按值”/“按引用”讨论适用于 BSTR（指针）本身。也就是说，a`BSTR`参数是“按值”，a`BSTR*`是“按引用”。
*   VARIANT 有时包含值，有时包含引用。但同样，在 COM 中，您不直接管理底层值；您管理 VARIANT。“按价值”适用于 VARIANT，并且在 VARIANT 的所有者调用 时会处理任何基础引用`VariantClear(...)`。

@afriza：您提到的代码正在泄漏这些字符串。

# ios - 使用 Google+ iOS API 如何获取登录用户的个人资料详细信息？

> ID：14456241
> 
> 赞同：10
> 
> 时间：2013-01-22T10:20:31.070
> 
> 标签：ios, objective-c, google-plus

我已经成功地从 iPhone 应用程序登录到 google plus。但是如何获取登录用户的详细信息？例如个人资料ID，电子邮件等。

我试过这个， [Stackoverflow回答了一个类似的问题](https://stackoverflow.com/questions/13302904/i-have-integrated-google-plus-in-my-ios-app-but-i-am-not-able-to-get-email-id-o)，但我无法让它工作。在那个示例中，究竟是什么被传递给了 accessTocken，

```
NSString *str =  [NSString stringWithFormat:@"https://www.googleapis.com/oauth2/v1/userinfo?access_token=%@",accessTocken]; 
```

我已经在`- (void)finishedWithAuth: (GTMOAuth2Authentication *)auth error: (NSError *) error { }`方法中实现了该代码。但是`auth.accessToken`返回一个空值。

所以我不能使用 auth.accessToken 来附加该 URL。有没有其他方法可以完成这项工作？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-07-02T12:30:21.950

```
- (void)finishedWithAuth:(GTMOAuth2Authentication *)auth error:(NSError *)error {
    NSLog(@"Received Error %@ and auth object==%@", error, auth);

    if (error) {
        // Do some error handling here.
    } else {
        [self refreshInterfaceBasedOnSignIn];

        GTLQueryPlus *query = [GTLQueryPlus queryForPeopleGetWithUserId:@"me"];

        NSLog(@"email %@ ", [NSString stringWithFormat:@"Email: %@",[GPPSignIn sharedInstance].authentication.userEmail]);
        NSLog(@"Received error %@ and auth object %@",error, auth);

        // 1\. Create a |GTLServicePlus| instance to send a request to Google+.
        GTLServicePlus* plusService = [[GTLServicePlus alloc] init] ;
        plusService.retryEnabled = YES;

        // 2\. Set a valid |GTMOAuth2Authentication| object as the authorizer.
        [plusService setAuthorizer:[GPPSignIn sharedInstance].authentication];

        // 3\. Use the "v1" version of the Google+ API.*
        plusService.apiVersion = @"v1";
        [plusService executeQuery:query
                completionHandler:^(GTLServiceTicket *ticket,
                                    GTLPlusPerson *person,
                                    NSError *error) {
            if (error) {
                //Handle Error
            } else {
                NSLog(@"Email= %@", [GPPSignIn sharedInstance].authentication.userEmail);
                NSLog(@"GoogleID=%@", person.identifier);
                NSLog(@"User Name=%@", [person.name.givenName stringByAppendingFormat:@" %@", person.name.familyName]);
                NSLog(@"Gender=%@", person.gender);
            }
        }];
    }
} 
```

Hope, this will help you

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-12T05:23:48.023

这是获取当前登录用户的电子邮件 ID 的最简单和最简单的方法，首先创建 GPPSignIn 类的实例变量

```
GPPSignIn *signIn; 
```

然后在 viewDidLoad 中初始化它

```
- (void)viewDidLoad
 {
 [super viewDidLoad];

  static NSString * const kClientID = @"your client id";
  signIn = [GPPSignIn sharedInstance];
  signIn.clientID= kClientID;
  signIn.scopes= [NSArray arrayWithObjects:kGTLAuthScopePlusLogin, nil];
  signIn.shouldFetchGoogleUserID=YES;
  signIn.shouldFetchGoogleUserEmail=YES;
  signIn.delegate=self;

 } 
```

接下来`GPPSignInDelegate`在您的视图控制器中实现，您可以获得登录用户的电子邮件 ID

```
 - (void)finishedWithAuth:(GTMOAuth2Authentication *)auth
           error:(NSError *)error
 {  
  NSLog(@"Received Access Token:%@",auth);
  NSLog(@"user google user id  %@",signIn.userEmail); //logged in user's email id
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-17T20:48:49.753

首先，按照[此说明](https://developers.google.com/identity/sign-in/ios/start-integrating)在[Google API 控制台](https://console.developers.google.com)中设置您的项目（并下载配置文件 GoogleService-Info.plist）并将最新的[GoogleSignIn SDK](https://developers.google.com/identity/sign-in/ios/sdk/)
集成 到您的项目中：[集成指南](https://developers.google.com/identity/sign-in/ios/start-integrating)

*一段代码。*

[这是目前使用最新版本的GoogleSignIn SDK](https://developers.google.com/identity/sign-in/ios/sdk/)获取用户信息的代码。

```
#import <GoogleSignIn/GoogleSignIn.h>
//...

@interface ViewController() <GIDSignInDelegate, GIDSignInUIDelegate>
//...

- (IBAction)googleSignInTapped:(id)sender {
    [GIDSignIn sharedInstance].clientID = kClientId;// Replace with the value of CLIENT_ID key in GoogleService-Info.plist
    [GIDSignIn sharedInstance].delegate = self;
    [GIDSignIn sharedInstance].shouldFetchBasicProfile = YES; //Setting the flag will add "email" and "profile" to scopes. 

    NSArray *additionalScopes = @[@"https://www.googleapis.com/auth/contacts.readonly",
                                  @"https://www.googleapis.com/auth/plus.login",
                                  @"https://www.googleapis.com/auth/plus.me"];

    [GIDSignIn sharedInstance].scopes = [[GIDSignIn sharedInstance].scopes arrayByAddingObjectsFromArray:additionalScopes];

    [[GIDSignIn sharedInstance] signIn];
}

#pragma mark - GoogleSignIn delegates
- (void)signIn:(GIDSignIn *)signIn didSignInForUser:(GIDGoogleUser *)user withError:(NSError *)error {
    if (error) {
        //TODO: handle error
    } else {
        NSString *userId   = user.userID;
        NSString *fullName = user.profile.name;
        NSString *email    = user.profile.email;
        NSURL *imageURL    = [user.profile imageURLWithDimension:1024];
        NSString *accessToken = user.authentication.accessToken; //Use this access token in Google+ API calls.

        //TODO: do your stuff 
    }
}

- (void)signIn:(GIDSignIn *)signIn didDisconnectWithUser:(GIDGoogleUser *)user withError:(NSError *)error {
    // Perform any operations when the user disconnects from app here.
}

- (void)signIn:(GIDSignIn *)signIn presentViewController:(UIViewController *)viewController {
    [self presentViewController:viewController animated:YES completion:nil];
}

// Dismiss the "Sign in with Google" view
- (void)signIn:(GIDSignIn *)signIn dismissViewController:(UIViewController *)viewController {
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

你的*AppDelegate.m*

```
#import <GoogleSignIn/GoogleSignIn.h>
//...
@implementation AppDelegate

//...
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    //...
    return YES;
}

//For iOS 9.0 and later
- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary *)options {
    //...
    return [[GIDSignIn sharedInstance] handleURL:url
                               sourceApplication:options[UIApplicationOpenURLOptionsSourceApplicationKey]
                                      annotation:options[UIApplicationOpenURLOptionsAnnotationKey]];
}

//For your app to run on iOS 8 and older, 
- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url sourceApplication:(nullable NSString *)sourceApplication annotation:(nonnull id)annotation {
    //...
    return [[GIDSignIn sharedInstance] handleURL:url
                               sourceApplication:sourceApplication
                                      annotation:annotation];
}

@end 
```

还要确保您添加了带有您的**REVERSED_CLIENT_ID**的 URL Scheme，您可以在 GoogleService-Info.plist 中找到它。

* * *

为了能够在 Google+ 中获取您的连接列表，您需要在[Google API Console](https://console.developers.google.com)中为您的项目启用`Google People API`和启用。`Google+ API`

然后只需将 HTTP 请求发送到以下网址： **[https ://www.googleapis.com/plus/v1/people/me/people/visible?access_token=YOUR_ACCESS_TOKEN](https://www.googleapis.com/plus/v1/people/me/people/visible?access_token=YOUR_ACCESS_TOKEN)**

* * *

要检查用户是否有 Google+ 个人资料，只需将 HTTP 请求发送到以下网址： **[https](https://www.googleapis.com/plus/v1/people/USER_ID?access_token=YOUR_ACCESS_TOKEN)**`"isPlusUser"` ://www.googleapis.com/plus/v1/people/USER_ID?access_token=YOUR_ACCESS_TOKEN 并检查其 值为`"true"`or`"false"`

[![在此处输入图像描述](../Images/f49fe98d8e0d7464ffe31eeafb462b5d.png)](https://i.stack.imgur.com/84vBf.png)

*小红利*
[示例项目](https://github.com/arturdev/Google-demo)

# java - Java 在绘制线条时使用 jpanel 和 jscrollpane

> ID：14456248
> 
> 赞同：0
> 
> 时间：2013-01-22T10:20:52.347
> 
> 标签：java, swing, user-interface, jpanel, jscrollpane

我开发了一个软件解决方案来直观地连接 Java 组件，它工作正常。我现在唯一的问题是我的仪表板被 jscrollpane 包围，这很好。但是，如果我离开仪表板以使 jscrollpane 必须增长，则为连接组件而绘制的所有线都将从它们的位置移动。我已经搜索了获取 jscollpane 实际屏幕大小的方法，但一无所获。

如果需要，我会使用以下方法来增加 jscrollpane：

```
Point p = (mainPanel.getMousePosition());
if(mainPanel.getWidth() - (p.x) < tmp.getWidth() && mainPanel.getHeight() - (p.y) < tmp.getHeight())
{
    dim = new Dimension(dim.width+(mainPanel.getWidth()-p.x),dim.height+mainPanel.getHeight() - (p.y));
}
else if(mainPanel.getHeight() - (p.y) < tmp.getHeight())
{
    dim = new Dimension(dim.width,dim.height+mainPanel.getHeight() - (p.y));
}
else if(mainPanel.getWidth() - (p.x) < tmp.getWidth())
{
    dim = new Dimension(dim.width+(mainPanel.getWidth()-p.x),dim.height);
}
mainPanel.setPreferredSize(dim); 
```

拖动鼠标时。

所以我需要在 jscrollpane 中获取左上点的坐标来计算新坐标或将线条正确向后移动的东西。

要绘制我使用的线条：

```
@Override
public void paint(Graphics g) {
    super.paint(g);
    Graphics2D g2d = (Graphics2D) g;

    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);

    // test
    Line2D tmp_line;
    for (int i = 0; i < abuttons.size(); i++) {
        // System.out.println(abuttons.get(i).out);
        if (abuttons.get(i).out != null) {
            int x1 = abuttons.get(i).getLocation().x
                    + abuttons.get(i).connectBtn_right.getLocation().x 
                    + 12;
            int y1 = abuttons.get(i).getLocation().y
                    + abuttons.get(i).connectBtn_right.getLocation().y 
                    + 9 + 75;
            int x2 = abuttons.get(i).out.getLocation().x
                    + abuttons.get(i).out.connectBtn_left.getLocation().x
                    + 12;
            int y2 = abuttons.get(i).out.getLocation().y
                    + abuttons.get(i).out.connectBtn_left.getLocation().y
                    + 9 + 75;

            tmp_line = new Line2D.Double(x1, y1, x2, y2);
            g2d.setPaint(Color.BLACK);
            g2d.setStroke(new BasicStroke(1.5f));
            g2d.draw(tmp_line);
        }
    }
    if (point1 != null && point2 != null) {
        line2d = new Line2D.Double(point1, point2);
        g2d.setPaint(Color.RED);
        g2d.setStroke(new BasicStroke(1.5f));// set stroke size
        g2d.draw(line2d);
    }
} 
```

谢谢你的帮助

这里是 SSCCE：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JScrollPane;
import javax.swing.JButton;

public class LineDraw extends JFrame {

private JPanel contentPane;
JScrollPane scrollPane = new JScrollPane();
JPanel panel = new JPanel();
JButton btnNewButton = new JButton("New button");
JButton btnNewButton_1 = new JButton("New button");

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                LineDraw frame = new LineDraw();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public LineDraw() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 450, 300);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);

    scrollPane.setBounds(0, 0, 424, 251);
    contentPane.add(scrollPane);

    scrollPane.setViewportView(panel);
    panel.setLayout(null);

    btnNewButton.setBounds(27, 98, 89, 23);
    panel.add(btnNewButton);

    btnNewButton_1.setBounds(213, 137, 89, 23);
    panel.add(btnNewButton_1);
    initListener();
}

private void initListener()
{
    btnNewButton.addMouseMotionListener(new MouseAdapter() {
            @Override
            public void mouseDragged(MouseEvent me) {
                super.mouseDragged(me);
                Point pos = panel.getMousePosition();
                System.out.println(pos);
                if(panel.getWidth()-pos.x<50 && panel.getHeight()-pos.y<50)
                {
                    panel.setPreferredSize(new Dimension(panel.getWidth()+50,panel.getHeight()+50));
                }
                else if(panel.getHeight()-pos.y<50)
                {
                    panel.setPreferredSize(new Dimension(panel.getWidth(),panel.getHeight()+50));
                }                   
                else if(panel.getWidth()-pos.x<50)
                {
                    panel.setPreferredSize(new Dimension(panel.getWidth()+50,panel.getHeight()));
                }
                btnNewButton.setLocation(pos);
                repaint();
                validate();
            }
        });
    btnNewButton_1.addMouseMotionListener(new MouseAdapter() {
        @Override
        public void mouseDragged(MouseEvent me) {
            super.mouseDragged(me);
            Point pos = panel.getMousePosition();
            if(panel.getWidth()-pos.x<50 && panel.getHeight()-pos.y<50)
            {
                panel.setPreferredSize(new Dimension(panel.getWidth()+50,panel.getHeight()+50));
            }
            else if(panel.getHeight()-pos.y<50)
            {
                panel.setPreferredSize(new Dimension(panel.getWidth(),panel.getHeight()+50));
            }                   
            else if(panel.getWidth()-pos.x<50)
            {
                panel.setPreferredSize(new Dimension(panel.getWidth()+50,panel.getHeight()));
            }
            btnNewButton_1.setLocation(panel.getMousePosition());
            repaint();
            validate();
        }
    });
}

@Override
public void paint(Graphics g)
{
    super.paint(g);
    g.drawLine(btnNewButton.getLocation().x+10,btnNewButton.getLocation().y+32, btnNewButton_1.getLocation().x+10,btnNewButton_1.getLocation().y+32);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T11:13:30.130

覆盖`paintComponent()`而`panel`不是`paint()`_`JFrame`

```
import javax.swing.*;
import javax.swing.border.EmptyBorder;
import java.awt.*;
import java.awt.event.*;

public class LineDraw extends JFrame {

    private JPanel contentPane;
    JScrollPane scrollPane = new JScrollPane();
    JPanel panel = new JPanel(){
        @Override
        public void paintComponent(Graphics g)
        {
            super.paintComponent(g);
            g.drawLine(btnNewButton.getLocation().x,btnNewButton.getLocation().y, btnNewButton_1.getLocation().x,btnNewButton_1.getLocation().y);
        }

    };
    JButton btnNewButton = new JButton("New button");
    JButton btnNewButton_1 = new JButton("New button");

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    LineDraw frame = new LineDraw();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public LineDraw() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null);

        scrollPane.setBounds(0, 0, 424, 251);
        contentPane.add(scrollPane);

        scrollPane.setViewportView(panel);
        panel.setLayout(null);

        btnNewButton.setBounds(27, 98, 89, 23);
        panel.add(btnNewButton);

        btnNewButton_1.setBounds(213, 137, 89, 23);
        panel.add(btnNewButton_1);
        initListener();
    }

    private void initListener()
    {
        btnNewButton.addMouseMotionListener(new MouseAdapter() {
            @Override
            public void mouseDragged(MouseEvent me) {
                super.mouseDragged(me);
                Point pos = panel.getMousePosition();
                System.out.println(pos);
                if(panel.getWidth()-pos.x<50 && panel.getHeight()-pos.y<50)
                {
                    panel.setPreferredSize(new Dimension(panel.getWidth()+50,panel.getHeight()+50));
                }
                else if(panel.getHeight()-pos.y<50)
                {
                    panel.setPreferredSize(new Dimension(panel.getWidth(),panel.getHeight()+50));
                }
                else if(panel.getWidth()-pos.x<50)
                {
                    panel.setPreferredSize(new Dimension(panel.getWidth()+50,panel.getHeight()));
                }
                btnNewButton.setLocation(pos);
                validate();
                repaint();
            }
        });
        btnNewButton_1.addMouseMotionListener(new MouseAdapter() {
            @Override
            public void mouseDragged(MouseEvent me) {
                super.mouseDragged(me);
                Point pos = panel.getMousePosition();
                if(panel.getWidth()-pos.x<50 && panel.getHeight()-pos.y<50)
                {
                    panel.setPreferredSize(new Dimension(panel.getWidth()+50,panel.getHeight()+50));
                }
                else if(panel.getHeight()-pos.y<50)
                {
                    panel.setPreferredSize(new Dimension(panel.getWidth(),panel.getHeight()+50));
                }
                else if(panel.getWidth()-pos.x<50)
                {
                    panel.setPreferredSize(new Dimension(panel.getWidth()+50,panel.getHeight()));
                }
                btnNewButton_1.setLocation(panel.getMousePosition());
                validate();
                repaint();
            }
        });
    }

} 
```

并完全删除该`paint()`方法。

# python - Python中的字符串比较，首字母不区分大小写

> ID：14456251
> 
> 赞同：1
> 
> 时间：2013-01-22T10:21:03.673
> 
> 标签：python, case-insensitive

我需要匹配以下字符串`File system full`。问题是开始 F 可以是小写或大写。当字符串比较通常区分大小写时，如何在 Python 中执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:25:22.437

我将提供布尔指标供您使用（`if`为简洁起见，而不是实际块。

使用正则表达式：

```
import re
bool(re.match('[F|f]',<your string>)) #if it matched, then it's true.  Else, false. 
```

如果字符串可以在您的输出中的任何位置（我假设字符串）

```
import re
bool(re.search('[F|f]ile system full',<your string>)) 
```

其他选项：

检查“f”和“F”

```
<your string>[0] in ('f','F')

<your string>.startswith('f') or <your string>.startswith('F') 
```

还有之前建议的`lower`方法：

```
<your string>.lower() == 'f' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T10:22:23.177

您可以在比较之前[降低字符串。](http://docs.python.org/dev/library/stdtypes.html#str.lower)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T10:22:16.683

```
test_string = "File system full"
if "file system full" == test_string.lower():
    # do stuff 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T10:22:36.627

```
>>> s = 'ABC'
>>> s.lower()
'abc'
>>> 
```

在您可以使用任何模式进行匹配之后。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T10:23:30.010

尝试将字符串转换为任何常见的（小写或大写）大小写，然后进行比较

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-22T10:24:47.900

```
if "File system full".lower() == test_string.lower():
    print True 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-22T10:47:35.497

你可以这样试试

```
>>> import re
>>> bool(re.match('File system full','file system full', re.IGNORECASE))
True 
```

欲了解更多信息，[请 re.IGNORECASE](http://docs.python.org/2/library/re.html#re.IGNORECASE)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-22T10:53:18.583

可以使用这个函数
在这里，
两个字符串都用 转换为小写`str.lower()`，
如果两个字符串的首字母相同，则返回，`True`
否则返回`False`

```
def match1(str1 ,str2):
    str1 = str1.lower() # to ignore the case
    str2 = str2.lower()
    if str1[0] == str2[0]:
        return True
    return False 
```

在空闲时运行

```
>>> mystr = 'File system full'
>>> test1 = 'Flow'
>>> test2 = 'flower'
>>> match1(mystr,test1)
True
>>> match(mystr,test2)
True 
```

我不建议使用这种技术，因为
您需要输入字符串字母的小写和大写，
但它可以工作:)

```
def match2(str1 ,str2):
    if str2[0] == str1[0].lower()\
    or str2[0] == str1[0].upper():
        return True
    return False 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-25T15:51:12.680

您也可以通过以下方式进行操作：

```
st="File system full"       
vl = re.search(r"(?i)File system full", st) 
```

`(?i)`匹配大写和小写字母。

# php - 带有 CI 商家的商品名称/描述

> ID：14456253
> 
> 赞同：2
> 
> 时间：2013-01-22T10:21:11.570
> 
> 标签：php, codeigniter, ci-merchant

我一直在使用 CI Merchant 库，当我进入 PayPal 结帐页面时，对项目名称/描述有疑问。基本上这就是我发送请求时得到的。

![在此处输入图像描述](../Images/e26e28b7530b8c7191bbc34c4280e8cf.png)

我现在的问题是，如何将项目的名称和描述更改为“横幅尺寸 XXX”？我尝试添加**L_PAYMENTREQUEST_n_NAMEm**和**L_PAYMENTREQUEST_n_DESCm**但它只是继续无所事事！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:35:41.277

找到了解决方案，我需要传递的是**PAYMENTREQUEST_0_DESC**而不是单个项目！全部做完 ：）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-13T19:50:45.580

请在付款后调用的方法中添加`name`和`description`参数。`purchase_return``complete`

# talend - 如何在 Talend 中使用 tFileExist 组件？

> ID：14456256
> 
> 赞同：7
> 
> 时间：2013-01-22T10:21:30.693
> 
> 标签：talend

使用 Talend，我想验证是否有一个名为`ListePS.xls`我的文件`D:/` 来做一些处理，否则什么都不做。

如何检查 Talend 中是否存在文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T13:02:28.970

您必须使用具有两个输出 IF的组件**tFileExist ：**

```
 ((Boolean) globalMap.get ("tFileExist_1_EXISTS")) for the case 1(File existence)
 ! ((Boolean) globalMap.get ("tFileExist_1_EXISTS")) for case 2 (non-existence of file) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-22T12:39:30.340

为了验证文件是否存在，您可以使用**tFileExist组件并使用****Run If**链接连接到您的条件处理。
有关参数化详细信息和使用示例，您可以查阅安装中提供的 Talend 文档。在 Talend 菜单栏中，选择**帮助 > 帮助内容**，然后选择**Talend 用户文档 > 集成组件 > tFileExists**。

[人才](/questions/tagged/talend "显示标记为“talend”的问题")

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-29T15:35:20.697

设计工作如下

```
tFileExist----If(Exist)-------Use other Components 
        \
         \
          If(Not Exist) add other flow 
```

`((Boolean) globalMap.get ("tFileExist_1_EXISTS"))`在第一个 IF 条件和第二个 IF 条件中添加以下代码`!((Boolean) globalMap.get ("tFileExist_1_EXISTS"))`。

# c# - DataTable最后一行作为第一行？

> ID：14456265
> 
> 赞同：0
> 
> 时间：2013-01-22T10:22:10.190
> 
> 标签：c#, datatable, rows, datarow

所以我在这里有一段代码可以工作，除了一行是 InsertAt() 部分。我想知道是否可以复制最后一行并将其作为第一行插入。把这个想法想象成这样。它可能可以单独在它后面的 SQL 中完成，但是这个应用程序被设计为适用于非常旧的数据库和 oracle，所以在系统完全迁移之前，它必须这样做，不幸的是。

事先的

*   装运地点 1
*   装运地点 2
*   装运地点 2

后

*   开始位置
*   装运地点 1
*   装运地点 2
*   装运地点 3
*   目的地位置

代码片段：

```
// Create a DataTable with a list of shipments.    
DataTable dt = c.Query(c.qShipments(Row.Cells[0].Value.ToString()));
// Check if there is at least one shipment
if (dt.Rows.Count >= 1)
{
    // Add the destination of the shipments
    dt.Rows.Add(0, 0, 9999, textBox_CC.Text, textBox_PC.Text, textBox_SL.Text);
    // Add the starting location (which is the same as the destination. It has to be at the top of the DataTable
    dt.Rows.InsertAt(dt.Rows[dt.Rows.Count - 1], 0); // The code

    // Finally calculate and return the object to populate the datagridview with.
    dataGridView_CalculatedRoutes.Rows.Add(x.getRoute(dt));
} 
```

tldr;

问题：代码返回 Row 属于另一个表。

问题：如何让最后一行也成为第一行？

编辑问题：如何让最后一行成为第一行和最后一行。（相同的行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:37:20.783

您要添加的行已经是该数据表的一部分。您必须先将其删除。在一个简短的测试中，我发现删除一行似乎会删除该行中的数据，因此`Remove()`似乎`InsertAt()`不起作用。

但是您可以创建一个新行，将数据复制到该行并插入它。之后，您可以删除旧行。例如（使用 Linqpad 测试）：

```
void Main() 
{
    DataTable dt = new DataTable();
    dt.Columns.Add(new DataColumn("Test", typeof(System.String)));
    var row = dt.NewRow();
    row["Test"] = "1";
    dt.Rows.Add(row);
    row = dt.NewRow();
    row["Test"] = "2";
    dt.Rows.Add(row);
    row = dt.NewRow();
    row["Test"] = "3";
    dt.Rows.Add(row);

    Console.WriteLine("Order before Remove/InsertAt");
    foreach(DataRow rw in dt.Rows)
    {
        Console.WriteLine(rw["Test"]);
    }

    var lastRow = dt.Rows[dt.Rows.Count - 1];
    var newFirstRow = dt.NewRow();
    newFirstRow.ItemArray = lastRow.ItemArray;
    dt.Rows.Remove(lastRow);
    dt.Rows.InsertAt(newFirstRow, 0);

    Console.WriteLine("Order after Remove/InsertAt");
    foreach(DataRow rw in dt.Rows)
    {
        Console.WriteLine(rw["Test"]);
    }
} 
```

预期的输出是：

```
Order before Remove/InsertAt
1
2
3
Order after Remove/InsertAt
3
1
2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:14:43.910

您可以创建一个新`DataTable`的并按您想要的顺序导入行：

```
// Create a DataTable with a list of shipments.    
DataTable dt = c.Query(c.qShipments(Row.Cells[0].Value.ToString()));
// Check if there is at least one shipment
if (dt.Rows.Count >= 1)
{
    DataTable customDt = new DataTable();

    // Add the starting location (which is the same as the destination. It has to be at 
    customDt.Rows.Add(0, 0, 9999, textBox_CC.Text, textBox_PC.Text, textBox_SL.Text);

    foreach(DataRow row in dt.Rows)
    {
        customDt.ImportRow(row);
    }
    // Add the destination of the shipments
    customDt.ImportRow(customDt.Rows[0]);

    // Finally calculate and return the object to populate the datagridview with.
    dataGridView_CalculatedRoutes.Rows.Add(x.getRoute(dt));
} 
```

# ruby-on-rails - link_to 没有重定向到正确的位置

> ID：14456266
> 
> 赞同：0
> 
> 时间：2013-01-22T10:22:10.707
> 
> 标签：ruby-on-rails, redirect, hyperlink, anchor

我正在使用导轨 3.1.3。

在单个页面（大页面）中，某些部分由不同的 id 分隔。

使用`link_to`标签，我无法转到特定部分。我写了如下代码，

一方面，

```
<%= link_to "Summary", "#DIV_SUMMARY_INDEX" %>
<%= link_to "Objectives", "#DIV_OBJECTIVES_INDEX" %> 
```

在另一个部分中，

```
<div id="DIV_SUMMARY_INDEX">
  <%= render :partial => "/feeds/cv/summary" %>
</div>

<div id="DIV_OBJECTIVES_INDEX">
  <%= render :partial => "/feeds/cv/objectives" %>
</div> 
```

现在这两个部分都显示在一个页面中。因此，根据我的逻辑，当我单击“摘要/目标”链接时，它应该转到`DIV_SUMMARY_INDEX / DIV_OBJECTIVES_INDEX`div 部分，但现在没有发生。

实际上我们使用 iframe 标签来加载整个页面。

下面的方法也不起作用，

```
<%= link_to "Summary", "#",  :anchor => "DIV_SUMMARY_INDEX" %>
<%= link_to "Objectives", "#", :anchor => "DIV_OBJECTIVES_INDEX" %> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:35:16.283

它的`<%= link_to(<link name>, :anchor => <div_id>) %>`

例如：`<%= link_to('Click here', :anchor => 'job_list') %>`#=> job_list 是我的 div id

我检查了 rails 3.2.9 并且可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:51:22.863

```
<%= link_to "Summary", "#",  :anchor => "DIV_SUMMARY_INDEX" %>
<%= link_to "Objectives", "#", :anchor => "DIV_OBJECTIVES_INDEX" %> 
```

尝试这个

# php - PHP，preg_replace，用标签attr替换标签

> ID：14456272
> 
> 赞同：0
> 
> 时间：2013-01-22T10:22:38.083
> 
> 标签：php, replace, preg-replace

我可以详细解释如何使用 php 用当前 attr 替换标签吗？

我阅读了手册和一些参考资料

[如何使用 php preg_replace 替换 HTML 标签](https://stackoverflow.com/questions/3376051/how-to-use-php-preg-replace-to-replace-html-tags)

对于简单的命令，我可以理解，但是对于 preg_replace 上带有诸如`~, $1, /n,`等字母的搜索命令，我根本不明白...

如果我想更换

```
 <script src="core.js"></script> 
```

进入

```
 <temp src="library/js/core.js"></temp> 
```

如何实现 preg_replace？

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:38:40.663

对 HTML 使用正则表达式几乎从来都不是一个好主意。考虑[DOM](http://php.net/manual/en/book.dom.php)，然后是这样的：

```
foreach($dom->getElementsByTagName('script') as $script) {
    $temp = $dom->createElement('temp');
    /*
     * create src attribute, append it to $temp and copy value from $script
     * I leave that up to you.
     */
    $script->parentNode->replaceChild($temp, $script);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:39:51.867

你需要学习正则表达式，[这个站点](http://www.regular-expressions.info/tutorial.html)是一个有用的资源；

preg_replace 的一个简单示例可能是这样的 - 它可以改进，但希望能给你这个想法......

```
<?php
$string = '<script src="core.js"></script>';
$pattern = '/<script src\s?=\s?['|"](.*)['|"]><\/script>/i';
$replace = ' <temp src="library/js/$1"></temp>';
$result = echo preg_replace($pattern, $replace, $string);
?> 
```

您需要了解反向引用才能使用字符串的匹配位来创建新的。简而言之，您的模式中包含在括号中的部分可以稍后使用您包含在 $replace 字符串中的 $1 令牌来检索。您可以通过这种方式多次反向引用。[您也可以在此处](http://gskinner.com/RegExr/)处理正则表达式时对其进行测试，希望这会有所帮助。

# elasticsearch - Elasticsearch - 用撇号搜索单词

> ID：14456273
> 
> 赞同：8
> 
> 时间：2013-01-22T10:22:40.297
> 
> 标签：elasticsearch

我希望能够搜索以下单词

文森特文森特文森特的

目前在 Database 和 ES 中的测试是 Vincent 的

是否可以检测所有格并忽略撇号。我已经查看了 Word-Delimiter，但似乎找不到合适的解释

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-10T20:31:22.457

您需要了解 elasticsearch 的分析器是如何工作的。分析器执行标记化（将输入拆分为一堆标记，例如空格）和一组标记过滤器（过滤掉您不想要的标记，例如[停用词](http://www.ranks.nl/resources/stopwords.html)，或修改标记，例如[小写标记过滤](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/analysis-lowercase-tokenfilter.html)器将所有内容转换为小写）。

分析在两个非常特定的时间执行 - 在索引期间（当您将内容放入弹性搜索时）以及根据您的查询，在搜索期间（在您正在搜索的字符串上）。

也就是说，默认分析器是[标准分析器](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/analysis-standard-analyzer.html)，它由[标准](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/analysis-standard-tokenizer.html)标记器、[标准标记过滤器](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/analysis-standard-tokenfilter.html)（从标准标记器中清除标记）、[小写标记过滤器](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/analysis-lowercase-tokenfilter.html)和[停用词标记过滤器](http://www.ranks.nl/resources/stopwords.html)组成。

举个例子，当你保存字符串“I love Vincent's pie!”时 进入elasticsearch，你使用的是默认的标准分析器，你实际上存储了“i”、“love”、“vincent”、“s”、“pie”。然后，当您尝试使用`term`查询（**未分析**）搜索“Vincent's”时，您将找不到任何内容，因为“Vincent's”不是这些标记之一！`match`但是，如果您使用查询（已**分析**）搜索“Vincent's” ，您会发现“I love Vincent's pie！” 因为“vincent”和“s”都找到了匹配项。

底线，要么：

1.  `match`在搜索自然语言字符串时使用已分析的查询，例如。
2.  设置分析仪以满足您的需求。如果你想变得复杂，你可以设置一个自定义分析器来执行空格标记器或字母标记器或模式标记器，以及任何你想要的过滤器。这取决于您的用例，但如果您正在处理自然语言句子，我不建议这样做，因为标准标记器是为自然语言搜索而构建的。

如需进一步阅读，请参阅[http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/analysis.html 。](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/analysis.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-10T19:31:28.860

使用 ES 文档中描述的“possessive_english”词干分析器： [http ://www.elasticsearch.org/guide/en/elasticsearch/reference/current/analysis-stemmer-tokenfilter.html](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/analysis-stemmer-tokenfilter.html)

例子：

```
{
  "index" : {
    "analysis" : {
        "analyzer" : {
            "my_analyzer" : {
                "tokenizer" : "standard",
                "filter" : ["standard", "lowercase", "my_stemmer"]
            }
        },
        "filter" : {
            "my_stemmer" : {
                "type" : "stemmer",
                "name" : "possessive_english"
            }
        }
    }
  }
} 
```

未经测试的代码，但应该可以工作。这是一个带有“word_delimiter”的经过测试的示例：

```
{
  "index" : {
    "analysis" : {
        "analyzer" : {
            "my_analyzer" : {
                "tokenizer" : "standard",
                "filter" : ["standard", "lowercase", "my_word_delimiter"]
            }
        },
        "filter" : {
            "my_word_delimiter" : {
                "type" : "word_delimiter",
                "preserve_original": "true"
            }
        }
    }
  }
} 
```

为我工作:-) ES 文档： [http ://www.elasticsearch.org/guide/en/elasticsearch/reference/current/analysis-word-delimiter-tokenfilter.html](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/analysis-word-delimiter-tokenfilter.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-06T10:20:46.440

使用像这样的匹配查询搜索带有撇号的单词。

```
{
   "query": {
      "bool": {
         "must": [
           {
             "match": {
                  "_all": "Vincent Vincents Vincent's"
                 }
              }
            ]
         }
     }
} 
```

# c# - 异步任务 IEnumerable XElement

> ID：14456274
> 
> 赞同：0
> 
> 时间：2013-01-22T10:22:41.757
> 
> 标签：c#, model-view-controller, asynchronous

我不确定这是否可能，所以任何输入/帮助将不胜感激。

我在下面的一个类中有以下内容（这里删除了所有缓存）：

```
public static class MasterXMLWeatherClass
{
public static async Task<IEnumerable<XElement>> WorldWeather(string id)
{
XDocument doc = await Task.Run(() =>  XDocument.Load(string.Format("http://urladdress?key={0}&feedkey={1}&format=xml&q={2}&tp=6&extra=isDayTime", sPartnerID, sLicenseKey, HttpUtility.UrlEncode(id))));
var getAllWeatherData = from weatherData in doc.Descendants("data")
                                    select weatherData;
return getAllWeatherData.AsEnumerable();
}
} 
```

然后在另一个类中，我有 4 个方法从上面获取值，问题是我得到以下错误：

> “System.Threading.Tasks.Task>”不包含“Descendants”的定义，并且找不到接受“System.Threading.Tasks.Task>”类型的第一个参数的扩展方法“Descendants”（您是否缺少使用指令还是程序集引用？）

```
var doc = MasterXMLWeatherClass.WorldWeather(id); 
```

`var displayCurrentConditions = (from wd in doc.Descendants("current_condition")`- 这是引发错误的代码行。

但如果我再改变：

```
var doc = MasterXMLWeatherClass.WorldWeather(id); 
```

至

```
var doc = await Task.Run(()=> MasterXMLWeatherClass.WorldWeather(id)); 
```

并在下面更改为

```
public async Task<IEnumerable<DisplayCurrentConditions>> CurrentConditions(string id) 
```

错误消失了，我在界面中得到一个错误，然后我必须更改它。

最后，我的域层中没有错误，但随后我的 UI 层中出现错误

错误只是冒泡。

还有另一种方法吗？

代码添加

界面

```
Task<IEnumerable<DisplayCurrentConditions>> CurrentConditions(string id); 
```

用户界面

```
public PartialViewResult pvHomePageWeatherDetails(string id)
{
var currentConditions  =  _IGWC.CurrentConditions(cleanText).FirstOrDefault();
return PartialView();
} 
```

# java - 在 DB2 中使用 Substring 和 Instr 选择查询

> ID：14456275
> 
> 赞同：0
> 
> 时间：2013-01-22T10:22:46.430
> 
> 标签：java, sql, db2

![请看图片](../Images/26c49ef547fcb7cec606065a7c4bf217.png) 我只想选择表**TEST**的那些记录，其中**TEMPPATH**值以 IN ('XGENCISB.CPY', 'XCISTABT.CPY') 结尾。

注意：这些 IN 子句值将在运行时设置

请告诉这是否可能在使用子字符串的单个查询中？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:45:08.307

这是您从@Neji 询问的案例的解决方案：

```
 select * from TEST where lower(TEMPPATH) LIKE (lower('%.cpy')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:28:41.637

```
select * from TEST where TEMPPATH LIKE '%.CPY' OR TEMPPATH LIKE '%.cpy' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:30:55.490

也试试这个： 使用`Right`and [`upper`](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2.doc.sqlref%2Ffupper.htm)：

```
select * from TEST where upper(Right(TEMPPATH,4)) = '.CPY'
AND TEMPPATH IS NOT NULL; 
```

*   如果您对此感兴趣`regexp`，也可以看看这个：[DB2 SQL 中的正则表达式](https://stackoverflow.com/questions/4763757/regular-expressions-in-db2-sql)

* * *

## 根据OP对问题的更新进行编辑

鉴于设置的两个字符串的长度相同（12 或相应调整），您可以尝试

```
select * from TEST where upper(Right(TEMPPATH,12)) 
IN ('XGENCISB.CPY', 'XCISTABT.CPY')
AND TEMPPATH IS NOT NULL; 
```

# java - Java中的信号量和线程池

> ID：14456276
> 
> 赞同：9
> 
> 时间：2013-01-22T10:22:47.640
> 
> 标签：java, concurrency

我对 Java 中信号量的概念并试图理解它不是很清楚。

我在阅读 oracle 文档（http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html）和其他一些页面后的理解，类似于带有计数的锁的许可数量。

它通常用于创建资源池。在这里我很困惑，还有 ThreadPoolExecutor 可以给我一个线程池。那么区别是什么呢？哪一个用在什么场景下？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T10:59:11.933

首先，没有愚蠢的问题......

[信号量](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html)允许多个线程“获取”一个资源。他们应该检查资源是否可用。它就像一个控制流量的阀门。

[锁](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html)用于独占访问。一次只有一个线程。

[ThreadPoolExecutor](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html)允许您使用有限数量的线程运行一些代码（Runnable 或 Callable 类）。您不必费心自己构建它，它已经在 J​​SE API 中为您实现了。你可以自己做一些信号量和队列......但如果你没有充分的理由，不要浪费你的时间。

想象一下，您必须实现一个 Web 服务器来接收对端口 80 的一些请求。您不想使用正在侦听此端口的同一线程来处理整个请求（这是一种资源浪费......）。您可以使用 ThreadPoolExecutor 处理请求，处理它并响应客户端。可以配置 ThreadPoolExecutor 以利用当前 CPU：此架构和此任务的最佳威胁数量。

[实践中的并发](http://www.javaconcurrencyinpractice.com/)是一本很好的书，可以提高您在这方面的知识。

我希望这对您有所帮助，并对我的基本英语感到抱歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:31:57.637

ThreadPool 是可以集中管理的多个线程之一的池。在 Java 中，ThreadPoolExecutor 也有一个队列，当你给它 Runnable 或 Callable 来执行它时，它可以返回一个 Future，它允许你控制任务或获取结果。

信号量只允许您获得一些许可，例如它最多允许两个线程运行一些代码。您需要运行许多线程来赋予它一个目的，否则它们是不相关的。

顺便说一句：我会阅读 Java 7 的文档，因为 Java 5.0 已经 EOL 一段时间了，而 Java 6 几乎是免费服务的结束。

# php - PHP 获取 json 格式的最新推文

> ID：14456277
> 
> 赞同：1
> 
> 时间：2013-01-22T10:22:49.167
> 
> 标签：php, twitter

我正在使用以下代码来解析来自 twitter 帐户的最新推文：

```
 $host = "http://search.twitter.com";
    $filename = "/search.json";

    $opts = array('http' => array(
        'method'=>"GET",
        'header'=>"Accept-language: en\r\n"
    ));
    $context = stream_context_create($opts);

    $search = "mashable";
    $search = str_replace(" ", "%20", $search);
    $count = "10";

    $a = "$host$filename?q=$search&rpp=$count&include_entities=true";
    echo "$a\n";
    $json = file_get_contents($a, false, $context);

    $obj = json_decode($json, true);
    $id = $obj['results'][0]['id'];
    $tweet = $obj['results'][0]['text'];
    $user = $obj['results'][0]['from_user'];
    $to_user = $obj['results'][0]['to_user'];
    $media_url = $obj['results'][0]['media_url'];

    #echo $json;
    echo "<br /><br />";
    echo "searching for $search\n tweet count: $count\n";
    echo "<br /><br /><b>tweets</b><br />";
    echo "tweet_id: $id <br />";
    echo "user: $user <br />";
    echo "Tweet: $tweet<br />";
    echo "to_user: $to_user <br />";
    echo "media: $media_url";
    echo ""

?> 
```

我想提取以下值： - 用户名（发件人） - 推文（文本） - 给用户（如果是回复） - 媒体附件（图片）

该代码正在运行，但由于某种原因，我只收到最新的推文而不是数字 ($count) 值。我也无法收到推文的 media_url 值。我的问题是：如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:36:42.337

您必须遍历结果才能获得所有结果而不是其中之一，例如：

```
$host = "http://search.twitter.com";
$filename = "/search.json";

$opts = array('http' => array(
    'method'=>"GET",
    'header'=>"Accept-language: en\r\n"
));
$context = stream_context_create($opts);

$search = "mashable";
$search = str_replace(" ", "%20", $search);
$count = "10";

$a = "$host$filename?q=$search&rpp=$count&include_entities=true";
echo "$a\n";
$json = file_get_contents($a, false, $context);

$obj = json_decode($json, true);

foreach ($obj['results'] as $index => $result) {
    $id = $result['id'];
    $tweet = $result['text'];
    $user = $result['from_user'];
    $to_user = $result['to_user'];
    $media_url = $result['media_url'];

    #echo $json;
    echo "<br /><br />";
    echo "searching for $search\n tweet count: $count\n";
    echo "<br /><br /><b>tweets</b><br />";
    echo "tweet_id: $id <br />";
    echo "user: $user <br />";
    echo "Tweet: $tweet<br />";
    echo "to_user: $to_user <br />";
    echo "media: $media_url";
    echo "";
} 
```

另外，当我做 a 时，`print_r($obj);`我看不到任何`media_url`价值 - 看起来 Twitter 没有返回它，这就是你无法访问它的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:19:30.293

我找到了接收每条推文的 media_url 参数的解决方案：

```
$media_url = $result['entities']['media'][0]['media_url'] 
```

# java - row layout not changing controls when resizing

> ID：14456278
> 
> 赞同：0
> 
> 时间：2013-01-22T10:22:50.020
> 
> 标签：java, layout, swt

I am facing some problem in RowLayout while resizing the shell. I created the composite and set the layout as RowLayout for that composite. Added three Buttons inside the composite. Now when I resize the shell, if there is not enough space for the third button, it should come down. But it is not coming down. Could anyone tell whats wrong in the code? Please see my code below.

```
package com.rcp.mytraining.layout.composite;

import org.eclipse.swt.widgets.Composite;

public class ChatComposite extends Composite {

    /**
     * Create the composite.
     * 
     * @param parent
     * @param style
     */
    public ChatComposite(Composite parent, int style) {
        super(parent, style);

        Composite comp = new Composite(parent, SWT.NONE);
        // Color s = new Color(display, new RGB(30,30,30));

        Color s = Display.getDefault().getSystemColor(1);

        comp.setBackground(s);

        RowLayout rowLayout = new RowLayout(SWT.HORIZONTAL);

        rowLayout.wrap = true;
        rowLayout.pack = false;     

        comp.setLayout(rowLayout);

        Button btnNewButton = new Button(comp, SWT.NONE);
        btnNewButton.setText("New Button");

        Button btnNewButton_1 = new Button(comp, SWT.NONE);
        btnNewButton_1.setText("ss");

        Button btnNewButton_2 = new Button(comp, SWT.NONE);
        btnNewButton_2.setText("New Button");
        comp.pack();
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

    public static void main(String[] args) {

        Display display = new Display();

        Shell shell = new Shell(display);

        // shell.setSize(200, 200);

        // shell.setLayout(new FillLayout());

        ChatComposite chatComposite = new ChatComposite(shell, SWT.NONE);

        shell.pack();
        shell.open();

        // chatComposite.pack();

        while (!shell.isDisposed()) {

            if (!display.readAndDispatch()) {

                display.sleep();
            }

        }
        // display.dispose();

    }

} 
```

Please see the difference in the below code. I wanted to work in the same way. The above code should work in the sameway as the below code works

```
package com.rcp.mytraining.layout.composite;

import org.eclipse.swt.widgets.Composite;

public class ChatComposite extends Composite {

    /**
     * Create the composite.
     * 
     * @param parent
     * @param style
     */
    public ChatComposite(Composite parent, int style) {
        super(parent, style);

        /*
         * RowLayout rowLayout = new RowLayout(SWT.HORIZONTAL);
         * 
         * // rowLayout.wrap = true; //rowLayout.pack = true;
         * setLayout(rowLayout);
         * 
         * Button btnNewButton = new Button(this, SWT.NONE);
         * btnNewButton.setText("New Button");
         * 
         * Button btnNewButton_1 = new Button(this, SWT.NONE);
         * btnNewButton_1.setText("New Button");
         * 
         * Button btnNewButton_2 = new Button(this, SWT.NONE);
         * btnNewButton_2.setText("New Button");
         */

        pack();

    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

    public static void main(String[] args) {

        Display display = new Display();

        Shell shell = new Shell(display);

        // shell.setSize(200, 200);

        shell.setLayout(new FillLayout());

        Composite comp = new Composite(shell, SWT.NONE);
        // Color s = new Color(display, new RGB(30,30,30));

        Color s = Display.getDefault().getSystemColor(1);

        comp.setBackground(s);

        RowLayout rowLayout = new RowLayout(SWT.HORIZONTAL);

        rowLayout.wrap = true;
        // rowLayout.pack = true;
        comp.setLayout(rowLayout);

        Button btnNewButton = new Button(comp, SWT.NONE);
        btnNewButton.setText("New Button");

        Button btnNewButton_1 = new Button(comp, SWT.NONE);
        btnNewButton_1.setText("ss");

        Button btnNewButton_2 = new Button(comp, SWT.NONE);
        btnNewButton_2.setText("New Button");
        comp.pack();

        // ChatComposite chatComposite = new ChatComposite(shell, SWT.NONE);

        shell.pack();
        shell.open();

        // chatComposite.pack();

        while (!shell.isDisposed()) {

            if (!display.readAndDispatch()) {

                display.sleep();
            }

        }
        // display.dispose();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:30:22.847

您的复合材料没有使用外壳调整大小，因为您没有指定它这样做。

将[`GridData`](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Flayout%2FGridData.html)对象添加到其布局数据中，如下所示：

```
comp.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true)); 
```

注意：出于调试目的，您可以将背景设置`comp`为红色（或其他一些华丽的颜色）并查看差异。

# c++ - 在调试模式下运行时缓冲区溢出

> ID：14456288
> 
> 赞同：0
> 
> 时间：2013-01-22T10:23:20.947
> 
> 标签：c++, visual-studio-2008, variadic-functions, widechar, printf

在调试模式下运行我们的游戏时，我遇到缓冲区溢出崩溃 - 调用堆栈是香蕉（看起来它卡在递归循环中）但是我将崩溃跟踪到以下函数：

```
std::wstring formatWstring(const wchar_t *first, ...)
{
    wchar_t str[4096];
    va_list marker;
    va_start(marker, first);
    vswprintf_s(str, sizeof(str), first, marker);
    va_end(marker);
    return str;
} 
```

以下列方式调用：

```
std::wstring gmh = io::lexicon->getString("FE_gamemode_header");
std::wstring gms = io::lexicon->getString(formatString("FE_gamemode_%s", game->getCurrentMapGameMode().c_str()));
m_gameMode = formatWstring(L"%S: %S", gmh.c_str(), gms.c_str()); 
```

我似乎无法弄清楚是什么导致了这一切......任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:29:01.153

尝试将呼叫更改为

```
vswprintf_s(str, sizeof(str)/sizeof(wchar_t), first, marker); 
```

您的操作尺寸错误。`wchar_t`不`char`保证 ' 的大小为 1。

# firefox - Firefox 中跨度内部按钮的轮廓（包括屏幕截图）

> ID：14456296
> 
> 赞同：0
> 
> 时间：2013-01-22T10:23:53.107
> 
> 标签：firefox, button, html, outline

我的页面中有以下 html 结构

```
<button class="badbutton"><span>Text</span></button> 
```

这样做的原因是，当按钮处于活动状态时，通过跨度的相对定位，我可以在按下按钮时使文本变低一点。

但是，在 Firefox 中，我有一个无法解决的问题。当按钮被按下时，它内部的跨度得到一个虚线轮廓，即使在按钮不再被按下后仍然存在。我附上一个链接到描述我所描述的图像。

[http://i.imgur.com/6ReslLc.png](http://i.imgur.com/6ReslLc.png)

我已经尝试了我在css中能想到的一切，但无济于事。

```
a, a:active img, 
span, 
span:active,
span:focus, 
button, 
button:active span, 
button:focus span, 
button:focus, 
button:active {
    border: none;
    outline: none !important;
} 
```

任何帮助都感激不尽。

编辑：在朋友的提议下，我完全放弃了跨度，并选择在按下时增加按钮的顶部填充。唉，Firefox 只是不断地在单词周围添加轮廓。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:31:45.453

轮廓是焦点指示符。

它不是通过按钮本身的 CSS 边框或轮廓来实现的，因为它们具有完全不同的行为。

你可以摆脱它

```
::-moz-focus-inner { 
  border: 0;
  padding: 0;
} 
```

# ember.js - Ember-Data: Knowing when a RecordArray is completely populated

> ID：14456298
> 
> 赞同：5
> 
> 时间：2013-01-22T10:23:59.553
> 
> 标签：ember.js, ember-data

I have a situation where isLoaded on a DS.RecordArray changes to true but the content, length property of the RecordArray is still empty, 0 at that time and only changes later.

Sample Code(coffeescript):

```
@set('followRequests', App.FollowRequests.find())

...

whenDataLoads: (->

console.log @get('followRequests.isLoaded')
console.log @get('followRequests.length')
@set('content', @get('followRequests').toArray() )

).observes('followRequests.isLoaded') 
```

The first log statement is true while the second is 0 and the template which uses this data is empty. When I see the actual AJAX request I see that the request does return an array of records. And the length and content of the RecordArray do change some time later as seen in the Browser console by doing:

`App.Router.myController.get('followRequests').get('length')` ---> 12

However this code(below) does populate the content in the template, but it runs 12 times...

```
whenDataLoads: (->
console.log @get('followRequests.isLoaded')
console.log @get('followRequests.length')

@set('content', @get('followRequests').toArray() )

).observes('followRequests.length') 
```

What's the right way to know when the RecordArray is completely populated...??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:41:52.397

自从 Ember.js 使用 Promise 以来，您可以这样做

```
App.FollowRequests.find().then(function () {
    // This callback will fire when array is loaded
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T11:10:48.380

在 Ember Data beta 1.0.0 中，您将使用`store`路由或控制器中提供的属性请求记录。

```
// fetch one
var promiseArray = this.store.find('follow_request', follow_request_id);

// fetch all
var promiseArray = this.store.find('follow_request');

// set callbacks on promise array
promiseArray.then(onFollowRequestSuccess, onFollowRequestFailure);

// or set callbacks on promise object
var promise = promiseArray.get('promise');
promise.then(onFollowRequestSuccess, onFollowRequestFailure);

// or use computed property
App.FollowRequestsController = Ember.ArrayController.extend({
    loadedCount: function() {
        return this.get('content.@each').filterBy('isLoaded', true).length;
    }.property('content.@each.isLoaded').cacheable()
}); 
```

# php - 如何使用正则表达式从文本中获取日期

> ID：14456299
> 
> 赞同：1
> 
> 时间：2013-01-22T10:24:00.020
> 
> 标签：php, regex

我有一个文本`Summary for rxd7865 November 13, 2012 to November 13, 2012`。

我只想`November 13, 2012`从上面的文本中获取日期字符串。

我如何在 PHP 中使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:26:54.913

正则表达式：

```
preg_match('/(?<the_date>(January|February|March) [0-9]{2}, 20[0-9]{2})/', $string, $matches);
echo $matches[the_date]; 
```

说明：

```
() // are called capture groups or matches
(?<name>) // are named capture groups or named matches
| // separator between a list of alternative matches
[] // is a character class
[0-9] // is a character class that allows only characters from 0 to 9
{} // is a repetition specifier
[]{2} // allows the character class to repeat twice 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:27:07.753

使用[preg_match_all](http://php.net/manual/en/function.preg-match-all.php)，它使用[PCRE 语法](http://php.net/manual/en/reference.pcre.pattern.syntax.php)

# php - 从 MongoDB 获取数据

> ID：14456304
> 
> 赞同：-1
> 
> 时间：2013-01-22T10:24:33.277
> 
> 标签：php, mongodb, database

我有一个包含多个项目的 MongoDB 集合。多个项目具有相同的 key vlue( *srkey* )，但它们的*时间戳*值不同。我想通过具有最大*时间戳的**srkey*获取所有项目。如何使用**php MongoDB 完成此任务。**

 ***例如，我的收藏包含以下项目

*   收藏

    ```
    item1 : {srkey:a,timestamp:1358675171}
    item2 : {srkey:b,timestamp:1358675175}
    item3 : {srkey:a,timestamp:1358676849}
    item4 : {srkey:d,timestamp:1358675213}
    item5 : {srkey:b,timestamp:1358676111} 
    ```

fetch 的输出必须是

```
 item3 : {srkey:a,timestamp:1358676849}
    item4 : {srkey:d,timestamp:1358675213}
    item5 : {srkey:b,timestamp:1358676111} 
```

第 1 项和第 3 项具有相同的 srkey，因此结果仅包含时间戳值最大的其中一项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:05:54.693

您可以为此使用新的聚合框架：

```
$db->col->aggregate(array(
    array('$sort' => array('$timestamp' => -1)),
    array('$group' => array('_id' => '$srkey', 
        'timestamp' => array('$first' => '$timestamp')))
)); 
```

它应该是该排序组中的第一个，因为您是以 DESC 方式排序的。***

# sql-server - Find query that fired a trigger

> ID：14456306
> 
> 赞同：2
> 
> 时间：2013-01-22T10:24:38.877
> 
> 标签：sql-server, sql-server-2008

> **Possible Duplicate:**
> [Create Trigger to log SQL that affected table?](https://stackoverflow.com/questions/3094735/create-trigger-to-log-sql-that-affected-table)

Is possible in SQL Server 2008 to write a trigger which will put into my log table the query which triggered it? I will explain it on the example:

I have a table, TAB1, and log table LOG. I execute query which deletes rows from TAB1 and I want to have that query (or something else what could help me to identify who executed delete query on TAB1) in my LOG table.

Any idea how this can be achieved?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:47:13.823

我想到的唯一方法是通过 CONTEXT_INFO 显式传递过程名称，这将进入过程

```
declare @bin varbinary(128) = (cast(object_name(@@Procid) as varbinary(128))
set context_info @bin 
```

并在触发器中使用它

```
declare @procName as nvarchar(max)
set @procName = cast(context_info() as nvarchar(max)) 
```

我不知道有什么其他方法可以做到这一点

编辑：我认为tham可能对你很有趣，[clickie](http://www.thecodepage.com/post/TIP-A-Call-Stack-in-SQL-Server.aspx)

# php - 无法将汉字插入MySQL

> ID：14456313
> 
> 赞同：12
> 
> 时间：2013-01-22T10:24:51.127
> 
> 标签：php, javascript, mysql, character-encoding

cookie 使用 big5 集编码，无法插入 MySQL。你能帮我解决这个问题吗？

字段：`username`是eng，`date1`是日期，`reason1`是汉字。

```
$reason1 = $_COOKIE["reason"];
$sql2="INSERT INTO 
    attendance_count(username,date,count_time,appendix) 
    VALUES ('$username','$date1','0','$reason1')";
mysql_query($sql2); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-22T10:28:41.263

创建表时使用**UTF-8 。**

```
create table table_name () CHARACTER SET = utf8;
```

插入表格时使用**UTF-8**

```
set username utf8; INSERT INTO table_name (ABC,VAL);
```

[**阅读更多**](http://www.tanzilo.com/2008/10/13/php-mysql-unicode-solution-to-chinese-russian-or-any-language/)

[**和更多**](http://confluence.jetbrains.net/display/TCD/Configuring+UTF8+Character+Set+for+MySQL)

**详细代码**

下面的代码是经过测试的代码，请执行以下工作。

如果您已经创建了数据库，请将其更改为以下代码。如果您没有创建数据库，则创建它并将 Collat​​ion 设置为 utf8_unicode_ci

对于要在其中存储中文字符的表字段，表定义排序规则为“utf8_unicode_ci”也是如此。

```
ALTER DATABASE `stackoverflow` DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;

CREATE TABLE `stackoverflow`.`chines`
(
    `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY ,
    `words` VARCHAR( 200 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL
) ENGINE = InnoDB;
```

```
<?php

    define('HOSTNAME', 'localhost');
    define('USERNAME', 'root');
    define('PASSWORD', '');
    define('DATABASE', 'stackoverflow');

    $dbLink = mysql_connect(HOSTNAME, USERNAME, PASSWORD)or die(mysql_error());
    mysql_query("SET character_set_results=utf8", $dbLink)or die(mysql_error());
    mb_language('uni'); 
    mb_internal_encoding('UTF-8');
    mysql_select_db(DATABASE, $dbLink)or die(mysql_error());
    mysql_query("set names 'utf8'",$dbLink)or die(mysql_error());

    if(isset($_POST['addWord']))
    {
        mysql_query("SET character_set_client=utf8", $dbLink)or die(mysql_error());
        mysql_query("SET character_set_connection=utf8", $dbLink)or die(mysql_error());

        $sql_query = "INSERT INTO chines(words) VALUES('".$_POST['words']."')";
        mysql_query($sql_query, $dbLink)or die(mysql_error());
    }

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title></title>
</head>
<body>
    <?php
        mysql_query("SET character_set_results=utf8", $dbLink);
        $sql_query = "SELECT * FROM chines";
        $dbResult = mysql_query( $sql_query, $dbLink)or die(mysql_error());

    ?>

    <form action="" method="post">

        <p>Word : <input type="text" name="words" /></p>
        <p><input type="submit" name="addWord" /></p>

    </form>
    <?php
        while($row = mysql_fetch_assoc($dbResult))
        {
            echo $row['words']. '<br />';
        }
    ?>
</body>
</html>
```

查看结果和步骤视觉如下。

![在此处输入图像描述](../Images/ed5b25c59ff9c9bc5bd34fd8ef31cbd3.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-24T02:02:29.153

对于中国人来说，你真的需要`utf8mb4`，而不是`utf8`。这是因为少数汉字需要 4 字节的 UTF8 字符，而 MySQL`utf8`不支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-07T19:25:53.687

真正的问题是关于被编码的 cookie`big5`吗？*客户端*中的其余数据是否编码为`utf8`？如果两者都“是”，...

将连接更改为`big5`，执行 cookie 的`INSERT`/ `SELECT`，然后更改回 utf8（或者，升级后更好的是 utf8mb4）。

执行`SET NAMES big5`或调用`charset('big5')`您正在使用的 API 的函数是来回切换的首选方式。

（同时，离开`mysql_*`界面；切换到`mysqli_*`或`PDO`。）

如果客户端中的所有内容都是`big5`，则无需来回切换。只需声明客户端正在使用 big5。注意：table/column是否也是big5无关紧要；MySQL 将在它们之间进行转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-13T10:23:21.827

使用 utf8 和表字符集更新表列的字符集。可以在 Mysql 工作台 alter table 中检查并查看要支持汉字的列的字符集。

# angularjs - How to define *object keys* using AngularJS models?

> ID：14456314
> 
> 赞同：0
> 
> 时间：2013-01-22T10:24:55.120
> 
> 标签：angularjs

I like to build a quick tool to define a "[JSON-schema](http://json-schema.org/)" which looks like this:

```
{
      "type": "object",
      "properties": {
          "myFirstProperty": {
              "type": "integer"
          }
      },
      "title": "MySchema",
      "description": "some description"
    } 
```

> See the *preview* here: [http://jsfiddle.net/franquis/djRFN/4/embedded/result/](http://jsfiddle.net/franquis/djRFN/4/embedded/result/)
> 
> See the *code* here: [http://jsfiddle.net/franquis/djRFN/4/](http://jsfiddle.net/franquis/djRFN/4/)

Using a simple form, I can define the "*name*", "*description*" using the "**ng-model**" attributes, but when it comes to the "*properties*" definition of my schema, I have some troubles :)

**What I did is:**

1.  First created a "**$scope.newProperties**" array, which store the properties I like to add to my schema "**$scope.schema**"
2.  Added a listener on this array in order to add new properties to my "**$scope.schema.properties**"

**My issues:**

When I created a new property, while I typing the name of the new key (ie *hostname*), it creates a lot of new properies... See below:

```
{
      "type": "object",
      "properties": {
         "h": {},
         "ho": {},
         "hos": {},
         "host": {},
         "hostn": {},
         "hostna": {},
         "hostnam": {},
         "hostname": {
            "type": "integer"
         }
      },
      "title": "MySchema",
      "description": "some description"
    } 
```

I know this behavior is caused by the "**$watch("myva",function(a,b){},true);**" function, but what else can I try to succeed?

Thanks for your help!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T11:15:37.443

`$scope.schema.properties`在迭代项目之前重置：

```
$scope.$watch(function(){return $scope.newProperties;},function(items,b){
    $scope.newSchema.properties = {};
    angular.forEach(items, function(obj){
        if(angular.isDefined(obj.key)) {
            var key = obj.key, type = obj.type, name = obj.name;
            $scope.newSchema.properties[key] = {
                "name": name,
                "type": type
            };
        }
    });
},true); 
```

这是保持`$scope.schema`有序并与`$scope.newProperties`

# r - Return result from function in R

> ID：14456317
> 
> 赞同：2
> 
> 时间：2013-01-22T10:25:01.410
> 
> 标签：r, function, loops, syntax

I experience some trouble trying to create a function that contains a loop in R. The loop works fine but when I put it inside the body of my function it won't write any Output any more.

So given my data with:

```
 df1<-data.frame(a=sample(1:50,10),b=sample(1:50,10),c=sample(1:50,10)) 
```

I create a vector to store my results and a loop with some function

```
 result <- vector("list",10)

    for (i in 1:10)
    {
      result[[i]] <- df1*i
    } 
```

when I try to create a function like this

```
 # make the loop a function
    result2 <- vector("list",10)

    loop.function<-
      function(x,a,b){
        for (i in a:b)
      {
        result2[[i]] <- x*i
      }
    }
    loop.function(df1,1,10) 
```

I get no data in "result2". So I think there is some basic problem in the syntax. Can anyone help me out?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T10:29:20.507

您的函数不会返回它创建的列表。您需要添加一个`return`命令：

```
result2 <- vector("list",10)

loop.function<-
  function(x,a,b){
    for (i in a:b)
  {
    result2[[i]] <- x*i
  }
  return(result2) # added this row
} 
```

* * *

顺便说一句：可以使用以下命令创建此函数的较短版本`lapply`：

```
myfun <- function(x, a = 1, b) {
    lapply(seq(a, b), "*", x)   
} 
```

# arrays - 将 sqlplus 命令的输出保存到数组中的任何可能方法 - Perl

> ID：14456321
> 
> 赞同：0
> 
> 时间：2013-01-22T10:25:12.150
> 
> 标签：arrays, perl, sqlplus, spool

目前，我正在将 sqlplus 命令假脱机到一个文本文件中，但即使这样也给我带来了问题，因为我想用逗号分隔这些值。到目前为止它还没有奏效。

我希望这样的事情会奏效

```
 @test = system('sqlplus un/pw@host @test.sql'); 
```

test.sql 文件包含三个语句，它们都返回数字。如果我可以将这些保存到 @test 数组中，那就太好了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:03:06.237

将[DBI](http://p3rl.org/DBI)模块与[DBD::Oracle](http://p3rl.org/DBD%3a%3aOracle)一起使用：

```
#!/usr/bin/perl
use warnings;
use strict;

use DBI;

my $dbh = DBI->connect("dbi:Oracle:host=host;sid=dbname",
                       $user, $password);

open my $IN, '<', 'test.sql' or die $!;
$/ = ';'; # Queries separated by semicolons, no other semicolons anywhere!
while (my $sql = <$IN>) {
    my $sth = $dbh->prepare($sql);
    $sth->execute;
    my @test = @{ $sth->fetchall_arrayref // [] };
    print "@$_\n" for @test;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:04:10.317

基于 DBI 脚本很好，但如果你的观点是关于在任何情况下使用 sqlplus 命令，你应该看看这个 CPAN 模块：[Expect](http://search.cpan.org/perldoc?Expect.pm)。它以多种有用的方式为您提供对外部命令的更深入控制。

# javascript - 我们如何将 vb 脚本转换为 javascript

> ID：14456326
> 
> 赞同：0
> 
> 时间：2013-01-22T10:25:24.573
> 
> 标签：javascript, vbscript

如何将 VB 脚本转换为 Javascript？

我想转换

```
top.HeaderFrame.postForm() 
top.parent.BodyFrame.Expand() 
```

进入Javascript。

# c++ - C++ wchar_t 数组指向指针并在函数中使用

> ID：14456327
> 
> 赞同：0
> 
> 时间：2013-01-22T10:25:26.300
> 
> 标签：c++, function, mfc, wchar-t

我有以下代码：

```
wchar_t recordsText[64] = L"Records: ";
std::wstringstream ss2;
ss2 << c;
wcsncat_s(recordsText, ss2.str().c_str(), sizeof(ss2.str().c_str()));
((CButton*)GetDlgItem(IDC_RECORDS))->SetWindowTextW(recordsText); 
```

它工作得很好，但我想把它放到一个函数中......我想没有什么比这更容易了。但我得到一个愚蠢的错误。

我的功能是这个：

```
BOOL refreshTextField(CButton* item, wchar_t* label, long long* number){
    std::wstringstream ss;
    ss << number; 
    wcsncat_s(label, ss.str().c_str(), sizeof(ss.str().c_str()));
    item->SetWindowTextW(label);
    return true;
} 
```

但是 wcsncat_s 不喜欢我的“标签”，因为它是一个数组，并且函数的调用方式如下：

```
refreshTextField(((CButton*)GetDlgItem(IDC_SENT_PACKAGES)), L"Packages send:  ", &sentPackages); 
```

（顺便说一句：我知道它不应该被转换为 CButton 因为它是一个编辑字段 :-D ，但目前这并不重要。）

问题是 wchar_t 数组，我不知道如何正确地将它放入我的函数中。希望你能给我一个退出的答案。

我已经试过了：

```
BOOL refreshTextField(CButton* item, wchar_t** label, long long* number){
    //...
    wcsncat_s(*label, sizeof(*label), ss.str().c_str(), sizeof(ss.str().c_str()));
    //....
} 
```

和这个：

```
BOOL refreshTextField(CButton* item, wchar_t* label, long long* number){
    //...
wcsncat_s(label, sizeof(*label), ss.str().c_str(), sizeof(ss.str().c_str()));
    //....
} 
```

* * *

## 编辑：

所以解决方案是这样的：

称呼：

```
refreshTextField(mySelectedUIItem, L"testlabel", sizeof(L"testlabel"), 4); 
```

功能：

```
BOOL refreshTextField(CButton* item, wchar_t* label, size_t lableSize, long long* number)
{
    std::wstringstream ss;
    ss << number;
    wcsncat_s(label, labelSize, ss.str().c_str(), ss.str().length());
    //...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:10:05.557

**{编辑}**

当你想使用函数模板时，你必须匹配所有的参数类型。因此，您必须将字符串的长度而不是 c_str() 结果的第二个副本传递给 wcsncat_s 模板：

```
wcsncat_s(recordsText, ss2.str().c_str(), ss2.str().length()); 
```

这将解决原型

```
template <size_t size>
errno_t _mbsncat_s(
   unsigned char (&strDest)[size],
   const unsigned char *strSource,
   size_t count
); // C++ only 
```

**{/编辑}**

如果没有模板，以下内容适用：

您不能将数组传递给函数。该函数将只接受指针。使用函数内部的指针可以很好地访问该数组。但是您会丢失有关数组大小的信息。

由于指针仅指向您不能使用的数组的第一个元素

```
sizeof(*somePointer); 
```

因为这为您提供了第一个数组元素的大小。

您需要更改 refreshTextField 的参数列表。由于`label`参数指向输出变量，因此您需要变量的大小作为附加参数。例如：

```
BOOL refreshTextField(CButton* item, wchar_t* label, size_t lableSize, long long* number)
{
    std::wstringstream ss;
    ss << number;
    wcsncat_s(label, labelSize, ss.str().c_str(), ss.str().length());
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:12:00.167

试试这个

```
BOOL refreshTextField(CButton* item, wchar_t[] label, long long* number){
    //...
   wcsncat_s(label, ss.str().c_str(), sizeof(ss.str().c_str()));
    //....
} 
```

[http://www.cplusplus.com/faq/sequences/arrays/sizeof-array/](http://www.cplusplus.com/faq/sequences/arrays/sizeof-array/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:09:22.413

> sizeof(ss2.str().c_str())

函数的结果`c_str()`是`wchar_t*`。`sizeof( wchar_t* )`是 4 或 8 个字节（分别在 32 或 64 位系统上）。您应该改用`wstring::length()`函数：

```
wcsncat_s( label, ss.str().c_str(), ss.str().length() ); 
```

# c# - 获取“对象引用未设置为对象的实例。” 即使我排除 null

> ID：14456329
> 
> 赞同：1
> 
> 时间：2013-01-22T10:25:29.403
> 
> 标签：c#

我使用 datagridview 有以下代码，您只能选择一整行： "Variable.addModArray[i]" is a string[];

```
class Variables
{
    public static string[] addModArray;
}

int i = 0;
while (i < dgv.SelectedRows.Count)
{
    if (dgv.SelectedRows[0].Cells[i].Value != null)
        Variables.addModArray[i] = dgv.SelectedRows[0].Cells[i].Value.ToString(); //gets error
    i++;
} 
```

当我运行代码时，我得到“对象引用未设置为对象的实例”。错误，但我已经告诉计算机如果值不为空，则执行代码！我做错什么了吗？

告诉我是否需要对此问题添加任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:30:54.843

首先，对于任何给定的组合`a.b.c`，检查`a.b.c != null`并不意味着`a.b`不能为空，或者`a`不能为空。

正如其他评论员所指出的，它也不会阻止其他变量为空。

其次，不清楚为什么您要`i`为每个选定的行增加但不使用除第一行之外的任何内容。

你说你只能选择一行，那为什么还要麻烦循环呢？

我希望：

```
int i = 0;
while (i < dgv.SelectedRows.Count)
{
    if (dgv.SelectedRows[0].Cells[i].Value != null)
        Variables.addModArray[i] = dgv.SelectedRows[0].Cells[i].Value.ToString(); //gets error
    i++;
} 
```

成为：

```
int i = 0;
while (i < dgv.SelectedRows.Count)
{
    if (dgv.SelectedRows[i].Cells[0].Value != null)
        Variables.addModArray[i] = dgv.SelectedRows[i].Cells[0].Value.ToString(); //gets error
    i++;
} 
```

或者：

```
int i = 0;
while (i < dgv.SelectedCells.Count)
{
    if (dgv.SelectedRows[0].Cells[i].Value != null)
        Variables.addModArray[i] = dgv.SelectedRows[0].Cells[i].Value.ToString(); //gets error
    i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:55:08.100

它也可能是`Variables`或者`addModArray`是空的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-22T10:33:16.400

尝试这个

```
 //please try this
    int i = 0;
    if(dgv.SelectedRows.Count > 0)
    {
        while (i < dgv.Columns.Count)
        {
            Variables.addModArray[i] = dgv.SelectedRows[0].Cells[i].FormattedValue; 
            i++;
        }
    } 
```

# c# - Linq 查询“特定演员表无效”

> ID：14456330
> 
> 赞同：0
> 
> 时间：2013-01-22T10:25:32.860
> 
> 标签：c#, linq-to-dataset

跟随**Linq 到**数据表查询给我错误**Specific cast is not valid**。

```
decimal[] temp = dt.AsEnumerable()
    .Select(r => new
       {
           totLen = r.Field<decimal>("Quantity") 
                     * (r.Field<decimal>("Breath") 
                         * r.Field<decimal>("Length"))
       })
    .Cast<decimal>()
    .ToArray(); 
```

谁能建议我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:28:42.587

您应该能够`decimal`直接从`Select()`.

```
decimal[] temp = dt.AsEnumerable().Select(
    r => r.Field<decimal>("Quantity") * (r.Field<decimal>("Breath") * r.Field<decimal>("Length")
)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:31:14.413

您不需要创建匿名类型：

```
decimal[] temp = dt.AsEnumerable()
    .Select(r => r.Field<int>("Quantity") 
               * r.Field<decimal>("Breath") 
               * r.Field<decimal>("Length"))
    .ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:32:04.897

您正在尝试将匿名类型转换为十进制，这当然行不通。不要创建匿名类型 - 只需选择十进制值：

```
decimal[] temp = (from r in dt.AsEnumerable()
                  select r.Field<decimal>("Quantity") * 
                         r.Field<decimal>("Breath") * 
                         r.Field<decimal>("Length")).ToArray(); 
```

与 Linq 方法语法相同：

```
decimal[] temp = dt.AsEnumerable()
                   .Select(r => r.Field<decimal>("Quantity") * 
                                r.Field<decimal>("Breath") * 
                                r.Field<decimal>("Length"))
                   .ToArray(); 
```

如何让你的代码工作？使用`Select`代替`Cast`：

```
.Select(x => x.totLen).ToArray(); 
```

但同样，您不需要匿名类型来选择单个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T10:26:58.467

您的投影 ( `Select`) 创建匿名类型的实例，如下所示：

```
class SomeAnonymousClass
{
   public totLen { get; set; }
} 
```

...哪些实例不能转换为十进制。

# android - 从 Application.through .net Web 服务在 android 设备上推送通知

> ID：14456334
> 
> 赞同：0
> 
> 时间：2013-01-22T10:25:41.217
> 
> 标签：android, push-notification, push

从应用程序通过.net Web服务在Android设备上推送通知，即使我注销了我的ID并关闭了我的应用程序，我也需要在Android设备中显示通知，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:31:20.763

Google Cloud Messaging for Android (GCM) 是一项服务，可让您将数据从服务器发送到用户的 Android 设备。有关更多详细信息，请点击此链接[http://developer.android.com/google/gcm/index.html](http://developer.android.com/google/gcm/index.html)

# objective-c - 方法调用的参数太多，预期为 1，有 21

> ID：14456336
> 
> 赞同：2
> 
> 时间：2013-01-22T10:25:48.393
> 
> 标签：objective-c, compiler-errors, nsstring, arguments, nsarray

当我使用这段代码时，Xcode 给了我一个错误：

```
NSArray *buttonsFiles = [NSArray arrayWithObject:@"button_plus.png",@"button_minus.png",@"button_multiple.png",@"button_div.png",@"button_eq.png",@"button_percent.png",@"button_sqrt.png",@"button_back.png",@"button_pointer.png",@"button_c.png",@"button_0.png",@"button_1.png",@"button_2.png",@"button_3.png",@"button_4.png",@"button_5.png",@"button_6.png",@"button_7.png",@"button_8.png",@"button_9.png",nil]; 
```

我应该使用它来避免错误吗？

```
NSString *myfile1 = [@"button_plus.png"];
NSString *myfile2 = [@"button_minus.png"];
...
NSString *myfile20 = [@"button_9.png"];
NSArray* myArray = [NSArray arrayWithObjects:myfile1, myfile2... myfile20r, nil]; 
```

![截屏](../Images/bbde0e0c035979fce63e49f63fdc0ea0.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T10:28:22.663

你需要的方法是`[NSArray arrayWithObjects:]`，不是`[NSArray arrayWithObject:]`

注意复数**Objects**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T10:28:05.057

应该是**你**`-[NSArray arrayWithObjects:]`忘记了

# forms - 遍历 request.form 并创建具有适当值的变量。在 ASP 经典

> ID：14456337
> 
> 赞同：0
> 
> 时间：2013-01-22T10:25:49.207
> 
> 标签：forms, asp-classic, request, eval

我有几种表单，其中有大量的键/值应该因表单而异，但指的是同一个“项目”。

我想制作一个 ASP 脚本，它采用所有这些键/值并创建具有值的变量。`name_field_codenumber`我的意思是，如果我有一个名为“name_field_codenumber”且值为“32_someName”的文本字段，我想创建一个名为 的变量`32_someName`，因此我可以测试该变量 print, end 等等，我已经这样做了：

```
for each x in Request.Form 
        x.name = Request.Form(x) 
next 
```

这给我带来了 500 错误，需要对象

和这个

```
 for each x in Request.Form 
            eval(x) = Request.Form(x) 
    next 
```

它返回类型不匹配...

有人可以帮助我，我认为这应该很容易，但我无法让这件事起作用：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:06:37.267

我找到了解决方案，而且很简单：

```
For Each Field in Request.Form
TheString = Field & "=Request.Form(""" _
& Field & """)"
EXECUTE(TheString)
Next 
```

# javascript - 输入不允许的字符时无效

> ID：14456339
> 
> 赞同：0
> 
> 时间：2013-01-22T10:25:51.840
> 
> 标签：javascript

我需要向文本输入字段添加一个控件，以便它每次只允许一个主题标签：

```
in the form: valid_hash = /#([a-zA-Z_0-9]+)/gim;

<input type="text" id="add_by_hand"> 
```

至今：

```
$(function() {
  var txt = $("#add_by_hand");
  var func = function(e) {
    if(e.keyCode != "37" && e.keyCode != "38" && e.keyCode != "39" && e.keyCode != "40"){
        txt.val(txt.val().replace(/\s/g, ''));
    }
  }
  txt.keyup(func).blur(func);
}); 
```

这只是为了避免空格（因此每次只有一个主题标签）是可以的，但我想以一种方式验证它，如果 valid_hash var 不允许的字符会自动删除。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:04:40.913

在您的函数中尝试此代码：

```
 if(! valid_hash.test(txt.val()+String.fromCharCode(e.keyCode))){     
    return false; //avoid key.
} 
```

# c# - Adding/Docking controls in UserControl C# .NET

> ID：14456341
> 
> 赞同：3
> 
> 时间：2013-01-22T10:25:55.710
> 
> 标签：c#, .net, user-controls, docking

I am writing a UserControl which adds child controls programmatically. Currently I am adding new controls like so:

```
this.Controls.Add(new Control() { Height = 16, Dock = DockStyle.Top }); 
```

The problem I am experiencing is that new controls are added above the existing controls, so where I want the controls to be ordered 1, 2, 3, 4, 5, 6 from top to bottom, it's ordering them as 6, 5, 4, 3, 2, 1 from top to bottom.

I want to know how I ensure a new control is added after all existing controls (in terms of display order).

And also, I want to know if I can insert a control between two other selected controls

I have tried setting the TabIndex but that didn't help!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:55:06.787

When using Winforms only the sequence in which controls are added determines their docking behaviour.

The last added control will always go nearest to the docking border, i.e. to the top with `DockStyle.Top`. Neither `BringToFront` nor `SendToBack` or Tab-order will change this.

Just add your controls in reverse order, or remove them and add them again.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:03:00.783

Here's my solution to this. Basically you put the controls in a list as well as the container. Then you use Bring to Front as mentioned is pretty much all posts. This of course also gives you the posibility of insert.

```
 Panel control1 = new Panel() { Height = 16, Dock = DockStyle.Top, BackColor = Color.Red};
    this.Controls.Add(control1);
    Panel control2 = new Panel() { Height = 16, Dock = DockStyle.Top, BackColor = Color.White };
    this.Controls.Add(control2);
    Panel control3 = new Panel() { Height = 16, Dock = DockStyle.Top, BackColor = Color.Black };
    this.Controls.Add(control3);
    Panel control4 = new Panel() { Height = 16, Dock = DockStyle.Top, BackColor = Color.Yellow };
    this.Controls.Add(control4);
    Panel control5 = new Panel() { Height = 16, Dock = DockStyle.Top, BackColor = Color.Blue };
    this.Controls.Add(control5);
    Panel control6 = new Panel() { Height = 16, Dock = DockStyle.Top, BackColor = Color.Green };
    this.Controls.Add(control6);
    PanelList.Clear();
    PanelList.Add(control1);
    PanelList.Add(control2);
    PanelList.Add(control3);
    PanelList.Add(control4);
    PanelList.Add(control5);
    PanelList.Add(control6);
    Panel control7 = new Panel() { Height = 16, Dock = DockStyle.Top, BackColor = Color.Pink };
    this.Controls.Add(control7);
    PanelList.Insert(3, control7);
    for (int i = 0; i < PanelList.Count; i++)
    {
        PanelList[i].BringToFront();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:34:29.870

```
private Int32 m_OffsetY = 0;
private Int32 m_MarginY = 10;

private void AddControl(Control control)
{
    SuspendLayout();
    Controls.Add(control);
    control.Location = new Point(m_OffsetX, m_OffsetY);
    ResumeLayout();

    m_OffsetY += control.Height + m_MarginY;
}

// ... 
```

For what concerns controls insertion... it's not possible as controls position depends on the order they are added to the form. If you have layout space, however, you can insert a control between two controls physically... you calculate ctrl1 and ctrl2 positions and dimensions and you set the location of the new one depending on this.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-26T19:39:05.217

I know this is years old but what the heck.

You can use the SetChildIndex method to control this as follows

```
var someControl = new UserControl();
someControl.Dock = DockStyle.Top;
MainForm.Controls.Add(someControl);
MainForm.Controls.SetChildIndex(someControl, 0); 
```

Source: [http://tipsntricksbd.blogspot.com/2009/10/c-dynamically-adding-control-with.html](http://tipsntricksbd.blogspot.com/2009/10/c-dynamically-adding-control-with.html)

# android - NextFocusDown 不适用于 AutoCompleteTextView

> ID：14456342
> 
> 赞同：34
> 
> 时间：2013-01-22T10:25:57.563
> 
> 标签：android, autocomplete, android-edittext, android-xml

在用户填写一个后，我试图专注于下一个编辑文本。代码工作得很好，`EditText`但是当我将它应用到 时`AutoCompleteTextView`，键盘上的 Next 按钮不起作用。光标停留在原处。这是我正在使用的代码：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="11" >

    <AutoCompleteTextView
        android:id="@+id/etLN"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="3"
        android:ems="10"
        android:nextFocusDown="@+id/etC"
        android:inputType="textPersonName" >

        <requestFocus />
    </AutoCompleteTextView>

    <EditText
        android:id="@id/etC"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="4"
        android:ems="10"
        android:hint="0.0"
        android:nextFocusDown="@+id/etD"
        android:inputType="numberDecimal"
        android:text="" />

    <EditText
        android:id="@id/etD"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="4"
        android:ems="10"
        android:nextFocusDown="@+id/etLN2"
        android:hint="0.0"
        android:inputType="numberDecimal"
        android:text="" />
</LinearLayout> 
```

请告诉我这样做的正确方法是什么。谢谢 ：）

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-01-22T11:50:37.447

将此添加到您的 AutoCompleteTextView

```
android:imeOptions="actionNext" 
```

它应该可以工作。

# javascript - 同一HTML页面的横向和纵向设计

> ID：14456346
> 
> 赞同：1
> 
> 时间：2013-01-22T10:26:18.953
> 
> 标签：javascript, html, css, responsive-design

我需要为我的网络应用程序创建两个版本（例如，仅 1 个 HTML 页面）：一个用于横向（宽视图），一个用于纵向（高视图）。但我需要像我们通常在 iPad 中那样运行它们；在纵向模式下，纵向版本应该可以工作，如果模式是横向，那么横向版本。

我在某处读过这个，但不确定。我可以用一个 HTML 文件和两个 CSS 文件制作应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:30:37.983

查看 Google 上的响应式网页设计。我的应用程序使用 Twitter 的 Bootstrap 项目，但方法很明显：根据设备的当前宽度定义 CSS。宽度改变，CSS 改变。

[http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

对于 CSS3 和媒体查询，请查看这篇文章：

[http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

它可能会像这样：

```
/* iPads (landscape-wide) */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

 /* iPads (portrait-tall) */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
} 
```

虽然需要一些研发...

希望这可以帮助

# android - 异步任务的实现

> ID：14456347
> 
> 赞同：1
> 
> 时间：2013-01-22T10:26:19.700
> 
> 标签：android, android-asynctask

我正在尝试在此类中实现**异步任务**`getInputStream`，但问题是我在我的程序中调用函数，该函数正在返回一个值，但我不确定将它放在哪里。`getInputStream`我应该在我的异步任务中定义哪里？我收到以下异常

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity      com.sparkplug.xxxx}: java.lang.NullPointerException 
```

以下是我的主要课程：

```
public class abcreaderextends ListActivity {

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    parsing p=new parsing();

        @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_awsreader);
        ((PullToRefreshListView) getListView())
                .setOnRefreshListener(new OnRefreshListener() {
                    public void onRefresh() {
                        // Do work to refresh the list here.
                        new GetDataTask().execute();
                    }
                });
        InputStreamOperation in= new InputStreamOperation();

        in.execute();

        //p.parse();

        for (int i = 0; i < p.headlines.size(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            // adding each child node to HashMap key => value
            map.put("title", p.headlines.get(i));
            map.put("dcdate", p.lstDate.get(i));
            map.put("description", p.description.get(i));
            // adding HashList to ArrayList
            menuItems.add(map);
        }

                ListAdapter rssFeedSection = new SimpleAdapter(this, menuItems,
                R.layout.list_item, new String[] { "title", "dcdate",
                        "description" }, new int[] { R.id.name, R.id.date1,
                        R.id.desc });
        setListAdapter(rssFeedSection);
    }

    class GetDataTask extends AsyncTask<Void, Void, String[]> {
        @Override
        protected void onPostExecute(String[] result) {
            // **menuItems.addFirst("Added after refresh...");
            // Call onRefreshComplete when the list has been refreshed.
            ((PullToRefreshListView) getListView()).onRefreshComplete();
            super.onPostExecute(result);
        }

        @Override
        protected String[] doInBackground(Void... params) {
            // TODO Auto-generated method stub
            return null;
        }
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        Uri uri = Uri.parse((String) p.links.get(position));
        Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        startActivity(intent);
    }
} 
```

这是我的解析类： public class parsing { List headers; 列出链接；列表说明；列出 lstDate；列出新日期；//字符串a,b,c,d; public InputStream getInputStream(URL url) { try { return url.openConnection().getInputStream(); } 捕捉 (IOException e) { 返回 null; } }

```
 public HashMap<String, ArrayList<String>> parse() {

        // Initializing instance variables
        headlines = new ArrayList<String>();
        links = new ArrayList<String>();
        description = new ArrayList<String>();
        lstDate = new ArrayList<String>();
        try {
            URL url = new URL(
                    "http://feeds.feedburner.com/xxxx");
            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();
            // We will get the XML from an input stream
            xpp.setInput(getInputStream(url), "UTF_8");
            int i = 0;
            boolean insideItem = false;
            // Returns the type of current event: START_TAG, END_TAG, etc..
            int eventType = xpp.getEventType();
            int k = 0;
            while (eventType != XmlPullParser.END_DOCUMENT) {
                i++;
                // Log.i("Tag : ",xpp.getName().toString());
                // Log.i("Text : ",xpp.nextText().toString());
                if (eventType == XmlPullParser.START_TAG) {
                    Log.i("Tag : ", xpp.getName().toString());
                    // Log.i("Text : ",xpp.nextText().toString());
                    if (xpp.getName().equalsIgnoreCase("item")) {
                        insideItem = true;
                    } else if (xpp.getName().equalsIgnoreCase("title")) {
                        if (insideItem) {
                            String var = xpp.nextText().toString();
                            headlines.add(var); // extract the description of
                                                // article
                            Log.i("Title : ", var);
                            // Log.i("Count : ",i+"");
                        }
                    } else if (xpp.getName().equalsIgnoreCase("description")) {
                        if (insideItem) {
                            String desc = xpp.nextText().toString();
                            description.add(desc); // extract the description of
                                                    // article
                            Log.i("Desc : ", desc);
                        }
                    } else if (xpp.getName().equalsIgnoreCase("dc:date")) {
                        if (insideItem) {
                            String strDate = xpp.nextText().toString();

                            System.out.println("rahul"+strDate.substring(0,10));
                            //lstDate = Arrays.asList(arr[k].substring(0,10));
                            lstDate.add(strDate.substring(0,10));
                            System.out.println("lstDate"+lstDate);
                            k = k+1;
                            Log.i("Date : ", strDate);
                        }
                    } else if (xpp.getName().equalsIgnoreCase("link")) {
                        if (insideItem)
                            links.add(xpp.nextText()); // extract the link of
                                                        // article
                    }
                } else if (eventType == XmlPullParser.END_TAG
                        && xpp.getName().equalsIgnoreCase("item")) {
                    insideItem = false;
                }
                eventType = xpp.next(); // move to next element
            }// While end
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        HashMap<String, ArrayList<String>> alllists = 
                                        new HashMap<String, ArrayList<String>>();
        alllists.put("headlines",(ArrayList<String>) headlines);
        alllists.put("links",(ArrayList<String>) links);
        alllists.put("description",(ArrayList<String>) description);
        alllists.put("lstDate",(ArrayList<String>) lstDate);

        return alllists;
        }
} 
```

这是我的 InputStreamOperation 类： public class InputStreamOperation extends AsyncTask>> {

```
@Override
protected void onPreExecute() {
// show progress bar here(have not used any progress bar)
}

@Override
protected HashMap<String, ArrayList<String>> 
                           doInBackground(Void... params) {

//call parse() method here
parsing parsingobj=new parsing();
HashMap<String, ArrayList<String>> alllists=parsingobj.parse();

return alllists;  //<<< retun final result from here

}      

@Override
protected void onPostExecute(HashMap<String, ArrayList<String>> result) {  
// update UI here            
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:29:55.763

试试这样。。

```
class Search AsyncTask<String, Void, ArrayList<Movie>>() {

                @Override
                protected void onPreExecute() {
                    progressDialog= ProgressDialog.show(context, "Please Wait","Searching movies", true);
                }

                @Override
                protected ArrayList<Movie> doInBackground(String... params) {
                    String moviesJson = retrieveStream[params[0]];
                    JSONObject moviesJson = new JSONObject(moviesJson);
                    ArrayList<Movie> movies = new ArrayList<Movie>();
                    /*
                     * Do your code to process the JSON and create an ArrayList of films.
                     * It's just a suggestion how to store the data.
                     */
                    return movies;
                }

                protected void onPostExecute(ArrayList<Movie> result) {
                    progressDialog.dismiss();
                    //create a method to set an ArrayList in your adapter and set it here.
                    sampleActivity.mListAdapter.setMovies(result);
                    sampleActivity.mListAdapter.notifyDataSetChanged();
                }
            } 
```

了解更多信息..

[AsyncTask 和 InputStream 的 Android 问题](https://stackoverflow.com/questions/12849014/android-issues-with-asynctask-and-inputstream)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:29:59.403

它应该写在 doInBackground() 方法中。

由于格式问题，我无法上传确切的代码

1 创建一个扩展 asyncTask 的类 2 在 doInBackground 中写入 getInputStream 3 调用 asynctask 以获取 InputStream

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:31:49.570

您将需要调用AsyncTask 的`getInputStream`内部`doInBackground`方法：

首先将解析方法返回类型更改`HashMap<String, String>`为：

```
public HashMap<String, ArrayList<String>> parse() {

 ///your code here...

HashMap<String, ArrayList<String>> alllists = 
                                new HashMap<String, ArrayList<String>>();
alllists.put("headlines",headlines);
alllists.put("links",links);
alllists.put("description",description);
alllists.put("lstDate",lstDate);

return alllists;
} 
```

并将 AsyncTask 类创建为：

```
private class InputStreamOperation extends 
                    AsyncTask<String, Void, HashMap<String, ArrayList<String>>> {

      @Override
      protected void onPreExecute() {
        // show progress bar here
      }

      @Override
      protected HashMap<String, ArrayList<String>> 
                                               doInBackground(String... params) {

           //call parse() method here
          parsing parsingobj=new parsing();
          HashMap<String, ArrayList<String>> alllists=parsingobj.parse();

          return alllists;  //<<< retun final result from here

      }      

      @Override
      protected void onPostExecute(HashMap<String, ArrayList<String>> result) {  
              // update UI here            
      }

} 
```

# jquery - 选中复选框时将类添加到表中

> ID：14456350
> 
> 赞同：0
> 
> 时间：2013-01-22T10:26:28.750
> 
> 标签：jquery, html, css

选中复选框后，如何将类添加到表中，然后取消选中后删除。我有以下脚本

```
 .opacity40{
    opacity:0.4;
    filter:alpha(opacity=40);
    }

    <input type="checkbox" name="checkbox" id="mycheckbox" />   

<script>
    $("#tableDist").addClass("opacity40");
        $("input#mycheckbox").click(function() {
            if($(this).is(":checked") {
                $("#tableDist").rmoveClass("opacity40");
            }
            else {
                $("#tableDist").addClass("opacity40");
            }
        })
</script>

      <table id="tableDist">
    </table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:29:51.777

```
$("#tableDist").addClass("opacity40");
$("input#mycheckbox").change(function () {
  $("#tableDist").toggleClass("opacity40");
}); 
```

Adil 的答案是正确的，尽管这个答案要短得多。

**[小提琴](http://jsfiddle.net/yLjG7/2)**（**具有**精美的过渡效果！：D）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:35:02.027

```
//Classic
$("#checkBox-id").change(function(){
    $("#tableDist").toggleClass("opacity40");
});

// First way 
if($('#checkBox-id').attr('checked'))
{
   $("#tableDist").toggleClass("opacity40");
} 

// Second way 
if($('#checkBox-id').is(':checked'))
{
   $("#tableDist").toggleClass("opacity40");
} 
```

还...

```
// Third way for jQuery 1.2
$("input[@type=checkbox][@checked]").each( 
    function() { 
       $(this).toggleClass("opacity40");
    } 
);
// Third way == UPDATE jQuery 1.3
$("input[type=checkbox][checked]").each( 
    function() { 
       $(this).toggleClass("opacity40");
    } 
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:28:05.740

很少有更正和建议。

*更正*

1.  的拼写错误`removeClass`，`rmoveClass`改为 `removeClass`
2.  您还**错过**了 if 语句的右括号。

*建议*

1.  在表中添加一些数据。
2.  还将您的脚本放在头标签中或就在正文的结束标签之前。

**[现场演示](http://jsfiddle.net/Dwvc9/)**

```
$("#tableDist").addClass("opacity40");
 $("input#mycheckbox").click(function () {
   if ($(this).is(":checked")) {
     $("#tableDist").removeClass("opacity40");
   } else {
     $("#tableDist").addClass("opacity40");
   }
}); 
```

# javascript - 使用 Jquery 检索输入值

> ID：14456353
> 
> 赞同：0
> 
> 时间：2013-01-22T10:26:40.250
> 
> 标签：javascript, jquery, input

我想检索我的页面的一些输入框的值以继续进行 ajax 请求，所以我写道：

```
 var account_data = ['firstname', 'lastname', 'e-mail'];
    $.each(account_data, function(index,value){
       var tmp = '[name='+value+']';
       data.value = $(tmp).val();
    }); 
```

但是当我提醒控制台中的值时它不起作用（它返回未定义）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:29:54.570

使用`input`带`name`属性的选择器

试试这个

```
data={};  //create new object
var account_data = ['firstname', 'lastname', 'e-mail'];
$.each(account_data, function(index,value){
   var tmp = 'input[name="'+value+'"]'; //here
   //alert($(tmp).val());
   data[value] = $(tmp).val();  //push the value to the data object
}); 
```

现在您可以使用 ajax 请求处理数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:32:21.050

如果这是您可以执行的所有输入：

```
var account_data = $.map( $('input'), function() { return this.value; }); 
```

除此以外：

```
var account_data = ['firstname', 'lastname', 'e-mail'],
    data = {};

$.each(account_data, function(index,vals){
   data[vals] = $('[name="'+vals+'"]').val(); //you're overwriting data.value
});

console.log(data); 
```

# twitter-bootstrap - validate css3: Parse Error *zoom (or *marging, *width and etc.)

> ID：14456362
> 
> 赞同：1
> 
> 时间：2013-01-22T10:27:12.420
> 
> 标签：twitter-bootstrap, css

* 在 bootstrap.css 中有什么影响？我正在尝试验证我网站的 css，它向我展示了这一点：

“抱歉！我们发现以下错误 (676)”和

解析错误 *zoom: 1;

解析错误*宽度：

等等。

我想知道会发生什么，如果我删除那些存在 *(css-attribute) 的行

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:31:59.300

它被称为[CSS Star Hack](http://www.phpied.com/the-star-hack-in-ie8-and-dynamic-stylesheets/)。它允许你通过一些 CSS hack 来定位特定的浏览器，由于它们的解析引擎，只有几个浏览器可以读取。

这是一个例子：

```
.box {
    background: red; /* normal browsers */
    *background: blue;  /* IE 6 and 7 */
    _background: green; /* IE6 */
} 
```

您会收到这些错误消息，因为验证器不允许/识别这些黑客。

# c++ - 什么是最快的仪器分析器

> ID：14456363
> 
> 赞同：0
> 
> 时间：2013-01-22T10:27:14.060
> 
> 标签：c++, c, linux, x86, profiling

可用于动态分析的最快分析器是什么（如 gprof 所做的）。分析器必须是仪器分析器，或者即使它具有采样分析器，我也很想知道仪器分析器的开销，因为无论如何采样分析器可以以几乎 0% 的开销完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:49:55.830

任何使用基于硬件的采样（通过 CPU PMSR）的分析器都将具有最小的开销（因为它读取 CPU 在硬件级别跟踪的分析数据，有关更多信息，请参阅 AMD 和 Intel 架构手册，它们应该是在其中一个附录中进行了深入解释）。

我知道使用这些的唯一分析器是用于 Intel的[VTune](http://software.intel.com/en-us/intel-vtune-amplifier-xe) （非免费）和用于 AMD 的[CodeAnalyst （免费）。](http://developer.amd.com/tools/heterogeneous-computing/amd-codeanalyst-performance-analyzer/)

接下来是基于计时器的分析器和基于事件的分析器，其中开销最少的可能是直接编译到您的代码中的那些（CodeAnalyst 有一个基于事件的 API，VTune 也有）。[gprof](http://www.cs.utah.edu/dept/old/texinfo/as/gprof.html)也属于这一类（如果仍然维护，Clang 也有一些东西，但 IDK ......）。如果你有 VS Pro 或 Ultimate，它的 PG 编译模式会做类似的事情，尽管我从来没有发现它可以与专用的分析器套件进行比较。

最后是需要在代码中插入探针以确定其分析数据的那些，所有上述的都可以做到这一点，以及其他免费软件分析器，如 VerySleepy。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:32:40.237

英特尔的[vtune 放大器](http://software.intel.com/en-us/intel-vtune-amplifier-xe)可能是最完整的。

# android - 在 Android 中调试外部库

> ID：14456366
> 
> 赞同：0
> 
> 时间：2013-01-22T10:27:17.873
> 
> 标签：android, debugging, adt

我有几个`.jar`文件要引用到我的 Android 项目中，并且我有它们的源代码。关键是，为了`.jar`从源代码构建，我必须使用 Maven - 构建过程非常复杂，而且由于我对 Android 和 Maven 都是新手，我正在尝试重用脚本来构建这些库写在我之前，不要直接添加来源。

所以我的意图很简单：

1.  `.class`通过 Maven 脚本构建文件
2.  通过命令行中的 jar 工具`.jar`从这些文件编译`.class`
3.  从我的 android 项目中引用这些库。

但是，一旦我将文件复制`.jar`到`libs`android 项目中的文件夹中-我无法在它们上添加源-并且我无法调试它们。

[看起来这个问题在 SO here](https://stackoverflow.com/questions/10075453/the-jar-of-this-class-file-belongs-to-container-android-dependencies-which-doe)或[here](https://stackoverflow.com/questions/2064100/the-jar-of-this-class-file-blongs-to-container-android-2-0-1-which-does-not-allo)上已经多次出现。仍然没有什么对我有用。`.properties`当我转到 Java Build Path 时，Eclipse 似乎无法识别文件 - 源路径被标记为`(None)`并且不可修改，并且如果我像 ADT17 之前那样引用库（添加自定义目录，如最后`lib`没有，并将这些 jars 引用为外部库） - 这修复了调试，但由于[这个](https://stackoverflow.com/questions/6168841/unable-to-resolve-super-class)`s`原因，编译器似乎没有包含所有源代码

我读过应该在 ADT20 中修复，但我正在使用 ADT21，但仍然没有运气。有什么可用的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:41:54.433

终于做到了！这看起来仍然像 ADT 中的错误。我找到的唯一解决方案是引用 ADT17 之前的库（将它们放入`lib`不带 's' 的单独文件夹中，将它们添加到构建路径，并标记 中的复选框`Configure Build Path -> Order and Export`）。

我缺少的实际上是标记复选框-由于某种原因，当您更改该对话框中的任何内容时，复选框变得未标记。我想我只是没有注意到...

# iphone - 千禧媒体广告横幅点击在 iphone 中不起作用，并且广告在 60 秒后弹出模态视图控制器

> ID：14456369
> 
> 赞同：1
> 
> 时间：2013-01-22T10:27:23.617
> 
> 标签：iphone, objective-c

我已经实施了千禧年媒体框架，它正在工作。但是每 60 秒的计时器就会弹出广告。我只看到白色横幅并且点击不起作用。我已经实现了所有代表，横幅是超级视图，上面没有视图。我想要一个显示添加的广告横幅，并在点击它时出现一个广告模型..

非常感谢您的帮助，这是我用来添加横幅视图的代码。

谢谢

// 创建一个 320 x 53 的框架来显示 iPhone 广告，或创建一个 768 x 90 的框架来显示 iPad 广告 CGRect adFrame = ((IS_IPHONE5) ? CGRectMake(0, 451, 320, 53): CGRectMake(0, 363, 320, 53));

```
// Returns an autoreleased MMAdView object
bannerAdView_ = [[MMAdView adWithFrame:adFrame
                                 type:MMBannerAdBottom
                                 apid:BANNER_APID
                             delegate:self  // Must be set, CANNOT be nil
                               loadAd:YES   // Loads an ad immediately
                           startTimer:YES] retain]; // Start timer to auto refresh the ad view
bannerAdView_.rootViewController = self; // you must set the rootViewController

[MMAdView setLogLevel: MMLOG_LEVEL_INFO | MMLOG_LEVEL_DEBUG];

[self.view addSubview:bannerAdView_]; 
```

# r - 将 cut() 生成的标签格式化为百分比

> ID：14456371
> 
> 赞同：18
> 
> 时间：2013-01-22T10:27:29.750
> 
> 标签：r

我需要应用`cut`一个连续变量以在 ggplot2 中使用 Brewer 色标显示它，如在 ggplot2 中[使用 scale_fill_brewer() 函数为数据设置断点](https://stackoverflow.com/q/6738085/946850)。连续变量是一个相对差异，我想将数据格式化为“18.2 %”而不是“0.182”。有没有简单的方法来实现这一目标？

```
x <- runif(100)
levels(cut(x, breaks=10))

[1] "(0.0223,0.12]" "(0.12,0.218]"  "(0.218,0.315]" "(0.315,0.413]"
[5] "(0.413,0.511]" "(0.511,0.608]" "(0.608,0.706]" "(0.706,0.804]"
[9] "(0.804,0.901]" "(0.901,0.999]" 
```

例如，我希望第一级显示为`(2.23 %, 12 %]`. 有更好的选择`cut`吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-01-22T16:33:39.347

我已经[`cut_format()`](http://krlmlr.github.io/kimisc/reference/cut_format.html)在我的包的 0.2-3 版中实现了`kimisc`，0.3 版现在在 CRAN 上。

```
# devtools::install_github("krlmlr/kimisc")
x <- seq(0.1, 0.9, by = 0.2)

breaks <- seq(0, 1, by = 0.25)

cut(x, breaks)
## [1] (0,0.25]   (0.25,0.5] (0.25,0.5] (0.5,0.75] (0.75,1]  
## Levels: (0,0.25] (0.25,0.5] (0.5,0.75] (0.75,1]

cut_format(x, breaks, format_fun = scales::percent)
## [1] (0%, 25%]   (25%, 50%]  (25%, 50%]  (50%, 75%]  (75%, 100%]
## Levels: (0%, 25%] (25%, 50%] (50%, 75%] (75%, 100%] 
```

它仍然不完美，传递中断次数（如在原始示例中）还不起作用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-22T10:43:52.457

`gsub`将原始数据乘以 100 后使用一些正则表达式：

```
gsub("([0-9.]+)","\\1%",levels(cut(x*100,breaks=10)))
 [1] "(0.449%,10.4%]" "(10.4%,20.3%]"  "(20.3%,30.2%]"  "(30.2%,40.2%]"  "(40.2%,50.1%]"  "(50.1%,60%]"    "(60%,69.9%]"    "(69.9%,79.9%]"  "(79.9%,89.8%]"  "(89.8%,99.7%]" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-22T11:44:35.123

为什么不复制代码`cut.default`并创建您自己的具有修改级别的版本？请参阅[此要点](https://gist.github.com/4593967)。

更改了两行：

第 22 行：`ch.br <- formatC(breaks, digits = dig, width = 1)`更改为`ch.br <- formatC(breaks*100, digits = dig, width = 1)`.

第 29 行：`else "[", ch.br[-nb], ",", ch.br[-1L], if (right)`更改为`else "[", ch.br[-nb], "%, ", ch.br[-1L], "%", if (right)`

其余的都是一样的。它在行动中：

```
library(devtools)
source_gist(4593967)

set.seed(1)
x <- runif(100)
levels(cut2(x, breaks=10))
#  [1] "(1.24%, 11%]"   "(11%, 20.9%]"   "(20.9%, 30.7%]" "(30.7%, 40.5%]" "(40.5%, 50.3%]"
#  [6] "(50.3%, 60.1%]" "(60.1%, 69.9%]" "(69.9%, 79.7%]" "(79.7%, 89.5%]" "(89.5%, 99.3%]" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-03T02:07:06.093

一个老问题的新答案。

您可以使用`label`参数传递一个函数来格式化标签。我将使用`gsubfn`和`scales::percent`

```
library(gsubfn)
library(scales)
pcut <- function(x) gsubfn('\\d\\.\\d+', function(x) percent(as.numeric(x)),xx)
d <- data.frame(x=runif(100))

ggplot(d,aes(x=x,y=seq_along(x))) + 
 geom_point(aes(colour = cut(x, breaks = 10))) + 
 scale_colour_brewer(name = 'x', palette = 'Spectral', label = pcut) 
```

![在此处输入图像描述](../Images/a42a6fbdeb60f175bc02f64e53b4e12a.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-04T20:06:13.613

我的包`cutr`与@krlmlr 的功能非常相似（直到现在我才知道）。

`cutf`只是`cut`带有一个`format_fun`参数，`...`它被传递给，而`format_fun`不是`cut`.`cut_format`

`smart_cut`具有更多功能和不同的默认值：

```
devtools::install_github("moodymudskipper/cutr")
library(cutr)

x <- seq(0.1, 0.9, by = 0.2)
breaks <- seq(0, 1, by = 0.25)

cutf(x, breaks, format_fun = scales::percent)
# [1] (0%,25%]   (25%,50%]  (25%,50%]  (50%,75%]  (75%,100%]
# Levels: (0%,25%] (25%,50%] (50%,75%] (75%,100%]

smart_cut(x, breaks, format_fun = scales::percent,simplify = F, closed = "right")
# [1] [0%,25%]   (25%,50%]  (25%,50%]  (50%,75%]  (75%,100%]
# Levels: [0%,25%] < (25%,50%] < (50%,75%] < (75%,100%] 
```

`Hmisc::cut2`现在也有一个`formatfun`论点：

```
library(Hmisc)
Hmisc::cut2(x, breaks, formatfun = scales::percent)
# [1] [0%,25%)   [25%,50%)  [50%,75%)  [50%,75%)  [75%,100%]
# Levels: [0%,25%) [25%,50%) [50%,75%) [75%,100%] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-09T12:48:31.913

新的[{santoku} 包](https://hughjonesd.github.io/santoku/)现在提供了一种在开发版本中执行此操作的方法：

```
library(santoku)

set.seed(20200607)
x <- runif(20)

chop_evenly(x, 10, labels = lbl_intervals(fmt = percent))
#>  [1] [33.13%, 42.11%) [60.08%, 69.06%) [69.06%, 78.04%) [69.06%, 78.04%)
#>  [5] [87.02%, 96%]    [6.193%, 15.17%) [15.17%, 24.15%) [6.193%, 15.17%)
#>  [9] [33.13%, 42.11%) [6.193%, 15.17%) [87.02%, 96%]    [51.1%, 60.08%) 
#> [13] [42.11%, 51.1%)  [6.193%, 15.17%) [42.11%, 51.1%)  [6.193%, 15.17%)
#> [17] [6.193%, 15.17%) [69.06%, 78.04%) [78.04%, 87.02%) [87.02%, 96%]   
#> 9 Levels: [6.193%, 15.17%) [15.17%, 24.15%) ... [87.02%, 96%]
tab_evenly(x, 10, labels = lbl_intervals(fmt = scales::label_percent(accuracy = 0.1)))
#> x
#>  [6.2%, 15.2%) [15.2%, 24.2%) [33.1%, 42.1%) [42.1%, 51.1%) [51.1%, 60.1%) 
#>              6              1              2              2              1 
#> [60.1%, 69.1%) [69.1%, 78.0%) [78.0%, 87.0%) [87.0%, 96.0%] 
#>              1              3              1              3 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2020 年 6 月 9 日创建)

# model-view-controller - Ext JS 的 MVC 是反模式吗？

> ID：14456373
> 
> 赞同：11
> 
> 时间：2013-01-22T10:27:29.980
> 
> 标签：model-view-controller, extjs, anti-patterns

我在一个由 25 名开发人员组成的团队中工作。我们使用 Sencha 的 ExtJS MVC 模式。但我们认为他们对 MVC 的定义具有误导性。也许我们也可以称他们的 MVC 为反模式。

AMAIK，在 MVC 控制器中只知道视图的名称或路径，不知道视图的内部结构。例如，视图是否将客户列表呈现为简单的下拉列表或自动完成，这不是控制器的责任。

然而，在 Ext JS 的 MVC 中，控制器应该知道视图元素的渲染，因为控制器会钩住这些元素，并监听它们的事件。这意味着如果视图的一个元素发生了变化（例如一个按钮变成了一个链接），那么控制器中的相关选择器也应该发生变化。换句话说，控制器与视图的内部结构紧密耦合。

这个理由谴责 Ext JS 的 MVC 是反模式可以接受吗？我们认为控制器与视图耦合是对的吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T08:00:48.117

**更新（2015 年 3 月）：** Ext 5.0 引入了[ViewControllers](http://www.sencha.com/blog/using-viewcontrollers-in-ext-js-5)，它应该解决这个线程中讨论的大部分问题。好处：

*   围绕 ViewController 内的组件引用更好/强制范围
*   更容易将特定于视图的逻辑与应用程序流控制逻辑分开封装
*   由框架管理的 ViewController 生命周期以及与之关联的视图

Ext 5 仍然提供现有的`Ext.app.Controller`类，以保持向后兼容，并为如何构建应用程序提供更大的灵活性。

**原答案：**

> 在 Ext JS 的 MVC 中，控制器应该知道视图元素的渲染，因为控制器挂钩到这些元素，并监听它们的事件。这意味着如果视图的一个元素发生了变化（例如一个按钮变成了一个链接），那么控制器中的相关选择器也应该发生变化。换句话说，控制器与视图的内部结构紧密耦合。

我实际上同意，在大多数情况下，由于您引用的确切原因，这不是最佳选择，而且不幸的是，Ext 和 Touch 附带的大多数示例都演示了通常使用违反视图封装的选择器定义的 refs 和控制功能。然而，这不是 MVC 的要求——这只是示例的实现方式，很容易避免。

顺便说一句，我认为区分真正的**应用程序**控制器（控制应用程序流和共享业务逻辑，应该与视图完全分离——这些就是你所指的）和**视图**控制器（控制/特定于视图的事件逻辑，通过设计紧密耦合）。后者的示例是在视图内的小部件之间进行协调的逻辑，完全在该视图内部。这是一个常见的用例，将视图控制器耦合到它的视图不是问题——它只是一种代码管理策略，可以使视图类尽可能地哑。

问题在于，在大多数记录的示例中，每个控制器都只是引用它想要的任何内容，这不是一个很好的模式。然而，这不是 Ext 的 MVC 实现的要求——它只是他们的示例中使用的（惰性？）约定。让您的视图类为应该暴露给应用程序控制器的任何内容定义自己的自定义 getter 和事件非常简单（我认为这是可取的）。配置`refs`只是一个简写——你总是可以像`myView.getSomeReference()`你自己一样调用一些东西，并允许视图决定返回什么。而不是`this.control('some > view > widget')`仅仅在视图上定义一个自定义事件并`this.control('myevent')`在该小部件执行控制器需要知道的事情时执行。就这么简单。

缺点是这种方法需要更多的代码，而且对于简单的情况（如示例），它可能是矫枉过正的。但我同意，对于实际应用程序或任何共享开发，这是一种更好的方法。

所以是的，将应用程序级控制器绑定到内部视图控件本身就是一种反模式。但是Ext的MVC不需要它，避免自己做也很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:31:12.747

我每天都使用 ExtJS 4 的 MVC。我有一个优雅的 MVC 应用程序，而不是意大利面条式代码，它具有严格定义的 concens 分离，并且维护和扩展非常简单。也许您的实现需要稍微调整以充分利用 MVC 方法提供的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T02:22:15.023

当然，控制器以某种方式绑定到视图。您需要准确定位您想要聆听的视图中的哪些元素。

例如：监听按钮点击或表单元素更改或自定义组件/事件。

MVC 的目标是组件解耦和可重用性，而 Sencha MVC 在这方面很棒。正如@bmoeskau 所说，您必须小心分离视图控制器（视图/小部件本身的内置）和应用程序控制器（顶级视图操作）以充分利用 MVC 模式。[当您阅读http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture)时，这并不明显。重构您的 MVC 方法，创建不同的控制器，创建自定义组件，并采用完整的 ExtJS MVC 架构以利用它。

Sencha 方法仍然存在一个小问题，恕我直言，`refs`当您在应用程序中有多个相同视图的实例时，MVC 系统并不能真正工作。例如：如果您有一个 TabPanel 具有相同组件的多个实例，则 refs 系统将被破坏，因为它总是以 DOM 中找到的第一个元素为目标......有一些变通方法和[一个项目试图解决这个问题，](http://deftjs.org/)但我希望这会尽快得到解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-06T11:32:58.657

我目前正在参加 Sencha Training 的 ExtJS 4 快速通道。我在 ExtJS（自 ExtJS 2.0 起）方面有很强的背景，并且非常想知道 MVC 是如何在 ExtJS 4 中实现的。

现在，以前，我模拟控制器的方式是将该责任委托给主容器。想象一下 ExtJS 3 中的以下示例：

```
Ext.ns('Test');

Test.MainPanel = Ext.extend(Ext.Container, {
    initComponent : function() {
        this.panel1 = new Test.Panel1({
            listeners: {
                firstButtonPressed: function(){
                    this.panel2.addSomething();
                },
                scope: this
            }
        });
        this.panel2 = new Test.Panel2();

        this.items = [this.panel1,this.panel2];

        Test.MainPanel.superclass.initComponent.call(this);
    }

});

Test.Panel1 = Ext.extend(Ext.Panel, {
    initComponent : function() {
        this.addEvents('firstButtonPressed');

        this.tbar = new Ext.Toolbar({
           items: [{
             text: 'First Button',
               handler: function(){
                   this.fireEvent('firstButtonPressed');
               }
           }] 
        });

        Text.Panel1.superclass.initComponent.call(this);
    }
});

Test.Panel2 = Ext.extend(Ext.Panel, {
    initComponent : function() {
        this.items = [new Ext.form.Label('test Label')]

        Test.Panel2.superclass.initComponent.call(this);
    },

    addSomething: function(){
        alert('add something reached')
    }
}); 
```

如您所见，我的 MainPanel （除了持有两个面板的事实之外）还委托事件并因此在两个组件之间创建通信，因此模拟了某种控制器。

在 ExtJS 4 中直接实现了 MVC。真正让我印象深刻的是控制器实际获取组件的方式是通过 QuerySelector ，在我看来这很容易出错。让我们来看看：

```
Ext.define('MyApp.controller.Earmarks', {
    extend:'Ext.app.Controller',
    views:['earmark.Chart'],

    init:function () {
        this.control({
             'earmarkchart > toolbar > button':{
                click:this.onChartSelect
            },
            'earmarkchart tool[type=gear]':{
                click:this.selectChart
             }
        });
    }
}); 
```

因此，正如我们在此处看到的，Controller 了解专用图表按钮和工具的方式是通过选择器。现在让我们想象一下，我正在更改我的专用图表中的布局，并且我实际上将按钮移到了工具栏之外。突然间我的应用程序坏了，因为我总是需要注意更改布局可能会对与之关联的控制器产生影响。

有人可能会说我可以使用 itemId 来代替，但我需要再次注意，如果我删除了一个组件，我需要分散查找我的控制器中是否有针对该 itemId 的隐藏引用，以及我不能每个父组件具有相同的 itemId，因此如果我在 Panel1 中有一个名为“testId”的 itemId，并且在 Grid1 中有相同的 itemId，那么我仍然需要选择是需要来自 Panel1 还是来自 Grid1 的 itemId。

我知道 Query 非常强大，因为它为您提供了很大的灵活性，但在我看来，这种灵活性的代价非常高，如果我有一个由 5 人组成的团队开发用户界面，我需要解释这个概念，我由于我之前提到的几点，他们会犯很多错误。

您对此有何总体看法？以某种方式与事件进行交流会更容易吗？这意味着如果我的控制器实际上知道他期望事件的视图，那么可以只触发一个事件 dosomethingController 并且关联的控制器会得到它，而不是所有这些查询问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-05T03:58:58.237

我认为如果您使用 Sencha Architect 生成视图，然后从该视图继承以创建您自己的视图。现在这个 View 可以负责连接任何事件并引发有意义的事件。

这只是一个想法...

```
//Designer Generated
Ext.define('MyApp.view.MainView', {
    extend: 'Ext.grid.GridPanel',
    alias: 'widget.mainview',    
    initComponent: function() {
    }
});

//Your View Decorator
Ext.define('MyApp.view.MainView', {
    extend: 'MyApp.view.MainViewEx',
    alias: 'widget.mainviewex',    
    initComponent: function() {
    this.mon(this, 'rowselect', function(){
        this.fireEvent('userselected', arguments);
    }, this);
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-28T09:42:01.163

我认为这里有一个非常糟糕的问题——在一个页面内分割隔离单元非常困难。

我正在尝试的方法（这也使得编写测试更容易）是为每个包含逻辑的页面拥有一个 vanilla js 上下文对象（并且具有非常容易分解和委托给不同对象的好处） ）。然后，控制器在接收事件时基本上调用上下文对象上的方法，并在它们上具有用于检索视图位或更改视图的方法。

我来自 wpf 背景，喜欢将控制器视为代码隐藏文件。演示者/上下文和视图之间的对话比 wpf 更健谈（因为您没有绑定 + 数据模板），但也不算太糟糕。

还有一个我还没有解决的问题——对控制器使用单例会导致在同一页面上重用 UI 元素的问题。这似乎是一个严重的设计缺陷。我见过的常见解决方案是（再次）将所有内容都堆积到一个文件中，在这种情况下完全放弃控制器。显然，一旦事情开始变得复杂，这不是一个好方法。

似乎从控制器中获取所有状态应该会有所帮助，然后您将拥有第二级上下文对象 - 顶级对象基本上只是为每个视图分配一个唯一的 id 并具有 context=>view 的映射并提供对各个上下文方法的调度——它基本上是一个门面。然后每个视图的状态将在分派到的对象中处理。为什么静态是邪恶的一个很好的例子！

# c# - 如何在 DevExpress GridControl 中显示 RepositoryItemHyperLinkEdit 控件

> ID：14456376
> 
> 赞同：3
> 
> 时间：2013-01-22T10:27:53.230
> 
> 标签：c#, winforms, devexpress, xtragrid

我当前的 WinForms 应用程序中有一个 DevExpress GridControl。我需要在一列中显示一个超链接控件（RepositoryItemHyperLinkEdit）。我已经通过设计器添加了 RepositoryItemHyperLinkEdit，但是当我运行应用程序时，没有显示超链接。
喜欢显示我们正在使用的按钮：

```
repositoryItemButtonEdit1.Buttons[0].Kind = DevExpress.XtraEditors.Controls.ButtonPredefines.Glyph;
repositoryItemButtonEdit1.Buttons[0].Caption = "Get Sql Query"; 
```

所以请告诉我我将写什么来在列中显示超链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:28:53.170

您可以使用以下代码在网格列中显示超链接：

```
GridColumn hyperLinkColumn = gridView1.Columns["Hyperlink"];
//...
RepositoryItemHyperLinkEdit hyperLinkEdit = new RepositoryItemHyperLinkEdit();
hyperLinkColumn.ColumnEdit = hyperLinkEdit; // this line associated hyperlink with column
hyperLinkEdit.OpenLink += hyperLinkEdit_OpenLink;
//...
void hyperLinkEdit_OpenLink(object sender, OpenLinkEventArgs e) {
    MessageBox.Show("HyperLinkEdit clicked!");
} 
```

如果要在同一列中显示附加按钮，可以使用以下方法：

```
hyperLinkEdit.Buttons[0].Kind = ButtonPredefines.Glyph;
hyperLinkEdit.Buttons[0].Caption = "Get SQL Query";
hyperLinkEdit.ButtonClick += hyperLinkEdit_ButtonClick;
hyperLinkColumn.ShowButtonMode = ShowButtonModeEnum.ShowAlways; // always display button in this column
//...
void hyperLinkEdit_ButtonClick(object sender, ButtonPressedEventArgs e) {
    MessageBox.Show("HyperLinkEdit's button clicked!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:37:40.733

您没有提到您已将列的 ColumnEdit 属性设置为存储库项。如果您还没有：

![存储库项](../Images/b3638ac8289a2c8f733a422bef726bcf.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T07:48:23.083

请注意，您可能必须使用 gridView_MouseUp 事件来捕获单击事件，而无需等待网格将焦点赋予单元格。

```
gridColumn.ColumnEdit = new RepositoryItemHyperLinkEdit();
gridColumn.OptionsColumn.ReadOnly = true;
gridColumn.OptionsColumn.AllowEdit = false;

gridView.MouseUp += gridView_MouseUp;

private void gridViewDesk_MouseUp(object sender, MouseEventArgs e)
{
    GridView gridView = (GridView) sender;
    if (e.Button == MouseButtons.Left && e.Clicks == 1)
    {
        GridHitInfo hitInfo = gridView.CalcHitInfo(e.Location);
        if (hitInfo.InRowCell && hitInfo.Column == this.gridColumn)
        {
            MessageBox.Show("Click " + hitInfo.RowHandle);
        }
    }
} 
```

# mockito - PowerMocking 静态不返回预期的对象

> ID：14456377
> 
> 赞同：4
> 
> 时间：2013-01-22T10:27:56.240
> 
> 标签：mockito, powermock

我有一个问题 mocking `Calendar.getInstance()`。正如你现在这个方法返回一个日历 - 我正在模拟的对象。

现在我的代码如下所示：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(Calendar.class)
public class SurveillanceDatabaseTest {
    @Test
    public void testFailingDatabase() throws Exception {
        mockStatic(Calendar.class);
        Calendar calendar = new GregorianCalendar();
        calendar.add(Calendar.HOUR, 1);
        when(Calendar.getInstance()).thenReturn(calendar);
        final Surveillance surveillance = new Surveillance();
        surveillance.checkDatabase();
   }
} 
```

`Calendar.getInstance()``surveillance.checkDatabase()`每次它是一个新对象而不是 Calendar 的预期模拟时，都会被多次调用。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-13T18:01:17.220

看来您需要在 PrepareForTest 标记中添加目标测试类：
**@PrepareForTest({ Calendar.class, Surveillance.class })**

```
@RunWith(PowerMockRunner.class)
@PrepareForTest({ Calendar.class, Surveillance.class })
public class SurveillanceDatabaseTest {
    @Test
    public void testFailingDatabase() throws Exception {
        mockStatic(Calendar.class);
        Calendar calendar = new GregorianCalendar();
        calendar.add(Calendar.HOUR, 1);
        when(Calendar.getInstance()).thenReturn(calendar);
        final Surveillance surveillance = new Surveillance();
        surveillance.checkDatabase();
   }
} 
```

如果我们将 Surveillance 类移动到 MockCalendarTest 类之外的某个地方，即使是上面 Tom Tresansky 的示例也需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:10:59.353

我不太熟悉，`when(object.call()).andReturn(response);`但我假设它的工作方式与`expect.(object.call()).andReturn(response);`. 如果是这种情况，那么您似乎错过了该类的重播，`PowerMock.replay(Calendar.class)`并且您正在尝试进行完整的静态模拟而不是部分静态模拟。这应该可以解决您的问题。

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(Calendar.class)
public class SurveillanceDatabaseTest {
    @Test
    public void testFailingDatabase() throws Exception {

        Calendar calendar = new GregorianCalendar();
        calendar.add(Calendar.HOUR, 1);

        PowerMock.mockStaticPartial(Calendar.class, "getInstance");  //Mock Static Partial
        expect(Calendar.getInstance()).andReturn(calendar);
        PowerMock.replay(Calendar.class);  // note the replay of the Class!

        final Surveillance surveillance = new Surveillance();
        surveillance.checkDatabase();

        //Whatever tests you need to do here
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:53:33.247

看起来你做的一切都是对的。例如，下面的这个测试通过了，证明`Calendar`返回的`Calendar#getInstance()`实际上是你用静态模拟设置的那个。

```
import static org.junit.Assert.*;
import static org.powermock.api.mockito.PowerMockito.*;

import java.util.Calendar;
import java.util.GregorianCalendar;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
@PrepareForTest(Calendar.class)
public class MockCalendarTest {
    @Test
    public void testFailingDatabase() {
        mockStatic(Calendar.class);

        final Calendar testCalendar = new GregorianCalendar();
        testCalendar.add(Calendar.HOUR, 1);
        when(Calendar.getInstance()).thenReturn(testCalendar);

        final Surveillance surveillance = new Surveillance();
        final Calendar resultCalendar = surveillance.checkDatabase();

        assertTrue(testCalendar == resultCalendar);
   }

    public static class Surveillance {
      public Calendar checkDatabase() {
        return Calendar.getInstance();
      }
    }
} 
```

也许发布课程的相关部分，`Surveillance`以便我们可以看到它如何尝试获取新内容`Calendar`并评估它失败的原因。

# android - 为什么 GoogleMap.animateCamera() 在 onGlobalLayout() 之后会崩溃？

> ID：14456382
> 
> 赞同：7
> 
> 时间：2013-01-22T10:28:08.063
> 
> 标签：android, google-maps-android-api-2

我对从新的 Google Maps API 嵌入 SuportMapFragment 的片段有疑问。创建我的片段时，它会`AsyncTask`在方法的开头获取一些数据`onResume`。发生这种情况时，MapFragment 保持在屏幕外，而是显示一个进度条。

完成`AsyncTask`后，我注册`onGlobalLayout`了 mapView 的事件。然后我显示片段，这导致地图视图被显示和布局。`onGlobalLayout`被触发并开始动画。

这工作了很长一段时间，直到我开始优化数据收集中的操作`AsyncTask`以几乎立即完成。现在应用程序在启动时经常会崩溃，在 Release 中比在 Debug 中更常见，这就是为什么我认为我正在处理我不知道的赛车条件。

异常内容如下：

> 地图大小不应为 0。很可能，地图视图的布局尚未发生。

非常感谢任何见解。

供参考：这是似乎导致崩溃的代码：

```
// Hide status UI
this.progressBar.setVisibility(View.INVISIBLE);
this.statusTextView.setVisibility(View.INVISIBLE);

// Update state
this.uraDataDownloadFinished = true;

// Schedule map translation to occur when layout is complete
final View mapView = this.mapFragment.getView();
if (mapView.getViewTreeObserver().isAlive())
{
    mapView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener()
    {
        @SuppressWarnings("deprecation")
        @SuppressLint("NewApi") // We check which build version we are using.
        @Override
        public void onGlobalLayout()
        {
            Log.d(TAG, "onGlobalLayout()");
            if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN)
            {
              mapView.getViewTreeObserver().removeGlobalOnLayoutListener(this);
            }
            else
            {
              mapView.getViewTreeObserver().removeOnGlobalLayoutListener(this);
            }

            // here we crash
            this.map.animateCamera(
                    CameraUpdateFactory.newLatLngBounds(
                            LatLngBounds.builder()
                                .include(topLeft)
                                .include(topRight)
                                .include(bottomLeft)
                                .include(bottomRight)
                                .build(),
                            0),
                    durationMs,
                    null);
        }
   });
}

// Show map (which will eventually trigger onGlobalLayout)
this.getFragmentManager().beginTransaction().show(this.mapFragment).commit();
this.mapFragment.getMap().setOnCameraChangeListener(this); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T13:14:55.870

我不确定，但是当您使用 AsyncTask 时，您可能正在尝试在地图进行布局之前获取地图边界。

你可以看[文档](https://developers.google.com/maps/documentation/android/views#setting_boundaries)，建议`newLatLngBounds(boundary, width, height, padding)`改用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-27T03:37:00.417

试试这个，它对我有用：

```
map.setOnCameraChangeListener(new OnCameraChangeListener() {

    @Override
    public void onCameraChange(CameraPosition arg0) {
        // Move camera.
        map.moveCamera(CameraUpdateFactory.newLatLngBounds(builder.build(), 10));
        // Remove listener to prevent position reset on camera move.
        map.setOnCameraChangeListener(null);
    }
}); 
```

# android - Android - 只有最后一项显示在图层列表中

> ID：14456386
> 
> 赞同：4
> 
> 时间：2013-01-22T10:28:17.017
> 
> 标签：android, android-listview, shape, divider

我正在尝试为`divider`for设置样式`ListView`。我想要的只是两条简单的水平线。

**列表.xml**

```
<ListView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    style="@style/ListView" >
</ListView> 
```

**样式.xml**

```
<style name="ListView" parent="android:style/Widget.ListView">
    <item name="android:divider">@drawable/divider</item>

    <!-- 5dp: just to make sure there's enough space -->
    <item name="android:dividerHeight">5dp</item>
</style> 
```

**分隔符.xml**

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle">
            <solid android:color="#00ffff" />
            <size android:height="1dp" />
        </shape>
    </item>
    <item>
        <shape android:shape="rectangle">
            <solid android:color="#ff0000" />
            <size android:height="1dp" />
        </shape>
    </item>
</layer-list> 
```

`height of 5dp`结果是一条带有（应该是 2，不是吗？）和`color of red`（第二个项目的颜色）的水平线。第一个带有颜色的项目`#00ffff`根本不显示。

有人可以建议**两条简单的水平线的代码吗？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T12:57:06.233

我最好回答我自己的问题...

似乎`styles.xml - style - item`将`last item`in的颜色`layer-list`作为整个分隔线的背景。这`last item`是在**其他层之上**，这就是为什么层列表中的其他项目不显示的原因。

关键是**`padding`**。

**样式.xml**

```
<style name="ListView" parent="android:style/Widget.ListView">
    <item name="android:divider">@drawable/divider</item>
    <item name="android:dividerHeight">10dp</item>
</style> 
```

**分隔符.xml**

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item>
        <shape android:shape="rectangle">
            <solid android:color="#0000ff" />
            <padding android:top="5dp"/>
        </shape>
    </item>

    <item>
        <shape android:shape="rectangle">
            <solid android:color="#ff0000" />
        </shape>
    </item>

</layer-list> 
```

![分隔线](../Images/39dee073d1efee0f313b96cc4521f185.png)

所以在我的情况下，我只需要将 10dp/5dp 更改为 2dp/1dp 即可获得 2 条细水平线。

# php - a href 电话和标准浏览器

> ID：14456387
> 
> 赞同：2
> 
> 时间：2013-01-22T10:28:20.840
> 
> 标签：php, jquery, html, anchor, tel

我有一个项目需要`<a href="tel:123456">`通过电话号码（123456 不是电话号码）但是这将导致除移动浏览器之外的所有问题，因为无法解释该`tel:`位。

当浏览器宽度<1000px时，我尝试使用jQuery添加href attr，但这是一种非常不可靠的方法（平板电脑的分辨率也有限）。

任何关于如何克服这一点的想法将不胜感激。我正在使用 PHP、jQuery 和 JavaScript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:31:57.510

如果它是移动代理，请使用 PHP 检测： [http ://www.000webhost.com/forum/scripts-code-snippets/27404-php-extremely-simple-way-check-if-mobile-browser.html](http://www.000webhost.com/forum/scripts-code-snippets/27404-php-extremely-simple-way-check-if-mobile-browser.html)

```
 <?php
        if(strstr(strtolower($_SERVER['HTTP_USER_AGENT']), 'mobile') || strstr(strtolower($_SERVER['HTTP_USER_AGENT']), 'android')) {
           echo '<a href="tel:123456">';
        }else{
           echo 'You are not in a mobile';
        }
   ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-14T16:36:39.750

由于您使用的是 PHP，我可以推荐[php-mobile-detect](http://code.google.com/p/php-mobile-detect/)类。您可以迎合单个设备/操作系统/浏览器，或者简单地使用`isMobile()`或`isTablet()`作为包罗万象的。

我通常会这样做：

```
include './includes/Mobile_Detect.php';
$detect = new Mobile_Detect;

if ( $detect->isMobile() or $detect->isTablet() ){
    $phone='<a href="tel:+12345678910">1-234-567-8910</a>';
} else {
    $phone='1-234-567-8910';
} 
```

然后我就`<?php echo $phone`;?> 在我需要的任何地方，它都能奏效！并且通过使用 PHP 而不是 javascript 这意味着检测是在服务器端完成的，因此最终用户需要下载的东西更少（如 jQuery 和额外的脚本）。

设备库会经常更新，因此每隔一段时间检查一下[GitHub 页面](https://github.com/serbanghita/Mobile-Detect/tags)是值得的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:30:32.530

您想检测用户是否有移动浏览器？这可能会有所帮助：

[http://jquerybyexample.blogspot.com/2012/03/detect-mobile-browsers-using-jquery.html](http://jquerybyexample.blogspot.com/2012/03/detect-mobile-browsers-using-jquery.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-19T11:57:23.340

试试下面这个：

**语法：调用**

```
<a href="callto://9566603286">9566603286</a>

 <?php
    if(strstr(strtolower($_SERVER['HTTP_USER_AGENT']), 'mobile') || strstr(strtolower($_SERVER['HTTP_USER_AGENT']), 'android')) {
       echo '<a href="callto://9566603286">9566603286</a>';
    }else{
       echo 'You are not in a mobile';
    }
 ?> 
```

# java - 在启动 tomcat 时传递数据库身份验证详细信息

> ID：14456389
> 
> 赞同：-3
> 
> 时间：2013-01-22T10:28:34.273
> 
> 标签：java, tomcat

当我的 Web 应用程序部署到 tomcat 时，我试图动态传递数据库身份验证详细信息。此过程在使用Windows控制台时成功，但在移植到Linux并执行时`startup.sh`，Tomcat启动了部署的Web应用程序，但没有提示输入密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:32:51.370

这不是通常做事的方式。

正确的做法是建立一个命名的 JNDI 连接池。它在启动时具有凭据和 URL；应用服务器启动它。[在此处](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)查看如何操作。

# c# - Selenium，等待元素，页面对象模型，c#绑定

> ID：14456392
> 
> 赞同：3
> 
> 时间：2013-01-22T10:28:41.000
> 
> 标签：c#, selenium, webdriver, automated-tests, selenium-webdriver

我们如何等待 IWebElement 被（重新）附加到 DOM？我的场景是这样的，我从 dropdown1 中选择一个值，然后单击数据绑定发生在 dropdown2 上。因此，当我的测试类似于从 Dd1 中选择“foo”，然后从 Dd2 中选择“bar”时 -> 我会得到一个异常，因为 Dd2 尚未呈现，所以存在竞争条件。现在，我知道，我们有 WebDriverWait 类，我们可以像这样使用直到方法：

```
WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(5));
wait.Until(By.Id("foo")); 
```

但我真的不想将定位符字符串（“foo”）带入我的测试逻辑，因为它似乎违背了使用页面对象模型的意义。使用 Page 对象模型时，我已经有了 IWebElement 实例

```
[FindsBy(How = How.Id, Using = "ctl00_MainContentPlaceHolder_actionButtonBarControl_btnSave")]
    public IWebElement BtnSave { get; set; } 
```

那么，您知道隐式等待 IWebElement 准备好进行通信的任何方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-16T11:50:26.530

嗨，我知道它有点晚了，但我遇到了同样的问题，我通过执行以下操作（使用您的代码）解决了这个问题：

```
WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(5));
wait.Until(By.Id(_pageModel.BtnSave.GetAttribute("id")); 
```

然后它只返回 ID 属性的值，并阻止您使用元素查找来污染您的测试代码。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T13:40:59.433

如果您不想使用`locator values`均值，则可以使用隐式等待而不是使用显式等待。隐式等待也使`driver`实例等待给定的时间段。

`Actual difference to Explicit Wait is that it will tell Web driver to poll the DOM for a certain amount of time when trying to find an element or elements if they are not immediately available.The default setting is 0.`

**代码：**

```
 driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); 
```

要记住的一件事是，一旦设置了隐式等待 - 它将在 WebDriver 对象实例的生命周期内保持不变。

有关更多信息，请使用此链接 [http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html#implicitlyWait(long,java.util.concurrent.TimeUnit)](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html#implicitlyWait(long,java.util.concurrent.TimeUnit))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-31T11:56:45.397

我们所做的是传入一个原始的选择器文本，比如 in `seleniumRC css=a, xpath=b`。

然后我们有一个`findElement`方法来解析请求，获取适当的`By`并搜索元素

# .net - 如何使用 Razor 而不是 HTML 呈现 CSS

> ID：14456410
> 
> 赞同：0
> 
> 时间：2013-01-22T10:29:28.623
> 
> 标签：.net, asp.net-mvc-3, razor

我有一个使用此代码的 CSS

```
input[type="text"] {
    border: 1px solid #CCCCCC;
    border-radius: 5px 5px 5px 5px;
    box-shadow: none;
    padding: 5px 8px;
} 
```

并且 HTML 页面有以下代码来使用 CSS

```
<input id="product-name" type="text" required="required"> 
```

我想在视图中使用 Razor 来呈现名为 product-name 的文本框我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:31:05.467

您可以使用`TextBox`助手：

```
@Html.TextBox("product-name", null, new { required = "required" }) 
```

但我个人建议您使用视图模型：

```
public class MyViewModel
{
    public string ProductName { get; set; }
} 
```

然后让控制器操作填充并将此视图模型传递给视图：

```
public ActionResult Index()
{
    MyViewModel model = new MyViewModel();
    model.ProductName = "some product name";
    return View(model);
} 
```

现在您的视图可以被强输入到视图模型中：

```
@model MyViewModel
@Html.TextBoxFor(x => x.ProductName, new { required = "required" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:34:06.067

您可以只添加帮助器并向其添加类属性以将其连接到 css..

```
@Html.TextBox("name", null, new { id = "product-name", @class = "textbox", required = "required" }); 
```

并且CSS将更改为

```
.textbox {
    border: 1px solid #CCCCCC;
    border-radius: 5px 5px 5px 5px;
    box-shadow: none;
    padding: 5px 8px;
} 
```

# ruby-on-rails - Rails 中的“stringify_keys”是什么以及出现此错误时如何解决

> ID：14456411
> 
> 赞同：9
> 
> 时间：2013-01-22T10:29:32.877
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

在我的应用程序的部分文件中，我有以下用于显示用户导航的代码片段（通过设计）：-

```
<ul class="nav pull-right">
  <% if user_signed_in? %>
      <li>
        <%= current_user.email do %>
        <i class=" icon-user icon-black"></i>
        <% end %>
      </li>
     <li>
       <%= link_to "Your Links", profiles_index_path do %>
       <i class=" icon-user icon-black"></i>
       <% end %>
     </li> 
     <li>
       <%= link_to "Sign out", destroy_user_session_path, :method => 'delete' do %>
       <i class=" icon-user icon-black"></i> 
       <% end %>
    </li>

   <% else %>
     <li>
      <%= link_to "Login", new_user_session_path do %> 
      <i class=" icon-lock"></i>  
      <% end %>
    </li>
    <li>
      <%= link_to "Sign up", new_user_registration_path do %>
      <i class=" icon-home"></i>
      <% end %>
    </li>
  <% end %>
</ul> 
```

但我收到一个错误消息：-

```
undefined method `stringify_keys' for "/users/sign_in":String 
```

现在我的问题是：-

1.  一般而言，什么是**`stringify_keys'**？
2.  如何在我的代码中解决这个问题？？？

谢谢...

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-22T10:44:23.897

1)`stringify_keys`是一种在散列上调用以将其键从符号转换为字符串的方法。它是由 Rails 添加的——它不是标准的 Ruby 方法。[这是在文档中](http://api.rubyonrails.org/classes/Hash.html#method-i-stringify_keys)。

```
{:a => 1, :b => 2}.stringify_keys # => {"a" => 1, "b" => 2} 
```

2）这意味着您的代码正在传递`"/users/sign_in"`一个期望哈希的地方。仔细检查表明您正在混合和匹配以下两种形式`link_to`：

```
# specify link contents as an argument
link_to "The text in the link", "/path/to/link", some: "options"

# specify link contents in a block
link_to "/path/to/link", some: "options" do
  "The text in the link"
end 
```

如您所见，您正在尝试同时执行以下操作：

```
<%= link_to "Sign out", destroy_user_session_path, :method => 'delete' do %>
  <i class=" icon-user icon-black"></i> 
<% end %> 
```

并且 Rails 期望块形式中的第二个参数是选项哈希，因此它正在调用`stringify_keys`它，这会导致您的错误。

将这些链接更改为如下所示：

```
<%= link_to destroy_user_session_path, :method => 'delete' do %>
  <i class=" icon-user icon-black"></i> Sign out 
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:42:02.570

根据文档[stringify_keys](http://apidock.com/rails/Hash/stringify_keys!) 将尝试将所有键转换为字符串。因此，在简单的工作中，该方法需要具有*键值*的东西并将其*键*转换为字符串。

在您的情况下，您的 User 对象很可能是空的或计划字符串。这不起作用尝试发布完整的错误日志

# extjs - 如何创建一个最初隐藏在 ExtJS 中的按钮？

> ID：14456412
> 
> 赞同：4
> 
> 时间：2013-01-22T10:29:35.093
> 
> 标签：extjs, extjs4

我有一个带有一些按钮的工具栏，其中一个按钮需要在创建时不可见，并且在我的应用程序中的某个位置可见。

我目前正在添加需要可见的按钮，但这并不是我想要的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T10:39:33.257

创建按钮时，您可以`hidden: true`在配置中进行设置。

或者，您可以在添加按钮后立即“隐藏（）”按钮，然后稍后再“显示（）”按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:33:01.873

```
find the button and make it invisible

Ext.create('Ext.toolbar.Toolbar', {
        renderTo: document.body,
        width   : 400,
        items: [
            {
                text: 'Button',
                id: 'my-btn',
                hidden: true
            },
            {
                xtype: 'splitbutton',
                text : 'Split Button'
            },
            '->',
            {
                xtype    : 'textfield',
                name     : 'field1',
                emptyText: 'enter search term'
            }
        ]
    }); 
```

# erlang - 返回 true 或 false 查找子字符串

> ID：14456418
> 
> 赞同：0
> 
> 时间：2013-01-22T10:29:44.640
> 
> 标签：erlang

我只是在弄清楚控制流，这一切都非常奇怪和令人困惑，因为我以前从未使用过函数式语言，有人可以为我纠正这个问题：

```
-export([main/1, test/2]).

main([]) -> 
   if 
      test("blue yellow green", "yellow") == true ->
          {io:fwrite("found")};
      true ->
          {io:fwrite("not found")}
   end.

test(Source, Find) ->
    Pos = string:str(Source, Find),
    if
       Pos > 1 ->
            {true};  
       true ->
            {false}
    end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:48:24.533

更正后的版本：

```
-module(test).
-export([main/0, test/2]).

main() ->
    case test("blue yellow green", "yellow") of
        true -> io:fwrite("found~n");
        false -> io:fwrite("not found~n")
    end.

test(Source, Find) ->
    Pos = string:str(Source, Find),
    if
        Pos > 1 ->
            true;
        true ->
            false
    end. 
```

当你只返回一个元素时，你不应该使用`{`and `}`。

# pointers - 查找链表的结尾

> ID：14456422
> 
> 赞同：0
> 
> 时间：2013-01-22T10:29:54.640
> 
> 标签：pointers, linked-list

我正在查看面试问题，我遇到了“您如何确定链表是否有结束？（即列表不是循环）。” 它提供了一个解决方案（一次遍历一个和两个节点，并查看指针是否相等）。

难道我们不能只保留我们开始的指针，看看在遍历它时是否再次击中那个指针吗？或者那行不通？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:33:47.473

那是行不通的：链表可能包含一个不包含第一个指针的循环。

请记住，链表中的一个节点可以被多个其他节点链接！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:02:40.017

```
Couldn't we just keep the pointer that we start at and see if 
while traversing it, we ever hit that pointer again? 
```

不，请参阅下面的案例。您将只遍历循环而不会碰到列表的开始节点

![循环](../Images/c603d69e69fe58c8e1e1a05e1031b490.png)

另一种查找是否存在循环的方法：

如果你把列表倒过来，记住最初的节点，你就会知道如果你回到第一个节点，就会知道有一个循环。虽然有效，但此解决方案更改了列表并且不适合多线程应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:50:00.737

取两个指针，一个应该一次遍历列表一个节点，另一个应该一次遍历列表 2 个节点。如果在任何时候它们相遇（两个指针都指向同一个节点）。这意味着它是一个循环链表并且没有结束。

# c++ - 如何检测何时在 vmime 中发送邮件

> ID：14456423
> 
> 赞同：0
> 
> 时间：2013-01-22T10:29:55.193
> 
> 标签：c++, email, vmime

我使用以下代码从 vmime 发送邮件：

```
vmime::string urlString;

urlString="smtp://outgoing.verizon.net";

vmime::utility::url url(urlString);

vmime::ref <vmime::net::transport> tr =
g_session->getTransport(url,vmime::create <interactiveAuthenticator>());

// You can also set some properties (see example7 to know the properties

// available for each service). For example, for SMTP:
tr->setProperty("options.need-authentication", true);
tr->setProperty("auth.username", userName);
tr->setProperty("auth.password", password);
fromString=userName+"@verizon.net";
vmime::mailbox from(fromString);
vmime::mailboxList to;
toString = toUserName+"@verizon.net";
to.appendMailbox(vmime::create <vmime::mailbox>(toString));
std::ostringstream data;
data<<subjectId;
// Connect to server
tr->connect();
// Send the message
vmime::string msgData = data.str();
vmime::utility::inputStreamStringAdapter vis(msgData);
tr->send(from, to, vis, msgData.length());
logMsg(DEBUG,2,"Thread Id: %ld,Sent the data in the transaction",pthread_self()); 
```

我从日志中看到发送的数据是成功的。但是，当我连接到 [邮件发送到的] 邮箱并检查收件箱时，我看到该收件箱有 0 封邮件。vmime 没有异常或错误。当我连接到邮箱的网络版时。我无法看到任何已发送的交易，即使是成功的邮件也是如此。谁能帮助我如何查看已发送邮箱中发送的邮件？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:54:10.240

使用任何嗅探器来捕获来自主机的 SMTP 流量。如果一切看起来都不错（即 SMTP 会话正确），那么这不是您的主机的问题，而是远程 MTA（确保您的电子邮件未被检测为垃圾邮件等）

# asp.net - 如何将aspxsplitter的滚动条从右向左移动

> ID：14456426
> 
> 赞同：1
> 
> 时间：2013-01-22T10:30:01.400
> 
> 标签：asp.net, devexpress

我想在左页显示 aspxsplliter 的滚动条。我该怎么做？我搜索了很多，但我找不到任何解决这个问题的方法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:07:42.167

看看[这个](http://demos.devexpress.com/ASPxperienceDemos/Splitter/ScrollBars.aspx)演示。看来这就是你所需要的。

# .net - Mediator/EventAggregator 的区别

> ID：14456429
> 
> 赞同：4
> 
> 时间：2013-01-22T10:30:21.387
> 
> 标签：.net, wpf, mvvm, design-patterns, loose-coupling

此外，当我需要在松散耦合的对象（例如`MVVM`ViewModel 的）之间进行通信时，关于最佳编程实践的不同书籍和博客建议使用 Mediator/EventAggregator 模式。我的问题是关于这些模式之间的差异/关系。任何人都可以为我描述它们吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T11:07:26.227

两者大多出于相同的原因使用；减少类之间的耦合。我什至见过两者的实现，它们做的事情完全相同，即作为中间人将信息从一个对象传递到另一个对象，而他们彼此不知道。

但是，（我的解释是）区别在于中介者（应该）如何封装行为，即对象之间的复杂通信，而 EventAggregator/MessageBus 只是使对象能够订阅/发布事件/消息而不知道谁发送或将接收它。

# wpf - 如何使用 XDocument.Load 从 IIS 服务器加载缓存页面

> ID：14456435
> 
> 赞同：0
> 
> 时间：2013-01-22T10:30:37.460
> 
> 标签：wpf, asp.net-mvc, url, caching, linq-to-xml

**我们有一个 WPF 应用程序，它使用XDocument.Load()**函数从我们的 MVC 网站通过 url 请求 RSS 提要 。尽管在 MVC Web 应用程序中我们将 RSS 页面缓存了 15 分钟，但 wpf 应用程序仍然在每次忽略服务器中的缓存时都请求一个新的 rss 页面。我们如何在 WPF 应用程序中使用缓存页面？

这是代码：

```
Path.Combine((Directory.GetParent(App.DisplayFilePath)).Name, "RSS.xml");

XDocument doc;

doc = XDocument.Load(this.FeedUri.AbsoluteUri);
doc.Save(cacheXmlFile);

doc = XDocument.Load(cacheXmlFile);

var feedItems = from feed in doc.Descendants("item"); 
```

这是服务器端 mvc 应用程序中的代码：

```
[OutputCache(Duration = 900, VaryByParam = "*")]
public RssActionResult GetBranches(int gid = -1, string gname = "", int t = -1,
                                   int tgap = 0)
{            
    var feedItems = new List<feedItem>();
    var branches = db.usp_GetBranch(gid, gname, t, tgap).ToList();
    feed.Items = feedItems;
    return new RssActionResult() { Feed = feed };
} 
```

WPF 应用程序通过服务器端的 url 请求此操作。OutputCache 属性是否正常？

# ruby - Rspec 加载时间过长

> ID：14456436
> 
> 赞同：3
> 
> 时间：2013-01-22T10:30:38.440
> 
> 标签：ruby, ruby-on-rails-3, tdd, datamapper, rspec-rails

我将 Rspec 与我的 Rails 3.2.11 应用程序一起使用。我已经安装并设置了 spork。我使用数据映射器作为 ORM。

然而，当 spork 运行时，运行一个测试需要一分钟多的时间。即使正在运行的测试是空的。肯定有什么不对劲。但我无法弄清楚到底是什么。

我的 test_spec 是这样的：

```
require "spec_helper"
require "cancan/matchers"

describe User do
end 
```

我的规范帮助文件可以在这里找到：[https ://gist.github.com/4593609](https://gist.github.com/4593609)

当我计时 rspec 时：

```
➜  books git:(dev) ✗ time rspec --drb spec/models/test_spec.rb
No examples found.

Finished in 1 minute 51.08 seconds
0 examples, 0 failures
rspec --drb spec/models/test_spec.rb  1.49s user 0.04s system 1% cpu 1:52.94 total 
```

叉烧日志：

```
➜  books git:(dev) ✗ spork
Using RSpec
Preloading Rails environment
Loading Spork.prefork block...
Rack::File headers parameter replaces cache_control after Rack 1.5.
Spork is ready and listening on 8989!
Running tests with args ["spec/models/test_spec.rb"]...
Done.

Running tests with args ["spec/models/test_spec.rb"]...
Done. 
```

这是针对空规范的。具有大量示例的规范需要更多时间。它运行需要这么长时间吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:33:16.010

运行测试时查看你的 test.log ，可能每个测试都完成了数据库设置，它占用了时间。

`tail -f log/test.log` 运行测试时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:32:56.763

我找到了解决这个问题的方法。问题出在我的 spec_helper 文件中。

```
 config.before(:suite) {
   DataMapper.auto_upgrade!
 } 
```

由于这些配置，Datamapper 每次运行测试时都会尝试自动升级。在评论此配置时，即使 spork 未运行，规范也开始正常工作。

# php - 使用了错误的 mysql 连接编码 - 需要转换数据

> ID：14456439
> 
> 赞同：0
> 
> 时间：2013-01-22T10:30:48.857
> 
> 标签：php, mysql, encoding, utf-8, connection

我有一个 Mysql 数据库，所有表都整理为“utf8_unicode_ci”。此外，我使用 php 写入数据库的所有数据都以 utf8 编码。但是我忘记将mysql连接编码设置为utf8，所以它可能默认为ISO-8859。

很长一段时间，这都不是问题。尽管特殊字符在 phpMyAdmin 等工具中显示错误，但在将其加载到我的 php 应用程序时数据是正确的，只要我一直使用错误的连接编码。

但是现在我需要从另一个应用程序中使用我的数据库，该应用程序（正确地）不使用 ISO-8859 作为连接编码并且会损坏特殊字符。

现在我想转换我的数据库，以便我可以使用正确的连接编码。

我已经试过了： [mysql错误的连接编码](https://stackoverflow.com/questions/5422099/mysql-wrong-connection-encoding)

但我对我没有帮助。我最接近解决方案的是'ut8_decode(utf8_decode($data))'。但这会破坏以特殊字符开头的字段。

**附加信息：**

那么可能会发生以下情况：

1.  我的应用程序将一些 utf8 数据发送到数据库。

2.  Mysql 获取数据但认为（由于连接编码）它不是 utf8，并将其转换为适合 'utf8_unicode_ci' 排序规则。

3.  当我的 php 应用程序从数据库中读取数据时，mysql 似乎撤消了先前的转换，因此从我的 php 应用程序中一切看起来都很好。

# iphone - 如何设计菜单类View IOS？

> ID：14456447
> 
> 赞同：1
> 
> 时间：2013-01-22T10:30:59.367
> 
> 标签：iphone, ios, cocoa-touch, uiview

我需要设计一个视图，我想在其中创建一个子视图，该子视图应显示为 Android 中的菜单，当我们单击 Android 手机中的菜单按钮时，将弹出一个垂直视图（占据其父视图的一部分），它将获得焦点..我需要在 IOS 中设计相同的东西。我是否需要创建一个视图并添加为子视图，或者除此之外我们还能做什么？请为此建议我一些想法..

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:36:01.153

在您的顶视图上添加一个半透明的 UIView，您可以根据需要在其上放置/设计组件，用户与它下面的任何东西的交互都将不可用，并且您将创建菜单印象，因为用户将能够也可以查看下面的视图，即使它会变灰且不可用，直到您删除/隐藏覆盖视图。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-09-21T20:49:15.007

iOS 13 及更多 iOS 14 中添加了对菜单的支持。请参阅 UIMenu。

# asp.net - 禁用的下拉列表不会在回发时保留选定的值

> ID：14456450
> 
> 赞同：3
> 
> 时间：2013-01-22T10:31:14.450
> 
> 标签：asp.net, postback, html-select, disabled-control

当我触发回发时，我的下拉列表出现了一种奇怪的行为。

如果启用了下拉列表，则回发后所选值保持不变。

但是，如果下拉列表被禁用（当用户勾选复选框时通过 javascript），则所选值将重置为列表中的第一项。

怎么来的 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:51:39.880

您需要手动查找该值（可能将其存储在另一个字段左右），然后在后面的代码中自行设置。这是因为如果一个控件被禁用，该值将不会被发送回服务器。

查看this question，并参考Pavan的第一个答案

[如何在c#中获取已禁用下拉列表的选定值](https://stackoverflow.com/questions/8687598/how-to-get-selected-value-of-disabled-dropdown-in-c-sharp)

> 如果您试图在服务器上读取第二个下拉列表（禁用）的值，您将永远无法读取更新的值，因为禁用控件中的数据不会从客户端回发到服务器

# node.js - 为什么 res.writable 永远不会设置为 false，即使它是 WritableStream？

> ID：14456452
> 
> 赞同：0
> 
> 时间：2013-01-22T10:31:20.513
> 
> 标签：node.js, httpresponse

以下对我来说似乎是非常尴尬的行为：

*   HTTP ServerResponse 继承自 WritableStream
*   因此，当`res.end()`被调用时，`res.writable`布尔值应根据`false`文档设置为：

**可写的**

```
A boolean that is true by default, but turns false after an 'error' occurred or end() / destroy() was called 
```

然而：

```
console.log(res.writable); //true
res.end();
console.log(res.writable); //true 
```

现在，我如何检查响应是否已经发送？是在请求结束时发出的`req end event`，而不是在发送响应时发出的。`res close event`永远不会发出，只有一个事件，但这个`finish`事件没有记录，因此不受支持。

# ios - FMDB: is It good remaininig open database during the whole life cycle of ios app?

> ID：14456457
> 
> 赞同：5
> 
> 时间：2013-01-22T10:31:35.650
> 
> 标签：ios, fmdb

I am confused about database open and close operation for FMDB wrapper class.

Is it creating issue if i open database in applicationDidFinishLoading method of AppDelegate class and do not close until application will terminate ?

Thanks.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T00:26:23.080

There's no reason to close it unless you change the schema. So keep it open.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T09:49:53.577

From the Official FMDB documentation:

**Opening**

Before you can interact with the database, it must be opened. Opening fails if there are insufficient resources or permissions to open and/or create the database.

```
if (![db open]) {
[db release];
return;
} 
```

**Closing**

When you have finished executing queries and updates on the database, ***you should close the FMDatabase connection so that SQLite will relinquish any resources it has acquired during the course of its operation.***

```
[db close]; 
```

So, every time your query the Database, you should have a pair of `open` and `close` calls on your database.

In short, open a DB connection when you require things from database and close it when you are done using the database.

Link to documentation : [https://github.com/ccgus/fmdb](https://github.com/ccgus/fmdb)

# matlab - MATLAB中的抗锯齿线与标记

> ID：14456460
> 
> 赞同：4
> 
> 时间：2013-01-22T10:31:46.153
> 
> 标签：matlab, plot, antialiasing

嗨，我在 MATLAB 中有一张图片

![在此处输入图像描述](../Images/3942b182c975f207c2d49855e793b53b.png)

我希望这条线是平滑的 - 看看从 0.4 到 0.8 的线......这太可怕了。在情节中使用'LineSmoothing'，'on'运算符时，我得到了这个

![在此处输入图像描述](../Images/4ced858d854c2e008ba9c0cb380ff488.png)

我在线条上做得很好，但它也使标记变得平滑，而且它们太可怕了！！

如何让 MATLAB 仅平滑线条而不平滑标记？

这是代码：

```
clear all;
close all;

bpp = [0.8 0.4 0.2 0.1 0.05];
bpp_j = [0.8 0.4 0.2 0.1];
AAE_JPEG = [1.65 2.91 6.20 10.96];
AAE_JPEG_2000 = [1.39 2.29 3.78 6.75 12.52];
AAE_EEDC = [2.08 2.67 3.80 5.94 9.31];
hold on;
plot(bpp_j, AAE_JPEG, 'k','LineWidth',1.5,'MarkerSize',9,'MarkerEdgeColor','k','LineSmoothing','on');
plot(bpp, AAE_JPEG_2000, 'k', 'LineWidth',1.5,'MarkerSize',6,'MarkerEdgeColor','k','LineSmoothing','on');
plot(bpp, AAE_EEDC, 'k', 'LineWidth',1.5,'MarkerSize',6,'MarkerEdgeColor','k','LineSmoothing','on');

plot(bpp_j, AAE_JPEG, 'x','LineWidth',1.5,'MarkerSize',8,'MarkerEdgeColor','k');
plot(bpp, AAE_JPEG_2000, 'o', 'LineWidth',1.5,'MarkerSize',6,'MarkerEdgeColor','k');
plot(bpp, AAE_EEDC, 'v', 'LineWidth',1.5,'MarkerSize',6,'MarkerEdgeColor','k');

LL = plot(rand(1,2),rand(1,2),'k-x','visible','off','LineWidth',1.5,'MarkerSize',8);
LK = plot(rand(1,2),rand(1,2),'k-o','visible','off','LineWidth',1.5,'MarkerSize',6);
LI = plot(rand(1,2),rand(1,2),'k-v','visible','off','LineWidth',1.5,'MarkerSize',6);
legend([LL,LK, LI],'JPEG','JPEG 2000','EEDC')

axis([0 0.9 0 14])
xlabel('bpp');
ylabel('AAE');
grid on; 
```

当我还在这里的时候......我怎样才能在 x 轴上只显示 0.05 0.1 0.2 0.4 和 0.8 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:43:47.080

我只是尝试使用[export_fig](http://www.mathworks.com/matlabcentral/fileexchange/23629)甚至没有`linesmoothing`线条......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T10:46:23.723

我这里没有 MATLAB，所以我无法测试，但如果你绘制没有标记的平滑线，它会起作用吗

```
plot(bpp_j, AAE_JPEG, 'k','LineWidth',1.5,'LineSmoothing','on'); 
```

那么另一个没有线条的标记图？

```
plot(bpp_j, AAE_JPEG, 'x','MarkerSize',8,'MarkerEdgeColor','k'); 
```

至于 x 轴刻度，请参见[matlab x 轴标签集作为向量](https://stackoverflow.com/questions/7248676/matlab-x-axis-label-set-as-a-vector)

# google-chrome - 即使 selenium 执行操作，Chrome 24 UI 也不会改变

> ID：14456461
> 
> 赞同：0
> 
> 时间：2013-01-22T10:31:47.520
> 
> 标签：google-chrome, selenium, selenium-webdriver, selenium-chromedriver

我的测试用例在 selenium+chrome 23 上运行良好。我升级到 chrome 浏览器 24 并尝试运行这些用例。尽管 selenium 会执行这些案例，但有时更改不会反映在 UI 中。我正在使用 chrome 驱动程序 26 和 selenium webdriver 2.29。

# jquery - 多个 jQuery 导致加载其他 jQuery 插件的问题

> ID：14456463
> 
> 赞同：0
> 
> 时间：2013-01-22T10:31:51.667
> 
> 标签：jquery

我的页面有多个 jQuery 插件，添加更多会导致插件中断

这些是正在使用的脚本

```
<script src="scripts/jquery.js"></script>
<script src="scripts/jquery.nav.js"></script>
<script src="scripts/jquery-1.7.2.min.js"></script>
<!--If I remove this ^ script things work but this is required by other plugin-->
<script src="scripts/jquery-ui-1.8.21.custom.min.js"></script>
<script src="scripts/jquery.mousewheel.min.js"></script>
<script src="scripts/jquery.mCustomScrollbar.js"></script>
<script src="scripts/jquery.scrollTo.js"></script> 
```

我也尝试过使用 jQuery`noconflict`但没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:58:05.877

这只是对 jQuery 的重复引用。如果您提到的第一行引用 jquery 1.8.0，那么您不需要 jquery-1.7.2.min.js。

如果您仍然遇到问题，请首先确保您引用的是 jquery 1.8.0（您可以下载最新的或只是热链接到 jquery 托管文件）。如果您仍然有问题，您需要显示一些代码片段以及错误是什么。这可能无关紧要。

# c++ - 构造函数调用层次结构

> ID：14456464
> 
> 赞同：7
> 
> 时间：2013-01-22T10:31:54.477
> 
> 标签：c++, constructor, call, hierarchy

我在调用类型层次结构中的构造函数的规则时遇到了麻烦。这是我所做的：

```
class A{
protected:
    int _i;
public:
    A(){i = 0;}
    A(int i) : _i(i){}
    virtual ~A(){}
    virtual void print(){std::cout<<i<<std::endl;}
};

class B : virtual public A{
protected:
    int _j;
public:
    B() : A(){_j = 0;}
    B(int i, int j) : A(i), _j(j){}
    virtual ~B(){}
    virtual void print(){std::cout<<i<<", "<<j<<std::endl;}
};

class C : virtual public B{
protected:
    int _k;
public:
    C() : B(){_k = 0;}
    C(int i, int j, int k} : B(i,j), _k(k){}
    virtual ~C(){}
    virtual void print(){std::cout<<i<<", "<<j<<", "<<k<<std::endl;}
};

int main(){
    C* myC = new C(1,2,3);
    myC->print();
    delete myC;
    return 0;
} 
```

现在，我想让 new C(1,2,3) 调用 B(1,2) 的构造函数，然后依次调用构造函数 A(1) 来存储 _i=1, _j=2, _k= 3\. 在创建类C的实例myC时，由于某种原因我不明白，然而，第一个被调用的构造函数是A的标准构造函数，即A::A(); 这显然会导致错误的结果，因为受保护的变量 _i 被赋值为 0。构造函数 A(1) 永远不会被调用。为什么会这样？我觉得这很反直觉。是否有某种方法可以避免显式调用类型层次结构中的所有构造函数来实现所需的行为？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T10:41:06.793

你真的需要在`virtual`这里继承吗？您遇到了一个问题，因为将首先调用第一个虚拟基础 ctor，但是您在继承`C`自时没有指定任何内容`B`（后者已经`A`虚拟继承，因此调用了默认值）。

一种解决方案是删除虚拟继承……正如 Arne Mertz 的回答中提到的那样。另一个（如果你真的想要虚拟继承）是`A`从`C`ctor显式调用：

```
C(int i, int j, int k} : A(i), B(i,j), _k(k){} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T10:36:35.253

这是因为您使用了虚拟继承，这仅在存在多重继承时才有意义。只要正常继承，一切都会如你所愿。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-22T10:42:08.330

当您使用虚拟继承时，最派生类必须直接调用其所有虚拟基的构造函数。在这种情况下， for 的构造函数`C`必须调用`B`and的构造函数`A`。由于您只调用`B`构造函数，因此它使用默认`A`构造函数。`B`构造函数调用另一个构造函数并不重要`A`：因为它是一个虚拟基类，所以这个调用被忽略了。

你有两种方法可以解决这个问题：显式调用`A(int)`构造函数：

```
C(int i, int j, int k} : A (i), B(i,j), _k(k){} 
```

或使用普通继承而不是虚拟继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-23T15:14:30.937

为什么要声明虚拟继承？如果您从 B 类中删除 virtual 关键字：virtual public A { ... 那么您的代码将正常工作。通过声明虚拟 A，C 将直接调用 A()。如果你删除 virtual，那么 C 将不会调用 A()。

# asp.net - 将数据绑定标签值更改为gridview中的另一个文本

> ID：14456467
> 
> 赞同：0
> 
> 时间：2013-01-22T10:31:59.233
> 
> 标签：asp.net, gridview

我有一个显示用户进行的帐户交易的asp gridview。与交易一样，会有借记和贷记。

现在，我的 gridview 显示

```
Debit    Credit

$0          $100

$100      $0 
```

反之亦然。

我的问题是，无论如何将 0 转换为 '-' 以便显示

```
Debit    Credit

--          $100

$100      - 
```

反而？？

我的 gridview 是使用 SQLDataSource 控件绑定的。金额为十进制类型。

或者任何人都可以建议这种场景的正确搜索词是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:36:18.353

Gridview 行数据绑定事件可用于实现此目的。有关详细信息，请参阅链接[GridView.RowDataBound 事件。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

你可以像这样编码

```
 protected void Gridview1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            if (e.Row.Cells[0].Text == "$0")
                e.Row.Cells[0].Text = "-";
            if (e.Row.Cells[1].Text == "$0")
                e.Row.Cells[1].Text = "-";
        }

    } 
```

或者，如果要格式化更多列，您可以在 RowDataBound 事件中使用 for 循环。喜欢

```
 for (int i = 0; i < e.Row.Cells.Count; i++)
 {
      if (e.Row.Cells[i].Text == "$0")
         e.Row.Cells[i].Text = "-";
 } 
```

# php - 匹配 utf 中的整个单词

> ID：14456470
> 
> 赞同：3
> 
> 时间：2013-01-22T10:32:07.820
> 
> 标签：php, regex

我想用 替换所有出现`a`的`5`。这是运行良好的代码：

```
$content=preg_replace("/\ba\b/","5", $content); 
```

除非我有诸如非标准字符之间的`zapłać`位置之类的单词，或者单词末尾有一个 Unicode（或非 ASCII）字母。有什么简单的方法可以解决吗？`a``zmarła``a`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:42:35.173

问题是预定义的字符类是基于 ASCII 的，并且在使用修饰符`\w`时不会改变。`u`（见[regular-expressions.info](http://www.regular-expressions.info/refflavors.html)，列中 preg 是 PCRE）

您可以使用[lookbehind和lookahead](http://www.regular-expressions.info/lookaround.html)来做到这一点：

```
$content=preg_replace("/(?<!\p{L})a(?!\p{L})/","5",$content); 
```

如果前面没有字母且前面没有字母，这将替换“a”。

`\p{L}`:[任何语言的任何类型的信件](http://www.regular-expressions.info/unicode.html#prop)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:36:14.507

```
$content=preg_replace("/\ba\b/u","5",$content); 
```

# ruby - Mountain Lion 中 Ruby 的系统通知绑定

> ID：14456473
> 
> 赞同：3
> 
> 时间：2013-01-22T10:32:23.870
> 
> 标签：ruby, osx-mountain-lion, growl

我不想使用来自 Ruby 的咆哮通知。我想利用山狮的本机系统通知。

我们有什么宝石可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:39:17.317

您当然可以使用[终端通知](https://github.com/julienXX/terminal-notifier/tree/master/Ruby#usage)程序，它只是包装[终端通知程序命令行工具](https://github.com/julienXX/terminal-notifier)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:08:03.877

我期待着像[rspec-nc这样的东西](https://github.com/twe4ked/rspec-nc "rspec-nc")

# php - 使用 Codeigniter 的 Mongodb 文档更新错误：Mod on _id not allowed

> ID：14456476
> 
> 赞同：0
> 
> 时间：2013-01-22T10:32:32.353
> 
> 标签：php, codeigniter, mongodb, codeigniter-2, mongodb-php

我正在尝试将 Codeigniter 与[codeigniter-mongodb-library/tree/v2](https://github.com/alexbilbie/codeigniter-mongodb-library)一起使用，以便与 mongo 连接并使用以下结构更新文档：

```
{
"_id" : ObjectId("50fd8bd460e958aa38000002"),
"created_at" : 1358793684,
"updated_at" : 1358793684,
"is_active" : 0,
"memberships" : [
    {
    }
],
"first_models" : [
    [ ]
],
"second_models" : [
    [ ]
],
"pages" : [
    [ ]
]
} 
```

我想要的只是通过给定_id来更新一些文档。特别是**我需要在“first_models”数组中添加元素**。从我的 Codeigniter 模型中，我称之为：

```
$result = $this->mongo_db
->push(array('_id' => '50fd8bd460e958aa38000002'),array('first_models' => array('Some text here'))) 
->update($this->collections['sites']); 
```

当我尝试更新一个特定文档时出现此错误：

```
Mod on _id not allowed 
```

似乎与给定的 _id 存在一些冲突......我遗漏了一些东西，我不知道是什么:(我正在使用 Mongodb 2.2.2 和 Codeigniter 2.1.3、PHP5.4 和 Apache2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:08:01.193

我走错了方向。最后[@Rajan](https://github.com/alexbilbie/codeigniter-mongodb-library/issues/96#issuecomment-12594615)指出我正确的解决方案：

```
$updated = $this->mongo_db->where('_id', new MongoId($id))
->set($data)
->update('mycollection'); 
```

您可以看到，使用`set`instead ，并使用:-)`push`引用对象 id`new MongoId($id)`

# ajax - 在 URL 中传递包含 # 的参数以使用 AJAX 调用 Web 服务

> ID：14456477
> 
> 赞同：0
> 
> 时间：2013-01-22T10:32:32.543
> 
> 标签：ajax

我正在调用我的网络服务之一，我**在**其中发送一些参数，如密钥、ID、主题行等

```
example:
 http://asv.msdasmafetrix.net/public/mobile.ashx?method=getparsedtemplate_contactinfo&emailbody='" + emailbody + "'&subjectline='" + subjectline + "'&contactemailid=" + contactemailid + "&id=" + jasondata.id + "&key=" + jasondata.key 
```

但是，在主题和电子邮件正文等`#`参数中存在变量，因为它破坏了我的代码。并给了我未定义的值。我什至尝试过 encodeURI。但没有成功。

我的代码是：

```
var uri="http://asv.msdasmafetrix.net/public/mobile.ashx?method=getparsedtemplate_contactinfo&emailbody='" + emailbody + "'&subjectline='" + subjectline + "'&contactemailid=" + contactemailid + "&id=" + jasondata.id + "&key=" + jasondata.key";
$.ajax({
        type: "GET",
        url: encodeURI(uri),
        success: function(msg) {
            jasondata = eval('(' + msg + ')');
            var subjectline = jasondata.subjectline;
            alert(subjectline);
            }
    }); 
```

任何帮助...！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:38:11.647

尝试使用`encodeURIComponent(uri)`

[encodeURIComponent 的文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

# windows - 如何国际化一个delphi应用程序

> ID：14456480
> 
> 赞同：3
> 
> 时间：2013-01-22T10:32:39.177
> 
> 标签：windows, delphi, winapi, delphi-xe2, lang

> **可能重复：**
> [翻译应用程序](https://stackoverflow.com/questions/12311926/translate-application)

国际化我用 delphi xe2 编写的应用程序的最佳方法是什么？

我已经看过`stringtable`资源，但我很担心，因为我觉得实施可能既费时又费力。

还有其他同样有效的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:41:07.063

也许不是最好的翻译工具，但我使用[GNU Gettext](http://dxgettext.po.dk/)已经很多年了。这个过程非常简单：

*   你运行 dxgettext 来提取字符串
*   您翻译或提供翻译文件
*   我个人喜欢[poEdit](http://www.poedit.net/)工具来翻译和管理翻译库
*   可选：您将翻译文件合并到最终的 EXE 中
*   或者您将翻译文件放在子目录中，就是这样！

[http://dxgettext.po.dk/](http://dxgettext.po.dk/)

**更新：**

1/ GNU Gettext 包含在 JCL/JVCL 库中，您只需在启动时激活此选项。

2/ Gnu Gettext可以翻译库中的所有内容，如VCL、JCL/JVCL！它不仅限于您的代码！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:02:29.467

一种选择是使用 Delphi 中的集成翻译环境：

[http://docwiki.embarcadero.com/RADStudio/XE3/en/Localizing_Applications_by_Using_Translation_Manager_Overview](http://docwiki.embarcadero.com/RADStudio/XE3/en/Localizing_Applications_by_Using_Translation_Manager_Overview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T11:36:41.833

在这里你可以找到关于这个主题的两篇文章：

*   [使用 GNU gettext 的多语言应用程序](http://neftali.clubdelphi.com/?p=688)
*   [使用标准方法 (IDE) 的多语言应用程序](http://neftali.clubdelphi.com/?p=2752)

您可以找到其他方法和商业组件（我使用过[TsiLang 组件](http://www.sicomponents.com/tsilang1.html)-优秀库-）

问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T13:02:29.833

有一个名为 sisulizer 的产品，我认为它在您构建了可执行文件后才能工作。没有尝试过，但我已经阅读了很多关于它的内容。

[看看这个](http://www.sisulizer.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T11:52:45.553

我不知道这是国际化应用程序的最佳方式，但对我来说它有效。这是一种*自制*的。

我创建了一个 xml 文件，它是包含翻译的字典，但您可以使用任何其他格式，从 json 到 xls（也许这是最好的）。然后实现了一个从这个文件中读取翻译的类，以及一种在语言更改运行时注册程序的方法，我认为这是一个很好的特性。

```
TDictionary = class
private
  fOnChanged: TSignal;
  fLanguage: String;
  procedure setLanguage( const Value: String );
public
  procedure loadFromFile( filename: string );
  function getTranslation( id: string; lang: string = '' ): string;

  property language: String read fLanguage write setLanguage;
  property onChanged: TSignal read fonChanged;
end;

...

function TDictionary.getTranslation( id: string; lang: string = '' ): string;
begin  
  if lang = '' then 
    lang := Language; // use the default lang.
  // read the translation from the file.
end;

procedure TDictionary.setLanguage( const Value: String );
begin     
  fLanguage := Value;
  onChanged.Execute;
end; 
```

TSignal是一个注册方法的类，如果你调用`Execute`执行所有注册的方法，也许在xe2中你有为此内置的东西，在delphi7中我必须自己创建这个类，但实现起来很有趣。

在表单的 createForm 中：

```
procedure TMyClass.doTranslate( dictionary: TObject );
begin
  with dictionary as TDictionary do
  begin
    caption := dictionary.getTranslation( 'myclass.caption' );
    button.caption := dictionary.getTranslation( 'some id' );
  end;
  // or you can go through Controls array, and automate the assignment.
end;

procedure TMyClass.FormCreate(Sender: TObject);
begin
  Dictionary.onChanged.register( doTranslate );
  doTranslate( dictionary );
end;

procedure TMyClass.FormDestroy(Sender: TObject);
begin
  Dictionary.onChanged.deregister( doTranslate ); 
end; 
```

如您所见，这**不是**一个可以复制和粘贴的工作示例，我只是想向您展示背后的想法。如果有不清楚的地方，请发表评论，我可以扩展我的答案。

一些注意事项：

*   我认为以 utf8 格式进行翻译很重要。
*   使用 xls 使本地化人员更容易生活，如果他们破坏了您的 xml 文件，您也会更轻松（如果翻译人员不是教授，您可能会以 microsoft word 格式取回您的 xml 文件）
*   您可以将字典文件放入资源中，然后从那里加载。

优点

*   这样您就可以更改语言运行时
*   如果你需要另一种语言，你只需要编辑字典文件。

缺点

*   如果您有许多表单，连接所有标签、按钮等将是一场噩梦，但您可以通过智能方式将其自动化。
*   如果更改您的应用程序语言不那么频繁，它会稍微减慢您的应用程序，但不会太多。

# php - 忽略空值在数组中爆炸和存储值

> ID：14456485
> 
> 赞同：1
> 
> 时间：2013-01-22T10:32:48.613
> 
> 标签：php, arrays, foreach

我有这个示例记录要解析：

```
@2013-01-19 02:45:00,1.32927,1.33029,1.32909,1.33018,464
@2013-01-19 03:00:00,1.33019,1.33142,1.33019,1.33081,637
@2013-01-19 03:15:00,1.33083,1.33129,1.33069,1.33095,425
@2013-01-19 03:30:00,1.33092,1.3317,1.33045,1.33144,500
@2013-01-19 03:45:00,1.33146,1.33211,1.33095,1.33196,480
@2013-01-19 04:00:00,1.33197,1.33291,1.33166,1.33264,593
@2013-01-19 04:15:00,1.33267,1.33308,1.33234,1.33238,366
@2013-01-19 04:30:00,1.33239,1.33278,1.33236,1.33263,335 
```

使用此 php 代码，我试图将每一行存储在具有五个索引的数组中（行被逗号分解）：

```
foreach($lines as $line){
    $data = explode('@', $line);
    foreach($data as $record){
        $val = explode(',',$record);
        echo '<pre>';
        print_r($val);
        echo '</pre>';
    }
} 
```

其中**$lines**包含记录..

但问题是，它显示：

```
 Array
(
    [0] => 

)
Array
(
    [0] =>  

)
Array
(
    [0] =>     

)
Array
(
    [0] => 

)
Array
(
    [0] => 

)
Array
(
    [0] => 
)
Array
(
    [0] => 2013-01-19 03:00:00
    [1] => 1.33019
    [2] => 1.33142
    [3] => 1.33019
    [4] => 1.33081
    [5] => 637

)
Array
(
    [0] => 2013-01-19 03:15:00
    [1] => 1.33083
    [2] => 1.33129
    [3] => 1.33069
    [4] => 1.33095
    [5] => 425

)

...... 
```

我不知道零（空数组）来自哪里。

代码有问题吗？谢谢您的帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:36:30.350

删除第一个`@`而不是爆炸它：

```
foreach($lines as $line){
    // remove the first character
    $record = substr($line,1);
    $val = explode(',',$record);
    echo '<pre>';
    print_r($val);
    echo '</pre>';

} 
```

爆炸会在您的数组`@`中产生一个空值-[请参见此处](http://codepad.org/L3YdeCgT)`$data`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:38:36.353

删除 $data = explode('@', $line); 如果不需要或改变它你的需要

```
$lines[] = '2013-01-19 02:45:00,1.32927,1.33029,1.32909,1.33018,464';
    foreach($lines as $line){
        $data = explode('@', $line);
        foreach($data as $record){
            $val = explode(',',$record);
            echo '<pre>';
            print_r($val);
            echo '</pre>';
        }
    } 
```

# android - 谷歌如何检查刷新令牌 - 他们的 OAuth 2.0 的客户端绑定？

> ID：14456487
> 
> 赞同：0
> 
> 时间：2013-01-22T10:32:56.737
> 
> 标签：android, ios, oauth-2.0, google-oauth

OAuth 2.0 协议说

“只要可以对客户端身份进行身份验证，授权服务器必须验证刷新令牌和客户端身份之间的绑定。”

[https://www.rfc-editor.org/rfc/rfc6749#section-10.4](https://www.rfc-editor.org/rfc/rfc6749#section-10.4)

我对他们如何检查 Android 和 IOS 应用程序的“刷新令牌 - 客户端绑定”感兴趣？他们怎么知道请求来自生成刷新令牌的应用程序，而不是其他应用程序（当出现刷新令牌以获取新的访问令牌时）？

您认为检查“刷新令牌-客户端”绑定的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T21:50:13.493

客户端在交换刷新令牌时必须在请求中包含 client_id 和 client_secret（请参阅[docs](https://developers.google.com/accounts/docs/OAuth2InstalledApp#refresh)）。这将对客户端进行身份验证，并允许服务器在发出访问令牌之前验证刷新令牌确实绑定到发出请求的客户端。

# oracle-adf - 内联框架再次重新加载内容

> ID：14456488
> 
> 赞同：1
> 
> 时间：2013-01-22T10:32:57.343
> 
> 标签：oracle-adf

我正在使用 jdev 11.1.2.2.0 。我有一页包含

```
<af:panelTabbed id="pt1">
<af:showDetailItem text="showDetailItem 1" id="sdi1" >
<af:inlineFrame id="if1" source="external application link"/>
</af:showDetailItem>
<af:showDetailItem text="showDetailItem 2" id="sdi2">
<af:outputText value="Welcome" id="ot1"/>
</af:showDetailItem>
</af:panelTabbed> 
```

外部应用程序有登录页面（page1）。一旦我登录应用程序，它就会重定向到其他页面（page2），如果我转到第二个选项卡（showDetailItem 2）并再次返回上一个选项卡（showDetailItem 1）它正在加载第一页（page1）以再次登录，但我的要求是它应该在同一页（page2）中。有人可以帮我吗？

# android - 如何使从 google places api 获得的地址可点击？

> ID：14456490
> 
> 赞同：0
> 
> 时间：2013-01-22T10:33:00.950
> 
> 标签：android, google-maps, onclick, google-places-api

> **可能重复：**
> [如何将文本视图连接到网站？](https://stackoverflow.com/questions/14473242/how-to-connect-the-text-view-to-a-website)

嗨，我开发了一个应用程序，它使用 google places api 来显示用户位置附近的百货商店列表。

现在我想制作我可以点击的地址列表，即；当用户单击百货商店的名称时，我希望 android 应用程序转到另一个活动，该活动访问百货商店网站以获取该特定商店的推荐或折扣产品。

我在网上搜索但没有找到任何教程来做到这一点。

# sql - 如何使用偶数字段在我的数据库中的所有表上运行 IN 而不是触发器？

> ID：14456491
> 
> 赞同：1
> 
> 时间：2013-01-22T10:33:02.133
> 
> 标签：sql, triggers, insert

我只想使用触发器而不是插入和更新来在我的所有表上运行？怎么做？请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:20:32.763

听起来有必要为数据库中的每个表创建触发器。您可以在表循环上动态创建 SQL 语句，然后运行该命令。

简单示例（以文本格式输出结果）

```
DECLARE @triggerName nvarchar(50) = 'triggerName'
SELECT 'IF OBJECT_ID(''' + QUOTENAME(SCHEMA_NAME(schema_id)) + '.' + QUOTENAME(@triggerName) + ''')' + 
       ' IS NOT NULL DROP TRIGGER ' + QUOTENAME(SCHEMA_NAME(schema_id)) + '.' + 
       QUOTENAME(@triggerName) + CHAR(13) + CHAR(10) +
       'GO' + CHAR(13) + CHAR(10) +
       'CREATE TRIGGER ' + QUOTENAME(SCHEMA_NAME(schema_id)) + '.' +
       QUOTENAME(@triggerName) + ' ON ' + QUOTENAME(SCHEMA_NAME(schema_id)) + '.' + 
       QUOTENAME(OBJECT_NAME(object_id)) + CHAR(13) + CHAR(10) +
       'INSTEAD OF INSERT, UPDATE' + CHAR(13) + CHAR(10) +
       'AS' + CHAR(13) + CHAR(10) +
       'BEGIN' + CHAR(13) + CHAR(10) +
       '  SELECT ''your_logic''' + CHAR(13) + CHAR(10) +      
       'END' + CHAR(13) + CHAR(10) +
       'GO' + CHAR(13) + CHAR(10) +
       '' + CHAR(13) + CHAR(10)      
FROM sys.tables 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:25:59.940

在 SQL Server 中，您可以在 DML 操作（每个表）以及整个数据库（DDL 触发器）上使用触发器。我想其他系统的语法或多或少是相同的。

第一个的语法是：

```
CREATE TRIGGER name ON table
   [FOR/AFTER/INSTEAD OF]
   [INSERT, UPDATE, DELETE]
AS
BEGIN
--SQL statements
...
END 
```

DDL 触发器的使用不多，主要用于审计，但有更好的方法来进行审计。无论如何，请通过一些示例查看[这篇文章。](http://www.mssqltips.com/sqlservertip/2085/sql-server-ddl-triggers-to-track-all-database-changes/)

# python - 在运行时从 Python 3 切换到 2

> ID：14456492
> 
> 赞同：0
> 
> 时间：2013-01-22T10:33:07.800
> 
> 标签：python, python-3.x, python-2.7, os.execl

我尝试检查当前版本是否为 3，如果是，则切换到 python2：

```
#!/usr/bin/python

import sys, os

if sys.version_info[0] != 2:
    os.execl("/usr/bin/", "python2", *sys.argv)

print(sys.version_info[:]) 
```

但是这个脚本返回这个错误：

```
Traceback (most recent call last):
  File "./a.py", line 6, in <module>
    os.execl("/usr/bin/", "python2", *sys.argv)
  File "/usr/lib/python3.3/os.py", line 531, in execl
    execv(file, args)
PermissionError: [Errno 13] Permission denied 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:46:55.217

> > os.execl("/usr/bin/", "python2", *sys.argv)

/usr/bin/ 是一个目录，你不能运行它。尝试：

> > os.execl("/usr/bin/python2", "/usr/bin/python2", *sys.argv[1:])

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:45:16.063

我会争辩说你正在尝试的是一个坏主意 - 这是令人惊讶的行为并且不需要，相反，只需使用显式的 hashbang：

```
#!/usr/bin/python2 
```

或者，最好：

```
#!/usr/bin/env python2 
```

根据[PEP 394](http://www.python.org/dev/peps/pep-0394/)，任何 unix 系统都应提供`python2`.

# arrays - Powershell：删除小于限制的数组元素

> ID：14456495
> 
> 赞同：1
> 
> 时间：2013-01-22T10:33:18.413
> 
> 标签：arrays, powershell

我在powershell中有一个排序的数字数组。

我需要一个 powershell 命令来删除该数组中小于特定值的所有元素。

例如：`if array is [270 271 272 274]` `Value = 273`

结果数组应该是`[274]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:39:16.677

```
$arr = 270,271,272,274
$value = 273

$arr = $arr -gt $value
$arr

274 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:39:56.033

```
PS>@(10,20,30,40) | where {$_ -gt 30}
40 
```

# esb - 如何拆分网址？

> ID：14456498
> 
> 赞同：0
> 
> 时间：2013-01-22T10:33:35.537
> 
> 标签：esb, mule

我使用骡工作室。

例如，当我运行**localhost:8080/?first=value1&second=value2**时，我想获取两个变量及其值：

第一个：值1 第二个：值2

我使用*拆分器*删除第一个'/'，如下所示：

```
[regex('/(.*?)', message.payload)] 
```

但现在我得到：

```
?first=value1&second=value2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:26:55.490

您可以使用 message.inboundProperties['parameter'] 提取参数。

例如：

```
 <logger level="WARN" message="#[message.inboundProperties['first']]" />
    <logger level="WARN" message="#[message.inboundProperties['second']]" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:32:41.623

您可以通过三种方式提取参数：

*   直接来自消息的入站属性
*   作为地图，通过访问键入的入站属性`http.query.params`
*   使用 http:body-to-parameter-map-transformer 并将地图方便地放置在有效负载上。

考虑运行以下流程：

```
<flow name="mule-configFlow1" doc:name="mule-configFlow1">
    <http:inbound-endpoint address="http://localhost:8082/app" />
    <http:body-to-parameter-map-transformer />
    <logger level="ERROR" />
    <logger level="ERROR" message="Payload is: #[payload]" />
    <json:object-to-json-transformer />
</flow> 
```

# django - 如何从 Django 中的查询集中获取特定属性？

> ID：14456503
> 
> 赞同：66
> 
> 时间：2013-01-22T10:33:50.593
> 
> 标签：django

我有一个这样的查询：

```
file_s = Share.objects.filter(shared_user_id=log_id) 
```

现在，我想从 Django 视图中的 file_s 获取 files_id 属性。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-01-22T10:35:39.563

用于[`values()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#values)获取特定属性，该属性将返回您的字典列表，例如

```
file_s = Share.objects.filter(shared_user_id=log_id).values('files_id') 
```

编辑：如果您只想要一个属性，那么您可以使用`flat=True`建议只返回值列表。但是，请确保列表的顺序。

```
file_s = Share.objects.filter(shared_user_id=log_id).values_list('files_id', flat=True).order_by('id') 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-22T10:47:17.883

您的`Share.objects.filter()`调用返回一个 Djagno [QuerySet](https://docs.djangoproject.com/en/dev/ref/models/querysets/)对象，该对象不是单个记录，而是来自数据库的过滤对象的可迭代，每个项目都是一个`Share`实例。您的`filter`电话可能会返回不止一项。

您可以迭代`QuerySet`使用循环，例如：

```
for share in files_s:
    print share.files_id 
```

如果您知道您的查询只需要返回一个项目，您可以这样做：

```
share = Share.objects.get(shared_user_id=log_id) 
```

这将返回一个`Share`实例，您可以从中访问该`files_id`属性。如果查询返回的结果不是 1，则会引发异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-06-02T03:46:28.313

如果您只想从单个值 QuerySet 中获取值，您可以执行以下操作：

```
file_s = Share.objects.filter(shared_user_id=log_id).values_list('files_id', flat=True).first() 
```

# c# - SqlCeExpression 被捕获，解析查询时出错

> ID：14456505
> 
> 赞同：1
> 
> 时间：2013-01-22T10:33:55.787
> 
> 标签：c#, .net, sql-server-ce

我试图将数据插入我的紧凑型数据库，我收到了这个错误：

```
There was an error parsing the query. [ Token line number = 1,Token line offset = 1,Token in error = USE ] 
```

这是我的代码，主要是在网上找到的：

```
 SqlCeConnection conn = new SqlCeConnection(@"Data Source=|DataDirectory|\CompactDatabase.sdf");
                conn.Open();

                SqlCeCommand cmd = conn.CreateCommand();
                cmd.CommandText = "USE Movie INSERT INTO Movie(title, ean) VALUES(?,?)";
                cmd.Parameters.AddWithValue("@title", title);
                cmd.Parameters.AddWithValue("@ean", ean);
                cmd.Prepare();                
                cmd.ExecuteNonQuery(); 
```

有人找出问题所在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:40:07.160

> 有人找出问题所在吗？

只需 throw away`USE`子句并改为执行此查询：

```
INSERT INTO Movie(title, ean) VALUES(?,?) 
```

`USE`是 T-SQL 中数据库之间的上下文切换子句，此处不适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:44:36.170

您的命令文本关于参数化方面是错误的。尝试使用`@title`和`@ean`不使用`?,?`。像这样;

```
cmd.CommandText = "INSERT INTO Movie(title, ean) VALUES(@title, @ean)"; 
```

也删除`USE Movie`部分。

看看[`C# SqlParameter`](http://www.dotnetperls.com/sqlparameter)哪篇文章很棒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:52:59.257

尝试：

```
USE Movie; INSERT INTO Movie(title, ean) VALUES(?,?) 
```

注意`;`IIRC，这与 SQL 中的相同`GO`。

# javascript - 更新基本 jQuery 脚本以使用 ScrollTo 函数

> ID：14456506
> 
> 赞同：0
> 
> 时间：2013-01-22T10:33:57.320
> 
> 标签：javascript, jquery, html, accordion, scrollto

我在这里有一个 jQuery SlideDown/SlideUp 演示：[https ://tinker.io/8e585/15](https://tinker.io/8e585/15)

是否有可能当我单击“测试 2”链接时，**视口会向下移动到页面的该部分**？那么“测试 2”会出现在窗口顶部吗？

我曾尝试过：`$(window).scrollTop($('div#box2').offset().top)`但在 FF 中遇到了问题。

对此有简单解决方案的任何想法吗？

非常感谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:36:41.997

试试这个：

```
$("#box2 h2").click(function () {
    var $this = $(this);
    $('html, body').animate({
         scrollTop: $this.offset().top
    }, 1000);

    return false;

}); 
```

工作演示：[https ://tinker.io/8e585/16](https://tinker.io/8e585/16)

# dbpedia - 如何获得编辑本体的权限？

> ID：14456507
> 
> 赞同：1
> 
> 时间：2013-01-22T10:34:01.060
> 
> 标签：dbpedia

我正在尝试将一些信息框从维基百科映射到 DBpedia 本体。

根据[http://mappings.dbpedia.org/index.php/How_to_edit_the_DBpedia_Ontology](http://mappings.dbpedia.org/index.php/How_to_edit_the_DBpedia_Ontology)

但我无权编辑本体，也无权编辑 wiki 页面，尽管我创建了一个帐户。

如何获得权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:45:00.177

您需要编辑权限，在您的用户帐户旁边。

开始映射的过程在 Mappings wiki的[主页上：](http://mappings.dbpedia.org/index.php/Main_Page)

> **先决条件**
> 
> 如果您想编辑映射或本体架构，这就是您所需要的：
> 
> *   此 wiki 上的用户帐户（登录/注册）
> *   编辑权限
>     *   他们会在几天内给你
>     *   如果没有，请通过 dbpedia-discussion@lists.sourceforge.net 请求编辑权限。在消息中包含您的用户名。
>     *   一旦您获得编辑权限，请在您的用户 wiki 页面上提供一些关于您自己的信息
> *   您要为其编写映射的语言的命名空间
>     *   如果命名空间不存在（见左侧栏），请通过 dbpedia-discussion@lists.sourceforge.net 请求它

（编辑：添加核心点来回答。）

# spring - @Around 建议在春季方面不起作用

> ID：14456508
> 
> 赞同：0
> 
> 时间：2013-01-22T10:34:05.523
> 
> 标签：spring, aspectj

我是 aop 编程的新手，我对 @Around 建议有一个大问题。我有一个 Maven 项目 - aspectjrt 和 aspectjweaver 1.7.1 - spring 3.2.0

根据官方指南（http://static.springsource.org/srin.../html/aop.html），我已插入我的 applicationContext 和示例方面

如果我用指定的@Pointcut 尝试@AfterReturning @Before @AfterTrowing 一切正常，但如果我使用@Around 建议不起作用。

这是切入点，它围绕着建议

```
@Pointcut("execution(*PersonDbService.findPersonDiplomatici(..))")
private void dbFindOperationNoArgs() {}

@Around("dbFindOperationNoArgs()")
    public Object aroundAdv(ProceedingJoinPoint joinPoint) throws Throwable {
              // start stopwatch
          Object retVal = joinPoint.proceed();
          // stop stopwatch
          return retVal;
    } 
```

这对我来说很奇怪，因为所有其他建议注释都有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:43:58.827

尝试“调用”而不是“执行”

# node.js - 从nodejs mongodb中的模块返回/获取对象

> ID：14456510
> 
> 赞同：0
> 
> 时间：2013-01-22T10:34:08.627
> 
> 标签：node.js, model-view-controller, mongodb, module, express

我正在开发一个 nodejs 应用程序。
文件夹结构是

```
app
app.js
package.json
../model/schema.js
../controller/controller.js
../views 
```

所有逻辑都在 controller.js 中，而 app.js 自己执行路由......
我想知道如何从 controller.js 获取/返回数据（对象）到 app.js。
我正在使用'return'将mongodb文档从控制器发送到应用程序，但它未定义。

继承app.js的代码..我已经删除了不必要的代码

```
 var express = require('express'),
   app = express.createServer(express.logger()),
   io = require('socket.io').listen(app),
   routes = require('./routes');
   var controller=require('./controller/controller');
   var model=require('./model/schema');

   app.get("/", function(req, res) {
     res.render("chatroom.html");
    });

   io.sockets.on('connection', function (socket) {
      socket.on('login',function(user)
      {
          var onliner=controller.loginUser(user);
          console.log("Onlinersss: ",onliner);
      });

      socket.on('registerUser',function(user){
          controller.registerUser(user);
      });
   }); 
```

这是controller.js 代码：

```
 var model=require('../model/schema');
  exports.loginUser=function(user)
  {

      model.registerUser.findOne({uname:user.uname,pass:user.pass},function(err,doc){
        if(!err){ 
             console.log("Here loggedin: ",doc); 
             return doc;             
        }
        else
             console.log("Invalid username or password");
        });
  }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:47:58.087

JavaScript（因此 node.js）是异步的。当您“返回文档”时，`function(err, doc)`将返回定义的匿名函数...而不是您尝试从中获取数据的函数 loginUser。

loginUser 立即返回，并返回 undefined（因为您没有指定其他任何内容）。要明白我的意思，请输入'return true;' 作为 loginUser 的最后一行，您会注意到您得到的值返回为“true”。

但是，您不想返回值。你想用一个值回调。这超出了stackoverflow答案的范围，所以这是一个很好的资源：

[http://bjouhier.wordpress.com/2011/01/09/asynchronous-javascript-the-tale-of-harry/](http://bjouhier.wordpress.com/2011/01/09/asynchronous-javascript-the-tale-of-harry/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:03:13.227

我刚刚将一个项目推送到[GitHub](https://github.com/rethinkdb/rethinkdb-example-nodejs-chat)，它使用几乎相同的库和[RethinkDB](http://www.rethinkdb.com)作为数据库（非常类似于 MongoDB）。基本上，您需要传递`callbacks`给您的控制器并使用从数据库中检索到的数据来调用它们。查看链接项目中的 app.js 和 lib/db.js。

# php - Codeigniter 验证复选框组

> ID：14456511
> 
> 赞同：2
> 
> 时间：2013-01-22T10:34:08.437
> 
> 标签：php, codeigniter, validation, forms

我有这个 html 代码，我想使用 Codeigniter`Form_Validation`类进行验证：

```
<form id="thread" method="POST">
    <input type="checkbox" name="checkAllAuto" id="checkAll" onclick="CheckAll(this.id)" /><?php echo __t($dir_lang,'request_select_all');?> 
    <br />
    <?php foreach ($threads as $thread): ?>
    <input type="checkbox" class="threads" name="option[]" value="<?php echo $thread['th_id']; ?>" /> <?php echo $thread['th_title']; ?> <br>
    <?php endforeach; ?>
    <br />
    <input type="checkbox" name="mom" /> <?php echo __t($dir_lang,'request_send');?> 
    <br />
    <select name="cat">
        <?php foreach ($cats as $cat): ?>
        <option value="<?php echo $cat['id']; ?>"> <?php echo $cat['title']; ?> </option>
        <?php endforeach; ?>
    </select>
    <br /><input type="submit" value="<?php echo __t($dir_lang,'submit');?> " /><br>
</form> 
```

我正在尝试使用验证复选框的第一组`Form_Validation`

```
if ($this->input->isMethodPost())
{
    $this->tplData['showMess'] = true;
    $this->load->library('form_validation');
    $this->lang->load('form_validation', 'english');
    $this->form_validation->set_error_delimiters('<h3>', '</h3>');
    $this->form_validation->set_rules('options[]','options', 'required');
    if ($this->form_validation->run() == FALSE)
    {
        $this->tplData['showError'] = true;
        $this->tplData['mess'] = array(validation_errors());
    }else{ 
        // my work
    }
} 
```

它提供所需的归档消息，但即使我选择一个或所有复选框，它仍然会提供所需的消息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T10:42:30.393

查看您在以下位置设置`options[]`为您的姓名的代码`set_rules`：

```
$this->form_validation->set_rules('options[]','options', 'required'); 
```

在您的 HTML 上，您的复选框名称是`option[]`

```
<input type="checkbox" class="threads" name="option[]" value="<?php echo $thread['th_id']; ?>" /> 
```

解决这个问题并告诉我错误是什么，我会更新我的答案

# python - 加快python循环处理数据包

> ID：14456513
> 
> 赞同：1
> 
> 时间：2013-01-22T10:34:11.323
> 
> 标签：python, performance, cython, scapy

我一整天都在等待一个循环退出而没有希望！我知道 python 在性能方面效率不高，因此我非常感谢任何针对我的问题的加速建议。

我使用wireshark 捕获了大量数据包（大约500,000 个）并将它们保存到.pcap 文件中。之后，我使用 Scapy rdpcap() 函数从保存的文件中读取数据包，然后循环访问每个数据包以提取源 IP 地址。我的代码如下：

```
from scaly.all import *

srcList =[]
Packets = rdpcap("pcapfile")

for pkt in Packets:
    src = Packets[Packets.index(pkt)][1].src
    srcList.append(src) 
```

注意：我做了一些挖掘，发现 Cython 用于加速嵌套循环，但老实说，我不知道如何在我的情况下使用它。任何见解都会很棒

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T10:47:11.540

如果我没有误解您的意图，您可以简化代码，这也应该加快速度：

```
from scaly.all import *

Packets = rdpcap("pcapfile")
srcList = [pkt[1].src for pkt in Packets] 
```

这个解决方案和你的解决方案之间的区别可以用一个简单的例子来说明。如您所见，第二个功能快了 10 倍以上。

```
In [1]: lst = range(100)

In [2]: def f1(lst):
   ...:     out = []
   ...:     for item in lst:
   ...:         out.append(lst[lst.index(item)])
   ...:     return out

In [3]: def f2(lst):
   ...:     return [item for item in lst]

In [4]: %timeit f1(lst)
1000 loops, best of 3: 221 us per loop

In [5]: %timeit f2(lst)
100000 loops, best of 3: 9.61 us per loop 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T10:47:30.520

我怀疑问题出在网上，`src = Packets[Packets.index(pkt)][1].src`因为循环是`O(n)`并且列表搜索正在`O(n)`发生`O(n**2)`。

也许以下内容也可以：

```
from scaly.all import *

srcList =[]
Packets = rdpcap("pcapfile")

for pkt in Packets:
    src = pkt[1].src
    srcList.append(src) 
```

或者

```
from scaly.all import *

Packets = rdpcap("pcapfile")
srcList = [pkt[1].src for pkt in Packets] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-05T14:50:54.237

如果您想要的只是 IP 源，请告诉 scapy 在 IP 层之后忽略解析任何内容：

```
IP.payload_guess = [] 
```

把它放在调用 to 之前`rdpcap`。Scapy 花费大量时间遍历每一层，解析和提取它可以找到的所有内容。这是大部分时间用于读取数据包的地方。

另外，考虑更改`rdpcap`for `PcapReader`，它不会加载整个文件。这不一定会加快速度，但会减少内存占用。

# android - 文件缓存和文件权限

> ID：14456522
> 
> 赞同：6
> 
> 时间：2013-01-22T10:34:35.033
> 
> 标签：android, android-file, android-permissions, image-caching

我在我的应用程序中实现缓存并将其部署在 4.2.x 设备上时遇到问题。

当我将文件保存在应用程序缓存目录中时，我无法读取它。我使用具有 root 权限的文件管理器来探索缓存文件夹，并且**文件正确存在于我的缓存文件夹中，但是当我尝试读取它们时出现找不到文件错误**。

***此问题仅与 4.2 android 版本有关。在 4.1- 一切正常***

这是我用来编写文件的代码

```
public static void writeFile(Bitmap bmp, File f) {

        if (bmp == null)
            return;

        FileOutputStream out = null;

        try {
            out = new FileOutputStream(f);
            boolean res = bmp.compress(Bitmap.CompressFormat.PNG, 80, out);

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            try {
                if (out != null)
                    out.close();
            } catch (Exception ex) {
            }
        }
        f.setReadable(true, false);
    } 
```

这就是我构造文件对象的方式

```
File bitmapFile = new File(ImageManager.getInstance().getCacheDir(), key); 
```

这是获取缓存路径的方法

```
if (Config.USE_INTERNAL_CACHE == false && sdState.equals(android.os.Environment.MEDIA_MOUNTED)) {
        cacheDir = MyApp.getInstance().getExternalCacheDir();
    } else {
        cacheDir = MyApp.getInstance().getCacheDir();

    }
    if (!cacheDir.exists()) {
        cacheDir.mkdirs();
    } 
```

此时我的文件已正确写入

```
/data/data/my.app.package/cache/ 
```

这是我用来读取文件的代码

```
public BitmapDrawable readFile(String fileName) {
    FileInputStream in = null;
    try {
        in = new FileInputStream(getCacheDir()+"/"+fileName);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    Bitmap bmp = BitmapFactory.decodeStream(in);

    if (bmp == null) {
        return null;
    }
    return new BitmapDrawable(MyApp.getInstance().getResources(), bmp);
} 
```

这总是会产生这个错误：

```
01-22 11:23:47.158: W/System.err(20660): java.io.FileNotFoundException: /data/data/my.app.package/cache/File Name: open failed: ENOENT (No such file or directory)
01-22 11:23:47.158: W/System.err(20660):    at libcore.io.IoBridge.open(IoBridge.java:416)
01-22 11:23:47.158: W/System.err(20660):    at java.io.FileInputStream.<init(FileInputStream.java:78)
01-22 11:23:47.158: W/System.err(20660):    at java.io.FileInputStream.<init(FileInputStream.java:105)
01-22 11:23:47.158: W/System.err(20660):    atmy.app.package.instanceManager.ImageManager.readFile(ImageManager.java:246)
01-22 11:23:47.158: W/System.err(20660):    atmy.app.package.instanceManager.ImageManager$ImageQueueManager.run(ImageManager.java:186)
01-22 11:23:47.158: W/System.err(20660):    at java.lang.Thread.run(Thread.java:856)
01-22 11:23:47.158: W/System.err(20660): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
01-22 11:23:47.158: W/System.err(20660):    at libcore.io.Posix.open(Native Method)
01-22 11:23:47.158: W/System.err(20660):    atlibcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
01-22 11:23:47.158: W/System.err(20660):    at libcore.io.IoBridge.open(IoBridge.java:400)
01-22 11:23:47.158: W/System.err(20660):    ... 5 more 
```

与此行相关：

```
in = new FileInputStream(getCacheDir()+"/"+fileName); 
```

我已经添加了这个权限

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

与此错误相关的路径和名称文件是正确的，并且该文件存在于缓存文件夹中，为什么我无法读取它们？**我认为这可能是由于 android 4.2 中引入的新多用户功能而导致的用户权限相关问题，但我无法弄清楚。**我也尝试设置文件`.setReadable(true, false)`但没有。谢谢

# android - 对于 layout-sw320dp 来说，哪个是好的和首选的图像尺寸

> ID：14456525
> 
> 赞同：0
> 
> 时间：2013-01-22T10:34:41.607
> 
> 标签：android, android-layout

320x480 就足够了，或者我应该使用 480x800 以获得更好的 layout-sw320dp 效果。如果任何机构有这方面的经验，那么请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:42:22.897

如果您使用的是适用于 Android 大小的标准图像，则不必真正关心。

有很多关于这方面的信息，但总的来说，以 4 种分辨率创建图像，你应该没问题。

分辨率为 (lpdi/mdpi/hdpi/xhpdi)：32/48/64/96 - 这是一个比率：0.5/1/1.5/2

在 Eclipse 中，您可以使用“资产管理器”工具（可从主菜单访问 - 新建/其他/Android/创建图标集

这个文档页面很清楚：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# html - 如何在不移动第一个 div 的文本的情况下重叠 2 个 div？

> ID：14456526
> 
> 赞同：0
> 
> 时间：2013-01-22T10:34:49.363
> 
> 标签：html, css

我有一个带有一些文本的 div 和另一个在文本 div 后面带有一些隐藏按钮的 div，并在需要时向左移动（动画）。

问题是 div 里面的文字向右移动，让按钮 div 不与文字重叠。

在这里查看：http: [//clip2net.com/s/2JYBV](http://clip2net.com/s/2JYBV)

如何根据按钮 div 的宽度/大小/位置使主文本 div 的文本不交互？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:47:40.127

```
.a {
    position:relative;
    width:400px;
    height:300px;
    margin:50px 200px;
    background:#000;
    padding:10px;
    color:#fff;
}
.b {
    position:absolute;
    top:10px;
    left:0px;
    width:180px;
    height:290px;
    background:green;
    display:none;
}
.a:hover .b {
    display:block;
    /* left:-150px; */
} 
```

您可以使用 div 的相对和绝对定位来完成您所需的任务。

[http://jsfiddle.net/G9Q25/](http://jsfiddle.net/G9Q25/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:57:03.970

尝试为您的按钮 div z-index:2 提供 z-index；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T11:08:31.057

尝试将以下内容添加到您的定义中：

```
overflow:hidden; 
```

# xslt-1.0 - 使用 XSLT 1.0 创建空元素

> ID：14456527
> 
> 赞同：1
> 
> 时间：2013-01-22T10:34:50.843
> 
> 标签：xslt-1.0

我无法弄清楚如何使用 XSLT 1.0 在 XML 下构建

```
<values>
      <field name="abc"></field>
      <field name="nch"></field>
</values> 
```

元素开始和结束标记之间不应有任何空格。请尽快帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T13:36:55.523

在撒克逊语中，您必须将**输出方法**更改为“ **html** ”。

例子：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes"/>
  <xsl:template match="/">
    <values>
      <field name="abc"></field>
      <field name="nch"></field>
    </values>
  </xsl:template>
</xsl:stylesheet> 
```

这是适用于 vs2010 的解决方法。

示例 1：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:template match="/">
    <values>
      <field name="abc">
        <xsl:value-of select="substring-before(' ',' ')"/>
      </field>
      <field name="nch">
        <xsl:value-of select="substring-before(' ',' ')"/>
      </field>
    </values>
  </xsl:template>
</xsl:stylesheet> 
```

示例 2：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:template match="/">
    <xsl:element name="values">
      <xsl:element name="filed">
        <xsl:attribute name="name">abc</xsl:attribute>
        <xsl:value-of select="substring-before(' ',' ')"/>
      </xsl:element>
      <xsl:element name="filed">
        <xsl:attribute name="name">nch</xsl:attribute>
        <xsl:value-of select="substring-before(' ',' ')"/>
      </xsl:element>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

输出：

```
<?xml version="1.0" encoding="utf-8"?>
<values>
  <filed name="abc"></filed>
  <filed name="nch"></filed>
</values> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:22:40.767

`<x></x>`和之间的区别`<x/>`纯粹是词法上的，一般不能由 XSLT 处理器控制，因为最终输出是由 Serializer 执行的。

对于某些 XSLT 处理器（使用它们的内置序列化程序），可能会输出空元素的完整形式。但是，对于其他处理器，例如 Saxon，这是不可能的。

# xml - 通过 Xsl 1.0 在 xml 中插入命名空间

> ID：14456528
> 
> 赞同：1
> 
> 时间：2013-01-22T10:34:55.383
> 
> 标签：xml, xslt, xslt-1.0

我有这样的输入 XML -

```
<Integer xmlns="www.maths.com" xmlns:abc="www.dateTypes.com" xmlns:def="www.calculations.com">
    <ID>A1</ID>
    <abc:Date>2005-11-20</abc:Date>
    <Type>12345</Type>
    <def:Maths>Multiply</def:Maths>
</Integer> 
```

我想通过 XSL 1.0 将名称空间添加到具有相同前缀但具有不同值的根元素。我希望我的输出像 -

```
<Integer xmlns="www.maths.com" xmlns:abc="www.dateTypes-2.0" xmlns:def="www.calculations-2.0">
    <ID>A1</ID>
    <abc:Date>2005-11-20</abc:Date>
    <Type>12345</Type>
    <def:Maths>Multiply</def:Maths>
</Integer> 
```

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:47:52.467

这应该可以解决问题：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:abc="www.dateTypes-2.0" xmlns:def="www.calculations-2.0"
                xmlns:oldabc="www.dateTypes.com" xmlns:olddef="www.calculations.com"
                xmlns:maths="www.maths.com"
                exclude-result-prefixes="oldabc olddef maths">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="oldabc:*">
    <xsl:element name="abc:{local-name()}">
      <xsl:apply-templates select="@* | node()" />
    </xsl:element>
  </xsl:template>

  <xsl:template match="olddef:*">
    <xsl:element name="def:{local-name()}">
      <xsl:apply-templates select="@* | node()" />
    </xsl:element>
  </xsl:template>

  <xsl:template match="@oldabc:*">
    <xsl:attribute name="abc:{local-name()}">
      <xsl:value-of select="."/>
    </xsl:attribute>
  </xsl:template>

  <xsl:template match="@olddef:*">
    <xsl:attribute name="def:{local-name()}">
      <xsl:value-of select="." />
    </xsl:attribute>
  </xsl:template>

  <xsl:template match="@* | text()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*">
    <xsl:element name="{name()}" namespace="{namespace-uri()}">
      <xsl:apply-templates select="@* | node()"/>
    </xsl:element>
  </xsl:template>

  <xsl:template match="/maths:Integer">
    <Integer xmlns="www.maths.com" xmlns:abc="www.dateTypes-2.0" xmlns:def="www.calculations-2.0">
      <xsl:apply-templates select="@* | node()"/>
    </Integer>
  </xsl:template>
</xsl:stylesheet> 
```

当上面的 XSLT 在示例输入上运行时，它会产生预期的结果：

```
<Integer xmlns="www.maths.com" xmlns:abc="www.dateTypes-2.0" xmlns:def="www.calculations-2.0">
  <ID>A1</ID>
  <abc:Date>2005-11-20</abc:Date>
  <Type>12345</Type>
  <def:Maths>Multiply</def:Maths>
</Integer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:42:34.250

**更短的解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:abc="www.dateTypes-2.0" xmlns:def="www.calculations-2.0">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vNS" select=
   "document('')/*/namespace::*[name()='abc' or name()='def']"/>
 <xsl:variable name="vDefNS" select="/*/namespace::*[not(name())]"/>

 <xsl:template match="*">
  <xsl:element name="{name()}">
       <xsl:copy-of select="$vDefNS"/>
       <xsl:apply-templates select="@*|node()"/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="@*">
  <xsl:attribute name="{name()}">
   <xsl:value-of select="."/>
  </xsl:attribute>
 </xsl:template>

 <xsl:template match="*[name()=local-name()]">
     <xsl:element name="{name()}" namespace="{$vDefNS}">
       <xsl:copy-of select="$vNS"/>
       <xsl:apply-templates select="@*|node()"/>
     </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（与提供的相同，但添加了一个属性以使其更具代表性）：

```
<Integer xmlns="www.maths.com"
 xmlns:abc="www.dateTypes.com" xmlns:def="www.calculations.com">
    <ID>A1</ID>
    <abc:Date>2005-11-20</abc:Date>
    <Type abc:x="1">12345</Type>
    <def:Maths>Multiply</def:Maths>
</Integer> 
```

**产生了想要的正确结果：**

```
<Integer xmlns="www.maths.com" xmlns:abc="www.dateTypes-2.0" xmlns:def="www.calculations-2.0">
   <ID>A1</ID>
   <abc:Date>2005-11-20</abc:Date>
   <Type abc:x="1">12345</Type>
   <def:Maths>Multiply</def:Maths>
</Integer> 
```

# php - mysqli_fetch_array while 循环列

> ID：14456529
> 
> 赞同：9
> 
> 时间：2013-01-22T10:34:57.313
> 
> 标签：php, mysqli, while-loop, multiple-columns

应该很基本，但我无法让它工作。我有这个代码来迭代一个 mysqli 查询：

```
while($row = mysqli_fetch_array($result)) {
    $posts[] = $row['post_id'].$row['post_title'].$row['content'];
} 
```

它工作并返回：

> 变量 #1：（数组，3 个元素）↵ 0（字符串）：“4testtest”（9 个字符）1（字符串）：“1Hello world！欢迎使用 WordPress。这是您的第一篇文章。编辑或删除它，然后开始写博客！” （99 个字符）2（字符串）：“2Sample Page这是一个示例页面。它与博客文章不同，因为它将保留在一个位置并显示在您的网站导航中（在大多数主题中）。” （161 个字符）

问题是它将所有三个列放在一列中，因此我无法单独访问它们。

例如：

> 0（字符串）：“4testtest”（9 个字符）

应该分成4、测试、测试

当我这样做时：

```
while($row = mysqli_fetch_array($result)) {             
    $posts['post_id'] = $row['post_id'];
    $posts['post_title'] = $row['post_title'];
    $posts['type'] = $row['type'];
    $posts['author'] = $row['author'];  
} 
```

它只输出 1 行而不是全部 3 行……</p>

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-22T10:41:28.210

从 MySQL 获取所有值：

```
 $post = array();
    while($row = mysql_fetch_assoc($result))
    {
        $posts[] = $row;
    } 
```

然后，获取每个值：

```
<?php 
     foreach ($posts as $row) 
        { 
            foreach ($row as $element)
            {
                echo $element."<br>";
            }
        }
?> 
```

回显这些值。或者从 $post 变量中获取每个元素

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-26T12:29:39.080

这是您的解决方案。

```
$x = 0;
while($row = mysqli_fetch_array($result)) {             
    $posts[$x]['post_id'] = $row['post_id'];
    $posts[$x]['post_title'] = $row['post_title'];
    $posts[$x]['type'] = $row['type'];
    $posts[$x]['author'] = $row['author'];
    $x++;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-01T10:35:13.260

我认为这将是一种更简单的输出结果的方式。

抱歉使用我自己的数据应该很容易替换。

```
$query = "SELECT * FROM category ";

$result = mysqli_query($connection, $query);

    while($row = mysqli_fetch_assoc($result))
    {
        $cat_id = $row['cat_id'];
        $cat_title = $row['cat_title'];

        echo $cat_id . " " . $cat_title  ."<br>";
    } 
```

这将输出：

*   -**身份证标题**
*   -1 加里
*   -2 约翰
*   -3 迈克尔斯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-13T10:46:44.357

两者都将在 while 循环中的**mysqli_fetch_array中完美运行**

```
while($row = mysqli_fetch_array($result,MYSQLI_BOTH)) {
    $posts[] = $row['post_id'].$row['post_title'].$row['content'];
} 
```

（或者）

```
while($row = mysqli_fetch_array($result,MYSQLI_ASSOC)) {
    $posts[] = $row['post_id'].$row['post_title'].$row['content'];
} 
```

**mysqli_fetch_array()** - 有第二个参数 $resulttype。

**MYSQLI_ASSOC：**获取关联数组

**MYSQLI_NUM：**获取数值数组

**MYSQLI_BOTH：**同时获取关联数组和数值数组。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-22T10:41:47.410

试试这个 ：

```
 $i = 0;    
    while($row = mysqli_fetch_array($result)) {  

            $posts['post_id'] = $row[$i]['post_id'];
            $posts['post_title'] = $row[$i]['post_title'];
            $posts['type'] = $row[$i]['type'];
            $posts['author'] = $row[$i]['author'];  

        }   
    $i++;
    }

print_r($posts); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-10-28T22:50:05.037

试试这个...

```
while($row = mysqli_fetch_array($result, MYSQLI_ASSOC)) { 
```

# c# - 带有 CookieContainer 的 CookieException：cookie 的“路径”部分无效

> ID：14456531
> 
> 赞同：8
> 
> 时间：2013-01-22T10:34:59.590
> 
> 标签：c#, cookies, windows-phone-8

我正在尝试设置 cookie 的路径，但总是收到错误消息：

`CookieException: The 'Path'='/applogin'`部分 cookie 无效。

代码如下所示：

```
Cookie newCookie = new Cookie("JSESSIONID", session.SessionId, "/applogin", "domain.com");
newCookie.Secure = true;
webRequest.CookieContainer.Add(new Uri(@"https://domain.com"), newCookie); 
```

然后在最后一行抛出异常......谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T23:33:22.720

在您的情况下，您有两个网址：一个是 a `https://domain.com`，第二个是 a `https://domain.com/applogin`。假设 CookieContainer 包含路径 /applogin 的 cookie。这意味着如果您尝试检索 url 的 cookie 列表`https://domain.com/applogin`- 您将获得一个 cookie。如果您尝试检索 url 的 cookie `https://domain.com`- 您将获得 0 个 cookie。

现在让我们看看你的样本。您有一个 cookie`https://domain.com/applogin`并且您正尝试将其添加到 CookieContrainer 的 url `https://domain.com`。CookieContainer 验证此 cookie 不能用于特定 url，因为它是不同 url 的问题。在您的情况下，您需要更改添加 cookie 的行：

```
webRequest.CookieContainer.Add(new Uri(@"https://domain.com/applogin"), newCookie); 
```

或者我猜你想为整个 domain.com 使用这个 cookie - 然后你需要改变你创建它的方式

```
Cookie newCookie = new Cookie("JSESSIONID", session.SessionId, "/", "domain.com"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:20:12.230

在某些浏览器中，路径区分大小写。确保所有对“/applogin”的引用都与大小写完全匹配。

[http://msdn.microsoft.com/en-us/library/ms178194%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms178194%28v=vs.85%29.aspx)

# opengl - OpenGL颜色问题

> ID：14456532
> 
> 赞同：2
> 
> 时间：2013-01-22T10:35:00.420
> 
> 标签：opengl, colors

我试图找出颜色问题。我创建了一个从高度图加载的景观和一个从 MD2 模型加载的动画。MD2 模型将从位图纹理中获取颜色。景观的颜色必须由 glColor3f 设置。

现在问题出在我的 Draw 方法中：

```
void drawScene() {
glClearColor(1, 1, 1, 0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

gluLookAt(cameraPositionX, cameraPositionY, cameraPositionZ, cameraAimX, cameraAimY, cameraAimZ, 0, 1, 0);

GLfloat ambientColor[] = {0.4f, 0.4f, 0.4f, 1.0f};
glLightModelfv(GL_LIGHT_MODEL_AMBIENT, ambientColor);

GLfloat lightColor0[] = {0.6f, 0.6f, 0.6f, 1.0f};
GLfloat lightPos0[] = {-0.5f, 0.8f, 0.1f, 0.0f};
glLightfv(GL_LIGHT0, GL_DIFFUSE, lightColor0);
glLightfv(GL_LIGHT0, GL_POSITION, lightPos0);

if (_model != NULL) {
    glPushMatrix();
    glTranslatef(modelPositionX, modelPositionY, modelPositionZ);
    glRotatef(-90.0f, 0.0f, 0.0f, 1.0f);
    glRotatef(110.0f, 1.0f, 0.0f, 0.0f);
    glScalef(0.2f, 0.2f, 0.2f);
    _model->draw();
    glPopMatrix();
}

glTranslatef(-(float)(_terrain->width() - 1) / 2,
             0.0f,
             -(float)(_terrain->length() - 1) / 2);

glColor3f(0.0f, 1.0f, 0.0f);
for(int z = 0; z < _terrain->length() - 1; z++) {
    glBegin(GL_TRIANGLE_STRIP);
    for(int x = 0; x < _terrain->width(); x++) {
        Vec3f normal = _terrain->getNormal(x, z);
        glNormal3f(normal[0], normal[1], normal[2]);
        glVertex3f(x, _terrain->getHeight(x, z), z);
        normal = _terrain->getNormal(x, z + 1);
        glNormal3f(normal[0], normal[1], normal[2]);
        glVertex3f(x, _terrain->getHeight(x, z + 1), z + 1);
    }
    glEnd();
}

glutSwapBuffers(); 
```

}

当我注释掉 glColor3f(0.0f, 1.0f, 0.0f); 声明，景观将获得与动画从位图纹理获得的颜色相同的颜色。但是当我包含 glColor3f(0.0f, 1.0f, 0.0f); 声明，动画将获得与风景相同的颜色。我想让动画和风景有不同的颜色。

这是完整的 main.cpp 类和 md2model.cpp 类。

主文件

```
#include <iostream>
#include <stdlib.h>

#ifdef __APPLE__
#include <OpenGL/OpenGL.h>
#include <GLUT/glut.h>
#else
#include <GL/glut.h>
#endif

#include "imageloader.h"
#include "imageloader.cpp"
#include "vec3f.h"
#include "vec3f.cpp"
#include "md2model.h"
#include "md2model.cpp"

using namespace std;

class Terrain {
private:
    int w;
    int l;
    float** hs;
    Vec3f** normals;
    bool computedNormals;
public:
    Terrain(int w2, int l2) {
        w = w2;
        l = l2;

        hs = new float*[l];
        for(int i = 0; i < l; i++) {
            hs[i] = new float[w];
        }

        normals = new Vec3f*[l];
        for(int i = 0; i < l; i++) {
            normals[i] = new Vec3f[w];
        }

        computedNormals = false;
    }

    ~Terrain() {
        for(int i = 0; i < l; i++) {
            delete[] hs[i];
        }
        delete[] hs;

        for(int i = 0; i < l; i++) {
            delete[] normals[i];
        }
        delete[] normals;
    }

    int width() {
        return w;
    }

    int length() {
        return l;
    }

    void setHeight(int x, int z, float y) {
        hs[z][x] = y;
        computedNormals = false;
    }

    float getHeight(int x, int z) {
        return hs[z][x];
    }

    void computeNormals() {
        if (computedNormals) {
            return;
        }

        Vec3f** normals2 = new Vec3f*[l];
        for(int i = 0; i < l; i++) {
            normals2[i] = new Vec3f[w];
        }

        for(int z = 0; z < l; z++) {
            for(int x = 0; x < w; x++) {
                Vec3f sum(0.0f, 0.0f, 0.0f);

                Vec3f out;
                if (z > 0) {
                    out = Vec3f(0.0f, hs[z - 1][x] - hs[z][x], -1.0f);
                }
                Vec3f in;
                if (z < l - 1) {
                    in = Vec3f(0.0f, hs[z + 1][x] - hs[z][x], 1.0f);
                }
                Vec3f left;
                if (x > 0) {
                    left = Vec3f(-1.0f, hs[z][x - 1] - hs[z][x], 0.0f);
                }
                Vec3f right;
                if (x < w - 1) {
                    right = Vec3f(1.0f, hs[z][x + 1] - hs[z][x], 0.0f);
                }

                if (x > 0 && z > 0) {
                    sum += out.cross(left).normalize();
                }
                if (x > 0 && z < l - 1) {
                    sum += left.cross(in).normalize();
                }
                if (x < w - 1 && z < l - 1) {
                    sum += in.cross(right).normalize();
                }
                if (x < w - 1 && z > 0) {
                    sum += right.cross(out).normalize();
                }

                normals2[z][x] = sum;
            }
        }

        const float FALLOUT_RATIO = 0.5f;
        for(int z = 0; z < l; z++) {
            for(int x = 0; x < w; x++) {
                Vec3f sum = normals2[z][x];

                if (x > 0) {
                    sum += normals2[z][x - 1] * FALLOUT_RATIO;
                }
                if (x < w - 1) {
                    sum += normals2[z][x + 1] * FALLOUT_RATIO;
                }
                if (z > 0) {
                    sum += normals2[z - 1][x] * FALLOUT_RATIO;
                }
                if (z < l - 1) {
                    sum += normals2[z + 1][x] * FALLOUT_RATIO;
                }

                if (sum.magnitude() == 0) {
                    sum = Vec3f(0.0f, 1.0f, 0.0f);
                }
                normals[z][x] = sum;
            }
        }

        for(int i = 0; i < l; i++) {
            delete[] normals2[i];
        }
        delete[] normals2;

        computedNormals = true;
    }

    Vec3f getNormal(int x, int z) {
        if (!computedNormals) {
            computeNormals();
        }
        return normals[z][x];
    }
};

Terrain* loadTerrain(const char* filename, float height) {
Image* image = loadBMP(filename);
Terrain* t = new Terrain(image->width, image->height);
for(int y = 0; y < image->height; y++) {
    for(int x = 0; x < image->width; x++) {
        unsigned char color =
            (unsigned char)image->pixels[3 * (y * image->width + x)];
        float h = height * ((color / 255.0f) - 0.5f);
        t->setHeight(x, y, h);
    }
}

delete image;
t->computeNormals();
return t;
}

float cameraPositionX = 2;
float cameraPositionY = 2;
float cameraPositionZ = 1;

float cameraAimX = 0;
float cameraAimY = 0;
float cameraAimZ = 0;

float modelPositionX = 0;
float modelPositionY = 1;
float modelPositionZ = 0;

Terrain* _terrain;

MD2Model* _model;

void cleanup() {
delete _terrain;
delete _model;
}

void handleKeypress(unsigned char key, int x, int y) {
switch (key) {
    case 27:
        cleanup();
        exit(0);
}
}

void handleSpecialKeypress(int key, int x, int y) {
switch (key) {
    case GLUT_KEY_UP:
            cameraPositionX -= 0.5;
    cameraAimX -= 0.5;
    modelPositionX -= 0.5;

    if (_model != NULL) {
            _model->advance(0.025f);
        }

    glutPostRedisplay();
            break;
    case GLUT_KEY_DOWN:
            cameraPositionX += 0.5;
    cameraAimX += 0.5;
    modelPositionX += 0.5;

    if (_model != NULL) {
            _model->advance(0.025f);
        }

    glutPostRedisplay();
            break;
case GLUT_KEY_LEFT:
            //Do something
            break;
    case GLUT_KEY_RIGHT:
            //Do something
            break;
  }
}

void initRendering() {
glEnable(GL_DEPTH_TEST);
glEnable(GL_COLOR_MATERIAL);
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);
glEnable(GL_NORMALIZE);
glShadeModel(GL_SMOOTH);

_model = MD2Model::load("tallguy.md2");
if (_model != NULL) {
    _model->setAnimation("run");
}
}

void handleResize(int w, int h) {
glViewport(0, 0, w, h);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(105.0, (double)w / (double)h, 1.0, 500.0);
}

void drawScene() {
glClearColor(1, 1, 1, 0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

gluLookAt(cameraPositionX, cameraPositionY, cameraPositionZ, cameraAimX, cameraAimY, cameraAimZ, 0, 1, 0);

GLfloat ambientColor[] = {0.4f, 0.4f, 0.4f, 1.0f};
glLightModelfv(GL_LIGHT_MODEL_AMBIENT, ambientColor);

GLfloat lightColor0[] = {0.6f, 0.6f, 0.6f, 1.0f};
GLfloat lightPos0[] = {-0.5f, 0.8f, 0.1f, 0.0f};
glLightfv(GL_LIGHT0, GL_DIFFUSE, lightColor0);
glLightfv(GL_LIGHT0, GL_POSITION, lightPos0);

if (_model != NULL) {
    glPushMatrix();
    glTranslatef(modelPositionX, modelPositionY, modelPositionZ);
    glRotatef(-90.0f, 0.0f, 0.0f, 1.0f);
    glRotatef(110.0f, 1.0f, 0.0f, 0.0f);
    glScalef(0.2f, 0.2f, 0.2f);
    _model->draw();
    glPopMatrix();
}

glTranslatef(-(float)(_terrain->width() - 1) / 2,
             0.0f,
             -(float)(_terrain->length() - 1) / 2);

//glColor3f(0.0f, 1.0f, 0.0f);
for(int z = 0; z < _terrain->length() - 1; z++) {
    glBegin(GL_TRIANGLE_STRIP);
    for(int x = 0; x < _terrain->width(); x++) {
        Vec3f normal = _terrain->getNormal(x, z);
        glNormal3f(normal[0], normal[1], normal[2]);
        glVertex3f(x, _terrain->getHeight(x, z), z);
        normal = _terrain->getNormal(x, z + 1);
        glNormal3f(normal[0], normal[1], normal[2]);
        glVertex3f(x, _terrain->getHeight(x, z + 1), z + 1);
    }
    glEnd();
}

glutSwapBuffers();
}

int main(int argc, char** argv) {
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
glutInitWindowSize(400, 400);

glutCreateWindow("Terrain");
initRendering();

_terrain = loadTerrain("heightmap.bmp", 50);

glutDisplayFunc(drawScene);
glutKeyboardFunc(handleKeypress);
glutSpecialFunc(handleSpecialKeypress);
glutReshapeFunc(handleResize);

glutMainLoop();
return 0;
} 
```

M2DModel.cpp

```
#include <fstream>
#include "imageloader.h"
#include "md2model.h"
#include "string.h"

using namespace std;

namespace {
//Normals used in the MD2 file format
float NORMALS[486] =
    {-0.525731f,  0.000000f,  0.850651f,
     -0.442863f,  0.238856f,  0.864188f,
     -0.295242f,  0.000000f,  0.955423f,
     -0.309017f,  0.500000f,  0.809017f,
     -0.162460f,  0.262866f,  0.951056f,
      0.000000f,  0.000000f,  1.000000f,
      0.000000f,  0.850651f,  0.525731f,
     -0.147621f,  0.716567f,  0.681718f,
      0.147621f,  0.716567f,  0.681718f,
      0.000000f,  0.525731f,  0.850651f,
      0.309017f,  0.500000f,  0.809017f,
      0.525731f,  0.000000f,  0.850651f,
      0.295242f,  0.000000f,  0.955423f,
      0.442863f,  0.238856f,  0.864188f,
      0.162460f,  0.262866f,  0.951056f,
     -0.681718f,  0.147621f,  0.716567f,
     -0.809017f,  0.309017f,  0.500000f,
     -0.587785f,  0.425325f,  0.688191f,
     -0.850651f,  0.525731f,  0.000000f,
     -0.864188f,  0.442863f,  0.238856f,
     -0.716567f,  0.681718f,  0.147621f,
     -0.688191f,  0.587785f,  0.425325f,
     -0.500000f,  0.809017f,  0.309017f,
     -0.238856f,  0.864188f,  0.442863f,
     -0.425325f,  0.688191f,  0.587785f,
     -0.716567f,  0.681718f, -0.147621f,
     -0.500000f,  0.809017f, -0.309017f,
     -0.525731f,  0.850651f,  0.000000f,
      0.000000f,  0.850651f, -0.525731f,
     -0.238856f,  0.864188f, -0.442863f,
      0.000000f,  0.955423f, -0.295242f,
     -0.262866f,  0.951056f, -0.162460f,
      0.000000f,  1.000000f,  0.000000f,
      0.000000f,  0.955423f,  0.295242f,
     -0.262866f,  0.951056f,  0.162460f,
      0.238856f,  0.864188f,  0.442863f,
      0.262866f,  0.951056f,  0.162460f,
      0.500000f,  0.809017f,  0.309017f,
      0.238856f,  0.864188f, -0.442863f,
      0.262866f,  0.951056f, -0.162460f,
      0.500000f,  0.809017f, -0.309017f,
      0.850651f,  0.525731f,  0.000000f,
      0.716567f,  0.681718f,  0.147621f,
      0.716567f,  0.681718f, -0.147621f,
      0.525731f,  0.850651f,  0.000000f,
      0.425325f,  0.688191f,  0.587785f,
      0.864188f,  0.442863f,  0.238856f,
      0.688191f,  0.587785f,  0.425325f,
      0.809017f,  0.309017f,  0.500000f,
      0.681718f,  0.147621f,  0.716567f,
      0.587785f,  0.425325f,  0.688191f,
      0.955423f,  0.295242f,  0.000000f,
      1.000000f,  0.000000f,  0.000000f,
      0.951056f,  0.162460f,  0.262866f,
      0.850651f, -0.525731f,  0.000000f,
      0.955423f, -0.295242f,  0.000000f,
      0.864188f, -0.442863f,  0.238856f,
      0.951056f, -0.162460f,  0.262866f,
      0.809017f, -0.309017f,  0.500000f,
      0.681718f, -0.147621f,  0.716567f,
      0.850651f,  0.000000f,  0.525731f,
      0.864188f,  0.442863f, -0.238856f,
      0.809017f,  0.309017f, -0.500000f,
      0.951056f,  0.162460f, -0.262866f,
      0.525731f,  0.000000f, -0.850651f,
      0.681718f,  0.147621f, -0.716567f,
      0.681718f, -0.147621f, -0.716567f,
      0.850651f,  0.000000f, -0.525731f,
      0.809017f, -0.309017f, -0.500000f,
      0.864188f, -0.442863f, -0.238856f,
      0.951056f, -0.162460f, -0.262866f,
      0.147621f,  0.716567f, -0.681718f,
      0.309017f,  0.500000f, -0.809017f,
      0.425325f,  0.688191f, -0.587785f,
      0.442863f,  0.238856f, -0.864188f,
      0.587785f,  0.425325f, -0.688191f,
      0.688191f,  0.587785f, -0.425325f,
     -0.147621f,  0.716567f, -0.681718f,
     -0.309017f,  0.500000f, -0.809017f,
      0.000000f,  0.525731f, -0.850651f,
     -0.525731f,  0.000000f, -0.850651f,
     -0.442863f,  0.238856f, -0.864188f,
     -0.295242f,  0.000000f, -0.955423f,
     -0.162460f,  0.262866f, -0.951056f,
      0.000000f,  0.000000f, -1.000000f,
      0.295242f,  0.000000f, -0.955423f,
      0.162460f,  0.262866f, -0.951056f,
     -0.442863f, -0.238856f, -0.864188f,
     -0.309017f, -0.500000f, -0.809017f,
     -0.162460f, -0.262866f, -0.951056f,
      0.000000f, -0.850651f, -0.525731f,
     -0.147621f, -0.716567f, -0.681718f,
      0.147621f, -0.716567f, -0.681718f,
      0.000000f, -0.525731f, -0.850651f,
      0.309017f, -0.500000f, -0.809017f,
      0.442863f, -0.238856f, -0.864188f,
      0.162460f, -0.262866f, -0.951056f,
      0.238856f, -0.864188f, -0.442863f,
      0.500000f, -0.809017f, -0.309017f,
      0.425325f, -0.688191f, -0.587785f,
      0.716567f, -0.681718f, -0.147621f,
      0.688191f, -0.587785f, -0.425325f,
      0.587785f, -0.425325f, -0.688191f,
      0.000000f, -0.955423f, -0.295242f,
      0.000000f, -1.000000f,  0.000000f,
      0.262866f, -0.951056f, -0.162460f,
      0.000000f, -0.850651f,  0.525731f,
      0.000000f, -0.955423f,  0.295242f,
      0.238856f, -0.864188f,  0.442863f,
      0.262866f, -0.951056f,  0.162460f,
      0.500000f, -0.809017f,  0.309017f,
      0.716567f, -0.681718f,  0.147621f,
      0.525731f, -0.850651f,  0.000000f,
     -0.238856f, -0.864188f, -0.442863f,
     -0.500000f, -0.809017f, -0.309017f,
     -0.262866f, -0.951056f, -0.162460f,
     -0.850651f, -0.525731f,  0.000000f,
     -0.716567f, -0.681718f, -0.147621f,
     -0.716567f, -0.681718f,  0.147621f,
     -0.525731f, -0.850651f,  0.000000f,
     -0.500000f, -0.809017f,  0.309017f,
     -0.238856f, -0.864188f,  0.442863f,
     -0.262866f, -0.951056f,  0.162460f,
     -0.864188f, -0.442863f,  0.238856f,
     -0.809017f, -0.309017f,  0.500000f,
     -0.688191f, -0.587785f,  0.425325f,
     -0.681718f, -0.147621f,  0.716567f,
     -0.442863f, -0.238856f,  0.864188f,
     -0.587785f, -0.425325f,  0.688191f,
     -0.309017f, -0.500000f,  0.809017f,
     -0.147621f, -0.716567f,  0.681718f,
     -0.425325f, -0.688191f,  0.587785f,
     -0.162460f, -0.262866f,  0.951056f,
      0.442863f, -0.238856f,  0.864188f,
      0.162460f, -0.262866f,  0.951056f,
      0.309017f, -0.500000f,  0.809017f,
      0.147621f, -0.716567f,  0.681718f,
      0.000000f, -0.525731f,  0.850651f,
      0.425325f, -0.688191f,  0.587785f,
      0.587785f, -0.425325f,  0.688191f,
      0.688191f, -0.587785f,  0.425325f,
     -0.955423f,  0.295242f,  0.000000f,
     -0.951056f,  0.162460f,  0.262866f,
     -1.000000f,  0.000000f,  0.000000f,
     -0.850651f,  0.000000f,  0.525731f,
     -0.955423f, -0.295242f,  0.000000f,
     -0.951056f, -0.162460f,  0.262866f,
     -0.864188f,  0.442863f, -0.238856f,
     -0.951056f,  0.162460f, -0.262866f,
     -0.809017f,  0.309017f, -0.500000f,
     -0.864188f, -0.442863f, -0.238856f,
     -0.951056f, -0.162460f, -0.262866f,
     -0.809017f, -0.309017f, -0.500000f,
     -0.681718f,  0.147621f, -0.716567f,
     -0.681718f, -0.147621f, -0.716567f,
     -0.850651f,  0.000000f, -0.525731f,
     -0.688191f,  0.587785f, -0.425325f,
     -0.587785f,  0.425325f, -0.688191f,
     -0.425325f,  0.688191f, -0.587785f,
     -0.425325f, -0.688191f, -0.587785f,
     -0.587785f, -0.425325f, -0.688191f,
     -0.688191f, -0.587785f, -0.425325f};

//Returns whether the system is little-endian
bool littleEndian() {
    //The short value 1 has bytes (1, 0) in little-endian and (0, 1) in
    //big-endian
    short s = 1;
    return (((char*)&s)[0]) == 1;
}

//Converts a two-character array to an unsigned short, using little-endian
//form
unsigned short toUShort(const char* bytes) {
    return (unsigned short)(((unsigned char)bytes[1] << 8) |
                            (unsigned char)bytes[0]);
}

//Converts a four-character array to a float, using little-endian form
float toFloat(const char* bytes) {
    float f;
    if (littleEndian()) {
        ((char*)&f)[0] = bytes[0];
        ((char*)&f)[1] = bytes[1];
        ((char*)&f)[2] = bytes[2];
        ((char*)&f)[3] = bytes[3];
    }
    else {
        ((char*)&f)[0] = bytes[3];
        ((char*)&f)[1] = bytes[2];
        ((char*)&f)[2] = bytes[1];
        ((char*)&f)[3] = bytes[0];
    }
    return f;
}

//Reads the next two bytes as an unsigned short, using little-endian form
unsigned short readUShort(ifstream &input) {
    char buffer[2];
    input.read(buffer, 2);
    return toUShort(buffer);
}

//Reads the next four bytes as a float, using little-endian form
float readFloat(ifstream &input) {
    char buffer[4];
    input.read(buffer, 4);
    return toFloat(buffer);
}

//Calls readFloat three times and returns the results as a Vec3f object
Vec3f readVec3f(ifstream &input) {
    float x = readFloat(input);
    float y = readFloat(input);
    float z = readFloat(input);
    return Vec3f(x, y, z);
}

//Makes the image into a texture, and returns the id of the texture
GLuint loadTexture(Image *image) {
    GLuint textureId;
    glGenTextures(1, &textureId);
    glBindTexture(GL_TEXTURE_2D, textureId);
    glTexImage2D(GL_TEXTURE_2D,
                 0,
                 GL_RGB,
                 image->width, image->height,
                 0,
                 GL_RGB,
                 GL_UNSIGNED_BYTE,
                 image->pixels);
    return textureId;
}
}

MD2Model::~MD2Model() {
if (frames != NULL) {
    for(int i = 0; i < numFrames; i++) {
        delete[] frames[i].vertices;
    }
    delete[] frames;
}

if (texCoords != NULL) {
    delete[] texCoords;
}
if (triangles != NULL) {
    delete[] triangles;
}
}

MD2Model::MD2Model() {
frames = NULL;
texCoords = NULL;
triangles = NULL;
time = 0;
}

//Loads the MD2 model

MD2Model* MD2Model::load(const char* filename) {
ifstream input;
input.open(filename, istream::binary);

char buffer[64];
input.read(buffer, 4); //Should be "IPD2", if this is an MD2 file
if (buffer[0] != 'I' || buffer[1] != 'D' ||
    buffer[2] != 'P' || buffer[3] != '2') {
    return NULL;
}
if (readInt(input) != 8) { //The version number
    return NULL;
}

int textureWidth = readInt(input);   //The width of the textures
int textureHeight = readInt(input);  //The height of the textures
readInt(input);                      //The number of bytes per frame
int numTextures = readInt(input);    //The number of textures
if (numTextures != 1) {
    return NULL;
}
int numVertices = readInt(input);    //The number of vertices
int numTexCoords = readInt(input);   //The number of texture coordinates
int numTriangles = readInt(input);   //The number of triangles
readInt(input);                      //The number of OpenGL commands
int numFrames = readInt(input);      //The number of frames

//Offsets (number of bytes after the beginning of the file to the beginning
//of where certain data appear)
int textureOffset = readInt(input);  //The offset to the textures
int texCoordOffset = readInt(input); //The offset to the texture coordinates
int triangleOffset = readInt(input); //The offset to the triangles
int frameOffset = readInt(input);    //The offset to the frames
readInt(input);                      //The offset to the OpenGL commands
readInt(input);                      //The offset to the end of the file

//Load the texture
input.seekg(textureOffset, ios_base::beg);
input.read(buffer, 64);
if (strlen(buffer) < 5 ||
    strcmp(buffer + strlen(buffer) - 4, ".bmp") != 0) {
    return NULL;
}
Image* image = loadBMP(buffer);
GLuint textureId = loadTexture(image);
delete image;
MD2Model* model = new MD2Model();
model->textureId = textureId;

//Load the texture coordinates
input.seekg(texCoordOffset, ios_base::beg);
model->texCoords = new MD2TexCoord[numTexCoords];
for(int i = 0; i < numTexCoords; i++) {
    MD2TexCoord* texCoord = model->texCoords + i;
    texCoord->texCoordX = (float)readShort(input) / textureWidth;
    texCoord->texCoordY = 1 - (float)readShort(input) / textureHeight;
}

//Load the triangles
input.seekg(triangleOffset, ios_base::beg);
model->triangles = new MD2Triangle[numTriangles];
model->numTriangles = numTriangles;
for(int i = 0; i < numTriangles; i++) {
    MD2Triangle* triangle = model->triangles + i;
    for(int j = 0; j < 3; j++) {
        triangle->vertices[j] = readUShort(input);
    }
    for(int j = 0; j < 3; j++) {
        triangle->texCoords[j] = readUShort(input);
    }
}

//Load the frames
input.seekg(frameOffset, ios_base::beg);
model->frames = new MD2Frame[numFrames];
model->numFrames = numFrames;
for(int i = 0; i < numFrames; i++) {
    MD2Frame* frame = model->frames + i;
    frame->vertices = new MD2Vertex[numVertices];
    Vec3f scale = readVec3f(input);
    Vec3f translation = readVec3f(input);
    input.read(frame->name, 16);

    for(int j = 0; j < numVertices; j++) {
        MD2Vertex* vertex = frame->vertices + j;
        input.read(buffer, 3);
        Vec3f v((unsigned char)buffer[0],
                (unsigned char)buffer[1],
                (unsigned char)buffer[2]);
        vertex->pos = translation + Vec3f(scale[0] * v[0],
                                          scale[1] * v[1],
                                          scale[2] * v[2]);
        input.read(buffer, 1);
        int normalIndex = (int)((unsigned char)buffer[0]);
        vertex->normal = Vec3f(NORMALS[3 * normalIndex],
                               NORMALS[3 * normalIndex + 1],
                               NORMALS[3 * normalIndex + 2]);
    }
}

model->startFrame = 0;
model->endFrame = numFrames - 1;
return model;

}

void MD2Model::setAnimation(const char* name) {
/* The names of frames normally begin with the name of the animation in
 * which they are, e.g. "run", and are followed by a non-alphabetical
 * character.  Normally, they indicate their frame number in the animation,
 * e.g. "run_1", "run_2", etc.
 */
bool found = false;
for(int i = 0; i < numFrames; i++) {
    MD2Frame* frame = frames + i;
    if (strlen(frame->name) > strlen(name) &&
        strncmp(frame->name, name, strlen(name)) == 0 &&
        !isalpha(frame->name[strlen(name)])) {
        if (!found) {
            found = true;
            startFrame = i;
        }
        else {
            endFrame = i;
        }
    }
    else if (found) {
        break;
    }
}

}

void MD2Model::advance(float dt) {
if (dt < 0) {
    return;
}

time += dt;
if (time < 1000000000) {
    time -= (int)time;
}
else {
    time = 0;
}
}

void MD2Model::draw() {
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, textureId);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

//Figure out the two frames between which we are interpolating
int frameIndex1 = (int)(time * (endFrame - startFrame + 1)) + startFrame;
if (frameIndex1 > endFrame) {
    frameIndex1 = startFrame;
}

int frameIndex2;
if (frameIndex1 < endFrame) {
    frameIndex2 = frameIndex1 + 1;
}
else {
    frameIndex2 = startFrame;
}

MD2Frame* frame1 = frames + frameIndex1;
MD2Frame* frame2 = frames + frameIndex2;

//Figure out the fraction that we are between the two frames
float frac =
    (time - (float)(frameIndex1 - startFrame) /
     (float)(endFrame - startFrame + 1)) * (endFrame - startFrame + 1);

//Draw the model as an interpolation between the two frames
glBegin(GL_TRIANGLES);
for(int i = 0; i < numTriangles; i++) {
    MD2Triangle* triangle = triangles + i;
    for(int j = 0; j < 3; j++) {
        MD2Vertex* v1 = frame1->vertices + triangle->vertices[j];
        MD2Vertex* v2 = frame2->vertices + triangle->vertices[j];
        Vec3f pos = v1->pos * (1 - frac) + v2->pos * frac;
        Vec3f normal = v1->normal * (1 - frac) + v2->normal * frac;
        if (normal[0] == 0 && normal[1] == 0 && normal[2] == 0) {
            normal = Vec3f(0, 0, 1);
        }
        glNormal3f(normal[0], normal[1], normal[2]);

        MD2TexCoord* texCoord = texCoords + triangle->texCoords[j];
        glTexCoord2f(texCoord->texCoordX, texCoord->texCoordY);
        glVertex3f(pos[0], pos[1], pos[2]);
    }
}
glEnd();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:47:55.763

> 当我注释掉 glColor3f(0.0f, 1.0f, 0.0f); 声明，景观将获得与动画从位图纹理获得的颜色相同的颜色。但是当我包含 glColor3f(0.0f, 1.0f, 0.0f); 声明，动画将获得与风景相同的颜色。我想让动画和风景有不同的颜色。

`glColor3f(0.0f, 1.0f, 0.0f);`在景观之前和模型之前调用`glColor3f(1.0f, 1.0f, 1.0f)`；staet 是从上一次调用中保存的，导致输出错误。

另请注意，`glColor*`函数已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:47:20.797

我不知道这是否可行，但尝试`glColor3f(1.0f, 1.0f, 1.0f);`在你的 for 循环之后调用，就在你的`glutSwapBuffers();`. 它应该消除您之前调用`glColor3f(0.0f, 1.0f, 0.0f);`.

# database - 当我设计用于数据挖掘的数据库模式时，我应该注意什么？

> ID：14456535
> 
> 赞同：2
> 
> 时间：2013-01-22T10:35:05.150
> 
> 标签：database, database-design, machine-learning, data-mining

我要设计一个数据库。数据库中的数据将在以后用于数据挖掘。我想知道是否有更好的实践或方法来设计数据库，以便它对数据挖掘使用有用。特别是当我为数据挖掘设计数据库模式时应该注意什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:50:32.340

您可以通过一些介绍性教程开始设计数据库，例如[数据挖掘](http://dataminingtools.net/wiki/introduction_to_data_mining.php)或[空间数据和文本挖掘](http://ptucse.loremate.com/dw/node/6)简介。您将看到大多数方法都集中在 SQL 关系数据库上。在创建模型时，请参阅[构建模型](http://docs.oracle.com/cd/B28359_01/datamine.111/b28131/models_building.htm)。

# c# - 日期时间转换异常

> ID：14456536
> 
> 赞同：1
> 
> 时间：2013-01-22T10:35:11.670
> 
> 标签：c#, asp.net, datetime

我正在尝试格式化日期时间列表。一个日期的格式与我提供的相同，但因素不到位。该行代码如下所示。有人可以告诉我如何跳过下一行的错误吗？

```
Convert.ToDateTime("22-01-2013 00:00:00").ToString("yyyy-MM-dd"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T10:37:33.730

我会避免使用`Convert.ToDateTime`开始。我建议使用[`DateTime.TryParse`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)or (preferred) [`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)。这两个都将返回一个值，指示转换是否成功，因此您无需开始捕获异常即可跳过错误数据。例如：

```
DateTime parsed;
if (DateTime.TryParse(text, out parsed))
{
    string reformatted = parsed.ToString("yyyy-MM-dd");
    // Use reformatted
}
else
{
    // Log error, perhaps?
} 
```

如果您有多种可能的格式，您应该考虑[使用`TryParseExact`允许您在单个调用中指定多种格式](http://msdn.microsoft.com/en-us/library/h9b85w22.aspx)的重载。

除了*格式*，您还应该考虑要使用的*文化。*在上面的代码（和您的代码）中，它将使用执行线程的文化。这总是你想要的吗？文化可以影响各种各样的事情——通常如果你指定一个自定义格式，你想使用不变的文化。否则，您最终可能会意外使用非公历，例如...

编辑：如果您的输入*始终*是 format `dd-MM-yyyy`，那么您可能应该使用：

```
DateTime parsed;
if (DateTime.TryParseExact(text, "dd-MM-yyyy", CultureInfo.InvariantCulture,
                           DateTimeStyles.Default, out parsed))
{
    string reformatted = parsed.ToString(CultureInfo.InvariantCulture,
                                         "yyyy-MM-dd");
    // Use reformatted
}
else
{
    // Log error, perhaps?
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:36:45.380

而不是`Convert.ToDateTime`使用`DateTime.Parse`或`DateTime.ParseExact`

[`ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)使您可以更好地控制格式，例如：

```
DateTime.ParseExact("22-01-2013 00:00:00","dd-MM-yyyy HH:mm:ss",CultureInfo.InvariantCulture).ToString("yyyy-MM-dd"); 
```

还有一个`TryParseExact`变体，它允许您优雅地处理解析错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:37:09.383

尝试使用[`DateTime.ParseExact()`](http://msdn.microsoft.com/en-us/library/7ee1y0t7.aspx)方法代替。

> 将日期和时间的指定字符串表示形式转换为其等效的 DateTime。

```
public static void Main(string[] args)
{

    Console.WriteLine(DateTime.ParseExact("22-01-2013 00:00:00", "dd-MM-yyyy HH:mm:ss", CultureInfo.CurrentCulture).ToString("yyyy-MM-dd"));

} 
```

这是一个[`DEMO`](http://ideone.com/eE71vO).

另请查看[`Coding Best Practices Using DateTime in the .NET Framework`](http://msdn.microsoft.com/en-us/library/ms973825.aspx)我认为每个 .NET 开发人员都应该阅读的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T10:40:46.387

尝试：

```
DateTime.ParseExact("22-01-2013 00:00:00","dd-MM-yyyy HH:mm:ss",CultureInfo.InvariantCulture).ToString("yyyy-MM-dd"); 
```

这样您就可以指定日期字符串的确切格式。

# android - 使用 onDraw 自定义背景的 EditText

> ID：14456537
> 
> 赞同：1
> 
> 时间：2013-01-22T10:35:14.603
> 
> 标签：android, android-edittext

我正在尝试使用无法使用可绘制 XML 绘制的自定义背景的自定义 EditText

这是我现在拥有的

```
public class EMEditText extends EditText {
    private Bitmap framedBitmap;

    public EMEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onDraw(Canvas canvas) {
        if(framedBitmap == null) {
            createDrawable(getWidth(), getHeight());
        }

        Paint paint = new Paint();
        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
        // canvas.drawBitmap(framedBitmap, 0, 0, paint);
    }

    private void createDrawable(int width, int height) {
        // create a new bitmap of given size
        Bitmap start = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(start);

        RectF outerRect = new RectF(0, 0, width, height);

        Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setColor(Color.WHITE);
        // paint.setStrokeWidth(1);
        // paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_OUT));
        canvas.drawRoundRect(outerRect, height / 2, height / 2, paint);
        framedBitmap = start;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:45:25.420

您的代码中可能存在的问题是您正在方法中创建自己的`Canvas`对象，`createDrawable()`尽管`onDraw()`方法为您提供了`Canvas`您应该用于绘图的权利。

所以你可能想要的是将`createDrawable(int width, int height)`方法更改为`createDrawable(int width, int height, Canvas c)`. 您的代码应如下所示：

```
@Override
protected void onDraw(Canvas canvas) {
    if(framedBitmap == null) {
        createDrawable(getWidth(), getHeight(), canvas);
    }

    Paint paint = new Paint();
    paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
    // canvas.drawBitmap(framedBitmap, 0, 0, paint);
}

private void createDrawable(int width, int height, Canvas c) {
    // create a new bitmap of given size
    Bitmap start = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    c.setBitmap(start);

    RectF outerRect = new RectF(0, 0, width, height);

    Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
    paint.setColor(Color.WHITE);
    // paint.setStrokeWidth(1);
    // paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_OUT));
    c.drawRoundRect(outerRect, height / 2, height / 2, paint);
    framedBitmap = start;
} 
```

如您所见，我还更改了您`createDrawable()`方法的主体，以便它使用`Canvas`from`onDraw()`并将其设置`Bitmap`为您创建的方法。

# workflow - BPM 引擎的业务仪表板

> ID：14456539
> 
> 赞同：1
> 
> 时间：2013-01-22T10:35:26.827
> 
> 标签：workflow, visualization, dashboard, business-process-management, kpi

要在 BPM 产品中进行选择，我们的关键要求之一是业务级别的仪表板，它显示了执行级别的 KPI，例如流程使用、延迟、成本（基于流程步骤的成本）、花费的时间、人工流程参与者的有效性，等等。

到目前为止，我的研究还没有产生现成的仪表板——但也许我错过了一个产品。因此，有两个问题：

1.  市场上是否有现成的业务级仪表板（作为插件，或作为现有 BPM 套件的固定部分？）

2.  是否有任何开发人员级别的仪表板可以“减少”或配置为仅显示业务级别的详细信息？

3.  如果必须定制这样的仪表板，哪些 BPM 套件会带来最大量的所需功能？

4.  如果必须定制这样的仪表板，哪些框架/组件/应用程序可以并且应该被重复使用，而不是从头开始编写？

非常感谢！

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:50:10.063

BonitaSoft Teamwork Edition 与 BIRT Reporting 集成了 gteat

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:07:12.353

Web 和 Flo 的 Kontinuum Workflow / BPM Suite 有一个内置仪表板，可能能够满足您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T00:19:06.633

在 IBM BPM 8.0（和最新版本）中，您可以找到两个内置仪表板，一个是流程性能仪表板，它将指示实例数量、流程平均时间、任务平均时间、瓶颈。以及团队绩效仪表板，将指示逾期任务等。

有点晚了，以防万一有人还在搜索

# java - JPA：使用字符串字段，但修改它们并保存为字节数组

> ID：14456543
> 
> 赞同：3
> 
> 时间：2013-01-22T10:35:30.920
> 
> 标签：java, jpa

我们在应用程序中使用 JSON 字符串来存储大量配置数据。现在我们想将它作为 BLOB 保存到数据库中。JSON 字符串将被转换为二进制表示 ( [BSON](http://bsonspec.org/#/specification) )，然后我们要存储它。

实体：

```
@Entity
@Table(name="TBL_CONFIG")
public class ConfigEntity {

    [...]

    @Column(name = "CONFIG")
    @JSON
    private String config;

    [...]
} 
```

全局实体监听器：

```
public class JsonBinaryConversionListener {

    @PrePersist
    public void process() {
        // Check @JSON fields and for every field
        [...]
       field.set(objectConversion.toBson(field.get()));
        [...]
        // The field is String, the conversion gives us a byte array
    }

} 
```

CONFIG 列设置为 BLOB。只使用 @Lob 注释是行不通的，因为我们想手动更改值。

有没有办法通过 JPA 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:00:35.300

如果您使用的是 EclipseLink，您可以使用转换器，

见， [http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_converter.htm#CHDEHJEB](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_converter.htm#CHDEHJEB)

否则，您可以使用属性访问（get/set）方法来转换数据，

[http://en.wikibooks.org/wiki/Java_Persistence/Basic_Attributes#Conversion](http://en.wikibooks.org/wiki/Java_Persistence/Basic_Attributes#Conversion)

JPA 2.1 草案也提出了对转换器的支持。

# java - 如何对传入的 Jersey MultiPart 请求进行单元测试处理

> ID：14456547
> 
> 赞同：9
> 
> 时间：2013-01-22T10:35:44.103
> 
> 标签：java, rest, testing, jersey, multipart

我们有一个**REST**服务，它接受包含该 hold的`MultiPart` **POST**请求。在 REST 服务中，可能会根据提供的数据创建一个**文件。**`BodyParts``InputStream`

 **## 任务

我们想要对基于其`MultiPart`输入执行文件操作的类进行单元测试。**注意**：我不想使用 Jersey-Test！Grizzly 不会加载我们需要将 DAO 和 fileHandler 服务注入到我们的 REST 服务类中的 spring 应用程序上下文。我们明确想要测试我们的 fileHandler 服务如何处理多部分数据。

然而，问题在于`MultiPart`从**REST 客户端发出的数据与****REST 服务器**接收的数据不同，因为球衣可能会对数据进行流式传输或其他操作。尝试测试（见下文）以下设置将导致

```
IllegalArgumentException [B cannot be cast to com.sun.jersey.multipart.BodyPartEntity 
```

## REST 客户端 - 发送 MultiPart

（只是片段，我省略了明显的东西）：

```
 byte[] bytes = FileManager.readImageFileToArray(completePath, fileType);

    MultiPart multiPart = new MultiPart().
            bodyPart(new BodyPart(bytes, MediaType.APPLICATION_OCTET_STREAM_TYPE)).
            bodyPart(new BodyPart(fileName, MediaType.APPLICATION_XML_TYPE)).
            bodyPart(new BodyPart(senderId, MediaType.APPLICATION_XML_TYPE));

    ClientConfig cc = new DefaultClientConfig();
    cc.getClasses().add(MultiPartWriter.class);
    Client client = Client.create(cc);
    WebResource webResource = client.resource(requestUrl);
    Builder builder = webResource.type(MediaType.MULTIPART_FORM_DATA_TYPE);
    builder = addHeaderParams(builder, headerParams);

    ClientResponse response = builder.post(ClientResponse.class, multiPart); 
```

## 服务器端 - 接收 MultiPart

休息：

```
@POST
@Consumes(MediaType.MULTIPART_FORM_DATA)
@Produces(MediaType.APPLICATION_JSON)
@Transactional
public Response create(MultiPart multiPart) {

    try {
            multiPartReader.saveFile(multiPart); 
```

服务器端 MultiPartReader 从多部分保存文件

```
public class MultiPartReader {

    public void saveFile(MultiPart multiPart) throws IOException {

        BodyPartEntity bpe = (BodyPartEntity) multiPart.getBodyParts().get(0).getEntity();
        InputStream inputStream = bpe.getInputStream();

        // ...

        BufferedImage bi = ImageIO.read(inputStream);
        String fileName = getFileNameFromMultiPart(multiPart);

        File file = new File(filename);

        if (file.isDirectory()) {
            ImageIO.write(bi, formatName, file);
        } else {
            file.mkdirs();
            ImageIO.write(bi, formatName, file);
        }

        bpe.close();
    } 
```

## 测试 - 单独处理传入的 MultiPart

现在我想测试 MultiPartReader：

```
@Test
public void saveFile_should_Create_file() throws IOException {
    byte[] bytes = IOUtils.toByteArray(this.getClass().getResourceAsStream(fileResource));

    MultiPart multiPart = new MultiPart().
            bodyPart(new BodyPart(bytes, MediaType.APPLICATION_OCTET_STREAM_TYPE)).
            bodyPart(new BodyPart(fileName, MediaType.APPLICATION_XML_TYPE)).
            bodyPart(new BodyPart(senderId, MediaType.APPLICATION_XML_TYPE));

    multiPartReader.saveFile(multiPart);

    file = new File(fileName);
    Assert.assertNotNull(file);
    Assert.assertTrue(file.getTotalSpace() > 0);
    file.delete();
} 
```

但是，就像我说的，我得到了一个

```
IllegalArgumentException [B cannot be cast to com.sun.jersey.multipart.BodyPartEntity 
```

在

```
 BodyPartEntity bpe = (BodyPartEntity) multiPart.getBodyParts().get(0).getEntity(); 
```

**那么我可以做些什么来模拟 jersey 处理的发送/接收，以便我的测试将获得与部署在服务器上并由 REST 客户端请求的 REST 服务相同的数据？**

## 编辑

使用

```
BodyPartEntity bpe = multiPart.getBodyParts().get(0).getEntityAs(BodyPartEntity.class); 
```

会抛出一个

```
IllegalStateException: Entity instance does not contain the unconverted content 
```

我认为，在调用我的 MultiPartReader 之前，必须以某种方式转换测试生成的 MultiPart。

球衣中必须有一些方法，我可以调用它来进行转换..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:36:17.430

查看我看到的[jersey-multipart](http://jersey.java.net/nonav/apidocs/1.5/contribs/jersey-multipart/index.html?com/sun/jersey/multipart/BodyPart.html)文档：

“目前无法提前知道应用程序希望为每个单独的正文部分使用哪个 Java 类，因此无法选择合适的 Provider。目前，返回每个正文部分的未解析内容（作为字节数组) 在返回的 BodyPart} 实例的实体属性中，应用程序可以根据该正文部分中包含的标头决定需要哪些进一步的步骤。最简单的技术是检查接收到的 BodyPart，然后调用 getEntityAs() 方法一旦你知道你更喜欢哪个实现类。”

看来您需要遵循该建议。检查服务器端 MultiPartReader 代码中返回的字节数组：

```
multiPart.getBodyParts().get(0).getEntity(); 
```

...并在 BodyPart 上调用 getEntityAs()。**

# c - 将 apr_time_t 转换为不同的 int 类型

> ID：14456551
> 
> 赞同：0
> 
> 时间：2013-01-22T10:36:06.297
> 
> 标签：c, casting, apr

```
gcc 4.7.2
c89
APR 1.4 
```

你好，

我正在以 32 位模式编译我的程序，即`-m32`我正在链接的一些库使用 32 位库。

我有以下结构：

```
struct tag_channel {
    apr_int32_t id;
    char *name;
}; 
```

对于 id 我想要一个随机数，所以我使用 APR：

```
apr_time_t time_secs = apr_time_sec(apr_time_now()); 
```

我想知道关于强制转换，因为 apr_time_sec 返回一个 apr_time_t 类型，它是：

```
typedef apr_int64_t 
```

我可以输入以下内容：

```
channel->id = (apr_int32_t)time_secs; 
```

但是，我担心因铸造而失去价值。

以下是64位，所以不确定这是否可行。

```
#define APR_TIME_T_FMT   APR_INT64_T_FMT 
```

我不想将 id 的通道结构更改为，`apr_time_t`因为为 ID 值设置时间值并没有任何意义。

哪个是最好的投射方式？

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:05:20.777

考虑使用`apr_time_usec`所需的随机数。apr_time_usec 似乎“更随机”，因为它返回 usecond 部分（整个时间是`sec + APR_USEC_PER_SEC * usec`）并且根据定义保证在内部`[0 .. 1000000]`，因此您不必担心演员表会丢失精度。

如果使用秒而不是 useconds 是至关重要的，那么您可以将随机数计算为

```
channel->id = (apr_int32_t) (apr_time_sec(apr_time_now()) % INT32_MAX) 
```

（不要忘记包括`limits.h`）以将其放入 32 位音调中，然后通过截断更聪明一些。

# java - 应用程序在套接字上过于频繁地执行读/写操作时没有响应

> ID：14456552
> 
> 赞同：0
> 
> 时间：2013-01-22T10:36:08.017
> 
> 标签：java, android, sockets

在我的应用程序中，我有 12 位字节数组，用于读取状态。写完这个数组后，我得到了不同按钮的状态。基于此响应，我将按钮设置为 ON|OFF。我正在重复执行此任务。如果我将此间隔时间设置得太少，即 100 毫秒并且过于频繁地按下这些按钮，那么我的应用程序将停止响应。

这是代码片段。

```
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity);         
    getSharedSettings();

    fanDimmer1=(ToggleButton)findViewById(R.id.button_fan1);
    fanDimmer2=(ToggleButton)findViewById(R.id.button_fan2);
    dimmerLight1=(ToggleButton)findViewById(R.id.button_light1);
    dimmerLight2=(ToggleButton)findViewById(R.id.button_light2);

    fanDimmer1.setOnClickListener(this);
    fanDimmer2.setOnClickListener(this);
    dimmerLight1.setOnClickListener(this);
    dimmerLight2.setOnClickListener(this);

    if(ip.equals("") || port.equals(""))
    {
        new AlertDialog.Builder(MainActivity.this)
        .setTitle("Warning !")
        .setMessage("Please set IP and PORT first")
        .setIcon(android.R.drawable.ic_dialog_alert)
        .setNeutralButton("ok", null)
        .show();
    }
    else
    {
        new Thread(new Runnable() 
        {   
            @Override
            public void run()
            {
                Log.v(TAG, "openconnection");
                openConnection();
            }
        }).start();
        m_handler = new Handler();
        startRepeatingTask();

    }

}

public void openConnection()
{
    // TODO Auto-generated method stub
    try 
    {
        s = new Socket(ip, Integer.parseInt(port));
        i = s.getInputStream();
        iD = new DataInputStream(i);
        o = s.getOutputStream();
        oD = new DataOutputStream(o);
        Log.v(TAG, "openconnection 2");

    }
    catch (UnknownHostException e) {
        // TODO: handle exception
        Log.v("UnknowHostException :::::", "In Catch Block");
        e.printStackTrace();
    }
    catch (IOException e) {
        // TODO: handle exception
        Log.v("IOException :::::", "In Catch Block");
        e.printStackTrace();
    }
}

Runnable m_statusChecker = new Runnable() 
{
    @Override
    public void run() 
    {
        updateStatus();
        m_handler.postDelayed(m_statusChecker,100);
    }

    private void updateStatus() 
    {
        // TODO Auto-generated method stub
        Log.v("test", "1");
        try {
            byte[] data1 = new byte[1024], packet1 = 
                { 
                    (byte) 0x00,(byte) 0x00,(byte) 0x00, 
                    (byte) 0x00,(byte) 0x00,(byte) 0x06, 
                    (byte) 0x01,(byte) 0x01,(byte) 0x00,
                    (byte) 0x00,(byte) 0x00,(byte) 0x19
                };

            o.write(packet1);
            i.read(data1, 0, 1024);

            byte_to_hex = ConversionMethods.bytesToHex(data1).substring(18, 26);
            char[] arr = byte_to_hex.toCharArray();
            for (int i = 0; i < arr.length - 1; i += 2) 
            {
                char temp = arr[i];
                arr[i] = arr[i + 1];
                arr[i + 1] = temp;
            }

            swapped_result=new String(arr);
            result = ConversionMethods.hexStringToNBitBinary(swapped_result, 32);

            int counter = 0;
            for( int i=0; i<result.length(); i++ ) 
            {
                if( result.charAt(i) == '1' )
                {
                    counter++;        
                }  
            }
            status=Integer.toString(counter);
            txt_status.setText(status);
            Log.v(TAG, "status is ::"+status);

            char[] c=result.toCharArray();
            int count=0;
            for (int i=0;i<result.length();i++)
            {
                count++;
                char j=c[i];
                //Log.v(TAG, count+"::"+j);
                if(count==1)
                    toggleButton=dimmerLight1;
                else if(count==2)
                    toggleButton=fanDimmer2;
                else if(count==3)
                    toggleButton=fanDimmer1;
                else if(count==4)
                    Log.v(TAG, "Count 4 is 0");

                if(j=='1')
                    toggleButton.setChecked(true);
                else
                    toggleButton.setChecked(false); 
            }

        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
};

void startRepeatingTask() {
    m_statusChecker.run();
}

void stopRepeatingTask() {
    m_handler.removeCallbacks(m_statusChecker);
} 
```

在按钮点击我这样做：

```
@Override
public void onClick(View v) 
{

    if(v.equals(fanDimmer1))
    {
        if (fanDimmer1.isChecked()) 
        {
            Toast.makeText(MainActivity.this, "Fan 1 is ON", Toast.LENGTH_SHORT).show();
            setByteArray((byte) 0x01, (byte) 0xff);
        } else 
        {
            Toast.makeText(MainActivity.this, "Fan 1 is OFF", Toast.LENGTH_SHORT).show();
            setByteArray((byte) 0x01, (byte) 0x00);
        }
    }

} 
```

这是[setByteArray()](http://paste.ubuntu.com/1557565/)方法，我有 24 个这种类型的按钮。

任何意见和建议将不胜感激。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:19:22.940

`startRepeatingTask()`你从你的主线程调用：

```
void startRepeatingTask() {
   m_statusChecker.run();
} 
```

这意味着您的 statusChecker 也将在主线程中运行。

*   首先要做的是更新您的 updateStatus 方法的代码，并使用`mHandler`仅将 ui-update 代码发布到主 UI 线程

*   接下来，您必须在另一个线程中运行 statusChecker

为此，您有（至少）两个选择：

1.  【复杂的方式】自己做线程管理，在你的startRepeatingTask中写这样的东西

    `void startRepeatingTask() { new Thread(m_statusChecker).start(); }`

    调整停止方法（即使用监视器、无限循环和睡眠）

2.  [聪明的方法] 看看Android API 中的[Timer](http://developer.android.com/reference/java/util/Timer.html)和[TimerTask](http://developer.android.com/reference/java/util/TimerTask.html)（和[this](https://stackoverflow.com/questions/2161750/android-controlling-a-task-with-timer-and-timertask)），并使用它们来实现你需要的东西。

编辑

关注这段代码：

```
for (int i=0;i<result.length();i++)
        {
            count++;
            char j=c[i];
            //Log.v(TAG, count+"::"+j);
            if(count==1)
                toggleButton=dimmerLight1;
            else if(count==2)
                toggleButton=fanDimmer2;
            else if(count==3)
                toggleButton=fanDimmer1;
            else if(count==4)
                Log.v(TAG, "Count 4 is 0");

            if(j=='1')
                toggleButton.setChecked(true);
            else
                toggleButton.setChecked(false); 
        } 
```

这个循环的效果将是：

*   迭代 0（如果有）：dimmerLight1 将被选中或取消选中
*   迭代 1（如果有）：fanDimmer2 将被选中或取消选中
*   迭代 2（如果有）：fanDimmer1 将被选中或取消选中
*   迭代 3（如果有）：fanDimmer1 将被选中或取消选中
*   迭代 4（如果有）：fanDimmer1 将被选中或取消选中
*   迭代 5（如果有）：fanDimmer1 将被选中或取消选中
*   ...（fanDimmer1 将被选中或取消选中，直到循环结束）

我很确定这不是你需要的。（除非 result.size() 总是 3，但在任何其他情况下：这段代码会产生奇怪的东西）

你可以这样做：

```
//assuming buttons is a ToggleButton[32] populated with all your buttons in the correct order
for (int i=0;i<result.length();i++)
    {
        buttons[i].setChecked(c[i]=='1'); 
    } 
```

# linux - 为什么 Linux 文件权限如此原始？

> ID：14456564
> 
> 赞同：0
> 
> 时间：2013-01-22T10:36:26.173
> 
> 标签：linux, file-permissions

为什么 Linux 文件权限仍然如此原始，而且这可能会改变？

每个文件/目录只能有一个所有者和组。这似乎使以下事情难以实施：

如何使文件只读而不可删除，但仍授予该用户写入其目录的权限？

您如何将目录限制为仅限某些用户，而不必为所需的每个可能的用户组合创建一个组？并且这样做无论如何都没有用，因为创建文件的任何人都没有继承它的权限，因此每个用户都必须明确更改他们制作的每个文件的权限，以便其他人可以编辑它。

我发现自己必须修改我的程序以将文件的权限设置为保存文件的目录，以避免用户感到沮丧。

您如何在非超级用户的桌面系统上处理这些事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:44:10.607

您可以使用 ACL 对文件和目录权限进行高级控制。

一个例子（在这种情况下是 Archlinux）在这里：[https ://wiki.archlinux.org/index.php/Access_Control_Lists](https://wiki.archlinux.org/index.php/Access_Control_Lists)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:50:32.440

您是否尝试过使用访问控制列表？请参阅[setfacl](http://linux.about.com/library/cmd/blcmdl1_setfacl.htm)命令以获取概述。

[linuxquestions.org](http://www.linuxquestions.org/questions/linux-security-4/how-to-setup-file-permissions-for-multiple-groups-users-that-use-windows-and-linux-841962/)讨论了继承不正确权限的问题。以下是建议的解决方案的摘要。

```
#mkdir tech
#chown root:tech tech/
#chmod g+s tech/
#chmod 0750 tech/
#setfacl -d -m g:techAdmin:rwx tech/
#setfacl -m group:techadmin:rwx tech/ 
```

以上将创建一个`tech`属于该`tech`组的新目录。用户组`techAdmin`将有权读取/写入/创建，`tech`组用户将拥有读取权限。

# php - 如何使用 php 从字符串中跳过（不允许）图像和视频标签

> ID：14456565
> 
> 赞同：0
> 
> 时间：2013-01-22T10:36:28.673
> 
> 标签：php

我已经使用以下代码从字符串中跳过图像标签，我如何同时跳过图像和视频？

以下代码跳过图像标记。

使用代码：

```
$content = $row['Description'] ;// comes from database table

$content = preg_replace("/<img[^>]+\>/i", " ", $content); 

echo $content; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:41:18.623

在一单内`preg_replace()`（未经测试）

```
$content = preg_replace("/<img[^>]+\>|<video[^>]+\>/i", " ", $content); 
```

替代方案绝对应该有效，但看起来不太好

```
$content = preg_replace("/<img[^>]+\>/i", " ", $content); 
$content = preg_replace("/<video[^>]+\>/i", " ", $content); 
```

**编辑**

也许你也应该禁止`<embed>`，它用于嵌入 .swf 文件。

# python - 如何创建一个wsdl文件以在python中使用soap服务器

> ID：14456570
> 
> 赞同：1
> 
> 时间：2013-01-22T10:36:36.330
> 
> 标签：python, soap, python-2.7, wsdl

> **可能重复：**
> [使用 Python 和 SOAPpy 生成 WSDL](https://stackoverflow.com/questions/273002/generating-a-wsdl-using-python-and-soappy)

如何创建一个简单的 Wsdl 文件以在 python 中使用soap 服务器，然后将其用于soap ui 以测试Web 服务。只是一个简单的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:33:59.487

[https://github.com/arskom/spyne](https://github.com/arskom/spyne) 看看那个。不错的库，有很好的文档，并且能够为肥皂服务生成 wsdl

# java - 在 play 2.0 中发送电子邮件异常

> ID：14456571
> 
> 赞同：4
> 
> 时间：2013-01-22T10:36:36.407
> 
> 标签：java, playframework, playframework-2.0

我正在为一个项目使用 play 2.0，并且我正在尝试向用户发送电子邮件。我使用这个插件 [https://github.com/typesafehub/play-plugins/tree/master/mailer]。

在我的 Build.scala 我添加

```
 "com.typesafe" %% "play-plugins-mailer" % "2.0.4" 
```

并在 conf/play.plugins

```
 1500:com.typesafe.plugin.CommonsMailerPlugin 
```

在我的 conf/application.conf 我有设置

```
 smtp.host=smtp.gmail.com
 smtp.port=25
 smtp.ssl=true
 smtp.tls=false
 smtp.username="test@gmail.com"
 smtp.password="xxxxxxx" 
```

我的控制器动作是

```
 public static Result sendEmail(String recipt, String title, String sender ){
    MailerAPI mail = play.Play.application().plugin(MailerPlugin.class).email();
      mail.setSubject(SUBJECT);
      mail.addRecipient(recipt);
      mail.addFrom(sender);
      String body = views.html.teams.mailBody.render(recipt, title, sender).body();
      mail.sendHtml(body);
      return ok();
 } 
```

我收到以下错误

```
[EmailException: Sending the email to the following server failed : smtp.gmail.com:25] 
```

我做错了什么。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T11:09:17.650

Gmail 的 SMTP 配置不同（在端口 587 上启用了 TLS 进行保护）。

试试这个配置：

```
smtp.host=smtp.gmail.com
smtp.port=587
smtp.ssl=true
smtp.tls=true
smtp.username="test@gmail.com"
smtp.password="xxxxxxx" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T11:07:00.457

刚刚浪费了一个小时，这有效：

```
smtp.user="test@gmail.com"
smtp.password="xxxxxxx" 
```

**smtp.user 不是 smtp.username**

# c# - 将 Mail.dll 与 Microsoft Exchange Imap 版本 4 一起使用

> ID：14456572
> 
> 赞同：0
> 
> 时间：2013-01-22T10:36:38.060
> 
> 标签：c#, .net, exchange-server

我正在使用[mail.dll](http://www.limilabs.com/mail)阅读电子邮件。早些时候，我正在阅读来自 gmail 帐户的电子邮件，并且一切正常。现在我需要将应用程序移动到另一台服务器并从 microsoft exchange 读取邮件。下面是我正在使用的代码

```
using (Imap imap = new Imap())
{
   imap.Connect("server-name", port number);
   imap.Login("username", "password");
   imap.SelectInbox();
   List<long> uids = imap.Search(Flag.Seen);

   if (uids.Count > 0)
   {
       string eml = imap.GetMessageByUID(uids[0]);
       IMail email = new MailBuilder().CreateFromEml(eml);
       imap.GetMessageByUID(uids[0]);
       lbResponse.Text = email.Subject;
   }
    else
    {
       lbResponse.Text = "No mails found";
     }
  imap.Close();
} 
```

我已经使用 telnet 验证了端口和服务器，它是正确的。但是我收到“无法从传输连接中读取数据。连接尝试失败，因为连接方在一段时间后没有正确响应，或者建立连接失败，因为连接的主机没有响应”错误。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:45:20.083

确保在您的 Exchange 服务器上启用了 IMAP：

[http://technet.microsoft.com/en-us/library/bb124489.aspx](http://technet.microsoft.com/en-us/library/bb124489.aspx)

还可以考虑使用：

```
imap.Search(Flag.Seen) 
```

*SearchFlag*在最新版本中已过时：[http ://www.limilabs.com/mail](http://www.limilabs.com/mail)

# java - 上下文：属性占位符不适用于多个文件

> ID：14456577
> 
> 赞同：17
> 
> 时间：2013-01-22T10:36:45.643
> 
> 标签：java, spring, spring-mvc

我有 2 个属性文件。我已经提到了这两个文件`context:property-placeholder`......

```
<context:property-placeholder location="conf/ConfServer.conf,conf/LicenseSettings.properties" /> 
```

我也试过这个

```
<context:property-placeholder location="conf/ConfServer.conf,conf/LicenseSettings.properties" />

<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>conf/LicenseSettings.properties</value>
        </list>
    </property>
   <property name="ignoreUnresolvablePlaceholders" value="true"/>
</bean> 
```

我尝试过的上述两种方法都不起作用。
谁能发现错误并帮助我解决这个问题？
我已经提到过[这个](http://forum.springsource.org/showthread.php?48848-context-property-placeholder-question)，但它对我没有好处。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-22T10:40:21.423

您可以在配置文件中指定多个`context:property-placeholder`标签。`order`您还可以使用该属性指定将首先加载的内容。

```
<context:property-placeholder location="conf/ConfServer.conf" order="1" ignore-unresolvable="true" />
<context:property-placeholder location="conf/LicenseSettings.properties" order="2" ignore-unresolvable="true" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T04:50:39.263

您可以尝试从项目根目录中引用这些属性吗

`conf/ConfServer.conf`

`conf/LicenseSettings.properties`

这些可能无法正确引用。

# css - CSS Font Face，仅在字体不存在时下载

> ID：14456582
> 
> 赞同：9
> 
> 时间：2013-01-22T10:37:12.773
> 
> 标签：css, fonts, font-face

我在我的网站 ( `Segoe UI`) 中包含了自定义字体，但是字体文件大约 1mb，第一次加载需要几秒钟。

我在 Mac 上，OSX 没有附带字体。但是，据我所知，它包含在 Windows 中。

如果客户端上尚不存在该字体，如何使 CSS**仅加载该字体？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T11:00:28.763

使用`local('Segoe UI')`解决了。似乎它从头到尾优先考虑来源。

这是工作代码

```
@font-face {
    font-family: Segoe;
    src: local('Segoe UI'), url('fonts/segoeui.ttf') format('truetype'), url('fonts/segoeui.woff') format('woff');
} 
```

# ios - 在 Core Data 中，如何检查错误是否是由“磁盘已满”引起的？

> ID：14456583
> 
> 赞同：2
> 
> 时间：2013-01-22T10:37:15.427
> 
> 标签：ios, core-data

我只想问我是否可以检查Core Data上的错误是否是由磁盘满引起的。我在开发人员网站上看到可以从异常描述中检查“磁盘已满”，但我不知道如何检查它。是`NSPersistentStoreIncompleteSaveError`我需要捕捉的错误吗？

参考：http: [//developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreData/Articles/cdUsingPersistentStores.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreData/Articles/cdUsingPersistentStores.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:45:48.527

我认为，您应该在 save: on MOC 中找到该错误。请参阅[Apple 文档](http://developer.apple.com/library/mac/#documentation/cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/occ/instm/NSManagedObjectContext/save%3a)。

# css - 逼真的手机屏幕分辨率

> ID：14456584
> 
> 赞同：13
> 
> 时间：2013-01-22T10:37:22.850
> 
> 标签：css, html, mobile

是否有一个矩阵可以为最常见的手机获得真实的屏幕可用性，考虑到工具栏可见的屏幕分辨率？

我们需要为移动/平板电脑开发一个滚动站点，尽管我们试图使 css 尽可能流畅，但摘要依赖于背景图像，这意味着我们需要各种媒体查询来切换图像以获得最佳体验 - 一个现实的解决方案指南将非常有帮助。

干杯

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T11:33:01.287

在谷歌浏览器中，按 F12 打开开发者工具，然后点击齿轮图标转到设置 -> 覆盖，打开“用户代理”，然后选择您想要的设备 - 使用“设备矩阵”，您可以自定义屏幕大小等.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-12T00:39:11.923

查看[http://screensiz.es/phone](http://screensiz.es/phone)。您可以按屏幕尺寸、纵横比和受欢迎程度来订购手机或平板电脑。

还可以查看 chrome canary 开发工具中的截屏视频。 [http://www.html5rocks.com/en/tutorials/developertools/mobile/](http://www.html5rocks.com/en/tutorials/developertools/mobile/)

我仍在寻找类似[谷歌*浏览器*](http://browsersize.googlelabs.com/)大小但适用于移动屏幕的东西。

* * *

**更新：**

谷歌实验室浏览器大小现在是谷歌分析的一部分

有关最新数据，请查看[https://design.google.com/devices/](https://design.google.com/devices/)（现在也称为[https://material.io/tools/devices/](https://material.io/tools/devices/)）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-21T09:04:53.203

@media（最小宽度：1200px）{

@media（最大宽度：980px）{

@media（最大宽度：979px）{

@media（最小宽度：980px）{

@media（最小宽度：768px）和（最大宽度：979px）{

@media（最大宽度：768px）{

@media（最大宽度：767px）{

@media（最大宽度：480px）{

应该是**标准**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-22T10:40:28.367

我认为你一定要试试这个网站：[http ://responsivetools.com/](http://responsivetools.com/)

它将让您快速了解您的网站在不同的移动设备和平板电脑分辨率下的外观。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-31T20:14:26.900

Statcounter 可能在屏幕尺寸和许多其他统计数据上提供了最好的数字运算。他们的页面总是给我加载问题，所以我更喜欢找到引用了他们统计数据的人，而不是直接访问源代码，比如这个博主：

[http://www.satya-weblog.com/2013/07/desktop-laptop-mobile-screen-resolution-most-common-worldwide.html](http://www.satya-weblog.com/2013/07/desktop-laptop-mobile-screen-resolution-most-common-worldwide.html)

希望这是对您问题的更直接的回答！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-22T10:40:20.830

有许多在线服务，您可以在其中“通过”手机显示屏查看您的站点，并指定分辨率。

例如：[手机模拟器](http://www.mobilephoneemulator.com/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-11T18:21:50.113

我们会你可能想尝试去这里：[http](http://cartoonized.net/cellphone-screen-resolution.php) ://cartoonized.net/cellphone-screen-resolution.php它基本上根据手机类型为您提供最佳分辨率。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-27T08:39:26.187

这是移动设备的所有已知 CSS @media 属性 + 可以使用的几种桌面分辨率的列表。

其中包括 Android、iPhone、iPad、Google Nexus、LG、三星、诺基亚、HTC、摩托罗拉、索尼和所有知名品牌。

[在GitHub 上](https://github.com/CreativForm/Realistic-Mobile-Screen-Resolutions)查看

```
@media all and (max-width: 2560px){

}
@media all and (max-width: 1920px){

}
@media all and (max-width: 1440px){

}
@media all and (max-width: 1280px){

}
@media all and (max-width: 1200px){

}
@media all and (max-width: 1024px){

}
@media all and (max-width: 992px){

}
@media all and (max-width: 768px){

}
@media all and (max-width: 720px){

}
@media all and (max-width: 600px){

}
@media all and (max-width: 540px){

}
@media all and (max-width: 480px){

}
@media all and (max-width: 424px){

}
@media all and (max-width: 414px){

}
@media all and (max-width: 400px){

}
@media all and (max-width: 384px){

}
@media all and (max-width: 375px){

}
@media all and (max-width: 360px){

}
@media all and (max-width: 320px){

} 
```

# go - 在 go 中声明空类型

> ID：14456585
> 
> 赞同：3
> 
> 时间：2013-01-22T10:37:23.097
> 
> 标签：go

对于给定的类型`Data`，我想定义一组过滤器，每个过滤器都`Data`以某种方式处理。有些过滤器只需要处理数据，有些可能需要额外的参数。

```
type Data struct {
    ...
} 
```

我希望能够定义一个过滤器列表，并将它们顺序应用到`Data`. 为了实现这一点，我定义了一个`Filter`接口：

```
type Filter interface {
    Apply (d *Data) error
} 
```

要定义过滤器，我所要做的就是创建一个新类型并为其定义 Apply 方法。

现在，假设我有一个不需要任何附加信息的过滤器。**将其定义为空是一种好习惯`struct`吗？**

```
type MySimpleFilter struct {}

func (f *MySimpleFilter) Apply (d *Data) {
    ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T16:45:09.017

如果您没有使用 Field，我认为这是一种很好的做法，特别是与使用另一种类型（即`type MySimpleFilter int`）相比，因为空结构不使用空间：

[https://codereview.appspot.com/4634124](https://codereview.appspot.com/4634124)

并且它仍然可以实现接口契约（因此在某些情况下可能比函数方法更有用）。

当使用对值没有用的映射时，这也是一个很好的习惯用法（即`map[string]struct{}`）。有关详细信息，请参阅此讨论：

[https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/lb4xLHq7wug](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/lb4xLHq7wug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:43:54.050

这是一个没有明确答案的问题，因为这是一个品味问题。我会说这是一种很好的做法，因为它使 MySimpleFilter 与其他过滤器对称，从而更容易理解代码。

# java - 将加密密码存储在mysql中并在获取时解密

> ID：14456590
> 
> 赞同：0
> 
> 时间：2013-01-22T10:37:45.470
> 
> 标签：java, mysql, sql, des, password-encryption

我正在使用`DES_ENCRYPT`方法将密码存储到 MySQL。这是可行的，但是当我检索时，`DES_DECRYPT`我得到了某些符号的 HTML 字符引用。例如我`&`通过加密存储，但在解密时我得到`&amp;`. 如何处理这个问题，以便我只`&`在解密后得到，而不是`&amp;`如果有任何其他更好的直接方法，我可以使用它，但在任何一种情况下，我都需要存储真实密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:43:38.370

正如@Carlos 所说`phpmyadmin`，可能是在显示之前对 html 实体进行 html 编码是真的。这是真的。功能没有问题。当我从外部解密时`phpmyadmin`，密码被正确解密。我之前犯了错误，我尝试直接从管理面板执行此操作，现在我从管理面板外部的脚本运行它。

# java - 在 liferay portlet 中关闭 jdbc 资源

> ID：14456591
> 
> 赞同：1
> 
> 时间：2013-01-22T10:37:47.753
> 
> 标签：java, jdbc, liferay, portlet

对于 ResultSets，它很容易——我在阅读它们之后就关闭它们。问题出在 Connection 和 PreparedStatements 上。我不确定何时最好关闭这些资源。

对于防御方法，在对数据库进行每个复杂操作后关闭它们似乎很好，但这意味着每次用户调用任何 portlet 操作（例如每个页面重新加载或调用 MVCPortlet 的 ajax 请求）时，我都必须打开连接并编译准备好的语句#serveResource）。

有没有更好的方法来管理 jdbc 连接？什么时候最好关闭所有这些资源？

每次调用任何 portlet 操作时设置数据库连接和语句可能不是什么大问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T20:21:52.160

最直接的方式可能是这个实用程序类 [http://docs.liferay.com/portal/6.0/javadocs/com/liferay/portal/kernel/dao/jdbc/DataAccess.html](http://docs.liferay.com/portal/6.0/javadocs/com/liferay/portal/kernel/dao/jdbc/DataAccess.html)

您可以在 finally 语句中将所有打开的资源传递给 DataAccess.cleanUp()，实际上它只是为您执行空值检查和异常处理。

如果有一个 PreparedStatement 经常被调用，那么它可能会在请求之间保留，但这是一种后期优化，可以在没有其他事情可做时考虑。开销是最小的。

# jenkins - 如何在不重新启动服务器的情况下停止 Jenkins 上不可阻挡的僵尸作业？

> ID：14456592
> 
> 赞同：221
> 
> 时间：2013-01-22T10:37:50.463
> 
> 标签：jenkins

我们的 Jenkins 服务器有一个工作已经运行了三天，但没有做任何事情。点击角落里的小 X 没有任何反应，控制台输出日志也没有显示任何内容。我检查了我们的构建服务器，该工作实际上似乎根本没有运行。

有没有办法告诉詹金斯工作已经“完成”，通过编辑一些文件或锁或其他东西？由于我们有很多工作，我们真的不想重新启动服务器。

* * *

## 回答 #1

> 赞同：302
> 
> 时间：2016-07-20T12:49:22.127

我也有同样的问题，并通过 Jenkins 控制台修复它。

转到“管理 Jenkins”>“脚本控制台”并运行脚本：

```
 Jenkins .instance.getItemByFullName("JobName")
        .getBuildByNumber(JobNumber)
        .finish(hudson.model.Result.ABORTED, new java.io.IOException("Aborting build")); 
```

您只需指定您的 JobName 和 JobNumber。

* * *

## 回答 #2

> 赞同：270
> 
> 时间：2014-10-10T18:48:05.170

转到“管理 Jenkins”>“脚本控制台”在您的服务器上运行脚本以中断挂起的线程。

您可以获取所有活动线程`Thread.getAllStackTraces()`并中断正在挂起的线程。

```
Thread.getAllStackTraces().keySet().each() {
  t -> if (t.getName()=="YOUR THREAD NAME" ) {   t.interrupt();  }
} 
```

更新：

上述使用线程的解决方案可能不适用于更新的 Jenkins 版本。要中断冻结的管道，请参阅[此](https://stackoverflow.com/a/38481808/1434041)解决方案（由[alexandru-bantiuc 提供](https://stackoverflow.com/users/4667789/alexandru-bantiuc)）并运行：

```
Jenkins.instance.getItemByFullName("JobName")
                .getBuildByNumber(JobNumber)
                .finish(
                        hudson.model.Result.ABORTED,
                        new java.io.IOException("Aborting build")
                ); 
```

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2018-01-16T10:52:54.523

如果您有[Multibranch Pipeline -job](https://wiki.jenkins.io/display/JENKINS/Pipeline+Multibranch+Plugin)（并且您是 Jenkins 管理员），请在[Jenkins 脚本控制台](https://wiki.jenkins.io/display/JENKINS/Jenkins+Script+Console)中使用此脚本：

```
Jenkins.instance
.getItemByFullName("<JOB NAME>")
.getBranch("<BRANCH NAME>")
.getBuildByNumber(<BUILD NUMBER>)
.finish(hudson.model.Result.ABORTED, new java.io.IOException("Aborting build")); 
```

来自[https://issues.jenkins-ci.org/browse/JENKINS-43020](https://issues.jenkins-ci.org/browse/JENKINS-43020)

如果您不确定作业的全名（路径）是什么，您可以使用以下代码段列出所有项目的全名：

```
 Jenkins.instance.getAllItems(AbstractItem.class).each {
    println(it.fullName)
  }; 
```

来自[https://support.cloudbees.com/hc/en-us/articles/226941767-Groovy-to-list-all-jobs](https://support.cloudbees.com/hc/en-us/articles/226941767-Groovy-to-list-all-jobs)

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2019-08-14T17:31:52.993

无需使用脚本控制台或其他插件，您可以通过在浏览器中输入、或在构建 URL 之后简单地[中止构建。](https://wiki.jenkins.io/plugins/servlet/mobile?contentId=36603009#content/view/36603009)`/stop``/term``/kill`

从上面的链接逐字引用：

> 可以通过向构建的 URL 端点发送 HTTP POST 请求来停止管道作业。
> 
> *   **<BUILD ID URL>/stop** - 中止管道。
> *   **<BUILD ID URL>/term** - 强制终止构建（仅应在停止不起作用时使用。
> *   **<BUILD ID URL>/kill** - 硬终止管道。这是阻止管道的最具破坏性的方法，只能作为最后的手段。

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2017-02-22T16:39:51.297

第一个提议的解决方案非常接近。如果您使用 stop() 而不是 interrupt() 它甚至会杀死失控的线程，这些线程在 groovy 系统脚本中无休止地运行。这将杀死任何为工作而运行的构建。这是代码：

```
Thread.getAllStackTraces().keySet().each() {
    if (it.name.contains('YOUR JOBNAME')) {  
      println "Stopping $it.name"
      it.stop()
    }
} 
```

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2016-11-18T09:22:58.233

一旦我遇到“脚本控制台”无法停止的构建。最后，我通过以下步骤解决了问题：

```
ssh onto the jenkins server
cd to .jenkins/jobs/<job-name>/builds/
rm -rf <build-number>
restart jenkins 
```

* * *

## 回答 #7

> 赞同：26
> 
> 时间：2015-03-19T14:03:32.833

我使用[监控插件](https://wiki.jenkins-ci.org/display/JENKINS/Monitoring)来完成这项任务。安装插件后

1.  转到管理 Jenkins > 监控 Hudson/Jenkins master
2.  展开Threads的Details，右侧的蓝色小链接
3.  搜索挂起的作业名称

    线程的名称将像这样开始

    `Executor #2 for master : executing <your-job-name> #<build-number>`

4.  单击所需工作所在行表中最右侧的红色圆形按钮

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2016-12-14T08:13:08.373

如果您有不可阻挡的流水线作业，请尝试以下操作：

1.  通过单击构建进度条旁边的红色 X 中止作业
2.  单击构建上的“暂停/恢复”以暂停
3.  再次单击“暂停/恢复”以恢复构建

[![暂停/恢复管道作业](../Images/97a2c98d6f1fea4d3e4bfba7c5e56e71.png)](https://i.stack.imgur.com/KpBkA.png)

詹金斯会意识到工作应该被终止并停止构建

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2015-04-17T16:18:02.313

我想现在回答为时已晚，但我帮助了一些人。

1.  安装监控插件。（[http://wiki.jenkins-ci.org/display/JENKINS/Monitoring](http://wiki.jenkins-ci.org/display/JENKINS/Monitoring)）
2.  转到 jenkinsUrl/monitoring/nodes
3.  转到底部的线程部分
4.  点击大师左侧的详情按钮
5.  按用户时间（毫秒）排序
6.  然后查看线程的名称，你会有构建的名称和编号
7.  杀了它

抱歉，我没有足够的声誉发布图片。

希望它可以帮助

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2017-11-28T20:04:02.650

[最佳答案](https://stackoverflow.com/a/38481808/1824868)几乎对我有用，但我遇到了一个主要问题：由于 Jenkins 重新启动的时机特别糟糕，我有大量（约 100 个）僵尸作业，因此手动查找每个作业的作业名称和内部版本号每个僵尸作业然后手动杀死它们是不可行的。以下是我自动找到并杀死僵尸作业的方法：

```
Jenkins.instance.getItemByFullName(multibranchPipelineProjectName).getItems().each { repository->
  repository.getItems().each { branch->
    branch.builds.each { build->
      if (build.getResult().equals(null)) {
        build.doKill()
      }
    }
  }
} 
```

此脚本循环遍历所有作业的所有构建，并用于`getResult().equals(null)`确定作业是否已完成。队列中但尚未开始的构建将不会被迭代（因为该构建不会 in `job.builds`），并且已经完成的构建将返回除`null`for以外的其他内容`build.getResult()`。一个合法运行的作业也会有一个构建结果`null`，所以在运行它之前确保你没有不想杀死的正在运行的作业。

多个嵌套循环主要用于发现 Multibranch Pipeline 项目中每个存储库的每个分支/PR；如果您不使用 Multibranch Pipelines，您可以直接使用类似`Jenkins.instance.getItems().each`.

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2013-01-22T15:05:42.053

[对于这种情况，构建超时插件](https://wiki.jenkins-ci.org/display/JENKINS/Build-timeout+Plugin)可以派上用场。如果时间过长，它会自动终止工作。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2013-01-22T11:38:44.993

我查看了 Jenkins 源代码，看来我想做的事情是不可能的，因为停止工作似乎是通过线程中断完成的。我不知道为什么这份工作挂了..

编辑：

无法停止工作的可能原因：

*   如果 Jenkins 陷入无限循环，它永远无法中止。
*   如果 Jenkins 在 Java VM 中进行网络或文件 I/O（例如冗长的文件复制或 SVN 更新），则无法中止。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2017-03-06T02:13:51.683

Alexandru Bantiuc 的回答对我停止构建很有效，但我的执行者仍然表现得很忙。我能够使用以下命令清除繁忙的执行程序状态

```
server_name_pattern = /your-servers-[1-5]/
jenkins.model.Jenkins.instance.getComputers().each { computer ->
  if (computer.getName().find(server_name_pattern)) {
    println computer.getName()
    execList = computer.getExecutors()      
    for( exec in execList ) {
      busyState = exec.isBusy() ? ' busy' : ' idle'
      println '--' + exec.getDisplayName() + busyState
      if (exec.isBusy()) {
        exec.interrupt()
      }
    }
  }
} 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-05-01T15:19:05.567

有同样的问题，但没有堆栈线程。我们在 Jenkins 控制台中使用此代码段删除了该作业。用你的替换 jobname 和 build dnumber。

```
def jobname = "Main/FolderName/BuildDefinition"
def buildnum = 6
Jenkins.instance.getItemByFullName(jobname).getBuildByNumber(buildnum).delete(); 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2018-10-10T18:21:28.570

最近我遇到了一个节点/代理，它有一个执行程序被管道作业的构建“X”占用了几天，尽管该作业页面声称构建“X”不再存在（在 10 个后续构建（！）后被丢弃，因为在管道作业中配置）。在磁盘上验证了这一点：构建“X”真的消失了。

解决方案：是代理/节点错误地报告占用的执行程序正忙于运行构建“X”。中断该执行程序的线程已立即释放它。

```
def executor = Jenkins.instance.getNode('NODENAME').computer.executors.find {
    it.isBusy() && it.name.contains('JOBNAME')
}

println executor?.name
if (executor?.isBusy()) executor.interrupt() 
```

考虑的其他答案：

*   @cheffe 的回答：没有用（见下一点，并在下面更新）。
*   答案是`Thread.getAllStackTraces()`：没有匹配的线程。
*   @levente-holló 的答案以及所有带有`getBuildByNumber()`: 的答案都不适用，因为构建不再存在！
*   @austinfromboston 的回答：这接近我的需求，但它也会破坏目前正在运行的任何其他构建。

**更新：**
我再次遇到了类似的情况，其中一个 Executor 被一个（仍然存在的）完成的管道构建占用了好几天。此代码段是唯一可行的解​​决方案。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2014-12-11T14:07:10.320

在这种情况下，我通常使用 jenkins-cli。您可以从页面下载 jar `http://your-jenkins-host:PORT/cli`。然后运行

```
java -jar jenkins-cli.jar delete-builds name_of_job_to_delete hanging_job_number 
```

**辅助资料：**

您还可以通过一系列构建，例如`350:400`. 运行可获得一般帮助

```
java -jar jenkins-cli.jar help 
```

上下文命令帮助`delete-builds`by

```
java -jar jenkins-cli.jar delete-builds 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2019-06-18T19:29:02.137

# **非常简单的解决方案**

我看到这个问题的原因是`http`页面上的链接不正确，而不是`https`应该停止工作。您需要做的就是编辑`onclick`html页面中的属性，如下

1.  打开挂起的作业（管道）的控制台日志
2.  单击可终止作业的任何内容（x 图标、“单击此处强制终止正在运行的步骤”等）以显示“单击此处强制终止整个构建”链接（目前**无法**单击）
3.  打开浏览器的控制台（*对 chrome 使用以下三种中的任何一种：F12；ctrl + shift + i；菜单->更多工具->开发者工具*）
4.  手动找到“单击此处强制终止整个构建”链接或使用控制台的“选择页面中的元素”按钮
5.  双击`onclick`属性以编辑其值
6.  追加有`s`_`http``https`
7.  按 Enter 提交更改
8.  单击“单击此处强制终止整个构建”链接

使用截图作为参考 [![在此处输入图像描述](../Images/fdc78d7d988263dc5b9221b60206dab8.png)](https://i.stack.imgur.com/ombT3.png)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2019-02-27T20:45:06.853

我在最后半小时遇到了同样的问题...

无法删除在我的多分支管道中运行的僵尸构建。甚至服务器通过 UI 甚至通过命令行重新启动`sudo service jenkins restart` 确实阻止了执行......构建不可停止......它总是重新出现。

> 使用版本：Jenkins 2.150.2 版

我很恼火，但是......在查看构建日志时，我发现日志末尾有一些有趣的东西：

[![僵尸构建的日志文件输出并显示重启并没有阻止它](../Images/41b2e68d4abe4ad441595fdb506c4fbd.png)](https://i.stack.imgur.com/YACM4.png)

红色标记的部分是“令人沮丧的部分”......如您所见，我一直想从 UI 中止构建，但它没有工作......

但是有一个带有文本的超链接`Click here to forcibly terminate running steps`...（第一个绿色的）现在我按下了链接...）在链接执行之后，`Still paused`出现了一条关于另一个链接的消息`Click here to forcibily kill entire build`（第二个绿色的）在按下这个链接之后，构建最终也很困难杀了……

所以这似乎在没有任何特殊插件的情况下工作（除了多分支管道构建插件本身）。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-01-05T09:56:38.213

这对我每次都有效：

```
Thread.getAllStackTraces().keySet().each() {
    if (it.name.contains('YOUR JOBNAME')) {  
      println "Stopping $it.name"
      it.stop()
    }
} 
```

感谢 funql.org

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-08-27T15:17:39.170

我有很多僵尸作业，所以我使用了以下脚本：

```
for(int x = 1000; x < 1813; x = x + 1) {
    Jenkins .instance.getItemByFullName("JOBNAME/BRANCH")
    .getBuildByNumber(x)
    .finish(hudson.model.Result.ABORTED, new java.io.IOException("Aborting build"))
} 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-06-22T17:26:05.067

[在https://my-jenkins/script](https://my-jenkins/script)使用脚本控制台

```
import hudson.model.Job
import org.jenkinsci.plugins.workflow.job.WorkflowRun

Collection<Job> jobs = Jenkins.instance.getItem('My-Folder').getAllJobs()
for (int i = 0; i < jobs.size(); i++) {
  def job = jobs[i]
  for (int j = 0; j < job.builds.size(); j++) {
    WorkflowRun build = job.builds[j]
    if (build.isBuilding()) {
      println("Stopping $job ${build.number}")
      build.setResult(Result.FAILURE)
    }
  }
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-05-14T07:34:43.350

我现在两次遇到同样的问题，唯一的修复沙发是重新启动 tomcat 服务器并重新启动构建。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-10-01T13:36:43.250

我写的一个叫做[jkillthread](https://github.com/jglick/jkillthread)的实用程序可以用来停止任何 Java 进程中的任何线程，只要你可以在同一帐户下登录到运行该服务的机器。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-12-03T16:41:42.780

这些解决方案都不适合我。我不得不重新启动安装服务器的机器。无法杀死的工作现在已经消失了。

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2016-03-07T08:34:58.460

您可以复制作业并删除旧作业。如果您丢失旧的构建日志并不重要。

* * *

## 回答 #26

> 赞同：-2
> 
> 时间：2018-01-05T18:41:26.857

这是我在`2.100`Blue Ocean 版本中解决此问题的方法

*   我安装的唯一插件是用于 bitbucket。
*   我只有一个节点。

`ssh`进入我的詹金斯盒子
`cd ~/.jenkins`（我保存詹金斯的地方）
`cd job/<job_name>/branches/<problem_branch_name>/builds`
`rm -rf <build_number>`

在此之后，您可以选择更改`nextBuildNumber`（我做了这个） 中的数字

最后，我重新启动了 jenkins（`brew services restart jenkins`）这一步显然会有所不同，具体取决于您管理和安装 Jenkins 的方式。

* * *

## 回答 #27

> 赞同：-4
> 
> 时间：2018-07-24T04:45:38.353

进入蓝海界面。尝试从那里停止工作。

# c# - c# - 如何在chartarea c# winform中获取当前scaleView中的点？

> ID：14456594
> 
> 赞同：0
> 
> 时间：2013-01-22T10:37:55.190
> 
> 标签：c#, winforms, visual-studio-2010, charts, point

.net 4 vs2010 winform c#

使用添加了一些点

```
chart1.Series[0].Points.AddXY(x,y); 
```

然后使用缩放x轴

```
chart1.ChartAreas[0].AxisX.ScaleView.Zoom(a,b); 
```

是否有任何方法可以返回屏幕上的所有点（b> point.Xvalue >a）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:52:18.210

通过使用 LINQ，您可以执行以下操作：

```
DataPointCollection points = chart1.Series[0].Points;
IEnumerable<DataPoint> range =
    from p in points
    where p.XValue > a && p.XValue < b
    select p; 
```

`range`包含 XValue 大于`a`和小于的所有数据点`b`。

# git - 如何在本地进行提交或永久更改

> ID：14456595
> 
> 赞同：2
> 
> 时间：2013-01-22T10:38:06.693
> 
> 标签：git, version-control, gitignore

我为我的项目更改了一个文件（配置文件）。我希望此更改仅是本地更改，因此会从准备提交的更改列表中消失。

有什么简单的方法可以做到这一点吗？请注意，配置文件定期存储在存储库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:41:58.387

一种方法是：

```
git  update-index --assume-unchanged -- /path/to/file 
```

其他：

```
git update-index --skip-worktree -- /path/to/file 
```

（第二个会抵抗 a `git reset`）

但我更喜欢对这种本地配置使用[内容过滤器驱动程序：对](https://stackoverflow.com/a/2749789/6309)*模板*文件进行版本控制，并使用值（存储在其他地方）来生成实际文件。

# opengl - OpenGL 纹理、SDL_TTF 字体和二维的威力

> ID：14456598
> 
> 赞同：0
> 
> 时间：2013-01-22T10:38:29.910
> 
> 标签：opengl, fonts, textures, dimensions, sld

在我目前的项目中，我已经开始将所有渲染从 SDL 转换为 OpenGL。这意味着我必须将 SDL_Surface（加载的 img）转换为 OpenGL 纹理。

当我这样做时，我明白维度是 2 的幂是很重要的。但是当我创建一种字体时，我不能总是拥有两个的力量。在描述如何将 SDL_TTF 与 OpenGL 一起使用的教程中，如果不是，它确保将图像转换为正确的尺寸，但这只会扭曲我的图像。

如果我不弄乱尺寸，一切正常。为什么我需要二维的力量？如果我真的需要它，我如何应用它而不扭曲我的形象？

# java - 为什么 InputStreamReader 不实时读取进程的输出？

> ID：14456605
> 
> 赞同：3
> 
> 时间：2013-01-22T10:38:44.100
> 
> 标签：java, process, io, inputstream

我正在尝试使用`ProcessBuilder`来运行一些外部命令，例如Linux`ifstat`或`vmstat`在 Linux 中。

此类命令支持自定义采样间隔。如果我在外部命令中添加一个采样间隔，例如 ，`ifstat 20`那么该命令将输出如下：

```
coolcfan@coolcfan-PC:~$ ifstat 20
       eth0               wlan0               vmnet1              vmnet8      
 KB/s in  KB/s out   KB/s in  KB/s out   KB/s in  KB/s out   KB/s in  KB/s out 
```

20秒后

```
 41.29      1.06      0.36      0.00      0.00      0.00      0.00      0.00 
```

再过20秒

```
 16.67      0.58      0.38      0.00      0.00      0.00      0.00      0.00 
```

**但是**，当我使用我的 Java 代码运行命令时，将在 20 秒后读取输出的第一部分，如下所示：

```
Start running "ifstat 20" 
```

20秒后

```
 eth0               wlan0               vmnet1              vmnet8      
 KB/s in  KB/s out   KB/s in  KB/s out   KB/s in  KB/s out   KB/s in  KB/s out
   66.61      1.73      1.29      0.01      0.00      0.00      0.00      0.00 
```

当我使用 NIO 服务器运行命令并使用 SocketChannel 将输出发送到客户端时，问题更加严重......（我的客户端需要再等待 20 秒才能在服务器显示第一个后从服务器获取输出进程开始后 20 秒的输出）

而且我注意到输出延迟的长度与我为命令设置的间隔有关。

那么为什么 ISR 不实时读取输出呢？

一个简单的测试代码片段来演示我的问题：

```
public static void main(String[] args) {
    ProcessBuilder pb = new ProcessBuilder();

    pb.command("ifstat 20".trim().split(" "));

    Process p = null;

    System.out.println("Start running \"ifstat 20\"");

    try {
        p = pb.start();

        char[] buf = new char[512];

        InputStreamReader isr = new InputStreamReader(p.getInputStream());

        int count = -1;

        while ((count = isr.read(buf, 0, buf.length)) != -1) {
            System.out.print(new String(buf, 0, count));
        }
    }
    catch (IOException ioe) {
    }
} 
```

* * *

更新：

正如彼得的评论，这不是与 Java 相关的问题。这是**管道延迟**。

但是我还是不明白，为什么`vmstat 20 | cat`没有这个延迟，而`ifstat 20 | cat`会延迟露头呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:29:50.160

确实如此。

延迟的是过程的输出。STDIO 进行缓冲，根据 stout 是否为终端而有所不同。

# c# - 使用以下字符的 XML 无效 £ ` –

> ID：14456606
> 
> 赞同：2
> 
> 时间：2013-01-22T10:38:47.067
> 
> 标签：c#, xml, xml-validation

我正在尝试创建一个将使用 W3C 验证器进行验证的 RSS 提要。我不断从以下包含字符的 URL 中遇到问题`£`， ```或者`-`

以下是网址：

```
http://www.example.co.uk/news/2012/april/stamp-rationing-–-why-the-royal-mail-are-ripping-you-off 
```

这是错误：

此提要未验证。第 14 行，第 119 列：链接必须是完整且有效的 URL：[http](http://www.example.co.uk/news/2012/april/stamp-rationing-) : //www.example.co.uk/news/2012/april/stamp-rationing---why-the-royal-mail-are-ripping -you-off [帮助] ... - 为什么皇家邮件正在撕掉你

我尝试用转义字符替换符号，但这不起作用。这是我一直在使用的转义字符：

```
 Text = Text.Replace("-", "&#45");
            Text = Text.Replace("£", "%C2%A");
            Text = Text.Replace("`", "%60");
            Text = Text.Replace("’", "%60"); 
```

有谁知道如何解决这个问题？以下是导致我出现问题的更多链接：

[http://www.example.co.uk/news/2012/march/for-sale-3-bed-detached-london-home-](http://www.example.co.uk/news/2012/march/for-sale-3-bed-detached-london-home-) 15,000 英镑

错误：

此提要未验证。第 14 行，第 106 列：链接必须是完整且有效的 URL：[http](http://www.example.co.uk/news/2012/march/for-sale-3-bed-detached-london-home-) ://www.example.co.uk/news/2012/march/for-sale-3-bed-detached-london-home- £15,000 [帮助] ... -sale-3-bed-detached-london-home-£15,000

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:46:36.577

在将URL 发布到 RSS 之前，您需要对[URL 进行 URL 编码：](http://msdn.microsoft.com/en-us/library/system.web.httputility.urlencode.aspx)

```
var encoded = HttpUtility.UrlEncode(aUrl); 
```

请注意，URL 不能直接用作`:`, `/`etc 也将被编码。

如果您希望这些值是有效的 XML，请[`SecurityElement.Escape`](http://msdn.microsoft.com/en-us/library/system.security.securityelement.escape.aspx)改用。

```
var escaped = SecurityElement.Escape(aUrl); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:43:02.633

我正在为我的系统构建一个 API，并且我一直在使用一些东西来规范化这些字段。尝试使用 PHP 过滤：

```
$value = preg_replace('/[^a-z]/i', '', $value);
$value = preg_replace('/[^\x09\x0A\x0D\x20-\x7F]/e', '"&#".ord($0).";"', $value);
$value = htmlentities($value, ENT_NOQUOTES, 'UTF-8', false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:54:44.640

答案是使用 UTF-8 编码或将非 ascii 字符转换为 XML 实体。

*   UTF-8 编码：确保文档以 UTF-8 输出，并包含相关的编码标头。

    另请参见[PHP 中的 UTF-8 编码 xml](https://stackoverflow.com/questions/4164719/utf-8-encoding-xml-in-php)

*   实体编码：将所有非 ASCII 字符转换为 XML 实体。

    XML 实体看起来像这样：（ `&#163;`那个是用于`£`标志的）。大多数编程语言会在您生成 XML 文档时自动为您执行此操作，或提供执行此操作的标准函数。您没有指定您使用的语言，但以上内容应该可以帮助您找到合适的 API 函数。

您*不*应该做的一件事是手动生成 XML 数据（即以字符串的形式输出标签和属性），或者手动替换实体的字符串。您应该为此使用适当的 API。手动生成 XML（或任何其他标准数据格式）总是可能以这样的问题告终，如果工具就在您面前正确地做，那么用困难的方式做这件事似乎有点疯狂.

# android - 如何制作远程控制应用程序？从哪儿开始？

> ID：14456607
> 
> 赞同：7
> 
> 时间：2013-01-22T10:38:51.227
> 
> 标签：android, sockets, networking

什么是我应该用来为 Android 制作远程控制应用程序的最佳框架。我想做的是类似于 Tony Fadel 的 Android 和 Iphone 应用程序，您可以在其中使用智能手机应用程序远程控制房屋恒温器温度。

我打算使用套接字编程，但不确定这是否是最好的方法。如果是，那么我会使用它，但在开始之前需要一些反馈。

如果我将一个 android 设备作为服务器，将另一台设备作为客户端，那么每次我想将客户端连接到服务器时，我仍然需要手动设置 IP 地址。

我试图避免必须制作一个网络应用程序并且必须制作一个 php 网站来充当此服务器。必须保持服务器运行的开销太大。宁愿制作两部安卓手机或平板电脑之类的东西，它们可以通过互联网或 wifi 路由器相互发送消息，而无需太多设置和努力。

对此有任何想法将不胜感激。我无法弄清楚巢恒温器的工作原理（http://www.nest.com/），但这是我想要复制的功能。我想知道他们是否必须为所有遥控器使用集中式服务器。如果有办法做到这一点，那就太好了。这样我只需要两台 Android 平板电脑。

我能想到的其他示例是 VOIP，例如 skype 和 google talk。我确信这些不使用集中式服务器进行语音通话。我的需求要简单得多。没有语音或视频，只能通过互联网从一台安卓设备向另一台设备发送短信。每个 android 设备都可能专门使用 wifi。

# android - ORMLite 不加载子外部字段

> ID：14456609
> 
> 赞同：16
> 
> 时间：2013-01-22T10:38:53.707
> 
> 标签：android, ormlite

我将 ORMLite 4.42 用于 Android 应用程序。我有一个具有外国领域的实体。这些领域也有外国领域。问题是当我得到根实体的一个元素时，只加载了第一级的外部字段。其他级别为空。

在数据库上似乎一切正常。身份证是正确的。有什么帮助吗？

**用模型编辑**。

* * *

当我通过 ID 查询时，设备模型始终为空。但是，如果我查询整个表，那么它可以让我访问所有内容。

## 表事件

```
@DatabaseField(generatedId=true)
private UUID id;

@DatabaseField(foreign=true, foreignAutoRefresh=true, canBeNull=false)
private UserEntity user;

@DatabaseField(dataType = DataType.DATE, canBeNull=true)
private Date date;

@DatabaseField(foreign=true, foreignAutoRefresh=true, canBeNull=true)
private EquipmentEntity equipment; 
```

## 餐桌设备

```
@DatabaseField(generatedId=true)
private UUID id;

@DatabaseField(canBeNull=false, unique=true)
private String serial;

@DatabaseField(foreign=true, foreignAutoRefresh=true, canBeNull=false)
private EquipmentTypeEntity type; 
```

## 表设备类型

```
@DatabaseField(generatedId=true)
private UUID id;

@DatabaseField(canBeNull=true)
private String type;

@DatabaseField(foreign=true, foreignAutoRefresh=true, canBeNull=false)
private EquipmentModelEntity model; 
```

## 台设备型号

```
@DatabaseField(generatedId=true)
private UUID id;

@DatabaseField(canBeNull=false)
private String model; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-22T19:09:06.740

> 我将 ORMLite 4.42 用于 Android 应用程序。我有一个具有外国领域的实体。这些领域也有外国领域。问题是当我得到根实体的一个元素时，只加载了第一级的外部字段。其他级别为空。

对，这是设计使然。 [ORMLite](http://ormlite.com/)特别限制了它自动刷新子元素的次数。这样做是为了防止*巨大的*对象树吞噬内存和自引用对象。

引用[文档`foreignAutoRefresh`](http://ormlite.com/docs/foreign-auto-refresh)：

> 注意：为了防止递归，有几个地方限制了自动刷新。如果您正在自动刷新一个本身具有将 foreignAutoRefresh 设置为 true 的字段的类，或者如果您正在自动刷新具有外部集合的类，则在这两种情况下，结果字段都将设置为 null 并且不会自动刷新。如果需要，您可以随时直接在字段上调用刷新。
> 
> 注意：如果您有一个自动刷新的字段，它是一个对象也有一个自动刷新的字段，您可能需要调整 maxForeignAutoRefreshLevel 值。见下文。

从文档中引用`maxForeignAutoRefreshLevel`：

> 这可用于设置配置异物的最大级别数。例如，如果您有一个 Question 具有 best Answer 的外部字段，并且 Answer 具有对应问题的外部字段，则来回配置可能会变大。当您查找可能导致无限循环的问题时，这尤其是自动刷新字段的问题。默认情况下，ORMLite 只经过 2 个级别，但您可以将其减少到 1（0 无效）或增加它。当您加载问题时，数字越高，发生的数据库事务就越多。

如果您将其`maxForeignAutoRefreshLevel`增加到更多，那么它将发出额外的查询以刷新元素。

```
@DatabaseField(foreign=true, foreignAutoRefresh=true, canBeNull=true,
    maxForeignAutoRefreshLevel=3)
private EquipmentEntity equipment; 
```

# html - IE 背景固定调整大小以覆盖浏览器窗口

> ID：14456610
> 
> 赞同：1
> 
> 时间：2013-01-22T10:38:59.373
> 
> 标签：html, css, gradient

下面的代码适用于 firefox、chrome 等，但不适用于 Internet Explorer。如何使背景覆盖浏览器窗口，即使没有太多文字。

```
body {
background: -ms-linear-gradient(top, #e5e5e5 0%, #c0bfbf 100%) center center fixed; /* IE10 Consumer Preview */
background: -moz-linear-gradient(top, #e5e5e5 0%, #c0bfbf 100%) center center fixed; /* Mozilla Firefox */
background: -o-linear-gradient(top, #e5e5e5 0%, #c0bfbf 100%) center center fixed; /* Opera */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #e5e5e5), color-stop(1, #c0bfbf)) center center fixed; /* Webkit (Safari/Chrome 10) */
background: -webkit-linear-gradient(top, #e5e5e5 0%, #c0bfbf 100%) center center fixed; /* Webkit (Chrome 11+) */
background: linear-gradient(to bottom, #e5e5e5 0%, #c0bfbf 100%) center center fixed; /* W3C Markup, IE10 Release Preview */
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#e5e5e5', endColorstr='#c0bfbf',GradientType=0, sizingMethod='scale'); /* IE6-8 */
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#e5e5e5', endColorstr='#c0bfbf',GradientType=0, sizingMethod='scale')"; /* IE6-8 */

color:#393939;
font:12px/18px Arial,sans-serif;
margin:0;
padding:0px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:03:31.507

当您在没有 ms 前缀的线性渐变标记中用 rgb 值替换十六进制代码时，它至少在 Windows 8 上的 IE10 中工作

这是我使用的：

```
background: linear-gradient(to bottom, rgb(255,255,0) 0%, rgb(0,255,255) 100%) center center fixed; /* W3C Markup, IE10 Release Preview */ 
```

编辑，这是其中包含实际颜色值的示例：

```
background: linear-gradient(to bottom, rgb(229,229,229) 0%, rgb(192,191,191) 100%) center center fixed; 
```

# jasper-reports - iReport Barcode - 本地类不兼容：流 classdesc serialVersionUID

> ID：14456612
> 
> 赞同：0
> 
> 时间：2013-01-22T10:39:03.943
> 
> 标签：jasper-reports, ireport, rmi

我正在处理一份有问题的报告，当客户端 JRE 与服务器的不同时，它总是抛出相同的异常。这是一个 RMI 应用程序，仅此报告会出现异常。

* * *

### 报告

这是一个简单的报告，但是它有一个条形码组件，我使用了 iReport 5.0.1 提供的 2 个实现（Barbecue 和 Barcode4j）并且都抛出了相同的异常：

```
java.rmi.UnmarshalException: error unmarshalling return; nested exception is: 
java.io.InvalidClassException: javax.swing.JComponent;
     local class incompatible:
        stream classdesc serialVersionUID = -2790168081368361182,
        local class serialVersionUID = 5670834184508236790
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:191)
    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:194)
    at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:148)
    at $Proxy17.geraRelatorio(Unknown Source)
    at base.gui.reports.ReportsPrinter.showReport(ReportsPrinter.java:151)
    at base.gui.reports.ReportsPrinter.showReport(ReportsPrinter.java:139)
    at jacad.gui.cadastros.curso.FrameCadastroPeriodoLetivo$30.executaAtividade(FrameCadastroPeriodoLetivo.java:1499)
    at jdaap.gui.components.loader.Loader$1.doInBackground(Loader.java:70)
    at jdaap.gui.components.loader.Loader$1.doInBackground(Loader.java:1)
    at javax.swing.SwingWorker$1.call(SwingWorker.java:296)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at javax.swing.SwingWorker.run(SwingWorker.java:335)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.InvalidClassException: javax.swing.JComponent;
    local class incompatible:
        stream classdesc serialVersionUID = -2790168081368361182,
        ocal class serialVersionUID = 5670834184508236790
    at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:604)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1601)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1514) 
```

我不知道现在该怎么办，我已经尽我所能来解决这个问题，我不相信这个错误是由 Java 代码引起的，因为这个应用程序有 +- 300 个报告，而且只有这个有条形码。以下是 RMI 调用此报告的 Java 代码示例：

```
public JasperPrint executeReport(String reportFile, Map parameters) throws GenericException {

    FileInputStream is = (FileInputStream) getReportFile(reportFile);

    Connection conn = getConnection();

    JasperPrint print = null;

    try {
        parameters.put("P_REPORTS_PATH", Application.getInstance().getReportsPath());
        parameters.put(JRParameter.REPORT_LOCALE, new Locale("pt", "BR"));

        print = JasperFillManager.fillReport(Application.getInstance().getReportsPath() + reportFile, parameters, conn);
    } catch (JRException e1) {
        e1.printStackTrace();
        throw new GenericException(e1);
    }

    try {
        conn.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return print;
} 
```

客户端：

```
public static void view(final JasperPrint print) throws GenericException {
    if (print == null) {
        throw new GenericException("Nenhuma visualização do relatório foi informada.");
    }

    new SwingWorker() {
        @Override
        protected Void doInBackground() throws Exception {
            JFrame viewer = new JFrame("Visualização do Relatório"); //$NON-NLS-1$
            viewer.setPreferredSize(new Dimension(800, 600));
            viewer.setLocationRelativeTo(null);

            JasperViewer jrViewer = new JasperViewer(print, true);
            viewer.getContentPane().add(jrViewer.getContentPane());
            new FrameConfig(viewer);
            return null;
        }
    }.execute();

}

public void showReport(String reportFile, Map parameters) throws GenericException {

    if (reportFile == null)
        throw new GenericException("Report file não pode ser nulo.");

    ReportsManager rm;
    try {
        rm = (ReportsManager) FacadeFactoryLocal.newInstance(ReportsManager.class);

        JasperPrint jasperPrint = rm.geraRelatorio(reportFile, parameters);
        view(jasperPrint);

    } catch (RemoteException e1) {
        e1.printStackTrace();
        throw new GenericException("Erro ao acessar o servidor para gerar o relatório.", e1.getStackTrace());

    }

} 
```

有人对此有解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:02:36.080

不要序列化 ​​Swing 组件。他们每个人的 Javadoc 的开头都有一个警告。序列化底层模型。

# c# - 将动态内容编译为 xap 文件中的嵌入资源

> ID：14456618
> 
> 赞同：0
> 
> 时间：2013-01-22T10:39:36.520
> 
> 标签：c#, .net, silverlight, scorm

我正在编写一个 Silverlight 客户端，它将用作 SCORM 导出到 LMS 的播放器。

此播放器将需要访问动态内容，例如图像、音频文件和视频文件。（因为它是动态的，我们不能手动将它们编译为嵌入式资源）。然而，Scorm 不允许远程连接。这意味着我们必须将资源推送给客户端。

现在的问题是：有没有办法在运行时将动态内容添加到 xap 文件（在我们创建 SCORM 包的那一刻）？

如果我的问题不清楚，请随时告诉我 :)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:48:12.443

即使 SCORM 文档明确表示它不允许远程连接，CMS 也不会阻止它。所以 silverlight 仍然可以加载外部资源 ;-)

# c# - 日期格式 dd.MM.yyyy 的正则表达式模式

> ID：14456619
> 
> 赞同：0
> 
> 时间：2013-01-22T10:39:38.417
> 
> 标签：c#, .net, regex, datetime, data-annotations

是否有任何正则表达式模式存储，我可以找到像 dd.MM.yyyy 这样的模式，或者你可以帮助我吗？

我正在使用带有数据注释的数据验证：

```
[RegularExpression(@"pattern", ErrorMessage = "incorrect date format")]
public string MyDate { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:00:55.117

根据 ECMAScript 规范，一个快速的答案可能是

```
^(\d{2}).\d{2}.(\d{4})$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:48:10.203

您可以随时尝试使用正则表达式工具，例如“RegExBuddy”或“Rad Software Regular Expression Designer”。

但是你想要的正则表达式可能是这样的：

```
\d{2}.\d{2}.\d{4}? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T11:08:58.357

你可以使用这样的东西：

```
\d{1,2}\\.\d{1,2}\\.(19\d\d|20\d\d) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T11:11:12.143

不检查短月和闰年的模式：

```
string pattern = @"(0[1-9]|[12][0-9]|3[01])\.(0[1-9]|1[012])\.(19|20)\d\d" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-02T20:41:36.430

```
// Each month has a different number of days.
// More over, we have different number of days in February which depends on whether
// the year is a leap year. Here is how to solve this problem:
// 1) if the first digit is even, the second digit must be 0, 4, or 8
// 2) if the first digit is odd, the second digit must be 2 or 6
var pattern = "^([02468][048]|[13579][26])$";

// Deal with months with 31 days
var d1 = @"(3[01]|[012]\d|\d)\.(0?[13578]|10|12)\.\d{4}";
// Deak with months with 30 days
var d2 = @"(30|[012]\d|\d)\.(0?[469]|11)\.\d{4}";
// This portion deals with February 29 in leap years
var d3 = @"29\.(0?2)\.\d{2}([02468][048]|[13579][26])";
// Deal with other days in February
var d4 = @"(2[0-8]|[01]\d|\d)\.(0?2)\.\d{4}";
// Full pattern
var date_pattern = $"^({d1}|{d2}|{d3}|{d4})$";

var dates = new[]
{
    "11.12.2001",
    "15.99.2021",
    "14.01.2010",
    "29.02.2020", //leap year
    "29.02.2019", //not a leap year
    "28.02.2019"
};

foreach (var date in dates)
{
    WriteLine($"Date: {date}, Is match: {Regex.IsMatch(date, date_pattern)}");
}

// Output:
// Date: 11.12.2001, Is match: True
// Date: 15.99.2021, Is match: False
// Date: 14.01.2010, Is match: True
// Date: 29.02.2020, Is match: True
// Date: 29.02.2019, Is match: False
// Date: 28.02.2019, Is match: True 
```

# c# - 插入 KeyValuePair 的值时如何停止出现 [ ] 进入列表控件？

> ID：14456620
> 
> 赞同：0
> 
> 时间：2013-01-22T10:39:38.783
> 
> 标签：c#, combobox, listbox, keyvaluepair

就目前而言，我正在使用字典以以下格式存储问题的答案：-

```
Destination:
A1 - Warehouse
A2 - Front Office
A3 - Developer Office
A4 - Admin Office
B1 - Support 
```

A1、A2 等是用于在别处选择问题的唯一标识符，答案在末尾标记，字典存储 ID 和答案。

这部分一切正常。问题是在将数据插入列表框/组合框时。目前我正在使用以下方法：

```
foreach (KeyValuePair<string, string> oTemp in aoObjectArray)
{
    if (listControl is ComboBox)
    {
        ((ComboBox)listControl).Items.Add(string.Format("{0} - {1}", 
                                          oTemp.Key, oTemp.Value));
    }
    else if (listControl is ListBox)
    {
        ((ListBox)listControl).Items.Add(string.Format("{0} - {1}",
                                         oTemp.Key, oTemp.Value));
    }
} 
```

这会将正确的数据插入到列表/组合框中，但格式如下：

```
Destination:
[A1: Warehouse]
[A2: Front Office]
[A3: Developer Office]
[A4: Admin Office]
[B1: Support] 
```

我尝试了许多其他方法来摆脱方括号。有趣的是，如果我这样做

```
((ComboBox)listControl).Items.Add(string.Format(oTemp.Value)); 
```

我仍然以 [A1: Warehouse] 格式获取数据。我怎样才能摆脱方括号？

编辑：被要求添加更多代码。这是完整的添加到列表控制方法：

```
public static void AddDictionaryToListControl(ListControl listControl,
                              Dictionary<string, string> aoObjectArray)
    {
        foreach (KeyValuePair<string, string> oTemp in aoObjectArray)
        {
            if (listControl is ComboBox)
            {
                ((ComboBox)listControl).Items.Add(string.Format(oTemp.Value));
            }
            else if (listControl is ListBox)
            {
                ((ListBox)listControl).Items.Add(string.Format(oTemp.Value));
            }
        }
    } 
```

此方法从以下位置调用：

```
 public ComboBox AddQuestionsComboBox(Dictionary<string, string> Items,
                       string Label, string Key, int Order, bool Mandatory)
    {
        ComboBox output; 

        output = AddControl<ComboBox>(Label, Key, Order);
        FormsTools.AddDictionaryToListControl(output, Items);
        AddTagField(output, Tags.Mandatory, Mandatory);

        return output;
    } 
```

使用以下行调用：

```
AddQuestionsComboBox(question.PickList, question.PromptTitle, question.FieldTag, 
i, offquest.Mandatory); 
```

希望有帮助。

编辑：我已经尝试了下面的所有建议，但仍然没有改进 - 我已经检查并重新检查了代码以及与之相关的所有方法，以获取我错过的一些额外格式，并没有发现任何可能导致格式正确设置的内容在一个阶段，然后在它出现在屏幕上时被分箱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:48:11.253

我看不出有问题。

```
var aoObjectArray = new Dictionary<string, string>();
aoObjectArray["A1"] = "Warehouse";
aoObjectArray["A2"] = "Front Office";
aoObjectArray["A3"] = "Developer Office";

foreach (KeyValuePair<string, string> oTemp in aoObjectArray)
{
    ((ComboBox)listControl).Items.Add(string.Format("{0} - {1}", oTemp.Key, oTemp.Value));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:06:49.090

这很愚蠢，但请尝试更改：

```
((ComboBox)listControl).Items.Add(string.Format("{0} - {1}", 
                                  oTemp.Key, oTemp.Value)); 
```

符合

```
string item = string.Format("{0} - {1}", oTemp.Key, oTemp.Value);
((ComboBox)listControl).Items.Add(item); 
```

# php - 简单的 HTML DOM 从标签中获取所有属性

> ID：14456621
> 
> 赞同：6
> 
> 时间：2013-01-22T10:39:40.780
> 
> 标签：php, html, dom

有点像一个两部分的问题，但也许一个回答另一个。我试图从一个

```
<div id="foo">
<div class="bar"><a data1="xxxx" data2="xxxx" href="http://foo.bar">Inner text"</a>
<div class="bar2"><a data3="xxxx" data4="xxxx" href="http://foo.bar">more text"</a> 
```

这是我现在正在使用的。

```
$articles = array();
$html=file_get_html('http://foo.bar');
foreach($html->find('div[class=bar] a') as $a){
    $articles[] = array($a->href,$a->innertext);
} 
```

这可以完美地从第一个 div 类中获取 href 和内部文本。我尝试将 $a->data1 添加到 foreach ，但没有奏效。

如何在获取 href 和 innertext 的同时获取这些内部数据标签。

还有一种用一个语句来获得两个类的好方法吗？我假设我可以根据 id 建立查找并获取所有 div 信息。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-22T10:49:59.467

要获取所有这些属性，您应该在调查解析的元素之前，如下所示：

```
foreach($html->find('div[class=bar] a') as $a){
  var_dump($a->attr);
} 
```

...看看这些属性是否存在。它们似乎不是有效的 HTML，因此解析器可能会丢弃它们。

如果它们存在，您可以像这样阅读它们：

```
foreach($html->find('div[class=bar] a') as $a){
  $article = array($a->href, $a->innertext);
  if (isset($a->attr['data1'])) {
    $article['data1'] = $a->attr['data1'];
  }
  if (isset($a->attr['data2'])) {
    $article['data2'] = $a->attr['data2'];
  }
  //...
  $articles[] = $article;
} 
```

要获取这两个类，您可以使用多个选择器，以逗号分隔：

```
foreach($html->find('div[class=bar] a, div[class=bar2] a') as $a){
... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-30T03:24:03.653

我知道这个问题很老，但是 OP 询问他们如何在一个语句中获得所有属性。我只是为我正在做的一个项目做这个。

`getAllAttributes()`您可以使用该方法获取元素的所有属性。结果会自动存储在一个名为 的数组属性中`attr`。

在下面的示例中，我抓取了所有链接，但您可以随心所欲地使用它。注意：这也适用于`data-`属性。因此，如果有一个名为的属性，则在您运行该方法`data-url`后将可以访问它。`$e->attr['data-url']``getAllAttributes`

在您的情况下，您要查找的属性将是`$e->attr['data1']`and `$e->attr['data2']`。如果不是 OP，希望这对某人有所帮助。

***获取所有属性***

```
$html = file_get_html('somefile.html');
foreach ($html->find('a') as $e) {   //used a tag here, but use whatever you want
    $e->getAllAttributes();

    //testing that it worked
    print_r($e->attr);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-17T06:03:39.713

```
$data1 = $html->find('.bar > a', 0)->attr['data1'];
$data2 = $html->find('.bar > a', 0)->attr['data2']; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-29T07:31:56.277

检查此代码

```
<?php
$html = file_get_html('somefile.html');
foreach ($html->find('a') as $e) { 
$filter = $e->getAttribute('data-filter-string');
}
?> 
```

# java - JTASessionContext 与 JDBCTransactionFactory 一起使用；使用 getCurrentSession() 时自动刷新将无法正常运行

> ID：14456622
> 
> 赞同：2
> 
> 时间：2013-01-22T10:39:41.480
> 
> 标签：java, hibernate, jdbc, jta

在我的应用程序中使用休眠，每次我做一个事务，我都会收到这个警告。它正在向我的日志发送垃圾邮件。

```
JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession() 
```

我认为是`hibernate.current_session_context_class`财产造成的。

```
<hibernate-configuration>
<session-factory>
    <property name="hibernate.connection.driver_class">net.sourceforge.jtds.jdbc.Driver</property>
    <property name="hibernate.connection.pool_size">5</property>
    <property name="show_sql">false</property>
    <property name="dialect">org.hibernate.dialect.SQLServerDialect</property>
    <property name="hibernate.current_session_context_class">jta</property>

    <mapping class="foo.bar.Class1" />
    <mapping class="foo.bar.Class2" />
    <mapping class="foo.bar.Class3" />
    <mapping class="foo.bar.Class4" />
    <mapping class="foo.bar.Class5" />
</session-factory> 
```

这是我应该担心的事情吗？如果没有，我怎样才能阻止出现警告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:47:11.640

据我所知，除非您提供 persistence.xml 以将数据源配置为 JTA，否则无法使用 Spring 配置 Hibernate JPA 和 JTA 支持。也许这样的事情会帮助你摆脱警告：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="something" transaction-type="JTA">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>blah blah</jta-data-source>
        <properties>
            <property name="hibernate.archive.autodetection" value="class"/>
            <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider"/>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
            <property name="hibernate.current_session_context_class" value="jta"/>
            <property name="hibernate.transaction.manager_lookup_class" value="blah blah"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.SQLServerDialect"/>          
            <property name="hibernate.connection.release_mode" value="after_statement"/>
        </properties>
    </persistence-unit>
</persistence> 
```

我还建议您禁用**allowLocalTransactions**以便您的代码始终作为事务运行。

# ruby-on-rails-3.2 - 未知属性：rails 3.2.11 更新后延迟作业队列

> ID：14456626
> 
> 赞同：3
> 
> 时间：2013-01-22T10:40:00.703
> 
> 标签：ruby-on-rails-3.2, delayed-job

都在标题中。在安全警告之后，我将我的 rails 3.2.3 更新到 3.2.11 一切正常，但我意识到延迟的作业不再发送消息，并出现错误“未知属性：队列”

我试图重新创建更新迁移： rails generate delayed_job:upgrade 但它告诉我已经存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T06:55:13.517

跑`rake db:migrate`

`rails generate delayed_job:upgrade`生成了迁移，但在您实际运行迁移之前，您的数据库不会被修改。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-10T11:38:59.123

替代@brettish的答案，您可以自己做（我写这个是因为我遇到了同样的问题并且`delayed_job:upgrade`生成器对我来说是未定义的）。

在版本 3 中，`queue`添加了属性。

您可以按照以下步骤操作：

创建迁移 `rails generate migration AddQueueToDelayedJobs`

添加`queue`到delayed_jobs 表如下：

```
class AddQueueToDelayedJobs < ActiveRecord::Migration[5.1]
  def self.up
    add_column :delayed_jobs, :queue, :string
  end
  def self.down
    remove_column :delayed_jobs, :queue
  end
end 
```

注意：我使用的是 Rails 5.1。

希望能帮助到你！

# jquery - 如何停止动态元素的事件冒泡？

> ID：14456627
> 
> 赞同：-1
> 
> 时间：2013-01-22T10:40:03.097
> 
> 标签：jquery

```
$(".remove_btn").live('click', function(e){
   e.preventDefault();
   e.stopImmediatePropagation();
   $(this).parent("td").fadeOut("slow",function(){
     $(this).remove();
   });
}); 
```

此事件会触发多次并删除所有项目。如何阻止它。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:51:20.113

```
$(".remove_btn").live('click', function(e){
   $(this).parent("td").fadeOut("slow",function(){
     $(this).remove();
   });
   e.preventDefault();
}); 
```

# twitter - Twitter请求超出问题

> ID：14456630
> 
> 赞同：1
> 
> 时间：2013-01-22T10:40:12.257
> 
> 标签：twitter, twitter-oauth

Twitter 请求超出问题。它显示请求超过每小时 150 个。

这是我的代码：

```
$trends_url = "https://api.twitter.com/1/statuses/friends.json?screen_name=".$_SESSION['Auth']['User']['screen_name'];
            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL, $trends_url);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
            $curlout = curl_exec($ch);
            curl_close($ch);
            $response = json_decode($curlout, true); 
```

我正在使用 PHP curl 获取 Twitter 好友列表。如果我在浏览器中手动发布此 URL，例如`"https://api.twitter.com/1/statuses/friends.json?screen_name=Rock_Feather"`.

它工作正常，但在使用 curl 时没有返回数据。

# ruby - 什么是触发器运算符？

> ID：14456634
> 
> 赞同：18
> 
> 时间：2013-01-22T10:40:17.787
> 
> 标签：ruby, regex, perl, language-agnostic, flip-flop

我最近在 Perl 和 Ruby 中听到并阅读了有关使用正则表达式的触发器，但我无法找到它们的真正工作原理以及常见用例是什么。

谁能以与语言无关的方式解释这一点？

现在我了解了它是什么以及它是如何工作的，我将把这个问题改写成简单的：什么是触发器运算符？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T12:29:32.917

Perl 中的触发器运算符在左操作数为真时计算为真，并一直计算为真，直到右操作数为真。左右操作数可以是任何类型的表达式，但最常与正则表达式一起使用。

使用正则表达式，可用于查找两个标记之间的所有行。这是一个简单的例子，展示了它是如何工作的：

```
use Modern::Perl;

while (<DATA>)
{
    if (/start/ .. /end/)
    {
        say "flip flop true: $_";
    }
    else
    {
        say "flip flop false: $_";
    }
}

__DATA__
foo
bar
start
inside
blah
this is the end
baz 
```

触发器运算符将适用于从`start`until的所有行`this is the end`。

运算符的双点版本允许第一个和第二个正则表达式在同一行上都匹配。因此，如果您的数据看起来像这样，则上述程序仅适用于以下行`start blah end`：

```
foo
bar
start blah end
inside
blah
this is the end
baz 
```

如果您不希望第一个和第二个正则表达式匹配同一行，则可以使用三点版本：`if (/start/ ... /end/)`.

请注意，应注意不要将触发器运算符与范围运算符混淆。在列表上下文中，`..`有一个完全不同的功能：它返回一个连续值的列表。例如

```
my @integers = 1 .. 1000; #makes an array of integers from 1 to 1000\. 
```

我不熟悉 Ruby，但[Lee Jarvis 的链接](http://gist.github.com/baa007793b683ce3c5ca)表明它的工作方式类似。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-22T20:51:41.503

这是@dan1111 演示的直接 Ruby 翻译（说明 Ruby 从 Perl 窃取的内容比 Flip_flop 还多）：

```
while DATA.gets
  if $_ =~ /start/ .. $_ =~ /end/ 
    puts "flip flop true: #{$_}"
  else
    puts "flip flop false: #{$_}"
  end
end

__END__
foo
bar
start
inside
blah
this is the end
baz 
```

更惯用的红宝石：

```
DATA.each do |line|
  if line =~ /start/ .. line =~ /end/ 
    puts "flip flop true: #{line}"
  else
    puts "flip flop false: #{line}"
  end
end

__END__
foo
bar
start
inside
blah
this is the end
baz 
```

# android - Java android：当我重新点击按钮时，应用程序直接关闭

> ID：14456635
> 
> 赞同：0
> 
> 时间：2013-01-22T10:40:19.677
> 
> 标签：android, json, android-asynctask, android-activity

我有问题..当我启动我的应用程序并单击按钮 le 应用程序直接关闭...我不知道如何解决问题...您有什么想法吗？

有时，该应用程序成功运行，但是当我重新单击时，该应用程序直接关闭:(

我的代码：

```
public class AsyncBigCalculActivity extends Activity {

    private Button mButton;
    private TextView data;
    private String dataImplode;
    PostTask PostTask = new PostTask(this);

    public void sendSMS(String phoneNumber, String message)
    {  
        Toast.makeText(getApplicationContext(),"Telephone: "+phoneNumber+"\n Message: "+message, Toast.LENGTH_LONG).show();
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // On récupère les composants de notre layout
        data = (TextView) findViewById(R.id.data);
        mButton = (Button) findViewById(R.id.btnLaunch);

        // On met un Listener sur le bouton
        mButton.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                AsyncBigCalculActivity activity;
                    PostTask.execute();

            }
        });         
}

       // The definition of our task class
       private class PostTask extends AsyncTask<String, Integer, String> {

           private AsyncBigCalculActivity activty;

       public PostTask(AsyncBigCalculActivity activty)
       {
          this.activty = activty;
       }

       @Override
       protected void onPreExecute() {
          super.onPreExecute();

       }

       @Override
       protected String doInBackground(String... params) {

          return getServerData("http://site.com","etat","nok");
       }

       @Override
       protected void onProgressUpdate(Integer... values) {
          super.onProgressUpdate(values);

       }

       @Override
       protected void onPostExecute(String result) {
          super.onPostExecute(result);

          if(result != null && result.length()>0){
              String[] res = result.split(";-;");
              Toast.makeText(getApplicationContext(), res[0]+"\n"+res[1]+"\n"+res[2], Toast.LENGTH_LONG).show();
              AsyncBigCalculActivity.this.sendSMS("0000000000", "Hello World !");
          }

       }
       }

private String getServerData(String returnString,String post, String valeur) {

        String Num ="";
        String Message ="";
        String Id ="";

        InputStream is = null;
        String result = "";

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair(post,valeur));

        // Envoie de la commande http
        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(returnString);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

        }catch(Exception e){
            Log.e("log_tag", "Error in http connection " + e.toString());
        }

        // Convertion de la requÃªte en string
        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
        }catch(Exception e){
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        // Parse les donnÃ©es JSON
        try{
            JSONArray jArray = new JSONArray(result);
            for(int i=0;i<jArray.length();i++){

                JSONObject data = jArray.getJSONObject(i);

                Num = data.getString("destinataire_mobile");
                Message = data.getString("destinataire_message");
                Id = data.getString("id");

                dataImplode = Num+";-;"+Message+";-;"+Id;

                if(((Num.length())==12) && (((Message.length())>=2)) && Num != "" && Message !=""){

                    SmsManager sms = SmsManager.getDefault();
                    ArrayList<String> parts = sms.divideMessage(Message);
                    sms.sendMultipartTextMessage(Num, null, parts, null, null);

                    getServerData("site.com","id",Id);

                }

            }
        }catch(JSONException e){
            Log.e("log_tag", "Error parsing data " + e.toString());
        }
        return dataImplode;         
    }

} 
```

我的日志猫：

```
01-22 11:29:58.219: I/global(6771): In close() at SocketHttpClientConnection
01-22 11:29:58.619: E/log_tag(6771): Error parsing data org.json.JSONException: Value null of type org.json.JSONObject$1 cannot be converted to JSONArray
01-22 11:30:21.929: D/AndroidRuntime(6771): Shutting down VM
01-22 11:30:21.929: W/dalvikvm(6771): threadid=1: thread exiting with uncaught exception (group=0x40a4e228)
01-22 11:30:21.939: E/AndroidRuntime(6771): FATAL EXCEPTION: main
01-22 11:30:21.939: E/AndroidRuntime(6771): java.lang.IllegalStateException: Cannot execute task: the task has already been executed (a task can be executed only once)
01-22 11:30:21.939: E/AndroidRuntime(6771):     at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:553)
01-22 11:30:21.939: E/AndroidRuntime(6771):     at android.os.AsyncTask.execute(AsyncTask.java:511)
01-22 11:30:21.939: E/AndroidRuntime(6771):     at com.arnaud.AsyncBigCalculActivity$1.onClick(AsyncBigCalculActivity.java:68)
01-22 11:30:21.939: E/AndroidRuntime(6771):     at android.view.View.performClick(View.java:3538)
01-22 11:30:21.939: E/AndroidRuntime(6771):     at android.view.View$PerformClick.run(View.java:14330)
01-22 11:30:21.939: E/AndroidRuntime(6771):     at android.os.Handler.handleCallback(Handler.java:608)
01-22 11:30:21.939: E/AndroidRuntime(6771):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-22 11:30:21.939: E/AndroidRuntime(6771):     at android.os.Looper.loop(Looper.java:156)
01-22 11:30:21.939: E/AndroidRuntime(6771):     at android.app.ActivityThread.main(ActivityThread.java:5005)
01-22 11:30:21.939: E/AndroidRuntime(6771):     at java.lang.reflect.Method.invokeNative(Native Method)
01-22 11:30:21.939: E/AndroidRuntime(6771):     at java.lang.reflect.Method.invoke(Method.java:511)
01-22 11:30:21.939: E/AndroidRuntime(6771):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-22 11:30:21.939: E/AndroidRuntime(6771):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-22 11:30:21.939: E/AndroidRuntime(6771):     at dalvik.system.NativeStart.main(Native Method) 
```

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:47:36.090

使用布尔标志来控制用户单击 Button 并阻止 AsyncTask 再次启动（如果它已经在执行）。将您的代码更改为：

```
public class AsyncBigCalculActivity extends Activity {
      // your code here...
   public static boolean status=false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        PostTask = new PostTask(this);

        mButton = (Button) findViewById(R.id.btnLaunch);
        // On met un Listener sur le bouton
        mButton.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
               if(!status){
                AsyncBigCalculActivity activity;
                   status=true;
                    PostTask.execute();
                }
                else{
                        // show message here
                 }

            }
        });         
}

       // The definition of our task class
       private class PostTask extends AsyncTask<String, Integer, String> {

       @Override
       protected void onPreExecute() {
          super.onPreExecute();
            status=true;  //<< make status true 
       }

       @Override
       protected String doInBackground(String... params) {

          return getServerData("http://site.com","etat","nok");
       }

       @Override
       protected void onProgressUpdate(Integer... values) {
          super.onProgressUpdate(values);

       }

       @Override
       protected void onPostExecute(String result) {
          super.onPostExecute(result);

          status=false; //<< make status false 
       } 
       } 
```

第二种方法是使用[AsyncTask.Status](http://developer.android.com/reference/android/os/AsyncTask.Status.html)并防止用户在已经运行时再次启动它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:53:25.933

根据[AsyncTask 的文档](http://developer.android.com/reference/android/os/AsyncTask.html) `The task can be executed only once (an exception will be thrown if a second execution is attempted.)`。

这意味着您必须在每次要运行 PostTask 时创建一个新对象。如果您在运行时或运行后不需要引用所述对象，只需使用它来启动您的任务：

```
public void onClick(View arg0) {
   if(!status){
      AsyncBigCalculActivity activity;
         status=true;
         new PostTask.execute(); // create new instance of PostTask and execute it.
   }
   else {
      // show message here
   }
} 
```

或者，如果您需要对其进行引用：

```
public void onClick(View arg0) {
   if(!status){
      AsyncBigCalculActivity activity;
         status=true;
         postTask = new PostTask();
         postTask.execute();
   }
   else {
      // show message here
   }
} 
```

postTask 在哪里`PostTask postTask = null;`。将变量命名为与类名相同并不是最好的主意。

# spring - 添加记住我功能会引发异常

> ID：14456638
> 
> 赞同：0
> 
> 时间：2013-01-22T10:40:21.140
> 
> 标签：spring, spring-security

我有以下弹簧安全配置。

```
 <beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xsi:schemaLocation="http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

<!-- For S2OAuth endpoints -->
<http   pattern="/oauth/token" 
        create-session="stateless" 
        authentication-manager-ref="clientAuthenticationManager" 
        entry-point-ref="oauthAuthenticationEntryPoint"
        xmlns="http://www.springframework.org/schema/security">
    <intercept-url pattern="/oauth/token" access="IS_AUTHENTICATED_FULLY" />
    <anonymous enabled="false" />
    <http-basic entry-point-ref="oauthAuthenticationEntryPoint" />
    <!-- include this only if you need to authenticate clients via request parameters -->
    <custom-filter ref="clientCredentialsTokenEndpointFilter" before="BASIC_AUTH_FILTER" />
</http>

<http use-expressions="true">
    <!-- Authentication policy -->
    <form-login login-page="/signin" login-processing-url="/signin/authenticate" authentication-failure-url="/signin?error=1" />
    <logout logout-url="/signout" delete-cookies="JSESSIONID" />
    <!-- Authorization policy definition: TODO consider replacing with @Secured on @Controllers -->
    <intercept-url pattern="/" access="permitAll" />
    <intercept-url pattern="/favicon.ico" access="permitAll" />
    <intercept-url pattern="/members/**" access="permitAll" />
    <intercept-url pattern="/groups/**" access="permitAll" />
    <intercept-url pattern="/pubsub/**" access="permitAll" />
    <intercept-url pattern="/resources/**" access="permitAll" />
    <intercept-url pattern="/signup" access="permitAll" requires-channel="#{environment['application.secureChannel']}" />   
    <intercept-url pattern="/signin" access="permitAll" requires-channel="#{environment['application.secureChannel']}" />
    <intercept-url pattern="/signin/*" access="permitAll" requires-channel="#{environment['application.secureChannel']}" />
    <intercept-url pattern="/reset" access="permitAll" requires-channel="#{environment['application.secureChannel']}" />
    <!-- TODO this would probably be better mapped to simply /invite?token={token} but not able to vary security policy here based on presence of a request parameter.  Consider @Secured on @Controller. -->               
    <intercept-url pattern="/invite/accept" access="permitAll" requires-channel="#{environment['application.secureChannel']}" />
    <!-- TODO this should be restricted to admin users only -->
    <intercept-url pattern="/admin/**" access="permitAll" />           
    <intercept-url pattern="/**" access="isAuthenticated()" requires-channel="#{environment['application.secureChannel']}" />
    <custom-filter ref="resourceServerFilter" before="EXCEPTION_TRANSLATION_FILTER" />
</http>

<authentication-manager alias="authenticationManager">
    <authentication-provider ref="usernamePasswordAuthenticationProvider" />
</authentication-manager>

<bean id="accessDecisionManager" class="org.springframework.security.access.vote.UnanimousBased" xmlns="http://www.springframework.org/schema/beans">
    <constructor-arg>
        <list>
            <bean class="org.springframework.security.oauth2.provider.vote.ScopeVoter" />
            <bean class="org.springframework.security.access.vote.RoleVoter" />
            <bean class="org.springframework.security.access.vote.AuthenticatedVoter" />
        </list>
    </constructor-arg>
</bean>

<!-- Remember Me -->
<http>
  <remember-me services-ref="rememberMeServices" key="myRememberMeKey" />
</http>

<bean id="jdbcRememberMeRepository" class="com.springsource.greenhouse.rememberme.JdbcRememberMeRepository" xmlns="http://www.springframework.org/schema/beans"/>
<bean id="coreUserDetailsService" class="com.springsource.greenhouse.rememberme.CoreUserDetailsService" xmlns="http://www.springframework.org/schema/beans"/>

<bean id="rememberMeServices" class="org.springframework.security.web.authentication.rememberme.PersistentTokenBasedRememberMeServices" xmlns="http://www.springframework.org/schema/beans">
  <property name="tokenRepository" ref="jdbcRememberMeRepository" />
  <property name="userDetailsService" ref="coreUserDetailsService" />
  <property name="key" value="myRememberMeKey" />
  <property name="alwaysRemember" value="true" />
</bean>

<!-- For S2OAuth endpoints -->
<authentication-manager id="clientAuthenticationManager" xmlns="http://www.springframework.org/schema/security">
    <authentication-provider user-service-ref="clientDetailsUserService" />
</authentication-manager>

<beans:bean id="clientDetailsUserService" class="org.springframework.security.oauth2.provider.client.ClientDetailsUserDetailsService">
    <beans:constructor-arg ref="clientDetails" />
</beans:bean>

<beans:bean id="oauthAuthenticationEntryPoint" class="org.springframework.security.oauth2.provider.error.OAuth2AuthenticationEntryPoint">
    <beans:property name="realmName" value="greenhouseApi" />
</beans:bean>

<beans:import resource="security-oauth-provider.xml" />
</beans:beans> 
```

我收到以下异常。

```
Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
    org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: No AuthenticationEntryPoint could be established. Please make sure you have a login mechanism configured through the namespace (such as form-login) or specify a custom AuthenticationEntryPoint with the 'entry-point-ref' attribute 
Offending resource: class path resource [com/springsource/greenhouse/config/security.xml]
at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
... 
```

我是春季安全的新手。我不知道这个异常的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:52:40.537

您不能将您的 remember-me 声明添加到新的**空 http**元素中。使用已经配置了身份验证入口点的其他一些现有**http**元素（例如通过**form-login**元素）：

```
<http use-expressions="true">
    <!-- Authentication policy -->
    <form-login login-page="/signin" login-processing-url="/signin/authenticate" authentication-failure-url="/signin?error=1" />
    <remember-me services-ref="rememberMeServices" key="myRememberMeKey" />
    ...
<http/> 
```

# javascript - 所有浏览器中渐变颜色的动态变化

> ID：14456643
> 
> 赞同：2
> 
> 时间：2013-01-22T10:40:34.593
> 
> 标签：javascript, css

我想创建一个脚本，用户可以通过在两个不同的文本字段中输入颜色代码来设置 div 的渐变。

这是我的代码：

```
 <style>
        #gradient {
            background: #0A284B;
    background: -webkit-gradient(linear, left top, left bottom, from(#0A284B), to(#135887));
    background: -webkit-linear-gradient(#0A284B, #135887);
    background: -moz-linear-gradient(top, #0A284B, #135887);
    background: -ms-linear-gradient(#0A284B, #135887);
    background: -o-linear-gradient(#0A284B, #135887);
    background: linear-gradient(#0A284B, #135887);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#0A284B', endColorstr='#135887');
    zoom: 1;    }  
    </style>

    <script>

    function myFunction()
    {
    color1 = document.getElementById("color1").value;
    color2 = document.getElementById("color2").value;

    document.getElementById("gradient").style.background="-webkit-gradient(linear, left top, left bottom, from("+color1+"), to("+color2+"))";
    document.getElementById("gradient").style.background="-webkit-linear-gradient("+color1+", "+color2+")";
    document.getElementById("gradient").style.background="-moz-linear-gradient(top, "+color1+", "+color2+")";
    document.getElementById("gradient").style.background="-ms-linear-gradient("+color1+", "+color2+")";
    document.getElementById("gradient").style.background="-o-linear-gradient("+color1+", "+color2+")";
    document.getElementById("gradient").style.background="linear-gradient("+color1+", "+color2+")";
document.getElementById("gradient").style.filter="progid:DXImageTransform.Microsoft.Alpha(startColorstr='"+color1+"', endColorstr='"+color2+"')";

    }
    </script>

    <input type="text" id="color1" onkeyup="myFunction()" value="#E9EDF6"></input>
    <input type="text" id="color2" onkeyup="myFunction()" value="#AABBDD"></input>

    <div id="gradient" style="height:500px">
        I have gradient
    </div> 
```

该功能在 Firefox 和 IE10 中运行良好，但在较旧的 IE 版本中无法正常运行。我猜这是因为最后一个后台调用覆盖了其他用于旧 IE 版本的调用。

那么你会怎么做呢？我应该创建一个函数，在调用颜色更改函数之前首先检查使用的浏览器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:45:25.797

您可能想看看令人惊叹的[Ultimate CSS Gradient Generator](http://www.colorzilla.com/gradient-editor/)。

如您所见，它生成的代码比您所做的要多，每行末尾的注释指示哪些浏览器受该行影响：

```
background: #1e5799; /* Old browsers */
background: -moz-linear-gradient(top, #1e5799 0%, #2989d8 50%, #207cca 51%, #7db9e8 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1e5799), color-stop(50%,#2989d8), color-stop(51%,#207cca), color-stop(100%,#7db9e8)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* IE10+ */
background: linear-gradient(to bottom, #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=0 ); /* IE6-9 */ 
```

具体来说，最后一行是您需要的，用于 IE6-IE9。

对于不处理渐变的旧版浏览器（IE5.5...），您可能还想包含第一行。

* * *

**编辑**

在 javascript 中添加过滤器部分，在其他行之后：

```
document.getElementById("gradient").style.filter = 
         "progid:DXImageTransform.Microsoft.Alpha(startColorstr='"+
                 color1+"', endColorstr='"+color2+"')" 
```

并且，根据[这个答案](https://stackoverflow.com/questions/7131356/filter-progiddximagetransform-microsoft-gradient-is-not-working-in-ie7)，请务必`overflow: auto`为您的对象设置或设置高度。

* * *

**编辑#2**

你是对的，它会与其他属性中断（在 CSS 中不会影响它）。

然后检查它是否是IE，并使用这个JS：

```
document.getElementById("gradient").filters.item("DXImageTransform.Microsoft.gradient").startColorstr = color1;
document.getElementById("gradient").filters.item("DXImageTransform.Microsoft.gradient").endColorstr = color2; 
```

# java - XML 文件中的 Android 数据存储

> ID：14456644
> 
> 赞同：0
> 
> 时间：2013-01-22T10:40:36.073
> 
> 标签：java, android, xml

在我的 android 应用程序中，我使用 xml 文件在应用程序中存储一些历史信息。

以下是我用来在文件中输入新记录的代码。

```
String filename = "file.xml";
File xmlFilePath = new File("/data/data/com.testproject/files/" + filename); 

private void addNewRecordToFile(History history)
{
    try
    {
        DocumentBuilderFactory dbfac = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = dbfac.newDocumentBuilder();
        Document doc = docBuilder.parse(xmlFilePath);    

        Element rootEle = doc.getDocumentElement();                                                                             

        Element historyElement = doc.createElement("History");                         
        rootEle.appendChild(historyElement);                                           

        Element customerEle = doc.createElement("customer");                           
        customerEle.appendChild(doc.createTextNode(history.getCustomer()));               
        historyElement.appendChild(customerEle);                                       

        Element productEle = doc.createElement("product");                            
        productEle.appendChild(doc.createTextNode(history.getProduct()));                  
        historyElement.appendChild(productEle);                                        

        //-------->
        DOMSource source = new DOMSource(doc);                                        

        TransformerFactory transformerFactory = TransformerFactory.newInstance();      
        Transformer transformer = transformerFactory.newTransformer();                 
        transformer.setOutputProperty(OutputKeys.INDENT, "yes");
        transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2");
        StreamResult result = new StreamResult(xmlFilePath);                          
        transformer.transform(source, result);   
    }
    catch (ParserConfigurationException e) 
    {
        Log.v("State", "ParserConfigurationException" + e.getMessage());
    } 
    catch (SAXException e) 
    {
        Log.v("State", "SAXException" + e.getMessage());
    } 
    catch (IOException e) 
    {
        Log.v("State", "IOException" + e.getMessage());
    } 
    catch (TransformerConfigurationException e) {
        e.printStackTrace();
    }
    catch (TransformerFactoryConfigurationError e) {
        e.printStackTrace();
    } 
    catch (TransformerException e) {
        e.printStackTrace();
    }
} 
```

XML 文件格式

```
<?xml version="1.0" encoding="UTF-8"?>
<HistoryList>
  <History>
    <customer>Gordon Brown Ltd</customer>
    <product>Imac</product>
  </History>
  <History>
    <customer>GG Martin and Sons</customer>
    <product>Sony Vaio</product>
  </History>
  <History>
    <customer>PR Thomas Ltd</customer>
    <product>Acer Laptop</product>
  </History>
</HistoryList> 
```

因此，使用此代码，我可以成功地将新的 rocord 添加到文件中。但我在 android 中的最低目标版本应该是 API 级别 4。此代码适用于 API 级别 8 及更高版本。

**DOMSource**，**TransformerFactory**类在 8 以下的 android API 级别中不可用。因此，注释**//-------->**之前的所有内容都适用于 8 以下的 API。

有谁知道我可以在不使用**Transformer** API 的情况下写入 xml 文件的任何方式。提前致谢...

**编辑......**

就我而言，我必须使用 xml 文件来存储信息。这就是为什么我不寻找 sharedpreferences 或 Sqlite DB 来存储数据的原因。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:44:49.573

也许您应该将这些信息存储为 SharedPreferences 代替？如果您有特定原因尝试将其写入 XML，那很好。

否则，我建议在 Android 中使用不同的持久性方法 - 因为有一些内置方法可以比使用 XML 更容易。

# iphone - 获取与 iphone 设置应用程序中类似的时区列表

> ID：14456645
> 
> 赞同：4
> 
> 时间：2013-01-22T10:40:35.593
> 
> 标签：iphone, objective-c, xcode

我可以使用获取时区列表

```
NSArray *timezoneNames = [NSTimeZone knownTimeZoneNames] ; 
```

但生成的时区列表并未涵盖所有主要城市名称。就像印度一样，它只显示加尔各答市。虽然我希望也显示新德里（首都）的时区。

所以我想生成与 iOS 在其 Settings->General->Date Time->Timezone 中生成的相同时区列表，因为它显示了世界上几乎所有主要城市。我们可以获取这个列表吗？还是我们需要为此创建自己的数据库（比如`.plist`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-13T10:09:39.100

Settings.app 使用 plist 文件显示时区列表。文件名是：“ **all_cities_adj.plist** ”。要访问此文件，您需要深入了解 SDK 本身。我在下面提到了遍历路径，您可以在其中找到它。

1.转到您拥有 Xcode 的文件夹。2.右键单击它，然后单击**Show Package Contents**。3.然后**Contents** --> **Developer** --> **Platforms** --> **iPhoneSimulator.platform** --> **Developer** --> **SDKs** --> **iPhoneSimulator6.1.sdk** --> **System** --> **Library** -- > **PrivateFrameworks** --> **AppSupport .framework** 4.在这个文件夹中你可以找到plist文件。

请让我知道它是否有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:46:14.923

我也遇到了这个问题，无法获得与设置应用程序中相同的时区。

您将需要创建自己的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T13:07:42.807

首先，您需要下载 .csv 文件，该文件将为您提供国家/城市/时区/地区。使用此文件，我们可以显示国家及其城市的列表。当用户选择任何城市时，我们需要将其与尊重的国家/地区进行映射，然后该国家/地区需要与设备的时区（[NSTimeZone knownTimeZoneNames];）进行映射。

此链接在这方面也可能有用：

[按国家和地区获取时区](https://stackoverflow.com/questions/7977736/get-timezone-by-country-and-region)

# ruby-on-rails-3 - 测试助手时缺少方法

> ID：14456646
> 
> 赞同：0
> 
> 时间：2013-01-22T10:40:36.840
> 
> 标签：ruby-on-rails-3, unit-testing

我想创建一个可以向 rails 添加一些辅助方法的 gem：

```
module SharpAssets
  class Railtie < Rails::Railtie
    initializer "my_railtie.configure_rails_initialization" do |app|  
        app.middleware.use ::ActionDispatch::Static, "public"
        ActionView::Base.send :include, ViewHelpers

    end

    config.to_prepare do
      ActionView::Helpers.class_eval do
        #ActionView::Base.send :include, SharpAssets::ViewHelpers
      end
    end
  end

  module ViewHelpers
        #include Generators::Pagedown
        puts "initializer my_railtie.configure_rails_initialization"

        def sharp_assets
            "sharp_assets"
        end
    end
end 
```

我的测试用例是：

```
require 'test_helper'

class SharpAssetsTest < ActionView::TestCase

  test "pagedown_tag be html safe" do
    assert sharp_assets, ""
  end
end 
```

我的 test_helper 是：

```
# Configure Rails Environment
ENV["RAILS_ENV"] = "test"

require File.expand_path("../dummy/config/environment.rb",  __FILE__)
require "rails/test_help"

Rails.backtrace_cleaner.remove_silencers!

# Load support files
Dir["#{File.dirname(__FILE__)}/support/**/*.rb"].each { |f| require f }

# Load fixtures from the engine
if ActiveSupport::TestCase.method_defined?(:fixture_path=)
  ActiveSupport::TestCase.fixture_path = File.expand_path("../fixtures", __FILE__)
end 
```

我的gem的目录是：

![在此处输入图像描述](../Images/1be4c2a25f1731f5e63bac31e28fd681.png)

错误是

```
NameError: undefined local variable or method `sharp_assets' for #<SharpAssetsTest:0x007ffe3c5abf08> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:08:07.513

您是否在 test_helper.rb 中需要您的库？

# java - 处理动态变化的元素 id - 使用 selenium webdriver

> ID：14456647
> 
> 赞同：0
> 
> 时间：2013-01-22T10:40:38.620
> 
> 标签：java, javascript, selenium, selenium-webdriver, dopostback

我有登录页面，当单击登录按钮时，它会打开新标签。

我将控件移动到新窗口使用，

```
driver.switchTo().window("_blank"); 
```

当我单击一个`Button`时，它将打开新的弹出窗口（该弹出窗口不是普通窗口，它是 iframe）。

我选择了一个弹出窗口，使用

```
driver.switchTo().frame("frameName"); 
```

该弹出窗口有记录列表；每条记录都有单独的“选择”选项（带有动态变化的 ID）。

```
driver.findElement(By.xpath("//a[@id='radgrdPeople_ctl00_ctl04_lnkSelect']")).click(); 
```

从列表中选择记录时，弹出窗口将关闭并刷新页面。

现在我想将控件返回到我的父窗口来做一些其他的事情。

成功选择了记录。但我无法再次聚焦父窗口。

我努力了：

```
driver.switchTo().defaultcontent();
driver.switchTo().window("_blank"); 
```

和

```
driver.getWindowHandles() 
```

我仍然遇到同样的问题。

我不知道是否必须使用任何 java 脚本执行程序来处理动态变化的元素 ID。

有人能帮我解决这个问题吗......

提前致谢。

通过 K.Ranjithkumar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:58:00.753

在单击登录按钮后的帖子中，您用于`WindowName`切换到新窗口。但是，在尝试过的解决方案中，您曾经`empty string`切换到新窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:51:41.690

您应该将第一个窗口设为父窗口

```
String parent=driver.getwindowhandle;
// then, set String popup to be equal to window handle of the 
// popup window
driver.switchTo().window( popup);
driver.findElement(By.id("okbutton")).click(); //assumes close of popup 
```

现在在弹出窗口上执行任务后，将控制权返回给父窗口：

```
driver.switchTo().window( parent );// switch back to parent window
driver.switchTo().defaultcontent(); // reset iframe context 
```

# qt - 自定义qt项目时使用条件

> ID：14456648
> 
> 赞同：7
> 
> 时间：2013-01-22T10:40:44.163
> 
> 标签：qt, qmake

再会！我有一个 qt 项目，我想使用 .pro 文件条件对其进行自定义。值得注意的是，我想使用一个 .pro 文件来获得多个输出，如下所示：

```
DEFINES += APP1=0 APP2=1
DEFINES += TYPE=APP1
if(TYPE == APP1) {
LIBS += <LIB1>
DESTDIR = <DIR1>
}
else {
LIBS += <LIB2>
DESTDIR = <DIR2>
} 
```

但是当我尝试构建我的项目时，运行 qmake 时出现以下错误：

> 解析错误（'else'）

如何正确执行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T12:05:29.417

存储在`CONFIG`变量中的值由 特殊处理`qmake`。每个可能的值都可以用作范围的条件。因此，您的项目文件可以简单地编写为：

```
CONFIG += APP1

APP1 {
  LIBS += <LIB1>
  DESTDIR = <DIR1>
} else {
  LIBS += <LIB2>
  DESTDIR = <DIR2>
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-22T11:51:15.407

我只想注意关于条件的一件事确保大括号不是同一行。否则会失败

好的

```
CONFIG += opencv_32_bit

opencv_32_bit {

} else {

} 
```

将失败

```
CONFIG += opencv_32_bit

opencv_32_bit 
{

}
else
{

} 
```

我不知道为什么，但我遇到了这个问题，因为我更喜欢下一行的大括号

# javascript - 在 JSON.parse 函数中传递外部变量

> ID：14456651
> 
> 赞同：4
> 
> 时间：2013-01-22T10:40:47.580
> 
> 标签：javascript, json, node.js

我正在尝试通过使用该`JSON.parse`函数从 json 中获取一个值。我的 json 响应如下：

```
{
  "rows": 10,
  "os": "0",
  "page": "1",
  "total": "122",
  "projects": {
    "P143841": {
      "id": "P143841",
      "locations": [{
        "geoLocId": "0002220957",
        "latitude": "3.866667",
        "longitude": "11.516667"
      }],
    }
  }
} 
```

如果我这样做，我可以获得值 10`JSON.parse(obj.rows)`但是如果我将行分配给一个变量 say`var value = rows`然后我将它传递给`JSON.parse(obj.value)`我得到的函数`undefined`。

PS 我不知道响应参数的名称，即我不知道它是否会是`rows`或`os`引用上面的示例。我将从数据库中检索它们。如果我执行以下代码：

```
 for (var i=0;i<length;i++) {
    var value = responseParam_array[i];
    console.log(obj.value);
  } 
```

我得到了输出，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T11:12:05.477

根据其他答案，您不需要解析单个属性，只需解析原始 JSON，然后对结果对象进行操作。

但是对于这个问题：

> *“如果我将行分配给一个变量* `var value = rows` *，然后我将它传递给* `JSON.parse(obj.value)` *我得到的函数* `undefined`”

如果`value`是一个包含属性名称的变量，`obj`那么您需要：

```
obj[value]
// NOT
obj.value 
```

当您使用“点”表示法时，点右侧的部分被视为属性的文字名称，而不是变量。使用方括号语法计算括号中的表达式，并将其结果作为属性名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:44:32.130

您应该对整个对象进行 json 解析并在之后使用解析的对象（您不需要为自己解析每个属性）

```
var strObj = '{"rows": 10,"os": "0","page": "1","total": "122","projects":{"P143841":{"id":"P143841",}}';

var obj = JSON.parse(strObj);
var rows = obj.rows; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:43:56.700

如果我理解你的问题：

```
var str = '{ "some": "JSON String like the one above with", "rows": 10 }';
var parsed = JSON.parse(str);
var whatYouWant = parsed.rows; 
```

# c++ - 基于文件类型的 Xcode 中奇怪的语法错误

> ID：14456654
> 
> 赞同：2
> 
> 时间：2013-01-22T10:41:06.363
> 
> 标签：c++, objective-c, c, xcode, openal

我有一个具有此功能的 C 标头：

```
OSStatus MyGetDataFromExtAudioRef(ExtAudioFileRef ext_file_ref, const AudioStreamBasicDescription* restrict output_format, ALsizei max_buffer_size, void** data_buffer, ALsizei* data_buffer_size, ALenum* al_format, ALsizei* sample_rate); 
```

我可以将`#include`这个头文件放在一个 Objective-C 文件中并编译得很好。

如果我将同一个 Objective-C 文件更改为`.mm`后缀，而不是`.m`验证它现在被识别为 Objective-C++ 源代码，我会收到`Expected ')'`上面一行中的编译器错误。虽然不清楚，但似乎将错误的根源放在了 word`output_format`参数上。

就括号而言，上述函数中没有任何语法错误，我不明白为什么这一更改会产生任何影响。

这里有什么东西会跳出来吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:50:10.477

很简单，`restrict`关键字不是 C++ 标准的一部分，因此 C++ 编译器（用于编译 Objective-C++ 代码）无法识别它。

# php - 为什么如果...在我切换到 DBO 后停止工作？

> ID：14456658
> 
> 赞同：-4
> 
> 时间：2013-01-22T10:41:20.303
> 
> 标签：php, sql, if-statement, pdo

我现在有这个代码。

```
$select_links = "SELECT * FROM $table";
if (isset($_POST['link'])) {
    if ($_POST['link'] == '0'){
    }}
else {

$links = $conn->prepare($select_links);
$links->execute();
$links->setFetchMode(PDO::FETCH_ASSOC);  
while($row1 = $links->fetch())
{
echo $row1['name'];
};
} 
```

当我加载没有 _POST 的页面时，`echo $row1['name'];`可以正常工作。但是，如果我发送 POST`link=1`它不起作用。为什么？仅当 POST 包含`link=0`.

PS 在我切换到 DBO 之前它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:02:12.637

它不是任何“DBO”，而是您编写的代码。
尽管我只有在重新格式化后才设法理解它的含义。它是这样的：

```
$select_links = "SELECT * FROM $table";
if (isset($_POST['link'])) {
    if ($_POST['link'] == '0'){
        // do nothing
    }
} else {
    $links = $conn->prepare($select_links);
    $links->execute();
    $links->setFetchMode(PDO::FETCH_ASSOC);  
    while($row1 = $links->fetch())
    {
        echo $row1['name'];
    }
} 
```

因此，当您设置 POST link=1 时，它会通过`isset($_POST['link'])`检查，然后不会执行其他代码。

很可能你的意思是这样的

```
if (!empty($_POST['link'])) {
    $select_links = "SELECT * FROM $table";
    $links = $conn->prepare($select_links);
    $links->execute();
    $links->setFetchMode(PDO::FETCH_ASSOC);  
    while($row1 = $links->fetch())
    {
        echo $row1['name'];
    }
} 
```

如果您需要一些其他逻辑 - 没问题，请编写您想要的任何行为。
只需阅读手册并测试您尝试的所有内容。
...但是好吧，这对新手来说可能很难：

```
if (!isset($_POST['link']) || $_POST['link']) { 
```

方法

```
IF $_POST['link'] is NOT set OR $_POST['link'] NOT equal to 0 
```

# javascript - 办公室名称控制 PresenceEnabled 始终为 false

> ID：14456659
> 
> 赞同：3
> 
> 时间：2013-01-22T10:41:25.247
> 
> 标签：javascript, wpf, internet-explorer-9, activex

我有一个`WPF`带有`WebBrowser`控件的应用程序，它从本地磁盘加载一个 HTML 文件。在 HTML 文件中，我有 javascript 代码来创建一个 Office Lync Presence ActiveX Control ( `Name.NameCtrl.1`) 对象，该对象用于为某些用户显示联系人卡片。

对象已创建，但`PresenceEnabled`名称控件的属性始终为**false**。有什么想法可以解决这个问题吗？

我在计算机上安装了 Lync 2013。当我使用 Lync 2010 时，相同的代码运行良好。

我的浏览器是**IE 9**，我在 IE 8 和 IE 10 上也观察到了同样的问题（目前仅针对 IE）。

**Javascript代码：**

```
try {
    var presenceObj = new window.ActiveXObject("Name.NameCtrl.1");
} catch (err) { }

function showLync(element) {
    try {
        // Works fine till this part. However, presenceObj.PresenceEnabled is false.
        presenceObj.ShowOOUI("somecalculatedalias", 0, $(element).offset().left, $(element).offset().top);
    } catch (err) {
        // goes into the catch block above with a "Permission denied" error (-2146828218)
    }
} 
```

**更多详细信息**：我已将 MOTW（网络标记）添加到我的 HTML 页面，以确保它在没有警告的情况下显示，并且我可以看到页面确实加载到了正确的区域。从页面属性：`Local intranet | Protected Mode: Off`。

当我删除此 MOTW 时，我收到预期的警告“为了帮助保护您的安全，您的 Web 浏览器已限制此文件......（等等）”。当我允许被阻止的内容时，上面的相同代码可以正常工作，并且我可以从 ShowOOUI 调用中看到 Lync 弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T23:37:12.853

> 有什么想法可以解决这个问题吗？

将[AllowPartiallyTrustedCallers (APTCA) 属性](http://support.microsoft.com/kb/839300)放在程序集上。

以下是一些其他选择：

*   [安全区](http://support.microsoft.com/kb/174360)
*   [网络标记](http://msdn.microsoft.com/en-us/library/ms537628)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-05T07:33:55.013

该`PresenceEnabled`属性是`false`在不在 Intranet 或受信任站点上的页面上使用控件，或者如果 Windows Live Messenger/Skype for Business 等即时消息程序的受支持版本未运行。

# linux - wget 速度结果为通过或失败

> ID：14456665
> 
> 赞同：0
> 
> 时间：2013-01-22T10:41:51.823
> 
> 标签：linux, bash, wget

我正在使用以下内容来输出下载速度测试的结果

```
get -O /dev/null http://ipv4.download.thinkbroadband.com/10MB.zip 2>&1 | grep --only-matching '\([0-9.]\+ [KM]B/s\)' 
```

IE

10.5 MB/秒

我想做的就是让它也响应一个结果，即

如果速度=>5 MB/s 然后回显“通过”，否则回显“失败”

所以最终输出将是

通过 7 MB/秒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:57:14.793

添加

```
| awk ' { if (($1 > 10) && ($2 == "MB/s")) { printf("SPEED IS TOO DAMN HIGH - %s\n", $0); } elif (($1 > 5) && ($2 == "MB/s")) { printf("PASS - %s\n", $0); } else { printf ("FAIL - %s\n", $0); } } ' 
```

在命令行的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:09:26.407

真正需要做的只是一些改变。您需要使用命令替换来捕获命令的输出：

```
speed=$( wget -O /dev/null http://ipv4.download.thinkbroadband.com/10MB.zip 2>&1 | grep --only-matching '\([0-9.]\+ [KM]B/s\)' ) 
```

所以 $( ) 中的命令被执行，它的标准输出被分配给变量 $speed。

```
root@host$ speed=$( wget -O /dev/null http://ipv4.download.thinkbroadband.com/10MB.zip 2>&1 | grep --only-matching '\([0-9.]\+ [KM]B/s\)' )
root@host$ echo $speed
5.50 MB/s 
```

所以现在我们只需要将速度与您的目标进行比较。但单位可能会导致问题所以：

```
root@host$ val=${speed%% *}
root@host$ echo $val
5.50
root@host$ units=${speed##* }
root@host$ echo $units
MB/s 
```

构造 ${var%%pattern} 意味着从 var 的值的右侧剥离最长的模式匹配并返回结果。${var##patter} 做同样的事情，但从左侧开始。

所以现在我们可以继续检查

```
root@host$ if [[ ${units} == "MB/s" && $val > "5.0" ]]; then 
> echo "PASS $speed"
> else
> echo "FAIL $speed"
> fi
PASS 5.50 MB/s
root@host$ 
```

所以在这里我们确保我们以 MB/s 为单位，然后确保 val 大于您的目标速度。

# quickbooks - Quickbooks API v3 发布

> ID：14456672
> 
> 赞同：0
> 
> 时间：2013-01-22T10:42:10.273
> 
> 标签：quickbooks, quickbooks-online

我们正在尝试使用 QB API for java (ipp-java-devkit 2.0.9) 但我们无法获取退款......不支持知道发票是否为退款。

我在一些帖子中读到 v3 将有这样的支持，但它还不可用。你知道QB是打算发布这个版本还是会停止他们的开发？（我在几个月前读到 v3 版本计划在 2012 年发布，但我们是在 2013 年，它还没有发布）。

v2 非常不完整，它的文档 (javadoc) 真的很糟糕（它包含许多关于 QBD 或 QBO 字段可用性的错误）所以 v3 是我们对满足我们需求的可用产品的最后希望。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:21:04.497

QB桌面允许小企业主输入负数退货（库存会相应调整）。因此，只要发票总额为正，用户就可以有尽可能多的负数量行来模仿已退回（也称为退款）的商品

# php - 从 SMTP 服务器使用 PHP 发送电子邮件

> ID：14456673
> 
> 赞同：153
> 
> 时间：2013-01-22T10:42:11.110
> 
> 标签：php, email, smtp

```
$from = "someonelse@example.com";
$headers = "From:" . $from;
echo mail ("borutflis1@gmail.com" ,"testmailfunction" , "Oj",$headers); 
```

我无法用 PHP 发送电子邮件。我收到一个错误：`SMTP server response: 530 SMTP authentication is required`。

我的印象是您可以在没有 SMTP 的情况下发送电子邮件进行验证。我知道这封邮件可能会被过滤掉，但这并不重要。

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = localhost
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
sendmail_from = someonelse@example.com 
```

这是`php.ini`文件中的设置。我应该如何设置 SMTP？是否有任何 SMTP 服务器不需要验证或我必须自己设置服务器？

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2013-01-22T10:46:56.890

当您通过需要 SMTP 身份验证的服务器发送电子邮件时，您确实需要指定它，并设置主机、用户名和密码（如果不是默认值，可能还有端口 - 25）。

例如，我通常使用与以下设置类似的 PHPMailer：

```
$mail = new PHPMailer();

// Settings
$mail->IsSMTP();
$mail->CharSet = 'UTF-8';

$mail->Host       = "mail.example.com";    // SMTP server example
$mail->SMTPDebug  = 0;                     // enables SMTP debug information (for testing)
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->Port       = 25;                    // set the SMTP port for the GMAIL server
$mail->Username   = "username";            // SMTP account username example
$mail->Password   = "password";            // SMTP account password example

// Content
$mail->isHTML(true);                       // Set email format to HTML
$mail->Subject = 'Here is the subject';
$mail->Body    = 'This is the HTML message body <b>in bold!</b>';
$mail->AltBody = 'This is the body in plain text for non-HTML mail clients';

$mail->send(); 
```

您可以在此处找到有关 PHPMailer 的更多信息：[https ://github.com/PHPMailer/PHPMailer](https://github.com/PHPMailer/PHPMailer)

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-01-22T11:21:47.913

```
<?php
ini_set("SMTP", "aspmx.l.google.com");
ini_set("sendmail_from", "YOURMAIL@gmail.com");

$message = "The mail message was sent with the following mail setting:\r\nSMTP = aspmx.l.google.com\r\nsmtp_port = 25\r\nsendmail_from = YourMail@address.com";

$headers = "From: YOURMAIL@gmail.com";

mail("Sending@provider.com", "Testing", $message, $headers);
echo "Check your email now....&lt;BR/>";
?> 
```

或者，有关更多详细信息，[请继续阅读](http://web.archive.org/web/20150810100020/http://kb.zend.com:80/smtp-mail-the-php-mail-function-for-iseries)。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2013-12-02T21:52:08.137

对于 Unix 用户来说，mail() 实际上是使用[Sendmail](https://en.wikipedia.org/wiki/Sendmail)命令发送电子邮件。您可以更改环境，而不是修改应用程序。[msmtp](http://msmtp.sourceforge.net)是一个与 Sendmail 兼容的 CLI 语法的 SMTP 客户端，这意味着它可以用来代替 Sendmail。它只需要对您的 php.ini 进行少量更改。

```
sendmail_path = "/usr/bin/msmtp -C /path/to/your/config -t" 
```

然后，即使是低级的 mail() 函数也可以与 SMTP 一起使用。如果您尝试在不修改应用程序的情况下将现有应用程序连接到 sendgrid 或 mandrill 等邮件服务，那么它非常有用。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2015-11-03T18:43:20.950

这是使用 PHP PEAR 的一种方法

```
// Pear Mail Library
require_once "Mail.php";

$from = '<your@mail.com>'; //change this to your email address
$to = '<someone@mail.com>'; // change to address
$subject = 'Insert subject here'; // subject of mail
$body = "Hello world! this is the content of the email"; //content of mail

$headers = array(
    'From' => $from,
    'To' => $to,
    'Subject' => $subject
);

$smtp = Mail::factory('smtp', array(
        'host' => 'ssl://smtp.gmail.com',
        'port' => '465',
        'auth' => true,
        'username' => 'your@gmail.com', //your gmail account
        'password' => 'snip' // your password
    ));

// Send the mail
$mail = $smtp->send($to, $headers, $body);

//check mail sent or not
if (PEAR::isError($mail)) {
    echo '<p>'.$mail->getMessage().'</p>';
} else {
    echo '<p>Message successfully sent!</p>';
} 
```

如果您使用 Gmail SMTP，请记住在您的 Gmail 帐户中启用 SMTP，在设置下

**编辑：** 如果你在 debian/ubuntu 上找不到 Mail.php，你可以安装 php-pear

```
sudo apt install php-pear 
```

然后安装邮件扩展：

```
sudo pear install mail
sudo pear install Net_SMTP
sudo pear install Auth_SASL
sudo pear install mail_mime 
```

然后你应该可以通过`require_once "Mail.php"` 它位于此处的其他方式加载它：`/usr/share/php/Mail.php`

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2014-01-22T20:44:01.700

问题是 PHP`mail()`函数的功能非常有限。有几种方法可以从 PHP 发送邮件。

1.  **`mail()`在您的系统上使用 SMTP 服务器。**在 Windows 上至少可以使用两个服务器：[hMailServer](http://www.hmailserver.com/)和[xmail](http://www.xmailserver.org/)。我花了几个小时配置和启动它们。在我看来，第一个更简单。目前，hMailServer 正在 Windows 7 x64 上运行。
2.  **`mail()`在带有 Linux 的远程或虚拟机上使用 SMTP 服务器。**当然，像 Gmail 这样的真正邮件服务不允许在没有任何凭据或密钥的情况下直接连接。您可以设置虚拟机或使用位于 LAN 中的虚拟机。大多数 linux 发行版都有开箱即用的邮件服务器。配置它并玩得开心。我在 Debian 7 上使用默认的 exim4 来监听它的 LAN 接口。
3.  **邮件库使用直接连接。**库更容易设置。我使用了 SwiftMailer，它完美地从 Gmail 帐户发送邮件。我认为 PHPMailer 也很不错。

无论您有什么选择，我都建议您使用一些抽象层。您可以在运行 Windows 的开发机器上使用 PHP 库，并在运行`mail()`Linux 的生产机器上简单地运行。抽象层允许您根据运行应用程序的系统交换邮件驱动程序。使用抽象方法创建抽象`MyMailer`类或接口。`send()`继承两个类`MyPhpMailer`和`MySwiftMailer`. 以适当的方式实施`send()`方法。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-01-22T10:44:52.627

有一些 SMTP 服务器无需身份验证即可工作，但如果服务器需要身份验证，则无法规避。

PHP 的内置邮件功能非常有限 - 仅在 WIndows 中可以指定 SMTP 服务器。在 *nix 上，`mail()`将使用操作系统的二进制文件。

如果您想将电子邮件发送到网络上的任意 SMTP 服务器，请考虑使用[SwiftMailer](http://swiftmailer.org/)之类的库。例如，这将使您能够使用 Google Mail 的外发服务器。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-09-28T02:34:25.800

如果您在 Linux 上托管[WordPress](https://en.wikipedia.org/wiki/WordPress)站点并具有服务器访问权限，则可以通过安装 msmtp 来省去一些麻烦，它允许您从标准 PHP mail() 函数通过[SMTP发送。](https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol)msmtp 是 postfix 的一个更简单的替代方案，它需要更多的配置。

以下是步骤：

安装 msmtp

```
sudo apt-get install msmtp-mta ca-certificates 
```

创建一个新的配置文件：

```
sudo nano /etc/msmtprc 
```

...具有以下配置信息：

```
# Set defaults.
defaults

# Enable or disable TLS/SSL encryption.
tls on
tls_starttls on
tls_trust_file /etc/ssl/certs/ca-certificates.crt

# Set up a default account's settings.
account default
host <smtp.example.net>
port 587
auth on
user <username@example.net>
password <password>
from <address-to-receive-bounces@example.net>
syslog LOG_MAIL 
```

您需要替换“<”和“>”中所有内容所代表的配置数据（包括，删除这些）。对于主机/用户名/密码，请使用您的正常凭据通过您的邮件提供商发送邮件。

告诉 PHP 使用它

```
sudo nano /etc/php5/apache2/php.ini 
```

添加这一行：

```
sendmail_path = /usr/bin/msmtp -t 
```

完整的文档可以在这里找到：

[https://marlam.de/msmtp/](https://marlam.de/msmtp/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-20T22:08:16.000

我知道这是一个老问题，但它仍然有效，我看到的所有答案都显示了基本身份验证，这已被弃用。下面是一个示例，展示了如何使用带有 XOAUTH2 身份验证的 PHPMailer 通过 Google 的 Gmail 服务器进行发送：

```
//Import PHPMailer classes into the global namespace
use PHPMailer\PHPMailer\PHPMailer;
use PHPMailer\PHPMailer\SMTP;
use PHPMailer\PHPMailer\OAuth;
//Alias the League Google OAuth2 provider class
use League\OAuth2\Client\Provider\Google;

//SMTP needs accurate times, and the PHP time zone MUST be set
//This should be done in your php.ini, but this is how to do it if you don't have access to that
date_default_timezone_set('Etc/UTC');

//Load dependencies from composer
//If this causes an error, run 'composer install'
require '../vendor/autoload.php';

//Create a new PHPMailer instance
$mail = new PHPMailer();

//Tell PHPMailer to use SMTP
$mail->isSMTP();

//Enable SMTP debugging
//SMTP::DEBUG_OFF = off (for production use)
//SMTP::DEBUG_CLIENT = client messages
//SMTP::DEBUG_SERVER = client and server messages
$mail->SMTPDebug = SMTP::DEBUG_SERVER;

//Set the hostname of the mail server
$mail->Host = 'smtp.gmail.com';

//Set the SMTP port number:
// - 465 for SMTP with implicit TLS, a.k.a. RFC8314 SMTPS or
// - 587 for SMTP+STARTTLS
$mail->Port = 465;

//Set the encryption mechanism to use:
// - SMTPS (implicit TLS on port 465) or
// - STARTTLS (explicit TLS on port 587)
$mail->SMTPSecure = PHPMailer::ENCRYPTION_SMTPS;

//Whether to use SMTP authentication
$mail->SMTPAuth = true;

//Set AuthType to use XOAUTH2
$mail->AuthType = 'XOAUTH2';

//Fill in authentication details here
//Either the gmail account owner, or the user that gave consent
$email = 'someone@gmail.com';
$clientId = 'RANDOMCHARS-----duv1n2.apps.googleusercontent.com';
$clientSecret = 'RANDOMCHARS-----lGyjPcRtvP';

//Obtained by configuring and running get_oauth_token.php
//after setting up an app in Google Developer Console.
$refreshToken = 'RANDOMCHARS-----DWxgOvPT003r-yFUV49TQYag7_Aod7y0';

//Create a new OAuth2 provider instance
$provider = new Google(
    [
        'clientId' => $clientId,
        'clientSecret' => $clientSecret,
    ]
);

//Pass the OAuth provider instance to PHPMailer
$mail->setOAuth(
    new OAuth(
        [
            'provider' => $provider,
            'clientId' => $clientId,
            'clientSecret' => $clientSecret,
            'refreshToken' => $refreshToken,
            'userName' => $email,
        ]
    )
);

//Set who the message is to be sent from
//For gmail, this generally needs to be the same as the user you logged in as
$mail->setFrom($email, 'First Last');

//Set who the message is to be sent to
$mail->addAddress('someone@gmail.com', 'John Doe');

//Set the subject line
$mail->Subject = 'PHPMailer GMail XOAUTH2 SMTP test';

//Read an HTML message body from an external file, convert referenced images to embedded,
//convert HTML into a basic plain-text alternative body
$mail->CharSet = PHPMailer::CHARSET_UTF8;
$mail->msgHTML(file_get_contents('contentsutf8.html'), __DIR__);

//Replace the plain text body with one created manually
$mail->AltBody = 'This is a plain-text message body';

//Attach an image file
$mail->addAttachment('images/phpmailer_mini.png');

//send the message, check for errors
if (!$mail->send()) {
    echo 'Mailer Error: ' . $mail->ErrorInfo;
} else {
    echo 'Message sent!';
} 
```

参考：[PHPMailer 示例文件夹](https://github.com/PHPMailer/PHPMailer/blob/master/examples/gmail_xoauth.phps)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-04T21:38:50.373

如果有人需要，我为 PHP 创建了一个简单的轻量级 SMTP 电子邮件发送器。这是网址：

[https://github.com/Nerdtrix/EZMAIL](https://github.com/Nerdtrix/EZMAIL)

它在生产和开发两种环境中都经过了测试。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-03T22:56:49.420

对于另一种方法，您可以采用如下文件：

```
From: Sunday <sunday@gmail.com>
To: Monday <monday@gmail.com>
Subject: Day

Tuesday Wednesday 
```

并像这样发送：

```
<?php
$a1 = ['monday@gmail.com'];
$r1 = fopen('a.txt', 'r');
$r2 = curl_init('smtps://smtp.gmail.com');
curl_setopt($r2, CURLOPT_MAIL_RCPT, $a1);
curl_setopt($r2, CURLOPT_NETRC, true);
curl_setopt($r2, CURLOPT_READDATA, $r1);
curl_setopt($r2, CURLOPT_UPLOAD, true);
curl_exec($r2); 
```

[https://php.net/function.curl-setopt](https://php.net/function.curl-setopt)

# php - 字符串不能以零开头

> ID：14456674
> 
> 赞同：0
> 
> 时间：2013-01-22T10:42:11.750
> 
> 标签：php, regex, preg-match

我有一个字符串，我想用正则表达式检查。不允许它以 0 开头。因此请参阅以下示例：

```
012344 = invalid
3435545645 = valid
021 = invalid
344545 = valid 
```

等等

这个正则表达式在 PHP 中的外观如何？

PS。这必须是一个正则表达式解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:05:11.337

正则表达式应如下所示：

```
^[1-9][0-9]*$ 
```

PHP代码：

```
<?php

    $regex = "#^[1-9][0-9]*$#";

    function test($value, $regex)
    {
          $text = "invalid";
          if(preg_match($regex, $value)) $text = "valid";
          return $value+" = "+$text+"\n\r";
    }

   echo  test('012345', $regex);
   echo  test('12345', $regex);

?> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-22T10:47:29.993

那么这将是一个简单的`/[1-9][0-9]*/`. 请下次更好地研究您的问题。这也可以帮助你：[正则表达式测试器](http://rubular.com/)

**编辑：**

是的，答案被否决了，因为它缺少锚点并且似乎是错误的。为了完整起见，我发布了我将与此正则表达式一起使用的 php 代码。不，这没有错。这可能不是最优雅的方式，但我更喜欢检查正则表达式是否匹配整个字符串。`=== $value`一个原因是要调试正则表达式并查看它实际匹配的内容，我只需要在之后注释掉`return $matches[0]`

```
<?php
  function matches($value) {
    preg_match("/[1-9][0-9]*/", $value, $matches);
    return $matches[0] === $value;
  }

  //Usage:
  if (matches("1234")) {
     //...
  }
?> 
```

# c# - Devexpress 导航菜单使屏幕冻结

> ID：14456675
> 
> 赞同：1
> 
> 时间：2013-01-22T10:42:13.740
> 
> 标签：c#, navigation, devexpress, validation, menuitem

我有一个打开数据输入表单（用户控件）的 devexpress 导航菜单项。用户控件具有强制用户不要将文本框留空的验证规则。而且，到目前为止效果还不错。

但是，当我在数据输入用户控件已经显示的情况下单击其他菜单项时，问题就来了。这一次，屏幕只是冻结和卡住，我必须重新启动系统。可能的原因和解决方法是什么？在此先感谢这里是一些代码快照：

```
 //Here is what I've on the main form. It has a panel control called mainPanel to display the user controls   
    private XtraUserControl uc;

    private void MainForm_Load(object sender, EventArgs e)
    {
        displayUserControl("Data Entry");
        //...
    }
    private void navigationBar_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
    {
        displayUserControl(e.Link.Caption);
    }

    private void displayUserControl(string link)
    {
        switch (link)
        {
            case "Data Entry":
                uc = new ucDataEntry(); //the data entry user control that freezes the system
                break;
            case "Setting":
                uc = new ucSetting();
                break;
            case "Chart":
                uc = new UCReportChart();
                break;
        }

        mainPanel.Controls.Clear();
        mainPanel.Controls.Add(uc);
        uc.Dock = DockStyle.Fill;
        uc.Show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:48:04.670

每次单击菜单项时，您都会从主面板中清除先前的控件，并将其替换为新控件。也许是 ucDataEntry 控件中的验证逻辑导致应用程序挂起？（您还没有发布该控件的代码，所以我不能确定。）

顺便说一句，通过调用 mainPanel.Controls.Clear()，您正在泄漏内存。此函数的文档指出，您必须为以这种方式清除的任何控件显式调用 Dispose() 方法。

# web-services - WebLogic 上的 Web 服务安全标头验证

> ID：14456676
> 
> 赞同：1
> 
> 时间：2013-01-22T10:42:14.833
> 
> 标签：web-services, weblogic

我在具有 usernameToken 安全策略的 WebLogic 上部署了一个 Web 服务。我实现了自己的 Java 密码验证器（扩展了 com.sun.xml.wss.impl.callback.PasswordValidationCallback.WsitDigestPasswordValidator）。

```
<wsp:Policy wsu:Id="DoubleItBindingPolicy">
    <wsp:ExactlyOne>
        <wsp:All>
            <wsam:Addressing wsp:Optional="false"/>
            <sp:TransportBinding>
                <wsp:Policy>
                    <sp:TransportToken>
                        <wsp:Policy>
                            <sp:HttpsToken RequireClientCertificate="false"/>
                        </wsp:Policy>
                    </sp:TransportToken>
                    <sp:Layout>
                        <wsp:Policy>
                            <sp:Lax/>
                        </wsp:Policy>
                    </sp:Layout>
                    <sp:IncludeTimestamp/>
                    <sp:AlgorithmSuite>
                        <wsp:Policy>
                            <sp:Basic128/>
                        </wsp:Policy>
                    </sp:AlgorithmSuite>
                </wsp:Policy>
            </sp:TransportBinding>
            <sp:SignedEncryptedSupportingTokens>
                <wsp:Policy>
                    <sp:UsernameToken sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient">
                        <wsp:Policy>
                            <sp:WssUsernameToken10/>
                        </wsp:Policy>
                    </sp:UsernameToken>
                </wsp:Policy>
            </sp:SignedEncryptedSupportingTokens>
            <sc:ValidatorConfiguration wspp:visibility="private">
                <sc:Validator name="usernameValidator" classname="service.PasswordValidator"/>
            </sc:ValidatorConfiguration>
            <sp:Wss11/>
        </wsp:All>
    </wsp:ExactlyOne>
</wsp:Policy> 
```

我的问题是，当我尝试使用包含安全标头的 SOAP 消息调用我的 Web 服务时，标头被完全忽略，就好像 Web 服务没有附加安全性一样。

我尝试在 WebLogic 控制台中创建一个新的 Web 服务安全配置，并使用注释 WssConfiguration 在我的服务类中引用它，但结果是相同的。

我还尝试将 WS-Policy 添加到我的 WebService （策略：Wssp1.2-2007-Wss1.1-UsernameToken-Digest-DK.xml），但仍然相同。

您能否告诉我如何在 WebLogic 中激活我的 SOAP 消息安全标头的验证？

# cakephp - 优化产品添加操作

> ID：14456680
> 
> 赞同：0
> 
> 时间：2013-01-22T10:42:34.723
> 
> 标签：cakephp

我有一个`add`行动表格`ProductsController`，根据大小有很多价格。我试图先保存产品，然后在 foreach 循环中保存价格。

有些如何`saveAll`或`saveAssociated`没有工作。

```
public function add() {
        if ($this->request->is('post')) {
            $this->Product->create();
            $product = $this->Product->save($this->request->data);

            if (!empty($product)) {
                $product_id = $this->Product->getInsertID();
                $prices = $this->request->data['Product']['price'];

                foreach ($prices as $price) {
                    $price['product_id'] = $product_id;
                    $this->Product->Price->save($price);
                     $this->Product->Price->id = false;
                }

                $this->Session->setFlash('The product has been saved.');
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash('Unable to add the product.');
            }
        }
    } 
```

模型看起来像

```
class Product extends AppModel {        
   ...
   public $hasMany = array(
      'Price' => array(
              'className' => 'Price',           
                 )
   );

class Price extends AppModel {

    public $belongsTo = array(
        'Product' => array(
            'className' => 'Product',
            'foreignKey' => 'product_id', 
        )
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:31:47.173

您可以`saveAssociated()`按照[文档使用](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-hasone-hasmany-belongsto)

但是你的视图应该是这样的：

```
echo $this->Form->create('Product', array('action' => 'add'));
    echo $this->Form->input('Product.name', array('label' => 'Name'));
    echo $this->Form->input('Product.description', array('label' => 'Description'));

    echo $this->Form->input('Price.0.amount', array('label' => 'Amount'));
    echo $this->Form->input('Price.0.price', array('label' => 'Price'));
echo $this->Form->end('Add'); 
```

# c++ - 从 Qt 资源文件加载 ico 时出现问题

> ID：14456683
> 
> 赞同：4
> 
> 时间：2013-01-22T10:42:36.750
> 
> 标签：c++, qt, qt4, qt-designer

我正在使用 Qt Designer 4.8.4，并且在 QMainWindow 资源文件中包含两个文件：一个 .ico 文件和一个 .gif 文件。从代码加载时使用：

```
QPixmap p;
p.load(":/MyApp/media/logo.gif");  // does work
p.load(":/MyApp/media/logo.ico");  // does not work 
```

gif 文件有效，但 ico 文件无效。**有什么理由吗？**我使用 ico 文件作为窗口图标，运行应用程序时它没有显示。

而且，是的，我成功地编译了 qrc 文件，因为**GIF 文件正在工作**。

干杯，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:48:27.387

*.ico 不受支持。

默认情况下，Qt 支持以下格式：

格式 说明 Qt 的支持

BMP Windows 位图 读/写

GIF 图形交换格式（可选） 阅读

JPG 联合摄影专家组 读/写

JPEG 联合图像专家组 读/写

PNG 便携式网络图形 读/写

PBM 便携式位图读取

PGM 便携式灰度图读取

PPM 便携式像素图读/写

TIFF 标记图像文件格式 读/写

XBM X11 位图 读/写

XPM X11 Pixmap 读/写

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T10:46:55.610

因为 QPixmap 不能简单地读取 .ico 文件，如果您想了解更多关于支持的格式的信息，请查看文档[QPixmap](http://doc.qt.digia.com/qt/qpixmap.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-05T15:31:31.803

此处接受的答案不正确，或者如评论中所述，至少具有误导性。Qt 从 4.4 版开始就带有一个用于处理 ICO 格式的插件。这是来自同一时代的[类似问题。](https://www.qtcentre.org/threads/55254-setWindowIcon()-with-ICO-format?p=247149#post247149)

对于部署，需要将`plugins/imageformats/[lib]qico.[dll|so]`用于构建的 Qt 安装中的文件复制到其可执行文件的目录中。将其放在子文件夹中，如下所示：`<your_executable>/imageformats/qico.dll`. 如果测试调试`d`版本，则需要 lib 的后缀版本 ( `qicod.dll`)。

（[这个较新的问题](https://stackoverflow.com/questions/55515996/the-icon-does-not-load-when-you-start-the-application-from-the-outside-qt-creato?noredirect=1&lq=1)已被标记为此重复，所以现在有 2 个问题指向错误的答案。这就是为什么我基本上在这里重复我的帖子。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T15:36:37.140

您可以将其格式转换为 Qt 支持的格式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T13:18:15.543

根据您对已经选择的答案的跟进猜测，您可能希望将该 ICO 作为应用程序窗口图标。这是可能的，也可能是 Qt Designer 能够显示它的原因（试图猜测您的意图）。但是，拥有它并不涉及任何 QPixmap 编码，它纯粹是配置事务。此处描述（是的，#worksforme）：

[http://doc.qt.digia.com/qt/appicon.html](http://doc.qt.digia.com/qt/appicon.html)

# c# - 如何在内部文本中嵌入新行

> ID：14456687
> 
> 赞同：8
> 
> 时间：2013-01-22T10:42:54.563
> 
> 标签：c#, asp.net

我如何能够在内部文本中强制换行（或换行）

```
HtmlGenericControl li;
li = new HtmlGenericControl("li");
li.InnerText = sdr.GetValue(0).ToString()+"\n"+sdr.GetValue(1).ToString();      
myList.Controls.Add(li); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-22T10:43:36.387

使用[`<br />`](http://www.w3schools.com/tags/tag_br.asp)html 标签代替换行`\n`，使用 innerHtml 代替 innerText

```
li.InnerHtml = sdr.GetValue(0).ToString()+"<br />"+sdr.GetValue(1).ToString(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T10:46:38.910

您也可以使用 with[`Environment.NewLine`](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)属性。

> 获取为此环境定义的换行符字符串。

```
li.innerText = sdr.GetValue(0).ToString()+ Environment.NewLine +sdr.GetValue(1).ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:49:47.580

您可以使用`li.InnerHtml`属性和`<br />`下一行。

```
li.InnerHtml = sdr.GetValue(0).ToString()+"<br />"+sdr.GetValue(1).ToString(); 
```

# javascript - 选择列表在悬停时关闭 jQuery Show/Hide Div on Hover

> ID：14456688
> 
> 赞同：1
> 
> 时间：2013-01-22T10:43:01.507
> 
> 标签：javascript, jquery, html, css, list

我已经通过 jQuery 设置了一个 div 来显示和隐藏项目的悬停。在 div 中我有下拉菜单，但是当我单击选择列表并将鼠标悬停在选项列表上时，选择菜单会立即关闭。

jQuery：

```
 <script type='text/javascript'>//<![CDATA[ 
    $(window).load(function(){

        $(".tiptext").mouseover(function() {
            $(this).children(".description").show();
        }).mouseout(function() {
            $(this).children(".description").hide();
        });

    });//]]>  
    </script> 
```

HTML：

```
 <div class="description" style="display: none;">

                <div id="tab1">
                    <h2>Calendar Use</h2>
                    <p>Available dates are marked in white, those unavailable are black. The holiday villa is available from 4:00pm on the day of arrival and needs to be vacated by 10:00am on the day of departure. If you have earlier flight arrival times kindly contact us directly.</p>
                </div>

                <div id="tab2">
                    <h2>Check Availability</h2>
                    <br><p>Arrival Date</p>
                    <div id="calendar-titles"><span class="day-t">day</span><span class="month-t">month</span><span class="year-t">year</span></div>

<form method="post" action="">

                        <div id="calendar-container"><select id="year2Sel" name="year2Sel" onchange="showRSS(document.getElementById('field2').value"></select><select id="monthSel" name="monthSel" onclick="showRSS(document.getElementById('field2').value, document.getElementById('yearSel').value, this.value, document.getElementById('daySel').value )"><option value="0">January</option><option value="1">February</option><option value="2">March</option><option value="3">April</option><option value="4">May</option><option value="5">June</option><option value="6">July</option><option value="7">August</option><option value="8">September</option><option value="9">October</option><option value="10">November</option><option value="11">December</option></select><select id="daySel" name="daySel" onchange="showRSS(document.getElementById('field2').value, document.getElementById('yearSel').value, document.getElementById('monthSel').value, this.value )"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option></select></div>
<select id="yearSel" name="yearSel" onchange="showRSS(document.getElementById('field2').value, document.getElementById('yearSel').value, document.getElementById('monthSel').value, document.getElementById('daySel').value)">
                            <option value="2013">2013</option>
                            <option value="2014">2014</option>
                        </select>

<div id="avail-left">
<p>No of Nights</p>
<span>min stay: 7 nights</span>

                        <input type="text" id="field2" name="nights" onkeyup="showRSS(this.value, document.getElementById('yearSel').value, document.getElementById('monthSel').value, document.getElementById('daySel').value)" value="" alt="Test" onkeypress="return isNumberKey(event)" onchange="isValid();">

</div>
<div id="avail-right">
<p>Est. Rate</p>
<div id="rssOutput"></div></div>

<input type="submit" value="Enquire" name="submit" class="enquirebtn">
                    </form>

                    <br>

                </div>

                <div id="tab3">
                    <iframe width="243px" height="221px" src="/calendar/index.php" frameborder="0" border="0" style="border:0px;"></iframe>
                </div>

            </div> 
```

有人对如何解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:47:14.610

使用`mouseenter`and`mouseleave`代替`mouseover`and`mouseout`

> 如果用户将鼠标悬停在嵌套在给定元素中的元素之上或之外，则针对给定元素触发 mouseover 和 mouseout 事件。

```
 $(".tiptext").mouseenter(function() {
        $(this).children(".description").show();
    }).mouseleave(function() {
        $(this).children(".description").hide();
    }); 
```

如果你想知道这些之间的区别，通过这个[链接](http://www.bennadel.com/blog/1805-jQuery-Events-MouseOver-MouseOut-vs-MouseEnter-MouseLeave.htm)会很有帮助

# c# - VS 在没有构建事件的情况下复制依赖的 dll

> ID：14456689
> 
> 赞同：0
> 
> 时间：2013-01-22T10:43:01.507
> 
> 标签：c#, visual-studio, visual-studio-2008, c++-cli, dependencies

我想弄清楚 Visual Studio 中有一些奇怪的预构建行为。

单个 Visual Studio 2008 解决方案包含：

*   一个原生 c++ 库项目，
*   托管 c++/cli 库项目（本机项目的包装器）
*   ac# 控制台项目（使用 cli 包装器）

托管的c++/cli项目对native c++项目
有依赖，c#项目对c++/cli项目有依赖。依赖项都针对项目，而不是单个 dll。

在调试模式下一切正常。如果我执行主 c# 项目，则检查所有依赖项目的更改，重新编译，并将本机 dll 复制到相应的输出目录。

在发布模式下，不会自动复制本机 dll。

我知道我可以手动定义一个构建后事件来复制dll，但是为什么它会在调试模式下自动复制呢？在任何项目中都没有定义构建前或构建后事件。

什么黑魔法使这项工作在调试模式下自动工作，但在发布模式下却不行？

* * *

（附录）

以下是调试模式的构建日志的摘录：

```
2>------ Neues Erstellen gestartet: Projekt: CppManaged, Konfiguration: Debug Win32 ------
2>Die Zwischen- und Ausgabedateien für das Projekt "CppManaged" mit der Konfiguration "Debug|Win32" werden gelöscht.
2>Kopieren von "c:\LocalProjects\mysolution\UnmanagedCpp\Debug\unmanaged.dll" in das Zielverzeichnis...
2>Kopieren von "c:\LocalProjects\mysolution\UnmanagedCpp\Debug\unmanaged.pdb" in das Zielverzeichnis...
2>Kompilieren...
2>Stdafx.cpp
2>Kompilieren...
... 
```

这是发布模式的相同日志：

```
2>------ Neues Erstellen gestartet: Projekt: CppManaged, Konfiguration: Release Win32 ------
2>Die Zwischen- und Ausgabedateien für das Projekt "CppManaged" mit der Konfiguration "Release|Win32" werden gelöscht.
2>Kompilieren...
2>Stdafx.cpp
2>Kompilieren...
... 
```

在调试模式下，dll 和 pdb 文件被复制，但没有为此定义预构建或构建后事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:46:25.043

通过 Build -> Configuration Manager 检查您的构建配置。

从活动解决方案配置中选择发布。

应该在构建和发布（构建列）中选择所有项目。

# java - 我应该升级到 CGLIB 3.0 吗？

> ID：14456692
> 
> 赞同：8
> 
> 时间：2013-01-22T10:43:02.963
> 
> 标签：java, cglib

我想知道是否/为什么应该将 CGLib 2.2.2 升级到 3.0 版。我正在将 CGLib 与最新版本的 Hibernate/Spring/Mockito 和 Java 7 一起使用。

我在网络上的任何地方都找不到此版本的发行说明或升级说明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:07:11.017

是的，您应该迁移到 CGLib 3.1，因为它可以正确生成堆栈映射帧并处理 Java 7 字节码。

## 更新

CGLib 3.1 解决了以下问题

~~我们正在使用 EasyMock 并切换到 CGLIB 3 的自定义版本。我们切换是因为 EclEmma/JaCoCo/Sonar 的代码覆盖不再起作用。这或多或少是替换的下降（除了更新 POM）。很遗憾~~

*   ~~CGLIB 3 （尚未）在 Maven Central 中~~
*   ~~CGLIB 3 有一个阻止程序错误[https://sourceforge.net/tracker/?func=detail&aid=3601081&group_id=56933&atid=482368](https://sourceforge.net/tracker/?func=detail&aid=3601081&group_id=56933&atid=482368)所以我们必须构建一个自定义版本并将其部署到我们内部的 Nexus~~

~~因此，如果您目前没有任何问题，例如代码覆盖率不再起作用，我不会切换。~~

# nuget - 我可以从哪里下载 Techtalk.specflow.dll 1.9.0 版？

> ID：14456693
> 
> 赞同：0
> 
> 时间：2013-01-22T10:43:03.073
> 
> 标签：nuget, specflow

我可以从哪里下载 Techtalk.specflow.dll 1.9.0 版？因为我无法使用 Install - package specflow 安装它。所以，我认为我需要手动安装它。任何人都可以指出我正确的位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:35:25.053

SpecFlow 的 Visual Studio 集成通过 Visual Studio Gallery 安装：http: [//go.specflow.org/vsgallery](http://go.specflow.org/vsgallery)

SpecFlow 的运行时库和工具（如 TechTalk.SpecFlow.Dll）应通过 NuGet 安装。在此处阅读有关此内容的更多信息：http: [//go.specflow.org/getting-started](http://go.specflow.org/getting-started)

VS 集成的最新版本是 1.9.1，而运行时的最新版本是 1.9.0。VS 集成也适用于以前的运行时版本（包括 1.9.0）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:27:16.167

如果您有其他版本，请确保先将其卸载。在安装 1.9 之前我有 1.7。我必须安装 Nuget、powershell 2.0 和 1.9 才能使其工作。但是所有这些都可以正常工作。

# c# - Mono for Android：列表视图中的微调器

> ID：14456694
> 
> 赞同：0
> 
> 时间：2013-01-22T10:43:05.403
> 
> 标签：c#, android, xamarin.android, spinner, android-spinner

我有一个使用 ArrayAdapter 从 Web 服务填充的列表视图。网络服务为我提供了我需要的所有数据。有些只是纯文本视图，还有一些在 EditText 和微调器之间交替。我很容易地展示它们，同时在 EditText 字段中填写它们应得的值。

问题在于填充 Spinner 的值。我可以在适配器中定义适配器吗？此外，我的数据来自 web 服务作为作为字符串传递的 XML。

到目前为止，我的 Adapter.cs 中的 Spinner 代码：

```
if (item.FieldType == "OptionBOX")
    {
        Spinner SpinnerValue = (Spinner) view.FindViewById<Spinner>(Resource.Id.spinnerVal);
        SpinnerValue.Visibility = view.Visibility == ViewStates.Invisible ? ViewStates.Invisible : ViewStates.Visible;

        bool isReadOnly = bool.Parse(item.isReadOnly);

        if (isReadOnly == true)
        {
            SpinnerValue.Enabled = false;
            SpinnerValue.Focusable = false;
            SpinnerValue.FocusableInTouchMode = false;
        }
    } 
```

我的微调器数据在 item.optbox_options 中。

为了便于理解，我的 XML 中的表格：

```
<Table diffgr:id="Table5" msdata:rowOrder="4">
<IdRec>5</IdRec>
<FieldId>1026</FieldId>
<FieldDesc>stanje rezervoarja</FieldDesc>
<FieldType>ComboBOX</FieldType>
<isReadOnly>true</isReadOnly>
<FieldValue>6</FieldValue>
<FieldTextValue>2/4</FieldTextValue>
<OptBox_Options>
<Options><myOPT FieldValue="1" FieldTextValue="0"/><myOPT FieldValue="2" FieldTextValue="1/4"/><myOPT FieldValue="6" FieldTextValue="2/4"/><myOPT FieldValue="7" FieldTextValue="3/4"/><myOPT FieldValue="8" FieldTextValue="4/4"/></Options>
</OptBox_Options>
</Table> 
```

所以只是为了澄清我的需求和愿望：我可以在适配器中使用适配器吗？如果可以的话 - 怎么做？如何显示来自 OptBox_Options 行的数据？我需要在我的微调器中显示 FieldTextValue 列中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:02:26.573

为什么您认为不可能`Adapter`在您的自定义中实例化某个地方`Adapter`以便您`ListView`在其中填充内容？您可以简单地在for the之外执行`Adapter`for your 。`Spinner``Adapter``ListView`

然后你只需要想出一种解耦的方式来通过层次结构传递数据，`Adapters`以便所有级别都得到你想要的数据。

但是我不认为`ListView`设计模式适合这种交互，你可能会遇到触摸事件没有被触发的问题。我认为`ExpandableListView`对于您要实现的目标，设计模式将是一个更明智的选择，并且将具有更好的可用性。

你可以在这里找到一个例子`ExpandableListView`：[ExpandableListView Mono for Android](https://stackoverflow.com/questions/8674628/expandablelistview-mono-for-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:45:24.603

Resolved using:

```
List<string> entries = new List<string>();

String rawXML = item.OptBox_Options;

StringReader stream = null;
XmlTextReader reader = null;

DataSet xmlDS = new DataSet();
stream = new StringReader(rawXML);
// Load the XmlTextReader from the stream
reader = new XmlTextReader(stream);
xmlDS.ReadXml(reader);

DataSet myOPTvalues = new DataSet();
myOPTvalues = xmlDS;

foreach (DataRow row in myOPTvalues.Tables[0].Rows)
{
    var optItem = new PrevzemSpin();
    optItem.FieldValue = row["FieldValue"].ToString();
    if (optItem.FieldValue.Equals("")) optItem.FieldValue = null;

    optItem.FieldTextValue = row["FieldTextValue"].ToString();
    if (optItem.FieldTextValue.Equals("")) optItem.FieldTextValue = null;

    entries.Add(optItem.FieldTextValue);
    SpinnerValue.Tag = optItem.FieldValue;
} 
```

# jquery - jQuery 克隆从哪里获得这些样式规则？

> ID：14456696
> 
> 赞同：0
> 
> 时间：2013-01-22T10:43:10.807
> 
> 标签：jquery, styles, clone

这不是我的确切代码，而是相关部分：

```
<div id="myDiv" class="class1 class2" style="">
   ... other elements ...
</div> 
```

我的 jQuery 代码克隆元素，然后最终用克隆替换原始元素：

```
clonedDiv = $('#myDiv').clone(true);
... some other code ...
$('#myDiv').replaceWith(clonedDiv); 
```

这可以正常工作-唯一的问题是克隆的 div 以某种方式获得了原始样式中没有的样式属性：

```
<div id="myDiv" class="class1 class2" 
     style="overflow: hidden; height: 1px; padding-top: 0px; margin-top: 0px; padding-bottom: 0px; margin-bottom: 0px;">
   ... other elements ...
</div> 
```

这是从哪里来的……？有什么办法可以预防吗？（我目前正在“破解”并明确将其设置回空字符串。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:50:24.093

这可能通过 some `javascript`or来设置样式`jQuery`。

如果要删除样式属性，请这样做：

```
clonedDiv = $('#myDiv').removeAttr('style').clone(true);
//---------------------^^^^^^^^^^^^^^^^^^^---------remove the attr then clone it. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:47:21.067

这些样式可能是您的浏览器添加的默认样式。看，所有的值都是 0px。我看不出这些样式将如何在克隆元素中产生问题。

您可以查看相关帖子：

[浏览器的默认 CSS 样式表](https://stackoverflow.com/questions/32875/browsers-default-css-stylesheets)

# php - PHP会话在生产服务器上丢失数据 - CodeIgniter

> ID：14456699
> 
> 赞同：2
> 
> 时间：2013-01-22T10:43:28.933
> 
> 标签：php, codeigniter, session, session-cookies

我的 CodeIgnighter 站点在推送到生产服务器时丢失会话数据时遇到一些问题。

我们有一个 CodeIgnighter 站点，当人们浏览该站点时，该站点使用会话来存储与预订相关的数据。我可以很高兴地离开页面 15 分钟以上，然后返回，一切正常。

但是，当将代码实时推送到生产服务器时，会话似乎在 5 分钟标记后超时/丢失数据。

我在 CodeIgnighter 配置文件中设置了默认会话超时，但我想知道是否有一些服务器/php/apache 级别可能覆盖我的 CodeIgnighter 设置？不幸的是，我对会话处理的了解不是很好，谷歌到目前为止也没有帮助！

我已经从 phpinfo(); 中附加了会话信息；从工作现场和损坏的生产现场。

非常感激任何的帮助！！

**工作开发网站：**

```
    指令 本地价值 主价值
    session.auto_start 关 关
    session.bug_compat_42 On On
    session.bug_compat_warn On On
    session.cache_expire 180 180
    session.cache_limiter nocache nocache
    session.cookie_domain 无值 无值
    session.cookie_httponly 关 关
    session.cookie_lifetime 0 0
    session.cookie_path //
    session.cookie_secure 关 关
    session.entropy_file 无值 无值
    session.entropy_length 0 0
    session.gc_divisor 100 100
    session.gc_maxlifetime 1440 1440
    session.gc_probability 1 1
    session.hash_bits_per_character 4 4
    session.hash_function 0 0
    session.name PHPSESSID PHPSESSID
    session.referer_check 无值 无值
    session.save_handler 文件 文件
    session.save_path /tmp /tmp
    session.serialize_handler php php
    session.use_cookies On On
    session.use_only_cookies On On
    session.use_trans_sid 0 0

```

**破碎的生产现场：**

```
    指令 本地价值 主价值
    session.auto_start 关 关
    session.bug_compat_42 关 关
    session.bug_compat_warn 关 关
    session.cache_expire 180 180
    session.cache_limiter nocache nocache
    session.cookie_domain 无值 无值
    session.cookie_httponly 关 关
    session.cookie_lifetime 0 0
    session.cookie_path //
    session.cookie_secure 关 关
    session.entropy_file 无值 无值
    session.entropy_length 0 0
    session.gc_divisor 1000 1000
    session.gc_maxlifetime 1440 1440
    session.gc_probability 1 1
    session.hash_bits_per_character 5 5
    session.hash_function 0 0
    session.name PHPSESSID PHPSESSID
    session.referer_check 无值 无值
    session.save_handler 文件 文件
    session.save_path 无值 无值
    session.serialize_handler php php
    session.use_cookies On On
    session.use_only_cookies On On
    session.use_trans_sid 0 0

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:26:41.510

Actually I would suggest a totally different solution and tell you to use database as the handler for your sessions.I prefer using database as you can have multiple servers and it is optimal for session security.

# android - R 无法解析为变量 - 一个新案例？

> ID：14456701
> 
> 赞同：0
> 
> 时间：2013-01-22T10:43:35.330
> 
> 标签：android, cordova, build-error

好的，所以我在这里阅读了关于这个臭名昭著的问题的 10 个其他线程，并尝试了所有可能的解决方案 - 没有任何运气。

我有一个几个月前工作的 Phonegap 项目，现在必须创建一个新版本。所以，在我的新 Mac 上 - 我不再可以使用旧 Mac，我检查了我用来制作以前构建的代码（所以实际代码不会有任何问题，因为它没有改变）。由于我的新 Mac 没有安装 Eclipse，我下载了 Android SDK 并发现它带有预配置的 Eclipse 版本，所以我使用了它。

为了安全起见，我已经安装了所有的 SDK 版本。可悲的是，我必须以 Android 2.3.3 为目标，最低版本为 2.1。我已确保在项目中正确配置了它。

“res”文件夹下的所有 .xml 和 .png 文件都有有效的小写名称。XML 文件中没有错误，至少 Eclipse 没有抱怨其中的任何内容 - 就像我上面所说的，自上次成功构建应用程序以来，XML 文件没有改变。

我已确保 Android 开发者工具的权限是正确的（每个人都有读取权限）。

我已删除“gen”文件夹并尝试再次构建。我已经做了无数次“干净”。我已经无数次地重新启动了 Eclipse。

我已确保包名称在任何地方都同步。我确保我在任何地方都没有“import android.R”。

每次 Eclipse 尝试构建时都会创建“gen”文件夹，但它不包含 R.java 文件，它只包含文件 BuildConfig.java，该文件除了包声明之外还包含以下内容：

```
public final class BuildConfig {
    public final static boolean DEBUG = true;
} 
```

我的 res/values/strings.xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="hello">Hello World</string>
    <string name="app_name">My App Name</string>

</resources> 
```

我的 res/xml/plugins.xml 文件包含以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<plugins>
    <plugin name="App" value="com.phonegap.App"/>
    <plugin name="Geolocation" value="com.phonegap.GeoBroker"/>
    <plugin name="Device" value="com.phonegap.Device"/>
    <plugin name="Accelerometer" value="com.phonegap.AccelListener"/>
    <plugin name="Compass" value="com.phonegap.CompassListener"/>
    <plugin name="Media" value="com.phonegap.AudioHandler"/>
    <plugin name="Camera" value="com.phonegap.CameraLauncher"/>
    <plugin name="Contacts" value="com.phonegap.ContactManager"/>
    <plugin name="Crypto" value="com.phonegap.CryptoHandler"/>
    <plugin name="File" value="com.phonegap.FileUtils"/>
    <plugin name="Network Status" value="com.phonegap.NetworkManager"/>
    <plugin name="Notification" value="com.phonegap.Notification"/>
    <plugin name="Storage" value="com.phonegap.Storage"/>
    <plugin name="Temperature" value="com.phonegap.TempListener"/>
    <plugin name="FileTransfer" value="com.phonegap.FileTransfer"/>
    <plugin name="Capture" value="com.phonegap.Capture"/>

    <plugin name="EncapPlugin" value="no.encap.securitytoken.phonegap.plugin.EncapPlugin" />
</plugins> 
```

我的 res/layout/main.xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

我已经尝试过更改`fill_parent`上面`match_parent`的内容，因为我读到其中一个答案已被重命名为 API 版本 8 中的答案 - 但这没有帮助。无论如何，我也需要支持 API 的第 7 版。以防万一，我尝试按照说明更改名称并将最低版本设置为 8，但这并没有帮助。

Eclipse 在尝试构建时不会生成其他错误，并且只会生成一个良性且不相关的警告。

我的 AndroidManifest.xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="no.encap.securitytoken.phonegap"
          android:versionCode="1"
          android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" /><supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:resizeable="true"
        android:smallScreens="true" />

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

    <application
            android:icon="@drawable/icon"
            android:label="@string/app_name" >
        <activity
                android:name="EncapMain"
                android:label="@string/app_name"
                android:configChanges="orientation|keyboardHidden"
                android:screenOrientation="portrait"
                android:theme="@android:style/Theme.NoTitleBar">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity><activity
            android:name="com.phonegap.DroidGap"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/app_name" >
        <intent-filter>
        </intent-filter>
    </activity>
    </application>

</manifest> 
```

由于这是一个 PhoneGap 应用程序，XML 文件实际上只包含启动和运行 WebView 所需的最低限度。

有人知道这里有什么问题吗？对于 Android 开发者工具来说，这个 R.java 的东西确实看起来是一个非常薄弱的​​点——并且改进了与此相关的构建错误的处理（解释*什么*是错误的）似乎可以从优先考虑中受益。无论如何-我希望有人可以提供帮助！

**更新：**问题是由 Subversion 引起的。我不确定 Subversion 到底在做什么导致这种情况，但是每当我创建一个新项目并导入我的文件以让 Eclipse 编译该项目时，一切正常。然后，每当我在 Subversion 中执行某些操作时，例如添加/删除/提交/更新 HTML、CSS 或 Javascript 文件（在资产文件夹中），此错误就会返回，我必须再次创建一个新项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T08:31:25.013

我对所有 sdk 进行了更新，然后我得到了著名的“R can...”。原来在更新 sdk 的过程中，所有的构建工具都被删除了。检查“SDK Manager”是否已安装所有工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:52:38.450

**缺少 R.java 的原因**可能是

*   当你没有正确命名你的drawables时
*   当您的布局出现问题时
*   当您忘记在 AndroidManifest 文件中注册内容（活动等）时
*   当清单和其他地方的包名冲突时
*   有时多个包装可能会出现此问题

**提示：查看控制台中的错误，看看它指的是哪里，那是唯一的线索！**

**事实：**清理项目并不总是能解决问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:54:13.107

我认为您在构建 gen 时犯了一点错误 ..所以检查您的 xml 文件或生成的文件中是否有任何错误..

在清理和构建之后，如果它不工作，那么做简单的工作..

创建新项目复制代码和布局以及.png xml插件等甚至不删除gen文件夹然后

清理并构建运行项目后，它将工作

检查此[链接](http://www.codeofaninja.com/2011/05/fixed-r-cannot-be-resolved-to-variable.html)以获得更多帮助

# c - 让从属等待来自主控的 MPI_Bcast

> ID：14456705
> 
> 赞同：2
> 
> 时间：2013-01-22T10:43:52.637
> 
> 标签：c, parallel-processing, mpi

我正在尝试使用 MPI 和 C 语言编写一个并行程序来实现高斯消除的管道版本...

但是我在代码实现的早期遇到了一些困难......

我使用根进程从文本文件中读取数据矩阵......这个过程给了我这个矩阵的大小，我将它的大小广播给所有其他进程，以便他们在内存中分配它......但是，从属进程正试图在根广播之前分配它......我怎样才能让它们等待？

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <mpi.h>

int CalcInd(int i, int j, int dimL)
{
  return i*dimL +j;
}

int main (int argc, char **argv)
{
  FILE *fin, *fout;
  char fA[] = "Matrix.txt";

  int rank, size, i, ii, j, k, m, n, picked, tmp, total;
  int  counter=0, elements=0;
  int * RightNeigbhor, * LeftNeigbhor, * loc;

  float f, magnitude, t;
  float * A, * x;

  MPI_Status status;
  MPI_Request request;

  // MPI initialization
  MPI_Init(&argc, &argv);  
  MPI_Comm_rank(MPI_COMM_WORLD, &rank);
  MPI_Comm_size(MPI_COMM_WORLD, &size);
  MPI_Barrier(MPI_COMM_WORLD);

  if(rank == 0)
  {
    // Defenição dos processos vizinhos pelo master
    RightNeigbhor = (int *)calloc(size,sizeof(int));
    if(RightNeigbhor==NULL)
      {printf("!!! Could not allocate memory !!!\n"); exit(-1);}
    LeftNeigbhor = (int *)calloc(size,sizeof(int));
    if(RightNeigbhor==NULL)
      {printf("!!! Could not allocate memory !!!\n"); exit(-1);}

    for(i = 0; i < size; i++ )
    {
      RightNeigbhor[i] = (rank + 1) % size;
      LeftNeigbhor[i] = (rank - 1) % size;
    }
    // Broadcast os processos vizinhos para todos os processos
    MPI_Bcast ( RightNeigbhor, size, MPI_INTEGER, rank, MPI_COMM_WORLD );
    MPI_Bcast ( LeftNeigbhor, size, MPI_INTEGER, rank, MPI_COMM_WORLD );

    // Leitura da matriz A pelo master
    fin = fopen ( fA, "r" ); 
    if (fin == NULL){ printf("!!! FILE NOT FOUND !!!"); exit(-1); }
    while( !feof(fin))
    {
      fscanf (fin, "%f", &f);
      elements++;
    }
    rewind(fin);
    f = 0;

    while( !feof(fin))
    {
      if(fgetc(fin) == '\n')
      {
    counter++;
      }
    }
    rewind(fin);

    n = counter;
    m = (elements-1) / counter;

   total = n*m;   

   MPI_Bcast ( &total, 1, MPI_INT, rank, MPI_COMM_WORLD );
   MPI_Bcast ( &n, 1, MPI_INT, rank, MPI_COMM_WORLD );

  }

  // Alocação de variaveis
  A = (float *)calloc(total,sizeof(float));
  if(A==NULL){printf("!!! Could not allocate memory !!!\n"); exit(-1);}
  loc = (int *)calloc(n,sizeof(int*));
  if(loc==NULL){printf("!!! Could not allocate memory !!!\n"); exit(-1);}

// AND IT GOES ON AND ON 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T13:46:23.047

块中的所有内容`rank == 0`仅在进程 0 中运行。而进程`rank == 1 ... n`只是跳过该块。因此，您必须将呼叫置于此处`MPI_Bcast`所有进程可见的环境中。当进程 1...n 跳过所有初始化并在进程 0 到达之前跳转到广播时，它们将等待直到广播发生。`MPI_Comm comm``MPI_COMM_WORLD`

# php - 返回函数中 if 语句的结果

> ID：14456710
> 
> 赞同：-1
> 
> 时间：2013-01-22T10:44:12.597
> 
> 标签：php, function, if-statement

这是我正在处理的代码。

```
function calculate_cuisine_type() {
    if ($max == $total2) {
        echo $cItalian;
    } elseif ($max == $total3) {
        echo $cFrench;
    } elseif ($max == $total4) {
        echo $cChinese;
    } elseif ($max == $total5) {
        echo $cSpanish;
    } elseif ($max == $total6) {
        echo $cIndian;
    }
} 
```

我想要做的是计算不同食谱的“美食类型”，我的小程序使用谷歌 API 返回特定食谱标题的“点击”数量 - 即*馄饨*- 然后计算“凝聚力”比率将该数字（即*100*）除以另一个查询的返回命中 - 即（*馄饨 + Chinese = 50*）。因此，如果您发现我的想法，凝聚力因子将为 2。

现在，我可以让它显示和计算得很好，但是当尝试将最终的美食类型添加到 XML 文档时出现问题，这段代码是否必须在某种函数中？为了在这里调用它：（实际的 XML 添加代码工作正常）

```
 $ctNode = $xdoc ->createTextNode (*stuff to be added*); 
```

所以，基本上我要问的是，有没有一种方法可以将 IF 语句的最终输出分配给另一个变量以在其他地方使用，或者这是否必须通过函数来​​完成，所以当函数被调用时；它返回 IF 语句的最终结果。

**编辑：** 感谢[https://stackoverflow.com/users/1044644/ivo-pereira解决了问题](https://stackoverflow.com/users/1044644/ivo-pereira)

最终代码，如果有人感兴趣。

```
$total = array(
                2 => $total2,
                3 => $total3,
                4 => $total4,
                5 => $total5,
                6 => $total6
            );

        $max = max(array($total2, $total3, $total4, $total5, $total6));

        echo'The highest cohesion factor is: ' . $max;  

                function calculate_cuisine_type($max,$total) {                                      
                    if ($max == $total[2]) {
                        $type = 'Italian';
                    } elseif ($max == $total[3]) {
                        $type = 'French';
                    } elseif ($max == $total[4]) {
                        $type = 'Chinese';
                    } elseif ($max == $total[5]) {
                        $type = 'Spanish';
                    } elseif ($max == $total[6]) {
                        $type = 'Indian';
                    }
                    return $type;
                    }

                    $type = calculate_cuisine_type($max,$total); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:07:28.093

这将帮助您在实际情况下更好地组织代码：

```
<?php
$total = array(
    //these numbers are random, just to get the function working. you can change this of course
    2 => 0,
    3 => 3,
    4 => 7,
    5 => 10,
    6 => 14
);

$max = 10;

function calculate_cuisine_type($max,$total) {
    if ($max == $total[2]) {
        $type = 'Italian';
    } elseif ($max == $total[3]) {
        $type = 'French';
    } elseif ($max == $total[4]) {
        $type = 'Chinese';
    } elseif ($max == $total[5]) {
        $type = 'Spanish';
    } elseif ($max == $total[6]) {
        $type = 'Indian';
}
    return $type;
}

$type = calculate_cuisine_type($max,$total);
$ctNode = $xdoc ->createTextNode ($type);

?> 
```

试着把这类内容整理成数组，对你有很大帮助！并且**不要忘记**将您的数据作为参数传递给函数，否则在这种情况下将不会读取它们。

# c# - CRM 2011：插件 - 无法加载文件或程序集“Microsoft.Xrm.Client”

> ID：14456711
> 
> 赞同：1
> 
> 时间：2013-01-22T10:44:20.537
> 
> 标签：c#, dynamics-crm-2011

我正在寻找构建一个相当简单的插件来计算使用和剩余的“单位”数量。我有两个自定义实体`bc_learninglicences`& `bc_llbalance`，插件在创建时触发，`bc_llbalance`另一个用于更新。

```
bc_llbalance: Contains
    bc_learninglicense (Look up field on bc_learninglicences / bc_name)
    bc_units (units that are used by this record)

bc_learninglicences: Contains 
    bc_name
    bc_unitsquantity (This is set to the total qty of units)
    bc_unitsused (this needs to inherit the sum of "bc_units" on "bc_llbalance")
    bc_unitsremaining ( simply bc_unitsquantity - bc_unitsused ) 
```

好的，所以我已经包含了显然没有完成的代码，因为我刚刚试图弄清楚如何`bc_unitsused`继承总和......这个代码构建没有错误。但是 CRM 错误：

> 插件（执行）的意外异常：LearningLicenses.LearningLicenses：System.IO.FileNotFoundException：无法加载文件或程序集'Microsoft.Xrm.Client，版本= 5.0.9690.2165

我有一个很短的期限来构建它，因为系统即将上线，但是我无法继续处理这个我不明白的错误......

由于我落后于该项目的时间框架，因此此时将不胜感激有关错误或代码/解决方案的帮助。

ps 我是 CRM 2011 开发新手，只有几周/几个项目经验。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xrm.Sdk;
using Microsoft.Xrm.Sdk.Query;
using Microsoft.Xrm.Sdk.Messages;
using System.Text.RegularExpressions;
using System.ServiceModel;

namespace LearningLicenses
{
    public class LearningLicenses : IPlugin
    {

        public void Execute(IServiceProvider serviceProvider)
        {
            try
            {

                // Obtain the execution context from the service provider.
                Microsoft.Xrm.Sdk.IPluginExecutionContext context = (Microsoft.Xrm.Sdk.IPluginExecutionContext)
                    serviceProvider.GetService(typeof(Microsoft.Xrm.Sdk.IPluginExecutionContext));

                //Extract the tracing service for use in debugging sandboxed plug-ins.
                ITracingService tracingService =
                    (ITracingService)serviceProvider.GetService(typeof(ITracingService));

                if (context.InputParameters.Contains("Target") &&
                        context.InputParameters["Target"] is Entity)
                 {

                     // Obtain the target entity from the input parmameters.
                     Entity entity = (Entity)context.InputParameters["Target"];

                IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
                IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);

                EntityReference a = (EntityReference)entity.Attributes["bc_learninglicense"];// ((EntityReference)targetEntity.Attributes["bc_learninglicense"]).Id;

                if (entity.LogicalName == "bc_llbalance")
                        try
                        {  

                            //fetchxml to get the sum total of estimatedvalue
                            string value_sum = string.Format(@"         
                    <fetch distinct='false' mapping='logical' aggregate='true'> 
                        <entity name='bc_llbalance'>
                            <attribute name='bc_units' alias='units_sum' aggregate='sum' />
                               <filter type='and'>
                                <condition attribute='bc_learninglicense' operator='eq' value='{0}' uiname='' 
                               </filter>
                        </entity>
                    </fetch>", a.Id);

                            FetchExpression fetch = new FetchExpression(value_sum);
                            EntityCollection value_sum_result = service.RetrieveMultiple(fetch);
                            var TotalValue = "";
                            // decimal TotalValue = 0;
                            foreach (var c in value_sum_result.Entities)
                            {
                                TotalValue = ((string)((AliasedValue)c["value_sum"]).Value);
                            }

                            Entity llc = new Entity("bc_learninglicences");
                            llc.Id = a.Id;
                            llc.Attributes.Add("bc_unitsused", TotalValue);

                            service.Update(llc);

                        }
                        catch (FaultException ex)
                        {
                            throw new InvalidPluginExecutionException("An error occurred in the plug-in.", ex);
                        }
                }

            }
            catch (FaultException ex)
            {
                throw new InvalidPluginExecutionException("An error occurred in the plug-in.", ex);
            }
        }
    }
 }

THE ERROR : 

Unhandled Exception: System.ServiceModel.FaultException`1[[Microsoft.Xrm.Sdk.OrganizationServiceFault, Microsoft.Xrm.Sdk, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]]: Unexpected exception from plug-in (Execute): LearningLicenses.LearningLicenses: System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.Xrm.Client, Version=5.0.9690.2165, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.Detail: 
<OrganizationServiceFault xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/xrm/2011/Contracts">
  <ErrorCode>-2147220956</ErrorCode>
  <ErrorDetails xmlns:d2p1="http://schemas.datacontract.org/2004/07/System.Collections.Generic" />
  <Message>Unexpected exception from plug-in (Execute): LearningLicenses.LearningLicenses: System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.Xrm.Client, Version=5.0.9690.2165, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.</Message>
  <Timestamp>2013-01-22T10:09:22.0275105Z</Timestamp>
  <InnerFault i:nil="true" />
  <TraceText>

[LearningLicenses: LearningLicenses.LearningLicenses]
[c1b35170-c563-e211-8c6d-b499bafd5e5b: LearningLicenses.LearningLicenses: Create of bc_llbalance]

</TraceText>
</OrganizationServiceFault> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:29:39.740

Microsoft.Xrm.Client 不被 CRM 使用，因此不存在于 GAC 或 CRM 服务器上的任何位置，它旨在与任何需要它的客户端应用程序一起重新分发。

它根本不需要在您的插件程序集中引用，所以我会删除它并查看您的任何代码是否引用它。如果是这样，它应该能够被不使用该程序集的等效代码替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:49:40.757

有两种可能的方法来解决这个问题，首先您可能想要检查 GAC 中的 SDK 是否可用，但我们在内部使用[ILMerge](http://www.microsoft.com/en-gb/download/details.aspx?id=17630)来引入插件所需的所有依赖项。

# javascript - 一个将遍历 span 类并在末尾添加文本的函数

> ID：14456718
> 
> 赞同：0
> 
> 时间：2013-01-22T10:44:41.727
> 
> 标签：javascript

我正在尝试做一个函数，使用一些其他函数，使用 JS 循环遍历具有特定名称的类，并在这些 HTML 标记内的任何内容的末尾添加一个“*”。它工作不完美，所以我需要改变什么？类名是“价格”。

```
function insertAfter(referenceNode, newNode) {
    referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
}

function getValues(objName) {
    var arr = new Array();
    var el = document.createElement("span");
    el.innerHTML = "*";
    arr = document.getElementsByClassName(objName);
    for(var i = 0; i < arr.length; i++) {
        var obj = document.getElementsByClassName(objName).item(i);
        insertAfter(obj, el)
    }
};

getValues("price"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:52:05.310

做这个

```
function getValues(objName) {
            var arr = new Array();
            arr = document.getElementsByClassName(objName);
            for (var i = 0; i < arr.length; i++) {
                var el = document.createElement("span");
                el.innerHTML = "*";
                var obj = document.getElementsByClassName(objName).item(i);
                insertAfter(obj, el)
            }
        }; 
```

`el`实际上，每次您想将该元素插入标签时，您都需要创建一个新元素，否则您最终只会`*`在具有“价格”类的 DOM 中最后一个标签的末尾添加单个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:53:17.477

“它不工作”是什么意思？

document.getElementsByClassName 已经返回一个数组，你不需要获取它两次，这样做：

```
arr = document.getElementsByClassName(objName);
for(var i = 0; i < arr.length; i++) {
    var obj = arr[i];
    insertAfter(obj, el);
} 
```

重写您的 insertAfter 以真正执行 insertAfter：

```
function insertAfter(referenceNode, newNode) {
    referenceNode.insertAfter(newNode, referenceNode.lastChild);
} 
```

在这里查看一个工作示例：http: [//jsfiddle.net/BJ3YR/](http://jsfiddle.net/BJ3YR/)

# database - 如何在 cassandra 中定义动态列族

> ID：14456720
> 
> 赞同：7
> 
> 时间：2013-01-22T10:44:47.657
> 
> 标签：database, cassandra, cql, dynamic-columns

[据说](https://stackoverflow.com/questions/8762377/how-to-define-dynamic-columns-in-a-column-family-in-cassandra)，无需特别努力即可获得动态列族。但是当我尝试为未定义的列设置值时，我总是遇到异常。

我创建了一个这样的列族：

```
CREATE TABLE places (
   latitude double,
   longitude double,
   name text,
   tags text,
   PRIMARY KEY (latitude, longitude, name)
) 
```

顺便说一句：我必须定义标签列。有人可以解释一下为什么吗？也许是因为所有其他列都是索引的一部分？

现在插入这样的数据时：

```
INSERT INTO places ("latitude","longitude","name","tags") VALUES (49.797888,9.934771,'Test','foo,bar') 
```

它工作得很好！但是当我尝试时：

```
INSERT INTO places ("latitude","longitude","name","tags","website") VALUES (49.797888,9.934771,'Test','foo,bar','test.de') 
```

我收到以下错误：

```
Bad Request: Unknown identifier website
text could not be lexed at line 1, char 21 
```

需要哪些更改才能动态添加列？

我直接在服务器上使用带有 CQL3 的 Cassandra 1.1.9 和 cqlsh。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T01:23:25.967

CQL3 支持动态列族，但您必须先更改表架构

```
ALTER TABLE places ADD website varchar; 
```

查看[1.2 文档](http://www.datastax.com/docs/1.2/cql_cli/using/alter)和[CQL 深度](http://www.slideshare.net/yukim/cql3-in-depth)幻灯片

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T14:40:09.737

CQL3 要求存在列元数据。CQL3 实际上是对底层存储行的抽象，因此它不是一对一的。如果您想使用动态列名（并且它们有很多出色的用例），请使用传统的 Thrift 接口（通过您选择的客户端库）。这将使您完全控制存储的内容。

# iphone - 如何为 qr 码扫描 iphone 应用程序实现相机视图层？

> ID：14456724
> 
> 赞同：0
> 
> 时间：2013-01-22T10:45:04.483
> 
> 标签：iphone, camera, scanning

我正在编写要扫描 qr 码的 iphone 应用程序。我有 QR 码库来扫描 QR 码。现在我想给我的iPhone应用程序提供二维码扫描接口。

在 Android 中，我可以使用`SurfaceView`我们可以显示相机帧的视图来实现这一点。iPhone中是否有与Android中的surfaceview等效的东西？如果是这样怎么做。请给我一个教程或示例链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:04:39.560

```
- (IBAction)TakePicture:(id)sender {

// Create image picker controller
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

// Set source to the camera
imagePicker.sourceType =  UIImagePickerControllerSourceTypeCamera;

    // Delegate is self
    imagePicker.delegate = self;

    OverlayView *overlay = [[OverlayView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];     

    // Insert the overlay:
    imagePicker.cameraOverlayView = overlay;

   // Allow editing of image ?
    imagePicker.allowsImageEditing = YES;
    [imagePicker setCameraDevice:
    UIImagePickerControllerCameraDeviceFront];
    [imagePicker setAllowsEditing:YES];
    imagePicker.showsCameraControls=YES;
    imagePicker.navigationBarHidden=YES;
    imagePicker.toolbarHidden=YES;
    imagePicker.wantsFullScreenLayout=YES;

    self.library = [[ALAssetsLibrary alloc] init];

    // Show image picker
    [self presentModalViewController:imagePicker animated:YES];
} 
```

创建一个 UIView 类并添加此代码

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        // Clear the background of the overlay:
        self.opaque = NO;
        self.backgroundColor = [UIColor clearColor];

        // Load the image to show in the overlay:
        UIImage *overlayGraphic = [UIImage imageNamed:@"overlaygraphic.png"];
        UIImageView *overlayGraphicView = [[UIImageView alloc] initWithImage:overlayGraphic];
        overlayGraphicView.frame = CGRectMake(30, 100, 260, 200);
        [self addSubview:overlayGraphicView];

    }
    return self;
} 
```

您也可以参考这个链接：[http ://www.musicalgeometry.com/?p=821](http://www.musicalgeometry.com/?p=821)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-22T19:41:38.587

自 iOS 7 以来，iOS 中很容易使用 QR 码检测，诀窍是告诉`AVCaptureMetadataOutput`实例检测类型为 的对象`AVMetadataObjectTypeQRCode`。

实时相机预览（如果您仍想使用它，可以访问像素）在 iOS 中已经存在很长时间了，最​​简单的`AVCaptureVideoPreviewLayer`.

有关示例，请参见此处[http://www.appcoda.com/qr-code-reader-swift/](http://www.appcoda.com/qr-code-reader-swift/)

# ios - 表格视图单元iOS中不必要的填充？

> ID：14456725
> 
> 赞同：0
> 
> 时间：2013-01-22T10:45:05.233
> 
> 标签：ios

我正在开发一个使用 splitview 来显示信息的企业 iOS 应用程序。我的拆分视图，标签栏都到位并且似乎工作正常。我在拆分视图的左窗格中有一个表格视图。表格视图具有自定义单元格，其中包含一个图像视图和几个文本视图（删除了 img 中的文本视图）图像视图的高度与表格视图和表格视图单元格的行高相同。我希望达到 182 点的行高。尽管我保持所有尺寸相同，但我在 tableviewcell 的左侧、顶部和底部看到了一个填充。在表格视图中，单元格因此显示为由背景颜色分隔。表格视图没有设置分隔符。我看到的唯一问题是单元格内使用的图像高度只有 168 点。

我在拆分视图的详细视图中做了同样的事情，但是现在我看到表格单元格占据了指定给它的整个区域。这个细节视图单元格内的图像只有 160 点的高度，但我没有看到“填充”效果。

我附上了一个示例截图，请让我知道在哪里修复它？![具有两个表视图的拆分视图](../Images/41b065d7c10adc9bef89acf73724d397.png)

# php - 在 PHP 函数中使用数组作为默认参数

> ID：14456727
> 
> 赞同：18
> 
> 时间：2013-01-22T10:45:08.167
> 
> 标签：php, arrays

是否可以在 PHP 函数中使用数组作为默认参数？

我想做以下事情：

```
$arr = array(1,2,3,4);

function sample($var1, $var2, $var3 = $arr){
    echo $var1.$var2;
    print_r($var3);
}

sample('a','b');
// Should still work without the third parameter and default to $arr 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-22T10:48:50.287

不，这是不可能的，默认值的右手表达式必须是常量或数组字面量，即

```
function sample($var1, $var2, $var3 = array(1, 2, 3, 4))
{
} 
```

如果你想要这种行为，你可以使用闭包：

```
$arr = array(1, 2, 3, 4);

$sample = function ($var1, $var2, array $var3 = null) use ($arr) {
    if (is_null($var3)) {
        $var3 = $arr;
    }

    // your code
}

$sample('a', 'b'); 
```

你也可以用一个类来表达它：

```
class Foo
{
    private static $arr = array(1, 2, 3, 4);

    public static function bar($var1, $var2, array $var3 = null)
    {
        if (is_null($var3)) {
            $var3 = self::$arr;
        }

        // your code here
    }
}

Foo::bar('a', 'b'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T10:47:48.950

你不能传入`$arr`函数定义，你必须这样做：

```
function sample($var1, $var2, $var3 = array('test')){
    echo $var1.$var2;
    echo print_r($var3);
}

sample('a','b'); // output: abArray ( [0] => test ) 1 
```

或者，如果你想变得很脏（我不推荐它..）：

```
$arr = array('test');

function sample($var1, $var2, $var3 = null){
    if($var3 == null){
      global $arr;
      $var3 = $arr;
    }
    echo $var1.$var2;
    echo print_r($var3);
}

sample('a','b'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-04T19:04:52.707

（这可能不是一个完整的答案，但它涵盖了一些有用的案例。）

如果您想使用数组作为函数（或方法）中的参数来获取一个或多个选项，则设置一组默认选项可能无济于事。相反，您可以使用[`array_replace()`](http://php.net/array-replace).

例如，让我们考虑一个示例`$options`参数，它获取一个包含两个键的数组，`count`并且`title`. 为该参数设置默认值会导致在使用`$option`传递任何自定义值的函数时覆盖它。在示例中，如果我们设置`$options`为只有一个`count`键，则该`title`键将被删除。正确的解决方案之一如下：

```
function someCoolFunc($options = []) {
    $options = array_replace([
        "count" => 144,
        "title" => "test"
    ], $options);

    // ... 
} 
```

在上面的示例中，即使用户提供了一个空数组，也可以确保存在`count`和索引（请记住，函数中参数的顺序很重要）。`title``array_replace()`

**注意：**在解释的情况下，使用类（或接口）也是一种选择，但选择数组而不是它的一个原因可能是简单性（甚至是性能）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-03T13:47:37.300

我尝试了上面的最后一个示例。这是我的可比测试：

```
function someFunc($options = [])
    {
        $options = array_replace([
            "<br>", "<b>", "<i>", "<u>", "<hr>", "<span>"
        ], $options);
        print_r($options);
    } 
```

结果如下：

```
>>> somefunc()
Array
(
    [0] => <br>
    [1] => <b>
    [2] => <i>
    [3] => <u>
    [4] => <hr>
    [5] => <span>
)
=> null 
```

然而，看看当您尝试添加标签时会发生什么。注意原始值会发生什么。元素 [0] 已更改。该数组未添加到：

```
>>> someFunc(["<div>"])
Array
(
    [0] => <div>
    [1] => <b>
    [2] => <i>
    [3] => <u>
    [4] => <hr>
    [5] => <span>
)
=> null 
```

这将允许您将元素添加到默认选项：

```
function someFunc($options = array())
    {
       array_push($options, "<br>", "<b>", "<i>", "<u>", "<hr>", "<span>");
       return $options;
    } 
```

结果如下：

```
>>> someFunc()
=> [
     "<br>",
     "<b>",
     "<i>",
     "<u>",
     "<hr>",
     "<span>",
   ]

---
 someFunc(["<div>","<table>"]);
=> [
     "<div>",
     "<table>",
     "<br>",
     "<b>",
     "<i>",
     "<u>",
     "<hr>",
     "<span>",
   ] 
```

这样，默认值被添加到。

# lua - 在电晕中从 system.DocumentsDirectory 中删除所有文件

> ID：14456729
> 
> 赞同：1
> 
> 时间：2013-01-22T10:45:17.447
> 
> 标签：lua, coronasdk, luafilesystem

我是电晕的新手，想在我的应用程序中添加一个功能，在按下后退按钮时，用户存储的所有数据都会从文档目录中删除。总之我想知道有没有办法清空文档目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:18:16.007

使用它来删除 /documents 目录中的所有文件

```
 local lfs = require "lfs";

local doc_dir = system.DocumentsDirectory;
local doc_path = system.pathForFile("", doc_dir);
local resultOK, errorMsg;

for file in lfs.dir(doc_path) do
local theFile = system.pathForFile(file, doc_dir);

if (lfs.attributes(theFile, "mode") ~= "directory") then
  resultOK, errorMsg = os.remove(theFile);

  if (resultOK) then
     print(file.." removed");
  else
     print("Error removing file: "..file..":"..errorMsg);
  end
  end
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:36:18.850

是的，你会为此使用 LFS（Lua 文件系统）模块。看：

[http://www.coronalabs.com/blog/2012/05/08/luafilesystem-lfs-tutorial/](http://www.coronalabs.com/blog/2012/05/08/luafilesystem-lfs-tutorial/)

# android - 在具有多个活动的 android 应用程序中收到意图后设置配置的推荐设计是什么？

> ID：14456732
> 
> 赞同：0
> 
> 时间：2013-01-22T10:45:28.327
> 
> 标签：android, android-intent, broadcastreceiver, android-activity

我有一个具有多个活动的 Android 应用程序，其中每个活动对应于不同的屏幕/视图，并且它们实际上是按顺序排列的（从某种意义上说，一个内部活动在某个事件之后启动另一个）。

在这种情况下，我希望能够接收一个外部 Intent，它从我的应用程序中设置一些配置（所有活动可能共有的配置），但我不希望它改变当前视图。

我该怎么做？有没有办法将广播接收器绑定到应用程序本身而不是特定活动？

广播接收器不是直接连接到活动吗？查看 [Android 意图教程] (http://developer.android.com/guide/components/intents-filters.html#npex) 所有的意图过滤器都附加到清单文件中的不同活动。但是查看此 [教程] (http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)，我发现可以在应用程序下直接在清单上声明 Receiver。

如果我将它直接附加到 Application 下的类（在清单上），这是否意味着代码将被执行并且前台活动（视图）不会改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:49:16.847

这里可能会根据您的要求使用不同的设计模式。

如果您想在内存中保留一些持久性信息，那么您可以对整个应用程序使用共享首选项。

您可以拥有一个广播接收器，旨在获取一些包含所有配置值的外部意图。

每次，您可以检查外部配置散列和内部散列（存储在共享首选项中），如果发现一些差异，则可以更新共享首选项。

因此，更好的方法是您可以拥有一个配置类，并且可以将此类对象保存在共享首选项中。

有几种方法可以将对象保存在共享首选项中。

所以，现在在每个活动中，您可以读取 onResume() 中的首选项以应用新配置。

如果您不想在共享首选项中保留 conf 对象，那么您可以拥有 Conf 类的静态对象，并且可以在应用程序类中进行初始化。

例如-

```
 public class BaseClass extends Application {
  public static Conf conf ;
  ....
  } 
```

[http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

因此，应用程序类是那些需要维护全局应用程序状态而不是特定于组件（活动、服务）的人的基类。

# grails - 无法使 Grails 和审计日志插件工作

> ID：14456734
> 
> 赞同：0
> 
> 时间：2013-01-22T10:45:43.110
> 
> 标签：grails, grails-plugin

我正在尝试将数据审计添加到我的 Grails 项目中，但它不起作用。我已经在 grails 网站上阅读[了本](http://grails.org/plugin/audit-logging)教程，并按照那里的描述做了所有事情。

我现在拥有的是一个`Event`看起来像这样简单的域类：

```
class Event {

    static auditable = true;

    String name;

    def onSave = {
        println "event inserted";
    }
    def onChange = {
        println "event changed";
    }
} 
```

和主控制器中的一个方法：

```
def addEvent = {
    def obj = new Event([name:"Test event 1"]);
    if (obj.save(flush:true)){
        render "addEvent complete for " + obj.toString();}
    else{
        render "addEvent failed for " + obj.toString();
        obj.errors.allErrors.each {
            log.error( it.toString() );
        }
    }
} 
```

我也添加`auditLog.verbose = true`到`Config.groovy`文件中。

仍然当我从浏览器调用此方法时，新事件会在 DB 中创建，但`audit_log`表中没有任何内容，控制台中也没有关于这种情况的发生。

我在这里想念什么？

# for-loop - 在 For 循环中使用 Each

> ID：14456740
> 
> 赞同：2
> 
> 时间：2013-01-22T10:46:09.027
> 
> 标签：for-loop, vbscript, foreach

我正在尝试使用 For 循环中的 Each 关键字在数组中输入值，但在下面的代码中我无法做到这一点，你能帮我理解下面代码中的错误吗？

```
Dim Arr(4)

For Each Element in Arr

    Element = InputBox("Enter Data")

Next

'Nothing is getting stored in the Array: Arr() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T10:53:26.653

您不能使用从 For Each (*) 返回的索引器设置数组元素，因此您必须改为执行以下操作：

```
Dim Arr(4)

For i = 0 to 4
    Arr(i) = InputBox("Enter Data")
Next

For Each Element in Arr
    MsgBox Element
Next 
```

(*) 我猜它是实际值的副本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-20T05:22:14.250

对于每个循环仅适用于预先存在的数组数据。它不能用于作业。

如果以防万一，你需要为每个循环使用，你可以使用以下方法：

```
Dim Arr(4)

i=0

For Each Element in Arr
   Arr(i)= InputBox("Enter Data")
   i++

Next 
```

我实际上不知道语法，但以下概念将帮助您提供数组中的数据。

# magento - Head.phtml 在类别页面的源代码中显示两次

> ID：14456742
> 
> 赞同：0
> 
> 时间：2013-01-22T10:46:14.217
> 
> 标签：magento, categories, head

在源代码中，head.phtml 被加载了两次，一次是它应该的方式，一次是在内容和页脚之间。我替换了服务器上所有magento的原始文件，并临时切换到默认模板，这并没有解决问题。

请参阅以下链接： [http ://www.qxsystems.net/laptops.html](http://www.qxsystems.net/laptops.html)

我认为该问题是由模块或后端中的 magento 设置引起的。

有人可以在不删除所有模块的情况下为我提供一些解决此问题的方法吗？

非常感谢任何帮助！

PS：应该归咎于一个模块：名为“priceranges”

谢谢所有的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:58:07.343

如果您已经替换了原始文件并且还更改了模板并且仍然没有更改，那么这肯定是缓存问题。刷新缓存。

如果仍然不能解决您的问题，那么它一定是一些外部模块问题。

如果问题没有解决，那么在打开 TemplatePathHints 的情况下给你的网页截图，这样更容易判断问题到底出在哪里。

# c# - 在 DataTemplate 中绑定图像源时出错

> ID：14456744
> 
> 赞同：3
> 
> 时间：2013-01-22T10:46:15.967
> 
> 标签：c#, wpf, image, binding

我有一个`ItemsControl`应该显示我的图像的画布。我有一个`ObservableCollection`带有属性的类的对象：

```
Image Image;
double X;
double Y; 
```

我的 XAML 包含以下代码：

```
<ItemsControl ItemsSource="{Binding Images}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas AllowDrop="True" Drop="Canvas_Drop_1" MouseDown="canvas_MouseDown_1" Background="{StaticResource LightColor}" Name="canvas" >
            </Canvas>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Image Source="{Binding Image}"/>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
    <ItemsControl.ItemContainerStyle>
        <Style>
            <Setter Property="Canvas.Top" Value="{Binding Y}" />
            <Setter Property="Canvas.Left" Value="{Binding X}" />
        </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

`Images`我的在哪里`ObservableCollection`。现在的问题是我无法`Image`将该集合中的一个绑定到 a`ImageSource`中的一个`DataTemplate`。如果我按照我写的那样做，我会收到一个错误：

> System.Windows.Data 错误：1：无法创建默认转换器以在类型“System.Windows.Controls.Image”和“System.Windows.Media.ImageSource”之间执行“单向”转换。考虑使用 Binding 的 Converter 属性。绑定表达式：路径=图像；DataItem='ImageItemViewModel' (HashCode=7670737); 目标元素是'图像'（名称=''）；目标属性是“源”（类型“ImageSource”）
> 
> System.Windows.Data 错误：5：BindingExpression 生成的值对目标属性无效。；值='System.Windows.Controls.Image' BindingExpression:Path=Image; DataItem='ImageItemViewModel' (HashCode=7670737); 目标元素是'图像'（名称=''）；目标属性是“源”（类型“ImageSource”）

当我把它工作：

```
<Image Source="{Binding Image.Source}"/> 
```

代替

```
<Image Source="{Binding Image}"/> 
```

但后来我失去了它所具有的所有图像属性（如效果等）。

`Image`所以问题是：我怎样才能把我的集合对象中的整个对象放在那里，而不是只绑定它的源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:50:46.470

您的`Image`属性不应该是[Image](http://msdn.microsoft.com/en-us/library/system.windows.controls.image%28v=vs.110%29.aspx)控件，而是[ImageSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imagesource.aspx)，或者可能是`Uri`or `string`。

```
public class DataItem
{
    public ImageSource Image { get; set; }
    ...
} 
```

或者

```
public class DataItem
{
    public string ImageUrl { get; set; }
    ...
} 
```

* * *

但是，如果您确实需要将属性作为控件，则可以将其放入 ContentControl 中：

```
<ItemsControl.ItemTemplate>
    <DataTemplate>
        <ContentControl Content="{Binding Image}"/>
    </DataTemplate>
</ItemsControl.ItemTemplate> 
```

# jquery - hml5 toDataUrl() 在 Chrome 上不起作用

> ID：14456745
> 
> 赞同：3
> 
> 时间：2013-01-22T10:46:22.973
> 
> 标签：jquery, html, google-chrome

我这样做：

```
$('#displayBtn').click(function(){
    var canvas = document.getElementById("myCanvas");
    var dataUrl = canvas.toDataURL();
    document.getElementById("textArea").value = dataUrl;
}); 
```

它在 Firefox 和 IE 上运行良好，但在 Chrome 上就不行了。我用谷歌搜索并返回与 .SVG 文件有关的问题，但我没有使用任何 SVG 文件，只有 PNG 和 JPG。这是我的代码的一个小提琴：http: [//jsfiddle.net/ykpCn/2/](http://jsfiddle.net/ykpCn/2/) 是因为我使用的是透明的PNG吗？不知道我做错了什么。对 HTML5 来说非常新，我希望这不是我忽略的愚蠢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T11:00:12.687

显然，如果 Chrome 托管在网络服务器上，它只能在 Chrome 上运行？如果我上传到服务器然后从那里查看它可以正常工作，但在本地无法正常工作。我的问题现在很愚蠢。很抱歉浪费时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T13:12:51.933

该问题与跨源资源访问有关。您在画布上渲染的图像来自不同的来源 (http://moosepi.com)。您不能对来自不同来源的图像调用 toDataURL()。

如果您启动 Chrome 开发人员工具，您会在控制台中找到它。“未捕获的错误：SECURITY_ERR：DOM 异常 18”。这是根据[规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#security-with-canvas-elements)的预期行为。

解决方案： 1\. 从您的服务器托管图像（可能使用代理设置）。2\. 在资源上设置[CORS](http://www.w3.org/html/wg/drafts/html/master/infrastructure.html#cors-settings-attribute)属性。请记住，源必须设置适当的标头。

# linux - 用于获取参数的 Shell getops

> ID：14456749
> 
> 赞同：2
> 
> 时间：2013-01-22T10:46:29.447
> 
> 标签：linux, bash, shell, debian

我有一个脚本应该作为以下两者之一运行：

```
script.sh -t TYPE
script.sh -t TYPE -f FILE 
```

*   如果它在没有 -t 标志的情况下运行，我希望它出错并退出。
*   如果它使用 -t 标志运行，我想获取该值并将其存储在一个名为“$TYPE”的变量中并打印“JUST $TYPE”
*   如果它使用 -f 标志运行，我希望它获取值并将其存储在名为“$FILE”的变量中并打印“$TYPE and $FILE”

从这里和互联网上的信息和教程来看，这通常是我能得到的最接近的。谁能帮我将第二个条件放入这个现有代码中？

```
while getopts ":t:" opt; do
  case $opt in
    a)
      echo "JUST $OPTARG" >&2
      ;;
    \?)
      echo "Error - Invalid type argument" >&2
      exit 1
      ;;
    :)
      echo "Error - No type argument" >&2
      exit 1
      ;;
  esac
done 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:19:11.023

我认为您对如何处理命令行参数感到困惑。

常见的方法是所有参数的处理先于程序/脚本的实际工作。

此外（与 相关`getopts`）如果选项附加了一个冒号，则表明该选项应该有一个参数。

你的`case`陈述看起来也人满为患。您不需要测试冒号和问号。整个测试可以放在`while`循环之后

* * *

我会这样做

```
#!/bin/bash
unset TYPE
unset FILE

#uncomment if you want getopts to be silent
#OPTERR=0

while getopts "t:f:" opt; do
  case $opt in
    t)
      TYPE=$OPTARG
      echo "JUST $OPTARG"
      ;;
    f)
      FILE=$OPTARG
      ;;
  esac
done

if ! test "$TYPE" ; then
    echo "-t is obligatory"
    exit 1
fi

if test "$TYPE" && test "$FILE" ; then
    echo "$TYPE and $FILE"
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T12:16:39.973

看看这个：

```
TYPE=""
FILE=""

while getopts "t:f:" opt; do
    case $opt in
        t)  TYPE="$OPTARG"
            ;;
        f)  FILE="$OPTARG"
            ;;
    esac
done

if [ -z "$TYPE" ]; then
  echo "No -t. Bye."
  exit 1 # error
else
  if [ -n "$FILE" ]; then
    echo "$TYPE and $FILE"
  else
    echo JUST $TYPE
  fi
fi 
```

# jquery - AJAX POST 请求中的多行合二为一

> ID：14456750
> 
> 赞同：-2
> 
> 时间：2013-01-22T10:46:30.040
> 
> 标签：jquery, ajax, post, multiline

我正在尝试使用 jquery 通过 AJAX POST 请求发送来自的内容。服务器是 nodeJS 构建的。当我发送多行消息时出现我的问题：

```
line1
line2

line3 
```

变成

```
line1,line2,,line3 
```

在服务器上。这是客户端 javascript/jquery 代码：

```
 function send() {
    var dataString = 'to=' + $("#to").val() + '&subject=' + $("#subject").val() + '&body=' + $("#body").val();
    $.ajax({
                type: "POST",
            url: "/sendMail",
                cache: false,
            data: dataString,
            success: function(data) {
            location.reload();
                },
            error: function(xhr, textStatus, errorThrown) {
            location.reload();
            }
            });
    } 
```

然后在服务器端我有

```
var send = {call: function (request, response, params) {
    var subject = request.parameters['subject'];
    var body = request.parameters['body'];
    console.log(body);
    response.end();
    }
}; 
```

我写了请求和响应，但它们工作正常 - 我得到了正确的帖子参数。那可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:52:34.497

AJAX 在一个请求字符串中发送数据，您可以使用多个请求参数（每行一个）或使用其他格式，如 JSON。它可以是这样的：

```
...&line1=<line1>&line2=<line2>... and so on 
```

# qml - blackberry 10 全局标签栏应用(global TabbedPane)

> ID：14456757
> 
> 赞同：1
> 
> 时间：2013-01-22T10:46:43.840
> 
> 标签：qml, blackberry-10

我正在创建一个具有全局选项卡栏的应用程序。“操作栏”应该有 5 个按钮，并且应该在每个屏幕上都可以看到。有没有办法在“选项卡式菜单”的帮助下一次在“ActionBar”上放置 5 个选项卡？以及如何使这个选项卡式窗格全球化？因为后者在应用程序中我使用 navigationPane 并替换了 tabbedpane。我希望 tabbedPane 栏在所有屏幕上都可见

**更新 ::::** 我尝试了工作表，但标签消失了

```
 import bb.cascades 1.0

TabbedPane {
    showTabsOnActionBar: true
    Tab {

        Page {
            titleBar: TitleBar {
                title: "1"
            }
            attachedObjects: [
                ComponentDefinition {
                    id: mySheet
                    source: "sheets.qml"
                }
            ]
            Button {
                onClicked: {
                    var sheet = mySheet.createObject();
                    sheet.open();
                }
                text: "sheet"
            }
        }
    }
    Tab {
    }
} 
```

和我的 sheet.qml 文件

导入 bb.cascades 1.0

```
Sheet {
    id: mySheet
    content: Page {
        Container {
            Label {
                text: "Hi then"
            }
            Button {
                text: "close"
                onClicked: {
                    onClicked: mySheet.close()
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:58:41.707

“我怎样才能使这个 tabbedpane 全球化？因为后者在应用程序中我使用 navigationPane 并且它取代了 tabbedpane。”

如果我正确理解您的问题，您希望始终有一个选项卡窗格，而不是稍后被导航窗格替换。

您需要做的是将您的选项卡窗格作为 qml 中的主要对象。导航窗格应该**在**每个选项卡内，因此基本上 5 个选项卡意味着您将拥有 5 个导航窗格。

当您需要推送页面时，将其推送到相关选项卡的导航窗格。

更新：表格允许您将页面推送到选项卡窗格的顶部。这是一个例子：

创建一个 qml 文件，其根项目是一张表，例如

```
Sheet {
    content: Page {
        Container {
            ... insert content
        }
    }
} 
```

然后在您的选项卡窗格中，您将执行以下操作：

在附加对象内

```
ComponentDefinition {
    id: sheetDefinition
    source: "mypage.qml"
} 
```

在您的函数/onclick/等中：

```
var sheet = sheetDefinition.createObject;
sheet.open(); 
```

更新 2：

要在选项卡窗格中推送页面，请执行类似于以下操作：

```
TabbedPane {
    Tab {
        NavigationPane {
            id: tab1Nav
            Page {

            }
        } 
    }
} 
```

然后推送页面使用

```
tab1Nav.push(page); 
```

或者替换导航窗格的内容以保留选项卡。

# excel - 隐藏工作表上的 Excel/Visual Basic 宏

> ID：14456758
> 
> 赞同：0
> 
> 时间：2013-01-22T10:46:46.763
> 
> 标签：excel, vba

我编写了一个宏，它获取一些源数据并将其写入几张纸，在宏运行之前和之后保持隐藏状态。编写完宏后，当我运行它时，它只更新每张纸上的几条记录（例如，在第一个隐藏的纸上，它更新了 1000 多行中的 21 行。发生这种情况的原因是什么？当然应该更新它们或者他们都没有？我也没有收到任何错误。我试过了

```
Application.ScreenUpdating = False
Worksheets("FT Raw").Visible = True
Worksheets("L1").Visible = True
Worksheets("L2").Visible = True
Worksheets("L3").Visible = True
Worksheets("L4").Visible = True 
```

但仍然只有 21 行得到更新。

更新：这是在每张纸上运行的代码

```
endval = Cells(Rows.Count, 1).End(xlUp).Row

For i = 1 To endval
    If Not Sheets("FT Raw").Cells(i, "A") = "" Then
        splitted = Split(Sheets("FT Raw").Cells(i, "A"), ",")
        Sheets("FT Raw").Cells(i, "B") = splitted(0)
        Sheets("FT Raw").Cells(i, "C") = splitted(1)
        Sheets("FT Raw").Cells(i, "D") = splitted(2)
        If Sheets("FT Raw").Cells(i, "D") = "1" Then
            Sheets("L1").Cells(j, "A") = Trim(splitted(0))
            Sheets("L1").Cells(j, "B") = Trim(splitted(3))
            j = j + 1
        End If
    End If
Next i 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:39:47.093

好的编辑。您需要在 endval calc 中指定 Sheet("FT Raw")。

尝试这组`endval = Sheets("FT Raw").Cells(Sheets("FT Raw").Rows.Count, 1).End(xlUp).Row`并继续执行其余代码。

（您也可以`endval = Sheets("FT Raw").UsedRange.Rows.Count` *仅*在列顶部没有空白单元格时使用）

最后幸运的是，您根本不必取消隐藏这些工作表即可运行代码。无论如何，这样做是为了调试，但在愤怒中运行时，这是没有必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:38:42.103

这与工作表的隐藏无关——即使工作表被隐藏，您仍然可以使用 VBA 对其进行修改。（仅当它受到保护时，才需要取消保护。）

看看你的代码，我看不到，在哪里`j`初始化 - 在什么情况下你的工作表中的 D 列`FT raw`等于`"1"`.

我建议您在顶部初始化 j，例如，如果您想使用添加行

```
j = Sheets("L1").Range(Rows.Count, 1).End.(xlUp).Row + 1

```

然后，在运行宏（进行检查）后，使用自动过滤器过滤原始工作表中的 D 列以获取值`1`，并查看它是否与 sheet 中的条目数匹配`L1`。

# javascript - 跨域 iframe 小部件设计（最先进的方法）

> ID：14456764
> 
> 赞同：1
> 
> 时间：2013-01-22T10:47:08.573
> 
> 标签：javascript, iframe, widget

**我正在设计一个以小部件**形式分发的应用程序。

只需将一段简单的代码 (javascript + html) 嵌入客户端站点。此代码呈现一个 iframe，在其中我将加载一个位于**我的域中**的 Web 应用程序。

这个 iframe 上的一些交互会触发事件，其中一个事件需要显示一个弹出窗口，比如灯箱，但是你知道这个东西会在 iframe 里面，我没有空间来正确显示它，所以我认为解决方案会是调用_parent 上的弹出窗口。

如果到目前为止您同意（如果不同意，请告诉我您的建议）我将需要从 iframe 与父级通信以触发事件。是否有一种轻便（最好没有 jquery 客户端）可靠且简单的方法来从跨域 iframe 中的另一个 javascript 函数调用 _parent 中的 javascript 函数？

到目前为止，我一直在尝试[这个](http://benalman.com/code/projects/jquery-postmessage/docs/files/jquery-ba-postmessage-js.html)，它似乎工作正常，但它需要客户端的 jquery。所以我主要关心的两个问题是：

**您会使用我在此处使用的相同方法来解决此问题吗？**

**如果没有 jquery，你将如何解决这个问题？**（一个代码示例会很棒！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:50:14.193

您是否考虑过创建一个简单的 api 并使用 jsonp ajax 客户端-服务器通信？您不必以这种方式担心 iframe...

如果您需要更多信息，请查看此基本 api 创建教程：[http ://www.youtube.com/watch?v=F5pXxS0y4bg](http://www.youtube.com/watch?v=F5pXxS0y4bg)

# matlab - 半监督异常值检测数据准备

> ID：14456765
> 
> 赞同：0
> 
> 时间：2013-01-22T10:47:08.260
> 
> 标签：matlab, machine-learning, data-mining, weka

我正在尝试在数据流中编写半监督异常值检测算法。我有一个训练数据集，它具有系统的正常和异常行为。我的任务是检测系统产生的数据流中的异常值。为了模拟数据流，我将数据分批。

```
 B1(990,-), B2(106,-), B3(101,5), B4(106,-), B5(101,5) 
 % where Batch_number(#normal, #abnormal) 
```

`B1`代表训练数据（仅包括正常数据记录），而 代表`B2,B3,B4,B5`测试批次。`B3`并有`B5`异常数据记录。中的正常数据`B3-B5`取自`B1`。我的问题是，对于半监督学习，这有意义吗？从 中获取正常数据是否正确`B1`？

# jquery - 如何在 twitter bootstrap typehead 的下拉列表中获取空值的所有源？

> ID：14456766
> 
> 赞同：0
> 
> 时间：2013-01-22T10:47:10.040
> 
> 标签：jquery, html, jquery-plugins, twitter-bootstrap

我正在使用 twitter bootstrap 字体。

```
 $(document).ready(function() {
        $("#searchfield").typeahead({
            minLength: 3,
            source: ["type1", "type2", "dtype3", "dtype4"]
        });
    }); 
```

`input`当我专注于标签（“#searchfield”）时，即使它是空的，我也想在下拉菜单（建议下拉菜单）中显示所有内容。这意味着我希望在我没有输入任何字母时显示所有来源。如果我输入任何字母，它需要显示相关数据（打字头的正常功能。）

**或者**

点击某个链接。下拉菜单需要提供所有给定的来源。例子：

```
<a href="#someId">Click here to populate typehead in #searchfield input tag </a>
<input type="text" id="searchfield"> 
```

单击链接时，输入字段需要使用所有给定的源（`type1, type2, dtype3,dtype4`）填充下拉列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:59:32.160

我像这样在插件中更改了以下方法

```
, lookup: function (event) {
      var that = this
        , items
        , q

      this.query = this.$element.val()

    //console.log(this.query);
    //alert("this.query"+ this.query);

      if (!this.query) {
         return this.shown ? this.hide() : this
      }

      items = $.grep(this.source, function (item) {
       if this.query == "*"
          return item
       else
          return that.matcher(item)

      })

        //console.log("==items=="+items.length);
        //console.log(items);

      items = this.sorter(items)

       if (!items.length) {
        return this.shown ? this.hide() : this
      }

      return this.render(items.slice(0, this.options.items)).show()
    } 
```

并将点击事件绑定到锚标签（`<a id="someID" ......`）

```
jQuery('#someID').click(function(){
     var $input = $("#seachfield");
     //add something to ensure the menu will be shown
      $input.val('*');
      $input.typeahead('lookup');
      $input.val('');

}); 
```

希望这对其他人有帮助..

# dynamics-crm-2011 - 如何修复托管解决方案中 CRM 2011 多对多关系中的错误？

> ID：14456781
> 
> 赞同：1
> 
> 时间：2013-01-22T10:47:39.647
> 
> 标签：dynamics-crm-2011

我在多对多关系中犯了一个错误。由于命名错误，我将其指向错误的实体。

当它已作为非托管解决方案导入时，如何更正此关系？

当从非托管解决方案导入多对多关系时，它似乎永远是固定的。每次导入都会忽略我的所有更改。目前，我的解决方法是使用新名称创建关系，但随后我必须更新和部署我的插件和其他客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:12:11.193

我了解到这是 CRM 2011 中的一个缺点。一种解决方法是：

1.  更正源组织中的关系
2.  导出更正的解决方案并解压缩
3.  更改唯一的解决方案名称并 zip 到一个新文件。这将是控股解决方案
4.  将控股解决方案导入目标系统
5.  从目标系统卸载错误的解决方案
6.  将修正后的解决方案导入目标系统
7.  最后，卸载保持解决方案

这是可行的，因为如果从解决方案中引用 CRM，则不会删除 CRM 中的任何内容。在这种情况下，虚假引用是唯一没有被引用的东西，因此它应该是唯一被删除的东西。

保留解决方案只是为了引用我们不想删除的所有有效部分。

我还没有自己测试它，但我相信通知我这个解决方法的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:07:49.500

导入托管或非托管解决方案不会从目标系统中删除任何内容。解决方案是添加剂。

我建议要么在目标系统上手动删除关系，要么将其标记为冗余（在描述或名称中），就像使用公开发布的 API 一样。

# zend-framework - Zend：LDML 是如何工作的？

> ID：14456783
> 
> 赞同：1
> 
> 时间：2013-01-22T10:47:42.127
> 
> 标签：zend-framework, socialengine

目前，我尝试解决我们的 SocialEngine 安装（基于 Zend 构建）的问题，该问题在语言选择器中显示一种语言，而不是其本地名称（如“Deutsch”代表“German”），而是用户设置的语言前端（因此，当您将语言设置为英语时，您会看到“德语”而不是“Deutsch”）。

在查看源代码时，我看到 Zend_Locale_Data 加载了系统可用的语言列表，并尝试从似乎不在我的机器上的路径读取 LDML 文件：

```
$temp = self::_getFile($locale, '/ldml/localeDisplayNames/languages/language', 'type'); 
```

当路径不在我的计算机上时，它必须在网络上，但是搜索“ldml”或“zend ldml”我没有得到关于这个主题的任何提示。你能引导我穿过迷雾吗？

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:31:25.440

您看到的`'/ldml/localeDisplayNames/languages/language'`不是文件路径而是 XPath 表达式，读取的文件是位于其中的 XML 文件`Zend/Locale/Data/`，文件名与给定`$locale`参数相关。

例如，对于英语语言环境，加载的 XML 文件应该是`Zend/Locale/Data/en.xml`. 打开此文件将显示 XPath 表达式选择的结构

```
<?xml version="1.0" encoding="UTF-8" ?>
<ldml>
<!-- content skipped -->
<localeDisplayNames>
    <!-- content skipped -->
    <languages>
        <language type="aa">Afar</language>
        <language type="ab">Abkhazian</language>
        <!-- etc... --> 
```

# c# - CA1404 - 尽管语句前面有 return 子句，CA2000 - 尽管没有进一步的参考用法

> ID：14456784
> 
> 赞同：5
> 
> 时间：2013-01-22T10:47:43.537
> 
> 标签：c#, code-analysis

我想了解为什么我的代码中会出现两个 CA 警告：

***CA2000**在失去范围之前处置对象 在方法“ImpersonateValidUser(string, string, string, LogOnType, LogOnProvider, ImpersonationLevel)”中，在对对象“tempWindowsIdentity”的所有引用超出范围之前调用 System.IDisposable.Dispose。*

***CA1404**在调用 GetLastWin32Error的 P/Invoke 方法“ImpersonateValidUser(string, string, string, LogOnType, LogOnProvider, ImpersonationLevel)”之后立即调用 GetLastError，但之前对“IDisposable.Dispose()”的调用不是 P/Invoke 语句。将调用移至 GetLastWin32Error，使其紧跟相关平台调用调用。*

下面是简化的代码示例，在警告出现的地方精确地注释了行：

```
private static void Impersonate(string userName, string domain, string password, LogOnType logonType, LogOnProvider logonProvider, ImpersonationLevel impersonationLevel)
{
    var token = IntPtr.Zero;
    var tokenDuplicate = IntPtr.Zero;
    if (NativeMethods.RevertToSelf())
    {
        if (NativeMethods.LogonUser(userName, domain, password, (int)logonType, (int)logonProvider, ref token) != 0)
        {
            if (NativeMethods.DuplicateToken(token, (int)impersonationLevel, ref tokenDuplicate) != 0)
            {
                /* CA2000 */ using (var tempWindowsIdentity = new WindowsIdentity(tokenDuplicate))
                {
                    _impersonationContext = tempWindowsIdentity.Impersonate();
                    return;
                }
            }
        }
    }
    /* CA1404 */ var e = Marshal.GetLastWin32Error();
    throw new Win32Exception(e);
} 
```

CA2000 -语句完成`tempWindowsIdentity`后未使用对象`using()`，为什么会出现此警告？

CA1404 -`Marshal.GetLastWin32Error()`总是在本机方法之后调用。即使`using()`之前调用了情况语句，该`return`子句也会出现，因此`Marshal.GetLastWin32Error()`不会被调用，那么为什么会出现这个警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:59:18.797

我相信 CA2000 发生是因为您违反了规则的以下部分，这意味着您正在创建一个一次性对象 inside`using`语句；

> 返回一次性对象需要在 using 块之外的 try/finally 块中构造该对象。

CA1404 也会发生，因为您没有`Marshal.GetLastWin32Error();`在本地调用后立即调用。尝试将`Marshal.GetLastWin32Error();`每个`if`语句作为代码中的第一项调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:54:01.143

这段代码应该修复那些 CA 警告......不是很优雅......但代码分析永远不会产生优雅的代码。

```
private static void Impersonate(string userName, string domain, string password, LogOnType logonType, LogOnProvider logonProvider, ImpersonationLevel impersonationLevel)
{
    if (!NativeMethods.RevertToSelf())
        throw new Win32Exception(Marshal.GetLastWin32Error());

    IntPtr token = IntPtr.Zero;

    if (NativeMethods.LogonUser(userName, domain, password, (int)logonType, (int)logonProvider, ref token) == 0)
        throw new Win32Exception(Marshal.GetLastWin32Error());

    IntPtr tokenDuplicate = IntPtr.Zero;

    if (NativeMethods.DuplicateToken(token, (int)impersonationLevel, ref tokenDuplicate) == 0)
        throw new Win32Exception(Marshal.GetLastWin32Error());

WindowsIdentity tempWindowsIdentity;

    try
    {
        tempWindowsIdentity = new WindowsIdentity(tokenDuplicate);
        _impersonationContext = tempWindowsIdentity.Impersonate();
    }
    finally
    {
        if (tempPort != null)
        {
            tempWindowsIdentity.Dispose();
            tempWindowsIdentity = null;
        }
    }
} 
```

对于 CA1404 的问题，如果您不立即捕获它，错误的 API 调用引发的错误代码可能会同时被来自其他托管类库方法的内部调用覆盖。在 CA2000 中，您的方法中的 WindowsIdentity 已创建，但在对对象的所有引用都超出范围之前不会释放该对象；这样做你不允许在故障点引发异常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-17T09:41:42.697

我们通过以下方式解决了 CA1404。原因是“！= 0”是 LogonUser() 或 DuplicateToken() 之后的立即调用。

```
private static void Impersonate(string userName, string domain, string password, LogOnType logonType, LogOnProvider logonProvider, ImpersonationLevel impersonationLevel)
{
    var token = IntPtr.Zero;
    var tokenDuplicate = IntPtr.Zero;
    if (NativeMethods.RevertToSelf())
    {
        var logonUserSuccessful = NativeMethods.LogonUser(userName, domain, password, (int) logonType, (int) logonProvider, ref token);
        var e = Marshal.GetLastWin32Error();  // call before comparison against 0 to avoid CA1404
        if (logonUserSuccessful != 0)
        {
            var duplicateTokenSuccessful = NativeMethods.DuplicateToken(token, (int) impersonationLevel, ref tokenDuplicate);
            e = Marshal.GetLastWin32Error();  // call before comparison against 0 to avoid CA1404
            if (duplicateTokenSuccessful != 0)
            {
                /* CA2000 */
                using (var tempWindowsIdentity = new WindowsIdentity(tokenDuplicate))
                {
                    _impersonationContext = tempWindowsIdentity.Impersonate();
                    return;
                }
            }
        }
    }
    throw new Win32Exception(e);
} 
```

# knockout-2.0 - 当复选框被标记时，是否有更优雅的方式通过 id 获取任意 javascript 对象？

> ID：14456788
> 
> 赞同：1
> 
> 时间：2013-01-22T10:47:52.470
> 
> 标签：knockout-2.0, ko.observablearray, computed-observable

不想让用户可以通过列表中的复选框来选择人员。

此示例有效，但我想知道您是否会以相同的方式进行操作。

主要问题是，无法轻松比较 javascript 任意对象。所以必须有一个映射。

这样可以吗？我不想为此创建自定义绑定，我可以在绑定中定义一个 Id 字段。

```
 function Person(id, name, age) {
    this.id = id;
    this.name = name;
    this.age = age;
  }
  function Party(id, name, persons) {
    var self = this;
    this.id = id;
    this.name = name;
    this.persons = ko.observableArray(persons);
    this.persons_checked = ko.observableArray(); //<--- for the checkboxes
    this.persons_checked.subscribe(function(newValue) {
    var mapped = [];
    mapped = $.map(newValue, function(id) { 
        return $.grep(listOfPeople, function(n) { return n.id == id; });  });
    self.persons(mapped);

}); 
```

}

在此处完成示例：http: [//jsbin.com/ukipek/6/edit](http://jsbin.com/ukipek/6/edit)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-19T20:31:51.927

最简单的解决方案是使用 knockoutjs 3.x 而不是 2.x，它神奇地完成了！

我已经采取了您的示例并对其进行了修改：

HTML部分：

```
<h1 data-bind="text: party.name"></h1>
<ul data-bind="foreach: people">
    <li>
        <input type="checkbox" data-bind="checkedValue: $data, checked: $root.party.persons_checked, attr: {value: id}">
        <span data-bind="text:name"></span>
    </li>
</ul> 
```

和 JS 部分：

```
function Person(id, name, age) {
    var self = this;
    self.id = id;
    self.name = name;
    self.age = age;
}

function Party(id, name, persons) {
    var self = this;
    self.id = id;
    self.name = name;
    self.persons = ko.observableArray(persons);
    self.persons_checked = ko.observableArray();
}

var listOfPeople = [
new Person(1, 'Fred', 25),
new Person(2, 'Joe', 60),
new Person(3, 'Sally', 43)];

var viewModel = function() {
    var self = this;

    this.party = new Party(1, "Weihnachtsfeier1", []);
    this.people = ko.observableArray(listOfPeople);
};

ko.applyBindings(new viewModel()); 
```

没有更多的映射，knockoutjs 独自处理一切:-)

如果你愿意，你可以看看这个 jsbin：http: [//jsbin.com/sasuvuwabu/1/edit](http://jsbin.com/sasuvuwabu/1/edit)

希望有帮助！

# java - 来自 https 的 wsimport：[错误] java.security.cert.CertificateException：不存在主题替代名称

> ID：14456789
> 
> 赞同：0
> 
> 时间：2013-01-22T10:47:54.483
> 
> 标签：java, web-services, soap, https, wsimport

我正在尝试使用来自 https wsdl 的 wsimport 生成 Web 服务客户端：

```
call wsimport -d bin -s src -p mypackage.ws https://x.x.x.x:8181/services/SomeService?wsdl 
```

为了解决安全错误，我将服务器证书添加到 Java 的密钥库中：

```
keytool -import -keystore c:\Java\jdk1.6.0_38\jre\lib\security\cacerts -file c:\ca-dev.crt 
```

但是当我执行 wsimport 时出现错误：

**[错误] java.security.cert.CertificateException：不存在主题替代名称**

**WSDL 文档读取失败：[https://xxxx:8181/services/SomeService?wsdl](https://x.x.x.x:8181/services/SomeService?wsdl)，因为 1) 找不到文档；/2) 文件无法读取；3) 文档的根元素不是 .**

**[ERROR] failed.noservice=在提供的 WSDL(s) 中找不到 wsdl:service:**

**需要提供至少一个具有至少一个服务定义的 WSDL**。

```
 Failed to parse the WSDL. 
```

**解决了！** 在 hosts 文件中添加了名称与证书 CN 相同的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:03:34.753

SSL 证书基于主机名。证书的 CN 必须是您尝试访问的主机名，或者它必须有一个可选的主题备用名称条目，该条目与您尝试访问的主机名完全匹配。

如果可能，请确保您的 https URL 中的主机名与证书中的 CN 或主题备用名称之一完全匹配。许多证书没有主题备用名称，因此如果您在检查证书时找不到任何名称，请不要强调。

有时以这种方式引用主机名是不可能的，例如当端口 8181 只能在 LAN 内访问时，通过完整和正确的主机名引用机器将使用 Internet 路由来访问它。据我所知，没有禁用证书检查的命令行方法。一种（显然是不可移植的）解决方法是向您的`hosts`文件添加一个条目，该文件通常位于`%SystemRoot%\system32\drivers\etc\hosts`Windows 中，因此您可以使用证书中的主机名来引用服务器。

# spring - 具有 Spring 安全性的 JSF - 登录后重定向到指定页面

> ID：14456791
> 
> 赞同：3
> 
> 时间：2013-01-22T10:47:58.340
> 
> 标签：spring, jsf, jsf-2, spring-security

我有一个使用 JSF 的 Web 应用程序，并且 Spring 安全性用于登录和授权。

例如，当用户在特定页面中键入并且他没有登录时，`localhost:8080/APP/page.xhtml`应用程序会重定向到登录页面，这是可以的。之后，用户登录，但他被重定向到的页面是`index.xhtml`默认欢迎页面，而不是`page.xhtml`.

我想要以下行为：用户转到`localhost:8080/APP/page.xhtml`，他被重定向到登录，之后他应该被重定向到他想要的页面 - `page.xhtml`。

**编辑-** **spring-security.xml**的片段：

```
 <security:http auto-config="true">
    <security:intercept-url pattern="/javax.faces.resource/*" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
    <security:intercept-url pattern="/login.xhtml" access="IS_AUTHENTICATED_ANONYMOUSLY"/>

    <security:intercept-url pattern="/**" access="ROLE_UNALLOCATED, ROLE_MANAGER"/>
    <security:intercept-url pattern="/pages/management/" access="ROLE_MANAGER"/>
    <security:intercept-url pattern="/pages/requests/" access="ROLE_UNALLOCATED, ROLE_EMPLOYEE, ROLE_TEAM_LEADER, ROLE_MANAGER"/>

    <security:form-login login-page="/login.xhtml" 
                          />
    <security:logout logout-url="/j_spring_security_logout"
            logout-success-url="/login.xhtml"
            invalidate-session="true"/>
</security:http> 
```

有任何想法吗？谢谢

编辑：

我以为是因为：

```
 <!-- Welcome page -->
<welcome-file-list>
    <welcome-file>/index.xhtml</welcome-file>
</welcome-file-list> 
```

来自 web.xml。我删除了它，但结果相同。

**后期编辑：**

我刚刚注意到我的自定义 loginController 中有一行，之后`if (authenticationResponseToken.isAuthenticated())`几乎可以肯定是问题的根源：

登录控制器：

```
@ManagedBean(name = "loginController")
@SessionScoped
@Controller
public class LoginController implements Serializable {
private static final long serialVersionUID = 1L;

@Autowired
IUserService userService;

@Autowired
@Qualifier("authenticationManager")
protected AuthenticationManager authenticationManager;

// save the current user after login to be able to inject it in other places
// as needed
private User currentUser;

/**
 * This action logs the user in and returns to the secure area.
 * 
 * @return String path to secure area
 */
public String loginUsingSpringAuthenticationManager() {
    // get backing bean for simple redirect form
    LoginFormBackingBean loginFormBean = (LoginFormBackingBean) FacesUtils
            .getBackingBean("loginFormBean");

    // simple token holder
    Authentication authenticationRequestToken = createAuthenticationToken(loginFormBean);

    // authentication action
    try {
        Authentication authenticationResponseToken = authenticationManager
                .authenticate(authenticationRequestToken);

        Authentication authCopy = null;
        final Object principal = authenticationResponseToken.getPrincipal();
        if (principal instanceof LdapUserDetailsImpl) {
            LdapUserDetailsImpl userImpl = (LdapUserDetailsImpl) principal;
            userImpl.getUsername();

            // here check if we already have a User with his DN in the DB
            // get the User by DN
            User u = userService.getUserByDn(userImpl.getDn());

            // if a user with this DN does not exist in the DB, create a new
            // one with the DN from LDAP and the default settings for a new
            // user
            if (null == u) {
                u = userService.createNewUserFromDn(userImpl.getDn(),
                        userImpl.getUsername());
            }
            // set the obtained user as the current user
            setCurrentUser(u);
            List<GrantedAuthority> grAuth = new ArrayList<GrantedAuthority>();
            // after this, do the role authority stuff
            // here loop through user roles if he has more and
            if (null != u.getUserTeamRoles()) {
                for (UserTeamRole urt : u.getUserTeamRoles()) {
                    // here get role for every UserTeamRole
                    grAuth.add(new SimpleGrantedAuthority(urt.getRole()
                            .getName()));
                }
            }

            // add the above found roles to the granted authorities of the
            // current authentication
            authCopy = new UsernamePasswordAuthenticationToken(
                    authenticationResponseToken.getPrincipal(),
                    authenticationResponseToken.getCredentials(), grAuth);
        }

        SecurityContextHolder.getContext().setAuthentication(authCopy);
        // ok, test if authenticated, if yes reroute
        if (authenticationResponseToken.isAuthenticated()) {
            // lookup authentication success url, or find redirect parameter
            // from login bean
            return "index.xhtml?faces-redirect=true";
        }
    } catch (BadCredentialsException badCredentialsException) {
        // FacesMessage facesMessage = new FacesMessage(
        // "Login Failed: please check your username/password and try again.");
        // FacesContext.getCurrentInstance().addMessage(null, facesMessage);
        FacesContext.getCurrentInstance().addMessage(
                null,
                new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        "Sample error message",
                        "Login Failed! Please check your credentials"));
    } catch (LockedException lockedException) {
        FacesMessage facesMessage = new FacesMessage(
                "Account Locked: please contact your administrator.");
        FacesContext.getCurrentInstance().addMessage(null, facesMessage);
    } catch (DisabledException disabledException) {
        FacesMessage facesMessage = new FacesMessage(
                "Account Disabled: please contact your administrator.");
        FacesContext.getCurrentInstance().addMessage(null, facesMessage);
    }

    return null;
}

private Authentication createAuthenticationToken(
        LoginFormBackingBean loginFormBean) {
    UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(
            loginFormBean.getUserName(), loginFormBean.getPassword());
    return usernamePasswordAuthenticationToken;
} 
```

如何重定向到我需要的页面？我有一个包含用户名和密码的 loginBean，我可以添加一个 redirectUrl 但如何找到以前的 url 路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:26:58.417

Spring Security[通过使用 SavedRequestAwareAuthenticationSuccessHandler](https://github.com/SpringSource/spring-security/blob/master/web/src/main/java/org/springframework/security/web/authentication/SavedRequestAwareAuthenticationSuccessHandler.java#L60)（它在后台使用 HttpSessionRequestCache ）在 AbstractAuthenticationProcessingFilter 中[为您实现此逻辑](https://github.com/SpringSource/spring-security/blob/master/web/src/main/java/org/springframework/security/web/authentication/AbstractAuthenticationProcessingFilter.java#L326)（通常使用 UsernamePasswordAuthenticationFilter 的具体实现）。由于您已经编写了一个控制器来进行身份验证（而不是使用内置支持），因此您需要自己实现此逻辑。您可以重用 Spring Security 所做的相同类，而不是自己实现所有逻辑。

例如，您的 LoginController 可能会更新如下：

```
public class LoginController implements Serializable {
    // ... same as before ...
    private RequestCache requestCache = new HttpSessionRequestCache();

    public String loginUsingSpringAuthenticationManager() {
        // ... just as you had been doing ...

        if (authenticationResponseToken.isAuthenticated()) {
            HttpServletRequest request = (HttpServletRequest)         
              FacesContext.getCurrentInstance().getExternalContext().getRequest();
            HttpServletResponse response = (HttpServletResponse)         
              FacesContext.getCurrentInstance().getExternalContext().getResponse();

            SavedRequest savedRequest = requestCache.getRequest(request, response);

            return savedRequest.getRedirectUrl();
        }

        // ... same as you had ...
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:01:32.840

默认情况下，如果`default-target-url`未定义 Spring Security 会尝试重定向到以前的 url，因此您只需从标签中删除`default-target-url`属性。`form-login`

```
<security:form-login login-page="/login.xhtml" /> 
```

**更新**

如果您的过滤器链中有`ExceptionTranslationFilter`，那么它应该缓存 HTTP 请求。因此，在您的自定义 loginController 中，您可以尝试从此缓存请求中获取重定向 url。

```
RequestCache requestCache = new HttpSessionRequestCache();
SavedRequest savedRequest = requestCache.getRequest(request, response);
String targetUrl = savedRequest.getRedirectUrl(); 
```

要将请求注入您的控制器，请尝试：

```
private @Autowired HttpServletRequest request; 
```

或者

```
HttpServletRequest curRequest = ((ServletRequestAttributes) 
           RequestContextHolder.currentRequestAttributes()) .getRequest(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:51:01.440

改变

```
<security:form-login login-page="/login.xhtml" 
                         default-target-url="/index.xhtml" /> 
```

到

```
<security:form-login login-page="/login.xhtml" 
                         default-target-url="/page.xhtml" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T14:01:02.797

要获得您描述的行为，您应该在 web.xml 中添加一个 spring 安全过滤器，如下所示：

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>ERROR</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
</filter-mapping> 
```

并且可能您还必须编辑您的 spring-secruity.xml。有关更多信息，请参阅此链接：[Spring Security with DelegatingFilterProxy](https://stackoverflow.com/questions/11135558/spring-security-with-delegatingfilterproxy)

检查此讨论，它看起来与您的问题相似，可能对您有所帮助：http: [//forum.springsource.org/showthread.php?128480 -Redirecting-to-original-(unauthenticated-page)-after-spring-安全-openid-真实的](http://forum.springsource.org/showthread.php?128480-Redirecting-to-original-(unauthenticated-page)-after-spring-security-openid-authentic)

# android - 获取单击按钮的值并附加它们

> ID：14456792
> 
> 赞同：1
> 
> 时间：2013-01-22T10:47:57.677
> 
> 标签：android, xml, drag

我是 android 开发的新手，将创建简单的**拖放**计算器。我的目标是制作从**0 到 9**的按钮，并通过单击它们来创建数字。

例如：

**0 1 2 3 4 5 6 7 8 9**

并通过单击它们创建数字**245**，然后将此数字拖动到**总和标记 +**中，然后重复第二个数字并自动检索结果。

首先，我现在将显示我的代码...

**MainActivity.java**

```
package com.coreprojects.calculator;

import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.app.Activity;

public class MainActivity extends Activity {

    TextView calc_btn;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }

    // This method comes from XML button = buttonClick
    public void buttonClick(View v) {

        // Textarea where numbers will be shown
        TextView TV = (TextView) findViewById(R.id.calc_cache_1);

        // Get the ID of buttons
        Button calc_btn_1 = (Button) findViewById(R.id.button1);
        Button calc_btn_2 = (Button) findViewById(R.id.button2);

        // INT type numbers convert to string, because of [setText]
        String buttonText_1 = calc_btn_1.getText().toString();
        String buttonText_2 = calc_btn_2.getText().toString();

        // Result as text
        TV.setText(buttonText_1); // first number is not shown
        TV.setText(buttonText_2); // second number

        // alert
        /**
        String pressed = "Operation Done";
        new AlertDialog.Builder(this).setTitle("result").setMessage(pressed)
                .setNeutralButton("Done", null).show();
        */
    }

} 
```

**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/calc_cache_1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/main_text" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:clickable="true"
        android:onClick="buttonClick"
        android:text="@string/button_1" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="64dp"
        android:clickable="true"
        android:onClick="buttonClick"
        android:text="@string/button_2" />

</RelativeLayout> 
```

**字符串.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">Calculator</string>
    <string name="main_text"></string>
    <string name="menu_settings">Settings</string>
    <string name="button_1">1</string>
    <string name="button_2">2</string>

</resources> 
```

现在问题...

当我点击按钮时，任何时候结果都会显示数字 2，因为我认为

> TV.setText(buttonText_2) 是第二个命令，第一个命令不再读取。

我试着一起写，比如 TV.setText(buttonText_1 + buttonText_2)，但现在结果是**12**，即使我点击任何一个按钮......

那么如何通过单击来附加数字呢？而且，如果你在这里看到，我在 XML 中有可点击的按钮，并获得按下按钮的 ID，但我希望它更加动态。

例如：当我按下按钮时，不获取它的ID，而只是识别按钮ID并获取值。我可以在 jQuery 中向你展示简单的模拟：

```
$(".button_class_not_ID").click(
    var elementValue = $(this).html();
    or
    var elementValue = $(this).attr("id");
    console.log(elementValue);
); 
```

# sharepoint - 通过 Internet 访问 Infopath 表单

> ID：14456794
> 
> 赞同：4
> 
> 时间：2013-01-22T10:48:03.170
> 
> 标签：sharepoint, sharepoint-2010, infopath2010, workflowservice

我们是一个全球性的慈善组织。我们的一个 SharePoint 应用程序有问题，由于没有解决方案，我们在这里有点绝望。

问题描述：我们的 SharePoint 2010 应用程序使用 Infopath 2010 在线创建和提交表单以获得批准和授权。该系统在我们的 Intranet 中完美运行，但是当我们尝试通过 Internet 访问它时（我们希望它可以双向访问），它不会打开 InfoPath 表单。我们正在使用经典的 Windows 身份验证。

我们所做的是：在Web应用程序的Internet区域中添加了Alternate Access Mapping（https://sharepoint.xxx.org.uk），我们没有在IIS中添加与https的绑定（这可能是一个问题？）。

然后，我们将此服务器的 IP 映射到 UAG Forefront 服务，以使其在 Internet 上可用。现在，该应用程序可通过 Intranet 和 Internet 使用。但问题是，在互联网上，表单不会打开，它们会永远加载，现在当我们删除防火墙设置时，表单会打开一个错误消息，即加载表单时出现错误。无法下载所需的资源。要尝试恢复下载，请刷新页面。

我们已经尝试并用尽了互联网上论坛和博客中的几乎所有选项，但无济于事。

有人可以帮助我们吗？我们真的很想解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:28:00.507

问题很可能是它无法通过 Internet 解析 XSN 文件的位置。

如果您拥有正确的许可证，那么也许值得考虑使用[InfoPath Forms Services](http://technet.microsoft.com/en-us/library/cc262263%28v=office.14%29.aspx)以允许直接在 Web 浏览器中编辑表单。

除非您正在做一些特别的事情，否则您现有的表单可以直接在 Forms Services 中使用而无需更改。

由于您的问题也与 sharepoint 有关，您可能需要考虑在[sharepoint.stackexchange.com](http://sharepoint.stackexchange.com)上交叉发布此问题。

# grails - 在 Windows 中使用 Grails

> ID：14456802
> 
> 赞同：0
> 
> 时间：2013-01-22T10:48:29.453
> 
> 标签：grails

我的项目需要使用Grails，我有2.2版本，JDK7。

我创建了 JAVA_HOME 和 GRAILS_HOME 变量，但是当你尝试在我的命令中运行 grails 时，我得到了这个答案：

> /grails-2.2.0/lib/org.springsource.springloaded/srpingloaded-core/jars/springloaded-core-1.1.1.jar 出乎意料

谁能给我解释一下，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:41:14.170

看起来您需要将 Grails 安装到路径中没有空格的目录中。查看[此](http://jira.grails.org/browse/GRAILS-7836)讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:50:52.870

查看 GVM 项目：[www.gvmtool.net](http://www.gvmtool.net)有了它和[www.cygwin.org](http://www.cygwin.org)，您就获得了成功的组合

# cakephp-2.0 - 如何在 CakePHP2.2 中删除 Mailed-by 标头？

> ID：14456804
> 
> 赞同：1
> 
> 时间：2013-01-22T10:48:39.447
> 
> 标签：cakephp-2.0, cakephp-2.1, cakephp-2.2

我想知道如何删除 CakePHP2.2 中的“Mailed-by”标头。

当我收到电子邮件时，我的服务器名称显示为“via +++.jp”。
我认为我应该删除或更改此信息，因为它会泄露我的主机服务器名称。

我在下面的博客中找到了，但它在我的版本中不起作用。
[http://my-cakephp.blogspot.ie/2010/02/how-to-remove-mailed-by-header-in.html](http://my-cakephp.blogspot.ie/2010/02/how-to-remove-mailed-by-header-in.html)

我正在使用“电子邮件配置文件”并将“email.php”放在“配置”目录下。
然后我将 'additionalParams' => '-f' 添加到 email.php 中，如下所示。

* * *

```
class EmailConfig {

    public $default = array(
        'transport' => 'Mail',
        'from' => 'no-reply@*****.com',
        'additionalParams' => '-f ',
    );
} 
```

* * *

有人知道解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:35:26.687

您可能希望使用 CakePHP 文档作为解决方案的初始来源。我没有看你发布的链接，但这是我发现的：

我查看了 CakeEmail 类，发现有一个名为 EMAIL_CLIENT 的常量被设置为[“CakePHP Email”](http://api.cakephp.org/2.3/source-class-CakeEmail.html#EMAIL_CLIENT)

然后我进行了搜索以查看它在类中的使用位置：[$headers['X-Mailer'] = self::EMAIL_CLIENT;](http://api.cakephp.org/2.3/source-class-CakeEmail.html#709)

我注意到该类设置[了“X-Mailer”标头未定义时](http://api.cakephp.org/2.3/source-class-CakeEmail.html#708)

话虽如此，我推断如果您[在配置文件中设置 X-Mailer 标头，您](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html#configurations)将不再看到“由 CakePHP 电子邮件发送”。

API 和手册是很好的资源。祝你好运！

# jquery - Kendo-UI Cascading ComboBox 客户端过滤

> ID：14456806
> 
> 赞同：1
> 
> 时间：2013-01-22T10:48:59.717
> 
> 标签：jquery, combobox, kendo-ui, cascadingdropdown, cascade-filtering

我正在使用级联组合框来缩小选择范围，比如城市。[我的场景与 http: //kendoui.c​​om](http://kendoui.com)上提供的示例略有不同，因为我无法在页面加载后进行异步服务器调用。

这是我的代码示例：

* * *

HTML

```
<p>
    <label for="Country">Country:</label>
    <input id="country"/>
</p>
<p>
    <label for="City">City:</label>
    <input id="city" disabled="disabled" />
</p> 
```

* * *

脚本（为简单起见，内联添加数据源）

```
$("#country").kendoComboBox({
    placeholder: "Select a country...",
    dataTextField: "CountryName",
    dataValueField: "CountryID",
    dataSource: new kendo.data.DataSource({
            data: [
            {
                    CountryID: "1",
                    CountryName: "Sweden"
            },
            {
                    CountryID: "2",
                    CountryName: "Spain"
            }]
    }),
});

$("#city").kendoComboBox({
    autoBind: false,
    cascadeFrom: "country",
    placeholder: "Select city...",
    dataTextField: "CityName",
    dataValueField: "CountryID",
    dataSource: new kendo.data.DataSource({
            data: [
            {
                    CountryID: "1",
                    CityID: "1",
                    CityName: "Stockholm"
            },
            {
                    CountryID: "1",
                    CityID: "2",
                    CityName: "Gothenburg"
            },
            {
                    CountryID: "1",
                    CityID: "3",
                    CityName: "Malmo"
            },
            {
                    CountryID: "2",
                    CityID: "4",
                    CityName: "Madrid"
            }]
    }),
}) 
```

这确实有效，在第一个列表中选择“瑞典”将在第二个框中生成斯德哥尔摩、哥德堡和马尔默。但是要求对孩子和父母使用相同的 dataValueField，因此当我选择一个城市时，所选值将是 CountryID 而不是我想要的 CityID。

正确的方法（我猜）应该是在#city 中使用 dataValueField: CityID 并进行客户端选择/过滤，类似于：（注意，伪代码）

```
SELECT CityID, CityName WHERE CountryID EQUALS country.dataValue 
```

That would fetch the right dataValue (CityID) from the city combobox when a city is selected.

有谁知道如何解决这个问题？任何帮助是极大的赞赏！

# svg - 将 clipPath 应用于转换后的 g 元素

> ID：14456809
> 
> 赞同：14
> 
> 时间：2013-01-22T10:49:09.240
> 
> 标签：svg

我正在尝试剪辑一个圆圈，以便它只显示在特定范围内的部分。但是，圆圈​​位于已转换的 ag 元素内。当我将剪辑路径应用于 g 元素或此元素中的路径（“g.site”或“g.site 路径”）时，完整的圆圈会被剪掉。显示我的问题的简短示例：

```
<svg width="600" height="600">
  <defs>
    <clipPath id="myClip">
      <path d="M435.1256860398758,144.76407538624122L419.76193083948306,273.83328117717105L469.9933509829825,301.0396981292212L483.3234271019269,296.67464757752555L535.23683445551,247.72472220603692L574.3496211247055,127.3184557867296Z"
      />
    </clipPath>
  </defs>
  <g id="voronoi">
    <g id="cells">
      <path class="cell" d="M435.1256860398758,144.76407538624122L419.76193083948306,273.83328117717105L469.9933509829825,301.0396981292212L483.3234271019269,296.67464757752555L535.23683445551,247.72472220603692L574.3496211247055,127.3184557867296Z"
      />
    </g>
    <g id="sites">
      <g class="site" transform="translate(483.29548177370367,267.14072835257724)" clip-path="url(#myClip)">
        <path fill="rgba(0, 255, 0, 0.5)" d="M0,30A30,20 0 1,1 0,-30A30,20 0 1,1 0,30M0,1A1,1 0 1,0 0,-1A1,1 0 1,0 0,1Z"
        />
      </g>
      <g class="site" transform="translate(483.29548177370367,267.14072835257724)">
        <path fill="rgba(0, 0, 255, 0.5)" d="M0,30A30,20 0 1,1 0,-30A30,20 0 1,1 0,30M0,1A1,1 0 1,0 0,-1A1,1 0 1,0 0,1Z"
        />
      </g>
    </g>
  </g>
</svg> 
```

我的问题的工作演示可以在这个小提琴中找到：http: [//jsfiddle.net/xRh6A/](http://jsfiddle.net/xRh6A/)

我添加了两个圆圈。第一个被剪掉（因为设置了 clip-path 属性），第二个被显示但（显然）没有被剪掉。

我想这与剪辑路径是用绝对术语定义的事实有关，而圆形元素具有局部坐标然后被转换。我可以将 clipPath 与转换后的组一起使用，还是必须更改剪辑路径或圆形路径才能使它们匹配？

**编辑**我通过放置具有绝对坐标的“站点”来解决它。但是，这意味着我不能使用 d3.svg.arc （它在我附加的简化示例中生成代码），因为它会在局部坐标系中创建弧。

我仍然有兴趣看看它是否也可以以其他方式解决。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-05-14T15:36:00.983

您对`g`元素的翻译正在影响其`clipPath`呈现方式。您有 2 个选项：

1.  将`clip-path`属性添加到静态父元素。然后，您可以在子元素上应用您的翻译，而不会影响`clipPath`渲染。

2.  对`clipPath`元素应用反向翻译。我从未实现过这种方法，但我在这里读到了它：[https](https://stackoverflow.com/a/16166249/3123187) ://stackoverflow.com/a/16166249/3123187 。此选项要求您在`clipPath`每次更改转换时更新`g`转换。

在您的情况下，您已经有一个父`g`元素，因此`clip-path`如果您打算将属性应用于`clipPath`元素中的每个元素，则可以在那里添加属性`g#sites`。

```
<g id="sites" clip-path="url(#myClip)">
  <g class="site" transform="translate(483.29548177370367,267.14072835257724)">
    <path fill="rgba(0, 255, 0, 0.5)" d="M0,30A30,20 0 1,1 0,-30A30,20 0 1,1 0,30M0,1A1,1 0 1,0 0,-1A1,1 0 1,0 0,1Z" />
  </g>
  <g class="site" transform="translate(483.29548177370367,267.14072835257724)">
    <path fill="rgba(0, 0, 255, 0.5)" d="M0,30A30,20 0 1,1 0,-30A30,20 0 1,1 0,30M0,1A1,1 0 1,0 0,-1A1,1 0 1,0 0,1Z" />
  </g>
</g> 
```

（jsfiddle：http: [//jsfiddle.net/SWyeD/](http://jsfiddle.net/SWyeD/)）

如果您只打算`clipPath`将其应用于第一个圆圈，则只需添加一个中间容器元素。

```
<g id="sites">
  <g clip-path="url(#myClip)">
    <g class="site" transform="translate(483.29548177370367,267.14072835257724)">
      <path fill="rgba(0, 255, 0, 0.5)" d="M0,30A30,20 0 1,1 0,-30A30,20 0 1,1 0,30M0,1A1,1 0 1,0 0,-1A1,1 0 1,0 0,1Z" />
    </g>
  </g>
  <g class="site" transform="translate(483.29548177370367,267.14072835257724)">
    <path fill="rgba(0, 0, 255, 0.5)" d="M0,30A30,20 0 1,1 0,-30A30,20 0 1,1 0,30M0,1A1,1 0 1,0 0,-1A1,1 0 1,0 0,1Z" />
  </g>
</g> 
```

（jsfiddle：http: [//jsfiddle.net/bdB65/](http://jsfiddle.net/bdB65/)）

# typo3 - 从页面上的媒体字段向 tmenuitem 添加背景图像

> ID：14456811
> 
> 赞同：2
> 
> 时间：2013-01-22T10:49:23.010
> 
> 标签：typo3, typoscript

我试图在我的菜单中的链接中添加背景图像。我的问题是我不知道如何将媒体上传字段中的文件路径获取到我的背景图像中。我菜单中的其他所有内容都有效。

```
lib.field_destinationmenu = HMENU
lib.field_destinationmenu {
    special = directory
    special.value = 565
    1 = TMENU
    1 {
        expAll = 1
        wrap = <div id="destinations">Destinationer</div><div id="destinations_places"><ul>|</ul></div>
        noBlur = 1
        NO {
            allWrap = <li class="first">|</li>|*|<li>|</li>|*|<li class="last">|</li>

            img = COA
            img.1 {
                file.import = uploads/media
                file.import.field = media
                file.import.listNum = 0
            }

            ATagParams =
            ATagParams.append = TEXT
            ATagParams.append.value = style="background-image:url( ***** )"

        }

        CUR < .NO
        CUR = 1
        CUR {
            wrap = <li class="first current">|</li>|*|<li class="current">|</li>|*|<li class="last current">|</li>
            ATagParams = class="current"
        }
    }

    #2 < .1
    #2.wrap = <ul class="submenu">|</ul>
    #3 < .2
    #4 < .2
} 
```

我应该写什么而不是*****

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:00:43.823

像这样的东西，也许

```
ATagParams.append = IMG_RESOURCE
ATagParams.append {
  file.import = uploads/media
  file.import.field = media
  file.import.listNum = 0

  stdWrap.wrap = style="background-image:url(|)"
} 
```

您不需要额外的 COA。您想要的只是 ATagParams 中的图像参考，所以把它放在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:23:59.127

这成为最终结果，它适用于 TYPO3 4.7 和 4.5

```
1 = TMENU
1.NO {
   ATagParams.cObject = COA
   ATagParams.cObject {
     20 = IMG_RESOURCE
     20.file.import = uploads/media/
     20.file.import.field = media
     20.file.import.listNum = 0
     20.stdWrap.noTrimWrap = | style="background-image: url('|');"|
     20.stdWrap.if.isTrue.field = media
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-26T13:32:03.300

这是使用 FAL 的 TYPO3 6.2 的更新：

```
1 = TMENU
1.NO {
   ATagParams.cObject = COA
   ATagParams.cObject {
     20 = FILES
     20.references {
       fieldName = media
       listNum = 0
     }
     20.renderObj = IMG_RESOURCE
     20.renderObj {
       file.import.data = file:current:publicUrl
       file.treatIdAsReference = 1
       file.width = 125
     }
     20.stdWrap.noTrimWrap = | style="background-image: url('|');"|
     20.stdWrap.if.isTrue.field = media
   }
} 
```

# c# - 为什么executereader会有这样的行为？

> ID：14456813
> 
> 赞同：-1
> 
> 时间：2013-01-22T10:49:26.073
> 
> 标签：c#, asp.net, code-behind

我找不到这种奇怪行为的正确解决方案。在另一个项目中，这就像一个魅力。当我解析 sqlconnection 并使用 System.Data.SqlClient 时，它会在 executereader 下显示这条红色下划线......为什么会这样？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Configuration;
using System.Data.SqlClient;

public partial class Default3 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        //*********************************
        //Definerer connection stringen   *
        //*********************************
        SqlConnection BilleddataBasen = new SqlConnection(WebConfigurationManager.ConnectionStrings["Boligforeningen_AB8"].ConnectionString);

        //**************************************
        //Definerer de forskellige variabler   *
        //**************************************
        string ImageFilePath = "";
        string ImageName = "";
        string OverfoereDataTilImageControlPaaAspxSiden = "";

        //**************************************************
        //Definerer hvordan der skal læses fra databasen   *
        //**************************************************
        SqlCommand SelectBlogIndlæg = new SqlCommand("SELECT FileName, FilePath, OprettelsesDato, Tittel, BilledetsIndhold FROM BillederTilGalleri", BilleddataBasen);

        BilleddataBasen.Open();
        SqlDataReader reader = BilleddataBasen.ExecuteReader();
        while (reader.Read())
        {
            ImageName += reader["FileName"];
            ImageFilePath += reader["FilePath"];
            lbl_OprettelsesDato.Text += reader["OprettelsesDato"];
            lbl_BilledNavnet.Text += reader["Tittel"];
            lbl_BeskrivelseAfBilledet.Text += reader["BilledetsIndhold"];
        }

        OverfoereDataTilImageControlPaaAspxSiden = ImageFilePath + ImageName;
        lbl_BilledFraDataBasen.ImageUrl = OverfoereDataTilImageControlPaaAspxSiden;

        //************************************************
        //Følgende to linier bestemmer pixel størrelse   *
        //************************************************

        lbl_BilledFraDataBasen.Width = 300;
        lbl_BilledFraDataBasen.Height = 250;

        //*************************************
        //Lukker ned for database tilgangen   *
        //*************************************
        reader.Close();
        BilleddataBasen.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:52:31.453

[`SqlConnection`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)没有`ExecuteReader`方法。[`SqlCommand`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)做。你应该打电话给：

```
SqlDataReader reader = SelectBlogIndlæg.ExecuteReader(); 
```

请注意，当您构建时，编译器错误消息应该已经为您提供了您自己诊断所需的所有信息 - 至少是第一部分。值得退后一步来弄清楚如何为自己解决这个问题（以及如何解决下一个问题）。

顺便说一句：

*   您应该`using`对所有资源（连接、命令、阅读器）使用语句列表项
*   在循环中连接字符串通常是一个坏主意（在这种情况下，它看起来不像你有分隔符，所以你的值都会被涂抹在一起）
*   通常变量使用 camelCase 而不是 PascalCase

另外，你说：

> 在另一个项目中，这就像一个魅力。

这根本不是真的。您提供的代码*不适*用于任何项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:52:56.720

你在你的 SqlConnection 对象上调用 ExecuteReader，你应该在你的 Command 对象上调用它。

```
SqlDataReader reader = SelectBlogIndlæg.ExecuteReader(); 
```

# signalr - Chrome 在 30-40 分钟后崩溃

> ID：14456818
> 
> 赞同：1
> 
> 时间：2013-01-22T10:49:44.777
> 
> 标签：signalr

我们目前有一个使用 SignalR 实现的实时数据馈送。但是，在 Chrome 中（我们目前仅在 chrome 中观察到这种行为）在 30-40 分钟的活动后崩溃，并且出现 chrome kill pages 对话框。为了再次开始接收读取，我们必须单击终止页面并重新登录到应用程序。

有没有其他人在长时间运行的提要中观察到这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:29:41.790

我们还没有看到任何与此相关的错误报告。但是，如果您可以提供始终重现问题的示例或具体步骤（通过[https://github.com/SignalR/SignalR/issues](https://github.com/SignalR/SignalR/issues)），我们可以检查一下。

# c# - 结构设计风格

> ID：14456820
> 
> 赞同：0
> 
> 时间：2013-01-22T10:49:53.227
> 
> 标签：c#, datagridview, format

我想`DataGridView`在 windows c# 中展示一个作为剧院的结构设计。我不知道怎么做，到目前为止我已经搜索过，但我没有找到任何特定的样式。

设计存储在数据库中，根据该数据，设计应显示在数据网格中。

例如，看附图，我想这样做：

![1vHn4.jpg](../Images/6f747412276b3412d75d793d96134f02.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:03:11.483

可以创建表吗？

从数据库中读取数据

每行添加一个 TableRow。每个座位，添加一个 TableCell。在单元格中插入您喜欢的任何内容

```
TableCell.Text 
```

对于段落，您可以输入空单元格/行，但您需要知道该位置。

然后将表格附加到占位符或您的页面

```
Page.Controls.Add(Table);
PlaceHolder.Controls.Add(Table); 
```

# google-oauth - 如何处理任意数量的重定向 URI？

> ID：14456821
> 
> 赞同：18
> 
> 时间：2013-01-22T10:49:55.743
> 
> 标签：google-oauth

我正在开发一个应用程序，其中用户有自己的 URL，他们需要使用 Google API - 当然使用不同的重定向 URI，比如

*   www.example.com/johndoe/google/login
*   www.example.com/foobar/google/login

所以首先我想我可以通过使用通配符（www.example.com/*/google/login）简单地解决这个问题，但不幸的是它不能那样工作。然后我开始用 Perl 编写一个简单的代理，但我不确定它是否会工作，而且我们的时间不多了。处理这种情况的最佳方法是什么？我曾考虑从注册处理程序向控制台添加一个新的重定向 URI，但我没有找到服务器可以执行此操作的任何方法。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-22T20:21:00.577

Google OAuth2 重定向 URI 不支持通配符。我认为最好的方法是使用单个重定向 URI，并在 state 参数中传递用户信息。state 参数作为响应返回给您。然后，当您收到授权代码/令牌时，您可以查找状态参数并适当地处理响应（例如，重定向到您的用户特定的 URL）。

[这个答案](https://stackoverflow.com/questions/13652062/subdomain-in-google-console-redirect-uris/13769166#13769166)有更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-16T13:28:38.247

您可以在 wildacrds 中使用 * 作为子域。请参阅[谷歌文章](https://auth0.com/docs/configure/applications/wildcards-for-subdomains) 这不是你想要的，但可以帮助别人

# c# - C#- GridView 中的换行符而不是逗号分隔值

> ID：14456826
> 
> 赞同：1
> 
> 时间：2013-01-22T10:50:04.607
> 
> 标签：c#, asp.net

我有一个`DataTable`从数据库填充的。在它的一列中，我有逗号分隔的值。我想删除逗号并放置换行符，以便当我将它绑定到时`GridView`它显示换行符而不是逗号分隔值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:56:36.210

试试下面...

如果是 Windows 应用程序，请尝试以下操作...

```
yourString = yourString.Replace(",",System.Environment.NewLine) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:00:48.050

一个简单的 ASP.NET 方法`GridView`：

```
<asp:GridView ID="GridView1" AutoGenerateColumns="false" runat="server">
    <Columns>
    <asp:TemplateField HeaderText="Values">
        <ItemTemplate>
            <asp:Literal runat="server" id="Values" 
                Text='<%# string.Join("<br />", Eval("Values").ToString().Split(new []{","},StringSplitOptions.None)) %>'>
            </asp:Literal>
        </ItemTemplate>
    </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

将 a 与一些数字绑定`DataTable`，结果如下：

![在此处输入图像描述](../Images/22043490885981fbe7f158f07709d8e6.png)

你也可以使用嵌套`GridView`并将其绑定`RowDataBound`到外部网格中。但这是一种更困难的方法，有一些缺点，在这种情况下可能太多了。

# android - 使用我的服务器提供安全的 Facebook 身份验证

> ID：14456829
> 
> 赞同：19
> 
> 时间：2013-01-22T10:50:09.863
> 
> 标签：android, ios, facebook, rsa, digital-signature

我想构建一个小型移动应用程序（Android 和 iOS）和一个带有 REST Api 的小型后端服务器。

我的应用程序用户（Android 或 iOS）需要登录 facebook。我通过使用 facebooks mobile sdk 来做到这一点。登录成功后，facebook sdk 将返回一个 authentificationToken，它现在在用户的智能手机上。

这个想法如下：每当我的应用程序需要一些数据时，该应用程序将通过 HTTPS 连接到我的服务器后端 (REST)。例如：应用程序生成一个简单的 HTTP GET 并传递检索到的 Facebook authenticationToken。我的服务器获取此 facebook authenticationToken 并使用此令牌来确定用户是否经过身份验证并检索 facebook 个人资料信息（名字、姓氏等）。因此服务器也联系 facebook 并为 HTTP GET 请求生成个性化响应。

我的问题是：

1.  是否真的足以为每个 REST API 调用传递这个 facebookAuthentication 令牌，以使服务器检索正确的关联 facebook 用户？
2.  我使用HTTPS，所以我想，连接已经足够加密了，对吧？
3.  我想我需要一些签名机制，因此对每个 REST API 调用（通过 HTTPS）进行签名，以确保 facebookAuthentication 令牌仅从我的移动应用程序发送。我会通过使用带有 SHA-1 的 RSA 来签署任何 REST API 调用来做到这一点。但是这种方法的问题是：客户端需要将私钥存储在 App 中的某个位置（用于签名请求），而服务器知道公钥（用于签名匹配）。它是否正确？如果是，我想这是一个很大的安全问题，因为可以反编译移动应用程序（尤其是 android）来获取私钥。如何将此私钥安全地存储在我的应用程序中？有没有其他可以推荐的签名系统？

Bt：你知道适用于 iOS 和 Android 的好的 RSA 库吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T17:49:32.273

1) 是的。够了。如果您的客户端（移动应用程序）具有令牌，则证明用户已通过 Facebook 身份验证。因此，您以这种方式对用户进行了身份验证。但是，仅对移动应用程序进行身份验证是不够的（关于这一点，我将在 #3 中讨论）。

2) 是的。它是双向加密的。

3）这是一个艰难的。这称为远程证明。这有很多问题。

在你进入这个方向之前，你需要问自己两个问题

*   你在保护谁？

*   我愿意投资多少？

如果您要保护自己免受知识非常有限的学生的侵害，他可能会编写另一个将使用您的服务器的移动应用程序，那么您可以使用签名。

如果您只是防范更复杂的软件工程师（他们可以对您的应用程序进行逆向工程） - 这还不够。该工程师可以从您的应用程序中提取私钥，并使用它来签署他的应用程序中的请求。

[您可以在此处](http://en.wikipedia.org/wiki/Trusted_Computing#Remote_attestation)和[此处](http://web.cs.wpi.edu/~guttman/pubs/good_attest.pdf)阅读有关远程证明的信息。

可以保护您免受简单逆向工程的解决方案非常复杂。

PS关于RSA库。

看看这个Android：

[Android 上的非对称加密](https://stackoverflow.com/questions/3127267/asymmetric-crypto-on-android)

这适用于 iOS

[使用公钥的 RSA 加密](https://stackoverflow.com/questions/7305604/rsa-encryption-using-public-key)

# uitableview - 如果搜索栏中没有任何内容，如何取消 AFNetworking 请求？

> ID：14456832
> 
> 赞同：0
> 
> 时间：2013-01-22T10:50:10.813
> 
> 标签：uitableview, afnetworking

我正在实施诸如实时搜索之类的东西。例如，如果我写“p”，它会在服务器中进行查询，而“pi”会进行另一个查询。因此，每个写入的字符都会使应用程序向服务器发出请求。

但是，在一些字符之后，如果我立即开始删除，因为所有请求都是异步的，因为搜索栏中没有字符，旧请求会得到一些结果并加载到表中。

我的代码是：

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{
[[ApiClient sharedClient] cancelAllHTTPOperationsWithMethod:@"GET" path:@"cuisines/search/"];

if(![searchText length]){
    [self.searchList removeAllObjects];
    [self.searchTableView reloadData];
}
else if([searchText length] > 0){
    if(searchBar == leftSearchBar){
        [[ApiClient sharedClient] getPath:[[NSString stringWithFormat:@"cuisines/search/?q=%@&locale=%@", searchText, locale] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding ] parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {
            [self.searchList removeAllObjects];
            NSMutableArray* list = [responseObject valueForKeyPath:@"cuisines"];
            if(list.count > 0){
                for (id c in list) {
                    Cuisine *cuisine = [[Cuisine alloc] initWithAttributes:c];
                    [self.searchList addObject:cuisine];
                }
            }  
            [self.searchTableView reloadData];
        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            NSLog(error.description);
        }];           
     }    
   }    
} 
```

那么，当发出新请求时，如何停止先前的请求呢？

编辑：

我在 texDidChange 的开头写了取消请求。但它是一样的。我有个问题：

路径：

```
cancelAllHTTPOperationsWithMethod:@"GET" path:@"cuisines/search/"]; 
```

和

```
cancelAllHTTPOperationsWithMethod:@"GET" path @"cuisines/search/?q=%@&locale=%@", searchText, locale] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding ] 
```

是因为根都一样吗？如果不是，我怎样才能找到并取消请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:24:18.913

当文本发生变化时，您应该检查是否已经有请求并`cancelAllHTTPOperationsWithMethod:path`立即取消它。您已经在第 3 行执行此操作，但前提是文本为空。如果您总是这样做，它将永远不允许同时发出 2 个请求。

# java - 如何替换文件中的字符串？

> ID：14456833
> 
> 赞同：0
> 
> 时间：2013-01-22T10:50:12.850
> 
> 标签：java, string, file, io

我刚刚开始编程，在用 java 创建基本的文件 I/O 程序时遇到了困难。

用例：我想检查文件中的字符串并在同一行中附加一个字符串。EG 文件内容如下：

```
hostname=localhost
port=192 
```

所以，我希望我的程序`hostname`在上面的文件中查找字符串并替换`localhost`为我传递给它的任何值。

我能够获取文件并将内容传递给临时文件，但不确定如何操作文件中的字符串。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:53:58.993

你可以试试`String.replace()`：

```
String replacement = "you-other-host";

// Read your file line by line...
line = line.replace("localhost", replacement);
// and write the modified line to your temporary file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:54:12.847

您将需要使用替换、连接等方法。如果遇到困难，请尝试一些代码并发布！

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T11:28:10.257

这里有两种方法（基本没有任何错误/异常处理以及将目标和替换作为参数传递）如何做到这一点。

如果您的文件存储键/值对而不是最好的方法是用户`java.util.Properties`

```
public class ReplaceInFile {

    private final static String src = "test.txt";
    private final static String dst_str = "test_new_str.txt";
    private final static String dst_prop = "test_new_prop.txt";

    public static void main(String[] args) throws IOException {
        usingStringOperations();
        usingProperties();
    }

    private static void usingProperties() throws IOException {
        File srcFile = new File(src);
        FileInputStream fis = new FileInputStream(srcFile);
        Properties properties = new Properties();
        properties.load(fis);
        fis.close();
        if(properties.getProperty("hostname") != null) {
            properties.setProperty("hostname", "127.0.0.1");
            FileOutputStream fos = new FileOutputStream(dst_prop);
            properties.store(fos, "Using java.util.Properties");
            fos.close();
        }
    }

    private static void usingStringOperations() throws IOException {
        File srcFile = new File(src);
        FileInputStream fis = new FileInputStream(srcFile);
        int len = fis.available();
        if(len > 0) {
            byte[] fileBytes = new byte[len];
            fis.read(fileBytes, 0, len);
            fis.close();
            String strContent = new String(fileBytes);
            int i = strContent.indexOf("localhost");
            if(i != -1) {
                String newStrContent = strContent.substring(0, i) + 
                        "127.0.0.1" +
                        strContent.substring(i + "localhost".length(), strContent.length());
                FileOutputStream fos = new FileOutputStream(dst_str);
                fos.write(newStrContent.getBytes());
                fos.close();    
            }
        }
    }
} 
```

# iphone - 如何将两个图像附加到 ios 中的 mfmailcomposer 视图控制器

> ID：14456838
> 
> 赞同：0
> 
> 时间：2013-01-22T10:50:27.270
> 
> 标签：iphone, ios, uiimage, nsdata, mfmailcomposeviewcontroller

如何在 ios 中将 web 视图数据和图像视图数据添加到 Mfmailcomposer 视图控制器。用于向他人发送邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:02:14.447

您可以使用电子邮件创建一个图像完整路径数组您想要的 attech 并执行如下操作：-

```
- (IBAction)sendemail
{

    Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
    if (mailClass != nil)
    {
        // We must always check whether the current device is configured for sending emails
        if ([mailClass canSendMail])
        {

            MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
            picker.mailComposeDelegate = self;
            [picker setSubject:@"Hello"];
            //NSString *result = txtFiled.text;
            for(NSString *dicsss in buttonss) // Hear buttonss its a ImagePathfull array
            {
                UIImage *imgvith = [UIImage imageWithContentsOfFile:[buttonss stringByAppendingPathComponent:dicsss]];
                NSData *data = UIImagePNGRepresentation(imgvith);
                [picker addAttachmentData:data mimeType:@"image/png" fileName:@"yourImagename"];

            }

            NSString *emailBody = @"Hi";
            [picker setMessageBody:emailBody isHTML:YES];
            [self presentModalViewController:picker animated:YES];
            [picker release];
        }

} 
```

工作代码截图看起来像： -

![在此处输入图像描述](../Images/34c5347dc2ac40275445c26ba1ceb80a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:58:24.447

您可以使用

```
for (UIImage *yourImage in YourImageArray )
{
            NSData *imgData = UIImageJPEGRepresentation(yourImage, 0.5);
            [mfMailComposer addAttachmentData:imgData mimeType:@"image/jpeg" fileName:[NSString  
            stringWithFormat:@"a.jpg"]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T11:00:52.637

最好的解决方案是

```
[mailCompose setMessageBody: msg isHTML: YES]; 
```

其中味精具有价值：

```
<body>
<img src='http://your_site/image1.jpg'>
<img src='http://your_site/image2.jpg'>
<br/>

<font face='Arial' size='2'>
  Message Text<br/>

  <br/>
</font> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T11:02:08.550

您可以在邮件编写器实例中添加多个图像。但请确保文件名不同。在这里查看：http: [//developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40008200-CH1-SW2](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40008200-CH1-SW2)。

# javascript - Android：将图像从网页屏幕保存到画廊

> ID：14456840
> 
> 赞同：2
> 
> 时间：2013-01-22T10:50:32.437
> 
> 标签：javascript, android, jquery, webview

我有一个简单的 Android 应用程序，它只是 webviews 的集合。通常在默认的 Android 浏览器或 Chrome 中，用户可以长按图像并将其保存到手机中。

在 web 视图中，用户没有长按选项，但我希望能够提供相同的功能来将图像保存到手机。

这可以通过 javascript 或 jquery 或任何其他方法实现吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:24:14.973

看来您至少有两个（未弃用）选项：

*   getHitTestResult() 参考：[链接](http://developer.android.com/reference/android/webkit/WebView.html#getHitTestResult%28%29)
*   requestImageRef(Message msg) Ref:[链接](http://developer.android.com/reference/android/webkit/WebView.html#requestImageRef%28android.os.Message%29)

对于第一个选项，获取基于当前光标节点的 HitTestResult。如果找到 HTML::a 标记并且锚点具有非 JavaScript URL，则 HitTestResult 类型设置为 SRC_ANCHOR_TYPE 并且 URL 设置在“extra”字段中。如果锚点没有 URL 或者它是 JavaScript URL，则类型将为 UNKNOWN_TYPE，并且 URL 必须通过 requestFocusNodeHref(Message) 异步检索。如果找到 HTML::img 标记，则将 HitTestResult 类型设置为 IMAGE_TYPE，并将 URL 设置在“extra”字段中。SRC_IMAGE_ANCHOR_TYPE 类型表示具有 URL 的锚点，该 URL 具有图像作为子节点。如果找到电话号码，则将 HitTestResult 类型设置为 PHONE_TYPE，并将电话号码设置在 HitTestResult 的“extra”字段中。如果找到地图地址，HitTestResult 类型设置为 GEO_TYPE，地址设置在 HitTestResult 的“extra”字段中。如果找到电子邮件地址，则将 HitTestResult 类型设置为 EMAIL_TYPE，并将电子邮件设置在 HitTestResult 的“extra”字段中。否则，HitTestResult 类型设置为 UNKNOWN_TYPE。

**对于第二个选项：**

```
public void requestImageRef (Message msg) 
```

它请求用户最后一次触摸的图像的 URL。msg 将被发送到它的目标，并带有一个表示 URL 作为其对象的字符串

不确定这些选项是否也与“长按”兼容。

您还可以使用 onLoadResource(WebView view, String url) 简单地捕获所有加载的图像资源，构建图像引用列表并下载按钮单击引用的那个。

# javascript - 如何以单一格式将两个图像合并在一起

> ID：14456844
> 
> 赞同：-1
> 
> 时间：2013-01-22T10:50:45.713
> 
> 标签：javascript

有没有人可以帮助我在 java 脚本中将两个图像合并在一起（也可以接受其他语言）例如：假设我有一个图像，其形状可能是方形矩形等，并且我已经上传了任何格式，但稍后当我应该上传另一张图片时，它应该适合同一张之前的图片，并且在相同的边界内，并且以相同的格式保持不变，并且两个一起应该制作一个图像（我的输出应该是在单个图像中）。

请回复将被高度接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:55:46.637

试试[Jquery jCrop](http://code.google.com/p/jcrop/)。

不过，您将需要在服务器端进行真正的裁剪。

# ubuntu - 奇怪的 qt 解析错误“解析错误（''）”

> ID：14456849
> 
> 赞同：1
> 
> 时间：2013-01-22T10:51:06.963
> 
> 标签：ubuntu, qt-creator, qmake

每个人。我使用它的软件中心在 Ubuntu 12.04 LTS 下安装了 qt creator 2.4.1。qmake 显示以下奇怪的错误：

```
/usr/bin/qmake-qt4 -spec /usr/share/qt4/mkspecs/linux-g++ -o Makefile test3.pro
/home/paul/Documents/workplace/test3/test3.pro:1: Parse Error ('')
Error processing project file: test3.pro 
```

没有错误的解析错误......但是当一个新项目刚刚创建而没有编辑pro文件时不会出现错误。

专业文件编辑包括任何事情，例如在评论中键入空格或将字符更改为自身。

该错误与代码内容或pro文件无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:39:23.233

由于警告指的是第 1 行不存在或不可见的字符，因此这可能是[Unicode BOM](http://en.wikipedia.org/wiki/Byte_order_mark)，并且 qmake 可能出于任何原因无法读取它。

尝试`test3.pro`使用`hexdump -C test3.pro`- 第一个字符是 ASCII 可打印字符（十六进制 0x20 和 0x7e 之间）进行转储，还是超出该范围（例如 0xef、0xbb、0xbf）？如果超出该范围，请尝试`test3.pro`在兼容 Unicode 的文本编辑器中打开，并在没有 BOM 的情况下保存它。

# sharepoint - SPWebApplication.Sites 未返回 Sharepoint 2010 中的所有站点

> ID：14456850
> 
> 赞同：0
> 
> 时间：2013-01-22T10:51:14.050
> 
> 标签：sharepoint, sharepoint-2010, sitecollection

我有一个计时器作业，它扫描所有网站和所有网站。循环通过 SPWebApplication.Sites 时，会列出所有但一个站点。

这是代码：

```
 foreach (SPWebApplication app in service.WebApplications)
                {
                    foreach (SPSite site in app.Sites)
                    {
                        // site missing here   
                        foreach (SPWeb web in site.AllWebs)
                        { // stuff here  }
                    }
                } 
```

所有站点都显示在中央管理中。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:36:00.923

问题是内部循环中缺少 web.Dispose() ，这使得代码在我正在寻找的站点集合之前崩溃。

由于无法在 catch() 中捕获 Dispose-Errors，因此看起来代码正在“正常”运行

# android - 在提供 onClick 反馈的 xml 布局中包含 simple_list_item_1

> ID：14456851
> 
> 赞同：0
> 
> 时间：2013-01-22T10:51:14.807
> 
> 标签：android, xml, android-layout

我必须重建可点击列表项的外观。

因此我有这个xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical" >

<TextView
    android:id="@+id/tv_changeRoomLabel"
    style="?android:attr/listSeparatorTextViewStyle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/label_optionChangeName" />

<include
    android:id="@+id/tv_btn_changeRoom"
    layout="@android:layout/simple_list_item_1"
    android:background="@android:drawable/btn_default"
    android:clickable="true" />
</LinearLayout> 
```

我尝试了很多不同的东西来添加标签，但它总是一样的。当我单击列表项时，它不显示反馈。这意味着 simple_list_item 的背景颜色不会像使用普通 ListView 时那样改变。尽管如此，至少执行了 onClick()。

有任何想法吗？

PS 我遇到了 simple_layout_activated_1 但它是 API 11，所以我不能使用它。我有 mintarget 7。

编辑：javacode

```
TextView options = (TextView) findViewById(R.id.tv_btn_changeRoom);
    options.setText(m_model.getRoomName(m_roomId));
    options.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            //do sth
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:23:50.487

**好的。`textView`根据您在讨论中的评论，我认为您在被选中时想要自己的选择器**

为此，您可以通过布局文件执行此操作。使用**`selector`**

修改你`textView`的设计。

```
<TextView
    android:id="@+id/tv_changeRoomLabel"
    android:background="@drawable/textBackSelector"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/label_optionChangeName" /> 
```

在**drawable**文件夹中创建一个文件并将其命名为`textBackSelector.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" android:color="THE_COLOR_YOU_WANT_WHEN_PRESSED"/>
    <item android:state_selected="true" android:color="THE_COLOR_YOU_WANT_WHEN_SELECTED"/>
    <item android:color="DEFAULT_BACKGROUND_COLOR_OF_TEXTVIEW"/>

</selector> 
```

上面的*xml*在选择时处理您的 textView 背景。

希望对您有所帮助。

谢谢

# ios - 无法在 NSUserDefault 中存储 NSMutableDictionary

> ID：14456857
> 
> 赞同：1
> 
> 时间：2013-01-22T10:51:32.037
> 
> 标签：ios, objective-c, nsuserdefaults, nsmutabledictionary

嗨，我知道在我想知道我的代码哪里出错之前会问这个问题。所以我问这个问题..我正在尝试将 nsmutabledictionary 的值存储到 nsuserdefaults 中。

我在 uitableviewcell 中添加了 uiswitch 。所以每次我打开 uiswitch 时，它都应该存储在 nsuserdefaults 中，这样当我退出应用程序并重新打开应用程序时，最后一次打开的开关应该打开

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    activeNotificationDictionary = [[NSMutableDictionary alloc]init];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSData *data = [defaults objectForKey:@"theKey"];
    NSMutableDictionary *artworkDict = [NSKeyedUnarchiver unarchiveObjectWithData:data];

    artworkDict = activeNotificationDictionary;

}

-(void)notificationChangedForSymptom:(int)symptomIDNo withRemedyID:(int)remedyID isSelected:(BOOL)isSelected
{
    if (isSelected == YES)
    {        
        selectedSymptomID = symptomIDNo;
        selectedRemedyID = remedyID;

        if ([activeNotificationDictionary objectForKey:[NSNumber numberWithInt:symptomIDNo]] != nil)
       {
           UIAlertView *selectedNotification = [[UIAlertView alloc]initWithTitle:@"Reminder" message:@"Would you like to change the notification" delegate:nil cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];

           selectedNotification.delegate = self;
           NSLog(@" selected remedyID for symptom %@", activeNotificationDictionary);

           [selectedNotification show];

           NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

           NSDictionary *dict = [NSDictionary dictionaryWithObject:activeNotificationDictionary forKey:@"dictKey"];
           NSData *data = [NSKeyedArchiver archivedDataWithRootObject:dict];

           [defaults setObject:data forKey:@"theKey"];

           [defaults synchronize];

           NSLog(@"default value %@",defaults);

       }
       else 
       {

           [activeNotificationDictionary setObject:[NSNumber numberWithInt:RemedyID] forKey:[NSNumber numberWithInt:SymptomIDNo]];

       }

    }       

    else

      {
          [activeNotificationDictionary removeObjectForKey:[NSNumber numberWithInt:symptomIDNo]];
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:12:00.037

当您对可变字典进行编码时，只会对不可变字典进行编码，因为`NSMutableDictionary`它不是覆盖`NSSecureCoding`方法。所以制作它的可变副本：

```
NSData *data = [defaults objectForKey:@"theKey"];
NSMutableDictionary *artworkDict = [[NSKeyedUnarchiver unarchiveObjectWithData:data]mutableCopy]; 
```

**编辑**

我建议在应用程序启动*之前*初始化每个默认值，例如：

```
+ (void) initialize // Inside the class storing the defaults
{
    NSUserDefaults* defaults= [NSUserDefaults standardUserDefaults];
    [defaults registerDefaults: @{ @"theKey":@{} } ];
} 
```

如果要与数据库同步所有默认值，请调用 synchronize：

```
[defaults synchronize]; 
```

# objective-c - 为 uitableView 保存最近列表的最佳方法

> ID：14456862
> 
> 赞同：0
> 
> 时间：2013-01-22T10:51:40.210
> 
> 标签：objective-c, xcode, uitableview, nsarray

我正在努力解决这个问题。

我目前有一个从数组填充的 uitableview。

当用户在索引处选择行时，我想将其添加到不同视图控制器中的表视图中。

单元格包含文本和图像。

我考虑将它添加到一个数组中，然后将该数组保存在 nsuserdefaults 中。

但我不相信这是最好的方法。

提示、提示和方向将受到极大的欢迎

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:01:18.367

为和`NSObject`类型的 ivars 创建一个子类。给它一个你选择的名字。比如说。`NSString``UIImage``CustomClass`

`CustomClass`现在，当从表中选择一行时，创建一个您在上面创建的实例。并将其传递给正在调用的方法`NextViewController`。在这里，您必须重写`initWithNibName:`方法以将对象传递给下一个视图控制器类。

希望你明白我的意思。这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:04:23.023

您可以为此使用 NSCache

```
 [cache setObject:yourcellcontaint forKey:someKey]; 
```

把它拿到你想要的地方：

```
[cache objectForKey:someKey] 
```

# php - 文件系统输入或输出错误？

> ID：14456864
> 
> 赞同：2
> 
> 时间：2013-01-22T10:51:48.477
> 
> 标签：php, eclipse

我已经安装了 Eclipse PHP 3.0.2 和之后的 RSE，以便能够基于 ftp 连接创建项目，并使用远程文件。

虽然用户和通行证是正确的（我已经用另一个 ftp 程序对其进行了测试）我得到了这个错误。

![Ecplise RSE 错误](../Images/0f105f74a79d1e378fb645bfb0f76a3f.png)

怎么了？我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:00:22.030

我相信这是 Eclipse 中的一个已知问题，与您正在运行的 JDK 版本有关。删除所有版本的 Java 并重新安装最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:57:26.363

我刚刚在这里发现运行 Java 6 可以“解决”这个问题。舒尔这不是我所需要的。[http://www.eclipse.org/forums/index.php/m/874556/](http://www.eclipse.org/forums/index.php/m/874556/)

我还尝试了另一种方法：使用网络磁盘，这样项目可能看起来是本地的。但是当使用来自网络磁盘驱动器的文件创建项目时，eclipse 崩溃了。似乎“获取”文件永远不会停止。

# php - 在一次尝试中使用更多查询的有效性？

> ID：14456865
> 
> 赞同：1
> 
> 时间：2013-01-22T10:51:57.587
> 
> 标签：php, try-catch

在一个 try-catch 块中使用例如两个查询是否有效？

```
try
{
   $query1 = prepare("SELECT * FROM tbl1...");
   $query2 = prepare("SELECT * FROM tbl2...");
   $query1 = execute();
   $query2 = execute();
}catch (PDOException $e)
{
   print "Error!: " . $e->getMessage();
   return false;
} 
```

或者，它应该是：

```
try
{
   $query1 = prepare("SELECT * FROM tbl1...");
   $query1 = execute();
}catch (PDOException $e)
{
   print "Error!: " . $e->getMessage();
   return false;
}

try
{
   $query2 = prepare("SELECT * FROM tbl2...");
   $query2 = execute();
}catch (PDOException $e)
{
   print "Error!: " . $e->getMessage();
   return false;
} 
```

如果这两种方法都被接受并在使用中，它们之间有什么区别吗？（速度？）因为我必须在索引中进行更多查询，但我不想全部分开

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:58:24.460

两者都是完全有效的。正如其他人所说，这一切都与用例有关。

我唯一要补充的是，您可能还想使用事务。这样，如果例如第二个查询失败，您就可以回滚。请注意，这也取决于用例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:53:47.530

两种方法都被接受，但第一种更具可读性。一个`try catch`用于同一组功能就足够了。

如果您的一个调用失败，它将停止 bloc 执行并直接转到`catch`，因此将所有调用都放在相同的`try`工作中。

我怀疑在第二种方式中，编译器可能会将两个`catch`s 中的代码识别为相同并将其优化为第一个，但应该尝试一下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T10:54:39.020

如果您根据哪个命令失败需要不同的行为，那么您需要将每个（对）命令包装在它们自己的`try/catch`块中。

如果您担心的只是*任何*一行发生的*一些*错误，那么您可以将所有命令包装在一起并以相同的方式处理所有异常。

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T11:08:25.933

我会说尽可能使用单个 try-catch 块。如果您的第二个查询取决于第一个查询的成功，那么如果第一个查询引发异常，则不会执行第二个查询。
在我看来，一系列的 try-catch 块并不构成可读性很强的代码。一个相当大的 try-catch 是可以的，只要你不去所有 pokemon 风格（必须全部抓住它们）......我的意思是在一个 try-block 中执行 5 个查询是可以的，但是当您正在处理同一块中每个查询的结果，您做得太过分了。

如果您想知道哪种方法最有效： -blocks 由抛出`catch`的类的实例触发。`Exception`catch 块内的代码预计会处理该错误，因此脚本不必完全失败，并且可以恢复正常服务。
如果您使用多个 try-catch 块，则该代码片段可能会引发多个`Exception`实例（`PDOException`在本例中）。然而*“小”*开销是，创建一个新实例不是免费的。如果在骑行结束时您仍想向用户展示成功查询的数据并显示未成功检索某些数据的通知，则需要多次尝试捕获，如果您想显示一切，或什么都没有，使用 1 个 try-catch 块，并使用 Exception 实例来计算失败的查询并向用户显示适当的错误消息（或者只是告诉他们这一切都出错了）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T10:54:25.950

你的道具是什么，这有点不同。如果一个查询是相互依赖的，那么它们应该在 try-catch 中。如果没有，如果您不需要对方的数据，并且如果您认为页面可以在没有第一次 try-catch 的信息的情况下继续运行，那么您可以继续查询。

至少我是这样认为的。*

# java - 为什么 java.awt.Polygon 只适用于整数？

> ID：14456866
> 
> 赞同：-1
> 
> 时间：2013-01-22T10:52:04.573
> 
> 标签：java, integer, awt, polygon, java-2d

我正在做一个项目，在该项目中我经常使用带有形状的 AWT 库。除 Polygon 外，大多数实现 Shape 的类都适用于 Double 和 Float。为什么？为什么以上帝的名义和恩典？！

我是否正确地说我可以使用 Path2D 和 Area 的方法实现相同的功能？

最重要的是，我想知道这一切的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:55:37.710

由于`Polygon`自 1.0 版以来一直是 API 的一部分，因此该`Shape`API 在 1.2 版中引入并`Polygon`进行了更新以满足 Shape API 的基本要求。

另外，看一下`Graphics`类，它支持`Polygon`但不支持`Shape`，引入到`Graphics2D`类中。

> 我是否正确地说我可以使用 Path2D 和 Area 的方法实现相同的功能？

我会说，是的。

# jquery - 加载内容后处理加载 jquery Ajax 选项卡

> ID：14456873
> 
> 赞同：1
> 
> 时间：2013-01-22T10:52:37.573
> 
> 标签：jquery, jquery-ui

我正在使用 Jquery AJAX 选项卡异步加载选项卡我只想在单击选项卡时加载一次选项卡，但是它会在每次单击时加载选项卡，这会导致回发，因此会重置用户的选择。如何防止标签重新加载？

```
 <div id="tabs">
            <ul>
                <li><a id="a" href="xyz.aspx">a</a> </li>
                <li><a id="b" href="abc.aspx">b</a> </li>
                <li><a id="c" href="">c</a> </li>
                <li><a id="d" href="">d</a> </li>
            </ul>
        </div>

 $(function () {
            $("#tabs").tabs({
                beforeLoad: function (event, ui) {
                    ui.jqXHR.error(function () {
                        ui.panel.html("");

                    });
                   // ui.ajaxSettings.async = false;               //does not work

                }
                //cache:true           // does not help
            });
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:10:14.660

我对 .tabs 不熟悉，但如果我理解你所说的，假设你有一组标签，你希望它们在被点击时只加载一次

```
 <div class="tabs" data-href="loaded" id="1">
        <ul>
            <li><a id="a" href="xyz.aspx">a</a> </li>
            <li><a id="b" href="abc.aspx">b</a> </li>
            <li><a id="c" href="">c</a> </li>
            <li><a id="d" href="">d</a> </li>
        </ul>
    </div>

   <div class="tabs" data-href="loaded" id="2">
        <ul>
            <li><a id="aa" href="xyz.aspx">a</a> </li>
            <li><a id="bb" href="abc.aspx">b</a> </li>
            <li><a id="cc" href="">c</a> </li>
            <li><a id="dd" href="">d</a> </li>
        </ul>
    </div>

   <div class="tabs" data-href="loaded" id="3">
        <ul>
            <li><a id="aaa" href="xyz.aspx">a</a> </li>
            <li><a id="bbb" href="abc.aspx">b</a> </li>
            <li><a id="ccc" href="">c</a> </li>
            <li><a id="ddd" href="">d</a> </li>
        </ul>
    </div> 
```

当文档准备好时分配单击事件处理程序，以便每当您单击选项卡时，都会验证和处理请求。

```
$(document).ready(function(){
   $('.tabs').click(function(){
     if($(this).attr('data-href') != 'loaded')
     {
        new tabRequest($(this).attr('id'));
     }
   })
}) 
```

这就是请求。（如果您想验证要加载服务器端的内容，我们会传递 id）

```
function tabRequest(id){

        var request = $.ajax({
          url: "/fetch_tabs.php",
          type: "POST",
          data: {
                'tabID': id,
                },
          dataType: "json"
        })

        request.done(function(msg)
        {
            $('#'+id).attr('data-href', loaded);
            $('#'+id).html('msg'); 
        })

        request.fail(function(jqXHR, textStatus) {
            console.log(textStatus);
            console.log(jqXHR);
        })

        request.complete(function(){
            console.log("Ajax request complete!");
        })

} 
```

希望这有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-27T12:00:48.737

```
$(function () {
$("#tabs").tabs({
    beforeLoad: function (event, ui) {
        if (ui.tab.data("loaded")) {
            event.preventDefault();
            return;
        }
        //ui.ajaxSettings.cache = false,
        ui.panel.html('<img src="images/loader.gif" width="24" height="24" style="vertical-align:middle;"> Loading...'),
        ui.jqXHR.success(function() {
            ui.tab.data( "loaded", true );
        }),
        ui.jqXHR.error(function () {
            ui.panel.html(
            "Please Reload Page or Try Again Later.");
        });
    }
}); 
```

});

# ruby - Nanoc 编译时间长

> ID：14456875
> 
> 赞同：2
> 
> 时间：2013-01-22T10:52:38.833
> 
> 标签：ruby, erb, nanoc

我正在使用[nanoc](https://github.com/ddfreyne/nanoc)为我的项目生成文档。我已经创建了几个文件（〜50）和布局，但目前我正在处理一个文件。奇怪的是，它在不到一秒的时间内编译了这个文件，而不是处理需要超过 20 秒的东西！

```
Loading site data…
Compiling site…
      update  [0.71s]  output/docs/js/getData/index.html

Site compiled in 22.96s. 
```

当我在之后中止该过程时：

```
 update  [0.71s]  output/docs/js/getData/index.html 
```

与 CTRL+C 一致，`nanoc view`我的文件编译得很好。你知道如何加快这个过程吗？nanoc 20 秒在做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T11:08:23.353

默认情况下，nanoc 仅显示创建、更新或删除的文件。重新编译但结果相同的文件将不会显示。如果您传递`--verbose`到`nanoc compile`，您将看到哪些文件已编译但相同。

因此，nanoc 似乎什么都不做的那 20 秒很可能是 nanoc 忙于重新编译但发现编译的文件相同的 20 秒，因此它们没有显示。

除非 nanoc 可以确定它们将保持相同，否则将重新编译项目。有时，nanoc 无法确定重新编译时文件是否相同，因此在这种情况下，无论如何都会重新编译该项目。

编译一个有 50 页的网站需要 23 秒，但速度似乎很慢。它有助于选择快速过滤器（例如，RDiscount 用于 Markdown，pygments.rb 用于语法着色）。如果可以，请运行`nanoc`Ruby 分析器（例如[perftools.rb](https://github.com/tmm1/perftools.rb)）以找出缓慢的来源。

# iphone - 通过外观代理自定义 UITabbar 与直接设置属性（差异，优势......）

> ID：14456876
> 
> 赞同：0
> 
> 时间：2013-01-22T10:52:40.057
> 
> 标签：iphone, ios, uitabbar, uiappearance

自定义时，`UITabBar`我有两种方法可以做到这一点，**但**我很好奇什么是最好的方法，两种方法都有哪些优点和缺点？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        UITabBarController *tbc = (UITabBarController *)self.window.rootViewController;

        UITabBar *tb = tbc.tabBar;

        // 1\. Customizing UITabBar using appearance proxy:
        [[UITabBar appearance] setBackgroundImage:[UIImage imageNamed:@"tabbar.png"]];
        [[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@"tabbar_selected.png"]];

        // 2\. Doing the same by setting the properties directly:
        // tb.backgroundImage = [UIImage imageNamed:@"tabbar.png"];
        // tb.selectionIndicatorImage = [UIImage imageNamed:@"tabbar_selected.png"];

        return YES;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:02:51.787

外观代理的优点是您可以随时更改任何控制器的外观，甚至可以利用它节省一些重绘调用。

**您对代理对象所做的任何更改都会在视图布局时应用到存在或随后创建的类的所有实例。但是，您仍然可以稍后使用给定实例的方法和属性覆盖代理默认值。**

要使用属性访问，您需要该控制器的对象，然后您可以访问它。您也可以查看此[文档](http://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Articles/iOS5.html)

# iphone - '支持的方向与应用程序没有共同的方向，并且 shouldAutorotate 返回 YES'

> ID：14456879
> 
> 赞同：16
> 
> 时间：2013-01-22T10:52:44.730
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, ios6

**我的视图处于景观模式，我正在保存图像，我想要返回该图像，因为我的代码在下面，我收到错误“由于未捕获的异常‘UIApplicationInvalidInterfaceOrientation’而终止应用程序，原因：‘支持的方向没有共同的方向使用应用程序，并且 shouldAutorotate 返回 YES'" **我可以为 iphone 做什么？

```
 `- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {

         [self dismissModalViewControllerAnimated:YES];
         [picker release];

              }
             - (void)imagePickerController:(UIImagePickerController *)picker 

                didFinishPickingMediaWithInfo:(NSDictionary *)info {

            [picker dismissModalViewControllerAnimated:NO];

                imageDoodle.image = [info objectForKey:@"UIImagePickerControllerMediaMetadata"];

                 }

               -(IBAction)loadfromalbumclicked:(id)sender

                 {

                UIImagePickerController * picker = [[UIImagePickerController alloc] init];

                picker.delegate = self;

                 picker.allowsEditing=NO;

        picker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;

               // self.modalTransitionStyle=UIModalTransitionStyleFlipHorizontal;

              [self presentModalViewController:picker animated:YES];
               }

              -(IBAction)savePrint{
//Save image to iOS Photo Library

                 UIImageWriteToSavedPhotosAlbum(imageDoodle.image, nil, nil, nil);
//Create message to explain image is saved to Photos app library
                 UIAlertView *savedAlert = [[UIAlertView alloc] initWithTitle:@"Saved"  

                message:@"Your picture has been saved to the photo library, view it in the 

               Photos app." delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
//Display message alert
             [savedAlert show];
              }` 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-22T11:33:22.837

尝试将 shouldAutoRotate 设置为 NO 并查看它是否有效。

您可以在 iOS 6.0 或更高版本中使用 shouldAutoRotate 和 supportedInterfaceOrientations 方法，而不是（不推荐使用的） shouldAutoRotateToInterfaceOrientation 方法。

像这样的东西-

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
}

- (BOOL) shouldAutorotate {
    return YES;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T11:00:46.957

您仅支持有限的方向，无论是横向还是纵向。但是您在视图控制器中调用了不同的方向。

您可以看到支持方向的下图。它只支持横向和横向。所以如果我调用纵向它会像你一样显示错误。因此，如果您想同时支持这两种方向，请在摘要中进行更改。

![在此处输入图像描述](../Images/73af3ccea337fa65193ee01c536da97b.png)

[有关更多详细信息，请参阅此答案。](https://stackoverflow.com/questions/12540597/supported-orientations-has-no-common-orientation-with-the-application-and-shoul) 希望能帮助到你。

**编辑**

所以你必须把这段代码放在你的视图控制器中

```
 - (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
  return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft |   UIInterfaceOrientationMaskLandscapeRight;
 } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-12T10:14:03.537

如果 plist 中支持的接口方向与返回的接口方向不匹配，则会引发此错误`-(NSUInteger)supportedInterfaceOrientations`

请记住，`NSUInteger`返回的`supportedInterfaceOrientations`必须是 UIInterfaceOrientationMask，请注意 -MASK-，我曾经犯过简单地返回 UIInterfaceOrientation iso 的错误 ...Mask 值（这对你来说是自动完成的）

例如

```
- (NSUInteger) supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
    // and NOT UIInterfaceOrientationPortrait;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-25T10:22:57.970

**注意**：如果您使用`UIImagePickerController`or`UIPopoverController`并且发生这些`error`情况，那么以下这些解决方案非常好。

这些错误也`iOS 6.0`只出现

创建一个新的`UIImagePickerController's` `category`并`add`

```
@implementation UIImagePickerController(custom)

  -(BOOL)shouldAutorotate
  {
    return NO;
  }
@end 
```

这对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-26T09:31:01.717

如果你使用的是 cocos2d v2.1，你可以试试这个 for Portrait。

```
 -(NSUInteger)supportedInterfaceOrientations {

    // iPhone only
    if( [[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone )
        return UIInterfaceOrientationMaskPortrait;

    // iPad only
    return UIInterfaceOrientationMaskPortrait;
}

// Supported orientations. Customize it for your own needs
// Only valid on iOS 4 / 5\. NOT VALID for iOS 6.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // iPhone only
    if( [[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone )
        return UIInterfaceOrientationIsPortrait(interfaceOrientation);
    // iPad only
    // iPhone only
    return UIInterfaceOrientationIsPortrait(interfaceOrientation);
} 
```

**支持**的 方向和**自动旋转方向**应该**相同**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-16T15:04:10.660

我有同样的错误，它可能是以下一个或多个返回冲突方向：

*   检查您的 -Info.plist，以获取关键的“支持的界面方向”
*   通过在项目导航器中单击您的应用程序来检查您的摘要窗格。
*   正如其他人所提到的，检查supportedInterfaceOrientations 方法返回的内容。

我通过在 -Info.plist 中明确定义单独的“支持的界面方向（iPad）”和“支持的界面方向（iPhone）”键来解决我的问题，因为我想要不同设备的不同方向。

祝你好运！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-23T07:05:37.083

对于 iOS 6.0，如果你的应用只支持横向模式，当你弹出 UIImagePickerController 时，它会崩溃。

我的解决方案是将以下类别添加到 UIImagePickerController：

```
@interface UIImagePickerController (oritation)

@end

@implementation UIImagePickerController (oritation)

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
}

@end 
```

# c# - 实体框架 4 / Devart - ORA-00904：无效标识符

> ID：14456883
> 
> 赞同：1
> 
> 时间：2013-01-22T10:53:01.683
> 
> 标签：c#, oracle, .net-4.0, entity-framework-4, devart

我们的 Intranet 站点在夜间停止工作。对错误日志的简短查看向我展示了

```
EntityCommandExecutionException - An error occurred while executing the command 
```

除了内部异常

```
Devart.Data.Oracle.OracleException - {"ORA-00904: \"MONTH\": invalid identifier"} 
```

在使用 LINQ 进行选择期间发生异常。where 语句只是将`DateTime`'`Month`和`Year`与某个整数进行比较。

oracle 表本身只有 4 列 ( `number:id PRIMARY KEY, varchar2:text, number:sum, date: creationdate`)。

我可以使用新的 devart 模型和 ADO.NET 实体模型以及针对同一数据库在本地重现问题。

环境：

*   Devart dotConnect for oracle 6.10.96.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:30:53.340

请检查您的 .NET Framework 版本。

从 7.2.77 版本开始，dotConnect for Oracle 支持 .NET v4.5：http: [//www.devart.com/dotconnect/oracle/revision_history.html](http://www.devart.com/dotconnect/oracle/revision_history.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-28T14:00:00.363

我在一个使用数据库优先和实体框架的项目中遇到了类似的问题。我发现模型文件的属性与数据库表字段不同。当该领域变得相似时，它可以毫无问题地工作。请检查“MONTH”所在的模型和数据库表是否相似。我希望它有所帮助。

# java - 河内塔在java中的回归

> ID：14456884
> 
> 赞同：0
> 
> 时间：2013-01-22T10:53:04.847
> 
> 标签：java, towers-of-hanoi

```
public static void solveTowers(int disks, int sourcePeg, int destinationPeg, int tempPeg)
{
    //always set the base case in any type of recursion programs
    if(disks == 1)
    {
        System.out.printf("\n%d --> %d", sourcePeg, destinationPeg);
        return;
    }

    //call the method itself
    solveTowers(disks - 1, sourcePeg, tempPeg, destinationPeg);

    System.out.printf("\n%d --> %d", sourcePeg, destinationPeg);

    solveTowers(disks - 1, tempPeg, destinationPeg, sourcePeg);
} 
```

我的问题是第一个 System.out 语句下的“返回”是什么？

调试时，第`solveTowers`一种方法到达基本情况后，即磁盘== 1，进入if语句，到达后`return;`，进入第二`System.out`条语句，然后是`second solveTowers`方法，所以问题是为什么`return;`跳过但`first solveTowers`不是第二个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:55:25.680

该`return`语句一旦到达就结束函数或方法的执行。

由于这个方法的返回类型是`void`，所以不需要返回值来结束函数，可以像这样简单地调用：`return;`

如果返回类型不同（例如整数），它必须返回一个像这样的整数：`return 1;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T10:55:38.397

这`return;`就是说，如果您只有一个磁盘，则无需执行任何操作，因此您只需结束方法的执行并返回它即可。这是必需的，因为该方法正在处理递归，您必须担心基本情况。

并且由于该方法的返回类型为 void，因此您不需要返回任何值。所以就`return;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:55:17.617

`return`是一个 Java 语句，它从当前方法返回，而不执行它后面的任何代码。

在您的情况下，代码会检查是否只有一个磁盘可用，如果是，它只会打印解决方案并阻止执行其余方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T10:56:30.310

当您只有 1 个磁盘时，它需要停止执行，这就是它输出源和目标并退出的原因。

# matlab - 在 Matlab 中使用每个样本 16 位（LSB，MSB）将音频信号写入文件

> ID：14456886
> 
> 赞同：0
> 
> 时间：2013-01-22T10:53:08.617
> 
> 标签：matlab, file-io, endianness

你能帮我用这样的参数生成音频信号吗：

*   采样率 = 8000 赫兹，
*   单核细胞增多症，
*   每个样本 16 位。

我需要在没有任何标题的情况下以带符号（LSB，MSB）的小端表示形式将样本写入文件。例如，如果样本的值为 32767（在此表示中它是最大值），那么它将被保存为 0xFF7F。

该信号应包含几个音调。我有这样一个生成音调的代码：

```
 frequency = 2000;
 duration = 2;
 amplitude = 1;
 sampleFreq = 8000;

t = linspace( 0, duration, duration * sampleFreq );
s = amplitude * sin( 2 * pi * frequency * t ) + amplitude * sin( 2 * pi * frequency/2 * t ) + amplitude * sin( 2 * pi * frequency*2 * t ); 
```

它创建具有 8000 Hz 采样率的矢量（单声道）。但我不知道如何使用 LSB、MSB 约定以 16 位编写样本。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:06:23.297

您可以使用[wavewrite](http://www.mathworks.com/help/matlab/ref/wavwrite.html)或[audiowrite](http://www.mathworks.com/help/matlab/ref/audiowrite.html)。 `wavwrite(s,filename)`将存储在变量`s`中的数据写入名为`filename`. `filename`输入是用单引号括起来的字符串。数据的采样率为 8000 Hz，假定为 16 位。[如果存在字节序问题，您可以使用swapbytes](http://www.mathworks.com/help/matlab/ref/swapbytes.html)
函数 将 big-endian 输出格式化为 little-endian（反之亦然），即`s = swapbytes(s)`

[您可以使用以下 SO 答案](https://stackoverflow.com/questions/5369762/how-to-remove-header-of-a-wavfile-in-matlab)删除标题

# jquery - mvc jquery 模型到控制器为空

> ID：14456887
> 
> 赞同：0
> 
> 时间：2013-01-22T10:53:11.353
> 
> 标签：jquery, asp.net-mvc

我正在使用带有 jquery 1.8.3 和 jquery-ui 1.9.2 的 asp.net mvc 4 VB.NET，正如标题所示：我对控制器的 jquery 回调给了我空模型。该函数确实被调用，但没有设置我的模型的属性。这是场景：我有一个无序列表，里面有几个 li。当我点击 li 时，我从 li 的隐藏字段中获取值。这个值是我试图传递的模型。在控制器中的操作中，我使用提供的模型设置部分视图并将其返回。然后我用返回的部分视图覆盖一个 div 以完成我的 jquery 脚本。

这是代码：

带有列表的 HTML div

```
<div class="listContainer">
            <ul>
                @For Each attachment As EPower.eSuite.Model.DTO.HRCore.Attachment In Model.Documents
                    @<li>
                        <input type="hidden" value="@attachment" class="test" />
                        <a href="#">
                            <span class="title">@attachment.Filename</span>
                            <span class="description">@attachment.Tag.ID</span>
                        </a>
                    </li>
                Next
            </ul>
        </div> 
```

jQuery函数：

```
$('.listContainer ul li').on('click', function () {
            var jsonModel = $(this).children('input.test').val();
            $.ajax({
                type: "POST",
                url: '@Url.Action("SetPersonalDocumentPartial", "WhoIsWho")',
                data: JSON.stringify(jsonModel),
                dataType: 'json',
                contentType: 'application/json',
                error: function (t) {
                    $('.personalDocumentContent').html(t.responseText);
                },
                success: function (result) {
                    $('.personalDocumentContent').html(result);
                }
            });
        }); 
```

MVC 控制器动作：

```
<HttpPost> _
        Public Function SetPersonalDocumentPartial(ByVal attachment As Model.DTO.HRCore.Attachment) As ActionResult
            Return PartialView("_ViewPersonalDocumentPartial", attachment)
        End Function 
```

当前工作的事情：我的函数成功调用了我的 MVC 操作，但未设置模型属性。将控制器中的模型设置为设定值时，我得到了部分返回，它成功地覆盖了我的 div。出于某种原因，它会出现错误。

我希望我们可以一起解决！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:55:30.570

该`.val()`方法返回一个字符串。当你`JSON.stringify`猜一个字符串时，你会得到什么？是的，你猜对了：一个字符串。例如：`JSON.stringify('foobar')`给你`'foobar'`. 并且发送`foobar`到您的控制器肌动蛋白根本对模型绑定器没有帮助。

如果您希望模型绑定器能够从请求中绑定模型，请确保您已包含要在请求中绑定的此模型的所有属性：

```
data: JSON.stringify({ filename: $(this).children('input.test').val() }) 
```

这将设置`FileName`您的`Model.DTO.HRCore.Attachment`. 如果您有其他属性，请确保也包括它们：

```
data: JSON.stringify({ 
    filename: $(this).children('input.test').val(),
    someOtherProperty: 'some other value'
}) 
```

# mysql - mysql表连接：多个连接到同一个表但具有不同的参数

> ID：14456894
> 
> 赞同：-1
> 
> 时间：2013-01-22T10:53:38.913
> 
> 标签：mysql, sql

我对我的 mysql 数据库有以下查询。

```
SELECT
  mn.id,
  mn.created_date,
  mn.created_by,
  mnt.description,
  u.handle,
  mn.admin_request_company_id
FROM member_notification mn,
  member_notification_type mnt,
  member m,
  user u
WHERE mn.member_notification_type_id = mnt.id
    AND mnt.name = 'COMPANYVALIDATION'
    AND mn.created_by = m.id
    AND m.user_id = u.id; 
```

这工作正常，但是我现在需要扩展它以从另一个表中获取公司名称。问题是，要做到这一点，我需要使用键 mn.admin_request_company_id 重新加入成员表，但是我不知道该怎么做。

我尝试创建一个成员 m2 表，但出现错误。我想要实现的是类似于以下伪代码的内容：

```
SELECT
  mn.id,
  mn.created_date,
  mn.created_by,
  mnt.description,
  u.handle,
  mn.admin_request_company_id,
  /*c.company_name*/
FROM member_notification mn,
  member_notification_type mnt,
  member m,
  /*member m2,*/
  /*company c,*/
  /*user u*/
WHERE mn.member_notification_type_id = mnt.id
    AND mnt.name = 'COMPANYVALIDATION'
    AND mn.created_by = m.id
    AND m.user_id = u.id
   /* AND mn.admin_request_company_id = m2.company_id
    AND m2.company_id = c.id*/ 
```

**编辑** 表结构如下：

```
CREATE TABLE member_notification (
id INT NOT NULL AUTO_INCREMENT,
item_id INT NULL,
member_id INT NULL,
text VARCHAR(1) NOT NULL,
member_notification_type_id INT NULL,
marked_read VARCHAR(1) NOT NULL,
created_date DATETIME NOT NULL,
created_by VARCHAR(50) NOT NULL,
admin_request_company_id INT NULL,
PRIMARY KEY (id)
) ENGINE=innodb;

CREATE TABLE member_notification_type (
id INT NOT NULL AUTO_INCREMENT,
name VARCHAR(20) NOT NULL,
description VARCHAR(50) NULL,
PRIMARY KEY (id)
) ENGINE=innodb;

CREATE TABLE member (
id INT NOT NULL AUTO_INCREMENT,
user_id INT NULL,
company_id INT NULL,
soft_delete VARCHAR(10) DEFAULT 'N',
member_status_id INT NOT NULL,
PRIMARY KEY (id)
) ENGINE=innodb;

CREATE TABLE user (
id INT NOT NULL AUTO_INCREMENT,
handle VARCHAR(50) NOT NULL,
first_name VARCHAR(50) NOT NULL,
last_name VARCHAR(50) NOT NULL,
date_of_birth VARCHAR(50) NULL,
soft_delete VARCHAR(10) DEFAULT 'N',
PRIMARY KEY (id)
) ENGINE=innodb;

CREATE TABLE company (
id INT NOT NULL AUTO_INCREMENT,
owning_company_id INT NULL,
company_type_id INT NULL,
name VARCHAR(50) NOT NULL,
company_details_id INT NULL,
PRIMARY KEY (id)
) ENGINE=innodb; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:04:47.720

似乎您只想使用以下内容，它只是向`member`表添加了第二个连接：

```
SELECT
  mn.id,
  mn.created_date,
  mn.created_by,
  mnt.description,
  u.handle,
  mn.admin_request_company_id,
  c.name
FROM member_notification mn
INNER JOIN member_notification_type mnt
  on mn.member_notification_type_id = mnt.id
INNER JOIN member m1
  on mn.created_by = m1.id
INNER JOIN user u
  on m1.user_id = u.id
INNER JOIN member m2
  on mn.admin_request_company_id = m2.company_id
INNER JOIN company c
  on m2.company_id = c.id
WHERE mnt.name = 'COMPANYVALIDATION' 
```

请注意，我将您当前在`WHERE`子句中的联接更改为 ANSI 联接语法。我还在`INNER JOIN`表格之间使用了一个，您可能需要使用一个`LEFT JOIN`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:00:36.457

要在一个表上连接两次，请使用不同的名称选择该表两次：

```
SELECT
  ...
FROM 
  member m1,
  member m2,
  someCouplingTable t
WHERE
  m1.Id = t.leftId
  AND m2.Id = t.rightId 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T11:08:25.767

这是你如何做到的

```
SELECT
  mn.id,
  mn.created_date,
  mn.created_by,
  mnt.description,
  u.handle,
  mn.admin_request_company_id
FROM member_notification mn
  left join member_notification_type mnt
    on mnt.id = mn.member_notification_type_id
  left join member m
    on m.id = mn.created_by
  left join user u
    on u.id = m.user_id
  left join company as c
    on c.id = m.company_id
where mnt.name = 'COMPANYVALIDATION' 
```

# windows-8 - 在 Windows rt(Windows 8) 应用程序中使用 CRM 组织 Web 服务 C# 检索机会

> ID：14456898
> 
> 赞同：-3
> 
> 时间：2013-01-22T10:53:53.567
> 
> 标签：windows-8, dynamics-crm-2011

我想创建一个 Windows 8 Metro 应用程序来检索和显示组织的所有机会实体。任何的想法 ？怎么做？

我已经为桌面应用程序实现了相同的功能，现在我想为 Windows 8 创建相同的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:38:24.517

是的，应该参考 CRM 服务器的组织服务，这将帮助您

按照链接描述的方式插入检索所有类型的实体

[http://msdn.microsoft.com/en-us/library/gg328416.aspx](http://msdn.microsoft.com/en-us/library/gg328416.aspx)

# java - 如何将 XML 文件输出到 Java 中的 REST Web 服务，以便另一个应用程序可以使用此 XML？

> ID：14456901
> 
> 赞同：3
> 
> 时间：2013-01-22T10:53:59.893
> 
> 标签：java, xml, rest, xstream

我需要将一个 XML 文件从一个应用程序输出到另一个应用程序，但我不想在某处写这个 XML，然后在另一个应用程序上读取这个文件。

两者都是 Java 应用程序，并且（到目前为止！）我正在使用 XStream。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T11:08:20.767

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)是[**Java API for RESTful Web Services (JAX-RS)**](http://jcp.org/en/jsr/detail?id=311)的默认绑定层。这意味着您可以只创建一个返回 POJO 的服务，并且将为您处理所有到/从 XML 转换。

下面是一个示例 JAX-RS 服务，它查找`Customer`使用 JPA 的实例并将其返回到 XML。JAX-RS 实现将利用 JAXB 自动进行实际转换。

```
package org.example;

import java.util.List;
import javax.ejb.*;
import javax.persistence.*;
import javax.ws.rs.*;
import javax.ws.rs.core.MediaType;

@Stateless
@LocalBean
@Path("/customers")
public class CustomerService {

    @PersistenceContext(unitName="CustomerService", 
                        type=PersistenceContextType.TRANSACTION)
    EntityManager entityManager;

    @GET
    @Produces(MediaType.APPLICATION_XML)
    @Path("{id}")
    public Customer read(@PathParam("id") long id) {
        return entityManager.find(Customer.class, id);
    }

} 
```

**完整示例**

*   [第 1 部分 - 数据库](http://bdoughan.blogspot.com/2010/08/creating-restful-web-service-part-15.html)
*   [第 2 部分 - JPA 实体](http://bdoughan.blogspot.com/2010/08/creating-restful-web-service-part-25.html)
*   [第 3 部分 - JAXB 绑定](http://bdoughan.blogspot.com/2010/08/creating-restful-web-service-part-35.html)
*   [第 4 部分 - RESTFul 服务](http://bdoughan.blogspot.com/2010/08/creating-restful-web-service-part-45.html)
*   [第 5 部分 - 客户](http://bdoughan.blogspot.com/2010/08/creating-restful-web-service-part-55.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T11:18:14.147

对于重负载的应用程序，另一种方法是使用 google **[ProtoBuf](http://code.google.com/p/protobuf/)**而不是 XML 格式 - 这可以让您最大限度地减少应用程序之间的流量并提高性能。从我的角度来看，用于数据传输的 XML 不是一个好主意。

# django - django 中的模型函数问题

> ID：14456905
> 
> 赞同：0
> 
> 时间：2013-01-22T10:54:06.403
> 
> 标签：django, function, django-models

我在 models.py 中创建了一个函数，它可以进行一些数学计算。我可以从其他任何地方（如视图或模板）访问此函数并向其提供一些输出，然后修改此函数的计算。

我们可以访问其他文件中的视图函数或其他函数，但我不知道模型函数。如果有任何方法我可以访问它们，那么请建议我一些方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:21:01.643

你当然可以：

```
from my_app import models

output = models.my_function('foo', 'bar') 
```

但是..你不觉得这是错的吗？从语义上讲，models.py 用于模型。如果你想要一个实用函数，你可以在你的项目中设置 utils.py 并从那里导入。否则，如果此函数与特定模型密切相关，则可以将其设为对象方法等

# php - 正则表达式验证，包括 HTML 编码字符

> ID：14456906
> 
> 赞同：0
> 
> 时间：2013-01-22T10:54:06.867
> 
> 标签：php, regex

我正在尝试验证一个字符串（PHP & Regex），我希望选项 A 成功验证，但选项 B 根本不验证：

```
a) fsadgfsd!^_-@<>&lt; 
            OR
   fsadgfsd!^_-@<>&gt;&lt;

b) fsadgfsd!^_-@<>&; 
          OR 
   fsadgfsd!^_-@<>;&&; 
```

到目前为止，我有这个：

```
/^[a-zA-Z0-9 \!\^\_\@\<\>-]+$/ 
```

除了 < 和 > 的 HTML 编码子字符串之外，这对我来说是验证一切，我在这个阶段碰到了一堵砖墙，非常感谢任何帮助。

基本上，除了匹配我的特殊字符的现有正则表达式之外，我还需要能够匹配 < 或 > 的确切子字符串，但不匹配 & 或 ; 自己的性格。

由于我正在使用的代码的限制，我无法在验证数据之前对其进行解码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:00:13.073

```
$regex = '/^[\w !\^@<>-]+$/';

$string = 'fsadgfsd!^_-@<>&gt;&lt;';
$string = html_entity_decode($string);
if (preg_match($regex, $string))
    echo 'ok';
// echo ok

$string = 'fsadgfsd!^_-@<>;&&;';
$string = html_entity_decode($string);
if (preg_match($regex, $string))
    echo 'ok';
// echo nothing 
```

\w 是 [a-zA-Z0-9_] 的快捷方式

编辑：没有 html_entity_decode

```
$regex = '/^([\w !\^@<>-]*(&[glt]+;)*)+$/';

$string = 'fsadgfsd!^_-@<>&gt;&lt;';
if (preg_match($regex, $string))
    echo 'ok';
// echo ok
echo '-------------';

$string = 'fsadgfsd!^_-@<>;&&;';
if (preg_match($regex, $string))
    echo 'ok';
// echo nothing 
```

# python - 为什么 Python 不能打印 Unicode 符号？

> ID：14456908
> 
> 赞同：8
> 
> 时间：2013-01-22T10:54:12.253
> 
> 标签：python, unicode, encoding

> **可能重复：**
> [Python UnicodeDecodeError - 我误解了编码吗？](https://stackoverflow.com/questions/368805/python-unicodedecodeerror-am-i-misunderstanding-encode)

我在 Python 中打印一些 unicode 符号时遇到问题，如下所示：

```
# encoding: utf-8
print u'ęėįųšįšū' 
```

当我尝试使用 Python 2.7 在我的 VPS Ubuntu 12 服务器上运行它时，我收到一个错误：

> UnicodeEncodeError：“ascii”编解码器无法对位置 0-7 中的字符进行编码：序数不在范围内（128）

为什么它会尝试用 ASCII 编码它们？

这些命令在我的本地机器上正确运行。

该文件以 utf-8 正确编码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T10:55:52.507

打印`unicode`对象需要 Python 猜测输出编码并将 Unicode 代码点编码为该编码。

在您的 VPS 服务器上，输出编码似乎是 ASCII，这是无法检测到编码时的默认值（例如使用管道时）。如果在终端上运行相同的代码，通常会检测到终端编码并且编码成功。

解决方案是根据您的脚本要求显式编码。

请务必阅读[Python Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)以了解 Python 如何进行此检测以及为什么需要为您编码。

# sql - SQL 语句，空值

> ID：14456911
> 
> 赞同：0
> 
> 时间：2013-01-22T10:54:12.970
> 
> 标签：sql

我需要一些关于 SQL 语句的帮助，此时以下 SQL 语句有效，但**我想添加 if `closing_balance`is null 将值设置为 0.00**。

是否可以将此添加到以下语句中：

```
SqlCommand scGetPostings = new SqlCommand(@"
    SELECT 
      D1.dr, 
      D1.cr, 
      D1.asset_no, 
      (open_bal + dr - cr) AS closing_balance 
    FROM (SELECT 
            COALESCE(SUM(dr_amount), 0) AS dr, 
            COALESCE(SUM(cr_amount), 0) AS cr, 
            asset_no 
          FROM posting, sysasset 
          WHERE posting.asset_no = @AssetNumber 
            AND period >= asset_open_per 
          GROUP BY asset_no) AS D1, asset 
    WHERE D1.asset_no = asset.asset_no", DataAccess.AssetConnection); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:56:48.430

您应该对语句使用[ISNULL函数：](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

```
ISNULL(open_bal + dr - cr, 0.0) as closing_balance 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:05:26.820

```
(ISNULL(open_bal, 0.0) + ISNULL(dr, 0.0) - ISNULL(cr, 0.0)) as closing_balance 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T11:15:37.710

尝试 ：

```
nvl(open_bal + dr - cr, 0.0) as closing_balance 
```

[sql_isnull](http://www.w3schools.com/sql/sql_isnull.asp)

# asp.net-mvc-4 - 我应该将扩展方法放在 ASP.Net MVC 中的哪个文件夹中？

> ID：14456912
> 
> 赞同：24
> 
> 时间：2013-01-22T10:54:14.480
> 
> 标签：asp.net-mvc-4, extension-methods

正如标题所说，我应该将扩展方法放在 ASP.Net MVC 中的哪个文件夹中？

对此的最佳做法是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-22T12:58:38.887

我不相信有一个标准的最佳实践可以遵循，但我通常会做以下两件事之一：

*   对于较小的项目，我将简单地创建一个“扩展”文件夹，并将各种扩展类添加到那里。
*   对于更大的解决方案，我将有一个名为*ProjectName.Extensions*之类的单独项目，并且在该项目中，我将有一个文件夹结构来反映我正在扩展的类的名称空间。例如：

`ProjectName.Extensions/System/StringExtensions.cs` `ProjectName.Extensions/System.Web/HttpContextExtensions.cs` `ProjectName.Extensions/System.Xml/XmlWriterExtensions.cs`

等等...

无论我采用哪种方法，在这两种情况下，我都会为类命名`ClassNameExtensions.cs`（例如，StringExtensions.cs、ListExtensions.cs 等）。

# windows-phone-7 - Windows phone 7 和 Windows phone 8 应用程序的应用程序 ID

> ID：14456914
> 
> 赞同：1
> 
> 时间：2013-01-22T10:54:23.470
> 
> 标签：windows-phone-7, windows-phone-8

相同但适用于不同设备（Windows phone 7 和 Windows phone 8）的应用程序是否应该在 WMAppManifest.xml ProductID 字段中具有相同的 GUID 号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T11:20:52.143

当您将应用程序提交到市场时，应用程序 Guid 编号将更改，如果您在同一应用程序中针对不同操作系统版本提交两个 xap，则应用程序 guid 将相同。

# templates - 带有 foreach 的 knockout.js 可重用模板

> ID：14456918
> 
> 赞同：0
> 
> 时间：2013-01-22T10:54:44.527
> 
> 标签：templates, foreach, knockout.js

我有这个模板

```
<!--ko template: { name: 'multiCheckBtn', data: { elems: posGenders, compareWith: gender, switch: switchCheckBtn} }-->
<!--/ko-->

<script id="multiCheckBtn" type="text/html">
  <span class="fakeCheck" data-bind="foreach: { data: $data.elems, as: 't' } ">
    // here $data becomes alias to t and I don't how to access other params, like $data.switch
    <span class="btn" data-bind="text: t, css: { selected: t == $data.compareWith() }, click: $data.switch } "></span>
  </span>
</script> 
```

我想要的是在里面`foreach`访问`compareWith`和`switch`传递给模板的变量，但我只能在之前访问它们`foreach`。内部循环`$data`变量成为别名`t`，我无法访问其他变量。

有没有办法可以将数据传递给`foreach`循环，以便我可以像尝试访问一样访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:05:45.840

您可以使用`$parent`对象访问它们：

```
<script id="multiCheckBtn" type="text/html">
  <span class="fakeCheck" data-bind="foreach: { data: $data.elems, as: 't' } ">
    <span class="btn" data-bind="text: t, css: { selected: t == $parent.compareWith() }, click: $parent.switch } "></span>
  </span>
</script> 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/nVsgK/](http://jsfiddle.net/vyshniakov/nVsgK/)

# php - jQuery.post() 与 PHP 交互

> ID：14456921
> 
> 赞同：0
> 
> 时间：2013-01-22T10:54:52.573
> 
> 标签：php, jquery, post

我对 jQuery 和 PHP 有疑问……所以这是我的 jQuery 代码：

```
var rino = "Renaro";
$(document).ready(function() {
    $.post('form.php', { test: rino } );
}); 
```

这里是 PHP

```
echo $_POST['test']; 
```

从文档中我了解到，在 jQuery 之后应该`rino`为 `$_POST['test']`.. 赋值，但它不会回显的值 .. 并给出 PHP 错误`PHP Notice: Undefined index: test`

我究竟做错了什么？

这是文件的完整代码

```
<html>
<head>
    <script type="text/javascript" src="jquery.js" ></script>
    <script type="text/javascript">
        var rino = "Renaro";
        $(document).ready(function() {
            $.post('form.php', { "test" : "rino" } );
        });
    </script>
</head>
<body>

<div id="content">
    <?php echo $_POST['test']; ?>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:02:52.020

我理解你的意思吗？

是否在一个文件中执行 jQuery 并`form.php`在另一个浏览器选项卡中调用？

那么问题应该是：

jQuery 将发布到`form.php`变量`echo`的内容`test`（但没有人查看它，因为它不安全）。您可以通过将结果返回给 jQuery 或将其保存到文件来更好地测试这一点。

但是当您打开`form.php`时，不会看到此结果，因为您的调用不是由 jQuery 完成的调用，因此没有为`test`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:56:07.813

试试这个

php

```
<?php if(isset($_POST['test']){echo $_POST['test']; }?>  // check if there post then echo 
```

**jQuery**

```
<script type="text/javascript">
    var rino = "Renaro";
    $(document).ready(function() {
        $.post('form.php', { test : rino } );
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T11:09:13.283

在您的 html 中创建一个带有“虚拟”类的 div 并尝试：

```
var rino="Renaro";
callme(rino);
function callme(rino){
    $.ajax({
        type: 'POST',
        data: {test: rino},
        url: 'form.php',
        success: function(str){
            $('.dummy').html(str);  
        },
        error: function(){
            $('.dummy').html("Nope, nothing here");
        }
    });
} 
```

编辑：但不在同一页面中！带有 JS 和 HTML 的页面应该不同于带有 PHP 和 $_POST 的页面...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T11:11:24.347

如果您将代码更改为此，那应该可以。

请注意，我删除了引号，`rino`因为它是一个变量。

```
<html>
<head>
    <script type="text/javascript" src="jquery.js" ></script>
    <script type="text/javascript">
        $(document).ready(function() {
            var rino = "Renaro";
            $.post('form.php', { "test" : rino }, function(data) {
                $('#content').html(data);
             }); 
        });
    </script>
</head>
<body>

<div id="content">

</div>
</body>
</html> 
```

# .net - 通过 COM 的 Assembly.GetTypes 在 System.Data.Entity 上需要很长时间

> ID：14456922
> 
> 赞同：0
> 
> 时间：2013-01-22T10:54:53.810
> 
> 标签：.net, performance, entity-framework, reflection, com

我在定位从某种类型派生的类型的方法时遇到性能问题。它使用反射来获取当前加载的所有程序集 ( `AppDomain.CurrentDomain.GetAssemblies()`)，然后遍历每个程序集 ( `Assembly.GetTypes()`) 中的所有类型以查找匹配项。它在一个单独的 DLL 中实现，可以在 .NET 应用程序中使用，但它也是 COM 可见的，并且可以从 VB6 应用程序调用。

这种方法效果很好，在很多情况下也表现不错。我的问题是，在某些情况下，对程序集 System.Data.Entity 的 GetTypes 调用需要很长时间，超过 5 秒。以下是主要观察结果：

*   GetTypes 调用需要这么长时间的始终是 System.Data.Entity，而不是另一个程序集。可能有 50 个其他已加载程序集的 GetTypes 调用，但它们都立即完成。
*   如果从 .NET 应用程序（例如 .NET 控制台应用程序）中调用该方法，则永远不会出现此性能问题。GetTypes 调用总是立即完成。
*   如果从通过 COM 使用我的 DLL 的 VB6 应用程序中调用该方法，则问题经常发生，但并非总是如此。我还不知道，是什么导致 5+ 秒的时间延迟有时会发生，有时不会发生。

我已经用最少的测试应用成功地验证了上述观察结果，所以没有什么比我刚才提到的更重要了。

我对可能导致此问题的原因一无所知。有人有想法吗？

问候，彼得。

# c - 在没有文件的情况下链接 gcc 中的共享库？

> ID：14456923
> 
> 赞同：2
> 
> 时间：2013-01-22T10:54:55.967
> 
> 标签：c, gcc, linker

假设`x.so`我的目标系统上有一个库，而我的开发系统上没有。

我需要使用 gcc 在我的开发机器上编译一个程序，该程序使用`x.so`.

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:03:47.970

是的。您根本不链接该库，而是使用 dlopen() 打开它：

```
void* dlhandle = dlopen("x.so", RTLD_LAZY); 
```

并使用 dlsym() 从中加载符号：

```
some_func_pointer = dlsym(dlhandle, "function"); 
```

然后，您可以通过从 dlsym() 获得的函数指针调用 function()。函数指针的类型当然必须与您正在加载的函数相匹配。它没有为您检查。

# linux - Zabbix cpu 使用情况未正确报告

> ID：14456924
> 
> 赞同：0
> 
> 时间：2013-01-22T10:55:01.763
> 
> 标签：linux, zabbix

我很确定这是某个地方的配置错误，但我无法弄清楚。我正在监控的机器的 cpu 屏幕显示 CPU 系统时间约为 4-5%，cpu nice time 约为 20%。顶部显示我正在监视的机器的 cpu% 为 39-40%。为什么 Zabbix 不能正确显示结果？

我对 zabbix 不是很熟悉，但我知道我以前见过它显示机器的正确统计信息..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:19:16.043

这里有几个问题可能与您的数字有关。首先，您是查看每个内核的 CPU 使用率还是所有内核的平均值，甚至总计。对于某些操作系统（例如 FreeBSD），top 将显示*总*CPU 使用率。如果您有 8 个内核，则 CPU 使用率可能高达 800%！

在 Linux 上，您可以通过在顶部按“1”来显示每个内核的 CPU 使用率。

接下来，您需要考虑 CPU 使用率的真正含义。这根本不是一个简单的概念，因为 CPU 使用率在某一时刻并不是一个有意义的概念。相反，它是对特定时间段（例如最后一秒）的使用量的度量。并且运行 top 本身会改变测量，因为测量 CPU 使用率可能会占用相当多的 CPU 本身。

出于这个原因，在顶部输出的开头找到了另一个 CPU 负载测量：

```
 load average: 1.35, 1.27, 0.72 
```

这是一篇[有用的文章](http://www.linuxjournal.com/article/9001)，讨论了如何解释负载值。

# c# - DataContext 未随 DataTemplate 中的命令绑定一起发布

> ID：14456926
> 
> 赞同：0
> 
> 时间：2013-01-22T10:55:03.310
> 
> 标签：c#, xaml, memory, memory-leaks, windows-store-apps

我在 GridView 的项目模板中有一个按钮，当单击该按钮时，该按钮使用命令绑定调用 ViewModel 上的方法。ViewModel 永远不会被释放。模板：

```
<DataTemplate x:Key="ItemTemplate">

        <Button HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,0,0,0"
                                             Command="{Binding ElementName=LayoutRoot, Path=DataContext.NavigateToOtherPageCommand}"/>

</DataTemplate> 
```

如果我删除了 Command 属性，或者如果我在 ViewModel 中注释掉公共属性（即从不设置 BTW）：

```
// public ICommand NavigateToOtherPageCommand { get; private set; } 
```

没有泄漏。任何帮助，将不胜感激！

**编辑：**

我想出的一个解决方案是建立一个广播系统。我的 ViewModel 将在 OnNavigatedTo 中注册这个单例（并在 OnNavigatedFrom 中取消注册）。Command 绑定现在将通过项目的上下文。我会在项目中放置一个 ICommand 属性，该属性在触发时会将自身传递给广播系统。然后广播系统会将消息传递给 ViewModel。感觉有点hacky，但我认为它会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:12:48.943

您不能从数据模板中按名称绑定到元素。尝试绑定到应用程序范围的资源（单音/定位器模式）或使用 {RelativeSource Mode=TemplatedParent}。

# c# - 在 Visual C# 2008 中引用 Infragistics 程序集

> ID：14456935
> 
> 赞同：0
> 
> 时间：2013-01-22T10:55:23.507
> 
> 标签：c#, assemblies, infragistics

我正在使用 Visual Studio 2008 并尝试将*NetAdvantage 10.2 Win CLR2x* Toolbox 函数用于表单（UltraButton、UltraLabel 等）。但是，当我尝试编译代码时，出现以下错误：

> *“Infragistics.Shared.IUltraLicensedComponent”类型在未引用的程序集中定义。您必须添加对程序集“Infragistics2.Shared.v10.2, Version=10.2.20102.2035, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb”的引用。
> C:\Users\Mike\Documents\Visual Studio 2008\Projects\InfragisticsTest\InfragisticsTest\Form1.Designer.cs
> 
> 'Infragistics.Win.IImageListProvider' 类型在未引用的程序集中定义。您必须添加对程序集“Infragistics2.Win.v10.2, Version=10.2.20102.2035, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb”的引用。C:\Users\Mike\Documents\Visual Studio 2008\Projects\InfragisticsTest\InfragisticsTest\Form1.Designer.cs
> 
> 'Infragistics.Win.UltraControlBase' 类型在未引用的程序集中定义。您必须添加对程序集“Infragistics2.Win.v10.2, Version=10.2.20102.2035, Culture=neutral, PublicKeyToken=7dd5c3163f2cd0cb”的引用。C:\Users\Mike\Documents\Visual Studio 2008\Projects\InfragisticsTest\InfragisticsTest\Form1.Designer.cs*

我相信这可能是由于安装了 Visual Studio 2012，然后恢复到 2008 造成的。但我不确定如何解决这个问题。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:14:54.330

错误消息指向您当前项目的引用中的某种问题。
这通常意味着 Visual Studio IDE 无法解析引用列表中的一项或多项，因为引用的程序集中存在不兼容性或其他细微变化。

根据经验，您应该在 中展开项目节点`Solution Explorer`，然后展开`References`节点并检查是否有错误，删除错误的引用并重新添加正确的引用，右键单击“引用”项并通过 GAC 搜索它们或系统中的某些路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:59:22.260

我以前使用过 Infragistics 产品，我的经验是它们严重依赖安装程序。我曾经遇到的所有问题都通过完全卸载 Infragistics 产品并重新安装来解决。

# mysql - MySQL：如何过滤格式为 2011-11-29 19:30:00 的日期并提取月份

> ID：14456939
> 
> 赞同：-1
> 
> 时间：2013-01-22T10:55:35.603
> 
> 标签：mysql, sql, date, datetime

我正在尝试`extract`使用MySQL`month`从日期字符串开始。`2011-11-29 19:30:00`

我试过`EXTRACT(MONTH FROM date) as d`无济于事，也`STR_TO_DATE(EXTRACT(MONTH FROM date), '%Y-%m-%d') AS d`没有喜悦。

任何人都可以从这样的字符串中建议正确`extract`的月份方法`group`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:02:20.580

您可以使用

```
 select DATE_FORMAT('2011-11-29 19:30:00', '%c'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:03:18.657

```
EXTRACT(MONTH FROM STR_TO_DATE(date_ordered, '%Y-%m-%d')) as month 
```

似乎运作良好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:59:16.660

`SUBSTRING(date_string,6,2)`?

X

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T11:03:41.020

您可以从日期时间字段中获取日期，如下所示

```
DATE_FORMAT( date , '%d' ) AS d 
```

# django - django 错误邮件：html 格式为 debug = ture

> ID：14456944
> 
> 赞同：0
> 
> 时间：2013-01-22T10:55:39.240
> 
> 标签：django, email, error-handling

在 django 中是否有一种简单的方法来发送 html 格式的错误消息，就像它们在 debug = True 时显示在浏览器中一样？

我想在错误邮件中为每个回溯提供本地变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:17:01.380

看看[哨兵](https://github.com/dcramer/django-sentry)。它会比调试电子邮件做得更好

```
sudo easy_install sentry 
```

PS。我更喜欢使用 django-sentry，这是一个仅适用于 Django 的旧版本，因为我更习惯它：

```
sudo easy_install raven==0.7
sudo easy_install django-sentry 
```

# jsf - JSF 2.1 - 获取 FacesContext 策略

> ID：14456951
> 
> 赞同：2
> 
> 时间：2013-01-22T10:55:50.157
> 
> 标签：jsf, managed-bean, facescontext

我正在开发我的 MVC 控制器是 JSF 2.1 的 webapp。我有几种基于

> FacesContext.getCurrentInstance()

我用这个来

*   从 Flash 范围放置/检索值
*   在视图中添加消息
*   获取请求参数映射

例子：

```
public void addInfoMessage(String title, String description){
    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,title, description));
} 
```

和

```
public void putFlashMessage(String code, String value){
    FacesContext.getCurrentInstance().getExternalContext().getFlash().put(code, value);
} 
```

等等

我只是想知道如果我在每个托管 bean 上都使用这个方法，那么在哪里放置这些方法的合适位置？我考虑两种选择：

a）创建类“JSFUtils”，其中所有方法都是公共的和静态的

b) 创建没有声明范围和声明@ManagedBean 注释的超类“ManagedBean”，但使用这些公共方法。每个托管 bean 都应该是这些类的子类，因此它将继承这些方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T11:58:13.113

实用程序类是推荐的方法。您可以使用现有的 JSF 实用程序库（例如[OmniFaces](http://omnifaces.org)），[`Faces`](http://showcase.omnifaces.org/utils/Faces)而不是重新发明自己的[`Messages`](http://showcase.omnifaces.org/utils/Messages)实用程序类。

```
String foo = Faces.getRequestParameter("foo");
Messages.create(summary).detail(detail).add();
Messages.addGlobalInfo(summary); // Without detail.
Faces.setFlashAttribute(key, value); 
```

您确实也*可以*将其抽象为“超级 bean”，但这是不可重用的，并且您会在每个 JSF 项目中不断重复自己。此外，一个类只能从一个类扩展。因此，如果您的 bean 碰巧需要从另一个超类扩展，那么您就迷路了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:16:05.340

我会为此目的推荐一个实用程序类，因为您允许灵活地扩展其他有用的类，例如那些具有一些您希望在其他 bean 之间共享的公共逻辑的类。

话虽如此，一个 JSFUtils 类可能会随着时间的推移而变得非常混乱，其中包含许多方法，并且可能变得非常难以管理。最好对 util 方法进行分类并将它们放在单独的静态实用程序类中。

# android - httpget 不适用于查询字符串

> ID：14456958
> 
> 赞同：1
> 
> 时间：2013-01-22T10:56:07.723
> 
> 标签：android, http-get

我正在努力通过查询字符串获取数据。我已经完成了 httppost 但我不想使用 httpget 。但我做不到。

```
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("key", "android developer"));

            String k = "android developer";
             URI uri = new URI("http://10.0.2.2:8080/r/r.php");

             HttpClient httpclient = new DefaultHttpClient();
             HttpGet httpget = new HttpGet(uri);
             //httpget.setEntity(new UrlEncodedFormEntity(nameValuePairs));
             HttpResponse response = httpclient.execute(httpget);
             HttpEntity entity = response.getEntity();
             is = entity.getContent(); 
```

请专家帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T11:27:42.940

您可以通过 2 种方式做到这一点：

*使用 URI 构建器：*

```
new Uri.Builder()
    .scheme("http")
    .authority("foo.com")
    .path("someservlet")
    .appendQueryParameter("param1", foo)
    .appendQueryParameter("param2", bar)
    .build(); 
```

*自己创建 url 字符串：*

```
String paramString = URLEncodedUtils.format(nameValuePairs, "utf-8");
uri = new Uri("http://10.0.2.2:8080/r/r.php?" + paramString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:08:37.017

您可以尝试以下 HTTP 获取

```
public String[] doHttpGetWithCode(String url, HashMap<String, String> headerParam) throws Exception {
    String[] result = new String[2];
    HttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet(url);     
    httpget.addHeader("language", Constants.DEVICE_LANGUAGE);       
    Iterator myIterator = headerParam.keySet().iterator();
    while(myIterator.hasNext()) {
        String key=(String)myIterator.next();
        String value=(String)headerParam.get(key);        
        httpget.addHeader(key, value);
    }       
    HttpResponse response;
    response = httpclient.execute(httpget);
    HttpEntity entity = response.getEntity();
    InputStream is = entity.getContent();
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();
    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    result[0] = response.getStatusLine().getStatusCode()+"";
    result[1] = sb.toString();
    return result;
} 
```

并在 URL 中创建一个字符串构建器并将其添加到 Snippet 所遵循的 HTTPGet 方法

```
url = new StringBuilder();          
    url.append(Constants.WEB_SERVICE_URL_PREFIX)
        .append("resources/register?")
        .append("device_id=")           .append(Constants.DEVICE_ID)
        .append("&device_serial=")      .append(Constants.DEVICE_SERIAL)
        .append("&nickname=")           .append(nickname.getText().toString())
        .append("&email=")              .append(email.getText().toString())
        .append("&password=")           .append(pass.getText().toString());
response = Network.getInstance().dohttpPostWithCode(url.toString()); 
```

响应是字符串类型

# xslt - XSLT for-each-group - 选择中的虚假节点

> ID：14456960
> 
> 赞同：0
> 
> 时间：2013-01-22T10:56:12.300
> 
> 标签：xslt, foreach

我在 XSLT 方面缺乏经验，需要帮助解决我用于 XML 转换解决方案的 for-each-group 循环中的一个奇怪错误。这是 XSLT：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="trans-unit/target[mrk[following-sibling::text()]]">
    <xsl:copy>
      <xsl:copy-of select="./@*"/>
      <xsl:for-each-group select="node()" group-starting-with="mrk">
        <mrk>
          <xsl:for-each select="current-group()">
            <xsl:choose>
              <xsl:when test="name() = 'mrk' and position() = 1">
                <xsl:copy-of select="./@*"/>
              </xsl:when>
              <xsl:when test="name() != 'mrk'">
                <xsl:copy>
                  <xsl:copy-of select="@* | node()"/>
                </xsl:copy> 
              </xsl:when>         
            </xsl:choose>
          </xsl:for-each>
        </mrk>
      </xsl:for-each-group>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

`mrk`基本思想是将父节点内的空节点后的兄弟`target`节点移回`mrk`节点内。使用以下简化的示例输入：

```
<body>
  <trans-unit id="3" phase-name="pretrans" restype="x-p">
      <source>You can add descriptive text notes to a call recording, if you have the appropriate privileges to do so. These notes are visible to all users who have access to the call recording. It is recommended that each user add their initials to the notes to avoid potential confusion.</source>
      <seg-source>
          <mrk mtype="seg" mid="1">You can add descriptive text notes to a call recording, if you have the appropriate privileges to do so.</mrk>
          <mrk mtype="seg" mid="2">These notes are visible to all users who have access to the call recording.</mrk>
          <mrk mtype="seg" mid="3">It is recommended that each user add their initials to the notes to avoid potential confusion.</mrk>
      </seg-source>
      <target state="final">
        <mrk mtype="seg" mid="1" /><ph ctype="" id="1">&lt;MadCap:variable name="zoom_userdocs_variables.var_product_name" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" /&gt;</ph> позволяет находить телефонные взаимодействия, содержащие или не содержащие определенные фразы.
        <mrk mtype="seg" mid="2" />Каждая речевая метка содержит одну или несколько таких фраз.
        <mrk mtype="seg" mid="3" />Ядро <ph ctype="" id="3">&lt;MadCap:variable name="zoom_userdocs_variables.var_product_name" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" /&gt;</ph> индексирует медиафайлы и помечает места вхождения фразы (добавляет к ним метки).
        <mrk mtype="seg" mid="4" />Затем нужные медиафайлы можно искать по связанным с ними меткам.
      </target>
  </trans-unit>
</body> 
```

我得到这个输出：

```
<body>
  <trans-unit id="3" phase-name="pretrans" restype="x-p">
      <source>You can add descriptive text notes to a call recording, if you have the appropriate privileges to do so. These notes are visible to all users who have access to the call recording. It is recommended that each user add their initials to the notes to avoid potential confusion.</source>
      <seg-source>
          <mrk mtype="seg" mid="1">You can add descriptive text notes to a call recording, if you have the appropriate privileges to do so.</mrk>
          <mrk mtype="seg" mid="2">These notes are visible to all users who have access to the call recording.</mrk>
          <mrk mtype="seg" mid="3">It is recommended that each user add their initials to the notes to avoid potential confusion.</mrk>
      </seg-source>
      <target state="final">
       <mrk>
        </mrk>
       <mrk mtype="seg" mid="1">
          <ph ctype="" id="1">&lt;MadCap:variable name="zoom_userdocs_variables.var_product_name" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" /&gt;</ph> позволяет находить телефонные взаимодействия, содержащие или не содержащие определенные фразы.
        </mrk>
       <mrk mtype="seg" mid="2">Каждая речевая метка содержит одну или несколько таких фраз.
        </mrk>
       <mrk mtype="seg" mid="3">Ядро <ph ctype="" id="3">&lt;MadCap:variable name="zoom_userdocs_variables.var_product_name" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" /&gt;</ph> индексирует медиафайлы и помечает места вхождения фразы (добавляет к ним метки).
        </mrk>
       <mrk mtype="seg" mid="4">Затем нужные медиафайлы можно искать по связанным с ними меткам.
      </mrk>
    </target>
  </trans-unit>
</body> 
```

预期输出如下：

```
<body>
  <trans-unit id="3" phase-name="pretrans" restype="x-p">
      <source>You can add descriptive text notes to a call recording, if you have the appropriate privileges to do so. These notes are visible to all users who have access to the call recording. It is recommended that each user add their initials to the notes to avoid potential confusion.</source>
      <seg-source>
          <mrk mtype="seg" mid="1">You can add descriptive text notes to a call recording, if you have the appropriate privileges to do so.</mrk>
          <mrk mtype="seg" mid="2">These notes are visible to all users who have access to the call recording.</mrk>
          <mrk mtype="seg" mid="3">It is recommended that each user add their initials to the notes to avoid potential confusion.</mrk>
      </seg-source>
      <target state="final">
          <mrk mtype="seg" mid="1"><ph ctype="" id="1">&lt;MadCap:variable name="zoom_userdocs_variables.var_product_name" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" /&gt;</ph> позволяет находить телефонные взаимодействия, содержащие или не содержащие определенные фразы.</mrk>
          <mrk mtype="seg" mid="2">Каждая речевая метка содержит одну или несколько таких фраз.</mrk>
          <mrk mtype="seg" mid="3">Ядро <ph ctype="" id="3">&lt;MadCap:variable name="zoom_userdocs_variables.var_product_name" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" /&gt;</ph> индексирует медиафайлы и помечает места вхождения фразы (добавляет к ним метки).</mrk>
          <mrk mtype="seg" mid="4">Затем нужные медиафайлы можно искать по связанным с ними меткам.</mrk>
      </target>
  </trans-unit>
</body> 
```

如何摆脱节点中虚假的第一个空子`mrk`节点`target`？我尝试将 for-each-group 选择更改为“*”，但随后我丢失了文本节点。如果有更好的方法可以完全做到这一点，我会全力以赴！:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:21:18.390

我认为这是因为您在**node()上的分组正在获取****目标元素中第一个****mrk**元素之前的空白。

 **在这种情况下，您可以告诉 XSLT 处理器去除这些空间。尝试将以下行添加到 XSLT 的顶部（就在**xsl:output**之后：

```
<xsl:strip-space elements="target" /> 
```

或者，如果您想对所有元素执行此操作，请执行此操作

```
<xsl:strip-space elements="*" /> 
```

这样做会产生以下输出

```
<body>
   <trans-unit id="3" phase-name="pretrans" restype="x-p">
      <source>You can add descriptive text notes to a call recording, if you have the appropriate privileges to do so. These notes are visible to all users who have access to the call recording. It is recommended that each user add their initials to the notes to avoid potential confusion.</source>
      <seg-source>
         <mrk mid="1" mtype="seg">You can add descriptive text notes to a call recording, if you have the appropriate privileges to do so.</mrk>
         <mrk mid="2" mtype="seg">These notes are visible to all users who have access to the call recording.</mrk>
         <mrk mid="3" mtype="seg">It is recommended that each user add their initials to the notes to avoid potential confusion.</mrk>
      </seg-source>
      <target state="final">
         <mrk mid="1" mtype="seg">
            <ph ctype="" id="1">&lt;MadCap:variable name="zoom_userdocs_variables.var_product_name" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" /&gt;</ph> ������������������ ���������������� �������������������� ����������������������������, �������������������� ������ ���� �������������������� ������������������������ ����������.
        </mrk>
         <mrk mid="2" mtype="seg">������������ �������������� ���������� ���������������� �������� ������ ������������������ ���������� ��������.
        </mrk>
         <mrk mid="3" mtype="seg">�������� <ph ctype="" id="3">&lt;MadCap:variable name="zoom_userdocs_variables.var_product_name" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" /&gt;</ph> ���������������������� �������������������� �� ���������������� ���������� ������������������ ���������� (������������������ �� ������ ����������).
        </mrk>
         <mrk mid="4" mtype="seg">���������� ������������ �������������������� ���������� ������������ ���� ������������������ �� �������� ������������.
      </mrk>
      </target>
   </trans-unit>
</body> 
```

（抱歉，我的 XSLT 处理器目前正在丢失花哨的文本字符！）

顺便说一句，虽然它不会导致问题，但您实际上可以简化以下语句

```
 <xsl:when test="name() = 'mrk' and position() = 1"> 
```

因为你是从**mrk**元素开始分组的，所以你只会在位置 1 获得**mrk**元素，所以你可以这样做

```
 <xsl:when test="name() = 'mrk'> 
```

（这也意味着另一个**xsl:when**可以变成**xsl:otherwise**）**

# android - 等待 asynctask 完成以升级数据库

> ID：14456961
> 
> 赞同：0
> 
> 时间：2013-01-22T10:56:15.243
> 
> 标签：android, android-asynctask

创建数据库后，我使用此代码执行一些查询：

```
 Database bd= new Database(this);

    .............

    bD.open();
    ListView listContent = (ListView) findViewById(android.R.id.list);
    Cursor query = bD.getData(my query goes here);
    MyAdapt cursorAdapter = new MyAdapt(this, query, 0);
    listContent.setAdapter(cursorAdapter);
    bD.close(); 
```

这按预期工作。

现在，如果我在调用时增加我的数据库版本号，`bD.open()`因为新版本号更高，`onUpgrade`则调用该方法并

```
 public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVesion) {

            db.execSQL("DROP TABLE IF EXISTS " + BD_TABLE);

            new UpgradeDb().execute(...some params here...);
    } 
```

我有这个：

```
public class UpgradeDb extends AsyncTask<String, String, String> {

    protected void onPreExecute(String... params) {
        super.onPreExecute();
        progresso = ProgressDialog.show(ctx, params[0], params[1]);

        progresso.setCancelable(false);
    }

    @Override
    protected String doInBackground(String... params) {
        downloadDB(params[2], params[3]);
        return params[1];
    }

    @Override
    protected void onPostExecute(String dbInstalled) {
        getPref = PreferenceManager.getDefaultSharedPreferences(ctx);
        SharedPreferences.Editor pref = getPref.edit();

        pref.putBoolean(dbInstalled, true);
        pref.commit();

        progresso.dismiss();

        super.onPostExecute(null);
    }
} 
```

UpgradeDb 是`public class Database extends Activity`. 在这堂课中，我有`private class DbHelper extends SQLiteOpenHelper`和`public class UpgradeDb extends AsyncTask<String, String, String>`

我得到并且'SQLite返回：错误代码= 1：msg =没有这样的表.....'

我认为这是因为`bD.open();`已删除表并且仍在`Cursor query = bD.getData(my query goes here);`尝试访问数据时仍在进行升级。

所以我的问题是我该如何解决这个问题，即等待`asynctask`完成？

# ruby-on-rails - Rails 3 - 通过参数中的数据安全排序字段

> ID：14456969
> 
> 赞同：0
> 
> 时间：2013-01-22T10:56:48.977
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sql-injection

我有这样的方法控制器：

```
 def index
    state = state_filter()

    if state
      ...
    else
      @clients = Client.paginate(:page => params[:page], :per_page => 30).order(sort_column + ' ' + sort_direction)
    end
  end

  ...
  def sort_direction
    %w[asc desc].include?(params[:direction]) ?  params[:direction] : "asc"
  end

  def sort_column
    Client.column_names.include?(params[:sort]) ? params[:sort] : "title"
  end 
```

我通过[brakeman gem](https://github.com/presidentbeef/brakeman)扫描了我的应用程序，它发现我在排序的索引方法中可能有SQL 注入。我试图解决这个问题来重写我的方法，如下所示：

```
def sort_direction
  case params[:direction]
    when "asc" then "asc"
    when "desc" then "desc"
    else "asc"                                                                                    
  end
end

def sort_column
  case params[:sort]
    when "title" then "title"
    when "state" then "state"
    when "created_at" then "created_at"
    else "title"                                                                                  
  end
end 
```

但是 gem 仍然认为我有这个漏洞。解决此问题的正确方法是什么？我真的需要以某种方式处理吗？

# c++ - 试图反映对原始变量的影响（通过引用调用）

> ID：14456972
> 
> 赞同：2
> 
> 时间：2013-01-22T10:57:04.950
> 
> 标签：c++, vector

我已经定义了一个由对和向量组成的向量。为了更好的可读性，我这样做

```
#include <iostream>
#include <vector>
using namespace std;
class foo {
public:
  vector< pair<int, vector<int> > > v;
  vector< pair<int, vector<int> > >::iterator it;
  void bar() 
  {
    for( it = v.begin(); it != v.end(); it++ ) {
      if ( 10 == (*it).first ) {
          vector<int> a = (*it).second;   // NOTE
          a[0] = a[0]*2;                  // NOTE
      }
    }
  }
};

int main()
{
  foo f;
  f.bar();
  return 0;
} 
```

如您所见，我分配`(*it).second`给一个变量`a`，以便我轻松操作。问题是，当我改变 的值时`a`，原始向量`v`不会改变。我可以解决这个变化`a`到`(*it).second`循环中的每个地方。但是，这会使代码难以阅读。

有什么方法可以反映`a`原始的变化`v`吗？我不得不说这样的引用调用

```
vector<int> a = &(*it).second; 
```

不工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:58:34.243

您需要声明`a`为参考：

`vector<int>& a = (*it).second;`

与号in`std::vector<int> a = &(*it).second;`被解析为地址运算符，`a`而不是指针 - 这就是它不起作用/编译的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T11:01:11.837

只有当您将原始向量作为参考时，您才能更改原始向量的值。但是在您的代码中，您正在创建它的副本并更改不影响原始向量的副本。

你`vector<int> a`应该是一个参考。

```
vector<int> &a... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T11:02:28.300

首先：没有代码可以演示如何填充`v`成员以及何时初始化`it`. 只需确保您`it`毕竟有一个有效的（请记住，向量中的所有迭代器都可能在`v`修改后失效）

第二个：正确的行应该是这样的

```
vector<int>& a = it->second; 
```

（您取而代之的是一个地址，您的代码段甚至无法编译）

# c# - 我不明白为什么会出现“需要对象引用”错误

> ID：14456973
> 
> 赞同：2
> 
> 时间：2013-01-22T10:57:10.660
> 
> 标签：c#, exception, object, reference, error-handling

此代码读取文件数组并将它们传递给以下类库。

```
 private void btnConvert_Click(object sender, EventArgs e)
    {
        if (rbtnNetIX.Checked == true)
        {
            string[] files = Directory.GetFiles(txtPath.Text, "*.txt");
            NetEDI.NetIX.Seiko.Seiko.Main(files);

        } 
```

应由以下代码引用。

```
public class Seiko
{
    public void Main(string[] args)
    {
        List<FileDefinition.FileDefinition> fileDefs = new List<FileDefinition.FileDefinition>();
        foreach (string fileEntries in args)
        {

            fileDefs.Add(CreateFileDef(fileEntries));
        }

        foreach (var fileDef in fileDefs)
        {
            XmlCreator CreateXmlDefinition = new XmlCreator(fileDef.FileName + ".xml", fileDef);
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T10:59:40.357

Main 不是**static**，因此您首先需要对该`Seiko`类的对象引用才能调用它。

所以，在这里：`NetEDI.NetIX.Seiko.Seiko.Main(files);`- 这是对非静态方法的静态调用，因此是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:59:50.407

查看您的`Main`方法声明：

```
public void Main(string[] args) 
```

这是一个*实例*方法——你必须在`Seiko`. 但是当你尝试在这里调用它时：

```
NetEDI.NetIX.Seiko.Seiko.Main(files); 
```

...您试图将其称为静态方法。

鉴于周围的约定`Main`，我强烈怀疑您希望将其设为静态方法。

（顺便说一句，您可能应该修改静态成员和实例成员之间的区别，并再次查看错误消息：看看您是否可以弄清楚为什么您自己没有弄清楚问题，以便下次遇到类似的东西，你可以修复它。）

# c# - 哪种是为应用程序编写日志的最基于性能的方法

> ID：14456975
> 
> 赞同：6
> 
> 时间：2013-01-22T10:57:13.823
> 
> 标签：c#, .net, logging, streamwriter

我正在一个客户端服务器应用程序中工作，其中多个客户端和服务器正在为性能非常关键的金融交易进行基于套接字的通信。目前我正在使用 system.IO 命名空间的 streamwriter 将日志写入文件。对于单个事务，我需要调用 streamwriter 方法 50 次以记录不同的值，对于超过 50,000 个事务，此记录所花费的时间变得非常重要。

如何减少应用程序进行日志记录所花费的时间？我是否需要选择其他方法或任何其他类而不是streamwriter？用更少的时间进行日志记录的最佳方法是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T05:34:14.470

如果性能是关键，那么我会考虑查看 Windows 事件跟踪 (AKA ETW)。

使用 .NET 4.5 和[EventSource](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracing.eventsource.aspx)类的引入，这使得 ETW 比过去更容易实现。

[Vance Morrison 的博客](http://blogs.msdn.com/b/vancem/)有一些关于这个主题的好文章。

有关体系结构的概述，请参阅[使用 ETW 改进调试和性能调整](http://msdn.microsoft.com/en-us/magazine/cc163437.aspx)。

还有来自 Microsoft 模式和实践团队的[语义应用程序块](http://github.com/mspnp/semantic-logging)，可以更轻松地合并 EventSource 功能和管理日志记录行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:40:09.223

我建议你试试 Log4Net，你可以配置 where (file, database, xml) 和 when (bath, transaction, ...) 并轻松切换跟踪级别 (debug, info, warning, ...)

从头开始编写日志系统是不值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T11:00:57.883

在将值写入磁盘之前缓存它们。

仅在您完成事务后提交日志。

像这样的东西：

```
StringBuilder builder = new StringBuilder();
// do transaction step 1
builder.Append("Transaction step 1" + environment.NewLine); // or however you add a line to you log

// step 2
builder.Append("Transaction step 2" + environment.NewLine);

//...

// step 50
builder.Append("Transaction step 50" + environment.NewLine);

// now write to the file
File.WriteAllText(@"C:\log.txt", builder.ToString()); 
```

如果在任何步骤中出现错误仍然写入日志，您可以添加一些处理。

您还可以使用一些开源工具，例如 log4net： http: [//logging.apache.org/log4net/](http://logging.apache.org/log4net/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T11:03:13.003

我建议登录数据库（高性能，可能嵌入 sqlite/sqlce）。奖励 - 您可以构建和查询您的日志条目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T11:43:40.193

为了减少记录所花费的时间，我建议：

*   确保记录的数据需要最少的转换/格式化
*   创建或使用一个日志库：
    *   当被调用时，将日志数据（连同时间、线程 ID 和其他要记录的标签）放在缓冲区中。
    *   定期将缓冲数据刷新到磁盘（即当缓冲数据大到足以填满日志文件中的至少一个物理块时立即刷新，或在系统空闲时立即刷新，或每隔 x 秒定期刷新）。
    *   锁定日志文件以进行独占写入访问，因此您可以在软件运行时查看它，但其他进程无法将其锁定在您的脚下。
    *   使用单独的线程来处理刷新，即不要减慢您的工作线程。
*   如果您有许多服务器进程，请考虑使用 IPC 将日志数据发送到一个点，以最大限度地减少正在写入的活动文件的数量和正在使用的缓冲区数量（您可能需要进行测试，看看这是否值得，并且您可能必须添加标签以显示每个条目的来源）。
*   对日志进行计划/空闲时间备份，以防止它们变得太大。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T05:51:25.477

提高应用程序性能并能够写出所有这些日志消息的一种方法是将它们排队到 MSMQ 队列中，并在服务器未加载时让 Windows 服务应用程序处理排队的日志消息。您也可以将队列放在完全独立的服务器上。

实施方面，您可以设置使用 MSMQ 处理日志消息的 WCF Web 服务。这比必须设置 Windows 服务更容易。

# php - 使用 php 将 .ics 文件作为日历发送而不是作为附件发送

> ID：14456977
> 
> 赞同：0
> 
> 时间：2013-01-22T10:57:20.117
> 
> 标签：php, html, calendar

```
<?php
function sendIcalEvent($to_address, $startTime, $endTime, $subject, $description,  $location)
{
$from_name = 'ivan.k';
$from_address = 'ivan.k@cspl.com';
$to_name = "Ramya"; 
$domain = 'cspl.com';
//Create Email Headers
$mime_boundary = "----Meeting Booking----".MD5(TIME());
$headers = "From: ".$from_name." <".$from_address.">\n";
$headers .= "Reply-To: ".$from_name." <".$from_address.">\n";
$headers .= "MIME-Version: 1.0\n";
$headers .= "Content-Type: multipart/mixed; boundary=\"$mime_boundary\"\n";
// $headers .= "Content-type: text/calendar; method=REQUEST; charset=UTF-8\r\n";
$headers .= "Content-class: urn:content-classes:calendarmessage\n";

//Create Email Body (HTML)
$message = "--$mime_boundary\r\n";
$message .= "Content-Type: text/html; charset=UTF-8\n";
$message .= "Content-Transfer-Encoding: 8bit\n\n";
$message .= "<html>\n";
$message .= "<body>\n";
$message .= '<p>Dear '.$to_name.',</p>';
$message .= '<p>'.$description.'</p>';
$message .= "</body>\n";
$message .= "</html>\n";
$message .= "--$mime_boundary\r\n";

//status / url / recurid /
$ical = 'BEGIN:VCALENDAR' . "\r\n" .
'PRODID:-//Microsoft Corporation//Outlook 10.0 MIMEDIR//EN' . "\r\n" .
'VERSION:2.0' . "\r\n" .
// 'CALSCALE:GREGORIAN' . "\r\n" .
// 'METHOD:PUBLISH' . "\r\n" .
'METHOD:REQUEST' . "\r\n" .
'BEGIN:VTIMEZONE' . "\r\n" .
'TZID:Eastern Time' . "\r\n" .
'BEGIN:STANDARD' . "\r\n" .
'DTSTART:20091101T020000' . "\r\n" .
'RRULE:FREQ=YEARLY;INTERVAL=1;BYDAY=1SU;BYMONTH=11' . "\r\n" .
'TZOFFSETFROM:-0400' . "\r\n" .
'TZOFFSETTO:-0500' . "\r\n" .
'TZNAME:EST' . "\r\n" .
'END:STANDARD' . "\r\n" .
'BEGIN:DAYLIGHT' . "\r\n" .
'DTSTART:20090301T020000' . "\r\n" .
'RRULE:FREQ=YEARLY;INTERVAL=1;BYDAY=2SU;BYMONTH=3' . "\r\n" .
'TZOFFSETFROM:-0500' . "\r\n" .
'TZOFFSETTO:-0400' . "\r\n" .
'TZNAME:EDST' . "\r\n" .
'END:DAYLIGHT' . "\r\n" .
'END:VTIMEZONE' . "\r\n" .  
'BEGIN:VEVENT' . "\r\n" .
'ORGANIZER;CN="'.$from_name.'":MAILTO:'.$from_address. "\r\n" .
'ATTENDEE;CN="'.$to_name.'";ROLE=REQ-PARTICIPANT;RSVP=TRUE:MAILTO:'.$to_address. "\r\n" .
'LAST-MODIFIED:' . date("Ymd\TGis") . "\r\n" .
'UID:'.date("Ymd\TGis", strtotime($startTime)).rand()."@".$domain."\r\n" .
'DTSTAMP:'.date("Ymd\TGis"). "\r\n" .
'DTSTART;TZID="Eastern Time":'.date("Ymd\THis", strtotime($startTime)). "\r\n" .
'DTEND;TZID="Eastern Time":'.date("Ymd\THis", strtotime($endTime)). "\r\n" .
'TRANSP:OPAQUE'. "\r\n" .
'SEQUENCE:1'. "\r\n" .
'SUMMARY:' . $subject . "\r\n" .
'LOCATION:' . $location . "\r\n" .
'CLASS:PUBLIC'. "\r\n" .
'PRIORITY:5'. "\r\n" .
'BEGIN:VALARM' . "\r\n" .
'TRIGGER:-PT15M' . "\r\n" .
'ACTION:DISPLAY' . "\r\n" .
'DESCRIPTION:Reminder' . "\r\n" .
'END:VALARM' . "\r\n" .
'END:VEVENT'. "\r\n" .
'END:VCALENDAR'. "\r\n";
$message .= 'Content-Type: text/calendar;name="meeting.ics";method=REQUEST\n';
$message .= "Content-Transfer-Encoding: 8bit\n\n";
$message .= $ical;

$mailsent = mail($to_address, $subject, $message, $headers);

if($mailsent){
return true;
} else {
return false;
}
} 
```

我正在使用 php 通过邮件将日历请求发送到 Outlook。它具有 html 正文内容。在此 meeting.ics 将作为附件发送，但我希望将其作为日历请求发送，该请求应自动添加到日历中。如果我在标题中将内容类型指定为文本/日历，则 html 正文变为空。有人可以帮我一些代码吗？提前致谢

嗨，还有一个问题。当我将 $starttime 设置为“2013-01-23 13:00:00”时，它必须在 2013 年 1 月 23 日下午 1 点添加到日历中，但它会添加到 06:30下午 23 年 1 月 23 日。我希望它以 IST 格式发送。如何做到这一点。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:03:52.190

您需要添加`Content-Disposition`到您的消息部分：

尝试改变这一点：

```
$message .= 'Content-Type: text/calendar;name="meeting.ics";method=REQUEST\n'; 
```

对此：

```
$message .= 'Content-Type: text/calendar;name="meeting.ics";method=REQUEST\n';
$message .= 'Content-Disposition: attachment';
$message .= 'Content-Transfer-Encoding: base64'; 
```

不确定这项工作是否因为我没有测试过，它在每个邮件客户端上的行为可能不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T09:55:25.020

尝试使用这个：

```
header("Content-type:text/calendar");
header('Content-Disposition: attachment; filename="'.$this->name.'.ics"'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:08:09.187

除了 ics 附件，甚至可以在您的电子邮件正文中添加另一个正文部分，并带有以下标题。

$message .= 'Content-Type: text/calendar;name="meeting.ics";method=REQUEST\n'; $message .= '内容传输编码：base64';

在这个body部分的内容中放ics文件内容。

这应该工作！

# ios - 实时从服务器获取消息

> ID：14456980
> 
> 赞同：0
> 
> 时间：2013-01-22T10:57:43.243
> 
> 标签：ios, objective-c, cocoa-touch

这通常是一个常见的问题。

我想知道邮件应用程序如何实现电子邮件接收功能？我需要使用我的网络服务在两个设备（例如）之间实现简单的同步。

想象一个待办事项列表应用程序。

是否有可能实现这样的功能：设备1创建一个条目，然后向webservice发送一条消息，webservice通知设备2发生了变化，设备2调整其数据并显示该条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:12:20.163

在 iOS 上，您可以通过推送通知轻松实现您想要的。一旦服务器检测到 device2 需要注意的更改，服务器就会向该设备发送推送通知。

在用户查看通知后，应用程序应该自行更新，让应用程序在进入前台时自行更新也是一个好主意。

使用推送通知而不是轮询的原因是，如果您的应用程序在后台，您最多只能继续运行一个进程 10 分钟。您可以通过将背景模式添加到您的应用程序来解决此问题，例如 VOIP、音频或位置。但是，如果您的应用不属于这些类别，苹果可能会拒绝您的应用。

使用推送通知，即使您的应用程序没有运行或在后台，设备也会收到通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:13:29.223

基本上有2种方式：

1.  轮询，每台设备每 N 分钟向网络服务器请求更改：新的待办事项、删除待办事项、更改待办事项……然后每台设备都会进行调整。民意调查的频率取决于您正在寻找的实时水平。它可以是每秒或每 12 小时或更长时间打 1 个电话。
2.  实现一种[BOSH 协议](http://xmpp.org/extensions/xep-0206.html)：设备打开到服务器的连接。服务器保持打开状态，直到有新内容要发送到设备或连接超时。在这种情况下，设备会重新打开它。

选项 1 更适合您的待办事项应用程序，因为您不需要实时准确性。选项 2 更适合您不想等待消息的聊天应用程序。

# jquery - jQuery复选框选中取消选中子复选框

> ID：14456982
> 
> 赞同：1
> 
> 时间：2013-01-22T10:57:53.237
> 
> 标签：jquery

我有一个父子类别复选框，其中子有子子。仅在单击父类别时才需要显示子类别，并且当取消选中父类别时，所有子类别都需要隐藏。

一切都很好，但是什么时候，假设孩子和子孩子被检查了。现在，当未选中超级父级时，它会隐藏保持选中子子级的复选框，该复选框应未选中。

这是我的代码。

```
$(function () {
$(':checkbox').change(function () {
$("input[type='checkbox']:checked").each(function () {
    var inner_id = $(this).attr('id');
    if (inner_id.search("parent") > -1) {
    //   $("input."+inner_id).attr('hidden','false')
    $("."+inner_id).removeAttr("hidden");
    }
});
});
});

$(function () {
    $(':checkbox').click(function () {
    var is_chk = $(this).attr('checked');
    var its_id = $(this).attr('id');
    if (is_chk != 'checked') {
        $("."+its_id).attr('hidden', 'true');
    }
});
}); 
```

这个的html代码是。

```
 <input type="checkbox" id="parent1" />parent<br/>
 &nbsp;&nbsp;<input type="checkbox" class="parent1" disabled="true" />child1<br/>
 &nbsp;&nbsp;<input type="checkbox" class="parent1" disabled="true"/>child2<br/>
 &nbsp;&nbsp;<input type="checkbox" class="parent1" disabled="true"/>child3<br/>
 <input type="checkbox" id="parent2" />parent<br/>
 &nbsp;&nbsp;<input type="checkbox"  class="parent2" disabled="true"/>child1<br/>
 &nbsp;&nbsp;<input type="checkbox" class="parent2" 
 id="parent3" disabled="true"/>child2-parent<br/>
 &nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox"
 class="parent3" disabled="true"/>child1<br/>
 &nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox"
 class="parent3"  disabled="true"/>child2<br/>
 &nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox"
 class="parent3"  disabled="true"/>child3<br/>
 &nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox"
 class="parent3"  disabled="true"/>child4<br/>
 &nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" 
 class="parent3" id="parent4"  disabled="true"/>child5-parent<br/>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" 
 class="parent4"  disabled="true"/>child1<br/>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" 
 class="parent4"  disabled="true"/>child2<br/> 
```

或者你可以在这里试试。

[http://jsfiddle.net/DNDnT/4/](http://jsfiddle.net/DNDnT/4/)

只需选中所有复选框并单击父级，您就会明白我的问题。谢谢。

我在项目中尝试过的实际代码是。

```
$(function() {
$(':checkbox').change(function() {

$("input[type='checkbox']:checked").each(function() { 
  //var inner_id = $(this).attr('id');
    var inner_id = $(this).attr('value');
  var parId1="input."+inner_id;
  var parId2="."+inner_id;

$(parId1).removeAttr("disabled");
  $(parId2).removeAttr("hidden");

});
});
}); 

$(function() {
$(':checkbox').click(function() {
var is_chk = $(this).attr('checked');
   var its_id = $(this).attr('value'); 
   //var parId2="#"+its_id;
    var parId1="input."+its_id;
    var parId2="."+its_id;

    if(is_chk!='checked') {
        $(parId1).removeAttr("checked");
        $(parId1).attr('disabled','true');
        $(parId2).attr('hidden','true');

    }
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:26:05.487

我不认为你写的作品，只是看到你的小提琴。但如果这就是你想要的，那么你可以尝试在第二个函数中添加这一行：

```
$("."+its_id).attr('checked', false); 
```

前

```
$("."+its_id).attr('hidden', 'true'); 
```

# java - 带有jooq的postgres'WITH'子句

> ID：14456985
> 
> 赞同：3
> 
> 时间：2013-01-22T10:57:58.493
> 
> 标签：java, sql, common-table-expression, jooq, with-clause

见鬼，我找不到在 JOOQ 中使用 postgres 'WITH' 子句的方法。请问JOOQ是否支持它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:45:53.277

Common table expressions (the "`WITH` clause") are currently not supported in jOOQ. There is a pending feature request on the jOOQ road map for CTE's: [#454](https://github.com/jOOQ/jOOQ/issues/454). As of jOOQ 3.0, there are currently no plans of actually supporting it, though.

(Your best option to push things a little bit is to discuss this topic on the [jOOQ user group](https://groups.google.com/forum/?fromgroups#!forum/jooq-user))

# mysql - 有什么方法可以在查询中引用 MySQL“AS”值？

> ID：14456987
> 
> 赞同：3
> 
> 时间：2013-01-22T10:58:02.387
> 
> 标签：mysql, sql, join

在以下查询中，我总结了给定范围内所有销售的所有销售项目。此摘要中包含“sumOfCost”和“sumOfPrice”，我也想要“sumOfProfit”。问题是，由于它们只是“AS”变量，我不确定如何引用它们，而我的尝试“...... Blah AS blah, sumOfPrice - sumOfCost = sumOfProfit ...”很遗憾没有奏效！

这是我的查询：

```
SELECT  Sales.SaleID, 
        Sales.StaffID, 
        Sales.CustomerID, 
        Sales.Timestamp, 
        Sales.Refunded, 
        Sales.PaymentType, 
        Staff.Forename AS staffForename, 
        Staff.Surname AS staffSurname, 
        (   
            SELECT GROUP_CONCAT(Quantity, ' x ', Name) 
            FROM SaleItems 
            WHERE SaleItems.SaleID = Sales.SaleID
        ) AS itemList, 
        (
            SELECT sum(Cost*Quantity) 
            FROM SaleItems 
            WHERE SaleItems.SaleID = Sales.SaleID
        ) AS sumOfCost, 
        (
            SELECT sum(Price*Quantity) 
            FROM SaleItems 
            WHERE SaleItems.SaleID = Sales.SaleID
        ) AS sumOfPrice 
FROM    Sales 
        INNER JOIN Staff 
            ON Sales.StaffID = Staff.StaffID 
WHERE   Sales.Deleted = '0' 
ORDER   BY Timestamp DESC 
LIMIT   0, 15 
```

为查询的长度道歉，我之前一直在努力优化它，但现在我只想解决这个问题。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:10:50.743

解决此问题的一种替代方法是使用子查询包装整个*查询*，

```
SELECT  *,
        sumOfCost - sumOfPrice AS sumOfProfit
FROM
    (
        SELECT  Sales.SaleID, 
                Sales.StaffID, 
                Sales.CustomerID, 
                Sales.Timestamp, 
                Sales.Refunded, 
                Sales.PaymentType, 
                Staff.Forename AS staffForename, 
                Staff.Surname AS staffSurname, 
                (   
                    SELECT GROUP_CONCAT(Quantity, ' x ', Name) 
                    FROM SaleItems 
                    WHERE SaleItems.SaleID = Sales.SaleID
                ) AS itemList, 
                (
                    SELECT sum(Cost*Quantity) 
                    FROM SaleItems 
                    WHERE SaleItems.SaleID = Sales.SaleID
                ) AS sumOfCost, 
                (
                    SELECT sum(Price*Quantity) 
                    FROM SaleItems 
                    WHERE SaleItems.SaleID = Sales.SaleID
                ) AS sumOfPrice 
        FROM    Sales 
                INNER JOIN Staff 
                    ON Sales.StaffID = Staff.StaffID 
        WHERE   Sales.Deleted = '0' 
        ORDER   BY Timestamp DESC 
        LIMIT   0, 15
    ) s 
```

* * *

顺便说一句，它们被称为`ALIAS`。

`ALIAS`不能在定义它们的同一级别上用于计算的原因是服务器在子句`FROM`之前执行`SELECT`子句。`ALIAS`are 在子句上，这`SELECT`是完整的 SQL 操作顺序：

*   FROM 子句
*   WHERE 子句
*   GROUP BY 子句
*   HAVING 子句
*   选择子句
*   ORDER BY 子句

为了更好的性能问题，我宁愿使用`JOIN`than `subqueries`。

**更新 1**

```
SELECT  Sales.SaleID, 
        Sales.StaffID, 
        Sales.CustomerID, 
        Sales.Timestamp, 
        Sales.Refunded, 
        Sales.PaymentType, 
        Staff.Forename AS staffForename, 
        Staff.Surname AS staffSurname, 
        COALESCE(a.itemList, '') itemList,
        COALESCE(b.sumOfCost, 0) sumOfCost, 
        COALESCE(c.sumOfPrice, 0) sumOfPrice,
        COALESCE(b.sumOfCost, 0) - COALESCE(c.sumOfPrice, 0) AS sumOfProfit
FROM    Sales 
        INNER JOIN Staff 
            ON Sales.StaffID = Staff.StaffID 
        LEFT JOIN 
        (   
            SELECT SaleID, GROUP_CONCAT(Quantity, ' x ', Name) itemList
            FROM SaleItems 
            GROUP BY SaleID
        ) a ON a.SaleID = Sales.SaleID
        LEFT JOIN
        (
            SELECT SaleID, sum(Cost*Quantity) sumOfCost
            FROM SaleItems 
            GROUP BY SaleID
        ) b ON b.SaleID = Sales.SaleID
        LEFT JOIN
        (
            SELECT SaleID, sum(Price*Quantity) sumOfPrice 
            FROM SaleItems 
            GROUP BY  SaleID
        ) c ON c.SaleID = Sales.SaleID
WHERE   Sales.Deleted = '0' 
ORDER   BY Timestamp DESC 
LIMIT   0, 15 
```

**更新 2**

```
SELECT  Sales.SaleID,
        Sales.StaffID,
        Sales.CustomerID,
        Sales.TIMESTAMP,
        Sales.Refunded,
        Sales.PaymentType,
        Staff.Forename AS staffForename,
        Staff.Surname AS staffSurname,
        COALESCE(a.itemList, '') itemList,
        COALESCE(a.sumOfCost, 0) sumOfCost,
        COALESCE(a.sumOfPrice, 0) sumOfPrice,
        COALESCE(a.sumOfCost, 0) - COALESCE(a.sumOfPrice, 0) AS sumOfProfit
FROM    Sales
        INNER JOIN Staff
            ON Sales.StaffID = Staff.StaffID
        LEFT JOIN
        (  
            SELECT      SaleID,
                        GROUP_CONCAT(Quantity, ' x ', Name) itemList,
                        SUM(Cost*Quantity) sumOfCost,
                        SUM(Price*Quantity) sumOfPrice
            FROM SaleItems
            GROUP BY SaleID
        ) a ON a.SaleID = Sales.SaleID
WHERE   Sales.Deleted = '0'
ORDER   BY TIMESTAMP DESC
LIMIT   0, 15 
```

# javascript - pushstate“hijax”的Javascript框架

> ID：14456988
> 
> 赞同：6
> 
> 时间：2013-01-22T10:58:02.740
> 
> 标签：javascript, ajax, javascript-framework, pushstate, hijax

我们所有的应用程序都是 php mvc，并且在客户端顶部有一个非常简单的 js 行为层。我们希望更多地构建 javascript 并停止请求“片段”来执行简单的行为（例如，在各处加载不同的 jquery 插件）。我们不使用 javascript MVC 框架，而是为我们的新应用寻找最合适的解决方案。

最吸引人的解决方案之一是继续为我们呈现服务器端，就像[Twitter 所做](http://engineering.twitter.com/2012/12/implementing-pushstate-for-twittercom_7.html)的那样。他们称之为“Hijax + 服务器端渲染”。我们不希望在 javascript 中拥有完整的 mvc 框架，但博客中的这些引述对我们非常有吸引力：

> 按照约定，我们的组件将自己附加到单个 DOM 节点，通过委托监听事件，在 DOM 上触发事件，这些事件通过 DOM 事件冒泡广播到其他组件。[...] 其次，我们所有的组件都是使用 AMD 定义的。

我们一直在尝试构建我们自己的东西，但是如果没有高水平的 javascript 专业知识，我们就无法做到这一点。对于非常简单的情况，像[jquery-pjax](https://github.com/defunkt/jquery-pjax/)这样的东西似乎也是一个很好的解决方案。

我们正在寻找：

1.  将 XHR 与 DOM 松散耦合的 UI/数据隔离
2.  事件驱动的 UI，因此开发人员可以将侦听器附加到所有类型的 DOM 对象

有没有类似 javascript 框架的东西？随着`pushState`越来越多的关注，我希望会有一些东西可用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:08:10.243

您可能想查看[History.js](https://github.com/balupton/History.js)和 [Amplifyjs](http://amplifyjs.com/)（可能还有一些组件的[microjs ）](http://microjs.com/#)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:32:53.360

我将尽我所能回答你的问题。话虽如此，我会说您的问题*非常*广泛且含糊不清。您尚未成功传达您在 JavaScript 库中寻找的确切内容。您提到了许多不同的主题，这些主题都很复杂，每个主题都是为了服务于客户端开发中的特定目的。虽然可能有所有这些概念的实现，但没有一个明确的答案可以解决您的所有问题。

我将从您的第一点“UI / 数据隔离”开始。这个概念实际上是关于关注点分离。您希望您的 UI 与您的数据分开存在。您真正需要的是让您的 HTML 反映数据模型的当前状态。您还希望这会自动为您发生。这是具有 MVC 设计模式的非常常见的工作流程。JavaScript 有几个可供您使用的选项： [Backbone.js](http://backbonejs.org "骨干网.js")、[AngularJS](http://angularjs.org "AngularJS")、[EmberJS](http://emberjs.com)，不胜枚举……

根据我使用这些不同框架的个人经验，我建议使用 Backbonejs，因为它具有灵活和轻量级的特性。在 Backbone 中，我们有一个*可以*直接绑定到数据模型的“视图”的概念。它还通过它的 Routes 机制支持您想要的“pushSate”概念。

“事件驱动的 UI”部分可以由任意数量的不同 JavaScript 库处理。jQuery 可能是最流行的将事件附加到“各种 dom 元素”的库。Backbone.js 还允许使用其 View 对象轻松设置事件委托（通过事件冒泡）。

简而言之，如果你想为你的 JavaScript 添加结构......这真的取决于你*想要*什么。对于简单的事情，一点点手工制作的 jQuery 就可以了。如果您真的想要一个更具 MVC 风格的应用程序，并且具有增长潜力，那么像 Backbone 这样的 MVC 框架是您的最佳选择。

# iphone - 如何将 NSData 转换为 NSString

> ID：14456995
> 
> 赞同：5
> 
> 时间：2013-01-22T10:58:15.757
> 
> 标签：iphone, ios, nsstring, nsdata

我知道这已经被问过了，我已经遵循了几种方法，但它们不起作用。

以下是我已经尝试过的：

```
NSString *newStr = [NSString stringWithUTF8String:[responseData bytes]];
NSString *newStr = [NSString stringWithFormat:@"%.*s", [responseData length], [responseData bytes]]; 
```

它们都不起作用。在第一种情况下，它用 null 填充 newStr。第二，它充满了垃圾字符。我从调试器日志（po responseData）中知道我得到了有效的响应，就像 bbbbbb 00 bbbbbb。[服务器将它们作为字节数组发送]

该怎么办？

编辑：我正在从 http 请求响应中接收这些数据 - 使用 ASIHTTPRequest 库，以防有人可以在那条线上提供帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T11:18:10.630

试试这个，

```
NSData *responseData; [Initialize it]
NSString *receivedDataString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]; 
NSLog(@"%@",receivedDataString); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T10:59:51.567

请尝试以下代码

```
NSString *string = [[[NSString alloc] initWithData: responseData.bytes encoding:NSUTF8StringEncoding] autorelease]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T11:00:39.310

您可以使用此代码行

```
NSString *str=[[NSString alloc] initWithBytes:data1.bytes length:data1.length encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-22T11:29:02.673

我发布这个是为了记录，因为我发现了一个[重复](https://stackoverflow.com/a/12442672/1506363)并投票关闭它。

实际上我收到的是一个以十六进制表示的字节流，并且所有指示的答案都不起作用。只有 [NSData description] 给了我真实的数据，这是我不能使用的，因为它是用于调试的。

最后我尝试了[这里](https://stackoverflow.com/a/12442672/1506363)给出的解决方案，我得到了我想要的。感谢所有人试图提供帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-22T12:12:26.710

```
NSString  *image1Data = [[NSData dataWithData:myData] encodeBase64ForData]; 
```

但为此，您必须使用 NSData+Base64Additions 类。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-16T06:27:00.200

使用以下方式

```
 NSString *dC_Str = [[NSString alloc] initWithData:decryPtd_data encoding:NSASCIIStringEncoding] ; 
```