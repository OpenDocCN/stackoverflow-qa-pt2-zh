# StackOverflow 问答 16048000-16048999

# c++ - QtSerialPort 成帧错误

> ID：16048001
> 
> 赞同：0
> 
> 时间：2013-04-16T22:07:55.337
> 
> 标签：c++, qt, serial-port

我已经为 Qt4 构建了 qtserialport 并编写了一个控制台应用程序来记录来自设备的数据，该设备以 9600 波特、8 个数据位、1 个停止位和无奇偶校验发送信息，我认为这是串行通信的默认设置。我已经设法正确打开端口并按预期记录数据，但是每当我关闭应用程序或关闭计算机并尝试重新启动应用程序时，端口都会打开但给我一个“框架错误”。如果我关闭应用程序，然后使用超级终端打开端口，端口会正确打开，然后我可以打开控制台应用程序而不会出现错误。我已经读过可以使用奇偶校验来解决框架错误，但我真的不知道要使用什么设置，甚至不知道它是解决我的问题的方法。

```
 //constructor
    MyApp::MyApp()
    {
         QSerialPort *serialPort = new QSerialPort(this);

            connect(serialPort,
                    SIGNAL(error(QSerialPort::SerialPortError)),
                    this,SLOT(serialError(QSerialPort::SerialPortError)));

            serialPort->setPortName("COM1");
            serialPort->setBaudRate(9600,QSerialPort::Input);
            serialPort->setStopBits(QSerialPort::OneStop);
            serialPort->setParity(QSerialPort::NoParity);
            serialPort->setDataBits(QSerialPort::Data8);
            serialPort->setFlowControl(QSerialPort::NoFlowControl);

            if(serialPort->open(QIODevice::ReadOnly))
            {
                qDebug() << "Serial port opened at serialPort->portName();
            }
    }

    ...

    void myApp::serialError(QSerialPort::SerialPortError error)
    {
        if(error != QSerialPort::NoError)
        {
            QMetaEnum metaEnum =  QSerialPort::staticMetaObject.enumerator(
            QSerialPort::staticMetaObject.indexOfEnumerator("SerialPortError"));

            QString errStr(metaEnum.valueToKey(error));

            qDebug() << errStr;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:06:52.570

当 UART 未检测到停止位时会产生帧错误。常见原因有：

*   设备发送时波特率错误或更改波特率
*   设备发送的数据或奇偶校验位超出您的预期
*   停止位的数量不匹配
*   在设备通电的情况下重新连接电缆
*   打开端口时软件不清除错误状态

如果您在打开端口后只收到一个帧错误，则忽略它。如果它们在设备发送时不断触发，那么您配置的端口错误。请避免使用 QSerialPort::NoFlowControl，大多数设备都实现了硬件握手。像超级终端这样的程序总是会打开它。询问了解设备的人员如何配置它，这样您就可以停止猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:51:43.147

您错误地设置了串行端口选项。串口，首先需要打开，然后配置！但不像你现在做的那样。在您的代码中，FramingError 的所有问题都是一个原因，因为您的配置不被接受（您至少在 set() 方法中检查返回值）。因为需要启用奇偶校验模式的先前配置。阅读文档，查看示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-01T12:08:52.863

您应该添加一条语句来捕获事件的中断中断`Framing Error`：

```
serialPort->notifyOnFramingError(true) 
```

然后，在纯代码段中，添加'break'语句退出。

# delphi - 在 Delphi 中同时使用两个单独的 EXE 更新数据库

> ID：16048010
> 
> 赞同：0
> 
> 时间：2013-04-16T22:08:42.150
> 
> 标签：delphi, sybase-asa

两个单独的 exe（进程）使用相同的数据库和更新数据库，如果用户在 Delphi xe2 中同时运行两个 exe 进行数据库更新，如何同步数据库操作。如果我们运行一个 exe，它看起来就像挂起，直到在数据库中进行更新。我正在使用 ODBC 连接。请建议。

我在两个exe（进程）中都使用控件连接到数据库。我使用的数据库是 Sybase SQL Anywhere 12。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:31:00.033

对于我可以用谷歌搜索的内容，有两个版本的 Anywhere aka WatcomSQL：服务器和 UltraLite

第一个问题当然是你是否使用事务：[http ://en.wikipedia.org/wiki/Database_transaction](http://en.wikipedia.org/wiki/Database_transaction)

虽然大多数 RDBMS 需要显式使用事务，但一些简化的类 RDBMS（如 MySQL 或 Advantage）则不需要。而且看起来SQL Anywhere 还可以让您在没有事务的情况下工作。这是一个陷阱：没有事务可能更容易开始，但它仅在您拥有单个独家客户端时才有效。 [http://infocenter.sybase.com/help/topic/com.sybase.help.sqlanywhere.12.0.1/uladmin/fo-databases-s-5108100.html](http://infocenter.sybase.com/help/topic/com.sybase.help.sqlanywhere.12.0.1/uladmin/fo-databases-s-5108100.html)

如果你偷工减料并制作了无事务程序，那么可能是重构它的时候了。或者，也许 Sybase 中继服务器可以提供一些帮助。

* * *

您可能正在使用嵌入式数据库模式或某种本地连接。如果是这样，请尝试将 Server 作为单独的应用程序安装并通过 TCP/IP 网络连接到它，尽管它实际上是在同一台机器上运行的。

[http://infocenter.sybase.com/help/topic/com.sybase.help.sqlanywhere.12.0.1/dbadmin/da-dbconnections.html](http://infocenter.sybase.com/help/topic/com.sybase.help.sqlanywhere.12.0.1/dbadmin/da-dbconnections.html)

* * *

如果您使用事务，那么如果阻塞另一个事务，则可能是在大规模插入更新一个事务期间。例如，如果您使用数字 ID 字段，则有一个常见的数据库杀手陷阱来分配新的数据 ID，`Select MAX(ID) + 1 from TableName`或者它可能是其他一些锁定。[http://en.wikipedia.org/wiki/Snapshot_isolation](http://en.wikipedia.org/wiki/Snapshot_isolation)

虽然 SQL Anywhere Server [12 被告知](http://iablog.sybase.com/paulley/?p=1905)使用[版本控制引擎](https://stackoverflow.com/questions/27499/database-what-is-multiversion-concurrency-control-mvcc-and-who-supports-it)，但它可能仅在某些事务上使用它并在其他事务模式中使用阻塞，但会受到[锁定升级](https://dba.stackexchange.com/questions/12864/)的影响？或者任何地方 UltraLite 都不使用它？

好吧，无论如何[，SQL Anywhere 中的快照隔离是基于 first-writer-wins 的，这迫使 writers 阻止 writers](http://iablog.sybase.com/paulley/?p=783)。

总而言之——你有机会在数据库事务层、网络层甚至连接库中拥有锁。要监视和检测所有潜在的锁定问题，您需要全面了解给定数据库，以及可用的监视和测试工具以及如何使用它。它认为您会更容易在 Sybase 论坛和 Stack Oмerflow 的 Sybase 部分中找到帮助，而不是在 Delphi 中。我认为这个答案值得发布在[https://dba.stackexchange.com/questions/tagged/sybase](https://dba.stackexchange.com/questions/tagged/sybase)

# jscrollpane - JScrollPane 的设置值

> ID：16048014
> 
> 赞同：0
> 
> 时间：2013-04-16T22:08:50.057
> 
> 标签：jscrollpane

介绍

1.  我正在尝试设置 JScrollPane 的垂直滚动位置
2.  滚动窗格没有垂直滚动条，但我想滚动视图。
3.  我能够使用 getVerticalScrollBar.setValue(x) 在 AdjustmentListener 中成功地做到这一点。
4.  但是，我想通过常规方法而不是事件侦听器来执行此操作。
5.  当我以单独的方法编写此代码时，它只是不滚动它。

尝试了一种替代方案

1.  我尝试使用 invokeLater() 选项（将 setValue(x) 方法放在 invokeLater() 中），但它对我不起作用。
2.  我不知道为什么它不起作用，这就是为什么我没有费心发布代码（太长）。

尝试了另一种选择

1.  我创建了一个自定义 AdjustmentEvent 并尝试以编程方式触发它。
2.  我使用了方法 scrollbar.processEvent(e)。
3.  但是，我收到一条错误消息，说明“来自类型 Container 的方法 processEvent(AWTEvent) 不可见”。

我的两个问题

1.  我可以做些什么来实现以编程方式而不是在事件侦听器中移动滚动条的目标。

2.  我的第二个问题是，为什么 setValue() 方法不做它应该做的事情。我的意思是，我不知道我们使用的是什么版本的 Java，但是这个问题没有得到修复是不是有点荒谬？setValue() 方法在事件侦听器之外似乎毫无意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:21:23.173

尝试获取`ViewPort`然后移动`viewPosition`

# python - Django 教程 pub_date__year 过滤器有效，而 pub_date__second 过滤器无效

> ID：16048015
> 
> 赞同：2
> 
> 时间：2013-04-16T22:08:52.930
> 
> 标签：python, django, django-models, python-2.7

我正在学习 Django 教程，我有一个如下模型。

```
class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published') 
```

我按照给定的说明构建了一个民意调查。

```
p = Poll(question="What's new?", pub_date=timezone.now())
p.save() 
```

当我做他们给出的过滤器时，它给了我一个有效的结果。

```
>>> Poll.objects.filter(pub_date__year=2013)
[<Poll: What's new?>] 
```

但是当我尝试按秒过滤时（例如），它失败了。

```
>>> Poll.objects.filter(pub_date__second=57)
FieldError: Join on field 'pub_date' not permitted. Did you misspell 'second' for the lookup type? 
```

好的，所以也许 pub_date 字段不知何故没有有效的秒数。

```
>>> Poll.objects.get(id=1).pub_date.second
57 
```

唔。所以它确实有一个有效的秒，但不知何故我不能用它过滤。如果我继续尝试，__day 和 __month 工作正常，但 __hour、__minute 和 __second 不行。我在这里的语法中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:28:38.627

是 如果文档是最新的，那么这些字段查找（秒、小时、分钟）还没有在主分支中

[https://docs.djangoproject.com/en/dev/ref/models/querysets/#hour](https://docs.djangoproject.com/en/dev/ref/models/querysets/#hour)

> Django 开发版本中的新功能。

您正在运行哪个版本的 django？1.5？您可以在 github 上查看源代码

# hyperlink - 16 位代码显示隐藏的下载链接？

> ID：16048018
> 
> 赞同：1
> 
> 时间：2013-04-16T22:09:04.193
> 
> 标签：hyperlink, download

谁能指出我在网站上有一个表单的方向，它只包含一个文本字段，当他们输入正确的 16 位数字时会显示下载链接？

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:38:32.950

这是您可以做什么的简单示例。

您的输入字段如下：

```
<form method="post" action="">
    <input type="text" name="digits">
</form> 
```

你的PHP：

```
if($_POST['digits'] == '1234567890123456')
{
    $download_link = TRUE;
}
else
{
    $download_link = FALSE;
} 
```

然后您希望该页面上的下载链接显示在哪里：

```
if($download_link === TRUE)
{
    echo '<a href="/link/to/download/">Download Link</a>';
} 
```

# prolog - Prolog 定义我自己的运算符和算术函数

> ID：16048023
> 
> 赞同：1
> 
> 时间：2013-04-16T22:09:23.170
> 
> 标签：prolog, operator-keyword

我要声明一个！用于计算 Integer 的面函数的运算符。

我在文件中有这段代码。

```
:- arithmetic_function(!/1).

!(X,Y):-sil(X,1,Y).
sil(0,X,X):-!.
sil(N,A,X):-A1 is A*N,N1 is N-1,sil(N1,A1,X). 
```

我使用 op(500,yf,!) 来声明一个操作员。为什么这个解决方案不起作用我的意思是它看起来像算术函数没有注册我的！功能。

当我尝试5！我明白了

错误：未定义的过程：(!)/1 错误：但是，有以下定义：错误：(！)/0 错误：(！)/2 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:36:59.810

您只是忘记了 Prolog 中的算术是通过 is/2 引入的。

```
?- X is 6! + 1.
X = 721. 
```

# python - 计算多个文件（文本）中的两个值（总字数和唯一值）并在 Python 中输出一个 csv

> ID：16048025
> 
> 赞同：1
> 
> 时间：2013-04-16T22:09:29.720
> 
> 标签：python, text

我使用各种文本文件集合，我想知道各种事情，比如字数等。我有成功完成此任务的代码，现在我想在我的工作流程中引入一个脚本，它将按自己的方式工作通过一个目录并编译那里的文本文件的统​​计信息。

这是我的草稿：

```
#! /usr/bin/env python

# Get from each text file a total word count and a unique word count.
# Output a CSV with three columns: filename, total, unique.

import glob

with open (file_name) as f, open ('countfile.csv', 'w') as out :
    list_of_files = glob.glob('./*.txt)
    for file_name in list_of_files:

        ???

        out.write('{f},{t},{u}\n'.format(f =file_name, t =word_total, u =uniques) 
```

上面的问号是我想对每个文件执行的操作的占位符，代码如下：

```
# Total No. of Words        
word_list = re.split('\s+', textfile.read().lower())
word_total = len(word_list)

# Unique Words
freq_dic = {}
punctuation = re.compile(r'[.?!,":;]') 
for word in word_list:
    # remove punctuation marks
    word = punctuation.sub("", word)
    # form dictionary
    try: 
        freq_dic[word] += 1
    except: 
        freq_dic[word] = 1

uniques = len(freq_dic) 
```

我不太清楚如何将所有这些代码插入到上面的代码中。我不知何故怀疑这行不通，但我不知道如何继续。在这里的任何帮助将不胜感激。如果我能弄清楚这一点，那么我想我可能真的能够自动化很多事情。

我知道第二个代码块可能不是最漂亮的，但它尽可能紧凑，并且仍然理解它在做什么。毫无疑问，我已经开始学习 Python。

编辑澄清：

我拥有的是一个文本目录：

```
text1.txt  
text2.txt  
text3.txt 
```

我想要的是将此脚本指向该目录并让它遍历所有文本并输出具有以下形式的 CSV 文件：

```
text1, 345, 123
text2, 1025, 318
text3, 765, 245 
```

（请`.txt`注意，不需要删除文件名。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T22:15:37.843

```
files = {}
for fpath in glob.glob("*.txt"):
    with open(fpath) as f:
         fixed_text = re.sub("[^a-zA-Z'-]"," ",f.read())
    words = fixed_text.split()
    total_words = len(words)
    total_unique = len(set(words))
    files[fpath] = (total_words, total_unique)
    print "Total words:", total_words
    print "Total unique:", total_unique

with open("some_csv.csv", "w") as f:
    for fname in files:
        print >> f, "%s,%s,%s" % (fname, files[fname][0], files[fname][1]) 
```

我认为这应该工作......

# vb.net - If语句逻辑标志

> ID：16048026
> 
> 赞同：-1
> 
> 时间：2013-04-16T22:09:31.637
> 
> 标签：vb.net, if-statement, logic

所以我有两个 If 语句和一个需要使用的重载函数。我似乎无法弄清楚如何让它按我想要的方式工作的逻辑。为了更容易，我消除了从数据表中调用行和所有内容的废话。

```
If IsDBNull(zipcode) Then
  CanBeAssigned(county,state,status)
Else
  If CanBeAssigned(zipcode, status) Then 
    ''LOTS OF CODE''
  else 
    ''tiny bit of code''
  end if
End If 
```

所以这就是我所拥有的，我知道有一种方法可以让它成为我想要的……但这需要我在 ELSE 之前放置“大量代码”……这似乎太多了。

理想情况下，我希望第一个 IF 检查 'ZipCode' 是否为 Null...如果它是 > 它使用 CanBeAssigned(county,state,status) 函数，然后执行“我不想发布的大量代码” ' ...

...但是，如果 'ZipCode' 不为 NULL，则它使用 CanBeAssigned(zipcode,status)，然后继续执行 ''LOTS OF CODE THAT I DONT WANT TO POST'' 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:14:50.330

不管是什么语言，逻辑都很简单。python片段将是：

```
if isDBNULL(ZipCode):
    CanBeAssigned(county,state,status)
else:
    CanBeAssigned(Zipcode,status)
#LOTS OF CODE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:55:19.290

根据这个....

> 理想情况下，我希望第一个 IF 检查 'ZipCode' 是否为 Null ...如果是
> 
> > 它使用 CanBeAssigned(county,state,status) 函数，然后执行“我不想发布的大量代码”...
> 
> ...但是，如果“ZipCode”不为 NULL，则它使用 CanBeAssigned(zipcode,status)，然后继续执行“我不想发布的大量代码”

下面的代码块正是这样做的。

```
If IsDBNull(zipcode) Then 
  CanBeAssigned(county,state,status)
Else
  CanBeAssigned(zipcode, status)
End If
''LOTS OF CODE HERE'' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T20:45:38.967

```
Dim Flag as boolean

If IsDBNULL(zipcode) Then
  Flag = CanBeAssigned(county,state,status)
else
   Flag = CanBeAssigned(zipcode,status)
 End If

If Flag Then
  "LOTS OF CODE"
Else
 "tiny bit of code"
End If 
```

# c - 函数内部的内存分配

> ID：16048029
> 
> 赞同：0
> 
> 时间：2013-04-16T22:09:36.780
> 
> 标签：c

该函数`pba`应将低于所有其他指针平均值`pointers`的指针分配给变量。`arr``arr`

这是家庭作业 - 虽然我在实施这个方面没有问题，但我确实觉得这些东西对我来说并不完全显而易见 **我的问题是**

1.  如何**在函数内部**（而不是外部）分配内存？
2.  我的分配好吗？我注意到，如果我把这`malloc`条线改成类似的东西，`pointers = (int **)malloc(sizeof(int*)*2);`它仍然可以工作，但`pointers = (int **)malloc(sizeof(int*));`不会工作，所以我想我首先在理解尺寸应该是多少时遇到了一些问题

我调试了它，似乎一旦我离开函数就无法访问内存，这对我来说没有意义，因为它在堆内存中。

```
void main() {
    int arrSize = 6;
    int arr[6] = {8,4,2,9,5,4};
    int **pointers;
    int resSize, i;
    pointers = (int **)malloc(sizeof(int*)*arrSize);

    pba(arr, 6, pointers, &resSize);
    for (i = 0 ; i < resSize ; i++) {
        printf("%d,",*(*pointers + i));
    }
    printf("\n\n");
}

void pba(int* arr, unsigned int size, int ** pointers, int * resSize) {
    int i,j = 0,sum = 0;
    double avg;
    *resSize = 0;

    for (i = 0 ; i < size ; i++)
        sum += arr[i];

    avg = sum/(double)size;
    for (i = 0 ; i < size ; i++) {
        if (arr[i] < avg) 
            pointers[(*resSize)++] = &arr[i];       
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:15:51.070

实际上，您正在一个函数内分配堆内存，该函数称为`main`. 您可以在`pba`函数内部进行分配，但必须返回分配的值。或者作为返回值，那么`int**`可以使用，或者作为函数参数。但在这种情况下，您需要传递一个指针，`int**`而不仅仅是一个`int**`. `free()`如果不再需要数组，请不要忘记使用释放！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:17:23.427

只需使用堆分配和指向指针类型的指针...

```
void main() {
   ...
   pba(arr, 6, &pointers, &resSize);
   ...
   free(pointers);
}

void pba(int* arr, unsigned int size, int ***pointers, int * resSize) {
   ...
   *pointers = malloc(sizeof(*pointers)*size);
    avg = sum/(double)size;
    for (i = 0 ; i < size ; i++) {
        if (arr[i] < avg) 
            (*pointers)[(*resSize)++] = &arr[i];       
    }
} 
```

# objective-c - cocos2d 中的 EXC_BAD_ACCESS

> ID：16048031
> 
> 赞同：0
> 
> 时间：2013-04-16T22:09:48.807
> 
> 标签：objective-c, xcode, cocos2d-iphone

总的来说，我对 cocos2d 和 Objective-c 有点陌生，所以请多多包涵。我的代码中有一个 EXC_BAD_ACCESS 错误，所以我做了我通常做的事情，并打开了 NSZombies。这通常会吐出一些有用的东西，但这次什么也没吐出，程序也没有崩溃。

崩溃发生在我的敌人类中更新功能的第二行

```
- (void)update:(ccTime)delta{
    speed = SPEED;
    angleToTargetInRadians = -atan2((self.position.y-target.position.y),(self.position.x-target.position.x)); 
```

speed 和 angleToTargetInRadians 都是在头文件中定义的双精度值。

当第 4 个或第 5 个敌人被杀死时，就会发生崩溃。

```
- (void)die {
//give the player some points
[((AppController *)[UIApplication sharedApplication].delegate) addScore:POINTVALUE];
//make the shattered sprite
ShatteredSprite * blownUpShip = [ShatteredSprite shatterWithSprite:self piecesX:4 piecesY:4 speed:3 rotation:.02];
//add it to the layer
[self.parent addChild:blownUpShip];

//set the position and momentum and scale
[blownUpShip setVx: Vx];
[blownUpShip setVy: Vy];
[blownUpShip setScale:self.scale];
[blownUpShip setPosition:self.position];
[blownUpShip setRotation:self.rotation];

//get rid of the old ship
[self removeSelf];
}

- (void)removeSelf {
//remove self from array
NSMutableArray * enemies = [((AppController *)[UIApplication sharedApplication].delegate) Enemies];
[enemies removeObject:self];

[super die];
} 
```

[超级死] 只是

```
[self removeFromParentAndCleanup:FALSE]; 
```

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:41:30.390

`ShatteredSprite`您是否使用传递给初始化器的 ship 对象`ShatteredSprite`？

在我看来，您正在做这样的事情（请注意，这只是一个猜测）：

1.  为你的敌舰初始化一个新的 Sprite（可能是自动释放的）
2.  将此精灵作为子节点添加到节点并添加到敌人可变数组中
3.  当船被摧毁时，你初始化一个新的精灵（`ShatteredSprite`用船精灵）
4.  从父节点和敌人数组中删除船精灵 --> 此时，没有保留的引用，因此船已准备好释放。

`ShatteredShip`因此，您是否在不保留它的情况下使用您的船精灵？

您可能会从 Xcode 的 Product 菜单中找到对分析工具有用的东西。

# c# - 违反代码优先约束

> ID：16048034
> 
> 赞同：0
> 
> 时间：2013-04-16T22:09:53.160
> 
> 标签：c#, entity-framework, code-first

我在不违反外键约束的情况下删除 EF Code First（新数据库）中的对象时遇到问题。

我有三个类，Job、Ticket 和 Notes。Job 有 0,1 个票据和许多注释。我想用 db.Job.Remove(job) 删除一个作业（及其对应的票证/注释），但这会导致 Job 和 Ticket 之间的 FK 冲突。我应该如何构造/注释类？

提前致谢。
以下片段定义了对象/关系：

```
public WorkflowEntities() : base("CodeFirstWorkflow") { }

    public DbSet<Job> Job { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        base.OnModelCreating(modelBuilder);

        // Should create a 1:0,1 between Job and Ticket with ticket being optional
        modelBuilder.Entity<Ticket>()
            .HasRequired(e => e.Job)
            .WithOptional(e => e.Ticket);
    }
}

public class Job {
    public int JobId { get; set; }

    public virtual Ticket Ticket { get; set; }
    public virtual ICollection<Notes> Notes { get; set; }
}

public class Ticket {
    public int TicketId { get; set; }
    public int JobId { get; set; }

    public virtual Job Job { get; set; }
}

public class Notes {
    public int NotesId { get; set; }
    public int JobId { get; set; }

    public virtual Job Job { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:44:36.560

从`Job`侧面配置：

```
modelBuilder.Entity<Job>()
.HasMany(p => p.Ticket)
.WithRequired()
.HasForeignKey(c => c.JobId)
.WillCascadeOnDelete(true); 
```

# ios - UICollectionView 滚动到特定部分

> ID：16048042
> 
> 赞同：11
> 
> 时间：2013-04-16T22:10:55.703
> 
> 标签：ios, objective-c, uicollectionview

使用 Objective C 和 Xcode 我创建了一个`UICollectionView`包含 10 个部分的部分，并且一切正常。无论如何设置第一次显示时查看的部分？默认情况下，它显示第 0-9 节，但我希望它从第 5 节开始。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-16T22:52:27.560

你可以调用`scrollToItemAtIndexPath:atScrollPosition:animated:`你的`viewDidAppear:`方法。

您可以保留对要滚动到的单元格的引用，然后用于`indexPathForCell:`获取索引路径。

以下是您可以选择的滚动位置

```
UICollectionViewScrollPositionNone
UICollectionViewScrollPositionTop
UICollectionViewScrollPositionCenteredVertically
UICollectionViewScrollPositionBottom
UICollectionViewScrollPositionLeft
UICollectionViewScrollPositionCenteredHorizontally
UICollectionViewScrollPositionRight 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-01T21:52:08.337

如果您根据整数行和部分知道要滚动到的位置，则可以在

```
NSIndexPath indexPathForItem:inSection: 
```

创建 NSIndexPath 的方法，而不是保留对单元格的引用，然后调用 indexPathForCell:。此外，如果您希望在显示视图之前发生滚动，您可以将此代码移动到 viewWillAppear: 方法。

# php - 以 php 中的目录大小为间隔用 javascript 更新 html

> ID：16048043
> 
> 赞同：0
> 
> 时间：2013-04-16T22:10:57.243
> 
> 标签：php, javascript, intervals

我正在尝试每 3 秒计算一次目录的大小。计算成功并显示大小，但不会更新。这是目前的代码：

```
<script type='text/javascript'>
    window.onload = sizeRefresh;
    function updatesize() {  
        $dir_size = <?php 
                        $dir = "pics"; 
                        function dirSize($directory) { 
                        $size = 0; 
                        foreach(new RecursiveIteratorIterator(new RecursiveDirectoryIterator($directory)) as $file){ 
                        $size+=$file->getSize(); 
                        } 
                        echo json_encode(round($size/1024,0) . " KB<br>" . round($size/1024/1024,0) . "MB<br>" . round($size/1024/1024/1024,0) . "GB" ); 
                        } 
                        dirSize($dir) 
                        ?>;

        var hsize = document.getElementById('sizemark');
        hsize.innerHTML = $dir_size
        }

    function sizeRefresh() {
        setInterval("updatesize()", 3000);
    }
</script>
<h1 id='sizemark' > size </h1> 
```

我究竟做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:12:25.667

这仅仅是因为 php 部分代码只工作一次。相反，您应该每 3 秒（30-60 秒更好）向您的服务器发出新请求 - 重新加载页面（不是一个好主意）或使用 ajax。

# jquery - 为什么我的 jQuery 动画不起作用？

> ID：16048046
> 
> 赞同：3
> 
> 时间：2013-04-16T22:11:09.467
> 
> 标签：jquery, jquery-animate

我一直使用 jQuery animate，但这次由于某种原因失败了。它将起作用，我尝试在 closeBtn 单击后定位“$(this).animate”，它会起作用，有点。

这是我的 html 的一部分（相关部分，是的，我已经调用了 jQuery 库）

```
<div id='lightBox' style="opacity:0;">
    <div id='closeBtn'>
    </div>
    <div id='lightBoxContent'>
    </div><!--lightBoxContent-->
</div><!--lightBox--> 
```

这是我的jQuery

```
$(document).ready(function()
{ 
    $('#quoteBtn').click(function()
    {
        $('#lightBox').animate({
            opacity:'1',
            height:'560px'
        }, 300, function() {
            $('#lightBoxContent').html(output);
        });

        $('#closeBtn').click(function()
        {
            //alert('click');
            $('#lightBox').animate({
                opacity:'0'
            }, 300, function() {
                //alert('first animation complete');
                $('#lightBox').animate({
                    height:'0px'
                }, 300, function() {
                    //alert('second animation complete');
                });
            });
        });
    });
}); 
```

和我的css（这并不是真正的要求，但为了安全起见，我将其包括在内

```
#lightBox {
    width:780px;
    background-color:white;
    position:fixed;
    margin-left:-400px;
    margin-top:-300px;
    left:50%;
    top:50%;
    z-index:9999;
    -webkit-box-shadow:  0px 0px 200px 50px ;
    box-shadow:  0px 0px 200px 50px ;
    padding:20px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T22:19:17.197

当#quoteBtn 被点击时，您想要移到`$('#closeBtn').click(function()`被调用的 click() 函数之外。因为它永远不会被调用，因为你不能在点击内部点击。

这是它的样子：

```
$(document).ready(function()
{ 
    $('#quoteBtn').click(function()
    {
        $('#lightBox').animate({
            opacity:'1',
            height:'560px'
        }, 300, function() {
            $('#lightBoxContent').html(output);
        });    
    });

    $('#closeBtn').click(function()
    {
        //alert('click');
        $('#lightBox').animate({
            opacity:'0'
        }, 300, function() {
            //alert('first animation complete');
            $('#lightBox').animate({
                height:'0px'
            }, 300, function() {
                //alert('second animation complete');
            });
        });
    });

}); 
```

**更新：**好的……这是第 2 部分。

您要设置`$('#lightBox').animate({`为`$('#lightBox').stop().animate({`它将继续“关闭”动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:13:20.077

如果我错了，请纠正我，但请尝试更改：

```
position: fixed; 
```

到`position: absolute;`或`position: relative;`

# maps - 将 DirectionsRenderer 的输出发送到文本区域

> ID：16048053
> 
> 赞同：0
> 
> 时间：2013-04-16T22:11:46.673
> 
> 标签：maps

谁能帮我将 DirectionsRenderer 对象的输出发送到 textarea

我已经尝试了代码来查找两个地方之间的行车路线。我已经让它工作了。但是，我希望在页面上的文本区域中显示方向。

我有以下代码。请帮我。

```
<?php
$s= $_REQUEST['source'].", Pune";
$d= $_REQUEST['destination'].", Pune";

?>

    <!DOCTYPE html>

    <html> 
    <head> 
       <meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
       <title>Google Maps API v3 Directions Example</title> 
       <script type="text/javascript" 
           src="http://maps.google.com/maps/api/js?sensor=false"></script>
    </head> 
    <body style="font-family: Arial; font-size: 12px;"> 
       <div style="width: 600px;">
         <div id="map" style="width: 280px; height: 400px; float: left;"></div> 
         <div id="panel" style="width: 300px; float: right;"></div> 
   </div>
       <textarea cols="100" rows="10" id="abc"/>
       </textarea>
        <script type="text/javascript">     

        var source1 = "<?php echo $s; ?>";
        var dest1 = "<?php echo $d; ?>";
     var directionsService = new google.maps.DirectionsService();
     var directionsDisplay = new google.maps.DirectionsRenderer();

     var map = new google.maps.Map(document.getElementById('map'), {
       zoom:7,
       mapTypeId: google.maps.MapTypeId.ROADMAP
     });

     directionsDisplay.setMap(map);
     directionsDisplay.setPanel(document.getElementById('panel'));

     var request = {
       origin: source1, 
       destination: dest1,
       travelMode: google.maps.DirectionsTravelMode.DRIVING
     };

     directionsService.route(request, function(response, status) {
       if (status == google.maps.DirectionsStatus.OK) {

     directionsDisplay.setDirections(response);

       }
     });
   </script> 
    </body> 
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T14:51:45.373

获取路线后，您需要使用 setPanel。setPanel 将方向文本写入 div。

```
e.g.

  var MapRenderer = new google.maps.DirectionsRenderer();
            MapRenderer.setMap(map);
            MapRenderer.setDirections(objRoute);
            //Clear the div.
            document.getElementById("oUserPoints").innerHTML = "";
            //Display the route as text in the div.
            MapRenderer.setPanel(oUserPoints); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-05T18:55:26.427

我用 a`<div id="content">`来显示结果。在脚本中我替换了这个：

```
directionsDisplay.setPanel(document.getElementById('panel')); 
```

和：

```
directionsDisplay.setPanel(document.getElementById('content')); 
```

它奏效了。

# python - Pyside 或 PyQt 支持 Qt 5.0 和 Qt Quick 2

> ID：16048056
> 
> 赞同：3
> 
> 时间：2013-04-16T22:12:16.650
> 
> 标签：python, qt, pyqt, qml, pyside

上一个版本 Pyside 或 PyQt 是否支持 Qt 5 和 Qt Quick？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T23:15:24.203

最新版本的 PyQt（4.10？）适用于 Qt5。它不*支持*Qt Quick 2，AFAIK。我不相信 PySide 也支持。

# php - Laravel - 字段列表中的未知列

> ID：16048064
> 
> 赞同：7
> 
> 时间：2013-04-16T22:12:38.070
> 
> 标签：php, laravel, laravel-3

伙计们，我在将记录保存到数据库时遇到问题。据我了解该错误，似乎表中不存在“id_purchase”。但确实如此。我正在使用的代码如下：

```
<?php

class Purchproducts_Controller extends Base_Controller {

    public $restful = true;    

    public function get_index()
    {
        $purchases = Purchproduct::where('id_hostel', '=', Session::get('id_hostel'))->get();
        $response = array();
        foreach($purchases as $purch){
            $response[] = $purch->attributes;
        }
        return json_encode($response);
    }    

    public function post_create()
    {
        $data = Input::json();
        $purchase = Purchproduct::create(
            array(
                'id_hostel' => Session::get('id_hostel'),
                'id_products' => $data->id_products,
                'id_purchase,' => $data->id_purchases,
                'qty' => $data->qty
            )
        );

        return json_encode($purchase->attributes);
    }  
} 
```

错误画面：

```
Unhandled Exception
Message:

SQLSTATE[42S22]: Column not found: 1054 Unknown column 'id_purchase,' in 'field list'

SQL: INSERT INTO `ehm_purchproducts` (`id_hostel`, `id_products`, `id_purchase,`, `qty`, `updated_at`, `created_at`) VALUES (?, ?, ?, ?, ?, ?)

Bindings: array (
  0 => 1,
  1 => '2',
  2 => 2,
  3 => '12',
  4 => '2013-04-16 22:00:32',
  5 => '2013-04-16 22:00:32',
)

Location:

/home/pablo/htdocs/insdev/laravel/laravel/database/connection.php on line 263

Stack Trace:

#0 /home/pablo/htdocs/insdev/laravel/laravel/database/connection.php(183): Laravel\Database\Connection->execute('INSERT INTO `eh...', Array)
#1 /home/pablo/htdocs/insdev/laravel/laravel/database/query.php(823): Laravel\Database\Connection->query('INSERT INTO `eh...', Array)
#2 [internal function]: Laravel\Database\Query->insert_get_id(Array, 'id')
#3 /home/pablo/htdocs/insdev/laravel/laravel/database/eloquent/query.php(283): call_user_func_array(Array, Array)
#4 /home/pablo/htdocs/insdev/laravel/laravel/database/eloquent/model.php(390): Laravel\Database\Eloquent\Query->__call('insert_get_id', Array)
#5 /home/pablo/htdocs/insdev/laravel/laravel/database/eloquent/model.php(390): Laravel\Database\Eloquent\Query->insert_get_id(Array, 'id')
#6 /home/pablo/htdocs/insdev/laravel/laravel/database/eloquent/model.php(205): Laravel\Database\Eloquent\Model->save()
#7 /home/pablo/htdocs/insdev/laravel/application/controllers/purchproducts.php(27): Laravel\Database\Eloquent\Model::create(Array)
#8 [internal function]: Purchproducts_Controller->post_create()
#9 /home/pablo/htdocs/insdev/laravel/laravel/routing/controller.php(325): call_user_func_array(Array, Array)
#10 /home/pablo/htdocs/insdev/laravel/laravel/routing/controller.php(285): Laravel\Routing\Controller->response('create', Array)
#11 /home/pablo/htdocs/insdev/laravel/laravel/routing/controller.php(165): Laravel\Routing\Controller->execute('create', Array)
#12 /home/pablo/htdocs/insdev/laravel/laravel/routing/route.php(153): Laravel\Routing\Controller::call('purchproducts@c...', Array)
#13 /home/pablo/htdocs/insdev/laravel/laravel/routing/route.php(124): Laravel\Routing\Route->response()
#14 /home/pablo/htdocs/insdev/laravel/laravel/laravel.php(167): Laravel\Routing\Route->call()
#15 /home/pablo/htdocs/insdev/laravel/public/index.php(34): require('/home/pablo/htd...')
#16 {main} 
```

表结构：

```
CREATE TABLE IF NOT EXISTS `ehm_purchproducts` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `id_hostel` int(11) NOT NULL,
  `id_products` int(11) NOT NULL,
  `id_purchase` int(11) NOT NULL,
  `recibo` varchar(200) COLLATE utf8_spanish_ci NOT NULL,
  `qty` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci AUTO_INCREMENT=1 ; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-16T22:22:03.707

```
'id_purchase,' => $data->id_purchases, 
```

那里是逗号，这就是为什么它会抛出错误找不到字段。

# sql - 为什么我的嵌套查询语句不起作用？

> ID：16048065
> 
> 赞同：1
> 
> 时间：2013-04-16T22:12:51.710
> 
> 标签：sql, sql-server-2008, nested-queries

以下是我试图回答的提示：

编写嵌套语句以列出与 Larry Smith 有相同工作的员工的名字和姓氏。

以下是员工表列：

EMPLOYEE(Emp_Num, Emp_Lname, Emp_Fname,Emp_Initial, Emp_HireDate, Job_Code)

以下是我的嵌套查询：

```
select emp_fname, emp_lname
from EMPLOYEE
where job_code =
(select job_code
from employee
where emp_fname = 'larry'
and emp_lname = 'smith'); 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T22:14:36.603

你应该使用`IN`not `=`：

```
select emp_fname, emp_lname
from EMPLOYEE
where job_code IN
  (select job_code
   from employee
   where emp_fname = 'larry'
     and emp_lname = 'smith'); 
```

原因是您正在将值与子查询返回的集合进行比较。

# php - Datamapper 比较字符串 SQL 和 PHP

> ID：16048069
> 
> 赞同：0
> 
> 时间：2013-04-16T22:13:03.730
> 
> 标签：php, codeigniter, codeigniter-datamapper

我正在尝试使用 CodeIgniter 和 Data Mapper 将两个字符串与 PHP 和 MySQL 进行比较，我找到了`similar_text`PHP 的函数并在此函数中使用它：

```
$v = new Vendedor();
$v -> get();
foreach ($v as $vv) {
    $n = $vv -> name . " " . $vv -> lasta_name1 . " " . $vv -> last_name2;
    $vv -> sorteo -> get();
    similar_text($n, $name, $sim);
    if ($sim > 20) {
        $vv -> boleto -> get();
        $ven[$i] = array(
            'id' => $vv -> id, 
            'nombre' => $n, 
            'telefono' => $vv -> phone, 
            'mail' => $vv -> email,  
        );
        $i++;
    }
}

return $ven; 
```

有人相当于`similar_text`Data Mapper 吗？太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:01:10.040

在 PHP 的函数中实现的算法`similar_text()`在 MySQL 中不可用。mysql 中有[soundex](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex)可以与如下表达式一起使用：

```
... where name sounds like "some input" 
```

在 sql 中，所以在你的 PHP 代码中，这看起来像：

```
$v = new Vendedor();
$v->where('CONCAT(name, " ", lasta_name1, " ", lasta_name2) sounds like ', $name);
// ... 
```

但 soundex 并不真正适用于非英文文本。您也可以尝试各种 levenshtein 实现，请参见[this](https://stackoverflow.com/questions/12617348/mysql-levenshtein)或[this](http://www.jisaacks.com/find-similar-products-in-mysql-using-levenshtein-distance)。

这两者的性能仍然很差，因为数据库仍然必须比较每一行，所以你在这方面并没有真正赢得太多，但是你改变了相似性算法，这可能不行。

如果您决定保留该`similar_text()`功能，则可以在数组上实现分页，`array_slice()`最好只创建一次订单并将信息保存在某个缓存中（memcached、纯文件、apc 缓存...），以便使用此输入的后续调用可以无需重新计算订单即可提供服务，因此速度更快。我想象这样的事情（缓存部分是可选的）：

```
function get_similar_vevendors($name, $offset, $limit) {
    // Imaginary cache library, 
    // it would return the previously cached search results under a key 
    // created from the name
    if (Cache::has('similar_vevendors_'.$name)) {
        $ven = Cache::get('similar_vevendors_'.$name)
    } else {
        // your orignal code here, filling $ven array filled with similar Vendedor's
        // ...
        // saving the created similar vevendors array in cache
        Cache::store('similar_vevendors_'.$name, $ven);
    }

    // return both the count of the results for pagination 
    // and a acting as the current "page" 
    return array(count($ven), array_slice($ven, $offset, $limit));
} 
```

这样，您可以使用与在 SQL 中使用的数组相同的参数进行分页，并且可以使用以下内容初始化 CI 的分页库：

```
// $offset is coming from the links generated by the pager
list($total_rows, $paged_vens) = get_similar_vevendors($name, $offset, $items_per_page);
$this->pagination->initialize(array(
    'per_page'   => $items_per_page,
    'total_rows' => $total_rows,
)); 
```

# git - 当 git clone ssh://user@server 不工作时，为什么 git clone user@server 工作？

> ID：16048071
> 
> 赞同：2
> 
> 时间：2013-04-16T22:13:04.787
> 
> 标签：git, ssh

我是 git 新手。我在具有 SSH 访问权限的服务器上创建了一个裸存储库。如果我尝试将它克隆到我的工作站上，我会得到两个不同的结果：

```
% git clone ssh://me@example.com:git/foo.git

Cloning into 'foo'...
ssh: example.com:git: no address associated with name
fatal: Could not read from remote repository. 
```

但是，如果我删除`ssh://`，它可以正常工作：

```
% git clone me@example.com:git/foo.git 
```

根据 Pro Git book 这些应该是相同的。

是什么赋予了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T22:20:32.657

*   第一个命令`git clone ssh://`遵循标准[`SSH URI syntax`](https://www.iana.org/assignments/uri-schemes/prov/ssh)，因此您需要提供绝对路径。

    例如试试这个（假设用户的主目录`me`位于`/home/me`）：

    ```
    git clone ssh://me@example.com/home/me/git/foo.git 
    ```

    我猜这也应该有效：

    ```
    git clone ssh://me@example.com/~/git/foo.git 
    ```

*   第二种语法：`git clone me@example.com:git/foo.git`允许使用来自用户主目录的相对路径。

# import - 远程neo4j数据库：导入大量数据

> ID：16048073
> 
> 赞同：3
> 
> 时间：2013-04-16T22:13:10.480
> 
> 标签：import, neo4j

我需要将大约一百万个节点和大约两倍的它们之间的关系导入到远程 neo4j 数据库中。对我来说重要的是：性能

我发现[java-rest-binding](https://github.com/neo4j/java-rest-binding)似乎提供了我所需要的。然而：

*   太慢了（大约 1000 个节点/秒，即使远程数据库实际上在我的本地机器上）
*   它有问题，即如果我尝试一次添加超过 900 个节点，它只会挂起提交批处理操作

我怎样才能达到我需要的速度？而且，为什么 java-rest-binding 不起作用/速度慢？

（我想避免自己处理 HTTP 请求等，正如[文档中所建议的那样](http://docs.neo4j.org/chunked/milestone/rest-api-batch-ops.html)）

我很高兴发布代码或更多详细信息。就告诉我嘛！

非常感谢你的帮助！

南达卢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:59:21.490

我也做了一些插入测试，我得到的最大值（没有进行很多精细优化）大约是 500 个节点，10 个属性 + 500 个关系/秒

我不确定您是否可以使用 REST 接口超越已有的（1000 个节点/秒）。您可能会尝试使用可能比 REST API 更快的自定义扩展，前提是如果您无法关闭数据库并使用 BatchInserter（顺便说一句，这是非常非常快的），则要加载的数据是本地的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:38:22.590

您的远程数据库设置如何？`Neo4j`您是否在其他代码（例如 Tomcat）中托管嵌入式实例？或者它只是一个`Neo4j`独立的数据库？

无论哪种方式，您都可以编写 Java 代码以在包含实际数据目录的机器上运行，并使用普通`Neo4j`API 对其进行操作。这通常非常快，并且允许您更好地控制事务管理等事务。请注意，这将要求您的`Neo4j`数据库关闭，因为 2 个独立的 Java 进程不能同时操作数据库。

# iphone - 具有应用内购买功能的应用会记住检索到的产品信息吗？

> ID：16048079
> 
> 赞同：0
> 
> 时间：2013-04-16T22:13:24.570
> 
> 标签：iphone, ios, ipad, in-app-purchase

我们正在开发一款带有应用内购买功能的应用。是否可以存储检索到的产品信息，以便在应用再次加载时数据显示得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:50:44.790

如果 Apple 决定在没有通知的情况下更改每一层的价格（就像几个月前所做的那样）怎么办？我认为您应该缓存您的产品信息以立即显示您的产品，但始终启动异步调用以检索新数据。

# javascript - jquery检测文本框值的变化不是基于用户输入

> ID：16048084
> 
> 赞同：26
> 
> 时间：2013-04-16T22:13:37.903
> 
> 标签：javascript, jquery

假设您的页面上有一个简单的文本框和按钮。单击按钮将更新文本框值：

HTML：

```
<input type="text" id="myText" val="" />
<input type="button" id="myBtn" value="Change TextBox Value" /> 
```

jQuery：

```
$("#myBtn").on('click', function() {
   $("#myText").val('adsf');
}) 
```

我想为文本框的更改事件添加一个事件侦听器，如下所示：

```
$('#myText').on('change', function(){
    alert('Changed!')
}); 
```

当您单击按钮时不会触发该警报，但是当您手动更改文本框值并将焦点移出它时会触发它。

我知道您可以添加`$("#myText").trigger('change')`到按钮的 onclick 事件中，但我希望仅通过向文本框添加事件侦听器来完成此操作。

[jsfiddle](http://jsfiddle.net/xZcAr/)

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-16T22:22:46.693

不支持此类事件。您唯一可以尝试的是设置间隔或超时以检查值是否已更改（使用*数据*存储临时值）：

```
var $myText = $("#myText");

$myText.data("value", $myText.val());

setInterval(function() {
    var data = $myText.data("value"),
        val = $myText.val();

    if (data !== val) {
        $myText.data("value", val);
        alert("changed");
    }
}, 100); 
```

**演示：http:** [//jsfiddle.net/xZcAr/1/](http://jsfiddle.net/xZcAr/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T22:53:56.590

为什么不像这样单击按钮时强制手动事件 -

```
$('#myText').on('change',function(e){
    alert('Changed!');
});

$("#myBtn").on('click', function() {
    $("#myText").val('adsf');
    $("#myText").change();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T11:47:32.680

您需要简单地使用`keyup`功能：

```
$( "#myText").keyup(function(){
   alert($(this).val());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T22:16:48.933

您需要连接两个处理程序。要重用处理程序，您可以将其提取到命名函数：

```
function showChanged(){
    alert('Changed!')
}

$("#myBtn").on('click', showChanged);
$("#myText").on('change', showChanged); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-12T08:12:06.657

你可以做这样的事情。而不是监听输入字段，而是监听同时更新的 div 上的更改。

```
function trigger(){
setTimeout(function(){ 
document.getElementsByName("Thing")[0].value = 'hello'
document.getElementById('myDiv').innerHTML = document.getElementsByName("Thing")[0].value 

}, 3000);
}

trigger()
document.getElementById("myDiv").addEventListener('DOMSubtreeModified', (e)=>{
  console.log(e.target.innerHTML)

});
```

```
<input type="text" name="Thing" value="" />
<div style="display:none;" id="myDiv"></div> 
```

# button - directx9 按钮和directx9 gui

> ID：16048085
> 
> 赞同：0
> 
> 时间：2013-04-16T22:13:44.747
> 
> 标签：button, user-interface, directx, directx-9

我正在寻找具有按钮功能的directx 中的预定义类或结构。

我想编写一个小游戏，我了解到，使用已经存在的类和函数非常有用。但是，directx 的文档太大了，我找不到我需要的东西。

现在我正在寻找按钮类或 GUI。

如果我自己写的话会花很多时间，而且我想创建一个游戏而不是一个GUI。所以我正在寻找一个已经存在的 GUI，我只需要包含它。

我正在使用 c++ directx9 Visual Studio 2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:05:27.703

Native DirectX SDK 不提供 GUI 功能，但您可以查看 DXUT（如果您使用的是 DirectX9，那没关系，DXUT 自 DirectX 11 起已弃用），它是 Microsoft 开发的一个框架，旨在简化流程以建立一个 DirectX 项目，它包含 GUI 控件，如按钮。

如果你不介意前景，你也可以使用经典的 win32 API 来建立你的控制:)。

# architecture - Modelsim 无法识别包括“case...when”在内的架构

> ID：16048086
> 
> 赞同：0
> 
> 时间：2013-04-16T22:13:48.880
> 
> 标签：architecture, vhdl, modelsim

我对 Modelsim 很陌生，而且我不断从中得到这个“错误”。基本上我用 vhdl 编写了一个计数器：

```
library IEEE;
use IEEE.std_logic_1164.all;
use IEEE.std_logic_arith.all;
use IEEE.std_logic_unsigned.all;

entity Contatore16bit is
 port (
  CLK: in std_logic;
  RESET: in std_logic;
  LOAD: in std_logic;
  UP_DOWN: in std_logic;
  ENABLE: in std_logic;
  USCITA: out unsigned(15 downto 0) );
end Contatore16bit;

architecture Arch of Contatore16bit is
 signal temp_value, next_value: unsigned(15 downto 0);
 begin
  process (CLK)
   begin
    if CLK'Event and CLK='1' then
     if RESET='1' then
      temp_value <= (others => '0');
     elsif ENABLE='1' then
      temp_value <= next_value;
     end if;
    end if;
   --CASE UP_DOWN IS
    --WHEN  '0'  =>  next_value <= temp_value + conv_unsigned(1, 16);
    --WHEN  '1'  =>  next_value <= temp_value - conv_unsigned(1, 16);
   --END CASE;
   --CASE LOAD IS
    --WHEN  '0'  =>  USCITA <= conv_unsigned(0, 16);
    --WHEN  '1'  =>  USCITA <= temp_value;
   --END CASE;
  end process;
end Arch; 
```

我可以用这段代码毫无问题地开始模拟。但是，如果我对“案例”行进行注释，modelsim 将不再识别架构并会给我错误：

> 错误：(vsim-3173) 实体 '...Contatore\simulation\modelsim\rtl_work.contatore16bit' 没有架构。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T09:19:11.837

那不是我得到的错误。我的信息更丰富：

```
** Error: test.vhd(28): (vcom-1339) Case statement choices cover only 2 out of 9 cases.
** Error: test.vhd(32): (vcom-1339) Case statement choices cover only 2 out of 9 cases. 
```

这是因为`std_logic`除了 '1' 和 '0' 之外还有许多其他值 - 特别是：

*   `U`- 未初始化
*   `X`- 矛盾的
*   `Z`- 高阻抗
*   `W`- 弱高阻抗
*   `H`- 弱上拉
*   `L`- 弱下拉
*   `-`- 不在乎
*   `1`- 强高
*   `0`- 强低

VHDL 的规则之一是你必须说出你想对每个可能的输入值做什么。一种方法是使用

```
when others => 
```

如果您不希望其他输入特别发生任何事情，则可以使用该`null`语句来说明。

然后，合成器会将其优化为您指定的值。

# akka - 让 Akka 了解 Play 的 logback 配置

> ID：16048087
> 
> 赞同：7
> 
> 时间：2013-04-16T22:14:01.933
> 
> 标签：akka, slf4j, logback, playframework-2.1

如何让 Akka 了解 Play 的 logback 配置（application-logger.xml）？
在我的情况下，它被完全忽略：

### 日志仅打印到标准输出。我希望它被记录到 application-logger.xml 中定义的 File-Appender

### 如果我将 application-logger.xml 重命名为 logback.xml 并没有什么不同。

# 演员等级：

```
class Dispatcher extends Actor with ActorLogging {
    // prints to stdout ONLY:
    log.error("[akka-logger] dispatch started...")
} 
```

# conf/application.conf：

```
play {
  akka {

    #log-config-on-start = on
    loggers = ["akka.event.slf4j.Slf4jLogger"]
    event-handlers = ["akka.event.slf4j.Slf4jEventHandler"]    
    loglevel = DEBUG

    # and so on...
} 
```

# conf/application-logger.xml

```
<configuration>

<appender name="FILE" class="ch.qos.logback.core.FileAppender">
    <file>${application.home}/logs/application.log</file>
    <encoder>
        <pattern>%date - [%level] - from %logger in %thread %n%message%n%xException%n</ pattern>
    </encoder>
</appender>
<!-- Using akka.event.slf4j.EventHandler does NOT make a difference here: -->
<logger name="akka.event.slf4j.Slf4jLogger" level="ERROR" additivity="false">
    <appender-ref ref="FILE"/>
</logger>

<logger name="play" level="ERROR" additivity="false">
    <appender-ref ref="FILE"/>
</logger>

<logger name="application" level="ERROR" additivity="false">
    <appender-ref ref="FILE"/>
</logger>

<root level="ERROR">
    <appender-ref ref="STDOUT"/>
    <appender-ref ref="FILE"/>
</root>

</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-29T15:30:21.243

我有同样的问题。我正在使用 play 2.2.1（也使用 2.2.2 测试）和升级版的 akka 2.2.3（但它也适用于 play 附带的版本）。我还应该注意，我使用的是 Java 而不是 Scala。这就是我所做的。

应用程序.conf：

```
 akka {
      loggers = ["akka.event.slf4j.Slf4jLogger"]
      loglevel = "DEBUG"
    } 
```

在我的 logger.xml 中看起来像这样：

```
<configuration>

  <conversionRule conversionWord="coloredLevel" converterClass="play.api.Logger$ColoredLevel" />

  <appender name="FILE" class="ch.qos.logback.core.FileAppender">
     <file>${application.home}/logs/applicationmax.log</file>
     <encoder>
       <pattern>%date ---- [%level] --  %X{akkaSource} -- from %logger in %thread %n%message%n%xException%n</pattern>
     </encoder>
   </appender>

  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>%coloredLevel %logger{15} - %message%n%xException{5}</pattern>
    </encoder>
  </appender>

  <logger name="play" level="DEBUG" />
  <logger name="application" level="DEBUG" />
    <!-- use the package names of classes for specific loggers  -->
  <logger name="actor" level="DEBUG" />

  <root level="ERROR">
    <appender-ref ref="STDOUT" />
    <appender-ref ref="FILE" />
  </root>

</configuration> 
```

需要注意的关键是我使用演员所在的根包名称作为我的记录器。你可以像你喜欢的那样具体，即 com.actors 或 com.actors.someactors 等...

您可以在 play-framework 组中的这个 google 组线程上看到更多信息：

[让 Akka 了解 Play 的 logback 配置](https://groups.google.com/forum/#!topic/play-framework/E-d0oxa6QP4)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T09:43:33.107

play 用于 logback 的默认文件名是`logger.xml`- 见[参考](http://www.playframework.com/documentation/2.0/SettingsLogger)。您可能还希望将根级别从错误更改为调试，以确保您在根级别获得任何日志消息。

# c# - 返回到单击通知区域图标之前选择的窗口

> ID：16048088
> 
> 赞同：1
> 
> 时间：2013-04-16T22:14:03.717
> 
> 标签：c#, winforms, notifyicon, notification-area

我已经构建了一个具有通知区域图标的应用程序，单击该图标时会显示一个专为单击而设计的表单，之后用户可以返回到他们之前所做的事情。

目前，我正在使用`this.Hide()`删除表单（当表单中的所需事件发生时，或者当表单为 时`Deactivated`），但是当我这样做时，Windows 将用户焦点设置到任务栏。在单击通知区域图标之前，如何让它将用户焦点返回到他们所在的窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:08:24.270

与其在事后试图弄清楚这一点，不如在应用第一次获得焦点时一开始就确定它。换句话说，越早弄清楚越好。

显而易见的解决方案是处理`WM_SETFOCUS`或`WM_ACTIVATE`消息，将句柄作为`lParam`. 不幸的是，这只适用于同一线程中的窗口；否则，`lParam`将是`NULL`。

所以你需要使用[`WM_ACTIVATEAPP`](http://msdn.microsoft.com/en-us/library/ms632614.aspx)，它将拥有被停用窗口的线程的标识符作为`lParam`. 获得线程标识符后，使用该[`GetGUIThreadInfo`](http://msdn.microsoft.com/en-us/library/ms633506)函数确定该线程中的活动窗口。无论哪个进程拥有窗口，这都有效，因此它不受上面讨论的`WM_SETFOCUS`和的限制`WM_ACTIVATE`。

跟踪此窗口句柄，并在完成后简单地将焦点恢复到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:00:13.797

我设法找出方法。我使用了以下代码：

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
private static extern int SetForegroundWindow(IntPtr hwnd);

[System.Runtime.InteropServices.DllImport("user32.dll")]
static extern IntPtr GetForegroundWindow();

[System.Runtime.InteropServices.DllImport("user32.dll", CharSet = System.Runtime.InteropServices.CharSet.Auto, SetLastError = true, ExactSpelling = true)]
public static extern IntPtr GetWindow(IntPtr hwnd, int wFlag);

private void switchToLast() {
    IntPtr thisWindow = GetForegroundWindow();
    IntPtr lastWindow = GetWindow(thisWindow, 3);
    SetForegroundWindow(lastWindow);
    this.Hide();
} 
```

我发现了很多关于这个问题的参考资料，这就是我到目前为止所拥有的。这个和我发现的其他示例之间的主要区别是行`GetWindow(thisWindow, 3)`，在其他示例中第二个是 2，我已将其更改为 3。我相信这是因为将其设置为 2 是获取指向 TaskBar 的指针。

# java - JSON 工作的开始 - 获取值

> ID：16048090
> 
> 赞同：0
> 
> 时间：2013-04-16T22:14:21.127
> 
> 标签：java, json, double

我对 JSON 没有太多经验或完全没有经验。我正在使用官方的 JSON-in-Java 包，它有点工作......不是真的。

使用这样的 JSON：

```
{
    "versions": [
        {
            "name": "1.4"
        }
    ]
} 
```

来了：

> 未找到 JSONObject["versions.name"]。

我试过“versions.name”、“name”等键。

这是我使用的代码（我知道它有效......）：

```
TheJSONObject.getDouble("key"); 
```

# javascript - 将二维数组从 ruby 传递给 javascript

> ID：16048091
> 
> 赞同：0
> 
> 时间：2013-04-16T22:14:36.060
> 
> 标签：javascript, ruby-on-rails, ruby, arrays

我想将二维数组从 ruby​​ 传递给 javascript。

我目前在视图中有这个 id：

```
 <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable(<%= @statistics %>);

        var options = {
          title: 'My Daily Activities'
        };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
<div id="chart_div" style="width: 900px; height: 500px;"></div> 
```

@statistics 是来自控制器的二维数组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T22:39:23.673

您正在寻找的方法是`#to_json`.

```
var data = google.visualization.arrayToDataTable(<%= @statistics.to_json %>); 
```

例如：

```
[["abc", 123], ["def", 456]].to_json # => [["abc",123],["def",456]]
[[1, 2], [3, 4], [5, 6]].to_json # => [[1,2],[3,4],[5,6]] 
```

如果您的`@statistics`变量不是普通的 2D 数组，则在将其输出到 JSON 之前可能需要进行额外处理。

# mysql - Delphi - 在运行时创建 MySQL 数据库

> ID：16048092
> 
> 赞同：4
> 
> 时间：2013-04-16T22:14:36.037
> 
> 标签：mysql, sql, delphi, runtime

我有一个连接到 MySQL 数据库的 delphi 应用程序，但是，我想为我的最终用户创建一个简单的方法来实现 MySQL 数据库。我考虑在我的应用程序中创建一个按钮，用户可以按下该按钮来删除 scehma 的任何当前实例，并使用我的应用程序运行所需的正确表和列创建一个新模式。

我已经编写了创建新数据库的代码。如下：

```
CREATE SCHEMA IF NOT EXISTS fakeschema;   
USE fakeschema;  
CREATE TABLE table1  
(IDtable1 int(11) PRIMARY KEY NOT NULL AUTO_INCREMENT,  
Line1 varchar(45),  
Line2 varchar(45)); 
```

代码在 MySQL 中正常运行，但是在执行代码时收到 SQL 语法错误。我得到：

> > 'USE fakeschema; 附近的 SQL 语法错误；CREATE TABLE table1 (IDtable1 int(11) PRIMARY KEY NO'

我正在使用`ADOConnection`链接到数据源。按下按钮后，我正在编写连接字符串。我正在使用一个`ADOQuery`来执行 SQL 代码。

这是我用来连接数据库的代码片段：

```
ADOC.ConnectionString := 'PROVIDER = MSDASQL; DRIVER={MySQL ODBC 3.51 Driver};
SERVER=localhost; Data Source=faketest; DATABASE=fakeschema; USER ID=root;
PASSWORD=pass; OPTION=3;';
ADOC.DefaultDatabase := 'fakeschema';  
ADOC.Connected := True; 
```

我是否使用了错误的工具/方法？我是 MySQL 新手，目前正在学习 Delphi。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T01:58:32.247

正如我在其中一条评论中提到的，问题是试图在单个 TAdoQuery 组件中 执行多个*单独的 SQL 语句。*

在理想情况下，您将拥有一个组件，例如 MyDAC，它有一个脚本组件，您可以使用它来代替 TAdoQuery（MyDAC 也会给您带来其他好处，例如不必通过 ODBC 连接）。我不知道是否有任何免费的 MySQL 组件有脚本组件。

另一种方法是您可以创建一个脚本文件（例如 createFakeSchema.sql）并通过命令行执行它。例如：

createFakeSchema.sql：

```
CREATE SCHEMA IF NOT EXISTS fakeschema;   
USE fakeschema;  
CREATE TABLE table1  
(IDtable1 int(11) PRIMARY KEY NOT NULL AUTO_INCREMENT,  
Line1 varchar(45),  
Line2 varchar(45)); 
```

和示例源代码：

```
procedure TfrmMain.DoExecuteScriptFile;
var
  cmd: string;
  KeepOpen: Boolean;
begin
  KeepOpen := True;

  // option to automatically close window once execution is done
  // for releasing you would not want it kept open, but handy for debugging
  if KeepOpen then
    cmd := '/k '
  else
    cmd := '/c ';

  cmd := cmd + Format(' mysql -uroot -proot -D%s < "%s"', ['FakeSchema', 'createFakeSchema.sql']);
  ShellExecute(handle,'open', 'cmd.exe', Pchar(cmd), nil, SW_SHOW );
end; 
```

这样，您可以在外部某处创建脚本文件，自己通过 MySQL 对其进行测试，然后当您知道您的*脚本*正在工作时，您可以通过您的程序运行它。如果要在执行时隐藏命令窗口，请将 ShellExecute 中的 SW_SHOW 更改为 SW_HIDE。这样，您甚至根本不需要任何组件 - 只需在路径中访问 mysql.exe 或在 cmd 语句中包含完整路径。

这是在 MySQL 5.1 中完成的，所以希望适用于 3.5...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:55:21.867

如果您查看 MySQL 3.x 的[文档](http://dev.mysql.com/doc/refman/4.1/en/create-table.html)，并向下滚动页面`CREATE TABLE`，您将在其中一个评论帖子中看到一个示例，该示例似乎是正确的语法。它似乎更像这样（当然，未经测试）：

```
CREATE TABLE IF NOT EXISTS Table1 (
  IDtable1 int(11) NOT NULL AUTO_INCREMENT,  
  Line1 varchar(45),  
  Line2 varchar(45)
  PRIMARY KEY (IDTable1)
); 
```

这是我在[DevArticles找到的另一个示例](http://www.devarticles.com/c/a/Delphi-Kylix/Using-Delphi-with-MySQL/2/)

```
CREATE TABLE `articles` (
  `aID` int(4) NOT NULL auto_increment,
  `auth` varchar(100) NOT NULL default '',
  `title` varchar(100) NOT NULL default '',
  `article_body` text NOT NULL,
  `date_published` date NOT NULL default '0000-00-00',
  PRIMARY KEY  (`aID`)
) 
```

不过，您可能需要重新考虑您的策略。如果用户不小心点击了`Reset Database`按钮并删除*了他们的所有数据*，这可能会给您带来一些问题（可能是合法问题，具体取决于您居住的地方和涉及的数据）。:-)

考虑备份数据然后做一个`TRUNCATE`表可能会更好，如果出现问题，您可以从备份中恢复。这将允许重用现有模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:49:01.013

如果您收到类似的 MySQL 错误消息

> ' *（引用）* '**附近**的SQL 语法错误

 *您总是必须查看*引用*部分**之前**的代码。

 *在这种特殊情况下`CREATE SCHEMA IF NOT EXISTS fakeschema;`

文档也很[清楚](http://dev.mysql.com/doc/refman/5.0/en/create-database.html)

> **从 MySQL 5.0.2**开始，CREATE SCHEMA 是 CREATE DATABASE 的同义词。

所以你不能使用这个*同义词*，因为你的 MySQL 服务器（版本低于 5.0.2）或者在这种情况下 OD​​BC 驱动程序不知道这一点。

这应该摆脱**当前**的错误消息

```
CREATE DATABASE IF NOT EXISTS fakeschema;   
USE fakeschema;  
CREATE TABLE table1(
  IDtable1 int(11) PRIMARY KEY NOT NULL AUTO_INCREMENT,  
  Line1    varchar(45),  
  Line2    varchar(45)
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-25T19:07:47.533

不涉及 cmd.exe 的解决方案（基于@Jason）是使用 mysql *source*命令：

```
cmd := '-u USER_NAME -pUSER_PASSWORD DB_NAME -e "source createFakeSchema.sql"';
ShellExecute(handle, 'open', 'mysql.exe', Pchar(cmd), 'PATH_TO_MYSQL', SW_SHOW); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-04T13:53:18.967

我努力寻找如何创建数据库。我正在使用“Zeos”：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ShellAPI, ZAbstractConnection, ZConnection, DB,
  ZAbstractRODataset, ZAbstractDataset, ZDataset;

type
  TForm1 = class(TForm)
    btn1: TButton;
    ZConnection1: TZConnection;
    ZQuery: TZQuery;
    btn2: TButton;
    procedure btn1Click(Sender: TObject);
    procedure btn2Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.btn1Click(Sender: TObject);
begin
  ZConnection1.Protocol := 'mysql-5';
  ZConnection1.Database := '';
  ZConnection1.User := 'root';
  ZConnection1.Password := 'root';
  ZConnection1.Connect;
end;

procedure TForm1.btn2Click(Sender: TObject);
var
  vSQL : string;
begin
  ZQuery.Close;
  ZQuery.SQL.Clear;
  vSQL := 'CREATE DATABASE IF NOT EXISTS `test`';
  ZQuery.SQL.Add(vSQL);
  ZQuery.ExecSQL;
end;

end. 
```

我希望我可以帮助任何人；

最好的祝福**

# vb.net - 从类更改 VB.net 表单上的文本框内容

> ID：16048094
> 
> 赞同：0
> 
> 时间：2013-04-16T22:14:38.720
> 
> 标签：vb.net, winforms

这似乎是一个微不足道的问题，但我无法让它工作，并且在过去的 30 分钟里一直在兜圈子:-(

我有一个带有文本框的表单和一个位于单独类中的对象处理程序。我想用对象处理程序的输出更新文本框的内容。

我正在尝试以这种方式访问​​它：

```
formName.textBoxName.Text = value 
```

但什么也没发生。但是，我可以读取同一表单上按钮的状态，所以我很困惑。看来我可以从我的班级访问一些表单控件但只能读取？

我知道我正在从我的班级获得输出，因为我可以在调试窗口中查看它。

我试过更改文本框的修饰符属性，没有任何区别——我确信这是我犯的一个愚蠢的错误，但我就是看不到它。

如何从另一个类更改我的 textBox 值？

这是我的代码：

类：Summarizer.vb

```
If frm_Settings.btn_NextSection.Enabled = True Then
    Console.WriteLine("Boo!")
    frm_Settings.txt_NextSection.Text = "Boo!"
End If 
```

形式：frm_Settings 由（除其他外）一个文本框 txt_NextSection 和一个按钮 btn_NextSection 组成。按钮的值被正确读取，但无法设置文本框内容。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:11:41.740

我会尽力给出答案，但很多事情还不清楚。
在执行您的代码时`frm_Settings`，*可能会*声明并初始化该类的一个实例`Summarizer`。
在这一点上，传递给类的构造函数，对当前实例的引用`frm_Settings`

```
....
Dim sz = new Summarizer(Me)
sz.ExecuteSomeMethod()
..... 
```

`Summarizer`现在，以这种方式为类添加一个构造函数

```
Public Class Summarizer

   ' This is the local reference to the frm_Setting instance passed in the constructor'
   Dim callerInstance As frm_Settings

   ' This constructor receives the instance of the frm_Settings class 
   'that has created the instance of Summarizer'
   Public Sub New(ByVal caller As frm_Settings)
       ' Set the local reference to the instance passed in'
       callerInstance = caller
   End Sub 

   .....

End Class 
```

现在，在需要更新文本框的处理程序中，可以将代码更改为

```
' Use the instance of the frm_Settings that has created the instance of this class'
If callerInstance.btn_NextSection.Enabled = True Then
    Console.WriteLine("Boo!")
    callerInstance.txt_NextSection.Text = "Boo!"
End If 
```

# ios - iOS：获取当前对象的真实位置

> ID：16048095
> 
> 赞同：0
> 
> 时间：2013-04-16T22:14:46.370
> 
> 标签：ios, objective-c, uiview, uipangesturerecognizer

使用 Pan GestureComponent，我试图获取拖动的当前对象的第一个位置。为此，我做了：

首先，我存储状态开始时按钮的位置。

```
- (IBAction)handlePan:(UIPanGestureRecognizer *)recognizer{

    CGPoint startlocation;

// Get Position X and Y
if (recognizer.state == UIGestureRecognizerStateBegan) {
    startlocation = [recognizer locationInView:self.view];
    NSLog(@"%f" @"-" @"%f", startlocation.x , startlocation.y);
} 
```

当用户释放按钮（状态结束）时，我想首先将按钮设置回来。

```
// Quand on lache le composant : Action de fin
if (recognizer.state == UIGestureRecognizerStateEnded)
{     
NSLog(@"%f" @"-" @"%f", startlocation.x , startlocation.y); 
recognizer.view.center = startLocation;  
} 
```

NS日志：

状态开始：

```
76.000000-158.000000 
```

状态结束：

```
0.000000--1.998666 
```

我有个问题。我的按钮在我的屏幕外面。不知道为什么 startLocation 的 X 和 Y 被修改了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:40:18.860

你在谈论两件不同的事情：

1.  触发平移手势的触摸位置`recognizer locationInView`
2.  视图的位置（你不说你是使用框架原点还是中心）

目前尚不清楚您要做什么，但您需要决定，您是否通过平移手势平移移动目标视图：

```
if (recognizer.state == UIGestureRecognizerStateBegan) {
   startLocation = targetView.center;
}

CGPoint translation = [recognizer translationInView:self.view];

CGPoint newCenter = startLocation;
newCenter.x += translation.x;
newCenter.y += translation.y;

targetView.center = newCenter; 
```

或者您正在尝试将目标视图捕捉到平移手势位置

```
targetView.center = [recognizer locationInView:self.view]; 
```

这都是假设目标视图是 self.view 的直接子视图...

# python-2.7 - Python 错误：线程化 Matplotlib (Pyplot) 绘图 - x 和 y 第一维不同

> ID：16048096
> 
> 赞同：1
> 
> 时间：2013-04-16T22:14:48.857
> 
> 标签：python-2.7, matplotlib, pickle

这是多线程 python 脚本 (threading.thread) 的一部分，通过队列传输数据，当尝试绘制在 matplotlib 中使用 pyplot 收集的数据时出现错误。

整个脚本在以前的版本中工作；唯一的变化是我分别使用 pickle.dump 和 pickle.load 存储和加载数据数组。在这个调试版本中，没有启用加载。

这是失败的相关代码，由包含线程分解：

在主循环（线程）中：

```
elif kbcheck == 'p':
                    print "I KNOW YOU TYPED P" # Debug to see if plotting is triggered.
                    PLOTFLAGQ.put(1) 
```

在数据处理线程中：

```
self.PLOTQL = [self.RAL, self.THD_avgL, self.VacL,
                       self.IacL, self.PacL, self.VdcL,
                       self.IdcL, self.PdcL, self.tempL]
if not self.PLOTFLAGQ.empty():
                self.plotflag = self.PLOTFLAGQ.get()
                self.PLOTQ.put(self.PLOTQL) 
```

在绘图线程中：

```
if not self.PLOTQ.empty():
                (self.RAL, self.THD_avgL, self.VacL, self.IacL,
                 self.PacL, self.VdcL, self.IdcL, self.PdcL,
                 self.TempL) = self.PLOTQ.get()
self.XaxisL = []
                for i in range(len(self.VacL)):
                    self.XaxisL.append(i+1)
self.fig = pyplot.figure()
self.gs = gridspec.GridSpec(6,1, height_ratios = [1,2,2,2,2,2])
self.sT = pyplot.subplot(self.gs[0])
self.sT.yaxis.set_major_locator(pyplot.MaxNLocator(5))
self.sV = pyplot.subplot(self.gs[1])
self.sV.yaxis.set_major_locator(pyplot.MaxNLocator(10))
self.Va = self.sV.plot(self.XaxisL,self.VacL,
                                       '-b',label = 'Voltage (AC)') 
```

这是调试信息：

```
17
Here is the info in the Plot Thread
the length of VacL is: 17
[250.119, 250.156, 250.19, 250.193, 250.206, 250.158, 250.107, 250.103, 250.159, 250.156, 250.146, 250.093, 250.084, 250.095, 250.134, 250.0
35, 249.994]

the length of the x axis is: 17
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17] 
```

上面的输出显示了采样的计数 (17)，然后是 Vac 列表数组及其长度，然后是 x 轴数组（源自其他值的长度）。

这是错误：

```
Exception in thread Thread-5:
Traceback (most recent call last):
  File "C:\Python27\lib\threading.py", line 552, in __bootstrap_inner
    self.run()
  File "C:\Projects\PythonScripts\Matthew_Threading_2_v0.3.3db.py", line 273, in run
    self.Va = self.sV.plot(self.XaxisL,self.VacL,"-b",label = "Voltage AC")
  File "C:\Python27\lib\site-packages\matplotlib\axes.py", line 3848, in plot
    for line in self._get_lines(*args, **kwargs):
  File "C:\Python27\lib\site-packages\matplotlib\axes.py", line 323, in _grab_next_args
    for seg in self._plot_args(remaining, kwargs):
  File "C:\Python27\lib\site-packages\matplotlib\axes.py", line 300, in _plot_args
    x, y = self._xy_from_xy(x, y)
  File "C:\Python27\lib\site-packages\matplotlib\axes.py", line 240, in _xy_from_xy
    raise ValueError("x and y must have same first dimension")
ValueError: x and y must have same first dimension 
```

我已经重写了整个程序两次，并且只重写了保存线程（似乎破坏绘图的部分）两次并且无法弄清楚是什么导致了这个错误。

如果有人可以帮助我，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:08:51.173

用以下代码替换您的绘图命令：

```
try:
    self.Va = self.sV.plot(self.XaxisL,self.VacL,'-b',label = 'Voltage (AC)')
except ValueError:
    print len(self.XaxisL), len(self.VacL)
    print self.XaxisL, self.VacL 
```

看看你得到了什么。我怀疑你有比赛条件。

# linux - 更改核心转储的位置

> ID：16048101
> 
> 赞同：41
> 
> 时间：2013-04-16T22:15:06.653
> 
> 标签：linux, crash-dumps, coredump, recovery

我想更改核心转储文件的默认位置，以便每次生成核心转储时都会转到该目录。此外，是否可以在此位置以崩溃文件的名称保存转储文件？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-16T22:29:19.910

是的。您可以更改`/proc/sys/kernel/core_pattern`以定义用于生成核心文件的路径名。有关更多信息，请参阅[`man core`](http://man7.org/linux/man-pages/man5/core.5.html)

例子：

```
echo '/tmp/core_%e.%p' | sudo tee /proc/sys/kernel/core_pattern    # `tee' instead of > so that
                                                                   # opening happens in the
                                                                   # elevated process 
```

将导致所有未来的核心转储生成`/tmp`并命名`core_[program].[pid]`

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-06-28T16:30:25.270

在按照已接受答案中的说明进行操作之前，最好检查 的内容`/proc/sys/kernel/core_pattern`以查看 Redhat abrt 系统是否正在使用中。

```
-> cat /proc/sys/kernel/core_pattern
|/usr/libexec/abrt-hook-ccpp %s %c %p %u %g %t e 
```

如果它正在使用中，那么您已经有了一个非常广泛的方案来管理您想要在覆盖它之前了解的核心文件。

简而言之，abrt：

1.  将核心文件放在这里：`/var/spool/abrt/`
2.  有一个以命令开头的 gui`abrt-gui`
3.  使用有关失败进程的附加信息来扩充核心文件。
4.  用这个文件配置：`/etc/abrt/abrt-action-save-package-data.conf`

使用它的一个常见障碍是在配置文件中更改这一行：

```
ProcessUnpackaged = no 
```

将其更改为 yes 以从您的自制进程中捕获核心文件，否则它将仅从包管理器安装的程序中捕获核心文件。

[编辑回答如何使用 coredump] 要检查核心转储，我这样做：

```
cd /var/spool/abrt/XXXXXXX
gdb $(cat executable) coredump 
```

可能有更好的方法，但是 gdb 对我很有帮助，所以我没有寻找其他方法。只需将 XXXXXXX 替换为包含您的核心转储文件的文件夹即可。gdb 命令已准备好剪切和粘贴。

参考：

[红帽书](https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/ch-abrt.html)

[CentOS 论坛](https://www.centos.org/forums/viewtopic.php?t=5962)

# perl - 使用 bash 或 perl 对包含浮点数的 .csv 文件的列进行平均

> ID：16048109
> 
> 赞同：1
> 
> 时间：2013-04-16T22:15:44.507
> 
> 标签：perl, bash, parsing, csv, command-line-interface

我有几千个文件，其中包含以下数据：

```
bash$ cat somefile0001.csv
col1;col2;col3; ..... ;col10
2.34;0.19;6.40; ..... ;4.20
3.8;2.45;2.20; ..... ;5.09E+003 
```

基本上，它是一个 10x301 的 feild .csv 文件，其中包含顶部由分号分隔的头文件（为简洁起见，不包括孔的东西）。

所以我的目标是将科学记数法更改为十进制数，将所有列平均在一起，然后将列标题与列平均值一起输出到一个新的 csv 文件中，然后再到数千个文件中。

我已经有工作代码来解析所有文件，我似乎无法获得让平均工作的部分

```
 #!/bin/bash
 filename=csvfile.csv
 i=1
      runningsum=0
      echo ""> $filename.tmp.$i
      tmptrnfrm=$(cut -f$i -d ';' $filename)
      tmpfilehold=$filename.tmp.$i
      echo "$tmptrnfrm" >> $tmpfilehold
      trnsfrmcount=0

      for j in $(cat $tmpfilehold)
      do
           if [[ $trnsfrmcount = 0 ]]]
           then
                echo -n "Iteration $trnsfrmcount:"
                echo "$j" #>> $tmpfilehold
                trnsfrmcount=$[$trnsfrmcount+1]
           elif [[ $trnsfrmcount < 301 ]]
           then
                if [[ $(echo $j | sed 's/[0-9].[0-9][0-9]E+[0-9]/arbitrarystring/' ) == arbitrarystring ]]
                then
                     tempj=$(printf "%0f" $j)
                     runningsum=$(echo '$runningsum + $tempj' | bc)
                     echo "$j" #>> tmpfilehold
                     trnsfrmcount=$[$trnsfrmcount+1]
                else
                     echo "preruns: $runningsum"
                     runningsum=$(echo '$runningsum + $j' | bc)
                     echo "$j," #>> $tmpfilehold
                     echo "the running sum is: $runningsum"
                     trnsfrmcount=$[$trnsfrmcount+1]
                fi
           fi
      done
 totalz=$(echo '$runningsum / 300' | bc)
 echo "here is the total"
 echo "$totalz"

 exit 0 
```

我知道这有点乱，我在标准输出上放了很多额外的字符串，看看运行时发生了什么。我想在 perl 中执行此操作，但我只是在学习并知道这可以使用 bash 来完成，而且我无法访问 CSV 模块，也无法安装它（否则它可能真的很容易）。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:51:44.967

这是一个基本的 perl 脚本，它应该可以满足您的需求。我没有测试过。

```
#!/usr/bin/perl 
use strict;
use warnings;

my $infile = shift;
my $outfile = shift || $infile . ".new";

my $header = "";
my $count  = 0;
my @sums   = ();
my @means  = ();

open my $fin, '<', $infile or die $!;

$header = <$fin>;
@sums = map { 0 } split ";", $header;    # to initialize @sums;

while ( my $line = <$fin> ) {
    chomp $line;

    my @fields = split ";", $line;
    for ( my $i = 0 ; $i < scalar @fields ; $i++ ) {

        # use sprintf to convert to decimal notation
        # if we think we are using scientific notation
        if ( $fields[$i] =~ m/E/i ) {
            $sums[$i] += sprintf( "%.2f", $fields[$i] );
        } else {
            $sums[$i] += $fields[$i];
        }
    }

    $count++;
}

close $fin;

exit 1 if $count == 0;

# calculate averages
@means = map { sprintf( "%.2f", $_ / $count ) } @sums;

# intentionally left out writing to a file
print $header;
print join( ";", @means ) . "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-04T08:38:57.067

[Tabulator](https://github.com/stefan-schroedl/tabulator) is a set of unix command line tools to work with delimited files that have header lines. Here is an example to compute the average of the first three columns:

`tblred -d';' -su -c'avg1_col=avg(col1),avg_col2=avg(col2)' somefile00001.csv`

produces

```
avg1_col;avg_col2
3.07;1.32 
```

# version-control - TFS 2010 - VersionControl.config 无效且无法加载

> ID：16048111
> 
> 赞同：22
> 
> 时间：2013-04-16T22:15:47.567
> 
> 标签：version-control, config

最近，我们在使用 TFS 2010 时遇到了一个奇怪的问题。我们花了几天时间才弄明白。只是想分享我对可能对其他人有帮助的问题的知识。

它以前可以正常工作大约 2 年。但突然之间，构建开始失败并出现以下错误：

> 一次在此解决方案中构建项目。要启用并行构建，请添加“/m”开关。MSBUILD：错误 MSB4017：由于意外的记录器故障，构建意外停止。Microsoft.Build.Exceptions.InternalLoggerException：由于意外的记录器故障，构建意外停止。---> Microsoft.TeamFoundation.VersionControl.Client.VersionControlException：缓存文件 C:\Windows\system32\config\systemprofile\AppData\Local\Microsoft\Team Foundation\3.0\Cache\VersionControl.config 无效，不能加载。请更正或删除文件。---> System.NullReferenceException：对象引用未设置为对象的实例。在 Microsoft.TeamFoundation.VersionControl.Client.InternalCacheLoader.LoadConfig（InternalCache currentCache，

删除错误消息中提到的 Cache 文件夹的内容没有帮助。

当时有两件事巧合：

*   服务器在驱动器 C 中的可用空间不足：

*   我们的支持人员正在安装 Windows 更新，包括 TFS 的 Service Pack 1。

我们的一些项目是 32 位的，例如 Silverlight，它必须是 32 位的，而不是 64 位的。但是，我们的 TFS 服务器是 64 位的。为了正确编译项目，构建定义应指定“Auto”（与 TFS 服务器一样运行 64 位编译）或强制 32 位编译的“X86”。

那些是 X86 的那些突然开始失败并出现上述错误。

解决方案：

显然，Cache 文件夹还有另一个位置：C:\Windows\SysWOW64\config\systemprofile\AppData\Local\Microsoft\Team Foundation\3.0\Cache

我们删除了该文件夹的内容，一切都开始正常工作。

顺便说一句：它与 /m 开关无关。我们也尝试过，但没有帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-01-05T10:22:58.417

在磁盘空间不足警告后，我遇到了同样的问题。

删除/重命名文件 C:\Users\user.name\AppData\Local\Microsoft\Team Foundation\4.0\Cache\VersionControl.config 解决了我的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-30T14:47:30.803

清除所有缓存文件夹：

*   `%WINDIR%\System32\Config\Systemprofile\AppData\Local\Microsoft\Team Foundation\3.0\Cache`
*   `%WINDIR%\SysWOW64\Config\Systemprofile\AppData\Local\Microsoft\Team Foundation\3.0\Cache`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-08T12:48:26.257

Team Explorer 显示为已连接到 TFS。但是“源代码管理资源管理器”被标记为断开连接。

删除“C:\Users\user.name\AppData\Local\Microsoft\Team Foundation\4.0\Cache\VersionControl.config”也解决了这个问题。（谢谢）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-23T23:51:37.140

在@mhu 暗示`Cache`应该清除 TFS 目录之后，我完全搜索了在我的构建服务器上有一个 Cache 子文件夹的“Team Foundation”文件夹。

然后我创建了一个删除它们的批处理文件。运行此脚本后，我的构建工作。

文件名：`ClearTFSCache.bat` 文件内容：

```
@echo+

@echo Removing TFS Cache Folder #1
@RD /S /Q "C:\Users\AAA_USERNAME\AppData\Local\Microsoft\Team Foundation\4.0\Cache"

@echo Removing TFS Cache Folder #2
@RD /S /Q "C:\Windows\ServiceProfiles\BBB_SERVICEACCOUNT\AppData\Local\Microsoft\Team Foundation\4.0\Cache"

@pause 
```

这里应该替换两个变量：-

1.  `AAA_USERNAME`用于当前用户的用户名（基于手动登录服务器）。
2.  `BBB_SERVICEACCOUNT`用于运行 TFS 构建服务的帐户，可通过 Team Foundation Server 管理控制台访问：

    [![如何找出 TFS 缓存在哪里](https://i.stack.imgur.com/Eaqen.png)](https://i.stack.imgur.com/Eaqen.png)

    就我而言，它是“网络服务”。

# iphone - 移动Safari忽略navigator.geolocation？

> ID：16048113
> 
> 赞同：2
> 
> 时间：2013-04-16T22:15:48.960
> 
> 标签：iphone, geolocation, mobile-safari

我有一个简单的电话：

```
navigator.geolocation.getCurrentPosition(function(position){ etc. }); 
```

它在桌面浏览器和安卓手机上运行良好。在全新的 iPhone 5 (iOS6.1.3) 上进行测试，移动 safari 似乎忽略了这个调用。它不会提示位置许可。我已经在我的 MacBook 上的 Web Inspector 中进行了设置，并在通话时立即中断。它命中 getCurrentPosition() 并且没有任何反应。

在谷歌地图网站上测试了手机，它确实提示我获得位置许可。

我一定是在做一些非常愚蠢的事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:40:27.810

问题是没有设置`timeout`通话`getCurrentPosition`。如果未定义，移动 safari 会一直超时。愚蠢的部分是我没有看到这个，因为我没有刷新网络检查器，所以没有看到任何控制台日志。

# javascript - 我可以使用新脚本处理 JSON 结果吗？

> ID：16048121
> 
> 赞同：1
> 
> 时间：2013-04-16T22:16:12.033
> 
> 标签：javascript, jquery

我目前正在同一个脚本中处理我的 getJSON 结果。现在我想添加上一个和下一个按钮来获取这些记录。getJSON 请求会有所不同，但结果的处理将是相同的。所以我想我的问题是我可以将 getJSON 的结果发送到另一个脚本进行处理吗？如何处理？

这是我的获取和第一行处理。

```
$.getJSON("loadloads.php", function(data){

$("#LoadNumber").val(data[0].value.LoadNumber); 
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:19:14.663

您可以添加一个通用命名函数并将引用传递给该方法：

```
var jsonhandler = function(data){
    $("#LoadNumber").val(data[0].value.LoadNumber); 
};

$.getJSON("loadloads.php", jsonhandler); 
```

# ios - 出现“使用当前位置”权限弹出窗口时，Appium 和 Selenium 无法连接

> ID：16048123
> 
> 赞同：5
> 
> 时间：2013-04-16T22:16:17.740
> 
> 标签：ios, selenium, appium

我正在尝试使用 Appium 自动化 iOS 测试。我有一个应用程序需要用户位置并在首次启动时请求位置权限。当我尝试将 selenium 连接到全新安装时，出现弹出窗口时它会失败。当我手动接受弹出窗口时，Seleium 和 Appium 连接成功，并且测试能够继续。

这是服务器输出的副本：

```
error: Instruments did not launch successfully, failing session
error: Failed to start an Appium session, err was: Instruments did not launch successfully--please check your app paths or bundle IDs and try again
info: Responding to client with error: {"status":6,"value":{"message":"A session is either terminated or not started","origValue":"Instruments did not launch successfully--please check your app paths or bundle IDs and try again"},"sessionId":"faccc84b-fa8e-4137-ad77-f0c79d09b045"}
POST /wd/hub/session 500 13605ms - 270
debug: - - - "POST /wd/hub/session HTTP/1.1" 500 270 "-" "Ruby"
info: Clearing out appium devices 
```

和硒输出的副本：

```
Selenium::WebDriver::Error::NoSuchDriverError:
       A session is either terminated or not started 
```

我正在使用以下命令初始化 Selenium：

```
@driver = Selenium::WebDriver.for(:remote, :desired_capabilities => capabilities, :url => server_url) 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-21T16:23:57.793

对此有一个 appium 更新。只需添加始终接受这些警报的功能，以避免应用程序中的任何位置出现故障。Java 示例：

```
 capabilities.setCapability("autoAcceptAlerts", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T20:53:00.950

我相信这是 Instruments 中的一个已知问题。当定位服务在应用程序启动后大约 8 秒内弹出时，UIAutomation 出于某种原因不会处理弹出窗口。有关更多信息，请参阅[Appium 邮件列表上的讨论。](https://groups.google.com/forum/?fromgroups=#!searchin/appium-discuss/location/appium-discuss/491folM-Qaw/AyaLym1V81IJ)

迄今为止提出的唯一解决方案是将位置服务检查延迟到应用启动后约 8 秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-16T16:35:56.777

我遇到过同样的问题。为了让它工作，我向 Appium 添加了 2 个功能

```
 caps = {
        "locationServicesAuthorized" => true
        "bundleId" => "com.domain.myproject"
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-07T20:49:28.040

您也可以尝试：

启动您的应用程序，手动接受位置，然后将文件从路径复制到您的测试文件夹。

路径 - /Users/your_username/Library/Application Support/iPhone Simulator/7.0/Library/Caches/locationd/clients.plist

然后每次开始测试之前，将该文件复制回该位置，您将看不到位置弹出窗口。

BR。亚历克斯。

# css - 绝对 div 宽度 90% - xpx

> ID：16048130
> 
> 赞同：0
> 
> 时间：2013-04-16T22:17:12.850
> 
> 标签：css, margin, css-position

我有 2 个绝对 div。

```
left: 10%;
position: absolute;
width: x px;
z-index: 1;
margin-left: -540px; 
```

和

```
left: 10%;
z-index: 0;
width: <some big number>px;
position: absolute;
margin-left: -199px; 
```

div A 在 div B 之上，是网站的标志。

div B 在 div A 之下，作为一个无限的背景（一些很大的数字）。

使用该解决方案，我可以沿着一些大数字大小的背景水平滚动。

我需要这样的东西：

```
left: 10%;
z-index: 0;
width: 90% + 199px;
position: absolute;
margin-left: -199px; 
```

有没有人有这个问题的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:19:28.783

如果您可以`calc()`使用 CSS3，则可以使用。

就像是：

```
width: calc(90% + 199px) 
```

检查[caniuse](http://caniuse.com/calc)是否支持浏览器以及是否需要供应商前缀。

# sql - 如何获取 Oracle 中 SQL 语句的逻辑读取？

> ID：16048132
> 
> 赞同：1
> 
> 时间：2013-04-16T22:17:21.893
> 
> 标签：sql, oracle

我正在查看 SQL Developer 中的 Autotrace 输出，我可以看到物理 IO，但看不到逻辑 IO。这是在 Google 中返回大量有关 Oracle Tuning 信息的搜索之一，但似乎没有直接回答这个问题。

感谢您的输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T13:38:11.873

您正在寻找的是“一致获取”+“db 块获取”，它们共同总结了所有逻辑 IO。

[http://www.dba-oracle.com/t_difference_consistent_db_block_gets_physical_reads.htm](http://www.dba-oracle.com/t_difference_consistent_db_block_gets_physical_reads.htm)

# responsive-design - 如何使标题响应？

> ID：16048134
> 
> 赞同：0
> 
> 时间：2013-04-16T22:17:25.210
> 
> 标签：responsive-design, susy-compass

我有以下 HTML：

```
<div class='layout-wrap'>
  <div class='mod-header'>
    <a class='logo' href="#"></a>
    <nav>
      <a class="action" href="#">Join now</a>
      <ul class="tour">
        <li><a href="#">item 1</a></li>
        <li><a href="#">item 2</a></li>
        <li><a href="#">item 3</a></li>
      </ul>
      <ul class="search">
        <li><a class="find" href="#">search</a></li>
      </ul>
    </nav>
  </div>
</div> 
```

也可以看看：

[http://jsfiddle.net/mulderp/fZ8cW/](http://jsfiddle.net/mulderp/fZ8cW/)

和 CSS：

```
.logo {
    text-indent: -9999px;
    float: left;
    width: 16rem;
}

nav {
   float: right;
   display: block;
}

.mod-header nav a {
   float: left;
} 
```

什么是最小响应式布局解决方案（例如使用 Susy）：

*   a.logo 始终可见（也适用于小屏幕）
*   a.action 始终可见（也适用于小屏幕）
*   a.find 始终可见
*   ul.tour 对于小屏幕是隐藏的

不确定这是否容易实现，但知道是否会很有帮助。

**编辑：**

更窄的问题：如何防止小问题右侧部分的导航中断，并隐藏 ul.tour ？

![导航中断](https://i.stack.imgur.com/82hBJ.png)

苏西萨斯：

```
.mod-header
  @include container
  clear: both
  border: 2px red solid
  +rem('height', 70px)

  .logo
    text-indent: -9999px
    float: left
    +rem('width', 120px)
    +rem('height', 29px)
    +rem('margin', 20px 0)
    border: 2px blue solid
    +data-uri-bg('logo.png')

  nav
    @include span-columns(4,12)
    border: 2px blue solid
    float: right
    +rem('margin', 20px 0)
    +rem('height', 29px)

    ul
      li
        float: left
        +rem('margin', 0 8px) 
```

# jquery - jquery手风琴中的iframe

> ID：16048136
> 
> 赞同：0
> 
> 时间：2013-04-16T22:17:38.537
> 
> 标签：jquery, html

我已经向 jquery 手风琴写了这样的信息：

```
<div id="accordion">
  <h3>Gauk geriausią pasiūlymą dujų įrangos montavimui!</h3>
  <div>
    <p>
<iframe src="http://www.citavicius.lt/egas/forma/index.php" width="500" height="240" frameborder="0">
    </p>
  </div>
  <h3>Paskaičiuok tiksliau</h3>
  <div>
    <p>
    Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet
    purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor
    velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In
    suscipit faucibus urna.
    </p>
  </div> 
```

但是然后我运行文件，它只显示了带有 iframe 的手风琴的第一项，但没有显示手风琴的第二项。

如何解决这个问题，查看所有项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T22:21:56.520

您是否尝试过关闭 iframe？我知道这是一个虚假的答案，但这可能是原因:)

# java - exportet jar 文件不会访问资源

> ID：16048139
> 
> 赞同：0
> 
> 时间：2013-04-16T22:17:43.117
> 
> 标签：java, jar, resources

当我试图打开它时，它找不到资源。所以，我已经尝试使用[该解决方案](https://stackoverflow.com/questions/15960747/exception-when-running-exported-program-but-not-in-eclipse)，但我遇到了另一个问题：

```
Exception in thread "main" java.lang.Error: Unresolved compilation
problem: Cannot make a static reference to the non-static method
getClass() from the type Object
        at Resources.getMainBG(Resources.java:21)
        at Tetris.<init>(Tetris.java:21)
        at Main.main(Main.java:5) 
```

当前代码：

```
import java.awt.*;
import java.io.File;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;

public class Resources 
{
    // this class import the breaks's photos into an image array named "images"
    private static Image[] images = new Image[7];
    private static Image[] BG = new Image[3]; // 1=frame,2=pane,3=nextPane

    public static Image getImage(int color){
        if(images[color]==null){
            try{images[color] = new ImageIcon(getClass().getResource("images/block" + color + ".png")).getImage();}
            catch (Exception e){e.printStackTrace();System.exit(1);}}
        return images[color];}

    public static Image getMainBG() {
        if (BG[0] == null)
            BG[0] = new ImageIcon(getClass().getResource("images/MainBG.png")).getImage();
        return BG[0];}

    public static Image getPaneBG(){
        if (BG[1] == null)
            BG[1] = new ImageIcon(getClass().getResource("images/PaneBG.png")).getImage();
        return BG[1];}

    public static Image getNextBG() {
        if (BG[2] == null)
            BG[2] = new ImageIcon(getClass().getResource("images/NextBG.png")).getImage();
        return BG[2];}
} 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:20:07.420

异常说明了一切 - 导出代码时甚至没有编译代码。此方法无效：

```
public static Image getMainBG() {
    if (BG[0] == null)
        BG[0] = new ImageIcon(getClass().getResource("images/MainBG.png")).getImage();
    return BG[0];
} 
```

你不能`getClass()`在静态方法中调用 unqualified 。当然，您也可以改用`Resources.class`。

请注意，您不应该接近异常：您应该在开始打包*之前检查您的代码是否编译。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:20:53.240

试试这个：

```
Image i = javax.imageio.ImageIO.read(getClass().getResourceAsStream("/images/x.png")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T22:21:36.960

答案在例外中。你应该打电话

```
Resources.class.getResource(...) 
```

代替

```
getClass().getResource(...) 
```

# cakephp-2.1 - cakephp Auth->登录不起作用

> ID：16048144
> 
> 赞同：0
> 
> 时间：2013-04-16T22:18:01.893
> 
> 标签：cakephp-2.1

我从 cakebook 中得到了这个例子，但它不起作用，这是很多人的情况。这里的问题是，无论我发送什么数据，这都会通过登录。我的意思是我的数据库中只有一条记录用户名：ric 和密码：123。

如果我以 asdasdasd/asdasdasdasd 的形式提交，它就像已注册一样通过。我的模型：

```
<?php
    App::uses('AuthComponent', 'Controller/Component');

    class User extends AppModel {
        public $name = 'Users';
        public $useTable = "rma_web_users";

        public $validate = array(
            'username' => array(
                'required' => array(
                    'rule' => array('notEmpty'),
                    'message' => 'A username is required'
                )
            ),
            'password' => array(
                'required' => array(
                    'rule' => array('notEmpty'),
                    'message' => 'A password is required'
                )
            )
        );
    }
?> 
```

我的控制器：

```
<?php

class UsersController extends AppController {

    public $name = 'Users';
    public $uses = array('User');

    public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('add');
    }

    public function login() {
        if ($this->request->is('post')) {
            if ($this->Auth->login()) {
                $this->redirect($this->Auth->redirect());
            } else {
                $this->Session->setFlash(__('Invalid username or password, try again'));
            }
        }
    }

    public function logout() {
        $this->redirect($this->Auth->logout());
    }
}
?> 
```

我的应用控制器：

```
class AppController extends Controller {
    public $components = array(
        'Session',
        'Auth' => array(
            'loginRedirect' => array('controller' => 'home', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'home', 'action' => 'index')
        )
    );

    public function beforeFilter() {
        $this->Auth->allow('index', 'view');
    }
} 
```

和我的登录视图：

```
<div class="users_login">
    <p class='rma_login gray_label'>RMA Login System</p>
    <div class="form_container">
        <?php echo $this->Session->flash('auth'); ?>
        <?php echo $this->Form->create('User'); ?>
        <?php
            echo $this->Form->input('username',array(
                'label' => false,
                'type' => 'text',
                'value' =>'Email',
                'class' => 'entrada',
                'onFocus' => "if(this.value=='Email') this.value=''",
                'onBlur' => "if(this.value=='') this.value='Email'")
            );
            echo $this->Form->input('password',array(
                'label' => false,
                'type' => 'password',
                'class' => 'entrada')
            );
        ?>
        <?php
        $submit = array(
            'label' => 'Log in',
            'class' => array( 'boton_azul', 'login')
        );
        echo $this->Form->end($submit); ?>
    </div>
</div> 
```

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:41:35.773

尝试这个：

从模型中删除此行

```
App::uses('AuthComponent', 'Controller/Component');
public $name = 'Users'; 
```

从控制器中删除它

```
public $name = 'Users';
public $uses = array('User'); 
```

# javascript - jquery 变量添加额外的选择器

> ID：16048146
> 
> 赞同：0
> 
> 时间：2013-04-16T22:18:11.917
> 
> 标签：javascript, jquery

只是想了很久。我已经存储了一个变量，例如`var sth = $("#mydiv ul li")`，所以我可以做类似的事情

```
sth.each(function(){
//
}); 
```

现在我想`a`在最后添加一个额外的标签，比如`$("#mydiv ul li a")`如何应用`a`到`sth`

应该喜欢 `$(sth + 'a')`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T22:19:24.470

编辑 2：对不起，事实上我是对的...... $.add(); 添加选择器

```
var sth = $('ul li');
sth.add('a').each(function () {

});
// === $('ul li, a'); 
```

或者，如果您更喜欢在某事物的孩子中找到新的选择器。

```
sth.find('a').each(function () {

});
// === $('ul li a'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:24:05.237

```
$('a', sth).each(function(){
   ...
}); 
```

找到里面的所有锚点`sth`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T22:26:14.850

如果我理解正确并且您想针对 的`a`后代`sth`，您应该尝试：

```
sth.find('a').each(function(){ 
```

那将相当于`$("#mydiv ul li a")`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T22:26:23.407

我想你要找的是`.find()`.

正如[文档](http://docs.jquery.com/Traversing/find)所说，它“搜索与指定表达式匹配的后代元素”。在大多数情况下，这与在 CSS 选择器中添加额外的单词相同。

所以在你的例子中你可以做`sth.find('a').each( ... )`

# javascript - 正则表达式检查是否存在空格？

> ID：16048148
> 
> 赞同：18
> 
> 时间：2013-04-16T22:18:24.450
> 
> 标签：javascript, regex

看起来很简单，但无法弄清楚为什么这个 javascript 代码在期望 true 时无法返回 false） - 我猜它必须对转义字符做些什么？有人可以帮我写一个 JS 块，如果存在空格，它将返回 true 吗？

```
var inValid = new RegExp("[\s]");
var value = "test space";
var k = inValid.test(value);
alert(k); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-16T22:21:36.220

您不需要括号，您需要转义反斜杠（如果使用字符串形式）并且内置正则表达式语法更容易，因为在使用内置正则表达式语法时您不必转义反斜杠。

```
var inValid = /\s/;
var value = "test space";
var k = inValid.test(value);
alert(k);
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T22:20:11.067

如果您从字符串文字创建 RegExp 对象，则需要转义反斜杠：

```
var inValid = new RegExp("[\\s]"); 
```

或者，您可以只使用以下内容：

```
var inValid = /\s/; 
```

这使用正则表达式文字，因此不需要转义反斜杠，并且这里不需要字符类，所以我也删除了方括号。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-16T22:37:20.567

如果你想在那里匹配*一些东西*，但没有空格：

```
alert(/^\S+$/.test(value)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-16T22:20:20.573

你需要一个双转义字符：

一个用于“s”，一个用于“\”本身：

```
var inValid = new RegExp("[\\s]"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-09-02T14:38:26.917

```
var inValid = /^/\s/;
var value = "test value";
var k = inValid.test(value);
alert(k);
```

# html - JSF：一个文本输入框控制着我所有的按钮

> ID：16048153
> 
> 赞同：1
> 
> 时间：2013-04-16T22:18:34.803
> 
> 标签：html, jsf, jsf-2

我在这里尝试将 JSF 与三个不同的输入文本框一起使用，这些文本框与三个单独的按钮一起使用。

但是，我发现前两个文本框根本不起作用，最后一个文本框的用户输入文本是唯一可以与所有三个按钮一起使用的文本框。

有人可以告诉我我的代码有什么问题吗？谢谢。

```
 <h:panelGrid columns="1" style="padding-left:20px;" cellspacing="30">
            <h:panelGroup style="color: black; font-size:medium;" >
                <b style="color: black;">Search for species reviews</b> by name (scientific or common)<br/>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;<h:inputText id="name" size="20" value="#{searchBean.inputName}" required="false" />                                 
                    &nbsp;&nbsp;<h:commandLink action="#{searchBean.searchByName}" class="buttons">Search</h:commandLink></p>
                <h:message for="name" errorClass="errors" style="color: red;" />   
                </h:panelGroup>

                <h:panelGroup style="color: black; font-size:medium;">
                <p><b style="color: black; font-size:medium; padding-bottom:25px;">Find Species Reviews</b><br/></p>
                    &nbsp;&nbsp;&nbsp;&nbsp;<h:inputText id="searchOne" size="20" value="#{searchBean.inputName}" required="false" /> &nbsp; <h:commandLink action="#{searchBean.searchByOther}" class="buttons">Enter Species</h:commandLink>&nbsp; or &nbsp;&nbsp;<h:commandLink action="#{searchBean.reviewSearchAction}" class="buttons
">Andvanced Search</h:commandLink>
                </h:panelGroup>

                <h:panelGroup style="color: black; font-size:medium;">
                <p><b style="color: black; font-size:medium;">Find Fire Studies</b><br/></p>
                    &nbsp;&nbsp;&nbsp;&nbsp;<h:inputText id="searchTwo" size="20" value="#{searchBean.inputName}" required="false" /> &nbsp; <h:commandLink action="#{searchBean.searchByFireStudy}" class="buttons">Enter Species</h:commandLink>&nbsp; or &nbsp; <h:commandLink action="#{searchBean.fireStudySearchAction}" class="buttons">Advanced Search</h:commandLink>
                </h:panelGroup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T23:14:47.197

把所有东西都放在同一个形式中没有错。但是，由于您`value="#{searchBean.inputName}"`对所有三个都使用相同的`<h:inputText>`，所以当您提交整个表单时，最后一个`<h:inputText>`的值将覆盖前两个的值。

为了解决这个问题，我认为您可以尝试以下方法之一：

1.  使用 bean 的不同属性来保存不同输入文本的值（即`inputName1`用于第 1个`<h:inputText>`，`inputName2`用于第 2 个，依此类推）。
2.  如果您在同一页面上呈现结果，您可以使用它的属性`<f:ajax>`并告诉 JSF 要提交什么。`execute`您的按钮将如下所示：

    ```
    <h:inputText id="input1" value="searchBean.inputName" />

    <h:commandLink value="Search 1" action="#{searchBean.searchByName}" class="buttons">
        <f:ajax execute="input1" render="result" />
    </h:commandLink> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:58:24.120

您需要`<h:form>`为每个 s 使用单独的 s，`<h:panelGroup>`因为`<h:commandLink>`需要在 a 内`<h:form>`，如果 single 中有多个`<h:commandLink>`按钮`<h:form>`，则每个按钮将提交相同的表单。

```
 <h:panelGrid columns="1" style="padding-left:20px;" cellspacing="30">
<h:form>
        <h:panelGroup style="color: black; font-size:medium;" >
            <b style="color: black;">Search for species reviews</b> by name (scientific or common)<br/>
                <p>&nbsp;&nbsp;&nbsp;&nbsp;<h:inputText id="name" size="20" value="#{searchBean.inputName}" required="false" />                                 
                &nbsp;&nbsp;<h:commandLink action="#{searchBean.searchByName}" class="buttons">Search</h:commandLink></p>
            <h:message for="name" errorClass="errors" style="color: red;" />   
            </h:panelGroup>
</h:form>
<h:form>
            <h:panelGroup style="color: black; font-size:medium;">
            <p><b style="color: black; font-size:medium; padding-bottom:25px;">Find Species Reviews</b><br/></p>
                &nbsp;&nbsp;&nbsp;&nbsp;<h:inputText id="searchOne" size="20" value="#{searchBean.inputName}" required="false" /> &nbsp; <h:commandLink action="#{searchBean.searchByOther}" class="buttons">Enter Species</h:commandLink>&nbsp; or &nbsp;&nbsp;<h:commandLink action="#{searchBean.reviewSearchAction}" class="buttons">Andvanced Search</h:commandLink>
            </h:panelGroup>
</h:form>
<h:form>
            <h:panelGroup style="color: black; font-size:medium;">
            <p><b style="color: black; font-size:medium;">Find Fire Studies</b><br/></p>
                &nbsp;&nbsp;&nbsp;&nbsp;<h:inputText id="searchTwo" size="20" value="#{searchBean.inputName}" required="false" /> &nbsp; <h:commandLink action="#{searchBean.searchByFireStudy}" class="buttons">Enter Species</h:commandLink>&nbsp; or &nbsp; <h:commandLink action="#{searchBean.fireStudySearchAction}" class="buttons">Advanced Search</h:commandLink>
            </h:panelGroup>
</h:form> 
```

# javascript - 如何在 iOS 主屏幕链接上停止弹性滚动（又名滚动反弹，又名页面过度滚动效果）？

> ID：16048155
> 
> 赞同：1
> 
> 时间：2013-04-16T22:18:47.817
> 
> 标签：javascript, ios, web-applications, scroll, iphone-standalone-web-app

我设法通过覆盖 touchmove 事件来禁用我的网页上的滚动溢出效果（“橡皮筋”？）。这在移动 safari 上运行良好。

但是，当我在 iPad 主屏幕中为我的页面添加快捷方式时，效果再次处于活动状态。

我怎样才能在那里禁用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:54:59.587

我猜你用来阻止橡皮筋效应的方法是：

jQuery

```
$(document).bind(
  'touchmove',
  function(e) {
    e.preventDefault();
  }
); 
```

或者

Javascript

```
document.addEventListener(
  'touchmove',
  function(e) {
    e.preventDefault();
  },
  false
); 
```

如果两者都不是，请先尝试。

但是，如果您仍然遇到弹性问题，请尝试使用类似[这样](https://gist.github.com/amolk/1599412)的东西，或者这样：

Javascript

```
function BlockMove(event) { 
  event.preventDefault(); 
} 
```

HTML

```
<body ontouchmove="BlockMove(event);">
</body> 
```

# c++ - 实现 Bellman-Ford 算法 C++

> ID：16048159
> 
> 赞同：5
> 
> 时间：2013-04-16T22:18:52.697
> 
> 标签：c++

我目前正在做一个家庭作业来实现贝尔曼福特算法。到目前为止，我已经设法读取提供的图表，将其放入一个向量中（使用 1d 向量来表示具有行主要顺序的 2d 向量）以用作矩阵。我正在使用一个结构来跟踪边缘的权重，一个布尔值是否为无穷大（不存在边）和一个变量来跟踪前面的节点。

我被难住的实际上是实现 dang 算法。我已经阅读了来自[http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm)的伪代码，但我很难掌握如何使用该算法。前 80 行正在读取文件，初始化向量，将值扔到正确位置的向量中。下面是我开始为算法实现的内容。我确实有几个具体的问题。

1）在我找到的算法的所有解释中，您使用算法# of nodes - 1 次。在我看过的一些实现中，我倾向于从 1 开始。这是为什么呢？此外，通过我的实施，这仍然有意义吗？

2）在维基百科的伪代码中，它说要检查每条边 u,v，其中 u 是起始顶点，v 是结束顶点。在我的矩阵中，据我所知，这意味着我需要检查每行、列对的权重/值，看看是否有更好的路径。我......不确定我是否正确地解释了这一点，甚至是否理解这一点。任何建议/指导/提示/示范将不胜感激。下面是源代码和教师演示输入的粘贴。

```
#include <fstream>
#include <iostream>
#include <iomanip>
#include <vector>

using namespace std;

struct graphNode
{
    int value; //Weight of the edge
    bool isInfinity; //Boolean to flag an edge as infinity
    int pred; //predecessor node
};

// Code for reading inputfile cribbed and modified from http://stackoverflow.com/questions/7651243/c-read-a-file-name-from-the-command-line-and-utilize-it-in-my-file
int main(int argc, char** argv) 
{
    ifstream input; // ifstream for the input
    string inFile = ""; //name of the input file
    int row; //Variable to keep track of what row we're inputting data for
    int col; //Variable to keep track of a column thingie, expand on this later
    int infinity = 99999999;
    int nodeCount; //Number of nodes from input file
    int edgeCount = 0; //Number of edges from the input file

    vector<graphNode> edgeList; //2D list of edges, order is a->b
    edgeList.push_back(graphNode());
    edgeList[0].value = 0;
    edgeList[0].isInfinity = false;
    edgeList[0].pred = -1;

    if( argc == 2 ) 
    {
        inFile = argv[1];
    }
    else 
    {
        cout << "Usage: ./a.out inputFile\n";
        return 1;
    }

    input.open(inFile.c_str()); // opening the provided file

    if(input.is_open()) // making sure the input is open
    {
        input >> nodeCount; //Grabbing the number of nodes from the first value of the file

        for(int i = 1; i < nodeCount*nodeCount; i++)
        {
            edgeList.push_back(graphNode());
            edgeList[i].value = infinity;
            edgeList[i].isInfinity = true;
            edgeList[i].pred = -1;
        }

        //Putting data from the file into the vector array
        while(!input.eof())
        {
            input >> row; //For each cycle through the list, we grab the first number on the line to get which x value (start vertex) we're working with
            while(input.peek() != '\n' && input.peek() != '\r' && !input.eof())
            {
                input >> col;
                input >> edgeList[((row-1)*nodeCount)+(col-1)].value;
                edgeList[((row-1)*nodeCount)+(col-1)].isInfinity = false;
                edgeList[((row-1)*nodeCount)+(col-1)].pred = row;
                edgeCount++;
            }

        }
        input.close(); //Closing our input file since we don't need it anymore
    }
    else
    {
        cout << "Error, something happened with the input." << endl;
        return 1;
    }

    //for(int i = 0; i < nodeCount - 1; i++)
    //{
        //for(int r = 0; r < nodeCount - 1; r++)
        //{
            //for(int c = 0; r < nodeCount - 1; c++)
            //{
                //if(r == c) continue;
                //if(edgeList[r][c].isInfinity) continue;
                //if(edgeList[i][r] + edgeList[r][c] < edgeList[c][i])
} 
```

演示输入：

```
10
3 6 4 9 0 7 8
8 5 3 7 3 4 -2
5 10 2 8 1 4 1
2 6 -3 1 3 7 1
1 10 -1 2 2 4 -2
10 9 -3 1 3 7 2 5 1
7 3 0 10 1 2 1 8 2
9 6 6 3 4 10 7
4 8 5 1 9 5 6
6 2 4 3 0 9 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T04:41:19.047

对于 #1，您正在检查节点之间的边，以便最长路径不能超过 nodeCount-1 边。例如，如果 nodeCount==1，则不需要检查任何边。

对于#2，你有有趣的数据结构。看来你需要不同的。您的“graphNode”应该被称为“graphEdge”，但没有“pred”变量。声明两个新结构：

```
vector<int> predecessor;
vector<int> distance; 
```

每个都是 nodeCount 大小。您在 Wikipedia 中看到的“w”是您的 edgeList。

在您注释掉的最后一部分中，外部循环正在迭代 nodeCount 次。它应该是 nodeCount-1，但没有害处。但是，您稍后的索引将关闭，因为您有一个将其视为二维的一维 edgeList。您可以通过 edgeList[(r-1)*nodeCount + c] 访问正确的边。

不确定这是否算作一个答案，但这是一个开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T05:14:22.360

在此处查看有关 Bellman-Ford 算法的短视频。我认为它可以帮助您更好地理解算法： [https ://class.coursera.org/algo2-2012-001/lecture/preview](https://class.coursera.org/algo2-2012-001/lecture/preview)

贝尔曼福特背后的主要思想是：

要找到 2 个节点（例如 s 和 t）之间的最短路径，您需要迭代地找到从 s 到 t 的最短路径，并且在随后的每次迭代中，允许算法在路径中使用比前一次迭代多 1 条的边。

在任何特定的迭代 k 中，您现在允许算法在路径中使用**最多**k 个边，s 和 t 之间的最短路径可以

1.  通过使用**恰好**k 个边或
2.  取与从前一次迭代中找到的值相同的值，即**最多**使用(k - 1) 条边。

因此，在特定的迭代 k 中：

令 d[ k ][ t ] 是从 s 到节点 t 的距离，最多使用 k 条边。然后：

```
d[ k ][ t ] = min{ 
d[k - 1][ t ], # Case 2
for all edges (u, t) in graph min d[k - 1][ u ] + c[ u ][ t ] # Case 1
} 
```

其中 min{ ., .} 方程的第二部分简单地找到 s 到最终目的地 t 的任何邻居 u 之间的最短路径，并添加边缘 c[ u ][ t ] 的成本以从 u 到 t ，因此需要**恰好**k 个边。

因此，伪代码如下所示：

```
d[s][0] = 0 # The cost from s to itself requiring zero edges is 0.
d[u][0] = INFINITY for all other nodes other than s (i.e. you cannot reach them with no edges).

Let n = number of nodes in graph
for k = 1 to n - 1: # Allow one more edge in path in each iteration
  for every edge (u, v) in edges of graph: # Check whether can get a better cost to v using k edges by going through node u or k - 1 edges is enough.
    d[ v ][ k ] = min{ d[k - 1][ v ], d[k - 1][ u ] + c[ u ][ v ] } 
```

要回答您问题的第 1 部分，请考虑方程的外循环在边数上循环。它从 1 增加到 n - 1，其中 n 是图中的节点数。它最多 n - 1 的原因是路径中可以拥有的最大边数是 (n - 1) 条边（即，您最终连接所有 n 个节点以从 s 到 t，具有 n - 1 条边它们之间）。

要回答问题的第 2 部分，您只需要考虑到每个目标节点的传入节点，并检查使用 k - 1 条边到其中一个节点的路径是否加上从该节点到目标节点的成本比以前少，正如我上面解释的那样。

最后，为了检查负循环（wiki 代码中的最后一部分），您运行算法进行 1 次迭代。我们知道任何路径最多可以使用 n - 1 条边。再多就多余了。因此，如果当您允许多使用 1 个边时，任何路径的成本降低，则它一定包含一个负循环，因为这是其成本可能降低的唯一方式。任何非负循环都会导致相同或更大的成本，因为它使用了更多的边。

我强烈建议在上面的链接中观看 Tim Roughgarden 的视频。请注意，他的处理方式与维基百科中的伪代码略有不同，但想法基本相同。

# objective-c - 无法识别的命令行选项“-fno-objc-arc”

> ID：16048163
> 
> 赞同：0
> 
> 时间：2013-04-16T22:19:20.463
> 
> 标签：objective-c, xcode, automatic-ref-counting

我的 Xcode 项目中有超过 200 个错误，发现我的问题与启用 ARC 有关。我按照[此处](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)找到的建议使用该标志`-fno-objc-arc`。现在我只剩下 7 个错误，但其中一个在我的 prefix.pch 中，这是我所有源文件的前缀标头，并说：

```
unrecognized command line option "-fno-objc-arc" 
```

有任何想法吗？我正在使用 mac 10.6.8、ios sdk 4.3 和 xcode 3.2.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T22:25:05.390

Xcode 3.2.6 可能无法识别该标志。从[文档](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)：

> ARC 在 Xcode 4.2 中支持 OS X v10.6 和 v10.7（64 位应用程序）以及 iOS 4 和 iOS 5。弱引用在 OS X v10.6 和 iOS 4 中不受支持。

您可以尝试安装 Xcode 4 并将此构建设置添加到 Xcode 3：

```
CC = /Applications/Xcode4/Developer/usr/bin/clang 
```

（路径可能不同）。我认为 Xcode 4 至少需要 Snow Leopard。

# sql - 根据传递的列重用 oracle 中的函数

> ID：16048165
> 
> 赞同：1
> 
> 时间：2013-04-16T22:19:24.883
> 
> 标签：sql, database, oracle, plsql

我有一个函数，我想根据传递的列以不同的方式工作。我在 UPDATE 语句中调用该函数。如果我通过表的 col A，那么应该实现函数的 case1，如果我通过 col B，那么应该考虑函数的 case2 部分。

我可以创建两个单独的功能，但如果可能的话，我想合而为一。

例如：

```
create or replace Function test( para1 in varchar2)
v_para varchar2;
BEGIN
****If  paramater is coming from col A then perform 1st block Else perform 2nd block****
Begin

v_para := REGEXP_REPLACE (para1,'....');
v_para := .....
v_para := .....
Return varchar2
END
------------------------------------------------------
BEGIN
v_para := REGEXP_REPLACE(para1,'.....');
v_para := .....

Return varchar2
END

END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:05:46.870

另一种选择是有两个参数，都默认为 NULL，您可以按名称传递，如下所示：

```
CREATE OR REPLACE PROCEDURE TEST_PROC(colA  VARCHAR2 DEFAULT NULL,
                                      colB  VARCHAR2 DEFAULT NULL) IS
BEGIN
  IF colA IS NOT NULL THEN
    DBMS_OUTPUT.PUT_LINE('colA=' || colA);  -- or do whatever
  END IF;

  IF colB IS NOT NULL THEN
    DBMS_OUTPUT.PUT_LINE('colB=' || colB);  -- or do whatever
  END IF;
END TEST_PROC; 
```

然后，当您调用此过程时，按名称传递您要使用的参数，如下所示：

```
DECLARE
  rowTest_table  TEST_TABLE%ROWTYPE;
BEGIN
  SELECT *
    INTO rowTest_table
    FROM TEST_TABLE
    WHERE SOMETHING = SOMETHING_ELSE;

  TEST_PROC(colA => rowTest_table.A);

  TEST_PROC(colB => rowTest_table.B);
END; 
```

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:32:06.063

我不会为此使用单个函数。如果在决定使用哪种算法时传递了哪个元素，那么这应该是两个函数。

我意识到有一些方法可以实现你想要的（我更喜欢运行哪个算法的额外参数），但我认为你的目标从根本上是有缺陷的。

# python - 使用 pickle 编写列表列表

> ID：16048167
> 
> 赞同：2
> 
> 时间：2013-04-16T22:19:37.337
> 
> 标签：python, file, pickle

我尝试使用 pickle 编写列表列表

```
import pickle
pkl_file=('lol.txt','wb')
listoflist=[[1,2],[3,4],[5.6]]
pickle.dump(listoflist,pkl_file) 
```

但出现以下错误：

```
 Traceback (most recent call last):
File "lol.py", line 4, in <module>
pickle.dump(lol,pkl_file)
File "/usr/lib/python2.7/pickle.py", line 1370, in dump
Pickler(file, protocol).dump(obj)
File "/usr/lib/python2.7/pickle.py", line 203, in __init__
self.write = file.write
AttributeError: 'tuple' object has no attribute 'write' 
```

我需要知道这有什么问题，或者还有其他有效的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T22:20:23.683

把`pkl_file = open('lol.txt','wb')`而不是`('lol.txt','wb')`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:24:01.033

此错误消息：

```
AttributeError: 'tuple' object has no attribute 'write' 
```

是因为：

```
pkl_file=('lol.txt','wb') 
```

不是你打算做的。你已经创建了一个包含两个字符串的元组。将其更改为：

```
pkl_file = open('lol.txt','wb') 
```

# google-apps-script - 使用 HtmlService 的 Web 应用程序的页面标题

> ID：16048172
> 
> 赞同：0
> 
> 时间：2013-04-16T22:20:05.813
> 
> 标签：google-apps-script

使用 UIApp，您可以`<title>`通过`setTitle()`. 如果我使用带有 HtmlService 的 HTML 模板，我不知道该怎么做。我尝试将`<title>`标签放置在模板内的不同位置，但无济于事。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T22:23:04.603

HtmlOutput（你从 template.evaluate() 或直接从 HtmlService.createHtmlOutput() 得到的）也有一个 setTitle。

# jquery - 带有 MVC4 内容的 jQuery 选项卡

> ID：16048183
> 
> 赞同：5
> 
> 时间：2013-04-16T22:20:55.807
> 
> 标签：jquery, asp.net-mvc-4, asp.net-web-api, jquery-tabs

我试图让一些 MVC4 视图显示在 jQuery 选项卡中。这是我的代码：

```
<div id="tabs">
    <ul>
        <li><a href="#appone">App One</a></li>
        <li><a href="#apptwo">App Two</a></li>
    </ul>
    <div id="appone">
        @{ Html.RenderPartial("~/Views/AppOne/Index.cshtml"); }
    </div>
    <div id="apptwo">
        @{ Html.RenderPartial("~/Views/AppTwo/Index.cshtml"); }
    </div>
</div> 
```

问题是第一个选项卡内容显示得很好 - 但第二个是空的。似乎未呈现部分视图。

有没有办法在页面加载时强制 jQuery 选项卡更新所有选项卡的内容，或者强制我的部分视图在页面加载时呈现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T01:12:45.880

这是我正在积极处理的代码，效果很好：

**登录.cshtml**

```
@{
    AjaxOptions optsLogin = new AjaxOptions { UpdateTargetId = "login-tab-login" };
    AjaxOptions optsRegister = new AjaxOptions { UpdateTargetId = "login-tab-register" };
}
<section id="login-tabs">
    <ul>
        <li><a href="#login-tab-login">Returning Customers</a></li>
        <li><a href="#login-tab-register">New Customers</a></li>
    </ul>
    @using (Ajax.BeginForm("Login", "Account", optsLogin, new { id = "form-login" }))
    {
        <div id="login-tab-login">
            @Html.Partial("Account/_Login")
        </div>
    }
    @using (Ajax.BeginForm("Register", "Account", optsRegister, new { id = "form-register" }))
    {
        <div id="login-tab-register">
            @Html.Partial("Account/_Register")
        </div>
    }
</section>
<script type="text/javascript">
    $(function() {
        $('#login-tabs').tabs();
    });
</script> 
```

我的部分视图位于 Account 子文件夹的 Shared 文件夹中。此外，每个局部视图都有自己的模型。除此之外，实现没什么特别的......

**更新**

我添加了代码以在两个选项卡上实现 Ajax 调用。选项卡部分上方的代码块包含`AjaxOptions`两个`<form>`元素的对象。您的控制器需要看起来像这样：

**AccountController.cs**

```
public class AccountController : Controller
{
   ...
   [HttpGet]
   public ActionResult Login()
   {
       ...
       return View();
   }

   [HttpPost]
   public ActionResult Login(LoginModel model)
   {
       ...
       if (ModelState.IsValid)
           return RedirectToAction("Index", "Home")
       else
           return PartialView("/Account/_Login", model);
   }

   [HttpPost]
   public ActionResult Register(RegisterModel model)
   {
       ...
       if (ModelState.IsValid)
           return RedirectToAction("Index", "Home")
       else
           return PartialView("/Account/_Register", model);
   }
} 
```

`Login GET`action 方法呈现整个页面，包括和`_Layout.cshtml`视图`_ViewStart.cshtml`。我的部分视图`_Login.cshtml`和`_Register.cshtml`保存条目表单的 HTML 元素。每个局部视图都有自己的提交按钮：

```
<input type="submit" value="<Whatever you want to display>" /> 
```

因为每个部分视图调用都封装在自己的`using (Ajax.BeginForm(...))`块中，并且我给了每个`<form>`自己的`id`属性，所以我可以添加 JavaScript 代码来劫持`submit`事件。根据`submit`按下的哪个，它将执行与`Ajax.BeginForm(...)`调用中指定的动作和控制器相关联的动作方法。就我而言，如果表单数据通过验证，控制器将自动重定向到`/Home/Index`.

但是，如果验证失败，则操作方法将简单地将我的部分视图的渲染版本发送回浏览器，并将其放置`UpdateTargetId`在`AjaxOptions`与`<form>`. 由于默认`InsertionMode`值为`Replace`，视图引擎将简单地用新版本替换旧版本的部分视图，并包含表单数据和验证消息（如果包含）。

我没有包括的唯一与代码相关的项目是我的部分视图，就 jQuery 选项卡功能而言，这真的无关紧要。我的部分视图中没有任何额外的 JavaScript，并且`AccountController`我没有包含的额外代码特定于调用我的外部 Web API 控制台应用程序和设置授权 cookie。我将 Google 的 CDN 用于我的 jQuery 和 jQuery UI 声明，而不是在本地托管 JavaScript。

你需要一段时间来思考你必须做的事情。但是，一旦你掌握了它，你就掌握了它并且知识是可以转移的。这**不是**WebForms，谢天谢地。

# sql - 没有输入字段排除 SQL 注入的可能性？

> ID：16048185
> 
> 赞同：0
> 
> 时间：2013-04-16T22:21:13.063
> 
> 标签：sql, forms

据我所知，当 PHP 应用程序需要用户在网页表单上输入以发送到 $POST 或 $GET 或 $REQUEST 等变量时，它们很容易发生 SQL 注入。这是否意味着如果我的应用程序/htmlpage 没有用户输入表单，它就完全没有 SQL 注入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:22:29.930

不，任何用户输入都可能导致 SQL 注入。例如，假设您使用查询字符串中的参数执行 SQL 查询。如果您没有清理这些参数，您仍然容易受到 SQL 注入的影响。

您能做的最好的事情就是**永远不要相信用户输入并始终清理**

为了防止 SQL 注入，请*使用准备好的语句和参数化查询*

见： http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

# ruby - 带有 Ruby 的 OpenGL 3.1+

> ID：16048197
> 
> 赞同：2
> 
> 时间：2013-04-16T22:21:58.690
> 
> 标签：ruby, opengl

我按照[这篇文章](https://stackoverflow.com/questions/7133319/how-to-create-opengl-3-x-or-4-x-context-in-ruby)在 Ruby 上使用 OpenGL（可编程管道）

基本上，我只是想创建一个蓝色窗口，这是代码。

```
Ray::GL.major_version = 3
Ray::GL.minor_version = 2
Ray::GL.core_profile  = true # if you want/need one

window = Ray::Window.new("Test Window", [800, 600])
window.make_current

glClearColor(0, 0, 1, 1);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glEnable(GL_DEPTH_TEST); 
```

相反，我创建了一个白色窗口。这表明我遗漏了一些东西，但我无法弄清楚我遗漏了什么，因为 Ruby 上的 OpenGL 资源似乎有限。我一直在网上搜索，但我发现的只是 Ruby 的固定管道 OpenGL 的东西。

是的，我可以使用 Ray 的内置函数来设置背景颜色和绘制内容，但我不想这样做。我只是想用 Ray 来设置窗口，然后直接调用 OpenGL API。但是，我无法弄清楚我在上面的代码中缺少什么。

我将不胜感激任何提示或指针（也许我需要交换缓冲区？但后来我不知道如何使用 Ray）。有没有熟悉使用 Ray 的机构可以给我一些提示？

或者，是否有任何其他工具可以让我设置 OpenGL 绑定（对于非固定管道）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:16:01.263

您似乎将清除颜色设置为蓝色，然后清除后台缓冲区以使其变为蓝色。但是，正如您所说，您没有交换缓冲区以将后台缓冲区放到屏幕上。就交换缓冲区而言，这是堆栈溢出的另一个答案

“交换双缓冲窗口的前后缓冲区是底层图形系统提供的功能，即 Win32 GDI 或 X11 GLX。您正在寻找的功能是 wglSwapBuffers 和/或 glXSwapBuffers。在 MacOS X 上，NSOpenGLViews 会自动交换了。

但是，您很可能正在使用一些框架，例如 GLUT、GLFW 或 Qt，它们提供了围绕这些功能的可移植包装器。阅读框架的文档。”

我从来没有使用过 Ray，所以我会说只是继续在文档中查找或查看示例项目以了解缓冲区交换是如何完成的。

# sql-server - 跨多个列的全文搜索分数

> ID：16048199
> 
> 赞同：1
> 
> 时间：2013-04-16T22:22:13.630
> 
> 标签：sql-server, full-text-search, freetexttable

我在 SQL Server 数据库上使用全文搜索来返回多个表的结果。最简单的情况是搜索人名字段和描述字段。我用来执行此操作的代码如下所示：

```
select t.ProjectID as ProjectID, sum(t.rnk) as weightRank
from
(
 select KEY_TBL.RANK * 1.0 as rnk, FT_TBL.ProjectID as ProjectID
 FROM Projects as FT_TBL 
 INNER JOIN FREETEXTTABLE(Projects, Description,  @SearchText) AS KEY_TBL 
   ON FT_TBL.ProjectID=KEY_TBL.[KEY]

     union all

 select KEY_TBL.RANK * 50 as rnk, FT_TBL.ProjectID as ProjectID
 FROM Projects as FT_TBL 
 ... <-- complex unimportant join
     INNER JOIN People as p on pp.PersonID = p.PersonID
 INNER JOIN FREETEXTTABLE(People, (FirstName, LastName), @SearchText) AS KEY_TBL 
    ON p.PersonID=KEY_TBL.[KEY]
 )
group by ProjectID 
```

正如上面（希望）清楚的那样，我试图在项目描述字段中对一个人的名字匹配而不是匹配。如果我搜索“john”之类的内容，那么所有以 john 为名的项目都会得到很大的权重（如预期的那样）。我遇到的问题是搜索有人提供了像“约翰史密斯”这样的全名。在这种情况下，名称的匹配度要弱得多，因为（我认为）每个`firstname`/`lastname`列中只有一半的搜索词匹配。在许多情况下，这意味着与输入的姓名完全匹配的人不一定会在搜索结果顶部附近返回。

我已经能够通过分别搜索每个`firstname`/`lastname`字段并将它们的分数加在一起来纠正这个问题，因此我的新查询如下所示：

```
select t.ProjectID as ProjectID, sum(t.rnk) as weightRank
from
(
 select KEY_TBL.RANK * 1.0 as rnk, FT_TBL.ProjectID as ProjectID
 FROM Projects as FT_TBL 
 INNER JOIN FREETEXTTABLE(Projects, Description,  @SearchText) AS KEY_TBL 
   ON FT_TBL.ProjectID=KEY_TBL.[KEY]

     union all

 select KEY_TBL.RANK * 50 as rnk, FT_TBL.ProjectID as ProjectID
 FROM Projects as FT_TBL 
 ... <-- complex unimportant join
     INNER JOIN People as p on pp.PersonID = p.PersonID
 INNER JOIN FREETEXTTABLE(People, (FirstName), @SearchText) AS KEY_TBL 
    ON p.PersonID=KEY_TBL.[KEY]

     union all

 select KEY_TBL.RANK * 50 as rnk, FT_TBL.ProjectID as ProjectID
 FROM Projects as FT_TBL 
 ... <-- complex unimportant join
     INNER JOIN People as p on pp.PersonID = p.PersonID
 INNER JOIN FREETEXTTABLE(People, (LastName), @SearchText) AS KEY_TBL 
    ON p.PersonID=KEY_TBL.[KEY]
 )
group by ProjectID 
```

我的问题：

这是我应该采用的方法，还是有某种方法可以让全文搜索对列列表进行操作，就好像它是一团文本一样：即将`firstname`和`lastname`列视为单个`name`列，从而获得更高的分数匹配包括人名和姓氏的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T15:06:00.710

我最近遇到了这个问题，并使用了一个计算列将所需的列连接到一个字符串中，然后在该列上有全文索引。

我通过复制计算列中的加权字段来实现加权。

即姓氏出现3次，名字出现一次。

```
ALTER TABLE dbo.person ADD
PrimarySearchColumn AS 
COALESCE(NULLIF(forename,'') + ' ' + forename + ' ', '') +
COALESCE(NULLIF(surname,'')  + ' ' + surname  + ' ' + surname  + ' ', '') PERSISTED 
```

您必须确保使用persisted 关键字，以便不会在每次读取时计算该列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-01T17:27:25.007

我知道这是一个老问题，但我遇到了同样的问题并以不同的方式解决了它。

我没有将计算列添加到原始表中，这可能并不总是一种选择，而是创建了包含组合字段的索引视图。要使用原始示例：

```
CREATE VIEW [dbo].[v_PeopleFullName]
WITH SCHEMABINDING 
AS SELECT dbo.People.PersonID, ISNULL(dbo.People.FirstName + ' ', '') + dbo.People.LastName AS FullName
FROM dbo.People
GO

CREATE UNIQUE CLUSTERED INDEX UQ_v_PeopleFullName
ON dbo.[v_PeopleFullName] ([PersonID])
GO 
```

然后我在我的查询中加入该视图，以及基表中各个列上的现有全文谓词，以便我可以在各个列中找到完全匹配和部分匹配，如下所示：

```
DECLARE @SearchText NVARCHAR(100) = ' "' + @OriginalSearchText + '" ' --For matching exact phrase
DECLARE @SearchTextWords NVARCHAR(100) = ' "' + REPLACE(@OriginalSearchText, ' ', '" OR "') + '" ' --For matching on words in phrase

SELECT FT_TBL.ProjectID as ProjectID, 
    ISNULL(KEY_TBL.[Rank], 0) + ISNULL(KEY_VIEW.[Rank], 0) AS [Rank]
FROM Projects as FT_TBL 
INNER JOIN People as p on FT_TBL.PersonID = p.PersonID
LEFT OUTER JOIN CONTAINSTABLE(People, (FirstName, LastName), @SearchTextWords) AS KEY_TBL ON p.PersonID = KEY_TBL.[KEY] INNER JOIN
LEFT OUTER JOIN CONTAINSTABLE(v_PeopleFullName, FullName, @SearchText) AS KEY_VIEW ON p.PersonID = KEY_VIEW.[Key]
WHERE ISNULL(KEY_TBL.[Rank], 0) + ISNULL(KEY_VIEW.[Rank], 0) > 0
ORDER BY [Rank] DESC 
```

对此的一些说明：

*   我正在使用`CONTAINSTABLE`而不是`FREETEXTTABLE`因为它似乎更适合我搜索名称。当我正在搜索的名称时，我对查找具有相似含义的单词或单词的变形不感兴趣。
*   因为我正在使用`CONTAINSTABLE`我必须对变量进行一些预处理`@SearchText`以使其兼容并使用`OR`运算符将​​其分解为单个单词以在基表的全文索引上进行搜索。
*   而不是使用一个`UNION`查询来连接单独的查询，每个查询都使用一个连接，`CONTAINSTABLE`我`CONTAINSTABLE`在同一个查询中加入两个谓词。这意味着使用外部联接而不是内部联接，因此我使用`WHERE`子句从基表中排除与任一全文索引都不匹配的任何记录。我承认，与使用单个全文索引谓词`UNION`生成单个结果集的单独查询相比，我没有对它的执行情况进行任何检查。
*   虽然不能保证索引视图中完整搜索文本的匹配排名会高于基表列的全文索引中单个单词的匹配排名，因为排名值是任意的，但我的测试到目前为止已经表明，在实践中它总是（到目前为止！）。

# php - PHP 会话山狮

> ID：16048200
> 
> 赞同：0
> 
> 时间：2013-04-16T22:22:15.000
> 
> 标签：php, osx-mountain-lion

因此，在我的 mac 上使用默认的 php 版本，我正在尝试启用 php 会话。我进入 /etc/php.ini 并取消注释以下内容，但在 Impress Pages 中仍未检测到它已启用

```
session.save_path = "/tmp"
session.use_cookies = 1
session.name = PHPSESSID
session.auto_start = 1 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:40:00.610

我解决了这个问题。它已启用，只是我使用的应用程序错误地报告它不起作用。对不起那些家伙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:42:52.530

您是否以 root 用户身份编辑了文件？如果这不起作用，请像我一样使用 MAMP 之类的东西。:)

# javascript - 如何使用 jquery 或 javascript 将复选框选择限制为一个

> ID：16048202
> 
> 赞同：2
> 
> 时间：2013-04-16T22:22:28.723
> 
> 标签：javascript, jquery, html, checkbox

如何使用 jquery 或 javascript 将复选框选择限制为一个，并且在选择一个复选框后应禁用其他复选框？

```
<input type="checkbox" name="size[]" id="size" value="Small" />Small
<input type="checkbox" name="size[]" id="size" value="Medium" />Medium
<input type="checkbox" name="size[]" id="size" value="Large" />Large
<input type="checkbox" name="size[]" id="size" value="Xl" />XL 
```

**这里的例子，但我想要同样的东西在 Html 或 Php**

```
http://gravitywiz.com/demos/limit-how-many-checkboxes-can-be-checked/ 
```

**问题现在解决了 最终解决方案**

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>

<script>
$(document).ready(function () {
$('input:checkbox').click(function(){
var $inputs = $('input:checkbox')
if($(this).is(':checked')){
$inputs.not(this).prop('disabled',true); 
}else{
$inputs.prop('disabled',false);
}
})
})
</script>

<input type="checkbox">
<input type="checkbox"> 
<input type="checkbox">
<input type="checkbox">
<input type="checkbox" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T22:26:55.950

```
$("input[type='checkbox']").on("click" , function(){
    $("input[type='checkbox']").not(this).attr("disabled", "disabled");
}); 
```

# [工作示例](http://jsfiddle.net/tHUdS/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:32:14.867

如果禁用，用户在第一次选择后不能更改他的选择。这是复选框的单选按钮行为。

```
$("input[type=checkbox]").on('click', function() {   
    $("input[type=checkbox]").not(this).attr('checked', false);  

}); 
```

[http://jsfiddle.net/BxF4Y/](http://jsfiddle.net/BxF4Y/)

但要做到这一点，最好的方法是使用单选按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T22:32:34.813

浏览该页面的源代码会发现他们用来实现该效果的 jQuery。您应该能够将 checkboxLimit 更改为 1。

```
<script type="text/javascript">
jQuery(document).ready(function($) {

    $.fn.checkboxLimit = function(n) {

        var checkboxes = this;

        this.toggleDisable = function() {

            // if we have reached or exceeded the limit, disable all other checkboxes
            if(this.filter(':checked').length >= n) {
                var unchecked = this.not(':checked');
                unchecked.prop('disabled', true);
            }
            // if we are below the limit, make sure all checkboxes are available
            else {
                this.prop('disabled', false);
            }

        }

        // when form is rendered, toggle disable
        checkboxes.bind('gform_post_render', checkboxes.toggleDisable());

        // when checkbox is clicked, toggle disable
        checkboxes.click(function(event) {

            checkboxes.toggleDisable();

            // if we are equal to or below the limit, the field should be checked
            return checkboxes.filter(':checked').length <= n;
        });

    }

        $("#field_11_1 .gfield_checkbox input:checkbox").checkboxLimit(3);

});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-04T20:02:01.113

是的，这是一个旧线程，但是这里没有真正的结论。如果您希望限制用户选中的框的数量，我在我的版本中包含了一个关于复选框应该如何工作的小提琴。

```
/** Begin HTML **/
<div class="cContainer">
<div class="cDropdown">
    <div class="downArrow"></div>
    <h4>Night Life</h4>
</div>
<div class="multiCheckboxes stick">
    <input id="1" class="stick" type="checkbox" value="1" name="l-28">
    <label class="stick" for="1">Dive Bar</label>
    <br>
    <input id="2" class="stick" type="checkbox" value="2" name="l-28">
    <label class="stick" for="2">Pub</label>
    <br>
    <input id="3" class="stick" type="checkbox" value="3" name="l-28">
    <label class="stick" for="3">Dance Club</label>
    <br>
    <input id="4" class="stick" type="checkbox" value="4" name="l-28">
    <label class="stick" for="4">Pool Hall</label>
    <br>
    <input id="5" class="stick" type="checkbox" value="5" name="l-28">
    <label class="stick" for="5">Karaoke</label>
    <br>
    <input id="6" class="stick" type="checkbox" value="6" name="l-28">
    <label class="stick" for="6">Sports Bar</label>
    <br>
    <input id="7" class="stick" type="checkbox" value="7" name="l-28">
    <label class="stick" for="7">Trendy</label>
    <br>                    
</div> 
```

/** 结束 HTML **/

/** 开始 JS **/

```
$('.cDropdown').on('click', function (e) {
$('.multiCheckboxes').slideUp(50)
e.stopPropagation();
currentDrop = $(this).next();
currentDrop.stop().slideToggle();
});
$('input:checkbox[name="l-28"]').on('change', function () {
var nightLifeLimit = $('input:checkbox[name="l-28"]:checked').length;
    if (nightLifeLimit == 2) {
    $('input:checkbox[name="l-28"]').each(function () {
        if ($(this).is(':checked')) {
            return;
        }
        else {
            $(this).prop('disabled', true);
        }
    });
}
else {
    $('input:checkbox[name="l-28"]').each(function () {
        $(this).prop('disabled', false);
    });
  }
}); 
```

/** 结束 JS **/

/** 开始 CSS **/

```
.cDropdown {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 2px inset #D3D3D3;
    clear: right;
    padding: 4px 3px;
    width: 150px;
}
.cDropdown h4 {
    font-size: 0.86em;
    font-weight: normal;
    margin: 0 0 0 1px;
    padding: 0;
}
.downArrow {
    border-left: 8px solid rgba(0, 0, 0, 0);
    border-right: 8px solid rgba(0, 0, 0, 0);
    border-top: 8px solid #3C3C3C;
    float: right;
    height: 0;
    margin: 3px 0 0 3px;
    width: 0;
}
.multiCheckboxes {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 1px solid #3C3C3C;
    display: none;
    left: 9px;
    max-height: 200px;
    overflow: auto;
    padding: 5px;
    position: absolute;
    top: 35px;
    width: 146px;
    z-index: 999;
}

.multiCheckboxes label {
   float: none !important;
    font-size: 0.9em;
    width: 7.6em !important;
} 
```

[http://jsfiddle.net/defmetalhead/9BYrm/1/](http://jsfiddle.net/defmetalhead/9BYrm/1/)

# python - 在 split() 之后从末尾开始遍历列表

> ID：16048206
> 
> 赞同：0
> 
> 时间：2013-04-16T22:22:39.900
> 
> 标签：python, list, split

```
for item in "1,2,3,4,5,6".split(","): 
```

我需要将列表反转为前 6 个，然后是 5 个......您是否想到如何比先反转然后使用它更有效地做到这一点？一些我还不知道的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T22:23:51.137

使用[`reversed()`功能](http://docs.python.org/2/library/functions.html#reversed)：

```
for item in reversed("1,2,3,4,5,6".split(",")): 
```

演示：

```
>>> for item in reversed("1,2,3,4,5,6".split(",")):
...     print item
... 
6
5
4
3
2
1 
```

# php - 在 WordPress 中的钩子之间传递变量

> ID：16048209
> 
> 赞同：3
> 
> 时间：2013-04-16T22:22:48.787
> 
> 标签：php, wordpress

我正在编写使用 init() 操作和 the_content() 过滤器的插件。

在初始化中，我想做一些 cookie 检查并根据结果设置一些变量（假设 $mycookieset = 1）。在 the_content 过滤器中，我想根据 $mycookieset 变量修改文章。

如何在这两个钩子之间以安全的方式传递 $mycookieset 变量？我宁愿不使用会话。它还应该是多个用户安全的（数百人同时浏览网页）。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:19:08.780

您可以在与 init 挂钩的函数中添加过滤器，并将 cookie 值用作参数中的变量`$function_to_add`：

```
 add_action( 'init', 'my_init_function' );
    function my_init_function(){
        // do the cookie stuff
        add_filter( 'the_content', 'my_variable_cookie_func_' . $mycookieset );
    } 
```

当然，您应该为每个可能的 cookie 值设置一个适当的回调函数。

# javascript - 更改现有 div 类的边距 (javascript)

> ID：16048213
> 
> 赞同：-4
> 
> 时间：2013-04-16T22:23:05.680
> 
> 标签：javascript, html

```
<div class="name">bs</div> 
```

右边距设置为 30px。我怎样才能将其更改为 10px？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:24:30.857

```
(reference to your div).style.marginRight = 10+'px'; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-16T22:26:35.947

我不喜欢内联应用样式。我会添加一个实用程序类。

```
$("element_id").addClass("utilityClassname"); 
```

# java - 有谁能够帮助将此代码从 Java 转换为 .Net（vb 或 c#）

> ID：16048219
> 
> 赞同：1
> 
> 时间：2013-04-16T22:23:37.737
> 
> 标签：java, .net

我在将这段代码从 java 转换为 .net 时遇到了一些麻烦，在本例中为 vb.net，但如果有人可以帮助我将它从 c# 转换为 vb，我很高兴。

我对以“final boolean useStandardEnding”开头的那一行没意见，这是最简单的部分。我包含了整个函数的代码以给出整个画面。我尝试了下一行和 IF 语句，但随后它开始谈论 XOR，我只是不知道从哪里开始编码。我了解 XOR 的概念，但到目前为止从未需要实际上编码它..

任何帮助将不胜感激。

```
public class TokenDecode {

  /**
   * Method to decode the User token
   * 
   * @param UserId
   * @return long - unique decoded id
   */
  public static long decode(final String UserId) {

    final int FILL_CHAR_EQUAL = 1;
    int type = 0;
    if (UserId == null) {
      throw new IllegalArgumentException("UserId can't be null");
    }

    if (UserId.endsWith("=")) {
      // new encoding
      type = 1;
    } else {
      // old encoding
      type = 2;
    }

    final boolean useStandardEnding = (type == FILL_CHAR_EQUAL);
    byte[] bytes = Base64.decode(UserId, useStandardEnding);
    if (bytes.length < 40) {
      throw new IllegalArgumentException(
          "Base64 decoded length of UserId should be 40 (Actual="
              + bytes.length + ";UserId=" + UserId + ")");
    }

    // exclusive or
    byte[] xor = { (byte) 0xa0, (byte) 0xb2, (byte) 0x91, (byte) 0x20 };
    int cnt = 0;
    for (int i = 0; i < 10; i++) {
      for (int j = 0; j < 4; j++) {
        bytes[cnt] = (byte) (bytes[cnt] ^ xor[j]);
        cnt++;
      }
      xor[3] += 4;
    }
    // rotate right 2 entities
    final byte[] buffer = new byte[8];
    System.arraycopy(bytes, 32, buffer, 0, 8);
    System.arraycopy(bytes, 0, bytes, 8, 32);
    System.arraycopy(buffer, 0, bytes, 0, 8);
    // remove leading '=' and convert to int
    String str = new String(bytes);
    final int pos = str.lastIndexOf('=');
    str = str.substring(pos + 1);
    // Added to remove the extra spaces in the userid
    // Integration.
    str = (str == null) ? null : str.trim();
    return Long.parseLong(str);
  }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:37:39.930

无法使用 java 检查输出，因为我没有在这台电脑上安装它。我尽可能快地写了它，但我对 java 有点生疏......试试看这是否有效：

```
 public static long Decode(String UserId)
    {
        int FILL_CHAR_EQUAL = 1;
        int type = 0;
        if (UserId == null)
        {
            throw new ArgumentException("UserId can't be null");
        }

        if (UserId.EndsWith("="))
        {
            // new encoding
            type = 1;
        }
        else
        {
            // old encoding
            type = 2;
        }

        bool useStandardEnding = (type == FILL_CHAR_EQUAL);
        byte[] bytes = Convert.FromBase64String(UserId);
        if (bytes.Length < 40)
        {
            throw new ArgumentException(
                "Base64 decoded length of UserId should be 40 (Actual="
                    + bytes.Length + ";UserId=" + UserId + ")");
        }

        // exclusive or
        byte[] xor = new byte[] { (byte)0xa0, (byte)0xb2, (byte)0x91, (byte)0x20 };
        int cnt = 0;
        for (int i = 0; i < 10; i++)
        {
            for (int j = 0; j < 4; j++)
            {
                bytes[cnt] = (byte)(bytes[cnt] ^ xor[j]);
                cnt++;
            }
            xor[3] += 4;
        }
        // rotate right 2 entities
        byte[] buffer = new byte[8];
        Array.Copy(bytes, 32, buffer, 0, 8);
        Array.Copy(bytes, 0, bytes, 8, 32);
        Array.Copy(buffer, 0, bytes, 0, 8);
        // remove leading '=' and convert to int
        String str = Encoding.Default.GetString(bytes);
        int pos = str.LastIndexOf('=');
        str = str.Substring(pos + 1);
        // Added to remove the extra spaces in the userid-ebay-PayPal
        // Integration.
        str = (str == null) ? null : str.Trim();
        return long.Parse(str);
    } 
```

# emacs - 如何在 emacs 启动时默认启用非全局次要模式？

> ID：16048231
> 
> 赞同：43
> 
> 时间：2013-04-16T22:24:12.707
> 
> 标签：emacs, mode

我想在`rainbow-mode`每次启动 emacs 时启用，而不必使用`M-x rainbow-mode`.

我想我在 .emacs 文件中放了一些命令。

我尝试了以下所有方法，但都没有奏效：

```
(require 'rainbow-mode)   

(rainbow-mode initialize)

(global-rainbow-mode) 
```

更一般地说，如何在启动时自动加载任何模式/包？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-16T22:46:22.983

`rainbow-mode`不是全局次要模式，因此需要在每个缓冲区的基础上启用它。

我只将它用于 CSS，所以我有：

```
(add-hook 'css-mode-hook 'my-css-mode-hook)
(defun my-css-mode-hook ()
  (rainbow-mode 1)) 
```

如果您*真的*希望它是全局的，无处不在，您可以轻松地自己定义一个全局次要模式：

```
(define-globalized-minor-mode my-global-rainbow-mode rainbow-mode
  (lambda () (rainbow-mode 1)))

(my-global-rainbow-mode 1) 
```

您可以向该函数添加任意逻辑`(lambda () (rainbow-mode 1))`（将在每个缓冲区中进行评估）以确定是否*实际*调用`(rainbow-mode 1)`给定缓冲区，因此如果您对 elisp 感到满意，那么您可以轻松扩展此方法以覆盖您对相关模式的具体要求。

* * *

> 更一般地说，如何在启动时自动加载任何模式/包？

它可能会有所不同，但我展示的方法对于大多数次要模式就足够了：要么您希望在启用时`MODE`启用它们（作为某个特定的其他模式名称），在这种情况下您可以使用`MODE-hook`变量（它将始终可用）根据`css-mode-hook`示例；或者您希望永久启用该模式，在这种情况下，全局次要模式是一种好方法（因为您可以全局打开和关闭它）。`my-global-rainbow-mode`一些次要模式默认是全局的（或提供全局变体），但如果需要，您可以根据示例创建自己的模式。

另请注意，模式可以从其他模式*派生*，在这种情况下，将运行*所有*相关挂钩（有关详细信息，请参阅[https://stackoverflow.com/a/19295380/324105](https://stackoverflow.com/a/19295380/324105)）。一个常见的用例是用于启用从它派生的*所有编程模式所需的功能（这是大多数编程模式）。*`MODE-hook``prog-mode-hook`

 *请记住，许多（希望是大多数）库和包将提供使用说明。如果找不到文档，请务必尝试`M-x` `find-library`访问库文件，然后通读顶部的注释。通常有一个信息量很大的“评论”部分，有时这是最终用户文档的主要来源，并解释了如何启用其功能。*

# python - 如何设置0-1的下三角矩阵？

> ID：16048233
> 
> 赞同：3
> 
> 时间：2013-04-16T22:24:23.763
> 
> 标签：python, arrays, matrix, numpy

我需要为 n 维制作一个矩阵，在 n=4 时看起来像这样：

```
[0,0,0,0]
[1,0,0,0]
[1,1,0,0]
[1,1,1,0] 
```

因为我需要1s的位置，即

```
0, 1
0, 2
0, 3
1, 2
1, 3
2, 3 
```

这是因为我想计算 x 点之间的距离，而不是浪费时间重复距离。这些坐标只能让我做一次。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T22:28:48.827

您实际上希望增加`1`每行中 s 的数量（从 0 开始），同时用`0`s 填充行的其余部分，从而保持恒定长度。尝试这样的事情：

```
>>> n = 4
>>> [[1]*i + [0]*(n - i) for i in xrange(n)]
[[0, 0, 0, 0], [1, 0, 0, 0], [1, 1, 0, 0], [1, 1, 1, 0]] 
```

* * *

如果您使用的是 NumPy：

```
>>> import numpy as np
>>> np.tril(np.ones((n, n), dtype=int), -1)
array([[0, 0, 0, 0],
       [1, 0, 0, 0],
       [1, 1, 0, 0],
       [1, 1, 1, 0]]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T22:28:33.637

列出理解来救援！

`>>> matrix = [[1]*i + [0]*(4-1) for i in range(4)]`

用您想要的任何范围替换 4。对于低于 3.X 的 Python，你应该`xrange`而不是`range`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T22:56:47.687

为了`n=5`

```
matrix = [[1 if x<y else 0 for x in range(n)] for y in range(n)] 
```

输出：

```
[0, 0, 0, 0, 0]
[1, 0, 0, 0, 0]
[1, 1, 0, 0, 0]
[1, 1, 1, 0, 0]
[1, 1, 1, 1, 0] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T04:08:12.293

你解释说你想要下三角矩阵的原因是为了得到 1 的位置。如果这真的是制作矩阵的唯一原因，那么有更有效的方法来生成这些位置。特别是，`itertools.combinations(range(n), 2)`将工作：

```
In [209]: import itertools

In [210]: list(itertools.combinations(range(4), 2))
Out[210]: [(0, 1), (0, 2), (0, 3), (1, 2), (1, 3), (2, 3)] 
```

# java - 将字符串转换为列表

> ID：16048234
> 
> 赞同：1
> 
> 时间：2013-04-16T22:24:26.437
> 
> 标签：java, android

我基本上是在尝试将 a 传递`List<NameValuePair>`给处理 Android 应用程序上的 POST HTTPRequest 的外部类。

```
String[] args = new String[]{"http://url/login", nameValuePairs.toString()}; //nameValuePairs is a param list to send via POST
        Log.i("params", nameValuePairs.toString());
        try {
            String text = new rest().execute(args).get();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

ASyncTask 的 doInBackgroud 接收两个参数（请求的 url 和 nameValuePairs.toString() 的结果），我找不到将字符串转换回 List<NameValuePair> 的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T23:06:55.533

我为您提供了一个示例，说明如何通过 POST 或 GET 使用 REST 服务，将 List<NameValuePair> 设置为参数，然后将响应解析为可以根据需要使用的字符串（JSON、XML 或数据帧）

```
import java.io.*;
import java.util.*;

import org.apache.http.*;
import org.apache.http.client.*;
import org.apache.http.client.entity.*;
import org.apache.http.client.methods.*;
import org.apache.http.client.utils.*;
import org.apache.http.impl.client.*;
import org.apache.http.message.*;

public class RESTHelper {

private static final String URL_POST = "http://url/login";
private static final String URL_GET = "http://url/login";

public static String connectPost(List<BasicNameValuePair> params){
    String result = "";
    try{
        HttpClient client = new DefaultHttpClient();

        HttpPost request = new HttpPost(URL_POST);

        request.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse response = client.execute(request);

        HttpEntity entity = response.getEntity();
        if(entity != null){
            InputStream instream = entity.getContent();
            result = convertStreamToString(instream);
        }
    }catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return result;
}

public static String connectGet(List<BasicNameValuePair> params){
    String result = "";
    try{
        String finalUrl = URL_GET + URLEncodedUtils.format(params, null);

        HttpClient client = new DefaultHttpClient();

        HttpGet request = new HttpGet(finalUrl);

        HttpResponse response = client.execute(request);

        HttpEntity entity = response.getEntity();
        if(entity != null){
            InputStream instream = entity.getContent();
            result = convertStreamToString(instream);
        }
    }catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return result;
}

private static String convertStreamToString(InputStream is) {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder(); 
    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:29:51.740

您不能，除非您编写某种转换器来分离已知格式，例如`nvp[0].name=xxx, nvp[0].value=zzz`等，或重新构造默认的 toString 输出（不好玩）。

通常你会使用 JSON、XML 等而不是`List.toString`.

或者使用实际的 HTTP 客户端库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T22:44:12.373

如果你执行这样的代码：

```
import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;

....

List<NameValuePair> h = new ArrayList<NameValuePair>();
h.add(new BasicNameValuePair("a", "b"));
h.add(new BasicNameValuePair("c", "d"));

Log.d("jj", h.toString()); 
```

你可以看到输出是这样的： `[a=b, c=d]`

所以你可以编写一个解析器（或者可能使用`split()`）来恢复列表。不过我觉得依赖 ArrayList 和 NameValuePair 中 toString 的实现，使用另一种序列化方式，比如 Dave 说的 JSON 并不是一个好主意。

# python - 在 python 脚本之间传递变量

> ID：16048237
> 
> 赞同：33
> 
> 时间：2013-04-16T22:24:36.813
> 
> 标签：python

我确信这很简单，但我一直无法让它正常工作。我需要让我的主要 python 脚本调用另一个 python 脚本并将变量从原始脚本传递给我调用的脚本

所以对于一个简单的例子，我的第一个脚本是，

```
first.py
x = 5
import second 
```

我的第二个脚本是

```
second.py 
print x 
```

我希望它打印 x 但我得到

```
NameError: name 'x' is not defined 
```

我不确定导入是否是实现这一目标的正确方法，但如果有人能以简单的方式阐明它，那就太好了！

谢谢，

* * *

**编辑**

阅读评论后，我想我会扩展我的问题。Aswin Murugesh 的回答解决了我遇到的导入问题，但是该解决方案没有达到预期的结果，因为我似乎无法以这种方式传递列表中的项目。

在 first.py 我有一个列表，我处理如下

```
for insert, (list) in enumerate(list, start =1):
    'call second.py passing current list item' 
```

我想将列表中的每个项目传递给第二个 python 文件以进行进一步处理（网络抓取），我不想在 first.py 中执行此操作，因为这是主“扫描”程序，然后调用其他程式。我希望这现在更有意义。

感谢您迄今为止的评论。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-17T19:04:01.410

调用脚本时，调用脚本可以访问被调用脚本的命名空间。（在您的情况下，**first**可以访问**second**的名称空间。）但是，您要求的是相反的方式。您的变量在调用脚本中定义，并且您希望被调用脚本访问调用者的命名空间。

这个SO帖子中已经在问题本身中说明了答案：

[调用模块的访问命名空间](https://stackoverflow.com/questions/9837485/access-namespace-of-calling-module)

但我将在您的上下文中解释它。

要获得您想要的内容，请使用以下行开始调用的脚本：

```
from __main__ import * 
```

这允许它访问调用者脚本的命名空间（所有变量和函数）。

所以现在你的调用脚本和以前一样：

```
x=5
import second 
```

被调用的脚本是：

```
from __main__ import *
print x 
```

这应该可以正常工作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-16T22:26:53.680

使用以下脚本：

第一.py：

```
x=5 
```

第二个.py

```
import first
print first.x 
```

这将打印 x 值。始终导入的脚本数据应使用脚本名称引用，如`first.x`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-04-26T13:42:00.293

为避免命名空间污染，请单独导入所需的变量：`from __main__ import x`等。否则，您最终会遇到您不知道的命名冲突。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-11T23:06:25.130

尝试使用 exec Python3.5：

第一个.py

```
x=5
exec(open('second.py').read()) 
```

第二个.py

```
print(x) 
```

您还可以使用以下方法传递 x：

```
x=5
myVars = {'x':x}
exec(open('second.py').read(), myVars) 
```

不确定这是否是一个好方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-05T15:24:41.907

最后，

我为 Python 创建了一个包来解决这个问题。

* * *

# 从 PIP 安装 Guli。

```
$ pip install guli 
```

Guli 不需要安装任何额外的 PIP 包。

# 有了这个包，你可以

Guli 可用于在不同的 Python 脚本之间、在多个进程之间或在同一个脚本之间传递。在主进程和另一个（多进程）进程之间传递变量。

*   在不同的 Python 脚本之间传递变量。
*   在“主进程”和另一个（多进程）进程之间传递变量。
*   在同一脚本中使用变量。
*   创建/删除/编辑 - GuliVariables。

### 例子

```
import guli
import multiprocessing

string = guli.GuliVariable("hello").get()
print(string) # returns empty string ""

def my_function():
  ''' change the value from another process '''
  guli.GuliVariable("hello").setValue(4)

multiprocessing.Process(target=my_function).start()

import time
time.sleep(0.01) # delay after process to catch the update

string = guli.GuliVariable("hello").get()
print(string) # returns "success!!!" 
```

希望我解决了很多人的问题！

# python - 异常值的 Dixon Q 检验

> ID：16048238
> 
> 赞同：2
> 
> 时间：2013-04-16T22:24:41.160
> 
> 标签：python

我用谷歌搜索并找不到内置的 Dixon's Q-test for python。我知道 R 有一个，但我的问题是我有多达 9 个位置，每个位置都有一个仪器读取读数，报告一个时间实例的值（我们称之为绒毛）。由于我们不会深入探讨的原因，如果仪器出现严重问题，数据将存储为 fluff=-999。此外，如果风吹错等，仪器会收到疯狂的读数。我想做的是对数据进行 Dixon 的 Qtest，以查看是否应该丢弃某个位置的读数，而不是用于计算数据的其他统计信息。也许这会有所帮助...

`Data[location][time]`是字典的字典。

```
for t in Time:    
    L = []
    for loc in Location:
        L.append(Data[loc][t])

    #perform Dixon's Outlier test
    average = sum(L) / len(L)
    AverData[t] = average

    #more analysis 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-07T17:18:29.967

Dixon 的 Q 检验的要点是通过偏离正态分布来识别异常值，但在这种情况下，如果 fluff=-999，您知道绒毛（可能还有行/读数中的所有其他数据）是异常值。所以听起来你不需要 Dixon's Q。

[尽管如此，这里](http://sebastianraschka.com/Articles/2014_dixon_test.html#implementing-a-dixon-q-test-function)有一个用 Python 进行的 Dixon's Q 测试的原始实现。

# java - Java中的生命游戏，人口过剩，但不知道为什么

> ID：16048239
> 
> 赞同：3
> 
> 时间：2013-04-16T22:24:42.337
> 
> 标签：java, conways-game-of-life

这是家庭作业。我在底部包含了相关代码。

**问题：** 在尝试允许用户调整网格大小时，现在绘制的网格严重过度填充。

**屏幕截图：** “人口过剩” - [http://i.imgur.com/zshAC6n.png](http://i.imgur.com/zshAC6n.png) “所需人口” - [http://i.imgur.com/5Rf6P42.png](http://i.imgur.com/5Rf6P42.png)

**背景：** 这是康威生命游戏的一个版本。在课堂上，我们完成了 3 个类：处理游戏逻辑的 LifeState、包含游戏的 JPanel 的 LifePanel，以及创建 JFrame 并添加 LifePanel 的驱动程序。任务是将其开发成具有各种要求的完整 GUI 应用程序。我的解决方案是扩展 JFrame 并在该课程中完成我的大部分工作。

在 actionlistener 之外初始化 LifePanel 会产生正常填充，但在 actionlistener 中初始化 LifePanel 会“过度填充”网格。

**问：**为什么会出现人口过剩？

LifePanel 类

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.Random;

public class LifePanel extends JPanel implements MouseListener
{
private int row;
private int col;
private int scale;
private LifeState life;
boolean state;
boolean wrap;
int delay;
Timer timer;

public LifePanel(int r, int c, int s, int d)
{
    row = r;
    col = c;
    scale = s;
    delay = d;
    life = new LifeState(row,col);
    Random rnd = new Random();
    for(int i=0;i<row;i++)
        for(int j=0;j<col;j++)
            life.setCell(i,j,rnd.nextBoolean());
    timer = new Timer(delay, new UpdateListener());
    setPreferredSize( new Dimension(scale*row, scale*col));
    addMouseListener(this);
    timer.start();
}

public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    for(int i=0;i<row;i++)
        for(int j=0;j<col;j++)
            if(life.getCell(i,j))
                g.fillRect(scale*i,scale*j,scale,scale);
}

public int getRow() {
    return row;
}

public void setRow(int row) {
    this.row = row;
}

public int getCol() {
    return col;
}

public void setCol(int col) {
    this.col = col;
}

public int getScale() {
    return scale;
}

public void setScale(int scale) {
    this.scale = scale;
}

public int getDelay() {
    return delay;

}

public void setDelay(int delay) {
    this.delay = delay;
    timer.setDelay(delay);
}

public void pauseGame(){
    timer.stop();
}
public void playGame(){
    timer.restart();
}
public void setInitState(boolean set){
    state = set;
    if(state){
      timer.stop();
    }
}
public void setWrap(boolean set){
    wrap = set;
    if(wrap){
    //implement allow wrap
    }
}

@Override
public void mouseClicked(MouseEvent e) {
  if(state){
    int x=e.getX(); 
    int y=e.getY();
    boolean isFilled;
    isFilled = life.getCell(x,y);
    //Test pop-up
    JOptionPane.showMessageDialog(this, x+","+y+"\n"+life.getCell(x,y));
    if(isFilled){
      life.setCell(x,y,false);
    }else{
      life.setCell(x,y,true);
    }
    repaint();
  }
}

@Override
public void mousePressed(MouseEvent e) {}

@Override
public void mouseReleased(MouseEvent e) {}

@Override
public void mouseEntered(MouseEvent e) {}

@Override
public void mouseExited(MouseEvent e) {}

private class UpdateListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        life.iterate();
        repaint();
    }
}

} 
```

LifeFrame 类

```
import javax.swing.*; 
import java.awt.*; 
import java.awt.event.*; 

public class LifeFrame extends JFrame implements ActionListener{ 

JMenuBar menuBar; 
JMenu mainMenu, helpMenu; 
JMenuItem restartItem, quitItem, helpItem; 
JButton stopButton, playButton, pauseButton, startButton; 
CardLayout cardLayout = new MyCardLayout(); 
CardLayout cardLayout2 = new MyCardLayout(); 
SetupPanel setupPanel; //panel for input 
LifePanel gamePanel;  //game panel 
JPanel controls = new JPanel(); //controls for game 
JPanel controls2 = new JPanel(); //controls for input panel 
JPanel cardPanel = new JPanel(cardLayout); 
JPanel cardPanel2 = new JPanel(cardLayout2); 
int gridRow=480; 
int gridCol=480; 
int scale=1; 
int delay=2;
boolean setState = false; 
boolean setWrap = false; 

public LifeFrame() { 
    setTitle("Game of Life"); 
    setLayout(new BorderLayout()); 

    //Add the Panels 
    setupPanel = new SetupPanel(); 
    gamePanel = new LifePanel(gridRow,gridCol,scale,delay); 
    cardPanel.add(setupPanel, "1");
    cardPanel.add(gamePanel, "2");
    add(cardPanel, BorderLayout.NORTH); 

    cardPanel2.add(controls2, "1"); 
    cardPanel2.add(controls, "2"); 
    add(cardPanel2, BorderLayout.SOUTH); 
    //init menu 
    menuBar = new JMenuBar(); 

    //button listener setup 
    stopButton = new JButton("Stop"); 
    pauseButton = new JButton("Pause"); 
    playButton = new JButton("Play"); 
    startButton = new JButton("Start"); 
    stopButton.addActionListener(this); 
    pauseButton.addActionListener(this); 
    playButton.addActionListener(this); 
    startButton.addActionListener(this); 
    //menu listener setup 
    restartItem = new JMenuItem("Restart", KeyEvent.VK_R); 
    quitItem = new JMenuItem("Quit", KeyEvent.VK_Q); 
    helpItem = new JMenuItem("Help", KeyEvent.VK_H); 
    restartItem.addActionListener(this); 
    quitItem.addActionListener(this); 
    helpItem.addActionListener(this); 
    //add buttons 
    controls.add(stopButton); 
    controls.add(pauseButton); 
    controls.add(playButton); 
    controls2.add(startButton); 
    //build the menus 
    mainMenu = new JMenu("Menu"); 
    mainMenu.setMnemonic(KeyEvent.VK_M); 
    helpMenu = new JMenu("Help"); 
    helpMenu.setMnemonic(KeyEvent.VK_H); 
    menuBar.add(mainMenu); 
    menuBar.add(helpMenu); 
    setJMenuBar(menuBar); 
    //add JMenuItems 
    restartItem.getAccessibleContext().setAccessibleDescription("Return to setup screen"); 
    mainMenu.add(restartItem); 
    mainMenu.add(quitItem); 
    helpMenu.add(helpItem); 

    this.addWindowListener(new WindowAdapter(){ 
        public void windowClosing(WindowEvent e){ 
            System.exit(0); 
        } 
    }); 

    pack(); 
    setLocationRelativeTo(null); 
    setVisible(true); 
    setDefaultCloseOperation(EXIT_ON_CLOSE); 
} 
@Override 
public void actionPerformed(ActionEvent e) { 
    try{ 
    gridRow = setupPanel.getRowSize(); 
    gridCol = setupPanel.getColSize(); 
    scale = setupPanel.getScale(); 
    delay = setupPanel.getDelay(); 
    setWrap = setupPanel.getSetWrap(); 
    setState = setupPanel.getSetState(); 
    }catch (NumberFormatException n){ 
        JOptionPane.showMessageDialog(LifeFrame.this, "Make sure the fields contain only digits and are completed!"); 
        return; 
    } 
    if(e.getSource() == pauseButton){ 
        gamePanel.pauseGame(); 
    }else if(e.getSource() == playButton){ 
        gamePanel.playGame(); 
    }else if(e.getSource() == quitItem){ 
        System.exit(0); 
    }else if(e.getSource() == restartItem || e.getSource() == stopButton){ 
        cardLayout.show(cardPanel, "1"); 
        cardLayout2.show(cardPanel2, "1"); 
        pack();
        setLocationRelativeTo(null);
    }else if(e.getSource() == helpItem){ 
        String helpText = "Help\nPlease make sure every field is completed and contains only digits\nCurrent Stats:\nGrid Size: "+gamePanel.getRow()+" by "+gamePanel.getCol()+"\nScale: "+ gamePanel.getScale() +"\nDelay: "+gamePanel.getDelay()+"\nManual Initial State: "+setState+"\nEnable Wrapping: "+setWrap;
        JOptionPane.showMessageDialog(LifeFrame.this, helpText); 
    }else if(e.getSource() == startButton){ 

        gamePanel = new LifePanel(gridRow,gridCol,scale,delay); 
        cardPanel.add(gamePanel, "2");
        /*
         * Alternate solution, throws array index out of bounds due to array usage in the LifePanel, but properly 
         * populates the grid.
         * 
        gamePanel.setRow(gridRow);
        gamePanel.setCol(gridCol);
        gamePanel.setScale(scale);
        gamePanel.setDelay(delay);
        */
        if(setWrap){ 
            gamePanel.setWrap(true); 
            gamePanel.playGame(); 
        }else if(setState){ 
            gamePanel.setInitState(true); 
        }else{ 
            gamePanel.setWrap(false); 
            gamePanel.setInitState(false); 
            gamePanel.playGame(); 
        }
        gamePanel.repaint(); 
        cardLayout.show(cardPanel, "2"); 
        cardLayout2.show(cardPanel2, "2"); 
        pack();
        setLocationRelativeTo(null);
    } 
} 
public static class MyCardLayout extends CardLayout { 

    @Override 
    public Dimension preferredLayoutSize(Container parent) { 

        Component current = findCurrentComponent(parent); 
        if (current != null) { 
            Insets insets = parent.getInsets(); 
            Dimension pref = current.getPreferredSize(); 
            pref.width += insets.left + insets.right; 
            pref.height += insets.top + insets.bottom; 
            return pref; 
        } 
        return super.preferredLayoutSize(parent); 
    } 

    public Component findCurrentComponent(Container parent) { 
        for (Component comp : parent.getComponents()) { 
            if (comp.isVisible()) { 
                return comp; 
            } 
        } 
        return null; 
    } 

} 
} 
```

感谢您阅读所有这些内容，并提前为您提供任何帮助/建议。

编辑：添加了屏幕截图和精致的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:17:44.347

根据您的初始化方式`LifePanel`

```
Random rnd = new Random();
for(int i=0;i<row;i++)
    for(int j=0;j<col;j++)
        life.setCell(i,j,rnd.nextBoolean()); 
```

你所说的“人口过剩”是预期的状态。上面的代码会将大约 1/2 的单元格设置为“活着”（或“占用”），这就是您的“人满为患”状态的样子。

“期望人口”屏幕截图包含许多“生命”人工制品，例如“蜂箱”、“滑翔机”、“红绿灯”等，或者是手动构建的，或者是在最初 50% 的随机人口上运行多次迭代的结果。由于邻近规则，第一代人口占人口的 50%，将导致许多细胞的大规模清除（“死亡”）。

最关键的是，考虑到在启动时，您的程序不会绘制初始配置。`repaint()`在第一次调用之前至少发生一次迭代。

我认为您的代码根本没有损坏，只是您对初始人口的期望。

# c# - 正则表达式替换不会替换所有出现

> ID：16048241
> 
> 赞同：1
> 
> 时间：2013-04-16T22:24:50.017
> 
> 标签：c#, html, regex

我使用下面的正则表达式替换两个单词之间的文本。它有效，只是它跳过了其中一些。下面粘贴的是一个示例。

```
var EditedHtml = Regex.Replace(htmlText, @"<script(.*?)</script>", ""); 
```

html文本：

```
 <head>
   <script src=" https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
   <script src=" https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js" type="text/javascript"></script>
   <script src="/AspellWeb/v2/js/dragiframe.js" type="text/javascript"></script>
   <script type="text/javascript">
     var applicationName = '/';
     FullPath = (applicationName.length > 1) ? 'http://localhost:65355' + applicationName : 'http://localhost:65355';
     //FullPath = 'http://localhost:65355';
     GetPath = function (url) {
     return FullPath + url;
   }
   </script>

   <script type="text/javascript" src="../../Scripts/stats.js?"></script>
</head>

<body>
  .......
  <script type="text/javascript">
    function loadAndInit() {

    $(".dvloading").hide();
    if ($.browser.mozilla) {
      if (location.pathname == "/Stats/Reports") {            // This is for local env.
        $("#prntCss").attr("href", "../../../Content/SitePrint_FF.css");
      }
      else {                                                  // This is for DEV/QA/STAGE/PROD env. 
        $("#prntCss").attr("href", "../../Content/SitePrint_FF.css");
      }
    }

  }
  </script>
</body> 
```

编辑的HTML：

```
<head>
  <script type="text/javascript">
    var applicationName = '/';
    FullPath = (applicationName.length > 1) ? 'http://localhost:65355' + applicationName : 'http://localhost:65355';
    //FullPath = 'http://localhost:65355';
    GetPath = function (url) {
      return FullPath + url;
    }
  </script>
</head>

<body>
  .......
  <script type="text/javascript">
    function loadAndInit() {

      $(".dvloading").hide();
      if ($.browser.mozilla) {
        if (location.pathname == "/Stats/Reports") {            // This is for local env.
          $("#prntCss").attr("href", "../../../Content/SitePrint_FF.css");
        }
        else {                                                  // This is for DEV/QA/STAGE/PROD env. 
          $("#prntCss").attr("href", "../../Content/SitePrint_FF.css");
        }
      }

    }
  </script>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T22:46:11.803

为什么要使用 Regex 来解析 html。看到[这个](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

[使用像HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)这样的真正的 html 解析器会容易得多

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.Load(filename); //or doc.LoadHtml(HtmlString)

doc.DocumentNode.Descendants()
    .Where(n => n.Name == "script").ToList()
    .ForEach(s => s.Remove());

StringWriter wr = new StringWriter();
doc.Save(wr);
var newhtml = wr.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T22:30:53.007

[在单行模式下](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)尝试：

```
var EditedHtml = Regex.Replace(
    htmlText, @"<script(.*?)</script>", "", 
    RegexOptions.Singleline); 
```

文档引用：

> 指定单行模式。更改点 (.) 的含义，使其匹配每个字符（而不是除 \n 之外的每个字符）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T22:31:04.993

尝试

```
var EditedHtml = Regex.Replace(
    htmlText, @"<script(.*?)</script>", "", RegexOptions.Singleline
); 
```

使用单行模式，以便`.`匹配任何字符，*包括*换行符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T22:50:22.133

尝试这个：

```
//(.|\r\n)*: matches every character and/or newline zero or more times
//(.|\r\n)*?: as few times as possible == > you get rid of <script> tags and of their content but you keep the rest of your html
var EditedHtml = Regex.Replace(htmlText, @"<script (.|\r\n)*?</script>", ""); 
```

希望能帮助到你

参考资料：http: [//msdn.microsoft.com/en-us/library/az24scfc.aspx](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

# android - 试图让 textView 坚持到 gridView 滚动

> ID：16048246
> 
> 赞同：1
> 
> 时间：2013-04-16T22:25:16.630
> 
> 标签：android, android-layout, android-gridview, android-scroll

我有一个带有`textView`给出说明的片段，下面是`gridView`. 我想让`textView`向上滚动`gridView`。换句话说：用于在滚动`textView`时从屏幕上消失。`gridView`

我如何实现这一点的想法是提供`gridView`一个固定的高度，使整个布局可滚动——包括`textView`. 但是，直到我无法做到这一点。有没有办法做到这一点？

**布局无滚动：**

![布局无滚动](https://i.stack.imgur.com/Y70ZL.png)

**滚动时：**

![滚动时：](https://i.stack.imgur.com/p6LNY.png)

任何帮助/建议将不胜感激。

我的布局 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/LightGrey"
    android:gravity="center_horizontal|center_vertical"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/chooseLine"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="18dp"
        android:text="@string/chooseLine"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <GridView
        android:id="@+id/gridLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:columnWidth="130dp"
        android:fitsSystemWindows="false"
        android:gravity="center"
        android:horizontalSpacing="5dp"
        android:numColumns="auto_fit"
        android:paddingTop="0dp"
        android:stretchMode="columnWidth"
        android:verticalSpacing="25dp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:47:45.387

实现这一目标绝非易事。您需要的是 ListView 添加标题视图的能力，但不幸的是，GridView 不提供该功能。

我过去解决这个问题的做法是将GridView转换为ListView，然后将header添加到ListView中。我创建了一个包装适配器，它采用原始适配器并将水平行的网格单元格组合成一个列表行。

棘手的部分包括：根据屏幕宽度动态调整一行中的列数，考虑一行中的所有视图类型组合和最后一行中剩余的空列，以及正确处理点击交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:31:05.027

将整个 LinearLayout 放在 ScrollView 中（[如何在 Android 中使用 ScrollView？](https://stackoverflow.com/questions/6674341/how-to-use-scrollview-in-android)）并为 GridView 设置 android:layout_height="wrap_content"

# javascript - 如何根据 JavaScript 中的文本框输入更改数组中的图像？

> ID：16048249
> 
> 赞同：1
> 
> 时间：2013-04-16T22:25:32.617
> 
> 标签：javascript, arrays, image, textbox

我正在尝试制作我的页面，以便用户可以键入 1 到 200 之间的数值来访问他们想要查看的任何图像。我已经玩过代码，但我似乎无法得到任何工作。下面是我尝试使用的代码。我究竟做错了什么？

编辑：新代码：

```
`
<html>
<head>
<title></title>
</head>
<body style="background-color: teal;">
<form>
<center>
<div width="50%" style="width: 50%;">
<div id="main" align="middle">
<img src="page1.jpg" alt="" id="mainImg" height="90%">
</div> 
<div id="imglist">
<a href="javascript:previousImage('mainImg')"><img src="previous.png" alt="" 
align="left"></a>
<input id="myid" name="myid" size="3" type="text"></input>
<a href="javascript:nextImage('mainImg')"><img src="next.png" alt="" align="right"></a>
<script>
var imgArray = new Array();

var imgs = [];
for (var i = 0; i < 200; i++) {
imgs[i] = new Image();
imgs[i].src = "page" + (i + 1) + ".jpg";
}

function nextImage(element)
    {
    var img = document.getElementById(element);

    for(var i = 0; i < imgArray.length;i++)
    {
        if(imgArray[i].src == img.src) // << check this
        {
            if(i === imgArray.length){
                document.getElementById(element).src = imgArray[0].src;
                break;
            }
            document.getElementById(element).src = imgArray[i+1].src;
            break;
        }
    }
}

function previousImage(element)
{
   var img = document.getElementById(element);

   for(var i = 0; i < imgArray.length;i++)
  {
      if(imgArray[i].src == img.src)
      {
         if(i === 0){
            document.getElementById(element).src = imgArray[imgArray.length-1].src;
            break;
         }
         else{
            document.getElementById(element).src = imgArray[i-1].src;
            break;
         }
      }
   }
}

window.onload = function() {
   var elm = document.getElementById("myid"),
   var img = document.getElementById("mainImg");
   elm.onkeyup = function(event) {
      if (this.value) {
         var num = parseInt(this.value, 10);
             if (num >= 1 && num <= 200 {
            img.src = "page" + num + ".jpg";
         }
      }
   }
} 
</script>
</div>
</div>
</center>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:29:55.557

也许你的意思是：

```
if (this.value.length === 1,2,3) { 
```

变成这样：

```
if (this.value.length <= 3) { 
```

此外，我认为您希望将整个输入值转换为数字，而不是使用单个键码。

我可能会建议这种更[干燥](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的不同/更简单的方法（不要重复自己）：

```
// preload images
var imgs = [];
for (var i = 0; i < 200; i++) {
    imgs[i] = new Image();
    imgs[i].src = "page" + (i + 1) + ".jpg"; 
}

window.onload = function() {
   var elm = document.getElementById("myid");
   var img = document.getElementById("mainImg");
   elm.onkeyup = function(event) {
      if (this.value) {
          var num = parseInt(this.value, 10);
          if (num >= 1 && num <= 200) {
              img.src = "page" + num + ".jpg";
          }
      }
   }
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/4dqbP/](http://jsfiddle.net/jfriend00/4dqbP/)

变更摘要：

1.  在循环中预加载图像而不是复制代码
2.  动态构建图像名称
3.  将`img`变量设置为局部变量，而不是`var`前面的隐式全局变量
4.  检查输入字段是否为空
5.  用于`parseInt()`将输入字段的值解析为数字
6.  范围检查解析的数字
7.  如果在有效范围内，则使用该数字构造图像名称

# php - 使用jQuery调用PHP函数

> ID：16048250
> 
> 赞同：0
> 
> 时间：2013-04-16T22:25:44.207
> 
> 标签：php, jquery, wordpress

我一直在做一些关于从 jQuery 调用文件中的 PHP 函数的研究，并且似乎找不到正确的方法来执行此操作而不会失败。我正在尝试使用 MVVM 创建一个中间（某种）CMS，以创建一个具有 WordPress 基础的单页网站。

目前，我在尝试访问已分配文件中的 PHP 函数时遇到了一些困难，我在[这里](https://stackoverflow.com/questions/14600989/ajax-in-wordpress-not-calling-php-function)、[这里](https://stackoverflow.com/questions/8487172/wordpress-jquery-how-to-call-a-wordpress-function-with-jquery-on-click-event)和[这里](https://stackoverflow.com/questions/15757750/php-function-call-using-javascript/15757864#15757864)看到了有关如何使用每个文件的函数来执行此操作的示例，但我想能够在文件中调用函数，因为它给了我更清晰的概述。

我检查了链接，它是正确的，调用了 PHP 文件，`posts.php`并且它位于 定义的位置`window.MODELS`，但是该函数`fetch_all`没有被执行。

JavaScript

```
//call php function
var requestURL = window.MODELS + 'posts/fetch_all';

$.get(requestURL, function(data){
    console.log('checking data: ', data);
}, 'json')
    .done(function(passed){
        console.log('it worked!');
    })
    .fail(function(failed){
        console.log('it failed :( ');
    }); 
```

PHP

```
public function fetch_all(){
    return json_encode("this is fetch_all..."); //replace text to get all posts with get_posts()
} 
```

控制台显示 JavaScript 失败：“它失败了 :( ”。我如何让 'fetch_all' 被执行并返回数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T22:31:52.263

您从 jQuery 调用的 URL*必须*与服务器上 .php 文件的位置相匹配，例如要调用的正确 URL 是：

```
var requestURL = window.MODELS + 'posts.php?action=fetch_all'; 
```

然后，在您的 PHP 文件中，您必须根据查询参数选择要调用的函数。您可以在函数声明之后添加此代码，以便根据“操作”查询参数调用正确的函数：

```
if ($_REQUEST['action'] == 'fetch_all')
    echo fetch_all();
else
    echo json_encode( array( 'status' => 'error') ); 
```

还要记住，您的输出应该被*回*显以生成输出，而不是简单地返回。

希望有帮助，A.

# sql - Wordpress - ACF - 使用转发器日期字段多次发布

> ID：16048254
> 
> 赞同：1
> 
> 时间：2013-04-16T22:26:21.897
> 
> 标签：sql, wordpress

我有一个`koncerty`带有自定义日期字段的自定义帖子类型`datum`，我目前正在使用此查询检索帖子（效果很好）：

```
$date = date("Ymd");
$sql = <<<SQL
SELECT p.ID, p.post_content, p.post_title, datum.meta_value as datum, featured.meta_value as featured
FROM {$wpdb->posts} p
LEFT JOIN {$wpdb->postmeta} featured 
    ON featured.post_id = p.ID 
    AND featured.meta_key = 'featured'
LEFT JOIN {$wpdb->postmeta} datum 
    ON datum.post_id = p.ID 
    AND datum.meta_key = 'datum'
WHERE 
    p.post_type = 'koncert' 
    AND p.post_status = 'publish'
    AND datum.meta_value >= '$date'
  ORDER BY featured DESC, datum ASC, RAND()
LIMIT 3
SQL;

$posts = $wpdb->get_results( $sql ); 
```

我想`datum`使用 ACF 转发器字段插件使该字段可重复。我应该如何修改查询，以多次获取帖子？即，我将有一个包含三个日期的节目，并且需要像这样显示它

*   1.1.2013 - 显示 1 - 信息
*   2.1.2013 - 显示 1 - 信息
*   3.1.2013 - 显示 1 - 信息

这里有一些教程：http: [//www.advancedcustomfields.com/resources/tutorials/querying-the-database-for-repeater-sub-field-values/](http://www.advancedcustomfields.com/resources/tutorials/querying-the-database-for-repeater-sub-field-values/)，但我有限的 sql 知识我不能把它一起。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:24:49.080

我似乎让它工作了，这是查询：

```
SELECT p.ID, p.post_content, p.post_title, datum.meta_value as datum, datum.meta_key , featured.meta_value as featured
FROM wp_posts p
LEFT JOIN wp_postmeta featured 
    ON featured.post_id = p.ID 
    AND featured.meta_key = 'featured'
LEFT JOIN wp_postmeta datum 
    ON datum.post_id = p.ID 
    AND datum.meta_key LIKE  'datum2_%_datum_koncertu'
WHERE 
    p.post_type = 'koncert' 
    AND p.post_status = 'publish'
    AND datum.meta_value >= '$date'
  ORDER BY featured DESC, datum ASC, RAND()
LIMIT 3 
```

我使用`'datum2_%_datum_koncertu'`，因为 ACF 用于将数据保存到数据库的命名约定是`$ParentName_$RowNumber_$ChildName`（请参阅此处[http://www.advancedcustomfields.com/resources/tutorials/querying-the-database-for-repeater-sub-field-values/](http://www.advancedcustomfields.com/resources/tutorials/querying-the-database-for-repeater-sub-field-values/)）。

这样查询多次返回每个帖子，并显示日期，我只是使用`<?php date("d.m.", strtotime($post->datum))?>`

不确定，如果 wp_query 完全可以做到这一点。

# c# - parallel.foreach - loopState.Stop() 与 Cancellation

> ID：16048260
> 
> 赞同：6
> 
> 时间：2013-04-16T22:26:43.390
> 
> 标签：c#, cancellation-token

Cancellation 操作与 loopState 操作（Break/Stop）有什么区别？

```
private static CancellationTokenSource cts;
public static loopingMethod()
{
cts = new CancellationTokenSource();
try
{
    ParallelOptions pOptions = new ParallelOptions();
    pOptions.MaxDegreeOfParallelism = 4;
    pOptions.CancellationToken = cts.Token;
    Parallel.ForEach(dictObj, pOptions, (KVP, loopState) =>
    {
        pOptions.CancellationToken.ThrowIfCancellationRequested();
        parallelDoWork(KVP.Key, KVP.Value, loopState);
     }); //End of Parallel.ForEach loop
 }
 catch (OperationCanceledException e)
 {
 //Catestrophic Failure
 return -99;
 }
}

public static void parallelDoWork(string Id, string Value, ParallelLoopState loopState)
{
   try{
      throw new exception("kill loop");
   }
   catch(exception ex)
   {
       if(ex.message == "kill loop")
       {
           cts.Cancel();
           //Or do I use loopState here?
       }
   }
} 
```

为什么我要使用 ParallelOptions Cancellation 操作而不是`loopState.Break();`反之亦然`loopState.Stop();`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:40:40.943

看这篇[文章](http://tipsandtricks.runicsoft.com/CSharp/ParallelClass.html)

“设置取消令牌允许您中止 Invoke（请记住，当委托抛出异常时，异常被吞没，并且只有在所有其他委托都已**执行****后才由 Invoke 重新抛出**）。”

 ***场景 1.*假设您有一个用户要向所有前 [女孩|男孩] 朋友发送消息。他们点击发送，然后他们意识到并想要取消它。通过使用取消令牌，他们能够阻止进一步的消息发出。因此，如果您有一个允许取消的长时间运行的进程，请使用取消令牌。

*场景 2*另一方面，如果您不希望进程被中断，则使用正常的循环状态异常，这样异常将被吞没，直到所有线程完成。

*场景 3*如果您有一个 I/O 密集型进程，那么您可能希望使用 async/await 而不是 parallel.foreach。查看 Microsoft 的[基于任务的异步模式](http://www.microsoft.com/en-us/download/details.aspx?id=19957)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:21:08.303

`ParallelLoopState.Break`/`Stop`具有特定于循环执行的明确定义的语义。即通过使用这些，您可以非常具体地了解您希望循环如何终止。`CancellationToken`另一方面，A是 TPL 中的通用停止机制，因此它对并行循环没有什么特别的作用。使用令牌的优点是它可以在其他 TPL 功能之间共享，因此您可以拥有由相同令牌控制的任务和循环。**

# c++ - C ++中的Matlab griddata等效

> ID：16048263
> 
> 赞同：5
> 
> 时间：2013-04-16T22:26:53.253
> 
> 标签：c++, matlab, interpolation

我正在寻找与 Matlab 的 griddata 函数或任何 2D 全局插值方法等效的 C++。

我有一个使用特征 3 的 C++ 代码。我将有一个包含 x、y 和 z 值的特征向量，以及两个与 Matlab 中的 Meshgrid 生成的特征矩阵等效的特征矩阵。我想将向量中的 z 值插入到由 Meshgrid 等效项定义的网格点上（这将稍微超出原始点的外部，因此需要进行少量外推）。

我不太在意准确性——它不需要完美。但是，我不能接受 NaN 作为解决方案——无论数据间隙如何，都必须在网格上的任何地方计算插值。换句话说，留在凸包内不是一种选择。

我不想从头开始编写插值，但如果有人想指出我非常好的（和明确的）食谱，我会试一试。这不是最可恨的东西（至少在算法意义上），但我不想重新发明轮子。

实际上，我所拥有的是分散的地形位置，我希望定义一个直线网格，名义上沿着地形下方的一段距离供以后使用。一旦我有了节点点，我就会很好。

到目前为止我的研究：

这里提出的问题：[C++ 中的 MATLAB 函数](https://stackoverflow.com/questions/1329994/matlab-functions-in-c)产生了一个接近的答案，但不幸的是，这个建议不是免费的（SciMath）。

我曾尝试了解通用映射工具中使用的插值函数，但结果令人头疼。

我简要地查看了网格算法库 (GrAL)。如果有人有评论，我将不胜感激。

Eigen 有一个不受支持的插值包，但它似乎只适用于曲线（而不是曲面）。

编辑：VTK 具有 matplotlib 功能。据推测，为了显示目的，其中某处必须使用插值。有谁知道这是否可以访问和使用？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T22:41:22.903

这可能有点晚了，但希望它可以帮助某人。

方法 1.) Octave：如果您来自 Matlab，一种方法是将 gnu Matlab 克隆 Octave 直接嵌入到 c++ 程序中。我对此没有太多经验，但是您可以直接从 cpp 文件中调用 octave 库函数。

例如，请参见此处。 [http://www.gnu.org/software/octave/doc/interpreter/Standalone-Programs.html#Standalone-Programs](http://www.gnu.org/software/octave/doc/interpreter/Standalone-Programs.html#Standalone-Programs)

griddata 包含在 octave 的几何包中。

方法 2.) PCL：我这样做的方法是使用点云库 ( [http://www.pointclouds.org](http://www.pointclouds.org) ) 和 VoxelGrid。您可以随意设置 x 和 y bin 大小，然后设置一个非常大的 z bin 大小，这将为每个 x,y bin 获取一个 z 值。问题是 x、y 和 z 值是平均到 bin 中的点的质心，而不是 bin 中心（这也是它适用于此的原因）。所以你需要在完成后按摩 x,y 值：

例如：//读入逗号分隔值列表 (x,y,z) FILE * fp; fp = fopen("points.xyz","r");

```
//store them in PCL's point cloud format
pcl::PointCloud<pcl::PointXYZ>::Ptr basic_cloud_ptr (new pcl::PointCloud<pcl::PointXYZ>);

int numpts=0;
double x,y,z;
while(fscanf(fp, "%lg, %lg, %lg", &x, &y, &z)!=EOF)
{
    pcl::PointXYZ basic_point;
    basic_point.x = x; basic_point.y = y; basic_point.z = z;
    basic_cloud_ptr->points.push_back(basic_point);
}
fclose(fp);
basic_cloud_ptr->width = (int) basic_cloud_ptr->points.size ();
basic_cloud_ptr->height = 1;

// create object for result
pcl::PointCloud<pcl::PointXYZ>::Ptr cloud_filtered(new pcl::PointCloud<pcl::PointXYZ>());

// create filtering object and process
pcl::VoxelGrid<pcl::PointXYZ> sor;
sor.setInputCloud (basic_cloud_ptr);
//set the bin sizes here.  (dx,dy,dz).  for 2d results, make one of the bins larger 
//than the data set span in that axis
sor.setLeafSize (0.1, 0.1, 1000);
sor.filter (*cloud_filtered); 
```

所以 cloud_filtered 现在是一个点云，每个 bin 都包含一个点。然后我只是制作一个二维矩阵，并通过点云将点分配给他们的 x，y 箱，如果我想要一个图像等，就像 griddata 产生的那样。它工作得很好，而且它比 matlab 的大型数据集的 griddata 快得多。

# ruby-on-rails - 使用 Backbone Rails 并得到一个`cannot load such file -- ejs`

> ID：16048265
> 
> 赞同：4
> 
> 时间：2013-04-16T22:26:55.573
> 
> 标签：ruby-on-rails, backbone.js, ejs

回溯什么也没解释：

```
ActionView::Template::Error (cannot load such file -- ejs
  (in /app/assets/javascripts/backbone/templates/questions/connections_game.jst.ejs)): 
```

这真的很奇怪，因为我有另外两个现有的文件是`.jst.ejs`文件，并且它们*只有*在它们被完全命名时才能工作。如果我改变拼写从..

```
foobar.jst.ejs 
```

至

```
foobar_again.jst.ejs 
```

这也将返回相同的错误。如果我只保留我的两个 ejs 文件而不添加任何新文件，那么该应用程序可以正常工作。

我的 .ejs 文件中没有内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T20:46:55.710

更新我的 ejs gem 解决了这个问题。

# python - 在安装了多个版本的 python 的情况下运行 py2exe

> ID：16048269
> 
> 赞同：1
> 
> 时间：2013-04-16T22:27:20.220
> 
> 标签：python, py2exe

我安装了 python 3.2 和 python 2.7。我正在尝试编译一个文件，但由于打开 .py 文件的默认程序是 3.2，所以当我运行该程序时，它给了我一个错误，因为没有安装 py2exe。我尝试将默认程序设置为 python 2.7，但它不起作用，因为两个版本具有相同的名称。我更改了 python 2.7 的名称，但程序根本无法运行。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:14:36.983

使用绝对路径指向 python 解释器可执行文件。

`c:\python27\python.exe setup.py py2exe`

或者 install `cx_Freeze`，这似乎比 py2exe 好得多，只是缺少 onefile 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:47:38.957

您需要确保 C:\Python27 在您的 Path 环境变量中，而 C:\Python33 不是。但正如 Blender 的评论所提到的，你不能在 Python 3.x 中使用 py2exe。

请参阅[此处](http://www.itechtalk.com/thread3595.html)了解如何在 Windows 7 中更改环境变量。

# matplotlib - Matplotlib cmap 值必须在 0-1 之间

> ID：16048270
> 
> 赞同：0
> 
> 时间：2013-04-16T22:27:29.890
> 
> 标签：matplotlib

我在使用以下代码时遇到问题：

```
import matplotlib.pyplot as plt
import matplotlib.image as mpimg
import numpy as np
from pylab import *
import sys

s = (('408b2e00', '24.21'), ('408b2e0c', '22.51'), ('4089e04a', '23.44'), ('4089e04d', '24.10'))

temp = [x[1] for x in s]
print temp

figure(figsize=(15, 8))

pts = [(886.38864047695108, 349.78744809964849), (1271.1506973277974, 187.65500904929195), (1237.272277227723, 860.38363675077176), (910.58751197700428, 816.82566805067597)]

x = map(lambda x: x[0],pts) # Extract the values from pts
y = map(lambda x: x[1],pts) 
t = temp

result = zip(x,y,t)

img = mpimg.imread('floor.png')
imgplot = plt.imshow(img, cmap=cm.hot)
scatter(x, y, marker='h', c=t, s=150, vmin=-20, vmax=40)
print t

# Add cmap
colorbar()
show() 
```

给定 s 中的温度 - 我正在尝试设置 cmap 的值，这样我就可以使用 -10 到 30 之间的温度，而不必使用 1 到 0 之间的值。我已经设置了 vmin 和 vmax 值，但它仍然给了我下面的错误：

```
ValueError: to_rgba: Invalid rgba arg "23.44" to_rgb: Invalid rgb arg "23.44" gray (string) must be in range 0-1 
```

我使用早期的代码来简化问题并取得了成功。下面的这个例子有效并显示了我正在尝试（希望）做的事情：

```
import matplotlib.pyplot as plt
import matplotlib.image as mpimg
import numpy as np
from pylab import *

figure(figsize=(15, 8))
# use ginput to select markers for the sensors
matplotlib.pyplot.hot()

markers = [(269, 792, -5), (1661, 800, 20), (1017, 457, 30)]
x,y,t = zip(*markers)

img = mpimg.imread('floor.png')
imgplot = plt.imshow(img, cmap=cm.hot)
scatter(x, y, marker='h', c=t, s=150, vmin=-10, vmax=30)

colorbar()
show() 
```

任何想法为什么只有第二种解决方案有效？我正在使用动态值，即来自 mysql 的输入和用户选择的点，因此第一个解决方案以后会更容易工作（其余代码在这个问题中：[完整程序代码](https://stackoverflow.com/questions/15888693/python-matplotlib-and-mysql-and-ginput)）

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:54:01.120

您正在提交字符串而不是浮点数，请更改此行：

```
temp = [float(x[1]) for x in s] 
```

`matplotlib`试图很好地猜测你的意思，并让你将灰色定义为 [0, 1] 之间的浮点字符串，这是它试图对你的字符串值做的事情（并且抱怨因为它不在范围内）。

# awk - 如何仅读取行中特定位置包含某些字母的行

> ID：16048273
> 
> 赞同：1
> 
> 时间：2013-04-16T22:27:54.173
> 
> 标签：awk

我有一个这种格式的文件：

```
Some, Text 
     sub text 1
     sub text 2
     sub text 3

Foo, Bar
   bar1
   bar2
   bar3

Shui, Wong K
       subtext1

Other Stuff
    something else 
```

如何仅从该文件中提取主要行，以便新文件包含：

```
Some, Text
Foo, Bar
Shui, Wong K
Other Stuff 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:33:02.363

告诉 awk 只打印以字母开头的行

```
awk '/^[[:alpha:]]/' infile 
```

输出：

```
Some, Text 
Foo, Bar
Shui, Wong K
Other Stuff 
```

或与以下内容相同`grep`：

```
grep '^[[:alpha:]]' infile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:52:06.980

以下工作在这里：

```
awk '/^\S/'
grep '^\S' 
```

我注意到对于您的示例，这也可以：:)

```
awk '/,/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T22:31:50.277

这完全取决于您要做什么，但这是一个示例

```
awk 'BEGIN{min=2;max=5}
{
 if (NR>=min)
{
if(NR<=max)
print
}
}' filename 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T22:35:38.297

使用正则表达式匹配除以空格开头的行以外的任何内容。我认为不需要 awk，我会使用 grep 代替：

```
grep -e "^[^ ]" 
```

在 awk 中：

```
awk '/^[^ ]/' 
```

# xna-4.0 - XNA 4 VertexPositionTexture triangleStrip偶尔消失

> ID：16048282
> 
> 赞同：1
> 
> 时间：2013-04-16T22:28:54.453
> 
> 标签：xna-4.0, vertex-buffer

我正在使用 VertexPositionTexture 和 BasicEffect 绘制一个 traingleStrip，它从屏幕的第一人称视角在 Z 轴上延伸一定距离。在循环中，我将开始和结束向量传递给此代码以创建我的顶点。

```
 public VertexPositionTexture[] vertices = new VertexPositionTexture[4];
    private int xPos = 4;

    public waypointLineSegment(Vector3 startPoint, Vector3 endPoint)
    {
        this.texture = texture1;
        vertices[0].Position = new Vector3(endPoint.X - xPos, endPoint.Y, endPoint.Z); //Upper Left Point
        vertices[0].TextureCoordinate = new Vector2(0, 1);
        vertices[1].Position = new Vector3(startPoint.X - xPos, endPoint.Y, startPoint.Z); //Lower Left point
        vertices[1].TextureCoordinate = new Vector2(0, 0);
        vertices[2].Position = new Vector3(endPoint.X + xPos, endPoint.Y, endPoint.Z); //Upper Right Point
        vertices[2].TextureCoordinate = new Vector2(1, 1);
        vertices[3].Position = new Vector3(startPoint.X + xPos, endPoint.Y, startPoint.Z); //Lower Right Point
        vertices[3].TextureCoordinate = new Vector2(1, 0);
    } 
```

我这样初始化：

```
protected override void Initialize()
{
    graphics.GraphicsDevice.RasterizerState = RasterizerState.CullNone;
    basicEffect = new BasicEffect(graphics.GraphicsDevice);
    base.Initialize();
} 
```

我以这种方式渲染飞机：

```
Vector3 transformedReference = Vector3.Transform(new Vector3(0, 0, 10), aRotationInt);
Vector3 cameraLookat = firstPersonVector + transformedReference;
view = Matrix.CreateLookAt(firstPersonVector, cameraLookat, Vector3.Up);

basicEffect.View = view;
foreach (EffectPass pass in basicEffect.CurrentTechnique.Passes)
{
     pass.Apply();
     graphics.GraphicsDevice.DrawUserPrimitives(PrimitiveType.TriangleStrip, allVertices, 0, 2);
} 
```

这很好用。但是，当我对视图应用旋转时，条带会不时消失。然后它将重新出现，并应用或多或少的单度旋转。

我找不到模式。它可能发生在 37 度或 315 度等处。我已将 GraphicsDevice RasterizerState 设置为 CullMode.None。谁能帮忙？：

# php - php 类型比较背后的基本理念

> ID：16048283
> 
> 赞同：5
> 
> 时间：2013-04-16T22:28:56.783
> 
> 标签：php, types, comparison, boolean-operations

所以php网站上有这个页面，它显示了比较不同值的结果：

[http://php.net/manual/en/types.comparisons.php](http://php.net/manual/en/types.comparisons.php)

这是一个有用的参考，但我宁愿不必每次都访问此页面以确保我正在做正确的类型比较。所以我的问题是

**PHP类型比较的逻辑背后是否有某种潜在的哲学/推理？**

例如，我可以看到松散的比较：

*   1、-1、“1”和“-1”可以视为TRUE，0和“0”可以视为FALSE；
*   用 yield TRUE 比较数字的字符串值和数字本身；

但从那时起尝试建立模式就变得有点毛茸茸了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T22:00:46.737

对于直接转换为布尔值，这就是它的工作原理。

*   所有长度 > 0 的字符串都为真
*   所有非 0 数字都为真
*   所有非空数组都为真
*   所有对象都是真实的

然后这些规则用于比较相同类型的变量：

1.  如果对象的属性相等，则对象是等价的
2.  如果它们的键和元素相等，则数组是等价的
3.  如果字符串产生相同的输出，则它们是等效的
4.  数字是等价的，如果它们在数学上是等价的
5.  如果布尔值具有相同的值，则它们是等效的。

对于不同类型的变量，将上面列表中较高的类型转换为较低的类型，然后进行比较。

`===`和`!==`运算符在比较之前不会强制转换，但您应该注意对象只有`===`当它们是相同的实例时才是。

真正奇怪的是数组，`===`如果它们具有以相同顺序定义的相同键和值。

```
$a = array("a"=>1, "b"=>2);
$b = array("b"=>2, "a"=>1);

$a == $b; // true
$a === $b; // false 
```

并且`empty()`等价于`!(bool)$var`

**例外情况**

*   将数组转换为字符串将触发通知并无济于事地转换为文本`Array`
*   将没有 `__toString`方法的对象转换为字符串会导致致命错误。
*   对象不会隐式转换为数组，因此任何时候将对象与数组进行比较都会产生错误（**更新**确认这是真的，即使对象实现了`ArrayAccess`接口）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-18T11:40:48.460

对于严格`===`的比较，逻辑很简单：每个值实体只等于它自己，所以`TRUE === TRUE`, `"1" === "1"`, but`"1" !== 1`等等。

当谈到`==`比较时，**不幸的是没有经验法则，也没有明确的逻辑**。这可能是因为各种形式的运算符是由不同的程序员实现的，没有中央设计决策。我能做的最好的就是为您提供此图表以打印并粘贴在显示器上：

![PHP 相等图](https://i.stack.imgur.com/1P2M9.png)

该图的关键是：当且仅当和是上图中由一条线*直接*连接的两种类型时，`A == B`将是。例如，是因为和是直接相连的，而是因为没有线将两者连接起来。`TRUE``A``B`*`array() == NULL``TRUE``array()``NULL``array() == 0``FALSE`*

 ***用红色标记的线是棘手的（不明显的）等式**。

我省略了每个实体都将等于它自己（例如`"1" == "1"`等），但这应该很容易记住。

最后一点，我想解释一下为什么`"php" == 0`is `TRUE`(non empty, non number string is equal to `0`)：因为 PHP`"php"`在比较之前转换为 number ，并且由于它不是数字，所以它默认为`0`并进行 test `TRUE`。

有趣的事实：这种关系没有分区！如果允许传递闭包，您可以轻松地说*True 是 False 和 False 是 True*，用四个简单的 PHP 语句破坏了数千年的哲学：D

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T22:35:55.387

如果该值*包含某些*内容，则可以说它是`true`。例如，`1`、`1.123`、`array("value")`等都被视为`true`。

如果可以说该值是*空的或无效*的（即缺少某些东西），那么它被视为`false`。例如，`0`、`0.0`、`array()`等。

这种考虑变量的方式对于 PHP 来说并不特殊。许多其他语言以相同或相似的方式做到这一点。例如 Perl、C 和 Javascript，仅举几例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-16T14:37:02.330

imo 有一个非常简单的指南和规范中的错误，这可能会令人困惑。

严格比较检查数据类型和值的相等性。松散比较仅检查值是否相等。

对于一个对象（不是比较表的一部分），php 非常简单：如果该对象与另一个对象是相同的实例，那么它是严格相等的，否则它可能是松散相等的。

因此，一个 0 和一个“0”彼此松散地相等并且为假（以及任何字符串）。后者可以理解为所有字符串都不是数字，因此为假，等于假的数字为0，因此所有字符串都等于0。

null 和 array() 之间的比较更复杂。如果您检查使用 array() 创建的数组并进行松散严格的比较，那么它会返回 true。但是，如果您使用 is_null 检查它，那么它会返回 false。我认为后者更合乎逻辑，因为使用 array() 创建的 array() 不等于 ''，其中 null 是。我认为函数 is_null() 和检查 == null 或 === null 之间的这种功能不一致是一个错误，因为使用两种不同的有效方法来检查一个值返回不同的结果是不应该的。根据函数 is_array()，Null 也不是数组，这是真的。根据函数 is_array()，空数组是一个数组，这也应该是真的。因此，null 等于 array() 永远不应该是真的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-15T20:31:09.820

没有特定的逻辑，但您可以找出一些模式。

*   “空”值（`null`, `false`, `0`, 空字符串和字符串`'0'`）评估为`false`
*   数值的比较是隐式地将它们转换为整数，直到某个版本（当两个实际不同的长数字字符串被视为相等时存在错误，现在已修复）
*   使用数组时，整数和数字索引之间没有区别，除非您使用显式`strict`参数调用 array_key_exists
*   将数字与字符串进行比较隐式地将右参数转换为左参数的类型
*   `return ($something);``$something`如果不是标量，则隐式转换为字符串

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-16T21:13:16.400

基本模式与 C 中使用的模式相同：为了进行布尔比较，任何非零都是真的。

从这个意义上说，空字符串或数组也是错误的。

要注意的毛茸茸的标量是`'0'`，它（非常不方便）也被视为空，因为它被转换为整数。`array(0)`就在阵前一样棘手。

当使用严格的比较 ( `===`and `!==`) 时，事情会更加理智。在实践中，将来自超全局变量和数据库的输入视情况进行转换通常是一个好主意，并从那时起使用这些运算符。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-17T14:24:44.607

我是这样看的：

1.  PHP 被设计为一种 Web 编程语言，页面的所有输入都是基于字符串 [类似人类的感知] [顺便说一句，JavaScript 也是如此]
2.  因此，所有*看起来像数字*的字符串（is_numeric() 函数），初步表现得像数字 [比较，强制转换]。
3.  这就解释了为什么像*“0”*这样的极端情况首先被隐式地认为被强制转换为*(int)0*，然后才被强制转换为*false*。*

# java - 在 NIO 中使用 UDP 有什么意义？

> ID：16048284
> 
> 赞同：12
> 
> 时间：2013-04-16T22:29:02.603
> 
> 标签：java, networking, tcp, udp, nio

NIO 和 TCP 非常适合许多连接。由于需要为每个新客户端打开一个新连接，因此这些客户端中的每一个通常都需要自己的线程来阻塞 I/O 操作。NIO 解决了这个问题，它允许在可以读取数据时读取数据，而不是在数据可用之前阻塞。但是UDP呢？

我的意思是，无连接 UDP 不具有与之关联的 TCP 的阻塞特性，因为协议是如何设计的（基本上发送它并忘记它）。如果我决定将一些数据发送到某个地址，那么它会这样做，没有延迟（在服务器端）。同样，如果我想读取数据，我可以只接收来自不同来源的单个数据包。我不需要使用许多线程与许多地方建立很多连接来处理它们中的每一个。

那么，NIO 和选择器是如何增强 UDP 的呢？更具体地说，什么时候更愿意将 UDP 与 NIO 一起使用而不是 ol'`java.net`包？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T23:05:33.843

那么该`DatagramSocket.receive(...)`方法被记录为*阻塞*操作。因此，例如，如果您有一个线程试图处理来自 N 个不同套接字的数据包，您将需要使用 NIO 和选择器。类似地，如果线程必须将新数据包与其他活动进行多路复用检查，您可能会这样做。

如果您没有这些或类似的要求，那么选择器将无济于事。但这与 TCP 案例没有什么不同。如果不需要，则不应将选择器与 TCP 一起使用，因为它*可能*会添加额外的系统调用。

（在 Linux 上，在数据报的情况下，你会做一个`select`系统调用，后跟一个`recv`... 而不仅仅是一个`recv`。）

* * *

> 但是，如果您只处理一个 DatagramSocket，那么接收方法不会在数据包到达时立即读取数据包，而不管它们来自不同的计算机吗？

如果您正在一个套接字上侦听来自“每个人”的数据报，那么可以。如果您有不同的插座用于不同的计算机，那么没有。

> 对于 TCP 注释，有时使用选择器的理由很简单，因为拥有数千个线程对资源的要求很高，因为阻塞的 TCP 服务器需要它。

我们不是在讨论那个案子。但是，是的，这是真的。如果您有数千个线程阻塞 UDP 接收，情况也是如此。

我的观点是，如果您**没有**很多线程，或者如果线程阻塞**无关紧要**，那么 NIO 就无济于事。事实上，它可能会降低性能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T00:05:24.010

NIO 完全消除了线程的必要性。它使您可以在一个线程中处理所有客户端，包括 TCP 和 UDP 客户端。

> 无连接 UDP 没有与之关联的 TCP 的阻塞特性

这不是真的。接收仍然阻塞，发送也可以，至少在理论上是这样。

# linux - 为什么这个 c-shell 脚本会停止？

> ID：16048286
> 
> 赞同：1
> 
> 时间：2013-04-16T22:29:11.280
> 
> 标签：linux, shell, unix

该脚本应该打印“输入要添加的嵌套编号：”并继续执行此操作，直到用户输入负数。此时它应该打印正数的总和。然而，正如循环要求下一个数字一次，它被输入，然后不再询问，脚本只是停止做任何事情，甚至没有到达循环中的下一行。

```
#!/bin/csh -x
#
# This script adds positive numbers entered by the user, stopping
# when a negative number is added
# Usage: +#, +#, +#... -#. 
#
@ x=0
@ sum = 0
while($x>= 0)
echo -n  "Enter the next number to be added: "
@ sum = $sum + $<
@ x = $<
end
#
exit 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:08:58.717

`$<`从标准输入读取一行。这必须分配给一个变量，否则如果`$<`第二次使用，脚本将在继续之前期待进一步的输入。

```
@ x=0
@ sum = 0
while ($x >= 0)
   echo -n  "Enter the next number to be added: "
   @ x = $<
   if ($x >= 0) then
      @ sum = $sum + $x
   endif
end
echo $sum
exit 0 
```

# eclipse - 无法强制 Python 2.7.4 在 OS X 10.8.3 上以 32 位模式运行

> ID：16048289
> 
> 赞同：0
> 
> 时间：2013-04-16T22:29:25.423
> 
> 标签：eclipse, macos, python-2.7, pydev, 32-bit

我一直在尝试强制 Python 2.7.4 默认在 OS X 10.8.3 上以 32 位模式运行。我可以通过运行 python32 让 Python 在 32 位模式下运行。但是当我尝试将 Eclipse+PyDev 配置为运行 Python 时，它最终以 64 位模式运行。我也试过

```
export VERSIONER_PYTHON_PREFER_32_BIT=yes 
```

和

```
defaults write com.apple.versioner.python Prefer-32-Bit -bool yes 
```

但似乎两者都对我的 Python 没有任何影响，它仍然以 64 位运行。

我想知道是否有人知道如何在 32 位模式下永久运行 Python 2.7。或者，我愿意接受任何使 Eclipse/PyDev 使用 32 位 Python 的解决方案。

我的 Python 已安装，`/Library/Frameworks/Python.framework/Versions/2.7`并且 sys.executable`/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python`在我的计算机上返回。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T18:22:53.497

这使 python 进入 32 位：

```
arch -i386 /Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python

import ctypes
print ctypes.sizeof(ctypes.c_voidp)

output -> 4 
```

但是我遇到了与您相同的问题，即无法像以前一样使用环境标志设置永久解决方案。

# c - C 程序如何判断它是否是从 Finder 启动的？

> ID：16048296
> 
> 赞同：1
> 
> 时间：2013-04-16T22:30:10.987
> 
> 标签：c, macos, directory, main, finder

标题说明了一切：

我想知道是否有任何`_NSWasLaunchedFromFinder`-type API 或钩子，OS/XC 程序（`int main(int argc, char* argv[])`各种）可以用来确定它是否是由用户单击 Finder 中的可执行文件启动的，或者它是否通过更多传统路线（例如输入终端）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T07:19:40.420

如果您正在谈论普通的命令行实用程序 - 无法确定它是从 Finder 启动还是在终端中启动，因为 Finder 将启动终端然后在其中执行您的程序。

但是有一个解决方案。我宁愿称其为解决方法。您可以使用捆绑包包装您的可执行文件，创建简单的脚本（让我们调用它`finderLauncher`），它将使用一些额外的命令行参数（`-launchedFromFinder`例如）启动实际的可执行文件。不要忘记使其可执行。比在您的 Info.plist 文件中设置`finderLauncher`为`CFBundleExecutable`值。
现在在 Finder 中，用户将只看到您的包，通过单击它，您的实际可执行文件将通过`finderLauncher`传递指定的命令行参数启动。同样的行为将通过`open`在终端中使用命令来实现。
并且通过从终端直接启动将没有 -launchedFromFinder 参数（当然，如果用户不会直接传递它）。 [Ps直接在Info.plist中指定命令行参数会容易得多，但是我在信息属性列表键参考](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Introduction/Introduction.html)

中找不到这样的键，尽管代理/守护进程有这样的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T13:40:47.833

**方法 1 ::** 你可以使用 NSGetExecutablePath

这是对它的开发参考 :: [Mac Developer Library](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/dyld.3.html)

_NSGetExecutablePath() 将主可执行文件的路径复制到缓冲区 buf 中。bufsize 参数最初应该是缓冲区的大小。如果路径复制成功，此函数返回 0，并且 * bufsize 保持不变。如果缓冲区不够大，则返回 -1，并且 * bufsize 设置为所需的大小。请注意，_NSGetExecutablePath() 将返回可执行文件的“路径”，而不是可执行文件的“真实路径”。也就是说，路径可能是符号链接而不是真实文件。对于深层目录，所需的总 bufsize 可能超过 MAXPATHLEN。

**方法 2 ::** 使用 AppleScript

您可以使用 AppleScript 查找使用以下脚本打开的当前应用程序 ::

```
tell application "Finder"
set appPath to my getFrontAppPath()
set AppleScript's text item delimiters to {":"}
set currentApp to text item -2 of appPath
say currentApp
end tell

on getFrontAppPath()
    set frontAppPath to (path to frontmost application) as text
    set myPath to (path to me) as text

    if frontAppPath is myPath then
        try
            tell application "Finder" to set bundleID to id of file myPath
            tell application "System Events" to set visible of (first process whose bundle identifier is bundleID) to false

            -- we need to delay because it takes time for the process to hide
            -- I noticed this when running the code as an application from the applescript menu bar item
            set inTime to current date
            repeat
                set frontAppPath to (path to frontmost application) as text
                if frontAppPath is not myPath then exit repeat
                if (current date) - inTime is greater than 2 then exit repeat
            end repeat
        end try
    end if
    return frontAppPath
end getFrontAppPath 
```

这应该会让您上次打开应用程序，无论是终端还是 Finder :)

对于 Finder，您会收到回复 ::“Macintosh HD:System:Library:CoreServices:Finder.app:”

对于终端 :: "Macintosh HD:Applications:Utilities:Terminal.app:"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T22:33:35.993

[获取父进程 ID](http://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man2/getpid.2.html)。然后浏览它的[进程状态](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/ps.1.html)以获取它的 PPID，递归到 Finder.app 或[init](http://en.wikipedia.org/wiki/Init)。

一旦你找到了 Finder.app 的子终端祖先，你可以查看它的开始时间和它的参数（见`-o`和`-O`选项`man ps`：你的关键字应该包括`args`和`start`）：如果终端进程在你的程序开始时间附近开始并且参数包括您的程序名称，您知道它已由 Finder.app 启动。

可能，您可以忽略时间，只寻找终端的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T03:12:29.587

您可以假设相反的逻辑并使用 isatty。

```
if (isatty(1)) printf("Launched in a terminal\n");
else printf("Launched by clicking something\n"); 
```

这只是确定标准输出是否是 tty。如果您从程序、图标、菜单等启动它......它将是错误的。另外，如果您想知道 X 服务器是否正在运行并且它是从终端模拟器启动的，您可以使用在 X 启动时设置的 getenv("DISPLAY") （因此如果从控制台运行，它将为 NULL）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-16T16:28:31.803

```
 // when the user doubleclicks your program it will be started with a -psn_ parameter
    if (argc >= 2 && (strncmp(argv[1], "-psn_", 5) == 0)) {
        InfoLogWithClient(L"Init", L"Program %d cannot be started with double-click!", getpid());
        return EX_USAGE;
    } 
```

# ios - 附加从网络返回的新单元格时，UITableView 出现断断续续的滚动

> ID：16048299
> 
> 赞同：3
> 
> 时间：2013-04-16T22:30:49.307
> 
> 标签：ios, objective-c

在 scrollViewDidScroll 中，我检查表视图是否滚动到足够接近底部，如果是，则执行网络请求以从服务器获取新数据，当网络请求成功时，我更新数据模型，然后更新tableView 通过调用 [tableView reloadData]。

症状是当网络请求完成并且新项目被添加到表中时，滚动性能不稳定。

有谁知道什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T09:50:25.327

不要重新加载整个表格视图

只需将您的数据添加到 dataSource 并调用 [tableView:insertRowsAtIndexPaths:withRowAnimation]

例子 ..

```
// addNewDataToDataSource(data)

[tableView beginUpdates];
[tableView insertRowsAtIndexPaths:indexes withRowAnimation:UITableViewRowAnimationAutomatic];
[tableView endUpdates]; 
```

# java - java中的抽象类getter和setter

> ID：16048308
> 
> 赞同：0
> 
> 时间：2013-04-16T22:31:17.193
> 
> 标签：java, arraylist, abstract-class

所以，解释我的代码->

我有一个Employee类型的抽象类，它有自己的字段，比如名字。

然后，我拥有从 Employee 扩展而来的 Admin、Sales 和 Manager 类。这些都有自己的字段，例如管理员的固定奖金、销售的百分比奖金和经理的员工数组列表。

然后我有一个包含员工 ArrayList 的驱动程序类，因此它包含管理员、销售和经理。

我的问题出现在 Arraylist 元素上。假设我从 ArrayList 中获得了一个 Admin 类的员工，并尝试使用 getter getFixedBonus() 访问他们的 fixedBonus 字段，但我根本做不到。我怎样才能做到这一点，以便我可以使用特定于类的 getter 和 setter，而不仅仅是继承的 getter 和 setter？这是我的代码的副本，其中出现了问题。具体来说，问题出在 switch 语句的第 5 和第 6 种情况下。

```
private Employee editAnEmployee(Employee emp) {
    boolean exit = false;
    boolean validChoice = false;
    int choice = 0;
    Boolean sure = false; // used in the switch statement
    String newName;
    double newValue;
    Employee admin = new AdminWorker("0", "0", 0, 0, 0); // these are used
    Employee sales = new SalesWorker("0", "0", 0, 0, 0, 0); // to check the
    Employee manager = new Manager("0", "0", 0, 0); // class of the
                                                    // employee
                                                    // being sent
                                                    // in, to edit
                                                    // the fields
                                                    // the employee
                                                    // may hold
    do {
        do {
            validChoice = true;
            emp.toString();
            StdOut.println("Which field would you like to edit?");
            StdOut.println("1) First Name.");
            StdOut.println("2) last Name.");
            StdOut.println("3) Hourly rate.");
            StdOut.println("4) Hours worked in the last week.");
            if (emp.getClass().equals(admin)) {
                StdOut.println("5) Fixed Bonus.");
            } else if (emp.getClass().equals(sales)) {
                StdOut.println("5) Percentage bonus on sales.");
                StdOut.println("6) Value of sales made in the last week.");
            } else if (emp.getClass().equals(manager)) {
                StdOut.println("5) Department.");
            }
            StdOut.println("0) Exit.");
            choice = StdIn.readInt();
            if (choice < 0 || choice > 4) {
                if (emp.getClass().equals(admin) && choice <= 5) {
                    validChoice = true;
                } else if (emp.getClass().equals(sales) && choice <= 6) {
                    validChoice = true;
                } else if (emp.getClass().equals(manager)) {
                    validChoice = true;
                } else {
                    StdOut.println("You entered an invalid number! Try Again...");
                    validChoice = false;
                }
            }
        } while (!validChoice);
        switch (choice) {
        case 0:
            StdOut.println("You are now exiting...");
            exit = true;
            break;
        case 1:
            StdOut.println("The employees first name is: " + emp.getFirstName() + ". What would you like the first name to be now?");
            newName = StdIn.readString();
            StdOut.println("Are you sure you want to change " + emp.getFirstName() + " to " + newName +"?(y/n)");
            sure = ynChoice();
            if(sure) emp.setFirstName(newName);
            break;
        case 2:
            StdOut.println("The employees last name is: " + emp.getLastName() + ". What would you like the last name to be now?");
            newName = StdIn.readString();
            StdOut.println("Are you sure you want to change " + emp.getLastName() + " to " + newName +"?(y/n)");
            sure = ynChoice();
            if(sure) emp.setLastName(newName);
            break;
        case 3:
            StdOut.println("The employees hourly rate is: " + emp.getHourlyRate() + ". What would you like the hourly rate to be now?");
            newValue = StdIn.readDouble();
            StdOut.println("Are you sure you want to change " + emp.getHourlyRate() + " to " + newValue +"?(y/n)");
            sure = ynChoice();
            if(sure) emp.setHourlyRate(newValue);
            break;
        case 4:
            StdOut.println("The employee has worked: " + emp.getHoursWorked() + " hours in the last week. What would you like that to be now?");
            newValue = StdIn.readDouble();
            StdOut.println("Are you sure you want to change " + emp.getHoursWorked() + " to " + newValue +"?(y/n)");
            sure = ynChoice();
            if(sure) emp.setHoursWorked(newValue);
            break;
        case 5:
            if (emp.getClass().equals(admin)) {
                StdOut.println("The employees fixed bonus is: " + emp.getFixedBonus() + ". What would you like that to be now?");
                newValue = StdIn.readDouble();
                StdOut.println("Are you sure you want to change " + emp.getFixedBonus() + " to " + newValue +"?(y/n)");
                sure = ynChoice();
                if(sure) emp.setHoursWorked(newValue);
            } else if (emp.getClass().equals(sales)) {
                StdOut.println("The employees percentage bonus is: " + emp.getPercentageBonus() + ". What would you like that to be now?");
                newValue = StdIn.readDouble();
                StdOut.println("Are you sure you want to change " + emp.getPercentageBonus() + " to " + newValue +"?(y/n)");
                sure = ynChoice();
                if(sure) emp.setHoursWorked(newValue);
            } else if (emp.getClass().equals(manager)) {
                StdOut.println("The employees fixed bonus is: " + emp.getFixedBonus() + ". What would you like that to be now?");
                newValue = StdIn.readDouble();
                StdOut.println("Are you sure you want to change " + emp.getFixedBonus() + " to " + newValue +"?(y/n)");
                sure = ynChoice();
                if(sure) emp.setHoursWorked(newValue);
            }
            break;
        case 6:
            StdOut.println("The employees sales in the last week are: " + emp.getLastWeeksSales() + ". What would you like that to be now?");
            newValue = StdIn.readDouble();
            StdOut.println("Are you sure you want to change " + emp.getLastWeeksSales() + " to " + newValue +"?(y/n)");
            sure = ynChoice();
            if(sure) emp.setHoursWorked(newValue);
            break;
        }
    } while (!exit);
    return emp;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T22:43:12.983

我认为**instanceof**关键字在您的情况下可能很有用。

```
ArrayList<Employee> list; // This is initialized and has Employees

for (Employee person: list) {
    if (person instanceof Admin) {
        int fixedBonus = ((Admin) person).getFixedBonus();

        // Do something here
    }
} 
```

这是否回答你的问题？（您不需要 .getClass().equals()，这就是 instanceof 的用途：D）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T22:56:00.490

您应该为您的员工添加`getFixedBonus()`和`getPercentBonus()`方法，每个返回 0。然后其他工人类可以覆盖它们。

实际上，一个更好的技术是把它变成一个`interface`并让所有的类（包括`Employee`）实现`interface`. 然后，他们可以`extend`创建一个`base`也实现接口但提供默认值的类。

```
public static interface Staff {
  public double getFixedBonus ();
  public double getPercentageBonus ();
  public List<Staff> getMinions();
}

// Base class - no bonus by default.
public static class Worker implements Staff {

  @Override
  public double getFixedBonus() {
    return 0;
  }

  @Override
  public double getPercentageBonus() {
    return 0;
  }

  @Override
  public List<Staff> getMinions() {
    return Collections.EMPTY_LIST;
  }

}

public static class Administrator extends Worker implements Staff {
  double fixedBonus = 2.13;

  @Override
  public double getFixedBonus() {
    return fixedBonus;
  }

}

public static class Salesperson extends Worker implements Staff {
  double percentageBonus = 3.14;

  @Override
  public double getPercentageBonus() {
    return percentageBonus;
  }

}

public static class Manager extends Worker implements Staff {
  List<Staff> minions;

  @Override
  public List<Staff> getMinions() {
    return minions;
  }
} 
```

不要被使用`instanceof`和铸造的阴暗面所诱惑。你会后悔你的决定。oop 的全部意义在于，即使您不知道自己正在处理什么样的对象，但您仍然可以处理它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T23:20:21.950

使您的客户端代码更简单（并且更简洁 - instanceof 和强制转换很难看）的选项*是*为 in 中的每个特定方法声明一个默认实现`Employee`，例如为`fixedBonus()`in返回零`Employee`，但在`Sales`

# mysql - MySQL：检索所有字段 SELECT * 当其中一个字段是二进制并且需要十六进制时

> ID：16048309
> 
> 赞同：2
> 
> 时间：2013-04-16T22:31:18.837
> 
> 标签：mysql, database

我有一个主要的 kew，它是一个名为 binid 的字段中的*二进制（16）* UUID。
我想使用 SELECT 语句获取**所有**列，包括二进制 id。

我知道我可以执行“SELECT * FROM TABLE”，但是如何与 HEX(binid) 结合使用？

这在我获得单个字段时有效：“SELECT HEX(binid) AS binid FROM TABLE”
但我不想提及所有字段（太多）。有没有办法在一个语句中获取 ALL 和 HEX？

PS。我正在创建基于 stackoverflow 问题：[如何将 uuid 存储为数字？](https://stackoverflow.com/questions/10950202/how-to-store-uuid-as-number)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:39:01.250

选择`*`将按原样选择所有字段，而不进行转换。要选择它们以更改它们的格式，您必须指定要选择的所有字段`,`。

例如：

```
SELECT HEX(`binid`) as `bindid`, `name`, FROM_UNIXTIME(`birthday`) as `birthday`, `gender` FROM `table`; 
```

您可以应用任意数量的转换。

你也可以这样做：

```
SELECT HEX(`binid`) as `hexdid`, * FROM `table`; 
```

在这种情况下，结果将具有`binid`十六进制格式，命名`hexid`，以及原始`binid`以及表的其他字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:36:42.583

```
select col1, col2, col3 from table 
```

例如，如果表被称为 T 并设置为：

```
 T
=================
| binid | A | B |
| 0     | 1 | a |
| 1     | 2 | b |
| 10    | 3 | c |

select hex(binid), A, B from table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T22:38:33.260

你可以这样做：

`Select *, HEX(binid) as clearBinId from Table`

这将选择所有列（包括 binid）并选择 HEX(binid) 作为名为“clearBinId”的列

# linux - 使用 sed 从变量中删除模式

> ID：16048316
> 
> 赞同：3
> 
> 时间：2013-04-16T22:31:55.937
> 
> 标签：linux, bash, variables, sed

我正在使用一个脚本，该脚本有一个名为`PRODUCT_VERSION`. 该版本带有一个点（例如`6.0`）。我需要删除点并将结果保存在另一个变量中。

到目前为止，我有这个，但它不能正常工作

```
PRD_VER=$(sed "s/$PRODUCT_VERSION/\.//g") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T23:51:20.957

```
$ PRODUCT_VERSION=6.0

$ PRD_VER=${PRODUCT_VERSION/.}

$ echo $PRD_VER
60 
```

[Bash 字符串操作示例](http://thegeekstuff.com/2010/07/bash-string-manipulation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:46:41.770

This might work for you (GNU sed & bash):

```
NEW=$(sed 's/\.//g' <<<"$OLD") 
```

or

```
NEW=$(echo "$OLD" | sed 's/\.//g') 
```

However Mr Penny's answer is by far the best approach.

# .net - 获取当地时间

> ID：16048320
> 
> 赞同：-3
> 
> 时间：2013-04-16T22:32:13.757
> 
> 标签：.net, datetime, timezone

```
int tzO = TimeZone.CurrentTimeZone.IsDaylightSavingTime(DateTime.Now) ? -4 : -5; 
```

（它是一行代码。一些浏览器将它包装成两行。）为什么这段代码很糟糕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:04:58.003

为什么它很烂？嗯，这很主观，但我可以告诉你几件事：

*   该类`TimeZone`已弃用。好吧，它并没有被标记为过时，但所有的指导，包括[MSDN 页面](http://msdn.microsoft.com/en-us/library/xe5cd9e6%28v=vs.110%29.aspx)都说要`TimeZoneInfo`改用。

*   您正在使用当前时区，然后使用它手动确定偏移值。有人会认为您是在当前时区的偏移量之后 - 而不是您硬编码的两个之一。

*   当你通过时`DateTime.Now`，你依赖的是当地时间。这并不可怕，但由于夏令时“回退”过渡，您*可能有一个模棱两可的时间参考。*最好是明确的并`UtcNow`改为使用。

*   您将返回整数小时数。许多时区使用半小时偏移量，少数时区是 45 分钟偏移量。您应该使用 a`TimeSpan`来代替。

因此，该代码不“糟糕”的版本将是：

```
TimeSpan offset = TimeZoneInfo.Local.GetUtcOffset(DateTime.UtcNow); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:44:49.803

您可以使用`DateTime.UtcNow()`获取 UTC 时间。

# database - CodeIgniter 分页 create_links() | 结果未考虑“where”子句

> ID：16048322
> 
> 赞同：0
> 
> 时间：2013-04-16T22:32:14.710
> 
> 标签：database, codeigniter, pagination

我一直在使用 codeigniter 中的一个应用程序，它采用一系列可选字段并对数据库进行查询以根据所选字段返回结果。然后使用 codeigniter 分页库对这些结果进行分页。

分页工作正常并且结果被分页，问题是当我例如将性别设置为“男性”以便只返回男性结果时，即使第一页工作正常，create_links() 函数也会为每个结果呈现页面表，当我更改页面时，db->get() 函数的所有“where”参数都将被忽略。对此的任何建议将不胜感激。

代码：

控制器：

```
public function searchcharacter() {

        $data = $this->input->post();

        $gender = $data['gender'];
        $age = $data['approx_age'];
        $hairColour = $data['hair_colour'];
        $hairLength = $data['hair_length'];
        $eyeColour = $data['eye_colour'];
        $earType = $data['ear_type'];
        $weapons = $data['weapons'];

        $this->load->library('pagination');

        $config['base_url'] = 'http://localhost/ci-animedb/site/searchcharacter';
        $config['total_rows'] = $this->db->get('characters')->num_rows();
        $config['per_page'] = 10;
        $config['uri_segment'] = 3;
        $config['num_links'] = 20;

        $this->pagination->initialize($config);

        $this->load->model('get_db');
        $results['characters'] = $this->get_db->getCharacterList($gender, $age, $hairColour, $hairLength, $eyeColour, $earType, $weapons, $config['per_page']);

        $this->load->view('header');
        $this->load->view('characterlist', $results, FALSE);
        $this->load->view('footer');

} 
```

模型：

```
function getCharacterList($gender, $age, $hairColour, $hairLength, $eyeColour, $earType, $weapons, $limit) {

    if ($gender != "None" && !empty($gender))
    {
      $this->db->where('gender', $gender);
    }

    if ($age != "None" && !empty($age))
    {
      $this->db->where('approx_age', $age);
    }

    if ($hairColour != "None" && !empty($hairColour))
    {
      $this->db->where('hair_colour', $hairColour);
    }

    if ($hairLength != "None" && !empty($hairLength))
    {
      $this->db->where('hair_length', $hairLength);
    }

    if ($eyeColour != "None" && !empty($eyeColour))
    {
      $this->db->where('eye_colour', $eyeColour);
    }

    if ($earType != "None" && !empty($earType))
    {
      $this->db->where('ear_type', $earType);
    }

    if ($weapons != "None" && !empty($weapons))
    {
      $this->db->where('weapons', $weapons);
    }

    $query = $this->db->get('characters', $limit, $this->uri->segment(3));
    return $query->result();
} 
```

看法：

```
<div class="container">

    <div class="row">
        <div class="span12">
            <img src="<?php echo base_url(); ?>img/banner1.png" alt="AnimeDB.me" />
        </div>
    </div>

    <div class="row">
      <div class="span12" style="height:1px; background-color: #cccccc; margin-top: 20px; margin-bottom: 15px;"></div>
    </div>

  <div class="row">
    <div class="span12" id="ajaxcontainer">

      <table class='table table-striped' id='resulttable' >
        <thead>
          <th>Image</th>
          <th>Name</th>
          <th>Anime</th>
        </thead>
        <tbody>

          <?php

            foreach ($characters as $row) {
              echo "<tr class='resulttr'><td><a href='" . base_url('site/character'). '/' . $row->character_id . "' ><image height=140 width=140 src='" . base_url('img/characterimage') . "/" . $row->file_path . "' /></a></td>";
              echo "<td>" . $row->character_name . "</td>";
              echo "<td>" . $row->anime . "</td>";
              echo "<td class='rowid' style='display:none;'>" . $row->character_id . "</td></tr>";
            }

          ?>

        </tbody>
      </table>

    <div class="form-actions">
      <?php echo $this->pagination->create_links(); ?>
    </div>

    </div>
  </div>

</div> <!-- /container --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T22:52:34.640

```
$config['total_rows'] = $this->db->get('characters')->num_rows(); 
```

这是 Pagination 类用来确定要创建的链接数量的内容。你告诉它使用`characters`表中的每一行。

您还需要将`WHERE`约束添加到此查询中以获得正确的总记录数。

# javascript - jQuery 选择器：选择多个 ID 并获取它们的值

> ID：16048325
> 
> 赞同：0
> 
> 时间：2013-04-16T22:32:41.137
> 
> 标签：javascript, jquery

我正在寻找一种方法来提取 ID 的一部分并在我的脚本中使用它。

我的 HTML：

```
<div id="item1"></div>
<div id="item2"></div>
<div id="item3"></div>
<div id="item4"></div>
<div id="item5"></div> 
```

我的 jQuery：

```
$('#item(1|2|3|4|5)').mouseout(function(event) {

    //Get the number of the item (1,2,3,4,5)
    item_number = ???

    alert(item_number);

    } 
```

如何使用 jQuery 实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T22:35:19.573

除了 VisioN 所说的。我想鼓励您为此目的使用类：

```
<div class="item" id="item1"></div>
<div class="item" id="item2"></div>
<div class="item" id="item3"></div>
<div class="item" id="item4"></div>
<div class="item" id="item5"></div> 
```

和

```
$(".item").mouseout(...) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T22:34:07.607

您可以使用[*选择器开始*](http://api.jquery.com/attribute-starts-with-selector/)：

```
$("[id^='item']").mouseout(function(e) {
    var item_number = this.id.replace("item", "");
    alert(item_number);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T22:36:33.737

一个简单的方法是在这里：

```
$('div').mouseout(function() {
    var this_id = $(this).attr('id');
    alert(this_id);
}); 
```

如果您想确保并非所有 div 都收到警报，请给所有这些 div 一个类并改用它：

```
$('.myClass').mouseout(function() {
    var this_id = $(this).attr('id');
    alert(this_id);
}); 
```

# web-services - 这个 Web 服务场景是不适合 REST 的实例吗？

> ID：16048326
> 
> 赞同：1
> 
> 时间：2013-04-16T22:32:45.907
> 
> 标签：web-services, rest

我正在设计一个解析大型文档（150-200k）并返回一些分析数据的 Web 服务。文档的内容是敏感的，目前不被后端持久化。

对于所有请求都是幂等的无状态 REST Web 服务，这将要求每个请求都包含大型文档有效负载，这似乎不太理想。

对于这种情况，有状态的替代方案是否更适合设计，在初始文档发布后建立会话？然后客户端可以使用内存中的文档向提供不同分析结果的端点发出进一步的请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:37:27.223

您可以将其视为附加到文档存储服务上的 REST 接口。

文件被临时存储。也许它会停留 10 分钟或直到所有者释放。文档存储服务返回一个允许访问文档的令牌。但是令牌会随着文档超时而过期。

那么您只需要 REST 服务来询问有关文档的问题。每个调用都需要包含令牌，但可以无限重复并且仍然得到相同的响应。

您可能希望缓存有关每个文档的某些信息。那是性能问题。

您可能需要考虑如何加密令牌，使其无法从“线路”复制并被“坏人 (TM)”使用。

# php - 如何使用获取功能获取部分 URL 字符串以动态插入跟踪器？

> ID：16048334
> 
> 赞同：0
> 
> 时间：2013-04-16T22:33:32.600
> 
> 标签：php, get

我想知道，我搜索但找不到我需要的确切内容。

我需要跟踪 URL 字符串中的变量，抓取它，然后插入到我的表单代码中以便能够跟踪潜在客户。

例如，在我购买的广告中，我可以将发布商 ID 动态插入到 URL 字符串中，这样我就可以跟踪该网站是否发生了转化，例如 http://mywebsite.com/?c1=[csid]

其中 [csid] 将被转换的网站替换为[http://mywebsite.com/?c1=www.anywebsite.com](http://mywebsite.com/?c1=www.anywebsite.com)

我需要获取“www.anywebsite.com”的 c1 值并将其动态插入到我的 php 代码中，以便我可以看到转换后的值是什么。

希望有意义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:36:53.333

使用 HTTP GET 变量，参见：[http ://www.php.net/manual/en/reserved.variables.get.php](http://www.php.net/manual/en/reserved.variables.get.php)

```
<?php
$c1 = $_GET['c'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:38:41.840

您可以使用以下表达式访问“c1”的值：

```
$c1 = $_REQUEST['c1'] 
```

但是如果没有更多信息，我无法真正帮助您存储它，除非您指定您打算使用它的方式。

希望有帮助，A.

# regex - 正则表达式中的多个问号

> ID：16048337
> 
> 赞同：2
> 
> 时间：2013-04-16T22:34:02.337
> 
> 标签：regex, spam-prevention

我下载了一组我打算用于垃圾邮件过滤的正则表达式。其中一个看起来像这样：

```
/(?!med['`s]?)\bm[_\W]{0,5}[e????????3][_\W]{0,5}[d?][_\W]{0,5}[sz5\$]?\b/i 
```

目的是它会标记“meds”这个词的混淆版本。不幸的是，它也恰好标记以“我？”结尾的句子。

我正在向后工作，试图弄清楚这个正则表达式实际上做了什么，但我被困住了，因为我不知道是什么`[e????????3]`意思。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T22:36:37.143

当它不在字符类中时，`?`将使前面的标记成为可选的。在 a`?`它里面只是匹配一个字面量`?`。在一个字符类中重复相同的字符没有效果，所以`[e????????3]`等价于`[e?3]`. 这部分正则表达式将匹配单个字符，即`e`、`?`或`3`。

请注意，`?`在一些编码问题出现之前，这些字符可能实际上是其他东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T22:48:46.813

这很可能是字符编码错误。在那个字符类（`[...]`是一个类）中，曾经有其他字符无法解析，然后当显示/转置为？发出信号。最后多个??????s结束了那里。

> 轻轻地，轻轻地抓猴子。[图。]

要了解更多信息，您需要研究该正则表达式的起源，并查看可能与编码问题相关的位置。如果运气好、耐心和头脑清醒，您就会发现其中有哪些具体字符。很可能不是一个逐字的问号。

# windows - Control-Enter 是在 Windows 上表示“接受”的普遍接受的快捷方式吗？

> ID：16048340
> 
> 赞同：2
> 
> 时间：2013-04-16T22:34:08.137
> 
> 标签：windows, user-interface

我正在 Windows 上开发桌面应用程序，目前正在将“Control-Enter”键绑定到对话框和查看/编辑字段上的“接受”命令。在我看来，这是这个键绑定的一个相当普遍的含义，例如，许多网站（Facebook、Twitter）在表单输入中使用它来表示“提交”，而 TortoiseSvn 和 TortoiseHg 等程序使用它来接受对话框和变更集消息输入字段。

然而，这个含义受到了挑战，现在我正在寻找可能是这种看似常见绑定的来源的 UI 指南。是否有一个，或者它是否已被临时公约采用？

编辑：为了澄清，我特别谈论的情况是“Enter”被用作文本中的有效输入字符。Facebook 中的文本输入字段和提交消息字段接受输入，因此在这些情况下它不用于接受对话框或提交表单，但“Ctrl+Enter”是。

编辑 2：您自己可以在这里尝试，方法是在问题和答案的文本字段中按“Enter”，然后按“Ctrl+Enter”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T22:48:17.037

Microsoft 有其[Windows 用户体验交互指南](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511258.aspx)（可方便地下载为 PDF 文档），仅将此按键描述为地址栏快捷方式：

> Ctrl+Enter 添加“h ttp://www”。到地址栏中文本的开头和“.com”到文本的结尾。

到目前为止，为“官方”来源。

但是，通常情况下，Microsoft 自己的程序（[例如 Outlook](http://www.zeigen.com/shortcuts/2007/06/11/send-email/)）超出了这些准则，并且还`ctrl``enter`用来表示“好的，我们已经完成了”。

在我看来，它没有得到任何出版物的认可这一事实并不那么重要，因为您已经指出，有几个程序已经以与您相同的方式使用该快捷方式，包括微软的旗舰产品之一——所以我会说去它。

# php - Laravel Eloquent 数据排名

> ID：16048341
> 
> 赞同：1
> 
> 时间：2013-04-16T22:34:19.777
> 
> 标签：php, sql, laravel

我正在尝试根据数据库中具有 id 的行数来划分用户范围。
我的数据集看起来像这样（简化）：

```
A .... John
A .... John
B .... Mike
A .... John
B .... Mike
C .... Denis 
```

我想要前三个唯一名称，按左侧值出现的次数排序。
**我可以用 Laravel 雄辩的 ORM 做到这一点吗？**

结果将是：

```
John
Mike
Denis 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T07:18:58.403

这就是你使用 Laravel 的 Eloquent ORM 的方式

```
Model::select('name')
->groupBy('name')
->orderBy(DB::raw('count(name)'), 'desc')
->take(3)
->get(); 
```

如果您使用的是 Laravel 3，请使用蛇盒：

```
Model::select('name')->group_by('name')->order_by(DB::raw('count(name)'), 'desc')->take(3)->get(); 
```

如果您愿意，您可以通过使用 Query Builder (Fluent)`DB::table('tableName')->`而不是`Model::`.

**备注**：

*   `DB::raw()`指示 Laravel 不要在此处放置反引号。
*   `take()`限制行数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:52:41.733

不是 laravel 解决方案，但它可能有效（纯 SQL，特别是 MySQL）：

```
select name
from yourTable
where ... # Your filter conditions go here
group by name
order by count(id) desc
limit 3; 
```

希望这可以帮助

# c# - c#索引的参数无效，空值

> ID：16048342
> 
> 赞同：0
> 
> 时间：2013-04-16T22:34:19.833
> 
> 标签：c#, winforms, listview, invalid-argument

我刚刚做了一个文件编辑器，它包含一个列表视图和一个文本框，当我从列表视图中选择和项目时，它出现在文本框中，文本是日语，当我选择日语文本或行时，它给出我一个错误：InvalidArgument：值'0'对'index'无效

你们能帮帮我吗？这是我的代码：

```
 private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void menuItem2_Click(object sender, EventArgs e)
    {
        listView1.Items.Clear();
        textBox1.Text = "";
        menuItem12.Text = "file type is: ";
        OpenFileDialog ofd = new OpenFileDialog();
        ofd.Title = "Open File";
        ofd.Filter = "All Files (*.*)|*.*";
        if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            path = ofd.FileName;
            BinaryReader br = new BinaryReader(File.OpenRead(path), Encoding.GetEncoding("SHIFT-JIS"));
            foreach (char mychar in br.ReadChars(4)) menuItem12.Text += mychar;
            if (menuItem12.Text != "file type is: TXTD")
            {
                MessageBox.Show("This is not a TXTD file...", "Sorry", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }
            else
            {
                    MessageBox.Show("File opened Succesfully!", "Info", MessageBoxButtons.OK, MessageBoxIcon.Information);
                    br.BaseStream.Position = 0x8;
                    int Pntrnum = br.ReadInt16();
                    menuItem11.Visible = true;
                    menuItem11.Text = Pntrnum.ToString();
                    List<int> offsets = new List<int>();
                    br.BaseStream.Position = 0x10;
                    for (int i = 0; i < Pntrnum; i++)
                    {
                        offsets.Add(br.ReadInt32());
                    }
                    Dictionary<int, string> values = new Dictionary<int, string>();
                    for (int i = 0; i < offsets.Count; i++)
                    {
                        int currentOffset = offsets[i];

                        int nextOffset = (i + 1) < offsets.Count ? offsets[i + 1] : (int)br.BaseStream.Length;

                        int stringLength = (nextOffset - currentOffset - 1) / 2;

                        br.BaseStream.Position = currentOffset;

                        var chars = br.ReadChars(stringLength);
                        values.Add(currentOffset, new String(chars));
                    }

                    foreach (int offset in offsets)
                    {
                        listView1.Items.Add(offset.ToString("X")).SubItems.Add(values[offset]);
                    }

                    br.Close();
                    br = null;
            }
        }
        ofd.Dispose();
        ofd = null;
    }

    private void menuItem4_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void menuItem6_Click(object sender, EventArgs e)
    {
        BinaryWriter bw = new BinaryWriter(File.OpenWrite(path));
        int number_pointers = Convert.ToInt32(menuItem11.Text);
        Encoding enc = Encoding.GetEncoding("SHIFT-JIS");
        bw.BaseStream.Position = 0x10;
        int curr_pointer = 4 + number_pointers * 4;
        for (int i = 0; i < number_pointers; i++)
        {
            bw.Write(curr_pointer);
            curr_pointer += enc.GetByteCount(listView1.Items[i].SubItems[1].Text) + 1;
        }
        for (int i = 0; i < number_pointers; i++)
            bw.Write(enc.GetBytes(listView1.Items[i].SubItems[1].Text + '\0'));

        bw.Flush();
        bw.Close();
        bw = null;
    }

    private void menuItem8_Click(object sender, EventArgs e)
    {
        SaveFileDialog sfd = new SaveFileDialog();
        sfd.InitialDirectory = Application.ExecutablePath;
        sfd.Filter = "Text Files (*.txt)|*.txt";
        sfd.Title = "Save Text file";
        DialogResult result = sfd.ShowDialog();
        if (result == DialogResult.Cancel)
            return;
        StreamWriter wwrite = new StreamWriter(sfd.FileName, false, Encoding.GetEncoding("SHIFT-JIS"));
        for (int i = 0; i < listView1.Items.Count; ++i)
        {
            string Ptrs = listView1.Items[i].SubItems[0].Text;
            string Strs = listView1.Items[i].SubItems[1].Text;
            wwrite.WriteLine(i.ToString() + " > " + Ptrs + " > " + Strs);
        }
        wwrite.Close();
    }

    private void menuItem5_Click(object sender, EventArgs e)
    {
        MessageBox.Show("TXTD Editor by Omarrrio v0.1 Alpha\n2013 Copyrighted crap and whatever", "About...", MessageBoxButtons.OK,
                        MessageBoxIcon.Information);
    }

    private void listView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        textBox1.Text = listView1.SelectedItems[0].SubItems[1].Text;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        listView1.SelectedItems[0].SubItems[1].Text = textBox1.Text;
    }

    private void menuItem12_Click(object sender, EventArgs e)
    {

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:54:12.193

在访问`SelectedItems`索引之前，您应该检查是否有任何项目被选中。

```
private void button1_Click(object sender, EventArgs e)
{
    if(listView1.SelectedItems.Count > 0)
        textBox1.Text = listView1.SelectedItems[0].SubItems[1].Text;
} 
```

您可能还需要执行检查以确保在使用它之前`SubItems`有一个索引。`1`

# android - 创建视图时如何动态更新片段（SlidingMenu）

> ID：16048345
> 
> 赞同：0
> 
> 时间：2013-04-16T22:34:55.737
> 
> 标签：android, android-asynctask, android-fragments, slidingmenu

我有使用该`SlidingMenu`库的应用程序。它本质上是一个在用户滑动时进出视图`Fragment`的主要内容（例如 Youtube、Google+、Facebook）。`Activity`

顶部`LinearLayout`有`SlidingMenu`一些动态信息。例如登录和其他随着用户在应用程序中交互而变化的信息。

一个例子：用户打开应用程序，该布局显示`SlidingMenu`“登录”。他们进入`overflow`菜单，开始登录`Activity`（结束`MainFragmentActivity`），成功登录，然后登录`Activity`消失。下次他们滑动打开菜单时，他们应该会看到他们的用户名、个人资料统计信息、个人资料图片等。

**我的问题：** *如何在不使用刷新按钮的情况下动态更改此布局？*

这是否包括使用：

`onCreateView()`中的方法`fragment`？

注意：目前，它仅在应用启动时更新。它开始`AsynTask`从`MySQL`. 每次用户打开面板时点击数据库似乎是一种资源浪费，有没有更有效的使用方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:45:54.530

您需要将内容缓存在手机本身（可能在 sqlite 中），您需要在应用程序处于前台时每隔一段时间检查新的远程内容，和/或甚至可能使用 Google Cloud Messaging 之类的东西来 ping您的应用程序，以防数据需要快速刷新 - 但不定期（就像您必须使用聊天应用程序或 twitter 客户端一样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:19:35.993

正如 Stephan 所提到的，您可以在 SQLite 中缓存数据，最重要的是，您可以使用 contentProvider 为您返回存储的数据上的光标，例如登录名。

现在这里的好处是，当用户登录时，您可以在 contentProvider 中调用 update，更新值，然后调用[contentResolver.NotifyChange](http://developer.android.com/reference/android/content/ContentResolver.html#notifyChange%28android.net.Uri,%20android.database.ContentObserver%29)，它会更新游标中的结果，进而自动更新slidingMenu 中的内容。

# php - 无法通过 PHPMailer 使用 Gmail SMTP 服务器发送电子邮件，出现错误：在端口 587 上提交邮件需要 SMTP AUTH。如何解决？

> ID：16048347
> 
> 赞同：79
> 
> 时间：2013-04-16T22:34:57.713
> 
> 标签：php, smtp, gmail, phpmailer

我想通过**PHP Mailer使用****Gmail SMTP**服务器发送电子邮件。

 **这是我的代码

```
<?php
require_once('class.phpmailer.php');

$mail = new PHPMailer();
$mail->IsSMTP();
$mail->CharSet="UTF-8";
$mail->SMTPSecure = 'tls';
$mail->Host = 'smtp.gmail.com';
$mail->Port = 587;
$mail->Username = 'MyUsername@gmail.com';
$mail->Password = 'valid password';
$mail->SMTPAuth = true;

$mail->From = 'MyUsername@gmail.com';
$mail->FromName = 'Mohammad Masoudian';
$mail->AddAddress('anotherValidGmail@gmail.com');
$mail->AddReplyTo('phoenixd110@gmail.com', 'Information');

$mail->IsHTML(true);
$mail->Subject    = "PHPMailer Test Subject via Sendmail, basic";
$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!";
$mail->Body    = "Hello";

if(!$mail->Send())
{
  echo "Mailer Error: " . $mail->ErrorInfo;
}
else
{
  echo "Message sent!";
}
?> 
```

但我收到以下错误

```
Mailer Error: SMTP Error: The following recipients failed: anotherValidGmail@gmail.com

SMTP server error: SMTP AUTH is required for message submission on port 587 
```

我的域名是[vatandesign.ir](http://www.vatandesign.ir)

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2013-04-16T22:45:11.410

```
$mail = new PHPMailer(); // create a new object
$mail->IsSMTP(); // enable SMTP
$mail->SMTPDebug = 1; // debugging: 1 = errors and messages, 2 = messages only
$mail->SMTPAuth = true; // authentication enabled
$mail->SMTPSecure = 'ssl'; // secure transfer enabled REQUIRED for Gmail
$mail->Host = "smtp.gmail.com";
$mail->Port = 465; // or 587
$mail->IsHTML(true);
$mail->Username = "email@gmail.com";
$mail->Password = "password";
$mail->SetFrom("example@gmail.com");
$mail->Subject = "Test";
$mail->Body = "hello";
$mail->AddAddress("email@gmail.com");

 if(!$mail->Send()) {
    echo "Mailer Error: " . $mail->ErrorInfo;
 } else {
    echo "Message has been sent";
 } 
```

上面的代码已经过测试并为我工作。

可能是你需要的`$mail->SMTPSecure = 'ssl';`

还要确保您没有为该帐户打开两步验证，因为这也会导致问题。

更新

您可以尝试将 $mail->SMTP 更改为：

```
$mail->SMTPSecure = 'tls'; 
```

值得注意的是，一些 SMTP 服务器会阻止连接。某些 SMTP 服务器不支持`SSL`（或`TLS`）连接。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-07-02T21:12:43.563

所以我刚刚解决了我自己的“SMTP 连接失败”错误，我想发布解决方案以防万一它对其他人有所帮助。

我使用了 PHPMailer 示例 gmail.phps 文件中给出的 EXACT 代码。它在我使用 MAMP 时很简单，然后在我将它移到我的个人服务器后出现 SMTP 连接错误。

我阅读的所有 Stack Overflow 答案以及 PHPMailer 的所有故障排除文档都表示这不是 PHPMailer 的问题。这是服务器端的设置问题。我尝试了不同的端口（587、465、25），我尝试了“SSL”和“TLS”加密。我检查了我的 php.ini 文件中是否启用了 openssl。我检查了没有防火墙问题。一切都检查过了，还是什么都没有。

解决方案是我必须删除这一行：

```
$mail->isSMTP(); 
```

现在一切正常。我不知道为什么，但它有效。我的其余代码是从 PHPMailer 示例文件中复制和粘贴的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-22T12:05:25.913

另外值得注意的是，如果您启用了两因素身份验证，则需要设置一个应用程序特定密码来代替您的电子邮件帐户密码。

您可以按照以下说明生成应用程序专用密码：https: [//support.google.com/accounts/answer/185833](https://support.google.com/accounts/answer/185833)

然后设置`$mail->Password`为您的应用程序特定密码。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-07-26T08:26:25.100

您的服务器似乎无法与 Gmail SMTP 服务器建立连接。以下是解决此问题的一些提示： 1) 检查您的 PHP 上是否正确配置了 SSL（处理它的模块默认情况下未安装在 PHP 上。您必须检查 phph.ini 中的配置）。2）检查您的防火墙是否允许对所需端口（此处为 465 或 587）进行传出呼叫。使用 telnet 来执行此操作。如果端口未打开，您将需要 sysdmin 的一些支持来设置配置。我希望你能尽快解决这个问题！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-10-07T09:56:05.463

打开此[链接](https://support.google.com/mail/answer/14257?hl=en)并选择按照说明进行操作，谷歌服务器会阻止来自未知服务器的任何尝试，因此一旦您点击验证码，一切都会好起来的

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-27T05:41:26.253

这段代码对我来说很好

```
 $mail = new PHPMailer;
    //Enable SMTP debugging. 
    $mail->SMTPDebug = 0;
    //Set PHPMailer to use SMTP.
    $mail->isSMTP();
    //Set SMTP host name                          
    $mail->Host = $hostname;
    //Set this to true if SMTP host requires authentication to send email
    $mail->SMTPAuth = true;
    //Provide username and password     
    $mail->Username = $sender;
    $mail->Password = $mail_password;
    //If SMTP requires TLS encryption then set it
    $mail->SMTPSecure = "ssl";
    //Set TCP port to connect to 
    $mail->Port = 465;
    $mail->From = $sender;  
    $mail->FromName = $sender_name;
    $mail->addAddress($to);
    $mail->isHTML(true);
    $mail->Subject = $Subject;
    $mail->Body = $Body;
    $mail->AltBody = "This is the plain text version of the email content";
    if (!$mail->send()) {
        echo "Mailer Error: " . $mail->ErrorInfo;
    }
    else {
           echo 'Mail Sent Successfully';
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-19T15:29:35.917

Google 会根据可用的用户信息对 Gmail 帐户进行不同的处理，这可能是为了遏制垃圾邮件发送者。

在进行电话验证之前，我无法使用 SMTP。做了另一个帐户仔细检查，我能够确认它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-04T12:25:16.757

Anderscc 已经正确了。谢谢。它对我有用，但不是 100%。

我不得不设置

```
$mail->SMTPDebug = 0; 
```

将其设置为 1 可能会导致错误，尤其是当您将一些数据作为 json 传递到下一页时。示例 - 如果发送邮件则执行验证，使用 json 通过 ajax 传递数据。

我不得不降低我的 gmail 帐户安全设置以消除错误：“SMTP connect() failed”和“SMTP ERROR: Password command failed”

**解决方案：** 此问题可能是由尝试使用电子邮件帐户的“不太安全”的应用程序引起的（这是根据谷歌帮助，不确定他们如何判断什么是安全的，什么是不安全的）或者如果您尝试多次登录连续或如果您更改国家/地区（例如使用 VPN、将代码移动到不同的服务器或实际尝试从世界不同的地方登录）。

解决问题的链接（您必须登录谷歌帐户）：

*   查看最近尝试使用该帐户并接受可疑访问。

*   链接以禁用阻止可疑应用程序/技术的功能：

    [https://www.google.com/settings/u/1/security/lesssecureapps](https://www.google.com/settings/u/1/security/lesssecureapps)

**注意：** 您可以到以下stackoverflow答案链接获取更详细的参考。

[https://stackoverflow.com/a/25175234](https://stackoverflow.com/a/25175234)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-11T19:50:19.990

**如果那里的任何人没有得到任何有效的答案，可以试试这个。因为我花了一天时间来解决这个问题。**
注意：我使用的是 PHPMailer 5.2.23。

```
<?php

    date_default_timezone_set('Asia/Kolkata');

    require './Libraries/PHPMailer5/PHPMailerAutoload.php';
    $mail = new PHPMailer;

    $mail->isSMTP();

    // Enable SMTP debugging
    // 0 = off (for production use)
    // 1 = client messages
    // 2 = client and server messages
    $mail->SMTPDebug = 2;

    $mail->Debugoutput = 'html';

    $mail->Host = 'localhost';
    $mail->Port = 587;

    $mail->SMTPSecure = 'tls';

    $mail->SMTPAuth = true;
    $mail->Username = "yourWebmailUsermail";
    $mail->Password = "yourWebmailPassword";

    $mail->SMTPOptions = array(
        'ssl' => array(
            'verify_peer' => false,
            'verify_peer_name' => false,
            'allow_self_signed' => true
        )
    );

    $mail->setFrom('formEmailAddress', 'First Last');

    $mail->addAddress('toEmailAddress', 'John Doe');

    $mail->Subject = 'PHPMailer GMail SMTP test';

    $mail->msgHTML("<h1>Hi Test Mail</h1>");
    $mail->AltBody = 'This is a plain-text message body';

    if (!$mail->send()) {
        echo "Mailer Error: " . $mail->ErrorInfo;
    } else {
        echo "Message sent!";
    }
?> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-20T01:06:45.190

我只是想与 phpMailer 分享我的经验，它在本地（XAMPP）工作，但不在我的托管服务提供商上工作。

我打开了phpMailer报错

```
 $mail->SMTPDebug=2 
```

我收到“连接被拒绝错误”

我向我的主机提供商发送了电子邮件以解决该问题，他们说他们将打开 SMTP 端口 25、465、587。

然后我收到以下错误响应“SMTP 错误：密码命令失败：”....“请通过您的网络浏览器登录，然后重试”....“SMTP 错误：无法验证。”

所以谷歌检查您是否登录到您的帐户（我是通过浏览器在本地运行脚本时），然后允许您通过 phpMailer 脚本发送邮件。

要解决这个问题：

1：转到您的 Google 帐户 -> 安全 2：滚动到钥匙图标并选择“双向验证”并按照程序进行 3：完成后从 Google 帐户返回钥匙图标 -> 安全并选择第二个选项“创建应用程序密码”并按照程序获取密码。

现在转到您的 phpMailer 对象并使用上述过程中提供的密码更改您的 Google 密码。

你完成了。

编码：

```
require_once('class.phpmailer.php');

$phpMailerObj= new PHPMailer();

                $phpMailerObj->isSMTP();                    
                $phpMailerObj->SMTPDebug = 0;
                $phpMailerObj->Debugoutput = 'html';                    
                $phpMailerObj->Host = 'smtp.gmail.com';                     
                $phpMailerObj->Port = 587;
                $phpMailerObj->SMTPSecure = 'tls';
                $phpMailerObj->SMTPAuth = true;                 
                $phpMailerObj->Username = "YOUR EMAIL";                 
                $phpMailerObj->Password = "THE NEW PASSWORD FROM GOOGLE ";
                $phpMailerObj->setFrom('YOUR EMAIL ADDRESS', 'THE NAME OF THE SENDER',0);
                $phpMailerObj->addAddress('RECEIVER EMAIL ADDRESS', 'RECEIVER NAME');

                $phpMailerObj->Subject = 'SUBJECT';
                $phpMailerObj->Body ='MESSAGE';

                if (!phpMailerObj->send()) {
                    echo "phpMailerObjer Error: " . $phpMailerObj->ErrorInfo;
                    return 0;
                } else {
                    echo "Message sent!";
                    return 1;
                } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-19T01:39:02.230

我找到了一个解决方案并且它正在工作。

**基本设置：**

```
$mail->IsHTML(true);
//Tell PHPMailer to use SMTP
$mail->isSMTP();
//Enable SMTP debugging
//SMTP::DEBUG_OFF = off (for production use)
//SMTP::DEBUG_CLIENT = client messages
//SMTP::DEBUG_SERVER = client and server messages
$mail->SMTPDebug = SMTP::DEBUG_CLIENT;
//Set the hostname of the mail server
$mail->Host = 'smtp.gmail.com';
//Set the SMTP port number - likely to be 25, 465 or 587
$mail->Port = 587;
//Whether to use SMTP authentication
$mail->SMTPAuth = true;
//Username to use for SMTP authentication
$mail->Username = 'user@gmail.com';
//Password to use for SMTP authentication
$mail->Password = 'PASSWORD_HERE';
//Set who the message is to be sent from
$mail->setFrom('email@email.ext', 'From where it is sent');
//Set an alternative reply-to address
$mail->addReplyTo('email@email.ext', 'Reply To');
//Set who the message is to be sent to
$mail->addAddress('email@email.ext');
//Set the subject line
$mail->Subject = 'Email subject';
// Body message
$mail->Body = '
  <h1>Message details</h1>
';
// Send message
if( $mail->send()  ) {
    echo "Sent"
} else {
    echo "Not Sent";
} 
```

如果您已经尝试了所有方法，请尝试这样做：

1.  禁用阻止可疑应用程序/技术的功能[https://www.google.com/settings/u/1/security/lesssecureapps](https://www.google.com/settings/u/1/security/lesssecureapps)
2.  清除验证码[https://accounts.google.com/b/0/DisplayUnlockCaptcha](https://accounts.google.com/b/0/DisplayUnlockCaptcha)

*做测试。*

以下是一些帮助我解决此问题的感兴趣的文章：

[https://support.google.com/a/thread/108782439/smtp-error-password-command-failed-535-5-7-8-username-and-password-not-accepted?hl=en&msgid=108963583](https://support.google.com/a/thread/108782439/smtp-error-password-command-failed-535-5-7-8-username-and-password-not-accepted?hl=en&msgid=108963583)

[https://bobcares.com/blog/phpmailer-smtp-error-password-command-failed/](https://bobcares.com/blog/phpmailer-smtp-error-password-command-failed/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-03-29T04:17:48.980

```
 $mail->SMTPOptions = array(
                'ssl' => array(
                    'verify_peer' => false,
                    'verify_peer_name' => false,
                    'allow_self_signed' => true
                )
            ); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-10-26T15:32:24.780

如果您使用的是 cPanel，您只需单击允许您通过 SMTP 发送到外部服务器的 wee 框。

> 登录到 CPanel > Tweak Settings > All > “将传出 SMTP 限制为 root、exim 和 mailman (FKA SMTP Tweak)”

如此处回答：

[使用 GMail 和 phpMailer 发送时“服务器不接受密码：535 验证数据不正确”](https://stackoverflow.com/questions/14297264/password-not-accepted-from-server-535-incorrect-authentication-data-when-send/44564332#44564332)

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2014-03-21T06:06:00.327

我认为这是连接问题，您可以在此处获取代码[http://skillrow.com/sending-mail-using-smtp-and-php/](http://skillrow.com/sending-mail-using-smtp-and-php/)

```
include(“smtpfile.php“);
include(“saslfile.php“); // for SASL authentication $from=”my@website.com“; //from mail id

$smtp=new smtp_class;

$smtp->host_name=”www.abc.com“; // name of host
$smtp->host_port=25;//port of host

$smtp->timeout=10;
$smtp->data_timeout=0;
$smtp->debug=1;
$smtp->html_debug=1;
$smtp->pop3_auth_host=””;
$smtp->ssl=0;
$smtp->start_tls=0;
$smtp->localhost=”localhost“;
$smtp->direct_delivery=0;

$smtp->user=”smtp username”;
$smtp->realm=””;
$smtp->password=”smtp password“;

$smtp->workstation=””;
$smtp->authentication_mechanism=””;

$mail=$smtp->SendMessage($from,array($to),array(“From:$from”,”To: $to”,”Subject: $subject”,”Date: ”.strftime(“%a, %d %b %Y %H:%M:%S %Z”)),”$message”);

if($mail){
   echo “Mail sent“;
}else{
   echo $smtp->error;
} 
```**

# forms - 在同一个@Controller 中使用多个@ModelAttribute 方法

> ID：16048348
> 
> 赞同：3
> 
> 时间：2013-04-16T22:34:58.603
> 
> 标签：forms, spring, model, controller, modelattribute

我在 Spring MVC 3 上有一个包含两种不同表单（有两个不同提交）的页面，我对 @ModelAttribute 方法有疑问。当我在同一个控制器上有两个时，它们并不总是执行使模型为 NULL。

编码：

```
@Controller
@RequestMapping(value = "/session/admin/permission/{userId}")
public class PermissionController {

    @Autowired
    private UserManager userManager;

    @ModelAttribute("passwordValidation")
    private PasswordValidation getPasswordModel(){
        return new PasswordValidation();
    }

    @ModelAttribute("user")
    private User getUserModel(@PathVariable("userId") String userId){
        //This is not executed
        return userManager.getUser(userId);
    }

    @ModelAttribute("permissionsAvailable")
    private PermissionsAvailable getPermissionsModel(@ModelAttribute("user") User user)     {
        return new PermissionsAvailable();
    }

    @RequestMapping(method = RequestMethod.GET)
    public String adminPermission(){
        return "/security/permission";
    }

    @RequestMapping(method = RequestMethod.POST, params="changeRoles")
    public String modifyPermission(@ModelAttribute("permissionsAvailable") PermissionsAvailable permissions,
            HttpServletRequest request, @ModelAttribute("user") User user, 
            final RedirectAttributes redirectAttributes){
        //Modify something
    }

    @RequestMapping(method = RequestMethod.POST, params="changePassword")
    public String modifyPassword(
            @ModelAttribute("passwordValidation") PasswordValidation passwordValidation,
            @ModelAttribute("user") User user,
            HttpServletRequest request, BindingResult bindingResult, 
            final RedirectAttributes redirectAttributes){
        return "newpage";
    }
} 
```

不知道为什么，有时一切正常，每个方法都执行了，但有时它们没有执行。

**更新：**我有两个不同的控制器有同样的问题，所以它一定是 Spring 上的错误或者我做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-25T21:11:30.253

该文档没有提到可以在 @ModelAttribute 注释方法的参数上使用 @ModelAttribute 的任何地方，就像您在“getPermissionsModel()”方法中所做的那样。这可能不受支持，因为它没有被记录为受支持。您可能想尝试从“getPermissionsModel()”方法中删除“@ModelAttribute("user") User user”参数，和/或尝试仅使用一种@ModelAttribute 方法来设置所有模型属性：

```
@ModelAttribute
public void setAttributes(@PathVariable("userId") String userId, Model model) {
    model.addAttribute(new PasswordValidation());
    model.addAttribute(userManager.getUser(userId));
    model.addAttribute(new PermissionsAvailable());
} 
```

# c# - C# winforms 应用线程同步

> ID：16048349
> 
> 赞同：0
> 
> 时间：2013-04-16T22:34:59.683
> 
> 标签：c#, multithreading, synchronization

我是编程的初学者，我想知道同步线程。

我有一个 WinForms 程序，它需要为每个 cpu 内核创建线程并运行一个方法指定的次数。

我在嵌套循环中设置并运行了线程，但我的输出如下：

```
thread: 0, run: 1, time: xxx
thread: 1, run: 1, time: xxx
thread: 2, run: 1, time: xxx
thread: 3, run: 1, time: xxx
thread: 1, run: 2, time: xxx
thread: 2, run: 2, time: xxx 
```

等但是我希望输出显示数据，如下所示：

```
thread: 0, run: 1, time: xxx
thread: 0, run: 2, time: xxx
thread: 0, run: 3, time: xxx
thread: 1, run: 1, time: xxx
thread: 1, run: 2, time: xxx
thread: 1, run: 3, time: xxx 
```

等等

在我的表单中，我创建线程并从一个单独的类中调用一个方法，就像这样；

```
SomeClass[] thisArray = new SomeClass[numThreads];

for (int runNumber = 1; runNumber <= numberOfRuns; runNumber++)
    {
        for (int i = 0; i < numThreads; i++)
        {
            thisArray[i].mThread = new Thread(thisArray[i].StartMethod);
            thisArray[i].mThread.Start();
            thisArray[i].mThread.Join();

           //Display thread id and number of runs
           this.tBoxW.AppendText(string.Format("") + Environment.NewLine);
           this.tBoxW.AppendText(string.Format("Thread Id: ") + i.ToString() + 
           Environment.NewLine);

           this.tBoxW.AppendText(string.Format("Number of Runs {0}", numberOfRuns) + 
           Environment.NewLine);

        }
} 
```

SomeClass 位于 SomeClass.cs 中，并提供了 StartMethod() 方法，该方法通过一系列方程运行。

为了以我想要的方式获得输出，我是否正确地假设我需要同步线程？或者也许有更简单的方法？

当我刚开始使用线程时，我正在寻找实现所需输出的最简单方法。

任何帮助将不胜感激。感谢您花时间看我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:09:21.633

我不清楚你想要什么。您必须告诉我们更多您的问题需要什么同步。线程任务如何相互依赖？如果它们依赖，您必须同步。最后，无论如何您都必须同步。

由于它是 WinForms，我不确定它是否可能（是否绑定到较旧的 .NET 版本），但请尝试使用较新的 Task API。然后你可以 WaitAny()。或者，如果您可以将问题转换为并行循环，那就更好了。

另外，您在谈论CPU内核。您将无法将线程显式分配给某些 CPU 内核（也许 99% 的情况下甚至不建议这样做）。线程池会处理这个问题。如果您需要关闭所有 CPU 资源，您可能希望生成比 CPU 更多的线程。

# requirejs - 在包含具有依赖关系的模块时为模块加载超时

> ID：16048351
> 
> 赞同：3
> 
> 时间：2013-04-16T22:35:05.917
> 
> 标签：requirejs

我收到一个错误：“错误：模块加载超时”

在尝试包含具有依赖关系的模块时。

我做错了吗？

我的引导程序：

```
requirejs.config({
    baseUrl: "js",
    paths: {
        JqueryUiLatest: "jquery-ui-1.10.1.custom",
    }
});
require([
    'modules/outlookPopupModule'
], function(OutlookPopupModule){

    ...

}); 
```

我的模块：

```
define([
        'jquery',
        "JqueryUiLatest"

    ], function ($, JqueryUI) { 
```

如果我用模块中的实际文件“jquery-ui-1.10.1.custom”替换“JqueryUiLatest”似乎可以工作，但这似乎违背了能够使用配置的目的。

我确定我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T12:41:50.057

根据我的经验，当 shim 依赖模块是一个普通的 JS 脚本，而不是封装的 AMD 模块时，requirejs 经常会因超时而失败。我现在唯一的解决方案 - 在 requirejs 之前手动加载这些文件，或者在 require/define 调用中通过全名（包括 .js 扩展名）显式加载它们。在 require/define 中不会发生超时。

# java - 使用 MySQL 的简单 Java EE 客户端桌面应用程序和 Web

> ID：16048352
> 
> 赞同：0
> 
> 时间：2013-04-16T22:35:10.900
> 
> 标签：java, jakarta-ee, architecture, orm, web

一开始我不得不说我对 java ee 完全陌生，而且在 java 中完全陌生。我必须用这个来做我的学习项目。首先，我需要一个与远程 mysql 数据库连接的标准桌面应用程序。第二个不太重要的是与数据库连接的网络应用程序。问题是根据 java ee 标准，信息流应该是什么样子？像客户端应用程序 > 远程 > java bean > 本地 > mysql 之类的东西？对于这个简单的项目，你推荐什么 api 来处理 ORM 等？最后一个我需要一些关于 java ee 的教程或书籍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:03:08.027

您实际上给出的要求和约束太少，即使是选择技术堆栈也是如此。

根据您的帖子我可以提供什么建议：

尝试分解数据访问层 (DAO)，因为您可能会在桌面和 Web 应用程序之间共享它。为此，您有 2 个解决方案：

**解决方案 1**：两个应用程序中嵌入的 jar 模块：
这意味着该组件还必须在服务器容器 (Java SE) 之外运行。我建议不要使用 Java EE，但 Spring 因为 Java EE 还没有提供一个独立的“轻量级”容器来正确管理持久性上下文。

Spring 将允许您使用数据源（插入远程 DB）和容器事务管理（在容器外部使用 ORM 不是很有趣恕我直言）定义数据访问组件，该组件将单独运行（桌面应用程序）并在任何 servlet 内部运行容器（tomcat 等）（Web 应用程序）仅与配置文件不同。

它会给：

**独立**：客户端 [Swing 视图 > 控制器 > Spring 托管 DAO] > 远程数据库
**Web**：客户端 [html] > Web 服务器 [任何视图技术（例如 Spring MVC）> Spring 托管 DAO] > 远程或本地数据库

**解决方案 2**：具有共享数据访问组件实例的 SOA 架构部署在 Web 服务器上，并通过 Web 服务暴露给独立应用程序：

**独立**：客户端 [swing 视图 > 控制器] > http > Web 或 Java EE 服务器 [REST 或 SOAP Web 服务 > DAO] > 本地或远程数据库

**网络**：

*   客户端 [html] > Web 服务器 [任何视图技术 > DAO] > 本地或远程数据库*   客户端 [RIA（Ajax、Flex 等）] > Web 服务器 [REST Web 服务 > DAO] > 本地或远程数据库

    否则，如果您真的不需要它，我建议不要使用 ORM，因为与它给您带来的优势相比，学习曲线相当长。（这取决于您的上下文和要求：数据模型的复杂性、现有数据库或新数据库、您的应用程序专用或共享的数据库、现有存储过程或触发器、高并发等）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T22:59:05.700

对于桌面应用程序，我将流程描述为：Java Application(Core Java) -> EJB (Enterprise Java Beans) -> Hibernate (ORM) -> MySQL (DB)

对于 Web 应用程序：Struts（前端框架）-> Hibernate -> MySQL

您还可以在 struts 和 Hibernate 之间使用 EJB。如果项目相关，您实际上只需要真正交换前端（Java App 和 Struts 组件）。

我不会马上跳入成堆的框架。我从 JSP 和 Servlet 开始学得更好，然后进入 Struts，然后学习 Hibernate 等等。这太多了，一次都不必担心。

我没有要推荐的书，但[http://www.mkyong.com/](http://www.mkyong.com/)有一些不错的例子。

# asp.net - 需要将字符串列表获取到 Web 服务中

> ID：16048355
> 
> 赞同：0
> 
> 时间：2013-04-16T22:35:15.723
> 
> 标签：asp.net, sql-server, vb.net, visual-studio-2010, web-services

我正在通过 asp.net 创建一个 Web 服务。我想将加油站的地址作为一个列表拉出来，如下所示不幸的是，我得到的是地址的字符串名称，如下所示来自 xml...

不幸的是，当我运行它时，我得到一个 xml 文件

```
-<FuelStop> 
    <Physical_Address_Street>Physical_Address_Street</Physical_Address_Street>                   
    <Physical_Address_Local>Physical_Address_Local</Physical_Address_Local> 
    <Physical_Address_State>Physical_Address_State</Physical_Address_State>           
    <Physical_Address_Zip>Physical_Address_Zip</Physical_Address_Zip> 
    <Phone_Number>Phone_Number</Phone_Number> 
</FuelStop> 
```

与获取数据库中填充的地址信息相比。

下面是我的代码。

```
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.ComponentModel
Imports System.Data
Imports System.Data.SqlClient

<System.Web.Services.WebService(Namespace:="http://watersports.com 8010/",     Description:="Holds Fuel Stop and Shelter information", Name:="ShelterandFuelService")> _
<System.Web.Services.WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<ToolboxItem(False)> _
Public Class Service1
Inherits System.Web.Services.WebService

<WebMethod()> _
Public Function GetAddresses(ByVal skip As Integer, ByVal take As Integer) As FuelStop()

    Dim sqlCon As New SqlConnection
    Dim resultList = New List(Of FuelStop)()

    Try

        sqlCon.ConnectionString = "Data Source=google.watersports.com;Initial Catalog=myDb;Persist Security Info=True;Connect Timeout=30;User ID=****;Password=******"
                   Dim command As New SqlCommand("SELECT @Physical_Address_Street, @Physical_Address_Local, @Physical_Address_State, @Physical_Address_Zip, @Phone_Number FROM Gas_Stations WHERE Location_Type = 1")
        command.Parameters.Add("@Physical_Address_Street", SqlDbType.VarChar, 50).Value = "Physical_Address_Street"
        command.Parameters.Add("@Physical_Address_Local", SqlDbType.VarChar, 50).Value = "Physical_Address_Local"
        command.Parameters.Add("@Physical_Address_State", SqlDbType.VarChar, 50).Value = "Physical_Address_State"
        command.Parameters.Add("@Physical_Address_Zip", SqlDbType.VarChar, 50).Value = "Physical_Address_Zip"
        command.Parameters.Add("@Phone_Number", SqlDbType.VarChar, 50).Value = "Phone_Number"

        command.Connection = sqlCon
        sqlCon.Open()
        'command.ExecuteNonQuery()
        Using reader = command.ExecuteReader()
            While reader.Read()
                Dim fuelStop = New FuelStop()
                fuelStop.Physical_Address_Street = reader.GetString(0)
                fuelStop.Physical_Address_Local = reader.GetString(1)
                fuelStop.Physical_Address_State = reader.GetString(2)
                fuelStop.Physical_Address_Zip = reader.GetString(3)
                fuelStop.Phone_Number = reader.GetString(4)

                resultList.Add(fuelStop)

            End While
        End Using

    Catch ex As Exception

        sqlCon.Close()
    Finally
        sqlCon.Close()

    End Try
    Return resultList.Skip(skip).Take(take).ToArray() 
```

根据下面的 Sql 命令，我可能会返回几百个地址，如何将其合并到我的 vb.net 逻辑中以返回地址列表？

```
Dim command As New SqlCommand("SELECT Physical_Address_Street, Physical_Address_Local, Physical_Address_State, Physical_Address_Zip, Phone_Number FROM Gas_Stations WHERE Location_Type = 1") 
```

这是我的加油站课程

```
Public Class FuelStop

    Property Physical_Address_Street As String

    Property Physical_Address_Local As String

    Property Physical_Address_State As String

    Property Physical_Address_Zip As String

    Property Phone_Number As String

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:25:35.647

下面的代码应该给你你正在寻找的东西。我不确定 WebMethods 是否可以返回自定义对象，例如下面的 Address 对象。如果它不能这样做，那么您可以将返回类型转换为 String() 并将每个 Address 对象转换为 json 对象。

如果我从头开始执行此操作，我将只返回一个包含 Address 对象列表的 JSON 数组。

此外，我在此方法签名中包含了一个跳过和获取参数，正如您在评论中提到的，Web 服务 sql 查询是无界的，因此它可以返回数百个地址。通过使用skip and take，您可以限制一次返回的数量，并可以从客户端对它们进行分页。要减小 sql 查询的大小，您可以将 skip 和 take 参数传递到 sql 查询中以减少返回的行数，这将随着地址数量的增加而提高性能。

您可以在以下代码中包含额外的安全检查以防止错误，但这可以让您继续前进。

```
<WebMethod> _
Public Function GetAddresses(skip As Integer, take As Integer) As Address()
    Dim resultList = New List(Of Address)()
    Using sqlCon As New SqlConnection()
            sqlCon.ConnectionString = "Data Source=google.watersports.com;Initial Catalog=myDb;Persist Security Info=True;Connect Timeout=30;User ID=****;Password=******"
            Dim command As New SqlCommand("SELECT Physical_Address_Street, Physical_Address_Local, Physical_Address_State, Physical_Address_Zip, Phone_Number FROM Gas_Stations WHERE Location_Type = 1")

            sqlCon.Open()
            Using reader = command.ExecuteReader()
                While reader.Read()
                    Dim addr = New Address()
                    addr.Physical_Address_Street = reader.GetString(0)
                    addr.Physical_Address_Local = reader.GetString(1)
                    addr.Physical_Address_State = reader.GetString(2)
                    addr.Physical_Address_Zip = reader.GetString(3)
                    addr.Phone_Number = reader.GetString(4)

                    resultList.Add(addr)
                End While
            End Using
    End Using
    Return resultList.Skip(skip).Take(take).ToArray()
End Function 
```

下面是上面使用的临时类对象。

```
public class Address
{
    public string Physical_Address_Street { get; set; }
    public string Physical_Address_Local { get; set; }
    public string Physical_Address_State { get; set; }
    public string Physical_Address_Zip { get; set; }
    public string Phone_Number { get; set; }
} 
```

# c++ - 与当前对象相关的 C++ 指针和地址说明

> ID：16048361
> 
> 赞同：1
> 
> 时间：2013-04-16T22:35:34.527
> 
> 标签：c++, pointers

到目前为止，据我了解，在定义指针变量时，我们在 RAM 中为该变量分配空间。

```
int *p; 
```

将在 RAM 中定义一个空间。然后我们使用 `&variable' 为该指针分配一个内存地址。

我正在查看一个示例：[*this vs this in C++](https://stackoverflow.com/questions/2750316/this-vs-this-in-c) 代码是：

```
#include <iostream>

class Foo
{
    public:
        Foo()
        {
            this->value = 0;
        }

        Foo get_copy()
        {
            return *this;
        }

        Foo& get_copy_as_reference()
        {
            return *this;
        }

        Foo* get_pointer()
        {
            return this;
        }

        void increment()
        {
            this->value++;
        }

        void print_value()
        {
            std::cout << this->value << std::endl;
        }

    private:
        int value;
};

int main()
{
    Foo foo;
    foo.increment();
    foo.print_value();

    foo.get_copy().increment();
    foo.print_value();

    foo.get_copy_as_reference().increment();
    foo.print_value();

    foo.get_pointer()->increment();
    foo.print_value();

    return 0;
} 
```

我不明白将`*`操作员放在前面`Foo* get_copy()`的目的是什么`Foo* get_pointer()`。如果我在返回not时`*`从函数中删除了，为什么会出现错误？`Foo*``this``*this`

编辑：

另外，为什么是：

```
foo.get_copy().increment();
foo.print_value(); 
```

产生 1 而不是 2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:36:46.393

> 我不明白将`*`操作员放在前面`Foo* get_copy()`的目的是`Foo* get_pointer()`什么

```
Foo* get_pointer() 
```

`Foo*`是一个*指向*对象的指针`Foo`。

`this`也是一个隐式绑定到成员函数的调用对象的指针。这就是为什么这些函数的返回类型`Foo*`不是`Foo`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:37:36.460

`this`, 在 C++ 中始终是一个指针，尽管您没有在任何地方明确提及它。所以在返回 this 指针时，应该使用`Foo*`

`this`实际上是在函数调用过程中传递的隐式对象，它是指向调用函数的对象的指针

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T22:42:31.640

`*`是类型的一部分。所以`int`意味着 type`int`和 `int*`type 指向的指针`int`。如果函数返回指向 int 的指针，则为`int* foo()`，如果返回指向 的指针 `Foo`，则为`Foo* Foo::get_pointer()`。

定义为定义的*对象*保留空间。声明不保留任何空间，非对象（例如引用或函数）的定义也不保留任何空间，至少不是您可以看到的。（显然，函数确实存在于内存中的某个位置，在许多情况下，编译器也需要空间来实现引用。但它们在 C++ 范围内是不可见的。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T22:51:08.047

似乎您已经更改了您引用的示例中的代码，因此`get_copy()`不再返回副本。

`*`在您的代码示例中有两种使用方式。一种用于类型声明，另一种用于解引用运算符。

首先是类型声明：

`int *p`表示声明`p`为“指向 int 的指针”类型的变量。

`Foo *get_pointer()`意味着该函数`get_pointer`将返回一个“指向 Foo 对象的指针”类型的值。

现在取消引用：

`*p`意思是“p 指向的值”。

```
int a = 42; 
int *p;  // p is of type "pointer to an int"
p = &a;  // set p to the address of a (p now "points to" a)

a = 117;  // change the value of a
int x = *p; // set x to the value that p points to (which is a) - x will be 117 
```

`this`只是一个指向对象的指针。`*this`意思是“this 指向的对象”。在您的示例`this`中是类型`Foo*`（指向 Foo 对象的指针），`*this`而是类型`Foo`（Foo 对象）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-16T22:42:12.983

`"this" is a pointer`.
你想返回一个指向实例的指针（一个特定的分配对象）。

```
 Foo* get_pointer(){
            return this;
        } 
```

或者你想返回一个指向副本的指针，分配一个新对象。

```
//need to implement the copy here
       Foo* get_copy(){
            return this;
        } 
```

而不是引用（实例的地址）。这就是为什么你需要返回指针。

# php - 在 PHP 中比较 if 语句时，是否区分大小写？

> ID：16048371
> 
> 赞同：0
> 
> 时间：2013-04-16T22:36:21.223
> 
> 标签：php, html

如果我有类似的代码，例如，如果有人忘记将他们的运营商名称大写，`if ($_REQUEST['carrier'] == "T-Mobile") {}`我是否不必做得很好？`"t-mobile"`我正在编写一个电子邮件文本订阅系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:39:22.767

您可以使用 strcasecmp 函数来检查两个字符串是否相等（不区分大小写）。

如果它们相等，则此函数返回 0。

看看这里： http: [//php.net/manual/en/function.strcasecmp.php](http://php.net/manual/en/function.strcasecmp.php)

你的 if 看起来像这样

```
if (strcasecmp($_REQUEST['carrier'], "T-Mobile") == 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:37:43.040

我真的无法弄清楚你的问题，但是......

尝试将两者都转换为小写并进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T22:38:00.853

是的，它区分大小写。解决方案是将输入转换为小写：

```
if (strtolower($_REQUEST['carrier']) == "t-mobile") { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T22:40:06.190

[strtolower](http://php.net/manual/en/function.strtolower.php)：

```
if (strtolower($_REQUEST['carrier']) == "t-mobile") { /* ... */ } 
```

有更优雅的方法可以做到这一点，但你明白了。

# asp.net-mvc - 使用鼠标位置 - 位置数组更改 3-D 空间图像中的 x、y 和 z 坐标点

> ID：16048376
> 
> 赞同：1
> 
> 时间：2013-04-16T22:36:44.660
> 
> 标签：asp.net-mvc, image, handler, mousemove

我的应用程序是 asp.net MVC，我正在尝试更改图像的 x、y 和 z 坐标。我正在使用图像处理程序：

```
 mpr.SetViewPlane(new Point3D(pX, pY, pZ), new Vector3D(0, 1, 0), new Vector3D(0, 0, -1)); 
```

在视图中，我正在计算使用鼠标右键时 Y 位置的变化：

```
 $("#container1").bind('mousemove', function (e) {
                  lastX = parseInt(e.clientX);
                  lastY = parseInt(e.clientY);
                  pointZF = lastX - mX;
                   var htm1 = "ImageHandler.ashx?&pY=" + pointZF;
                   img.src = htm1;
              }); 
```

它工作得很好，但是图像会跳转（例如位置 1 到位置 15）；我想从 1 到 15 的位置，知道我该怎么做吗？

# php - 使用 PHP 登录后如何将用户重定向到上一个页面？

> ID：16048378
> 
> 赞同：2
> 
> 时间：2013-04-16T22:36:47.033
> 
> 标签：php

我的网站上的每个页面都包含一个登录小部件。目前，当他们登录时，他们会被重定向到主页。但是我想要它，所以当他们登录时，他们会停留在他们当前正在查看的页面上。

在我的论坛上，您必须登录才能发帖（显然）。我想要它，这样他们就可以在登录后留在他们试图回复的论坛帖子上，而不必再次找到它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:46:29.127

这取决于具体情况，但会想到几个选项；

*   有一个重定向参数，一旦用户登录，它将重定向用户。
*   使用 将`HTTP_REFERER`用户引回到他来自的地方。
*   取决于登录表单；你可以发送一个ajax请求来登录用户而不移动他

但我认为这最终取决于你的环境，因为除了*我的论坛*之外你没有提供任何信息/代码，我只能像你的问题一样模糊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:46:57.940

您可以在隐藏字段内的登录小部件内绑定当前页面，并告诉身份验证页面在登录成功后重定向到此绑定值作为页面。

或者，如果您想更安全，请尝试在其中使用`sessions`并绑定当前页面，然后在您的身份验证页面中提取绑定到此会话中的变量，然后将其作为有效页面重定向到它

你也可以检查这个变量是否是一个有效的页面，`file_exists`所以请尝试一下并告诉我结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T22:43:57.657

最简单（尽管不是完全可靠的方法是使用`HTTP_REFERER`并重定向到引用页面。如果您的登录操作跨越多个页面，您可能需要稍微传递一下。

更正确的方法是在会话中设置当前（未登录）页面并在登录时重定向到该会话值页面。

# arrays - vb.NET 数组 - 将字符串转换为表格

> ID：16048382
> 
> 赞同：0
> 
> 时间：2013-04-16T22:37:08.817
> 
> 标签：arrays, vb.net, winforms, visual-studio

我正在开发一个 Windows 窗体应用程序，我让它读取一个文本文件，该文件以表格的形式存储信息。它看起来有点像这样：

```
ID     Name      URL
1      client1   client1.com
2      client2   client2.com
3      client3   client3.com 
```

等等......我需要做的是从流阅读器中读取这些数据，将其放入字符串中，包括 vbtabs 和换行符，然后根据该信息创建一个数组，以便它充当之后我可以根据列名（即 ID、名称、URL）和 ID 号从中提取信息的表。我对数组没有很多经验，所以我希望在这里得到一些帮助来了解如何做到这一点。

到目前为止，我为此功能所拥有的代码是：

```
Dim readCLientTxtListReader As New StreamReader(strReplicationDataClientAccessListPath)
Dim strClientAccessList As String = readCLientTxtListReader.ReadToEnd

Console.Write(strClientAccessList)
readCLientTxtListReader.Close()

Dim i As Integer
Dim aryClientAccessList() As String

aryClientAccessList = strClientAccessList.Split(vbTab)
For i = 0 To UBound(aryClientAccessList)
    Console.WriteLine(aryClientAccessList)
Next i 
```

关于这个的问题是它只是创建了一个新的数组实例作为每个 vbtab 之间的每个单独的字符串。这意味着，数组看起来像：

```
ID
Name
URL
1
client1
client1.com
2
client2
client2.com
3
client3
client3.com 
```

这不是我真正需要的。

有任何想法吗？

如果您需要更多信息，请告诉我。

编辑：作为补充说明，我相信多维数组是我正在寻找的，目前正在查找它们，但如果您有更多关于这些的信息，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:59:11.963

我阅读您的最终目标的方式是，您希望拥有一个包含文件每一行的数组，并且每一行都应该是一个数组，其中包含该行的标记。如果这是正确的，那么你可以这样做：

```
var lines = new List<string[]>();
using (var strReplicationDataClientAccessListPath = new FileStream("path", FileMode.Open))
using (var streamReader = new StreamReader(strReplicationDataClientAccessListPath))
{
    while (streamReader.Peek() >= 0)
    {
        var line = streamReader.ReadLine();
        if (!string.IsNullOrEmpty(line))
            lines.Add(line.Split('\t'));
    }
}
foreach (var line in lines)
{
    foreach (var token in line)
        Console.Write(token);
    Console.WriteLine();
} 
```

我很久没有做过 VB，但这里是 C#，它可以通过转换器运行以获取 VB.NET。我也使用列表来完成它，如果你最后需要一个数组，你可以这样做：

```
lines.ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:01:56.437

这是转换为 VB 的 rclements 代码

```
Dim lines = New List(Of String())()
Using strReplicationDataClientAccessListPath = New FileStream("path", FileMode.Open)
  Using streamReader = New StreamReader(strReplicationDataClientAccessListPath)
    While streamReader.Peek() >= 0
      Dim line = streamReader.ReadLine()
      If Not String.IsNullOrEmpty(line) Then
        lines.Add(line.Split(ControlChars.Tab))
      End If
    End While
  End Using
End Using
For Each line As var In lines
  For Each token As var In line
    Console.Write(token)
  Next
  Console.WriteLine()
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:24:27.217

您正在尝试模拟`CSV -> DataTable`工作流程，`vbTab`您的 CSV 分隔符在哪里，`DataTable`您的存储结构在哪里（您可以按字段名称和行索引查询）。互联网上有很多解决方案，只需 google 即可`CSV to DataTable`。

这是[一个](http://www.codeproject.com/Articles/11698/A-Portable-and-Efficient-Generic-Parser-for-Flat-F)，从[这里](https://stackoverflow.com/a/1050149/897326)链接（所以回答）。

如果您仍然想要多维数组，我建议使用 a`List(Of String())`而不是`String(,)`，因为这样您就*不需要*管理内存分配。每行数据都是 的一个元素`List`和一个单维数组，其中列值是数组元素`0-N`。

要从文件中读取，您可以使用[IO.File.ReadAllLines](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-17T22:50:23.047

这是你需要的吗？

```
 'Read Values from the text file and store in a DataTable
    Dim dt As New DataTable
    Using TextReader As New IO.StreamReader("C:\Data.txt")
        Dim Line As String = TextReader.ReadLine

        If String.IsNullOrEmpty(Line) Then
            MsgBox("No Data")
            Exit Sub
        End If

        With Line.Split(vbTab)
            dt.Columns.Add(.GetValue(0))
            dt.Columns.Add(.GetValue(1))
            dt.Columns.Add(.GetValue(2))
        End With

        Do
            Line = TextReader.ReadLine
            If Line Is Nothing Then Exit Do
            dt.Rows.Add(Line.Split(vbTab))
        Loop
    End Using

    'Print the DataTable header
    For Each Column As DataColumn In dt.Columns
        Console.Write(Column.ColumnName & vbTab)
    Next

    Console.WriteLine(vbCrLf & New String("-", 24))

    'Print the DataTable contents
    For Each Row As DataRow In dt.Rows
        Console.WriteLine(Row("ID") & vbTab & Row("Name") & vbTab & Row("URL"))
    Next 
```

我添加了另一个解决方案`List`，以防您更喜欢它`DataTable`：

```
 'Read Values from the text file and store in a List of type Tuples
    Dim Values As New List(Of Tuple(Of String, String, String))

    Using TextReader As New IO.StreamReader("C:\Data.txt")
        Dim Line As String = TextReader.ReadLine

        Do Until Line Is Nothing
            With Line.Split(vbTab)
                Values.Add(Tuple.Create(.GetValue(0).ToString, .GetValue(1).ToString, .GetValue(2).ToString))
            End With
            Line = TextReader.ReadLine
        Loop
    End Using

    'Print the List contents
    For Each T As Tuple(Of String, String, String) In Values
        Console.WriteLine(T.Item1 & vbTab & T.Item2 & vbTab & T.Item3)
    Next 
```

# php - PHP 使用提交按钮循环遍历 MySQL 表

> ID：16048384
> 
> 赞同：1
> 
> 时间：2013-04-16T22:37:18.740
> 
> 标签：php, mysql, forms, loops, submit

好的，我一直在寻找这个问题的解决方案，但无济于事。这可能是我措辞的方式，但我已经尝试*了几乎*所有我能想到的东西。而且我知道这可能很简单，我就是无法理解它。

我遇到的问题是这样的：

我有一个预先填充了来自 MySQL 数据库的数据的表单。表单的这一部分仅用于查看记录（以前由用户输入）。我可以让它工作；我链接了数据库，它显示了我想要的特定表的行的数据。但这就是我遇到的麻烦。

**我希望有一个按钮，用户可以按下该按钮循环浏览数据库中的每一行数据，并相应地以表格形式输出。**

这有点复杂，所以我将使用一个简单的示例。

假设我在 MySQL 数据库中有一个包含三列的基本表：**ID、Name** 和**EmailAddress。**

这是获取数据的查询：

```
$sql = "SELECT * from tbl_Users ORDER BY ID ASC";
$query = mysql_query($sql);
$result = mysql_fetch_array($query); 
```

现在我知道这已被弃用，但我正在使用旧版本的 php，并且我正在尝试与此特定域中的其他页面/应用程序保持一致。

现在假设我有一个带有两个输入和一个提交按钮的简单表单。

**HTML**

```
<form name="button" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<input type="text" name="Name" value="<?php echo $row[Name]; ?>" />
<input type="text" name="emailAddress" value="<?php echo $row[EmailAddress]; ?>" />
<input type="submit" name="submit" value="Next Record" />
</form> 
```

现在我可以让它在表单中呼应我需要的内容。它可以按照我的意愿在表单中预先填充一行。问题在于提交按钮。

**单击提交按钮时，我希望在表单中填充下一行，依此类推，直到记录结束。**

我已经尝试过 if(isset($_POST['submit']{...}，但我不知道如何让它工作。我尝试过循环等。我**知道**有一种方法，我只是现在无法理解。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T23:54:53.063

好的，所以我确实设法让它与 PHP 一起工作。我找到了一个简单的 PHP 分页脚本并将查询的限制更改为 1。我没有在 WHILE 循环中回显查询的结果，而是调用了表单的变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:42:20.047

不幸的是，在您的情况下，PHP 是服务器端，它会在客户端有机会赶上并输出它之前运行任何查询。我相信你需要为此使用javascript。

您可以做以下两件事之一，1\. 在加载时提取所有表信息（较慢的方式）并使用 javascript 显示/隐藏该查询的某些元素。或者 2\. 您可以使用 AJAX 在命令上拉取数据。

我建议学习 javascript（例如使用 jQuery 之类的框架）来为此[执行 AJAX 调用](http://api.jquery.com/jQuery.ajax/)。

# qt - Qt 无法从 Unicode 字符串中获取字符

> ID：16048387
> 
> 赞同：-2
> 
> 时间：2013-04-16T22:37:24.913
> 
> 标签：qt

如何从 Unicode 字符串（QString 类型）中获取 Unicode 字符（QChare 类型）。我正在尝试使用 operator[] 来获取 Qstring 对象，并使用它的成员函数 at()，但这对我没有帮助（我正在使用Qt 创建者 2.0.1)。我是 Qt 的初学者，所以这可能是一个简单的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:33:14.363

如果您将字符串加载到 QString 中，您仍然可以使用 .at(index) 函数。它将返回一个 QChar，它是单个 wchar_t (UTF-16)。您可以将该 QChar 转换为 wchar_t 以获取 unicode 字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:20:45.577

您是否尝试过类似的方法：

```
QString s("text");
QChar unicodeChar(s.at(0).unicode()); 
```

# r - 对象从函数中的命名空间消失

> ID：16048390
> 
> 赞同：1
> 
> 时间：2013-04-16T22:37:38.073
> 
> 标签：r

我正在编写一个包装器来按行组合任意数量的数据集。由于有些可能有独特的变量，我首先限制数据中的变量。

我的功能是这样的

```
rcombine <- function(List, Vars) {
  List2 <- lapply(List, subset, select=Vars)
  Reduce(rbind, List2)
} 
```

当我直接运行代码时，它可以工作。但是在函数中，我的变量`Vars`消失了。

例如：

```
x <- data.frame('a'=sample(LETTERS, 10), 'b'=sample(LETTERS, 10), 'c'=sample(LETTERS, 10))
y <- data.frame('a'=sample(LETTERS, 10), 'b'=sample(LETTERS, 10), 'e'=sample(LETTERS, 10))

rcombine(list(x, y), c('a', 'b')) 
```

给我：

```
Error in eval(expr, envir, enclos) : object 'Vars' not found 
```

但运行：

```
List <- list(x, y)
Reduce(rbind, lapply(List, subset, select=c('a','b'))) 
```

作品。我可以`Vars`从函数中打印，但它在里面`lapply`消失了。到底是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T22:47:00.057

`subset`真的不应该用于这些类型的事情。从帮助页面

> 这是一个旨在以交互方式使用的便利功能。对于编程来说，最好使用像 [ 这样的标准子集函数，特别是参数子集的非标准评估可能会产生意想不到的后果。

对于您的特定问题，我不明白为什么直接使用“[”替换子集会是一个问题。

```
rcombine <- function(List, Vars) {
  List2 <- lapply(List, "[", i= , j = Vars, drop = FALSE) # here is the change
  Reduce(rbind, List2)
}

# alternatively...
rcombine <- function(List, Vars) {
  List2 <- lapply(List, function(x){x[, Vars, drop = FALSE]}) # here is the change
  Reduce(rbind, List2)
}

x <- data.frame('a'=sample(LETTERS, 10), 'b'=sample(LETTERS, 10), 'c'=sample(LETTERS, 10))
y <- data.frame('a'=sample(LETTERS, 10), 'b'=sample(LETTERS, 10), 'e'=sample(LETTERS, 10))

rcombine(list(x, y), c('a', 'b')) 
```

# python - 如何在 django 的 FileField 中保存本地文件

> ID：16048395
> 
> 赞同：0
> 
> 时间：2013-04-16T22:37:55.213
> 
> 标签：python, django, filefield

我需要通过 SOAP Web 服务获取文件并使用 django 的 FileField 将其保存到模型中。

我做了以下事情：

在我的 SOAP Wrapper 中，我将文件保存在临时目录中

```
# ... get the file and file_name and decode put it into a variable called data
f = open('tmp/%s' % filename, 'w+')
f.write(data)
# build a dictionary with another useful metadata 
```

这里没什么奇怪的（我猜）

然后，在我看来，我会执行以下操作：

```
from django.core.files import File
for ext in extensions:
    messages = helpers.get_new_messages(ext)
    for msg in messages:
        vm = VoiceMessage()
        filename = '%s-%s' % (ext.t_account_name, msg['name'])
        vm.extension = ext 
        vm.origin = msg['origin']
        vm.date = msg['when']
        vm.message.save(filename, File(msg['file'])) # Error is raised here
        msg['file'].close()
        vm.save() 
```

我收到以下错误：

/account/dashboard/messages/ 预期字符串或缓冲区处的 TypeError

我已经尝试过 [如何将本地文件分配给 Django 中的 FileField？](https://stackoverflow.com/questions/3501588/how-to-assign-a-local-file-to-the-filefield-in-django)

还有这个 [Django - 如何创建文件并将其保存到模型的 FileField？](https://stackoverflow.com/questions/7514964/django-how-to-create-a-file-and-save-it-to-a-models-filefield)

我错过了什么吗？

**编辑 2013 年 4 月 17 日：添加回溯**

我对其进行了调试，返回了 type(msg['file']) 调用：

```
<type 'file'> 
```

进一步来说：

```
<open file './voice_message_2013-4-15_22-41-58.au', mode 'w+' at 0xca0fe40> 
```

这是完整的追溯。

```
Internal Server Error: /account/dashboard/messages/
Traceback (most recent call last):
  File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/core/handlers/base.py", line 115, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
  File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py", line 25, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "/home/israelord/Work/4geeks/ringtu/ringtu/profiles/views.py", line 239, in account_dashboard_messages
    vm.message.save(filename, File(msg['file']))
  File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/db/models/fields/files.py", line 95, in save
    self.instance.save()
  File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/db/models/base.py", line 546, in save
    force_update=force_update, update_fields=update_fields)
  File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/db/models/base.py", line 650, in save_base
    result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
  File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/db/models/manager.py", line 215, in _insert
    return insert_query(self.model, objs, fields, **kwargs)
  File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/db/models/query.py", line 1673, in insert_query
    return query.get_compiler(using=using).execute_sql(return_id)
  File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 936, in execute_sql
    for sql, params in self.as_sql():
  File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 894, in as_sql
    for obj in self.query.objs
  File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py", line 304, in get_db_prep_save
    prepared=False)
  File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py", line 835, in get_db_prep_value
    value = self.get_prep_value(value)
  File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py", line 820, in get_prep_value
    value = self.to_python(value)
  File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py", line 788, in to_python
    parsed = parse_datetime(value)
  File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/utils/dateparse.py", line 67, in parse_datetime
    match = datetime_re.match(value)
TypeError: expected string or buffer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:08:43.497

看起来您的问题不在于`FileField`，而是在保存`VoiceMessage`实例时发生。

在回溯中，失败发生在末尾`FieldFile.save()`：

```
 File "/home/israelord/.virtualenvs/ringtu-env/local/lib/python2.7/site-packages/django/db/models/fields/files.py", line 95, in save
    self.instance.save() 
```

这意味着那里一切正常，只有当这个方法依次调用对象`save()`时`vm`才会出现问题：

```
# FileField.save() calls instance.save() just before returning
# Here, self.instance is the vm object
def save(self, name, content, save=True): 
    name = self.field.generate_filename(self.instance, name) 
    self.name = self.storage.save(name, content) 
    setattr(self.instance, self.field.name, self.name) 

    # Update the filesize cache 
    self._size = content.size 
    self._committed = True 

    # Save the object because it has changed, unless save is False 
    if save: 
        self.instance.save() 
```

我最好的猜测是问题出在`vm.date`或其他`DateTimeField`领域，因为异常是在`DateTimeField.to_python`函数中引发的。你能检查一下类型`msg['when']`吗？您还可以通过跳过实例保存步骤来确认这一点：

```
vm.message.save(filename, File(msg['file']), False) # Added False
msg['file'].close()
vm.save() # Error should now be raised here 
```

# tinymce - 在 tinymce 4 Modern 主题中只允许某些格式？

> ID：16048398
> 
> 赞同：4
> 
> 时间：2013-04-16T22:38:04.663
> 
> 标签：tinymce

`theme_advanced_blockformats`是否有与该选项等效的“现代主题”（换句话说，tinymce 4） ？

`theme_advanced_blockformats`允许您通过添加以下内容来限制可用格式集`tinymce.init()`：

```
tinyMCE.init({
    ...
    theme_advanced_blockformats : "p,div,h1,h2,h3,h4,h5,h6,blockquote,dt,dd,code,samp"
}); 
```

（[TinyMCE 主题高级块格式](http://www.tinymce.com/wiki.php/configuration%3atheme_advanced_blockformats)）

我知道可以通过将选项传递给 来明确指定可用的格式`tinymce.init()`，如下所示：

```
tinyMCE.init({
    ...
    formats :
            bold : {inline : 'span', 'classes' : 'bold'},
            italic : {inline : 'span', 'classes' : 'italic'},
            underline : {inline : 'span', 'classes' : 'underline', exact : true},
    }
}); 
```

（[TinyMCE 格式](http://www.tinymce.com/wiki.php/configuration%3aformats)）

不幸的是，这需要很多关于每种格式实现方式的详细信息，而我没有。

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-12T01:58:38.813

这是最新的 TinyMCE 版本 (4.1.3)。尽管“block_formats”设置记录了此功能，但我只能使用以下方法使其工作：

```
 tinymce.init({
    selector: "textarea",
      style_formats: [
       {title: 'Paragraph', block: 'p'},
       {title: 'Heading 2', block: 'h2'},
       {title: 'Heading 3', block: 'h3'},
       {title: 'Heading 4', block: 'h4'},
    ],

 }); 
```

这是[Tinymce 记录的自定义格式](http://www.tinymce.com/tryit/custom_formats.php)语法的一个简单示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T14:07:34.677

我认为这是你需要的：

[http://www.tinymce.com/wiki.php/Configuration:block_formats](http://www.tinymce.com/wiki.php/Configuration:block_formats)

喜欢：

`block_formats: "Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-24T20:25:09.277

该文档现在有点参差不齐，但您可以控制什么是有效块以及使用[有效元素](http://www.tinymce.com/wiki.php/configuration%3avalid_elements)定义块的默认属性。声明允许的块和默认样式现在取决于 TinyMCE 核心而不是主题。`valid_elements`声明允许的块并`extended_valid_elements`声明允许的块的默认属性。

```
tinymce.init({
  selector: "textarea",
  valid_elements : "a[href|target=_blank],strong/b,div[align],br",
  extended_valid_elements: "img[class=myclass|!src|border:0|alt|title|width|height]",
  invalid_elements: "strong,b,em,i"
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-07T01:50:20.977

对于 Tinymce 4x，请尝试以下操作：

```
tinymce.init({
    selector: "textarea",
    block_formats: 'Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre',
}); 
```

[https://www.tiny.cloud/docs-4x/configure/content-formatting/#block_formats](https://www.tiny.cloud/docs-4x/configure/content-formatting/#block_formats)

ben.hamelin 的回答在 v4.8.1 中对我不起作用。

# filepicker.io - 上传成功后从 filepicker.io 获取 s3 文件名

> ID：16048399
> 
> 赞同：1
> 
> 时间：2013-04-16T22:38:10.287
> 
> 标签：filepicker.io

我一直在使用 Filepicker.IO 将文件直接从浏览器上传到 amazon s3，大多数事情都运行良好，我现在面临的唯一问题是上传完成后，我没有得到s3 中的文件名。

Filepicker js api 正在返回这个对象：

```
Object {url: "https://www.filepicker.io/api/file/xxxxxxxxxxxxx", filename: "xyzhi.mp4", mimetype: "video/mp4", size: 36735, isWriteable: true} 
```

通常这个对象带有一个名为“key”的属性，它具有 S3 中文件的名称。

当未从本地计算机完成上传时会发生这种情况，如果我选择本地文件一切正常，但如果我从任何提供商（例如 Dropbox、Google Drive）中选择文件，我无法获取文件名S3 服务器。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:06:54.253

您应该确保您使用的是显式存储到 S3 的函数，例如`filepicker.pickAndStore`或`filepicker.store`. 如[filepicker.io 选择 API 文档](https://developers.filepicker.io/docs/web/#pick)中所述，从 .pick() 调用专门返回的 fpfile 上的“key”参数已弃用且不打算使用。

# c++ - for (;;) 这是一个无限循环吗？

> ID：16048400
> 
> 赞同：2
> 
> 时间：2013-04-16T22:38:12.160
> 
> 标签：c++

最近在阅读 c++ 教程时，我遇到了一个看起来像这样的 for 循环：

```
for (;;){
   //Do stuff
} 
```

这是一个无限循环吗？我为什么要用这个而不是那个`while(1)`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T22:39:43.150

是的，它是无限的。传统上，编译器会在您使用时生成警告`while(1)`，但在使用时不会`for(;;)`。我不知道现在是否仍然如此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T22:50:20.957

这是一个无限循环。更准确地说，如果 a 中的条件`for`为空，则认为它`true`。至于`while ( true )`vs. `for (;;)`：历史上`for (;;)`是惯用的形式（由 Kernighan 和 Ritchie 使用），可能部分是因为早期的 C 没有布尔值。`while ( 1 )`在我工作过的任何地方，使用都不会通过代码审查。使用布尔值，`while ( true )`绝对看起来比 更直观`for (;;)`，但`while ( 1 )`令人困惑。但是在布尔之前的时代，每个人都有一个`#define`for `true`or `TRUE`or some such，所以这是一个弱论点。最后，如果你是一个像我一样的老 C 程序员，最初是从 Kernighan 和 Ritchie 那里学习的，你只是本能地使用`for (;;)`. 否则......这可能取决于您在哪里以及从谁那里学习 C++。

当然，在工作时，您会遵循房屋惯例，无论它们是什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T22:39:09.843

> 这是一个无限循环吗？

是的。

> 我为什么要用这个而不是那个`while(1)`？

因为（坏的，IMO）味道。顺便说一句，`while (true)`如果我真的必须创建一个无限循环，我会选择。

# wpf - WPF中的边框颜色动画不能“实时”工作

> ID：16048401
> 
> 赞同：0
> 
> 时间：2013-04-16T22:38:19.870
> 
> 标签：wpf, animation

在 WPF 应用程序中，我试图在 TextBox 的 MouseEnter 事件上设置边框颜色变化的动画。
我搜索了一段时间并遵循了不同的教程，但一切似乎都以相同的方式结束：

*   当鼠标进入时，边框的颜色变为我在动画“From”中设置的颜色
*   然后什么都没有发生，根本没有动画
*   当鼠标在一段时间后离开动画持续时间时，颜色会变为我在动画“To”中设置的颜色
*   如果鼠标在动画持续时间之前离开，边框的颜色会变为“介于两者之间”的某种颜色

由此我认为动画正在发生，但它没有在动画时显示它......
代码在这里：

```
private void txtSpeakMe_MouseEnter(object sender, MouseEventArgs e)
{
    ColorAnimation ca = new ColorAnimation();
    ca.From = (Color)ColorConverter.ConvertFromString("#0066FF");
    ca.To = (Color)ColorConverter.ConvertFromString("#FF0000");
    ca.Duration = TimeSpan.FromSeconds(3);
    txtSpeakMe.BorderBrush.BeginAnimation(SolidColorBrush.ColorProperty, ca);
} 
```

关于为什么它没有显示动画的任何想法？我使用 MS 教程在 XAML 中尝试了动画，效果相同 - 它动画但直到鼠标离开它才显示动画过程......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:31:04.777

`Trigger`在`Xaml`执行此动画时使用 a 可能更容易，`Triggers`有 a `EnterActions`，`ExitActions`因此您可以使用`IsMouseOver`事件来启动/停止动画

例子：

```
 <Border Name="border" BorderThickness="5" Width="200" Height="30">
    <TextBox Text="StackOverflow"/>
    <Border.Style>
        <Style TargetType="Border">
            <Setter Property="BorderBrush" Value="#0066FF" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard HandoffBehavior="SnapshotAndReplace">
                            <Storyboard>
                                <ColorAnimation Duration="0:0:3" To="#FF0000" Storyboard.TargetProperty="BorderBrush.Color" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard HandoffBehavior="SnapshotAndReplace">
                            <Storyboard>
                                <ColorAnimation Duration="0:0:3" To="#0066FF" Storyboard.TargetProperty="BorderBrush.Color" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Border.Style>
</Border> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:12:02.297

不知道为什么 TextBox 边框颜色没有改变，但你可以试试这个：

```
<Border Name = "border" BorderThickness="5">
<TextBox MouseEnter="TextBox_MouseEnter" MouseLeave="TextBox_MouseLeave"/>
</Border> 
```

然后在 MouseEnter 和 MauuseLeave 上试试这个代码：

```
 ColorAnimation ca = new ColorAnimation();
        ca.From = (Color)ColorConverter.ConvertFromString("#0066FF");
        ca.To = (Color)ColorConverter.ConvertFromString("#FF0000");
        ca.Duration = TimeSpan.FromSeconds(3);
        Storyboard sb = new Storyboard();
        sb.Children.Add(ca);
        Storyboard.SetTarget(ca, border);
        Storyboard.SetTargetProperty(ca, new PropertyPath("(Border.BorderBrush).(SolidColorBrush.Color)"));
        sb.Begin(); 
```

# ruby-on-rails - Paperclip::AdapterRegistry::NoHandlerError（未找到“”的处理程序）

> ID：16048405
> 
> 赞同：2
> 
> 时间：2013-04-16T22:38:27.557
> 
> 标签：ruby-on-rails, paperclip

我是回形针宝石的 n00b，所以请原谅，但我花了两个小时的大部分时间在这方面没有进展（我已经看过 railscast 了）：

我的 Rails 应用程序有一个带有回形针附件的模型：

```
class Foo::Bar < ActiveRecord::Base
  attr_protected  :id
  has_attached_file :mydocument
end 
```

每当我尝试为此附件提交带有空白文件字段的表单时，我都会收到以下错误：

```
Paperclip::AdapterRegistry::NoHandlerError: No handler found for "" 
```

我是什么做的？（我安装了 ImageMagick 并`Paperclip.options[:command_path] = 'C:\Program Files\ImageMagick-6.8.4-Q16'`在我的环境文件中指定，并不是说我认为在这种情况下应该有所作为。）

我已经卸载并重新安装了回形针。我已经重新启动了我的电脑。我在同事的计算机上运行该应用程序，**但没有**收到错误消息。但在我的机器上，我仍然得到错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T04:43:43.703

阅读 Paperclip 源代码后，您似乎在调用跟踪中遇到了错误：

```
Foo::Bar.mydocument = document
# calls
Foo::Bar.attachment_for(:mydocument).assign(document)
# calls
file = Paperclip.io_adapters.for(document)
# calls
handler_for(document).new(document) 
```

看起来`handler_for`调用失败了，因为目标是一个空字符串或类似空字符串。

在您的控制器中，尝试打印`params`对象以查看`params[:foo_bar][:mydocument]`. 这可能会让你更接近根本问题。可能是问题的事情可能包括

*   控制器和视图之间的不同属性名称
*   控制器和模型之间的不同属性名称
*   搞砸了`form_tag`或`form_for`没有正确的编码集（尝试`:html => {:multipart => true}`）。

# mysql - 教义限制打破了我的查询？

> ID：16048418
> 
> 赞同：1
> 
> 时间：2013-04-16T22:39:12.350
> 
> 标签：mysql, symfony-1.4, doctrine-1.2

我有以下代码：

```
$params = array();
$query_questions_visibles = questionTable::getInstance()->createQuery("q")
    ->select("q.*, ua.*, a.*, u.*, c.*")
    ->leftJoin("q.Answers a")
    ->leftJoin("a.UserAnswers ua")
    ->Where("q.blocked = false")
    ->andWhere("ua.user_id = :user_id")
->orderBy("q.id DESC")
->groupBy("q.id");

    //Subquery --> Calculates when a question is active or not      
    $format = sfConfig::get("app_datetime_format");
    $active_time = date($format, strtotime(sfConfig::get("app_question_active_time")));
    $sub_query_is_active = $query_questions_visibles->createSubQuery()
            ->select("MAX(ua0.created_at)")
            ->from("question q0")
            ->leftJoin("q0.Answers a0")
            ->leftJoin("a0.UserAnswers ua0")
            ->where("q0.id = q.id");                
    $query_questions_visibles->addSelect("COALESCE((".$sub_query_is_active.") > :active_time, false) as Active");

//Set param values
$params["user_id"] = $guardUser->id;
$params["active_time"] = $active_time;

$result = $query_questions_visibles->execute($params); 
```

前面的代码按预期工作。

生成的 SQL 是完整的并且可以工作：

> SELECT q.id AS q__id, q.user_id AS q__user_id, q.category_id AS q__category_id, q.gender_restriction AS q__gender_restriction, q.question AS q_ *question, q.photo AS q* _photo, q.latitude AS q_ *latitude, q.longitude AS q* _longitude, q.multiple AS q_ *multiple, q.blocked AS q* _blocked, q.created_at AS q__created_at, q.updated_at AS q__updated_at, a.id AS a__id, a.question_id AS a__question_id, a.text AS a_ *text, u。我是你*_id, u.user_id AS u__user_id, u.answer_id AS u__answer_id, u.created_at AS u__created_at, u.updated_at AS u__updated_at, COALESCE((SELECT MAX(u2.created_at) AS u2__0 FROM question q2 LEFT JOIN answer a2 ON q2.id = a2.question_id LEFT JOIN user_answer u2 ON a2.id = u2.answer_id WHERE (q2.id = q.id)) > :active_time, 0) AS u2__0 FROM question q LEFT JOIN answer a ON q.id = a.question_id LEFT加入 user_answer u ON a.id = u.answer_id WHERE (q.blocked = 0 AND u.user_id = :user_id) GROUP BY q.id ORDER BY q.id DESC

但是，如果我想限制结果，我将结束行修改为：

```
$query_questions_visibles->limit(10);
$result = $query_questions_visibles->execute($params); 
```

教义抛出一个错误：

> SQLSTATE[HY093]：无效的参数号：绑定变量的数量与标记的数量不匹配
> 
> 在 Doctrine_Connection->execute('SELECT DISTINCT q2.id FROM question q2 LEFT JOIN answer a2 ON q2.id = a2.question_id LEFT JOIN user_answer u2 ON a2.id = u2.answer_id WHERE q2.blocked = 0 AND u2.user_id = :user_id GROUP BY q2.id ORDER BY q2.id DESC LIMIT 10', array('user_id' => '1', 'active_time' => '2013-03-17 17:12:12')) 在 SF_ROOT_DIR\ lib\vendor\symfony\lib\plugins\sfDoctrinePlugin\lib\vendor\doctrine\Doctrine\Query.php 第 1290 行 ...

我的目的只是将查询限制为 10 个结果，¿我的带有 COALESCE 和 MAX 函数的子查询在哪里？¿ 为什么有一个我从未指定的 SELECT DISTINCT？¿ 为什么只选择 q.id？

我花了一整天的时间试图弄清楚，我没有答案......任何想法为什么设置限制会导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:41:30.333

当您添加`limit()`到 Doctrine 查询时，Doctrine 内部实际上会创建两个查询。第一个根据您的查询条件选择一组有限的不同 id。第二个查询选择将选择限制为第一个查询找到的 id 的实际对象。

您的查询的问题是您在`select`零件内部使用了参数，而第一个查询中未使用该参数。

我想到的唯一解决方案是将`active_time`参数的值直接添加到选择部分，而不使用命名参数。这可能不是最好的解决方案，但我现在想不出一个不同的解决方案。`addSelect()`不接受像`where()`dos 这样可以解决问题的附加参数（您`where()`可以使用：）`->where('field > ?', $value)`。

# c# - IEnumerable 对象中的不同项目

> ID：16048424
> 
> 赞同：0
> 
> 时间：2013-04-16T22:39:38.050
> 
> 标签：c#

我正在使用 C# 并且有一个`IEnumerable`对象。注意（`IEnumerable`而不是`IEnumerable<T>`）

如何在该对象中找到不同的项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T22:40:19.393

使用[`Cast`](http://msdn.microsoft.com/en-us/library/bb341406.aspx)，然后[`Distinct`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)

```
var distinctItems = items.Cast<object>().Distinct(); 
```

# c# - 线程和函数参数

> ID：16048433
> 
> 赞同：2
> 
> 时间：2013-04-16T22:40:25.277
> 
> 标签：c#, multithreading

以下代码无需多线程即可正常工作。但是如果我使用线程，它会失败。如果我在checkedListBox中选择了多个项目，第一个将被忽略，其他是随机的......

我认为提交数据存在问题。你怎么看？

```
 private void sendCom(String com)
    {
        //send command to selected item
        int i=0;
        String IP;
        foreach (var item in checkedListBox1.CheckedItems)
        {
            Console.WriteLine(item.ToString());
            IP = item.ToString();
            theThreads[i] = new Thread(new ThreadStart(() => sendComThread(IP, com) ));
            theThreads[i].Start();
            //sendCom(IP, com);
            i++;
        }
    }

    private void sendComThread(String IP, String com)
    {
        // send an command
        System.Console.WriteLine(IP + com);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T23:26:08.790

基本问题是您的变量捕获正在捕获单个变量，然后在所有线程之间共享该变量。因此，每次线程读取共享变量时，它都会获取最近恰好放入其中的任何值。除了语义错误之外，共享变量还存在明显的数据竞争。

最简单的解决方案是为每个线程创建一个变量。只需在循环内移动变量的**声明。**像这样：

```
foreach (var item in checkedListBox1.CheckedItems)
{
    ....          
    String IP = item.ToString(); //NB variable declared inside loop    
    theThreads[i] = new Thread(new ThreadStart(() => sendComThread(IP, com) ));     
    ....
} 
```

现在每个线程都有自己的字符串变量私有实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T22:49:49.557

这里的问题是您的线程正在新线程中从 lambda 表达式读取循环的状态，而不是将实际值传递给线程。

这意味着当新线程被调度到 CPU 上时，循环实际上已经向前迭代到一个未知状态。这就是为什么您的值看起来是随机的。

这是一步一步发生的事情：

1.  创建了`() => sendComThread(IP, com)`lambda，它*引用*了两个参数。
2.  `theThreads[i].Start();`被调用，但这并**不能**保证该线程中的代码将立即运行。在系统上的线程调度程序将上下文切换到不同的线程之前，当前代码可能会继续运行一段时间。
3.  下一次循环迭代发生并被`IP = item.ToString();`执行，改变`IP`. 这可能发生不止一次。
4.  上下文切换发生在处理器上并执行另一个线程，或者另一个线程在另一个处理器（核心）上执行，`IP`从 lambda 表达式中读取对的引用。
5.  这会导致跨线程读取，这意味着状态`IP`未定义。

解决方案是在线程创建期间传递值，以便将它们本地复制到线程：

```
struct SendComThreadParams
{
    public string IP;
    public string Com;

    public SendComThreadParams(string ip, string com)
    {
        this.IP = ip;
        this.Com = com;
    }
}

private void sendCom(String com)
{
    //send command to selected item
    int i=0;
    String IP;
    foreach (var item in checkedListBox1.CheckedItems)
    {
        Console.WriteLine(item.ToString());
        IP = item.ToString();
        theThreads[i] = new Thread(new ParameterizedThreadStart(sendComThread));
        theThreads[i].Start(new SendComThreadParams(IP, com));
        i++;
    }
}

private void sendComThread(object threadParam)
{
    var p = (SendComThreadParams)threadParam;
    // send an command
    System.Console.WriteLine(p.IP + p.Com);
} 
```

这会正确地将参数复制到线程，从而保证它们的值处于定义的状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T22:57:22.317

`theThreads[i].Start()`不会立即运行新线程，同时 IP 变量可能会发生变化。

在 for 循环中定义 IP 变量将解决问题：

```
string IP = item.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T23:33:03.477

这里是另一个版本的多项式代码。这次是线程池

```
struct SendComThreadParams
{
public string IP;
public string Com;

public SendComThreadParams(string ip, string com)
{
    this.IP = ip;
    this.Com = com;
}
}

private void sendCom(String com)
{
//send command to selected item
int i=0;
String IP;
foreach (var item in checkedListBox1.CheckedItems)
{
    Console.WriteLine(item.ToString());
    IP = item.ToString();
    ThreadPool.QueueUserWorkItem(new WaitCallback(sendComThread), (object)new SendComThreadParams(IP, com));
    i++;
}
}

private void sendComThread(object threadParam)
{
var p = (SendComThreadParams)threadParam;
// send an command
System.Console.WriteLine(p.IP + p.Com);
} 
```

# php - 使用 nginx 和 php5-fpm 在 ubuntu 12.10 上包含 PHP 文件时遇到问题

> ID：16048437
> 
> 赞同：0
> 
> 时间：2013-04-16T22:40:51.943
> 
> 标签：php, ubuntu, nginx, ubuntu-12.10, phpass

寻求帮助解决在我的 /var/log/nginx/error.log 文件中发现的以下 PHP 包含错误？

```
2013/04/16 22:27:18 [error] 10021#0: *6 FastCGI sent in stderr: "PHP message: PHP Warning:  require(1): failed to open stream: No such file or directory in /usr/share/nginx/www/phpass.php on line 8
PHP message: PHP Fatal error:  require(): Failed opening required '1' (include_path='.:/usr/share/php:/usr/share/pear') in /usr/share/nginx/www/phpass.php on line 8" while reading response header from upstream, client: 127.0.0.1, server: 127.0.0.1, request: "GET /phpass.php HTTP/1.1", upstream: "fastcgi://unix:/var/run/php5-fpm.sock:", host: "xxxxxxxxx.xxx" 
```

我可以通过我的浏览器看到有问题的 php 文件（phpass.php，它只是一个示例 phpass 脚本），并且肯定会解析 php，但是当我包含 PasswordHash.php 时，我的 php 脚本会默默地失败，并且我一直看到上述错误在我的 nginx 错误日志中。

任何帮助将不胜感激。

仅供参考：/bin/echo $PATH 返回：

```
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games 
```

我从下面粘贴了包含 PasswordHash.php 的示例脚本：

```
<?php

echo "WTF";

echo $_SERVER['DOCUMENT_ROOT'];

//require("/usr/share/nginx/www/includes/phpass-0.3/PasswordHash.php") or die("shit");
//require("includes/phpass-0.3/PasswordHash.php") or die("shit");
require_once("PasswordHash.php") or die("shit");

echo "WTF";

$pwdHasher = new PasswordHash(8, FALSE);

echo "WTF";

$password = "password";

//$hash is what you would store in your database
$hash = $pwdHasher->HashPassword($password);

//$hash would be the $hashed stored in your database for this user
$checked = $pwdHasher->CheckPassword($password, $hash);
if ($checked) {
    echo 'password correct\n\n<br/>';
} else {
    echo 'wrong credentials\n\n<br/>';
}

echo "The \$password is 'password' and it's hash is '$hash'\n\n<br/>";

?> 
```

第一个“WTF”和“$_SERVER['DOCUMENT_ROOT']”发布得很好。之后，我的 phpass.php 页面上没有显示任何其他内容，当我进入我的 nginx 错误日志文件时，我看到了这篇文章顶部显示的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:26:02.887

这是我的问题的答案：[require_once () or die() not working](https://stackoverflow.com/questions/1163473/require-once-or-die-not-working)

显然，在我的 require_once 命令末尾添加“或死（'text'）”是我的失败。

# file - 从批处理文件启动文件等待特定时间然后关闭

> ID：16048438
> 
> 赞同：0
> 
> 时间：2013-04-16T22:40:57.680
> 
> 标签：file, process, batch-file

我正在尝试通过批处理文件启动程序等待一段时间然后关闭它。我写的代码是这样的

```
@echo off
xfoil.exe < airfoil.txt > xfoil.out
ping 127.0.0.1 -n 1 -w 10000
taskkill /IM xfoil.exe /F 
```

不幸的是它不起作用..！我正在使用 Windows 7

你能帮帮我吗..？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:37:13.577

您的 ping 线路有几个问题。首先，第一个 ping 结果总是即时的，所以你应该在 -n 开关上加 1。接下来，127.0.0.1 是一个有效地址，所以等待超时是没有用的。

试试这个。

```
ping -n 11 0.0.0.0 >NUL 
```

这应该给你 10 秒的暂停。

# python - 如何检查文件中的行数是否等于每行中的字符数？

> ID：16048440
> 
> 赞同：1
> 
> 时间：2013-04-16T21:46:57.980
> 
> 标签：python

读取指定文件并将其内容视为字符串列表（每行一个）。检查输入文件中的以下条件：

该文件必须存在并且可供读取。换句话说，对 open 的调用不应引发异常。

该文件必须包含 3 到 10 行文本。也就是说，3 是可接受的最小行数，10 是最大行数。

所有行必须包含完全相同数量的字符。

每行必须包含 3 到 10 个字符。也就是说，3 是可接受的最小字符数，而 10 是最大字符数。每行的字符数不必等于文件中的行数。

唯一可接受的字符是`'x'`、`'X'`、`'y'`、`'Y'`和`'_'`。

```
correct_string = False
while correct_string is False:

    string = input("Enter a string? ")
    if len(string) != len(string):
        print("Error: string must have the same number of characters.")
    else:
        incorrect_char = False
        for i in string:
            if i != "X" and i != "x" and i != 'Y' and i != 'y' and i != "_":
                incorrect_char = True
        if incorrect_char is False:
            correct_string = True
        else:
            print("Invalid Character. Contains characters other than 'X', 'x', 'Y' 'y',and '_'") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:01:28.700

此代码检查文件中的行数是否等于每行中的字符数。它不检查任何其他标准，因为它们不是问题的一部分。

```
with open('input.txt') as in_file:
  lines = [ line.rstrip('\n') for line in in_file]

if any( len(line) != len(lines) for line in lines):
  print "NOT SQUARE!"
else:
  print "SQUARE!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T01:10:29.133

这将满足您的要求并返回一个列表（如果有效）。如果没有，它将引发异常 - 您可以根据需要进行自定义。

```
def load_file(filename):

    valid_chars = set('xXyY_')
    min_len = 3
    max_len = 10
    data = []

    # load the file
    with open(filename) as f:
        num_rows = 0
        for line in f:
            line = line.rstrip()
            print line, len(line)
            num_rows += 1
            # load validation
            if num_rows > max_len:
                raise Exception('Max rows exceeded')
            if len(line) > max_len:
                raise Exception('Max columns exceeded')
            if not set(line) <= valid_chars:
                print set(line), valid_chars
                raise Exception('Invalid input')
            data.append(line)

    if num_rows < min_len:
        raise Exception('Not enough rows')

    # validate row length
    if any( len(line) <> num_rows for line in data):
        raise Exception('Invalid row length')

    return data 
```

致电：

```
>>> load_file('test.txt')
['xxx', 'xYx', 'xXx'] 
```

您可以根据需要进行调整。希望这可以帮助。

# ajax - 在 wordpress 博客文章中创建内联评论

> ID：16048442
> 
> 赞同：3
> 
> 时间：2013-04-16T22:41:07.397
> 
> 标签：ajax, wordpress, comments

我想知道是否有一种简单的方法可以让用户在 wordpress 的博客文章中发表评论？例如，在 Microsoft word 中，用户可以在文章中添加评论，我想知道是否可以对 wordpress 博客文章进行同样的操作？

有没有方便的插件？

创建一个的最佳方法是什么？使用 Ajax 窗口创建覆盖？我可以从中提取任何入门代码吗？

有没有人看到这做得很好？令人惊讶的是，它在网络上并没有更加突出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-03T15:31:09.613

我也搜索了一个插件。没有 WordPress 插件。所以我写了我自己的，基于[inlineDisqussions](http://tsi.github.io/inlineDisqussions/)。

它被称为“内联评论”，试试看：[http ://wordpress.org/plugins/inline-comments/](http://wordpress.org/plugins/inline-comments/)

# perl - 每个文件中的不同行数 - 比较 2 个目录中的所有文件

> ID：16048444
> 
> 赞同：1
> 
> 时间：2013-04-16T22:41:16.290
> 
> 标签：perl, unix, compare

我有 2 个目录 dir1 和 dir2 有数千个文件。我有一个 perl 脚本来比较这两者并在不同的文件中打印差异。我正在使用 diff my $diff = `diff -y --suppress-common-lines "$DirA/$file" "$DirB/$file"`; 比较两个目录中的所有文件（同名）。有了这个，我还想添加

文件名：# 不同的行

文件 1 – 1

文件 2 - 30

并在 summary.txt 文件中输出差异。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:51:11.610

尝试这个：

```
echo $file - `diff -y --suppress-common-lines $DirA/$file $DirB/$file | wc -l` >> summary.txt 
```

# mysql - SQL查询返回按日期时间排序的最新20条结果

> ID：16048445
> 
> 赞同：-1
> 
> 时间：2013-04-16T22:41:27.583
> 
> 标签：mysql, sql

我在`MySQL`数据库中有下表：

```
id      whenadded          test1 ..                      test10  avg    std
40  2013-04-16 04:42:27 449 450 450 450 450 450 450 450 451 451 450.1   0.513
44  2013-04-16 07:05:31 460 460 460 461 461 461 461 461 461 462 460.8   0.572
48  2013-04-16 09:05:05 460 461 461 461 461 461 461 462 462 462 461.2   0.572
52  2013-04-16 11:04:11 450 450 450 450 450 450 451 451 451 451 450.4   0.467
56  2013-04-16 13:02:59 449 449 449 450 450 450 450 450 450 450 449.7   0.437 
```

它由`id`、`whenadded`、`tests 1 to 10`和列`avg`组成`std`。我需要创建一个`SQL`查询，从最近到第 20 个最近的结果返回给我最新的`20`结果。但是我不确定如何编写这样的查询。有人可以帮我吗？`sorted``whenadded (DATETIME)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:45:11.037

```
SELECT * FROM table_name ORDER BY whenadded DESC LIMIT 20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:44:07.703

```
SELECT *
FROM tablename
ORDER BY whenadded DESC
LIMIT 20 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T22:48:47.760

您需要使用 LIMIT 和 OFFSET 来实现这一点。

```
SELECT * FROM <table name> LIMIT 20 OFFSET 0 ORDER BY whenadded DESC 
```

# java - 使用java jxl覆盖excel文件

> ID：16048446
> 
> 赞同：1
> 
> 时间：2013-04-16T22:41:30.383
> 
> 标签：java, excel, shortest-path, jxl

我制作了一个程序，使用 excel 文件中包含的一些数据计算最短路径。

程序读取此文件中的所有数据以创建节点。如果用户输入两个值，则该程序将搜索最短路径并返回它。

现在我希望用户能够向该文件添加/删除新数据。通过这样做，他们正在添加新的“链接”或删除现有的链接。并且用户将能够看到他们对最短路径结果所做的更改。

但是，我发现大多数关于写入 excel 文件的示例代码是创建一个新的 excel 文件，并复制原始文件中的任何内容。

我想知道是否有任何方法可以修改现有的 excel 文件而不创建该文件的副本。我实际上希望原始的 excel 文件能够自行更改。因为我已经创建了各种方法（最短路径方法）来处理那个确切的文件。

任何帮助或示例代码都会很棒。谢谢。

# sql - SQL 异常在嵌套查询中使用“USING”子句？

> ID：16048447
> 
> 赞同：0
> 
> 时间：2013-04-16T22:41:35.237
> 
> 标签：sql, foreign-keys, hsqldb

我有一个规范化的数据库，其中包含 3 个表，其 DDL 是：

```
CREATE CACHED TABLE Clients ( 
    cli_id       INTEGER       GENERATED ALWAYS AS IDENTITY (START WITH 100) PRIMARY KEY,
    defmrn_id    BIGINT,
    lastName     VARCHAR(48)   DEFAULT '' NOT NULL,
    midName      VARCHAR(24)   DEFAULT '' NOT NULL,
    firstName    VARCHAR(24)   DEFAULT '' NOT NULL,
    doB          INTEGER       DEFAULT 0 NOT NULL,
    gender       VARCHAR(1)    NOT NULL);

CREATE TABLE Client_MRNs (
    mrn_id       BIGINT        GENERATED ALWAYS AS IDENTITY (START WITH 100) PRIMARY KEY,
    cli_id       INTEGER       REFERENCES Clients ( cli_id ),
    inst_id      INTEGER       REFERENCES Institutions ( inst_id ),
    mrn          VARCHAR(32)   DEFAULT '' NOT NULL,

    CONSTRAINT climrn01 UNIQUE (mrn, inst_id));

CREATE TABLE Institutions ( 
    inst_id      INTEGER       GENERATED ALWAYS AS IDENTITY (START WITH 100) PRIMARY KEY,
    loc_id       INTEGER       REFERENCES Locales (loc_id ),
    itag         VARCHAR(6)    UNIQUE NOT NULL,
    iname        VARCHAR(80)   DEFAULT '' NOT NULL); 
```

第一个表包含一个外键列 defmrn_id，它是对存储在第二个表中的“默认标识符代码”的引用（它是所有标识符代码的列表）。第一个表中的一条记录可能有很多标识符，但只有一个默认标识符。所以是的，我创建了一个循环引用。

第三个表只是来自第二个表的标准化数据。

我想要一个查询，该查询将基于将提供的标识符代码与可能属于该 CLIENT 记录的 CLIENT_MRN 中的任何标识符代码匹配来查找 CLIENT 记录。

我的策略是首先识别在第二个表 (CLIENT_MRN) 中匹配的那些记录，然后使用该中间结果连接到 CLIENT 表中与其他用户提供的搜索条件匹配的记录。我还需要对第一个表中的标识符引用 defmrn_id 进行非规范化。这是我想出的...

```
SQL = SELECT c.*, r.mrn, i.inst_id, i.itag, i.iname 
FROM Clients AS c 
INNER JOIN 
  (   
      SELECT m.cli_id   
      FROM Client_MRNs AS m   
      WHERE m.mrn = ? 
  ) AS m2 ON m2.cli_id = c.cli_id 
INNER JOIN Client_MRNs AS r ON c.defmrn_id = r.mrn_id 
INNER JOIN Institutions AS i USING ( inst_id )  
WHERE (<other user supplied search criteria...>); 
```

以上工作，但我花了一些时间试图理解为什么以下不工作......

```
SQL = SELECT c.*, r.mrn, i.inst_id, i.itag, i.iname 
FROM Clients AS c 
INNER JOIN 
  (   
      SELECT m.cli_id   
      FROM Client_MRNs AS m   
      WHERE m.mrn = ? 
  ) AS m2  USING ( cli_id ) 
INNER JOIN Client_MRNs AS r ON c.defmrn_id = r.mrn_id 
INNER JOIN Institutions AS i USING ( inst_id )  
WHERE (<other user supplied search criteria...>); 
```

在我看来，第二个 SQL 应该可以工作，但每次都在 USING 子句上失败。我正在对由 HSQLDB 2.2.9 作为 RDBMS 管理的数据库执行这些查询。这是 HSQLDB 中的解析问题还是嵌套查询的 USING 子句的已知限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:17:07.463

您始终可以尝试使用 HSQLDB 2.3.0（一个候选版本）。

您报告不完整 SQL 的方式不允许正确检查。但是查询中有一个明显的错误。如果你有：

```
SELECT INST_ID FROM CLIENTS_MRS AS R INNER JOIN INSTITUTIONS AS I USING (INST_ID) 
```

INST_ID 只能在没有表限定符的情况下用于 SELECT 列列表。原因是它不再被视为任一表的列。如果使用 NATURAL JOIN，公共列也是如此。

此查询已被 2.3.0 版接受

```
SELECT c.*, r.mrn, inst_id, i.itag, i.iname 
FROM Clients AS c 
INNER JOIN 
  (   
      SELECT m.cli_id   
      FROM Client_MRNs AS m   
      WHERE m.mrn = 2 
  ) AS m2  USING ( cli_id ) 
INNER JOIN Client_MRNs AS r ON c.defmrn_id = r.mrn_id 
INNER JOIN Institutions AS i USING ( inst_id ) 
```

# windows-phone-7 - 如何将 ListPicker 绑定到 TimeSpan 的集合？

> ID：16048451
> 
> 赞同：0
> 
> 时间：2013-04-16T22:42:15.150
> 
> 标签：windows-phone-7, windows-phone, xaml-binding

我正在尝试将我的 ListPicker 绑定到 ObservableCollection 中的 TimeSpan.Days 属性，我还使用转换器来格式化字符串，但我无法使绑定工作。我没有收到任何错误，但 ListPicker 没有任何项目，并且我的转换器中的代码没有被执行（断点永远不会被命中）。

我发现如果我像这样绑定到集合：

```
ItemsSource="{Binding Converter={StaticResource intervalConverter}}" 
```

然后我的转换器中的代码确实被执行，但 Convert 函数的“值”参数是整个集合而不是集合的单个项目。

谁能解释为什么我的绑定不起作用？

这是我的 XAML：

```
<toolkit:ListPicker x:Name="intervalPicker"
    ExpansionMode="ExpansionAllowed"
    ItemsSource="{Binding Days, Converter={StaticResource intervalConverter}}"/> 
```

这是我背后的代码：

```
public partial class MainPage : PhoneApplicationPage
{
    ObservableCollection<TimeSpan> _intervals;

    // Constructor
    public MainPage()
    {
        InitializeComponent();
        PopulatePicker();
    }

    private void PopulatePicker()
    {
        //Insulin Interval Picker
        _intervals = new ObservableCollection<TimeSpan>();
        _intervals.Add(new TimeSpan(1, 0, 0, 0));
        _intervals.Add(new TimeSpan(2, 0, 0, 0));
        _intervals.Add(new TimeSpan(3, 0, 0, 0));

        intervalPicker.DataContext = _intervals;
    }
}

public class IntervalConverter: IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        int interval = (int)value;
        if(interval > 1)
            return string.Format("{0 days}", interval);
        else
            return string.Format("{0 day}", interval);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:29:22.080

您需要将转换器移动到 ListPicker 的 ItemTemplate。如果您将它与 ItemsSource 绑定一起使用，那么您就是在告诉框架您需要转换用于项目集合的值（这就是将整个集合传递给转换器的原因）。

编辑：转换器代码也需要更改。格式字符串应为“{0} 天”而不是“{0 天}”

这是一些应该接近您想要的xaml：

```
<toolkit:ListPicker x:Name="intervalPicker"
                    ExpansionMode="ExpansionAllowed"
                    ItemsSource="{Binding}">
    <toolkit:ListPicker.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=Days, Converter={StaticResource intervalConverter}"/>
        </DataTemplate>
    </toolkit:ListPicker.ItemTemplate>
    <toolkit:ListPicker.FullModeItemTemplate>
        <DataTemplate>
            <TextBlock Style={StaticResource PhoneTextTitle2Style}"
                       Text="{Binding Path=Days, Converter={StaticResource intervalConverter}"/>
        </DataTemplate>
    </toolkit:ListPicker.FullModeItemTemplate>
</toolkit:ListPicker> 
```

# scheme - 使用 call/cc 进行循环。让 vs 开始

> ID：16048456
> 
> 赞同：2
> 
> 时间：2013-04-16T22:42:39.060
> 
> 标签：scheme, racket, continuations, callcc

以下两个代码块都应该（在我看来）是无限循环

这有效

```
(define call/cc call-with-current-continuation)

(define l 0)
(define i 0)

((lambda ()
   (call/cc
    (lambda (k)
      (set! l k)))
   (write i)
   (newline)
   (set! i (+ i 1))
   (l "ignore"))) 
```

这不起作用：

```
(define call/cc call-with-current-continuation)

(define l 0)
(define i 0)

(begin
   (call/cc
    (lambda (k)
      (set! l k)))
   (write i)
   (newline)
   (set! i (+ i 1))
   (l "ignore")) 
```

唯一的区别是一个使用 lambda 和一个使用 begin 块。为什么第二个代码块不起作用？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T23:44:41.703

在第二种情况下，将`begin`其参数拼接到顶层。请注意，有[两种`begin`](http://pre.racket-lang.org/docs/html/reference/begin.html)：如果它在表达式位置，它只是一个接一个地对操作进行排序。第二种（这就是你所拥有的）会将它的所有参数拼接到周围的上下文中。

拼接`call/cc`表达式的延续实际上是空延续，因为每个顶级表达式都是单独评估的（即，在空延续中）。`let`您可以通过在周围放置 a 来检查这一点`begin`，这会强制它处于表达式位置。然后它会像你期望的那样无限循环。

# php - 这个功能有什么问题，它显示了特定用户最近发布的帖子？

> ID：16048458
> 
> 赞同：0
> 
> 时间：2013-04-16T22:42:47.183
> 
> 标签：php, mysql, sql, function, variables

我创建了一个函数，想知道它为什么不起作用。这是代码：

```
function new_post() {
    $session_user_id = $_SESSION['user_id'];
    $user_data = user_data($session_user_id, 'user_id', 'username', 'first_name', 'email', 'avatar', 'rank', 'petnumber');
    $username = $user_data['username'];
    $sqlpost = "SELECT id FROM forum_question WHERE name=$username ORDER BY datetime DESC LIMIT 1";
    $mysqlpost = mysql_query($sqlpost);
    return $mysqlpost;
} 
```

此外，我正在将我的整个网站更新为 PDO/mysqli，我只是想让它在常规 mysql 中正常工作，然后再继续更新它。

这就是我使用它的方式：

```
<a href="view_topic.php?id=<?php echo new_post(); ?>">View New Post</a> 
```

而且，`$session_user_id`and `$user_data`都在我的`init.php`文件中定义。

另外，我没有收到任何错误，但这就是我的 URL 中显示的内容`http://view_topic.php/?id=Resource%20id%20#14`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:44:30.363

大概

```
$sqlpost = "SELECT id FROM forum_question WHERE name='$username' ORDER BY datetime DESC LIMIT 1"; 
```

因为 SQL 要求字符串被引用

并且不要忘记从结果集中获取结果并从数组中提取列值：

```
$result = mysql_fetch_array($mysqlpost); 
return $result['id']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:50:13.607

Sqlpost 实际上应该是：
`$sqlpost = "SELECT id FROM forum_question WHERE name='".$username."' ORDER BY datetime DESC LIMIT 1";`

# javascript - 如何验证单元格中的更改并确定是否应合并该更改？

> ID：16048461
> 
> 赞同：1
> 
> 时间：2013-04-16T22:42:58.110
> 
> 标签：javascript, validation, error-handling, slickgrid

我有这样的事情：

```
 CELL #0      CELL #1
------------------------
|start_date | end_date |
|----------------------|
|1/1/2012   |1/1/2013  |  ROW#0
|----------------------| 
```

我想断言，如果用户单击 (Row0,Cell0) 并尝试更改开始日期，则开始日期必须小于结束日期，否则不会进行更改。这可能吗？

目前在创建列时，我添加了一个“验证器”属性并传入下面的函数

```
startDateValidator(value){ 
   /* value is new value, need to reference the end_date to make sure
      that value < end_date but not possible in this column validator */
} 
```

但正如评论指出的那样，我们得到了新值，但没有引用旧数据项。有没有办法解决这个问题？我可以更改来源，但如果可能的话希望避免。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:49:40.827

可以`onCellChange`在网格事件中执行此操作，我从以前的实现中删除了一些代码，所以如果它第一次不起作用，请不要对我太苛刻...假设您的两个日期的 ID是`start_date`和`end_date`，那么这里是一个工作概念：

```
grid.onCellChange.subscribe(function(e,args) {
    // do a proper validation of date
    if (args.item.start_date < args.item.end_date) {
        // post/save result to DB and re-render the grid
        $.post('yourAjaxFile.php?action=update', args.item, function(ServerResponseUpt) {   
            // success, update the datagrid view on screen
            grid.updateRow(args.row);
            grid.updateRowCount();
            grid.render();
        });
    }else {
        // invalid, undo the changes from grid, this will put back orginal value
        var command = commandUndoQueue.pop();
        if (command && Slick.GlobalEditorLock.cancelCurrentEdit()) {
            command.undo();
            grid.gotoCell(command.row, command.cell, false);
        }                     
    }                         
}); 
```

请注意，这里的日期验证显然是不正确的，尽管主要答案更侧重于如何实现其余的事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T17:41:43.887

使用`OnBeforeEdit`代替`onCellChange`

```
grid.onBeforeEditCell.subscribe(function (e, args) {
    //返回true会更新cell，返回false不会更新
}

```

# hadoop - 旧 Hadoop API 中的 Mapper.cleanup() 方法的等价物是什么？

> ID：16048463
> 
> 赞同：1
> 
> 时间：2013-04-16T22:43:09.690
> 
> 标签：hadoop, mapreduce

我正在尝试测量每个 Map 任务从开始到结束所花费的时间。我这样做的方法是在 setup() 函数中启动一个计时器，然后在 cleanup() 函数中输出计时器。现在的问题是我正在尝试做同样的事情，但对于旧的 Hadoop API，但似乎没有什么相当于 cleanup()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:55:00.137

您可能会发现[OutputCommiter.commitJob](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/mapred/OutputCommitter.html)很有用。但是为什么要使用较旧的 API。新的干净多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:47:37.130

在旧 API 中，您需要覆盖该`java.io.Closeable.close()`方法。附带说明一下，您可以从作业跟踪器获取地图任务执行时间。

# php - php准备好的语句第一步错误

> ID：16048467
> 
> 赞同：-1
> 
> 时间：2013-04-16T22:43:33.827
> 
> 标签：php, pdo, prepared-statement

我刚开始学习 php 准备好的语句，就像一小时前一样。我需要一些帮助来将此功能转换为 PDO。一直在尝试，但遇到了很多错误。

```
 function titleQuery($ligaBD){
                $query1="SELECT title FROM page WHERE id='".$_GET['id']."'";
                $result1=mysqli_query($ligaBD,$query1);
                $registos1 = mysqli_fetch_array($result1);

                return $registos1; 
} 
```

以及如何保留我的 connection.php 文件？应该一直这样吗？

```
$db_host = "localhost"; 
$db_username = "root";  
$db_password = "";
$db_name = "mpm"; 

$ligaBD = mysqli_connect("$db_host","$db_username","$db_password","$db_name") or die ("Error"); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:52:45.233

要将此函数转换为 PDO，您需要使用 PDO 的东西。

```
function titleQuery($db,$id)
{
    $sql = "SELECT title FROM page WHERE id=?";
    $stm = $db->prepare($sql);
    $stm->execute(array($id));
    return $stm->fetchColumn();
}

$title = titleQuery($ligaBD,$_GET['id']); 
```

连接.php

```
$dsn = "mysql:host=$db_host;dbname=$db_name;charset=utf8";
$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
);
$ligaBD = new PDO($dsn, $db_username, $db_password, $opt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:20:12.007

如何将查询结果放入 PDO 上的变量中？

在此行上出现错误“无法使用 PDOStatement 类型的对象作为数组”：

```
if($stm['acess'] == 0){ echo'.....'; } 
```

函数上的注释代码是我试图从 mysqli 转换为 PDO 的代码

```
function checkPageAcess($ligaBD,$acess){ // Check if page is Private or Public
            /*$registos1=titleQuery($ligaBD,$_GET['id']);

            $query2= "SELECT acess FROM statistic WHERE id_page IN(SELECT id FROM page WHERE title='".$registos1['title']."')";
            $result2 = mysqli_query($ligaBD,$query2);
            $registos2 = mysqli_fetch_array($result2);

            if($registos2['acess']==0){
                echo '<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Easy Page Builder</title></head><body>This page is private.</body></html>';exit;
            }*/

            $sql = "SELECT acess FROM statistic WHERE id_page IN(SELECT id FROM page WHERE title=?)";
            $stm = $ligaBD->prepare($sql);
            $stm->execute(array($acess));
            $stm->fetchColumn();

            if($stm['acess'] == 0){
                echo '<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Easy Page Builder</title></head><body>This page is private.</body></html>';exit;
            }
    }
    $acess = checkPageAcess($ligaBD,$title); 
```

# c# - 在 AppHarbor 中创建文件夹时出错

> ID：16048473
> 
> 赞同：1
> 
> 时间：2013-04-16T22:44:03.567
> 
> 标签：c#, asp.net, appharbor

我正在尝试使用创建一个文件夹

`Directory.CreateDirectory(Server.MapPath(pathToCreate));`

我得到访问被拒绝错误。

本地主机没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T23:01:33.577

您是否在 AppHarbor 应用程序中启用了文件系统写入访问权限？

![在此处输入图像描述](https://i.stack.imgur.com/cLwny.png)

我认为您还需要在启用应用程序后重新部署它，但不是 100% 确定。

**更新：**根据发布者的回复，是的，您必须在启用此选项后重新部署。

# c - 使用 fgetc 进行单词搜索

> ID：16048476
> 
> 赞同：0
> 
> 时间：2013-04-16T22:44:08.830
> 
> 标签：c

我正在尝试使用 fgetc 进行单词搜索。我了解 fgetc 的作用，但我遇到了段错误。在运行 gdb 测试时，我返回以下内容。有没有更简单的方法来实现搜索功能？我是编程新手。感谢您的帮助。

```
#0  0x00007ffff7aa4c64 in getc () from /lib64/libc.so.6
#1  0x000000000040070c in main () 
```

我哪里错了？

```
#include <stdio.h>
#include <stdlib.h>
int isAlpha(char c)
{
    if( c >= 'A' && c <='Z' || c >= 'a' && c <='z' || c >= '0' && c <= '9' )
    {
        return 1;        
    }
    else
    {
        return 0;
    }
}

int CheckFunctionn(int length, int message_counter, char ref_word[], char newmessage[])
{
    int newCounter = 0;
    int counterSuccess = 0;

    while(newCounter < length)
    {
        if(ref_word[newCounter] == newmessage[newCounter + message_counter])
        {
            counterSuccess++;
        }
        newCounter++;
    }

    if(counterSuccess == length)
    {
        return 1;
    }
    else
    {
        return 0;
    }
}

int main(int argc, char *argv[])
{
    char message[300];
    int counter = 0;
    int ref_length = 0;
    int alphaCounter = 0;
    int alphaCounterTime = 0;
    int messageCounter = 0;
    int word_counter = 0;

    FILE* input;
    FILE* output;

    //long fileLength;
    //int bufferLength;
    //char readFile;
    //int forkValue;

    input = fopen(argv[2],"r");
    output = fopen(argv[3],"w");

    int c;
    c = fgetc(input);

    while(c != EOF)
    {
        while((argv[1])[ref_length] !='\0')
        {
            // if string is "HEY", (argv[1]) is HEY, ref_counter is the length
            // which in this case will be 3.
            ref_length++; //<-- takes care of the length.
        }

        while(alphaCounter < ref_length)
        {
            // this will add to alphaCounter everyetime alphaCT is success.
            alphaCounterTime += isAlpha((argv[1])[alphaCounter]);
            alphaCounter++;
        }

        if(alphaCounterTime != ref_length)
        {
            return 0;
        }

        if((messageCounter == 0 ) && (message[messageCounter + ref_length] == ' ' || message[messageCounter] == '\n' || message[messageCounter]== '\t')) // counts the whole things and brings me to space
        {
            // compare the message with the word
            word_counter += CheckFunctionn(ref_length, messageCounter, argv[1], message);
        }

        if((message[messageCounter] == ' ' || message[messageCounter] == '\n' || message[messageCounter]== '\t')  && (message[messageCounter +  ref_length + 1] == ' ' || message[messageCounter + ref_length + 1] == '\n' || message[messageCounter + ref_length + 1]== '\t'))
        {
            word_counter += CheckFunctionn(ref_length, messageCounter + 1, argv[1], message);
        }

        if((message[messageCounter]== ' '|| message[messageCounter] == '\n' || message[messageCounter]== '\t') && (messageCounter + ref_length+1)== counter) //<-- this means the length of the message is same
        {
            word_counter += CheckFunctionn(ref_length, messageCounter + 1, argv[1], message);
        }

        messageCounter++;        
    }
    fclose(input);
    fclose(output);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:50:47.473

您几乎可以肯定无法打开输入文件。如果`fopen`失败，则返回`NULL`，并且调用`fgetc(NULL)`具有未定义的行为，分段错误是未定义行为的一种可能结果。

您需要检查错误并相应地处理。您还需要检查您的程序是否有足够的参数。这是处理它们的一种方法：

```
if (argc < 3)
{
    fprintf(stderr, "Usage: %s input-file output-file\n", argv[0]);
    exit(1);
}

input = fopen(argv[1],"r");
if (input == NULL)
{
    fprintf(stderr, "Error opening input file %s: %s\n", argv[1], strerror(errno));
    exit(1);
}

output = fopen(argv[2],"w");
if (output == NULL)
{
    fprintf(stderr, "Error opening output file %s: %s\n", argv[2], strerror(errno));
    exit(1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:47:33.587

您只需将一个字符读入`c`, 然后循环`while(c != EOF)`，这几乎总是一个无限循环。在那个循环中，你增加`messageCounter`你用来走过数组末端的那个——繁荣！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T22:51:19.293

根据您的评论，`argc`是 2，但您指的是 args`argv[2]`的*第三个*元素，并且是`NULL`. 最终也会`FILE *`成为`NULL`（因为传递`NULL`给是无效的`fopen`）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-17T04:47:42.147

如果您`strcmp`在此使用函数将非常容易...

你需要做的是首先找到你的文件的长度，`ftell`然后分配那么多内存，然后使用`fgetc`或`fgets`或任何其他文件函数填充该内存......然后只使用`strcmp`函数......宾果游戏！！！！ ！:)

# html - 如何在 html、css 中使用无边距图像侧图像

> ID：16048480
> 
> 赞同：0
> 
> 时间：2013-04-16T22:44:43.113
> 
> 标签：html, image, margin

我想展示这四张图片，没有任何边距。这个怎么做？

每个 A、B、C、D 看起来像一个图像。

A
B
C
D

```
<div align="center">
    <img src="a.png">
    <br/>
    <img src="b.png">
    <br/>
    <img src="c.png">
    <br/>
    <img src="d.png">
</div> 
```

我尝试了 css margin=0 和 style padding =0 但它不起作用。

更新 - -

```
<img id="ImgEmotion" src="a.png" width="40" border="0">
<img src="b.png" width="20" height="20" border="0"> 
```

如果我使用 css，我知道没有余量。

如果我使用`#no_margin`，我该如何申请 img 标签？我还需要`'id='ImgEmotion'`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:47:56.250

**CSS：**

```
img 
{
    margin:0; 
    display:block
} 
```

**HTML：**

```
<div align="center">
    <img src="a.png">
    <img src="b.png">
    <img src="c.png">
    <img src="d.png">
</div> 
```

[JSFIDDLE](http://jsfiddle.net/SVdrq/)

# html - 如何对齐 div 块以在网格中对齐？

> ID：16048483
> 
> 赞同：0
> 
> 时间：2013-04-16T22:45:05.393
> 
> 标签：html, css

我需要`DIV`有一些数据的块。由于内容不同，块具有可变高度。我需要将 div 块对齐两个。由于块的高度不同，剩余的“可用空间”。如何对齐这些块以便正确对齐？数据来自 JSON 请求，因此制作表格似乎：1\. 使用 JS 制作网格更棘手（连续 2 个元素） 2\. 过时（？）。你会推荐什么？

CSS：

```
.book-details{
              float:left;
              display:block;
              border-style:solid;
              border-width:1px;
              padding: 2px 2px 2px 2px;
              border-color:gray;
              width: 450px;
              display: table;
} 
```

图片： ![在此处输入图像描述](https://i.stack.imgur.com/G2qSN.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:51:06.417

IE7 及以下没有显示：表，对于 IE8，您必须使用 html5 doctype，即 9 可以工作。

最好避免它并漂浮。记住你的盒子模型。你的宽度实际上是 456px 那么父母的宽度是多少？

而且，如果您只是跨过 2 次，则应该在两次之后清除浮动。

您可以设置一个足够高以容纳最长 div 的高度。您要提取的内容似乎很容易估算。

# android - 奇怪的字符串发出 PayPal MPL

> ID：16048487
> 
> 赞同：1
> 
> 时间：2013-04-16T22:45:32.647
> 
> 标签：android, string, paypal

我正在使用 PayPal MPL，我看到了这个：

![在此处输入图像描述](https://i.stack.imgur.com/paBIG.png)

似乎字符串显示不正确。我已经为使用正确工作的演示的库更改了库，但在我的应用程序中仍然显示图像之类的东西。

怎么了？我该如何解决这个问题？

谢谢你的好处！

# c# - 文本 API 集成问题 - 找不到错误 405 页面

> ID：16048490
> 
> 赞同：0
> 
> 时间：2013-04-16T22:45:42.400
> 
> 标签：c#, .net, sms, sms-gateway

我正在使用通过我错误的创新文本 SMS API 网关。

文档可在链接[http://www.innovativetxt.com/services/sms_api_gateway.htm](http://www.innovativetxt.com/services/sms_api_gateway.htm)获得，错误发生在我的本地机器上，但在生产服务器上工作正常。

远程服务器返回错误：(405) Method Not Allowed。

在这行代码：

HttpWebResponse objResponse = (HttpWebResponse)objRequest.GetResponse();

```
try
{
// InnovativeTXT POST URL
string url = "http://innovativetxt.com/cp/api";
// XML-formatted data
string toSender = "4477878585244";
string fromSender = "Test";
string textMessage = "Thanks for Choosing Innovative Text Messaging Solution.";

string fields = "?to=" + toSender + "&from=" + fromSender + "&text=" + textMessage +     "&api_key=xxx&api_secret=xxxxx";
url = url + fields;
// web request start
Uri uri = new Uri(url);
string data = "field-keywords=ASP.NET 2.0";
if (uri.Scheme == Uri.UriSchemeHttp)
{
// create a request on behalf of uri
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(uri);    
// setting parameter for the request
request.Method = WebRequestMethods.Http.Post;
request.ContentLength = data.Length;
request.ContentType = "application/x-www-form-urlencoded";
// a stream writer for the request
StreamWriter writer = new StreamWriter(request.GetRequestStream());
// write down the date
writer.Write(data);
//close the stream writer
writer.Close();

// getting response from the request
HttpWebResponse response = (HttpWebResponse)request.GetResponse();

// Get the stream associated with the response.
Stream receiveStream = response.GetResponseStream();

// Pipes the stream to a higher level stream reader with the required encoding format.
StreamReader readStream = new StreamReader(receiveStream, System.Text.Encoding.UTF8);

// to write a http response from the characters
Response.Write(readStream.ReadToEnd());
// close the response
response.Close();
// close the reader
readStream.Close();
}
}
catch (Exception exp)
{
// catch for unhelded exception
Response.Write(exp.Message);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:29:15.923

此问题与 IIS 处理程序映射有关。

您应该在字符串 URL 的末尾指定文件名：

```
string url = "http://innovativetxt.com/cp/api/somepage.aspx"; 
```

您可以使用默认页面，`default.aspx`或`index.php`等...

# android - Android 清单检测

> ID：16048492
> 
> 赞同：6
> 
> 时间：2013-04-16T22:45:50.727
> 
> 标签：android, android-manifest, android-testing

我有一个`android test project`设置来测试我的`android project`. 在`android test project`的清单中，我有一个`instrumentation`. 看起来像：

```
<instrumentation
    android:name="android.test.InstrumentationTestRunner"
    android:targetPackage="com.company.android" /> 
```

我很好奇这个条目的意义是什么，特别是它的目的`android:targetPackage="com.company.android"`是什么。我问，因为我重构了旧项目并将类放入不同的包中，所以我很好奇我需要将这个值更新为...是否应该指向扩展类所在的包`android.app.Application`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T22:48:16.750

它告诉构建系统在哪里访问您要测试的实际项目。

这是必要的，因为您需要访问所有活动和课程，而无需额外的副本。

有关它的信息分散在：http: [//developer.android.com/tools/testing/testing_android.html](http://developer.android.com/tools/testing/testing_android.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:49:55.630

[InstrumentationTestRunner](http://developer.android.com/reference/android/test/InstrumentationTestRunner.html)是你用来编写 Android 单元测试的东西。

从文档中：

```
Typical Usage

Write TestCases that perform unit, functional, or performance tests against the classes in your package. 
Typically these are subclassed from:

ActivityInstrumentationTestCase2
ActivityUnitTestCase
AndroidTestCase
ApplicationTestCase
InstrumentationTestCase
ProviderTestCase
ServiceTestCase
SingleLaunchActivityTestCase

In an appropriate AndroidManifest.xml, define the this instrumentation with the appropriate android:targetPackage set.
Run the instrumentation using "adb shell am instrument -w", with no optional arguments, to run all tests (except performance tests).
Run the instrumentation using "adb shell am instrument -w", with the argument '-e func true' to run all functional tests. These are tests that derive from InstrumentationTestCase.
Run the instrumentation using "adb shell am instrument -w", with the argument '-e unit true' to run all unit tests. These are tests that do notderive from InstrumentationTestCase (and are not performance tests).
Run the instrumentation using "adb shell am instrument -w", with the argument '-e class' set to run an individual TestCase. 
```

# php - php date formating help 日期格式不给出有效日期，即使它与文档匹配

> ID：16048495
> 
> 赞同：0
> 
> 时间：2013-04-16T22:45:57.760
> 
> 标签：php, mysql, date, strtotime, datetime-format

阅读并重新阅读了文档，并且真的无法解释为什么 $date1 会出现问题

有人可以帮忙吗？非常感谢

```
$date1 = "04-16-2013";
$date2 = "2013-04-16";
printf("date1 = %s\n", $date1);
printf("date2 = %s\n", $date2);

$newdate1 = date('m-d-Y',$date1);
$newdate2 = date('Y-m-d',$date2);
printf("newdate1 = %s\n", $newdate1);
printf("newdate2 = %s\n", $newdate2);

$previous_date = date('m-d-Y', strtotime($date1 .' -1 day'));
$previous_date2 = date('m-d-Y', strtotime($date2 .' -1 day'));
printf("previous_date = %s\n", $previous_date);
printf("previous_date2 = %s\n", $previous_date2); 
```

输出

```
 date1 = 04-16-2013
    date2 = 2013-04-16
    newdate1 = 12-31-1969
    newdate2 = 1969-12-31
    previous_date = 12-31-1969
    previous_date2 = 04-15-2013 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:14:35.873

[strtotime](http://www.php.net/manual/en/function.strtotime.php)函数

> m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。
> 
> 为避免潜在的歧义，最好尽可能使用 ISO 8601 (YYYY-MM-DD) 日期或[DateTime::createFromFormat()](http://www.php.net/manual/en/datetime.createfromformat.php)。

在您的情况下，因为您使用的是分隔符破折号 (-) php，请考虑日期格式为 dmy。

**或解决方法：**

```
$date1 = "04-16-2013";
$date2 = "2013-04-16";
printf("date1 = %s\n", $date1);
printf("date2 = %s\n", $date2);

$newdate1 = date('m-d-Y',strtotime(str_replace("-","/",$date1)));
$newdate2 = date('Y-m-d', strtotime($date2));
printf("newdate1 = %s\n", $newdate1);
printf("newdate2 = %s\n", $newdate2);

$previous_date = date('m-d-Y', strtotime(str_replace("-","/",$date1) .' -1 day'));
$previous_date2 = date('m-d-Y', strtotime($date2 .' -1 day'));
printf("previous_date = %s\n", $previous_date);
printf("previous_date2 = %s\n", $previous_date2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:05:19.840

在你的情况下试试这个：

```
$date1 = "04-16-2013";
$date = date_create_from_format('m-j-Y', $date1);
echo date_format($date, 'd-m-Y'); 
```

首先输入月-日-年....然后输出日-月-年

# servicestack - 同一个 AppHost 是否可以在 ServiceStack 中拥有更多的 Logger？

> ID：16048496
> 
> 赞同：2
> 
> 时间：2013-04-16T22:46:04.273
> 
> 标签：servicestack, nlog

我正在为包含某些服务的 ServiceStack 创建一个插件。但是，我希望这些服务记录到 AppHost 中的其他服务的另一个数据库（在我的情况下）。

是否可以在 AppHost 中注册 2 个 ILog 接口？

将`ServiceStack.Logging.LogManager.GetLogger(GetType())`始终返回一个 ILog 接口。我是否需要为另一个 Logger 创建第二个 ILog 实现？

我正在使用 NLog。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:04:06.773

我不熟悉 ServiceStack，所以我的建议可能没有意义（但在单独考虑 NLog 时确实有意义）。

您不能在 NLog.config 文件中配置另一个目标并配置您的记录器以写入该目标吗？

例如...

在 NLog.config 中配置一些目标（我正在配置一个控制台目标和一个文件目标）

```
 <targets>
    <target name="file" xsi:type="File" layout="${longdate} | ${level} | ${logger} | ${message}" fileName="${basedir}/${shortdate}.log" />
    <target name="console" xsi:type="ColoredConsole" layout="${longdate} | ${level} | ${logger} | ${message}" />
  </targets> 
```

配置一些规则

```
<rules>
  <logger name="Your.Name.Space1.*" minlevel="Trace" writeTo="file" /> 
  <logger name="Your.Name.Space2.*" minlevel="Trace" writeTo="file" /> 
  <logger name="*" minLevel="Trace" writeTo="console" /> 
</rules> 
```

现在，来自 Your.Name.Space1 和 Your.Name.Space2 的所有类都将登录到“文件”目标，而所有其他类都将登录到“控制台”目标。`"final=true"`如果您希望他们的日志仅出现在“文件”目标中，您可以添加到您的类的记录器中。

我认为你应该做你想做的事。

# jquery - 平滑 jQuery-UI 对 Google 地图 iframe 的显示|隐藏切换的盲目效果

> ID：16048502
> 
> 赞同：0
> 
> 时间：2013-04-16T22:46:26.613
> 
> 标签：jquery, jquery-ui, google-maps, iframe, jquery-effects

我正在寻找一种更好的方法来使用 jQuery 盲效果显示或隐藏 Google 地图 iframe。就目前而言，随着盲效应的发生，地图会多次跳跃、闪烁并重新调整大小。是否有任何建议可以规避此问题并消除该功能？

这是一个演示：http:
[//jsfiddle.net/hmMRs/](http://jsfiddle.net/hmMRs/)

HTML 标记：

```
<button class="button" value="Show map">Show map</button>
<div class="map" hidden>
    <iframe width="280" height="280" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=Google+Headquarters,+1600+Amphitheatre+Parkway,+Mountain+View,+CA&amp;aq=0&amp;oq=google&amp;sll=37.418436,-122.075443&amp;sspn=0.093391,0.133381&amp;t=m&amp;ie=UTF8&amp;hq=Google+Headquarters,+1600+Amphitheatre+Parkway,+Mountain+View,+CA&amp;ll=37.422151,-122.083983&amp;spn=0.009543,0.011973&amp;z=15&amp;iwloc=&amp;output=embed"></iframe>
    <br /><small><a href="https://maps.google.com/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=Google+Headquarters,+1600+Amphitheatre+Parkway,+Mountain+View,+CA&amp;aq=0&amp;oq=google&amp;sll=37.418436,-122.075443&amp;sspn=0.093391,0.133381&amp;t=m&amp;ie=UTF8&amp;hq=Google+Headquarters,+1600+Amphitheatre+Parkway,+Mountain+View,+CA&amp;ll=37.422151,-122.083983&amp;spn=0.009543,0.011973&amp;z=15&amp;iwloc=A" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
</div> 
```

脚本：

```
$(".button").click(function () {
$(".map").toggle("blind", 1000);
$(this).text($(this).text() == "Hide map" ? "Show map" : "Hide map");
}); 
```

我对 jQuery 比较陌生，因此欢迎任何其他关于如何改进我的方法的评论。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:10:50.070

我重构了上面的代码以使用该`slideToggle()`方法而不是，`toggle("blind", 1000)`这似乎已经修复了 iframe 内容的重新调整大小。有了这个，我确实必须重新创建地图位置中心点，以便在展开时它位于 iframe 的正确区域。唯一值得注意的错误是我的 Opera 11.62 浏览器，它在显示地图时没有将地图位置居中。

这是更新的演示：http:
[//jsfiddle.net/T7jLf/](http://jsfiddle.net/T7jLf/)

HTML：

```
<button class="button" value="Show map">Show map</button>

<div id="map">
  <iframe class="map" width="280" height="280" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=Google+Headquarters,+1600+Amphitheatre+Parkway,+Mountain+View,+CA&amp;aq=0&amp;oq=google&amp;sll=42.916709,-83.631706&amp;sspn=0.203156,0.303154&amp;ie=UTF8&amp;hq=Google+Headquarters,+1600+Amphitheatre+Parkway,+Mountain+View,+CA&amp;t=m&amp;ll=37.426752,-122.090421&amp;spn=0.009543,0.011973&amp;z=15&amp;iwloc=&amp;output=embed"></iframe>
<br /><small><a href="https://maps.google.com/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=Google+Headquarters,+1600+Amphitheatre+Parkway,+Mountain+View,+CA&amp;aq=0&amp;oq=google&amp;sll=42.916709,-83.631706&amp;sspn=0.203156,0.303154&amp;ie=UTF8&amp;hq=Google+Headquarters,+1600+Amphitheatre+Parkway,+Mountain+View,+CA&amp;t=m&amp;ll=37.426752,-122.090421&amp;spn=0.009543,0.011973&amp;z=15&amp;iwloc=A" style="color:#0000FF;text-align:left">View Larger Map</a></small>
</div>

<p>Some paragraph text can go here...</p> 
```

CSS：

```
#map {
  display: none;
}
.map {
  margin: .5em .25em;
} 
```

脚本：

```
$(".button").on("click", function () {
  $("#map").slideToggle("slow");
  $(this).text($(this).text() == "Hide map" ? "Show map" : "Hide map");
}); 
```

# python - 如何从Python中每个单词的右侧去除字符？

> ID：16048503
> 
> 赞同：8
> 
> 时间：2013-04-16T22:46:28.027
> 
> 标签：python, python-2.7, strip

说，如果我有这样的文字

```
text='a!a b! c!!!' 
```

我想要这样的结果：

```
text='a!a b c' 
```

所以，如果每个单词的结尾都是'！'，我想摆脱它。如果有多个 '!' 总之一句话，全部被淘汰。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T22:48:37.150

```
print " ".join(word.rstrip("!") for word in text.split()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T23:04:37.823

作为拆分/剥离方法的替代方案

```
" ".join(x.rstrip("!") for x in text.split()) 
```

它不会完全保留空格，您也许可以使用正则表达式，例如

```
re.sub(r"!+\B", "", text) 
```

这会消除所有不是紧跟单词开头的感叹词。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T23:02:20.820

```
import re
>>> testWord = 'a!a b! c!!!'
>>> re.sub(r'(!+)(?=\s|$)', '', testWord)
'a!a b c' 
```

这保留了您的字符串中可能没有的任何额外空格`str.split()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T02:09:59.047

这是一种非正则表达式，非基于拆分的方法：

```
from itertools import groupby

def word_rstrip(s, to_rstrip):
    words = (''.join(g) for k,g in groupby(s, str.isspace))
    new_words = (w.rstrip(to_strip) for w in words)
    return ''.join(new_words) 
```

这首先通过使用[itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)根据它们是否为空格将连续字符组合在一起来起作用：

```
>>> s = "a!a b! c!!"
>>> [''.join(g) for k,g in groupby(s, str.isspace)]
['a!a', ' ', 'b!', ' ', 'c!!'] 
```

实际上，这就像保留空白的`.split()`. 一旦我们有了这个，我们就可以`rstrip`像往常一样使用，然后重新组合：

```
>>> [''.join(g).rstrip("!") for k,g in groupby(s, str.isspace)]
['a!a', ' ', 'b', ' ', 'c']
>>> ''.join(''.join(g).rstrip("!") for k,g in groupby(s, str.isspace))
'a!a b c' 
```

我们也可以传递我们喜欢的任何东西：

```
>>> word_rstrip("a!! this_apostrophe_won't_vanish these_ones_will'''", "!'")
"a this_apostrophe_won't_vanish these_ones_will" 
```

# apache-flex - 弹性标签未显示

> ID：16048505
> 
> 赞同：1
> 
> 时间：2013-04-16T22:46:33.057
> 
> 标签：apache-flex, flash-builder

我打开了 flash builder，创建了一个新的 Flex 项目，然后将该标签插入到 mxml 文件中。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">

    <s:Label id="label" text="myLabel"/>

</s:Application> 
```

现在我运行它（使用 Internet Explorer 或 Google Chrome），我看到一个简单的白屏，上面什么都没有（[http://i101.photobucket.com/albums/m59/plinios/Untitled-4_zps1ef1127d.png](http://i101.photobucket.com/albums/m59/plinios/Untitled-4_zps1ef1127d.png)）。

只有我傻吗？我到处寻找，但找不到解决方案。这似乎是一个非常非常简单的问题。为什么标签不显示？

编辑：

我重新启动了我的电脑并重新安装了 Flash builder。然后我尝试了上面的简单代码，它仍然显示 Chrome 和 IE 的白屏。有趣的是，我为标签放置了一个面板，它显示在 IE 中，但不在 Chrome 中。

```
<s:Panel x="41" y="36" width="250" height="200">
    <s:Label id="label" x="10" y="-20" text="myLabel"/>
</s:Panel> 
```

编辑：

右键单击屏幕时，我得到一个 Flash 菜单，而不是 HTML 菜单。

无论如何，使用 Windows 8 操作系统会影响这一点吗？我没有看到任何其他原因导致它无法正常显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:03:10.757

我已经解决了这个问题。首先要意识到只有 IE 才能正确显示。开始编码时，您需要将所有内容包装在 Spark Group 中。而已！

# php - 在一个字符串上应用两个函数的语法

> ID：16048510
> 
> 赞同：-1
> 
> 时间：2013-04-16T22:47:03.247
> 
> 标签：php

为什么关闭？人们真的认为没有其他人需要学习如何将两个函数应用于一个字符串吗？顺便说一句，这就是问题所在。

* *** *此问题已解决工作代码：

```
link_up(htmlentities($row['note'])) 
```

感谢您的帮助，我猜只需要正确的语法。谢谢！

好的，所以我有一个表格，访客可以填写以留下便条。我创建了一个名为 link_up 的函数，它可以在不使用 html 标签的情况下将笔记中键入的网址转换为可点击的链接。问题是因为我将显示用户输入，所以我还想在显示时使用 htmlentities。这是我在没有 htmlentities 的情况下工作的代码。

这有效，但不安全......

```
<tr><td class='note'>" . link_up($row['note']) . "</td>" ; 
```

这也有效，但不使用我为它创建的 link_up 函数

```
echo "<tr><td class='note'>" . htmlentities($row['note']) . "</td>" ; 
```

所以我需要的是这样的（但这显然行不通）

```
echo "<tr><td class='note'>" . htmlentities . link_up($row['note']) . "</td>" ; 
```

所以我想我要问的是，如何同时使用我创建的 htmlentities 函数和 link_up 函数，以便当 $row['note'] 被回显时，它既安全又能按预期工作？或者问我如何在一个回显字符串上同时使用两个函数可能更有意义？

这是 link_up 函数

```
function link_up($text)  
{  
$text= preg_replace("/(^|[\n ])([\w]*?)((ht|f)tp(s)?:\/\/[\w]+[^ \,\"\n\r\t<]*)/is", "$1$2<a href=\"$3\" class=\"notelink\" target=\"blank\">$3</a>", $text);  
$text= preg_replace("/(^|[\n ])([\w]*?)((www|ftp)\.[^ \,\"\t\n\r<]*)/is", "$1$2<a href=\"http://$3\" class=\"notelink\" target=\"blank\" >$3</a>", $text);  
$text= preg_replace("/(^|[\n ])([a-z0-9&\-_\.]+?)@([\w\-]+\.([\w\-\.]+)+)/i", "$1<a href=\"mailto:$2@$3\">$2@$3</a>", $text);  
return($text);  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:59:21.240

你有一个很大的误解（只是说让你更容易订购东西）。

该`htmlentities()`功能是对文本进行编码，使其在 HTML 文档中保持不变。

但是，在您的情况下，您已经生成了要在文档*中用作链接的 HTML*的 HTML，因此链接位于超文本中：

```
link_up() 
```

您可能将两者混合在一起，以至于这两个功能不能很好地协同工作。但是，如果幸运的话，它们可以很好地协同工作，只需按其他顺序使用它们：

```
link_up(htmlentities($row['note'])); 
```

那是首先在内部创建 HTML，然后在链接周围添加更多的 HTML。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-16T22:56:27.577

尝试这个？我做了同样的事情，但我只是创建了我的链接，而不是使用函数调用。

```
 <tr><td class='note'><?php echo link_up(htmlentities($row['note']), ENT_QUOTES, 'UTF-8');?></td>" 
```

# python - 如何将比例膨胀运算应用于二值图像？

> ID：16048511
> 
> 赞同：1
> 
> 时间：2013-04-16T22:47:04.640
> 
> 标签：python, image-processing, mathematical-morphology

我必须对二进制图像进行膨胀我的问题是对不同大小的二进制图像进行膨胀操作。

*   [大图](https://docs.google.com/file/d/0ByS6Z5WRz-h2UHFVLVRWalZKXzA/edit?usp=sharing)
*   [放大的大图像](https://docs.google.com/file/d/0ByS6Z5WRz-h2MjRxbW5uMEJ0cUU/edit?usp=sharing)

*   [小图](https://docs.google.com/file/d/0ByS6Z5WRz-h2RDNUV0pncnlkM1E/edit?usp=sharing)

*   [放大的小图像](https://docs.google.com/file/d/0ByS6Z5WRz-h2aFd5ck9HYlBNeVU/edit?usp=sharing)

我想对所有图像应用比例膨胀操作，并防止像轮子这样的小图像变成白色圆圈。

```
#image dilation
import cv2

path "pathimage"
gray = cv2.imread(path,0)
element = cv2.getStructuringElement(cv2.MORPH_CROSS,(6,6)) 
graydilate = cv2.erode(gray, element) #imgbnbin
graydilate = cv2.erode(graydilate, element)
#graydilate = cv2.erode(graydilate, element)

cv2.imshow('erode',graydilate)
cv2.waitKey()

ret,thresh = cv2.threshold(graydilate,127,255,cv2.THRESH_BINARY_INV) 
imgbnbin = thresh
print("shape imgbnbin")
print(imgbnbin.shape)
cv2.imshow('binaria',imgbnbin)
cv2.waitKey() 
```

我可以重新缩放图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:14:38.973

您可以执行以下任一操作：

*   将图像重新缩放到相同大小。

或者

*   如果图像中的对象与图像的大小不成正比，则为该对象提取一个边界框，然后确定结构元素的大小（目前总是6x6）相对于该对象的边界框的大小。这样您就可以确定形态与对象大小成正比。

# javascript - 我可以使用 Javascript 获取 iOS 和 Android 的指南针方向吗？

> ID：16048514
> 
> 赞同：14
> 
> 时间：2013-04-16T22:47:32.813
> 
> 标签：javascript, android, ios, html

我可以在不使用 PhoneGap 之类的东西的情况下以跨平台方式使用 Javascript 在 iOS 和 Android（使用 Chrome）中获取指南针方向吗？我知道 iOS 有[DeviceOrientationEvent](https://developer.apple.com/library/safari/documentation/SafariDOMAdditions/Reference/DeviceOrientationEventClassRef/DeviceOrientationEvent/DeviceOrientationEvent.html)，但我在 Chrome for Android 上找不到任何等价物。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-10-09T10:16:31.307

作为入门，您应该查看[之前的相关 StackOverflow 答案](https://stackoverflow.com/a/21829819/320485)，并熟悉在 Web 应用程序[中使用 DeviceOrientation 事件的一般实际注意事项。](https://dev.opera.com/articles/w3c-device-orientation-usage/#practicalconsiderations)

[我在之前的相关 StackOverflow 答案](https://stackoverflow.com/a/21829819/320485)中提供的简单解决方案仅适用于实现`absolute`deviceorientation 事件的浏览器（即 deviceorientation`alpha`属性面向*compass*的浏览器）。这意味着那里提供的解决方案目前仅适用于 Android 浏览器，而不适用于基于 iOS 的浏览器或任何其他不提供`absolute`-based deviceorientation 事件数据的浏览器。

为了在今天的 Android 和 iOS 浏览器中可靠地获取当前指南针方向，您需要处理提供附加属性的两种实现`absolute`和非`absolute`实现，`webkitCompassHeading`并确保将任何当前屏幕方向更改作为其中的一部分。AFAIK 目前唯一这样做的库是[Full Tilt JS](https://github.com/richtr/Full-Tilt-JS)（免责声明：我是这个库的作者）。

以下代码将在 iOS 和 Android 浏览器中为您提供相同的正确指南针方向，同时考虑到设备方向实现的差异并应用任何必要的运行时屏幕方向转换：

```
<!-- Include the Full Tilt JS library from https://github.com/richtr/Full-Tilt-JS -->
<script src="fulltilt-min.js"></script>

<script>

  // Obtain a new *world-oriented* Full Tilt JS DeviceOrientation Promise
  var promise = FULLTILT.getDeviceOrientation({ 'type': 'world' });

  // Wait for Promise result
  promise.then(function(deviceOrientation) { // Device Orientation Events are supported

    // Register a callback to run every time a new 
    // deviceorientation event is fired by the browser.
    deviceOrientation.listen(function() {

      // Get the current *screen-adjusted* device orientation angles
      var currentOrientation = deviceOrientation.getScreenAdjustedEuler();

      // Calculate the current compass heading that the user is 'looking at' (in degrees)
      var compassHeading = 360 - currentOrientation.alpha;

      // Do something with `compassHeading` here...

    });

  }).catch(function(errorMessage) { // Device Orientation Events are not supported

    console.log(errorMessage);

    // Implement some fallback controls here...

  });

</script> 
```

这是一个[演示](https://richtr.github.io/Marine-Compass/)，演示了这种技术来获取用户所面对的罗盘方向。它应该适用于 iOS 和 Android 浏览器。

该演示中的代码实现如上所示，可以在 Github 上的[./scripts/compass.js:L268-L272](https://github.com/richtr/Marine-Compass/blob/15fd0a369faa9119f0f8133b2ceec74942be7bf1/scripts/compass.js#L268-L272)查看。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-12-09T22:51:53.850

是的你可以！不幸的是，`alpha`这不适用于 iPhone/iPad。使用 Mobile Safari，`alpha`基于首次请求设备方向时设备指向的方向。包含的 webkit 为您提供指南针方向。要使其适用于所有其他浏览器（都支持`alpha`as `compassheading`），您可以使用以下 Javascript 代码：

```
if (window.DeviceOrientationEvent) {
  // Listen for the deviceorientation event and handle the raw data
  window.addEventListener('deviceorientation', function(eventData) {
    var compassdir;

    if(event.webkitCompassHeading) {
      // Apple works only with this, alpha doesn't work
      compassdir = event.webkitCompassHeading;  
    }
    else compassdir = event.alpha;
  });
} 
```

Android 也支持 Webkit，所以也会使用 event.webkitCompassHeading，不过没关系。

顺便说一句：`oncompassneedscalibration`iPhone 和 iPad 也不支持“”。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2013-04-16T22:51:05.393

我相信您可以使用来自 navigator.geolocation 的位置对象的“标题”字段，请参见此处：

[https://developer.mozilla.org/en-US/docs/WebAPI/Using_geolocation](https://developer.mozilla.org/en-US/docs/WebAPI/Using_geolocation)

我不知道别的办法。

希望有帮助，A.

# core-animation - 使用 CoreAnimation 创建动画，类似于 Safari 下载动画

> ID：16048518
> 
> 赞同：0
> 
> 时间：2013-04-16T22:47:41.303
> 
> 标签：core-animation

有人知道如何创建类似于 Safari 下载动画的动画吗？谢谢

# hadoop - 猪独特的原子

> ID：16048519
> 
> 赞同：0
> 
> 时间：2013-04-16T22:47:46.970
> 
> 标签：hadoop, apache-pig, latin

假设我的数据看起来像这样，列名为 food、action 和 population：

```
pizzas   eatenBy  humans
pizzas   eatenBy  collegeKids
pizzas   eatenBy  everyOne
pizzas   grownBy  farmers
sprouts  grownBy  sproutFarmers
sprouts  grownBy  humans 
```

我如何编写一个 Pig Latin 脚本来仅生成一个独特的食物和动作，以及来自不同食物和动作组的任何有效人口？

即，我想从上述数据中得到的唯一输出是这个（尽管第一行和第三行的人口可能不同）：

```
pizzas   eatenBy  everyOne
pizzas   grownBy  farmers
sprouts  grownBy  sproutFarmers 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:44:25.020

不知道您将如何使用 DISTINCT 执行此操作（这比我将要建议的更有效），但您可以这样做：

```
food = load 'foodInput' AS (foodType,action,population);
foodGrouped = GROUP food by (foodType,action);
foodLimited = foreach foodGrouped {
    limited = LIMIT food 1;
    GENERATE FLATTEN(limited.(foodType,action,population));
}; 
```

# java - Java中JESS的输出

> ID：16048528
> 
> 赞同：3
> 
> 时间：2013-04-16T22:48:19.993
> 
> 标签：java, expert-system, jess

我想将“事实”发送到 java 中的 JESS 文件并取回结果。我基本上批处理 JESS 文件，然后通过 .add() 将我的数据（此处的结构）发送到引擎中。我试图将 JESS 结果（应该是一个字符串）转换为“值”。

```
Rete engine = new Rete();
engine.batch("file.clp");
Value = AAAnull;
try{
   engine.add(structure)
   AAA = engine.eval("(run)");
   } catch ...

System.out.println(AAA); 
```

结果总是一个数字，尽管结果应该是一个字符串。我已经在一个简单的 java 项目中解决了它，并且 AAA 正在返回字符串，但在这里它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:43:09.940

该[`(run)`](http://www.jessrules.com/jess/docs/71/functions.html#run)函数返回触发的规则数；这就是你在这里看到的数字。

运行程序的真正结果是它引起的副作用；在 Java 中获得结果取决于您期望的副作用。这可能意味着[收集打印到屏幕上的输出](http://www.jessrules.com/jess/docs/71/library.html#routers)，[在工作内存中查找新创建的事实](http://www.jessrules.com/jess/docs/71/queries.html)，或者[让您的 Jess 程序调用影响外部世界的 Java 方法](http://www.jessrules.com/jess/docs/71/java.html)。如果没有看到内容，`file.clp`我无法说出您的期望，但是列出的所有这些内容都包含在 Jess 手册中；上面的短语是相应部分的链接。我很乐意回答您可能提出的任何后续问题。

# python - 人脸识别 - Python

> ID：16048535
> 
> 赞同：4
> 
> 时间：2013-04-16T22:49:00.707
> 
> 标签：python, arrays, numpy, face-recognition, pca

我正在尝试使用 python 通过*主成分分析*(PCA) 进行人脸识别。

现在我能够得到训练图像`images`和输入图像之间的最小欧几里德距离`input_image`。这是我的代码：

```
import os
from PIL import Image
import numpy as np
import glob
import numpy.linalg as linalg

#Step1: put database images into a 2D array
filenames = glob.glob('C:\\Users\\me\\Downloads\\/*.pgm')
filenames.sort()
img = [Image.open(fn).convert('L').resize((90, 90)) for fn in filenames]
images = np.asarray([np.array(im).flatten() for im in img])

#Step 2: find the mean image and the mean-shifted input images
mean_image = images.mean(axis=0)
shifted_images = images - mean_image

#Step 3: Covariance
c = np.asmatrix(shifted_images) * np.asmatrix(shifted_images.T)

#Step 4: Sorted eigenvalues and eigenvectors
eigenvalues,eigenvectors = linalg.eig(c)
idx = np.argsort(-eigenvalues)
eigenvalues = eigenvalues[idx]
eigenvectors = eigenvectors[:, idx]

#Step 5: Only keep the top 'num_eigenfaces' eigenvectors
num_components = 20
eigenvalues = eigenvalues[0:num_components].copy()
eigenvectors = eigenvectors[:, 0:num_components].copy()

#Step 6: Finding weights
w = eigenvectors.T * np.asmatrix(shifted_images) 
# check eigenvectors.T/eigenvectors 

#Step 7: Input image
input_image = Image.open('C:\\Users\\me\\Test\\5.pgm').convert('L').resize((90, 90))
input_image = np.asarray(input_image).flatten()

#Step 8: get the normalized image, covariance, 
# eigenvalues and eigenvectors for input image
shifted_in = input_image - mean_image
c = np.cov(input_image)
cmat = c.reshape(1,1)
eigenvalues_in, eigenvectors_in = linalg.eig(cmat)

#Step 9: Find weights of input image
w_in = eigenvectors_in.T * np.asmatrix(shifted_in) 
# check eigenvectors/eigenvectors_in

#Step 10: Euclidean distance
d = np.sqrt(np.sum(np.asarray(w - w_in)**2, axis=1))
idx = np.argmin(d)
print idx 
```

我现在的问题是我想返回**具有最小欧几里德距离****的图像（或其在数组中的索引`images`**）而不是它在距离数组中的索引`d`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:21:18.760

我不相信您已经修改了与 in`w`相比存储图像的顺序`images`，因此，`idx`from`np.argmin(d)`应该是`images`列表的相同索引，所以

```
images[idx] 
```

应该是你想要的图像。

当然，

```
images[idx].shape 
```

会放弃`(1800,)`，因为它仍然是扁平的。如果你想把它弄平，你可以这样做：

```
images[idx].reshape(90,90) 
```

# css - 在 Foundation 3 项目中使用 Zurb Foundation 4

> ID：16048537
> 
> 赞同：0
> 
> 时间：2013-04-16T22:49:16.217
> 
> 标签：css, responsive-design, zurb-foundation

我有一个使用 Zurb Foundation 3 的现有项目，我已经工作了几个月。

我还需要为不同的客户启动一个新项目并希望使用版本 4。

我怎样才能最好地做到这一点，而不会弄乱旧项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T03:17:21.897

您应该能够毫无问题地拥有和使用两者。安装在 ruby​​ 中的每个版本的 gem 都与我所看到的一样，所以如果你升级到 Foundation 4，Foundation 3 gem 将保留。你可以搞砸以前的 Foundation 3 项目的唯一方法是如果你做一个强制升级。查看这篇文章[如何在指南针创建中指定框架版本？](https://stackoverflow.com/q/15175775/2236808)，它也有一些关于 Foundation 多个版本的有用信息。

# javascript - Node.js 的对象和数组的混淆

> ID：16048542
> 
> 赞同：0
> 
> 时间：2013-04-16T22:49:59.313
> 
> 标签：javascript, inheritance

我有以下代码：

```
 var dataArray = [];

    switch (request_url.query.group) {
        case 'returning': 
            dataArray = {};
            var returning = _.filter(result, function(result) {
                return (result.sessions.length > 1) ? true : false;
            });
            //Am I setting the object dataArray here?
            dataArray.returning = returning.length; 
            //Am I setting the array dataArray here?
            dataArray['new'] = result.length - returning.length; 
            break; 
```

我在这里对 dataArray 感到困惑。第一行代码声明了一个数组，并且在 switch case 中声明了一个同名对象。什么是“新”和“返回”值集，它们分别属于谁，数组还是对象？另外，对象是 Node.js 中数组的超类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:07:32.440

> 什么是“新”和“返回”值集，它们分别属于谁，数组还是对象？

他们将*属于*`Object`. 直到这一行才被`Array`引用：`dataArray`

```
dataArray = {}; 
```

在那之后，`dataArray`将只是一个引用，`Object`而这`Array`将变得无法访问并且可用于垃圾收集。

* * *

注意：如果您想`dataArray`成为*s的“* *`Array`，`Object`* ”，您可以将 分配`Object`给 的索引`dataArray`：

```
dataArray[0] = {}; 
```

并类似地设置属性：

```
dataArray[0].returning = ...;
dataArray[0]['new'] = ...; 
```

* * *

> 另外，对象是 Node.js 中数组的超类吗？

是的。`Array`s 继承自`Object`s 因为[`Array.prototype`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/prototype)是一个`Object`. [MDN 对原型链](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain)有很好的总结，也就是 JavaScript 的继承模型。

# c# - 用于 Sql Auth 的 Linq to SQL 连接字符串

> ID：16048545
> 
> 赞同：0
> 
> 时间：2013-04-16T22:50:19.633
> 
> 标签：c#, linq-to-sql, connection-string

我正在使用启用了 Windows 身份验证的 Sql Server。最近我添加了一个下拉列表以允许不同的连接。其中之一使用 SQL 身份验证。

我咨询了 msdn，似乎我需要做的就是在我的字符串中添加一个用户名和密码条目。

[http://msdn.microsoft.com/en-us/library/aa905872(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa905872(v=sql.80).aspx)

我的 Windows 身份验证字符串：

```
Data Source=PC\Slike;Initial Catalog=db_slike_articles;Integrated Security=True 
```

我为 SQL Authentication 添加的第二个字符串：

```
Data Source=Data Source=PC\Dev;Initial Catalog=db_dev_articles;Integrated Security=True;User ID=root;Password=rootpwd 
```

出于某种原因，当我选择第二个 SQL 连接时，它会抛出一个 SqlException，即使用我的 PC\Slike 用户名登录失败。连接字符串是第二个带有用户 ID 和密码的字符串，我不明白它为什么要尝试连接我的本地帐户。

第二个字符串位于远程计算机上，是否必须启用某些东西才能从 Windows Auth 切换到 Sql Auth，或者在字符串中指定凭据是否足够？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:53:10.093

使用**SQL Authentication**时，将其从连接字符串中删除：

```
Integrated Security=True; 
```

有一个网站列出了所有数据库引擎的连接字符串的所有可能/支持的语法，我现在找不到它，connectionstrings.com 无法正确加载。

# python - 如何从 Python 中的字符串中提取数字及其索引

> ID：16048548
> 
> 赞同：1
> 
> 时间：2013-04-16T22:50:31.993
> 
> 标签：python, regex, string

我正在尝试编写一个函数，该函数将接受一个字符串并返回一个字典，其中包含字符串中包含的所有数字以及它们开始的索引。

例如字符串`"1this is a 134 test15"`会产生字典`{ 0:1, 11:134, 19:15 }`

我已经看到了许多使用正则表达式的类似问题的解决方案，它们对于提取数字本身非常有效，但我无法找到将这些数字与它们出现的索引相关联的方法。

是否可以使用正则表达式从字符串中提取此类信息，或者是否有其他方法可以更适合此类应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T22:57:07.377

```
In [44]: strs="1this is a 134 test15"

In [45]: {m.start(0):int(m.group(0)) for m in re.finditer("\d+", strs)}
Out[45]: {0: 1, 11: 134, 19: 15} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T22:57:07.237

```
>>> import re
>>> text = "1this is a 134 test15"
>>> d = dict((m.start(), int(m.group())) for m in re.finditer(r'\d+', text))
>>> d
{0: 1, 19: 15, 11: 134} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T23:00:03.173

[`start()`](http://docs.python.org/2/library/re.html#re.MatchObject.start)正则表达式s的方法`MatchObject`将提供当前匹配的字符串偏移量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T21:11:18.463

如果您正在寻找一个功能，我希望这可能有用。肯定有更简单的方法来做到这一点。然而，这是我已经解决的问题。我已经尽力了 ：）

```
def function(string,dic={},p=0):

   if len(string)==0:
      return dic

   else:
      i=0
      if string[0] in '1234567890':
        while string[i] in '0123456789':
          i+=1
          p+=1
        dic[p-len(string[:1])]=int(string[:i])
        string=string[i:]
        return function(string,dic,p)
      else: 
        p+=1
        return function(string[1:],dic,p) 
```

# c# - Setting the response error in authentication handler

> ID：16048549
> 
> 赞同：1
> 
> 时间：2013-04-16T22:50:34.210
> 
> 标签：c#, c#-4.0, asp.net-web-api, httpresponse

I'm writing a Web API in using the MVC 4 Web API framework. I'm using `BASIC` authentication with a custom authentication message handler inheriting from `DelegatingHandler`.

Everything is working peachy, except my error handling.

I'm using the Web API as a wrapper over an existing authentication mechanism and an exception is thrown when the user's password is expired. Within the API action methods, I am able to handle this easily by throwing an HTTPResponseException and I get a tidy little json object such as below:

```
{
"Message": "Password is expired."
} 
```

If I try this same approach in my Auth Message Handler, I get all the nasty .NET response output.

```
<html>
<head>
    <title>Processing of the HTTP request resulted in an exception. Please see the HTTP response returned by the 'Response' property of this exception for details.</title>
    <style>
     body {font-family:"Verdana";font-weight:normal;font-size: .7em;color:black;} 
     p {font-family:"Verdana";font-weight:normal;color:black;margin-top: -5px}
... you get the idea ... 
```

I think I'm close... in `SendAsync`

```
catch (Exception ex)
{
    var response = request.CreateErrorResponse(HttpStatusCode.Unauthorized, ex.Message);
    response.Headers.Add("WWW-Authenticate", "Basic realm=\"myrealm\"");
} 
```

Here, perhaps if I can somehow get a `Task<HttpResponseMessage>` from my response object to return, I think I might be ok.

Basically my question is "How should exception handling really be done so that I am able to return a nice json/xml object to the user?"

One more thing to note, this is .NET 4, not 4.5\. I've seen a few examples using the `await` keyword, but that won't work in this scenario.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:58:24.063

You can wrap your response in a task:

```
catch (Exception)
{
    return Task<HttpResponseMessage>.Factory.StartNew(() =>
    {
        var response = request.CreateErrorResponse(HttpStatusCode.Unauthorized, ex.Message);
        response.Headers.Add("WWW-Authenticate", "Basic realm=\"myrealm\"");
        return response;
    });
}

return base.SendAsync(request, cancellationToken); 
```

# javascript - 向上滑动 HTML 表格行并重复

> ID：16048557
> 
> 赞同：1
> 
> 时间：2013-04-16T22:51:18.343
> 
> 标签：javascript, jquery, scroll, html-table

我在做一个项目时发现了一些很酷的代码。它影响 html 表的 jquery。它基本上使 tbody 向上滚动，因此顶部的行向下移动，其余行向上移动。这就是我的意思：

```
<tr><td>1a</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td></tr>
<tr><td>1b</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td></tr>
<tr><td>1c</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td></tr>
<tr><td>1d</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td></tr> 
```

变成：

```
<tr><td>1b</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td></tr>
<tr><td>1c</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td></tr>
<tr><td>1d</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td></tr>
<tr><td>1a</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td></tr> 
```

第 1a 行移至底部。这是我正在使用的 jquery 代码：

```
<script type="text/javascript">
$.fn.infiniteScrollUp=function(){
    var self=this,kids=self.children()
    kids.slice(20).hide()
    setInterval(function(){
        kids.filter(':hidden').eq(0).fadeIn()
        kids.eq(0).fadeOut(function(){
            $(this).appendTo(self)
            kids=self.children()
        })
    },5000)
    return this
}
$(function(){
    $('tbody').infiniteScrollUp()
})
</script> 
```

这工作正常。没问题。但是，当我试图让它向上滑动时，就像某种卷轴一样，它要么 1）停止将其添加到底部，2）停止将它们从顶部移除，要么 3）什么都没有。如何更改此效果以向上滑动？

这是[jsfiddle](http://jsfiddle.net/YXcTp/)示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:14:42.500

我不确定您在上面添加的插件，但这是另一种快速解决方法，如您所描述的那样工作，在我看来更简单一些。可能有更好的方法来解决它。

```
function moveRows(){
   firstTR = $('tbody tr').first();
    firstTR.animate({opacity:0},
      function(){$('tbody').append(firstTR);});
    firstTR.animate({opacity:1});
}

setInterval(function(){
    moveRows();
},1000); 
```

这是一个[小提琴的例子。](http://jsfiddle.net/YXcTp/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T01:28:00.730

向上/向下滑动 tr 元素很棘手。它们的行为不像块元素。

这是我能做到的最好的：

```
$.fn.infiniteScrollUp = function() {
    var self = this;
    var kids = self.children();
    kids.children('td, th').wrapInner('<div class="dummy"/>')
    setInterval(function() {
        var first = kids.eq(0),
            clone = first.clone().appendTo(self);
        first.find(".dummy").slideUp(1000, function() {
            kids = kids.not(first).add(clone);
            first.remove();
        });
    }, 2000);
    return this;
}; 
```

**[更新的小提琴](http://jsfiddle.net/Pr4dH/1/)**

# iis - IIS 网络负载平衡

> ID：16048559
> 
> 赞同：0
> 
> 时间：2013-04-16T22:51:26.743
> 
> 标签：iis, nlb

我有一个集群服务器，有 4 个节点，运行带有 IIS 7 的 Win server 2008 r2。当其中一个节点发生故障时，故障转移就会启动，但是有没有办法让它循环分配传入呼叫到不同的服务器？当传入的请求来自不同的客户端时会发生这种情况，但我们的调查表明，如果有一个客户端发出许多请求，它们都会发送到同一台服务器。我想让服务器轮询请求，以便节点 1 接收第一个请求，节点 2 接收第二个请求，依此类推。每个请求可能需要很长时间，并且当我有 3 个其他人空闲时，所有请求都转到同一个节点会导致我们出现性能问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:37:53.103

NLB 端口规则有几个属性可以控制请求的路由方式。相关属性似乎是：

*   过滤模式 - 指定集群中的单个主机还是多个主机处理给定端口的流量
*   Affinity - 控制流量如何路由到集群中的主机

您可能需要将 Affinity 值设置为`none`，这允许将请求路由到集群内的多个主机。文档没有说明是否使用循环或其他算法进行负载平衡。

有关过滤模式和关联性的更多信息：[网络负载平衡管理器属性](http://technet.microsoft.com/en-us/library/cc771709.aspx)

如何：[编辑网络负载平衡端口规则](http://technet.microsoft.com/en-us/library/cc753887.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:12:39.253

循环负载平衡不会分配来自一个目的地的流量。您需要将负载均衡器配置为“最少连接”

基本上，NLB 将新连接传递给具有最少活动连接数的池成员或节点。

# machine-learning - 梯度提升决策树 (GBDT) 或多重加性回归树 (MART)：计算梯度/伪响应

> ID：16048561
> 
> 赞同：1
> 
> 时间：2013-04-16T22:51:45.033
> 
> 标签：machine-learning

我正在从（[http://www-stat.stanford.edu/~jhf/ftp/trebst.pdf实施 MART](http://www-stat.stanford.edu/~jhf/ftp/trebst.pdf)）算法 5 实现 MART，我的算法“适用”于更少的数据（3000 个训练数据文件，22 个特征）和J=5,10,20（叶节点数）和 T = 10, 20。它给了我很好的结果（训练的 R-Precision 为 0.30 到 0.5）但是当我尝试在一些大型训练数据上运行时（70K记录）它给了我运行时下溢错误 - 我认为它应该是 - 只是不知道如何解决这个问题？

下溢错误出现在这里，计算成本梯度（或伪响应）： ![在此处输入图像描述](https://i.stack.imgur.com/USBV9.png)

这里 y_i 是 {1,-1} 标签，所以如果我尝试： 2/exp(5000) 它的分母溢出！

只是想知道我是否可以“标准化”这个或“阈值”这个，但是我使用这个伪响应来计算“标签”（那个 pdf 中的伽玛），然后是那些伽玛来计算模型分数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T16:17:18.543

@rrenaud 很接近，我所做的是：如果 exp_arg > 16 或 exp_arg < -16 使我的 exp_arg = 16（或 -16）并且它有效！（也适用于 1.2GB 数据和 700 个功能！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:52:35.787

您可以用 if 包装该表达式。

```
exp_arg = 2 * y_i * F_m_minus_1
if (exp_arg > 700) {
  // assume exp() overflow, result of exp() ~= inf, 2 / inf = 0
  y_tilda_i = 0
else // standard calculation 
```

我没有特别实现梯度提升，但我需要在一些神经网络计算中实现这个技巧。

# javascript - jsnetworkx 改变节点颜色，访问邻居

> ID：16048564
> 
> 赞同：1
> 
> 时间：2013-04-16T22:52:17.327
> 
> 标签：javascript, jsnetworkx

我用[jsNetworkx](http://felix-kling.de/JSNetworkX/)绘制了一个图表，它是 Networkx 的 JavaScript[版本](http://networkx.github.io/)。该端口还没有完全具备 Networkx 的所有功能。

我的工作：http: [//jsfiddle.net/mrcactu5/VGpRJ/4/](http://jsfiddle.net/mrcactu5/VGpRJ/4/)

我希望能够突出显示一个节点*及其邻居*`mouseover`并将它们的颜色更改为`#FEFEFE`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T23:15:27.403

我计划将来更容易将事件处理程序添加到可视化中，但现在，您必须使用 D3 自己实现这些事情。

基本思想如下：根据节点名称为每个 SVG 节点元素分配一个唯一的 ID。然后，在鼠标悬停（与 D3 绑定）上，获取节点的所有邻居并使用名称查找相应的 SVG 元素并更改它们的样式。

例子：

```
jsnx.draw(G3, {
    // ...
    node_attr: {
        r: 8,
        title: function(d) { return d.label;},
        id: function(d) {
            return 'node-' + d.node; // assign unique ID
        }
    }
    // ...
}, true);

// helper method to find and style SVG node elements
function highlight_nodes(nodes, on) {
    nodes.forEach(function(n) {
        d3.select('#node-' + n).style('fill', function(d) {
            return on ? '#EEE' : d.data.color;
        });
    });
}

// bind event handlers
d3.selectAll('.node').on('mouseover', function(d) {
    highlight_nodes(d.G.neighbors(d.node).concat(d.node), true);
});

d3.selectAll('.node').on('mouseout', function(d) {
    highlight_nodes(d.G.neighbors(d.node).concat(d.node), false);
}); 
```

[**演示**](http://jsfiddle.net/VGpRJ/7/)

# amazon-web-services - 在 AWS EC2 上前端应用程序服务器

> ID：16048569
> 
> 赞同：0
> 
> 时间：2013-04-16T22:53:00.003
> 
> 标签：amazon-web-services, amazon-ec2

我在 EC2 中设置了 2 个实例。一个是运行 nginx 并与弹性 IP 地址相关联，因此可以公开访问。

另一个没有 Web 服务器，但有一个在 8080 端口上运行的 RESTful 服务器。

两者都属于具有以下规则的安全组：

```
Ports   Protocol    Source  MongoDB-2-2-2-AutogenByAWSMP-
22  tcp 0.0.0.0/0   
80  tcp 0.0.0.0/0   
8080    tcp 0.0.0.0/0 
```

如果我理解正确，那么端口 8080 应该是开放的。

如果我通过 ssh 连接到我的网络盒（运行 nginx），我正在尝试在另一个实例：8080 上测试对我的 RESTful 服务器的访问，所以我尝试了：

```
curl http://10.151.87.76:8080/1/tlc/ping
curl http://ip-10-151-87-76:8080/1/tlc/ping
curl http://ip-10-151-87-76.ec2.internal:8080/1/tlc/ping 
```

所有这些都给了我“无法连接到主机”的错误。

如果我直接登录 RESTful 框并执行以下操作，它就可以工作。

```
curl localhost:8080/1/tlc/ping 
```

所以我知道我的服务是正常的。

任何我为什么看不到其他实例的端口 8080 的想法都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:00:08.703

确保实例位于同一可用区。如果没有，您可能需要通过公共 DNS 名称（例如 ec2-XXX-XX-XXX-XXX.YYY.amazonaws.com）访问实例。

确保 10.151.87.76 是正确的 IP。请注意，这可能会在实例停止并重新启动后发生变化。

确保你的无头服务是公开可用的——它可能只在 localhost:8080 上侦听，但应该在 0.0.0.0:8080 上侦听。从其他实例尝试`nmap 10.151.87.76 -p 8080`，它应该将 8080 列为开放端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:13:56.500

> 确保您的无头服务是公开可用的 << 所以这就是原因。您为 REST API 使用的 Web 服务器是什么？如果是 Apache，请确保配置显示 Listen 8080，而不是 Listen 1.2.3.4:8080。如果它是独立应用程序，请确保它可以侦听所有接口——默认情况下，某些客户端将侦听 localhost。– hudolejev 54 分钟前

这个！在我的代码中深埋（深）是连接到“localhost”的服务器的一部分。将其更改为关闭主机名，一切都很好！快乐的。

# r - 加载自定义包时出错？

> ID：16048570
> 
> 赞同：0
> 
> 时间：2013-04-16T22:53:05.040
> 
> 标签：r, statistics

操作系统：Ubuntu 12.04 R：2.15.3

我正在尝试加载某人发送给我的自定义 R 包。我已经使用安装了所有依赖项

```
> intall.packages() 
```

我已经使用安装了新软件包

```
> $ sudo R CMD INSTALL -l /usr/lib/R/library/ CompModSA_1.5.tar.gz. 
```

当我尝试在 R 中加载包时，

```
> load(CompModSA) 
```

我得到错误：

```
> Error in load(CompModSA) : object 'CompModSA' not found. 
```

我检查了我的`.libPaths()`并且`/usr/lib/R/library`是第一个目录。我尝试搜索并找到有关 NAMESPACE 文件的一些信息，但无法弄清楚这个包的 NAMESPACE 是否有什么特别之处，它包含

```
> exportPattern("^[[:alpha:]]+") 
```

有人有什么建议吗？

# ios - IOS故事板：为给定位置加载多个子视图

> ID：16048576
> 
> 赞同：1
> 
> 时间：2013-04-16T22:53:28.163
> 
> 标签：ios, objective-c, cocoa-touch

我在情节提要中直接定义了 3 个不同的子视图，因此它们也有出口。所有这些子视图都意味着在不同时间占据屏幕上的相同坐标，在任何时候只有一个占据空间，因此看起来某些外观正在发生变化。我该怎么做呢？假设我还有一个枚举，它定义了我当前所处的状态，因此该位置显示了哪些子视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:00:21.287

两个基本选项：

1.  继续将三个子视图添加到您的场景中。如果你这样做了，有几个技巧可以让你在 IB 中的生活更轻松：

    *   对于每个视图，转到最右侧面板中的“身份检查器”选项卡（第三个），展开“文档”部分，并为三个视图中的每一个赋予唯一的“标签”（不要与`UILabel`控件混淆; 这只是 IB 将在内部用于引用您的视图的标签或描述）。这样，当您浏览“文档大纲”中列出的控件树（显示在中心面板左侧的所有场景的列表）时，您将能够找出哪个是哪个。当您使用这些重叠的视图时，对这个“文档大纲”的强大掌握将使您的生活更加轻松。

    *   当您在场景中拥有三个视图时，您可能会发现将要处理的视图拖到三个视图列表的末尾（但与它的对等点处于同一级别）是最简单的。文件大纲”。然后，您可以编辑该子视图。当您对三个子视图进行 IB 工作时，重复该过程。

    *   如果需要，您可以为您的三个子视图创建一个出口集合。当您想对所有子视图执行某些操作时，这会更容易。当只处理三个时，也许不是很有用，但如果你有更多的子视图，集合会很有用。

    *   您可以为三个视图中的每一个定义唯一的`UIView`子类，这有助于使您的`IBOutlet`参考列表更加结构化。此外，任何特定于视图的 UI 逻辑都可以隔离到各个`UIView`子视图中。

    *   *如果您使用这种技术，如果您计划在这三个子视图之间设置动画过渡，那么不*只是将这三个子视图放在相关场景的顶层视图上实际上是非常有用的。在场景中定义三个子视图的尺寸，然后将您的三个子视图放在这个新的临时子视图中是非常有用的。这样，当您为更改设置动画时，您可以将动画限制在屏幕的那个部分。这种新的、临时`UIView`的通常称为容器视图，但不应与您将在 IB 中看到的 iOS 6 容器视图混淆，后者与下面定义的下一个技术相关。

2.  虽然所有这些技巧都可以使单个场景中三组重叠视图的操作和管理变得更容易一些，但我实际上认为自定义容器视图控制器是最好的方法。一个场景用于父场景/视图控制器，一个单独的视图控制器和 IB 场景用于三个不同的子视图中的每一个。它需要一些额外的代码（不难，但在你第一次做的时候有点陌生），但是你的代码和 IB 场景很好地隔离了。在架构上，这是最优雅的方法，恕我直言。如果你想这样做，你应该参考：

    *   WWDC 2011 #102 关于[UIViewController Containment](https://developer.apple.com/videos/wwdc/2011/?id=102)（需要 Apple 开发人员 ID）

    *   *View Controller Programming Guide*的[包含](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW12)部分

    **   *UIViewController 参考*文档的包含[部分](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)*

# asp.net-mvc-4 - EditorFor 中的 EditorFor 和继承

> ID：16048578
> 
> 赞同：2
> 
> 时间：2013-04-16T22:54:01.847
> 
> 标签：asp.net-mvc-4

我有一个 View 呈现一个 AgreementSearch 对象的 EditorFor，它又具有一个 BaseEmployeeSearch 对象的 EditorFor，因为 AgreementSearch 继承自 BaseEmployeeSearch。问题是 BaseEmployeeSearch 对象的 EditorFor 返回，其中没有任何内容。

当单独使用时，BaseEmployeeSearch 对象 EditorTemplate 工作得很好，如果问题是由于名称错误或其他原因，我希望对象的 .ToString 编辑器默认出现。

有人可以对此有所了解吗？

协议搜索编辑模板：

```
@model TimecardRepository.Models.AgreementsModels.BusinessObject.AgreementSearch

@Html.EditorForModel("_BaseEmployeeSearch")

<h4>HEY THERE!</h4>

<span class="margin_left_2em">
@Html.LabelFor(x => x.AgreementStatus, "Filter by agreement Type: ")
@Html.DropDownListFor(x => x.AgreementStatus, new SelectList(new[] 
            { 
                new { desc = "All agreement types", value = "0" }, 
                new { desc = "Disagreements Only", value = "1" }, 
                new { desc = "Agreements Only", value = "2" }, 
                new { desc = "Awaiting Agreement", value = "3" }  
            }, "value", "desc", (Model != null) ? Model.AgreementStatus : 0))
</span>

<span class="margin_left_2em">
@Html.LabelFor(x => x.AgreementStatus, "Filter by last comment: ")
@Html.DropDownListFor(x => x.AgreementStatus, new SelectList(new[] 
            { 
                new { desc = "All comment types", value = "0" }, 
                new { desc = "No comments", value = "1" }, 
                new { desc = "Last comment from Payroll", value = "2" },
                new { desc = "Last comment from Field", value = "3" }  
            }, "value", "desc", (Model != null) ? Model.CommentStatus : 0))
</span> 
```

BaseEmployeeSearch 编辑模板

```
@model TimecardRepository.Models.Shared.BaseEmployeeSearch

<span>
@Html.LabelFor(model => Model.FirstName, "First: ")
@Html.TextBoxFor(model => Model.FirstName, new { style = "width: 7em;", maxlength = "12" })
</span>
<span class="margin_left_2em">
@Html.LabelFor(model => Model.LastName, "Last: ")
@Html.TextBoxFor(model => Model.LastName, new { style = "width: 7em;", maxlength = "12" })
</span>
<span class="margin_left_2em">
@Html.LabelFor(model => Model.MemberID, "SMID: ")
@Html.TextBoxFor(model => Model.MemberID, new { style = "width: 6em;", maxlength = "7" })
</span>
<span class="margin_left_2em">
@Html.LabelFor(model => Model.Entity, "Entity: ")
@Html.TextBoxFor(model => Model.Entity, new { style = "width: 5em;", maxlength = "6" })
</span>
<span class="margin_left_2em">
@Html.LabelFor(model => Model.PayPeriod.Offset, "Pay Period: ")
@Html.DropDownListFor(model => Model.PayPeriod.Offset, new SelectList(new[] { new { desc = "Current", value = "0" }, new { desc = "Next", value = "1" }, new { desc = "Previous", value = "-1" } }, "value", "desc"))

@Html.HiddenFor(model => Model.PayPeriod.StartDate)
@Html.HiddenFor(model => Model.PayPeriod.EndDate)
</span> 
```

# c# - 通过 WebClient / BeginInvoke 方法创建多线程 webdownload

> ID：16048579
> 
> 赞同：0
> 
> 时间：2013-04-16T22:54:06.573
> 
> 标签：c#, wpf, multithreading, asynchronous

我实际上有以下代码：

```
private Stopwatch _sw;

public void DownloadFile(string url, string fileName)
{
    string path = @"C:\DL\";

    Thread bgThread = new Thread(() =>
    {

        _sw = new Stopwatch();
        _sw.Start();
        labelDownloadAudioStatusText.Visibility = Visibility.Visible;
        using (WebClient webClient = new WebClient())
        {
            webClient.DownloadFileCompleted +=
                new AsyncCompletedEventHandler(DownloadCompleted);
            webClient.DownloadProgressChanged +=
                new DownloadProgressChangedEventHandler(DownloadStatusChanged);
            webClient.DownloadFileAsync(new Uri(url), path + fileName);
        }
    });

    bgThread.Start();
}

void DownloadStatusChanged(object sender, DownloadProgressChangedEventArgs e)
{
    this.BeginInvoke((MethodInvoker) delegate
    {
        int percent = 0;
        if (e.ProgressPercentage != percent)
        {
            percent = e.ProgressPercentage;
            progressBarDownloadAudio.Value = percent;

            labelDownloadAudioProgress.Content = percent + "%";
            labelDownloadAudioDlRate.Content =
                (Convert.ToDouble(e.BytesReceived)/1024/
                _sw.Elapsed.TotalSeconds).ToString("0.00") + " kb/s";

            Thread.Sleep(50);
        }
    });
}

private void DownloadCompleted(object sender, AsyncCompletedEventArgs e)
{
    this.BeginInvoke((MethodInvoker) delegate
    {

        labelDownloadAudioDlRate.Content = "0 kb/s";
        labelDownloadAudioStatusText.Visibility = Visibility.Hidden;
    });
} 
```

我的问题是，在没有外线程的先前版本中，整个 GUI 偶尔冻结，下载完成后 GUI 是流动的。所以我搜索了一下，发现了这个：[https ://stackoverflow.com/a/9459441/2288470](https://stackoverflow.com/a/9459441/2288470)

答案是将所有内容打包到一个单独的线程中，该线程执行与 的交互，但我得到了错误，找不到`DownloadFileAsync`该方法。`BeginInvoke`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:33:51.870

使用 WPF 时，类`BeginInvoke`不公开该方法`Window`，就像`Form`在 WinForms 中一样。相反，您应该使用`Dispatcher.BeginInvoke`.

* * *

工作代码：

```
private Stopwatch _sw;

public void DownloadFile(string url, string fileName)
{
    string path = @"C:\DL\";

    Thread bgThread = new Thread(() =>
    {
        _sw = new Stopwatch();
        _sw.Start();
        labelDownloadAudioStatusText.Visibility = Visibility.Visible;
        using (WebClient webClient = new WebClient())
        {
            webClient.DownloadFileCompleted +=
                new AsyncCompletedEventHandler(DownloadCompleted);
            webClient.DownloadProgressChanged +=
                new DownloadProgressChangedEventHandler(DownloadStatusChanged);
            webClient.DownloadFileAsync(new Uri(url), path + fileName);
        }
    });

    bgThread.Start();
}

void DownloadStatusChanged(object sender, DownloadProgressChangedEventArgs e)
{
    Dispatcher.BeginInvoke((MethodInvoker) delegate
    {
        int percent = 0;

        if (e.ProgressPercentage != percent)
        {
            percent = e.ProgressPercentage;
            progressBarDownloadAudio.Value = percent;

            labelDownloadAudioProgress.Content = percent + "%";
            labelDownloadAudioDlRate.Content =
                (Convert.ToDouble(e.BytesReceived)/1024/
                _sw.Elapsed.TotalSeconds).ToString("0.00") + " kb/s";

            Thread.Sleep(50);
        }
    });
}

private void DownloadCompleted(object sender, AsyncCompletedEventArgs e)
{
    Dispatcher.BeginInvoke((MethodInvoker) delegate
    {
        labelDownloadAudioDlRate.Content = "0 kb/s";
        labelDownloadAudioStatusText.Visibility = Visibility.Hidden;
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:59:50.520

Invoke 方法和 BeginInvoke 方法在 System.Windows.Forms.Control 类上实现。如果您不是在 Form Class 中编写代码，则不能使用此方法。要解决此问题，请从 System.Windows.Forms.Control 类继承您的作业类，然后您可以使用 BeginInvoke 方法。请注意，您必须在主线程上创建实例。

```
public class JobClass : System.Windows.Forms.Control {
.....
} 
```

# jquery - jQuery：砌体排水沟宽度问题

> ID：16048583
> 
> 赞同：1
> 
> 时间：2013-04-16T22:54:29.653
> 
> 标签：jquery, html, css, jquery-masonry

在砌体布局上使用 gutterwidth 时，我遇到了一个小问题，但非常烦人。我将内容附加到单击功能上的清除 div（在每一行之后），然后重新加载砌体以将其包含在网格中。一个小问题是，当一个 div 被点击时，它似乎会切断容器的右侧一秒钟左右，这看起来像是一个错误，它偶尔会使容器跳下来。
我注意到，当从`gutterwidth`jquery 中取出属性并将其替换为`margin-left`和`margin-right`样式时，这解决了问题，但我最好需要使用 gutterwidths，因为我将添加多个尺寸的 div（包括 100% 宽度）所以我不想要任何差距。
这是一个 jsfiddle 演示（单击 div 时查看容器的右侧）：[http://jsfiddle.net/SzK5F/5/](http://jsfiddle.net/SzK5F/5/)
jQuery：

```
$(document).ready(function() {  
    var $container = $('#block-wrap');

    $(function(){
        $container.imagesLoaded(function(){
            $('#block-wrap').masonry({
            itemSelector : '.content-block-small, .content-block-big, .listing-item, .preview-listing:not(.excluded)',
            columnWidth: 3,
            gutterWidth: 15,
            isFitWidth: true,
            isAnimated: true
            });
        });
    });
});

$(document).ready(function () {

    $(".listing-item").click(function () {

        $('.listing-properties').hide();
        var previewForThis = $(this).nextAll('.preview-listing:first');
        var otherPreviews = $(this).siblings('.preview-listing').not(previewForThis);
        otherPreviews
            .addClass('excluded') // exclude other previews from masonry layout
            .hide();
        previewForThis
            .removeClass('excluded')
            .append($('#property' + $(this).attr('hook')).show())
            .hide()
            .delay(400)
            .fadeIn("slow");
        setTimeout(function(){ 
            $('html, body').animate({ scrollTop: previewForThis.offset().top-20 }, "slow");
        }, 500);
        $('#block-wrap').masonry('reload');
    });

}); 
```

我错过了一些非常明显的东西，或者在使用排水沟宽度时可能根本无法修复（希望它可以），但这有点烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:37:00.870

问题正在发生，因为当您单击 a 块以添加项目时，它会将 css 元素`overflow:hidden`应用于 id `#block-wrap`。如果您添加`overflow:visible!important`到 css 样式，它将克服这个问题。

我已经快速搜索了所有附加的 .js 文件和您的脚本，但我找不到`overflow:hidden`添加的位置......但我上面提到的 css 覆盖似乎不会导致任何额外的问题。

这是一个[固定的小提琴链接。](http://jsfiddle.net/SzK5F/6/)

```
#block-wrap {
   position: relative;
   width: 100%;
   padding-top: 30px;
   margin: 0 auto;
   overflow:visible!important;
} 
```

# php - 如何访问使用 document.forms["formName"].submit() 方法发送的表单值？

> ID：16048584
> 
> 赞同：-1
> 
> 时间：2013-04-16T22:54:30.663
> 
> 标签：php, javascript, html, post, submit

我在 php 文档中有一个表格。它有一个按钮，用于调用外部 javascript 文件中的函数，该函数计算值并将其返回到表中`document.formName.varName.value=jsVarName;` ，然后调用

```
document.forms["formName"].submit() 
```

然后应该使用的方法将新值发送到同一个 php 页面

```
(form name="formName" action="pageName.php" method="post") 
```

在这一点上，我希望能够使用

```
if(isset("submit")){ $phpVar=$_POST["tableVarName"]; 
```

然后访问新计算的值。不幸的是，当我尝试这个时， $_POST 变量中似乎没有任何内容。你知道我哪里错了吗？如果有帮助，我可以发布代码片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:56:14.017

你有没有用 $_REQUEST 或 $_GET 得到任何东西？也许您的表单没有作为帖子提交。只是猜测！

# ruby - 从 Sublime Text 2 获取“NameError：未定义的局部变量或方法”

> ID：16048593
> 
> 赞同：-1
> 
> 时间：2013-04-16T22:55:29.840
> 
> 标签：ruby

我正在尝试运行这个简单的程序：

```
puts " Hello, what's you're name?"
name  = gets.chomp
puts 'Hello,'+ '' + name+ '.'

if name =='Chris'
  puts 'What a lovely name!'
end 
```

但我不断收到此输出错误：

```
1.9.3-p392 :003 > ruby exerise72.rb
NameError: undefined local variable or method `exerise72' for main:Object
    from (irb):3
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.12/lib/rails/commands/console.rb:47:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.12/lib/rails/commands/console.rb:8:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.12/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我不明白出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:19:31.867

您正尝试在 Rails 控制台中为您的 shell 发出命令。键入`quit`然后按`Return`or`Enter`退出它并返回到正常的 shell 提示符。

然后你可以尝试：

```
ruby exerise72.rb 
```

了解您的 OS shell 和 IRB/Rails 的控制台以及您最终使用的任何其他 shell 或命令行界面之间的区别*非常*重要。它们非常强大，并且不知道您在做什么，也不知道您在哪里正在这样做，是随机弄乱磁盘、丢失文件和意外删除内容的好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:57:05.373

`ruby`在 ruby​​ 控制台之外执行命令。用于执行内联命令的 ruby​​ 控制台 (irb)。如果你想执行一个完整的脚本（你的`exerise72.rb`程序），你必须在 cmd、bash 或类似的环境中执行。

# java - 数据存储复制：帮助表征遗留系统拓扑

> ID：16048597
> 
> 赞同：1
> 
> 时间：2013-04-16T22:55:45.280
> 
> 标签：java, esb, distributed-computing, distributed-transactions

建立了一个新的系统，逐步承担旧系统的责任。两者在生产中合作。

为了促进这一点，它们共享一个复制的域对象模型。两者都使用相对原始的内存对象存储。遗留系统是规范存储，其中的每一项更改都通过 ESB 复制到新系统。新系统可能会修改一些对象，旧系统会轮询这些对象并更新其主数据。

这两个系统有时可能会调用另一个 API 端点来发出命令，但通常通过修改共享对象来隐式地传达此类命令。

没有事务或批量更新的概念。新系统使用全局写锁来处理其内存存储中的所有更新和刷新对象引用。数据集的大量删除或插入，或者顺序对象图的构建或删除可能会占用新系统的全局写锁。它脆弱、缓慢且难以开发和测试。

遗留系统是用 C++ 构建的，而新系统是用 Java 构建的。这也增加了一个对象转换层。

我的任务是提高稳定性和性能。我将其视为数据库复制问题，并希望利用已建立的文献和开源产品，但我正在努力对其进行描述。

什么标准拓扑在这里最适用？

# symfony - 如何使用群组

> ID：16048598
> 
> 赞同：0
> 
> 时间：2013-04-16T22:55:46.153
> 
> 标签：symfony, doctrine-orm, fosuserbundle, sonata-admin

我使用 FOSUserBundle 和“组”功能

起初在我的 User.php 中有这样的 getter 和 setter

```
/**
 * Add groups
 *
 * @param \Acme\UserBundle\Entity\Group $groups
 * @return User
 */

public function addGroup(\Acme\UserBundle\Entity\Group $groups)
{
    $this->groups[] = $groups;

    return $this;
}

/**
 * Remove groups
 *
 * @param \Acme\UserBundle\Entity\Group $groups
 */
public function removeGroup(\Acme\UserBundle\Entity\Group $groups)
{
    $this->groups->removeElement($groups);
}

/**
 * Get groups
 *
 * @return \Doctrine\Common\Collections\Collection
 */
public function getGroups()
{
    return $this->groups;
} 
```

但是，这个错误发生

```
FatalErrorException: Compile Error: Declaration of Acme\UserBundle\Entity\User::addGroup() must be compatible with that of FOS\UserBundle\Model\GroupableInterface::addGroup() 
```

在 FOS\UserBundle\Model\GroupableInterface

```
public function addGroup(GroupInterface $group); 
```

在我的 Acme\UserBundle\Entity\User

```
public function addGroup(\Acme\UserBundle\Entity\Group $groups)
{
    $this->groups[] = $groups;

    return $this;
} 
```

如何调整参数类型或更正此错误？

目前，我已经注释掉了这三个函数。

当时它看起来运作良好。

但是现在，我使用 Sonataadmin bundle 并在

@SonataAdminBundle/Admin/UserAdmin.php

```
protected function configureFormFields(FormMapper $formMapper){
    $formMapper
      ->with('General')
      ->add('groups','entity',array('property' => 'name',
              'multiple' => true,
              'class' => 'UserBundle:Group',
      ))
} 
```

它正确显示了此表单，但是当我按下提交按钮进行注册时，

表明

```
Error: Call to a member function contains() on a non-object in ~~~/FOS/UserBundle/Model/User.php line 572 
```

在 /FOS/UserBundle/Model/user.php 中有这样的功能

```
public function addGroup(GroupInterface $group)
{  
   var_dump($group);# I added to check
   if (!$this->getGroups()->contains($group)) {
        $this->getGroups()->add($group);
    }
    return $this;
} 
```

var_dump($group) 显示

```
object(Acme\UserBundle\Entity\Group)#923 (3) { ["id":protected]=> int(2) ["name":protected]=> string(12) "TeacherGroup" ["roles":protected]=> array(0) { } } 
```

我猜它有正确的组信息..

我该如何解决这个问题？

我的整个 user.php

// src/Acme/UserBundle/Entity/User.php

```
namespace Acme\UserBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use FOS\UserBundle\Model\GroupableInterface;

/**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 * @ORM\HasLifecycleCallbacks
 */
class User extends BaseUser
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 * 
 */
protected $id;
/**
 *
 * @ORM\OneToOne(targetEntity="Acme\UserBundle\Entity\Lesson", mappedBy="teacher")
 */
private $LessonAsTeacher;
/**
 *
 * @ORM\OneToMany(targetEntity="Acme\UserBundle\Entity\Lesson", mappedBy="student*removethis : name of the variable in Lesson.php*")
 */
private $LessonAsStudent; 

  /**
 *
 * @ORM\ManyToOne(targetEntity="Acme\UserBundle\Entity\Sex", inversedBy="sex*removethis : name of the variable in user.php*")
 * @ORM\JoinColumn(name="sex", referencedColumnName="id",nullable=false)
 */
private $sex;

 /**
 * @ORM\ManyToMany(targetEntity="Acme\UserBundle\Entity\Group")
 * @ORM\JoinTable(name="fos_user_user_group",
 *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="group_id", referencedColumnName="id")}
 * )
 */
protected $groups; 
    /**
 * @ORM\Column(type="string", length=255)
 *
 * @Assert\NotBlank(message="Please enter your first name.", groups={"Registration", "Profile"})
 * @Assert\MinLength(limit="0", message="The name is too short.", groups={"Registration", "Profile"})
 * @Assert\MaxLength(limit="255", message="The name is too long.", groups={"Registration", "Profile"})
 */
protected $firstname;

 /**
 * @ORM\Column(type="string", length=255)
 *
 * @Assert\NotBlank(message="Please enter your last name.", groups={"Registration", "Profile"})
 * @Assert\MinLength(limit="0", message="The name is too short.", groups={"Registration", "Profile"})
 * @Assert\MaxLength(limit="255", message="The name is too long.", groups={"Registration", "Profile"})
 */
protected $lastname;

 /**
 * @ORM\Column(type="date")
 */  
protected $birthday;

    /**
 * @var \DateTime
 *
 * @ORM\Column(name="createdAt", type="datetime")
 */
private $createdAt;

/**
 * @var \DateTime
 *
 * @ORM\Column(name="updatedAt", type="datetime")
 */
private $updatedAt;

public function __construct()
{
    parent::__construct();
    // your own logic
}
public function getFirstname()
{
    return $this->firstname;
}
public function setFirstname($name)
{
    $this->firstname = $name;
    return $this;
}
public function getLastname()
{
    return $this->lastname;
}
public function setLastname($name)
{
    $this->lastname = $name;
    return $this;
}
public function getSex()
{
    return $this->sex;
}
public function setSex($sex)
{
    $this->sex = $sex;
    return $this;
}

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set age
 *
 * @param integer $age
 * @return User
 */
public function setAge($age)
{
    $this->age = $age;

    return $this;
}

/**
 * Get age
 *
 * @return integer 
 */
public function getAge()
{
    return $this->age;
}

/**
 * Set birthday
 *
 * @param \DateTime $birthday
 * @return User
 */
public function setBirthday($birthday)
{
    $this->birthday = $birthday;

    return $this;
}

/**
 * Get birthday
 *
 * @return \DateTime 
 */
public function getBirthday()
{
    return $this->birthday;
}

/**
 * @ORM\PrePersist
 */

public function prePersist()
{
    $this->createdAt = new \DateTime;
    $this->updatedAt = new \DateTime;
}

/**
 * @ORM\PreUpdate
 */
public function preUpdate()
{
    $this->updatedAt = new \DateTime;
}

/**
 * Set createdAt
 *
 * @param \DateTime $createdAt
 * @return User
 */
public function setCreatedAt($createdAt)
{
    $this->createdAt = $createdAt;

    return $this;
}

/**
 * Get createdAt
 *
 * @return \DateTime 
 */
public function getCreatedAt()
{
    return $this->createdAt;
}

/**
 * Set updatedAt
 *
 * @param \DateTime $updatedAt
 * @return User
 */
public function setUpdatedAt($updatedAt)
{
    $this->updatedAt = $updatedAt;

    return $this;
}

/**
 * Get updatedAt
 *
 * @return \DateTime 
 */
public function getUpdatedAt()
{
    return $this->updatedAt;
}

/**
 * Get groups
 *
 * @return \Doctrine\Common\Collections\Collection 
 */
public function getGroups()
{
    return $this->groups;
}

/**
 * Add groups
 *
 * @param \Acme\UserBundle\Entity\Group $groups
 * @return User
 */
//  public function addGroup(\Acme\UserBundle\Entity\Group $groups)
//  {
//      $this->groups[] = $groups;

//     return $this;
// }

/**
 * Remove groups
 *
 * @param \Acme\UserBundle\Entity\Group $groups
 */
//  public function removeGroup(\Acme\UserBundle\Entity\Group $groups)
//  {
//      $this->groups->removeElement($groups);
//  }
} 
```

我的整个 Group.php

```
namespace Acme\UserBundle\Entity;

use FOS\UserBundle\Entity\Group as BaseGroup;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="fos_group")
 */
class Group extends BaseGroup
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
   protected $id;

 /**
 * Get id
 *
 * @return integer 
 */
  public function getId()
  {
    return $this->id;
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:42:43.340

问题是您`getGroups()`像这样覆盖：

```
/**
 * Get groups
 *
 * @return \Doctrine\Common\Collections\Collection 
 */
public function getGroups()
{
    return $this->groups;
} 
```

但是你从来没有初始化`$this->groups`，所以当你调用时`$this->getGroups()->contains()`，它说那`$this->getGroups()`是 a `non-object`，这是真的！

要解决这个问题，您有 2 个解决方案。

`groups`您可以在以下构造函数中进行初始化`User`：

```
public function __construct()
{
    parent::__construct();

    &this->groups = new ArrayCollection();
} 
```

或者，如果尚未初始化，您可以更改`getGroups()`函数以返回新对象：`groups`

```
public function getGroups()
{
    return $this->groups ?: $this->groups = new ArrayCollection();
} 
```

在这两种情况下，不要忘记`use Doctrine\Common\Collections\ArrayCollection;`在开头添加`User.php`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T16:10:12.903

我得到了同样的错误：

```
FatalErrorException: Compile Error: Declaration of Acme\UserBundle\Entity\User::addGroup() must be compatible with that of FOS\UserBundle\Model\GroupableInterface::addGroup() 
```

经过搜索，我发现（[FOS Git Issue 988](https://github.com/FriendsOfSymfony/FOSUserBundle/issues/988)）这个特殊错误是一个 Doctrine 'Bug' 或 sth。

Doctrine 根本不应该生成该方法，因为在基类中有 addGroup() 的实现。我通过修改签名来解决它

```
public function addGroup(\MyBundleNamespace\Entity\Group $groups)
public function removeGroup(\MyBundleNamespace\Entity\Group $groups) 
```

到

```
public function addGroup(\FOS\UserBundle\Model\GroupInterface $groups)
public function removeGroup(\FOS\UserBundle\Model\GroupInterface $groups) 
```

这样你就可以防止 Doctrine 使用错误的签名生成这两个函数。

版本信息：

```
Symfony       2.2.1
DoctrineORM   2.2.3
FOSUserBundle 1.3.1
PHP           5.4.4-14 
```

也许这可以帮助别人！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T03:14:12.067

我遇到了这个问题，简单的解决方案是将groups变量的声明从public更改为protected：

```
 /**
  * @var \Doctrine\Common\Collections\Collection
  */
 protected $groups; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-20T12:16:19.220

解决方案很简单：在您自己的 userBundle 中从您自己的实体中删除所有 setter 和 getter，并始终为特定捆绑运行教义：生成：实体，而不是全部。

# python - 简单python的快速帮助（学习列表）

> ID：16048604
> 
> 赞同：1
> 
> 时间：2013-04-16T22:56:12.543
> 
> 标签：python

我正在学习如何使用循环并且正在做这个程序来练习。但是，我唯一遇到的困难是为每个输入正确打印**一次列表。**这是我的代码：

```
country_list=[]
emission_list=[]
capita_list=[]
total=0
end_loop=False
together=[]

while True:
    country=raw_input("Enter country or (done to end): ")
    if country=="done":
        break
    else:
        emission=input("Enter emissions: ")
        capita=input("Enter capita: ")

        country_list.append(country)
        emission_list.append(emission)
        capita_list.append(capita)
        total+=1

for x in range(len(country_list)):
    for y in range(len(emission_list)):
        for z in range(len(capita_list)):
            end_loop=True
            print country_list[x]+": Emission="+str(emission_list[y]),"and Capita="+str(capita_list[z]) 
```

我输入这个：

```
Enter country or (done to end): Testcase
Enter emissions: 1
Enter capita: 2
Enter country or (done to end): Testcase2
Enter emissions: 3
Enter capita: 4
Enter country or (done to end): done 
```

这是我得到的输出：

```
Testcase: Emission=1 and Capita=2
Testcase: Emission=1 and Capita=4
Testcase: Emission=3 and Capita=2
Testcase: Emission=3 and Capita=4
Testcase2: Emission=1 and Capita=2
Testcase2: Emission=1 and Capita=4
Testcase2: Emission=3 and Capita=2
Testcase2: Emission=3 and Capita=4 
```

它正在打印排放和人均的所有可能组合，但我只希望它打印我输入的每个国家的排放/人均。有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T23:05:30.700

这可以作为一个学习练习，但是执行此任务的 Pythonic 方式是使用[`zip`](http://docs.python.org/2/library/functions.html#zip).

```
for cnty, em, cap in zip(country_list, emission_list, capita_list):
    print "{}: Emission={} and Capita={}".format(cnty, em, cap) 
```

实际上，您应该以这种方式存储结果（三元组列表），而不是稍后将三个列表压缩在一起。

```
cecs = []

while True:
    country  = raw_input("Enter country (or nothing to end): ").strip()
    if not country:
        break
    emission = input("Enter emissions: ").strip()
    capita   = input("Enter capita: ").strip()

    cecs.append((country, emission, capita))

# total = len(cecs)

for cec in cecs:
    print "{}: Emission={} and Capita={}".format(*cec) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T22:59:19.480

而不是这样做：

```
for x in range(len(country_list)):
    for y in range(len(emission_list)):
        for z in range(len(capita_list)):
            print country_list[x]+": Emission="+str(emission_list[y]),"and Capita="+str(capita_list[z]) 
```

做这个：

```
for x in range(len(country_list)):
    print country_list[x]+": Emission="+str(emission_list[x]),"and Capita="+str(capita_list[x]) 
```

注意：如果您创建一个具有一个国家名称、一个排放量和一个人均的类，您的代码结构将更有意义。那么这样的错误是不可能的，因为无论如何你只有一个对象列表可以迭代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T23:09:20.567

我宁愿用字典代替。它看起来像这样：

```
countries = {}
while True:
    inp = input("Enter country or (done to end): ")
    if inp == 'done':
        break;
    countries[inp] = {'emission': input("Enter emissions: ")}
    countries[inp]['capita']   = input("Enter capita: ")

for i in countries:
    print(i, 'Emission:', countries[i]['emission'],
          'and Capita', countries[i]['capita']) 
```

输入：

```
Enter country or (done to end): test
Enter emissions: 1
Enter capita: 2
Enter country or (done to end): test2
Enter emissions: 3
Enter capita: 4
Enter country or (done to end): done 
```

输出：

```
test Emission: 1 and Capita 2
test2 Emission: 3 and Capita 4 
```

最后字典看起来像这样：

```
{'test': {'emission': '1', 'capita': '2'}, 'test2': {'emission': '3', 'capita': '4'}} 
```

# algorithm - 确定无冲突集？

> ID：16048609
> 
> 赞同：8
> 
> 时间：2013-04-16T22:56:32.280
> 
> 标签：algorithm, design-patterns

假设您有一堆集合，而每个集合都有几个子集。

Set1 = {（香蕉、菠萝、橙子）、（苹果、羽衣甘蓝、黄瓜）、（洋葱、大蒜）}

Set2 = {（香蕉、黄瓜、大蒜）、（鳄梨、番茄）}

...

SetN = { ... }

现在的目标是从每个集合中选择一个子集，而每个子集必须与任何其他选定的子集无冲突。对于这个玩具大小的示例，一个可能的解决方案是选择（香蕉、菠萝、橙子）（来自 Set1）和（鳄梨、番茄）（来自 Set2）。

如果一个人选择 Set1 和 Set2 的第一个子集，则会发生冲突，因为香蕉将包含在两个子集中（这是不可能的，因为它只存在一次）。

即使有很多算法，我也无法选择合适的算法。我不知何故陷入困境，希望针对以下问题提供答案：

1）如何找到合适的算法并以算法可以处理的方式表示这个问题？

2）这个玩具大小的例子的可能解决方案可能是什么样子（任何语言都可以，我只是想了解一下）。

Edit1：我也在考虑模拟退火（返回一个可能的解决方案）。这对于最小化例如选择集合的总成本可能是有意义的。但是，我无法弄清楚如何做出适当的问题描述，将“冲突”考虑在内。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T23:10:31.290

这个问题可以表述为一个[广义的精确覆盖问题](https://en.wikipedia.org/wiki/Exact_cover)。

为每组集合（Set1、Set2 等）创建一个新原子，并将输入转换为如下实例：

```
{Set1, banana, pineapple, orange}
{Set1, apple, kale, cucumber}
{Set1, onion, garlic}
{Set2, banana, cucumber, garlic}
{Set2, avocado, tomato}
... 
```

使`Set*`原子主要（仅覆盖一次）和其他原子次要（最多覆盖一次）。然后你可以用 Knuth 算法 X 的推广来解决它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T07:40:02.540

看着布景列表，我想到了一个有多个入口的迷宫。该任务类似于从上到下跟踪没有子集交叉点的路径。Haskell 中的示例选择所有入口，并尝试每条路径，返回成功的路径。

我对代码如何工作的理解（算法）：

对于第一组中的每个子集，选择下一组中的每个子集，其中该子集与累积结果中的每个子集的交集为空。如果没有符合条件的子集，请打破循环的压力。如果没有可供选择的集合，则返回该结果。为所有选择的子集（和相应的累积结果）递归调用该函数。

```
import Data.List (intersect)
import Control.Monad (guard)

sets = [[["banana", "pineapple", "orange"], ["apple", "kale", "cucumber"], ["onion", "garlic"]]
       ,[["banana", "cucumber", "garlic"], ["avocado", "tomato"]]]

solve sets = solve' sets [] where
  solve' []         result = [result]
  solve' (set:rest) result = do
    subset <- set
    guard (all null (map (intersect subset) result))
    solve' rest (result ++ [subset]) 
```

输出：

```
*Main> solve sets
[[["banana","pineapple","orange"],["avocado","tomato"]]
,[["apple","kale","cucumber"],["avocado","tomato"]]
,[["onion","garlic"],["avocado","tomato"]]] 
```

# php - 多域路由

> ID：16048610
> 
> 赞同：1
> 
> 时间：2013-04-16T22:56:37.027
> 
> 标签：php, apache, dns, routing

我希望不同的域路由到同一服务器上的子目录。

例子：

如果我的 Apache 根目录是 /var/www/ - 我希望 example1.com 路由到 /var/www/example1/ - 并且 example2.com 路由到 var/www/example2/。

我需要配置 Apache 吗？或者我应该在 /var/www/index.php 中编写一个 PHP 脚本来路由？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:59:34.570

您是否有权访问您的 Apache 配置文件，可能位于`/etc/apache2/apache2.conf`或中`/etc/httpd/httpd.conf`？

```
<VirtualHost *:80>
  DocumentRoot "/var/www/example1"
  ServerName example1.com
    ServerAlias www.example1.com
  <Directory "/var/www/example1">
    allow from all
    Options -Indexes
  </Directory>
</VirtualHost>

<VirtualHost *:80>
  DocumentRoot "/var/www/example2"
  ServerName example2.com
    ServerAlias www.example2.com
  <Directory "/var/www/example2">
    allow from all
    Options -Indexes
  </Directory>
</VirtualHost> 
```

更多信息请访问[http://httpd.apache.org/docs/2.2/vhosts/](http://httpd.apache.org/docs/2.2/vhosts/)

# ruby-on-rails - ajax 在我的 Rails 项目中不起作用

> ID：16048621
> 
> 赞同：1
> 
> 时间：2013-04-16T22:57:23.310
> 
> 标签：ruby-on-rails, ajax

我正在尝试使用 ajax 为我的 rails 项目添加效果。我的页面上有 4 个 div：

```
<div header></div>
<div menu></div>
<div content></div>
<div footer></div> 
```

单击菜单 div 中的链接时，页脚应该向上滑动，新的页面文本应该出现在内容 div 中。当我的公用文件夹中的所有文件都在 rails 项目中时，该代码工作正常，但是当我将文件放在 View 文件夹中时，它不起作用。知道为什么吗？

我的 assets/javascripts 文件夹中有一个 scripts.js 文件。代码是：

```
 var ajax_loaded = (function(response) {               
  $("#content").slideUp(                            
    "fast",                                         
    function() {                                    
        $("#content")                           
            .html(response)                         
            .slideDown("fast");                     

        $("#content .ajax").on("click",ajax_load);  
        $("#content form").on("submit",form_submit);
    });
});

var form_submit = (function(e) {                    
    e.preventDefault();                             

    var url = $(this).attr("action");               
    var method = $(this).attr("method");            

    var data = {}                                   
    $(this).find("input, textarea").each(function(i){
        var name = $(this).attr("name");            
        var value = $(this).val();                  

        data[name] =value;                          

    }); 

    $.ajax({                                        
        "url": url,                                 
        "type": method,                             
        "data": data,                               
        "success": function () {                    
            history.pop();                          
            $(history.pop()).trigger("click");      
        },
        "error": function () {alert("bad");}        
    });
});

var history = [];                                   

var current_url_method;                             

var ajax_load = (function(e) {                      
    e.preventDefault();                             

    history.push(this);                             

    var url =$(this).attr("href");                  
    var method = $(this).attr("data-method");       

    if (current_url_method != url + method) {       
        current_url_method = url + method;          

        $.ajax({                                    
            "url": url,                             
            "type": method,                         
            "success": ajax_loaded,                 
        });
     }
});

$("#menu a").on("click",ajax_load);                 
$("#menu a.main").trigger("click"); 
```

我的资产/样式表文件夹中有一个 style.css.scss。代码是：

```
#header {
    background: #333333;
    height:50px;
}

     #menu {
      background: #ffffff;

      }

#content { background: #eeeeee;height:100px;}
#footer {
    background: #333333;
    color: #ffffff;
    height: 100px;
} 
```

在我的路线文件夹中，我有：

```
 Books::Application.routes.draw do

  get "about_us", :to => "static_pages#about_us"
  get "contact_us", :to => "static_pages#contact_us"
  get "invite_us", :to => "static_pages#invite"
  get "faq", :to => "static_pages#faq"

  root :to => 'books#index' 
```

Books 控制器中的索引方法是：

```
def index
render :layout => "application"
end 
```

在我的视图/布局中，在 application.html.erb 中，我有（这与我的公用文件夹有所不同，其中链接的形式为`<a href = "/about.html" class = "main">About Us</a>)`：

```
<!DOCTYPE html>
<html>
<head>
  <title>Books</title>
  <%= stylesheet_link_tag "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

<div id = "header">My header</div>
<div id = "menu">
          <%= link_to "About Us",about_us_path,:class => "main" %>
          <%= link_to "FAQ", faq_path, :class => "main" %>
          <%= link_to "Invite Others", invite_us_path, :class => "main" %>
          <%= link_to "Contact Us", contact_us_path, :class => "main" %>
</div>

<div id = "content">
<%= yield %>
</div>

<div id = "footer">My footer</div>

<script src = "http://code.jquery.com/jquery-1.9.1.min.js">
</script>
</body>
</html> 
```

无论如何，如果您对出了什么问题有任何想法，我将不胜感激，谢谢。就像我说的，它在公共文件夹中工作，所以我认为我的 scripts.js 没问题。可能与 ':class => "main" ' 部分有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:48:00.627

您可能希望确保在加载页面时提供 scripts.js。我看到您在布局文件中包含 application.js。此文件用作 Rails 资产管道中的清单文件，因此请确保将其配置为在加载时包含 scripts.js。它需要有这样的一行：

```
//= require scripts 
```

在浏览器中，假设您在端口 3000 上运行 rails 服务器，您可以通过访问`http://localhost:3000/assets/scripts.js`. 您可以通过访问来确保它包含在 application.js 中`http://localhost:3000/assets/application.js`。

有关资产管道的更多信息：http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:30:47.413

把它整理好了。我将 scripts.js 中的所有代码包装在一个

```
$(document).on("ready", function(){......}); 
```

那是主要的。

此外，我两次调用 jquery 库，这可能没有帮助 - //= 需要 jquery，在我的 application.js.erb 文件中，也来自我的 application.html.erb。

无论如何，案子已经解决了！感谢一切。

# jenkins - Jenkins：如何在构建中添加 -D 参数？

> ID：16048622
> 
> 赞同：1
> 
> 时间：2013-04-16T22:57:33.603
> 
> 标签：jenkins

我怎样才能让詹金斯做到以下几点：

当我创建 WAR 文件时，我通常运行以下命令：

```
mvn clean install -Dapp.env=SOME_ENVIRONMENT 
```

哪个加载该环境的特定属性。我在 Jenkins 中添加了一个构建参数，但这没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:10:17.403

当您添加新工作或修改现有工作时，您可以将其直接放入“构建”下的目标和选项中：

```
clean install -Dapp.env=SOME_ENVIRONMENT 
```

# python - Python脚本图像保存目录/文件名错误

> ID：16048626
> 
> 赞同：0
> 
> 时间：2013-04-16T22:57:53.833
> 
> 标签：python, file, save, python-imaging-library

我正在尝试保存图像，但我收到一条错误消息，指出没有这样的文件或目录，即使我保存了图片。

```
import PIL
from PIL import ImageFont
from PIL import Image
from PIL import ImageDraw
import ctypes, time
import urllib

while 1:
    font_size = 50

    font = ImageFont.load_default() 
    img = Image.open('bg.bmp')
    draw = ImageDraw.Draw(img)

    draw.text((300, 500), 'Period 1: ')
    draw.text((300, 550), 'Period 2: ')
    draw.text((300, 600), 'Period 3: ')
    draw.text((300, 650), 'Period 4: ')
    draw.text((300, 700), 'Period 5: ')
    draw.text((300, 750), 'Period 6: ')
    draw = ImageDraw.Draw(img)
    draw = ImageDraw.Draw(img)
    img.save("mod_bg.bmp")

pathToBmp = "C:\Documents and Settings\User\My Documents\My Pictures\ScreenShot.bmp"
SPI_SETDESKWALLPAPER = 20  
ctypes.windll.user32.SystemParametersInfoA(SPI_SETDESKWALLPAPER, 0, pathToBmp , 0)

quit() 
```

这是错误信息

```
Traceback (most recent call last):
File "C:\Documents and Settings\User\Desktop\Project.py", line 12, in <module>
img = Image.open('bg.bmp')
File "C:\Python27\lib\site-packages\PIL\Image.py", line 1952, in open
fp = __builtin__.open(fp, "rb")
IOError: [Errno 2] No such file or directory: 'bg.bmp' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:10:24.520

您没有指定完整路径，因此 Python 正在当前工作目录中查找该文件，可能与您的脚本所在的目录相同。放在`bg.bmp`那里，否则指定正确的路径。

此外，由于您使用的是 Windows，请`dir`在命令行窗口中执行操作，并确保您用于制作该图像的任何程序都没有添加额外的扩展名，并且该文件实际上没有命名`bg.bmp.bmp`或其他东西。

# vb6 - 在代码中制作控件数组

> ID：16048634
> 
> 赞同：5
> 
> 时间：2013-04-16T22:58:53.687
> 
> 标签：vb6

此代码不起作用我想在 VB6 中的 Form_Load 上创建一个控件数组，因为我必须为拼字游戏板制作 225 个控件数组，并且它们必须精确。我的代码是：

```
Private lblblocks(1 To 225) As Label

Private Sub Form_Load()
Dim i As Integer, j As Integer
For i = 1 To 15
    For j = 1 To 15
        Dim arrnum As Integer
        arrnum = (i - 1) * 15 + j
        Load lblblocks(arrnum)
        With lblblocks(arrnum)
            .Width = 1000
            .Height = 1000
            .Top = (i - 1) * 1000
            .Left = (j - 1) * 1000
            .Visible = True
            .BackColor = Int(Rnd(1) * 255) + &H100 * Int(Rnd(1) * 255) + &H10000 * Int(Rnd(1) * 255)
        End With
    Next j
Next i
End Sub 
```

我使用背景色来查看我所有的标签框。此代码不起作用。我收到错误“对象变量或未设置块变量”。有什么帮助吗？我不知道出了什么问题。我想将标签框保存在控件数组中，我知道如何在不使其成为控件数组的情况下做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T01:20:50.260

科迪·格雷在他的评论中说得对。我不相信您只能在 VB6 中的代码中动态创建控件数组。您必须在窗体上放置一个控件实例并将其`Index`属性值设为零。这将创建一个只有一个元素的控件数组，索引为零。然后，您可以修改代码以产生所需的结果，如下所示：

```
Private Sub Form_Load()
    Dim i As Integer
    Dim j As Integer

    For i = 0 To 14
        For j = 0 To 14
            Dim tileIdx As Integer
            tileIdx = i * 15 + j

            'If the tile index is zero, we already have that control,
            'so there's no need to load new instance. Otherwise, use the 
            'Load method to create a new control in the array with the 
            'specified index.
            If tileIdx > 0 Then
                Load lblTile(tileIdx)
            End If

            With lblTile(tileIdx)
                .Width = 1000
                .Height = 1000
                .Top = i * 1000
                .Left = j * 1000
                .Visible = True
                .BackColor = Int(Rnd(1) * 255) + &H100 * Int(Rnd(1) * 255) + &H10000 * Int(Rnd(1) * 255)
            End With
        Next
    Next
End Sub 
```

正如评论中所指出的，您不需要在数组索引零处加载控件的另一个实例，因为您在设计时已经这样做了。我还从零开始迭代我的数组，以便更轻松地计算索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-13T16:56:54.147

**我们可以从头开始添加**

```
Private Sub Command3_Click()
Dim rownum As Integer, ColNum As Integer
'Dim lblblocks(1 To 225) As Label
Dim lblblocks() As Label
Dim wwidth As Integer, hheight As Integer
wwidth = 400: hheight = 200
Dim i As Integer, j As Integer
rownum = 20: ColNum = 25
ReDim lblblocks(1 To rownum * ColNum)
For i = 1 To rownum
    For j = 1 To ColNum
        Dim arrnum As Integer
        arrnum = (i - 1) * ColNum + j
        Set lblblocks(arrnum) = Me.Controls.Add("VB.Label", "LB" & arrnum)
        With lblblocks(arrnum)
         'Set Bb(i) = formname.Controls.Add("VB.CommandButton", "Bb" & i)
            .Width = wwidth
            .Height = hheight
            '.Top = (i - 1) * 100
            '.Left = (j - 1) * 400
            .Top = (i) * hheight
            .Left = (j) * wwidth
            .Caption = arrnum
            .Visible = True
            .BackColor = Int(Rnd(1) * 255) + &H100 * Int(Rnd(1) * 255) + &H10000 * Int(Rnd(1) * 255)
        End With
    Next j
Next i
End Sub 
```

# c# - 使用 Perlin Noise 生成高度图返回黑色位图

> ID：16048635
> 
> 赞同：1
> 
> 时间：2013-04-16T22:58:57.827
> 
> 标签：c#, .net, generator, perlin-noise, heightmap

如标题所示，我正在使用 Perlin Noise 制作高度图生成器。

我使用了这个站点的伪代码-> [http://freespace.virgin.net/hugo.elias/models/m_perlin.htm](http://freespace.virgin.net/hugo.elias/models/m_perlin.htm)

并转为 C# 代码。到目前为止，我已经完成了所有变量类型分配，并且代码给出了输出。不幸的是我的输出看起来像这样->![在此处输入图像描述](https://i.stack.imgur.com/UKn3l.png)

如您所见，右边缘和下边缘从黑色到白色有轻微的渐变，但其他一切都是黑色的。

这是我的 C# 源代码->

```
 private void button1_Click( object sender, EventArgs e ) {
        persistence = float.Parse( textBox4.Text );
        NumberOfOctaves = Int32.Parse( textBox5.Text );

        int width = Int32.Parse( textBox1.Text );
        int height = Int32.Parse( textBox2.Text );
        float zoom = float.Parse( textBox3.Text );

        generate( width, height, zoom );
    }

    public float Noise( int x, int y ) {
        long n = x + ( y * 57 );
        n = ( long )Math.Pow( ( n << 13 ), n );
        return ( float )( 1.0 - ( ( n * ( n * n * 15731 + 789221 ) + 1376312589 ) & 0x7fffffff ) / 1073741824.0 );
    }

    public float SmoothNoise( float x, float y ) {
        float corners = ( Noise((int) (x-1), (int) (y-1)) + Noise((int) (x+1), (int) (y-1)) + Noise((int) (x-1), (int) (y+1)) + Noise((int) (x+1), (int) (y+1)) ) / 16;
        float sides   = ( Noise((int) (x-1), (int) y) + Noise((int) (x+1), (int) y) + Noise((int) x, (int) (y-1)) + Noise((int) x, (int) (y+1)) ) /  8 ;
        float center  =  Noise( (int)x, (int)y ) / 4;
        return corners + sides + center;
    }

    public float CosineInterpolate( float a, float b, float x ) {
        double ft = x * 3.1415927;
        double f = ( 1 - Math.Cos( ft ) ) * 0.5;

        return (float)( ( a * ( 1 - f ) ) + (b * f) );
    }

    public float InterpolatedNoise( float x, float y ) {
        // MessageBox.Show( x.ToString() );
        int intX = ( int )x;
        float fractX = x - intX;

        int intY    = ( int ) y;
        float fractY = y - intY;

        float v1 = SmoothNoise(intX,     intY);
        float v2 = SmoothNoise(intX + 1, intY);
        float v3 = SmoothNoise(intX,     intY + 1);
        float v4 = SmoothNoise(intX + 1, intY + 1);

        float i1 = CosineInterpolate(v1 , v2 , fractX);
        float i2 = CosineInterpolate(v3 , v4 , fractX);

        // MessageBox.Show( intX + "\n" + intY + "\n" + fractX + "\n" + fractY + "\n" + v1 + "\n" + v2 + "\n" + v3 + "\n" + v4 + "\n" + i1 + "\n" + i2 + "\n" + CosineInterpolate( i1, i2, fractY ) );

        return CosineInterpolate(i1 , i2 , fractY);
    }

    public float PerlinNoise2D( float x, float y ) {
        float total = 0;
        float p = persistence;
        int n = NumberOfOctaves;

        for(int i = 0; i < n; i++ ) {
            int frequency = (int)Math.Pow( 2, i );
            // MessageBox.Show( Math.Pow( 2, i ).ToString() );
            float amplitude = ( int )Math.Pow( p, i );
            total = total + InterpolatedNoise(x * frequency, y * frequency) * amplitude;
        }
        return total;
    }

    private void generate( int sizeX, int sizeY, float zoom ) {
        int zoomX = (int)( sizeX * zoom );
        int zoomY = (int)( sizeY * zoom );

        float max = int.MinValue;
        float min = int.MaxValue;

        float[,] nmap = new float[zoomX,zoomY];

        Bitmap heightMap = new Bitmap(zoomX,zoomY);

        for (int x=0; x<zoomX; x++) {
            for (int y=0; y<zoomY; y++) {
                // MessageBox.Show( PerlinNoise2D( x / zoom, y / zoom ).ToString() );

                nmap[x,y] = PerlinNoise2D(x/zoom,y/zoom);
                max = (max < nmap[x,y]) ? nmap[x,y] : max;
                min = (min > nmap[x,y]) ? nmap[x,y] : min;
            }
        }

        max = max-min;

        for (int x=0; x<zoomX;x++) {
            for (int y=0; y<zoomY;y++) {
                int calc = (int) ( (nmap[x,y] - min) / max );
                heightMap.SetPixel(x,y,Color.FromArgb(calc,calc,calc));
            }
        }

        pictureBox1.Image = heightMap;
    } 
```

如果有人愿意，我也可以以 zip 格式上传 Visual Studio 解决方案。

到目前为止，我发现 Noise() 函数有问题，因为它返回 -0,281 的次数最多。它应该返回介于 -1.0 和 1.0 之间的浮点数。我已经尝试过使用其他随机函数，但每次输出都一样。

我希望你们能帮助我，谢谢你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-26T21:25:36.127

我在代码中发现了两个问题。

首先，您错误地将`^`符号解释为原始源代码中的幂函数，而它是异或运算。所以线

```
n = ( long )Math.Pow( ( n << 13 ), n ); 
```

应该

```
n = ( long )(( n << 13 ) ^ n); 
```

其次，当从噪声值创建颜色像素时，你的噪声在 0..1 范围内，颜色值应该在 0..255 范围内，所以行

```
int calc = (int) ( (nmap[x,y] - min) / max ); 
```

应该

```
int calc = (int) (( (nmap[x,y] - min) / max ) * 255); 
```

完整的工作（控制台）示例：http: [//ideone.com/RGVf8J](http://ideone.com/RGVf8J)

# haskell - Haskell：输入“=”时解析错误

> ID：16048637
> 
> 赞同：1
> 
> 时间：2013-04-16T22:59:04.260
> 
> 标签：haskell, implementation, haskell-platform

我一直收到这条消息，我做错了什么？

```
data Pile a =  Pile [a] deriving  (Show,Eq,Ord)  

flpile:: (Eq a, Eq b, Eq c) => Pile (a,(b,c))-> Pile (a,b,c)
flpile (Pile (a,(b,c)) = Pile [asocr (a,(b,c))]

asocr :: (a,(b,c)) -> (a,b,c)
asocr (a,(b,c)) = (a,b,c) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T23:06:02.763

你有一个不匹配的括号：

```
flpile (Pile (a,(b,c))) = ...
                      ^ this was missing 
```

为避免将来出现此问题，我建议在您的编辑器中启用“突出显示匹配括号”选项（如果有）。如果没有，请找一个更好的编辑器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T23:09:08.240

在这一行

```
flpile (Pile (a,(b,c)) = Pile [asocr (a,(b,c))] 
```

**您在(** Pile (a,(b,c)) **)**忘记了右括号

 **当你更正它时，你会得到一个错误。那是因为`(a,(b,c))`正如您的数据定义所说，这不是一个列表。我不知道，你想用你的代码实现什么，但你可以把它改成`Pile [(a,(b,c))]`，所以它会编译（如果这对你的目的有意义的话）。**

# jquery - jQuery - 创建一个属于某个特定的“图像链接” 班级

> ID：16048644
> 
> 赞同：0
> 
> 时间：2013-04-16T22:59:26.950
> 
> 标签：jquery, image, html

我想创建一个图像元素并使用 jQuery 将其分配/包装在一个类中。图像还必须充当链接，即当用户单击它时，应打开指定的网站。以下示例代码创建了一个指向 Google 网站的图像元素。如何将此元素分配给指定的类？

```
$('<img />').attr({'src':src})
.appendTo($('<a />').attr({href:'http://www.google.com'}).appendTo($('#targetLocation'))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:04:07.353

```
var img    = $('<img />', {src:src, 'class':'imgClass'}),
    anchor = $('<a />'  , {href:'http://www.google.com'}),
    div    = $('<div />', {'class':'myClass'});

div.append( anchor.append(img) ).appendTo( $('#targetLocation') ); 
```

最终得到

```
<div id="targetLocation">
    <div class="myClass">
        <a href="http://www.google.com">
           <img src="whatever" class="imgClass" />
        <a/>
    </div>
</div> 
```

而且您以正确的方式进行操作，当您可以使用实际的真实对象时，您不应该使用字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:03:35.810

为什么不直接创建并附加一个变量？

```
var imgElement = "<a href='www.yourlink'><img class="your class" src="your src"/></a>";
$("#targetLocation").append(imgElement); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T23:04:13.573

只需将所有 html 构建为字符串并调用

```
var theHtmlString = 
    "<a href="http://google">" +
    "  <img src="whatever"></img>" +
    "</a>";
$('#targetLocation').append(theHtmlString); 
```

虽然这也会将此 HTML 添加到目标位置元素中的内容中，但您可能希望替换该元素：

```
$('#targetLocation').html(theHtmlString); 
```

# php - 限制多个 php 脚本实例

> ID：16048648
> 
> 赞同：1
> 
> 时间：2013-04-16T22:59:49.393
> 
> 标签：php, validation, multiple-instances

我有一个多次运行的脚本，因为验证需要更长的时间并允许脚本的多个实例。它应该每天运行一次，但昨天`script_start()`在同一时间运行了 18 次。

```
add_action('init', 'time_validator');

function time_validator() {
    $last = get_option( 'last_update' );        
    $interval = get_option( 'interval' );
    $slop = get_option( 'interval_slop' );

    if ( ( time() - $last ) > ( $interval + rand( 0, $slop ) ) ) {
        update_option( 'last_update', time() );
        script_start();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:07:02.673

听起来很混乱，您已经检测到 18 个脚本正在运行，尽管您不希望这样。您应该修复调用这些脚本实例的代码。

但是，您可以在脚本本身中实现此检查。为了确保脚本只运行一次，您应该使用[`flock()`](http://www.php.net/manual/en/function.flock.php). 我举个例子:

将此添加到您的代码*顶部*，该代码应该一次只运行一次：

```
// open the lock file
$fd = fopen('lock.file', 'w+');

// try to obtain an exclusive lock. If another instance is currently 
// obtaining the lock we'll just exit. (LOCK_NB makes flock not blocking)
if(!flock($fd, LOCK_EX | LOCK_NB)) {
    die('process is already running');
} 
```

...以及关键代码的结尾：

```
// release the lock
flock($fd, LOCK_UN);
// close the file
fclose($fd); 
```

所描述的方法对竞争条件是安全的，它确实确保关键部分只运行一次。

# postgresql - PostgreSQL 9.x - pg_read_binary_file & 将文件插入到 bytea

> ID：16048649
> 
> 赞同：2
> 
> 时间：2013-04-16T22:59:51.150
> 
> 标签：postgresql, postgresql-9.1, postgresql-9.2

我一直在到处（google、stackoverflow 等）寻找有关如何使用 PostgreSQL`pg_read_binary_file()`函数的文档。

我能找到的唯一有意义的是官方文档中的[这个页面](http://www.postgresql.org/docs/9.2/static/functions-admin.html#FUNCTIONS-ADMIN-GENFILE-TABLE)。

每次我尝试使用此功能时都会出错。

例如：

```
 SELECT pg_read_binary_file('/some/path/and/file.gif');
    ERROR:  absolute path not allowed 
```

或者

```
 SELECT pg_read_binary_file('file.gif');
    ERROR:  could not stat file "file.gif": No such file or directory 
```

我是否需要将我的文件放在特定目录中以便 Postgres 访问它？如果是的话是什么目录？

* * *

如果它很重要，我正在查看此功能的原因是因为我试图将文件插入数据库而不[做疯狂的事情](https://dba.stackexchange.com/a/2962)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-18T00:58:32.997

正如@a_horse_with_no_name 和@guedes 所述，解决方案是确保上传的文件位于服务器上的PGDATA 目录中。

[postgres 文档](http://www.postgresql.org/docs/9.2/static/functions-admin.html#FUNCTIONS-ADMIN-GENFILE)确实将文件位置声明为要求。

此外，我创建了一个从另一个目录到 PGDATA 目录的符号链接，这样我就不会干扰任何 postgres 数据结构。这似乎运作良好，我不必做任何上述[疯狂的事情](https://dba.stackexchange.com/a/2962)。

# ruby-on-rails-3 - 将参数传递给表单

> ID：16048650
> 
> 赞同：0
> 
> 时间：2013-04-16T23:00:02.867
> 
> 标签：ruby-on-rails-3

我正在从 TasksController 的 show 动作中实例化一个评论表单，但参数并没有传递给表单。

```
class TasksController < ApplicationController

def show
  @task = Task.find(params[:id])
  @comment = Comment.new(task_id: @task.id)
end 
```

意见/任务/show.html.erb：

```
<%= form_for @comment, html: {class: "centrera_parent"}, remote: true do |f| %>
    <%= f.text_area :content, placeholder: "Add a comment", class: "centrera_child" %><br />
<%= f.submit "Post Comment" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:01:31.893

检查您的源 HTML 以更好地了解 FormHelpers 的作用。

使用`form_for` `f.text_field`将生成以下格式的名称属性：

```
messages[subject] 
```

因此，您的参数将采用以下格式：

```
params[:messages][:subject] 
```

您还可以使用`<%= debug params %>`来检查参数中的内容，这非常有帮助。

# responsive-design - 为媒体查询排除旧版 IE

> ID：16048653
> 
> 赞同：1
> 
> 时间：2013-04-16T23:00:11.777
> 
> 标签：responsive-design, media-queries

我正在使用 CSS 媒体查询设计一个响应式网站，据我所知，IE8 及以下版本不支持。我已经设计了一种我认为只对 IE9 和所有其他浏览器使用 css 查询的好方法，但我想让大家浮动它，看看我是否遗漏了任何东西，或者我的计划中是否有漏洞。我的方法是：

1.  调用我的主要 style.css 文件，所有浏览器都将使用该文件。
2.  使用我对除 IE 之外的所有浏览器的媒体查询调用 css 文件：

    ```
    [如果！IE]
    在此处导入媒体查询样式表
    [万一]

    ```

3.  调用 IE9 的媒体查询样式表：

    ```
    [如果 IE 9]
    在此处导入媒体查询样式表
    [万一]

    ```

有人看到这样的计划有问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:22:10.060

你的计划是合理的，但它需要调整，因为你没有参考 IE 的*未来版本*，因此你可能会排除很多未来的访问者/用户。

鉴于使用 IE 的社区/企业过多（阅读：*世界的一半*），最好使用您已经提出的稍微修改过的版本：

```
<!--[if !IE]> 
   @media queries for all browsers except IE
<![endif]--> 
```

更重要的是：

```
<!--[if gt IE 8]> //greater than IE 8
   @media queries for IE9 and above
<![endif]--> 
```

这两种说法结合起来排除了 IE 9 之前的所有版本，但更重要的是**包括了未来的版本**。

[先前](https://stackoverflow.com/questions/13585333/browser-compatibility-issues-with-css3/13585432#13585432)的答案演示了有关版本的其他可能性以及您可以使用的一些不同排列和组合。

# php - 更新“剩余数量”而不刷新站点

> ID：16048657
> 
> 赞同：0
> 
> 时间：2013-04-16T23:01:05.730
> 
> 标签：php, html, mysql, ajax

我有一个 HTML 站点，其页面使用 PHP 代码查询 MySQL 数据库。该表包含 3 列（日期、时间、剩余时间）。根据当前日期和时间，我希望 HTML 页面返回并显示“剩余”列中的相应值。

诀窍是我希望这个值自动更新（AJAX？），而用户不必刷新页面或单击按钮。

到目前为止，我使用的 PHP 可以根据日期显示“剩余”值，但我还没有弄清楚如何查询日期和时间，也不知道如何自动刷新。

到目前为止我已经弄清楚的PHP代码

*（注意：`quantitytest_config.php`只包含主机名/用户名/密码）*

```
 <?php

include 'quantitytest_config.php';

//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password) 
  or die("Unable to connect to MySQL");

//select a database to work with
$selected = mysql_select_db("grace59_countdown",$dbhandle) 
  or die("Could not select countdown");

//execute the SQL query and return records
$result = mysql_query("SELECT remaining FROM quantity WHERE salesdate=CURDATE()");
//fetch tha data from the database
while ($row = mysql_fetch_array($result)) {
   echo "Quantity:".$row{'remaining'}."<br>";
}

//close the connection
mysql_close($dbhandle);
?> 
```

在此先感谢您的帮助。非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:47:13.240

使用[`jQuery.load`](http://api.jquery.com/load/)，这很容易，以下代码段将调用您的 PHP 脚本并每 10 秒更新一次剩余计数。

```
setInterval(function(){
    // Assumes the container has the id of count
    // and the php script is called remaining.php
    $("#count").load("remaining.php")
}, 10000); 
```

如果没有 jQuery，您将不得不做一些阅读，但这并不难

至于您嵌入同一问题的任何其他问题。您不应该将多个问题作为一个问题提出。每个问题都应显示您尝试过的内容、预期/实际行为、错误消息。这就是您的问题对其他人有用的方式，而不仅仅是您自己，这也是 Stack Overflow 的核心。目前你的问题是我不知道该怎么做，这不太适合 SO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T23:38:28.487

正如您所提到的，您应该使用 AJAX。

基本上，您会不时地调用一个页面并检查是否有新结果（如果它们存在）并将它们检索给用户。

您将要调用的页面是一个与您发布的页面类似的 PHP 文件，它将返回 AJAX 调用的结果。

调用后，结果将呈现给用户。

通常，在 AJAX GET 方法中更快，因为它不涉及处理 POST 字段，并且由于您只是获取信息，所以我会坚持下去。

这是您正在寻找的基本语法。我猜它有一些复杂但可以理解的名字。

```
<script>
setInterval(function(){check_new_stuff();}, 10000);

function check_new_stuff(){
  $.ajax({
    type: "GET",
    url: "url_with_your_php_code.php",
    dataType: 'html',
    data: {name_of_the_parameter_to_be_passed_in_get: value_of_the_parameter_to_be_passed_in_get},

    success: function(html){
             $("#div_to_have_its_html_replaced_with_the_result_from_php_code").html(html);
    },

    error: function(){
    },

    complete: function(){
    }
  });

  setTimeout(function(){check_new_stuff();}, 10000);
}
</script> 
```

（您可以[在此处阅读有关此内容的更多信息](http://api.jquery.com/jQuery.get/)）

关于你关于时间的问题，我没有看到它有问题。您只需要在数据库查询中添加字段并将时间值传递给它？

**（如果你想要当前时间？ - 试图猜测你的列名，因为你没有在你的解释中保持表命名相同）**

```
$result = mysql_query("SELECT remaining FROM quantity WHERE salesdate=CURDATE() AND salestime=CURTIME()"); 
```

**（具体时间，自己指定？）**

```
$result = mysql_query("SELECT remaining FROM quantity WHERE salesdate=CURDATE() AND salestime='11:15:00'"); 
```

# php - 如何将两个选项值传递给 PHP

> ID：16048661
> 
> 赞同：0
> 
> 时间：2013-04-16T23:01:18.880
> 
> 标签：php, option

下面是我目前拥有的代码，它正在努力传递`week_num`. 我`session_start()`用来在页面之间传递我的变量。

```
print'<form action="changeplayer_2.php" method="post">';

print"<select name='Week_select'> <br>";

while ($wrow=mysql_fetch_array($wresult)){ 
     print '<option value="'.$wrow['week_num'].'">'.'week '.$wrow['week_num'].' 
     '.$wrow['week_name'].'</option><br>\n';    
}

print "</select><br><br>"; 
```

我很好奇的是我是否也可以`week_name`转到下一页。请记住，我仍然是初学者，所以如果您能告诉我有关修复工作的原因/方式的任何信息，我将不胜感激。

我努力了

```
print '<option value="'.$wrow['week_num,week_name'].'">'.'week '.$wrow['week_num'].'     '.$wrow['week_name'].'</option><br>\n'; 
```

和

```
print '<option value="'.$wrow['week_num','week_name'].'">'.'week '.$wrow['week_num'].'     '.$wrow['week_name'].'</option><br>\n'; 
```

两者都会产生错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:05:25.650

试试这个串联：

```
print '<option value="'.$wrow['week_num'].'_'.$wrow['week_name'].'">'.'week '.$wrow['week_num'].'     '.$wrow['week_name'].'</option><br>\n'; 
```

# objective-c - 未调用 validRequestorForSendType

> ID：16048666
> 
> 赞同：2
> 
> 时间：2013-04-16T23:01:33.880
> 
> 标签：objective-c, macos, cocoa

我有一个将菜单项添加到 Finder 上下文菜单的应用程序。

目前我的菜单项显示为任何选定的项目。

我想执行一些过滤并且不显示某些路径的菜单项。

我相信我已经按照 Apple 的服务实施指南[1](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/SysServices/introduction.html#//apple_ref/doc/uid/10000101-SW1)中的说明进行操作，但我没有任何运气能够做到这一点。

我的理解是我的过滤逻辑应该在我的响应者的`validRequestorForSendType`方法中执行。我的问题是这个方法永远不会被调用，所以我假设它没有在响应者链中注册，但我无法弄清楚我错过了什么。

我是 OSX 的新手，我继承了这段代码，所以这里有一些额外的上下文可能会提供一些线索：

应用程序唯一的 UI 存在是作为系统菜单栏中的托盘图标。没有任何东西来自 NSApplication（据我所知，它是一个 NSResponder）。有一个名为 AppDelegate 的类，它派生自`NSObject <NSApplicationDelegate>`设置服务提供者的位置。在`applicationDidFinishLaunching`这堂课中：

*   分配一个 MyResponder（派生自 NSResponder）实例
*   NSRegisterServicesProvider(myResponder, @" *portName from my Info.plist* ")
*   [NSApp setServicesProvider:myResponder]
*   NSUpdateDynamicServices()

在 MyResponder 的`initialize()`函数中，它调用`[NSApp registerServicesMenuSendTypes]`并定义`validRequestorForSendType`了 Info.plist 中列出的我的服务函数。

如前所述，我运行我的应用程序，打开 Finder，单击路径并获取我的应用程序的菜单项，但由于`validRequestorForSendType`未调用 MyResponder 的，我没有机会对其进行过滤。

关于我所缺少的任何想法？我是否需要在我跳过的 XCode 的 xib 查看器中连接一些东西？

# xpath - 选择某个单元格旁边的单元格

> ID：16048669
> 
> 赞同：3
> 
> 时间：2013-04-16T23:01:49.040
> 
> 标签：xpath

我正在尝试使用自动化过程跟踪网页上的 url，但由于使用了无效的 xpath 选择器，我陷入了无限循环。

这是一个示例表：

```
<table>
<tr>
   <td><a href="#">...</a></td>
   <td><a href="#">4</a></td>
   <td><a href="#">5</a></td>
   <td><span>6</span></td>
   <td><a href="#">7</a></td>
   <td><a href="#">8</a></td>
   <td><a href="#">9</a></td>
   <td><a href="#">10</a></td>
</tr>
</table> 
```

如何选择没有 url 的单元格之后的所有单元格，我的意思是从 7 到 10 的单元格（不手动提供 position() ），因为它是可变的位置，上面显示的表格仅用于演示目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T23:31:49.180

您可以使用以下兄弟姐妹来获取以下兄弟姐妹/单元格：

```
/table//tr/td[not(a)]/following-sibling::td 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T20:10:11.043

您也应该能够使用此 xpath：

```
//span/../following-sibling::td/a 
```

这意味着 - 找到跨度，然后寻找它的父母，然后寻找父母的以下兄弟姐妹并找到它的孩子'a'

# c# - 是否有用于.net 的序列化程序来输出 c# 代码？

> ID：16048671
> 
> 赞同：13
> 
> 时间：2013-04-16T23:01:55.603
> 
> 标签：c#, .net, serialization

我正在寻找一个可以获取实例的序列化程序，并将其序列化为一个包含 c# 代码的字符串，表示图形的内容。该类的功能类似于`SerializeObject`JSON.NET 中的功能。

我知道只有一组非常狭窄的结构会起作用，但我感兴趣的结构非常简单，而且它们会起作用。

如果有人知道具有类似功能的 Visual Studio Visualizer，则可以加分。

**编辑：** 输出将在编译时用于不同的应用程序。我不需要在运行时反序列化输出（c# 代码），它会保存到文件中进行分析。

```
var foo = new Foo() { Number = 1, Bar = new Bar() { Str = "Bar"}};
string sourceCode = Magic.SerializeObject(foo); 
```

输出：

```
Foo obj = new Foo();
obj.Number = 1;
obj.RefType = null; // infer this
obj.Bar = new Bar();
obj.Bar.Str = "Bar"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T11:03:28.337

是的，不...

最接近的解决方案称为[CodeDOM](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)，它是大多数 Visual Studio 设计人员和向导用来生成代码的方法。

* * *

在仔细查看您的评论后，我认为您应该通读 MSDN 中的[二进制序列化](http://msdn.microsoft.com/en-us/library/72hyey7b%28v=vs.110%29.aspx)部分，它将满足您的所有要求。

您正在寻找的是序列化，您不想每次都重新编译第二个项目，对吗？您只需要**验证**和向前\向后**兼容性**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T18:46:42.163

使用 CodeDom 编写这样的内容实际上相对简单：

```
class CSharpSerializer
{
    private readonly Dictionary<string, int> m_locals =
        new Dictionary<string, int>();

    private readonly List<CodeStatement> m_statements =
        new List<CodeStatement>();

    private string GetVariableName(string suggestedName)
    {
        suggestedName = suggestedName.TrimEnd("0123456789".ToCharArray());

        int n;
        if (m_locals.TryGetValue(suggestedName, out n))
        {
            n++;
            m_locals[suggestedName] = n;
            return suggestedName + n;
        }

        m_locals[suggestedName] = 1;
        return suggestedName;
    }

    public string SerializeObject(object obj)
    {
        m_statements.Clear();

        // dynamic used to make the code simpler
        GetExpression((dynamic)obj);

        var compiler = new CSharpCodeProvider();
        var writer = new StringWriter();
        foreach (var statement in m_statements)
        {
            compiler.GenerateCodeFromStatement(
                statement, writer, new CodeGeneratorOptions());
        }
        return writer.ToString();
    }

    private static CodeExpression GetExpression(int i)
    {
        return new CodePrimitiveExpression(i);
    }

    private static CodeExpression GetExpression(string s)
    {
        return new CodePrimitiveExpression(s);
    }

    private static CodeExpression GetExpression(DateTime dateTime)
    {
        // TODO: handle culture and milliseconds
        return new CodeMethodInvokeExpression(
            new CodeTypeReferenceExpression(typeof(Convert)), "ToDateTime",
            new CodePrimitiveExpression(Convert.ToString(dateTime)));
    }

    // and so on for other primitive types
    // and types that require special handling (including arrays)

    private CodeExpression GetExpression(object obj)
    {
        if (obj == null)
            return new CodePrimitiveExpression(null);

        var type = obj.GetType();
        string typeName = type.Name;

        string variable = GetVariableName(
            typeName[0].ToString().ToLower() + typeName.Substring(1));

        m_statements.Add(
            new CodeVariableDeclarationStatement(
                typeName, variable, new CodeObjectCreateExpression(typeName)));

        foreach (var property in type.GetProperties(
            BindingFlags.Public | BindingFlags.Instance))
        {
            var expression = GetExpression((dynamic)property.GetValue(obj));
            m_statements.Add(
                new CodeAssignStatement(
                    new CodePropertyReferenceExpression(
                        new CodeVariableReferenceExpression(variable),
                        property.Name),
                    expression));
        }

        return new CodeVariableReferenceExpression(variable);
    }
} 
```

有很多情况下这段代码会失败，但是对于行为良好的类型（公共默认构造函数、所有公共实例属性都有设置器、字段或非公共属性中没有隐藏重要状态、没有循环引用、没有命名空间冲突等）。 ），它会工作。

# grails - Grails：两个领域对象之间的多重关系

> ID：16048674
> 
> 赞同：6
> 
> 时间：2013-04-16T23:02:28.573
> 
> 标签：grails, grails-orm

我正在尝试在 Grails 中的两个域类之间实现两种不同类型的关系。

考虑以下; 我有两个域类，一个 Author 和 Book 类，一个 Author 有很多书。

```
class Author{           
   String name 
}

class Book{
   String title
   static belongsTo = [author:Author]

} 
```

上面描述了作者和书籍之间非常基本的一对多关系。但我也希望作者有一个最喜欢的书籍列表的概念。理想情况下，这将被表示为一个单独的一对多关系，将同一个 Book 对象描述为一个列表并保持不变。

```
class Author{          
   String name
   static hasMany = [favouriteBooks: Book]

   static mapping = {
        favouriteBooks joinTable: [name: 'favourite_books',
                key: 'author_id']
   }
}

class Book{
   String title
   static belongsTo = [client:Client]

} 
```

我试图如上所述（在许多其他方法中）描述这一点，最终没有创建数据库表（favourite_books）。我没有收到任何错误。这是我能想到的唯一方法，无需使用任何额外的对象，我想避免使用任何额外的对象来保持模型简单。我觉得我在正确的轨道上，但可能错过了一些重要的拼图。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T00:40:43.170

首先，让我们确保我正确理解您的问题。你有`Book`和`Author`域类，但这些类之间有两种关系：

1.  `Author`作者写书，所以和之间存在一对多的关系`Book`。当然，在现实生活中，一本书可能由许多作者撰写，但在这种情况下，我们似乎可以忽略这一点。
2.  `Author`作者有最喜欢的书，因此和之间存在第二个多对多关系`Book`。这种关系是多对多的，因为一本书可能是许多作者的最爱。

所以假设我已经正确理解了这个问题，让我们试着找到一个解决方案。首先，让我们添加多对多关系（最喜欢的书）：

```
class Author {
    String name
    static hasMany = [favourites: Book]
}

class Book {
    String title
    static hasMany = [favouritedBy: Author]
    static belongsTo = Author
} 
```

每当定义多对多关系时，我们必须选择一方作为关系的所有者。在这种情况下，我已经指定

```
static belongsTo = Author 
```

在`Book`类中，`Book`关系的拥有方`Author`也是所有者。因此，我们应该将最喜欢的书籍添加给作者，而不是相反，[请参阅此处](http://grails.org/doc/latest/guide/GORM.html#manyToMany)了解更多详细信息。

然后可以添加一对多关系：

```
class Author {
    String name
    static hasMany = [favourites: Book, booksWritten: Book]
}

class Book {
    String title
    static hasMany = [favouritedBy: Author]
    static belongsTo = Author

    Book writtenBy
} 
```

顺便说一句，在您的域模型中，您在`Author`课程中包含以下内容

```
static mapping = {
    favouriteBooks joinTable: [name: 'favourite_books', key: 'author_id']
} 
```

这将导致连接表被命名`favourite_books`，而在我的模型中连接表将默认为`author_favourites`. 如果出于某种原因您特别希望连接表这样命名（例如，您试图将类映射到现有表），那么请随意包含上述内容。

最后，如果您发现自己在定义域类映射时遇到了困难，并且更愿意创建表，然后从它们生成域类，请查看[这个插件](http://grails.org/plugin/db-reverse-engineer)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T22:50:30.153

终于想通了。感谢 Don 为我指明了 db-reverse-engineer 插件的方向，它帮助公开了允许这种映射策略的关键属性。基本上，这一切都归结为使用 GORM 的 mappedBy 关联设置来明确告诉 Grails 如何映射多个 hasMany 引用。工作的类文件如下：

```
class Author {

    String name
    static hasMany = [books: Book, favourites: Book]

    // need to disambiguate the multiple hasMany references with the 
    // 'mappedBy' property:
    static mappedBy =   [books: "author",
                        favourites: "authors"]
}

class Book {

    String title
    Author author

    static hasMany = [authors: Author]
    static belongsTo = [Author]
} 
```

再次感谢您的帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T00:23:15.057

修改`Book`域类。删除`author`映射。

```
class Book{
   String title
   static belongsTo = [Author]
} 
```

查找新表 FAVORITE_BOOKS 一次`clean`，然后`run-app`.

# model-view-controller - 我正在尝试从 APP Framework 访问 jq.mvc.min.js，但它似乎丢失了

> ID：16048675
> 
> 赞同：0
> 
> 时间：2013-04-16T23:02:34.273
> 
> 标签：model-view-controller, appframework

我正在尝试访问[http://cdn.app-framework-software.intel.com/jq.mvc.min.js](http://cdn.app-framework-software.intel.com/jq.mvc.min.js)以在我的应用程序中实现，如此处所述（官方文档）：

[http://app-framework-software.intel.com/docmvc.php#intro/quickstart](http://app-framework-software.intel.com/docmvc.php#intro/quickstart)

但它似乎丢失了，也许有些人遇到了这个问题并找到了另一个链接？！

编辑：我在这里找到了一个： [https ://github.com/oreshinya/jq_mvc_test/tree/master/libs](https://github.com/oreshinya/jq_mvc_test/tree/master/libs)

但不确定它是否是最新版本。仍然，想访问官方的

# io - 通过不简单地逐行读取来拆分大文本文件

> ID：16048678
> 
> 赞同：1
> 
> 时间：2013-04-16T23:03:15.403
> 
> 标签：io, go, fseek

我有一个大文本文件，我想将其拆分为任意数量的较小文件。我需要的行为几乎与`split`终端命令相同，只是我需要文件在最后一行重叠。也就是说，第一个文件的最后一行是第二个文件的第一行，第二个文件的最后一行是第三个文件的第一行，依此类推。

天真的解决方案似乎从原始文本文件中读取行并在必要时拆分。我想知道是否有一个标准库函数可以让我处理字节而不是字符串，以便更轻松地统一分割文本文件。

有没有类似于`fseek`Go 的东西可以让我这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T23:28:15.253

例如，

> [包操作系统](http://golang.org/pkg/os/)
> 
> [`func (*File) Seek`](http://golang.org/pkg/os/#File.Seek)
> 
> `func (f *File) Seek(offset int64, whence int) (ret int64, err error)`
> 
> `Seek`将`offset`下一个文件`Read`或`Write`文件上的 设置为`offset`，根据以下方式解释`whence`：0 表示相对于文件的原点，1 表示相对于当前偏移量，2 表示相对于结尾。它返回新的偏移量和错误（如果有）。

# eclipse - 神秘的 Scala + Eclipse 编译错误

> ID：16048679
> 
> 赞同：5
> 
> 时间：2013-04-16T23:03:17.787
> 
> 标签：eclipse, scala

我正在使用 Eclipse 编写一个混合的 Scala 和 Java 程序。一切正常，直到大约一个小时前，当一切都无缘无故地陷入困境时。

Eclipse 中没有报告任何问题（Scala 或 Java），但 Scala 构建器似乎在某处失败。它不再产生任何类文件。现在尝试在 Scala 中运行“Hello World”会产生以下消息：

*项目 'projectname' 包含编译错误（因此，没有生成二进制文件）*

我正在使用 Scala 构建器的默认设置，并且它之前运行良好。我没有改变任何东西。

我曾多次尝试清理和重建项目，但无济于事。构建进度对话框显示 Scala 和 Java 构建都成功。程序的纯 Java 部分编译并成功执行。（我暂时注释掉了 Java 调用 Scala 的地方，因为缺少 Scala 类文件导致“未解析的类”导入错误）

某处是否有 Scala 编译器错误日志可以告诉我出了什么问题？我要开始扯头发了。

我不记得我到底做了什么导致了这种情况，但它不会是什么奇特的东西：编写一些新类，一些基本的重构等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:25:06.190

在构建期间首先查看 Eclipse 控制台输出。你可以看到很多有趣的东西:-)。

只有一个可能的研究方向：

我不是 100% 确定，但 AFAIR Eclipse 使用[Maven](http://maven.apache.org/)构建 Java 和 Scala 源代码（至少在我收到的项目中）。如果您在项目根目录中看到 pom.xml 文件，就是这样，您可以尝试发出类似命令`mvn compile`并检查日志。使用 Maven，可能会从本地 JAR 存储库中的问题开始出现很多问题。

BTW Maven 存储库位于 ~/.m2。当然，这大部分对应于 Unix 安装。

# r - 如何在 LPsolve 中实现所有不同的约束？

> ID：16048680
> 
> 赞同：3
> 
> 时间：2013-04-16T23:03:23.070
> 
> 标签：r, mathematical-optimization, lpsolve

我有一个问题，其解决方案必须在每个变量中包含一个唯一值。例如，24 名战斗机飞行员必须在一天的不同时间出发。所以解决方案必须包含整数 1:24，以某种顺序，根据对顺序的一些约束。

我尝试在 LPSolve 中使用特殊有序集来执行此操作，但我不明白如何使用它。无论如何，我的试验都需要很长时间才能执行，我不敢相信我设置正确。我可以在 1/1000 的时间内使用蛮力解决它。

使用 LPSolve/整数规划来优化一组唯一的相邻整数是否可行？如果是这样，在 R（或 Python）中添加约束以表达 x1 != x2 != x3 != xN 的最佳方法是什么？如果没有，我应该寻找哪种算法来进行这种优化？

这是我到目前为止的代码：

```
library('lpSolveAPI')

people <- c('Joe', 'Bob', 'Dave', 'Mike')
number_of_people = length(people)

model <- make.lp(0, number_of_people)
set.type(model, 1:number_of_people, 'integer')
set.bounds(model, lower=rep(1, number_of_people), 
      upper=rep(number_of_people, number_of_people))

constraint_names <- c('Bob < Mike')
add.constraint(model, c(0, 1, 0, -1), '<=', -0.1)
constraint_names <- append(constraint_names, 'Mike > Joe')
add.constraint(model, c(-1, 0, 0, 1), '>=', 0.1)
dimnames(model) <- list(constraint_names, people)

#not sure about this
#add.SOS(model, 'different positions', type=2, 
#priority=1,columns=1:number_of_people, weights=rep(1, number_of_people))

set.objfn(model, rep(1, length(people)))
lp.control(model, sense='min')
write.lp(model,'model.lp',type='lp')

solve(model)
get.variables(model) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T23:37:52.620

不是求解，而是求解均值所在的`x1, x2, ..., xN`布尔方阵。`Y[i, j]``Y[i, j] == 1``xi``j`

您需要将每个`xi`都分配给一个`j`：

```
sum(Y[i, j]) == 1           # sum over j, for each i 
```

`xi`您将每个都分配给不同的约束`j`写入：

```
sum(Y[i, j]) == 1           # sum over i, for each j 
```

`x1, x2, ..., xN`在将每个约束和目标定义`xi`为虚拟整数变量之后，您的原始约束和目标仍然可以表示（如果需要） ：

```
xi = sum(j * Y[i,j])  # sum over j, for each i 
```

# java - 为 Java Socket 设置端口

> ID：16048690
> 
> 赞同：1
> 
> 时间：2013-04-16T23:04:26.480
> 
> 标签：java, sockets

在创建客户端时，如何知道为 Java 中的 Socket 对象选择的有效端口是什么？

例如，我尝试过`Socket("localhost", 0)`.

但是，由于无法绑定到端口，我最终抛出异常。

我知道当端口为0时ServerSocket绑定到任何空闲端口。初始化套接字时客户端是否有类似的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:07:08.580

从[JavaDocs](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#Socket%28java.net.InetAddress,%20int%29)：

```
public Socket(InetAddress address, int port)
       throws IOException 
```

字符串不是`InetAddress`. 用于从字符串[`InetAddress.getByName()`](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#getByName%28java.lang.String%29)创建一个`InetAddress`（确保字符串是网站的主机名）。

* * *

**注意**：您不能总是自由地选择要使用的端口，在某些系统上，可能有一些范围被保留并被认为是用户应用程序的禁区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T23:10:00.230

客户端需要知道服务器正在监听哪个端口。[What Is a Socket?](http://docs.oracle.com/javase/tutorial/networking/sockets/definition.html)有详细的解释。[以及Read from and Writing to a Socket](http://docs.oracle.com/javase/tutorial/networking/sockets/readingWriting.html)中的示例代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T00:11:07.563

该参数指定要连接的目标端口，而不是要绑定的本地端口。本地端口是自动分配的，你不用担心。您确实需要知道要连接到哪个服务器端口。对目标（连接）端口使用零是没有意义的。

# c# - Session_Start 在 chrome 中被调用太频繁

> ID：16048696
> 
> 赞同：3
> 
> 时间：2013-04-16T23:05:00.957
> 
> 标签：c#, asp.net, asp.net-mvc-3, session

在玩弄`global.asax.cs`文件时，我在其中附加了一些代码

```
protected void Session_Start(object sender, EventArgs e)
{

} 
```

然后开始注意到`Session_Start`在使用 chrome 时每次请求都会调用它。使用 firefox 时，情况并非如此，它只被调用一次。这可能是什么原因造成的？

需要注意的是，这仅在我的开发机器上。我编译并运行代码，打开 Firefox，浏览`http://localhost:63893/`并点击`Session_Start`. 在Firefox中浏览时，它只点击`Session_Start`一次。

当我打开 chrome 并浏览到`http://localhost:63893/`它时，点击`Session_Start`. 然后我输入我的登录数据并点击登录，它再次点击*，*`Session_Start`然后在加载下一页的获取请求时再次点击。我用计数器查看，实际上在那段时间创建了 3 个独特的会话。`Session_Start`

 *我知道有一些消息来源指出，当没有值存储在会话中时，会话被放弃。这对我来说是一个很好的解释，但事实并非如此。我用两种方法反驳了这一点。

方法一：

```
protected void Session_End(){} /*breakpoint*/ 
```

从未解雇，我可以确认旧会话仍然存在。

方法二：

使用`Session["KeepAlive"] = true;`inside of`Session_Start`来查看是否会阻止`_Start`被调用，但它没有。`_End`仍然没有被调用。

两者之间有什么不同或我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T23:45:36.890

感谢评论中的所有帮助。实际上，我们通过聊天和博客文章的链接解决了这个问题：http: [//tobiefysh.blogspot.co.uk/2010/12/chrome-is-eating-my-session-varibles-or.html](http://tobiefysh.blogspot.co.uk/2010/12/chrome-is-eating-my-session-varibles-or.html)

它解释说`there was a 302 response when trying to get to favicon.ico`。基本上，chrome 正在请求 favicon.ico，它正在点击该`RegisterRoutes`方法并使其成为`Session_Start`创建过多会话的方法。

之所以如此，`Session_Start`是因为[google chrome 不会发送带有 favicon 请求的 cookie](https://code.google.com/p/chromium/issues/detail?id=114082)。所以，对于那些虽然这是一个 cookie 问题的人：你是对的。

解决所有烦恼的非常简单的方法，只需将其添加到我的`RegisterRoutes`方法中

```
routes.IgnoreRoute("favicon.ico"); 
```

现在谷歌不再每次他们想要我的图标时都得到一个会话。*

# windows-8 - Windows 8 中的垂直对齐

> ID：16048702
> 
> 赞同：1
> 
> 时间：2013-04-16T23:05:28.970
> 
> 标签：windows-8, keyboard-shortcuts

是否可以在 Windows 8 中垂直捕捉窗口？如果没有，是否有允许实施（或编程）此类命令的应用程序？

在垂直的辅助显示器上编码时，通常我不需要整个屏幕。由于屏幕是垂直的，因此垂直对齐窗口更有意义。从 Windows Aero 继承的默认“捕捉”功能似乎只允许水平捕捉（Win+Left/Right）。

*注意：我知道工具栏中有“显示堆叠的窗口”选项，但这更像是一个笨拙的黑客而不是解决方案。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T22:08:09.610

我使用这个程序，它会记住窗口的最后大小和位置：DeskSoft 的 WindowManager。. . [http://www.desksoft.com/WindowManager.htm](http://www.desksoft.com/WindowManager.htm)

看似相关：在 Excel 2010 中，打开两个电子表格视图选项卡/并排查看/同步滚动视图选项卡/全部排列/平铺 - 水平 - 垂直 - 级联

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-25T03:13:16.077

通过另一个网站并通过玩耍（Windows 8.1）找到了这个......

```
<win><left cursor> - snaps app/window left
<win><right cursor> - snaps app/window right
<win><down cursor> - closes app (minimises window if in Desktop mode)
<win><up cursor> - maximises app/window 
```

此外，如果您有一个应用程序被捕捉，您可以使用 {win}{cursor key} 将其从一侧移动到另一侧等。如果您有两个捕捉，添加第三个可以使用光标键移动，然后输入到 (重新）放置一个捕捉的应用程序。

# objective-c - 调用 AFNetworking getPath 时出错

> ID：16048706
> 
> 赞同：1
> 
> 时间：2013-04-16T23:05:47.090
> 
> 标签：objective-c, ios6, afnetworking

我使用 AFNetworking 与我的 Web 服务进行通信，代码如下：

```
-(NSMutableDictionary*)getData:(NSString*)userID{

__block NSMutableDictionary *data;
AFHTTPClient *httpClient = [[AFHTTPClient alloc]initWithBaseURL:[NSURL URLWithString:@"http://webservice.com/api/"]];

[httpClient setParameterEncoding:AFJSONParameterEncoding];
[httpClient registerHTTPOperationClass:[AFJSONRequestOperation class]];

[httpClient getPath:@"data" parameters:@{@"type":@"1", @"id":userID}
success:^(AFHTTPRequestOperation *operation, id JSON) {
    data = (NSMutableDictionary *) JSON;
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error occured!");
}];

return data; 
```

}

调用此方法给我以下错误： **[__NSPlaceholderDictionary initWithObjects:forKeys:count:]: 尝试从对象 [0] 插入 nil 对象'**

这是什么意思？这不是失败，所以我不确定 Web 服务调用是否出错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T23:22:02.337

确保 userID 不为零。

首先记录请求负载和服务器响应通常是一个好习惯，以确保一切正常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-27T17:47:38.360

我的猜测是您将`JSON`变量转换为`NSDictionary`. 这是我所指的行：

```
data = (NSMutableDictionary *) JSON; 
```

相反，您可能想尝试：

```
[NSJSONSerialization JSONObjectWithData:JSON
                                options:kNilOptions
                                  error:&error]; 
```

然后将其保存到您的`data`变量中。

# php - 仅填写表格的 PHP 电子邮件

> ID：16048710
> 
> 赞同：0
> 
> 时间：2013-04-16T23:06:03.640
> 
> 标签：php, email

一直在努力只发送人们填写的字段。这是一个带有文本字段的简单订单。但我希望它只有那些在字段中的字段才能发送到我的警报电子邮件。我尝试了主题[“PHP 表单：仅填充字段的成功电子邮件”](https://stackoverflow.com/questions/10941833/php-form-success-email-with-only-filled-fields)的代码，但是当我这样做时，我的 php 脚本崩溃了。这是我尝试任何修改之前的代码。这封电子邮件很好，只是它包含了我只希望填写的所有字段。请帮助我在 php 中完全是菜鸟。所有帮助表示赞赏。

```
<?
$silver_name_badges = !empty($_POST['silver_name_badges']) ? ($_POST['silver_name_badges'])) : false;
$silver_name_badges = $_POST['silver_name_badges'];
$coffee_mug = $_POST['coffee_mug'];
$plastic_bag = $_POST['plastic_bag'];
$paper_bag = $_POST['paper_bag'];
$candy = $_POST['candy'];
$moist_towlette = $_POST['moist_towlette'];
$notepad_and_pen = $_POST['notepad_and_pen'];
$tuck_box = $_POST['tuck_box'];
$red_tie = $_POST['red_tie'];
$cap = $_POST['cap'];
$name = $_POST['Attention_To'];
$red_lanyard = $_POST['red_lanyard'];
$white_lanyard = $_POST['white_lanyard'];
$green_lanyard = $_POST['green_lanyard'];
$black_lanyard = $_POST['black_lanyard'];
$LC2415 = $_POST['LC2415'];
$FOM_2NTRI = $_POST['FOM_2NTRI'];
$ASTRO_165WMT = $_POST['ASTRO_165WMT'];
$FOL_AJ3015 = $_POST['FOL_AJ3015'];
$ACIES_NT = $_POST['ACIES_NT'];

// Please specify your Mail Server - Example: mail.yourdomain.com.
ini_set("SMTP","mail.ama-japan.com");

// Please specify an SMTP Number 25 and 8889 are valid SMTP Ports.
ini_set("smtp_port","25");

// Please specify the return address to use
ini_set('sendmail_from', 'ravila@ama.com');

// Set parameters of the email
$to = "joe@ama.com";
$subject = "Ama Promo Items Ordered";
$from = " jurt@ama.com";
$headers = "From: $from";

$message = "";
$message .= "Order has been placed. Attn to: $name .\n
Items:\n";

if($Phone)
    $Body .= "Phone: "; $Body .= $Phone; $Body .= "\n";

$message .="
Silver Name Badges: $silver_name_badges\n
Coffee Mug: $coffee_mug\n
Plastic Literature Bag: $plastic_bag\n
Amada Bag: $paper_bag\n
Candy: $candy\n
Notepad & Pen: $notepad_and_pen\n
Tuck Box: $tuck_box\n
Amada Tie: $red_tie\n
Candy: $candy\n
Moist Towlette: $moist_towlette\n
Cap: $cap\n
Lanyard: 
         Red - $red_lanyard
         White - $white_lanyard
         Green - $green_lanyard
         Black - $black_lanyard\n

Rock Glass: 
            LC2415 - $LC2415
            FOM 2NTRI - $FOM_2NTRI
            ASTRO 165WMT - $ASTRO_165WMT
            FOL AJ3015 - $FOL_AJ3015
            ACIES NT - $ACIES_NT";

// Mail function that sends the email.
mail($to,$subject,$message,$headers);
  header('Location: thank-you.html');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:49:50.203

这些错误可能与未设置的 POST 变量有关。

一个循环怎么样？它只会使用发送过来的内容。

```
$message = "";
$message .= "Order has been placed. Attn to: $name .\n
Items:\n";

foreach ($_POST as $fieldName => $fieldValue){
    if (!empty($fieldValue))
        $message .= "   ". str_replace('_',' ',$fieldName) .": $fieldValue\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:03:56.237

好的，我添加了这个并且效果很好。电子邮件如何返回带有下划线的字段名称。如何发送不带下划线？：

```
<?php
//$silver_name_badges = !empty($_POST['silver_name_badges']) ? ($_POST['silver_name_badges'])) : false;
$SilverNameBadges = $_POST['Silver Name Badges'];
$CoffeeMug = $_POST['coffee_mug'];
$PlasticLiteratureBag = $_POST['plastic_bag'];
$paper_bag = $_POST['paper_bag'];
$candy = $_POST['candy'];
$moist_towlette = $_POST['moist_towlette'];
$notepad_and_pen = $_POST['notepad_and_pen'];
$tuck_box = $_POST['tuck_box'];
$red_tie = $_POST['red_tie'];
$cap = $_POST['cap'];
$name = $_POST['Attention_To'];
$red_lanyard = $_POST['red_lanyard'];
$white_lanyard = $_POST['white_lanyard'];
$green_lanyard = $_POST['green_lanyard'];
$black_lanyard = $_POST['black_lanyard'];
$LC2415 = $_POST['LC2415'];
$FOM_2NTRI = $_POST['FOM_2NTRI'];
$ASTRO_165WMT = $_POST['ASTRO_165WMT'];
$FOL_AJ3015 = $_POST['FOL_AJ3015'];
$ACIES_NT = $_POST['ACIES_NT'];

// Please specify your Mail Server - Example: mail.yourdomain.com.
ini_set("SMTP","mail.amada-america.com");

// Please specify an SMTP Number 25 and 8889 are valid SMTP Ports.
ini_set("smtp_port","25");

// Please specify the return address to use
ini_set('sendmail_from', 'ravila@amada.com');

// Set parameters of the email
$to = "ravila@amada.com";
$subject = "Amada Promo Items Ordered";
$from = " nostrowski@amada.com";
$headers = "From: $from";

$message = "";
$message .= "Order has been placed. Attn to: $name .\n
Items:\n";
foreach ($_POST as $fieldName => $fieldValue){
    if (!empty($fieldValue))
        $message .= "   $fieldName: $fieldValue\n";
}

// Mail function that sends the email.
mail($to,$subject,$message,$headers);
  header('Location: thank-you.html');
?> 
```

# validation - AngularJS ng-value 布尔验证

> ID：16048718
> 
> 赞同：2
> 
> 时间：2013-04-16T23:06:55.830
> 
> 标签：validation, angularjs

具体来说：我有两个单选按钮，它们的 ng-model 值必须是布尔值。由于这对于普通的 html 值属性是不可能的，我发现有用的 Angularjs ng-value。Problem is when I want to do some validation, when radio button ng-value="false" is selected it recognizes it as an empty ng-model and we have validation error.

**示例**：[http ://plnkr.co/edit/lvdNHZoSSN1nM6uLyc0Q?p=preview](http://plnkr.co/edit/lvdNHZoSSN1nM6uLyc0Q?p=preview)

任何线索如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T03:48:52.567

这是一个错误。

`value="true/false"`将不起作用，因为您的无线电输入在加载模型时不会被初始化和正确检查，但`ng-value="true/false"`不会起作用，因为“错误”选择会导致表单无效。

我遇到了同样的问题并将其报告为问题，但由于不知道何时会解决，我也想出了一个解决方法：[ng-boolean-radio](https://github.com/michaelmoussa/ng-boolean-radio)

它基本上将模型的布尔真/假值转换为字符串“真”/“假”值，与表单的字符串`value="true/false"`属性相匹配。这将允许在模型加载时默认检查相应的无线电输入。它还允许您保存“假”值，因为`"false" != false`.

最后，它通过将字符串“true”/“false”值转换回布尔值 true/false 来保留布尔数据类型，然后再将它们保存到模型中。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T23:42:17.970

[http://plnkr.co/edit/Y5vDuTug0kvS3Ut58Lz9?p=preview](http://plnkr.co/edit/Y5vDuTug0kvS3Ut58Lz9?p=preview)

问题出在`required`属性上。

我相信使用`ng-required="!user.gender"`是你正在寻找的。

编辑：似乎`ng-required`，虽然稍微好一点，但仍然不能完全工作。

我的建议是完全省略`require`并使用默认值初始化您的模型：

`{gender: true}`（`false`也可以）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T14:06:50.973

我也有这个问题。Michael Moussa 的指令非常适合调试复选框/单选按钮的实际`modelValue`情况。事实证明，a到达`modelValue`了复选框/单选按钮。更新（从 1.2.0）到**angular 1.2.5**为我解决了这个问题。`false``undefined`

# c# - 在没有 \0027 的情况下将字符串序列化为 JSON

> ID：16048722
> 
> 赞同：5
> 
> 时间：2013-04-16T23:07:07.637
> 
> 标签：c#, asp.net, serialization

一个相当直接的问题。我有以下代码

```
var json = new JavaScriptSerializer();
var test = json.Serialize("'"); 
```

现在，Visual Studio 局部变量 watch 显示`test`包含一个字符串 value `"\"\\u0027\""`。是否有可能，使用 ASP.NET 中的构建来返回没有格式的`Serialize();`序列化字符串？`\0027`

期望的结果`test`是`"\"\'\""`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:24:37.047

正如评论者所提到的，这真的无关紧要，因为`\u0027`字面意思是 Javascript 中的单引号。

但是，如果这让您感到困扰，您可能想尝试使用 JSON.NET，它会在编码字符串中保留单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T20:31:58.330

尝试以下

`var json = JsonConvert.SerializeObject(obj);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-21T21:17:20.290

序列化后，您必须使用此表达式替换您的 JSON 字符串。这是我的代码示例以及我在提供 json 输出时使用的函数。

```
string json = obj.ToJSON();

json = System.Text.RegularExpressions.Regex.Unescape(json);

File.WriteAllText("<DirectoryFile>.json", json);

public static string ToJSON(this object obj)
{
    var serializer = new JavaScriptSerializer();
    serializer.MaxJsonLength = Int32.MaxValue;
    JavaScriptSerializer js = new JavaScriptSerializer();

    return js.Serialize(obj);
} 
```

# php - mysql 更新不能通过 php 脚本工作，尽管它可以通过 mysql 终端工作

> ID：16048724
> 
> 赞同：0
> 
> 时间：2013-04-16T23:07:09.860
> 
> 标签：php, mysql

我有一个 mysql 表，其中有一列名为已批准。如果我使用 mysql 脚本 update tablename set columnname=1 where id=x where x is an integer number，一切正常。问题是当我尝试通过 PHP 使用这个脚本时，我有以下脚本：

```
$id = mysql_escape_string($_GET["id"]);

if(true){
    $update = 'update tablename set approved=1 where id='.$id;
    mysql_query($update);
    echo $update;
    echo '<br />database updated :)';
} else {
    echo 'An error occured';
}
//mysql_close($con); 
```

更新不起作用的地方..

在我看来，我在某个地方有问题，所以为什么这不起作用？你有什么想法？？

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T23:12:31.947

代替

```
mysql_query($update); 
```

尝试这个：

```
$result = mysql_query($update);
if (!$result) {
    die('Invalid query: ' . mysql_error());
} 
```

-- 你会看到你的查询出了什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T23:14:18.017

启用 mysql_error() 函数后发现我没有正确建立数据库连接，这导致了问题！

# html - 在 bxSlider 上放置一个 Navigation Div

> ID：16048726
> 
> 赞同：1
> 
> 时间：2013-04-16T23:07:20.967
> 
> 标签：html, css

我希望在 bxslider 顶部放置一个导航 div 层。我已经使用负值和 z-index:9999 完成了通常的 margin-top 技巧，以将导航保持在滑块的顶部，但它仍然消失在滑块下方。有没有办法把它放在上面？

这是我现有的 CSS 代码：

```
 .navigation {
    width:100%;
    margin-left:26px;
    margin-top:-75px;
    z-index:9999;
}
.navigationTab {
    background-color:#efefef;
    -webkit-border-top-left-radius: 2px;
    -webkit-border-top-right-radius: 2px;
    -moz-border-radius-topleft: 2px;
    -moz-border-radius-topright: 2px;
    border-top-left-radius: 2px;
    border-top-right-radius: 2px;
    display:inline-block;   
    padding-left:3px;
    font-size:10px;
    color:#212121;
    text-transform:uppercase;
    height:31px;
    line-height:31px;
    z-index:9999;
}

.navigationTabRight {
    background:url(images/tabRight.png) no-repeat bottom;
    width:20px;
    display:inline-block;
    margin-right:8px;
    margin-left:-5px;   
    height:26px;
    z-index:9999;
} 
```

和 HTML：

```
<div class="slider">
            <ul class="bxslider">
                <li><img src="images/HomeBanners/1.jpg" /></li>
                <li><img src="images/HomeBanners/2.jpg" /></li>
            </ul>
        </div>
        <div class="navigation">
            <div class="navigationTab">Home</div> <div class="navigationTabRight">&nbsp;</div>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:09:00.490

您不能`z-index`在没有定位元素的情况下使用（默认的静态除外），因此只需添加`position: relative;`以启用 z-index，您应该会看到预期的结果。现在你的元素都没有定位，所以 z-index 不起作用。

[http://www.w3.org/TR/CSS2/visuren.html#z-index](http://www.w3.org/TR/CSS2/visuren.html#z-index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T07:50:06.097

为导航中的所有元素设置 z-index 将修复它

```
.navigation * {
    z-index:9999;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:56:22.017

```
.slider {
    position:relative;
    z-index:1;   
} 

.navigation {
    position: relative;   
    width:100%;
    margin-left:26px;
    margin-top:-75px;
    z-index:9999;
}

.navigationTab {
    background-color:#efefef;
    -webkit-border-top-left-radius: 2px;
    -webkit-border-top-right-radius: 2px;
    -moz-border-radius-topleft: 2px;
    -moz-border-radius-topright: 2px;
    border-top-left-radius: 2px;
    border-top-right-radius: 2px;
    display:inline-block;   
    padding-left:3px;
    font-size:10px;
    color:#212121;
    text-transform:uppercase;
    height:31px;
    line-height:31px;
    z-index:9999;
}

.navigationTabRight {
    background:url(images/tabRight.png) no-repeat bottom;
    width:20px;
    display:inline-block;
    margin-right:8px;
    margin-left:-5px;   
    height:26px;
    z-index:9999;
} 
```

好的做法是使用`<li>`或`<nav>`标记来创建菜单或导航。工作代码演示在这里：http: [//jsfiddle.net/B3jZ5/1/](http://jsfiddle.net/B3jZ5/1/)

# html - 在利用验证数据属性的 HTML5 文本框上使用 Sahi 函数 _setValue() 时遇到问题

> ID：16048730
> 
> 赞同：0
> 
> 时间：2013-04-16T23:07:56.503
> 
> 标签：html, sahi

我尝试在我的 HTML5 登录页面上的文本框中插入文本，但它不起作用。控制器发现元素没问题，当脚本被播放时，它甚至将案例记录为成功，但没有填充文本。

这是文本框的来源：

`<input id="Username" class="standard defaultfocus input-validation-error" type="text" value="" name="Username" maxlength="100" data-val-required="Please enter a valid Email Address" data-val-regex-pattern="^[a-zA-Z0-9]+(\.{0,1}[a-zA-Z0-9_%+-]+)*\@[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)+$" data-val-regex="Please enter a valid Email Address" data-val="true"></input>`

这是Sahi脚本：

`_setValue(_textbox("Username"), "email@email.com");`

知道如何让 Sahi 填写这个 texbox 吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:29:57.450

此问题的解决方案需要编辑与 Sahi 打包的 .js 文件之一。此处描述了更改：

[http://sahi.co.in/forums/discussion/4790/solution-to-run-the-script-on-firefiox-20-#Item_1](http://sahi.co.in/forums/discussion/4790/solution-to-run-the-script-on-firefiox-20-#Item_1)

# objective-c - OS X 启动代理如何保持设置/状态？

> ID：16048732
> 
> 赞同：2
> 
> 时间：2013-04-16T23:08:00.493
> 
> 标签：objective-c, macos

我正在编写一个 OS X 启动代理（它会监视 FSEvents）；因此，它没有 UI，也不是从捆绑包启动的——它只是一个程序。相关[文档和示例代码](http://developer.apple.com/library/mac/#featuredarticles/FileSystemEvents/_index.html) 说明了在调用之间保持 FS 事件 ID，并使用 `NSUserDefaults`. 这显然是 Right Thing To Do(TM)。

*Preferences and Settings Programming Guide*`NSUserDefaults`中 的文档 似乎是适合阅读的内容。这仅显示 Application 和 Global 域是持久的，但（很明显）只有 Application 域对应用程序是可写的。但是，应用程序域中的首选项是在 ApplicationBundleIdentifier 上键入的，而启动代理则没有。所以我不知道这样的代理应该如何保持状态。

 *我能想到的只是工作中的`Label`in`launchd`可以充当 ApplicationBundleIdentifier ——它至少具有正确的形式。但是我在文档中看不到任何正确的提示。

显而易见的（unix-normal）事情是写入一个点文件 in `$HOME`，但这可能不是 Cocoa 方式。谷歌搜索'osx daemon preferences'之类的，没有显示任何有用的东西，否则我的google-fu今天很遗憾缺乏。谷歌搜索“设置应用程序包标识符”也不太可能出现。 `NSUserDefaults:persistentDomainForName`看起来它应该是相关的，但我无法从它的方法文档中弄清楚它的意图。

我在[这里发现了一个](https://stackoverflow.com/questions/14315048/)似乎相关的问题，但是虽然它非常接近，但它并没有说明守护程序从哪里获取其标识符。

我在 Objective-C 和 Cocoa 方面的经验有限，这意味着我现在相当怀疑自己找错了树，但真的不知道下一步该往哪里看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:18:13.487

即使在单文件可执行文件中，您也可以（并且 imo 应该）拥有 Info.plist。（请参阅[http://www.red-sweater.com/blog/2083/the-power-of-plist](http://www.red-sweater.com/blog/2083/the-power-of-plist)）

然而， NSUserDefaults 更值得怀疑。从概念上讲，它适用于用户设置，而不是内部状态。但是，没有真正的理由不适合这个，所以我可能会继续这样做。*

# asp.net-web-api - 传递通用列表 通过浏览器栏到 WebApi 方法

> ID：16048734
> 
> 赞同：0
> 
> 时间：2013-04-16T23:08:25.003
> 
> 标签：asp.net-web-api, asp.net-mvc-routing, restful-url

抱歉，如果您认为这与此重复，[但](https://stackoverflow.com/questions/13736680/passing-a-liststring-to-an-mvc-web-api-method-using-the-browser-bar)它并没有解决我的问题。

我有一个 WebApi 方法，例如：

```
[AcceptVerbs("GET")]
[ActionName("Search")]
public EmpResults GetSearchResults([FromUri] string country, [FromUri] List<int> depts)
{
    EmpResults emps = m_controller.Search(country, depts);
    return emps;
} 
```

路由表如下所示：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.MapHttpRoute("IMO Route",
            "employees/search/{country}/{depts}",
            new
            {
                controller = "Employee",
                action = "Search"
            });
} 
```

我不确定如何通过简单的浏览器栏测试这个 WebApi？

我已经成功地尝试了这个，它返回了部门 10 的员工列表：

```
http://localhost/WebApi.Employee/employee/search/brazil/10?connString=Provider... 
```

但我无法找到一种方法来传递像 10、20、40 这样的部门列表。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:49:45.907

一种方法是删除`{depts}`路由中的 并传入`depts`查询字符串参数：

网址：

`http://localhost/WebApi.Employee/employee/search/brazil?depts[]=10&depts[]=11&depts[]=12&connString=Provider...`

路线：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.MapHttpRoute("IMO Route",
            "employees/search/{country}",
            new
            {
                controller = "Employee",
                action = "Search"
            });
} 
```

# r - R中的Points3D函数

> ID：16048735
> 
> 赞同：1
> 
> 时间：2013-04-16T23:08:38.580
> 
> 标签：r

我在 R 中安装了 scatterplot3d 包。当我使用 library(scatterplot3d) 或 require(scatterplot3d) 加载它时，我能够创建一个 3d 散点图。但是，当我尝试使用 points3d 函数时，出现以下错误：

`Error: could not find function "points3d"`

我尝试重新安装包无济于事（在 R 中和`R CMD INSTALL`在命令行中使用的压缩包）。我正在运行 Xubuntu 12.10 内核 3.8.7-030807-generic 和 R 版本 2.15.3 (2013-03-01)。

`locate points3d`在命令行中输入没有结果。

我还尝试了 par.mar 默认设置命令，如手册中所述。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T23:33:12.483

`scatterplot3d`对通常的 R 实践做了一个有趣的面向对象的转变。从函数调用返回的对象包括 points3d 函数作为对象的内置部分，但它不在 Global 环境中。旨在使用“附加”函数添加到现有绘图对象，该函数不是自由生活的有机体，而是仅存在于对象围栏中的驯养动物，因此您可以使用它作为您的语法：

```
 object$point3d(x,y,z) 
```

我确实“感受到你的痛苦”，但可以向你展示如何克服挫折感，因为我昨天创建了一个工作示例：[使用 scatterplot3d 绘制球体](https://stackoverflow.com/questions/16026610/using-scatterplot3d-to-plot-a-sphere/16026987#16026987)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-03T12:22:44.927

您需要通过以下方式以通常的方式安装包[plot3D](https://www.rdocumentation.org/packages/plot3D/versions/1.1.1/topics/plot3D-package)

```
install.packages("plot3D") 
```

然后你只需要导入，生成数据集并使用函数`points3D()`

```
library(plot3D)
x = rnorm(100)
y = rnorm(100)
z = x + y + rnorm(100,0,1)

points3D(x, y, z, col = rainbow(1000)) 
```

这是上面代码生成的图

[![点3D R](https://i.stack.imgur.com/fA5y3.png)](https://i.stack.imgur.com/fA5y3.png)

# scala - 如何使用 Scala2.10+Play2.1+Jerkson？

> ID：16048744
> 
> 赞同：0
> 
> 时间：2013-04-16T23:09:38.383
> 
> 标签：scala, playframework, playframework-2.1, scala-2.10, jerkson

似乎 Jerkson 在 Play2.1 (Scala 2.10) 中不再可用，我在 Internet 上找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:19:59.107

Play Framework 2.1.0+ 在幕后使用 Jackson，不再基于 Jerkson。Scala 2.10 没有 Jerkson 的官方端口，但你可以试试[这个](https://github.com/randhindi/jerkson)fork 的运气。

# php - 通过 javascript sdk 和应用程序 ID 向 facebook 帖子发表评论时遇到大麻烦

> ID：16048746
> 
> 赞同：0
> 
> 时间：2013-04-16T23:09:53.493
> 
> 标签：php, javascript, facebook, facebook-javascript-sdk

首先，我想做的是，我网站的用户将通过 javascript sdk 在我的网站上显示的 facebook 个人资料/页面/组提要帖子发表评论这是我的代码 -

```
FB.init({
          appId   : 'APPID', 
          status  : true,            
          cookie  : true,
          xfbml   : true
        });

        FB.login(function(response) {
            if (response.status=='connected') {
                if (response.authResponse.accessToken) {
                   var token =response.authResponse.accessToken;                                                     
                        FB.api('/POSTID/comments?access_token='+token+'', 'POST',{ message:'test' }, function(response) {
                          if (!response || response.error) {
} else { alert('success'); } ........rest of codes 
```

所以一切正常。在我的 facebook 应用程序设置的“带有 Facebook 登录的网站”部分中，网站 url 设置为`http://localhost/joomla`。我在 joomla 网站模块中所做的一切，我将把它安装在我所有的 joomla 网站中。我安装在我的一个在线网站，当我尝试以其他用户身份发表评论时，我收到如下错误 -

“应用程序配置不允许给定 URL。：应用程序的设置不允许一个或多个给定 URL。它必须与网站 URL 或画布 URL 匹配，或者域必须是应用程序域之一的子域。”

那是因为我的 fb 应用程序的站点 url 与我安装此模块的在线站点 url 不匹配。所以看起来我只能通过在 fb 应用程序的站点 url 框中添加该站点 url 在我的一个站点中使用该模块。所以如何克服这个问题？？当我的用户将评论发布到个人资料或页面或群组帖子时，我可以使用没有应用程序 ID 的 javascript sdk 吗？请注意，我正在生成访问令牌来实现这一点，情况是这个模块将用于其他一些不是我的网站，所以问题也是如此。请帮助我详细说明。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T07:48:13.613

您可以在该`App Domains`字段中将多个应用程序域添加到您的 facebook 应用程序。
这将使您可以在多个站点上使用该应用程序。

# html - 旧版浏览器需要 HTML5 替换输入标记

> ID：16048747
> 
> 赞同：-3
> 
> 时间：2013-04-16T23:09:53.953
> 
> 标签：html, forms, input, internet-explorer-9, required

我已经将所需的标签实现到整个站点的一系列表单和输入字段中。我想知道他们是否是一个脚本，可以在旧浏览器（例如 IE9）上自动执行 HTLM5 所需的标记功能。这样我就不必编辑表单或输入标签，希望只在标题中包含脚本/css 文件。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:18:01.690

您正在寻找的是一些表单验证脚本/插件。虽然所有这些验证器都提供了`required`功能，但几乎所有这些验证器也都提供了更多额外的验证任务。

如果您使用 jQuery，则有[validate](http://docs.jquery.com/Plugins/Validation)插件

如果您不使用 jQuery，请查看[HTML5 polyfills 列表](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills#web-forms)

# php - 向页面发送刷新请求

> ID：16048751
> 
> 赞同：-1
> 
> 时间：2013-04-16T23:10:12.280
> 
> 标签：php, html, mysql

服务器上的进程完成后，我想刷新页面。我不知道从哪里开始或从哪里开始我的搜索。

我必须遵循完美的方案：

1.  用户通过网站将文件上传到服务器
2.  服务器检查文件是否有效并将文件复制到另一个文件夹。
3.  在另一个文件夹中，文件必须等待由计划每 1 分钟（或任何间隔）运行的程序（Filemaker Server）处理。
4.  程序完成处理文件后，它会用“0 无错误”或进程返回的任何内容标记 MySQL 数据库条目。

到目前为止，一切都很好。我希望网站的用户知道该过程何时结束。我已经有一个倒计时到 0 的计时器，这是处理开始之前的秒数。然后向用户呈现文本“处理开始”。

现在，我想在处理结束时向客户端浏览器发送刷新请求。这应该是一些批处理文件命令或 mysql 函数；我真的没有头绪。我确实尝试`<META HTTP-EQUIV="REFRESH" CONTENT="1";URL=home.php">`过，但刷新（每 1 秒或任何其他时间间隔）是不可接受的，因为用户必须通过表单上传文件，不幸的是，每当刷新发生时，该表单就会被清除。（当服务器请求刷新页面时，这不是问题，因为一次只能进行一个上传过程。）

提前感谢您对此事的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:20:03.653

使用 JavaScript：

```
<script rel=JavaScript>window.location="home.php";</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:14:08.020

你读过 AJAX 吗？

我认为[jQuery Ajax Upload](https://github.com/codler/jQuery-Ajax-Upload)是您所需要的一切。在服务器端，你得到脚本，处理它，上传它，在数据库中插入一些关于它的信息，然后你通知客户端上传结束，插入成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T14:02:19.817

根据 Ivo 的建议，我最终决定使用 AJAX。它相当容易使用！谢谢！

# android - 等到 su 中的命令完成

> ID：16048754
> 
> 赞同：5
> 
> 时间：2013-04-16T23:10:40.960
> 
> 标签：android

我在 Android 中运行一个进程，每次用户摇晃手机时`su`，它本身都会运行 screencap 实用程序 ( )。`/system/bin/screencap`

我想等待每个屏幕截图完成，然后我才允许用户通过摇晃手机来获取另一个屏幕截图。但是，使用`process.waitFor()`对我不起作用，因为我不想关闭`su`进程并为每个屏幕截图重新打开它（因为它会提示 SuperUser 应用程序的 toast，这会干扰屏幕截图）

到目前为止，我有：

在服务中`onCreate()`：

```
p = Runtime.getRuntime().exec("su");
os = p.getOutputStream(); 
```

在摇动侦听器处理程序中：

```
if (isReady) {
  isReady = false;
  String cmd = "/system/bin/screencap -p " + nextScreenshotFullPath + "\n";
  os.write(cmd.getBytes("ASCII"));
  os.flush();

  [INSERT MAGIC HERE]
  isReady = true;

  Bitmap bm = BitmapFactory.decodeFile(nextScreenshotFullPath);
  // Do something with bm
} 
```

我正在寻找 [INSERT MAGIC HERE] 的地方 - 等待`screencap`完成的一段代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:10:08.120

我找到了一个方法！`0`我使用 shell 命令`echo -n 0`（以防止换行）回显单个字符（例如， ） `-n`，然后将其读回。`screencap`在命令完成之前，shell 不会打印字符，并且该`InputStream#read()`方法将阻塞，直到它可以读取该字符......或者在代码中说话：

在服务的 onCreate() 中：

```
p = Runtime.getRuntime().exec("su");
os = p.getOutputStream();
is = p.getInputStream(); // ADDED THIS LINE // 
```

在摇动侦听器处理程序中：

```
if (isReady) {
  isReady = false;
  String cmd = "/system/bin/screencap -p " + nextScreenshotFullPath + "\n";
  os.write(cmd.getBytes("ASCII"));
  os.flush();

  // ADDED LINES BELOW //
  cmd = "echo -n 0\n";
  os.write(cmd.getBytes("ASCII"));
  os.flush();
  is.read();
  // ADDED LINES ABOVE //

  isReady = true;

  Bitmap bm = BitmapFactory.decodeFile(nextScreenshotFullPath);
  // Do something with bm
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:14:33.230

为什么不循环直到文件大小不变？您已经在分叉命令行进程:)

如果你只想要一个屏幕截图，你可以通过编程来做到这一点：

```
//Get a screenshot of the screen
private Bitmap getScreenShot()
{
    View v = findViewById(R.id.your_top_level_layout_or_view);

    //Save the bitmap
    v.setDrawingCacheEnabled(true);
    Bitmap screenShot = v.getDrawingCache();
    Bitmap nonRecyclableScreenShot = screenShot.copy(screenShot.getConfig(), false);

    //Restore everything we changed to get the screenshot
    v.setDrawingCacheEnabled(false);

    return nonRecyclableScreenShot;
} 
```

# java - 地图的通用方法

> ID：16048756
> 
> 赞同：0
> 
> 时间：2013-04-16T23:11:05.917
> 
> 标签：java, generics

这两种方法的实现完全相同，除了参数部分。我想知道我是否可以有一个通用版本的 Java 方法来将这两种方法统一为一个。有可能还是最好的方法是什么？我正在考虑使用通用 T 或 Object 类型作为这两种情况的映射键。

```
void mapPopulator1 (Map<String, Integer> map, String key)
{
    Integer value = map.get(key);
    if (value != null) {
        value = Integer.valueOf(value.intValue() + 1);
    }
    else {
        value = Integer.valueOf(1);
    }
    map.put(key, value);
}

void mapPopulator2 (Map<EventObj, Integer> map, EventObj key)
{
    Integer value = map.get(key);
    if (value != null) {
        value = Integer.valueOf(value.intValue() + 1);
    }
    else {
        value = Integer.valueOf(1);
    }
    map.put(key, value);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T23:12:30.530

是的，你可以有一个通用的方法。

```
<T> void mapPopulatorGeneric(Map<T, Integer> map, T key) 
```

这用 声明了泛型类型`T`，`<T>`然后将其用于您的参数类型。

# parsing - 鱼函数选项/参数解析器

> ID：16048757
> 
> 赞同：5
> 
> 时间：2013-04-16T23:11:19.247
> 
> 标签：parsing, fish

似乎有一些工作正在进行中以在将来添加对此的支持：

[https://github.com/fish-shell/fish-shell/issues/478](https://github.com/fish-shell/fish-shell/issues/478)
[https://github.com/xiaq/fish-shell/tree/opt-parse](https://github.com/xiaq/fish-shell/tree/opt-parse)

但与此同时，处理此问题的推荐方法是什么？我应该只解析 $argv 吗？如果是这样，您有一些提示/最佳做法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-07-22T15:11:57.067

解析`$argv`适用于基本场景，但否则会变得乏味且容易出错。

在 fish 有自己的参数解析解决方案之前，社区创建了：

*   [getopts.fish](https://github.com/jorgebucaran/getopts)

**从 fish 2.7.0 开始，您可以使用 fish 的内置选项解析器：[argparse](https://fishshell.com/docs/current/commands.html#argparse)**

```
function foo --description "Example argparse usage"
  set --local options 'h/help' 'n/count=!_validate_int --min 1'

  argparse $options -- $argv

  if set --query _flag_help
    printf "Usage: foo [OPTIONS]\n\n"
    printf "Options:\n"
    printf "  -h/--help       Prints help and exits\n"
    printf "  -n/--count=NUM  Count (minimum 1, default 10)"
    return 0
  end

  set --query _flag_count; or set --local _flag_count 10

  for i in (seq $_flag_count); echo foo; end
end 
```

要查看可能的全部范围，请运行`argparse -h`或`argparse --help`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-21T21:37:56.127

我确定这是否是最佳实践，但与此同时您可以执行以下操作：

```
function options
  echo $argv | sed 's|--*|\\'\n'|g' | grep -v '^$'
end

function function_with_options
  for i in (options $argv)
    echo $i | read -l option value

    switch $option
      case a all
        echo all the things
      case f force
        echo force it
      case i ignore
        echo ignore the $value
    end
  end
end 
```

输出：

```
➤ function_with_options -i thing -a --force
ignore the thing
all the things
force it 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-26T12:10:15.407

你可以这样做：

```
for item in $argv
    switch "$item"
        case -f --foo
        case -b --bar
    end
end 
```

以上不支持在单个参数`-fbz`、选项值或`--foo=baz`、负赋值、选项结尾和破折号中编写短选项，并且始终是参数的一部分。`--foo baz``f baz``--name!=value``--``-``--`

为了解决这些问题，我编写了一个[getopts](https://github.com/bucaran/fish-getopts)函数。

```
getopts -ab1 --foo=bar baz 
```

现在看看输出。

```
a
b    1
foo  bar
_    baz 
```

*左侧*的项目代表与 CLI 关联的选项标志或*键。**右边*的项目是选项*值*。下划线`_`字符是没有键的参数的默认*键*。

用于[`read(1)`](http://fishshell.com/docs/current/commands.html#read)处理生成的流并[`switch(1)`](http://fishshell.com/docs/current/commands.html#switch)匹配模式：

```
getopts -ab1 --foo=bar baz | while read -l key option
    switch $key
        case _
        case a
        case b
        case foo
    end
end 
```

请参阅[文档](https://github.com/fisherman/getopts#getopts)。

# asp.net-mvc - 通过从 asp.net mvc 4 中管理页面的复选框进行控制，在主页中显示/隐藏 div

> ID：16048761
> 
> 赞同：0
> 
> 时间：2013-04-16T23:11:31.860
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我想创建一个控件，允许用户使用 ASP.NET MVC4 在管理站点的主页上显示/隐藏 div 框。例如，如果用户从管理站点选择禁用 div 框，当他返回主页时 div 框将消失，显示 div 框也是如此。

我整天都在寻找正确的答案，但仍然没有找到最佳答案。而且我真的不知道如何在管理站点和主页之间链接。

以下是我的管理页面：

```
<div class="section-header">
    <div class="title">
        <img src="@Url.Content("~/Administration/Content/images/ico-configuration.png")" alt="" />
        @T("Manage LoginBox")
    </div>
    <div class="options">
         <input type="submit" name="save" class="t-button" value="@T("Admin.Common.Save")" />
    </div>
</div>
     <script type="text/javascript">
        @*$(document).ready(function () {

            $("#@Html.FieldIdFor(model => model.EnableLoginBoxAtHomePage)").click(toggleLoginBoxEnabled);

            toggleLoginBoxEnabled();
        });*@

        function toggleLoginBoxEnabled() {
            if ($('#@Html.FieldIdFor(model => model.EnableLoginBoxAtHomePage)').is(':checked')) {
                Response.Write("Surprise");
                $('#pnlShowLoginBoxAtHomePage').show();

            }
            else {
                $('#pnlShowLoginBoxAtHomePage').hide();
            }
        }
        function toggleLoginBoxDisabled() {
            if ($('#@Html.FieldIdFor(model => model.DisableLoginBoxAtHomePage)').is(':checked')) {
                $('#pnlHideLoginBoxAtHomePage').hide();
            }
            else {
                $('#pnlHideLoginBoxAtHomePage').show();
            }
        }
    </script>

@Html.ValidationSummary(false)
<table class="adminContent">
        <tr id="pnlShowLoginBoxAtHomePage" onclick="toggleLoginBoxEnabled">

            <td class="adminTitle">
                @Html.LabelFor(model => model.EnableLoginBoxAtHomePage)
            </td>
            <td class="adminData">
                @Html.EditorFor(model => model.EnableLoginBoxAtHomePage)
                @Html.ValidationMessageFor(model => model.EnableLoginBoxAtHomePage)
            </td>
        </tr>
        <tr id="pnlHideLoginBoxAtHomePage" onclick="toggleLoginBoxDisabled">
            <td class="adminTitle">
                @Html.LabelFor(model => model.DisableLoginBoxAtHomePage)
            </td>
            <td class="adminData">
                @Html.EditorFor(model => model.DisableLoginBoxAtHomePage)
                @Html.ValidationMessageFor(model => model.DisableLoginBoxAtHomePage)
            </td>
        </tr>

</table>

} 
```

这是我想在主页显示/隐藏的 div 框：

```
<div class="block block-loginbox" >
    <div class="title">
        <strong>@T("Login")</strong>
    </div>
    <div class="clear">
    </div>
<div class="listbox" @*id="myloginbox"*@>
    <fieldset class="form-fields returning-wrapper">
            <legend>@T("Account.Login.ReturningCustomer")</legend>
            <dl>
                @using (Html.BeginForm("Login","Customer"))
                {
                    <dd class="message-error">
                        @Html.ValidationSummary(true, T("Account.Login.Unsuccessful").Text)
                    </dd>

                    <dt>
                        @Html.LabelFor(m => m.Email): </dt>
                    <dd>
                        @Html.TextBoxFor(m => m.Email, new { @class = "email", autofocus = "autofocus" })
                        @Html.ValidationMessageFor(m => m.Email)
                    </dd>

                    <dt>
                        @Html.LabelFor(m => m.Password): </dt>
                    <dd>
                        @Html.PasswordFor(m => m.Password, new { @class = "password" })
                        @Html.ValidationMessageFor(m => m.Password)
                    </dd>
                    <dd>
                        @Html.CheckBoxFor(m => m.RememberMe)
                        @Html.LabelFor(m => m.RememberMe)
                    </dd>
                    <dd class="forgot-password">
                        @Html.RouteLink(T("Account.Login.ForgotPassword").Text, "PasswordRecovery")
                    </dd>

                    <dd class="buttons">
                        <input class="button-1 login-button" type="submit" onclick="location.href='@registerUrl'" value="@T("Account.Login.LoginButton")" />
                    </dd>

                }
            </dl>
        </fieldset>
        <div class="clear">
        </div>

     </div>
     </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:23:58.807

您似乎对网站的概念有些误解。您的页面不应该（而且绝对不能）一起通信。每次你请求一个页面时，你都会得到一个新实例，除非它被指定为静态并且......不不不，让我们把它留在那个 - 你不能。

您的“问题”的常见解决方案是实现某种`Settings`文件/数据库表/任何东西，当您将页面保存在管理部分中时，它将存储您的设置。然后，当用户请求您的主页时，您的代码会查看这些设置并确定要执行的操作。

更新：

这不是特定于 asp.net 的，它是所有网站的工作方式。HTTP 是无状态的，您需要以某种方式持久化数据。

基本思想如下所示：

`admin page -> load settings -> modify -> save settings`
`other page -> load settings -> if some setting applies, do something`

您的页面应该与存储机制通信，而不是相互通信，因为正如我已经说过的，除非您违反几乎所有原则，否则这是不可能的。

存储设置的多少并不重要`how`，它可以是一个包含键和值对的简单文件。或者可能是一个 xml 文件，或者一个数据库......你明白了。只要它可用于您需要的页面并且不违反您网站的安全性，就可以了。这一切都取决于您的需求！

希望我不必展示如何连接到数据库并检索值......

# wordpress - 在 wordpress 中仅显示 5 个帖子

> ID：16048764
> 
> 赞同：0
> 
> 时间：2013-04-16T23:11:54.760
> 
> 标签：wordpress, post, thumbnails, show

嗨，我已经编辑并制作了一个响应式主题的模板页面，以制作一些帖子功能图片的缩略图。没关系，我可以看到它们，但即使帖子是 9，我也只能看到 5 个。如果我添加一个，我会看到新的，有类似“仅显示最新 5 个帖子”之类的东西，但我不明白 WHERE ！

```
get_header(); ?> 
```

```
<?php if (have_posts()) : ?>

    <?php while (have_posts()) : the_post(); ?>

    <?php get_template_part( 'loop-header' ); ?>

        <?php responsive_entry_before(); ?>
        <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>       
            <?php responsive_entry_top(); ?>

            <?php get_template_part( 'post-meta-page' ); ?>

            <div class="post-entry">
                <?php the_content(__('Read more &#8250;', 'responsive')); ?>
                <?php wp_link_pages(array('before' => '<div class="pagination">' . __('Pages:', 'responsive'), 'after' => '</div>')); ?>
            </div><!-- end of .post-entry --> 
```

```
 (this is my added code) 
                            <ul>
            <?php  
            $posts = get_posts();
                foreach($posts as $post) : setup_postdata($post);

                ?>
                <li><div class="fotoBoxContent"><a class="fotoBox" href="<?php the_permalink(); ?>"><?php the_post_thumbnail(); the_title(); ?></a></div></li>
            <?php  endforeach; ?>
            </ul> 
```

* * *

```
 <?php responsive_entry_bottom(); ?>      
        </div><!-- end of #post-<?php the_ID(); ?> -->       
        <?php responsive_entry_after(); ?>

        <?php responsive_comments_before(); ?>
        <?php comments_template( '', true ); ?>
        <?php responsive_comments_after(); ?>

    <?php 
    endwhile; 

    get_template_part( 'loop-nav' ); 

else : 

    get_template_part( 'loop-no-posts' ); 

endif; 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:58:03.530

我仍然不确定您到底想要实现什么，但如果您只想拥有主循环中帖子的缩略图，那么您不需要进行额外的查询。

您需要做的就是这样的：

1.) 在`<?php if (have_posts()) : ?>`初始化一些变量之前：

```
$thumb_data=''; 
```

2.) 之后`<?php if (have_posts()) : ?>`

```
$thumb_data='<ul>'; 
```

3.）用这个替换你的“添加的代码”：

```
$thumb_data.='<li><div class="fotoBoxContent"><a class="fotoBox" href="'.get_the_permalink().'">'.get_the_post_thumbnail()." ".get_the_title().'</a></div></li>'; 
```

4.) 在主 while 循环之后，添加：

```
 $thumb_data='</ul>'; 
```

5.) 修剪缩略图列表的所有 HTML 代码将在 中`$thumb_data`，因此只需在您希望 HTML 代码出现的模板中回显此变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:54:45.960

尝试`query_posts( 'posts_per_page=NUMBER_GOES_HERE' );`在`<?php while (have_posts()) : the_post(); ?>`

替换`NUMBER_GOES_HERE`为您想要显示的帖子数量。用于`-1`显示所有帖子

同样在 Wordpress 本身的 Settings->Reading 中有一个可以设置的字段`Blog pages show at most`

# ios - 弹出回视图控制器时 UIButton 文本未更新

> ID：16048769
> 
> 赞同：0
> 
> 时间：2013-04-16T23:12:11.300
> 
> 标签：ios, objective-c, uibutton

1st VC --> 2nd VC --> 3rd VC 然后，从 1st VC <-- 3rd VC 弹出。

在第 3 个 VC 上选择的单元格的文本存储在 NSUserDefaults 中，我使用该文本来填充第 1 个 VC 上的 UIButton 文本。

问题是 UIButton 中的文本没有刷新/更改它从第 3 个 VC 弹出回第 1 个 VC。仅当我停止应用程序然后重新运行（在 XCode 模拟器中）时，才会刷新文本。

所以它正确地保存了 NSUserDefaults 中的文本，但是当它弹回到第一个 VC 时，不知何故 UIButton 没有刷新。

当我弹回第一个 VC 时如何让 UIButton 刷新有什么帮助吗？

-EDIT- 第一个 VC 的代码片段：

```
// Grab text from defaults
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *teamNameOne = [defaults objectForKey:@"teamName1"];
// Set button Title
[buttonOne setTitle:teamNameOne forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:35:04.867

确保在将值保存到`NSUserDefaults`第三个 VC 后进行同步：

```
[defaults synchronize]; 
```

这会使用最近设置的值更新商店。

要检查的其他三件事：

1.  确保在加载第一个 VC 后，您为其设置标题的按钮实际上处于正常控制状态。

2.  确保在第一个 VC 中填充该按钮标题的调用是在 viewWillAppear 中完成的，而不是在 viewDidLoad 中完成的。使用导航控制器时，viewDidLoad 不会在弹回已加载的视图时被调用。还要确保调用超级：

    ```
    -(void)viewWillAppear:(BOOL)animated {
        [super viewWillAppear:animated];

        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        NSString *buttonTitle = [defaults valueForKey:@"ButtonTitle"];

        [self.myButton setTitle:buttonTitle forState:UIControlStateNormal];
    } 
    ```

3.  确保在弹回第一个 VC 之前填充 NSUserDefaults 存储。

这是我刚刚构建的一个项目，可以满足您的需要（非常简单的项目）： [https ://dl.dropboxusercontent.com/u/3660978/SO_ViewControllerTransition.zip](https://dl.dropboxusercontent.com/u/3660978/SO_ViewControllerTransition.zip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T01:38:18.127

这不是 NSUserDefaults 的好用处——它不应该是你在应用程序中传递的值的临时保存位置。

您应该使用 unwind segue 来执行此操作。您可以在 prepareForSegue 方法中将数据传回 VC1，就像普通的前向 segue 一样。您还将在 VC1 中拥有一个方法（将 unwind segue 连接到的方法），该方法可用于更新该控制器中的 UI。

# javascript - jquery函数重载

> ID：16048773
> 
> 赞同：1
> 
> 时间：2013-04-16T23:12:44.827
> 
> 标签：javascript, jquery, google-chrome

我有一个绑定到 .click() 事件的函数。每次用户点击时，浏览器fadeOut() 当前元素和animate() 新元素的marginLeft。出于某种原因，当我快速单击绑定到此单击事件的按钮时，在 Chrome 中它会跳转动画并直接继续下一个（仅当我在 1 秒内单击 5 次时）并且不添加marginLeft，在这种情况下，它会导致 UI 的主要可用性问题。这种情况有没有后备方案？就像动画没有完成直接用 css() 或类似的东西添加它？

谢谢

E：click() 事件调用一个函数，所有的魔法都会在其中发生，如果它有帮助的话..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:54:48.417

您可能想查看 jquery 的`.stop()`方法。它允许您短路元素上任何当前正在运行的动画。

简单的例子：

```
$myElement.on('click', function() {
    // first 'true' clears animations in the queue for this element
    // second 'true' completes the currently-running animation immediately
    $(this).stop(true, true).fadeOut();
}); 
```

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

# mysql - 创建新记录时将随机数插入表中

> ID：16048775
> 
> 赞同：1
> 
> 时间：2013-04-16T23:12:53.300
> 
> 标签：mysql, sql, random

我想在一个 MySql 表中存储随机数，每次创建新记录时随机检索一个并将其插入到另一个表列中。我想在使用时从随机数表中删除检索到的数字。

随机数为 3 位，共有 900 个。

我在这里阅读了几篇文章，这些文章描述了使用唯一随机数并触发它们的插入的问题。我想使用这种方法，因为它似乎很可靠，同时产生的问题很少。

任何人都可以在这里给我一个可以完成上述操作的 sql 查询示例吗？（如果 sql 查询不是推荐的方法，请随时推荐更好的方法。）

感谢您提供的任何帮助。

我把这两个建议放在一起，并尝试了这个触发器和查询：

```
CREATE TRIGGER rand_num before 
INSERT ON uau3h_users FOR EACH ROW 
insert into uau3h_users (member_number) 
select random_number from uau3h_rand900 
where random_number not in (select member_number from uau3h_users) 
order by random_number 
limit 1 
```

但似乎已经有一个触发器附加到该表，所以新的触发器会导致冲突，直到我删除它，事情才停止工作。关于如何使用另一种方法完成相同任务的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:24:25.313

您只处理 900 条记录，因此性能不是主要问题。

如果您正在对表进行单次插入，则可以执行以下操作：

```
insert into t(rand)
    select rand
    from rand900
    where rand not in (select rand from t)
    order by rand()
    limit 1 
```

换句话说，您不必不断地从一个表中删除并移动到另一个表。您可以选择插入尚不存在的值。如果性能是一个问题，那么索引将在这种情况下有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:16:40.767

您很可能需要查看触发器。例如，您可以在表中插入记录后做一些事情。请参阅此链接以获取更多详细信息。 [http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

# mysql - 无论是否存在记录，都显示所有日期和日期

> ID：16048776
> 
> 赞同：1
> 
> 时间：2013-04-16T23:13:14.180
> 
> 标签：mysql, select

我不确定在 MySQL 中是否可行。我想在下面显示“日志”表![在此处输入图像描述](https://i.stack.imgur.com/PyMfR.png)

喜欢这种格式 ![在此处输入图像描述](https://i.stack.imgur.com/PQJUg.png)

与第一个表不同，所有日期都显示在第二个表上，包括节假日和工作日。我试图在谷歌中搜索，但我不知道我想要做什么的术语。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:20:17.933

像这样的东西：

```
SELECT DAYNAME(TIME_ENTER),DATE(TIME_ENTER),DEPT_NAME AS DEPARTMENT,NAME,TIME(TIME_ENTER) AS TIME_IN,TIME(TIME_EXIT) AS TIME_OUT FROM Log; 
```

由于不同国家/地区的假期不同，您需要第二张假期表进行交叉比较以突出显示。

# java - Java中的异常处理是如何实现的？

> ID：16048779
> 
> 赞同：3
> 
> 时间：2013-04-16T23:13:38.620
> 
> 标签：java, assembly, exception-handling, compilation

高级编程语言（如 Java）如何实现异常处理？我的意思并不是说如何在一种语言中使用异常。我的意思是编译器如何生成我们识别为异常处理的代码（汇编或一些中间代码，如 Java 字节码），因为最终，计算机只能执行指令；更高级别的所有内容都必须由这些指令组成。

在 C 中，在异常存在之前，你会返回一个错误代码，但是如果一个函数已经返回了一些东西，那又如何呢？也许返回错误代码和真实结果的结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:08:52.253

编译器在 throw 站点输出一条`athrow`指令 ( [JVM Specification](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.10.1.9.athrow)`Exceptions` )，并在方法的代码中输出一个属性 ( [#4.7.5](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.5) )，显示所有各种 catch 子句的位置、它们涵盖的指令范围以及异常类型他们抓住了。

# php - PHP 会话问题

> ID：16048780
> 
> 赞同：0
> 
> 时间：2013-04-16T23:13:42.240
> 
> 标签：php, session, authentication

我在使用 PHP 和会话时遇到问题。这是我的dictionary.php 代码。

```
<?php
if(!isset($_SESSION['auth'])){
$_SESSION['auth'] = 0;
}
if($_SESSION['auth'] == 0){
header("Location: index.php");
}
?> 
```

因此，有 index.php 应该将会话“auth”设置为 0 或 1：

```
<?php
    $msg = "";

//Password handler
if(!isset($_POST['password'])){
    $password = "";
}else{
    $password = $_POST['password'];
}

if(!isset($_SESSION['auth'])){
    $_SESSION['auth'] = 0;
}

//Username handler
if(!isset($_POST['username'])){
    $username = "";
}else{
       $username = $_POST['username'];
    if($username == "potato" && $password == "poteto"){
        $_SESSION['auth'] = 1;
        header("Location: dictionary.php");
    }else{
        $msg = "<br />
<font color=\"#FF0000\">Invalid username or password!</font><br />";
    }
}

if($_SESSION['auth'] == 0){
        header("Location: dictionary.php");
}

?> 
```

（以上可能是不好的做法，但我只是为学校项目做这个，我不希望其他人看到文件 dictionary.php。）

index.php 使用带有 POST 方法的表单来发送`$username`and `$password`，以防万一您还没有注意到。

当我输入登录详细信息“potato”和“poteto”时，它会将我重定向到dictionary.php，但随后立即将我扔回index.php。我试过调整上面的代码，但没有运气。

如果有人需要我向他们展示这个，那么我可以提供一个 URL。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:27:47.180

如评论中所述，设置`session_start()`。还...

最后在 index.php 中重定向到 dictionary.php：

```
if($_SESSION['auth'] == 0){
        header("Location: dictionary.php");
} 
```

在 dictionary.php 中，您重定向到 index.php 的相同条件：

```
if($_SESSION['auth'] == 0){
     header("Location: index.php");
} 
```

因此，每当您的用户处于 的情况下`$_SESSION['auth'] == 0`，它都会导致无限重定向。你需要清理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:28:13.670

你应该让你的重定向功能更舒服一点：

```
function site_redirect($location)
{
    $headers = true; // set to false to disable for troubleshooting

    $headers = $header && !headers_sent();
    if ($headers) {
        header("Location: $location");
    }
    printf(
        "<html><h1>Moved</h1><a href="%s">Moved to %1\$s</a></html>",
        htmlspecialchars($location)
    );
    exit();
} 
```

这不仅会提供更好的重定向响应消息，它还允许您（出于调试目的）禁用该`header(...);`行（例如通过注释它），以便您的浏览器不再进入重定向循环。

只需更换电话

```
header("Location: dictionary.php"); 
```

和

site_redirect("dictionary.php");

这样`header()`您的所有脚本中就只有一个调用，并且在函数*内部*，`site_redirect()`因此您可以在中心位置影响重定向。

# sencha-touch-2 - Sencha Touch 2 - 需要基本的拖放示例

> ID：16048782
> 
> 赞同：2
> 
> 时间：2013-04-16T23:13:45.930
> 
> 标签：sencha-touch-2, sencha-touch-2.1

Sencha Touch 2 包括 Ext.util.Droppable 和 Ext.util.Draggable 类。有没有人有一个简单的例子来展示基本的拖放行为是如何工作的？

似乎任何组件都可以使用“可拖动”配置选项进行拖动。在这里，我创建了一个带有可拖动图像组件的简单面板：

```
 Ext.create("Ext.Panel", {
        fullscreen: true,
        items: [
            {
                xtype: 'image',
                src: 'http://www.sencha.com/assets/images/sencha-avatar-64x64.png',
                height: 64,
                width: 64,
                left: '10px',
                top: '10px',
                draggable: {
                    direction: 'both',
                },
            }
        ]
    }); 
```

这很好用：现在可以在面板内拖动组件。

但是我们现在如何使用 Ext.util.Droppable 类创建一个简单的“放置目标”呢？

# java - 如何在等待 Web 服务响应时显示“正在加载...”消息

> ID：16048784
> 
> 赞同：1
> 
> 时间：2013-04-16T23:13:52.683
> 
> 标签：java, android, web-services

我正在尝试在用户等待来自 Web 服务的响应出现时出现“正在加载...”消息。

我查看了许多其他类似的问题/答案以及我在网上找到的教程，但无法使其正常运行。

任何帮助将不胜感激！

代码在这里：

```
public class SunriseSunset extends Activity implements OnClickListener {

    public Button getLocation;
    public Button setLocationJapan;
    public TextView LongCoord;
    public TextView LatCoord;
    public double longitude;
    public double latitude;
    public LocationManager lm;
    public Spinner Locationspinner;
    public DateDialogFragment frag;
    public Button date;
    public Calendar now;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sunrisesunset);
        // Show the Up button in the action bar.
                setupActionBar();

        //Setting onClickListener for Calculate Sunrise/Sunset Button
        findViewById(R.id.CalculateSunriseSunset).setOnClickListener(this);

        //Sets up LocationManager to enable GPS data to be accessed.
        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 1,
                new MyLocationListener());

        //Declares Latitude and Longitude TextViews
        LatCoord = (TextView) findViewById(R.id.LatCoord);
        LongCoord = (TextView) findViewById(R.id.LongCoord);

        //Declares for Location Spinner/Dropdown
        addListenerOnSpinnerItemSelection();

        //Date shit
        now = Calendar.getInstance();
        date = (Button)findViewById(R.id.date_button);
        date.setText(DateFormat.format("dd MMMM yyyy", Calendar.getInstance()));
        date.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                showDialog();
            }
        });

    }
    /**
     * Set up the {@link android.app.ActionBar}.
     */
    private void setupActionBar() {

        getActionBar().setDisplayHomeAsUpEnabled(true);

    }

    // More date shit
    @SuppressLint("CommitTransaction")
    public void showDialog() {  
        FragmentTransaction ft = getFragmentManager().beginTransaction(); //get the fragment   
        frag = DateDialogFragment.newInstance(this, new DateDialogFragmentListener(){      

        public void updateChangedDate(int year, int month, int day){                     
        now.set(year, month, day);
        date.setText(DateFormat.format("dd MMMM yyyy", now));             
        }  
          }, now);
        frag.show(ft, "DateDialogFragment");     }

    public interface DateDialogFragmentListener{
        //this interface is a listener between the Date Dialog fragment and the activity to update the buttons date
        public void updateChangedDate(int year, int month, int day);
    }

    public void addListenerOnSpinnerItemSelection() {
        Locationspinner = (Spinner) findViewById(R.id.Locationspinner);
        Locationspinner
                .setOnItemSelectedListener(new CustomOnItemSelectedListener(
                        this));
    }

    protected void showCurrentLocation() {
        // TODO Auto-generated method stub
        // This is called to find current location based on GPS data and sends
        // these values to the LongCoord and LatCoord TextViews
        Location location = lm
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        latitude = location.getLatitude();
        longitude = location.getLongitude();

        LongCoord.setText(Double.toString(longitude));
        LatCoord.setText(Double.toString(latitude));
    }

    @Override
    public void onClick(View arg0) {
        Button b = (Button) findViewById(R.id.CalculateSunriseSunset);
        b.setClickable(false);
        new LongRunningGetIO().execute();
    }

    public class LongRunningGetIO extends AsyncTask<Void, Void, String> {
        //Reads in the web service
        protected String getASCIIContentFromEntity(HttpEntity entity)
                throws IllegalStateException, IOException {
            InputStream in = entity.getContent();
            StringBuffer out = new StringBuffer();
            int n = 1;
            while (n > 0) {
                byte[] b = new byte[4096];
                n = in.read(b);
                if (n > 0)
                    out.append(new String(b, 0, n));
            }
            return out.toString();
        }

        @SuppressLint("SimpleDateFormat")
        @Override
        protected String doInBackground(Void... params) {
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();

            // Finds todays date and adds that into the URL in simple date format DD/MM
            SimpleDateFormat df = new SimpleDateFormat("dd/MM");
            String formattedDate = df.format(now.getTime());

            String finalURL = "http://www.earthtools.org/sun/"
                    + LatCoord.getText().toString().trim() + "/"
                    + LongCoord.getText().toString().trim() + "/"
                    + formattedDate + "/99/0";
            HttpGet httpGet = new HttpGet(finalURL);
            String text = null;

            try {
                HttpResponse response = httpClient.execute(httpGet,
                        localContext);
                HttpEntity entity = response.getEntity();
                text = getASCIIContentFromEntity(entity);
            } catch (Exception e) {
                return e.getLocalizedMessage();
            }
            return text;
        }

        protected void onPostExecute(String results) {
            if (results != null) {
                try {

                    DocumentBuilderFactory dbFactory = DocumentBuilderFactory
                            .newInstance();
                    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
                    InputSource s = new InputSource(new StringReader(results));
                    Document doc = dBuilder.parse(s);
                    doc.getDocumentElement().normalize();
                    TextView tvSunrise = (TextView) findViewById(R.id.Sunrise);
                    TextView tvSunset = (TextView) findViewById(R.id.Sunset);
                    tvSunrise.setText(doc.getElementsByTagName("sunrise").item(0).getTextContent());
                    tvSunset.setText(doc.getElementsByTagName("sunset").item(0).getTextContent());
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            Button b = (Button) findViewById(R.id.CalculateSunriseSunset);
            b.setClickable(true);
        }
    }

    class MyLocationListener implements LocationListener {
        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub
        }
    }
} 
```

任何帮助将不胜感激:) x

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T23:28:55.120

如果您还没有阅读，请阅读[AsyncTask 。](http://developer.android.com/reference/android/os/AsyncTask.html)

> 此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

您可以在其中使用的功能很少。例如：onPreExecute、doInBackground、onProgressUpdate 和 onPostExecute。

在 onPreExecute() 上，声明一个对话框并显示一个正在加载... 使用此框：

```
private final ProgressDialog dialog = new ProgressDialog(YourClass.this);

protected void onPreExecute() {
   this.dialog.setMessage("loading...");
   this.dialog.show();
} 
```

然后在 doInBackground 中，您可以完成您的任务。即调用 web 服务并等待响应（这样您将在后台线程中等待而不锁定 UI）。

```
protected Boolean doInBackground(final Void unused) {
  // call your web service here and do other stuff(wait).
  // return true when success else false
} 
```

上面的函数返回布尔值，它在 onPostExecute OnpostExecute() 中被接受为参数，停止对话框并显示其他内容，如成功等。类似于：

```
protected void onPostExecute(final Boolean result) {
   if (this.dialog.isShowing()) { // if dialog box showing = true
      this.dialog.dismiss(); // dismiss it
   }
   if (result.booleanValue()) {
      //also show register success dialog
   }
} 
```

还要检查[这个](https://stackoverflow.com/questions/3893626/how-to-use-asynctask-to-show-a-progressdialog-while-doing-background-work-in-and?lq=1)线程。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:24:24.267

尝试在执行 AsyncTask 时显示进度对话框，并在执行 AsyncTask 后关闭对话框。而且：

```
private ProgressDialog progressDialog;

@Override
    public void onClick(View arg0) {
        Button b = (Button) findViewById(R.id.CalculateSunriseSunset);
        b.setClickable(false);
        progressDialog = ProgressDialog.show(SunriseSunset.this, "Loading",
                "Please wait while fetching data");
        new LongRunningGetIO().execute();
    } 
```

...

```
protected void onPostExecute(String results) {
progressDialog.dismiss();
                if (results != null) {
                    try { 
```

# java - java.lang.reflect.InvocationTargetException？

> ID：16048785
> 
> 赞同：1
> 
> 时间：2013-04-16T23:14:04.697
> 
> 标签：java, exception, applet, invocationtargetexception, appletviewer

我在一个小程序中工作，当我使用 Eclipse 运行它时我没有任何问题，但是当我尝试在我的 Internet Explorer 浏览器上加载小程序时，它给了我这个错误：

```
java.lang.reflect.InvocationTargetException 
```

我不知道该怎么做，为什么不使用我的浏览器，是的，使用 Eclipse。

任何想法？

我使用appletviewer运行它，当我按下退出按钮时问题出现了，我必须退出游戏。它实际上并没有退出游戏......现在我更加迷失了......

- - - - - - - 堆栈跟踪

```
C:\Course Technology\src>appletviewer TestJAlienHunt.html
Exception in thread "AWT-EventQueue-1" java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "exitVM.0")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
    at java.security.AccessController.checkPermission(AccessController.java:555)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at java.lang.SecurityManager.checkExit(SecurityManager.java:761)
    at java.lang.Runtime.exit(Runtime.java:105)
    at java.lang.System.exit(System.java:960)
    at JAlienHunt.actionPerformed(JAlienHunt.java:97)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)

    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:703)
    at java.awt.EventQueue.access$000(EventQueue.java:102)
    at java.awt.EventQueue$3.run(EventQueue.java:662)
    at java.awt.EventQueue$3.run(EventQueue.java:660)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:676)
    at java.awt.EventQueue$4.run(EventQueue.java:674)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:673)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThre ad.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)

    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)

    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:45:50.613

不允许小程序调用`System.exit`。毕竟，其他人制作的其他小程序可能正在使用该 JVM。

通常，当用户选择关闭或离开页面时，小程序“结束”（这会导致小程序的`stop`方法被调用）。小程序不能自行决定其操作何时结束。

理论上，您可以让您的小程序显示一个空白矩形或其他东西，但实际上，“退出”功能在小程序中根本没有意义，并且不应该一开始就存在。

# android - 使用 AlarmManager 启动活动时，MediaPlayer 不播放

> ID：16048793
> 
> 赞同：1
> 
> 时间：2013-04-16T23:14:35.517
> 
> 标签：android, broadcastreceiver, alarmmanager, android-mediaplayer

我正在编写一个警报（有点）应用程序，它使用带有 RTC_WAKEUP 标志的 AlarmManager 注册广播意图，以在指定时间关闭。作品...

当接收到广播时，接收器启动一个活动，使用 STREAM_ALARM 流通过 MediaPlayer 播放铃声，并做一些其他的事情。一切正常，但如果在屏幕关闭时接收到广播，则活动正确启动但不播放铃声。如果在屏幕打开和解锁时收到，则可以正常工作并播放铃声。

编辑在播放铃声的活动中添加代码。

```
public void onCreate(Bundle bundle) {
    super.onCreate(bundle)
    ...
    Window window = getWindow();
    window.addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
    window.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    window.addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
    window.addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
    ringtonePlayer = new MediaPlayer();
    ...
    playRingtone();
}

private void playRingtone() throws IllegalArgumentException, SecurityException,      IllegalStateException, IOException {
    ringtonePlayer.setDataSource(prefs.getString(getRingTone(), RingtoneManager.getActualDefaultRingtoneUri(this, RingtoneManager.TYPE_RINGTONE).toString()));

    ringtonePlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
    ringtonePlayer.setWakeMode(this, PowerManager.PARTIAL_WAKE_LOCK);
    ringtonePlayer.setLooping(true);
    ringtonePlayer.prepare();
    ringtonePlayer.start();
    Log.i(LOG_TAG, "Ringtone started");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-01T05:05:39.783

这是一篇较旧的帖子，但我遇到了同样的问题，并且认为我知道这里缺少什么。这只是一个假设，没有看到更多您的代码，但通常，如果您使用 mediaPlayer，最好在 onStop() 和 onPause() 中停止它（或在 onPause() 中暂停它）。如果你已经这样做了，这里有一个可能的解决方案。在 onPause 或 onStop 中，不要调用：

```
 mMediaPlayer.stop(); 
```

（以及所有需要的东西，如发布等）。因为当您调用 WakeLock 并设置标志以保持屏幕开启等时，onStop() 和 onPause() 会在 onCreate 完成后为您的活动多次调用。这是我在装有 Android 4.1.2 的设备 Samsung Galaxy s3 上检测到的内容 相反，要确保 MediaPlayer 在完成后停止，请执行以下操作：

```
 if(this.isFinishing()){

        mMediaPlayer.stop();

   } 
```

有了这个，您可以确保仅在您的活动真正完成时才调用它。这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-01T12:38:07.473

在 onResume 中调用 play - 这对我有用

```
public class AlarmActivity extends Activity {
    private Uri uri = null;
    private int volume;
    private MediaPlayer mp = null;

    private void play() {
        if (uri == null) {
            return;
        }
        mp = new MediaPlayer();
        AudioManager audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC) * volume / 100, 0);
        mp.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mp.setOnPreparedListener(mpOnPrepared);
        mp.setOnCompletionListener(mpOnCompletion);
        try {
            mp.setDataSource(this, uri);
            mp.prepare();
        } catch (IOException e) {
            mp.release();
            mp = null;
            return;
        }
    }

    private OnPreparedListener mpOnPrepared = new OnPreparedListener()
    {
        @Override
        public void onPrepared(MediaPlayer mp)
        {
            mp.start();
        }
    };

    private OnCompletionListener mpOnCompletion = new OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mp) {
            mp.release();
            mp = null;
        }
    };

    private void stop() {
        if (mp != null) {
            mp.release();
            mp = null;
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        setContentView(R.layout.activity_alarm);

        getWindow().addFlags(
            WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON |
            WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON |
            WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED |
            WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);

        SharedPreferences sp = getSharedPreferences("settings", MODE_PRIVATE);
        uri = Uri.parse(sp.getString("uri", ""));
        volume = sp.getInt("volume", 100);
    }

    @Override
    protected void onResume () {
        super.onResume();

        play();
    }

    @Override
    protected void onPause () {
        super.onPause();

        stop();

        finish();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T23:19:11.507

尝试添加

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);   
getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD); 
```

到`Activity`那个开始`MediaPlayer`

你需要用它来打开屏幕，如果你愿意，在`Activity`开始之前解锁它。

# google-drive-api - Google 云端硬盘公共链接并发限制

> ID：16048797
> 
> 赞同：0
> 
> 时间：2013-04-16T23:14:59.207
> 
> 标签：google-drive-api

我一直在使用与“通过链接查看每个人”共享的 Google Drive 文件来存储交易电子邮件中包含的图像（如标题图像等）。

我使用 SDK 获取链接，我的链接如下所示： [https](https://docs.google.com/uc?export=download&id=) ://docs.google.com/uc?export=download&id= {somefileId}。

这基本上是[在网站上显示存储在 Google Drive 中的文件（例如图像）](https://stackoverflow.com/questions/10311092/displaying-files-e-g-images-stored-in-google-drive-on-a-website/11466763#11466763)的技术。

这工作......大部分时间。

有时我收到用户无法下载图像的报告。我无法弄清楚发生了什么，但我相信在给定的链接和/或用户帐户上可以完成多少并发或累积请求是有限制的。

我正在寻找证实这一点的文件。我的具体问题是：有人知道 Google Drive 施加的配额限制吗？（如果您有官方信息的链接，那就太好了）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T10:33:13.753

对我来说同样的问题，似乎Google驱动器在共享文件时有限制，希望这个链接有用， [https://support.google.com/drive/answer/2494827?hl=en](https://support.google.com/drive/answer/2494827?hl=en) 帮助没有说明是否有限制每天，总是....问候

# c++ - 如何覆盖 GCC 的配置以进行包含搜索？

> ID：16048801
> 
> 赞同：4
> 
> 时间：2013-04-16T23:15:30.050
> 
> 标签：c++, c, gcc, configuration, embedded-linux

环境：

Ubuntu，GCC 4.6.3 使用 Qt 4.8

默认情况下，我的包含搜索顺序（由 gcc -v 报告）是：

```
<clipped out my project specific includes>
/usr/include/c++/4.6
/usr/include/c++/4.6/x86_64-linux-gnu/.
/usr/include/c++/4.6/backward
/usr/lib/gcc/x86_64-linux-gnu/4.6/include
/usr/local/include
/usr/lib/gcc/x86_64-linux-gnu/4.6/include-fixed
/usr/include/x86_64-linux-gnu
/usr/include 
```

我正在尝试存档此构建环境，以便它不会从实际的系统文件夹构建，而只能从重新创建我的机器时签入和明确定义的源树构建。我遇到了覆盖 gcc 的系统搜索路径的问题。

具体来说，我首先尝试了 --sysroot=../../sysroot，但只有最后两个包含文件夹发生了变化：

```
/usr/include/c++/4.6
/usr/include/c++/4.6/x86_64-linux-gnu/.
/usr/include/c++/4.6/backward
/usr/lib/gcc/x86_64-linux-gnu/4.6/include
/usr/lib/gcc/x86_64-linux-gnu/4.6/include-fixed
../../sysroot/usr/include/x86_64-linux-gnu
../../sysroot/usr/include 
```

GCC -v 报告：

```
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.6/lto-wrapper
Target: x86_64-linux-gnu
Configured with: ../src/configure -v 
--with-pkgversion='Ubuntu/Linaro 4.6.3-1ubuntu5' 
--with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs 
--enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr 
--program-suffix=-4.6 
--enable-shared --enable-linker-build-id --with-system-zlib 
--libexecdir=/usr/lib 
--without-included-gettext --enable-threads=posix 
--with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/lib 
--enable-nls 
--with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug 
--enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin 
--enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic 
--enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu 
--target=x86_64-linux-gnu
Thread model: posix
gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
```

所以看起来 /usr/lib/... 和 /usr/include... 行可能来自内置的 GCC 配置。我是 GCC/G++ 菜鸟，所以我在这里可能是错的 - 请酌情更正。

无论如何，我的问题是如何更改我的配置，以便这些文件夹：

```
/usr/include/c++/4.6
/usr/include/c++/4.6/x86_64-linux-gnu/.
/usr/include/c++/4.6/backward
/usr/lib/gcc/x86_64-linux-gnu/4.6/include
/usr/lib/gcc/x86_64-linux-gnu/4.6/include-fixed 
```

也相对于../../sysroot？

（需要明确的是，我知道 -I 并且这些都没有在命令行或 make 文件中指定。）

通过使用 -nostdinc 并直接指定每个文件夹（使用 -I），我可以获得*几乎*正确的结果，除了 Qt Meta-Object-Compiler 在输入其中一些系统包含文件夹时失败。因为我使用的是 Qt，所以我想更改 GCC 的配置搜索路径，而不是仅使用 -I 单独列出每个系统文件夹。

任何建议将不胜感激。

谢谢，布拉德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:40:56.183

就像可能的解决方案方向之一一样，对于您的情况来说可能太多了：

实际上，据我了解，您要实现的目标接近于针对不同系统映像的交叉编译。这个任务在嵌入式开发中很常见，虽然它不是那么容易。大多数想法是构建 GCC，因此它“认为”系统映像与正常情况不同。

[该链接](http://cowlark.com/2009-07-04-building-gcc/)至少应该可以帮助您了解基本原理。 [这是另一个](http://www.nongnu.org/thug/cross.html)，更重要的是它包含其他有用的链接，如交叉编译常见问题解答。

# jquery - jQuery 函数（JSON 数据调用）适用于 ASP 页面，但不适用于相同的 HTM 页面

> ID：16048803
> 
> 赞同：1
> 
> 时间：2013-04-16T23:15:43.140
> 
> 标签：jquery, html, json, volusion

我有一个 jQuery 函数，它在从 JSON 数据表调用的页面上显示价格。我正在开发一个 Volusion 网站，他们的框架在 ASP 中。对于网站上更简洁的 URL，您可以设置“SEO” URL，将页面显示为 .htm URL 而不是 .asp URL。此代码在 ASP 页面上运行良好，但由于某种原因在 .htm 页面上不起作用。我检查了页面并检查了控制台，并没有收到与此功能有关的任何加载错误。我想知道为什么它会在 ASP 页面上运行，而不是在 HTM 页面上运行。从字面上看，当您执行 SEO URL 时，唯一改变的是 URL 本身。

这是函数（注意 JSON 表有两个键：item 和 price）。它的作用是从 JSON 表中寻找一个带有 'item' 键值的 span（或 div），并使用 jQuery html() 函数写出 'price' 键的值：

```
$(document).ready(function () {
    function ShowPrices() {
            $.getJSON("json_data.js", function (data) {
                $.each(data, function () {
                        $('[id*="' + this['item'] + '"]').html(' ' + this['price']);
                        $('[id*="' + this['item'] + '"]').val(this['price']);       
                });
            });  
    }
ShowPrices();
}); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:54:06.703

我看到您的 getJSON url 是相对于当前文档的，而不是站点根目录。

我的猜测是 SEO url 具有不同的文件夹结构，例如

ASP版本`http://sitedomain.com/aspfolderpath/page.aspx`

搜索引擎优化版本`http://sitedomain.com/some/other/path/page.htm`

在这种情况下，您的功能需要是：

```
$(document).ready(function () {
    function ShowPrices() {
            $.getJSON("/aspfolderpath/json_data.js", function (data) {
                $.each(data, function () {
                        $('[id*="' + this['item'] + '"]').html(' ' + this['price']);
                        $('[id*="' + this['item'] + '"]').val(this['price']);       
                });
            });  
    }
ShowPrices();
}); 
```

# css - 在 a 上画一条丝带 使用图像和 CSS

> ID：16048809
> 
> 赞同：4
> 
> 时间：2013-04-16T23:16:17.487
> 
> 标签：css, image, twitter-bootstrap

我正在寻找一个带有 div、:before 和 :after 伪元素和[3 张图片](https://imgur.com/a/wanMM)的功能区。我让 :before 图像工作，但我似乎无法让 :after 图像与右侧对齐。（请[不要链接到 css-tricks](http://css-tricks.com/snippets/css/ribbon/)，他们使用纯 CSS，我追求图像！）

我认为使用相对位置可能是浮动的更好替代方案，但我不太了解它们。

旁白：有谁知道是什么导致了navbar-inner底部和侧面的边界？

编辑：更新了 CSS，因为我讨厌人们在 SO 上发布临时网站：

```
div.hero-unit {
    background: url(../img/ribbon-center.png) repeat-x;
    border-radius: 0;
    margin: 0 -15px;
    padding: 30px;
    float: left;
}

div.hero-container:before {
    content: url(../img/ribbon-fold-left.png);
    float: left;
    margin-left: -30px + -48px + 15px; /* - Padding size (30px) - image width (48px) + margin (15px) */
}

div.hero-container:after {
    content: url(../img/ribbon-fold-right.png);
    background: transparent;
    float: right;
    margin-right: -48px + -15px; /* - image-width (48px) - margin (15px) */
} 
```

HTML：

```
<div class="hero-container">
    <div class="hero-unit">content</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:23:25.230

一种选择是在 .. 上使用负的右边距`div.hero-container::after`。我在 Firebug 中玩过它，15px 似乎是正确的。我不确定为什么图像没有与右侧对齐。

`Aside: does anyone know what is causing the border around the bottom and sides of navbar-inner?`

`.navbar-inner`那是不是边框上的盒子阴影

# c# - 创建可变大小的数组

> ID：16048814
> 
> 赞同：2
> 
> 时间：2013-04-16T23:16:32.133
> 
> 标签：c#, asp.net, arrays, dynamic, arraylist

我一直在为不同的控件创建数组，如下所示：

```
private TextBox[] Array_TextBoxes;
private CheckBox[] Array_CheckBoxes;
private RadioButtonList[] Array_radioButton;

Array_TextBoxes= new TextBox[4];
Array_CheckBoxes= new CheckBox[5];
Array_radioButton= new RadioButtonList[10]; 
```

有什么方法可以创建它们以便我不需要指定大小/长度？即是否可以使这些控制数组的大小可变？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T23:18:25.777

数组必须指定一个长度，如果你想允许任意数量的元素使用[List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)类，像这样

```
List<TextBox> textBoxList=new List<TextBox>(); 
```

并将控件添加到此集合中

```
 textBoxList.Add(new TextBox()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T23:25:36.487

您可以将它们作为列表开始，然后转换为数组：

添加东西到这些使用`.Add`：

```
List<TextBox> _TextBoxes = new List<TextBox>();
List<CheckBox> _CheckBoxes =  new List<CheckBox>();
List<RadioButtonList> _RadioButton = new List<RadioButtonList>(); 
```

然后转换为数组：

```
TextBox[] Array_TextBoxes = List<TextBox> _TextBoxes.ToArray();
CheckBox[] Array_CheckBoxes = List<CheckBox> _CheckBoxes.ToArray();
RadioButtonList[] Array_radioButton = List<RadioButtonList> _radioButton.ToArray(); 
```

或者只是使用列表...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T23:30:25.397

`List<>`，正如其他人所建议的那样，是一个好主意，但它确实有一些开销。如果您“使用” System.Linq，您也可以这样做，并假设`controls`变量指向控件的集合：

```
Array_TextBoxes = controls.OfType<TextBox>().ToArray(); 
```

此外，如果您更喜欢使用列表而不是数组，您也可以这样做：

```
List<TextBox> textBoxes = controls.OfType<TextBox>().ToList(); 
```

最后，在字段和变量名称中使用“Array_”之类的前缀通常被认为是一种糟糕的风格。

# android - 如何从谷歌分析中获取推荐人/活动来源

> ID：16048815
> 
> 赞同：3
> 
> 时间：2013-04-16T23:16:37.847
> 
> 标签：android, google-analytics

从[这里](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns)的最底层。有一个 URL 生成器，我可以在 google play 上生成指向我的应用程序的链接，并带有引用者。我怎样才能从谷歌分析中额外的活动来源？我一直在谷歌上搜索，但仍然找不到答案。我发现有人说我应该创建一个扩展 BroadcastReceiver 的类，但我也在[这里](https://stackoverflow.com/questions/3817030/get-android-google-analytics-referrer-tag)找到了。这样做，我将无法获得 GA 工作。GA非常强大，我想用它。我现在需要的是从 GA 中提取引荐来源/广告系列来源的参数。我还发现在 EasyTracker.getTracker() 下有几个 getter，例如 getAppId()、getAppInstallerId() 和 getTrackingId()，但没有一个记录在案。我怎么知道哪个 ID getter 属于哪个？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-02T15:57:16.473

Although referrer/campaign tutorial document is in GA(google analytics) document,You can get Referrer information and use it in your app without implementing GA, see: [https://developers.google.com/analytics/devguides/collection/android/v4/campaigns#google-play-implement](https://developers.google.com/analytics/devguides/collection/android/v4/campaigns#google-play-implement)

```
<!-- Used for Google Play Store Campaign Measurement-->
<service android:name="com.google.android.gms.analytics.CampaignTrackingService" />
<receiver android:name="com.google.android.gms.analytics.CampaignTrackingReceiver"
          android:exported="true">
  <intent-filter>
    <action android:name="com.android.vending.INSTALL_REFERRER" />
  </intent-filter>
</receiver> 
```

Just change the 3rd line to your custom BroadCastReceiver example:

```
<!-- Used for Google Play Store Campaign Measurement-->
<service android:name="com.google.android.gms.analytics.CampaignTrackingService" />
<receiver android:name="com.xxx.Myapp.CustomReceiver"
          android:exported="true">
  <intent-filter>
    <action android:name="com.android.vending.INSTALL_REFERRER" />
  </intent-filter>
</receiver> 
```

Your custom BroadCastReceiver maybe:

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

import com.google.analytics.tracking.android.CampaignTrackingReceiver;

/*
 *  A simple Broadcast Receiver to receive an INSTALL_REFERRER
 *  intent and pass it to other receivers, including
 *  the Google Analytics receiver.
 */
public class CustomReceiver extends BroadcastReceiver {

  @Override
  public void onReceive(Context context, Intent intent) {

    // get referrer info
     String referrer = intent.getStringExtra("referrer");
    // do anything you want with referrer
     ......

    // When you're done, pass the intent to the Google Analytics receiver
    new CampaignTrackingReceiver().onReceive(context, intent);
  }
} 
```

# php - 包含位于不同文件夹中的 php 文件

> ID：16048818
> 
> 赞同：21
> 
> 时间：2013-04-16T23:16:55.417
> 
> 标签：php, include

我的大部分网站都在我的根目录中。在该目录中有“css”、“functions”、“images”文件夹。当我在 index.php 或任何其他根文件中包含 php 文件时，一切正常。它很好地包含它并很好地执行它。

但是当我创建文件夹“博客”时出现问题。所以这是一个全新的独立根文件夹，带有 CMS 和它自己的“根”文件。我尝试包含主根目录中的 css 或主根目录中“functions”文件夹中的一些 php 文件，一切都崩溃了。我知道我必须将其包含为`../functions/myfile.com`. 但是此文件包含其他一些文件，因此它无法正常工作并且无法正确包含其他文件。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-16T23:55:22.863

您可以[使用](http://php.net/manual/en/reserved.variables.server.php). ***仅用于测试，如果您以正确的方式进行操作*****，您可以回显路径以确保其正常工作。****您永远不想显示****[包含](http://php.net/manual/en/function.include.php)****和****[要求等内容的本地服务器路径。](http://php.net/manual/en/function.require.php)**`$_SERVER['DOCUMENT_ROOT']`

 ***站点 1**

```
echo $_SERVER['DOCUMENT_ROOT']; //should be '/main_web_folder/'; 
```

**包括以下站点之一：**

```
echo $_SERVER['DOCUMENT_ROOT'].'/includes/'; // should be '/main_web_folder/includes/'; 
```

**站点 2**

```
echo $_SERVER['DOCUMENT_ROOT']; //should be '/main_web_folder/blog/'; 
```

**要访问的实际代码包括*site2*内部的*site1* ，您会说：**

 *```
include($_SERVER['DOCUMENT_ROOT'].'/../includes/file_from_site_1.php'); 
```

如果您尝试通过排除和斜杠来访问它，它将仅使用执行查询的文件的相对[路径：](http://php.net/manual/en/function.pathinfo.php)`document root``root`

```
 //(not as fool-proof or non-platform specific)
 include('../includes/file_from_site_1.php'); 
```

包含的路径在任何地方的站点前端（实时）的代码中都没有位置，并且应该*只在生产环境*中得到保护和使用。

此外，对于网站本身的 URL，您可以使它们相对于域。浏览器会自动填写其余部分，因为他们知道他们正在查看哪个页面。所以而不是：

```
<a href='http://www.__domain__name__here__.com/contact/'>Contact</a> 
```

你应该使用：

```
<a href='/contact/'>Contact</a> 
```

为了获得良好的 SEO，您需要确保该博客的 URL 不存在于其他域中，否则它可能会被标记为重复站点。话虽如此，您可能还想在[`robots.txt`](http://www.robotstxt.org/)文件中添加一行，**仅用于** *site1*：

```
User-agent: *
Disallow: /blog/ 
```

## 其他可能性：

[查找您的 IP 地址](https://www.google.com/search?q=what%27s%20my%20IP&ie=utf-8&oe=utf-8)并包含以下代码片段：

```
function is_dev(){
  //use the external IP from Google.
  //If you're hosting locally it's 127.0.01 unless you've changed it.
  $ip_address='xxx.xxx.xxx.xxx';

  if ($_SERVER['REMOTE_ADDR']==$ip_address){
     return true;
  } else {
     return false;
  } 
}

if(is_dev()){
    echo $_SERVER['DOCUMENT_ROOT'];       
} 
```

请记住，如果您的 ISP 更改了您的[IP](https://en.wikipedia.org/wiki/IP_address)，例如您有 DCHP 动态 IP，您需要更改该文件中的 IP 才能看到结果。我会*将该*文件放在一个包含中，然后在页面上要求它进行调试。

如果您对使用浏览器[控制台日志](https://developer.mozilla.org/en-US/docs/Web/API/Console/log)等现代方法没问题，您可以改为这样做并在浏览器的调试界面中查看它：

```
if(is_dev()){
    echo "<script>".PHP_EOL;
    echo "console.log('".$_SERVER['DOCUMENT_ROOT']."');".PHP_EOL;
    echo "</script>".PHP_EOL;       
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-16T23:54:53.083

如果我理解正确，您有两个文件夹，一个包含您想要`include`放入另一个文件夹中的文件的 php 脚本？

如果是这种情况，您只需要按照正确的方式跟踪即可。假设您的文件夹设置如下：

```
root
    includes
        php_scripts
            script.php
    blog
        content
            index.php 
```

如果这是建议的文件夹结构，并且您尝试将“Script.php”文件包含到“index.php”文件夹中，则需要以这种方式包含它：

```
include("../../../includes/php_scripts/script.php"); 
```

我这样做的方式是视觉的。我将鼠标指针放在 index.php 上（查看文件结构），然后每次上一个文件夹时，我输入另一个“../”然后你必须确保你上文件夹结构之上的文件夹你想开始向下进入。之后，它只是普通的文件夹层次结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-15T09:25:16.163

以上答案都没有为我解决这个问题。我这样做了（Laravel 与 Ubuntu 服务器）：

```
<?php
     $footerFile = '/var/www/website/main/resources/views/emails/elements/emailfooter.blade.php';
     include($footerFile);
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T23:57:44.593

尽量不要使用相对路径。使用通用包含，将 DocumentRoot 服务器变量分配给全局变量，并从那里构造绝对路径。或者，对于较大的项目，考虑实施 PSR-0 SPL 自动加载器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-08T05:00:57.457

我有同样的问题，并在[https://css-tricks.com/php-include-from-root/](https://css-tricks.com/php-include-from-root/)上找到了修复它的代码

```
<?php 
   $path = $_SERVER['DOCUMENT_ROOT'];
   $path .= "/common/header.php";
   include_once($path);
?>
```**

# python - 计算唯一词的数量

> ID：16048819
> 
> 赞同：2
> 
> 时间：2013-04-16T23:17:00.280
> 
> 标签：python, unique, words

我想计算文本中的唯一单词，但我想确保后跟特殊字符的单词不会被区别对待，并且评估不区分大小写。

**举这个例子**

```
text = "There is one handsome boy. The boy has now grown up. He is no longer a boy now." 
print len(set(w.lower() for w in text.split())) 
```

结果将是 16，但我希望它返回 14。问题是那个“男孩”。和“男孩”的评价不同，因为标点符号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:20:27.107

```
import re
print len(re.findall('\w+', text)) 
```

使用[正则表达式](http://docs.python.org/2/library/re.html)使这变得非常简单。您需要记住的是确保所有字符都是[小写](http://docs.python.org/2/library/string.html#string.lower)的，最后使用[set](http://docs.python.org/2/tutorial/datastructures.html#sets)组合结果以确保没有重复项。

```
print len(set(re.findall('\w+', text.lower()))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T23:18:43.367

你可以`regex`在这里使用：

```
In [65]: text = "There is one handsome boy. The boy has now grown up. He is no longer a boy now."

In [66]: import re

In [68]: set(m.group(0).lower() for m in re.finditer(r"\w+",text))

Out[68]: 
set(['grown',
     'boy',
     'he',
     'now',
     'longer',
     'no',
     'is',
     'there',
     'up',
     'one',
     'a',
     'the',
     'has',
     'handsome']) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T01:01:44.193

我认为你有使用 Python 内置集合类型的正确想法。我认为如果您先删除“。”就可以完成。通过替换：

```
text = "There is one handsome boy. The boy has now grown up. He is no longer a boy now."
punc_char= ",.?!'"
for letter in text:
    if letter == '"' or letter in punc_char:
        text= text.replace(letter, '')
text= set(text.split())
len(text) 
```

那应该适合你。如果您需要任何其他符号或标点符号，您可以轻松地将它们添加到 punc_char 中，它们将被过滤掉。

亚伯拉罕·J。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T23:30:26.707

首先，您需要获取单词列表。您可以按照 eandersson 的建议使用正则表达式：

```
import re
words = re.findall('\w+', text) 
```

现在，您想要获取唯一条目的数量。有几种方法可以做到这一点。一种方法是遍历**单词**列表并使用字典来跟踪您看到单词的次数：

```
cwords = {}
for word in words:
     try:
         cwords[word] += 1
     except KeyError:
         cwords[word] = 1 
```

现在，最后，您可以通过以下方式获得唯一词的数量

```
len(cwords) 
```

# binding - PHP：为什么绑定变量会减少 SQL 注入？

> ID：16048822
> 
> 赞同：0
> 
> 时间：2013-04-16T23:17:20.487
> 
> 标签：binding

我知道绑定可以减少 SQL 注入，但为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:20:20.230

绑定将正确、平台正确转义的责任转移到绑定 API 实现。因此，程序员不能再忘记或搞砸它，从而导致无法预料和不需要的注入问题。

如需阅读，请查看[http://khlo.co.uk/index.php/1302-addslashes-allows-sql-injection-attacks](http://khlo.co.uk/index.php/1302-addslashes-allows-sql-injection-attacks)。它解释了 addlashes() 在 PHP 中的问题，以及依赖程序员主动逃避的后果。

# jquery - children() 只选择第一个孩子

> ID：16048823
> 
> 赞同：4
> 
> 时间：2013-04-16T23:17:32.593
> 
> 标签：jquery

给定以下无序列表：

```
<ul class="nb">
    <li class="home"><a href="index.html" class="current"><span class="displace">Home</span></a></li>
    <li class="products"><a href="products.html" title="Products"><span class="displace">Products</span></a></li>
    <li class="services"><a href="services.html" title="Services"><span class="displace">Services</span></a></li>
    <li class="support"><a href="support.html" title="Support"><span class="displace">Support</span></a></li>
    <li class="company"><a href="company.html" title="Company"><span class="displace">Company</span></a></li>
    <li class="contact"><a href="contact.html" title="Contact"><span class="displace">Contact</span></a></li>
</ul> 
```

你能告诉我为什么以下只选择第一个列表项：

```
var status = 'closed';
$('ul.nb li a').click(function(e){
    e.preventDefault();
        if ($status == 'closed'){
            var li = $(this).closest('li');
            var items = li.parent().children();
            console.log(items.html());
        }
}); 
```

预期结果是所有列表项的选择，控制台显示 `<a href="index.html" class="current"><span class="displace">Home</span></a>`

TIA

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T23:20:55.330

`html`由于 getter 仅返回第一个选定元素的 html 内容，因此`items`在您的代码中是所有选定`li`元素的 jQuery 包装数组。[http://jsfiddle.net/MKUGv/](http://jsfiddle.net/MKUGv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T23:24:50.413

因为[`.html()`](http://api.jquery.com/html/)不会遍历 jQuery 对象的每个元素并连接它们的所有 html 值。它只返回第一个的 html 值。

由于`li`是所有孩子，您将不得不自己循环遍历它们。就像是：

```
var html = '';
items.each(function(i, elm) {
    html += $(elm).html();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T23:26:52.000

我认为这就是您要寻找的...（记录每个 li 的 html）

[http://jsfiddle.net/Z2Rhx/](http://jsfiddle.net/Z2Rhx/)

```
$(items).each(function() { console.log($(this).html()) }); 
```

# sql-server-2008 - 无论如何，您可以在 SSRS 2008 中停止数据驱动订阅吗？

> ID：16048824
> 
> 赞同：2
> 
> 时间：2013-04-16T23:17:35.280
> 
> 标签：sql-server-2008, reporting-services, sql-agent-job

无论如何你可以停止DDS吗？我有一个在 400 个不同文件夹中添加 .pdf 的过程。我只是想知道是否有办法阻止它，因为有时它会干扰我正在处理的服务器上的其他事情并且它会显着减慢它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:15:14.103

没有支持的方式来做到这一点。您可以尝试一个 hack，但它涉及操作 ReportServer 数据库中的表，这充其量是不可预测的。以下是步骤：

1.  停止 SSRS 服务器。这将使它停止发送新订阅，但实际上并没有停止 DDS。
2.  在 ActiveSubscriptions 表中查找相关行。
3.  删除 Notifications 表中具有与 ActiveSubscriptions 中的 ActiveID 对应的 ActivationID 的所有行。
4.  删除 ActiveSubscriptions 中的行。
5.  重启 SSRS 服务器

SSRS 已在 SQL Server 代理中排队的任何订阅仍将被处理，但它应该停止发送新订阅。正如我所说，这是一个 hack，很难说这样做可能会破坏什么。

# linux - Bash 变量冲突

> ID：16048825
> 
> 赞同：3
> 
> 时间：2013-04-16T23:17:41.177
> 
> 标签：linux, bash, shell

我正在研究一个运行并从 CSF 防火墙接收变量的 linux bash 脚本。CSF Firewall 发出的命令是`system($config{RT_ACTION},$ip,$check,$block,$cnt,$mails);`我`$config{RT_ACTION}`的脚本的路径。

`$mails=2013-04-16 11:57:14 1US8Fq-0001VC-Uu <= from@domain.com H=reverse.trace.of.ipaddress (server) [xxx.xxx.xxx.xxx]:PORT I=[xxx.xxx.xxx.xxx]:PORT P=esmtp S=5964 id=SOMEIDHERE$@com T="EMAILSUBJECT" from <from@domain.com> for to@domain.com`

当我尝试运行此命令以获取 from@domain.com 时，问题就出现了。

```
DUMPED=$5
myvar=$(echo "$DUMPED" | awk '{print $5}') 
```

如果不清楚，$mails 将传递给我的脚本，该脚本转换为 $5，而我想用 awk 提取的信息位于第 5 列，也转换为 $5，因此它输出的不是从@domain.com 输出的 $5 $mails 的全部内容。我错过了什么？为什么 awk 不将 myvar 设置为 from@domain.com？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:40:15.450

关于什么：

```
DUMPED=$5
myvar=`echo $DUMPED | cut -d" " -f5` 
```

或者，使用 AWK：

```
DUMPED=$5
myvar=`echo $DUMPED | awk '{print $5}'` 
```

它对我有用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:49:15.000

希望其中一些是说明性的。最终，我只是展示你已经拥有的东西，除非你试图用已经在其中的美元符号来定义*变量*。

```
$ # Define mails. Don't do $mails=something, that will fail.
$ mails='2013-04-16 11:57:14 1US8Fq-0001VC-Uu <= from@domain.com H=reverse.trace.of.ipaddress (server) [xxx.xxx.xxx.xxx]:PORT I=[xxx.xxx.xxx.xxx]:PORT P=esmtp S=5964 id=SOMEIDHERE$@com T="EMAILSUBJECT" from <from@domain.com> for to@domain.com'
$ # Direct the value of $mails to awk's standard input using a here string:
$ awk '{print $5}' <<< "$mails"
from@domain.com
$ # Direct the value of $mails to awk's standard input using echo and a pipe:
$ echo "$mails"| awk '{print $5}'
from@domain.com
$ # Assign the fifth word of "$mails" to the name "myvar" using read;
$ read _ _ _ _ myvar _ <<< "$mails"
$ echo "$myvar"
from@domain.com 
```

# python - 同一向量的归一化在两种情况下给出不同的值？

> ID：16048829
> 
> 赞同：2
> 
> 时间：2013-04-16T23:17:49.187
> 
> 标签：python, arrays, python-2.7, numpy, norm

```
 r_capr
Out[148]: array([[-0.42300825,  0.90516059,  0.04181294]])

 r_capr
 np.linalg.norm(r_capr.T)
Out[149]: 0.99999999760432712

 a.T
Out[150]: array([[-0.42300825,  0.90516059,  0.04181294]])

 a.T
 np.linalg.norm(a.T)
Out[151]: 1.0 
```

在上面我们可以看到对于相同的向量我们有不同的范数？为什么会这样？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-16T23:23:21.710

机器不是 100% 精确的数字，因为它们以有限的精度存储（取决于架构，它可能是 16 到 128 位浮点数），所以非常精确的数字（例如接近浮点尾数的极限）更多容易出错。鉴于机器精度误差，您可以放心地假设这些数字实际上是相同的。在计算规范时，缩放或以其他方式修改您的数字以获得更不容易出错的结果可能更有意义。

同样使用 dot(x,x) 而不是 l2 范数可以更准确，因为它避免了平方根。

请参阅[http://en.wikipedia.org/wiki/Machine_epsilon](http://en.wikipedia.org/wiki/Machine_epsilon)以获得更好的讨论，因为这实际上是一个相当复杂的主题。

您的确切错误是由机器错误引起的，但是由于您的向量实际上并不相等（您正在显示两个逻辑上等价的向量，但它们的内部表示会不同），因此范数的计算可能正在使用不同的精度数字进行处理。

看到这个：

```
a = mat('-0.42300825 ; 0.90516059 ; 0.04181294', np.float32)
r = mat('-0.42300825 ; 0.90516059 ; 0.04181294', np.float64)
print linalg.norm(a)
print linalg.norm(r) 
```

并比较结果。它将得到您所看到的确切结果。您还可以通过检查矩阵的 dtype 属性来验证这一点。

# delphi - 在 Delphi XE3 中，如何使用 TypeInfo 或 RTTI 将 TVirtualInterface 对象转换为其接口？

> ID：16048832
> 
> 赞同：6
> 
> 时间：2013-04-16T23:18:03.507
> 
> 标签：delphi, interface, casting, rtti, delphi-xe3

我正在尝试使用 TVirtualInterface。我主要尝试遵循[Embarcadero doc wiki](http://docwiki.embarcadero.com/CodeExamples/XE3/en/Rtti.TVirtualInterface_%28Delphi%29)和[Nick Hodges 博客](http://www.nickhodges.com/page/TVirtualInterface-Series.aspx)中的示例。

但是，我正在尝试做的与标准示例有点不同。

我已经尽可能地简化了以下示例代码来说明我正在尝试做的事情。我遗漏了明显的验证和错误处理代码。

```
program VirtualInterfaceTest;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.Generics.Collections,
  System.Rtti,
  System.SysUtils,
  System.TypInfo;

type
  ITestData = interface(IInvokable)
    ['{6042BB6F-F30C-4C07-8D3B-C123CF1FF60F}']
    function  GetComment: string;
    procedure SetComment(const Value: string);
    property  Comment: string read GetComment write SetComment;
  end;

  IMoreData = interface(IInvokable)
    ['{1D2262CE-09F4-45EC-ACD8-3EEE6B2F1548}']
    function  GetSuccess: Boolean;
    procedure SetSuccess(const Value: Boolean);
    property  Success: Boolean read GetSuccess write SetSuccess;
  end;

  TDataHolder = class
  private
    FTestData: ITestData;
    FMoreData: IMoreData;
  public
    property TestData: ITestData read FTestData write FTestData;
    property MoreData: IMoreData read FMoreData write FMoreData;
  end;

  TVirtualData = class(TVirtualInterface)
  private
    FData: TDictionary<string, TValue>;
    procedure DoInvoke(Method: TRttiMethod; 
                       const Args: TArray<TValue>; 
                       out Result: TValue);
  public
    constructor Create(PIID: PTypeInfo);
    destructor Destroy; override;
  end;

constructor TVirtualData.Create(PIID: PTypeInfo);
begin
  inherited Create(PIID, DoInvoke);
  FData := TDictionary<string, TValue>.Create;
end;

destructor TVirtualData.Destroy;
begin
  FData.Free;
  inherited Destroy;
end;

procedure TVirtualData.DoInvoke(Method: TRttiMethod; 
                                const Args: TArray<TValue>; 
                                out Result: TValue);
var
  key: string;
begin
  if (Pos('Get', Method.Name) = 1) then
  begin
    key := Copy(Method.Name, 4, MaxInt);
    FData.TryGetValue(key, Result);
  end;

  if (Pos('Set', Method.Name) = 1) then
  begin
    key := Copy(Method.Name, 4, MaxInt);
    FData.AddOrSetValue(key, Args[1]);
  end;
end;

procedure InstantiateData(obj: TObject);
var
  rttiContext:  TRttiContext;
  rttiType:     TRttiType;
  rttiProperty: TRttiProperty;
  propertyType: PTypeInfo;
  data:         IInterface;
  value:        TValue;
begin
  rttiContext := TRttiContext.Create;
  try
    rttiType := rttiContext.GetType(obj.ClassType);
    for rttiProperty in rttiType.GetProperties do
    begin
      propertyType := rttiProperty.PropertyType.Handle;
      data := TVirtualData.Create(propertyType) as IInterface;
      value := TValue.From<IInterface>(data);
      //  TValueData(value).FTypeInfo := propertyType;
      rttiProperty.SetValue(obj, value);  //  <<====  EInvalidCast
    end;
  finally
    rttiContext.Free;
  end;
end;

procedure Test_UsingDirectInstantiation;
var
  dataHolder: TDataHolder;
begin
  dataHolder := TDataHolder.Create;
  try
    dataHolder.TestData := TVirtualData.Create(TypeInfo(ITestData)) as ITestData;
    dataHolder.MoreData := TVirtualData.Create(TypeInfo(IMoreData)) as IMoreData;

    dataHolder.TestData.Comment := 'Hello World!';
    dataHolder.MoreData.Success := True;

    Writeln('Comment:  ', dataHolder.TestData.Comment);
    Writeln('Success:  ', dataHolder.MoreData.Success);
  finally
    dataHolder.Free;
  end;
end;

procedure Test_UsingIndirectInstantiation;
var
  dataHolder: TDataHolder;
begin
  dataHolder := TDataHolder.Create;
  try
    InstantiateData(dataHolder);  //  <<====

    dataHolder.TestData.Comment := 'Hello World!';
    dataHolder.MoreData.Success := False;

    Writeln('Comment:  ', dataHolder.TestData.Comment);
    Writeln('Success:  ', dataHolder.MoreData.Success);
  finally
    dataHolder.Free;
  end;
end;

begin
  try
    Test_UsingDirectInstantiation;
    Test_UsingIndirectInstantiation;
  except on E: Exception do
    Writeln(E.ClassName, ':  ', E.Message);
  end;
  Readln;
end. 
```

我有一些具有读/写属性的任意接口，`ITestData`和`IMoreData`，以及一个包含对这些接口的引用的类，`IDataHolder`。

按照 Nick Hodges 的示例，我创建了一个`TVirtualData`继承自的类。`TVirtualInterface`当我按照我在所有示例中看到的方式使用这个类时，就像在 中一样`Test_UsingDirectInstantiation`，它的效果非常好。

然而，我的代码需要做的是以更间接的方式实例化接口，如`Test_UsingIndirectInstantiation`.

该`InstantiateData`方法使用 RTTI，并且在`SetValue`调用引发 EInvalidCast 异常（“Invalid class typecast”）之前运行良好。

我在注释行（我在“Delphi Sorcery”的一些示例代码中看到）添加了尝试将数据对象转换为适当的接口。这允许`SetValue`调用干净地运行，但是当我尝试访问接口属性（即`dataHolder.TestData.Comment`）时，它引发了 EAccessViolation 异常（“地址 00000000 的访问冲突。读取地址 00000000”）。

为了好玩，我`IInterface`在`InstantiateData`方法中替换为`ITestData`，并且对于第一个属性它工作正常，但自然地，它不适用于第二个属性。

**问题：** 有没有办法`TVirtualInterface`使用 TypeInfo 或 RTTI（或其他东西）将此对象动态转换为适当的接口，以便该`InstantiateData`方法与直接设置属性具有相同的效果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T06:35:08.217

首先，您必须将实例转换为正确的接口而不是 IInterface。您仍然可以将它存储在 IInterface 变量中，但它确实包含对正确接口类型的引用。

然后您必须将其放入具有正确类型而不是 IInterface 的 TValue 中（RTTI 对类型非常严格）

您添加的注释行只是为了解决第二个问题，但由于它实际上包含 IInterface 引用（而不是 ITestData 或 TMoreData 引用），它导致了 AV。

```
procedure InstantiateData(obj: TObject);
var
  rttiContext:  TRttiContext;
  rttiType:     TRttiType;
  rttiProperty: TRttiProperty;
  propertyType: PTypeInfo;
  data:         IInterface;
  value:        TValue;
begin
  rttiType := rttiContext.GetType(obj.ClassType);
  for rttiProperty in rttiType.GetProperties do
  begin
    propertyType := rttiProperty.PropertyType.Handle;
    Supports(TVirtualData.Create(propertyType), TRttiInterfaceType(rttiProperty.PropertyType).GUID, data);
    TValue.Make(@data, rttiProperty.PropertyType.Handle, value);
    rttiProperty.SetValue(obj, value);
  end;
end; 
```

# swift - 本地通知是否需要 iOS 上的用户权限？

> ID：16048837
> 
> 赞同：25
> 
> 时间：2013-04-16T23:18:14.633
> 
> 标签：swift, notifications, local, uilocalnotification

我在我的应用程序中使用 UILocalNotification 来安排通知。通知工作正常，并在我需要时显示。我对此没有意见。我没有做任何远程/推送通知。

让我想知道的是，我从未见过您通常在多个应用程序中看到的用于推送通知的著名权限对话框。我什至重置了我的设备并运行了我的应用程序。那仍然没有导致权限对话框出现。

如果您的应用程序仅使用本地通知，或者我没有实现某些实际导致应用程序请求此权限的方法，此权限对话框是否不会显示？

我知道我可以在应用程序启动后实现我自己的对话框，要求用户提供此权限，但我希望 Apple 能够处理好这一点，特别是因为它在“设置”应用程序中对远程和本地通知的处理方式相同。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-10-30T15:09:17.900

是的，在 iOS8 中，本地通知确实需要权限。

**registerUserNotificationSettings:**的[文档](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplication_Class/index.html#//apple_ref/occ/instm/UIApplication/registerUserNotificationSettings: "The documentation")规定

> 如果您的应用程序在后台显示警报、播放声音或标记其图标，则您必须在启动周期中调用此方法以请求以这些方式提醒用户的权限。通常，**如果您的应用程序使用本地**或推送**通知**来提醒用户注意涉及您的应用程序的新信息，则您会提出此请求。
> 
> 建议您**在安排任何本地通知**或注册推送通知服务之前调用此方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-16T22:02:52.720

看起来本地通知不需要任何用户权限。权限对话框仅显示推送通知。我可以在没有任何用户许可的情况下安排/取消本地通知。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-19T04:28:51.790

注意：这包括推送通知/远程通知

当使用 Xcode6 和 iOS7 或 iOS8 时测试 registerUserNotificationSettings: API 在运行时可用。

```
if ([application respondsToSelector:@selector(registerUserNotificationSettings:)]) {  
    UIUserNotificationSettings* notificationSettings = [UIUserNotificationSettings settingsForTypes:UIUserNotificationTypeAlert | UIUserNotificationTypeBadge | UIUserNotificationTypeSound categories:nil];  
    [[UIApplication sharedApplication] registerUserNotificationSettings:notificationSettings];  
    [[UIApplication sharedApplication] registerForRemoteNotifications];  
} else {  
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes: (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];  
} 
```

感谢[http://corinnekrych.blogspot.ae/2014/07/how-to-support-push-notification-for.html](http://corinnekrych.blogspot.ae/2014/07/how-to-support-push-notification-for.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-17T21:53:13.917

Apple 的 presentLocalNotificationNow 和 scheduleLocalNotification 文档说，

> 在安排任何本地通知之前，您必须调用 registerUserNotificationSettings: 方法让系统知道您计划向用户显示的警报类型（如果有）。

所以我不确定这个页面中的其他人是如何说本地通知不需要用户权限的。

查看有关同一主题的其他讨论：

[请求用户权限以在 iOS 8 中接收 UILocalNotifications](https://stackoverflow.com/questions/24100313/ask-for-user-permission-to-receive-uilocalnotifications-in-ios-8)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-02T09:01:16.207

对，那是正确的。本地通知不需要任何操作系统权限。但是，作为一种好的做法，我建议在这种情况下从您的应用程序中为用户提供一个退出选项。这将通过两种方式很好地工作：

1.  一个恼火的用户，因为一次又一次地看到本地通知而感到沮丧，不知道推送/本地通知之间的区别可能会在应用商店留下差评。
2.  提供标志来为给定用户打开/关闭此类功能始终是一个好习惯。

# ios - 无法识别的实例发送到 - 代表

> ID：16048842
> 
> 赞同：0
> 
> 时间：2013-04-16T23:18:38.117
> 
> 标签：ios, objective-c, uiview, cocos2d-iphone, delegates

我创建了一个静态库，用于我的其他 iOS 应用程序项目。它的工作方式是应用程序项目在我的静态库中实现协议并调用静态库中的方法。然后静态库在调用视图之上呈现一个视图。代码如下：

委托中主类的 MyFile.h 文件：

```
@protocol MyHandlerDelegate <NSObject>

     - (void)infoRetrieved:(BOOL)success;

@end

@interface MyFile : UIViewController
{
    id <MyHandlerDelegate> delegate;
}

@property (retain) id delegate; 
```

MyFile.m 包含：

```
- (void)showRewards
{
    [[[self delegate] view] addSubview:view1];
} 
```

现在，当我只用一个按钮创建一个虚拟应用程序时，它工作得很好，静态库成功地在调用视图的顶部呈现了一个视图。现在我需要在一个开源游戏 TweetJump（基于 Cocos2D 构建）中完成这项工作。在高分类中，我包含了头文件并实现了委托。在实现文件中，我调用以下代码：

```
MyFile *mf = [[MyFile alloc] init];
[mf setDelegate:self];
[mf showRewards]; 
```

为了您的考虑，我主持了 Highscore 课程 - [Header](https://dl.dropboxusercontent.com/u/90817764/Highscores.h)和[Implementation](https://dl.dropboxusercontent.com/u/90817764/Highscores.m)。执行上述方法时出现的错误是：

`2013-04-16 23:54:42.658 tweejump[11502:c07] +[Highscore view]: unrecognized selector sent to class 0xecc08 2013-04-16 23:54:42.661 tweejump[11502:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[Highscore view]: unrecognized selector sent to class 0xecc08'`

我知道这是一个乏味的问题。将非常感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:22:15.413

它告诉你 Highscore 类没有视图方法。你的协议说委托只需要是一个 NSObject 没有更具体的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:23:52.173

看起来您是在类方法而不是实例方法中调用此代码。对象不能与其类互换。让您的实际 Highscore 对象而不是类来执行此操作。

# html - 链接中的简单下拉菜单？

> ID：16048845
> 
> 赞同：-1
> 
> 时间：2013-04-16T23:19:07.070
> 
> 标签：html, css, drop-down-menu

我需要从链接创建一个简单的下拉列表。当用户单击超链接时，将出现下拉菜单。

菜单部分将有一个渐变。它不需要任何悬停效果。它将有几个可点击的项目。没有按钮或任何其他装饰。

有没有人有一个如何创建这种类型的下拉的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:41:06.040

如果您想要涉及 jQuery 的解决方案，这里有一个示例。

**HTML**

```
<a href="#">Click me!</a>
<ul>
    <li><a href="">Link 1</a></li>
    <li><a href="">Link 2</a></li>
    <li><a href="">Link 3</a></li>
</ul> 
```

**CSS**

```
ul {
    list-style-type: none;
    padding: 0;
    width: 200px;
    border: 1px solid red;
    display: none;
}

ul li a {
    display: block;
} 
```

**jQuery**

```
$(document).ready(function(){
    $("a").click(function(){
        $(this).next().toggle();
    });
}); 
```

这是演示[http://jsfiddle.net/qrQR8/](http://jsfiddle.net/qrQR8/)

* * *

如果您想要纯 CSS 解决方案（基于问题上的标签），这里是使用复选框的示例。

**HTML**

```
<label for="trigger">Click me!</label>
<input type="checkbox" id="trigger" name="trigger"/>
<ul>
    <li><a href="">Link 1</a></li>
    <li><a href="">Link 2</a></li>
    <li><a href="">Link 3</a></li>
</ul> 
```

**CSS**

```
ul {
    list-style-type: none;
    padding: 0;
    width: 200px;
    border: 1px solid red;
    display: none;
}

input[name=trigger] {
    display: none;
}

ul li a {
    display: block;
}

label {
    cursor: pointer;
}

input[name=trigger]:checked + ul {
    display: block;
} 
```

这是演示[http://jsfiddle.net/qrQR8/1/](http://jsfiddle.net/qrQR8/1/)

* * *

您可以使用`:target`选择器和好处，但您不能在单击后再次隐藏菜单。

[http://jsfiddle.net/qrQR8/2/](http://jsfiddle.net/qrQR8/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T23:32:24.120

这是一个javascript解决方案：

Javascript：

```
$( "#link" ).mousedown( function( ){

    $( this ).next( ).show( 100 );
}); 
```

HTML：

```
<div>
<div id="link">Click me</div>
    <div syle="display:none">

        <div>This item</div>
        <div>That item</div>
        <div>Other item</div>

    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T23:45:02.327

我会推荐你​​使用[jQuery Superfish Menu](http://www.electrictoolbox.com/jquery-superfish-menus-plugin/)。

它有一个很好的平滑效果，它甚至兼容 IE6（是的，不幸的是有一些丑陋的项目 - 是的，UGLY - 需要兼容）。

更改它的 CSS 非常容易。它是一个高度可定制的插件。

# php - 如何在php中从json数组中调用一个变量

> ID：16048849
> 
> 赞同：0
> 
> 时间：2013-04-16T23:19:19.260
> 
> 标签：php, jquery, json

```
 vars["price"] = $('#awp_p_impact').val(); //here I will add plus the calculation of the heigh..
        vars["test"] = 100;
        vars["weight"] = $('#awp_p_weight').val();
        vars["quantity"] = $('#quantity_wanted').val();
        vars["quantity_available"] = $('#quantityAvailable').length?$('#quantityAvailable').html():awp_quantity;
        vars["id_product"] = $('#product_page_product_id').val();
        vars["awp_isie"] = ($.browser.msie?"1":"0");
        vars["allow_oos"] = allowBuyWhenOutOfStock?"1":"";

$.ajax({
        type: 'POST',
        url: baseDir + 'modules/attributewizardpro/combination_json.php',
        async: false,
        cache: false,
        dataType : "json",
        data: vars, 
```

如何获取/调用 combination_json.php 中的 vars["test"] ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:26:59.960

当您通过 Ajax（一个包含属性的对象）发布数据时，所有这些内容都将在`$_POST`PHP 脚本的全局变量中找到。

您可以通过（例如）访问它们：

```
$test = $_POST['test'];

// $test should contain "100" 
```

# xml - 使用 XSLT 围绕 XML 包装 SOAP 标记/标头

> ID：16048851
> 
> 赞同：3
> 
> 时间：2013-04-16T23:19:39.010
> 
> 标签：xml, xslt

我正在尝试找到可以执行以下操作的 XSLT。

我正在尝试将 XML 消息包装在快速肥皂信封 (xml) 中。源 XML 不是一成不变的，所以 XSLT 不应该关心 XML 是什么。它确实需要从 XML 顶部剥离 XML 声明。

例子：

```
<?xml version="1.0"?>
<foo>
    <bar />
</foo> 
```

转换为：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns="urn:hl7-org:v3">
    <soapenv:Header/>
    <soapenv:Body>
          <foo>
            <bar />
          </foo>
    </soapenv:Body>
</soapenv:Envelope> 
```

* * *

示例 2：

```
<lady>
  <and>
   <the>
    <tramp />
   </the>
  </and>
</lady>

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns="urn:hl7-org:v3">
    <soapenv:Header/>
    <soapenv:Body>
         <lady>
           <and>
              <the>
                  <tramp />
             </the>
           </and>
         </lady>
    </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:28:11.057

这个 XSLT：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:template match="*">
        <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"  xmlns="urn:hl7-org:v3">
            <soapenv:Header/>
            <soapenv:Body>
                <xsl:copy-of select="/*"/>
            </soapenv:Body>
        </soapenv:Envelope>
    </xsl:template>
</xsl:stylesheet> 
```

输出此 XML：

```
<soapenv:Envelope xmlns="urn:hl7-org:v3" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Header/>
   <soapenv:Body>
      <lady xmlns="">
         <and>
            <the>
               <tramp/>
            </the>
         </and>
      </lady>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T23:41:09.607

您可以使用它（类似于 Phoenixblade9 的答案，但不使用`xsl:element`）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns="urn:hl7-org:v3">
            <soapenv:Header/>
            <soapenv:Body>
                <xsl:copy-of select="*"/>
            </soapenv:Body>
        </soapenv:Envelope>
    </xsl:template>

</xsl:stylesheet> 
```

# zend-framework2 - 输入特定的对象值

> ID：16048862
> 
> 赞同：0
> 
> 时间：2013-04-16T23:20:34.047
> 
> 标签：zend-framework2

我正在使用 zendframwork 2，我在官方文档 [http://framework.zend.com/manual/2.1/en/user-guide/overview.html#the-tutorial-application](http://framework.zend.com/manual/2.1/en/user-guide/overview.html#the-tutorial-application)中实现了专辑示例 （所以在我的模型中文件夹我有 Album.php 和 AlbumTable.php）并且一切正常，我只想做一个小修改：

我想访问专辑中的第三个元素。在 index.phtml 视图中（最初我有这个代码）

```
<?php foreach ($albums as $album) : ?>

<?php echo $this->escapeHtml($album->title);?>
<?php echo $this->escapeHtml($album->artist);?>

<?php endforeach; ?> 
```

我试过像

```
<?php echo $this->escapeHtml($album->title[3]);?>
<?php echo $this->escapeHtml($album[3]->title);?>

but i always get this error 
( ! ) Fatal error: Cannot use object of type Auth\Model\Album as array in   C:\wamp\www\zf2-album\module\Auth\view\auth\auth\index.phtml on line 14 
```

请问有什么帮助吗？感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:51:59.530

你只需要第三个吗？然后编写查询以提高效率；）对于所有其他情况，由于您使用的是 a [`Zend\Db\ResultSet\ResultSet`](https://github.com/zendframework/zf2/tree/master/library/Zend/Db/ResultSet)，因此[`Iterator`](http://php.net/manual/de/class.iterator.php)您有不同的选择。

第一个是仍然遍历字段集，例如

```
while ($albums->key() != 3) {
    $albums->next();
}
$album = $albums->current(); 
```

`ResultSet`另一种方法是简单地将[`array`](https://github.com/zendframework/zf2/blob/master/library/Zend/Db/ResultSet/AbstractResultSet.php#L254)

```
$myAlbums = $albums->toArray();
$album    = $myAlbums[3]; 
```

根据您的`ResultSet`规模和您真正需要的条目数量，任一解决方案可能对您来说更快。猜猜你必须测试那个;）

# google-chrome - Chrome 浏览器与 Google TV 上的 Chrome

> ID：16048865
> 
> 赞同：0
> 
> 时间：2013-04-16T23:20:50.517
> 
> 标签：google-chrome, google-tv

Google TV 上的 Chrome 与我在桌面上使用的 Chrome 是否不同？如果是，有什么区别？

我问这个问题是因为我注意到我的雅虎页面在我的 Chrome 桌面上的加载方式与谷歌电视上的 Chrome 不同。

谢谢您的帮助。伊夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:26:58.193

> **Google TV 浏览器与我个人计算机上的浏览器是否不同？我可以访问相同的内容吗？**
> 
> Google TV 上的浏览​​器基本上是 Google Chrome 11 的 Linux 版本。虽然用户 > 界面针对 TV 外形进行了轻微修改，但大部分渲染和 Web 平台功能与桌面版 Google Chrome 一致，您将收到自动进行最新更新。

从这里： [https ://developers.google.com/tv/faq#browserdifference](https://developers.google.com/tv/faq#browserdifference)

通过搜索找到： [https ://www.google.com/search?q=chrome+google+tv+vs+chrome+desktop](https://www.google.com/search?q=chrome+google+tv+vs+chrome+desktop)

# java - 在井字游戏上使用极小极大的游戏策略？

> ID：16048869
> 
> 赞同：1
> 
> 时间：2013-04-16T23:20:56.110
> 
> 标签：java, artificial-intelligence, tic-tac-toe

假设有 4 种可能的走法，并且都保证玩家 O 会输。没有抽签或获胜的机会。X 最终总是会赢。

那么在这4个动作中，选择O快速结束游戏的动作更好还是在几个动作之后更晚？

如果我不费心想出一个策略而只是随机选择一个动作，那么当然会使用更少的内存。

注意：我并不总是从空白板开始并在随机游戏状态下测试我的解决方案。此外，两个玩家都是电脑，因此玩了一场完美的游戏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:24:58.847

如果人类玩 X，那么最好在几步之后为 O 选择结束游戏的棋步，以防人类玩家犯错误。

# asp.net - 使用 WebAPI odata 进行单元测试

> ID：16048871
> 
> 赞同：1
> 
> 时间：2013-04-16T23:22:12.710
> 
> 标签：asp.net, asp.net-web-api, tdd, odata

我正在尝试从基于 WebAPI 的 REST 服务转移到包含 OData 的新实现的服务。我的服务工作正常，但不知道如何创建单元测试来测试 odata 查询选项。

在对 WebAPI 方法进行单元测试时，我习惯于构建 httpRequestMessage 并将其注入到结构中：

```
var request = new HttpRequestMessage();
        request.Headers.Add("UserName", "TestUser");
        request.Headers.Add("Password", password);
        request.Headers.Add("OverRideToken", "false");
        request.Headers.Add("AccessSystem", "Mobile");
        request.Headers.Add("Seed", "testSeed");

        var token = new Token();

        var authController = new AuthorizationController(request);
        try
        {

            var returnValue = authController.Get(); 
```

我将如何注入 odata 请求？我需要验证 $filter、$inlinecount 和其他选项是否返回了正确的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T04:48:44.950

您可以测试您的控制器，也可以针对您的 Web API 的运行实例进行测试（您可能应该同时做这两个）。

测试您的控制器不会实现您想要做的事情，因此您需要通过创建 Web API 应用程序的自托管内存实例来进行测试。然后，您可以在测试类中使用 HttpClient（您必须手动构造 OData 请求），也可以在测试类中使用 WCF 数据服务客户端（这将允许您通过 LINQ 进行查询）。

这是使用 WCF 数据服务客户端的示例：

```
public class ODataContainerFactory
{
    static HttpSelfHostServer server;

    public static MyApplicationServer.Acceptance.ODataService.Container Create(Uri baseAddress)
    {
        var config = new HttpSelfHostConfiguration(baseAddress);

        // Remove self host requirement to run with Adminprivileges
        config.HostNameComparisonMode = System.ServiceModel.HostNameComparisonMode.Exact;

        // Register Web API and OData Configuration
        WebApiConfig.Register(config);

        // Configure IoC
        ConfigureIoC(dataSource, config);

        // Do whatever else, e.g. setup fake data sources etc.
        ...

        // Start server
        server = new HttpSelfHostServer(config);
        server.OpenAsync().Wait();

        // Create container
        var container = new MyApplicationServer.Acceptance.ODataService.Container(new Uri(baseAddress.ToString() + "odata/"));

        // Configure container
        container.IgnoreResourceNotFoundException = true;
        container.IgnoreMissingProperties = true;

        return container;
    }

    private static void ConfigureIoC(MockDatasource dataSource, HttpSelfHostConfiguration config)
    {
        var container = new UnityContainer();
        container.RegisterType<TypeA, TypeB>();
        ...
        ...
        config.DependencyResolver = new IoCContainer(container);
    }

    public static void Destroy()
    {
        server.CloseAsync().Wait();
        server.Dispose();
    }
} 
```

这里的关键是 WebApiConfig.Register(HttpConfiguration config) 方法调用，它正在调用您的 Web API 项目。

请注意，在上述之前，您将需要：

1.  启动您的 Web API 项目
2.  在您的测试类中，将服务引用添加到您的 OData 根路径。

这将创建一个 Container 对象（在上面的 MyApplicationServer.Acceptance.ODataService.Container 示例中），您可以使用它在测试中查询 OData 提要，如下所示：

```
var odataContainer = ODataContainerFactory.Create(new Uri("http://localhost:19194/");

var result = odataContainer.MyEntities
                .Expand(s => s.ChildReferenceType)
                .Where(s => s.EntityKey == someValue).SingleOrDefault(); 
```

# java - 如何将多种字体添加到由 Graphics2D 对象绘制的字符串

> ID：16048875
> 
> 赞同：3
> 
> 时间：2013-04-16T23:22:20.190
> 
> 标签：java, fonts, graphics2d

我有一个`Graphics2D`对象，我想使用它的`drawString`方法。我可以调用该方法并传递一个字符串和 (x, y) 位置，这非常好。但是，我也可以使用需要 Font 对象`Graphics2D`的`setFont`方法来更改对象的字体。这也很好。不幸的是，这对我来说还不够，因为我打算为我的 Font 对象定义多个字体文本。

这是我想转移到我的 Font 对象的文本表示：

```
font-family:&quot;Lucida Grande&quot;, &quot;Lucida Sans Unicode&quot;, Verdana, Arial, Helvetica, sans-serif 
```

我已经看到我可以使用该`AttributedCharacterIterator`界面来解决我的问题，但是，我不确定应该如何使用它。我已经看到实际上有一个名为 的实现，它`AttributedString`有一组当我打电话给他们时。`Attributes``AttributedString``Font``Graphics2D``drawString`

编辑：

```
 public static AttributedString getFontByAttributes(String atts, String value)
    {
        String[] attributes = atts.split(",");
        AttributedString attributedString = new AttributedString(value);
        for (int attributeIndex = 0; attributeIndex < attributes.length; attributeIndex++)
        {
            attributedString.addAttribute(TextAttribute.FONT, attributes[attributeIndex].trim());
        }
        return attributedString;
    }
//...
    public void drawTitle(Graphics2D g2d)
{
//...
        g2d.drawString(getFontByAttributes(Settings.titleFontString, Settings.title).getIterator(), Settings.headerWidthOffset, Settings.headerHeightOffset);
//...
} 
```

在上面的代码中，我尝试使用 Andale Mono，这在我测试此应用程序的系统上是已知的，但是，在生成的图形中，文本以 Times New Roman 字体绘制。出了点问题，不幸的是我不知道我可能会错过什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T00:04:05.517

基本上，`AttributedString`提供了允许您将呈现属性应用于`String`. 看起来真的很明显。

之后，您可以将`AttributedString`'s传递`AttributedCharacterIterator`给以`Graphics2D`进行渲染...

![在此处输入图像描述](https://i.stack.imgur.com/NtvtE.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.font.LineMetrics;
import java.awt.font.TextAttribute;
import java.text.AttributedString;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestAttributedString {

    public static void main(String[] args) {
        new TestAttributedString();
    }

    public TestAttributedString() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            AttributedString text = new AttributedString("Bunny rabits and flying ponies");
            text.addAttribute(TextAttribute.FONT, new Font("Arial", Font.BOLD, 24), 0, "Bunny rabits".length());
            text.addAttribute(TextAttribute.FOREGROUND, Color.RED, 0, "Bunny rabits".length());

            text.addAttribute(TextAttribute.FONT, new Font("Arial", Font.BOLD & Font.ITALIC, 32), 17, 17 + "flying ponies".length());
            text.addAttribute(TextAttribute.FOREGROUND, Color.BLUE, 17, 17 + "flying ponies".length());

            FontMetrics fm = g2d.getFontMetrics();
            LineMetrics lm = fm.getLineMetrics(text.getIterator(), 0, text.getIterator().getEndIndex(), g);

            g2d.drawString(text.getIterator(), 0, (int)lm.getAscent() + lm.getHeight());
            g2d.dispose();
        }
    }

} 
```

您可以查看[此](http://www.javaworld.com/community/node/7635)以获取更多详细信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T23:49:18.313

Graphics2D 有一个`drawString(AttributedCharacterIterator, int, int)`您想要使用的方法。

`TextAttribute.FONT`只需为字符串的每个特定子范围使用所需的所有不同属性构建 AttributedString ，然后调用：

```
g2d.drawString(myAttributedString.getIterator(), x, y); 
```

# c# - 读取音频文件时出错？

> ID：16048877
> 
> 赞同：2
> 
> 时间：2013-04-16T23:22:25.583
> 
> 标签：c#, asp.net, .net, com

我尝试使用以下函数来确定 MP3 文件的长度：

```
public static string GetMP3DurationBackup(string Filename)
{
    string Duration = null;
    WMPLib.WindowsMediaPlayer w = new WMPLib.WindowsMediaPlayer();
    WMPLib.IWMPMedia m = w.newMedia(Filename);
    if (m != null)
    {
        Duration = m.durationString;
    }
    w.close();
    return Duration;
} 
```

我遇到了一个问题，我收到以下错误：

> 由于以下错误，检索具有 CLSID {6BF52A52-394A-11D3-B153-00C04F79FAA6} 的组件的 COM 类工厂失败：80040154..

当我从我的 Web 应用程序调用上述函数时（如下调用）：

```
string test = MediaUtil.GetMP3DurationBackup(@"C:\Temp\Audio\bad.mp3"); 
```

但是当我从我创建的控制台应用程序测试工具中调用它时（与上面的调用完全相同），它工作正常。我已在 Build 属性中将包含该函数的项目设置为以 x86 为目标，但这并没有解决问题。

有谁知道为什么会发生这种情况？关于从哪里开始调试的建议？

**更新赏金：**

好的，我已经尝试了很多方法，但仍然出现此错误。除其他外，我尝试了以下我认为最有希望的步骤，但没有骰子：

1.  进入我的注册表并确认值： `HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{6BF52A52-394A-11d3-B153-00C04F79FAA6}\InprocServer32` 是指`C:\WINDOWS\SysWOW64\wmp.dll`
2.  打开命令提示符，导航到 C:\WINDOWS\SysWow64，运行：`regsvr32.exe wmp.dll`

我已经创建了一个控制台应用程序测试工具，如果我在 x64 中运行测试项目，我能够重现该错误。如果我将它切换到 x86，它工作正常。

有谁知道为什么上述不能解决问题？关于下一步看哪里的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:53:19.047

您说它在 x64 中不起作用，但您尝试注册 wmp.dll 的 32 位版本（`C:\Windows\SysWow64`包含 32 位程序集）。

尝试注册 x64 版本的 wmp.dll，它位于`C:\Windows\System32`64 位平台上。

如果您没有此文件，则可能没有适用于您的平台的 64 位 Windows Media Player。但是有一个解决方法：

创建一个 32 位控制台应用程序，它将 mp3 文件名作为命令行参数并使用 将持续时间输出到标准输出`Console.WriteLine`，然后在 webapp 中，调用控制台应用程序并捕获输出，如[MSDN 上的此示例](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:40:19.633

试一试这个库。它速度快，对要在机器上安装的软件没有特殊要求。

[http://naudio.codeplex.com/](http://naudio.codeplex.com/)

# java - java.lang.NullPointerException，不知道为什么？

> ID：16048879
> 
> 赞同：2
> 
> 时间：2013-04-16T23:22:33.350
> 
> 标签：java, nullpointerexception

我正在编写一个程序，它将一系列单词分成标记并读取文本，然后计算它们的频率。此代码有几个相关代码（WordCount、FreqStudy 和 Echo），但 WordFreq 类是导致 java.lang.NullPointerException 错误的原因。这是我的 WordFreq 代码：

```
import java.util.*;
import java.io.*;

public class WordFreq extends Echo{

  WordCount[] wcArray;
  int ct;
  String[] sentence;
  double freq;
  String newLine;

  public WordFreq(String f, String words) throws IOException{
    super(f);
    String[] wordString = words.split(" ");
    for(int i=0; i<wordString.length; i++)
      wcArray[i] = new WordCount(wordString[i]);
    Scanner scan = new Scanner(new FileReader(fileName));
  }

  public void processLine(String line){
    newLine = line.toLowerCase();
    sentence = newLine.split(" "); 
    for(String s: sentence){
      for(WordCount w: wcArray){
        if(w.getWord().equals(s))
          w.incCount();
      }
      ct++;
    }     
  }

  public void reportFrequencies(){
    for (int i=0; i<wcArray.length; i++){
      freq = (wcArray[i].getCount() / ct); 
      System.out.print(wcArray[i].getWord()+" ");
      System.out.printf("%6.4f\n", freq);
    }
  }
} 
```

当我给它一个文件以通过 FreqStudy 主类读取时，我收到的错误如下所示：

```
java.lang.NullPointerException
    at WordFreq.<init>(WordFreq.java:17)
    at FreqStudy.main(FreqStudy.java:14)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at edu.rice.cs.drjava.model.compiler.JavacCompiler.runCommand(JavacCompiler.java:272) 
```

我真的不明白问题是什么，我整天都在研究这个，所以我觉得脑死了。如果可以的话，请看一下，我将不胜感激。

编辑：我意识到我没有在发布后立即初始化它，但我的频率返回 0 结果。有人帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T23:24:08.980

`wcArray`在分配任何值之前初始化数组：

```
wcArray = new WordCount[wordString.length]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T23:39:14.573

您需要仔细检查堆栈跟踪：

```
java.lang.NullPointerException
    at WordFreq.<init>(WordFreq.java:17) 
```

在 WordFreq ( `WordFreq.java:17`) 的第 17 行附近，它位于 WordFreq 类 ( `WordFreq.<init>`) 的构造函数中，当它是`null`.

```
wcArray[i] = new WordCount(wordString[i]); 
```

可能的候选人：`wcArray`和`wordString`。现在确保这些对象/数组已初始化。`wordString`通过 的返回值做了`split()`，但`wcArray`没有。数组需要分配（`wcArray`）或分配给预先存在的数组（`wordString`）：

```
String[] wordString = words.split(" ");
wcArray = new String[wordString.length]
for(int i=0; i<wordString.length; i++)
  wcArray[i] = new WordCount(wordString[i]); 
```

进一步的考虑：人们可能认为它`wcArray[i]`可能为 null 并导致 NPE，但由于它是赋值的目标，它不会导致 NPE - 该`null`值将被传入的赋值覆盖。

类似地，可能会认为`wordString[i]`可能为 null 并导致 NPE，但这会导致 a`null`被传递给方法，这很好。如果 WordCount 构造函数在传递给它时遇到问题`null`，则堆栈跟踪将在`WordCount`条目上方包含一个`at WordFreq.<init>`条目。

# ios - 从 iOS 应用程序到服务器的 SSL 通信

> ID：16048880
> 
> 赞同：0
> 
> 时间：2013-04-16T23:22:37.740
> 
> 标签：ios, security, networking, ssl

我对 SSL 和一般的安全连接相当陌生。**iOS 应用程序通过安全通信通道与服务器通信所需的主要步骤是什么？**

我知道可能需要 SSL 证书。我打算从受信任的证书颁发机构购买一个。但是我不确定应用程序和服务器是否都需要证书，或者它是否只是服务器。另外我不确定如何处理 SSL 错误。也许有一个库可以帮助解决这个问题，比如 ASIHTTPRequest 或类似的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:32:06.643

如果您使用 HTTPS 作为通信协议并且在您的服务器上拥有有效证书，那么您只需在客户端上更改您的`http://`to `https://`。对于 HTTP 库，现在非常流行的选项是[AFNetworking](https://github.com/AFNetworking/AFNetworking)。它比 ASI 维护得更好，并且具有 ASI 不支持的一些不错的块功能。

就 SSL 错误而言，向最终用户显示警告通常是一个好主意（通过警报视图或其他方式）。它们可能指向真正的安全攻击（但更有可能指向错过配置或过期的证书）。

# c# - C# 中带有 Sha2 的 Rfc2898DeriveBytes

> ID：16048882
> 
> 赞同：3
> 
> 时间：2013-04-16T23:22:52.417
> 
> 标签：c#, password-encryption, sha2

我有一个基于 Rfc2898DeriveBytes 的密码散列机制（基于此处详述的代码：http://crackstation.net/hashing-security.htm [）](http://crackstation.net/hashing-security.htm)。在内部，此类使用 SHA1，CrackStation 链接确实表明 SHA1 是“旧的”，但也指出，尽管 Rfc2898DeriveBytes 在内部使用它，但 Rfc2898DeriveBytes 仍然是一个很好的机制。

我的一个客户的安全部门听说“SHA1 已被攻破”（具体来说，为了签署文件以通过 Internet 传输，SHA1 在某些情况下已被击败 - 事实上，这种“漏洞" 不适用于密码哈希对安全部门无关紧要）。因此，他们要求我们更改密码散列机制以使用 SHA2。

目前，.Net 框架没有在内部使用 SHA2（或 SHA256 等）的 Rfc2898DeriveBytes 等效项。我知道我可以使用反射来获取此类的源代码并对其进行更改，但我一直被告知加密的第一条规则是“不要自己开发”。

这主要是我的客户的政治需求，而不是技术需求，可以通过在通过 Rfc2898DeriveBytes 运行密码之前通过 SHA2 哈希运行密码来轻松满足。但是，我对密码学的了解不足，无法知道这是否可能是坏事——实际上可能会导致客观上不太安全的密码哈希。

有谁知道使用 SHA2 的 Rfc2898DeriveBytes 等效类？或者，有谁知道在 Rfc2898DeriveBytes 之前通过 SHA2 哈希运行密码是否完全安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-10T02:34:27.473

[从“ SecurityDriven.NET](http://securitydriven.net/) ”一书中下载免费的代码示例。找到采用**HMAC**工厂的**PBKDF2**类。可用的工厂包括**SHA2** ( **256** , **384** , **512** )。

 ********之前通过SHA2**哈希运行密码`Rfc2898DeriveBytes`不是正确的做法，即使这不太可能是您正在做的任何事情中最薄弱的部分（您会丢失密码熵）*。*******

# objective-c - 为什么我不能用 MacPorts gcc-mp-4.6 编译 Objective-C/C++ (.mm) 文件？

> ID：16048883
> 
> 赞同：1
> 
> 时间：2013-04-16T23:22:57.383
> 
> 标签：objective-c, gcc, osx-lion, macports

我有一个 C++11 代码库，我使用 OS X Lion 上的 MacPorts 的 gcc 4.6 编译。我还需要编译和链接一些特定于操作系统的 Objective C/C++ 文件以生成最终的可执行文件。我想使用相同的编译器版本来编译整个项目，但是我无法让 gcc 的 MacPorts 版本 4.6 来识别 Objective-C 文件；它总是试图将它们解释为 C++ 代码并忽略 .mm 文件扩展名。（编译这些文件**确实**适用于 gcc 的 Xcode 版本，而不是 MacPorts 版本。但是，gcc 是 4.2 版，我想用 gcc 4.6 或更高版本编译所有内容。）

忘记 IDE 或构建工具：我从编译器的命令行调用中得到相同的结果。也就是说，我记录了一个用于使用 Apple gcc 编译 .mm 文件的命令行，验证是它确实可以从命令行工作，然后运行相同的命令，没有任何改变，但使用了编译器并且它不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:37:36.933

看来我遇到的具体问题可能是由于 Apple 特定的语言扩展，因为我得到的具体错误与[博客文章](http://www.implbits.com/About/Blog/tabid/78/post/building-with-gcc-4-6-on-osx/Default.aspx)中的引用相同：

> 添加这个之后，我在大约 30 秒内都很好，直到我到达我的项目的一部分，其中正在编译一些 COCOA Objective-C UI 内容。
> 
> /Developer/SDKs/MacOSX10.7.sdk/System/Library/Frameworks/Foundation.framework/Headers/NSTask.h:75:24：错误：在'^'令牌/Developer/SDKs/MacOSX10.7之前预期的不合格ID .sdk/System/Library/Frameworks/Foundation.framework/Headers/NSTask.h:75:24: 错误：在 '^' 标记之前预期 ')'
> 
> 哦哦。我知道这是什么。这是 Apple 的“阻止”语言扩展。似乎在一堆系统头文件中使用了块。我认为没有办法使用 MacPorts gcc 解决这个问题。FSF gcc 只是不知道块。对我来说幸运的是，我的 Objective C/C++ 代码中没有任何需要使用 gcc 4.6 编译的内容，所以我只是使用 clang 编译了这个目标。

# c# - 如何将 IntPtr 转换为 Cursor 或 SafeHandle？

> ID：16048885
> 
> 赞同：1
> 
> 时间：2013-04-16T23:23:01.367
> 
> 标签：c#, wpf, cursor, handle

我在 .NET 3.5 中，我发现

```
CursorInteropHelper.Create() 
```

方法[在这里](http://msdn.microsoft.com/en-us/library/system.windows.interop.cursorinterophelper.create%28v=vs.90%29.aspx)。但是，绝对不清楚如何将 IntPtr for cursor 转换为 SafeHandle。[此处](http://msdn.microsoft.com/en-us/library/microsoft.win32.safehandles%28v=vs.90%29.aspx)列出的 SafeHandle 的实现列表不包括 SafeCursorHandle，其他实现是抽象的或不相关的。唯一的方法是创建我自己的 SafeHandle 实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T02:50:10.750

SafeHandle 是一个抽象类。它希望您提供可以释放句柄的具体 SafeHandle 派生类的对象。不幸的是，您忘记提及您是如何获得该 IntPtr 的，因此我们不知道应该如何发布它。

我会猜测一下，假设它是一个 GDI 游标，您可以从 CreateCursor() winapi 函数中获得它。这需要调用 DestroyCursor() 来释放句柄。这样的类可能如下所示：

```
class SafeCursorHandle : Microsoft.Win32.SafeHandles.SafeHandleZeroOrMinusOneIsInvalid {
    public SafeCursorHandle(IntPtr handle) : base(true) {
        base.SetHandle(handle);
    }
    protected override bool ReleaseHandle() {
        if (!this.IsInvalid) {
            if (!DestroyCursor(this.handle))
                throw new System.ComponentModel.Win32Exception();
            this.handle = IntPtr.Zero;
        }
        return true;
    }
    [System.Runtime.InteropServices.DllImport("user32.dll", SetLastError = true)]
    private static extern bool DestroyCursor(IntPtr handle);
} 
```

根据需要调整 ReleaseHandle() 覆盖以在您的情况下释放句柄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T07:23:43.333

根据 MSDN 文档，ReleaseHandle() 绝不会失败：http: [//msdn.microsoft.com/de-de/library/system.runtime.interopservices.safehandle.releasehandle%28v=vs.110%29.aspx](http://msdn.microsoft.com/de-de/library/system.runtime.interopservices.safehandle.releasehandle%28v=vs.110%29.aspx) “因为SafeHandle 的功能之一是保证防止资源泄漏，您在 ReleaseHandle 实现中的代码绝不能失败。”

IMO，这意味着它不能抛出 - 就像原生析构函数一样。

# java - 对输入流（套接字）的读写感到困惑

> ID：16048890
> 
> 赞同：0
> 
> 时间：2013-04-16T23:23:39.593
> 
> 标签：java, sockets

我有一个关于从与套接字相关的输入流中读写的问题。例如，我有

```
ServerSocket testie = new ServerSocket(0);
Socket putClient = new Socket("localhost",testie.getLocalPort());
InputStream is = putClient.getInputStream();
OutputStream os = putClient.getOutputStream();
os.write("testt".getBytes());
System.out.println(convertStreamToString(is)); 
```

但是奇怪的是从未打印过“testt”。方法`convertStreamToString`来自

> [将 InputStream 读取/转换为字符串](https://stackoverflow.com/questions/309424/read-convert-an-inputstream-to-a-string)

```
public static String convertStreamToString(java.io.InputStream is) {
    java.util.Scanner s = new java.util.Scanner(is).useDelimiter("\\A");
    return s.hasNext() ? s.next() : "";
} 
```

我对流和套接字的理解是否存在一些缺陷。我认为如果您写入套接字的输出流，您可以从其输入流中检索它吗？该方法只是无限期地挂起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T02:15:40.747

如果您写入套接字的输出流，则可以从*远程*套接字的输入流中读取。在您的代码中，您正在写入套接字的一侧，然后尝试从同一侧读取。

不幸的是，您甚至还没有创建远程套接字。您要做的下一件事是调用`accept()`. `ServerSocket`这将接收来自的连接`putClient`并创建一个`Socket`. 这个新的套接字将是服务器端的套接字。基本上，您将拥有以下内容：

```
//Server Thread
ServerSocket testie = new ServerSocket(0);
Socket remoteSocket = testie.accept();
remoteIs = remoteSocket.getInputStream();
remoteOs = remoteSocket.getOutputStream();
System.out.println(new Scanner(remoteIs).next());

//Client Thread
Socket putClient = new Socket("localhost",testie.getLocalPort());
InputStream is = putClient.getInputStream();
OutputStream os = putClient.getOutputStream();
os.write("testt\n".getBytes());
os.flush(); 
```

请注意，我说的是两个不同的线程。问题是调用`testie.accept()`将阻塞，直到它获得连接。而且，`new Socket("localhost",testie.getLocalPort())`将阻塞直到建立连接。这些调用不能在同一个线程上进行。

更新：

可能值得指出的是，我对这种`convertStringToStream`方法不是很有信心。您可能想从简单的东西开始，比如我在上面修复的内容（注意 write 调用中的换行符）。

# erlang - Erlang 中 Map 的基本示例

> ID：16048891
> 
> 赞同：0
> 
> 时间：2013-04-16T23:23:46.887
> 
> 标签：erlang

学习 Erlang 的第二天。我试图通过创建一个简单的 map 函数来学习在 Erlang 中使用 Map 的基础知识，该函数接受任何谓词和列表（由用户传入）并检查谓词是否返回 true 或 false 并将结果存储在列表中。

因此，如果用户`(> 3)`作为谓词传入并且列表包含`[3,4,5]`所需的输出将是`[false, true, true]`.

这是我尝试过的：

```
applyMap (P, LST) -> lists:map(P LST). 
```

我很感激任何关于如何做到这一点的建议。

提前谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T01:10:18.670

我认为您只是`,`在`P`调用. 试试这个：`LST``lists:map`

```
applyMap (P, LST) -> lists:map(P, LST). 
```

如果你将匿名函数传递`fun(X) -> X > 3 end`给你的`applyMap`，你应该得到你想要的输出。

例子：

```
applyMap (fun(X) -> X > 3 end, LST). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:54:27.397

有两个问题：首先，您缺少 and 之间的逗号`P`，`LST`但是其次，您不能使用 Haskell 风格的柯里化函数，例如`(> 3)`. `lists:map((> 3), [1,2,3])`在 Erlang 中是不正确的。

在 Haskell 中，`(> 3)`是 的咖喱形式`\n -> n > 3`。在 Erlang 中，您必须明确地编写它：

```
lists:map(fun(N) -> N > 3 end, [2,4,6]) 
```

# .net - 如何一次将多行文本写入文件？

> ID：16048895
> 
> 赞同：1
> 
> 时间：2013-04-16T23:23:52.907
> 
> 标签：.net, vb.net, file-io, multiline, streamwriter

我需要一次将大量文本写入文件，但它必须以特定方式格式化，而不是全部在一行中。

我的代码是：

```
 If System.IO.File.Exists(filepath) Then
        Using reader As StreamReader = New StreamReader(filepath)
            sLine = reader.ReadToEnd
        End Using

        Using writer As StreamWriter = New StreamWriter(filepath)
            writer.Write("[HealthBarSettings]
            MaxHealthTicks = 50
            MaxHealthMicroTicks = 100
            DefaultHealthPerMicroTick = 50
            DefaultHealthPerTick = 200
            DefaultHealthPerMegaTick = 1000

            TickAlpha = 200
            MicroTickAlpha = 140
            MicroTickHeight = 0.5
            MegaTickAlpha = 255
            TickThickness = 1.0
            MicroTickThickness = 1.0
            MegaTickThickness = 2.0

            UseCompression = 1
            GoTransparent = 1

            [GeneralDataHero]()
            FadeTimerForHealthBar = 2.0
            ZeroHealthAlpha = 225
            FullHealthAlpha = 200
            DefaultChampionCollisionRadius = 65.0")

        End Using
        MsgBox("File Written")
    Else
        MsgBox("File does not exist")
    End If 
```

但这不起作用，因为它不会使用所有文本，而只是使用“[HealthBarSettings]”并在此之后自动结束引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:29:16.303

VB.NET 不支持多行字符串文字。您必须自己手动指示换行符。

例如：

```
If System.IO.File.Exists(filepath) Then
    Using reader As StreamReader = New StreamReader(filepath)
        sLine = reader.ReadToEnd
    End Using

    Using writer As StreamWriter = New StreamWriter(filepath)
        writer.Write("[HealthBarSettings]" & vbNewLine & _
        "MaxHealthTicks = 50" & vbNewLine & _
        "MaxHealthMicroTicks = 100" & vbNewLine & _
        "DefaultHealthPerMicroTick = 50" & vbNewLine & _
        "DefaultHealthPerTick = 200" & vbNewLine & _
        "DefaultHealthPerMegaTick = 1000" & vbNewLine & _
        vbNewLine & _
        "TickAlpha = 200" & vbNewLine & _
        "MicroTickAlpha = 140" & vbNewLine & _
        "MicroTickHeight = 0.5" & vbNewLine & _
        "MegaTickAlpha = 255" & vbNewLine & _
        "TickThickness = 1.0" & vbNewLine & _
        "MicroTickThickness = 1.0" & vbNewLine & _
        "MegaTickThickness = 2.0" & vbNewLine & _
        vbNewLine & _
        "UseCompression = 1" & vbNewLine & _
        "GoTransparent = 1" & vbNewLine & _

        ' etc...

    End Using
    MsgBox("File Written")
Else
    MsgBox("File does not exist")
End If 
```

如果您使用存储在变量中的用户偏好值动态构建字符串，而不是对所有内容进行硬编码，那么这样做会更容易并且看起来更明智。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:05:48.403

Cody Gray 非常清楚地提到了它，所以我不确定你是如何在最后一行出现错误的。

请记住，您所做的只是制作一个长字符串来保存。如果你愿意，你可以把整件事写在一行上。

vbnewline 添加一个换行符（清除），准备好的＆符号添加另一行，您看到的下划线用于允许代码*显示在多行上（可选）。

作者的最后一段代码应该是。

```
..."[GeneralDataHero]()" & vbNewLine & _
"FadeTimerForHealthBar = 2.0" & vbNewLine & _
"ZeroHealthAlpha = 225" & vbNewLine & _
"FullHealthAlpha = 200" & vbnewline & _
"DefaultChampionCollisionRadius = 65.0")

End Using 
```

您收到的表达式预期错误听起来像是以 & 符号或下划线字符结尾。它应该如上所示以“引号”中的最后一个字符串值和一个右括号结束。

开始 vb.net 时，我发现将所有内容添加到单个字符串中更容易，然后将字符串放入编写器中。最后浪费时间，但使用 string = string & value 可以更清晰地组合在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T06:42:23.453

在类似的注释中，如果要将文本框中的多行文本保存到文件中，请使用以下代码：

```
 Dim iText As New System.IO.StreamWriter("C:\Test.txt", True)

    For Each iLineTxt As String In Textbox1.Lines
        iText.WriteLine(iLineTxt)
    Next

    iText.Close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T05:06:49.397

如何使用字符串生成器执行此操作的示例

```
Dim sb as new StringBuilder
sb.appendLine("Line1")
sb.appendLine("Line2")
File.writeAllLines(filePath, sb.toString()) 
```

这是一个很好的方法，因为字符串生成器对象比重复连接字符串更有效，详细信息[在这里](http://blogs.msdn.com/b/rahulso/archive/2006/08/29/string-concatenation-vs-string-builder-_2d00_-the-performance-hit_2100_-see-it-to-believe-it-_3a00_o_2900_.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T03:23:20.620

将所有文本（行）放在一个数组中并使用

```
 var arr = new[]{ "MaxHealthTicks = 50","MaxHealthMicroTicks = 100","DefaultHealthPerMicroTick = 50",
        "DefaultHealthPerTick = 200", "DefaultHealthPerMegaTick = 1000"};

        File.WriteAllLines(@"c:/temp/test.txt", arr); 
```

它将以正确的格式将所有文本行写入新行。 ![文件中的文本](https://i.stack.imgur.com/wRrwL.png)

# javascript - 表单验证正则表达式和 DOM：在表单验证中实现正则表达式的最佳方法是什么

> ID：16048896
> 
> 赞同：1
> 
> 时间：2013-04-16T23:23:53.073
> 
> 标签：javascript, regex, forms, validation, dom

表单验证正则表达式和 DOM：在表单验证中实现正则表达式的最佳方法是什么？

我目前正在这样做，但是当我验证它与值不匹配时：

```
if(this.value.length > 0 && this.value === /^[a-zA-Z]+$/ ); 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:26:27.160

您需要使用该`test()`方法。

```
var patt = /^[a-zA-Z]+$/; //define your RegEx

    if(this.value.length > 0 && patt.test(this.value)){ //check if this.value is longer than one character AND matches your RegEx
           //do something
     }; 
```

见[http://www.w3schools.com/jsref/jsref_regexp_test.asp](http://www.w3schools.com/jsref/jsref_regexp_test.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:22:44.920

为什么你的代码不计算任何值？因为您使用了 typewise equal test `===`。在 JavaScript 世界的动态类型中，它规定：测试这些值的类型是否相同，然后测试值是否相等。因此，当您尝试以这种方式测试某些文本框的值时，它们是字符串

```
typeof('a') 
```

此代码将产生“字符串”，因为 'a' 确实是一个字符串。但：

```
typeof(/^[a-zA-Z]+$/) 
```

这将产生“对象”。如您所见，当您尝试将字符串与对象进行比较时，类型相等性测试将始终返回 false。

那是为了测试对象及其值的相等性。对于正则表达式，请参见“bam”答案。

# javascript - Javascript 在函数中调用函数

> ID：16048897
> 
> 赞同：1
> 
> 时间：2013-04-16T23:23:57.000
> 
> 标签：javascript, jquery

我正在为滑块使用 jquery 插件。它包含一个`pauseSlide`我试图从外部调用的函数。这是插件：

```
(function ($) {
    $.fn.liteSlider = function (options) {

        var defaults = {
            content: '.content',
            width: 500,
            height: 250,
            autoplay: false,
            delay: 3,
            buttonsClass: '',
            activeClass: '',
            controlBt: '',
            playText: ' Play',
            pauseText: 'Pause'
        };

        var options = $.extend(defaults, options);

        var slideNo = 1;
        var timer = 0;
        var playStatus = options.autoplay;
        var thisClass = ($(this).attr('class')).split(' ');
        var theClass = '.' + thisClass[0];
        var count = 0;
        var slides;
        var currentSlide = 1;
        var delay = parseInt(options.delay) * 1000;

        $(this).children(options.content).each(function () {
            slides = ++count;
        });

        function wrapContent(ele) {
            ele.wrap('<div class="sliderContentsWrap" />');
        }

        function applyCss(ele) {
            $('.sliderContentsWrap').css({
                padding: 0,
                margin: 0,
                width: options.width,
                height: options.height,
                overflow: 'hidden',
                position: 'relative'
            });

            ele.css({
                padding: 0,
                margin: 0,
                width: options.width * slides,
                height: options.height,
                position: 'absolute'
            });

            ele.children(options.content).css({
                float: 'left',
                width: options.width,
                height: options.height
            });
        }

        function resetButtons() {
            i = 0;
            $('.' + options.buttonsClass).each(function () {
                i++;
                $(this).addClass('bt' + i);
                $(this).attr('rel', i);
            });
        }

        function goToSlide(theSlide) {

            var animateLeft = -(options.width) * (parseInt(theSlide) - 1);
            $('.sliderContentsWrap' + ' ' + theClass)
                .animate({
                left: animateLeft
            });

            $('.' + options.buttonsClass).each(function () {
                $(this).removeClass(options.activeClass);
                if ($(this).hasClass('bt' + theSlide)) {
                    $(this).addClass(options.activeClass)
                }
            });

            currentSlide = theSlide;
        }

        function autoplay() {
            if (currentSlide < slides) {
                goToSlide(parseInt(currentSlide) + 1);
            } else {
                goToSlide(1);
            }
        }

        function playSlide() {
            clearInterval(timer);
            timer = setInterval(function () {
                autoplay();
            }, delay);

            $(options.controlBt).text(options.pauseText);
            playStatus = true;
        }

        function pauseSlide() {
            clearInterval(timer);
            $(options.controlBt).text(options.playText);
            playStatus = false;
        }

        function init(ele) {
            wrapContent(ele);
            applyCss(ele);
            resetButtons();

            if (options.autoplay == true) {
                playSlide()
            } else {
                pauseSlide();
            }
        }

        return this.each(function () {
            init($(this));

            $('.' + options.buttonsClass).click(function (e) {
                e.preventDefault();
                pauseSlide();
                goToSlide($(this).attr('rel'));
            });

            $(options.controlBt).click(function (e) {
                e.preventDefault();
                if (playStatus == true) {
                    pauseSlide()
                } else {
                    playSlide()
                };
            });

        });

    };

    //added this
    $.liteSlider = {
        pause: function() {
            alert('clicked');
            pauseSlide();
        }
    };   

})(jQuery); 
```

除此之外，我正在使用`$.liteSlider.pause();`它显示警报但它不运行该`pauseSlide()`功能。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T23:57:04.633

关于 jQuery 的插件创作，尤其是命名空间点： [http ://docs.jquery.com/Plugins/Authoring#Namespacing](http://docs.jquery.com/Plugins/Authoring#Namespacing)

> [...] 您应该将插件的所有方法收集在一个对象字面量中，并通过将方法的字符串名称传递给插件来调用它们。[...]

```
(function($) {
    var YourPluginMethods = {
        init: function (options) {
            return this.each(function () {

            });
        },
        pauseSlide : function(options) {
            return this.each(function () {
                // Do some stuff for each instance of your plugin here
            });
        }
    };

    $.fn.YourPlugin = function(method) {        
        // Method calling logic
        if (YourPluginMethods[method]) {
            return YourPluginMethods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (!method || typeof method === 'object') {
            return YourPluginMethods.init.apply(this, arguments);
        } else {
            $.error('Method ' +  method + ' does not exist on jQuery.YourPlugin');
        }
    };
})(jQuery);

$('your-selector').YourPlugin('pauseSlide', {
    speed: 'slow'
}); 
```

一旦你以这种方式声明了你的方法，你就可以在任何 HTML 选择器上调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:29:31.040

问题是调用`pauseSlide`与声明不在同一范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T23:29:52.607

`pauseSlide`超出范围。解决此问题的一种简单方法可能是`var pauseSlide;`在范围内声明某处，然后再分配它。

```
(function ($) {
    var pauseSlide;

    $.fn.liteSlider = function (options) {

        var defaults = {
            content: '.content',
            width: 500,
            height: 250,
            autoplay: false,
            delay: 3,
            buttonsClass: '',
            activeClass: '',
            controlBt: '',
            playText: ' Play',
            pauseText: 'Pause'
        };

        var options = $.extend(defaults, options);

        var slideNo = 1;
        var timer = 0;
        var playStatus = options.autoplay;
        var thisClass = ($(this).attr('class')).split(' ');
        var theClass = '.' + thisClass[0];
        var count = 0;
        var slides;
        var currentSlide = 1;
        var delay = parseInt(options.delay) * 1000;

        $(this).children(options.content).each(function () {
            slides = ++count;
        });

        function wrapContent(ele) {
            ele.wrap('<div class="sliderContentsWrap" />');
        }

        function applyCss(ele) {
            $('.sliderContentsWrap').css({
                padding: 0,
                margin: 0,
                width: options.width,
                height: options.height,
                overflow: 'hidden',
                position: 'relative'
            });

            ele.css({
                padding: 0,
                margin: 0,
                width: options.width * slides,
                height: options.height,
                position: 'absolute'
            });

            ele.children(options.content).css({
                float: 'left',
                width: options.width,
                height: options.height
            });
        }

        function resetButtons() {
            i = 0;
            $('.' + options.buttonsClass).each(function () {
                i++;
                $(this).addClass('bt' + i);
                $(this).attr('rel', i);
            });
        }

        function goToSlide(theSlide) {

            var animateLeft = -(options.width) * (parseInt(theSlide) - 1);
            $('.sliderContentsWrap' + ' ' + theClass)
                .animate({
                left: animateLeft
            });

            $('.' + options.buttonsClass).each(function () {
                $(this).removeClass(options.activeClass);
                if ($(this).hasClass('bt' + theSlide)) {
                    $(this).addClass(options.activeClass)
                }
            });

            currentSlide = theSlide;
        }

        function autoplay() {
            if (currentSlide < slides) {
                goToSlide(parseInt(currentSlide) + 1);
            } else {
                goToSlide(1);
            }
        }

        function playSlide() {
            clearInterval(timer);
            timer = setInterval(function () {
                autoplay();
            }, delay);

            $(options.controlBt).text(options.pauseText);
            playStatus = true;
        }

        pauseSlide = function() {
            clearInterval(timer);
            $(options.controlBt).text(options.playText);
            playStatus = false;
        }

        function init(ele) {
            wrapContent(ele);
            applyCss(ele);
            resetButtons();

            if (options.autoplay == true) {
                playSlide()
            } else {
                pauseSlide();
            }
        }

        return this.each(function () {
            init($(this));

            $('.' + options.buttonsClass).click(function (e) {
                e.preventDefault();
                pauseSlide();
                goToSlide($(this).attr('rel'));
            });

            $(options.controlBt).click(function (e) {
                e.preventDefault();
                if (playStatus == true) {
                    pauseSlide()
                } else {
                    playSlide()
                };
            });

        });

    };

    //added this
    $.liteSlider = {
        pause: function() {
            alert('clicked');
            pauseSlide();
        }
    }; 
```

# ruby-on-rails-3 - 如何将 Rails 2 / RSpec 测试转换为 Rails 3 / RSpec 2 语法？

> ID：16048904
> 
> 赞同：1
> 
> 时间：2013-04-16T23:24:33.330
> 
> 标签：ruby-on-rails-3, rspec2

我正在将 rails 2 应用程序升级到 rails 3 并且不确定如何从我的一个测试中“升级”以下行

```
Category.should_receive(:find).with(:all,:conditions => {:parent_id => @parent_id}, :order => 'disp_order DESC').and_return(@categories_collection) 
```

希望有人可以提供一些指示，因为我不是 100% 确定从哪里开始。

运行此程序时出现以下错误：

```
Failure/Error: Category.should_receive(:find).with(:all,
       (<Category(id: integer, permalink: string, name: string, parent_id: integer) (class)>).find(:all, {:conditions=>{:parent_id=>1}, :order=>"display_order DESC"}) 
```

* ***更新 1**

我现在看到一些非常奇怪的东西，我已经按照 Jim 的解释进行了重构（顺便说一句很好的解释！），但现在得到以下结果：

```
Failure/Error: Category.should_receive(:with_parent).with(1).and_return(@sub_category)
       (<Category(id: integer, permalink: string, name: string, parent_id: integer) (class)>).with_parent(1)
           expected: 1 time
           received: 0 times 
```

但是，如果我将以下内容添加到我的测试中：

```
puts Category.with_parent(1).length.to_s 
```

输出为“1” - 正确/预期值。由于某种原因，RSpec 没有看到这个并抛出错误。你知道为什么会发生这种情况吗？

* ***更新 2**

好的，有趣的是，如果我使用以下测试通过：

```
Category.with_parent(@parent_id).should == [@sub_category] 
```

虽然这失败了：

```
Category.should_receive(:with_parent).with(@parent_id).and_return(@sub_category) 
```

在 rspec2 的上下文中使用 should_receive & .ad_return 有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:51:00.023

从您的测试行来看，被测代码似乎是：

```
Category.find(:all, :conditions => {:parent_id => @parent_id}, :order => 'disp_order DESC') 
```

这种语法在 Rails 3 中被弃用，取而代之的是可链接的 AREL 调用，因此相同的 finder 函数现在可以写成：

```
Category.where(:parent_id => @parent_id).order('disp_order DESC') 
```

您可能会说，由于方法链接，模拟这将变得更加困难。因此，最好的建议是将查找器重构为 Category 类上的一个方法（可能使用范围），该方法可以更容易地隔离和模拟。

例如：

```
class Category << ActiveRecord::Base

  scope :with_parent_id, lambda { |parent_id| where(:parent_id => parent_id).order('disp_order DESC') }

end 
```

然后你可以像这样模拟 finder 调用：

```
Category.should_receive(:with_parent_id).with(@parent_id).and_return(@categories_collection) 
```

# asp.net - 在自定义控件上使用多个带有 linq 数据源的表

> ID：16048909
> 
> 赞同：0
> 
> 时间：2013-04-16T23:24:56.587
> 
> 标签：asp.net, vb.net, linq, datasource

我可能正在为这个问题打开一个麻烦的世界，但这里有。作为项目的一部分，我必须有一种方法来表示大学生的时间表，显示讲座、时间、房间等。我不是编码专家，所以我找到了（并且可以接受 uni）一个开源控件DayPilot lite 的名称`www.daypilot.org`。我现在已经安装了它，并且正在开始弄清楚如何处理它的艰巨任务。我知道我需要将它绑定到数据源。我的问题是，要提供我提到的所有信息，我需要从 3 个表中提取数据。当我在 aspx 页面上设置 LinqDataSource 时，我只能从一个中选择表。我一直在寻找试图找到一些信息的年龄。这是我遇到的最好的：`http://weblogs.asp.net/scottgu/archive/2007/09/07/linq-to-sql-part-9-using-a-custom-linq-expression-with-the-lt-asp-linqdatasource-gt-control.aspx`。

然而，这对我来说没有意义。我看不到他在 asp 代码中实际将多个表连接到 aspx 页面上的数据源的位置。我在这里错过了一些明显的东西吗？是否可能是我通过 linq DS 将其连接到一个表，然后编写查询以提取我需要的其余数据。在那种情况下，如果我只连接到一个表，数据将如何显示在日历中。无论如何，这是日历的asp代码。

```
 `<asp:LinqDataSource ID="LinqDataSource1" runat="server" 
        ContextTypeName="OrionDataClassesDataContext" EntityTypeName="" 
        Select="new (Module, Building_code, Event_type)" TableName="Events">
        </asp:LinqDataSource>
    <DayPilot:DayPilotCalendar ID="DayPilotCalendar1" runat="server" />` 
```

显然，这是非常初步的。有很多工作要做。如果有人可以提供一些（简单的）建议，那就太好了。谢谢....在任何人说之前，我知道我需要摆脱默认名称哈哈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:32:23.303

好吧，我从来没有使用过 LinqDataSource，或者你现在正在做的任何事情。我仍在使用所有 sql-statement-in-code-behind 方法。所以我下面的想法可能行不通。

如果我正确理解您上面的问题，请定义一个视图以返回您的联接表的结果，并将该视图添加到您的 DataContext。在 LinqDataSource 控件中，将 Tablename 属性设置为视图。

# java - Java 代码需要 system.out.println 语句才能运行

> ID：16048912
> 
> 赞同：-1
> 
> 时间：2013-04-16T23:25:17.647
> 
> 标签：java, 2d, system.out

我想知道是否有其他人遇到过这个问题。我游戏中的这一部分代码依赖于 system.out.println 语句才能工作。没有它，它将无法正常运行

```
while(isladder){
 t = Map.tiles[(int) (Player.x + 15 + ScrollManager.xoffset) / 32][(int) ((Player.y ) + ScrollManager.yoffset) / 32];
 if(t.row == 3 && t.col == 5){
        ScrollManager.dy = -.5;
        System.out.println(t.row);
 }else{
    ScrollManager.nogravity = false;
 }
} 
```

这是在有人按下向上键时开始的线程中。这是我正在制作的 2d minecraft 游戏的梯子。如果没有 system.out.println 代码，播放器将一直漂浮在空中。有了它，玩家将像往常一样停在梯子的顶部

（更新）我只是通过添加一个 Thread.sleep(1) 来解决这个问题，以便它运行更顺畅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:40:46.100

您受到线程内内存缓存的影响，这是一种优化技术，当 JIT 确定给定的内存块没有同步问题并且不需要与主内存同步时，它会使用该技术来加速您的程序。

相关问题：[如何演示java多线程可见性问题？](https://stackoverflow.com/questions/2787094/how-to-demonstrate-java-multithreading-visibility-problems)

本质上发生的是这样的：

1) JIT 加载类，并在`while()`循环中读取 2)`isladder`变量没有声明`volatile`，也没有通过任何`synchronized`方式检索，所以 JIT 认为：
“哦，这个变量基本上是本地的 - 我有线程缓存本地的值`isladder`，并且只使用它，所以它运行得更快。”

当您在循环中不包含任何倾向于触发上下文切换的操作时，例如 Thread.sleep()、System.out.println() I/O，缓存的值`isladder`永远不会被刷新。

虽然 Thread.sleep() 表面上解决了问题，但它并没有解决代码中的根本问题，即缺乏对游戏状态的同步访问。您发布的这个线程似乎只修改了滚动窗口，因此相当无害，但是当您使用线程控制动画对象、敌人等事物时，糟糕的多线程实践会导致自发的、看似随机的、不可预测的结果。

# winforms - 如何显示列表中的信息 从 XML 读入？

> ID：16048913
> 
> 赞同：0
> 
> 时间：2013-04-16T23:25:29.790
> 
> 标签：winforms, list, object, xml-serialization, displayobject

到目前为止，A 已经创建了对象类模块和一种输入由不同类型组成的数据的方法。创建对象后，将其存储在列表中，然后可以将这些对象写入 XML 文件或从中读取。我现在遇到的问题是在表单上显示数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:54:09.413

所以基本上它是从 XML 文件中读取的事实是无关紧要的。你真正想知道的是如何在 WinForm 上显示集合中的对象，对吗？有不同的方法。最简单的可能是这样的：

1.  `DataGridView`在您的表格上放置一个
2.  在代码中，这样做：

`myDataGridView.DataSource = myList; //where myList is your List<T>`

# java - 如何在 jfreechart 的 XYPlot 中更改标记大小

> ID：16048916
> 
> 赞同：4
> 
> 时间：2013-04-16T23:25:39.347
> 
> 标签：java, jfreechart

在此问题的选定答案中，我想更改标记大小，我该怎么做？

[X,Y轴设置范围-JfreeChart](https://stackoverflow.com/questions/7231824/setting-range-for-x-y-axis-jfreechart)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T00:30:58.877

您可以通过`XYItemRenderer.setSeriesShape`. 请参考如何[`DefaultDrawingSupplier .createStandardSeriesShapes()`](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/plot/DefaultDrawingSupplier.html#line.279)工作。

```
 XYItemRenderer renderer = xyPlot.getRenderer();
    renderer.setSeriesPaint(0, Color.blue);
    double size = 20.0;
    double delta = size / 2.0;
    Shape shape1 = new Rectangle2D.Double(-delta, -delta, size, size);
    Shape shape2 = new Ellipse2D.Double(-delta, -delta, size, size);
    renderer.setSeriesShape(0, shape1);
    renderer.setSeriesShape(1, shape2); 
```

参考：[JFreeChart：增加数据点的大小](https://stackoverflow.com/a/7116903/2086065)

# powershell - PowerShell Invoke-Expression 命令参数包含逗号

> ID：16048918
> 
> 赞同：5
> 
> 时间：2013-04-16T23:25:46.413
> 
> 标签：powershell, special-characters, mapped-drive

密码中包含 PowerShell 特殊字符怎么办？

```
Invoke-Expression -Command "net use x: $Path /USER:domain1\user1 7Ui4RT,@T /persistent:no" 
```

这在语法上失败了——因为 PowerShell 解释`7Ui4RT,@T`为一个数组：

```
Invoke-Expression -Command "net use x: $Path /USER:domain1\user1 7Ui4RT`,@T /persistent:no" 
```

这在语法上失败了——显然是因为 PowerShell 无法解释`7Ui4RT``,@T`

```
Invoke-Expression -Command "net use x: $Path /USER:domain1\user1 "7Ui4RT,@T" /persistent:no" 
```

这会失败，因为 PowerShell 将其解释`7Ui4RT,@T`为对象，而不是字符串（错误 =“找不到接受参数‘System.Object[]’的位置参数。”）。

我应该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T23:48:00.680

你为什么用它[`Invoke-Expression`](http://go.microsoft.com/fwlink/?LinkID=113343)来评估你的命令？如果您需要动态构建一组参数，可以将它们放在一个数组中：

```
$command = 'net'
$commandArgs = @('use','x:',$Path,'/USER:domain1\usr1','7Ui4RT,@T','/persistent:no')
& $command $commandArgs 
```

如果提前知道命令，可以直接调用：`net $commandArgs`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T23:40:41.573

加上单引号`7Ui4RT,@T`，即

```
'7Ui4RT,@T' 
```

# google-chrome - CakePhp 2.x TCPDF 输出 Chrome

> ID：16048922
> 
> 赞同：2
> 
> 时间：2013-04-16T23:26:10.307
> 
> 标签：google-chrome, cakephp, tcpdf

我正在使用带有 tcpdf 的 CakePHP 2.x 创建 PDF 文件。我想现在将其输出到浏览器，而不保存。

布局->pdf.ctp

```
<?php 
header("Content-type: application/pdf");
echo $content_for_layout;
?> 
```

查看->pdf_testing.ctp

```
<?php
App::import('Vendor', 'xtcpdf');
$pdf = new XTCPDF('P', 'mm', 'USLETTER', true, 'UTF-8', false);

$textfont = 'freesans'; // looks better, finer, and more condensed than 'dejavusans'

$pdf->AddPage();

$pdf->setHeaderData('', '', '', 'RMA#100000');
$pdf->SetTitle('Some Text');
$pdf->SetHeaderMargin(20);
$pdf->SetTopMargin(40);
$pdf->setFooterMargin(20);
$pdf->SetAutoPageBreak(True, PDF_MARGIN_FOOTER);
$pdf->SetAuthor('Any Author');
$pdf->SetDisplayMode('real', 'default');

$pdf->SetTextColor(0, 0, 0);
$pdf->SetFont($textfont, 'B', 20);
$pdf->Cell(0, 14, "TESTING", 0, 1, 'L');
echo $pdf->Output('filename.pdf', 'I');

?> 
```

对于 Internet Explorer，这可以正常工作并显示 PDF。

使用 Chrome，我只能得到非常用户友好的输出，例如：

```
%PDF-1.7 %���� 10 0 obj << /Type /Page /Parent 1 0 R /Las.... 
```

即使我将其设置为

```
echo $pdf->Output('filename.pdf', 'F'); 
```

要将其保存为文件，我仍然会得到“内容长度：20”，并且对于内联选项“I”，我总是得到内容类型 HTML/文本而不是应用程序/pdf。

任何想法都非常感谢。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T17:20:33.677

不要`header`在布局文件中包含调用，而是尝试将以下代码添加到控制器方法中：

```
$this->response->type('application/pdf'); 
```

Cake 准备好后会发送标题，因此您不应该将它们直接包含在您的视图/布局文件中。如果要设置标头，则应使用响应的标头方法，例如：

```
$this->response->header('Location', 'http://example.com'); 
```

我不确定这是否会解决您的问题，因为我无法对其进行测试，但我认为它有一个很好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T09:21:13.270

我有同样的问题，并通过在 cakephp 控制器方法中禁用自动渲染来修复它：

```
$this->autoRender = false; 
```

# entity-framework - 需要从其他节点属性获取对xml节点的引用

> ID：16048923
> 
> 赞同：0
> 
> 时间：2013-04-16T23:26:10.783
> 
> 标签：entity-framework, xpath

当您在 Entity Framework 中序列化对象时，只有该对象的第一个实例被序列化，之后对同一对象的引用将指向第一个实例。我无法获得正确的 xpath 来获取第一个实例的句柄，因此我可以读取它的属性。例如，假设我有这个 xml：

```
<a:root>
<a:truck>
    <a:truck>
        <a:name>truck1</a:name>
        <a:tire>
            <a:tire z:Id="i1">
                <a:height>35</a:height>
                <a:width>12.5</a:width>
            </a:tire>
        </a:tire>
    </a:truck>
    <a:truck>
        <a:name>truck2</a:name>
        <a:tire>
            <a:tire z:Ref="i1" />
        </a:tire>
    </a:truck>
</a:truck>
</a:root> 
```

我正在遍历卡车节点，我想获得轮胎高度。在第一种情况下，它非常简单，我可以执行以下操作：

```
<xsl:value-of select="a:tire/a:tire/a:height" /> 
```

但是当我到达第二个卡车节点时，轮胎节点只是对第一个轮胎节点的引用，因为它们实际上是相同的轮胎对象。

我遇到问题的部分是提出将读取`z:Ref`属性值的 xpath，如果存在，则获取它指向的节点并使用它，否则使用完全序列化的节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:23:18.660

我将首先定义一个键：

```
<xsl:key name="ref" match="a:tire" use="@z:Id"/> 
```

然后`<xsl:value-of select="a:tire/a:tire/a:height" />`你可以使用

```
<xsl:value-of select="a:tire/a:tire[not(@z:Ref)]/a:height | key('ref', a:tire/a:tire/@z:Ref)/a:height" /> 
```

# regex - 0.25 区间的正则表达式

> ID：16048926
> 
> 赞同：4
> 
> 时间：2013-04-16T23:26:13.473
> 
> 标签：regex

我的目标是为十进制数编写一个正则表达式，其中有效数字是 xx.0、xx.125、xx.25、xx.375、xx.5、xx.625、xx.75、xx.875 之一（即以 1/8 为单位测量） xx 可以是 0、1 或 2 位数字。

我想出了以下正则表达式：

```
^\d*\.?((25)|(50)|(5)|(75)|(0)|(00))?$ 
```

虽然这适用于 0.25,0.5,0.75，但不适用于 0.225、0.675 等。

我假设'？在也有前面的数字的情况下也可以。

有人能指出我的错误吗

编辑：要求数字是小数！

Edit2：我意识到我的错误我对“？”感到困惑。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T23:30:44.190

我认为将小数部分乘以 8 可能会更容易，但您不会考虑在正则表达式中导致最后两位小数的数字。

```
^\d{0,2}\.(00?|(1|6)?25|(3|8)?75|50?)$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T23:31:04.393

我会`\d*`在文字`.`检查后添加另一个`\.`

`^\d*\.?\d*((25)|(50)|(5)|(75)|(0)|(00))?$`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T23:28:36.833

你的错误是：`\.?`表示一个可选`\.`的，而不是一个数字（或其他任何东西，在这种情况下）。

关于`?`（问号）运算符：使前面的项目可选。贪心，所以如果可能的话，可选项目包含在匹配中。^(（[来源](http://www.regular-expressions.info/repeat.html)）)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T23:40:53.210

```
^\d{0,2}\.(0|(1|2|6)?25|(3|6|8)?75|5)$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T23:34:44.500

正则表达式用于匹配模式，而不是检查数值。使用正则表达式找到一个可能的字符串，然后以任何您的主机语言（PHP 等）检查它的数值。

# php - 无法输出图像以使用 PHP GD-Content-Disposition 保存：附件不起作用

> ID：16048927
> 
> 赞同：0
> 
> 时间：2013-04-16T23:26:14.253
> 
> 标签：php, gd, content-type, content-disposition

我的脚本有这个小问题，因为我能够在本地输出我的图像并“*将其另存为*”，但是当我尝试将文档上传到我的服务器时我无法做到这一点，我需要的是，一旦我点击提交浏览器提醒我要对图像做什么，保存或打开它，这是我的脚本：

```
<?php $nombre=$_POST['nombre'];
    //Set the Content Type
header('Content-type: image/png'); 

    // Create Image From Existing File
    $jpg_image = imagecreatefromjpeg('fabian.jpg');
        // get image dimensions
 list($img_width, $img_height,,) = getimagesize("fabian.jpg");

    // Allocate A Color For The Text
    $white = imagecolorallocate($jpg_image, 255, 255, 255);

    // Set Path to Font File
    $font_path = '/fabian.ttf';

    // Set Text to Be Printed On Image
    $text =strtoupper($nombre);

    // Print Text On Image
    //imagettftext($jpg_image, 75, 0, 50, 400, $white, $font_path, $text);

  // find font-size for $txt_width = 80% of $img_width...
  $font_size = 1; 
  $txt_max_width = intval(0.8 * $img_width);    

  do {

  $font_size++;
  $p = imagettfbbox($font_size,0,$font_path,$text);
  $txt_width=$p[2]-$p[0];
  // $txt_height=$p[1]-$p[7]; // just in case you need it

 } while ($txt_width <= $txt_max_width);

  // now center text...
 $y = $img_height * 0.9 ;// baseline of text at 90% of $img_height
  $x = ($img_width - $txt_width) / 2;

  imagettftext($jpg_image, $font_size, 0, $x, $y, $white, $font_path, $text);

    // Send Image to Browser and Save
 imagepng($jpg_image);

 header("Content-Disposition: attachment; filename=snivel.png");

// Clear Memory
    imagedestroy($jpg_image);

   ?> 
```

这会将图像作为 draw.php 发送到浏览器，但我希望将其保存为`snivel.png`当浏览器提示我保存文件时，这仅适用于本地，但不适用于我的服务器。

# jquery - D3 树布局：我想使用 jQuery 切换所有子级

> ID：16048930
> 
> 赞同：1
> 
> 时间：2013-04-16T23:26:21.010
> 
> 标签：jquery, d3.js

我使用这个例子作为基础： http: [//mbostock.github.io/d3/talk/20111018/tree.html](http://mbostock.github.io/d3/talk/20111018/tree.html)

在我的代码中，我从折叠所有节点开始，用户可以单击分支来导航树，就像在演示中一样。

为了用户方便，我想使用 jQuery 来切换展开/折叠根的所有子级。下面的代码只会切换根的直接子级。

我尝试了很多选项，但无法计算出正确的功能。任何帮助，将不胜感激。

```
$('.clicktoexpandALL').click(function(){
    toggle(root);
    update(root);
}); 
```

我已经尝试过`toggle(root.children[0])`，`toggle(root.children[1].children[2]);`但无济于事。

编辑：更新的问题。

如果我可以访问该`toggleAll(d)`函数，我将能够做我想做的事，但一个简单的函数调用将不起作用。

d3.json("json/results.json", function(json) { root = json; root.x0 = h / 2; root.y0 = 0;

```
function toggleAll(d) {
  if (d.children) {
    d.children.forEach(toggleAll);
    toggle(d);
  }
}

// Initialize the display to hide nodes.
root.children.forEach(toggleAll);

update(root); 
```

});

添加了 JSFIDDLE 链接

代码 [http://jsfiddle.net/chrisloughnane/vV3Sc/](http://jsfiddle.net/chrisloughnane/vV3Sc/)

全屏 [http://jsfiddle.net/chrisloughnane/vV3Sc/show/](http://jsfiddle.net/chrisloughnane/vV3Sc/show/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:47:48.653

我认为您需要使用该方法`toggleAll`来切换根节点及其下的子节点：

```
function toggleAll(d) {
  if (d.children) {
    d.children.forEach(toggleAll);
    toggle(d);
  }
} 
```

该`toggle`方法将隐藏/显示`children`根的属性，而不是其他节点的子节点。

# nsis - NSIS - 将 CreateText 添加到 MUI FINISH PAGE

> ID：16048937
> 
> 赞同：0
> 
> 时间：2013-04-16T23:27:18.947
> 
> 标签：nsis

我有一个 NSIS 安装程序，它在安装完成时会发送一封电子邮件，其中附有几个不同的日志。我想让用户添加他们的电子邮件地址来接收电子邮件，我想让他们在完成页面上输入它，因为它看起来最合适。如何在完成页面上添加一个文本框供用户输入他们的电子邮件地址？

这是我当前的完成页面：

```
 ;Finish page
!Define MUI_FINISHPAGE_RUN
  !Define MUI_FINISHPAGE_RUN_TEXT 'Open Install Log'
  !Define MUI_FINISHPAGE_RUN_NOTCHECKED
  !define MUI_FINISHPAGE_RUN_FUNCTION 'LaunchLog'
!define MUI_FINISHPAGE_LINK 'Click here to visit us at co.com.'
  !define MUI_FINISHPAGE_LINK_LOCATION http://www.co.com/
!define MUI_FINISHPAGE_TEXT_LARGE
!define MUI_FINISHPAGE_TEXT "text text text"
!insertmacro MUI_PAGE_FINISH 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:09:20.900

```
!include MUI2.nsh ;If you are using MUI v1 you need to replace NSD_* with .ini file commands
!include Logiclib.nsh
...

!ifndef EM_SETCUEBANNER
!define EM_SETCUEBANNER 0x1501 ; NT5 w/Themes & Vista+
!endif

Var EMailEdit

Function CustomizeFinishPage
${NSD_CreateText} 120u 144u 180u 12u ""
Pop $EMailEdit
System::Call 'USER32::SendMessage(i$EMailEdit,i${EM_SETCUEBANNER},i0,w"E-mail address goes here...")'
FunctionEnd

Function SendFinishMail
${NSD_GetText} $EMailEdit $0
${If} $0 == "" ; TODO: Verify address by at least checking for *@*.*
    MessageBox mb_iconstop "You must enter a valid address!"
    Abort
${EndIf}
MessageBox mb_ok "TODO: Send mail to: $0"
FunctionEnd

...

!insertmacro MUI_PAGE_*
;Finish page
!define MUI_FINISHPAGE_RUN
  !define MUI_FINISHPAGE_RUN_TEXT 'Open Install Log'
  !define MUI_FINISHPAGE_RUN_NOTCHECKED
  !define MUI_FINISHPAGE_RUN_FUNCTION 'LaunchLog'
!define MUI_FINISHPAGE_SHOWREADME "" #Used as our email checkbox
  !define MUI_FINISHPAGE_SHOWREADME_TEXT "E-mail me some crap:"
  !define MUI_FINISHPAGE_SHOWREADME_NOTCHECKED 
  !define MUI_FINISHPAGE_SHOWREADME_FUNCTION SendFinishMail
!define MUI_FINISHPAGE_LINK 'Click here to visit us at co.com.'
  !define MUI_FINISHPAGE_LINK_LOCATION http://www.co.com/
!define MUI_FINISHPAGE_TEXT_LARGE
!define MUI_FINISHPAGE_TEXT "text text text"
!define MUI_PAGE_CUSTOMFUNCTION_SHOW CustomizeFinishPage
!insertmacro MUI_PAGE_FINISH
!insertmacro MUI_LANGUAGE English 
```

# android - ABS 4.3.0 - android.support.v4.app.Watson 不存在

> ID：16048938
> 
> 赞同：0
> 
> 时间：2013-04-16T23:27:19.087
> 
> 标签：android, actionbarsherlock

我将 ABS 4.2.0 直接交换为 4.3.0，现在在编译过程中出现错误。

```
java: package android.support.v4.app.Watson does not exist 
```

我正在使用 IntelliJ，主项目和 ABS 库项目都使用与 4.3.0 捆绑的 android-support-v4.jar。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:32:35.240

我没有发现问题，但是从项目中删除所有库并将它们一一添加已经解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T02:29:39.690

ABS 4.3.x 搞砸了。它包括一个不完整的 support.v4 并且添加完整的 support.v4 会导致重复，从而使您的应用程序崩溃。ABS 4.3.x 搞砸了。

# javascript - 如何在单页上使用多个 jquery 版本？

> ID：16048943
> 
> 赞同：2
> 
> 时间：2013-04-16T23:28:14.463
> 
> 标签：javascript, jquery, html

如何在单个页面上使用多个 jquery 版本？我有两个不同的 jquery 版本，两者都是不同功能所必需的，但两个版本相互冲突。如果我将使用`jquery noconflict`，那么`products scripts`将无法工作？

```
<script type="text/javascript" 
src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

<script type="text/javascript">
oldjq = jQuery.noConflict(true);
</script> 

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script> 
```

**Jquery 1.9.1 需要运行这个脚本**

```
<script>
$(document).ready(function () {
$('input:checkbox').click(function(){
var $inputs = $('input:checkbox')
if($(this).is(':checked')){
$inputs.not(this).prop('disabled',true); 
}else{
$inputs.prop('disabled',false);
}
})
})
</script>

<input type="checkbox">
<input type="checkbox"> 
<input type="checkbox">
<input type="checkbox">
<input type="checkbox" /> 
```

**Jquery 1.4.2 需要运行这些脚本**

```
<script type="text/javascript" src="products2/js/prototype.js"></script>
<script type="text/javascript" src="products2/js/common.js"></script>
<script type="text/javascript" src="products2/js/menu.js"></script>
<script type="text/javascript" src="products2/js/banner_pack.js"></script>
<script type="text/javascript" src="products2/js/light_box.js"></script>
<script type="text/javascript" src="products2/js/cloud-zoom.1.0.2.js"></script>
<script type="text/javascript" src="products2/js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="products2/js/jquery.mix.js"></script> 
```

**问题现在解决了，这里是最终代码**

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
(function ($) {
$(document).ready(function () {
$('input:checkbox').click(function(){
var $inputs = $('input:checkbox')
if($(this).is(':checked')){
$inputs.not(this).prop('disabled',true); // <-- disable all but checked one
}else{
$inputs.prop('disabled',false); // <--
}
})
});
})(jQuery);
</script>

<script type="text/javascript"  
src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

<script type="text/javascript" src="products2/js/prototype.js"></script>
<script type="text/javascript" src="products2/js/common.js"></script>
<script type="text/javascript" src="products2/js/menu.js"></script>
<script type="text/javascript" src="products2/js/banner_pack.js"></script>
<script type="text/javascript" src="products2/js/light_box.js"></script>
<script type="text/javascript" src="products2/js/cloud-zoom.1.0.2.js"></script>
<script type="text/javascript" src="products2/js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="products2/js/jquery.mix.js"></script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T23:52:25.417

由于它只有几行代码，我建议修改需要 jQuery 1.9.1 的块，以便它与 jQuery 1.4.2 一起使用

我在下面更新了它以使用 jQuery 1.4.2。我使用该`attr`方法而不是`prop`操纵属性（您可以在[此处](http://api.jquery.com/prop/)`disabled`查看文档以查看这是否可能导致任何问题）。该解决方案避免了运行两个 jquery 实例，并且避免了必须查找您已经在使用的所有库/插件的更新版本。

```
$(document).ready(function () {
    $('input:checkbox').click(function(){
        var $inputs = $('input:checkbox')
        if($(this).is(':checked')){
            $inputs.not(this).attr('disabled',true); 
        }else{
            $inputs.attr('disabled',false);
        }
    })
}) 
```

[在这里](http://jsfiddle.net/NE7K2/)看小提琴。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T23:32:18.020

是的，在您加载第一个版本后，执行此操作

```
var $j = jQuery.noConflict(); 
```

加载第二个版本的 jQuery。

参考第一个版本`$j`和第二个作为`$`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T23:58:12.317

好的，这是一种可能的解决方案 - 您可以将新版本的 jQuery 绑定到闭包。但我的建议是不要那样做，这就像向自己的腿开枪一样。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
// Jquery 1.9.1 Need To Run This Script:
<script type="text/javascript">
    (function ($) {
        $(document).ready(function () {
            // code that uses jQuery 1.9.1
        });
    })(jQuery);
</script>

// ...

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
//Jquery 1.4.2 Need To Run These Scripts:
<script type="text/javascript" src="products2/js/prototype.js"></script>
<script type="text/javascript" src="products2/js/common.js"></script>
// ... 
```

# r - 显示与特定类关联的方法

> ID：16048949
> 
> 赞同：7
> 
> 时间：2013-04-16T23:28:46.133
> 
> 标签：r, class, s4, r-s3

我想查看与某个对象类关联的所有方法的列表。例如，如果我看到某个模型拟合例程返回类“foo”的对象，我想知道包（或任何其他包）是否定义了诸如`simulate.foo`、`update.foo`、`coef.foo`等方法`print.foo`。我该怎么做？

我知道这`methods`解决了逆问题（假设是一个 S3 类），但显然我不想搜索每个定义了`print`函数的对象，以便找出我感兴趣的类是否有一个。我可能在这里忘记了一些非常简单的事情。谢谢！

（理想情况下，很高兴看到 S3 和 S4 类的解决方案）。

**更新**：理想情况下，解决方案应该显示隐藏的方法，就像`methods`函数一样。例如，`methods("simulate")`显示：

```
> methods("simulate")
[1] simulate.lm* 
```

所以在查询与`lm`类关联的方法时，我们希望恢复这个模拟方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T03:04:55.893

我是傻子，还是`methods(class="foo")`你想要的（对于 S3 方法）？？？

```
methods(class="lm")
##  [1] add1.lm*           alias.lm*          anova.lm           case.names.lm*    
##  [5] confint.lm*        cooks.distance.lm* deviance.lm*       dfbeta.lm*        
##  [9] dfbetas.lm*        drop1.lm*          dummy.coef.lm*     effects.lm*       
## [13] extractAIC.lm*     family.lm*         formula.lm*        hatvalues.lm      
## [17] influence.lm*      kappa.lm           labels.lm*         logLik.lm*        
## [21] model.frame.lm     model.matrix.lm    nobs.lm*           plot.lm           
## [25] predict.lm         print.lm           proj.lm*           qr.lm*            
## [29] residuals.lm       rstandard.lm       rstudent.lm        simulate.lm*      
## [33] summary.lm         variable.names.lm* vcov.lm*          
## 
##    Non-visible functions are asterisked 
```

`showMethods`适用于 S4 课程（取自 @JoshO'Brien 现已删除的答案，供参考）：

```
library(sp)
showMethods(classes="SpatialPolygons")

## Function: [ (package base)
## x="SpatialPolygons"
## 
## Function: addAttrToGeom (package sp)
## x="SpatialPolygons", y="data.frame"
## 
## Function: coerce (package methods)
## from="GridTopology", to="SpatialPolygons"
## from="SpatialGrid", to="SpatialPolygons"
## from="SpatialPixels", to="SpatialPolygons"
## from="SpatialPolygons", to="SpatialLines"
## from="SpatialPolygons", to="SpatialPolygonsDataFrame"
## 
## Function: coordinates (package sp)
## obj="SpatialPolygons"
## 
## Function: coordnames (package sp)
## x="SpatialPolygons"
## 
## Function: coordnames<- (package sp)
## x="SpatialPolygons", value="character"
## 
## Function: over (package sp)
## x="SpatialGrid", y="SpatialPolygons"
## x="SpatialPoints", y="SpatialPolygons"
## x="SpatialPolygons", y="SpatialGrid"
## x="SpatialPolygons", y="SpatialGridDataFrame"
## x="SpatialPolygons", y="SpatialPoints"
## x="SpatialPolygons", y="SpatialPointsDataFrame"
## 
## Function: overlay (package sp)
## x="SpatialGridDataFrame", y="SpatialPolygons"
## x="SpatialGrid", y="SpatialPolygons"
## x="SpatialPointsDataFrame", y="SpatialPolygons"
## x="SpatialPoints", y="SpatialPolygons"
## x="SpatialPolygons", y="SpatialGrid"
## x="SpatialPolygons", y="SpatialPoints"
## 
## Function: plot (package graphics)
## x="SpatialPolygons", y="missing"
## 
## Function: polygons (package sp)
## obj="SpatialPolygons"
## 
## Function: polygons<- (package sp)
## object="data.frame", value="SpatialPolygons"
## 
## Function: recenter (package sp)
## obj="SpatialPolygons"
## 
## Function: spChFIDs (package sp)
## obj="SpatialPolygons", x="character"
## 
## Function: spsample (package sp)
## x="SpatialPolygons" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T23:45:47.697

这是一个使用`.lm`正则表达式模式的示例，`apropos`而不是徒劳地搜索`.foo`：

```
> apropos("\\.lm")
 [1] "anova.lm"        "anova.lmlist"    "hatvalues.lm"    "kappa.lm"        "model.frame.lm"  "model.matrix.lm"
 [7] "panel.lmline"    "plot.lm"         "predict.lm"      "prepanel.lmline" "print.lm"        "residuals.lm"   
[13] "rstandard.lm"    "rstudent.lm"     "summary.lm" 
```

还有一些以“lm”开头的方法。所以你可能也想要那些：

```
> apropos("lm\\.")
 [1] ".__C__anova.glm.null" ".__C__glm.null"       "glm.control"          "glm.convert"         
 [5] "glm.fit"              "glm.nb"               "lm.fit"               "lm.fit.qr.bare"      
 [9] "lm.gls"               "lm.influence"         "lm.pfit"              "lm.ridge"            
[13] "lm.wfit" 
```

如果你想省略“glm”。方法使用更受限制的正则表达式：

```
> apropos("^lm\\.")
[1] "lm.fit"         "lm.fit.qr.bare" "lm.gls"         "lm.influence"   "lm.pfit"        "lm.ridge"      
[7] "lm.wfit" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T03:05:08.733

对于 S3 案例，`methods`对此有一个论据`class`：

```
> methods(class="lm")
 [1] add1.lm*           alias.lm*          anova.lm           case.names.lm*    
 [5] confint.lm*        cooks.distance.lm* deviance.lm*       dfbeta.lm*        
 [9] dfbetas.lm*        drop1.lm*          dummy.coef.lm*     effects.lm*       
[13] extractAIC.lm*     family.lm*         formula.lm*        hatvalues.lm      
[17] influence.lm*      kappa.lm           labels.lm*         logLik.lm*        
[21] model.frame.lm     model.matrix.lm    nobs.lm*           plot.lm           
[25] predict.lm         print.lm           proj.lm*           qr.lm*            
[29] residuals.lm       rstandard.lm       rstudent.lm        simulate.lm*      
[33] summary.lm         variable.names.lm* vcov.lm* 
```

# tcl - tcl open pipe 似乎错误处理了参数中的空格

> ID：16048951
> 
> 赞同：0
> 
> 时间：2013-04-16T23:29:03.403
> 
> 标签：tcl

我有这个打开：

```
set r [catch {open "|[concat $config(cmd,sh) [list $cmd 2>@1]]" r} fid] 
```

在哪里`$config(cmd,sh)`，`cmd /c`我正在尝试在 $cmd 中传递文件名（可能还有 echo 等命令）。如果文件名中没有空格，即 :
cmd 就万事大吉`echo /filename`
了。带空格，即：
cmd`echo "/file name"` 似乎传递的是：
`\"file name\"`。
当我在 Linux 上尝试这个时，我得到`"file name"`（没有反斜杠）。我试过用 替换文件名中的空格`"\ "`，但是目标得到两个文件名，即空格用于分解文件名。

我开始认为我在 Tcl 的 Windows 端口中发现了一个错误......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:04:59.430

呃，看起来很复杂！要将这种东西传递到管道创建代码中，您需要使用正确的配方：

```
set r [catch {open |[list {*}$config(cmd,sh) $cmd 2>@1] r} fid] 
```

也就是说，`|[list ...]`在构建管道时始终使用表单，因为文档说这是管道开启器所寻找的。（这是 Tcl 中唯一类似的命令。）当然，`{*}`在这种情况下使用 (8.5+) 语法也简单得多，因为它更*明显地*做正确的事情。

# asp.net - 如何使用 IIS 重定向 URL 中的额外正斜杠

> ID：16048957
> 
> 赞同：5
> 
> 时间：2013-04-16T23:29:27.560
> 
> 标签：asp.net, iis, redirect

这个问题最适合用例子。

假设我的网络应用托管在`http://example.com/WebApp/`

[根据 Microsoft](http://support.microsoft.com/kb/298408)的说法，如果缺少尾部正斜杠，IIS 将重定向。这按预期工作：发送到的请求`http://example.com/WebApp`被重定向到`http://example.com/WebApp/`.

现在就我而言，有人用一个*额外的*正斜杠为 URL 添加了书签：`http://example.com/WebApp//`. 这将按预期加载 Web 应用程序，但现在所有相对 URL 都是错误的。因此，例如，如果我在同一域上调用另一个应用程序`../AnotherApp/SomePage.aspx`，那么它将尝试加载`/WebApp/AnotherApp/SomePage.aspx`而不是正确加载`/AnotherApp/SomePage.aspx`。

我怎样才能重定向`http://example.com/WebApp//`到`http://example.com/WebApp/`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:43:25.157

仅使用服务器端脚本似乎很难做到这一点。也许在 JavaScript 中进行重定向就足够了？

```
<html>
<head>
<script type="text/javascript">
(function () {
    var protocol = location.href.substr(0, location.href.indexOf("://"));
    var restOfUrl = location.href.substr(location.href.indexOf("://") + "://".length);
    if (restOfUrl.match(/\/\//)) {
        location.href = protocol + "://" + restOfUrl.replace(/\/\//g, "/");
    }
})();
</script>
</head>
<body>
...
</body>
</html> 
```

此外，您应该考虑在页面中设置[规范链接](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)，以便搜索引擎正确索引内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:08:27.173

您可以将 IIS 重写模块 ( [http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference#Rule_Pattern](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference#Rule_Pattern) ) 与重定向到单斜杠版本的正则表达式一起使用.

例如，您可以使用此正则表达式匹配带有额外斜杠的 URL：

`http://.*/{2,}`

# java - 几次点击后 JButton 停止工作，没有其他任何改变

> ID：16048958
> 
> 赞同：0
> 
> 时间：2013-04-16T23:29:28.093
> 
> 标签：java, swing, awt, actionlistener, jfugue

我正在尝试创建一个钢琴程序，您可以在其中单击键并使用 actionlistener 播放 jfugue 库中的音符。出于某种原因，单击大约 18 次后没有更改任何内容，按钮停止工作。我削减了代码来分析为什么会发生这种情况，因此只有两个注释。

提前感谢您的任何建议！

```
import java.awt.Graphics;
import javax.swing.JFrame;
import javax.swing.JComponent;
import java.awt.Color;
import javax.swing.JLayeredPane;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JButton;
import javax.swing.*;
import org.jfugue.*; 

public class ChordPlayer2 extends JComponent{

public ChordPlayer2(){
    final Player player = new Player();

    JFrame frame = new JFrame();
    JButton  cButton, csharpButton;

    JPanel buttonPanel = new JPanel();
    buttonPanel.setLayout(null);
    buttonPanel.setLocation(0, 0);
    buttonPanel.setSize(1700, 1000);

    csharpButton = new JButton("");
    csharpButton.setLocation(100, 150);
    csharpButton.setSize(100,520);
    buttonPanel.add(csharpButton);

    cButton = new JButton("");
    cButton.setLocation(0, 150);
    cButton.setSize(160, 800);
    buttonPanel.add(cButton);

    class cClicker implements ActionListener {

        public void actionPerformed(ActionEvent event) {
            player.play("C");

            }
    }

    class csClicker implements ActionListener {  
    public void actionPerformed(ActionEvent event) {
            player.play("C#");
    }
    }

    ActionListener c = new cClicker();
    cButton.addActionListener(c);

    ActionListener cs = new csClicker();
    csharpButton.addActionListener(cs);

    buttonPanel.setOpaque(true);
    //return buttonPanel; 

    frame.add(buttonPanel);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(1700, 1000);
    frame.setVisible(true);

}

public static void main(String[] args) {
    //Schedule a job for the event-dispatching thread:
    //creating and showing this application's GUI.
    //JFrame.setDefaultLookAndFeelDecorated(true);
    ChordPlayer2 demo = new ChordPlayer2();

    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T23:48:08.600

这是 JFugue 中的一个已知错误：

[https://code.google.com/p/jfugue/issues/detail?id=49](https://code.google.com/p/jfugue/issues/detail?id=49)

据称最新版本可以解决此问题：

[https://code.google.com/p/jfugue/downloads/detail?name=jfugue-4.1.0-20120125.jar&can=2&q=](https://code.google.com/p/jfugue/downloads/detail?name=jfugue-4.1.0-20120125.jar&can=2&q=)

# python - Python Idle 3.2 选项卡故障

> ID：16048960
> 
> 赞同：0
> 
> 时间：2013-04-16T23:29:38.153
> 
> 标签：python, python-idle, python-3.2

在使用 3.2 的 IDLE 中，每当我在块中输入语句并按 Enter 时，光标都会向前跳转。很多。这没什么大不了的，但很烦人。它与我的代码有关吗？有解决办法吗？

[http://www.mediafire.com/view/?kgcg35grt3tllcg](http://www.mediafire.com/view/?kgcg35grt3tllcg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:13:03.870

我看到了问题！这里：

```
def getSystem():
if os.path.exists("C:\"):
    system = "Windows" 
```

如果您查看突出显示，则`("C:\")`不起作用。我建议尝试制作它`("C:\\")`，看看是否可行。当我忘记一个时，我经常遇到这个问题`)`，就像我说`for i in range(len(myList)`，我忘了放最后一个`)`。每当发生这种情况时，只要知道某处有未闭合的括号即可。

# if-statement - Lua if 语句错误

> ID：16048968
> 
> 赞同：0
> 
> 时间：2013-04-16T23:30:29.287
> 
> 标签：if-statement, lua

我有这个 if 语句，当我运行它时，它会返回一个错误：“')' 预期的”

```
if (a=1 and b=4 and c=width/2) or (a=2 and b=1 and c=width/2) then
...
end 
```

我在这里做错了吗？还是lua有问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T23:48:17.900

尝试用以下代码替换您当前的代码：

```
if (a==1 and b==4 and c==width/2) or (a==2 and b==1 and c==width/2) then
...
end 
```

`=`表示分配，而`==`检查是否相等，看起来您想检查是否相等。

# python - python：执行一个通用的多维循环

> ID：16048974
> 
> 赞同：3
> 
> 时间：2013-04-16T23:31:18.380
> 
> 标签：python

Python：

当要循环的索引数量是动态的时，如何高效地执行多维循环。

假设一个数组 var_size 包含每个变量的大小

```
var_size = [ 3, 4, 5 ] 
```

和一个函数'loop'，它将为每个点调用'f（current_state）'。

```
 def f(state): print state
  loop(var_size, f) 
```

此调用将按以下顺序调用*f ：*

```
 f( [ 0, 0, 0])
 f( [ 0, 0, 1])
 f( [ 0, 0, 2])
 f( [ 0, 1, 0])
 etc.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T00:01:14.800

你可以这样做`itertools.product`：

```
>>> print list(itertools.product(*(range(x) for x in reversed([3,4,5]))))
[(0, 0, 0), (0, 0, 1), (0, 0, 2), (0, 1, 0), (0, 1, 1), (0, 1, 2), (0, 2, 0), (0, 2, 1), (0, 2, 2), (0, 3, 0), (0, 3, 1), (0, 3, 2), (1, 0, 0), (1, 0, 1), (1, 0, 2), (1, 1, 0), (1, 1, 1), (1, 1, 2), (1, 2, 0), (1, 2, 1), (1, 2, 2), (1, 3, 0), (1, 3, 1), (1, 3, 2), (2, 0, 0), (2, 0, 1), (2, 0, 2), (2, 1, 0), (2, 1, 1), (2, 1, 2), (2, 2, 0), (2, 2, 1), (2, 2, 2), (2, 3, 0), (2, 3, 1), (2, 3, 2), (3, 0, 0), (3, 0, 1), (3, 0, 2), (3, 1, 0), (3, 1, 1), (3, 1, 2), (3, 2, 0), (3, 2, 1), (3, 2, 2), (3, 3, 0), (3, 3, 1), (3, 3, 2), (4, 0, 0), (4, 0, 1), (4, 0, 2), (4, 1, 0), (4, 1, 1), (4, 1, 2), (4, 2, 0), (4, 2, 1), (4, 2, 2), (4, 3, 0), (4, 3, 1), (4, 3, 2)] 
```

请注意，我生成的是`tuple`s 而不是`list`s，但如果您确实需要，这很容易解决。

所以，在我看来，你想要：

```
map(f,itertools.product(*map(range,reversed(var_size)))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:02:54.003

这段代码完成了这项工作 - 它的优点是不创建列表。然而，它并不那么优雅......

关于如何变得更好的任何想法？

```
def loop(var_size, f):
    nb = len(var_size)
    state = [0]*nb
    ok = True
    while ok:
        f(state)
        for i in range(nb-1, -1, -1):
            state[i] = state[i]+1
            if state[i] < var_size[i]:
                break
            else:
                if i == 0:
                    ok = False
                    break
                else:
                    state[i] = 0

var_size = [3,4,5]  
def f(state): 
    print state

loop(var_size, f) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T23:37:56.813

使列表初始化为 0，与 var_size 中的条目一样多。我们将此列表视为“不倒翁”列表 - 我们递增列表中的最后一个，直到它超出其限制（又名 var_size 在列表中的同一点）。如果是这样，我们将其设置为 0，向左移动并重复增量/溢出检查，直到我们不溢出（将“我们正在查看的 tumbler”变量重置回最后一个并继续）或溢出所有条目list （我们完成了，我们一直循环），然后执行下一个调用。

我不知道这是最优的还是 pythonic 的，但它是 O(n)。

# php - 无法插入数据库

> ID：16048977
> 
> 赞同：0
> 
> 时间：2013-04-16T23:31:37.320
> 
> 标签：php, mysql, insert

我有一个数据库，我无法向其中插入值。这是我的数据库和我的代码。

你能告诉我我的问题是什么吗？

输出告诉我我的 sql 语法是错误的。但是，我可以毫无问题地从 phpmadmin 添加值。

当我使用代码时，我失败了。而且，我找不到任何问题。

非常感谢yuy。

[数据库](http://i.imgur.com/pDhxz03.png)

```
<?php

$db_username = "root";
$db_password = "pass";
$db = "rmado";
$db_server = "localhost";

$db_handle = mysql_connect($db_server, $db_username, $db_password);
$db_found = mysql_select_db($db, $db_handle);
if ($_SERVER['REQUEST_METHOD'] == 'POST') 
{
    $title = $_POST['username'];
    $desc  = $_POST['password'];
    $aaa   = $_POST['type'];
    $bbb   = $_POST['email'];

    $query = "insert into users(username, password, type, email) values ($title, $desc, $aaa, $bbb)";

    mysql_query($query);
}

?>
<html>
    <body>
    <div id="login_form">

        <form name="login_form" method="post" action="zort.php">

            username: <input name="username" type="text" value="">
            password: <input name="password" type="text" value="">
            type: <input name="type" type="text" value="">
            email: <input name="email" type="text" value="">

            <input name="addtask" type="submit" value="add task">

        </form>

    </div>
    <!-- end login_form-->
    </body>
</html> 
```

非常感谢你。

**编辑：**

编号：整数（5）

标题：varchar(30)

描述： varchar(50)

assigner_id: int(5)

受让人ID：int（5）

创建日期：日期

due_date：日期

status_id：整数（5）

category_id：整数（5）

这是我的php代码：

```
$query = "insert into tasks (title, desc, assigner_id, assignee_id, creation_date, due_date, status_id, category_id) values ('$title', '$desc', $ass1, $ass2, '$cre', '$due', $stat, $cat)"; 
```

这段代码哪里错了？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:36:17.980

根据您最初的问题：所有这些字段都是表格中的文本。在这些文本字段的原始查询中，您没有用引号将您的值封装起来。也就是说，以下内容适用于您的示例：

```
$query = "insert into users (username, password, type, email) values " .
         "('$title', '$desc', '$aaa', '$bbb')"; 
```

这将使 MySQL 知道您要为这些字段插入哪些字符串。

*但是*，您在此页面上的内容存在几个问题。恶意用户可能会将一些 MySQL 可接受的字符串放入这些字段中，这些字符串可能会对您的数据库造成损害。您需要转义输入字符串以防止恶意内容损坏您的数据库。

考虑使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)，因为您正在使用已弃用的库。有关一些示例，请参见[此处](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

此外，您的字段不应是文本字段。它们真的应该是 varchars，你应该限制它们的长度。

### 编辑

您的第二个查询需要`desc`用反引号封装，因为`DESC`它是 MySQL 的保留字，用于降序。

# android - 带有多个片段的 ActionBar 片段视图

> ID：16048985
> 
> 赞同：0
> 
> 时间：2013-04-16T23:32:39.773
> 
> 标签：android, android-fragments, android-actionbar, android-tabs

我有一个带有 1 个 Activity 的应用程序，它有 3 个使用 ActionBar Sherlock 创建的选项卡。其中一个选项卡有一个 ListFragment，然后在选择项目时将其替换为其他 Fragment。

我遇到的问题是重新创建视图（例如方向更改）。当方向改变时，我无法弄清楚如何保持在当前处于活动状态的 Fragment 上。例如，如果我正在查看一个片段然后更改方向，它将返回到 ListFragment。

我理解它为什么这样做，因为它在主要活动中调用 onCreate 但我不知道如何取回最后一个片段。我查看了 Android 开发人员页面，无数次地用 Google 搜索并查看了几乎所有与之相关的 stackoverflow 问题，但我只是不明白如何在我的应用程序中执行此操作。如果有人能解释我如何在重新加载视图时保留片段，那就太好了。

这是我的onCreate ...

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
        // Set up navigation bar to show tabs
        final ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        // Add tabs to navigation bar
        actionBar.addTab(actionBar.newTab().setText("Sermons")
                .setTabListener(this));
        actionBar.addTab(actionBar.newTab().setText("Downloads")
                .setTabListener(this));
        actionBar.addTab(actionBar.newTab().setText("Contact")
                .setTabListener(this));
} 
```

OnSaveInstanceState...

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt(STATE_SELECTED_NAVIGATION_ITEM, getActionBar()
            .getSelectedNavigationIndex());
} 
```

OnRestoreInstanceState...

```
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    if (savedInstanceState.containsKey(STATE_SELECTED_NAVIGATION_ITEM)) {
        getActionBar().setSelectedNavigationItem(
                savedInstanceState.getInt(STATE_SELECTED_NAVIGATION_ITEM));
    }
} 
```

OnTab 已选择...

```
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    String tabText = (String) tab.getText();

    if (tabText == "Audio") {
        fragment = new AudioCategoryFragment();
        getFragmentManager()
                .beginTransaction()
                .setCustomAnimations(android.R.animator.fade_in,
                        android.R.animator.fade_out)
                .replace(R.id.fragment_container, fragment).commit();
    } else if (tabText == "Downloads") {
        fragment = new DownloadsFragment();
        getFragmentManager()
                .beginTransaction()
                .setCustomAnimations(android.R.animator.fade_in,
                        android.R.animator.fade_out)
                .replace(R.id.fragment_container, fragment).commit();
    } else if (tabText == "Contact") {
        fragment = new ContactsFragment();
        getFragmentManager()
                .beginTransaction()
                .setCustomAnimations(android.R.animator.fade_in,
                        android.R.animator.fade_out)
                .replace(R.id.fragment_container, fragment).commit();
    }

} 
```

# javascript - Mustache style function evaluation with underscore.js template

> ID：16048993
> 
> 赞同：0
> 
> 时间：2013-04-16T23:33:42.627
> 
> 标签：javascript, underscore.js, mustache

Is it possible to use underscore.js with Mustache style function calls? The underscore.js [manual](http://underscorejs.org/#template) has an example how to support Mustache syntax:

```
_.templateSettings = {
  interpolate : /\{\{(.+?)\}\}/g
};

var template = _.template("Hello {{ name }}!");
template({name : "Mustache"});
=> "Hello Mustache!" 
```

However, apart from variables mustache.js also automatically detects when the object is a function and then evaluates it. From the mustache.js manual:

```
var view = {
  title: "Joe",
  calc: function () {
    return 2 + 4;
  }
};

var output = Mustache.render("{{title}} spends {{calc}}", view); 
```

However, using underscore.js to render the latter results in:

```
var template = _.template("{{title}} spends {{calc}}");
template(view);
"Joe spends function () {
    return 2 + 4;
}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:14:50.737

Underscore's template function doesn't perform type checking and always returns the value of the property/variable.

[https://github.com/documentcloud/underscore/blob/master/underscore.js#L1161](https://github.com/documentcloud/underscore/blob/master/underscore.js#L1161)

But you can use the underscore template evaluate block to run javascript functions.

So you can do the following:

```
var template = _.template("<% var spend = calc() %>{{title}} spends {{ spend }}"); 
```

That's obviously using the default ERB-style evaluation block, so feel free to write your own regex for `evaluate` in `_.templateSettings` if you'd rather use a different syntax.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T02:30:55.953

The simplest way is to evaluate the function, since Underscore allows arbitrary JavaScript inside the template block.

```
var template = _.template("{{title}} spends {{calc()}}"); 
```

# kinect - 颜色和深度流不再起作用

> ID：16048996
> 
> 赞同：1
> 
> 时间：2013-04-16T23:33:52.610
> 
> 标签：kinect

直到昨天下午，我在我的电脑上使用了一台 Kinect for XBOX 360，一台 MacBook Pro 15" Late 2011，其规格可[在此处](http://support.apple.com/kb/sp644)获得。我使用 Windows 7（本机安装，不使用虚拟机）。我安装的 SDK 版本为 1.0。

突然之间，从今天开始，Kinect 不再工作了。最初我认为这是我的代码中的一些错误，但是当我调用方法时，我注意到程序在开始时仍然卡住`KinectSensor.Start()`。

我开始在网上寻找资料。我读到了通过重新安装驱动程序获得的解决方案。不行，然后我尝试安装1.6版本的SDK。不幸的是，即使这样也没有用。

我在这个阶段看到，某些 USB 主机控制器可能存在兼容性问题，例如 Intel 5 系列/3400 系列芯片组 USB 主机控制器。但是，就我而言，应该没有问题（因为昨天还没有出现过）：

![Windows 设备管理器显示 USB 控制器不会导致问题](https://i.stack.imgur.com/mwxBD.jpg)

为了检查问题是否真的是由传感器引起的，而不是由于我的应用程序，我运行了 SDK 提供的测试应用程序之一，称为*Kinect Explorer*。但是，我在这个测试应用程序中遇到了同样的问题。等待大约一分钟后，当 Kinect Explorer 启动时，我既看不到颜色流，也看不到深度流，也看不到骨架信息。我唯一能做的就是上下移动 Kinect，改变颈部的角度。甚至麦克风阵列似乎也能正常工作。

![Kinect Explorer 无法正常工作](https://i.stack.imgur.com/V1Uwu.jpg)

我阅读了关于此类问题的两篇有趣的帖子：[this](http://social.msdn.microsoft.com/Forums/en-US/kinectsdk/thread/73426beb-8ff2-43f5-b3c7-2fe4679263fd/)和[this](https://groups.google.com/forum/?fromgroups=#!topic/openni-dev/K2OK9-Fj5CI)，但尚未得到回答。

在这两个链接中的第一个链接中，报告问题的用户说硬件已被破坏。我自己也这么想，直到我再次开始 Kinect 探索，最初是在传感器拔下的情况下。启动此程序后，我插入电缆，我注意到 Kinect Explorer 已将 Kinect 传感器标记为**Connected**。经过短暂的初始化阶段后，我再次看到颜色流，而深度流显示出均匀颜色（绿灰色）的图像：

![传感器似乎工作，但这只会持续几秒钟](https://i.stack.imgur.com/ga4UR.jpg)

这种情况持续了几秒钟，然后图像被锁定，问题出现了。此外，有时 FPS 值会从 30 下降到 29。

只有在将 Kinect 拔掉一段时间后（10 分钟就足够了），我才能重现后一种情况。

我该如何解决这个奇怪而可怕的问题？是否可以恢复 Kinect 传感器并使其再次工作？还是我必须得出结论，传感器已不可挽回地损坏？