# StackOverflow 问答 15560000-15560999

# php - 删除第一段和最后一段，同时单独保留最后一段

> ID：15560001
> 
> 赞同：-1
> 
> 时间：2013-03-21T23:22:39.617
> 
> 标签：php, arrays, substring

我正在从一个项目的数组中打印出一些数据，但我想删除第一段和最后一段。但是保留最后一段以单独归因于它自己的输出。

我想删除第一段开头`From Wikipedia, the free encyclopedia.`和最后一段，开始`Description above from the Wikipedia article Humphrey Bogart, licensed under CC-BY-SA, full list of contributors on Wikipedia.`

要调用该行，我只是使用一个简单的 PHP 回显语句：`$actor_biography = $actor_details['biography'];`，在回显之前`$actor_biography`

**代码：**

```
Array
(
    [adult] => 
    [also_known_as] => Array
        (
        )

    [biography] => From Wikipedia, the free encyclopedia.  

Humphrey DeForest Bogart (December 25, 1899 – January 14, 1957) was an American actor. He is widely regarded as a cultural icon. The American Film Institute ranked Bogart as the greatest male star in the history of American cinema.

After trying various jobs, Bogart began acting in 1921 and became a regular in Broadway productions in the 1920s and 1930s. When the stock market crash of 1929 reduced the demand for plays, Bogart turned to film. His first great success was as Duke Mantee in The Petrified Forest (1936), and this led to a period of typecasting as a gangster with films such as Angels with Dirty Faces (1938) and B-movies like The Return of Doctor X (1939).

His breakthrough as a leading man came in 1941, with High Sierra and The Maltese Falcon. The next year, his performance in Casablanca raised him to the peak of his profession and, at the same time, cemented his trademark film persona, that of the hard-boiled cynic who ultimately shows his noble side. Other successes followed, including To Have and Have Not (1944), The Big Sleep (1946), Dark Passage (1947) and Key Largo (1948), with his wife Lauren Bacall; The Treasure of the Sierra Madre (1948); The African Queen (1951), for which he won his only Academy Award; Sabrina (1954) and The Caine Mutiny (1954). His last movie was The Harder They Fall (1956). During a film career of almost thirty years, he appeared in 75 feature films.

Description above from the Wikipedia article Humphrey Bogart, licensed under CC-BY-SA, full list of contributors on Wikipedia.
    [birthday] => 1899-12-25
    [deathday] => 1957-01-14
    [homepage] => 
    [id] => 4110
    [imdb_id] => nm0000007
    [name] => Humphrey Bogart
    [place_of_birth] => New York City, New York, USA
    [popularity] => 3.92
    [profile_path] => /5WaI2QbYd6WYq7Mzk3tEUTXSM3u.jpg
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:35:07.947

```
$para = 'Pellentesque quis sodales nunc. Integer mi lacus, hendrerit posuere adipiscing sed, sagittis non lectus. Fusce eleifend felis enim. Curabitur sagittis libero neque. Proin a tortor eros, interdum interdum metus. Pellentesque non quam non sem commodo facilisis. Duis fermentum sollicitudin gravida. Sed eros lorem, rutrum ac viverra nec, tempor id nulla. Integer congue malesuada massa? Sed porttitor varius felis, sit amet pharetra metus consequat fringilla? In non leo metus, eget tristique arcu? In magna mauris, mollis blandit posuere id; pulvinar vel libero. Ut vel augue vel leo semper interdum lobortis a magna. Nunc ac elit ipsum; vitae mollis eros. Phasellus erat sem, elementum semper vehicula eu, cursus et neque. Ut ac lorem felis.

Maecenas vel urna felis. Maecenas sed ante libero, sit amet consectetur neque. Duis eget eros ligula, non varius neque. Etiam sit amet interdum mi. Praesent ac sapien gravida ante congue suscipit! Pellentesque feugiat velit sed enim semper vitae gravida lorem mattis. Donec dapibus odio vitae velit laoreet laoreet!

Nam et turpis magna. Aliquam ultrices leo in lectus venenatis id facilisis nisl iaculis. Fusce euismod, ipsum dignissim pharetra iaculis, turpis lectus iaculis magna, vel adipiscing arcu arcu in nibh. Sed ullamcorper faucibus massa vel tincidunt. Nunc condimentum ornare mi, ut tempus erat vehicula tempor. Sed pulvinar nulla at tortor lacinia auctor. Proin eget enim diam, in adipiscing diam. Praesent neque arcu, pellentesque vel gravida nec, elementum et ante? Quisque blandit, nulla id semper pellentesque, eros dolor laoreet dui, sit amet placerat libero libero non ligula. Praesent commodo dictum viverra. Proin egestas diam a nunc dapibus eu sollicitudin turpis semper? Etiam at tincidunt magna. Phasellus ullamcorper eros sit amet massa convallis ut molestie orci vestibulum. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam fringilla, ante vel facilisis venenatis, sapien leo accumsan mi, id ultrices nibh lectus id orci. Donec dignissim sapien a risus tempor hendrerit.

Proin egestas libero id diam dapibus non accumsan lacus cursus. Cras vel lectus ut ligula condimentum interdum eget fringilla magna. Suspendisse pulvinar sem lacus, at facilisis lectus. Vestibulum elit sapien, semper vel commodo nec; ultrices nec lorem. Quisque erat dui, faucibus at convallis nec, aliquam in nulla. Donec vulputate libero in sapien dictum vel feugiat turpis bibendum! Duis nec mauris libero, a hendrerit risus. Integer tempus, magna in aliquet volutpat, sapien dui sagittis ante, ut convallis sem purus at diam. Proin auctor, nisi sed sagittis vulputate, leo arcu commodo lorem; vel convallis quam quam ut nisl! Curabitur hendrerit dolor id mi hendrerit eget lobortis nibh sollicitudin. Vestibulum aliquet; libero eleifend placerat posuere, lorem est molestie nunc, id pellentesque nisi massa nec ligula.

Praesent urna nisi, rhoncus scelerisque cursus vitae, condimentum quis augue. Duis ac lacus eget eros dignissim auctor. Duis at nunc eros! Nulla rutrum ullamcorper nisi, ac fermentum dui varius quis. Cras condimentum leo adipiscing augue tempor at lacinia elit suscipit. Pellentesque dui est, feugiat sed accumsan ac, aliquam id risus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aenean nec felis quis velit faucibus aliquam eget ac tellus. Praesent congue velit ut metus placerat sed ultrices enim egestas.';

$start_sec = strpos($para, "\n");  // get start position of 2nd paragraph
$start_end = strrpos($para, "\n"); // get start position of last paragraph

$new_para = trim(substr($para, $start_sec, $start_end - $start_sec)); // get substring of content until start of last paragraph
$last_para = trim(substr($para, $start_end)); // get substring of content from start of last paragraph until end

echo $new_para;  // output all paragraphs but first and last
echo $last_para; // output last paragraph 
```

If you need more explanation I can explain some more, but it's pretty straightforward. It will output content without first and last paragraphs and also allow you to output the last paragraph separately.

See : **[DEMO](http://codepad.org/DC8a25AN)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:31:08.597

从您提供的图像中我可以看到（请下次提供实际代码！），字符串由双换行符分隔。在这种情况下，您可以这样做：

```
$result_array = explode("\n\n", $string); 
```

这会给你一个包含每个段落的数组。

考虑保持属性不变。使用`<small>`和`<footer>`HTML 标签来指定它。

# mysql - MySQL 检查电子邮件地址的约束

> ID：15560004
> 
> 赞同：0
> 
> 时间：2013-03-21T23:22:55.840
> 
> 标签：mysql, check-constraints

我正在尝试在 MySQL 上添加一个检查约束，以仅允许有效的电子邮件地址，并且从我已有的语法看来：Alter Table book Add Constraint CheckEmail Check (email Like ' *%@* %._%')

我的桌子是书，它有一个名为 email 的列，其中包含电子邮件地址。

其他链接似乎确认这应该是正确的： [TSQL Email Validation (without regex)](https://stackoverflow.com/questions/229824/tsql-email-validation-without-regex)

这看起来好吗？

这执行正确，但在此之后我可以添加一个条目'h'。有什么想法吗？

我在 mySQL 5.1 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:26:58.493

MySQL 实际上并不强制执行检查约束。如果您包含它们，它不会出错，但它也不会强制它们检查。这个问题在 StackOverflow [ [1](https://stackoverflow.com/questions/3414421/does-mysql-support-check-constraint) ] 的其他地方和 MySQL 论坛中的讨论 [ [3](http://forums.mysql.com/read.php?136,572271,572359) ] 和错误 [ [2](http://bugs.mysql.com/bug.php?id=50525) ] 中都得到了更详细的回答。请注意，MySQL 确实支持强制执行外键约束和 UNIQUE。为此使用 InnoDB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-02T06:53:03.880

是的，您可以从 MySQL 8 开始使用检查约束：

```
ALTER TABLE `user` 
ADD CONSTRAINT `user.email_validation` 
    CHECK (`email` REGEXP "^[a-zA-Z0-9][a-zA-Z0-9.!#$%&'*+-/=?^_`{|}~]*?[a-zA-Z0-9._-]?@[a-zA-Z0-9][a-zA-Z0-9._-]*?[a-zA-Z0-9]?\\.[a-zA-Z]{2,63}$"); 
```

# c# - 声明一个长的常量字节数组

> ID：15560007
> 
> 赞同：20
> 
> 时间：2013-03-21T23:23:19.590
> 
> 标签：c#, arrays, constants

我有一个需要在 C# 代码中声明的长字节数组。我做这样的事情：

```
public static class Definitions
{
    public const byte[] gLongByteArray = new byte[] { 
        1, 2, 3,
        //and so on
    };
} 
```

但是我得到一个错误，即 const 数组只能用空值初始化。

如果我改变`const`它`static`编译，但我的问题是 - 当我声明它时，`public static byte[] gLongByteArray`它不会在我的应用程序每次加载时都被初始化，对吧？在这种情况下，`gLongByteArray`变量将简单地指向一个在加载到内存中的已编译 exe/dll 文件中定义的数组。我问的原因是因为这个数组很长，我不希望我的程序在每次应用程序启动时都浪费 CPU 周期来加载它，或者更糟糕的是，引用了这个类......

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-21T23:26:10.317

*编译时常量*（用`const`关键字声明的）受到严格限制。不必执行任何代码来获得这样的常量，否则它不可能是编译时常量。`const`默认情况下是常量`static`。

如果你想创建一个常量并且你不能使用编译时常量，你可以使用`static readonly`：

```
public static readonly byte[] longByteArray = new byte[] { 1, 2, 3, 4, 5 }; 
```

`static`关键字确保它只被初始化一次，并且是声明类型的一部分（而不是每个实例）。`readonly`关键字确保`longByteArray` *变量*以后不能更改。

```
Definitions.longByteArray = new byte[] { 4, 5, 6 };   // Not possible. 
```

**警告**：数组是可变的，所以在上面的代码中我仍然*可以*这样做：

```
Definitions.longByteArray[3] = 82;                    // Allowed. 
```

为了防止这种情况发生，请使类型不是数组而是只读集合接口，例如[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)or [`IReadOnlyList<T>`](http://msdn.microsoft.com/en-us/library/hh192385.aspx)，或者甚至更好的是只读集合类型，例如[`ReadOnlyCollection<T>`](http://msdn.microsoft.com/en-us/library/ms132474.aspx)它甚至不允许通过强制转换进行修改。

```
public static readonly IReadOnlyList<byte> longByteArray = new byte[] { 1, 2, 3, 4, 5 }; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T23:26:02.687

你不能做一个`const`数组。根据[文档](http://msdn.microsoft.com/en-us/library/ms173119.aspx)：

> 用户定义的类型，包括类、结构和数组，不能是**`const`**.

您必须将其声明为像这样的静态只读字段

```
public static class Definitions
{
    public static readonly byte[] gLongByteArray = new byte[] { 
        1, 2, 3,
        //and so on
    };
} 
```

当然，没有什么可以阻止某人在运行时覆盖您的数组元素，如下所示：

```
Definitions.gLongByteArray[0] = 0xFF; 
```

您必须使用*@Virtlink*建议的内置集合之一或创建您自己的自定义只读数组类来防止这种情况（[示例](https://stackoverflow.com/a/953327/1715579)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T23:27:30.823

首次加载应用程序时将初始化静态类。不要担心性能，除非您专门测量过这是一个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-04T13:44:54.067

将所有内容写入文件并作为资源嵌入！

# android - asynctask 的 Gridview 回收问题

> ID：15560008
> 
> 赞同：1
> 
> 时间：2013-03-21T23:23:22.063
> 
> 标签：android, android-view, android-gridview, recycle

当我在我的 中来回滚动时`GridView`，我的图像无法正确回收，最终将在整个网格中显示相同的图像。

![回收问题](../Images/e804b74cd4c31240661cf59dab38cbc5.png)

**适配器**

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;
    private List<String> mList;
    private int mheight;
    private int mwidth;
    private Bitmap nBitmap;

    public ImageAdapter(Context context, List<String> list, int height, int width) {
        mContext = context;
        mList = list;
        mheight = height;
        mwidth = width;
    }

    @Override
    public int getCount() {
        return mList.size();
    }

    @Override
    public Object getItem(int position) {
        return mList.get(position).toString();
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {
            imageView = new ImageView(mContext);
            InputStream is;
            try {
                is = mContext.getAssets().open(mList.get(position));
                Bitmap bm = BitmapFactory.decodeStream(is);
                Bitmap mBitmap = Bitmap.createScaledBitmap(bm, mwidth / 3, mwidth / 3, false);
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);

                this.nBitmap = mBitmap;
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } else {
            imageView = (ImageView) convertView;
        }
        imageView.setImageBitmap(nBitmap);
        return imageView;
    }
} 
```

我试图从 Ui 线程中解码位图，滚动工作很快，但是在启动应用程序时缩略图被 1 个 1 加载，并且回收的缩略图视图从原始视图和低内存设备上的低内存设备应用程序崩溃，同时从 AsyncTask 加载缩略图这里是更新的代码

```
public class ImageAdapter extends BaseAdapter {
private Context mContext;
private List<String> mList;
private int mheight;
private int mwidth;
private InputStream is;

public ImageAdapter(Context context, List<String> list, int height, int width) {
    mContext = context;
    mList = list;
    mheight = height;
    mwidth = width;
}

@Override
public int getCount() {
    return mList.size();
}

@Override
public Object getItem(int position) {
    return mList.get(position).toString();
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {
        imageView = new ImageView(mContext);
    } else {
        imageView = (ImageView) convertView;
    }

    InputStream is;
    try {
        is = mContext.getAssets().open(mList.get(position));
        Loadimage task = new Loadimage(imageView , mheight , mwidth);
        task.execute(is);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return imageView ;

}
 public class Loadimage extends AsyncTask<InputStream, Void, Bitmap>{
private final WeakReference<ImageView> imageViewReference;

private InputStream is = null;
private int width;

public Loadimage(ImageView imageView, int mheight, int mwidth) {
     imageViewReference = new WeakReference<ImageView>(imageView);
     this.width=mwidth;

    // TODO Auto-generated constructor stub
}

@Override
protected Bitmap doInBackground(InputStream... params) {
    is = params[0];

    if (is !=null) {

        Bitmap bitmap  = BitmapFactory.decodeStream(is);
        Bitmap nBitmap =Bitmap.createScaledBitmap(bitmap,width/3 , width/3, false);
        return nBitmap;     
    }
    return null; 
  }
 @Override
 protected void onPostExecute(Bitmap bitmap) {
    if (imageViewReference != null && bitmap != null) {
        final ImageView imageView = imageViewReference.get();
        if (imageView != null) {
            imageView.setImageBitmap(bitmap);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:53:56.650

您需要将生成位图的块移到`if/then`. 现在，您只在`convertView == null`.

我相信你的代码是正确的：

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;
    private List<String> mList;
    private int mheight;
    private int mwidth;

    public ImageAdapter(Context context, List<String> list, int height, int width) {
        mContext = context;
        mList = list;
        mheight = height;
        mwidth = width;
    }

    @Override
    public int getCount() {
        return mList.size();
    }

    @Override
    public Object getItem(int position) {
        return mList.get(position).toString();
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {
            imageView = new ImageView(mContext);
        } else {
            imageView = (ImageView) convertView;
        }

        InputStream is;
        try {
            is = mContext.getAssets().open(mList.get(position));
            Bitmap bm = BitmapFactory.decodeStream(is);
            Bitmap bitmap = Bitmap.createScaledBitmap(bm, mwidth / 3, mwidth / 3, false);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);

            imageView.setImageBitmap(bitmap);
        } catch (IOException e) {
            e.printStackTrace();
        }

        return imageView;
    }
} 
```

* * *

您的滚动不会很流畅，并且您会得到很多丢帧，因为您的位图解码代码效率低下（没有缓存），而且这一切都发生在 UI 线程上，这对响应能力不利。当前代码中的瓶颈不是`ImageView`s 的分配和垃圾收集。

瓶颈是（可能到目前为止）您对`Bitmap`s 的处理和创建。

您可以查看以下链接以获取建议：

[有效地显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)

特别是这个：

[从 UI 线程处理位图](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)

# c# - 如何一次读取 CSV 文件并解析出关键字

> ID：15560011
> 
> 赞同：19
> 
> 时间：2013-03-21T23:23:56.327
> 
> 标签：c#

我是 C# 新手，我已经开始使用`StreamReader`. 我试图一次读取一行文件，并在它与特定关键字（如“I/RPTGEN”）匹配时输出该行。

到目前为止，我想出了如何将整个文件读入一个字符串，但我无法弄清楚如何一次只读取一行。

到目前为止，我的代码是这样的。

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication5
{
class Test
{
    public static void Main()
    {
        try
        {
            using (StreamReader sr = new StreamReader("c:/temp/ESMDLOG.csv"))
            {
                String line = sr.ReadToEnd();
                Console.WriteLine(line);

                Console.ReadLine();
            }
        }
        catch (Exception e)
        {
            Console.WriteLine("The File could not be read:");
            Console.WriteLine(e.Message);

            Console.ReadLine();
        }
    }
}
} 
```

另外，这里是文件中一行的示例。

> 咨询，2013 年 2 月 27 日上午 12:00:44，I/RPTGEN（cadinterface），I/RPTGEN 失败 - 错误 500 - 内部服务器错误 - 返回报告请求（检查 URL 日志）。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-21T23:29:47.003

如果您的 CSV 文件仅包含一行，则`ReadToEnd`可以接受，但如果您的日志文件由多行组成，则最好使用`ReadLine`对象`StreamReader`逐行读取

```
using (StreamReader sr = new StreamReader("c:/temp/ESMDLOG.csv"))
{
    string currentLine;
    // currentLine will be null when the StreamReader reaches the end of file
    while((currentLine = sr.ReadLine()) != null)
    {
       // Search, case insensitive, if the currentLine contains the searched keyword
       if(currentLine.IndexOf("I/RPTGEN", StringComparison.CurrentCultureIgnoreCase) >= 0)
       {
            Console.WriteLine(currentLine);
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-22T00:31:39.203

另一种一次读取一行的方法是：

```
var searchItem = "Error 500";

var lines = File.ReadLines("c:/temp/ESMDLOG.csv");

foreach (string line in lines)
{
    if (line.Contains(searchItem))
    {
        Console.WriteLine(line);
    }
} 
```

# c# - C# 单选按钮测验

> ID：15560012
> 
> 赞同：-1
> 
> 时间：2013-03-21T23:24:07.027
> 
> 标签：c#

我正在尝试创建一个部分作为应用程序的一部分，以单选按钮的形式显示一个带有 3 个可能答案的问题。

我设法让它检查是否选择了问题 1 的单选按钮，但是当为问题 2 添加另外 3 个单选按钮时，它包括第一个问题的前 3 个单选按钮。

有没有办法将问题 1 的单选按钮与问题 2、3、4、5 等分开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:25:28.583

对每个问题使用不同`GroupBox`的，并将每个问题的单选按钮放在其各自的`GroupBox`. 您可以在设计器中轻松完成此操作，但您也可以在代码中指定它。

检查图像：![在此处输入图像描述](../Images/3a898860389b480cc8b7afccab65e706.png)

# jquery - 大量延迟对象导致调用堆栈超出

> ID：15560021
> 
> 赞同：1
> 
> 时间：2013-03-21T23:24:54.937
> 
> 标签：jquery, jquery-deferred

我有大量需要同步的异步调用。因此，我想使用 jquerys deferred objects，但不幸的是，当我调用“then”函数时，Chrome 25 和 IE 9 中会抛出“Uncaught RangeError：Maximum call stack size exceeded”（如果有超过 62000 个 promise） .

```
var promises= []
for(var i=0; i < 63000;++i) {
    var def = $.Deferred();
    promises.push(def.promise());           
    def.resolve();
}

var regEntries = $.when.apply(null, promises);
regEntries.then(function() {
    console.log('done');
}); 
```

你也可以在这里试试：http: [//jsfiddle.net/f8LPG/](http://jsfiddle.net/f8LPG/)

您知道为什么会发生这种情况以及如何使用更多延迟对象吗？

# asp.net - ASP.NET MVC 4 SimpleMembership 和移动服务

> ID：15560023
> 
> 赞同：2
> 
> 时间：2013-03-21T23:25:00.663
> 
> 标签：asp.net, oauth, client, simplemembership, azure-mobile-services

我正在做一个更大的项目，该项目将包括一个网站和客户端移动应用程序，适用于 Windows Phone 8/Windows 8/以后可能是 iOS 和 Android。在网站上，用户可以使用本地经典帐户或使用 OAuth 提供程序（FB、Twitter、Google、Microsoft 帐户）登录。现在我正在开发我的移动应用程序，但真的不知道如何将它们与现有的用户数据库连接以允许用户以所有这些方式登录。

移动服务提供了一种身份验证方式，但它似乎无法与 MVC 4 中现有的 SimpleMembership 一起使用。此外，即使我让 OAuth 提供程序正常工作，如何启用“经典登录”用户仍然存在问题登录应用程序。

您对如何进行有任何想法吗？我的目标是创造一种无缝的体验，这将在所有设备上统一。这需要我统一用户访问方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:49:17.807

我最终在我的网站上创建了一个身份验证服务，为我的应用程序创建了一个令牌，以便他们以后可以调用其他经过身份验证的其他服务。这导致我失去了移动服务，但我获得了使用我想要的任何身份验证服务的能力，因为应用程序现在独立于它，只需使用网站界面登录即可。

# html - 当用户在文本输入字段中按 Enter 时，是什么导致提交按钮获得点击事件？

> ID：15560033
> 
> 赞同：0
> 
> 时间：2013-03-21T23:25:45.570
> 
> 标签：html, cross-browser

我认为如果我们`click`在提交按钮上设置事件处理程序，它不如`submit`在表单上设置事件更可取。

但我发现我们可以做到

[http://jsfiddle.net/MtLca/6/](http://jsfiddle.net/MtLca/6/)

```
document.getElementById('the-button').onclick = function (evt) {
    alert("That's good I am clicked...");
} 
```

使用 HTML：

```
<form method="get">
    <input type="text" name="someVar">
    <input id="the-button" type="submit">
</form> 
```

当用户在文本输入字段上按 Enter 时，提交按钮将收到一个`click`事件。它适用于 Chrome、Firefox 和 Safari，当在 IE 6 上尝试时，它不会触发事件。所以它似乎是一个浏览器实现，每当提交表单时，（第一个）提交按钮将`click`在表单获得事件之前获得一个`submit`事件（参见[http://jsfiddle.net/MtLca/12/](http://jsfiddle.net/MtLca/12/)）。有人知道浏览器的历史和演变，知道上面发生的细节吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:37:11.030

我不知道这是否仍然是这种情况，但在 IE6 中有一个文本字段的表单导致输入不提交表单。尝试添加一个额外的输入，然后看看它是否有效。

# proof - 循环不变性和算法的证明

> ID：15560034
> 
> 赞同：1
> 
> 时间：2013-03-21T23:25:46.473
> 
> 标签：proof, invariants, loop-invariant

我将如何获得循环不变量并为以下算法证明它。

```
power(x,y):
   z = 1
   m = 0
   while m < y:
       z = z*x
       m = m+1
   return z 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:31:12.227

首先，我认为您的意思是 z = z*x 要显示任何给定循环的循环不变性，您必须提出一个在任何迭代的开始和结束时都不会改变的语句。使用该不变量，您将证明当程序终止时，函数可以工作。你的功能基本上是在尝试做 x^y。

让我们构造一个循环不变量：Z = x^m。您可以看到在循环的开始和结束时都是如此。

你也知道循环只能在 not(m=y, or m =y.

因此，如果 Z=x^m，并且在终止时 m = y。那么 Z = x^y。

所以我们可以看到这个程序是部分正确的。

# node.js - Heroku：在部署期间排除 npm 错误 - 读取 /tmp 文件

> ID：15560037
> 
> 赞同：13
> 
> 时间：2013-03-21T23:25:48.440
> 
> 标签：node.js, heroku, npm

一些新的依赖或其他该死的东西导致 npm 在`get push heroku master`部署期间出错：

```
-----> Node.js app detected
-----> Resolving engine versions
       Using Node.js version: 0.10.1
       Using npm version: 1.2.15
-----> Fetching Node.js binaries
-----> Vendoring node into slug
-----> Installing dependencies with npm
       ....
       npm ERR! Additional logging details can be found in:
       npm ERR!     /tmp/build_24pmtv04ok0ss/npm-debug.log
       npm ERR! not ok code 0 
```

`not ok`的确。控制台上没有打印任何其他有用的信息，所以我当然想看看该日志文件中的内容。

所以我尝试了一点：

```
$ heroku run cat /tmp/build_24pmtv04ok0ss/npm-debug.log 
```

但是，似乎不存在这样的文件：

```
Running `cat /tmp/build_24pmtv04ok0ss/npm-debug.log` attached to terminal... up, run.3166
cat: /tmp/build_24pmtv04ok0ss/npm-debug.log: No such file or directory 
```

我的问题是：

*   日志文件去哪了？为什么我看不懂？
*   Heroku/npm 有没有其他方法可以给我打印到控制台的详细错误？
*   为什么完全相同的节点环境在本地运行良好，但在 Heroku 上却失败了？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-07-14T15:52:26.517

在解决使用自定义构建包的所有麻烦之前，请尝试使用以下命令在 heroku 上启用更详细的日志记录输出：

`heroku config:set NPM_CONFIG_LOGLEVEL=verbose`

有关更多信息，请参阅[https://devcenter.heroku.com/articles/troubleshooting-node-deploys](https://devcenter.heroku.com/articles/troubleshooting-node-deploys)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T05:40:12.660

当您将代码推送到 Heroku 时，您的构建会在临时构建 dyno 上运行，因此一旦构建完成，所有文件都会消失，因为 dynos 有一个[临时文件系统](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)。`heroku run cat /tmp/build_24pmtv04ok0ss/npm-debug.log`没有帮助的原因是您使用现有应用程序的新文件系统附加到[一次性测功机](https://devcenter.heroku.com/articles/one-off-dynos)（与构建测功机完全分开）。

所有的希望都不会丢失。您应该能够通过[将 buildpack 调整](https://devcenter.heroku.com/articles/buildpacks#creating-a-buildpack)为`cat`退出时看到发生了什么`npm-debug.log`，如下所示：

```
function cat_npm_debug_log() {
  if [ -f $BUILD_DIR/npm-debug.log ]; then
    cat $BUILD_DIR/npm-debug.log
  fi
}

trap cat_npm_debug_log EXIT 
```

我还没有彻底测试过它，但是我对[默认的 Node buildpack做了一个快速的](https://github.com/heroku/heroku-buildpack-nodejs)[fork](https://github.com/ryanbrainard/heroku-buildpack-nodejs)来[完成我刚刚在上面展示的操作](https://github.com/ryanbrainard/heroku-buildpack-nodejs/commit/984654096e954b986a191e6c285537db66bb1bb1)。[通过将其设置为自定义 buildpack](https://devcenter.heroku.com/articles/buildpacks#using-a-custom-buildpack)随意尝试：

```
heroku config:add BUILDPACK_URL="https://github.com/ryanbrainard/heroku-buildpack-nodejs.git" 
```

# redis - Redis 上的间歇性缓慢性能：从哪里开始？

> ID：15560042
> 
> 赞同：2
> 
> 时间：2013-03-21T23:26:24.990
> 
> 标签：redis

如果对 Redis 的简单读/写调用有时需要 3-6 秒而不是通常的亚毫秒，我从哪里开始寻找？

Redis 服务器 CPU 永远不会超过 %2。而且我很确定网络没有问题。

我们有一个非常基本的设置。

在 CentOS 2.6 内核上使用 Redis 2.6.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:09:37.993

您可以从查看此页面上描述的要点开始：

[Redis 延迟问题排查](http://redis.io/topics/latency)

由于您的 CPU 消耗较低，我将首先检查内存和磁盘 I/O 问题：

*   当前的内存消耗是多少？（免费，redis info 命令）
*   盒子在交换吗？（vmstat，顶部）
*   使用哪种持久性机制？（rdb 或 aof）
*   当问题发生时您测量多少 I/O 活动 cqn (iostat)
*   你在 Xen VM 上运行你的东西吗？（分叉延迟问题）

# ssis - 数据导出到 CSV 后更新 SQL 中的记录

> ID：15560046
> 
> 赞同：1
> 
> 时间：2013-03-21T23:26:45.390
> 
> 标签：ssis, sql-server-2008-r2

我对 SSIS 还是很陌生，而且总体上在 SQL 方面走得更远。我创建了一个数据流任务，它从表中提取与 UNION ALL 脚本匹配的记录并将它们转储到服务器上的 .CSV 文件中。然后，我添加了一个 FTP 任务，将文件上传到收件人，以便他们最终处理。转储数据的条件之一是表中的 TransDate 字段为空白且 StartDate 字段等于今天。因为有 4 个 StartDates 和 4 个 TransDates，所以我使用 UNION All 并根据 4 组数据中的哪一组分配一个“行号”。我缺少的是一种验证转储到 CSV 的记录然后设置对应于该行的 TransDate 的方法。

```
SELECT
    CallLog.CallID as Ticket
    , 1 as Line
    , CallLog.CustID as Store#
    , AcctNum as SoldTo
    , CAST(BillStart01 as DATE) as BillStart
    , Cast(BillEnd01  as DATE) as BillEnd
    , CostSheet01 as BillAmount
    , SKU01 as SKU
    , Term01 as Terms
    , CAST(EffDate01 as DATE) as EffStart
    , CAST(EffDate02 as DATE) as EffEnd
FROM
    CallLog, Detail, Subset
WHERE
    (CallLog.CallID=Detail.CallID and CallLog.CallID=Subset.CallID) 
AND CallType='Contract' 
    AND TransDate01 = ''
    AND Cast(SentOps as Date) = CONVERT(date,GETDATE()) 
    AND Month(RcvDate01) <= Month(GETDATE()) 
    AND YEAR(RcvDate01) = YEAR(GetDate())

UNION ALL

SELECT CallLog.CallID as Ticket
    , 2 as Line
    , CallLog.CustID as Store#
    , AcctNum as SoldTo
    , CAST(BillStart 02 as DATE) as BillStart
    , Cast(BillEnd02 as DATE) as BillEnd
    , CostSheet02 as BillAmount
    , SKU02 as SKU
    , Term02 as Terms
    , CAST(EffDate01 as DATE) as EffStart
    , CAST(EffDate02 as DATE) as EffEnd
FROM
    CallLog, Detail, Subset
WHERE
    (CallLog.CallID=Detail.CallID and CallLog.CallID=Subset.CallID) 
AND CallType='Contract' 
    AND TransDate02 = ''
    AND Cast(SentOps as Date) = CONVERT(date,GETDATE())
    AND Month(RcvDate02) <= Month(GETDATE()) 
    AND YEAR(RcvDate02)=YEAR(GetDate())

UNION ALL

SELECT
    CallLog.CallID as Ticket
    , 3 as Line
    , CallLog.CustID as Store#
    , AcctNum as SoldTo
    , CAST(BillStart 03 as DATE) as BillStart
    , Cast(BillEnd03 as DATE) as BillEnd
    , CostSheet03 as BillAmount
    , SKU03 as SKU
    , Term03 as Terms
    , CAST(EffDate01 as DATE) as EffStart
    , CAST(EffDate02 as DATE) as EffEnd
FROM 
    CallLog, Detail, Subset
WHERE
    (CallLog.CallID=Detail.CallID and CallLog.CallID=Subset.CallID)
    AND CallType='Contract' 
    AND TransDate03 = ''
    AND Cast(SentOps as Date) = CONVERT(date,GETDATE())
    AND Month(RcvDate03) <= Month(GETDATE())
    AND YEAR(RcvDate03) = YEAR(GetDate())

UNION ALL

SELECT
    CallLog.CallID as Ticket
    , 4 as Line
    , CallLog.CustID as Store#
    , AcctNum as SoldTo
    , CAST(BillStart 04 as DATE) as BillStart
    , Cast(BillEnd04 as DATE) as BillEnd
    , CostSheet04 as BillAmount
    , SKU04 as SKU
    , Term04 as Terms
    , CAST(EffDate01 as DATE) as EffStart
    , CAST(EffDate02 as DATE) as EffEnd
FROM
    CallLog, Detail, Subset
WHERE
    (CallLog.CallID=Detail.CallID AND CallLog.CallID=Subset.CallID) 
AND CallType='Contract' 
    AND TransDate04 = ''
    AND Cast(SentOps as Date) = CONVERT(date,GETDATE()) 
    AND Month(RcvDate04)<=Month(GETDATE()) 
    AND YEAR(RcvDate04)=YEAR(GetDate())
Order BY Ticket, Line 
```

任何帮助/方向表示赞赏。

谢谢，

杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T03:09:30.843

杰夫，看起来您需要将这 4 个选择语句中的每一个都保存在单独的数据源中 - 所以 4 个 OLEDB 数据源。这似乎是您解决方案的关键。

然后在每个数据源之后，使用条件拆分来确定该行是否应包含在输出中。因此，每个来源都有 4 个条件拆分。

您还需要在条件拆分后立即进行派生列转换（如果已满足条件）来设置 TransDate。

最终，使用 Union All 转换将它们合并在一起，并将 union all 的输出放到您的 csv 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:30:10.683

管理导出批次的更强大的方法：

1.  通过使用标记日期更新所有空白转换日期来标记您将要导出的记录（在所有四个表中）*，*例如 2099-01-01。这会识别并“冻结”您将要导出的那批记录。

2.  现在仅导出和传输日期为 2099-01-01 的记录

3.  *导出和 FTP 过程无误完成后，将标记为 Transdate 的记录更新为今天的*日期**

**   如果该过程没有发生错误，请将 2099-01-01 日期设置回空白。* 

 *此过程允许您隔离要导出的记录。如果您不先标记它们，那么新的（空白）记录可能会在您仍在导出较早的集合时到达，然后它们会被错误地标记为“已导出”。*

# javascript - 非 unicode 使用正则表达式模式少几个字母

> ID：15560047
> 
> 赞同：0
> 
> 时间：2013-03-21T23:27:02.513
> 
> 标签：javascript, regex, regular-language

我知道，对于非 unicode，我们使用正则表达式模式`x00-\x1F\x80-\x9F]+$.` 我们可以使用不包括字母的正则表达式`A, C, G, and T`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:29:05.643

您可以将 A、C、G 和 T 添加到否定字符类中。

```
^[^ACGT\x00-\x1F\x80-\x9F]+$ 
```

# paypal - 沙盒帐户

> ID：15560049
> 
> 赞同：0
> 
> 时间：2013-03-21T23:09:52.197
> 
> 标签：paypal

我遵循了[PayPal APIs Getting Started Guide](https://www.x.com/developers/paypal/documentation-tools/quick-start-guides/paypal-apis-getting-started-guide)并在 PHP 中实现了该示例。但无论我做什么，我总是得到这个：

```
Array
(
    [responseEnvelope] => Array
        (
            [timestamp] => 2013-03-21T16:01:41.027-07:00
            [ack] => Failure
            [correlationId] => f24ca862fa014
            [build] => 5343121
        )

    [error] => Array
        (
            [0] => Array
                (
                    [errorId] => 520003
                    [domain] => PLATFORM
                    [subdomain] => Application
                    [severity] => Error
                    [category] => Application
                    [message] => Authentication failed. API credentials are incorrect.
                )

        )

) 
```

而且，确实，我的 API 凭据似乎不正确。如果我使用一些 API 凭据尝试相同的代码，我在从网站下载的一些 PHP 示例中找到了一切正常。

为什么我的 PayPal 个人资料会生成无效的 API 凭据？我需要做什么才能获得有效的 API 密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:55:56.747

我看到了你的票，我得到了同样的错误。通过查看您提供的内容，您似乎使用了错误的凭据。您正在尝试连接沙盒，但您是否设置了开发者帐户并在该帐户中设置了测试沙盒卖家和买家帐户？如果您尚未执行此操作，则需要执行此操作才能使用沙箱进行测试。您似乎正在使用实时凭据尝试在沙盒上进行测试，但这不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:57:08.277

您可以在 PayPal 个人资料中找到的 API 凭据（显然）不能用于在沙盒中开发内容。您需要登录[PayPal Developer](https://developer.paypal.com)（使用您的常规 PayPal 帐户）并创建[虚拟测试帐户](https://www.x.com/developers/paypal/documentation-tools/ug_sandbox)。这些虚拟测试用户之一需要是**业务**类型，并且与您的真实 PayPal 帐户具有相同的电子邮件。然后，它会被分配一些虚拟测试 API 凭证——<em>这些是您需要使用的 API 凭证！

# css - CSS“！important”似乎不起作用

> ID：15560051
> 
> 赞同：1
> 
> 时间：2013-03-21T22:19:48.600
> 
> 标签：css

我的 CSS 有，按以下顺序：

```
B, STRONG
{
    color: #333;
}
A
{
    color: #00ae9d !important;
    border-bottom: dotted 1px #00ae9d;
    text-decoration:none;
} 
```

但是当我持有一个链接时，它会显示为灰色并带有绿点。我需要做什么才能使粗体项目显示为深灰色，而链接的粗体项目显示为绿色并带有点？有没有办法对每条规则进行排名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:34:16.963

行为将取决于您设置标签的顺序

```
<b><a href="#">One</a></b> 
```

不一样

```
<a href="#"><b>One</b></a> 
```

检查[这个jsfiddle](http://jsfiddle.net/xqKz9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T23:42:58.670

给`<a>`你需要遵循爱恨规则的颜色：

**L**`(link)` o* *V* * `(visited)`e **H** `(hover)`**A**`(active)` te

```
a:link {
 color: #00ae9d;
}
a:visited {
 color: #999;
}
a:hover {
 color: #900;
}
a:active {
 color: #555;
}
a:focus {
 color: #900;
} 
```

当然，您可以将它们分组，但您必须保持相同的顺序。

```
a:link, a:visited {
 color: #00ae9d;
}
a:hover, a:active, a:focus {
 color: #900;
} 
```

# forms - Symfony 类型验证不起作用 - 始终返回“此值不应为空”

> ID：15560060
> 
> 赞同：1
> 
> 时间：2013-03-21T23:28:15.477
> 
> 标签：forms, symfony

我在 2.1.7 中的 Symfony 表单验证遇到了一些问题。

当我将数据绑定到表单时，我得到的所有错误都是“此值不应为空” - 我不知道哪里出错了？如果数据无效，似乎数据没有绑定到表单，但它没有给我预期的错误，而是将其视为空白。

即对于开始字段，我提交了一个字符串“这应该是一个日期”——我得到的错误是针对 NotBlank，而它应该是针对非日期的。

在逐步完成表单绑定过程时，我注意到以下内容：

当`Form/Form.php`命中以下行时，日期的提交数据（它是一个字符串 - “2013-01-01”）被设置为一个空数组 - 一旦循环被命中，数组键显然没有设置，这就是问题似乎源于。

如果我将一个字段设置为一个 int，然后提交一个字符串，则该`viewToNorm`方法会抛出一个错误，当捕获集合`synchronized = false`并且 modelData 和 normData 未绑定时。

**实体：**

```
namespace HvH\DealsBundle\Entity;

class Deal
{
    private $name;
    private $start;

    // getters and setters here...
} 
```

**验证：**

```
# src/HvH/DealsBundle/Resources/config/validation.yml
HvH\DealsBundle\Entity\Deal:
    properties:
        name:
            - NotBlank: ~
            - Type:
                type: string
        start:
            - NotBlank: ~
            - Date: ~ 
```

**表格类型：**

```
<?php

namespace HvH\DealsBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class DealType extends AbstractType
{

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name', null, array('description' => 'name'))
            ->add('start', null, array('description' => 'start'))
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'HvH\DealsBundle\Entity\Deal',
            'csrf_protection' => false,
            'cascade_validation' => false // have also tried this with true
        ));
    }

    public function getName()
    {
        return 'deal';
    }

} 
```

# jquery - 如果函数中的语句不起作用

> ID：15560062
> 
> 赞同：-1
> 
> 时间：2013-03-21T23:28:33.267
> 
> 标签：jquery

`1`如果没有有用的数据，PHP 文件会返回一个。如果有有用的数据，我想在`<p>`. 它这样做，但它也附加了`1`。有人看到我哪里出错了吗？

```
setInterval(function () {
    $.ajax({
        url: 'gettweetcode.php',
        dataType: 'text',
        success: function (text) {
            if (text != 1) {
                $("p").after(text);
                $("table").fadeIn(1500);
            };
        }
    });
}, 1000); // JavaScript Document 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:39:20.937

如果返回的是字符串，请检查字符串，并尝试修剪掉空格，因为这有时是个问题：

```
setInterval(function () {
    $.ajax({
        url: 'gettweetcode.php',
        dataType: 'text',
        success: function (text) {
            if ( $.trim(text) != "1") {
                $("p").after(text);
                $("table").fadeIn(1500);
            };
        }
    });
}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:39:53.963

使用此代码：

```
 if ($.trim(text) !== '1') ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T23:44:56.323

使用这个条件`if(parseInt(text,10) !== 1)`

如果它是 1，并且只有 1，它应该没问题。抓住的是，如果它返回“1dfw”，它也将解析为 1 - 因此，如果这种情况可能发生，您可能需要对其进行修剪和子串化。

# php - 始终是 else 体内的程序。为什么？

> ID：15560063
> 
> 赞同：-4
> 
> 时间：2013-03-21T23:28:34.213
> 
> 标签：php, android, if-statement

对于此代码，它总是给我：{“消息”：“缺少必填字段”，“成功”：0}

这意味着它没有进入 if 身体！它总是去别的地方！我不知道为什么！

```
reg_Doc_to_Patient.php
==========

    <?php

    /*
     * Following code will update a product information
     * A product is identified by product id (pid)
     */

    // array for JSON response
    $response = array();

    // check for required fields
    if(isset($_POST['id']) && isset($_POST['Doc_id']) ) {    

        $id = $_POST['id'];
        $Doc_id = $_POST['Doc_id'];

        // include db connect class
        require_once __DIR__ . '/db_connect.php';

        // connecting to db
        $db = new DB_CONNECT();

        // mysql update row with matched pid
        $result = mysql_query("UPDATE patients SET  Doc_id = '$Doc_id' WHERE id = $id");

        // check if row inserted or not
        if ($result) {
            // successfully updated
            $response["success"] = 1;
            $response["message"] = "Product successfully updated.";

            // echoing JSON response
            echo json_encode($response);
        } else {

        }
    } else {
        // required field is missing
        $response["success"] = 0;
        $response["message"] = "Required field(s) is missing";

        // echoing JSON response
        echo json_encode($response);
    }
    ?>

AllRequests.java
==========

    package com.example.rpm;

    import java.util.ArrayList;
    import java.util.HashMap;
    import java.util.List;

    import org.apache.http.NameValuePair;
    import org.apache.http.message.BasicNameValuePair;
    import org.json.JSONArray;
    import org.json.JSONException;
    import org.json.JSONObject;

    import android.app.ListActivity;
    import android.app.ProgressDialog;
    import android.content.Intent;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.View;
    import android.widget.AdapterView;
    import android.widget.ListAdapter;
    import android.widget.ListView;
    import android.widget.SimpleAdapter;
    import android.widget.TextView;
    import android.widget.AdapterView.OnItemClickListener;
    import android.widget.Toast;

    import com.example.rpm.Accept.SaveProductDetails;
    import com.example.rpm.AllDoctor.LoadAllProducts;

    public class AllRequests extends ListActivity {

        // Progress Dialog
            private ProgressDialog pDialog;

            // Creating JSON Parser object
            JSONParser jParser = new JSONParser();

            JSONParser jsonParser = new JSONParser();

            ArrayList<HashMap<String, String>> productsList;

            // url to get all products list
            private static String url_all_products = "http://10.0.2.2/RPM-connect/get_all_requests.php";
            private static String url_edit_products = "http://10.0.2.2/RPM-connect/reg_Doc_to_Patient.php";

            // JSON Node names
            private static final String TAG_SUCCESS = "success";
            private static final String TAG_DOCTOR = "products";

            private static final String TAG_Patient_ID = "Patient_ID";
            private static final String TAG_Doctor_ID= "Doctor_ID";

            private static  String id=""; // of patient
            private static  String Doc_id="";// of Doctor 

            // products JSONArray
            JSONArray doctor = null;

            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.requests);

                // Hashmap for ListView
                productsList = new ArrayList<HashMap<String, String>>();

                // Loading products in Background Thread
                new LoadAllProducts().execute();

                // Get listview
                ListView lv = getListView();

                // on seleting single product
                // launching Edit Product Screen
                lv.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> parent, View view,
                            int position, long idd) {
                        // getting values from selected ListItem

                        final String p_Id = ((TextView) view.findViewById(R.id.p_id)).getText().toString();
                        final String d_Id = ((TextView) view.findViewById(R.id.d_id)).getText().toString();

                        id= p_Id;
                        Doc_id= d_Id;

                        new VerivyDocToPatient().execute();

                        Toast.makeText(getApplicationContext(), "yes", 500).show();
                        // Starting new intent
                        //Intent in = new Intent(getApplicationContext(),   AllRequests.class);
                        // sending pid to next activity
                        //in.putExtra(TAG_ID, Id);

                        // starting new activity and expecting some response back
                    //  startActivityForResult(in, 100);
                    }
                });

            }

            // Response from Edit Product Activity
            @Override
            protected void onActivityResult(int requestCode, int resultCode, Intent data) {
                super.onActivityResult(requestCode, resultCode, data);
                // if result code 100
                if (resultCode == 100) {
                    // if result code 100 is received 
                    // means user edited/deleted product
                    // reload this screen again
                    Intent intent = getIntent();
                    finish();
                    startActivity(intent);
                }

            }

            /**
             * Background Async Task to Load all product by making HTTP Request
             * */
            class LoadAllProducts extends AsyncTask<String, String, String> {

                /**
                 * Before starting background thread Show Progress Dialog
                 * */
                @Override
                protected void onPreExecute() {
                    super.onPreExecute();
                    pDialog = new ProgressDialog(AllRequests.this);
                    pDialog.setMessage("Loading doctors. Please wait...");
                    pDialog.setIndeterminate(false);
                    pDialog.setCancelable(false);
                    pDialog.show();
                }

                /**
                 * getting All products from url
                 * */
                protected String doInBackground(String... args) {
                    // Building Parameters
                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    // getting JSON string from URL
                    JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

                    // Check your log cat for JSON reponse
                    Log.d("All Products: ", json.toString());

                    try {
                        // Checking for SUCCESS TAG
                        int success = json.getInt(TAG_SUCCESS);

                        if (success == 1) {
                            // products found
                            // Getting Array of Products
                            doctor = json.getJSONArray(TAG_DOCTOR);

                            // looping through All Products
                            for (int i = 0; i < doctor.length(); i++) {
                                JSONObject c = doctor.getJSONObject(i);

                                // Storing each json item in variable

                                String Patient_ID = c.getString(TAG_Patient_ID);
                                String Doctor_ID = c.getString(TAG_Doctor_ID);

                                // creating new HashMap
                                HashMap<String, String> map = new HashMap<String, String>();

                                // adding each child node to HashMap key => value

                                map.put(TAG_Patient_ID, Patient_ID);
                                map.put(TAG_Doctor_ID, Doctor_ID);

                                // adding HashList to ArrayList
                                productsList.add(map);
                            }
                        } else {
                            // no products found
                            // Launch Add New product Activity
                            Intent i = new Intent(getApplicationContext(),
                                    Adddoctor.class);
                            // Closing all previous activities
                            i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(i);
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }

                    return null;
                }

                /**
                 * After completing background task Dismiss the progress dialog
                 * **/
                protected void onPostExecute(String file_url) {
                    // dismiss the dialog after getting all products
                    pDialog.dismiss();
                    // updating UI from Background Thread
                    runOnUiThread(new Runnable() {
                        public void run() {
                            /**
                             * Updating parsed JSON data into ListView
                             * */
                            ListAdapter adapter = new SimpleAdapter(
                                    AllRequests.this, productsList,
                                    R.layout.list_requests, new String[] { TAG_Doctor_ID,TAG_Patient_ID },  
                                    new int[] { R.id.p_id, R.id.d_id
                                            });
                            // updating listview
                            setListAdapter(adapter);

                        }
                    });

                }

            }

            /**
             * Background Async Task to  Save product Details
             * */
            class VerivyDocToPatient extends AsyncTask<String, String, String> {

                /**
                 * Before starting background thread Show Progress Dialog
                 * */
                @Override
                protected void onPreExecute() {
                    super.onPreExecute();
                    pDialog = new ProgressDialog(AllRequests.this);
                    pDialog.setMessage("verifying...");
                    pDialog.setIndeterminate(false);
                    pDialog.setCancelable(true);
                    pDialog.show();
                }

                /**
                 * Saving product
                 * */
                protected String doInBackground(String... args) {

                    // getting updated data from EditTexts
                    //String ID = txtID.getText().toString();
                    /*String Fname = txtFname.getText().toString();
                    String Sname = txtSname.getText().toString();
                    String Lname = txtLname.getText().toString();
                    String Specialist = txtSpecialist.getText().toString();
                    String Gender = txtGender.getText().toString();
                    String Workphone = txtWorkphone.getText().toString();
                    String password = txtpassword.getText().toString();
                    */

                    // Building Parameters
                    List<NameValuePair> params = new ArrayList<NameValuePair>();

                    params.add(new BasicNameValuePair(TAG_Patient_ID, id));
                    params.add(new BasicNameValuePair(TAG_Doctor_ID, Doc_id));

                    // sending modified data through http request
                    // Notice that update product url accepts POST method
                    JSONObject json = jsonParser.makeHttpRequest(url_edit_products,
                            "POST", params);
                    Log.d("aaaa",json.toString());

                    // check json success tag
                    try {
                        int success = json.getInt(TAG_SUCCESS);

                        if (success == 1) {
                            // successfully updated
                            Intent i = getIntent();
                            // send result code 100 to notify about product update
                            setResult(100, i);
                            finish();
                        } else {
                            // failed to update product
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }

                    return null;
                }

                /**
                 * After completing background task Dismiss the progress dialog
                 * **/
                protected void onPostExecute(String file_url) {
                    // dismiss the dialog once product uupdated
                    pDialog.dismiss();
                }
            }

    } 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:32:29.937

在您的 Java 代码中，您使用`Patient_ID`and`Doctor_ID`作为参数名称，但 PHP 正在检查`id`and `Doc_id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:41:00.723

我不确定这是否是实际问题。

```
isset($_POST['id']) && isset($_POST['Doc_id'])

params.add(new BasicNameValuePair(TAG_Patient_ID, id))

params.add(new BasicNameValuePair(TAG_Doctor_ID, Doc_id)) 
```

看看您是否在此处检查正确的名称。

# eclipse - Eclipse：有没有办法使用当前源文件的样式来指定代码格式化样式？

> ID：15560070
> 
> 赞同：2
> 
> 时间：2013-03-21T23:29:58.397
> 
> 标签：eclipse, code-formatting

我知道我可以手动设置 Eclipse Java 格式化程序的所有各种选项，然后轻松地将该样式应用于任何 Java 文件。

有没有办法去另一个方向？给定一个 Java 文件，输出与该文件的格式匹配（在某种程度上接近）的 Eclipse 格式化程序设置？我希望能够编辑现有代码并使用匹配的样式，而不是强加新的样式。而且我宁愿不必为不同的代码样式多次执行此操作。

这里的重点不是让我的组织学习编码约定；对于内部编写的代码，我只是手工完成，因为只有一组约定。困难的是，有许多来自外部组织的项目混合使用不同的编码约定，我想调整我的设置以匹配那些现有的项目。他们不会拿走我的:-)。

最好用于 Eclipse 3.7，但如果需要的话，我会切换到 4.x。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:40:49.443

据我所知，对于 java 项目，代码格式化程序设置特定于工作区，而不是项目。设置位于 Preferences->Java->Code Style->Formatter。

因此，如果有人给您一个隔离的源文件或 Eclipse 项目，该实体将不包含任何 Eclipse 工作区特定的代码格式化程序设置。

如果您有权访问获取该源/项目的原始工作区，则可以从那里导出设置（Preferences->Java->Code Style->Formatter->Export All）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:08:05.833

快速而简短的回答：**不**。Eclipse 中不支持该功能，并且 EclipseCentral 中没有插件可以为您执行此操作。

对不起 ：（

# php - Laravel 从子目录 HTTP 请求路由回根目录

> ID：15560074
> 
> 赞同：0
> 
> 时间：2013-03-21T23:30:05.667
> 
> 标签：php, http, routes, laravel

在我的 routes.php 文件中，我想单击 a 标签中的内容，当单击该标签时，它将以 href 字符串的形式发送 http 请求，并且如果指定了路由，则 routes.php 将路由到目的地。我遇到的问题是，当我在 mywebsite.com/view1/view2 并发送 http 请求“view1”时，routes.php 尝试发送 view1/view1。每次调用它时，无论请求来自多少个目录，如何让 http 请求从根目录开始？

```
Route::get('view1', function()
{
return View::make ('view1.nav')
});

Route::get('view1/view2', function()
{
return View::make ('view2.nav')
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:33:33.460

很难说没有看到视图，但请确保您正确链接到您的路线`<a href="{{ URL::to('view1') }}">`应该生成正确的 URL。[这里](http://jasonlewis.me/article/laravel-reverse-routing)有一些关于生成链接的更高级信息

# android - AlarmManager 未正确触发

> ID：15560081
> 
> 赞同：0
> 
> 时间：2013-03-21T23:31:03.587
> 
> 标签：android, alarmmanager

对于我的这部分代码，我有一个时间表，其中包含一周中每一天的布尔值。如果那一天是真的，那么就有那一天的开始和结束警报，并且这些警报应该在每周的那一天触发。如果我在测试期间将警报设置为当天晚些时候，或者一周中的晚些时候，但是对于任何其他时间，例如已经发生的一周中的一天，或者如果我将任一警报设置为早些时候与测试时相比，由于某种原因，两个警报在创建时都会响起。这是创建警报的代码：

```
public void createNewAlarm(int i)   //int correlates to position in list
    {
        for(int j = 0; j < 7; j++)
        {
            if(tempmainfrag.mainObjectList.returnSchedule(i).returnDays()[j])   //if this day of the week has an alarm
            {
                ////beginning alarm stuff////
                int alarmid = (int)System.currentTimeMillis();  //creates unique id for the alarm attached to the object

                int adjustedday = j+2;  //makes time for DAY_OF_WEEK where sunday = 1, monday = 2, etc.
                if (adjustedday == 8)
                    adjustedday = 1;
                Calendar startcal = Calendar.getInstance();
                startcal.set(Calendar.DAY_OF_WEEK, adjustedday);
                startcal.set(Calendar.HOUR_OF_DAY, tempmainfrag.mainObjectList.returnSchedule(i).returnTimes()[0]);
                startcal.set(Calendar.MINUTE, tempmainfrag.mainObjectList.returnSchedule(i).returnTimes()[1]);
                startcal.set(Calendar.SECOND, 0);

                Intent intent = new Intent(this, SilenceHandler.class);
                intent.putExtra("alarm_message", "Start!"); 
                intent.putExtra("vibratemode", tempmainfrag.mainObjectList.returnSchedule(i).returnVibrate());
                intent.setData((Uri.parse(String.valueOf(alarmid))));
                PendingIntent pendintent = PendingIntent.getBroadcast(this, alarmid, intent, PendingIntent.FLAG_UPDATE_CURRENT);
                tempmainfrag.mainObjectList.returnSchedule(i).addStartPendIntent(alarmid);

                AlarmManager alarmman = (AlarmManager)getSystemService(ALARM_SERVICE);
                alarmman.setRepeating(AlarmManager.RTC_WAKEUP, startcal.getTimeInMillis(), AlarmManager.INTERVAL_DAY * 7, pendintent);
                //120000 means every 2 mins  

                ////ending alarm stuff////
                if(tempmainfrag.mainObjectList.returnSchedule(i).nextday)   //if end alarm ends on next day instead of same day
                {
                    adjustedday++;
                    if (adjustedday == 8)
                        adjustedday = 1;
                }

                alarmid = (int)System.currentTimeMillis();  //creates unique id for the alarm attached to the object

                Calendar endcal = Calendar.getInstance();
                endcal = Calendar.getInstance();
                endcal.set(Calendar.DAY_OF_WEEK, adjustedday);
                endcal.set(Calendar.HOUR_OF_DAY, tempmainfrag.mainObjectList.returnSchedule(i).returnTimes()[2]);
                endcal.set(Calendar.MINUTE, tempmainfrag.mainObjectList.returnSchedule(i).returnTimes()[3]);
                endcal.set(Calendar.SECOND, 0);

                Intent intent2 = new Intent(this, SilenceHandler.class);
                intent2.putExtra("alarm_message", "End!");  
                intent2.putExtra("vibratemode", tempmainfrag.mainObjectList.returnSchedule(i).returnVibrate());
                intent2.setData((Uri.parse(String.valueOf(alarmid))));
                PendingIntent pendintent2 = PendingIntent.getBroadcast(this, alarmid, intent2, PendingIntent.FLAG_UPDATE_CURRENT);
                tempmainfrag.mainObjectList.returnSchedule(i).addEndPendIntent(alarmid);

                AlarmManager alarmman2 = (AlarmManager)getSystemService(ALARM_SERVICE);
                alarmman2.setRepeating(AlarmManager.RTC_WAKEUP, endcal.getTimeInMillis(), AlarmManager.INTERVAL_DAY * 7, pendintent2);
                //120000 means every 2 mins  
            }
        }

    } 
```

而且我不确定它是否相关，但这是删除警报的代码，尽管据我所知这部分似乎工作正常：

```
public void deleteAlarm(int i)
{
    AlarmManager alarmman = (AlarmManager)getSystemService(ALARM_SERVICE);

    Log.i("mydebug","Deleting alarm: The pending intent list null/not null is: " + tempmainfrag.mainObjectList.returnSchedule(i).startAlarmList);//.pendintentlist.size());

    //delete start alarms
    if (tempmainfrag.mainObjectList.returnSchedule(i).startAlarmList != null)   
    {
        Log.i("mydebug","Cancelling start alarm...");
        //cancels all alarms
        for (int j = 0; j < tempmainfrag.mainObjectList.returnSchedule(i).startAlarmList.size(); j++)
        {
            Intent intent = new Intent(this, SilenceHandler.class);
            intent.putExtra("starttime",tempmainfrag.mainObjectList.returnSchedule(i));
            intent.putExtra("alarm_message", "Start!");
            intent.setData((Uri.parse(String.valueOf(tempmainfrag.mainObjectList.returnSchedule(i).startAlarmList.get(j)))));
            Log.i("mydebug","Alarm number " + (j+1) + " being cancelled.");

            PendingIntent pendintent = PendingIntent.getBroadcast(this, tempmainfrag.mainObjectList.returnSchedule(i).startAlarmList.get(j), intent, PendingIntent.FLAG_UPDATE_CURRENT);
            alarmman.cancel(pendintent);
        }
    }

    //delete end alarms
    if (tempmainfrag.mainObjectList.returnSchedule(i).endAlarmList != null) 
    {
        Log.i("mydebug","Cancelling end alarm...");
        //cancels all alarms
        for (int j = 0; j < tempmainfrag.mainObjectList.returnSchedule(i).endAlarmList.size(); j++)
        {
            Intent intent = new Intent(this, SilenceHandler.class);
            intent.putExtra("endtime",tempmainfrag.mainObjectList.returnSchedule(i));
            intent.putExtra("alarm_message", "End!");   
            intent.setData((Uri.parse(String.valueOf(tempmainfrag.mainObjectList.returnSchedule(i).endAlarmList.get(j)))));
            Log.i("mydebug","Alarm number " + (j+1) + " being cancelled.");

            PendingIntent pendintent = PendingIntent.getBroadcast(this, tempmainfrag.mainObjectList.returnSchedule(i).endAlarmList.get(j), intent, PendingIntent.FLAG_UPDATE_CURRENT);
            alarmman.cancel(pendintent);
        }
    }

    //deletes alarm intents from object
    tempmainfrag.mainObjectList.returnSchedule(i).deleteIntents();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:03:58.837

在进一步了解了 AlarmManager 系统后，我最终找到了解决办法。添加这些行可以纠正它：

```
Calendar checkdate = Calendar.getInstance();    //used so that alarm set to earlier in the week doesnt go off
if (startcal.before(checkdate)) //see if alarm is for earlier in week
    {
        startcal.add(Calendar.DATE, 7); //makes alarm trigger next time it becomes that day instead of immediately
    } 
```

# java - 在数组中获取受限组合

> ID：15560085
> 
> 赞同：3
> 
> 时间：2013-03-21T23:31:15.043
> 
> 标签：java, arrays

所以我目前正在创建一个变量的可能值域，在我的例子中是一个字符数组。因为我将使用的数据并不是非常小，即使它是，在每个字符槽中都可以接受 2 个值，一个 11 槽数组将有 2^11 个可能的值，这真的不是你想要的数组数量有。

正因为如此，我没有在之后使用约束来减少域，而是尝试基于约束生成域。

约束基本上说明了许多相同字符的块和块的顺序。它看起来像这样：

```
#,2,G,1 
```

可以说这是我的限制，数组的大小为 5，空数组看起来像这样

```
[_][_][_][_][_] 
```

我现在可以通过简单地将所有内容按照约束堆叠到开头来创建域的一个元素。

```
[#][#][G][_][_] 
```

但是，现在我需要生成所有其他可能的变体，它们是：

```
[#][#][_][G][_]
[#][#][_][_][G]
[_][#][#][G][_]
[_][#][#][_][G]
[_][_][#][#][G] 
```

像这样，我成功地将域的元素从 2^5 减少到 6。

那么问题是：有没有人能够为此提供一种方法？不一定是代码，只是一个基本的想法可能就足够了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:46:25.890

仍然不太确定你在问什么。目前，您似乎遇到了一个[约束满足问题](http://en.wikipedia.org/wiki/Constraint_satisfaction_problem)。或者也许是语法。在任何一种情况下，解决方案都是使用递归算法来枚举每个级别（数组索引）的可能性。

# android - 从广播接收器通知我的主要活动电源状态的变化

> ID：15560086
> 
> 赞同：0
> 
> 时间：2013-03-21T23:31:16.413
> 
> 标签：android, android-activity, broadcastreceiver

我正在构建一个 Android 信息亭应用程序，它将为一个小型客户端工作（播放视频）几乎 24/7 运行。但是我发现在某些时候电源可能会关闭，这意味着平板电脑需要在断电时停止运行应用程序（或至少移除屏幕保持活动状态）并在断电时重新设置所有设置电源重新打开，因此它不会完全杀死设备。我以前做过一些 Android 工作，但没有像这样。鉴于我只有一个活动，并且当我收到状态时活动将运行在我的广播接收器中的 onReceive 调用（我已经在我的清单文件中注册）什么是最佳实践/最惯用的方式对我来说将更改的状态传达给我的活动？

我见过的当前方法包括在活动中公开对活动的静态引用，并使用它与活动进行通信（根据应用程序的生命周期将其适当地设置为 self 或 null ）。这是最有效的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:39:05.507

最简单的方法是创建`Observer/Observable`模式，您在其中`BroadcastReceiver`实现一个`Observable`，并通知所有相关方有关更改。对电源更改感兴趣的活动（或其他类）可以注册为 an并在发生某些事情时`Observer`通过它们的函数调用。`update()`

只是不要忘记取消注册`Observer`，`onPause()`这样您的死活动就不会被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T17:42:18.813

@Hoan Nguyen 是对的。您的活动可以注册电池事件。这是一个例子：

```
public class Test extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final TextView text = new TextView(this);
        setContentView(text);
        registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                int status = intent.getIntExtra(BatteryManager.EXTRA_STATUS, -1);
                boolean charging = status == BatteryManager.BATTERY_STATUS_CHARGING || status == BatteryManager.BATTERY_STATUS_FULL;
                text.setText(charging ? "Charging" : "On battery");
            }
        }, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
    }
} 
```

@lenik 可能也是正确的，您应该在 onResume()/onPause() 而不是 onCreate() 中注册/取消注册，但以上内容应该可以帮助您入门。

# jira - 如何获取用户 JIRA REST API 在问题上花费的总小时数

> ID：15560088
> 
> 赞同：4
> 
> 时间：2013-03-21T23:31:19.433
> 
> 标签：jira, jira-rest-java-api

我对 JIRA 的 REST API 很陌生，我想了解用户在某个问题上花费的总时间。我尝试使用`https://jira.domain.com/rest/api/2/search?jql=assignee="my.name"`，并`timespent`在返回的 JSON 响应中获得了该字段，但它显示了一个没有任何意义的值。在这种情况下，该`timespent`字段显示为 62760，当我在该问题上花费的实际时间少于该时间时，搜索将返回在该问题上花费的总时间，而不仅仅是我。我怎样才能让它只显示我的时间？

编辑：有没有办法用 JQL 做到这一点，而不必为每个问题进行另一个 API 调用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-26T10:08:52.383

我知道我迟到了一年:-)。发布以帮助可能面临同样问题的其他人。

REST /rest/api/2/search?jql=assignee="my.name" 将返回其他用户的工作日志，并且可以省略“my.name”用户的工作日志。在 JIRA 中，您不需要成为受让人来报告问题的时间。

看起来获得“用户 JIRA REST API 问题上花费的总小时数”的最简单方法是使用：

```
/rest/api/2/issue/ issue.key /worklog 
```

然后迭代工作日志，通过 worklog.author.name 过滤它们。api/2/issue/ issue.key /worklog 的好处是它返回所有工作日志而不使用 startAt 和 maxResults 分页。至少对于我的本地开发 JIRA 来说是这样，我为单个问题生成了大约 1200 条工作日志记录。但是您需要检查您的 JIRA 安装，因为 sartAt 和 maxResults 在该方法的文档中：[https ://docs.atlassian.com/jira/REST/latest/#d2e1411](https://docs.atlassian.com/jira/REST/latest/#d2e1411)

获取一组用户的工作日志和我使用的问题

```
/rest/api/2/search?jql=updated > 2014-01-20 and project in (MWC,MWCS,RND) and timespent > 0&fields=summary,worklog&maxResults=1000" 
```

其中 2014-01-20 是时间段中的第一个日期，项目和时间条件会优化过滤。此方法利用分页，如果它大于 JIRA 端配置的 maxResults，它将忽略您传递的 maxResults。与问题一起返回的工作日志也以每页 20 条记录进行分页。因此，为了获得报告，我进行 search?jql= 调用，迭代返回问题的工作日志，当 issue.fields.worklog.maxResults < issue.fields.worklog.total 我调用 issue/issue.key/worklog 以获取问题的所有工作日志. 当然，您需要根据 worklog.author.name 和 worklog.started 字段进行过滤。

# c# - 自定义 TabItem 数据模板

> ID：15560090
> 
> 赞同：4
> 
> 时间：2013-03-21T23:31:33.417
> 
> 标签：c#, wpf, datatemplate, tabcontrol

如何在 WPF 中为 TabItems 制作 DataTemplate 并在每个 TabItem 中自定义其内容？

我需要这个：

```
<TabControl>
            <TabControl.ContentTemplate>
                <DataTemplate>
                    <Label Content="Name" Name="label1" />
                    <TextBox Name="name" />
                    ...
                </DataTemplate>
            </TabControl.ContentTemplate>
            <TabItem Header="Add" Name="tabItem1">
                <Grid Height="213">
                    <Button Content="Add" Name="button1" />
                </Grid>
            </TabItem>
            <TabItem Header="Edit" Name="tabItem2">
                <Grid>
                    <Button Content="Edit" Name="button2" />
                </Grid>
            </TabItem>
</TabControl> 
```

但未显示按钮（仅显示 DataTemplate 的内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:48:22.513

将重复出现的模板作为资源放在 TabControl 中，然后`ContentTemplate`使用以下选项从特定的 Tab 引用它`ContentPresenter`：

```
<TabControl>
    <TabControl.Resources>
        <DataTemplate x:Key="TabTemplate">
            <Label Content="Name" Name="label1" />                
        </DataTemplate>
    </TabControl.Resources>
    <TabItem Header="Add" Name="tabItem1">
        <TabItem.ContentTemplate>
            <DataTemplate>
                <Grid Height="213">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Button Content="Add" Name="button1" />
                    <ContentPresenter Grid.Row="1" ContentTemplate="{StaticResource TabTemplate}"/>
                </Grid>
            </DataTemplate>
        </TabItem.ContentTemplate>
    </TabItem>
    <TabItem Header="Edit" Name="tabItem2">
        <TabItem.ContentTemplate>
            <DataTemplate>
                <Grid Height="213">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Button Content="Edit" Name="button2" />
                    <ContentPresenter Grid.Row="1" ContentTemplate="{StaticResource TabTemplate}"/>
                </Grid>
            </DataTemplate>
        </TabItem.ContentTemplate>
    </TabItem> 
```

除了 之外`ContentPresenter`，每个选项卡中的所有内容都可能不同...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T11:33:06.173

您也可以尝试使用[TabControl ContentTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.contenttemplateselector.aspx)。

在这里，您可以为选项卡项定义两个或更多不同的模板（用户控件）。[您还可以使用DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)在运行时决定这一点

这是一个包含相同演示的博客：[mvvm-using-contenttemplateselector-in-tab-control-view/](http://jacobaloysious.wordpress.com/2013/08/19/mvvm-using-contenttemplateselector-in-tab-control-view/)

最终的 TabControl 看起来像这样：

```
<UserControl x:Class="TabControlItemTemplateDemo.View.MyTabControl"
         xmlns:ViewModel="clr-namespace:TabControlItemTemplateDemo" 
         xmlns:View1="clr-namespace:TabControlItemTemplateDemo.View" mc:Ignorable="d" >

<UserControl.Resources>
    <DataTemplate x:Key="MyTabHeaderTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Column="0" Text="{Binding Header}" Width="80" Height="25" FontWeight="Bold"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="CountryContentTemplate">
        <View1:CountryView DataContext="{Binding CurrentMyTabContentViewModel}"/>
    </DataTemplate>

    <DataTemplate x:Key="ContinentsContentTemplate">
        <View1:ContinentsView DataContext="{Binding CurrentMyTabContentViewModel}"/>
    </DataTemplate>

    <ViewModel:MyViewSelector x:Key="selector" 
                                       CountryTemplate="{StaticResource CountryContentTemplate}"
                                       ContintentsTemplate="{StaticResource ContinentsContentTemplate}" />
</UserControl.Resources>
<DockPanel>
    <TabControl ItemsSource="{Binding Tabs}" TabStripPlacement="Left" 
                BorderThickness="0" Background="White"  
                ItemTemplate="{StaticResource MyTabHeaderTemplate}"
                ContentTemplateSelector="{StaticResource selector}">
    </TabControl>
</DockPanel> 
```

# menu - 在 CMS 生成的菜单中区分父母 li

> ID：15560094
> 
> 赞同：1
> 
> 时间：2013-03-21T23:31:43.887
> 
> 标签：menu, prestashop

我有自动生成的 ul li CMS 菜单（prestashop），我需要区分哪些 li 项目有另一个的后代（子级别），哪些没有，并区分它们的 css，让人们知道哪些项目包含另一个项目。

我想通过 jQuery 来做，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-30T16:03:13.400

在 jQuery 中，你可以这样做：

```
jQuery('.sf-menu li').has('ul').addClass('has-submenu'); 
```

这会将类 has-submenu 添加到所有带有 ul 的 li 元素中。[您可以在下面的小提琴http://jsfiddle.net/59GFr/1/](http://jsfiddle.net/59GFr/1/)中看到它是如何工作的

# dart - Dart 错误：未加载类型“选项”

> ID：15560095
> 
> 赞同：3
> 
> 时间：2013-03-21T23:31:46.060
> 
> 标签：dart

我正在尝试开始使用 Dart，但无法弄清楚如何读取 shell 参数。据我从其他问题中可以看出，这应该有效：

```
#!/usr/bin/env /path/to/dart/dart-sdk/bin/dart

main()
{
  print(new Options().arguments);
} 
```

但我收到错误“未加载类型'选项'”：

```
Unhandled exception:
'file:///path/to/script.dart': Error: line 5 pos 13: type 'Options' is not loaded
  print(new Options().arguments);
            ^
malformed type used.
#0      main (file:///path/to/script.dart:5:13) 
```

我究竟做错了什么？

我在 Mac OS X 10.8 上使用当前稳定版本的 dart（今天下载）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T23:56:46.007

选项已移至 dart:io。添加以下内容：

```
#!/usr/bin/env /path/to/dart/dart-sdk/bin/dart

import 'dart:io';

main()
{
  print(new Options().arguments);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-11T12:40:28.237

由于图书馆最近发生了变化（`Options`不再上课），正确答案是：

```
import 'dart:io';

main() {
  print(Platform.executableArguments);
} 
```

大多数选项功能已移至`dart:io`.

# assembly - x86 新手，认为教授犯了一个错误

> ID：15560097
> 
> 赞同：3
> 
> 时间：2013-03-21T23:31:51.400
> 
> 标签：assembly, x86

很抱歉提出这样一个愚蠢的基本问题，但这是测验的前一天晚上，我想我收到了一些关于 x86 的错误信息。我会很感激一些确认。

我的教授要求我们“将一个单词间接地从记忆中移到寄存器中”。为此，她给出了以下命令：

```
mov bx, 01

mov [bx], ax 
```

现在，对我来说，这看起来不是将单词从内存移动到寄存器，而是将单词从寄存器 ( `ax`) 移动到内存 ( `[bx]`)。这是正确的还是我误解了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:33:51.817

你是对的。第二`mov`条指令应该是`mov ax, [bx]`，它将存储在内存地址中的字移动`bx`到`ax`寄存器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T23:38:49.103

您需要知道您使用的是哪种语法，其中有两种：

美国电话电报公司是：

```
mov source, destination 
```

而英特尔则相反。

您的代码看起来像 Intel 语法，在这种情况下操作数似乎被翻转了。

# google-app-engine - 重定向后， 无法获得价值

> ID：15560098
> 
> 赞同：0
> 
> 时间：2013-03-21T23:32:11.077
> 
> 标签：google-app-engine, richfaces

当我部署到 GAE 时，这种情况很糟糕。它在我的本地工作正常。不知道是不是因为 GAE 只在客户端存储会话。

好吧，在使用 Google 身份验证后，它会重定向回我的 xhtml 页面。从那里它将调用一个 backbean 并根据条件重定向到其他页面。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j">

<h:head>
    <script>
        function myfunc() {
            var buttonvar = document.getElementById("googleLoginForm:loginButton");
            buttonvar.click();
        }
    </script>
</h:head>
<body onload="myfunc()">
    Google account login success... please wait while processing your CEA account....
    <h:form rendered="true" id="googleLoginForm">
        <h:commandButton value="submit" id="loginButton" type="submit" immediate="true" style="visibility:hidden;"
            action="#{guestSupportBean.authenticationGoogle}">
            <f:param name="resultComponentId" value="googleLoginLink" />    
        </h:commandButton>
    </h:form>
</body>
</html> 
```

如果返回值是 REQUEST_USER_PROFILES_SELECTION，那么它在 faces-config 中工作正常，对于该 xhtml (googleIdLogin)，它将重定向到 userProfilesSelection.xhtml。并且 #{userProfileSelectionBean.userProfiles} 将在后台 bean 操作 (#{guestSupportBean.authenticationGoogle}) 期间初始化。

```
<navigation-rule>
    <display-name>googleIdLogin</display-name>
    <from-view-id>/public/idm/googleIdLogin.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>REQUEST_USER_PROFILES_SELECTION</from-outcome>
        <to-view-id>/public/idm/userProfilesSelection.xhtml</to-view-id>
        <redirect />
    </navigation-case>
<navigation-rule> 
```

userProfileSelection.xhtml 将在下拉选择中显示用户配置文件列表，这在我的本地工作正常，但在部署到 GAE 时却不行。

```
<rich:select id="userProfile" 
    value="#{userProfileSelectionBean.userProfileUid}"
    defaultLabel="#{msg.clickToSelect} #{msg.title}">
    <f:selectItems value="#{userProfileSelectionBean.userProfiles}" />
</rich:select>

<h:commandButton value="#{msg.selectUserProfile}" type="submit" 
    action="#{userProfileSelectionBean.selectUserProfile}">
</h:commandButton> 
```

我尝试打印出 bean 值，它是 null 好像我在重定向后收到了另一个 bean。

好吧...如果我使用 forward 间接取出。现在遗嘱有价值。问题是 commonButton 没有触发回调 bean 操作的调用 (#{userProfileSelectionBean.selectUserProfile}"。

总结如下： - 如果使用重定向，则不会获取值 - 如果不使用重定向，则填充值但不触发 bean bean 操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:37:53.723

找到解决方法...

在初始化 userProfileSelectionBean.userProfiles 之后，我需要在 guestSupportBean.authenticationGoogle 方法中手动设置会话。奇怪但它工作。

FacesContext.getCurrentInstance().getSessionMap().put("something", "some value");

# webstorm - 如何在现有的 Web Storm 项目上编辑我的远程 FTP 服务器？

> ID：15560100
> 
> 赞同：2
> 
> 时间：2013-03-21T23:32:20.220
> 
> 标签：webstorm

我在 Web Storm 中创建了一个项目，并在配置了远程 FTP 服务器的情况下运行。

我想添加另一个 FTP 服务器，一个用于暂存\测试，一个用于生产，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:05:31.270

`File`| `Settings`| [部署](http://www.jetbrains.com/webstorm/webhelp/deployment.html)。

# php - 将所有发布的值保存在二维数组中的 Codeigniter 方法

> ID：15560111
> 
> 赞同：0
> 
> 时间：2013-03-21T23:33:52.893
> 
> 标签：php, mysql, codeigniter, multidimensional-array

我有一个多表单，我需要向 4 个用户、新闻、提要、纬度（可能是 6 个）表插入几个值，这些表由某个 ID 相关，这是因为一个**事件** 需要所有这些信息。

我的表格：

```
<form method="post" action="<?php echo base_url();?>controller/save" name="event"/>
  <label>User Name</label>

   <!--#####FOR TABLE USER#####-->
  <input type="text" name="name">   
  <input type="text" name="name">

   <!--#####FOR TABLE NEWS#####-->
  <input type="text" name="title">   
  <input type="submit" value="body"/>

  <!--#######################
       OTHER TABLE FIELDS ...
   #######################
   -->    

   <input type="submit" value="save"/>

</form> 
```

现在我想将二维数组传递给事件模型，然后根据值插入相应的表

控制器事件.php

```
class Event extends CI_Controller {
    function __construct()
    {
        parent::__construct();
        $this->load->database();
        $this->load->helper('url');   
        $this->load->model('event_model');     
    }

    public function save()
    {

    /** Is it possible to fill this bidimensional array with for loops???? **/

     $arr_data = array(     
          array("person", $this->input->post("name")    , $this->input->post("address")),
          array("news"  , $this->input->post("title")   , $this->input->post("body"  )),
          array("feed"  , $this->input->post("id_feed") , $this->input->post("main"  )),
          array("lat"   , $this->input->post("lat1"     , $this->input->post("lat"   ))
       ); 

        $this->event_model->insert_tables($arr_data); 

    }

} 
```

现在如何接收模型中的数组并插入如何声明event_model？

```
class Event_model extends CI_Model {

    function Event_model ()
    {
        parent::__construct();
    }
     function insert_tables($arr_data) { 

        if( "person" )
          $this->db->insert(person_tb ,

     }

} 
```

是否有必要使用内爆或其他东西，有没有更好的方法来进行多次插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:18:56.373

听起来真的很复杂......为什么不为每个实体建立一个模型并将正确的字段传递给正确的模型？或者创建一个库来插入/更新您的每个模型？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:12:05.713

```
I would do something like this...

$person = array('name' => $this->input->post("name"), 'address' => $this->input->post("address"));
$news = array('title' => $this->input->post("title"), 'body' => $this->input->post("body"));
$feed = array('id' => $this->input->post("id_feed"), 'main' => $this->input->post("main"));
$lat = array('lat1' => $this->input->post("lat1"), 'lat' => $this->input->post("lat"));

if($this->person_model->insert($person)) {
    $person_id = $this->db->insert_id();
} else {
    // handle the problem of not having an id for this entity...
}

if($this->news_model->insert($news)) {
    $news_id = $this->db->insert_id();
} else {
    // handle the problem of not having an id for this entity...
}

if ($this->feed_model->insert($feed)) {
    $feed_id = $this->db->insert_id();
} else {
    // handle the problem of not having an id for this entity...
}

if($this->lat_model->insert($lat)) {
    $lat_id = $this->db->insert_id();
} else {
    // handle the problem of not having an id for this entity...
} 
```

# php - SQL选择列邮政编码中的数据与数组中的数据匹配的任何行？

> ID：15560112
> 
> 赞同：1
> 
> 时间：2013-03-21T23:33:59.237
> 
> 标签：php, sql, database, geolocation

好的，所以问题是我正在网站 702web.com/tutors 上进行自定义地理位置

使用内页进行搜索，因为主页搜索未完成。

我将其设置为用户不输入邮政编码的位置和主题是任何它将显示所有导师，也将其设置为没有输入邮政编码并且他们选择一个主题然后将显示所有教授该主题的导师，我也将它放到输入邮政编码的位置，并且用户选择任何然后显示该邮政编码中的任何导师，第四个也是最后一个是如果用户输入邮政编码和主题，那么所有教授该主题和该邮政编码的导师都会显示。

这样做很容易，但是为了使它第三次和第四次稍微复杂一些，我让它选择用户输入的邮政编码半径 40 英里内的所有邮政编码（使用包含所有邮政编码和纬度和经度的表格）。正在查找该半径内的所有邮政编码。

**我的问题是** 如何使用数组查询该数据库？由于该半径内的所有邮政编码都放在一个数组中，我怎么知道使用 SELECT 语句来“SELECT * FROM wp_testimonials WHERE postcode = '”.$THIS IS MY ARRAY??"' AND find_in_set('".$_REQUEST ['主题']."', 主题)"

**结果页面代码**

```
<?php
        if(isset($_REQUEST['send']) OR !empty($_REQUEST['zipcode'])) {
            if(!preg_match('/^[0-9]{5}$/', $_REQUEST['zipcode'])) {

                    include('search_page.php');

            }
            else {

        //connect to db server; select database
                $link = mysql_connect('t0tors102938.db.7131821.hostedresource.com', 't0tors102938', 'aL8#Jfo89!') or die('Cannot connect to database server');
                mysql_select_db('t0tors102938') or die('Cannot select database');

                //query for coordinates of provided ZIP Code
                if(!$rs = mysql_query("SELECT * FROM wp_us_zipcodes WHERE zip_code = '$_REQUEST[zipcode]'")) {
                    echo "<p><strong>There was a database error attempting to retrieve your ZIP Code.</strong> Please try again.</p>\n";
                }
                else {
                    if(mysql_num_rows($rs) == 0) {
                        echo "<p><strong>No database match for provided ZIP Code.</strong> Please enter a new ZIP Code.</p>\n"; 
                    }
                    else {
                        //if found, set variables
                        $row = mysql_fetch_array($rs);
                        $lat1 = $row['latitude'];
                        $lon1 = $row['longitude'];
                        $d = 40;
                        $r = 3959;

                        //compute max and min latitudes / longitudes for search square
                        $latN = rad2deg(asin(sin(deg2rad($lat1)) * cos($d / $r) + cos(deg2rad($lat1)) * sin($d / $r) * cos(deg2rad(0))));
                        $latS = rad2deg(asin(sin(deg2rad($lat1)) * cos($d / $r) + cos(deg2rad($lat1)) * sin($d / $r) * cos(deg2rad(180))));
                        $lonE = rad2deg(deg2rad($lon1) + atan2(sin(deg2rad(90)) * sin($d / $r) * cos(deg2rad($lat1)), cos($d / $r) - sin(deg2rad($lat1)) * sin(deg2rad($latN))));
                        $lonW = rad2deg(deg2rad($lon1) + atan2(sin(deg2rad(270)) * sin($d / $r) * cos(deg2rad($lat1)), cos($d / $r) - sin(deg2rad($lat1)) * sin(deg2rad($latN))));

                        //find all coordinates within the search square's area
                        //exclude the starting point and any empty city values
                        $query = "SELECT * FROM wp_us_zipcodes WHERE (latitude <= $latN AND latitude >= $latS AND longitude <= $lonE AND longitude >= $lonW) AND city != '' ORDER BY state, city, latitude, longitude";
                        if(!$rs = mysql_query($query)) {
                            echo "<p><strong>There was an error selecting nearby ZIP Codes from the database.</strong></p>\n";
                        }
                        elseif(mysql_num_rows($rs) == 0) {
                            echo "<p><strong>No nearby ZIP Codes located within the distance specified.</strong> Please try a different distance.</p>\n";                               
                        }
                        else {
                            //output all matches to screen
                            while($row = mysql_fetch_array($rs)) {
                                foreach($row['zip_code'] as $rows) {
                                    $queryzipcodes[] = $rows;

                                }
                            }
                            $sqlzip = implode(',',$queryzipcodes);

                            echo "$queryzipcodes";
                            //echo 'ok';

                                if($_REQUEST['subject']!='' && $_REQUEST['zipcode']!='')
            {
            $sql="SELECT * FROM wp_testimonials WHERE postcode IN ($sqlzip) AND find_in_set( '".$_REQUEST['subject']."', subject )";
            }elseif($_REQUEST['subject']!='') {
            $sql="SELECT * FROM wp_testimonials WHERE find_in_set( '".$_REQUEST['subject']."', subject )";
            }
            elseif($_REQUEST['zipcode']!='') {
            $sql="SELECT * FROM wp_testimonials WHERE postcode = '".$_REQUEST['zipcode']."'";
            }
            else
            {
            $sql="SELECT * FROM wp_testimonials";
            }
        //echo $sql;

        $tutors = $wpdb->get_results($sql);

                $count = 0;

                print('<br>');
                foreach ($tutors as $tutor)
                {
                    $odd = $count%2;
                   if ($odd == 1)
                   {
                        $bgcolor='#fafafa';
                   }elseif ($odd == 0)
                   {
                        $bgcolor='#f0f0f0';
                   }
                     $sql3="SELECT sfimgurl FROM wp_testimonials WHERE testid='".$tutor->testid."'";
                     $res3=mysql_query($sql3);
                     $data3=mysql_fetch_assoc($res3);

                     $blogurl = get_bloginfo('wpurl');
                     $imgsrc =  '/wp-content/uploads/';
                     $tutorimg =  $data3['sfimgurl'];

                     print('<table width="100%" style="border-radius: 10px;" bgcolor="'.$bgcolor.'">');

                     print('<tr height="145px"><td width="110px" style="padding: 10px 5px 10px 10px; vertical-align: top; "><div style="height:145px; overflow:hidden; float: left; padding-right: 10px; border: dotted; border-width: 0 1px 0 0"><img src="'.$blogurl.'' .$imgsrc.'' .$tutorimg.'" width="100" height="145" />');

                     print('</div></td>');
                     print('<td valign="top" width="150px" style="float:left; padding-left: 5px; padding-top:5px;"><div style="float: left; font-size:12px;"><strong>TUTOR:<br><a href="?page_id=175&tid=' .$tutor->testid. '">'.$tutor->clientname.'</a><br></strong><br>');

                $subj=$tutor->subject;
                $arrr_subject=explode(',', $subj);
                for($i=0;$i<3;$i++) {
                //$i<count($arrr_subject)
                    $sql2="select * from wp_tutorcat WHERE subid='".$arrr_subject[$i]."'";
                    $res2=mysql_query($sql2);
                    $data2=mysql_fetch_assoc($res2);
                    $subject2 = (strlen($data2['subject']) > 20) ? substr($data2['subject'],0,17).'...' : $data2['subject'];
                    echo $subject2.'<br>';

                }

                     //print('<br> '.$tutor->text_full.'<br/><br/>');
                     print('<br><strong>Zip Code: '.$tutor->postcode.'</strong></div></td>');

                 print('<td width="350px" style="padding-left:10px; padding-top: 5px; vertical-align: top; border: dotted; border-width: 0 0 0 1px;"><div style="float: left; font-size: 12px; position: relative; padding-right: 5px; ">');
                $idnum=$tutor->testid;
//$bio=$data['text_full'];
$sql3="SELECT text_full FROM wp_testimonials WHERE testid='".$idnum."'";
$res3=mysql_query($sql3);
$data3=mysql_fetch_assoc($res3);
$ses = "'s";
$bio = (strlen($data3['text_full']) > 103) ? substr($data3['text_full'],0,100).'...' : $data3['text_full'];
echo '<strong>BIO:</strong>

<br>'.$bio.'<br></div>';

                print('<div align="center"><p style="text-align: center;"><span class="bk-button-wrapper"><a href="?page_id=175&tid=' .$tutor->testid. '" target="_self" class="bk-button red center rounded small" style="margin-top: 15px;">View '.$tutor->clientname.''. $ses . ' Profile</a></span></p></div>');

                print('</td></tr></table>');

                     $count++;

                            }

                        }
                    }
                }
            }
        }

               ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:13:25.460

如果您可以在 SELECT 查询中使用数组，我深表歉意，但我不相信您可以使用数组直接查询数据库，但您可以遍历邮政编码数组并使用每个邮政编码查询数据库：

```
$zips = array( '41240', '41256', '41202' );
$result = array();

foreach( $zips as $key=>$value ) {

     // Select query with $value
     // Save result to $result[ $key ]

}
echo '<pre>' . print_r( $result, 1 ) . '</pre>'; 
```

→ 那是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:21:43.390

您可以执行以下操作将数组传递给 SQL 查询：

```
<?php
  $zipcodes  =  $_REQUEST["zipcode"];
  if( valid_zipcodes($zipcodes) ) // validate the data before query
  {
     $zipcodes  =  str_replace(
        array(']','['), 
        array(')','('), 
        json_encode($zipcodes) );
     mysql_query("SELECT * FROM wp_testimonials WHERE postcode IN $zipcodes;");
     // any other job
  }
?> 
```

您的查询将是这样的：

```
SELECT * 
FROM wp_testimonials 
WHERE postcode IN ('123456', '987654'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:59:34.727

执行此操作的最佳方法是使用与您的 2 个表的 SQL 连接 下表用于在使用 PDO 的 SQL 查询中使用[**Haversine公式查找给定半径内的导师**](http://rosettacode.org/wiki/Haversine_formula)

![表](../Images/9157db8cf80ff06359a5d12dd88a24ac.png)

```
// Prepare statement
    $stmt = $dbh->prepare("SELECT `tutors`.`name`, `tutors`.`zip`,`uszips`.`city`,`uszips`.`latitude`,`uszips`.`longitude`,( 3959 * acos( cos( radians(?) ) * cos( radians( `uszips`.`latitude` ) ) * cos( radians( `uszips`.`longitude` ) - radians(?) ) + sin( radians(?) ) * sin( radians( `uszips`.`latitude`) ) ) )  AS distance  FROM `uszips`, `tutors`  WHERE (`uszips`.`zip` =`tutors`.`zip`) HAVING distance < ?  ORDER BY distance ");
// Assign parameters
$stmt->bindParam(1,$center_lat);
$stmt->bindParam(2,$center_lng);
$stmt->bindParam(3,$center_lat);
$stmt->bindParam(4,$radius);
//Execute query
$stmt->setFetchMode(PDO::FETCH_ASSOC);
$stmt->execute();
// Iterate through the rows, adding XML nodes for each
while($row = $stmt->fetch()) {
    echo $row['city'].",".$row['zip'].",".$row['name'].",".$row['distance'].",".$row['latitude'].",".$row['longitude'];
} 
```

Where`$center_lat`和`$center_lng`是用户的坐标，并且`$radius`是以英里为单位的距离。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T23:46:18.677

好吧，伙计们，我想通了。

为了弄清楚这一点，我总共花了大约 12 个小时的工作时间。

**显示结果的代码和主页的表单操作**

```
<?php
    /*
        Template Name: Tutor Locator Template
    */
?>

<?php get_header(); ?>

    <div id="primary">
 <div class="small-search-tutor">

<div class="small-search-tutor-box">

 <?php
 include('post_search.php');
 ?>

</div>
</div>

        <div id="content" role="main">

            <?php while ( have_posts() ) : the_post(); ?>

                <?php get_template_part( 'content', 'page' ); ?>

<br />

<?php

// Create page variables
$r = 50;
$z = NULL;
$stores = NULL;
$Errors = NULL;

// Establish DB connection
$dbc = mysql_connect ('t0tors102938.db.7131821.hostedresource.com', 't0tors102938', 'aL8#Jfo89!');
mysql_select_db ('t0tors102938', $dbc);

// Declare page functions
function Dist ($lat_A, $long_A, $lat_B, $long_B) {

  $distance = sin(deg2rad($lat_A))
  * sin(deg2rad($lat_B))
  + cos(deg2rad($lat_A))
  * cos(deg2rad($lat_B))
  * cos(deg2rad($long_A - $long_B));

$distance = (rad2deg(acos($distance))) * 69.09;
return $distance;

}

### Handle form if submitted
if (isset ($_REQUEST['send']) OR !empty($_REQUEST['zipcode'])) {

// Validate Zip code field
 if (!empty ($_REQUEST['zipcode']) && is_numeric ($_REQUEST['zipcode'])) {

$z = (int)$_REQUEST['zipcode'];

// Verify zip code exists
 $query = "SELECT lat, lon FROM zip_codes WHERE zip = '$z'";
 $result = mysql_query ($query);

 if (mysql_num_rows ($result) == 1) {
  $zip = mysql_fetch_assoc ($result);
 } else {
  $Errors = '<p>The zip code you entered was not found!</p>';
}

 }elseif (empty ($_REQUEST['zipcode'])){
$query = "SELECT lat, lon FROM zip_codes";
  $result = mysql_query ($query);

 if (mysql_num_rows ($result) == 1) {
  $zip = mysql_fetch_assoc ($result);
 } else {
  $Errors = '<p>The zip code you entered was not found!</p>';
}

}

// Proceed if no errors were found

// Retrieve coordinates of the stores
$tutors = array();
$r = 50;
if(empty($_REQUEST['zipcode']) && $_REQUEST['subject']!='Any'){

$query = "SELECT * FROM wp_testimonials WHERE find_in_set( '".$_REQUEST['subject']."', subject )";  
}

 elseif($_REQUEST['subject']!='Any'){
$query = "SELECT testid, clientname, phone, email, subject, text_full, hourly_rate, postcode, lat, lon
FROM wp_testimonials
INNER JOIN zip_codes
ON wp_testimonials.postcode = zip_codes.zip
AND find_in_set( '".$_REQUEST['subject']."', subject )";
}

 elseif(empty($_REQUEST['zipcode']) && $_REQUEST['subject']='Any'){
$query = "SELECT * FROM wp_testimonials";   
}

 elseif(!empty($_REQUEST['zipcode']) && $_REQUEST['subject']='Any'){
$query = "SELECT testid, clientname, phone, email, subject, text_full, hourly_rate, postcode, lat, lon
FROM wp_testimonials
INNER JOIN zip_codes
ON wp_testimonials.postcode = zip_codes.zip";   
}

$result = mysql_query ($query);

// Go through and check all stores
while ($row = mysql_fetch_assoc ($result)) {

  // Separate closest stores
  $distance = Dist ($row['lat'], $row['lon'], $zip['lat'], $zip['lon']);

  // Check if store is in radius
  if ($distance <= $r) {

    $tutors[] = array (
      'testid'      => $row['testid'],
      'clientname'      => $row['clientname'],
      'email'   => $row['email'],
      'subject'      => $row['subject'],
      'postcode'    => $row['postcode'],
      'text_full'     => $row['text_full'],
      'phone'     => $row['phone'],
      'hourly_rate'     => $row['hourly_rate']
     );

   }

  }

 } else {
  $Errors = ($Errors) ? $Errors : '<p>Errors were found please try again!</p>';
}

?>

<?php

if (isset ($tutors)) {

  if (!empty ($tutors)) {
$count = 0;
   //echo '<p><strong>' . count ($tutors) . ' results were found.</strong></p>';
    foreach ($tutors as $value) {
                $odd = $count%2;
                   if ($odd == 1)
                   {
                        $bgcolor='#fafafa';
                   }elseif ($odd == 0)
                   {
                        $bgcolor='#f0f0f0';
                   }    
    $sql3="SELECT sfimgurl FROM wp_testimonials WHERE testid='".$value['testid']."'";
                     $res3=mysql_query($sql3);
                     $data3=mysql_fetch_assoc($res3);

                     $blogurl = get_bloginfo('wpurl');
                     $imgsrc =  '/wp-content/uploads/';
                     $tutorimg =  $data3['sfimgurl'];

echo '<table width="100%" style="border-radius: 10px;" bgcolor="'.$bgcolor.'">';                 
echo '<tr height="145px"><td width="110px" style="padding: 10px 5px 10px 10px; vertical-align: top; "><div style="height:145px; overflow:hidden; float: left; padding-right: 10px; border: dotted; border-width: 0 1px 0 0"><img src="'.$blogurl.'' .$imgsrc.'' .$tutorimg.'" width="100" height="145" /><div></td>';       

echo '<td valign="top" width="150px" style="float:left; padding-left: 5px; padding-top:5px;"><div style="float: left; font-size:12px;"><strong>TUTOR:<br><a href="?page_id=175&tid=' .$value['testid']. '">'.$value['clientname'].'</a><br></strong><br>';

$arrr_subject = array();
                $arrr_subject=explode(',', $value['subject']);
                for($i=0;$i<3;$i++) {
                    $sql2="SELECT * FROM wp_tutorcat WHERE subid='".$arrr_subject[$i]."'";
                    $results2=mysql_query($sql2);
                    $row2=mysql_fetch_assoc($results2);
                    $subject2 = (strlen($row2['subject']) > 20) ? substr($row2['subject'],0,17).'...' : $row2['subject'];

                if($subject2!=''){
                echo $subject2.'<br>';  
                }else{
                //do nothing
                }
                }

    // echo '<br />Hourly Rate: ' . $value['hourly_rate'] . '<br />';
     echo '<br><strong>Zip Code: '.$value['postcode'].'</strong></div></td>';           
    echo '<td width="350px" style="padding-left:10px; padding-top: 5px; vertical-align: top; border: dotted; border-width: 0 0 0 1px;"><div style="float: left; font-size: 12px; position: relative; padding-right: 5px; ">';
  $ses = "'s";
  $bio = (strlen($value['text_full']) > 103) ? substr($value['text_full'],0,100).'...' : $value['text_full'];

  echo '<strong>BIO:</strong><br>'.$bio.'<br></div>';

  echo '<div align="center"><p style="text-align: center;"><span class="bk-button-wrapper"><a href="?page_id=175&tid=' .$value['testid']. '" target="_self" class="bk-button red center rounded small" style="margin-top: 15px;">View '.$value['clientname'].''. $ses . ' Profile</a></span></p></div>';

  echo '</td></tr></table>';
    $count++;
 }

  } else {
echo '<p><strong>No results found</strong></p>';
  }

}

?>

<?php endwhile; // end of the loop. ?>

        </div><!-- #content -->

    </div><!-- #primary -->

<?php get_sidebar(); ?> 
```

**所有内页上的搜索栏代码**

```
<?php 
//print_r($_REQUEST);
if($_REQUEST['send']=='send')
{
if($_REQUEST['subject']!='Any' AND empty($_REQUEST['zipcode'])){
header("Location:?page_id=275&subject=".$_REQUEST['subject']);  
}
elseif ($_REQUEST['subject']=='Any' AND !empty($_REQUEST['zipcode'])){
header("Location:?page_id=410&zipcode=".$_REQUEST['zipcode']."&subject=".$_REQUEST['subject']); 
}
elseif (empty($_REQUEST['zipcode'])){
header("Location:?page_id=275&subject=");
}
else{
header("Location:?page_id=410&zipcode=".$_REQUEST['zipcode']."&subject=".$_REQUEST['subject']);
}
}
?>

 <form method="post" action="">
 <div style="display:inline-block; width:60px; font-size:12px; vertical-align:top; padding-top:7px;">ZIP
 <input type="text" id="zip" name="zipcode" style="width:100px; margin-top:-10px;"/>
 </div>
 <div style="display:inline-block; width:180px; padding-left:50px; vertical-align:top; padding-top:7px; font-size:12px;">SUBJECT:
 <select name="subject" style="width:180px;">
    <option value="Any">Any</option>
    <?php
$sql="select * from wp_tutorcat";
$res=mysql_query($sql);
while($data=mysql_fetch_array($res))
{
   $rr="select * FROM wp_testimonials WHERE find_in_set( '".$data['subid']."', `subject` )";
   $ff=mysql_query($rr);
   $num=mysql_num_rows($ff);
   if($num>0)
   {
?>
<option value="<?=$data['subid']?>" <?php if(in_array($data['subid'],$arrr)) echo 'selected'?>><?=$data['subject']?></option>

<?php
}
}
?>

</select>

  </div>

  <div style="display:inline-block; vertical-align:top; padding-top:23px; ">
    <input type="hidden" value="send" name="send" />
    <input type="submit" name="search"  value="search"/>

  </div>

</form> 
```

**导师数据库表 SQL**

```
-- phpMyAdmin SQL Dump
-- version 2.11.11.3
-- http://www.phpmyadmin.net
--
-- Host: 0.0.0.0
-- Generation Time: Mar 22, 2013 at 02:58 PM
-- Server version: 5.0.96
-- PHP Version: 5.1.6

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

--
-- Database: `t0tor******`
--

-- --------------------------------------------------------

--
-- Table structure for table `wp_testimonials`
--

DROP TABLE IF EXISTS `wp_testimonials`;
CREATE TABLE IF NOT EXISTS `wp_testimonials` (
  `testid` int(15) NOT NULL auto_increment,
  `clientname` varchar(100) NOT NULL,
  `phone` varchar(20) default NULL,
  `email` varchar(100) NOT NULL,
  `subject` varchar(999) NOT NULL,
  `text_full` varchar(999) NOT NULL,
  `hourly_rate` varchar(20) NOT NULL,
  `package_discount` varchar(20) NOT NULL,
  `group_discount` varchar(20) NOT NULL,
  `sfimgurl` varchar(100) NOT NULL,
  `postcode` varchar(5) NOT NULL,
  `storder` int(5) NOT NULL,
  `featured` varchar(255) NOT NULL,
  PRIMARY KEY  (`testid`),
  KEY `postal` (`postcode`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=17 ;

--
-- Dumping data for table `wp_testimonials`
--

INSERT INTO `wp_testimonials` VALUES(8, 'Jill Mohlman', '', 'Jill@gmail.com', '25,28,34,39,51,66,104', 'Highest Degree: Bachelors in education\r\nCollege:  Brigham Young\r\nYears as a Teacher:  7\r\nYears as a Tutor: 4', '13', '', '', 'Jill-Mohlman.jpg', '79912', 0, 'Yes');
INSERT INTO `wp_testimonials` VALUES(9, 'Heather Severson', '', '', '33,62,89,104,105,107', 'Highest Degree:  Master of Music\r\nCollege:  Brigham Young\r\nYears as a Teacher:  15\r\n\r\nBio:\r\nWith a Masters Degree in Music and a classically trained violinist, Heather believes that each student requires an individual approach to learning.  Heather focuses on each students strengths and weaknesses, then alters her teaching methods to meet a students needs accordingly.  \r\nHighest Degree:  Master of Music', '13', '', '', 'Heather-Seaverson.jpg', '84054', 0, 'No');
INSERT INTO `wp_testimonials` VALUES(10, 'Floyd Fitzgibbons', '', '', '103', 'Name:  Floyd Fitzgibbons\r\nHighest Degree: Certified Insurance Counselor\r\nCollege:  UNLV\r\nYears as a Teacher:  8+\r\nYears as a Tutor: 5+', '18', '', '', 'Floyd-Fitzgibbons.jpg', '89149', 0, 'No');
INSERT INTO `wp_testimonials` VALUES(12, 'Ryan Fitzgibbons', '', '', '40,67', 'An accomplished teacher and tutor, Ryan ranked as one of the highest rated Kaplan Instructors in the nation for SAT and ACT score improvement. His students have gone to every Ivy League school. Many still keep in contact to report their academic successes, even years after the fact. He has received tremendous reviews from students and parents alike for his friendly and patient attitude, and ability to get results.\r\n\r\n-Member: Mensa High IQ Society - \r\n\r\nScored in 99th percentile on SAT & ACT - \r\n\r\nEagle Scout - Nationally ranked Kaplan SAT & ACT Specialist - \r\n\r\n\\"Ryan cares more than any teacher I\\''ve ever met. He loses more sleep anxiously awaiting his students\\'' test results than they do!\\"', '39', '', '', 'Ryan-Fitzgibbons-200x300.jpg', '89129', 0, 'No');
INSERT INTO `wp_testimonials` VALUES(13, 'Royce Seaverson', '', '', '21,23,28,31,34,37,38,41,42,48,49,66,76,77,82,89,105', 'Highest Degree: Masters\r\nCollege:  BYU', '15', '', '', 'Royce-Seaverson.jpg', '84054', 0, 'No');
INSERT INTO `wp_testimonials` VALUES(14, 'Billy Bob', '', '', '103,104', '', '', '', '', '2012/11/how-it-works-191x300.jpg', '79912', 0, '');
INSERT INTO `wp_testimonials` VALUES(16, 'Billy Joel', '702-539-0540', 'nicholas@702web.com', '24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48', 'I am a great Tutor', '11', '', '', 'footer-purchasing.jpg', '89141', 0, 'Yes'); 
```

**邮政编码列表的部分 SQL**

在此处获取完整列表[http://www.unitedstateszipcodes.org/zip-code-database/](http://www.unitedstateszipcodes.org/zip-code-database/)

```
-- phpMyAdmin SQL Dump
-- version 2.11.11.3
-- http://www.phpmyadmin.net
--
-- Host: 
-- Generation Time: Mar 22, 2013 at 04:39 PM
-- Server version: 5.0.96
-- PHP Version: 5.1.6

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

--
-- Database: `t0tors102938`
--

-- --------------------------------------------------------

--
-- Table structure for table `zip_codes`
--

DROP TABLE IF EXISTS `zip_codes`;
CREATE TABLE IF NOT EXISTS `zip_codes` (
  `zip_id` int(11) NOT NULL auto_increment,
  `zip` varchar(5) NOT NULL default '',
  `abbr_state` char(2) NOT NULL default '',
  `lat` varchar(10) NOT NULL default '',
  `lon` varchar(10) NOT NULL default '',
  `city` varchar(50) default NULL,
  `full_state` varchar(50) default NULL,
  PRIMARY KEY  (`zip_id`),
  UNIQUE KEY `zip` (`zip`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=42523 ;

--
-- Dumping data for table `zip_codes`
--

INSERT INTO `zip_codes` VALUES(1, '501', 'NY', '40.81', '-73.04', 'Holtsville', 'NY');
INSERT INTO `zip_codes` VALUES(2, '544', 'NY', '40.81', '-73.04', 'Holtsville', 'NY');
INSERT INTO `zip_codes` VALUES(3, '601', 'PR', '18.16', '-66.72', 'Adjuntas', 'PR');
INSERT INTO `zip_codes` VALUES(4, '602', 'PR', '18.38', '-67.18', 'Aguada', 'PR');
INSERT INTO `zip_codes` VALUES(20, '631', 'PR', '18.19', '-66.82', 'Castaner', 'PR'); 
```

# html - Opera 中的地理位置实现

> ID：15560113
> 
> 赞同：3
> 
> 时间：2013-03-21T23:34:00.840
> 
> 标签：html, geolocation, opera, w3c-geolocation

我正在测试 HTML5 地理位置。我在 Opera 和 Opera Mobile 中有一些奇怪的结果。

当我在上次访问位置时间戳后的一段时间（例如 25 分钟）后访问该站点时，该时间戳来自过去的某个时间。但是我通过选项告诉我我想要位置不超过 5 秒。页面刷新后，我得到接近“现在”的位置时间戳。我认为它应该在每次访问时返回接近“现在”的位置时间戳。

例子：

首次访问：位置时间戳23:23:13

关闭浏览器：

23:45:20返回站点：位置时间戳23:25:21

刷新：位置时间戳 23:45:11

这是我的 API 调用：

`navigator.geolocation.getCurrentPosition(geoSuccess, geoError, { maximumAge: 5000, timeout: 10000, enableHighAccuracy: true });`

您可以在我为测试创建的 azure 网站上观察到这一点

[geotest.apphb.com](http://geotest.apphb.com/)

编辑：几分钟前，我了解到opera：config让我可以访问地理位置设置，其中我发现仅在更改时发送位置请求。当我将其关闭时，地理位置 api 按预期工作。但是我不明白这个设置。为了发送位置请求必须改变什么？启用此设置后，地理位置 api 会为我提供几个小时前的位置。即使我已经在不同的城市。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:21:06.653

根据[Opera 的 Windows 配置网站](http://help.opera.com/operaconfig/versions/Windows/11.50/en/index.html)，*仅在更改时发送位置请求*意味着以下内容：

> 仅在某些数据提供者（Wi-Fi、小区等）实际发生更改时才发送位置请求。

所以我假设当你改变城市时，你没有像上面提到的那样改变数据提供者。如果您要找到一个 Wi-Fi 接入点或使用其他技术来访问互联网，它可能会发送一个位置请求并进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:05:27.413

由于页面已经加载，`getCurrentPosition`假设您想要的位置是页面加载时的位置（用户在页面加载时的当前位置）。

用于[`watchPosition`](http://www.w3.org/TR/geolocation-API/#watch-position)连续更新位置（无需重新加载页面）。

# pdf - 在 Windows 上从 Markdown 生成 CHM 和 PDF 文档的工具

> ID：15560114
> 
> 赞同：4
> 
> 时间：2013-03-21T23:34:05.520
> 
> 标签：pdf, markdown, python-sphinx, chm

是否有一种工具可以在 Windows 上从 Markdown（或类似的，例如 RST）生成 PDF 和 CHM 文档。

我们目前正在使用[Sphinx](http://sphinx-doc.org/ "狮身人面像")，但无法在 Windows 上生成 PDF（[这个人](https://stackoverflow.com/questions/13155509/how-to-create-pdf-documentation-with-sphinx-in-windows)也有同样的问题）。必须在 Windows 上生成 CHM 并在 Linux 上生成 PDF 版本是一件痛苦的事（我确实需要生成这两个版本）。

是否有替代工具（免费或廉价的商业工具）可以完成这项任务？

源格式*必须*是类似纯文本的格式以进行版本控制，其中 Markdown 和 RST 就是示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:56:56.393

[Free Pascal发行版包含一个名为](http://www.freepascal.org "自由帕斯卡")**chmcmd**的CHM 编译器。一些使用文档工具的人报告使用它取得了成功（例如[Preshrunk-cotton python 包](http://code.google.com/p/preshrunk-cotton)）

一些 Linux 发行版还独立于主 FPC 发行版打包 chm 编译器。（因为它只是一个没有依赖关系的 700k 二进制文件）。

在 Windows 上，您可以使用相同的（chmcmd 的 windows 版本）或 Microsoft Help Workshop，这是 MS 的默认 CHM 生成器。

这是 CHM 编译器部分，现在是输入：

编译前的*CHM 项目*基本上**只是带有几个 XML 索引（TOC 和基于主关键字的索引）的 html**和一个 INI 文件的项目文件。

通常，文档工具的 HTML 生成器后端会经过调整以将其生成为特殊情况。从我在您的“这个人”链接中读到的内容来看，狮身人面像可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T01:27:45.357

毕竟，我能够使用[Sphinx来满足这一需求。](http://sphinx-doc.org/)我使用[MiKTeX](http://miktex.org/)在 Windows 上生成 PDF。

安装 MiKTeX (< 200mb)

```
wget -nv -N http://mirrors.ctan.org/systems/win32/miktex/setup/miktex-portable-2.9.4757.exe
7z.exe x -y miktex-portable-2.9.4757.exe -o"miktex" 
```

将 bin 目录添加到您的路径

```
SET Path=%Path%;%CD%\miktex\miktex\bin 
```

运行 Sphinx 的“make.bat”来生成 .tex 文件。

```
SET SPHINXOPTS=-W -E
make.bat latex 
```

调用 MiKTeX 的 pdflatex：

```
cd build/latex
pdflatex.exe YOUR_PROJECT_NAME.tex 
```

生成的 PDF 将在您的 build/latex 目录中

# php - 主页 wordpress 中的 2 列

> ID：15560116
> 
> 赞同：0
> 
> 时间：2013-03-21T23:34:17.747
> 
> 标签：php, html, css, wordpress, multiple-columns

我修改了一个wordpress模板，在主页上留下两列，结构如下：

![在此处输入图像描述](../Images/090f29d89a432a62dbb267c392d3d020.png)

但前 4 个属于一个类别，后 4 个属于另一个类别

索引代码为：

[http://pastebin.com/dMC0saBN](http://pastebin.com/dMC0saBN)

该页面是（已制作列，但他们所做的只是重复帖子。他们没有排序或过滤）

crossfitlascondes.cl

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:36:52.023

我遇到的解决方案是在页面上创建两个循环并用 分隔，一个到右列，一个到左列。因此，我可以独立处理每个循环的代码，而不会干扰另一列。

索引代码为：

```
 <?php get_header();?>
<div id="contentslide">
    <?php
        include(TEMPLATEPATH . '/slide.php');
        ?>
</div>
<?php
    get_sidebar();
    ?>
<div id="content">
    <div class="clear">
    </div>
    <div id="contentleft">
    <div id="noticias">Noticias</div> 
    <?php if ( is_home() ) { query_posts($query_string . '&cat=-27'); } ?>
    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
        <div class="postleft" id="post-<?php
            the_ID();
            ?>">
            <div class="title">
                <h2><a href="<?php
                    the_permalink();
                    ?>" rel="bookmark" title="Permanent Link to <?php
                    the_title();
                    ?>"><?php
                    the_title();
                    ?></a></h2>
            </div>
            <div class="postmeta">
                <span class="author">Posted by <?php
                    the_author();
                    ?> </span> <span class="clock">  <?php
                    the_time('M - j - Y');
                    ?></span> <span class="comm"><?php
                    comments_popup_link('0 Comment', '1 Comment', '% Comments');
                    ?></span>
            </div>
            <div class="entry">
                <?php
                    if (has_post_thumbnail()) {
                    ?>
                <a href="<?php
                    the_permalink();
                    ?>"><img class="postimgleft" src="<?php
                    bloginfo('stylesheet_directory');
                    ?>/timthumb.php?src=<?php
                    get_image_url();
                    ?>&amp;h=150&amp;w=200&amp;zc=1" alt=""/></a>
                <?php
                    } else {
                    }
                    ?>
                <?php
                    wpe_excerpt('wpe_excerptlength_index', '');
                    ?>
                <div class="clear">
                </div>
            </div>
        </div>
    <?php
        endwhile;
    ?>
    <?php 
        endif; 
    ?>
    <?php
        wp_reset_query();
        ?>
    <div class="navigation">
        <div class="alignleft"><?php previous_posts_link('&laquo; Previous Entries') ?></div>
        <div class="alignright"><?php next_posts_link('Next Entries &raquo;','') ?></div>
    </div>

    </div>
    <div id="contentright">
    <div id="wod">WOD Diario</div>  
    <?php if ( is_home() ) { query_posts($query_string . '&cat=27&'); } ?>
    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
        <div class="postright" id="post-<?php
            the_ID();
            ?>">
            <div class="title">
                <h2><a href="<?php
                    the_permalink();
                    ?>" rel="bookmark" title="Permanent Link to <?php
                    the_title();
                    ?>"><?php
                    the_title();
                    ?></a></h2>
            </div>
            <div class="postmeta">
                <span class="author">Posted by <?php
                    the_author();
                    ?> </span> <span class="clock">  <?php
                    the_time('M - j - Y');
                    ?></span> <span class="comm"><?php
                    comments_popup_link('0 Comment', '1 Comment', '% Comments');
                    ?></span>
            </div>
            <div class="entry">
                <?php
                    if (has_post_thumbnail()) {
                    ?>
                <a href="<?php
                    the_permalink();
                    ?>"><img class="postimgright" src="<?php
                    bloginfo('stylesheet_directory');
                    ?>/timthumb.php?src=<?php
                    get_image_url();
                    ?>&amp;h=150&amp;w=200&amp;zc=1" alt=""/></a>
                <?php
                    } else {
                    }
                    ?>
                <?php
                    wpe_excerpt('wpe_excerptlength_index', '');
                    ?>
                <div class="clear">
                </div>
            </div>
        </div>

    <?php
        endwhile;
        ?>
    <div class="clear"></div>
    <?php
        else:
        ?>
    <h1 class="title">Not Found</h1>
    <p>Sorry, but you are looking for something that isn't here.</p>
    <?php
        endif;
        ?>
    <div class="navigation">
        <div class="alignleft"><?php previous_posts_link('&laquo; Previous Entries') ?></div>
        <div class="alignright"><?php next_posts_link('Next Entries &raquo;','') ?></div>
    </div>
    <?php
        wp_reset_query();
        ?>
    </div>
</div>
<?php
    get_footer();
    ?> 
```

和代码CSS（总结）是

```
#content {
    float:left;
    width: 665px;
    height:100%;
    padding:10px 0px 0px 0px;
    margin:23px 0px 0px 15px;
    display:inline;
    overflow:hidden;

    }

#contentleft {
    float:left;
    width: 50%;
    height:100%;
    display:inline;
    overflow:hidden;

    }

#contentright {
    float:left;
    width: 44%;
    margin-left: 23px;
    height:100%;
    display:inline;
    overflow:hidden;

    }

#contentslide {
    float:left;
    width: 665px;
    height:100%;
    padding:10px 0px 0px 0px;
    margin:35px 0px 0px 15px;
    display:inline;
    overflow:hidden;

    } 
```

# c# - 为什么我的 SQLCeCommand ExecuteReader 失败？

> ID：15560119
> 
> 赞同：0
> 
> 时间：2013-03-21T23:34:38.920
> 
> 标签：c#, compact-framework, sql-server-ce, windows-ce

使用以下代码，我得到一个不太有用的错误消息（我在异常对话框的截断标题栏中看到的所有错误消息都是“System.Data.SQLServer ...”）

```
string query = "SELECT * FROM EVERYTHING";
SqlCeCommand cmd = new SqlCeCommand(query);
SqlCeConnection conn = new SqlCeConnection(myConnStr); 
conn.Open();
cmd.Connection = conn;
SqlCeDataReader myReader = cmd.ExecuteReader(CommandBehavior.CloseConnection); // <-- Blows up bigger than an Augustus Gloop pinata 
```

## 更新

我添加了这个：

```
MessageBox.Show(string.Format("query is {0}", query)); 
```

...对失败的查询进行全面检查，最终发现头发簇现在散落在我的工作区域。我有这个来提供查询：

```
string vendorId = txtVendor.ToString().Trim(); 
```

...而不是这个：

```
string vendorId = txtVendor.Text.ToString().Trim(); 
```

...因此查询是“ *SELECT BLA FROM BLA WHERE BLA = System.Windows.Forms.Label* ”

现在我至少要“行/列不存在数据”错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:02:18.297

我不确定 CF 是否支持该`CommandBehavior.CloseConnection`选项。

你可以这样写吗？

```
string query = "SELECT * FROM EVERYTHING";
var table = new DataTable();
using (var cmd = new SqlCeCommand(query, new SqlCeConnection(myConnStr)); {
  try {
    cmd.Connection.Open();
    table.Load(cmd.ExecuteReader());
  } catch (SqlException err) {
    Console.WriteLine(err.Message); // <= Put a Break Point here.
  } finally {
    cmd.Connection.Close();
  } 
}
object col1 = null;
string strCol2 = null;
if (0 < table.Rows.Count) {
  col1 = table.Rows[0][0];
  object obj = table.Rows[0][1];
  if ((obj != null) && (obj != DBNull.Value)) {
    strCol2 = obj.ToString();
  }
} 
```

**编辑：**添加**DataTable**并从中读取 2 个项目`Row[0]`。

# php - Strtotime 没有按预期工作

> ID：15560120
> 
> 赞同：1
> 
> 时间：2013-03-21T23:34:39.607
> 
> 标签：php, mysql, strtotime

我的目标是将当前时间与上次访问时间进行比较，如果是 5 分钟前，则允许再次访问，否则，拒绝！这是我到目前为止所拥有的

```
$last_activate = strtotime($last_activ); //$last_activ is TIMESTAMP value retrieved from MySQL database
$current_time = strtotime('now');

if(($current_time - $last_activate) > strtotime('5 minutes')){
    //allow access
}
else{
     //deny access
} 
```

目前，上面的代码总是执行`else`语句，即使`$last_activate`是 24 小时前。任何人都知道我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T23:37:40.777

`strtotime('5 minutes')`意味着`now + 5 minutes`。证明：

```
echo date("Y-m-d H:i:s", strtotime('5 minutes'));
2013-03-21 19:41:27 
```

改为这样做：

```
if(($current_time - $last_activate) > 5 * 60){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T23:37:57.820

替换`5 minutes`为`5 minutes ago`。

# vb.net - 日期时间格式 VB.NET

> ID：15560124
> 
> 赞同：-2
> 
> 时间：2013-03-21T23:35:06.213
> 
> 标签：vb.net, datetime

我有一个文本文件，我提取了日期和时间。我需要这样

> yyyy MM dd HH mm

我怎样才能把它变成这种格式。

我试过了

```
dim date as DateTime = line.Substring(line.Length - 19, 16)
date= DateTime.ParseExact(date, "yyyy MM dd HH mm", CultureInfo.InvariantCulture) 
```

它给出了一个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:20:22.270

从 MSDN，[ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)有 3 个参数：

```
s
Type: System.String
A string that contains a date and time to convert.

format
Type: System.String
A format specifier that defines the required format of s.
For more information, see the Remarks section.

provider
Type: System.IFormatProvider
An object that supplies culture-specific format information about s. 
```

所以它需要是这样的：

```
Dim [date] as DateTime =DateTime.ParseExact(line.Substring(line.Length - 19, 16),
                        "yyyy MM dd HH mm", CultureInfo.InvariantCulture) 
```

请注意，此处的日期将被报告为无效标识符，因此您需要方括号。一个更好的解决方案是给你的变量一个有意义的名字。不幸的是，我不能推荐一个，因为你没有在你的问题中提供任何上下文。

# c# - 如何在 C# 中解析 Octave/matlab 矩阵输出？

> ID：15560126
> 
> 赞同：1
> 
> 时间：2013-03-21T23:35:11.103
> 
> 标签：c#, .net, regex, matlab, octave

假设我们有一个 Octave/Matlab 矩阵，其中填充了以字符串形式提供给我们的数据，如下所示：

```
N =

 Columns 1 through 6:

  0.0000e+000  0.0000e+000  0.0000e+000  0.0000e+000  0.0000e+000  0.0000e+000
  0.0000e+000  0.0000e+000  2.3423e+008  1.0809e+009  1.6893e+010  6.5398e+008

 Columns 7 through 12:

  0.0000e+000  0.0000e+000  0.0000e+000  0.0000e+000  0.0000e+000  0.0000e+000
  3.3553e+009  6.9347e+010  3.5653e+010  2.7392e+011  2.1380e+008  7.9962e+009

 Columns 13 and 14:

  9.0266e+015  2.6575e+007
  9.0265e+015  1.2970e-008 
```

所以每个 Columns 都会有它的值列表（这里每个 Column 都`2`可以有更多的行，我们不知道有多少，在我们得到那个字符串之前我们知道列的总数）

`list<list<double> >`如何在运行时（从给定的字符串）将这样的野兽解析成 C# ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:47:18.910

您应该首先[将矩阵写入文件](http://www.gnu.org/software/octave/doc/interpreter/Simple-File-I_002fO.html)（在 Octave/Matlab 中）。这些文件具有一致的格式，允许您从中提取数据。

并且不会知道，我有一些代码可以将 Octave 矩阵解析为 .NET！别介意幕后的待办事项。这是一个更大的课程的一部分，但这应该是大部分；如果缺少任何重要的东西，请添加评论，我会挖掘它。

```
Dictionary<string, object> variables;

private bool ReadAllVariablesFromDataFile(string[] lines)
{
    int i = 0;

    while (i < lines.Length)
    {
        string line = lines[i];
        int oldI = i;
        i = ReadSingleVariable(i, lines);
    }

    return true;
}

private static bool IsDefinitionLine(string line)
{
    return (line != null && line.TrimStart().StartsWith("#"));
}

private int ReadSingleVariable(int startIndex, string[] lines)
{
    // TODO: Types other than matrix.
    OctaveVariable variable = new OctaveVariable();

    while (IsDefinitionLine(lines[startIndex]))
    {
        ProcessDefinitionLine(variable, lines[startIndex]);
        startIndex++;
    }

    if (!variable.IsInitialized)
    {
        return startIndex;
    }

    for (int i = 0; i < variable.Rows; i++)
    {
        ProcessDataLine(variable, lines[startIndex + i], i);
    }

    this.variables.Add(variable.Name, variable.Value);

    return startIndex + variable.Rows;
}

private static void ProcessDefinitionLine(OctaveVariable variable, string line)
{
    string value = GetLineValue(line);

    switch (GetLineId(line))
    {
        case "name":
            variable.Name = value;
            variable.IsInitialized = true;
            break;
        case "rows":
            variable.Rows = int.Parse(value);
            break;
        case "columns":
            variable.Columns = int.Parse(value);
            break;
        default:
            break;
    }
}

private static void ProcessDataLine(OctaveVariable variable, string line, int rowIndex)
{
    string[] values = line.Trim().Split(' ');
    double[] row = new double[variable.Columns];

    for (int i = 0; i < variable.Columns; i++)
    {
        variable.Value[rowIndex, i] = double.Parse(values[i]);
    }
}

private static string GetLineId(string line)
{
    return line.Split(':').First().TrimStart('#').Trim().ToLowerInvariant();
}

private static string GetLineValue(string line)
{
    string[] pair = line.Split(':');
    if (pair.Length < 2)
    {
        throw new ArgumentException("Invalid def line");
    }

    return pair[1].Trim();
} 
```

# git - git 添加我的遥控器以推送子模块

> ID：15560142
> 
> 赞同：0
> 
> 时间：2013-03-21T23:36:41.003
> 
> 标签：git, git-submodules

我有一个存储在*我们的*git 中的主应用程序。*在该应用程序中，我们使用托管在github*上的第三方组件。我们对该组件进行了许多自定义，因此认为为了使更新更容易，我们应该将该组件添加为子模块。

据我了解，通过将此组件添加为子模块，我们将能够从*github*拉取上游更改并将它们合并到我们的子模块中。然后我们会将这些更改推送到*我们的*git。

我成功地将组件添加为子模块，并将其克隆到我的应用程序目录中。我已经合并了我们所有的修改，并在本地提交了这些修改。

我的问题是，我现在如何将我们的 git 添加为子模块的远程，以便我可以将所有自定义推送到该服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T23:56:44.103

您的子模块只是另一个 git repo。添加额外遥控器和推送更改的相同步骤也适用于此处。

```
cd <DIRECTORY_OF_YOUR_SUBMODULE>
git remote add <REMOTE-NAME> <PRIVATE_GIT_REPO_URL>
git fetch <REMOTE-NAME>

# Now you should be able to merge, rebase or cherrypick or any other
# merge strategy you prefer.

# After merging push the changes into your remote
git push <REMOTE-NAME> <LIST_OF_REFS> 
```

# javascript - 如何在不缩放绑定到时间轴的其他形状的情况下放大/缩小 d3.time.scale

> ID：15560145
> 
> 赞同：4
> 
> 时间：2013-03-21T23:37:00.643
> 
> 标签：javascript, svg, d3.js, scale

[http://jsfiddle.net/HF57g/](http://jsfiddle.net/HF57g/)是放置在时间线上的单个事件（蓝色矩形）的示例。如果我放大时间线，矩形在 x 轴上的位置会与轴上的刻度一致地变化。但同时， rect 水平缩放。

如果我修改代码的以下部分

```
svg.selectAll(".item").attr("transform", "translate(" + d3.event.translate[0]+", 0)scale(" + d3.event.scale+", 1)"); 
```

至

```
svg.selectAll(".item").attr("transform", "translate(" + d3.event.translate[0]+", 0)scale(1, 1)"); 
```

如在[http://jsfiddle.net/HF57g/1/](http://jsfiddle.net/HF57g/1/)中禁用水平缩放，则在放大/缩小期间，矩形的位置变化远大于轴。

如何在不缩放其他相关形状的情况下放大/缩小 time.scale？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T14:26:00.653

我最终添加了一个更新函数来根据 scale(x) 返回的新位置重新排列矩形的位置。

```
function update_events(){
    return svg.selectAll("rect.item")
        .attr("x", function(d){return scale(d);})    
} 
```

这是最终版本：http: [//jsfiddle.net/HF57g/2/](http://jsfiddle.net/HF57g/2/)

# php - 使用相同的查询更新两行

> ID：15560146
> 
> 赞同：0
> 
> 时间：2013-03-21T23:37:08.847
> 
> 标签：php, mysql

我想做的是用相同的查询更新两行。我所拥有的是：

```
 $sqlUpdate = "UPDATE user.user SET level='2' WHERE id='".$_GET['char']."' AND level >0 AND item>0 LIMIT 1   "; 
```

我的想法是做这样的事情：

```
 $sqlUpdate = "UPDATE user.user SET level='2' && SET power='1' WHERE id='".$_GET['char']."' AND level >0 AND item>0 LIMIT 1   "; 
```

在我看来，这看起来合乎逻辑，但它不起作用，你知道如何做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:40:08.430

你的意思是更新2列？这就是您的第二个查询正在尝试做的事情。尝试这个：

```
$sqlUpdate = "UPDATE user.user SET level='2', power='1' WHERE id='".$_GET['char']."' AND level >0 AND item>0 LIMIT 1   "; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-21T23:38:56.333

在更新查询中更新多个字段：

您用逗号分隔字段/值。

```
$sql = "UPDATE user.user SET level='2', power='1' WHERE id='" . $_GET['char'] . "' AND level > 0 AND item > 0 LIMIT 1;"; 
```

**注意：上述查询易受[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击，因为用户可以将任何内容传递给 $_GET 变量。这可以被恶意用来更改您的查询。**

在更新查询中更新多于一行：

只有相同的数据可以放在多行中。您修改 where 语句以在逻辑上包含应更新的行。如果每行的数据不同，那么这是不可能的，但您可以使用[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)。

准备好的语句允许您为将运行多次的查询设置模板。然后你可以传递值。大多数数据库将缓存查询，以便提高性能。它还通过将查询与数据分开来防止 SQL 注入。

# c# - C# 等效于 PHP openssl_public_decrypt

> ID：15560151
> 
> 赞同：0
> 
> 时间：2013-03-21T23:37:37.303
> 
> 标签：c#, php, encryption, cryptography

PHP 函数的 C# 等价物是`openssl_public_decrypt`什么？

我曾尝试使用 RSACryptoProvider，但 api 不允许我在没有私钥的情况下解密，

我需要创建所提供数据的哈希，然后与提供的签名进行比较

在 PHP 中

```
$key = openssl_get_publickey('provided_public_key'));
openssl_public_decrypt(base64_decode($_GET['signature']), $hashExpected, $key); 
```

所以我的问题是如何在 c# 中生成 hashExpected？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:32:18.537

There isn't one: the .NET Framework does not come with OpenSSL.

There is a wrapper for OpenSSL you can use from within .NET: [http://openssl-net.sourceforge.net/](http://openssl-net.sourceforge.net/) however it doesn't have a direct analog for `openssl_public_decrypt` as it provides a close wrapper.

.NET comes with the rich `System.Cryptography` namespace.

Looking at PHP's openssl source code (here: [https://github.com/frice2014/php_source/blob/467ed5d6edff72219afd3e644516f131118ef48e/ext/openssl/php_openssl.c](https://github.com/frice2014/php_source/blob/467ed5d6edff72219afd3e644516f131118ef48e/ext/openssl/php_openssl.c) ) we see that `openssl_public_decrypt` calls `RSA_public_decrypt`, however this is an implementation detail. The documentation for PHP's `openssl_public_decrypt` function does not specify what algorithm it uses, so you cannot depend on data being read by other implementations of RSA, such as .NET's.

I'm assuming you're trying to write C# that is interopable with PHP, rather than outright replacing it. In which case I suggest changing your PHP implementation so you know **exactly** what crypto algorithms are in use (complete with any IV and cipher-block-mode), because without those you cannot get the two to reliably work together.

# ruby - 将一个大数组解析成几个子数组

> ID：15560155
> 
> 赞同：3
> 
> 时间：2013-03-21T23:37:49.547
> 
> 标签：ruby, regex, arrays, file-io, syntax

我有一个形容词列表（在[此处](http://pastebin.com/cs2vvQbj)找到），我想将其作为“random_adjective(category)”方法的基础。

我真的只是在尝试一下，作为我第一次真正尝试一个有用的程序。
第1步：打开文件，删除格式。没问题。

```
list=File.read('adjectivelist')
list.gsub(/\n/, " ") 
```

下一步是按类别分解字符串。

```
list.split(" ") 
```

现在我有了文件中每个单词的数组。整洁的。前面带波浪号的代表类别名称。

**现在我想根据类别将这个 LARGE 数组分成几个较小的数组。** 我需要这里的语法帮助，尽管它的伪代码类似于

> 扫描数组以查找以波浪号开头的元素。现在根据该元素的名称创建一个新数组，不带波浪号，并将此“类别名称”放入“类别”数组中。现在从主数组中拉出所有元素，并将它们弹出到子数组中，直到遇到另一个波浪号。然后重复这个过程，直到数组中没有更多元素。

最后，我会从参数中命名的类别中随机抽取一个词。如果没有与参数匹配的类别名称，它将返回 false 并退出（这只是为了以防我以后想添加更多类别。）

提示将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:51:58.953

您可能想像这样第一次返回并拆分：

```
categories = list.split(" ~") 
```

然后每个列表项将以类别名称开头。这将使您不必按照您的建议返回数据结构。考虑一个提示：*有时重新考虑编码问题的开始比无情地前进要好*

您要达到的结构可能是一个哈希，其中键是类别名称，值是所有匹配形容词的数组。它可能看起来像这样：

```
{
  'category' => [ 'word1', 'word2', 'word3' ]
} 
```

所以你可以这样做：

```
words_in_category = Hash.new

categories.each do |category_string|
  cat_name, *words = category_string.split(" ")
  words_in_category[cat_name] = words
end 
```

最后，为了从数组中选择一个随机元素，Ruby 提供了一个非常有用的方法`sample`，所以你可以这样做

```
words_in_category[ chosen_category ].sample 
```

. . . 假设`chosen_category`包含实际类别的字符串名称。我会留给你弄清楚如何将这些放在一起并处理错误、错误输入等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T23:55:54.740

使用[`slice_before`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-slice_before)：

```
categories = list.split(" ").slice_before(/~\w+/) 
```

这将为每个以 开头的单词创建一个子数组`~`，其中包含下一个匹配单词之前的所有单词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T23:54:18.417

如果此文件格式是您的原始文件并且您可以自由更改它，那么我建议您将数据保存为 yaml 或 json 格式并在需要时读取。有图书馆可以做到这一点。就这些。不用担心混乱。不要花时间重新发明轮子。

# c# - 从 VB6 DLL 项目调试 C#.Net DLL 项目

> ID：15560160
> 
> 赞同：3
> 
> 时间：2013-03-21T23:38:18.103
> 
> 标签：c#, debugging, dll, vb6

我有三个项目，一个是编译成 EXE 的 VB6 项目。另一个也是一个VB6项目，它编译成一个DLL。最后一个是编译为 DLL 的 .Net (2010) 项目。

.Net 的 DLL 在我的 VB6 DLL 项目中被引用。生成的 VB6 DLL 项目在我的 VB6 EXE 项目中被引用。

在这种情况下，如何调试我的 .Net DLL 项目？

在这两种情况下都失败（或无法调试），即使我将（VB6 DLL）进程附加到我的 .Net DLL 项目，或者我在 .Net DLL 项目上为我的 VB6 DLL 项目设置了“启动外部程序” .

我是否必须更改我的 VB6 DLL 项目上的引用 (.Net DLL) 才能使其进入调试状态？

欢迎您的所有有效输入。（请逐步解释我需要做的程序）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:47:41.123

您应该能够通过将调试下的启动操作设置为来调试 C#.NET dll

> 启动外部程序

并将 VB6 可执行文件指定为程序。

我知道这很有效，因为我使用它为旧的 VB6 应用程序调试 .NET/C# 插件。

您必须通过多少其他 dll（.NET 或其他）才能访问您尝试调试的代码，这无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T23:56:16.457

啊 vb6 :) 好久不见了....

基本上，您不能在 VB6 IDE 中调试 .NET 代码。

但是，没有什么能阻止您创建 .NET 测试项目来对 .NET dll 进行单元测试。*这就是您在 VB6 中引用它之前应该做的事情。*

如果您需要跟踪特定问题，您可以使用的另一种方法是将调试信息写入文件/数据库/事件视图/...当 dll 处于调试模式时，例如调用了哪些函数、参数、堆栈跟踪...

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-03-21T23:42:46.990

这可能不正确，但我相信 VB 2010 使用什么？.NET 4.0，对吧？我相信 VB6 是在 1994 年创建的，所以它应该是 <= .NET 1.0。二进制文件很可能不兼容。

# javascript - 使用 WebStorm 将 AngularJS Seed 项目提交到 GIT 时出现警告

> ID：15560163
> 
> 赞同：1
> 
> 时间：2013-03-21T23:38:21.673
> 
> 标签：javascript, git, angularjs, warnings, webstorm

我在 Web Storm 中打开了 AngularJS 种子项目并将其提交给 GIT，再次使用 Web Storm。

当我单击提交并推送时，我收到 527 条警告。

AngularJS 插件已安装，如何从提交中排除 AngularJS 库并摆脱这些警告？

谢谢

**更新**

CrazyCoder 将 AngularJS 声明为库的建议已删除与此相关的警告，但 Web 应用程序仍会导致显示警告。

例如，控制器有一个警告说它是一个未使用的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:10:51.273

1.  [忽略文件](https://help.github.com/articles/ignoring-files)。
2.  在对话框中禁用**执行代码分析。**`Commit Project`

您还可以将此库存储在项目根目录之外并将其配置为[JavaScript 库](http://www.jetbrains.com/webstorm/webhelp/configuring-javascript-libraries.html)。

# actionscript-3 - Flashpunk 中的 Wordwrap 问题

> ID：15560164
> 
> 赞同：1
> 
> 时间：2013-03-21T23:38:41.160
> 
> 标签：actionscript-3, flash, word-wrap

出于某种原因，我的自动换行的最后一行没有显示

```
public class ShopButton extends Entity 
{

    private var callback:Function = null;
    public var buttonText:String = "";
    public var textImage:Text;
    public var picture:BitmapData = new BitmapData(100, 100, true, 1);
    public var boxImage:Stamp;
    public var displayImage:Graphiclist;
    public var displayImage2:Graphiclist;

    public var tooltipPicture:BitmapData = new BitmapData(150, 130, true, 1);
    public var tooltipBox:Stamp;
    public var tooltipText:Array = [];
    public var tooltipString:Array = [];

    public var buttonWidth:int = 100;
    public var buttonHeight:int = 100;

    private var clicked:Boolean = false;
    private var shiftClicked:Boolean = false;
    private var hovered:Boolean = false;
    private var fontSize:int = 16;

    public var label:String = "";

    public function ShopButton(x:int = 0, y:int = 0, label:String = "", callback:Function = null) 
    {
        this.callback = callback;
        this.label = label;
        buttonText = label;

        textImage = new Text(buttonText, 5, 5, { width:buttonWidth-10, wordWrap:true, align:"center", size:fontSize, font:"Abscissa" } );
        Draw.setTarget(picture);
        Draw.rectPlus(0, 0, buttonWidth, buttonHeight, 0x000000, 1, true, 2, 5);
        Draw.rectPlus(0, 0, buttonWidth, buttonHeight, 0xFFFF00, 1, false, 5, 5);

        boxImage = new Stamp(Assets.SHOPBUTTON);
        textImage.y = (boxImage.height / 2) - (textImage.height / 2);

        displayImage = new Graphiclist(boxImage, textImage);

        super (x, y, displayImage);

        setHitboxTo(boxImage);

        Draw.setTarget(tooltipPicture);
        Draw.rectPlus(0, 0, 150, 130, 0x000000, 1, true, 1, 0);
        Draw.rectPlus(0, 0, 150, 130, 0xFFFF00, 1, false, 5, 0);

        tooltipBox = new Stamp(Assets.SHOPBUTTONBORDER);

        updateTooltip();
    }

    public function updateTooltip():void
    {
        var minDamage:int = 0;
        var maxDamage:int = 0;
        var damageResist:int = 0;

        switch(label)
        {
            case "Purchase Ammo":
                tooltipString[0] = "";
                tooltipString[1] = "Purchase more";
                tooltipString[2] = "shurikens";
                tooltipString[3] = "";
                tooltipString[4] = "Shift + Click";
                tooltipString[5] = "To buy max";
                break;
            case "Upgrade Melee Weapon":
                minDamage = Globals.meleeDamage[0][Globals.meleeLevel];
                maxDamage = Globals.meleeDamage[1][Globals.meleeLevel];
                minDamage = minDamage * (1+(Globals.playerMeleeDamage / 100));
                maxDamage = maxDamage * (1 + (Globals.playerMeleeDamage / 100));
                tooltipString[0] = "Current Level";
                tooltipString[1] = "Damage: "
                tooltipString[2] = "" + minDamage + " - " + maxDamage;
                tooltipString[3] = "Next Level";
                if (Globals.meleeLevel < Globals.meleeMaxLevel)
                {
                    minDamage = Globals.meleeDamage[0][Globals.meleeLevel + 1];
                    maxDamage = Globals.meleeDamage[1][Globals.meleeLevel + 1];
                    minDamage = minDamage * (1+(Globals.playerMeleeDamage / 100));
                    maxDamage = maxDamage * (1 + (Globals.playerMeleeDamage / 100));
                    tooltipString[4] = "Damage: "
                    tooltipString[5] = "" + minDamage + " - " + maxDamage;
                }
                else 
                {
                    tooltipString[4] = "";
                    tooltipString[5] = "Max Level";
                }
                break;
            case "Upgrade Ranged Weapon":
                minDamage = Globals.rangedDamage[0][Globals.rangedLevel];
                maxDamage = Globals.rangedDamage[1][Globals.rangedLevel];
                minDamage = minDamage * (1+(Globals.playerRangeDamage / 100));
                maxDamage = maxDamage * (1 + (Globals.playerRangeDamage / 100));
                tooltipString[0] = "Current Level";
                tooltipString[1] = "Damage: "
                tooltipString[2] = "" + minDamage + " - " + maxDamage;
                tooltipString[3] = "Next Level";
                if (Globals.rangedLevel < Globals.rangedMaxLevel)
                {
                    minDamage = Globals.rangedDamage[0][Globals.rangedLevel + 1];
                    maxDamage = Globals.rangedDamage[1][Globals.rangedLevel + 1];
                    minDamage = minDamage * (1+(Globals.playerRangeDamage / 100));
                    maxDamage = maxDamage * (1 + (Globals.playerRangeDamage / 100));
                    tooltipString[4] = "Damage: "
                    tooltipString[5] = "" + minDamage + " - " + maxDamage;
                }
                else 
                {
                    tooltipString[4] = "";
                    tooltipString[5] = "Max Level";
                }
                break;
            case "Upgrade Armor":
                damageResist = Globals.armorDefense[Globals.armorLevel];
                damageResist = damageResist * (1 + (Globals.playerDefense / 100));
                tooltipString[0] = "Current Level";
                tooltipString[1] = "Damage Resist: "
                tooltipString[2] = "" + damageResist;
                tooltipString[3] = "Next Level";
                if (Globals.armorLevel < Globals.armorMaxLevel)
                {
                    damageResist = Globals.armorDefense[Globals.armorLevel + 1];
                    damageResist = damageResist * ( 1 + (Globals.playerDefense / 100));
                    tooltipString[4] = "Damage Resist: "
                    tooltipString[5] = "" + damageResist;
                }
                else 
                {
                    tooltipString[4] = "";
                    tooltipString[5] = "Max Level";
                }
                break;
        }

        tooltipText[0] = new Text(tooltipString[0], 0, 10, {width:150, align:"center", size:fontSize, font:"Abscissa"});
        tooltipText[0].x = -25;
        tooltipText[0].y -= 20;
        tooltipText[1] = new Text(tooltipString[1], 0, 30, {width:150, align:"center", size:fontSize, font:"Abscissa"});
        tooltipText[1].x = -25;
        tooltipText[1].y -= 20;
        tooltipText[2] = new Text(tooltipString[2], 0, 45, {width:150, align:"center", size:fontSize, font:"Abscissa"});
        tooltipText[2].x = -25;
        tooltipText[2].y -= 20;
        tooltipText[3] = new Text(tooltipString[3], 0, 65, {width:150, align:"center", size:fontSize, font:"Abscissa"});
        tooltipText[3].x = -25;
        tooltipText[3].y -= 20;
        tooltipText[4] = new Text(tooltipString[4], 0, 85, {width:150, align:"center", size:fontSize, font:"Abscissa"});
        tooltipText[4].x = -25;
        tooltipText[4].y -= 20;
        tooltipText[5] = new Text(tooltipString[5], 0, 100, {width:150, align:"center", size:fontSize, font:"Abscissa"});
        tooltipText[5].x = -25;
        tooltipText[5].y -= 20;

        tooltipBox.x = -25;
        tooltipBox.y = -20;

        displayImage2 = new Graphiclist(tooltipBox, tooltipText[0], tooltipText[1], tooltipText[2], tooltipText[3], tooltipText[4], tooltipText[5]);

    }

    public function click(action:String = ""):void
    {
        //trace(action);
        if (action == "Shift" && label == "Purchase Ammo" && callback != null) callback("Shift");
        else if (callback != null) callback();
    }

    override public function update():void
    {
        super.update();
        if (collidePoint(x, y, world.mouseX, world.mouseY))
        {
            if (Input.mousePressed && !Input.check(Key.SHIFT))
            {
                shiftClicked = false;
                clicked = true;
            }
            if (Input.mousePressed && Input.check(Key.SHIFT))
            {
                //trace ("Shifty");
                clicked = false;
                shiftClicked = true;
            }
            if (Input.mouseReleased && clicked) click("");
            if (Input.mouseReleased && shiftClicked) click("Shift");
            hovered = true;
        }
        else hovered = false;

        if (Input.mouseReleased) clicked = false;

        if (hovered) 
        {
            updateTooltip();
            graphic = displayImage2;
        }
        else graphic = displayImage;
    }

} 
```

当我运行它时，它会显示除最后一行之外的所有文本（我想我需要 10 个代表来发布屏幕截图）。例如，第一个按钮显示“购买”而不是“购买弹药”。

以前有没有人遇到过这个问题，如果是这样，你如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T13:41:22.603

我在自动换行方面遇到了一些问题。似乎对于 Text 类，当您指定其宽度和高度然后将自动换行设置为 true 和 important 时，自动换行可以正常工作 - 可调整大小为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-22T13:09:20.463

我只是遇到了完全相同的问题，尝试设置 height 属性，这为我解决了。

# r - 函数和循环的条件

> ID：15560172
> 
> 赞同：1
> 
> 时间：2013-03-21T23:38:59.210
> 
> 标签：r, function, loops, conditional-statements

我有一个简化如下的数据框：

```
head(dendro)
  X            DateTime   ID diameter dendro ring DOY month mday year Rain_mm_Tot Through_Tot temp
1 1 2012-06-21 13:45:00 r1_1     5482      1    1 173     6   22  113          NA          NA   NA
2 2 2012-06-21 13:45:00 r2_3       NA      3    2 173     6   22  113          NA          NA   NA
3 3 2012-06-21 13:45:00 r1_2     5534      2    1 173     6   22  113          NA          NA   NA
4 4 2012-06-21 13:45:00 r2_4       NA      4    2 173     6   22  113          NA          NA   NA
5 5 2012-06-21 13:45:00 r1_3     5606      3    1 173     6   22  113          NA          NA   NA
6 6 2012-06-21 13:45:00 r2_5       NA      5    2 173     6   22  113          NA          NA   NA 
```

数据框首先被“ID”分割，所以它是一个 ID 列表之后我应用了一个包含循环的函数，结果是一个新列“Diameter2”，我希望从函数中得到结果，它可以工作好的：

```
dendro_sp <- split(dendro, dendro$ID)

library(changepoint)

dendro_sp <- lapply(dendro_sp, function(x){

 x <- subset(x, !is.na(diameter))
 cpfit <- cpt.mean(x$diameter, method="BinSeg")

 x$diameter2 <- x$diameter
 cpts <- cpfit@cpts
 means <- param.est(cpfit)$mean
 meanZero <- means[1]

 for(i in 1:(length(cpts)-1)){
   x$diameter2[(cpts[i]+1):cpts[i+1]] <- x$diameter2[(cpts[i]+1):cpts[i+1]] + (meanZero - means[i+1])
 }

 return(x)
})
dendro2 <- do.call(rbind, dendro_sp)
rownames(dendro2) <- NULL 
```

我的问题是我希望它有条件地应用它，例如应用到 r1_1 和 r1_3，并在新列“diameter2”中获取 r3 的“直径”值，而不是为其余 ID 应用该函数：

```
ifelse(diameter$ID==c("r1_1","r1_3"), apply_the_function_to_r11_and_r13_to_calculate_diameter2, otherwise_write_diameter_value_in_diameter2_column) 
```

请记住，数据框“dendro”是按 ID 拆分的，我不知道这对于定义多个 ID 的条件是否重要。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T16:37:47.090

我不确定我是否正确理解了这个问题。我试着回答。我假设您想将函数应用于“直径”数据帧的“直径”字段，以“ID”字段为条件，并在相应的直径 2 字段中返回结果。我不知道该功能是如何工作的，如果这不起作用，请原谅我。

# 选定字段

直径$diameter2[diameter$ID=="r1_1"|diameter$ID=="r1_3"]<- yourfun(diameter$diameter[diameter$ID=="r1_1"|diameter$ID=="r1_3"]

# 未选择的字段

直径$diameter2[直径$ID!="r1_1" & 直径$ID=="r1_3"]<- 直径$diameter[直径$ID=="r1_1"|diameter$ID=="r1_3"]

# javascript - 在jquery中垂直环绕滚动

> ID：15560174
> 
> 赞同：0
> 
> 时间：2013-03-21T23:39:07.530
> 
> 标签：javascript, jquery

我正在尝试制作一个滚动内容的网页，当它到达内容的底部时，继续滚动页面底部，同时重新滚动顶部 - 所以底部和顶部将同时出现在屏幕上. 像`<marquee>`标签，但垂直。

到目前为止，我唯一能想到的东西是（在负载上我`setInterval()`每 75 毫秒运行一次）

```
function doScroll() {

window.scrollBy(0,1);

if($(window).scrollTop() + $(window).height() == $(document).height()) {
    window.scrollTo(0,0);   
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:48:19.440

[http://www.quackit.com/html/codes/html_marquee_code.cfm](http://www.quackit.com/html/codes/html_marquee_code.cfm)

看看这个。它在页面中间有“向上”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:59:47.797

您可以使用 CSS3，特别是 property `marquee-direction`。

与`marquee-style`、`marquee-speed`和一起`marquee-play-count`，您可以创建您想要的效果。

参见例如[http://www.quackit.com/css/css3/properties/css_marquee-direction.cfm](http://www.quackit.com/css/css3/properties/css_marquee-direction.cfm)

请记住 HTML 是语义的，但移动的东西不是，因此您应该使用 CSS/JavaScript 而不是`<marquee>`. 此外，*该元素从未添加到 HTML 规范中，并且对它的支持在浏览器中差异很大*( [http://webdesign.about.com/od/css3tutorials/a/marquee-in-css.htm](http://webdesign.about.com/od/css3tutorials/a/marquee-in-css.htm) )

# php - PHP：类之间传递的动态变量

> ID：15560180
> 
> 赞同：0
> 
> 时间：2013-03-21T23:39:25.497
> 
> 标签：php, class

如果我的标题不清楚，我很抱歉，请让我解释......

我有一个模板类调用'page'，当我初始化它时，我可以通过设置 $mode 将它设置为调试模式。

问题是我也有一个数据库类，我想分享'page'处于调试模式但不知道最好的方法......我不能让'page'扩展'db'和没有'page'实际上在哪里调用'db'类。它总是发生在其他课程上。

再次抱歉，如果不清楚...我试图提供一个非常简单的代码版本来帮助...

```
class page {
    public $mode; // what mode the page is in (debug/normal)

    public function __construct($constructVars) {
        $this->mode = $constructVars["mode"]; //debug
    }

    public function debug($message){
        if ($this->mode == "debug"){
            $fh = fopen("debug.txt", 'a') or die("can't open debug file");
            fwrite($fh, date("Y-m-d H:i:s")." : ".$message."\n");
            fclose($fh);
        }
    }
}

class db extends PDO {
    public function debugOutput() {
        $page = new page();
        if ($page->mode == "debug"){
            $fh = fopen("debug.txt", 'a') or die("can't open debug file");
            fwrite($fh, $message."\n");
            fclose($fh);
        }
    }
 } 
```

只是重申一下，因为我认为这是即将出现的答案，我无法扩展页面以包含 db。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:22:03.150

你可以`$page`传入`db::debugOutput()`：

```
class db extends PDO {
    public function debugOutput(page $page) {
        if ($page->mode == "debug"){
            $fh = fopen("debug.txt", 'a') or die("can't open debug file");
            fwrite($fh, $message."\n");
            fclose($fh);
        }
    }
}

$page = new page(array('mode' => 'debug'));
// ...
$db->debugOutput($page); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T00:28:39.200

我会使用静态类来存储全局可访问的东西，如下所示：

```
class SystemState{
    public static $debugMode = false; // what mode the page is in (debug/normal)
}

class page {

    public function __construct($constructVars) {
        if($constructVars["mode"] == 'debug'){
            SystemState::$debugMode = true;
        }
    }

    public function debug($message){
        if (SystemState::$debugMode){
            $fh = fopen("debug.txt", 'a') or die("can't open debug file");
            fwrite($fh, date("Y-m-d H:i:s")." : ".$message."\n");
            fclose($fh);
        }
    }
}

class db extends PDO {
    public function debugOutput() {
        if (SystemState::$debugMode){
            $fh = fopen("debug.txt", 'a') or die("can't open debug file");
            fwrite($fh, $message."\n");
            fclose($fh);
        }
    }
 } 
```

# ruby - 使用 Nori 和 Nokogiri 解析 XML 以散列，结果不理想

> ID：15560182
> 
> 赞同：1
> 
> 时间：2013-03-21T23:39:41.930
> 
> 标签：ruby, xml, nokogiri, sax

我正在尝试使用 Nori 将 XML 文档转换为 Ruby 哈希。但不是接收根元素的集合，而是返回一个包含该集合的新节点。这就是我正在做的事情：

```
@xml  = content_for(:layout)
@hash = Nori.new(:parser => :nokogiri, :advanced_typecasting => false).parse(@xml) 
```

或者

```
@hash = Hash.from_xml(@xml) 
```

其中的内容`@xml`是：

```
<bundles>
  <bundle>
    <id>6073</id>
    <name>Bundle-1</name>
    <status>1</status>
    <bundle_type>
      <id>6713</id>
      <name>BundleType-1</name>
    </bundle_type>
    <begin_at nil=\"true\"></begin_at>
    <end_at nil=\"true\"></end_at>
    <updated_at>2013-03-21T23:02:32Z</updated_at>
    <created_at>2013-03-21T23:02:32Z</created_at>
  </bundle>
  <bundle>
    <id>6074</id>
    <name>Bundle-2</name>
    <status>1</status>
    <bundle_type>
      <id>6714</id>
      <name>BundleType-2</name>
    </bundle_type>
    <begin_at nil=\"true\"></begin_at>
    <end_at nil=\"true\"></end_at>
    <updated_at>2013-03-21T23:02:32Z</updated_at>
    <created_at>2013-03-21T23:02:32Z</created_at>
  </bundle>
</bundles> 
```

解析器返回`@hash`格式：

```
{"bundles"=>{"bundle"=>[{"id"=>"6073", "name"=>"Bundle-1", "status"=>"1", "bundle_type"=>{"id"=>"6713", "name"=>"BundleType-1"}, "begin_at"=>nil, "end_at"=>nil, "updated_at"=>"2013-03-21T23:02:32Z", "created_at"=>"2013-03-21T23:02:32Z"}, {"id"=>"6074", "name"=>"Bundle-2", "status"=>"1", "bundle_type"=>{"id"=>"6714", "name"=>"BundleType-2"}, "begin_at"=>nil, "end_at"=>nil, "updated_at"=>"2013-03-21T23:02:32Z", "created_at"=>"2013-03-21T23:02:32Z"}]}} 
```

相反，我想得到：

```
{"bundles"=>[{"id"=>"6073", "name"=>"Bundle-1", "status"=>"1", "bundle_type"=>{"id"=>"6713", "name"=>"BundleType-1"}, "begin_at"=>nil, "end_at"=>nil, "updated_at"=>"2013-03-21T23:02:32Z", "created_at"=>"2013-03-21T23:02:32Z"}, {"id"=>"6074", "name"=>"Bundle-2", "status"=>"1", "bundle_type"=>{"id"=>"6714", "name"=>"BundleType-2"}, "begin_at"=>nil, "end_at"=>nil, "updated_at"=>"2013-03-21T23:02:32Z", "created_at"=>"2013-03-21T23:02:32Z"}]} 
```

关键是我控制了 XML，它的形成方式类似于上述方式。

我的问题也与[RABL 的 JSON 输出不符合标准有关吗？它可以？](https://stackoverflow.com/questions/13590508/does-rabls-json-output-not-conform-to-standard-can-it)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:24:04.000

想象一个只包含相同标签列表的 XML，例如

```
<shoppinglist>
    <item>apple</item>
    <item>banana</item>
    <item>cherry</item>
    <item>pear</item>
<shoppinglist> 
```

当您将其转换为哈希时，使用例如访问项目非常简单`hash['shoppinglist']['item'][0]`。但是在这种情况下你会期待什么？只是一个数组？根据您的逻辑，现在应该可以访问这些项目，`hash['shoppinglist'][0]`但是如果容器中有不同的元素，例如

```
<shoppinglist>
    <date>2013-01-01</date>
    <item>apple</item>
    <item>banana</item>
    <item>cherry</item>
    <item>pear</item>
<shoppinglist> 
```

您现在将如何访问这些项目？以及如何约会？问题是转换为哈希必须在一般情况下工作。

虽然我不认识 Nori，但我很确定你从它那里提出的问题并没有被烤熟，只是因为当你考虑一般情况时它是没有意义的。作为替代方案，您仍然可以自己将 bundle 数组提升一级：

```
@hash['bundles'] = @hash['bundles']['bundle'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-03T18:18:17.023

您的问题的一般解决方案不是很漂亮。

我创建了一个名为 ArrayHash 的特殊对象。它有一个特殊的属性，如果 in 只有一个键并且该键指向的数据值是一个数组，它会将整数键添加到这些数组元素中。

所以如果普通的红宝石`Hash`字典看起来像

```
{bundle"=>["0", "1", "A", "B"]} 
```

然后在`ArrayHash`字典中看起来像这样

```
{"bundle"=>["0", "1", "A", "B"], 0=>"0", 1=>"1", 2=>"A", 3=>"B"} 
```

由于额外的键是类型，`Fixnum`这个哈希看起来就像`Array`

```
[ "0", "1", "A", "B" ] 
```

除了它还有一个“捆绑”条目，所以它的大小是 5

下面是强制`Nori`使用这个特殊字典的代码。

```
require 'nori'

class Nori
  class ArrayHash < Hash
    def [](a)
      if a.is_a? Fixnum and self.size == 1
        key = self.keys[0]
        self[key][a]
      else
        super
      end
    end
    def inspect
      if self.size == 1 and self.to_a[0][1].class == Array
        p = Hash[self.to_a]
        self.values[0].each.with_index do |v, i|
          p[i] = v
        end
        p.inspect
      else
        super
      end
    end
  end
end

class Nori
  class XMLUtilityNode
    alias :old_to_hash :to_hash
    def to_hash
      ret = old_to_hash
      raise if ret.size != 1
      raise unless ret.class == Hash
      a = ret.to_a[0]
      k, v = a.first, a.last
      if v.class == Hash
        v = ArrayHash[ v.to_a ]
      end
      ret = ArrayHash[ k, v ]
      ret
    end
  end
end

h = Nori.new(:parser => :nokogiri, :advanced_typecasting => false).parse(<<EOF)
<top>
<aundles>
  <bundle>0</bundle>
  <bundle>1</bundle>
  <bundle>A</bundle>
  <bundle>B</bundle>
</aundles>
<bundles>
  <nundle>A</nundle>
  <bundle>A</bundle>
  <bundle>B</bundle>
</bundles>
</top>
EOF

puts "#{h['top']['aundles'][0]} == #{ h['top']['aundles']['bundle'][0]}"
puts "#{h['top']['aundles'][1]} == #{ h['top']['aundles']['bundle'][1]}"
puts "#{h['top']['aundles'][2]} == #{ h['top']['aundles']['bundle'][2]}"
puts "#{h['top']['aundles'][3]} == #{ h['top']['aundles']['bundle'][3]}"

puts h.inspect 
```

那么输出是

```
0 == 0
1 == 1
A == A
B == B
{"top"=>{"aundles"=>{"bundle"=>["0", "1", "A", "B"], 0=>"0", 1=>"1", 2=>"A", 3=>"B"}, "bundles"=>{"nundle"=>"A", "bundle"=>["A", "B"]}}} 
```

# .htaccess - 子域、分页和 .htaccess

> ID：15560183
> 
> 赞同：0
> 
> 时间：2013-03-21T23:39:52.640
> 
> 标签：.htaccess, pagination, subdomain

**以上帝的名义**

你好，

我如何转换这个网址

*domain.tld/blog.php?name=username&page=2*

对这个

*用户名.domain.tld/page/2*

与.htaccess？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T04:20:58.937

将以下指令添加到网站根目录 (domain.tld) 中的 .htaccess 文件（如果不存在则创建）

```
 RewriteEngine on
 RewriteBase /

 RewriteCond %{QUERY_STRING} name=([^&]+)
 RewriteCond %{QUERY_STRING} page=([^&]+)
 RewriteRule ^blog.php$ http://%1.domain.tld/page/%2? [R=301,L,NC] 
```

# class - WordPress $wpdb->options 返回空白

> ID：15560186
> 
> 赞同：0
> 
> 时间：2013-03-21T23:39:58.783
> 
> 标签：class, function, wordpress

我正在研究 WordPress 主题并尝试在我自己的主题类中使用 $wpdb 类。当我尝试使用以下 SQL 查询时，`$wpdb->options`变量为空并生成错误。

```
global $wpdb;
$wpdb->query("UPDATE ". $wpdb->options ." SET option_value = 'a:0:{}' WHERE option_name = 'active_plugins';"); 
```

我在我创建的类中使用此代码。

这是一个高度缩小的班级样本

```
class Theme_Class {

    function init($options) {

        /* Load theme's functions. */
        $this->functions();

    }

    function plugins() {
        global $wpdb;

        /* Auto plugin activation */
        if(get_option('morphius_int_plugins', '0') == '0') {

            $wpdb->query("UPDATE ". $wpdb->options ." SET option_value = 'a:0:{}' WHERE option_name = 'active_plugins';");
            $wpdb->query("UPDATE ". $wpdb->sitemeta ." SET meta_value = 'a:0:{}' WHERE meta_key = 'active_plugins';");
            update_option('morphius_int_plugins', '1');
        }

    }
} 
```

我是否没有正确地全球化 $wpdb 变量。任何帮助将不胜感激。

**编辑**

据我目前所知。导致问题的似乎是 SQL 语法中的引号。如果我将查询更改为

```
$wpdb->query("UPDATE $wpdb->options SET option_value = 'a:0:{}' WHERE option_name = 'active_plugins';"); 
```

它似乎可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T04:41:07.393

您可以尝试`$wpdb->prefix`改用：

```
global $wpdb;
$wpdb->query("UPDATE ". $wpdb->prefix ."options SET option_value = 'a:0:{}' WHERE option_name = 'active_plugins';"); 
```

您还可以查看表格，看看选项表是否存在：

```
print_r($wpdb->tables);
print_r($wpdb->ms_global_tables);
print_r($wpdb->global_tables);
print_r($wpdb->old_tables); 
```

通常它应该可以使用`$wpdb->options`，因此您应该检查其他表名是否也存在问题。

# knockout.js - 带有打字稿的微风实体

> ID：15560187
> 
> 赞同：4
> 
> 时间：2013-03-21T23:40:00.683
> 
> 标签：knockout.js, typescript, breeze, single-page-application

我正在使用 Breeze + Typescript + Knockout 作为 Spa，我面临以下问题：当我使用 EntityManager.createEntity 创建一个新实体时，typescript 不允许我使用 Breeze 从元数据生成的可观察对象。Typescript 仅“看到”“entityAspect”和“entityType”属性。我正在使用DefinitelyTyped 的类型定义。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T09:33:15.457

您可以为您的类型创建一个扩展接口`breeze.Entity`：

```
/// <reference path="breeze.d.ts" />
module model {
    export interface ResponsesItem extends breeze.Entity {
        ContentTypeID: string;
        Title: string;
        Description: string;
        EventDate: any;
        /* etc. */
    }
} 
```

然后，您可以在需要以类型化方式处理对象时将对象转换到此接口，例如从服务器加载时的查询结果：

```
 private loadResponses(): void {
         this.dataservice.ListResponses()
            .then((data: { results: breeze.Entity[]; query: breeze.EntityQuery; XHR: XMLHttpRequest; }) => {
                var results: model.ResponsesItem[] = <model.ResponsesItem[]>data.results;
                // Do something with typed results array here.
         }).fail((error) => {
            this.handleDataError(error);
         });
      } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T03:47:04.723

查看我在[Breeze.js 类型实体](https://stackoverflow.com/questions/13817230/breeze-js-typed-entities/16028385#16028385)中的答案，其中我破解了 T4TS 以吐出支持 Breeze 的 TS 定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T04:58:59.443

Looking at : [https://github.com/borisyankov/DefinitelyTyped/blob/master/knockout/knockout.d.ts](https://github.com/borisyankov/DefinitelyTyped/blob/master/knockout/knockout.d.ts)

Functions you see on ko (e.g. observable etc) are the functions defined on KnockoutStatic interface because of this line:

```
declare var ko: KnockoutStatic; 
```

Here is a snippet of this interface:

```
interface KnockoutStatic {
    utils: KnockoutUtils;
    memoization: KnockoutMemoization;
    bindingHandlers: KnockoutBindingHandlers;
    virtualElements: KnockoutVirtualElements;
    extenders: KnockoutExtenders;

    applyBindings(viewModel: any, rootNode?: any): void;
    applyBindingsToDescendants(viewModel: any, rootNode: any): void;
    applyBindingsToNode(node: Element, options: any, viewModel: any): void;

    subscribable: KnockoutSubscribableStatic;
    observable: KnockoutObservableStatic;
    computed: KnockoutComputedStatic;
    observableArray: KnockoutObservableArrayStatic;
    ..... 
```

So if you want new functions on ko you need to define new functions to the KnockoutStatic interface e.g.:

```
interface KnockoutStatic {
    yourFunc: KnockoutObservableStatic;
} 
```

etc. Since interfaces are open ended you can declare various parts of the interface definition in multiple files. Hope this helps.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-24T11:24:43.023

下面是一个页面，您可以将其放入您的站点以生成 typescript 接口定义。该页面获取微风元数据，然后遍历所有类型并为每种类型输出一个打字稿接口声明。然后可以将此页面的输出粘贴到任何打字稿文件 (*.ts) 或打字稿定义文件 (*.d.ts) 中。如果要命名接口，请将结果包含在模块声明中： `declare module northwind { ... paste interfaces here... }`.

在使用该页面之前，您需要进行一次编辑：将实体管理器的控制器 URL 从“api/northwind”更改为您的微风控制器的 URL。

生成的接口依赖于 Knockout.js 打字稿定义，您可以在此处获取：[https ://github.com/borisyankov/DefinitelyTyped/tree/master/knockout/](https://github.com/borisyankov/DefinitelyTyped/tree/master/knockout/)

使用[learn.breezejs.com](http://learn.breezejs.com/)中的北风示例，此定义生成器页面的输出将如下所示：

```
export interface Employee extends breeze.Entity {
    FirstName: KnockoutObservable<string>;
    LastName: KnockoutObservable<string>;
} 
```

然后，您可以使用微风执行查询并将结果转换为一组员工，如下所示：

```
var manager = new breeze.EntityManager('api/northwind');

var query = new breeze.EntityQuery()
    .from("Employees");

manager.executeQuery(query).then(data => {
    // ***cast the results to a strongly typed array of Employee***
    var employees = <Employee[]>data.results;
}).fail(e => {
    alert(e);  
}); 
```

下面是定义生成器页面 - 将一个新的 html 文件添加到名为“definitions.html”的项目中，运行该项目并导航到该页面。

```
<html>
<head>
    <title>Typescript Definition Generator</title>
    <style>
        code {
            white-space: pre;
        }
    </style>
    <script src="//code.jquery.com/jquery-2.1.0.min.js"></script>
    <script src="//ajax.aspnetcdn.com/ajax/knockout/knockout-3.0.0.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/q.js/1.0.0/q.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/breezejs/1.4.4/breeze.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var entityManager = new breeze.EntityManager('api/northwind');
            entityManager.fetchMetadata()
                .then(function () {
                    var html = '',
                        types = entityManager.metadataStore.getEntityTypes(),
                        type,
                        i,
                        j,
                        property,
                        crlf = String.fromCharCode(13),
                        code = document.createElement('code'),
                        script = document.createElement('script');

                    function getJSType(metadataType) {
                        if (/(Int64)|(Int32)|(Int16)|(Byte)|(Decimal)|(Double)|(Single)|(number)/.test(metadataType))
                            return 'number';
                        else if (/(DateTime)|(DateTimeOffset)|(Time)|(Date)/.test(metadataType))
                            return 'Date';
                        else if (/(Boolean)/i.test(metadataType))
                            return 'boolean';
                        return 'string';
                    }

                    for (i = 0; i < types.length; i++) {
                        // type declaration
                        var type = types[i];
                        html += 'export interface ' + type.shortName;

                        // base type
                        html += ' extends ';
                        if (type.hasOwnProperty('baseEntityType')) {
                            html += type.baseEntityType.shortName;
                        } else {
                            html += 'breeze.Entity';
                        }
                        html += ' {' + crlf;

                        // data properties
                        for (j = 0; j < type.dataProperties.length; j++) {
                            property = type.dataProperties[j];
                            if (type.baseEntityType && type.baseEntityType.dataProperties.filter(function (p) { return p.name === property.name; }).length > 0)
                                continue;
                            html += '    ' + property.name;
                            //if (property.isNullable)
                            //    html += '?';
                            html += ': KnockoutObservable&lt;';
                            html += getJSType(property.dataType.name);
                            html += '&gt;; //' + property.dataType.name + crlf;
                        }

                        // navigation properties
                        for (j = 0; j < type.navigationProperties.length; j++) {
                            property = type.navigationProperties[j];
                            if (type.baseEntityType && type.baseEntityType.navigationProperties.filter(function (p) { return p.name === property.name; }).length > 0)
                                continue;
                            html += '    ' + property.name;
                            //if (property.isNullable)
                            //    html += '?';
                            if (property.isScalar)
                                html += ': KnockoutObservable&lt;';
                            else
                                html += ': KnockoutObservableArray&lt;';
                            html += property.entityType.shortName;
                            html += '&gt;;' + crlf;
                        }

                        html += '}' + crlf + crlf;
                    }

                    code.innerHTML = html;

                    $(code).addClass('prettyprint');

                    document.body.appendChild(code);

                    script.setAttribute('src', '//google-code-prettify.googlecode.com/svn/loader/run_prettify.js');
                    document.body.appendChild(script);
                })
                .fail(function (reason) {
                    alert(reason);
                });
        });
    </script>
</head>
<body>
</body>
</html> 
```

# jquery - 在 jQuery 中获取 prop('tagName') 问题

> ID：15560190
> 
> 赞同：3
> 
> 时间：2013-03-21T23:40:11.340
> 
> 标签：jquery, find, bookmarklet, prop

我在为工作目的制作小书签时遇到了一些奇怪的设置，遇到了一些麻烦。我需要它能够找到页面上的所有视频嵌入并处理信息以生成要插入到我们的画廊设置中的 JSON 代码。问题是我无法可靠地获取处理数据所需的信息。

首先，我在页面上找到具有正确 itemprop 的所有 div

```
items = $('div[itemprop=video]'); 
```

然后使用 $.each() 我开始处理

```
thumbnail = getThumb($(this).find('*[itemprop=thumbnailUrl]'));
filename =  getFilename($(this).find('*[itemprop=contentUrl]'));
filelocation = getFilelocation( $(this).find('*[itemprop=contentUrl]')); 
```

我需要能够获取 thumbnailURL 和 contentURL 进行处理，

```
 function getFilename(gfn) {
        if(gfn.prop('tagName') == 'META') {
            gfname = gfn.prop('content');
        } else {
            gfname = gfn.attr('href');
        }
        x = gfname.lastIndexOf('/');
        gfname = gfname.substr(x+1);
        y = gfname.lastIndexOf('.');
        gfname = gfname.substr(0,y);
        return gfname;
    } 
```

`.prop('tagName')``undefined`当`itemprops`不在元标记中时不断返回，有人对如何运行此书签有任何想法吗？

[此处提供](http://www.cityofdev.com/apps/bookmarklet/vid2json.html)书签和源代码

编辑：因为有人提到我会继续在这里转储书签代码，去掉多余的 gif

```
 <a href="javascript:(function(){
var jQueryIsReady = function(){  
        if($('#vid2json_container').length < 1)
        {
            container = $(document.createElement('div'));
            container.attr('id','vid2json_container');
            container.css('position','fixed');
            container.css('top','0');
            container.css('left','0');
            container.css('background-color','#222222');
            container.css('padding','2px');
            container.css('border-style','solid');
            container.css('border-width','1px');
            container.css('border-color','#000000');
            container.css('opacity','0.95');
            container.css('z-index','999997');
            container.css('width','500px');
            container.css('height',window.innerHeight);
            container.css('overflow-y','auto');
            container.css('overflow-x','hidden');
            container.hide();

            divider_01 = $(document.createElement('div'));
            divider_01.css('clear','both');

            logo = $(document.createElement('img'));
            logo.attr('src','http://www.cityofdev.com/apps/bookmarklet/vid2json.png');
            logo.css('float','left');

            close_button = $(document.createElement('img'));
            close_button.attr('src','http://www.cityofdev.com/apps/bookmarklet/close_button.jpg');
            close_button.css('float','right');
            close_button.bind('click',function(){
                $('#vid2json_container').hide(500,function(){ 
                    $(this).remove();
                });
            });

            output = $(document.createElement('div'));
            output.attr('id','vid2json_output');
            output.css('color','#ffffff');

            container.append(logo);
            container.append(close_button);
            container.append(divider_01);
            container.append(output);

            $('body').prepend(container.show(500)); 
        }

        destination = $('#vid2json_output');
        destination.html('');

        items = $('div[itemprop=video]');

        output = $(document.createElement('div'));
        output.css('display','block');
        output.css('padding','0 0 10px');

        if(items.length > 0)
        {
            $.each(items,function(index,el){
                title = $(this).find('*[itemprop=name]').attr('content');
                thumbnail = getThumb($(this).find('*[itemprop=thumbnailUrl]'));
                filename =  getFilename($(this).find('*[itemprop=contentUrl]'));
                filelocation = getFilelocation($(this).find('*[itemprop=contentUrl]'));
                description = $(this).find('*[itemprop=description]').attr('content');
                city = getCity();
                citylink = getCitylink();
                category = getCategory();
                categorylink = getCategorylink();
                duration = $(this).find('*[itemprop=duration]').attr('content');

                head = $(document.createElement('span'));
                head.html(title+' -> JSON<br />\n');
                head.css('display','block');
                head.css('font-weight','700');
                head.css('font-size','12px');

                textarea = $(document.createElement('textarea'));
                textarea.css('width','100%');
                textarea.css('height','300px');
                textarea.css('margin','0 0 20px');

                vCode = '';
                vCode += '      {\n';
                vCode += '          &quot;title&quot;: &quot;'+title+'&quot;,\n';
                vCode += '          &quot;thumbnail&quot;: &quot;'+thumbnail+'&quot;,\n';
                vCode += '          &quot;filename&quot;: &quot;'+filename+'&quot;,\n';
                vCode += '          &quot;filelocation&quot;: &quot;'+filelocation+'&quot;,\n';
                vCode += '          &quot;description&quot;: &quot;'+description+'&quot;,\n';
                vCode += '          &quot;city&quot;: &quot;'+city+'&quot;,\n';
                vCode += '          &quot;citylink&quot;: &quot;'+citylink+'&quot;,\n';
                vCode += '          &quot;category&quot;: &quot;'+category+'&quot;,\n';
                vCode += '          &quot;categorylink&quot;: &quot;'+categorylink+'&quot;,\n';
                vCode += '          &quot;duration&quot;: &quot;'+duration+'&quot;,\n';
                vCode += '          &quot;height&quot;: &quot;&quot;,\n';
                vCode += '          &quot;width&quot;: &quot;&quot;\n';
                vCode += '      }\n';

                textarea.val(vCode);

                output.append(head);
                output.append(textarea);
                destination.append(output);
            });
        }else{
            output.html('No Items Found');
            destination.html(output);
        }

        scrollToTop = $(document.createElement('div'));
        scrollToTop.html('Scroll To Top');
        scrollToTop.css('cursor','pointer');
        scrollToTop.bind('click',function(){
            $('#vid2json_container').animate({ scrollTop: 0 },1000);
        });

        footer = $(document.createElement('div'));
        footer.css('font-size','9px');
        footer.css('color','#555555');
        footer.css('padding','5px 0');
        footer.html('VID2JSON bookmarklet programmed by David A Perez');

        destination.append(scrollToTop);
        destination.append(footer);

    };      

    var checkJquery = function(){
        if(typeof jQuery == 'undefined')
        {
            script01 = document.createElement('SCRIPT');
            script01.src = 'http://code.jquery.com/jquery-1.9.1.min.js';
            script01.type = 'text/javascript';
            document.getElementsByTagName('head')[0].appendChild(script01);
        }else{
            clearTimeout(interval);
            jQueryIsReady();
        }
    };

    var interval = setInterval(checkJquery,100);

    function getCategorylink()
    {
        catl = location.href;
        return catl;
    }

    function getCategory()
    {
        cat = $('.cat-header, .category-header').find('span, h1').html();

        return cat.replace(/^( ){1,}|( ){1,}$/gi,'');
    }

    function getCitylink()
    {
        cl = location.href;
        x = cl.indexOf('/',8);
        return cl.substr(0,x);
    }

    function getCity()
    {
        c = $('title').html();
        x = c.lastIndexOf('-');
        c = c.substr(x+1);
        y = c.lastIndexOf(',');
        c = c.substr(0,y);

        return c.replace(/^( ){1,}|( ){1,}$/gi,'');
    }

    function getFilelocation(gfl)
    {
        if(gfl.is('meta'))
        {
            gflocation = gfl.prop('content');
        }else{
            gflocation = gfl.attr('href');
        }

        x = gflocation.lastIndexOf('/');
        gflocation = gflocation.replace(/www/gi,'ww');
        gflocation = gflocation.substr(0,x+1);
        gflocation = gflocation.replace(/[^\/]{1,}$/,'');
        return gflocation.replace(/[\/]{2,}$/,'\/');
    }

    function getFilename(gfn)
    {
        if(gfn.is('meta'))
        {
            gfname = gfn.prop('content');
        }else{
            gfname = gfn.attr('href');
        }
        x = gfname.lastIndexOf('/');
        gfname = gfname.substr(x+1);
        y = gfname.lastIndexOf('.');
        gfname = gfname.substr(0,y);
        return gfname;
    }

    function getThumb(gt)
    {
        alert(gt.is('meta'));
        if(gt.is('meta'))
        {
            gtname = gt.prop('content');
        }else{
            gtname = gt.attr('src');
        }
        num = gtname.lastIndexOf('/');
        return gtname.substr(num+1);
    }        
})();">vid2json</a> 
```

这应该作为书签运行，因此可以在其网站上的任何页面上使用。它在网页加载后手动执行，加载 jQuery，一旦准备好就开始处理。似乎导致问题的部分是

```
 $(this).find('*itemprop=ITEMPROP'); 
```

当 itemprops 在元标记中时它工作正常但是在这种情况下

```
<td class="ad" colspan="2" bgcolor="#000000" style="border:solid #CCCCCC 1px;">
<div itemscope itemtype="http://schema.org/LocalBusiness" style="color:#222222; font-weight: bold; text-align: center; width:580px;">
    <div itemprop="video" itemscope itemtype="http://schema.org/VideoObject">
        <meta itemprop="name" content="P.C.C.S. Dryer Vent Cleaning" />
        <meta itemprop="duration" content="T1M20S" />
        <meta itemprop="description" content="Fort Worth, TX dryer vent cleaning service." />
        <meta itemprop="height" content="580" />
        <meta itemprop="width" content="326" />
        <a href="http://204.145.110.12/thecityoffortworth.com/videos/pccs-dryer-vent-cleaning.mp4" itemprop="contentURL" style="display:block;width:580px; height:326px; border:0px; margin-bottom:104px;" id="pccs">
        <img src="pccs-dryer-vent-cleaning.png" alt="P.C.C.S. Dryer Vent Cleaning" width="580" height="430" border="0" itemprop="thumbnailURL" />
        </a>
    </div>
    <a href="http://www.fortworthsweep.com" class="style5" target="_blank" rel="nofollow" itemprop="url" style="color:#ffffff">www.fortworthsweep.com</a>
</div> 
```

它返回 0 个项目。我试过 .find('meta[itemprop=contentURL],a[itemprop=contentURL]') 但也返回 0 个项目。劫持确实看起来像是一个标签，有什么想法吗？

如果我做错了什么，我也很抱歉，这是我第一次在 Stackoverflow 上发帖，我主要是自学 Javascript 和 jQuery。我正在尽我所能了解什么是可能的，我可以做些什么来提供帮助。感谢您的耐心和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:46:43.040

`.prop('tagName')`如您在[此 jsFiddle](http://jsfiddle.net/jfriend00/UvrqY/)中所见，工作的一般概念很好。问题更可能是您的 jQuery 对象为空（例如，选择器没有找到任何东西）。要查看这是否是您的问题，请检查`.length`jQuery 对象上的属性。

此外，您没有向我们展示此代码的整体上下文。如果它在页面被解析之前执行，那么这可能是您的 jQuery 对象为空的另一个原因。

根据[jQuery 文档`.prop()`](http://api.jquery.com/prop/)：

> 它为尚未设置的属性的值返回 undefined，或者如果匹配的集合没有元素。

由于`tagName`始终设置该属性，因此更可能的问题是您的 jQuery 对象为空。

在您提供的链接页面中，我找不到在您的任何代码中设置断点的方法，所以我什至不确定它是否被调用/执行。这似乎是由于您将大量代码放入`javascript:`链接而不仅仅是调用函数造成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:54:38.360

jQuery还有另一种方法来测试一个元素是否是特定的标签类型，`.is()`方法：

```
if (gsn.is("meta")) 
```

不知道为什么`.prop`调用未定义，除非 gfn 为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T01:24:33.430

**找到解决方案！**

花了很长的时间来强制它检查所有内容，选择器和 .find() 似乎没有得到我想要的结果*（可能是因为大小写不一致）*但我设法让它终于工作了！

```
<a href="javascript:(function(){
var jQueryIsReady = function(){  
        if($('#vid2json_container').length < 1)
        {
            container = $(document.createElement('div'));
            container.attr('id','vid2json_container');
            container.css('position','fixed');
            container.css('top','0');
            container.css('left','0');
            container.css('background-color','#222222');
            container.css('padding','2px');
            container.css('border-style','solid');
            container.css('border-width','1px');
            container.css('border-color','#000000');
            container.css('opacity','0.95');
            container.css('z-index','999997');
            container.css('width','500px');
            container.css('height',window.innerHeight);
            container.css('overflow-y','auto');
            container.css('overflow-x','hidden');
            container.hide();

            divider_01 = $(document.createElement('div'));
            divider_01.css('clear','both');
            divider_02 = $(document.createElement('div'));
            divider_02.css('clear','both');

            logo = $(document.createElement('img'));
            logo.attr('src','http://www.cityofdev.com/apps/bookmarklet/vid2json.png');
            logo.css('float','left');

            close_button = $(document.createElement('img'));
            close_button.attr('src','http://www.cityofdev.com/apps/bookmarklet/close_button.jpg');
            close_button.css('float','right');
            close_button.bind('click',function(){
                $('#vid2json_container').hide(500,function(){ 
                    $(this).remove();
                });
            });

            nak = $(document.createElement('img'));
            nak.attr('id','naknak');
            nak.attr('src', 'http://www.cityofdev.com/apps/bookmarklet/naknak.gif');
            nak.css('float','left');
            nak.css('width','143px');
            nak.css('height','119px');
            nak.css('z-index','99998');

            salamander = $(document.createElement('img'));
            salamander.attr('id','salamander');
            salamander.attr('src', 'http://www.cityofdev.com/apps/bookmarklet/salamander.gif');
            salamander.css('float','right');
            salamander.css('width','112px');
            salamander.css('height','117px');
            salamander.css('z-index','99998');

            output = $(document.createElement('div'));
            output.attr('id','vid2json_output');
            output.css('color','#ffffff');

            container.append(logo);
            container.append(close_button);
            container.append(divider_01);
            container.append(nak);
            container.append(salamander);
            container.append(divider_02);
            container.append(output);

            $('body').prepend(container.show(500)); 
        }

        destination = $('#vid2json_output');
        destination.html('');

        items = $('div[itemprop=video]');

        output = $(document.createElement('div'));
        output.css('display','block');
        output.css('padding','0 0 10px');

        if(items.length > 0)
        {
            $.each(items,function(index,el){
                children = $(el).find('*');
                $.each(children, function(i,ele){
                    n = $(ele);
                    if(n.attr('itemprop') !== undefined)
                    {
                        switch(n.attr('itemprop').toLowerCase())
                        {
                            case 'name':
                                title = n.attr('content');
                            break;

                            case 'contenturl':
                                filename = getFilename(n);
                                filelocation = getFilelocation(n);
                            break;

                            case 'thumbnailurl':
                                thumbnail = getThumb(n);
                            break;

                            case 'description':
                                description = n.attr('content');
                            break;

                            case 'duration':
                                duration = n.attr('content');
                            break;
                            default:
                            break;
                        }                        
                    }

                });
                city = getCity();
                citylink = getCitylink();
                category = getCategory();
                categorylink = getCategorylink();

                head = $(document.createElement('span'));
                head.html(title+' -> JSON<br />\n');
                head.css('display','block');
                head.css('font-weight','700');
                head.css('font-size','12px');

                textarea = $(document.createElement('textarea'));
                textarea.css('width','100%');
                textarea.css('height','300px');
                textarea.css('margin','0 0 20px');

                vCode = '';
                vCode += '      {\n';
                vCode += '          &quot;title&quot;: &quot;'+title+'&quot;,\n';
                vCode += '          &quot;thumbnail&quot;: &quot;'+thumbnail+'&quot;,\n';
                vCode += '          &quot;filename&quot;: &quot;'+filename+'&quot;,\n';
                vCode += '          &quot;filelocation&quot;: &quot;'+filelocation+'&quot;,\n';
                vCode += '          &quot;description&quot;: &quot;'+description+'&quot;,\n';
                vCode += '          &quot;city&quot;: &quot;'+city+'&quot;,\n';
                vCode += '          &quot;citylink&quot;: &quot;'+citylink+'&quot;,\n';
                vCode += '          &quot;category&quot;: &quot;'+category+'&quot;,\n';
                vCode += '          &quot;categorylink&quot;: &quot;'+categorylink+'&quot;,\n';
                vCode += '          &quot;duration&quot;: &quot;'+duration+'&quot;,\n';
                vCode += '          &quot;height&quot;: &quot;&quot;,\n';
                vCode += '          &quot;width&quot;: &quot;&quot;\n';
                vCode += '      }\n';

                textarea.val(vCode);

                output.append(head);
                output.append(textarea);
                destination.append(output);
            });
        }else{
            output.html('No Items Found');
            destination.html(output);
        }

        scrollToTop = $(document.createElement('div'));
        scrollToTop.html('Scroll To Top');
        scrollToTop.css('cursor','pointer');
        scrollToTop.bind('click',function(){
            $('#vid2json_container').animate({ scrollTop: 0 },1000);
        });

        footer = $(document.createElement('div'));
        footer.css('font-size','9px');
        footer.css('color','#555555');
        footer.css('padding','5px 0');
        footer.html('VID2JSON bookmarklet programmed by David A Perez');

        destination.append(scrollToTop);
        destination.append(footer);

    };      

    var checkJquery = function(){
        if(typeof jQuery == 'undefined')
        {
            script01 = document.createElement('SCRIPT');
            script01.src = 'http://code.jquery.com/jquery-1.9.1.min.js';
            script01.type = 'text/javascript';
            document.getElementsByTagName('head')[0].appendChild(script01);
        }else{
            clearTimeout(interval);
            jQueryIsReady();
        }
    };

    var interval = setInterval(checkJquery,100);

    function getCategorylink()
    {
        catl = location.href;
        return catl;
    }

    function getCategory()
    {
        cat = $('.cat-header, .category-header').find('span, h1').html();

        return cat.replace(/^( ){1,}|( ){1,}$/gi,'');
    }

    function getCitylink()
    {
        cl = location.href;
        x = cl.indexOf('/',8);
        return cl.substr(0,x);
    }

    function getCity()
    {
        c = $('title').html();
        x = c.lastIndexOf('-');
        c = c.substr(x+1);
        y = c.lastIndexOf(',');
        c = c.substr(0,y);

        return c.replace(/^( ){1,}|( ){1,}$/gi,'');
    }

    function getFilelocation(gfl)
    {
        if(gfl.length<1){return 'contentURL not found'+gfl.length;}
        if(gfl.is('meta'))
        {
            gflocation = gfl.prop('content');
        }else{
            gflocation = gfl.attr('href');
        }

        x = gflocation.lastIndexOf('/');
        gflocation = gflocation.replace(/www/gi,'ww');
        gflocation = gflocation.substr(0,x+1);
        gflocation = gflocation.replace(/[^\/]{1,}$/,'');
        return gflocation.replace(/[\/]{2,}$/,'\/');
    }

    function getFilename(gfn)
    {
        if(gfn.length<1){return 'contentURL not found'+gfn.length;}
        if(gfn.is('meta'))
        {
            gfname = gfn.prop('content');
        }else{
            gfname = gfn.attr('href');
        }
        x = gfname.lastIndexOf('/');
        gfname = gfname.substr(x+1);
        y = gfname.lastIndexOf('.');
        gfname = gfname.substr(0,y);
        return gfname;
    }

    function getThumb(gt)
    {
        if(gt.length<1){return 'thumbnailURL not found'+gt.length;}
        if(gt.is('meta'))
        {
            gtname = gt.prop('content');
        }else{
            gtname = gt.attr('src');
        }
        num = gtname.lastIndexOf('/');
        return gtname.substr(num+1);
    }        
})();">vid2json</a> 
```

我遇到的问题的解决方案

```
$.each(children, function(i,ele){
                    n = $(ele);
                    if(n.attr('itemprop') !== undefined)
                    {
                        switch(n.attr('itemprop').toLowerCase())
                        {
                            case 'name':
                                title = n.attr('content');
                            break;

                            case 'contenturl':
                                filename = getFilename(n);
                                filelocation = getFilelocation(n);
                            break;

                            case 'thumbnailurl':
                                thumbnail = getThumb(n);
                            break;

                            case 'description':
                                description = n.attr('content');
                            break;

                            case 'duration':
                                duration = n.attr('content');
                            break;
                            default:
                            break;
                        }                        
                    }
}); 
```

可能有更有效的方法来解决这个问题，但它似乎足够可靠地完成这项工作。我可能会在遇到情况时添加更多内容。感谢您的建议，它帮助我找到了解决方案！

# javascript - 在 Tinymce 上触发一个关键事件

> ID：15560191
> 
> 赞同：1
> 
> 时间：2013-03-21T23:40:21.287
> 
> 标签：javascript, javascript-events

我有以下 Tinymce 配置设置：

```
 //set up a new editor function    
    setup : function(ed) { 
    //peform this action every time a key is pressed
    ed.onKeyUp.add(function(ed, e) { 
    //setting our max character limit
    tinymax = 10;
    //grabbing the length of the curent editors content
    content = ed.getContent();

       var content_text = $(content).text();
       var tinylen = content_text.length;

    //if the user has exceeded the max, trigger enter and create a new paragraph
    if (tinylen>tinymax){
var e = jQuery.Event("keydown");
e.which = 13; // Enter keyCode
$(".content").trigger(e);           
}
} 
```

不起作用的是触发事件。我在这里做错了什么？顺便说一下 (".content") 是文本区域的名称，我也试过 (ed) 并没有奏效。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:56:32.520

我会尝试回答。您触发事件的方式是正确的。我在这里有一个例子可以确认它有效。[http://jsfiddle.net/3WsJE/](http://jsfiddle.net/3WsJE/)

当使用 jQuery 触发“return”键时，该键实际上并没有输入到 textarea 的值中。

我不知道这是否是你想要的，但如果你打算触发 Enter 键来简单地插入换行符，你可以试试这个解决方案。

```
$(".content").val( $(".content").val()+'\n'); 
```

# variables - 将 var 返回到调用批处理文件

> ID：15560198
> 
> 赞同：1
> 
> 时间：2013-03-21T23:41:13.053
> 
> 标签：variables, batch-file, return, env

我启动一个批处理文件来处理一些代码，一次它调用另一个批处理文件并且应该返回一个变量，但是手册页中解释的关于 local/endlocal 的方法似乎在这里不起作用，请问我做错了什么？

第一个批处理文件：

```
@ECHO OFF
setlocal
call secondbatchfile.bat xyz
echo. [%val1%] 
```

第二个批处理文件：

```
@if (@a==@b) @end /*                        <== btw what does this code do ???
@echo off
setlocal enabledelayedexpansion
set "URL=%~1"
set bla bla ...
do bla bla ...

for /f "delims=" %%I in ('cscript /nologo /e:jscript "%~f0" "%URL%"') do (

rem trim whitespace from beginning and end of line
for /f "tokens=*" %%x in ("%%~I") do set "line=%%x"

rem test that trimmed line matches "variable=number"
echo !line! | findstr /i "^to[a-z]*=[0-9]*" >NUL && (

rem test was successful.  Scrape number.
for /f "tokens=2 delims==" %%x in ("%%I") do set "val1=%%x"

echo !val1!                            <== this works
ENDLOCAL & SET top=%val1%              <== this not

)
) 
```

这导致：

```
c:\test>firstbatchfile.bat
123456789                                   <== this works
 []                                         <== this not 
```

我尝试了不同的 return var 语法，例如`!val1!`or `%%val1`- 没有奏效。我错过了什么？

更新： [关于网站上的其他示例，](https://stackoverflow.com/questions/11481150/batch-file-call-sub-batch-file-to-pass-n-paramenters-and-return-without-use-of-f?rq=1)我尝试过：

```
call seconbatchfile.bat xyz ret1
echo. [%2%] [%ret1%] 
```

并在第二个文件更改：

```
rem ENDLOCAL & SET %2=!val1! 
```

也不行吗？

解决方案：

第二个批处理文件可以是来自 rojo 读取整个网站的原始脚本，我确实保留了修剪和匹配语法行以仅返回相关匹配：

```
for /f "delims=" %%I in ('cscript /nologo /e:jscript "%~f0" "%URL%"') do (

rem trim whitespace from beginning and end of line
for /f "tokens=*" %%x in ("%%~I") do set "line=%%x"

rem test that trimmed line matches "variable=number"
echo !line! | findstr /i "^[a-z]*=[0-9]*" >NUL && (

echo(%%I

)
) 
```

第一个调用它的批处理文件将搜索两个所需的参数，如下所示：

```
@ECHO OFF
setlocal
for /f "delims=" %%I in ('secondbatchfile.bat "http://xyz"') do (

echo %%I | findstr /i "top" >NUL && (

for /f "tokens=2 delims==" %%x in ("%%I") do (
set "updir=%%x"
)
)
echo %%I | findstr /i "low" >NUL && (

for /f "tokens=2 delims==" %%x in ("%%I") do (
set "lowdir=%%x"
)
)
)

echo.[%updir%]
echo.[%lowdir%] 
```

非常感谢 rojo 的精彩代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:13:07.963

最简单的解决方案是让您的第二个批处理文件回显其结果，并使用`for`第一个批处理文件中的循环捕获它。取消将`setlocal`环境变量传递回调用脚本是一件麻烦事。

first.bat:

```
@echo off
setlocal

for %%x in (
    "http://10.0.0.1/foo/vars.txt"
    "http://10.0.0.1/bar/vars.txt"
    "http://10.0.0.1/baz/vars.txt"
    "http://10.0.0.1/qux/vars.txt"
    "http://10.0.0.1/corge/vars.txt"
) do (
    for /f "delims=" %%I in ('fetchvalue.bat "%%~x"') do (
        set "val1=%%I"
    )
    echo.[%val1%]
) 
```

fetchvalue.bat：

```
@if (@a==@b) @end /*

:: fetchvalue.bat <url>
:: output the "value" part of variable=value from a text file served by http

@echo off
setlocal
if "%~1"=="" goto usage
echo "%~1" | findstr /i "https*://" >NUL || goto usage

set "URL=%~1"

for /f "delims=" %%I in ('cscript /nologo /e:jscript "%~f0" "%URL%"') do (

    rem trim whitespace from beginning and end of line
    for /f "tokens=*" %%x in ("%%~I") do set "line=%%x"

    rem test that trimmed line matches "variable=number"
    echo !line! | findstr /i "^to[a-z]*=[0-9]*" >NUL && (

        rem test was successful.  Scrape number.
        for /f "tokens=2 delims==" %%x in ("%%I") do echo(%%x
    )
)

goto :EOF

:usage
echo Usage: %~nx0 URL
echo     for example: %~nx0 http://www.google.com/
echo;
echo The URL must be fully qualified, including the http:// or https://
goto :EOF

JScript */
var x=new ActiveXObject("Microsoft.XMLHTTP");
x.open("GET",WSH.Arguments(0),true);
x.setRequestHeader('User-Agent','XMLHTTP/1.0');
x.send('');
while (x.readyState!=4) {WSH.Sleep(50)};
WSH.Echo(x.responseText); 
```

* * *

这是一个示例 first.bat，它将对获取的值进行排序，设置`low`为最低值，然后设置`high`为最高值。

```
@echo off
setlocal enabledelayedexpansion

for %%x in (
    "http://10.0.0.1/foo/vars.txt"
    "http://10.0.0.1/bar/vars.txt"
    "http://10.0.0.1/baz/vars.txt"
    "http://10.0.0.1/qux/vars.txt"
    "http://10.0.0.1/corge/vars.txt"
) do (
    set low=
    for /f "delims=" %%I in ('fetchvalue.bat "%%~x" ^| sort') do (
        if not defined low set "low=%%I"
        set "high=%%I"
    )
    echo low: !low!
    echo high: !high!
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:57:24.120

您的内部批处理文件以设置名为`top`:的环境变量结束`set top=%val1%`。您需要将其更改为`set val1=%val1%`.

```
...
echo !val1!
ENDLOCAL & SET val1=%val1% 
```

# jquery - 当多个嵌套调用的一个ajax失败时，如何处理ajax失败；使用 $.when 方法

> ID：15560204
> 
> 赞同：2
> 
> 时间：2013-03-21T23:42:15.560
> 
> 标签：jquery

我有多个 ajax 请求，我想按顺序执行，所以我使用 $.when jQuery 方法嵌套它们。

```
$.when(
  $.ajax({
    url : url,
    type: 'GET',
    dataType : 'json'
   }),
  $.ajax({
    url : url,
    type: 'GET',
    dataType : 'json'
  }),
 $.ajax({
   url : url,
   type: 'GET',
   dataType : 'json'
})

).then(doThis); 
```

现在的问题是，我有第二个 ajax 失败，这破坏了一切。

我想知道，即使任何呼叫失败，我们如何才能继续序列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:54:03.040

该`when().then()`概念仅在该`when()`部分中的所有内容都成功时才有效。如果要一个接一个地执行 AJAX 调用，则需要执行以下操作：

```
$.ajax({
    url : url,
    type: 'GET',
    dataType : 'json',
    error: function() { alert("Error in call #1") },
    complete: function() {
        $.ajax({
            url : url,
            type: 'GET',
            dataType : 'json',
            error: function() { alert("Error in call #2") },
            complete: function() {
                $.ajax({
                    url : url,
                    type: 'GET',
                    dataType : 'json'
                    error: function() { alert("Error in call #3") },
                })
            }
        })
    }
}) 
```

编辑：我更新了上面的答案，包括一种使用`error`回调处理 AJAX 调用失败的方法。

# css - 在div中添加更多文本时如何将2张图片并排放置而不移动？

> ID：15560205
> 
> 赞同：0
> 
> 时间：2013-03-21T23:42:15.993
> 
> 标签：css, html, row, image

我刚开始设计一个小网页来展示一些设计。
这是**一个有 2 列的页面，每列都有一张图片和一些文字。**

我现在遇到的问题：当我向一列添加更多文本时，另一列的图片会移动。

**看看我的小提琴：http:** [//jsfiddle.net/JannikS/tMY57](http://jsfiddle.net/JannikS/tMY57)

我的 HTML 标记：

```
 <div id="designrow"> 
      <div class="design"> 
            <img src="http://www.webdesign-is-art.com/wp-content/uploads/2008/05/goodbytes-webdesign.jpg" />          
            <h3>Title </h3> 
            <p>Short description of our design..</p>             
      </div>     
      <div class="design"> 
            <img src="http://www.webdesign-is-art.com/wp-content/uploads/2008/05/goodbytes-webdesign.jpg" />          
            <h3>Title </h3> 
          <p>Short description of our design..<br /> but with some more text!</p>             
      </div>   
</div> 
```

和 CSS：

```
.designrow { 
 float: left;   }

.design {   
 width: 300px; 
 margin-left: 20px; 
 margin-right: 20px; 
 margin-bottom: 20px; 
 display: inline-block;
  }  

.design img{ 
 width: 100%; 
 height: 100%;  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:44:29.130

你给你的专栏`display:inline-block`，删除它，`float:left`而不是

继承人的小提琴：http: [//jsfiddle.net/tMY57/3/](http://jsfiddle.net/tMY57/3/)

# android - 单击按钮，该按钮等待活动上的第二个按钮被按下。游戏板。如何实现？

> ID：15560206
> 
> 赞同：0
> 
> 时间：2013-03-21T23:42:37.030
> 
> 标签：android, button, imagebutton

我不确定如何在标题中简要解释我的问题，所以请原谅我，因为我直到现在才发布问题。对于初学者来说，我是 Android/Java 的新手，因为到目前为止我使用的主要语言是 C++。我的问题是我有一个游戏板布局（类似于跳棋/国际象棋）。当轮到用户时，他们要在棋盘上点击他们想要移动的棋子，然后点击他们想要移动到的空白位置。如何实现？到目前为止，我已经实现了 onClickListeners，它从不依赖 Activity 中的另一个按钮在之后被点击并等待用户这样做。

**目前关于我的项目的简要信息（不确定是否需要）：**

我目前正在使用一个 ImageButtons 数组（大小为 36）和一个二维整数数组来保存每个按钮的信息，因为它们以 6 X 6 的方式显示在 GridLayout 中。在我的 MainActivity 类中，我实现了 OnClickListener 并在 onClick() 中为每个按钮 ID 创建了一个 switch 语句。

我不确定我的代码需要多少更多信息才能获得帮助，或者它是否完全不相关。在选择询问一无所获之前，我尝试在互联网上查找。尽管我没有正确表达我的问题，但总是有可能的。先谢谢大家了！！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:46:43.767

没有任何代码，很难说你在做什么错/对。但是，如果您将图像存储在一个`Array`然后当他们单击一个`image`可以放入一个变量时，该变量用于放置`View`他们接下来单击的那个。如果您有更准确的问题，请发布您尝试过的相关代码和错误消息（如果有）。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:58:33.460

在用户单击一个片段后，将该信息存储在一个成员变量中，例如当前片段，然后在第二次单击时检查前一个是否不为空，当前单击的空间为空，并通过发布到可运行的实现来启动动画。这是简单的逻辑部分。你到底在哪里有问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T00:14:29.633

要优化代码以更改图像，您可以在 imageview 上自定义动画。您可以使用动画更改图像的位置，而无需创建或存储图像。（如果你经常使用图像位图，你很有可能会遇到 OutOfMemory 异常，这很容易在高端手机上发生

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T00:30:29.167

## 如何移动按钮和更改按钮图像

我会`Button`在每个`GridView`位置上放一个单曲。然后，我会使用`button.setBackground()`and`button.setVisibility()`来显示和隐藏带有各种图像的按钮。这样，按钮看起来会移动，但实际上您只是在显示不同的按钮。

我推荐这样做，因为更改按钮的可见性和图像属性比实际移动按钮更容易，尽管这两种方法都是可能的。

您将维护一个图像[n] 的一维数组和一个按钮[6,6] 的二维数组。

例如，假设您要将图像 [5] 从网格位置 (1,2) 移动到位置 (3,4)：

```
// Hide the button at (1,2);
button[1,2].setVisibility(Button.INVISIBLE);

// Display the button at (3,4) with image #5.
button[3,4].setBackground(image[5]);
button[3,4].setVisibility(Button.VISIBLE); 
```

此外，如果您的按钮图像存储在您的资源中，您可以有效地使用`button.setBackgroundResource(R.drawable.image-5-id);`

* * *

上面的说明讨论了如何移动 Button，但现在如何触发一个 Button 被移动，然后触发 Button 移动到的位置。

为此，您必须定义两种状态，例如：

```
private final static int STATE_PICK_BUTTON = 0;
private final static int STATE_PICK_LOCATION = 1;
private int state; 
```

初始化`state = STATE_PICK_BUTTON;`

*   当系统处于第一种状态`STATE_PICK_BUTTON`时，您的函数中标识的所有按钮按下都会`onClick()`记住要从中移动的网格位置，并且在某些情况下会将系统转换到第二种状态`STATE_PICK_LOCATION`：
*   当系统处于第二状态`STATE_PICK_LOCATION`时，所有的按钮按下实际上将按钮从记忆的网格位置移动到该按钮按下的网格位置。
*   当然，您必须进行各种错误检查，以确保在触发状态转换之前允许您移动按钮。

* * *

最后，上述建议可能行不通，因为可能无法单击不可见的按钮。如果是这种情况，不要更改空网格位置中按钮的可见性，而是保留所有按钮`Button.VISIBLE`并为代表空网格空间的按钮使用完全透明的按钮图像。

# c++ - 什么是“System.Runtime.InteropServices.SEHException”类型的未处理异常

> ID：15560208
> 
> 赞同：0
> 
> 时间：2013-03-21T23:42:48.450
> 
> 标签：c++

当我编译这个时，它给了我这个消息：

未知模块中发生了“System.Runtime.InteropServices.SEHException”类型的未处理异常。

附加信息：外部组件已引发异常。

谁能解释这意味着什么？我很确定代码是正确的。谢谢。

```
#include <string>
#include <iostream>
#include <cassert>

using namespace std;

class List;
class Iterator;

class Node
{
public:
/*
    Constructs a node with a given data balue.
    @param s the data to store in this node
    **/
Node(string s);
private:
string data;
Node* previous;
Node* next;
friend class List;
friend class Iterator;

};

class List 
{
public:
/** 
    Constructs an empty list.
    **/
List();
/** 
    Appends an elemetn to the list.
    @param data the value to append
    **/
void push_back(string data);
/**
    Inserts an elemtn into the list.
    @param iter the postion before which to insert
    @param s the value to append
    **/
void insert(Iterator iter, string s);
/**
    Removes an elemtn from the list.
    @param iter the postion to remove
    @param return an iterator pointing to the elemtn after the erased elemtn
    **/
Iterator erase(Iterator iter);
/**
    Gets the beginning position of the list.
    @return an ietartor pointing to the beginning of the list
    **/
Iterator begin();
/**
    Gets the past-the-end position of the list.
    @return an iterator pointing past the end of thel ist
    **/
Iterator end();

private:
Node* first;
Node* last;
friend class Iterator;
};

class Iterator
{
public:
/**
    Constructs an iterator that does not point into any list.
    **/
Iterator();
/**
    Looks up the value at a position.
    @return the value of the node to which the iterator pionts
    **/
string get() const;
/**
    Advances the iterator to the next node.
    **/
void next();
/**
    Moves the iterator to the previous node.
    **/
void previous();
/**
    Compares two iterators.
    @param b the iterator to compare with this iterator
    @return true if this iterator and b are equal
    **/
bool equals(Iterator b) const;
private:
Node* position;
List* container;
friend class List;
};

Node::Node(string s)
{
data = s;
previous= NULL;
next = NULL;
}

List::List()
{
first = NULL;
last = NULL;
}

void List::push_back(string data)
{
Node* new_node = new Node(data);
if (last == NULL) // List is empty
{
    first = new_node;
    last = new_node;

}
else 
{
    new_node->previous = last;
    last->next = new_node;
    last = new_node;
}
 }

void List::insert(Iterator iter, string s)
{
if (iter.position == NULL)
{
    push_back(s);
    return;
}

Node* after = iter.position;
Node* before = after->previous;
Node* new_node = new Node(s);
new_node->previous = before;
new_node->next = after;
after->previous = new_node;
if (before == NULL) // INSERT AT BEGINNING
    first = new_node;
else 
    before->next = new_node;
}

Iterator List::erase(Iterator iter)
{
assert(iter.position != NULL);
Node* remove = iter.position;
Node* before = remove->previous;
Node* after = remove->next;
if (remove == last)
    last = before;
else
    after->previous = before;
delete remove;
Iterator r;
r.position = after;
r.container = this;
return r;
}

Iterator List::begin()
{
Iterator iter; 
    iter.position = first;
iter.position = first;
iter.container = this;
return iter;
}

Iterator List::end()
{
Iterator iter;
iter.position = NULL;
iter.container = this;
return iter;
}

Iterator::Iterator()
{
position = NULL;
container = NULL;
}

string Iterator::get() const
{
assert(position != NULL);
return position->data;
}

void Iterator::next()
{
assert(position != NULL);
position = position->next;
}

void Iterator::previous()
{
assert(position != container->first);
if (position == NULL)
    position = container->last;
else 
    position = position->previous;

}

bool Iterator::equals(Iterator b) const
{
return position == b.position;
}

int main()
{
List staff;

staff.push_back("Tom");
staff.push_back("Dick");
staff.push_back("Harry");
staff.push_back("Juliet");

// Add a value in fourth place

Iterator pos;
pos = staff.begin();
pos.next();
pos.next();
pos.next();

staff.insert(pos, "Romeo");

// Remove the staff in the 2nd place.

pos = staff.begin();
pos.next();

staff.erase(pos);

//Print all values

for (pos = staff.begin(); !pos.equals(staff.end()); pos.next())
    cout << pos.get() << "\n";

system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:53:33.497

您在擦除功能中需要此位：

```
 if (remove == first)
    first = after;
  else
    before->next = after; 
```

# directshow - C# 和 VB.NET 中的 SampleGrabber BufferLen 大小变化

> ID：15560220
> 
> 赞同：0
> 
> 时间：2013-03-21T23:44:40.667
> 
> 标签：directshow, samplegrabber

如果从不同的编程语言调用，是否有任何理由说明*未设置媒体子类型的 ISampleGrabberCB.BufferCB 中 BufferLen 的大小应该有所不同？*

我有一个 C# 应用程序和一个 VB.NET 应用程序，它们都在关闭时钟并且在 SampleGrabber 上没有设置媒体子类型的情况下尽快运行图表。代码是相同的。在 C# 应用程序中，每次样本通过采集器时，BufferLen 的大小都是不同的（如您所料）。在 VB.NET 应用程序中，BufferLen 是一个常量固定值。

例如，当通过图形运行 1280 x 720 视频时，VB 代码中 BufferLen 的大小*始终*为1,382,400（这是有道理的，因为视频解码器上的输出引脚显示 12 位 NV12 格式）。在 C# 代码中，BufferLen 的大小在低值和高值之间变化很大。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:17:40.430

可变缓冲区长度表示您正在获取压缩视频。我无法解释为什么会这样。一个版本是否以管理员身份运行？还是64位？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:35:16.670

问题解决了。图表并不完全相同，实际上：在 C# 应用程序中，AVI 拆分器直接连接到 SampleGrabber；在 VB 应用程序中，一个意想不到的视频解码器位于两者之间。事实证明，VB 代码在将图形拆下并重建之前渲染图形，这意味着媒体子类型已经设置。感谢你们俩的帮助。

# mysql - 从两个表和最新条目中选择

> ID：15560221
> 
> 赞同：0
> 
> 时间：2013-03-21T23:44:41.850
> 
> 标签：mysql, sql, greatest-n-per-group

我一直在处理从 MySQL 调用并获得所需内容的问题。我有两个名为项目和条目的表，我想做的是获取最新的时间戳条目。SQL查询如下：

```
SELECT 
    projects.ProjectLogo, projects.ProjectLink, projects.ProjectDescription, 
    entries.EntryNum, entries.Votes, entries.Views, entries.Update 
FROM 
    projects 
    LEFT JOIN entries 
        ON projects.ProjectID = entries.ProjectID 
        AND projects.Media = 'image' 
        AND projects.Type = 'fan-art' 
GROUP BY 
    projects.ProjectID 
ORDER BY 
    entries.Update DESC 
```

问题是我得到了结果但不是最新的条目，我使用了 MAX(entries.Update) 但它不起作用。有什么建议么？为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:49:37.890

您可以使用子查询来获取`Update`每个`ProjectID`on table的最新信息`entries`。子查询的结果然后在两个连接语句上重新连接，前提是它将在两列上匹配：`ProjectID`和`Update`。

```
SELECT  projects.ProjectLogo, 
        projects.ProjectLink, 
        projects.ProjectDescription, 
        entries.EntryNum, 
        entries.Votes, 
        entries.Views, 
        entries.Update 
FROM    projects 
        INNER JOIN entries 
            ON  projects.ProjectID = entries.ProjectID 
        INNER JOIN  
        (
            SELECT  a.ProjectID, MAX(a.Update) max_val
            FROM    entries a
            GROUP   BY a.ProjectID
        ) b ON  b.ProjectID = entries.ProjectID AND
                b.max_val = entries.Update
WHERE   projects.Media = 'image' AND 
        projects.Type = 'fan-art' 
ORDER   BY entries.Update DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:49:48.353

您必须将加入限制为仅具有最新输入日期的记录（行）。如果条目中的 pk 是按时间顺序增加的，则可以使用它。

```
Select p.ProjectLogo, p.ProjectLink, p.ProjectDescription, 
      e.EntryNum, e.Votes, e.Views, e.Update 
From projects p 
   Left Join entries e 
     On e.EntryId =
        (Select(Max(entryId) from entries
         where ProjectID = p.ProjectID)
Where p.Media = 'image' 
    And p.Type = 'fan-art' 
Group By p.ProjectID 
Order By e.Update Desc 
```

否则，您需要一个双嵌套子查询

```
Select p.ProjectLogo, p.ProjectLink, p.ProjectDescription, 
      e.EntryNum, e.Votes, e.Views, e.Update 
From projects p 
   Left Join entries e 
     On e.EntryId =
        (Select entryId from entries
         where ProjectID = p.ProjectID
            And update =
                (Select max(update) From entries
                 Where ProjectID = p.ProjectID))                        
where p.Media = 'image' 
    And p.Type = 'fan-art' 
Group By p.ProjectID 
Order By e.Update Desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T23:51:12.893

尝试使用子查询来获取最新条目：

```
select projectId, max(`update`) as lastUpdate
from entries
group by projectId 
```

现在，使用这个子查询来获得你需要的东西：

```
select ...
from 
    projects as p
    inner join entries as e on p.projectId=e.projectId
    inner join (
        select projectId, max(`update`) as lastUpdate
        from entries
        group by projectId) as me on e.`update`=me.lastUpdate 
```

希望这可以帮助你

# android - android：无法在设备“设备”上安装 .apk：超时

> ID：15560225
> 
> 赞同：5
> 
> 时间：2013-03-21T23:45:11.347
> 
> 标签：android, installation, adb

几天前，我在尝试在 Galaxy S2 上安装 .apk 时遇到了麻烦。我选择我的手机作为目标，单击确定，在控制台中出现以下错误：

> 无法在设备“设备号”上安装 AvatarRun.apk：超时启动已取消！

无需更改代码中的任何内容并再次运行，我也会收到错误消息：

> 无法在设备“设备号”上安装 AvatarRun.apk：找不到设备 com.android.ddmlib.InstallException：找不到设备启动已取消！

我尝试打开命令窗口并导航到 android-sdk\platform-tools 并运行：

> adb kill-server adb start-server

这并没有解决问题。

这似乎只是一个巧合，但在多次失败后，我将 Manifest 中的最小 SDK 从 10 更改为 7，并在下一次尝试时加载了 .apk，但此后一直间歇性地工作并产生相同的错误。

谁能建议一种方法来查找导致此错误的原因？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T19:19:44.893

在尝试了上述修复后，我最终安装并重新安装了 Galaxy 驱动程序。这没有帮助。最终（到目前为止）起作用的是切换 Galaxy 插入的 USB 端口。一旦我这样做了，一切都会正常运行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-09T20:50:20.090

听起来可能很荒谬，我尝试了[Android 错误中建议的所有方法：无法在设备上安装 *.apk *：超时](https://stackoverflow.com/questions/4775603/android-error-failed-to-install-apk-on-device-timeout)

除了拔下当前的电缆并更换新的电缆外，它们都不适合我。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-07T21:59:31.767

有多种解决方案：

1.  尝试更改 ADB 连接超时。默认为 5000；您应该将其更改为 10000 毫秒左右。

    *窗口 -> 首选项 -> Android -> DDMS -> ADB 连接超时（毫秒）*

2.  尝试拔下并重新插入电缆。似乎有时 Eclipse 会失去与 Device 的连接。有时您只需要插入其他 USB 端口即可。

3.  您可能需要终止 ADB 进程并重新启动它。

    `adb kill-server`进而 `adb start-server`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-11T06:56:07.610

对我来说，解决方案是从手机中卸载旧的 apk。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-09T21:41:48.440

如果计算机速度不够快，通常会出现此问题。所以，如果你去任务管理器，你会看到性能。如果您在运行 android 应用程序的同时正在观看视频或运行其他程序，请关闭其他程序；至少在设备或模拟器上安装应用程序期间。您甚至可能需要关闭 Internet 浏览器。

如果可以的话，您可能需要更新您的计算机以使其更快。

希望这对某人有帮助:)

# ios - iOS：使用钥匙串作为通用可变字典的正确方法

> ID：15560227
> 
> 赞同：0
> 
> 时间：2013-03-21T23:45:28.013
> 
> 标签：ios, objective-c, keychain

我需要一种将钥匙串用作通用可变字典的方法，我检查了一些库：

KeychainItemWrapper：看起来包装器的一个实例只是一个键/值对，因为您需要将 kSecAttr* 用于键，对于通用字典结构，您需要维护一个包装器列表，这并不容易。

PDKeychainBindings：这个不需要 kSecAttr* 作为键，你可以使用任何字符串，但它没有提供清除所有钥匙串数据的方法，你需要知道你使用了什么键并单独删除它们。

有没有使用钥匙串作为通用可变字典的库？最重要的是，有能力清除所有数据，例如`removeAllObjects`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:48:42.477

只需有一个钥匙串条目并将 JSON 字符串（人类可读）或二进制 plist 数据（如果使用 NSPropertyListBinaryFormat_v1_0 则有效）作为其内容。

[http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

[https://developer.apple.com/library/ios/#documentation/cocoa/Reference/Foundation/Classes/NSPropertyListSerialization_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/cocoa/Reference/Foundation/Classes/NSPropertyListSerialization_Class/Reference/Reference.html)

# mysql - 无法初始化索引器进程 Magento 1.7

> ID：15560229
> 
> 赞同：1
> 
> 时间：2013-03-21T23:45:43.913
> 
> 标签：mysql, magento, phpmyadmin, magento-1.7

好的，所以我刚刚导入并编辑了一个在线商店，在我导入 CSV 文件后，我们设置了大约 2500 种产品，现在我无法重新索引该站点，并且出现以下错误：

无法初始化索引器进程。

我尝试在 phpMyAdmin 中运行此命令，但仍然无法正常工作

```
DELETE cpop.* FROM catalog_product_option_price AS cpop
INNER JOIN catalog_product_option AS cpo
ON cpo.option_id = cpop.option_id
WHERE
cpo.type = 'checkbox' OR
cpo.type = 'radio' OR
cpo.type = 'drop_down';

DELETE cpotp.* FROM catalog_product_option_type_price AS cpotp
INNER JOIN catalog_product_option_type_value AS cpotv
ON cpotv.option_type_id = cpotp.option_type_id
INNER JOIN catalog_product_option AS cpo
ON cpotv.option_id = cpo.option_id
WHERE
cpo.type <> 'checkbox' AND
cpo.type <> 'radio' AND
cpo.type <> 'drop_down'; 
```

# mysql - 将 max_allowed_pa cket 添加到 my.cnf 会停止 mysql 服务器

> ID：15560230
> 
> 赞同：3
> 
> 时间：2013-03-21T23:45:51.207
> 
> 标签：mysql, homebrew

我在我的 Mac 上使用 mysql 的 Homebrew 设置进行 Drupal 开发工作，在几个版本 6 的站点上，我在尝试打开状态报告页面时遇到著名的“mysql：服务器已消失”错误。经过一番搜索，我发现答案似乎是将 max_allowed_pa​​cket 设置添加到 my.cnf 的 [mysqld] 部分。所以，使用 mysql 公式中提供的 my-medium.cnf 文件，我将它放在 /usr/local/etc 并添加

```
max_allowed_packet=65M 
```

但是，由于某种原因，mysql 不喜欢这样。我运行 mysql.server restart，它似乎开始了，但是当我尝试在我的客户端中运行查询时，它告诉我没有连接。然后我尝试从 my.cnf 中删除设置并重新启动，但我没有重新启动，而是得到

```
ERROR! The server quit without updating PID file (/usr/local/var/mysql/username.home.pid) 
```

尝试重新连接套接字会给我一个错误，提示请求超时或无法通过套接字连接（在这种情况下是 /tmp/mysql.sock）。在 Drupal 站点上，我得到一个“没有这样的文件或目录”。信息。

谁能解释为什么仅仅将这个值添加到 my.cns 会导致这样的结果？

谢谢。

**编辑：**在检查了我使用的 my.cnf 之后，我注意到 [mysqld] 部分已经有了 max_allowed_pa​​cket = 1M。我删除了它并创建了只有

```
[mysqld]
max_allowed_packet = 64M 
```

我仍然得到相同的结果。出于某种原因，当我添加或更改该设置时，mysql 不喜欢它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:38:31.517

从文档中，它应该是一个以 1024 为增量的字节值。[http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_max_allowed_pa​​cket](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_max_allowed_packet)

# php - MySQL while 循环查询在其他 while 循环查询中

> ID：15560239
> 
> 赞同：1
> 
> 时间：2013-03-21T23:46:51.140
> 
> 标签：php, mysql, while-loop

```
<?php

include 'config.php';

$conn = mysql_connect("$hostname", "$username", "$password") or die ("Failed to connect to DB.");

mysql_select_db("$dbname",$conn);

    $sql="SELECT * FROM opdrachten";
    $result=mysql_query($sql,$conn);

while ($row= mysql_fetch_array($result))
{
    echo $row['name'];
    echo "<br>";
    $opdrachtid = $row["id"];

    $sql2="SELECT * FROM resultaten WHERE(opdrachtid='".$opdrachtid."')";
    $result2=mysql_query($sql2,$conn);

    while ($row2= mysql_fetch_array($result2))
    {
        echo "
                    <li>
                        <a href=\"result.php?id=".$row2["id"]."\">
                            <img src=\"".$row2["img"]." \"width=\"150\" height=\"150\">
                            <div><span>TEXT HERE</span></div>
                        </a>
                    </li>";
    }

}           
?> 
```

我想要我的代码做的是（在一个循环中）：

1.  从表“opdrachten”中获取所有行并回显它们的“名称”。
2.  从“opdrachten”中的每一行中获取“id”> 存储在变量 $opdrachtid 中
3.  从表'resultaten'中获取行，其中'opdrachtid == $opdrachtid'（我刚刚存储）
4.  从从 3 获取的行中回显“id”和“img”。

我想在我的页面上看到的内容：

1.  表“opdrachten”中的“opdrachten”（目标）的名称，正下方
2.  分配给这些目标的图像（其 url 存储在表'resultaten'中）（WHERE opdrachten.id = resultaten.opdrachtid）

我已经研究了 JOIN ，因为这是我在这里读到的大多数相关主题的答案，但这似乎不是我想要的，因为我在第一时间回显并声明变量用于第二个查询。

使用的表：

'结果' id | opdrachtid | 姓名

'opdrachten' 标识 | 姓名

同样，resultaten.opdrachtid == opdrachten.id

在此先感谢，感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:51:40.403

```
SELECT opdrachten.*, resultaten.* FROM opdrachten
INNER JOIN resultaten
ON resultaten.opdrachtid = opdrachten.id; 
```

只需将其用作原始 sql 语句并对其进行迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T23:59:56.633

我当然会建议在这里使用 JOIN，这样您就可以一次获取所有这些数据。但是，我将添加一个警告 - 这将占用更多内存，就像您当前正在做的那样在循环中查询数据库，因此如果您在任一表中都有大量行，这可能不是一个合适的方法。

查询将只是：

```
SELECT * FROM opdrachen
INNER JOIN resultaten ON opdrachen.id = resultaten.opdrachenid 
```

然后，您可以非常简单地设置一个以每个 id 为键的数组，如下所示：

```
$array = array();
while ($row = mysql_fetch_array($result)) {
    $array[$row['id']][] = $row;
} 
```

这为您提供了一种简单的方法来遍历结果，一次一个 id，如下所示：

```
foreach ($array as $id => $rows_for_id) {
      // output stuff for row group
      foreach ($rows_for_id as $resultaten_row) {
          // output stuff for resultaten rows
      }
} 
```

其他一些建议：

*   不要使用 mysql_* 函数，因为它们已被弃用。了解如何使用 mysqli 或 PDO。
*   不要使用`SELECT *`查询。它是懒惰的，浪费带宽、传输时间和系统内存。只查询您真正感兴趣的特定字段。因此，将`*`我的示例中的 替换为您需要的实际字段。

# pdf - PDFBox : 转换为图像 : 转换包含扫描文档的 PDF 时的质量损失

> ID：15560242
> 
> 赞同：0
> 
> 时间：2013-03-21T23:47:15.673
> 
> 标签：pdf, pdfbox

我的用例非常简单。我需要将 PDF 转换为图像。我尝试使用 apache pdfbox，但在转换包含扫描图像的 pdf 时遇到了一些麻烦。当我转换扫描图像时，由于压缩/缩放，图像清晰度会丢失。所以我试图从PDF中提取图像数据然后存储它。但问题是我可能会得到包含图像和文本的 PDF 文件，在这种情况下我需要回退到图像转换模式。问题是如何区分只有图像的页面/文档和具有复合数据的页面/文档。我在想我可以为此目的使用 ProcSet 防御，但根据 PDF 规范，它看起来被标记为过时且不可靠。另一种可能性是检查链接到该页面的所有对象，看看它是否包含图像以外的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:10:40.257

如果您的意图是将 pdf 转换为图像，最好使用[ImageMagick](http://www.imagemagick.org/script/index.php)。如果你使用 ImageMagick，有很多选项可以改变图像的质量。使用 ImageMagick 将 pdf 转换为图像非常简单。

# ruby-on-rails - 试图将 rel 和 class 放入 rails link_to

> ID：15560244
> 
> 赞同：0
> 
> 时间：2013-03-21T23:47:24.093
> 
> 标签：ruby-on-rails, image, rel

我正在尝试在锚标记内放入 rel 和 class 属性，但它一直进入 img 标记。我对 Rails 还很陌生，所以我希望能看到我做错了什么。

```
 <% @series.uploads.each do |upload| %>
  <%= link_to  image_tag upload.upload.url(:thumb), :class => 'lightbox', :rel =>        'lightbox'%>
  <% end %> 
```

这是输出。

```
 <a href="/project-gallery">
   <img alt="alt" class="lightbox" rel="lightbox" src="img-path" />
   </a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:48:41.367

这个？

```
<%= link_to(image_tag(upload.upload.url(:thumb)), :class => 'lightbox', :rel => 'lightbox') %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:56:34.273

这就是我最终为了让它工作而做的事情，但它看起来不正确？

```
 <% @series.uploads.each do |upload| %>
   <%= link_to(image_tag(upload.upload.url(:thumb)), '', {:rel => "lightbox", :class => "lightbox"})%>
  <% end %> 
```

# forms - Powershell - 帮助在 GUI 中包装脚本

> ID：15560246
> 
> 赞同：0
> 
> 时间：2013-03-21T23:47:41.480
> 
> 标签：forms, user-interface, powershell

我想将我创建的现有 powershell 脚本包装到 GUI 中，但没有花几天时间试图弄清楚我想我在这里发布。我已经为脚本的外观创建了一个原始表单，但需要帮助来隐藏它。

我运行的脚本将计算机帐户添加到给定 3 个选项的安全组。针对 localhost、计算机列表或手动输入主机名运行脚本。此外，如果可能，我想选择一个组并根据选择进行操作，而不是手动输入组名。

**我的主要脚本**

```
 Import-Module ActiveDirectory
   cls
   $OU = "OU=TESTScripts,OU=Groups,OU=Company,DC=Company,DC=local"
   $AppGroupList = Get-ADGroup -Filter {GroupCategory -eq "security"} -SearchBase "$OU"
   $AppGroupList | Select-Object @{Name="AD Security Group";Expression={$_.Name}}

   $title = "Add manually entered computer, localhost or list of computers to SCCM        Application Install Group"
   $message = "Please select an option from below:-"

   $1 = New-Object System.Management.Automation.Host.ChoiceDescription "Enter &Hostname"

   $2 = New-Object System.Management.Automation.Host.ChoiceDescription "Add &List of Computers"

   $3 = New-Object System.Management.Automation.Host.ChoiceDescription "&Add localhost"

   $options = [System.Management.Automation.Host.ChoiceDescription[]]($1, $2, $3)
   $result = $host.ui.PromptForChoice($title, $message, $options, 0)

switch ($result)
    {
        0 {$Computers = Read-Host "Enter Hostname>"}                          

        1 {$Computers = get-content "c:\scripts\Computers.csv"}                   

        2 {$Computers = $env:computername}

    }

    $AppGroup = Read-Host "Application Security Group Name>"
    $Group = Get-ADGroup -Identity $AppGroup     

 foreach ($Hostname in $Computers){

        $member = Get-ADComputer -Identity "$Hostname" -Properties MemberOf | Select-Object MemberOf
        $pc = Get-ADComputer "$Hostname"

            if ($member.Memberof -like "$Group"){
                Write-Host ""   
                Write-Host $Hostname is already a member of $AppGroup -ForegroundColor "Yellow"     
            }

            else {
                Add-ADGroupMember $AppGroup $pc
                Write-Host ""
                Write-Host $Hostname has been added to $AppGroup -ForegroundColor "Green"   

            }
} 
```

`

**我的表单代码如下所示：-**

```
 #Generated Form Function
    function GenerateForm {
    ########################################################################
    # Code Generated By: SAPIEN Technologies PrimalForms (Community Edition) v1.0.10.0
    # Generated On: 22/03/2013 11:17 AM
    ########################################################################

    #region Import the Assemblies
    [reflection.assembly]::loadwithpartialname("System.Drawing") | Out-Null
    [reflection.assembly]::loadwithpartialname("System.Windows.Forms") | Out-Null
    #endregion

    #region Generated Form Objects
    $form1 = New-Object System.Windows.Forms.Form
    $label3 = New-Object System.Windows.Forms.Label
    $Hostname = New-Object System.Windows.Forms.Label
    $Hostname = New-Object System.Windows.Forms.TextBox
    $Install = New-Object System.Windows.Forms.Button
    $label1 = New-Object System.Windows.Forms.Label
    $Browse = New-Object System.Windows.Forms.Button
    $checkBox1 = New-Object System.Windows.Forms.CheckBox
    $ListApps = New-Object System.Windows.Forms.ComboBox
    $InitialFormWindowState = New-Object System.Windows.Forms.FormWindowState
    #endregion Generated Form Objects

    #----------------------------------------------
    #Generated Event Script Blocks
    #----------------------------------------------
    #Provide Custom Code for events specified in PrimalForms.
    $handler_textBox1_TextChanged= 
    {
    #TODO: Place custom script here

    }

    $Browse_OnClick= 
    {
    #TODO: Place custom script here

    }

    $handler_label2_Click= 
    {
    #TODO: Place custom script here

    }

    $handler_form1_Load= 
    {
    #TODO: Place custom script here

    Import-Module ActiveDirectory

    $OU = "OU=TESTScripts,OU=Groups,OU=Company,DC=Company,DC=local"
    $AppGroupList = Get-ADGroup -Filter {GroupCategory -eq "security"} -SearchBase "$OU"
    $AppGroupList | Select-Object @{Name="AD Security Group";Expression={$_.Name}}

    }

    $Install_OnClick= 
    {
    #TODO: Place custom script here

    }

    $handler_checkBox1_CheckedChanged= 
    {
    #TODO: Place custom script here

    }

    $OnLoadForm_StateCorrection=
    {#Correct the initial state of the form to prevent the .Net maximized form issue
$form1.WindowState = $InitialFormWindowState
    }

    #----------------------------------------------
    #region Generated Form Code
    $System_Drawing_Size = New-Object System.Drawing.Size
    $System_Drawing_Size.Height = 423
    $System_Drawing_Size.Width = 284
    $form1.ClientSize = $System_Drawing_Size
    $form1.DataBindings.DefaultDataSourceUpdateMode = 0
    $form1.Name = "form1"
    $form1.Text = "Install Software"
    $form1.add_Load($handler_form1_Load)

    $label3.DataBindings.DefaultDataSourceUpdateMode = 0

    $System_Drawing_Point = New-Object System.Drawing.Point
    $System_Drawing_Point.X = 12
    $System_Drawing_Point.Y = 76
    $label3.Location = $System_Drawing_Point
    $label3.Name = "label3"
    $System_Drawing_Size = New-Object System.Drawing.Size
    $System_Drawing_Size.Height = 20
    $System_Drawing_Size.Width = 185
    $label3.Size = $System_Drawing_Size
    $label3.TabIndex = 7
    $label3.Text = "Application Install Groups:-"

    $form1.Controls.Add($label3)

    $Hostname.DataBindings.DefaultDataSourceUpdateMode = 0

    $System_Drawing_Point = New-Object System.Drawing.Point
    $System_Drawing_Point.X = 206
    $System_Drawing_Point.Y = 146
    $Hostname.Location = $System_Drawing_Point
    $Hostname.Name = "Hostname"
    $System_Drawing_Size = New-Object System.Drawing.Size
    $System_Drawing_Size.Height = 29
    $System_Drawing_Size.Width = 66
    $Hostname.Size = $System_Drawing_Size
    $Hostname.TabIndex = 6
    $Hostname.Text = "Enter Hostname"
    $Hostname.add_Click($handler_label2_Click)

    $form1.Controls.Add($Hostname)

    $Hostname.DataBindings.DefaultDataSourceUpdateMode = 0
    $System_Drawing_Point = New-Object System.Drawing.Point
    $System_Drawing_Point.X = 91
    $System_Drawing_Point.Y = 155
    $Hostname.Location = $System_Drawing_Point
    $Hostname.Name = "Hostname"
    $System_Drawing_Size = New-Object System.Drawing.Size
    $System_Drawing_Size.Height = 20
    $System_Drawing_Size.Width = 102
    $Hostname.Size = $System_Drawing_Size
    $Hostname.TabIndex = 5
    $Hostname.add_TextChanged($handler_textBox1_TextChanged)

    $form1.Controls.Add($Hostname)

    $Install.DataBindings.DefaultDataSourceUpdateMode = 0

    $System_Drawing_Point = New-Object System.Drawing.Point
    $System_Drawing_Point.X = 10
    $System_Drawing_Point.Y = 246
    $Install.Location = $System_Drawing_Point
    $Install.Name = "Install"
    $System_Drawing_Size = New-Object System.Drawing.Size
    $System_Drawing_Size.Height = 38
    $System_Drawing_Size.Width = 259
    $Install.Size = $System_Drawing_Size
    $Install.TabIndex = 4
    $Install.Text = "Install"
    $Install.UseVisualStyleBackColor = $True
    $Install.add_Click($Install_OnClick)

    $form1.Controls.Add($Install)

    $label1.DataBindings.DefaultDataSourceUpdateMode = 0

    $System_Drawing_Point = New-Object System.Drawing.Point
    $System_Drawing_Point.X = 91
    $System_Drawing_Point.Y = 206
    $label1.Location = $System_Drawing_Point
    $label1.Name = "label1"
    $System_Drawing_Size = New-Object System.Drawing.Size
    $System_Drawing_Size.Height = 18
    $System_Drawing_Size.Width = 164
    $label1.Size = $System_Drawing_Size
    $label1.TabIndex = 3
    $label1.Text = "Browse to add list of computers"

    $form1.Controls.Add($label1)

    $Browse.DataBindings.DefaultDataSourceUpdateMode = 0

    $System_Drawing_Point = New-Object System.Drawing.Point
    $System_Drawing_Point.X = 10
    $System_Drawing_Point.Y = 201
    $Browse.Location = $System_Drawing_Point
    $Browse.Name = "Browse"
    $System_Drawing_Size = New-Object System.Drawing.Size
    $System_Drawing_Size.Height = 23
    $System_Drawing_Size.Width = 75
    $Browse.Size = $System_Drawing_Size
    $Browse.TabIndex = 2
    $Browse.Text = "Browse"
    $Browse.UseVisualStyleBackColor = $True
    $Browse.add_Click($Browse_OnClick)

    $form1.Controls.Add($Browse)

    $checkBox1.DataBindings.DefaultDataSourceUpdateMode = 0

    $System_Drawing_Point = New-Object System.Drawing.Point
    $System_Drawing_Point.X = 12
    $System_Drawing_Point.Y = 135
    $checkBox1.Location = $System_Drawing_Point
    $checkBox1.Name = "checkBox1"
    $System_Drawing_Size = New-Object System.Drawing.Size
    $System_Drawing_Size.Height = 60
    $System_Drawing_Size.Width = 75
    $checkBox1.Size = $System_Drawing_Size
    $checkBox1.TabIndex = 1
    $checkBox1.Text = "Tick LocalHost"
    $checkBox1.UseVisualStyleBackColor = $True
    $checkBox1.add_CheckedChanged($handler_checkBox1_CheckedChanged)

    $form1.Controls.Add($checkBox1)

    $ListApps.DataBindings.DefaultDataSourceUpdateMode = 0
    $ListApps.FormattingEnabled = $True
    $System_Drawing_Point = New-Object System.Drawing.Point
    $System_Drawing_Point.X = 12
    $System_Drawing_Point.Y = 108
    $ListApps.Location = $System_Drawing_Point
    $ListApps.Name = "ListApps"
    $System_Drawing_Size = New-Object System.Drawing.Size
    $System_Drawing_Size.Height = 21
    $System_Drawing_Size.Width = 260
    $ListApps.Size = $System_Drawing_Size
    $ListApps.TabIndex = 0

    $form1.Controls.Add($ListApps)

    #endregion Generated Form Code

    #Save the initial state of the form
    $InitialFormWindowState = $form1.WindowState
    #Init the OnLoad event to correct the initial state of the form
    $form1.add_Load($OnLoadForm_StateCorrection)
    #Show the Form
    $form1.ShowDialog()| Out-Null

    } #End Function

    #Call the Function
    GenerateForm 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:18:41.760

这个问题太宽泛了。请询问具体问题并自行尝试。如果你知道基本的 powerhsell 和/或基本的 c#，你会走得更远。为了帮助您根据需要填充应用程序组列表，请尝试：

```
$handler_form1_Load= 
{
#TODO: Place custom script here
#I would move this import line out of the form and to the top of the script 
Import-Module ActiveDirectory

$OU = "OU=TESTScripts,OU=Groups,OU=Metro Trains,DC=Metrotrains,DC=local"
$AppGroupList = Get-ADGroup -Filter {GroupCategory -eq "security"} -SearchBase "$OU" | Select -expand Name

#Fill the list with the groupnames  
$AppGroupList | % { $ListApps.Items.Add($_) }

} 
```

您应该考虑在使用某个控件时禁用某些控件。前任。如果选中 localhost 复选框，请禁用文本框和浏览按钮（如果您不需要同时使用这三个按钮）。将事件处理程序添加`click`到安装按钮，该按钮从表单中获取当前值并运行“将计算机添加到组”代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:16:16.027

当涉及到 Windows Presentation Foundation 或 WinForms 时，我并不擅长。我喜欢 PowerShell 照顾我。我希望这是你可以使用的东西：

```
$OU = Get-ADOrganizationalUnit -Filter * | Out-GridView -PassThru -Title 'Choose OU' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T00:57:45.713

**这是将上述脚本转换为 GUI 的完整代码。**

```
#Generated Form Function
function GenerateForm {
########################################################################
# Code Generated By: SAPIEN Technologies PrimalForms (Community Edition) v1.0.10.0
# Generated On: 25/03/2013 4:56 PM
# Generated By: MrMeaner
########################################################################

Import-Module ActiveDirectory

#region Import the Assemblies
[reflection.assembly]::loadwithpartialname("System.Drawing") | Out-Null
[reflection.assembly]::loadwithpartialname("System.Windows.Forms") | Out-Null
#endregion

#region Generated Form Objects
$form1 = New-Object System.Windows.Forms.Form
$radioButton3 = New-Object System.Windows.Forms.RadioButton
$radioButton2 = New-Object System.Windows.Forms.RadioButton
$radioButton1 = New-Object System.Windows.Forms.RadioButton
$label3 = New-Object System.Windows.Forms.Label
$textHostname = New-Object System.Windows.Forms.Label
$txtHostname = New-Object System.Windows.Forms.TextBox
$Install = New-Object System.Windows.Forms.Button
$label1 = New-Object System.Windows.Forms.Label
$Browse = New-Object System.Windows.Forms.Button
$ListApps = New-Object System.Windows.Forms.ComboBox
$InitialFormWindowState = New-Object System.Windows.Forms.FormWindowState
#endregion Generated Form Objects

#----------------------------------------------
#Generated Event Script Blocks
#----------------------------------------------
#Provide Custom Code for events.

$Browse_OnClick= 
{
#When Browse button is clicked
$FileName = Select-FileDialog
$Computers = Get-Content $FileName
$Install.enabled = $true

}

$Install_OnClick= 
{
#Add computer to security group script

    if (!$ListApps.SelectedItem) {[System.Windows.Forms.MessageBox]::Show("Please select an SCCM application install group name from the drop down menu")

       }
    else {

        $AppGroup = $ListApps.SelectedItem.ToString()

        $Group = Get-ADGroup -Identity $AppGroup 

            foreach ($Hostname in $Computers){

                $member = Get-ADComputer -Identity "$Hostname" -Properties MemberOf | Select-Object MemberOf
                $pc = Get-ADComputer "$Hostname"

                if ($member.Memberof -like "$Group"){
                    [System.Windows.Forms.MessageBox]::Show("$Hostname is already a member of $AppGroup")     
                }

                else {
                    Add-ADGroupMember $AppGroup $pc
                    [System.Windows.Forms.MessageBox]::Show("$Hostname has been added to $AppGroup")  

                }
            }  
    }

}

$handler_radioButton1_CheckedChanged= 
{
#Localhost radio button
$txtHostname.enabled = $false
$Browse.enabled = $false
$Computers = $env:computername
$Install.enabled = $true

}

$handler_radioButton2_CheckedChanged= 
{
#Enter Hostname radiobutton
$txtHostname.enabled = $true
$Browse.enabled = $false
}

$handler_radioButton3_CheckedChanged= 
{
#Load list of computers radiobutton
$Browse.enabled = $true
$txtHostname.enabled = $false

}

$handler_textBox1_TextChanged= 
{
#Hostname textbox
$Computers = $txtHostname.Text.ToString()
$Install.enabled = $true

}

$handler_form1_Load= 
{
#Runs when script is loaded

$Install.enabled = $false
$OU = "OU=TESTScripts,OU=Groups,OU=Company,DC=Company,DC=local"
$AppGroupList = Get-ADGroup -Filter {GroupCategory -eq "security"} -SearchBase "$OU" | Select -expand Name

#Fill the list with the groupnames  
$AppGroupList | % { $ListApps.Items.Add($_) }
}

$OnLoadForm_StateCorrection=
{#Correct the initial state of the form to prevent the .Net maximized form issue
    $form1.WindowState = $InitialFormWindowState
}

#----------------------------------------------
#region Generated Form Code
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 271
$System_Drawing_Size.Width = 284
$form1.ClientSize = $System_Drawing_Size
$form1.DataBindings.DefaultDataSourceUpdateMode = 0
$form1.Name = "form1"
$form1.Text = "Install Software"
$form1.add_Load($handler_form1_Load)

$radioButton3.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 188
$System_Drawing_Point.Y = 58
$radioButton3.Location = $System_Drawing_Point
$radioButton3.Name = "radioButton3"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 51
$System_Drawing_Size.Width = 88
$radioButton3.Size = $System_Drawing_Size
$radioButton3.TabIndex = 10
$radioButton3.TabStop = $True
$radioButton3.Text = "Load List of Computers"
$radioButton3.UseVisualStyleBackColor = $True
$radioButton3.add_CheckedChanged($handler_radioButton3_CheckedChanged)

$form1.Controls.Add($radioButton3)

$radioButton2.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 102
$System_Drawing_Point.Y = 54
$radioButton2.Location = $System_Drawing_Point
$radioButton2.Name = "radioButton2"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 58
$System_Drawing_Size.Width = 80
$radioButton2.Size = $System_Drawing_Size
$radioButton2.TabIndex = 9
$radioButton2.TabStop = $True
$radioButton2.Text = "Enter Hostname"
$radioButton2.UseVisualStyleBackColor = $True
$radioButton2.add_CheckedChanged($handler_radioButton2_CheckedChanged)

$form1.Controls.Add($radioButton2)

$radioButton1.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 7
$System_Drawing_Point.Y = 59
$radioButton1.Location = $System_Drawing_Point
$radioButton1.Name = "radioButton1"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 48
$System_Drawing_Size.Width = 76
$radioButton1.Size = $System_Drawing_Size
$radioButton1.TabIndex = 8
$radioButton1.TabStop = $True
$radioButton1.Text = "LocalHost"
$radioButton1.UseVisualStyleBackColor = $True
$radioButton1.add_CheckedChanged($handler_radioButton1_CheckedChanged)

$form1.Controls.Add($radioButton1)

$label3.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 7
$System_Drawing_Point.Y = 9
$label3.Location = $System_Drawing_Point
$label3.Name = "label3"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 20
$System_Drawing_Size.Width = 185
$label3.Size = $System_Drawing_Size
$label3.TabIndex = 7
$label3.Text = "SCCM Application Install Groups:-"

$form1.Controls.Add($label3)

$textHostname.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 140
$System_Drawing_Point.Y = 113
$textHostname.Location = $System_Drawing_Point
$textHostname.Name = "textHostname"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 27
$System_Drawing_Size.Width = 105
$textHostname.Size = $System_Drawing_Size
$textHostname.TabIndex = 6
$textHostname.Text = "Enter Hostname"
$textHostname.add_Click($handler_label2_Click)

$form1.Controls.Add($textHostname)

$txtHostname.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 7
$System_Drawing_Point.Y = 113
$txtHostname.Location = $System_Drawing_Point
$txtHostname.Name = "txtHostname"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 20
$System_Drawing_Size.Width = 124
$txtHostname.Size = $System_Drawing_Size
$txtHostname.TabIndex = 5
$txtHostname.add_Leave($handler_textBox1_TextChanged)

$form1.Controls.Add($txtHostname)

$Install.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 7
$System_Drawing_Point.Y = 181
$Install.Location = $System_Drawing_Point
$Install.Name = "Install"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 82
$System_Drawing_Size.Width = 269
$Install.Size = $System_Drawing_Size
$Install.TabIndex = 4
$Install.Text = "Install"
$Install.UseVisualStyleBackColor = $True
$Install.add_Click($Install_OnClick)

$form1.Controls.Add($Install)

$label1.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 140
$System_Drawing_Point.Y = 155
$label1.Location = $System_Drawing_Point
$label1.Name = "label1"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 23
$System_Drawing_Size.Width = 115
$label1.Size = $System_Drawing_Size
$label1.TabIndex = 3
$label1.Text = "Load computer list"

$form1.Controls.Add($label1)

$Browse.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 7
$System_Drawing_Point.Y = 150
$Browse.Location = $System_Drawing_Point
$Browse.Name = "Browse"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 23
$System_Drawing_Size.Width = 124
$Browse.Size = $System_Drawing_Size
$Browse.TabIndex = 2
$Browse.Text = "Browse"
$Browse.UseVisualStyleBackColor = $True
$Browse.add_Click($Browse_OnClick)

$form1.Controls.Add($Browse)

$ListApps.DataBindings.DefaultDataSourceUpdateMode = 0
$ListApps.FormattingEnabled = $True
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 7
$System_Drawing_Point.Y = 32
$ListApps.Location = $System_Drawing_Point
$ListApps.Name = "ListApps"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 21
$System_Drawing_Size.Width = 269
$ListApps.Size = $System_Drawing_Size
$ListApps.TabIndex = 0

$form1.Controls.Add($ListApps)

#endregion Generated Form Code

#Save the initial state of the form
$InitialFormWindowState = $form1.WindowState
#Init the OnLoad event to correct the initial state of the form
$form1.add_Load($OnLoadForm_StateCorrection)
#Show the Form
$form1.ShowDialog()| Out-Null

} #End Function

#Select File Explorer Function
function Select-FileDialog {

[void] [System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
$ofd = New-Object System.Windows.Forms.OpenFileDialog
$ofd.InitialDirectory = "d:\scripts"
$ofd.ShowHelp=$true
if($ofd.ShowDialog() -eq "OK") { $ofd.FileName }

} #End Function

#Call the Function
GenerateForm 
```

# java - 在 XML 中设置按钮闪烁？

> ID：15560252
> 
> 赞同：1
> 
> 时间：2013-03-21T23:48:30.683
> 
> 标签：java, android, button, xml-layout

嘿伙计们，我有一个问题。我通过编码制作了一个按钮闪烁动画

```
 button7.setOnTouchListener(new View.OnTouchListener() {
               public boolean onTouch(View v, MotionEvent me) {
                    try{ button7.setCompoundDrawablesWithIntrinsicBounds(0,R.drawable.white,0,0);

  } else if (me.getAction() == MotionEvent.ACTION_UP) {
 button7.setCompoundDrawablesWithIntrinsicBounds(0,R.drawable.neun,0,0); 
```

这很简单。现在的问题是，这仅适用于一种屏幕尺寸，因为图片不会被拉伸。我为不同的屏幕制作了不同的布局 XML，**所以我可以在 XML 中设置“android:onclick”（或类似的东西），这样我就可以为每种尺寸设置不同的图片吗？**

谢谢

我只是尝试弄乱“android：onClick”但一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:18:22.253

您应该注意[选择器](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)元素作为按钮的可绘制对象。然后，您将根本不需要任何`onClick()`/`onTouch()`方法 - 一切都会自动完成。此外，您应该使用[.9](http://developer.android.com/guide/topics/resources/drawable-resource.html#NinePatch)图像来消除不同屏幕尺寸的缩放问题。

# android - Android：应用内计费 - 取消订阅

> ID：15560259
> 
> 赞同：2
> 
> 时间：2013-03-21T23:49:03.810
> 
> 标签：android, in-app-billing

根据文档“当用户**在有效计费周期内**取消订阅时，Google Play 不会**立即**通知您的应用购买状态的变化”。也就是说，订阅在活动计费周期结束之前是“有效的”。（在此之前，不能进行新的订阅）。但是，如果您取消订阅并卸载您的应用程序（并重新安装它），是否会触发购买状态更改（onPurchaseStateChange）（因为在这种情况下可以进行新的购买/订阅）或者它是如何工作的？

我也许可以在我的应用程序中使用基于 HTTP 的 API 来请求购买状态（？），但它会在活动计费周期内返回 CANCELED 吗？

也链接到[这个](https://stackoverflow.com/questions/13877595/android-subscription-cancellation-how-to-be-informed-and-how-to-test)问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-24T17:15:37.917

> > 但是，如果您取消订阅并卸载您的应用程序（然后重新安装），是否会触发购买状态更改（onPurchaseStateChange）（因为在这种情况下可以进行新的购买/订阅）或者它是如何工作的？

即使在卸载/重新安装后，订阅也会显示为活动状态。因为确实，它是活跃的。在这种情况下取​​消意味着在当前周期结束后不会自动向用户收费。

> 我也许可以在我的应用程序中使用基于 HTTP 的 API 来请求购买状态（？），但它会在活动计费周期内返回 CANCELED 吗？

是的，您可以使用[Google Play Android Developer API](https://developers.google.com/android-publisher/index)。请记住，此 API 需要身份验证令牌；并且您必须使用与发布应用程序相同的 Google 帐户。因此，出于安全原因，这必须在您自己的服务器上完成。

但有趣的是：即使您使用 API 并检查最近取消的订阅，它似乎也是有效的。

这方面的一个示例可能是对 API 的调用以检查已取消的订阅：

```
https://www.googleapis.com/androidpublisher/v1.1/applications/YOUR-PACKAGE-NAME/
  subscriptions/THE-SUBSCRIPTION-SKU/
  purchases/PURCHASE-TOKEN-GOES-HERE?access_token=AUTH-TOKEN-GOES-HERE 
```

结果将如下所示：

```
{
 "kind": "androidpublisher#subscriptionPurchase",
 "initiationTimestampMsec": "1379986154994",
 "validUntilTimestampMsec": "1382621354994",
 "autoRenewing": false
} 
```

因此，您必须知道订阅是否被取消的唯一提示是`autoRenewing`将其设置为 false。这并不意味着您必须停止提供订阅内容。正如文档所理解的那样：

> *重要提示：在任何情况下，您都必须继续提供订阅者通过订阅购买的内容，只要任何用户都能够访问这些内容。也就是说，您不得在任何用户仍然有效订阅内容时删除任何订阅者的内容，即使该订阅将在当前计费周期结束时终止。**删除订阅者有权访问的内容将导致处罚。请参阅政策文件了解更多信息。***

# c# - 在 C# 中，为什么在声明 int 时不使用“new”关键字？

> ID：15560261
> 
> 赞同：5
> 
> 时间：2013-03-21T23:49:11.930
> 
> 标签：c#, int

当声明一个 int..

```
int A = 10; 
```

为什么不这样做呢？

```
int A = new Int()
A=10; 
```

都一样吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T23:50:50.197

因为是值类型[`int`](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/int)的语法糖。[`Int32`](https://docs.microsoft.com/en-us/dotnet/api/system.int32)顺便说一句，常量值`10`（[值类型](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/value-types) [Int32](https://docs.microsoft.com/en-us/dotnet/api/system.int32)的实例）也是如此。这就是为什么您不需要使用[`new`](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/new-operator)来创建新实例，而是复制`10`并调用它的原因`A`。类似的语法也适用于引用类型，但不同之处在于不复制；创建一个参考。

本质上，您可以将其`10`视为先前声明的[`Int32`](https://docs.microsoft.com/en-us/dotnet/api/system.int32). 然后`int A = 10`只是将变量 A 设置为值的**副本**`10`（如果我们谈论的是[引用类型](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/reference-types)，那么 A 将被设置为对实例的引用而不是副本）。

为了更好地说明这里是另一个例子：

```
struct SomeValueType {
    public SomeValueType(){        
    }
}

public static readonly SomeValueType DEFAULT = new SomeValueType(); 
```

然后你可以这样做：

```
SomeValueType myValueType = DEFAULT;  // no neeed to use new! 
```

现在想象一下`SomeValueType`is`Int32`和`DEFAULT`is `10`。就在那里！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T04:54:33.880

在 C# 中有两种类型，“引用类型”和“值类型”。（指针是第三种类型，但我们不要讨论它。）

当您使用值类型的默认构造函数时，您所说的只是“给我这个值类型的默认值”。所以`new int()`不多也不少，只是说而已`0`。

所以你的程序是一样的：

```
int i = 0;
i = 10; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-21T23:57:30.693

你可能见过 Java，其中`int`和`Integer`是两个不同的东西，后者需要你写`new Integer(10)`.

在 C#`int`中是 的特殊别名`Int32`，并且对于所有意图和目的而言，它们都是相同的。实际上，要创建任何类型的新实例，您必须编写`new Int32()`或其他东西。

但是，由于整数是 C#（和大多数编程语言）中的原始类型，因此整数文字有一种特殊的语法。只是写作`10`使它成为`Int32`（或`int`）。

在您的示例中，您实际上为`a`变量赋值了两次：

```
int a = new Int32();  // First assignment, a equals 0
a = 10;               // Second assignment, a equals 10 
```

您可能会想象，由于第二个分配覆盖了第一个，所以第一个分配不是必需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T06:05:14.880

if you write youe code like

```
int A = new Int(); 
```

the variable 'A' is assigned by the default value of int, so you can use variable 'A' without assigning a value to it(in `c#` we cant use a variable without assigning a value to it) when using the keyword new it will automatically call the default constructor, it will assign default values to the variables.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-30T15:33:08.220

```
int A = new Int(); 
```

It declares and initializes `A` to `0`.

Basically, the new operator here is used to invoke the default constructor for value types. For the type int, the default value is 0.

It has the same effect as the following:

```
int A = 0; 
```

# php - 将 MySql 结果集存储在变量中并将其传递给 JQuery Switch 语句

> ID：15560262
> 
> 赞同：0
> 
> 时间：2013-03-21T23:49:15.147
> 
> 标签：php, jquery, mysql, ajax

我在下面的代码中遇到问题。我试图在一个变量中捕获 MySql 查询结果集，并在下面提到的 JQuery 代码中使用相同的变量。现在的问题是我的数组有超过 150 个项目。谁能指导我如何在变量中捕获 MySql 数组并使用下面提到的 JQuery 代码中的结果集。

```
 valueMatches : function(category, searchTerm, callback) {
          switch (category) {
          case 'account':
              callback([
                { value: '1-amanda', label: 'Amanda' },
                { value: '2-aron',   label: 'Aron' },
                { value: '3-eric',   label: 'Eric' },
                { value: '4-jeremy', label: 'Jeremy' },
                { value: '5-samuel', label: 'Samuel' },
                { value: '6-scott',  label: 'Scott' }
              ]);
              break;
            case 'filter':
              callback(['published', 'unpublished', 'draft']);
              break;
            case 'access':
              callback(['public', 'private', 'protected']);
              break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:21:14.877

你可以这样做：

```
<script>
    var passedArray = <?echo json_encode($yourArray);?>;
</script> 
```

这将产生一个 javascript 数组，该数组存储在 passArray 变量中，并且可以在您的 js 中访问

# php - Colorbox 在 AJAX 调用中不执行 PHP 代码

> ID：15560266
> 
> 赞同：0
> 
> 时间：2013-03-21T23:49:34.027
> 
> 标签：php, jquery, css, modal-dialog, colorbox

我有一个 PHP 文件，并希望它通过 AJAX 加载到[颜色框](http://www.jacklmoore.com/colorbox/)模式弹出窗口中，但文件内部的 PHP 代码没有被执行（只有当我删除所有 PHP 内容时，像 div 这样的普通 HTML 标签才可见）。我不知道为什么会这样。

我可以看到例如常量的名称（如 EP_AVATAR_RESTRICTIONS），但看不到它们的内容（在这种情况下它只是文本）。

我的彩盒代码：

```
$(".edit_avatar_link").colorbox({
        initialWidth:'386',
        initialHeight:'528',
        innerWidth:'386',
        innerHeight:'528',
        href: "<?php echo $setting['site_url'];?>/includes/forms/avatar_form2.php",
        fixed:true,
        scrolling:false,
        transition:'none',

        onComplete: function(){
            $("#cboxLoadedContent").appendTo("#cboxContent");

            var title = 'Edit Avatar';
            $('#cboxTitle').text(title);
        }
    }); 
```

我的 PHP 文件（avatar_form2.php）：

```
<?php defined( 'AVARCADE_' ) or die( '' ); // Security ?>
<div id="edit_avatar_content">
<div class="edit_profile_header"><?php echo EP_EDIT_AVATAR;?></div>
<div class="edit_avatar_container">
    <div class="edit_profile_lable"><img src="<?php echo $user['avatar'];?>" width="75" height="75"></div>
    <div class="edit_avatar_element">
        <form enctype="multipart/form-data" id="form1" method="post" action="?task=edit_profile&done=avatar">
            <input name="new_id" type="hidden" id="new_id" value="<?php echo $new_id;?>" />
            <span class="style1"><?php echo EP_AVATAR_UP;?></span>
            <input name="img_file" type="file" id="img_file" size="50" /> <input type="Submit" name="Submit" value="<?php echo EP_AVATAR_BUTTON;?>"/>
            <?php echo EP_AVATAR_RESTRICTIONS;?>
        </form>
    </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:12:38.057

什么都得不到是正常的。您的颜色框调用受程序保护的 php 文件。

这行代码导致它：

```
<?php defined( 'AVARCADE_' ) or die( '' ); // Security ?> 
```

这是一种直接访问保护，因此您无法直接访问此文件。这样做是为了让它只包含在其他执行 DEFINE('AVARCADE_','something'); 的 php 文件中。

要么删除那行代码，要么创建另一个定义 AVARCADE_ 常量的 php 文件，然后在该文件中包含 vatar_form2.php

# javascript - 在 JQuery 中，如何将“选中”复选框的所有值加在一起？

> ID：15560273
> 
> 赞同：0
> 
> 时间：2013-03-21T23:50:23.333
> 
> 标签：javascript, jquery

```
<input type="checkbox" class="new_message" value="1">
<input type="checkbox" class="new_message" value="2"  checked="checked">
<input type="checkbox" class="new_message" value="4" checked="checked">

total_score = $("input.new_message").checked.each(function(){
    ...? 
}); 
```

总分应该是 6。我想将同一类的所有检查值相加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:16:19.400

你可以做这样的事情

```
var total_score = function () {
      var x = 0 ;
        $("input.new_message:checked").each(function(){
       x +=  Number($(this).val());
      });

    return x ; 

  } 
```

[演示](http://jsfiddle.net/N5xfK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:52:14.943

启动一个计数器，然后在每次通过时递增它。`$.each`不会返回任何东西。

```
var total_score = 0;
$("input.new_message:checked").each(function(){
    total_score += parseInt($(this).val());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T23:53:19.387

像这样的东西：

```
var total_score = 0;

$('input.new_message:checked').each(function(){
    total_score += Number($(this).val());
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T23:52:13.943

```
 var sum = 0; 

$("input.new_message").each(function(){
    if($(this).prop(checked)){
    sum += $(this).val(); 
    }
}); 
```

# css - 一个元素上有多个类名的奇怪行为？

> ID：15560275
> 
> 赞同：0
> 
> 时间：2013-03-21T23:50:41.123
> 
> 标签：css, twitter-bootstrap

我有以下CSS：

```
 .side-study-box {
    background-color: white;
    color: black;
    border: 3px solid #0072A6;
    text-align: center;
    height: 220px;
    margin-bottom: 15px;
    margin-top: 15px;
    display: table;

    -webkit-box-shadow: 3px 3px 3px #888888;
    -moz-box-shadow: 3px 3px 3px #888888;
    box-shadow: 3px 3px 3px #888888;
}
    .side-study-box p {
        position: relative;
        width: 100%;
        margin: auto;
        font-size: 24px;
        display: table-cell;
        vertical-align: middle;
    } 
```

以及以下 HTML：

```
<div class="side-study-box span6 ">
     <p>SIDE 1</p>
</div> 
```

但是，文本没有垂直或水平居中。如果我从 div 中删除 span6 类或以 span6 为目标，而不是我的 css 中的 side-study-box，它可以工作。我确实需要这两门课......我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:21:28.720

在我看来，另一条针对`span6`类名的规则正在影响事物。尝试增加特异性。添加一个`#id`选择器，或者在它们前面加上`body`. 就像是：

```
body .side-study-box { /*...*/ }
body .side-study-box p {/*...*/ } 
```

# javascript - 原生应用内的 HTML5 / JS 社交分享插件或示例？

> ID：15560278
> 
> 赞同：0
> 
> 时间：2013-03-21T23:50:50.310
> 
> 标签：javascript, jquery, social, sharing, trigger.io

构建一个 HTML / JS / CSS 应用程序并将其包装在 Trigger.io 中。

我想实现社交分享，但大多数 JS 插件都是针对网络应用程序的，我希望我的插件看起来和感觉“原生”。最好的方法是什么？javascript 中是否有任何“移动”或“原生”社交共享插件？

或者任何关于如何做好这件事的教程或示例应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:05:18.467

这里的一种选择是创建一个本机插件，该插件连接到设备自己的本机共享界面（[http://docs.trigger.io/en/v1.4/modules/native/](http://docs.trigger.io/en/v1.4/modules/native/)）

Android 已经有了分享意图；对于 iOS，您可以使用[ShareThis](http://support.sharethis.com/customer/portal/articles/439639-mobile-api#sthash.8QNShegs.dpbs)（未经测试）之类的东西。

如果你想要纯粹的社交，你应该使用普通的 JS 共享小部件。

# symfony - 动态树枝变量名称

> ID：15560280
> 
> 赞同：3
> 
> 时间：2013-03-21T23:50:52.063
> 
> 标签：symfony, twig

给定一个发送到 twig 模板的变量数组，例如：

```
$form   = $this->createForm( new ServiceItemType()
                           , $entity
                           , array( 'attr'=>
                                     array(
                                          'em'    => $this->EM()
                                         ,'group' => true
                           ) ) ); 
```

我想捕获变量以便在树枝中轻松访问。然而：

```
{% for key, value in form.vars.attr %}
    {% set key = value %}
{% endfor %} 
```

重新映射 for 循环中的关键变量。

树枝反对：

```
{% for key, value in form.vars.attr %}
    {% set {{key}} = value %}
{% endfor %} 
```

据我所知，堆栈似乎从未设置过地址。有谁知道，请指出如何完成这个变量赋值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T04:37:11.500

我知道这种语法有效

```
{% render "..." with {(key): value} %} 
```

您是否尝试过以下语法？**截至 3 月 22 日星期五，此语法不起作用，因此您需要使用变通方法。**

```
{% set (key) = value %} 
```

另一种方法是包含一个模板并通过和`form.vars.attr`.

```
{% include "YourAwesomeBundle:Controller:template.html.twig" with form.vars.attr %} 
```

您还可以使用[合并函数](http://twig.sensiolabs.org/doc/filters/merge.html)`form.vars.attr`与另一个数组合并。

```
{% set vars = {} %}
{% set vars = vars|merge(form.vars.attr) %}
{% include "YourAwesomeBundle:Controller:template.html.twig" with vars %} 
```

在包含的模板中，您将能够使用变量`em`和`group`.

# c# - 世界天气在线 - 无法从

> ID：15560281
> 
> 赞同：0
> 
> 时间：2013-03-21T23:50:54.110
> 
> 标签：c#, api, xml-serialization, windows-phone, weather-api

我是 Windows Phone 开发的新手，最近开始尝试创建一个天气应用程序，我正在使用来自 World Weather Online ( [http://www.worldweatheronline.com/](http://www.worldweatheronline.com/) ) 的 API。

我从网站（[http://free.worldweatheronline.com/feed/weather.ashx?q=paris&format=xml&num_of_days=5&key=xxxxxxxx](http://free.worldweatheronline.com/feed/weather.ashx?q=paris&format=xml&num_of_days=5&key=xxxxxxxx)）检索了以下示例数据：

```
<?xml version="1.0" encoding="UTF-8"?>
<data>
  <request>
    <type>City</type>
    <query>Paris, France</query>
  </request>
  <current_condition>
    .......
  </current_condition>
  <weather>
    .......
  </weather>
  <weather>
    .......
  </weather>
</data> 
```

我尝试解析 xml 并将它们放在 C# 中的数据类中。下面是我的代码：

```
XDocument doc = XDocument.Parse(e.Result);
var data1 = from q in doc.Descendants("result")
            select new RequestData
            {
               type = (string)q.Element("type"),
               query = (string)q.Element("query")
            } 
```

这是我的数据类：

```
public class RequestData
{
  public string type {get; set;}
  public string query {get; set;}
} 
```

但是上面的代码执行后，没有错误（好），但是没有数据来自`data1`. 我尝试了`doc.Descendants("current_condition)`并且`doc.Descendants("weather")`我能够将数据输入到 中`data1`，只是`doc.Descendants("result")`没有给我任何结果。

有谁知道为什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:49:32.133

好吧，我的错，这是我自己的错误，应该是“请求”，而不是“结果”。

它应该是

```
doc.Descendants("request") 
```

不是

```
doc.Descendants("result") 
```

# google-drive-api - Google云端硬盘下载限制/限制单个文件downloadUrls？

> ID：15560282
> 
> 赞同：1
> 
> 时间：2013-03-21T23:51:06.003
> 
> 标签：google-drive-api

我在通过 Drive SDK 访问的一个特定文件上看到 403“访问网页被拒绝”错误。它工作得更早，应用程序权限设置正确，并且我们在使用不同令牌针对同一应用程序的其他文件方面取得了成功。

我们从 SDK 成功获取了 downloadUrl，然后只有在用户被重定向到 downloadUrl 后才会看到错误消息。正因为如此，它很难追踪，但我们已经确认它对某些人有效，但对其他人无效——它还没有完全停止。

完整的错误文本是：

> 访问该网页被拒绝
> 您无权访问该网页 [...] 您可能需要登录。
> HTTP 错误 403（禁止）：服务器拒绝执行请求。

我们包括 GET 下载和（有效的）access_token 参数，所有这些。

我的问题是：这是否与报告的当前正在发生的 Google Drive 中断有关，或者是否存在某种限制/限制通过驱动器 API 访问单个文件？我以前从未见过这种行为，并且此响应未列在标准 403 响应中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T05:35:06.687

我刚刚看到了类似的东西。我使用的是新获得的访问令牌，所以我认为它与 oauth 无关。我的工作理论是 downloadUrl 链接已过时。当我获得在 downloadUrl 中具有不同值的新元数据时，它使用之前失败的相同访问令牌工作。

这只是一个理论，因为它没有在任何地方记录，我实际上希望 410（甚至 301）比 403 更合适。

# python - CSV，搜索字符串，获取正确信息，以正确格式写入正确信息

> ID：15560287
> 
> 赞同：4
> 
> 时间：2013-03-21T23:51:42.050
> 
> 标签：python, string, csv

我对堆栈溢出比较陌生，所以请多多包涵。另外，我为标题和任何歧义等道歉。

所以，这就是我想要做的：

我正在获取一个 .CSV 格式的原始数据文件，其中包含整个赛季 NBA 比赛的比赛。

该代码基于游戏创建一个新文件，该文件具有适当的游戏标题。然后，它读取每一行。

每行包含游戏 ID、行号（无关）、剩余时间和“游戏信息”。

我在下面包含了一个示例（示例 1）。

需要写入的信息如下所示（示例 2），球场上有 10 名球员：

*   录制该剧的时间
*   时期
*   期间剩余的时间
*   事件类型
*   如果有帮助
*   助攻的球员
*   如果有犯规
*   被犯规的人

等等

“玩家”标题指定了为谁记录了初始比赛（即，如果一个玩家进行了“击球”，则记录了该玩家的姓名）。录制该剧的球队也被写入。

示例 1：

```
GameID, LineNumber, TimeRemaining,  Entry

20071030HOULAL, 1,  0:48:00,        Start of 1st Quarter
20071030HOULAL, 2,  0:48:00,        Jump Ball Brown vs Yao
20071030HOULAL, 3,  0:47:42,        [LAL] Walton Jump Shot: Missed
20071030HOULAL, 4,  0:47:41,        [LAL] Brown Rebound (Off:1 Def:0)
20071030HOULAL, 5,  0:47:29,        [LAL] Bryant Jump Shot: Missed
20071030HOULAL, 6,  0:47:28,        [HOU] Alston Rebound (Off:0 Def:1)
20071030HOULAL, 7,  0:47:06,        [HOU] Yao Jump Shot: Missed 
```

示例 2：

```
a1(away),a2(away), a3(away), a4, a5, h1, h2, h3, h4, h5, period,time,team, etype, assist, away, block, entered, home, left, num, opponent, outof, player, points,possession, reason, result, steal 
```

（表示为 csv 文件中的每一行存储的值 - 太容易混淆而无法包含示例数据）

问题是这样的：

对于每支球队，都有一个球员名单。我的代码获取球员名单，然后只使用球员的姓氏创建一个名单，（这就是球员姓名的记录方式。）

第一个问题是在为每支球队累积场上的所有 10 名球员时出现的。

我使用累加器存储播放数据，直到记录所有 10 个播放器，然后写入播放数据，添加 10 个播放器。

问题是一些球员被“跳过”，当检查被指定为球员在场上的变量时。

例如，为休斯顿效力的 Luther Head 录制了一场比赛，但他从未被录制到`a1, a2, a3, a4`或`a5`（当前比赛的客队）。

以下是我设置“检查”的方式，`firstPlayer`作为记录播放的人并`secondPlayer`作为记录的附加球员（例如助攻）：

```
if team == homeTeam:
    if h1 == ' ' and firstPlayer != h2 and firstPlayer != h3 and firstPlayer != h4 and firstPlayer != h5:
        h1 = firstPlayer
    if h2 == ' ' and firstPlayer != h1 and firstPlayer != h3 and firstPlayer != h4 and firstPlayer != h5:
        h2 = firstPlayer
    if h3 == ' ' and firstPlayer != h1 and firstPlayer != h2 and firstPlayer != h4 and firstPlayer != h5:
        h3 = firstPlayer
    if h4 == ' ' and firstPlayer != h1 and firstPlayer != h2 and firstPlayer != h3 and firstPlayer != h5:
        h4 = firstPlayer
    if h5 == ' ' and firstPlayer != h1 and firstPlayer != h2 and firstPlayer != h3 and firstPlayer != h4:
        h5 = firstPlayer               

if team == visitingTeam:
    if a1 == ' ' and firstPlayer != a2 and firstPlayer != a3 and firstPlayer != a4 and firstPlayer != a5:
        a1 = firstPlayer
    if a2 == ' ' and firstPlayer != a1 and firstPlayer != a3 and firstPlayer != a4 and firstPlayer != a5:
        a2 = firstPlayer
    if a3 == ' ' and firstPlayer != a1 and firstPlayer != a2 and firstPlayer != a4 and firstPlayer != a5:
        a3 = firstPlayer
    if a4 == ' ' and firstPlayer != a1 and firstPlayer != a2 and firstPlayer != a3 and firstPlayer != a5:
        a4 = firstPlayer
    if a5 == ' ' and firstPlayer != a1 and firstPlayer != a2 and firstPlayer != a3 and firstPlayer != a4:
        a5 = firstPlayer

if etype != 'sub':  <<<<----This type of event is diffent
    if team == homeTeam and secondPlayer != ' ':
        if h1 == ' ' and secondPlayer != h2 and secondPlayer != h3 and secondPlayer != h4 and secondPlayer != h5:
            h1 = secondPlayer
        if h2 == ' ' and secondPlayer != h1 and secondPlayer != h3 and secondPlayer != h4 and secondPlayer != h5:
            h2 = secondPlayer 
        if h3 == ' ' and secondPlayer != h1 and secondPlayer != h2 and secondPlayer != h4 and secondPlayer != h5:
            h3 = secondPlayer 
        if h4 == ' ' and secondPlayer != h1 and secondPlayer != h2 and secondPlayer != h3 and secondPlayer != h5:
            h4 = secondPlayer 
        if h5 == ' ' and secondPlayer != h1 and secondPlayer  != h2 and secondPlayer != h3 and secondPlayer != h4:
            h5 = secondPlayer

    if team == visitingTeam and secondPlayer != ' ':
        if a1 == ' ' and secondPlayer != a2 and secondPlayer != a3 and secondPlayer != a4 and secondPlayer != a5:
            a1 = secondPlayer
        if a2 == ' ' and secondPlayer != a1 and secondPlayer != a3 and secondPlayer != a4 and secondPlayer != a5:
            a2 = secondPlayer
        if a3 == ' ' and secondPlayer != a1 and secondPlayer != a2 and secondPlayer != a4 and secondPlayer != a5:
            a3 = secondPlayer
        if a4 == ' ' and secondPlayer != a1 and secondPlayer != a2 and secondPlayer != a3 and secondPlayer != a5:
            a4 = secondPlayer
        if a5 == ' ' and secondPlayer != a1 and secondPlayer != a2 and secondPlayer != a3 and secondPlayer != a4:
            a5 = secondPlayer 
```

我想这真的是我唯一的问题。

虽然，我想找到一种更好的方法来搜索字符串并获取信息。

为了获得玩家，我将字符串的前半部分分配给一个变量，将后半部分分配给另一个变量。然后我拆分字符串`(sep = ' ')`，所以它在一个列表中。

然后我检查每个字符串，看看是否有一个词是`==`针对名单中的任何球员的，这取决于该比赛是为哪支球队录制的。

如果是第一个字符串，则为该玩家分配`firstPlayer` 变量，如果是第二个字符串，则为该玩家分配 `secondPlayer`变量。

当我搜索`etype`（事件类型）时，我只需使用以下表达式搜索字符串：

```
if 'Shot' in string:
   etype = 'shot'
   player = firstPlayer
   if 'Assist' in string:
       assist = secondPlayer 
```

...等等各种事件类型。

如果您需要其他信息来帮助回答这个问题，请告诉我。

# java - Jsoup，无法从表中获取元素

> ID：15560288
> 
> 赞同：0
> 
> 时间：2013-03-21T23:51:48.627
> 
> 标签：java, jsoup

我最近一直在玩 Jsoup。我的朋友喜欢为《暗黑破坏神》买金币，所以我想我应该给他做一个小程序，从各个网站获取价格并呈现给他，这样他就可以尽可能少花钱。通常，我可以这样抢到价格；

```
Document Fasteve;

    try {

        Fasteve = Jsoup.connect("http://www.fasteve.com/diablo-3/Gold/?st=US(Normal)").get();
        Elements Price = Fasteve.select("table[class=table_2] tr:eq(5) td:eq(1)");

        System.out.println("http://www.fasteve.com/diablo-3/Gold/?st=US(Normal)");
        System.out.println("1000M Gold = " + Price.text());

    } catch (IOException e) {
        e.printStackTrace();
    } 
```

但是我不能使用那种方法。我也不能使用你声明 tr 和 td 的方法，因为.. 对于这个站点，所有 tr 都有相同的类，所以我不能调用

```
Elements Price = Fasteve.select("table[class=table] tr[class=row] td:[class=column]"); 
```

![我从中获取数据的表](../Images/05bfbe1dbb8251829e1d85265ba71499.png)

关于如何获取该价值的任何想法？(64.37) 再次感谢 Stackoverflow。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:12:29.710

考虑

*   创建一个包含 td1 字符串和 td2 或价格字符串的类，假设我们称之为 DiabloGoldRow 或类似的名称。
*   创建此类的 Collection ，例如`ArrayList<DiabloGoldRow>`，或者如果您希望能够基于 td1 字符串快速获取信息， a `HashMap<String, DiabloGoldRow>`。
*   然后使用JSoup对表中的信息进行隔离，然后在for循环中对其进行迭代，创建DiabloGoldRow对象的实例并将它们放入ArrayList或其他集合（即HashMap）中。

我将把代码的细节留给学生练习。

**编辑**
你问，

> 为什么我需要创建一个单独的类来保存变量？

因为您需要将每行中的两条信息保持在一起，并且可能需要搜索其中一条以获得另一条。这样做比使用二维数组或并行数组要干净得多。你反对这样做的理由是什么？

**编辑 2**
你说，

> 我不反对任何事情。我只是想知道这将如何帮助我获得我需要的价值观。我的问题是使用我通常使用的方法，我无法获取我想要的数据。我只是在寻找一种不同的语法来获取指定的数据。

同样，您可以使用 for 循环执行此操作的一种方法。只需遍历表的行：

```
 Elements eles = doc.select("table tr");

  for (int i = 0; i < eles.size(); i++) {
     Elements rowEles = eles.get(i).select("form");

     Elements goldEles = rowEles.select("[name=gold]");
     String goldValue = goldEles.attr("value");

     Elements priceEles = rowEles.select("[name=price]");
     String priceValue = priceEles.attr("value");

     System.out.printf("%-7s: %-5s%n", goldValue, priceValue);
  } 
```

# cocos2d-iphone - 'itemFromNormalSprite:selectedSprite:target:selector:' 已弃用

> ID：15560293
> 
> 赞同：1
> 
> 时间：2013-03-21T23:52:01.957
> 
> 标签：cocos2d-iphone, kobold2d

为什么我会收到此警告，我该如何解决？

我正在使用 Kobold2D v2.1.0（使用 cocos2d-iphone v2.1 和 OpenGL ES 2.0）

我的代码：

```
CCMenuItemSprite *flareButton = [CCMenuItemSprite itemFromNormalSprite:flareSprite selectedSprite:flareSelectedSprite target:self selector:@selector(flareSelected)]; 
```

您能否告诉我将来如何通过查看任何类型的参考来避免这些弃用。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T00:05:10.937

查看 ccDeprecated.m - 您会在那里找到所有已弃用的方法以及使用该功能的正确（更改）方式。

在 cocos2d 中弃用意味着在几乎所有情况下函数的名称、参数列表或其位置都已更改。您还可以在构建设置中禁用弃用警告，并至少在下一次主要的 cocos2d 更新之前忽略它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T08:44:50.583

您可以尝试：

```
CCMenuItemSprite *flareButton = [CCMenuItemSprite itemWithNormalSprite:flareSprite selectedSprite:flareSprite target:self selector:@selector(flareSelected)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-30T19:24:15.693

在**itemFromNormalSprite:上将****From**更改为**With**将**itemWithNormalSprite:**

# html - 身体标签不正常

> ID：15560294
> 
> 赞同：0
> 
> 时间：2013-03-21T23:52:02.257
> 
> 标签：html, css

我的 HTML 中有一个`body`标签，它应该填充整个页面（整个`html`标签如此），但它在页面顶部和`body`标签顶部之间出现了一些像素。

奇怪的是，如果我强制`body {padding: 0;}`使用我的 CSS，页面顶部仍然有这个小条`body`无法填充，而如果我设置`padding`为任何非零值，小条会被覆盖`body`并指定填充被申请;被应用。

这是我的琐碎 CSS（它设置了一个用s 和普通东西`body`填充的 HTML 标记）：`div`

```
html {
    height: 100%;
    margin: 0;
    padding: 0; // this is ok, html fills the whole page
}

body {
    margin: 0;
    height: 100%;
    padding-top: 1px; // here, if I write padding:0;, space at the top will not be filled by body
} 
```

### 编辑

这是我的HTML，我不知道它是否有用。

```
<body>
    <div id="container">

    <header id="page_header">
        stuff
    </header>

    <section id="page_content">
        stuff
    </section>    

    <footer id="page_footer">
        stuff
    </footer>

    </div> <!-- end of div#container -->
</body> 
```

**注意**：我正在使用 Firefox 和 Chrome，行为相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:10:26.243

您可以尝试清除 html 和 body 标签 CSS 规则，然后简单地说：

```
/* basic CSS reset */
* {
  padding: 0;
  margin: 0;
}

html, body {
  height: 100%;
  width: 100%;
} 
```

# mysql - 按最新分组和排序

> ID：15560300
> 
> 赞同：-1
> 
> 时间：2013-03-21T23:52:31.147
> 
> 标签：mysql, sql, greatest-n-per-group

我想按 id 分组并按开始时间（最新行）排序。

数据：

```
begintime           id  type    created_at
2012-12-13 01:00:00 1   type1   2012-12-01 11:39:47
2012-12-13 00:00:00 1   type2   2012-12-02 00:29:10
2012-12-13 03:00:00 2   type3   2012-12-05 00:20:43
2012-12-13 02:00:00 2   type2   2012-12-06 11:31:41
2012-12-13 00:00:00 2   type1   2012-12-07 00:58:11 
```

我想得到：

```
begintime   id  type    created_at
2012-12-13 01:00:00 1   type1   2012-12-01 11:39:47
2012-12-13 03:00:00 2   type3   2012-12-05 00:20:43 
```

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:54:08.943

您的标题与您所写的问题相矛盾。它说`LATEST`，但你真的想要第`created_AT`一个`ID`。反正，

您可以使用一个子查询，它分别获得`created_AT`每个`ID`. 然后将子查询的结果连接回来以获取其他列的值。

```
SELECT  a.*
FROM    TableName a
        INNER JOIN
        (
            SELECT  ID, MIN(created_AT) max_date
            FROM    TableName
            GROUP   BY ID
        ) b ON  a.ID = b.ID AND
                a.created_AT = b.max_date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/cd4c8/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:05:41.327

尝试这个：

```
SELECT * 
FROM table_name 
GROUP BY id 
ORDER BY 
  id ASC, 
  begintime DESC; 
```

希望能帮助到你！

# c# - 通用类中静态字段的合适解决方法？

> ID：15560302
> 
> 赞同：1
> 
> 时间：2013-03-21T23:52:53.457
> 
> 标签：c#, generics, inheritance

鉴于泛型类型为每个类型组合创建单独的静态字段实例，如果我想在所有类型中都有一个静态字段，这是一个有效的模式吗？

```
public class BaseClass
{
    public static int P = 0;
}

public class ChildClass<T> : BaseClass
{
    public static int Q = 0;

    public void Inc()
    {
        // ChildClass<int> will have a different "Q" than ChildClass<double> 
        Interlocked.Increment(ref Q); 
        // all types of ChildClass will increment the same P
        Interlocked.Increment(ref P); 
    }
} 
```

这种方法有什么不安全的地方吗？我的玩具示例有效，但我只是想确保没有可怕的副作用、线程后果等 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T23:55:32.200

您可以使用[Interlocked.Increment](http://msdn.microsoft.com/en-us/library/dd78zt0c.aspx)获得更多线程安全的代码。

```
public void Inc()
{
    Interlocked.Increment(ref Q); // ChildClass<int> will have a different "Q" than ChildClass<double> 
    Interlocked.Increment(ref P); // all types of ChildClass will increment the same P
} 
```

或普通的旧`lock`

```
public class BaseClass
{
    protected static int P = 0;
    protected static object pLock = new object();
}

public class ChildClass<T> : BaseClass
{
    private static int Q = 0;
    private static object qLock = new object();

    public void Inc()
    {
        lock(qLock)
        {
            qLock++;
        }

        lock(pLock)
        {
            qLock++;
        }
    }
} 
```

请注意，每一个`T`都会有不同的`ChildClass<T>.Q`，但永远只有一个`BaseClass.P`。这意味着您必须使用单独的锁定对象来处理`Q`and `P`（从技术上讲，您用来锁定的任何东西`P`也可以用来锁定 all `Q`，但这可能不是您想要做的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T00:02:27.603

您的模式是有效的并且没有问题。没有*静态继承*之类的东西，但是您可以像往常一样访问任何类型的静态成员（前提是它们对您的派生类可见，例如不可见`private`）：

```
BaseClass.P = 10;
ChildClass<string>.Q = 20; 
```

C# 规范指出，对 32 位整数（即`int`）的单次读取或写入是*原子*的，这意味着它们可以在一条指令内完成，并且永远不会对另一个线程可见半写变量。

> **12.5 变量引用的原子性**
> 
> 以下数据类型的读取和写入应是原子的：bool、char、byte、sbyte、short、ushort、uint、int、float 和引用类型。此外，具有上一个列表中的基础类型的枚举类型的读取和写入也应该是原子的。其他类型的读取和写入，包括 long、ulong、double 和 decimal，以及用户定义的类型，不必是原子的。

当然，*不能*保证读写是原子的。例如，增加一个变量的值需要先读取然后再写入，这就是[`Interlocked`方法](http://msdn.microsoft.com/en-us/library/55dzx06b.aspx)发挥作用的地方。

顺便说一句，您可能知道您只会获得一个`P`静态变量，但`Q`静态变量的数量与您的 type 的不同泛型实例一样多`ChildClass<T>`。

# perl - perl：命名从 YAML 读取的哈希变量

> ID：15560307
> 
> 赞同：1
> 
> 时间：2013-03-21T23:53:25.270
> 
> 标签：perl, yaml

我正在从`YAML`文件中读取一些信息

**`groceries.yaml`**

```
# comment
fruit:
   apples: 1
   oranges: 1
   grapes: 1
vegetables:
   potatoes: 1
   onions: 1
   leeks: 1 
```

成`perl`脚本

**`myscript.pl`**

```
#!/usr/bin/perl

use strict;
use warnings;
use YAML::Tiny;

# Create a YAML file
my $stuff = YAML::Tiny->new;

# Open the config
$stuff = YAML::Tiny->read( 'groceries.yaml' );

print "Fruit: ", %{($stuff->[0]->{fruit})},"\n";
print "Vegetables: ", %{($stuff->[0]->{vegetables})},"\n";

exit 
```

这很好用，但我想有一个哈希值`fruit`和一个`vegetables`. 我天真的尝试是

```
my @keys = keys %{($stuff->[0])};
foreach my $key (@keys){
        my %{ $key }  = %{($stuff->[0]->{$key})},"\n";
} 
```

但显然这不起作用。

我很想了解我做错了什么，并对实现相同想法的不同工作流程持开放态度`:)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:03:22.363

试试这个 ：

```
#!/usr/bin/perl

use strict;
use warnings;
use YAML::Tiny;
use Data::Dumper;

# Create a YAML file
my $stuff = YAML::Tiny->new;

# Open the config
$stuff = YAML::Tiny->read( 'groceries.yaml' ); 

my %fruits = %{ $stuff->[0]->{fruit} };
my %vegetables = %{ $stuff->[0]->{vegetables} }; 
```

我不知道你为什么在代码中加上括号：

```
%{($stuff->[0]->{$key})},"\n"; 
```

我认为这是问题所在。

* * *

要遍历 HASH，

```
use Data::Dumper;
# ...
foreach my $key (keys %{ $stuff->[0] }) {
    print Dumper $stuff->[0]->{$key};
} 
```

* * *

## 编辑2

```
#!/usr/bin/perl

use strict;
use warnings;
use YAML::Tiny;
use Data::Dumper;

# Create a YAML file
my $stuff = YAML::Tiny->new;

# Open the config
$stuff = YAML::Tiny->read( 'groceries.yaml' );

my %top_h;

foreach my $key (keys %{ $stuff->[0] }) {
    $top_h{$key} = $stuff->[0]->{$key};
}

print Dumper \%top_h; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T06:57:33.697

此解决方案使您能够访问`%fruit`和`%vegetables`. 它们被声明为包全局变量 using`our`以便它们将在符号表中，然后允许您使用符号引用或 glob 分配。您还需要关闭`strict refs`才能启用此功能。另请参阅[此参考](http://perldoc.perl.org/perlref.html#Symbolic-references)。

```
use strict;
use warnings;
use YAML::Tiny;
use Data::Dumper;

my $stuff = YAML::Tiny->read('groceries.yml');

my %groceries = %{$stuff->[0]};

our %fruit;
our %vegetables;
{
    no strict 'refs'; 
    #no strict 'vars'; # don't need above 'our' declarations with this
    while (my ($key, $val) = each %groceries) {
        %$key = %$val;
        # or *$key = $val;
    }
}

print Dumper \%fruit; 
```

如果您事先不知道密钥，那么您还需要关闭，`strict vars`这样您就不需要在分配给它们之前声明哈希。但是，当您直接使用哈希时，您可能会收到警告。

但是说了这么多，我认为使用`%groceries`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T00:04:32.157

```
my ( $fruit, $vegetables) = @{$stuff->[0]}{ qw<fruit vegetables> }; 
```

如果您想循环执行此操作，首先，我会将第一个“文档”保存到本地参考。

```
my $yaml = $stuff->[0]; 
```

然后在一个while循环中，执行以下操作：

```
while ( my ( $k, $v ) = each %$yaml ) {
    say ucfirst( $k ) . ': ' . %$v;
} 
```

您也可以使用[`List::Pairwise`](http://search.cpan.org/perldoc?List%3a%3aPairwise)并执行此操作：

```
mapp { say ucfirst( $a ) . ': ' . %$b } %{ $stuff->[0] }; 
```

# .net - LINQ to SQL 关联不生成

> ID：15560310
> 
> 赞同：2
> 
> 时间：2013-03-21T23:53:42.917
> 
> 标签：.net, database, linq, linq-to-sql

我通过 SQL Server 创建了一个基本数据库，其表由以下代码生成：

```
CREATE TABLE [dbo].[Characters]
(
    [ID] INT NOT NULL PRIMARY KEY,
    [Name] varchar(MAX) NOT NULL,
    [RefName] varchar(8) NOT NULL
)

CREATE TABLE [dbo].[Players]
(
    [ID] INT NOT NULL PRIMARY KEY,
    [Name] VARCHAR(MAX) NOT NULL,
    [SkypeHandle] VARCHAR(MAX) NOT NULL
)

CREATE TABLE [dbo].[CharacterOwnership]
(
    [CharacterID] int NOT NULL,
    [PlayerID] int NOT NULL, 
    CONSTRAINT [FK_CharacterOwnership_ToCharacters] FOREIGN KEY ([CharacterID]) REFERENCES [Characters]([ID]),
    CONSTRAINT [FK_CharacterOwnership_ToPlayers] FOREIGN KEY ([PlayerID]) REFERENCES [Players]([ID]),
) 
```

从 Visual Studio 2012 的服务器资源管理器中拖动表，我生成了下图：

![自动生成的 ERD](../Images/964b2ab8d29fbf153c225e8bb592c865.png)

据我所知，我正确设置了主键和外键。

和

```
var db = new DBClassesDataContext(); 
```

LINQ 能够毫无问题地访问每个表以及该表的任何字段。但是它*不能*调出关联的表。

在过去的几天里，我已经使用 LINQ to SQL（使用另一个数据库）设置了另一个项目，并且之前没有遇到过这个问题。由于 PK 和 FK 的配置不正确，所以在其他所有遇到此问题的人周围搜索了一下，但我发现它们对我来说*似乎*是正确的。（如果不是，请随时指出我的方法的错误！）

我也遵循建议关闭 Visual Studio 并重新打开，但无济于事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T01:12:34.433

所以我想通了。对于那些可能通过谷歌遇到这个的人：

**每个表，*甚至关联表*，都必须有主键。没有例外。**

我不确定为什么 - 从逻辑上讲 - 这需要是这种情况，但我想这是 LINQ to SQL 的一些背景性质。

# android - Android：如何通过 csrf 验证定期将位置发送到 django 服务器

> ID：15560318
> 
> 赞同：1
> 
> 时间：2013-03-21T23:54:20.790
> 
> 标签：android, django, django-csrf

我希望我的 android 应用程序定期将位置信息发送到我的 django 服务器。根据我的研究，android 客户端应该在 JSON 中写入位置，在 http post 中写入有效负载 JSON，并定期向 django 服务器发送 http post 请求。并且http post请求是由客户端直接创建的，而不是django的post表单。这是正常的方式吗？

如果没有表单发布数据是一种通用方式，那么要停止csrf验证，根据[Android向django服务器csrf发送post请求失败](https://stackoverflow.com/questions/9252360/android-sending-post-requests-to-django-server-csrf-failing)的答案，android客户端应该“从服务器获取令牌并将其与POST数据一起发送"（假设我不使用@csrf_exempt 的解决方案）

我的问题是从哪里获得 csrftoken cookie？

如果我向发布表单发送 GET 请求，我确实会看到 csrftoken cookie，但如果直接发布数据（不要求发布表单），客户端从哪里获得 csrftoken cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:20:21.897

你可以使用像[sweetpie](http://tastypieapi.org/)或[rest-framework](http://django-rest-framework.org/)这样的 API 。获取令牌的唯一方法是访问提供它的页面。

# java - 您能否将使用 Java Prepared Statements 通过 jdbc 发送的数据分类为加密数据？

> ID：15560319
> 
> 赞同：0
> 
> 时间：2013-03-21T23:54:31.027
> 
> 标签：java, mysql, sql, encryption, jdbc

我有一个使用 jdbc 4 连接到外部 sql 数据库的 java 应用程序。它使用准备好的语句从数据库中选择数据并发送更新。在数据库和我的应用程序之间传输的数据是否可以归类为加密，或者我需要在我的应用程序中采取进一步的步骤才能对其进行加密？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:58:14.983

不，PreparedStatement 不等同于加密。您需要在服务器上启用（如果可以需要它更好；我熟悉的是 postgresql 而不是 mysql）SSL 并设置证书和私钥。然后，您需要指示您的应用程序使用 SSL 并（仅）接受属于服务器的证书。

请注意，传输中的 SSL 和加密虽然有用，但不能保护数据免受获得数据库访问权限的攻击者的侵害。

* * *

PS。很可能[ServerFault](https://serverfault.com/)将是有关如何配置 mysql 的答案的最佳资源。

* * *

**编辑以进行后续操作：**根据[文档](http://dev.mysql.com/doc/refman/5.0/en/security-against-attack.html)，初始连接中的凭据是安全的。

# iphone - 有没有办法在 APNS 推送消息中包含本地时间和时区

> ID：15560322
> 
> 赞同：3
> 
> 时间：2013-03-21T23:54:58.043
> 
> 标签：iphone, ios, objective-c, push-notification, apple-push-notifications

我需要发送一条 APNS 推送通知消息，该消息需要在警报消息中包含时间。有没有办法在最终用户的本地时区显示这个时间（基于当前地理位置）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:27:57.453

如果时间是警报的一部分，则无法做到这一点，因为您无法控制警报的显示（语言除外，可以通过发送 loc-key 参数来控制，该参数会被翻译为设备中的实际文本，基于设备使用的语言）。

如果您将时间作为负载的自定义参数传递，您可以在您的应用程序中处理它并根据需要显示它（假设应用程序已经在运行，或者如果它尚未运行，则用户点击了通知）。

如果时间是警报文本的一部分，您必须确定服务器中的时区并发送应显示的时间。

# jquery - 使用 JQuery 问题动态创建按钮

> ID：15560323
> 
> 赞同：0
> 
> 时间：2013-03-21T23:55:00.113
> 
> 标签：jquery, dialog

我有一个我一直在研究的类似 JQuery 桌面的应用程序。单击导航链接时，会打开一个新对话框。那部分一切都很好。我遇到的问题是在我的工具栏中为每个对话框创建图标。结构应如下所示：

```
<Div id="minimize-footer>
<div id="category1>
<a href>Dialog Title  </>
<a href>Dialog Title  </>
</div>

<div id="category2>
<a href>Dialog Title  </>
<a href>Dialog Title  </>
</div> 
```

等等。代码应检查类别 div 是否存在，如果不存在，则创建它并添加链接。如果它存在，我只需要将它添加到已经存在的类别 div 中。我不确定为什么我使用的代码不起作用。我创建了一个小提琴，我一直在玩弄它，并且希望在我想做的事情上有一点方向。

谢谢，

**[小提琴](http://jsfiddle.net/jahmekyat/CGV9N/10/)**

我已经对其进行了修改，因此正在创建按钮，但它并没有添加到同一个类别 div 中，它只是每次都添加一个新的。也不是将类别添加到 div id，它只是说对象。这就是它正在做的事情，我已将小提琴链接更新为：

```
<div id="minimize-footer" class="dialog-700 ui-corner-all ui-button" title="Click to restore dialog">
<div id="[object" object]="">
<a>Title Dialog</a>
</div>
<div id="[object" object]="">
<a>Title Dialog</a>
</div>
<div id="[object" object]="">
<a>Title Dialog</a>
</div>
<div id="[object" object]="">
<a>Title Dialog</a>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:06:06.603

看看我编辑的这个小提琴。[http://jsfiddle.net/VDrw7/](http://jsfiddle.net/VDrw7/)

在你的 jsFiddle 你有。

```
Category = $("drug"); 
```

应该是

```
Category = $("#drug"); 
```

因为您正在寻找 ID 为 drug 的元素。

# c - gcc makefile 不会编译

> ID：15560324
> 
> 赞同：1
> 
> 时间：2013-03-21T23:55:04.970
> 
> 标签：c, gcc, makefile

我的最终可执行文件（虽然这是在 unix 中）将是 proj07。

```
proj07: /user/cse320/Projects/project07.driver.o proj07.support.o
    gcc -Wall /user/cse320/Projects/project07.driver.o proj07.support.o

proj07.support.o: proj07.support.c
    gcc -c  proj07.support.c 
```

这将创建 proj07.support.o 但编译后不存在 proj07。我没有收到错误，所以我的错误一定很简单，但我似乎无法弄清楚。

这是输出：

```
 gcc -c  proj07.support.c
 gcc -Wall /user/cse320/Projects/project07.driver.o proj07.support.o 
```

另外我要使用静态驱动程序来测试我的文件，这就是为什么路径是这样的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:57:41.617

您可能确实有一个`a.out`可执行文件。添加`-o $@`到您的第一次`gcc`出现，您应该没问题。

# canvas - 画布，触发鼠标事件

> ID：15560329
> 
> 赞同：0
> 
> 时间：2013-03-21T23:55:39.617
> 
> 标签：canvas, mouseevent, addeventlistener

我正在尝试理解画布示例的代码：

为什么事件处理程序代码中的第三个参数为“false”？它代表什么？

这里是完整的代码

```
function init () {
// ...
// Attach the mousemove event handler.
canvas.addEventListener('mousemove', ev_mousemove, false);
}

// The mousemove event handler.
var started = false;
function ev_mousemove (ev) {
  var x, y;

// Get the mouse position relative to the canvas element.
if (ev.layerX || ev.layerX == 0) { // Firefox
    x = ev.layerX;
    y = ev.layerY;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:37:27.867

似乎缺少部分代码。正如您所说，变量已设置但未使用，这就是为什么我觉得缺少一些代码部分（在 ev_mousemove 函数之后也缺少右大括号）。

ev.layerX == 0 就在 || 之后 这意味着“或”。就是这样使用的，所以它不会在 Firefox 中产生错误。基本上它说如果 ev.layerX 为真（现有）或如果为 0 做...

ND

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:44:38.873

**AddEventListener 中的第三个 true/false 参数用于“捕获”事件**

如果为真，那么您的“mousemove”事件将始终*首先*转到*您的*ev_mousemove，*然后*转到正常的 DOM 事件树。

如果为 false，那么您的“mousemove”事件只会通过正常的 DOM 事件树。

除非您有理由优先考虑自己的事件处理程序，否则对于任何类型的事件，您通常都可以将其保留为 false。

# java - 法线与虚线

> ID：15560335
> 
> 赞同：0
> 
> 时间：2013-03-21T23:56:17.523
> 
> 标签：java, android, android-canvas, paint

您会在图片中看到，左侧是法线，右侧是虚线。在我选择了虚线之后，法线变成了虚线。如果我尝试用法线绘画，它会将虚线转换为法线。

![两条线](../Images/ffadb3a6867c166b2ad8c3a4e2cfe173.png)

**这是`View`我用来创建每一行**的：

```
public void setDashLine(){

    dashedLine = true;
    paint = new Paint();
    paint.setPathEffect(dashEffect);
    paint.setStyle(Paint.Style.STROKE);
    paint.setAntiAlias(true);
            paint.setStrokeJoin(Paint.Join.ROUND);
            paint.setStrokeWidth(STROKE_WIDTH);
}

public void setNormalLine(){
    //paint.setColor(Color.BLACK);
    dashedLine = false;

    paint.setPathEffect(null);
    paint.setStyle(Paint.Style.STROKE);
    paint.setPathEffect(null);
    paint.setAntiAlias(true);
            paint.setStrokeJoin(Paint.Join.ROUND);
            paint.setStrokeWidth(STROKE_WIDTH);
}

protected void onDraw(Canvas canvas) {

    if(dashedLine){
        paint.setPathEffect(dashEffect);
    }
    else {
        paint.setPathEffect(null);
    }

final OnTouchListener drawLineListener = new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {

        FirstActivity.ll.setVisibility(LinearLayout.GONE);

        switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
              myLine = new MyLine();
              myLine.xStart = event.getX();
              myLine.yStart = event.getY();

            return true;

          case MotionEvent.ACTION_MOVE:
          case MotionEvent.ACTION_UP:
            myLine.xEnd = event.getX();
            myLine.yEnd = event.getY();
            invalidate();
            lineList.add(myLine); 
            break;

          default:
            Log.d("mock it up", "Unknown touch event  " + event.toString());
            return false;
        }
        return true;

    }
};

final OnTouchListener drawDashedLineListener = new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {

        FirstActivity.ll.setVisibility(LinearLayout.GONE);

        switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
             return true;

          case MotionEvent.ACTION_MOVE:
          case MotionEvent.ACTION_UP:

            break;

          default:
            Log.d("mock it up", "Unknown touch event  " + event.toString());
            return false;
        }
        return true;

    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:21:44.673

你应该打电话给：paint = new Paint(); 在公共无效 setNormalLine() 中？

# c - 从一台服务器监听多个端口

> ID：15560336
> 
> 赞同：18
> 
> 时间：2013-03-21T23:56:17.460
> 
> 标签：c, linux, sockets

是否可以在一个应用程序中绑定和监听 Linux 中的多个端口？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T00:21:24.597

对于您要侦听的每个端口，您：

1.  使用 .创建一个单独的套接字`socket`。
2.  使用 将其绑定到适当的端口`bind`。
3.  调用`listen`套接字，以便为它设置一个监听队列。

此时，您的程序正在侦听多个套接字。为了接受这些套接字上的连接，您需要知道客户端正在连接到哪个套接字。这就是`select`进来的地方。碰巧，我有代码可以做这个，所以这里有一个完整的测试示例，等待多个套接字上的连接并返回连接的文件描述符。远程地址在附加参数中返回（缓冲区必须由调用者提供，就像接受一样）。

（`socket_type`这里是`int`Linux 系统上的 typedef，并且`INVALID_SOCKET`是`-1`。这些是因为此代码也已移植到 Windows。）

```
socket_type
network_accept_any(socket_type fds[], unsigned int count,
                   struct sockaddr *addr, socklen_t *addrlen)
{
    fd_set readfds;
    socket_type maxfd, fd;
    unsigned int i;
    int status;

    FD_ZERO(&readfds);
    maxfd = -1;
    for (i = 0; i < count; i++) {
        FD_SET(fds[i], &readfds);
        if (fds[i] > maxfd)
            maxfd = fds[i];
    }
    status = select(maxfd + 1, &readfds, NULL, NULL, NULL);
    if (status < 0)
        return INVALID_SOCKET;
    fd = INVALID_SOCKET;
    for (i = 0; i < count; i++)
        if (FD_ISSET(fds[i], &readfds)) {
            fd = fds[i];
            break;
        }
    if (fd == INVALID_SOCKET)
        return INVALID_SOCKET;
    else
        return accept(fd, addr, addrlen);
} 
```

此代码不会告诉调用者客户端连接到哪个端口，但您可以轻松添加一个`int *`参数，该参数将获取看到传入连接的文件描述符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T00:09:41.163

您只`bind()`需要一个套接字，然后`listen()`-`accept()`绑定的套接字用于服务器，来自的 fd`accept()`用于客户端。您在后者上进行选择，以查找任何在输入上有待处理数据的客户端套接字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-31T00:01:58.220

在这种情况下，您可能会对[libevent](http://libevent.org/)感兴趣。它将`select()`为您完成工作，可能使用更好的界面，例如`epoll()`.

最大的缺点`select()`是使用`FD_...`宏将套接字数限制为变量中的最大位数`fd_set`（从大约 100 到 256）。如果你有一个有 2 或 3 个连接的小型服务器，你会没事的。如果您打算在更大的服务器上工作，那么`fd_set`很容易溢出。

此外，使用`select()`or`poll()`允许您避免服务器中的线程（即您可以使用`poll()`您的套接字并知道您是否可以`accept()`、`read()`或`write()`它们。）

但是如果你真的想像 Unix 那样做，那么你需要`fork()`在调用之前考虑 -ing `accept()`。在这种情况下，您并不绝对需要`select()`or `poll()`（除非您正在侦听许多 IP/端口并希望所有孩子都能够回答任何传入的连接，但是您对这些有缺点......内核可能会向您发送另一个请求，而你已经在处理一个请求，然而，只要一个`accept()`，内核就知道你很忙，如果不是在`accept()`调用本身的话——好吧，它的工作方式并不完全一样，但作为一个用户，这就是它为你工作的方式。 )

随着`fork()`您在主进程中准备套接字，然后调用`handle_request()`子进程来调用该`accept()`函数。这样，您可能有任意数量的端口和一个或多个子端口来监听每个端口。这是在 Linux 下真正非常快速地响应任何传入连接的最佳方式（即，作为用户并且只要您有子进程等待客户端，这是即时的。）

```
void init_server(int port)
{
    int server_socket = socket();
    bind(server_socket, ...port...);
    listen(server_socket);
    for(int c = 0; c < 10; ++c)
    {
        pid_t child_pid = fork();
        if(child_pid == 0)
        {
            // here we are in a child
            handle_request(server_socket);
        }
    }

    // WARNING: this loop cannot be here, since it is blocking...
    //          you will want to wait and see which child died and
    //          create a new child for the same `server_socket`...
    //          but this loop should get you started
    for(;;)
    {
        // wait on children death (you'll need to do things with SIGCHLD too)
        // and create a new children as they die...
        wait(...);
        pid_t child_pid = fork();
        if(child_pid == 0)
        {
            handle_request(server_socket);
        }
    }
}

void handle_request(int server_socket)
{
    // here child blocks until a connection arrives on 'server_socket'
    int client_socket = accept(server_socket, ...);
    ...handle the request...
    exit(0);
}

int create_servers()
{
    init_server(80);   // create a connection on port 80
    init_server(443);  // create a connection on port 443
} 
```

请注意，该`handle_request()`函数在此处显示为处理一个请求。处理单个请求的优点是您可以使用 Unix 方式进行处理：根据需要分配资源，一旦请求得到响应，`exit(0)`. `exit(0)`将为您调用必要的`close()`,`free()`等。

相反，如果您想连续处理多个请求，您需要确保在循环回`accept()`调用之前释放资源。此外，`sbrk()`几乎永远不会调用该函数来减少孩子的内存占用。这意味着它会时不时地增长一点。这就是为什么像 Apache2 这样的服务器被设置为在开始新的孩子之前回答每个孩子一定数量的请求（这些天默认情况下它在 100 到 1,000 之间。）

# python - 在 Win32 上将临时 DLL 加载到 Python 中

> ID：15560337
> 
> 赞同：4
> 
> 时间：2013-03-21T23:56:18.117
> 
> 标签：python, windows, ctypes

我在各种 Python 代码库中看到的在运行时动态生成/加载 C 函数的常见习语是：

```
import tempfile
import shutil
from ctypes import CDLL

workdir = tempfile.mkdtemp()
try:
    # Generate and write code in workdir
    # ...
    # Compile and link into an .so/.dylib/.dll
    # ...
    lib = CDLL(path_to_lib)
finally:
    shutil.rmtree(workdir) 
```

虽然这似乎在 *nix 系统上工作得很好，但我不确定它在 Win32 上的工作情况如何。这是因为，根据我的经验，当临时目录中的 .dll 映射到进程时，无法取消链接。因此，`rmtree`会失败。

我可以使用哪些选项来确保在 Win32 上尽快删除 .dll（及其所在的目录）（以便在底层`lib`被 gc'ed 或应用程序终止时尽快删除，以免留下临时垃圾关于）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:35:32.190

使用 Kernel32 函数[`FreeLibrary`](http://msdn.microsoft.com/en-us/library/ms683152)取消映射 DLL 并减少其引用计数。要获取句柄，您可以使用[`GetModuleHandleW`](http://msdn.microsoft.com/en-us/library/ms683199)，但它已经在`_handle`属性中可用。

**编辑：**底层`_ctypes`模块已经提供了这个功能以及`dlclose`POSIX。如果出现错误，这些函数会引发`WindowsError`/ `OSError`。

```
>>> import os                               
>>> from ctypes import *  
>>> from _ctypes import FreeLibrary

>>> lib = CDLL('./lib.dll')
>>> hlib = lib._handle
>>> del lib
>>> FreeLibrary(hlib)

>>> os.remove('./lib.dll')
>>> os.path.exists('./lib.dll')
False 
```

# javascript - 如何实现防止输入任意标签的标签选择器？

> ID：15560340
> 
> 赞同：4
> 
> 时间：2013-03-21T23:56:37.943
> 
> 标签：javascript, jquery, html

我需要在 HTML 页面中实现标签或类别选择器。

标签需要提供给用户，并且不应*允许*他们输入任意标签。

jQuery UI 提供了一个[非常流行的自动完成实现](http://jqueryui.com/autocomplete/#multiple)，但它似乎允许选择任意标签。

在下面的屏幕截图中，我被允许选择`"j"`并且`"javascript"`没有任何特别的努力。

是否有任何技术、实现或 3rd 方工具可以用来**不允许用户输入任意标签？**

编辑：我的 Web 应用程序使用 PHP、jQuery、jQuery-UI、MySQL 和常用的前端工具运行。

![在此处输入图像描述](../Images/2204f04cec514936f5d17a35aa322f65.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T01:05:01.330

如果使用额外的库对您来说不是问题，Bootstrap 会通过一些 JQuery 帮助解决您的问题。

我为您准备了一个简单的 JSFiddle，您可以在其中看到它的实际效果：

[http://jsfiddle.net/sgmonda/Tjbys/8/](http://jsfiddle.net/sgmonda/Tjbys/8/)

我所做的是准备一个文本输入和一个`<ul>`您选择的标签将出现的列表。Bootstrap 允许您在写入输入时自动完成，因此您必须关闭默认的自动完成功能：

```
<input type="text" id="tags" autocomplete="off" />
<ul id="selected-tags"></ul> 
```

然后，您只需添加一些 JQuery 行，让 Bootstrap 自动完成您的输入并将选定的标签添加到您的`<ul>`列表中：

```
$('#tags').typeahead({
    source: ['elem1', 'elem2', 'elem3', 'otherElem', 'oneMore'],
    updater: function (item) {
         $('#selected-tags').append('<li>' + item + '</li>');   
    }
}); 
```

您可以随时阅读列表以了解用户选择了哪些元素。

```
var selectedTags = [];
$('#selected-tags').each(function(){
   selectedTags.push($(this).text()); 
}); 
```

**编辑**

如果您想避免重复标签并添加删除它们的可能性：

[http://jsfiddle.net/sgmonda/JMepQ/3/](http://jsfiddle.net/sgmonda/JMepQ/3/)

# xcode - 更新 app-info.plist 后的 xcode 仅显示应用程序中可用的旧信息

> ID：15560348
> 
> 赞同：1
> 
> 时间：2013-03-21T23:57:16.157
> 
> 标签：xcode, build, version, plist

通过自定义脚本，我在构建和运行应用程序时更新了我的 app-info.plist 中的 CFBundleVersion。此信息也用于应用程序中以显示应用程序名称和版本。更新在构建过程中运行良好，但不幸的是旧信息是在应用程序本身中读取的。

例如，当我构建并运行应用程序时，app-info.plist 会更新，`CFBundleVersion`现在有 value `8`，但在模拟器中`7`会显示 value。

似乎更新的 app-info.plist 没有在构建过程中使用，而是使用旧版本。

如何确保在我的应用中使用更新后的 app-info.plist？一方面，脚本的执行应该是构建过程中的第一件事，或者另一方面 app-info.plist 应该在构建过程中更新。但是对于两个我都不知道该怎么做......

我在 Project > Buildphases > Add Build Phase > Add Run Script 下添加了自定义脚本。具有以下内容：

```
shell: /bin/bash   Tools/addVersionNumber.sh 
```

## 工具/addVersionNumber.sh -> 按需要工作

```
#/bin/bash
# script that should be executed in the build phase
# to set the build number correct

plist="app-folder/app-Info.plist"

## get git information 
# git_rev_full_hash=$( git rev-parse HEAD )
git_amount_commits=$( git rev-list HEAD | wc -l )
git_rev_short_hash=$( git rev-parse --short HEAD )
buildRevision="$git_amount_commits: $git_rev_short_hash"

# set build revision ( git short hash - amount of commits )
/usr/libexec/PlistBuddy -c "Set :BuildRevision $buildRevision" $plist""

## build number
buildNumber=$( /usr/libexec/PlistBuddy -c "Print CFBundleVersion" $plist ) 
buildNumber=$(( $buildNumber + 1 ))

# set new build number
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" $plist 
```

干杯——杰里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:51:34.040

找到了解决方案。诀窍是 build 文件夹中的 info.plist 和 dsym (?) 中的 plist 也必须更新。

我的运行脚本现在看起来像这样

```
#/bin/bash
# script that should be executed in the build phase
# to set the build number correct
#
# http://www.cimgf.com/2008/04/13/git-and-xcode-a-git-build-number-script/
# http://stackoverflow.com/questions/7944185/how-to-get-xcode-to-add-build-date-time-to-info-plist-file
# http://www.danandcheryl.com/2012/10/automatic-build-numbers-for-ios-apps-using-xcode

# Marketing Number is in CFBundleShortVersionString - will be edited manually
# @TODO add logging 

plist="app-folder/app-Info.plist"
build_plist=$BUILT_PRODUCTS_DIR/$INFOPLIST_PATH
conInfo="Contents/Info.plist"
dsym_plist=$DWARF_DSYM_FOLDER_PATH/$DWARF_DSYM_FILE_NAME/$conInfo

function writePlist( ) { 

    # set build revision ( git short hash - amount of commits )
    /usr/libexec/PlistBuddy -c "Set :BuildRevision $buildRevision" $1

    # set build date
    /usr/libexec/PlistBuddy -c "Set :BuildDate $buildDate" $1

    #set build number
    /usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" $1
}

# git_rev_full_hash=$( git rev-parse HEAD )
buildRevision=$( git rev-parse --short HEAD )
git_rev_plist_hash=$( /usr/libexec/PlistBuddy -c "Print BuildRevision" $plist )

# Only update version if a commit was performed. Avoid update version when in development cycle
if [[ $git_rev_plist_hash != $buildRevision ]]; then

    ### variables for updating plist
    # set new build number and date
    buildNumber=$( /usr/libexec/PlistBuddy -c "Print CFBundleVersion" $plist ) 
    buildNumber=$(( $buildNumber + 1 ))
    buildDate=$(date "+%Y-%m-%d %T %z %Z")

    writePlist $plist
    writePlist $build_plist
    writePlist $dsym_plist

fi 
```

干杯——杰里克

# c# - 转义字符

> ID：15560354
> 
> 赞同：0
> 
> 时间：2013-03-21T23:57:50.687
> 
> 标签：c#, javascript

我怎样才能逃避引号，以便这个语句

```
string sScript =@"<script language='javascript'>function ShowDropDown(){var combo = $find("""+this.ClientID+""");combo.showDropDown(true);}</script>"; 
```

读起来像这样

```
function ShowDropDown() {
                var combo = $find("ctl00_ctl00_MainContent_MainContent_VendorTypeIdComboBox");
                combo.showDropDown(true);
            } 
```

**编辑-更新** 我可能会问错问题，因为我不断收到不同的错误。如果我将 javascript 直接放在页面上，则该功能正常工作。当我以这种方式注入javascript时，它不起作用

我在后面的代码中这样做

```
string sScript =@"<script language='javascript'> function ShowDropDown(){  var combo = $find("""+this.ClientID+@"""); combo.showDropDown(true); } </script>";
        ScriptManager.RegisterStartupScript(this.Page, this.Page.GetType(), "autoopendropdown", sScript, false);

        OnClientFocus = "ShowDropDown()"; 
```

它以这种方式生成

```
<script language='javascript'> function ShowDropDown(){  var combo = $find("ctl00_ctl00_MainContent_MainContent_VendorTypeIdComboBox"); combo.showDropDown(true); } </script> 
```

但变量***组合***为空，这就是问题所在。我无法弄清楚为什么当它使用代码隐藏注册时它不起作用，而当它正常写在它的页面上时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:02:09.680

简单的方法：`@`在第二个字符串文字的开头添加相同的内容：

```
string sScript =@"<script language='javascript'>function ShowDropDown(){var combo = $find("""+this.ClientID+@""");combo.showDropDown(true);}</script>"; 
```

更好的方法：使用 string.Format

```
string sScript = string.Format(
@"<script language='javascript'>
    function ShowDropDown(){
        var combo = $find(""{0}"");combo.showDropDown(true);
    }
</script>",
    this.ClientID); 
```

（最好的方法：使用不显眼的 javascript 分离关注点。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:04:20.890

```
string sScript = "<script language='javascript'>\n" +
                 "function ShowDropDown() {\n" +
                 "    var combo = $find(""" + this.ClientID + """);\n" +
                 "    combo.showDropDown(true);\n" +
                 "}\n" +
                 "</script>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T00:18:31.737

注意：脚本标签不推荐使用语言，请使用类型

```
string sScript =@"
<script type='text/javascript'>
function ShowDropDown(){
                var combo = $find(""" + this.ClientID + @""");
                combo.showDropDown(true);
            }
</script>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T23:59:47.033

C#（和大多数 C 系列语言）中双引号的转义是`\"`

或者您可以只使用单引号，因为它在 JavaScript 中有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T00:01:15.843

如果我正确理解您的问题，您想`this.ClientID`与脚本的其余部分连接。

您可以使用如下`String.Format`方法执行此操作：

```
string scriptFormat = @"<script language='javascript'>function ShowDropDown(){var combo = $find(""{0}"");combo.showDropDown(true);}</script>";
string sScript = String.Format(scriptFormat, this.ClientID); 
```

请注意，在逐字字符串文字中，`""`会产生单个`"`字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T00:02:16.057

`\`您可以使用该字符转义它们。

有关转义组合的完整列表，请参阅 C#[语言规范](http://msdn.microsoft.com/en-us/library/aa691087%28v=vs.71%29.aspx)的第 2.4.4.4 节字符文字。

# php - 来自多个文本输入的 SQL 查询

> ID：15560356
> 
> 赞同：0
> 
> 时间：2013-03-21T23:57:59.823
> 
> 标签：php, sql, mysqli

我正在尝试从四个单独的文本字段中收集信息并在后端生成查询以显示结果。我已经尝试了许多已经在这里提出的解决方案，但我不断得到重复的结果。我让它处理一个查询：

```
<?php    
$query = "SELECT * FROM book WHERE booktitle LIKE '%" . mysql_real_escape_string($_POST['title']) . "%'";
$result = mysqli_query($con, $query) or die("Error in query");
while ($row = mysqli_fetch_array($result)) {
?>
<img src="<?php echo $row[12]; ?>" width="112px" height="150px" />
<?php
echo "<b>Title: </b>" . $row[1] . "<br />";
echo "<b>Author: </b>" . $row[2] . "<br />";
echo "<b>Price:</b> &pound;" . $row[9] . "<br />";
echo "<b>Description:</b> " . substr($row[3],0,320) . "...<br /><hr>";
} 
```

但我还需要以某种方式合并其他 3 个结果？

```
$query = "SELECT * FROM book WHERE author LIKE '%" . mysql_real_escape_string($_POST['author']) . "%'";
$query = "SELECT * FROM book WHERE isbn LIKE '%" . mysql_real_escape_string($_POST['isbn']) . "%'";
$query = "SELECT * FROM book WHERE description LIKE '%" . mysql_real_escape_string($_POST['keyword']) . "%'"; 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:04:46.140

```
<?php
$mysqli = new mysqli("localhost", "username", "password", "database_name");

$book_title = mysql_real_escape_string($_POST['title']);
$author = mysql_real_escape_string($_POST['author']);
$isbn = mysql_real_escape_string($_POST['isbn']);
$keyword = mysql_real_escape_string($_POST['keyword']);

$query = "SELECT * FROM book WHERE booktitle LIKE '%{$book_title}' OR author LIKE'%" .     $author . "%'
OR isbn LIKE '%" . $isbn . "%' OR description LIKE '%" . $keyword . "%'";
$result = $mysqli->query($query);

 while($row = $result->fetch_array()):?>
<img src="<?=$row['image_column_name']; ?>" width="112px" height="150px" />
    <b>Title:</b> <?=$row['title_column_name']; ?> <br>
    <b>Author:</b> <?=$row['author_column_name']; ?> <br>
    <b>Price:</b> <?=$row['price_column_name']; ?> <br>
    <b>Description:</b> <?=substr($row['desc_column_name'],0,320)?>
<hr>
<?php endwhile; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:04:46.127

您可以使用带有 LIKE 关键字的 OR 语句同时搜索所有这些。

```
$query = "SELECT * FROM book WHERE booktitle LIKE '%" . $title . "%' OR author LIKE'%" . $author . "%' OR isbn LIKE '%" . $isbn . "%' OR description LIKE '%" . $keyword . "%'; 
```

如果变量为空，那么您将拥有`WHERE booktitle LIKE '%%'`，它返回所有行。您将需要根据输入构建查询。

```
// Determine the WHEREs to use
$where = array();
if ( ! empty($title))
    $where[] = "booktitle LIKE '%" . $title . "%'";
if ( ! empty($author))
    $where[] = "author LIKE '%" . $author . "%'";
if ( ! empty($isbn))
    $where[] = "isbn LIKE '%" . $isbn . "%'";
if ( ! empty($description))
    $where[] = "description LIKE '%" . $description . "%'";

// Build the query
$query = 'SELECT * FROM book';
if ( ! empty($where))
    $query .= ' WHERE ' . implode(' OR ', $where); 
```

*注意：为了便于阅读，我省略了转义输入。*

# java - 深度复制尝试

> ID：15560358
> 
> 赞同：0
> 
> 时间：2013-03-21T23:58:10.827
> 
> 标签：java

我正在尝试构建一种方法来深度复制一个类：

```
public MyClass clne() {
    MyClass cpy = new MyClass();
    cpy.var1 = getVar1(); //getVar1 is a method returning the value of var1
    cpy.var2 = getVar2();
    return cpy;
} 
```

但是，当我运行时：

```
MyClass x = new MyClass();
x.var1 = 18;
MyClass y = x.clne();
y.myMethod(); // Where myMethod is a method changing the value of var1 to, say 4.
System.out.println(x.var1); 
```

x.var1 的值为 4。

难道我做错了什么？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:02:39.837

您应该创建 var1 的新实例，而不是指向旧引用，除非它们当然是原语。

```
cpy.var1 = new Var1( getVar1() ); 
```

这将要求您为 Var1 类编写一个复制构造函数。不过，这可以通过其他方式完成。

希望有帮助。

PS，你基本上是在做一个浅拷贝。

# python - TypeError: 'set' 对象不能在 python 中使用 REQUESTS 模块进行下标

> ID：15560364
> 
> 赞同：0
> 
> 时间：2013-03-21T23:58:34.173
> 
> 标签：python, python-requests

我是 python 的新手，也是“requests”模块的新手，而且 stackoverflow 对我来说很轻松。:) 如果有人能给我一些关于这对我的代码意味着什么的指示，我将不胜感激。

代码：

```
import requests

url = 'https://somewebsite.com/svc/api/json/loginUser'

headers = {'User-Agent':'Python _dopost() method',
    'Accept':'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
    'Accept-Charset':'Shift_JIS,utf-8;q=0.7,*;q=0.7',
    'Accept-Encoding':'gzip,deflate',
    'Content-Type':'/plain; charset=UTF-8'}

data = {'<soapenv:Envelope><soapenv:Body><loginUser><email>tacoflavoredkisses@yum.com</email><password>password</password><setcookie>1</setcookie><remember>1</remember></loginUser></soapenv:Body></soapenv:Envelope>'}

r = requests.post(url, data=data, headers=headers) 
```

错误：TypeError：'set' 对象不可下标

有一个很长的python错误，这是一个片段，希望足够了。

```
TypeError                                 Traceback (most recent call last)
/Library/Python/2.7/site-packages/ipython-0.13.1-py2.7.egg/IPython/utils/py3compat.pyc in execfile(fname, *where)
176             else:
177                 filename = fname
--> 178             __builtin__.execfile(filename, *where)

 21 
 22 payload = {'<soapenv:Envelope><soapenv:Body><loginUser><email>tacoflavoredkisses@yum.com</email><password>password</password><setcookie>1</setcookie><remember>1</remember></loginUser></soapenv:Body></soapenv:Envelope>'}
---> 23 r = requests.post(url, data=data, headers=headers)
 24 
 25 print r.status_code

/Library/Python/2.7/site-packages/requests-1.1.0-py2.7.egg/requests/api.pyc in post(url, data, **kwargs)
 85     """
 86 
---> 87     return request('post', url, data=data, **kwargs)
/Library/Python/2.7/site-packages/requests-1.1.0-py2.7.egg/requests/api.pyc in request(method, url, **kwargs)
 42 
 43     session = sessions.Session()
---> 44     return session.request(method=method, url=url, **kwargs)
/Library/Python/2.7/site-packages/requests-1.1.0-py2.7.egg/requests/sessions.pyc in request(self, method, url, params, data, headers, cookies, files, auth, timeout, allow_redirects, proxies, hooks, stream, verify, cert)
277 
278         # Send the request.
--> 279         resp = self.send(prep, stream=stream, timeout=timeout, verify=verify, cert=cert, proxies=proxies)
/Library/Python/2.7/site-packages/requests-1.1.0-py2.7.egg/requests/sessions.pyc in send(self, request, **kwargs)
372         """Send a given PreparedRequest."""
373         adapter = self.get_adapter(url=request.url)
--> 374         r = adapter.send(request, **kwargs) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-22T05:23:25.720

将数据更改为字符串为我解决了这个问题。

# c# - 如何使用c#访问另一个应用程序的菜单栏

> ID：15560365
> 
> 赞同：1
> 
> 时间：2013-03-21T23:58:38.323
> 
> 标签：c#, winforms, automation

我目前正在编写一个有助于自动安装各种软件的应用程序。此过程包括启动另一个应用程序，然后访问菜单栏以访问打开命令。我知道如何打开应用程序，但任何人都可以帮助如何访问菜单栏吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T00:02:22.243

您可以使用一个特殊的 API，我相信它是[Windows 自动化 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ff486375%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:01:08.833

一种方法是将击键发送到应用程序，假设应用程序对其菜单选项使用键盘快捷键。例如，在许多应用程序中，您可以使用`ALT`+`F`打开文件菜单，然后`S`使用保存或`X`退出等。

# php - 使用 PHP 作为 Arduino 的“重定向”

> ID：15560367
> 
> 赞同：0
> 
> 时间：2013-03-21T23:58:53.173
> 
> 标签：php, arduino

我创建了一个 Arduino 以太网草图，这样在按下按钮时，它会请求一个 URL（[http://myserver.lan/sensors/garage.php](http://myserver.lan/sensors/garage.php)）。我的想法是，然后我可以使用这个[PHP](http://en.wikipedia.org/wiki/PHP)脚本来提取一个单独的 URL，我可以更新它而无需重新刷新 Arduino。这个单独的 URL 驱动某些家庭自动化事件。

我尝试了以下内容`garage.php`：

```
<?php
    $homepage = file_get_contents('http://myserver.lan/test/');
?> 
```

这适用于我的浏览器，但不适用于 Arduino 板。两者的日志如下：

阿杜诺：

```
192.168.2.50 - - [21/Mar/2013:13:43:58 -0400] "GET /sensors/garage.php HTTP/1.1" 400 515 "-" "-" 
```

苹果浏览器：

```
192.168.2.3 - - [21/Mar/2013:13:43:28 -0400] "GET /test/ HTTP/1.0" 200 2235 "-" "-"
192.168.2.65 - - [21/Mar/2013:13:43:28 -0400] "GET /sensors/garage.php HTTP/1.1" 200 293 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/536.28.10 (KHTML, like Gecko) Version/6.0.3 Safari/536.28.10" 
```

为了完整起见，这是我的 Arduino 草图中的代码示例：

```
EthernetClient client;
if (client.connect(rackserver, 80)) {
    client.println("GET /sensors/garage.php HTTP/1.1");
}
client.stop(); 
```

如何修复 PHP 脚本？我希望在不重新刷新我的 Arduino 的情况下做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:29:31.850

`400`请注意 Arduino 请求的日志如何显示服务器以（错误请求）的响应代码进行响应。您的 Arduino 代码未发送有效的 HTTP 请求，原因有两个：

1.  有效的 HTTP 请求以空行结束。
2.  您指定了 HTTP 版本 1.1，它要求请求包含`Host:`标头。

试试这个：

```
EthernetClient client;
if (client.connect(rackserver, 80)) {
  client.println("GET /sensors/garage.php HTTP/1.0");
  client.println();
}
client.stop(); 
```

# php - 从数组php foreach中获取父键

> ID：15560372
> 
> 赞同：0
> 
> 时间：2013-03-21T23:59:45.440
> 
> 标签：php, arrays

我有一个数组 $arr：

```
 Array
(
[2] => Array
    (
        [status] => 0
        [item] => Food Processer
        [catagory] => Appliance
    )

[23] => Array
    (
        [status] => 1
        [item] => 12 cup medium muffin tray
        [catagory] => Kitchenware
    )

[24] => Array
    (
        [status] => 1
        [item] => 24 cup mini muffin tray
        [catagory] => Kitchenware
    ) etc... 
```

我想最终为每个元素提供一个表格行：

```
<tr id="2" class="0"><td>Food Processer</td><td>Appliance</td></tr> 
```

我当前的代码是：

```
foreach ($arr as $a)
    {
    echo('<tr  id="'.key($a).'" class="'.$a['status'].'">');
        echo('<td>');
        echo($a['item']);
        echo('</td>');
        echo('<td>');
        echo($a['catagory']);
        echo('</td>');  

        echo('</tr>');
    } 
```

但我将状态键（字符串“状态”）作为 id 值如何获取父 $arr 键，即（2,23,24）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:03:08.760

您应该在 foreach 中为您的 id 指定一个变量：

```
foreach ($arr as $key => $data) {
    echo('<tr  id="'.$key.'" class="'.$data['status'].'">');
    echo('<td>');
    echo($data['item']);
    echo('</td>');
    echo('<td>');
    echo($data['catagory']);
    echo('</td>');
    echo('</tr>');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:02:33.107

通常是这样的：

```
foreach($array as $key=>$element) {...} 
```

`$key`应该是您要查找的数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T00:03:35.247

```
Array
(
[2] => Array
    (
        [status] => 0
        [item] => Food Processor
        [category] => Appliance
    )
} 
```

（拼写）

```
foreach ($arr as $key=>$a){

    // $a['status'] will be 0
    // $a['item'] will be 'Food Processor'
    // $a['category'] will be 'Appliance'
    // $key will be 2
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T00:04:14.220

```
foreach ($arr as $key => $value) {

echo "key: {$key} --- value: {$value}";

} 
```

# c++ - 如何为 C++ 程序生成控制依赖图

> ID：15560376
> 
> 赞同：1
> 
> 时间：2013-03-22T00:00:06.823
> 
> 标签：c++

我想为 C++ 程序生成控制依赖图 (CDG)。

我想知道是否有任何 GCC/g++ 调试选项可以帮助生成此图。例如，一个选项 like `-fdump-tree-cfg/cvg`，但用于 CDG（例如`-fdump-tree-cdg`）。或者你们知道任何可以为 C++ 生成 CDG 的工具吗？

# java - 从 Java 到 C++ 的快速数组转换

> ID：15560378
> 
> 赞同：1
> 
> 时间：2013-03-22T00:00:09.617
> 
> 标签：java, c++, arrays, multidimensional-array, porting

我将如何使用类似的东西：

```
int array[][] = {{0,0,0},{1,0,0}}; 
```

...这是 C++ 中的 Java 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T00:01:24.990

你会这样做：

```
int array[][3] = {{0,0,0},{1,0,0}}; 
```

只有第一个维度可以省略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T00:01:59.533

像这样：

```
int array[2][3] = {{0,0,0},{1,0,0}}; 
```

或者这个，因为第一个维度是可选的：

```
int array[][3] = {{0,0,0},{1,0,0}}; 
```

顺便说一句，在 Java 中，声明相同数组的惯用方式是：

```
int[][] array = {{0,0,0},{1,0,0}}; // [][] goes before the variable name 
```

# prolog - Prolog - 附加到错误列表

> ID：15560379
> 
> 赞同：2
> 
> 时间：2013-03-22T00:00:14.473
> 
> 标签：prolog

```
temperature(thessaloniki,january,24,1).
temperature(thessaloniki,january,25,-2).
temperature(katerini,january,24,3).
temperature(loutsa,feb,25,1).

temp([],[],[]).
temp([H|T],L2,L3) :-
   temp(T,L4,L5),
   temperature(H,january,_,Te),
   Te>0,
   append([H],L4,L2),
   L3=L5.
temp([H|T],L2,L3) :-
   temp(T,L4,L5),
   temperature(H,january,25,Te),
   Te<0,
   append([H],L5,L3),
   L2=L4.
temp([H|T],L2,L3) :-
   temp(T,L4,L5),
   L2=L4,
   L3=L5. 
```

我们有温度和日期的城镇。我们需要将它们添加到正确的列表中。我认为规则是正确的，但是当我使用 TkEclipse 运行它时，我得到了这个：

```
?- temp([thessaloniki, thessaloniki, katerini, loutsa], L2, L3).
L2 = [thessaloniki, thessaloniki, katerini]
L3 = [] 
```

并且正如我在程序的跟踪器中看到的那样，只需要前`temperature(thessaloniki,january,24,1).`2 次而不是第二次 `temperature(thessaloniki,january,25,-2).`
如果将第二次的名称更改为 thessaloniki2 运行正常，但练习给出了相同的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T00:24:38.523

为什么你有一次目标`temperature(H,january,_,Te)`和一次目标`temperature(H,january,25,Te)`？我假设你的意思是两者应该是同一个目标。

但还有其他文体评论。我只接受第一条规则：

```
温度（[H|T]，L2，L3）：-
   温度（T，L4，L5），
   温度（H，一月，_，Te），
   Te>0,
   附加（[H]，L4，L2），
   L3=L5。

```

`append/3`在 Prolog 中的使用比你想象的要少得多。您可以从字面上替换`append([X],L4,L2)`为`L2 = [X|L4]`. 但是您可以更进一步，将`(=)/2`-goals 移到头部：

```
温度（[H|T]，[H|Ps]，Ms）：-
   温度（T，Ps，Ms），
   温度（H，一月，_，Te），
   Te>0。

```

还不够：这样的程序可以工作，但会产生巨大的开销。看：

*   [Prolog 中的递归如何从内部工作。一个例子](https://stackoverflow.com/questions/14462713/how-does-recursion-in-prolog-works-from-inside-one-example/14481012#14481012)

*   [Prolog - 获取给定数字的因子不会停止？](https://stackoverflow.com/questions/14273559/prolog-get-the-factors-for-a-given-number-doesnt-stop/14288853#14288853)

在这种情况下，将有趣的测试移到顶部：

```
温度（[H|T]，[H|Ps]，Ms）：-
   温度（H，一月，_，Te），
   Te>0,
   温度（T，Ps，Ms）。

```

这将避免指数开销。（第一个参数列表长度的指数）。

您程序中的最后一条规则可能应该是：如果没有该城市的数据，请忽略它。因此`\+ temperature(H,january,_,_)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:07:37.433

因为您没有明确说明您的目标，所以我们只能从代码片段中猜测。我认为您缺少“过滤器”值：我将添加`Mon,Day`以强制从已声明的事实中进行正确选择。

考虑使用可用的[控制谓词](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.8%27,swi%28%27/doc/Manual/control.html%27%29%29)，并避免 append/3：

```
temperature(thessaloniki,january,24,1).
temperature(thessaloniki,january,25,-2).
temperature(katerini,january,24,3).
temperature(loutsa,feb,25,1).

temp([H|T], Mon, Day, L2, L3) :-
   (   temperature(H, Mon, Day, Te)
   ->  (   Te > 0
       ->  L2 = [H|L4], L3 = L5
       ;   Te < 0
       ->  L2 = L4, L3 = [H|L5]
       ;   L2 = L4, L3 = L5
       )
   ;   L2 = L4, L3 = L5
   ),
   temp(T, Mon, Day, L4, L5).

temp([], _, _, [], []). 
```

产量

```
?- temp([katerini, loutsa, thessaloniki],january,24,A,B).
A = [katerini, thessaloniki],
B = [].

?- temp([katerini, loutsa, thessaloniki],january,25,A,B).
A = [],
B = [thessaloniki]. 
```

请注意如何避免 append/3：`consing`在通过递归调用“返回”的适当列表中构造一个列表。感谢 Prolog 的统一，即使呼叫“尚未到来”，我们也可以做到。

我认为生成的代码是尾递归的，提高了效率。

高温高压

*编辑*现在是一个*等效*程序，但（恕我直言）更好

```
temp([H|T], Mon, Day, L2, L3) :-
   (   temperature(H, Mon, Day, Te)
   ->  (   Te > 0
       ->  L2/L3 = [H|L4]/L5
       ;   Te < 0
       ->  L2/L3 = L4/[H|L5]
       ;   L2/L3 = L4/L5
       )
   ;   L2/L3 = L4/L5
   ),
   temp(T, Mon, Day, L4, L5). 
```

*评论后编辑*...

```
temp([H|T], L2, L3) :-
   (   temperature(H, january, Day, Te)
   ->  (   Te > 0
       ->  L2/L3 = [H|L4]/L5
       ;   Te < 0, Day = 25
       ->  L2/L3 = L4/[H|L5]
       ;   L2/L3 = L4/L5
       )
   ;   L2/L3 = L4/L5
   ),
   temp(T, L4, L5).
temp([], [], []). 
```

产量

```
A = [katerini, thessaloniki],
B = []. 
```

# asp.net - 虚拟目录中的 Web.config 不会覆盖父网站的 Web.config

> ID：15560383
> 
> 赞同：5
> 
> 时间：2013-03-22T00:01:01.887
> 
> 标签：asp.net, .net, web-config, iis-7.5, connection-string

我有一个网站，它有一个虚拟目录，其中还包含一个网站，当我尝试从虚拟目录启动页面时，我收到一个 IIS 7.5 错误，表明名称（来自连接字符串）已经在集合中. 在我将域用户添加为应用程序池中的身份之前，这不是问题。有谁知道为什么会这样？我的印象是子级应用程序的 web.config 默认会覆盖父级的。再一次，这在我添加自定义身份之前一直有效。

> 页面上的错误是“解析器错误消息：已添加条目 'dbname'。”

其中 dbname 在两个连接字符串中（即父目录和虚拟目录）。我无法删除其中一个连接字符串，因为虚拟目录仅为测试目的而创建，但在生产中它作为自己的网站运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T00:08:47.920

无论应用程序如何，子 web.config 都不会覆盖父级。所有的 web.configs 将一直堆叠到主应用程序的根目录。为了使子应用程序文件夹能够使用已在使用的连接字符串密钥，必须首先将其删除或必须清除所有连接字符串。如果您希望这是一个真正独立的应用程序，请将其添加到您的连接字符串中：

```
<connectionStrings>
    <clear />
    <your connection string>
<connectionStrings> 
```

如果您只想删除单个连接字符串，请使用以下命令：

```
<remove key="yourConnectionStringName" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T14:36:56.567

@u84六，

今天这件事发生在我身上。我在同一个根网站中有一些网站和网络服务。根是默认的 iis 网站（默认网站），我认为它指向 C:\Inetpub\wwwroot。它是一个开发环境。

在我阅读[了这个答案](https://serverfault.com/a/386126)之后，我发现我的一个网络服务是根网站（仍然不确定是什么改变了它......也许是从 2010 年迁移到 2012 年之后的 Visual Studio）。该网络服务正在使用冲突的连接字符串。我将路径改回 C:\Inetpub\wwwroot\，一切正常。

也许类似的事情发生在你身上。

# image - 单击缩略图更改主图像？

> ID：15560385
> 
> 赞同：2
> 
> 时间：2013-03-22T00:01:11.163
> 
> 标签：image

在学习了大约一个月的 JS 并完成了大约 4 门课程之后，我仍然无法弄清楚如何在单击缩略图时更改图像！我想做的很简单，我只想在单击缩略图时更改主图像！在此示例中，一个 div 中有两个缩略图图像，它们上方有一个主图像。我只想在单击缩略图时更改主图像。我知道这是 DOM 操作并认为它是：document.getElementById .....？

我做了一个小页面，这样我就可以学习/尝试不同的东西，最后放弃并寻求帮助！代码如下：

```
#MainContainer {
position: relative;
margin:0px auto;
width: 500px;
height: 400px;
border: 1px solid black;
}
#MainImage {
position: absolute;
top: 10px;
left: 50px;
width: 398px;
height: 265px;
background: url(MainImage01.jpg);
border: 1px solid black;
}
#TNBodyContainer {
position: absolute;
top: 290px;
left: 100px;
border: 1px solid black;
width: 268px;
height: 88px;
}
#TNOne {
position: relative;
width: 133px;
height: 88px;
background: url(SmallImage01.jpg);
}
#TNTwo {
position: relative;
left:135px;
width: 133px;
height: 88px;
background: url(SmallImage02.jpg);
}

<body>
<div id="MainContainer">
    <div id="MainImage"></div>
    <div id="TNBodyContainer">
        <div id="TNOne">
            <div id="TNTwo"></div>
        </div>
    </div> 
```

非常感谢您的帮助。

马盖特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T00:52:24.867

单击任一缩略图时，您需要添加一些脚本来更改图像。该函数在页面加载时调用。更改图像名称以适合。这应该放在html页面的部分。

```
<script>
window.onload = function() {
        var mainImg = document.getElementById('Main');

        document.getElementById('TNOne').onclick = function() {
                mainImg.src = 'main1.jpg';
                //alert('one clicked');
        };
        document.getElementById('TNTwo').onclick = function() {
                mainImg.src = 'main2.jpg';
                //alert('two clicked');
        };
};
</script> 
```

两个缩略图 div 成为`<img>`具有相同 ID 的标签。类似地，main`<img>`也被定义（id="Main"）。现在元素是可点击的。

```
<div id="MainContainer">
    <div id="MainImage">
        <img id="Main" src="MainImage01.jpg"</img>
    </div>
    <div id="TNBodyContainer">
        <img id="TNOne" src="thumb1.jpg"></img>
        <img id="TNTwo" src="thumb2.jpg"></img>
    </div>
</div> 
```

最后是缩略图的 CSS，这里的 float 用于将缩略图保持在 TNBodyContainer div 内的同一行中。

```
TNOne {
width: 133px;
height: 88px;
float:left;
}
#TNTwo {
width: 133px;
height: 88px;
float:left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:08:20.220

要更改 CSS 背景属性中的图像，您需要使用

```
document.getElementById("MainImage").style.background 
```

正确的做法是添加事件监听器：

```
 document.getElementById("TNOne").addEventListener("click", function (event) {
          setImage(event);
      }, false);
      document.getElementById("TNTwo").addEventListener("click", function (event) {
          setImage(event);
      }, false);

  } 
```

它们都调用相同的函数，但是通过事件可以看到哪个“点击”了“event.target.id”。

然后，您可以决定要做什么，例如 switch 语句。基本上说：如果 event.target.id == "TNOne"。

你可以看到这一切我给你做了一个小提琴：http: [//jsfiddle.net/djwave28/32pQD/3/](http://jsfiddle.net/djwave28/32pQD/3/)

您的 HTML 和 CSS 也有一些细微的变化。

# python - Python：在对象列表中获取两个布尔属性频率的最有效方法？

> ID：15560389
> 
> 赞同：3
> 
> 时间：2013-03-22T00:01:36.810
> 
> 标签：python, list, properties, frequency

我有一个用户对象，有两个布尔属性，如下所示：

```
class User(object):
  def __init__(self, a, b):
    self.a = a  # Always a bool
    self.b = b  # Always a bool 
```

我有一个这些对象的列表，称为`user_list`，并且我想获得有多少对象具有 a == True、a == False、b == True 和 b == False 的频率计数。

我最初的方法是使用 collections.Counter，但这需要在列表中循环两次：

```
a_count = collections.Counter(u.a for u in user_list)
b_count = collections.Counter(u.b for u in user_list)
print a_count[True], a_count[False], b_count[True], b_count[False] 
```

我还考虑过只使用 4 个计数器，但这很丑陋，而且感觉不像 Python：

```
a_true_count = 0
a_false_count = 0
b_true_count = 0
b_false_count = 0
for u in user_list:
  if u.a:
    a_true_count += 1
  else:
    a_false_count += 1
  if u.b:
    b_true_count += 1
  else:
    a_false_count += 1
print a_true_count, a_false_count, b_true_count, b_false_count 
```

有没有更有效的方法来做到这一点？输出可以是任何东西：4 个单独的变量、一个带有值的 dict、一个列表、元组等等，只要其中包含这 4 个值。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T00:19:10.930

我认为使用 a`collections.Counter`是正确的想法，只需使用单个`Counter`和单个循环以更通用的方式进行：

```
from collections import Counter

user_list = [User(True, False), User(False, True), User(True, True), User(False, False)]
user_attr_count = Counter()

for user in user_list:
    user_attr_count['a_%s' % user.a] += 1
    user_attr_count['b_%s' % user.b] += 1

print user_attr_count
# Counter({'b_False': 2, 'a_True': 2, 'b_True': 2, 'a_False': 2}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T00:05:05.133

为什么不使用两个计数器，并从长度中减去`user_list`以找到其他两个值？

`a_false_count = len(user_list) - a_true_count`

`b_false_count = len(user_list) - b_true_count`

像这样显式循环可能是时间上最有效的解决方案，但如果您正在寻找更简洁的代码方式，您可以尝试`filter()`：

```
a_false_count = len(filter(lambda x: x.a,user_list))
b_false_count = len(filter(lambda x: x.b,user_list)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T00:21:51.877

您可以使用位掩码：

```
def count(user_list,mask):
    return Counter((u.a<<1 | u.b)&mask for u in user_list)

a=0b10
b=0b01
aANDb=0b11
print count(user_list,aANDb) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T00:22:45.290

```
from collections import Counter

c = Counter()
for u in user_list:
    c['a'] += u.a
    c['b'] += u.b

print c['a'], len(user_list) - c['a'], c['b'], len(user_list) - c['b'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T00:30:22.510

这是一个与您第一次获得的解决方案接近的解决方案，只是它只迭代列表一次。它创建两个计数器，遍历列表，并为每个用户更新每个计数器。进行计数的实际步骤在这里：

```
for user in user_list:
    a_count.update([user.a])
    b_count.update([user.b]) 
```

它使用更新函数来更新每个计数器对象。您可以这样做，而不是像在第一个示例中那样使用生成器在一行中创建计数器。整个代码示例在这里：

```
import collections

class User(object):
    def __init__(self, a, b):
        self.a = a
        self.b = b

user_list = [
    User(True, False),
    User(False, True),
    User(True, True),
    User(False, False)
]

a_count = collections.Counter()
b_count = collections.Counter()

for user in user_list:
    a_count.update([user.a])
    b_count.update([user.b])

print a_count[True], a_count[False], b_count[True], b_count[False] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-22T00:31:52.460

我喜欢对这些东西使用[zip](http://docs.python.org/2/library/functions.html#zip)和[map](http://docs.python.org/2/library/functions.html#map)：

```
from collections import Counter
# for test, import random:
import random

# define class
class User(object):
  def __init__(self, a, b):
    self.a = a  # Always a bool
    self.b = b  # Always a bool

# create an arbitrary set
users = [ User( r % 2 == 0, r % 3 == 0 ) for r in (random.randint(0,100) for x in xrange(100)) ]

# and... count
aCounter, bCounter = map(Counter, zip(*((u.a, u.b) for u in users))) 
```

**更新：** `map(sum, zip(*tuples))`在较小的样本量上比 for 循环略快，但对于较大的样本量，for 循环的扩展性要好得多。. for 循环不会像其他循环那样从处理元组列表中获得太多的性能提升方法。可能是因为它已经非常理想了。

`collections.Counter`还是很慢。

```
import random
import itertools
import time
from collections import Counter 

# define class
class User(object):
  def __init__(self, a, b):
    self.a = a  # Always a bool
    self.b = b  # Always a bool

# create an arbitrary sample
users = [ User( r % 2 == 0, r % 3 == 0 ) for r in (random.randint(0,100) for x in xrange(100)) ]
# create a list of tuples of the arbitrary sample
users2 = [ ( u.a,u.b) for u in users ] 

# useful function-timer decorator           
def timer(times=1):
    def outer(fn):
        def wrapper(*args, **kwargs):
            t0 = time.time()
            for n in xrange(times):
                r = fn(*args, **kwargs)
            dt = time.time() - t0
            print '{} ran {} times in {} seconds with {:f} ops/sec'.format(fn.__name__, times, dt, times/dt)
            return r
        return wrapper
    return outer 

# now create the timeable functions         
n=10000
@timer(times=n)
def time_sum():
    return map(sum, zip(*((u.a, u.b) for u in users)))
@timer(times=n)
def time_counter():
    return map(Counter, zip(*((u.a, u.b) for u in users)))
@timer(times=n)
def time_for():
    a,b=0,0
    for u in users:
        if u.a is True:
            a += 1
        if u.b is True:
            b += 1
    return a,b
@timer(times=n)
def time_itermapzip():
    return list(itertools.imap(sum, itertools.izip(*((u.a, u.b) for u in users))))

@timer(times=n)
def time_sum2():
    return map(sum, zip(*users2))
@timer(times=n)
def time_counter2():
    return map(Counter, zip(*users2))
@timer(times=n)
def time_for2():
    a,b=0,0
    for _a,_b in users2:
        if _a is True:
            a += 1
        if _b is True:
            b += 1
    return a,b
@timer(times=n)
def time_itermapzip2():
    return list(itertools.imap(sum, itertools.izip(*users2))) 

v = time_sum()
v = time_counter()
v = time_for()
v = time_itermapzip()

v = time_sum2()
v= time_counter2()
v = time_for2()
v = time_itermapzip2() 

# time_sum ran 10000 times in 0.446894168854 seconds with 22376.662523 ops/sec
# time_counter ran 10000 times in 1.29836297035 seconds with 7702.006471 ops/sec
# time_for ran 10000 times in 0.267076015472 seconds with 37442.523554 ops/sec
# time_itermapzip ran 10000 times in 0.459508895874 seconds with 21762.364319 ops/sec
# time_sum2 ran 10000 times in 0.174293994904 seconds with 57374.323226 ops/sec
# time_counter2 ran 10000 times in 0.989939928055 seconds with  10101.623055 ops/sec
# time_for2 ran 10000 times in 0.183295965195 seconds with 54556.574605 ops/sec
# time_itermapzip2 ran 10000 times in 0.193426847458 seconds with 51699.131384 ops/sec

print "True a's: {}\t False a's: {}\nTrue b's: {}\t False b's:{}".format(v[0], len(users)-v[0], v[1], len(users)-v[1]) 
# True a's: 53   False a's: 47
# True b's: 31   False b's:69
v
# [53, 31] 
```

样本大小为 1000 的相同代码：

```
# time_sum ran 10000 times in 9.30428719521 seconds with 1074.773359 ops/sec
# time_counter ran 10000 times in 16.7009849548 seconds with 598.767080 ops/sec
# time_for ran 10000 times in 2.61371207237 seconds with 3825.976130 ops/sec
# time_itermapzip ran 10000 times in 9.40824103355 seconds with 1062.897939 ops/sec
# time_sum2 ran 10000 times in 5.70988488197 seconds with 1751.348794 ops/sec
# time_counter2 ran 10000 times in 13.4643371105 seconds with 742.702735 ops/sec
# time_for2 ran 10000 times in 2.49017906189 seconds with 4015.775473 ops/sec
# time_itermapzip2 ran 10000 times in 6.10926699638 seconds with 1636.857581 ops/sec 
```

# java - 以编程方式启用远程 jmx 监控

> ID：15560407
> 
> 赞同：4
> 
> 时间：2013-03-22T00:03:35.880
> 
> 标签：java, jmx, spring-jmx

我正在尝试通过 JMX 启用我的核心 java 应用程序以进行远程访问。然而，有两个限制使它变得比应有的更难。

a) 我无权更改在 linux 机器上启动应用程序的脚本。因此，我无法将任何“jmxremote”参数传递给 jvm。

b) 我指定的远程端口 ( ) 很可能`com.sun.management.jmxremote.port = xxxx`没有打开，我无法修改脚本以尝试另一个打开的端口。我必须自动完成。

我试图通过编写一个类来绕过这些限制，该类将设置所有必需的 jmxremote 参数并找到一个“免费”端口。

```
public class JmxRemoteConnectionHelper{

    @Override
    public void init( ) throws Exception{

        InetAddress address = InetAddress.getLocalHost();
        String ipAddress    = address.getHostAddress();
        String hostname     = address.getHostName();
        String port         = String.valueOf( getFreePort( ) );

        System.setProperty("java.rmi.server.hostname", ipAddress );
        System.setProperty("com.sun.management.jmxremote", "true" );
        System.setProperty("com.sun.management.jmxremote.authenticate", "false" );
        System.setProperty("com.sun.management.jmxremote.ssl", "false" );
        System.setProperty("com.sun.management.jmxremote.port", port  );

    }

    private final int getFreePort( ){

        **//seedPort is passed in the constructor**
        int freePort            = seedPort;
        ServerSocket sSocket    = null;

        for( int i=ZERO; i<PORT_SCAN_COUNTER; i++ ){

            try{

                freePort        = freePort + i;
                sSocket         = new ServerSocket( freePort );

               //FOUND a free port.             
                break;

            }catch( Exception e ){
                //Log

            }finally{

                if( sSocket != null ){
                    try{
                            sSocket.close();
                        sSocket = null;
                    }catch(Exception e ){
                    //Log
                    }

                }
            }

        }

        return freePort;
    }

 } 
```

如下图，我，然后通过spring初始化它。

```
<bean id="JmxRemoteConnection" class="JmxRemoteConnectionHelper" init-method="init" />

<bean id="mbeanServer" class="org.springframework.jmx.support.MBeanServerFactoryBean" depends-on="JmxRemoteConnection" />   

<bean id="exporter" class="org.springframework.jmx.export.MBeanExporter" lazy-init="false" >
        <property name="assembler"      ref="assembler"/>
        <property name="namingStrategy" ref="namingStrategy"/>
        <property name="autodetect"     value="true"/>
        <property name="server"         ref="mbeanServer"/>
</bean>

<bean id="jmxAttributeSource" class="org.springframework.jmx.export.annotation.AnnotationJmxAttributeSource"/>

<bean id="assembler" class="org.springframework.jmx.export.assembler.MetadataMBeanInfoAssembler">
        <property name="attributeSource" ref="jmxAttributeSource"/>
</bean>

<bean id="namingStrategy" class="org.springframework.jmx.export.naming.MetadataNamingStrategy" lazy-init="true">
        <property name="attributeSource" ref="jmxAttributeSource"/>
</bean> 
```

为了测试，我在我的 Windows 机器上启动了该应用程序。它正确启动。**但是，当我在同一个框中**打开 JConsole并尝试通过**“远程进程”** （ip：端口）进行连接时，我在底部收到**“连接被拒绝”消息。**

我怀疑 JMX 代理没有看到我正在设置的任何远程系统属性。

我正在使用**JDK 1.6**。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T01:00:50.507

由于您已经在使用 Spring，我认为您应该看看使用[`ConnectorServerFactoryBean`](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/jmx.html#jmx-jsr160)can 是否可以做您想做的事情。我从来不需要启动远程 JMX 服务器，但看起来这就是该对象可以为您做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-23T11:40:44.533

请参阅此问题的答案以在流程中启用 jmx：

[是否可以以编程方式启用远程 jmx 监控？](https://stackoverflow.com/questions/27508185/is-it-possible-to-enable-remote-jmx-monitoring-programmatically/36085026#36085026)

To find a free port simply wrap LocateRegistry.createRegistry() in a loop which retries with a new port number until it succeeds. Of course you'll have to communicate the final port number to whatever needs to connect. Alternatively running jstatd on the host should make it discoverable

# ios - 添加实现 UIWebView(CustomScroll)

> ID：15560410
> 
> 赞同：0
> 
> 时间：2013-03-22T00:03:49.430
> 
> 标签：ios, objective-c, cocoa, uiwebview

我正在尝试[将此](https://stackoverflow.com/a/4060249/1578927)添加到我的代码中

```
@implementation UIWebView(CustomScroll)
- (void) scrollViewDidScroll:(UIScrollView *)scrollView{
    [self.delegate scrollViewDidScroll: scrollView];
}
@end 
```

但是得到“没有选择器'scrollViewDidScroll：'的已知实例方法”我在这里错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T00:05:56.930

[UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)协议不声明`scrollViewDidScroll:`方法。因此，这就是您收到错误访问错误的原因。

我建议您子类`UIWebView`化而不是尝试在其上创建类别（是的，文档建议不要子类化......只是不要覆盖它拥有的任何方法，而且它是安全的）。

在您的子类上，您可以创建一个新协议或简单地覆盖该`delegate`属性以也要求它符合`UIScrollViewDelegate（后者如下所示）：

在示例中：

```
// MyWebView.h
#import <UIKit/UIKit.h>

@interface MyWebView : UIWebView
@property (nonatomic, assign) id<UIWebViewDelegate, UIScrollViewDelegate> delegate;
@end

// MyWebView.m
#import "MyWebView.h"

@implementation MyWebView

-(void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    /* As scrollViewDidScroll: is optional, you should check if the super class
       responds to this method (it doesn't appear to now, but this may change in future) */

    if ([[self superclass] instancesRespondToSelector:@selector(scrollViewDidScroll:)])
    {
        [super scrollViewDidScroll:scrollView];
    }

    /* Likewise, you should check if your own delegate responds to this selector */

    if ([self.delegate respondsToSelector:@selector(scrollViewDidScroll:)])
    {
        [self.delegate scrollViewDidScroll:scrollView];
    }
}

@end 
```

# javascript - 为什么此代码为数字中的位提供 32（而不是 53）？

> ID：15560411
> 
> 赞同：3
> 
> 时间：2013-03-22T00:03:51.077
> 
> 标签：javascript

我正在使用此代码来尝试找出一个数字中有多少位。下面的十六进制数字已打开所有位。

```
for (var i = 0x1FFFFFFFFFFFFF, m = 0; i & 1; ++m, i >>>= 1); 
```

出于某种原因，打印`m`给出了 32，但在 SO 帖子中，我阅读了以下内容：

> JavaScript 中的所有数字实际上都是符合 IEEE-754 的浮点双精度数。它们有一个 53 位尾数，这意味着任何大小约为 9 万亿或更小的整数值都将被准确表示。

除非我错误地实现了这一点，否则我不明白为什么`m`在应该有 53 位的情况下打印会给出 32。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T00:07:20.687

JavaScript/ECMAScript 标准指定按位运算将数字截断为 31 位（向零舍入，取模数为 2 ^(32)，并将最高有效位解释为二进制补码符号），然后再发生其他任何事情。因此，您需要使用简单的算术对其进行重新编码。

这部分是因为处理小数的 FPU 可能无法在逻辑电路级别实现按位运算。

最幼稚的测试方法是`for ( var i = 0; i != i + 1; ++ i ) ;`，当我尝试它时，它使 Firefox 崩溃。（期待超时，但不！）稍微更具体的单线

```
for ( var i = 1, j = 0; i != i + 1; i *= 2, ++ j ) ; 
```

确实产量`j == 53`。

顺便说一句，请注意`x | 0`四舍五入的习语不适用于大于或等于 2 ^(31)的数字。所以`Math.round`一般比较好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T00:04:59.037

按位运算作为`>>>`32 位数字的工作，因此`i`实际上转换为 32 位。有关更多信息，请参阅[此](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)。

从[规格](http://es5.github.com/#x11.7.3)：

产生式 ShiftExpression : ShiftExpression >>> AdditiveExpression 的评估如下：

> 无符号右移运算符 ( >>> )
> 
> 1.  令 lref 为评估 ShiftExpression 的结果。
> 2.  令 lval 为 GetValue(lref)。
> 3.  令 rref 为 AdditiveExpression 求值的结果。
> 4.  设 rval 为 GetValue(rref)。
> 5.  令 lnum 为**ToUint32(lval)**。
> 6.  设 rnum 为**ToUint32(rval)**。
> 7.  令 shiftCount 为屏蔽掉除 rnum 的最低有效 5 位之外的所有结果，即计算 rnum & 0x1F。
> 8.  通过 shiftCount 位返回执行 lnum 的零填充右移的结果。空出的位用零填充。结果是一个无符号的 32 位整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T00:06:20.147

Javascript 中的位运算符适用于 32 位整数。

这意味着将浮点数`i`转换为 32 位整数以用于移位操作，其余位将被丢弃。

参考：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)

> “所有按位运算符的操作数都转换为有符号的 32 位整数”

# javascript - 淘汰js观察全局变量

> ID：15560414
> 
> 赞同：1
> 
> 时间：2013-03-22T00:04:09.023
> 
> 标签：javascript, jquery, knockout.js

我正在设置一个变量

> var extQty;

然后用户输入一些数据并提交，我返回一个带有 extQty 的 json 字符串。成功后，我正在更新变量：

```
 success: function (result) {
         window.extQty = result.extQty;
     } 
```

如果 extQty 超过网格的行数，我需要隐藏一个按钮。我怎样才能做到这一点？我尝试了以下方法，但没有看到变量更改，因为它在 extQty 更新之前已经加载。

```
 <!-- ko if: pagedList().length < extQty --> 
```

如果我将上面的 extQty 更改为 3 它可以工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T00:47:01.297

使您的变量 a`ko.observable`并使其成为您的视图模型的一部分。

```
function viewModel() {
    this.extQty = ko.observable(0);
    this.pagedList = ko.observableArray();
    //....
}

var myViewModel = new viewModel(); 
ko.applyBindings(myViewModel); 
```

然后在你的 AJAX 中`success`：

```
success: function (result) {
     myViewModel.extQty(result.extQty);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:31:19.317

尝试更新您的小提琴：-

[你的小提琴更新了](http://jsfiddle.net/shubh0602/A9na8/5/)

```
<div data-bind="style: { display: (pagedList().length < extQty()) ? 'block' : 'none' }">
    <p class="pull-right">
        <a class="btn btn-primary" data-bind="click: $root.add" href="#" title="edit"><i class="icon-plus"></i>Add Extension</a>
    </p>
</div> 
```

如果我错了，请纠正我，当您使用绑定时，它允许标记根据条件为真或假从您的文档中出现或消失。当您的条件为假时，当您在 html 中看到该元素时，该元素将被注释掉代码。除非您刷新页面，否则无法更改。因此，使用可见绑定，标记保留在 dom 中，您可以使用可见绑定来隐藏或显示它...

查看[Knockout If Binding 文档](http://knockoutjs.com/documentation/if-binding.html)

# pascal - 为什么我的程序没有输出我所有的数据？

> ID：15560426
> 
> 赞同：2
> 
> 时间：2013-03-22T00:05:07.787
> 
> 标签：pascal, output, lazarus

```
program ZZX1;

{$mode objfpc}{$H+}

uses
  crt,
  wincrt,
  {$IFDEF UNIX}{$IFDEF UseCThreads}
  cthreads,
  {$ENDIF}{$ENDIF}
  Classes
  { you can add units after this  };
type
  Masquerader = record
    Name, CountyCode: string;
    Payment: real;
   end;
var
  Applicant: array[1..10] of Masquerader;
  DemList: array[1..10] of string;
  BerList: array[1..10] of string;
  EsqList: array[1..10] of string;
  x:integer;
  Y:integer;
  DemCounter:integer;
  BerCounter:integer;
  EsqCounter:integer;
  DemAmount:real;
  BerAmount:real;
  EsqAmount:real;

 procedure LoadData;
 begin
    clrscr;
X:=0;
DemCounter:=0;
BerCounter:=0;
EsqCounter:=0;
DemAmount:=0;
BerAmount:=0;
EsqAmount:=0;
repeat
X:= x+1;
repeat
write('Enter Your County Code DemM or BerM or EsqM: ');
readln(Applicant[x].CountyCode);
until (Applicant[x].CountyCode= 'DemM') or (Applicant[x].CountyCode= 'BerM') or (Applicant[x].CountyCode= 'EsqM');
If Applicant[x].CountyCode = 'DemM' then
  begin
    write('Enter Your Name: ');
    readln(Applicant[x].Name);
    write('Enter Your Total Payment: ');
    readln(Applicant[x].Payment);
    clrscr;
    DemCounter:= DemCounter + 1;
    DemAmount:= DemAmount + Applicant[x].Payment;
    DemList[DemCounter]:= Applicant[x].Name;
  end;
If Applicant[x].CountyCode = 'BerM' then
  begin
    write('Enter Your Name: ');
    readln(Applicant[x].Name);
    write('Enter Your Total Payment: ');
    readln(Applicant[x].Payment);
    clrscr;
    BerCounter:= BerCounter + 1;
    BerAmount:= BerAmount + Applicant[x].Payment;
    BerList[BerCounter]:= Applicant[x].Name;
  end;
If Applicant[x].CountyCode = 'EsqM' then
  begin
    write('Enter Your Name: ');
    readln(Applicant[x].Name);
    write('Enter Your Total Payment: ');
    readln(Applicant[x].Payment);
    clrscr;
    EsqCounter:= EsqCounter + 1;
    EsqAmount:= EsqAmount + Applicant[x].Payment;
    EsqList[EsqCounter]:= Applicant[x].Name;
  end;
until x=6 ;

 end;

Procedure PrintData;
  begin
    Y:= 0;
    for y := 1 to 6 do
    begin
      writeln('Name: ', Applicant[y].Name);
      writeln('CountyCode: ', Applicant[y].CountyCode);
      writeln('Payment: ', Applicant[y].Payment:0:2);
      writeln;
    end;
    For Y:= 1 to DemCounter do
      begin
        writeln(DemList[Y]);
        writeln(DemCounter,'',' persons are registered in Demerara');
        writeln;
        writeln('DemTotal:$ ', DemAmount:0:2);
      end;
    For Y:= 1 to BerCounter do
      begin
        writeln(BerList[Y]);
        writeln(BerCounter,'',' persons are registered in Berbice');
        writeln;
        writeln('BerTotal:$ ', BerAmount:0:2);
      end;
    For Y:= 1 to EsqCounter do
      begin
        writeln(EsqList[Y]);
        writeln(EsqCounter,'',' persons are registered in Essequibo');
        writeln;
        writeln('EsqTotal:$ ', EsqAmount:0:2);
      end;
 end;
Procedure quit;
  begin
    writeln('Press <Enter> To Quit');
    readln;
  end;

begin
  LoadData;
  PrintData;
  quit;
end. 
```

该计划目前收集了 6 个人，并按其县代码对他们进行分组，计算每个县收集的人数和金额的总和。当我在我的预期输出下方运行程序时，它会在屏幕上显示几秒钟，然后它会消失，只留下预期输出的一部分（结束部分）。请协助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:41:30.890

如果程序到达`readln;`过程中的语句时键盘缓冲区中有字符`quit`，`readln`将读取这些字符并继续前进，而不是等待进一步的输入再继续。

要检查这一点，请尝试添加一个字符变量作为参数`readln`并将字符的 ASCII 值写入输出（或在调试器中检查其值），以查看该变量中是否有任何`readln`.

（编辑）

经过进一步思考，我想知道代码是否像：

```
For Y:= 1 to EsqCounter do
  begin
    writeln(EsqList[Y]);
    writeln(EsqCounter,'',' persons are registered in Essequibo');
    writeln;
    writeln('EsqTotal:$ ', EsqAmount:0:2);
  end; 
```

...实际上应该是这样的：

```
For Y:= 1 to EsqCounter do
  begin
    writeln(EsqList[Y]);
  end;
writeln(EsqCounter,'',' persons are registered in Essequibo');
writeln;
writeln('EsqTotal:$ ', EsqAmount:0:2); 
```

`EsqCounter`...因为否则和的相同值`EsqTotal`将是输出`EsqCounter`时间，这似乎没有必要。

# coldfusion - 冷熔假脱机不工作

> ID：15560428
> 
> 赞同：2
> 
> 时间：2013-03-22T00:05:15.620
> 
> 标签：coldfusion, cfmail, spooler

每次我使用以下代码发送电子邮件时，都会有一个coldfusion邮件假脱机程序锁定我：

```
<cfmail TO="xxxx@gmail.com" 
FROM="xxxx@xxxxxx.com" 
SUBJECT="Your Order!!!!!"  type="html">
hello
</cfmail> 
```

我可以让这个东西从假脱机程序中通过电子邮件发送出去的唯一方法是停止 IIS 并启动 IIS。然后它冲过去。

如果我使用

```
<cfmail TO="xxxx@gmail.com" 
FROM="xxxx@xxxxxx.com" 
SUBJECT="Your Order!!!!!" spoolEnable="false" type="html">
hello
</cfmail> 
```

然后电子邮件直接通过没问题，我想使用后台处理程序，因为它对用户的延迟更少。

我的coldfusion spooler怎么了？？我正在运行 9,0,0,251028（标准）

顺便说一句：我试过做（没有运气）：

```
<cfset sFactory = CreateObject("java","coldfusion.server.ServiceFactory")>
<cfset MailSpoolService = sFactory.mailSpoolService>
<cfset MailSpoolService.stop()>
<cfset MailSpoolService.start()> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T10:55:14.763

这个问题似乎至少从 CF6.x 开始就存在，我们还没有找到永久的解决方案。重新启动邮件服务远非完美。

一些人发现从病毒扫描中排除 CF 邮件假脱机目录会有所帮助，另一些人则说使用 CFMAIL 而不是使用 cfscript 发送电子邮件就可以了。

这是一个[类似的 SO 帖子](https://stackoverflow.com/questions/8079821/mail-mailspooler-spoollocktimeoutexception)，这是来自[Adob​​e 论坛的帖子](http://forums.adobe.com/thread/556258)

# amazon-sqs - 如何确认将 Amazon-SNS 消息传送到 SQS 队列？

> ID：15560432
> 
> 赞同：3
> 
> 时间：2013-03-22T00:05:54.313
> 
> 标签：amazon-sqs, amazon-sns

我将消息发布到 SNS，然后将该消息传递到 SQS 队列。如果我有发布消息的 PublishResult（包含 MessageId），有什么方法可以在不与 SQS 队列本身交互的情况下确认传递到 SQS 队列？

链接到文档以防我遗漏了一些明显的东西：http: [//docs.aws.amazon.com/sns/latest/api/Welcome.html](http://docs.aws.amazon.com/sns/latest/api/Welcome.html) [http://docs.aws.amazon.com/sns/latest/gsg /Welcome.html](http://docs.aws.amazon.com/sns/latest/gsg/Welcome.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:14:44.977

不，目前无法获得通知或查询飞行消息的状态。SNS 保证传递到 SQS，因此消息最终会到达那里。

# macos - NSTableView 在绘图时总是有一些单元间间距

> ID：15560434
> 
> 赞同：1
> 
> 时间：2013-03-22T00:05:56.723
> 
> 标签：macos, nstableview, nsimage

我有一个 NSTableView，但我没有直接在窗口中显示它。我改为在它前面显示一个 NSImageView，并将表格视图的全部或部分（实际上，它包含滚动视图的一部分，但我将继续说表格视图）绘制到 NSImageView 显示的图像中。最初一切正常。然后我添加了仅将部分表格视图绘制到图像中的功能，以获得缩放效果。例如，虽然图像视图及其图像始终为 500x500，但可以将 200x200 的表格视图正方形绘制到图像中（通过绘制方法放大）。我的问题是，当表格视图中的像素以 >1:1 映射到图像视图中的像素时，我会从表格视图中看到白色的单元格间空间。

我像这样绘制部分表格视图：

```
NSBitmapImageRep *imageRep = [scrollViewContainingTableView bitmapImageRepForCachingDisplayInRect:visibleImageRect];
[imageRep setSize:imgSize];
[scrollViewContainingTableView cacheDisplayInRect:rectIWantFromTableView toBitmapImageRep:imageRep]; 
```

我认为我的表格单元格绘制逻辑可能是错误的，所以我在整个视图上画了黑色，白色的行间线仍然存在：http: [//i.imgur.com/ivEvnkL.png](http://i.imgur.com/ivEvnkL.png)

我已经使用此方法调用将单元间距设置为 0：

`[tableView setIntercellSpacing:NSMakeSize(0, 0)];`

我怎样才能完全消除这些行间空间？

# excel - 如何使用 ListBox.ListIndex

> ID：15560437
> 
> 赞同：1
> 
> 时间：2013-03-22T00:06:12.513
> 
> 标签：excel, vba

我正在通过一个选择列表框来确定要选择的系列。之前的开发人员做了以下事情：

```
For i = 0 To ListBox4.ListCount - 1
   If ListBox4.Selected(i) Then
      Series_Msg = Series_Msg & ListBox4.List(i) & vbNewLine
      ActiveChart.SeriesCollection(i + 1).Select

      'other commands

  Next i 
```

为了清理他的代码，我尝试执行以下操作：

```
 If ListBox4.ListIndex <> -1 then

       ActiveChart.SeriesCollection(ListBox4.ListIndex + 1).Select 
```

但我得到一个需要对象的错误。我尝试将 i 声明为一个对象并为其分配 ListIndex 值，但这不起作用。

谁能建议我如何在没有循环的情况下做到这一点？我不敢相信这个循环是必要的。

任何帮助是极大的赞赏！

拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:34:30.223

确保您已正确选择图表：

```
Worksheets("Sheet1").ChartObjects("Chart 1").Activate

If ListBox4.ListIndex <> -1 Then
    Series_Msg = Series_Msg & ListBox4.List(ListBox4.ListIndex, 0)
    ActiveChart.SeriesCollection(ListBox4.ListIndex + 1).Select
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:26:54.483

尝试使用： `ActiveChart.SeriesCollection(ListBox4.List(ListBox4.ListIndex)).Select`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T00:35:22.077

这段代码对我来说很好，只要有一个`ActiveChart`. 添加一些处理以确保 ActiveChart 不是 Nothing。否则，您将收到该错误，`Object Variable or With Block not set`.

```
Sub UserForm_Activate()
    ListBox1.AddItem "First"
    ListBox1.AddItem "Second"
    ListBox1.AddItem "Third"
End Sub

Private Sub ListBox1_AfterUpdate()
Dim i As Integer

If ActiveChart Is Nothing Then 
    MsgBox "There is no ActiveChart!"
    Exit Sub
End If

i = ListBox1.ListIndex + 1

ActiveChart.SeriesCollection(i).Select
'Alternatively, you can ignore "i" and just use ActiveChart.SeriesCollection(ListBox1.ListIndex+1).Select

Unload UserForm1

End Sub 
```

# rails-admin - Rails_admin 路由未出现

> ID：15560440
> 
> 赞同：1
> 
> 时间：2013-03-22T00:06:23.850
> 
> 标签：rails-admin

我有几个扩展 rails_admin 的插件，但这些操作没有出现在我的路线中

```
Routes for RailsAdmin::Engine:
dashboard GET           /                                      rails_admin/main#dashboard
index GET|POST          /:model_name(.:format)                 rails_admin/main#index
new GET|POST            /:model_name/new(.:format)             rails_admin/main#new
export GET|POST         /:model_name/export(.:format)          rails_admin/main#export
bulk_delete POST|DELETE /:model_name/bulk_delete(.:format)     rails_admin/main#bulk_delete
history_index GET       /:model_name/history(.:format)         rails_admin/main#history_index
bulk_action POST        /:model_name/bulk_action(.:format)     rails_admin/main#bulk_action
show GET                /:model_name/:id(.:format)             rails_admin/main#show
edit GET|PUT            /:model_name/:id/edit(.:format)        rails_admin/main#edit
delete GET|DELETE       /:model_name/:id/delete(.:format)      rails_admin/main#delete
history_show GET        /:model_name/:id/history(.:format)     rails_admin/main#history_show
show_in_app GET         /:model_name/:id/show_in_app(.:format) rails_admin/main#show_in_app 
```

为什么？

[资源](https://github.com/adamwong246/StEnki)

# php - 从 MYSQL 数据库下载文件

> ID：15560441
> 
> 赞同：0
> 
> 时间：2013-03-22T00:06:24.833
> 
> 标签：php, mysql

好的，我将文件上传到我的数据库中。但是从数据库下载文件时出现问题，它显示为一个链接，当我单击该链接时没有任何反应。

我对 php 还是很陌生，所以我的代码并不完美。

这是我的上传文件

```
 <?php

   require 'connect.php';
 ?>
 <form method="post" enctype="multipart/form-data">
 <table width="350" border="0" cellpadding="1" cellspacing="1" class="box">
 <tr>
 <td width="246">
<input type="hidden" name="MAX_FILE_SIZE" value="2000000">
<input name="userfile" type="file" id="userfile">
</td>
<td width="80"><input name="upload" type="submit" class="box" id="upload" value="                                        
</tr>
  </table>
  </form>

 <?php
if(isset($_POST['upload']) && $_FILES['userfile']['size'] > 0)
{
$fileName = $_FILES['userfile']['name'];
$tmpName  = $_FILES['userfile']['tmp_name'];
$fileType = $_FILES['userfile']['type'];
$fileSize = $_FILES['userfile']['size'];
$fp      = fopen($tmpName, 'r');
$content = fread($fp, filesize($tmpName));
$content = addslashes($content);
fclose($fp);
if(!get_magic_quotes_gpc())
{
$fileName = addslashes($fileName);
}
$query = "INSERT INTO upload (name, type, size, content) ".
"VALUES ('$fileName', '$fileType', '$fileSize', '$content')";
mysql_query($query) or die('Error, query failed');
echo "<br>File $fileName uploaded<br>";
}
?>

 Here is my download 

<?php
require 'connect.php';

   $query = "SELECT id, name FROM upload";
   $result = mysql_query($query) or die('Error, query failed');
   if(mysql_num_rows($result) == 0)
   {
    echo "Database is empty <br>";
   }
   else
   {
    while(list($id, $name) = mysql_fetch_array($result))
    {
   ?>
   <a href="download.php?id=<?php echo urlencode($id);?>"><?php echo urlencode($name);? ></a> <br>
   <?php
   }
   }
   exit;
  mysql_close()
   ?>
   <?php
   require 'connect.php';
    $query = "SELECT id, name FROM upload";
    if(isset($_GET['id']))
    {

    $id    = $_GET['id'];
    $query = "SELECT name, type, size, content " .
    "FROM upload WHERE id = '$id'";
     $result = mysql_query($query) or die('Error, query failed');
    list($name, $type, $size, $content) =  mysql_fetch_array($result);
    $content = $row['content'];
    header("Content-Disposition: attachment; filename=\"$filename\"");
    header("Content-type: $type");
    header("Content-length: $size");
    exit;
    print $content;
   ob_clean();
  flush();
    echo $content;
   }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:12:02.877

我彻底扫描了您的代码，这是最终答案。

```
<?php
    require 'connect.php';

    $query = "SELECT id, name FROM upload";
    $result = mysql_query($query) or die('Error, query failed');

    if(mysql_num_rows($result)==0){
        echo "Database is empty <br>";
    }
    else{
        while(list($id, $name) = mysql_fetch_array($result)){
            echo "<a href=\"download.php?id=\$id\">$name</a><br>";
        }
    }

    if(isset($_GET['id'])){
        $id    = $_GET['id'];   
        $query = "SELECT name, type, size, content FROM upload WHERE id = '$id'";       
        $result = mysql_query($query) or die('Error, query failed');
        list($name, $type, $size, $content) =  mysql_fetch_row($result);
        header("Content-Disposition: attachment; filename=\"$name\"");
        header("Content-type: $type");
        header("Content-length: $size");
        print $content;
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:12:43.797

在你的`download.php`你做链接和`exit`。这意味着您不会比您的`exit`电话更进一步。

```
<?php
   }
   }
   exit;
   mysql_close()
 ?> 
```

您需要重新考虑下载文件中的逻辑。你也叫

```
header("Content-length: $size");
exit;
print $content; 
```

# c# - 标记为过时的接口方法在实现时不会从编译器发出消息

> ID：15560445
> 
> 赞同：8
> 
> 时间：2013-03-22T00:07:19.593
> 
> 标签：c#, compiler-construction

考虑这个例子

```
 public interface IAnimal
    {
        [Obsolete("Animals can't eat anymore", true)]
        void Eat();
    }

    public class Animal : IAnimal
    {
        public void Eat()
        {
            Console.WriteLine("Hello");
        }
    } 
```

我有一个带有过时方法的接口 IAnimal。Animal 类实现了该接口。

稍后，我这样调用 Eat 方法：

```
var animal = new Animal();
animal.Eat(); 
```

编译器不会编译失败（我将 Obsolete 标记为给出错误而不是警告）。程序编译并且该方法被调用并且没有错误，以及。

据我所知，这是编译器的错误。我错过了什么吗？

注意：我使用的是 VS2010

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-22T00:10:14.050

您只将 IAnimal.Eat 标记为过时，而不是 Animal.Eat。*var*关键字解析为 Animal，因此当您调用 animal.Eat 时，您不会调用任何标记为 Obsolete 的方法。

*要解决此问题，请将var*显式更改为*IAnimal*，或者更好地将 Animal.Eat 标记为已过时：

```
 public interface IAnimal
    {
        [Obsolete("Animals can't eat anymore", true)]
        void Eat();
    }

    public class Animal : IAnimal
    {
        [Obsolete("Animals can't eat anymore", true)]
        public void Eat()
        {
            Console.WriteLine("Hello");
        }
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-22T00:11:38.133

看起来这种行为是因为你`var animal`的`Animal`方法`Eat`没有过时。如果你这样做了：

```
IAnimal animal = new Animal();
animal.Eat(); 
```

您应该看到您期望的警告/错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-22T00:12:13.757

编译器不会对来自接口的过时方法发出警告，只会对方法调用发出警告。这有充分的理由：

### 您可以随时命名您的方法`Eat`

无论它是否也存在于其中一个接口中并标记为已过时，`Eat`您总是被允许实现一个方法。`Animal`例如，如果允许这样做：

```
public class Animal
{
    public void Eat() { /* ... */ }
} 
```

为什么不允许这样做：

```
public class Animal : IAnimal
{
    public void Eat() { /* ... */ }
} 
```

### 必须实现所有接口方法

您需要实现接口中存在的所有方法。你不能跳过它们中的任何一个，即使它们已经过时也不行。

例如，如果你没有添加`Eat`，你就不会实现接口的*所有*成员并且你会得到其他错误：

```
public class Animal : IAnimal
{
    // No Eat()
} 
```

> 'Animal' 没有实现接口成员 'IAnimal.Eat()'

# c# - 如何在 msi 上开始安装之前运行 SCRIPT 或 EXE？

> ID：15560447
> 
> 赞同：1
> 
> 时间：2013-03-22T00:07:27.387
> 
> 标签：c#, visual-studio-2010, windows-installer, setup-deployment, visual-studio-setup

如何在 msi 上开始安装之前运行 SCRIPT 或 EXE？我正在使用 Visual Studio 2010 的安装项目。

我想让脚本或 exe 运行，以退出我的应用程序的先前版本。我正在查看自定义操作，但 exe 只会在安装完成后运行。

有没有办法在安装发生之前运行自定义操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T14:24:21.050

一种方法是编写另一个项目，可能只是作为控制台应用程序并在那里执行 EXE，然后启动 MSI 包。但不知道你是否满意。

# bash - 脚本关闭时删除日志文件？

> ID：15560451
> 
> 赞同：1
> 
> 时间：2013-03-22T00:07:58.900
> 
> 标签：bash, logging

*   我有一个脚本，每分钟将其状态记录到一个文件中。
*   然后状态栏会显示此日志的内容。

当脚本中止时，我对日志不感兴趣，因为它已经过时了。我想把它删掉。

是否有可能只有当脚本正在运行时才存在文件并且否则会消失？

我知道我可以编写另一个脚本来定期删除日志，但我正在寻找更有效的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:10:19.940

尝试这个 ：

```
#!/bin/bash

trap 'rm /path/to/log' EXIT TERM

# ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:31:30.780

除了“sputnick”提到的陷阱之外，您可能还希望文件是明确的临时文件。临时文件的缺点是它可能会以不方便的路径结束，如果您希望能够在命令行上对其进行处理，这将很重要。

要制作临时文件，请使用`mktemp`, 沿着以下几行：

```
tempFile="$(mktemp "${TMPDIR:-/tmp/}$(basename "$0")-XXXXX")" 
```

这将 (a) 在临时文件名中包含脚本的名称，以及 (b)`$TMPDIR`用作基本目录（如果设置但默认为`/tmp`as 通常是好的做法）。

至于`trap`，我认为您应该关心的主要信号是`TERM`，并且您还想捕捉伪信号`EXIT`。我更喜欢使用信号名称而不是它们不太便携的数字：

```
trap 'rm -f "${tempFile}"' EXIT TERM 
```

# ruby-on-rails - /usr/bin/env: ruby 1.8: 没有这样的文件或目录

> ID：15560455
> 
> 赞同：1
> 
> 时间：2013-03-22T00:08:29.330
> 
> 标签：ruby-on-rails, ruby, ubuntu, rvm

我已经安装了 ruby​​ 1.9.3，现在当我想在一个项目上启动“rails server”时，我收到了这个错误：/usr/bin/env: ruby​​1.8: No such file or directory

我在一些帖子中看到我必须更改`PATH`某些内容，但我不知道该怎么做。我是linux新手。

```
echo $PATH:
~/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin‌​:/sbin:/bin:/usr/games:/home/mordehai/.rvm/bin:/home/mordehai/.rvm/bin 
```

我安装了几次“sudo apt-get install ruby​​1.9.3, and with rvm

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:17:56.980

您缺少 RVM 的基础知识：

```
rvm install 2.0.0
rvm use 2.0.0 --default # The default arg is needed only first time
gem install rails
# rails new myapp && cd myapp
rails server 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-24T15:33:13.920

我在至少经过一个`apt-get dist-upgrade`.

环顾四周寻找罪魁祸首，很快就发现在升级系统红宝石后留下了一堆垃圾。

```
grep -r "ruby1.8" /usr/bin/*
/usr/bin/erubis:#!/usr/bin/ruby1.8
/usr/bin/rackup:#!/usr/bin/ruby1.8
/usr/bin/rails:#!/usr/bin/ruby1.8
...
/usr/bin/X11/redcloth:#!/usr/bin/ruby1.8 
```

修复的引用太多，我不想维护所有这些文件，所以让 ruby​​1.8 可用于任何期望它的脚本似乎更容易。

修复就像运行一样简单

```
ln -s /usr/bin/ruby /usr/bin/ruby1.8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T06:55:51.737

我也遇到过这种问题，所以我就是这样解决的。它可能不是永久的解决方案，但它是：每次启动服务器之前，将路径更改为项目目录中的以下内容：

```
$ source ~/.rvm/scripts/rvm 
```

然后你可以运行你的服务器

```
$ rails s 
```

我相信你很高兴

# c# - 如何从数组中快速填充字典？

> ID：15560460
> 
> 赞同：0
> 
> 时间：2013-03-22T00:09:20.157
> 
> 标签：c#, dictionary

我有一个包含许多字符串变量的对象，它们是从数组中填充的，这对我来说似乎效率很低，但这是我能在短时间内想到的唯一方法，现在我有一点时间想改进它通过使用字典来存储所有值。

这就是我现在所拥有的：

```
Product product = new Product();
                string[] row = productsList[i];

                product.row1 = row;

                product.PRODUCTID = row[0];
                product.PRODUCTCODE = row[1];
                product.PRODUCT = row[2];
                product.CLEAN_URL = row[3];
                product.WEIGHT = row[4];
                product.LIST_PRICE = row[5];
                product.DESCR = row[6];
                product.FULLDESCR = row[7];
                product.KEYWORDS = row[8];
                product.TITLE_TAG = row[9];
                product.META_KEYWORDS = row[10];
                product.META_DESCRIPTION = row[11];
                product.AVAIL = row[12];
                product.RATING = row[13];
                product.FORSALE = row[14];
                product.SHIPPING_FREIGHT = row[15];
                product.FREE_SHIPPING = row[16];
                product.DISCOUNT_AVAIL = row[17];
                product.MIN_AMOUNT = row[18];
                product.LENGTH = row[19];
                product.WIDTH = row[20];
                product.HEIGHT = row[21];
                product.LOW_AVAIL_LIMIT = row[22];
                product.FREE_TAX = row[23];
                product.CATEGORYID = row[24];
                product.CATEGORY = row[25];
                product.POS = row[26];
                product.MEMBERSHIP = row[27];
                product.PRICE = row[28];
                product.THUMBNAIL = row[29];
                product.IMAGE = row[30];
                product.TAXES = row[31];
                product.ADD_DATE = row[32];
                product.VIEWS_STATS = row[33];
                product.SALES_STATS = row[34];
                product.DEL_STATS = row[35];
                product.SMALL_ITEM = row[36];
                product.SEPARATE_BOX = row[37];
                product.ITEMS_PER_BOX = row[38];
                product.GENERATE_THUMBNAIL = row[39];
                product.RETURN_TIME = row[40];
                product.MANUFACTURERID = row[41];
                product.MANUFACTURER = row[42]; 
```

这真的很长而且很耗时，特别是因为我最终必须把它读回来，而且我真的不期待这样做，而且 Products 类是一堆字符串变量。

有没有一种快速而轻松的方法来循环遍历数组并将它们全部添加到 Dictionary 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:14:26.237

```
// you only have to do this once
string[] labels = new string [] { "PRODUCTID", "PRODUCTCODE", ... 
```

然后你可以有一本字典并像这样加载它：

```
Dictionary<string,string> d = new Dictionary<...>

for (int i=0; i<labels.Count; i++) {
    d[labels[i]] = row[i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:15:43.930

将该逻辑放入 Product 的重载构造函数中，以便您可以执行以下操作：

```
Product product = new Product(productsList[i]); 
```

你无能为力来短路这个逻辑。除非您可以将更多元数据编码到行中，否则它必须存在于某个地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T00:16:07.973

鉴于每个值都有一个唯一的键，因此在此处使用循环并非易事。不管你怎么做，你都必须在某个地方列出所有的键。也就是说，您可以在静态数组中定义所有键并使用如下循环：

```
string[] keys = new [] {"PRODUCTID", "PRODUCTCODE", ... };
Dictionary<string, string> ProductAttributes = new Dictionary<string,string>();

for(int i = 0, i < row.Length, i++)
{
    ProductAttributes[keys[i]] = row[i];
} 
```

但是请注意，这样做意味着您将失去从拥有属性中获得的所有静态检查。通过将所有内容都放在字典中，您会因键入错误的键名而引入潜在的运行时错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T00:30:56.660

是的（在没有 Visual Studio 的计算机上，所以我无法验证我没有错误）

```
List<string> keys = new List<string>{"PRODUCTID","PRODUCTCODE"\*ect*\}
Dictionary<string,string> dict = new Dictionary<string,string>
for (int i = 0; i < keys.Count; i++)
{
    dict[keys[i]]=row[i];
} 
```

然后返回 (int i = 0; i < keys.Count; i++) { row[i] = dict[keys[i]]; 这在功能上与您所拥有的没有任何不同，并且具有额外的限制，即您无法在编译时间之前检查密钥。

您可以使用反射技巧使用列表而不是使用字典自动填充属性：

[http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx](http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx)

```
for (int i = 0; i < keys.Count; i++)
{
 this.GetType().InvokeMember(keys[i],
     BindingFlags.Instance | BindingFlags.Public | BindingFlags.SetProperty,
     Type.DefaultBinder, obj, row[i]);
} 
```

这一切都提供您设置属性而不是成员。

不过，我仍然会手动制作属性列表，C# 并不关心退货单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T00:39:03.400

将键放入数组中：

```
string[] keys = {
  "PRODUCTID", "PRODUCTCODE", "PRODUCT", "CLEAN_URL",
  "WEIGHT", "LIST_PRICE", "DESCR", "FULLDESCR",
  "KEYWORDS", "TITLE_TAG", "META_KEYWORDS", "META_DESCRIPTION",
  "AVAIL", "RATING", "FORSALE", "SHIPPING_FREIGHT",
  "FREE_SHIPPING", "DISCOUNT_AVAIL", "MIN_AMOUNT", "LENGTH",
  "WIDTH", "HEIGHT", "LOW_AVAIL_LIMIT", "FREE_TAX",
  "CATEGORYID", "CATEGORY", "POS", "MEMBERSHIP",
  "PRICE", "THUMBNAIL", "IMAGE", "TAXES",
  "ADD_DATE", "VIEWS_STATS", "SALES_STATS", "DEL_STATS",
  "SMALL_ITEM", "SEPARATE_BOX", "ITEMS_PER_BOX", "GENERATE_THUMBNAIL",
  "RETURN_TIME", "MANUFACTURERID", "MANUFACTURER"
}; 
```

现在您可以从中制作字典：

```
string[] row = productsList[i];

product.row1 =
  Enumerable.Range(0, row.Length).ToDictionary(i => keys[i], i => row[i]); 
```

# php - 从 MySQL 表中获取值，仅显示前十名最高和前十名最低

> ID：15560463
> 
> 赞同：1
> 
> 时间：2013-03-22T00:09:33.470
> 
> 标签：php, mysql

我有一张这样的桌子：

```
 Username    Rating
1 xxxxxxxx      -1
2 xxxxxxxx       2
3 xxxxxxxx       5
4 xxxxxxxx      -2
5 xxxxxxxx       4 
```

（想象一下如果表更大并且有超过 20 行）。我想在 PHP 中编写一个 MySQL 语句，它将返回两个列表：一个按最大值排序的前十个最大值的列表，以及一个按最低值排序的前十个最小值的列表。我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T00:12:59.223

最高十：

```
SELECT Username, Rating FROM <Table> ORDER BY Rating DESC LIMIT 10; 
```

最低十：

```
SELECT Username, Rating FROM <Table> ORDER BY Rating ASC LIMIT 10; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T00:13:23.627

您订购结果并使用`limit 10`

```
select *
from mytable
order by rating
limit 10 
```

或最高值

```
select *
from mytable
order by rating desc
limit 10 
```

# delphi - 来自本地客户端连接的 SQL SELECT 使用路径检索服务器数据

> ID：15560466
> 
> 赞同：1
> 
> 时间：2013-03-22T00:09:49.147
> 
> 标签：delphi, advantage-database-server, file-locking

多年来，我们一直通过 Delphi后代组件成功地将[Advantage Database Server](http://advantagedatabase.com) 9.1 (Netware) 与 DBF/CDX 索引文件一起使用。`TDataSet`（这是统计/报告目的所需的遗留数据。）

几周前，我们从 Netware 切换到 Win2K8 作为我们的网络操作系统，并迁移到 ADS 9.1。`SELECT`这破坏了对服务器数据库执行查询的本地客户端的查询功能。

例如，下面的查询在 ARC32 的 SQL 窗口中使用 ADS 9.1 的 Netware 版本运行良好，运行时与以下中的空闲表的本地连接`C:\Data`：

```
INSERT INTO MyLocalDB 
  SELECT TOP 10 * FROM [\\MyServer\Data\MyRemoteDB.dbf] WHERE somecondition 
```

相同的查询使用映射到服务器目录的驱动器来工作：

```
INSERT INTO MyLocalDB 
  SELECT TOP 10 * FROM [S:\Data\MyRemoteDB.dbf] WHERE somecondition 
```

请注意，它是一个[自由表](http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/devguide_free_tables_versus_database_tables.htm)- 它不是数据字典的一部分。它是一个空闲表，位于对存储它的服务器上的文件夹具有读/写访问权限的位置。本地客户端连接的文件夹是完全可访问的（它用于每天测试应用程序，使用与数据的本地连接）。正常的应用程序可以在客户端上针对本地连接数据或远程连接数据运行而不会出现任何问题。只是来自本地连接**的**查询以检索服务器数据是一个问题，并且之前它工作正常。唯一的区别是操作系统和 ADS 从 Netware 切换到 Win2k8，根据文档（请参阅下面引用的帮助文件内容），它应该仍然可以工作。

切换到 ADS 9.1 的 Windows 版本后，上述两个查询都失败并显示

> 错误 7008：无法打开指定的表、备忘录文件或索引文件。表名 \MyServer\Data\MyRemoteDB.dbf（或 S:\Data\MyRemoteData.dbf）。

本周我们在系统上升级到 ADS 10.10（以及 ADS 10.10 `TDataSet`10.10 组件），但上述查询仍然失败。

这在 Windows 版本的 ADS 下根本不支持吗？该文档使第一个看起来应该可以工作：

> 表名路径中的驱动器号只能用于 Advantage Local Server。当使用适用于 NT 或 NetWare 的 Advantage Database Server 时，完全限定的路径必须使用 UNC（例如，“\server\volume\path\table”），因为在客户端驱动器号没有意义的服务器上解析 SQL 语句。请注意，像这样引用的表必须用双引号或 []（括号）括起来，因为它们包含非标准字符。

UNC 路径正确地用`[]`括号括起来，并且路径或表名中的任何位置都没有空格。我尝试过添加和不添加`.dbf`扩展名；错误消息保持不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:36:57.367

我怀疑您遇到了专有锁定的更改。对 Advantage Database Server 进行了更改，以使默认行为在使用专有锁定时完全拒绝对其他应用程序的访问。您可以使用名称有点混乱的[NONEXCLUSIVE PROPRIETARY LOCKING](http://devzone.advantagedatabase.com/dz/webhelp/Advantage11.1/master_non_exclusive_proprietary_locking.htm)配置设置来禁用它。我认为，如果您将该配置值设置为 1，那么它将按您的意愿工作。

将该配置设置更改为 1 并重新启动 ADS 后，本地服务器连接应该能够获得对服务器已打开的 DBF 表的只读访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:48:22.197

假设您使用的是远程 ADS 服务器（不是 ALS），您必须使用服务器端别名来获得此功能：

[http://devzone.advantagedatabase.com/dz/webhelp/advantage9.0/extprocs/server_side_aliases.htm](http://devzone.advantagedatabase.com/dz/webhelp/advantage9.0/extprocs/server_side_aliases.htm)

将其放入`C:\adsserver.ini`文件中`MyServer`（或您的 ADS 日志所在的任何位置）：

```
[ServerAliases]
Data=X:\Data 
```

表文件`X:\Data`的位置在哪里。`MyRemoteDB.dbf`

但是，这只有在还有共享或您已设置`IgnoreRights`设置时才能正常工作：

> 服务器端别名必须始终与 Advantage 客户端的“忽略权限”设置结合使用。有关详细信息，请参阅数据库安全主题。否则将导致文件存在检查，这将使用来自客户端的服务器端别名并失败，从而导致 AE_FILE_NOT_FOUND (5004) 错误。

对于 ALS，您可以只使用普通的 Windows 文件共享。

# c++ - 使用必须知道其容器的对象。想要避免烦人的代码重复

> ID：15560470
> 
> 赞同：0
> 
> 时间：2013-03-22T00:10:04.480
> 
> 标签：c++

我有树。它提供空间分区服务（不仅仅是 BSP）。树中的每个节点都可以拥有（通过 unique_ptr）多态对象。这些对象需要知道它们被分配到哪个节点。因此，在为节点创建对象时，我必须将节点引用传递给构造函数。

```
node.data.reset(new t_Something(node)); 
```

通常我需要创建（并分配给相应的节点）多个对象，而不仅仅是一个。

```
node_a.data.reset(new t_Wing(node_a, /*wing args*/...));
node_h.data.reset(new t_Hall(node_h, /*hall args*/...));
node_b.data.reset(new t_Wing(node_b, /*wing args*/...)); 
```

我正在开发内容生成器，将来我会写很多这样的代码。我想避免重复`node_XXX`。`node_XXX.data.reset(new T(node_XXXX`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:12:34.967

模板怎么样：

```
#include <utility>    // for std::forward

template <typename T, typename N, typename ...Args>
N & add(N & node, Args &&... args)
{
    node.data.reset(new T(node, std::forward<Args>(args)...));
    return node;
} 
```

用法：

```
add<t_Wing>(node_a);                // appends new t_Wing(node_a)
add<x_Wing>(node_b, arg1, arg2);    // appends new x_Wing(node_b, arg1, arg2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:20:39.053

有自己调用的构造函数`data.reset`，你已经在传递节点参数。

# android - 如何在不同设备上为数字添加逗号？

> ID：15560472
> 
> 赞同：0
> 
> 时间：2013-03-22T00:10:13.273
> 
> 标签：android

我在eclipse中开发，我有一个奇怪的问题。我试图在数字中添加逗号，所以我添加了以下代码：

```
s = NumberFormat.getIntegerInstance().format(count); 
```

我在许多模拟器上检查了它，并且一切都很棒。现在我发布了应用程序，在某些设备中，逗号只是没有出现。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:26:09.580

`NumberFormat.getIntegerInstance()`取决于设备的默认语言环境，并非所有语言环境都将使用逗号进行数字分组。在世界的某些地方，使用句号，其他地方使用撇号，而其他地方则根本不使用分组。

为了获得逗号分组整数的一致结果，请按如下方式指定语言环境：

```
s = NumberFormat.getIntegerInstance( Locale.US ).format( count ); 
```

# html - 嵌套 ul display:none 在 IE8 中不起作用

> ID：15560477
> 
> 赞同：1
> 
> 时间：2013-03-22T00:10:49.350
> 
> 标签：html, css

使用 IE8（Windows XP 支持），以下简单的 CSS 选择器无法实现将嵌套的 ul 转换为无显示的目标。而是显示整个列表。此代码适用于 IE9+ 和所有其他现代浏览器。这是一个错误，还是预期的行为？

```
<html>
<head>
<style>
nav ul ul {
    display: none;
}
</style>
</head>
<body>
<nav>
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Tutorials</a>
            <ul>
                <li><a href="#">Photoshop</a></li>
                <li><a href="#">Illustrator</a></li>
                <li><a href="#">Web Design</a>
                </li>
            </ul>
        </li>
        <li><a href="#">Articles</a>
            <ul>
                <li><a href="#">Web Design</a></li>
                <li><a href="#">User Experience</a></li>
            </ul>
        </li>
        <li><a href="#">Inspiration</a></li>
    </ul>
</nav>
</body>
</html> 
```

[上面代码的jsFiddle在这里](http://jsfiddle.net/UdWEu/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T00:20:09.927

这可能是因为 IE8 中的 css 规则无效，因为该`nav`浏览器中不存在该元素。该规则`ul li ul`正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T00:21:45.137

@Pigueiras 是正确的。您需要包含一个像 Modernizr（或 html5 shim）这样的脚本，以便在 IE <8 中设置 HTML5 语义元素的样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T00:23:55.290

这可能是不理解 html5`<nav>`标记的默认 IE8 行为。您必须在布局中强制使用 em。

您可以将此添加到您的文档标题

```
<!--[if lt IE 9]>
<script>
    document.createElement('nav');
    /* left part is not needed for your situation but an example for you */
    document.createElement('header');
    document.createElement('section');
    document.createElement('article');
    document.createElement('aside');
    document.createElement('footer');
    document.createElement('hgroup');
</script>
<![endif]--> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T00:19:47.153

这在 IE7 中对我有用。希望能帮助到你。

```
<html>
<head>
</head>
<body>
<nav>
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Tutorials</a>
            <ul style="display:none;">
                <li><a href="#">Photoshop</a></li>
                <li><a href="#">Illustrator</a></li>
                <li><a href="#">Web Design</a>
                </li>
            </ul>
        </li>
        <li><a href="#">Articles</a>
            <ul style="display:none;">
                <li><a href="#">Web Design</a></li>
                <li><a href="#">User Experience</a></li>
            </ul>
        </li>
        <li><a href="#">Inspiration</a></li>
    </ul>
</nav>
</body>
</html> 
```

# web-services - 您如何使用 rdoc 记录 padrino 路由方法？

> ID：15560497
> 
> 赞同：1
> 
> 时间：2013-03-22T00:13:18.373
> 
> 标签：web-services, padrino, rdoc

我想使用 RDoc 来记录用 Padrino 编写的 Web 服务应用程序中的 API 调用。这是一个示例文件：

```
Analytics.controller :api do
  diable :layout

  ##
  # = <base_url>/ping - test for response
  # The +ping+ command is a quick way to verify a live connection to the
  # service.
  get :ping, :provides => :json do
    {:time => timestamp(), :version => version_string()}.to_json
  end

end 
```

但是由于没有周围的类，rdoc 不会为 :ping 方法创建文档。当然，我可以使用 rdoc 或标记在单独的文件中记录 API 调用，但这似乎是 20 世纪。

其他人如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:14:22.540

由于 Padrino 基于 Sinatra，因此可以使用这个 gem [yard-sinatra](https://github.com/rkh/yard-sinatra)记录路线。

# perl - 使用perl构建数据库时循环回到菜单？

> ID：15560504
> 
> 赞同：0
> 
> 时间：2013-03-22T00:13:43.087
> 
> 标签：perl, prompt

仍然对 perl 感兴趣，并试图学习如何将它与 MySQL 一起使用来完成数据库任务。我有我希望不要远离为用户提供菜单的 perl 脚本的开始，而不是要求输入，我从数字 1 开始，它将用户输入加载到我之前指定的表中，我的question is, what is an efficient way to return to the menu print statement when that selection has been completed? 所以他们可以继续创建帐户等？

```
print "User Menu(please select 1-5):\n 1)Create a new account\n 2)List all the times       that an account has logged in\n 3)Log in/out of account\n 4)Drop and re-create the     necessary database tables\n 5)Quit\n";

$userInput = <>;

if($userInput == 1){
print "Please enter a user name: ";
$user_name = <>;
print "Please enter a password: ";
$password = <>;
$dbh->do("INSERT INTO user_accounts VALUES ('$user_name','$password')");
   #Trying to loop back to the menu.....
#}elsif($userInput == 2){
   #test:print "I am number 3";
#}elsif($userInput == 3){
   #test:print "I am number 3";
#}elsif($userInput == 4){
   #$dbh->do('DROP TABLE IF EXISTS user_accounts');
#test print "I am number 4";
}else{
exit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:12:32.500

我一开始以为你想在后台执行任务，但如果你只想返回菜单，把整个事情放在一个循环中。

另外，查看[IO::Prompter](http://search.cpan.org/perldoc/IO%3a%3aPrompter#Numbered_menus)或[Prompt::ReadKey中的编号菜单](http://search.cpan.org/perldoc/Prompt%3a%3aReadKey)

```
use strict;
use warnings;

run();

sub run {
    my %dispatch = (
        1 => \&create_account,
        2 => \&list_log,
        3 => \&log_in_out,
        4 => \&recreate_tables,
        5 => \&quit,
    );

    while (1) {
        {
            local $| = 1;
            print menu(), '> ';
        }

        my $choice = <>;

        $choice =~ s/\A\s+//;
        $choice =~ s/\s+\z//;

        if (defined(my $handler = $dispatch{$choice})) {
            my $result = $handler->();
            unless (defined $result) {
                exit 0;
            }
        }
        else {
            warn "Invalid selection\n";
        }
    }
}

sub menu {
    return <<EO_MENU;
User Menu (please select 1-5):
1) Create a new account
2) List all the times that an account has logged in
3) Log in/out of account
4) Drop and re-create the necessary database tables
5) Quit
EO_MENU
}

sub create_account { print "create\n" }

sub list_log { print "list_log\n" }

sub log_in_out { print "log_in_out\n" }

sub recreate_tables { print "recreate_tables\n" }

sub quit { } 
```

# hibernate - 具有相同属性的 2 个连接子类的休眠分离标准

> ID：15560506
> 
> 赞同：0
> 
> 时间：2013-03-22T00:13:52.927
> 
> 标签：hibernate, subclass, hibernate-criteria

我有以下映射：

```
<class name="Animal" table="Animal" abstract="true">

    <id name="Id" column="Id" type="Guid">
       <generator class="guid.comb"/>
    </id>

    <joined-subclass name="Dog" table="Dog" lazy="false">
       <property name="Name" column="Name" type="String" length="100" not-null="true"/>
    </joined-subclass>

    <joined-subclass name="Cat" table="Cat" lazy="false">
       <property name="Name" column="Name" type="String" length="100" not-null="true"/>
    </joined-subclass>
</class> 
```

这是我的搜索条件：

```
Sessoion.CreateCriteria("Animal")
    .Add(Restrictions.Eq("Name", "Pluto"))
    .List<Animal>(); 
```

由搜索条件生成的查询仅在 Dog 表中查询 Name = "Pluto"。它不会查询 Cat 表。

有人知道如何查询 Name="Pluto" 的两个表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:56:11.957

您使用的是哪个版本？我在使用 Hiberante 3.3 时遇到了同样的问题，恐怕我必须找到一种解决方法，因为这是一个已知的错误：

[https://hibernate.atlassian.net/browse/HHH-4829](https://hibernate.atlassian.net/browse/HHH-4829)

# arrays - 在二维数组VB2008中存储目录及其文件

> ID：15560507
> 
> 赞同：1
> 
> 时间：2013-03-22T00:14:15.253
> 
> 标签：arrays, vb.net

我有一个如下所示的文件夹结构。我想将目录和其中的文件存储在一个数组中。

我已经将目录存储在一个数组中，但我不确定我是否将它的文件存储在一个数组中，因为当文件（0）、文件（1）等时我不能直接调用它。

是否可以将每个文件存储在二维数组中

其中文件（j）（k）其中j =目录和k =文件。?

好吧，我只想解决的是循环每个文件并比较它们的内容......也许解决的一种方法是做二维数组。

如果我错了，请纠正我。谢谢。

```
parent                'I stored it as an array
|
|---dirA              'dir(0)
|    |---fileA.txt           'file(0)
|    |---fileB.txt           'file(1)
|
|---dirB              'dir(1) 
|    |---file2A.txt          'file(0)
|    |---file2B.txt          'file(1)
|
|---dirC              'dir(2)
     |---file3A.txt          'file(0) 
```

这是我的代码：

```
Option Explicit On
Imports System 
Imports Scripting
Imports System.IO
Imports System.Text.RegularExpressions

Public Class Form1

Public Shared directory(), files(), FILE_NAME1, FILE_NAME2 As String
Public Shared count As Long
Public Shared counter1, counter2 As System.Collections.ObjectModel.ReadOnlyCollection(Of String)
Public Shared dirsize, filesize, i, j As Integer

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Dim parentinfo As New DirectoryInfo("C:\parent")

    Dim dirsize As Integer = System.IO.Directory.GetDirectories("C:\parent").Length
    'ComboBox1.Items.Add(dirsize) --> This is for me to check for the no.of folders in the parent

    ReDim directory(dirsize)

    '------------------------------------------------------
    'Access the Parent Folder and stores the directory in an array[]
    '------------------------------------------------------

    For Each dir As FileSystemInfo In parentinfo.GetFileSystemInfos()
        directory(i) = dir.Name
        i += 1
        ReDim Preserve directory(i)
    Next dir

    '------------------------------------------------------
    ' In this part, I will Re-iterate in each folder and access all the files inside it
    '------------------------------------------------------
    For k = 0 To dirsize - 1

        Dim childinfo As New DirectoryInfo("C:\parent\" & directory(k))

        'Count the no.of files contained in each folder
        Dim location = New DirectoryInfo("C:\parent\" & directory(k))
        Dim filesize = location.GetFiles("*", SearchOption.AllDirectories)

        'Initialize and re-define files
        ReDim files(filesize.Length)
        Dim fs As Integer = 0

        'Re-iterate in each file inside the sub-folder and store it as an array
        For Each data As FileSystemInfo In childinfo.GetFileSystemInfos()

            '------------------------------------------------------
                                   'This is where I am storing the file as an array
            files(fs) = data.Name  'I am reluctant here if this is storing as an array

            'ComboBox1.Items.Add(files(fs)) --> This is for me to output array of files

            lst.Items.Add(files(fs))

            '------------------------------------------------------

            fs += 1
            ReDim Preserve files(fs)
        Next data

    Next

    '---------------------------------------------------------------
    'This is for me to loop over  the parent folder and its files, but it is 
    'throwing an error at runtime
    'My purpose for this is to compare the contents of each file
    'I haven't included my code for comparing contents because it will be very long
    '---------------------------------------------------------------

    For c = 0 To dirsize - 1 'number of directories in the parent folder

        Dim direct As String = "C:\parent\" & directory(c)
        Dim DirectoryEntries As String()
        Dim NumberOfFiles As Double

        DirectoryEntries = System.IO.Directory.GetFileSystemEntries(direct)

        NumberOfFiles = UBound(DirectoryEntries)

        For b = 0 To NumberOfFiles 'number of files in the subfolder (for example: dirA)

            'this should where i compare file1 and file2
            'in this part it throws an error-->Index was outside the bounds of the array

            FILE_NAME1 = "C:\parent\" & directory(c) & "\" & files(b) 

        Next

    Next

End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:24:42.343

Something like a list of lists would be better, performance wise. You should try to avoid arrays for dynamic data, which folder structure is. Since you are planning to compare, a `Dictionary(Of String, FileSystemInfo)` would probably be more suitable, where key is your `filePath`. Depends on what you are comparing though.

# jsf-2 - 在 EL 中使用可变参数调用方法会引发 java.lang.IllegalArgumentException：错误数量的参数

> ID：15560508
> 
> 赞同：7
> 
> 时间：2013-03-22T00:14:15.347
> 
> 标签：jsf-2, el

我正在使用 JSF 2。

我有一种方法可以检查值列表中的匹配值：

```
@ManagedBean(name="webUtilMB")
@ApplicationScoped
public class WebUtilManagedBean implements Serializable{ ...

public static boolean isValueIn(Integer value, Integer ... options){
    if(value != null){
        for(Integer option: options){
            if(option.equals(value)){
                return true;
            }
        }
    }
    return false;
}

...
} 
```

要在 EL 中调用此方法，我尝试过：

```
#{webUtilMB.isValueIn(OtherBean.category.id, 2,3,5)} 
```

但它给了我一个：

> 严重 [javax.enterprise.resource.webcontainer.jsf.context] (http-localhost/127.0.0.1:8080-5) java.lang.IllegalArgumentException：参数数量错误

有没有办法从 EL 执行这种方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T01:12:43.420

不，不能在 EL 方法表达式中使用可变参数，更不用说 EL 函数了。

您最好的选择是创建多个具有不同数量的固定参数的不同命名方法。

```
public static boolean isValueIn2(Integer value, Integer option1, Integer option2) {}
public static boolean isValueIn3(Integer value, Integer option1, Integer option2, Integer option3) {}
public static boolean isValueIn4(Integer value, Integer option1, Integer option2, Integer option3, Integer option4) {}
// ... 
```

作为一个可疑的替代方案，您可以传递一个逗号分隔的字符串并将其拆分到方法中

```
#{webUtilMB.isValueIn(OtherBean.category.id, '2,3,5')} 
```

甚至是由逗号分隔的字符串创建的字符串`fn:split()`数组

```
#{webUtilMB.isValueIn(OtherBean.category.id, fn:split('2,3,5', ','))} 
```

但无论哪种方式，您仍然需要将它们解析为整数，或者将传入的整数转换为字符串。

如果您已经使用 EL 3.0，您还可以使用新的[EL 3.0 集合语法](http://docs.oracle.com/javaee/7/tutorial/jsf-el004.htm)，而无需整个 EL 函数。

```
#{[2,3,5].contains(OtherBean.category.id)} 
```

# php - 如何在 PHP 中比较两个 HTML/JavaScript 字符串是否相等？

> ID：15560509
> 
> 赞同：1
> 
> 时间：2013-03-22T00:14:22.500
> 
> 标签：php, html, string, comparison, equals

我有一个 PHP 程序，它将网页的 HTML/JavaScript 内容存储在 MySQL 数据库中。使用cURL获取内容，然后在作为长`$mysqli->real_escape_string()`文本存储在表中之前对其进行处理。

后来，我不得不再次使用 cURL 来获取网页的 HTML/JavaScript 内容并检索我存储在数据库中的内容。

此时，我需要比较它们以查看代码中是否进行了更改。我试过使用：

```
if ($saved == $content)
   return true;
else
   return false; 
```

但是，即使没有对代码进行任何更改，这也总是返回 false。第二次使用 cURL 时，我没有转义字符串，所以这不是问题。我已经比较了这两段代码，但我无法从视觉上辨别出任何差异。

如何比较这两个字符串，以便准确返回是否进行了任何更改？

我还应该提到，这两个文件都执行得很好，除了第二个总是返回 false。

第一个 PHP 文件：

```
$url = "www.example.com";
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$content = $mysqli->real_escape_string(curl_exec($ch));
curl_close($ch);

$query = "INSERT INTO saved (url, content)
              VALUES ('$url', '$content')";

$mysqli->query($query) 
```

第二个 PHP 文件：

```
$url = "www.google.com";
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$content = curl_exec($ch);
curl_close($ch);

$query = "SELECT content
          FROM saved
          WHERE url = '$url'";

$result = $mysqli->query($query);
$data = $result->fetch_assoc();
$saved = $data['content'];

if ($saved == $content)
    echo '1';
else
    echo '0'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T00:19:16.820

计算内容的[MD5](https://en.wikipedia.org/wiki/MD5)哈希值并保存。现在只需检查指纹

```
if($saved['fingerprint'] == $content['fingerprint']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T00:19:49.713

如果您只需要比较内容，我的建议是创建数据的校验和（使用[MD5](https://en.wikipedia.org/wiki/MD5)或类似方法）并根据校验和比较数据。

# ruby-on-rails - 从 Rails 哈希动态添加到 HTML 列表

> ID：15560510
> 
> 赞同：1
> 
> 时间：2013-03-22T00:14:25.877
> 
> 标签：ruby-on-rails, html-lists

我有一个包含许多值的哈希。对于每个值，我想生成一个列表条目。
当我执行以下操作时，仅显示哈希中的最后一个条目。

```
<% data.each do |k, v| %>
    <li><%= v['name'] %> - <%= v['email'] %></li>
<% end %> 
```

`data`从 YAML 加载

```
person:
   name: ABC
   email: xyz@gmail.com
person:
   name: LMN
   email: qrs@yahoo.com 
```

如何将哈希中的所有值添加到 html 列表中？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:34:41.490

如果那是您的实际 YAML 文件，那么您只看到一个对象的原因是因为您的键都是`person`. 如果将其解析为哈希，则每个实例`person`都将存储在`person`键上，并且由于哈希键必须是唯一的，因此仅保留最后一条记录。

您可能希望将其构造为哈希数组（或 YAML 中的“映射序列”）：

```
---
- name: LMN
  email: qrs@yahoo.com
- name: ABC
  email: xyz@gmail.com 
```

然后迭代为：

```
<% data.each do |entry| %>
  <li><%= entry['name'] %> - <%= entry['email'] %></li>
<% end %> 
```

# iphone - iOS Facebook SDK - 远程定义 FacebookAppID

> ID：15560512
> 
> 赞同：4
> 
> 时间：2013-03-22T00:14:26.953
> 
> 标签：iphone, ios, facebook

使用 iOS Facebook SDK 3.0，它需要在应用程序的 info.plist 中定义 FacebookAppID 和相关的 URL Scheme。我想远程定义这些（向我自己的服务器请求应用程序 ID）。所以2个不同的问题：

1.  我可以在运行时更改应用程序的 info.plist 吗？或者我可以在另一个 plist 中定义 FacebookApID 和 URL Scheme，我可以在其中更改 plist 甚至创建新的自定义 plist 文件？
2.  除了使用 info.plist for Facebook SDK 3.0 之外，还有其他方法来定义 URL Scheme 和 App ID 吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-20T14:41:49.360

1.1 不，您不能在运行时更改 Info.plist 文件。

1.2 不，您不能加载另一个 plist 文件来覆盖 Info.plist 中的设置。

2.1 是的，你可以在不改变Info.plist文件的情况下定义FacebookApID，通过调用见Facebook iOS SDK 中[FBSettings.h](https://github.com/facebook/facebook-ios-sdk/blob/56b40a4e75a5ab30cfbfb4197c69f092470b32f2/src/FBSettings.h#L178)`[FBSettings setDefaultAppID:@"Your Facebook App ID"];`的源代码。

2.2 不可以，URL Scheme 必须在 Info.plist 中定义，这样 iOS 才能识别。我相信 iOS 在安装您的应用程序时会读取 URL 方案，并将其缓存在系统的其他位置。即使您可以更改 Info.plist，系统也不会选择您的新 URL Scheme。但别担心，Facebook 身份验证有一种解决方法，无需使用 URL 方案！我们可以强制 Facebook iOS SDK 使用 UIWebView 进行登录，请参阅[这个 stackoverflow question](https://stackoverflow.com/a/12899186/613541)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T03:13:00.867

这是不可能的，原因有很多：

1.  您不能在运行时修改 iOS 应用程序的 info.plist 文件。
2.  您应该运行一个 Facebook 应用程序，但在您尝试发布您的应用程序之前*很久就无法获取该 ID。*您现在如何测试应用程序？
3.  Facebook 应用程序 ID 与应用程序用来完成 Facebook 的 OAuth 流程的 URL 方案相关联。iOS 应用程序的 URL 方案在 info.plist 中定义，同样，您无法更改。
4.  能够任意设置 Facebook 应用程序 ID 在某种程度上是一个安全问题，因为它会使冒充他人的 Facebook 应用程序变得微不足道。

这些只是我能想到的少数几个，我相信还有更多。

# css - 如何在不弄乱所需样式的情况下移动箭头

> ID：15560514
> 
> 赞同：0
> 
> 时间：2013-03-22T00:14:39.290
> 
> 标签：css, wordpress, wordpress-theming

我正在修复网站，我被困在 wordpress 中的 woo 主题中移动箭头。

![在此处输入图像描述](../Images/53b0871c4bcdf87b38f8a08bf0bb7344.png)

我想要的是在“服务”菜单项旁边（右侧）移动箭头。我试图调整填充，但它会使菜单项的布局大小更小，并且无法满足所需的输出

我也尝试找到箭头的背景图像，但似乎没有任何附加图像。

该网站是：`http://67.222.16.144/~chrismol/`

**问：如何在不弄乱所需样式的情况下移动箭头？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:20:25.533

你必须`!important`从`#navigation a`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:20:48.010

```
#navigation .nav li.parent > a:after {
    content: "";
    display: block;
    border: 0.3em solid #ccc;
    border-color: #ccc transparent transparent transparent;
    position: absolute;
    top: 36%;
    right: 1px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T01:55:08.603

你没有找到背景图片，因为没有，箭头是由 CSS 的`border`属性和`:after`选择器组成的。此代码创建箭头：

```
#navigation .nav li.parent > a:after {
    content: "";
    display: block;
    border: 0.3em solid #ccc;
    border-color: #ccc transparent transparent transparent;
    position: absolute;
    top: 48%;
    right: .8751em;
} 
```

**要在Services**菜单项旁边显示箭头，首先应将 更改`top:48%`为`top:34%`，然后添加以下 CSS 规则：

```
#menu-item-1987 a{
    padding-right:32px !important;
} 
```

这个答案如何满足您的期望，如果您有任何问题，请告诉我。:)

# javascript - 优雅地将方法重新附加到 Web Worker 中的对象？

> ID：15560518
> 
> 赞同：3
> 
> 时间：2013-03-22T00:15:00.653
> 
> 标签：javascript, html, design-patterns, web-worker

我正在和网络工作者一起玩。我有一些中等规模的数据对象，它们的操作需要相当长的时间。Web Worker 似乎是并行化这些操作的好方法，但我发现很难选择将它们传递给 Web Worker 的最佳方式。Web Worker 可以序列化和反序列化对象，但这会让它们失去类方法。我当然很想用他们的方法。

问题是什么是处理重新附加方法的好方法？显然，可以将方法复制到传入的对象上，但这意味着我们知道我们得到了什么样的对象。为了使事情变得更加困难，一些对象包含其他类的数据，这意味着我们需要将方法重新附加到这些类。首先想到的是为每个将 JSON 对象作为参数的类实现一个替代构造函数。然后，备用构造函数可以递归调用任何数据成员的 JSON 构造函数。

那么一开始我如何选择正确的构造函数的问题我想到的方法包括：

1.  为每个类实现不同的网络工作者（尴尬）
2.  实现调用正确构造函数的工厂方法，（暗示我在发送之前直接指定发送对象的类）（更好，但仍然尴尬）
3.  实现一些类型猜测功能来确定顶级对象是哪个类。(-_-)

有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:59:30.793

选项 2 听起来是最好的选择。如果你在你的类上建立一个知道如何序列化和反序列化自己的标准方法集，以及一个全局序列化助手，你可以让这件事变得简单。考虑以下代码：

```
反序列化 = (function() {

    var 注册表 = {};

    var 反序列化 = 函数（obj）{
        var cls = obj['class'];
        var 数据 = obj['data'];

        var fn = 注册表[cls];
        返回 fn（数据）；
    };

    反序列化.registerClass（名称，fn）{
        注册表[名称] = fn;
    };

    返回反序列化；
});

```

以及以下课程：

```
/**
* 关于一个人的信息
*/
var Person = function(firstName, lastName, age, phoneNumbers) {
    this.firstName = 名字；
    this.lastName = 姓氏；
    this.age = 年龄；
    this.phoneNumbers = phoneNumbers;
};

Person.serializeName = '人';

/**
* 序列化一个人的实例
*/
Person.prototype.serialize = function() {
    返回 {
        “类”：Person.serializeName，
        '数据'： {
            'first_name': this.firstName,
            'last_name', this.lastName,
            '年龄': this.age,
            'phone_numbers': this.phone_numbers.map(function(number) { return number.serialize(); })
        }
    };
}

/**
* 反序列化一个人的实例
*/
Person.deserialize(数据) {
    var phoneNumbers = data.phone_numbers.map(反序列化);
    返回新人（data.first_name，data.last_name，data.age，phoneNumbers）；
};

deserialize.register(Person.serializeName, Person.deserialize);

```

您可以使用 序列化任何 Person 实例`data = person.serialize();`，将其发送给您的工作人员，并使用反序列化它以`person = deserialize(data);`序列化格式生成数据的任何内容都是可反序列化的，并且在反序列化之前您不必知道它是哪种类 - 携带类型连同数据。嵌套数据类型也是可能的，如`person.phoneNumbers`. PhoneNumber 类的实现可能是：

```
/*
* 电话号码
*/
var PhoneNumber = function(number, numberType) {
    this.number = 数字；
    this.numberType = numberType;
}

PhoneNumber.prototype.serializeName = 'PhoneNumber';
/**
* 序列化一个电话号码的实例
*/
PhoneNumber.prototype.serialize = function() {
    返回 {
        “类”：PhoneNumber.serializeName，
        '数据'： {
            '数字'：this.number，
            'number_type': this.numberType,
        }
    };
}

/**
* 反序列化一个电话号码的实例
*/
PhoneNumber.deserialize(数据) {
    var phoneNumbers = data.phone_numbers.map(反序列化);
    return new PhoneNumber(data.first_name, data.last_name, data.age, phoneNumbers);
};

deserialize.register(PhoneNumber.serializeName, PhoneNumber.deserialize);

```

同样，用于反序列化数据块的所有信息都在该块中，因此将数据发送到`deserialize`将给您返回某个实例。如果您在普通代码和 webworker 代码中重复使用您的类，您将获得与您开始使用的实例相同的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T04:41:55.860

显然，我真正需要做的就是了解`__proto__`Javascript 的属性。这可以在将对象传递给 Web Worker 或从本地存储检索后重新建立对象的类方法的可用性。

```
function reattachMethods(serialized,originalclass) {
    serialized.__proto__ = originalclass.prototype; 
} 
```

上述一些解决方案的问题是，即使您已经拥有正确格式的所有数据，您最终还是会重新制作/复制对象。如果您有一个包含 n 个元素的对象，那么在 n 个对象被序列化并从浏览器发送到 web worker 之后，需要将 n 个元素复制到新对象中。这显然不理想。双下划线 proto 是一项非标准功能，已在所有主要浏览器中实现，并已被宣布为下一个 javascript 标准的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T00:21:28.137

最直接的方法是将纯数据传递给 Web Worker，然后使用该数据实例化您在 Web Worker 内部进行实际工作所需的任何自定义对象（例如类）。这些自定义类的代码必须可供网络工作者使用。

然后，您不会尝试跨主线程和 Web 工作者之间的边界传递方法（这不是您真正可以做的事情）。

您的选项 2 听起来最接近此。将数据传递给 web worker，让它要么拥有知道从该数据创建什么样的对象的代码，要么使用可以分析数据并为需要完成的工作制作正确类型的对象的工厂函数。

我认为选项 1 的额外复杂性没有任何理由。您需要为每个要并行运行的执行线程使用单独的 web 工作者，但对于不同类型的工作不需要不同的 web 工作者。如果给出正确的代码，任何给定的网络工作者都可以做任何类型的工作。

我不喜欢在您的选项 3 中“猜测”。如果您希望网络工作者知道要创建什么类型的对象，那么将该数据显式传递给网络工作者。没有理由猜测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-31T05:44:37.307

我认为 vkThread 插件

[http://www.eslinstructor.net/vkthread/](http://www.eslinstructor.net/vkthread/)

可以帮助您解决这个问题。使用此插件，您可以在单独的线程（worker）中执行任何函数（包括对象的方法）。

另一个有用的插件是 JSONfn

[http://www.eslinstructor.net/jsonfn/](http://www.eslinstructor.net/jsonfn/)

它可以用成员函数序列化 javascript 对象。

希望这可以帮助，

——瓦迪姆

# excel - 通过 VBA 更新 ODBC excel 链接上的路径

> ID：15560525
> 
> 赞同：0
> 
> 时间：2013-03-22T00:15:31.880
> 
> 标签：excel, odbc, connection-string, vba

我有一个不久前创建的当前 ODBC 链接，它正在查询 Excel 文件。我现在想做的是通过工作簿中的每个 ODBC 连接并更新连接字符串，以便它使用另一个相同名称的 .xls 文件所在的不同路径。

换句话说，我在 Excel 中看到的当前连接字符串（数据>连接>连接>1stConn 属性>定义选项卡>连接字符串）如下：

```
DSN=Excel Files;DBQ=C:\TEST\CurrentQuarter.xls;DefaultDir=C:\TEST;DriverId=1046;MaxBufferSize=2048;PageTimeout=5; 
```

我希望将其更改为：

```
DSN=Excel Files;DBQ=C:\OTHERTEST\CurrentQuarter.xls;DefaultDir=C:\OTHERTEST;DriverId=1046;MaxBufferSize=2048;PageTimeout=5; 
```

我试过这段代码：

```
Sub SwitchODBCSource()
    Dim conn As WorkbookConnection

    For Each conn In ActiveWorkbook.Connections

        With conn
            'I have tried without succes the following 2 properties, without any luck:
            .CommandText = "DSN=Excel Files;DBQ=C:\OTHERTEST\CurrentQuarter.xls;DefaultDir=C:\OTHERTEST;DriverId=1046;MaxBufferSize=2048;PageTimeout=5;"
            .Connection = "DSN=Excel Files;DBQ=C:\OTHERTEST\CurrentQuarter.xls;DefaultDir=C:\OTHERTEST;DriverId=1046;MaxBufferSize=2048;PageTimeout=5;"

        End With
    Next conn

    Set conn = Nothing

End Sub 
```

我是否在 Connection（.CommandText 或 .Connection）上使用了适当的方法？我感觉我不是，因为 VBA 向我抛出错误“对象不支持此属性或方法”

在这种情况下，使用的对象是一个 QueryTable。我应该更改 Object 并使用那个吗？我的印象是该用户不想连接到 .xls 文件。

任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:07:46.443

尝试`conn.ODBCConnection`或`conn.OLEDBConnection`因为它们确实具有`.commandtext`and`.connection`属性。

我不知道这是否可以让你改变它们。我原以为您需要删除然后使用新的连接字符串重新创建连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:58:51.760

你是对的： conn.ODBCConnection.Connection 是要走的路。它让我用 VBA 改变它！惊人的。

这是一位慷慨的 MrExcel 研究员建议的代码，它运行良好（感谢 Jerry）：

```
Sub SwitchODBCSource()
Dim conn As WorkbookConnection
Dim sOldConnection As String, sNewConnection As String

Const sOldPath As String = "C:\TEST" '--omit trailing backslashes to change DefaultDir
Const sNewPath As String = "C:\OTHERTEST"

For Each conn In ActiveWorkbook.Connections
    With conn
        If .Type = xlConnectionTypeODBC Then
            sOldConnection = .ODBCConnection.Connection
            If InStr(1, sOldConnection, sOldPath) > 0 Then
                sNewConnection = Replace(sOldConnection, _
                        sOldPath, sNewPath, Compare:=vbTextCompare)
                .ODBCConnection.Connection = sNewConnection
                .Refresh '--optional to refresh now
            End If
        End If
      End With
Next conn

Set conn = Nothing

End Sub 
```

谢谢尼克

塞巴斯蒂安

# java - 框架和画布比指定的大

> ID：15560527
> 
> 赞同：2
> 
> 时间：2013-03-22T00:15:38.910
> 
> 标签：java, jframe, awt, jpanel

我不知道为什么我会得到一个超大的窗口，这让我跑来跑去把我的精灵放在游戏窗口中。构造函数应该使所有子组件都适合彼此，但画布或框架中似乎有一些额外的填充。我很难弄清楚罪魁祸首是什么。我的框架的大小不应大于 800x600（不包括操作系统装饰，谈论容器）。

```
Panel: java.awt.Rectangle[x=0,y=0,width=810,height=610]
Frame: java.awt.Rectangle[x=0,y=0,width=816,height=638]
Canvas:java.awt.Rectangle[x=0,y=0,width=816,height=638] 
```

如您所见，界限比我指定的要大。

班上：

```
public class GameFrame {
private JFrame frame;
private JPanel panel;
private Canvas canvas;
private BufferStrategy bufferStrategy;
private Graphics2D g;
private int width;
private int height;

public GameFrame(Color bgColor) {
    this.width = GameEngine.GAMEDIMENSION[0]; // 800
    this.height = GameEngine.GAMEDIMENSION[1]; // 600
    this.frame = new JFrame();
    this.panel = (JPanel) frame.getContentPane();
    this.panel.setPreferredSize(new Dimension(width, height));
    this.panel.setLayout(null);
    this.panel.setBackground(bgColor);
    this.canvas = new Canvas();
    this.canvas.setBounds(0, 0, width, height);
    this.canvas.setIgnoreRepaint(true);
    this.frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    this.frame.pack();
    this.frame.setResizable(false);
    this.frame.setVisible(true);
    this.panel.add(canvas);
    this.canvas.createBufferStrategy(2);
    this.bufferStrategy = canvas.getBufferStrategy();
    this.g = (Graphics2D) bufferStrategy.getDrawGraphics();
    this.canvas.requestFocus();

} 
```

主要的：

```
public static void main(String[] args) {
    GameFrame gf = new GameFrame(Color.black);
    System.out.println("Panel: " + gf.panel.getBounds());
    System.out.println("Frame: " + gf.frame.getBounds());
    System.out.println("Canvas:" + gf.frame.getBounds());

    for (int R = 0; R < 255; R++) {
        for (int B = 0; B < 255; B++) {
            for (int G = 0; G < 255; G++) {
                gf.g.setColor(Color.black);
                gf.g.fillRect(0, 0, gf.width, gf.height);
                gf.g.setColor(new Color(R, B, G));
                gf.g.fillRect(0, 0, gf.width, gf.height);
                gf.bufferStrategy.show();
            }
        }
    }

} 
```

在主要我尝试循环方块只是为了看看效果。 ![在此处输入图像描述](../Images/4b7e711cf0b029e9de01f74246896168.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T00:26:30.107

交换`pack`and`setResizable`调用，所以这`pack`是第二个调用。

在下面的例子中，它会写`200x200`在面板上，如果你交换调用它会写`210x210`

这是一个已知的问题”

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FontMetrics;
import java.awt.Graphics;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestResizeFrame {

    public static void main(String[] args) {
        new TestResizeFrame();
    }

    public TestResizeFrame() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                // Will appear as 200x200, swap them and it will appear as 210x210
                frame.setResizable(false);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g); 
            FontMetrics fm = g.getFontMetrics();
            g.drawString(getWidth() + "x" + getHeight(), 0, fm.getAscent());
        }

    }

} 
```

# ajax - 引导工具提示未在 Ajax 呈现的部分视图中显示

> ID：15560530
> 
> 赞同：2
> 
> 时间：2013-03-22T00:15:59.353
> 
> 标签：ajax, asp.net-mvc, twitter-bootstrap, asp.net-mvc-4

我在局部视图中有一个 Bootstrap 模式。在我的索引视图中，我单击一个按钮以在当前页面上显示部分视图模式。Jquery 验证设置为在 Bootstrap 工具提示中显示验证错误。这些工具提示在所有页面上都很好地显示，但在渲染的局部视图上。

我尝试将工具提示的 z-index 设置为大于模态，但这不起作用。

**局部视图**

```
@model Phase_3.ViewModels.UserCreateViewModel

<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>New User</h3>
</div>
@using (Html.BeginForm("Create", "User", FormMethod.Post, new { @class = "remove-margin" }))
{
    <div class="modal-body">

        @Html.Label("First Name", new { @class = "inline" }) @Html.ValidationMessageFor(x => x.User.FirstName)
        @Html.TextBoxFor(x => x.User.FirstName, new { @class = "modal-input input-validation-error" })

        <br />
        @Html.Label("Last Name")
        @Html.TextBoxFor(x => x.User.LastName, new { @class = "modal-input" })
        <br />
        @Html.Label("Email")
        @Html.TextBoxFor(x => x.User.Email, new { @class = "modal-input" })
        <br />

        @* REMOVE WHEN RANDOM SALT METHOD IS COMPLETED*@
        @Html.Label("Salt")
        @Html.TextBoxFor(x => x.User.Salt, new { @class = "modal-input" })
        <br />
        @Html.Label("Password")
        @Html.TextBoxFor(x => x.User.Password, new { @class = "modal-input" })
        <br />
        @Html.Label("Role")
        @Html.DropDownListFor(x => x.User.RoleId, new SelectList(Model.Roles, "Id", "Title"), new { @class = "row-fluid" })
    </div>

    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Close</a>
        <input type="submit" value="Create" class="btn btn-primary" />
    </div>
    @Scripts.Render("~/bundles/jqueryval")
} 
```

**索引视图**

```
@model IEnumerable<Phase_3.Models.User>
<script src="/Content/custom/js/display.modal.js"></script>

<div class="row-fluid spacer">
    <div id="modal-container" class="modal hide fade" data-url='@Url.Action("Create")'>
        <div id="modal-inner"></div>
    </div>

<input type="button" id="display-modal" value="New User" class="btn btn-primary" />
</div>

@* Display users in data table *@
<div class="row-fluid">

    <table class="table table-condensed table-hover">
        <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Role</th>
        </tr>
        @foreach (var item in Model)
        {
            <tr>
                <td>@Html.DisplayFor(x => item.FirstName)</td>
                <td>@Html.DisplayFor(x => item.LastName)</td>
                <td>@Html.DisplayFor(x => item.Email)</td>
                <td>@Html.DisplayFor(x => item.Role.Title)</td>
            </tr>
        }
    </table>
</div> 
```

**在工具提示中显示错误**

```
$.validator.setDefaults({
showErrors: function (errorMap, errorList) {
    this.defaultShowErrors();

    // destroy tooltips on valid elements                              
    $("." + this.settings.validClass)
        .tooltip("destroy");

    // add/update tooltips 
    for (var i = 0; i < errorList.length; i++) {
        var error = errorList[i];

        $("#" + error.element.id)
            .tooltip({ trigger: "focus" })
            .attr("data-original-title", error.message)
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:42:04.223

此问题可能是由于您`$.validator.setDefaults`在页面初始加载时初始化工具提示（运行代码）一次。确保在 ajax 调用后重新初始化所有工具提示：在成功函数中。

# powershell - 使用 NETSTAT 为已建立的活动 TCP 连接获取外部地址名称

> ID：15560531
> 
> 赞同：2
> 
> 时间：2013-03-22T00:16:05.280
> 
> 标签：powershell, netstat

我在 PowerShell 中使用 NETSTAT 命令。我需要获取以 XYZ 名称开头并使用 TCP 连接建立为状态的外部地址列表。

由于 NETSTAT 结果如下，我坚持解析。

`PS C:\Windows\system32> .\NETSTAT.EXE`

```
Active Connections

  Proto  Local Address          Foreign Address        State
  TCP    10.125.4.233:2310      157.05.39.133:2492     ESTABLISHED 
```

我只需要外部地址名称而不是本地主机上的远程地址。
远程地址不显示 FQDN。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T03:10:38.923

```
 $netstats = netstat -p TCP -f
 $data = $netstats[4..($netstats.count)] #The good info starts on index 4
 foreach($line in $data){
     $line = $line -split ' ' | ? {$_ -ne ''}
     $final += @(New-Object -TypeName psobject -Property @{'Proto'=$line[0];'LAddress'=$line[1];'FAddress'=$line[2];'State'=$line[3]})
 }
 $netstat_results = $final
 $netstat_results | ? {$_.state -eq 'ESTABLISHED'} 
```

现在，在解析 netstat 返回的文本后，应该很容易获得您想要的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:20:34.847

运行 netstat /? 产量，除其他外：

-f 显示外部地址的完全限定域名 (FQDN)。

使用 New-PSObjectFromMatches 解析：

```
netstat -f |
 new-psobjectfrommatches -pattern "(TCP|UDP)\s+(\S+)\s+(\S+):(\S+)\s+(\S+)" -property $nul,TCP/UDP,LocalAddress,ForeignAddress,Protocol,State |
 where {(
         ($_.TCP/UDP -eq 'TCP') -and
         ($_.State -eq 'ESTABLISHED') -and
         ($_.ForeignAddress -like 'XYZ*')
        )} | select -ExpandProperty ForeignAddress 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-08T12:06:55.790

`+1``NetStat`对于@EVIL 的答案，但由于分配（`$netstats`和） ，它阻塞了（慢）流`$final`。为了保持管道流式传输，最好避免分配，例如：

```
netstat -p TCP -f | Select -Skip 4 | ForEach {
    $Properties = $_.Trim() -split '[\s]+'
    [PSCustomObject]@{
        'Proto'= $Properties[0]
        'Local Address'= $Properties[1]
        'Foreign Address'= $Properties[2]
        'State'= $Properties[3]
    }
} 
```

通过添加例如`| Select -Expand 'Foreign Address'`，您将得到`Foreign Address`.

# magento - Magento：以编程方式检测现场/生产站点

> ID：15560532
> 
> 赞同：2
> 
> 时间：2013-03-22T00:16:06.510
> 
> 标签：magento

在 Magento 中，是否有检测实时/生产站点（与开发站点相比）的最佳实践方法？例如，仅在开发站点上运行调试代码（不要在生产中运行）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T04:56:59.580

没有什么规范的，但 Magento 确实有一个“开发者模式”。当 Magento 处于开发者模式时，会显示原始错误并运行其他不适合生产的调试代码。

Magento 中没有任何东西可以强制在实时/生产或开发环境中使用“开发人员模式”，因此您需要自己处理这个问题。

开启开发者模式：

```
Mage::setIsDeveloperMode(true); 
```

关闭开发者模式：

```
Mage::setIsDeveloperMode(false); 
```

检查开发者模式的状态

```
if(Mage::getIsDeveloperMode())
{
    //put debugging code here.
} 
```

# matlab - 如何对数据进行分区以确保结果组之间的平等？

> ID：15560534
> 
> 赞同：0
> 
> 时间：2013-03-22T00:16:18.940
> 
> 标签：matlab

我有许多科目，每个科目都有一个分数。我想将这些科目分配到一些（大致）大小相同的组中，这样得到的组都具有（大致）相等的平均分数。从概念上讲，最聪明的方法是什么？我将在 MATLAB 中实现代码。

我的第一个解决方案是根据分数对科目进行排序。然后我通过交替的组将主题分配到组中，就像发牌者向许多玩家发牌一样。这工作得很好，但我想知道是否有更好的方法。

```
n = 200; %number of subjects
k = 5; %number of desired groups
subjects = linspace(1,n,n)'; %subject ids
scores = randi(100,n,1); %scores
data = [subjects,scores];
data = sortrows(data,-2);
group_subjects = cell(1,k);
group_scores = cell(1,k);
x=1;
for i = 1:n
   if x>k, x=1; end
   group_subjects{x} = [group_subjects{x},data(i,1)];
   group_scores{x} = [group_scores{x},data(i,2)];
   x = x+1;
end
avg_scores = cellfun(@mean,group_scores) 
```

我的最终目标是按组输出主题，如`group_subjects`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:29:30.200

我建议将您所拥有的内容保留为“起始”分区。

一旦有了这样的起始分区，我建议采用具有最大和最小平均值的分区，并通过某种规则在它们之间交换成员，以使平均值更接近全局平均值。如果在循环中重复该操作，直到找不到合适的成员对来切换当前具有最大和最小分区的分区（即每次交换后选择最大和最小的分区），您应该至少留下一个局部最优值。

那么如何选择合适的一对数字进行交换呢？好吧，您正在寻找这样的数字，以使它们与所需的总和变化之间的差异最小化以使它们的平均值相等，并增加了限制，即它们不应导致平均值过度补偿并最终导致它们进一步分开。

```
while 1
 sm_idx=find(avg_scores==min(avg_scores),1); %Choose a set with the smallest average
 lg_idx=find(avg_scores==max(avg_scores),1); %Same with largest average
 pcorr=round((avg_scores(lg_idx)-avg_scores(sm_idx))*...
  (length(group_scores{lg_idx})*length(group_scores{sm_idx}))/...
  (length(group_scores{lg_idx})+length(group_scores{sm_idx}))); %Calculate perfect correction
 M = group_scores{lg_idx}'*ones(size(group_scores{sm_idx}))-...
  ones(size(group_scores{lg_idx}'))*group_scores{sm_idx}; %note: assumes group_scores are row vectors
 Midx=find(abs(M-pcorr)==min(abs(M-pcorr)(:)),1);
 if (abs(M(Midx)-pcorr)>=pcorr)
     break;
 end
 [l_c_idx,s_c_idx] = ind2sub(size(M),Midx);
 temp=group_scores{lg_idx}(l_c_idx);
 group_scores{lg_idx}(l_c_idx)=group_scores{sm_idx}(s_c_idx);
 group_scores{sm_idx}(s_c_idx)=temp;
 temp=group_subjects{lg_idx}(l_c_idx);
 group_subjects{lg_idx}(l_c_idx)=group_subjects{sm_idx}(s_c_idx);
 group_subjects{sm_idx}(s_c_idx)=temp;
 avg_scores(lg_idx)=avg_scores(lg_idx)-M(Midx)/length(group_scores{lg_idx});
 avg_scores(sm_idx)=avg_scores(sm_idx)+M(Midx)/length(group_scores{sm_idx});
end 
```

作为代码的后续测试，我得到如下结果：

在我的循环之前：

```
avg_scores =
 54.000
 53.525
 53.050
 52.500
 51.925 
```

在我的循环之后：

```
avg_scores =
 53.000
 53.000
 53.000
 53.000
 53.000 
```

如您所见，它有时会得到完美的结果。

对代码的一个小小的好奇是，它总是更喜欢产生结果的第一个匹配项，正如所写的那样。为了增加一点随机性以使找到最佳解决方案的可能性更大，您可以替换

```
Midx=find(abs(M-pcorr)==min(abs(M-pcorr)(:)),1); 
```

和

```
Midx_options=find(abs(M-pcorr)==min(abs(M-pcorr)(:)));
Midx=Midx(randi(length(Midx))); 
```

这将使它从一组最佳开关中随机选择一个最佳开关。

# git - 文件夹名称未知时排除 .gitignore

> ID：15560540
> 
> 赞同：1
> 
> 时间：2013-03-22T00:16:59.310
> 
> 标签：git, gitignore

这是我的文件夹结构（`find *`Unix 格式）

```
Project
Project/hi.txt
Project/userdata
Project/userdata/username
Project/userdata/username/info.txt
Project/userdata/username/cool
Project/userdata/username/cool/foo.txt
Project/userdata/username/cool/bar.txt 
```

我如何使用`.gitignore`排除文件夹中除文件`userdata`夹**之外**的所有内容`cool`？此解决方案不应**依赖**于`username`实际情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T00:21:57.727

`.gitignore`也支持包含，而不仅仅是排除。包含否定排除。需要注意的是，如果您排除一个文件夹，它甚至不会根据文件夹的内容测试包含的内容。所以你需要设置你的 .gitignore 看起来像（我假设它已经在里面`Project/`了）

```
/userdata/*
!/userdata/*/
/userdata/*/*
!/userdata/*/cool/ 
```

`/userdata`这表示“忽略`cool`.

# c# - C# WPF 应用程序随着时间的推移冻结

> ID：15560542
> 
> 赞同：3
> 
> 时间：2013-03-22T00:17:03.023
> 
> 标签：c#, wpf, multithreading, tcp, kinect

我已经构建了一个 C# WPF 应用程序，它有几个后台线程，它们正在执行以下任务：

1.  几个线程，每个线程都包含一个在 while 循环中运行的 TCP 服务器，每个线程都在等待来自特定端口的消息
2.  一个线程持续监控 I/O 设备的 USB 端口
3.  一个线程正在从 Microsoft Kinect 设备获取数据
4.  一些定时器调度线程基于从其他线程引发的“标志”（或静态全局变量）进行一些更新。

一个例子：

```
 Thread thread = new Thread(new ThreadStart(Server));
    private static void Server()
    {
        try
        {
            IPAddress ipAd = IPAddress.Parse("192.168.1.119");
            // use local m/c IP address, and 
            // use the same in the client

            /* Initializes the Listener */
            TcpListener myList = new TcpListener(ipAd, 8003);

            /* Start Listeneting at the specified port */
            myList.Start();

            System.Diagnostics.Debug.Write("The server is running at port 8003...");
            System.Diagnostics.Debug.Write("The local End point is  :" +
                              myList.LocalEndpoint);
            System.Diagnostics.Debug.Write("Waiting for a connection.....");

            Socket s = myList.AcceptSocket();
            System.Diagnostics.Debug.Write("Connection accepted from " + s.RemoteEndPoint);

            byte[] b = new byte[100];
            k = s.Receive(b);
            Console.WriteLine("Recieved...");

            string temp = "";
            for (int i = 0; i < k; i++)
            {
                System.Diagnostics.Debug.Write(Convert.ToChar(b[i]));
                temp += Convert.ToChar(b[i]);
            }

            ASCIIEncoding asen = new ASCIIEncoding();
            s.Send(asen.GetBytes("The string was recieved by the server."));
            System.Diagnostics.Debug.Write("\nSent Acknowledgement");
            /* clean up */
            s.Close();
            myList.Stop();

            if (k > 0)
            {
                cont = true;
                k = 0;
            }
        }
        catch (Exception e)
        {
            Console.WriteLine("Error..... " + e.StackTrace);
        }    
    } 
```

所以我遇到的问题是应用程序偶尔会冻结，我根本无法访问它。主 UI 线程也冻结了，即使从 Windows 的任务管理器中我也无法杀死该程序。通常应用程序运行正常，但长时间使用应用程序后会随机出现问题（例如4~5小时）

我使用的计算机不是只有 2G RAM 和 AMD 双核 CPU 的高端 PC。

我对问题的猜测如下：

1.  内存不足（或某处内存泄漏，但 Windows 工作正常，只有程序冻结）
2.  网络堵塞（即某处死锁，但这似乎不太可能与简单的发送和接收应用程序）
3.  与 USB 设备（包括 kinect）建立连接失败

但是，我仍然不确定如何找出问题所在。我可能对实现还很陌生，所以我很想听听一些 C# WPF、网络和多线程应用程序方面的专家的评论，以帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:57:11.077

在 Visual Studio 中是一个[并发可视化工具](http://msdn.microsoft.com/en-us/library/dd537632.aspx)

我会使用它（我认为它自 VS 2010 起就可用。这也可以附加到外部进程（比如 Visual Studio 调试器也可以。

您也可以考虑使用redgate的[Performance Profiler等工具](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:28:56.140

最简单的调试方法是附加一个调试器（Visual Studio 可以做到这一点）。然后看看线程在做什么。要使用 VS 进行调试，请转到 Debug -> Attach To Process 并选择您的进程。如果这不起作用，您可以尝试使用任务管理器转储进程（如果您有 Windows 7 或更高版本），只需右键单击该进程并选择创建转储文件。然后，您可以使用 windbg 或 VS 对文件进行离线分析。您要查看的最有用的是线程在锁定时正在做什么。这些通常是此类问题的最佳第一步。

# objective-c - 如何访问此 NSDictionary 中的各种项目？

> ID：15560544
> 
> 赞同：0
> 
> 时间：2013-03-22T00:17:19.540
> 
> 标签：objective-c, nsdictionary

假设我在下面有 NSDictionary *foo：

```
complete = 1;
    list =     {
        8213812 =         {
            excerpt = "Lorem ipsum dolor...."
        }
        8810100 =         {
            another = "iasjdiasd..."
        ... 
```

我知道访问“完整”我使用 [response objectForKey:@"complete"] 但其他人呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T00:21:51.410

您只需继续访问嵌套字典中的键，直到获得您想要的。对于访问“列表”，不出所料

```
[[response objectForKey:@"complete"] objectForKey:@"list"] 
```

对于访问列表中的 8213812 样式的键——嗯，这取决于它们的类型。假设它们是字符串，它将是

```
[[[response objectForKey:@"complete"] objectForKey:@"list"] objectForKey:@"8213812"] 
```

或者，使用更新、更简洁的语法

```
response[@"complete"][@"list"][@"8213812"] 
```

但它们可能是 NSNumber 或其他东西，以防万一您使用适当的 NSNumber。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T00:22:15.047

```
[[[response objectForKey:@"list"] objectForKey:@"8213812"] objectForKey:@"excerpt"] 
```

或者，或者：

```
NSDictionary *list = [response objectForKey:@"list"];
NSDictionary *inner = [list objectForKey:@"8213812"];
NSString *excerpt = [inner objectForKey:@"excerpt"]; 
```

或者，或者：

```
NSString *excerpt = response[@"list"][@"8213812"][@"excerpt"]; 
```

ETC..

# c++ - 绕过 C++ 严格别名规则

> ID：15560548
> 
> 赞同：1
> 
> 时间：2013-03-22T00:17:35.060
> 
> 标签：c++, strict-aliasing

我想在容器中存储有限数量的项目。我不想使用数组，因为我想避免不必要的对象构造函数调用。`std::vector`由于隐式调用，我不想使用`malloc`（我想最小化对堆的访问以获得最大的缓存一致性）。

所以我开始定义自己的自定义容器，如下所示：

```
template<typename T, size_t capacity> class my_array {
  private:
   char buffer[sizeof(T)*capacity];
   ...
  public:
   T& operator[](size_t i) { return *(T*)&buffer[i*sizeof(A)]; }
   ...
}; 
```

但是当我尝试实际使用这个容器时，我会收到关于违反严格别名规则的编译器警告。我已经阅读了严格别名，并且我理解为什么编译器优化会导致上述代码中断。

我该如何解决这个问题？

奇怪的是，我的编译器对我的自定义`object_pool`类没有任何抱怨，除此之外，我将其用于关联 STL 数据结构的自定义分配器。该类看起来与上面的非常相似（使用 a`char[]`并执行类似的转换）。我无法弄清楚两者之间的区别是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:26:49.877

如果你不打算使用`std:array`那么

```
char buffer[sizeof(T)*capacity]; 
```

应该是

```
T buffer[capacity] 
```

这就是模板`typename`首先支持 s 的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:18:54.200

使用`std::array` . . . . . . . . . . . . . ！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T00:34:58.480

`std::aligned_storage`如果您不想根据需要初始化对象，请使用`std::array`。您可能会遇到对齐问题，因为您的结构可能被分配到一个奇数地址。

使用数组作为存储的别名`char`应该没问题，我不确定你的编译器在做什么。这真的是一个最小的测试用例吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T15:27:01.430

`object_pool`通过与我在原始帖子中提到的课程进行精确比较，我找到了一个神秘的解决方案。

我换了

```
T& operator[](size_t i) { return *(T*)&buffer[i*sizeof(A)]; } 
```

和

```
T* operator[](size_t i) {
  if (...) {
    return (T*)&buffer[i*sizeof(A)];
  }
  return NULL;
} 
```

我知道`...`任何谓词总是会计算为`true`，但编译器不够聪明，无法实现的谓词总是会计算为`true`。

我很好奇是否有人可以在这里准确地解释编译器的想法。我正在使用 gcc 4.4.3。

# java - Java无符号字节[2]到int？

> ID：15560553
> 
> 赞同：10
> 
> 时间：2013-03-22T00:18:33.257
> 
> 标签：java, type-conversion, byte

我需要做的就是将一个无符号的两字节数组转换为一个整数。我知道，我知道，Java 没有无符号数据类型，但我的数字是假装无符号字节。

```
byte[] b = {(byte)0x88, (byte)0xb8}; // aka 35000
int i = (byte)b[0] << 8 | (byte)b[1]; 
```

问题是不能正确转换，因为它认为那些是有符号字节......我如何将它转换回一个 int？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-22T00:24:46.477

Java 中没有无符号数字、字节或整数或其他任何东西。`int`当字节在被位移之前被转换为，它们被符号扩展，即`0x88`=> `0xFFFFFF88`。你需要掩盖你不需要的东西。

尝试这个

```
int i = ((b[0] << 8) & 0x0000ff00) | (b[1] & 0x000000ff); 
```

你会得到35000。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-22T02:26:21.220

您可以使用

```
int i = ((b[0] & 0xFF) << 8) | (b[1] & 0xFF); 
```

或者

```
int i = ByteBuffer.wrap(b).getChar(); 
```

或者

```
int i = ByteBuffer.wrap(b).getShort() & 0xFFFF; 
```

# c# - 战舰阵列边界检查

> ID：15560554
> 
> 赞同：-1
> 
> 时间：2013-03-22T00:18:38.430
> 
> 标签：c#

我正在研究战舰，我正在使用 2D 数组，并用网格数组中的数字放置船只（表示），如下所示；

```
/// Places the ships in a sequence on the grid
/// </summary>
/// <param name="ship"></param>
public static void PlaceShips(Ship ship)
{     
    Random rnd1 = new Random();
    Random rnd2 = new Random();

        if (ship.Orientation == "h")
        {
            //int r = rnd1.Next(_grid.GetLength(0));
            //int c = rnd2.Next(_grid.GetLength(1));

            int r = 0;
            int c = 2;
            for (int i = 0; i < ship.Values.Length; i++)
            {
                _grid[r++, c] = ship.Values[i];
            }
        }
        else if (ship.Orientation == "v")
        {
            //int r = rnd1.Next(_grid.GetLength(0));
            //int c = rnd2.Next(_grid.GetLength(1));

            int r = 3;
            int c = 4;
            for (int i = 0; i < ship.Values.Length; i++)
            {
                _grid[r, c++] = ship.Values[i];
            }
        } 
```

我想使用随机方法来设置坐标，但是在检查数组边界并将船只保持在数组内时，我的数学是错误的。请问有人可以提供任何帮助吗？非常感激。我想我需要根据船的长度进行修改并检查剩余部分是否大于船的长度，但我正在努力将其放入代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:22:08.337

生成时需要从适当的值中减去船的长度。

`int c = rnd.Next(_grid.GetLength(1) - ship.Values.Length);`对于水平，和

`int r = rnd.Next(_grid.GetLength(0) - ship.Values.Length);`为垂直。

您还应该只使用一个 Random 实例。默认情况下，Random 使用系统时钟作为种子，因此几乎同时创建的实例将获得相同的种子，从而产生相同的值序列。理想情况下，您应该创建一个随机的静态实例并将其用于所有随机数生成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:24:47.093

当我上次编写战舰游戏时，我就是这样做的。

1）随机选择一个点
2）确定它是水平放置还是垂直放置
3）使用for循环检查放置时船将占据的每个部分。例如...

```
invalid_placement = false;
for (int i = 0; i < ship.Values.Length, i++) {
  if (c+i < grid.boundary && _grid[r,c + i] != 0) {
     invalid_placement = true;
  }
} 
```

这验证了船将使用的所有空间都是开放的。您必须确认您放置的船没有穿过其他船。检查您正在查看的位置是否超出范围也很重要。

一旦所有检查通过（在边界内&&区域被清除），您就可以将船放置在该位置。如果没有，请从步骤 1 开始。

快速编辑...
我发现放置船只时更容易假设船只从最左边的位置开始，水平放置时向右放置，从顶部开始，垂直放置时向下放置。这大大简化了逻辑，因为您无需担心低于数组边界。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T00:23:03.200

首先，做这样的事情：

`_grid[r, c++]`

是非常糟糕的风格，因为它迫使读者停下来自己确认 ++ 是后增量还是前增量。明确地在访问之外进行增量。

其次，要确保船保持在网格内，请确保其起点 > 0 且终点（起点 + 长度 - 1）< grid.length。因此，对于长度为 L 且网格长度为 G 的船，起点可以是 0 到 G - L 之间的任何位置。

# paypal - 贝宝订阅电子邮件

> ID：15560557
> 
> 赞同：0
> 
> 时间：2013-03-22T00:19:06.360
> 
> 标签：paypal, subscription

我已经在我的网站上设置了订阅。在存入资金方面一切正常，当新客户注册时，我们的履行仓库就位于。问题是 PayPal 只发送交易详情（金额和地址）而不发送订阅详情（实际订购的产品）。

在我的帐户 > 概览下查看，我可以看到这是两张不同的发票。我如何向仓库发送订阅详细信息而不是（或附加）交易详细信息？

如果无法发送订阅详细信息，是否有另一种方法可以将项目名称添加到交易详细信息？

编辑：

这是按钮。

```
<div class="hide autoship_form" id="location_can_5">
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input name="cmd" value="_xclick-subscriptions" type="hidden">
<input name="business" value="DVU25CHPLXZ2S" type="hidden">
<input name="lc" value="can" type="hidden">
<input name="item_name" value="Autoship within Canada" type="hidden">
<input name="item_number" value="CAN" type="hidden">
<input name="no_note" value="1" type="hidden">
<input name="no_shipping" value="2" type="hidden">
<input name="rm" value="1" type="hidden">
<input name="return" value="http://domain.com/autoship.php" type="hidden">
<input name="cancel_return" value="http://domain.com/autoship.php" type="hidden">
<input name="src" value="1" type="hidden">
<input name="currency_code" value="USD" type="hidden">
<input name="bn" value="PP-SubscriptionsBF:btn_subscribe_LG.gif:NonHosted" type="hidden">
<table>
<tbody><tr><td><input name="on0" value="Monthly Autoship" type="hidden"></td></tr><tr><td><select name="os0">
<option name="item_name" value="1 Pro">1 Pro: $82.54</option>
<option name="item_name" value="2 Pro">2 Pro: $148.69</option>
<option name="item_name" value="3 Pro">3 Pro: $216.97</option>
</select> </td></tr>
</tbody></table>
<input name="currency_code" value="USD" type="hidden">
<input name="option_select0" value="1 Pro" type="hidden">
<input name="option_amount0" value="82.54" type="hidden">
<input name="option_period0" value="M" type="hidden">
<input name="option_frequency0" value="1" type="hidden">
<input name="option_select1" value="2 Pro" type="hidden">
<input name="option_amount1" value="148.69" type="hidden">
<input name="option_period1" value="M" type="hidden">
<input name="option_frequency1" value="1" type="hidden">
<input name="option_select2" value="3 Pro" type="hidden">
<input name="option_amount2" value="216.97" type="hidden">
<input name="option_period2" value="M" type="hidden">
<input name="option_frequency2" value="1" type="hidden">
<input name="option_index" value="0" type="hidden">
<input name="notify_url" value="http://www.domain.com/affiliate/plugins/PayPal/paypal.php" type="hidden">
<input name="custom" value="" id="apa_5s2cv8xd" type="hidden">
<br>
<input src="https://www.paypalobjects.com/en_US/i/btn/btn_subscribe_LG.gif" name="submit" alt="" border="0" type="image">
<img alt="" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" border="0" height="1" width="1">
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:34:35.037

PayPal 如何向您发送详细信息？您使用什么方法来获取详细信息？我建议使用 IPN，如果你还没有使用这个。IPN 将发送有关交易/资料的所有详细信息。即时付款通知 (IPN) 是一种消息服务，可通知您与 PayPal 交易相关的事件。您可以使用它来自动化后台和管理功能，例如履行订单、跟踪客户以及提供与交易相关的状态和其他信息。

[您可以在此处](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro)找到有关 IPN的更多信息。进入该页面后，该页面左侧还有更多链接，包括示例脚本、设置以及返回的变量。

您可以让您的 IPN 脚本将您需要的信息发送到您的完整仓库，并使整个过程自动化。

# arrays - MIPS 用户将整数输入数组然后打印出来

> ID：15560564
> 
> 赞同：0
> 
> 时间：2013-03-22T00:19:55.397
> 
> 标签：arrays, assembly, mips, spim

你好我一直在练习编写汇编语言，我一直在研究这个看似简单的代码。我想提示用户输入，然后我想接受该输入并将其放入数组中。然后我想打印出数组。我知道我可以将它们打印出来而不将它们放入数组中，但这只是为了我的练习。有些东西是不对的，尽管它不会将它们打印出来。

```
 .data
array:  .space 400
prompt: .asciiz "Enter an integer (0 to quit) :"
text:   .asciiz "After sorting, the list of integers is:"
   .text
   .globl main
main:
    la $a1, array

    li $v0, 4
    la $a0, prompt
    syscall

    li $v0, 5
    syscall

    sw $v0, 0($a1)
    addiu $a1, $a1, 4

    beqz $v0, sort
    j main

sort:
    la $a1, $array

    li $v0, 4
    la $a0, text
    syscall

loop:
    lw $t0, 0($a1)
    addiu $a1, $a1, 4

    beqz $t0, done

    li $v0, 1
    move $a0, $t0
    syscall

    j loop

done: 
```

请帮我解决我做错的事情。哦，当我击中零时，零是一种标记值，这意味着它的输入结束

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:27:26.330

请记住，MIPS 上的分支和跳转指令具有延迟槽。也就是说，总是执行直接跟在分支或跳转指令之后的指令。
您的组装人员（gas？）可能会通过插入`NOPs`或重新订购说明来为您处理这个问题。您可以通过使用 objdump 反汇编二进制文件来找出答案。如果汇编*器没有*为您解决这个问题，最简单的自己解决它的方法是`NOP`在每个分支/跳转之后插入一个。

另一件突出的事情是，您总是在读取新号码之前重新加载`$a1`地址。`array`这意味着您读取的每个数字都将存储在`array[0]`，包括终止的 0。因此您的打印循环将找到 0 作为数组中的第一个值并立即退出。
您可以通过将代码更改为以下内容来解决此问题：

```
main:
la $a1, array
read_numbers:
  # Rest of code omitted for brevity...
  beqz $v0, sort
  j read_numbers 
```

# c++ - 使用 SSE 内在函数时如何确保 NaN 传播？

> ID：15560567
> 
> 赞同：6
> 
> 时间：2013-03-22T00:20:15.220
> 
> 标签：c++, c, floating-point, sse, nan

我最近阅读了有关`NaN`SSE 算术运算中的值的文章：

> 作用于两个非数字 (NAN) 参数的算术运算的结果是未定义的。因此，使用 NAN 参数的浮点运算将与相应汇编指令的预期行为不匹配。

来源： http: [//msdn.microsoft.com/en-us/library/x5c07e2a (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/x5c07e2a(v=vs.100).aspx)

这是否意味着，例如，添加两个`__m128`值可能会将 a 转换`NaN`为实数？

如果计算依赖于一个`NaN`值，我也需要最终结果`NaN`。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T00:31:22.990

当我解释该文本时，它的意思是编译器提供了大致对应于 SSE 指令的各种内在函数。通常，您可以预期编译器将使用 SSE 指令来实现内在函数。但是，这并不严格。内在函数实际上指定了一些抽象计算模型中的操作；他们没有直接指定 SSE 指令。在那个抽象模型中，对两个 NaN 进行操作的结果（奇怪的是它似乎不允许一个 NaN 和一个数字）是未定义的。因此，例如，添加两个 NaN 得到的结果可能不是 NaN。

特别是，抽象模型中的操作将受到编译器优化，并且这些优化可能会导致 SSE 指令以外的东西（编译时的计算，如果编译器可以推断出存在 NaN 则省略指令，因此它实际上不需要执行添加等）。

看来，如果您想保证为 SSE 指令指定的语义，您可能必须用汇编语言编写，而不是在 Microsoft 的编译器中使用内部函数。

我确实希望供应商不要再对浮点语义漠不关心了。在没有明确规定的行为的情况下很难进行工程。

# android - 改变方向导致应用程序崩溃

> ID：15560571
> 
> 赞同：1
> 
> 时间：2013-03-22T00:20:27.680
> 
> 标签：android, orientation

在我正在创建的井字游戏应用程序中，我设置了一个替代屏幕视图来处理方向的变化。

我的主 Java 文件中的 onCreate() 方法如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mInfoTextView = (TextView) findViewById(R.id.information); 
    mHumanScoreTextView = (TextView) findViewById(R.id.player_score);
    mComputerScoreTextView = (TextView) findViewById(R.id.computer_score);
    mTieScoreTextView = (TextView) findViewById(R.id.tie_score);

    mGame = new TicTacToeGame();

    mBoardView = (BoardView) findViewById(R.id.board); 
    mBoardView.setGame(mGame); 
    mBoardView.setOnTouchListener(mTouchListener); 

    if (savedInstanceState == null)
        startNewGame();
    else {
        mGame.setBoardState(savedInstanceState.getCharArray("board"));
        mGameOver = savedInstanceState.getBoolean("mGameOver");
        mInfoTextView.setText(savedInstanceState.getCharSequence("info"));
        mHumanWins = savedInstanceState.getInt("mHumanWins");
        mComputerWins = savedInstanceState.getInt("mComputerWins");
        mTies = savedInstanceState.getInt("mTies");
        mTurn = savedInstanceState.getChar("mTurn");
        mFirstMove = savedInstanceState.getChar("mFirstMove");
    }
    displayScores();
} 
```

然后我有两种方法来处理状态的恢复和保存，如下所示：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);

    outState.putCharArray("board", mGame.getBoardState());
    outState.putBoolean("mGameOver", mGameOver);
    outState.putInt("mHumanWins",  Integer.valueOf(mHumanWins));
    outState.putInt("mComputerWins", Integer.valueOf(mComputerWins));
    outState.putInt("mTies",  Integer.valueOf(mTies));
    outState.putCharSequence("info", mInfoTextView.getText());
    outState.putChar("mTurn", mTurn);
    outState.putChar("mFirstMove", mFirstMove);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);

    mGame.setBoardState(savedInstanceState.getCharArray("board"));
    mGameOver = savedInstanceState.getBoolean("mGameOver");
    mInfoTextView.setText(savedInstanceState.getCharSequence("info"));
    mHumanWins = savedInstanceState.getInt("mHumanWins");
    mComputerWins = savedInstanceState.getInt("mComputerWins");
    mTies = savedInstanceState.getInt("mTies");
    mTurn = savedInstanceState.getChar("mTurn");
    mFirstMove = savedInstanceState.getChar("mFirstMove");
} 
```

一切都很好，直到我对游戏进行了重新编程，这样棋盘上就不再出现 X 和 O 字符，而是出现了代表 Xs 和 Os 的图片。这样做需要我实现一个 TouchListener。游戏在垂直模式下完美运行，但一旦方向改变，它就会立即崩溃。我什至看不到翻转屏幕的变化。如果我在 layout-land main.xml 文件中查看水平布局，它看起来很好。当它实际运行而应用程序崩溃时，我无法接近访问它。

我是一个新手，所以不知道是什么原因造成的，也不知道要发布哪些相关信息以获得更多帮助。有人有建议吗？

**编辑 - 这是 LogCat 错误日志：虽然程序在实际设备上的方向更改时崩溃，但在模拟器中它会在程序运行时立即崩溃**

```
03-22 00:27:31.739: E/Trace(1042): error opening trace file: No such file or directory (2)
03-22 00:27:31.739: W/Trace(1042): Unexpected value from nativeGetEnabledTags: 0
03-22 00:27:31.739: W/Trace(1042): Unexpected value from nativeGetEnabledTags: 0
03-22 00:27:31.749: W/Trace(1042): Unexpected value from nativeGetEnabledTags: 0
03-22 00:27:31.789: W/Trace(1042): Unexpected value from nativeGetEnabledTags: 0
03-22 00:27:31.789: W/Trace(1042): Unexpected value from nativeGetEnabledTags: 0
03-22 00:27:31.909: D/AndroidRuntime(1042): Shutting down VM
03-22 00:27:31.909: W/dalvikvm(1042): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
03-22 00:27:31.920: E/AndroidRuntime(1042): FATAL EXCEPTION: main
03-22 00:27:31.920: E/AndroidRuntime(1042): java.lang.RuntimeException: Unable to start activity ComponentInfo{edu.joe.tictactoe/edu.joe.tictactoe.AndroidTicTacToeActivity}: java.lang.NullPointerException
03-22 00:27:31.920: E/AndroidRuntime(1042):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at  android.os.Looper.loop(Looper.java:137)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at java.lang.reflect.Method.invokeNative(Native Method)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at java.lang.reflect.Method.invoke(Method.java:511)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at dalvik.system.NativeStart.main(Native Method)
03-22 00:27:31.920: E/AndroidRuntime(1042): Caused by: java.lang.NullPointerException
03-22 00:27:31.920: E/AndroidRuntime(1042):     at edu.joe.tictactoe.AndroidTicTacToeActivity.resetButtons(AndroidTicTacToeActivity.java:194)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at edu.joe.tictactoe.AndroidTicTacToeActivity.displayScores(AndroidTicTacToeActivity.java:311)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at edu.joe.tictactoe.AndroidTicTacToeActivity.onCreate(AndroidTicTacToeActivity.java:93)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at android.app.Activity.performCreate(Activity.java:5104)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-22 00:27:31.920: E/AndroidRuntime(1042):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-22 00:27:31.920: E/AndroidRuntime(1042):     ... 11 more
03-22 00:27:32.211: D/dalvikvm(1042): GC_CONCURRENT freed 351K, 17% free 2438K/2908K, paused 109ms+3ms, total 288ms 
```

**编辑 2： displayScores() 和 resetButtons() 代码：**

```
192 public void resetButtons()
193 {
194     for (int i = 0; i < mBoardButtons.length; i++)
195     {
196         mBoardButtons[i].setText("");                       
197         mBoardButtons[i].setEnabled(true);              
198         mBoardButtons[i].setOnClickListener(new ButtonClickListener(i));
199     }
200 }

304 private void displayScores() {
305     mHumanScoreTextView.setText(Integer.toString(mHumanWins));
306     mComputerScoreTextView.setText(Integer.toString(mComputerWins));
307     mTieScoreTextView.setText(Integer.toString(mTies));
308
309
310     char [] temp = mGame.getBoardState();
311     resetButtons();
312
313     for (int i = 0; i < TicTacToeGame.BOARD_SIZE; i++)
314         if (temp [i] != TicTacToeGame.OPEN_SPOT) setMove(temp [i], i);
315 } 
```

**编辑 3：问题已解决 最初，电路板使用的按钮填充有字符 x 或 o。我删除了这些以使用图标，但忘记删除 resetButtons() 行和代码。它试图重置不再存在的东西。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:46:27.253

感谢所有在评论中提供帮助的人。否则我不知道该去哪里看。

最初，棋盘使用在 onCreate() 中初始化的按钮，并随着游戏的进行填充字符 x 或 o。

我删除了这些按钮，绘制了一个网格并使用坐标来放置图片来表示 x 和 o。但是，我忘记删除 resetButtons() 的命令，这意味着当应用程序启动时，它试图清除一些不存在的东西。删除此代码后，一切正常。

# java - 使用 JNI 从 C++ 程序执行 java jar，使用 g++ 或 eclipse

> ID：15560572
> 
> 赞同：3
> 
> 时间：2013-03-22T00:20:31.817
> 
> 标签：java, c++, eclipse, java-native-interface, g++

我正在尝试从**C++**程序调用/**执行**java **jar 。**

 **以下是我到目前为止找到的选项：

```
Use JNI
Use Jace
Use JunC++ion
Use execl("java", "java", "-jar", "myprog.jar", NULL);
Use execlp("java", "java", "-jar", "myprog.jar", (char *)0);
Use system("java filename.jar");
Use popen("java -jar test.jar text1 text2", "r");
Use CreateProcess(...);
Use JNA 
```

我想使用 JNI，但是我遇到了问题。

=========================

# 你好.cpp

我有一个简单的 Hello.cpp 类：

```
#include <iostream>
#include <jni.h>

using namespace std;

int main() {
      cout << "Hello World" << endl; // prints Hello World

      JavaVM *jvm;       /* denotes a Java VM */
      JNIEnv *env;       /* pointer to native method interface */
      JDK1_1InitArgs vm_args; /* JDK 1.1 VM initialization arguments */
      vm_args.version = 0x00010001; /* New in 1.1.2: VM version */
      /* Get the default initialization arguments and set the class
       * path */
      JNI_GetDefaultJavaVMInitArgs(&vm_args);
      vm_args.classpath = "/home/FinishedJars/HelloWorld/hello2.jar";
      /* load and initialize a Java VM, return a JNI interface
       * pointer in env */
      JNI_CreateJavaVM(&jvm, &env, &vm_args);
      /* invoke the Main.test method using the JNI */
      jclass cls = env->FindClass("Main");
      jmethodID mid = env->GetStaticMethodID(cls, "test", "(I)V");
      env->CallStaticVoidMethod(cls, mid, 100);
      /* We could have created an Object and called methods on it instead */
      /* We are done. */
      jvm->DestroyJavaVM();

    return 0;
} 
```

=========================

# 编译

当我尝试使用以下内容进行编译时：

```
g++ -I /usr/lib/jvm/jdk1.6.0_34-x86/include/ Hello.cpp 
```

注意：我在该文件夹中找到了“jni.h”，因此我将其包含在内。我假设那是正确的位置，但我不确定

我收到很多错误（见下文）

=========================

# 错误

我从 jni.h 得到*一百万个*错误，好像它正在尝试编译 jni.h：

```
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::SetStaticLongField(_jclass*, _jfieldID*, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1568: error: ‘const struct JNINativeInterface_’ has no member named ‘SetStaticLongField’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::SetStaticFloatField(_jclass*, _jfieldID*, jfloat)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1572: error: ‘const struct JNINativeInterface_’ has no member named ‘SetStaticFloatField’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::SetStaticDoubleField(_jclass*, _jfieldID*, jdouble)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1576: error: ‘const struct JNINativeInterface_’ has no member named ‘SetStaticDoubleField’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘_jstring* JNIEnv_::NewString(const jchar*, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1580: error: ‘const struct JNINativeInterface_’ has no member named ‘NewString’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘const jchar* JNIEnv_::GetStringChars(_jstring*, jboolean*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1586: error: ‘const struct JNINativeInterface_’ has no member named ‘GetStringChars’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::ReleaseStringChars(_jstring*, const jchar*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1589: error: ‘const struct JNINativeInterface_’ has no member named ‘ReleaseStringChars’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘_jstring* JNIEnv_::NewStringUTF(const char*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1593: error: ‘const struct JNINativeInterface_’ has no member named ‘NewStringUTF’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘const char* JNIEnv_::GetStringUTFChars(_jstring*, jboolean*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1599: error: ‘const struct JNINativeInterface_’ has no member named ‘GetStringUTFChars’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::ReleaseStringUTFChars(_jstring*, const char*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1602: error: ‘const struct JNINativeInterface_’ has no member named ‘ReleaseStringUTFChars’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘_jobjectArray* JNIEnv_::NewObjectArray(int, _jclass*, _jobject*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1611: error: ‘const struct JNINativeInterface_’ has no member named ‘NewObjectArray’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘_jobject* JNIEnv_::GetObjectArrayElement(_jobjectArray*, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1614: error: ‘const struct JNINativeInterface_’ has no member named ‘GetObjectArrayElement’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::SetObjectArrayElement(_jobjectArray*, int, _jobject*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1618: error: ‘const struct JNINativeInterface_’ has no member named ‘SetObjectArrayElement’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘_jbooleanArray* JNIEnv_::NewBooleanArray(int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1622: error: ‘const struct JNINativeInterface_’ has no member named ‘NewBooleanArray’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘_jbyteArray* JNIEnv_::NewByteArray(int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1625: error: ‘const struct JNINativeInterface_’ has no member named ‘NewByteArray’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘_jcharArray* JNIEnv_::NewCharArray(int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1628: error: ‘const struct JNINativeInterface_’ has no member named ‘NewCharArray’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘_jshortArray* JNIEnv_::NewShortArray(int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1631: error: ‘const struct JNINativeInterface_’ has no member named ‘NewShortArray’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘_jintArray* JNIEnv_::NewIntArray(int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1634: error: ‘const struct JNINativeInterface_’ has no member named ‘NewIntArray’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘_jlongArray* JNIEnv_::NewLongArray(int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1637: error: ‘const struct JNINativeInterface_’ has no member named ‘NewLongArray’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘_jfloatArray* JNIEnv_::NewFloatArray(int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1640: error: ‘const struct JNINativeInterface_’ has no member named ‘NewFloatArray’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘_jdoubleArray* JNIEnv_::NewDoubleArray(int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1643: error: ‘const struct JNINativeInterface_’ has no member named ‘NewDoubleArray’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘jboolean* JNIEnv_::GetBooleanArrayElements(_jbooleanArray*, jboolean*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1647: error: ‘const struct JNINativeInterface_’ has no member named ‘GetBooleanArrayElements’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘jchar* JNIEnv_::GetCharArrayElements(_jcharArray*, jboolean*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1653: error: ‘const struct JNINativeInterface_’ has no member named ‘GetCharArrayElements’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘jshort* JNIEnv_::GetShortArrayElements(_jshortArray*, jboolean*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1656: error: ‘const struct JNINativeInterface_’ has no member named ‘GetShortArrayElements’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘jfloat* JNIEnv_::GetFloatArrayElements(_jfloatArray*, jboolean*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1665: error: ‘const struct JNINativeInterface_’ has no member named ‘GetFloatArrayElements’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘jdouble* JNIEnv_::GetDoubleArrayElements(_jdoubleArray*, jboolean*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1668: error: ‘const struct JNINativeInterface_’ has no member named ‘GetDoubleArrayElements’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::ReleaseBooleanArrayElements(_jbooleanArray*, jboolean*, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1674: error: ‘const struct JNINativeInterface_’ has no member named ‘ReleaseBooleanArrayElements’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::ReleaseByteArrayElements(_jbyteArray*, int*, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1679: error: ‘const struct JNINativeInterface_’ has no member named ‘ReleaseByteArrayElements’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::ReleaseCharArrayElements(_jcharArray*, jchar*, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1684: error: ‘const struct JNINativeInterface_’ has no member named ‘ReleaseCharArrayElements’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::ReleaseShortArrayElements(_jshortArray*, jshort*, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1689: error: ‘const struct JNINativeInterface_’ has no member named ‘ReleaseShortArrayElements’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::ReleaseIntArrayElements(_jintArray*, int*, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1694: error: ‘const struct JNINativeInterface_’ has no member named ‘ReleaseIntArrayElements’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::ReleaseLongArrayElements(_jlongArray*, int*, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1699: error: ‘const struct JNINativeInterface_’ has no member named ‘ReleaseLongArrayElements’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::ReleaseFloatArrayElements(_jfloatArray*, jfloat*, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1704: error: ‘const struct JNINativeInterface_’ has no member named ‘ReleaseFloatArrayElements’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::ReleaseDoubleArrayElements(_jdoubleArray*, jdouble*, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1709: error: ‘const struct JNINativeInterface_’ has no member named ‘ReleaseDoubleArrayElements’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::GetBooleanArrayRegion(_jbooleanArray*, int, int, jboolean*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1714: error: ‘const struct JNINativeInterface_’ has no member named ‘GetBooleanArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::GetByteArrayRegion(_jbyteArray*, int, int, int*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1718: error: ‘const struct JNINativeInterface_’ has no member named ‘GetByteArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::GetCharArrayRegion(_jcharArray*, int, int, jchar*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1722: error: ‘const struct JNINativeInterface_’ has no member named ‘GetCharArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::GetShortArrayRegion(_jshortArray*, int, int, jshort*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1726: error: ‘const struct JNINativeInterface_’ has no member named ‘GetShortArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::GetIntArrayRegion(_jintArray*, int, int, int*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1730: error: ‘const struct JNINativeInterface_’ has no member named ‘GetIntArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::GetLongArrayRegion(_jlongArray*, int, int, int*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1734: error: ‘const struct JNINativeInterface_’ has no member named ‘GetLongArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::GetFloatArrayRegion(_jfloatArray*, int, int, jfloat*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1738: error: ‘const struct JNINativeInterface_’ has no member named ‘GetFloatArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::GetDoubleArrayRegion(_jdoubleArray*, int, int, jdouble*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1742: error: ‘const struct JNINativeInterface_’ has no member named ‘GetDoubleArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::SetBooleanArrayRegion(_jbooleanArray*, int, int, const jboolean*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1747: error: ‘const struct JNINativeInterface_’ has no member named ‘SetBooleanArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::SetByteArrayRegion(_jbyteArray*, int, int, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1751: error: ‘const struct JNINativeInterface_’ has no member named ‘SetByteArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1751: error: ‘buf’ was not declared in this scope
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::SetCharArrayRegion(_jcharArray*, int, int, const jchar*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1755: error: ‘const struct JNINativeInterface_’ has no member named ‘SetCharArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::SetShortArrayRegion(_jshortArray*, int, int, const jshort*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1759: error: ‘const struct JNINativeInterface_’ has no member named ‘SetShortArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::SetIntArrayRegion(_jintArray*, int, int, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1763: error: ‘const struct JNINativeInterface_’ has no member named ‘SetIntArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1763: error: ‘buf’ was not declared in this scope
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::SetLongArrayRegion(_jlongArray*, int, int, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1767: error: ‘const struct JNINativeInterface_’ has no member named ‘SetLongArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1767: error: ‘buf’ was not declared in this scope
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::SetFloatArrayRegion(_jfloatArray*, int, int, const jfloat*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1771: error: ‘const struct JNINativeInterface_’ has no member named ‘SetFloatArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::SetDoubleArrayRegion(_jdoubleArray*, int, int, const jdouble*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1775: error: ‘const struct JNINativeInterface_’ has no member named ‘SetDoubleArrayRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::GetStringRegion(_jstring*, int, int, jchar*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1798: error: ‘const struct JNINativeInterface_’ has no member named ‘GetStringRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::GetStringUTFRegion(_jstring*, int, int, char*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1801: error: ‘const struct JNINativeInterface_’ has no member named ‘GetStringUTFRegion’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void* JNIEnv_::GetPrimitiveArrayCritical(_jarray*, jboolean*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1805: error: ‘const struct JNINativeInterface_’ has no member named ‘GetPrimitiveArrayCritical’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::ReleasePrimitiveArrayCritical(_jarray*, void*, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1808: error: ‘const struct JNINativeInterface_’ has no member named ‘ReleasePrimitiveArrayCritical’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘const jchar* JNIEnv_::GetStringCritical(_jstring*, jboolean*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1812: error: ‘const struct JNINativeInterface_’ has no member named ‘GetStringCritical’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::ReleaseStringCritical(_jstring*, const jchar*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1815: error: ‘const struct JNINativeInterface_’ has no member named ‘ReleaseStringCritical’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘_jobject* JNIEnv_::NewWeakGlobalRef(_jobject*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1819: error: ‘const struct JNINativeInterface_’ has no member named ‘NewWeakGlobalRef’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void JNIEnv_::DeleteWeakGlobalRef(_jobject*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1822: error: ‘const struct JNINativeInterface_’ has no member named ‘DeleteWeakGlobalRef’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘jboolean JNIEnv_::ExceptionCheck()’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1826: error: ‘const struct JNINativeInterface_’ has no member named ‘ExceptionCheck’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘_jobject* JNIEnv_::NewDirectByteBuffer(void*, int)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1830: error: ‘const struct JNINativeInterface_’ has no member named ‘NewDirectByteBuffer’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘void* JNIEnv_::GetDirectBufferAddress(_jobject*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1833: error: ‘const struct JNINativeInterface_’ has no member named ‘GetDirectBufferAddress’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: In member function ‘jobjectRefType JNIEnv_::GetObjectRefType(_jobject*)’:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1839: error: ‘const struct JNINativeInterface_’ has no member named ‘GetObjectRefType’
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h: At global scope:
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1851: error: ‘jint’ does not name a type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1853: error: ‘jint’ does not name a type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1859: error: ‘jint’ does not name a type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1877: error: ‘JNICALL’ has not been declared
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1877: error: ISO C++ forbids declaration of ‘jint’ with no type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1877: error: ‘jint’ declared as function returning a function
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1879: error: ‘JNICALL’ has not been declared
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1879: error: ISO C++ forbids declaration of ‘jint’ with no type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1879: error: ‘jint’ declared as function returning a function
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1881: error: ‘JNICALL’ has not been declared
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1881: error: ISO C++ forbids declaration of ‘jint’ with no type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1881: error: ‘jint’ declared as function returning a function
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1883: error: ‘JNICALL’ has not been declared
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1883: error: ‘jint’ has not been declared
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1883: error: ISO C++ forbids declaration of ‘jint’ with no type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1883: error: ‘jint’ declared as function returning a function
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1885: error: ‘JNICALL’ has not been declared
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1885: error: ISO C++ forbids declaration of ‘jint’ with no type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1885: error: ‘jint’ declared as function returning a function
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1892: error: ‘jint’ does not name a type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1895: error: ‘jint’ does not name a type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1898: error: ‘jint’ does not name a type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1902: error: ‘jint’ does not name a type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1905: error: ‘jint’ does not name a type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1916: error: ‘JNIIMPORT’ does not name a type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1919: error: ‘JNIIMPORT’ does not name a type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1922: error: ‘JNIIMPORT’ does not name a type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1926: error: ‘JNIEXPORT’ does not name a type
/usr/lib/jvm/jdk1.6.0_34-x86/include/jni.h:1929: error: expected constructor, destructor, or type conversion before ‘void’
2013-03-21-1356-Hello-GCC-Ex.cpp: In function ‘int main()’:
2013-03-21-1356-Hello-GCC-Ex.cpp:19: error: ‘JDK1_1InitArgs’ was not declared in this scope
2013-03-21-1356-Hello-GCC-Ex.cpp:19: error: expected ‘;’ before ‘vm_args’
2013-03-21-1356-Hello-GCC-Ex.cpp:20: error: ‘vm_args’ was not declared in this scope
2013-03-21-1356-Hello-GCC-Ex.cpp:23: error: ‘JNI_GetDefaultJavaVMInitArgs’ was not declared in this scope
2013-03-21-1356-Hello-GCC-Ex.cpp:27: error: ‘JNI_CreateJavaVM’ was not declared in this scope
2013-03-21-1356-Hello-GCC-Ex.cpp:34: error: ‘struct JavaVM_’ has no member named ‘DestroyJavaVM’ 
```

=========================

# 更多信息：

我已经用 eclipse 尝试了这个，通过创建一个可执行的空 gcc 项目，创建我的 hello world 代码，它工作正常。

之后，我添加了 jni 代码，并通过以下方式导入源：

右键单击项目 -> 属性 -> C/C++ 常规 -> 路径和符号 -> 包含 -> GNU C++ -> 添加 ->

然后添加包含 jni.h 的目录

当我尝试以这种方式构建它时，在 Eclipse 中，我得到了完全相同的错误。

另外，我在 Ubuntu 10 64bit 上运行...

=========================

有人可以帮忙吗？

这可能是一个非常简单的导入问题，但我不确定

=========================

# 更新 1

跑步：

`g++ -I /usr/lib/jvm/jdk1.7.0_06/include/ -I /usr/lib/jvm/jdk1.7.0_06/include/linux/ Hello.cpp`

给我：

```
Hello.cpp: In function ‘int main()’:
Hello.cpp:19: error: ‘JDK1_1InitArgs’ was not declared in this scope
Hello.cpp:19: error: expected ‘;’ before ‘vm_args’
Hello.cpp:20: error: ‘vm_args’ was not declared in this scope 
```

=========================

# 更新 2

显然 JDK1_1InitArgs 在 JDK 6 中被删除，所以我用 JDK 5 jni.h 编译如下：

`g++ -I /usr/lib/jvm/jdk1.5.0_22-x86/include/ -I /usr/lib/jvm/jdk1.5.0_22-x86/include/linux/ Hello.cpp`

它给了我：

```
Hello.cpp: In function ‘int main()’:
Hello.cpp:24: warning: deprecated conversion from string constant to ‘char*’
Hello.cpp:27: error: invalid conversion from ‘JNIEnv**’ to ‘void**’
Hello.cpp:27: error:   initializing argument 2 of ‘jint JNI_CreateJavaVM(JavaVM**, void**, void*)’ 
```

=========================

# 更新 3

我一直在做一些研究，可能的解决方案是：

1.  [将 -L/usr/X11R6/lib](http://www.coderanch.com/t/324497/java/java/JNI-CreateJavaVM-trouble)或 X11 库所在的任何位置添加到 g++ 命令...没有效果。
2.  [将 ibhpi.so 和 libjvm.so 的路径添加到 LD_LIBRARY_PATH](https://forums.oracle.com/forums/thread.jspa?threadID=1552700)（对我来说它位于 /usr/lib/jvm/jdk1.5.0_22-x86/jre/lib/i386/native_threads/）...没有效果
3.  [也将 libjava.so 添加到 LD_LIBRARY_PATH](https://forums.oracle.com/forums/thread.jspa?threadID=1552700)（我的位于 /usr/lib/jvm/jdk1.5.0_22-x86/jre/lib/i386/）...没有效果
4.  将 jre/lib 添加到 LD_LIBRARY_PATH... 没有效果

我的最终构建命令之一（但仍然无法正常工作）

```
g++ -g 
-I /usr/lib/jvm/jdk1.5.0_22-x86/include/ 
-I /usr/lib/jvm/jdk1.5.0_22-x86/include/linux/  
-L/usr/lib/jvm/jdk1.5.0_22-x86/jre/lib/i386/ 
Hello.cpp 
```

错误：

```
Hello.cpp:23: undefined reference to `JNI_GetDefaultJavaVMInitArgs'
Hello.cpp:27: undefined reference to `JNI_CreateJavaVM' 
```

我将 &env 更改为 (void**)&env，由 ldav1s 建议以摆脱 void star 错误

=========================

# 更新 4

我相信问题是我正在尝试加载不是为我的系统构建的库？...

我当前的命令是：

```
g++  
-L/usr/lib/jvm/jdk1.5.0_22-x86/lib 
-L/usr/lib/jvm/jdk1.5.0_22-x86/jre/lib 
-L/usr/lib/jvm/jdk1.5.0_22-x86/jre/lib/i386 -ljava
-L/usr/lib/jvm/jdk1.5.0_22-x86/jre/lib/i386/native_threads -lhpi 
-L/usr/lib/jvm/jdk1.5.0_22-x86/jre/lib/i386/server -ljvm
-I /usr/lib/jvm/jdk1.5.0_22-x86/include/ 
-I /usr/lib/jvm/jdk1.5.0_22-x86/include/linux/
Hello.cpp 
```

我得到：

```
...
/usr/bin/ld: skipping incompatible /usr/lib/jvm/jdk1.5.0_22-x86/jre/lib/i386/libjava.so when searching for -ljava
/usr/bin/ld: skipping incompatible /usr/lib/jvm/jdk1.5.0_22-x86/jre/lib/i386/native_threads/libhpi.so when searching for -lhpi
/usr/bin/ld: skipping incompatible /usr/lib/jvm/jdk1.5.0_22-x86/jre/lib/i386/server/libjvm.so when searching for -ljvm
/usr/bin/ld: cannot find -ljava
/usr/bin/ld: cannot find -lhpi
/usr/bin/ld: cannot find -ljvm
... 
```

=========================

# 更新 5 / 解决方案

花了我一段时间，但这给了我最少的错误！

```
g++ -fPIC 
-L/usr/lib/jvm/java-6-openjdk/jre/lib 
-L/usr/lib/jvm/java-6-openjdk/jre/lib/amd64 -ljava -lverify 
-L/usr/lib/jvm/java-6-openjdk/jre/lib/amd64/native_threads -lhpi 
-L/usr/lib/jvm/java-6-openjdk/jre/lib/amd64/server -ljvm 
-I /usr/lib/jvm/jdk1.5.0_22-x86/include/ 
-I /usr/lib/jvm/jdk1.5.0_22-x86/include/linux/ 
Hello.cpp 
```

警告：

```
Hello.cpp: In function ‘int main()’:
Hello.cpp:24: warning: deprecated conversion from string constant to ‘char* 
```

注意：在运行之前记得将 amd 库添加到 LD_LIBRARY_PATH：

```
$ export LD_LIBRARY_PATH=/usr/lib/jvm/java-6-openjdk/jre/lib/amd64:$LD_LIBRARY_PATH
$ export LD_LIBRARY_PATH=/usr/lib/jvm/java-6-openjdk/jre/lib/amd64/native_threads:$LD_LIBRARY_PATH
$ export LD_LIBRARY_PATH=/usr/lib/jvm/java-6-openjdk/jre/lib/amd64/server:$LD_LIBRARY_PATH
$ export LD_LIBRARY_PATH=/usr/lib/jvm/java-6-openjdk/jre/lib:$LD_LIBRARY_PATH 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T00:35:43.887

通常你必须添加某种平台特定的目录，就像在 Linux 上一样：

```
g++ -I /usr/lib/jvm/jdk1.6.0_34-x86/include/ -I /usr/lib/jvm/jdk1.6.0_34-x86/include/linux Hello.cpp 
```

`JNICALL`因为那里设置了一些宏（如）。希望这将修复 jni.h 错误级联。

编辑：仍然卡住？尝试：

```
JNI_CreateJavaVM(&jvm, (void**)&env, &vm_args); 
```

它至少会解决编译问题。我不知道它是否会*起作用*，因为我以前没有尝试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-12T01:48:48.820

我遇到了类似的问题，并意识到问题在于我在 Ubuntu 中使用适用于 Windows 而不是 Linux 的 JDK 版本进行编译。当我在 Cygwin 中编译时它起作用了。或者，如果我想继续使用 Ubunutu，我可以尝试使用适用于 Linux 的 JDK。**

# ruby-on-rails - Rails 3.2.11 应用程序（使用 mongoid/MongoHQ）在 Heroku 上崩溃

> ID：15560586
> 
> 赞同：0
> 
> 时间：2013-03-22T00:21:42.903
> 
> 标签：ruby-on-rails, heroku, mongoid

我正在使用 Rails 3.2.11，它在本地 mongodb 上与 mongoid 一起工作。我已经配置了 MongoHQ 并正确设置了 mongoid.yml。部署应用程序后不久，它在启动 web dyno 时失败，就好像 rails 服务器不是有效命令一样！

```
    2013-03-22T00:13:33+00:00 heroku[web.1]：使用命令“bundle exec rails server -p 5052”启动进程
    2013-03-22T00:16:59+00:00 应用程序 [web.1]：用法：
    2013-03-22T00:16:59+00:00 应用程序 [web.1]：rails 新 APP_PATH [选项]
    2013-03-22T00:16:59+00:00 应用程序 [web.1]:
    2013-03-22T00:16:59+00:00 应用程序 [web.1]：选项：
    ...

```

我尝试将此 bundle exec 作为一次性命令运行，但它给出了相同的错误。我在 Gemfile 中指定了 ruby​​ 1.9.3。Unicorn 启动，但在浏览器上显示“应用程序错误”，没有任何内容登录到 unicorn。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:31:15.420

天哪，我刚刚发现我没有 git add script/rails！固定的。

# entity-framework - 为什么 EF 5.0 Code-First 实体的 DbContext 不包括元数据中的只读属性？

> ID：15560591
> 
> 赞同：0
> 
> 时间：2013-03-22T00:21:56.717
> 
> 标签：entity-framework, knockout.js, entity-framework-5, knockout-2.0, breeze

我正在使用单页应用程序

```
.NET 4.5
Entity Framework 5.0
Knockout 2.2.1
BreezeJS 1.2.5
DurandalJS (Latest Version) 
```

我有一个 POCO（通过 Code-First 在 EF-5 中映射），其中包括具有以下字段的街道地址

```
StreetAddress1 
StreetAddress2 
City 
State 
PostalCode 
```

**为了帮助在客户端上呈现这些信息，我创建了一个名为DisplayAddress**的只读属性，它带有一个*getter*，它将所有这些字段组合在一起，并适当地处理标点符号、间距和任何缺失的项目。

当 Breeze 拉取实体时，DisplayAddress 属性的数据存在于返回的 JSON 中。但是，当 Knockout 尝试映射 DisplayAddress 时，系统会生成以下错误。

```
Unable to parse bindings.↵Message: ReferenceError: DisplayAddress is not defined;↵Bindings value: text: DisplayAddress 
```

Knockout 似乎没有 DisplayAddress 作为其对象的属性。

*有谁知道为什么 Knockout/Breeze 没有看到这个属性？*

顺便说一句，这里是客户端 JavaScript 和返回的 JSON。

```
define(function (require) {
    var app = require('durandal/app');
    var system = require('durandal/system');

    // Added Company constructor to try and extend breeze entity with display address
    var Company = function () {
        this.DisplayAddress = ko.observable("");
    };

    // service name is route to the Web API controller
    var serviceName = 'api/CompanyList';

    // manager is the service gateway and cache holder
    var manager = new breeze.EntityManager(serviceName);
    var store = manager.metadataStore;

    store.registerEntityTypeCtor("Company", Company);

    // define the viewmodel
    var vm = {
        companys: ko.observableArray(),
        save: saveChanges,
        show: ko.observable(false),

        activate: function () {
            return getCompanys();
        }

    };

    // Fetch companies
    getCompanys;

    //#region private functions

    // get companies asynchronously
    // returning a promise to wait for     
    function getCompanys() {

        //logger.info("querying Todos");
        system.log("querying Companys");
        toastr.info("querying Companys");

        var query = breeze.EntityQuery.from("Companys");

        return manager
            .executeQuery(query)
            .then(querySucceeded)
            .fail(queryFailed);

        // reload vm.companys with the results 
        function querySucceeded(data) {
            system.log("queried Companys");
            toastr.success("queried Companys");
            debugger;
            vm.companys(data.results);
            vm.show(true); // show the view
        }
    };

    function queryFailed(error) {
        //logger.error("Query failed: " + error.message);
        system.log("Query failed: " + error.message);
        toastr.error("Query failed: " + error.message);
    }

    function saveChanges() {
        return manager.saveChanges()
            .then(function () {
                system.log("changes saved");
                toastr.success("changes saved");
            })
            .fail(saveFailed);
    }

    function saveFailed(error) {
        system.log("Save failed: " + error.message);
        toastr.error("Save failed: " + error.message);
    }

    return vm;

    //#endregion
}); 
```

和 JSON

```
[
   {
      "$id":"1",
      "$type":"USWebDesigners.Data.Entities.Company, USWebDesigners.Data",
      "CompanyId":1,
      "CompanyName":"Happy Catfish",
      "Phone":"601-787-2528",
      "CompanyEmail":"howdy@happycatfish.com",
      "StreetAddress":"72 Technology Blvd",
      "City":"Ellisville",
      "State":"MS",
      "PostalCode":"39437",
      "CompanyUrl":"http://happycatfish.com",
      "PortfolioUrl":"http://happycatfish.com/our-work",
      "Services":[

      ],
      "SocialLinks":[

      ],
      "PortfolioItems":[

      ],
      "IsLeadParticipant":false,
      "IsActive":false,
      "CompanyStatus":0,
      "SiteQuality":0,
      "AverageRating":0.0,
      "DisplayAddress":"72 Technology Blvd<br />Ellisville, MS 39437",
      "CreatedOn":"2013-03-21T20:10:28.353"
   },
   {
      "$id":"2",
      "$type":"USWebDesigners.Data.Entities.Company, USWebDesigners.Data",
      "CompanyId":2,
      "CompanyName":"Creative Project Solutions, LLC",
      "StreetAddress":"170 Pine Grove Rd",
      "City":"Heidelberg",
      "State":"MS",
      "PostalCode":"39439",
      "Services":[

      ],
      "SocialLinks":[

      ],
      "PortfolioItems":[

      ],
      "IsLeadParticipant":false,
      "IsActive":false,
      "CompanyStatus":0,
      "SiteQuality":0,
      "AverageRating":0.0,
      "DisplayAddress":"170 Pine Grove Rd<br />Heidelberg, MS 39439",
      "CreatedOn":"2013-03-21T20:10:28.360"
   }
] 
```

当然，我确实通读了[Extending Breeze Entities](http://www.breezejs.com/documentation/extending-entities) ，但还没有完全发挥作用。

**更新**

我发现 Breeze 带回客户端的元数据中不存在 DisplayAddress。所以，我想第一个问题是为什么元数据中不包含未映射的属性，如果它是我的 POCO 上的有效属性？

**更新 2**

在进行进一步研究后，似乎只读属性没有进入服务器上的 DBContext 元数据。新问题变成：

*是否可以覆盖 DBContext 的元数据以添加只读属性？*

（我为什么要这样做？因为我希望 Breeze 能够绑定到只读属性以进行显示。）

*如果无法向 DBContext 元数据添加只读属性，那么在客户端添加此属性的最佳解决方案是什么？*

# mysql - 防止Rails中父关系中的竞争条件

> ID：15560592
> 
> 赞同：4
> 
> 时间：2013-03-22T00:21:56.633
> 
> 标签：mysql, ruby-on-rails, ruby, locking, race-condition

我有以下型号：

```
class Lyric < ActiveRecord::Base
  belongs_to :user
  belongs_to :song
  after_create :add_to_song
end

class Song < ActiveRecord::Base
  belongs_to :user
  has_many   :lyrics
end 
```

这个想法是用户可以为一首歌添加任意数量的歌词。如果为该用户尚不存在的新歌曲输入歌词，则会为该用户创建一首新歌曲。这是通过调用 after_create 方法 'add_to_song' 来实现的，该方法检查用户是否有该歌曲的歌词：

```
def add_to_song

  sl = self.song_line

  # Check for adjacent songs
  prior_song = Song.where(:user_id => self.user.id, 
                          :title=> sl.title, 
                          :artist => sl.artist, 
                          :last_line => sl.linenum-1).first

  next_song  = Song.where(:user_id => self.user.id, 
                          :title=> sl.title, 
                          :artist => sl.artist, 
                          :frst_line => sl.linenum+1).first

  # Case 1 - No existing song
  if !prior_song && !next_song
    song = Song.create!(:user_id => self.user.id, 
                        :length => 1, 
                        :title=> sl.title, 
                        :artist => sl.artist, 
                        :frst_line => sl.linenum, 
                        :last_line => sl.linenum )
    self.update_attribute( :song_id, song.id )

  # Case 2 - Lyric is between two songs -> merge songs
  elsif prior_song && next_song
    prior_song.absorb( next_song, self )

  # Case 3 - Lyric is new first lyric of existing song
  elsif next_song
    next_song.expand( self )

  # Case 4 - Lyric is new last lyric of existing song
  else
    prior_song.expand( self )
  end

end 
```

如果链接歌词是由用户添加的，那么 add_to_song 方法还会将两首“歌曲”合二为一。换句话说，如果用户拥有一首歌曲的第 1 行和第 3 行，则在她添加同一首歌曲的第 2 行之前，它们将被视为两首不同的歌曲。

## 问题

当用户同时从同一首歌曲中添加多个歌词时（通过从搜索结果中选择其中的一些歌词），MySQL 中偶尔会出现竞争条件，并且为同一首歌曲实例化两个歌曲模型，即使歌词彼此相邻并且应该组合成一首“歌曲”。（不幸的结果是歌词以正确的顺序呈现。）

我已经阅读了关于乐观与悲观锁定等的无穷无尽的帖子，并尝试了各种选择，但似乎无法摆脱这个问题。每次用户创建歌词时锁定整个 Song 表似乎有点过头了。

这是防止这种情况发生的唯一方法吗？（这似乎对性能造成了巨大影响）。我的架构中是否存在根本性错误？我想这是许多项目中的常见问题，但据我所知，它似乎并没有出现太频繁。似乎任何时候在 after_create 方法中实例化父关联时，如果父模型（在本例中为 Song）的创建依赖于另一个子模型（在本例中，歌词）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:19:39.813

如果您不想锁定表，有一种丑陋的方法可以防止这种情况发生：互斥锁。

像这样的东西：

```
File.open(MUTEX_FILE_PATH, "w") unless File.exists?(MUTEX_FILE_PATH)
mutex = File.new(MUTEX_FILE_PATH,"r+")
begin
  mutex.flock(File::LOCK_EX)

   ...code...

ensure
  mutex.flock(File::LOCK_UN)
end 
```

可以在不阻塞整个桌子的情况下工作。您可以更好地提高性能并使用用户 ID 创建互斥锁，这样该块将适用于每个用户，而不是任何人。

我并没有真正得到检查下一首歌和检查上一首歌的东西，但是如果你通过歌曲执行用户 has_many 歌词不会比你当前的用户通过歌词拥有_many 歌曲更好吗？

# php - 连接到远程 azure db 时，sqlsvr 驱动程序响应时间很慢

> ID：15560594
> 
> 赞同：0
> 
> 时间：2013-03-22T00:21:59.227
> 
> 标签：php, azure, azure-sql-database

我已经在 windows azure 中设置了一个虚拟机，并在 azure 门户中设置了一个 SQL azure DB。

当我使用 PHP sqlsvr 驱动程序将我的 Web 应用程序连接到数据库时，即使它可以工作，它也非常缓慢并且检索数据。过去我发现解决此问题的方法是将数据库与 Web 应用程序放在同一台服务器上。

有什么办法可以解决这个问题，因为我想使用 Azure DB。

干杯。

编辑：

发现这个：

[Azure Web 角色和 SQL Azure 之间的延迟和应用程序性能](https://stackoverflow.com/questions/11574516/latency-between-azure-web-role-and-sql-azure-and-application-performance?rq=1)

似乎是一个普遍的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:53:12.593

您的 Web 应用程序是否与您的 Windows Azure SQL 数据库托管在同一区域？

**请参阅： http:** [//www.windowsazure.com/en-us/develop/net/how-to-guides/sql-database/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/sql-database/)

> 选择一个地区。地区决定了服务器的地理位置。区域不能轻易切换，所以选择一个对这个服务器有意义的。选择离您最近的位置。将您的 Windows Azure 应用程序和数据库保持在同一区域可以节省出口带宽成本和**数据延迟**。

# javascript - 我可以在 ECMAScript3 中运行我的代码吗？

> ID：15560595
> 
> 赞同：1
> 
> 时间：2013-03-22T00:22:08.093
> 
> 标签：javascript

我想在 ecmascript3 中测试我的代码，但我的网络浏览器支持 ecmascript5，我无法安装旧版网络浏览器。

（感谢您纠正我的英语！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:34:31.117

ECMAScript 5 是 ECMAScript 3 的超集。您可以从“旧”书中学到的所有内容也可以在现代浏览器中使用。

* * *

在评论中，您提出了一个不同的问题……在此处阅读 ECMAScript 5 中的新功能：http: [//markcaudill.com/2009/04/javascript-new-features-ecma5/](http://markcaudill.com/2009/04/javascript-new-features-ecma5/)

* * *

如果您只对 的更改感兴趣`Object`，请阅读：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object)

JavaScript 1.8.5 是 ECMAScript 5 的超集。（您应该注意到 JavaScript 是使用 Mozilla 产品的专有语言。例如`Object.__parent__`，它不是 ECMAScript 标准的一部分。）

# scala - Play 2.0 / SBT：从 Build.scala 中的某些/所有模块中排除某些传递依赖项

> ID：15560598
> 
> 赞同：12
> 
> 时间：2013-03-22T00:22:10.920
> 
> 标签：scala, playframework-2.0, sbt

我有一个带有 Grails 前端的大型遗留 Java 应用程序，我正在努力用 Play 编写的新前端替换 Grails 前端。遗留 Java 中的一些（Maven）模块依赖项带来了有问题/冲突的事情。在这一点上，整理出所有遗留的 Java 依赖项并不是一个真正的选择，所以我只想排除我不喜欢的传递依赖项。

在 Grails`BuildConfig.groovy`中，我可以定义一个排除列表：

```
def some_bad_things = [
        [group: 'some-evil-group'],
        [name: 'some-evil-module-from-another-group'],
        [name: 'some-other-evil-module']
] 
```

然后将其用于整个直接依赖块：

```
dependencies {
    compile (
        [group: 'com.foo', name: 'foo-module1', version: '1.0'],
        // ... 20 or 30 modules ...
        [group: 'com.quux', name: 'quux-module42', version: '7.2'],
    ) {
        excludes some_bad_things
    }
} 
```

`Build.scala`做同样事情的语法是什么并不明显。翻译实际的依赖关系非常简单......

```
val appDependencies = Seq(
    "com.foo" % "foo-module1" % "1.0" % "compile",
    // ... 20 or 30 modules ...
    "com.quux" % "quux-module42" % "7.2" % "compile"
) 
```

...但排除不是；看来我必须单独排除所有内容：

```
val appDependencies = Seq(
    ("com.foo" % "foo-module1" % "1.0" % "compile"),
        .exclude("some-evil-group", "evil-module-1")
        .exclude("some-evil-group", "evil-module-2")
        .exclude("mostly-ok-group-1", "some-evil-module-from-another-group")
        .exclude("mostly-ok-group-2", "some-other-evil-module"),

    // ... 20 or 30 modules, each with four excludes ...

    ("com.quux" % "quux-module42" % "7.2" % "compile")
        .exclude("some-evil-group", "evil-module-1")
        .exclude("some-evil-group", "evil-module-2")
        .exclude("mostly-ok-group-1", "some-evil-module-from-another-group")
        .exclude("mostly-ok-group-2", "some-other-evil-module")

) 
```

我认为这里没有很多火箭科学，即使没有开箱即用的方式来全局排除，编写一些辅助函数或其他东西应该不难，这对我有用. 但是我是 Scala 新手，我甚至不清楚我正在查看什么类型或所有操作员做什么，或者我所看到的有多少是纯 Scala / SBT，有多少是特定于 Play 的。那么，欢迎提出建议？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-14T11:41:50.133

答案有点晚了，但是，您可以编写一个过滤器，将排除应用于列表中的每个依赖项，如下所示：

```
def excludeFromAll(items: Seq[ModuleID], group: String, artifact: String) = 
  items.map(_.exclude(group, artifact)) 
```

然后使用它来过滤您的依赖项：

```
val deps = Seq(dependencies)
val appDependencies = excludeFromAll(deps, "groupId", "artifactId") 
```

或者，如果您想获得更流畅的语法，更像是常规的 sbt 东西，但使用更高级的 Scala 代码（编辑：最初使用 Scala 2.10 隐式类编写）：

```
implicit def dependencyFilterer(deps: Seq[ModuleID]) = new Object {
  def excluding(group: String, artifactId: String) =
    deps.map(_.exclude(group, artifactId))
} 
```

这反过来又会让你像这样声明你的依赖关系

```
val appDependencies = Seq(...).excluding("groupId", "artifactId") 
```

我将排除您需要的可传递部门列表作为读者的练习，鉴于这些示例应该不会太难，希望这会有所帮助！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-09-10T22:04:21.347

刚刚在 SBT 0.13 中找到，我们可以通过以下代码简单地做到这一点：

```
excludeDependencies ++= Seq(
  SbtExclusionRule("com.google.gwt", "gwt-user"),
  SbtExclusionRule("com.google.gwt", "gwt-dev"),
  SbtExclusionRule("com.google.gwt", "gwt-servlet"),
  SbtExclusionRule("com.google.guava", "guava-gwt")
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-06T06:46:04.420

我认为它告诉 SBT 文档更容易： [http ://www.scala-sbt.org/0.12.2/docs/Detailed-Topics/Library-Management.html](http://www.scala-sbt.org/0.12.2/docs/Detailed-Topics/Library-Management.html)

```
 libDependencies += "com.quux" % "quux-module42" % "7.2" % "compile" intransitive() 
```

这种方法的问题是您排除了给定工件的所有依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-05T09:00:06.900

在 sbt 1.* 中是`ExclusionRule`. 所以这是@Jake W的调整答案：

```
excludeDependencies ++= Seq(
  ExclusionRule("com.google.gwt", "gwt-user"),
  ExclusionRule("com.google.gwt", "gwt-dev"),
  ExclusionRule("com.google.gwt", "gwt-servlet"),
  ExclusionRule("com.google.guava", "guava-gwt")
) 
```

# eclipse - Apache Ivy 在 Ant 构建期间使用 Eclipse 工作区解决依赖关系

> ID：15560601
> 
> 赞同：6
> 
> 时间：2013-03-22T00:22:21.910
> 
> 标签：eclipse, ant, build, ivy, workspace

我正在使用 Apache Ivy 和 Eclipse (IvyDE) 并尝试解决以下问题。**我有两个项目，IvyParent 和 IvyChild，孩子依赖于父母。**我为 Eclipse Ivy Classpath Container 选择了“解决工作空间中的依赖项”的选项。

Eclipse 自动构建器运行良好——我下载并包含了所有 Ivy 依赖项。**我同时打开了父项目和子项目，我可以对父项目进行实时编辑并查看子项目的编译更改。**

问题是当我尝试使用 Ant 将子项目构建到 jar 中时。我的问题是，**如何在显式 Ant 构建期间利用 Workspace 解析器？**

我研究了 Ivy 文件系统解析器，但我试图避免的是在 Ant 构建子项目之前必须明确地重建父项目。

我得到的错误如下：

```
[ivy:retrieve] :: problems summary ::
[ivy:retrieve] :::: WARNINGS
[ivy:retrieve]      module not found: org.example#ParentModule;latest.integration
[ivy:retrieve]  ==== local: tried
[ivy:retrieve]  ...
[ivy:retrieve]  ==== shared: tried
[ivy:retrieve]  ...
[ivy:retrieve]  ==== public: tried
[ivy:retrieve]  ...
[ivy:retrieve]      ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:retrieve]      ::          UNRESOLVED DEPENDENCIES         ::
[ivy:retrieve]      ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:retrieve]      :: org.example#ParentModule;latest.integration: not found
[ivy:retrieve]      ::::::::::::::::::::::::::::::::::::::::::::::

BUILD FAILED
C:\Users\user\workspace\IvyExampleChild\build.xml:15: impossible to resolve dependencies:
    resolve failed - see output for details 
```

这是父项目ivy.xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<ivy-module version="2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://ant.apache.org/ivy/schemas/ivy.xsd">

    <info organisation="org.example" module="ParentModule" status="integration" />
    <dependencies>
        <dependency org="commons-lang" name="commons-lang" rev="2.6"/>
    </dependencies>
</ivy-module> 
```

这是子项目ivy.xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<ivy-module version="2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://ant.apache.org/ivy/schemas/ivy.xsd">

    <info organisation="org.example" module="ChildModule" status="integration" />
    <dependencies>
        <dependency org="org.example" name="ParentModule" rev="latest.integration"/>
    </dependencies>
</ivy-module> 
```

这是子 build.xml：

```
<project xmlns:ivy="antlib:org.apache.ivy.ant" name="ChildModule" default="release">    
    <property name="build.dir" value="build" />
    <property name="build.dir.classes" value="${build.dir}/classes" />

    <property name="src.dir" value="src" />
    <property name="output.jar" value="${build.dir}/${ant.project.name}.jar" />

    <target name="clean">
        <delete includeemptydirs="true" quiet="true">
            <fileset dir="${build.dir}" />
        </delete>
    </target>

    <target name="apache-ivy" depends="clean">
        <ivy:retrieve />
        <ivy:cachepath pathid="ivy.build.path" conf="default" />
    </target>

    <target name="release" depends="apache-ivy">
        <echo message="compiling ${src.dir}..." />

        <mkdir dir="${build.dir}" />
        <mkdir dir="${build.dir.classes}" />

        <javac srcdir="${src.dir}" destdir="${build.dir.classes}" classpathref="ivy.build.path"/>
        <jar destfile="${output.jar}" basedir="${build.dir}"/>
    </target>
</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T23:48:47.990

这是一个解析器和发布问题。您的 ParentModule 构建需要将其 jar“发布”到特定目录。然后您的子模块构建应该使用可以找到此特定目录的解析器。

所以.. 例如，ivy_settings 可能看起来像：

```
<ivysettings>
  <properties file="./ivysettings.properties"/>
  <property name="repository.dir" value="${ivy.build.dir}/repository"/>
  <settings defaultResolver="chain"/>
  <resolvers>
    <chain name="chain">
      <filesystem name="internal">
        <ivy pattern="${repository.dir}/[module]/ivy.xml" />
        <artifact pattern="${repository.dir}/[module]/[artifact].[ext]" />
      </filesystem>
      <ibiblio name="maven2" m2compatible="true"/>
    </chain>
  </resolvers>
</ivysettings> 
```

你的 build.xml 文件应该有

```
 <ivy:settings file="${ivy.build.dir}/ivysettings.xml" /> 
```

这里发生的是我们告诉 ivy 本地构建 jar 文件的目录（...../repository）。

所以你的父构建现在在它的 build.xml 中有一个“发布”目标：

```
<target name="publish" depends="jar, jarSources" description="--> publish this project in the ivy repository">
  <delete file="${dist.dir}/lib/ivy.xml"/>
  <ivy:publish artifactspattern="${dist.dir}/lib/[artifact](-[classifier]).[ext]"
          resolver="internal"
          status="integration"
          overwrite="true"/>
  <echo message="project ${ant.project.name} integration published" />
</target> 
```

所以.. 运行它并确认您的 ParentModule.jar 文件显示在您的存储库目录中。

在那里，您的子模块应该能够“解析”您的父模块 jar 文件。

# mysql - 避免数据清洗重复的最有效方法

> ID：15560605
> 
> 赞同：0
> 
> 时间：2013-03-22T00:23:02.657
> 
> 标签：mysql, sql, resources

我有来自客户端的数据，这是一个很好的重复信息的混乱。我将运行一个清理查询，它抓取转储的数据，进行一些清理，并最终将其放入一个新表中。

这是一个脚本：

```
INSERT INTO Spend (...)
SELECT ...
FROM Facilities F
JOIN Dump d
    ON d.facname = f.name
    AND f.city = d.city 
```

到目前为止，一切都很好。当有新的数据转储时会出现此问题。我只想得到最新的东西。我想不出一种看起来很有效的方法。一个快速简单的`WHERE NOT`子句是行不通的（我不认为......），因为没有任何独特的数据列。条目的唯一性实际上仅取决于大多数（如果不是全部）列的组合。考虑到去年一家公司的转储是 20k 行，为每个转储循环遍历它们似乎是一个糟糕的主意。一旦我们在这里获得了一些用户并且数据追溯到一年多前，似乎清理工作过于密集。

或者，也许我只是一个 n00b 并且正在从一个鼹鼠山中制造一座山。感谢您的任何建议或指示-

* * *

**编辑#1**

附上样本记录集的图像 ![在此处输入图像描述](../Images/30584018ab34e6eb5e639dc9845a3ec0.png)

第一个 col 是 Business 表中企业 ID 的外键。剩下的就是购买记录。此表用于搜索。那么，在清理并转储到新的可搜索表之后，唯一唯一的列是每行的自动递增 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:40:02.497

消除事务数据库冗余的关键是规范化；每增加一个标准化程度，都会消除另一个潜在的冗余来源。

在您的情况下，我推断您有几个冗长的文本字段，它们会使您的主数据表中的索引膨胀。我建议您将这些中的每一个放在自己的查找表中，并从主数据表中进行（人工）外键查找。这将缩小主表中的键，从而降低索引高度并相应地提高性能。同时你增加了数据的标准化。

对于报告，随后将清理后的数据提取到辅助的非规范化表（即数据透视多维数据集）中，以便最终用户更有效地访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:36:31.243

谢谢你们的互动和帮助，伙计们。我认为最简单的解决方案是让客户端只转储新数据。我将把它附加到一个积累的转储数据池中，这样我就有了所有转储的连续记录，并让它`Dump`在使用它来清理并发送到我的表之前覆盖一个`Spend`表。

再次感谢！

# android - 从 sqlhelper 类的游标获取数据到另一个活动

> ID：15560609
> 
> 赞同：0
> 
> 时间：2013-03-22T00:23:35.307
> 
> 标签：android, android-cursoradapter

如何从另一个类中获取列索引（category._id 或 categorylang.Title）。

代码：

```
public Set<Category> getTopCategories() {
    final List<Integer> loadedTopCats = new ArrayList<Integer>(0);
    this.cursor = this.db.rawQuery(
            "SELECT DISTINCT category.ParentID FROM category" +
                    " INNER JOIN categorylang ON category._id = categorylang.CategoryID" +
                    " INNER JOIN questiontable" +
                    " ON categorylang.CategoryID = questiontable.CategoryID" +
                    " WHERE category.ParentID != 0" +
                    " AND questiontable.QuestionID IS NOT NULL" ,
                    null);

    while (this.cursor.moveToNext()) {
        loadedTopCats.add(this.cursor.getInt(0));
    }
    this.cursor.close();
    final StringBuilder allTopCatIds = new StringBuilder(loadedTopCats.size() * 2);

    for (final Integer i : loadedTopCats) {
        allTopCatIds.append(i + ",");
    }
    allTopCatIds.deleteCharAt(allTopCatIds.length() - 1);

    final String query = "SELECT category._id, " +
            "categorylang.Title, categorylang.Description, category.Position" +
            " FROM category" +
            " INNER JOIN categorylang" +
            " ON category._id = categorylang.CategoryID" +
            " WHERE category.ParentID = 0  AND category._id IN (" + allTopCatIds.toString() +
            ") ORDER BY category.Position DESC";
    this.cursor = this.db.rawQuery(query, null);

    SqlHelper.topCatList = new TreeSet<Category>();
    SqlHelper.catMapping = new HashMap<Integer, Set<Category>>();
    if (this.cursor.moveToFirst()) {
        do {
            SqlHelper.topCatList.add(new Category(this.cursor.getInt(0), this.cursor
                    .getString(1), "", this.cursor
                    .getString(2), this.cursor.getInt(3)));
            SqlHelper.catMapping.put(this.cursor.getInt(0), null);
        } while (this.cursor.moveToNext());
    }

    this.cursor.close();
    return SqlHelper.topCatList;
} 
```

我的意思是：this.cursor.getInt(0)，this.cursor.getString(1) 将在另一个类中使用所以我将在另一个活动中显示顶级类别列表

# asp.net - C# 谷歌登录 API

> ID：15560610
> 
> 赞同：3
> 
> 时间：2013-03-22T00:23:42.437
> 
> 标签：asp.net, c#-4.0, firefox, google-signin

我目前正在开发一个网站，Google 登录是其中一项功能。到目前为止，一切都很好。谷歌有很多关于它自己的 API 的文档和一些例子。但是，这是我的麻烦。

我正在使用 C# 并遵循本指南：[快速入门指南](https://developers.google.com/+/quickstart/csharp)

他们已经为我提供了一个随时可用的 Visual Studio 解决方案。

简短版：在 Firefox 19.0.2 + firebug 中，按下按钮并允许应用程序后出现错误，如下所示

> 错误：访问属性“valueOf”的权限被拒绝
> 
> $('#authResult').append(' ' + field + ': ' + authResult[field] + '
> ');

其余功能：

```
onSignInCallback: function(authResult) 
{
$('#authResult').html('Auth Result:<br/>');
for (var field in authResult) {
$('#authResult').append(' ' + field + ': ' + authResult[field] + '<br/>');
}
if (authResult['access_token']) {
// The user is signed in etc.... 
```

在 Chrome 中运行一切正常，在 IE10 上运行它也有错误。

希望你能帮助我。

# perl - 将服务器 IP 推送到阵列中

> ID：15560611
> 
> 赞同：0
> 
> 时间：2013-03-22T00:23:49.690
> 
> 标签：perl, loops

这是有效的代码...问题是当无法从某些站点获取IP时，脚本停止。是否有某种方法可以使脚本工作，即使某些站点无法获取 IP 形式？我需要像 VB On Error Resume Next 中一样的 somting...

```
our $file = abs_path("site.txt");

open (FH, "< $file") or die "Can't open $file for read: $!";
our @lines;
while (<FH>) {
    chomp($hostname="$_"); #change this to your hostname
our($addr)=inet_ntoa((gethostbyname($hostname))[4]);
our @newarr;
push(@newarr,$addr); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:36:39.707

Perl 的异常处理机制是[eval](http://perldoc.perl.org/functions/eval.html)。

我会重写你的代码（未经测试）如下：

```
use strict;
use warnings;

use Socket;

my $file = 'test.txt';

open my $fh, '<', $file
    or die "Can't open $file for read: $!";

my @addr;

while (my $hostname = <$fh>) {
    last unless $hostname =~ /\S/;
    $hostname =~ s/\s+\z//;

    my $ip = gethostbyname $hostname;
    $ip = defined($ip) ? inet_ntoa $ip : '';

    push @addr, [$hostname, $ip];
}

close $fh
    or die "Cannot close '$file': $!";

use YAML;
print Dump \@addr; 
```

请注意以下事项：

*   裸字文件句柄是包全局的
*   `our`变量具有包范围
*   如果要将返回值分配给`<$fh>`变量，请在`while`条件中执行此操作，不要弄乱`$_`

发布代码时，请发布至少有合理编译机会的代码。

# javascript - 使用 jquery 计算表单值

> ID：15560615
> 
> 赞同：0
> 
> 时间：2013-03-22T00:24:21.270
> 
> 标签：javascript, jquery

我有一个 php 生成的表单代码：

```
echo "<td><select id='num".$result['id']."' name='num".$result['id']."'>
      <option value='1'>1</option>
      <option value='2'>2</option>
      <option value='3'>3</option>
      <option value='4'>4</option>
      <option value='5'>5</option>
      <option value='6'>6</option>
      <option value='7'>7</option>
      <option value='8'>8</option>
      <option value='9'>9</option>
      <option value='10'>10</option>
      </select>
      </td>";
echo "<td><input type='checkbox' value='".$result['sell_price']."'                    name='".$result['id']."' id='".$result['id']."' /></td>"; 
```

如您所见，选择框的值已经定义，复选框的值是从数据库中获取的。

我想计算复选框的值并使用 jquery 将总和与选择框的值相乘。我有这个功能来“onclick on any td the checkbox is selected”：

```
$(function () {
    $("td").on(\'click\', function (e) {
        if (! $(e.target).closest(\'select\').length ) {
           var tr  = $(this).closest("tr"),
               chk = tr.find("input[type=\'checkbox\']").get(0);
           if (e.target != chk) {
               chk.checked = !chk.checked;
           }
           if ( tr.find("input[type=\'checkbox\']").is(":checked")) {
               tr.css("font-weight", "bold");
           } else {
               tr.css("font-weight", "");
           }
        }
    });  
}); 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:36:41.293

如果要计算所有选定复选框的总和，则

```
 function calculata() {         
     var sum=0;
     $('#your_div_Id :checked').each(function() {
       sum=sum+($(this).val());
     });
  } 
```

如果你想要一个值数组

```
var values = $('input:checkbox:checked.group1').map(function () {
  return this.value;
}).get(); // ["10", "11", "07"] 
```

# symfony - required 不适用于 EventSubscriber 中的重复字段类型

> ID：15560626
> 
> 赞同：0
> 
> 时间：2013-03-22T00:26:37.843
> 
> 标签：symfony, symfony-forms, fosuserbundle

我`EditFormType`用代码创建了表单：

```
// ...
public function buildForm(FormBuilderInterface $builder, array $options)
{
    // ...
    $builder->addEventSubscriber(new UnsetReadOnlyForEmailField());
}
// ... 
```

和`UnsetReadOnlyForEmailField`：

```
// ...
public static function getSubscribedEvents()
{
    return array(
        FormEvents::PRE_SET_DATA => 'preSetData'
    );
}

public function preSetData(FormEvent $event)
{
    $form = $event->getForm();
    $data = $event->getData();

    if ($data === null) {
        return;
    }

    if ($data->getId() === null) {
        $form->add(
            'plainPassword',
            'repeated',
            array(
                'type' => 'password',
                'options' => array('translation_domain' => 'FOSUserBundle', 'required' => true),
                'first_options' => array('label' => 'form.password'),
                'second_options' => array('label' => 'form.password_confirmation'),
                'invalid_message' => 'fos_user.password.mismatch',
            )
        );
    }
}
// ... 
```

不幸`required`的是，重复字段不起作用，字段不是必需的。有什么建议么？如果我做错了，请写信设置表单中的字段是否必填，具体取决于要编辑或添加的表单。需要添加表单，不需要编辑表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:59:47.920

我认为你可以这样做：

```
$form->add(
    'plainPassword',
    'repeated',
    array(
        'type' => 'password',
        'options' => array('translation_domain' => 'FOSUserBundle'),
        'first_options' => array(
             'label' => 'form.password',
             'required' => true
        ),
        'second_options' => array(
            'label' => 'form.password_confirmation',
            'required' => true
         ),
        'invalid_message' => 'fos_user.password.mismatch',
    )
); 
```

# javascript - 每个键值，在循环内连接值

> ID：15560627
> 
> 赞同：0
> 
> 时间：2013-03-22T00:26:44.710
> 
> 标签：javascript, jquery

所以我有一个字符串，我正在尝试加入内容；如果 val 长度小于 10 个字符，则将其与下一个值连接。但是当我尝试这段代码时，它会加入相同的 val 而不是下一个。

```
//Set the regex.
myregex = /(<p>.*?<\/p>)/g;
//Variable string.
content =  Example: <p>Hello</p><p>This is my test content</p><p>etc</p>

$(content.match(myregex)).each(function (key, val) {
    var test = $(val).text();
    if (test.length < 10) {
        var n = val.concat(val);
        $('#mydiv').append('<div>' + n + '</div>');
    } else {
        $('#mydiv').append('<div>' + val + '</div>');
    }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:34:28.313

这里的这一行： `val.concat(val)`，确实是在复制您的内容。您需要做的是从当前值`regex`而不是当前值中获取下一个值。像下面这样的东西应该可以工作。

```
var matches = content.match(myregex),
    myDiv = $('#mydiv');

for (var i = 0, len = matches.length; i < len; i++){
    if (i + 1 < len && matches[i].length < 10){
        myDiv.append('<div>' + matches[i].concat(matches[i+1]) + '</div>');
        i += 1;
    }
    else myDiv.append('<div>' + matches[i] + '</div>');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:32:50.457

`val`并且`val`是相同的东西，所以当然`val.concat(val)`会复制它。

如果你想使用`$.each`，我认为加入之前的值可能会更好，因为你还不知道下一个值是什么。

```
var previous = [];
$(content.match(myregex)).each(function (key, val) {
    var test = $(val).text();
    if (test.length < 10) {
        previous = val;
    } else {
        if(previous.length) {
            val = previous.concat(val);
        }
        $('#mydiv').append('<div>' + val + '</div>');
        previous = [];
    }
}); 
```

# c# - 将包含数千个收件人的 Outlook MSG 导入 PST

> ID：15560630
> 
> 赞同：0
> 
> 时间：2013-03-22T00:27:14.843
> 
> 标签：c#, com, outlook, outlook-2010, outlook-redemption

我有许多 Outlook MSG 需要保存为其他格式，例如 MHT。每个 MSG 都有数千个收件人，我知道 MSG 结构不够健壮，无法处理大量收件人。我相信我的第一步是将 MSG 导入到 PST 中，它可以处理大量收件人。

我正在使用 Outlook 2010 和 Redemption 5.4（完整版）。我准备使用 Outlook 对象模型或 Redemption 来实现我的目标。平台：Windows 7 SP1，64 位。

我试过这些方法：

```
//Establish Session
RDOSession rdoSession = new RDOSession();
rdoSession.Logon(null, null, false, true, null, true);

//Create empty mail item in PST.
RDOMail rdoMail = rdoSession.GetDefaultFolder(rdoDefaultFolders.olFolderInbox).Items.Add(null);

//Merge MSG into new, empty mail
//fi.FullName = C:\<subdirectories>\009.msg
rdoMail.Import(fi.FullName, rdoSaveAsType.olMSGUnicode);
rdoMail.Save();

//Save as MHT
rdoMail.SaveAs(diMht.FullName + @"\" + strNormalizedSubject + ".mht", Redemption.rdoSaveAsType.olMHTML); 
```

此代码无法将 MSG 导入 PST。我收到此异常： `{"Error importing: 0x8004011B"}`

我也尝试过这种不依赖 PST 的方法。

```
RDOMail rdoMail = rdoSession.GetMessageFromMsgFile(fi.FullName, false);
string strNormalizedSubject = NormalizeSubject(rdoMail.Subject);

rdoMail.SaveAs(diMht.FullName + @"\" + strNormalizedSubject + ".mht", Redemption.rdoSaveAsType.olMHTML); 
```

此代码导致此异常：`Error in OpenIMsgOnIStg: MAPI_E_CORRUPT_DATA`。

我相信 Transend Migrator 可以转换带有大数字或收件人的 MSG。但是，由于许可成本高，这不是一种选择。

如何将味精保存为另一种格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:48:48.217

0x8004011B 是 MAPI_E_CORRUPT_DATA。看起来您的 PST 商店已损坏。您是否尝试使用 scanpst.exe 修复它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:09:56.680

Dmitry 建议我将 MSG 文件视为 OLE 存储文件。这个想法把我带到了这个网站：Reading an Outlook MSG File in C# [CodeProject](http://www.codeproject.com/Articles/32899/Reading-an-Outlook-MSG-File-in-C)。

我已经确认该项目能够打开具有大量收件人的 MSG。我用有 2,499 个收件人的 MSG 对其进行了测试。

该项目可能使提取构建 MHT 文件所需的数据成为可能。

# c++ - 使用从另一个函数 C++ 生成的字符串的函数

> ID：15560631
> 
> 赞同：-1
> 
> 时间：2013-03-22T00:27:38.407
> 
> 标签：c++

我写了一个函数，它应该分析和使用另一个函数产生的数据（具体为字符串），并计算字符的百分比并打印出结果。

此函数是 int 类型，但前一个函数是 string 类型。我正在考虑使用指针，但我不知道它是否是有效的转换。

我也不相信将一个函数放在另一个函数参数中是有效的。

这是一个几乎完整的功能

```
int percentages(string line)
{
    int overalcount;
    double Leu, Phe, Ile, STA, Val, Ser, Pro, Thr, Ala, Tyr, STO, His, Gln, Asn, Lys, Asp, Glu, Cys, Trp, Arg, Gly;
    int percentage, percentage1, percentage2, percentage3, percentage4, percentage5, percentage6, percentage7;
    int percentage8, percentage9, percentage10, percentage11, percentage12, percentage13, percentage14;
    int percentage15, percentage16, percentage17, percentage18, percentage19, percentage20;
    int i;

    for (i = 0; i + 3 < line.length(); i += 3)
    {
        overalcount++;

        if(line.substr(i, 3) == "Phe")
        {
            Phe++;
            if(!Phe == 0)
            {
                percentage = (Phe / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Leu")
        {
            Leu++;
            if(!Leu == 0)
            {
                percentage = (Leu / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Ile")
        {
            Ile++;
            if(!Ile == 0)
            {
                percentage = (Ile / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "STA")
        {
            STA++;
            if(!STA == 0)
            {
                percentage = (STA / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Val")
        {
            Val++;
            if(!Val == 0)
            {
                percentage = (Val / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Ser")
        {
            Ser++;
            if(!Ser == 0)
            {
                percentage = (Ser / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Pro")
        {
            Pro++;
            if(!Pro == 0)
            {
                percentage = (Pro / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Thr")
        {
            Thr++;
            if(!Thr == 0)
            {
                percentage = (Thr / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Ala")
        {
            Ala++;
            if(!Ala == 0)
            {
                percentage = (Ala / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Tyr")
        {
            Tyr++;
            if(!Tyr == 0)
            {
                percentage = (Tyr / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "STO")
        {
            STO++;
            if(!STO == 0)
            {
                percentage = (STO / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "His")
        {
            His++;
            if(!His == 0)
            {
                percentage = (His / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Gln")
        {
            Gln++;
            if(!Gln == 0)
            {
                percentage = (Gln / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Asn")
        {
            Asn++;
            if(!Asn == 0)
            {
                percentage = (Asn / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Lys")
        {
            Lys++;
            if(!Lys == 0)
            {
                percentage = (Lys / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Asp")
        {
            Asp++;
            if(!Asp == 0)
            {
                percentage = (Asp / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Glu")
        {
            Glu++;
            if(!Glu == 0)
            {
                percentage = (Glu / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Cys")
        {
            Cys++;
            if(!Cys == 0)
            {
                percentage = (Cys / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Trp")
        {
            Trp++;
            if(!Trp == 0)
            {
                percentage = (Trp / overalcount) * 100;
            }
        }
        else if(line.substr(i, 3) == "Arg")
        {
            Arg++;
            if(!Arg == 0)
            {
                percentage = (Arg / overalcount) * 100;
            }   
        }
        else if(line.substr(i, 3) == "Gly")
        {
            Gly++;
            if(!Gly == 0)
            {
                percentage = (Gly / overalcount) * 100;
            }   
        }
    }

    if(!percentage == 0)
    {
        cout << "Percentage of Phe: " <<percentage <<endl;
    }
    if(!percentage1 == 0)
    {
        cout << "Percentage of Leu: " <<percentage1 <<endl;
    }
    if(!percentage2 == 0)
    {
        cout << "Percentage of Ile: " <<percentage2 <<endl;
    }
    if(!percentage3 == 0)
    {
        cout << "Percentage of STA: " <<percentage3 <<endl;         
    }
    if(!percentage4 == 0)
    {
        cout << "Percentage of Val: " <<percentage4 <<endl;         
    }
    if(!percentage5 == 0)
    {
        cout << "Percentage of Ser: " <<percentage5 <<endl;
    }
    if(!percentage6 == 0)
    {
        cout << "Percentage of Pro: " <<percentage6 <<endl;
    }
    if(!percentage7 == 0)
    {
        cout << "Percentage of Thr: " <<percentage7 <<endl;
    }
    if(!percentage8 == 0)
    {
        cout << "Percentage of Ala: " <<percentage8 <<endl;
    }
    if(!percentage9 == 0)
    {
        cout << "Percentage of Tyr: " <<percentage9 <<endl;
    }

    return 0;
} 
```

参数“string line”应该是前一个函数产生的字符串。但它是识别从输入文件流中读取的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:49:01.217

在这里，采用这个少得多的总函数：

```
int percentages(string line)
{
    map<string, int> words;
    double count = line.length() / 3;
    for (int i = 0; i + 3 < line.length(); i += 3)
        ++words[line.substr(i, 3)];

    string find[10] = {"Phe", "Leu", "Ile", "STA", "Val", "Ser", "Pro", "Thr", "Ala", "Tyr"};
    for (int i = 0; i < 10; ++i) 
        cout << "Percentage of " << find[i] << ": " << words[find[i]] / count << endl;
    return 0;
} 
```

# asp.net - 通过实体框架更新 MySQL 视图 =“每个派生表都必须有自己的别名”

> ID：15560635
> 
> 赞同：-1
> 
> 时间：2013-03-22T00:28:24.630
> 
> 标签：asp.net, mysql, entity-framework

我正在尝试通过实体框架更新 MySQL 视图并收到错误“每个派生表都必须有自己的别名”。

关于如何改变我的观点以防止这种情况的任何想法？这是我的 MySQL 视图代码：

```
 select 
  a.compid AS compid,
  a.loid AS loid,
  a.purchase_rate AS purchase_rate,
  a.purchase_min AS purchase_min,
  a.purchase_max AS purchase_max,
  a.refi_rate AS refi_rate,
  a.refi_min AS refi_min,
  a.refi_max AS refi_max,
  a.quarter AS quarter,
  a.year AS year,
  a.changed_on AS changed_on,
  a.user_changed AS user_changed,
  a.is_active AS is_active,
  a.notes_id AS notes_id,
  b.branch AS branchID,
  b.name AS lo_name,
  c.branch_name_friendly AS branchname 
from ((encompassdata.comp a 
  inner join default.users_encompass b on
    (
      (a.loid = b.un_enc)
    )) 
  inner join default.branch_info c on
    (
      (b.branch = c.branch_id)
    )) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:05:13.867

尝试删除`FROM`子句中的所有括号

```
SELECT a.compid AS compid,
       ...
  FROM encompassdata.comp a INNER JOIN
       default.users_encompass b on a.loid = b.un_enc INNER JOIN
       default.branch_info c on b.branch = c.branch_id 
```

# android - 如何使用来自 2 个不同服务器的 json 进行解析？

> ID：15560637
> 
> 赞同：0
> 
> 时间：2013-03-22T00:28:29.803
> 
> 标签：android, listview, arraylist, getjson

我在这里需要帮助。我想用来自 2 个 url 服务器的 json 进行解析，然后在 1 个列表视图中显示该数组。这是我的代码。

```
public class MainActivity extends Activity {
private JSONObject jObject;
private String jsonResult ="";
private JSONObject jObject2;
private String jsonResult2 ="";
private String url = "http://10.0.2.2/kota/daftarkota.php";
private String url2 = "http://10.0.2.2/kota/delkota.php";
private String url3 = "http://www.hatsa.byethost33.com/kota_daftarkota.php";
String[] daftarid;
String[] daftarnama;
String[] daftarlatitude;
String[] daftarlongitude;
Menu menu;
public static MainActivity ma;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ma=this;
    RefreshList();
}

public void RefreshList() {
    try {
        jsonResult = getRequest(url); 

        jObject = new JSONObject(jsonResult);
        JSONArray menuitemArray = jObject.getJSONArray("kota");

        daftarid = new String[menuitemArray.length()];
        daftarnama = new String[menuitemArray.length()];
        daftarlatitude = new String[menuitemArray.length()];
        daftarlongitude = new String[menuitemArray.length()];

        for (int i = 0; i < menuitemArray.length(); i++)
        {
            daftarid[i] = menuitemArray.getJSONObject(i).getString("id").toString();
            daftarnama[i] = menuitemArray.getJSONObject(i).getString("nama").toString();
            daftarlatitude[i] = menuitemArray.getJSONObject(i).getString("latitude").toString();
            daftarlongitude[i] = menuitemArray.getJSONObject(i).getString("longitude").toString();
        }
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        jsonResult2 = getRequest(url3); 

        jObject2 = new JSONObject(jsonResult2);
        JSONArray menuitemArray = jObject2.getJSONArray("kota");

        daftarid = new String[menuitemArray.length()];
        daftarnama = new String[menuitemArray.length()];
        daftarlatitude = new String[menuitemArray.length()];
        daftarlongitude = new String[menuitemArray.length()];

        for (int i = 0; i < menuitemArray.length(); i++)
        {
            daftarid[i] = menuitemArray.getJSONObject(i).getString("id").toString();
            daftarnama[i] = menuitemArray.getJSONObject(i).getString("nama").toString();
            daftarlatitude[i] = menuitemArray.getJSONObject(i).getString("latitude").toString();
            daftarlongitude[i] = menuitemArray.getJSONObject(i).getString("longitude").toString();
        }
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    ListView ListView01 = (ListView)findViewById(R.id.ListView01);
    ListView01.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, daftarnama));

    ListView01.setSelected(true);
    ListView01.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            final String selectionid = daftarid[arg2]; 
            final String selectionnama = daftarnama[arg2]; 
            final String selectionlatitude = daftarlatitude[arg2]; 
            final String selectionlongitude = daftarlongitude[arg2]; 
            final CharSequence[] dialogitem = {"Edit", "Delete"};
            AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
            builder.setTitle("Pilih ?");
            builder.setItems(dialogitem, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int item) {
                    switch(item){
                    case 0 :
                        Intent i = new Intent(getApplicationContext(), EditActivity.class);  
                        i.putExtra("id", selectionid);
                        i.putExtra("nama", selectionnama);
                        i.putExtra("latitude", selectionlatitude);
                        i.putExtra("longitude", selectionlongitude);
                        startActivity(i);

                        break;
                    case 1 :
                        getRequest(url2 + "?id=" + selectionid);
                        RefreshList();

                        break;
                    }
                }
            });
            builder.create().show();
        }});

    ((ArrayAdapter)ListView01.getAdapter()).notifyDataSetInvalidated();

}

/**
 * Method untuk Mengirimkan data ke server
 */
public String getRequest(String Url){

    String sret="";
    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet(Url);
    try{
        HttpResponse response = client.execute(request);
        sret =request(response);

    }catch(Exception ex){
        Toast.makeText(this,"Gagal "+sret, Toast.LENGTH_SHORT).show();
    }
    return sret;

}
/**
 * Method untuk Menerima data dari server
 */
public static String request(HttpResponse response){
    String result = "";
    try{
        InputStream in = response.getEntity().getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        StringBuilder str = new StringBuilder();
        String line = null;
        while((line = reader.readLine()) != null){
            str.append(line + "\n");
        }
        in.close();
        result = str.toString();
    }catch(Exception ex){
        result = "Error";
    }
    return result;
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    this.menu = menu;

    menu.add(0, 1, 0, "Tambah").setIcon(android.R.drawable.btn_plus);
    menu.add(0, 2, 0, "Refresh").setIcon(android.R.drawable.ic_menu_rotate);
    menu.add(0, 3, 0, "Exit").setIcon(android.R.drawable.ic_menu_close_clear_cancel);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case 1:
        Intent i = new Intent(MainActivity.this, AddActivity.class);
        startActivity(i);
        return true;
    case 2:            
        RefreshList();         
        return true;
    case 3:
        finish();
        return true;
    }
    return false;
} 
```

}

如果我运行它，列表视图只会显示来自“url”的数组，而“url3”中什么也没有。我不知道我的代码应该如何，如果我想让列表视图显示来自“url”和“url3”的数组。谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:39:01.330

它实际上看起来相反。我猜您会看到来自 的数据`url3`，因为您创建了两次数组`daftarnama`- 第二次使用来自 的数据`url3`。使用 a`List<String>`而不是数组。只需创建一次列表，然后添加两个 url 中的所有项目。此外，您应该重新考虑您的代码。您在这里有很多重复的代码（DRY - 不要重复自己）。

# c# - 强制单元测试项目使用来自 ASP.NET 项目的链接 web.config 文件

> ID：15560641
> 
> 赞同：2
> 
> 时间：2013-03-22T00:28:52.850
> 
> 标签：c#, asp.net, winforms, unit-testing, app-config

当我对与我的 WinForms 应用程序关联的业务层项目进行单元测试时，在我的 UnitTest 项目中，我包含了一个从 Winforms 项目链接的 app.config。这样，如果我更改 EXE 的 app.config 中的任何内容，它将反映在我的单元测试中。

我想对我的 ASP.NET 项目做同样的事情，但是，它们使用 web.config，因此我不能简单地将它链接到 UnitTest 项目。

没有将 web.config 复制到 UnitTest 项目的 app.config 的预构建步骤，我该如何解决这个问题？

# jquery - 带有类的Jquery克隆

> ID：15560642
> 
> 赞同：1
> 
> 时间：2013-03-22T00:29:08.327
> 
> 标签：jquery

我可以克隆表，但类 datepicker 在克隆行中不起作用。

我不知道我是否可以使用 find 来获取它。

```
<table width="100%" border="0" cellspacing="0" cellpadding="0" >
<tr>
    <td>Name</td>
    <td>Location</td>
    <td>From</td>
    <td>To</td>
    <td>Add</td>
</tr>
<tr class="tr_clone">
    <td><input type="text" autofocus placeholder="who" name="who" ></td>
    <td><input type="text" autofocus placeholder="location" name="location" ></td>
    <td><input type="text" placeholder="Start Date" name="datepicker_start" class="datepicker"></td>
    <td><input type="text" placeholder="End Date" name="datepicker_end" class="datepicker"></td>
    <td><input type="button" name="add" value="New" class="tr_clone_add"></td>
</tr> 
```

```
$(".datepicker").datepicker({
    dateFormat: 'dd/mm/yy'
});

$("input.tr_clone_add").live('click', function() {
var $tr    = $(this).closest('.tr_clone');
var $clone = $tr.clone();
$clone.find(':text').val('');
$clone.find('datepicker_start').addClass("datepicker");    
$tr.after($clone); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:32:38.960

当您克隆小部件属性时，也不会被复制，我认为没有一个名为的选择器`:text`，请尝试

```
$("input.tr_clone_add").live('click', function() {
    var $tr    = $(this).closest('.tr_clone');
    var $clone = $tr.clone(true, true);
    $clone.find('input').val('');
    $clone.find('.datepicker').datepicker({
        dateFormat: 'dd/mm/yy'
    });    
    $tr.after($clone); 
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/CKpbb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:12:17.567

在应用 datepicker 之前克隆所需的元素是最安全（也更快）的（您也可以删除 class `hasDatepicker`）：

```
var $to_clone = $('.tr_clone').first().clone();
$(".datepicker").datepicker({
    dateFormat: 'dd/mm/yy'
});

$("table").on('click', 'input.tr_clone_add', function () {
    var $tr    = $(this).closest('.tr_clone');
    var $clone = $to_clone.clone();
    $clone.find(':text').val('');
    $tr.after($clone);
    $clone.find('.datepicker').datepicker({
        dateFormat: 'dd/mm/yy'
    });
}); 
```

[http://jsfiddle.net/oceog/yWpBm/](http://jsfiddle.net/oceog/yWpBm/)

# sql - 按在关闭的时间范围内创建的行过滤行

> ID：15560643
> 
> 赞同：0
> 
> 时间：2013-03-22T00:29:19.130
> 
> 标签：sql, oracle

我有一个应用程序，用户在其中创建存储在 Oracle 数据库中的订单。我试图找到一个错误，该错误仅在用户在他们创建的最后一个订单的 30 秒内创建订单时发生。

这是订单表的结构：

```
order_id | user_id | creation_date 
```

我想编写一个查询，它可以给我一个订单列表，其中 creation_date 在同一用户的最后一个订单的 30 秒内。结果有望帮助我找到错误。

我尝试使用 Oracle LAG() 函数，但 WHERE 子句似乎没有。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:38:55.990

```
SELECT O.*
FROM YourTable O
WHERE EXISTS (
   SELECT *
   FROM YourTable O2
   WHERE
      O.creation_date > O2.creation_date
      AND O.user_id = O2.user_id
      AND O.creation_date - (30 / 86400) <= O2.creation_date
); 
```

[在 Sql Fiddle 中](http://sqlfiddle.com/#!4/e9133/3)查看此操作。

如果需要，您可以使用该`LAG`函数，您只需将查询包装到派生表中，然后将您的`WHERE`条件放入外部查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:31:03.913

```
SELECT distinct
  t1.order_id, t1.user_id, t1.creation_date
FROM 
  YourTable t1
  join YourTable t2 
    on t2.user_id = t1.user_id
    and t2.creation_date between t1.creation_date - 30/86400 and t1.creation_date
    and t2.rowid <> t1.rowid
order by 3 desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:01:56.817

使用 LAG() 的示例：

```
SELECT id, (pss - css) time_diff_in_seconds
      , creation_date, prev_date
  FROM
  (
  SELECT id, creation_date, prev_date
       , EXTRACT(SECOND From creation_date) css
       , EXTRACT(SECOND From prev_date) pss 
    FROM
    (
    SELECT id, creation_date
         , LAG(creation_date, 1, creation_date) OVER (ORDER BY creation_date) prev_date
     FROM
     ( -- Table/data --
      SELECT 1 id, timestamp '2013-03-20 13:56:58' creation_date FROM dual
       UNION ALL
      SELECT 2, timestamp '2013-03-20 13:57:27' FROM dual
       UNION ALL
      SELECT 3, timestamp '2013-03-20 13:59:16' FROM dual
     )))
 --WHERE (pss - css) <= 30
/

ID    TIME_DIFF_IN_SECONDS
--------------------------
1       0     <<-- if uncomment where
2       31   
3       11    <<-- if uncomment where 
```

# python - urllib2 未正确获取 XML

> ID：15560645
> 
> 赞同：0
> 
> 时间：2013-03-22T00:29:29.670
> 
> 标签：python, xml, google-app-engine

我在 Google App Engine 中有一个 python 应用程序，当我尝试获取 XML 提要时，没有任何反应，除了在 AppEngineLauncher 的日志控制台中，我得到

```
WARNING  2013-03-21 23:37:39,482 urlfetch_stub.py:453] Stripped prohibited headers from URLFetch request: ['Host'] 
```

这是我的代码：

```
class FindStops(webapp2.RequestHandler):
    def post(self):
        bound=self.request.POST["bound"]
        line=self.request.POST["stop"]
        stops=urllib2.urlopen("http://webservices.nextbus.com/service/publicXMLFeed?command=routeConfig&a=sf-muni&r=" + line)
        tree=ET.parse(stops)
        root=tree.getroot()
        title=list()
        for info in tree.findall('stop'):
            title.append(info.get('title'))

        for name in title:
            self.response.out.write(name) 
```

这是 XML 的样子：

```
<body copyright="All data copyright San Francisco Muni 2013.">
<route tag="F" title="F-Market & Wharves" color="555555" oppositeColor="ffffff"    latMin="37.7625199" latMax="37.8085899" lonMin="-122.43487" lonMax="-122.39345">
<stop tag="5184" title="Jones St & Beach St" lat="37.8072499" lon="-122.41737" stopId="15184"/>
<stop tag="3092" title="Beach St & Mason St" lat="37.80741" lon="-122.4141199" stopId="13092"/>
<stop tag="3095" title="Beach St & Stockton St" lat="37.8078399" lon="-122.41081" stopId="13095"/>
.
.
. 
```

我很确定我正在正确解析 XML，但是 self.response.out.write 什么也没打印出来，所以我在这里不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:06:37.237

我肯定会建议添加：

```
logging.info( 'stops: ' + stops.read(100) ) 
```

在使用之后`urllib2.urlopen()`，看看你是否得到了正确的回应，然后再指责 urllib2。

# jquery - Jquery：悬停时GIF无法出现

> ID：15560647
> 
> 赞同：1
> 
> 时间：2013-03-22T00:29:35.347
> 
> 标签：jquery, html5-video, z-index

显示它的外观的打印屏幕：http: [//i50.tinypic.com/24nl15w.png](http://i50.tinypic.com/24nl15w.png)

我想要归档的是，当用户将鼠标悬停在其中一个按钮上时，一个包含眨眼 GIF 的隐藏 div 将出现在视频上方。问题是什么都没有发生，我如何选择多个按钮来显示同一个 GIF？提前致谢 ：）

```
<!doctype html>
    <html lang="en">
    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title></title>
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <meta name="HandheldFriendly" content="true">
      <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
      <link rel="stylesheet" type="text/css" href="./css/global.css">
      <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Skranji">
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script type="text/javascript">
        $("#apDiv1").hover(
              function () {
               $("#gif").show().attr('src', image.src);
               $('#gif').css('z-index','999999');
               $('#videoplayer').css('z-index','999');
              },

              function(){
               $("#gif").hide();
            });
      </script>

    </head>

    <body>
        <div id="center">
            <ul id="ca-menu">
                                <div id="apDiv1">
                                    <li>
                                        <a href="../designcompany/index.html">
                                        <span class="ca-icon">Mode</span>
                                        </a>                    
                                    </li>
                                </div>
                                 <div id="apDiv2">
                                    <li>
                                        <a href="../designcompany/index.html">
                                        <span class="ca-icon">Mode</span>
                                        </a>                    
                                    </li>
                                </div>
                                 <div id="apDiv3">
                                    <li>
                                        <a href="../designcompany/index.html">
                                        <span class="ca-icon">Mode</span>
                                        </a>                    
                                    </li>
                                </div>
                                 <div id="apDiv4">
                                    <li>
                                        <a href="../designcompany/index.html">
                                        <span class="ca-icon">Mode</span>
                                        </a>                    
                                    </li>
                                </div>
                                 <div id="apDiv5">
                                    <li>
                                        <a href="../designcompany/index.html">
                                        <span class="ca-icon">Mode</span>
                                        </a>                    
                                    </li>
                                </div>
                                 <div id="apDiv6">
                                    <li>
                                        <a href="../designcompany/index.html">
                                        <span class="ca-icon">Mode</span>
                                        </a>                    
                                    </li>
                                </div>
                            </ul>

                            <div id="w">
                                <img id="gif" src="eye.gif" style="display: none; position: absolute; top:0; left:0;"/>
                                    <div id="videoplayer">
                                        <center>
                                            <video id="intro" autoplay="autoplay" loop="loop" autobuffer="autobuffer" muted="muted" width="1024" height="400">
                                            <source src="./media/eye.mp4" type="video/mp4" />
                                            </video>
                                        </center>   
                                    </div>
                            </div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:33:44.803

你缺少一个

```
$(document).ready(function(){
    /*...your stuff goes here...*/
}); 
```

它应该包装你目前拥有的 jQuery。这样 jQuery 会等到你的 DOM 被浏览器完全读取并被`ready`操作。

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

或者您可以使用有用的速记来`document.ready`喜欢：

```
$(function(){ // Now DocumentObjectModel is ready 
    /* your stuff in here */
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:39:06.913

我刚刚测试了你的代码，它运行[了 jsFiddle](http://jsfiddle.net/N5xfK/1/) 我会检查控制台，看看是否有任何链接损坏

```
$(function(){
  $("#apDiv1").hover(
          function () {
           $("#gif").show().attr('src', image.src);
           $('#gif').css('z-index','999999');
           $('#videoplayer').css('z-index','999');
          },

          function(){
           $("#gif").hide();
        });
}); 
```

# java - 超级简单的 TimePicker 实现 - 在第 74 行强制关闭

> ID：15560649
> 
> 赞同：0
> 
> 时间：2013-03-22T00:29:44.007
> 
> 标签：java, android, eclipse, timepicker, android-sdk-tools

我真的不确定此时我做错了什么......我试图查看时间选择器存储的数据 - 但每次我运行应用程序时都会遇到强制关闭错误。

附言

看来问题源于 View Country.java 中的第 74 行

timeTv.setCurrentHour(result.getInt(timeIndex));

数据输出 - JAVA：

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.TextView;
import android.widget.TimePicker;

public class ViewCountry extends Activity {

   private long rowID;
   private TextView nameTv;
   private TextView capTv;
   private TextView codeTv; 
   private TimePicker timeTv; 

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_country);

      setUpViews();
      Bundle extras = getIntent().getExtras();
      rowID = extras.getLong(CountryList.ROW_ID); 
   }

   private void setUpViews() {
       nameTv = (TextView) findViewById(R.id.nameText);
       capTv = (TextView) findViewById(R.id.capText);
       timeTv = (TimePicker) findViewById(R.id.timePicker1);
       codeTv = (TextView) findViewById(R.id.codeText);
   }

   @Override
   protected void onResume()
   {
      super.onResume();
      new LoadContacts().execute(rowID);
   } 

   private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

      @Override
      protected Cursor doInBackground(Long... params)
      {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

      @Override
      protected void onPostExecute(Cursor result)
      {
         super.onPostExecute(result);

         result.moveToFirst();
         // get the column index for each data item
         int nameIndex = result.getColumnIndex("name");
         int capIndex = result.getColumnIndex("cap");
         int codeIndex = result.getColumnIndex("code");
         int timeIndex = result.getColumnIndex("time");

         nameTv.setText(result.getString(nameIndex));
         capTv.setText(result.getString(capIndex));
         timeTv.setCurrentHour(result.getInt(timeIndex));
         codeTv.setText(result.getString(codeIndex));

         result.close();
         dbConnector.close();
      }
   } 

   @Override
   public boolean onCreateOptionsMenu(Menu menu) 
   {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_country_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) 
   {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("time", timeTv.getCurrentHour());
            addEditContact.putExtra("code", codeTv.getText());
            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }

   private void deleteContact()
   {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewCountry.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
   }
} 
```

数据输出 XML：

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content"
  android:stretchColumns="1" 
  android:layout_margin="5dp">

   <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/name_lbl"/>
     <TextView 
        android:id="@+id/nameText" 
        style="@style/StyleText"/>         
  </TableRow>

  <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/cap_lbl"/>         
     <TextView 
        android:id="@+id/capText"
        style="@style/StyleText"/>         
  </TableRow>

  <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="Time Limit"/>         
     <TextView 
        android:id="@+id/codeText"
        style="@style/StyleText"/>         
  </TableRow>
  <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="Linked Users"/>         
     <TextView 

        style="@style/StyleText"/>         
  </TableRow>
   <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/code_lbl"/>         
     <TextView 
        android:id="@+id/code_lbl"
        style="@style/StyleText"/>  

  </TableRow> 
```

数据输入 - JAVA

```
import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TimePicker;

public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;
 private TimePicker timeEt;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.nameEdit);
      capEt = (EditText) findViewById(R.id.capEdit);
      codeEt = (EditText) findViewById(R.id.codeEdit);
      timeEt = (TimePicker) findViewById(R.id.timeEdit);

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         timeEt.setCurrentHour(extras.getInt("time"));  
      }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

   private void saveContact() 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
          dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  timeEt.getCurrentHour().toString(),
                  codeEt.getText().toString());
      }
      else
      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(),
            timeEt.getCurrentHour().toString(),
            codeEt.getText().toString());
      }
   }
} 
```

数据输入 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" android:layout_weight="1">

<LinearLayout android:id="@+id/linearLayout"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical" 
  android:padding="5dp">

  <EditText android:id="@+id/nameEdit"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" 
     android:imeOptions="actionNext" 
     android:hint="@string/name_hint"
     android:inputType="textPersonName|textCapWords"/>

  <EditText android:id="@+id/capEdit"
     android:layout_width="fill_parent" 
     android:layout_height="wrap_content" 
     android:imeOptions="actionNext" 
     android:hint="@string/cap_hint"
     android:inputType="textPersonName|textCapWords"/>

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Data Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="left"
        android:textColor="#ffffff"
        android:text="10MB" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="right"
        android:textColor="#ffffff"
        android:text="Unlimited Data" />
</LinearLayout>

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Bandwidth Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="left"
        android:textColor="#ffffff"
        android:text="10kbs" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:textColor="#ffffff"
        android:gravity="right"
        android:text="Unlimited Bandwidth" />
</LinearLayout>

<TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textAppearance="?android:textAppearanceSmall" />

<TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="WiFi Time Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<TimePicker
    android:id="@+id/timeEdit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:layout_weight="1.0" />

<EditText
    android:id="@+id/codeEdit"
    android:inputType="textUri"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:lines="1"
    android:hint="@string/code_hint"
    android:imeOptions="actionNext" />

  <Button android:id="@+id/saveBtn" 
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_marginTop="15dp"
     android:layout_gravity="center_horizontal"
     android:text="@string/save_btn"/>
</LinearLayout>
</ScrollView> 
```

# ViewCountry.java 更新了第一个建议源代码：

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater; 
import android.view.MenuItem;
import android.widget.TextView;
import android.widget.TimePicker;

public class ViewCountry extends Activity {

   private long rowID;
   private TextView nameTv;
   private TextView capTv;
   private TextView codeTv; 
   private TimePicker timeTv; 

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_country);

      setUpViews();
      Bundle extras = getIntent().getExtras();
      rowID = extras.getLong(CountryList.ROW_ID); 
   }

   private void setUpViews() {
       nameTv = (TextView) findViewById(R.id.nameText);
       capTv = (TextView) findViewById(R.id.capText);
       timeTv = (TimePicker) findViewById(R.id.timeEdit);
       codeTv = (TextView) findViewById(R.id.codeText);
   }

   @Override
   protected void onResume()
   {
      super.onResume();
      new LoadContacts().execute(rowID);
   } 

   private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

      @Override
      protected Cursor doInBackground(Long... params)
      {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

      @Override
      protected void onPostExecute(Cursor result)
      {
         super.onPostExecute(result);

         result.moveToFirst();
         // get the column index for each data item
         int nameIndex = result.getColumnIndex("name");
         int capIndex = result.getColumnIndex("cap");
         int codeIndex = result.getColumnIndex("code");
         int timeIndex = result.getColumnIndex("time");

         nameTv.setText(result.getString(nameIndex));
         capTv.setText(result.getString(capIndex));
         timeTv.setCurrentHour(result.getInt(timeIndex));
         codeTv.setText(result.getString(codeIndex));

         result.close();
         dbConnector.close();
      }
   } 

   @Override
   public boolean onCreateOptionsMenu(Menu menu) 
   {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_country_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) 
   {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("time", timeTv.getCurrentHour());
            addEditContact.putExtra("code", codeTv.getText());
            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }

   private void deleteContact()
   {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewCountry.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
   }
} 
```

# view_country.xml

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="wrap_content"
android:stretchColumns="1" 
android:layout_margin="5dp">

<TableRow>         
  <TextView 
    style="@style/StyleLabel"
    android:text="@string/name_lbl"/>
 <TextView 
    android:id="@+id/nameText" 
    style="@style/StyleText"/>         
 </TableRow>

 <TableRow>         
 <TextView 
    style="@style/StyleLabel"
    android:text="@string/cap_lbl"/>         
 <TextView 
    android:id="@+id/capText"
    style="@style/StyleText"/>         
 </TableRow>

  <TableRow>       
  <TextView 
    style="@style/StyleLabel"
    android:text="@string/code_lbl"/>                    
 <TextView 
    android:id="@+id/codeText"
    style="@style/StyleText"/>         
 </TableRow>
 <TableRow>         
 <TextView 
    style="@style/StyleLabel"
    android:text="Linked Users"/>         
 <TextView 

    style="@style/StyleText"/>         
 </TableRow>
 <TableRow>         
 <TextView 
    style="@style/StyleLabel"
    android:text="Time Limit"/>         
 <TextView 
    android:id="@+id/timeEdit"
    style="@style/StyleText"/>  

</TableRow>
</TableLayout> 
```

最近的日志：（在 view_country.xml 中将 timeEdit 添加到 TextView 之后）

```
03-22 03:02:27.724: D/Activity(32616): Activity.onPause(), editTextTapSensorList size: 0
03-22 03:02:27.794: W/dalvikvm(32616): threadid=1: thread exiting with uncaught exception (group=0x410889d8)
 03-22 03:02:27.794: E/AndroidRuntime(32616): FATAL EXCEPTION: main
03-22 03:02:27.794: E/AndroidRuntime(32616): java.lang.RuntimeException: Unable to start  activity ComponentInfo{com.nfc.linkingmanager/com.nfc.linkingmanager.ViewCountry}:  java.lang.ClassCastException: android.widget.TextView cannot be cast to  android.widget.TimePicker
03-22 03:02:27.794: E/AndroidRuntime(32616):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1960)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1985)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at android.os.Looper.loop(Looper.java:137)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at android.app.ActivityThread.main(ActivityThread.java:4477)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at java.lang.reflect.Method.invokeNative(Native Method)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at java.lang.reflect.Method.invoke(Method.java:511)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:788)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at dalvik.system.NativeStart.main(Native Method)
03-22 03:02:27.794: E/AndroidRuntime(32616): Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.TimePicker
03-22 03:02:27.794: E/AndroidRuntime(32616):    at com.nfc.linkingmanager.ViewCountry.setUpViews(ViewCountry.java:38)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at com.nfc.linkingmanager.ViewCountry.onCreate(ViewCountry.java:30)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at android.app.Activity.performCreate(Activity.java:4701)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1051)
03-22 03:02:27.794: E/AndroidRuntime(32616):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1924)
03-22 03:02:27.794: E/AndroidRuntime(32616):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:56:05.580

利用

```
timeTv = (TimePicker) findViewById(R.id.timeEdit); 
```

代替

```
timeTv = (TimePicker) findViewById(R.id.timePicker1); 
```

因为您已经定义了 TimePicker id `android:id="@+id/timeEdit"`，但试图获取`timePicker1`当前 Activity 布局中不可用的 ID，或者确保您为 Activity 使用正确的布局

# css - CSS3 动画不适用于 Opera 和 Firefox，但适用于 Chrome 和 Safari

> ID：15560651
> 
> 赞同：0
> 
> 时间：2013-03-22T00:30:02.627
> 
> 标签：css, firefox, animation, opera, vendor-prefix

请帮助我，我看不到错误。我什么都试过了。谢谢人们。你可以在这个链接上看到我的代码。

[http://jsfiddle.net/astrogastro/dFZgn/](http://jsfiddle.net/astrogastro/dFZgn/)

```
 #sun{
    width: 500px;
    height: 500px;
    background: yellow;
    background-image: url('img/sunmap.jpg');
    background-repeat: repeat-x;
    background-position: center;
    border-radius: 50%;
    background-size:1000px;
    animation-name:rotateSun;
    animation-duration: 6s;
    animation-iteration-count: infinite;
    animation-timing-function:linear;
    -o-animation-name:rotateSun;
    -o-animation-duration: 6s;
    -o-animation-iteration-count: infinite;
    -o-animation-timing-function:linear;
   -moz-animation-name:rotateSun;
   -moz-animation-duration: 10s;
   -moz-animation-iteration-count: infinite;
   -moz-animation-timing-function:linear;
   -webkit-animation-name:rotateSun;
   -webkit-animation-duration: 10s;
   -webkit-animation-iteration-count: infinite;
   -webkit-animation-timing-function:linear;
    box-shadow: 0 0 7em #FFFF4D, 0 0 0.5em #FFFF4D, 0 0 0.3em #FFFF4D;
    float: left;
       }

  @keyframes rotateSun{
    from {background-position-x:1px;}
    to {background-position-x:1011px;}
        }

 @-o-keyframes rotateSun{
   from{background-position-x:1px;}
   to{background-position-x:1011px;}
       }

 @-moz-keyframes rotateSun{
   from {background-position-x:1px;}
   to {background-position-x:1011px;}
       }

@-webkit-keyframes rotateSun{
  from {background-position-x: 0px;}
  to {background-position-x:1010px;}
      } 
```

因此，它在 Safari 中运行良好，在 Chrome 中几乎没有冻结，但没关系。我的动画在 Opera 和 Firefox 中完全消失了。任何想法？

[http://www.astrogastro.byethost24.com/](http://www.astrogastro.byethost24.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:11:05.727

没有标准`background-position-x`属性（特别是 Firefox 不支持该非标准功能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:32:17.223

You need to prefix your @keyframes as well as your animation...

# c# - 在 Windows Phone 上保留 HTTPOnly cookie

> ID：15560653
> 
> 赞同：11
> 
> 时间：2013-03-22T00:30:09.090
> 
> 标签：c#, .net, http, windows-phone-8, windows-phone

我有一个通过 HTTPS 向 API 发送用户名和密码的应用程序。API 返回 HTTPOnly cookie。

这意味着 cookie 对代码“不可见”，但仍然存在，并将在后续请求中发送到服务器。

标`Set-Cookie`头从s 中删除，`HttpWebResponse.Headers`并且 cookie 不会出现在`HttpWebResponse.Cookie`s 或`HttpWebRequest.CookieContainer`. 但是，如果使用相同的请求发出后续请求，`HttpWebRequest.CookieContainer`它们将被发送到服务器，但代码无法访问它们。

据我所知，这使得它们无法以任何方式序列化或保存。似乎使这项工作的唯一方法是缓存实际的用户名和密码并每次重新登录。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T07:02:06.320

您必须使用反射来查看存储在 cookie 容器中的 Cookie。

使用类似的东西来看看你有什么，然后你可以尝试子类化以获得对你想要的数据的访问，或者通过将 cookie 存储在内存中，从容器中删除它，然后将其添加为一个普通的饼干

```
 public List<Cookie> GetAllCookies(CookieContainer cc)
    {
        List<Cookie> lstCookies = new List<Cookie>();

        Hashtable table = (Hashtable)cc.GetType().InvokeMember("m_domainTable", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.GetField | System.Reflection.BindingFlags.Instance, null, cc, new object[] { });

        foreach (var pathList in table.Values)
        {
            SortedList lstCookieCol = (SortedList)pathList.GetType().InvokeMember("m_list", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.GetField | System.Reflection.BindingFlags.Instance, null, pathList, new object[] { });
            foreach (CookieCollection colCookies in lstCookieCol.Values)
                foreach (Cookie c in colCookies) lstCookies.Add(c);
        }

        return lstCookies;
    }
    public string ShowAllCookies(CookieContainer cc)
    {
        StringBuilder sb = new StringBuilder();
        List<Cookie> lstCookies = GetAllCookies(cc);
        sb.AppendLine("=========================================================== ");
        sb.AppendLine(lstCookies.Count + " cookies found.");
        sb.AppendLine("=========================================================== ");
        int cpt = 1;
        foreach (Cookie c in lstCookies)
            sb.AppendLine("#" + cpt++ + "> Name: " + c.Name + "\tValue: " + c.Value + "\tDomain: " + c.Domain + "\tPath: " + c.Path + "\tExp: " + c.Expires.ToString());

        return sb.ToString();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-15T15:16:40.890

您也可以尝试使用 TCP 套接字直接获取 cookie。这是我对类似问题的回答：[https ://stackoverflow.com/a/21737087/262036](https://stackoverflow.com/a/21737087/262036)

一旦你得到响应，你就会解析字符串以搜索 cookie 并获取值。之后，您可以在 CookieContainer 中创建一个不是 HttpOnly 的新 cookie，并在下一个请求中使用它。

# java - java - 如何确定一个字母的unicode数字是奇数还是偶数而不检查java中的unicode数字？

> ID：15560654
> 
> 赞同：0
> 
> 时间：2013-03-22T00:30:12.113
> 
> 标签：java

例如，“A”的 unicode 编号是 65，“B”的 unicode 编号是 98。

因此，a、c、e、g 等具有奇数 unicode 数字，b、d、f、h 等具有偶数 unicode 数字。

我将如何检查一个字符是奇数还是偶数？

请记住，我不是高级程序员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:37:21.050

在 Java 中，字符可以被视为整数，完全根据它们的 ASCII 值，因此不需要强制转换或类型转换，您可以简单地`%`将其 mod () 乘以 2，这样就可以得到每 2 除法的余数，因此如果是偶数或奇数

# android - 添加actionbarsherlock

> ID：15560655
> 
> 赞同：0
> 
> 时间：2013-03-22T00:30:21.353
> 
> 标签：android, actionbarsherlock, android-2.3-gingerbread

我正在尝试在 android 2.3.3 上使用[actionBarSherlock](http://actionbarsherlock.com/)做一个项目并且我已经安装了 android 4.0 和 2.3.3

我下载 ActionBarSherlock 并在 Eclipse 工作区中解压缩。

然后打开 Eclipse 转到 File-> New -> Project -> Android Project From Existing Code。

在下一个屏幕中选择 ActionBarSherlock 文件夹，一个 Eclipse 项目列表

但是“库”以较浅的颜色出现，我无法选择它 ![在此处输入图像描述](../Images/c684e71d5ab7da5bbd5bdcb51977e9fb.png)

我究竟做错了什么？非常感谢，对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:33:32.057

检查您是否在工作区中没有任何其他名为“库”的项目。发生在我身上一次。

# ms-access - 所有可能的组合

> ID：15560659
> 
> 赞同：0
> 
> 时间：2013-03-22T00:30:35.377
> 
> 标签：ms-access, vba

我需要获得所有可能组合的列表，而不是排列。

为了确保我有正确的名字，123 和 321 对我来说是同一个东西，应该只列出一次。

下面的代码可以满足我的需要，但我无法将其转换为 MS Access vba。

对不起，我知道这是基本的，它已经被问了一百万次，但我找不到任何适合我的 MS Access。

```
 Sub test_print_nCr()
      print_nCr 7, 3, Range("A1")
    End Sub 
```

2.

```
Public Function print_nCr(n As Integer, r As Integer, p As Range)

  c = 1
  internal_print_nCr n, r, p, 1, 1
End Function 
```

3.

```
Public Function internal_print_nCr(n As Integer, r As Integer, ByVal p As Range, Optional i As Integer, Optional l As Integer) As Integer

  ' n is the number of items we are choosing from
  ' r is the number of items to choose
  ' p is the upper corner of the output range
  ' i is the minimum item we are allowed to pick
  ' l is how many levels we are in to the choosing
  ' c is the complete set we are working on

  If n < 1 Or r > n Or r < 0 Then Err.Raise 1
  If i < 1 Then i = 1
  If l < 1 Then l = 1
  If c < 1 Then c = 1
  If r = 0 Then
    p = 1
    Exit Function
  End If

  Dim x As Integer
  Dim y As Integer

  For x = i To n - r + 1
    If r = 1 Then
      If c > 1 Then
        For y = 0 To l - 2
          If p.Offset(c - 1, y) = "" Then p.Offset(c - 1, y) = p.Offset(c - 2, y)
        Next
      End If
      p.Offset(c - 1, l - 1) = x
      c = c + 1
    Else
      p.Offset(c - 1, l - 1) = x
      internal_print_nCr n, r - 1, p, x + 1, l + 1
    End If
  Next

End Function 
```

再次感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:19:31.680

I am not sure if this is the best method to do this, but I would use a kind of binary representation. For instance, consider the word "boy" with the number of letters n=3\. This word has three letters, so you can use something like this:

001 = y, 010 = o, 011 = oy, 100 = b, 101 = by, 110 = bo, 111 = boy.

The left side can be done with a loop from i=1 to power(2,n)-1 and transforming i to a number in the binary basis. So, the only thing you have to do is to use the non null positions to build your combinations.

Probably there is something more interesting than this in Knuth.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:45:48.043

我在这里找到了这段代码，它给了我我需要的东西。您只需要创建一个包含 1-100 数字的表格。以下链接中的说明

[在此处输入链接描述](http://www.tek-tips.com/viewthread.cfm?qid=1582748)

谢谢大家

```
Public Sub buildquery(strN As String, K As Integer)
    Dim qd As DAO.QueryDef
    Dim intI As Integer
    Dim strsql As String
    Dim strSelect As String
    Dim strFrom As String
    Dim strWhere As String

    Set qd = CurrentDb.QueryDefs("QN")
    qd.sql = "SELECT N FROM tblN WHERE N IN (" & strN & ")"
    Set qd = Nothing
    strSelect = "SELECT QN.N "
    strFrom = "FROM QN "
    strWhere = "WHERE QN_1.N > QN.N "
    For intI = 1 To K - 1
        strSelect = strSelect & ", QN_" & intI & ".N AS N" & intI & " "
        strFrom = strFrom & ", QN AS QN_" & intI & " "
        If intI < K - 1 Then
            strWhere = strWhere & " AND QN_" & intI + 1 & ".N > QN_" & intI & ".N "
        End If
    Next
    strsql = strSelect & " INTO tblCombinations " & strFrom & strWhere
    DoCmd.SetWarnings False
    DoCmd.RunSQL strsql
    DoCmd.SetWarnings True
End Sub 
```

然后测试

```
Public Sub testbuildquery()
  buildquery "1,2,3,4,5,6,7", 3
End Sub 
```

# jquery - JQuery、Kinetic.js 和 MSPointer 事件（如何添加事件监听器，或者 on() 会起作用吗？）

> ID：15560661
> 
> 赞同：2
> 
> 时间：2013-03-22T00:30:46.707
> 
> 标签：jquery, touch, kineticjs, internet-explorer-10

我正在为 Win8（特别是 Surface 平板电脑）上的触摸事件的小画布元素进行故障排除。显然它适用于鼠标或触控笔，但不适用于触摸。我无法使用 Win8 触摸设备进行测试，因此我正在尝试对此进行研究，但没有提出任何明确的建议。

这是实际页面（使用临时 URL，因此该网站不会在 Stack Overflow 档案中臭名昭著，哈哈）：[http ://www.urlgone.com/e8e1c2/](http://www.urlgone.com/e8e1c2/)

最简单的修复似乎是将“MSPointerDown”添加到 jQuery on() 函数中，但客户端表示行为没有变化。

我想我的问题是，jQuery 是否将“MSPointerDown”识别为事件？如果是这样，那么我的问题可能不是函数触发器，而是其他问题......

或者它可能是针对一个画布对象？我正在使用 Kinetic.js 库，这是我第一次使用画布动画。

编辑：我想我在这里发布了错误的代码，所以这就是我现在的位置。

所以，获取触摸/点击/指针事件的对象是这样的：

```
 var triangle = new Kinetic.Image({
            image: images[key],
            x: tri.x,
            y: tri.y,
            detectionType: "pixel"
        }); 
```

这就是我试图触发它的方式。对于正常的“点击”事件，我看到使用 jQuery 的 .on() 绑定它可以正常工作，但是当我尝试在三角形上使用*addEventListener*正常点击。

```
 triangle.on("mousedown touchstart click", activateTriangle);
            /*
            // I popped this in here to see if it would work, assuming that if it 
            // doesn't work for clicks, it won't work for pointer events.
            // This gives me the error, 
            // Uncaught TypeError: Object #<Object> has no method 'addEventListener' 
            triangle.addEventListener('click',function(){
                window.console && console.log('click event');
            });
            // And here's what I get for trying to iterate through it
            // Uncaught TypeError: Object #<Object> has no method 'addEventListener' wealth-management.php:305
            //  (anonymous function) wealth-management.php:305
            //  e.extend.each jquery-1.7.2.min.js:2
            //  e.fn.e.each jquery-1.7.2.min.js:2
            //  (anonymous function) wealth-management.php:304
            //  initStage wealth-management.php:318
            //  images.(anonymous function).onload
            $(triangle).each(function(){
                this.addEventListener('click',function(){
                    window.console && console.log('hi');
                });
            });
            */  
        /* Try for IE10 Touch */                
        if (window.navigator.msPointerEnabled) {
                window.console && console.log('msPointerEnabled');
                // click to correct info window
                //triangle.on("MSPointerDown",activateTriangle); 
                triangle.addEventListener("MSPointerDown", activateTriangle, false);
        } 
```

如果我可以让 addEventListener 使用“click”，我可以在没有 Win8 触摸设备的情况下进行测试，我假设带有“MSPointerDown”的 addEventListener 也可以工作。那个听起来是对的吗？如何将 eventListener 附加到 Kinetic.js 对象？

***编辑***

我无法让它工作，所以我有一个画布元素的图像映射，它在浏览器检查 IE8 或“MSPointerDown”后被替换。因此，具有讽刺意味的是，canvas 元素可以在 IE9 中工作，但不能在 IE10 中工作。那好吧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:48:41.613

我了解您正在使用 jQuery。我在尝试捕获输入事件坐标时遇到了类似的问题。jQuery 和事件的问题在于它从系统中合成和清理了自己的事件对象，这在大多数情况下是可以的。然而，最初编写 jQuery 时没有触摸事件，因此它没有捕获它们的代码。

MSPointer 事件确实可以通过，但它生成的 $evt 结构中没有坐标信息。

您可以在事件侦听器中做的一件简单的事情是使用 $evt.originalEvent ，其中包含传递给 jQuery 的原始事件的数据。

在微软担心的地方，他们像往常一样走自己的路，将事件称为“MSPointerDown”、MSPointerMove 等……你会为每个手指获得一个事件 WHATWG 方法是在事件结构中使用一系列接触点。

# php - PHP 回显消息

> ID：15560670
> 
> 赞同：0
> 
> 时间：2013-03-22T00:31:43.293
> 
> 标签：php

我正在创建一个在线商店网站，目前我正在使用正在运行的 Basket。我正在尝试添加一个功能，一旦用户单击添加按钮确认该项目确实已添加到购物篮中，该功能将回显一条消息。

我创建了一个简单的 if 语句，我认为应该很好地处理这个问题，但什么也没发生。没有回显消息。

代码：

```
if (isset($_GET['add'])){
    $quantity = mysql_query('SELECT product_id, product_qua FROM products WHERE product_id='.$_GET['add']);
    while($quantity_row = mysql_fetch_assoc($quantity)){
        if($quantity_row['product_qua'] !=$_SESSION['cart_'.$_GET['add']]){
            $_SESSION['cart_'.$_GET['add']]+='1'; 
        }
    }
}

if (isset($_GET['add'])){
    $basketMessage = "Item Sucesfully Added To Your Basket";
    echo $basketMessage;
} 
```

有什么建议么...？

回答：

好的忘记上面的代码............

belov 代码是一个文件的代码，其中列出了产品，然后链接到 cart.php 上面的代码片段：

代码：

```
while($get_row = mysql_fetch_assoc($get)){
    ?>
        <table id='display'>
        <tr><td><?php echo "<img src=$get_row[$product_image] class='grow'>" ?></td></tr>

        <tr>
            <th></th>
            <th><strong>Avalible</strong></th>
            <th><strong>Price</strong></th>
            <th><strong>Description</strong></th>
        </tr>

        <tr>
        <td width='290px'><?php echo "$get_row[$product_name]" ?></td>
        <td width='290px'><?php echo "$get_row[$product_qua]" ?></td>
        <td width='290px'><?php echo "&pound $get_row[$product_price]" ?></td>
        <td width='290px'><?php echo "$get_row[$product_des]" ?></td>

        </tr>
        <tr>
        <td><?php echo '<a href="cart.php?add='.$get_row['product_id'].'" onclick="return basketMessage()">Add</a>';?></td>
        </tr>
        </table>

    <?php
        }
    }

    ?>

<script>    
function basketMessage(){
      var confirmed = confirm("Add this item to Basket ?");
      return confirmed;
}
</script> 
```

好的，你们都可以从代码中看到我正在循环产品数据库并列出一些使用添加按钮分配的项目.....现在我在这个按钮上添加了一些 javascript 来通知用户这是否是他们想要的项目添加到他们的购物篮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:50:15.140

如果不重新发送整个页面，这在 php 中是不可能的。您可以使用 javascript 对某些按钮单击事件做出反应。

结合 jQuery，这会产生类似这样的结果

```
<div id="messagefield"></div>
<button id="buttonid">click me!</button>
<script>
    $("#buttonid").click(function() {
        $("#messagefield").html("The button was clicked");
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:51:37.857

正如@patashu 所说，仅使用 PHP 是不可能的。您应该添加 javascript 来处理通过 AJAX 将项目添加到您的购物车，然后侦听您回显的响应，如果成功，则显示成功消息。

这可能是一个起点：

html:

```
<button class="mybutton">add to cart</button> 
```

javascript:

```
 <script type="text/javascript">
    $(document).ready(function(){
      $('.mybutton').click(function(){
      $.ajax({
        url:"yourscript.php", 
        data: {stuff: 'your cart data', productid: 134}
        success: function(data){
          alert("your success message'); 
        }
      }); 
    }); 

    }); 
    </script> 
```

正在侦听您的 ajax 调用的 PHP 函数：

```
//does stuff 
$basketMessage = "Item Sucesfully Added To Your Basket";
echo json_encode($basketMessage); 
```

显然这并不完整......这实际上只是一个起点/您应该做什么的一般概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T00:46:58.063

首先，您在这一行有一个错误：

```
$quantity = mysql_query('SELECT product_id, product_qua FROM products WHERE product_id='.$_GET['add']); 
```

如果必须

```
$add = $_GET['add'];
$quantity = mysql_query("SELECT product_id, product_qua FROM products WHERE product_id='$add'"); 
```

或者

```
$quantity = mysql_query("SELECT product_id, product_qua FROM products WHERE product_id='".$_GET['add']."'"); 
```

而且您不必再使用 mysql_* ，因为已弃用。您可以使用[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)或[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-22T00:48:02.570

为什么要分两个阶段做？试试这个：

```
if (isset($_GET['add'])){
$quantity = mysql_query('SELECT product_id, product_qua FROM products WHERE product_id='.$_GET['add']);
while($quantity_row = mysql_fetch_assoc($quantity)){
                if($quantity_row['product_qua'] !=$_SESSION['cart_'.$_GET['add']]){
                    $_SESSION['cart_'.$_GET['add']]+='1'; 
  }
}
$basketMessage = "Item Sucesfully Added To Your Basket";
echo $basketMessage;
} 
```

# c# - How does it work to use "Response.Redirect" from a Razor Web Page When I Haven't Instantiated "Response"?

> ID：15560671
> 
> 赞同：3
> 
> 时间：2013-03-22T00:31:48.327
> 
> 标签：c#, asp.net, asp.net-webpages, razor-2

My limited knowledge concerning programming entails that in order to use a non-static method, you need to first create an instance of the class. In order to use static methods, you simply use the Class name with the method name. I'm doing the WebPages tutorials for on asp.net and I came across the following code which confused me:

```
@{
    var title = "";
    var genre = "";
    var year = "";

    if(IsPost){
        title = Request.Form["title"];
        genre = Request.Form["genre"];
        year = Request.Form["year"];

        var db = Database.Open("WebPagesMovies");
        var insertCommand = "INSERT INTO Movies (Title, Genre, Year) Values(@0, @1, @2)";
        db.Execute(insertCommand, title, genre, year);
        Response.Redirect("~/Movies");   
    }
} 
```

I looked up the Redirect method of the Response class and it wasn't listed as static, which I'd assume to mean that it is an instance method. How am I able to use it without first creating an instance of the Response class?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T01:26:48.963

Razor 是 ASP.Net MVC 的视图引擎插件。

它为您做了很多事情，例如为您的页面视图生成动态代码。这意味着每个页面都有一个底层[WebViewPage](http://msdn.microsoft.com/en-us/library/system.web.mvc.webviewpage%28v=vs.98%29.aspx)`@{ ... }`类，Razor 会自动从这些页面继承并与您在这些部分中拥有的代码合并。

这使您可以访问有助于与浏览器通信的几个属性，例如[Response](http://msdn.microsoft.com/en-us/library/system.web.webpages.webpagerenderingbase.response%28v=vs.98%29.aspx)、[IsPost](http://msdn.microsoft.com/en-us/library/system.web.webpages.webpagerenderingbase.ispost%28v=vs.98%29.aspx)、[Request](http://msdn.microsoft.com/en-us/library/system.web.webpages.webpagerenderingbase.request%28v=vs.98%29.aspx)等。我选择这三个只是因为它们在您发布的代码中使用。

因此，例如，与其编写代码，不如`MyPage.Response.Write("test!");`直接引用`Response`页面类的属性。例：`Response.Write("test!");`

Razor 足够聪明，知道这`Response`是底层类的属性并使用它。

* * *

该`Response`属性是一个类型的对象`HttpResponse`。响应对象具有将数据（例如 html）写回客户端（浏览器）所需的一切。

该`Request`属性是一种类型的对象，`HttpRequest`可让您访问从客户端发送到服务器的信息。例如`Request.Form`是 html 输入控件数据的集合（文本框、收音机、下拉列表...）。

`IsPost`很简单`boolean`，它告诉您页面是回发还是初始获取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T00:32:57.710

The Response instance is created automatically by the webpages framework.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T00:34:32.513

您正在使用 razor，它是一个视图引擎。对于每个视图，都会生成一个新类，该类派生自一个基类。该基类具有某些实例属性和方法，例如`Response`，允许您在视图中使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-05T03:15:54.933

```
Response.Redirect(@href("~/Movies")); 
```

# yii - YII 只存储最后一个 flash？

> ID：15560672
> 
> 赞同：4
> 
> 时间：2013-03-22T00:31:51.780
> 
> 标签：yii

我有以下代码：

```
Yii::app()->user->setFlash('error', "Data1 failed!");
Yii::app()->user->setFlash('error', "Data2 failed!");
Yii::app()->user->setFlash('error', "Data3 failed!");

$flashes = Yii::app()->user->getFlashes();
if (sizeof($flashes) > 0 ) {
  print '<div id="flashes" style="margin: 5px; ">';
  foreach($flashes as $key => $message) {
    print '<div class="flash-' . $key . '">' . $message . "</div>\n";
  }
  print '</div>';
} 
```

无论我做什么，它总是只打印“Data3 failed！”。为什么它用最后一个覆盖闪存，而不是将所有闪存添加到数组中？

我已经在我的配置中尝试了这个，但没有运气：

```
'user' => array(
  'allowAutoLogin' => true,
  'class' => 'WebUser',
  'autoUpdateFlash' => false, 
), 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T05:11:45.277

这是预期的行为。Yii flash 消息是一个键值存储，这意味着对于每个键（比如错误）存储一个值（消息）。

使用您当前的代码，您将在每次调用时用新消息**覆盖**key的值。`error``setFlash`

您可以（*伪*）将您的消息附加到同一个键，而不是覆盖它们：

```
Yii::app()->user->setFlash('error', "Data1 failed!");
Yii::app()->user->setFlash('error',
    Yii::app()->user->getFlash('error', '')." Data2 failed!");
Yii::app()->user->setFlash('error',
    Yii::app()->user->getFlash('error', '')." Data3 failed!"); 
```

从上面可以看出，[`getFlash`](http://www.yiiframework.com/doc/api/1.1/CWebUser#getFlash-detail "http://www.yiiframework.com/doc/api/1.1/CWebUser#getFlash-detail")从闪存存储中获取一条消息。

# html - Mailto doesn't work on my html

> ID：15560674
> 
> 赞同：0
> 
> 时间：2013-03-22T00:31:58.730
> 
> 标签：html

I'm working on my portfolio and i've added an email with mailto like this

```
<a id="contact-email" href="mailto:example@gmail.com"><h3>Email: example@gmail.com</h3></a> 
```

It works if i paste it inside www.w3schools.com "try it yourself" but when i'm trying to test it on my webpage it doesn't work

What can cause this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:40:01.383

好的，我发现了问题，显然它在本地工作时不起作用，当我将它上传到我的网站上时它工作正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:34:45.843

`a`标签应该是`h3`这样的：

```
<h3><a id="contact-email" href="mailto:example@gmail.com">Email : example@gamil.com</a></h3> 
```

# configuration - 我可以删除默认的 Apache2 站点吗？

> ID：15560675
> 
> 赞同：-1
> 
> 时间：2013-03-22T00:32:03.613
> 
> 标签：configuration, apache2, virtualhost

我正在设置我的第一台 Apache2 服务器并且遇到了一些问题。我想要几个由不同域指向的虚拟主机，我可以正常工作。但是，当您简单地输入服务器 IP 地址时，它会显示第一个声明的虚拟主机（它用于显示默认的 apache2 页面，但我运行了：

```
$ a2dissite default 
```

现在 ip 地址显示第一个声明的虚拟主机。是否可以强制 IP 地址不显示任何内容，而域显示其各自的文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:03:13.140

我相信我通过重新启用默认值得到了预期的结果：

```
$ a2ensite default 
```

以及通过将站点可用下的默认文件中的“索引”更改为“-索引”来禁用目录索引。它现在抛出 403 Forbidden 错误。

# sql - 如何在oracle sql中使用另一个变量定义一个变量

> ID：15560676
> 
> 赞同：0
> 
> 时间：2013-03-22T00:32:06.643
> 
> 标签：sql, oracle, variables, plsql

我正在尝试用另一个变量定义一个变量。目的是在运行时替换变量中的值。

我不确定我是在问正确的问题还是在陈述正确的例子。

```
DECLARE param1 VARCHAR(10);
DECLARE param2 VARCHAR(10);
DECLATE tempVar VARCHAR(1):= 'A';
DECLARE query VARCHAR(200) := 'select * from tmp_table where col1 = <variable>';

BEGIN
    IF tempVar = 'A' THEN
     -- EXECUTE IMMEDIATE query using param 1;
    ELSE
     -- EXECUTE IMMEDIATE query using param 2;
    END IF;
  END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T01:08:57.210

```
DECLARE 
  type tmp_table_arr is table of tmp_table%type;
  l_temps tmp_tabe_arr;

  param1 VARCHAR(10);
  param2 VARCHAR(10);
  tempVar VARCHAR(1):= 'A';
  query VARCHAR(200) := 'select * from tmp_table where col1 = :val';

BEGIN
  IF tempVar = 'A' THEN
    EXECUTE IMMEDIATE query 
       BULK COLLECT INTO l_temps
      using param1;
  ELSE
    EXECUTE IMMEDIATE query 
       BULK COLLECT INTO l_temps
      using param2;
  END IF;
END; 
```

在语法上是有效的，如果`tmp_table`存在并且有 column则可以工作`col1`。但是，在这种情况下没有理由使用动态 SQL。也不需要两条不同的 SQL 语句

```
DECLARE 
  param1 VARCHAR(10);
  param2 VARCHAR(10);
  tempVar VARCHAR(1):= 'A';
BEGIN
  FOR i IN (SELECT *
              FROM tmp_table
             WHERE col1 = (CASE WHEN tempVar = 'A'
                                THEN param1
                                ELSE param2
                            END))
  LOOP
    <<do something>>
  END LOOP;
END; 
```

# php - PHP condition for matching exact characters string

> ID：15560677
> 
> 赞同：-2
> 
> 时间：2013-03-22T00:32:16.673
> 
> 标签：php

I have the following code which makes sure the text entered in the "captcha" text box is at least 3 characters long or else an error is received. How do i set it so the text entered has to be "abcd" or else an error occurs?

```
 if(strlen($_POST['captcha']) < 3) {
    $error_message .= 'Please ensure the captcha entered is at least 3 characters long'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:33:58.523

我假设您也想检查大小写，在这种情况下您可以：

```
if (strcmp($_POST['captcha'], "abcd"))
  $error_message .= "Your captcha does not match!"; 
```

# netbeans - Netbeans (7.0) HTML 'dynamic' code templates

> ID：15560683
> 
> 赞同：0
> 
> 时间：2013-03-22T00:32:43.173
> 
> 标签：netbeans, netbeans-7

I know how to define static, standard code templates in NetBeans and I am wondering whether it's possible to define more customized and dynamic templates.

For example, when i type `div.className` to generate me a HTML `<div>` element with the class I specify.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T17:15:54.757

启动 netbeans 并转到：`Tools->Plugins`菜单、`Available Plugins`选项卡，然后搜索`Zen Coding`命中安装。

输入：`div.className`并点击：`ctrl+alt+n`获得：`<div class="className">`

您会注意到新`Edit->Zen Coding`菜单。安装和使用：[https ://github.com/lorenzos/ZenCodingNetBeansPlugin#readme](https://github.com/lorenzos/ZenCodingNetBeansPlugin#readme)

阅读更多关于 Zen Coding 的信息：[http ://code.google.com/p/zen-coding/](http://code.google.com/p/zen-coding/)

# dll - 识别程序集 dll 方法调用

> ID：15560687
> 
> 赞同：0
> 
> 时间：2013-03-22T00:33:09.473
> 
> 标签：dll, odbc, .net-assembly

我有一个有问题的 win32 程序，我只有它的可执行文件。该程序使用 ODBC32.dll。我试图弄清楚这个程序如何设置它的 ODBC 连接。更具体地说，它是否定义了命令执行的超时。

通过检查程序集来找到这些信息似乎是合理的。任何人都知道在程序集文件中隔离对 dll 的调用的任何技术吗？

如果有帮助，我还有 exe 的 pdb（调试符号）。

# android - 如何在 Android 中构建多列 ListView 并且用户可以滚动查看不可见的列？

> ID：15560688
> 
> 赞同：2
> 
> 时间：2013-03-22T00:33:17.823
> 
> 标签：android, android-layout, listview

我想构建一个包含多列 (20) 和多行 (100) 的表格，因此由于屏幕的宽度，某些列将是不可见的。

我为此选择使用 ListView，但是如何让用户看到不可见的列，我希望表格修复第一列，并且用户可以水平滚动此列表视图中的其他列。

有没有第三个库呢？我怎样才能做到这一点？

# git - VPN 问题：CURL 有效，WGET 有效，Git 无效

> ID：15560692
> 
> 赞同：0
> 
> 时间：2013-03-22T00:33:39.743
> 
> 标签：git, curl, wget, vpn

我正在使用 Intranet Suse Linux 服务器并尝试安装我们的 Ruby on Rails 应用程序。现在最大的障碍是让服务器“git pull”我们的仓库。

为了让 curl 和 wget 工作，我必须设置这样的代理：

```
export https_proxy=https://example.com:911/

export http_proxy=http://example.com:911/ 
```

伟大的！正在下载文件，正在安装 gem，我正在路上。但是，当我通过 http 或 ssh 使用 git 时，它会失败。

Git 使用什么协议？这些有关系吗？想法？

# c++ - 哪个 boost 文件包含 libstdcpp3.hpp？

> ID：15560693
> 
> 赞同：1
> 
> 时间：2013-03-22T00:33:42.367
> 
> 标签：c++, multithreading, gcc, boost, interix

当我在代码中包含 boost 时，我从 gcc v3.4.6 收到预编译器错误，抱怨 Boost 在 Interix SUA v3.5 shell 中构建时不支持线程。`boost/config/stdlib/libstdcpp3.hpp`通过包含设置标志的内容来消除此错误`BOOST_HAS_THREADS`。在我的程序中手动包含这个文件似乎很草率。boost 中的哪个文件负责包含`libstdcpp3.hpp`？

# ssms - SSMS - 有没有办法突出显示自上次保存以来的更改？

> ID：15560696
> 
> 赞同：0
> 
> 时间：2013-03-22T00:34:07.570
> 
> 标签：ssms

一个例子：

*   如果我有一些代码，例如`SELECT * FROM Table1`，然后我保存了脚本。
*   然后我将其更改为：
    *   `SELECT * FROM Table2`
    *   `SELECT * FROM View1`
    *   `SELECT Column1 FROM Table1`
*   那么有没有办法在 SSMS 中突出显示自上次保存以来脚本中发生变化的部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T01:34:24.220

据我所知，没有什么可以突出脚本本身的部分内容。

SSMS 中最接近的东西是：

> *   工具
> *   选项...
> *   环境
>     *   字体和颜色
>         *   显示项目：
>             *   保存后跟踪更改
>             *   保存前跟踪更改

脚本页面左侧的垂直条已经存在。我刚刚更改了颜色以使其更明显，以便更好地使用它。

不是我想要的，但它就足够了。

# objective-c - userInteractionEnabled = NO 并且仍然接收手势

> ID：15560697
> 
> 赞同：2
> 
> 时间：2013-03-22T00:34:09.573
> 
> 标签：objective-c, gestures, collectionview

在我的故事板中，我有一个包含自定义 UIView 的自定义 UICollectionViewCell 类的 collectionView。collectionView 有一个点击手势，我的目标是在特定规则适用时启用/禁用点击我尝试将 NO 分配给特定单元格的 userInteractionEnabled 属性和其中的视图，但手势仍然会调用。

有一个绕过：在点击手势动作中编写一个 if 语句来检查规则是否适用，如果不执行任何操作 --> 这个解决方案有效，但它的绕过性能很差，

这样做的正确方法是什么？

# android - 如何将 WebView 放置在带有 Action Bar Android 的选项卡中

> ID：15560698
> 
> 赞同：1
> 
> 时间：2013-03-22T00:34:14.230
> 
> 标签：android, android-actionbar

我需要有关此代码的帮助，我需要添加 webview 代码但他无法运行，我尝试更改主要活动和 fragmenttab1 但没有。

我使用操作栏，这对我来说很难，因为我是这种方法的新手。

有知道怎么做的吗？

我的**主要活动**的代码是这样的：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Obtenemos una referencia a la actionbar
    ActionBar abar = getActionBar();

        //Establecemos el modo de navegación por pestañas
    abar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    //Ocultamos el título de la actividad
    //abar.setDisplayShowTitleEnabled(false);

    //Creamos las pestañas
    ActionBar.Tab tab1 = abar.newTab().setText("Tab1");
        ActionBar.Tab tab2 = abar.newTab().setText("Map");

        //Creamos los fragments de cada pestaña
        Fragment tab1frag = new Tab1Fragment();
        Fragment tab2frag = new Tab2Fragment();

        //Asociamos los listener a las pestañas
        tab1.setTabListener(new MiTabListener(tab1frag));
        tab2.setTabListener(new MiTabListener(tab2frag));

        //Añadimos las pestañas a la action bar
        abar.addTab(tab1);
        abar.addTab(tab2);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.menu_new:
            Log.i("ActionBar", "New!");
            return true;
        case R.id.menu_save:
            Log.i("ActionBar", "Save!");;
            return true;
        case R.id.menu_settings:
            Log.i("ActionBar", "Settings!");;
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}} 
```

我的**TabFragment1**的代码是这样的：

```
public class Tab1Fragment extends Fragment {
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {
    return inflater.inflate(R.layout.fragment1, container, false);
}} 
```

请帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:04:21.517

```
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
super.onViewCreated(view, savedInstanceState);

 /**Fragments can initialize views from the xml layout file here or you could 
  * do it in the onCreateView() method with  
  * 
  * View fragmentView = inflater.inflate(R.layout.fragment1, container, false);
  * mVebView = (WebView) fragmentView.findViewById(R.id.webview);
  * return fragmentView; 
  *
  * Activities initialize views in the OnCreate() method
  */

mWebView = (WebView) view.findViewById(R.id.webview);
mWebView.loadUrl("http://stackoverflow.com/questions/15560698/how-place-webview-in-tab-with-action-bar-android");

} 
```

# javascript - 为jquery设置一个全局变量以跨多个页面进行

> ID：15560709
> 
> 赞同：0
> 
> 时间：2013-03-22T00:35:04.743
> 
> 标签：javascript, jquery, menu

好的，这就是我需要做的。不确定该怎么做。我有一个运行 index.php 的 php 页面，它是我的主页，它加载并引入 menu.php 和其他一些子文件。所以这是我的问题。我有一个用 java 编写的下拉菜单，然后我还链接了一个 Jquery 脚本来生成页面的标题。发生的事情是，当我单击菜单中的链接时，它会显示标题一分钟然后消失，因为它进入了一个新页面。如果我添加一个 return false 它会停止并起作用，但当然不会将您转发到新页面。所以这是我的问题。我需要设置一个变量 im 假设或其他东西来保存单击的值并将其带到新页面，我不知道该怎么做。这是我的菜单代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

  <link rel="stylesheet" type="text/css" href="main.css" />
  <link rel="stylesheet" type="text/css" href="css/default.css">
  <link rel="stylesheet" type="text/css" href="css/css-slider.css">
  <script type="text/javascript" src="Scripts/jquery-1.7.1.js"></script>
    <script src="css/active.js" type="text/javascript">
  </script> 
    <script src="css/drop1.js" type="text/javascript">
  </script> 

  </script>

<!--Main Navigation Start -->

  <div id="nav" class="nav">
  <ul id="sddm">
  <li><a class="navigation" value="home" id="Home" href="index.php" onMouseOver="mopen('m1')" onMouseOut="mclosetime()">Home</a>
  <div id="m1" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li><a class="navigation" id="Station History" href="station_history.php" onMouseOver="mopen('m2')" onMouseOut="mclosetime()">Station History</a>
  <div id="m2" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li>
  <a class="navigation" id="Apparatus" href="Apparatus.php" onMouseOver="mopen('m3')" onMouseOut="mclosetime()">Apparatus</a>
  <div id="m3" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  <a class="navigation" id="Truck History" href="truck_history.php">Truck History</a> 
  </div>
  </li>
  <li>
  <a class="navigation" id="Photo Gallery" href="photos.php" onMouseOver="mopen('m4')" onMouseOut="mclosetime()">Photos</a>
  <div id="m4" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li>
  <a class="navigation" id="News & Events" href="news_events.php" onMouseOver="mopen('m5')" onMouseOut="mclosetime()">News & Events</a>
  <div id="m5" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li>
  <a class="navigation" id="Station Members" href="Station_members.php" onMouseOver="mopen('m6')" onMouseOut="mclosetime()">Station Members</a>
  <div id="m6" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li>
  <a class="navigation" id="Education" href="education.php" onMouseOver="mopen('m7')" onMouseOut="mclosetime()">Education</a>
  <div id="m7" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  <a class="navigation" id="Station Tours" href="">Station Tours</a>
  <a class="navigation" id="Fire Extinguisher" href="">Fire Extinguisher</a>
  <a class="navigation" id="First Aid & CPR" href="">First Aid & CPR</a>
  <a class="navigation" id="Smoke Alarms" href="">Smoke Alarms</a> 
  </div>
  </li>
  <li>
  <a class="navigation" id="Contact Us" href="contactus.php" onMouseOver="mopen('m8')" onMouseOut="mclosetime()">Contact Us</a>
  <div id="m8" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> </div>
  </li>
  </ul>
  </div>
  </div>

</body>
</html>

<!DOCTYPE html> 
```

这是我的jQuery

```
//navigation 

$(document).ready(function () {

    //var mname = ($(this).attr('id'));
    $("a.navigation").click(function () {
        //alert($(this).attr('id'));
        $("span#title").html($(this).attr('id'));

    })
}); 
```

这是我的下拉菜单

```
 <!--
  var timeout         = 500;
  var closetimer    = 0;
  var ddmenuitem      = 0;

// open hidden layer
function mopen(id)
{ 
  // cancel close timer
  mcancelclosetime();

  // close old layer
  if(ddmenuitem) ddmenuitem.style.visibility = 'hidden';

  // get new layer and show it
  ddmenuitem = document.getElementById(id);
  ddmenuitem.style.visibility = 'visible';

}
// close showed layer
function mclose()
{
  if(ddmenuitem) ddmenuitem.style.visibility = 'hidden';
}

// go close timer
function mclosetime()
{
  closetimer = window.setTimeout(mclose, timeout);
}

// cancel close timer
function mcancelclosetime()
{
  if(closetimer)
  {
    window.clearTimeout(closetimer);
    closetimer = null;
  }
}

// close layer when click-out
document.onclick = mclose; 
// --> 
```

由于某种原因，我完全不知道如何做到这一点，并且非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:56:26.307

全局变量仅在给定页面的生命周期内持续存在，因此它们不会跨越多个页面。因此，要将数据从一个页面传递到另一个页面，您必须将数据存储在浏览器或服务器中的某个位置，以便后续页面可以检索它。

您在浏览器中存储或传递数据的选项是：

1.  将数据存储在 cookie 中，然后在后续页面上从 cookie 中检索它。
2.  将数据存储在本地存储中，然后在后续页面上从本地存储中检索。
3.  转到下一页时，将要访问的 URL 中的数据编码（作为查询参数或哈希值，然后在下一页中使用 javascript 从 URL 中检索该数据。

选项 1 和 2 最适合需要访问大量页面的数据。所有浏览器的所有版本都支持 Cookie（尽管有时用户会阻止它们）。本地存储是一个更简洁的 API，在所有现代浏览器中都受支持，但在某些较旧的浏览器中不受支持。每个域可以存储的数据量在 cookie 中比本地存储更受限制。

请记住，选项 1 和 2 仅适用于同一域中的页面。无法在存储数据的域之外访问 Cookie 和本地存储。

有关读取/写入 cookie 的信息，请参阅[MDN 上的这篇文章。](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)

有关读/写本地存储的信息，请参阅[MDN 上的这篇文章](https://developer.mozilla.org/en-US/docs/DOM/Storage)，包括在本地存储不可用时回退到 cookie 的兼容性库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:42:22.567

使用饼干！这是一些Javascript：

```
function setCookie(c_name, value, exdays) {
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
    document.cookie = c_name + "=" + c_value;
}
function getCookie(c_name){
    var i,x,y,ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++)
    {
      x = ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
      y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
      x = x.replace(/^\s+|\s+$/g,"");
      if (x == c_name)
        {
        return unescape(y);
        }
    } 
```

}

# c# - 将双精度列表作为字符串发送到数据库

> ID：15560711
> 
> 赞同：0
> 
> 时间：2013-03-22T00:35:09.690
> 
> 标签：c#

只是对下面的代码很困惑。

我有像下面这样的课

```
public class Counter
{       
    public Double NormalCounter { get; set; }
    public Double SATCounter { get; set; }
    public Double SUNCounter { get; set; }

} 
```

在我的主课中，我有方法做一些计算来填充计数器

```
Counter CountHrs = GetBookedHours(resourceBkg, PrevEvent);
var lstExpResult = new List<string> {CountHrs.NormalCounter.ToString(),
                                     CountHrs.SATCounter.ToString(), 
                                     CountHrs.SUNCounter.ToString()};
UpdateBooking(bookingSesid, lstExpResult); 
```

假设我在计数器中有如下值

> 正常计数器 =4
> 
> SAT计数器=10
> 
> SUN计数器=6

我正在尝试添加到字符串列表并更新数据库。这是正确的方法吗？或我有任何其他选择。

我的更新预订方法如下所示，以提供清晰的思路。

```
 public static bool UpdateBooking(string BookingSesid,List<string>HoursByRate)
    {
         SchedwinEntities db = new SchedwinEntities();
         string value = string.Empty;
         for (int i = 0; i < 5; i++)
         {
             string str = " ";
             if (i < HoursByRate.Count())
             {
                 str = HoursByRate[i];
                 value += str + ((char)13).ToString() + ((char)10).ToString();
             }
         }
            var query = 
            from SEVTs in db.SEVTs
            where
            SEVTs.SESID.Trim() == BookingSesid//SESID
            select SEVTs;
        foreach (var SEVTs in query)
        {
            SEVTs.USER3 = value;//value
        }
        try
        {
            db.SaveChanges();
            return true;
        }
        catch (UpdateException ex)
        {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T00:39:50.243

与其传递代表 s 的字符串列表，不如传递一个`double`键值对列表，从中构造参数化语句，并使用键值对列表绑定参数值，如下所示：

```
class SqlParamBinding {
    string Name {get;set;}
    object Value {get;set;} 
}
var lstExpResult = new List<SqlParamBinding> {
    new SqlParamBinding { Name = "NormalCounter", Value = CountHrs.NormalCounter}
,   new SqlParamBinding { Name = "SATCounter", Value = CountHrs.SATCounter}
,   new SqlParamBinding { Name = "SUNCounter", Value = CountHrs.SUNCounter}
};
UpdateBooking(bookingSesid, lstExpResult); 
```

现在`lstExpResult`将名称与值分开，您的`UpdateBooking`代码可以将 SQL 表达式格式化为

```
WHERE NormalCounter=@NormalCounter AND SATCounter=@SATCounter AND ... 
```

然后将`@NormalCounter`、`@SATCounter`和绑定`@SUNCounter`到列表中传递的值`lstExpResult`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:46:38.783

如果要列出 Counter 类，则使用 List 而不是 List。看起来您可能有一堆可能正在更新或发送到数据库的 Counter 对象。

```
 Counter c = new Counter();
    c. NormalCounter = 4
    c.SATCounter = 10
    c.SunCounter = 10

    List<Counter> listCounter = new List<Counter>
    listCounter.Add(c); 
```

代码更具可维护性和可读性。

如果您一次发送一个对象，则根本不需要列表。您可以将计数器对象传递给您的 UpdateMethod 并在更新数据库时对其进行解析。

# groovy - 使用 sql 语句作为字符串变量的 Groovy Sql.execute() 不起作用

> ID：15560715
> 
> 赞同：1
> 
> 时间：2013-03-22T00:35:37.857
> 
> 标签：groovy, groovy-sql

我试图通过将语句作为字符串变量而不是字符串文字传递来在 groovy 中执行 sql 语句。我使用字符串变量的原因是因为我正在从文件中读取 sql 语句。

例如（假设 sql 是 groovy.sql.Sql 的有效实例 - 我已经验证）：

```
sql.execute("insert into table(id) values(1)") 
```

工作得很好。

但是，以下内容不会：

```
def str = "insert into table(id) values(1)"
sql.execute(str) 
```

最后一个示例在我运行时挂起。没有 SQL 错误，它只是停止。我尝试在执行后放置一个 println，但它永远不会到达 println 语句。

所以，我尝试了以下变体：

```
sql.execute("$str") 
```

和

```
sql.execute("${str}") 
```

乃至

```
sql.execute("?", [str]) 
```

出于好奇，但都给出以下错误：

```
Mar 21, 2013 6:28:16 PM groovy.sql.Sql execute
WARNING: Failed to execute: ? because: Invalid SQL type: sqlKind = 0
Caught: java.sql.SQLException: Invalid SQL type: sqlKind = 0
java.sql.SQLException: Invalid SQL type: sqlKind = 0
        at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:77)
        at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:1010)
        at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1315)
        at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3576)
        at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3677)
        at oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1374)
        at runSqlFile.run(runSqlFile.groovy:40) 
```

诚然，我是 groovy 的新手，但我无法弄清楚为什么字符串文字有效但变量不会。在这里的任何帮助将不胜感激。如果需要更多信息，请告诉我。

另外，我从文件中获取单个 sql 语句的原因是因为我找不到使用 groovy 执行整个 .sql 文件的方法。如果有一种简单的方法可以做我还没有找到的事情，那也可以解决我的问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T22:15:29.497

找出原因：我打开了 SQL Developer，并使用了我在我的 groovy 脚本中使用的相同凭据。我在 SQL Developer 中执行了一些命令而忽略了提交它们，这在运行 groovy 脚本时导致了冲突。这就是停滞不前的原因。一旦我提交了在 SQL Developer 中所做的更改，脚本就运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:11:12.197

好吧，这适用于 mySql，所以我猜这是 Oracle JDBC 驱动程序的问题。我自己没有使用它的经验，但我知道它不是你能找到的最可靠的软件。

这有点像在黑暗中拍摄，但是：

```
sql.execute("$str")
sql.execute("${str}") 
```

在这两个调用中，传递给的值`sql.execute`实际上不是 a`String`而是 a `GStringImpl`，这可能与您的问题有关。

关于你的最后一个例子：

```
sql.execute("?", [str]) 
```

这只是无效的。`?`将被解释为一个值，而不是 SQL 语句。您正在做的是传递一个字符串，该字符串恰好包含有效的 sql。如果包含它，结果`"foobar"`将是相同的。

我想不出任何东西的唯一例子是：

```
def str = "insert into table(id) values(1)"
sql.execute(str) 
```

你确定你`str`在传递给之前没有做任何事情`sql.execute`吗？你能确保它不会以某种方式被包裹在一个专门的 groovy 类中`GStringImpl`吗？

# asp.net - 使用 IIS Express 编辑文件隐藏代码后会话丢失

> ID：15560719
> 
> 赞同：-1
> 
> 时间：2013-03-22T00:36:17.270
> 
> 标签：asp.net, iis, iis-7, iis-7.5, iis-express

所以我有一个正在开发的 ASP.NET 4.0 Web 表单项目。我的本地主机网络服务器是 IIS Express。如果我编辑一个 aspx 文件并点击保存 IIS Express 会重新加载所有符号并清除当前会话。

该行为似乎基本上是 iisreset 和应用程序池回收。

这会减慢开发和测试的速度，我希望至少在可能的情况下停止丢失会话。我不是在编辑 .aspx 文件中的 HTML 文件后面的代码。这在我使用 Cassini 网络服务器时从未发生过

PS numRecompilesBeforeAppRestart 不是我的问题的解决方案，因为它的默认值为 20。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:25:19.377

我将 ASP.NET 移到了一个数据库中，无论如何这更可靠。谷歌搜索这个并没有带回一个明确的方法来做到这一点。以下是配置 SQL Server 以存储 ASP.NET 会话状态的方法：

不要手动运行任何 SQL 脚本。转到 C:\Windows\Microsoft.NET\Framework\v4.0.30319 并运行以下命令：

```
aspnet_regsql.exe -S [server]-U [username] -P [password] -d ASPState -ssadd -sstype c 
```

如果您使用集成安全性，请在命令执行中包含 -E 而不是用户名和密码。集成安全性是您在使 ASP.NET 会话正常工作时遇到问题的地方。据我所知，您必须在对 aspnet_regsql.exe 的 cmd 调用中声明数据库名称，以便您可以包含 -sstype c 选项，以便正确设置集成安全性。（顺便说一下，微软给数据库的默认名称是 ASPState，我建议你坚持使用）。您还需要在您添加的 web.config 元素中声明 allowCustomSqlDatabase="true"`<system.web>`父元素。具有讽刺意味的是，如果您坚持使用默认名称 ASPState，则无需在 sqlConnectionString 属性中声明数据库名称，即使 allowCustomSqlDatabase 属性与会话状态数据库的自定义名称直接相关。

```
 <sessionState
            mode="SQLServer"
            sqlConnectionString="Server=[database_ip];Trusted_Connection=true;"
            cookieless="false"
            timeout="20" 
            allowCustomSqlDatabase="true"
    /> 
```

您必须为数据库中的应用程序池用户授予以下权限： [摘自本文](http://winmike.blogspot.com/2010/10/problems-with-sql-based-aspnet-state.html)：

将应用程序池用户添加到 ASPState 数据库的用户登录中，将他与 db_datareader 和 db_datawriter 角色相关联

打开 ASPState 数据库的“属性”对话框，选择“权限”选项卡并为应用程序池用户提供 ASPState 数据库的 EXECUTE/SELECT/INSERT/DELETE/UPDATE 权限。

# php - 您如何知道两个不同版本之间的接口差异？

> ID：15560721
> 
> 赞同：6
> 
> 时间：2013-03-22T00:36:22.733
> 
> 标签：php, interface, diff, versioning

我正在研究一些 php 库。我想跟踪类库接口的变化。

*   是的，我正在使用 GIT。但是 diff 产生的信息比我需要的多。
*   我试图将两个版本与 phpDocumentor 进行比较。

    phpdoc 项目：parse -d 文件夹

生成具有项目界面结构的xml文件。我可以将此 xml 文件与另一个文件进行比较。但是这些包含的信息比我想要的要多。像行号，文件哈希等等。

因此，我想比较两个提交、分支甚至分叉，并找出它们接口的差异。

比较示例：http: [//pastebin.com/1H61dJBT](http://pastebin.com/1H61dJBT)

知道何时更改主要版本也很重要。

> 进行不兼容的 API 更改时的主要版本...

[http://semver.org/spec/v2.0.0.html](http://semver.org/spec/v2.0.0.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:52:13.593

我认为您想围绕[PHP Smart Differencer构建工作流程](http://www.semanticdesigns.com/Products/SmartDifferencer/PHPSmartDifferencer.html)

可以在[此处查看](http://www.semanticdesigns.com/Products/SmartDifferencer/PHPSmartDifferencerExample.html)PHP Smart Differencer 的结果示例。此页面包含 SD 的 PHP Smart Differencer 工具在应用于原始文件和同一文件的更新版本时生成的输出示例。

如果您真的想自己动手，您可以围绕[PHP-Parser](https://github.com/nikic/PHP-Parser)构建它，这可能会给您带来更高的精度，但是您需要生成自己的比较算法，其中 SmartDifferencer 的工具已经内置了该算法。

这些中的任何一个都会为您提供您正在寻找的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T02:02:14.453

普通*差异*报告文本行方面的差异。软件是根据代码结构定义的。源代码作为文本行和源作为结构之间的不匹配使 diff 的输出难以理解。

您可以将接口定义与 Semantic Designs（我公司的）*SmartDifferencer 进行比较*。

这报告了对代码结构（而不​​是行）的最小编辑，以将一段 (PHP) 代码转换为另一段。接口函数名称、插入或删除参数的更改变得非常明显。换行符不相关，不会影响 SmartDifferencer 的结果；除非您坚持，否则评论也不是。（SmartDifferencer 不限于 PHP；有多种语言的版本）。

编辑：OP 想知道 SmartDifferencer 对接口更改的特定示例（PHP 文件之前和之后）做了什么。下面是他的两个示例文件，它们的 SmartDifferencer 输出和 Unix-diff 输出。我注意到这些非常小的示例文件有很多变化。

第一个界面：

```
<?php
// ----- first version -----
namespace vendor\package;

class someClass
{
private $c;
public function __construct($a, $b)
    {
    $c = $a + $b;
    }
/**
 * @return string
 */
public function returnC()
    {
    return $this->c;
    }
public function saySomething()
    {
    echo 'something';
    }
} 
```

修改接口文件

```
<?php
// ----- second version -----
namespace vendor\package;

class someClass
{
private $a, $b;

public function __construct($a, $b)
    {
    $this->a = $a;
    $this->b = $b;
    }

public function saySomething($something = 'something')
    {
    echo $something;
    }

/**
 * @return integer
 */
public function returnC()
    {
    return $this->a + $this->b;
    }

} 
```

智能差分输出（MN 表示“M 行，N 列”）：

```
C:>DMSSmartDifferencer PHP~PHP5 \temp\first_version.php \temp\second_version.php
Copyright (C) 2009-2012 Semantic Designs; All Rights Reserved
PHP~PHP5 SmartDifferencer Version 1.0.14
Copyright (C) 2012 Semantic Designs, Inc; All Rights Reserved; SD Confidential
Powered by DMS (R) Software Reengineering Toolkit
*** Unregistered SmartDifferencer Version 1.0
*** Operating with evaluation limits.

*** Parsing file C:/temp/first_version.php ...
*** Parsing file C:/temp/second_version.php ...
*** Creating suffix tree ...
*** Determining maximal pairs ...
*** Sorting maximal pairs ...
*** Determining differences ...
*** Printing edits ...
Substitute 7.13-7.14 by 7.13-7.18
<            $c
>            $a, $b
Substitute 10.9-10.21 by 11.9-12.22
<        $c = $a + $b;
>        $this->a = $a;
>        $this->b = $b;
At 15.12 insert 15.12-18.9 moving 19.21-19.32 to 15.21-15.32
>           function saySomething($something = 'something')
>        {
>        echo $something;
>        }
Delete 15.12-18.9 at 15.12 moving 15.21-15.27 to 23.21-23.27
<           function returnC()
<        {
<        return $this->c;
<        }
At 19.21 insert 23.21-23.27 moving 15.21-15.27 to 23.21-23.27
>                    returnC
Delete 19.21-19.32 at 23.21 moving 19.21-19.32 to 15.21-15.32
<                    saySomething
Substitute 21.9-21.25 by 25.9-25.35
<        echo 'something';
>        return $this->a + $this->b;
Exiting with final status 1. 
```

您应该看到 SmartDifferencer 专注于代码结构中的*增量，而不是**行*中的*增量*。您注意到的第一件事是 SmartDifferencer 完全忽略了注释，因为它们对代码的作用没有影响。

 *但在下面的 unix diff 中，最明显的例子是多个 diff 将一个函数末尾的 delta 与另一个函数开头的 delta 混为一谈；没有程序员以这种方式解释代码中的差异。当试图理解真正发生了什么变化时，这种混乱的差异会使阅读变得混乱。

Unix风格差异的输出：

```
C:>diff \temp\first_version.php \temp\second_version.php
2c2
< // ----- first version -----
---
> // ----- second version -----
7c7,8
<     private $c;
---
>     private $a, $b;
>
10c11,17
<         $c = $a + $b;
---
>         $this->a = $a;
>         $this->b = $b;
>         }
>
>     public function saySomething($something = 'something')
>         {
>         echo $something;
11a19
>
13c21
<      * @return string
---
>      * @return integer
17,21c25
<         return $this->c;
<         }
<     public function saySomething()
<         {
<         echo 'something';
---
>         return $this->a + $this->b;
22a27
> 
```

SmartDifferencer 和 diff 都不会告诉您接口的行为发生了变化，因为*它所*依赖的代码发生了变化。做到这一点的唯一方法是对直接或间接支持接口的*所有*代码进行静态语义分析，这是一个更难的问题。*

# c# - 通过使用方法用新的列表值更新 ListBox

> ID：15560722
> 
> 赞同：0
> 
> 时间：2013-03-22T00:36:27.143
> 
> 标签：c#, forms

我正在尝试提示一种方法在单击按钮时启动。问题是它们跨越两个不同的类，很难在表单和类上共享所有相关值。我想知道是否可以通过按下表单上的按钮来更改列表框的值。目前我的只是停留在第一个名单上。

我的第一堂课是表格。这是保持数据的物理变化。

```
if (teach.Alphabet == "B")
{
    lbl1.Text = "What is the english word for White?";

    lstNum.Items.AddRange(number1);
    txtQuestion.Text = String.Join(Environment.NewLine, english1);
} 
```

它调用方法`teach.CallRandomQuestion()`来获取字母（这是一种选择将哪个问题放入系统的方法）。这是通过以下代码完成的：

```
public void CallRandomQuestion()
{      
    if (score == 1)
    {
        Alphabet = "A";
        Answer = "1";
    }

    if (score == 2)
    {
        Alphabet = "B";
        Answer = "3";
    }
} 
```

最后，我有一个`score`从 1 开始的公共 int，每次给出正确答案时都加一个。所以如果给出了正确的答案，第二个问题`B`应该显示在列表框中，但没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:58:03.953

```
public void Showinlistbox()
    {      
        // Add a  listBox named  listBox1 

        // Add Score
        score++;
        CallRandomQuestion();    
        //if you want mutual-exclusion lock add lock (listBox1) 
        listBox1.Items.Add(Alphabet);
     } 
```

# c# - 在 C# 中使用 mshtml 从 html 获取 href

> ID：15560723
> 
> 赞同：0
> 
> 时间：2013-03-22T00:36:27.563
> 
> 标签：c#, wpf, browser, mshtml

我正在尝试使用 C# (WPF) 中的 mshtml 从以下 HTML 代码中获取 href 链接。

```
<a class="button_link" href="https://rhystowey.com/account/confirm_email/2842S-B2EB5-136382?t=1&amp;sig=b0dbd522380a21007d8c375iuc583f46a90365d9&amp;iid=am-130280753913638201274485430&amp;ac=1&amp;uid=1284488216&amp;nid=18+308" style="border:none;color:#0084b4;text-decoration:none;color:#ffffff;font-size:13px;font-weight:bold;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;">Confirm your account now</a> 
```

我尝试使用以下代码通过在 C# (WPF) 中使用 mshtml 来完成这项工作，但我失败了。

```
HTMLDocument mdoc = (HTMLDocument)browser.Document;
string innerHtml = mdoc.body.outerText;
string str = "https://rhystowey.com/account/confirm_email/";
int index = innerHtml.IndexOf(str);
innerHtml = innerHtml.Remove(0, index + str.Length);
int startIndex = innerHtml.IndexOf("\"");
string str3 = innerHtml.Remove(startIndex, innerHtml.Length - startIndex);
string thelink = "https://rhystowey.com/account/confirm_email/" + str3; 
```

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:50:30.780

用这个：

```
var ex = new Regex("href=\"(.*)\" style");
var tag = "<a class=\"button_link\" href=\"https://rhystowey.com/account/confirm_email/2842S-B2EB5-136382?t=1&amp;sig=b0dbd522380a21007d8c375iuc583f46a90365d9&amp;iid=am-130280753913638201274485430&amp;ac=1&amp;uid=1284488216&amp;nid=18+308\" style=\"border:none;color:#0084b4;text-decoration:none;color:#ffffff;font-size:13px;font-weight:bold;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;\">Confirm your account now</a>";

var address = ex.Match(tag).Groups[1].ToString(); 
```

但是您应该通过检查来扩展它，因为例如`Groups[1]`可能超出范围。

在你的例子中

```
HTMLDocument mdoc = (HTMLDocument)browser.Document;
string innerHtml = mdoc.body.outerText;
var ex = new Regex("href=\"([^\"\"]+)\"");
var address = ex.Match(innerHtml).Groups[1].ToString(); 
```

将匹配第一个`href="..."`. 或者您选择所有出现：

```
var matches = (from Match match in ex.Matches(innerHtml) select match.Groups[1].Value).ToList(); 
```

这将为您`List<string>`提供 HTML 中的所有链接。要过滤这个，你可以这样

```
var wantedMatches = matches.Where(m => m.StartsWith("https://rhystowey.com/account/confirm_email/")); 
```

这更灵活，因为您可以检查起始字符串列表或其他内容。或者您在您的正则表达式中执行此操作，这将带来更好的性能：

```
var ex = new Regex("href=\"(https://rhystowey\\.com/account/confirm_email/[^\"\"]+)\""); 
```

## 据我了解，将所有内容整合到您想要的

```
var ex = new Regex("href=\"(https://rhystowey\\.com/account/confirm_email/[^\"\"]+)\"");
var matches = (from Match match in ex.Matches(innerHTML)
               where match.Groups.Count >= 1
               select match.Groups[1].Value).ToList();
var firstAddress = matches.FirstOrDefault(); 
```

`firstAddress`保留您的链接，如果有的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:57:40.847

如果您的链接将始终以相同的路径开始并且不在页面上重复，您可以使用这个（未经测试）：

```
 var match = Regex.Match(html, @"href=""(?<href>https\:\/\/rhystowey\.com\/account\/confirm_email\/[^""]+)""");

    if (match.Success)
    {
      var href = match.Groups["href"].Value;
      ....
    } 
```

# jsp - 如何使用 Spring MVC 将我的 CSS 文件连接到 Eclipse 中的 JSP 文件

> ID：15560728
> 
> 赞同：1
> 
> 时间：2013-03-22T00:36:44.677
> 
> 标签：jsp, jakarta-ee, spring-mvc

我正在使用 Eclipse 创建一个 Spring MVC Web 应用程序开发项目。我的目录结构如下所示 -

源代码

-主要的

--webapp

- -资源

---WEB-INF

-----班级

- - -春天

------appServlet

--------servlet-context.xml

------根上下文.xml

-----观看次数

------css

--------style.css

------home.jsp

-----web.xml

-测试

内容如下——

**1\. [home.jsp](http://pastebin.com/X2CkYh8b)**

**2.家庭控制器**

```
*package edu.northeastern.library;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
@Controller
public class HomeController {
    @RequestMapping(value = "/", method = RequestMethod.GET)
    public String home() {
        return "home";
    }
}* 
```

**3.Web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.css</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.js</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.gif</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.jpg</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.png</url-pattern>
    </servlet-mapping>

</web-app> 
```

**- servlet-context.xml**

```
*<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
 xmlns:mvc="http://www.springframework.org/schema/mvc"
 xsi:schemaLocation="http://www.springframework.org/schema/beans
 http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
 http://www.springframework.org/schema/mvc
 http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
 http://www.springframework.org/schema/context
 http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />
    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <mvc:resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <context:component-scan base-package="edu.northeastern.library" />

</beans>* 
```

请帮助解释为什么css文件没有连接到jsp文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:24:48.443

我移动了资源文件夹下的 CSS 文件夹，并在 jsp 文件中添加了以下代码以链接到 css -

```
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/resources/css/style.css" media="screen"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-26T02:59:03.427

将您的所有资产（例如`css`, `js`, `imgs`, ）`fonts`移动到`resources`文件夹内

然后在您的链接上添加此代码`${pageContext.request.contextPath}/resources/`

您的 .jsp 文件的链接

```
<link href="css/style.css"> 
```

用这个替换它：

```
<link href="${pageContext.request.contextPath}/resources/css/style.css"> 
```

这应该有效。

# excel - Excel、Visual Basic 编辑器、枚举类型声明 - 未定义用户定义类型

> ID：15560729
> 
> 赞同：5
> 
> 时间：2013-03-22T00:37:01.237
> 
> 标签：excel, excel-2007, declaration, vba

我有以下代码，但我不知道为什么 Excel`Enum`在子例程中看不到类型（我已声明）`Test2()`：

```
Private Sub Test1()
    Dim test_name As Variant

End Sub

Private Enum rlcRollercoasterState
    rlcRollercoasterDisabled
    rlcRollercoasterEnabled
    rlcRollercoasterBroken
    rlcRollercoasterMissing
End Enum

Private Sub Test2()
    Dim var1 As Variant

    Dim rlcRC1State As rlcRollercoasterState ' User-defined type not defined

End Sub 
```

如果我在类型声明之后复制`Test1()`子例程`Enum`，Excel 会识别. 如果我注释掉子例程，Excel 会识别输入.`rlcRollercoasterState``Test1()``Test1()``rlcRollercoasterState``Test2()`

为什么 Excel 看不到子程序`rlcRollercoasterState`中的类型？`Test2()`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T01:09:18.120

![在此处输入图像描述](../Images/ea3653684525f63f766ec198e4d1f8b6.png)

在运行代码之前始终“调试/编译 VBAProject”（Alt-dl）。如您的示例所示，它给出了错误。编译错误说它需要在模块开头的声明语句。

# python - python中的星号三角形

> ID：15560730
> 
> 赞同：2
> 
> 时间：2013-03-22T00:37:08.280
> 
> 标签：python, ascii-art

我必须编写一个递归函数 asterisk_triangle ，它接受一个整数，然后返回一个由那么多行组成的星号三角形。

例如，这是一个 4 行星号三角形。

```
*
**
***
**** 
```

我想出了这个功能：

```
def asterisk_triangle(n):
    """
    takes an integer n and then returns an
    asterisk triangle consisting of (n) many lines
    """
    x = 1
    while (x <= n):
        print("*" * x)
        x = x + 1
    return 
```

而且我还必须通过操作第一个函数来创建一个倒置的星号三角形。

我想出了这个函数和结果：

```
def upside_down_asterisk_triangle(n):
     """
     takes an integer n and then returns a backwards
     asterisk triangle consisting of (n) many lines
     """
     x = 0
     while (x < n):
          print("*" * (n-x))
     x = x + 1
     return

****
***
**
* 
```

现在我必须操纵这些函数来创建一个向后的星号三角形。

```
 *
  **
 ***
**** 
```

还有一个倒置的星号三角形。

```
****
 ***
  **
   * 
```

我应该实现哪些功能？

我尝试在函数之后使用反向字符串命令 [::-1] 并且它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T00:44:22.450

我之前已经回答了同样的问题。请记住，您提到的功能都不是`recursive`功能。[您可以在此处](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)阅读有关递归的更多信息。

[这是我在这里](https://stackoverflow.com/questions/15559435/need-to-recreate-pyramid-triangle-on-python/15559470#15559470)提到的例子。

**Python 3.X**

```
def asterix_triangle(i, t=0):
    if i == 0:
        return 0
    else:
        print(' ' * ( i + 1 ) + '*' * ( t * 2 + 1 ))
        return asterix_triangle( i - 1, t + 1 )

asterix_triangle(5) 
```

在这里，您有一个递归函数的颠倒版本。

```
def upside_down_asterix_triangle(i, t=0):
    if i == 0:
        return 0
    else:
        print(' ' * ( t + 1 ) + '*' * ( i * 2 - 1 ))
        return upside_down_asterix_triangle( i - 1, t + 1 )

upside_down_asterix_triangle(5) 
```

**蟒蛇2.X**

```
def asterix_triangle(i, t=0):
    if i == 0:
        return 0
    else:
        print ' ' * ( i + 1 ) + '*' * ( t * 2 + 1 )
        return asterix_triangle( i - 1, t + 1 )

asterix_triangle(5) 
```

在这里，您有一个递归函数的颠倒版本。

```
def upside_down_asterix_triangle(i, t=0):
    if i == 0:
        return 0
    else:
        print ' ' * ( t + 1 ) + '*' * ( i * 2 - 1 )
        return upside_down_asterix_triangle( i - 1, t + 1 )

upside_down_asterix_triangle(5) 
```

**编辑：** *显示在我的 IDE 中运行的脚本的屏幕截图。*

![在此处输入图像描述](../Images/79eea3bed60cab4a64478da0afb7ccbd.png)

**Edit2：** *添加了适用于 Python 3.x 的代码*

**Edit3：** *为 Python 3.X 添加了迭代函数*

```
def create_pyramid(rows):
    for i in range(rows):
        print((' ' * ( rows- i - 1 ) + '*' * ( 2 * i + 1)))

print((create_pyramid(5)))

def create_upside_down_pyramid(rows):
    for i in reversed(list(range(rows))):
        print((' ' * ( rows- i - 1 ) + '*' * ( 2 * i + 1)))

print((create_upside_down_pyramid(5))) 
```

# django - Apache/wsgi/django 配置

> ID：15560737
> 
> 赞同：0
> 
> 时间：2013-03-22T00:38:48.503
> 
> 标签：django, apache, wsgi

我们在同一台服务器上运行了两个 django 应用程序，它们与使用 oauth 的 API 交互。当在 django 开发服务器下运行时，它们按预期运行，相互通信。但是，当使用 apache/wsgi 部署时，它们不能一起工作。

（更具体地说，一个应用程序是 Indivo 服务器的一个实例；另一个是与 Indivo 交互的自定义​​应用程序。）

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:55:33.127

确保 Django 实例首先自己工作。例如，一个应用程序可以在 Apache 下启动，而另一个使用`./manage.py runserver`. 使用 Apache 反转哪个正在运行，并验证一切是否按预期工作。

使用 Apache 错误日志查找错误，例如请求失败。

由于您的某个应用似乎实现了 Web API，因此请使用[Google Chrome Postman App](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en)之类的工具从 Web 浏览器中运行该站点。

了解如何使用[Django 日志框架](https://docs.djangoproject.com/en/dev/topics/logging/)在应用程序执行时记录有关它们的信息。

# php - 如何在这个嵌套的 stdClass 对象中打印数据？

> ID：15560742
> 
> 赞同：0
> 
> 时间：2013-03-22T00:39:00.953
> 
> 标签：php, soap, stdclass

我试图在这个嵌套的 stdClass 对象中打印值，但我无法访问它们。例如，如何打印“originCity”的值？

```
stdClass Object (
    [FlightInfoResult] => stdClass Object (
        [next_offset] => 1 
        [flights] => stdClass Object (
            [ident] => SWA2558
            [aircrafttype] => B737
            [filed_ete] => 00:50:00
            [filed_time] => 1362879561
            [filed_departuretime] => 1362880080
            [filed_airspeed_kts] => 442
            [filed_airspeed_mach] => 
            [filed_altitude] => 410
            [route] => LBY MEI J31 VUZ
            [actualdeparturetime] => 1362880080
            [estimatedarrivaltime] => 1362882900
            [actualarrivaltime] => 1362882600
            [diverted] => [origin] => KMSY
            [destination] => KBHM
            [originName] => New Orleans Intl
            [originCity] => New Orleans, LA
            [destinationName] => Birmingham-Shuttlesworth Intl
            [destinationCity] => Birmingham, AL
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T00:43:59.010

尝试

```
$var->FlightInfoResult->flights->originCity 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T00:43:51.870

您可以使用

```
$object->FlightInfoResult->flights->originCity; 
```

访问对象属性。

对于那个很抱歉。

# javascript - 使用带有javascript __doPostBack 方法的scrapy 的问题

> ID：15560746
> 
> 赞同：3
> 
> 时间：2013-03-22T00:39:12.877
> 
> 标签：javascript, python, asp.net, scrapy, dopostback

试图从公共搜索中自动获取搜索结果，但遇到了一些麻烦。URL 的格式为

```
http://www.website.com/search.aspx?keyword=#&&page=1&sort=Sorting 
```

当我单击页面时，访问此页面后，它会稍微更改为

```
http://www.website.com/search.aspx?keyword=#&&sort=Sorting&page=2 
```

问题是，如果我随后尝试直接访问第二个链接而不首先访问第一个链接，我将被重定向到第一个链接。我目前的尝试是在 scrapy 中定义一长串 start_urls。

```
class websiteSpider(BaseSpider):
    name = "website"
    allowed_domains = ["website.com"]
    baseUrl = "http://www.website.com/search.aspx?keyword=#&&sort=Sorting&page="
    start_urls = [(baseUrl+str(i)) for i in range(1,1000)] 
```

目前，这段代码只是一遍又一遍地访问第一页。我觉得这可能很简单，但我不太清楚如何解决这个问题。

更新：对此进行了一些调查，并发现该站点通过使用 __doPostBack(arg1, arg2) 向上一页发送 POST 请求来更新每个页面。我现在的问题是我究竟如何使用scrapy来模仿这个POST请求。我知道如何发出 POST 请求，但不知道如何将我想要的参数传递给它。

第二次更新：我已经取得了很大的进步！我认为......我查看了示例和文档，最终将这个版本的我认为应该做的伎俩拼凑在一起：

```
def start_requests(self):
    baseUrl = "http://www.website.com/search.aspx?keyword=#&&sort=Sorting&page="
    target = 'ctl00$empcnt$ucResults$pagination'
    requests = []
    for i in range(1, 5):
        url = baseUrl + str(i)
        argument = str(i+1)
        data = {'__EVENTTARGET': target, '__EVENTARGUMENT': argument}
        currentPage = FormRequest(url, data)
        requests.append(currentPage)
    return requests 
```

这个想法是这样对待 POST 请求就像一个表单并相应地更新。但是，当我实际尝试运行它时，我得到以下回溯（为简洁起见）：

```
2013-03-22 04:03:03-0400 [guru] ERROR: Unhandled error on engine.crawl()
dfd.addCallbacks(request.callback or spider.parse, request.errback)
      File "/usr/lib/python2.7/dist-packages/twisted/internet/defer.py", line 280, in addCallbacks
        assert callable(callback)
    exceptions.AssertionError: 

2013-03-22 04:03:03-0400 [-] ERROR: Unhandled error in Deferred:
2013-03-22 04:03:03-0400 [-] Unhandled Error
    Traceback (most recent call last):
    Failure: scrapy.exceptions.IgnoreRequest: Skipped (request already seen) 
```

将问题更改为更针对这篇文章的内容。

想法？

PS 当第二个错误发生时，scrapy 无法清理关闭，我必须发送 SIGINT 两次才能让事情真正结束。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:37:14.977

`FormRequest`在构造函数中没有位置参数`formdata`：

```
class FormRequest(Request):
    def __init__(self, *args, **kwargs):
        formdata = kwargs.pop('formdata', None) 
```

所以你实际上不得不说`formdata=`：

```
requests.append(FormRequest(url, formdata=data)) 
```

# lua - 重复直到在lua中循环

> ID：15560750
> 
> 赞同：0
> 
> 时间：2013-03-22T00:39:26.700
> 
> 标签：lua

我的 lua 代码做错了什么？

```
local which

print("Type f to convert fahrenheit to celsius and c to convert celsius to fahrenheit")
which = io.read()
repeat
    if which=="f" then
        local c
        local f
        print("input your fahrenheit temperature")
        f = tonumber(io.read())
        c = (f-32)/1.8
        print(c)
    end

    elseif which=="c" then
        local ce
        local fa
        print("input your celsius temperature")
        c = tonumber(io.read())
        f = (c*1.8)+32
    end

    else do
    print("Type f to convert fahrenhiet to celsius and c to convert celsius to fahrenheit")
until which=="f" or which=="c" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T00:51:59.843

你`if`要先关闭你的街区。删除`end`你用来关闭`if`和的语句，`elseif`并将其放在后面关闭`else`。

```
local which

print("Type f to convert fahrenheit to celsius and c to convert celsius to fahrenheit")
which = io.read()
repeat
    if which=="f" then
        local c
        local f
        print("input your fahrenheit temperature")
        f = tonumber(io.read())
        c = (f-32)/1.8
        print(c)

    elseif which=="c" then
        local ce
        local fa
        print("input your celsius temperature")
        c = tonumber(io.read())
        f = (c*1.8)+32

    else
        print("Type f to convert fahrenhiet to celsius and c to convert celsius to fahrenheit")
    end
until which=="f" or which=="c" 
```

* * *

**PS**：这可能会导致您进入无限循环。您需要`which`在重复直到每次迭代后更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:49:37.333

`end`之前应该没有`elseif`。也应该没有`end`before 和没有`do`after `else`。并且应该有一个`end`之后`else`和之前的部分`until`：

```
repeat
  if ... then
    ...
  elseif ... then
    ...
  else
    ...
  end
until ... 
```

下次如果您至少发布您的问题是什么（错误消息、意外输出等）会很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-28T19:46:18.890

```
local which
repeat
    print("Type f to convert fahrenheit to celsius and c to convert celsius to fahrenheit")
    which = io.read()
    if which=="f" then
        local c
        local f
        print("input your fahrenheit temperature")
        f = tonumber(io.read())
        c = (f-32)/1.8
        print(c)

    elseif which=="c" then
        local c
        local f
        print("input your celsius temperature")
        c = tonumber(io.read())
        f = (c*1.8)+32
        print(f)
    end
    print("do you want to play again? y/n?")
    antwort = io.read()

until antwort ~= "y" 
```

# ios - 编辑按钮项目未显示在导航栏上

> ID：15560752
> 
> 赞同：0
> 
> 时间：2013-03-22T00:39:43.260
> 
> 标签：ios, objective-c, uiviewcontroller

我正在尝试在导航栏上添加一个编辑按钮，但没有成功。这似乎是一个简单的任务，就像苹果文档[导航控制器](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html#//apple_ref/doc/uid/TP40011313-CH2-SW1)上所说的那样。

> myViewController.navigationItem.rightBarButtonItem = [myViewController editButtonItem];

我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

 //   [self retrievePassengerInformation];

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
     self.navigationItem.rightBarButtonItem = self.editButtonItem;
} 
```

![在此处输入图像描述](../Images/7c1bc82bdb67f7a937327e53e4756088.png)

无论出于何种原因，编辑按钮都没有出现。只是为了让大家知道这是一个静态分组表视图。

任何帮助将不胜感激。谢谢，马科斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:30:30.827

```
UIBarButtonItem *editButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:@selector(editMethodName:)];
self.navigationItem.rightBarButtonItem = editButton; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:52:59.173

ViewController 不是从导航控制器调用的，因此不应访问 self.navigationItem。我最终为我添加的 UINavigationItem 创建了一个出口并且它正在工作。

```
 @property (weak, nonatomic) IBOutlet UINavigationItem *addedNavigationItem;

- (void)viewDidLoad
{
    [super viewDidLoad];

 //   [self retrievePassengerInformation];

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.

    self.addedNavigationItem.rightBarButtonItem = self.editButtonItem;
} 
```

# c# - 我的班级如何以索引列表的形式显示在 Watch 窗口中？

> ID：15560753
> 
> 赞同：0
> 
> 时间：2013-03-22T00:39:44.277
> 
> 标签：c#, visual-studio

我希望我的班级以这种方式出现：

![截屏](../Images/6c1a96d5e0f6ef8f537bb7aacf99aaf9.png)

而是显示`liveSelect`如上。这是我班级的声明：

```
public class LiveSelect<TSource, TResult> : ReadOnlyBindingList<TResult>, IList, ICollection, IEnumerable
{
    //...
} 
```

`ReadOnlyBindingList`实现`IBindingList`。我错过了什么？

**更新：**根据 280Z28 的回答，我在哪里解决它：

```
internal sealed class CollectionDebuggerView<T>
{
    readonly ICollection<T> c;

    public CollectionDebuggerView(ICollection<T> col)
    {
        this.c = col;
    }

    [DebuggerBrowsable(DebuggerBrowsableState.RootHidden)]
    public T[] Items
    {
        get { return c.ToArray(); }
    }
} 
```

然后，让我的`ReadOnlyBindingList<TResult>`类实现`ICollection<T>`并添加一些属性，使其看起来像这样：

```
[DebuggerDisplay("Count={Count}")]
[DebuggerTypeProxy(typeof(CollectionDebuggerView<>))]
public abstract class ReadOnlyBindingList<TResult> : IBindingList, IList, IEnumerable, IEnumerable<TResult>, ICollection, ICollection<TResult>
{
    //...
} 
```

请注意，`CollectionDebuggerView`需要在构造函数中包含`ReadOnlyBindingList`实现的东西（例如`ICollection<T>`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:16:59.730

根据[另一个 Stack Overflow Q/A](https://stackoverflow.com/questions/3683571/how-do-i-get-debuggerbrowsable-roothidden-to-work)，似乎我最初建议尝试[`[DebuggerBrowsable(DebuggerBrowsableState.RootHidden)]`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerbrowsableattribute.aspx)索引器属性上的属性可能不起作用。

您需要将其添加[`DebuggerTypeProxyAttribute`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggertypeproxyattribute.aspx)到您的类中，并配置类型代理以扩展索引器的成员。

例如，查看 Mono 中的[实现`List<T>`](https://github.com/mono/mono/blob/master/mcs/class/corlib/System.Collections.Generic/List.cs)，它使用[`CollectionDebuggerView<T>`调试器类型代理](https://github.com/mono/mono/blob/master/mcs/class/corlib/System.Collections.Generic/CollectionDebuggerView.cs)来实现此目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:42:41.617

如果你扩展`Results View`从`liveSelect`

你应该看到同样的事情`someList`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T00:43:08.643

我认为您需要一个[带有](http://msdn.microsoft.com/en-us/library/aa288464%28v=vs.71%29.aspx)`integer`.

# javascript - Firefox 在 SVG 路径中使用浮点坐标

> ID：15560758
> 
> 赞同：0
> 
> 时间：2013-03-22T00:40:02.780
> 
> 标签：javascript, performance, firefox, svg, raphael

我正在使用 Raphael.js 在 JavaScript 中编写类似于[Paint的东西。](http://osxdaily.com/images/Paintbrush-small.png)笔触是通过路径实现的：每次鼠标移动时，都会在“当前”路径中附加一个新字符串，例如“L x, y”。

因此，例如，如果我单击并摆动一点，这就是我在 Chrome 中得到的：

```
<path style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); stroke-linejoin: round; stroke-linecap: round;" fill="none" stroke="#000000" d="M173,326L173,326L175,325L180,322L186,318L195,312L204,303L213,294L219,285L221,283L224,281L225,280L226,280L229,280L232,280L238,282L243,288L250,296L256,305L263,311L268,316L272,318L273,318L276,318L278,318L281,318L286,316L294,309L300,301L307,292L314,281L321,272L326,265L328,261L329,257L332,251L333,249L334,249L335,248L337,248L339,248L342,249L346,252L351,256L356,260L360,262L364,264L368,264L370,265L374,265L377,264L380,262L387,257L394,251L403,245L411,235L420,226L429,217L437,208L446,202L453,200L461,198L466,198L470,198L472,198L474,199L477,202L478,205L479,209L483,214L487,219L491,221L494,225L498,226L502,226L505,226L506,226L508,226L509,226L510,226" stroke-width="30" stroke-linejoin="round" stroke-linecap="round"></path> 
```

Chrome 使用*整数*作为笔划坐标，它就像一个魅力，非常流畅。

另一方面，Firefox 有一个糟糕的性能问题，因为它似乎使用浮点数作为路径坐标：

```
<path style="stroke-linejoin: round; stroke-linecap: round;" fill="none" stroke="#000000" d="M116,334.1333312988281L116,334.1333312988281L118,335.1333312988281L128,332.1333312988281L135,332.1333312988281L145,330.1333312988281L157,330.1333312988281L169,328.1333312988281L181,326.1333312988281L194,323.1333312988281L207,320.1333312988281L219,317.1333312988281L234,314.1333312988281L260,307.1333312988281L275,302.1333312988281L286,295.1333312988281L297,286.1333312988281L308,271.1333312988281L315,258.1333312988281L324,245.13333129882812L333,232.13333129882812L342,225.13333129882812L351,218.13333129882812L367,214.13333129882812L373,214.13333129882812L380,214.13333129882812L385,212.13333129882812L391,212.13333129882812L396,212.13333129882812L402,212.13333129882812L410,218.13333129882812L420,229.13333129882812L431,242.13333129882812L438,255.13333129882812L445,264.1333312988281L457,269.1333312988281L459,269.1333312988281L460,269.1333312988281L463,269.1333312988281L465,268.1333312988281L467,263.1333312988281L471,254.13333129882812L474,243.13333129882812L476,233.13333129882812L481,222.13333129882812L483,215.13333129882812L486,208.13333129882812L488,207.13333129882812L489,205.13333129882812L490,204.13333129882812" stroke-width="30" stroke-linejoin="round" stroke-linecap="round"></path> 
```

有解决办法吗？我也希望 Firefox 使用整数。

**编辑**：

我发现手动添加的路径表现正常（即使用整数）。问题可能出在构建笔画的代码上？

```
$('#canvas_container').mousemove(function(e){
    var newx = e.pageX - $(document).scrollLeft() - $('#canvas_container').offset().left;
    var newy = e.pageY - $(document).scrollTop() - $('#canvas_container').offset().top;

    [...]

    if (brushing) {
      brush_current_stroke.attr({
        'path': [brush_current_stroke.attr('path'), 'L', newx, ' ', newy].join('')
      });
    }

    oldx = newx;
    oldy = newy;
  }); 
```

**编辑**：

我将计算鼠标坐标的代码更改为：

```
var newx = Math.round(e.pageX - $(this).offset().left);
var newy = Math.round(e.pageY - $(this).offset().top); 
```

现在 Firefox 也对两个坐标都使用整数。但是性能问题仍然存在！任何想法都值得赞赏。

# ruby-on-rails-3 - Sidekiq 错误未初始化常量

> ID：15560761
> 
> 赞同：7
> 
> 时间：2013-03-22T00:40:47.477
> 
> 标签：ruby-on-rails-3, sidekiq

我在使用 sidekiq 时遇到问题。基本上，我们正在`NameError: uninitialized constant`使用我们的 sidekiq 设置，这导致大量作业失败。

错误日志说：

```
NameError: uninitialized constant GameUser::Lock
/data/@myapp/releases/20130321230952/app/models/game_user.rb:71:in `node_calls_base_get_user'
/data/@myapp/shared/bundled_gems/ruby/1.9.1/gems/sidekiq-2.8.0/lib/sidekiq/processor.rb:45:in `block (3 levels) in process'
/data/@myapp/shared/bundled_gems/ruby/1.9.1/gems/sidekiq-2.8.0/lib/sidekiq/middleware/chain.rb:109:in `call' 
```

代码在这里：

```
# app/models/game_user.rb
def self.node_calls_base_get_user(serial, game_name)
  if Lock.get("user:#{id}") # Set up lock to prevent multiple users to be created      
    Lock.delete("user:#{id}")
  end
  return false
end 
```

锁在库中定义：

```
# lib/lock.rb
class Lock
  def self.get(key)
    lock = CACHE.add("lock:#{key}", 1, 5) # Let lock autoexpire after 5 seconds
    return true
  end
end 
```

lib/ 文件夹会自动加载其余配置。

```
module Myapp
  class Application < Rails::Application
    ...
    # Custom directories with classes and modules you want to be autoloadable.
    config.autoload_paths += %W(#{config.root}/lib)
    ...    
  end
end 
```

我不知道为什么会这样。当我们部署时，它似乎更频繁地发生，但在其他情况下它似乎发生得足够频繁。

我一直在关注以下线程：[https](https://github.com/mperham/sidekiq/issues/331) ://github.com/mperham/sidekiq/issues/331 ，但除了将 lib 文件夹添加到 autoload_paths 之外，它似乎没有提供解决方案。

我正在使用：

宝石'rails'，'3.2.13'宝石'sidekiq'，'> = 2.7.5'

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T13:08:39.600

`lib`将文件夹添加到`eager_load_paths`. 这与`autoload_paths`. Sidekiq 不会即时加载类，这就是为什么当您尝试访问未急切加载的常量时会出错的原因。

所以在你的 application.rb

```
config.autoload_paths += %W(#{config.root}/lib)
config.eager_load_paths += %W(#{config.root}/lib) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T14:49:36.700

我认为这里的问题很可能是如上所述的加载路径。

注意 - 我不确定是否需要 autoload_paths 选项，因为 Rails 在开发模式之外会忽略此选项

无论如何-我遇到了类似的问题：尽管我的代码已更新，但该工作一直在尝试调用旧版本的代码。

我最终发现有一些老工人正在运行。我只注意到，因为堆栈跟踪显示 sidekiq gem 版本是 2.15.0，我更新了 2.17.0

我杀死了其他进程，它工作正常

# c++ - C++ 内存测试返回奇怪的输出

> ID：15560763
> 
> 赞同：4
> 
> 时间：2013-03-22T00:41:05.003
> 
> 标签：c++, memory

Slackware 在这里。我只是在搞乱内存和指针......我想了解更多关于这些的知识，所以我用 C++ 制作了一个数组，并查找了其中第一项的内存地址......：

```
string foo[3] = {"a", "b", "c"};
cout << *(&foo[0]-4) << endl; 
```

它输出了这个：[http](http://pastebin.com/K0HAL5nJ) ://pastebin.com/K0HAL5nJ 整个代码：

```
#include <iostream>

using namespace std;

int main()
{
    string foo[3] = {"a", "b", "c"};
    cout << &foo[0] << " minus " << &foo[1] << " equals " << int(&foo[0])-int(&foo[1]) << endl;
    cout << *(&foo[0]-4) << endl;
    cout << "Hello world!" << endl;
    return 0;
} 
```

我是一个完整的 C++ 初学者，根本不明白为什么会发生这种情况......我知道这种代码不应该......但是，任何人都可以解释那里发生了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T00:42:58.507

这是未定义的行为。`&foo[0]`为您提供第一个`std::string`对象的地址，然后从中减去 4。从 §5.7 加法运算符：

> 如果指针操作数和结果都指向同一个数组对象的元素，或者超过数组对象的最后一个元素，则计算不应产生溢出；否则，行为未定义。

未定义的行为意味着您可以体验任何事情。可能发生的是某个内存区域，即数组开头之前的四个位置，即不是有效`std::string`对象被视为`std::string`. 这势必导致丑陋的事情发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T01:26:08.567

## 指针加法和元素大小

* * *

将整数添加到指针时，整数乘以指针指向的类型的元素大小。

```
// Assume sizeof(int) is 4.
int b[100];  // b is an array of 100 ints.
int* p;      // p is a a pointer to an int.
p = b;       // Assigns address of first element of b. Ie, &b[0]
p = p + 1;   // Adds 4 to p (4 == 1 * sizeof(int)). Ie, &b[1] 
```

[http://www.fredosaurus.com/notes-cpp/arrayptr/26arraysaspointers.html](http://www.fredosaurus.com/notes-cpp/arrayptr/26arraysaspointers.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T00:52:31.960

```
 cout << *(&foo[0]-4) << endl; 
```

此代码用于打印 foo[-4]

试试这个代码。

```
 cout << *(&foo[4]-4) << endl; 
```

这将打印 foo[0]

```
 T * p;
 int n; 
```

`p+n`表示`p`add sizeof(T *)*n的地址

**指针加法和元素大小**
当您将整数添加到指针时，整数乘以指针指向的类型的元素大小。

```
// Assume sizeof(int) is 4.
int b[100];  // b is an array of 100 ints.
int* p;      // p is a a pointer to an int.
p = b;       // Assigns address of first element of b. Ie, &b[0]
p = p + 1;   // Adds 4 to p (4 == 1 * sizeof(int)). Ie, &b[1] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T00:53:07.410

您正在访问超出您分配的数组的地址空间的一些内存，这会导致未定义的行为。

```
 string foo[3] = {"a", "b", "c"};
 cout << &foo[0] << " minus " << &foo[1] << " equals " 
      << int(&foo[0])-int(&foo[1]);

 &foo[0] get the memory address of "a",
 &foo[1] get the memory address of "b";
 the output is OK since both address are in range of foo's address space

cout << *(&foo[0]-4) << endl;
 You tried to get the value at address of ("a" -4),
since this address is outside the address of foo, it is undefined behavior. 
```

# javascript - 使用 Jasmine-jQuery 我尝试更改夹具 HTML，但它不起作用

> ID：15560764
> 
> 赞同：0
> 
> 时间：2013-03-22T00:41:24.320
> 
> 标签：javascript, coffeescript, tdd, jasmine, jasmine-jquery

我是**Jasmine-jQuery**的新手。我尝试使用fixture HTML，但测试没有通过。

**夹具.html：**

```
<html>
<body>
  <p id="0">
  </p>
</body>
</html> 
```

**fake_code_for_question_spec.coffee：**

```
describe "FakeCodeForQuestion", ->
  describe "with HTML fixture", ->
    beforeEach ->
      loadFixtures "fixture.html"   ### Load Fixture
      @obj = new FakeCodeForQuestion

    describe "#addText", ->
      beforeEach ->
        @obj.addTextToParagraph0()   ### Change DOM

      it "should add text", ->
        expect($('p#0')).toHaveText "text"   ### Get Changed DOM 
```

**fake_code_for_question.coffee：**

```
root = exports ? this
class root.FakeCodeForQuestion
  addTextToParagraph0: ->
    $('p0').text "text" 
```

**茉莉花结果：**

```
Expected '<p id="0"> </p>' to have text 'text'. 
```

谢谢你的好意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:03:03.730

```
root = exports ? this
class root.FakeCodeForQuestion
  addTextToParagraph0: ->
    $('p0').text "text" 
```

您好，这里的问题是您的选择器不引用 id 为 p0 的元素，而是引用不存在的元素 p0，即类似于 $('body') 选择 body 元素的方式。

您希望它改为 $('#p0')

# iphone - 表格单元原型 - 插座不工作

> ID：15560765
> 
> 赞同：1
> 
> 时间：2013-03-22T00:41:26.907
> 
> 标签：iphone, ios, uitableview, ios6

我有带有自定义类的单元原型，其中有网点。

![插座连接](../Images/d1d7785b01390224abdc2761b19baa9b.png) ![在单元原型的 IB 中设置的自定义类](../Images/3b4d817b74ca54183d78b9018d5db5ce.png)

STRMEpisodeCell.h

```
#import <UIKit/UIKit.h>
#import "Show.h"

@interface STRMEpisodeCell : UITableViewCell
@property (weak, nonatomic) Show *show;
@property (weak, nonatomic) IBOutlet UILabel *showLabel;
@property (weak, nonatomic) IBOutlet UILabel *episodeLabel;
@property (weak, nonatomic) IBOutlet UIImageView *posterView;
@end 
```

STRMEpisodeCell.m

```
#import "STRMEpisodeCell.h"

@interface STRMEpisodeCell ()

@end

@implementation STRMEpisodeCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

- (void)setShow:(TVDbShow *)show
{
    _show = show;
    self.showLabel.text = show.title;
}

@end 
```

STRMViewController.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.episodeTable.dataSource = self;
    [self.episodeTable registerClass:[STRMEpisodeCell class] forCellReuseIdentifier:@"episode"];

    self.list = //loading data here;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    STRMEpisodeCell *cell = [tableView dequeueReusableCellWithIdentifier:@"episode"];
    cell.show = self.list[indexPath.row];
    return cell;
} 
```

当我在其中设置断点时`cell.show = self.list[indexPath.item];`，`cell`它只会显示所有出口都为零。

我做错什么了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T01:06:53.723

当使用您在情节提要中设置的表格视图单元格时，您不应该注册该类，因为这将阻止表格视图获取您在 IB 中设置的单元格。我认为您只想在完全用代码设置单元格时注册一个类。

如果您在 xib 文件中创建单元格，并且有一个自定义类，那么您注册的是 nib 而不是类。

# sql-server - 在 SQL Server 中使用 select 子句从现有数据生成插入脚本

> ID：15560766
> 
> 赞同：2
> 
> 时间：2013-03-22T00:41:28.333
> 
> 标签：sql-server

我知道在 SQL Server 中，您可以右键单击数据库、转到任务、生成脚本、选择表等，然后生成将数据插入表中的脚本，如下[所示](https://stackoverflow.com/questions/10531484/how-to-export-data-from-sql-server-2008-2010-in-dml-sql-script)

有什么方法可以通过指定一些选择子句来限制正在编写的数据？例如，我可能只想编写表中前 100 行或设置了 IsManager 标志的雇员表中的所有记录。

如果我不能使用任务-> 生成脚本功能来做到这一点，还有其他替代方法或工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:15:09.053

我不知道这是否可以直接在 SSMS 中完成，但您可以创建一个查询来返回 sql 文件的内容（至少是插入语句）：

```
SELECT 'insert into yourtable (id,othercol) values (' + cast(id as varchar) + ',''' + othercol + ''');'
FROM yourtable 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/ea34e/1)

请务必将您的非 varchar 字段转换为 varchar。

# python - 如何将附加分页页面附加到 Django 中的表？

> ID：15560769
> 
> 赞同：-1
> 
> 时间：2013-03-22T00:41:58.477
> 
> 标签：python, html, django, pagination

我正在将查询数据从 MySQL 服务器加载到多个表中。每个表中可能有数千行，因此我尝试使用每个表底部的“加载更多”按钮设置分页。

假设每个表最初显示前 100 行数据。有没有一种简单的方法来实现一个按钮，它将下一页查询数据附加到当前选定的表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:08:27.997

始终将您的分页设置为第 1 页`p.page(1)`并动态更改（即 url 参数）行数`page_range`，考虑到此数字应低于记录总数`p.count`。

[https://docs.djangoproject.com/en/dev/topics/pagination/](https://docs.djangoproject.com/en/dev/topics/pagination/)

编辑说明：我应该警告你，你正在完全破坏分页概念，就像花哨的无限分页一样，一些网络浏览器可能会因为试图显示过多的 HTML 而死。

# javascript - 动态 Jquery 移动手风琴

> ID：15560771
> 
> 赞同：1
> 
> 时间：2013-03-22T00:42:16.347
> 
> 标签：javascript, jquery, jquery-mobile, accordion

在尝试使用 jquery 创建动态手风琴时，我无法弄清楚为什么单个元素没有折叠。它们只是作为文本出现，而不是呈现手风琴效果。谁能发现我的错误？（假设数据变量都包含数据）

**编辑：**出于好奇，我只是在 firefox 而不是 chrome 中尝试过，手风琴行为有效..我不明白

```
var outdiv = $('<div data-role="collapsible-set"></div>');

for(var i=0; i<data.length; i++){

    var innerdiv = $('<div data-role="collapsible" data-collapsed="true" ></div>');
    innerdiv.append('<h3>' + 'Tweet #' + i + '</h3>');
    innerdiv.append('<p>' + data[i].text + '</p>');

    outdiv.append(innerdiv);

    outdiv.appendTo('#output');

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T03:08:08.270

你需要调用`collapsibleset()`你的方法`outdiv`

```
$('#output [data-role=collapsible-set]').collapsibleset(); 
```

在这里工作**[jsFiddle](http://jsfiddle.net/pmatseykanets/3wBnP/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:04:37.987

我不是 jQuery 移动用户，但在我看来，您需要为添加的内容设置行为，例如`$('#output').trigger('create')`在循环之后。

[它在这里](https://stackoverflow.com/questions/5562461/refresh-a-section-after-adding-html-dynamically-to-jquery-mobile)讨论得更多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T02:13:11.087

我不知道您是否可以通过这种方式选择整个元素，但您也可以使用 jQuery 的[Attribute Contains Selector](http://api.jquery.com/attribute-contains-selector/)

```
//So your outdiv would become 
var outdiv = $('div[data-role*="collapsible-set"]');

//And then innerdiv, something like
var innerdiv = $('div[data-role*="collapsible"][data-collapsed*="true"]'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-04T01:59:57.663

将您的代码更改为：

```
outdiv.append(innerdiv).collapsibleset("refresh"); 
```

您必须下载*jQuery Mobile 1.3.2 版*。

# sorting - 在 common lisp 中对子列表进行排序

> ID：15560773
> 
> 赞同：4
> 
> 时间：2013-03-22T00:42:21.793
> 
> 标签：sorting, lisp, common-lisp, sublist

很简单

有了这个，`(sort L #'> :key #'second))`我可以排序，`(((C) 1) ((D) 1) ((E) 1) ((F) 1) ((G) 1) ((H) 1) ((B) 3) ((A) 8))`

但现在我想排序，`((((A) 8)) (((B) 3)) (((C) 1)) (((D) 1)) (((E) 1)) (((F) 1)) (((G) 1)) (((H) 1)))`.

我需要做什么才能`(sort L #'> :key #'second))`让第二个列表进行排序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T02:02:06.563

我希望我能正确理解你的问题。

你需要的是`:key (lambda (x) (second (car x)))`.

但是，[您甚至不需要](http://www.lispworks.com/documentation/HyperSpec/Body/f_car_c.htm) `lambda`：

```
(cadar '(((A) 8)))
==> 8 
```

`:key #'cadar`你的朋友也是。

# java - javadoc 注释中的“HTML”是否会降低可读性？是这样，有什么选择？

> ID：15560777
> 
> 赞同：9
> 
> 时间：2013-03-22T00:42:28.550
> 
> 标签：java, javadoc

在 javadoc 注释中使用 HTML 是好还是坏？

当我查看 java 方法的注释时，它们的格式看起来都很好，顶部是方法的名称，然后是整个方法头，但是当我将 javadoc 添加到我的方法时，它几乎不可读（我的意思是使用时弹出的信息编写代码时的自动完成）。

所以我尝试将 HTML 添加到 javadoc 注释中。它看起来更好，但是当我生成 javadoc 并查看浏览器中的注释时，布局全乱了。

当直接在代码中阅读时，添加 HTML 会使我的评论难以阅读。

我的评论示例：

```
/**
* <br/>
* <li><b><i>hasChanged</i></b></li>
* <br/><br/><br/>
* 
* <pre>public void hasChanged(boolean changed)</pre>
* <br/>
* 
* This method can notify the observers when a change has occurred in a model.
* <br/><br/>
* 
* The observer can then set the right controls
* <br/><br/>
* 
* @param changed
* <br/><br/>
* Pass true if a model has been changed from it's starting values <br/><br/>
* Pass false if the model has it's initial values<br/><br/>
*/ 
```

是否有一些最佳实践如何在 java 中编写注释，以便它可以从浏览器中的 javadoc 中很好地格式化和读取，就像直接从代码中读取它一样？

还有关于文本评论应该包含的任何指导方针吗？例如，方法的注释应始终以“此方法..”或其他内容开头。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-08T09:05:27.367

您的问题没有“正确”答案，因为这在很大程度上取决于您希望从 javadoc 工作中得到什么；然而，保持代码本身的符号尽可能简单和整洁是一种很好的做法，因此这里不建议使用大量*HTML*。

如果您的目标是生成高质量的独立 HTML 文档；特别是如果它正在记录一个源代码不存在的库，那么源代码中的 HTML 中广泛的显式格式可能是一种有用的技术。

更典型的是，这是我目前的活动，要求是生成在多个地方易于阅读的东西，即源代码；独立文件；并在诸如eclipse之类的IDE中。Eclipse 从 HTML 文档中生成与您想要的内容相同的可能性很低，因此接受该限制并保持格式最小化是最简单的。让工具完成它的工作有很多话要说。

留给它自己的设备，该工具将以新用户熟悉的形式产生一些东西——这本身就具有相当大的“易用性”价值。美在旁观者的眼中; 您喜欢的格式可能对其他人来说是可怕的。

我对您在评论中记录方法原型（“前”行）感到困惑。让工具来做这件事，工具的好处是阻止手动文档和代码之间的不匹配，你只是在注释中给自己更多的维护工作。

保持格式简单的一个好处是它使源代码注释在原位易于阅读。这使得它们更有可能被开发人员准确维护。

如果您在一个团队中工作并希望其他人保持 javadoc 的质量和一致的格式，那么再次使用绝对最小的格式具有商业意义。如果不让开发人员也将“br”放在正确的位置，就很难让开发人员写出有意义的评论。

*保持格式简单确实意味着对评论的文字*做更多的工作，以便以一种清晰简洁的方式传达您试图提供的信息，而无需强调。为了回答你的第二个问题，我*不会*用“这种方法......”等来填充它。文本量较少意味着它更容易被读者浏览和接受。

总之，这样做是有问题的做法（如果你在一个团队中工作，绝对不要这样做），原因如下：

*   源代码的可读性
*   保持一致性和准确性
*   不要让其他人把它搞砸，工作会回到你身边来解决它（一次又一次）

专注于在文本中获取正确的**信息。**用户会为此感谢你，而不是因为它呈现的字体。

希望这可以帮助。

# css - 在 CSS 中以“...”结束行

> ID：15560779
> 
> 赞同：1
> 
> 时间：2013-03-22T00:42:42.043
> 
> 标签：css

我想知道我可以用来使被打断的句子（按宽度）以...结尾的属性，例如：

```
div { width: 100px;
unknown-property: ...; 
```

}

```
<div>That is my sentence under 100px </div> 
```

如果句子超过 100px，就会发生这种情况：

```
That is my sentence with more... 
```

我希望我能解释一下。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T00:43:55.477

干得好：

```
text-overflow: ellipsis; 
```

您可能需要：

```
white-space: nowrap;
overflow: hidden; 
```

# java - JUnit spring 资源覆盖

> ID：15560788
> 
> 赞同：0
> 
> 时间：2013-03-22T00:43:10.400
> 
> 标签：java, spring, maven, junit4, m2e

我有一个基本结构为 src/(main|test)/(java|resources)/... 的 java 项目我使用的是 servlet 2.5 和 xml 配置的 spring。我的 BaseDaoTest 类如下所示：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={
        "classpath:spring/datasource-context.xml",
        ...,
})
@TransactionConfiguration
@Transactional
public abstract class BaseDaoTest extends AbstractTransactionalJUnit4SpringContextTests { } 
```

所以在我的 src/main/resources/spring/ 下是文件 datasource-context.xml 。为了进行测试，我使用的是内存数据库，所以我也进入了 src/test/resources/spring datasource-context.xml 。

大约 3/4 年一切正常。从 src/test 加载的测试上下文，从 src/main 加载。从昨天开始（我不知道我改变了什么，或者改变了什么），每当我在 Eclipse 中运行所有测试（rclick 项目 -> 运行为 -> junit ...）时，每个测试用例都会失败。我发现 src/main/... 资源被加载而不是 src/test/...

有谁知道发生了什么？我可以通过重命名测试特定的资源来让它工作，但我很好奇为什么加载器（？）改变了优先级来加载主要而不是测试。如果我运行单个测试类，它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:57:39.373

我怀疑您的运行配置设置可能已更改。分析包上的运行配置设置，右键单击包并选择属性。然后选择左侧运行/调试设置中列出的运行配置。你要密切关注类路径。可能类路径的顺序已更改，或者目录已从类路径中添加或删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:36:53.570

我的同事告诉我做一些史诗般的清洁。Eclipse 菜单栏：Project -> Clean；mvn 日食：清洁；F5; Maven 强制更新；生成源等等；等等......现在一切正常。我认为我以前从未使用过的最重要的部分是 mvn eclipse:clean。

# c - 在C中将int数组更改为float数组

> ID：15560790
> 
> 赞同：0
> 
> 时间：2013-03-22T00:43:14.010
> 
> 标签：c, arrays, floating-point, int

有谁知道如何将整数数组转换为浮点数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:48:30.413

你的问题措辞不好；然而，假设你已经声明了你的整数数组，你可以尝试这样的事情：

```
// instantiate float array    
float fArray[sizeOfIntArray];

// step through each element of integer array, and copy into float array as float   
for(int i = 0; i < sizeOfIntArray; ++i) {
    fArray[i] = (float)iArray[i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:51:18.443

您不能转换已经存在的数组。但是，您可以这样做以获得类似的结果：

```
int int_array[10];
float float_array[10];

int I = 0;

for (I=0; I<10; I++) {
      float_array[I] = (float)int_array[I];
} 
```

这会将当前的 int 数组复制到另一个 float 数组。我认为整数数组的大小为 10 您可以将其替换为数组的大小。

# php - 提交前存储表单数据的最佳方式？

> ID：15560791
> 
> 赞同：1
> 
> 时间：2013-03-22T00:43:18.963
> 
> 标签：php, forms, session, datastore

首先让我描述一下场景。假设用户在我的站点中填写表单。该表单可能包含大约 14 个字段。现在完成 7 个字段后，他/她会错误地返回或关闭窗口或 pc 重新启动。

现在当他/她回来时，有没有办法向他展示 7 个字段已填满？现在要处理三种情况：

从主页返回 关闭窗口 重启电脑。

所有这些可能都没有解决方案。如果只能处理 1 和 2 的情况，那很好。

我知道会话，但到目前为止，我知道要在会话中保存一些内容，您需要提交站点或刷新，这不是我的重要案例。

所以我需要一个好方法来做到这一点？

实际上，我的网站将在每个表单中托管大约 20-40 个字段。因此，如果用户关闭选项卡或返回，为用户进行恢复非常重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:49:18.037

您还可以每 x 秒设置一次会话 VIA ajax。这样您就消除了刷新页面以保存会话值的问题。

```
setInterval(function(){
     $.post("/ajaxLogin.php",{
            value: $("#value").val()
        }, 
        function(result){
            console.log('saved!');
      });
}, 2000); 
```

这是通过 ajax 调用的 ajaxLogin.php

```
<?php
    session_start();
    $_SESSION['value'] = $_POST["value"];
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:49:52.093

在网络世界中，通常的做法是将数据保存在 Cookie 或会话中。Cookies 存储在用户的机器中，直到其到期日期到期，而 Sessions 通常具有较短的时间跨度（通常取决于服务器的会话生存时间）。

如果用户可以离开并稍后返回（即使在重新启动后），一种方法是将其保存到 cookie 中。为此，您可以在 PHP 中使用 setcookie 并序列化数据。

例子：

```
setcookie("UserFormData", serialize($_POST), time()+3600);  /* expire in 1 hour */ 
```

来自： http: [//php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T00:48:25.143

您可以使用[Ajax](http://api.jquery.com/jQuery.ajax/)将数据保存到会话...您不需要刷新..您可以在每个字段更新或任何时候进行 ajax 调用.. ajax 调用不需要等待表单提交.. 它可以在每次按键/按键时触发（尽管不推荐）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T00:50:58.860

您可以创建一个 onchange 函数来[创建/更新 cookie](http://www.javascripter.net/faq/settinga.htm)。您可以为每个输入设置一个特定的 cookie，假设您使用的是 PHP，并且我提供的链接中的函数可以执行以下操作：

```
<input type="text" name="username" onchange="SetCookie('username',this.value,1);" value="<?=$_COOKIE['username'];?>" /> 
```

这似乎很乏味，可能有更好的解决方案......

# javascript - 如何判断android用户是否来自主屏幕应用程序

> ID：15560799
> 
> 赞同：10
> 
> 时间：2013-03-22T00:44:00.450
> 
> 标签：javascript, android, mobile, detection

有没有办法判断用户是否通过主屏幕快捷方式访问您的网站？使用 iOS，我可以使用以下 javascript 代码来检测用户是否通过主屏幕快捷方式打开了页面：

```
if (('standalone' in navigator && !navigator.standalone && (/iphone|ipod|ipad/gi).test(navigator.platform) && (/Safari/i).test(navigator.appVersion)) {
            window.location = 'index2.html';
        } 
```

我找不到你可以用 android 做的任何类似的事情。任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T06:05:27.450

最简洁的答案是不。”

从 Android 主屏幕启动的网站书签小部件不包含引用者（我刚刚[检查](http://www.whatismyreferer.com/)过）。

此外，在 Android 上本地安装/为 Web 应用程序添加书签的机制与 iPhone 上的完全不同，而且绝对没有功能齐全（如问题跟踪器中所[报告的那样）。](https://code.google.com/p/android/issues/detail?id=15710)

> [...]
> 
> 我明确支持这个请求，因为当时不可能在 Android 中提供一个看起来像原生的 WebApp，而不实现一个应用程序的浅外壳，只包含一个 WebView（或实现一个流行的框架，如 PhoneGap 或 apparat.io ）。
> 
> 这导致您必须支付 25 美元才能在 Android 上提供具有原生外观的 WebApp。同样的东西在 iOS 设备上是免费的——而且更优雅

*顺便说一句，上面的网站所有者略有错误。在 android 中，他可以直接从他的网站上提供应用程序，而无需支付 25 美元通过 Market/Google Play，因为 Android 使用免费的自签名证书。想了想，他的重点依然存在。这不是一件容易的事，除非他投入大量工作，否则最终结果可能不是很有用。*

相对而言，我想说的是，在 Android 上，与 iOS 相比，其精简的书签小部件主屏幕功能几乎从未使用过。

例如，我个人使用主 chrome 浏览器、谷歌搜索或现有应用程序作为我访问的任何网站的主要入口点。

![](../Images/ccfff55971441c9031ef8561fcd51ef9.png)

*在上面的截图中，左边的三个红色书签实际上是网络书签。为了将它们与我真正喜欢的非网络书签小部件进行对比，我还在右侧放置了两个电子书小部件。*

此外，我认为自己是一个高级用户，并且是许多功能的狂热早期采用者，并且我确实使用了一些较少使用的 Android 小部件，但根据 HTC 的说法，我只是这样做的[10% 的人中的](http://pocketnow.com/2013/03/01/htc-widgets-not-used)一部分（除非它是天气、时钟或音乐，显然人们在第一次设置手机时确实会使用它们！？）。

甚至对于我这个喜欢 Android 小部件（尤其是在我的 Android 平板电脑上）的人来说，较大的书签管理器小部件给我的控制太少，无法吸引我，而提供不错控制的单个网站书签小部件却没有对我来说看起来很好，我从不使用它，因为它只是一个红色书签，中间嵌入了一个小图标。

无论如何，回到你原来的问题。

没有编写一个小实用程序，您网站的每个 Android 用户都愿意在他/她的设备上安装。您唯一的选择是在用户尝试为您的网站添加书签时尝试进行干预。并且干预只会在用户设置书签时不尝试清除附加到它的任何 url 参数的书签的情况下起作用。例如，您可以将用户当前浏览您的网站的日期附加到 url，如果用户为该 url 添加了书签，则相同的 url 可能会在更晚的日期出现。这将是尝试查看用户是否来自书签（或某个地方的保存链接）的一种方法。

但是，即使您可以这样做，也只会告诉您用户是通过历史栏自动完成功能，还是通过主屏幕启动的书签，或者只是通过普通的 Chrome 启动的书签访问您的网站，而不是直接输入地址（我没有提到谷歌搜索，因为用户使用谷歌搜索，谷歌至少会给你推荐人）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:23:41.560

由于在主屏幕上创建的快捷方式与任何其他应用程序使用相同的意图（毕竟，启动器仍然是应用程序），这是不可能的。

但是，如果您自己创建了快捷方式，则可以将 URL 设置为不同的 URL，从而知道它可能来自启动器。

此外，如果您创建的应用程序可以像启动器和 Web 之间的管道，您可以将意图设置为引用该应用程序，这样您就可以假设链接是从启动器打开的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T16:24:19.060

我会选择之前所说的简短回答：不。

由于 JS 安全限制，Android 浏览器不会让任何网站访问有关用于打开浏览器或其他内容的 INTENT 的信息。

但是......等等......有一种方法可以将网站上的 JavaScript 绑定到 Android 代码（[http://developer.android.com/guide/webapps/webview.html#BindingJavaScript](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)），所以我会怎么做，给定该网站已经开发，是开发一个简单的 Android 应用程序，带有一个漂亮的图标和一个启用 JS 并指向网站的[WebView](http://developer.android.com/guide/webapps/webview.html)，所以它可以作为客户端或包装器应用程序，让我们说......“ [http:// thewebsite.com?client=android](http://thewebsite.com?client=android) “。在 WebView 上，您可以阻止导航到其他站点，因此用户不能去其他任何地方，用户将不得不使用您的站点导航。然后，您可以如上所述将 Android 代码绑定到 JavaScript，以将 Android 环境中的方法公开给您网站中的 JavaScript。

与其让人们在您的网站上添加快捷方式，不如给他们一个从 Google Play 商店下载您的小包装应用程序的链接。这样，您将知道谁在 Android 设备上使用您的网站/WebApp，并且由于您拥有该应用程序，因此您可以访问 INTENT 并了解 Android 操作系统信息，并从您网站中的 JS 获取有关该设备的更多信息UserAgent 会给你，想知道客户端上是否有活动的网络连接等。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-19T07:38:07.253

如果您正在谈论[安装到主屏幕的 PWA](https://developers.google.com/web/fundamentals/app-install-banners/)，您应该能够将查询参数添加到`start_url`. 有关示例，请参阅[https://developers.google.com/web/fundamentals/web-app-manifest/#create_the_manifest 。](https://developers.google.com/web/fundamentals/web-app-manifest/#create_the_manifest)

# c - 指针数组 - 如何从一个指针数组存储到另一个指针数组

> ID：15560800
> 
> 赞同：0
> 
> 时间：2013-03-22T00:44:03.243
> 
> 标签：c

```
#include<stdio.h>
int main(){
 char *p[2];
 char *q[2];
 char *a = "Hello";
 char *b = "world";
 p[0] = a;
 p[1] = b;
 *q = *p;
 printf("\n %s \n",q[0]);
 printf("\n %s \n",q[1]);
 return 0;
} 
```

我想将存储在 p 中的指针存储到 q。当试图打印 q[1] 时，我得到一个垃圾值。但是 q[0] 正确打印“Hello”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:45:46.273

`*q = *p`和 是一样的`q[0] = p[0]`。这就是为什么打印`q[0]`有效但打印`q[1]`无效的原因。如果要复制所有指针，则需要`for`循环或`memcpy()`.

```
memcpy(q, p, sizeof(p)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:13:59.220

如果我理解您要正确完成的工作，请声明`q`为双指针`**q`，并像这样分配它`q = p`：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T01:20:44.583

像凯文提到的问题是你所拥有的是一个指针数组......所以为了完成你想要的你需要将指针memcpy到另一个数组中。这是因为（这些是示例值，请注意 :)

```
p[0] = 0xaaa
p[1] = 0xbbb

*q == 0xaaa 
```

所以

```
q[0] = 0xaaa 
```

q[1] 是垃圾

所以你没有复制数组，只有一个值:) 希望这会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T01:57:26.817

我明白你想做什么。您认为您使用“*q = *p;”将 p 中的所有指针分配给 q。但是你知道吗，只要把 p[0] 赋给 q[0]，p 和 q 就不是指针。它们只是一个数组，您不能使用此语法将整个数组复制到另一个数组，但您可以使用 memcpy 或将其元素一个一个地分配。

# java - O(N) 排序算法

> ID：15560801
> 
> 赞同：0
> 
> 时间：2013-03-22T00:44:08.403
> 
> 标签：java, algorithm, sorting

给定一个大小为 100 的未排序值数组（列表有 100 个元素），每个值都是从 [0…1000] 范围内随机抽取的。设计一种算法以在线性时间内对给定列表进行排序（即 O(N) 最坏情况性能）。

提示：利用预先知道值范围的事实（即从 1 到 1000）

这是我班的硬件问题之一。他想要执行上述操作的函数的伪代码。我只是想不出一个具有 O(N) 最坏情况性能的函数。

PS - 它不应该像基数排序那样复杂。PSS - 我只是想知道如何做到这一点。不找人做我的功课。

这是在Java顺便说一句。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T00:50:53.770

看看[位图排序](http://designingefficientsoftware.wordpress.com/2011/03/31/bitmap-sort/)。它通过使用一组未排序的值作为数组中的索引来工作，并在 O(N) 时间内运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T01:03:20.190

我相信您正在寻找的是[Counting Sort](http://en.wikipedia.org/wiki/Counting_sort)。您跟踪每个数字出现的次数，然后按顺序将它们打印回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T01:15:48.190

Nick is correct (give him credit--I'm only answering because it wouldn't fit into the comment field).

You would define an array with 1,001 elements all initialized to zero. You read the 100 values one at a time, incrementing the array element which has the same index as the value that you are reading. After you do this 100 times, you will have an array of 1,001 elements (mostly still zero), and you simply print the number 0 as many times as specified by the value in the 0th array element, then the number 1 as many times as specified by the value in the 1st array element, etc. This sounds slow, but since it is an O(n) algorithm, it is faster than any other sorting method, but works only since you know the inputs are all integers within the range of 0 to 1,000 (1,001 total possibilities).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T01:17:34.967

Yeah, the "counting sort" would be O(n) + O(N) (where n = 100 & N = 1000). But like all schemes that claim to be better than n log(n) it "cheats", because the O(N) component is in reality an N log N component when you take into account the cost of expanding memory -- memory performance is log N to memory size. It's just that, for the particular processor in question, memory size is fixed and hence the log N factor is buried.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T02:24:57.917

在这种情况下计数排序的成本似乎是 O(N+Nsqrt(N))=O(N^3/2)。我认为这可以使用@Daniel_Williams 告诉我们的 radix_sort 来改进。例如参见麻省理工学院公开课程第 5 讲[https://www.youtube.com/watch?v=0VqawRl3Xzs](https://www.youtube.com/watch?v=0VqawRl3Xzs)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T01:31:37.130

这通常是他们在您的第一堂算法课中为此教授的算法：[http ://en.wikipedia.org/wiki/Radix_sort](http://en.wikipedia.org/wiki/Radix_sort)

# html - 溢出：没有内容？

> ID：15560802
> 
> 赞同：4
> 
> 时间：2013-03-22T00:44:08.927
> 
> 标签：html, css, layout, overflow

我正在使用 Visual Studio 2012 制作网页，并设置了 div 元素的溢出属性，因为我认为如果页面为一定大小而不使用 Javascript，这将是一种显示内容的简单方法。它在 IE 或 Firefox 上不起作用，所以我在[w3schools.com 参考资料](http://www.w3schools.com/cssref/pr_pos_overflow.asp)中查找了它，但它也没有在上面列出。如果 IE 和 Firefox 都不支持它，为什么在 Visual Studio 中会出现这种情况，并且它不在此参考中，更重要的是，是否有实际的属性可以做同样的事情？（它说如果盒子的内容溢出，那么它不会显示任何内容。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T00:49:37.557

的`no-content`值`overflow`是在[这个 CSS3 模块](http://www.w3.org/TR/css3-box)中引入的，但截至 2013 年初，还没有已知的实现。工作草案相当陈旧，但新值仍然存在于编辑草案中，因此它可能仍会在某一天被实施到规范中。

我不能说为什么这已经存在于 VS2012 中，我也不知道在纯 CSS 中实现这种效果的任何其他方式。

# authentication - 登录到受 glassfish 安全领域保护的 Web 应用程序后，继续获取 HTTP 状态 403

> ID：15560805
> 
> 赞同：1
> 
> 时间：2013-03-22T00:44:38.620
> 
> 标签：authentication, jsf-2, glassfish-3, jaas

设置：

*   玻璃鱼 3.1.1
*   JSF 2.1
*   带有 postgreSQL 的 jdbcRealm

在登录表单中输入有效的用户凭据后，我登录并重定向到下一页。但是，如果我离开该页面并转到另一个页面，当然这是在允许的 url 模式中，我会得到“HTTP 状态 403 - 对所请求资源的访问已被拒绝”。之后，我无法再访问 webapp 的任何站点。

只有在 glassfish 的 server-config/security 中将 Standard-Realm 设置为我自己的领域时，登录才有效！

我在部署时在服务器日志中收到一条警告：

```
Warnung: Keine Principals zugeordnet zu Rolle [USER].
(Warning: No principals mapped to role [USER]) 
```

如果我使用 Chrome 调试器删除 JSESSIONID，我可以再次登录。看起来会话在访问一个允许的网站或其他东西后在服务器端被破坏？！

我附上了一些相关的资料。我认为它与Realm等无关，因为登录机制有效并且没有例外......

**web.xml**

```
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>jdbcRealm</realm-name>
    <form-login-config>
        <form-login-page>/faces/login.xhtml</form-login-page>
        <form-error-page>/faces/loginError.xhtml</form-error-page>
    </form-login-config>
</login-config>

<security-constraint>
    <web-resource-collection>
        <web-resource-name>User</web-resource-name>
        <url-pattern>/faces/user/*</url-pattern>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>
    <auth-constraint>
        <role-name>ADMIN</role-name>
    </auth-constraint>
</security-constraint> 
```

**glassfish-web-app.xml（手动添加）**

```
<glassfish-web-app>
<security-role-mapping>
    <role-name>USER</role-name>
    <group-name>USER</group-name>
</security-role-mapping>
</glassfish-web-app> 
```

**登录.xhtml**

```
<h:form>
<h:outputLabel for="usernameInput">
    Username:
</h:outputLabel>
<h:inputText id="usernameInput" value="#{authBackingBean.username}" 
             required="true" />
<br />
<h:outputLabel for="passwordInput">
    Password:
</h:outputLabel>
<h:inputSecret id="passwordInput" value="#{authBackingBean.password}" 
               required="true" />
<br />
<h:commandButton value="Login" 
                 action="#{authBackingBean.login}" /> 
```

**AuthBackingBean**

```
@Stateless
@Named
public class AuthBackingBean {

    private String username;
    private String password;

    public String getUsername() {
        return this.username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return this.password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String login() {
        FacesContext context = FacesContext.getCurrentInstance();
        HttpServletRequest request = (HttpServletRequest) context.getExternalContext().getRequest();
        try {
            request.login(this.username, this.password);
        } catch (ServletException e) {
            context.addMessage(null, new FacesMessage("Login failed."));
            return "loginError";
        }
        return "user/index";
    }

    public void logout() {
        FacesContext context = FacesContext.getCurrentInstance();
        HttpServletRequest request = (HttpServletRequest) context.getExternalContext().getRequest();
        try {
            request.logout();
        } catch (ServletException e) {
            context.addMessage(null, new FacesMessage("Logout failed."));
        }
    }
} 
```

PS：我对 oracle 的文件非常失望，因为它包含许多逻辑错误、拼写错误和复制/粘贴错误。它是非结构化的、难以阅读和超载的。（对不起，但不得不说）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T00:51:04.260

这很有趣，经过数小时的测试和编写此问题后，我在发布后一分钟找到了答案：

我在 server-config/security 中激活了“Standard-Principal auf Rollenzuordnung”（Standard-Principal to Rolemapping），现在它可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-19T15:43:15.987

在遵循[角色、主体和角色映射](http://docs.oracle.com/cd/E18930_01/html/821-2418/beacr.html)的文档之后，我发现不是启用“标准主体到角色映射”，而是可以定义一个 glassfish-web.xml（在 WEB-INF 下）描述符与您的角色的映射.

例子：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD
GlassFish Application Server 3.1 Servlet 3.0//EN"
        "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd"
        >

<glassfish-web-app>
    <context-root>/istop</context-root>
    <security-role-mapping>
        <role-name>described-role</role-name>
        <principal-name>user-that-should-have-this-role</principal-name>
        <group-name>equivalent-role-in-db</group-name>
    </security-role-mapping>
</glassfish-web-app> 
```

确保`described-role`used in`<role-name />`匹配 web.xml 中的定义，使用`<role-name />`或`@DeclaredRoles`

最后，如果我正确理解“Standar-Principal to Role Mapping”选项的作用，它期望`Role`从领域映射`Goup Name Column`与您的应用程序中定义的映射匹配，因此您数据库中的任何用户都必须具有匹配的角色定义的角色之一。

# lua - LUA 和 Corona 错误：尝试调用方法“”（零值）-让我发疯

> ID：15560813
> 
> 赞同：6
> 
> 时间：2013-03-22T00:45:52.367
> 
> 标签：lua, coronasdk

对于一个让我发疯的错误，我会向你寻求帮助。

哦...我正在使用带有 Corona SDK 的 LUA 顺便说一句...

我正在创建一个船的实例。船正在实例化，我可以访问它的属性，但我不能访问任何方法！按照代码，我不知道该怎么做：

太空船.lua：

```
require('gameConf')

spaceShip = {}
spaceShip.__index = spaceShip

function spaceShip:New(posX, posY, width, height)
    local _spaceShip = nil
    _spaceShip = {}
    setmetatable(_spaceShip, spaceShip)

    _spaceShip = display.newRect(posX - width/2, posY - height/2, width, height)
    _spaceShip:setFillColor(140, 140, 140, 0)
    _spaceShip.width = width
    _spaceShip.height = height

    local shipShape = { -width/2, -height/2, width/2, -height/2, width/2, height/2, -width/2, height/2 }
    local shipShapeMaterial = { density = 1.0, friction = 1.0, bounce = 0.0 , shape = shipShape}

    local shipMotor = { -width/2, height/3, width/2, height/3, width/2, height/2, -width/2, height/2 }
    local shipMotorMaterial = { density = 1.0, friction = 1.0, bounce = 0.0 , shape = shipMotor}

    physics.addBody( _spaceShip, shipShapeMaterial, shipMotorMaterial )

    return _spaceShip
end

function spaceShip:log()
    print("ship")
end

function spaceShip:applyFrontImpulse()
    local angle = math.rad(self.rotation)
    local xComp, yComp = math.cos(angle), -math.sin(angle)
    local forceMag = 2

    self:applyLinearImpulse(forceMag * xComp, forceMag * yComp, self.x, self.y)
end 
```

和 main.lua 的一部分

```
require('camera')
require('gameConf')
require('meteor')
require('spaceShip')

-- Add Physics
local physics = require( "physics" )
physics.start()
physics.setDrawMode( "hybrid" )
physics.setGravity( 0, 0 )

-- Load camera
local camera = camera:New()

-- Containers
meteorManager = {}
shipManager = {}

-- Load Vector class
vector = require "vector"

-- Create one ship
local myShip = nil;
myShip = {}
myShip = spaceShip:New(600, 200, 30, 60)
table.insert(shipManager, myShip)
camera:insert(myShip)
myShip:log() <----- HERE IS THE ERROR

rest of the code... 
```

终端中的错误是：

```
2013-03-21 19:18:15.736 Corona Simulator[48347:707] Runtime error: 
2013-03-21 19:18:15.737 Corona Simulator[48347:707] ...t/iOS/Deep Space Harvest/Deep Space Harvest/main.lua:28: attempt to call method 'log' (a nil value)
stack traceback:
[C]: in function 'log'
...t/iOS/Deep Space Harvest/Deep Space Harvest/main.lua:28: in main chunk 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T01:05:09.633

我怀疑这个问题是因为这个片段：

```
_spaceShip = {}
setmetatable(_spaceShip, spaceShip)

_spaceShip = display.newRect(posX - width/2, posY - height/2, width, height) 
```

您在 上设置了一个元表`_spaceShip`，但随后为其分配了一个新值。此时，您分配的新值没有您建立的元表关联，因为它位于值（不是变量）上。

`setmetatable`之后移动`_spaceShip = display.newRect...`。

# mysql - 在 MySQL 中使用 getopt lib 时出现可疑的内存泄漏？

> ID：15560814
> 
> 赞同：1
> 
> 时间：2013-03-22T00:45:53.970
> 
> 标签：mysql, c, api, memory-leaks, getopt

![内存使用和线程使用监视器](../Images/ba60ece5027a8ee0fd1ddd9f8629f5b2.png)

我代表我的大学发布这篇文章。

他在使用 handle_option (MySQL getopt lib) 读取配置文件 (/etc/my.cnf) 时发现了可疑的内存泄漏

他在malloc host_name、用户名之后执行下面的源码：

```
char* host_name;
char* user_name;

struct my_option mysql_confgs[] = 
{
  {"host", "h", "MySQL Server", (uchar**) & host_name, NULL, NULL, GET_STR, 
REQUIRED_ARG, 0,0,0,0,0,0},
    {"user", "u", "userID", "h",(uchar**) & user_name, NULL, NULL, GET_STR, 
REQUIRED_ARG, 0,0,0,0,0,0}
}

handle_options(&argc, &argv, mysql_configs, aux_config_reader); 
```

他提到上面的方法是使用Error（Segment）而不是使用free（host_name）和free（user_name）？那么这是造成内存泄漏的可能原因吗？

嗯.. 我对 MySQL 的基础知识为零，所以我可能无法提供 100% 的问题描述。因此，请随时对此进行查询，我将根据查询更新问题描述的详细信息。

我的大学有语言障碍，所以我代表他发帖。

Valgrind 报告：

```
480 bytes in 1 blocks are possibly lost in loss record 26 of 43
at 0x4A068FE: malloc (vg_replace_malloc.c:270)
by 0x33E4E293C1: my_malloc (in /usr/lib64/mysql/libmysqlclient.so.16.0.0)
by 0x33E4E2C974: alloc_root (in /usr/lib64/mysql/libmysqlclient.so.16.0.0)
by 0x33E4E2E620: ??? (in /usr/lib64/mysql/libmysqlclient.so.16.0.0)
by 0x33E4E2F838: my_load_defaults (in /usr/lib64/mysql/libmysqlclient.so.16.0.0)
by 0x408BF1: MS_MYSQL_init (MS_MYSQL_O.h:109)
by 0x438A39: main_proc (AccLab.c:221)
by 0x437F8A: main (AccLab.c:67)

75,840 bytes in 158 blocks are definitely lost in loss record 41 of 43
at 0x4A068FE: malloc (vg_replace_malloc.c:270)
by 0x33E4E293C1: my_malloc (in /usr/lib64/mysql/libmysqlclient.so.16.0.0)
by 0x33E4E2C974: alloc_root (in /usr/lib64/mysql/libmysqlclient.so.16.0.0)
by 0x33E4E2E620: ??? (in /usr/lib64/mysql/libmysqlclient.so.16.0.0)
by 0x33E4E2F838: my_load_defaults (in /usr/lib64/mysql/libmysqlclient.so.16.0.0)
by 0x408BF1: MS_MYSQL_init (MS_MYSQL_O.h:109)
by 0x438A39: main_proc (AccLab.c:221)
by 0x437F8A: main (AccLab.c:67) 
```

泄漏摘要：

```
definitely lost: 75,840 bytes in 158 blocks
indirectly lost: 0 bytes in 0 blocks
possibly lost: 2,304 bytes in 7 blocks
still reachable: 9,675,408 bytes in 2,387 blocks
suppressed: 0 bytes in 0 blocks
Reachable blocks (those to which a pointer was found) are not shown.
To see them, rerun with: --leak-check=full --show-reachable=yes

For counts of detected and suppressed errors, rerun with: -v
ERROR SUMMARY: 8 errors from 8 contexts (suppressed: 4 from 4) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:39:34.827

`printf("user_name: %p; host_name: %p\n", (void *) user_name, (void *) host_name);`在调用 handle_options 之前和之后放置并运行您的代码。结果打印的另外两行是否彼此不同？如果是这样，您的诊断是正确的，并且 user_name 和 host_name 由 handle_options 更改，并且可能使用 malloc 的指针不适合此功能。

如果不是，则您的诊断不正确，并且内存泄漏在其他地方。您需要按顺序查看 MS_MYSQL_init、main_proc 和 main 的源代码，它们是项目中 valgrind 列出的三个函数。如果您需要我的帮助，请告诉我...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:25:43.700

我会说将内存分配给指针`my_option.value`所指向的组合以及使用`GET_STR`导致泄漏已分配给的内容`my_option.value`，如`GET_PTR`初始化所`my_option.value`指向的内容，指向已传递的内容中的某个`argv`地方`handle_options`，没有释放值`my_option.value`指向的东西，以前指向的东西。

`my_option.value`为了解决这个问题，要么在将其传递给之前不分配任何内存到所指向的内容，要么使用并用作值类型来`handle_options`分配它，这意味着在重新初始化它所指向的内容之前调用所指向的内容至。`my_alloc()``GET_PTR_ALLOC``GET_PTR_ALLOC``my_free()``my_option.value`

* * *

只是出于好奇：什么是`uchar`，为什么你投到`uchar **`而不是`void *`，类型`my_option.value`？

* * *

还有这个

```
"user", "u", "userID", "h",(uchar**) & user_name ... 
```

应该读

```
"user", "u", "userID", (uchar**) & user_name ... 
```

不应该吗？

# ios - 我能否以编程方式判断哪个应用程序将打开给定的 URL？

> ID：15560815
> 
> 赞同：4
> 
> 时间：2013-03-22T00:45:59.757
> 
> 标签：ios, objective-c, url-scheme, uiapplication

我试图找出给定 URL 将在哪个 iOS 应用程序中打开。

我知道“http://...”URL 将在 Safari 中打开，而“twitter://...”URL 将在 Twitter 应用程序中打开，但有没有办法以编程方式获取该信息?

我正在寻找一种可以使用 URL（或只是方案/协议）调用的方法，以找出将在调用时调用的应用程序的捆绑 ID（甚至只是本地化名称）`-openURL`。

是否存在类似以下内容？

```
[UIApplication handlerForURL:someUrl]; // @"com.dev.app" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:52:45.097

在 Mac 上，[`LSGetApplicationForURL`](https://developer.apple.com/library/mac/documentation/Carbon/Reference/LaunchServicesReference/Reference/reference.html#//apple_ref/c/func/LSGetApplicationForURL)在 Launch Services 框架中调用了一个 API 函数来为您执行此操作。

虽然 iOS 中可能存在相同的 API 函数，但[Launch Services 是私有 API](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html)。

所以不，你不能在 iOS 上这样做。

有[一个布尔方法`UIApplication`可以判断URL*是否*可以打开](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/canOpenURL%3a)，但这与知道*如何*打开 URL 不同。

# java - BufferedWriter 无法正确打印？

> ID：15560821
> 
> 赞同：0
> 
> 时间：2013-03-22T00:46:51.880
> 
> 标签：java

我正在制作一个程序，该程序在指定数量的课程中创建成绩日志并将此数据写入文本文件。它写了日期、班级名称、成绩（或者至少应该写）和结束语。由于某种原因我无法弄清楚，我的程序只打印出日期和班级名称。有任何想法吗？

这是代码：

```
 BufferedWriter data = null; //Writes Output

    try {

        File log = new File ("Grade.txt"); //Name of File
        FileWriter fileWriter = new FileWriter (log, true); //Appends File
        data = new BufferedWriter (fileWriter); //Creates BufferedWriter
        Date date = new Date (); //Sets Date

               //Code here makes an array of class names 

            System.out.print ("Enter Assignment Name:  ");
                title = reader.nextLine ();
                data.write (title);
                data.newLine (); //Blank Line
                reader.nextLine (); //Consume Input
                System.out.print ("Enter Points Possible:  ");
                temp = reader.nextInt();

                if (temp < 0){

                    throw new ArithmeticException ("");

                }else{

                    poss += temp;
                    data.write(poss);

                }//Close If

                System.out.print ("Enter Points Earned");
                temp = reader.nextInt();

                if (temp < 0){

                    throw new ArithmeticException ("");

                }else{

                    earn += temp;
                    data.write(earn);

                }//Close If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:51:23.237

`.close()`在程序结束之前，您没有编写器或文件。如果您不关闭编写器，则无法保证其内部缓冲区已刷新到文件和磁盘。

如果您使用的是 Java7，那么您可以使用 try-with-resources 来方便和正确：

```
try ( FileWriter fileWriter = new FileWriter (log, true); //Appends File
      BuferredWriter data = new BufferedWriter (fileWriter); //Creates BufferedWriter
    )
    {
    data.write("...");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:53:01.777

阅读要点后将阅读器移至下一行。使用 reader.nextInt 时，输入仅读取数字，而不是按 Enter 时创建的换行符。在 reader.nextInt 读取换行符并清除缓冲区之后调用 reader.nextLine。

```
BufferedWriter data = null; //Writes Output

try {

    File log = new File ("Grade.txt"); //Name of File
    FileWriter fileWriter = new FileWriter (log, true); //Appends File
    data = new BufferedWriter (fileWriter); //Creates BufferedWriter
    Date date = new Date (); //Sets Date

           //Code here makes an array of class names 

        System.out.print ("Enter Assignment Name:  ");
            title = reader.nextLine ();
            data.write (title);
            data.newLine (); //Blank Line
            reader.nextLine (); //Consume Input
            System.out.print ("Enter Points Possible:  ");
            temp = reader.nextInt();
            reader.nextLine(); //added this

            if (temp < 0){

                throw new ArithmeticException ("");

            }else{

                poss += temp;
                data.write(poss);

            }//Close If

            System.out.print ("Enter Points Earned");
            temp = reader.nextInt();
            reader.nextLine(); //added this

            if (temp < 0){

                throw new ArithmeticException ("");

            }else{

                earn += temp;
                data.write(earn);

            }//Close If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T00:53:55.187

该`nextInt()`方法离开`\n`（结束行）符号并立即被 拾取`nextLine()`，跳过下一个输入。你想要做的是使用`nextLine()`一切，并在以后解析它：

```
String nextIntString = keyboard.nextLine(); //get the number as a single line
int nextInt = Integer.parseInt(nextIntString); //convert the string to an int 
```

这是迄今为止避免问题的最简单方法——不要混合你的“下一个”方法。仅使用`nextLine()`，然后解析`int`s 或单独的单词。

此外，您应该在完成后始终`close()`使用`BufferedWriter`它以节省系统资源。

# c# - c#将值从当前Form1传递到Form2显示错误非静态

> ID：15560824
> 
> 赞同：-1
> 
> 时间：2013-03-22T00:47:02.217
> 
> 标签：c#, setvalue, trygetvalue, newforms

```
private void btn_justest_Click(object sender, EventArgs e)
{           
    using (var myForm = new FormShowResult())
    {
        myForm.Show();
        textBoxNameTest.Text = FormShowResult.TheValue;
    }
} 
```

* * *

在表格 2 中：

```
public string TheValue
{
    get { return richtb_Show.Text; }
} 
```

* * *

问题是出现错误“非静态字段、方法或属性需要对象引用”如何解决

我的目的是调用给Form2的Function的参数设置一个值，并在启动Form2时加载该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:48:19.863

您需要使用`myForm`变量来访问实例，而不是类型名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T01:10:17.223

```
 textBoxNameTest.Text = myForm.TheValue; 
```

# php - 在 POST 请求中请求有效负载

> ID：15560825
> 
> 赞同：1
> 
> 时间：2013-03-22T00:47:15.020
> 
> 标签：php, post, request, screen-scraping, payload

我正在尝试抓取一个 PHP 网站，而不是表单数据，我在标题部分看到有效负载请求。什么是有效载荷请求？我正在使用 Chrome 的开发人员工具来分析数据。

例如：

```
Request Payload
------WebKitFormBoundaryWEXJCV0v7CwVqn0X
Content-Disposition: form-data; name="Command"

-1
------WebKitFormBoundaryWEXJCV0v7CwVqn0X
Content-Disposition: form-data; name="name_1"

12
------WebKitFormBoundaryWEXJCV0v7CwVqn0X
Content-Disposition: form-data; name="pass_1"

34
------WebKitFormBoundaryWEXJCV0v7CwVqn0X
Content-Disposition: form-data; name="logins"

Î•Î¯ÏƒÎ¿Î´Î¿Ï‚
------WebKitFormBoundaryWEXJCV0v7CwVqn0X
Content-Disposition: form-data; name="email" 
```

我想做的就是抓取一个需要用户名和密码的网站。

```
My code is this:
function get_data_with_post_fields($url, $fields_data) {

      $ch = curl_init();
      $timeout = 5;
      curl_setopt($ch, CURLOPT_URL, $url);
      curl_setopt($ch, CURLOPT_USERAGENT,'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');
      curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
      curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
      curl_setopt($ch, CURLOPT_ENCODING, ""); 
      curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
      curl_setopt($ch, CURLOPT_POST, 1);
      curl_setopt($ch, CURLOPT_POSTFIELDS,$fields_data);
      curl_setopt($ch, CURLOPT_FRESH_CONNECT, 1);

      $data = curl_exec($ch);
      curl_close($ch);
      return $data;
}

$url_to_scrape = 'http://www.awebsite.com/index.php?com=products&id=10000';

                $PF = "&name_1=xxx&pass_1=xxx";

        print $raw = get_data_with_post_fields($url_to_scrape,$PF); 
```

我应该如何形成我的 POST REQUEST？任何帮助都感激不尽。

# php - 在 eval 上使用 str_replace 更改变量

> ID：15560826
> 
> 赞同：-3
> 
> 时间：2013-03-22T00:47:28.470
> 
> 标签：php, eval, str-replace

我想知道如何更改 eval 上的变量

看代码，请帮助我

```
$status = "HD";

$vari = "XX";

$condition = "if($status<>'99' && $status<>'XX' && $status<>'XM' && $status<> 'XD' && $status<> 'XY' && $status<> 'XE') 
{ echo 'YES'; } else { echo 'NO'; }";

$condition = eval($condition );

echo $condition;
echo "<hr>";

$resp = str_replace('status','vari',$condition);
echo eval($resp); 
```

问题是，不要改变变量..看看改变结果是或否......

我想在我的 WHILE 表达式上使用这项工作

```
while($condition) {

   ...

} 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:00:40.163

如果我错了，请纠正我，但是从你上面的代码中，当你评估你的 $condition 字符串时，你又把它放回 $condition。除非您的评估代码中包含“返回”，否则它将返回 null ( reff : [http://php.net/manual/en/function.eval.php](http://php.net/manual/en/function.eval.php) )。

但是您的问题实际上是在 $condition 上误用了 "。当您使用 " 在 php 上包装字符串时，它将将该字符串上的每个变量更改为该代码上方为该变量定义的值。

所以，不是让你的代码由 php 评估，你实际上是在向 eval() 发送错误的代码。

您当前的 $condition 代码是：

```
if(HD<>'99' && HD<>'XX' && HD<>'XM' && HD<> 'XD' && HD<> 'XY' && HD<> 'XE') { echo 'YES'; } else { echo 'NO'; } 
```

你想要达到的是：

```
if($status<>"99" && $status<>"XX" && $status<>"XM" && $status<> "XD" && $status<> "XY" && $status<> "XE") { echo "YES"; } else { echo "NO"; } 
```

请将 " 更改为 ' ，因为 ' 中的字符串将保持原样（如果您想将 ' 放入其中，请使用反斜杠 (\) 对其进行转义）并看看会发生什么。

我的工作：

```
$status = "HD";
$vari = "XX";
$condition = 'if($status<>"99" && $status<>"XX" && $status<>"XM" && $status<> "XD" && $status<> "XY" && $status<> "XE") { echo "YES"; } else { echo "NO"; }';
eval($condition );
echo $condition;
echo "<hr>";
$resp = str_replace('status','vari',$condition);
eval($resp); 
```

# ruby-on-rails - 为什么 rails 不生成对象类型

> ID：15560827
> 
> 赞同：0
> 
> 时间：2013-03-22T00:47:38.960
> 
> 标签：ruby-on-rails, ruby, json, ruby-on-rails-3

出于某种原因，我的控制器创建的任何 json 都会生成一个 json 数组，但不会生成一个对象。我想知道它的行为是否正常？如果它我怎么能得到我正在寻找的东西。

这里的控制器

```
def index
  @articles = Article.all
  respond_to do |format|
    format.json  { render :json => @events }
  end
end 
```

现在在这里我实际上得到了什么

```
[{"allday":true,"created_at":"2013-01-10T23:49:19Z","customer_id":1,"description":"A meeting tomorrow between Prime Minister","id":35}] 
```

现在但是我想先看看这个对象，就像标准 json 一样

```
{ "Article":{"allday":true,"created_at":"2013-01-10T23:49:19Z","customer_id":1,"description":"A meeting tomorrow between Prime Minister","id":35}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:23:27.297

您应该启用`ActiveRecord::Base.include_root_in_json`以全局获取所需的行为。从[文档](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json)：

> 该选项`include_root_in_json`控制 `as_json`. 如果为 true（默认值）`as_json`将发出以对象类型命名的单个根节点。例如：
> 
> ```
> user = User.find(1)
> user.as_json
> # => { "user": {"id": 1, "name": "Konata Izumi", "age": 16,
> #               "created_at": "2006/08/01", "awesome": true} }
> 
> ActiveRecord::Base.include_root_in_json = false
> 
> user.as_json
> # => {"id": 1, "name": "Konata Izumi", "age": 16,
> #     "created_at": "2006/08/01", "awesome": true} 
> ```
> 
> 也可以通过将`:root`选项设置为`false`如下方式来实现此行为：
> 
> ```
> user = User.find(1)
> user.as_json(root: false)
> # =>  {"id": 1, "name": "Konata Izumi", "age": 16,
> #      "created_at": "2006/08/01", "awesome": true} 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:50:23.020

您可以构建一个 ruby​​ 对象或哈希来反映您想要返回的 json 对象的结构并渲染它。

```
def index
  @articles = Article.all
  respond_to do |format|
    format.json  { render :json => @events.map { |e| { Article: e } } }
  end
end 
```

这会给你类似的东西

```
[{ "Article":{"allday":true,"created_at":"2013-01-10T23:49:19Z","customer_id":1,"description":"A meeting tomorrow between Prime Minister","id":35}}] 
```

# r - R 引用向量列表中向量的元素

> ID：15560828
> 
> 赞同：1
> 
> 时间：2013-03-22T00:47:51.673
> 
> 标签：r, list

如果我有一个包含例如坐标的列表，我如何单独引用列表中每个元素的元素？

`coord=list(c(104,1.5),c(144.97,-37.78),c(121.5,25.03))`

我想做的是

```
for(i in coord){
print(i[1])
print(i[2])} 
```

上面的例子不起作用（在实践中我当然会用它们来绘制一些东西）。

以下一个确实有效，但我试图看看是否有更优雅的“R”方式来做到这一点。

```
coord=c(c(104,1.5),c(144.97,-37.78),c(121.5,25.03))
for(i in seq(1,length(coord),2)){
print(coord[i])
print(coord[i+1])
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T01:16:07.280

I think you just need `unlist` for that.

```
unlist(coord)
## [1] 104.00   1.50 144.97 -37.78 121.50  25.03 
```

If you are looking to extract them as 2 column data to plot then you should cast `unlist`ed data to `matrix`

```
plot(matrix(unlist(coord), ncol = 2, byrow=TRUE)) 
```

This should give you figure as below

![enter image description here](../Images/c5a0f8d74c3cdbc07b73f82678816de6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T03:32:20.847

我不太明白你到底想要什么...

你不是想这样做吗？

```
> coord[[1]][1]
[1] 104 
```

# android - 获取列中出现次数最多的字符串

> ID：15560830
> 
> 赞同：-1
> 
> 时间：2013-03-22T00:47:59.100
> 
> 标签：android, sqlite

我有一个名为“位置”`SQLite` `database`的`Android`应用程序。`column`

**例子**

```
 Locations

 Home
 Home
 Home
 School
 Work 
```

我想运行一个`query`返回的，`String` `Home`因为这是`String`本专栏中最常出现的。我看过一些类似的帖子，但没有`SQLite`用于`Android`应用程序。

***注意***
我正在寻找尽可能少的代码。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T01:07:09.377

你发现了哪些类似的东西？您没有说您是否使用了帮助程序，或者您是否正在尝试使用直接/原始 SQL 查询。我会尝试的查询是

我会尝试：

```
select locations, count(*) as times from table group by locations order by times desc limit 1; 
```

然后直接抢第一个。

# python - Django 使用环境变量拆分设置环境

> ID：15560835
> 
> 赞同：2
> 
> 时间：2013-03-22T00:48:20.593
> 
> 标签：python, django, environment-variables

我有一个`common.py`,`dev.py`和`prod.py`用于我的 Django 设置文件。所有文件都继承自`common.py`. 我想将我的数据库密码、数据库 URL 等作为环境变量存储在我的在线存储库之外。

我在 Stackoverflow 和网络上研究过环境变量，但我不确定我是否清楚地了解它。

我到底应该在我的 bash shell 中输入什么，或者像`export SOMEAPP_DB_USER='someapp'`, `export SOMEAPP_DB_PASSWORD='1234'`, 之类的东西在我的`bash_profile`?

如果命令是通过 shell 发出的，它只对我所在的终端会话有用，还是在我调用应用程序虚拟环境时永久设置？

设置文件应该如下设置吗？

```
DATABASE_USER = os.environ.get("SOMEAPP_DB_USER", ")
DATABASE_PASSWORD = os.environ.get("SOMEAPP_DB_PASSWORD", ") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T01:48:19.597

环境与进程相关联，并在父进程分叉时继承一个副本。您可以在运行另一个命令之前让 bash 将设置注入环境。

以下命令将`./manage runserver`在现有的 bash 环境中运行，并添加两个额外的环境变量`DJANGO_SETTINGS_MODULE`和`MY_DB_PASSWORD`.

```
DJANGO_SETTINGS_MODULE=myproject.settings.dev MY_DB_PASSWORD=foo ./manage.py runserver 
```

正如您所建议的，您可以在设置文件中使用以下 Python 代码从环境中提取值。

```
import os
db_passwd = os.environ.get('MY_DB_PASSWORD', 'default-db-password') 
```

您可以将密码放入 中`.profile`，但这可能不是一个好主意，因为您将敏感信息与非敏感信息混合在一起。然后，您必须保护`.profile`文件权限，否则其他人将只能读取文件以获取您的密码。

我认为在这种情况下更好的设置管理方法是有一个单独的文件专门用于敏感设置，例如密码。保护此文件的权限，以便只有需要它的用户才能读取，例如您的 Web 服务器。然后，您可以从您的密码文件中读取此密码文件`settings.py`以获取密码。Python [ConfigParser 模块](http://docs.python.org/2/library/configparser.html)的使用在这里可能很有用。

如果需要，您可以使用环境变量来指定此文件的位置，或者如果未指定，则回退到默认值。

例如。DB_PASSWD_FILE=~/tmp/test_db_passwords.ini ./manage.py 运行服务器

然后在`settings.py`

```
import os
db_passwd_file = os.environ.get('DB_PASSWD_FILE', '/etc/myproject/db_passwords.ini')

# Instantiate a ConfigParser object here to read passwords from db_passwd_file. 
```

这允许默认行为在系统受保护的文件中查找，`/etc/myprojecdt/db_passwords.ini`除非该位置已被`DB_PASSWD_FILE`环境变量覆盖。

在开发过程中，您可以设置`DB_PASSWD_FILE`指向一个合理的位置以用于`.profile`. `DB_PASSWD_FILE`指向的路径可以被保护为仅由您使用文件系统权限读取。

# php - 使用 3rd 方插件重命名内置函数？

> ID：15560839
> 
> 赞同：0
> 
> 时间：2013-03-22T00:48:41.003
> 
> 标签：php, function, rename, built-in

我想在我的代码中使用“php_”作为内置 PHP 函数的开头，以便更容易地识别它们，并且无需使用第 3 方附加组件即可。所以我的第一次尝试是这样的：

```
<?php
define('php_date_default_timezone_set', 'date_default_timezone_set');
define('php_date', 'date');

php_date_default_timezone_set('America/Los_Angeles');
echo php_date('l, F j, Y \a\t g:i:s a');
?> 
```

这会导致错误，

> PHP 致命错误：调用未定义函数 php_date

一种[丑陋的]实际可行的方法是：

```
<?php
define('php_', '');

php_.date_default_timezone_set('America/Los_Angeles');
echo php_.date('l, F j, Y \a\t g:i:s a');

?> 
```

我怀疑有不止一种方法可以做到这一点。你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:00:24.967

您可以将这些函数包装在您自己的自定义函数中。Mark Ormston 的方法更好。

```
function php_date_default_timezone_set($timezone)
{
    date_default_timezone_set($timezone);
}

function php_date($date) 
{
    date($date);
} 
```

# sql - SQLplus 不再执行 CREATE TABLE 语句

> ID：15560843
> 
> 赞同：0
> 
> 时间：2013-03-22T00:49:03.973
> 
> 标签：sql, oracle, sqlplus, cascade, drop-table

```
SET TERMOUT ON
PROMPT Building Hotel tables.  Please wait.
--SET TERMOUT OFF

DROP TABLE BD;
DROP TABLE BR;
DROP TABLE D;
DROP TABLE R;

CREATE TABLE RT
    (TYPE VARCHAR2(11) NOT NULL,
    RATE NUMBER(6,2),
    CONSTRAINT roomtype_pk PRIMARY KEY(TYPE));

        INSERT INTO RT VALUES ('MAGNIFICENT', 200.00);

  ....

COMMIT; 
```

大家好，这里需要注意一些关于 SQLPlus oracle sql 语句的奇怪之处。我有一个 create.sql 文件，它看起来像上面的代码片段示例，它构建了我的数据库表。包含“INSERT”和“CREATE”语句。今天和昨天它在终端上工作正常，所有表都按照指示删除和创建。我离开家它工作正常，回家并执行 start create.sql 并且显然**所有表都不存在**！！！！

```
ERROR : 
ORA-00942: table or view does not exist 
```

无论我做什么，重新启动计算机，重新启动终端，更改文件名......没有任何效果。自从让它工作正常以来，没有任何线路发生变化。什么问题。注意我确实有与表正确集成的外键约束。我的小组成员处理同一个文件时也发生了同样的情况。但不同时期。

# c# - 当对象是 IQueryable 时返回 IEnumerable

> ID：15560844
> 
> 赞同：0
> 
> 时间：2013-03-22T00:49:12.993
> 
> 标签：c#, entity-framework, ienumerable, iqueryable

我对 IEnumerable 以及`IQueryable`与 Entity Framework 的使用交换有点困惑。我已经尝试尽可能多地在这个主题上进行谷歌搜索，但它似乎没有帮助。所以这是我的情况。

我有一个函数（`MyClass`是一个`EntityObject`）：

```
IEnumerable<MyClass> GetMyClasses(int id) {
    return GetQuery().Where(p => p.Id==id);
}

IQueryable<MyClass> GetQuery() {
    // returns an IQueryable list here
} 
```

现在我的问题是。鉴于我在这里返回一个 IEnumerable 而不是一个`IQueryable`，当使用**ToList()**执行语句时，生成的底层 SQL 是否会考虑该`Id == id`语句，因此只返回过滤器项，或者它将数据库的所有对象都带入内存并在该列表上执行 Where 子句？

任何帮助，甚至指向描述此的资源的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:58:23.083

> **当使用ToList()**执行语句时，生成的底层 SQL 是否会考虑 Id == id 语句，因此仅返回过滤器项

简短的回答是“是”。

只有`Enumerable.ToList<T>(this IEnumumerable<T> e)`且没有对应物`IQueryable<T>`

方法中的所有内容都`GetMyClasses`将作为 操作`IQueryable<T>`，但之后添加的限制将在内存中。

```
IEnumerable<MyClass> GetMyClasses(int id) {
    return GetQuery().Where(p => p.Id==id); // this always will work as IQueryable and handled by provider (in case of EF - the DB query will be performed)
}

IEnumerable<MyClass> MoreRestrictions(int id) {
     return GetMyClasses(id)
         .ToList(); // result list will be filtered by Id
}

IEnumerable<MyClass> MoreRestrictions(int id) {
     return GetMyClasses(id)
         .Where(x=>x.IsActive) // this where will be performed in memory on results filtered by Id.
         .ToList(); 
} 
```

方法`ToList`和`Where`工作如下

```
//There is only one implementation of ToList()
public List<T> ToList<T>(this IEnumerable<T> e) 
{
    var list = new List<T>();
    var enumerator = e.GetEnumerator();
    while (enumerator.MoveNext())
    {
        var item = e.Current;
        list.Add(item);
    }
    return list;
}

//Implementation for IEnumerable
public IEnumerable<T> Where<T>(this IEnumerable<T> e, Predicate predicate) 
{
    var enumerator = e.GetEnumerator();
    while (enumerator.MoveNext())
    {
        var item = e.Current;
        if (predicate(item))
            yield return item;
    }
}

//Implementation for IQueryable
public IQueryable<T> Where<T>(this IQueryable<T> e, Expression<Predicate> predicate) 
{
    MethodBase method = ...; // create generic method of Queryable.Where()
    return e.Provider
        .CreateQuery<T>(Expression.Call(null, method, e.Expression, Expression.Quote(predicate)));
} 
```

IQueryable的`GetEnumerator`方法进行查询物化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:06:04.343

你把这弄得太复杂了。考虑以下：

```
public class Base { }

public class Derived : Base { }

public Base Method() {
    return GetOtherMethod();
}

public Derived GetOtherMethod()
{
    return new Derived ();
} 
```

您想知道 from 的返回值的特征`Method`。它将是 的一个实例`Derived`，但您只能将其用作 a `Base`，除非您将其强制转换为`Derived`.

因此，您`GetMyClasses`将返回一个`IQueryable<MyClass>`只能用作`IEnumerable<MyClass>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-14T02:17:50.110

这篇文章很有帮助： [IQueryable vs IEnumerable in LINQ-to-SQL](http://www.hamishgraham.net/post/RE-IQueryable-vs-IEnumerable-in-LINQ-to-SQL-queries.aspx)。

引用那篇文章，'根据 MSDN 文档，对 IQueryable 进行的调用是通过构建内部表达式树来操作的。“这些扩展 IQueryable(Of T) 的方法不直接执行任何查询。相反，它们的功能是构建一个 Expression 对象，这是一个表示累积查询的表达式树。”'

表达式树是 C# 和 .NET 平台上非常重要的构造。[（它们通常很重要，但 C# 使它们非常有用。）为了更好地理解差异，我建议在此处阅读官方 C# 5.0 规范中的](http://www.microsoft.com/en-us/download/details.aspx?id=7029)*表达式*和*语句* 之间的差异。对于分支到 lambda 演算的高级理论概念，表达式支持将方法作为一等对象。IQueryable 和 IEnumerable 之间的区别集中在这一点上。IQueryable 构建表达式树，而 IEnumerable 没有，至少对于我们这些不在微软秘密实验室工作的人来说不是一般意义上的。

这是另一篇非常有用的文章，详细介绍了推与拉的区别。（通过“推”与“拉”，我指的是数据流的方向[。.NET 和 C# 的反应式编程技术](http://www.codeproject.com/Articles/646361/Reactive-Programming-for-NET-and-Csharp-Developers)

这是一篇非常好的文章，详细介绍了语句 lambda 和表达式 lambda 之间的区别，并更深入地讨论了表达式树的概念：[Revisiting C# delegates, expression trees, and lambda statements vs. lambda expressions。](http://www.amazedsaint.com/2010/09/revisiting-few-c-concepts-delegates.html).

# css - 我需要我的菜单来浏览图像

> ID：15560847
> 
> 赞同：0
> 
> 时间：2013-03-22T00:49:29.537
> 
> 标签：css, wordpress

有没有办法移动我当前位于图像下方的主菜单以重叠图像。

当我尝试向上移动菜单时，图像隐藏了菜单。注意我不是指顶部的菜单，它很快就会被删除。[http://bethplummer.com/projectdemo/](http://bethplummer.com/projectdemo/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:52:03.207

该图像隐藏了您的菜单，因为它首先被调用，`z-index`但您可以更改它。将此添加到您的CSS：

```
#menu-menu {
overflow: hidden;
margin-top: -76px;
position: relative;
z-index: 100;
} 
```

# c# - MVC4 从枚举创建视图

> ID：15560848
> 
> 赞同：0
> 
> 时间：2013-03-22T00:49:30.353
> 
> 标签：c#, asp.net-mvc-4

我有一个要创建/保存的视图，而不是模型，而是使用枚举，如下所示。

```
public enum RulesEnum
{
    StopAtLight = 1,
    StopAtStreet,
    StopAtCrossWalk,
    WaitAtCrossWalk,
} 
```

该模型

```
public class RulesModel
{
    public RulesEnum Rules { get; set; }
    public string Comment { get; set; } 
    // some other props that you have
} 
```

风景

```
 @model RulesModel
    @using (Html.BeginForm()) {
        <input type="radio" name="Rules" value="0" id="Rules1_No" />
        <input type="radio" name="Rules" value="1" id="Rules1_Yes" />
        <label for="Rules1">Stop at Light</label>
        <input type="radio" name="Rules" value="0" id="Rules2_No" />
        <input type="radio" name="Rules" value="1" id="Rules2_Yes" />
        <label for="Rules2">Stop at Street</label>
        <input type="radio" name="Rules" value="0" id="Rules3_No" />
        <input type="radio" name="Rules" value="1" id="Rules3_Yes" />
        <label for="Rules3">Stop at CrossWalk</label>
        <input type="text" name="Rules" id="Rules4" />
        <label for="Rules4">Wait at CrossWalk</label>
        <input type="submit" value="Submit" />
    } 
```

控制器动作

```
[HttpPost]
public ActionResult TheMethodThatAcceptsTheInput(RulesModel model)
{
    // do as you wish here, I assume you already know what to do here
    // at this point, if the user selects a radio button 
    // then the model.Rules will show it, as an enum value of course
    return View(model);
} 
```

前面的代码片段只是演示了每个枚举值都有一个与之关联的不同控件。所以基本上我想为每个枚举值定义不同的控件。

我将要创建一个 KeyValuePairs 列表，以便我可以将用户为每个枚举值选择的值发送回控制器。但是，以我有限的知识，我只知道如何将定义良好的模型发送回控制器。当用户按下提交按钮时，如何建立我的 KeyValuePairs 列表并将它们发送回控制器？

我研究了各种替代方案，例如 AutoMapper 和 ViewModels，但我认为我的具体问题与这些解决方案无关。我还很新，有人可以就解决这个问题的最佳方法提供一些指导吗？

谢谢！

更新：查看 Von 的示例，我对我的示例进行了一些修改。唯一的区别是我不想要枚举列表（意味着 4 个枚举值 = 4 个单选按钮），但我希望每个枚举值都是一个问题，例如：

> 停在光？是/否（2 个单选按钮） 停在街上？是/否（2 个单选按钮） 在人行横道处停车？是/否（2 个单选按钮） 在人行横道处等候？30 秒（文本框）

我不知道该怎么做，例如，用户点击提交。我需要以某种方式查看每个问题并构建要发送到控制器的列表，使其如下所示：

```
[(StopAtLight, "false"),
 (StopAtStree, "true"),
 (StopAtCrossWalk, "false"),
 (WaitAtCrossWalk, "40")] 
```

不确定当用户按下提交时我如何构建此列表，因为它需要一个类似于 Von 发布的模型。

希望这些进一步的信息有助于了解我的情况。感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:25:25.933

我不确定您想对 KeyValuePairs 做什么，但根据您问题中的标记，您希望将枚举显示为页面上的选项，然后有一些文本框供输入并将它们提交给您的控制器。如果是这种情况，那么您可以执行以下操作：

该模型

```
public class RulesModel
{
    public bool StopAtLight { get; set; }
    public bool StopAtStreet { get; set; }
    public bool StopAtCrossWalk { get; set; }
    public string WaitAtCrossWalk { get; set; }
    // some other props that you have
} 
```

风景

```
@model RulesModel
@using (Html.BeginForm()) {
    <h1>Stop at Light</h1>
    <input type="radio" name="StopAtLight" value="false" id="Rules1_No" />
    <label for="Rules1_No">No</label>
    <input type="radio" name="StopAtLight" value="true" id="Rules1_Yes" />
    <label for="Rules1_Yes">Yes</label>
    <h1>Stop at Street</h1>
    <input type="radio" name="StopAtStreet" value="false" id="Rules2_No" />
    <label for="Rules2_No">No</label>
    <input type="radio" name="StopAtStreet" value="true" id="Rules2_Yes" />
    <label for="Rules2_Yes">Yes</label>            
    <h1>Stop at CrossWalk</h1>
    <input type="radio" name="StopAtCrossWalk" value="false" id="Rules3_No" />
    <label for="Rules3_No">No</label>
    <input type="radio" name="StopAtCrossWalk" value="true" id="Rules3_Yes" />
    <label for="Rules3_Yes">Yes</label>            
    <h1>Wait at CrossWalk</h1>
    <input type="text" name="WaitAtCrossWalk" id="WaitAtCrossWalk" />
    <input type="submit" value="Submit" />
} 
```

控制器动作

```
[HttpPost]
public ActionResult TheMethodThatAcceptsTheInput(RulesModel model)
{
    // if model.StopAtLight == false then the user selected No otherwise it was Yes
    // same goes for the rest of the radio buttons
    return View(model);
} 
```

# ios - 我们是否应该将所有数据存储在最新版本的 firebase 上？

> ID：15560852
> 
> 赞同：3
> 
> 时间：2013-03-22T00:49:41.947
> 
> 标签：ios, firebase

[我们的应用程序与 Firebase 发布的SF Bus 示例](https://github.com/firebase/firebus)密切相关，因为我们还跟踪车辆及其乘客。

建议将车辆的所有位置数据存储在 Firebase 上，还是我们应该只存储最新版本并将其他所有内容保存在单独的数据库中？

我想知道这一点，因为唯一**实时相关的数据是****车辆**的最新位置。

对于我们的实时应用程序，我们不关心车辆在哪里，我们想知道车辆现在在哪里。存储日志以供以后分析。

对此有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T01:12:59.140

[Firebase 创始人在这里] 我建议只存储车辆的当前位置。Firebase 的优势在于实时更新和扩展，因此非常适合向大量人员广播车辆位置。不过，这对于数据挖掘活动来说并不是很好。因此，如果您想存储历史并对其进行分析，我建议将其存储在为复杂分析而设计的单独系统中。

# c# - 如何在 MVC 中设置用户角色？

> ID：15560855
> 
> 赞同：0
> 
> 时间：2013-03-22T00:49:56.673
> 
> 标签：c#, asp.net-mvc

我正在使用 ASP.net MVC。所以我想在渴望的时候设置用户角色。

所以这是我的控制器

```
public ActionResult LogOn(LogOnModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {                
        var user = GetuserByname(model.UserName);
        if (user.ToList().Count == 1)
        {
            string dbPassword = user.First().UserPassword.ToString();
            string enterPassword = CreatePasswordHash(model.Password, user.First().Salt.ToString());

            if (dbPassword.ToString().Trim() == enterPassword.ToString().Trim())
            {
                FormsAuthentication.SetAuthCookie(user.First().tblUserRole.RoleName, model.RememberMe);
                Session["logged"] = user.First().Username;

                string roleName = user.First().tblUserRole.RoleName;
                Roles.AddUserToRole(model.UserName, roleName);
                return RedirectToAction("Index", "Home");
            }
        }                
    }            
    return View(model);
} 
```

这是我的网络配置文件

```
<?xml version="1.0" encoding="utf-8"?>

<configuration>

    <connectionStrings>
        <add name="ApplicationServices1" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
        <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
        <add name="SKGEntities" connectionString="metadata=res://*/Models.Model1.csdl|res://*/Models.Model1.ssdl|res://*/Models.Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=(local);Initial Catalog=SKG;Integrated Security=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
    </connectionStrings>

    <authentication mode="Forms">
        <forms loginUrl="~/Login/LogOn" timeout="2880" />
    </authentication>

    <membership>
        <providers>
            <clear />
            <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="3" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
        </providers>
    </membership>

    <profile>
        <providers>
            <clear />
            <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
        </providers>
    </profile>

    <roleManager enabled="true">
        <providers>
            <clear />
            <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
            <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
        </providers>
    </roleManager>

</configuration> 
```

但是有错误，它说...

> 与 SQL Server 建立连接时发生与网络相关或特定于实例的错误

...我不知道如何解决它。

还有怎么设置...

```
 Roles.AddUserToRole(xxx, yyy); 
```

...在我的控制器中？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T01:04:40.490

错误消息说您的数据库（一个 SQL 服务器）不可访问。

您的提供者（角色、成员资格、个人资料）设置为使用`ApplicationServices`连接字符串，即：

```
data source=.\SQLEXPRESS;
Integrated Security=SSPI;
AttachDBFilename=|DataDirectory|aspnetdb.mdf;
User Instance=true 
```

...但是您的其他连接字符串是

```
Data Source=(local);
Initial Catalog=SKG;
Integrated Security=True;
MultipleActiveResultSets=True 
```

...这完全是一个不同的数据库服务器。

更改您的提供程序配置以使用正确的数据库服务器。

# hibernate - NHibernate 双向多对多映射列表/包

> ID：15560856
> 
> 赞同：5
> 
> 时间：2013-03-22T00:49:58.640
> 
> 标签：hibernate, nhibernate, orm

我正在努力处理双向多对多映射，其中顺序在一侧很重要，但在另一侧不重要。

我有两个课程：程序和学生。

一个项目有很多学生，顺序很重要。

程序 A

1.  约翰
2.  莎莉
3.  赛斯

方案 B

1.  亚历克斯
2.  赛斯
3.  艾米
4.  约翰

一个学生有很多程序，但顺序在这里并不重要。

约翰 * 程序 A * 程序 B

莎莉

*   程序 A

赛斯

*   程序 A
*   方案 B

亚历克斯

*   方案 B

艾米

*   方案 B

因此，看来我将在程序和学生之间建立双向多对多关联，我可以在其中做这样的事情......

```
var john = GetJohn();
var programCount = john.Programs.Count; // 2

var programB = GetProgramB();
var studentCount = programB.Students.Count; // 4
var secondStudent = programB.Students[1]; // Seth 
```

我无法弄清楚如何让映射工作。我不断收到 PK 违规错误。

我尝试了以下...

计划映射

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
    <class name="Program" table="Programs" lazy="false">
        <id name="ID" column="ID" type="Int32" unsaved-value="0">
            <generator class="identity" />
        </id>
        <property name="Title" column="Title" type="String" length="200" />
        <list name="Students" table="ProgramAssignments" lazy="true" cascade="all">
            <key column="ProgramID" />
            <index column="SequenceIndex" type="Int32" />
            <many-to-many column="StudentID" class="Student" />
        </list>
    </class>
</hibernate-mapping> 
```

学生地图

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
    <class name="Student" table="Students" lazy="false">
        <id name="ID" column="ID" type="Int32" unsaved-value="0">
            <generator class="identity" />
        </id>
        <property name="Title" column="Title" type="String" length="200" />
        <bag name="Programs" table="ProgramAssignments" lazy="true">
            <key column="StudentID" />
            <many-to-many column="ProgramID" class="Program" />
        </bag>
    </class>
</hibernate-mapping> 
```

我的关联表很简单...

```
ProgramID int
StudentID int
SequenceIndex int 
```

PK 是 ProgramID + StudentID。

我真的希望从项目方面来管理协会，因为每个项目中学生的顺序很重要。但是，我真的希望能够通过 mystudent.Programs 访问特定学生的课程。我尝试了许多映射的变体，包括在程序列表上设置 inverse=true，尝试不同的级联选项等。似乎没有任何效果。

帮助！谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T06:30:07.127

问题可能隐藏在这样一个事实中，即`<list>`映射支持一个实例的多个分配（因此可能有学生*Seth*分配了两次，具有不同的*SequenceIndex* - 违反了 PK 错误）

但我想给你一个提示。尝试改变方法并引入中间对象。请参阅 NHibernate 文档：[第 24 章。最佳实践](http://nhibernate.info/doc/nhibernate-reference/best-practices.html)。快速总结：

> **不要使用奇异的关联映射。**
> 
> 真正`many-to-many`关联的好用例很少见。大多数时候，您需要存储在“链接表”中的附加信息。在这种情况下，最好使用两个一对多关联到一个中间链接类。事实上，我们认为大多数关联都是一对多和多对一的，在使用任何其他关联方式时要小心，并问问自己是否真的有必要。

我会说，这是（可能是）情况，因为你真的需要**命令**......

# php - Php登录，无法继续会话

> ID：15560857
> 
> 赞同：0
> 
> 时间：2013-03-22T00:50:04.310
> 
> 标签：php, mysql, database, session, login

所以基本上我正在尝试运行登录系统并使用用户的数据实时更新页面，不幸的是我无法继续会话，每次我尝试回显用户时都没有任何反应，这是我的登录代码。

```
 <?php

$host="IPADRESS"; // Host name 
$username="web11-sign-up"; // Mysql username 
$password="w0lfbane01#"; // Mysql password 
$db_name="web11-sign-up"; // Database name 
$tbl_name="members"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$mypassword = md5($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
$_SESSION["$myusername"];
$_SESSION["$mypassword"]; 
header("location:Scene-Selection/");
}
else {
echo "Wrong Username or Password";
}
?> 
```

直到我开始研究该网站的另一个部分时，我才意识到这部分不起作用。我无法从数据库中检索任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T00:52:05.160

你忘了

```
 session_start(); 
```

在页面顶部。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T00:53:43.090

你不见了

`session_start();` 在会话的顶部。

您还可以从以下位置更改您的登录名：

```
// Register $myusername, $mypassword and redirect to file "login_success.php"
$_SESSION["$myusername"];
$_SESSION["$mypassword"]; 
```

到：

```
$_SESSION['Username'] = $myusername;
$_SESSION['Password'] = $mypassword; 
```

然后贯穿您的其他页面；执行此操作：

```
include "Session.php"; 
```

> 会话.php：

```
start_session();

if (!isset($_SESSION['Username']))
{
 include "Logout.php"; 
 exit;
// session is not set, so enforce logout
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T00:52:30.503

您是否在每一页的顶部开始您的会话？

确保您在`session_start();`要使用会话的每个页面顶部的某个位置调用。

我个人`application.php`在每个页面的顶部都包含一个 - 其中包含数据库连接详细信息`session_start();`、全局函数等...

# apache - Amazon CloudFront IP 的 htaccess 重定向规则

> ID：15560860
> 
> 赞同：0
> 
> 时间：2013-03-22T00:50:17.660
> 
> 标签：apache, .htaccess, mod-rewrite, amazon, amazon-cloudfront

我已经使用 CloudFront 在 joomla 网站上设置了一个 CDN 插件。

一切似乎都工作正常，除了来自 CloudFront 的所有请求都被重定向到网站域的 www 版本。这似乎是由于非 www -> www redirec 规则。

我根据这篇文章计算了 CloudFront 使用的 IP 范围： [https ://forums.aws.amazon.com/ann.jspa?annID=910](https://forums.aws.amazon.com/ann.jspa?annID=910)

我已经获得了以下 IP 范围：

主机最小值：54.239.128.1 主机最大值：54.239.191.254

主机最小值：54.240.128.1 主机最大值：54.240.191.254

主机最小值：204.246.168.1 主机最大值：204.246.171.254

主机最小值：204.246.174.1 主机最大值：204.246.175.254

主机最小值：204.246.176.1 主机最大值：204.246.191.254

主机最小值：205.251.192.1 主机最大值：205.251.223.254

主机最小值：205.251.249.1 主机最大值：205.251.249.254

主机最小值：205.251.250.1 主机最大值：205.251.251.254

主机最小值：205.251.252.1 主机最大值：205.251.253.254

主机最小值：205.251.254.1 主机最大值：205.251.254.254

主机最小值：216.137.32.1 主机最大值：216.137.63.254

最后，我将以下 RewriteCond 放在一起以阻止规则重定向来自 CloudFront 的请求：

```
RewriteCond %{REMOTE_ADDR} !^204\.246\.16([4567])\.\d{1,3}
RewriteCond %{REMOTE_ADDR} !^54\.2(39|40)\.(12[89]|1[3-8][0-9]|19[01])\.\d{1,3}
RewriteCond %{REMOTE_ADDR} !^204\.246\.(16[89]|17[01])\.\d{1,3}
RewriteCond %{REMOTE_ADDR} !^204\.246\.1(7[4-9]|8[0-9]|9[01])\.\d{1,3}
RewriteCond %{REMOTE_ADDR} !^54\.239\.(249|25[0-4])\.\d{1,3}
RewriteCond %{REMOTE_ADDR} !^205\.251\.(19[2-9]|2[01][0-9]|22[0-3])\.\d{1,3}
RewriteCond %{REMOTE_ADDR} !^216\.137\.(3[2-9]|[45][0-9]|6[0-3])\.\d{1,3} 
```

但是，它似乎不起作用，CloudFront 请求仍被重定向到网站的 www 版本。

任何人，有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:51:50.637

添加“www”和非“www”主机名作为 Cloudfront 分发的来源。摆脱重写规则。这应该可以解决您的问题。

# android - 获取 Tower GSM 位置 lat lng

> ID：15560870
> 
> 赞同：2
> 
> 时间：2013-03-22T00:51:07.457
> 
> 标签：android, gsm, telephonymanager, cellular-network, umts

我想知道一种方法或方法来找到手机所连接的小区的位置（GSM 一）

这是我的课：

```
package com.example.signal;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStreamWriter;
import java.sql.Date;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.LinkedList;
import java.util.List;

import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.net.ConnectivityManager;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.telephony.CellLocation;
import android.telephony.NeighboringCellInfo;
import android.telephony.PhoneStateListener;
import android.telephony.SignalStrength;
import android.telephony.TelephonyManager;
import android.telephony.cdma.CdmaCellLocation;
import android.telephony.gsm.GsmCellLocation;
import android.text.format.Time;
import android.util.Log;
import android.view.Menu;
import android.widget.LinearLayout;
import android.widget.ScrollView;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {
    int counter = 0;
    MainActivity mainn = this;
    String SignalType = "";
    List<TextView> ListText = new LinkedList<TextView>();
     TelephonyManager        Tel;
       MyPhoneStateListener    MyListener;
       int dBm;
       int ASU;
       Context context;
       LinearLayout Linear;
       ScrollView scroll;
       File myFile;
       FileOutputStream fOut;
       OutputStreamWriter myOutWriter;
       /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
           // setContentView(R.layout.activity_main);
            myFile = new File("/sdcard/mysdfile.txt");
            while (myFile.exists())
            {
                counter++;
                myFile = new File("/sdcard/mysdfile" + counter+".txt");
            }
            try {
                myFile.createNewFile();
                 fOut = new FileOutputStream(myFile);
                    myOutWriter = new OutputStreamWriter(fOut);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Linear = new LinearLayout(this);
            Linear.setOrientation(LinearLayout.VERTICAL);
            scroll = new ScrollView(this);
            scroll.addView(Linear);
            this.setContentView(scroll);
            Tel       = ( TelephonyManager )getSystemService(Context.TELEPHONY_SERVICE);  
            if (Tel.getPhoneType() == TelephonyManager.PHONE_TYPE_CDMA) {
                 Toast.makeText(getApplicationContext(), "NO GSM", Toast.LENGTH_SHORT).show();
                return;
            } else if  (Tel.getPhoneType() == TelephonyManager.PHONE_TYPE_GSM) {

            }
            Tel.listen(MyListener ,PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);
            MyListener   = new MyPhoneStateListener();

        }

        /* Called when the application is minimized */
        @Override
       protected void onPause()
        {
          super.onPause();
          Tel.listen(MyListener, PhoneStateListener.LISTEN_NONE);
       }

        /* Called when the application resumes */
       @Override
       protected void onResume()
       {
          super.onResume();
          Tel.listen(MyListener,PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);
       }

       /* —————————– */
        /* Start the PhoneState listener */
       /* —————————– */
        private class MyPhoneStateListener extends PhoneStateListener
        {
          /* Get the Signal strength from the provider, each tiome there is an update */
          @Override
          public void onSignalStrengthsChanged(SignalStrength signalStrength)
          {

             super.onSignalStrengthsChanged(signalStrength);
             //Toast.makeText(getApplicationContext(), "Go to Firstdroid!!! GSM Cinr = "
               // + String.valueOf(signalStrength.getGsmSignalStrength()), Toast.LENGTH_SHORT).show();
            ASU =  signalStrength.getGsmSignalStrength();
            if (ASU > 30) {
                SignalType = "Good";
                // signalStrengthText.setTextColor(getResources().getColor(R.color.good));
            } else if (ASU > 20 && ASU < 30) {
                SignalType = "Average";
                // signalStrengthText.setTextColor(getResources().getColor(R.color.average));
            } else if (ASU < 20) {
                SignalType = "Weak";
                // signalStrengthText.setTextColor(getResources().getColor(R.color.weak));
            } 
            dBm= -113+(2*ASU);
             TelephonyManager m = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
             if (m.getSimState() != TelephonyManager.SIM_STATE_ABSENT){
               // SIM card
             } else {
               // No SIM card
             }
             TelephonyManager telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
             CellLocation location = telephonyManager.getCellLocation();
             GsmCellLocation gsmLocation = (GsmCellLocation) location;
             String networkOperator = telephonyManager.getNetworkOperator();

             if (networkOperator != null) {
                 int mcc = Integer.parseInt(networkOperator.substring(0, 3));
                 int mnc = Integer.parseInt(networkOperator.substring(3));
                 Log.d("mcc " + mcc, "mnc " + mnc);
             }
             //CdmaCellLocation gsmLocation1 = (CdmaCellLocation) location;
             int cellId = gsmLocation.getCid();
             int lac = gsmLocation.getLac();
            // Log.d("al latitude ", gsmLocation1.getBaseStationLatitude()+"");
             //Time today = new Time(Time.getCurrentTimezone());
             //today.setToNow();
             String mydate = java.text.DateFormat.getDateTimeInstance().format(Calendar.getInstance().getTime());
             TextView tvv = new TextView(mainn);
             tvv.setText("GSM dBm " + String.valueOf(dBm) + " , Cell ID " + String.valueOf(cellId) + " , Cell LAC " + String.valueOf(lac)+ " , ASU " + ASU + " , Time now " + mydate + " , Signal Type " + SignalType);
           //  Toast.makeText(getApplicationContext(), "Go to Firstdroid!!! GSM dBm = "
             //       + String.valueOf(dBm) + " , Cell ID = " + String.valueOf(cellId) +" , Cell Lac = " + String.valueOf(lac), Toast.LENGTH_SHORT).show();
            /* LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

          // Define a listener that responds to location updates
          LocationListener locationListener = new LocationListener() {
              public void onLocationChanged(Location location) {
                // Called when a new location is found by the network location provider.
               // makeUseOfNewLocation(location);
              }

              public void onStatusChanged(String provider, int status, Bundle extras) {}

              public void onProviderEnabled(String provider) {}

              public void onProviderDisabled(String provider) {}
            };

          // Register the listener with the Location Manager to receive location updates
          locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
          String locationProvider = LocationManager.NETWORK_PROVIDER;
       // Or use LocationManager.GPS_PROVIDER

          Location lastKnownLocation = locationManager.getLastKnownLocation(locationProvider);
        double lat =  lastKnownLocation.getLatitude();
        double longg =   lastKnownLocation.getLongitude();
        Log.d("Lat is " + lat, "Long is " + longg);
        int psc = gsmLocation.getPsc();
        Log.d("TAG", "PSC = " + psc); */

        List<NeighboringCellInfo> neighCell = null; 
        neighCell = telephonyManager.getNeighboringCellInfo();  
        for (int i = 0; i < neighCell.size(); i++) 
        {
            NeighboringCellInfo thisCell = neighCell.get(i);  
            int CID = thisCell.getCid();  
            int RSSI = thisCell.getRssi();
            int PSC = thisCell.getPsc();
            Log.d("TAG", " "+CID+" - "+RSSI + " - " + PSC);
        }
        try
            {

                    myOutWriter.append(tvv.getText());
                    myOutWriter.append("\n");
            } 
            catch (Exception e)
            {
                e.printStackTrace();
            }
             Linear.addView(tvv);
             Linear.invalidate();
             scroll.invalidate();
          }

        };/* End of private Class */

    /* GetGsmSignalStrength */
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
    @Override
    public void onBackPressed()
    {
        try
        {
            myOutWriter.close();
            fOut.close();
            this.finish();
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

} 
```

有什么我可以说的`gsmLocation.getLatitude()`吗`gsmLocation.getLongitude()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:43:13.560

要知道当前 GSM 小区的位置，您需要一个包含小区 ID 及其位置的数据库。如果您不是网络运营商，则没有真正好的、权威的信息来源，因为他们不发布。

如果您只想为设备定位，请尝试[这个 SO question。](https://stackoverflow.com/questions/5314155/get-current-position-location-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-16T07:56:59.353

扩展@S List 所说的内容，您应该向以下 API 提供商注册一个令牌，并亲自了解准确性/成本如何计算。

*   [LocationAPI.org](http://locationapi.org)

# php - 将php项目从fedora移动到windows wamp错误

> ID：15560874
> 
> 赞同：0
> 
> 时间：2013-03-22T00:51:42.297
> 
> 标签：php, mysql, html

我有一个 php 项目，我正试图将它从 fedora 移到 windows。我移动了文件，我可以访问它们，我也可以访问数据库，但是我收到了一个奇怪的错误

```
SCREAM: Error suppression ignored for

( ! ) Parse error: syntax error, unexpected end of file in C:\wamp\www\portfolio\templates\sell_form.php on line 21
Call Stack
#   Time    Memory  Function    Location
1   0.0029  259504  {main}( )   ..\sell.php:0
2   0.1515  304656  render( )   ..\sell.php:67 
```

这个文件

```
<table class="table table-hover center-table table-bordered">
        <tr>
        <th>Symbol</th>
        <th>Name</th>
        <th>Shares</th>
        <th>Price</th>
        <th>Total</th>
        </tr>
<?php foreach ($shares as $row): ?>

        <tr>
        <td><?= $row["symbol"]?></td>
        <td><?= $row["name"]?></td>
        <td><?= $row["shares"]?></td>
        <td>$<?= number_format($row["price"],4)?></td>
        <td>$<?= number_format($row["total"],4)?></td>
        </tr>

<? endforeach ?>

<tr>
    <td>CASH</td>
    <td></td>
    <td></td>
    <td></td>
    <td>$<?= number_format($cash[0]["cash"], 4)?></td>

</tr>

</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:57:07.983

```
<?php endforeach; ?> 
```

忘记了那里的逗号和 php 标签，除非你打开了短标签，否则它不会工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:58:28.450

您的循环结束语句未正确设置

```
<? endforeach; ?> 
```

# c# - PropertyGrid 可以为不同的选定对象值自定义显示，而不是空白吗？

> ID：15560875
> 
> 赞同：3
> 
> 时间：2013-03-22T00:51:44.007
> 
> 标签：c#, propertygrid

当所选对象具有不同的属性值时，是否可以自定义属性的显示值？

网格的默认行为是在所有选定对象具有相同值时显示一个值，但在它们不同时简单地空白该字段。没有办法知道它们*有何*不同。

例如，给定以下类和代码，是否可以将检查器和类配置为显示如下内容（整数值的范围，其他任何内容的倍数）

```
TestLong|[50 - 60]
 TestInt|10
TestEnum|[Multiple] 
```

即，如果值不同，则表明它们有何不同，但如果它们都相同，则表明该值？

```
public enum TestEnum
{
    EnumVal1,
    EnumVal2,
    EnumVal3
}

public class TestClass
{
    public long TestLong { get; set; }
    public int TestInt { get; set; }
    public TestEnum TestEnum { get; set; }
}

    ...
control.SelectedObjects = new []
{
    new TestClass 
    { 
        TestLong = 50, 
        TestInt = 10, 
        TestEnum = TestEnum.EnumVal1 
    },
    new TestClass 
    { 
        TestLong = 60, 
        TestInt = 10, 
        TestEnum = TestEnum.EnumVal3
    },
}
    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:14:14.233

我不认为您可以更改显示，因为 PropertyGrid 一般使用[TypeConverters](http://msdn.microsoft.com/en-us/library/system.componentmodel.typeconverter.aspx)（包括隐式的）来显示值，但对于多选，它没有使用。

虽然你可以做的，但它不完全是答案，是在网格处于多选模式时提出一个自定义[UITypeEditor ，如下所示：](http://msdn.microsoft.com/en-us/library/system.drawing.design.uitypeeditor.aspx)

```
 public class TestClass
    {
        // decorate the property with a custom UITypeEditor
        [Editor(typeof(MyMultiSelectionEditor), typeof(UITypeEditor))]
        public long TestLong { get; set; }
        public int TestInt { get; set; }
        public TestEnum TestEnum { get; set; }
    }

    public class MyMultiSelectionEditor : UITypeEditor
    {
        public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
        {
            // adapt to your need
            if (!IsPropertyGridInMultiView(context))
                return UITypeEditorEditStyle.None;

            return UITypeEditorEditStyle.Modal;
        }

        public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value)
        {
            if (IsPropertyGridInMultiView(context))
            {
                // multi view, show my custom stuff
                MessageBox.Show("hello from multi selection");
            }
            return base.EditValue(context, provider, value);
        }

        // gets a PropertyGrid instance from the context, if any
        private static PropertyGrid GetPropertyGrid(ITypeDescriptorContext context)
        {
            IServiceProvider sp = context as IServiceProvider;
            if (sp == null)
                return null;

            Control view = sp.GetService(typeof(IWindowsFormsEditorService)) as Control;
            if (view == null)
                return null;

            return view.Parent as PropertyGrid;
        }

        // determines if there is a PropertyGrid in the context, and if it's selection is multiple
        private static bool IsPropertyGridInMultiView(ITypeDescriptorContext context)
        {
            PropertyGrid pg = GetPropertyGrid(context);
            if (pg == null)
                return false;

            return pg.SelectedObjects != null && pg.SelectedObjects.Length > 1;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:54:04.773

我已经解决了这个问题，虽然不是我最初的打算。

问题的根本原因是当有多个选定对象时没有应用 TypeConverters。为了解决这个问题，我引入了一个聚合类，它聚合了各个对象，但呈现为单个对象。这样，可以调用 TypeConverter。

示例代码（实际生产代码的破解版）如下：

```
public interface ISupportAggregate
{
    object[] Individuals { get; }
}

public class AggregateTypeConverter : TypeConverter
{
    public const string MULTIPLE = @"[multiple]";

    private TypeConverter mTypeConverter;

    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
    {
        Initialize(context);

        if (context != null && destinationType == typeof(string))
        {
            var aggregate = context.Instance as ISupportAggregate;
            if (aggregate != null && IsDifferingItems(context.PropertyDescriptor.Name, aggregate.Individuals))
            {
                return MULTIPLE;
            }
        }
        return mTypeConverter.ConvertTo(context, culture, value, destinationType);
    }

    public static bool IsDifferingItems(string propertyName, object[] items)
    {
        PropertyDescriptor itemProperty = TypeDescriptor.GetProperties(items[0].GetType())[propertyName];
        return items.Select(itemProperty.GetValue).Distinct().Count() > 1;
    }

    private void Initialize(ITypeDescriptorContext context)
    {
        if (mTypeConverter == null)
            mTypeConverter = TypeDescriptor.GetConverter(context.PropertyDescriptor.PropertyType);
    }

    #region Calling through to mTypeConverter

    public override object CreateInstance(ITypeDescriptorContext context, System.Collections.IDictionary propertyValues)
    {
        Initialize(context);
        return mTypeConverter.CreateInstance(context, propertyValues);
    }

    public override bool GetCreateInstanceSupported(ITypeDescriptorContext context)
    {
        Initialize(context);
        return mTypeConverter.GetCreateInstanceSupported(context);
    }

    public override PropertyDescriptorCollection GetProperties(ITypeDescriptorContext context, object value, Attribute[] attributes)
    {
        Initialize(context);
        return mTypeConverter.GetProperties(context, value, attributes);
    }

    public override bool GetPropertiesSupported(ITypeDescriptorContext context)
    {
        Initialize(context);
        return mTypeConverter.GetPropertiesSupported(context);
    }

    public override StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)
    {
        Initialize(context);
        return mTypeConverter.GetStandardValues(context);
    }

    public override bool GetStandardValuesExclusive(ITypeDescriptorContext context)
    {
        Initialize(context);
        return mTypeConverter.GetStandardValuesExclusive(context);
    }

    public override bool GetStandardValuesSupported(ITypeDescriptorContext context)
    {
        Initialize(context);
        return mTypeConverter.GetStandardValuesSupported(context);
    }

    public override bool IsValid(ITypeDescriptorContext context, object value)
    {
        Initialize(context);
        return mTypeConverter.IsValid(context, value);
    }

    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        Initialize(context);
        return mTypeConverter.CanConvertFrom(context, sourceType);
    }

    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        Initialize(context);
        return mTypeConverter.ConvertFrom(context, culture, value);
    }

    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        Initialize(context);
        return mTypeConverter.CanConvertTo(context, destinationType);
    }

    #endregion
}

public class AggregateTestClass : TestClass
{
    private readonly TestClass[] mObjects;

    public AggregateTestClass(TestClass[] objects)
    {
        mObjects = objects;
    }

    protected override object[] GetIndividuals()
    {
        return mObjects;
    }
}

public class TestClass : ISupportAggregate
{
    [TypeConverter(typeof(AggregateTypeConverter))]
    public int IntProperty { get; set; }

    [TypeConverter(typeof(AggregateTypeConverter))]
    public string StringProperty { get; set; }

    [BrowsableAttribute(false)]
    public object[] Individuals
    {
        get { return GetIndividuals(); }
    }

    virtual protected object[] GetIndividuals()
    {
        return new[] { this };
    }
}

public class TestSupportAggregate : ISupportAggregate, TestClass
{
    private readonly TestClass[] mItems;

    public TestSupportAggregate(TestClass[] items)
    {
        mItems = items;
    }

    public object[] Individuals
    {
        get { return mItems; }
    }
}

To use in code:

control.SelectedObject = new TestSupportAggregate(new[]
                                                 {
                                                     new TestClass { IntProperty = 5150 },
                                                     new TestClass { IntProperty = 1984 }
                                                 }); 
```

# xcode - XCode - 无法创建快照 - 不想要 git

> ID：15560877
> 
> 赞同：1
> 
> 时间：2013-03-22T00:51:50.440
> 
> 标签：xcode, git, snapshot

在几次成功完成“创建快照”之后，XCode 现在告诉我它“无法创建快照”“请告诉我你是谁”......以及一些关于 git 的内容。我从未使用过 git，也不想使用，但我需要创建快照……你知道如何管理吗？

谢谢你！

# maven-3 - javadoc 的 Maven 3 站点插件问题：test-javadoc

> ID：15560878
> 
> 赞同：0
> 
> 时间：2013-03-22T00:51:50.540
> 
> 标签：maven-3, maven-site-plugin, maven-javadoc-plugin

我是 Maven 新手，所以请多多包涵。我继承了这个多模块项目，我的老板希望我使用站点插件以及其他常用插件，例如 javadoc、jxr 和 surefire-report。这些报告只会为我们的测试源代码生成。

这是我的父母 pom.xml ：

```
 <?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
    http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>oracle.apps.hcm.hwr</groupId>
    <artifactId>hwr-parent</artifactId>
    <packaging>pom</packaging>
    <version>3.0.0-SNAPSHOT</version>
    <description>my parent pom</description>
    <properties>
        <abdera.version>0.4.0-incubating</abdera.version>
        <adfm.version>11.1.1.5.37.60.13</adfm.version>
        <applcore.version>1.0</applcore.version>
        <axis2.version>1.3</axis2.version>
        <bcprov-jdk16.version>145</bcprov-jdk16.version>
        <cglib.version>2.2.2</cglib.version>
        <commons-cli.version>1.2</commons-cli.version>
        <commons-codec.version>1.3</commons-codec.version>
        <commons-collections.version>3.2</commons-collections.version>
        <commons-configuration.version>1.4</commons-configuration.version>
        <commons-dbcp.version>1.4</commons-dbcp.version>
        <commons-lang.version>2.2</commons-lang.version>
        <commons-logging.version>1.1</commons-logging.version>
        <easymock.version>3.1</easymock.version>
        <grc-project.version>8.6.4.7-SNAPSHOT</grc-project.version>
        <hcm-amWrapper.version>1.0</hcm-amWrapper.version>
        <hcm-publicEntityObjects.version>1.0</hcm-publicEntityObjects.version>
        <httpclient.version>4.0.1</httpclient.version>
        <je.version>4.1.20</je.version>
        <json-simple.version>1.1.1</json-simple.version> 
        <java.version>1.6</java.version>
        <junit.version>4.4</junit.version>
        <log4j.version>1.2.14</log4j.version>
        <maven-checkstyle-plugin.version>2.9.1</maven-checkstyle-plugin.version>
        <maven-antrun-plugin.version>1.6</maven-antrun-plugin.version>
        <maven-javadoc-plugin.version>2.9</maven-javadoc-plugin.version>
        <maven-jxr-plugin.version>2.3</maven-jxr-plugin.version>
        <maven-project-info-reports-plugin.version>2.4</maven-project-info-reports-plugin.version>
        <maven-surefire-plugin.version>2.12.4</maven-surefire-plugin.version>
        <maven-surefire-report-plugin.version>2.12.4</maven-surefire-report-plugin.version>
        <maven-war-plugin.version>2.3</maven-war-plugin.version>
        <maven-compiler-plugin.version>3.0</maven-compiler-plugin.version>
                <maven-jar-plugin.version>2.4</maven-jar-plugin.version>
                <maven-dependency-plugin.version>2.6</maven-dependency-plugin.version>
                <maven-assembly-plugin.version>2.4</maven-assembly-plugin.version>
                <maven-resources-plugin.version>2.6</maven-resources-plugin.version>
                <build-helper-maven-plugin.version>1.7</build-helper-maven-plugin.version>
        <ojdbc6.version>11.1.0.7.0</ojdbc6.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <quartz.version>1.6.5</quartz.version>
        <repository.url.root>localhost:8082/nexus</repository.url.root>
        <scm.connection.root>scm:svn:svn://localhost</scm.connection.root>
        <scm.url>localhost/viewvc</scm.url>
        <servlet-api.version>2.5</servlet-api.version>
        <signpost.version>1.2.1.2</signpost.version>
        <skip.integration.tests>true</skip.integration.tests>
        <spring.version>2.5.6</spring.version>
        <surefire-junit47.version>2.12</surefire-junit47.version>
        <tagbase.url.root>svn://localhost</tagbase.url.root>
        <wagon-ftp.version>1.0-beta-2</wagon-ftp.version>
        <wagon-ssh-external.version>1.0-alpha-5</wagon-ssh-external.version>
        <openrdf-sesame.version>2.2.4</openrdf-sesame.version>
        <hwr-project.version>3.0.0-SNAPSHOT</hwr-project.version>
        <not-approved-jar-dependencies>**/xstream-*,**/aopalliance-*,**/jsr305-*,**/guice-*,**/*-guice-*,**/guava-*,**/*-guava-*,**/jackson-*,**/xpp3*,**/commons-beanutils-*,**/slf4j-*,**/spring-asm-*,**/spring-expression-*,**/twitter4j-core-*</not-approved-jar-dependencies>
    </properties>
    <scm>
        <url>${scm.connection.root}/Hcm/trunk</url>
        <connection>${scm.connection.root}/HcmWorkforceReputation/trunk</connection>
        <developerConnection>${scm.connection.root}/HcmWorkforceReputation/trunk</developerConnection>
    </scm>
    <repositories>
        <repository>
            <id>public</id>
            <url>${repository.url.root}/content/groups/public</url>
            <releases>
                <enabled>true</enabled>
                <updatePolicy>daily</updatePolicy>
                <checksumPolicy>ignore</checksumPolicy>
            </releases>
            <snapshots>
                <enabled>true</enabled>
                <updatePolicy>always</updatePolicy>
                <checksumPolicy>ignore</checksumPolicy>
            </snapshots>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <id>public</id>
            <url>${repository.url.root}/content/groups/public</url>
        </pluginRepository>
    </pluginRepositories>
    <organization>
        <name>my org</name>
        <url>http://localhost</url>
    </organization>
    <build>
        <extensions>
            <extension>
                <groupId>org.apache.maven.wagon</groupId>
                <artifactId>wagon-ftp</artifactId>
                <version>${wagon-ftp.version}</version>
            </extension>
            <extension>
                <groupId>org.apache.maven.wagon</groupId>
                <artifactId>wagon-ssh-external</artifactId>
                <version>${wagon-ssh-external.version}</version>
            </extension>
        </extensions>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>${maven-compiler-plugin.version}</version>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>${maven-antrun-plugin.version}</version>
            </plugin>
            <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-site-plugin</artifactId>
              <version>3.0</version>
              <configuration>
                <stagingDirectory>/lapps/ag1/site/site</stagingDirectory>
                <reportPlugins>
                  <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-project-info-reports-plugin</artifactId>
                    <version>2.2</version>
                    <reports>
                      <report>index</report>
                      <report>project-team</report>
                      <report>license</report>
                      <report>mailing-list</report>
                      <report>dependencies</report>
                      <report>dependency-convergence</report>
                      <report>plugin-management</report>
                      <report>cim</report>
                      <report>issue-tracking</report>
                      <report>scm</report>
                      <report>summary</report>
                    </reports>
                  </plugin>
                  <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-surefire-report-plugin</artifactId>
                    <version>2.6</version>
                  </plugin>
                  <plugin> 
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-javadoc-plugin</artifactId>
                    <version>2.9</version>
                    <configuration>
                    <aggregate>false</aggregate>
                    </configuration>
                  </plugin>      
                  <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-checkstyle-plugin</artifactId>
                    <version>${maven-checkstyle-plugin.version}</version>
                  </plugin>
                  <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>jdepend-maven-plugin</artifactId>
                    <version>2.0-beta-2</version>
                  </plugin>
                  <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>cobertura-maven-plugin</artifactId>
                    <version>2.4</version>
                  </plugin>
                  <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>taglist-maven-plugin</artifactId>
                    <version>2.4</version>
                  </plugin>
                  <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-jxr-plugin</artifactId>
                    <version>2.1</version>
                  </plugin>
                  <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-pmd-plugin</artifactId>
                    <version>2.5</version>
                    <configuration>
                      <linkXref>true</linkXref>
                      <minimumTokens>100</minimumTokens>
                      <minimumPriority>3</minimumPriority>
                      <!-- Change minimum priority to see more or less messages -->
                      <targetJdk>1.6</targetJdk>
                    </configuration>
                  </plugin>
                </reportPlugins>
              </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-project-info-reports-plugin</artifactId>
                <version>${maven-project-info-reports-plugin.version}</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>${maven-checkstyle-plugin.version}</version>
            </plugin>
            <plugin> 
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-javadoc-plugin</artifactId>
                    <version>2.9</version>
                    <configuration>
                    <aggregate>false</aggregate>
                    </configuration>
                  </plugin>      
        </plugins>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>false</filtering>
            </resource>
        </resources>
        <testResources>
            <testResource>
                <directory>src/test/resources</directory>
                <filtering>false</filtering>
            </testResource>
        </testResources>
    </build>

    <!-- Used when deploying to internal m2 repository. You must have a corresponding 
        repository defined in your settings.xml. Unless you are the build machine 
        or a project lead, you needn't worry about this. -->
    <distributionManagement>
        <site>
       <id>${project.artifactId}-site</id>
       <url>./</url>
        </site>
        <repository>
            <id>releases</id>
            <name>LogicalApps internal remote maven repository</name>
            <url>${repository.url.root}/content/repositories/releases</url>
        </repository>
        <snapshotRepository>
            <uniqueVersion>false</uniqueVersion>
            <id>snapshots</id>
            <name>LogicalApps internal remote maven snapshot repository</name>
            <url>${repository.url.root}/content/repositories/snapshots</url>
        </snapshotRepository>
    </distributionManagement>
    <dependencyManagement>

    <dependencies>
        <!-- Common dependencies -->
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
        </dependency>
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging-api</artifactId>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
        </dependency>
    </dependencies>
</project> 
```

我使用以下方法从 Hudson 运行它：

```
-Dmaven.test.failure.ignore=true clean install javadoc:test-javadoc jxr:test-jxr surefire-report:report-only site site:stage 
```

这是我不断收到的错误：

```
17:14:40  [INFO] o.h.m.e.h.MavenExecutionResultHandler - [1] org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-site-plugin:3.0:site (default-site) on project hwr-parent: failed to get report for org.apache.maven.plugins:maven-javadoc-plugin
17:14:41  [DEBUG] Closing connection to remote
17:14:41  [ERROR] Failed to execute goal org.apache.maven.plugins:maven-site-plugin:3.0:site (default-site) on project hwr-parent: failed to get report for org.apache.maven.plugins:maven-javadoc-plugin: Failed to execute goal com.github.goldin:copy-maven-plugin:0.2.5:copy (copy-ear-to-jar) on project hwr-wlapp-jar: Processing <resource> [Target path(s) [/lapps/hudson/workspace/Navid-HWR/hwr-whitelabelapp/hwr-wlapp-jar/target/classes/], directory [/lapps/hudson/workspace/Navid-HWR/hwr-whitelabelapp/hwr-wlapp-ear/target], dependencies []] failed with [java.lang.AssertionError]: No [**/*.ear] file(s) found in [/lapps/hudson/workspace/Navid-HWR/hwr-whitelabelapp/hwr-wlapp-ear/target], excludes pattern is [**/#*#, **/%*%, **/*.iml, **/*.ipr, **/*.iws, **/*~, **/-darcs-backup*, **/.#*, **/.DS_Store, **/.MySCMServerInfo, **/._*, **/.arch-ids, **/.arch-ids/**, **/.bzr, **/.bzr/**, **/.bzrignore, **/.classpath, **/.cvsignore, **/.darcs-temp-mail, **/.darcsrepo, **/.darcsrepo/**, **/.git, **/.git/**, **/.gitattributes, **/.gitignore, **/.gitmodules, **/.hg, **/.hg/**, **/.hgignore, **/.hgsub, **/.hgsubstate, **/.hgtags, **/.metadata, **/.metadata/**, **/.project, **/.settings/**, **/.svn, **/.svn/**, **/BitKeeper, **/BitKeeper/**, **/CVS, **/CVS/**, **/ChangeSet, **/ChangeSet/**, **/RCS, **/RCS/**, **/SCCS, **/SCCS/**, **/_darcs, **/_darcs/**, **/project.pj, **/vssver.scc].. Expression: (files || failIfNotFound). Values: files = [], failIfNotFound = true -> [Help 1] 
```

编辑：这里的每个请求是 hwr-wlapp-ear 的 pom.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <artifactId>hwr-wlapp-jar</artifactId>
    <description>Project for white label app ui</description>

    <packaging>jar</packaging>

    <parent>
        <groupId>oracle.apps.hcm.hwr.wlapp</groupId>
        <artifactId>hwr-whitelabelapp</artifactId>
        <relativePath>../</relativePath>
        <version>3.0.0-SNAPSHOT</version>
    </parent>

    <build>
        <plugins>
            <plugin>
                <groupId>com.github.goldin</groupId>
                <artifactId>copy-maven-plugin</artifactId>
                <version>0.2.5</version>
                <executions>
                    <execution>
                        <id>copy-ear-to-jar</id>
                        <phase>compile</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <resources>
                                <!-- Copy the ear file -->
                                <resource>
                                    <targetPath>${project.build.outputDirectory}/</targetPath>
                                    <directory>${project.basedir}/../hwr-wlapp-ear/target/</directory>
                                    <includes>
                                        <include>**/*.ear</include>
                                    </includes>
                                    <failIfNotFound>true</failIfNotFound>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>oracle.apps.hcm.hwr.wlapp</groupId>
            <artifactId>hwr-wlapp-ear</artifactId>
            <type>ear</type>
            <version>${project.version}</version>
        </dependency>
    </dependencies>
</project> 
```

这是 hwr-wlapp-ear 的父级的 pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0     http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>oracle.apps.hcm.hwr.wlapp</groupId>
    <artifactId>hwr-whitelabelapp</artifactId>
    <packaging>pom</packaging>

    <version>3.0.0-SNAPSHOT</version>

    <name>hwr-whitelabelapp</name>

    <parent>
        <groupId>oracle.apps.hcm.hwr</groupId>
        <artifactId>hwr-parent</artifactId>
        <relativePath>../hwr-parent</relativePath>
        <version>3.0.0-SNAPSHOT</version>
    </parent>

    <organization>
        <name>Oracle</name>
        <url>http://www.oracle.com</url>
    </organization>

    <modules>
        <module>WhiteLabelApp</module>
        <module>hwr-wlapp-ear</module>
        <module>hwr-wlapp-jar</module>
    </modules>

</project> 
```

有人可以给我一些指示为什么会发生这种情况以及我该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:20:45.693

可能的根本原因是没有可从中复制的 ear 文件`${project.basedir}/../hwr-wlapp-ear/target/**/*.ear`。

这可能是`hwr-wlapp-ear project`在执行`hwr-wlapp-jar project`.

如果我错了，请纠正我。我了解您只执行`hwr-wlapp-jar project`. 有两种可能的方法来解决这个问题

1.  `hwr-whitelabelapp`从父项目文件夹 ( )执行 maven 命令。

2.  只执行第一个maven命令`hwr-wlapp-ear project`，使ear文件存在。然后在`hwr-wlapp-jar project`.

我希望这可能会有所帮助。

# php - cakephp 逻辑 - 获得相同结果的其他方法

> ID：15560880
> 
> 赞同：1
> 
> 时间：2013-03-22T00:52:01.083
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-2.0, cakephp-1.2

我已经尝试解决这个问题好几天了。如果可能，请协助或建议其他方法。我可以在 chrome、safari 和 firefox 中显示每个学生 10 节课的总分。但是，我在 IE9/10 中收到此错误“无法显示此页面”。

我厌倦了调试，发现当我通过 requestAction 使用 for 循环时，IE9/10 显示上述错误。话虽如此，我会要求 requestAction 获得总分。

为了获得总分，我依赖于 for each 循环（ foreach ($customers as $customer) { ... } ）来获取每个 $customer['Customer']['id'] 并将其传递给 requestAction 并返回回分数结果。

QNS 1\. 有没有其他方法可以达到这个结果？

QNS 2\. 我可以在控制器中做所有事情吗？如果是这样，怎么做？

**控制器**

```
function eachlesson($lessonid, $sessionkey, $customer_id) {

return $this->Score->find('first', array('conditions' => array('Score.test_bk_session_id' => $sessionkey, 'Customer.customers_types' => 'student', 'Score.lesson' => $lessonid, 'Score.customer_id' => $customer_id)));

} 
```

**看法**

```
<table>
<?php foreach ($customers as $customer) { ?>
<tr>
   <td>
      <?php echo $customer['Customer']['customers_name']; ?>
   </td>
   <td>
   <?php 
   $customer_id = $customer['Customer']['id'];
   $sessionkey = $this->params['pass'][1];

   //LOOP THROUGH 10 TIMES TO GET LESSON 1 - 10 SCORES
   for ($i=1; $i<=10; $i++) { 
       $lessonid = $i;
       $score = $this->requestAction('/scores/eachlesson/'.$lessonid."/".$sessionkey."/".$customer_id);

   //GETTING THE TOTAL SCORE FOR LESSON 1 TO 10
   (int)${'totaleachlesson'.$i} = $score['Score']['BI_pts'] + $score['Score']['FD_pts'] + $score['Score']['PO_pts']  + $score['Score']['WW_pts'] + $score['Score']['MG_pts'] + $score['Score']['FO_pts'];

   }

    //ADDING THE TOTAL SCORE OF THE 10 LESSONS
   $figureofcorrecttotal = $totaleachlesson1 + $totaleachlesson2 + $totaleachlesson3 + $totaleachlesson4 + $totaleachlesson5 + $totaleachlesson6 + $totaleachlesson7 + $totaleachlesson8 + $totaleachlesson9 + $totaleachlesson10;

   //DISPLAY THE TOTAL SCORE
   echo $figureofcorrecttotal;

   ?>
   </td>
</tr>
<?php } ?>
</table> 
```

**HTML 输出**

```
 <table class="tablesorter summary3pt2">
        <thead>
        <tr> 
                <th width="170" style="padding-right:5px;" class="empty">Name</th> 
                <th width="120" class="header">No of Correct</th> 

            </tr>
          </thead>
          <tbody>
                        <tr>
            <td class="bold" align="right">
            Drew Parsons                </td>
            <td>
         2                </td>
            </tr>
                            <tr>
            <td class="bold" align="right">
            Natasha Francis                </td>
            <td>
         0                </td>
            </tr>
                            <tr>
            <td class="bold" align="right">
            Johanna Harmon                </td>
            <td>
         0                </td>
            </tr>
                            <tr>
            <td class="bold" align="right">
            Aubrey Mckenzie                </td>
            <td>
         0                </td>
            </tr>
                            <tr>
            <td class="bold" align="right">
            Edith Sims                </td>
            <td>
         0                </td>
            </tr>
                            <tr>
            <td class="bold" align="right">
            Brandy Ruiz                </td>
            <td>
         0                </td>
            </tr>
                            <tr>
            <td class="bold" align="right">
            Toni Marshall                </td>
            <td>
         0                </td>
            </tr>
                            <tr>
            <td class="bold" align="right">
            Cedric Nash                </td>
            <td>
         0                </td>
            </tr>
                            <tr>
            <td class="bold" align="right">
            Penny Maldonado                </td>
            <td>
         0                </td>
            </tr>
                            <tr>
            <td class="bold" align="right">
            Brandi Perry                </td>
            <td>
         0                </td>
            </tr>
                            <tr>
            <td class="bold" align="right">
            Conrad Hogan                </td>
            <td>
         0                </td>
            </tr>
                            <tr>
            <td class="bold" align="right">
            Travis Sparks                </td>
            <td>
         0                </td>
            </tr>
                            <tr>
            <td class="bold" align="right">
            Winifred Watson                </td>
            <td>
         0                </td>
            </tr>
                            <tr>
            <td class="bold" align="right">
            Shannon Strickland                </td>
            <td>
         0                </td>
            </tr>
                        </tbody> 

        </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:43:36.127

首先，为什么你“必须”使用 requestAction **？**您根本没有遵循蛋糕约定。您需要花一点时间阅读文档... Imo，您希望将“评分”模型与“客户”模型相关联，并在一次调用中包含两者。

```
<?php
// Customer model.

class Customer extends AppModel {
    var $name = 'Customer';

    var $hasMany = array(
        'Score' => array(
            'className' => 'Score',
            'foreignKey' => 'customer_id',
            'limit' => 10,
            'conditions' => array(
                '<conditions go here>'
            )
        )
    );
}

?> 
```

* * *

```
<?php
// Score model.

class Score extends AppModel {
    var $name = 'Score';

    var $belongsTo = array(
        'Customer' => array(
            'className' => 'Customer',
            'foreignKey' => 'customer_id' // This assumes you have a customer_id field in the 'scores' table.
        )
    );
}

?> 
```

现在模型已关联，如果您没有将可包含的行为附加到它们，您可以在每个模型或主 app_controller.php 中添加：

```
var $actsAs = array('Containable'); 
```

现在您所要做的就是在对 Customer 模型执行查找时包含 Score 模型，系统会自动为您检索 10 个分数。

```
<?php
// customers_controller.php

class CustomersController extends AppController {
    var $name = 'Customers';

    function index() {
        // Contain the child method.
        $this->Customer->contain(array(
            'Score' => array(
                'conditions' => array(
                    'Score.test_bk_session_id' => $sessionkey,
                    'Score.lesson' => $lessonid
                )
            )
        ));
        $customers = $this->Customer->find('all', array(
            'conditions' => array(
                'Customer.customers_types' => 'student'
            )
        ));
        // Now you have all your customers, AND their associated
        // scores. No more request action needed (never use that imo)
        $this->set('customers', $customers);

        // Your array should look like this:
        // $customers =
        //array(
        //    [0] => array(
        //        'Customer' => array(<CustomerArray>),
        //        'Score' => array(<ScoreArray>)
        //    ),
        //    [1] => ...
        //)
    }
}

?> 
```

我写得很快，所以请原谅任何错误或错误假设。希望这对您的问题有所帮助。

# c++ - 读取二进制数据列

> ID：15560883
> 
> 赞同：0
> 
> 时间：2013-03-22T00:52:15.790
> 
> 标签：c++, file-io, binary

现在我有一个 C++ 程序，它使用类似的东西从文本文件中读取两列数据

```
while(!file.eof())
{
    double a, b;
    file >> a >> b; // extracts 2 floating point values separated by whitespace

    // do something with them
} 
```

现在我想调整此代码以从 .bin 文件中读取两列二进制数据。我仍然想在我的程序的其余部分将这些值视为双精度值。实现这一目标的最简单方法是什么？

**编辑：**

我正在 python 程序中编写这样的二进制数据。我认为它分为两列。

```
import struct
c = struct.Struct('=ff')
with open('numbers.bin', 'w+') as outf:
    for r, k in nonzero:
        outf.write(c.pack(r, k)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:21:49.467

说您要读取二进制数据的两个“列”是没有意义的。

列是出于人眼可读性目的而将数据可视化的产物。当您读取/写入二进制数据时，不要考虑数据对人类的看法。想象一下硬盘上连续存储的一大段 1 和 0。忘记行……忘记行……等等。

您需要使用 fstream 'read' 和 'write' 命令。有关 fstream 的文档，请参阅此链接：[http ://www.cplusplus.com/reference/fstream/fstream/](http://www.cplusplus.com/reference/fstream/fstream/)

# c# - 添加了对 System.Data.SQlite.Linq 的引用，仍然得到程序集引用丢失错误

> ID：15560884
> 
> 赞同：0
> 
> 时间：2013-03-22T00:52:21.163
> 
> 标签：c#, .net, linq, sqlite, system.data.sqlite

我正在尝试将 SQlite 与 Linq 一起使用，并且我想手动为我的表添加映射。

为此，我添加了对我的项目的引用（右键单击）引用 > 添加引用，然后选择此处找到的两个 .dll 文件：

`C:\Program Files (x86)\System.Data.SQLite\2010\bin`

`System.Data.SQLite.dll and System.Data.SQLite.Linq.dll`

通过转到项目属性并在构建选项卡下选择 x86，我将平台目标更改为 x86。

我希望能够像我一样使用映射属性`System.Data.Linq.Mappings`

但是当我编译时，我得到以下错误：

`Error 1 The type or namespace name 'Linq' does not exist in the namespace 'System.Data.SQLite' (are you missing an assembly reference?)`

我确实使用了文件顶部的两个语句： `using System.Data.SQLite;`

`using System.Data.SQLite.Linq`

我正在使用 Visual Studio 2012。

我已经坚持了3天。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:45:30.233

前几天我遇到了这样的问题，但是使用了不同的库。我的与命名空间冲突有关。您是否尝试删除 System.Data.SqlLite 并离开 System.data.SqlLite.linq，反之亦然？

# c++ - 符号可见性和命名空间

> ID：15560892
> 
> 赞同：16
> 
> 时间：2013-03-22T00:53:24.647
> 
> 标签：c++, gcc, visibility, symbols

我正在尝试在 Linux 和 gcc 上使用 C++ 符号可见性。似乎首选的方法是使用 -fvisibility=hidden，并根据 Visibility gcc wiki 页面（[http://gcc.gnu.org/wiki/Visibility](http://gcc.gnu.org/wiki/Visibility)）一个接一个地导出使用的符号。我的问题是*许多*库处理得不好，他们忘记显式导出符号，这是一个严重的问题。在修复了几个 bug 之后，甚至 boost 的某些部分仍然可能受到影响。当然这些错误应该被修复，但在此之前我想使用一种“安全”的方式来隐藏尽可能多的符号。

我想出了一个解决方案：我将所有符号放在命名空间中，并在其上使用符号隐藏属性并导出公共接口，这样只有我的符号会受到影响。

问题是，当我为每个尚未导出的类并在应用程序中用作类字段时针对该库编译某些内容时，我收到了一条警告消息。

```
namespace MyDSO __attribute__ ((visibility ("hidden"))) {
  struct Foo {
    void bar() __attribute__ ((visibility ("default"))) {}
  };
}

struct Bar {
  MyDSO::Foo foo;
};

int main() {} 
```

警告消息可以在这个小示例中重现，但名称空间当然应该在应用程序中的其他类的库中。

```
$ gcc-4.7.1 namespace.cpp -o namespace
namespace.cpp:7:8: warning: ‘Bar’ declared with greater visibility than the type of its field ‘Bar::foo’ [-Wattributes] 
```

据我了解符号可见性，隐藏命名空间应该与使用 -fvisibility=hidden 具有非常相似的效果，但使用后者我从未收到类似的警告。我看到当我将 -fvisibility=hidden 传递给应用程序时，应用程序中的类也将被隐藏，所以我不会收到警告。但是，当我不传递该选项时，标头中的任何符号都不会被编译器隐藏，因此我不会再次收到警告。

这个警告信息的建议是什么？这是一个严重的问题吗？在哪些情况下这会导致任何问题？隐藏命名空间与 fvisibility=hidden 有何不同？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-25T01:43:01.517

在我回答您的具体问题之前，我应该向其他阅读者提及，为每个命名空间应用符号可见性属性是 GCC 特定的功能。MSVC 仅支持类、函数和变量的 dllexport，如果您希望代码可移植，则必须在此处匹配 MSVC。正如我最初的 GCC 符号可见性指南（您在 GCC 网站上链接到的那个）指出的那样，MSVC 基于宏的 dllexport 机制可以很容易地重用以在 GCC 上实现类似的功能，因此移植到 MSVC 将为您提供符号可见性处理“免费”。

关于您的具体问题，GCC 正确地警告您。如果外部用户尝试使用公共类型 Bar，他们几乎肯定需要使用 Bar 中的所有内容，包括 Bar::foo。出于完全相同的原因，所有私有成员函数，尽管是私有的，都需要可见。**很多人对此感到惊讶，认为私有成员函数符号在定义上任何人都无法访问，但他们忘记了**仅仅因为程序员没有访问权限并不意味着*编译器*不需要**使用权。换句话说，私有成员函数对您来说是私有的，而不是编译器。如果它们出现在头文件中，则通常意味着编译器需要访问，即使在匿名命名空间中也是如此（这仅对程序员是匿名的，而不是倾向于使用内容的哈希作为“真实”命名空间名称的编译器）。**

 **隐藏命名空间与 -fvisibility=hidden 的效果截然不同。这是因为 GCC 会在特定类型（例如 vtables、type_info 等）的符号之上和之外喷出许多符号。 -fvisibility=hidden 隐藏您无法通过任何编译器指令方式隐藏的内容，这对于加载两个二进制文件是绝对必要的使用碰撞符号进入同一进程，例如使用不同版本的 Boost 构建的两个共享对象。

我感谢您尝试解决由 ELF 中损坏的符号可见性引起的问题以及损坏的 C++ 二进制文件的后果以及程序员生产力的严重损失。但是您无法修复它们 - 它们是 ELF 本身的错误，它是为 C 而不是 C++ 设计的。如果有什么安慰的话，几个月前我写了一篇关于这个主题的内部 BlackBerry 白皮书，因为 ELF 符号可见性问题对于我们在 BB10 中的问题与对于任何拥有重要 C++ 代码库的大公司一样大。因此，也许您可​​能会看到针对 C++17 提出的一些解决方案，特别是如果 Doug Gregor 的 C++ Modules 实现取得了良好进展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:21:38.450

您对可见性属性的使用对我来说似乎倒退了；我认为使用 -fvisibility=hidden 并将可见性“默认”添加到库声明命名空间会获得更好的结果，因为库的接口可能具有默认可见性，或者您无法从应用程序中使用它。如果你不想修改库头文件，你可以在你的#includes 周围使用#pragma GCC visibility push/pop。

此外，正如 Niall 所说，将单个成员函数标记为默认值是行不通的，如果它是库接口的一部分，则整个 Foo 类型需要具有默认可见性。**

# c# - 检测到循环引用 Linq

> ID：15560893
> 
> 赞同：1
> 
> 时间：2013-03-22T00:53:27.180
> 
> 标签：c#, json, asp.net-mvc-3, linq

在尝试建立表示 1 个帖子可以有多个 postComments 的关系时出现此错误

> 序列化 System.Collections.Generic.List`1[[DAO.Models.PostComment, DAO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' 类型的对象时检测到循环引用。

```
int userId = (int)Session["UserId"];
try
{
    IEnumerable<Post> userPosts;
    userPosts = (from q in db.Posts
                    where q.UserId == userId
                    && q.PostId > postid
                    select q).Take(5).ToList();

    return Json(userPosts.Select(x => new
    {
        success = 1,
        contenttext = x.PostContent,
        postId = x.PostId,
        comments = x.PostComments
    }), JsonRequestBehavior.AllowGet);

}
catch (Exception ex)
{
    return Json(new { success = 0 });

}
finally
{
    //db.Dispose();
} 
```

**我的帖子类**

```
public partial class Post
{
    public Post()
    {
        this.PostComments = new List<PostComment>();
    }

    public int UserId { get; set; }
    public int PostId { get; set; }
    public string PostContent { get; set; }        
    public virtual ICollection<PostComment> PostComments { get; set; }

    public partial class PostComment
    {
        public long PostCommentID { get; set; }
        public int PostId { get; set; }
        public int ParentCommentID { get; set; }
        public System.DateTime CommentDate { get; set; }
        public string Comment { get; set; }
        public virtual Post Post { get; set; }
    }   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T01:05:07.400

在您的`Post`课程中，您引用 PostComment 并在您的`PostComment`课程中`Post`再次引用您的，这是循环引用发生的地方，您可以使用 Json.NET [http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)并执行以下操作

```
JsonConvert.SerializeObject(myObject, Formatting.Indented, 
                            new JsonSerializerSettings { 
                                   ReferenceLoopHandling = ReferenceLoopHandling.Ignore 
                            }) 
```

要忽略引用循环处理，或者在序列化之前将其强制转换为匿名类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:58:06.260

这意味着您的数据库中有一些关于某些列*必须*引用某个表中的有效*行*的约束，并且这里有一个循环引用。它必须按照它们相互依赖的顺序更新行，但由于循环引用，这是不可能的。没有可以首先更新的单行满足当时的数据库约束。

# device-driver - 无法安装简单的 .inf 文件

> ID：15560900
> 
> 赞同：0
> 
> 时间：2013-03-22T00:54:01.347
> 
> 标签：device-driver, windows-7-x64, inf

我尝试使用“添加硬件”向导安装设备驱动程序，在选择我尝试安装的 .inf 文件后，我不断收到以下错误：

> 您指定的文件夹不包含您设备的兼容软件驱动程序。如果该文件夹包含驱动程序，请确保它设计为与基于 x64 系统的 Windows 一起使用。

以下是我的驱动文件的内容。

设备.inf：

```
[Version]
Signature="$WINDOWS NT$"
CatalogFile.NTx86=mox86.cat
CatalogFile.NTIA64=moia64.cat
CatalogFile.NTAMD64=moamd64.cat
Class=HIDClass
ClassGuid={745a17a0-74d3-11d0-b6fe-00a0c90f57da}
Provider=%Vendor%
DriverVer=03/19/2013,6.1.7601.17515

[ControlFlags]
ExcludeFromSelect = *

[Manufacturer]
%Vendorr% = HTPI,NTx86,NTamd64,NTia64

[HTPI.NTx86]
%USB\VID_0D8C&PID_0176&MI_00.DeviceDesc% = Device_Inst.NTx86,, USB\VID_0D8C&PID_0176&MI_00

[HTPI.NTamd64]
%USB\VID_0D8C&PID_0176&MI_00.DeviceDesc% = Device_Inst.NTamd64,, USB\VID_0D8C&PID_0176&MI_00

[HTPI.NTia64]
%USB\VID_0D8C&PID_0176&MI_00.DeviceDesc% = Device_Inst.NTia64,, USB\VID_0D8C&PID_0176&MI_00

[Device_Inst.NTx86]
Include=input.inf
Needs=HID_Inst.NT

[Device_Inst.NTamd64]
Include=input.inf
Needs=HID_Inst.NT

[Device_Inst.NTia64]
Include=input.inf
Needs=HID_Inst.NT

[Strings]
Vendor = "Mo"
USB\VID_0D8C&PID_0176&MI_00.DeviceDesc = "Mo's Device" 
```

我相信驱动程序文件确实适用于基于 x64 的系统。我创建了 mox86.cat 和 moamd64.cat 目录文件，并对它们进行了测试签名并在我的计算机上安装了证书。使用签名工具，我验证了 mox86.cat 和 moamd64 都已签名。

尝试使用 DevCon 安装也会给我一个错误。这是我用来安装 vai DevCon 的命令：

```
devcon install c:\devicedriver\driver\device.inf "USB\VID_0D8C&PID_0176&MI_03" 
```

有谁知道我哪里出错了？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:26:56.423

我上错课了

```
Class=HIDClass 
ClassGuid={745a17a0-74d3-11d0-b6fe-00a0c90f57da} 
```

但我的设备是`Class=Media`.

# xcode4 - 在 Mac 10.8.3 上安装 fltk

> ID：15560901
> 
> 赞同：0
> 
> 时间：2013-03-22T00:54:03.387
> 
> 标签：xcode4, terminal, installation, osx-mountain-lion, fltk

我正在努力`fltk`在我的 Mac 上安装，我想在`Xcode 4`. 下载文件并解压缩并尝试按照说明进行操作后：

* * *

```
 2.3  Configuring FLTK
-----------------------

Stay in your FLTK source-code directory. Type:

  autoconf

Now configure your FLTK installation:

  ./configure

ADVANCED: type "./configure --help" to get a complete list of optional 
configurations parameters. These should be pretty self-explanatory. Some
more details can be found in README. 

To create Universal Binaries, start "configure" with these flags:
  ./configure  --with-archflags="-arch i386 -arch ppc -arch x86_64"
:END_ADVANCED 
```

* * *

首先，当我尝试运行时，`autoconf`我得到：

```
-bash: autoconf: command not found. 
```

还有`./configure`命令，像这样`dhcp-10-201-207-151:fltk-1.3 user$ ./configure`，我得到：

```
-bash: ./configure: No such file or directory. 
```

我已经尝试在网上遵循许多教程，其中大多数都是过时的，它对我不起作用。显然，还有另一种使用 Macports 安装它的方法，我也未能应用。

如果有人能以更简单的方式展示安装`fltk`和运行它的步骤`Xcode`，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T23:06:40.863

您不需要使用 autoconf 或您提到的选项。如果您安装了 Xcode 4 和命令行工具，您可以像这样在 OS X 上编译 FLTK：

```
./configure CC=clang CXX=clang++
make
sudo make install 
```

至少这对我来说很好......

我也用 Xcode 在 OS X 上构建了它，但是你必须去

```
fltk-1.3.2/ide/Xcode4 
```

目录，并用Xcode打开FLTK.xcodeproj文件，然后选择“Demo”作为构建目标和“Build for Archive”。然后，您可以根据需要手动将文件移动到 /usr/local/，或者作为 /Library/Frameworks 中的框架。

不过，我会选择选项 1。

# java - 从 Fragment 设置自定义 ActionBar 标题

> ID：15560904
> 
> 赞同：99
> 
> 时间：2013-03-22T00:54:41.853
> 
> 标签：java, android, android-fragments, android-actionbar, android-fragmentactivity

在我的 Main`FragmentActivity`中，我设置了我的自定义`ActionBar`标题，如下所示：

```
 LayoutInflater inflator = (LayoutInflater) this
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = inflator.inflate(R.layout.custom_titlebar, null);

    TextView tv = (TextView) v.findViewById(R.id.title);
    Typeface tf = Typeface.createFromAsset(this.getAssets(),
            "fonts/capsuula.ttf");
    tv.setTypeface(tf);
    tv.setText(this.getTitle());

    actionBar.setCustomView(v); 
```

这很完美。但是，一旦我打开 other `Fragments`，我希望标题改变。我不确定如何访问 Main`Activity`来执行此操作？过去，我是这样做的：

```
((MainFragmentActivity) getActivity()).getSupportActionBar().setTitle(
            catTitle); 
```

有人可以建议正确的方法吗？

**XML:**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/transparent" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="5dp"
        android:ellipsize="end"
        android:maxLines="1"
        android:text=""
        android:textColor="#fff"
        android:textSize="25sp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-03-22T01:09:11.693

你在做什么是正确的。`Fragments`无权访问`ActionBar`API，因此您必须调用`getActivity`. 除非你`Fragment`是一个静态内部类，在这种情况下你应该创建一个`WeakReference`父类并调用 Activity。`getActionBar`从那里。

`ActionBar`要在使用自定义布局时为您的 设置标题，您`Fragment`需要调用`getActivity().setTitle(YOUR_TITLE)`.

你打电话的原因`setTitle`是因为你打电话`getTitle`作为你的`ActionBar`. `getTitle`返回那个的标题`Activity`。

如果您不想拨打电话`getTitle`，那么您需要创建一个公共方法来设置您`TextView`在`Activity`托管`Fragment`.

**在您的活动中**：

```
public void setActionBarTitle(String title){
    YOUR_CUSTOM_ACTION_BAR_TITLE.setText(title);
} 
```

**在你的片段中**：

```
((MainFragmentActivity) getActivity()).setActionBarTitle(YOUR_TITLE); 
```

**文件：**

[`Activity.getTitle`](https://developer.android.com/reference/android/app/Activity.html#getTitle())

[`Activity.setTitle`](https://developer.android.com/reference/android/app/Activity.html#setTitle(java.lang.CharSequence))

此外，您不需要调用`this.whatever`您提供的代码，只是一个提示。

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2013-08-02T07:56:57.687

**===2019 年 10 月 30 日更新===**

由于我们有了**ViewModel**和**LiveData**等新组件，我们可以通过使用 ViewModel 和 Live Data 以不同/更简单的方式从 Fragment 更新 Activity Title

活动

```
class MainActivity : AppCompatActivity() {
private lateinit var viewModel: MainViewModel
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.main_activity)
    if (savedInstanceState == null) {
        supportFragmentManager.beginTransaction()
            .replace(R.id.container, MainFragment.newInstance())
            .commitNow()
    }
    viewModel = ViewModelProviders.of(this).get(MainViewModel::class.java)
    viewModel.title.observe(this, Observer {
        supportActionBar?.title = it
    })
} } 
```

主要片段

```
class MainFragment : Fragment() {
companion object {
    fun newInstance() = MainFragment()
}
private lateinit var viewModel: MainViewModel
override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,
                          savedInstanceState: Bundle?): View {
    return inflater.inflate(R.layout.main_fragment, container, false)
}
override fun onActivityCreated(savedInstanceState: Bundle?) {
    super.onActivityCreated(savedInstanceState)
    activity?.run {
        viewModel = ViewModelProviders.of(this).get(MainViewModel::class.java)
    } ?: throw Throwable("invalid activity")
    viewModel.updateActionBarTitle("Custom Title From Fragment")
} } 
```

和 MainModelView：

```
class MainViewModel : ViewModel() {
private val _title = MutableLiveData<String>()
val title: LiveData<String>
get() = _title
fun updateActionBarTitle(title: String) = _title.postValue(title) } 
```

然后您可以使用 Fragment 更新活动标题`viewModel.updateActionBarTitle("Custom Title From Fragment")`

**===2015 年 4 月 10 日更新===**

您应该使用侦听器来更新您的操作栏标题

分段：

```
public class UpdateActionBarTitleFragment extends Fragment {
    private OnFragmentInteractionListener mListener;

    public UpdateActionBarTitleFragment() {
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (getArguments() != null) {
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        if (mListener != null) {
            mListener.onFragmentInteraction("Custom Title");
        }
        return inflater.inflate(R.layout.fragment_update_action_bar_title2, container, false);
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            mListener = (OnFragmentInteractionListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                    + " must implement OnFragmentInteractionListener");
        }
    }

    @Override
    public void onDetach() {
        super.onDetach();
        mListener = null;
    }

    public interface OnFragmentInteractionListener {
        public void onFragmentInteraction(String title);
    }
} 
```

和活动：

```
public class UpdateActionBarTitleActivity extends ActionBarActivity implements UpdateActionBarTitleFragment.OnFragmentInteractionListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_update_action_bar_title);
    }

    @Override
    public void onFragmentInteraction(String title) {
        getSupportActionBar().setTitle(title);
    }
} 
```

在此处阅读更多信息：[https ://developer.android.com/training/basics/fragments/communicating.html](https://developer.android.com/training/basics/fragments/communicating.html)

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2014-03-05T18:00:21.557

谷歌示例倾向于在片段中使用它。

```
private ActionBar getActionBar() {
    return ((ActionBarActivity) getActivity()).getSupportActionBar();
} 
```

该片段将属于一个 ActionBarActivity ，这就是对操作栏的引用所在。这样更简洁，因为片段不需要确切知道它是什么活动，它只需要属于实现了 ActionBarActivity 的活动。这使片段更加灵活，并且可以添加到多个活动中，就像它们应该做的那样。

现在，您需要在片段中做的就是。

```
getActionBar().setTitle("Your Title"); 
```

如果您有一个片段继承自基础片段而不是普通片段类，则此方法效果很好。

```
public abstract class BaseFragment extends Fragment {
    public ActionBar getActionBar() {
        return ((ActionBarActivity) getActivity()).getSupportActionBar();
    }
} 
```

然后在你的片段中。

```
public class YourFragment extends BaseFragment {
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        getActionBar().setTitle("Your Title");
    }
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-01-16T10:20:47.377

我不认为接受的答案是一个完美的答案。由于所有使用的活动

> 工具栏

扩展使用

> AppCompatActivity

，从中调用的片段可以使用下面提到的代码来更改标题。

```
((AppCompatActivity) context).getSupportActionBar().setTitle("Your Title"); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-07-23T09:17:28.273

设置`Activity`'s title from a`Fragment`混乱的责任级别。`Fragment`包含在一个`Activity`中，所以这是`Activity`，它应该根据例子的类型设置自己的标题`Fragment`。

假设你有一个接口：

```
interface TopLevelFragment
{
    String getTitle();
} 
```

`Fragment`可以影响`Activity`' 标题的 s 则实现该接口。在托管活动中，您编写：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    FragmentManager fm = getFragmentManager();
    fm.beginTransaction().add(0, new LoginFragment(), "login").commit();
}

@Override
public void onAttachFragment(Fragment fragment)
{
    super.onAttachFragment(fragment);

    if (fragment instanceof TopLevelFragment)
        setTitle(((TopLevelFragment) fragment).getTitle());
} 
```

以这种方式`Activity`始终可以控制要使用的标题，即使`TopLevelFragment`组合了几个 s，这在平板电脑上是完全可能的。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-08-25T06:52:48.000

一个简单的 Kotlin 示例

将此适应您的片段类：

```
 /**
     * A simple [Fragment] subclass.
     *
     * Updates the action bar title when onResume() is called on the fragment,
     * which is called every time you navigate to the fragment
     *
     */

    class MyFragment : Fragment() {

        override fun onResume() {
            super.onResume()
            (requireActivity() as MyMainActivity).supportActionBar?.title = "My Fragment!"
        }

    } 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-02-09T08:27:39.450

在我们可以这样使用的片段中，它对我来说很好用。

```
getActivity().getActionBar().setTitle("YOUR TITLE"); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-08-04T14:08:12.020

以防万一您对代码有疑问，请尝试将其放入 `getSupportActionBar().setTitle(title)`片段`onResume()`而不是`onCreateView(...)`ie

在*MainActivity.java*中：

```
public void setActionBarTitle(String title) {
    getSupportActionBar().setTitle(title);
} 
```

在片段中：

```
 @Override
 public void onResume(){
     super.onResume();
     ((MainActivity) getActivity()).setActionBarTitle("Your Title");
 } 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-09-15T05:20:56.613

使用以下内容：

```
getActivity().setTitle("YOUR_TITLE"); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-02-02T13:57:04.437

这是我在使用 NavigationDrawer 时从片段中设置 ActionBar 标题的解决方案。此解决方案使用接口，因此片段不需要直接引用父 Activity：

1）创建接口：

```
public interface ActionBarTitleSetter {
    public void setTitle(String title); 
} 
```

2) 在 Fragment 的**onAttach**中，将活动转换为 Interface 类型并调用 SetActivityTitle 方法：

```
@Override 
public void onAttach(Activity activity) { 
    super.onAttach(activity);
    ((ActionBarTitleSetter) activity).setTitle(getString(R.string.title_bubbles_map)); 
} 
```

3）在activity中，实现**ActionBarTitleSetter**接口：

```
@Override 
public void setTitle(String title) { 
    mTitle = title; 
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-10-12T08:49:49.450

更改标题的最佳事件`onCreateOptionsMenu`

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.general, container,  
    setHasOptionsMenu(true); // <-Add this line
    return view;
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {

    // If use specific menu
    menu.clear();
    inflater.inflate(R.menu.path_list_menu, menu);
    // If use specific menu

    ((AppCompatActivity) getActivity()).getSupportActionBar().setTitle("Your Fragment");
    super.onCreateOptionsMenu(menu, inflater);
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-06-07T13:42:47.663

如果您有一个包含许多片段的主要活动，通常使用navigationDrawer。你的片段有一系列标题，当你按下，让它们改变时，把它放在保存片段的主要活动中

```
@Override
     public void onBackPressed() {

    int T=getSupportFragmentManager().getBackStackEntryCount();
    if(T==1) { finish();}

    if(T>1) {
        int tr = Integer.parseInt(getSupportFragmentManager().getBackStackEntryAt(T-2).getName());
        setTitle(navMenuTitles[tr]);  super.onBackPressed();
      }

} 
```

这假设你给每个片段一个标签，通常是在你将片段添加到navigationDrawer列表时的某个地方，根据在列表上按下的位置。所以那个位置就是我在标签上捕获的：

```
 fragmentManager.beginTransaction().
replace(R.id.frame_container, fragment).addToBackStack(position).commit(); 
```

现在，navMenuTitles 是您在 onCreate 上加载的内容

```
 // load slide menu items
        navMenuTitles = getResources().getStringArray(R.array.nav_drawer_items); 
```

数组 xml 是 strings.xml 上的数组类型字符串资源

```
 <!-- Nav Drawer Menu Items -->
    <string-array name="nav_drawer_items">
        <item>Title one</item>
        <item>Title Two</item>
    </string-array> 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-10-13T03:58:43.827

将您的答案保存在 String[] 对象中，并在 MainActivity 中将其设置为 OnTabChange() 如下www

```
String[] object = {"Fragment1","Fragment2","Fragment3"};

public void OnTabChange(String tabId)
{
int pos =mTabHost.getCurrentTab();     //To get tab position
 actionbar.setTitle(object.get(pos));
}

//Setting in View Pager
public void onPageSelected(int arg0) {
    mTabHost.setCurrentTab(arg0);
actionbar.setTitle(object.get(pos));
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-04-18T17:24:30.110

你这样的铸造方法的缺点

```
((MainFragmentActivity) getActivity()).getSupportActionBar().setTitle(
        catTitle); 
```

是您的片段在 MainActivityFragment 之外不再可重用。如果您不打算在该活动之外使用它，那么没有问题。更好的方法是根据活动有条件地设置标题。所以在你的片段中，你会写：

```
if (getActivity() instanceof ActionBarActivity) {
    ((ActionBarActivity) getActivity()).getSupportActionBar().setTitle("Some Title");
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-10-19T11:06:09.067

如果您使用的是 google 提供的 android studio 1.4 稳定模板，那么您必须在方法中编写以下代码，`onNavigationItemSelected`在其中您的相关片段调用 if 条件。

```
 setTitle("YOUR FRAGMENT TITLE"); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-08-23T09:52:33.550

> 我得到了一个非常简单的解决方案，可以在片段或任何活动中设置 ActionBar Title，而不会让人头疼。
> 
> 只需修改定义工具栏的xml，如下所示：

```
<android.support.design.widget.AppBarLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:theme="@style/AppTheme.AppBarOverlay">

        <android.support.v7.widget.Toolbar
            android:id="@+id/toolbar"
            android:layout_width="match_parent"
            android:layout_height="?attr/actionBarSize"
            android:background="@color/colorPrimaryDark"
            app:popupTheme="@style/AppTheme.PopupOverlay" >

            <TextView
                style="@style/TextAppearance.AppCompat.Widget.ActionBar.Title"
                android:id="@+id/toolbar_title"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="@string/app_name"
                />
            </android.support.v7.widget.Toolbar>

    </android.support.design.widget.AppBarLayout> 
```

> 1）如果要在片段中设置操作栏，则：

```
Toolbar toolbar = findViewById(R.id.toolbar);
TextView toolbarTitle = (TextView) toolbar.findViewById(R.id.toolbar_title); 
```

> 要在任何地方使用它，您可以在活动中定义一个方法

```
public void setActionBarTitle(String title) {
        toolbarTitle.setText(title);
    } 
```

> 要在活动中调用此方法，只需调用它即可。

```
setActionBarTitle("Your Title") 
```

> 要从活动片段调用此方法，只需调用它即可。

```
((MyActivity)getActivity()).setActionBarTitle("Your Title"); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-04-01T17:45:05.950

只是为了添加到选定的答案，您可能还想在您的主要活动中添加第二种方法。因此，您最终会在主要活动中使用以下方法：

```
public void setActionBarTitle(String title) {
    getSupportActionBar().setTitle(title);
}

public void setActionBarTitle(int resourceId) {
    setActionBarTitle(getResources().getString(resourceId);
} 
```

这将允许您从 String 变量和资源 ID（例如`R.id.this_is_a_string`strings.xml 文件）设置标题。这也将更像是如何`getSupportActionBar().setTitle()`工作的，因为它允许您传递资源 ID。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-05-16T04:41:07.050

如上所述，有很多方法。你也可以`onNavigationDrawerSelected()`在你的`DrawerActivity`

```
public void setTitle(final String title){
    ((TextView)findViewById(R.id.toolbar_title)).setText(title);
}

@Override
public void onNavigationDrawerItemSelected(int position) {
    // update the main content by replacing fragments
    fragment = null;
    String title = null;
    switch(position){

    case 0:
        fragment = new HomeFragment();
        title = "Home";
        break;
    case 1:
        fragment = new ProfileFragment();
        title = ("Find Work");
        break;
    ...
    }
    if (fragment != null){

        FragmentManager fragmentManager = getFragmentManager();
        fragmentManager
        .beginTransaction()
        .replace(R.id.container,
                fragment).commit();

        //The key is this line
        if (title != null && findViewById(R.id.toolbar_title)!= null ) setTitle(title);
    }
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-02-17T15:37:49.600

至少对我来说，在运行时更改标签标题有一个简单的答案（经过大量挖掘）：

TabLayout tabLayout = (TabLayout) findViewById(R.id.tabs); tabLayout.getTabAt(MyTabPos).setText("我的新文本");

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-12-24T12:40:52.183

如果您正在使用`ViewPager`（如我的情况），您可以使用：

```
getSupportActionBar().setTitle(YOURE_TAB_BAR.getTabAt(position).getText()); 
```

在`onPageSelected`你的方法`VIEW_PAGER.addOnPageChangeListener`

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-06-01T13:17:49.600

在您的 MainActivity 中，在`onCreate:`

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

在您的片段活动中`onResume`：

```
getActivity().setTitle(R.string.app_name_science); 
```

*可选：- 如果它们显示空引用警告*

```
Objects.requireNonNull(getSupportActionBar()).setDisplayHomeAsUpEnabled(true);

Objects.requireNonNull(getActivity()).setTitle(R.string.app_name_science); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-01-19T19:54:15.940

基于 Ashish 使用 Java 回答的解决方案

```
private void setUI(){
    mainToolbar = findViewById(R.id.mainToolbar);
    setSupportActionBar(mainToolbar);
    DrawerLayout drawer = findViewById(R.id.drawer_layout);
    NavigationView navigationView = findViewById(R.id.nav_view);
    mAppBarConfiguration = new AppBarConfiguration.Builder(
            R.id.nav_home, R.id.nav_messaging, R.id.nav_me)
            .setDrawerLayout(drawer)
            .build();

    navController = Navigation.findNavController(this, R.id.nav_host_fragment);
    navController.addOnDestinationChangedListener(navDestinationChange);
    NavigationUI.setupActionBarWithNavController(this, navController, mAppBarConfiguration);
    NavigationUI.setupWithNavController(navigationView, navController);
}

private NavController.OnDestinationChangedListener navDestinationChange = new NavController.OnDestinationChangedListener(){
    @Override
    public void onDestinationChanged(@NonNull NavController controller, @NonNull NavDestination destination, @Nullable Bundle arguments) {
        if(R.id.nav_home==destination.getId()){
            destination.setLabel("News");
        }
    }
}; 
```

# numpy - scipy.linalg.eig 是否给出了正确的左特征向量？

> ID：15560905
> 
> 赞同：4
> 
> 时间：2013-03-22T00:54:46.563
> 
> 标签：numpy, scipy, eigenvector

我有一个关于 scipy.linalg.eig 如何计算左右特征向量的问题。也许我误解了一切，但事情似乎不适合我......

从一开始就。为了获得特征值和两个特征向量，我使用了以下内容：

`ev, left_v, right_v = scipy.linalg.eig(A, left=True)`

根据[手册](http://docs.scipy.org/doc/scipy/reference/generated/scipy.linalg.eig.html)，在`left=True`调用函数进行设置后，我应该期望将左特征向量作为`left_v`第 i 列指第 i 个特征值的列。然而，结果不是我预期的，所以我做了一个简单的检查。

我计算了两次调用该函数的左右特征向量（查看[此处](http://mathworld.wolfram.com/Eigenvector.html)了解详细信息）：

```
right_ev, right_v_2 = scipy.linalg.eig(A)
left_ev, left_v_2 = scipy.linalg.eig(A.T) 
```

其中 的列`left_v_2`是与 中的相应值相关联的特征向量`left_ev`。值得强调的是，两者都`right_ev_2`给出`left_ev_2`相同的特征值，但是它们的顺序不同，需要加以说明。

比较`left_ev`and `left_ev_2`（在对特征值重新排序之后）可以很快发现前者是后者的共轭，因此`left_ev`从`scipy.linalg.eig`with获得`left=True`的不是有效的左特征向量。

可以基于以下事实对特征向量的有效性进行另一项检查：对于任意实方矩阵，左右特征向量是双正交的，即：

`left_v.T.dot(right_v)`应该给出一个对角矩阵，但它没有，直到我将其更改为：`left_v.T.conj().dot(right_v)`，

尽管：

`left_v_2.T.dot(right_v_2)`给出一个预期的对角矩阵.

有没有人遇到过类似的问题？我说的对吗？sciPy 手册在描述时是否有点不精确`eig`？你能给点建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T03:48:56.560

关于`vl`，`eig`文档字符串说：

```
a.H vl[:,i] = w[i].conj() b.H vl[:,i] 
```

或者，取两边的*共轭转置*`b`（即 Hermitian 转置）（这就是 .H 的意思），假设是恒等式，

```
vl[:,i].H a = w[i] vl[:,i].H 
```

所以 的共轭转置的行`vl`是 的实际左特征向量`a`。

Numpy 数组实际上没有 .H 属性，因此您必须使用 .conj().T。

这是一个验证计算的脚本：

```
import numpy as np
from scipy.linalg import eig

# This only affects the printed output.
np.set_printoptions(precision=4)

a = np.array([[6, 2],
              [-1, 4]])

w, vl, vr = eig(a, left=True)

print "eigenvalues:", w
print

# check the left eigenvectors one-by-one:
for k in range(a.shape[0]):
    val = w[k]
    # Use a slice to maintain shape; vec is a 2x1 array.
    # That allows a meaningful transpose using .T.
    vec = vl[:, k:k+1]
    # rowvec is 1x2; it is the conjugate transpose of vec.
    # This should be the left eigenvector.
    rowvec = vec.conj().T
    # Verify that rowvec is a left eigenvector
    lhs = rowvec.dot(a)
    rhs = val * rowvec
    print "Compare", lhs, "to", rhs
    print rowvec, "is",
    if not np.allclose(lhs, rhs):
        print "*NOT*",
    print "a left eigenvector for eigenvalue", val

print
print "Matrix version:"
print "This"
print vl.conj().T.dot(a)
print "should equal this"
print np.diag(w).dot(vl.conj().T) 
```

输出：

```
eigenvalues: [ 5.+1.j  5.-1.j]

Compare [[ 1.6330+2.4495j  4.0825+0.8165j]] to [[ 1.6330+2.4495j  4.0825+0.8165j]]
[[ 0.4082+0.4082j  0.8165-0.j    ]] is a left eigenvector for eigenvalue (5+1j)
Compare [[ 1.6330-2.4495j  4.0825-0.8165j]] to [[ 1.6330-2.4495j  4.0825-0.8165j]]
[[ 0.4082-0.4082j  0.8165+0.j    ]] is a left eigenvector for eigenvalue (5-1j)

Matrix version:
This
[[ 1.6330+2.4495j  4.0825+0.8165j]
 [ 1.6330-2.4495j  4.0825-0.8165j]]
should equal this
[[ 1.6330+2.4495j  4.0825+0.8165j]
 [ 1.6330-2.4495j  4.0825-0.8165j]] 
```

现在，`eig`文档字符串还在返回值的描述中说：

```
vl : double or complex ndarray
    The normalized left eigenvector corresponding to the eigenvalue
    ``w[i]`` is the column v[:,i]. Only returned if ``left=True``.
    Of shape ``(M, M)``. 
```

这可能会产生误导，因为左特征向量的传统定义（例如[http://mathworld.wolfram.com/LeftEigenvector.html](http://mathworld.wolfram.com/LeftEigenvector.html)或[http://en.wikipedia.org/wiki/Eigenvalues_and_eigenvectors#Left_and_right_eigenvectors](http://en.wikipedia.org/wiki/Eigenvalues_and_eigenvectors#Left_and_right_eigenvectors)）是一个行向量，所以它`vl`实际上是左特征向量的列的共轭转置。

# php - CakePHP 2.0 中的维护重定向

> ID：15560906
> 
> 赞同：1
> 
> 时间：2013-03-22T00:54:46.810
> 
> 标签：php, redirect, cakephp-2.1, maintenance-mode

我正在尝试为网站制作维护重定向页面，以便可以激活“维护/更新模式”，这将导致将每个页面请求重定向到“维护页面关闭”。我已将开关设置为使用 Configure::write() 编写的全局变量，并使用 Configure::read() 进行检查。

我遇到的问题是——当它处于离线模式时，如何重定向每个页面请求？我的第一个想法是 AppController 的 beforeFilter() 函数中的条件 $this->redirect(...) 。但这导致了“重定向循环”错误：

![在此处输入图像描述](../Images/6aee8a67bcb38d203e7a3964c149e939.png)

我的第二个想法是，也许（我是 CakePHP 的新手）这经常被调用，作为基类 Controller 的第一个过滤器，这个想法很愚蠢。我想我可以通过创建一个“MaintenanceFilter”来解决这个问题，该“MaintenanceFilter”检查相同变量的在线或离线状态以进行重定向。但是，CookBook 提到过滤器是 Cake 2.2 的新功能，而本网站使用 2.1。即使我给它优先级 1，过滤器似乎也不起作用。（在 app/Routing/Filter 中定义）。

```
App::uses('DispatcherFilter', 'Routing');

class MaintenanceFilter extends DispatcherFilter
{
    public function beforeDispatch(CakeEvent $event)
    {
        if (strcmp(Configure::read('ServerStatus'), 'online') == 0)
        {
            $event->stopPropagation();

            $dispatcher = new Dispatcher();

            $dispatcher->dispatch(array('controller' => 'errors', 
                            'action' => 'maintenance'));
        }
    }
} 
```

然后我想也许我可以更一般地这样做，并使用 Router::connect('*', ...) 设置路由条件，将所有页面重定向到 /Errors/maintenance，条件服务器状态检查是：

```
Router::connect('*', array('controller' => 'Errors', 
                        'action' => 'maintenance')); 
```

我将它放在路由文件的顶部，以便首先处理它。正如您可能已经猜到的那样，没有任何页面被重定向到维护页面。

我在想我可以制作一个自定义异常处理程序并在服务器处于“离线模式”时引发异常，但是我将如何从处理程序的方法体内重定向到维护页面？

我必须遗漏一些关于 Cake 2.1 的特定内容，或者只是一般的 Cake/MVC。有人看到它可能是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:51:51.770

您的第一个解决方案给您重定向错误，应该没问题 - 很可能，您没有检查您是否已经在维护页面上，这意味着当您被重定向到维护页面时，像所有其他页面一样，它只是自动将您再次重定向到维护页面 - 因此是循环。

这是未经测试的代码，但它应该可以工作，或者至少让你走上正确的轨道：

```
function beforeFilter() {

    // Check if we are in offline mode
    if(!empty(Configure::read('offline_mode'))){

        // Check if we are already on the maintenance page
        $firstParam = ($this->request->params['pass'][0]))? $this->request->params['pass'][0]: '';
        if (isset($this->request->controller == 'pages' and $firstParam == 'maintenance')) {
            // Don't do anything - we don't want to redirect again.
        } else {
            // Redirect to the maintenance page
            $this->redirect(array('controller' => 'pages', 'action' => 'display', 'maintenance'));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T19:54:41.023

您可以使用以下过滤器在您的应用中启用维护模式

**[cakephp-维护模式](https://github.com/awebdeveloper/cakephp-maintenance-mode)**

# javascript - 在一个元素上调用 .each

> ID：15560907
> 
> 赞同：0
> 
> 时间：2013-03-22T00:54:52.580
> 
> 标签：javascript, node.js, each, node.io

我`node.io`用来抓取网站。目前我正在[学习抓取教程](https://github.com/chriso/node.io/wiki/Scraping)。

我正在使用`each`选择器

```
$('selector').each( ... , function () { ... } ); 
```

However when the selector selects only one element, I am receiving this problem:

```
TypeError: Object #<Object> has no method 'each' 
```

这可能是什么原因，我该如何缓解这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T01:13:31.240

查看`node.io`'s source code 后，似乎默认情况下它使用`node-soupselect`而不是 jQuery。

尝试设置：

```
this.options.expand_single_selected = false; 
```

在你的工作的运行方法中。或者，当您创建作业时，将其设置为

```
new nodeio.Job({timeout:10,expand_single_selected:false}, methods); 
```

这由[代码中的这些行](https://github.com/chriso/node.io/blob/master/lib/node.io/dom.js#L30-L34)检查，它将强制执行正确的行为。

来自`node.io`的创造者*chriso*：

> 老实说，这是我的设计失败。每次我想要一个集合中只有一个项目的单个元素时，我都厌倦了键入 first()，所以我添加了这个快捷方式 - 我知道它会在某个阶段回来咬我！

请参阅[此项目问题](https://github.com/chriso/node.io/issues/34)，了解如何将其更改为使用`jQuery`它来解决您的问题，以及坚持使用`soupselect`.

* * *

根据您的链接，当您使用时，您`$`不是在使用 jQuery，而是在使用[node-soupselect](https://github.com/harryf/node-soupselect)。

它没有`.each`方法。

而是使用

```
$('selector').forEach 
```

哪个是原生 JS 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:00:21.753

如果您将单个元素放在 [brackets] 中，它将充当单个项目数组并摆脱此问题

# version-control - 管理本地版本在线网站的最佳方式

> ID：15560908
> 
> 赞同：0
> 
> 时间：2013-03-22T00:54:59.827
> 
> 标签：version-control, ftp, project-management

我运行一个在线网络社区，目前我有一个本地版本的网站，我修改它，然后在我通过 FTP 上传编辑后的文件后，一旦我进行了必要的修改（使用 XAMPP）使它们生效

但是现在我正在外包工作来处理它，现在这种工作方式变得非常麻烦，因为我必须识别哪些文件被另一家公司修改，将它们下载到我的本地服务器，所以一切都是最新的 - 但不是有没有更简单的方法来做到这一点？

维护站点的“测试”版本以进行修改、尝试新事物的最佳方式是什么，分包企业可以在其中开发部分内容，以及将实时版本分开保存的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:03:04.440

这是一个通用解决方案的常见问题：版本控制系统。这是我的建议，但请随意查找版本控制系统并找到最适合您的。

GIT 是解决这类问题的流行版本控制工具。使用 GIT，您可以创建一个开发“分支”，非本地用户可以在其中更改和修改文件。出于安全考虑，您还可以设置密码等。使用 GIT，您可以跟踪许多其他强大功能的变化。然后，当您准备好将开发分支的更改合并到您的工作站点时，您可以使用 GIT 的合并功能来执行此操作。我相信像 BitBucket 和其他一些在线解决方案甚至会为你做一些这个存储库服务。

GIT 网站
[http://git-scm.com/](http://git-scm.com/)

# php - 在多维数组中搜索

> ID：15560909
> 
> 赞同：-1
> 
> 时间：2013-03-22T00:55:05.160
> 
> 标签：php, arrays, opencart

这是一个多维数组：

```
[0] => Array (   
    [order_total_id] => 8160  
    [order_id] => 2048 [code] => sub_total  
    [title] => Medzi-súčet  
    [text] => 5,75€  
    [value] => 5.7500  
    [sort_order] => 1 )   
[1] => Array (   
    [order_total_id] => 8161  
    [order_id] => 2048  
    [code] => shipping  
    [title] => Doporučený list  
    [text] => 2,00€  
    [value] => 2.0000  
    [sort_order] => 3 )  
[2] => Array (  
    [order_total_id] => 8162  
    [order_id] => 2048  
    [code] => tax  
    [title] => DPH 20%  
    [text] => 1,15€  
    [value] => 1.1500  
    [sort_order] => 5 )  
[3] => Array (  
    [order_total_id] => 8163  
    [order_id] => 2048  
    [code] => total  
    [title] => Celkom  
    [text] => 8,90€  
    [value] => 8.9000  
    [sort_order] => 6 ) 
```

我的问题是：有可能得到`[value] => 8.9000`（`[value]`可以在 md 数组中多次）？我认为正确的方法是首先找到`[code] => total`以识别正确的数组，然后在同一个数组中找到 [total] 键。为什么？因为`[code] => total`可以在子数组 [0], [1], [2], [3] 中有时只有 [0],[1] 子数组。

如果那行得通，最好找到`[code] => shipping`并`[value] => 2.0000`

感谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:57:33.903

[http://www.php.net/manual/en/function.array-search.php#69965](http://www.php.net/manual/en/function.array-search.php#69965)

```
<?php    

function myMulti_Array_Search($theNeedle, $theHaystack, $keyToSearch) 
        { 
        foreach($theHaystack as $theKey => $theValue) 
            { 
            $intCurrentKey = $theKey;    

            if($theValue[$keyToSearch] == $theNeedle) 
                { 

                return $intCurrentKey ; 
                } 
            else 
                { 
                return 0; 
                } 
            } 
        } 

?> 
```

# c++ - 如何通过decltype声明一个迭代器的值

> ID：15560912
> 
> 赞同：8
> 
> 时间：2013-03-22T00:55:25.420
> 
> 标签：c++, c++11, iterator, typetraits, decltype

在 C++98 中，我通常使用以下语句在迭代器的值类型中声明一个变量：

```
typename std::iterator_traits<Iterator>::value_type value; 
```

在 C++11 中，我们有 decltype，我认为推断值类型的最简单方法是：

```
decltype(*iterator) value; 
```

不幸的是，对于大多数迭代器，*iterator 的类型是 value_type& 而不是 value_type。任何想法，没有类型修改类，如何将上述内容按摩成产生 value_type （而不是任何参考）？

* * *

我不认为这个问题是不合理的，因为以下内容相当稳健但最终创建了另一个变量。

```
auto x = *iterator;
decltype(x) value; 
```

另请注意，我真的想要*推导的类型*而不仅仅是一个*实例*，例如，如果我想声明这些值的 std::vector。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-22T01:02:19.430

继续使用`iterator_traits`。 `decltype(*iterator)`甚至可以是某种奇怪的代理类，以便在表达式中做一些特殊的事情`*iter = something`。

例子：

```
#include <iostream>
#include <iterator>
#include <typeinfo>
#include <vector>

template <typename T>
void print_type()
{
    std::cout << typeid(T).name() << std::endl;
}

template <typename Iterator>
void test(Iterator iter)
{
    typedef typename
        std::iterator_traits<Iterator>::value_type iter_traits_value;

    auto x = *iter;
    typedef decltype(x) custom_value;

    print_type<iter_traits_value>();
    print_type<custom_value>();
}

int main()
{
    std::vector<int> a;
    std::vector<bool> b;

    test(a.begin());
    test(b.begin());
} 
```

MSVC 2012 上的输出：

> `int`
> `int`
> `bool`
> `class std::_Vb_reference<struct std::_Wrap_alloc<class std::allocator<unsigned int>>>`

他们不一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:45:29.010

对于这个用例，我喜欢 std::decay。通常我会使用

```
std::vector< int > vec;
using value_type = typename std::decay< decltype(*begin(vec)) >::type; 
static_assert(std::is_same< int, value_type >::value, "expected int"); 
```

# sql-server - SSIS 增量负载

> ID：15560913
> 
> 赞同：0
> 
> 时间：2013-03-22T00:55:31.440
> 
> 标签：sql-server, ssis

我正在尝试使用 SSIS 包在不稳定的线路上传输大约 10 亿行。因此，它一直在中途失败。我想要一些方法让它可以重新启动。我试图在源和目标之间进行查找转换，但这太慢了。有没有另一种方法可以在不影响性能的情况下做我想做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:44:18.337

我最初的方法是编写一个包，当它启动时，它会识别要传输的数据子集，记录它正在处理的子集并尝试传输该数据。如果它完成，那么它将该数据标记为已传输并退出。否则，它已经被炸毁了，那个包裹没有什么可做的。

另一个进程将运行 X 时间范围并尝试查找失败的传输（标记为进程中但比 Y 持续时间更早的子集）。然后它会从转移表中删除这些行或将它们标记为符合转移条件。一般的想法是那些坏掉的东西被标记为重做。

这是一个非常简单的设计，最难的部分是分段并跟踪已传输/未传输的内容，然后简单地设置一个 SQL 代理作业以每 N 个时间帧触发一次包。如果不是您的网络出现故障，那么像这样进行数据传输的好处是它允许您并行执行，从而获得最大的吞吐量。SSIS 团队在设置加载数据的[记录](http://msdn.microsoft.com/en-us/library/dd537533%28v=sql.100%29.aspx)时采用了类似的方法。他们还把这个系统搞砸了，但这也是意料之中的。

如果 1B 行系统正在进行大量更新，那么您的数据分段逻辑将需要一些机制来识别更改并确保将这些记录反馈到系统中，但由于您没有指定这是必要的，我将忽略现在它。

如果您尝试使用查找，请确保您只撤回绝对必要的内容。对于这种情况，我希望这是一个非常狭窄的密钥。如果您采用分段数据加载方法，请确保在查找转换中使用相同的分区逻辑。否则，您将在最终运行时撤回 (1B -1 *transferSize) 行数据，这无疑会对您的劣质网络造成严重破坏。

有很多概括性，但如果您想了解更多方面的细节，请大声疾呼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:46:11.533

一次做一百万行这样的事情值得吗

```
DECLARE @Counter Int, @ReturnCode Int
DECLARE @Rows INT = 1000000, @Goal INT = 1000000000
  WHILE (@Counter * @Rows < @Goal)
    BEGIN
      EXEC @returncode = xp_cmdshell 'dtexec /f "C:\\path\\package.dtsx" /SET \\package.variables [User::Counter].Value;"' + CONVERT(VARCHAR(10), @Counter) + '"'

      IF (@returncode = 0)
        BEGIN
          @Counter = @Counter + 1
          PRINT 'Failed this at this time dude: ' + CONVERT(VARCHAR(30), GETDATE())
        END
    END 
```

然后在查询中的 oledb 源组件内部有一个 where 子句，例如

```
 WHERE TableID BETWEEN (SELECT MIN(TableID) FROM Table) + ((? - 1) * 1000000)) 
          AND (SELECT MIN(TableID) FROM Table) + (? * 1000000)) 
```

不过有几件事 - 我认为您必须在 SSIS 变量中的表达式中构建查询（您以前做过吗？这很简单，有时在子查询中使用参数会出错），您可能应该抓住 MIN (TableID) 只在开头一次并将其存储在变量中。

这一切都值得这么麻烦，你认为这会有所帮助吗？

# python - 如果字符串包含 \n，如何将字符串加载到 JSON 对象中？

> ID：15560919
> 
> 赞同：1
> 
> 时间：2013-03-22T00:56:30.837
> 
> 标签：python, json, python-2.7

我需要将包含 JSON 格式文本的 UTF-8 数据文件中的一些文本加载到 JSON 对象中，然后对其进行解析。我无法控制文件的内容或格式，必须处理给我的内容。我也无法控制 Python 版本，即 2.7。

此文本文件中至少有一个值包含 \n。因此，运行脚本将导致如下错误： Expecting , delimiter: line 8 column 102 (char 470)'

文件内容如下所示：

```
{
"key1": "Lorem ipsum dolor sit amet, consectetur adipiscing elit.",
"key2": "Suspendisse eu tincidunt velit. Proin mollis ligula a arcu feugiat ac imperdiet nunc sagittis. Etiam egestas fringilla tristique.\nCurabitur interdum dolor eu velit gravida et convallis purus facilisis. Aenean eu enim mi.",

"key3": "Nunc intérdum mågna nec nîbh faucibus non laoreet nisi blandit. Nunc lobortis ligula ut tellus semper in hendrerit mauris malesuada.",

"key4": "Vivamus erat turpis, fringilla id sollicitudin non, pellentesque vel lacus. Praesent placerat dapibus mauris vel hendrerit. Integer a augue leo, facilisis viverra dui. Maecenas sollicitudin adipiscing viverra. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam vestibulum commodo diam, vitae ultrices quam viverra eu. Proin eros sapien, scelerisque non condimentum vel, placerat at est. Ut fermentum mattis lacus, a eleifend ipsum euismod ac. Quisque mollis bibendum quam nec sollicitudin."

} 
```

相关代码：

```
def processText(stringData):
    j = json.loads(data, encoding='utf-8')
    # do stuff that I can't change

dataFile = codecs.open('/path/to/file', 'r', 'utf-8')    
data = dataFile.read()
dataFile.close()
processText(data) 
```

我尝试了以下方法：

1.  `json.loads(data.replace('\n','\\n')`文本文件包含约 15,000 个字符，因此这只会导致脚本挂起。
2.  `json.loads("%r"%d)`其中 d 是包含字符串的变量。这会导致错误“无法解码 JSON 对象”，因为它将文件中的每个换行符转换为 \n，这不是需要发生的。

如何将此字符串加载到 JSON 对象中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:35:59.340

`json` string may contain `\n` (two characters). So if you see in a file `\n`; it is ok.

Valid json (as seen in a file (not Python source code)):

```
["line\nanother"] 
```

Invalid:

```
["line
another"] 
```

The confusion might arise if you include the file content as a Python string **literal**. In this case `\n` is also interpreted by Python before it gets to `json` parser. To avoid it, use `r''` literals:

```
json_text = r'["line\nanother"]'
print(json_text) # -> ["line\nanother"]
d = json.loads(json_text) 
```

If you read json from a file; you don't need to do anything (`\n` are just another two bytes; you'll get them as is):

```
with open(filename) as file: # don't need `codecs` if file is in utf-8
    d = json.load(file)
    # analog of: d = json.loads(file.read()) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-11-20T16:03:40.743

设置`strict=False`在`json.loads()`：

```
body_unicode = request.body.decode('utf-8') 
body = json.loads(body_unicode,strict=False) 
```

# php - 来自php函数的AJAX文本输入值

> ID：15560920
> 
> 赞同：0
> 
> 时间：2013-03-22T00:56:33.380
> 
> 标签：php, ajax, input, forms

如果我有类似的东西

```
<form name="myform" method="POST"  action="">
<input type="text" name="mail">
<input type="text" name="firstname">
<input type="text" name="lastname">
<input type="submit">
</form> 
```

我有一个 php 函数，它在给定电子邮件时返回一个带有全名的数组，例如：

```
function get_fullname($email){
//some code here that gives a value to $firstname, 
//$lastname, $age and $gender (for example using a cURL request)

$fullname = array(
firstname => $firstname, 
lastname=>$lastname, 
age=>$age, 
gender=>$gender);

Return $fullname;
} 
```

例如，如果我的地址是 john.doe@gmail.com

```
$fullname['firstname'] =  "John"
$fullname['lastname'] = "Doe" 
```

问题是：**在用户输入电子邮件地址之后，****如何将这些名称设为我的名称`value`？`text input`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:06:45.203

嗯...将电子邮件发送到 PHP 文件：

```
function alterEmail(email){
    $.get('getName.php',
        {'email': email},
        function(data){
            names = data.split('.');
            $('.fname').html(names[0]);
            $('.lname').html(names[1]);
        }
    );
} 
```

PHP 文件看起来像这样：

```
<?php
$splitEmail = explode('@',$_GET['email']);
echo $splitEmail[0];
?> 
```

当然，这只有在电子邮件看起来像 john.doe@gmail.com 时才有效。您*可以*为此使用严格的 Javascript，但您要求使用 AJAX。

此外，要使用该 Javascript 函数，您可以使用 onchange 调用它，例如

```
<input type="text" onchange="alterEmail(this.value);" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:08:21.100

使用jQuery：

```
var email = $('input[name="mail"]'),
firstname = $('input[name="firstname"]'),
lastname = $('input[name="mailastnamel"]');

email.on('blur', function() {
    $.ajax({
        url: "ajax.php",
        data: {'email': email.val()},
                type: 'post',
        success: function(result) {
        if(result.firstname && result.lastname) {
            firstname.val(result.firstname);
            lastname.val(result.lastname);
        }
    },
    dataType: 'json'
    });
}); 
```

创建一个名为 ajax.php 的 php 文件

```
<?php
function get_fullname($email){
//some code here that gives a value to $firstname and $lastname
$fullname = array(firstname => $firstname, lastname=>$lastname)
Return $fullname
}

if(isset($_POST['email'])) {
  $fullname = get_fullname($_POST['email']);
  echo json_encode($fullname);
}
?> 
```

# jquery - 只有最后一次执行 $.each 似乎正在执行

> ID：15560923
> 
> 赞同：0
> 
> 时间：2013-03-22T00:56:49.927
> 
> 标签：jquery

这是代码：

```
// Each ul that holds the collection of our entities
var lists = ['ul.emails', 'ul.phoneNumbers'];

// Setup the "add" link
var $addLink = $('<a href="#" class="margin-left btn btn-mini add"><i class="icon-plus"></i>label</a>');
var $newLinkLi = $('<li></li>').append($addLink);

$(document).ready(function() {

  // Add link to each list
  $.each(lists, function(index, list) { 
    $(list).append($newLinkLi);
  });

}); 
```

但是，只有最后一个`ul`获得链接。但是，如果我这样做

```
 $.each(lists, function(index, list) { 
    $(list).append('test');
  }); 
```

有用。是什么赋予了？是通过引用传递的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:00:57.737

追加一个已经存在于 DOM 中的元素只是移动该元素，它不会创建一个新元素。

```
var lists   = ['ul.emails', 'ul.phoneNumbers'],
    addLink = '<a href="#" class="margin-left btn btn-mini add"><i class="icon-plus"></i>label</a>';

$(document).ready(function() {
    $.each(lists, function(index, list) { 
        var $newLinkLi = $('<li />').append(addLink);
        $(list).append($newLinkLi);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:04:01.333

您必须先克隆元素，否则它会在 DOM 周围移动。

```
$(list).append($newLinkLi.clone()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T01:00:49.767

您只处理一个`element`，而不是使用元素字符串表示。

```
// Each ul that holds the collection of our entities
var lists = ['ul.emails', 'ul.phoneNumbers'];

// Setup the "add" link
var $addLink = '<li><a href="#" class="margin-left btn btn-mini add"><i class="icon-plus"></i>label</a></li>';

$(document).ready(function() {

  // Add link to each list
  $.each(lists, function(index, list) { 
    $(list).append($addLink );
  });

}); 
```

# javascript - 从函数返回布尔值

> ID：15560924
> 
> 赞同：1
> 
> 时间：2013-03-22T00:57:07.777
> 
> 标签：javascript, function, boolean

我正在制作一个游戏，从一堆 15-30 块石头开始，用户和计算机都取石头，直到取完最后一颗石头。但是，我需要一个函数来确定用户拿走的石头数量是否有效，即小于等于 3 且大于 0。所以我的函数应该返回 true 或 false，但是当我输入 " 2"，它返回假。这是涉及的代码：

```
var valid = validEntry(stones, stonesTaken);

function validEntry(stones, stonesTaken) {
    if (stones >= stonesTaken) {
        if(stonesTaken <= 3 && stonesTaken > 0) {
            return true;
        } else {
            return false;
        }
    } else {
        return false;
    }
} 
```

PS- 每当棋子低于三时，玩家和计算机都可以拿走比可用的更多的棋子，这就是第一个 if 语句存在的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:09:04.853

那是因为您正在比较字符串：

```
"19" >= "2" // false 
```

您必须将至少一个变量转换为整数，假设它们都是字符串：

```
stones = parseInt(stones, 10);
stonesTaken = parseInt(stonesTaken, 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:10:23.490

确保您传递整数值或仅使用`parseInt()`评论中提到的@Jared Farrish。

```
function validEntry(stones, stonesTaken) {
    stones = parseInt(stones);
    stonesTaken = parseInt(stonesTaken);
    if (stones >= stonesTaken) {
        if(stonesTaken <= 3 && stonesTaken > 0) {
            return true;
        } else {
            return false;
        }
    } else {
        return false;
    }
} 
```

# quickbooks - 云中的速记

> ID：15560926
> 
> 赞同：0
> 
> 时间：2013-03-22T00:57:18.257
> 
> 标签：quickbooks

我已经构建了一个通过 quickbooks 网络连接器连接到 quickbooks 的网络应用程序。我的客户切换到在线快速手册。当它在云中时，是否有类似的东西能够将数据导入和从快速手册中导入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T21:56:35.450

这些应该可以帮助您入门，如果您需要更多，请告诉我。

[https://developer.intuit.com/docs/0025_quickbooksapi/0010_getting_started](https://developer.intuit.com/docs/0025_quickbooksapi/0010_getting_started)（完整 QB Online REST API 文档的开始）

哦，关于数据的可访问性，如果您一直在使用带有 QuickBooks 桌面的 Web 连接器，那么您一直在使用 QuickBooks 桌面 SDK，QBOnline 的数据并不像 QuickBooks 桌面那么广泛，但总体而言，QBO REST 界面为您提供访问 QBO 在 UI 中公开的大多数会计对象（目前缺少一些）。

这里有一个可用的 PHP SDK DevKit：[https](https://developer.intuit.com/docs/0025_quickbooksapi/0055_devkits) ://developer.intuit.com/docs/0025_quickbooksapi/0055_devkits应该可以帮助您将它们联系在一起，情况有所不同，但与您习惯的并没有太大的不同，概念在那里，只是结构改变了。

# java - 使用 OpenStreetMap 生成地图缩略图

> ID：15560931
> 
> 赞同：0
> 
> 时间：2013-03-22T00:57:42.010
> 
> 标签：java, openstreetmap

我是[OpenStreetMap](http://www.openstreetmap.org/)的相对新手，想知道是否有人有从给定纬度和经度的图像图块生成地图缩略图的经验？例如，可以在`lat. 33.8683`和找到澳大利亚悉尼`long. 151.2086`。我希望能够从图像图块中为特定缩放级别的坐标生成 128x128 png。

我以前用过`ArcGIS`，它有专门的服务来完成这样的任务。我已经用谷歌搜索了很多，但还没有找到任何关于`OpenStreetMap`.

我正在使用 Java，因此可能希望将此类功能部署为 Web 服务。

谢谢。

**编辑**：我应该补充一点，我正在运行我自己使用[switch2osm.org](http://switch2osm.org/serving-tiles/)上的说明构建的磁贴服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:20:23.200

`OpenStreetMap`在发现如何存储它的瓷砖后，我想出了这个。基本情况是：

*   瓷砖是 256 × 256 像素的 PNG 文件
*   每个缩放级别是一个目录，每一列是一个子目录，该列中的每个图块都是一个文件
*   访问文件使用`http://localhost/osm/${z}/${x}/${y}.png`
*   `${z} ${x} and ${y}`根据纬度和经度计算值。

[OpenStreetMap Wiki](http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames)上有一些关于此主题的优秀文档，包括用于计算图块名称的各种语言的代码块。我需要一个 Java 解决方案，所以我最终使用的代码是：

```
public class Mapper
{
    public static void main(String[] args)
    {
        int zoom = 11;
        double lat = -33.77651d;
        double lon = 150.94712d;
        System.out.println("http://localhost/osm/"
            + getTileNumber(lat, lon, zoom) + ".png");
    }

    public static String getTileNumber(double lat, double lon, int zoom)
    {
        int xtile = (int)Math.floor((lon + 180) / 360 * (1<<zoom));
        int ytile = (int)Math.floor((1 - Math.log(Math.tan(Math.toRadians(lat))
            + 1 / Math.cos(Math.toRadians(lat))) / Math.PI) / 2 * (1<<zoom));
        return ("" + zoom + "/" + xtile + "/" + ytile);
    }
} 
```

这将返回所需图像块的 URL，例如：`http://localhost/osm/11/1882/1228.png`然后您可以使用它来获取图像。然后我使用[Thumbnailator](https://code.google.com/p/thumbnailator/)生成 128x128 的缩略图大小：

```
Thumbnails.of(new File("tile.png"))
  .size(128, 128)
  .toFile(new File("thumbnail.png")); 
```

快乐的时光。

# javascript - 从开始删除内容到存储在变量中的 html 标记

> ID：15560932
> 
> 赞同：0
> 
> 时间：2013-03-22T00:57:45.853
> 
> 标签：javascript

我在变量中有一个 html 内容，例如`var content = "<li><div>list 1</div> <ol><li><div>list nested list 1</div></li></ol></li>";`

我想先删除内容，`</div>`然后将删除的内容存储在一个变量中，然后将其余内容保留在同一个变量中。如下：

```
content = '<ol><li><div>list nested list 1</div></li></ol></li>' 
```

和`removed_content= <li><div>list 1</div>`

我尝试使用`removed_content =content.replace(/</div>.*/, '');`但它不接受其中的 HTML 标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:37:27.633

```
var content = "<li><div>list 1</div><ol><li><div>list nested list 1</div></li></ol></li>";
var removed_content = "";
var reg = /^(.*?<\/div>)/;
content = content.replace(reg, function(all, $1){
    removed_content = $1;
    return "";
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:10:56.133

```
var index = content.indexOf("</div>") + 6; //always gives you the end of first </div> tag
var removed-content = content.substr(0, index);
content = content.substr(index); 
```

# wpf - 如果拖动目标被其他图形遮挡，则 WPF 拖放事件无法通过

> ID：15560939
> 
> 赞同：1
> 
> 时间：2013-03-22T00:58:05.880
> 
> 标签：wpf, drag-and-drop, hittest

在下图中，有 6 个橙色矩形，它们充当*放置目标*。蓝色矩形在橙色矩形的前面。蓝色和橙色矩形都是同一个容器的子级。

![在此处输入图像描述](../Images/c8d7a83d0ac968a9bf82b410c1d1774e.png)

我遇到的问题是当光标位于蓝色矩形上时，不会触发 DragEnter、DragLeave 和 Drop 事件。蓝色矩形似乎阻止了事件进入橙色矩形。这意味着用户必须在蓝色矩形之间精确定位光标才能放下项目。我想扩大放置区域以包括整个橙色矩形，同时在橙色矩形前面仍然有蓝色矩形。

如果它很重要，橙色矩形是 FrameworkElements，蓝色矩形是 DrawingVisuals。FrameworkElements 具有拖放功能，而 DrawingVisuals 非常简单，没有。

无论光标是否位于蓝色矩形上，如何在光标悬停时触发橙色矩形的 DragEnter、DragLeave 和 Drop 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:07:46.607

我能想出的最合理的解决方案是将橙色矩形*放在*蓝色矩形之上。

但是，因为我不希望橙色矩形覆盖蓝色矩形，所以我必须想出一个由透明矩形和橙色帽子组成的视觉效果，如下图所示：

![在此处输入图像描述](../Images/b5b37e649491d4f1d1e6323ba653cc47.png)

所以，这是它的工作原理：

*   目标是能够通过拖放更改蓝色矩形的顺序（在我的真实应用中，蓝色矩形可能不止三个，而蓝色矩形并不是真正的蓝色矩形）。
*   通常，只绘制蓝色矩形和透明矩形。（当然，用户只看到蓝色矩形。）
*   如果用户拖动蓝色矩形，如果光标位于透明矩形上，则会出现橙色帽子。
*   一旦光标离开透明矩形，橙色帽子就会消失。
*   放下蓝色矩形后，所有蓝色矩形都以新顺序重新绘制（橙色帽子再次被隐藏）。

# php - 通过php发送表单数据？

> ID：15560944
> 
> 赞同：-1
> 
> 时间：2013-03-22T00:58:36.027
> 
> 标签：php, html

表单操作是“”，因为它都使用相同的页面。无论如何表单可以在同一页面上提交而不刷新？

PHP：

```
<?php 
if ($_SERVER['REQUEST_METHOD'] == 'POST'){
    $to="josue.espinosa@mtchs.org";
    $subject="Tech Muffins Contact";
    $message="Name:      ".$_REQUEST['name']."\n\nEmail:      ".$_REQUEST['email']."\n\nMessage: ".$_REQUEST['message'];
    $from = "donotreply@techmuffins.com";
    $headers = "From:" . $from;
    mail($to, $subject, $message, $headers );
}
?> 
```

HTML：

```
<form id="contactform" action="" method="post" autocomplete="off">
    <input type="text" name="name" placeholder="name" autofocus required>
    <input type="email" id="email" name="email" placeholder="email" required>
    <textarea name="message" placeholder="message" required></textarea>
    <input type="submit" value="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:00:12.890

为了在不刷新的情况下执行此操作，您通常会通过 Ajax 处理此问题。为此存在javascript函数。这是一个示例（使用 jQuery）：

```
var frm = $(document.myform);
var data = JSON.stringify(frm.serializeArray()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:07:08.400

将“your.php”更改为您的

```
 <script type="text/javascript">
            $(document).ready(function(){
                $("#contactform").submit( function () {    
                  $.post(
                   'your.php', 
                    $(this).serialize(),
                    function(data){
                      //if you have a div to show result (with id=results)
                      $("#results").html(data)
                   //if sucess hide the form as $("#contactform").hide()
                  // or .fadeOut() 
                    }
                  );
                  return false;   
                });   
            });
    </script> 
```

# python - 在其他对象属性上设置总和的最佳方法

> ID：15560945
> 
> 赞同：0
> 
> 时间：2013-03-22T00:58:37.647
> 
> 标签：python, oop

我需要将一个对象的属性设置为另一个对象属性的总和，并在对这些对象进行修改时对其进行重新调整。以下是最好的方法吗？

```
# object A has several object B's - (object A aggregates object B)
class objectA:
    def __init__(self, somevar):
        self.somevar = somevar

        self.list_of_Bs = [B(var) for b in range(0,2)]

        # sum of several functions or something
        self.summed_array = sum(b.array for b in self.list_of_Bs)

class objectB:
    def __init__(self, var):
        self.var = var

        self.array = gaussian_function(x, center, var, etc) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T01:02:39.807

我认为最防弹的方法是制作`self.summed_array`一个属性：

```
class objectA(object):
    def __init__(self,somevar):
        ...

    @property
    def summed_array(self):
        return sum(b.array for b in self.list_of_Bs) 
```

当然，如果这种求和会很昂贵，您可能希望将此作为一种方法，而不是一种属性，以使用户明确知道正在执行计算。然后用户可以根据需要选择是否以其他方式缓存该值。

您的另一个选择是进行修改`self.list_of_Bs`，以便它知道列表何时被修改，并在`objectA`它所绑定的实例上保存一个引用。这将是更多的工作......

# c# - 根据下拉列表从数据库中选择数据不起作用

> ID：15560958
> 
> 赞同：0
> 
> 时间：2013-03-22T01:00:38.843
> 
> 标签：c#, .net, database

我想根据下拉列表从数据库中选择值。我的数据库包含具有字段值的表：`id(primary key),name,fullname,depat`.

我的`webform1.aspx`页面包含一个下拉列表，`Gridview`并且`SqlDatasource`.

这是我的`Webform1.aspx.cs`代码：

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    string s = DropDownList1.SelectedValue.ToString();

    SqlConnection con = new SqlConnection(
        ConfigurationManager.ConnectionStrings["ztvConnectionString"].ConnectionString);
    SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Table1 where name=depat", con);
    DataTable dt = new DataTable();
    da.Fill(dt);
    GridView1.DataSource = dt;
    GridView1.DataBind();
} 
```

从下拉列表中选择值后不显示任何数据。错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:19:20.257

Reading from your code, what you want to do is fill **GridView1** with data from Table1 where **name=depat**, is it really what you wants? Maybe you can make it clearer on what you want.

If you want to get the data based on the selected value, then you should make it:

```
SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Table1 where name='" + s + "'", con); 
```

But I strongly suggest you use Parameterized Query, create a SqlCommand first

```
SqlCommand cmd = new SqlCommand("SELECT * FROM Table1 WHERE name = @name", conn)
cmd.Parameters.Add("@name", SqlDbType.NVarChar);
cmd.Parameter["@name"].Value = s;

SqlDataAdapter da = new SqlDataAdapter(cmd);
DataTable dt = new DataTable();
da.Fill(dt); 
```

**EDIT:**

If you want to get all the data for a specific department:

```
string s = DropDownList1.SelectedValue.ToString();

//SqlConnection...

SqlCommand cmd = new SqlCommand("SELECT * FROM Table1 WHERE depat = @depat", conn)
cmd.Parameters.Add("@depat", SqlDbType.NVarChar);
cmd.Parameter["@depat"].Value = s;

SqlDataAdapter da = new SqlDataAdapter(cmd);
DataTable dt = new DataTable();
da.Fill(dt);

GridView1.DataSource = dt;
GridView1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:50:16.040

我相信 Ruly 得到了答案=)

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
string s = DropDownList1.SelectedValue.ToString();

SqlConnection con = new SqlConnection(
    ConfigurationManager.ConnectionStrings["ztvConnectionString"].ConnectionString);
SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Table1 where name=@name", con);
cmd.Parameters.Add("@name", s);
DataTable dt = new DataTable();
da.Fill(dt);
GridView1.DataSource = dt;
GridView1.DataBind();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T01:23:07.553

只是为了排除明显的情况，当您在 Management Studio 中执行 sql 语句“SELECT * FROM Table1 where name=depat”时，您会返回记录吗？

# mysql - MySQL 中的 GROUP BY 使用通配符

> ID：15560964
> 
> 赞同：2
> 
> 时间：2013-03-22T01:01:16.553
> 
> 标签：mysql, sql, database

我四处搜索，发现了一些类似的问题，但没有什么能完全解决我的问题。我将尝试准确地解释这一点。

所以我在 MySQL 数据库中有一个组织的一堆数据，表中的一个字段是指我们在不同国家的合作伙伴组织。这种形式是这样的：

公司1（中国）

Company2（美国）

公司3（中国）

我正在尝试使用 COUNT(*) 和 GROUP BY 查找每个国家/地区的合作伙伴数量，但我无法弄清楚如何仅按包含该国家/地区的数据部分进行分组，而忽略它之前的公司名称。我发现的最接近的东西使用了 Oracle 的 regexp_replace 函数，但我无法在 MySQL 中找到替代品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:03:34.140

如果您有国家/地区列表，则可以执行以下操作：

```
select c.country, count(*)
from t join
     countries c
     on t.company like concat('%(', c.country, ')%')
group by c.country 
```

# php - 返回给定值 10% 以内的 MySQL 行

> ID：15560966
> 
> 赞同：0
> 
> 时间：2013-03-22T01:01:21.823
> 
> 标签：php, mysql

我在 MySQL 数据库中有一个如下所示的表：

```
 username   rating
1  xxxxxxxx     -1
2  xxxxxxxx      5
3  xxxxxxxx      14
4  xxxxxxxx      23
5  xxxxxxxx      12 
```

现在，如果我有一个给定的值，比如 13，我将如何返回所有评分在 13 的 10% 以内的行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T01:04:14.817

```
SELECT *
FROM `tblName`
WHERE `rating` BETWEEN 13 * 0.9 AND 13 * 1.1 
```

这将完美地工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T01:04:07.803

```
SELECT * FROM mytable WHERE rating BETWEEN ? * 0.90 AND ? * 1.10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T01:05:14.850

```
low = min(0, 13 * .9)
high = max(25, 13 * 1.10) 
```

假设最大评级为 25。从那里它只是基本的低 <评级 < 高查询逻辑。

# java - 使用 Regex 和 DefaultTableModel 将值插入 JTable

> ID：15560967
> 
> 赞同：1
> 
> 时间：2013-03-22T01:01:23.603
> 
> 标签：java, regex, jtable, twitter4j, defaulttablemodel

我正在构建一个 Twitter 客户端，我不想检索和显示全球趋势。到目前为止（在某种程度上感谢 Stack Overflow 的帮助）我可以检索趋势信息，从中提取必要的信息并将趋势发布到控制台。当我尝试将趋势添加到表格中时，我只能多次显示第一个趋势，而且我不确定我的行创建等哪里出了问题。

一双新鲜的眼睛将不胜感激！

谢谢

```
public static void WorldWideTrends() {
    Trends WorldWideTrendsList;

    try {

        WorldWideTrendsList = getTrends();
        UI.whatIsDisplayedList.removeAll();
        UI.tweetModel = new DefaultTableModel(10, 1);
        String trendsInfo = WorldWideTrendsList.toString();

        System.out.println(trendsInfo);

        Pattern p = Pattern.compile("(#.*?)\\'", Pattern.DOTALL);
        Matcher matcher = p.matcher(trendsInfo);

        while (matcher.find()) {

            for (int i = 0; i < 10; i++) {
                String output = matcher.group(0);

                System.out.println(output);
                UI.tweetModel.insertRow(1, new Object[] {});
                UI.tweetModel.setValueAt(
                        "<html><body style='width: 400px;'><strong>"
                                + output + "</strong><html><br>", i, 0);
            }
        }

    } catch (TwitterException e) {
        e.printStackTrace();
    }

    UI.whatIsDisplayedList.setModel(UI.tweetModel);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:42:13.877

我不确定这样做的目的是什么：

```
while (matcher.find()) {
    for (int i = 0; i < 10; i++) {
       String output = matcher.group(0);
       ...
    }
} 
```

但它会处理每场比赛10次。只是`.group()`再次呼叫不会带您进入下一场比赛，您需要`.find()`再次呼叫。

我认为您想简单地删除 for 循环（但如果存在超过 10 个匹配项，这将匹配超过 10 次），或者可能删除 while 循环并执行以下操作：

```
// process the first 10 matches
// no while-loop!
for (int i = 0; i < 10 && matcher.find(); i++) {
   String output = matcher.group(0);
   ...
} 
```

# jquery - Marquee + Draggable + Droppable 不起作用

> ID：15560971
> 
> 赞同：1
> 
> 时间：2013-03-22T01:02:18.663
> 
> 标签：jquery, html, jquery-ui

我正在尝试制作一个简单的游戏，它包含一组滚动元素（为了实现这一点，我正在使用[这个插件](https://github.com/aamirafridi/jQuery.Marquee)），我打算将其拖放到一组四个容器中（使用 jQueryUI 的可拖动和droppable) 并匹配它们是否在正确的容器中（想象 30 只动物在底部滚动，如果它们是鸟类、哺乳动物、爬行动物等，您必须对其进行排序）。30 秒后游戏结束并显示正确/错误元素的数量。

我目前遇到的问题是选框和可拖动+可放置它们自己可以正常工作，但是当我将它们结合起来时，选框插件会干扰可放置行为。我仍然是 jQuery 编程的新手，所以我不知道是否有办法堆叠函数，或者如何对元素进行排序。

我已经把所有东西（只是准系统）：

[这里](http://jsfiddle.net/nS3bz/)

我也试过使用 animate() 来滚动项目，但是当项目被放在盒子上时，它只在动画停止时显示确认：

```
$("#itemsHolder li").each(function(i){
    var $li = $(this);
    setTimeout(function () { 
        $li.animate({'left': '500px'}, 7000, 'linear', function(){ $li.hide(); });
    }, 1500 * i );
}); 
```

我使用 jQuery 是因为我对它有一点了解，但是如果有人有更好的方法（HTML5，任何使一切变得神奇的魔术程序，没有 FLASH）或一些教程，我将不胜感激。

提前致谢！:-)

# google-earth-plugin - Google 地球插件：在单个 .kmz 中切换图层？

> ID：15560973
> 
> 赞同：0
> 
> 时间：2013-03-22T01:02:28.323
> 
> 标签：google-earth-plugin, kmz

使用 Google Earth 插件，有没有办法使用复选框来打开和关闭所有包含在单个 .kmz 文件中的各个图层？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:53:58.140

[查看我对另一个问题的回答](https://stackoverflow.com/questions/14573627/kml-dom-walking-is-slow-how-to-avoid-walking-children)

基本上，您将“id”分配给文件夹、地标、线串等，然后告诉插件切换“id”的可见性

# codeigniter - Codeigniter“未找到请求的 URL”错误

> ID：15560983
> 
> 赞同：0
> 
> 时间：2013-03-22T01:03:57.170
> 
> 标签：codeigniter

我已经开始使用 codeigniter 构建一个新网站。我一直在尝试在内部链接页面，但由于某种原因我无法做到。这是我的代码中的链接之一

```
<a href="<?php echo base_url(); ?>site/index">Home</a> 
```

当我点击这个链接时，它说

```
The requested URL /basicsite/site/index was not found on this server. 
```

'url' 助手加载在 autoload.php 中

```
$autoload['helper'] = array('form', 'url', 'html'); 
```

我已将 base_url 设置如下

```
$config['base_url'] = 'http://localhost/basicsite';

$config['index_page'] = 'index.php'; 
```

我的任何默认控制器都是

```
$route['default_controller'] = "site"; 
```

“站点”控制器看起来像这样

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Site extends CI_Controller
{

function Site()
{
    parent::__construct();
}

public function index()
{
    $this->load->view('templates/site_header');     
    $this->load->view('content');       
    $this->load->view('templates/site_footer');
}

} 
```

不知道我哪里出错了。我需要对 .htaccess 文件做些什么吗？我已经在 stackoverflow 网站上解决了类似的问题，但找不到解决方案需要一些帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-04T17:52:35.020

从您的配置文件中删除 index.php。

# jquery - 当 jquery 在 asp.net 中选中复选框时，如何在树视图中获取节点的值

> ID：15560989
> 
> 赞同：2
> 
> 时间：2013-03-22T01:04:20.797
> 
> 标签：jquery, asp.net, treeview

我有一个简单的 asp:treeview

```
<asp:TreeView ID="TreeView1" runat="server" 
    ShowCheckBoxes="Leaf"
    OnTreeNodeCheckChanged="CheckChanged"      
    ShowLines="true"
    PopulateNodesFromClient="true"
    ShowExpandCollapse="true"    
    NodeIndent="10"> 
</asp:TreeView> 
```

我这样做

```
<script type="text/javascript">    
        function client_OnTreeNodeChecked(event) {
            var treeNode = event.srcElement || event.target;            
            if (treeNode.tagName == "INPUT" && treeNode.type == "checkbox") {
                if (treeNode.checked) {
                    alert(treeNode.value);                                      
                }
            }
        } 
</script> 
```

但我只会在警报中“开启”。如何获取节点的值而不是复选框的值？

# ember.js - 动态删除条目后，车把模板不会更新以反映计算的属性

> ID：15560991
> 
> 赞同：3
> 
> 时间：2013-03-22T01:04:46.130
> 
> 标签：ember.js, handlebars.js, ember-data

这是基本设置：

1.  我使用一个简单的计算属性将一组 ember-data 模型绑定到我的车把模板
2.  在我通过 xhr 获取模型之前，我会根据一些配置添加一些模型
3.  解决 xhr 后，我需要将任何配置模型替换为通过网络返回的对象
4.  这似乎确实有效，因为在内存中我可以看到我的计算属性只有 2 个项目，但我的车把模板似乎显示 3（在 xhr 返回后实际从数组中删除的配置模型之一）

我验证了上面的#如下

a.) 在我要求的 chrome 开发工具中

> App.Day.find(1).get('listings').get('length'); //在xhr之后返回2

b.) 我也做了以下

> App.Appointment.all().get('length'); //在xhr之后返回2

**这里是代码**

我有以下车把模板（显示 3 个项目而不是 2 个）

```
{{#each appointment in day.listings}}
  {{appointment.start}}<br />
{{/each}} 
```

我的日模型上的列表计算属性看起来像这样

```
App.Day = DS.Model.extend({
      name: DS.attr('string'),
      appointments: function() {
          return App.Appointment.find();
      }.property(),
      listings: function() {
          //pretend we need to add some values in memory before we fire the xhr ...
          App.Appointment.add({name: 'first'});

          return this.get('appointments');                                     
      }.property().volatile()
  }); 
```

约会模型是一个 ember-data 模型，但是因为我需要动态替换内存中的项目，所以我重写了 find 方法（并在我自己的 add 方法中存根以更好地控制数组）

```
 App.Appointment = DS.Model.extend({
      name: DS.attr('string')
  }).reopenClass({
      records: [],                                                             
      find: function() {
          var self = this;
          self.records.clear();
          $.getJSON('/api/appointments/', function(response) {
              for(var i = 0; i < response.length; i++) {
                  for(var j = 0; j < self.records.get('length'); j++) {
                      if (self.records[j].get('name') === response[i].name) {
                          //now that our xhr has finished we need to replace any that already exist
                          self.records.splice(j, 1);
                      }
                  }
              }
          });
          return this.records;
      },
      all: function() {
          return this.records;
      },
      add: function(record) {
          this.records.addObject(App.Appointment.createRecord(record));
      }
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:52:19.293

旧答案已删除。离基地很远。

`splice`不符合 KVO。`replace`是代替它使用的符合 ember 的方法。CollectionView 依赖于支持的数组变异观察者`replace`来知道要添加和删除哪些视图。

如果这不是问题，那么我会吃掉我的帽子。

# python-3.x - 在python中将一行分成两部分

> ID：15560998
> 
> 赞同：0
> 
> 时间：2013-03-22T01:05:15.693
> 
> 标签：python-3.x

我必须制作一个按域拆分用户名的代码。

前任。

**输入**：abc@xyz.com

**输出**：你的用户名是 abc。您的域名是 xyz.com。

结果应该是**两条**不同的线，但我似乎无法理解......

```
def username2(email):
    z=(email.split('@'))
    x='Your username is'+ ' ' + z[0]
    y='Your domain is' + ' ' + z[1]
    return x+'. '+y+'.' 
```

对不起..我真的很菜鸟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T01:06:08.983

您需要在结果中插入换行符：

```
return x + '. \n' + y + '.' 
```

您还可以使用字符串格式：

```
username, domain = email.split('@')

return 'Your username is {}.\nYour domain is {}.'.format(username, domain) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:07:38.980

转义码就是你要找的

print "第一行\n第二行"

[http://docs.python.org/2/reference/lexical_analysis.html#literals](http://docs.python.org/2/reference/lexical_analysis.html#literals)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T22:10:37.650

Python3

```
def username2(email):
    username, domain = email.split('@')
    print('Your username is {}'.format(username))
    print('Your domain is {}'.format(domain)) 
```

Python2

```
def username2(email):
    username, domain = email.split('@')
    print 'Your username is %s' % username
    print 'Your domain is %s' % domain 
```