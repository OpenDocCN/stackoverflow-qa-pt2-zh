# StackOverflow 问答 14484000-14484999

# libphonenumber - Google 的 libphonenumber 准确度如何？

> ID：14484004
> 
> 赞同：2
> 
> 时间：2013-01-23T16:06:25.763
> 
> 标签：libphonenumber

我想将 Google 的 libphonenumber 库合并到我正在开发的 CRM 解决方案中，以识别以下内容：

*   电话号码是手机号码还是固定电话号码
*   号码的地理位置

我在网上做了一些搜索，似乎找不到任何讨论图书馆使用什么算法来确定这些信息，以及这些方法的可靠性如何。

是否有任何此类文档（即这些算法的详细信息及其各自的可靠性）？或者说真的，有什么可以帮助我理解这个图书馆的幕后故事吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T16:09:55.067

它是一个[开源库](http://code.google.com/p/libphonenumber/source/browse/#svn%2Ftrunk%2Fjava%2Flibphonenumber%2Fsrc%2Fcom%2Fgoogle%2Fi18n%2Fphonenumbers)，所以你可以*确切地*看到它是如何工作的 :)

```
svn checkout http://code.google.com/p/libphonenumber/source/checkout 
```

我已经快速查看了源代码，它似乎可以通过使用一系列正则表达式测试电话号码来工作。[为各个国家/地区定义了大的正则表达式文件](http://code.google.com/p/libphonenumber/source/browse/trunk/java/#java%2Flibphonenumber%2Fsrc%2Fcom%2Fgoogle%2Fi18n%2Fphonenumbers%2Fdata)，这些文件定义了将告诉您电话号码类型的正则表达式（例如，在英国，所有手机都以“07”开头，因此会有一个基于此的正则表达式）。

# javascript - 具有实时更新的 KnockoutJS 货币绑定

> ID：14484006
> 
> 赞同：0
> 
> 时间：2013-01-23T16:06:32.967
> 
> 标签：javascript, knockout.js

在我最近构建的一个 Knockout 界面中，我尝试设置自动保存。它的设计目的是在您停止更改后 1 秒进行保存。

这就是问题所在。默认情况下，KO 依赖输入上的模糊事件来更新 viewModel。如果您在点击开箱前离开页面或刷新浏览器，我的界面不会保存数据。

为了解决这个问题，我启用`valueUpdate: 'afterkeydown'`了适用于所有字符串输入的 。但是，我有一个扩展的数字 PricePerLF 字段，因此它始终包含一个数值。[我使用了此处](http://knockoutjs.com/documentation/extenders.html)找到的建议扩展器。

```
ko.extenders.numeric = function(target, precision) {
    //create a writeable computed observable to intercept writes to our observable
    var result = ko.computed({
        read: target,  //always return the original observables value
        write: function(newValue) {
            var current = target(),
                roundingMultiplier = Math.pow(10, precision),
                newValueAsNum = isNaN(newValue) ? 0 : parseFloat(+newValue),
                valueToWrite = Math.round(newValueAsNum * roundingMultiplier) / roundingMultiplier;

            //only write if it changed
            if (valueToWrite !== current) {
                target(valueToWrite);
            } else {
                //if the rounded value is the same, but a different value was written, force a notification for the current field
                if (newValue !== current) {
                    target.notifySubscribers(valueToWrite);
                }
            }
        }
    });

    //initialize with current value to make sure it is rounded appropriately
    result(target());

    //return the new computed observable
    return result;
}; 
```

我怎样才能让这个数字扩展器很好玩`valueUpdate: 'afterkeydown'`？强制它显示一定数量的小数点也很好，例如`2.80`代替`2.8`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:39:32.897

我不久前做了这个扩展器，用 afterkeydown 试了一下，效果不错，如果你使用十进制格式，它的效果就不那么完美了

[http://jsfiddle.net/yEgmT/1/](http://jsfiddle.net/yEgmT/1/)

```
ko.extenders.numeric = function(observable, format) {
    return ko.computed({
        read: function() {  
            return Globalize.format(observable(), format === true ? undefined : format);
        },
        write: function(value) {           
            if(value.substring) {
                value = Globalize.parseFloat(value)
            }                    
            if(!isNaN(value)) {
                observable(value);
            }
        }
    });
}; 
```

# c# - 如何管理数据库表中唯一的 DateTime 字段

> ID：14484007
> 
> 赞同：0
> 
> 时间：2013-01-23T16:06:44.163
> 
> 标签：c#, sql, sql-server

我正在使用 Visual Studio 2010、Windows XP 和 SQL Server CE。

我想做一个这样的数据库表：

```
CREATE TABLE Logs  
(  
    Id int,  
    ***LogTime datetime***,  
    Register1 smallint,  
    Register2 smallint,  
    Register3 smallint,  
) 
```

Id 将是主键和身份。

我有这些我无法解决的问题：

1.  该表将由***大批量插入***（有时甚至多达 300k 条记录）填充，因为“数据源”将是插入 PC 的 USB 中的文件。此二进制格式文件包含按时间排序的日志。我的软件必须抓取、解码并准备要***添加***到数据库的记录。
2.  数据库中不能有重复的日期时间（2 条具有相同日期时间的记录），因为最终会根据该表的数据制作图表。

所以第一次批量插入就可以了，例如：

```
1, 2013-01-01 12:34:12, 12, 100, 200  
2, 2013-01-01 12:34:24, 13, 100, 212  
3, 2013-01-01 12:34:36, 11, 110, 208  
...  
100, 2013-01-01 14:04:58, 15, 120, 198 
```

但是下一个要插入的文件将具有旧内容+其他新的后续记录。而且我只需要插入新记录（否则我正在创建记录副本）。

所以
文件 1：从 1 月 1 日到 1 月 5 日
文件 2：从 1 月 1 日到 1 月 8 日

目前我已经将数据库表实现为一个平面二进制文件，在插入之前，我用 O(N) 线性扫描找到“插入点”，然后我可以追加新数据。

我想使用 SQL Server CE 而不是平面二进制文件作为数据容器。

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:37:42.840

由于您提到“按时间排序的日志”，我假设您插入的记录不可能来自最后一次插入之前。例如，日期**总是**唯一的并且**总是**升序的。（例如，某些程序每 12 秒向文件添加一条记录。）

在这种情况下，创建一个变量来保存最近的日期：

```
DECLARE @Last_Datetime DATETIME 
```

然后只需创建一个与您计划插入的表的架构相匹配的临时表：

```
CREATE TABLE dbo.#Temp_Logs  
(
    LogTime datetime, 
    Register1 smallint,  
    Register2 smallint,  
    Register3 smallint,  
) 
```

并批量插入该表。

然后抓取最近的记录：

```
SELECT @Last_Datetime = MAX(L.LogTime)
FROM dbo.Logs as L 
```

然后使用`INSERT SELECT`with`WHERE`子句移动行：

```
INSERT Logs
SELECT
    TL.datetime,
    TL.Register1,
    TL.Register2,
    TL.Register3
FROM dbo.#Temp_Logs AS TL
WHERE TL.datetime > @Last_Datetime 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:34:04.130

我建议您将数据批量插入临时表（先截断它），然后使用 EXCEPT 子句仅插入新记录。

```
INSERT INTO Logs (LogTime, Register1, Register2, Register3)
SELECT LogTime, Register1, Register2, Register3 FROM LogStaging
EXCEPT
SELECT LogTime, Register1, Register2, Register3 FROM Logs 
```

# c# - 在 CloseReason.UserClosing 表单上显示关闭 2 次对话框

> ID：14484008
> 
> 赞同：2
> 
> 时间：2013-01-23T16:06:46.167
> 
> 标签：c#, winforms

我想在用户尝试关闭应用程序时显示对话框（我的表单上的红色窗口十字和按钮）但是当窗口关闭时，此对话框阻止关闭，所以我想通过应用程序检测窗口何时关闭并继续没有对话。这是我的代码

表单加载后我捕捉到关闭事件：

```
this.FormClosing += new FormClosingEventHandler(Form1_FormClosing); 
```

和

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        switch (e.CloseReason)
        {
            case CloseReason.UserClosing:
                if (MessageBox.Show("Do you want to exit the application?", "Your App", MessageBoxButtons.YesNo) == DialogResult.No)
                    {
                        e.Cancel = true;
                    }
                break;
            case CloseReason.WindowsShutDown:
                e.Cancel = false; //this is propably dumb
                break;
            default:
                break;
        }
    } 
```

但是当用户关闭应用程序时，对话框会显示 2 次。第一个对话框不做任何事情，在第二个对话框之后采取行动。如何在窗口关闭时显示只关闭一次的对话框而不显示对话框（因为窗口正在等待我的应用程序关闭）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:49:24.037

编写此代码的更好方法（我的观点）是不订阅表单事件，而是使用可用的覆盖方法：

```
protected override void OnFormClosing(FormClosingEventArgs e)
{
  switch (e.CloseReason)
  {
    case CloseReason.UserClosing:
      if (MessageBox.Show("Do you want to exit the application?", "Your App", MessageBoxButtons.YesNo) == DialogResult.No)
      {
        e.Cancel = true;
      }
      break;
    case CloseReason.WindowsShutDown:
      e.Cancel = false; //this is propably dumb
      break;
    default:
      break;
    }

  base.OnFormClosing(e);
} 
```

您可能需要考虑仅使用 an`if (e.CloseReason == CloseReason.UserClosing)`而不是基于其当前形式的 switch 语句。 `e.Cancel`默认情况下已为 False，因此您无需显式设置它。

# android - App Inventor 无法连接到手机或模拟器

> ID：14484013
> 
> 赞同：0
> 
> 时间：2013-01-23T16:06:59.210
> 
> 标签：android, emulation, app-inventor

我创建了一个包含很多图片（75 张图片）的屏幕，这些图片不可见。由于我添加了最后 50 张图片，块编辑器无法再连接到手机或模拟器。我真的需要我的应用程序的所有图片。有没有可能，一个屏幕上的75张图片太多了？

我目前也无法将应用程序下载到我的计算机上，因为构建服务器当前很忙：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:18:54.447

你的图片有多大？您是否知道 App Inventor 应用程序有 5 MB 的限制？

有以下解决方法
1\. [Hossein 的解决方案](https://groups.google.com/d/topic/apptomarket/QpKUWld912g/discussion)
2\. [Shival Wolf 的 webprefetch](http://ai.kittywolf.net/index.php/Webprefetch)或[Taifun 的 webprefetch 文件 by file](http://puravidaapps.com/filebyfile.php)
3\. [Gary 的解决方案](https://groups.google.com/d/topic/usgsuacwai/9uHYHr2AU_8/discussion)

# eclipse - eclipse 的插件或 vim 的插件类似 ctrl+p 并输入 @ 在 sublime 中查找函数/方法列表

> ID：14484016
> 
> 赞同：3
> 
> 时间：2013-01-23T16:07:03.170
> 
> 标签：eclipse, vim, sublimetext2

eclipse擅长静态类型的时候自动补全，**动态类型**的时候eclipse自动补全失败；在**sublime** ctrl+p 中，键入 @ 并键入“方法名称”以查找函数/方法列表，这是在编写动态类型语言时找到正确方法的绝妙方法；

关键是：sublime text 2中的操作非常方便，所有的键类型都在一个输入框中；永远不需要更改活动文件选项卡；我们可以专注于活动代码文件选项卡；

eclipse或vim中是否有任何插件可以方便地搜索任何文件的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T17:04:40.743

在 ST2 中，此功能用于快速跳转到项目中任何位置的方法。

在 Eclipse 中，`Control`++可用于快速跳转到“资源”（文件），++`Shift`用于跳转到类型（而不是方法）。+打开当前文件的一个非常有用和快速的大纲。它不适用于整个项目。`R``Control``Shift``T``Control``o`

我不知道有什么东西与 ST2 的功能完全一样。你搜索市场了吗？

在 Vim 中，FuzzyFinder、Command-T 和 CtrlP 都允许您使用模糊匹配在项目中导航。它们可以设置为使用您的`tags`文件。AFAIK，没有插件可以完全提供 ST2 提供的功能。

根据您的问题，我不确定您是否按预期使用它：听起来您使用它来显示项目中某个文件中的方法列表，以便在代码中使用正确的方法。这听起来很像你会从*自动完成*中受益。

作为一个 IDE，Eclipse 在这方面大放异彩：它的“代码辅助”窗口将向您显示建议的定义位置及其类型。

与 IDE 相比，Vim 的“omnicompletion”非常有限，但根据您的语言和使用一些第三方脚本，它可以变得非常强大。

# linux - Unix 测试是否存在或文件

> ID：14484017
> 
> 赞同：2
> 
> 时间：2013-01-23T16:07:09.927
> 
> 标签：linux, bash, shell, unix

```
[ -f /tmp/myfile.txt ] && echo "File exists" || echo "No such file" 
```

这是如何运作的？特别是`&&`和的评价`||`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:09:43.260

`&&`并且`||`是控制运算符，根据先前命令的退出状态确定是否应执行以下命令。来自`man (1) bash`：

> 控制运算符 && 和 || 分别表示 AND 列表和 OR 列表。AND 列表具有以下形式
> 
> ```
>  command1 && command2 
> ```
> 
> 当且仅当 command1 返回退出状态为零时，才会执行 command2。
> 
> OR 列表具有以下形式
> 
> ```
>  command1 || command2 
> ```
> 
> 当且仅当 command1 返回非零退出状态时，才会执行 command2。AND 和 OR 列表的返回状态是列表中执行的最后一个命令的退出状态。

`[`, 或,如果命令通过测试，则`test`返回*零退出状态。*来自`help test`：

> test: test [expr] 根据 EXPR 的评估，退出状态为 0（真）或 1（假）。

所以当你这样做时

```
[ -f /tmp/myfile.txt ] && echo foo || echo bar 
```

您真正要说的是（请仔细阅读此内容）*如果文件存在，则回显 foo。如果文件不存在**或`echo foo`命令失败**，回显 bar。*

`if…then`这是这些控制操作符和命令之间微妙但关键的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:15:32.210

基本思想是从左到右运行

首先它评估 -f /tmp/myfile.txt 如果文件存在并且是文件则为真

接下来它尝试评估 && ，它接受一个左右参数。这是一个合乎逻辑的“和”

它从左到右进行惰性评估，因此如果文件测试为真，那么它会检查 echo 命令是否为真，它通过执行它来完成。大概在 shell 世界中“真”意味着它以零退出代码正常执行

如果文件测试或回显（ && 的两个参数）中的任何一个为假，则 && 的输出为假，并将其传递到右侧

|| 是一个逻辑“或”，也有一个左右参数。如果左边的 arg 为真，那么它会停在那里，因为它是惰性的

如果左侧 arg 为假（文件不存在），则运行右侧 arg

# actionscript-3 - 更新数据提供者更改的火花列表控件

> ID：14484018
> 
> 赞同：0
> 
> 时间：2013-01-23T16:07:12.047
> 
> 标签：actionscript-3, apache-flex, flex4.5

我正在使用绑定到此类实例的火花列表控件：

```
[Event(name="collectionChange", type="mx.events.CollectionEvent")]
public class HierarchicalCollectionListAdapter extends EventDispatcher implements IList
{
...
} 
```

每次当这个集合发送“reset”collectionChange 事件时，我想让 List 完全重新绘制。现在要实现这一点，每次集合更新后我都必须调用此代码：

```
var _itemRenderer:IFactory = _list.itemRenderer;
_list.itemRenderer = null;
_list.itemRenderer = _itemRenderer; 
```

有没有办法以更优雅的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:27:31.107

如果有人遇到同样的问题，我会在这里留下我的解决方案。

我能做的最好的事情 - 创建扩展列表控件，每次更新集合时都会自行刷新。因此，基于火花列表创建新控件并在此处添加以下代码：

```
<fx:Script>
    <![CDATA[
        import mx.collections.IList;
        import mx.events.CollectionEvent;
        import mx.events.CollectionEventKind;

        /**
         * Subscribe to collection change event.
         */
        override public function set dataProvider(value:IList):void
        {
            if (dataProvider)
                dataProvider.removeEventListener(CollectionEvent.COLLECTION_CHANGE,
                    dataProvider_collectionChangeHandler);

            if (value)
                value.addEventListener(CollectionEvent.COLLECTION_CHANGE, _collectionChangeHandler, false, 0, true);

            var _itemRenderer:IFactory = this.itemRenderer;
            this.itemRenderer = null;
            this.itemRenderer = _itemRenderer; 

            super.dataProvider = value;
        }

        /**
         * If collection has changed - redraw list by resetting itemRenderer.
         */
        private function _collectionChangeHandler(event:Event):void
        {
            if (event is CollectionEvent)
            {
                var ce:CollectionEvent = CollectionEvent(event);

                // We don't need to refresh if any collection element will change.
                if(ce.kind != CollectionEventKind.UPDATE)
                {
                    var _itemRenderer:IFactory = this.itemRenderer;
                    this.itemRenderer = null;
                    this.itemRenderer = _itemRenderer;
                }
            }
        } 

    ]]>
</fx:Script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:53:04.540

我很难看到这里发生了什么，但看起来你的列表`dataProvider`没有扩展，`ListCollectionView`所以你不能使用`refresh()`

但是，您可以使用强制重绘`invalidateDisplayList()`

我会尝试这样的事情：

```
_list.dataGroup.invalidateDisplayList(); 
```

# python - 如果语句不起作用，python

> ID：14484022
> 
> 赞同：-1
> 
> 时间：2013-01-23T16:07:17.050
> 
> 标签：python, if-statement

此代码要求用户选择 1 或 2。如果 1，则 blahblah；如果是 2，那么 blahblah。如果两者都没有，则重复直到输入 1 或 2。程序不接受 1 或 2，而是直接进入“else”并重复输入问题以输入 1 或 2。

```
def optionType ():         # pick option

#pdb.set_trace()

    option = ''
    print ('Which slice option do you want, even slice (1) or leftover(2)? ')
    input (option)

    if option == '1':
        evenSlice()        #includes decimal

    elif option == '2':
        leftoverSlice()    #omits decimal

    else:
        print('Enter either 1 or 2.')
        optionType() 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:09:07.590

您需要存储[`input()`函数](http://docs.python.org/3/library/functions.html#input)的返回值：

```
option = input('Which slice option do you want, even slice (1) or leftover(2)? ') 
```

函数参数是您要显示的文本，而不是您要接收用户输入的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:15:12.703

1.  你需要存储选项

    `option = input('Which slice option do you want? even slice (1) or leftover(2)?')`

如果您使用的是 Python2（但不是 Python3）：

1.  当你这样做时，如果有人传入 1，它将是一个 int，而不是一个字符串。

    `if option == 1:`

2.  所以如果在 [ [http://docs.python.org/2/library/functions.html#input](http://docs.python.org/2/library/functions.html#input)`input` ]中输入一个字母会导致错误，你可能想要`raw_input`

    `option = raw_input('Which slice option do you want? even slice (1) or leftover(2)?')`

# jsp - 在jsp中访问bean中设置的列表

> ID：14484024
> 
> 赞同：0
> 
> 时间：2013-01-23T16:07:19.877
> 
> 标签：jsp, el, jsp-tags

在 bean“Result”中，设置了 arrayList“tempList”。然后将这个 bean 设置到会话中。我必须在 JSP 页面上获取 arrayList 元素。

我没有得到如何获取其元素的方法。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:12:02.930

使用 JSTL `<c:forEach>`：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
...
 <c:forEach items="${youSessionAttributeName}" var="i">
    Item <c:out value="${i}"/><p>
 </c:forEach> 
```

# mercurial - 随着历史记录的增加，从 sourcerepo mercurial 存储库中拉取速度会变慢。为什么，有解决办法吗？

> ID：14484026
> 
> 赞同：1
> 
> 时间：2013-01-23T16:07:23.357
> 
> 标签：mercurial

**问题**

从我们的 Sourcerepo mercurial 存储库中提取更改过去只需要很少的时间，例如几秒钟。现在我需要足够的时间去喝一杯和小便（几分钟）。我认为它越来越慢，因为它是存储库历史记录大小的函数。这真的很烦人，我只需要喝很多水和尿尿，这开始影响我的工作效率。

**语境**

*   回购位于[Sourcerepo](http://sourcerepo.com/)上。
*   我正在使用基于密钥的身份验证通过 ssh SSH 连接到存储库。
*   我使用 TortoiseHG 作为我选择的工具，尽管通过命令行同样可以看到这个问题。
*   检查传入的变更集需要很长时间，花时间的是拉而不是更新。
*   如果没有变化，只需要几秒钟就可以告诉我。
*   我们使用了很多命名的分支，我们会在自己之后关闭它们，所以一次有 5-20 个打开，但历史上有数百个。
*   我们在 repo 中有不到 3k 的修订。
*   推的还是挺快的。

我认为 Hg 使用了某种 delta 编码来获取更改，它不应该花这么长时间。我想知道是否有我在 Hg 中缺少的选项，或者是否有其他人经历过这种行为？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:45:47.347

你可以试试

*   `hg incoming -v --time --profile --debug REPO-URL`并读取输出 - 它可以揭示过程中最慢的部分
*   将 Sourcerepo 克隆到*本地*存储库并针对此存储库测试传入（消除与网络相关的延迟）

如果没有任何帮助

*   克隆 repo 的较小部分（从 1 到 tip）并测试这些截断克隆的传入以识别变更集（我希望如此），这带来了这个令人头疼的问题：我看不到如何在单个大型 repo 上使用 bisect 来测试`incoming`操作时间

# php - 拆分数组以在另一个数组中使用的问题

> ID：14484027
> 
> 赞同：0
> 
> 时间：2013-01-23T16:07:25.857
> 
> 标签：php, mysql, variables, for-loop

我有一些数据，我目前已经硬编码，基本上我正在尝试拆分数字，1-port 并将其重新创建为

```
'INSERT INTO '.$tbl_name.'(PortNumber) VALUES (1),(2),(3),(4),(5),(6),(7),(8),(9),(10),(11),(12),(145),(146),(147),(148),(149),(150),(151),(152),(153),(154),(155),(156)'; 
```

等等..我认为我有一个很好的开始..

PHP

```
//post vars 
$port = 24; //(int)$_POST['ports'];
$super = 2; //(int)$_POST['super'];
$col = 12; //(int)$_POST['columns'];
$row = 2; //(int)$_POST['rows'];
//rest of vars
$halfPort=$port/2;//12
$colHalf = $col / $super;//6
$half=$colHalf-1;//5
$count=1;
$and=1;
$one=1;

echo "<h1>here goes nothen</h1><br><br>";
//sperate port
$finalArray = array();
for ($i = $port; $i >= 1; $i -= $colHalf) {
    $tempArray = array();
    for ($j = 0; $j < $colHalf; $j++) {
        $tempArray[] = $i - $j;
    }
    $tempArray[]= sort($tempArray);
    $finalArray[] = implode(",", $tempArray);
}
$finalArray = array_reverse($finalArray);
echo "<pre>" . print_r($finalArray, true) . "</pre>";

echo "<br><br>";
//sql for insert
$sqlinsert='
        INSERT INTO '.$tbl_name2.'
        (PortNumber) VALUES ';
 $start='(';
 $end=')';
//preset b
$b=0;
for($c = $port; $c >= 1; $c -= $colHalf) {
    $queryStart = array();
$queryStart[]=explode(',',$finalArray[$b]);
   echo "<pre>" ."start". print_r($queryStart, true) . "</pre>";
    for($s=0; $s<6; $s+=$and) {
        $queryEnd = array();
        $queryEnd[] = $start.$queryStart[$s].$end;
                echo "<pre>" ."end". print_r($queryEnd, true) . "</pre>";
    }
$b+=1;
} 
```

要查看它现场插入它：http: [//phptester.net/index.php](http://phptester.net/index.php?lang=en) ?lang=en baisaclly 它得到了`$queryEnd`，一切都在走下坡路，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:43:40.150

我不太确定你想做什么，但如果你只是想构建类似 INSERT 查询的东西，你可以这样做：

```
$tbl_name = '?';
echo 'INSERT INTO '.$tbl_name.'(PortNumber) VALUES ('.implode('),(', array_merge(range(1,12),range(145,156))).')'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:22:17.230

我想我看到了。每次 For 循环运行时，您都在重新初始化 $queryEnd 数组。将其移出 For 循环。麦克风

# github - Windows Github 推送新文件夹的问题

> ID：14484028
> 
> 赞同：2
> 
> 时间：2013-01-23T16:07:25.613
> 
> 标签：github, synchronization, directory, add, visual-sourcesafe

我是 VSS（视觉源安全）和 Dropbox 的人，但对 GitHub 很陌生。正如我在之前[的 SO 帖子](https://stackoverflow.com/questions/10722989/small-team-remote-server-based-simple-version-control-vcs)中总结的那样，我正在使用[Windows Github 工具](http://windows.github.com/)来管理我们远程服务器上的存储库。我很高兴在不需要更深入的 git 知识的情况下找到了这个易于使用的单点工具。

> 事情一直很好，直到有一天我不得不向我的存储库添加一个新文件夹。Windows Github 工具不会将该文件夹识别为要推送的新内容！经过一番努力，我得出它“**确实**”与我的“**初始文件夹**”保持同步，但只是 **在存储库目录中创建一个新文件夹不会** 像 Dropbox 那样同步它！

我搜索知道我该怎么做，或者我是否必须使用 GitShell。我的不好，我试过了，失败了。最后，我决定清除所有内容并使用这个新文件夹重新创建存储库文件夹结构，就像我在初始设置中所做的那样。但我不知道它是如何或为什么一直说**/.git/index 文件正在被另一个进程使用**。我试图清空这个文件夹，但它不会。最后，注销能够为我释放该文件，然后我重新创建了所有内容。呸！

由于我的 Dropbox 习惯，我作为新手可能做错了，甚至误用了 Git。请纠正我！最好的方法是什么？

我的用法更像是一个小型远程连接团队中的 VSS 和保管箱（带有版本控制）。我从这个简单的[Windows Github 教程](http://haacked.com/archive/2012/05/21/introducing-github-for-windows.aspx)开始。下面两个呢——

*   [TortoiseGit](http://www.sparkfun.com/tutorials/165)
*   [msysgit](http://robertgreiner.com/2010/02/getting-started-with-git-and-tortoisegit-on-windows/)

他们提供更好的管理吗？请建议 Windows GitHub 是否是最好的（如果是的话，以后如何添加文件夹？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:31:51.760

以防万一，请注意添加文件夹不会触发 Git 的任何操作：如果该文件夹为空，您将无法推送它，因为 Git 会将其视为“无内容”，并将忽略该新文件夹.

另请参阅“[如何将空目录添加到 git 存储库？](https://stackoverflow.com/questions/115983/how-do-i-add-an-empty-directory-to-a-git-repository) ”。

如果你在其中添加一个文件夹*和一些文件*，那么 GitHub for Windows 界面会检测到该新内容，并要求你添加和提交，这意味着你将能够推送。

# css - 子菜单位置：IE7绝对间距的bug

> ID：14484032
> 
> 赞同：0
> 
> 时间：2013-01-23T16:07:31.310
> 
> 标签：css, internet-explorer-7, position, absolute, spacing

我的菜单有点问题，我似乎找不到答案。我已经尝试了大部分我能找到的解决方案（即使稍微相关），但我无法在 IE7 上修复它。

我的菜单在所有现代浏览器（IE7 除外）中都能完美运行，我们仍然必须保持其功能。我附上了子菜单的屏幕截图（导致问题）。查看 LI 之间的白色小间隙。出于隐私目的，我已隐藏所有文本。

[截图在这里](http://i817.photobucket.com/albums/zz97/SpiritOfTheWinds/ie7bug_zps3fe33ad7.jpg)

这是HTML：

```
<ul id="header_menu" class="do-not-print">
<li><a href="#">Test</a></li>
<li class="current_page_item"><a href="#">Test 2</a>
    <ul class="children">
    <li><a href="#">Subtest 1</a></li>
    <li><a href="#">Subtest 2</a></li>
    <li><a href="#">Subtest 3</a></li>
    <li><a href="#">Subtest 4</a></li>
    <li><a href="#">Subtest 5</a></li>
    <li><a href="#">Subtest 6</a></li>
    </ul>
</li>
<li><a href="#">Test 3</a></li>
<li><a href="#">Test 4</a></li>
<li><a href="#">Test 5</a></li>
<li><a href="#">Test 6</a></li>
<li><a href="#">Test 7</a></li>
</ul> 
```

这是我的CSS：

```
#header_menu {position: absolute; bottom: 0; left: 0; height: 38px; width: 100%; margin: 0; padding: 0; z-index: 300;}
#header_menu li {position: relative; background-color: #0022a3; list-style-type: none; font-size: 1em; margin: 0; display: block;}
#header_menu li a {color: #fff; text-decoration: none; margin: 0; display:block;}

#header_menu > li {float:left; border-right:1px solid #001871; border-top:1px solid #001871; border-bottom:1px solid #001871;}
#header_menu > li:first-child {border-left:1px solid #001871;}
#header_menu > li:last-child .children {right: 1px; left: auto;}
#header_menu > li > a {font-size:18px; line-height:38px; padding: 0; text-align: center; padding: 0 29px;}

#header_menu li:hover > a, #header_menu li.current_page_item > a, #header_menu li.current_page_ancestor > a {background-color:#0030e6;}
#header_menu li:hover .children {display:block;}

#header_menu .children {display: none; position: absolute; top: 39px; left: 0; width: 225px; z-index: 400;}
#header_menu .children li {width: 100%; border-bottom: 1px solid #001871; border-left: 1px solid #001871; border-right: 1px solid #001871;}
#header_menu .children li a {font-size: 16px; line-height:20px; padding: 6px 29px; text-align: left;} 
```

知道我的 CSS 有什么问题吗？我已经挠头几个小时了......：S

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:13:16.573

尝试添加`float:left`到`.child li`IE 中，因为它是许多错误之一

# ruby-on-rails - Ruby on Rails：执行 JAR

> ID：14484033
> 
> 赞同：1
> 
> 时间：2013-01-23T16:07:36.210
> 
> 标签：ruby-on-rails, process, jar, io, popen

伙计们，我正在尝试在 RoR 中执行一个 jar 文件。感谢 SO，我想使用 IO::popen 调用来执行 jar 文件。

要求： - 登录网站：让我们公司员工登录。它是一个 Java 库，如果用户名/密码有效，它会做一些魔术和数字。我使用的，

```
result = IO::popen("java -cp auth.jar com.name.auth.LDAPLookup " + params[:username] + " " + params[:password]).read
p result 
```

输出：[“授权”，“电子邮件”，“身份证”]

*   没有进行输入清理。这是有风险的。任何人都可以在用户名/密码中输入一些内容，并将在服务器中执行。

我不知道该怎么做。我想尝试的一种选择是使用 fork() 或 Process API 来启动“java”并传递参数。然而想不通。还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:13:10.880

除了您提到的问题之外，这在性能方面听起来非常痛苦（毕竟，您正在等待 JVM 启动每个请求）。

两个解决方案突然出现在我身上：

*   看看这个库做了什么，看看你是否真的需要为此调用 Java；特别是，如果只是使用一组固定参数在 LDAP 目录中进行查找的问题，那么有很多宝石可以做到这一点

*   如果你*必须*使用 Ruby 中的 Java 类，强烈考虑使用[JRuby](http://jruby.org/)，它可以让你直接调用有问题的 Java 类，既没有每次调用时重新启动 JVM 的开销，也没有尝试正确逃避的风险您的参数从 Ruby 到 shell 到 JVM，然后返回。

# php - jQuery Validate - 记住牛奶注册表单示例，服务器端代码在哪里？

> ID：14484035
> 
> 赞同：-3
> 
> 时间：2013-01-23T16:07:42.247
> 
> 标签：php, jquery-validate

我正在尝试重新创建[Remember the Milk Signup 表单](http://jquery.bassistance.de/validate/demo/milk/)验证示例（来自[JQuery Validate plugin wiki](http://docs.jquery.com/Plugins/Validation#The_Remember_The_Milk_sign-up_form)）。特别是用于用户名远程验证。如果您查看示例，您会在底部看到两个链接，一个用于客户端，另一个用于服务器端代码。第二个不起作用（在我尝试过的所有三种浏览器中）。

那么，请问，是否有人拥有此服务器端代码、指向它的链接或任何兼容的替代方案，可与所提供的客户端代码一起使用？

PD 我正在尝试在这个问题上遵循 stackoverflow 规则。如果它无效，请给我一些建议。

**注意：**感谢@Marc B的回答，我不知道如何在表单和checkusername.php之间传递数据，我知道。

我一开始使用的是什么（不工作）： JS 规则：

```
(...)
$('form').find('.classNewUsernameField').each(function () {
    $(this).rules('add', {
        required: true,
        remote: "checkusername.php",
        minlength: minLengthField,
        messages: {
            required: "Required field!",
            remote: "Taken!",
            minlength: "Too short"
        }
        });
}); 
```

服务器端：

```
if (!mssql_connect("127.0.0.1", "user", "pass"))
    exit ("->FAILED");

if (!mssql_select_db("db_rrhh"))
    exit ("FAILED DB");

$query = "SELECT username_user FROM table_users WHERE username_user=".$_POST['username'];
$res = mysql_query($query);

if (mysql_num_rows($res) > 0) {
    $output = true;
} else {
    $output = false;
}
echo json_encode($output); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:26:54.143

这是服务器端代码（如何获取：查看演示页面源代码，看到它正在获取 .phps 文件，手动点击 url，下载文件，加载到记事本中，在此处剪切和粘贴）

```
<?php
$request = trim(strtolower($_REQUEST['value']));
$users = array('asdf', 'Peter', 'Peter2', 'George');
$valid = 'true';
foreach($users as $user) {
    if( strtolower($user) == $request )
        $valid = 'false';
}
echo $valid;
?> 
```

总体上非常愚蠢的代码。

# ssas - 一对多 - 计算列

> ID：14484038
> 
> 赞同：1
> 
> 时间：2013-01-23T16:07:45.290
> 
> 标签：ssas, dax

我正在尝试自学 SQL 2012 SSAS 的新表格模型，以处理以前在（慢）存储过程中处理的一些分析报告。

我在大部分方面都取得了不错的进展，只是弄清楚事情是如何工作的以及如何添加我需要的计算，但我一直在努力解决以下问题：

我有一个包含文件信息的表——它有：
ID FileName CurrentStatus UploadedBy

然后是一个表，其中包含文件经历的状态（与文件表有很多关系）：
FileID StatusID TimeStamp

我想要做的是在文件表中添加一个计算列，当文件处于特定状态时返回时间戳信息。即：StatusID=100 已上传。我想在 File 表上添加一个名为 UploadedDate 的计算列，该列具有来自 FileStatus 表的关联 TimeStamp 信息。

看起来这应该可以通过 DAX 实现，但我似乎无法理解它。有什么想法吗？

提前，非常感谢，布伦特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T01:41:11.707

我假设每个文件只能处于每个状态一次（每个 FileID 只有一行具有 StatusID 100）。我相信您可以只使用lookupvalue公式。UploadedDate 计算列的公式类似于

```
=LOOKUPVALUE(FileStatus[Timestamp], File[FileID], FileStatus[FileID], FileStatus[StatusID], 100) 
```

这[是 LOOKUPVALUE 的 MSDN 描述](http://technet.microsoft.com/en-us/library/gg492170.aspx)。您提供包含要返回的值的列、要搜索的列以及要搜索的值。您可以向查找表添加多个条件。这是一篇[博客文章](http://technet.microsoft.com/en-us/library/gg492170.aspx)，其中包含一个很好的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:55:33.917

这是一个应该适用于您想要做的事情的公式......

```
=MAXX(
    CALCULATETABLE(
         'FileStatus'
        ,'FileStatus'[StatusID] = 100
    )
    ,'FileStatus'[TimeStamp]
) 
```

# spring - 我如何将 Spring bean 注入休眠的 SequenceGenerator

> ID：14484044
> 
> 赞同：1
> 
> 时间：2013-01-23T16:08:20.470
> 
> 标签：spring, hibernate

我有一个为休眠编写的自定义 SequenceGenerator：

```
public class LoginGenerator extends SequenceGenerator {

    @Autowired
    ITicketService ticketService;

    @Override
    public Serializable generate(SessionImplementor session, Object obj) {
        Ticket ticket = (Ticket) obj;
        Long maxCounterOfSection = ticketService.findMaxSectionCounter(ticket
            .getSection());
        maxCounterOfSection++;
        return ticket.getSection() + "-" + maxCounterOfSection;
    }
} 
```

但是我在这个生成器中没有弹簧上下文！票务服务为空。我已经为我的生成器尝试了@Component 注释，但没有成功。

PS：我使用 spring 3.2.0-FINAL 和 hibernate 3.6.10-FINAL 并且没有办法更新到 hibernate4！

任何想法，任何人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T23:39:04.557

如上所述，ApplicationContextAware 类解决了问题。

```
public class ApplicationContextProvider implements ApplicationContextAware {
    private static ApplicationContext applicationContext;

    @SuppressWarnings("static-access")
    @Override
    public void setApplicationContext(ApplicationContext applicationContext)
            throws BeansException {
        this.applicationContext = applicationContext;
    }

    public static ApplicationContext getApplicationContext() {
        return applicationContext;
    }

    public static <T> T getBean(Class<T> requiredType) {
        return applicationContext.getBean(requiredType);
    }

    public static <T> T getBean(String name, Class<T> requiredType) {
        return applicationContext.getBean(name, requiredType);
    }
} 
```

在`applicationContext.xml`我添加`<bean id="applicationContextProvider" class="de.gfz.rz.spring.ApplicationContextProvider"></bean>`.

这里的用法：

```
public class LoginGenerator extends SequenceGenerator {

    @Override
    public Serializable generate(SessionImplementor session, Object obj) {
        ITicketService ticketService = ApplicationContextProvider
            .getBean(ITicketService.class);
        Ticket ticket = (Ticket) obj;
        Long maxCounterOfSection = ticketService.findMaxSectionCounter(ticket
            .getSection());
        maxCounterOfSection++;
        return ticket.getSection() + "-" + maxCounterOfSection;
    }
} 
```

# xml - 骆驼服务端点。requestBody 转换为字符串错误

> ID：14484049
> 
> 赞同：0
> 
> 时间：2013-01-23T16:08:36.607
> 
> 标签：xml, service, request, apache-camel, endpoint

我已经设置了一个带有端点的简单 HTTP 服务，它提供 XML 响应。我正在针对该服务运行 JUnit 测试。这是下面代码的摘录。getMessageBody 使用缓冲读取器将文件转换为字符串。

字符串 src = getMessageBody(xmlname);

```
 MockEndpoint mock = this.context.getEndpoint("mock:resultsCheck",MockEndpoint.class);
        mock.expectedMessageCount(2);

        LOG.info(".. get response object");
        Object responseBody1 = this.template.requestBody("cxf://bean:Port",src);
        String responseBody2 = this.template.requestBody("cxf://bean:Port",src, String.class); 
```

问题是该行：

对象 responseBody1 = this.template.requestBody("cxf://bean:Port",src);

工作正常并返回一个填充的对象。

此行返回 null，我不知道为什么：

String responseBody2 = this.template.requestBody("cxf://bean:Port",src, String.class);

有任何想法吗？

- 编辑 -

我进一步调查了一下，这似乎是类型转换的问题。找不到从 org.apache.cxf.bus.spring.SpringBus 类型到 org.apache.camel.Component 的合适转换

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:03:26.447

在第二次调用中，CXF Web 服务是否返回非空响应？

你可以尝试注释掉第一个电话，所以你只做第二个电话，看看你是否得到回应。

第一次调用返回的对象也是什么类型。如果你执行它的 toString 方法，它会返回 null 吗？

# java - 如何使用 StackMob 查询列表填充 listView

> ID：14484050
> 
> 赞同：0
> 
> 时间：2013-01-23T16:08:38.707
> 
> 标签：java, listview, arraylist, stackmob

我整天都在想办法解决这个问题。我有一个来自 stackMob 的查询列表，它应该为我提供我在我认为的列表中创建的最新 10 个 obj。我真的不明白这些东西是如何工作的。我用列表视图制作了一个布局，我想使用该列表来填充列表视图。我怎么做？我已经尝试了 10 多种不同的方法，但没有任何效果。然后我尝试在控制台中打印这个列表，但这也没有做任何事情。

```
public void QueryWritter() {

    StackTask.query(StackTask.class, new StackMobQuery().isInRange(0, 9),
            new StackMobQueryCallback<StackTask>() {

                ListView queryTwo = (ListView) findViewById(R.id.objectreader_two);
                TextView queryOne = (TextView) findViewById(R.id.objectreader);

                @Override
                public void failure(StackMobException e) {
                    // TODO Auto-generated method stub
                    e.printStackTrace();
                }

                @Override
                public void success(List<StackTask> task) {
                    // TODO Auto-generated method stub

                    //task = new ArrayList<StackTask>();
                    //ArrayAdapter<StackTask> a = new ArrayAdapter<String>(getBaseContext(), android.R.layout.simple_list_item_1, task);
                    System.out.println(task);

                }

            });

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:25:13.357

你所做的一切看起来都没有错。是否看到从任一回调中打印的任何内容？

调试的下一步是启用日志记录，您可以通过在 onCreate StackMob.getStackMob().getSession().getLogger().setLogging(true); 中添加这一行来实现。这将打印出网络上实际发生的事情，这样您就可以看到被调用的内容。如果没有立即清除问题，我可以查看输出

# c# - 存储和显示文章

> ID：14484052
> 
> 赞同：1
> 
> 时间：2013-01-23T16:08:41.653
> 
> 标签：c#, asp.net-mvc

将长文本存储在将在网页上显示为文章的数据库中的最佳方法是什么？作为一个长字符串？

另一个快速的问题是，有没有办法限制多对多关系一侧的对象数量：例如，我有一个战斗和一个战斗实体，它们具有多对多关系，但我只想允许存在两个战士在打架。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:23:09.673

如果你认为一场战斗中 2 名战士的限制是一成不变的，你最好有 2 列来存储战士 id；例如：`fighter1_id`和`fighter2_id`。

就表格中的长文本而言，通常`nvarchar(max)`是推荐的。

# objective-c - 如果没有移除其他对象的观察者，KVO 会导致循环

> ID：14484053
> 
> 赞同：1
> 
> 时间：2013-01-23T16:08:41.763
> 
> 标签：objective-c, cocoa, key-value-observing, nstextfield

我在几个 NSTextFields 中添加了观察者来监控每个文本字段的变化。每个文本字段的键在 Interface Builder 中配置`Bindings -> Value -> Model Key Path`。当一个文本字段中的数字更改时，其他文本字段会自动更新其值。由于每个文本字段都添加了一个观察者，因此我必须删除其他观察者以避免导致应用程序崩溃的循环。删除观察者后，我必须将它们添加回其他文本字段，以便可以监视它们以供用户输入。我的方法运行良好，但我可以看到如果添加了很多观察者，这会变得很麻烦。

有没有办法将其简化到我不必根据用户的输入添加和删除观察者的地方？

```
#import "Converter.h"

@interface Converter ()

@property double kilometer, mile, foot;

@end

@implementation Converter

- (void)awakeFromNib {
    [self addObserver:self forKeyPath:@"kilometer" options:0 context:nil];
    [self addObserver:self forKeyPath:@"mile" options:0 context:nil];
    [self addObserver:self forKeyPath:@"foot" options:0 context:nil];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {

    if ([keyPath isEqualToString:@"kilometer"]) {
        [self removeObserver:self forKeyPath:@"mile"];
        [self removeObserver:self forKeyPath:@"foot"];

        NSLog(@"kilometers");

        [self setMile: [self kilometer] * 0.62137119 ];
        [self setFoot: [self kilometer] * 3280.8399 ];

        [self addObserver:self forKeyPath:@"mile" options:0 context:nil];
        [self addObserver:self forKeyPath:@"foot" options:0 context:nil];
    }

    if ([keyPath isEqualToString:@"mile"]) {
        [self removeObserver:self forKeyPath:@"kilometer"];
        [self removeObserver:self forKeyPath:@"foot"];

        NSLog(@"miles");

        [self setKilometer: [self mile] * 1.609344 ];
        [self setFoot: [self mile] * 5280 ];

        [self addObserver:self forKeyPath:@"kilometer" options:0 context:nil];
        [self addObserver:self forKeyPath:@"foot" options:0 context:nil];
    }

    if ([keyPath isEqualToString:@"foot"]) {
        [self removeObserver:self forKeyPath:@"kilometer"];
        [self removeObserver:self forKeyPath:@"mile"];

        NSLog(@"feet");

        [self setKilometer: [self foot] * 0.0003048 ];
        [self setMile: [self foot] * 0.00018939394 ];

        [self addObserver:self forKeyPath:@"kilometer" options:0 context:nil];
        [self addObserver:self forKeyPath:@"mile" options:0 context:nil];
    }
}

@end 
```

这是用户界面的屏幕截图： ![单位转换器屏幕截图](../Images/87250876ab15d6f31a2318de69f09e5a.png)

为了帮助澄清代码正在做什么（或假设正在做什么）：

用户想要将英尺转换为公里和英里，因此他在英尺文本字段中输入了一个值。使用适当的转换因子。

用户想要将公里转换为英里和英尺，因此他在公里字段中输入了一个值。使用了一组不同的转换因子。

ETC...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:34:23.210

通过自定义 setter 方法并实现`+ (BOOL)automaticallyNotifiesObserversForKey:`，您可以以嵌套方式手动更新这些属性的通知。

以下代码经过测试可以正常工作。（请注意，我没有使用您的系数和属性名称）。

```
#define BEGIN_UPDATE [self willChangeValueForKey:@"m"];\
    [self willChangeValueForKey:@"km"];\
    [self willChangeValueForKey:@"f"];

#define END_UPDATE [self didChangeValueForKey:@"f"];\
    [self didChangeValueForKey:@"km"];\
    [self didChangeValueForKey:@"m"];

+ (BOOL)automaticallyNotifiesObserversForKey:(NSString *)key {
    if ([key isEqualToString:@"f"]||[key isEqualToString:@"km"]||[key isEqualToString:@"m"]) {
        return NO;
    }
    return [super automaticallyNotifiesObserversForKey:key];
}

- (void)setF:(float)f {
    BEGIN_UPDATE
    _m = 0.5*f;
    _km = 0.1*f;
    _f = f;
    END_UPDATE
}

- (void)setKm:(float)km {
    BEGIN_UPDATE
    _km = km;
    _f = 10*km;
    _m = 5*km;
    END_UPDATE
}

- (void)setM:(float)m {
    BEGIN_UPDATE
    _m = m;
    _km = 0.2*m;
    _f = 2*m;
    END_UPDATE
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T18:58:02.293

假设，[正如我之前建议的那样](https://stackoverflow.com/a/13190202/1052673)，您已将各种属性设置为*连续*`NSTextFields`绑定到各种属性（公里、英里和英尺），一种方法是**使用单个支持属性**，比如英尺，并让所有其他属性影响这个：

 ***```
NSString * const KeyFeet = @"feet";
NSString * const KeyKilometers = @"kilometers";
NSString * const KeyMiles = @"miles";

+ (NSSet *)keyPathsForValuesAffectingKilometers
{
    return [NSSet setWithObject:KeyFeet];
}

static const double kilometerToFeet = 3280.84;
- (void)setKilometers:(double)kilometers
{
    self.feet = kilometerToFeet * kilometers;
}

static const double feetToKilometers = 0.0003048;
- (double)kilometers
{
    return feetToKilometers * self.feet;
}

+ (NSSet *)keyPathsForValuesAffectingMiles
{
    return [NSSet setWithObject:KeyFeet];
}

static const double milesToFeet = 5280;
- (void)setMiles:(double)miles
{
    self.feet = milesToFeet * miles;
}

static const double feetToMiles = 0.000189394;
- (double)miles
{
    return feetToMiles * self.feet;
} 
```

`-setNilValueForKey:`如果用户清除文本字段，您还需要实施：

```
- (void)setNilValueForKey:(NSString *)key
{
    if ([key isEqualToString:KeyFeet]) {
        self.feet = 0.0;
    } else if ([key isEqualToString:KeyKilometers]) {
        self.kilometers = 0.0;
    } else if ([key isEqualToString:KeyMiles]) {
        self.miles = 0.0;
    } else {
        [super setNilValueForKey:key];
    }
} 
```

**注意**`self`：在这种情况下没有理由使用 KVO 。

* * *

为了获得更高的精度，可以使用多个支持属性：

```
@property (nonatomic) double primitiveKilometers;
@property (nonatomic) double primitiveMiles;
@property (nonatomic) double primitiveFeet; 
```

每当设置任何绑定属性（`kilometers`、`miles`或`feet`）时，都会设置所有这些属性。每个绑定属性都有其原始版本作为影响其值的关键路径。绑定的属性访问器本身将简单地返回它们的原始对应物。

```
NSString * const KeyPrimitiveFeet = @"primitiveFeet";
NSString * const KeyPrimitiveKilometers = @"primitiveKilometers";
NSString * const KeyPrimitiveMiles = @"primitiveMiles";

+ (NSSet *)keyPathsForValuesAffectingFeet
{
    return [NSSet setWithObject:KeyPrimitiveFeet];
}
static const double feetToMiles = 0.000189394;
static const double feetToKilometers = 0.0003048;
- (void)setFeet:(double)feet
{
    _primitiveFeet = feet;
    self.primitiveKilometers = feetToKilometers * feet;
    self.primitiveMiles = feetToMiles * feet;
}
- (double)feet
{
    return self.primitiveFeet;
}

+ (NSSet *)keyPathsForValuesAffectingKilometers
{
    return [NSSet setWithObject:KeyPrimitiveKilometers];
}
static const double kilometersToFeet = 3280.84;
static const double kilometersToMiles = 0.621371;
- (void)setKilometers:(double)kilometers
{
    _primitiveKilometers = kilometers;
    self.primitiveFeet = kilometersToFeet * kilometers;
    self.primitiveMiles = kilometersToMiles * kilometers;
}

- (double)kilometers
{
    return self.primitiveKilometers;
}

+ (NSSet *)keyPathsForValuesAffectingMiles
{
    return [NSSet setWithObject:KeyPrimitiveMiles];
}
static const double milesToFeet = 5280;
static const double milesToKilometers = 1.60934;
- (void)setMiles:(double)miles
{
    _primitiveMiles = miles;
    self.primitiveFeet = milesToFeet * miles;
    self.primitiveKilometers = milesToKilometers * miles;
}
- (double)miles
{
    return self.primitiveMiles;
} 
```***

# ubuntu - 如何在 Ubuntu 12.04.1 上安装 Aptana？

> ID：14484057
> 
> 赞同：6
> 
> 时间：2013-01-23T16:08:54.050
> 
> 标签：ubuntu, aptana, ubuntu-12.04, aptana3

全部，

[关于如何在 Ubuntu 12.04 上安装 Aptana Studio 3 的说明（只有我能找到的）在 12.04.1 中似乎失败了。](http://www.samclarke.com/2012/04/how-to-install-aptana-studio-3-on-ubuntu-12-04-lts-precise-pangolin/)

也就是说，依赖项的安装工作，Aptana 将从下载文件夹中正常运行......

问题是：

1) 快捷方式未正确安装 - 是否有“真正”安装了适用于 Ubuntu 的 Aptana Studio 3，还是必须从具有上述快捷方式的文件文件夹中运行？

2) 当您再次启动应用程序时，不会保存任何首选项或工作区选项...

3）通常这似乎没有与Ubuntu一起安装......

想法？

谢谢！！！

-m

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-08T10:08:21.113

这个问题有点晚了，但是对于那里的任何 linux 新手来说，这对我有很大帮助：

[在 Ubuntu 上安装 Aptana Studio 3（文本） 在 Ubuntu](http://browse-tutorials.com/tutorial/installing-aptana-3-ubuntu)
[上安装 Aptana Studio 3（视频）](http://www.youtube.com/watch?v=H5oNEhV0Dgg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T20:31:50.393

如果您更喜欢指南而不是视频，您可以在安装时自行打印和阅读，这是适合您的链接。

[https://skydrive.live.com/redir.aspx?resid=571E71A8EF645585!358](https://skydrive.live.com/redir.aspx?resid=571E71A8EF645585!358)

这是当前 ubuntu 版本的指南，如果您在 ubuntu install libwebkitgtk-1.0-0 上的起始页遇到问题，请不要介绍一个步骤

sudo apt-get install libwebkitgtk-1.0-0

此处链接的指南以 eclipse 插件版本为特色，也涵盖了 eclipse 问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T21:03:00.887

刚刚在这里找到更新的说明：

[http://www.samclarke.com/2012/12/how-to-install-aptana-studio-3-3-1-in-ubuntu-12-10-quantal-quetzal/](http://www.samclarke.com/2012/12/how-to-install-aptana-studio-3-3-1-in-ubuntu-12-10-quantal-quetzal/)

它似乎工作得很好！

我会做更多的修补...

-mb

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T20:12:20.517

在 Ubuntu 中的“真正”安装包括将提到的文件夹放在 /usr/local/bin 下，并将 .desktop 文件放在 /usr/local/share/applications 中（在 /usr/share/applications 下查看示例）。你可以试试。

您还可以搜索具有 Aptana 软件包的 ppa（谷歌“ppa Aptana 12.04.1”）或安装 Eclipse 并在 Eclipse 的“帮助->安装软件”菜单中查找 Aptana（可能是“更新”而不是“安装软件” “？）。

# c# - Adwords的授权方式

> ID：14484058
> 
> 赞同：0
> 
> 时间：2013-01-23T16:08:56.003
> 
> 标签：c#, google-ads-api

我刚刚回到与 Adwords API 集成的工作，并意识到它必须升级（从 v201109 开始）。

这以前是一个原型应用程序，现在计划投入使用，我注意到在身份验证方面从 v201109 到 v201209 有了很大的飞跃。

[通过阅读 Takeshi在这里](https://groups.google.com/d/msg/adwords-api/Q4RlHPGNLzU/ZWoc38H05gsJ)的回复，很明显沙盒的整个概念现在已经被逐步淘汰，我们现在在拥有一个测试帐户的基础上工作。

最初在我的原型上，我只是通过一个测试帐户使用 ClientLogin 作为 AuthorizationMethod。但是，通过新的身份验证，我意识到我实际上必须将我们实际的实时 MCC 帐户与[此处](https://developers.google.com/adwords/api/docs/test-accounts)所述的测试帐户一起使用。

一切都好，我已经创建了帐户，并已请求将其用作测试帐户的权限。但是使用实时凭据

```
<add key="AuthorizationMethod" value="ClientLogin" />
<add key="Email" value="xxx"/>
<add key="Password" value="xxxxx"/> 
```

不是一个选择... :-(

然后我考虑请求一个 OAuth 密钥对，以便在我的应用程序中使用它们。我发现的所有关于获得其中一个的文档似乎有点粗糙，所以我不确定如何在没有实际提出我的应用程序请求的情况下获得其中一个。理想情况下，我想去某个地方，生成它，然后在我的配置文件中使用它。

```
<add key="AuthorizationMethod" value="OAuth" />
<add key="OAuthConsumerKey" value="INSERT_YOUR_OAUTH_CONSUMER_KEY_HERE" />
<add key="OAuthConsumerSecret" value="INSERT_YOUR_OAUTH_CONSUMER_SECRET_HERE" /> 
```

这甚至可能吗？如果是这样，我在哪里可以生成 OAuth 密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:46:58.897

事实证明您仍然可以使用 ClientLogin，但它已被指定弃用，这意味着 Google 仍将在未来 3 年左右支持它。

这是 Anash（AdWords API 顾问）和我在 Google Adwords API 官方论坛上的对话链接。

[https://groups.google.com/d/topic/adwords-api/C-giDgpvF_I/discussion](https://groups.google.com/d/topic/adwords-api/C-giDgpvF_I/discussion)

# postgresql - 为什么“setval()”会因“relation ...不存在”而失败？

> ID：14484059
> 
> 赞同：6
> 
> 时间：2013-01-23T16:08:58.260
> 
> 标签：postgresql

如果您尝试像这样设置序列号：

```
SELECT setval('table_ID_seq', (SELECT max("ID") + 1 FROM table)); 
```

您可能会遇到以下错误：

```
ERROR:  relation "table_ID_seq" does not exist
LINE 1: SELECT setval('table_ID_seq', (SELECT max("ID") + 1 FROM t...
                      ^

********** Error **********

ERROR: relation "table_id_seq" does not exist
SQL Status:42P01 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-23T16:08:58.260

问题是 PostgreSQL 将规范化标识符名称，除非它们被放在双引号中。

但是，这不起作用：

```
SELECT setval("table_ID_seq", (SELECT max("ID") + 1 FROM table)); 
```

相反，您必须在双引号文本周围加上单引号：

```
SELECT setval('"table_ID_seq"', (SELECT max("ID") + 1 FROM table)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-21T21:53:02.590

使用所有先前的提示，错误仍然存​​在。我确定需要执行从数值到整数的转换。

有必要强制返回整数。

```
select setval ('YOUR_ID_SEQ', (select cast (max (YOUR_COLUMN) as integer) from YOUR_TABLE)); 
```

# jsf - 如何将参数从一页转发到另一页？

> ID：14484064
> 
> 赞同：0
> 
> 时间：2013-01-23T16:09:07.813
> 
> 标签：jsf, jsf-2

在我的 page1.xhtml

```
<h:form>
    <h:inputText value="#{page_one.name}" />
    <h:commandButton action="#{page_one.onSubmit}" value="Submit" />
</h:form> 
```

PageOneBean.class

```
@ManagedBean(name="page_one")
@RequestScoped
public class PageOneBean {
    private String name;
    public String onSubmit(){
    return "/page2.xhtml";
    }
} 
```

page2.xhtml

```
<h:form>
    <h:commandButton action="#{page_two.onSubmit}" value="Submit" />
</h:form> 
```

PageTwoBean.class

```
@ManagedBean(name = "page_two")
@RequestScoped
public class PageTwoBean {
private String name;
public String onSubmit() {
    System.out.println("name" + name);
    return null;
}
} 
```

当我单击 page_two.onSubmit 按钮时，如何在 pageTwoBean 中获取 pageOneBean.name？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:16:06.183

Page2.xhtml

```
<h:form>
    <f:metadata>
         <f:viewParam name="name" value="#{page_two.name}"/>            
    </f:metadata>

    <h:commandButton action="#{page_two.onSubmit}" value="Submit" />
</h:form> 
```

豆1：

```
public class PageOneBean {
private String name;
public String onSubmit(){
    return "/page2.xhtml?name=something";
}
public void setName(String name){ this.name = name;}
public String getName(){ return name; }
} 
```

试试看，看看效果如何。

# android - 尝试使用 MediaPlayer 播放游戏背景音乐时出现空指针异常

> ID：14484070
> 
> 赞同：0
> 
> 时间：2013-01-23T16:09:16.937
> 
> 标签：android, android-mediaplayer

我试图复制：[http://stackoverflow.com/questions/11490236/android-comprehensive-failproof-music-service-across-multiple-activites][1] 但是，我得到一个空指针异常：StartupActivity .getService().musicStart(); 任何想法为什么这可能是空的？这是我的（删节的）主java版本：

```
public class homescreenfruit extends Activity {
// bounded service
private static MusicService mBoundService;

// whetere service is bounded or not
private boolean mIsBound;

SharedPreferences myPrefs;
SharedPreferences.Editor prefsEditor;
boolean snd1 = true;
boolean snd2 = true;
boolean snd3 = true;
Handler myHandler = new Handler();
// int lastsongplayed=1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.homescreen);
    doBindService();
    myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
    final SharedPreferences.Editor prefsEditor = myPrefs.edit();

        SoundManager.getInstance();
        SoundManager.initSounds(this);
        SoundManager.loadSounds();

        { // audio settings setup and run
            snd3 = myPrefs.getBoolean("snd3return", true);

        // ********************FIALS BELOW*********************
        if (snd3==true){
            homescreenfruit.getService().musicStart(); //  FAILS HERE WITH NPE
             }

    ImageButton ibs3 = (ImageButton) findViewById(R.id.sound3); // this is the music
    ibs3.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
             Log.e("sound3 start : ", " yep");
            ImageButton ibs3 = (ImageButton) findViewById(R.id.sound3);
            if (snd3==true){
                homescreenfruit.getService().musicStop();
                prefsEditor.putBoolean("snd3return", false); snd3=false;
                ibs3.setBackgroundResource(R.drawable.noteoff);
            }
            else if (snd3==false){
                prefsEditor.putBoolean("snd3return", true); snd3=true;
                ibs3.setBackgroundResource(R.drawable.noteon);
                homescreenfruit.getService().musicStart();
                // restart playing the music - add programming
                homescreenfruit.getService().musicStart();
            }
            prefsEditor.commit();  
        }
    });
final Runnable playmusic = new Runnable() // 
{
    public void run() {
         if (snd3==true){
             homescreenfruit.getService().musicStart();}
     }
};

public void onBackPressed() {
    if (snd3=true)
    SoundManager.playSound(96, 1);
    Log.e("onBack pressed", "onBack pressed");
    finish();
}

public void onPause() {
    super.onPause();
    if (snd3=true)
    {
        homescreenfruit.getService().musicPause();
    }
Log.e("onPause", "onPause");
}

public void onStop() {
    super.onStop();

    if (snd3=true){
    homescreenfruit.getService().musicStop();
    }
}

public void onResume() {
    super.onResume();
    if (snd3==true){

        homescreenfruit.getService().musicStart();
    }
}

public void onDestroy() {
    super.onDestroy();
    doUnbindService();
}

private final ServiceConnection mServiceConnection = new ServiceConnection() {

    // removed override
    public void onServiceConnected(ComponentName className, IBinder service) {
        setService(((MusicService.LocalBinder) service).getService());
    }

    // removed override
    public void onServiceDisconnected(ComponentName className) {
        setService(null);
    }
};

private void doBindService() {
    Intent service = new Intent(getBaseContext(), MusicService.class);
    // start service and bound it
    startService(service);
    bindService(new Intent(this, MusicService.class), mServiceConnection, Context.BIND_AUTO_CREATE);
    mIsBound = true;
}

private void doUnbindService() {
    if (mIsBound) {
        // Detach existing connection.
        unbindService(mServiceConnection);
        mIsBound = false;
    }
}

public static MusicService getService() {
    return mBoundService;
}

private static void setService(MusicService mBoundService) {
    homescreenfruit.mBoundService = mBoundService;
}

} 
```

我已经按照链接实现了 CarefulMediaPlayer 和 Music Service。那是对的吗？

# php - 如何通过 PHP 正确发送 PDF 文件？

> ID：14484072
> 
> 赞同：2
> 
> 时间：2013-01-23T16:09:23.977
> 
> 标签：php, pdf, http-headers, mime-types

我正在尝试发送 PDF 文件。这是正在执行的代码：

```
$file_path = '/path/to/file/filename.pdf'
$file_name = 'filename.pdf'

header("X-Sendfile: $file_path");
header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename='$filename'");
readfile($file_path): 
```

每当我直接下载文件时，都很好。但是，当我尝试通过此脚本下载文件时，下载的文件无法打开。我的 pdf 阅读器告诉我它无法打开“text/plain”类型的文件。我也尝试将 设置`Content-type`为`application/pdf`，但我得到了同样的错误。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:15:51.790

你试过这个吗？

```
$file = '/path/to/file/filename.pdf';
header('Content-Disposition: attachment; filename="'. basename($file) . '"');
header('Content-Length: ' . filesize($file));
readfile($file); 
```

使用[readfile()](http://php.net/manual/en/function.readfile.php)还可以消除您可能遇到的任何内存问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:12:28.340

试试下面的代码。

```
header("Content-Type: application/octet-stream");

$file = "filename.pdf";
header("Content-Disposition: attachment; filename=" . urlencode($file));   
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-Description: File Transfer");            
header("Content-Length: " . filesize($file));
flush(); // this doesn't really matter.
$fp = fopen($file, "r");
while (!feof($fp))
{
    echo fread($fp, 65536);
    flush(); // this is essential for large downloads
} 
fclose($fp) 
```

如果上述方法对您没有帮助，请尝试以下方法

```
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header("Content-Type: application/force-download");
header('Content-Disposition: attachment; filename=' . urlencode(basename($file)));
// header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file);
exit; 
```

不要`$file_path`按要求设置文件路径。

# iphone - 尝试在 SQLite (iOS) 中打开数据库时出错

> ID：14484077
> 
> 赞同：0
> 
> 时间：2013-01-23T16:09:30.990
> 
> 标签：iphone, ios, objective-c, sqlite

我正在制作一个带有嵌入式 SQLite 数据库的 iOS 应用程序。所以我在 SQLite 管理员中创建了我的数据库并将其拖到我的 Xcode 项目中，就像教程中所说的那样。当我尝试打开我的数据库时，我收到此错误：“内存不足”。不知道是 SQLite 错误还是什么，但我的文件非常小，不会出现内存问题。

这是我初始化数据库的代码：

```
- (id)initWithPath:(NSString *)path {
if (self = [super init]) {
    BOOL success;
    NSError *error;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *dbPath = [documentsDirectory stringByAppendingPathComponent:@"SoundLib_DB.sqlite"];

    if ([fileManager fileExistsAtPath:dbPath] == NO) {
        NSString *resourcePath = [[NSBundle mainBundle] pathForResource:@"SoundLib_DB" ofType:@"sqlite"];
        [fileManager copyItemAtPath:resourcePath toPath:dbPath error:&error];
    }

    success = [fileManager fileExistsAtPath:dbPath];
    if(!success)
    {
        NSLog(@"Cannot locate database file '%@'.", dbPath);
    }
    sqlite3 *dbConnection;
//Here is when I get the error, at trying to open the DB
    if (sqlite3_open_v2("SoundLib", &dbConnection, SQLITE_OPEN_READWRITE, NULL) != SQLITE_OK) {
        NSLog(@"[SQLITE] Unable to open database!");
        NSLog(@"%s Prepare failure '%s' (%1d)", __FUNCTION__, sqlite3_errmsg(database), sqlite3_errcode(database));
        return nil;
    }
    database = dbConnection;
}
return self; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:21:22.997

错误可能是因为您需要将 databasepath 作为`UTF8String`. 我看到你正在传递“SoundLib”。你不能那样直接通过。

```
 if (sqlite3_open([dbPath UTF8String], &databaseHandle) == SQLITE_OK)
{
   //dbPath is your full database path you getting above
} 
```

PS 也有`dbpath`作为`const char`

```
const char *dbpath 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T16:25:21.410

更改您的打开过程，使其看起来像这样......它适用于我;）我想你的主要错误是你忘记了 UTF8String ......

```
sqlite3 *database;
int result = sqlite3_open([dbPath UTF8String], &database);
if (result != SQLITE_OK) {
    sqlite3_close(database);
    NSLog(@"Error opening databse");
    return;
} 
```

# c - 交换列表中的元素

> ID：14484078
> 
> 赞同：1
> 
> 时间：2013-01-23T16:09:36.613
> 
> 标签：c

```
#include <stdio.h>
#include <conio.h>

int main()
{
   int array[100], num1, c, n, num2;

   printf("Enter number of elements in array\n");
   scanf("%d", &n);

   printf("Enter %d elements\n", n);

   for ( c = 0 ; c < n ; c++ )
      scanf("%d", &array[c]);

   printf("Enter the number to swap\n");
   scanf("%d", &num1);

   printf("Enter the number to swap with\n");
   scanf("%d", &num2);

    printf("%d is swap place with %d.\n", num1, num2);

    for (c = 0; c < n; c++)
   {
   if (array[c] == num1)
   {
    array[c] = num2;
   }
   else if (array[c] == num2)
   {
    array[c] = num1;
   }
  }

  printf("The new output will be\n");

        getch();       
        return 0;
 } 
```

嗨，我正在执行我的代码的一半，但我不知道如何继续。我正在编写代码以交换列表中的数字。有人可以帮帮我吗？

输入数组中的元素个数：5 输入 5 个元素 2 4 6 8 0 输入第一个要交换的数字：8 输入要交换的第二个数字：2 8 是与 2 交换的位置。输出将是：8 4 6 2 0

我如何输入-1来结束程序？示例：输入数组中的元素数：-1 输出：结束程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:13:00.613

只要没有进一步的说明，您只需遍历您的数组，并更改每次出现的`8`to `2`，反之亦然。

```
int i;

for (i = 0; i < n; i++)
{
  if (array[i] == num1)
  {
    array[i] = num2;
  }
  else if (array[i] == num2)
  {
    array[i] = num1;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:13:48.903

您需要遍历数组以找到第一个和第二个数字的位置并交换它们

# activemq - mule sftp存档不继续流动

> ID：14484079
> 
> 赞同：0
> 
> 时间：2013-01-23T16:09:36.970
> 
> 标签：activemq, mule

我对 Mule 3 和正在读取的文件有重大问题，稍后应该将其放在 ActiveMQ 上的一些标准队列中。

基本上它是一个非常简单的服务，最初是在入站时开始的

该文件从 SFTP 区域正确读取，并在读取应用程序的 mule 日志中声明该文件已写入指定的 archiveDir..

在此之后，它沉默了，没有其他任何事情发生......文件只是放在archiveDir中，ActiveMQ或Mule3都没有给出任何迹象表明出现问题......

队列名称等都是正确的。

基本上相同的环境在第二台服务器上运行，没有干扰..

是否有任何众所周知的问题可能使 mule 无法继续处理将文件放入队列的处理？

提前谢谢！

# sql - 从具有许多外键的表中删除

> ID：14484081
> 
> 赞同：2
> 
> 时间：2013-01-23T16:09:47.517
> 
> 标签：sql, sql-server-2008, tsql, cascading-deletes

目前我正在一个具有树状结构的数据库中工作。基本上有一个顶级表，大约有 10 个表在该表上有一个外键。这些表中的每一个都有另外 10 个具有外键约束的表。现在我的目标是从主表中删除一些记录，并删除子、孙等，但当然外键使这成为一项艰巨的任务。

我进行了一些搜索，并在使用级联删除时遇到了检查这个[问题](https://stackoverflow.com/questions/8251146/delete-data-with-foreign-key-in-sql-server-table)，我想如果我只处理几个表，这将起到作用。但是，在我目前的环境中，一张一张地改变 100 多张桌子仍然不是一件愉快的事。

因此，我问是否有一种简单的方法可以在涉及许多表时删除具有外键的值。

由于我对相对较小的数据库有一定的控制权，因此查询效率和值被其他人删除的风险并不是真正值得关注的问题。因此，对所有表应用级联删除可能很容易，但我也对完全不同的解决方案持开放态度（在 microsoft server studio 2008 中使用 T-SQL）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:27:32.593

你看过这个吗？这家伙正在根据数据库中的外键关系自动生成删除语句：

[从 SQL 2008 中的外键关系生成删除语句？](https://stackoverflow.com/questions/485581/generate-delete-statement-from-foreign-key-relationships-in-sql-2008)

我个人不是它的忠实粉丝，但它值得尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:14:55.620

我认为以不同的方式执行此类操作的最佳方法是使用逻辑删除，并使用名为“状态”的列来控制是否仍要在程序逻辑下考虑该字段。只能在顶级表上创建状态列。在 SQL 语句中，您插入“where status = 1”或类似的内容。

希望这会有所帮助，因为这是解决问题的完全不同的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T16:27:19.400

删除级联将是“主”表的一个很好的解决方案。

为避免手动更改所有表，您可以使用脚本，如在[此处](https://stackoverflow.com/a/871124)找到的稍作更改（最后一行，`<yourTable>`按您的表名称更改）。

```
select
  DropStmt = 'ALTER TABLE [' + ForeignKeys.ForeignTableSchema + 
      '].[' + ForeignKeys.ForeignTableName + 
      '] DROP CONSTRAINT [' + ForeignKeys.ForeignKeyName + ']; '
,  CreateStmt = 'ALTER TABLE [' + ForeignKeys.ForeignTableSchema + 
      '].[' + ForeignKeys.ForeignTableName + 
      '] WITH CHECK ADD CONSTRAINT [' +  ForeignKeys.ForeignKeyName + 
      '] FOREIGN KEY([' + ForeignKeys.ForeignTableColumn + 
      ']) REFERENCES [' + schema_name(sys.objects.schema_id) + '].[' +
  sys.objects.[name] + ']([' +
  sys.columns.[name] + ']) ON DELETE CASCADE; '
 from sys.objects
  inner join sys.columns
    on (sys.columns.[object_id] = sys.objects.[object_id])
  inner join (
    select sys.foreign_keys.[name] as ForeignKeyName
     ,schema_name(sys.objects.schema_id) as ForeignTableSchema
     ,sys.objects.[name] as ForeignTableName
     ,sys.columns.[name]  as ForeignTableColumn
     ,sys.foreign_keys.referenced_object_id as referenced_object_id
     ,sys.foreign_key_columns.referenced_column_id as referenced_column_id
     from sys.foreign_keys
      inner join sys.foreign_key_columns
        on (sys.foreign_key_columns.constraint_object_id
          = sys.foreign_keys.[object_id])
      inner join sys.objects
        on (sys.objects.[object_id]
          = sys.foreign_keys.parent_object_id)
        inner join sys.columns
          on (sys.columns.[object_id]
            = sys.objects.[object_id])
           and (sys.columns.column_id
            = sys.foreign_key_columns.parent_column_id)
    ) ForeignKeys
    on (ForeignKeys.referenced_object_id = sys.objects.[object_id])
     and (ForeignKeys.referenced_column_id = sys.columns.column_id)
 where (sys.objects.[type] = 'U')
  and (sys.objects.[name]  = '<yourTable>') 
```

您在 Management Studio 查询窗口中复制第一列结果，执行，然后对第二列执行相同操作，瞧，大功告成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T16:29:06.253

Unless you are willing to sacrifice data integrity, utilize the T_SQL CASCADE DELETE option. You can create an "ALTER TABLE PARENT1 ADD FOREIGN KEY" and copy and paste your way to a safe solution.

This will take far less time than developing and testing a programmatic solution, which will not be executed if a delete statement is issued through a third-party program - like Mgmt. Studio.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-23T16:28:44.247

As was stated in the question you referenced you can automatically take care of the deletion through the use of the `ON DELETE CASCADE`.

# c++ - 积分常数和模板参数推导

> ID：14484089
> 
> 赞同：2
> 
> 时间：2013-01-23T16:09:58.657
> 
> 标签：c++, templates, c++11, constexpr, clang++

我想将传递给函数的编译时常量整数捕获为模板类型。未来的目标是推出我自己的（非常有限的）表达式模板，它从非常简单的表达式（编译时间常量 int 和变量的总和）创建表达式，例如：-2*i + 3*k。

我开始很慢，我有以下代码：

```
struct Foo {
  Foo (int i) : i_(i) {}

  int i_;
};

template <int N> int operator*(std::integral_constant<int, N> i, Foo j) {
  return N * j.i_;
}

int main(void) {
  std::integral_constant<int, 2> k;
  int i = k * Foo(3);
  cout << i << endl;

  int j = 2 * Foo(3);
  cout << j << endl;
} 
```

2*Foo(3) 的模板参数推导失败。我已经读过函数没有 constexpr 参数之类的东西。

有没有办法完成我想要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:26:25.723

你可以在没有模板的情况下做到这一点。这个答案或多或少地将@MooingDuck 的建议扩展为具体代码，您可能会发现这些代码更容易理解：

```
#include <type_traits>

using namespace std;

struct Foo {
    constexpr Foo (int i) : i_(i) {}
    int i_;
};

constexpr int operator*(int i, Foo j) {
    return i * j.i_;
}

int main(void) {
    integral_constant<int, 2> k;

    constexpr int i = k * Foo(3);
    static_assert(i == 6, "Error!");

    constexpr int j = 2 * Foo(3);
    static_assert(j == 6, "Error!");
} 
```

# scala - scala 2.10，akka-camel tcp 套接字通信

> ID：14484096
> 
> 赞同：2
> 
> 时间：2013-01-23T16:10:12.830
> 
> 标签：scala, apache-camel, akka

我正在寻找一些简单而简短的示例，如何与 tcp 套接字连接并进行交互（双向）。换句话说，如何编写一个*scala 2.10 应用程序*（使用*akka-camel*或*netty*库）与一个 tcp 进程（套接字）进行通信。

我在 Internet 上找到了很多文献，但一切都很旧（正在寻找 scala 2.10）和/或已弃用。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:36:35.207

嗯，我正在寻找这样的东西：

**1\. 服务器：**

```
import akka.actor._
import akka.camel.{ Consumer, CamelMessage }

class Ser extends Consumer {
  def endpointUri = "mina2:tcp://localhost:9002"
  def receive = {
    case message: CamelMessage => {
     //log
     println("looging, question:" + message)
     sender ! "server response to request: " + message.bodyAs[String] + ", is NO"
     }
   case _ => println("I got something else!??!!")
  }
}

object server extends App {

val system = ActorSystem("some")
val spust = system.actorOf(Props[Ser])
} 
```

**2\. 客户：**

```
 import akka.actor._
 import akka.camel._
 import akka.pattern.ask
 import scala.concurrent.duration._
 import akka.util.Timeout
 import scala.concurrent.Await

 class Producer1 extends Actor with Producer {
   def endpointUri = "mina2:tcp://localhost:9002"
  }

 object Client extends App {

 implicit val timeout = Timeout(10 seconds)
 val system2 = ActorSystem("some-system")
 val producer = system2.actorOf(Props[Producer1])
 val future = producer.ask("Hello, can I go to cinema?")

 val result = Await.result(future, timeout.duration)
 println("Is future over?="+future.isCompleted+";;result="+result)

 println("Ende!!!")
 system2.shutdown
 println("system2 ended:"+system2.isTerminated) 
```

我知道这是[http://doc.akka.io/docs/akka/2.1.0/scala/camel.html](http://doc.akka.io/docs/akka/2.1.0/scala/camel.html)中写的所有内容并进行了详细描述。但是，如果您是新手，则需要通读几遍才能构建非常简单的客户端-服务器应用程序。我认为某种“动机示例”会非常受欢迎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T08:06:55.613

我假设您已经检查了 Akka 文档？[http://doc.akka.io/docs/akka/2.1.0/scala/camel.html](http://doc.akka.io/docs/akka/2.1.0/scala/camel.html)

在 Akka 2.1.0 中，他们改进了 akka-camel 模块，因此它完全是最新的（之前有点过时了）。

还有一个骆驼-akka 视频演示，涵盖了一个真实的用例：[http ://www.davsclaus.com/2012/04/great-akka-and-camel-presentation-video.html](http://www.davsclaus.com/2012/04/great-akka-and-camel-presentation-video.html)

# c# - MS-Access 的多个活动结果集的 C# 替代方案

> ID：14484102
> 
> 赞同：0
> 
> 时间：2013-01-23T16:10:26.283
> 
> 标签：c#, sql, sql-server, ms-access

我想知道Microsoft 的 Access 数据库是否存在多个活动结果集[MARS ？](http://msdn.microsoft.com/en-us/library/ms131686.aspx)我知道这适用于 SQL Server。我尝试将它与 Access 一起使用，但它对我不起作用。我想知道如何将 MARS 与 Access 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:20:00.227

简而言之，Microsoft Access 不支持多个活动结果集 (MARS)。ODBC 提供程序不支持它，如果您从性能的角度考虑 MARS 实际为您提供的功能，那么为什么不支持的原因应该很明显。

如果您认为 MARS 存在的最重要原因是您是否在 SQL 服务器上执行了存储过程，这些过程会产生多个结果集。如果您有这样的查询，您需要能够以某种方式访问​​这些多个结果集。

但是在 Access 中没有存储过程之类的东西。如果您有多个查询，您可以分别执行每个查询并获取每个查询的结果集。因此，不需要火星。

**笔记**

根据评论，这是一个如何同时打开两个数据读取器的示例：

```
 using(var connection1 = new OdbcConnection("your connection string here"))
 {
   connection1.Open();
   using(var connection2 = new OdbcConnection("your connection string here"))
   {
     connection2.Open();

     using(var cmd1 = connection1.CreateCommand())
     {
       cmd1.CommandText = "YOU FIRST QUERY HERE";

       using(var dataReader1 = cmd1.ExecuteReader())
       {
          while(dataReader1.Read())
          {
             // keep reading data from dataReader1 / connection 1
             //  .. at some point you may need to execute a second query

             using(var cmd2 = connection2.CreateCommand())
             {
                cmd2.CommandText = "YOUR SECOND QUERY HERE";

                // you can now execute the second query here
                using(var dataReader2 = cmd2.ExecuteReader())
                {
                   while(dataReader2.Read())
                   {

                   }
                }
             }
          } 
       }
     }
     connection2.Close();
   }
   connection1.Close();
 } 
```

# dynamics-ax-2012 - 表关系消失

> ID：14484107
> 
> 赞同：1
> 
> 时间：2013-01-23T16:10:42.617
> 
> 标签：dynamics-ax-2012

尝试创建具有关系的自定义表时，我在 AX 中反复出现问题。简而言之，关系中的字段定义不断“消失”。

我有 6 个自定义表，它们之间总共有 10 个左右的关系。每次编译时，我都会收到至少一个错误消息“由于缺少字段，关系不完整”。我删除并重新添加关系，只是稍后再次出错。

我尝试了数据库同步和增量 CIL 构建。有没有人见过这个？关于如何修复它的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:46:51.777

嗯，我对你的问题很满意！！这证实了我真的不是世界上唯一一个有这个问题的人。

让我告诉您我已经尝试过的内容。（请同时检查我发布的与之相关的问题[）](https://stackoverflow.com/questions/14348641/xpo-import-relation-is-incomplete-due-to-missing-fields)

我们在构建过程中遇到了同样的问题。在那里，一个 XPO 被导入到 Ax 中，并且一半的表缺少关系中的字段。再次导入同一个 XPO 可以解决大部分缺失字段的问题，但不能解决 XPO 导入出现的所有问题。

我已经联系了一些我从微软遇到的人，他们正在看这个。此外，我们记录了一个事件，以便我们也遵循 Microsoft 的官方事件记录流程。

我将尝试使用我从 Microsoft 获得的回复来更新这篇文章。

# ios - NSDictionary 中的 SBJSON Float 写入 NSString 不正确

> ID：14484118
> 
> 赞同：0
> 
> 时间：2013-01-23T16:11:15.160
> 
> 标签：ios, nsstring, nsdictionary, sbjson

我在一个项目中使用 SBJSON，我正在尝试从字典中构建一个 json 字符串。

这是发生了什么，我将浮点数作为 NSNumbers 放入字典中：

```
NSDictionary* tempdic = [[NSDictionary alloc] init];
tempdic = [NSDictionary dictionaryWithObjectsAndKeys:productId, @"productId", [NSNumber numberWithFloat:quantity], @"aantal", price, @"price" , nil];
        [orders addObject:tempdic];
NSDictionary* json = [NSDictionary dictionaryWithObjectsAndKeys: orders, @"order", message, @"message", [NSNumber numberWithFloat:orderprice], @"totalPrice",dueDate,@"dueDate", nil]; 
```

然后最后把它写成一个 json 字符串，我尝试了这三个。

1)

```
NSData* jsonData = [writer dataWithObject:json];
NSString* jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]; 
```

2)

```
NSString* jsonString = [json JSONRepresentation]; 
```

3)

```
NSString* jsonString = [writer stringWithObject:json]; 
```

这些中的每一个都将 0.95 更改为 0.95000000000000034355 或更糟糕的 0.9499999999999999992344 或类似的东西。

为什么会这样？我怎样才能防止这种情况？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:19:00.127

这是浮点值的基本问题。您不能存储不能用 的幂之和表示的值`2`。从而产生与您的浮点数的近似值。

eg`1.25`可以很容易地表示为`2`
ie 的幂的总和，`1*2^0 +1*2^-2`但如果你要表示`1.33`为的幂的总和，`2`那么结果将是`1*2^0 + 1*2^-2 + 1*2^-4 + 1*2^-8 + 1*2^-9 ....`

只需阅读wiki 上的可[**表示数字、转换和舍入即可。**](http://en.wikipedia.org/wiki/Floating_point#Representable_numbers.2C_conversion_and_rounding)[**您可以使用在线工具**](http://www.binaryconvert.com)
检查您的浮点表示。[](http://www.binaryconvert.com)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:00:44.567

这是浮点数的经典问题。但是，您可以使用`NSDecimalNumber`而不是`NSNumber`获得更高的精度（以较低的数字*范围*为代价）。**

# javascript - 在javascript中将数据添加到本地数组

> ID：14484121
> 
> 赞同：1
> 
> 时间：2013-01-23T16:11:25.470
> 
> 标签：javascript, arrays

一段时间以来，我一直在尝试将数据添加到我的数组中，但它不起作用。我有以下代码：

```
function OBJMesh(file)
{
    this.modelVertex = [];
    this.modelColor = [];
    var that = this;
    var rawFile = new XMLHttpRequest();
    rawFile.open("GET", file, true);
    rawFile.onreadystatechange = function ()
    {

        if(rawFile.readyState == 4)
        {
            if(rawFile.status === 200 || rawFile.status === 0)
            {
                var allText = rawFile.responseText;
                var lines = allText.split("\n");

                for(var i = 0; i < lines.length; i ++)
                {
                    var lineData = lines[i];
                    var lineString = lineData.split(" ");

                    if(lineString[0] === "v")
                    {

                        var x = parseFloat(lineString[1]);
                        var y = parseFloat(lineString[2]);
                        var z = parseFloat(lineString[3]);

                        /*
                        this.modelVertex.push(x);
                        this.modelVertex.push(y);
                        this.modelVertex.push(z);

                        this.modelColor.push(0.0);
                        this.modelColor.push(0.0);
                        this.modelColor.push(0.0);
                        this.modelColor.push(1.0);
                        */

                        that.modelVertex.push(10.0);

                        //document.getElementById("textSection").innerHTML = "testing";
                    }

                }
            }
        }
    }

    rawFile.send();

}

OBJMesh.prototype.getModelVertex = function ()
{
    return this.modelVertex;
};

OBJMesh.prototype.getModelColor = function ()
{
    return this.modelColor;
}; 
```

如果我注释掉`this.modelVertex.push(10.0);`它会通过错误并打印出“测试”。但是如果我取消注释它，它就会卡在那里并且不会打印任何东西。为什么要这样做？我该如何解决它，以便它实际上将给定的数据推送到`this.modelVertex`数组？

非常感谢

编辑：在dystroy告诉我该怎么做之后，我编辑了我的代码，当我尝试打印OBJMesh构造函数中的值时它确实有效（如上所示），但是当我尝试通过在我的主函数中创建对象来做到这一点时（如下所示）它不打印任何东西。

```
var cubeModel;

function main()
{
    cubeModel = new OBJMesh("file:///Users/Danny/Desktop/3DHTMLGame%202/cube.obj");

    document.getElementById("textSection").innerHTML = cubeModel.getModelVertex();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:15:07.837

`this`不是`OBJMesh`回调中的新实例，而是`XMLHttpRequest`.

首先在定义回调之前引用所需的对象：

```
var that = this;
rawFile.onreadystatechange = function () 
```

然后使用它：

```
that.modelVertex.push(10.0); 
```

* * *

回答您编辑中的问题：

您的构造函数包含一个异步请求。这意味着您的阵列不是立即可用，而是稍后可用。

一个解决方案是将回调传递给构造函数：

```
function OBJMesh(file, doAfterInit) {
    this.modelVertex = [];
    this.modelColor = [];
    var that = this;
    var rawFile = new XMLHttpRequest();
    rawFile.open("GET", file, true);
    rawFile.onreadystatechange = function () {
        if(rawFile.readyState == 4)
        {
            if(rawFile.status === 200 || rawFile.status === 0)
            {
                var allText = rawFile.responseText;
                var lines = allText.split("\n");
               for(var i = 0; i < lines.length; i ++)
                {
                    var lineData = lines[i];
                    var lineString = lineData.split(" ");
                    if(lineString[0] === "v"){
                        that.modelVertex.push(10.0);
                        if (doAfterInit) doAfterInit();
                    }
                }
            }
        }
    }
    rawFile.send();
}

...

cubeModel = new OBJMesh("file:///Users/Danny/Desktop/3DHTMLGame%202/cube.obj", function() {
    document.getElementById("textSection").innerHTML = cubeModel.getModelVertex();
}); 
```

但是在这里上课看起来不是一个聪明的主意。

# iphone - drawinrect vs 直接设置值

> ID：14484123
> 
> 赞同：0
> 
> 时间：2013-01-23T16:11:28.527
> 
> 标签：iphone, ios, uiimage, uikit

什么时候对字符串或图像使用drawinrect而不是直接设置值？例如，我可以有一个 uilabel 并将其文本用于字符串，或者我可以使用 [somestring drawInRect:somerect]。同样，我可以在可用的情况下使用 [someimage drawInRect:rect] 或 someview.backgroundImage。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:35:28.823

我会说使用 drawInRect 方法是“罕见的”，例如，这种方法用于开发游戏或显示带有大量文本的地图。

问题是，如果您要显示一些简单的东西，例如带有文本字段、uiswitch 等的表单......（如果您不进行复杂的绘图），您应该使用 UILabel。

解释您的项目，我们将能够以比我所说的更好的方式帮助您。

记住：UILabel 是用来显示字符串的；）

# push-notification - Apple 推送通知配置

> ID：14484128
> 
> 赞同：1
> 
> 时间：2013-01-23T16:11:45.160
> 
> 标签：push-notification, ios-provisioning

我正准备向 Apple App Store 提交应用程序。我的 App ID 没有通配符，并且供应门户有一个黄灯，带有“可配置”的推送通知。将来我计划使用推送通知。我现在需要为推送通知配置我的应用 ID，还是可以在将来的版本中进行配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:24:04.843

您可以在未来的版本中启用推送通知，启用推送通知后会更好地重新创建一个包含更新后的 Apple ID 的新配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-21T08:26:02.573

我遇到同样的问题。我有它象征性的照顾！

需要添加iOS推送证书！</p>

[https://developer.apple.com/account/ios/certificate/certificateCreate.action](https://developer.apple.com/account/ios/certificate/certificateCreate.action)

Apple 推送通知服务 SSL（沙盒和生产）。 [![在此处输入图像描述](../Images/251f90bdbfce0a98929aed56164aaed1.png)](https://i.stack.imgur.com/2ckGP.jpg)

# javascript - Javascript 子级的构造函数名称

> ID：14484131
> 
> 赞同：2
> 
> 时间：2013-01-23T16:11:51.210
> 
> 标签：javascript, oop, inheritance

## 问题

如何检索孩子的（任何继承深度级别的）构造函数名称？

## 解释

让我们有`Cat`一个扩展类的`Model`类。以及`Kitten`扩展类的`Cat`类。

我想要的是在创建类实例时打印到控制台（例如）字符串`"Kitten"`，在创建`Kitten`类实例`"Cat"`时打印到字符串`Cat`。

诀窍是输出构造函数名称的代码应该位于基`Model`类（对于所示示例）。

*注意：*我擅长 Ruby，与 Javascript 相比（在我自己的范围内）。所以*“伪代码”*应该是 Ruby-ish 的一个 =)

```
# pseudo-Ruby-code
class Model
  def initialize
    console.log(self.constructor.toString())
  end
end

class Cat << Model
  # something goes here
end

class Kitten << Cat
  # and here too
end

# shows "Model"
Model.new

# shows "Kitten"
Kitten.new

# shows "Cat"
Cat.new 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:26:21.323

这就是我使用 Coffee-Script 的方式。

```
class Model

    constructor: (animal = "Model") ->

        console.log animal;

class Cat extends Model

    constructor: (animal = "Cat") ->

        super animal

class Kitten extends Cat

    constructor: (animal = "Kitten") ->

        super animal

new Kitten()

// => Kitten 
```

这是编译后的 JavaScript：

```
var Cat, Kitten, Model,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Model = (function() {

  function Model(animal) {
    if (animal == null) {
      animal = "Model";
    }
    console.log(animal);
  }

  return Model;

})();

Cat = (function(_super) {

  __extends(Cat, _super);

  function Cat(animal) {
    if (animal == null) {
      animal = "Cat";
    }
    Cat.__super__.constructor.call(this, animal);
  }

  return Cat;

})(Model);

Kitten = (function(_super) {

  __extends(Kitten, _super);

  function Kitten(animal) {
    if (animal == null) {
      animal = "Kitten";
    }
    Kitten.__super__.constructor.call(this, animal);
  }

  return Kitten;

})(Cat);

new Kitten(); 
```

你可以[在这里自己尝试](http://coffeescript.org/#try%3aclass%20Model%0A%0A%20%20%20%20constructor%3a%20%28animal%20=%20%22Model%22%29%20-%3E%0A%0A%20%20%20%20%20%20%20%20console.log%20animal;%0A%0A%0A%0Aclass%20Cat%20extends%20Model%0A%0A%20%20%20%20constructor%3a%20%28animal%20=%20%22Cat%22%29%20-%3E%0A%0A%20%20%20%20%20%20%20%20super%20animal%0A%0A%0Aclass%20Kitten%20extends%20Cat%0A%0A%20%20%20%20constructor%3a%20%28animal%20=%20%22Kitten%22%29%20-%3E%0A%0A%20%20%20%20%20%20%20%20super%20animal)

# android - 是否可以抽象一个 startActivity 调用？

> ID：14484132
> 
> 赞同：0
> 
> 时间：2013-01-23T16:11:54.050
> 
> 标签：android, android-intent, android-activity

我想知道是否可以抽象一个 startActivity 调用？我想要做的是抽象以下内容：

```
 Handler handler = new Handler(); 
    handler.postDelayed(new Runnable() { 
         public void run() { 
             startActivity(nextIntent); 
         } 
    }, 2000); 
```

我之前用适当的类和适当的附加功能设置了意图 nextIntent 。这个想法是我会将意图从开始延迟 2 秒。如果我直接从我的活动中调用上面的代码，它就可以正常工作。我想做的是抽象上面的代码，这样我就可以从这样的任何活动中调用它：

```
DelayActivity.StartDelayedActivity(2,nextIntent); 
```

这将在 2 秒延迟后启动下一个 Activity nextIntent。但是，当我尝试对此进行编码时，出现以下错误：

```
The method startActivity(Intent) is undefined for the type new Runnable(){} 
```

我看过这样的主题：[是否可以从静态方法调用 startActivity()？](https://stackoverflow.com/questions/12509968/is-that-possible-to-call-for-startactivity-from-a-static-method)，但该线程定义了方法中的意图。我希望能够接受我已经设置的意图并通过它。我正在寻找的可能吗？如果是这样，我需要进行哪些更改？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:19:57.483

我对你想要达到的目标有点怀疑。你真的有足够的活动，这是有用的吗？听起来您正在尝试提供“寻呼机”类型的服务。那么为什么不这样做呢？

此外，您可能并不真的想创建自己的`Handler`，您可能只想将其发布到 Activity 的 GUI 线程（真的！）。所以我会重新考虑你的设计。

但是，如果您只想忽略所有这些，那么您直接问题的答案是您应该传递 a `Context`（例如`this`来自您的`Activity`实例的 a ）您应该调用`startActivity`.

# boost - 在 odeint 中设置当前状态

> ID：14484134
> 
> 赞同：0
> 
> 时间：2013-01-23T16:11:58.227
> 
> 标签：boost, differential-equations, odeint

我想`current_state`在 boost::odeint 中设置步进器。

我有以下 MWE：

```
#include <queue>
#include <boost/numeric/odeint.hpp>
#include <array>

typedef std::array< double , 2 > state_type;

void eqsys(const state_type &x, state_type &dxdt, double t) {
    dxdt[0] = 0.3*x[1];
    dxdt[1] = 4*x[0];
}

int main() {
    int steps=0;
    auto stepper=make_dense_output(1.0e-6,1.0e-6,boost::numeric::odeint::runge_kutta_dopri5< state_type >() );
    state_type x={2,2};
    double stoptime=10;

    stepper.initialize(x,0,0.01);

    while(true){
        //Run stepper
        while( stepper.current_time()<stoptime && steps<10000 ) {
            stepper.do_step(eqsys);
            ++steps;
        }
        x=stepper.current_state();
        x[0]=2;
        stepper.set_current_state(x);
        stoptime+=10;
    }
} 
```

这条线`stepper.set_current_state(x);`是行不通的。有没有我可以用来完成此任务的命令？

我意识到我可能只使用：

```
stepper.initialize(x, stepper.current_time(), 0.01); 
```

但是目前还不清楚这是否真的是最好的策略，或者我是否丢失了步进器的一些内部状态（例如当前的步长或误差估计），最好保留这些状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:32:08.980

使用

```
stepper.initialize(x, stepper.current_time(), 0.01); 
```

绝对可以。在这种情况下，内部状态是正确设置的。

# android - ANDROID：使用数据库中的文件名从可绘制对象中获取图像

> ID：14484146
> 
> 赞同：0
> 
> 时间：2013-01-23T16:12:31.147
> 
> 标签：android, database, image, dynamic

好的，我有这个包含 750 多张图像的数据库，我想知道如何在从列表视图中单击文件名时在页面上一张一张地查看图像，而不必创建 750 多页来显示每个图像。我刚开始使用Android，所以请帮助提供代码以及将代码放在哪里等。

提前致谢。是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:58:47.483

“我想知道如何在从列表视图中单击文件名时在页面上一张一张地查看图像，而不必创建 750 多个页面来显示每个页面。”

理想情况下，您将拥有一个 MySQLiteHelper 类，其中包含运行 SQL 的方法，例如。选择带有 id 的特定图像

Main Activity 将有一个列表视图，显示 ScrollView 布局中的所有图像

listAdapter 将有一个 OnClickListener 在传递单击的图像的 id 后启动新的 Activity，并在新的 Activity 中打开一个 ImageView，它将显示来自数据库的图像。

现在去参考[Android Dev Docs](http://developer.android.com/index.html)来了解 SQLite、listview、scrollview、onclicklistener、imageview

祝你好运

# c# - 生成 HTML 文件的最简单方法是什么？

> ID：14484147
> 
> 赞同：3
> 
> 时间：2013-01-23T16:12:36.123
> 
> 标签：c#, html, .net, console-application

我正在开发一个控制台应用程序，该应用程序应该吐出一个包含表格和一些 javascript 的 html 文档。

我考虑过手动编写html：

```
streamWriter.WriteLine("<html>");
streamWriter.WriteLine("<body>");
streamWriter.WriteLine(GetHtmlTable());
streamWriter.WriteLine("</body>");
streamWriter.WriteLine("</html>"); 
```

...但想知道是否有更优雅的方式来做到这一点。这些方面的东西：

```
Page page = new Page();
GridView gridView = new GridView();
gridView.DataSource = GetDataTable();
gridView.DataBind();

page.Controls.Add(gridView);
page.RenderControl(htmlWriter);
htmlWriter.Flush(); 
```

假设我走在正确的轨道上，使用`System.Web.UI.Page`该类构建 html 文档的其余部分（即：html、head、title、body 元素）的正确方法是什么？我需要使用文字控件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:41:13.833

使用模板系统将您的表示和业务逻辑分离是一个好主意。

看看 Razor Generator，它允许在非 ASP.NET 应用程序中使用 CSHTML 模板。

[http://razorgenerator.codeplex.com/](http://razorgenerator.codeplex.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:42:55.407

我做了很多自动化的 HTML 页面生成。我喜欢创建一个带有自定义标签的 HTML 页面模板，用于插入动态控件、数据或文字。然后，我将模板文件读入字符串，并用生成的 HTML 替换自定义标记，就像您在上面所做的一样，然后将 HTML 文件从字符串中写回。这节省了我为设计模板、css 和支持 JS 创建所有繁琐的支持 HTML 的时间。

模板文件示例

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <CUSTOMHEAD />
    </head>
    <body>
        <CUSTOMDATAGRID />
    </body>
</html> 
```

从加载到字符串中的模板文件创建 HTML 示例

```
 private void GenerateHTML(string TemplateFile, string OutputFileName)
    {

        string strTemplate = TemplateFile;
        string strHTMLPage = "";
        string strCurrentTag = "";

        int intStartIndex = 0;
        int intEndIndex = 0;

        while (strTemplate.IndexOf("<CUSTOM", intEndIndex) > -1)
        {
            intStartIndex = strTemplate.IndexOf("<CUSTOM", intEndIndex);

            strHTMLPage += strTemplate.Substring(intEndIndex, 
                                                 intStartIndex - intEndIndex);

            strCurrentTag = strTemplate.Substring(intStartIndex,
                 strTemplate.IndexOf("/>", intStartIndex) + 6 - intStartIndex);
            strCurrentTag = strCurrentTag.ToUpper();

            switch (strCurrentTag)
            {
                case "<CUSTOMHEAD />":
                    strHTMLPage += GenerateHeadJavascript();
                    break;

                case "<CUSTOMDATAGRID />":
                    StringWriter sw = new StringWriter();
                    GridView.RenderControl(new HtmlTextWriter(sw));
                    strHTMLPage += sw.ToString();
                    sw.Close();
                    break;

                case "<CUSTOMANYOTHERTAGSYOUMAKE />":
                    //strHTMLPage += YourControlsRenderedAsString();
                    break;

            }
            intEndIndex = strTemplate.IndexOf("/>", intStartIndex) + 2;
        }

        strHTMLPage += strTemplate.Substring(intEndIndex);

        try
        {
            StreamWriter swHTMLPage = new System.IO.StreamWriter(
                                                OutputFileName, false, Encoding.UTF8);
            swHTMLPage.Write(strHTMLPage);
            swHTMLPage.Close();
        }
        catch (Exception ex)
        {
            // AppendLog("Write File Failed: " + OutputFileName + " - " + ex.Message);
        }
    } 
```

# c# - 从属性生成的方法中检索 CustomAttribute

> ID：14484148
> 
> 赞同：0
> 
> 时间：2013-01-23T16:12:39.900
> 
> 标签：c#, castle-dynamicproxy

在 DynamicProxy Interceptor 方法中，我有：

```
public void Intercept(IInvocation invocation)
    {
        var _attribute = Attribute.GetCustomAttribute(invocation.Method, typeof(OneToManyAttribute), true); 
```

我已经这样装饰了我的财产：

```
[OneToMany(typeof(Address), "IdUser")]
public virtual IList<Address> Addresses { get; set; } 
```

`_attribute`总是`null`。

我认为问题在于`invocation.Method`自动生成`get_Addresses`而不是装饰的原始属性。

在这种情况下是否有解决方法来检索属性列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:08:53.277

你是对的 -`invocation.Method`将是属性访问器，而不是属性。

这是一个实用方法，用于查找`PropertyInfo`与其访问器方法之一相对应的方法：

```
public static PropertyInfo PropertyInfoFromAccessor(MethodInfo accessor)
{
   PropertyInfo result = null;
   if (accessor != null && accessor.IsSpecialName)
   {
      string propertyName = accessor.Name;
      if (propertyName != null && propertyName.Length >= 5)
      {
         Type[] parameterTypes;
         Type returnType = accessor.ReturnType;
         ParameterInfo[] parameters = accessor.GetParameters();
         int parameterCount = (parameters == null ? 0 : parameters.Length);

         if (returnType == typeof(void))
         {
            if (parameterCount == 0)
            {
               returnType = null;
            }
            else
            {
               parameterCount--;
               returnType = parameters[parameterCount].ParameterType;
            }
         }

         if (returnType != null)
         {
            parameterTypes = new Type[parameterCount];
            for (int index = 0; index < parameterTypes.Length; index++)
            {
               parameterTypes[index] = parameters[index].ParameterType;
            }

            try
            {
               result = accessor.DeclaringType.GetProperty(
                  propertyName.Substring(4),
                  returnType,
                  parameterTypes);
            }
            catch (AmbiguousMatchException)
            {
            }
         }
      }
   }

   return result;
} 
```

使用此方法，您的代码将变为：

```
var _attribute = Attribute.GetCustomAttribute(invocation.Method, typeof(OneToManyAttribute), true);
if (_attribute == null && invocation.Method.IsSpecialName)
{
   var property = PropertyInfoFromAccessor(invocation.Method);
   if (property != null)
   {
      _attribute = Attribute.GetCustomAttribute(property, typeof(OneToManyAttribute), true);
   }
} 
```

如果你`OneToManyAttribute`只适用于属性，而不是方法，你可以省略第一次调用`GetCustomAttribute`：

```
var property = PropertyInfoFromAccessor(invocation.Method);
var _attribute = (property == null) ? null : Attribute.GetCustomAttribute(property, typeof(OneToManyAttribute), true); 
```

# sql-server-2008 - TSQL 在任何位置仅搜索特定字符

> ID：14484152
> 
> 赞同：1
> 
> 时间：2013-01-23T16:12:54.997
> 
> 标签：sql-server-2008, tsql

在 nvarchar 中有字母数字

只想搜索 -0-9 (-0123456789)

```
select top 1000 id, word
from FTSwordDef with (nolock) 
where word like '[-0-9]%' 
```

将在第一个位置返回 -0-9。

想对所有职位应用-0-9

所以 -123c 会失败，因为 c 不是 -0-9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:14:31.253

```
WHERE word NOT LIKE '%[^0-9-]%'; 
```

你也可以说：

```
WHERE PATINDEX('%[^0-9-]%', word) = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:14:58.450

您可以选择安装正则表达式 UDF 吗？如果是这样，您可以通过正则表达式执行此操作

# jquery - JQuery DatePicker 和 beforeShowDay

> ID：14484159
> 
> 赞同：13
> 
> 时间：2013-01-23T16:13:24.610
> 
> 标签：jquery, datepicker

我拼命尝试使用此功能在我的日期选择器中仅启用特定日期，但该`beforeShowDay`功能从未被触发:(

即使这不起作用：

```
$(document).ready(function(){
    /*initialisation des composants*/
    initComponent();
});

availableDates = new Array();

/* Fonction d'initialisation des composants */
function initComponent(){
    /* Date retrait */
    $("#dateRetrait").datepicker();

    $("#dateRetrait").datepicker({beforeShowDay: function(d) {
        console.log("bsd");
        alert("bsd");
    }});

    //$("#dateRetrait").datepicker({buttonImage: "../../../Images/boutons/btn_calendier.png"});
    //$("#dateRetrait").datepicker({showButtonPanel: true });
    //$("#dateRetrait").datepicker({beforeShow: function() {setTimeout(function() {$(".ui-datepicker").css("z-index", 9999999999);}, 10);}});

    $('#comboLieux').attr('disabled', 'disabled');
    $('#comboCreneau').attr('disabled', 'disabled');
    $('#dateRetrait').attr('disabled', 'disabled');
    $('#dateRetrait').datepicker('option', 'minDate', new Date());

    $("#dateRetrait").datepicker("option","dateFormat", 'dd-mm-yy');
} 
```

如果您有任何想法，我将不胜感激！

事实上，即使这样也行不通：

```
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>jQuery UI Datepicker - Restrict date range</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
      $(function() {
        $( "#datepicker" ).datepicker({ minDate: -20, maxDate: "+1M +10D" });
        $( "#datepicker" ).datepicker({beforeShowDay: function(d) {
          console.log(d);
          alert(d);
        }});
      });
    </script>
  </head>
  <body>
    <p>Date: <input type="text" id="datepicker" /></p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-23T16:46:40.583

根据[jQueryUI 的 Datepicker](http://api.jqueryui.com/datepicker/#option-beforeShowDay) API，

![在此处输入图像描述](../Images/7353bb4a1b4ee2b4276616c8308fcd34.png)

这解释了为什么

```
$("#dateRetrait").datepicker({beforeShowDay: function(d) {
        console.log("bsd");
        alert("bsd");
    }}); 
```

不起作用。

我还注意到你`.datepicker()`多次调用，每次你给它不同的参数。

代替：

```
$("#dateRetrait").datepicker();

$("#dateRetrait").datepicker({beforeShowDay: function(d) {
        console.log("bsd");
        alert("bsd");
    }});

$('#dateRetrait').datepicker('option', 'minDate', new Date());

$("#dateRetrait").datepicker("option","dateFormat", 'dd-mm-yy'); 
```

尝试这样做：

```
$("#dateRetrait").datepicker({
    dateFormat: 'dd-mm-yy',
    minDate: new Date(), 
    beforeShowDay: function(d) {
        var dmy = (d.getMonth()+1); 
        if(d.getMonth()<9) 
            dmy="0"+dmy; 
        dmy+= "-"; 

        if(d.getDate()<10) dmy+="0"; 
            dmy+=d.getDate() + "-" + d.getFullYear(); 

        console.log(dmy+' : '+($.inArray(dmy, availableDates)));

        if ($.inArray(dmy, availableDates) != -1) {
            return [true, "","Available"]; 
        } else{
             return [false,"","unAvailable"]; 
        }
    }
    }); 
```

我还为您提供了一个演示：http: [//jsfiddle.net/yTMwu/18/](http://jsfiddle.net/yTMwu/18/)。希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-18T12:31:05.610

传递给回调函数的日期是一个成熟的日期和时间。因此，如果您希望将其与短日期字符串进行比较，则必须转换其中之一。日期选择器的 beforeShowDay 属性部分的这个片段演示了转换是必要的。在这里，我只是禁用日历上的单个日期来证明这一点。

```
 beforeShowDay: function(date) {
                var dd = date.getDate();
                var mm = date.getMonth()+1; //January is 0!
                var yyyy = date.getFullYear();
                var shortDate = mm+'/'+dd+'/'+yyyy;
                var test = "12/30/2014";
                if (shortDate == test) {
                    return [false, "" ];
                } else {
                    return [true, "" ];
                }
            } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-11T12:15:19.107

多姆给出了很好的解释。我想添加更多的缩短代码：

如果您有**可用**日期数组，格式为：0000-00-00 (yyyy-mm-dd)

```
var availableDates = ["2020-01-05", "2020-01-10", "2020-01-14"];

$("#dateRetrait").datepicker({
    dateFormat: 'dd-mm-yy',
    minDate: new Date(), 
    beforeShowDay: function(d) {        
        var year = d.getFullYear(),
            month = ("0" + (d.getMonth() + 1)).slice(-2),
            day = ("0" + (d.getDate())).slice(-2);

        var formatted = year + '-' + month + '-' + day;

        if ($.inArray(formatted, availableDates) != -1) {
            return [true, "","Available"]; 
        } else{
            return [false,"","unAvailable"]; 
        }
    }
}); 
```

**beforeShowDay** - 每次都在渲染日之前工作））

**$.inArray** - 在数组中查找值（如果没有值，则为 -1）

在此解决方案中，您可以制作**stopDates**，只需更改行：

```
if ($.inArray(formatted, availableDates) != -1) { 
```

到

```
if ($.inArray(formatted, availableDates) == -1) { 
```

# python - 在属性映射到 SQLAlchemy 中的对象之前编辑属性

> ID：14484160
> 
> 赞同：0
> 
> 时间：2013-01-23T16:13:28.027
> 
> 标签：python, sqlalchemy

我正在使用 sqlalchemy 存储文件路径。目前这些存储为绝对路径，但我需要将它们存储为相对路径。但是，我不想每次需要时都手动将路径与基目录连接起来，而是应该在它们映射到对象之前自动完成。这样，每当我查询数据库时，我都会得到一个绝对路径，即使它们是相对存储的。我该怎么做？映射器配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:55:21.137

一种可能的解决方案 - 将方法添加到映射类中，将相对路径转换为绝对路径。此方法需要知道根目录路径 - 可以由全局范围变量定义。

```
global_base_path = "/home/user"

...

class Path(Base):
    ...
    relative_path = Column(String(2048))
    ...
    @property
    def absolute_path(self):
        return os.path.join(global_base_path,self.relative_path)

q = session.query(Path)
c = q.first()
print c.absolute_path 
```

# c# - 是否可以以 LINQ 格式重写此 SQL 查询？我不确定如何在 LINQ 中使用枢轴

> ID：14484165
> 
> 赞同：0
> 
> 时间：2013-01-23T16:13:40.850
> 
> 标签：c#, sql-server, linq, entity-framework, linq-to-sql

> **可能重复：**
> [是否可以使用 LINQ 透视数据？](https://stackoverflow.com/questions/167304/is-it-possible-to-pivot-data-using-linq)

我刚刚开始在我的 C# 项目中使用 LINQ，而不是在我的数据库中使用存储过程。我是 LINQ 菜鸟。

这个 SQL 查询在 LINQ 格式中会是什么样子？

```
SELECT Month,
    [1] VideoCount,
    [2] GameCount,
    [3] FlashCount,
    [4] PictureCount,
    [5] JokeCount
FROM 
(
    SELECT MediaTypeID, DATENAME(m, MediaDate) Month
    FROM Media
    WHERE DATEPART(YEAR, MediaDate) = 2012
) src
PIVOT
(
    COUNT(MediaTypeID)
    FOR MediaTypeID IN ([1], [2], [3], [4], [5])
) piv
ORDER BY MONTH(Month +' 1900') 
```

我的表看起来像：

![](../Images/d9ebcc5955d2eafe9e7b5666ff8e6b7e.png)

我的 SQL 结果如下所示：

![在此处输入图像描述](../Images/d2298693cae70c0306d0947d13fd30a1.png)

# jquery - 通过 JQuery 设置文本框值

> ID：14484168
> 
> 赞同：13
> 
> 时间：2013-01-23T16:13:48.133
> 
> 标签：jquery, asp.net

我正在`TextBox`通过 ajax 帖子设置控件值。

```
$('#txtSite').val(msg.d.SiteName); 
```

这是有效的，并且 的值`TextBox`已正确更改。但是，当我将信息发布到数据库时，该`txtSite.Text`值是空的！

有任何想法吗？我要疯了吗？

填充的代码`TextBox`：

```
$.ajax({
    type:"POST",
    url: "MyPage.aspx/ValidateSite",
    data: "{ siteID: '" + $('#txtSiteID').val() + "' }",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(msg) {
        if (msg.d != null) {
            $('#txtSite').val(msg.d.SiteName);  // It's definitely doing this
        }
        else {
            $('#txtSite').val('');
        }
    },
    error: function(msg) {
    }
}); 
```

保存到服务器的代码（所有连接等均正确且有效）。此代码在 ASP 按钮单击事件中：

```
SqlCommand cmd = new SqlCommand("INSERT INTO [Sites] ([SiteName]) VALUES ('" + txtSite.Text + "')", conn);
cmd.ExecuteNonQuery(); 
```

的`TextBox`定义如下：

```
<asp:TextBox ID="txtSite" runat="server" AutoComplete="off" TabIndex="4" MaxLength="50" Style="width: 230px" Enabled="false" CssClass="FormDisabledTextWithSmallHeight" /> 
```

我还尝试将我的 JQuery 更改为使用纯 Javascript 并执行以下操作：

```
document.getElementById("txtSite").value = msg.d.SiteName; 
```

仍然返回一个空值。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-24T14:39:17.267

您将文本框设置为`Enabled="false"`在浏览器中使用`disabled="disabled"`. **[不提交禁用的表单输入。](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlcontrol.disabled.aspx)**

解决方案是使文本框启用并只读：

```
txtSite.Enabled = true;
txtSite.Attributes.Add("readonly", "readonly"); //on prerender event or somewhere else 
```

或使用不同的元素集`runat="server"`，如 a`<asp:HiddenField />`并使用您的 AJAX 调用更新文本框和备用元素：

```
success: function(msg) {
    if (msg.d != null) {
        $('#txtSite').val(msg.d.SiteName);
        $('#hiddenInput').val(msg.d.SiteName);
    } else {
            $('#txtSite').val('');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:12:31.060

是的，我绝对认为，你的文本框应该在 html 代码中有一个 name 属性，检查一下。如果没有“名称”属性，浏览器不会将此输入框的数据发布到服务器，因此您不会在服务器端 c# 代码中获取它。希望，这是有道理的..

# java - 用于匹配 JSON 子字符串某些部分的 Java 正则表达式

> ID：14484170
> 
> 赞同：3
> 
> 时间：2013-01-23T16:13:53.903
> 
> 标签：java, regex, json, string

我正在尝试编写一个查找具有以下模式的字符串的正则表达式：

1.  以左括号`{`开头，后跟双引号`"`
2.  然后允许一串 1+ 字母数字字符`a-zA-Z0-9`
3.  然后是另一个双引号`"`，后跟一个冒号`:`和一个左大括号`[`
4.  然后允许任何 0+ 字母数字字符的字符串`a-zA-Z0-9`

所以一些与正**则**表达式匹配的字符串：

```
{"hello":[blah
{"hello":[
{"1":[ 
```

还有一些**不**匹配的字符串：

```
{hello:[blah
hello":[
{"2:[ 
```

到目前为止，我能想到的最好的是：

```
String regex = "{\"[a-zA-Z0-9]+\":\[[a-zA-Z0-9]*";
if(myString.matches(regex))
    // do something 
```

但我知道我离基地很远。任何正则表达式大师都可以帮助我吗？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:20:41.237

```
String regex = "{\"[a-zA-Z0-9]+\":\[[a-zA-Z0-9]*"; 
```

这里的问题是您需要在方括号之前添加一个额外的反斜杠。这是因为您需要包含*正则表达式*`\[`以匹配方括号，这意味着*字符串文字*需要包含`\\[`以转义 Java 代码解析器的反斜杠。同样，您可能还需要转义`{`正则表达式中的 ，因为它是元字符（用于有界重复计数）

```
String regex = "\\{\"[a-zA-Z0-9]+\":\\[[a-zA-Z0-9]*"; 
```

# asp.net - abcpdf7 导致开发 Web 服务器崩溃

> ID：14484174
> 
> 赞同：1
> 
> 时间：2013-01-23T16:13:56.650
> 
> 标签：asp.net

这是我来自 asp.net 项目的示例代码

```
Doc abcpdfDoc = new Doc();
abcpdfDoc.MediaBox.String = "0 0 612 1008";
abcpdfDoc.Rect.String = abcpdfDoc.MediaBox.String;
abcpdfDoc.Page = abcpdfDoc.AddPage();
int docID

docID = abcpdfDoc.AddImageUrl(url_html.ToString()); //CAUSES webserver to crash 
```

代码编译没有警告/错误。在调试期间，我收到一条网络服务器崩溃消息 - 以下是消息

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: WebDev.WebServer.EXE
  Application Version:  9.0.30729.1
  Application Timestamp:    488f1aa2
  Fault Module Name:    ieframe.dll
  Fault Module Version: 9.0.8112.16457
  Fault Module Timestamp:   50a2fe39
  Exception Code:   c0000005
  Exception Offset: 000d135b
  OS Version:   6.1.7601.2.1.0.256.48
  Locale ID:    1033
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

我正在使用 abpdf7，下载试用版并在运行 32b 操作系统的 win 7 上使用命令行 msiexec /i 以管理员模式运行 msi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:28:20.597

崩溃的原因是旧版本的库不适用于 IE 9.x，升级到最新版本的库解决了问题

# php - 模块依赖和关系

> ID：14484178
> 
> 赞同：0
> 
> 时间：2013-01-23T16:14:04.920
> 
> 标签：php, yii, architecture, module

> “一些常用的功能，比如用户管理、评论管理，可以按照模块来开发，以便在以后的项目中方便复用。” - [http://www.yiiframework.com/doc/guide/1.1/en/basics.module](http://www.yiiframework.com/doc/guide/1.1/en/basics.module)

我有很多需要用户的项目。每次都大同小异的数据库结构和功能。注册、登录、注销等。 Yii 告诉我可以重用模块。酷...让我们开始吧：

我有 3 个部分：用户、活动和网站。

在这个项目中，CampaignModule 与 UserModule 有关系（campaign_user [user_id，campaign_id]）

WebsiteModule 与 CampaignModule 和 UserModule 有关系。

我想在具有注册、登录、编辑等功能的其他项目中重用 UserModule。

实际情况：使用gii创建模型后，每个模块之间都有关系和依赖关系。例如

```
UserModule: 'campaigns' => array(self::HAS_MANY, 'Campaign', 'user_id'), 
```

要使用 WebsiteModule，必须包含 User- 和 CampaignModule。现在我什至必须包含 Website- 和 CampaignModule 才能使用 UserModule！

我还想在许多项目中更新 UserModule，并可能构建一个包含一些基本模块的框架。

规划这样的架构的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:57:05.690

有一个[yii-user 模块](http://www.yiiframework.com/extension/yii-user)，它们的作用是允许您在模块配置上为 User 模型指定其他关系：

```
/**
 * @return array relational rules.
 */
public function relations()
{
    $relations = Yii::app()->getModule('user')->relations;
    if (!isset($relations['profile']))
        $relations['profile'] = array(self::HAS_ONE, 'Profile', 'user_id');
    return $relations;
} 
```

因此，您可以执行以下操作：

```
'modules'=>array(
    'user' => array(
            ...
            'relations' => array(
              'categories' => array(CActiveRecord::HAS_MANY, 'Category', "user_id"),
              'account' => array(CActiveRecord::HAS_ONE, 'Account', "user_id"),
            ),
            ...
        ),
  ), 
```

# node.js - Node.js：是否有部署模块可以合并 javascript 文件并缩小它们？

> ID：14484181
> 
> 赞同：1
> 
> 时间：2013-01-23T16:14:10.510
> 
> 标签：node.js, compression, minify, web-deployment

node.js 中是否有部署模块可以合并我的 javascript 和 css 文件

或者压缩javascript和css文件等等。

因为我部署我的应用`Platform-as-a-Service`程序`appfog`

所以我不能指望服务器本身可以帮助我做到这一点

我的模块可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:40:03.250

这篇关于被低估的 NPM 命令的文章看起来只是略过了你正在寻找的东西。特别是使用预安装挂钩的能力：

```
"scripts": {
    "preinstall": "./bin/custom-script.sh"
} 
```

[http://mechanics.flite.com/blog/2012/12/11/underappreciated-npm-commands/](http://mechanics.flite.com/blog/2012/12/11/underappreciated-npm-commands/)

# c++ - 推入 std::vector 时 std::unique_ptr 的正确用法是什么

> ID：14484183
> 
> 赞同：14
> 
> 时间：2013-01-23T16:14:11.773
> 
> 标签：c++, c++11, vector, unique-ptr

我想在我的类中有一个指向对象的指针向量。为了避免为它创建析构函数，我想使用`std::unique_ptr`，因为对象是在我的类中创建/拥有/销毁的，但是我有一个我无法理解的编译器错误。下一个代码将作为我的问题的简短示例：

```
std::unique_ptr<int> createPtr(int value)
{
    std::unique_ptr<int> ptr(new int(value));
    return ptr;
};

int main()
{
    std::vector<std::unique_ptr<int>> vec;
    vec.push_back(createPtr(1));

    std::unique_ptr<int> ptr = createPtr(2);
    vec.push_back(ptr);//error C2248: 'std::unique_ptr<_Ty>::unique_ptr' : cannot access private member declared in class 'std::unique_ptr<_Ty>'
} 
```

您能否解释一下为什么会出现此错误以及正确的用法是`std::unique_ptr`什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-23T16:14:51.030

任何一个：

```
vec.push_back(std::move(ptr)); 
```

或者：

```
vec.emplace_back(createPtr(2)); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-23T19:43:27.773

考虑`vec.push_back()`. 它有两个重载，分别采用`const std::unique_ptr<int>&`or `std::unique_ptr<int>&&`。**永远不能使用**第一个重载。这是因为`vector<>`要求类型是可分配的或可移动的（C++11 加法）。“可分配性”意味着复制。`push_back(const T&)`将尝试将传入的值复制（分配）到容器末尾的新空间。`std::unique_ptr<>`表示由单个所有者拥有的资源。通过复制它（指针）将出现多个所有者。因为那**`unique_ptr`是不可复制**的。

说了这么多，你只能使用`T&&`重载。

`createPtr()`返回`std::unique_ptr<int>`，但由于这是一个临时结果（函数返回值），它被认为是一个右值引用（隐式）。这就是为什么可以使用它的原因。

`ptr`只是一个`std::unique_ptr<int>`左值引用（无论你是否将 && 放在它旁边，因为**命名**的右值仍然被视为左值）。左值永远不会隐式转换为右值（完全不安全）。但是您基本上可以通过使用`std::move()`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-24T14:58:08.073

你有一个`unique_ptr`：

```
std::unique_ptr<int> ptr = createPtr(2); 
```

现在你把它的副本放在向量中：

```
vec.push_back(ptr); 
```

现在您有两个`unique_ptr`具有相同值的 s。如果允许，它将不是唯一的。

# android - 如何创建最高质量的 Android 按钮？

> ID：14484184
> 
> 赞同：2
> 
> 时间：2013-01-23T16:14:15.717
> 
> 标签：android, android-layout, android-widget, photoshop

我一直在为我的应用程序设计/创建按钮，但是当我将它们与 Google+ 或 Facebook 等非常成功的商业应用程序进行比较时，图像质量看起来并不相同。我已经查看了模拟器和设备上的按钮。

我使用 Photoshop CS5 并始终确保我以 RGB 和 300 DPI 设计 .png。 ![在此处输入图像描述](../Images/c8f915c1e64055b4c48c5415e3cc1438.png)

然后我在 XML 中创建按钮，指定按下和聚焦状态：

**about_btn.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/about_down"
          android:state_pressed="true" />
    <item android:drawable="@drawable/about_down"
          android:state_focused="true" />
    <item android:drawable="@drawable/about_up" />
</selector> 
```

然后我在布局中使用按钮，如下所示：

**主要的.xml**

```
 <Button
            android:id="@+id/about_button_xml"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/about_btn"
            android:paddingTop="5dp" /> 
```

按钮在布局中的缩放方式是否存在某种缺陷，或者我是否将按钮保存/设计为错误的格式，我是否使用了错误的软件....我只是不确定。

您推荐什么设计规范和软件？任何建议或教程将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:18:30.773

有些设备无法显示 300 dpi，因此您的图像必须进行缩放。这是硬件限制。

这就是为什么您有`res/drawable-xdpi`, `res/drawable-hdpi`... 文件夹来为每个不同的 DPI 密度提供图像的原因。

有关此主题的更多信息，请[点击此处](http://developer.android.com/guide/practices/ui_guidelines/icon_design.html#icon-sets)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T16:22:58.400

为 m0skit0 的回答添加一点特殊性：您可能应该以 320dpi 进行设计。把320dpi的版本放进去`drawable-xhdpi`，把240和160dpi的缩放版本放进`drawable-hdpi`去`drawable-mdpi`。如果您不提供设备屏幕密度的资源，系统*将*尝试放大较低密度的图像（如果提供了则缩小较高密度的图像，但它很少这样做） Photoshop，并且无法判断如何在必要时清晰地缩放图像的奇数部分）。

如果您只在文件夹中提供图像`drawable`，系统将出于历史原因假定它是 160dpi - 这几乎肯定不是您想要的；您最终会得到原始图像的模糊、过大和放大版本。

具体来说：一个 100px 的图像`drawable-mdpi`或只是普通`drawable`的图像将使用缩放在 xhdpi 屏幕上呈现为 200px 的图像。如果你真的将~320dpi 的图像设计为 100px，那么正确的做法是将 100px 版本放入 中`drawable-xhdpi`，将 50px 版本放入 中`drawable-mdpi`，将 75px 版本放入`drawable-hdpi`.

谷歌在他们的网站上写了很多关于这个的文章；查看他们的[设计师信息](http://developer.android.com/design/style/devices-displays.html)和[开发信息](http://developer.android.com/guide/practices/screens_support.html#screen-independence)。视觉上：

![缩放图标](../Images/a9c435d2a972a499fad24f49dd835f39.png) （来自上述 Android Designer 网站的[CC Attribution 2.5许可图像）。](http://creativecommons.org/licenses/by/2.5/)

# javascript - 悬停在图像上时 qTip 不起作用

> ID：14484187
> 
> 赞同：0
> 
> 时间：2013-01-23T16:14:20.010
> 
> 标签：javascript, html, css, image, qtip

我正在创建一个 Type 101 页面，并且我正在尝试创建一个用于解剖字母形式的交互式部分。这是一个链接，因此您可以了解我在说什么：[http ://willryan.us/test/#anatomyBox](http://willryan.us/test/#anatomyBox)

我计划将它悬停在图像的不同部分上，然后弹出一个 qTip，其中包含您正在查看的部分的定义。出于某种原因，我什至无法显示 qTip。我已经尝试了我能想到的一切，但仍然无法正常工作。

这是我所拥有的：

**HTML**

```
 <div id="anatomyBox">
            <div id="anatomy">
                <h1>ANATOMY</h1>
                <h2>You're saying a letter has different parts?!</h2>
                <p>Type Fun01 was created to Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum luctus ante vitae orci dapibus sollicitudin. Nam pretium volutpat blandit. Sed tristique nunc ut justo gravida sollicitudin.</p>

                <p>Nulla facilisi. Duis sit amet libero a massa aliquet auctor vitae eget quam. Donec est magna, porttitor id porta eget, porttitor a ante. Nam felis dolor, aliquet vel vulputate vitae, lacinia sed leo. Lorem ipsum dolor sit amet, consectetur adipiscing elit. In at diam in nisi varius tincidunt.</p>

                <p>What is typography? We've known each other for so long Your heart's been aching but you're too shy to say it Inside we both know what's been going on We know the game and we're gonna play it And if you ask me how I'm feeling Don't tell me you're too blind to see</p>
            </div>

            <div id="anatomyMap1">
                <img src="assets/images/anatomy_1.png" width="804" height="114" alt="Clarendon">
            </div> 
```

**JS**（在头标签中）

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

 <!-- add q-tip-->
<script type="text/javascript" src="js/jquery.qtip-1.0.0-rc3.min.js"></script> 

<script type="text/javascript">
    $(document).ready(function() 
        { 
           $('#anatomy img').qtip({
           content: 'This is an image',
           show: 'mouseover',
           hide: 'mouseout'
        });
    });
</script> 
```

我究竟做错了什么？！它看起来像超级简单的javascript，但它不起作用。而且我显然还没有完全到达那里，但是将鼠标悬停在一张图像的不同部分并查看不同工具提示的最佳方式是什么？我正在研究图像映射，它似乎可以工作......我想一次一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:16:28.660

您的插件有错误...

```
"Uncaught TypeError: Cannot read property 'msie' of undefined" 
```

这行代码导致错误...

```
if($.browser.msie) self.elements.tooltip.get(0).style.removeAttribute('filter'); 
```

它是为 IE7 设计的，所以如果你删除它也没什么大不了的。

图片也不在里面`#anatomy`

应该`#anatomyMap1 img`

我已经注释掉了旧的 IE 东西，它工作正常。

[http://jsfiddle.net/9PEVn/](http://jsfiddle.net/9PEVn/)

您可能想在稍后阶段查看 Qtip2

[http://craigsworks.com/projects/qtip2/](http://craigsworks.com/projects/qtip2/)

# android - 在 Android Map v2 API 中如何获取要共享的屏幕图像？

> ID：14484188
> 
> 赞同：3
> 
> 时间：2013-01-23T16:14:24.190
> 
> 标签：android, bitmap, google-maps-android-api-2, android-maps-v2

似乎新的 android map v2 api（真的很酷，第三方可以访问可旋转地图等。感谢 google！）不允许轻松访问屏幕图像（我们想保存屏幕图像以供共享等）

这个问题 [How to get Bitmap of MapView from Android Google Maps API V2](https://stackoverflow.com/questions/14396587/how-to-get-bitmap-of-mapview-from-android-google-maps-api-v2)表示无法完成。

**但是**这个问题和答案意味着可以[截图Android OpenGL](https://stackoverflow.com/questions/3310990/taking-screenshot-of-android-opengl)

有人保存了android map v2的图像吗？

**另一种解决方案/问题：**有没有办法向 android 操作系统发送意图以启动“截屏”处理？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:29:08.263

> 但是这个问题和答案意味着可以截图Android OpenGL

只为你自己`GLContext`。你没有`GLContext`for a `GoogleMap`。

> 有没有办法向安卓操作系统发送一个意图让它开始“截图”处理？

幸运的是，没有，出于明显的隐私和安全原因。应用程序无法截取屏幕截图，除非具有 root 权限或在一些受到安全挑战的设备上。

# asp.net-mvc - 在asp.net mvc linq中从多对多关系中检索数据

> ID：14484189
> 
> 赞同：1
> 
> 时间：2013-01-23T16:14:25.893
> 
> 标签：asp.net-mvc, linq, entity-framework

我在使用 linq 检索多对多关系中的数据时遇到问题。

我有 3 张桌子

*   `Employee`
*   `role`
*   `RoleInemployee`

第三个表有两列：`empid`和`roleid`

可以分配给多个角色的员工存储在第三个表中，或者您可以说分配给多个员工的单个角色。

我只想使用 linq 检索具有特定角色 ID 的员工。

我在员工模型中使用导航属性，例如

```
public virtual ICollection<Role> role {get;set;} 
```

此导航属性为我提供特定员工的角色，但我想检索分配了特定角色的员工数据。

任何身体都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:41:28.870

Count 有一个带有谓词作为参数的重载，所以你可以这样做

```
 var count =  db.Employees.Count(emp=> emp.role.Any(r=> r.Id == 12)); 
```

**编辑**

让员工担任特定角色

```
var employees = db.Employees.Where(emp => emp.role.Any(r => r.Id == 12)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:40:38.313

如果我正确理解了这个问题，您希望使用 LINQ 将员工数量设置为特定角色 ID。

如果您的实体框架 Employee 类包含一个角色列表——您可以对您的员工列表执行以下操作，其中 123 是您要查找的 RoleID：

```
employeeList.Where(x => x.Roles.Where(y => y.RoleID == 123)).Count(); 
```

**编辑：**删除 RoleInEmployee 代码

# c# - 如何为 c++ 函数创建 ac# 包装器？

> ID：14484190
> 
> 赞同：0
> 
> 时间：2013-01-23T16:14:27.057
> 
> 标签：c#, c++, c

你好，正如标题所说，我需要创建一个包装器才能在我的 C# 代码中使用它。但事实是我对 C 一无所知，但我比 C# 更好。

C

```
 HRESULT ( STDMETHODCALLTYPE *Connect )( 
        ExCtrl * This,
        /* [in] */ EX_CONNECT *pConnect);

    HRESULT ( STDMETHODCALLTYPE *Disconnect )( 
        ExCtrl * This);

    HRESULT ( STDMETHODCALLTYPE *IsConnected )( 
        ExCtrl * This);

    HRESULT ( STDMETHODCALLTYPE *GetStatus )( 
        ExCtrl * This,
        /* [out] */ ExStatus **ppStatus);
HRESULT ( STDMETHODCALLTYPE *GetPreview )( 
        ExCtrl * This,
        /* [out] */ HBITMAP *phbm); 
```

我设法为“Connect”、“Disconnect”、“IsConnected”写作

C++

```
HRESULT Connect(String^ ServerIP)
{
    IntPtr ptr = Runtime::InteropServices::Marshal::StringToBSTR(ServerIP);//
    CComBSTR bstr;                                                                                 //Converting ip string 
    bstr.Attach(static_cast<BSTR>(ptr.ToPointer()));    

    if (IsConnected())
        return E_UNEXPECTED;        // already connected

    ExCtrl *piCtrl = NULL;
    HRESULT hr = Ex_CreateController(__uuidof(ExCtrl), __uuidof(ExCtrl), (void **)&piCtrl);
    if (FAILED(hr)) return hr;

    EX_CONNECT connection = {0};                    // Connection data

    connection.appType = APP_TYPE;                      
    connection.bstrPrimaryName=CComBSTR(bstr);              // 
    connection.layerId = (int)LAYER0 + m_iLayerNum; 
    connection.masterServer = SERVER_PRIMARY;
    TIME_ZONE_INFORMATION tz;
    connection.pTz = &tz;

    hr = piCtrl->Connect(&connection);
    if (FAILED(hr)) {
        piCtrl->Release();       // connection failed - clear the controller
    } else
        m_piCtrl = piCtrl; // succefully connected

    return hr;
}

bool IsConnected()
{
    return (m_piCtrl != NULL);
}

HRESULT Disconnect()
{
    if (!IsConnected())
        return E_UNEXPECTED;        // not connected

    HRESULT hr = m_piCtrl->Disconnect();
    if (SUCCEEDED(hr)) m_piCtrl->Release();
    m_piCtrl = NULL;
    return hr;
} 
```

问题在于“GetPreview”，我不知道如何将 HBitmap 转换为位图。我试过这样：

```
 HRESULT GetImagePreview(BITMAP bm)
{   
    HBITMAP hB =NULL;

    tExCtrl *piCtrl = NULL;
    HRESULT hr = Ex_CreateController(__uuidof(ExCtrl), __uuidof(ExCtrl), (void **)&piCtrl);

hr = piCtrl->GetPreview(&hB);
hr = GetObject(hB, sizeof(BITMAP), &bm);
 return hr;
} 
```

但没有运气

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:43:41.227

C 代码看起来像是 MIDL 编译器生成的 COM 接口的一部分，因此您可以直接从 C# 中使用它而无需任何包装（只需添加对 COM 组件的引用）。但是，如果您选择使用 C++/CLI 包装器，请抛出异常而不是返回 HRESULT。

至于您的 GetImagePreview 方法，您只完成了一半的工作（您甚至没有返回任何 Bitmap 对象）。只需谷歌搜索“HBITMAP to Bitmap”，您就会得到很多结果。

# c# - 检查并将参数运行时传递给c#中的方法

> ID：14484195
> 
> 赞同：0
> 
> 时间：2013-01-23T16:14:35.197
> 
> 标签：c#, .net, reflection

如何在 c# 中检查函数所需的参数（类型、名称和顺序）？

我想要做的是以下内容：

在一个方法中，我有 4 个不同类型的变量（double、int、string、enum 等）。所有这些变量都需要传递给合适的函数（我的意思是方法）。有三个候选函数，每个函数都需要不同的参数集。

代码必须检查哪个函数有 4 个类型完全匹配的输入参数，并将我的变量传递给这个函数。如果没有找到匹配的函数，我的方法应该创建一个异常。提前感谢您的帮助。

小威

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:52:02.143

如果您知道给定的参数顺序正确，那么您可以查看每个参数是否可以从该位置的签名类型分配，这并不是那么糟糕：

```
public static MethodInfo CallMethod(MethodInfo[] candicateMethods, object instance, object[] parameters)
{
    foreach (var method in candicateMethods)
    {
        if (CallMethod(method, instance, parameters))
            return method;
    }
    return null;
}

private static bool CallMethod(MethodInfo method, object instance, object[] parameters)
{
    if (method.GetParameters().Length == parameters.Length
        && method.GetParameters()
        .Zip(parameters, (a, b) => new
        {
            Signature = a.ParameterType,
            Candidate = b.GetType()
        })
        .All(pair => pair.Signature.IsAssignableFrom(pair.Candidate)))
    {
        method.Invoke(instance, parameters);
        return true;
    }
    return false;
} 
```

如果还需要处理out/ref/params/etc。在签名中，它会变得更加复杂。

如果参数的顺序不正确，那么您需要为每个排列尝试`Zip`/ （可能切割整个分支，这可能通过回溯算法更容易，但它仍然可能*非常*耗时）。`All``parameters`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:43:34.797

尝试这个：

类程序{静态无效主要（字符串[]参数）{

```
 var method = typeof(Program).GetMethod("test");

        string parameterTypes = string.Join(", ", method.GetParameters().Select(x=>x.ParameterType));

        Console.WriteLine("{0} ({1})",                             
                          method.Name,
                          parameterTypes);

        Console.ReadKey();
    }

    public void test(int a, string c)
    {
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T16:19:41.463

（因为问题要求“运行时”匹配（vs.compile time），并且它被标记为反射，我会回答记住这一点）

通过反思，您可以获得根据您提到的类型做出决定所需的所有信息。例如，MethodInfo 包含两个可能与您相关的方法：

ReturnType：http: [//msdn.microsoft.com/en-us/library/system.reflection.methodinfo.returntype.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.returntype.aspx)

获取参数：http : [//msdn.microsoft.com/en-us/library/system.reflection.methodbase.getparameters.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.getparameters.aspx)

找到您要查找的函数后，您可以使用 .. Invoke 方法调用它：

[http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx](http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx)

没有更具体的例子，过程是：

对于一个类中的所有 MethodInfo(s)：

*   获取参数和返回类型
*   检查返回类型（如果需要）
*   如果参数中的类型和返回类型匹配，则完成

正如评论中提到的，第三点可能是困难的部分。这是编译器在选择最匹配的重载方法时通常会做的事情（即，当它从多个具有相同名称的方法中选择时，仅基于类型）。

但是，您的情况可能比一般问题更简单：确定有限数量的方法之一，具有固定数量的参数，按顺序请求的类型（以及确切的类型，即不需要隐式casts) 可以很容易地实现。您应该提供更多上下文。

如果您有有效的方法信息，请将参数作为对象数组传递以进行调用。警告：反射效率不是很高（它也不是很慢！）。仅当您确实需要它时才应该这样做，例如在一个好的 OO 设计对您没有帮助的情况下。*

# cakephp - Cakephp 在 find/paginate 中改变 virtualFieldId 的顺序

> ID：14484197
> 
> 赞同：0
> 
> 时间：2013-01-23T16:14:43.373
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我有一个模型，其中定义了一个虚拟字段 virtualfield01。当我调用这样的查找函数时。

```
$this->myModel->find('all', array(
      'fields' => array(
               'field01',
               'virtualfield01',
               'field02',
               'field03'))); 
```

结果总是给我。

```
myModel=>array(
       'field01' => 'value01'
       'field02' => 'value02'
       'field03' => 'value03'
       'virtualfield01' => 'virtualvalue01') 
```

虚拟字段始终作为结果的最后一个字段输出。

我怎样才能使订单与我在查找功能中的订单完全相同？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:20:32.270

正如@mark 提到的那样，您为什么不只是在您的观点中做类似以下的事情？

```
$this->Html->tableCells(array(
    $var['Model']['field01'],
    $var['Model']['virtualfield01'],
    $var['Model']['field02'],
    $var['Model']['field03'],
)); 
```

没有“重新排列动作”，您只是告诉数据如何显示，这就是为什么它是“视图”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:55:59.173

很简单，就像标记提到的那样。顺序无所谓。

# html - 我想设计我的桌子，如图所示

> ID：14484198
> 
> 赞同：-1
> 
> 时间：2013-01-23T16:14:46.057
> 
> 标签：html, css, html-table

![链接到图片](../Images/fe2a98c26cf6fa897df0c30518fc340c.png)

我希望我的表格看起来像带有 CSS 的图像。有没有办法做到这一点，因为我尽可能多地在我身边尝试但没有奏效。我会很感激你的帮助。

这是我的 HTML 代码

```
<div id="login_fields"> 
    <form id="login_form">
        <table>
          <tr>
            <td>User</td>
            <td><input type="text" name="user" id="user" /></td>
          </tr>
          <tr>
            <td>Password</td>
            <td><input type="password" name="password" id="password" /></td>
          </tr>
        </table>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:34:06.680

我可以建议将您的 HTML（`table`完全没有必要）修改为以下内容：

```
<form action="#" method="post">
    <!-- using a label means that clicking the text automatically focuses
         the relevant input, the value of the 'for' attribute must match the 'id'
         of the relevant input though -->
    <label for="uName">User</label>
    <input id="uName" />
    <label for="pass">Password</label>
    <input type="password" id="pass" />
</form> 
```

使用以下 CSS（根据口味修改颜色和尺寸）：

```
form {
    /* aesthetics, just to move the label/input pairs from the edge of the screen */
    padding: 1em;
}

label,
input {
    float: left; /* to allow for width to be given, and for clearing */
    border: 1px solid #999; /* amend the following as required */
    line-height: 1.2em;
    padding: 0.2em 0;
    font-size: 1em;
    height: 1.4em;
    margin-bottom: 0.8em;
}

input + label {
    clear: left; /* this styles a label element that immediately
                    follows an input, and forces a new-line */
}

label {
    text-indent: 0.5em; /* moves the text away from the curved corners */
    width: 30%;
    border-radius: 0.5em 0 0 0.5em; /* handles the curved corners */
}

input {
    width: 60%;
    border-radius: 0 0.5em 0.5em 0;
    outline: none;
}

input:focus,
input:active {
    box-shadow: inset 0 0 5px #55f; /* compensates for the fact I removed the
                                       default outline, and gives visual
                                       feedback to show the input is focused/active */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/GRKk5/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:25:43.273

我会开始用 TH 替换用户和密码的 TD，因为它们是表头。然后我会制作两张图片，一张左边是曲线，一张右边是曲线，然后我会在背景中应用。CSS 看起来像这样：

**表 tr th { 背景： url(bg-left.png) 无重复；宽度：100px；高度：40px；}**

**表 tr td { 背景： url(bg-right.png) 无重复；宽度：250px；高度：40px；}**

我删除了字体样式以使其易于阅读。

# c# - 如何对依赖于另一个字段的字段进行数据类型验证？

> ID：14484200
> 
> 赞同：0
> 
> 时间：2013-01-23T16:14:54.293
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, entity-attribute-value

我无法执行依赖于另一个字段的**数据类型验证。**我在这里找到的大多数示例都是基于另一个字段的值来使字段成为必需或不`MaidenName`必需（仅当`IsMarried`is时才需要`true`）。

我的模特

```
public class AttributeValuesModel
{
    public IList<AttributeModel> Values {get; set;}
}

public class AttributeModel
{
    [Required]
    public string AttributeName {get; set;}

    [Required]
    public string AttributeValue {get; set;}

    [Required]
    public int DataTypeId {get; set;}
} 
```

我想做的是根据 DataTypeId 的值验证 AttributeValue 的用户输入。为了清楚起见，`DataTypeId`我什至在向用户显示视图之前就知道 的值。

```
 //Possible values for DataTypeId are 
    //1 for decimal
    //2 for dates
    //3 for integer 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:19:05.437

您可以查看[`FoolProof`](http://foolproof.codeplex.com/)ASP.NET MVC 的验证扩展。它们包含验证属性，可用于执行条件验证，例如`[RequiredIf]`.

还有一个更强大的验证库（也是我使用和推荐的）是[`FluentMVC`](http://fluentmvc.codeplex.com/). 与验证数据注释相反，此库允许您执行命令式验证而不是声明式验证。这允许您表达任意复杂性和依赖属性之间的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:09:29.287

推出自己的验证属性并不难。我前段时间实施了一个。它检查其他属性的值是否小于使用此属性修饰的属性：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = true, Inherited=true)]
public class SmallerThanAttribute : ValidationAttribute
{
    public SmallerThanAttribute(string otherPropertyName)
    {
        this.OtherPropertyName = otherPropertyName;
    }

    public string OtherPropertyName { get; set; }
    public string OtherPropertyDisplayName { get; set; }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        return IsValid(OtherPropertyName, value, validationContext);
    }

    private ValidationResult IsValid(string otherProperty, object value, ValidationContext validationContext)
    {
        PropertyInfo otherPropertyInfo = validationContext.ObjectType.GetProperty(otherProperty);

        if (otherPropertyInfo == null)
        {
            throw new Exception("Could not find property: " + otherProperty);
        }

        var displayAttribute = otherPropertyInfo.GetCustomAttributes(typeof(DisplayAttribute), true).FirstOrDefault() as DisplayAttribute;

        if (displayAttribute != null && OtherPropertyDisplayName == null)
        {
            OtherPropertyDisplayName = displayAttribute.GetName();
        }

        object otherPropertyValue = otherPropertyInfo.GetValue(validationContext.ObjectInstance, null);

        var smaller = (IComparable) value;
        var bigger = (IComparable) otherPropertyValue;

        if (smaller == null || bigger == null)
        {
            return null;
        }

        if (smaller.CompareTo(bigger) > 0)
        {
            return new ValidationResult(string.Format(ValidatorResource.SmallerThan, validationContext.DisplayName, OtherPropertyDisplayName));
        }

        return null;
    }
} 
```

有一个问题。错误消息格式在资源类属性 (ValidatorResource.SmallerThan) 中定义，因此它不可插入——我不需要这个。但是，我认为这对您来说仍然是一个很好的起点。

# python - 具有 3 个或更多参数输入字段的函数调用 - function()()()

> ID：14484201
> 
> 赞同：5
> 
> 时间：2013-01-23T16:14:53.857
> 
> 标签：python, function

我正在研究 Python 中函数的属性，并且遇到了一个要求：

编写一个返回数字幂的函数。条件：该函数只能接受一个参数，并且必须使用另一个函数来返回给定数字的幂的值。

*解决这个练习的代码是：*

```
def power(x):
    return lambda y: y**x 
```

例如，如果我们想知道幂的值：2^3，我们可以这样调用函数：power(3)(2)

*这是我想知道的：*

有什么方法可以编写一个函数，在调用时具有类似的结构：function()()()。换句话说，是否可以编写一个在调用时需要三个或更多括号 ()()() 的函数？如果可能的话，你能给我一个该函数的示例代码并简要解释一下吗？

*还：*

```
def power(x):
    def power_extra(y):
        return y

    def power_another(z):
        return z

    return power_extra and power_another 
```

可能的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:18:25.627

你当然可以：

```
def power_times(k):
    """use as power_times(k)(x)(y) => k * y^x"""
    return lambda x: lambda y: k * y**x

print power_times(2)(3)(4)  # returns 2 * 4^3 = 128 
```

当您使用参数 2 ( `power_times(2)`) 调用此函数时，它会返回一个 lambda 函数，其工作方式类似于`lambda x: lambda y: 2 * y ** x`（即，与您的原始函数一样，只是多了一个“乘以 2”）。

您可以根据需要将任意数量的 s 堆叠`lambda`在一起：

```
def many_lambdas(x):
    """many_lambdas(x)(y)(z)(q) => x + y * z^q"""
    return lambda y: lambda z: lambda q: x + y * z ** q

print many_lambdas(1)(2)(3)(4) # prints 163 
```

事实上，如果你`def`完全跳过使用它可能会更清楚，只是写道：

```
many_lambdas = lambda x: lambda y: lambda z: lambda q: x + y * z ** q 
```

或者，或者，您可以跳过使用`lambda`ever 并将它们用作嵌套函数：

```
def many_funcs(x):
    def many_funcs_y(y):
        def many_funcs_z(z):
            def many_funcs_q(q):
                return x + y * z ** q
            return many_funcs_q
        return many_funcs_z
    return many_funcs_y

print many_funcs(1)(2)(3)(4)  # prints 163 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T16:29:51.410

@David 的回答会恰当地回答您关于固定嵌套函数调用的问题。对于未定义的嵌套，您可能希望定义一个类并重载该`__call__`方法以及`__repr__`服务`__int__`于您的目的。

```
>>> class Power(object):
    def __init__(self, value):
        self.value = value
    def __call__(self, value):
        self.value **= value
        return self
    def __int__(self):
        return self.value
    def __repr__(self):
        return str(self.value)

>>> print Power(2)(2)(2)(2)(2)
65536
>>> int(Power(2)(2)(2)(2)(2)) / 2
32768 
```

# android - 可以具体拆分 ActionBarSherlock 项目吗？

> ID：14484212
> 
> 赞同：2
> 
> 时间：2013-01-23T16:15:29.637
> 
> 标签：android, android-actionbar, actionbarsherlock

> **可能重复：**
> [Android 拆分操作栏，顶部和底部都有操作项？](https://stackoverflow.com/questions/8571754/android-split-action-bar-with-action-items-on-the-top-and-bottom)

我正在尝试在我的应用程序上使用 ActionBarSherlock 库。我想在顶栏中有一个标题和两个不可点击的图标，在底栏中有 4 个剩余的操作。我已经放入`android:uiOptions="splitActionBarWhenNarrow"`了我的 AndroidManifest，但似乎我无权决定哪些图标在哪里。

**编辑**

通过哪个图标去哪里，我的意思是如果使用`android:uiOptions="splitActionBarWhenNarrow"`呼叫，**所有**的动作都被移动到底部栏。如果我不使用它，所有操作都保留在顶部栏上。

# eclipse - 斐波那契数列错误

> ID：14484213
> 
> 赞同：1
> 
> 时间：2013-01-23T16:15:30.317
> 
> 标签：eclipse, fibonacci

我在 Eclipse 中编写一个斐波那契序列，这是我的代码-

```
public class FibonacciAlgorithm {
    private int a = 0;
    private int b = 1;

    public FibonacciAlgorithm() {
    }

    public int increment() {
        int temp = b;
        b = a + b;
        a = temp;
        return value;
    }

    public int getValue() {
        return b;
    }
} 
```

`return value;`它在行中显示错误`value cannot be resolved to a variable`。我没有看到任何其他错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:22:21.383

您的方法返回一个 int 变量，因此您必须定义并返回`value`一个 int

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:16:42.313

在哪里`value`定义？您返回的东西在任何地方都没有定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:24:56.317

您没有定义“价值”，这是您的错误。我不记得确切的事情了，但我认为您不需要 a 和 b，我在我的代码存档中找到了这个，希望对您有所帮助。

```
public class Fibonacci
{
    public static long fibo(int n)
    {
        if (n <= 1) return n;
        else return fibo(n - 1) + fibo(n - 2);
    }

    public static void main() {
        int count = 5; // change accordingly, bind to input etc.
        int N = Integer.parseInt(count);
        for (int i = 1; i <= N; i++)
            System.out.println(i + ": " + fibo(i));
        }
} 
```

如果您想保留自己的代码，请尝试返回“b”作为值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T16:26:58.517

我不确定你想做什么。如果你有“getValue”方法，我认为“increment”方法应该是无效的。当您想要当前的斐波那契值时，请使用“getValue”方法。

```
 public class FibonacciAlgorithm {

        private int a = 0;
        private int b = 1;     

        public FibonacciAlgorithm() {

        }

        public void increment() {
            int temp = b;
            b = a + b;
            a = temp;
        }

        public int getValue() {
            return b;
        } 
```

# c++ - 为什么 perror 在错误处理代码中没有被广泛看到是有原因的？

> ID：14484214
> 
> 赞同：7
> 
> 时间：2013-01-23T16:15:31.500
> 
> 标签：c++, c, error-handling

查看 stackoverflow 或其他地方的代码，我似乎很少看到 perror() 用于报告错误的确切性质。printf 更为常见。这是否表明 perror 有问题或缺失？我希望它可以更频繁地使用，因为它提供了更好的信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T16:31:24.503

我个人更喜欢`strerror()`它做大致相同的事情，但允许您将错误消息与 printf 或类似函数一起使用，从而提供进一步的有用[对程序的编码员或用户，具体取决于错误的类型]。

例如：

```
errno = 0;
FILE *f = fopen(argv[1], "rb");
if (!f)
{
    fprintf(stderr, "File %s open failed: error code %d ('%s')\n", 
            argv[1], errno, strerror(errno));
    exit(1);
} 
```

这样，我们也知道哪个文件（假设它是一个复制文件的程序，perror 不一定会告诉你它是“源”还是“目标”）。

如果错误是由于编程错误[或“预计不会出错的东西”]，您还可以执行以下操作：

```
#define UNEXPECTED(cond) do { if (cond) { do_unexpected(errno, #cond, __FILE__, __LINE__); } while(0)

void do_unexpected(int err, const char* cond, const char *file, int line)
{
    fprintf(stderr, "Unexpected error %s [errno=%d, errstr=%s] at %s:%d", 
            cond, err, strerror(errno), file, line);
    exit(1);
}

errno = 0;
FILE *config = fopen("config.txt", "r");

UNEXPECTED(!config); 

... 
```

这是假设您不希望删除“config.txt”作为示例[这通常是非常糟糕的编程，但也许有一个正当的理由......]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:19:36.827

perror() 不会准确地为您提供发生错误的行号，而您的 printf() 将帮助您识别正在打印的确切行。所以我认为它对调试更有帮助，我所知道的 perror() 没有错......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T16:43:29.837

如果您`errno`在进行标准库调用之前设置为零并且该调用失败并且它是`errno`用于描述其失败原因的调用之一，那么`perror`并且`strerror`可能会提供有用的解释。大多数人不注意`errno`，更不用说如何正确使用它了。这是更简单时代的产物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T17:39:09.167

由于我使用的是 C++，所以我不使用 printf() 和 co，并且经常在启动时调用 sync_with_stdio(false)。此外，该功能的问题在于它只允许在本地打印错误。我经常遇到的是这样的：

```
// setting errno
if(!foo1(bar))
    throw_errno_exception("foo1");

// returning errorcode
if(int e = foo2(bar))
    throw_exception(e, "foo2"); 
```

首先，不是每个函数都使用 errno。特别是对于新代码，我也不会这样做，而只是返回`int`相应的错误代码。因此，对于那些“新”功能，我必须在使用之前手动设置 errno `perror()`。但是，我也不希望这样，因为失败的函数和我捕获'n'记录异常的地方之间通常有很大的差距。

现在，在 C 中，您无法像在 C++ 异常中那样将附加信息向上传递。出于这个原因，在 C 中记录实际失败的函数和失败位置的任何上下文更为重要。

# bash - 使用 sed 或 awk 从字段中删除斜杠

> ID：14484220
> 
> 赞同：1
> 
> 时间：2013-01-23T16:15:51.967
> 
> 标签：bash, scripting, sed, awk

我正在尝试删除任何 | 之间的任何斜杠 之间的 \ \ 其中包括一个名字'

```
10.46|5060|100002366551140|\WAPNER| M\ |100002366551750 
```

期望的输出

```
10.46|5060|100002366551140|WAPNER M |100002366551750 
```

在使用 sed 或 awk 时，非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:32:06.800

```
$ cat file
10.46|5060|100002366551140|\WAPNER| M\ |100002366551750

$ sed 's/\\\([^\\]*\)|\([^\\]*\)\\/\1\2/' file
10.46|5060|100002366551140|WAPNER M |100002366551750 
```

如果您不想删除“\”，只需将它们移到括号内即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:00:24.953

如果有多个反斜杠，您可以尝试替代 awk：

```
awk -F\| '!(NR%2){$1=$1}1' RS=\\ ORS= OFS= file 
```

或者：

```
awk -F\\ '{for(i=2; i<=NF; i+=2) gsub(/\|/,x,$i)}1' OFS= file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:39:21.170

如果您需要处理这样的情况：

```
10.46|5060|100002366551140|\WAPNER| M\ |100002366551750
10.12|\FOO| BAR| BAZ\|12|\X| Y| Z\|14 
```

我不认为你可以用 sed 轻松做到这一点，因为需要迭代地对匹配的正则表达式的部分应用替换。

在 Python 中执行此操作非常简单。`doit.py`：

```
#!/usr/bin/env python2.7

import re
import sys

RE = re.compile(r'\\([^\\]*\|[^\\]*)\\')

for line in sys.stdin.readlines():
    matchiter = RE.finditer(line)
    while 1:
        for match in matchiter:
            matching_text = match.group(0)
            replacement_text = match.group(1).replace('|', '')
            line = line.replace(matching_text, replacement_text)
        else:
            break
    print line, 
```

在伪代码中：

*   虽然 s 之间有任何`|`符号`\`：

    *   抓住`\`'s 之间的部分（ `match.group(1)`在 Python 中访问），然后去掉 `|`里面的 s 。另存为`replacement_text`
    *   然后替换匹配的原始文本，包括`\`'s，with `replacement_text`，和loop

有用！

```
$ cat input
10.46|5060|100002366551140|\WAPNER| M\ |100002366551750
10.12|\FOO| BAR| BAZ\|12|\X| Y| Z\|14
$ ./doit.py < input
10.46|5060|100002366551140|WAPNER M |100002366551750
10.12|FOO BAR BAZ|12|X Y Z|14 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T05:29:22.380

试试这个

`sed -re 's/\\(\w+)(\|)([ A-Za-z]+)\\/\1 \3/g' temp.txt`

输出

`10.46|5060|100002366551140|WAPNER M |100002366551750`

# jquery - 由 JQuery 动态添加的带有 CSS3 装饰的复选框未正确显示

> ID：14484222
> 
> 赞同：0
> 
> 时间：2013-01-23T16:15:57.403
> 
> 标签：jquery, css, dynamic

我有如下的html：

```
<ul class="group">
    <label class="category">
        <div class="lightpoint">
                <input type="checkbox" class="parentB" value="{{>name}}" /><label></label>
        </div>
    </label>
    <li>
        <div class="lightpoint">
                <input type="checkbox" class="childB" value="{{>name}}" ><label></label>
        </div>
    </li>
</ul> 
```

以上 html 片段是由 Jquery 动态添加的。

javascript:

```
$('.parentB').on("click", function(event){
                var isChecked = $(this).is(':checked');
                $(this).parent().parent().siblings().find('.childB').attr("checked", isChecked);
    }); 
```

我使用firefox检查了firebug中html的变化。单击“.parentB”时，“.childB”的选中状态会被真正修改。但看起来什么都没有发生。我的意思是它应该看起来与相应的检查状态，但实际上不是。

它是由 CSS3 引起的吗？

**现在我有了答案。我没有把自己说得很清楚。我使用的 jquery 版本是 1.9.0，这只是关于 jquery 版本。当我将其更改为 1.8.3 时它运行良好。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:22:10.063

你有无效的 html`ul`应该有`li`这样的直接孩子。您的脚本正在运行，但更改 html 需要更改脚本

**[现场演示](http://jsfiddle.net/rajaadil/DBx2k/)**

```
<ul class="group">
   <li>  
    <label class="category">
        <div class="lightpoint">
            <input type="checkbox" class="parentB" value="{{>name}}" />
            <label></label>
        </div>
    </label>
    </li>   
    <li>
        <div class="lightpoint">
            <input type="checkbox" class="childB" value="{{>name}}">
            <label></label>
        </div>
    </li>
</ul>

$('.parentB').on("click", function (event) {
    var isChecked = $(this).is(':checked');
    $(this).closest('li').next('li').find('.childB').attr("checked", isChecked);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:20:26.523

`.parentB`执行该脚本时不存在，因此实际上没有处理程序被绑定。

你有2个选择，

1.  通过将处理程序绑定到父元素并查找目标元素来使用委托事件。别担心，使用正确的语法。jQuery 可以很好地为您做到这一点。见下文，

    ```
    $(document).on('click', '.parentB', function(event){
       var isChecked = $(this).is(':checked');
       $(this).parent().parent().siblings().find('.childB').attr("checked", isChecked);
    }); 
    ```

2.  将这些动态 html 附加到 DOM 后绑定处理程序。

在大多数情况下，第 2 点更可取，但在某些情况下，第 1 点更好。

# node.js - 如何在 websockets 中提供初始页面

> ID：14484223
> 
> 赞同：-1
> 
> 时间：2013-01-23T16:16:03.800
> 
> 标签：node.js, websocket

好的，所以我的问题是关于 websockets api...不是 socket.io。`npm install websocket`

这是我的问题。

我编写了一个小的 websockets 服务器，它可以接收消息、解释文本消息并将其与一些额外的文本一起发送回去。很简单。

该消息来自一个 index.html 文件，其中包含一个 javascript...脚本。一切都按预期工作。节点服务器在我的机器上本地运行，当我想测试它时，我只需启动服务器，然后双击运行脚本的 index.html 文件，该脚本启动与节点的新连接并完成。

我想要的是能够将我的浏览器导航到“localhost”，并且服务器首先向客户端提供 index.html 文件，然后该文件将与服务器建立连接。

如果需要连接来获取 index.html 文件，用户如何通过简单地导航到 url（在我的例子中为 localhost）来获取 index.html 文件。在 Socket.io 中，它看起来像这样：

```
app.use(express.static(__dirname + '/public'));
app.get('/', function(req, res) {}); 
```

如果我的问题仍然不清楚，这里是一个改写：用户需要能够访问我的 url（本地主机，因为节点在本地运行）并接收 index.html。就像，所有对根的请求都会在公共目录中收到一个 index.html 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:35:22.613

您正在使用的[模块](https://github.com/Worlize/WebSocket-Node)包含一个[完整示例](https://github.com/Worlize/WebSocket-Node/blob/master/example/whiteboard/whiteboard.js) ，说明如何将其与 Express 一起使用。看起来它是为 Express 2 API 编写的，因此如果您使用的是 Express 3 ，则必须对其进行[调整：](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)

```
var app = require('express')()
  , http = require('http')
  , server = http.createServer(app)
  , WebSocketServer = require('websocket').server;

var wsServer = new WebSocketServer({
    httpServer: server
});

server.listen(80); 
```

# tabs - Spry 选项卡式面板 有些选项卡有效，有些则无效

> ID：14484226
> 
> 赞同：0
> 
> 时间：2013-01-23T16:16:11.847
> 
> 标签：tabs, nested, spry, tabbed

我目前正在站点中使用 Spry 选项卡式面板。我在另一组面板中嵌套了一组面板。我的问题是第一个面板中的 4 个选项卡中有 2 个不起作用。并且嵌套面板集中的四个选项卡中的两个不起作用。

以下是该网站的示例链接： [http ://emilymagnuson.com/trustbank/index.html](http://emilymagnuson.com/trustbank/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:22:35.580

您的 HTML 结构看起来已损坏。如果你想让 spry 正常工作，你需要解决这个问题。例如，在源代码的第 336 行有一个额外的`</div>`结束标记。我会检查您的代码并确保您的所有 HTML 元素都放置正确。

# asp.net-mvc - asp.net mvc 应用程序需要从“服务”访问用户谷歌驱动器帐户

> ID：14484228
> 
> 赞同：2
> 
> 时间：2013-01-23T16:16:17.857
> 
> 标签：asp.net-mvc, oauth-2.0, google-drive-api

我正在编写一个网络应用程序，让我们的客户可以将他们在个人 Google Drive 上的文件同步到我们的业务应用程序上。（仅限有限的文件类型）。

所以 - 到目前为止有效：

*   用户注册到应用程序（使用 OAuth2 并在我的最后保存一个 refreshtoken）用户/和我的应用程序，现在可以访问他们云端硬盘上的文件，并且可以**手动**调用文件传输。

工作正常。

*   用户之后可以再次登录并重复此操作，而无需再次验证应用程序。美好的。

*   同时，我需要某种“服务”，通过我们的应用程序的用户群循环并自动同步指定文件夹中的文件 - 比如说每 10 分钟。

现在由于 OAuth2 模型而遇到问题，需要重定向以验证每个用户。但是我不能从一个请求中进行多次重定向，比如“/SyncAllUsers”。此外，当仅使用一个用户进行测试时，用户仍然必须登录到浏览器会话，否则 google 将重定向到服务登录页面。

（我们使用 chron-job 以指定的时间间隔调用这些方法 - 它与 dropbox-accounts 配合良好，这些用户也使用 OAuth）

* * *

所以基本上2个问题：

*   如何使用我已经授权的应用程序访问我的用户云端硬盘帐户，而无需用户“登录”
*   以及我应该如何处理同步服务以运行而不必重定向每个用户。

[我花了几天时间在https://developers.google.com/drive/](https://developers.google.com/drive/)和这里寻找答案。我有暗示。来自这里的 OAuth 代码[https://developers.google.com/drive/credentials#retrieve_oauth_20_credentials](https://developers.google.com/drive/credentials#retrieve_oauth_20_credentials) 我修改了它，所以它使用我自己的用户数据库。

在 Google API 控制台中使用 Web 应用程序的客户端 ID 获取您的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T06:25:23.810

获得刷新令牌后，您可以使用它执行同步而无需用户干预。这是`offline`访问的本质和刷新令牌的全部目的。

（对不起，如果这不能回答你的问题，我不确定你在问什么，所以请解释更多，我会尽量给你一个不同/更好的答案。）

# javascript - 如何在没有 JS 的情况下使最初加载为隐藏的切换将其识别为不可见？

> ID：14484230
> 
> 赞同：0
> 
> 时间：2013-01-23T16:16:29.970
> 
> 标签：javascript, toggle

理想情况下，我想要 2 个切换器。当单击字段集切换器时，字段集会显示，其中隐藏了一个 div。当事件发生或单击 div 切换器时，会显示 div。 **我只能管理 2 个切换器中的一个工作。**

这是html

```
<a href="#" class="fieldset-toogler-trigger">click here</a>
<fieldset class="fieldset" style="display:none">
<input>//first inputs
<input> 2nd input
<input id="edit-text" name="custom-text" type="checkbox value=""/>
<div id="wrapper">include several fields that initially hidden</div>
</fieldset> 
```

这是字段集的切换器：

```
$("a.fieldset-toggle-trigger").click(function() {
  $(".fieldset").toggle();
} 
```

div 切换器位于另一组代码中：

```
var e_fields = $("div#wrapper");
    //fadein/fadeout with an event:
    function bindEditTextClick(){
      $("input#edit-text").click( function() {
      if ($(this).attr('checked')) {
        e_fields.fadeIn(750);
      } else {
        e_fields.fadeOut(750, function() {
      });
    }
    });
    }

    //toggle as a part of another live click fuunction:
    if (e_fields.is(':visible')) {
        e_fields.fadeOut(500);
    } 
```

**如果我让最初加载的字段集可见，则内部切换可以正常工作。**这个内部切换连接到其他事件，不容易修改。如何修改字段集切换器以允许内部切换继续工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:32:51.713

如果我让你正确，你想切换主要部分，然后切换内部部分取决于复选框状态。是这样，代码和工作解决方案如下：

**html**

```
<a href="#" class="fieldset-toogler-trigger">click here</a>
<fieldset class="fieldset">
    <input /><br />
    <input /><br />
    <input id="edit-text" name="custom-text" type="checkbox" value=""/>
    <div id="wrapper">include several fields that initially hidden</div>
</fieldset> 
```

**css**

```
fieldset { display:none; }
#wrapper { display:none; } 
```

**js**

```
$(function() {
    $(".fieldset-toogler-trigger").click(function() {
        $(".fieldset").toggle();
    });
    $("#edit-text").change(function() {
        var action = 'fadeOut';
        if ($(this).is(':checked')) {
            action = 'fadeIn';
        }
        $('#wrapper')[action](750);
    });
}); 
```

**jsfiddle**

[http://jsfiddle.net/y7PKk/](http://jsfiddle.net/y7PKk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:17:19.800

获得了切换整个字段集而不弄乱内部切换的解决方案：最初移开字段集而不是隐藏字段集：

```
.moveaway{
    position:absolute;left:-999em;
} 
```

然后，使用字段集切换器来打开/关闭移动类。

# reference - Corona 中显示对象的默认参考点

> ID：14484235
> 
> 赞同：0
> 
> 时间：2013-01-23T16:16:58.163
> 
> 标签：reference, coronasdk, displayobject

我正在尝试了解 Corona 中的这些参考点。据说默认参考点是对象的中心，但是当我运行此代码时，textObject 中心的 x 位置不是 100 而是 150：

```
 local textObject = display.newText(  "Hello World!", 100, 100, nil , 20 ) 
```

我在屏幕上显示了带有触摸事件的位置，并打印了触摸位置的 x 和 y 位置：

```
 local function onScreenTouch(event)
      print("x: "..event.x.."  y: "..event.y);
  end
  Runtime:addEventListener("tap", onScreenTouch) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T22:13:20.833

非常好的问题，这让我发疯了很长时间。

默认情况下，参考点是 display.CenterReferencePoint，除非您将 X、Y 作为参数传递给 API 调用。在大多数情况下（对于矩形），传递 X、Y 成为仅用于对象初始绘制的左上角参考点。线条当然是您通过端点，对于圆圈，您的 X，Y 是中心。

```
myRect = display.rect(X, Y, width, height)  -- X, Y = Top, Left 
```

在这种情况下，X 和 Y 代表框的左上角，但是如果你这样做之后：

```
myRect.x = X -- X = center of object
myRect.y = Y -- Y = center of object 
```

那么您现在正在使用中心参考点，除非您明确将其更改回其他内容。现在因为这令人困惑，我倾向于这样做：

```
myRect = display.rect(0,0, width, height)
myRect.x = 100
myRect.y = 100 
```

就像我真的只使用中心点定位事物的一种方式。

希望能解释一下。

抢

# php - 如果在 6 页计数后未登录重定向？

> ID：14484240
> 
> 赞同：0
> 
> 时间：2013-01-23T16:17:11.433
> 
> 标签：php, redirect, count

我试图让这个脚本正常工作，但没有任何运气，请有人告诉我我需要做什么。

目前，脚本计算页面被访问的次数，如果计数达到 6，则将用户重定向到另一个页面。

它应该只在用户未登录时重定向，但它也会在用户登录时重定向用户。请有人告诉我我哪里出错了。

谢谢。

```
<?
    !session_id() ? session_start() : null;

    if(!isset($_SESSION['logged_in']) && empty($_SESSION['logged_in'])){
        verify_profile_visit_limit();
    }

    function verify_profile_visit_limit(){
        $free_profiles = array(99999,99998,99997,99996,99995,99994,99993);

        if(in_array($_GET["id"], $free_profiles)) return;

        if(! isset($_SESSION["page_access_count"])){
            $_SESSION["page_access_count"] = 1;
        }

        $_SESSION["page_access_count"]++;

        if($_SESSION["page_access_count"] > 6){
            header("Location: limit.php");
            exit();
        }
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:19:14.300

添加“已登录？” 检查页数检查：

```
 if (($_SESSION["page_access_count"] > 6) && (!isset($_SESSION['logged_in'])) 
```

如果他们已登录，则检查失败并且他们不会被重定向。

# visual-c++ - 将 int 转换为 UINT32

> ID：14484241
> 
> 赞同：0
> 
> 时间：2013-01-23T16:17:13.053
> 
> 标签：visual-c++, directx-11

好的，这就去。我正在为directx 创建包装器并使用类型。我知道我很可怕，但请指出我正确的方向。

```
Platform::Array<short>^ Font::GetGlyphIndices(const Platform::Array<int>^ codePoints)
{
font->GetGlyphIndices(const UINT32 *codePoints, UINT32 count, UINT16 *indices);

Platform::Array<short>^ in; //should return indices

return in;
} 
```

如何转换类型？VS 抛出错误为`"signature of public member contains native type 'int []'"`. 所以，更新代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:35:04.917

您正在使用托管 C++ 和本机 C++。所以最好的办法是分配 UINT32 的本机指针（数组），从本机函数获取数据并运行循环以将值获取到托管数组（`in`）中。然后返回。您不能也不应该混合托管和非托管内存。所以，非常赞成为数组写*转换！*

# java - java中扩展和实现线程概念的区别

> ID：14484242
> 
> 赞同：0
> 
> 时间：2013-01-23T16:17:13.493
> 
> 标签：java, multithreading

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T16:20:09.493

始终建议实施`Runnable`而不是扩展`Thread`，因为实施 Runnable 会**迫使**您实施`run() method`. 扩展 Thread 不会强迫您作为 Thread 类它自己实现 run 方法。同样，当您的类已经在扩展另一个类并且您需要在实现 Runnable 的类中使用线程时，java 不支持使用类的多重继承是在这种情况下的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:19:56.280

来自[Java 教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html)：

> 您应该使用以下哪个成语？第一个使用 Runnable 对象的习惯用法更通用，因为 Runnable 对象可以继承 Thread 以外的类。第二个习惯用法更容易在简单的应用程序中使用，但受限于您的任务类必须是 Thread 的后代。

通常建议使用`Runnable`，就好像你是子类一样`Thread`，你不能从多个类继承`Java`，所以你受到这种方式的限制。

# c# - 如何将依赖项名称作为构造函数参数注入

> ID：14484243
> 
> 赞同：5
> 
> 时间：2013-01-23T16:17:16.627
> 
> 标签：c#, .net, autofac, property-injection

使用 Autofac，我可以注册一个类以使用属性注入来解析接口，使用以下代码：

```
builder.RegisterType<Log4NetAdapter>()
       .As<ILogger>()
       .PropertiesAutowired()
       .InstancePerDependency(); 
```

但是，我的`Log4NetAdapter`类有一个构造函数参数，它需要调用类的名称。这样，我可以根据调用类的名称记录事件。

```
public class Log4NetAdapter : ILogger
{
    private readonly ILog _logger;

    public Log4NetAdapter(string logName)
    {
        _logger = LogManager.GetLogger(logName);
    }

    ...
} 
```

`typeof(dependency).Name`鉴于每个依赖项都有自己的`Log4NetAdapter`实例，我如何将依赖项的名称（即）注入到属性注入类的构造函数中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:52:11.643

**更新：**在[LogInjectionModule](http://code.google.com/p/autofac/wiki/Log4NetIntegration)示例以及[Autofac 如何进行属性注入](http://code.google.com/p/autofac/source/browse/Core/Source/Autofac/Core/Activators/Reflection/AutowiringPropertyInjector.cs)的基础上，我扩展了模块以进行构造函数和属性注入。

注意：我已经修复了传入的类型`LogManager`以`OnComponentPreparing`使用声明类型。这使得例如`Resolve<Func<Service>>`使用正确的日志类型。

```
 using System.Linq;
    using log4net;

    public class LogInjectionModule : Module
    {
        protected override void AttachToComponentRegistration(IComponentRegistry registry, IComponentRegistration registration)
        {
            registration.Preparing += OnComponentPreparing;
            registration.Activating += OnComponentActivating;
        }

        private static void OnComponentActivating(object sender, ActivatingEventArgs<object> e)
        {
            InjectLogProperties(e.Context, e.Instance, false);
        }

        private static void OnComponentPreparing(object sender, PreparingEventArgs e)
        {
            e.Parameters = e.Parameters.Union(new[]
                {
                    new ResolvedParameter(
                       (p, i) => p.ParameterType == typeof(ILog),
                       (p, i) => LogManager.GetLogger(p.Member.DeclaringType))
                });
        }

        private static void InjectLogProperties(IComponentContext context, object instance, bool overrideSetValues)
        {
            if (context == null) throw new ArgumentNullException("context");
            if (instance == null) throw new ArgumentNullException("instance");

            var instanceType = instance.GetType();
            var properties = instanceType
                .GetProperties(BindingFlags.Public | BindingFlags.Instance)
                .Where(pi => pi.CanWrite && pi.PropertyType == typeof(ILog));

            foreach (var property in properties)
            {
                if (property.GetIndexParameters().Length != 0)
                    continue;

                var accessors = property.GetAccessors(false);
                if (accessors.Length == 1 && accessors[0].ReturnType != typeof(void))
                    continue;

                if (!overrideSetValues &&
                    accessors.Length == 2 &&
                    (property.GetValue(instance, null) != null))
                    continue;

                ILog propertyValue = LogManager.GetLogger(instanceType);
                property.SetValue(instance, propertyValue, null);
            }
        }
    } 
```

关于如何使用该模块，这里有一个示例：

```
public class Service
{
    public Service(ILog log) { ... }
}

var cb = new ContainerBuilder();
cb.RegisterModule<LogInjectionModule>();
cb.RegisterType<Service>();
var c = cb.Build();

var service = c.Resolve<Service>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:46:27.007

您仅用于`logName`通过名称有效解析 an `ILog`，那么为什么不直接注入 an`ILog`呢？

```
public class Log4NetAdapter : ILogger
{
    private readonly ILog _logger;

    public Log4NetAdapter(ILog logger)
    {
        _logger = logger;
    }

    ...
} 
```

好的，所以现在我只是稍微移动了这个问题，但我也减少了它与其他类的耦合，即`LogManager`.

所以如果我使用统一，我会这样做以确保我得到正确的记录器：

```
var childContainer = container.CreateChildContainer();
childContainer.RegisterInstance<ILog>(LogManager.GetLogger(logName));
var adaptor = childContainer.Resolve<Log4NetAdapter>(); 
```

子容器阻止任何其他代码访问它`ILog`。您可以随心所欲地执行此操作，我对您的代码一无所知。

# hibernate - “mappedBy”引用了一个未知的目标实体属性：在 JPA 中的一对多映射中

> ID：14484245
> 
> 赞同：1
> 
> 时间：2013-01-23T16:17:24.683
> 
> 标签：hibernate, jpa

我收到以下异常

```
"org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.vzbi.impact.iam.common.models.AutomationCFScripting.ruleId in com.vzbi.impact.iam.common.models.AutomationScriptIds.multiTabSet" 
```

我拥有的实体模式如下，

```
//trying to map from rowId of AutomationScriptIds to ruleId of AutomationCFScripting with one-to-many
//both rowId and ruleId is available in entity Category which is extended by AutomationScriptIds and AutomationCFScripting

@Entity
@Table(name="AUTOMATION_SCRIPT_IDS")
public class AutomationScriptIds extends Category implements Serializable, MultiTabCategory {
---
     @OneToMany(cascade=CascadeType.ALL, targetEntity=AutomationCFScripting.class, mappedBy="ruleId",       fetch=FetchType.EAGER)             
     public Set<? extends Category> getMultiTabSet() {        
        return getSetValue(RuleFieldKeys.MULTITAB);
    }
---
}

@Entity
@Table(name="AUTOMATION_CFSCRIPTING")
public class AutomationCFScripting extends Category implements java.io.Serializable{
-----
}

@Entity
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
public abstract class Category extends DataMap
{
---
    @Id
    @GeneratedValue(generator = "uuid")
    @GenericGenerator(name = "uuid", strategy = "uuid")
    @Column(name="ROW_ID")
    public String getRowId() {
        return getStringValue(RuleFieldKeys.ROW_ID);
    }

    @Column(name="RULE_ID")
    public String getRuleId() {
        return getStringValue(RuleFieldKeys.RULE_ID);
    }
---
} 
```

# unix - Solaris 5.9 问题

> ID：14484247
> 
> 赞同：0
> 
> 时间：2013-01-23T16:17:37.003
> 
> 标签：unix, exception, solaris, strlen

有人知道我该如何解决以下问题吗？我对 UNIX/Solaris 并不熟悉。我用谷歌搜索了它，我找到[了一些信息](http://technopark02.blogspot.com/2006/04/solaris-null-pointer-bugs-usrlib00so1.html)。

```
An unexpected exception has been detected in native code outside the VM.
Unexpected Signal : 11 occurred at PC=0xFF2B44E4
Function=strlen+0x80
Library=/usr/lib/libc.so.1

Current Java thread:
        at com.tertio.tome.Tome.init0(Native Method)
        at com.tertio.tome.TomeConfig.<init>(TomeConfig.java:42)
        at com.tertio.tome.Tome.initConfig(Tome.java:124)
        at com.tertio.tome.Tome.initConfig(Tome.java:118)
        at com.tertio.provident.rmi.server.ServerConfig.<init>(ServerConfig.java:28)
        at com.tertio.provident.cli.Cli.connect(Cli.java:38)
        at com.tertio.provident.cli.Admin.main(Admin.java:23)

Dynamic libraries:
0x10000         /oracle/product/home0/jre/1.4.2/bin/java
0xff370000      /usr/lib/libthread.so.1
0xff3fa000      /usr/lib/libdl.so.1
0xff280000      /usr/lib/libc.so.1
0xff3a0000      /usr/platform/SUNW,Sun-Fire/lib/libc_psr.so.1
0xfec00000      /oracle/product/home0/jre/1.4.2/lib/sparc/client/libjvm.so
0xff230000      /usr/lib/libCrun.so.1
0xff210000      /usr/lib/libsocket.so.1
0xff100000      /usr/lib/libnsl.so.1
0xff1c0000      /usr/lib/libm.so.1
0xff0e0000      /usr/lib/libsched.so.1
0xff0b0000      /usr/lib/libmp.so.2
0xff070000      /oracle/product/home0/jre/1.4.2/lib/sparc/native_threads/libhpi.so
0xfebd0000      /oracle/product/home0/jre/1.4.2/lib/sparc/libverify.so
0xfeb90000      /oracle/product/home0/jre/1.4.2/lib/sparc/libjava.so
0xff040000      /oracle/product/home0/jre/1.4.2/lib/sparc/libzip.so
0xfe3b0000      /ACS/DEV/users/dvprv02/prov52/lib/libjtome.so
0xfcbb0000      /ACS/DEV/users/dvprv02/prov52/lib/libtome.so
0xfe390000      /ACS/DEV/users/dvprv02/prov52/lib/libtome_ev.so
0xfcad0000      /oracle/product/home0/jre/1.4.2/lib/sparc/libnet.so

Heap at VM Abort:
Heap
 def new generation   total 2112K, used 476K [0xf1c00000, 0xf1e20000, 0xf2310000)
  eden space 2048K,  23% used [0xf1c00000, 0xf1c77230, 0xf1e00000)
  from space 64K,   0% used [0xf1e00000, 0xf1e00000, 0xf1e10000)
  to   space 64K,   0% used [0xf1e10000, 0xf1e10000, 0xf1e20000)
 tenured generation   total 1408K, used 0K [0xf2310000, 0xf2470000, 0xf5c00000)
   the space 1408K,   0% used [0xf2310000, 0xf2310000, 0xf2310200, 0xf2470000)
 compacting perm gen  total 4096K, used 1223K [0xf5c00000, 0xf6000000, 0xf9c00000)
   the space 4096K,  29% used [0xf5c00000, 0xf5d31c80, 0xf5d31e00, 0xf6000000)

Local Time = Wed Jan 23 18:03:25 2013
Elapsed Time = 0
#
# The exception above was detected in native code outside the VM
#
# Java VM: Java HotSpot(TM) Client VM (1.4.2_03-b02 mixed mode)
#
# An error report file has been saved as hs_err_pid11057.log.
# Please refer to the file for further information.
#
Abort (core dumped) 
```

# c++ - gSOAP 空答案

> ID：14484251
> 
> 赞同：0
> 
> 时间：2013-01-23T16:17:45.380
> 
> 标签：c++, rpc, gsoap

我正在编写一个 SOAP 客户端。我正在使用 gSOAP 版本 2.7.17，我必须坚持使用该版本，因为服务器正在使用这个版本，我无法修改它，因为它已经在现场运行。

当我进行 SOAP 调用时，我总是收到空答案！但是，当我嗅探网络时，XML 答案似乎是正确的：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:Supervisor="urn:Supervisor"
    xmlns:ActiveLogin="urn:ActiveLogin" xmlns:TechLogin="urn:TechLogin"
    xmlns:UMSLogin="urn:UMSLogin">
    <SOAP-ENV:Body SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
        <unitCallResponse>
            <szServerName>UMS_DEV_LANCC2 (2)</szServerName>
            <dResponse>cUNITRETURNCODE_RESTARTIMMEDIATE</dResponse>
            <dDetail>cBla</dDetail>
        </unitCallResponse>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

这是一个简化的代码片段，关于我如何使用使用*soapcpp2*生成的代理执行 SOAP 调用：

```
UMSLogin::unitCallResponse response;    // Response from SOAP
UMSLogin::UMSLoginProxy* m_soapProxy =  // The SOAP proxy
    new UMSLogin::UMSLoginProxy(SOAP_IO_KEEPALIVE, SOAP_IO_KEEPALIVE);

callRes = m_soapProxy->unitCall(m_eUnitType, serial, m_dInterfaceVersion,
    xl2CallTypeToUmsLoginCallType(m_pSoapEndPoint->getCallType()),
    xl2CommTypeToUmsLoginCommType(m_pSoapEndPoint->getComType()),
    response);

logDebug(LOG_COM_DEVICE, "SOAP call done to %s, SOAP code %i, central code %i",
    response.szServerName.c_str(), callRes, response.dResponse);

m_soapProxy->soap_close_socket();
m_soapProxy->destroy();
delete m_soapProxy; 
```

实际输出：

```
SOAP call done to , SOAP code 0, central code 0 
```

当我期待

```
SOAP call done to UMS_DEV_LANCC2 (2), SOAP code 0, central code 5
/* 5 ->  cUNITRETURNCODE_RESTARTIMMEDIATE */ 
```

以前有一个旧的实现，这一定是有效的！我哪里错了？有没有人已经遇到过这种问题？任何指针都非常感谢！

**编辑：**

通过使用早期版本的 SOAP (2.7.14) 来“解决”问题，而无需从我的程序的原始版本更改一行代码。但是，我感觉我又错过了一些重要的事情！我可能应该稍微调整一下我的头文件，给 SOAP“定义”以使事情正常工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:15:19.070

查看您声明的代码`response`，然后将其元素引用为`response.dResponse`. 这似乎意味着响应是一个结构而不是一个指向结构的指针，因此在您调用`m_soapProxy->unitCall`该版本之后您`response`报告的版本并没有改变，只有副本`m_soapProxy->unitCall`会改变。

我会尝试在调试器中跟踪这个调用，看看`m_soapProxy->unitCall`. 顺便说一句，是您编码还是由 GSOAP 生成？

# python - 迭代python中的压缩列表

> ID：14484256
> 
> 赞同：1
> 
> 时间：2013-01-23T16:17:49.870
> 
> 标签：python, zip, loops

我有以下内容：

```
class Trade:
    def __init__(self):
        entry = [0, 1, 2, 3]
        exit = [1, 2, 3, 4]
        met = [0, 0, 0, 0]
        self.stats = zip(entry, exit, met)

t = Trade()

for entry, exit, met in t.stats:
        met = 1

for entry, exit, met in t.stats:
    print(entry, exit, met) 
```

我期望 的所有值`met`都是 1。但事实并非如此。这是什么原因，我怎样才能使它的修改`met`反映在`Trade class t`. for 语句是否生成 t.stats 的副本而不是遍历其原始副本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T16:19:35.970

当您遍历列表的值时，这些值将分配给局部变量。更改这些局部变量不会更改存储在列表中的原始值。

使用`enumerate()`调用添加索引，然后使用该索引更改原始列表：

```
for i, (entry, exit, met) in enumerate(t.stats):
    t.stats[i] = (entry, exit, 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:21:47.853

以下将做到这一点：

```
t.stats[:] = [(entry, exit, 1) for entry, exit, met in t.stats] 
```

您的代码不起作用的原因是它`met = 1`只是重新绑定`met`到其他地方。这对 没有影响`t.stats`。

# asp.net - Application_AuthenticateRequest 总是在 Session_Start 之前吗？

> ID：14484262
> 
> 赞同：4
> 
> 时间：2013-01-23T16:18:22.887
> 
> 标签：asp.net, session, iis-6, global-asax

Application_AuthenticateRequest 是否总是在 global.asax 中的 Session_Start 之前触发？我正在尝试找到一些有关它的权威文档。

我认为确实如此，并且研究表明确实如此。但是我还没有找到权威的答案（除非我遗漏了什么）。

[我的asp.net 应用程序生命周期](http://msdn.microsoft.com/en-us/library/ms178473%28v=vs.80%29.aspx)的常规资源非常详细，但并没有真正详细说明某些模块的事件是如何排序的。

有谁知道一些权威文档，其中详细说明了一些内置模块事件如何排序（特别是 SessionStateModule）的示例？

我四处寻找，但还没有找到任何东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T16:43:41.190

官方文档没看过，但是看`SessionStateModule`Reflector里面的显示，事件是由方法`Start`引发的，方法调用，方法调用，方法调用，处理事件。`RaiseOnStart``CompleteAcquireState``BeginAcquireState``AcquireRequestState`

根据[应用程序生命周期页面](http://msdn.microsoft.com/en-us/library/ms178473%28v=vs.100%29.aspx)，`AcquireRequestState`事件总是在`AuthenticateRequest`、`AuthorizeRequest`和事件`ResolveRequestCache`之后引发`PostMapRequestHandler`。

**注意：**这适用于 .NET 4.0，但我相信以前的版本也是如此。

# matlab - 并行计算工具箱 fminsearch

> ID：14484269
> 
> 赞同：2
> 
> 时间：2013-01-23T16:18:42.307
> 
> 标签：matlab

我以前从未使用过并行计算。这就是为什么我的问题可能很愚蠢。我的最小二乘函数“bla”有一个优化程序

```
d=@(p)bla(m1,m2,m3,p,m2,m3);
pstart=0.2;
[pbest,likemodelvalue]=fminsearch(d,pstart,options) 
```

但它非常慢。我可以对“p”的每个值使用 fminseach 的并行编程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:12:09.510

优化工具箱有一些并行计算工具，您还需要购买并行计算工具箱。这些功能在此处进行了描述：http: [//www.mathworks.com/help/optim/ug/using-parallel-computing-with-fmincon-fgoalattain-and-fminimax.html](http://www.mathworks.com/help/optim/ug/using-parallel-computing-with-fmincon-fgoalattain-and-fminimax.html)。我不确定这是否正是你想要的。如果你想为不同的值找到多个不同的值`pbset`，`pstart`你可以做这样的事情（再次，使用并行计算工具箱）

```
matlabpool open local % launch local workers
pstart = 0:0.2:10;
for ii = 1:numel(pstart)
    [pbest(ii), likemodelvalue(ii)] = fminsearch(d, pstart(ii), options);
end 
```

# php - 如何将 CSS 类或 ID 挂钩到 PHP 中的元素

> ID：14484270
> 
> 赞同：-5
> 
> 时间：2013-01-23T16:18:42.070
> 
> 标签：php, html, css, coding-style

我正在尝试将 CSS 类与 PHP 中的元素挂钩。

我要解决的问题是在日历页面上（可以在此处找到）标题标签，其中包含一年中的月份，即一月，它涵盖了一周中的几天（将它们隐藏在视图之外）。如何将类或 ID 挂钩到 PHP 元素？

我想将 CSS 类挂接到 PHP 代码：

```
// day names array
// do not modify keys (Sunday-Saturday)
// modify values as needed, e.g. set "Sunday" to "Sun"
$day_names = array("Sunday" => "Sunday", "Monday" => "Monday", "Tuesday" => "Tuesday", "Wednesday" => "Wednesday", "Thursday" => "Thursday", "Friday" => "Friday", "Saturday" => "Saturday"); 
```

给出星期几的边距，也许还有一个定义的高度，以从上面的标题（一年中的月份日历横幅）标签向下撞

可以在这里找到整个 PHP：calendar.php_code.txt

HTML 输出可在以下位置找到：monaghan2690.com/calendar/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:21:38.677

没有“php 元素”之类的东西。假设您正在循环中转储工作日标题，那么

```
foreach($day_names as $day) {
    echo '<div class="dayname">', $day, '</div>';
} 
```

这就是所有需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:22:25.183

循环遍历数组中的元素。正如您所做的那样，您构建 HTML 并在 HTML 中拥有数组元素。确保 CSS 类或 id 是数组循环中 HTML 字符串的一部分。

# windows - 如何使命令提示符快捷方式在启动时运行脚本？

> ID：14484273
> 
> 赞同：0
> 
> 时间：2013-01-23T16:18:51.883
> 
> 标签：windows, powershell, powershell-2.0, cmd

我可以在我的桌面上创建一个自定义的命令提示符快捷方式，以从特定目录开始并具有一些指定的尺寸等。

现在我有一个脚本，它为提示设置一些环境变量，并希望在单击此快捷方式后立即运行它。

我如何告诉 cmd 或 powershell 在当前 shell 窗口中运行此脚本，然后显示 shell？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:48:57.800

`cmd`将快捷方式目标更改为

```
%COMSPEC% /k C:\PATH\TO\your.cmd 
```

并设置环境变量`your.cmd`：

```
@echo off

set FOO=23
set BAR=42 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:35:12.780

更改快捷方式的属性以在目标路径中包含`file`(scriptpath) 和`noexit`(完成时不关闭) 参数。目标路径示例：

```
%SystemRoot%\system32\WindowsPowerShell\v1.0\powershell.exe -noexit -file "c:\users\graimer\desktop\testscript.ps1" 
```

# javascript - node.js & Express fs.rename random 错误：EPERM，不允许操作！如何解决？

> ID：14484274
> 
> 赞同：3
> 
> 时间：2013-01-23T16:18:57.383
> 
> 标签：javascript, node.js, express

我遇到了 fs.rename 函数的问题！有时它不起作用，我不知道为什么。我尝试上传一些文件并重命名它！所以它应该工作一段时间。在下面的代码中：

```
exports.up = function(req, res){
        var len = [].concat(req.files.fileSelect);
            for(var i = 0; i < len.length; i++) {
                var tmp_path =(len[i].path);
                if(len[i].name ==''){
                len[i].name ='empty';

                }
                    console.log(len[i]);
                    var target_path =('./public/images/' + len[i].name);
                    fs.rename(tmp_path, target_path, function(err) {
                        if (err) throw err;
                        fs.unlink(tmp_path, function() {
                            if (err) throw err;
                        });
                    });
            }   
            res.redirect('/picture');
    }; 
```

# java - 处理图形错误

> ID：14484277
> 
> 赞同：0
> 
> 时间：2013-01-23T16:18:59.760
> 
> 标签：java, graphics, processing

我制作了一个使用二维数组绘制网格的程序，但出现空指针异常。这是我的代码：

```
Cell[][] Cells;
void setup(){
  size(500,500);
  background(255);
  for (int x = 0; x < 50; x++) {
    for (int y = 0; y < 50; y++) {
      Cells[x][y] = new Cell(round(random(255)),x * 10,y * 10,10,10);
    }
  }
}
void draw(){
  for (int x = 0; x < 50; x++) {
    for (int y = 0; y < 50; y++) {
      Cells[x][y].Draw();
    }
  }
}
class Cell{
  int X;
  int Y;
  int Width;
  int Height;
  int Color;
  Cell(int C,int X,int Y,int Width,int Height){
    Color = C;
    X = X;
    Y = Y;
    Width = Width;
    Height = Height;
  }
  void Draw(){
    fill(Color);
    rect(X,Y,Width,Height);
  }
} 
```

这是错误消息：

```
Exception in thread "Animation Thread" java.lang.NullPointerException
    at Grid.setup(Grid.java:27)
    at processing.core.PApplet.handleDraw(PApplet.java:2103)
    at processing.core.PGraphicsJava2D.requestDraw(PGraphicsJava2D.java:190)
    at processing.core.PApplet.run(PApplet.java:2006)
    at java.lang.Thread.run(Thread.java:662) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:22:41.750

您错过了创建数组：

```
Cell[][] cells = new Cell[50][50]; 
```

# java - Apache VFS FileChanged 未与目录中的现有文件一起触发

> ID：14484281
> 
> 赞同：1
> 
> 时间：2013-01-23T16:19:26.353
> 
> 标签：java, apache, vfs, file-monitoring

我试图使用 Apache VFS DefaultFileMonitor 监视目录，但如果文件已经存在，它不会触发 FileChangedEvent，它只会在创建新文件并更改它时触发。我尝试使用文档中的这个示例，但没有运气。

```
FileSystemManager manager = VFS.getManager();
FileObject dir= manager.resolveFile("/home/user/temp");
DefaultFileMonitor fm = new DefaultFileMonitor(new MyListener());
fm.setDelay(5000);
fm.addFile(dir); 
fm.start(); 
```

这应该监视一个目录并通知文件更改，但它没有发生。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:55:58.010

我使用的是 org.apache.commons.vfs.* 而这个包确实不支持该功能。所以当我再挖掘一点时，我发现他们有另一个版本，org.apache.commons.vfs2.*，现在它可以工作了。

# objective-c - 将 API 连接调用分解为 Objective-C 函数

> ID：14484284
> 
> 赞同：0
> 
> 时间：2013-01-23T16:19:31.913
> 
> 标签：objective-c, function, methods

这很可能是一个非常微不足道的问题，但我设置了与 API 的连接以检索信息。现在我已经在 viewDidLoad 中设置了所有内容。我知道有一种更有效的方法可以放置这些信息以供用户以后访问，但是我在 Objective-C 方面的经验太少，不知道该怎么做。这就是我目前的全部布局。

```
NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:@"https://www.myurl.com"]
                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                          timeoutInterval:60.0];
    NSData *myResponse = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:nil error:nil];

    NSString *myString = [[NSString alloc] initWithData:myResponse encoding:NSUTF8StringEncoding];

    SBJsonParser *myParser = [[SBJsonParser alloc] init];

    NSArray *myData = [parser objectWithString:myString error:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:44:49.957

试试这个：

```
- (void)loadAndParseURL:(NSString *)URLString
             completion:(void (^)(NSArray *data))completion {

    NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:URLString]
                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                          timeoutInterval:60.0];
    dispatch_async(dispatch_get_global_queue(DISPATH_QUEUE_PRIORITY_DEFAULT, 0), ^{
      NSData *myResponse = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:nil error:nil];

      NSString *myString = [[NSString alloc] initWithData:myResponse encoding:NSUTF8StringEncoding];

      SBJsonParser *myParser = [[SBJsonParser alloc] init];

      NSArray *myData = [parser objectWithString:myString error:nil];
      completion(myData);
    });
} 
```

`completion`是一个块（匿名函数指针），它接受一个数组作为参数并执行自定义代码块。该块保存局部变量的值，也就是“环境”，并在执行时评估其内容（通常有某种延迟），在这个例子中， after`myData`是从`myString`. `dispatch_async`将发送请求并执行其他操作的匿名块放入后台队列（当然是在后台线程中）。所以这个方法的调用甚至在收到响应之前就返回了，你应该在`completion`块内安排任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:29:55.343

如果您正在寻找将其旋转到线程中的内容，我将使用 sendAsynchronousRequest

```
NSURLRequest *urlRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:URLString]
                                          cachePolicy:NSURLRequestUseProtocolCachePolicy
                                      timeoutInterval:60.0];
NSOperationQueue *queue = [[NSOperationQueue alloc] init];

[NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
{
   NSString *myString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
   SBJsonParser *myParser = [[SBJsonParser alloc] init];

    NSArray *myData = [parser objectWithString:myString error:nil];

   // Do what you want with the response and subscribe 
   //anywhere in your code to get notified when it completed.
   [[NSNotificationCenter defaultCenter] 
          postNotificationName:@"NotifyMeWhenDone" 
                        object:self];

}]; 
```

# excel - Excel：在 C 列的 B 列中找不到 A 列的打印值

> ID：14484287
> 
> 赞同：1
> 
> 时间：2013-01-23T16:19:37.087
> 
> 标签：excel, excel-2010

我尝试在网上找到这个解决方案，但没有成功解决这个特定问题。在 Excel 2010 中，我在 A 列中有一些数据，其中每个值可能部分包含 B 列中的数据。

例如：
A 列可能包含“http://google.com/webmasters”
B 列可能包含“google.com”
这应该给我一个匹配项。

我想在 C 列中打印 A 列中不包含 B 列任何值的所有值。

例如：
A 列

```
http://dir.mydomain.tdl
http://myotherdomain.tdl
http://blog.otherdomain.tdl
http://www.lastdomain.tdl 
```

B栏

```
mydomain.tdl
lastdomain.tdl 
```

C 列（需要的结果）

```
http://myotherdomain.tdl
http://blog.otherdomain.tdl 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:27:06.003

也许不是必须高效，但您可以简单地使用两个数组 - 一个用于 A 列，一个用于 B 列。遍历 ColumnA 数组以查看它是否存在于 ColumnB 数组中（使用 Array.IndexOf 或 .contains）。如果是这样，您可以将其从 ColumnA 数组中删除，并将 C 列中的剩余值作为余数输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:22:13.387

我想我有使用**ARRAY**公式的解决方案。假设您的输入且列 AC 具有标题，或者简单地说，字符串列在起始单元格 A2 和 B2 中，请执行以下操作：

1.  C2：键入公式`=IF(OR(NOT(ISERROR(SEARCH(INDIRECT("B2:B"&(COUNTA($B:$B))),$A2)))),"",$A2)`，但按`CTRL`+ `SHIFT`+`ENTER`而不是通常的`ENTER`- 这将定义一个 ARRAY 公式，并在`{}`其周围产生括号（但不要手动键入它们！）。
2.  C2 中的自动填充公式，直到**A 列**中的列表末尾，例如，如果最后一个值在 A100 中，则自动填充到 C100（此处 B 列的长度无关紧要）。
3.  然后，您可以将获得的结果复制并粘贴为**值**并整理空字符串。

干得好！这里的关键 - 我们检查 A 列中的每个字符串是否在 B 列中的字符串数组中至少有一个匹配项，如果找到至少一个匹配项，则返回空字符串。

为方便起见，共享示例文件：[https ://www.dropbox.com/s/janf0xxon4z2yh5/DomainsLookup.xlsx](https://www.dropbox.com/s/janf0xxon4z2yh5/DomainsLookup.xlsx)

# jquery - AJAX 是否可以在 HTTP 和 HTTPS 中获取相同的 url

> ID：14484288
> 
> 赞同：1
> 
> 时间：2013-01-23T16:19:39.077
> 
> 标签：jquery, ajax, json

我知道您无法执行从 HTTP 到 HTTPS 的 AJAX 请求，因此我们正在努力让所提供的内容在 HTTP 和 HTTPS 上都可用。有没有告诉 AJAX 根据它在浏览器中使用的协议来获取文件？

例如，您可以这样做：

```
....
type: "GET",
url: '//wp-content/themes/twentyeleven/js/jobopenings.json'
.... 
```

它`//`会自动提供正确的版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:27:52.277

[window.location](http://www.w3schools.com/js/js_window_location.asp)对象可以告诉当前使用的协议

```
url: window.location.protocol + url_without_protocol 
```

[但是相对 url](http://www.cs.tut.fi/~jkorpela/HTML3.2/3.5.html)也可以达到同样的效果

```
url: '/path/to/whatever/you/want.json' 
```

这将获取服务器根目录并将您的东西粘贴在它之后，并采用协议。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:49:42.257

做吧`/wp-content/themes/twentyeleven/js/jobopenings.json`。注意单斜杠。

`/`以告诉它在您的域的根目录（将自动使用正确的 http(s) 协议）开始的 URL 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:27:04.903

你可以使用：

```
var protocol = window.location.protocol || document.location.protocol; 
```

然后您可以将其用于您的网址...

```
....
type: "GET",
url: protocol + '//your-address.com/wp-content/themes/twentyeleven/js/jobopenings.json'
.... 
```

# android - Android ASyncTask 和服务

> ID：14484294
> 
> 赞同：1
> 
> 时间：2013-01-23T16:19:53.840
> 
> 标签：android

例如，我如何在 ASyncTask 中启动我的服务

```
MyTask task = new MyTask();
startService(new Intent(MainActivity.this, MyService.class),    task); 
```

这样做的正确方法是什么？

我想告诉服务在哪些线程中执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:56:32.173

来自 Android 开发者的报价。：

> AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

我想如果您不直接使用 startService，您是否想在新线程中启动它，不是吗？如果是这样，你应该做一个新线程：

```
Thread t = new Thread(){
public void run(){
getApplicationContext().bindService(
        new Intent(getApplicationContext(), YOURSERVICE.class),
        serviceConnection,
        Context.BIND_AUTO_CREATE
    );
}
};
t.start(); 
```

# ssl - Mule ESB 3.3 - 接收 IMAPS 邮件 (Gmail)

> ID：14484298
> 
> 赞同：1
> 
> 时间：2013-01-23T16:19:59.457
> 
> 标签：ssl, gmail, imap, esb, mule

任何人都有一个从 Gmail 读取 IMAP over SSL (IMAPS) 邮件的工作示例？

我收集了一些信息，但没有任何成功：

*   [Mule ESB：使用 IMAP 连接器从 Gmail 中检索电子邮件](https://stackoverflow.com/q/8836530/496792)
*   [IMAP 问题](http://forum.mulesoft.org/mulesoft/topics/imap_questions-1ib9zb)
*   [Mule ESB IMAP 问题](https://stackoverflow.com/questions/9190779/mule-esb-imap-questions?rq=1)
*   当然还有臭名昭著的[文档](http://www.mulesoft.org/documentation/display/MULE3STUDIO/IMAP+Endpoint+Reference)

那东西只是坐在那里无所事事。

这是我的流程：

```
<mule>
<imaps:connector
        name="imapsConnector"
        checkFrequency="5000"
        backupEnabled="true"
        mailboxFolder="INBOX"
        deleteReadMessages="false"
        doc:name="IMAP">
        <imaps:tls-client />
        <imaps:tls-trust-store />
    </imaps:connector>

    <expression-transformer
        name="returnAttachments"
        doc:name="Expression">
        <return-argument
            evaluator="attachments-list"
            expression="*.csv" />
    </expression-transformer>

    <flow
        name="GmailImapsFetch"
        doc:name="Flow1_IMAP_fetch">
        <imaps:inbound-endpoint
            user="your_username%40gmail.com"
            password="your_password"
            host="imap.googlemail.com"
            port="993"
            transformer-refs="returnAttachments"
            disableTransportTransformer="true"
            doc:name="IMAP"
            connector-ref="imapsConnector"
            responseTimeout="10000" />
        <!-- <collection-splitter doc:name="Collection Splitter" /> -->
        <logger message="#[payload]" />
        <file:outbound-endpoint
            path="/tmp/gmail-#[function:datestamp].dat"
            doc:name="File">
            <expression-transformer>
                <return-argument
                    expression="payload.inputStream"
                    evaluator="groovy" />
            </expression-transformer>
        </file:outbound-endpoint>

    </flow>
</mule> 
```

Mule Studio (1.3.2) 抱怨 XML 格式错误（它不喜欢表达式转换器的东西），但它不会在运行时抱怨。

有人有这个跑吗？

谢谢。

--

日志：

```
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Starting app 'mulelab'                                   +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
[23-01-13 11:07:01] [DEBUG] Applying lifecycle phase: org.mule.lifecycle.phases.MuleContextStartPhase@14b03ea for registry: DefaultRegistryBroker
[23-01-13 11:07:01] [DEBUG] lifecycle phase: start for object: org.mule.util.queue.TransactionalQueueManager@63edf84f
[23-01-13 11:07:01] [ INFO] Starting ResourceManager
[23-01-13 11:07:01] [DEBUG] Restore retrieved 0 objects
[23-01-13 11:07:01] [DEBUG] Restore retrieved 0 objects
[23-01-13 11:07:01] [DEBUG] Restore retrieved 0 objects
[23-01-13 11:07:01] [ INFO] Started ResourceManager
[23-01-13 11:07:01] [DEBUG] lifecycle phase: start for object: FileConnector
. . .   
[23-01-13 11:07:01] [DEBUG] lifecycle phase: start for object: ImapsConnector
{
  name=imapsConnector
  lifecycle=initialise
  this=4bb4df9c
  numberOfConcurrentTransactedReceivers=4
  createMultipleTransactedReceivers=true
  connected=false
  supportedProtocols=[imaps]
  serviceOverrides=<none>
}

[23-01-13 11:07:01] [DEBUG] Connecting: ImapsConnector
{
  name=imapsConnector
  lifecycle=initialise
  this=4bb4df9c
  numberOfConcurrentTransactedReceivers=4
  createMultipleTransactedReceivers=true
  connected=false
  supportedProtocols=[imaps]
  serviceOverrides=<none>
}

[23-01-13 11:07:01] [ INFO] Connected: ImapsConnector
{
  name=imapsConnector
  lifecycle=initialise
  this=4bb4df9c
  numberOfConcurrentTransactedReceivers=4
  createMultipleTransactedReceivers=true
  connected=true
  supportedProtocols=[imaps]
  serviceOverrides=<none>
}

[23-01-13 11:07:01] [ INFO] Starting: ImapsConnector
{
  name=imapsConnector
  lifecycle=initialise
  this=4bb4df9c
  numberOfConcurrentTransactedReceivers=4
  createMultipleTransactedReceivers=true
  connected=true
  supportedProtocols=[imaps]
  serviceOverrides=<none>
}

[23-01-13 11:07:01] [ INFO] Starting connector: imapsConnector
[23-01-13 11:07:01] [DEBUG] Successfully connected to ImapsConnector
{
  name=imapsConnector
  lifecycle=initialise
  this=4bb4df9c
  numberOfConcurrentTransactedReceivers=4
  createMultipleTransactedReceivers=true
  connected=false
  supportedProtocols=[imaps]
  serviceOverrides=<none>
}

[23-01-13 11:07:01] [DEBUG] lifecycle phase: start for object: org.mule.transport.servlet.jetty.JettyWebappServerAgent@26945b95
[23-01-13 11:07:01] [DEBUG] lifecycle phase: start for object: org.mule.module.management.agent.JmxAgent@320f6398
[23-01-13 11:07:01] [DEBUG] lifecycle phase: start for object: SedaModel{_muleSystemModel}
[23-01-13 11:07:01] [ INFO] Starting model: _muleSystemModel
[23-01-13 11:07:01] [DEBUG] lifecycle phase: start for object: Flow{GmailImapsFetch}
[23-01-13 11:07:01] [ INFO] Starting flow: GmailImapsFetch
[23-01-13 11:07:01] [ INFO] Starting service: GmailImapsFetch.stage1
[23-01-13 11:07:01] [ INFO] Registering listener: GmailImapsFetch on endpointUri: imaps://your_username%40gmail.com:****@imap.googlemail.com:993
[23-01-13 11:07:01] [ INFO] Loading default inbound transformer: org.mule.transport.email.transformers.EmailMessageToString
[23-01-13 11:07:01] [DEBUG] Setting transformer name to: EmailMessageToString#1868577756
[23-01-13 11:07:01] [ INFO] Initialising: 'null'. Object is: RetrieveMessageReceiver
[23-01-13 11:07:01] [DEBUG] Connecting: RetrieveMessageReceiver{this=22fe135d, receiverKey=your_username@gmail.com, endpoint=imaps://your_username%40gmail.com:****@imap.googlemail.com:993}
[23-01-13 11:07:01] [ INFO] Connecting clusterizable message receiver
[23-01-13 11:07:01] [DEBUG] No Authenticator set on connector: imapsConnector; using default.
[23-01-13 11:07:01] [ INFO] Defaulting mule.email.imaps trust store to client Key Store
[23-01-13 11:07:01] [DEBUG] MuleSession local properties =============
[23-01-13 11:07:01] [DEBUG] mail.imaps.ssl: true
[23-01-13 11:07:01] [DEBUG] mail.debug: true
[23-01-13 11:07:01] [DEBUG] mail.imaps.socketFactory.class: org.mule.transport.email.ImapsSocketFactory
[23-01-13 11:07:01] [DEBUG] mail.imaps.socketFactory.fallback: false
[23-01-13 11:07:01] [DEBUG] mail.imap.host: imap.googlemail.com
[23-01-13 11:07:01] [DEBUG] mail.imap.auth: true
[23-01-13 11:07:01] [DEBUG] mail.imap.socketFactory.port: 993
[23-01-13 11:07:01] [DEBUG] mail.imap.rsetbeforequit: true
[23-01-13 11:07:01] [DEBUG] skipped 0
[23-01-13 11:07:01] [DEBUG] System global properties =============
[23-01-13 11:07:01] [DEBUG] mule.home: /home/pakmans/workspace/.mule
[23-01-13 11:07:01] [DEBUG] mule.encoding: UTF-8
[23-01-13 11:07:01] [DEBUG] skipped 57
[23-01-13 11:07:01] [DEBUG] Creating mail session: host = imap.googlemail.com, port = 993, user = your_username@gmail.com, pass = ********
[23-01-13 11:07:01] [DEBUG] creating: true; mule.email.imaps
[23-01-13 11:07:01] [DEBUG] creating factory
[23-01-13 11:07:01] [ INFO] Using org.mule.api.security.provider.SunSecurityProviderInfo
[23-01-13 11:07:01] [DEBUG] mule.email.imaps.ssl.trustStore -> null
[23-01-13 11:07:01] [DEBUG] mule.email.imaps.ssl.trustStoreType -> jks
[23-01-13 11:07:01] [DEBUG] mule.email.imaps.ssl.trustStorePassword -> null
[23-01-13 11:07:01] [DEBUG] mule.email.imaps.ssl.trustManagerAlgorithm -> SunX509
[23-01-13 11:07:01] [DEBUG] mule.email.imaps.ssl.keyStore -> .keystore
[23-01-13 11:07:01] [DEBUG] Unable to load resource from the file system: /home/pakmans/workspace/mulelab/.keystore
[23-01-13 11:07:01] [DEBUG] Unable to load resource .keystore from the classpath
[23-01-13 11:07:01] [DEBUG] Normalised keyStore path to: null
[23-01-13 11:07:01] [DEBUG] mule.email.imaps.ssl.keyStoreType -> jks
[23-01-13 11:07:01] [DEBUG] mule.email.imaps.ssl.keyStorePassword -> null
[23-01-13 11:07:01] [DEBUG] initialising: anon true
[23-01-13 11:07:01] [ INFO] Defaulting mule.email.imaps trust store to client Key Store
[23-01-13 11:07:03] [DEBUG] Connected: imaps://your_username%40gmail.com:****@imap.googlemail.com:993
[23-01-13 11:07:03] [ INFO] Starting: 'null'. Object is: RetrieveMessageReceiver
[23-01-13 11:07:03] [ INFO] Starting clusterizable message receiver
[23-01-13 11:07:03] [DEBUG] RetrieveMessageReceiver@22fe135d scheduled ScheduledThreadPoolExecutor$ScheduledFutureTask@6fa37fac with 5000 MILLISECONDS polling frequency
[23-01-13 11:07:03] [DEBUG] lifecycle phase: start for object: DefaultInboundEndpoint{endpointUri=imaps://your_username%40gmail.com:<password>@imap.googlemail.com, connector=ImapsConnector
{
  name=imapsConnector
  lifecycle=start
  this=4bb4df9c
  numberOfConcurrentTransactedReceivers=4
  createMultipleTransactedReceivers=true
  connected=true
  supportedProtocols=[imaps]
  serviceOverrides=<none>
}
,  name='endpoint.imaps.your_username.gmail.com', mep=ONE_WAY, properties={}, transactionConfig=Transaction{factory=null, action=INDIFFERENT, timeout=0}, deleteUnacceptedMessages=false, initialState=started, responseTimeout=10000, endpointEncoding=UTF-8, disableTransportTransformer=true}
[23-01-13 11:07:03] [DEBUG] lifecycle phase: start for object: org.mule.DefaultMuleContext@6a9effe0
[23-01-13 11:07:03] [ INFO] Reload interval: 3000
[23-01-13 11:07:03] [DEBUG] org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'wrapper-manager' is defined
[23-01-13 11:07:03] [DEBUG] registering key/object wrapper-manager/org.mule.module.management.agent.WrapperManagerAgent@4c825cf3
[23-01-13 11:07:03] [DEBUG] applying processors
[23-01-13 11:07:03] [DEBUG] applying lifecycle to object: org.mule.module.management.agent.WrapperManagerAgent@4c825cf3
[23-01-13 11:07:03] [ INFO] This JVM hasn't been launched by the wrapper, the agent will not run.
[23-01-13 11:07:03] [DEBUG] Registering statistics with name: Mule.mulelab:type=Statistics,name=AllStatistics
[23-01-13 11:07:03] [DEBUG] Registering mule with name: Mule.mulelab:name=MuleContext
[23-01-13 11:07:03] [DEBUG] Registering configuration with name: Mule.mulelab:name=Configuration
[23-01-13 11:07:03] [DEBUG] Registering model with name: Mule.mulelab:type=Model,name="_muleSystemModel(seda)"
[23-01-13 11:07:03] [DEBUG] Registering service with name: Mule.mulelab:type=Flow,name="GmailImapsFetch"
[23-01-13 11:07:03] [DEBUG] org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'endpoint.imaps.your_username.gmail.com' is defined
[23-01-13 11:07:03] [ INFO] Attempting to register service with name: Mule.mulelab:type=Endpoint,service="GmailImapsFetch",connector=imapsConnector,name="endpoint.imaps.your_username.gmail.com"
[23-01-13 11:07:03] [ INFO] Registered Endpoint Service with name: Mule.mulelab:type=Endpoint,service="GmailImapsFetch",connector=imapsConnector,name="endpoint.imaps.your_username.gmail.com"
[23-01-13 11:07:03] [DEBUG] org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'connector.file.mule.default.1' is defined
[23-01-13 11:07:03] [DEBUG] Attempting to register service with name: Mule.mulelab:type=Connector,name="connector.file.mule.default.1"
[23-01-13 11:07:03] [ INFO] Registered Connector Service with name Mule.mulelab:type=Connector,name="connector.file.mule.default.1"
[23-01-13 11:07:03] [DEBUG] org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'imapsConnector.1' is defined
[23-01-13 11:07:03] [DEBUG] Attempting to register service with name: Mule.mulelab:type=Connector,name="imapsConnector.1"
[23-01-13 11:07:03] [ INFO] Registered Connector Service with name Mule.mulelab:type=Connector,name="imapsConnector.1"
[23-01-13 11:07:03] [DEBUG] Registering application statistics with name: Mule.mulelab:type=Application,name="application totals"
[23-01-13 11:07:03] [ INFO] 
**********************************************************************
* Application: mulelab                                               *
* OS encoding: UTF-8, Mule encoding: UTF-8                           *
*                                                                    *
* Agents Running:                                                    *
*   JMX Agent                                                        *
**********************************************************************
[23-01-13 11:07:03] [ INFO] 
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Started app 'mulelab'                                    +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:01:13.947

我会冒险回答：$

根据[IMAP 的连接器文档](http://www.mulesoft.org/documentation/display/MULE3USER/IMAP+Transport+Reference#IMAPTransportReference-Connectors)，您的配置似乎缺少 GMail 推荐的属性：

> **moveToFolder** 读取邮件后要将邮件移动到的远程文件夹。建议在使用时将“deleteReadMessages”设置为 false。这在使用公共电子邮件服务（例如 GMail）时非常有用，在这些服务中将邮件标记为删除不起作用。而是设置@moveToFolder=[GMail]/Trash。

你能试一试吗？

（编辑：[Gmail] 必须用括号括起来）

# javascript - 我应该如何编码我的 jQuery，以便当我将鼠标悬停在我的 div 上时，其中的图像会溶解到另一个图像中？

> ID：14484305
> 
> 赞同：-1
> 
> 时间：2013-01-23T16:20:22.507
> 
> 标签：javascript, jquery

我知道我需要在 div 上使用悬停功能，然后更改 images src 属性，但我不知道如何使其从一个溶解到另一个。如果我隐藏它，它只会从白色淡出。但我希望它能够将图像分解为图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:24:15.537

使用以下 jquery 教程：

[http://jqueryfordesigners.com/image-cross-fade-transition/](http://jqueryfordesigners.com/image-cross-fade-transition/)

HTML

```
<div class="fade">
  <a href="/info.html"><img src="start.jpg" /></a>
  <div>
    <a href="/info.html"><img src="end.jpg" /></a>
  </div>
</div> 
```

CSS

显然，如果我有多个渐变图像，我会使用 ID 或替代类来定位顶部和左侧 CSS 属性。

```
.fade {
  position: absolute;
  top: 100px
  left: 100px
}

.fade div {
  position: absolute;
  top: 0;
  left: 0;
  display: none;
} 
```

jQuery

```
// when the DOM is ready:
$(document).ready(function () {
  // find the div.fade elements and hook the hover event
  $('div.fade').hover(function() {
    // on hovering over, find the element we want to fade *up*
    var fade = $('> div', this);

    // if the element is currently being animated (to a fadeOut)...
    if (fade.is(':animated')) {
      // ...take it's current opacity back up to 1
      fade.stop().fadeTo(250, 1);
    } else {
      // fade in quickly
      fade.fadeIn(250);
    }
  }, function () {
    // on hovering out, fade the element out
    var fade = $('> div', this);
    if (fade.is(':animated')) {
      fade.stop().fadeTo(3000, 0);
    } else {
      // fade away slowly
      fade.fadeOut(3000);
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:26:04.583

使用 jQuery UI 库——尤其是它的`show`特性

[jQuery 用户界面](http://jqueryui.com/show/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:28:39.240

```
 <div class="hoverme"><img class="still" src="..." /><img class="hstate" src="..." /></div> 
```

css，设置你的 div 高度/宽度 &

```
 .hoverm {position:relative; width:100px;height:100px;}

       .hoverme img {display:block;position:absolute;top:0;left:0;}
       .hoverme img.hstate {display:none;} 
```

js

```
 $(document).on({"mouseover":function() {
                          $(this).find(".hstate").stop().fadeIn(500);
                          },
                       "mouseout":function() {
                          $(this).find(".hstate").stop().fadeOut(500);
                       }, ".hoverme"); 
```

# sql-server - 如何在 Visual Studio 2012 SQL 项目中更改与服务器的默认连接？

> ID：14484309
> 
> 赞同：29
> 
> 时间：2013-01-23T16:20:35.190
> 
> 标签：sql-server, visual-studio-2012, localdb

在 Visual Studio 2012 sqlproj 中，默认连接按钮始终默认连接到 (localdb)\Projects。我该如何改变呢？每次我需要断开连接并重新连接以更改服务器。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-07-05T01:29:33.740

检查数据库项目的属性。在“调试”选项卡下，有“目标连接字符串”选项。将其更改为您要使用的服务器和数据库。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-23T16:46:56.140

**更改默认连接**

1.  在菜单上，选择工具-> 选项-> 数据库工具
2.  在数据连接上输入您要使用的 SQL 服务器实例名称
3.  按确定

这是来自[http://xprog.blogspot.com/2012/08/visual-studio-2012-change-default-sql.html](http://xprog.blogspot.com/2012/08/visual-studio-2012-change-default-sql.html)

**逐个文件更改连接**

这对我有用。我有一个带有 BuildAction=Build 的 sql 文件，它缺少 sql 连接工具栏。

1.  在解决方案资源管理器中，单击 sql 文件
2.  将其 BuildAction 更改为 None
3.  打开文件（如果它已经打开，关闭并重新打开）

现在您将获得连接工具栏。

完成维护后，您必须记住将构建操作更改回来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-16T15:56:04.763

更改默认数据库 在解决方案资源管理器中，右键单击您的数据库项目，选择属性转到调试选项卡在“目标连接字符串”下单击编辑，输入您的 sql 服务器详细信息并保存。

# python - 跟随机械化的链接

> ID：14484311
> 
> 赞同：2
> 
> 时间：2013-01-23T16:20:37.543
> 
> 标签：python, web-scraping, beautifulsoup, mechanize

我想使用 Mechanize python 库来跟踪网站中的某些链接，但我感兴趣的唯一链接是`<div>`标签中的链接。[这个](https://stackoverflow.com/questions/11481091/mechanize-follow-links-inside-a-div)问题是相关的，但是他们使用`lxml`我不熟悉的解析器来实现它，我更喜欢使用 BeautifulSoup。

我已经使用 BeautifulSoup 找到了相关链接，但我不知道如何使用 Mechanize（或其他东西）来跟踪这些链接。有没有办法将字符串传递给 Mechanize 以便它跟随它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:24:27.783

简单`open()`就足够了：

```
br.open('http://google.com') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:32:41.713

```
import mechanize
response = mechanize.urlopen("http://example.com/")
content = response.read() #The content is the code of the page (html) 
```

或者，如果您想添加诸如标题之类的内容：

```
import mechanize
request = mechanize.Request("http://example.com/")
response = mechanize.urlopen(request)
content = response.read() #The content is the code of the page (html) 
```

# jsf - HTTP 状态 403 - 访问请求的资源已被拒绝（CSS 被阻止？）

> ID：14484312
> 
> 赞同：2
> 
> 时间：2013-01-23T16:20:39.617
> 
> 标签：jsf

我一直在努力保护我的项目。我有一个通过 LDAP 服务器进行身份验证的登录页面，如果不正确，它会拉出一个错误页面等。我现在刚刚添加

```
<auth-constraint> <!-- Currently causing a 403, looks like stoping .css files --> 
    <role-name>*</role-name>
</auth-constraint> 
```

到我的**web.xml**，以确保用户在查看任何页面之前都经过身份验证，但是它似乎阻止了我的 .css 文件，我认为现在登录页面根本不显示任何 css，只是白色基本的，当我按下提交时，我得到：

*   [http://localhost:8080/fileuploadWithPreview/javax.faces.resource/theme.css.xhtml?ln=primefaces-aristo](http://localhost:8080/fileuploadWithPreview/javax.faces.resource/theme.css.xhtml?ln=primefaces-aristo)

出现此错误：

> **HTTP 状态 403 - 访问请求的资源已被拒绝**
> 
> * * *
> 
> **类型**状态报告
> 
> **消息**访问请求的资源已被拒绝
> 
> **描述**对指定资源的访问（对所请求资源的访问已被拒绝）已被禁止。
> 
> * * *
> 
> GlassFish Server 开源版 3.1.2.2

这是我的**web.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee         http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <filter>
        <filter-name>Upload Filter</filter-name>
        <filter-class>richard.fileupload.UploadFilter</filter-class>
        <init-param>
            <param-name>sizeThreshold</param-name>
            <param-value>1024</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>Upload Filter</filter-name>
        <url-pattern>/upload/*</url-pattern>
    </filter-mapping>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
        <param-name>facelets.LIBRARIES</param-name>
        <param-value>/WEB-INF/corejsf.taglib.xml</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
        <param-value>true</param-value>
    </context-param>

    <login-config>
        <auth-method>FORM</auth-method>
        <realm-name>LDAP</realm-name>
        <form-login-config>
            <form-login-page>/login.xhtml</form-login-page>
            <form-error-page>/login-failed.xhtml</form-error-page>
        </form-login-config>
    </login-config>
    <security-role>
        <role-name>user</role-name>
    </security-role>
    <security-constraint> 
        <web-resource-collection>
            <web-resource-name>Allowed resources</web-resource-name>
            <url-pattern>/javax.faces.resources/*</url-pattern>
        </web-resource-collection>   
        <!-- web resources that are protected -->
        <web-resource-collection>
            <web-resource-name>All Resources</web-resource-name>
            <url-pattern>/*</url-pattern>
            <!-- this is currently causing a 404 -->
            <http-method>GETLIB</http-method>
            <http-method>COPY</http-method>
            <http-method>MOVE</http-method>
            <http-method>DELETE</http-method>
            <http-method>PROPFIND</http-method>
            <http-method>GET</http-method>
            <http-method>HEAD</http-method>
            <http-method>PUT</http-method>
            <http-method>MKCOL</http-method>
            <http-method>PROPPATCH</http-method>
            <http-method>LOCK</http-method>
            <http-method>UNLOCK</http-method>
            <http-method>VERSION-CONTROL</http-method>
            <http-method>CHECKIN</http-method>
            <http-method>CHECKOUT</http-method>
            <http-method>UNCHECKOUT</http-method>
            <http-method>REPORT</http-method>
            <http-method>UPDATE</http-method>
            <http-method>CANCELUPLOAD</http-method>
        </web-resource-collection>
        <auth-constraint> <!-- Currently causing a 403, looks like stoping .css files --> 
            <role-name>*</role-name>
        </auth-constraint>
    </security-constraint>
</web-app> 
```

基本上，是什么阻止了我的 css 文件，我该如何允许它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T18:21:43.387

您的安全约束还阻止了对 CSS 文件的请求（基本上，它阻止了与指定登录页面的指定 URL 模式匹配的所有内容*） 。*`/*`您需要添加另一个安全约束，它应该允许对 JSF 资源的请求。关键是省略 auth 约束以使每个人都可以访问这些资源。

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Allowed resources</web-resource-name>
        <url-pattern>/javax.faces.resource/*</url-pattern>
    </web-resource-collection>
    <!-- No Auth Contraint! -->
</security-constraint> 
```

# android - 动作溢出可以在最右边以外的任何地方吗？

> ID：14484314
> 
> 赞同：0
> 
> 时间：2013-01-23T16:20:42.057
> 
> 标签：android, android-actionbar, actionbarsherlock

我有一个包含多个页面的应用程序，所有页面都将在顶部和底部使用 ActionBarSherlock。顶部栏不会有任何动作，所有动作都将保留在底部栏中。

我的应用程序中的每个页面都使用 2 个操作，但有些还有其他操作。因此，有些页面需要动作溢出，有些则不需要。

我想将始终使用的 2 个操作一直保留到右侧，以确保它们在每个页面上都位于相同的位置，并且有时会在中间出现溢出按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:23:47.413

溢出按钮始终在右侧。但由于它是如此之小，我不会担心它会影响您的用户体验，只要您始终使用一致的顺序来执行您的永久操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:22:34.110

> 我想将始终使用的 2 个操作一直保留到右侧，以确保它们在每个页面上都位于相同的位置，并且有时会在中间出现溢出按钮。

你不能那样做，对不起。如果存在，溢出按钮将始终位于最右侧。

# jquery - Bootstrap Typeahead Dropdown BR标签

> ID：14484318
> 
> 赞同：1
> 
> 时间：2013-01-23T16:20:50.257
> 
> 标签：jquery, typeahead, bootstrap-typeahead

我正在使用 Bootstrap Typeahead - [http://twitter.github.com/bootstrap/javascript.html#typeahead](http://twitter.github.com/bootstrap/javascript.html#typeahead)功能来预测输入框中的文本。

我想知道在下拉菜单中（显示预测结果）我可以在两行上显示每个下拉项目。假设我正在尝试在组织之间进行预测搜索，但我还想显示该组织的主席。我将如何去做这件事。

我试图在下面的代码中解决这个问题。它在显示组织和总裁的两行上显示下拉项目。但是，当我选择其中一个下拉菜单时，“BR 标签”会显示在我的输入文本字段中。我将如何解决这个问题？谢谢

```
<?php

$db = new mysqli('localhost', 'root' ,'', 'test');
$query = $db->query("SELECT name,leader FROM organizations");
$orgs = array();
while($row = $query->fetch_array(MYSQLI_ASSOC)){
    $orgs[] = $row['name'].'<br />'.$row['leader'];
}

$js_orgs = json_encode($orgs);

if($_POST){
    print_r($_POST);
}

?>
<html>
<head>
    <link href="bootstrap.css" rel="stylesheet" type="text/css" />
</head>
<body>

<form method="post" action="demo.php">
    <input name="org" type="text" class="span3" id="search" />
    <input type="submit" value="Submit" />
</form>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="bootstrap.min.js"></script>

<script>
var subjects = <?php echo $js_orgs; ?>; 
$('#search').typeahead({source: subjects, items:6})
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:32:57.527

检查这个[http://www.webmaster-source.com/2012/11/07/getting-more-from-twitter-bootstraps-typeahead-library/](http://www.webmaster-source.com/2012/11/07/getting-more-from-twitter-bootstraps-typeahead-library/)

您需要使用更新程序

# c# - Visual Studio 不显示已加载程序集的名称

> ID：14484327
> 
> 赞同：3
> 
> 时间：2013-01-23T16:21:23.720
> 
> 标签：c#, .net, visual-studio, visual-studio-2008, assemblies

从 Visual Studio 中运行 ac# 项目并观察调试输出时，可以看到每个程序集的确切加载时间。（右击调试输出窗口，勾选“显示模块加载消息”）

从 StackOverflow 上的屏幕截图和其他问题中，我知道每个程序集都应该有一条消息，其中包含该程序集的名称。
然而，在我的电脑上，*大多数时候*我得到的只是无名的加载消息。名字不见了。

当我进入模块窗口时，我*可以*看到所有加载模块的名称（调试菜单，选择 Windows，然后单击模块。）

如何让名称出现在输出窗口中？在极少数情况下，它似乎有效，但我无法重现这些情况。

这是我可以在调试输出窗口中看到的三种类型的程序集加载消息（对不起，德语）

```
"MyProgram.vshost.exe" (Verwaltet): "Verwaltet" wurde geladen, das Laden von Symbolen wurde übersprungen. Das Modul ist optimiert, und die Debugoption "Nur eigenen Code" ist aktiviert.
"MyProgram.vshost.exe" (Verwaltet): "Verwaltet" geladen, Symbole geladen.
"MyProgram.vshost.exe" (Verwaltet): "Verwaltet" wurde geladen 
```

这是一个粗略的英文翻译

```
'MyProgram.vshost.exe' (Managed): Loaded 'Managed'. Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'MyProgram.vshost.exe' (Managed): Loaded 'Managed', loaded symbols.
'MyProgram.vshost.exe' (Managed): Loaded 'Managed' 
```

这是我期望的输出：

```
'Example.vshost.exe' (Managed): Loaded 'C:\WINDOWS\assembly\GAC_MSIL\IdeaBlade.UI.WinForms.DevExpressControls.v2_2_0\3.6.7.1__287b5094865421c0\IdeaBlade.UI.WinForms.DevExpressControls.v2_2_0.dll'
'Example.vshost.exe' (Managed): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'Example.vshost.exe' (Managed): Loaded 'C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\QTAgent32.exe', Symbols loaded.
'Example.vshost.exe' (Managed): Loaded 'C:\WINDOWS\assembly\GAC_32\mscorlib\2.0.0.0__b77a5c561934e089\mscorlib.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'Example.vshost.exe' (Managed): Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.QualityTools.ExecutionCommon\10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.QualityTools.ExecutionCommon.dll', Symbols loaded. 
```

上述日志中程序集的路径和名称是我的电脑上缺少的。

（Visual Studio 2008 专业版）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:00:32.940

1.  您能否检查一下*“模块加载消息”*是否已启用

    您可以在以下位置找到它：工具 -> 选项 -> 调试 -> 输出窗口 -> 常规输出设置 -> 模块加载消息

2.  工具 -> 选项 -> 调试 -> 常规 -> 仅启用我的代码（仅限托管）

# c - C：从二叉树中删除元素

> ID：14484328
> 
> 赞同：0
> 
> 时间：2013-01-23T16:21:35.827
> 
> 标签：c, tree, segmentation-fault, binary-tree

我有一个有 2 行的二叉树：`key`和`combination`. 当我尝试删除组合长于 5 位的元素时出现问题。
我称之为`ifMore(root);`当它找到组合长度超过 5 位的元素时，它会调用`DeleteTooLong()`.
因此，当我启动程序时，它会删除 2 个 ( `b`, `l`) 元素，然后出现 (on `i`) "Segmentation fault: 11"

这是我的树：

```
h - 001
d - 002
b - 004444
a - 0080
c - 009
f - 005
e - 010
g - 011
l - 003333
j - 006
i - 0121212
k - 013
n - 007
m - 0141414
o - 015

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int point =0;
typedef struct key_combinations
{
    char *key;
    char *combination;
} KEY_COMBINATION;

typedef struct tree
{
    KEY_COMBINATION kc;
    struct tree *left,*right;
}Tree;

Tree *root;

void AddNode (Tree * proot, Tree * pnew) ;
void GetData ();
void PrintTree();
void ShowTree(Tree *rooot, int lvl);
void PutTree(Tree *rooot);
void ifMore(Tree *rooot);
void DeleteTooLong(Tree **rooot);
void FreeNode (Tree * node) ;

void main()
{
    GetData ();
    PrintTree();
    ifMore(root);
    PrintTree();
}

void GetData ()
{
    Tree * pel;
    KEY_COMBINATION * pkc;

    char bufk[3],bufc[25];
    FILE* f;

    int choise;
    printf("choose file balanced[1] not balanced[2] :   ");
    scanf("%d",&choise);

    if(choise==2)
        f = fopen("TreeNB","r");
    else
        f = fopen("TreeB","r");

    while(fscanf(f,"%s %s",bufk,bufc)!=EOF)
    {
        pkc->key = (char * ) malloc(strlen(bufk)+1);
        strcpy(pkc->key, bufk);

        pkc->combination =(char * ) malloc(strlen(bufc)+1);
        strcpy(pkc->combination, bufc);

        pel=(Tree *)malloc(sizeof(Tree));
        pel->kc = * pkc;

        pel->left = NULL;
        pel->right = NULL;

        AddNode(root,pel);
    }
}

void AddNode (Tree * proot, Tree * pnew)
{
    if (root == NULL)
       root = pnew;
    else
        if (strcmp(proot->kc.key, pnew->kc.key)>0)
            if (proot->left == NULL)
                proot->left = pnew;
            else
                AddNode(proot->left, pnew);
        else
            if (proot->right == NULL)
                proot->right = pnew;
            else
                AddNode(proot->right, pnew);
}

void PrintTree()
{
    puts("\n===============================");
    PutTree(root);
    puts("\n===============================\n");
    ShowTree(root,1);
    puts("===============================");
}

void ShowTree(Tree *rooot, int lvl)
{
    if(rooot==NULL)
        return;

    ShowTree(rooot->right,lvl+1);
    printf("%*c%s\n", lvl*3,' ', rooot->kc.key);
    ShowTree(rooot->left,lvl+1);
}

void PutTree(Tree *rooot)
{
    if(rooot==NULL)
        return;
    printf("\n\t%s -\t%s", rooot->kc.key, rooot->kc.combination);
    PutTree(rooot->left);
    PutTree(rooot->right);
}

void ifMore(Tree *rooot)
{

    if(rooot==NULL)
        return;
    if(strlen(rooot->kc.combination)>5){
        printf("\n\t%s -\t%s", rooot->kc.key, rooot->kc.combination);
        DeleteTooLong(&rooot);
    }
    ifMore(rooot->left);
    ifMore(rooot->right);
}

void DeleteTooLong(Tree **rooot)
{
    Tree *treeroot=*rooot, *newroot, *parent;
    int subtrees;
    if(rooot==NULL)
        return;

    if(treeroot->left==NULL && treeroot->right==NULL)
        subtrees=0;
    else if(treeroot->left==NULL)
        subtrees=-1;
    else if(treeroot->right==NULL)
        subtrees=1;
    else
        subtrees=2;

    switch(subtrees)
    {
    case  0: *rooot=NULL;             break;
    case  1: *rooot=treeroot->left;   break;
    case  -1: *rooot=treeroot->right; break;
    case  2:
        newroot=treeroot->left;
        parent=treeroot;
        while(newroot->right!=NULL)
        {
            parent=newroot;
            newroot=newroot->right;
        }

        newroot->right=treeroot->right;
        if(parent!=treeroot)
        {
            parent->right=newroot->left;
            newroot->left=treeroot->left;
        }
        *rooot=newroot;
    }
    printf("\n point : %d",point++);
    printf("\t free...");
    FreeNode(treeroot);
}

void FreeNode (Tree * node)
{
    free(node->kc.key);
    free(node->kc.combination);
    free(node);
} 
```

# asp.net - ASP.NET FileUpload 上传前重命名文件

> ID：14484330
> 
> 赞同：1
> 
> 时间：2013-01-23T16:21:40.793
> 
> 标签：asp.net

我正在使用 ASP.NET 中的 FileUpload 控件。用户只能上传服务器上已经存在的某个文件名和扩展名。我想做的是用不同的名称上传用户选择的文件。例如，服务器和工作站上的文件都是monthlyreports.xls。我希望将工作站版本作为monthlyreports_user.xls 上传，这样它就不会覆盖现有文件。

我查看了[如何在 ASP.NET 中重命名文件？](https://stackoverflow.com/questions/2160785/how-can-i-rename-a-file-in-asp-net)并尝试了 File.Copy 方法，但它不起作用 - 我收到一个错误，它找不到文件。

```
Private Sub uploadItems(ByVal vPath As String)
    Dim strRename As String = "monthlyreports_user.xls"

    File.Create(vPath & strRename)

    Try
        If FileBrowse.HasFile Then

            File.Copy(FileBrowse.FileName, strRename)

            FileBrowse.SaveAs(strRename)

        End If
    Catch ex As Exception
        DisplayMsgBox(Me, ex.Message(), "uploadErr")
    End Try 
```

FileBrowse 是我的 FileUpload 控件的名称，vPath 是服务器上的应用程序安装路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:30:07.867

该`.SaveAs`方法已经让您有机会指定一个新的文件名。这应该工作

```
 string newfilename = String.Format("{0}_{1}", "My_Prefix_", FileBrowse.FileName)
 FileBrowse.SaveAs(newfilename) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:31:32.103

您只需要`SaveAs`像这样调用 FileUpload 控件上的方法：

```
FileBrowse.SaveAs(strRename) 
```

代码中的调用`File.Copy`是不必要的。

# ios - 如何保存 1 个 xcode 项目中的所有构建设置并将它们用于其他 xcode 项目？

> ID：14484338
> 
> 赞同：5
> 
> 时间：2013-01-23T16:22:02.333
> 
> 标签：ios, xcode, cordova, jquery-mobile

我正在使用 xcode 4.5 和 cordova/phonegap 来构建我的应用程序。我已经投入了大量时间来为我的 xcode 项目设置合适的构建设置，并且我想在我正在构建的多个应用程序上重用这些设置。我正在寻找是否有一种快速的方法可以导出这些设置或构建可用于未来项目的模板。

我尝试复制项目文件夹并更改名称，但不起作用。使用 cordovalib.xcodeproj 文件时出现错误。

任何有关导出这些设置或创建模板的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:51:45.137

使用 .xcconfig 文件。

[http://developer.apple.com/library/ios/#recipes/xcode_help-project_editor/Articles/BasingBuildConfigurationsonConfigurationFiles.html](http://developer.apple.com/library/ios/#recipes/xcode_help-project_editor/Articles/BasingBuildConfigurationsonConfigurationFiles.html)

File.. New File.. 然后从 Other 部分选择 Configuration Settings File。

您必须从 xcodeproj 文件中复制构建设置。在文本编辑器中打开您的 xcodeproj 文件并复制：

```
buildSettings = { ... } 
```

进入您的 xcconfig 文件。请注意，xcconfig 文件具有特定格式。上面的视频/Apple 文档应该对您有所帮助。

然后，您需要告诉 Xcode 为每个构建配置使用哪个 xcconfig 文件。调试、发布等。您可以通过在配置下的项目信息选项卡下导入它来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-17T10:23:47.593

XCConfig 文件无疑是跨多个目标甚至项目共享构建设置的方式。

正如 StuR 六年前所写，您仍然可以从 XCode 的 New File 对话框中添加一个配置文件。它只是一个键值格式的文本文件。在我看来，添加配置值的最简单方法是转到目标的构建设置，选择要修改的设置行，然后按 cmd+c 复制它。当您粘贴配置文件时，它将以正确的格式插入。

要将配置文件添加到目标，您需要转到项目设置。有一个配置部分，您可以在其中为每个目标和配置（调试、发布等）设置配置文件

您可以在此处找到 XCConfig 文件的官方文档：[https ://help.apple.com/xcode/mac/10.1/#/dev745c5c974](https://help.apple.com/xcode/mac/10.1/#/dev745c5c974)

XCConfig 文件的一个非常有用的特性是您可以导入其他 XCConfig 文件并构建一种继承模式。

# java - 访问硬件加密设备 java

> ID：14484339
> 
> 赞同：1
> 
> 时间：2013-01-23T16:22:05.250
> 
> 标签：java, security, certificate, x509certificate, devicetoken

我正在尝试制作一个简单的 java 应用程序，它使用安全令牌来签署文件（任何扩展名）。

我需要从令牌中读取所有信息并用它对文件进行签名，以便稍后加载签名文件、获取原始文件和所有其他信息。

这是我目前拥有的示例代码，我看到的主要问题是不同的令牌可以有不同的 .dll，我需要这样的抽象。

```
 String pkcs11config = "C:/Documents and Settings/nsaul/Escritorio/Lib/ep2pk11.cfg";

    Provider p = new sun.security.pkcs11.SunPKCS11(pkcs11config);

    //Use the provider
    char [] pin = {'#', '#', '#', '#', '#', '#', '#', '#'};
    KeyStore ks = KeyStore.getInstance("PKCS11",p);
    ks.load(null, pin); 
```

我在 C# 中找到了一个指南，似乎可以满足我的需要，但 Java 是该项目的要求。

[https://docs.microsoft.com/en-us/dotnet/standard/security/how-to-access-hardware-encryption-devices](https://docs.microsoft.com/en-us/dotnet/standard/security/how-to-access-hardware-encryption-devices)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:58:12.520

没有可用的抽象，你必须自己写一个。如果你的要求是支持多个潜在的提供者（我假设这就是你的意思，`different tokens can have different dll`因为提供者之间存在细微的差异，你应该创建一个负责每个提供者的类一个，并且将为所有操作实现一个定义良好的接口。
在您的其余代码中，您将只使用该接口，您可以使用依赖注入来根据当前安装使用适当的具体提供程序处理程序

# xsd - 缺少 docbookxi.xsd

> ID：14484344
> 
> 赞同：1
> 
> 时间：2013-01-23T16:22:23.547
> 
> 标签：xsd, docbook

似乎`/docbook-5.0/catalog.xml`在 DocBook 5.0 zip 中找到的（XML 目录）...

*   [http://www.docbook.org/xml/5.0/docbook-5.0.zip](http://www.docbook.org/xml/5.0/docbook-5.0.zip)

引用该`xsd/docbookxi.xsd`档案中似乎缺少的模式文件。

这只是一些尚不存在的功能的占位符，还是该目录文件中的合法错误/错误/疏忽？

做一些谷歌搜索`docbookxi.xsd`只会找到数百个对此 DocBook xml 目录参考的参考，但没有参考实际的 docbookxi.xsd 文件/定义。

由于我正在使用的环境的限制，我无法使用此模式的替代 RELAX NG 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:18:18.943

是的，这是一个合法的错误。我实际上不记得构建（糟糕的）XSD 版本的工具链是否能够生成 XInclude 版本。

我可以尝试创建“手动”XSD 文件的 XInclude 版本。但是，这将是 1.1 版的 XML Schema。这足够好，还是你需要1.0？

[附录]

经过一番调查，在我看来，XSD 中的 UPA 规则使得创建 XInclude 版本变得非常困难。简单地在部门级别（部分或参考）和组件级别（前言、章节等）允许 XInclude 违反了 UPA 规则，因为一本书可以以部门或组件开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:44:21.253

也许[http://docbook.org/xsd/5.0b2/docbook-xsd10.xsd](http://docbook.org/xsd/5.0b2/docbook-xsd10.xsd)或[http://docbook.org/xsd/5.0b2/docbook.xsd](http://docbook.org/xsd/5.0b2/docbook.xsd)是您正在寻找的？由于[Docbook 的 XSD 模式文档现在是手动维护的](http://norman.walsh.name/2011/12/19/docbookXSD)，因此很可能存在没有提供相应 XSD 模式文档的规范性 Relax NG 模式的版本。

# android - 用于移动应用程序开发的云服务

> ID：14484347
> 
> 赞同：2
> 
> 时间：2013-01-23T16:22:26.123
> 
> 标签：android, windows-phone-7, azure

我正在启动一个项目，为使用 Windows Azure 云服务的 WP7 和 Android 开发应用程序。云服务根据某些规则，定期将存储在其数据库中的一些数据发送到一些已注册的移动设备。

应该有一种方法可以在 Azure 上安装自定义 VM，以便该 VM 可以决定何时将数据发送到哪个移动设备。使用“Windows Azure 工具包”，移动应用程序可以在 Azure 上存储数据并稍后检索数据，但我看不出如何使用安装在 Azure 上的 VM 使用此工具包。

这可能吗？如果是，我应该从哪里开始开发应用程序？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:52:45.953

尽管我通常建议使用移动服务，并且您描述的场景使用移动服务相对容易完成（您只需用 JavaScript 编写一个服务器脚本，该脚本由 CRUD 操作触发，或者计划在给定的时间间隔运行给那些满足某些标准），不幸的是，您的目标是目前尚未正式支持的两个平台。

如果您愿意，现在可以使用非官方的 SDK（官方的 Android SDK 已在路线图上）：

安卓：[https ://github.com/goldshtn/wams-android](https://github.com/goldshtn/wams-android)

WP7：[https ://github.com/zaxy78/azure-mobile-wp7-sdk](https://github.com/zaxy78/azure-mobile-wp7-sdk)

您还可以在此处直接访问 REST API：http: [//msdn.microsoft.com/en-us/library/windowsazure/jj710108.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj710108.aspx)

否则，您始终可以使用 Microsoft 的主要 PaaS 产品云服务。您可能需要一个小的工人角色来完成您在上面详述的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:14:25.440

“ [Windows Azure 移动服务](http://www.windowsazure.com/en-us/home/scenarios/mobile-services/)”是一组实用程序，您无需管理这些实用程序，并为您解决大量托管和配置问题。它们添加了可扩展性等功能，但缺点是您对它们没有太多控制权。

如果您必须在 VM 中拥有代码，那么您需要自己编写代码。对于 Windows Phone，您应该看看[这个帮助程序库](http://blogs.windows.com/windows_phone/b/wpdev/archive/2011/01/14/windows-push-notification-server-side-helper-library.aspx)。

# jsf-2 - 具有必需属性的 PrettyFaces 错误

> ID：14484348
> 
> 赞同：2
> 
> 时间：2013-01-23T16:22:26.580
> 
> 标签：jsf-2, navigation, prettyfaces

我正在使用**JSF 2**和**prettyfaces**开发一个 Web 应用程序。我`@ViewScoped`用漂亮的注释注释了我的一个 bean。这就是我所拥有的：

```
@ManagedBean
@ViewScoped
@URLMapping(parentId = "app-list", id = "app-view", pattern = "/detail/#{appId}",
    viewId = "/system/manage_app/content/app_detail/app_detail.xhtml")
public class NavegableAppView extends SystemNavegable {

/** 
```

基本上，它显示了安装在我的系统中的应用程序的详细信息。这个 bean 可以通过两种方式实例化，传递`#{appId}`参数，它指示我要加载的应用程序的 id，**或者**没有那个参数，在这种情况下，bean 将从一个`@SessionScoped`bean 中恢复这个 id。

这就是页面`/system/manage_app/content/app_detail/app_detail.xhtml`管理参数的方式：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:p="http://primefaces.org/ui"
template="/templates/general_template.xhtml">

<ui:define name="metadata">
    <f:metadata>
        <f:viewParam id="appId" name="appId"
            value="#{navegableAppView._ParamApp}" required="false" />
        <f:event type="preRenderView"
            listener="#{navegableAppView.initialize}" />
    </f:metadata>
</ui:define>

<ui:define name="general_content">
    <p:panel>
<!--More stuff--> 
```

这里的问题是我想要`NavegableAppView`创建 bean，有或没有参数。我已经尝试过这种方法`<p:button value="prueba" outcome="pretty:app-view" />`，但它限制了我只能做**结果**和`<p:commandButton value="prueba2" action="pretty:app-view" ajax="false" />`，这相当于调用一个操作方法并返回导航案例（**这就是我真正想要的**）。

第一选择正确地创建 bean 并从会话中加载值。第二种情况，给我这个错误：

```
 HTTP 500 - PrettyFaces: Exception occurred while building URL 
 for MappingId < app-view >, Required value < #{appId} > was null 
```

所以我的目标bean没有被构建。我已经尝试将参数手动添加到导航案例中：`return pretty:app-view?appId=1`它可以工作，但我希望目标 bean 从会话本身中恢复它。我是否必须在我的操作方法中调用重定向或类似的东西？

汇集你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:35:54.037

所以你实际上遇到了 PrettyFaces 的“边缘”效果之一。您定义的“appId”参数实际上既是参数名称，也是用于构建链接的 EL bean 值位置。

```
@URLMapping(parentId = "app-list", id = "app-view", pattern = "/detail/#{appId}",
viewId = "/system/manage_app/content/app_detail/app_detail.xhtml") 
```

当您使用 PrettyFaces 的回发操作导航功能时，它需要一个 EL bean 名称。现在，碰巧的是，由于您没有在`@URLMapping`注释中提供参数名称，PrettyFaces 无论如何都会尝试使用参数名称，并希望它能找到您想要的。在这种情况下，显然没有名为 的 bean 值`#{appId}`。

您实际上是在混合尝试解决同一问题的两种类型的功能。您的`<f:metadata>`和`<f:viewParam>`定义与 PrettyFaces 对其路径参数和操作方法所做的事情相同。您应该使用一种或另一种机制。如果您真的想混合它们，那么正如您所说，您应该从您的[调用实际导航](http://ocpsoft.org/docs/prettyfaces/3.3.3/en-US/html/navigation.html#navigation.commands)`<h:commandButton>`，如下所示：

```
<p:commandButton value="prueba2" action="#{navegableAppView.goToAppId}" ajax="false" /> 
```

然后，您需要确保返回带有`appId`参数的有效 JSF2 导航字符串，例如：

```
public String goToAppId() {
    return "/system/manage_app/content/app_detail/app_detail.xhtml?faces-redirect=true&appId=" + appId";
} 
```

PrettyFaces 将了解您正在重定向到已映射的 URL，并将对该 URL 执行出站重写，并将您发送到正确的位置`/detail/#{addId}`。这[都在文档中。](http://ocpsoft.org/docs/prettyfaces/3.3.3/en-US/html/outbound_rewriting.html)

最后一个选项是简单地删除`<f:metadata>`and `<f:viewParam>`，并使用内置的 PrettyFaces 功能来管理视图参数。只需删除元数据并将您的更新`@URLMapping`到此，就可以解决您的问题：

```
@ManagedBean
@ViewScoped
@URLMapping(parentId = "app-list", id = "app-view", pattern = "/detail/#{appId : navegableAppView._ParamApp}",
viewId = "/system/manage_app/content/app_detail/app_detail.xhtml")
public class NavegableAppView extends SystemNavegable {

@URLAction
public String initialize() {
if ( appId != null ) {
      this.item = appsDB.findById(appId);
      return null;
    }

    // Add a message here, "The item {..} could not be found."
    return "pretty:app-list";
} 
```

这就是使用 PrettyFaces 初始化页面的方式。归根结底，如果您使用`pretty:mappingId`导航，则应该*只*使用 PrettyFaces 功能。如果您打算使用普通的 JSF2 样式导航，在其中指定视图 ID 和 URL 的所有参数，那么您可以混合匹配（只要您在 URL 映射中使用*命名*路径参数。

我希望这有帮助。

# python - Python如何将文件与模板匹配

> ID：14484349
> 
> 赞同：1
> 
> 时间：2013-01-23T16:22:26.683
> 
> 标签：python

我希望将许多文件与一些常见模板进行匹配，并提取差异。我想就最好的方法提出建议。例如：

模板 A：

```
<1000 text lines that have to match>
a=?
b=2
c=3
d=?
e=5
f=6
<more text> 
```

模板 B：

```
<1000 different text lines that have to match>
h=20
i=21
j=?
<more text>
k=22
l=?
m=24
<more text> 
```

如果我传入文件 C：

```
<1000 text lines that match A>
a=500
b=2
c=3
d=600
e=5
f=6
<more text> 
```

我想用一种简单的方法说这与模板 A 匹配，并提取“a=500”、“d=600”。

我可以将这些与正则表达式匹配，但文件相当大，构建该正则表达式会很痛苦。

我也尝试过 difflib，但解析操作码和提取差异似乎不是最佳的。

有人有更好的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:29:55.987

您可能需要稍微调整一下以处理附加文本，因为我不知道确切的格式，但应该不会太难。

```
with open('templ.txt') as templ, open('in.txt') as f:
    items = [i.strip().split('=')[0] for i in templ if '=?' in i]
    d = dict(i.strip().split('=') for i in f)
    print [(i,d[i]) for i in items if i in d] 
```

*出去：*

```
[('a', '500'), ('d', '600')]  # With template A
[]                            # With template B 
```

或者如果对齐：

```
from itertools import imap,compress
with open('templ.txt') as templ, open('in.txt') as f:
    print list(imap(str.strip,compress(f,imap(lambda x: '=?' in x,templ)))) 
```

*出去：*

```
['a=500', 'd=600'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:39:44.213

不考虑性能：

1.  将所有内容加载到字典中，以便您拥有例如`A = {'a': '?', 'b': 2, ...}`, `B = {'h': 20, 'i': 21, ...}`,`C = {'a': 500, 'b': 2, ...}`

2.  如果`A.keys() == C.keys()`你知道 C 匹配 A。

3.  然后简单[地区分两个字典](https://stackoverflow.com/questions/1165352/fast-comparison-between-two-python-dictionary)。

根据需要改进。

# c# - C# 节流 For 循环

> ID：14484353
> 
> 赞同：7
> 
> 时间：2013-01-23T16:22:39.020
> 
> 标签：c#, winforms, stack, queue, concurrent-collections

**初始情况**

我正在开发一个 .NET Framework 4.0、C#、Winform 应用程序。应用程序将在 GridView 中列出（并测试）WebServiceOperations（当前有 60 个 DataRows => WebServiceOperations）。

**客观的**

我必须通过单击按钮来测试/调用所有这些操作。每个操作都会创建一个类的新实例。在这个类中，我调用 WebServiceOperation async 并等待结果。然后对结果进行验证。整个代码使用委托和事件可以顺利运行。

*现在是挑战/问题*：单击该按钮时，我使用 for 循环 (int i = 0; i < gridViewWsOperations.RowCount; i++) => 换句话说，目前我正在对他们进行 60 次操作'同时' => 服务器同时处理 60 个请求时超载，我得到超时。所以我需要以某种方式限制并发请求的数量，让我们同时说 10 个。考虑一下，for 循环（我必须将请求排入队列）与我将请求出列的方法（process_result 事件）不在同一个线程中。我使用 ConcurrentQueue 进行了尝试，因为这种类型的集合似乎是线程安全的。

**链接**

[MSDN 上的并发队列](http://msdn.microsoft.com/en-us/library/dd267265%28v=vs.100%29.aspx)

一个示例代码真的很有帮助！

--- 这是我的解决方案/示例代码 ---

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections.Concurrent;
using System.Threading;

namespace ConcurrentQueueSample
{
    class Program
    {
        static SemaphoreSlim semaphoreSlim = new SemaphoreSlim(3);

        static void Main(string[] args)
        {
            System.Timers.Timer timer = new System.Timers.Timer();
            timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
            timer.Interval = 1234;
            timer.Enabled = true;
            timer.Start();

            for (int i = 0; i < 10; i++) new Thread(go).Start(i);
        }

        static void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
        {
            semaphoreSlim.Release();
        }

        static void go(object i)
        {
            Console.WriteLine("id: {0}", i);
            semaphoreSlim.Wait();
            Console.WriteLine("id: {0} is in", i);
            Thread.Sleep(1250);
            Console.WriteLine("id: {0} left!", i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T16:27:30.670

您可能想看看使用[SemaphoreSlim](http://msdn.microsoft.com/en-us/library/system.threading.semaphoreslim.aspx)类来限制有权访问您的队列的线程。

# android - 无法原生调试

> ID：14484358
> 
> 赞同：5
> 
> 时间：2013-01-23T16:22:55.323
> 
> 标签：android, android-ndk, adt, android-debug

直到最近我才能够使用本机调试功能。我一直在用 java 编码并回到本机代码，但现在我无法进行本机调试。它将运行并使用以前工作的调试配置，但是当它附加时我在启动时收到空指针错误：

> 'Launching [debug config]' 遇到问题。
> 
> “启动 [调试配置]”期间发生内部错误。
> 
> java.lang.NullPointerException

该应用程序将在设备上运行，但不会遇到断点。有没有人看到这个，让我抓狂？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T09:42:40.520

原来这是由于清单“可调试”设置为假。当您不运行本机时，它会准确地告诉您。使用本机，您会得到绝对无用的错误。我将提出增强请求。

# wpf - 将 ListBoxItem 的内容绑定到不相关的内容

> ID：14484360
> 
> 赞同：2
> 
> 时间：2013-01-23T16:22:58.420
> 
> 标签：wpf, mvvm, listboxitem

我是 WPF 新手，但对将列表框控件绑定到视图模型中的可观察集合非常熟悉。

在我当前的项目中，我们有一个 ListBox，用于导航到框架框中的不同页面。我想向第一个 ListBoxItem 添加一些显示信息，以显示正在处理哪个对象（在本例中为场景）（它在前一帧中选择，在后续帧中可见）。ListBox 本身使用 xaml 中定义的静态列表，因此它没有绑定到 ViewModel 中的任何内容。CurrentScenario 是 ViewModel 上的一个属性。我能够将标签添加到包含此 ListBox 的同一窗口并成功地将 CurrentScenario.Id 绑定到其内容，并且它已正确更新，因此我知道 Binding 语句中的路径应该正确解析。

```
<ListBox  
  Style="{StaticResource FunctionBackground}" 
  IsSynchronizedWithCurrentItem="True" 
>
    <ListBoxItem Style="{StaticResource FunctionListBoxItemStyle}">
        <ListBoxItem.ContentTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0" Text="Scenario" />
                    <TextBlock Grid.Row="1" Text="{Binding Path=CurrentScenario.Id}"/>
                </Grid>
            </DataTemplate>
        </ListBoxItem.ContentTemplate>
    </ListBoxItem>
    <ListBoxItem Style="{StaticResource FunctionListBoxItemStyle}" >Parameter</ListBoxItem>
    <ListBoxItem Style="{StaticResource FunctionListBoxItemStyle}" >Run</ListBoxItem>
    <ListBoxItem Style="{StaticResource FunctionListBoxItemStyle}" >Results</ListBoxItem>
</ListBox> 
```

当我尝试将此额外信息添加到列表框项目时，据我所知，列表框项目在文本块下方有一个空文本块，其中包含“场景”一词。我不明白为什么空文本框内容没有显示绑定属性的值。当我在第二个文本块的 Text 属性中放置一个普通字符串时，它会正确显示。

我想要么 ListBoxItem 内容仅设置绑定到与 ItemSource 相关的属性，因此它忽略了绑定到其他事物的尝试，或者 WPF 中可能存在一些我缺少的基本内容。或两者...

谢谢，如果有人有任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:31:46.633

因此，如果属性`CurrentScenario`在 ViewModel 中，您可以使用`RelativeSource`绑定到该属性。

```
...
<TextBlock Grid.Row="0" Text="Scenario" />
<TextBlock Grid.Row="1" Text="{Binding Path=DataContext.CurrentScenario.Id, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}"/>
... 
```

# jquery - 使用 jquery 解析 json（来自 pylons）

> ID：14484364
> 
> 赞同：0
> 
> 时间：2013-01-23T16:23:06.300
> 
> 标签：jquery, json, pylons

我已经设置了一个 pylons 服务器来接受“/searcher?q=blahblah”形式的请求。这会返回一些不错的 json 格式：

```
[{"name":"onefish","type":"one"},{"name":"twofish",type:"two"}]
```

我使用javascript得到这个：

```
function search() {
   var query = $('#search_box').val();
   $.getJSON('/searcher',
      {
         q: query
      },
      function(data) {
         $.each(data,function(index,element) {
            $(body).append($('<div>',{text: element.name}));
         }
      }
   );
} 
```

这在调用时成功查询服务器并被调用（服务器给出响应代码 200）。但是，代码不会向正文添加任何内容。当我用类似的东西替换时，同样没有发生任何`$(body).append(...);`事情`$('#some_id').html(...);`。我的查询、解析或输出有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:32:07.757

我自己解决了这个问题。 `body`需要在引号中...

# java - 如何确定在 Java 中创建文件时允许的最大路径长度

> ID：14484368
> 
> 赞同：3
> 
> 时间：2013-01-23T16:23:17.207
> 
> 标签：java, file-io, nio

如何确定在 Java 中创建文件时允许的最大路径长度。我正在使用 Java 7，因此如果有帮助可以使用 Java NIO2，但我如何确定文件系统上允许的文件最大长度并确保我不会尝试创建具有此类无效路径的文件。

我想在尝试创建路径（子字符串）之前缩短路径（子字符串），然后再处理问题，特别是因为异常/错误消息可能因文件系统而异。

我不想硬编码每个平台的长度，因为 Windows 应用程序可以访问 OSX 文件系统等，所以无论如何都不会工作。

它仅在尝试创建文件时失败，即

```
 try
        {

            Path p = Paths.get("C:/User/Mesh/kkkkkkkkkkkkkkkkkkkkkkkkkkrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk.txt");
            Files.createFile(p);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        } 
```

给

```
java.nio.file.FileSystemException: C:\User\Mesh\kkkkkkkkkkkkkkkkkkkkkkkkkkrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk.txt: The filename, directory name, or volume label syntax is incorrect.

    at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:86)
    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)
    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)
    at sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:229)
    at java.nio.file.Files.newByteChannel(Files.java:315)
    at java.nio.file.Files.createFile(Files.java:586) 
```

与 Java 6 方法比较

```
try
        {
            //File file = new File("C:/User/Mesh/kkkkkkkkkkkkkkkkkkkkkkkkkkrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk.txt");
            Path p = Paths.get("C:/User/Mesh/kkkkkkkkkkkkkkkkkkkkkkkkkkrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk.txt");
            p.toFile().createNewFile();
            //boolean result=file.isFile();
            //System.out.println("Result is:"+result);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        } 
```

给出完全不同的错误

```
java.io.IOException: The filename, directory name, or volume label syntax is incorrect
    at java.io.WinNTFileSystem.createFileExclusively(Native Method)
    at java.io.File.createNewFile(File.java:947) 
```

但实际上无关紧要，因为我想在创建文件之前做一些事情

编辑：看起来 255 个字符是一个很好的默认[http://en.wikipedia.org/wiki/Filename](http://en.wikipedia.org/wiki/Filename)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:02:26.573

尝试以下方式：

```
boolean success = true;
File testFile = new File("/a/really/long/name");
try {
    success = testFile.createNewFile();
} catch (IOException ioe) {
    // anyway check the exception, the problem could have been other
    // for example: duplicate name, lack of permissions, etc.
    success = false;
}

if (!success) {
    // error creating file
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:04:13.883

有一个方法可以用来创建一个有效的路径名，否则它会抛出一个 InvalidPathException `getPath`。`java.nio.file.FileSystem`也许这可以帮助你。

# django - 如何在 django 管理员更改列表上添加顶部保存按钮？

> ID：14484369
> 
> 赞同：6
> 
> 时间：2013-01-23T16:23:18.070
> 
> 标签：django, django-admin

我想在 django 管理员更改列表页面顶部有一个保存按钮。django 似乎没有内置此功能。save_on_top 选项仅控制更改表单页面上的行为。欢迎任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-04-26T22:16:32.217

在 Django 3（可能更早，不确定）中，在您的自定义管理表单中添加`save_on_top = True`

```
class MyAdmin(admin.ModelAdmin):
    save_on_top = True 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T05:21:16.380

首先，您需要一种方法来扩展在`django/contrib/admin/templates/admin/change_list.html`. 如果您还不知道该怎么做，请查看[这个答案](https://stackoverflow.com/a/6586068/237244)和[这个答案](https://stackoverflow.com/a/10267927/237244)。

接下来，您需要创建自己的`change_list.html`模板并将类似于以下的代码放入其中。为了简单起见，我已经包含了内联 CSS。但是，这是不好的做法，因此您不应该这样做。假设您将 CSS 移动到外部文件，则无需加载`admin_static`. 最后，`extends`您使用的线可能与我在这里显示的不完全相同。

```
{% extends "contrib/admin/templates/admin/change_list.html" %}
{% load i18n admin_static %}

{% block result_list %}
    {% if cl.formset and cl.result_count %}
        <div style="border-bottom: 1px solid #ccc; background: white url({% static "admin/img/nav-bg.gif" %}) 0 180% repeat-x; overflow: hidden;">
            <p>
                <input type="submit" name="_save" class="default" value="{% trans 'Save' %}"/>
            </p>
        </div>
    {% endif %}

    {{ block.super }}
{% endblock %} 
```

`{% if %}`标签和`<input>`它里面的标签来自`django/contrib/admin/templates/admin/pagination.html`.

CSS 基于 CSS for`#changelist .paginator`并在`django/contrib/admin/static/admin/css/changelists.css`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-04T18:51:16.967

如果你不介意在页面顶部也有分页链接，你可以用几行模板代码来完成，Django 2.0 中的worksforme。

创建`my_app/templates/admin/my_app/my_model/change_list.html`：

```
{% extends "admin/change_list.html" %}
{% load admin_list %}

{% block result_list %}
    {% pagination cl %}
    {{ block.super }}
{% endblock %} 
```

这将呈现分页*和*保存按钮：

[![在此处输入图像描述](../Images/b0ab805a41d64806f15c14eed2a861b2.png)](https://i.stack.imgur.com/dLePs.jpg)

可以从一两行 CSS 中受益，虽然......

# java - 谷歌在 jsonparser 中放置评论，arraylist

> ID：14484370
> 
> 赞同：0
> 
> 时间：2013-01-23T16:23:19.533
> 
> 标签：java, android, python, xml, json

我遇到了问题，所以我正在使用**google places api**。

我不会在这里写整个代码，因为它太大了。但这就是我每次调用 google api 时得到的结果：

```
{
   "html_attributions" : [],
   "result" : {
      "address_components" : [
         {
            "long_name" : "48",
            "short_name" : "48",
            "types" : [ "street_number" ]
         },
         {
            "long_name" : "Pirrama Road",
            "short_name" : "Pirrama Road",
            "types" : [ "route" ]
         },
         {
            "long_name" : "Pyrmont",
            "short_name" : "Pyrmont",
            "types" : [ "locality", "political" ]
         },
         {
            "long_name" : "NSW",
            "short_name" : "NSW",
            "types" : [ "administrative_area_level_1", "political" ]
         },
         {
            "long_name" : "AU",
            "short_name" : "AU",
            "types" : [ "country", "political" ]
         },
         {
            "long_name" : "2009",
            "short_name" : "2009",
            "types" : [ "postal_code" ]
         }
      ],
      "events" : [
        {
          "event_id" : "9lJ_jK1GfhX",
          "start_time" : 1293865200,
          "summary" : "<p>A visit from author John Doe, who will read from his latest book.</p>
                       <p>A limited number of signed copies will be available.</p>",
          "url" : "http://www.example.com/john_doe_visit.html"
        }
      ],
      "formatted_address" : "48 Pirrama Road, Pyrmont NSW, Australia",
      "formatted_phone_number" : "(02) 9374 4000",
      "geometry" : {
         "location" : {
           "lat" : -33.8669710,
           "lng" : 151.1958750
         }
      },
      "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png",
      "id" : "4f89212bf76dde31f092cfc14d7506555d85b5c7",
      "international_phone_number" : "+61 2 9374 4000",
      "name" : "Google Sydney",
      "rating" : 4.70,
      "reference" : "CnRsAAAA98C4wD-VFvzGq-KHVEFhlHuy1TD1W6UYZw7KjuvfVsKMRZkbCVBVDxXFOOCM108n9PuJMJxeAxix3WB6B16c1p2bY1ZQyOrcu1d9247xQhUmPgYjN37JMo5QBsWipTsnoIZA9yAzA-0pnxFM6yAcDhIQbU0z05f3xD3m9NQnhEDjvBoUw-BdcocVpXzKFcnMXUpf-nkyF1w",
      "reviews" : [
         {
            "aspects" : [
               {
                  "rating" : 3,
                  "type" : "quality"
               }
            ],
            "author_name" : "Simon Bengtsson",
            "author_url" : "https://plus.google.com/104675092887960962573",
            "text" : "Just went inside to have a look at Google. Amazing.",
            "time" : 1338440552869
         },
         {
           "aspects" : [
              {
                 "rating" : 3,
                 "type" : "quality"
              }
             ],
            "author_name" : "Felix Rauch Valenti",
            "author_url" : "https://plus.google.com/103291556674373289857",
            "text" : "Best place to work :-)",
            "time" : 1338411244325
         },
         {
           "aspects" : [
              {
                 "rating" : 3,
                 "type" : "quality"
              }
             ],
            "author_name" : "Chris",
            "text" : "Great place to work, always lots of free food!",
            "time" : 1330467089039
         }
      ],
      "types" : [ "establishment" ],
      "url" : "http://maps.google.com/maps/place?cid=10281119596374313554",
      "vicinity" : "48 Pirrama Road, Pyrmont",
      "website" : "http://www.google.com.au/"
   },
   "status" : "OK"
} 
```

现在我都把它保存在这里：

```
package com.androidhive.googleplacesandmaps;

import java.io.Serializable;

import com.google.api.client.util.Key;

/** Implement this class from "Serializable"
* So that you can pass this class Object to another using Intents
* Otherwise you can't pass to another actitivy
* */
public class Place implements Serializable {

    @Key
    public String id;

    @Key
    public String name;

    @Key
    public String reference;

    @Key
    public String icon;

    @Key
    public String vicinity;

    @Key
    public Geometry geometry;

    @Key
    public String formatted_address;

    @Key
    public String formatted_phone_number;

    @Override
    public String toString() {
        return name + " - " + id + " - " + reference;
    }

    public static class Geometry implements Serializable
    {
        @Key
        public Location location;
    }

    public static class Location implements Serializable
    {
        @Key
        public double lat;

        @Key
        public double lng;
    }

} 
```

这是我得到结果的方式：

```
public class PlacesList implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Key
    public String status;

    @Key
    public List<Place> results;

} 
```

现在我的问题是：

**在我从谷歌得到的结果中，你可以看到 photo_reference。但它是一个数组，我只需要第一个 photo_reference。我怎样才能在我的代码中得到它？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:44:07.433

```
JSONObject res = // your google api results
JSONArray photos = res.getJSONArray("photo_reference"); // Extract the JSONArray

// Get the item at index 0, which should be a reference to the first image
String photo = photos.getString(0); 
```

这将为您提供对照片的引用，然后看起来您必须向 Photo API 发出另一个请求。

```
https://maps.googleapis.com/maps/api/place/photo?parameters 
```

有关如何使用 Photo API 的更多信息，请查看[https://developers.google.com/places/documentation/photos](https://developers.google.com/places/documentation/photos)

# java - Java：在文档中查找任何字符串

> ID：14484371
> 
> 赞同：-1
> 
> 时间：2013-01-23T16:23:20.280
> 
> 标签：java, regex

我真的不擅长正则表达式，所以我希望你能帮助我：

我写了一个类，它可以打开一个`odf`文档，搜索一些给定`keywords`的（`keys`在 a 中`hashmap`）并将这些关键字*替换*`odf-files`为其他的内容（哈希图的值）。课程到此结束，只是缺少正则表达式部分。如果键只是像“FILE”或“REPLACETHIS”这样的字符串，那么一切正常。但我还需要能够替换像“{{File_1}}”、“”、“！替换这个！”这样的字符串。等等。这些字符串可以由用户选择，因此可能性是无穷无尽的。这些字符串也可以是其他字符串的一部分，例如：“this is so[replace this]me text”。

我希望你明白我想要什么，这甚至是可能的。

-e- 是的，我必须使用正则表达式，因为我使用的库需要 Pattern.compile 对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:59:22.723

恕我直言，做我认为你想做的最短的方法是（你在帖子下面的评论中确认了它）：

```
Pattern pattern = Pattern.compile(Pattern.quote(yourStringToBeReplaced)); 
```

这样，字符将*失去*其特殊的正则表达式含义，用户可以输入他们想要的任何内容。

[在JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)中阅读有关这些方法的更多信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T16:39:23.167

据我了解（如果我错了，请随时纠正我）您的主要问题是具有特殊正则表达式含义的字符。为什么不在编译模式之前转义这些字符呢？

```
myPattern = "some user defined word with { strange characters";
myPattern = myPattern.replaceAll( "\\{", "\\{" );
myPattern = myPattern.replaceAll( "\\}", "\\}" );
myPattern = myPattern.replaceAll( "\\.", "\\." );
...
Pattern regex = Pattern.compile( myPattern ); 
```

# linux - Linux终端：更改目录时运行命令

> ID：14484372
> 
> 赞同：5
> 
> 时间：2013-01-23T16:23:28.160
> 
> 标签：linux, shell, directory, command

我在 Linux 环境中工作，需要为不同的工作区域加载某些模块。这些由单独的文件系统目录分隔。

我想知道在输入目录时是否有一种简单的方法可以运行不同的 1 行命令。我对所使用的 shell 类型很灵活，但目前正在使用 C Shell。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T16:32:23.507

如果您使用的是 bash，我建议您创建这样的函数：

```
function custom_cd() { custom_command $1; cd $1; }
alias cd='custom_cd' 
```

在这里，您的自定义命令可以是任何将根据您输入的目录执行特定命令的命令。

之后声明的别名确保键入“cd”将调用函数和真正的 cd 命令。

**编辑**：您需要的示例

```
function custom_cd() {
    if [ -z "$1" ];
    then
        target=~
    else
        target=$1
    fi
    target=${target%/}
    parent=$(dirname `readlink -f $target`)
    grand_parent=`dirname $parent`
    script=$grand_parent/`basename $target`.sh
    if [ -x $script ];
    then
      `$script`
    fi
    cd $1
} 
```

解释：

我们创建一个变量，其中包含您要输入的目录的父级。然后我们检索父母的父母。然后我们在祖父目录中创建脚本名称。

然后检查这个文件名的可执行性，如果是，则执行脚本，最后执行真正的cd命令。

注意在别名之前定义函数，否则会导致无限递归！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T16:39:48.160

您可以创建一个函数来运行这些特殊命令。

```
run_command() {
  case `pwd` in
    "/path/to/dir1" )
      ...
      ;;
    "/path/to/dir2" )
      ...
      ;;
    ...
  esac
} 
```

然后，您调用该函数以及`cd`另一个函数，例如。

```
cd2() {
  cd $1
  run_command
}

cd2 /path/to/somewhere 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T16:29:49.233

一个非常模糊的问题，但我认为该`alias`命令可能会对您有所帮助：

```
alias cd='echo "hello $1"' 
```

这将`hello <arg given to cd>`在您尝试 cd 某处时显示

# java - GWT celltable启用左右键盘并输入选择对象

> ID：14484373
> 
> 赞同：0
> 
> 时间：2013-01-23T16:23:33.867
> 
> 标签：java, gwt

我有一个 gwt 单元表，我需要从键盘启用右键和左键，并选择用回车键聚焦的元素。有人可以使用示例吗？gwt 示例使用鼠标单击选择每个行元素。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T11:43:23.280

为此，您必须重写 GWT 的某些方法。[在这个官方示例](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/cell/client/AbstractCell.html)中，一切都得到了很好的解释

此外，最初您可以通过启用键盘选择策略来启用键盘控制，例如

```
 cellTable.setKeyboardSelectionPolicy(KeyboardSelectionPolicy.ENABLED); 
```

这将启用单元格表行中的导航，并在空格键上进行选择。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T04:02:13.877

您是否正在尝试与 GWT 已经在 celltable 中提供的不同的东西。导航到 GWT CellTable 演示 - [http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCellTable](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCellTable)

您可以看到“Enter”/“Space”/“Up”/“Down”/“Left”/“RIGHT”键的使用。注意并观察每列的行为。

它们涵盖了所有用例。Selection Model 、 Key Provider 和 Column Type 决定了您在 celltable 中击键的响应。

# ios - 确定点击的 UItextView 的标签

> ID：14484375
> 
> 赞同：0
> 
> 时间：2013-01-23T16:23:38.177
> 
> 标签：ios, xcode

我在 UIscroll 视图中有许多 UItextViews。当用户按下按钮时，他应该能够点击这些 UItextView 之一，并且根据他触摸的文本视图，将选择其中的文本。由于我的 UItextViews 编号取决于每个用户，因此我为它们分配了一个整数的标签：1、2、3。然后我使用点击手势来检测被触摸视图的标签：

```
UITapGestureRecognizer *myLongPressRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(leftSwipe:)];
 //[myLongPressRecognizer setDirection:(UISwipeGestureRecognizerDirectionUp)];
[textname addGestureRecognizer:myLongPressRecognizer];

- (void)leftSwipe:(UITapGestureRecognizer *)recognizer {

id sender;
UITextView *txtChoosen = (UITextView*) sender;

for (UITextView* txt in textnameArray) {

    NSLog(@"%djjjjjjj, %d", txtChoosen.tag, txt.tag);

    if (txt.tag == txtChoosen.tag) {

        txt.layer.borderWidth = 5.0f;
        txt.layer.borderColor = [[UIColor whiteColor] CGColor];
    }else{

        txt.layer.borderWidth = 0.0f;
        txt.layer.borderColor = [[UIColor whiteColor] CGColor];
}}
... 
```

我的问题是 txtChoosen.tag 总是等于零。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:46:05.637

我终于想出了如何确定标签：

```
if (txt.tag ==  [(UIGestureRecognizer *)recognizer view].tag) {

... 
```

基本上这是确定它的代码：

```
[(UIGestureRecognizer *)recognizer view].tag 
```

# encryption - 如何在本地受限沙箱中操作加密文件（限制本地机器访问输出/中间体）？

> ID：14484377
> 
> 赞同：0
> 
> 时间：2013-01-23T16:23:42.620
> 
> 标签：encryption, local, sandbox

我需要对本地沙箱中的加密文件进行操作。这意味着我想限制对密钥和未加密文件的本地访问。我想要一个脚本来 ping 网络服务器以在 JS 环境中安全地提取密钥，使用此密钥解密文件，对其进行操作，并将信息发送到网络服务器，而本地用户无需访问任何输出或中间体。是否可以在提交的脚本中本地沙箱，以便它在本地运行，但提交后本地机器完全无法访问它所运行的内容？（只接受输入 - 输出，内存中的中间体不可访问）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:17:42.243

不，这类似于在不控制运行时环境的情况下执行 DRM 方案。也许您可以锁定其他脚本（足够困难），但肯定不能锁定控制浏览器的用户。你能做的最好的就是混淆这些值......

# c# - Asp.net MVC 多用户会话/用户模拟

> ID：14484382
> 
> 赞同：2
> 
> 时间：2013-01-23T16:24:00.657
> 
> 标签：c#, asp.net, asp.net-mvc, forms-authentication

大家好，如果我们可以说用户会话模拟，我可以帮助管理

我在我的应用程序中实现了角色架构，为了简单起见，假设我有 2 个角色

*   系统管理员
*   普通用户

当用户登录系统时，他们会被重定向到他们的特定模块 EX：如果用户是管理员，他们会被重定向到管理部分，到目前为止没有任何问题，这只是为了给你一些上下文。

系统管理员的功能之一是能够模拟普通用户帐户，这样他们就可以像普通用户一样执行任何操作，我这样做的方式很简单，我只需登录系统管理员并重新以用户身份进行身份验证，问题是当同一个管理员想同时在多个帐户中时，按照该方法，我用最新信息覆盖 cookie 会话，所以如果我有 2 个选项卡并且我决定转到上一个选项卡当我刷新选项卡时，系统管理员将获得的信息是最新的，所以我在考虑尝试混合无 cookie 会话以将所有信息放入 url 以理论上有多个 asp.net 会话的可能性。

所以问题是如果可能的话，如果系统默认使用cookie存储，我可以让两个系统同时运行吗？我可以默认使用cookie系统并通过编程设置无cookie系统吗？

我只是不想在所有操作中手动传递用户 ID，并自己通过查询字符串保留该信息，因为在这个阶段这实际上会破坏我的代码，我将不得不重构系统的很大一部分

任何评论都将受到欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T18:58:19.950

这看起来很老，但如果有人想知道，您可以[`AuthenticateRequest`](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.authenticaterequest(v=vs.110).aspx)在应用程序生命周期中的事件期间将用户的身份替换为一个[`GenericIdentity`](http://msdn.microsoft.com/en-us/library/system.security.principal.genericidentity(v=vs.110).aspx)and[`GenericPrincipal`](http://msdn.microsoft.com/en-us/library/system.security.principal.genericprincipal(v=vs.110).aspx)或您自己的实现`IPrincipal`and`IIdentity`接口的类。您如何确定哪些请求应该更改身份，哪些不应该基于会话变量（我倾向于尽可能避免这些）在所有窗口/选项卡中进行模拟，或者可能是查询字符串或表单字段以创建特定选项卡/ windows 作为其他用户运行。设置`HttpContext.Current.User`在请求期间是临时的，不会更改其`FormsAuthentication`cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:36:24.007

在同一个浏览器中同时打开两个身份是不可能的。

我想到了两种选择：

*   要求管理员打开其他浏览器或具有不同用户的同一浏览器（以 Chrome 为例）以同时操作两个身份。
*   更改应用程序的方法：不要更改身份，而是为管理员提供用户下拉菜单。该操作将使用该用户执行以检索数据或其他任何内容。（当然取决于您的应用程序）

# linux - 如何在 Linux 上检测 RAID？

> ID：14484383
> 
> 赞同：-1
> 
> 时间：2013-01-23T16:24:06.820
> 
> 标签：linux

我有 Linux 服务器 Ubuntu 11.10，以前的管理员向我保证，系统上使用了 RAID 1（软件）。但是，当我做`fdisk -l`（两个）磁盘之一时，甚至没有分区表。

```
 cat /proc/mdstat

       Personalities :
       unused devices: <none> 
```

我相信没有配置 RAID，第二个磁盘什么也不做。我怎么确定我是对的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:40:01.090

假设不是Soft RAID，你知道你用的是哪个RAID卡吗？例如，HP 智能阵列 P400。

签入命令行的一种可靠方法是运行磁盘阵列命令行工具。

例如：对于 HP 磁盘阵列配置，您可以安装`hpacucli`并运行：

```
hpacucli ctrl all show config 
```

输出可能如下所示：

```
Smart Array P400 in Slot 0    ()

   array A (SAS, Unused Space: 0 MB)

      logicaldrive 1 (136.7 GB, RAID 1+0, OK)

      physicaldrive 1I:1:1 (port 1I:box 1:bay 1, SAS, 146 GB, OK)
      physicaldrive 1I:1:2 (port 1I:box 1:bay 2, SAS, 146 GB, OK) 
```

你可以很容易地找出真相。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:16:53.560

检查日志或 dmesg 以查看是否提及软件 RAID。您还可以使用 mount 查看挂载了哪些设备。

*此外，您应该在 superuser.com 或 serverfault.com 上发布此内容，因为它与编程无关。*

# c# - 修改绑定到DataGridView的大数据集需要很长时间？

> ID：14484385
> 
> 赞同：3
> 
> 时间：2013-01-23T16:24:12.807
> 
> 标签：c#, winforms, multithreading, datagridview

我有一个自定义对象（MyObject），它实现了 INotifyPropertyChanged 并具有三个属性（一个 int、一个 string 和一个 bool）。这是该对象的代码：

```
public class MyObject : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, e);
        }
    }

    private int _Index;
    public int Index
    {
        get { return _Index; }
        set
        {
            if (_Index == value)
            {
                return;
            }

            _Index = value;
            OnPropertyChanged(new PropertyChangedEventArgs("Index"));
        }
    }

    private string _Name;
    public string Name
    {
        get { return _Name; }
        set
        {
            if (_Name == value)
            {
                return;
            }

            _Name = value;
            _Modified = true;
            OnPropertyChanged(new PropertyChangedEventArgs("Name"));
        }
    }

    private bool _Modified;
    public bool Modified
    {
        get { return _Modified; }
        set
        {
            if (_Modified == value)
            {
                return;
            }

            _Modified = value;
            OnPropertyChanged(new PropertyChangedEventArgs("Modified"));
        }
    }

    public MyObject()
    {
    }

    public MyObject(int index, string number, bool modified)
    {
        Index = index;
        Number = number;
        Modified = modified;
    }
} 
```

长话短说，我将这些对象的 BindingList 连接到 DataGridView，如下所示：

```
BindingList<MyObject> myObjectList = new BindingList<MyObject>();
BindingSource bindingSourceForMyObjects = new BindingSource();

bindingSourceForMyObjects.DataSource = myObjectList;
dataGridViewMyObjects.DataSource = bindingSourceForMyObjects; 
```

当我的应用程序运行时，myObjectList 将填充 100,000 个对象（从文件中读取）并显示在我的 DataGridView 中。我在 DataGridView 中只有一列，它显示我的对象的字符串属性。我的用户可能想要选择 DataGridView 中的所有行并“删除”它们。我在删除术语周围使用引号，因为对象实际上并没有被删除，而是所有 100,000 个对象的字符串属性都设置为 string.Empty。现在，我使用以下代码执行该操作：

```
myObjectList.ToList().ForEach(c => c.Name = string.Empty); 
```

此操作需要约 55 秒才能完成。我也试过：

```
foreach (DataGridViewRow row in dataGridViewMyObjects.SelectedRows)
{
    row.Cells["NAME"].Value = string.Empty;
} 
```

这需要 49 秒的时间稍微少一点，但它仍然是一个很长的操作。在旁注中，我还为 bindingSourceForMyObjects 定义了一个 ListChanged 事件处理程序，如下所示：

```
private void bindingSourceForMyObjects_ListChanged(object sender, ListChangedEventArgs e)
{
    if (e.ListChangedType == ListChangedType.ItemChanged)
    {
        dataGridViewMyObjects.Rows[e.NewIndex].DefaultCellStyle.BackColor = Color.Red;
        dataGridViewMyObjects.Rows[e.NewIndex].DefaultCellStyle.ForeColor = Color.White;
    }
} 
```

如您所见，当我以编程方式更改我的基础对象列表时（就像我将它们全部设置为 string.Empty 时所做的那样），我使用它来直观地指示 DataGridView 中已更改的行。当我“删除”所有对象时，这确实会增加一些开销，但即使没有这个事件处理程序，它仍然是一个冗长的操作。

最后，我的 WinForms 应用程序目前是单线程的，但我计划编写多线程代码，这样做是有意义的。此操作可能是其中一种情况，但在我走这条路之前，还有什么我遗漏的（或做我不需要做的事情）可以提高此操作的性能，所以它不会几乎需要一分钟才能完成？或者这只是处理 100,000 个对象的本质？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T17:44:51.193

@User685869 感谢您发布扩展对象。

在完成了一些快速测试示例之后，似乎引发`PropertyChanged`事件导致速度变慢。删除对它的调用将导致操作在一两秒内完成我的电脑上的 100k 记录。

即使没有事件处理程序，也会发生这种情况。

我假设您已经根据需要实现了接口；如果您不这样做，则将其删除将解决您的问题。

我可以建议的唯一解决方案是创建一个`boolean`可以设置为 true 的变量，以防止在进行批量更新时引发事件并在之后切换回正常状态。这样做的缺点当然是在进行批量操作时不会引发任何事件。

例如 ：-

我的对象

```
public boolean bulk = false;
public string Name
{
    get { return _Name; }
    set
    {
        if (_Name == value)
        {
            return;
        }

        _Name = value;
        _Modified = true;
        OnPropertyChanged(new PropertyChangedEventArgs("Name"));
    }
} 
```

父代码

```
_bindingList.ToList().ForEach(c =>
    {
       c.bulk = true;
       c.Name = string.Empty;
       c.bulk = false;
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:41:03.977

尝试这个：

```
dataGridView1.SuspendLayout();
        //do changes
        dataGridView1.ResumeLayout(); 
```

# python - 链式嵌套 dict() 在 python 中获取调用

> ID：14484386
> 
> 赞同：24
> 
> 时间：2013-01-23T16:24:13.917
> 
> 标签：python, dictionary, list-comprehension

我正在使用 dict.get('keyword') 方法查询嵌套字典。目前我的语法是......

```
M = cursor_object_results_of_db_query

for m in M:
    X = m.get("gparents").get("parent").get("child")
    for x in X:
        y = x.get("key") 
```

但是，有时“父”或“子”标签之一不存在，我的脚本失败。我知道使用`get()`我可以在表单的密钥不存在的情况下包含默认值...

```
get("parent", '') or
get("parent", 'orphan') 
```

但是，如果我包含任何我能想到的 , 或 empty ，则调用时链接`Null`失败，因为没有 method 。`''``.get("child")``''.get("child")``""``.get()`

`try-except`我现在解决这个问题的方法是在每个调用周围使用一堆顺序`.get("")`，但这似乎很愚蠢和不python - 有没有一种方法可以默认返回`"skip"`或`"pass"`仍然支持链接和智能失败，而不是深度-潜入不存在的键？

理想情况下，我希望这是对表单的列表理解：

```
[m.get("gparents").get("parent").get("child") for m in M] 
```

`.get("child")`但是当缺席的父母导致调用终止我的程序时，这目前是不可能的。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-23T16:32:26.603

由于这些都是 python`dict`并且您正在对它们调用`dict.get()`方法，因此您可以使用空`dict`来链接：

```
[m.get("gparents", {}).get("parent", {}).get("child") for m in M] 
```

通过保留最后一个默认值，`.get()`您将退回到`None`. 现在，如果没有找到任何中间键，则链的其余部分将使用空字典查找内容，并以`.get('child')`return终止`None`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-23T16:38:38.377

另一种方法是识别如果未找到密钥，则`dict.get`返回`None`。但是，`None`没有属性`.get`，所以它会抛出一个`AttributeError`：

```
for m in M:
    try:
       X = m.get("gparents").get("parent").get("child")
    except AttributeError:
       continue

    for x in X:
        y = x.get("key")
        #do something with `y` probably??? 
```

就像 Martijn 的回答一样，这并不能保证它`X`是可迭代的（非`None`）。虽然，您可以通过使`get`链中的最后一个默认返回一个空列表来解决这个问题：

```
 try:
    X = m.get("gparents").get("parent").get("child",[])
 except AttributeError:
    continue 
```

* * *

最后，我认为这个问题的最佳解决方案可能是使用`reduce`：

```
try:
    X = reduce(dict.__getitem__,["gparents","parent","child"],m)
except (KeyError,TypeError):
    pass
else:
    for x in X:
       #do something with x 
```

这里的好处是您可以`get`根据引发的异常类型知道是否有任何 s 失败。a 可能`get`返回错误的类型，然后你得到 a `TypeError`。但是，如果字典没有键，它会引发一个`KeyError`. 您可以单独或一起处理这些问题。无论哪种方式最适合您的用例。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-23T16:41:41.363

使用一个小的辅助函数怎么样？

```
def getn(d, path):
    for p in path:
        if p not in d:
            return None
        d = d[p]
    return d 
```

接着

```
[getn(m, ["gparents", "parent", "child"]) for m in M] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-23T00:13:17.983

我意识到我有点迟到了，但这是我在遇到类似问题时提出的解决方案：

```
def get_nested(dict_, *keys, default=None):
    if not isinstance(dict_, dict):
        return default
    elem = dict_.get(keys[0], default)
    if len(keys) == 1:
        return elem
    return get_nested(elem, *keys[1:], default=default) 
```

例如：

```
In [29]: a = {'b': {'c': 1}}
In [30]: get_nested(a, 'b', 'c')
Out[30]: 1
In [31]: get_nested(a, 'b', 'd') is None
Out[31]: True 
```

# jsf-2 - 如何防止字符串值 - “null” - 在表单提交后出现在我的“p：autocomplete”输入字段中

> ID：14484390
> 
> 赞同：0
> 
> 时间：2013-01-23T16:24:22.603
> 
> 标签：jsf-2, primefaces, java-7, mojarra

***(java7, jsf/mojarra v2.1.11, primefaces v3.4.2)***

# 问题

我有一个需要用户填写的带有`p:autocomplete`输入字段的表单。

它看起来像这样：

```
<p:autoComplete
    id="code"
    requiredMessage="code value required"
    converter="acConverter"
    style="overflow: hidden"
    maxResults="200"
    scrollHeight="150"
    dropdown="false"
    value="#{testBean.parmMap['code']}"
    completeMethod="#{testBean.codeListComplete}"
    var="entry"
    itemLabel="#{entry.split(':')[1]}"
    itemValue="#{entry.split(':')[0]}"
    minQueryLength="1"
    forceSelection="true">
</p:autoComplete> 
```

在“控制器”bean 中，我使用“ `validate(ComponentSystemEvent e)`”方法来确定该字段是否已被填充。
-当表单被提交并且用户没有选择一个值时，然后，我使用这个方法来创建一个错误消息（即，FacesMessage）并呈现一个响应（例如，`fc.renderResponse()`）。

回发时，`p:autocomplete`输入字段以粉红色突出显示，这很好。
--问题是该字段现在包含字符串文字：“null”。

（我尝试实现一个“转换器”来解决这个问题，但是没有成功。）

# 问题：

如何防止此“空”字符串出现在自动完成中？

（如果这个问题没有意义和/或您需要更多信息，请告诉我）

* * *

***仅供参考 - 如果您需要，以下是更多信息（否则，您可以忽略它）...***

* * *

***索引.xhtml...***

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
    <f:view contentType="text/html">
        <h:head>
            <title>test autocomplete...</title>
            <meta charset="utf-8" />
        </h:head>
        <h:body>
            <h:form id="queryForm">

                <f:event type="postValidate" listener="#{testBean.validate}" />
                <p:panel id="queryPanel"  header="test autocomplete..." style="width:100%;">

                    <p:autoComplete
                        id="code"
                        requiredMessage="code value required"
                        converter="acConverter"
                        style="overflow: hidden"
                        maxResults="200"
                        scrollHeight="150"
                        dropdown="false"
                        value="#{testBean.parmMap['code']}"
                        completeMethod="#{testBean.codeListComplete}"
                        var="entry"
                        itemLabel="#{entry.split(':')[1]}"
                        itemValue="#{entry.split(':')[0]}"
                        minQueryLength="1"
                        forceSelection="true">
                    </p:autoComplete>

                    <br/>
                    <br/>

                    <p:commandButton
                        id="submit"
                        value="Submit"
                        type="submit"
                        update="@form"
                        process="@form"
                        action="#{testBean.submitQuery}"
                        style="width:150px;"
                        styleClass="button"/>

                    <p:commandButton
                        value="Reset"
                        update="@form"
                        onclick="location.reload();return true;"
                        process="@this"
                        actionListener="#{testBean.reset}"
                        immediate="true"
                        ajax="false"/>

                </p:panel>
            </h:form>

            <h:outputStylesheet library="styles"    name="query.css"      />
            <h:outputScript      library="primefaces" name="/jquery/jquery.js" />
            <h:outputScript      library="primefaces" name="/jquery/plugins/ui/jquery-ui.custom.js" />
            <h:outputScript     library="primefaces" name="/jquery/plugins/inputmask/maskedinput.js" />

        </h:body>
    </f:view>
</html> 
```

***TestBean.java...***

```
package aaa.bbb.ccc.war;

import java.io.Serializable;
import java.text.ParseException;
import java.util.ArrayList;
import java.util.LinkedHashMap;
import java.util.List;
import javax.faces.application.FacesMessage;
import javax.faces.component.UIForm;
import javax.faces.component.UIInput;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;
import javax.faces.event.ComponentSystemEvent;
import org.apache.commons.lang.StringUtils;
import org.primefaces.context.RequestContext;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;

@Component("testBean")
@Scope("request")
public class TestBean implements Serializable
{
    public TestBean()
    {
        parmMap = this.getParmMap();
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("parmMap", parmMap);
    }

    public void reset(ActionEvent event)
    {
        RequestContext.getCurrentInstance().reset("queryForm:queryPanel");
        LinkedHashMap<String, Object> m = new LinkedHashMap<String, Object>();
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().remove("parmMap");
        setParmMap(m);
    }

    public String submitQuery()
    {
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().remove("hitlistData");

        System.out.println("TestBean_________________________submitQuery()____________________parmMap contains:" + this.getParmMap().toString());

        if (this.getParmMap().isEmpty())
        {
            return "";
        }

        return "/page2.xhtml?faces-redirect=true";
    }

    private static LinkedHashMap<String, Object> parmMap;
    public LinkedHashMap<String, Object> getParmMap()
    {
        LinkedHashMap<String, Object> map = (LinkedHashMap<String, Object>) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("parmMap");

        if (null == map)
        {
            map = new LinkedHashMap<String, Object>();
        }

        return map;
    }

    public void setParmMap(LinkedHashMap<String, Object> map)
    {
        parmMap = map;
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("parmMap", parmMap);
    }

    public void validate(ComponentSystemEvent e) throws ParseException
    {
        LinkedHashMap parmMap = this.getParmMap();
        UIForm queryForm = (UIForm) e.getComponent();
        FacesContext fc = FacesContext.getCurrentInstance();

        UIInput code_c = (UIInput) queryForm.findComponent("code");
        String code = (String) code_c.getValue();

        try
        {
            if (StringUtils.isBlank(code))
            {
                code_c.setValid(false);
                fc.addMessage(code_c.getClientId(), new FacesMessage(FacesMessage.SEVERITY_ERROR, code_c.getRequiredMessage(), code_c.getRequiredMessage()));
            }

            if (fc.getMessageList().size() > 0)
            {
                fc.renderResponse();
            }
        }
        catch (Exception e1)
        {
            e1.printStackTrace();
        }
    }

    private static List<String> codeList;
    public static List<String> getCodeList()
    {
        codeList = (List<String>) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("codeList");

        if (null == codeList)
        {
            codeList = new ArrayList<String>();
            codeList.add("keyaaaa:valaaaa");
            codeList.add("keybbbb:valbbbb");
            codeList.add("keycccc:valcccc");
            codeList.add("keydddd:valdddd");
            codeList.add("keyeeee:valeeee");
            codeList.add("keyffff:valffff");
            codeList.add("keygggg:valgggg");
            codeList.add("keyhhhh:valhhhh");
            FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("codeList", codeList);
        }

        return codeList;
    }

    public void setCodeList(List<String> list)
    {
        codeList = list;
    }

    public static List<String> codeListComplete(String s)       //autocomplete "completeMethod"...
    {
        List<String> list = getCodeList();
        List<String> suggestions = new ArrayList<String>();
        for (String ss : list)
        {
            if (ss.toLowerCase().contains(s.toLowerCase()))
            {
                suggestions.add(ss);
            }
        }

        return suggestions;
    }

} 
```

***ACConverter.java（我在尝试删除字符串值“null”时创建了它）...***

```
package aaa.bbb.ccc.war;

import javax.faces.application.FacesMessage;
import javax.faces.component.UIComponent;
import javax.faces.component.UIInput;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.ConverterException;
import javax.faces.convert.FacesConverter;
import org.apache.commons.lang.StringUtils;

@FacesConverter("acConverter")
public class ACConverter implements Converter
{
    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value)
    {
        try
        {
            if (StringUtils.isBlank(value) || String.valueOf(value).equalsIgnoreCase("null"))
            {
                return "";
            }
        }
        catch (Exception e)
        {
            UIInput input = (UIInput) component;
            FacesMessage msg = new FacesMessage(input.getConverterMessage(),input.getConverterMessage());
            msg.setSeverity(FacesMessage.SEVERITY_ERROR);
            throw new ConverterException(msg);
        }

        return value;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value)
    {
        return (null==value?"":String.valueOf(value));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:49:43.113

谢谢你，弗洛里斯的想法。我以为我必须通过“转换器”来实现它，但是，这不起作用。

然而，在对 UIInput 组件上可用的方法进行了一些实验之后，我发现我可以使用该`setSubmittedValue` 方法将字段的值设置为空白。这似乎有效。

IE，

```
code_c.setSubmittedValue("");
code_c.setValid(false);
fc.addMessage(code_c.getClientId(), new FacesMessage(FacesMessage.SEVERITY_ERROR, code_c.getRequiredMessage(), code_c.getRequiredMessage())); 
```

如果这是一个不明智的解决方案，请告诉我。

再次感谢

s

# android - 查看是否设置了不同的主屏幕和锁屏壁纸

> ID：14484394
> 
> 赞同：10
> 
> 时间：2013-01-23T16:24:27.800
> 
> 标签：android, live-wallpaper, wallpaper

我有一个正在运行的动态壁纸并对`SCREEN_ON`事件做出反应以在画布上显示更改。然而，在某些手机上，用户可以设置不同的锁屏和主屏幕壁纸（Touchwiz，一些 Xperia 设备）。当用户在锁屏上设置了不同的壁纸时，我的动态壁纸不会显示。

在我使用的 Galaxy S3 上，当用户设置了不同的锁屏壁纸时`WallpaperService.Engine.isVisible()`，它会正确返回。`false`但是，在 Galaxy S3 Mini 上，这不起作用，因为`isVisible()`返回`true`我的动态壁纸是否是活动的锁屏壁纸。

`WallpaperManager.getWallpaperInfo()`或者`WallpaperManager.peekDrawable()`也不工作，因为`getWallpaperInfo()`无论当前的锁屏壁纸如何，都会返回我的动态壁纸，并且`peekDrawable()`即使我的动态壁纸为两个屏幕都设置了，也会返回一个有效的可绘制对象。我试着听`WallpaperService.Engine.onTouchEvent(..)`，但来自锁屏的触摸事件并没有传递到我的动态壁纸，因为它们被解锁滑块消耗掉了。

有没有其他方法可以检测我的动态壁纸是否是当前的锁屏壁纸？我对反射黑客、解决方法以及所有能让我做到这一点的东西都很好。

编辑：它也适用于 Galaxy Note 2，而不适用于 Xperia T LT30p

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T05:49:36.537

AOSP 版本的 Android 不支持锁屏壁纸。该功能完全由 OEM（三星、索尼、LG 等）制造，因此用于处理锁屏壁纸的 API 在 OEM 之间完全不同。此外，一些 OEM 仅不支持锁屏上的动态壁纸，而其他 OEM 则支持。

由于它们是 OEM 添加的 APIS，因此您应该使用反射来访问它们。但是，它可以在一个 OEM 设备上运行，但相同的代码在其他 OEM 的设备上不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-12T16:22:14.663

从 API 24 开始，您可以使用[**WallpaperManager.getWallpaperFile**](https://developer.android.com/reference/android/app/WallpaperManager#getWallpaperFile(int))：

[![在此处输入图像描述](../Images/52027220ac0b836cdc132c1f5f44ea72.png)](https://i.stack.imgur.com/SdYEh.png)

然后你可以得到哪个壁纸属于哪个类型。

另一种选择是[**WallpaperManager.getWallpaperId**](https://developer.android.com/reference/android/app/WallpaperManager#getWallpaperId(int))：

[![在此处输入图像描述](../Images/5e7fccff6e583f40846190b9197c3a2c.png)](https://i.stack.imgur.com/R12ZA.png)

# javascript - Sencha Touch 中带有验证和确认消息框的联系表

> ID：14484395
> 
> 赞同：0
> 
> 时间：2013-01-23T16:24:27.957
> 
> 标签：javascript, sencha-touch-2

我正在使用 Sencha Touch 2 开发我的第一个应用程序，并且我的代码基于官方网站上的[入门教程。](http://docs.sencha.com/touch/2-0/#!/guide/getting_started)与入门教程类似（我没有更改代码），在 app.js 中，当我提交表单时，我调用了 contact.php：

```
 // Sends an AJAX request with the form data to the url specified above (contact.php).
          // The success callback is called if we get a non-error response from the server
            form.submit({
              success: function() {
            // The callback function is run when the user taps the 'ok' button
                    Ext.Msg.alert('Mail received', 'We will reply soon', function() {
           form.reset(); 
             });
         },
      }); 
```

但是我修改了contact.php，以便在满足条件时输出json消息：

```
<?php
if ($_POST[email] != NULL) {
print '{"success": true}';
}
?> 
```

现在，如果 php 以 JSON 格式输出 success:true，app.js 会显示一条警报消息（参见上面的代码）“收到邮件”。否则不会显示任何消息。

但是，如果我想在 contact.php 中添加其他可能的情况来触发不同的消息，我将如何在 app.js 中实现它们？例如，如果我修改了contact.php，例如：

```
 <?php
            if ($_POST[email] != NULL) {
            print '{"success": true}';
            } else {
    print '{"wrongemail":true"}';
    }
   ?> 
```

我将如何在 app.js 中实现这一点，以便出现不同的警报（例如“您的电子邮件地址无效或为空”）？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:27:13.297

在 form.submit() 调用上添加“失败”处理程序：

[http://docs.sencha.com/touch/2-1/#!/api/Ext.form.Panel-method-submit](http://docs.sencha.com/touch/2-1/#!/api/Ext.form.Panel-method-submit)

# selenium - Selenium automator ramdonly 超时

> ID：14484396
> 
> 赞同：0
> 
> 时间：2013-01-23T16:24:37.067
> 
> 标签：selenium, selenium-webdriver

我正在使用 selenium 来测试 ui。我们有几个测试用例要运行。每次都有超时。哪个按时失败是随机的，失败的次数也是随机的。但是我的屏幕截图显示元素实际上渲染得很好。如果我一个一个跑，他们都成功了。我看到它总是发生在：

```
automator.waitForElementPresent(elemLocator, timeOutTime); 
```

我们正在使用版本 2.28.0 有人可以给我一些建议吗？太感谢了！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T20:13:07.240

我经常遇到这种 Selenium / Firefox 组合的问题。所以我主要在 Chrome 中运行测试。

我计划使用 Jenkins 使用稳定的环境进行持续集成，因此我也可以在 Firefox 上进行测试。作为副业...... :)

对于我的本地开发系统，我总是运行最新的 Selenium 和最新的 Firefox。因此，当我编写 Selenium 测试时，我使用 Chrome 来运行它们。

我使用添加的参数启动 Selenium 服务器：

```
java -jar selenium.x.xx.x.jar -Dwebdriver.chrome.driver=d:\programs\chromedriver.exe 
```

使用您自己的位置。此外，在每个测试类的 setUp() 中，您需要指定“chrome”而不是“firefox”作为浏览器。

# c++ - Code::Blocks 10.05 未定义的函数引用

> ID：14484402
> 
> 赞同：2
> 
> 时间：2013-01-23T16:25:05.317
> 
> 标签：c++, codeblocks

我目前正在使用 Code::Blocks IDE 10.04 做简单的类示例。在创建新类时遇到`undefined reference to myClass::myClass()`错误。帮助我找出错误。

myclass.h：

```
#ifndef MYCLASS_H
#define MYCLASS_H
#include<string>
#include<iostream>
using namespace std;
class myClass
{
    public:
        myClass();
     void showMessage();
        virtual ~myClass();
    protected:
    private:
    string myString;
    int integer;
};

#endif // MYCLASS_H 
```

我的类.cpp：

```
#include "E:\IOE\VII\Elective-DM\Assignment 2\myClass.h"

myClass::myClass()
{
    //ctor
}

myClass::~myClass()
{
    //dtor
}
void myClass::showMessage()
{
    cout<<"Enter the number ";
    cin>>integer;
    cout<<"Enter the String ";
    cin>>myString;
    cout<<"\nInterger you enter is :-"<<integer<<" and String you enter is "<<myString<<endl;

} 
```

sinpleClass.cpp：

```
#include<E:\IOE\VII\Elective-DM\Assignment 2\myClass.h>
int main()
{
    myClass myClassObj;
    myClassObj.showMessage();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:52:10.083

这个错误是由于`linking error`。后来我创建了新项目（根据上面关于问题的[克里斯评论](https://stackoverflow.com/users/962089/chris)）并向它添加类项目编译成功。

# ajax - Wicket - 将对象从一个数据视图移动到另一个数据视图

> ID：14484405
> 
> 赞同：0
> 
> 时间：2013-01-23T16:25:22.903
> 
> 标签：ajax, wicket, repeater, move, dataview

我正在使用 Apache Wicket 和...

1.  我有一个java类：任务。有活动和已完成的任务。

2.  我有一个用于活动任务的可排序数据视图：

    ```
    final DataView<LongRunningTask> dataViewActive = new DataView<LongRunningTask>("sorting", dp) {

        private static final long serialVersionUID = 1L;

        @Override
        protected void populateItem(final Item<LongRunningTask> item) {
            LongRunningTask task = item.getModelObject();

            if(task.getRemainingTime() <= 0) {
                finishedTasks.add(item);
            }
                item.add(new Label("taskId", String.valueOf(task.getTask().getId()))); 
                item.add(new Label("startedBy", task.getTask().getUser()));
                item.add(new Label("characteristics", String.valueOf(task.getTask().getType() + " : " + task.getTask().getNoOfMessages()) + " : " + task.getTask().getTemplateFile())); 
                Label clock = new Label("timer", String.valueOf(task.getRemainingTime()));
                item.add(clock);
                clock.setOutputMarkupId(true);
                item.add(new ActionPanel("actions", item.getModel())); 

            }
    }; 
    ```

3.  现在我想为 FINISHED 任务创建一个数据视图。如果任务已完成（Task.finished = true），则应将任务从活动数据视图中删除并添加到已完成的数据视图中。

    ```
    final DataView<LongRunningTask> dataViewFinished = new DataView<LongRunningTask>("sorting", dp) {

        private static final long serialVersionUID = 1L;

        @Override
        protected void populateItem(final Item<LongRunningTask> item) {
            LongRunningTask task = item.getModelObject();

            if(task.getRemainingTime() <= 0) {
                finishedTasks.add(item);
            }
                item.add(new Label("taskId", String.valueOf(task.getTask().getId()))); 
                item.add(new Label("startedBy", task.getTask().getUser()));
                item.add(new Label("characteristics", String.valueOf(task.getTask().getType() + " : " + task.getTask().getNoOfMessages()) + " : " + task.getTask().getTemplateFile())); 
                Label clock = new Label("timer","finished");
                item.add(clock);
                clock.setOutputMarkupId(true);
                item.add(new ActionPanel("actions", item.getModel())); 

            }
    }; 
    ```

我怎样才能做到这一点？我可以创建第二个数据视图，但存在 UI 问题和冲突。什么是最好的方法？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:54:27.990

确保您用于每个数据视图的提供程序仅返回适当的对象。就这些。只要您使模型充满适当的对象列表，视图就会显示它们。

首先，从实际的填充方法中去掉这个（记住这是视图，你应该只把视图逻辑放在这里，没有业务逻辑）：

```
 if(task.getRemainingTime() <= 0) {
        finishedTasks.add(item);
 } 
```

其次，实现您的 DataProvider，使其仅返回已完成或未完成的任务。您可以在它的构造函数或类似的东西中传递一个布尔值。将数据提供者的两个实例传递给两个数据视图，一个为布尔值 true，另一个为 false。

# c++ - 来自向量向量的 OpenCV 矩阵，无需复制数据

> ID：14484406
> 
> 赞同：3
> 
> 时间：2013-01-23T16:25:24.790
> 
> 标签：c++, opencv

是否可以在不复制数据的情况下创建`cv::Mat`from `std::vector<std::vector<T>>`，其中所有向量的宽度都相同，即只创建标题，因为它可以用于创建`cv::Mat`from `std::vector<T>`？

我有一个包装器，它只能在接口中使用 STL 类型并将它们传递给底层的 OpenCV 函数。我想避免来回过度转换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:41:21.183

一般来说，没有。您不能对每个内部 std::vector 的相对内存位置做出任何保证。一个 cv::Mat 需要它的所有内存是连续的或者在每行之间有一个可预测的跳转。它只存储一个指向其数据开头的指针，并且访问您的内部向量需要每个向量的指针。

如果你能以某种方式保证你的记忆是连续的，那么是的，你可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T17:08:07.133

如果你真正想要的是效率，你应该基于使用这个构造函数来工作：

```
// C++: 

Mat::Mat(int rows, int cols, int type, void* data, size_t step=AUTO_STEP)¶ 
```

此构造函数不复制数据，这可能是效率低下的地方。因此，不要使用嵌套向量，而是使用包含所有数据的单个向量。

请注意，向量中数据的生命周期必须足以访问矩阵，这意味着您也不能修改向量的大小，因为这可能会使基础数据无效`&v[0]`。

如果您被允许`boost::matrix`在您的通用代码中使用它可能会很好地解决您的问题。

# mysql - 最高效的索引系统

> ID：14484411
> 
> 赞同：0
> 
> 时间：2013-01-23T16:25:38.827
> 
> 标签：mysql

我有下表，我想知道如何在选择时为该表创建最有效的索引系统。这些行一旦插入就永远不会更新。

```
CREATE TABLE `games_characters` (
  `game_id` int(11) DEFAULT NULL,
  `character_id` int(11) DEFAULT NULL,
  KEY `games` (`game_id`),
  KEY `characters` (`character_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

或者这样的事情会更好：

```
CREATE TABLE `games_characters` (
  `game_id` int(11) DEFAULT NULL,
  `character_id` int(11) DEFAULT NULL,
  PRIMARY KEY `game_to_characters` (`game_id`, `character_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

还是有第三种更好的选择？

`games_characters`一个单曲永远不会超过 10 个，`game`而且一旦插入它们就不会再改变。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:45:14.280

我想第二个选项会正常工作。但是如果 game_id 和 character_id 是主键，它们不能是“DEFAULT NULL”。我希望它是有帮助的。

编辑：MyISAM 引擎查询速度很快。

# python - WxPython - 使用按钮打开一个新窗口

> ID：14484412
> 
> 赞同：4
> 
> 时间：2013-01-23T16:25:38.453
> 
> 标签：python, user-interface, wxpython

我正在创建一个界面，我需要单击一个按钮打开一个新窗口。所以我创建了主窗口，创建了所有按钮，并在一个类下创建了新窗口。我不完全确定是否需要，但我也会包含该信息。对python很抱歉，如果它充满了错误。

如果有人也可以回答如何在打开另一个窗口时隐藏主菜单，那就太好了。干杯。

```
import wxversion
wxversion.select("2.8")
import wx

class App(wx.App):

def OnInit(self):
   frame = window()
   frame.Show()
   self.SetTopWindow(frame)
   return True

class window(wx.Frame):

title = "Main Menu"

def __init__(self,parent,id):
    wx.Frame.__init__(self,parent,id,'Window', size=(1000,700))
    panel=wx.Panel(self, -1)

    self.SetBackgroundColour(wx.Colour(100,100,100))
    self.Centre()
    self.Show()

    status=self.CreateStatusBar()

    menubar=wx.MenuBar()
    filemenu=wx.Menu()
    exitmenu = filemenu.Append(wx.NewId(),"Exit", "Exit Program")

    menubar.Append(filemenu,"File")
    self.Bind(wx.EVT_MENU, self.onExit, exitmenu)
    self.SetMenuBar(menubar)

    font1 = wx.Font(30, wx.MODERN, wx.NORMAL, wx.NORMAL, False, u'Consolas')

    Text1=wx.StaticText(panel, -1, "Rhythm Trainer", (10,15))
    Text1.SetFont(font1)
    Text1.SetForegroundColour('white')
    self.Show(True)

    btn1 = wx.Button(panel, label='Basic', pos=(100,200), size=(150, 50))
    btn1.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

    btn1.Bind( wx.EVT_BUTTON, window2)

    btn2 = wx.Button(panel, label='Advanced', pos=(100,270), size=(150, 50))
    btn2.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

    btn3 = wx.Button(panel, label='Notations', pos=(100,340), size=(150, 50))
    btn3.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

    btn4 = wx.Button(panel, label='Settings', pos=(100,410), size=(150, 50))
    btn4.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

    btn5 = wx.Button(panel, label="Quit", pos=(820, 550), size=(150, 50))
    btn5.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
    self.Bind(wx.EVT_BUTTON, self.OnClick, btn5)

def OnClick(self, event):
    self.Close()

def OnQuitButton(self, event):

    wx.Sleep(1)   
    self.Destroy()

def onExit(self, event):
     self.Destroy()

def newwindow(self, event):
     window2.show

class window2(wx.Frame):

title = "new Window"

def __init__(self,parent,id):
    wx.Frame.__init__(self, id,'Window2', size=(1000,700))
    panel=wx.Panel(self, -1)

    self.SetBackgroundColour(wx.Colour(100,100,100))
    self.Centre()
    self.Show()

if __name__=='__main__':
    app=wx.PySimpleApp()
    frame=window(parent=None,id=-1)
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T18:55:46.153

如果您只想隐藏第一帧并显示第二帧，我在我的[博客](http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/)上写了一个教程。

如果您不关心第一帧和第二帧是否仍然在屏幕上，那么在您的 onClick 方法中，您需要实例化第二个窗口并显示它。像这样的东西：

```
secondWindow = window2()
secondWindow.Show() 
```

不要关闭第一帧！这将结束整个脚本。当您希望整个程序退出时，您只想关闭它。

# iphone - 如何在目标 c 的视图中加载两个图像？

> ID：14484413
> 
> 赞同：0
> 
> 时间：2013-01-23T16:25:41.747
> 
> 标签：iphone, objective-c, image, cocoa

我是目标 c 和 Xcode 的新手。我发现这段代码允许我从一个 url 将图像加载到我的设备中，并将其替换为我在与包含此代码的类关联的视图中拥有的一个。现在我需要在同一个类中加载两个图像，以替换在同一个视图中的两个图像...我该怎么办？

编辑：要清楚：我有一个包含两个图像视图的视图。每个图像视图都显示包含在应用程序资源中具有特定名称的文件中的图像。假设第一个图像视图包含“image1.jpg”和第二个“image2.jpg”。我想要做的是将两个图像“image1.jpg”和“image2.jpg”替换为从网络上获取的两个图像（为了在应用程序期间最终更新一些应用程序图像）生活中使用了 xml，等等）。

```
- (void)loadImgFromURLString: (NSString *)theUrlString{
    NSLog(@"Downloading image...");
    backgroundHome.image = nil;    

    NSURLRequest *request = [NSURLRequest requestWithURL:
                        [NSURL URLWithString:theUrlString]
                         cachePolicy:NSURLRequestReturnCacheDataElseLoad
                        timeoutInterval:30.0];
    connection = [[NSURLConnection alloc]
              initWithRequest:request delegate:self];
 }

 - (void)connection:(NSURLConnection *)theConnection
     didReceiveData:(NSData *)incrementalData {
    if (data == nil)
        data = [[NSMutableData alloc] initWithCapacity:2048];

    [data appendData:incrementalData];
 }

- (void)connectionDidFinishLoading:(NSURLConnection *)theConnection{
    backgroundHome.image = [UIImage imageWithData:data];
    NSLog(@"Image ready...");

    // save image in document dir
    NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *pngFilePath = [NSString stringWithFormat:@"%@/test.png",docDir];
    [data writeToFile:pngFilePath atomically:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:38:29.620

我想在视图中添加第二张图像不是真正的问题？

如果有多个，您的要求是将加载的数据分配给适当的图像。

您可以将此代码添加到 UIImageView 的子类中。这样做每个 UIImageView 都会创建自己的请求并接收自己的图像数据。最终你将它分配给 self.image = ...

这就是我会做的。

备选方案：您创建一个引用 UIImageView 的图像加载器类。其中您创建两个实例。每个实例都“知道”自己的 UIImageView 并发出请求，最终将图像数据保存到自己的 UIImageView。

下一个替代方案（我从未尝试过）

```
NSMutableDictionary ongoingRequests = [[NSMutableDictionary alloc] init];

- (void)loadImgFromURLString: (NSString *)theUrlString forImageView:(UIImageView)theView {
    backgroundHome.image = nil;    

    NSURLRequest *request = [NSURLRequest requestWithURL:
                        [NSURL URLWithString:theUrlString]
                         cachePolicy:NSURLRequestReturnCacheDataElseLoad
                        timeoutInterval:30.0];
    connection = [[NSURLConnection alloc]
              initWithRequest:request delegate:self];

    [self.ongoingRequests setObject:theView forKey:connection]
 }

[...]

- (void)connectionDidFinishLoading:(NSURLConnection *)theConnection{
    UIImageView *theView = [self.ongoingRequests objectWithKey:theConnection]
    theView.image = [UIImage imageWithData:data];
    self.ongoingRequests removeObjectForKey:theConnection;

    // save image in document dir
    NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *pngFilePath = [NSString stringWithFormat:@"%@/test.png",docDir];
[data writeToFile:pngFilePath atomically:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:28:16.163

在主视图中创建两个子视图。

在它们上加载图像，并根据需要进行操作。

这对你来说会更容易。

# c - scanf 被跳过

> ID：14484431
> 
> 赞同：8
> 
> 时间：2013-01-23T16:26:29.150
> 
> 标签：c, scanf

我正在尝试为一个类制作一个简单的 C 程序，其中一个要求是我需要对所有输入和输出使用`scanf`/ `printf`。我的问题是为什么我`scanf`在 main 中的 for 循环之后被跳过并且程序刚刚终止。

这是我的代码

```
#include <stdio.h>

void main() {
    int userValue;
    int x;
    char c;

    printf("Enter a number : ");
    scanf("%d", &userValue);
    printf("The odd prime values are:\n");
    for (x = 3; x <= userValue; x = x + 2) {
        int a;
        a = isPrime(x);
        if (a = 1) { 
            printf("%d is an odd prime\n", x);
        }
    }   
    printf("hit anything to terminate...");
    scanf("%c", &c);    
}

int isPrime(int number) {
    int i;
    for (i = 2; i < number; i++) {
        if (number % i == 0 && i != number)
            return 0;
    }
    return 1;
} 
```

我可以通过在第一个之后添加另一个相同的来“修复”它`scanf`，但我更愿意只使用一个。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-23T16:29:03.173

`stdin`输入前一个后出现的换行符`int`不会被最后一次调用消耗掉`scanf()`。因此，对`scanf()`after`for`循环的调用会消耗换行符并继续，而无需用户输入任何内容。

要更正而不必添加另一个调用，您可以在循环后`scanf()`使用格式说明符。这将跳过任何前导空白字符（包括换行符）。请注意，这意味着用户必须输入除换行符以外的其他内容才能结束程序。`" %c"``scanf()``for``scanf()`

此外：

*   检查结果`scanf()`以确保它实际上为传入的变量赋值：

    ```
    /* scanf() returns number of assigments made. */
    if (scanf("%d", &userValue) == 1) 
    ```

*   这是一个任务（并且永远是真的）：

    ```
    if (a = 1){ /* Use == for equality check.
                   Note 'a' could be removed entirely and
                   replace with: if (isPrime(x)) */ 
    ```

# cocos2d-iphone - 尝试分析我的应用程序时出现多个警告？Cocos2d

> ID：14484432
> 
> 赞同：2
> 
> 时间：2013-01-23T16:26:29.793
> 
> 标签：cocos2d-iphone, kobold2d

我正在尝试在仪器中分析我的应用程序，每次点击配置文件时，我都会收到超过 300 个依赖项警告，但在调试模式下构建它就可以了。我正在使用 kobold2d。这些是一些警告：

```
cocos2d-extensions-ios Group
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/CCBigImage/CCBigImage.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/CCBigImage/CCTextureCache+CCBigImageExtensions.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/CCMenuAdvanced/CCMenuAdvanced.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/CCMenuItemSpriteIndependent/CCMenuItemSpriteIndependent.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/CCScrollLayer/CCScrollLayer.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/CCSendMessages/CCSendMessages.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/CCSlider/CCSlider.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/CCVideoPlayer/Mac/CCVideoPlayerImplMac.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/CCVideoPlayer/Mac/MyMovieView.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/FilesDownloader/FilesDownloader.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/FilesDownloader/SingleFileDownloader.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/CCLayerPanZoom/CCLayerPanZoom.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/TMXGenerator/cencode.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/TMXGenerator/LFCGzipUtility.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone-extensions/Extensions/TMXGenerator/TMXGenerator.m' of type sourcecode.c.objc for architecture armv6
chipmunk-spacemanager-ios Group
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk-SpaceManager/src/ccExtras/cpCCNode.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk-SpaceManager/src/ccExtras/cpCCNodeImpl.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk-SpaceManager/src/ccExtras/cpCCSprite.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk-SpaceManager/src/ccExtras/cpConstraintNode.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk-SpaceManager/src/ccExtras/cpShapeNode.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk-SpaceManager/src/ccExtras/SpaceManagerCocos2d.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk-SpaceManager/src/cpExtras/cpPulleyJoint.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk-SpaceManager/src/cpSpaceSerializer/cpSpaceSerializer.cpp' of type sourcecode.cpp.cpp for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk-SpaceManager/src/cpSpaceSerializer/tinyxml/tinystr.cpp' of type sourcecode.cpp.cpp for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk-SpaceManager/src/cpSpaceSerializer/tinyxml/tinyxml.cpp' of type sourcecode.cpp.cpp for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk-SpaceManager/src/cpSpaceSerializer/tinyxml/tinyxmlerror.cpp' of type sourcecode.cpp.cpp for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk-SpaceManager/src/cpSpaceSerializer/tinyxml/tinyxmlparser.cpp' of type sourcecode.cpp.cpp for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk-SpaceManager/src/SpaceManager.mm' of type sourcecode.cpp.objcpp for architecture armv6
chipmunk-ios Group
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/chipmunk.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/constraints/cpConstraint.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/constraints/cpDampedRotarySpring.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/constraints/cpDampedSpring.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/constraints/cpGearJoint.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/constraints/cpGrooveJoint.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/constraints/cpPinJoint.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/constraints/cpPivotJoint.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/constraints/cpRatchetJoint.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/constraints/cpRotaryLimitJoint.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/constraints/cpSimpleMotor.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/constraints/cpSlideJoint.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpArbiter.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpArray.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpBB.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpBBTree.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpBody.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpCollision.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpHashSet.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpPolyShape.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpShape.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpSpace.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpSpaceComponent.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpSpaceHash.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpSpaceQuery.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpSpaceStep.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpSpatialIndex.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpSweep1D.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/Chipmunk/src/cpVect.c' of type sourcecode.c.c for architecture armv6
objectal-ios Group
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/Actions/OALAction.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/Actions/OALActionManager.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/Actions/OALAudioActions.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/Actions/OALFunction.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/Actions/OALUtilityActions.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/AudioTrack/OALAudioTrack.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/AudioTrack/OALAudioTrackNotifications.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/AudioTrack/OALAudioTracks.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/OALSimpleAudio.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/OpenAL/ALBuffer.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/OpenAL/ALCaptureDevice.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/OpenAL/ALChannelSource.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/OpenAL/ALContext.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/OpenAL/ALDevice.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/OpenAL/ALListener.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/OpenAL/ALSoundSourcePool.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/OpenAL/ALSource.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/OpenAL/ALWrapper.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/OpenAL/OpenALManager.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/Session/OALAudioSession.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/Session/OALSuspendHandler.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/Support/IOSVersion.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/Support/mach_timing.c' of type sourcecode.c.c for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/Support/OALAudioFile.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/ObjectAL-for-iPhone/ObjectAL/ObjectAL/Support/OALTools.m' of type sourcecode.c.objc for architecture armv6
cocosdenshion-ios Group
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone/CocosDenshion/CocosDenshion/CDAudioManager.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone/CocosDenshion/CocosDenshion/CDOpenALSupport.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone/CocosDenshion/CocosDenshion/CocosDenshion.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone/CocosDenshion/CocosDenshion/SimpleAudioEngine.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone/CocosDenshion/CocosDenshionExtras/CDXPropertyModifierAction.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/cocos2d-iphone/CocosDenshion/CocosDenshionExtras/CDXMacOSXSupport.m' of type sourcecode.c.objc for architecture armv6
sneakyinput-ios Group
Warning: no rule to process file '$(PROJECT_DIR)/libs/SneakyInput/Classes/ColoredCircleSprite.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/SneakyInput/Classes/ColoredSquareSprite.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/SneakyInput/Classes/SneakyButton.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/SneakyInput/Classes/SneakyButtonSkinnedBase.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/SneakyInput/Classes/SneakyJoystick.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/SneakyInput/Classes/SneakyJoystickSkinnedBase.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/SneakyInput/Classes/SneakyJoystickSkinnedDPadExample.m' of type sourcecode.c.objc for architecture armv6
Warning: no rule to process file '$(PROJECT_DIR)/libs/SneakyInput/Classes/SneakyJoystickSkinnedJoystickExample.m' of type sourcecode.c.objc for architecture armv6 
```

# android - 如何使用特定的语言环境？

> ID：14484434
> 
> 赞同：1
> 
> 时间：2013-01-23T16:26:30.947
> 
> 标签：android, localization, locale

在 Android 中获取字符串是根据用户选择为设备设置的区域设置自动完成的。但是，有时用户可能希望在应用程序中使用不同的区域设置（例如，程序 A 使用法语，程序 B 使用英语）。

我对使用特定语言环境有一些疑问：

1.  是否可以运行外部应用程序，并告诉它当前语言环境是 X（或使用特定语言环境）？如果是这样，怎么做？

2.  是否可以运行当前应用程序并告诉它当前语言环境是 X？如果是这样，如何？

3.  是否可以使用特定的语言环境 X 在当前应用程序中获取字符串（例如，使用 getString）？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T09:56:34.830

对于问题 2、3：我使用以下方式为我的应用程序设置了特定的语言环境，尽管设备的语言环境（例如：我的设备的默认语言环境设置为日本，但我的应用程序将在语言环境中启动美国）：

扩展 Application 类，命名为 MyApp 类，并在 onCreate 方法中添加以下代码段：

```
public static Configuration mConfig;

public void onCreate() {
   super.onCreate();
   ...
   mConfig = getResources().getConfiguration();
   mConfig.locale = new Locale(user_locale); // user_locale is your self-defined locale
   getResources().updateConfiguration(mConfig, null);
} 
```

此外，您必须在 Manifest 文件的主要活动部分中定义它：

```
android:configChanges="locale" 
```

通过这种方式，我可以在问题 2 和 3 中执行您想要的操作。请注意，当您想要（或者您确实想要）将语言环境更改为另一个语言环境时，您必须重新启动您的应用程序。

希望有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:41:54.520

这是可能的，但你反对安卓系统。

您可以使用以下内容为每个活动设置语言：

```
 Resources res = context.getResources();
    // Change locale settings in the app.
    DisplayMetrics dm = res.getDisplayMetrics();
    android.content.res.Configuration conf = res.getConfiguration();
    conf.locale = new Locale(language_code.toLowerCase());
    res.updateConfiguration(conf, dm); 
```

[您可以在此处](http://spinettaro.blogspot.fr/2012/03/resources-based-on-localization.html)找到另一种更改配置的方法

# jquery - 如何使jquery mobile listview消失

> ID：14484441
> 
> 赞同：0
> 
> 时间：2013-01-23T16:26:57.487
> 
> 标签：jquery, jquery-mobile

我有一个基本的 jquery 移动单列表视图项目。当用户单击右侧的箭头时，我想让列表视图项目消失并被另一个列表视图项目替换。

我下面的代码是标准列表视图

```
 <ul data-role="listview" data-inset="true" data-filter="true">
    <li><a href="#">Acura</a></li>
   </ul> 
```

我希望有人可以建议是否可能，我是否必须使用 .remove() 清除整个列表视图；并创建一个新的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:48:20.010

像这样的东西也可以——那么你不必有预定义的列表。

Javascript：

```
$(".mylist").on("vclick", function(e){
var item = $(e.target).closest("li");
var newItem = '<li><a href="#">New Item</a></li>';
item.hide(500);
setTimeout(function(e){
    item.remove();
    $(".mylist").append(newItem).listview("refresh");
}, 500); 
```

});

[http://jsfiddle.net/69Xfz/40/](http://jsfiddle.net/69Xfz/40/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:49:28.833

**编辑**：我更新了代码（使用较新的 jQuery Mobile 版本，并从代码中删除了 ready() 函数。我还添加了 div 包装器，这样隐藏或显示它们会完全隐藏列表和搜索栏。

**HTML**：

```
<div id="l1">
    <ul data-role="listview" data-inset="true" data-filter="true">
        <li><a href="#">Acura</a></li>
    </ul>
</div>
<div id="l2">
    <ul data-role="listview" data-inset="true" data-filter="true" id="l2">
        <li><a href="#">Second List View</a></li>
    </ul>
</div> 
```

**Javascript**：

```
$("#l2").hide();
$('#l1').on('click', 'li', function() {
    $("#l1").fadeOut(300,function(){
        $("#l2").show();
    });
}); 
```

这段代码看起来更简洁。祝你好运！

**JSFiddle**：http: [//jsfiddle.net/69Xfz/39/](http://jsfiddle.net/69Xfz/39/)

# ios - 使用 admob 时出现苹果 mach-o 链接器错误

> ID：14484442
> 
> 赞同：6
> 
> 时间：2013-01-23T16:26:56.893
> 
> 标签：ios

我创建了一个测试项目来测试 admob 并学习如何使用它，但是当我构建我的项目时，当我尝试将 admob 添加到我的项目中时出现 11 个苹果 mach-o 链接器错误（Xcode 4.3.3）

h文件没问题，这里是M文件（代码取自admob知识库）

```
#import "chViewController.h"

#define MY_BANNER_UNIT_ID @"my id is written in here"

@interface chViewController ()

@end

@implementation chViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];

    // Create a view of the standard size at the top of the screen.
    // Available AdSize constants are explained in GADAdSize.h.
    bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];

    // Specify the ad's "unit identifier." This is your AdMob Publisher ID.
    bannerView_.adUnitID = MY_BANNER_UNIT_ID;

    // Let the runtime know which UIViewController to restore after taking
    // the user wherever the ad goes and add it to the view hierarchy.
    bannerView_.rootViewController = self;
    [self.view addSubview:bannerView_];

    // Initiate a generic request to load it with an ad.
    [bannerView_ loadRequest:[GADRequest request]];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
} 
```

错误

```
Undefined symbols for architecture i386:
  "_SCNetworkReachabilityCreateWithName", referenced from:
      -[GADNetworkChecker startNetworkChecking] in libGoogleAdMobAds.a(GADNetworkChecker.o)
  "_SCNetworkReachabilityScheduleWithRunLoop", referenced from:
      -[GADNetworkChecker startNetworkChecking] in libGoogleAdMobAds.a(GADNetworkChecker.o)
  "_SCNetworkReachabilitySetCallback", referenced from:
      -[GADNetworkChecker startNetworkChecking] in libGoogleAdMobAds.a(GADNetworkChecker.o)
  "_SCNetworkReachabilityUnscheduleFromRunLoop", referenced from:
      -[GADNetworkChecker stopNetworkChecking] in libGoogleAdMobAds.a(GADNetworkChecker.o)
  "_OBJC_CLASS_$_ASIdentifierManager", referenced from:
      objc-class-ref in libGoogleAdMobAds.a(GADIdentifierUtilities.o)
  "_AudioServicesPlaySystemSound", referenced from:
      -[GADWebViewDelegate webView:shouldStartLoadWithRequest:navigationType:] in libGoogleAdMobAds.a(GADWebViewDelegate.o)
  "_OBJC_CLASS_$_SKStoreProductViewController", referenced from:
      objc-class-ref in libGoogleAdMobAds.a(GADOpener.o)
  "_OBJC_CLASS_$_MFMailComposeViewController", referenced from:
      objc-class-ref in libGoogleAdMobAds.a(GADOpener.o)
  "_OBJC_CLASS_$_MFMessageComposeViewController", referenced from:
      objc-class-ref in libGoogleAdMobAds.a(GADOpener.o)
  "_SKStoreProductParameterITunesItemIdentifier", referenced from:
      -[GADOpener openInAppStore:fallbackURLString:] in libGoogleAdMobAds.a(GADOpener.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已将 lib.googleadmobAds 添加到我的文件夹并将二进制文件与库链接（当我删除它时，我收到相同的错误，但其中 4 个不是 11 个）

我阅读了很多关于它的 stackoveflow 帖子，你们中的一些人说我还需要广告 adsupport.framework 但我找不到它我没有在带有库列表的链接二进制文件中看到它。

网上的这些解决方案都没有工作我被卡住了。

有什么问题我没有收到关于我的 h 或 m 文件的任何错误，那么为什么 mach-o 链接器错误可以帮助我？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T16:32:57.383

您需要链接 AdMob 所需的框架。

转到您的目标设置，然后在 Build Phases 中，然后在 Link Binary with Libraries 中并添加以下框架（您可能需要其他框架，这些只是基于我看到的错误）：

```
MessageUI.framework
StoreKit.framework
SystemConfiguration.framework 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-08T17:50:24.070

这些是我需要添加的框架以使事情顺利进行：

```
AdSupport.framework
AudioToolbox.framework
MessageUI.framework
SystemConfiguration.framework
StoreKit.framework 
```

我已经有：

```
UIKit.framework
Foundation.framework
CoreGraphics.framework
libGoogleAdMobAds.a 
```

好的文档是： [https ://developers.google.com/mobile-ads-sdk/docs/](https://developers.google.com/mobile-ads-sdk/docs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:29:59.110

看起来您需要链接到`SystemConfiguration`框架。

这个[Apple 指南](http://developer.apple.com/library/ios/#recipes/xcode_help-structure_navigator/articles/adding_a_framework.html)应该可以帮助你配置 Xcode 来做到这一点。

# javascript - 在 Bootstrap 中禁用选项卡

> ID：14484445
> 
> 赞同：8
> 
> 时间：2013-01-23T16:27:04.753
> 
> 标签：javascript, jquery, twitter-bootstrap, jquery-events

我正在尝试禁用引导程序中的选项卡。我一直在研究，我还没有找到解决方案。

我试过这个：[你能在 Bootstrap 中禁用标签吗？](https://stackoverflow.com/questions/9237314/can-you-disable-tabs-in-bootstrap) 它让我遇到了引导问题......我也试过了`$('.disabled').removeData('toggle');`

我看了这里.. [https://github.com/twitter/bootstrap/issues/2764](https://github.com/twitter/bootstrap/issues/2764) 尝试的解决方案： - 返回 false

[jQuery 禁用链接](https://stackoverflow.com/questions/970388/jquery-disable-a-link) 尝试的解决方案：-`event.defaultPrevented();`

然而我还没有想出答案。到目前为止，我的问题是该选项卡将通过返回 false 来禁用。However, when the tab is active and can be clicked it will not transition to the other tab like it should.

jsfiddle：http: [//jsfiddle.net/de8QK/](http://jsfiddle.net/de8QK/)

这是我的代码：

```
$(document).ready(function(){

$('#store-tab').attr('class', 'disabled');
$('#bank-tab').attr('class', 'disabled active');

$('#store-tab').not('#store-tab.disabled').click(function(event){
    $('#store-tab').attr('class', 'active');
    $('#bank-tab').attr('class', '');
    return true;
});
$('#bank-tab').not('#bank-tab.disabled').click(function(event){
    $('#bank-tab').attr('class' ,'active');
    $('#store-tab').attr('class', '');
    return true;
});

$('#store-tab').click(function(event){return false;});
$('#bank-tab').click(function(event){return false;});

$('.selectKid').click(function(event){
    $('.checkbox').removeAttr("disabled");
    $('#bank-tab').attr('class', 'active');
    $('#store-tab').attr('class', '');
});
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-07-16T11:34:25.930

HTML：只需添加类禁用

查询：

```
$(".disabled").click(function (e) {
        e.preventDefault();
        return false;
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-23T17:51:45.877

这是解决方案。似乎引导程序不喜欢您手动更改活动标签。

```
$(document).ready(function(){
    $('#store-tab').attr('class', 'disabled');
    $('#bank-tab').attr('class', 'disabled active');

    $('#store-tab').click(function(event){
        if ($(this).hasClass('disabled')) {
            return false;
        }
    });
    $('#bank-tab').click(function(event){
        if ($(this).hasClass('disabled')) {
            return false;
        }
    });

    $('.selectKid').click(function(event){
        $('.checkbox').removeAttr("disabled");
        $('#bank-tab').attr('class', 'active');
        $('#store-tab').attr('class', '');
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T17:26:18.900

试试这个：

```
$('#store-tab').click(function(event){
    if ($(this).hasClass('disabled')) { return false; }
    $('#store-tab').attr('class', 'active');
    $('#bank-tab').attr('class', '');
    return true;
});
$('#bank-tab').click(function(event){
    if ($(this).hasClass('disabled')) { return false; }
    $('#bank-tab').attr('class' ,'active');
    $('#store-tab').attr('class', '');
    return true;
}); 
```

[jsFiddle](http://jsfiddle.net/MRghr/)

我将您更改`.not()`为 if 语句，因为我认为它导致您的事件被错误地绑定。
我还删除了两个返回 false 的点击事件，因为它们看起来是多余的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T17:45:32.693

尝试改用这个 JavaScript，它应该可以工作！这有点苗条，并且没有`click`Bootstrap JavaScript 中已经内置的不必要的功能。它只是禁用选项卡，并在您单击“激活”按钮时重新启用它们。

```
$(document).ready(function(){

    $('.nav li').attr('class', 'disabled');
    $('#bank-tab').addClass('active');

    $('.selectKid').click(function(e){
        if ( $('.disabled').length > 0 ) {
           $('.disabled').removeClass('disabled');
           return false;
        }
    });

}); 
```

**解释：**当文档被加载时，添加一个类`disabled`to `.nav li`（禁用选项卡）。`active`向`#bank-tab`元素添加一个类（用于样式目的）。当您单击“激活选项卡”按钮时，如果有任何匹配的元素`ul.nav li.disabled`删除禁用的类（以重新启用选项卡）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-28T09:34:11.007

这些都不适合我。这些类只是视觉元素，单击某些选项卡时返回 false 不会覆盖现有功能。更不用说很难根据输入打开和关闭选项卡。

这是我想出的.. 启用另一个选项卡以将用户发送回它。

```
$('#rentalstab_button').click(function(event){
    if ($(this).hasClass('disabled')) {
        $('#detailstab_button').trigger('click');
        return false;
    }
}); 
```

选项卡上的 HTML 触发器：

```
<li role="presentation"><a href="#basicinfotab" role="tab" data-toggle="tab">Basic Info</a></li>
<li role="presentation"><a href="#detailstab" role="tab" data-toggle="tab" id="detailstab_button">Details</a></li>
<li role="presentation"><a href="#rentalstab" role="tab" data-toggle="tab" id="rentalstab_button">Rental</a></li> 
```

将选项卡按钮从禁用变为启用等的 JavaScript 类似。在此代码中，该`rentaldropdown`元素是另一个`<select>`下拉菜单，指示是否应启用或禁用选项卡。运行这个作为`onchange`触发器附加的函数。

```
if(rentaldropdown.val()==1) {
    // $( "#listing_form_tab" ).tabs("enable", 3);
    console.log('enabling rental');
    $('#rentalstab_button').prop( "disabled", false ).removeClass('disabled');

} else {
    console.log('disabling rental');
    $('#rentalstab_button').prop( "disabled", true ).addClass('disabled');;

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-10T04:35:39.780

> ## 非常简单的方法

```
.nav-tabs li.active a{
    pointer-events:none;
} 
```

# windows-7 - 在 Windows 7 中使用 java jre6 而不是 jre7

> ID：14484449
> 
> 赞同：1
> 
> 时间：2013-01-23T16:27:17.860
> 
> 标签：windows-7, java

我需要为 windows7 中的 sikuli-ide 使用 jre6 而不是 jre7。

我将 JAVA-HOME 设置为：C:\Programme\Java\jdk1.6.0_31

我的路径看起来像：![在此处输入图像描述](../Images/5a37f8473ed3e6c41b92b7a66bc28f56.png)

当我在 cmd 中键入 java -version 时，它说当前版本仍然是 1.7

如何在两个 java 版本之间切换？（我不想从我的系统中删除 1.7 版）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:34:17.920

将 Java6 的条目放在 Path 变量的开头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:30:37.990

转到高级设置中的环境变量，查找系统变量名称 PATH。删除`Java 7`条目并在`1.6`那里添加（直到 bin）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:29:24.943

确保您的`PATH`变量包括`C:\Programme\Java\jdk1.6.0_31`而不是 java 7。

# mysql - 在触发器中访问远程 mysql 数据库

> ID：14484452
> 
> 赞同：2
> 
> 时间：2013-01-23T16:27:29.063
> 
> 标签：mysql, triggers, remote-access

我有一个日志解析应用程序，我需要根据我的发现在另一个 mysql 服务器上进行查询。（即：该域的用户 ID 是什么）

是否可以在触发器中连接另一个 mysql 服务器以提取信息并更新“插入前”事件的记录？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:40:17.197

联邦存储引擎解决了我的问题。我创建了一个带有远程连接的表，它保留了远程表的副本。

```
CREATE TABLE `domains` (
    `id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
    `user_id` BIGINT(20) UNSIGNED NOT NULL
    PRIMARY KEY (`id`),
    INDEX `user_id` (`user_id`),
)
COLLATE='latin1_swedish_ci'
ENGINE=FEDERATED
DEFAULT CHARSET=latin1
CONNECTION='mysql://user:pass@host:port/database/domains'; 
```

感谢[inhan](https://stackoverflow.com/users/913097/inhan)显示正确的方向。

# emacs - 在字符模式下从 ansi-term 运行 Emacs 命令

> ID：14484454
> 
> 赞同：4
> 
> 时间：2013-01-23T16:27:29.723
> 
> 标签：emacs, elisp

我希望 Emacs 能够在 ansi-term 缓冲区上触发与`M-x command RET`字符**模式**相关的**标准行为。**

 **我实际上曾经有这个功能，但由于某种原因，它在最近几天消失了，即使我**没有**升级 Emacs（尽管我可能无意中修改了我的 init 文件）

另外，我有以下曾经工作的钩子（在窗口之间切换），但它不再起作用了。

```
(global-set-key (kbd "M-J") 'windmove-left)          ; move to left window
(global-set-key (kbd "M-L") 'windmove-right)         ; move " " 
(global-set-key (kbd "M-I") 'windmove-up)            ; move " "
(global-set-key (kbd "M-K") 'windmove-down)          ; move " " 

(add-hook 'term-mode-hook
  (lambda()
    (define-key term-raw-map (kbd "M-J") 'windmove-left)  
    (define-key term-raw-map (kbd "M-L") 'windmove-right) 
    (define-key term-raw-map (kbd "M-I") 'windmove-up)    
    (define-key term-raw-map (kbd "M-K") 'windmove-down)  
    (define-key term-raw-map (kbd "M-F") 'toggle-maximize-buffer) 
    )) 
```

## 更新：

如果我在打开任何 ansi-term`(lookup-key term-raw-map (read-kbd-macro "\C-x"))` **之前**`term-send-raw`进行评估，我会得到： ，但如果我在打开 ansi-term**之后**评估它，我会得到：

```
(keymap #^[nil nil keymap 
#^^[3 0 pop-global-mark nil list-buffers term-send-raw list-directory eval-last-sexp find-file nil nil indent-rigidly ...] #^^[1 0 #^^[2 0 
#^^[3 0 pop-global-mark nil list-buffers term-send-raw list-directory eval-last-sexp find-file nil nil indent-rigidly ...] nil nil nil nil nil nil nil nil nil ...] nil nil nil nil nil nil nil nil nil ...] nil nil nil nil nil nil nil ...] (67108912 . text-scale-adjust) (67108925 . text-scale-adjust) (67108909 . text-scale-adjust) (67108907 . text-scale-adjust) (67108896 . pop-global-mark) (C-left . previous-buffer) (left . previous-buffer) (C-right . next-buffer) (right . next-buffer)) 
```

这是预期的行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T23:51:38.917

我使用这样的设置：

```
(define-key term-raw-map (kbd "M-x") 'nil) 
```

然后照常`M-x`工作。`term-char-mode`如果您对某些功能使用全局键绑定，请将`'nil`相同的键绑定放入`term-raw-map`.**

# save - 将 x264_encoder_encode 输出 nals 写入 h264 文件

> ID：14484458
> 
> 赞同：1
> 
> 时间：2013-01-23T16:27:44.117
> 
> 标签：save, encode, disk, x264

我正在尝试做一个生活流软件。我正在尝试的是使用 x264 的 lib 在服务器端编码为 h264 并在客户端使用 ffmpeg 解码。在尝试直接尝试失败后，我决定简化，我要做的第一件事就是简单地使用 x264_encoder_encode 对帧进行编码并将生成的 NAL 写入文件。现在我想测试该文件是否正确。

要初始化编码器，我会这样做：

```
x264_param_t param;
x264_param_default_preset(&param, "veryfast", "zerolatency");
param.i_threads = 1;
param.i_width = a_iWidth;
param.i_height = a_iHeight;
param.i_fps_num = a_iFPS;
param.i_fps_den = 1;
param.i_keyint_max = a_iFPS;
param.b_intra_refresh = 1;
param.rc.i_rc_method = X264_RC_CRF;
param.rc.i_vbv_buffer_size = 1000000;
param.rc.i_vbv_max_bitrate =500;    //For streaming:
param.b_repeat_headers = 1;
param.b_annexb = 1;
x264_param_apply_profile(&param, "baseline");
encoder = x264_encoder_open(&param); 
```

然后，当我有图像（RGBA 图像）时，我将其转换为 YUV420P，然后调用 x264_encoder_encode：

```
int frame_size = x264_encoder_encode(encoder, &nals, &num_nals, picture, &pic_out);
if (frame_size > 0)
{
    m_vNALs.push_back( (char*)nals[0].p_payload );
    m_vSizes.push_back( frame_size );

    return frame_size;
} 
```

一切似乎都有效，frame_size 返回非零正值，所有其他参数似乎都正常。每个 NAL 都以正确的代码开头。

所以我将所有的 nals 写入一个文件：

```
FILE* pFile;
pFile = fopen("file.h264", "wb");
for( int nIndex = 0; nIndex < m_vNALs.size(); nIndex++ )
{
    fwrite( m_vNALs[ nIndex ], m_vSizes[ nIndex ], 1, pFile );
} 
```

现在我有 file.h264 文件。所以为了测试这个文件，我使用了 ffmpeg.exe （我在 windows 上），我得到了这个输出：

```
[h264 @ 00000000021c5a60] non-existing PPS referenced
[h264 @ 00000000021c5a60] non-existing PPS 0 referenced
[h264 @ 00000000021c5a60] decode_slice_header error
[h264 @ 00000000021c5a60] no frame!
[h264 @ 00000000021c5a60] non-existing PPS referenced
[h264 @ 00000000021b74a0] max_analyze_duration 5000000 reached at 5000000
[h264 @ 00000000021b74a0] decoding for stream 0 failed
[h264 @ 00000000021b74a0] Could not find codec parameters for stream 0 (Video: h
264): unspecified size
Consider increasing the value for the 'analyzeduration' and 'probesize' options
[h264 @ 00000000021b74a0] Estimating duration from bitrate, this may be inaccura
te
file.h264: could not find codec parameters 
```

vlc 也无法播放该文件。

ffplay 告诉我们：

```
file.h264: Invalid data found when processing input 
```

怎么了？？？？？

在此先感谢， Zetlb

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:08:48.417

看起来您只保存 x264_encoder_encode 返回的指针和大小，而不是实际数据。

```
m_vNALs.push_back( (char*)nals[0].p_payload );
m_vSizes.push_back( frame_size ); 
```

该指向的数据仅在您调用下一个 x264_encoder_encode/x264_encoder_close 之前有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T03:09:30.123

看来您忘记将 h.264 文件头写入 h.264 文件了。

# html - 悬停在 JQuery 中不起作用

> ID：14484463
> 
> 赞同：0
> 
> 时间：2013-01-23T15:39:41.057
> 
> 标签：html, jquery

我创建了一个简单的 DIV，它位于页面的边缘，我写了这个，一个移动它的简单脚本。

问题是，当您将鼠标悬停在 DIV 上时，然后移动光标。当DIV隐藏并再次将光标移动到DIV时，脚本一直弹出并隐藏DIV。

我在 jsFiddle.com 中为您创建了“Fiddle”，以更好地说明我的问题：http: [//jsfiddle.net/IdolwSzutrab7/DWvbJ/](http://jsfiddle.net/IdolwSzutrab7/DWvbJ/)，以及一个显示问题的动画 gif：

```
$('#h53pg4s4b6').hover(function () {
    $('#h53pg4s4b6').delay(400).animate({
        right: "3px"
    }, 1300);
    $('#u26c5lsx9h').animate({
        opacity: "1.0"
    }, 500);
    clearTimeout(time3);
}, function () {
    time3 = setTimeout(function () {
        $('#h53pg4s4b6').animate({
            right: "-220px"
        }, 1300);
        $('#u26c5lsx9h').delay(1400).animate({
            opacity: "0.2"
        }, 500);
    }, 1000)
})

 $('#t895o6n9qs').click(function () {
    $('#b37jjlmy2t').css('display', 'block');
    $('#a15tnjlyw6').css('display', 'none');
})

 $('#u83mz78d5l').click(function () {
    $('#b37jjlmy2t').css('display', 'none');
    $('#a15tnjlyw6').css('display', 'block');
})

 $('#s4iu2h7dra').click(function () {
    $('#h53pg4s4b6').fadeOut(3000, function () {
        $('#h53pg4s4b6').remove();
    });
}) 
```

![http://i.stack.imgur.com/BxVDK.gif](../Images/27843a7fea2b2be20affeada22af843a.png)

如何 ...

如何停止脚本？

或不 ...

我不知道 ...

也许我应该写另一个脚本？

我不知道我能做些什么：/

▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬

拜托，你能帮帮我吗？

PS：对不起我的英语，我希望你能理解我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:56:05.037

jQuery`.stop()`将在这里为您提供帮助

在此处查看更新的[**JSFiddle**](http://jsfiddle.net/DWvbJ/26/)

我更新了您的代码如下

```
$('#h53pg4s4b6').hover(function () {
    $('#u26c5lsx9h').stop().animate({
        opacity: "1.0"
    }, 500, function () {
        $('#h53pg4s4b6').stop().animate({
            right: "3px"
        }, 1300);
    });
    clearTimeout(time3);
}, function () {
    time3 = setTimeout(function () {
        $('#h53pg4s4b6').stop().animate({
            right: "-220px"
        }, 1300);
        $('#u26c5lsx9h').stop().animate({
            opacity: "0.2"
        }, 500);
    }, 1000)
}) 
```

另外，我有一个建议：您可以删除 delay() 函数，因为没有它们效果会更平滑。

# linux - 将命令输出保存在字符串变量中，保留换行符

> ID：14484466
> 
> 赞同：4
> 
> 时间：2013-01-23T16:27:52.343
> 
> 标签：linux, bash

我有一个转换文件数据的脚本，为了更有效地工作，我想更改内存中的数据，然后将其转储到文件中。假设我想修改一个包含以下内容的文件：

```
> This is a line
> this is other line 
```

我使用 sed 命令将 '>' 符号替换为 '#' 符号：

```
transform_output=$(eval "sed ${sed_args[@]} $file" 2>&1)
echo -e $transform_output 
```

我得到输出：

```
# This is a line # this is other line 
```

而不是我想要的输出是：

```
# This is a line
# this is other line 
```

1.  如何将输出保存在保留换行符的字符串变量中？
2.  如何在包含“#ADDED LINE#”的变量的开头添加一行并将其保存在文件中？

（我想获得的文件是）：

```
#ADDED LINE#
# This is a line
# this is other line 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:30:29.193

1.  引用用于防止在空格处分词：

    `echo -e "$transform_output"`

2.  将命令与另一个 echo 分组：

    `{ echo "#ADDED LINE#"; echo -e "$transform_output" } > file`

# ruby - 红宝石哈希不更新。试图从哈希值中删除单词

> ID：14484471
> 
> 赞同：0
> 
> 时间：2013-01-23T16:28:01.293
> 
> 标签：ruby, hash

```
REMOVE_WORDS_ARRAY = ["llc", "co", "corp", "inc", "the"]

businesses_array = import_csv.import('businesses.csv')
print businesses_array
# [["the bakery", "10012"]["law office inc", "10014"]]

businesses_hashes = []
our_hash = {}

businesses_array.each do |business|
  our_hash['BusinessName']  = business[0].strip unless business[0].nil?
  our_hash['BusinessZipCode'] = business[1].strip unless business[1].nil?

  our_hash.each {|key, value|
    our_hash[key] = value.downcase!
    our_hash[key] = (value.split(' ') - REMOVE_WORDS_ARRAY) # only this part doesn't get updated. why?
    our_hash[key] = value.gsub(' ', '+')
  }
  businesses_hashes << our_hash  
  our_hash = {}
end 
```

当我打印时，`our_hash`我可以看到名称已被小写并`+`已添加，但单词尚未删除。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:32:36.300

好吧，它***确实***会更新，但随后该值会被覆盖。

```
our_hash[key] = value.downcase! # destructive operation, value mutates in-place
our_hash[key] = (value.split(' ') - REMOVE_WORDS_ARRAY) # remove words and set to hash
our_hash[key] = value.gsub(' ', '+') # use downcased value from the first step, not from the second 
```

注释掉第三行，你会看到。此外，第二行返回一个数组。是不是最后忘记加`.join(' ')`了？

怎么修？用一种流畅的动作来做:)

```
our_hash[key] = (value.downcase.split(' ') - REMOVE_WORDS_ARRAY).join('+') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:11:39.347

问题是

*   您正在用数组替换字符串，并尝试对其进行字符串操作。
*   （正如塞尔吉奥指出的那样，）你要回到原来的`value`，所以以前的操作变得无关紧要。

还有几个问题。更好的代码是

```
RemoveWordsRegex = Regexp.union(REMOVE_WORDS_ARRAY.map{|s| /\b#{s}\b/})

businesses_array.each do |name, zip|
  businesses_hashes <<
  {"BusinessName" => name.to_s, "BusinessZipCode" => zip.to_s}
  .values.each{|value|
    value.strip!
    value.downcase!
    value.gsub!(RemoveWordsRegex, "")
    value.gsub!(/\s+/, "+")
  }
end 
```

# android - Android phonegap 用车把从外部显示图像

> ID：14484472
> 
> 赞同：0
> 
> 时间：2013-01-23T16:28:05.467
> 
> 标签：android, image, templates, cordova

我正在尝试使用车把模板显示来自网络（外部）的图像

在我的 arq.handlebars 我有这个：

```
< img src="http://127.0.0.1:3000/system/products/avatars/034/thumb/image.jpg" data-rel="external"/ > 
```

我也试过这样：

```
< a class="imagem" style="background-image: url(http://127.0.0.1:3000/system/products/avatars/034/thumb/image.jpg);" data-rel="external" /> 
```

但它不起作用。出现的是我：[?]（像这样的图标）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:35:27.137

这条路从何而来？除非您在手机的 3000 端口上运行某些东西，否则这是行不通的。Cordova file:///android_asset/www/ 中的正确路径假设您将代码放在项目的 assets/www 目录中。

要么找出实际图像的来源，然后将路径替换为该服务器的地址。

# url - 301 重定向与 307 重定向

> ID：14484473
> 
> 赞同：17
> 
> 时间：2013-01-23T16:28:08.140
> 
> 标签：url, redirect, http-status-code-301, url-shortener, http-status-code-307

我想知道 301 和 307 重定向之间的区别。

我希望通过自制 url 重定向器生成反向链接，并且我希望任何“链接汁”或“页面排名汁”直接从原始返回页面流向最终 URL，但如果其中一个原始页面变坏了，我希望能够通过删除该特定页面的重定向链接来关闭该链接。说得通？

我的理解是 301 是永久的，这意味着谷歌将看到 301 并将其缓存的 URL 更新为最终目的地，无论我是否在以后取消该重定向。

如果我使用 307，它不会缓存目标 URL，并会继续检查重定向 URL 以查看反向链接实际指向的位置，如果我取消重定向链接，Google 将不再将该反向链接分配给目标网址。

这是一个正确的总结吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T14:33:44.733

这是正确的。实际上 307 是更常见的 302 重定向的变体

> 301 Moved Permanently 这个和所有未来的请求都应该被定向到给定的 URI。

```
307 Temporary Redirect (since HTTP/1.1)
In this case, the request should be repeated with another URI;
however, future requests should still use the original URI. 
```

# html - 无法将背景图像悬停在图像上

> ID：14484474
> 
> 赞同：0
> 
> 时间：2013-01-23T16:28:09.007
> 
> 标签：html, hover, position, css

我正在尝试将带有标题的透明 PNG 悬停在照片上。当我给 div 位置：绝对或指定宽度时，悬停消失。但是，如果我不这样做，则悬停会显示在图像的右侧和左侧。

我显然做错了什么，但就是不知道是什么。任何帮助，将不胜感激。

谢谢！

这是网站和相关代码。

网站：[http ://www.theshalomimaginative.com/](http://www.theshalomimaginative.com/)

```
<div id= "logo">
 <h3><img src="Graphics/splashpagelogo.png"  alt="The Shalom Imaginative Documentary Photography" /></h3>
</div>

#logo {
position:absolute; width:475px; height:365px; padding: 0 0 0 242px;
}   

h3 {
position:absolute; width:475px; height:365px;display: block;
}

h3:hover {
position:absolute; width:475px; height:365px; display: block; background-image:   url('http://theshalomimaginative.com/Graphics/Homepagehover.png');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:32:37.063

我马上看到的一个问题是您没有正确关闭标签。

代替

```
</logo> 
```

它应该是：

```
</div> 
```

你可以这样做：

```
<div id="logo">

</div>

#logo {
    position:absolute;
    width:475px;
    height:365px;
    padding: 0 0 0 242px;
    background: url('http://theshalomimaginative.com/Graphics/splashpagelogo.png') no-repeat;

} 

#logo:hover {
    position: absolute;
    width:475px;
    height:365px;
    background: url('http://theshalomimaginative.com/Graphics/Homepagehover.png') no-repeat;    
} 
```

[http://jsfiddle.net/tech0925/SW7GP/](http://jsfiddle.net/tech0925/SW7GP/)

如果您想为 SEO 目的包含 h3 标签，您可以这样做：

```
<div id="logo">
<h3>Something Here</h3>
</div>

#logo {
    position:absolute;
    width:475px;
    height:365px;
    padding: 0 0 0 242px;
    background: url('http://theshalomimaginative.com/Graphics/splashpagelogo.png') no-repeat;

} 

#logo:hover {
    position: absolute;
    width:475px;
    height:365px;
    background: url('http://theshalomimaginative.com/Graphics/Homepagehover.png') no-repeat;    
}

#logo h3 {
text-indent: -9999px;
} 
```

[http://jsfiddle.net/tech0925/YnMeD/](http://jsfiddle.net/tech0925/YnMeD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:41:09.513

请改用 CSS 精灵。

将两张图像合并为一张，使图像并排排列。

然后不要在 h3 内使用图像标签，而只使用 h3 标签。在悬停时，您只需要移动背景位置即可在您的精灵中显示其他图像。

使用 css sprite 的优点是用户只需下载一张图像。

**HTML**

```
<div id= "logo">
 <h3>The Shalom Imaginative Documentary Photography</h3>
</div> 
```

**CSS**

```
#logo {
    position:absolute; 
    width:475px; 
    height:365px; 
    padding: 0 0 0 242px;
}   

h3 {
    background-image: url('yourcsssprite.png');
    position:absolute;
    text-indent: -9999em;
    width:475px; 
    height:365px;
}

h3:hover {
    background-position: -475px 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:47:16.877

您是否希望图像出现在当前图像之上？如果是这样的话，我不得不使用左边的像素数量来让它居中：

```
<div id= "logo">
 <img src="Graphics/splashpagelogo.png"  alt="The Shalom Imaginative Documentary Photography" />
 <div id="overlay">
 <img src="http://theshalomimaginative.com/Graphics/Homepagehover.png"  alt="The Shalom Imaginative Documentary Photography" />
 </div>
</div>

#logo {
position:absolute; width:475px; height:365px; padding: 0 0 0 242px;
}   
#overlay {
    display: none;
    position:absolute; width:475px; height:365px; top: 0; left: 195px; margin-top: 5px;
}
#logo:hover #overlay {
    display: block;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T16:34:43.397

不确定这是否是问题，但您不需要为 分配相同的属性`h3:hover`，它必须是这样的：

```
h3:hover {
background-image:url('http://theshalomimaginative.com/Graphics/Homepagehover.png');
} 
```

# android - 如何从扩展 DialogFragment 的类创建对话框？

> ID：14484476
> 
> 赞同：0
> 
> 时间：2013-01-23T16:28:09.447
> 
> 标签：android, dialog

所以我查看了 developer.android.com 上的代码 根据他们的说法，这是要做的事情......

```
public class FireMissilesDialogFragment extends DialogFragment {
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the Builder class for convenient dialog construction
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setMessage(R.string.dialog_fire_missiles)
           .setPositiveButton(R.string.fire, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   // FIRE ZE MISSILES!
               }
           })
           .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   // User cancelled the dialog
               }
           });
    // Create the AlertDialog object and return it
    return builder.create();
}
} 
```

我希望在从选项菜单中单击一个项目时创建此类的对象......但我不知道该怎么做？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:41:54.707

如果我理解您的问题，您想要一种在用户单击“确定”时告诉另一个班级的方法。一种常见的方法是创建自己的侦听器，开发人员指南有一个[很好的例子](https://developer.android.com/guide/components/fragments.html#EventCallbacks)。

* * *

 **创建回调**：****

 **```
public static class FragmentA extends ListFragment {
    ...
    // Container Activity must implement this interface
    public interface OnMyEventListener {
        public void onMyEvent();
    }
    ...
} 
```

设置回调：

```
public static class FragmentA extends ListFragment {
    OnMyEventListener mListener;
    ...
    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            mListener = (OnMyEventListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString() + " must implement OnMyEventListener");
        }
    }
    ...
} 
```

调用回调：

```
.setPositiveButton(R.string.fire, new DialogInterface.OnClickListener() {
     public void onClick(DialogInterface dialog, int id) {
         // FIRE ZE MISSILES!
         mListener.onMyEvent();
     }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-09T04:51:51.323

主要活动：

```
//Displaying the dialog box
FragmentManager fragmentManager = getSupportFragmentManager();
FireMissilesDialogFragment fmdl = new FireMissilesDialogFragment(MainActivity.this);
fmdl.show(fragmentManager,"dialog"); 
```

将此添加到您的 FireMissilesDialogFragment.java：

```
Context context;
public FireMissilesDialogFragment(Context context) {
   this.context = context;
}
....
....
rest of the code 
```**

# html - 是否有可以交换表格行和列的 CSS/HTML 属性/属性？

> ID：14484479
> 
> 赞同：5
> 
> 时间：2013-01-23T15:31:28.097
> 
> 标签：html, css, html-table

是否有语义 CSS 或 HTML 属性/属性来显示`table`交换的行和列？

换句话说，我想以一种方式编写代码，但有一些东西可以用列翻转行，反之亦然。

环顾四周，我只发现了交换它们的 JavaScript 方法，但就我而言——这不是我想要的。（如果没有 CSS/HTML 解决方案，那么我宁愿重构代码。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:35:27.530

对不起，但没有。

您*可能*会通过将整个表格旋转 90 度，然后将单元格向相反方向旋转 90 度来获得接近的效果。您可能还需要手动设置所有元素的高度和宽度以使其看起来合理。

不过，这将是一个重大的黑客攻击；我真的不推荐它。

对此没有任何其他 CSS 解决方案；当然不是“标准”的。这并不完全是一件标准的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T16:34:19.793

我理解您的担忧，但目前的答案是否定的：

单独使用 HTML 和 CSS 没有干净的方法。（尽管[将表格的单元格旋转 90°](https://stackoverflow.com/a/14484649/1779823)绝对很有趣。）

* * *

正如您自己建议的那样，这种情况有几个选择：

1.  重构您的代码（例如，使用脚本/自动化手动重新编码表格，或者在 Google Docs 电子表格中进行并导出为 HTML — 几年前曾经是可能的。）

2.  如果您不想重构，请使用 JavaScript 进行切换；或者使用 JavaScript 作为一个函数来切换回重构的代码——以防万一你希望在你的网站上有一个按钮，上面写着`"Flip Table"`.

3.  尝试使用 CSS 旋转单元格的[建议和实验](https://stackoverflow.com/a/14484649/1779823)方法。

这将取决于您想要什么以及您的实施细节。我会说渐进增强的 JaveScript 在大多数人的书中都是干净的代码（但在这种情况下，它不会优雅地降级，因为没有 JS 访问的人会看到原始的 HTML 表）。搜索引擎也会选择 JS。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-24T08:33:15.453

但实际上至少有两种不同的 CSS 解决方案。

David Bushell 有这个解决方案（使用 flexbox）： [http ://dbushell.com/2016/03/04/css-only-responsive-tables/](http://dbushell.com/2016/03/04/css-only-responsive-tables/)

而这个解决方案（使用浮动）

```
tr { display: block; float: left; }
th, td { display: block; } 
```

[http://jsfiddle.net/XKnKL/3/](http://jsfiddle.net/XKnKL/3/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T16:34:36.503

不是我知道的。看起来你想做这样的事情：

[如何反转（转置）HTML 表格的行和列？](https://stackoverflow.com/questions/6297591/how-to-invert-the-rows-and-columns-of-an-html-table)

# eclipse - 在另一个 Eclipse 中调试一个 Eclipse - Eclipse Trader

> ID：14484481
> 
> 赞同：0
> 
> 时间：2013-01-23T16:28:25.967
> 
> 标签：eclipse, eclipse-plugin

根据这个 [链接](http://www.eclipsetrader.org/wiki/DevelopmentSetup)

设置环境似乎很容易。进入最后一段：

> 设置运行配置

应该会出现一个神秘的 EclipseTrader 运行配置！

显然没有这样的事情！

问题是，如何在另一个椭圆中调试日食？有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:04:10.997

如果您在可用的调试配置中没有该`Eclipse application`条目，那么您可能应该运行没有安装[插件开发环境 (PDE)](http://www.eclipse.org/pde/)的 Eclipse 。

您可以从[下载页面下载](http://www.eclipse.org/downloads/)`Eclipse classic`已经包含 PDE 的软件包，或者从 Eclipse 更新站点将 PDE 插件安装到您当前的 Eclipse 平台中。

# gwt - 如何通过 Maven 属性将属性设置为 gwt.xml 文件？

> ID：14484483
> 
> 赞同：4
> 
> 时间：2013-01-23T16:28:27.220
> 
> 标签：gwt, maven

我在根 pom.xml 文件中有一个属性：gecko1_8。我想把它放到 gwt.xml 文件中。

所以我把这个属性放到 gwt.xml 中：

我在构建部分添加了以下内容：

```
<resources>
  <resource>
  <directory>src/main/resources</directory>
  <filtering>true</filtering>
    <excludes>
      <exclude>VAADIN.themes/*</exclude>
    </excludes>
  </resource>
</resources> 
```

但最后构建失败并出现错误：

> 错误：无效的属性值“${gwt.user.agents}”
> 
> 错误：解析 XML 时失败

如何通过属性将值从 pom.xml 到 gwt.xml 文件？

*更新*

有趣的事情。当我使用“mvn resources:resources”时，属性的值会正确写入 gwt.xml 文件，但是如果我运行“mvn clean install -pl com.myproject.module:submodule”，它会因“无效的属性值”而失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T17:57:34.587

您必须在 pom 中定义一个 Maven 配置文件（最好为每种情况定义一个特定的配置文件），如下所示：

```
 <profile>
        <id>gecko</id>
        <activation>
            <activeByDefault>false</activeByDefault>
        </activation>
        <properties>
            <user.agent.gecko>
                <![CDATA[<set-property name="user.agent" value="gecko,gecko1_8" />]]>
            </user.agent.gecko>
        </properties>
        <build>
            <resources>
                <resource>
                    <directory>src/main/resources</directory>
                    <includes>
                        <include>**/*YourGWTModule.gwt.xml</include>
                    </includes>
                    <filtering>true</filtering>
                </resource>
            </resources>
            <defaultGoal>process-resources</defaultGoal>
        </build>
    </profile>

<properties>
    <!--<user.agent>ie6,ie8,gecko,gecko1_8,opera,safari</user.agent>-->
    <user.agent.all> </user.agent.all>
    <user.agent.ie6> </user.agent.ie6>
    <user.agent.ie8> </user.agent.ie8>
    <user.agent.gecko> </user.agent.gecko>
    <user.agent.opera> </user.agent.opera>
    <user.agent.safari> </user.agent.safari>
</properties> 
```

然后`YourGWTModule.gwt.xml`像这样设置它：

```
<set-property name="locale" value="default" />
<!-- Specified through pom.xml profiles -->
${user.agent.all}
${user.agent.ie6}
${user.agent.ie8}
${user.agent.gecko}
${user.agent.safari}
${user.agent.opera}

</module> 
```

最后使用配置文件运行 maven：

```
mvn -P gecko install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T14:05:47.610

有一件事我没有提到，但它似乎太重要了。在构建期间使用的插件可以有自己的目标。其中一个目标可以“重做” maven-resource-plugin 所做的事情。

所以我有一个插件 vaadin-maven-plugin：

```
<plugin>
<groupId>com.vaadin</groupId>
<artifactId>vaadin-maven-plugin</artifactId>
<version>${vaadin.plugin.version}</version>
<configuration>
    ...
</configuration>
<executions>
    <execution>
        <goals>
            <goal>resources</goal>
            <goal>compile</goal>
        </goals>
    </execution>
</executions>
</plugin> 
```

并删除一个`<goal>resources</goal>`固定的问题。现在`mvn clean install`正确过滤我的 gwt.xml 中的属性。

希望此解决方案可以帮助那些将遇到此类问题的人。

# database - 为什么 oracle 表被索引但仍然进行全表扫描？

> ID：14484485
> 
> 赞同：5
> 
> 时间：2013-01-23T16:28:33.093
> 
> 标签：database, performance, oracle, oracle11g, query-optimization

我有一个包含 3000K 行的表“MSATTRIBUTE”。我使用以下查询来检索数据，该查询具有不同的执行计划，具有相同的数据库数据但在不同的环境中。在一个环境中，它显示为全表扫描，因此查询非常慢，但在另一个环境中，它都使用索引扫描，这非常好，每个人都知道为什么它在一个环境中进行全表扫描，因为我为他们建立了索引，我该怎么做就像我在 env 1 中测试的一样，让我们​​成为索引扫描。如何改进这个查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T17:35:33.540

如果不了解您的数据模型和您的业务，就很难给出具体的积极建议。但这里有一些关于您的索引策略的注释，以及为什么我猜优化器没有使用您拥有的索引。

在子查询中，REDLINE_MSATTRIBUTE 的访问路径来自三列：

*   班级
*   OBJECT_ID
*   CHANGE_RELEASE_DATE。

CLASS 未编入索引。但这大概不是很有选择性。OBJECT_ID 是复合索引的前导列，但其他列与子查询无关。

但最大的问题是 CHANGE_RELEASE_DATE。这根本没有索引。这是个坏消息，因为您的一个主键查找会产生一个日期，然后将其与 CHANGE_RELEASE_DATE 进行比较。如果一列没有被索引，那么数据库必须读取表来获取它的值。

主要查询驱动

*   ATTID
*   CHANGE_ID
*   OBJECT_ID（再次）
*   CHANGE_RELEASE_DATE（再次）
*   类（再次）
*   OLD_VALUE

ATTID 已编入索引，但该索引的选择性如何？优化器可能不认为它很有选择性。ATTID 也在一个带有 CHANGE_ID 和 OLD_VALUE 的复合索引中，但它们都不是前导列，所以这不是很有用。我们已经讨论过 CLASS、CHANGE_RELEASE_DATE 和 OBJECT_ID。

如果索引比表扫描便宜（读取次数更少），优化器只会选择使用索引。这通常意味着 WHERE 子句条件需要映射到索引的*前导*（即最左边）列。这可能是子查询中的 OBJECT_ID 和 ATTID 的情况，除了

1.  执行计划必须执行 INDEX SKIP SCAN，因为 REDLINE_MSATTRIBUTE_INDEX1 在两列之间具有 CHANGE_ID
2.  无论如何，数据库必须转到表中才能获取 CLASS 和 CHANGE_RELEASE_DATE。

因此，您可以通过在`(CHANGE_RELEASE_DATE, CLASS, OBJECT_ID, ATTID)`. 但正如我前面所说，在不了解您的情况的情况下，这些只是不明智的猜测。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T17:04:52.587

如果两个表中的行顺序不同，则两个系统中的索引可能具有不同的聚类因子，因此估计索引访问的成本不同。检查表和索引的统计信息，包括聚类因子，看看是否有显着差异。

另外，这两个系统的解释计划中是否提到了动态抽样？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T08:41:19.487

当 oracle 有索引并决定使用/不使用它时，可能是因为 1）您可能对 OPTIMIZER_MODE 有不同的设置 - 确保它不在 RBO 上。2) 数据不同 - 在这种情况下，oracle 可能会以不同方式评估查询统计信息。3）数据相同，但统计数据不是最新的。在这种情况下 - 收集统计数据

```
dbms_stats.gather_table_stats('your3000Ktable',cascade=>true); 
```

4）oracle不会在一个环境中使用索引的原因还有很多，我建议比较参数（例如OPTIMIZER_INDEX_COST_ADJ等...）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T18:00:49.783

一个直接的问题是这块 SELECT RELEASE_DATE FROM CHANGE WHERE ID = 136972355 （这段代码将为返回的每一行运行，它不需要......更好的方法是使用单个笛卡尔表，所以它只运行一次并返回一个静态值进行比较....

示例 1：

```
Select * From Table1, (Select Sysdate As Compare From Dual) Table2 Where Table1.Date > Table2.Compare. 
```

总是比 Select * from Table1 Where Date > Sysdate -- Sysdate 将被每行调用，因为它是基于动态函数的值。前面的示例将解析一次文字并大大加快速度。我相信这绝对是一次伤害您的查询并强制进行表扫描的部分。

我也相信这是执行查询的更有效方式。

```
Select  
            REDLINE_MSATTRIBUTE.ATTID
           ,REDLINE_MSATTRIBUTE.VALUE
  From 
            REDLINE_MSATTRIBUTE
           ,(
                SELECT  ATTID
                        ,CHANGE_ID
                        ,MIN(CHANGE_RELEASE_DATE) RELEASE_DATE
                 FROM   REDLINE_MSATTRIBUTE
                       ,(SELECT RELEASE_DATE FROM CHANGE WHERE ID = 136972355) T_COMPARE                
                WHERE   CLASS             = 9000
                  And   OBJECT_ID           = 32718015
                  And   CHANGE_RELEASE_DATE > T_COMPARE.RELEASE_DATE
                  And   ATTID IN (1564, 1565)
                GROUP 
                   BY   ATTID,
                        CHANGE_ID
            ) T_DYNAMIC
Where         
        REDLINE_MSATTRIBUTE.ATTID = T_DYNAMIC.ATTID   
    And REDLINE_MSATTRIBUTE.CHANGE_ID = T_DYNAMIC.CHANGE_ID
    And REDLINE_MSATTRIBUTE.RELEASE_DATE = T_DYNAMIC.RELEASE_DATE
    And CLASS     = 9000
    And OBJECT_ID = 32718015
    And OLD_VALUE ='Y'
Order 
   By   REDLINE_MSATTRIBUTE.ATTID,
        REDLINE_MSATTRIBUTE.VALUE; 
```

# c - 如何在 C 中将 fprintf 与动态分配的 unsigned char* 数组一起使用

> ID：14484489
> 
> 赞同：0
> 
> 时间：2013-01-23T16:28:41.153
> 
> 标签：c, file

我正在尝试将 unsigned char* 数组写入文件。

到目前为止，我尝试过的代码的一个最小工作示例是（假设 fp 已正确初始化）：

```
unsigned char* x; int i; int j; int sizeOfx;
for (i=0; i<n; i++) {
    x = // getter function with parameter i
    sizeOfx = // getter function that returns the number of elements in x
    for (j=0; j<sizeOfx; j++) {
        fprintf(fp,"%s",x[j]);
    }
} 
```

即我一次通过char 数组一个元素并将其写入文件。

但是，我得到了错误

```
format ‘%s’ expects argument of type ‘char*’, but argument 3 has type ‘int’ [-Wformat] 
```

我怎样才能解决这个问题？

非常感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:33:03.367

`%s`用于打印字符串，因此您需要更改`x[j]`为`x`“修复”您的错误。

由于您似乎真的想`char`单独编写每个内容，因此您需要考虑如何存储“元素”（字符串的字符）。

您可以使用`%c`将它们的值作为 ASCII 值存储在文件中（使用`%s`and时基本相同`x`，除非您想写多于/少于完整的字符串）。

或者您可以将“元素值”存储为整数，即使用字符 0-9 的文本值，使用`%d`. 或者可能`%x`是使用字符 0-9 和 af 的十六进制。

因此，由您决定如何存储`x`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:29:41.410

尝试 %c（用于字符打印）而不是 %s。

或者，您可以按如下方式编写打印行：

```
fprintf(fp,"%s",(char*)x[j]); 
```

它将 x[j] 处的指针静态转换回字符串（本质上），然后如果进入该循环的字符串是“abcdef”，那么输出将如下所示：

```
"abcdefbcdefcdefdefeff" 
```

这是 c 完全开放做你想做的事的地方。

# php - 每 x 分钟将图像文件从一台服务器重复保存到另一台服务器

> ID：14484496
> 
> 赞同：2
> 
> 时间：2013-01-23T10:02:42.213
> 
> 标签：php, image, cron, copy, jpeg

我要问的是如何在 PHP 服务器上设置复制操作，以每隔 x 分钟从远程服务器复制图像文件。

基本上我想做：

```
$copy = copy('http://domain.com/image.jpg', '.images/destimg.jpg'); 
```

此外，它每 5 分钟完成一次！可以在不使用太多内存的情况下完成吗？cron工作怎么样？你有什么建议？

我实现的最简单的解决方案是这样的：

1.  使用以下代码创建一个 php 文件

    ```
    <?php
    /*
     * Copy images from remote server 
     */

    $file = 'http://www.example.com/images/image.jpg';
    $file1 = 'http://www.example.com/images/image1.jpg';
    $file2 = 'http://www.example.com/images/image2.jpg';

    $newfile = '/ABSOLUTE/PATH/WHERE/TO/PUT/FILE/images/image.jpg';
    $newfile1 = '/ABSOLUTE/PATH/WHERE/TO/PUT/FILE/images/image1.jpg';
    $newfile2 = '/ABSOLUTE/PATH/WHERE/TO/PUT/FILE/images/image2.jpg';

    if ( copy($file, $newfile) && copy($file1, $newfile1) && copy($file2, $newfile2)) {
        echo "Copy success!";
        //return;
    } else {
        echo "Copy failed.";
    }
    ?> 
    ```

2.  测试您是否收到复制成功消息。

3.  注释掉或删除 echo 和取消注释返回，删除 else 部分代码。
4.  使用命令创建 cron 作业：

    php /ABSOLUTE/PATH/TO/YOUR/PHP/FILE/your-file.php

这就对了 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:07:46.633

如果您有 ssh 访问权限并且可以设置`cron`工作，那么这相当简单。您只需设置一个使用`curl`或`wget`下载图像并将其保存在适当文件夹中的 cron 作业。PHP 没有进入它。

使用 curl，您的 crontab 将类似于：

```
*/5 * * * * curl http://domain.com/image.jpg > /......./images/destimg.jpg 
```

这设置为每 5 分钟运行一次。只需确保为图像目标设置绝对路径即可。

有关 cron 作业的更多信息：[https ://en.wikipedia.org/wiki/Cron](https://en.wikipedia.org/wiki/Cron)

# android - 在android的后台加载数据

> ID：14484510
> 
> 赞同：0
> 
> 时间：2013-01-23T16:29:40.810
> 
> 标签：android, android-asynctask

我正在尝试执行某些操作，例如在应用程序的初始启动时创建一个表并插入 720 行，这需要一些时间，所以我决定在后台运行它。请看下面的代码，

MainActivity.java

```
DatabaseHandler dbhandler = new DatabaseHandler(this);
this.progressDialog = ProgressDialog.show(this, "Please wait...",
            "Downloading Passengers Information...", true, false);

new DownloadTask().execute();

private class DownloadTask extends AsyncTask<String, Void, Object> {

    @Override
    protected Object doInBackground(String... args) {

        for (int i = 1; i <= 5; i++) {
            for (int j = 0; j < 11; j++) {
                value = jedis.hget("passengerInfo",
                        String.valueOf(i + (char) (asciiA) + j)); //this will get the data from hash table passengerInfo created in Redis
                if (value != null) {
                    addSeat = String.valueOf(i + (char) (asciiA) + j);
                    paxInfo = value.split(",");
                    passName = paxInfo[0];
                    passAge = Integer.parseInt(paxInfo[1]);
                    passGender = Integer.parseInt(paxInfo[2]);
                    passFoodPref = paxInfo[3];

                    dbhandler.addPassengerInfo(new PassengerInfo(addSeat,
                            passName, passAge, passGender, passFoodPref));
                }

                else {
                    addSeat = String.valueOf(i + (char) (asciiA) + j);
                    passName = "NA";
                    passAge = 0;
                    passGender = -1;
                    passFoodPref = "NA";

                    dbhandler.addPassengerInfo(new PassengerInfo(addSeat,
                            passName, passAge, passGender, passFoodPref));
                }

            }
        }
        return null;
    }

    @Override
    protected void onPostExecute(Object result) {
        // Pass the result data back to the main activity
        MainActivity.this.data = result;

        if (MainActivity.this.progressDialog != null) {
            MainActivity.this.progressDialog.dismiss();
        }
    }
} 
```

当我运行它时，它在 logcat 中显示以下错误，

```
01-23 21:29:06.206: E/AndroidRuntime(704): FATAL EXCEPTION: AsyncTask #1
01-23 21:29:06.206: E/AndroidRuntime(704): java.lang.RuntimeException: An error occured while executing doInBackground() 
```

请帮忙 ！

仅供参考：整个 Logcat

```
01-23 21:53:15.807: E/AndroidRuntime(742): 在 android.os.AsyncTask$3.done(AsyncTask.java:200)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 java.util.concurrent.FutureTask.setException(FutureTask.java:125)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 java.util.concurrent.FutureTask.run(FutureTask.java:138)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 java.lang.Thread.run(Thread.java:1019)
01-23 21:53:15.807: E/AndroidRuntime(742): 原因: redis.clients.jedis.exceptions.JedisConnectionException: java.net.SocketTimeoutException: 连接超时
01-23 21:53:15.807: E/AndroidRuntime(742): 在 redis.clients.jedis.Connection.connect(Connection.java:134)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 redis.clients.jedis.BinaryClient.connect(BinaryClient.java:69)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 redis.clients.jedis.Connection.sendCommand(Connection.java:79)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 redis.clients.jedis.BinaryClient.hget(BinaryClient.java:212)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 redis.clients.jedis.Client.hget(Client.java:138)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 redis.clients.jedis.Jedis.hget(Jedis.java:680)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 android.jedisconnectiontest.com.MainActivity$DownloadTask.doInBackground(MainActivity.java:118)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 android.jedisconnectiontest.com.MainActivity$DownloadTask.doInBackground(MainActivity.java:1)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 android.os.AsyncTask$2.call(AsyncTask.java:185)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
01-23 21:53:15.807: E/AndroidRuntime(742): ... 4 更多
01-23 21:53:15.807：E/AndroidRuntime(742)：原因：java.net.SocketTimeoutException：连接超时
01-23 21:53:15.807: E/AndroidRuntime(742): at org.apache.harmony.luni.platform.OSNetworkSystem.connect(Native Method)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 dalvik.system.BlockGuard$WrappedNetworkSystem.connect(BlockGuard.java:357)
01-23 21:53:15.807: E/AndroidRuntime(742): at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:204)
01-23 21:53:15.807: E/AndroidRuntime(742): at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:437)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 java.net.Socket.connect(Socket.java:983)
01-23 21:53:15.807: E/AndroidRuntime(742): 在 redis.clients.jedis.Connection.connect(Connection.java:129)
01-23 21:53:15.807: E/AndroidRuntime(742): ... 13 更多
01-23 21:53:17.737: E/WindowManager(742): Activity android.jedisconnectiontest.com.MainActivity 泄露了最初添加在这里的窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@40523ac8
01-23 21:53:17.737: E/WindowManager(742): android.view.WindowLeaked: Activity android.jedisconnectiontest.com.MainActivity 泄露了窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@40523ac8最初添加在这里
01-23 21:53:17.737: E/WindowManager(742): 在 android.view.ViewRoot.(ViewRoot.java:258)
01-23 21:53:17.737: E/WindowManager(742): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
01-23 21:53:17.737: E/WindowManager(742): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
01-23 21:53:17.737: E/WindowManager(742): 在 android.view.Window$LocalWindowManager.addView(Window.java:424)
01-23 21:53:17.737: E/WindowManager(742): 在 android.app.Dialog.show(Dialog.java:241)
01-23 21:53:17.737: E/WindowManager(742): 在 android.app.ProgressDialog.show(ProgressDialog.java:107)
01-23 21:53:17.737: E/WindowManager(742): 在 android.app.ProgressDialog.show(ProgressDialog.java:95)
01-23 21:53:17.737: E/WindowManager(742): 在 android.jedisconnectiontest.com.MainActivity.onCreate(MainActivity.java:56)
01-23 21:53:17.737: E/WindowManager(742): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-23 21:53:17.737: E/WindowManager(742): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-23 21:53:17.737: E/WindowManager(742): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-23 21:53:17.737: E/WindowManager(742): 在 android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-23 21:53:17.737: E/WindowManager(742): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-23 21:53:17.737: E/WindowManager(742): 在 android.os.Handler.dispatchMessage(Handler.java:99)
01-23 21:53:17.737: E/WindowManager(742): 在 android.os.Looper.loop(Looper.java:123)
01-23 21:53:17.737: E/WindowManager(742): 在 android.app.ActivityThread.main(ActivityThread.java:3683)
01-23 21:53:17.737: E/WindowManager(742): 在 java.lang.reflect.Method.invokeNative(Native Method)
01-23 21:53:17.737: E/WindowManager(742): 在 java.lang.reflect.Method.invoke(Method.java:507)
01-23 21:53:17.737: E/WindowManager(742): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-23 21:53:17.737: E/WindowManager(742): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-23 21:53:17.737: E/WindowManager(742): at dalvik.system.NativeStart.main(Native Method)
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:46:35.227

```
Caused by: redis.clients.jedis.exceptions.JedisConnectionException: java.net.SocketTimeoutException: Connection timed out
Caused by: java.net.SocketTimeoutException: Connection timed out 
```

此错误表示服务器在给定的 TimeOut 值（正常约 10 秒）之间没有响应，是您的服务器宕机了吗？还是您拼错了服务器网址？

# git - Jenkins 有多个项目和 git 分支

> ID：14484512
> 
> 赞同：3
> 
> 时间：2013-01-23T16:29:41.933
> 
> 标签：git, jenkins

我想创建一个 Jenkins 作业，它将构建我所有的子项目 A、B、C 和 D。对于这些子项目中的每一个，它应该检查 git 存储库是否有更改 */develop、*/release /xx 和 */master 分支。如果其中一个有变化，它应该为那个分支和那个子项目构建（并运行单元测试）。我尝试使用多配置插件，它非常接近我想要的。这适用于夜间构建，但不适用于 git-update-triggered 构建。我可以使用一个 shell 脚本来完成这项工作，该脚本将在运行 Ant 之前克隆所需的存储库和分支。

主要问题是：我不能使用配置参数（如 SUB_PROJECT=A、BRANCH=release/1.0）作为 SCM 参数。当我将 git respository url 设置为“git@bitbucket.org:mine/$SUB_PROJECT.git”并将分支设置为“*/$BRANCH”时，它不会用值替换参数。

我不喜欢“jenkins-autojobs”或“jenkins-build-per-branch”解决方案，因为当一项工作可以完成所有工作时，我不想创建 12 个以上的工作。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:22:36.293

这个问题与以下问题非常相似：

*   [自动生成/删除詹金斯工作](https://stackoverflow.com/questions/14174594/auto-generate-remove-jenkins-jobs/)

我推荐使用可以与 Jenkins 集成的[Gerrit 。](http://code.google.com/p/gerrit/)提交的补丁被实现为分支，这些分支会通过 Jenkins 作业自动验证。

这可能不是一个完整的解决方案，但会将管理短期功能分支的问题外包出去。

# vb.net - 如何通过变量引用项目来更改工具箱项目属性？

> ID：14484513
> 
> 赞同：0
> 
> 时间：2013-01-23T16:29:43.167
> 
> 标签：vb.net, string

抱歉标题令人困惑 - 这是我正在使用的代码。

示例代码 -

```
 If bolCorrect = False Then
        intIncorrect += 1
        temp3 = "picture" + CStr(intIncorrect)
        temp3.Visible = True 
```

我有几张图片，名称为图片[number-from-0-to-10]，我希望它们根据变量的数量显示。

它抛出的错误是“可见”不是“字符串”的一部分。在这种情况下，如何让解释器查看“temp3”，并引用工具箱项而不是变量的类型（例如字符串）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:37:12.173

您需要参考您为图片框控件设置的实际名称属性（如果您使用的是图片框控件）因此如果您的图片框控件命名为pb1

```
pb1.Image = System.Drawing.Image.FromFile("picture" + counter + ".jpg")
pb1.Visible = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:05:56.690

您通常应该尽量*避免*通过字符串寻址控件，这通常只是围绕正确解决方案的一种破解。相反，维护*该控件*的变量，或者在您的情况下，维护相关控件的数组并通过索引访问它们。

也就是说，*可以*通过[`Form.Controls`集合](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls.aspx)获得一个给定名称的控件：

```
Dim ctl = Me.Controls("picture" + CStr(intIncorrect)) 
```

# oracle - 如何在Oracle中将临时表转换为永久表，反之亦然

> ID：14484517
> 
> 赞同：6
> 
> 时间：2013-01-23T16:29:53.507
> 
> 标签：oracle, temp-tables

我想知道在Oracle中将临时表转换为永久表的命令是什么。

另一个问题是关于索引的。如果我转换它，临时表中使用的索引将与永久表中使用的索引相同吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T16:36:22.923

您不能将表从临时表转换为永久表。

您可以创建一个与临时表结构匹配的新永久表

```
CREATE TABLE new_permanent_table
AS
SELECT *
  FROM old_temporary_table
 WHERE 1=0; 
```

[`DBMS_METADATA`或者，您可以使用包](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_metada.htm#i1019414)获取临时表的 DDL，然后手动编辑 DDL 以创建新的永久表。

然后，您可以在新的永久表上创建您想要的任何索引并删除旧的临时表。删除旧临时表后，您可以根据需要重命名永久表以使用旧临时表的名称。

# xslt - XSLT 1.0：Muenchian 分组不起作用

> ID：14484524
> 
> 赞同：0
> 
> 时间：2013-01-23T16:30:05.520
> 
> 标签：xslt, xslt-1.0, muenchian-grouping

我有以下简化的 XML 结构：

```
<?xml version="1.0" encoding="utf-8"?>
<list>
<INVOIC>
    <M_INVOIC>
        <G_SG25>
            <S_LIN>
                <id>LIN</id>
                <D_1082>1</D_1082>
                <C_C212>
                    <D_7140>7610400271943</D_7140>
                    <D_7143_3>EN</D_7143_3>
                </C_C212>
            </S_LIN>
        </G_SG25>
        <G_SG25>
            <S_LIN>
                <id>LIN</id>
                <D_1082>2</D_1082>
                <C_C212>
                    <D_7140>1234567890123</D_7140>
                    <D_7143_3>EN</D_7143_3>
                </C_C212>
            </S_LIN>
        </G_SG25>
    </M_INVOIC>
</INVOIC>
<INVOIC>
    <SALESORDER>
        <ET_VBAP>
            <item>
                <VBELN>0010002695</VBELN>
                <POSNR>000010</POSNR>
                <MATNR>000000000000400487</MATNR>
                <EAN11>1234567890123</EAN11>
            </item>
            <item>
                <VBELN>0010002695</VBELN>
                <POSNR>000020</POSNR>
                <MATNR>000000000000002054</MATNR>
                <EAN11>5012454920549</EAN11>
            </item>
            <item>
                <VBELN>0010002695</VBELN>
                <POSNR>000030</POSNR>
                <MATNR>000000000000392104</MATNR>
                <EAN11>3046920921046</EAN11>
            </item>
            <item>
                <VBELN>0010002695</VBELN>
                <POSNR>000040</POSNR>
                <MATNR>000000000000859146</MATNR>
                <EAN11>8003340591469</EAN11>
            </item>
            <item>
                <VBELN>0010002695</VBELN>
                <POSNR>000050</POSNR>
                <MATNR>000000000000727194</MATNR>
                <EAN11>7610400271943</EAN11>
            </item>
        </ET_VBAP>
    </SALESORDER>
</INVOIC>
</list> 
```

我的 XSLT：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
<xsl:output method="xml" encoding="UTF-8" indent="yes"/>

<xsl:key name="kByEanPos" match="G_SG25" use="S_LIN/C_C212/D_7140"/>

<xsl:template match="/">

    <xsl:variable name="uniqueSet" select="G_SG25[generate-id()=generate-id(key('kByEanPos',S_LIN/C_C212/D_7140))]"/>
    <list>
        <xsl:for-each select="list/INVOIC/M_INVOIC/G_SG25[generate-id()=
            generate-id(key('kByEanPos',S_LIN/C_C212/D_7140))]">
            <ean>
                <xsl:value-of select="parent::M_INVOIC/parent::INVOIC/parent::list/INVOIC/SALESORDER/ET_VBAP/item/MATNR"/>
            </ean>
        </xsl:for-each>
    </list>
</xsl:template>
</xsl:stylesheet> 
```

给了我这个 XML 输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<list>
<ean>000000000000400487</ean>
<ean>000000000000400487</ean>
</list> 
```

但我预期的 XML 输出是：

```
<?xml version="1.0" encoding="UTF-8"?>
<list>
<ean>000000000000727194</ean>
<ean>000000000000400487</ean>
</list> 
```

我不确定我做错了什么，我找不到我的错误。我认为这与我定义的密钥有关。基本上我需要一个键`<D_7140>`，然后在下面的结构中查找该数字并在之前`EAN11`输出。`MATNR`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:20:14.490

在这一行：

```
<xsl:value-of 
  select="parent::M_INVOIC/parent::INVOIC/parent::list/INVOIC/SALESORDER/ET_VBAP/item/MATNR"/> 
```

您一直爬上节点树并返回到`MATNR`，因此唯一会找到的是`MATNR`文档中的第一个。要找到与您`MATNR`的当前相对应的，这应该有效：`D_7140``for-each`

```
<xsl:value-of 
  select="/list/INVOIC/SALESORDER/ET_VBAP/item[EAN11 = current()/S_LIN/C_C212/D_7140]/MATNR"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:25:25.667

如果您尝试根据**EAN11**值查找**项目**元素，则可能值得考虑使用密钥来执行此操作

 **```
<xsl:key name="item" match="item" use="EAN11" /> 
```

这样，您可以将**xsl:value-of**减少到这个

```
<xsl:value-of select="key('item', S_LIN/C_C212/D_7140)/MATNR"/> 
```**

# c# - 在 C# 的 XmlReader 中读取多个连续的 XML 文件

> ID：14484529
> 
> 赞同：3
> 
> 时间：2013-01-23T16:30:18.600
> 
> 标签：c#, xmlreader, memorystream

> **可能重复：**
> [是否有一种内置方法可以将多个文件作为一个流处理？](https://stackoverflow.com/questions/533881/is-there-a-built-in-way-to-handle-multiple-files-as-one-stream)

我有大量的连续数据分成多个文件。使用 XmlDocument 或 LINQ 不是选项，因为**这些文件很大，并且无法将 500GB 加载到内存中**。

因此我***必须***使用 XmlReader。

我拥有的文件在 XML 意义上是碎片化的，例如：

文件 1：

```
...
<Person>
  <FirstName>John</FirstName>
  <LastName>Doe</LastName> 
```

文件 2：

```
 <Email>john@doe.com</Email>
</Person>
... 
```

一个潜在的解决方案是我需要一种设置流的方法，例如：

```
using (XmlReader reader = XmlReader.Create(stream)) { ... } 
```

这样流连续不断地为 XmlReader 提供每个文件。因此，当流到达文件末尾时，它会自动将下一个文件提供给它。我将如何做到这一点？所以对于 XmlReader 来说，它看起来只是在遍历一个大流，但该流是由多个连续文件组成的？

谢谢，

艾莉森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:37:35.280

Linq to xml 早餐会吃大量的 xml 文件。

你知道[http://msdn.microsoft.com/en-us/library/system.xml.linq.xnode.readfrom.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xnode.readfrom.aspx)吗？

# javascript - 结束 contenteditable 中的标签而不插入多余的标签

> ID：14484530
> 
> 赞同：13
> 
> 时间：2013-01-23T16:30:24.590
> 
> 标签：javascript, jquery, contenteditable

在 contenteditable 中使用无序（或有序）列表让我很头疼。

每当我想通过按`ENTER`两次来结束编辑列表时，浏览器将关闭`<ul />`但插入一个`<p />`（Firefox）或一个`<div />`（Chrome）标签，其中包含`<br />`.
**[这里的例子](http://jsfiddle.net/JZ54G/8/)**

我的目标是避免多余的，`<p />`或者 `<div />`只是关闭`<ul />`.
我试图修改[Tim Down 的](https://stackoverflow.com/questions/2735672/how-to-change-behavior-of-contenteditable-blocks-after-on-enter-pressed-in-vario#3492423)解决方案，这将阻止浏览器插入`<p />`或 `<div />`在按下时`ENTER`插入一个干净的`<br />`标签。
**[这里的例子](http://jsfiddle.net/4xyR2/1/)**

不幸的是，当使用该解决方案时，`<ul />`浏览器永远不会关闭，因为只有`<br />`标签被插入*到*`<li />`项目中。

所以我的问题是：

**如何`<ul />`在最后一个空白处按 enter 时通过插入节点或粘贴 html 来主动关闭`<li />`？**

***更新：****如果问题还不清楚：我正在寻找一种方法来关闭`<ul />`而不插入`<p />`或`<div />`标记，但只需插入一个好的旧平原`<br />`代替*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T10:34:56.590

与您的尝试类似，我们在用户按 Enter 时修改 contenteditable：[Demo](http://jsfiddle.net/jefferyto/dqCWd/)

```
if (window.getSelection) { // w3c
    $('div').keypress(function (e) {
        var sel, node, children, br, range;
        if (e.which == 13) {
            sel = window.getSelection();
            node = $(sel.anchorNode);
            children = $(sel.anchorNode.childNodes);

            // if nothing is selected and the caret is in an empty <li>
            // (the browser seems to insert a <br> before we get called)
            if (sel.isCollapsed && node.is('li') && (!children.length ||
                    (children.length == 1 && children.first().is('br')))) {
                e.preventDefault();

                // if the empty <li> is in the middle of the list,
                // move the following <li>'s to a new list
                if (!node.is(':last-child')) {
                    node.parent().clone(false)
                        .empty()
                        .insertAfter(node.parent())
                        .append(node.nextAll());
                }

                // insert <br> after list
                br = $('<br>').insertAfter(node.parent());

                // move caret to after <br>
                range = document.createRange();
                range.setStartAfter(br.get(0));
                range.setEndAfter(br.get(0));
                sel.removeAllRanges();
                sel.addRange(range);

                // remove <li>
                node.remove();
            }
        }
    });

} else if (document.selection) { // internet explorer
    $('div').keypress(function (e) {
        var range, node, children;
        if (e.which == 13) {
            range = document.selection.createRange();
            node = $(range.parentElement());
            children = $(range.parentElement().childNodes);

            // if nothing is selected and the caret is in an empty <li>
            // (the browser seems to insert a <br> before we get called)
            if (!range.htmlText.length && node.is('li') && (!children.length ||
                    (children.length == 1 && children.first().is('br')))) {
                e.preventDefault();

                // if the empty <li> is in the middle of the list,
                // move the following <li>'s to a new list
                if (!node.is(':last-child')) {
                    node.parent().clone(false)
                        .empty()
                        .insertAfter(node.parent())
                        .append(node.nextAll());
                }

                // insert <br> after list
                br = $('<br>').insertAfter(node.parent());

                // move caret to after <br>
                range = document.body.createTextRange();
                range.moveToElementText(br.get(0));
                range.collapse(false);
                range.select();

                // remove <li>
                node.remove();
            }
        }
    });
} 
```

请注意，这不处理用户在按 Enter 之前选择了某些内容的情况。如果你想处理这种情况，你需要弄清楚用户是否选择了整个内容`<li>`（这似乎不是一个简单的任务），如果是这样，删除内容并将其视为如果用户在一个空的`<li>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T04:50:36.417

我理解你的问题，但不清楚为什么会存在这样的要求。这可能有助于澄清这一方面。

无论如何，这是一个想法。为什么不替换或删除空的`<div>`和`<p>`标签。

```
$(document).ready(function(){
    $("div").keyup(function(evt) { 
        $("div, p").filter( function() {
                $this = $(this);
            return !($.trim($(this).text()).length);
        }).replaceWith('<br />');
    });
}); 
```

**工作示例：http:** [//jsfiddle.net/4xyR2/9/](http://jsfiddle.net/4xyR2/9/)

我注意到的一个问题`contenteditable`是使用上述解决方案如何影响光标。我认为 Chrome 和 Firefox 需要`<div>`，`<p>`因此他们可以跟踪光标在`<div>`. 这来自我在测试时的观察，而不是对浏览器如何解释的深刻理解`contenteditable`。

Chrome (24.0.1312.52 m) 似乎不喜欢替换。我在测试时看到奇怪的光标位置，但它可以工作。Firefox (17.0.1) 很好地处理了替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:20:25.757

我能在没有 Javascript 的情况下锻炼的最好的东西是

HTML：

```
<div contenteditable="true">
  <div>asdfasdf</div>
</div> 
```

较少的：

```
div[contenteditable=true] {
  outline: none;

  &>p,
  &>div {
      margin: 0 0 0 30px;
      display: list-item;
  }
} 
```

斌[http://jsbin.com/idekix/6/edit](http://jsbin.com/idekix/6/edit)

但是这里有一些缺点，

1.  第一个也是非常大的，Win8 上的 FireFox 18.0.1 代替插入`div`or`p`标记作为新行使用类似 double 的东西`br`，

2.  第二次发生在您删除所有内容并开始输入并按 Enter 时，不同的浏览器行为非常不同，Chrome 将第一行作为`contenteditable`容器的纯文本节点插入，并且比将每个新行放入`div`Opera 12.12 处理得更好，而且它永远不会允许删除最后一个`div`节点，IE9-10 开始跳转，并且在您再次开始后使用`p`标签而不是`div`（这甚至不是这样的灾难，只是不一致），但是 FireFox 甚至还没有尝试改变它的`br`行为。还尝试使用 IE10 调试模式检查 IE7-8，它与 Opera 相同，尽管它不是真正的浏览器。

3.  第三，它允许你插入空节点，说到这个 Opera 做得很好，在 Opera [http://jsbin.com/uxesez/1/edit](http://jsbin.com/uxesez/1/edit)中看到这个 bin ，这里的标记更接近原始，它不允许你插入空`li`。

也就是说，所有测试都是在 Windows 8 64 位平台上完成的，使用 Chrome 24.0.1312.56 m、FireFox 18.0.1、Opera 12.12 和 IE10，通过 IE 调试栏模拟旧版 IE。承认在其他平台/版本上情况可能会有所不同。

总结以上所有内容，`contenteditable`具有很好的浏览器支持范围[http://caniuse.com/contenteditable](http://caniuse.com/contenteditable)，但是每个浏览器都有自己的实现，这是另一个单独的问题。因此，如果没有跨浏览器 JavaScrpt 的麻烦，您将无法使用它。也作为我个人意见的`contenteditable`核心思想更适合像轻量级替换`iframe`当它用作浏览器中几乎每个富文本编辑器的元素时。

来自 Mozilla 源的 UPD [https://developer.mozilla.org/en-US/docs/HTML/Content_Editable](https://developer.mozilla.org/en-US/docs/HTML/Content_Editable)

> 在 HTML5 中，任何元素都可以编辑。这个特性是很久以前引入的，但现在已经被 WHATWG（html 当前规范）标准化。使用一些 JavaScript 事件处理程序，您可以将您的网页转换为一个完整且快速**的富文本编辑器**。

下一步只是我的谦虚建议。我认为，在您的情况下，可以使用真正的可编辑字段来代替。我在这个 bin [http://jsbin.com/ojiyok/7/edit](http://jsbin.com/ojiyok/7/edit)中所做的非常多的原型版本还有一些需要改进的地方，但看起来它的行为比真实的更可预测`conteneditables`，这里的好部分是你可以根据你的更改 UI同时需要所有浏览器。

# java - 如何为 SL4J 日志消息中的每个线程指定唯一标识符

> ID：14484534
> 
> 赞同：0
> 
> 时间：2013-01-23T16:30:37.970
> 
> 标签：java, logging, slf4j

有没有办法使用 slf4j.Logger 为特定线程发出的每个日志消息指定唯一标识符

例如，如果我在线程池中执行了十个工作线程，我希望每个线程在每个日志消息之前指定其标识符。

目前我需要写这样的东西

```
final String marker ="SomeIdentifier" 
LOG.info("[{}] Connected to Socket: {}/{}", new Object[]{marker,ipAddr,port});
==> output
INFO - [pool-1-thread-1] [SomeIdentifier] Connected to Socket: rtdevslo2/7777 
```

有没有推荐的方法使用 slf4j 和 log4j 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:33:18.920

如果您使用线程池执行器，最简单的方法是为您的线程池提供[一个自定义 ThreadFactory](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadFactory.html)，您可以在其中自定义线程的名称。

例如，大多数工厂方法都`Executors`提供此选项（[示例](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool%28java.util.concurrent.ThreadFactory%29)）。

典型实现：

```
private final ExecutorService executor = Executors.newCachedThreadPool(new ThreadFactory() {
    private final AtomicInteger threadId = new AtomicInteger();

    @Override
    public Thread newThread(Runnable r) {
        return new Thread(r, "Socket Thread Pool - Thread # " + threadId.incrementAndGet());
    }
}); 
```

# delphi - 用于调试器的单独鼠标

> ID：14484538
> 
> 赞同：2
> 
> 时间：2013-01-23T16:30:51.720
> 
> 标签：delphi, debugging

我正在编写一个鼠标位置很重要的 Delphi (XE3) 应用程序，但我希望能够在不移动主鼠标位置的情况下使用另一只鼠标设置断点。我可能正在尝试调试的应用程序中按 shift 或 control，因此 alt-tabbing 到 IDE 并使用键盘键盘设置断点将不起作用。可以轻松设置 Windows 7 来执行此操作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T17:22:12.457

可以将多个键盘和鼠标连接到计算机上，并且各种视频游戏可以利用多个输入设备，但操作系统通常不会利用这一点。无论您连接了多少键盘和鼠标，屏幕上仍然只有一个输入队列和一个光标。

如果您只需要在不移动鼠标的情况下设置断点，那么您可以使用键盘将输入插入符号导航到所需的行，然后按下`F5`以切换断点。

如果您需要能够在不干扰程序的情况下进行调试，那么您可能需要**使用[远程调试](http://docwiki.embarcadero.com/RADStudio/XE3/en/Overview_of_Remote_Debugging)**。尽管文档建议在您坐在本地系统时使用远程桌面来操作远程程序，但这不是您在这种情况下想要做的，因为您仍然只有一组输入设备。相反，从其他地方（直接或通过第三台计算机上的远程桌面）登录到远程计算机。拥有两台可以从同一把椅子上访问的计算机会有所帮助。

# php - PHP 性能，从文件读取还是从数据库读取？

> ID：14484541
> 
> 赞同：3
> 
> 时间：2013-01-23T16:31:03.917
> 
> 标签：php, caching

我需要知道这些信息，我使用**`file()`**PHP 中的函数将整个文件读入数组；该文件包含我反序列化和使用的序列化对象。

另一方面，我可以选择在 MySQL 中存储信息并使用查询检索它。

知道这个操作预计每天要完成数百万次，PHP 是从文件中读取和反序列化数据还是从数据库中读取和反序列化更好？我手头没有统计数据:(

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:35:38.870

内存会更快，一般mysql会将常用查询缓存在内存中（除非查询缓存因为某种原因被禁用）。如果服务器是远程网络延迟可能需要考虑。

现在，有一种更好的方法可以做到这一点。使用 APC 或本地 memcached 服务器来存储此信息。如果它不更改或不经常更改，这是您的最佳选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:41:41.883

数据库。数据库，数据库，一千 [或百万，在这种情况下] 次数据库。

我能想到的唯一例外是，如果*每个*请求都需要此文件中包含的*每一位数据。*

MySQL 在以下方面效率更高：

*   管理大量数据
*   索引、搜索和排序数据集
*   检索随机位和数据片段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:35:43.003

我认为基于文档的数据库总是比 MySQL 等 RDBMS 更快。
但是除非你有大量的记录和数据，否则你不会注意到它。在您的情况下，这取决于哪种方法对您来说很方便。取决于您的数据之间是否存在需要某种完整性和简单查询方式的关系。

# internet-explorer - 就像在显示之前需要在 IE 中刷新的框流

> ID：14484542
> 
> 赞同：1
> 
> 时间：2013-01-23T16:31:04.760
> 
> 标签：internet-explorer, stream, facebook-likebox, muse

我在我们的汽车俱乐部网站上有一个类似框，它在我测试过的所有其他浏览器中都能完美运行，除了 IE 9（也许还有一些旧版本的 IE）。此问题的页面链接是：[http ://www.vettesofthesmokies.com/message-board.html](http://www.vettesofthesmokies.com/message-board.html)

我使用 Adob​​e Muse 创建了站点，我可以刷新页面并且流将起作用。类似框的所有其他部分都有效。我在同一页面上有 google 组 HTML 框架，但不希望成为问题。我可以在 IE 中刷新框架并让它也显示流。

# ftp - 是否可以使用 SCP 协议在不打开 21 端口的情况下下载文件？

> ID：14484544
> 
> 赞同：1
> 
> 时间：2013-01-23T16:31:07.833
> 
> 标签：ftp, scp, winscp

有没有办法在不打开端口 21 或任何其他端口的情况下使用 SCP 下载文件。我对 SCP 不太了解。如果我可以在不打开端口的情况下以任何方式加载文件获得一些指导。请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:32:31.500

> 有什么方法可以在不打开端口 21 的情况下使用 SCP 下载文件

SSH 服务器可以侦听任何尚未使用的端口

> 或任何其他端口

不

# java - LOAD DATA LOW_PRIORITY 是异步执行的吗？

> ID：14484545
> 
> 赞同：2
> 
> 时间：2013-01-23T16:31:09.380
> 
> 标签：java, mysql, myisam, load-data-infile

我希望`LOAD DATA LOW_PRIORITY INFILE`从 Java 执行语句。

我只处理 MyISAM 引擎。

我很感兴趣是否`statement.execute("LOAD DATA LOW_PRIORITY INFILE ...")`会异步执行这个查询，或者它会阻塞直到这个语句完成。

我之所以问这个问题，是因为在此语句之后我有基于加载数据的 SQL 操作，但我仍然感兴趣的是，该表上同时执行的任何读取操作都将比`LOAD DATA`语句具有更高的优先级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:37:27.743

`LOAD DATA LOW_PRIORITY INFILE ...`阻塞直到在命令行上完成，所以我假设你的代码也会阻塞。

如果您希望并发事务能够在导入期间从您的表中读取，那么您希望使用该`CONCURRENT`选项而不是`LOW PRIORITY`.

如[手册](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)所述：

> 如果您对满足并发插入条件的 MyISAM 表指定 CONCURRENT（即，它中间不包含空闲块），则其他线程可以在执行 LOAD DATA 时从表中检索数据。

# java - Java 变量未初始化错误

> ID：14484550
> 
> 赞同：0
> 
> 时间：2013-01-23T16:31:19.593
> 
> 标签：java, variables, object, compiler-errors, bufferedreader

我的 Java 程序出现以下错误：

> Java 变量未初始化错误...错误：变量 nam 和 r 未初始化位置类子项

但是已经初始化了`nan`，`r`但我仍然遇到同样的错误。

```
public class cla {
    int rn;
    String name;

    void get(String a, int x) {
        name = a;
        rn = x;
    }

    void display() {
        System.out.println("student name: " + name + "roll no.:" + rn);
    }
}

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class child {
    public static void main(String args[]) throws IOException {
        String nam;
        int r;
        BufferedReader bReader = new BufferedReader(new InputStreamReader(
            System.in));
        try {
            System.out.println("enter name and roll no.");
            nam = bReader.readLine();
            r = Integer.parseInt(bReader.readLine());

        } catch (Exception e) {
        }
        cla c = new cla();
        c.get(nam, r);
        c.display();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:32:55.477

`Local variables`不要得到**默认值**，你应该在使用它们之前初始化它们，初始化`nam`并`r`在你的 main 中使用默认值，你会没事的。

```
public static void main(String args[]) throws IOException{
String nam=null;
int r=0; 
```

顺便说一句，考虑为你的类和变量命名一些有意义的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:38:38.063

在使用它之前初始化你的局部变量，就像上面的例子一样，它必须是 String nam = "" 或者它也可以是 null；诠释 r = 0;

当我们在类中定义任何实例变量时，它们是默认初始化的，例如。int 为 0 但局部变量在使用前需要初始化。

谢谢，布里杰什

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-12T11:58:57.357

根据您正在使用的数据类型，为您的变量赋予 null 或零值始终是一种好习惯。如果你在那里查看你的代码，你会发现你没有告诉变量它们的值，例如你有一个变量 r; 而是让你的整数知道在你开始像这样使用它之前它里面没有任何东西`int r = 0;`。这样，当您使用该变量时，您的 java 程序就会知道它正在覆盖现有值。告诉你的变量他们持有什么是java调用的初始化。在日常活动中使用它，并在编码时查看它。

# google-apps-script - 如何将其解析回 mm/dd/yyyy 格式？

> ID：14484552
> 
> 赞同：2
> 
> 时间：2013-01-23T16:31:29.487
> 
> 标签：google-apps-script

我在 Google 电子表格中有一些日期，我将它们引入到这样的脚本中：

```
 var JCstartDateFix = Math.floor(Date.parse(JCstartDate) / 86400000) + 25570;
  var todaysDateFix = Math.floor(Date.parse(todaysDate) / 86400000) + 25570; 
```

如何在脚本末尾执行与此相反的操作以将其更改回 mm/dd/yyyy 格式的日期？

提前感谢您对此的任何帮助。

这是整个脚本：

```
function projectedDate(JCstartDate, overallPercent, pace, todaysDate, HSstartDate, DaysInHS) {

//converts dates to a number of days
var JCstartDateFix = Math.floor(Date.parse(JCstartDate) / 86400000) + 25570;
var todaysDateFix = Math.floor(Date.parse(todaysDate) / 86400000) + 25570;

//This says that there's no projected date since the student hasn't started high school yet
if(HSstartDate == ""){
  return "HS not started";
}

 //This calculates grad date if the student's been here more than 8 months or if their percent is over 80.
else if(DaysInHS >= 200 || overallPercent >=80){ 
    var percentPerDay = overallPercent/(DaysInHS);
    var daysLeft = (100 - overallPercent) / percentPerDay;

    if((todaysDateFix + daysLeft) > (JCstartDateFix +730)){
      return "You are not on track to complete.";
    }
    else{
      return (todaysDateFix + daysLeft);
    }
  }

 //This calculates grad date if the student's been at JC less than 8 months  
 else{
 if(JCstartDateFix + 600 - pace > JCstartDateFix + 730){
          return "You are not on track to complete.";
       }
      else{
          return (JCstartDateFix+600-pace);
  }

 }
} 
```

我在一所学校工作，那里的学生从不同的时间开始，并按照自己的节奏工作。他们有 2 年的时间来完成。所以这个脚本根据他们开始的时间和他们的进度来估计他们的毕业日期。它使用不同的公式，具体取决于他们在这里的时间。我对电子表格上的日期感到满意，但如果我从电子表格中格式化它们，另一个脚本无法正确提取文本字符串并给出 1969 年的日期。

我认为我需要做的是更改返回数字的行，以便将这些数字格式化为日期。我只是不知道怎么做。再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:49:37.423

只要您在电子表格中设置的值是应用程序脚本中的 Date 对象，它就会显示为日期。当然，格式将受电子表格的控制，但默认为 mm/dd/yyyy。

例如，您可以只更改现有代码以呈现`Date`对象。然后，当您打电话时，`setValue()`您会将日期写入电子表格。

```
var JCstartDateFix = new Date(Math.floor((Date.parse(JCstartDate) / 86400000) + 25570)*86400000); 
var todaysDateFix = new Date(Math.floor((Date.parse(todaysDate) / 86400000) + 25570)*86400000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:58:16.993

你得到的值`Date.parse()`是以毫秒为单位的，你将它除以一天中的毫秒数，所以我猜你得到了自 JS 参考日期以来的天数，四舍五入到最小整数，然后加上一个常数值 25570。
什么结果应该是？

似乎它应该是从参考日期开始的几天，但那是相当遥远的未来！（约 70 岁）这是对的吗？你能澄清一下吗？

无论如何，您应该做的是再次获取以毫秒为单位的值并用于`new Date(value in mSec)`获取日期对象。从那里`Utilities.formatDate`将允许您获得所需的任何显示格式。

参考：[http ://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

[https://developers.google.com/apps-script/class_utilities#formatDate](https://developers.google.com/apps-script/class_utilities#formatDate)

# linux - 配置 Apache Tomcat 以运行 PHP

> ID：14484553
> 
> 赞同：0
> 
> 时间：2013-01-23T16:31:30.843
> 
> 标签：linux, apache

我想从道歉开始。我对 Linux 和服务器领域知之甚少。我在工作中被要求设置一个运行 Apache Tomcat 的 Linux 机器。需要启用服务器以允许 websockets。我设法安装了 Debian。在安装过程中，它让我可以选择将其设置为 Web 服务器，而我做到了。现在文件系统中有一些不同的文件夹和文件被命名为“apache”，所以我的猜测是我实际上正在运行 Apache，但老实说我不是 100% 确定，如果是，我不不知道是不是Tomcat。我摸索了一下，找出了我安装的计算机的 IP 地址，并尝试从网络中的另一台计算机访问该 IP，它工作正常。我能够看到放在主机上 /var/www 文件夹中的 html 文件。然后我出去发现了一段很好的代码，有人很乐意分享，假设是为了测试 websockets 的能力，但我似乎无法让它工作。我的想法是我的服务器不允许 PHP 运行。我通过测试得出了这个结论。我从我的另一台服务器上拿了一个网页，它是用 PHP 编写的，打开时会向我的手机发送一条文本。它只是我用于测试的一小段代码。当我尝试从 Linux 服务器运行它时，它不会运行，这意味着它不会将文本发送到我的手机。所以我在这里。我意识到我在为一个复杂的问题寻求一个简单的解决方案，但可以这么说，我是在枪下。我有大约一周的时间来完成这项工作，所以我只是没有时间以我想要的方式真正沉浸在这些东西中。我的问题最简单的形式是“

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:52:33.897

你试过运行一个简单的 PHP 脚本`echo 'Hello World';`吗？

如果没有，请尝试，如果它有效，则您的 PHP 已启动，但套接字未配置为使用。

如果它不起作用，请安装 Ubuntu，一个简单的 Linux 新手友好界面，然后安装 LAMP，[这里是如何做到的](http://www.lamphowto.com/)。不要惊慌。

# pdf - 无法在 p:media 中显示由 Primefaces 中的流式内容生成的 PDF

> ID：14484555
> 
> 赞同：9
> 
> 时间：2013-01-23T16:31:38.333
> 
> 标签：pdf, jsf-2, primefaces, stream, media

我正在尝试显示在新浏览器窗口中打开的内联 PDF。我有以下情况：

1.  在一些由 ajax 调用的 ActionListen 中，我生成 PDF 内容，将数据放入会话中，并发送要执行的 Javascript（`window.open`打开新页面以显示 PDF）
2.  在打开的页面上，我只有`p:media`标签里面`h:body`的值指向`StreamedContent`：

现在，在那个页面上我的 PDF 没有生成。在日志中我可以看到这两行：

```
org.primefaces.application.PrimeResourceHandler handleResourceRequest
SEVERE: Error in streaming dynamic resource. Expression cannot be null 
```

我开始调试并发现了一些东西。

首先，我在我的bean的`@PostConstruct`方法中添加了断点。`RequestScoped`有趣的是，断点到达了两次，在完美显示 PDF 之后，我大吃一惊？！

经过一些调试后，`PrimeResourceHandler`我发现在某些情况下`ValueExpression`没有计算，实际上它会抛出`NullPointerException`，并且在调试时我再次看到发送了两个请求，第二个请求失败，因为`dynamicContentId`在第一个请求中被删除，第二个调用`handleResourceRequest`没有有道理。

通过 Firebug，我可以看到两个请求，第一个是 PDF 数据，第二个也是内容类型 application/pdf 但为空，大小为 0。

xhtml页面：

```
<html>
  <h:head></h:head>
  <h:body>
    <p:media value="#{reportBean.streamedContent}" player="pdf" width="500" height="500"/>
  </h:body>
</html> 
```

后备豆：

```
@RequestScoped
public class StampaListeBackingBean implements Serializable {

    private static final long serialVersionUID = 1L;

    private StreamedContent streamedContent;

    @PostConstruct
    public void init() {
        Map<String, Object> session = FacesContext.getCurrentInstance().getExternalContext().getSessionMap();
        byte[] b = (byte[]) session.get("reportBytes");
        if (b != null) {
            streamedContent = new DefaultStreamedContent(new ByteArrayInputStream(b), "application/pdf");
        }
    }

    public StreamedContent getStreamedContent() {
        if (FacesContext.getCurrentInstance().getRenderResponse()) {
            return new DefaultStreamedContent();
        } else {
            return streamedContent;
        }
}

    public void setStreamedContent(StreamedContent streamedContent) {
        this.streamedContent = streamedContent;
    }
} 
```

我需要了解为什么在带有`p:media`标签的页面上发送两个请求，并弄清楚如何使其工作。支持 bean 是请求范围的，它`StreamedContent`在`@PostConstruct`方法中创建，并具有该字段的 getter 和 setter。Primefaces 版本是 3.4.2，Mojarra 是 2.1.14。

**添加：**

很容易重现我的问题。如果`init`方法中的代码替换为以下内容：

```
FileInputStream fis = new FileInputStream(new File("C:\\samplexxx.pdf"));
streamedContent = new DefaultStreamedContent(fis, "application/pdf"); 
```

问题可以重现。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T20:52:28.533

我可以重现你的问题。它确实在 Firefox 中不起作用（在 IE9 中也不起作用，但它在 Chrome 中起作用）。PrimeFaces 的负责人 Cagatay 也曾[多次](http://forum.primefaces.org/viewtopic.php?f=3&t=26622)提到这一点。

我不确定这是否是 PrimeFaces 资源处理程序或浏览器中的错误。我会把它放在中间。

同时，你最好的选择是一个简单的[web servlet](https://stackoverflow.com/tags/servlets/info)来完成这项工作。只需创建此类：

```
@WebServlet("/report.pdf")
public class PdfReportServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        byte[] content = (byte[]) request.getSession().getAttribute("reportBytes");
        response.setContentType("application/pdf");
        response.setContentLength(content.length);
        response.getOutputStream().write(content);
    }

} 
```

并按如下方式调用它：

```
<p:media value="/report.pdf" ... /> 
```

而已。无需 XML 配置。它适用于所有浏览器。根据功能要求，您可能需要进一步微调与浏览器缓存相关的响应标头。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-17T06:13:50.277

这不是浏览器或 primefaces 问题，只是一个有趣的 getter 问题。

getter 被 p:media 调用两次（或者如果您刷新页面多次），但只有第一次调用获得正确的数据。StreamedContent 封装了一个 InputStream，它的属性是如果流位于文件末尾，它将不提供任何字节。第一次读到它的结尾（数据没问题），但每次下一次调用都不会得到数据。:)

[inputStream.read() 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28byte%5B%5D%29)： *如果由于流在文件末尾而没有可用的字节，则返回值 -1；否则，至少读取一个字节并将其存储到 b 中。*

**解决方案**：

```
 private StreamedContent streamedContent;
            private InputStream stream;

            public void somewhere(){
                byte[] b = ...
                stream = new ByteArrayInputStream( b );
                stream.mark(0); //remember to this position!
                streamedContent = new DefaultStreamedContent(stream, "application/pdf");
            }

            public StreamedContent getStreamedContent() {
                if (streamedContent != null)
                    streamedContent.getStream().reset(); //reset stream to the start position!
                return streamedContent;
            } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-02T00:04:14.053

我希望我的一点贡献可以帮助任何无法在 Firefox 中显示 pdf 预览的人。我使用的是 Primefaces 6 + Spring，我遇到了同样的问题，但可能不是出于同样的原因。事实上，我尝试了 Balus C 提出的解决方案。它帮助我在 Chrome 和 IE11 中显示 pdf，但它仍然无法在 Firefox 52 中运行。

我注意到 Firefox 控制台中出现错误：X-Frame-Options 拒绝加载：[http://localhost:8080/myapp/](http://localhost:8080/myapp/)不允许框架

就我而言，这是因为 spring-security 配置和解决方案是以这种方式编辑 spring-context.xml ：

```
<sec:http ...>
...
<sec:headers>        		
         <sec:frame-options policy="SAMEORIGIN" />
</sec:headers>
...
</sec:http>
```

# java - 创建新类型日期时出错

> ID：14484557
> 
> 赞同：2
> 
> 时间：2013-01-23T16:31:44.027
> 
> 标签：java, date, type-conversion

我正在使用以下约定，并且在日期我得到该方法已弃用（有一行删除日期）看到此消息已弃用。从 JDK 版本 1.1 开始，由`DateFormat.parse(String s)`.

我应该如何在下面的代码中使用它？

```
else if (typeName.equals("String")) {
    return new SwitchInputType<String>(new String("String test"));
}
else if (typeName.equals("Date")) {
    return new SwitchInputType<Date>(new -Date-("13:20:00"));   
} 
```

问题在于`(new Date("13:20:00"));`

当我尝试将其替换为

```
return new SwitchInputType<DateFormat>(new DateFormat("13:20:00")); 
```

我收到以下消息：

> 无法实例化类型 DateFormat

我应该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:33:40.263

`DateFormat`是一个抽象类，所以它不能被实例化。实例化 a`SimpleDateFormat`或使用`DateFormat`like`getDateInstance()`或中的静态方法`getTimeInstance()`。

# java - 如何在java中查找字符数组中是否存在元素

> ID：14484558
> 
> 赞同：0
> 
> 时间：2013-01-23T16:31:45.333
> 
> 标签：java, arrays

事情就是这样。我有一个字符数组如下..

```
char[] modes = new char[] { 'm', 'q', 'h', 'y' }; 
```

现在我想为用户提供输入字符的选项。如果它存在于`modes`数组中，我会做必要的。为此，我使用...

```
//to take a character as input
mode = input.next().charAt(0);
//now to check if the array contains the character
boolean ifExists = Arrays.asList(modes).contains(mode); 
```

却诡异`ifExists`归来`false`。

1.  任何想法我在哪里做错了？
2.  如果这是一种不好的方法，请提出一种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:37:06.997

我认为这是自动装箱 - contains() 方法采用对象，而不是原语。

如果您使用 Character 而不是 char 它将起作用：

```
 Character[] modes = new Character[] { 'm', 'q', 'h', 'y' };

    //to take a character as input
    Character mode = "q123".charAt(0);
    //now to check if the array contains the character
    boolean ifExists = Arrays.asList(modes).contains(mode); 
```

返回真

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T16:40:30.723

Arrays.asList() 方法返回一个 char[] 列表，而不是您期望的 char 列表。我建议使用 Arrays.binarySort() 方法，如下所示：

```
 char[] modes = new char[] { 'm', 'q', 'h', 'y' };

    char mode = 'q';

    //now to check if the array contains the character
    int index = Arrays.binarySearch(modes, mode);
    boolean ifExists = index != -1;
    System.out.print(ifExists); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T16:41:19.100

我没有发现你的代码有任何问题，试试这个，

**如果您使用这种Colletions，那么您可以使用默认可用的方法进行大量操作......**

```
List<Character> l = new ArrayList<Character>();
l.add('a');
l.add('b');
l.add('c');
System.out.println(l.contains('a')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T16:43:54.673

您可以只转换为字符串，然后运行[包含](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)

```
new String(modes).contains("" + mode); 
```

然后，这应该为您的原始数组返回 true 或 false

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-03T12:19:02.823

您还可以使用字符串 indexOf：

```
boolean ifExists = new String(modes).indexOf(mode) >= 0; 
```

或者

```
boolean ifExists = "mqhy".indexOf(mode) >= 0; 
```

# java - 如何使用转发服务在 DCM4CHEE 上转发患者当前和之前的研究？

> ID：14484561
> 
> 赞同：0
> 
> 时间：2013-01-23T16:31:49.347
> 
> 标签：java, xslt

我正在寻找是否有人可以将我指向一个 XSL 脚本示例以实现以下目标：每当一项新研究被推送到 dcm4chee 实例时，该实例应将该研究和来自同一患者的所有先前研究转发到另一个 dcm4chee 实例。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:18:02.597

在 server/default/conf/dcm4chee-ae 目录下有一些关于如何使用 foward2 服务的示例。要启用以前的研究，只需要具有以下属性的目标标签：

```
<destination aet="KPServer" includePrior="true"/> 
```

和对应的 forward_priors.xsl 文件。您可以使用示例中给出的那个。

# java - 散列值列表的算法，然后检查值是否在该列表中

> ID：14484566
> 
> 赞同：3
> 
> 时间：2013-01-23T16:31:57.803
> 
> 标签：java, algorithm, web-services

我正在开发一组服务和一个客户端 JAR 文件，该文件旨在成为调用这些服务的唯一方式。客户端 JAR 将被多个应用程序使用（都是内部的）。但是，我们希望某些服务可以用于某些客户端应用程序，而不能用于其他应用程序。

我正在尝试不同的方法来实现这个目标，但一种方法是给每个应用程序一个“上下文”值以在运行时传递。此值将表示允许该客户端应用程序的服务列表，并且服务将能够快速计算它是否在该列表中。

每个服务都有自己的 ID 值，可能作为`static final`变量硬编码到 Java 类中。对于每个客户端应用程序，我会汇总一个允许的服务列表，可能使用 Groovy 脚本或非常基本的 Web 应用程序。一些基于反射的代码将收集所有这些 ID 值，并生成一个代表它们的哈希值。

我会将这个“上下文”哈希与客户端 JAR 一起提供给客户端应用程序所有者，他们会在调用服务时在运行时将其传回。该服务将使用相同（或相关）的散列算法来快速检查其 ID 是否包含在散列中。如果是，则服务继续。如果不是，它会抛出异常。这种方法显然不能防止*故意*滥用，但这些都是内部服务，我们只需要阻止疏忽的滥用。

我不确定要使用哪种散列算法（或者“散列”是否是正确的词）。我可以将所有允许的 ID 收集为`String`，然后检查给定的 ID 是否包含在该字符串中。但是，“上下文”值将是巨大且笨重的。我确信有标准的数学方法可以散列值列表，然后检查给定的原始值是否在该列表中。可能有些已经被整齐地打包并暴露在 Java 世界中。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:43:14.033

我会建议您实施权限并只允许那些具有所需权限的应用程序。

有关详细信息，请阅读有关 android 权限的详细主题：

[http://developer.android.com/guide/topics/security/permissions.html](http://developer.android.com/guide/topics/security/permissions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:41:14.123

我认为您正在查看的是将压缩的平面文件/XML 传递给服务。该服务会将文件内容（解压缩后）读入 a`HashSet`并检查其*id*是否存在于`HashSet`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T17:42:33.647

您可以使用[哈希表](http://en.wikipedia.org/wiki/Hash_table)。我认为它甚至在[标准库](http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html)中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T21:02:49.340

您将收到的这些 ID 的范围是什么？

您应该使用哈希表，但如果这些 ID 在相对较小的范围内（相对于您的系统内存），您可以创建最简单的哈希表。

如果这些 ID 在 n 和 n+m 之内，则创建一个大小为 m 的数组并将每个元素设置为 FALSE。对于要添加的每个 ID，将 array[ID - n] 设置为 TRUE。要检查是否已传入 ID，只需检查 if (array[ID - n])

# c# - 在任意位置的两个分隔符之间获取子字符串

> ID：14484567
> 
> 赞同：5
> 
> 时间：2013-01-23T16:31:58.317
> 
> 标签：c#, .net, regex, linq

我有以下字符串：

```
string source = "Test/Company/Business/Department/Logs.tvs/v1"; 
```

`/`字符是字符串中各个元素之间的分隔符。我需要获取字符串的最后两个元素。为此，我有以下代码。这工作正常。有没有更快/更简单的代码？

**代码**

```
 static void Main()
    {
        string component = String.Empty;
        string version = String.Empty;
        string source = "Test/Company/Business/Department/Logs.tvs/v1";
        if (!String.IsNullOrEmpty(source))
        {
            String[] partsOfSource = source.Split('/');
            if (partsOfSource != null)
            {
                if (partsOfSource.Length > 2)
                {
                    component = partsOfSource[partsOfSource.Length - 2];
                }

                if (partsOfSource.Length > 1)
                {
                    version = partsOfSource[partsOfSource.Length - 1];
                }
            }
        }

        Console.WriteLine(component);
        Console.WriteLine(version);
        Console.Read();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:40:23.410

为什么没有正则表达式？这个相当简单：

```
.*/(?<component>.*)/(?<version>.*)$ 
```

您甚至可以标记您的组，以便为​​您的匹配做所有您需要做的就是：

```
component = myMatch.Groups["component"];
version = myMatch.Groups["version"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T16:41:18.210

以下*应该*更快，因为它只扫描尽可能多的字符串以找到两个`/`并且它不会打扰拆分整个字符串：

```
string component = "";
string version = "";
string source = "Test/Company/Business/Department/Logs.tvs/v1";
int last = source.LastIndexOf('/');
if (last != -1)
{
    int penultimate = source.LastIndexOf('/', last - 1);
    version = source.Substring(last + 1);
    component = source.Substring(penultimate + 1, last - penultimate - 1);
} 
```

也就是说，与所有性能问题一样：配置文件！将这两个与现实生活中的大量输入并排尝试，看看哪个最快。

*（此外，如果输入中没有*斜杠，这将留下空字符串而不是抛出异常......但是如果`source`为空则抛出，我懒惰。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T16:37:29.927

您的代码大部分看起来都很好。有几点需要注意：

1.  `String.Split()`永远不会返回 null，因此您不需要对其进行 null 检查。
2.  ~~如果`source`字符串少于两个`/`字符，您将如何处理？~~（原帖已更新以解决此问题）
3.  如果您的源字符串为空或空（或无效），您真的只想输出空字符串吗？如果您对输入的性质有特定的期望，那么当这些期望未得到满足时，您可能需要考虑快速失败。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T16:41:14.380

鉴于您正在寻找特定索引处的子字符串，您的方法是最合适的方法。在这种情况下执行相同操作的 LINQ 表达式可能不会提高代码或其可读性。

作为参考，这里有一些来自 Microsoft 的关于使用字符串和 LINQ 的重要[信息](http://msdn.microsoft.com/en-us/library/bb397915.aspx)。特别是请参阅[此处](http://msdn.microsoft.com/en-us/library/bb882639.aspx)的文章，该文章涵盖了 LINQ 和 RegEx 的一些示例。

编辑：+1 对于马特在 RegEx 方法中的命名组......这是我见过的最好的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T16:42:38.900

你可以尝试这样的事情，但我怀疑它会快得多。您可以使用 System.Diagnostics.StopWatch 进行一些测量，看看您是否觉得有必要。

```
string source = "Test/Company/Business/Department/Logs.tvs/v1";

int index1 = source.LastIndexOf('/');
string last = source.Substring(index1 + 1);

string substring = source.Substring(0, index1);
int index2 = substring.LastIndexOf('/');
string secondLast = substring.Substring(index2 + 1); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-23T17:31:56.950

我会尝试

```
 string source = "Test/Company/Business/Department/Logs.tvs/v1";

        var components = source.Split('/').Reverse().Take(2);

        String last = string.Empty;

        var enumerable = components as string[] ?? components.ToArray();
        if (enumerable.Count() == 2)
            last = enumerable.FirstOrDefault();
        var secondLast = enumerable.LastOrDefault(); 
```

希望这会有所帮助

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-24T11:20:02.923

您可以使用以下过程检索最后两个单词：

```
string source = "Test/Company/Business/Department/Logs.tvs/v1";

 String[] partsOfSource = source.Split('/');
if(partsOfSourch.length>2)
 for(int i=partsOfSourch.length-2;i<=partsOfSource.length-1;i++)
console.writeline(partsOfSource[i]); 
```

# haskell - 寻找有助于测试 Haskell 实现的标准一致性的资源

> ID：14484569
> 
> 赞同：10
> 
> 时间：2013-01-23T16:32:00.827
> 
> 标签：haskell

我在 haskell.org、haskell-prime wiki 等上浏览了一段时间，但没有找到任何资源，如测试套件或类似的资源，可以检查 Haskell 实现的标准合规性。

有谁知道是否存在这样的资源，并指出我那里？

否则，我想知道如果有人声称他有符合 Haskell-2010 的实施，Haskell Prime Comitee 会怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T17:50:50.573

除了[Haskell 2010](http://www.haskell.org/onlinereport/haskell2010/ "哈斯克尔 2010")和[Haskell98](http://www.haskell.org/onlinereport/ "哈斯克尔 98")的书面标准外，我认为没有“官方测试套件”来保证合规性。如果您正在开发 Haskell 实现，也许您可​​以调整[GHC 测试框架](http://hackage.haskell.org/trac/ghc/wiki/Building "建设 GHC")以满足您的需求。

# java - 带有布尔值的 if 语句 android

> ID：14484574
> 
> 赞同：4
> 
> 时间：2013-01-23T16:32:10.940
> 
> 标签：java, android, eclipse, if-statement, boolean

我整天都在 if 语句中遇到布尔问题，现在它真的开始让我恼火了！！我在这里查看了其他 Android 线程，但解决方案似乎不起作用。

我的代码是这样开始的：

```
public class MainActivity extends Activity 
{
public static boolean isSignedIn = false;       

public final static String USERNAME_MESSAGE = "com.example.libnoise.MESSAGE";
Button btnSignIn;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);       

    btnSignIn = (Button) findViewById(R.id.btnSignIn);
    Intent intent = getIntent();
    String message = intent.getStringExtra(PlayZone.USERNAME_MESSAGE); 

    if(isSignedIn == false))
    {
   btnSignIn.setText("SignIn");
    }
    else
    {       
         btnSignIn.setText(message);
    }        
} 
```

然后我有一个想法使它不像其他语言，我只需要一个“=”符号所以我有它：

```
 if(isSignedIn = false)
    {
   btnSignIn.setText("SignIn");
    }
    else
    {       
         btnSignIn.setText(message);
    } 
```

那没有用，那是我开始上网的时候，在这里找到以前的帖子后，将其更改为以下内容：

```
 if("false".equals(isSignedIn))
    {
   btnSignIn.setText("SignIn");
    }
    else
    {       
         btnSignIn.setText(message);
    } 
```

现在这首先对我来说看起来不正确，但希望它会起作用，但它没有。

由于这是它首先加载的 MainActivity，但是自从我添加了所有这些之后，应用程序在我取出 if 语句时它甚至会在加载之前崩溃，它按预期工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:35:04.680

这

```
if (isSignedIn == false) 
```

是完全正确的。（你也可以写`if (!isSignedIn)`，但这只是风格问题。）

请注意，由于您从不更改 的值`isSignedIn`（至少在您向我们展示的代码中没有更改），因此它将始终为`false`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T16:38:17.603

如果带有布尔值的语句与您在 Java 中的执行方式相同，那么`==`是比较的正确方法

您的代码中的问题是额外的括号

`if (isSignedIn == false)`~~`)`~~

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T16:39:09.360

我想你可以简单地使用

```
if(!isSignedIn)
{
  btnSignIn.setText("SignIn");
}
else
{       
  btnSignIn.setText(message);
} 
```

您遵循的方式也是正确的，除了您在条件中使用了额外的括号外，我没有发现任何错误`if(isSignedIn == false))`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T18:04:30.053

只是为了偏离问题，但指出可能是您的问题，您的空指针可能是因为您正在访问一个可能尚未准备好设置文本的 UI 对象。

虽然某些 API 版本可以很好地处理您正在做的事情，但我发现许多设备/API 组合根本没有准备好从 xml 中的内容到 onStart 进行任何更改。一般的指导是在 onCreate 中加载数据，但直到 onStart才开始*做任何事情。*

# php - 以这种方式使用 eval 是否安全？

> ID：14484579
> 
> 赞同：3
> 
> 时间：2013-01-23T16:32:26.143
> 
> 标签：php, security, eval

假设我有一个名为的文件`query.sql`，其中包含以下内容：

```
SELECT * FROM `users` WHERE `id`!=".$q->Num($_POST['id'])." 
```

在我的 php-script 中，它有一个带有名为“id”的输入的 html 表单，我做了以下技巧：

```
$sql=file_get_contents('query.sql');
$query= eval("return \"$sql\";");
//here follows something like $mysqli->query($query); and so on.. 
```

我**不担心**sql 注入，因为我使用的是准备好的语句并`$q->Num`执行`is_int`检查。但是**以这种方式使用 eval 是否安全？**

据我了解，这里实际评估的是“${_POST['id']}”，它评估为用户输入的某个字符串值。只有当我第二次评估这个字符串时，这才会变得危险。虽然我仅在用户的输入只是字符串时才评估字符串，并且不能被编译器解释为 php 代码，并且不可能进行 php 注入。

**更新** 感谢您提出不同的方法并强调需要使用准备好的语句。但这根本不是我的问题。我的问题都是关于 php-injections 的。这样使用 eval 不好吗？如果是，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:41:10.713

无需使用`eval`- 放入令牌，然后替换它：

```
// file query.sql
SELECT * FROM `users` WHERE `id`!="{id}";

//php
$sql = file_get_contents('query.sql');
$query = str_replace("{id}", $_POST['id'], $sql); 
```

**更新** 不，这不安全。有人可以编辑你的`query.sql`脚本来做任何你想做的事情。您可能会说“该应用程序仅供内部使用”或“我已锁定权限”或其他任何内容 - 但归根结底，没有任何保证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:39:40.940

eval 语句 - 虽然我会尝试找到一种不使用 eval 的方法 - 对于 PHP 注入来说不容易受到攻击，因为`$sql`它包含在双引号中`"`；不能用 PHP 中准备好的变量来结束这个引用。

* * *

> 我不关心 sql-injections 因为我使用的是准备好的语句

你不是吗？;） 你是！

为什么要使用“。”将 $id 添加到查询中。运算符（字符串操作）？如果你**真的使用**准备好的陈述的好处，我会期待像`bindParam()`

请注意准备好的语句**如何**防止 SQL 注入：SQL 查询语法与参数分开。所以服务器会

1.  解析 SQL 查询
2.  应用参数

由于在应用参数之前已经解析了查询，因此查询语法不能被参数操纵。

**如果您准备使用“。”创建的 MySQL 查询。和外部输入，您可能容易受到 SQL 注入的攻击**

**你正在做的事情违背了准备好的陈述的原则**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T16:37:05.610

此答案的参考。

[https://stackoverflow.com/a/951868/627868](https://stackoverflow.com/a/951868/627868)

eval() 的主要问题是：

> **潜在的不安全输入。**传递不受信任的参数是一种失败的方式。确保参数（或其中的一部分）被完全信任通常不是一项简单的任务。
> 
> **狡猾。**使用 eval() 使代码更聪明，因此更难遵循。引用 Brian Kernighan 的话：“首先，调试的难度是编写代码的两倍。因此，如果你尽可能巧妙地编写代码，那么根据定义，你就不够聪明，无法调试它”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T17:33:45.037

让我们考虑以下代码：

```
$sql=file_get_contents('query.sql');
$query= eval("return \"$sql\";"); 
```

此时的危险点是：

*   如果文件按照`query.sql`您的预期进行了修改，那么它可以用于执行程序中的任意代码。

*   文件名显示为硬编码；如果不是这种情况，那么恶意用户可能会找到一种方法来加载意外文件（甚至可能来自远程站点的文件），从而再次导致任意代码执行。

*   为此使用文件（而不是直接在程序中对 SQL 代码进行硬编码）的唯一原因是因为您想将其用作配置文件。这里的问题是这个文件中的语法对于 SQL 和 PHP 都是无效的。由于它在 中运行的方式`eval()`，它还要求语法完全正确。使用错误的报价或错过一个，它会爆炸。这可能会导致脆弱的代码，当配置稍微不正确时，它会严重失败而不是优雅地失败。

这里似乎没有直接的 SQL 注入攻击，但对于`eval()`.

我曾亲自参与过代码存在的项目，这些代码的工作方式几乎与您描述的方式完全相同。直接导致系统中出现了一些非常讨厌的错误，如果不进行大规模重写，就很难纠正这些错误。我强烈建议您放弃这个想法，并按照评论中其他人的建议使用合理的模板机制。

# tomcat - Tomcat 主动被动故障转移

> ID：14484582
> 
> 赞同：1
> 
> 时间：2013-01-23T16:32:28.563
> 
> 标签：tomcat, failovercluster

我正在尝试使用**主动/被动**方法使我的应用程序高度可用。我目前将应用程序部署在 Tomcat 服务器上，该服务器可以托管在 Windows 或 Linux 平台上。

所以，现在我将它部署在两个 Tomcat 服务器上。每个服务器都在单独的机器上运行。我通过 Tomcat 配置将 Tomcat 配置为同一个集群，这给了我会话复制（存储在数据库中）。我使用一些网络服务器/负载平衡器来重定向请求（尚未决定）。

问题是应用程序*不能同时在两个 Tomcat 上运行，*因为它当前是有状态的（而且使其成为无状态的成本太高）。我实际上需要同时只有*一个*Tomcat 启动。或者，至少，Tomcat 上只会启动一个应用程序。

总而言之，我需要一个可以：

1.  通过 HTTP 请求识别应用程序的无效状态（机器/Tomcat 已关闭或应用程序无响应）；
2.  当其他应用程序被识别为无效时，在 Tomcat 上启动 Tomcat 实例或应用程序；
3.  当 Tomcat 被识别为无效时，停止 Tomcat 实例或应用程序。
4.  支持Linux和Windows平台...

该产品可以是在我们的 JVM 上使用的库，它可以是驻留在 Tomcat 机器上并相互通信并与 Tomcat 通信的单独监控进程，它可以使用我们的数据库。它可能使用网络服务器机器...

我搜索了现成的产品（[Pacemaker](http://clusterlabs.org/wiki/Pacemaker) / [CoroSync](http://www.corosync.org/) / [keepalived](http://www.keepalived.org/)），它们都不支持 Windows（据我所知）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T00:20:33.530

我最终做了以下事情：

两个 Tomcat 总是启动。该应用程序也在两个 Tomcat 上启动。

特别`synchronization service`是手写的。该服务是应用程序的一部分，并随着应用程序启动而启动。它负责确定当前处于活动状态的节点以及*应该*处于活动状态的节点。

我的应用程序使用 Spring 上下文来管理我的服务生命周期。我将它分成两个不同的上下文：一个`wrapper`Spring 上下文和一个`child`Spring 上下文。

`wrapper`上下文随着应用程序启动而启动，始终可用并在两个 Tomcat 上工作。同步服务被配置为`wrapper`上下文中的 bean。

`child`上下文实际上包括我的应用程序为外部客户端提供的所有服务。*这*是我指定仅在当前节点处于活动状态时启动并在变为被动时停止的上下文。

**`child`当主动/被动时，上下文是如何打开/关闭的？**

此上下文未在应用程序启动时自动启动。当`synchronization service`得出的结论是当前节点应该变为活动状态时，会引发一个导致`child`上下文启动的事件，从而使该节点上的所有服务都*可用。*反之亦然：当`synchronization service`得出的结论是当前节点应该变得被动时，会引发一个适当的事件，导致`child`上下文关闭，从而使该节点上的所有服务*都不可用。*

添加的另一个重要功能是`interceptor`用于传入请求。到达其中一个 Tomcat 的传入请求实际上意味着负载均衡器/Web 服务器已确定目标节点*是当前可用或首选节点*。在这种情况下，即使目标节点是被动节点，它现在也*应该*成为主动节点。因此，`intercepror`将引发与所做相同的事件`synchronization service`，再次使`child`上下文启动并且该节点上的服务可用（并且`synchronization serivce`两个 Tomcat 上的 s 都标识了开关，并且以前的活动节点将钝化）。

# c# - 仅在 Style.xaml 中通过 Event fire 从 ComboBox 更改 TextBlock Foreground

> ID：14484584
> 
> 赞同：0
> 
> 时间：2013-01-23T16:32:28.343
> 
> 标签：c#, wpf-controls

我有一个没有 .cs 文件的 Style xaml

您可以在下面找到我的代码的一部分。在那里你可以找到`TextBlock`. 当用户执行操作（悬停、单击等）时，我想在那里更改字体颜色。如您所见，有一个 VisualStateManager 处理`Combobox`. 是否可以覆盖 Visual 状态管理器中的前景（例如：如果“单击”则为红色，如果“悬停”则为蓝色）？

我花了很多时间为我的问题找到解决方案，但没有解决方案......

任何人都可以帮助我吗？请注意，该解决方案仅在一个实现的 xaml 文件中，该文件包含我的控件中的所有样式。

```
<Border x:Name="ContentPresenterBorder"
        BorderBrush="Blue">

    <Grid>
        <ToggleButton x:Name="DropDownToggle"
                      HorizontalAlignment="Stretch"
                      Margin="0"
                      Style="{StaticResource comboToggleStyle}"
                      VerticalAlignment="Stretch"
                      BorderThickness="{TemplateBinding BorderThickness}"
                      HorizontalContentAlignment="Right"
                      Background="White"
                      BorderBrush="{x:Null}">
        </ToggleButton>
        <StackPanel Orientation="Horizontal">
            <TextBlock x:Name="TextTextBlock"
                       Text="{TemplateBinding Tag}"
                       FontWeight="Bold"
                       Foreground="White"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Padding="{TemplateBinding Padding}"
                       Effect="{StaticResource MenuDropShadowEffect}"
                       IsHitTestVisible="False">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseEnter">
                                <ei:ChangePropertyAction PropertyName="Foreground">
                                    <ei:ChangePropertyAction.Value>
                                        <SolidColorBrush Color="#FF04A925" />
                                    </ei:ChangePropertyAction.Value>
                                </ei:ChangePropertyAction>
                            </i:EventTrigger>
                            <i:EventTrigger EventName="MouseLeave">
                                <ei:ChangePropertyAction PropertyName="Foreground">
                                    <ei:ChangePropertyAction.Value>
                                        <SolidColorBrush Color="Black"/>
                                    </ei:ChangePropertyAction.Value>
                                </ei:ChangePropertyAction>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
            </TextBlock>

            <Path x:Name="BtnArrow"
                  Stretch="Uniform"
                  Height="4"
                  HorizontalAlignment="Right"
                  Margin="0,0,6,0"
                  Width="8"
                  Fill="White"
                  Data="F1 M 301.14,-189.041L 311.57,-189.041L 306.355,-182.942L 301.14,-189.041 Z "
                  Effect="{StaticResource MenuDropShadowEffect}"
                  IsHitTestVisible="False">
            </Path>

        </StackPanel>
        <ContentPresenter x:Name="ContentPresenter"
                          Visibility="Collapsed" />
    </Grid>

</Border>

<Rectangle x:Name="DisabledVisualElement"
           Fill="White"
           RadiusX="3"
           RadiusY="3"
           IsHitTestVisible="false"
           Opacity="0" />
<Rectangle x:Name="FocusVisualElement"
           Stroke="{x:Null}"
           StrokeThickness="1"
           RadiusX="2"
           RadiusY="2"
           Margin="1"
           IsHitTestVisible="false"
           Opacity="0"
           Fill="{x:Null}" />
<Border x:Name="ValidationErrorElement"
        Visibility="Collapsed"
        BorderBrush="#FFDB000C"
        BorderThickness="1"
        CornerRadius="1">
    <ToolTipService.ToolTip>
        <ToolTip x:Name="validationTooltip"
                 DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                 Template="{StaticResource ValidationToolTipTemplate}"
                 Placement="Right"
                 PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}">
            <ToolTip.Triggers>
                <EventTrigger RoutedEvent="Canvas.Loaded">
                    <BeginStoryboard>
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip"
                                                           Storyboard.TargetProperty="IsHitTestVisible">
                                <DiscreteObjectKeyFrame KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <System:Boolean>true</System:Boolean>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </ToolTip.Triggers>
        </ToolTip>
    </ToolTipService.ToolTip>
    <Grid Height="12"
          HorizontalAlignment="Right"
          Margin="1,-4,-4,0"
          VerticalAlignment="Top"
          Width="12"
          Background="Transparent">

    </Grid>
</Border>
<Popup x:Name="Popup"
       Margin="0,1,0,0">
    <Border x:Name="PopupBorder"
            Height="Auto"
            HorizontalAlignment="Stretch"
            CornerRadius="3"
            BorderBrush="#FFC1C1C1"
            BorderThickness="0,0,1,1">
        <Border.Background>
            <LinearGradientBrush EndPoint="0.5,1"
                                 StartPoint="0.5,0">
                <GradientStop Color="#FFFFFFFF"
                              Offset="0" />
                <GradientStop Color="#FFFEFEFE"
                              Offset="1" />
            </LinearGradientBrush>
        </Border.Background>
        <ScrollViewer x:Name="ScrollViewer"
                      BorderThickness="0"
                      Padding="1">
            <ItemsPresenter />
        </ScrollViewer>
    </Border>
</Popup>

<ContentControl x:Name="HeaderText" Foreground="{TemplateBinding Foreground}" VerticalAlignment="Center" HorizontalAlignment="Center" >
    <ContentPresenter x:Name="contentPresenter"
                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                    Margin="{TemplateBinding Padding}"
                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
        <ContentPresenter.Effect>
            <DropShadowEffect BlurRadius="0"
                                Color="#FF666666"
                                Direction="90"
                                ShadowDepth="1"/>
        </ContentPresenter.Effect>
    </ContentPresenter>
</ContentControl>

<VisualStateManager.VisualStateGroups>

    <VisualStateGroup x:Name="CommonStates">
        <VisualState x:Name="Normal">
            <Storyboard>

            </Storyboard>
        </VisualState>
        <VisualState x:Name="MouseOver" >
            <!--<Storyboard>
                <ColorAnimation 
                    Storyboard.TargetName="HeaderText" 
                    Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" 
                    Duration="0" To="#FF000000"/>
            </Storyboard>-->
            <Storyboard>
                <ColorAnimationUsingKeyFrames BeginTime="00:00:00"
                                            Storyboard.TargetName="Content" 
                                            Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)">
                    <SplineColorKeyFrame KeyTime="00:00:00.4000000" Value="#FFFF0000"/>
                </ColorAnimationUsingKeyFrames>-->

                <!--<ColorAnimation
                    BeginTime="00:00:00"
                    Duration="00:00:00.0010000"
                    From="#FFFFFFFF" To="#FF000000" 
                    Storyboard.TargetName="Content" 
                    Storyboard.TargetProperty="(UIElement.Foreground).Color"                                            
                />-->
                <ColorAnimation
                    BeginTime="00:00:00"
                    Duration="00:00:00.0010000"
                    From="#FFFFFFFF" To="#FF000000" 
                    Storyboard.TargetName="Content" 
                    Storyboard.TargetProperty="(TextBlock.Foreground).Color"                                            
                />
            </Storyboard>
        </VisualState>
        <VisualState x:Name="Disabled">
            <Storyboard>
                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="DisabledVisualElement"
                                               Storyboard.TargetProperty="(UIElement.Opacity)">
                    <SplineDoubleKeyFrame KeyTime="00:00:00"
                                          Value=".55" />
                </DoubleAnimationUsingKeyFrames>
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
    <VisualStateGroup x:Name="FocusStates">
        <VisualState x:Name="Focused">
            <Storyboard>
                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="FocusVisualElement"
                                               Storyboard.TargetProperty="(UIElement.Opacity)">
                    <SplineDoubleKeyFrame KeyTime="00:00:00"
                                          Value="1" />
                </DoubleAnimationUsingKeyFrames>
                <ColorAnimationUsingKeyFrames BeginTime="00:00:00"
                                            Storyboard.TargetName="HeaderText" 
                                            Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)">
                    <SplineColorKeyFrame KeyTime="00:00:00.4000000" Value="#FFFF0000"/>
                </ColorAnimationUsingKeyFrames>
            </Storyboard>
        </VisualState>
        <VisualState x:Name="Unfocused" />
        <VisualState x:Name="FocusedDropDown">
            <Storyboard>

                <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                               Duration="00:00:00.0010000"
                                               Storyboard.TargetName="TextTextBlock"
                                               Storyboard.TargetProperty="(UIElement.Effect).(DropShadowEffect.Direction)">
                    <EasingDoubleKeyFrame KeyTime="00:00:00"
                                          Value="-90" />
                </DoubleAnimationUsingKeyFrames>
                <ColorAnimationUsingKeyFrames BeginTime="00:00:00"
                                              Duration="00:00:00.0010000"
                                              Storyboard.TargetName="TextTextBlock"
                                              Storyboard.TargetProperty="(UIElement.Effect).(DropShadowEffect.Color)">
                    <EasingColorKeyFrame KeyTime="00:00:00"
                                         Value="#FF333333" />
                </ColorAnimationUsingKeyFrames>
                <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                               Duration="00:00:00.0010000"
                                               Storyboard.TargetName="TextTextBlock"
                                               Storyboard.TargetProperty="(UIElement.Effect).(DropShadowEffect.ShadowDepth)">
                    <EasingDoubleKeyFrame KeyTime="00:00:00"
                                          Value="1" />
                </DoubleAnimationUsingKeyFrames>
                <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                               Duration="00:00:00.0010000"
                                               Storyboard.TargetName="TextTextBlock"
                                               Storyboard.TargetProperty="(UIElement.Effect).(DropShadowEffect.BlurRadius)">
                    <EasingDoubleKeyFrame KeyTime="00:00:00"
                                          Value="2" />
                </DoubleAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames Duration="00:00:00"
                                               Storyboard.TargetName="PopupBorder"
                                               Storyboard.TargetProperty="(UIElement.Visibility)">
                    <DiscreteObjectKeyFrame KeyTime="00:00:00">
                        <DiscreteObjectKeyFrame.Value>
                            <Visibility>Visible</Visibility>
                        </DiscreteObjectKeyFrame.Value>
                    </DiscreteObjectKeyFrame>
                </ObjectAnimationUsingKeyFrames>
                <!--<ColorAnimation
                    BeginTime="00:00:00"
                    Duration="00:00:00.0010000"
                    Storyboard.TargetName="Content" 
                    Storyboard.TargetProperty="(UIElement.Foreground).(SolidColorBrush.Color)"
                    From="White" To="Black"                                                                     
                />-->
                <ColorAnimationUsingKeyFrames BeginTime="00:00:00"
                                            Storyboard.TargetName="HeaderText" 
                                            Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)">
                    <SplineColorKeyFrame KeyTime="00:00:00.4000000" Value="#FFFF0000"/>
                </ColorAnimationUsingKeyFrames>
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
    <VisualStateGroup x:Name="ValidationStates">
        <VisualState x:Name="Valid" />
        <VisualState x:Name="InvalidUnfocused">
            <Storyboard>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement"
                                               Storyboard.TargetProperty="Visibility">
                    <DiscreteObjectKeyFrame KeyTime="0">
                        <DiscreteObjectKeyFrame.Value>
                            <Visibility>Visible</Visibility>
                        </DiscreteObjectKeyFrame.Value>
                    </DiscreteObjectKeyFrame>
                </ObjectAnimationUsingKeyFrames>
            </Storyboard>
        </VisualState>
        <VisualState x:Name="InvalidFocused">
            <Storyboard>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement"
                                               Storyboard.TargetProperty="Visibility">
                    <DiscreteObjectKeyFrame KeyTime="0">
                        <DiscreteObjectKeyFrame.Value>
                            <Visibility>Visible</Visibility>
                        </DiscreteObjectKeyFrame.Value>
                    </DiscreteObjectKeyFrame>
                </ObjectAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip"
                                               Storyboard.TargetProperty="IsOpen">
                    <DiscreteObjectKeyFrame KeyTime="0">
                        <DiscreteObjectKeyFrame.Value>
                            <System:Boolean>True</System:Boolean>
                        </DiscreteObjectKeyFrame.Value>
                    </DiscreteObjectKeyFrame>
                </ObjectAnimationUsingKeyFrames>
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:52:48.653

嘿伙计们..我可以自己解决！错误是：

Storyboard.TargetName="Content"... 当然应该指的是“textBlock”...希望对其他人也有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:47:28.307

`<Trigger Property="IsMouseOver" Value="True">`用于鼠标悬停。

[WPF：更改鼠标左键下边框的背景颜色以](https://stackoverflow.com/questions/2208447/wpf-change-background-color-of-border-on-left-mouse-button-down)进行鼠标单击

# c - 这个排序算法的大 O

> ID：14484585
> 
> 赞同：5
> 
> 时间：2013-01-23T16:32:29.403
> 
> 标签：c, arrays, complexity-theory

> **可能重复：**
> [for i 的复杂性是多少：for o = i+1](https://stackoverflow.com/questions/14305869/whats-the-complexity-of-for-i-for-o-i1)

我对长度为 5 的数组执行了以下排序算法：

```
int myarray[5] = {2,4,3,5,1};
    int i;
    for (i = 0; i < 5; i++)
    {
        printf("%d", myarray[i]);

        int j;
        for (j=i+1; j < 5; j++) 
        {
            int tmp = myarray[i];
            if (myarray[i] > myarray[j]) {
                tmp = myarray[i];
                myarray[i] = myarray[j];
                myarray[j] = tmp;
            }
        }
    } 
```

我相信这种排序算法的复杂性是`O(n*n)`因为您将每个元素与其他元素进行比较。但是，我也注意到，每次我们在外循环中创建时，我们都不会与所有其余部分进行比较，而是与其余部分进行比较 - i。复杂度会是多少？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T16:34:25.580

它仍然是`O(n²)`（或`O(n * n)`，如您所写）。在分析计算复杂度时，只有最高阶项很重要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T16:36:06.793

你是对的：
它是 O(1 + 2 + 3... + N)
但在数学上它只是：
= O(n*((n-1)/2))
但这只是：
= O(n^2)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T16:46:04.450

你是对的，它是 O( *n* ² )。

以下是如何计算它。在第一次迭代中，您将查看*n 个*元素；接下来，*n* - 1，依此类推。如果您将该总和的两个副本写入并除以 2，您可以将这些项配对，这样您将第一个副本*n*中的第一项添加到第二个副本 1 的最后一项，依此类推。您最终得到*n + 1 的**n 个*副本，因此总和为*n* * ( *n* + 1) / 2。Big-O 仅区分渐近行为；渐近行为由最高阶项描述，不考虑常数因子，即*n* ²。

 ****n* + ( *n* - 1) + ( *n* - 2) ... + 1
  = 2 * ( *n* + ( *n* - 1) + ( *n* - 2) ... + 1) / 2
  = (( *n* + 1) + ( *n* - 1 + 2) + ( *n* - 2 + 3) + ... + (1 + *n* )) / 2
  = (( *n* + 1) + ( *n* + 1) + ... + ( *n* + 1)) / 2
  = *n* * ( *n* + 1) / 2
  = 1/2 * *n* ² + 1/2 * *n*
  = O( *n* ² )

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T16:34:11.510

这是冒泡排序，它的复杂度确实是 O(n^2)

算法的整个运行时间可以用以下总和来推测：

> n + (n-1) + (n-2) + ... + 1 = n(n+1)/2

由于在渐近分析中只对最高阶项感兴趣，因此复杂度为 O(n^2)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-23T16:34:17.623

大 O 表示法是*渐近*的。这意味着我们忽略了常数因素，例如`- i`. 您的算法的复杂性是`O(N²)`（另请参见[此处](http://en.wikipedia.org/wiki/Bubble_sort#Performance)）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-23T16:36:26.003

对于多个循环

n*m*..no.of 循环

对于上面的代码，在最坏的情况下它的 n*n=n^2

BigOh 表示最大界限。

所以最大复杂度不能大于这个。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-23T16:35:25.487

复杂度是`O(1)`。该`O`符号仅对大输入有意义，其中增加或减少不仅可见，而且相关。

如果你要扩展它，它会是`O(n^2)`，是的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-23T17:08:10.540

对于 i=0，它运行 n 次

i=1 它运行 n-1 次

i=2 它运行 n-2 次 ....

```
 So total Sum = (n) + (n-1) + (n-2) + .... + 1
           sum =  (n*n) - (1 + 2 + ...)
               =  n^2   - 
```

**如此大的 O 复杂度 = O(n^2) { 上限；+ 或 - 被忽略 }*****

# regex - s/// 和 Perl 中的正则表达式

> ID：14484591
> 
> 赞同：0
> 
> 时间：2013-01-23T16:32:38.203
> 
> 标签：regex, perl, operators, substitution

我是 Perl 的新手，我在我的 Apache 安装中找到了这个测试 CGI 脚本，我想知道它的作用，尤其是在这两`s///`行之一中。

```
#!/usr/bin/perl

print "Content-type: text/plain; charset=iso-8859-1\n\n";
foreach $var (sort(keys(%ENV))) {
    $val = $ENV{$var};
    $val =~ s|\n|\\n|g;
    $val =~ s|"|\\"|g;
    print "${var}=\"${val}\"\n";
} 
```

该行用`$val =~ s|\n|\\n|g;`替换每次出现。但为什么？`\n``\\n`

那线呢`$val =~ s|"|\\"|g;`？我认为这是一种替代，但它似乎有一种奇怪的形式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:37:50.587

> 该行用`$val =~ s|\n|\\n|g;`替换每次出现。`\n``\\n`

更准确地说，它用代表新行的通用转义序列替换每个新行。

> 但为什么？

那里是纯粹投机的土地。内容类型是`text/plain`所以没有明显的理由这样做。

> `$val =~ s|"|\\"|g;`线？我认为这是一种替代，但它似乎有一种奇怪的形式。

它替换为在许多上下文中`"`表示 a 的转义序列`"`（但不是纯文本）。同样，从它所呈现的上下文来看，没有明显的理由这样做。

* * *

冒险猜测。看起来它旨在将服务器的环境转储到文本文件中，可以从中复制/粘贴以在其他地方使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:36:29.333

看起来它正试图逃避一些其他级别的评估。即其他东西将需要看到`\n`，但其他东西不会将其`\`视为文字`\`，因此它需要先将其转义，`\\`. 对于`"`. 其他东西需要将其作为文字转义，即 ， `\"`并且它首先需要确保将`\`保留为文字`\`via `\\`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:37:31.413

您对第一个替换的解释是正确的。第二个替换类似：它将每次出现的替换`"`为`\"`。

# java - 在使用 cxf:jaxws-client 时将 soap:encodingStyle 属性添加到 soap:body

> ID：14484596
> 
> 赞同：0
> 
> 时间：2013-01-23T16:32:59.343
> 
> 标签：java, soap, jax-ws, cxf, mule

我正在从我的 mule 流中访问 rpc/literal 样式的 web 服务。

wsdl 的绑定部分如下所示：

```
<binding name="AppWebServiceBinding" type="interface:AppWebService">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"   />
    <operation name="submitApplication">
        <soap:operation soapAction="" style="rpc"  />
        <input name="submitApplicationRequest"  >
            <soap:body
                encodingStyle="http://xml.apache.org/xml-soap/literalxml"
                namespace="http://tempuri.org/fsg.ejb.webservice.AppWebService"
                parts="ele" use="literal" type="soap:tBody"  />
        </input>
        <output name="submitApplicationResponse">
            <soap:body
                encodingStyle="http://xml.apache.org/xml-soap/literalxml"
                namespace="http://tempuri.org/fsg.ejb.webservice.AppWebService" use="literal"/>
        </output>
    </operation>
</binding> 
```

然后我将 expectedobject 传递给带有 cxf:jaxws-client 的 http:outbound

```
 <http:outbound-endpoint exchange-pattern="request-response"
        address="http://serviceapp:9080/service_war/servlet/rpcrouter"   
        doc:name="Generic">
        <cxf:jaxws-client clientClass="com.fsg.generated.AppWebServiceService"
            wsdlLocation="com/fsg/generated/AppWebServiceService.wsdl"              
            operation="submitApplication"   port="AppWebServicePort"                 
            doc:name="SOAP">                
            <cxf:inInterceptors  >
            <spring:bean id="inLogger" 
                class="org.apache.cxf.interceptor.LoggingInInterceptor" />                  
            </cxf:inInterceptors>
            <cxf:outInterceptors>
            <spring:bean id="outLogger"
                class="org.apache.cxf.interceptor.LoggingOutInterceptor" />
        </cxf:outInterceptors>              
        </cxf:jaxws-client>
    </http:outbound-endpoint> 
```

但是，当我查看日志以查看发送到出站的消息时，我看不到其中的 soap:encodingStyle 属性。这导致了问题，因为没有此服务无法处理消息。

下面给出的是我可以在日志中看到的出站消息。

```
 Outbound Message
---------------------------
ID: 1
Address: http://serviceapp:9080/service_war/servlet/rpcrouter
Encoding: UTF-8
Content-Type: text/xml
Headers: {SOAPAction=[""]}
Payload: <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Header>
<mule:header xmlns:mule="http://www.muleumo.org/providers/soap/1.0">
<mule:MULE_CORRELATION_ID>dfd31e6c-6575-11e2-9b8a-b1b06bd39882</mule:MULE_CORRELATION_ID>   <mule:MULE_CORRELATION_GROUP_SIZE>-1</mule:MULE_CORRELATION_GROUP_SIZE>
<mule:MULE_CORRELATION_SEQUENCE>-1</mule:MULE_CORRELATION_SEQUENCE>
</mule:header>
</soap:Header>
<soap:Body>
<ns1:submitApplication xmlns:ns1="http://tempuri.org/fsg.ejb.webservice.AppWebService">
<ele>
<MyApp xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://mysample.org">  
  <UserAuth>  ............ 
```

可以看出，命名空间是从 wsdl 中选择的，而不是从 encodingStyle 中选择的。

预期输出为

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Header>
<mule:header xmlns:mule="http://www.muleumo.org/providers/soap/1.0">
.......
</mule:header>
</soap:Header>
<soap:Body>
<ns1:submitApplication xmlns:ns1="http://tempuri.org/fsg.ejb.webservice.AppWebService"  soap:encodingStyle="http://xml.apache.org/xml-soap/literalxml" >
<ele>
<MyApp xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://mysample.org">  
  <UserAuth>  ............ 
```

如何在其中设置soap:encodingStyle 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:42:37.513

我可以看到它不起作用。也许您可以尝试使用 XSLT 转换器将编码样式添加到输入中，然后对其进行处理。这只是一种解决方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T01:54:41.510

我认为您的问题是 encodingStyle 属性信息不能出现在 body 元素中，只能出现在子元素中。

# android - 一些 GSM 设备在 Android 上因 CDMA SignalStrength 错误而崩溃

> ID：14484599
> 
> 赞同：1
> 
> 时间：2013-01-23T16:33:09.827
> 
> 标签：android, gsm, telephony, telephonymanager, lte

我的 Android 应用程序监控蜂窝信号强度。在 CDMA 设备上，它可以正常工作。在*许多*GSM 设备上，它可以正常工作。但是，在*某些*GSM 设备上，我会强制关闭并显示以下错误消息：

**java.lang.ClassCastException: android.telephony.cdma.CdmaCellLocation 不能转换为 android.telephony.gsm.GsmCellLocation**

我相当肯定美国的某些三星设备在接收到 4G LTE 信号时会出现此问题；我相信它也会发生在其他设备和国家。我仍在尝试确定所涉及的确切服务提供商和设备。

这是来自 MyService.java 的相关代码片段；我已将错误消息引用的行标记为`//********`：

```
public void onCreate() {
    tm = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
    ...
}

public int onStartCommand(Intent in, int flags, int startId) {
    signalStrengthListener = new SignalStrengthListener();
    ((TelephonyManager)getSystemService(TELEPHONY_SERVICE)).listen(signalStrengthListener, SignalStrengthListener.LISTEN_SIGNAL_STRENGTHS | SignalStrengthListener.LISTEN_SERVICE_STATE | SignalStrengthListener.LISTEN_DATA_CONNECTION_STATE | SignalStrengthListener.LISTEN_CELL_LOCATION);
    return START_STICKY;
    ...
}

public void onSignalStrengthsChanged(SignalStrength signalStrength) {
    isGSM = signalStrength.isGsm();
    if (isGSM == true) {
        GCellLoc = (GsmCellLocation)tm.getCellLocation();    //********
    ...
} 
```

`android.telephony.cdma`如果仅在`isGSM`返回 true时触发此代码，则不确定为什么会出现任何内容。也许当检测到 LTE 信号时，就 Android API 而言，这会使手机处于某种双 CDMA/GSM 模式？我无法找到任何类似行为的文档。如何在我的代码中处理这个问题？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T16:57:52.583

我无法解释为什么会这样。我有一些理论，但你也有类似的。

当你理清原因时，你可以务实地处理问题。您知道，有时即使您`SignalStrength`在回调中获得 GSM，有时在某些设备上您会从 CDMA`CellLocation`获得`TelephonyManager`并编写代码来处理这种情况，使用`instanceOf`而不是依赖`.isGSM()`于`SignalStrength`.

```
CellLocation cellLoc = tm.getCellLocation();
if(cellLoc instanceof GsmCellLocation) {
   GCellLoc = (GsmCellLocation) cellLoc;
   // do work 
} 
```

# iphone - 如何在没有已知框架的情况下初始化视图？

> ID：14484606
> 
> 赞同：3
> 
> 时间：2013-01-23T16:33:35.817
> 
> 标签：iphone, ios, objective-c, uiview, uiviewcontroller

我正在构建没有`.xib`文件的视图，只是使用`loadView`方法。但是在这一点上，当调用 loadView 时，视图框架仍然是未知的。所以，我只是用它来构建没有具体框架的视图层次结构。（当它的框架已知时，我会更新视图的布局。）问题是：我应该使用`[[UIView alloc] init]`或`[[UIView alloc] initWithFrame:CGRectZero]`可能是其他东西来初始化没有已知框架的视图吗？这是代码：

```
- (void)loadView
{
    UIView *containerView = [[UIView alloc] init];
    // or 
    // UIView *containerView = [[UIView alloc] initWithFrame:CGRectZero];
    // or something else?        

    // ...

    self.view = containerView;
    [containerView release];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T16:36:59.107

`- (id)initWithFrame:`是 的指定初始化程序`UIView`，因此您应该使用它，使用大小为零的矩形。

# javascript - 从网络存储加载带有 HTML 的页面

> ID：14484608
> 
> 赞同：0
> 
> 时间：2013-01-23T16:33:40.127
> 
> 标签：javascript, jquery, ajax, html, local-storage

我正在测试使用本地存储的应用程序的概念，并且需要知道在存储内容后加载内容的最佳方式。

本质上，该应用程序将预取内容，将其存储在本地，然后根据请求在新页面中提供服务。我需要用户能够单击链接 (mysite.com/article1.html)，而不是让浏览器对页面发出 HTTP 请求，只需加载本地存储的 HTML。

那么如何加载“localNews”值而不是为同一页面创建 HTTP 呢？

```
var storeUrl;
var localNews;

$('a').click(function() {
event.preventDefault();
storeUrl = $(this).attr('href');
$.ajax({
    url: storeUrl,
    cache: true,
    crossDomain: true
}).done(function(html) {
    localNews = html;
    console.log(localNews);
    localStorage.setItem('storeUrl', 'localNews');
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:36:26.093

```
 var storeUrl;
    var localNews;

    $('a').click(function(event) {
        event.preventDefault();
        storeUrl = $(this).attr('href');
        if (localStorage.getItem(storeUrl)) {
            //load local
        } else {
            $.ajax({
                url: storeUrl,
                cache: true,
                crossDomain: true
            }).done(function(html) {
                localNews = html;
                console.log(localNews);
                localStorage.setItem(storeUrl, localNews);
            });
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:44:28.277

所以基本上你想通过 Ajax 加载一个本地文件？可以做到，但只需对您的 Ajax 调用做一些小的调整。所以改变这个：

```
$.ajax({
    url: storeUrl,
    cache: true,
    crossDomain: true 
```

对此：

```
$.ajax({
    url: storeUrl,
    cache: true,
    crossDomain: true,
    async: false,
    dataType: 'html',
    contentType: 'text/html;charset=utf-8' 
```

注意`async`和。`datatype`_ `contentType`自从我编写此代码以来已经有一段时间了，但我相信关键参数是and`async`也是必需的。`datatype``contentType`

# javascript - 将本地 JSON 文件加载到变量中

> ID：14484613
> 
> 赞同：139
> 
> 时间：2013-01-23T16:34:04.553
> 
> 标签：javascript, jquery, json

我正在尝试将 .json 文件加载到 javascript 中的变量中，但我无法让它工作。这可能只是一个小错误，但我找不到它。

当我使用这样的静态数据时，一切正常：

```
var json = {
  id: "whatever",
  name: "start",
  children: [{
      "id": "0.9685",
      "name": " contents:queue"
    }, {
      "id": "0.79281",
      "name": " contents:mqq_error"
    }
  }]
} 
```

我将文件中的所有内容都`{}`放在一个`content.json`文件中，并尝试将其加载到本地 JavaScript 变量中，如此处所述：将[json 加载到变量](https://stackoverflow.com/questions/2177548/load-json-into-variable)中。

```
var json = (function() {
  var json = null;
  $.ajax({
    'async': false,
    'global': false,
    'url': "/content.json",
    'dataType': "json",
    'success': function(data) {
      json = data;
    }
  });
  return json;
})(); 
```

我用 Chrome 调试器运行它，它总是告诉我变量的值`json`是`null`. 该`content.json`文件与调用它的 .js 文件位于同一目录中。

我错过了什么？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-08-05T14:24:32.427

[正如这里](https://stackoverflow.com/questions/7346563/loading-local-json-file/18060563#18060563)所回答的，我的解决方案是使用：

```
 var json = require('./data.json'); //with path 
```

该文件仅加载一次，进一步的请求使用缓存。

**编辑**为了避免缓存，这是评论中给出的[这篇博](https://goenning.net/2016/04/14/stop-reading-json-files-with-require/)文的帮助函数，使用`fs`模块：

```
var readJson = (path, cb) => {
  fs.readFile(require.resolve(path), (err, data) => {
    if (err)
      cb(err)
    else
      cb(null, JSON.parse(data))
  })
} 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2018-05-26T06:38:23.047

对于 ES6/ES2015，您可以像这样直接**导入**：

```
// example.json
{
    "name": "testing"
}

// ES6/ES2015
// app.js
import * as data from './example.json';
const {name} = data;
console.log(name); // output 'testing' 
```

如果你使用 Typescript，你可以像这样声明 json 模块：

```
// tying.d.ts
declare module "*.json" {
    const value: any;
    export default value;
} 
```

从 Typescript 2.9+ 开始，您可以在中添加[--resolveJsonModule](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-9.html#new---resolvejsonmodule) compilerOptions`tsconfig.json`

```
{
  "compilerOptions": {
    "target": "es5",
     ...
    "resolveJsonModule": true,
     ...
  },
  ...
} 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-01-23T16:43:39.870

如果您将对象`content.json`直接粘贴到其中，则它是无效的 JSON。JSON 键**和**值必须用双引号 ( `"`not `'`) 括起来，除非值是数字、布尔值`null`或复合（数组或对象）。JSON 不能包含函数或`undefined`值。以下是您作为有效 JSON 的对象。

```
{
  "id": "whatever",
  "name": "start",
  "children": [
    {
      "id": "0.9685",
      "name": " contents:queue"
    },
    {
      "id": "0.79281",
      "name": " contents:mqq_error"
    }
  ]
} 
```

你还有一个额外的`}`.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2021-01-27T16:04:09.203

没有 require 或 fs 的解决方案：

```
var json = []
fetch('./content.json').then(response => json = response.json()) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-11-27T14:49:11.857

内置的[node.js 模块 fs](https://www.w3schools.com/nodejs/nodejs_filesystem.asp)将根据您的需要异步或同步执行此操作。

您可以使用加载它`var fs = require('fs');`

## 异步

```
fs.readFile('./content.json', (err, data) => {
    if (err)
      console.log(err);
    else {
      var json = JSON.parse(data);
    //your code using json object
    }
}) 
```

## 同步

```
var json = JSON.parse(fs.readFileSync('./content.json').toString()); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-01-23T16:38:39.550

有两个可能的问题：

1.  AJAX 是异步的，因此`json`当您从外部函数返回时将是未定义的。当文件被加载后，回调函数会设置`json`为某个值，但那时，没有人关心了。

    我看到你试图用`'async': false`. 要检查这是否有效，请将此行添加到代码中并检查浏览器的控制台：

    ```
    console.log(['json', json]); 
    ```

2.  路径可能是错误的。使用与在 HTML 文档中加载脚本相同的路径。因此，如果您的脚本是`js/script.js`，请使用`js/content.json`

    一些浏览器可以向您显示他们尝试访问的 URL 以及访问方式（成功/错误代码、HTML 标头等）。检查浏览器的开发工具，看看会发生什么。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-06-10T19:47:44.000

对于文件 ~/my-app/src/db/abc.json 中给定的 json 格式：

```
 [
      {
        "name":"Ankit",
        "id":1
      },
      {
        "name":"Aditi",
        "id":2
      },
      {
        "name":"Avani",
        "id":3
      }
  ] 
```

为了导入到 .js 文件，如 ~/my-app/src/app.js：

```
 const json = require("./db/abc.json");

 class Arena extends React.Component{
   render(){
     return(
       json.map((user)=>
        {
          return(
            <div>{user.name}</div>
          )
        }
       )
      }
    );
   }
 }

 export default Arena; 
```

输出：

```
Ankit Aditi Avani 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-19T10:56:25.303

要将特定值从 output.json（包含问题共享的 json）文件导出到变量，请说 VAR ：

```
export VAR=$(jq -r '.children.id' output.json) 
```

# json - 在 REST API 请求中使用 Cypher (Neo4j)（目标 C）

> ID：14484618
> 
> 赞同：0
> 
> 时间：2013-01-23T16:34:15.660
> 
> 标签：json, neo4j, nsmutableurlrequest, http-request

我正在尝试使用 REST API 查询我的 Neo4j 数据库。

到目前为止，我没有使用 Cypher 查询语言来检索数据，但现在我需要获取按“最新”排序的节点，即 unix 时间戳 DESC。

我试图在 HTTP 正文中添加查询，`NSMutableURLRequest`但我只是收到 HTTP 错误`405`。

这是我的代码：

NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@node/%i", EventsManagerDataURL, creatorID]];

```
NSLog(@"Connecting to URL: %@", url);

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];

NSString *jsonMap = @"{'query' : 'start x  = node(4,6,7) return x order by x.datestart,'params' : {}}";
NSData *jsonData = [jsonMap dataUsingEncoding:NSUTF8StringEncoding];

[request setHTTPMethod:@"POST"];

[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", jsonData.length] forHTTPHeaderField:@"Content-Length"];

[request setHTTPBody:jsonData];

[NSURLConnection sendAsynchronousRequest:request queue:[[NSOperationQueue alloc] init] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){

    if (data){
        NSLog(@"%s. Data: %@", _cmd, [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]);
    } else {
        NSLog(@"Error: %@", error.localizedDescription);
    }
}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T17:08:42.640

您在这里缺少单引号：

```
NSString *jsonMap = @"{'query' : 'start x  = node(4,6,7) return x order by x.datestart***'***,'params' : {}}"; 
```

实际上，它需要有双引号：

```
NSString *jsonMap = @"{\"query\" : \"start x  = node(4,6,7) return x order by x.datestart\", \"params\" : {}}"; 
```

使用 cURL 进行测试：

```
curl -H Accept:application/json -H Content-Type:application/json -X POST -d '{"query" : "start x  = node(4,6,7) return x order by x.datestart", "params" : {}}' localhost:7474/db/data/cypher 
```

# c# - DateTime C# MVC 的时间

> ID：14484621
> 
> 赞同：0
> 
> 时间：2013-01-23T16:34:19.537
> 
> 标签：c#, asp.net-mvc-3, linq

我正在尝试将存储为字符串的 24 小时时间格式与当前时间进行比较，如下所示

```
 [AllowAnonymous]
    public ActionResult _ProgOn()
    {
        int i = (int)DateTime.Now.DayOfWeek;
        DateTime dt = DateTime.Now;
        var onNow = db.Programs
         .Where(u => u.PrOk == true)
         .Where(u => u.DaId == i)
         .Where(u => u.TimeOn == dt.ToString("HH:mm")); 
        return PartialView(onNow); 
```

但这似乎不能被 Linq 查询所接受。如果我指出正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:37:40.557

将时间字符串传递给 Linq 查询：

```
 int i = (int)DateTime.Now.DayOfWeek;
    string time = DateTime.Now.ToString("HH:mm");

    var onNow = from u in db.Programs
                where u.PrOk &&
                      u.DaId == i &&
                      u.TimeOn == time
                select u;

    return PartialView(onNow); 
```

此外，您不需要将布尔值与真/假进行比较。而且我认为查询语法在这里看起来更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:38:48.837

Linq 将只能使用它可以翻译的内容。尝试将 a 转换为`DateTime`a `string`，然后进行比较：

```
[AllowAnonymous]
public ActionResult _ProgOn()
{
    string t =  dt.ToString("HH:mm");

    int i = (int)DateTime.Now.DayOfWeek;
    DateTime dt = DateTime.Now;
    var onNow = db.Programs
     .Where(u => u.PrOk == true)
     .Where(u => u.DaId == i)
     .Where(u => u.TimeOn == t); 
    return PartialView(onNow); 
```

# asp.net - pages_Roles 表中的错误条目

> ID：14484624
> 
> 赞同：1
> 
> 时间：2013-01-23T16:34:21.027
> 
> 标签：asp.net, asp.net-mvc-4

我使用 Web 应用程序的“Internet 应用程序”模板在 VS12 中创建了一个标准的 ASP.NET MVC 项目。

VS 自动创建了一个名为`aspnet-Authentification-20130123105949.mdf`. 当我打开数据库表时`webpages_Roles`，那里只显示我创建的角色之一。但是这个角色已经不存在了，这里显示的数据似乎已经过时了。

我通过使用添加角色：

```
public String AddRole(String name)
        {
            Roles.CreateRole(name);
            return name + " was added.";
        } 
```

我列出角色的方法显示了与 DB 视图中不同的角色：

```
public String ListRoles()
{
    String[] roles = Roles.GetAllRoles();
    String res = "";
    foreach(String role in roles) {
        res += "\n" + role;
    }
    return res;
} 
```

我已经尝试刷新 DB 视图，但这无济于事。我对自己创建的其他数据库没有任何问题。

# objective-c - 错误的游戏中心红娘外观

> ID：14484630
> 
> 赞同：2
> 
> 时间：2013-01-23T16:34:38.523
> 
> 标签：objective-c, cocos2d-iphone, game-center

我正在为我的游戏开发多人游戏，我遇到了以下问题我正在使用 Cocos 2d 2.1、iOS 6 和以下代码来显示媒人（横向）

```
 AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
    [[GCHelper sharedInstance] findMatchWithMinPlayers:2 maxPlayers:4 viewController:[app navController] delegate:self]; 
```

这就是它的外观![在此处输入图像描述](../Images/c5b211e97cb1fcbbedf39c05bcd2e34a.png)

以下代码用于该功能

```
- (void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers
             viewController:(UIViewController *)viewController
                   delegate:(id<GCHelperDelegate>)theDelegate {

if (!gameCenterAvailable) return;

matchStarted = NO;
self.match = nil;
self.presentingViewController = viewController;
delegate = theDelegate;
[presentingViewController dismissModalViewControllerAnimated:NO];

GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
request.minPlayers = minPlayers;
request.maxPlayers = maxPlayers;

GKMatchmakerViewController *mmvc =
[[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
mmvc.matchmakerDelegate = self;

[presentingViewController presentViewController:mmvc animated:YES completion:nil]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:34:00.113

这段代码在 HelloWorldLayer 中吗？如果是这样，那是导演所说的第一层吗？我有同样的问题，但如果我严格遵循为我创建的 cocos2d 模板，它就可以解决。这意味着我使用 IntroLayer 作为初始层，然后它从那里过渡到 HelloWorldLayer，在那里我拥有游戏中心代码。我认为这与导演加载太晚有关，但我不确定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:11:58.640

当您尝试推送 时会发生这种情况`UIViewController`，但**您的应用程序中只有一个 UIView ，而没有 UIViewController**。让我猜猜，你没有`rootViewController`.

如果您使用`EAGLView`模板工作，则**必须为 UIView 声明一个 UIViewController**。这可以很简单，

```
- (void) applicationDidFinishLaunching:(UIApplication *)application
{
  window.rootViewController = [[UIViewController alloc] init]; 
  window.rootViewController.view = glView; // MUST SET THIS UP,
  // NOW THE EAGLView HAS A UIViewController.

  [glView startAnimation];
} 
```

然后，任何时候你想推动其中一个 GameKit `UIViewControllers`，使用`presentViewController`你的 Window 对象的方法`rootViewController`

例如：

```
[self.window.rootViewController presentViewController:vc animated:TRUE completion:^(void){puts("DONE");} ] ; 
```

错误将消失，窗口将正确形成。

# rest - ASP.NET Web Api 路由自定义

> ID：14484635
> 
> 赞同：13
> 
> 时间：2013-01-23T16:34:50.690
> 
> 标签：rest, asp.net-web-api, wcf-web-api

我有以“Api”后缀结尾的 WebApi 控制器（例如：StudentApiController、InstructorsApiController）。我这样做是为了轻松区分我的 MVC 控制器和 WebApi 控制器。我希望我的 WebApi 路由看起来类似于

**`http://localhost:50009/api/students/5`**而不是`http://localhost:50009/api/studentsapi/5`。

目前为了实现这一目标，我正在设置类似的路线

```
routes.MapHttpRoute(
name: "GetStudents",
routeTemplate: "api/students/{id}",
defaults: new { controller = "StudentsApi", id = RouteParameter.Optional });

routes.MapHttpRoute(
name: "GetInstructors",
routeTemplate: "api/instructors/{id}",
defaults: new { controller = "InstructorsApi", id = RouteParameter.Optional }); 
```

这变得非常麻烦，因为我必须在我的控制器中为每个方法添加一个路由。我希望应该有一种简单的方法来设置路由模板，在处理路由时自动添加“api”后缀控制器名称。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T21:17:47.777

按照@Youssef Moussaoui 的指导，我最终编写了以下解决问题的代码。

```
public class ApiControllerSelector : DefaultHttpControllerSelector
{
    public ApiControllerSelector(HttpConfiguration configuration)
        : base(configuration)
    {
    }

    public override string GetControllerName(HttpRequestMessage request)
    {
        if (request == null)
            throw new ArgumentNullException("request");

        IHttpRouteData routeData = request.GetRouteData();

        if (routeData == null)
            return null;

        // Look up controller in route data
        object controllerName;
        routeData.Values.TryGetValue("controller", out controllerName);

        if (controllerName != null)
            controllerName += "api";

        return (string)controllerName;
    }
} 
```

并在 Global.asax 中注册为

```
GlobalConfiguration.Configuration.Services.Replace(typeof(IHttpControllerSelector),
            new ApiControllerSelector(GlobalConfiguration.Configuration)); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-07T00:27:27.313

现在 ASP.NET Web API 2 已经发布，有一种更简单的方法可以像您建议的那样执行更复杂的路由，方法是使用[属性 routing](http://www.asp.net/web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2)。

在控制器的顶部添加以下属性：

```
[RoutePrefix("api/students")]
public class StudentsApiController : ApiController
{
    ...
} 
```

然后在每个 API 方法之前：

```
[Route("{id}"]
public HttpResponseMessage Get(int id)
{
    ...
} 
```

需要进行一些设置，但是以这种方式进行路由的好处很多。一方面，您可以将路由与执行实际工作的控制器和方法放在一起，因此您永远不会四处寻找是否有正确的路由。其次，更重要的是，执行更复杂的路由要容易得多，例如控制器名称与路由名称不同（如您所愿）或具有非常复杂的模式来匹配。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-23T17:16:58.197

我认为您正在寻找的可扩展点是控制器选择器。您可以创建一个派生自 DefaultHttpControllerSelector 并覆盖 GetControllerName 以去除“api”部分的类。然后，您可以在服务的配置服务中注册此控制器选择器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-17T06:53:45.123

跟随优素福对穆鲁格的回答的评论看起来像这样

```
public class ApiControllerSelector : DefaultHttpControllerSelector
{
    public ApiControllerSelector (HttpConfiguration configuration) : base(configuration) { }

    public override string GetControllerName(HttpRequestMessage request)
    {
        return base.GetControllerName(request) + "api";
    }
} 
```

# php - 使用 PHP 编写 Javascript 警报时的换行符

> ID：14484647
> 
> 赞同：0
> 
> 时间：2013-01-23T16:35:26.953
> 
> 标签：php, javascript

> **可能重复：**
> [将 PHP 字符串传递给 Javascript 变量（并转义换行符）](https://stackoverflow.com/questions/168214/pass-a-php-string-to-a-javascript-variable-and-escape-newlines)

我正在使用 javascript 在 php 页面上进行一些表单验证。它有几个部分，但一个典型的部分如下所示：

```
var brek=document.forms["seasonprice"]["price_brek"].value
if (brek==0)
{
alert("<?php echo $lang["brekzero"] ?>");
return true;
} 
```

$lang['brekzero'] 在包含的语言文件中定义。由于文本相当长，我想将其分成几行以提高可读性。我希望能够通过在适当的位置插入 \n 来做到这一点。相反，它完全停止了警报的工作，我花了很长时间才确定这是原因。

我应该怎么做？

同样的脚本也给我带来了重音字母的问题。在 lang 文件中写入 á 会导致 á 出现在警报中，而不是 á。在 lang 文件中写入 á 会导致警报中出现奇怪的符号。目前我已经采取了非常英式的方式，而忽略了口音！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:39:51.693

您需要转义`\n`字符：

```
echo str_replace("\n", "\\n", $lang["brekzero"]); 
```

# postgresql - 注册并运行 PostgreSQL 9.0 作为 Windows 服务

> ID：14484652
> 
> 赞同：16
> 
> 时间：2013-01-23T16:35:30.227
> 
> 标签：postgresql

有一段时间我让我的数据库在命令窗口上运行，因为我不知道如何将它作为 Windows 服务运行。

因为我下载了 zip 文件版本。如何将 pg_ctl 命令注册为 Windows 服务？

顺便说一句，我使用以下行来启动服务器：

```
"D:/Program Files/PostgreSQL/9.0.4/bin/pg_ctl.exe" -D "D:/Program Files/PostgreSQL/9.0.4/db_data" -l logfile start 
```

提前致谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-23T16:57:00.757

使用程序的`register`参数`pg_ctl`。

数据目录不应存储在 中`Program Files`，例如 的位置`%ProgramData%`是一个不错的选择。

```
pg_ctl.exe register -N PostgreSQL -U some_windows_username -P windows_password -D "%ProgramData%/db_data" ...

```

在较新版本的 Postgres 中，不再需要单独的 Windows 帐户，因此以下内容也足够了

```
pg_ctl.exe 注册 -N PostgreSQL -D "%ProgramData%/db_data" ...

```

详细信息在手册中：[http ://www.postgresql.org/docs/current/static/app-pg-ctl.html](http://www.postgresql.org/docs/current/static/app-pg-ctl.html)

您需要确保该目录对您使用标志`D:/Program Files/PostgreSQL/9.0.4/db_data`指定的 Windows 用户具有正确的权限。`-U`

顺便说一句：将程序数据存储在`Program Files`. 您应该将数据目录移到其他地方，`Program Files`因为`Program Files`对于普通用户来说通常受到高度限制——这是有充分理由的。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-07-02T15:23:35.103

只需以 Windows 管理员身份运行“命令提示符”并运行以下命令：

```
pg_ctl.exe register -N PostgreSQL -D "D:/Program Files/PostgreSQL/9.0.4/db_data" 
```

正如先前的答案所建议的，您不需要指定用户和密码。

# java - 如何使用 Spring MVC 设计通用响应构建器/RESTful Web 服务？

> ID：14484657
> 
> 赞同：9
> 
> 时间：2013-01-23T16:35:52.253
> 
> 标签：java, rest, spring-mvc

尝试使用 Spring MVC 构建 RESTful Web 服务。

控制器应返回特定的 Java 类型，但响应主体必须是通用信封。如何才能做到这一点？

到目前为止，以下代码部分是我所拥有的：

控制器方法：

```
 @Controller
    @RequestMapping(value = "/mycontroller")
    public class MyController {

        public ServiceDetails getServiceDetails() {
             return new ServiceDetails("MyService");
        }
    } 
```

响应信封：

```
 public class Response<T> {

        private String message;
        private T responseBody;

    } 
```

`ServiceDetails`代码：

```
 public class ServiceDetails {

        private String serviceName;

        public ServiceDetails(String serviceName) {
            this.serviceName = serviceName;
        }
    } 
```

对客户的预期最终响应应显示为：

```
 {

     "message" : "Operation OK"
     "responseBody" : {
                        "serviceName" : "MyService"
                      }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:05:27.323

默认情况下，Spring MVC 使用 org.springframework.http.converter.json.MappingJacksonHttpMessageConverter 通过 Jackson 对 JSON 进行序列化/反序列化。

我不确定这是否是个好主意，但解决问题的一种方法是扩展此类，并覆盖 writeInternal 方法：

```
public class CustomMappingJacksonHttpMessageConverter extends MappingJacksonHttpMessageConverter {

    @Override
    protected void writeInternal(Object object, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException {
        super.writeInternal(new Response(object, "Operation OK"), outputMessage);
    }
} 
```

如果您使用 XML 配置，您可以像这样启用自定义转换器：

```
<mvc:annotation-driven>
    <mvc:message-converters>
        <bean class="path.to.CustomMappingJacksonHttpMessageConverter">
    </mvc:message-converters>
</mvc:annotation-driven> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:57:56.843

您可以做的是`MyRestController`将结果包装成`Response`这样：

```
@Controller
@RequestMapping(value = "/mycontroller")
public class MyRestController {

    @Autowired
    private MyController myController;

    @RequestMapping(value = "/details")
    public @ResponseBody Response<ServiceDetails> getServiceDetails() {
         return new Response(myController.getServiceDetails(),"Operation OK");
    }
} 
```

此解决方案使您的原始`MyController`代码独立于您的 REST 代码。看来您需要在类路径中包含 Jackson，以便 Spring 自动神奇地序列化为 JSON（有关详细信息，请参阅[此](http://www.mkyong.com/spring-mvc/spring-3-mvc-and-json-example/)内容）

**编辑**

看来你需要更通用的东西......所以这里有一个建议。

```
@Controller
@RequestMapping(value = "/mycontroller")
public class MyGenericRestController {

    @Autowired
    private MyController myController;

    //this will match all "/myController/*"
    @RequestMapping(value = "/{operation}")
    public @ResponseBody Response getGenericOperation(String @PathVariable operation) {
          Method operationToInvoke = findMethodWithRequestMapping(operation);
          Object responseBody = null;
          try{
               responseBody = operationToInvoke.invoke(myController);
          }catch(Exception e){
               e.printStackTrace();
               return new Response(null,"operation failed");
          }
         return new Response(responseBody ,"Operation OK");
    }

    private Method findMethodWithRequestMapping(String operation){
         //TODO
         //This method will use reflection to find a method annotated
         //@RequestMapping(value=<operation>)
         //in myController
         return ...
    }
} 
```

并保持原来的“myController”几乎原样：

```
@Controller
public class MyController {

    //this method is not expected to be called directly by spring MVC
    @RequestMapping(value = "/details")
    public ServiceDetails getServiceDetails() {
         return new ServiceDetails("MyService");
    }
} 
```

主要问题：@RequestMapping`MyController`可能需要被一些自定义注释替换（并适应`findMethodWithRequestMapping`对此自定义注释执行自省）。

# javascript - 来自 UTC + IANA 时区位置的时间

> ID：14484660
> 
> 赞同：7
> 
> 时间：2013-01-23T16:36:06.860
> 
> 标签：javascript, timezone, momentjs

[我在这里](https://stackoverflow.com/questions/2532729/daylight-saving-time-and-timezone-best-practices)看到了 webapp 处理时间的精彩总结。但是，它并没有明确解决以下情况。我想要一种基于 UTC + 位置（iana 时区位置 - America/New_York）的日期时间在 Web 应用程序中获取本地时间的方法。

我正在寻找一个执行以下计算的库。如果它在 Javascript 中本机工作，那也符合我的目的。

从服务器，检索到以下信息

```
{
  dateTime: "2002-10-27T15:04:05Z" # Time in UTC, no TimeZone info
  userTimeZone: "America/New_York" # based on current user location
} 
```

问题是，考虑到夏令时偏移，我找不到将其转换为位置（纽约）时间的方法。

我不确定在数据库中保存时区偏移是否能解决问题，因为我的用户可能来自不同地区并且可能查看相同的数据。例如，事件发生在东部地区 (EST/EDT) 的某个位置，但太平洋地区的用户可能会根据他们的位置 (8AM - 5PM "America/Los_Angeles" - PST/PDT) 查询数据。

我查看了[Moment.js](http://momentjs.com/docs/)，但找不到解决方案。

***总而言之，我需要一种方法从 UTC + IANA 位置的日期时间输入中获取 Web 浏览器中特定位置的本地时间（考虑夏令时偏移）。***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:41:20.040

**原始答案**

MomentJS 是一个优秀的库，但它专注于解析。您需要[TimezoneJS](https://github.com/mde/timezone-js)，它在 javascript 中实现 Olson 数据库。

您的用例是文档中首先描述的用例之一。

**更新的答案**

有多个库用于在 JavaScript 中进行时区转换，[如此处所列](https://stackoverflow.com/a/15171030/634824)。在最初提出这个问题时，我只知道 TimezoneJS。

既然您询问了 moment.js，您应该使用[moment-timezone](http://momentjs.com/timezone/)插件。（当您最初提出问题时，这不可用。）

```
var x = // your object as written in the question

var m = moment(x.dateTime).tz(x.userTimeZone);

var s = m.format(); // or whatever you want to do 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-18T11:21:47.923

您可以使用以下方法在没有库的情况下实现此目的`toLocaleDateString`：

```
// prints 'Sun, Oct 27, 2002, 10:04 AM EST'
new Date('2002-10-27T15:04:05Z')
.toLocaleDateString('en-US', {
  timeZone:'America/New_York',
  timeZoneName: 'short',
  minute: 'numeric',
  hour: 'numeric',
  weekday: 'short',
  day: 'numeric',
  year: 'numeric',
  month: 'short',
}); 
```

`Intl.DateTimeFormat`以[非常相似](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat)的方式工作。

在 Chrome、Firefox 和 Safari (OSX) 上测试。请注意，[根据 MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString)，时区属性只需要支持 'UTC' 并且完整的 IANA 数据库可能不会在所有浏览器中实现。随时通过其他设置的支持来更新此答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-03T01:26:09.760

MomentJS 的优秀人员创建了另一个名为 Moment Timezone 的库。我认为[这](http://momentjs.com/timezone/docs/#/zone-object/offset/)正是您正在寻找的。具体来说：

```
var zone = moment.tz.zone('America/New_York');
zone.parse(Date.UTC(2012, 2, 19, 8, 30)); // 240 
```

# android - 我添加的铃声在重启时消失了

> ID：14484663
> 
> 赞同：0
> 
> 时间：2013-01-23T16:36:13.533
> 
> 标签：android, add, ringtone

我从原始文件中添加铃声，如下面的代码，它可以工作。添加后，我可以打开 Android 系统铃声列表，它会出现在那里，所以我（或任何其他应用程序）可以使用它。问题是，如果我重新启动手机，那么列表中的那个条目就消失了。那么，有没有办法永久添加铃声呢？谢谢

我使用此代码添加：

```
private void AddRingTone() //I assume that sdcard directory exists and it is empty
{  //We first copy the raw resource to sdcard:
   String sPath = Environment.getExternalStorageDirectory() + "/AnyPath"; //AnyPath already exists.        
   File newSoundFile = new File(sPath, "MyRingtone");
   Uri mUri = Uri.parse("android.resource://" + getPackageName()+ "/" + R.raw.myringtone);
   AssetFileDescriptor soundFile;
   try 
   {  soundFile= getContentResolver().openAssetFileDescriptor(mUri, "r");
   }catch (FileNotFoundException e)
   {  soundFile=null;   
      MessageBox("Cannot open " + mUri.toString());
   }
   try
   {  byte[] readData = new byte[1024];
      FileInputStream fis = soundFile.createInputStream();
      FileOutputStream fos = new FileOutputStream(newSoundFile);
      int i = fis.read(readData);
      while (i != -1)
      { fos.write(readData, 0, i);
        i = fis.read(readData);
      }
      fos.close();
   }catch(IOException io)
   {  MessageBox("RingtoneManager:\n" + io.toString());  
   }

   //Now we add it to the system list:
   ContentValues values = new ContentValues();
   values.put(MediaStore.MediaColumns.DATA, newSoundFile.getAbsolutePath());
   values.put(MediaStore.MediaColumns.TITLE, "my ring tone");
   values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/oog");
   values.put(MediaStore.MediaColumns.SIZE, newSoundFile.length());
   values.put(MediaStore.Audio.Media.ARTIST, "me");
   values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
   values.put(MediaStore.Audio.Media.IS_NOTIFICATION, true);
   values.put(MediaStore.Audio.Media.IS_ALARM, false);
   values.put(MediaStore.Audio.Media.IS_MUSIC, false);
   Uri uri = MediaStore.Audio.Media.getContentUriForPath(newSoundFile.getAbsolutePath());
   Uri newUri = getContentResolver().insert(uri, values); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:55:12.410

它消失的原因，是它没有存放在正确的地方！

Android 密切关注媒体文件的官方位置位于 `/sdcard/media/audio/Ringtones`或中`/sdcard/media/audio/notifications`，以最适合的为准！

Android 对名为的目录知之甚少`AnyPath`，并且媒体扫描仪不会拾取它！

# c# - 是否有类似于 PdfReader 的 WordReader？

> ID：14484666
> 
> 赞同：0
> 
> 时间：2013-01-23T16:36:18.633
> 
> 标签：c#, .net, pdf, ms-word, document

我有加载了预填充信息的 pdf 文件，但希望对 word 文档具有类似的功能。我该怎么做？要访问 pdf 文件，我使用以下代码：

```
PdfReader reader = new PdfReader(Server.MapPath("~/Content/path.pdf"));
MemoryStream newPdf = ModifyPdf(reader);
return File(newPdf.GetBuffer().ToArray(), "application/pdf", Server.UrlEncode("name.pdf")); 
```

ModifyPdf 设置 PdfStamper 和 AcroFields 等。

我当前的文档代码从我的桌面获取一个文件，进行编辑然后另存为一个新文件到我的桌面。如何从项目中的内容文件夹中提取文件，类似于 pdf，进行编辑，然后“下载”以查看类似于 pdf 的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:55:41.920

我不确定是否有任何 WordReader，但您可以使用“Open XML SDK 2.0 for Microsoft Office”来完成您的工作，并且可以从[此处](http://www.microsoft.com/en-us/download/details.aspx?id=5124)下载。有很多关于使用 word 文档工作（打开、更改、保存等）的示例。如果您需要有关 Open XML 的任何帮助，我也可以为您提供代码示例。问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:34:24.970

您还可以使用 COM 互操作来自动执行大部分 Word（和其他 Office 应用程序）功能。

# .net - WinRT 不支持 Assembly.GetCallingAssembly，但适用于可移植类库？

> ID：14484674
> 
> 赞同：8
> 
> 时间：2013-01-23T16:36:29.257
> 
> 标签：.net, reflection, windows-runtime, windows-store-apps, portable-class-library

我需要获取一些关于调用我的组件的程序集的元数据。因此，使用`Assembly.GetCallingAssembly()`似乎是一种天作之合。但是，我发现它在任何地方都可以使用，除了 Windows 应用商店。支持的地方：

*   [手机 7.0+](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.reflection.assembly.getcallingassembly%28v=vs.105%29.aspx)
*   .Net 1.0+
*   [便携式类库](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getcallingassembly.aspx)

但是，不支持它的地方是直接在 Windows 应用商店应用程序中。我可以制作一个可移植的类库，然后在 Windows 应用商店应用程序中从那里调用它，但我不能直接将它放在 Windows 应用商店应用程序/类库中。

是否有这种方法或其他方法来获取由 提供的元数据类型`Assembly`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T15:21:42.880

`Assembly.GetCallingAssembly`没有在 WinRT 中公开 - 据说是因为它的语义在面对内联等（[来源](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1f774a9e-39e0-4f3b-aead-661468465d51/)）时不可靠，但它也不太适合 Windows 应用商店应用程序中允许的受限反射。你可以得到类似的东西`Assembly.GetCurrentAssembly()`，例如：

```
typeof(MainPage).GetTypeInfo().Assembly 
```

但这根本不一样。使用受限反射模型，也无法像在 .NET 中那样在运行时获取堆栈跟踪。

至于可移植类库，我正要说`Assembly.GetCurrentAssembly()`一般可移植类库都支持它，但 WinRT 不支持——如果它根本不在那个平台中，这将是有道理的。但实际上，它似乎存在于包括 WinRT 在内的所有配置文件中，除了 WinRT+.NET4.5 - 似乎这里必须有某种疏忽与这种不一致。因此该方法*存在*于 WinRT 中（而且没有进行重定向），但在编译时可用的元数据中不可见。

因此，您可以使用反射调用该方法：

```
var assembly = (Assembly) typeof(Assembly).GetTypeInfo()
    .GetDeclaredMethod("GetCallingAssembly")
    .Invoke(null, new object[0]); 
```

我认为这种方法在 Windows 应用商店应用程序中的不可见性是“我们希望这会消失”。

（这个答案只涉及“我可以”而不是“我应该”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T16:38:26.943

该方法被取消只是因为它在 WinRT 应用程序中太不可靠了。WinRT 的一个强有力的设计目标是使不同语言运行时环境之间的互操作变得简单且无故障。效果很好，您可以轻松地以 C# 等语言创建 WinRT 组件，并让以 C++ 或 Javascript 等非托管语言编写的应用程序使用它。

这在桌面 .NET 应用程序中也是可能的，但要复杂得多，必须回退到 [ComVisible] 程序集或使用 C++/CLI 语言创建混合模式程序集。在这种情况下使用 Assembly.GetCallingAssembly() 也会失败，但是程序员完全预计会失败，因为他很清楚要做一些特别的事情。

这在 WinRT 组件中变得更加模糊。特别是因为如果调用实际上是从另一个 .NET 程序集发出的，则它不一定会失败。但是当它来自非托管代码时就没有希望了。

如果没有像样的解决方法，这种随机的失败就是彻底的痛苦。因此，该方法被取消。使用 PCL 是一种可能的解决方法，但微软过去曾严厉警告过，这种黑客形式是非常不推荐的。商店验证程序捕获并导致拒绝的可能性非零。

# jquery - 使用选择选项填充输入 = 文本

> ID：14484675
> 
> 赞同：1
> 
> 时间：2013-01-23T16:36:35.160
> 
> 标签：jquery, select, input

我正在尝试使用不同的选择框填写输入表单，例如：

（下面的例子根本不起作用）

[http://jsfiddle.net/K35er/1/](http://jsfiddle.net/K35er/1/) （上面的例子根本不起作用）

但目标是获取输入中的所有值，但格式如下：

```
1/2 R3 
```

其中 1 是 #select ， 2 是 #select2 & R3 是 #select3

这可能吗？？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T16:41:25.683

您需要使用`.val()`来获取所选选项的值。在您`onchange`的处理程序中，您需要以下内容，

```
$(".myselect").change(function () {
    $("#hiddenNOT").val($('#select').val() + '/' + $('#select2').val() + ' ' + $('#selec3').val());
}); 
```

**演示：http:** [//jsfiddle.net/K35er/3/](http://jsfiddle.net/K35er/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:46:35.200

**演示**：http: [//jsfiddle.net/K35er/5/](http://jsfiddle.net/K35er/5/)

HTML

```
<select id="select1">
<option value="1">One</option>
<option value="2">Two</option>
<option value="3">Three</option>    
</select>

<select id="select2">
<option value="1">One</option>
<option value="2">Two</option>
<option value="3">Three</option>    
</select>

<select id="select3">
<option value="1">One</option>
<option value="2">Two</option>
<option value="3">Three</option>    
</select>

<input type='text' id='hiddenNOT' value=''/> 
```

JavaScript

```
$("select").change(function () {
    $("#hiddenNOT").val($('#select1').val() + '/' + $('#select2').val() + ' R' + $('#select3').val());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:48:06.843

```
$("select").change(function () {

    $("#hiddenNOT").val(
           $("#select").val()+'/'+
           $("#select2").val()+'R'+
           $("#selec3").val()
         );
}); 
```

# javascript - 如何用 Canvas 动画绘制曲线？

> ID：14484678
> 
> 赞同：5
> 
> 时间：2013-01-23T16:37:00.010
> 
> 标签：javascript, html, canvas, html5-canvas

我有一堆我想慢慢画的点。我尝试 setTimeOut 和本[教程](http://www.html5canvastutorials.com/advanced/html5-canvas-linear-motion-animation/)的效果。但是没有那么大的成功。

函数看起来像这样

**功能：**

```
var myFunction = function(ctx, grid, points) {
                ctx.beginPath();
                ctx.moveTo(points[0].x, points[0].y);
                ctx.lineWidth = 2;
                ctx.strokeStyle = '#2068A8';
                ctx.fillStyle = '#2068A8';
                var count = 1;
                for (count = 1; count < points.length; count++) {
                    ctx.lineTo(points[count].x , points[count].y);
                }
                ctx.stroke();
            } 
```

围绕这个功能还有许多其他绘图功能，但我只想为其中一个设置动画。

如何用画布慢慢绘制函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T18:41:04.093

有两种方法可以做到这一点，我能想到的。一个基本上是画一个点并在画另一个点之前暂停一段时间。这是我提供的第一个示例。第二种方法涉及将部分线绘制到当前目标，这会提供更平滑的绘制外观。作为一个旁注，我[`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)在这两个示例中都使用了它，这是执行任何类型的画布动画的推荐方法。

```
var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d");

canvas.width = 400;
canvas.height = 200;

var points = [],
    currentPoint = 1,
    nextTime = new Date().getTime()+500,
    pace = 200;

// make some points
for (var i = 0; i < 50; i++) {
    points.push({
        x: i * (canvas.width/50),
        y: 100+Math.sin(i) * 10
    });
}

function draw() {

    if(new Date().getTime() > nextTime){
        nextTime = new Date().getTime() + pace;

        currentPoint++;
        if(currentPoint > points.length){
            currentPoint = 0;
        }
    }
    ctx.clearRect(0,0,canvas.width, canvas.height);
    ctx.beginPath();
    ctx.moveTo(points[0].x, points[0].y);
    ctx.lineWidth = 2;
    ctx.strokeStyle = '#2068A8';
    ctx.fillStyle = '#2068A8';
    for (var p = 1, plen = currentPoint; p < plen; p++) {
        ctx.lineTo(points[p].x, points[p].y);
    }
    ctx.stroke();

    requestAnimFrame(draw);
}

draw(); 
```

**[现场演示](http://jsfiddle.net/ksgk3/1)**

如果您发现这有点不稳定，您可以执行以下操作以绘制更平滑的线条

```
var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d");

canvas.width = 400;
canvas.height = 200;

var points = [],
    currentPoint = 1,
    speed = 2,
    targetX = 0,
    targetY = 0,
    x = 0,
    y = 0;

// make some points
for (var i = 0; i < 50; i++) {
    points.push({
        x: i * (canvas.width/50),
        y: 100+Math.sin(i) * 10
    });
}

// set the initial target and starting point
targetX = points[1].x;
targetY = points[1].y;
x = points[0].x;
y = points[0].y;

function draw() {
    var tx = targetX - x,
        ty = targetY - y,
        dist = Math.sqrt(tx*tx+ty*ty),
        velX = (tx/dist)*speed,
        velY = (ty/dist)*speed;

        x += velX
        y += velY;

    if(dist < 1){
        currentPoint++;

        if(currentPoint >= points.length){
            currentPoint = 1;
            x = points[0].x;
            y = points[0].y;
        }

        targetX = points[currentPoint].x;
        targetY = points[currentPoint].y;
    }

    ctx.clearRect(0,0,canvas.width, canvas.height);
    ctx.beginPath();
    ctx.moveTo(points[0].x, points[0].y);
    ctx.lineWidth = 2;
    ctx.strokeStyle = '#2068A8';
    ctx.fillStyle = '#2068A8';

    for (var p = 0, plen = currentPoint-1; p < plen; p++) {
        ctx.lineTo(points[p].x, points[p].y);
    }
    ctx.lineTo(x, y);    
    ctx.stroke();

    requestAnimFrame(draw);
}

draw(); 
```

**[现场演示](http://jsfiddle.net/loktar/LKSGL/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-11T07:38:00.230

感谢您提供这些示例，Loktar！这应该是对 Loktar 发布的答案中上面第二个示例的评论，但我无法发表评论，因为我刚刚注册并且没有足够的“声誉”。

我尝试了上面的第二个演示，如果你放慢速度，你会注意到新的线段从它应该开始的点之前的点开始增长。这就是我对其进行调整以使其工作的方式：

我更改了以下行：

```
ctx.lineTo(points[p].x, points[p].y); 
// => 
ctx.lineTo(points[p+1].x, points[p+1].y); 
```

现在结果看起来非常顺利。我发表评论是因为 Loktar 的帖子几乎是完美的，我希望人们不要因为需要调整的一个小细节而错过他的帖子。再次感谢，洛克塔！

# c - 读取变量时出错，无法访问地址 X 处的内存

> ID：14484682
> 
> 赞同：3
> 
> 时间：2013-01-23T16:37:11.327
> 
> 标签：c

可能只是 C 新手的另一个愚蠢的指针问题。不过想不出来这个。似乎我的堆栈帧以某种方式损坏了。该作业似乎几乎无关紧要，但它是一个相当基本的 I/O 练习。尝试通过单次读取读取结构数组（不能使用高级 I/O 函数，例如 fread()）。

```
#include "A2_Phase2.h"

void read_directory(Cdir directory[], int cnt) 
{
    int fd;
    char filename[] = "RandomStructDir.bin";

    fd = open(filename, O_RDONLY, S_IRWXU);
    if (fd < 0)
        perror(strcat(filename, " failed to open."));

    if (read(fd, &(directory[0].code[0]), sizeof(Cdir) * cnt) < 0) {
        perror(strcat(filename, " could not be accessed."));
    }

    close(fd);
}

int binary_search(Cdir directory[], char *key, int l, int r) {

    int mid = (int) r / 2;

    if (strncmp(key, directory[mid].code, 3) < 0)
        return binary_search(directory, key, l, mid - 1);
    else if (strncmp(key, directory[mid].code, 3) > 0)
        return binary_search(directory, key, mid + 1, r);
    else
        return mid;
}

int main(int argc, char *argv[]) 
{
    int COUNTRY_COUNT = atoi(argv[1]);
    printf("%d", COUNTRY_COUNT);

    Cdir *directory = (Cdir *) malloc(sizeof(Cdir) * COUNTRY_COUNT);
    read_directory(directory, COUNTRY_COUNT);
    binary_search(directory, "ZWE", 0, 238);
    free(directory);
} 
```

我通过 GDB 收到此错误：

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000000400940 in binary_search (
    directory=<error reading variable: Cannot access memory at address 0x7fffff7feff8>, 
    key=<error reading variable: Cannot access memory at address 0x7fffff7feff0>, l=<error reading variable: Cannot access memory at address 0x7fffff7fefec>, 
    r=<error reading variable: Cannot access memory at address 0x7fffff7fefe8>)
    at A2_Phase2.c:19
19  int binary_search(Cdir directory[], char *key, int l, int r) { 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:41:01.400

```
int COUNTRY_COUNT = atoi(argv[1]); 
```

读取国家的数量作为程序的参数，但您稍后硬编码假设这是`>= 238`您调用时的假设

```
binary_search(directory, "ZWE", 0, 238); 
```

你能试一下吗

```
binary_search(directory, "ZWE", 0, COUNTRY_COUNT-1); 
```

反而？您的函数中还有一些错误`binary_search`可以重写为

```
int binary_search(Cdir directory[], const char *key, int l, int r)
{
    int mid = (r + l) / 2;
    int cmp = strncmp(key, directory[mid].code, 3);
    if (l >= r) {
        if (cmp == 0)
            return l;
        return -1;
    }
    if (cmp < 0) 
        return binary_search(directory, key, l, mid - 1);
    else if (cmp > 0)
        return binary_search(directory, key, mid + 1, r);
    else
        return mid;
} 
```

主要变化是

*   计算`mid`考虑到`l`以及`r`
*   （正如基里连科所指出的）认识到它可能找不到匹配项。在这种情况下返回 -1
*   减少调用次数`strcmp`。非常小，但它使代码对我来说更清晰，并且会提高搜索性能

不太重要的是，有一些文体问题使您的代码难以阅读

*   函数内部大量不必要的空白
*   `COUNTRY_COUNT`对变量使用大写字母（例如）是不常见的。所有大写通常非正式地保留给使用小写或驼峰式的变量定义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:53:31.873

```
int mid = (int) r / 2; 
```

真的吗？我想你会发现这不是中间点。此外，正如在别处指出的那样，如果未找到该值，则不存在终止情况。您需要考虑递归将如何适用于不同的输入，包括无效输入。

我会这样做：

```
int binary_search(Cdir directory[], char *key, int l, int r)
{
    int mid = (l+r) / 2;
    int c = strncmp(key, directory[mid].code, 3);

    if(c == 0) return mid;
    if(l>=r) return -1;

    if (c < 0)
        return binary_search(directory, key, l, mid - 1);

    return binary_search(directory, key, mid + 1, r);
} 
```

还有这个：

```
char filename[] = "RandomStructDir.bin";

fd = open(filename, O_RDONLY, S_IRWXU);
if (fd < 0)
    perror(strcat(filename, " failed to open.")); 
```

`filename[]`是堆栈上的固定长度数组。当发生错误时，您尝试连接到它。这可能只会导致更严重的错误，因为它是未定义的行为 - 你正在破坏堆栈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:41:39.650

在您的递归函数中，如果没有匹配的元素，我看不到任何终止情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-15T08:18:24.643

> 我的堆栈帧已损坏

看起来很像您声明了一个对于堆栈来说太大的变量。代替

```
int largeArray[1000][1000]; 
```

将其声明为指针

```
int *largeArray[1000][1000]; 
```

当然，代码的更改是必要的。

# linux - 抑制 bash 中 telnet 的输出

> ID：14484684
> 
> 赞同：2
> 
> 时间：2013-01-23T16:37:15.623
> 
> 标签：linux, bash, telnet, expect

我正在通过 bash 脚本远程登录到一台机器。一切正常，只是 telnet 会话的输出显示在屏幕上。我想知道如何抑制这种情况。好像找不到合适的地方放`/dev/null`。

我不想运行`script.sh > /dev/null`，因为我需要查看它的其他输出。

```
expect <<EOF
set timeout 20
spawn telnet 0.0.0.0
match_max 100000
expect -exact "Trying 0.0.0.0...\r
Connected to 0.0.0.0.\r
Escape character is '^\]'.\r
\r
User name: "
send -- "user\r"
expect -exact "user\r
\r
Password: "
send -- "pass\r"
expect -exact "pass\r
send -- "commands"
send -- "exit\r"
EOF 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:49:35.150

根据`expect`手册页，该`log_user 0`命令可用于禁用记录到标准输出。这不会将日志记录更改为日志文件。同样，`log_user 1`可用于重新启用标准输出日志记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:43:36.747

您可以使用*netcat* ( `nc`) 代替*telnet*。*Netcat*没有*telnet*显示的额外输出。

# ruby-on-rails - strptime 和 I18n，如何解析当前语言的日期

> ID：14484685
> 
> 赞同：6
> 
> 时间：2013-01-23T16:37:25.717
> 
> 标签：ruby-on-rails, date, localization, internationalization, ruby-on-rails-3.2

我`strptime`用来解析格式`dd/mm/YYYY`格式的日期，但是我只是认为以这种方式简单地解析会破坏 i18n 支持，因为如果我的客户使用不同的语言，我会尝试以我的格式解析它，而我想要它`date.formats.default`在该函数中使用格式。

如何做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-23T21:42:04.360

我以这种方式解决了我的问题：

```
Date.strptime(params[:date], I18n.translate('date.formats.default')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:15:52.217

如果您使用日期或时间，您可以使用 .to_s 应用默认格式

```
Date.today.to_s
Time.now.to_s 
```

# asp.net - Web API Queryable - 如何应用 AutoMapper？

> ID：14484692
> 
> 赞同：30
> 
> 时间：2013-01-23T16:37:37.253
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-web-api

我有一个像这样用 OData 可查询属性装饰的简单 WebApi 方法。

```
 [Queryable]
    public virtual IQueryable<PersonDto> Get()
    {
        return uow.Person().GetAll()); // Currently returns Person instead of PersonD
    } 
```

我想要做的是在 WebAPI 将结果转换为 JSON 之前，使用 AutoMapper 将查询结果从 Person 类型转换为 PersonDto 类型。

有人知道我该怎么做吗？我知道，我可以在 GetAll() 调用之后应用 Mapper.Map，然后再转换回 IQueryable，但这会导致在应用 OData 过滤器之前返回和映射整个表（不好！）。

看起来这个问题[ASP.NET Web API 返回可查询的 DTO？](https://stackoverflow.com/questions/9894369/asp-net-web-api-return-queryable-dtos)涵盖了相同的问题（请参阅第二个响应以获得更好的答案），其中建议使用自定义 MediaTypeFormatter 在链的末尾使用 AutoMapper，但是根据我看到的示例，我不知道如何做到这一点。

任何帮助将不胜感激！

-- 更多信息

我查看了 IQueryable 的源代码，但不幸的是，我看不到任何为此目的使用代码的方法。我已经设法编写了一个看起来可以工作的附加过滤器，但它肯定不是优雅的。

```
public class PersonToPersonDtoConvertAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(System.Web.Http.Filters.HttpActionExecutedContext actionExecutedContext)
    {
        HttpResponseMessage response = actionExecutedContext.Response;

        if (response != null)
        {
            ObjectContent responseContent = response.Content as ObjectContent;
            var query = (responseContent.Value as IQueryable<Student>).ToList();
            response.Content = new ObjectContent<IEnumerable<StudentResource>>(query.ToList().Select(Mapper.Map<Person, PersonDto>), responseContent.Formatter);
        }
    }
} 
```

然后我装饰了这个动作

```
 [Queryable]
    [PersonToPersonDtoConvert]
    public IQueryable<Person> Get()
    {
        return uow.GetRepo<IRepository<Person>>().GetAll();
    } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-23T22:12:32.500

有一个更好的解决方案。试试这个：

```
public virtual IQueryable<PersonDto> Get(ODataQueryOptions<Person> query)
{
    var people = query.ApplyTo(uow.Person().GetAll());
    return ConvertToDtos(people);
} 
```

这将确保查询在 Person 而不是 PersonDTO 上运行。如果您希望通过属性而不是代码进行转换，您仍然需要实现类似于您提出的操作过滤器。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-02-25T17:01:48.890

使用 AutoMapper 的[Queryable Extensions](http://docs.automapper.org/en/stable/Queryable-Extensions.html)。

首先，定义映射。

```
// Old AutoMapper API
// Mapper.CreateMap<Person, PersonDto>();

// Current AutoMapper API
Mapper.Initialize(cfg => 
   cfg.CreateMap<Person, PersonDto>()
); 
```

然后你可以使用这样的东西：

```
[EnableQuery]
public IQueryable<PersonDto> Get() {
    // Old AutoMapper API
    // return this.dbContext.Persons.Project().To<PersonDto>();

    // New AutoMapper API
    return this.dbContext.Persons.ProjectTo<PersonDto>();
} 
```

编辑 04/2019：更新以反映当前的 AutoMapper API。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-02-18T20:33:58.800

恕我直言，接受的解决方案不正确。一般来说，如果您的服务使用 DTO，您不希望将底层实体（人员）暴露给服务。为什么要查询`Person`模型并返回`PersonDTO`对象？

由于您已经在使用它，Automapper 具有可查询[扩展](https://github.com/AutoMapper/AutoMapper/wiki/Queryable-Extensions)，它允许您仅公开您的 DTO 并将过滤应用于数据源的基础类型。例如：

```
public IQueryable<PersonDto> Get(ODataQueryOptions<PersonDto> options) {
    Mapper.CreateMap<Person, PersonDto>();
    var persons = _personRepository.GetPersonsAsQueryable();
    var personsDTOs = persons.Project().To<PersonDto>();  // magic happens here...

    return options.ApplyTo(personsDTOs);
} 
```

***关于急切加载导航属性...***

@philreed：我无法在评论中做出体面的回应，所以我在这里添加了它。[这里](http://beyondtheduck.com/projecting-and-expand-possible-at-last-kinda/)有一篇关于如何做到这一点的帖子，但我今天收到了 403。希望那是暂时的。

基本上，您检查导航属性的 Select 和 Expand 子句。如果它存在，那么你告诉 EF 通过`IQueryable<T> Include`扩展方法急切地加载。

*控制器*

```
public IQueryable<MyDto> GetMyDtos(ODataQueryOptions<MyDto> options)
{   
  var eagerlyLoad = options.IsNavigationPropertyExpected(t => t.MyNavProperty);
  var queryable = _myDtoService.GetMyDtos(eagerlyLoad);

  // _myDtoService will eagerly load to prevent select N+1 problems
  // return (eagerlyLoad) ? efResults.Include(t => t.MyNavProperty) : efResults;

  return queryable;
} 
```

*扩展方法*

```
public static class ODataQueryOptionsExtensions
{
  public static bool IsNavigationPropertyExpected<TSource, TKey>(this ODataQueryOptions<TSource> source, Expression<Func<TSource, TKey>> keySelector)
  {
    if (source == null) { throw new ArgumentNullException("source"); }
    if (keySelector == null) { throw new ArgumentNullException("keySelector"); }

    var returnValue = false;
    var propertyName = (keySelector.Body as MemberExpression ?? ((UnaryExpression)keySelector.Body).Operand as MemberExpression).Member.Name;
    var expandProperties = source.SelectExpand == null || string.IsNullOrWhiteSpace(source.SelectExpand.RawExpand) ? new List<string>().ToArray() : source.SelectExpand.RawExpand.Split(',');
    var selectProperties = source.SelectExpand == null || string.IsNullOrWhiteSpace(source.SelectExpand.RawSelect) ? new List<string>().ToArray() : source.SelectExpand.RawSelect.Split(',');

    returnValue = returnValue ^ expandProperties.Contains<string>(propertyName);
    returnValue = returnValue ^ selectProperties.Contains<string>(propertyName);

    return returnValue;
  }
} 
```

# java - ArrayList 方法中的参数不一致

> ID：14484696
> 
> 赞同：4
> 
> 时间：2013-01-23T16:37:45.153
> 
> 标签：java

在 ArrayList API中**add()**接受泛型参数类型的参数，但**contains()**和**indexOf()**接受**Object**类型的参数。

```
public class ArrayList<E> ...{
     public boolean add(E e);  
     public boolean contains(Object o);
     public int indexOf(Object o);
     ....
} 
```

[ArrayList 的 Java 文档](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)

所以我只是想知道它是否与泛型有关还是它的设计不一致？

我查看了**Openjdk**实现，但找不到任何具体原因。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T16:39:49.937

API 的意思是：

1.  你不能`add()`做任何不是`E`;
2.  但是，您可以搜索不存在的东西`E`（但可以比较等于 的实例`E`）。

考虑以下示例：

```
public class Main {
    public static class Key {
        private final int k;
        public Key(int k) {
            this.k = k;
        }
        @Override
        public boolean equals(Object obj) {
            if (!(obj instanceof Key)) {
                return false;
            }
            Key rhs = (Key)obj;
            return k == rhs.k;
        }
        @Override
        public int hashCode() {
            //...
            return 0;
        }
    }
    public static class Data extends Key {
        private final int d;
        public Data(int k, int d) {
            super(k);
            this.d = d;
        }
    }
    public static void main(String[] args) {
        List<Data> l = new ArrayList<Data>();
        l.add(new Data(123, 456));
        l.add(new Data(42, 24));
        System.out.println(l.contains(new Key(789)));
        System.out.println(l.contains(new Key(123)));
        System.out.println(l.contains(new Key(42)));
    }
} 
```

`contains()`如果仅限于 take ，最后三行将无法编译`Data`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T16:55:27.467

这是一个很好的解释：[为什么 Set.contains() 接受一个对象，而不是 E？](http://smallwig.blogspot.com/2007/12/why-does-setcontains-take-object-not-e.html)

# php - PHP 文件存在

> ID：14484701
> 
> 赞同：-2
> 
> 时间：2013-01-23T16:38:03.917
> 
> 标签：php, image, file-exists

这应该很简单，但它不起作用

```
 $photo = "../members/".$vid.".jpg";

  if (file_exists ($photo))
       echo "<img id='memberpic' src = '$photo'/>"; 
```

在这种情况下，图像**永远不会**显示。

但是，如果我省略了 if 语句......

```
 echo "<img id='memberpic' src = '$photo'/>"; 
```

文件存在时图像正确显示，但不存在时图像显示为空框。我想消除那个空框架。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:39:51.280

您正在使用 file_exists() 的相对路径。请尝试使用完整的服务器路径。

例如

`$photo = "/var/www/html/members/".$vid.".jpg";`

但显然替换为您的服务器的完整路径:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:57:46.613

在使用文件和目录路径时，您必须牢记一些事情。基本上，访问绝对文件（网络服务器上的完整路径）比访问相对文件（执行 php-script 的目录的路径）更好。这将帮助您检查文件是否存在。您可以使用 PHP 魔术常量**DIR** (PHP 版本 >= 5.3) 或 dirname( **FILE** ) 获取脚本的活动目录。

您必须跟踪的另一件事是您的网络服务器文档根目录。您的（在您的情况下）图像文件的地址如下： document-root: /var/www/example.com/img/photo.png url: [http://example.com/img/photo.png](http://example.com/img/photo.png)

虽然可以将“父目录”与 .. 一起使用，但我不建议使用，因为它很难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:42:30.103

**尽可能多地使用绝对路径。相对路径是 PHP 计算它们的痛苦（在性能方面）。**

如果你不想使用绝对路径..你可以使用下面的相对路径。

```
$_SERVER['DOCUMENT_ROOT'] = '<root_dir_of_your_project>';  
file_exists($_SERVER['DOCUMENT_ROOT'].'/path/to/file.php'); 
```

# java - 装饰器模式和哈希码

> ID：14484705
> 
> 赞同：2
> 
> 时间：2013-01-23T16:38:19.160
> 
> 标签：java, design-patterns, hash

我在我的一个程序中使用装饰器模式来装饰具有不同毕业要求的课程。几个例子：

```
new BasicCourse("Course Foo", 1);  // parameters are name and credits

new DisciplinaryBreadth(DBR.MATH, new BasicCourse("Course Foo", 1));

new IntroToHumanities(IHUM.FIRST_QUARTER,
        new ProgramInWritingAndRhetoric(PWR.FIRST_YEAR,
        new BasicCourse("Course Bar", 2)));

new ProgramInWritingAndRhetoric(PWR.FIRST_YEAR,
        new IntroToHumanities(IHUM.FIRST_QUARTER,
        new BasicCourse("Course Bar", 2))); 
```

后两者在交换性质上是相同的。

我正在实现`hashcode()`and `equals()`，以便可以在 HashMap 中使用 Courses。我必须更改 Eclipse 的自动生成的 equals 函数，以便可交换的课程彼此相等。我不了解哈希码的生成以及我的平等，所以我想知道我是否需要对哈希码函数做同样的事情。

以下是 Eclipse 为每个装饰器提供的内容：

```
 @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((inner == null) ? 0 : inner.hashCode());
        result = prime * result
                + ((requirement == null) ? 0 : requirement.hashCode());
        return result;
    } 
```

这会为交换课程产生相同的哈希吗？

**编辑**
每个装饰器都有一个`requirement`变量，该变量对应于具有该装饰器的课程所满足的要求。例如，DisciplinaryBreadth 类具有 DBR 类的要求，它是可能的 Disciplinary Breadth 要求的枚举。ProgramInWritingAndRhetoric 类具有 PWR 类的要求，这是可能的 Program in Writing 和 Rhetoric 要求的枚举。等等。

每个装饰器中的需求变量是一个不同的枚举。所有课程都实现了获得各种毕业要求的方法（例如`getDbrs()`，`getIhum()`）。

装饰器调用他们内部课程的方法来处理除了他们定义的需求之外的所有需求。例如 IntroToHumanities 类调用`inner.getDbrs()`and `inner.getPwr()`，但使用它的需求变量作为它的`getIhum()`方法。`getName()`他们还为and方法调用其内部 Course 的`getCredits()`方法，而 BasicCourse 类使用其构造函数中设置的最终成员定义这些方法。

`inner`变量只是每个装饰器包装的内部课程。内部变量和需求变量在每个装饰器的构造函数中设置并且是最终变量。

这是 ProgramInWritingAndRhetoric 类的 equals 方法：

```
@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (!(obj instanceof Course))
        return false;
    Course other = (Course) obj;
    if (getName() == null) {
        if (other.getName() != null)
            return false;
    } else if (!getName().equals(other.getName()))
        return false;
    if (getCredits() != other.getCredits())
        return false;
    if (!getDbrs().equals(other.getDbrs()))
        return false;
    if (!requirement.equals(other.getPwr()))
        return false;
    if (!getIhum().equals(other.getIhum()))
        return false;
    if (!getEc().equals(other.getEc()))  //another Graduation Requirement
        return false;
    return true;
} 
```

我跳过了一些对 null 的检查，因为我在构造函数中检查了它们，所以你不能使用 null IHUM 创建课程，例如。其他毕业要求的实现也类似，唯一的区别是使用要求变量的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:33:45.600

@Eva我不同意你应该让你的IDE生成你的哈希码方法的建议，但也许我是过时的。

基本上，在生成散列时，您的目标是（尽可能合理地）基于对象的成员变量获得分布良好且唯一的散列集。

因此，您应该获取成员变量的值（原始值）或哈希码（复杂对象时），并使用它们以分布良好的方式计算哈希码（因此通常使用素数作为乘数) 并且不太可能引起碰撞。

因此，合理的 hashCode() 将使用与您的 equals 方法相同的成员变量，但采用值/哈希值并将它们与素数相乘。

请记住，唯一的、良好分布的散列的唯一保证是提前知道可能的全部对象，在这种情况下，您实际上可以预先分配散列，但这很少是有效的解决方案。

这是对您要实现的目标的一个很好的解释-http: [//eclipsesource.com/blogs/2012/09/04/the-3-things-you-should-know-about-hashcode/](http://eclipsesource.com/blogs/2012/09/04/the-3-things-you-should-know-about-hashcode/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T17:51:26.707

根据 codeghost 的回答，我认为这可能是正确的哈希码（在 IntroToHumanities 类中）：

```
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + getCredits();
    result = prime * result + 
            ((getName() == null) ? 0 : getName().hashCode());
    result = prime * result + getDbrs().hashCode();
    result = prime * result + getPwr().hashCode();
    result = prime * result + requirement.hashCode();
    result = prime * result + getEc().hashCode();
    return result;
} 
```

# bash - OSX/Bash - 检测构建失败

> ID：14484706
> 
> 赞同：6
> 
> 时间：2013-01-23T16:38:20.563
> 
> 标签：bash, xcodebuild

直接从 bash 使用 Xcodebuild，如何检测失败？退出代码始终为 0 无论如何。我意识到有一个“失败”或“成功”的纹理输出，但没有更优雅的方式吗？

此外，我有时会使用“make”（尤其是在基于 Qt 的构建中）。有没有办法从构建脚本中检测 make 失败？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-29T10:42:14.327

即使构建失败，xcodebuild 也总是返回 0。要检测错误，您可以使用如下脚本：

```
build_errors_file=build_errors.log

# Pipe errors to file
xcodebuild 2>$build_errors_file

errors=`grep -wc "The following build commands failed" $build_errors_file`
if [ "$errors" != "0" ]
then
    echo "BUILD FAILED. Error Log:"
    cat $build_errors_file
    rm $build_errors_file
    exit 1
fi
rm $build_errors_file

# ... continue 
```

我验证了使用存档选项运行 xcodebuild 时不会打印 ** BUILD FAILED **，因此看起来要查找的字符串是“以下构建命令失败”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:08:27.010

也许这取决于 Xcode 的版本或者它是如何失败的。这就是我检查 $ 时得到的结果？在找不到某些包含文件后：

```
davidb@DavidBs-Mobile-Macintosh:~/Source/icanvas/iCanvas-project (release/icanvas-1.9 %) $ xcodebuild
...
/Users/davidb/Source/icanvas/iCanvas-project/iCanvas-target/iPhone/ConversationViewController.m:21:9: fatal error: 'CanvasKit/CKActionSheetWithBlocks.h' file not found
#import "CanvasKit/CKActionSheetWithBlocks.h"
        ^
1 error generated.
...
** BUILD FAILED **
...
(5 failures)
davidb@DavidBs-Mobile-Macintosh:~/Source/icanvas/iCanvas-project (release/icanvas-1.9 %) $ echo $?
65 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-25T16:17:15.910

退出代码并不总是 0。

我假设您正在从 shell 脚本运行 xcodebuild。

您可以尝试将**#!/bin/bash -e**放在脚本文件之前。

[https://stackoverflow.com/a/40808843/2705627](https://stackoverflow.com/a/40808843/2705627)

# php - 如何将两个 unixtime 日期之间的差异转换为天数？

> ID：14484717
> 
> 赞同：0
> 
> 时间：2013-01-23T16:38:55.737
> 
> 标签：php, unix-timestamp

我试图确定目录中文件的日期与当前日期之间的差异，我尝试了两种计算方法：

```
 $fileUnixTimeDate = filemtime($file);
 $fileFormattedDate = date('m/d/y',filemtime($file));

 $todayUnixTimeDate =  time();
 $todayFormattedDate = date('m/d/y',time());

 $unixDifference = $todayUnixTimeDate - $fileUnixTimeDate;
 $formattedDifference =  $todayFormattedDate - $fileFormattedDate; 
```

这是目录中两个文件的结果：

![在此处输入图像描述](../Images/46aa2d13f683d75807aeb5d4607dab62.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:46:13.063

使用 PHP 的`DateTime`类 - 将两个日期实例化为对象`DateTime`并`diff`在它们之间进行操作。最后，`format`输出`diff`天数。

使用[http://php.net/DateTime](http://php.net/DateTime)作为参考。

编辑：示例：

```
$dt1 = new DateTime(date('Y-m-d H:i:s', filemtime($file)));
$dt2 = new DateTime(); // this would be the "now" datetime

$diff = $dt1->diff($dt2);

echo $diff->format('%R%a days'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:45:10.923

我只能假设您正在尝试获取天数差异：

```
$fileUnixTimeDate = filemtime($file);
$todayUnixTimeDate =  time();

$unixDifference = $todayUnixTimeDate - $fileUnixTimeDate;
$daysDifference = $unixDifference/86400; 
```

**注意：** 86400 因为 1 天有 86400 秒。

`$daysDifference`将包含天数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:45:41.440

unix 时间计算已经是一个很好的开始：

```
$fileUnixTimeDate = filemtime($file);
$todayUnixTimeDate =  time();
$unixDifference = $todayUnixTimeDate - $fileUnixTimeDate; 
```

现在有了给定的结果（7389045 和 7216242），您需要将它们转换为可读格式。例如，7389045 ~= 85.5 天。7216242 ~= 83.5 天

```
echo "Hours difference = ".floor((unixDifference )/3600) . "<br>";
echo "Minutes difference = ".floor((unixDifference )/60) . "<br>";
echo "Seconds difference = " .(unixDifference ). "<br>";
echo "Days difference = ".floor((unixDifference )/86400) . "<br>"; 
```

试试看，看看你会得到什么结果。

看到这个问题：[Finding days between 2 unix timestamps in php](https://stackoverflow.com/questions/4079814/finding-days-between-2-unix-timestamps-in-php)

更多关于 Unix 时间：[http ://en.wikipedia.org/wiki/Unix_time](http://en.wikipedia.org/wiki/Unix_time)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T16:58:44.183

使用`DateTime`该类可以很容易地处理日期：

```
// Pretend this is from "filemtime()"
$time = strtotime('9 days ago');

// Create a DateTime object using the file's creation time
// Note: Unix timestamps need to be prefixed with "@"
$filetime = new \DateTime('@'.$time);

// The datetime right now, for comparison
$now = new \DateTime('now');

// Get the difference between the two times
$diff = $filetime->diff($now);

// And echo out the day difference
echo "The file was created {$diff->days} days ago."; 
```

该`$diff`变量包含很多好东西：

```
object(DateInterval)[3]
    public 'y' => int 0
    public 'm' => int 0
    public 'd' => int 9
    public 'h' => int 0
    public 'i' => int 0
    public 's' => int 0
    public 'invert' => int 0
    public 'days' => int 9 
```

# vb.net - 多重继承需求的解决方法限制

> ID：14484718
> 
> 赞同：1
> 
> 时间：2013-01-23T16:39:00.557
> 
> 标签：vb.net, .net-4.0

我有 3 个类，每个类都可以单独继承以获得某些继承的能力。

但是其中 2 个类可以继承到第 3 个类中，以创建一个“超级”类，其中包括其他 2 个类的能力及其默认逻辑实现。

保持编码逻辑集中的最佳方法是什么？

正如您将在下面看到的，`Class2`它是我内置的内容的提炼形式`Class3`。我想在一个位置实现属性的验证逻辑，而不是开发一个接口并且必须为每个实现一遍又一遍地实现逻辑。

有一种情况，`Class2`既可以单独使用，也可以与`Class1`. 每个类都有自己独特的用途，但`Class3`结合了`2`&`1`以实现结合两个类功能的最终实现。

课程：

```
public mustinherit class Class1(of T as {New, Component})
  private _prop as T

  public sub New()
    ...
  end sub

  protected friend readonly property Prop1 as T
    Get
      ..validation..
      return me._prop
    end get
  end property
end class

public mustinherit class Class2
  private _prop as short

  public sub new(val as short)
    me._prop = val
  end sub

  protected friend readonly property Prop2 as short
    get
      return me._prop
    end get
  end property
end class 
```

当前 Class3 实现：

```
public mustinherit class Class3(of T as {New, Component})
  Inherits Class1(of T)

  'Distilled the logic design below into its own MustInherit class cause this design
  '  by itself is useful without Clas1 implementation.
  private _prop as Short  <--- Same as Class2._prop

  public sub New(val as short)
    me._prop = val
  end sub

  protected friend readonly property Prop2 as short
    get
      return me._prop
    end get
  end property
end class 
```

### 每@Servy：

第一类

```
public mustinherit class Data(of T as {New, Component})
...
end class 
```

2 类

```
public mustinherit class Brand
...
end class 
```

三级

```
public mustinherit class BrandData(of T as {New, Component})
  inherits Data(Of T)
...
end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:54:23.113

> 我想在一个位置实现属性的验证逻辑，而不是开发一个接口并且必须为每个实现一遍又一遍地实现逻辑。

无需一遍又一遍地实现接口。您必须立即实现验证逻辑，然后将其注入需要验证的类。

```
interface IValidationLogic
{}

class Class1
{
    protected readonly IValidationLogic _validationLogic;
    public Class1(IValidationLogicvalidationLogic)
    {
        _validationLogic = validationLogic;
    }
}

class Class2
{
    protected readonly IValidationLogic _validationLogic;
    public Class2(IValidationLogicvalidationLogic)
    {
        _validationLogic = validationLogic;
    }
}

class Class3 : Class2
{
    public Class2(IValidationLogicvalidationLogic)
         : base(validationLogic) 
    {}
}

class MyValidationLogic : IValidationLogic
{}

var obj = new Class3(new MyValidationLogic()) 
```

# profiling - 源代码功率分析

> ID：14484719
> 
> 赞同：2
> 
> 时间：2013-01-23T16:39:03.233
> 
> 标签：profiling, power-management

我想知道是否存在用于在源代码级别报告结果的程序的电源分析工具。例如，报告特定源代码行、函数、模块等处的功耗的分析结果。

对我来说语言和平台并不重要。只想知道有没有这种动物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:57:31.680

目前大学正在对此进行研究，但仍处于试验阶段，我还不知道有商业工具可以用于此。

我母校的一位教授正在研究这个，他称之为[绿色采矿：软件变化对功耗的影响](http://softwareprocess.es/static/GreenMining.html)。现在，它涉及将带有 USB 的[Kill-a-Watt](http://en.wikipedia.org/wiki/Kill_A_Watt)连接到另一台计算机，并在软件上运行受控测试时记录大量数据。对于移动设备，它变得更加复杂，因为您必须连接电路板才能实时测量电池的耗电量：

![手机电量监控设置](../Images/882edaceae17f51c39d5fd02166af65a.png)

最终会有统计模型，基于通过对各种其他代码运行功率测试收集的数据，将能够在没有所有这些硬件的情况下为您提供源代码的功率配置文件。您的 IDE 会警告您：“您确定要这样做吗？与其他方式相比，这将使笔记本电脑的平均电池寿命减少 3 分钟。” 不过，这还有很长的路要走。

我依稀记得听说过最初的结果之一是类继承层次结构的深度与功耗呈正相关……如果您有兴趣，请浏览[这些论文！](http://softwareprocess.es/static/GreenMining.html)

# javascript - 如果一个 div 显示隐藏另一个？

> ID：14484724
> 
> 赞同：0
> 
> 时间：2013-01-23T16:39:15.150
> 
> 标签：javascript, jquery, html

我正在尝试找出一种方法，在显示另一个 div 时使用 jQuery 自动隐藏一个 div。有没有办法做到这一点？

我对 jQuery 很陌生，并且仍在学习，但我想它会是这样的：

```
 <script>
    (function () {
        if ($('.infobox-favourites').is(":visible")) {
             $(".infobox-more").fadeOut(500);

        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:02:25.597

检查这个 JsBin 示例[http://jsbin.com/oreyeg/1/edit](http://jsbin.com/oreyeg/1/edit)

使用此代码

```
setInterval(function() {
  var div1 = $('.infobox-favourites').css("display");
        if (div1 != 'none') {
             $(".infobox-more").fadeOut(500);       
        }

    },200); 
```

使用 setInterval 在每 200 毫秒后执行代码以检查更改。如果您希望它只执行一次，您可以将其删除。

不知道问题出在哪里。我想问题出在 :visible 上，使用 :hidden 也必须有效，但在示例中，我使用 CSS 方法获取 display 属性的值并且它有效。

**注意：**我尝试在没有 setInterval 的情况下运行代码，但它没有用 :( 但 setTimeout 有助于执行脚本

```
setTimeout(function() {
//$(".div2").hide();  
  var div1 = $('.div1').css("display");
        if (div1 != 'none') {
          $(".div2").fadeOut(500);       
        }
  else {
  $(".div1").fadeIn(500);   
  }

    },0); 
```

# r - 将数据框的一行转换为向量

> ID：14484728
> 
> 赞同：137
> 
> 时间：2013-01-23T16:39:29.893
> 
> 标签：r, vector, dataframe

我想从数据框的一行中创建一个向量。但我不想有行和列的名称。我尝试了几件事......但没有运气。

这是我的数据框：

```
> df <- data.frame(a=c(1,2,4,2),b=c(2,6,2,1),c=c(2.6,8.2,7.5,3))
> df
  a b   c
1 1 2 2.6
2 2 6 8.2
3 4 2 7.5
4 2 1 3.0 
```

我试过了：

```
> newV <- as.vector(df[1,])
> newV
  a b   c
1 1 2 2.6 
```

但我真的想要这样的东西：

```
> newV <- c( 1,2,2.6)
> newV
[1] 1.0 2.0 2.6 
```

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2013-01-23T16:42:50.770

当您从数据框中提取单行时，您会得到一个单行数据框。将其转换为数值向量：

```
as.numeric(df[1,]) 
```

正如@Roland 建议的那样，`unlist(df[1,])`将单行数据框转换为数字向量而不删除名称。因此`unname(unlist(df[1,]))`，这是获得相同结果的另一种更明确的方法。

正如下面的@Josh 评论，如果您有一个不完全数字（字母、因子、混合...）的数据框，`as.character(df[1,])`则需要。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-01-23T16:49:23.333

我推荐`unlist`，它保留了名称。

```
unlist(df[1,])
  a   b   c 
1.0 2.0 2.6 

is.vector(unlist(df[1,]))
[1] TRUE 
```

如果您不想要命名向量：

```
unname(unlist(df[1,]))
[1] 1.0 2.0 2.6 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-03-20T14:12:19.007

这是一个`dplyr`基于选项：

```
newV = df %>% slice(1) %>% unlist(use.names = FALSE)

# or slightly different:
newV = df %>% slice(1) %>% unlist() %>% unname() 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-23T16:47:24.917

如果您不想更改为数字，可以试试这个。

```
> as.vector(t(df)[,1])
[1] 1.0 2.0 2.6 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-25T04:46:02.057

请注意，如果您的行包含一个因子，则必须小心。这是一个例子：

```
df_1 = data.frame(V1 = factor(11:15),
                  V2 = 21:25)
df_1[1,] %>% as.numeric() # you expect 11 21 but it returns 
[1] 1 21 
```

这是另一个示例（默认情况下 data.frame() 将字符转换为因子）

```
df_2 = data.frame(V1 = letters[1:5],
                  V2 = 1:5)
df_2[3,] %>% as.numeric() # you expect to obtain c 3 but it returns
[1] 3 3
df_2[3,] %>% as.character() # this won't work neither
[1] "3" "3" 
```

为了防止这种行为，您需要在提取之前处理该因素：

```
df_1$V1 = df_1$V1 %>% as.character() %>% as.numeric()
df_2$V1 = df_2$V1 %>% as.character()
df_1[1,] %>% as.numeric()
[1] 11  21
df_2[3,] %>% as.character()
[1] "c" "3" 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-01-23T16:42:33.583

数据框的列已经是向量，你只需要把它们拉出来。请注意，您将所需的列放在逗号之后，而不是之前：

```
> newV <- df[,1]
> newV
[1] 1 2 4 2 
```

如果你真的想要排，那么就按照 Ben 说的做，以后请正确使用单词。

# playframework - 如何处理 Play 1.X 中的数据库连接错误？

> ID：14484731
> 
> 赞同：3
> 
> 时间：2013-01-23T16:39:39.033
> 
> 标签：playframework, playframework-1.x

我正在编写一个状态页面，用于检查各种系统服务并呈现它们的状态。

作为测试的一部分，我将关闭我的数据库，并想测试它是否正常工作，并在页面上呈现这一事实。

但是，当数据库关闭时，我似乎无法呈现任何页面 - 相反，我在运行代码之前收到此错误：

```
org.hibernate.exception.GenericJDBCException: Cannot open connection 
```

Play 试图打开一个事务，失败了，并杀死了我的整个页面。

我该如何解决**这个特定页面的问题**，手动测试我的数据库连接，并采取相应的行动，而不是让整个页面失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:15:14.397

在控制器方法上使用 @NoTransaction 注释来避免打开事务

# caching - 如何在不将指针声明为易失性的情况下强制执行 CUDA 全局内存一致性？

> ID：14484739
> 
> 赞同：0
> 
> 时间：2013-01-23T16:39:52.417
> 
> 标签：caching, cuda, work-stealing

我将首先进行一些上下文化。我正在尝试使用 CUDA 中的双端队列实现非阻塞工作窃取方法。双端队列 (aDeques) 位于全局内存中的块分段数组中，并且 popWork() 设备函数的目标是弹出工作以提供线程。除了全局双端队列之外，每个块在共享内存（aLocalStack）中都有一个堆栈，它可以在本地工作。流行音乐发生在 3 个级别。第一次尝试在共享堆栈中，第二次尝试在块拥有的双端队列中，第三次尝试是窃取其他双端队列。每个双端队列都有全局底部和弹出指针，它们位于全局内存数组（aiDequesBottoms 和 auiDequesAges）中。我的问题是，当一个块更改全局双端队列指针时，当我在 GTS450 中测试代码时，其他块看不到更改。好像缓存没有被更新。我也在GT520卡上测试过，没有出现这个问题。我在使用 aiDequeFlags 数组时遇到过类似的问题。通过将其声明为 volatile 可以解决这些问题。不幸的是，我不能对双端队列指针数组做同样的事情，因为我以后需要对它们使用原子函数。很抱歉没有把问题放在一个更简单的例子中，但我无法重现这种行为。第一个片段解释了 popWork() 接口。很抱歉没有把问题放在一个更简单的例子中，但我无法重现这种行为。第一个片段解释了 popWork() 接口。很抱歉没有把问题放在一个更简单的例子中，但我无法重现这种行为。第一个片段解释了 popWork() 接口。

```
template <int iDequeSize> //Size of each segment in aDeques 
bool __inline__ __device__ popWork(
    volatile int *aiDequeFlags , //Flags that indicates if a deque is active (has work)
    int *aiDequesBottoms , //Deque bottom pointers
    unsigned int *auiDequesAges , //Deque top pointers (29 higher bits) + 
                                  //Tag bits(3 lower bits).
    const Int2Array *aDeques , //Deques (Int2Array is an interface for 2 int arrays)
    int &uiStackBot , //Shared memory stack pointer
    int2 *aLocalStack , //Shared memory local stack
    const int &iTid , //threadIdx.x
    const int &iBid , //blockIdx.x

    //All other parameters are output

unsigned int &uiPopDequeIdx , //Choosen deque for pop
    int2 *popStartIdxAndSize , //Arrays of pop start index and sizes
    bool *bPopFlag , //Array of flags for pop in each level
unsigned int &uiActiveDequesIdx , //Flag to indicate pop failed (no more work)
    int2 &work //Actual acquired thread work) 
```

第二个片段具有完整的功能。使用该函数的内核以 8 个块、64 个线程启动，一开始只有 deque 0 有 1 个工作，而所有其他 deque 都是空的。有一些调试 printf 调用来生成日志，这将在下一个片段中显示。

```
template <int iDequeSize>
bool __inline__ __device__ popWork(volatile int *aiDequeFlags , int *aiDequesBottoms , unsigned int *auiDequesAges ,
const Int2Array *aDeques , int &uiStackBot , int2 *aLocalStack , const int &iTid , const int &iBid ,
unsigned int &uiPopDequeIdx , int2 *popStartIdxAndSize , bool *bPopFlag , unsigned int &uiActiveDequesIdx , int2 &work)
{
//Pop from local stack
if(iTid == 0)
{
    unsigned int uiAge = 0;
    bPopFlag[0] = popBottom(uiStackBot , uiAge , popStartIdxAndSize[iBid]); 
    bPopFlag[3] = bPopFlag[0];
}

__syncthreads();

if(bPopFlag[0])
{
    if(iTid < popStartIdxAndSize[iBid].y)
    {
        work = aLocalStack[popStartIdxAndSize[iBid].x + iTid];
    }
}
else
{
    if(iTid == 0)
    {   //Try to pop from block deque

        bPopFlag[1] = popBottom(aiDequesBottoms[iBid] , auiDequesAges[iBid] , popStartIdxAndSize[iBid]);

        if(bPopFlag[1])
        {
            uiPopDequeIdx = iBid;
            //Debug
            if(iBid == 0)
            {
                printf("Block %d pop global deque. Bottom=%d\n" , iBid , aiDequesBottoms[iBid]);
            }
            //
        }
        else
        {
            aiDequeFlags[iBid] = 0;
            popStartIdxAndSize[iBid].x = INFTY;
            uiPopDequeIdx = INFTY;
        }
        bPopFlag[3] = bPopFlag[1];
        bPopFlag[2] = false;
    }
    __syncthreads();

    if(!bPopFlag[1])
    {
        //Verify if lazy steal can be done.
        if(iTid < NDEQUES)
        {
            if(popStartIdxAndSize[iTid].x != INFTY && iTid != iBid)
            {
                atomicMin(&uiPopDequeIdx , iTid);
                bPopFlag[2] = true;
                bPopFlag[3] = true;
            }
        }

        __syncthreads();

        if(iTid == uiPopDequeIdx)
        {
            popStartIdxAndSize[iBid] = popStartIdxAndSize[iTid];
            popStartIdxAndSize[iTid].x = INFTY;
        }

        while(!bPopFlag[3])
        {   //No more work, try to steal some!
            __syncthreads();

            if(iTid == 0)
            {
                uiActiveDequesIdx = 0;
            }
            __syncthreads();

            if(iTid < NDEQUES)
            {
                if(aiDequeFlags[iTid] == 1)
                {
                    uiActiveDequesIdx = 1;

                    //Debug
                    printf("Block %d steal attempt on block %d. Victim bottom=%d\n" , blockIdx.x , threadIdx.x , aiDequesBottoms[iTid]);
                    //

                    if(popTop(aiDequesBottoms , auiDequesAges , iTid , popStartIdxAndSize[iTid]))
                    {
                        aiDequeFlags[iBid] = 1;
                        atomicMin(&uiPopDequeIdx , iTid);
                        bPopFlag[3] = true;

                        //Debug
                        //printf("%d ss %d %d %d\n" , iBid , iTid , popStartIdxAndSize[iTid].x , popStartIdxAndSize[iTid].y);
                        //
                    }
                }
            }

            __syncthreads();

            if(uiActiveDequesIdx == 0)
            { //No more work to steal. End.
                break;
            }

            if(iTid == uiPopDequeIdx)
            {
                popStartIdxAndSize[iBid] = popStartIdxAndSize[iTid];
                popStartIdxAndSize[iTid].x = INFTY;
            }

            __syncthreads();
        }
    }

    __syncthreads();

    if(bPopFlag[3] && iTid < popStartIdxAndSize[iBid].y) //assuming number of threads >= WORK_SIZE
    {
        aDeques->getElement(work , uiPopDequeIdx*iDequeSize + popStartIdxAndSize[iBid].x + iTid);
    }
}

return bPopFlag[3]; 
```

}

最后一个片段是生成的日志。推送线（“Block X push.Bottom=Y”）由此处未显示的推送功能生成。请记住，一开始，只有块 0 有 1 个工作。

```
Block 0 pop global deque. Bottom=0
Block 4 steal attempt on block 0\. Victim bottom=0
Block 2 steal attempt on block 0\. Victim bottom=1
Block 6 steal attempt on block 0\. Victim bottom=1
Block 1 steal attempt on block 0\. Victim bottom=1
Block 5 steal attempt on block 0\. Victim bottom=1
Block 3 steal attempt on block 0\. Victim bottom=1
Block 7 steal attempt on block 0\. Victim bottom=1
Block 2 steal attempt on block 0\. Victim bottom=1
Block 6 steal attempt on block 0\. Victim bottom=1
Block 3 steal attempt on block 0\. Victim bottom=1
Block 1 steal attempt on block 0\. Victim bottom=1
Block 5 steal attempt on block 0\. Victim bottom=1
Block 4 steal attempt on block 0\. Victim bottom=0
Block 7 steal attempt on block 0\. Victim bottom=1
Block 0 push. Bottom=448
Block 2 steal attempt on block 0\. Victim bottom=1
Block 2 steal attempt on block 0\. Victim bottom=1
Block 6 steal attempt on block 0\. Victim bottom=1
Block 1 steal attempt on block 0\. Victim bottom=1
Block 5 steal attempt on block 0\. Victim bottom=1
Block 3 steal attempt on block 0\. Victim bottom=1
Block 7 steal attempt on block 0\. Victim bottom=1
Block 2 steal attempt on block 0\. Victim bottom=1
Block 2 steal attempt on block 4\. Victim bottom=0
Block 1 steal attempt on block 0\. Victim bottom=1
Block 1 steal attempt on block 4\. Victim bottom=0
Block 5 steal attempt on block 0\. Victim bottom=1
Block 5 steal attempt on block 4\. Victim bottom=0
Block 4 push. Bottom=384 
```

可以看出，只有block 4可以看到block 0 deque底部指针的变化。我尝试在指针发生任何更改后添加一些 __threadfence() 调用，但没有成功。感谢关注！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:00:32.247

根据评论，唯一可行的解​​决方案似乎是关闭 L1 缓存。这可以通过在编译时将以下开关传递给 nvcc 在程序范围内完成：

```
–Xptxas –dlcm=cg 
```

L1 缓存是 SM 的属性/资源，而不是整个设备。由于线程块在特定的 SM 上执行，一个线程块在其 L1 缓存中的活动可能与另一个线程块及其 L1 缓存的活动不一致（假设它恰好在不同的 SM 上运行），即使它们都引用相同的全局内存中的位置。不同 SM 中的 L1 缓存相互之间没有联系，不保证相互一致。

请注意，L2 缓存是设备范围的，因此从各个线程块的角度来看是“连贯的”。关闭 L1 缓存对 L2 缓存没有影响，因此仍然有可能获得一些缓存优势，但是满足 L2 外的请求所需的时间比满足 L1 外的请求所需的时间长，因此关闭程序范围内的 L1 缓存是一个相当大的锤子，可以尝试让事情正常工作。

变量定义前面的`volatile`关键字应该具有告诉编译器在加载时跳过 L1 缓存的效果（根据我的理解）。但是 volatile 本身并不能解决写入路径，因此一个 SM 中的一个线程块可以进行`volatile`读取，从 L2 中拉出一个值，修改该值，然后将其写回，最终在 L1 中（直到它被驱逐）。如果另一个线程块读取相同的全局值，它可能看不到更新的效果。

勤奋地使用[__threadfence()](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#memory-fence-functions)虽然很乏味，但应该强制任何此类更新从 L1 进入 L2，以便其他线程块可以读取它们。但是，从写入值到其他 SM/线程块可以观察到值，这仍然会留下同步间隙。

（全局）[原子](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#atomic-functions)还应该具有直接进入“全局内存”以读取和写入使用的值的效果。

还可以检查代码以确保正确处理从全局同步位置的每个可能读取（例如使用`volatile`或使用原子）并且正确处理对全局同步位置的所有可能写入（例如使用`__threadfence()`或原子） ，并检查不同块之间的竞争条件。

如发现的那样，在 GPU 中创建稳定的全局同步环境的过程并非易事。这些其他问题也可能是有趣的（例如[关于开普勒](https://stackoverflow.com/questions/14243654/cuda-global-barrier-works-on-kepler-and-not-fermi/14247983#14247983)）（例如[讨论全局信号量](https://stackoverflow.com/questions/13752257/critical-section-in-cuda/13753128#13753128)）。

编辑：要回答评论中发布的问题，我会这样说：

也许没有问题。但是`__threadfence()`，不能保证（据我所知）最长完成时间。因此，在对全局位置进行更新时，只有与正在执行的线程块/SM 关联的 L1 被更新。然后我们击中`__threadfence()`. 大概 threadfence 需要一些时间才能完成，在此期间，另一个 threadblock 可能驻留在同一个 SM 上，被带入执行（而前一个线程/warp/block 在 threadfence 处停止），并“看到”更新的全局值在与该 SM 关联的（本地）L1 中。在其他 SM 中执行的其他线程块将看到“陈旧”值，直到`__threadfence()`完成。这就是我所说的可能的“同步间隙”。两个不同的块在短时间内仍然可以看到两个不同的值。这是否重要将取决于全局值如何用于块之间的同步（因为这是正在讨论的主题。）因此 atomics + volatile 可能是比 volatile + threadfence 更好的选择，尝试涵盖两者阅读并写入同步路径。

编辑#2：从评论看来，结合使用原子加上`volatile`也解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:54:35.543

坦率地说，我发现你的代码过于复杂，而且 - 更重要的是 - 不完整。怎么做`popBottom`和`popTop`作用？此外，`push`操作是如何实现的？这两个必须精心设计才能正常工作并确保不会发生某些同步问题。

例如：当一个块试图将某些东西推送到它的全局内存队列，而另一个块试图在同一时刻从中读取时会发生什么？这非常重要，如果没有正确完成，它可能会在一些非常罕见的情况下崩溃，例如，您可能会从尚未写入的数据单元中弹出。

当我实现一个类似的东西时——一个在所有块之间共享的单个全局内存双端队列，我另外将每个数据单元标记为：空的、占用的和死的。在伪代码中，算法或多或少像这样工作：

```
/* Objects of this class should reside in CUDA global memory */
template <typename T, size_t size>
class WorkQueue {
private:
    size_t head, tail;
    size_t status[size];
    T data[size];

    enum {
        FieldFree = 0,
        FieldDead = 1,
        FieldTaken = 2
    };      

public:
    /* 
       This construction should actually be done by host on the device,
       before the actual kernel using it is launched!
       Zeroing the memory should suffice.
    */
    WorkQueue() : head(0), tail(0) {
        for (size_t i=0; i<size; ++i)
            status[i]=FieldFree;
    }   

    __device__ bool isEmpty() { return head==tail; }

    /* single thread of a block should call this */
    __device__ bool push(const T& val) {
        size_t oldFieldStatus;
        do {
            size_t cell = atomicInc(&tail,size-1);
            data[cell]=val;
            __threadfence(); //wait untill all blocks see the above change
            oldFieldStatus=atomicCAS(&status[cell],FieldFree,FieldTaken); //mark the cell as occupied
        } while (oldFieldStatus!=FieldFree); 
        return true;
    }

    /* single thread of a block should call this */
    __device__ bool pop(T& out) {
        size_t cellStatus;
        size_t cell;
        do {
            cell=atomicInc(&head,size-1);
            cellStatus=atomicCAS(&status[cell],FieldFree,FieldDead);
            //If cell was free, make it dead - any data stored there will not be processed. Ever.
        } while (cellStatus==FieldDead);
        if (cellStatus!=FieldTaken)
            return false;
        out = data[cell];
        status[cell]=FieldFree;
        return true;
    }
}; 
```

如果没有单元格状态，我看*不到*实现它的可靠方法 - 否则，如果来自两个不同块的两个线程尝试推送/弹出到同一个出列单元格，则会发生不好的事情。使用上述方法，最坏的情况可能发生，弹出线程将无法弹出，返回 false 并将单元格标记为`dead`，并且推送线程将重新尝试推送到下一个单元格。背后的想法是，如果弹出线程无法弹出，那么无论如何可能没有太多工作要做，并且块可以终止。使用这种方法，您只会“杀死”与并行运行的块一样多的单元。

注意，在上面的代码中我不检查溢出！

# java - 自定义转换器//从或投射到？

> ID：14484740
> 
> 赞同：0
> 
> 时间：2013-01-23T16:40:00.217
> 
> 标签：java, casting, converter

在我使用很多类的项目中，这些类是通用的并使用类型定义`<? extends Comparable>`。由于`Boolean`不可比较，但我也想将这些类与布尔值一起使用，我创建了自己的`ComparableBoolean`类，如下所示：

（我为布尔写了一个类似的代理类，因为它是最终的）

```
public class ComparableBoolean extends Object implements Serializable, Comparable<ComparableBoolean>{

private static final long serialVersionUID = 1L;
static Boolean FALSE = Boolean.FALSE;
static Boolean TRUE = Boolean.TRUE;

private Boolean booleanObject;

protected Boolean getBooleanObject(){
    return this.booleanObject;
}

public ComparableBoolean(boolean value){
    this.booleanObject = new Boolean(value);
}

public ComparableBoolean(String s){
    this.booleanObject = new Boolean(s);
}

/**
 * Will return 0, when both Booleans are equal, -1 else.
 */
@Override
public int compareTo(ComparableBoolean another) {
    if (this.getBooleanObject() == another.getBooleanObject()){
        return 0;
    }else{
        return -1;
    }
}   

//Functions derived from final class Boolean
/* A Lot of Proxy functions mapping x() to Boolean.x()
} 
```

到目前为止，这有效，甚至知道布尔值不能小于或大于另一个布尔值，这符合我的要求。

但是现在，我面临的问题是我“有时”需要将“ComparableBoolen”转换为“Boolean”，反之亦然。

现在我想知道是否有可能定义自定义“演员”。

我的调查表明，可能有可能定义自己的演员表，例如（在我的案例中）：

```
public static implicit operator Boolean (ComparableBoolen cb)  
{ 
   return cb.getBooleanObject();
} 
```

和

```
public static explicit operator ComparableBoolean(Boolean b) 
{
    return new ComparableBoolean(b);
} 
```

所有这一切 - 所以谷歌说：P - 需要放入 CustomConverter ......但我既找不到这个类，也没有（Android）sdk知道“隐式/显式或运算符的含义......

我想要达到的目标：

```
Boolean b = new Boolean(true);
ComparableBoolean cb = new ComparableBoolean(true);

b = cb; //No Invalid class cast exception here :)
cb = b; //and none here. 
```

编辑：谷歌欺骗了我的：隐式/显式是来自 c# 的示例：P - Java 中是否有等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:46:23.967

定义2个方法：

```
public static ComparableBoolean valueOf ( Boolean b )
{
   if ( b.booleanValue( ) )
   {
     return TRUE;
   }
   return FALSE;
}

public Boolean booleanValue ( )
{
  return booleanObject;
}

Boolean b = cb.booleanValue( );
ComparableBoolean cb = ComparableBoolean.valueOf( b ); 
```

这与 Java 中的基元到对象的转换模式是一致的

# vb.net - 在 vb.net 的文本框中显示树视图控件的选定节点

> ID：14484743
> 
> 赞同：0
> 
> 时间：2013-01-23T16:40:08.010
> 
> 标签：vb.net

我是 .net 的初学者，我想将选定的节点字符串放入文本框。可能无法使用树视图控件，因为它在应用程序中没有用。

ps 我尝试在单击按钮时在listcheckbox 控件中插入选项，可能这件事也是不可能的。

你有另一种方法吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:47:23.040

TreeView 控件有一个名为 的事件`AfterSelect`。您可以使用此事件来检测何时选择了项目。

这是一个示例代码：

```
Private Sub TreeView1_AfterSelect(sender As Object, e As TreeViewEventArgs) Handles TreeView1.AfterSelect
    extBox1.Text = e.Node.Text
End Sub 
```

当然，您需要更改树视图`TreeView1`和`TextBox1`文本框控件的实际名称。

* * *

要将项目添加到`CheckedListBox`单击按钮时，您将使用类似于此的代码：

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    If TextBox1.Text <> "" Then CheckedListBox1.Items.Add(TextBox1.Text)
End Sub 
```

当被点击时，此代码将使用来自控件`CheckedListBox1`的文本作为输入添加一个新项目。`TextBox1``Button1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:51:13.347

使用 BeforeSelect 或 AfterSelect 事件将选定节点的文本放入文本框中。

```
textbox1.text = e.node.text 
```

用于`checkedlistbox1.items.add()`将项目添加到选中列表框。

# c# - WindowsSTore 应用程序/WinRT 中 Localfolder 中的文件和文件夹

> ID：14484746
> 
> 赞同：1
> 
> 时间：2013-01-23T16:40:15.440
> 
> 标签：c#, windows-runtime

我正在创建一个 Windows 商店应用程序。因此，我需要保留来自用户的少量数据。为此，我创建了一些写入本地文件夹的 json 文件。

当我在 Windows.Storage.ApplicationData.Current.LocalFolder 下创建这些文件和文件夹时，当我将应用程序更新到新版本时它们会被保留吗？

以这种方式保存本地数据还有其他问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:48:19.670

> 当我在 Windows.Storage.ApplicationData.Current.LocalFolder 下创建这些文件和文件夹时，当我将应用程序更新到新版本时它们会被保留吗？

是的。甚至还有基于[Version 属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.version.aspx)来管理版本控制的基础设施。

> 以这种方式保存本地数据还有其他问题吗？

主要问题是数据的生命周期与应用程序相关。如果数据是“重要的”，您可能希望使用用户数据而不是应用程序数据来存储它。有关详细信息，请参阅[应用数据](http://msdn.microsoft.com/en-us/library/windows/apps/jj553522.aspx)。

# python - Python built-in types subclassing

> ID：14484749
> 
> 赞同：7
> 
> 时间：2013-01-23T16:40:24.017
> 
> 标签：python, initialization, subclassing, built-in-types

What's wrong with this code?

```
class MyList(list):
  def __init__(self, li): self = li 
```

When I create an instance of `MyList` with, for example, `MyList([1, 2, 3])`, and then I print this instance, all I get is an empty list `[]`. If `MyDict` is subclassing `list`, isn't `MyDict` a `list` itself?

NB: both in Python 2.x and 3.x.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-23T16:42:01.533

You need to call the list initializer:

```
class MyList(list):
     def __init__(self, li):
         super(MyList, self).__init__(li) 
```

Assigning to `self` in the function just replaces the local variable with the list, not assign anything to the instance:

```
>>> class MyList(list):
...      def __init__(self, li):
...          super(MyList, self).__init__(li)
... 
>>> ml = MyList([1, 2, 3])
>>> ml
[1, 2, 3]
>>> len(ml)
3
>>> type(ml)
<class '__main__.MyList'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:44:31.720

I figured it out on my own: `self` is an instance of a subclass of `list`, so it can't be casted to list still being a `MyList` object.

# html - 在设置三列页脚样式时遇到问题（页脚标签内的 div？）

> ID：14484757
> 
> 赞同：0
> 
> 时间：2013-01-23T16:40:38.997
> 
> 标签：html, css, footer

我想在我的网站底部设计一个三栏的“胖页脚”。我能够正确设置一般页脚标签（整个页脚的背景颜色、大小和位置），但我在理解如何正确设置其中的三列样式时遇到了一些麻烦。这是我的标记：

```
<footer>

        <li class="column1">
            <li><a href="#">Contact</a></li>
            <li><a href="#">Terms & Conditions</a></li>
            <li><a href="#">Sizing Chart</a></li>
            <li><a href="#">Returns & Exchanges</a></li>
            <li><a href="#">Shipping Information</a></li>
        </li>

        <ul class="column2">
            <li>###-###-####</li>
            <li>email</li>
        </ul>

        <ul class="column3">
            <div class="fb-like" data-href="fb page" data-send="true" data-layout="button_count" data-width="30" data-show-faces="false" data-font="arial"></div>
            <li><a href="#">Facebook</a></li>
            <li><a href="#">Twitter</a></li>
            <li><a href="#">Tumblr</a></li>
        </ul>
</footer> 
```

这是我的CSS：

```
footer {
letter-spacing: 0.2px;
margin-top: 20px;
margin-bottom:30px;
margin-left: -10%;
margin-right: auto;
background: #000;
color: #fff;
position: absolute;
width: 112.1%; 
```

}

```
a:link,
a:visited {
color:#fff;
 text-decoration: none;
}
a:hover {
color: #999; 
```

}

```
.column1 {
float: left;
position: absolute; 
max-width: 950px;
} 
```

最后一个“.column1”集只是为了向您展示我一直在想我应该如何设置列的样式。我的主要问题是弄清楚如何设置这部分（是 ul.column1、#column1、.column1 吗？？？）。

任何帮助将非常感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:46:58.563

```
<footer>

        <ul class="column column1">
            <li><a href="#">Contact</a></li>
            <li><a href="#">Terms & Conditions</a></li>
            <li><a href="#">Sizing Chart</a></li>
            <li><a href="#">Returns & Exchanges</a></li>
            <li><a href="#">Shipping Information</a></li>
        </ul>

        <ul class="column column2">
            <li>###-###-####</li>
            <li>email</li>
        </ul>

        <ul class="column column3">
            <div class="fb-like" data-href="fb page" data-send="true" data-layout="button_count" data-width="30" data-show-faces="false" data-font="arial"></div>
            <li><a href="#">Facebook</a></li>
            <li><a href="#">Twitter</a></li>
            <li><a href="#">Tumblr</a></li>
        </ul>
</footer> 
```

CSS

```
.column { 
    float: left;
    margin: 0;
    padding: 0;
    width: 33.333%;
}

.column1 {
   /* specific styles for column 1 */
}

.column2 {
   /* specific styles for column 2 */
}

.column3 {
   /* specific styles for column 3 */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:44:56.073

这应该有效。

```
.column1 {
 // Do styling here for column one
}

.column2 {
 // Do styling here for column two
}

.column3 {
 // Do styling here for column three
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:46:01.783

这有帮助吗？它将每列 ( ) 的样式`footer ul`设置为具有 33% 的宽度，因此它们在 100% 宽度的页脚中均匀分布：

[http://jsfiddle.net/CPju5/](http://jsfiddle.net/CPju5/)

您也可以像 Ryan 所说的那样单独设置每一列的样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T16:46:36.217

你把 LI 给**column1**而不是 UL。写这个：

```
<ul class="column1">
            <li><a href="#">Contact</a></li>
            ....
</ul> 
```

而不是这个：

```
<li class="column1">
                <li><a href="#">Contact</a></li>
                ....
</li> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T16:47:00.117

该`footer`元素应`overflow:auto`在其 css 中。

列可以是`position: relative`.

# javascript - 用于在字符串中查找等距字符的正则表达式代码

> ID：14484762
> 
> 赞同：0
> 
> 时间：2013-01-23T16:40:51.887
> 
> 标签：javascript, regex

我将在 JavaScript 中实现 RegExp。

我认为解释这一点的最好方法是举个例子。如果搜索字符串是

```
'abc' 
```

干草堆是

```
'auaisdgbbhbcsccddciubbffs' 
```

模式需要达到：

```
'[a]uaisdg[b]bhbcsc[c]ddciubbffs' and
'au[a]isdgb[b]hbcsc[c]ddciubbffs' 
```

并返回这些字符的位置......

甚至可以让正则表达式做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:56:05.467

鉴于我们不知道您使用的编程语言，目前无法提供明确的答案。

也就是说，我不知道任何允许这种匹配的正则表达式构造。

如果我理解正确，您想找到一个“a”，例如，后面跟着一个“b”六个字符。然后，因为 'b' 在 'a' 之后出现了六个字符，所以你想在 'b' 之后找到一个 'c' 六个字符。本质上，您需要[反向引用](http://www.regular-expressions.info/brackets.html)，但您只想匹配反向引用的长度而不是实际文本。我认为这对于正则表达式是不可能的。

那里的某些正则表达式实现可能有一个不常见的结构允许这样做，因此了解您的平台会有所帮助。

**更新**

Javascript 拥有[最不强大的](http://www.regular-expressions.info/refflavors.html)正则表达式实现之一。我认为您无法使用纯正则表达式来做到这一点。您需要编写一些额外的代码（老实说，我会为您的简单示例推荐一种“仅代码”方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:44:51.080

如果我正确理解您的问题，这样的正则表达式可能会起作用：

```
"(a).{6}(b).{6}(c).{6}.*" 
```

您可能想要加入组 1、2 和 3。

由于您没有指定语言，请考虑使用上面给出的字符串的 python 中的以下示例：

```
>>> q = re.compile(r"(a).{6}(b).{6}(c)")
>>> s1 = 'auaisdgbbhbcsccddciubbffs'
>>> s2 = 'auaisdgbbhbcsccddciubbffs'
>>> res1 = q.findall(s1)
>>> res2 = q.findall(s2)
>>> print res1, res2
[('a', 'b', 'c')] [('a', 'b', 'c')]
>>> for r in res1:
    print ''.join(r)

abc
>>> for r2 in res2:
    print ''.join(r)

abc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:51:00.353

在 perl 中，您可以使用 $+[1] 等返回匹配的位置。

例如

```
$x=qqqafkewibslspcfjfjfj;
$x=~/(a).*(b).*(c)/;
print 'a was at: ' . $+[1] . ' b was at: ' . $+[2] . ' c was at:' .  $+[3];" 
```

给我吗：

```
a was at: 4 b was at: 10 c was at:15 
```

# django - url 标签 - 想要传入可逆变量

> ID：14484768
> 
> 赞同：0
> 
> 时间：2013-01-23T16:41:07.907
> 
> 标签：django, django-templates

我正在使用将变量传递到我的视图中以与`url`标签一起使用：

```
{% load url from future %}
...
{% if notification.url %}
  <a href='{% url notification.url %}'>{% notification.text %}</a>
{% endif %} 
```

`notification.url`设置为类似`post`，我希望指向的 url 的名称，但是 url 不会像那样反转`{% url 'post' %}`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:41:07.907

[橡胶](http://www.codinghorror.com/blog/2012/03/rubber-duck-problem-solving.html)在写到一半时回避了这一点。

`reverse()`解决方案是在将其传递给模板之前仅使用url 名称。

# twitter - 仅获取用户的 Twitter 照片流

> ID：14484775
> 
> 赞同：1
> 
> 时间：2013-01-23T16:41:11.707
> 
> 标签：twitter

我正在尝试获取用户发布到 Twitter 的所有照片的 JSON 格式列表。

我有以下 URL，但这也为用户带来了正常的帖子。

```
https://api.twitter.com/1/statuses/user_timeline/adrianfraguela.json?include_entities=t&count=1&callback=? 
```

我怎样才能得到他们的照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:51:03.960

我设法使用以下 PHP 做到了这一点。我为大多数行添加了注释，以便于理解。

```
<?php
//setting up variables to use with 
    $twitterUsername = 'someUser';
    $jsonURL = 'https://api.twitter.com/1/statuses/user_timeline/'.$twitterUsername.'.json?include_entities=t&count=50&callback=?';
    $json = file_get_contents($jsonURL, true); //getting the file content           
    $decode = json_decode($json, true); //create array of contents
    $counter = 0; //set up a counter so we can count the number of iterations
    $howMany = 7; //how many images we would like to return

    foreach($decode as $val) {
        $counter ++;
        $checkMedia = $val["entities"]["media"][0]; //select the branch we want to work with

            if ((is_array($checkMedia)) && array_key_exists("media_url", $checkMedia)) { //check to see if the array has a media url if so continue
                $url = $checkMedia["media_url"];//url of the image
                $picText = $val["text"];//text to go with the image

                $picText = strip_tags($picText); ?>

                <a href="<?php echo $url; ?>"><img src="<?php echo $url; ?>" alt="<?php echo $picText; ?>" title="<?php echo $picText; ?>" /></a>

                <?php if ($counter == $howMany) {break;} //break out of loop after x iterations

            }

    } ?> 
```

# javascript - 在 JavaScript 中换行

> ID：14484787
> 
> 赞同：34
> 
> 时间：2013-01-23T16:41:27.737
> 
> 标签：javascript, jquery, word-wrap

我是 JavaScript 和 jQuery 的新手。

我有一个名为`str`JavaScript 的变量，它包含很长的文本，比如

```
"A quick brown fox jumps over a lazy dog". 
```

`str`我想通过在正确的位置插入正确的`\n`或`br/`标签来包装它并将其分配给同一个变量。

我不想使用 CSS 等。您能否告诉我如何使用 JavaScript 中的适当函数来执行此操作，该函数接受`str`并返回正确的格式化文本？

就像是：

```
str = somefunction(str, maxchar); 
```

我尝试了很多，但不幸的是，没有任何结果符合我的预期！:(

任何帮助都感激不尽...

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2018-07-24T20:05:12.283

尽管这个问题已经很老了，但到目前为止提供的许多解决方案都比必要的复杂和昂贵，正如 user2257198 指出的那样 - 这完全可以用一个简短的单行正则表达式来解决。

但是我发现他的解决方案存在一些问题，包括：在最大宽度*之后*而不是之前换行，打破未明确包含在字符类中的字符，以及不考虑现有的换行符导致段落的开头被中线截断。

这导致我编写了自己的解决方案：

```
// Static Width (Plain Regex)
const wrap = (s) => s.replace(
    /(?![^\n]{1,32}$)([^\n]{1,32})\s/g, '$1\n'
);

// Dynamic Width (Build Regex)
const wrap = (s, w) => s.replace(
    new RegExp(`(?![^\\n]{1,${w}}$)([^\\n]{1,${w}})\\s`, 'g'), '$1\n'
); 
```

## 奖励功能

*   处理*任何*不是换行符的字符（例如代码）。
*   正确处理现有的换行符（例如段落）。
*   防止将空格推到换行符的开头。
*   防止在字符串末尾添加不必要的换行符。

## 解释

主要概念只是找到*不*包含 new-lines的连续字符序列`[^\n]`，直到所需长度，例如 32 `{1,32}`。通过在字符类中使用否定`^`，它更加宽容，避免丢失诸如标点符号之类的东西，否则必须明确添加：

```
str.replace(/([^\n]{1,32})/g, '[$1]\n');
// Matches wrapped in [] to help visualise

"[Lorem ipsum dolor sit amet, cons]
[ectetur adipiscing elit, sed do ]
[eiusmod tempor incididunt ut lab]
[ore et dolore magna aliqua.]
" 
```

到目前为止，这只会将字符串精确地切成 32 个字符。它之所以有效，是因为它自己的换行插入标记了第一个序列之后的每个序列的开始。

为了断词，在贪心量词之后需要一个限定符，`{1,32}`以防止它选择以单词中间结尾的序列。断字字符可能会在新行的开头产生空格，因此必须使用`\b`空白字符。`\s`它还必须放在组外以便被吃掉，以防止将最大宽度增加 1 个字符：

```
str.replace(/([^\n]{1,32})\s/g, '[$1]\n');
// Matches wrapped in [] to help visualise

"[Lorem ipsum dolor sit amet,]
[consectetur adipiscing elit, sed]
[do eiusmod tempor incididunt ut]
[labore et dolore magna]
aliqua." 
```

现在它在限制之前的单词上中断，但最后一个单词和句点在最后一个序列中不匹配，因为没有终止空格。

可以将“或字符串结尾”选项`(\s|$)`添加到空格以扩展匹配，但最好完全阻止匹配最后一行*，*因为它会导致在结尾。*为了实现这一点，可以在之前*添加完全相同序列的负前瞻，但使用字符串结尾字符而不是空白字符：

```
str.replace(/(?![^\n]{1,32}$)([^\n]{1,32})\s/g, '[$1]\n');
// Matches wrapped in [] to help visualise

"[Lorem ipsum dolor sit amet,]
[consectetur adipiscing elit, sed]
[do eiusmod tempor incididunt ut]
labore et dolore magna aliqua." 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-23T19:05:26.893

这应该在 maxChar 的最近空白处插入换行符：

```
str = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It w as popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.";

str = wordWrap(str, 40);

function wordWrap(str, maxWidth) {
    var newLineStr = "\n"; done = false; res = '';
    while (str.length > maxWidth) {                 
        found = false;
        // Inserts new line at first whitespace of the line
        for (i = maxWidth - 1; i >= 0; i--) {
            if (testWhite(str.charAt(i))) {
                res = res + [str.slice(0, i), newLineStr].join('');
                str = str.slice(i + 1);
                found = true;
                break;
            }
        }
        // Inserts new line at maxWidth position, the word is too long to wrap
        if (!found) {
            res += [str.slice(0, maxWidth), newLineStr].join('');
            str = str.slice(maxWidth);
        }

    }

    return res + str;
}

function testWhite(x) {
    var white = new RegExp(/^\s$/);
    return white.test(x.charAt(0));
}; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-24T13:20:18.417

这是一个较短的解决方案：

```
var str = "This is a very long line of text that we are going to use in this example to divide it into rows of maximum 40 chars."

var result = stringDivider(str, 40, "<br/>\n");
console.log(result);

function stringDivider(str, width, spaceReplacer) {
    if (str.length>width) {
        var p=width
        for (;p>0 && str[p]!=' ';p--) {
        }
        if (p>0) {
            var left = str.substring(0, p);
            var right = str.substring(p+1);
            return left + spaceReplacer + stringDivider(right, width, spaceReplacer);
        }
    }
    return str;
} 
```

*该函数使用递归来解决问题。*

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-08-01T23:42:22.030

我的版本。它返回一个行数组而不是一个字符串，因为它在您想要使用的行分隔符上更灵活（如换行符或 html BR）。

```
function wordWrapToStringList (text, maxLength) {
    var result = [], line = [];
    var length = 0;
    text.split(" ").forEach(function(word) {
        if ((length + word.length) >= maxLength) {
            result.push(line.join(" "));
            line = []; length = 0;
        }
        length += word.length + 1;
        line.push(word);
    });
    if (line.length > 0) {
        result.push(line.join(" "));
    }
    return result;
}; 
```

要将线阵列转换为字符串到字符串：

```
wordWrapToStringList(textToWrap, 80).join('<br/>'); 
```

请注意，它只会自动换行，不会破坏长词，而且它可能不是最快的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-26T14:45:48.623

像这样的许多行为可以使用正则表达式作为单行来实现（使用具有最少匹配字符数的非贪婪量词，或具有最大字符数的贪婪量词，具体取决于您需要的行为）。

下面显示了在 Node V8 REPL 中工作的非贪婪全局替换，因此您可以看到命令和结果。但是，同样应该在浏览器中工作。

此模式搜索与定义的组匹配的至少 10 个字符（\w 表示单词字符，\s 表示空白字符），并将模式锚定到 \b 单词边界。然后，它使用反向引用将原始匹配替换为附加换行符的匹配（在这种情况下，可选择替换括号内反向引用中未捕获的空格字符）。

```
> s = "This is a paragraph with several words in it."
'This is a paragraph with several words in it.'
> s.replace(/([\w\s]{10,}?)\s?\b/g, "$1\n")
'This is a \nparagraph \nwith several\nwords in it\n.' 
```

在原始海报要求的格式中，这可能看起来像......

```
var str = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It w as popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.";

function wordWrap(text,width){
    var re = new RegExp("([\\w\\s]{" + (width - 2) + ",}?\\w)\\s?\\b", "g")
    return text.replace(re,"$1\n")
}

> wordWrap(str,40)
'Lorem Ipsum is simply dummy text of the\nprinting and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s\n, when an unknown printer took a galley of\ntype and scrambled it to make a type specimen\nbook. It has survived not only five centuries\n, but also the leap into electronic typesetting\n, remaining essentially unchanged. It w as popularised in the 1960s with the\nrelease of Letraset sheets containing Lorem\nIpsum passages, and more recently with desktop publishing\nsoftware like Aldus PageMaker including\nversions of Lorem Ipsum.' 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-10-09T14:48:41.823

我的变种。它保持文字完整，因此它可能并不总是符合 maxChars 标准。

```
function wrapText(text, maxChars) {
        var ret = [];
        var words = text.split(/\b/);

        var currentLine = '';
        var lastWhite = '';
        words.forEach(function(d) {
            var prev = currentLine;
            currentLine += lastWhite + d;

            var l = currentLine.length;

            if (l > maxChars) {
                ret.push(prev.trim());
                currentLine = d;
                lastWhite = '';
            } else {
                var m = currentLine.match(/(.*)(\s+)$/);
                lastWhite = (m && m.length === 3 && m[2]) || '';
                currentLine = (m && m.length === 3 && m[1]) || currentLine;
            }
        });

        if (currentLine) {
            ret.push(currentLine.trim());
        }

        return ret.join("\n");
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-25T18:56:46.980

这是基于 javabeangrinder 解决方案的扩展答案，该解决方案还包装了多段输入的文本：

```
 function wordWrap(str, width, delimiter) {
    // use this on single lines of text only

    if (str.length>width) {
      var p=width
      for (; p > 0 && str[p] != ' '; p--) {
      }
      if (p > 0) {
        var left = str.substring(0, p);
        var right = str.substring(p + 1);
        return left + delimiter + wordWrap(right, width, delimiter);
      }
    }
    return str;
  }

  function multiParagraphWordWrap(str, width, delimiter) {
    // use this on multi-paragraph lines of text

    var arr = str.split(delimiter);

    for (var i = 0; i < arr.length; i++) {
        if (arr[i].length > width)
          arr[i] = wordWrap(arr[i], width, delimiter);
    }

    return arr.join(delimiter);
  } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-01T16:52:21.657

在寻找使用正则表达式和其他实现的完美解决方案之后。我决定纠正我自己的。它并不完美，但对我的情况来说效果很好，当你的所有文本都是大写时，它可能无法正常工作。

```
function breakTextNicely(text, limit, breakpoints) {

      var parts = text.split(' ');
      var lines = [];
      text = parts[0];
      parts.shift();

      while (parts.length > 0) {
        var newText = `${text} ${parts[0]}`;

        if (newText.length > limit) {
          lines.push(`${text}\n`);
          breakpoints--;

          if (breakpoints === 0) {
            lines.push(parts.join(' '));
            break;
          } else {
          	text = parts[0];
    	  }
        } else {
          text = newText;
        }
    	  parts.shift();
      }

      if (lines.length === 0) {
        return text;
      } else {
        return lines.join('');
      }
    }

    var mytext = 'this is my long text that you can break into multiple line sizes';
    console.log( breakTextNicely(mytext, 20, 3) );
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-02-06T14:28:37.940

```
function GetWrapedText(text, maxlength) {    
    var resultText = [""];
    var len = text.length;    
    if (maxlength >= len) {
        return text;
    }
    else {
        var totalStrCount = parseInt(len / maxlength);
        if (len % maxlength != 0) {
            totalStrCount++
        }

        for (var i = 0; i < totalStrCount; i++) {
            if (i == totalStrCount - 1) {
                resultText.push(text);
            }
            else {
                var strPiece = text.substring(0, maxlength - 1);
                resultText.push(strPiece);
                resultText.push("<br>");
                text = text.substring(maxlength - 1, text.length);
            }
        }
    }
    return resultText.join("");
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-11-03T15:38:25.517

我正在使用简单的 ajax 和 javascript 实践来做到这一点

```
var protest = "France is actually the worlds most bad country consisting of people and president full of mentaly gone persons and the people there are causing the disturbance and very much problem in the whole of the world.France be aware that one day there will be no france but you will be highly abused of your bad acts.France go to hell.";

protest = protest.replace(/(.{100})/g, "$1<br>");

document.write(protest);
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-06-16T01:36:59.660

```
const newString = string.split(' ').reduce((acc, curr) => {
  if(acc[acc.length - 1].length > 100) {
    acc[acc.length - 1] = acc[acc.length - 1].concat(" ").concat(curr);
    acc.push(""); // new line
  } else {
    acc[acc.length - 1] = acc[acc.length - 1].concat(" ").concat(curr);
  }
  return acc;
}, [""]).join("\n");

console.log(newString) 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2021-06-29T02:52:27.830

我知道我很晚了，但只是想分享任何评论/改进的代码。学习和即兴编写代码总是很有趣。

```
var text = "It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).";

    function WordWrap(text, maxLength){
        if(!text) return 'Please provide text';

        const strWords = text.split(' ');
        let tempWord = ''; 
        let lineLength = 0;

        return strWords.reduce((acc, word) => {
            lineLength += word.length;

            if(lineLength > maxLength){
                lineLength = 0;
                tempWord = word;
                return `${acc} <br />`
            } else {
                const withTempWord = `${acc} ${tempWord} ${word}`;
                tempWord = '';
                return withTempWord;
            }
        }, '');
    };

    document.write(WordWrap(text, 14)); 
```

# asp.net - 我可以同时使用属性和 ModelState.AddModelError 来验证 asp.net mvc 中的模型属性吗？

> ID：14484798
> 
> 赞同：0
> 
> 时间：2013-01-23T16:41:55.543
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, validation

在我的 asp.net mvc 3 项目中，我在需要验证的属性上使用 [Required] 属性。我还使用 ModelState.AddModelError 将错误添加到相同的属性（带有属性）。使用第二种方法添加的错误不会出现。可能是什么原因？

这是代码：

1) 有属性的属性

```
[Required(ErrorMessage = "Product name is required")]
        public string Name { get; set; } 
```

2）在控制器动作方法中

```
if (p.Name.Length < 3)
   ModelState.AddModelError("Name",
      "Product name should be at least 3 characters long"); 
```

3) 在视图中

```
@Html.EditorFor(i => i.CurrentItem.Product.Name)
        Html.ValidationMessageFor(i => i.CurrentItem.Product.Name)
        @Html.ValidationMessage("Name") 
```

那么，mabby 我不能同时使用属性和 ModelState 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:46:45.823

至于为什么您的实现不起作用，那是因为 AddModelError 的第一个参数应该是您的属性的完全限定路径，该路径基于视图强类型化的类型。在你的情况下，我相信它会是“CurrentItem.Product.Name”

我推荐使用 Fluent Validation 库。它允许您编写自定义验证并为您处理添加到 ModelState 的操作。这是很不错的。

流利验证： http: [//fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:48:39.350

`StringLength`您可以通过添加属性来实现相同的目的：

```
[StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 3)] 
```

`100`最大长度和最小长度在哪里`3`。

# ruby-on-rails - 如何在没有“根”节点的情况下使用不同的模板进行收集与 rabl

> ID：14484799
> 
> 赞同：3
> 
> 时间：2013-01-23T16:41:55.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, api, rabl

我和 Rabl 一起工作了一段时间，就在今天，我遇到了一个我无法很好解决的有趣问题。

所以，我有一个从 GET ".../list/512/resources" 返回的集合，这是我用来返回的示例 rabl 模板（没有根）：

```
collection @resources
extends "api/v1/resources/_base" 
```

=> { [ {...}, {...}, {...} ] }

但是，现在我意识到我想根据每个资源的属性为每个资源返回不同的模板......所以这很容易对吧？

```
node @resources => :resources do |resource|
  if resource.type == 'Document'
    partial('...', :object => resource)
  elsif @resource.type == 'Folder'
    partial('...', :object => resource)
  end
end 
```

=> {资源：[{...}，{...}，{...}]}

但是哦！现在我不想要那个“资源”节点了..应该怎么做？我试过类似的东西：

```
array = []

@resources.each do |resource|
  if resource.type == 'Document'
    array << partial('...', :object => resource)
  elsif @resource.type == 'Folder'
    array << partial('...', :object => resource)
  end
end

collection array 
```

但没有成功，它返回空对象，例如 => [ {}, {}, {} ]。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T00:12:30.643

只需删除整个“@resources => :resources”即可

```
node do |resource|
  if resource.type == 'Document'
    partial('...', :object => resource)
  elsif @resource.type == 'Folder'
    partial('...', :object => resource)
  end
end 
```

您可能需要检查[https://github.com/rails-api/active_model_serializers](https://github.com/rails-api/active_model_serializers)作为 rabl 的替代品。鉴于您的用例，它可能更容易使用。

# sql - 每个字母表的 sql 中的顶级函数

> ID：14484805
> 
> 赞同：0
> 
> 时间：2013-01-23T16:42:21.167
> 
> 标签：sql, sql-server-2005

如果我有一个列值 alpha、azera、beta、brown、charlie、cling 的表

我如何获得 azera、brown 和 cling 等值，因为 alpha 中的“al”在 azera 中首先出现“az”。我在 SQL 2005 中开始使用它。

```
Select top 1 columnA from TableA order by ColumnA desc 
```

它只给了我 1 个结果，但我需要得到每个字母 AB 和 C。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:47:13.310

我将推测“字母”是指“第一个字母”。您可以使用以下方法解决此问题`row_number()`：

```
select columnA
from (select columnA,
             row_number() over (partition by left(columnA, 1) order by columnA desc) as seqnum
      from TableA
     ) t
where seqnum = 1
order by columnA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:47:47.160

你的问题有点不清楚，但我假设你想要每个起始字母的最大（按字母顺序排序）值。也就是说，如果它是一个字典，您想要 的最后一个条目`a`， 的最后一个条目`b`，依此类推。如果是这样，请尝试：

```
SELECT MAX(myCol)
FROM myTable
GROUP BY LEFT(myCol,1) 
```

[SQL小提琴](http://www.sqlfiddle.com/#!3/aec4c/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:49:07.277

我假设您想按第一个字母进行分区并为每个字母获取一个单词。

您可以使用`CTE`with`Row_Number`函数：

```
WITH cte 
     AS (SELECT ColumnA, 
                rn=Row_number() 
                     OVER( 
                       partition BY Substring(ColumnA, 1, 1) 
                       ORDER BY ColumnA DESC) 
         FROM   TableA) 
SELECT * 
FROM   cte 
WHERE  rn = 1 
```

[**演示**](http://www.sqlfiddle.com/#!3/a7459/5/0)

结果：

```
azera   
brown   
cling 
```

# python - 对为什么我的 python（在 Mac 上）自动更新到 2.7.3 感到困惑

> ID：14484806
> 
> 赞同：0
> 
> 时间：2013-01-23T16:42:29.030
> 
> 标签：python, macos

我使用的是 Mac 10.6.8 计算机，在今天之前，每当我启动终端并键入“python”时，它都会告诉我我使用的是 python 2.6.1，即使我已经从 Python 安装了 2.7.3。几个月前的组织：

```
cd
python
Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) 
```

所以我在网上搜索了下使用python解释器时如何更改为Python 2.7.3。我从 Python.org 安装了它，根据这个问题（[Mac OSX: Switch to Python 2.7.3](https://stackoverflow.com/questions/10445666/mac-osx-switch-to-python-2-7-3)），Apple 和 Python.org 的 python 的默认位置不同。然后我搬到了 Python.org python 所在的位置并简单地输入了 python：

```
cd /usr/local/bin
python 
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
```

一切都如预期的那样，因为 python 应该首先调用其目录中的版本。我关闭了旧终端并打开了一个新窗口，所以我回到了我的主目录。但是这次当我使用python时，我看到我回到了2.7.3。

```
cd
python
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
```

这就是我想要的，但我很*困惑为什么会这样*。我所做的只是去了 2.7.3 所在的地方并输入了“python”。我没有更改任何变量，请在此处（[https://superuser.com/questions/35256/how-can-i-change-the-default-python-version-on-snow-leopard](https://superuser.com/questions/35256/how-can-i-change-the-default-python-version-on-snow-leopard)）或此处进行更改（[如何更改默认 python 版本？](https://stackoverflow.com/questions/5846167/how-to-change-default-python-version)），更改我的 bash 文件等。为什么我上面的操作会使默认 python 突然切换到 2.7.3？

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:49:04.203

只是`python`自己输入不会从本地目录加载 python。`$PATH`它将在您的环境变量中查找。用于`./python`调用本地目录中的二进制文件。

这意味着您的第二个`python`电话*已经*与第一个不同了；Python 安装程序必须已将新位置添加到您的`PATH`变量中（通常通过`.bashrc`或类似的 shell 启动构造）。

用于`/usr/bin/python`运行 Mac OS X 默认设置，或用于`python2.6`按版本查找 python 二进制文件。

# python - Python / Tkinter 列表框问题

> ID：14484809
> 
> 赞同：2
> 
> 时间：2013-01-23T16:42:35.797
> 
> 标签：python, events, listbox, widget, tkinter

[我在这里](https://stackoverflow.com/questions/14467604/python-tkinter-listbox-event-binding)发布了一个问题，并建议我重组代码。现在已经不同了，我觉得有理由提出一个新问题。

无论如何，我正在尝试向列表框添加拖放功能，但我认为第一步是让事件绑定首先工作。目前，当我单击列表时，单击列表框时出现以下错误。出现列表框窗口，但是当我单击它时会发生错误。

```
 "AttributeError: make_list instance has no attribute 'nearest'. 
```

此外，当我在 build_listbox 方法中打印列表框时，会打印以下小数点 .40720520L。这不应该打印列表框中的值吗？毕竟，方法相同。列表框是否未正确创建？

```
from Tkinter import *
import Tkinter

class make_list:

    def move_mouse(self, event):
        self.curIndex = event.nearest(event.y)
        print self.curIndex

    def click_button(self, event):
        w= event.widget
        self.curIndex = int(w.curselection()[0])
        #print self.curIndex
        value = w.get(self.curIndex)
        print value

    def build_main_window(self):
        self.build_listbox()

    def build_listbox(self):
        listbox = Listbox()
        listbox.bind('<<ListboxSelect>>', self.click_button)
        listbox.bind('<B1-Motion>', self.move_mouse)
        for item in ["one", "two", "three", "four"]:
            listbox.insert(END, item)    
        listbox.insert(END, "a list entry")
        listbox.pack()
        print listbox
        return

if __name__ == '__main__':
    start = make_list()
    start.build_main_window()
    mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:24:24.650

在 Tkinter 小部件上执行 a 时获得的值在`print`很大程度上与用户无关，它只是`Tcl`为您创建的变量的名称。

现在，由于显然您的代码正在运行（通过快速浏览问题中的评论），我建议以不同的方式执行拖放功能。例如，如果我们有一个与 中的值相关联的值`Listbox`列表，那么如果我们可以更新这个列表然后它会反映在`Listbox`显示上，那么执行任务会容易得多，对吧？太糟糕了，我们在 Python 中没有这样的东西，但目前考虑以下代码：

```
import Tkinter

def list_click(event):
    w = event.widget
    index = w.nearest(event.y)
    w._selection = index

def list_motion(event):
    w = event.widget
    if w._selection is None:
        return
    index = w.curselection()[0]
    w._var.swap(index, w._selection)
    w._selection = index

def list_clear(event):
    event.widget._selection = None

root = Tkinter.Tk()

v = ListVar(values=('one', 'two', 'three', 'four'))
v.append('a list entry')

listbox = Tkinter.Listbox(listvar=v)
listbox.pack()

listbox._selection = None
listbox._var = v
listbox.bind('<1>', list_click)
listbox.bind('<B1-Motion>', list_motion)
listbox.bind('<ButtonRelease-1>', list_clear)

root.mainloop() 
```

此代码以下列方式工作：当在列表框中单击鼠标时，它将最近的项目标记为“已选择”，当您移动鼠标时，它交换项目并更新选择，当您释放鼠标按钮时，它清除选择. 那么缺少的是这个`ListVar`东西。这里是：

```
class ListVar(Tkinter.Variable):
    def __init__(self, master=None, name=None, **kwargs):
        Tkinter.Variable.__init__(self, master, kwargs.get('values'), name)

    def set(self, values):
        self._tk.call('set', self._name, values)

    def set_index(self, index, value):
        self._tk.call('lset', self._name, index, value)

    def get_index(self, index):
        return self._tk.eval('lindex $%s %d' % (self._name, index))

    def get(self, start=None, end=None):
        if start is None and end is None:
            res = self._tk.eval('lrange $%s 0 end' % self._name)
        elif end is None:
            res = self._tk.eval('lrange $%s %d end' % (self._name, start))
        else:
            res = self._tk.eval('lrange $%s %d %d' % (self._name, start, end))
        return self._tk.splitlist(res)

    def swap(self, a, b):
        if a != b:
            tmp = self.get_index(a)
            self.set_index(a, self.get_index(b))
            self.set_index(b, tmp)

    def append(self, value):
        self._tk.eval('lappend %s {%s}' % (self._name, value)) 
```

它非常粗糙，如果传递“hello{”等值会失败。这可以通过多种方式改进。

# com - COM - 将 VB 脚本转换为 AutoHotkey

> ID：14484813
> 
> 赞同：0
> 
> 时间：2013-01-23T16:42:53.567
> 
> 标签：com, autohotkey

希望对于任何了解 COM 的人来说，这应该是一个简单的过程。我有一个 VB 脚本，它使用办公室拼写检查器来检查添加到剪贴板的内容。这已经流传了很多年，但现在 AutoHotkey 支持 COM 对象，我想我会尝试将它转换为 AHK。我对 COM 了解不多，但到目前为止它工作得很好，除了一行。

```
oWD.ActiveDocument.Close wdDoNotSaveChanges 
```

我不知道如何通过

```
wdDoNotSaveChanges 
```

恒定到

```
oWD.ActiveDocument.Close 
```

在自动热键中。如果我在 VB 脚本中按上述方式使用它，我会收到**“此行不包含可识别的操作”**错误。再次抱歉没有使用正确的代码标签，但我有视力障碍，帖子编辑器无法完全访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:42:51.870

wdDoNotSaveChanges 是一个 Office 常量。有时你可以通过谷歌搜索“wdDoNotSaveChanges 值”来获得幸运，或者有时你必须去挖掘。在这种情况下，谷歌答案有效，因此值为 0，因此您可以将代码转换为：

```
oWD.ActiveDocument.Close(0) 
```

或者更自我记录的：

```
oWD.ActiveDocument.Close(wdDoNotSaveChanges:=0) 
```

后者对于所有 API 常量都是一个很好的技巧，但您必须知道在哪里查找值。

# android - 布局权重在纵向模式下不起作用

> ID：14484815
> 
> 赞同：0
> 
> 时间：2013-01-23T16:42:55.763
> 
> 标签：android, android-layout, android-linearlayout

有一个我无法弄清楚的 Android 问题，所以我在这里要求另一双眼睛：D。我有一个片段，我试图在横向模式下并排显示地图和列表视图，在纵向模式下自上而下显示。现在它在横向时按预期工作，但由于某种原因，当它处于纵向模式时，地图占用的空间比我列出的重量要多。想法？下面是横向和纵向的 xml 布局，以及片段代码和一些当前外观的屏幕截图。根据我的经验，它应该按我的预期工作，而不是现在的样子。再次感谢！:)

**XML 风景**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayoutMapSearch"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/npecCarbon"
    android:baselineAligned="false"
    android:orientation="horizontal" >
    <FrameLayout
        android:id="@+id/placeHolderMapView"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" >
    </FrameLayout>
    <LinearLayout
        android:id="@+id/LinearLayout2"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" >
        <ListView
            android:id="@+id/listViewTicketSearchResults"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
        </ListView>
        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="@string/label_no_data"
            android:textAppearance="@android:style/TextAppearance.Medium"
            android:textColor="@color/npecWhite"
            android:visibility="gone" >
        </TextView>
    </LinearLayout>
</LinearLayout> 
```

**XML 肖像**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayoutMapSearch"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/npecCarbon"
    android:orientation="vertical" >
    <FrameLayout
        android:id="@+id/placeHolderMapView"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >
    </FrameLayout>
    <LinearLayout
        android:id="@+id/LinearLayout2"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >
        <ListView
            android:id="@+id/listViewTicketSearchResults"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
        </ListView>
        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="@string/label_no_data"
            android:textAppearance="@android:style/TextAppearance.Medium"
            android:textColor="@color/npecWhite"
            android:visibility="gone" >
        </TextView>
    </LinearLayout>
</LinearLayout> 
```

**片段代码**

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    if(mapFragment == null) {
        mapFragment = SupportMapFragment.newInstance();
        mapFragment.setRetainInstance(true);
        FragmentTransaction fragmentTransaction = getChildFragmentManager().beginTransaction();
        fragmentTransaction.add(R.id.placeHolderMapView, mapFragment);
        fragmentTransaction.commit();
    }
    if(mapResults == null) {
        mapResults = new ArrayList<String>();
        mapResults.add("One");
        mapResults.add("Two");
        mapResults.add("Three");
        mapResults.add("Four");
    }
    ArrayAdapter<String> simpleAdapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_single_choice, mapResults.toArray(new String[mapResults.size()]));
    listViewSearchResults.setAdapter(simpleAdapter);
} 
```

**截图** [Imgur 相册截图](http://imgur.com/a/Fc3YC#0)

**更新** 我能够达到我想要的效果，但不依赖重量属性。对于纵向布局，我将地图视图的容器高度设置为显示高度的一半，并且由于列表视图的权重起作用，它会自动填充屏幕的剩余一半。

**身高代码**

```
private void calculateNewHeightForMap() {
    Display display = getActivity().getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    if(size.y > size.x) { //We're in portrait mode, calculate height
    LayoutParams mapParams = new LayoutParams(LayoutParams.MATCH_PARENT, size.y / 2);
    frameLayoutMapPlaceHolder.setLayoutParams(mapParams);
    } 
```

虽然这在技术上总是对我有用，虽然它确实达到了相同的结果，但我仍然很好奇为什么地图部分的权重似乎被忽略了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:23:16.653

尝试`layout_weight=".20"`以纵向模式添加到列表视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:51:49.787

尝试将 weightSum="2" 添加到根 LinearLayout。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T19:37:36.877

不管你给了多少重量。由于权重总和将在根上应用，将始终视为 100%，并且您必须根据它对其进行划分，并在根布局中将其视为 100%。并在子项或茎组件中应用布局权重，以根据根进行划分。

# iphone - 强制 UIImagePickerController 以纵向/尺寸 iOS 拍照

> ID：14484816
> 
> 赞同：10
> 
> 时间：2013-01-23T16:43:09.070
> 
> 标签：iphone, xcode, orientation, uiimagepickercontroller

我的应用程序中唯一允许的方向是横向。我在 target > summery 下的项目属性中强制执行此操作，并且只允许在`shouldAutorotateToInterfaceOrientation`

问题是当我水平握住手机（横向）拍照时，照片将以横向拍摄，而 UI 保持纵向模式。

这意味着在横向模式下，我得到一个 3264 x 2448 的宽图像，而不是在纵向模式下得到的高大图像 (2448 x 3264)。

接下来用户可以裁剪图像，但如果图像是在横向模式下拍摄的，我会得到非常难看的拉伸图像。添加边框或将 UI 切换为横向不是一种选择。

即使手机水平握住（横向模式） ，有没有办法强制`UIImagePickerController`以纵向尺寸拍照？

`UIImagePickerController`我使用以下设置初始化：

```
 imagePicker =[[UIImagePickerController alloc] init];
    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePicker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;
    imagePicker.cameraDevice = UIImagePickerControllerCameraDeviceRear;
    imagePicker.showsCameraControls = NO;
    imagePicker.modalPresentationStyle = UIModalPresentationFullScreen;
    imagePicker.wantsFullScreenLayout = YES;
    imagePicker.cameraViewTransform = CGAffineTransformScale(imagePicker.cameraViewTransform,CAMERA_TRANSFORM, CAMERA_TRANSFORM);
    imagePicker.navigationBarHidden = YES;
    imagePicker.toolbarHidden = YES;
    [self presentModalViewController:imagePicker animated:NO];
    imagePicker.cameraOverlayView = self.cameraOverlay;
    imagePicker.cameraFlashMode = UIImagePickerControllerCameraFlashModeOff; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-23T23:25:53.257

在 UIImage 上设置 imageOrientation 标志，具体取决于拍摄照片时相机的位置。这是一个只读标志，它决定了当您将图像放入视图时 iOS 将尝试显示图像的方向。

您可以在显示图像之前检查方向，并相应地操作 imageView。假设您有一个 imageView 包含在相同大小的视图中......

```
- (void) imagePickerImage:(UIImage*)image
{
    if (image.imageOrientation == UIImageOrientationUp ) {
        self.imageView.bounds = CGRectMake
           (0, 0, self.view.bounds.size.height, self.view.bounds.size.width);
        self.imageView.transform = CGAffineTransformMakeRotation(M_PI/2);

    } else if (image.imageOrientation == UIImageOrientationDown) {
        self.imageView.bounds = CGRectMake
           (0, 0, self.view.bounds.size.height, self.view.bounds.size.width);
        self.imageView.transform = CGAffineTransformMakeRotation(-M_PI/2);
    }
    else {
        self.imageView.bounds = self.view.bounds;
        self.imageView.transform = CGAffineTransformIdentity;
    }
    self.imageView.image = image;
} 
```

另一种选择可能是从 imageRep 创建一个新图像：这应该去除方向信息。

*更新*
iPhone 照片的原始像素尺寸是横向的，无论拍摄时手机的握持方式如何。只有方向~~EXIF~~标志设置不同。您不能更改~~EXIF~~标志，但可以通过将图像位图数据复制到新的位图图像来将其删除。另请参阅我的[答案](https://stackoverflow.com/search?q=user%3A1375695+EXIF)。

这是一种~~去除 EXIF~~数据并添加纵向~~EXIF~~标志的方法。您正在创建一个新的 UIImage 并在创建它时设置~~EXIF~~标志。您可以使用它来将横向图像标记为纵向 ( `UIImageOrientationRight`)。

```
- (UIImage*)stripExif:(UIImage*)image
{
    CGImageRef cgImage = image.CGImage;
    UIImage* result = [UIImage imageWithCGImage:cgImage scale:1 
                                    orientation:UIImageOrientationRight];
    return result;
} 
```

*更新 2*
将 UIImage 的 imageOrientation 属性称为 EXIF 标志是一种误导，原因有二：

(1) 图像元数据以字典式的结构存储，其中可以是多个子字典，其中一个是EXIF。其他包括例如 TIFF、IPTC、PNG。顶级字典中还有一组通用的标签。*方向*键不在 EXIF 部分中，它位于 TIFF 和 IPTC 子词典（如果存在）中，也作为顶级键。在将图像元数据作为一个整体提及时，我们倾向于使用术语 EXIF，但这是一种误导。

(2) 图像文件中的方向元数据使用一组不同于 Apple 在其 UIImage.imageOrientation 属性中使用的标志约定。因此，为了正确显示图像，您必须小心读取此属性。Apple 显然使用图像文件的方向元数据来设置 UIImage 的属性，但有一些翻译正在进行。

```
 Orientation 

 Apple/UIImage.imageOrientation     Jpeg/File kCGImagePropertyOrientation

    UIImageOrientationUp    = 0  =  Landscape left  = 1
    UIImageOrientationDown  = 1  =  Landscape right = 3
    UIImageOrientationLeft  = 2  =  Portrait  down  = 8
    UIImageOrientationRight = 3  =  Portrait  up    = 6 
```

[这是一个](http://www.impulseadventure.com/photo/exif-orientation.html)显示“exif”轮换标志的页面。与[Apple 的 UIImage 文档](https://developer.apple.com/library/IOs/#documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html)（常量部分）进行比较。另请参阅 Apple 的[CGImageProperties_Reference](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGImageProperties_Reference/Reference/reference.html)，尤其是`kCGImagePropertyOrientation`

我已经将一个小项目加载到 github 上，记录[各种 UIImage 元数据问题](https://github.com/foundry/UIImageMetadata)

# jquery - 打开带有 iframe 的花式框，将高度指定为 %

> ID：14484820
> 
> 赞同：0
> 
> 时间：2013-01-23T16:43:28.793
> 
> 标签：jquery, fancybox

我想打开一个内容类型为 iframe 的 fancybox modal，我想将高度指定为 %。

如果我使用

```
 $(".FullWindow").fancybox({
    type: 'iframe',
    href: 'http://www.google.com',
    autoSize: false,
    width: "95%",
    height: "95%"
}); 
```

然后这会将模式打开到正确的大小（但不加载 url - 我只添加了 href 属性作为测试）但是当我使用

```
 $(".FullWindow").fancybox({
    type: 'iframe',
    autoSize: false,
    width: "95%",
    height: "95%"
}); 
```

页面打开但不在窗口高度的 95% 处。

我想我错过了一些简单的东西

**问题已解决 更新到最新版本的 fancybox 和最新版本的 JQuery，现在可以正常工作了。感谢那些提供帮助的人。**

# ruby - 在 Windows 中更新 YAML 文件

> ID：14484827
> 
> 赞同：0
> 
> 时间：2013-01-23T16:43:39.163
> 
> 标签：ruby, io, yaml

我正在尝试使用以下代码更新 YAML 文件：

```
@languages = LanguageList::COMMON_LANGUAGES.sort{ |a, b| a.name <=> b.name }
File.open('c:\\RailsInstaller\\Ruby1.9.3\\lib\\ruby\\gems\\1.9.1\\gems\\language_list-0.1.0\\languages.yml', "w+") do |f|
  f.write(@languages.to_yaml)
end 
```

不幸的是，它没有产生任何结果。也没有错误消息。我按照[此处](http://www.ruby-doc.org/core-1.9.3/IO.html)的说明操作并逃脱了 \'s。打开和覆盖 YAML 文件可能还需要什么？

# php - 如何基于 3 个选择框使用 javascript 创建可过滤列表

> ID：14484832
> 
> 赞同：2
> 
> 时间：2013-01-23T16:43:54.500
> 
> 标签：php, javascript, html, wordpress

我需要方法来实现类似于此网页上的内容

[http://www.brownthomas.com/brands/](http://www.brownthomas.com/brands/)

我将在页面上列出品牌列表。每个品牌应该有3条信息：

1.  首字母
2.  商店（可以是多个）
3.  类别（可以是多个）

So I need 3 select boxes, when one of the select boxes is selected it will filter the brands underneath based on this.

我希望过滤器通过 javascript 在浏览器中发生。

所以我在想，我如何添加一些关于品牌的额外信息，然后从视图中删除与选择框标准不匹配的所有内容。

知道我怎么能做到这一点吗？

此外，在输入品牌方面，我将使用 wordpress 和高级自定义字段从后端实现这一目标。我只是不知道从哪里开始。

我在想这样的事情

```
<div classs="brand-holder">
    <div class="brand-column">
        <h3>0-9</h3>
        <ul class="brand-list">
            <li data-alpha="0" data-store="Arnotts,BrownThomas" data-category="Mens Wear, Shoes">Brand name</li>

        </ul>

    </div>
    <div class="brand-column">
        <h3>A</h3>
        <ul class="brand-list">
            <li data-alpha="A" data-alpha="A" data-store="Arnotts,Dundrum" data-category="Womens Wear, Cosmetics" >A Brand Name</li>

        </ul>

    </div>

</div> 
```

但我不知道如何，我会在后端构建它。

==========edit added========= 我想后端不允许我分离与商店相关的类别。这里是香奈儿 (Chanel) 的一个例子，布朗托马斯 (Brown Thomas) 销售女装、鞋类、珠宝和配饰以及美容产品。阿诺茨只卖美容。Dundrum 出售美容和配饰。我将如何实现这一目标？

我在想这样的东西可以用于布局，但我不知道 javascript 可以与选择框一起使用

```
<div classs="brand-holder">

<div class="brand-column">
    <h3>A</h3>
    <ul class="brand-list">
        <li data-alpha="A" data-store="Arnotts,Dundrum,brownThomas" data-arnotts-category="Womens Wear, Cosmetics" data-dundrum-category="Womens Wear" data-brownThomas-category="Beauty" >A Brand Name <i>[store:Arnotts,Dundrum :: category: Womens Wear, Cosmetics]</i></li>
    </ul>
</div> 
```

-== 编辑添加======

这就是目前在后端选择信息的方式，

![在此处输入图像描述](../Images/95c665cbd3425a71bc35baa2c031c99c.png)

但我需要它，所以它可以与这样的东西一起使用

![在此处输入图像描述](../Images/24decd2528db0c3b6cac09a0b3ff91a0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:00:19.017

我会将类别作为 CSS 类，为所有类别生成 CSS 规则，然后更改父元素的 CSS 类。

例子：

```
<div id="list" class="container all">
    <div class="item startletterA storeFoo categoryNice">
</div>

<style>
    container     .item { display: none; }
    container.all .item { display: block; }
    container.startletterA item.startletterA { display: block; }
    container.startletterB item.startletterB { display: block; }
    ...
    container.storeFoo item.storeFoo { display: block; }
    container.storeBar item.storeBar { display: block; }
    ...
</style>

<select type="radio" onclick="$('list').replaceClass('startletter*', 'startletterA');"/> 
```

可能不存在，`replaceClass()`但实施起来并不难。

与基于 JavaScript (jQuery) 的解决方案相比，优势在于速度要快得多。用成千上万的物品试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T11:44:55.810

这是您的代码...**[现场演示](http://jsfiddle.net/C34Lw/1/)**

**HTML**

您的数据部分没有变化，只是添加了`select`元素。

```
<select id="alpha" onchange="selectData();">
    <option value="">Choose A-Z</option>
    <option value="0">0-9</option>
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
    <option value="D">D</option>
</select>
<select id="store" onchange="selectData();">
    <option value="">Any Store</option>
    <option value="Arnotts">Arnotts</option>
    <option value="BrownThomas">BrownThomas</option>
    <option value="Dundrum">Dundrum</option>
</select>
<select id="category" onchange="selectData();">
    <option value="">Any Category</option>
    <option value="Mens Wear">Mens Wear</option>
    <option value="Shoes">Shoes</option>
    <option value="Womens Wear">Womens Wear</option>
    <option value="Cosmetics">Cosmetics</option>
</select>

<div classs="brand-holder">
    <div class="brand-column">
        <h3>0-9</h3>
        <ul class="brand-list">
            <li data-alpha="0" data-store="Arnotts,BrownThomas" data-category="Mens Wear, Shoes">Brand name <i>[store:Arnotts,BrownThomas :: category: Mens Wear, Shoes]</i></li>
        </ul>
    </div>
    <div class="brand-column">
        <h3>A</h3>
        <ul class="brand-list">
            <li data-alpha="A" data-store="Arnotts,Dundrum" data-category="Womens Wear, Cosmetics" >A Brand Name <i>[store:Arnotts,Dundrum :: category: Womens Wear, Cosmetics]</i></li>
        </ul>
    </div>
</div> 
```

**CSS**

```
.hidden {
    display:none;
} 
```

**Javascript**

```
function selectData() {
    var alpha = document.getElementById('alpha').value;
    var store = document.getElementById('store').value;
    var category = document.getElementById('category').value;
    var i;
    var j;
    var flag;

    items = document.getElementsByTagName("li");

    // Hide/show items
    for(i = 0; i < items.length; i++) {
        a = items[i].getAttribute('data-alpha');
        s = items[i].getAttribute('data-store').split(",");
        c = items[i].getAttribute('data-category').split(",");

        // To be safe
        for(j = 0; j < s.length; j++) s[j] = s[j].trim();
        for(j = 0; j < c.length; j++) c[j] = c[j].trim();

        if((alpha == "" || a == alpha) && (store == "" || s.indexOf(store) != -1) && (category == "" | c.indexOf(category) != -1)) {
            items[i].classList.remove("hidden");
        } else {
            items[i].classList.add("hidden");
        }
    }

    // Clear empty groups
    groups = document.getElementsByClassName("brand-list");

    for(i = 0; i < groups.length; i++) {
        flag = true;

        for(j = 0; j < groups[i].childNodes.length; j++) {
            node = groups[i].childNodes[j];

            if(node.nodeName.trim() == "LI" && (node.className == "" || node.className.indexOf('hidden') == -1)) {
                flag = false;
                break;
            }
        }

        // Remove the whole div
        if (flag) {
            groups[i].parentNode.classList.add("hidden");
        } else {
            groups[i].parentNode.classList.remove("hidden");
        }
    }
} 
```

**jQuery *（而不是 Javascript）***

```
$(document).ready(function() {
    function selectData() {
        var alpha = $("#alpha").val();
        var store = $("#store").val();
        var category = $("#category").val();
        var j;

        // Hide items
        $("li").each(function() {
            a = $(this).attr('data-alpha');
            s = $(this).attr('data-store').split(",");
            c = $(this).attr('data-category').split(",");

            // To be safe
            for(j = 0; j < s.length; j++) s[j] = s[j].trim();
            for(j = 0; j < c.length; j++) c[j] = c[j].trim();

            if((alpha == "" || a == alpha) && (store == "" || s.indexOf(store) != -1) && (category == "" | c.indexOf(category) != -1)) {
                $(this).removeClass('hidden');
            } else {
                $(this).addClass('hidden');
            }
        });

        // Hide empty sections
        $(".brand-list").each(function() {
            if($(this).children("li").not(".hidden").length > 0) {
                $(this).parent().removeClass("hidden");
            } else {
                $(this).parent().addClass("hidden");
            }
        });
    }

    $("#alpha").on("change", selectData);
    $("#store").on("change", selectData);
    $("#category").on("change", selectData);
}); 
```

* * *

**解决方案：2** [**现场演示**](http://jsfiddle.net/anzE3/)

**HTML**

```
<select id="alpha"">
    <option value="">Choose A-Z</option>
    <option value="0">0-9</option>
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
    <option value="D">D</option>
</select>
<select id="store"">
    <option value="">Any Store</option>
    <option value="Arnotts">Arnotts</option>
    <option value="BrownThomas">BrownThomas</option>
    <option value="Dundrum">Dundrum</option>
</select>
<select id="category">
    <option value="">Any Category</option>
    <option value="Beauty">Beauty</option>
    <option value="Shoes">Shoes</option>
    <option value="Womens Wear">Womens Wear</option>
    <option value="Cosmetics">Cosmetics</option>
</select>

<div classs="brand-holder">
    <div class="brand-column">
        <h3>0-9</h3>
        <ul class="brand-list">
            <li data-alpha="0" data-store="Arnotts,BrownThomas" data-arnotts-category="Mens Wear, Cosmetics" data-dundrum-category="" data-brownthomas-category="Beauty" >1\. Brand Name <i>[data-store="Arnotts,BrownThomas" data-arnotts-category="Mens Wear, Cosmetics" data-dundrum-category="" data-brownthomas-category="Beauty"]</i></li>
        </ul>
    </div>
    <div class="brand-column">
        <h3>A</h3>
        <ul class="brand-list">
            <li data-alpha="A" data-store="Arnotts,Dundrum,BrownThomas" data-arnotts-category="Womens Wear, Cosmetics" data-dundrum-category="Womens Wear" data-brownthomas-category="Beauty" >A Brand Name <i>[data-store="Arnotts,Dundrum,BrownThomas" data-arnotts-category="Womens Wear, Cosmetics" data-dundrum-category="Womens Wear" data-brownthomas-category="Beauty"]</i></li>
        </ul>
    </div>
</div> 
```

**CSS**

```
.hidden {
    display:none;
} 
```

**jQuery**

```
$(document).ready(function() {
    function selectData() {
        var alpha = $("#alpha").val();
        var store = $("#store").val();
        var category = $("#category").val();
        var j;

        // Hide items
        $("li").each(function() {
            a = $(this).attr('data-alpha');
            s = $(this).attr('data-store').split(",");

            if (store == "") {
                c = ($(this).attr('data-arnotts-category') + "," + $(this).attr('data-dundrum-category') + "," + $(this).attr('data-brownThomas-category')).split(",");
            } else {
                c = $(this).attr('data-' + store.toLowerCase() + '-category');
            }

            // To be safe
            for(j = 0; j < s.length; j++) s[j] = s[j].trim();
            for(j = 0; j < c.length; j++) c[j] = c[j].trim();

            if((alpha == "" || a == alpha) && (store == "" || s.indexOf(store) != -1) && (category == "" | c.indexOf(category) != -1)) {
                $(this).removeClass('hidden');
            } else {
                $(this).addClass('hidden');
            }
        });

        // Hide empty sections
        $(".brand-list").each(function() {
            if($(this).children("li").not(".hidden").length > 0) {
                $(this).parent().removeClass("hidden");
            } else {
                $(this).parent().addClass("hidden");
            }
        });
    }

    $("#alpha").on("change", selectData);
    $("#store").on("change", selectData);
    $("#category").on("change", selectData);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T10:06:13.827

创建一个多维 JavaScript 数组，其中包含您的 3 个条件作为键，因此您可以轻松访问匹配值并通过 jQuery 更新选择。

IE

```
var myResults = new Array(
    'a' => new Array(
        'Arnotts' => new Array(
            'BrownThomas',
            'JohnDoe'
        )
    )
); 
```

以及稍后选择值时：

```
var myResultsForSecondSelect = myResults[$('#select1').value()];
var myResultsForThirdSelect = myResults[$('#select1').value()][$('#select2').value()]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T10:45:24.073

如果我理解正确，你不想用 AJAX 加载这些东西，但从一开始就拥有所有可用的信息。如果是这样，我会像这样创建一个 JSON 对象：

```
var data = {
    a: {
        storeA: ['categoryAA', 'categoryAB'],
        storeB: ['categoryBA', 'categoryBB']
    },
    b: {
    },
    c: {
    }
}; 
```

然后填写您将创建方法的选择：

```
function updateOneLetter(data) {
    for(var key in data) {
        // fill in one letter select
    }
}

function udatesStores(data, oneLetter) {
    data = oneLetter ? [data[oneLetter]] : data;
    var keys = [];    
    $.each( data, function(i, n) {
        for(var key in n) {
            // fill in category
        }
    });
}

(...) 
```

您将类似地填写类别。您可以创建辅助方法来简单地检索过滤掉的值 - 而不是在上面的更新函数中填写 select inline，然后处理返回的过滤掉的对象。

# spring - 是否可以部分注入或覆盖spring bean属性（在mule中）

> ID：14484836
> 
> 赞同：0
> 
> 时间：2013-01-23T16:44:09.167
> 
> 标签：spring, mule

我需要在我的骡流中的两个地方使用春豆。Bean 具有 3 个属性，其中 1 个是另一个 bean。是否可以在单个位置定义主 bean 并仅覆盖更改的属性。说这是我的 bean 声明：

```
<custom-transformer name="soapFaultTransformer" class="com.xxx.xx.transformer.VelocityMessageTransformer">
<spring:property name="velocityEngine"  ref="velocityEngine" />
<spring:property name="templateName"    value="soapFault.vm" />
<spring:property name="beanClass">
    <spring:bean class="com.xxx.services.xx.Soap11Fault">
            <spring:property name="faultCode"   value="Client" />
            <spring:property name="faultString" value="Invalid Request" />
            <spring:property name="detail"      value="This request is not valid" />
    </spring:bean>
</spring:property> 
```

我只想更改以下 2 个属性：

```
 <spring:property name="faultString" value="Invalid Request" />
 <spring:property name="detail"      value="This request is not valid" /> 
```

是否可以？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:48:40.190

最好的方法是声明一个全局抽象父 bean，配置有公共属性，然后在需要的地方引用它，将特定属性设置为所需的值。

这是 SOAP 错误的抽象 bean 的声明：

```
<spring:beans>
    <spring:bean name="abstractSoap11Fault" abstract="true"
        class="com.xxx.services.xx.Soap11Fault">
        <spring:property name="faultCode" value="Client" />
    </spring:bean>
</spring:beans> 
```

当我们将其用作父 bean 时，我们使用它们的特定值指定附加属性：

```
<custom-transformer name="soapFaultTransformer"
    class="com.xxx.xx.transformer.VelocityMessageTransformer">
    <spring:property name="velocityEngine" ref="velocityEngine" />
    <spring:property name="templateName" value="soapFault.vm" />
    <spring:property name="beanClass">
        <spring:bean parent="abstractSoap11Fault">
            <spring:property name="faultString" value="Invalid Request" />
            <spring:property name="detail"
                value="This request is not valid" />
        </spring:bean>
    </spring:property>
</custom-transformer> 
```

# android - 是否可以使操作“不可点击”？

> ID：14484837
> 
> 赞同：3
> 
> 时间：2013-01-23T16:44:13.390
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在为 API 级别 10 的应用程序使用 ActionBarSherlock 库。我想知道是否有可能有一个操作图标在单击时没有响应。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/mainTopBluetoothState"
        android:icon="@drawable/bt_not_connected"
        android:orderInCategory="0"
        android:clickable="false"
        android:showAsAction="ifRoom" />

    <item android:id="@+id/mainTopAppState"
        android:title="App State"
        android:orderInCategory="1"
        android:showAsAction="ifRoom" />

</menu> 
```

`android:clickable="false"`不会产生错误，但在应用程序运行时按下操作仍会做出反应。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T16:46:45.027

尝试`android:enabled` [或`setEnabled()`在运行时在`MenuItem`](http://developer.android.com/reference/android/view/MenuItem.html#setEnabled%28boolean%29).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-13T07:25:37.050

```
mymenu.getItem(0//item number).setEnabled(false); 
```

当你`setClickable`想写这个时......

```
mymenu.getItem(0).setEnabled(true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T16:48:31.817

你可以这样做`onPrepareOptionsMenu(Menu menu)`

```
@Override
public boolean onPrepareOptionsMenu (Menu menu){
    super.onPrepareOptionsMenu(menu);

        MenuItem myItem = menu.findItem(R.id.myId);
        myItem.setEnabled(false);

    return true;  
} 
```

该[文档](http://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu%28android.view.Menu%29)建议它这样做。

> 准备要显示的屏幕标准选项菜单。每次显示菜单时，都会在菜单显示之前调用它。**您可以使用此方法有效地启用/禁用项目**或以其他方式动态修改内容。

# ssrs-2008 - 如何检查之前的下拉参数是否只选择了一个值？

> ID：14484839
> 
> 赞同：1
> 
> 时间：2013-01-23T16:44:20.333
> 
> 标签：ssrs-2008, reporting-services

我有两个参数，`@AccountID`and `@SourceType`，它们都是下拉菜单。

这是`@SourceType`存储过程中参数的声明：

```
@SourceType BIT = NULL,
/*
 * Works if @AccountID is not null
 * (should only be used if @AccountID has a single value)
 *
 * 0 - Owned by @AccountID
 * 1 - External (not owned by @AccountID)
 */ 
```

只有在 AccountID 具有单个值（并且它是具有大约 50 个选项的多选）时，它才应该是可选的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:48:18.213

我建议您创建一个数据集，查看`@AccountId`参数并根据所选值的数量返回选项。

使用参数的 count 属性将使您能够检查是否选择了多个值。例如`Parameters!Parameter.Count`。

然后根据返回计数的数量，您可以设置`@SourceType`参数选项。

# objective-c - 在 NSMutableArray 的 for 循环中执行实例方法（包含 3 个对象）

> ID：14484840
> 
> 赞同：1
> 
> 时间：2013-01-23T16:44:20.430
> 
> 标签：objective-c

我正在遵循 Big Nerd Ranch 的 Objective-C 指南，在其中一个挑战（第 17 章）中，他要求您创建您创建的对象的 3 个实例，我已经创建了类，实现了设置器、getter 和两个实例方法，然后我创建了对象的 3 个实例并定义了所有变量。然后他要求您将 3 个对象放入一个数组中，并使用 for 循环迭代这些值。

我遇到的问题是我不知道如何在“for 循环”中执行实例方法。

这是我到目前为止所拥有的（所有值都是随机的和假设的）：

StockHolding.h

```
#import <Foundation/Foundation.h>

@interface StockHolding : NSObject
{
    float purchaseSharePrice;
    float currentSharePrice;
    int numberOfShares;
}

@property float purchaseSharePrice;
@property float currentSharePrice;
@property int numberOfShares;

- (float)costInDollars;
- (float)valueInDollars;

@end 
```

StockHolding.m

```
#import "StockHolding.h"

@implementation StockHolding

@synthesize purchaseSharePrice, currentSharePrice, numberOfShares;

- (float)costInDollars;
{
    return purchaseSharePrice * numberOfShares;
}
- (float)valueInDollars;
{
    return currentSharePrice * numberOfShares;
}

@end 
```

主文件

```
#import <Foundation/Foundation.h>
#import "StockHolding.h"

int main(int argc, const char * argv[])
{

    @autoreleasepool {

    StockHolding *apple = [[StockHolding alloc] init];

        [apple setPurchaseSharePrice: 10];
        [apple setCurrentSharePrice: 50];
        [apple setNumberOfShares: 20];

    StockHolding *hmv = [[StockHolding alloc] init];

        [hmv setPurchaseSharePrice: 15];
        [hmv setCurrentSharePrice: 0];
        [hmv setNumberOfShares: 17];

    StockHolding *drpepper = [[StockHolding alloc] init];

        [drpepper setPurchaseSharePrice: 5];
        [drpepper setCurrentSharePrice: 15];
        [drpepper setNumberOfShares: 70];

        NSMutableArray *stocksList = [NSArray arrayWithObjects:apple, hmv, drpepper, nil];

        for (NSObject z in stocksList) {

            NSLog(@"Original cost: %@", [z costInDollars]);
            NSLog(@"Current value: %@", [z valueInDollars]);

        }

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:57:58.323

你的家庭作业很好。

不编译很难发现错误。

*   在`NSLog`您使用 %@ 的情况下`[stockObj costInDollars]`返回`float`，所以这是一个错误。利用`%f`

您只需要对您的代码进行一些润色。

1.  良好的命名约定。

2.  使用`for(StockHolding *stockObj in stocksList)`代替`for (NSObject z in stocksList)`

    ```
    for (StockHolding *stockObj in stocksList) {
        NSLog(@"Original cost: %f", [stockObj  costInDollars]);//%f as costInDollars returns float not an object
        NSLog(@"Current value: %f", [stockObj  valueInDollars]);//same as above
    } 
    ```

3.  可以跳过 ivars，@property 会很好用。

4.  新编译器不需要@synthesize。如果您使用，请尝试每行使用一个属性。

5.  而不是将值分配为：

    ```
    StockHolding *apple = [[StockHolding alloc] init];
    [apple setPurchaseSharePrice: 10];
    [apple setCurrentSharePrice: 50];
    [apple setNumberOfShares: 20]; 
    ```

    您可以使用 ：

    ```
    StockHolding *apple=[[StockHolding alloc]initWithPurchaseSharePrice:10 currentSharePrice:50 numberOfShares:20]; 
    ```

    为此，您需要创建一个方法：

    ```
    -(StockHolding *)initWithPurchaseSharePrice:(float)purchase currentSharePrice:(float)current numberOfShares(int):numbers]; 
    ```

6.  而不是`NSMutableArray *stocksList = [NSArray arrayWithObjects:apple, hmv, drpepper, nil];`你可以使用：

    ```
    NSMutableArray *stocksList=@[apple, hmv, drpepper]; 
    ```

编辑：

打印stockObject：调用以下方法`[self printStockObject:stockObject];`

```
-(void)printStockObject:(StockHolding *)stockObj{
    NSLog(@"Purchase Price : %f",stockObj.purchaseSharePrice);
    NSLog(@"Current Price : %f",stockObj.currentSharePrice);
    NSLog(@"Number of Shares : %d",stockObj.numberOfShares);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:00:17.320

> 您是否还知道如何在 NSLOG 中打印 stockObj 的名称？我试过 NSLog(@"%@", stockObj); 但它只返回内存地址。

覆盖`-description`

```
-(NSString *)description {
    return [NSString stringWithFormat:@"%@: purchase price: %f current price: %f, number of shares: %d", NSStringFromClass([self class]), self.purchaseSharePrice, self. currentSharePrice, self.numberOfShares];
} 
```

如果您还想要`description`超级类的，请执行

```
[NSString stringWithFormat:@"%@: purchase price: %f current price: %f, number of shares: %d %@", NSStringFromClass([self class]), self.purchaseSharePrice, self. currentSharePrice, self.numberOfShares, [super description]]; 
```

* * *

AKV 写道，你应该像这样循环：

```
for (StockHolding *stockObj in stocksList) {
   NSLog(@"%@",stockObj);
} 
```

这是对的。但是，如果您有`StockHolding`该列表以外的其他对象，您也可以这样做

```
for (id stockObj in stocksList) {
    NSLog(@"%@",stockObj);
} 
```

因为你可以发送任何消息`id`——如果它被实现，它将工作，否则崩溃。注意 NSObject 和`id`是不一样的。

* * *

在现代版本的 Xcode 中，您不需要声明 iVar。你也不需要合成。

```
@interface StockHolding : NSObject

@property float purchaseSharePrice;
@property float currentSharePrice;
@property int numberOfShares;
@property (copy) NSString *shareName;

- (float)costInDollars;
- (float)valueInDollars;

@end 
```

`_`如果您不合成，则ivars名称将是带有 -prefix 的属性名称

`shareName`->`_shareName`

```
StockHolding *apple = [[StockHolding alloc] init];
[apple setPurchaseSharePrice: 10];
[apple setCurrentSharePrice: 50];
[apple setNumberOfShares: 20];
[apple setShareName:@"apple"]; 
```

`-description`可能看起来像

```
-(NSString *)description {
    return [NSString stringWithFormat:@"%@: %@ purchase price: %f current price: %f, number of shares: %d", NSStringFromClass([self class]),_shareName, self.purchaseSharePrice, self. currentSharePrice, self.numberOfShares];
} 
```

# javascript - 自定义日历布局 - 碰撞检测

> ID：14484843
> 
> 赞同：1
> 
> 时间：2013-01-23T16:44:27.523
> 
> 标签：javascript, jquery, calendar

我正在尝试使用 javascript（使用 jquery）在网页上生成日历（目前为一页）。

我希望日历事件以逻辑方式显示而不是重叠。宽度应根据事件的数量等进行调整。这是我从另一篇文章中借来的要求图：

![http://i.stack.imgur.com/kaMNO.png](../Images/2668d2dc2fb69a88eebdaf53d22d3711.png)

我从这篇文章的答案 (Dan M) 开始工作 -> [custom calendar with event divs](https://stackoverflow.com/questions/10562711/custom-calendar-with-event-divs)。它让我走得很远。但是批准的答案有一些缺陷，很容易被破解。所以重新开始，但使用与最佳答案相同的方法，我设法将这个 jsbin -> [http://jsbin.com/agocuz/3/](http://jsbin.com/agocuz/3/)放在一起。如果您查看代码，您会发现问题出在我的 14:20 事件上。它只与其他 2 个事件发生冲突，因此占用了 33% 的宽度。但是，它与其他 3 个事件发生冲突的事件发生冲突。（抓头）。

我真的看不出一个好的解决方案。到目前为止，我通过 hsla 使用不透明度来显示任何狡猾的重叠。

任何帮助将不胜感激。我不一定要找人为我编写解决方案，只是让我提前了解伪代码方法会很棒。

如果您查看我链接到的类似问题并希望看到答案中断，请使用以下数据：

```
var events = [
  {id: 1, start: 0, end: (3 * 60)},
  {id: 2, start: 0, end: (6.5 * 60)},
  {id: 3, start: 60, end: (15-9) * 60},
  {id: 4, start: 80, end: (13-9) * 60},
  {id: 5, start: (12-9)*60, end: (14-9)*60}, 
 ]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-11T11:58:49.517

问题是您只检查特定时间存在多少事件。

您还需要检查它们的大小并使用适当的最小尺寸（*以防它们由于先前的重叠而变小 - 就像您的情况一样*）

因此，`ts.length`您需要检查该时间段的事件大小，而不是检查。

```
var max = ts.length;
ts.forEach(function(id){
    var evt = EventsById[id];
    max=(evt.numcolumns>max)?evt.numcolumns:max;
  });

if (event.numcolumns <= max) {    
    event.numcolumns = max;
  } 
```

演示在[http://jsbin.com/iFUNetE/1/](http://jsbin.com/iFUNetE/1/)

* * *

**更新**

添加了此代码

```
 // UPDATE CODE AFTER COMMENT
  // fix numcolumns
  for (m=0; m<MINUTESINDAY; m++) {
    ts = timeslots[m];
    for (e=0; e<ts.length; e++) {
      event = EventsById[ ts[e] ];
      var max = ts.length;
      ts.forEach(function(id){
          var evt = EventsById[id];
          max=(evt.numcolumns>max)?evt.numcolumns:max;
        });

      if (event.numcolumns <= max) {    
        event.numcolumns = max;
      }
    }
  } 
```

解决@guioconnor 在评论中发现的问题。

演示在[http://jsbin.com/fopuxakabunu/1/](http://jsbin.com/fopuxakabunu/1/)

# mysql - SQL JOINS 和命名连接列

> ID：14484848
> 
> 赞同：0
> 
> 时间：2013-01-23T16:44:34.483
> 
> 标签：mysql, sql, left-join

我有一个产品表和下载表。

Downloads 表有 4 个字段，ID、Name、Category 和 Download

Products 表有 3 个特定于下载的字段：下载、订购指南和提交表。这些字段中的每一个都存储下载表中记录的 ID。产品表中的这 3 个字段永远不会有相同的下载 ID 值。

我有以下 SQL 语句：

```
SELECT product_id, product_name, product_download, product_submittal, product_ordering_guide, product_status, tbl_downloads.download_id, tbl_downloads.download_name
FROM tbl_products
LEFT JOIN tbl_downloads ON tbl_products.product_download=tbl_downloads.download_id
LEFT JOIN tbl_downloads ON tbl_products.product_submittal=tbl_downloads.download_id
LEFT JOIN tbl_downloads ON tbl_products.product_order_guide=tbl_downloads.download_id 
```

它会产生以下错误：

```
#1066 - 不是唯一的表/别名：'tbl_downloads'

```

这个错误是有道理的，我知道它会发生，但我不知道如何解决它。我需要添加别名，但不确定在哪里。

如果我删除最后两个 JOIN 语句，一切都会按预期工作。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:47:58.897

如果您多次加入同一个表，则需要使用唯一别名：

```
SELECT product_id, product_name, 
    product_download, product_submittal, 
    product_ordering_guide, product_status, 
    d1.download_id DownloadId, 
    d1.download_name DownloadName,
    d2.download_id SubmittalDownloadId, 
    d2.download_name SubmittalDownloadName,
    d3.download_id GuideDownloadId, 
    d3.download_name GuideDownloadName
FROM tbl_products
LEFT JOIN tbl_downloads d1
    ON tbl_products.product_download=d1.download_id
LEFT JOIN tbl_downloads d2
    ON tbl_products.product_submittal=d2.download_id
LEFT JOIN tbl_downloads d3
    ON tbl_products.product_order_guide=d3.download_id 
```

例如，我使用了`d1`,但您可能希望在别名中更具描述性，以便清楚每个连接在做什么，如下所示：`d2``d3`

```
SELECT product_id, product_name, 
    product_download, product_submittal, 
    product_ordering_guide, product_status, 
    download.download_id DownloadId, 
    download.download_name DownloadName,
    submittal.download_id SubmittalDownloadId, 
    submittal.download_name SubmittalDownloadName,
    guide.download_id GuideDownloadId, 
    guide.download_name GuideDownloadName
FROM tbl_products
LEFT JOIN tbl_downloads download
    ON tbl_products.product_download=download.download_id
LEFT JOIN tbl_downloads submittal
    ON tbl_products.product_submittal=submittal.download_id
LEFT JOIN tbl_downloads guide
    ON tbl_products.product_order_guide=guide.download_id 
```

# php - 数组中的复选框没有值

> ID：14484853
> 
> 赞同：0
> 
> 时间：2013-01-23T16:44:50.053
> 
> 标签：php, mysql, arrays, checkbox

我在数组中的复选框有问题。我正在编写一个在soccergames（室内）上运行的脚本，以跟踪射手和其他信息，如卡片（绿色或红色）。

这是客队表的代码。问题出在复选框上。未选中时，它们不会发送任何值。我需要他们在未选中时发送“0”作为值，在选中时发送“30”。

```
 $sql1="SELECT dbo_doelpunten.TeamRelatieNummer, dbo_doelpunten.aantaldoelpunten, dbo_doelpunten.Deelnemer, dbo_doelpunten.aantalstrafminuten, dbo_Deelnemers.Deelnemer, dbo_Deelnemers.MinutenStrafVerwerkt, dbo_Deelnemers.Doelpunten, dbo_Deelnemers.NaamCombi
    FROM dbo_doelpunten
    LEFT JOIN dbo_Deelnemers
    ON dbo_doelpunten.Deelnemer=dbo_Deelnemers.Deelnemer
    WHERE dbo_doelpunten.TeamRelatieNummer='436'
    ORDER BY dbo_doelpunten.Deelnemer
    ";
    // $sql1="SELECT * FROM dbo_doelpunten WHERE TeamRelatienummer='436'";
    $result1=mysql_query($sql1);

    // Count table rows 
    $count=mysql_num_rows($result1);
    $Deelnemer = array();
    ?>
    <td>
    <table id="table" class="table"  width="400"> 
    <thead> 
    <tr> 
        <th data-sort="int">Nr</th>
        <th data-sort="string">Naam</th>      
        <th data-sort="int">Doelpunten</th> 
        <th data-sort="int">Tijdstraf</th> 
        <th data-sort="int">Rood?</th>
    </tr> 
    </thead>
    <tbody>
    <?php
    while($rowuit=mysql_fetch_array($result1)){
    $e=$rowuit['MinutenStrafVerwerkt'];
    if ($e>='10')
      {
      echo "<tr bgcolor='red'>";
      }
    else
      {
      echo "<tr>";
      }
      ?>
    <td width="50" class="tdata"><input name="Deelnemeruit[]" type="hidden" id="Deelnemeruit" size="10" value="<? echo $rowuit['Deelnemer']; ?>" readonly><? echo $rowuit['Deelnemer']; ?></td>
    <td width="250" class="tdata"><input name="NaamCombiuit[]" type="hidden" id="NaamCombiuit" size="20" value="<? echo $rowuit['NaamCombi']; ?>" readonly><? echo $rowuit['NaamCombi']; ?></td>
    <td width="50" class="tdata"><input name="doelpuntuit[]" type="number" min="0" max="100" size="3" id="doelpuntuit" value="<? echo $rowuit['aantaldoelpunten'] ?>"></td>
    <td width="50" class="tdata"><input name="strafuit[]" type="number" min="0" max="100" size="3" id="strafuit" value="<? echo $rowuit['aantalstrafminuten'] ?>"></td>
    <td width="50" class="tdata"><input name="rooduit[]" type="checkbox" value="30" id="rooduit"></td>
    </tr>
    <?php
    }
    ?> 
```

创建数组效果很好，并且表格创建得很好。更新比分、射手和罚时（绿卡）效果很好，除了红卡是一个复选框。在更新数据库的代码下面

```
$Deelnemerthuis = $_POST['Deelnemerthuis']; 
$NaamCombithuis = $_POST['NaamCombithuis'];
$doelpuntthuis = $_POST['doelpuntthuis']; 
$strafthuis = $_POST['strafthuis']; 
$vlaggerthuis = $_POST['vlaggerthuis']; 
$teamthuis = $_POST['teamthuis']; 
$roodthuis = $_POST['roodthuis'];

$Deelnemeruit = $_POST['Deelnemeruit']; 
$NaamCombiuit = $_POST['NaamCombiuit'];
$doelpuntuit = $_POST['doelpuntuit']; 
$strafuit = $_POST['strafuit']; 
$vlaggeruit = $_POST['vlaggeruit']; 
$teamuit = $_POST['teamuit']; 
$rooduit = $_POST['roodtuit'];

// Check if button name "Submit" is active, do this 
if(isset($_POST['Submit'])){

$i=0;
while($i<$count){
$sql3= "UPDATE dbo_doelpunten SET aantaldoelpunten = '" . $doelpuntthuis[$i] . "', aantalstrafminuten = '" . $strafthuis[$i] . "' WHERE wedstrijdid='300' AND  Deelnemer = '" . $Deelnemerthuis[$i] . "'"; 
$result3=mysql_query($sql3);

$sql7= "UPDATE dbo_Deelnemers SET MinutenStrafVerwerkt = MinutenStrafVerwerkt+'" . $roodthuis[$i] . "' WHERE Deelnemer = '" . $Deelnemerthuis[$i] . "'";
$result7=mysql_query($sql7);

$sql4= "UPDATE dbo_doelpunten SET aantaldoelpunten = '" . $doelpuntuit[$i] . "', aantalstrafminuten = '" . $strafuit[$i] . "' WHERE wedstrijdid = '300' AND Deelnemer = '" . $Deelnemeruit[$i] . "' "; 
$result4=mysql_query($sql4);

$sql8= "UPDATE dbo_Deelnemers SET MinutenStrafVerwerkt = MinutenStrafVerwerkt+'" . $rooduit[$i] . "' WHERE Deelnemer = '" . $Deelnemeruit[$i] . "'"; 
$result8=mysql_query($sql8);

$i++;
} 
```

如何让复选框在未选中时为 0，在选中时为 30？

我在这里发布了页面的完整代码：http: [//pastebin.com/u6xVMmrr](http://pastebin.com/u6xVMmrr)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:48:21.263

复选框不会发送未经检查的数据，因此您有两种选择：

1.  测试复选框字段的存在。如果不存在，则假定值为 0。
2.  有一个具有相同变量名称和值“0”的隐藏表单变量，它将在邮寄时发送。如果复选框（稍后出现在表单中）被选中，它将用 30 覆盖 0 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:50:32.530

只需乘以 1 即可获得 POST

```
$checkbox=$_POST['checkbox']*1; 
```

因此，如果未选中该复选框，您将得到 0。

另一种解决方案是检查 $_POST 是否设置：

```
if(!isset($_POST['checkbox'])){
$checkbox=0;
}else{
$checkbox=$_POST['checkbox'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:18:52.690

我通过将复选框更改为下拉选择来修复它。不是最佳但可行。感谢各位的帮助！

# mysql - 这个 SQL 查询实际上是做什么的？

> ID：14484856
> 
> 赞同：0
> 
> 时间：2013-01-23T16:44:56.667
> 
> 标签：mysql, sql

我只是想问是否有人可以帮助我理解这个查询的实际作用？

```
select location, address
from warehouse D 
where not exists
    ( select * from product P, supplier S
      where P.supplier_no = S.supplier_no
      and   S.name = 'Azure Supplies'
      and   not exists
            ( select *
              from stock S
              where P.product_no = S.product_no
              and D.warehouse_no = S.warehouse_no ) ) ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T17:06:31.860

`not exists ( select ... )`is `true`, when the select doesn't return any rows.

因此，最内层`select`试图找到有库存的产品。哪些产品？任何由中间选择的，`select`这反过来又反转最里面的查询（即它返回所有*没有*库存的产品）。这将连接所有已知的仓库，以获取库存中没有该供应商的任何产品的仓库列表。

当你使用正逻辑时，它变得更容易理解：

首先，我们创建三个集合：

*   所有仓库（套`D`）
*   “Azure Supplies”的所有产品（设置`P）
*   （套）`P`仓库进出的所有产品库存`D``S`

请注意，还有另一组`supplier S`，但这不是我要说的。

现在我们过滤这些集合。

首先，我们删除所有有库存（内部`not exists`）的产品。这给了我们一套没有库存的产品。

在最后一步中，我们从结果中删除该集合不为空的所有仓库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:49:50.897

您实际上是在尝试查找库存中不存在的所有由“Azure Supplies”制造的产品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:54:20.227

它从仓库 D 中选择位置和地址，那里没有名称为“azure supply”的供应商，库存 s 中也不存在。

all = 条件只是为了显示常见的列值 b/w 表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T16:48:18.507

这实质上是从没有名为“Azure Supplies”的供应商且没有与该供应商相关的产品的表仓库中选择位置和地址。

# node.js - 特殊字符搜索mongodb

> ID：14484857
> 
> 赞同：1
> 
> 时间：2013-01-23T16:44:58.057
> 
> 标签：node.js, mongodb, special-characters

> **可能重复：**
> [Mongodb 将重音字符匹配为基础字符](https://stackoverflow.com/questions/7707671/mongodb-match-accented-characters-as-underlying-character)

我来自一个字符比英文字母还多的国家。基本上我想做的是：

我有单词**ščumnik**，我想在数据库中搜索**šcumnik**、**scumnik**、**sčumnik**，

```
š=s
ž=z
č=c
é=e
... 
```

我想忽略上面的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:49:07.523

[关于如何](https://stackoverflow.com/questions/990904/javascript-remove-accents-in-strings)在 StackOverflow上删除变音符号的问题

[用 JavaScript 列出的文章](http://lehelk.com/2011/05/06/script-to-remove-diacritics/)

删除变音符号后，您可以将结果值用于搜索和索引构建。

# android - 使用 addAccount 在另一个应用程序中导出 LoginActivity 的优势？

> ID：14484859
> 
> 赞同：1
> 
> 时间：2013-01-23T16:45:10.067
> 
> 标签：android, android-intent, android-activity, android-account

语境：

假设我们安装了两个 Android 应用程序，A 包含自定义 Authenticator 代码并且可以将新帐户添加到 AccountManager，B 我们想要单点触控登录流程。您可以假设 A 尚未在 AccountManager 中创建该帐户。

问题：

从 B 的角度来看，使用 AccountManager 的 addAccount 方法有什么好处，该方法需要`android.permission.MANAGE_ACCOUNTS`在 B 的 AndroidManifest 中声明而不是`exporting the LoginActivity`从 A 应用程序中声明，并简单地通过意图调用它来为 B 创建该帐户。自然， A 已经声明了所有必需的权限。如果您认为后一种解决方案实际上更好（因为我们不需要再声明另一个权限），我也想知道您是否有一些有趣的事情要说来支持您的意见。

您可以假设我不需要使用权限保护 LoginActivity，尽管它已导出，因为它的唯一副作用是在 AccountManager 中创建帐户，这正是我们所需要的。

杂项：

为了提供更多背景信息，如果这有助于回答我的问题：

*   如果 A 未安装，B 会退回到自己的登录表单（但不充当身份验证者且不创建帐户，检索到的 OAuth 令牌仅供 B 使用）
*   B 确实声明了 INTERNET 权限
*   A 和 B 都使用相同的发布密钥进行签名
*   A 和 B 不共享 android:sharedUserId

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:12:55.100

一方面，拥有一个几乎没有权限的应用程序是个好主意，另一方面，使用第二个应用程序与互联网通信是一种作弊行为。

恕我直言，您有一个计划非常重要，以防您的`AccountManager`应用程序被卸载。在这种情况下，您会遇到很大的问题，具体取决于您的授权过程。

但是，[`PackageManager`](http://developer.android.com/reference/android/content/pm/PackageManager.html)您可以查看是否安装了这两个应用程序。

* * *

将其他应用设为可选是个好主意。如果两个应用程序都至少具有互联网权限，则不会给人掩盖通信的印象。特殊权限的好处是没有其他应用程序可以使用您的*公共*API/意图。我不知道你的设计，如果这可能是一个问题。但是，即使您使用单独的权限，恶意应用程序也可能会请求该权限。

# php - php 类自动加载 - 似乎正在缓存？

> ID：14484863
> 
> 赞同：0
> 
> 时间：2013-01-23T16:45:14.157
> 
> 标签：php, autoload

我最近实现了以下代码来在我的 php 代码中自动加载类：

```
function my_autoloader($class) {
    include 'classes/class_' . $class . '.php';
}
spl_autoload_register('my_autoloader'); 
```

该代码包含在文件中，该文件包含在需要生成网页的所有文件的顶部。因此，我开始着手从我的代码中删除 require_once 调用。这是一个例子：

```
require_once('classes/class_web_page.php'); 
```

正如您可能从上面收集到的那样，我网站上的各个页面（它是一个在线社区，所以有一个论坛、画廊等）都使用 web_page 类来生成页面标题、菜单等。各种代码创建一个 web_page 对象，设置各种参数以确定需要哪些菜单选项等，为页面提供一些内容，并生成 html。

一切似乎都很好，直到我对 class_web_page.php 文件进行了更改。这种变化在大多数网站上都立即显现出来……除了主页。

我刷新了我的浏览器，如果再次打开就关闭 :-) 尝试调用[http://www.terragenesis.co.uk/index.php](http://www.terragenesis.co.uk/index.php)而不仅仅是[http://www.terragenesis.co.uk/](http://www.terragenesis.co.uk/)，甚至停止并在服务器上重新启动 apache。尽管如此，这些更改并未显示在主页上。最后，我将 require_once 行放回 index.php 中……然后马上嘿：我在 class_web_page.php 中所做的更改出现在主页上。

所以在我看来，自动加载器正在加载 class_web_page.php 的缓存副本，并且没有任何东西，甚至没有重新启动 Apache，都无法说服它获取新版本。为什么它应该为主页而不是其他页面这样做......我不知道。

有没有其他人经历过这个？我对自动加载器代码做错了吗？我该如何解决它......还是我必须将所有 require_once 语句放回原处？:-(

我的服务器有 PHP 版本 5.1.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:25:55.387

我找到了这个问题的答案......和往常一样，我几天都没有遇到“错误”，结果证明我做了一些非常愚蠢的事情：

事实证明，在过去的某个时候，我不小心将 class_web_page.php 的副本上传到了站点主目录而不是 classes 子目录。所以它存在了两次。

因此，看起来尽管我的自动加载器告诉 php 在 classes 子目录中查找，但它会首先在与主脚本相同的目录中查找（在我的站点主页的情况下为 index.php）。所有其他网站页面脚本都在子目录（论坛、画廊等）中，因此它们“正确”使用 /classes/class_web_page.php

我现在已经删除了位于主目录中的 class_web_page.php 的副本……一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:48:27.583

您确定该文件实际已加载（或它的缓存版本）吗？

# javascript - 使用 CSS / jQuery 的角度动画

> ID：14484871
> 
> 赞同：1
> 
> 时间：2013-01-23T16:45:35.997
> 
> 标签：javascript, jquery, html, css

我不知道这个问题之前是否被问过（它可能有），但我想用 CSS / jQuery 为图像对象设置动画 - 一次 - 当用户滚动到某个高度时，比如 90 度。

一次，我的意思是即使用户向上滚动并再次达到规定的高度，动画也不会自行重新启动。

这可能吗？我该怎么做呢？哪种方法更好？还是两者兼而有之？

注意：我知道我必须执行 scrollTop 函数来检查高度 - 我在问哪个更有效 - CSS 或 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:39:43.333

[http://code.google.com/p/jqueryrotate/](http://code.google.com/p/jqueryrotate/)

检查一下，它检查浏览器是否支持 css 旋转并使用它，或者如果不支持，则使用画布或 SVG。

# php - 选择/选项值到 SQL

> ID：14484875
> 
> 赞同：0
> 
> 时间：2013-01-23T16:45:54.747
> 
> 标签：php, html, mysql, sql, forms

我想要完成的是有一个带有预定义选项的选择表单元素

```
<select name="select1">
   <option value="value1">Value 1</option>
   <option value="value2">Value 2</option>
   <option value="value3">Value 3</option>
</select> 
```

我的 sql 如下

```
$OptionValue = $_POST['select1']; 
```

那是我应该如何从表单中获取所选选项的值并将其放入要查询的 php 变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:49:21.960

您需要确保过滤用户输入以防止 sql 注入。仅这一点就很不安全。

确保您使用的是 PDO 或 MySQLi。如果不使用准备好的语句，您的用户输入需要转义。

见[这里](http://php.net/manual/en/security.database.sql-injection.php)。

不过，基本上你做对了。

**编辑：**

从客户端我可以轻松地将其更改为：

```
<select name="select1">
   <option value="value1">Value 1</option>
   <option value="';DROP TABLE users">Value 2</option>
   <option value="value3">Value 3</option>
</select> 
```

或类似的......现在如果你没有逃避你的输入，你就完蛋了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:51:28.870

在执行查询之前使用 `$optionValue = mysqli_real_escape_string ($connection , $_POST['select1'])`以防止大多数 SQL 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:37:48.753

第一步是防止使用准备好的语句进行 SQL 注入。示例：[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)

使用它来将您选择的选项放入查询中： `$mySelectedOption = $_POST['select1']; $query = "SELECT column_name FROM table_name WHERE column_name = '{$mySelectedOption}'";`

# python - 安装“日晷”以使用 Assimulo

> ID：14484877
> 
> 赞同：5
> 
> 时间：2013-01-23T16:46:00.737
> 
> 标签：python, ubuntu, installation

首先，我可能应该说明我这样做的原因：我想尝试一些不同的微分方程求解器来比较我正在从事的项目的效率和内存使用情况。因此，我想安装 Assimulo，因为它使用了一套求解器并且非常用户友好。

在安装它之前，我发现我需要安装“日晷”：

[https://computation.llnl.gov/casc/sundials/download/download.html](https://computation.llnl.gov/casc/sundials/download/download.html)

因为我使用的是 64 位 ubuntu，所以我下载了它，解压缩并使用“-fPIC”标志安装它。安装“似乎”顺利，没有退出状态消息。

然后我使用以下说明安装了 assimulo：

[http://www.jmodelica.org/assimulo_home/installation.html](http://www.jmodelica.org/assimulo_home/installation.html)

我将“usr/local/lib”指定为安装日晷的路径，因为这是脚本运行时它在终端中安装的路径。

为了检查它是否正常工作，我下载并安装了鼻子来执行鼻子测试，但是，它告诉我有问题。错误的一部分是：

```
======================================================================
ERROR: Failure: ImportError (No module named sundials)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/nose/loader.py", line 390, in            loadTestsFromName
    addr.filename, addr.module)
  File "/usr/local/lib/python2.7/dist-packages/nose/importer.py", line 39, in      importFromPath
  return self.importFromDir(dir_path, fqname)
 File "/usr/local/lib/python2.7/dist-packages/nose/importer.py", line 86, in importFromDir
 mod = load_module(part_fqname, fh, filename, desc)
 File "/usr/local/lib/python2.7/dist-packages/assimulo/tests/test_examples.py", line  21, in <module>
 from assimulo.examples import *
 File "/usr/local/lib/python2.7/dist-packages/assimulo/examples/cvode_gyro.py", line 22, in <module>
 from assimulo.solvers import CVode
 File "/usr/local/lib/python2.7/dist-packages/assimulo/solvers/__init__.py", line 23, in <module>
 from sundials import IDA, CVode
 ImportError: No module named sundials 
```

鼻子报告的其他五个错误非常相似。我理解它的意思，因为它似乎模块不在正确的位置，但我该如何解决它？

如果有人可以帮助我非常感激。在过去的几天里，我对此做了一场绝对的噩梦。我对 linux 很陌生，并且一直在尽力而为，但是我安装的所有东西似乎都无法正常工作。

操作系统：Ubuntu 12.10 64 位。Python 版本：已安装 2.7 Numpy/Scipy。

编辑：这是我安装 assiumulo 的方式，如果有帮助，终端会输出：

```
nathan@ubuntu:~/Documents/pythoncode/Assimulo-2.1.1$ sudo python setup.py install     --sundials-home=/usr/local/lib
running install
running build
running config_cc
unifing config_cc, config, build_clib, build_ext, build commands --compiler options
running config_fc
unifing config_fc, config, build_clib, build_ext, build commands --fcompiler options
running build_src
build_src
building extension "assimulo.implicit_ode" sources
building extension "assimulo.ode" sources
building extension "assimulo.explicit_ode" sources
building extension "assimulo.problem" sources
building extension "assimulo.solvers.euler" sources
building extension "assimulo.lib.dopri5" sources
f2py options: []
  adding 'build/src.linux-x86_64-2.7/fortranobject.c' to sources.
  adding 'build/src.linux-x86_64-2.7' to include_dirs.
  adding 'build/src.linux-x86_64-2.7/assimulo/thirdparty/hairer/dopri5-f2pywrappers.f' to sources.
building extension "assimulo.lib.rodas" sources
f2py options: []
  adding 'build/src.linux-x86_64-2.7/fortranobject.c' to sources.
  adding 'build/src.linux-x86_64-2.7' to include_dirs.
  adding 'build/src.linux-x86_64-2.7/assimulo/thirdparty/hairer/rodas-f2pywrappers.f' to sources.
building extension "assimulo.lib.radau5" sources
f2py options: []
 adding 'build/src.linux-x86_64-2.7/fortranobject.c' to sources.
 adding 'build/src.linux-x86_64-2.7' to include_dirs.
 adding 'build/src.linux-x86_64-2.7/assimulo/thirdparty/hairer/radau5-f2pywrappers.f' to     sources.
build_src: building npy-pkg config files
running build_py
running build_ext
customize UnixCCompiler
customize UnixCCompiler using build_ext
customize GnuFCompiler
Could not locate executable g77
Could not locate executable f77
customize IntelFCompiler
Could not locate executable ifort
Could not locate executable ifc
customize LaheyFCompiler
Could not locate executable lf95
customize PGroupFCompiler
Could not locate executable pgfortran
customize AbsoftFCompiler
Could not locate executable f90
customize NAGFCompiler
Found executable /usr/bin/f95
customize VastFCompiler
customize CompaqFCompiler
Could not locate executable fort
customize IntelItaniumFCompiler
Could not locate executable efort
Could not locate executable efc
customize IntelEM64TFCompiler
customize Gnu95FCompiler
Found executable /usr/bin/gfortran
customize Gnu95FCompiler
customize Gnu95FCompiler using build_ext
running scons
running install_lib
running install_egg_info
Removing /usr/local/lib/python2.7/dist-packages/Assimulo-2.1.1.egg-info
Writing /usr/local/lib/python2.7/dist-packages/Assimulo-2.1.1.egg-info
running install_clib
customize UnixCCompiler
nathan@ubuntu:~/Documents/pythoncode/Assimulo-2.1.1$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-01T18:16:10.277

安装 assimulo 时，只尝试`/usr`作为 sundials-home 目录。我已经在每个示例中搜索`cvodes.h`了日晷模块的文件，该文件位于`/usr/include/cvodes`. sundials-home 目录使用的是包含目录的父目录，所以`/usr`.

# sql - 如何同时按最大日期和组获取grails中的记录

> ID：14484883
> 
> 赞同：6
> 
> 时间：2013-01-23T16:46:11.203
> 
> 标签：sql, hibernate, grails, groovy, grails-orm

我有一个看起来像这样的表：

```
id    name      shade        date_created
----  -----    -------      ---------------
1     Red       bright        10-28-2012
2     Orange    light         10-28-2012
3     Red       <null>        10-24-2013
4     Orange    light         10-24-2013 
```

期望的结果：

```
id    name   value    date_created
----  -----  ------   ---------
3     Red    <null>   10-24-2013
4     Orange light    10-24-2013 
```

我可以用 GORM 做什么来得到这个结果？

在纯 sql 中，这是让我得到所需结果的查询：

```
SELECT t.name, t.shade, r.MaxTime
FROM (SELECT name, MAX(date_created) as MaxTime
      FROM colorable
      GROUP BY name) r
INNER JOIN colortable t ON t.name = r.name AND t.date_created = r.MaxTime 
```

**我试过的：**

```
 def c = Color.createCriteria()
    def results = c {
        projections {
            groupProperty("name")
            max("dateCreated")
        }
    } 
```

但我不知道如何从投影中获取更多列？即`shade`列

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T11:34:51.767

如果您使用的是 Grails 2.0 或更高版本，则可以使用分离的条件执行此操作：

```
def colors = Color.withCriteria {
    eq "dateCreated", new grails.gorm.DetachedCriteria(Color).build {
        projections {
            min "dateCreated"
        }
    }

    projections {
        property "name"
        property "shade"
        property "dateCreated"
    }
} 
```

类的显式使用`DetachedCriteria`有点难看，但还不错。此查询也应该可以用作 Where 查询，但似乎存在一个错误，这意味着您不能将 '==' 与聚合函数一起使用。修复错误后，您应该能够执行以下操作：

```
def colors = Color.where {
    dateCreated == max(dateCreated)
}.property("name").property("shade").property("dateCreated").list() 
```

请注意，将 '==' 替换为 '<' 效果很好。

# c++ - C++：在回调中恢复对象指针（API 不支持 user_data 指针）

> ID：14484885
> 
> 赞同：0
> 
> 时间：2013-01-23T16:46:21.953
> 
> 标签：c++, winapi, callback

我正在使用需要传入回调函数的 API，但它不支持任何用户定义的参数来传递对象指针。

从我的静态/外部“C”回调函数中恢复对象的选项是什么？

我正在使用[`SetAbortProc()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162960%28v=vs.85%29.aspx)，它需要一个 HDC 并传递给`AbortProc()`回调。不幸的是，我看不到任何将更多数据与 HDC 相关联的方法。

我能想到的解决方案：

*   **使用全局 Cls *my_abort_object**
    应该可以工作，因为一次只能激活一个打印作业。这似乎有点草率，但也许这只是我？
*   **使用全局 std::map<HDC, Cls*>**
    对我来说可能没用，因为只能激活一个打印作业。全局指针解决方案更简单，在这种情况下没有缺点。
*   **使用一个封装整个中止事物的单例**
    可能是最明智的方法，无需太多工作。
*   **使用 ATL 风格的 thunk**
    （这基本上是运行时生成的代码，它调用`real_callback(HARDCODED_OBJ_PTR, cb_arg1, cb_arg2, ...);`作为回调函数传入的代码）。
    会很好，但很难自己做，数据执行预防有问题等。框架可以做的事情，你不能轻易模仿。

我目前倾向于单例解决方案，因为它似乎是最干净的，没有太多开销。我会很感激任何建议！

[额外信息：使用 MSVC Espress 2010 进行 C++ Win32 编程]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:06:55.797

如果你想要一个稍微健壮的解决方案，我会继续使用一个命名空间级别的 API，它包装了一个单例的`map`- `HDC`>`class*`关系。如果您需要在多个 HDC 上下文中使用该功能，那么您最好不要去。我想公共 API 会非常相似，`SetAbortProc()`但它也会为每个 HDC 创建和映射相应的处理程序对象。

由于您只需要一个 HDC，因此紧随其后的是只使用一个全局指针（具有某种断言/常量，因此它不能变异）并依赖于在您获得中止回调时设置的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:10:17.087

这让我很惊讶，因为微软的 IME 非常擅长提供 userdata 参数。但是，如果做不到这一点，最佳解决方案是使用 LLVM。它们为您提供简单易用的 JIT thunk 功能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T16:57:21.790

很遗憾看到带有回调的 API 不允许使用总是限制其他用户的用户数据。不过，我个人会倾向于使用单例类型。

不过，您可能应该将此情况报告给 API 的开发人员。您还可以发现，如果您可以在回调中从 API 访问对象，有时您可以将指针/数据插入到其架构的其他部分，在我看来，向开发人员寻求帮助是最好的选择。您甚至可以在帮助自己的同时帮助他们。

# math - 将 FBX 模型加载到 DirectX 应用程序中

> ID：14484887
> 
> 赞同：0
> 
> 时间：2013-01-23T16:46:22.670
> 
> 标签：math, graphics, 3d, direct3d, fbx

我试图在我的directx应用程序中从FBX文件渲染一个3d模型，所以我使用fbx sdk加载它，但我发现了一个大问题，可能是由不同的坐标系引起的：DirectX使用左手，Fbx - 右手，所以最后我得到了渲染，但有两个问题：

*   模型的所有部分都由 Z 轴（或 X - 它不清楚）镜像
*   对每个零件应用 FBX 提供的变换矩阵后，零件的位置不正确；

那么我该如何处理顶点数据和/或转换矩阵呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:24:37.903

您需要在应用程序中以不同于文件中存储的方式保存模型和转换数据。一般来说，听起来你需要做的是：

*   加载 FBX
*   根据 FBX 对每个部分应用变换
*   应用变换以在所有顶点上反转 Z 轴
*   渲染/使用生成的模型。

在错误的坐标系中应用 FBX 变换会产生错误的结果。

# css - @font-face 没有在 IE8 中加载

> ID：14484891
> 
> 赞同：1
> 
> 时间：2013-01-23T16:46:30.113
> 
> 标签：css, internet-explorer-8, font-face, umbraco, mime-types

我从 fontsquirrel.com 为我们客户的一个网站生成了一个 @font-face 工具包。我们的站点在登台 (http) 和实时 (https) 服务器上运行。该网站建立在.NET之上

我遇到的问题是字体无法在 IE8 上加载。它在 IE9、Chrome、Firefox 和 Safari 中运行良好。

我采取的步骤如下：

*   使用客户端提供的 .TTF 字体文件生成的套件
*   将字体文件复制到资产文件夹中
*   使用生成的代码在 CSS 文件中引用的字体文件`@font-face`（如下）

```
@font-face {
    font-family: 'font-name';
    src: url('../../fonts/font-name-webfont.eot');
    src: url('../../fonts/font-name-webfont.eot?#iefix') format('embedded-opentype'),
         url('../../fonts/font-name-webfont.woff') format('woff'),
         url('../../fonts/font-name-webfont.ttf') format('truetype'),
         url('../../fonts/font-name-webfont.svg#font-name') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

我一直在研究可能的修复方法，到目前为止，我尝试了以下失败：

*   重新生成字体套件
*   检查在 Web.config 中设置了所有必需的 mime 类型
*   使用开发人员工具在 IE 中检查了字体系列规则
*   检查声明没有在其他 CSS 文件中被覆盖
*   将下载的字体套件测试添加到临时服务器并在 IE8 中测试

**注意：**
我上传到临时服务器的测试在 IE8 上运行良好。这表明它要么与服务器相关，要么我们的 CSS 有问题。不过，我 99% 确定我已经排除了 CSS 中的任何可疑之处。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:06:33.117

首先，我会检查字体文件是否实际被提供。它可能与不正确的相对路径一样愚蠢 - 尽管在这种情况下我对此表示怀疑。为此，请使用[Charles](http://www.charlesproxy.com/)或[Fiddler 之](http://www.fiddler2.com/fiddler2/)类的工具。这些工具应该始终是检查文件是否按预期提供的第一个调用端口。

我还会检查扩展/mime 类型是否在站点的配置或 IIS 的配置中设置。

# ember.js - ember新路由器

> ID：14484892
> 
> 赞同：1
> 
> 时间：2013-01-23T16:46:33.170
> 
> 标签：ember.js, ember-router

我有一个关于 Ember 路由和控制器的问题。我刚刚写了一个小应用程序来熟悉新的路由器。因此，我构建了一个按钮，通过单击它可以转换到另一个状态。

```
App.PostsView = Em.View.extend({
  click: function() {
    var router;
    this.get('controller').transitionTo('about');
  }
}); 
```

我现在的问题是：**该`get`方法返回什么？**. 显然是一个实例，`PostController`但一方面控制器没有`transitionTo()`方法，另一方面没有任何意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T17:51:48.697

`this.get('foo')`返回 Ember 对象的属性。由于视图可以具有“控制器”属性，`this.get('controller')`因此返回绑定到视图控制器属性的控制器（默认情况下为 postsController）。

`this.get('controller').transitionTo()`之所以有效，是因为正如 sly7_7 所提到的，`transitionTo()`它也在控制器上定义并委托给路由器。请注意，它可能会被弃用，应该使用

```
this.get('controller').transitionToRoute('about'); 
```

反而。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T18:26:30.330

您不应该在视图级别执行此操作，这是路由器的设计目的，因此与其在视图中捕获单击事件，不如在按钮上实现一个动作并让路由器处理它。我建议您从一开始就学习最佳实践，您的应用程序可能会发展，需要更复杂的概念，例如处理事务提交/回滚，创建/更新记录。所以这是我给你的建议

在你看来

```
<button type="button" {{action onSaveClick}} />Save</button> 
```

在您的路由器中

```
App.FooRoute = App.Route.extend({
    events: {
        onSaveClick: function() {
            this.transitionTo('bar');
        }
    }
}) 
```

如果由于任何其他原因，比如样式或动画，您发现自己被迫在视图中捕获点击事件，那么我建议您捕获事件，执行您的样式，最后向控制器发送一个事件。然后可以在路由器中以相同的方式处理该事件

```
App.FooView = Ember.View.extend({
 click: function() {
   // Do some styling
   this.get('controller').send('onSaveClick')
 }
}) 
```

最后谈到最佳实践，尝试学习在使用 ember 时将您的应用程序视为一系列相互交互的状态。你会发现自己*必须*正确实施这个概念。看看[这个](https://speakerdeck.com/trek/applications-a-series-of-states)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T16:58:24.573

控制器有一个 transitionTo: [https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/ext/controller.js#L36](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/ext/controller.js#L36)，它基本上委托给它的目标（这是路由器）

# javascript - JQuery - 克隆元素并更改多个属性的属性

> ID：14484900
> 
> 赞同：0
> 
> 时间：2013-01-23T16:46:52.143
> 
> 标签：javascript, jquery

我有几个这样的元素：

```
 <div class="image_insert clearfix">
    <label for="userfile3">Image 3</label>
    <input type="file" name="userfile3" id="userfile3">
    <label for="slika_naziv_eng3">Image Title</label>
    <input type="text" name="slika_naziv_eng3" id="slika_naziv_eng3"/>
  </div> 
```

和用于克隆的 JS：

```
var img_add = $('.img_add');

img_add.on('click', function(){
  var img_ins = $('.image_insert'),
  i = img_ins.length,
  clon = img_ins.first().clone().attr({'class' : 'image_insert clearfix', 'name' : 'userfile' + i}).insertAfter(img_ins.last());
}); 
```

我需要更改所有有数字的属性。每次添加新元素时，都需要计算元素的数量，新的数量将是元素数量 + 1。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:54:00.673

我从过去写的类似 id 中获取了这个

```
$("#containerDiv").find("div").each(function(){
    lastVersionNumber = jQuery(this).attr("id").replace(/\D/g, "")/1;
});
newVersionNumber = lastVersionNumber + 1;

# build the new version HTML string
var sHTML = "<div name='mydiv'>";
sHTML += jQuery("#templateCode").html()
sHTML = sHTML.replace(/<input/i, "<input name='v"+newVersionNumber+"_name'");   
sHTML += "</div>";

$("#containerDiv").append(sHTML); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:29:08.467

试试这个：克隆包含新元素，所以，你需要找到你的元素

```
 <!DOCTYPE html>
  <html>
  <head>
    <title>Clone Elements with Jquery by @MaoAiz + Sasha</title>
  </head>
  <body>
    <button class="img_add">New</button>
    <div class="image_insert clearfix">
        <label for="userfile1" class="img-label">Image 1</label>
        <input type="file" name="userfile1" id="userfile1">
        <label for="slika_naziv_eng1">Image Title</label>
        <input type="text" name="slika_naziv_eng1" id="slika_naziv_eng1"/>
    </div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script>
        var img_add = $('.img_add');

        img_add.on('click', function(){
          var img_ins = $('.image_insert'),
          i = img_ins.length + 1;
          clon = img_ins.first().clone().insertAfter(img_ins.last());
          // clon contains the new element, so, you need to find your element
          clon.find("input").first().attr({
            'name'  : 'userfile' + i,
            'id'    : 'userfile' + i
          });
          clon.find("input").last().attr({
            'name'  : 'slika_naziv_eng' + i,
            'id'    : 'slika_naziv_eng' + i
          });
          //plus:
          clon.find(".img-label").text("Image " + i)
          // view you cosole in Chrome Ctrl + Shift + j
          console.log("Elements: " + i)
        });
    </script>
  </body>
  </html> 
```

我在 github 上有一个演示。[https://github.com/MaoAiz/Formulario-Dinamico-JQuery](https://github.com/MaoAiz/Formulario-Dinamico-JQuery)

# javascript - 四舍五入到最接近的 12 的倍数

> ID：14484908
> 
> 赞同：8
> 
> 时间：2013-01-23T16:47:05.763
> 
> 标签：javascript, math, rounding

> **可能重复：**
> [将数字四舍五入到最接近的 3 的倍数](https://stackoverflow.com/questions/3254047/round-number-up-to-the-nearest-multiple-of-3)

我需要一个 javascript 调用，它将数字四舍五入到最接近的 12 的倍数。

一些例子：

1 -> 12

7 -> 12

14 -> 24

27 -> 36

有谁知道这样做的好方法？我能想到的只是“如果在 1-11 之间，则为 12。如果在 13-23 之间，则为 24，等等。” 但这似乎效率不高。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T16:53:03.950

采用[`Math.ceil()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/ceil)

```
var n = 13;
var next = Math.ceil(n/12) * 12; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T16:53:08.833

对于正整数：

```
ceiling(n/12.0) * 12 
```

对于负整数：

```
floor(n/12.0) * 12 
```

对于零：

```
return 12 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:52:57.440

```
function nearest(i) {
    return Math.floor((i-1)/12)*12+12;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T16:53:54.613

```
function roundIt(n) {
    return Math.ceil(n / 12) * 12;
} 
```

# html2pdf - html2pdf页码

> ID：14484921
> 
> 赞同：2
> 
> 时间：2013-01-23T16:47:25.450
> 
> 标签：html2pdf

我有一个 html 代码，当我使用 html2pdf 将其转换为 pdf 时，它比单个页面长，我需要在两个页面中都输入页码。

我试过把 page_footer 代码放在这篇文章中说的那样：[html2pdf page numbering](https://stackoverflow.com/questions/6386599/html2pdf-page-numbering)

但它只显示最后一页的页码，而不是第一页。我可以修改html代码，但我明白如果我把标签放在它的末尾，html2pdf认为它指的是代码的末尾，而不是页面的末尾。

如何将页码放在所有页面中，从第一页到最后一页？

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T07:45:37.547

You can put the attribute `footer="page"` in the `<page>` tag and all the pages will be auto-numbered.

```
<page footer="page">
    <page_header>
        /* Page Header */
    </page_header> 
    <page_footer>
        /* Page Footer */
    </page_footer>

    /* Page Content */
</page> 
```

[html2pdf:en:v4:page](http://wiki.spipu.net/doku.php?id=html2pdf%3aen%3av4%3apage)

# objective-c - Using a factory method to set a __weak variable seems to keep the object alive too long

> ID：14484923
> 
> 赞同：3
> 
> 时间：2013-01-23T16:47:34.277
> 
> 标签：objective-c, memory-management, automatic-ref-counting

I've created a Person class, of which I instantiate two objects:

```
int main(int argc, const char * argv[])
{
    @autoreleasepool {
        Person * __weak pweak = [Person new];
        Person *p = [Person personWithName:@"Strong" lastName:nil dateOfBirth:nil];
    }
    return 0;
} 
```

The `Person` class overrides its `dealloc` method, so that it prints the name of the `Person` being deallocated.

Everything goes as expected, the weak variable doesn't keep the `Person` instance alive, I see this in the log ("John" is the default name of a `Person` object):

```
2013-01-23 17:36:51.333 Basics[6555:303] John is being deallocated
2013-01-23 17:36:51.335 Basics[6555:303] Strong is being deallocated 
```

However, if I use the factory method in the assignation to the weak variable:

```
int main(int argc, const char * argv[])
{
    @autoreleasepool {
        Person * __weak pweak = [Person personWithName:@"Weak" lastName:nil dateOfBirth:nil];
        Person *p = [Person personWithName:@"Strong" lastName:nil dateOfBirth:nil];
    }
    return 0;
} 
```

this is what I see logged:

```
2013-01-23 17:44:16.260 Basics[6719:303] Strong is being deallocated
2013-01-23 17:44:16.262 Basics[6719:303] Weak is being deallocated 
```

Am I doing something wrong?

These methods of the Person class may be concerned:

```
- (id)initWithName:(NSString *)name lastName:(NSString *)lastName dateOfBirth:(NSDate *)birth {
    self = [super init];
    if (self) {
        _name = name;
        _lastName = lastName;
        _dateOfBirth = birth;
    }
    return self;
}

+ (id)personWithName:(NSString *)name lastName:(NSString *)lastName dateOfBirth:(NSDate *)birth {
    return [[self alloc] initWithName:name lastName:lastName dateOfBirth:birth];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:05:01.190

When you allocate an object via the `alloc/init` method ARC gives to the creator of the object the responsability to release it later (so when you store an object as __strong it will stay alive until somebody owns it and when you store it as __weak it gets deallocated because nobody owns it).

From Apple Documentation ([http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/memorymgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/memorymgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH))

> You own any object you create You create an object using a method whose name begins with “alloc”, “new”, “copy”, or “mutableCopy” (for example, alloc, newObject, or mutableCopy).

When dealing with factory methods ARC treats returning variables as autoreleasing so they are released when the pool will be drained. ARC, in facts, converts your factory method to this:

```
+ (id)personWithName:(NSString *)name lastName:(NSString *)lastName dateOfBirth:(NSDate *)birth 
{
   return [[[self alloc] initWithName:name lastName:lastName dateOfBirth:birth] autorelease];
} 
```

# c# - 匹配的最佳重载方法有一些无效参数

> ID：14484926
> 
> 赞同：2
> 
> 时间：2013-01-23T16:47:43.063
> 
> 标签：c#

我正在使用 VS 2010 C#。我的代码如下：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Threading;
using MarketplaceWebServiceOrders;
using MarketplaceWebServiceOrders.Model;

namespace FetchNewOrdersJob
{
    public class MarketplaceWebServiceOrders
    {
        private volatile bool isRunning;
        private OrderFetcher orderFetcher;

        private TimeSpan _checkOrdersInterval = TimeSpan.FromMinutes(15.0);
        /// <summary>
        /// Gets or sets the order check interval.  Defaults to 15 minutes.
        /// </summary>
        public TimeSpan CheckOrdersInterval
        {
            get { return _checkOrdersInterval; }
            set { _checkOrdersInterval = value; }
        }

        /// <summary>
        /// Internal method to handle an order.
        /// </summary>
        protected virtual void HandleOrder(Order order)
        {
            Console.WriteLine("Processing Order:");
            Console.WriteLine("---------------------------------------------------");
            Console.WriteLine(order.ToString());
            // Fetch the order items in each order
            orderFetcher.FetchOrderItems(order.AmazonOrderId, delegate(OrderItem item)
            {
                Console.WriteLine("\tProcessing Order Item");
                Console.WriteLine("\t---------------------------------------------------");                // Process order item here.
                Console.WriteLine("\t" + item.ToString().Replace("\n", "\n\t"));
            });

            Console.WriteLine("=================================================");
            Console.WriteLine();
        }

        /// <summary>
        /// Method to continuously check orders over an interval, and list OrderItems for those Orders.
        /// </summary>
        private void OrdersJobThread(object obj)
        {
            orderFetcher.ProcessOrder += HandleOrder;

            if (this.CheckOrdersInterval == TimeSpan.MinValue)
            {
                throw new ArgumentException("The CheckOrdersInterval TimeSpan cannot be zero.", "CheckOrdersInterval");
            }

            DateTime startCheckInterval = DateTime.Now.Subtract(CheckOrdersInterval);

            // Continue forever until the isRunning flag is cleared.
            while (isRunning)
            {
                try
                {
                    // Check the orders for this interval.
                    DateTime checkInterval = startCheckInterval;
                    startCheckInterval = DateTime.Now.Subtract(TimeSpan.FromMinutes(3.0));

                    Console.WriteLine("Fetching orders from " + checkInterval.ToString() + " to " + startCheckInterval.ToString());
                    orderFetcher.FetchOrders(checkInterval, startCheckInterval);

                    // Wait for the next interval.
                    Console.WriteLine("Fetch complete.  Sleeping until next interval.");
                    while (isRunning && DateTime.Now.Subtract(startCheckInterval) < CheckOrdersInterval)
                    {
                        Thread.Sleep(1000);
                    }
                }
                catch(Exception err)
                {
                    Console.WriteLine("Error: " + err.Message + ".  Orders job thread is exiting.");
                    isRunning = false;
                }
            }
        }

        /// <summary>
        /// Sample code to invoke the OrderFetcher.
        /// </summary>
        /// <param name="service">MarketplaceWebServiceOrders object.</param>
        /// <param name="sellerId">The seller Id.</param>
        /// <param name="marketplaceIdList">List of marketplaces passed in to the GetOrders call.</param>
        public static void InvokeOrderFetcherSample(
            MarketplaceWebServiceOrders service,
            string sellerId,
            string [] marketplaceIdList
        )
        {
            // Create a FetchOrderUpdates job with the default time span.
            MarketplaceWebServiceOrders job = new MarketplaceWebServiceOrders();
            job.isRunning = true;
            job.orderFetcher = new OrderFetcher(service, sellerId, marketplaceIdList);

            Thread jobThread = new Thread(job.OrdersJobThread);
            jobThread.IsBackground = true;
            jobThread.Start();

            // Pause on the main thread for one hour or until the thread exits, then end the job.
            jobThread.Join(1000 * 60 * 60);
            job.isRunning = false;

            // Block until the thread terminates to prevent any requests in progress from being aborted.
            while (jobThread.IsAlive)
            {
                Thread.Sleep(1000);
            }
        }
    }
} 
```

我收到两个错误，似乎无法弄清楚

1.  参数 1：无法从 'FetchNewOrdersJob.MarketplaceWebServiceOrders' 转换为 'MarketplaceWebServiceOrders.MarketplaceWebServiceOrders'

2.  'MarketplaceWebServiceOrders.OrderFetcher.OrderFetcher(MarketplaceWebServiceOrders.MarketplaceWebServiceOrders, string, string[])' 的最佳重载方法匹配有一些无效参数

错误的行号是 112：`job.orderFetcher = new OrderFetcher(service, sellerId, marketplaceIdList);`

OrderFetcher.cs

```
using System;
using System.Collections.Generic;
using System.Text;

using MarketplaceWebServiceOrders.Model;

namespace MarketplaceWebServiceOrders
{    
    /// <summary>
    /// Sample helper class to Fetch Orders and OrderItems using the Amazon MWS Orders API.
    /// </summary>
    public class OrderFetcher
    {
        public delegate void RetriableMethodCall();
        public delegate void ProcessOrderHandler(Order order);
        public delegate void ProcessOrderItemHandler(OrderItem orderItem);

        /// <summary>
        /// Default amount of time, in milliseconds, to sleep if a request is throttled; default to 1 per 10 minutes.
        /// </summary>
        public const int DEFAULT_THROTTLED_WAIT_TIMEOUT = 10 * 60 * 1000;

        /// <summary>
        /// Default throttling limit for ListOrders calls; default to 1 per 12 seconds.
        /// </summary>
        private const int LIST_ORDERS_DEFAULT_THROTTLE_LIMIT = 12 * 1000;

        /// <summary>
        /// Default throttling limit for ListOrderItems calls; default to 1 per 100 minutes.
        /// </summary>
        private const int LIST_ORDER_ITEMS_DEFAULT_THROTTLE_LIMIT = 10 * 60 * 1000;

        private MarketplaceWebServiceOrders mwsService;
        private string mwsSellerId;
        private string[] mwsMarketplaceIdList;
        private DateTime lastServiceCall = DateTime.MinValue;

        private ProcessOrderHandler _processOrder;
        /// <summary>
        /// Event called when an order is received for processing.
        /// </summary>
        public event ProcessOrderHandler ProcessOrder
        {
            add { _processOrder += value; }
            remove { _processOrder -= value; }
        }

        /// <summary>
        /// Creates a new instance of the OrderFetcherSample class.
        /// </summary>
        /// <param name="service"></param>
        public OrderFetcher(MarketplaceWebServiceOrders service, string sellerId, string[] marketplaceIdList)
        {
            mwsService = service;
            mwsSellerId = sellerId;
            mwsMarketplaceIdList = marketplaceIdList;
        }

        /// <summary>
        /// Fetches all orders created between the starting time and the server's
        /// local system time minus two minutes.
        /// <param name="startTime">The starting time period of orders to fetch.</param>
        public void FetchOrders(DateTime startTime)
        {
            FetchOrders(startTime, DateTime.MinValue);
        }

        /// <summary>
        /// Fetches all orders created in the given time period and processes them locally.        
        /// <param name="startTime">The starting time period of orders to fetch.</param>
        /// <param name="endTime">The ending time period of orders to fetch.</param>
        public void FetchOrders(DateTime startTime, DateTime endTime)
        {
            ListOrdersRequest request = new ListOrdersRequest();
            request.CreatedAfter = startTime;
            if (endTime != DateTime.MinValue)
            {
                request.CreatedBefore = endTime;
            }
            request.SellerId = mwsSellerId;
            request.MarketplaceId = new MarketplaceIdList();
            request.MarketplaceId.Id = new List<string>();
            foreach (string marketplaceId in mwsMarketplaceIdList)
            {
                request.MarketplaceId.Id.Add(marketplaceId);
            }

            List<Order> orderList = new List<Order>();
            ListOrdersResponse response = null;
            OrderFetcher.InvokeRetriable(LIST_ORDERS_DEFAULT_THROTTLE_LIMIT, delegate()
            {
                response = mwsService.ListOrders(request);
                ProcessOrders(response.ListOrdersResult.Orders.Order);
            });

            String nextTokenString = response.ListOrdersResult.NextToken;

            while (!string.IsNullOrEmpty(nextTokenString))
            {
                // If NextToken is set, continue looping through the orders.
                ListOrdersByNextTokenRequest nextRequest = new ListOrdersByNextTokenRequest();
                nextRequest.NextToken = nextTokenString;
                nextRequest.SellerId = mwsSellerId;

                ListOrdersByNextTokenResponse nextResponse = null;
                OrderFetcher.InvokeRetriable(LIST_ORDERS_DEFAULT_THROTTLE_LIMIT, delegate()
                {
                    nextResponse = mwsService.ListOrdersByNextToken(nextRequest);
                    ProcessOrders(nextResponse.ListOrdersByNextTokenResult.Orders.Order);
                });

                nextTokenString = nextResponse.ListOrdersByNextTokenResult.NextToken;
            }
        }

        /// <summary>
        /// Method called by the FetchOrders method to process the orders.
        /// </summary>
        /// <param name="orders">List of orders returned by FetchOrders</param>
        protected virtual void ProcessOrders(List<Order> orders)
        {
            foreach (Order order in orders)
            {
                if (_processOrder != null)
                {
                    _processOrder(order);
                }
            }
        }

        /// <summary>
        /// Fetches the OrderItems for the specified orderId.
        /// </summary>
        public void FetchOrderItems(string orderId, ProcessOrderItemHandler handler)
        {
            if (handler == null) throw new ArgumentNullException("handler");

            ListOrderItemsRequest request = new ListOrderItemsRequest();
            request.SellerId = mwsSellerId;
            request.AmazonOrderId = orderId;

            ListOrderItemsResponse response = null;
            OrderFetcher.InvokeRetriable(LIST_ORDER_ITEMS_DEFAULT_THROTTLE_LIMIT, delegate()
            {
                response = mwsService.ListOrderItems(request);
                foreach (OrderItem orderItem in response.ListOrderItemsResult.OrderItems.OrderItem)
                {
                    handler(orderItem);
                }
            });

            String nextTokenString = response.ListOrderItemsResult.NextToken;

            while (!string.IsNullOrEmpty(nextTokenString))
            {
                // If NextToken is set, continue looping through the orders.
                ListOrderItemsByNextTokenRequest nextRequest = new ListOrderItemsByNextTokenRequest();
                nextRequest.NextToken = nextTokenString;
                nextRequest.SellerId = mwsSellerId;

                ListOrderItemsByNextTokenResponse nextResponse = null;
                OrderFetcher.InvokeRetriable(LIST_ORDER_ITEMS_DEFAULT_THROTTLE_LIMIT, delegate()
                {
                    nextResponse = mwsService.ListOrderItemsByNextToken(nextRequest);
                    foreach (OrderItem orderItem in nextResponse.ListOrderItemsByNextTokenResult.OrderItems.OrderItem)
                    {                        
                        handler(orderItem);
                    }
                });

                nextTokenString = nextResponse.ListOrderItemsByNextTokenResult.NextToken;
            }
        }

        /// <summary>
        /// Invokes a method in a retriable fashion.
        /// </summary>
        /// <param name="throttledWaitTime">The amount of time to wait if the request is throttled.</param>
        /// <param name="method">The method to invoke.</param>
        public static void InvokeRetriable(RetriableMethodCall method)
        {
            InvokeRetriable(DEFAULT_THROTTLED_WAIT_TIMEOUT, method);
        }

        /// <summary>
        /// Invokes a method in a retriable fashion.
        /// </summary>
        /// <param name="throttledWaitTime">The amount of time to wait if the request is throttled.</param>
        /// <param name="method">The method to invoke.</param>
        public static void InvokeRetriable(int throttledWaitTime, RetriableMethodCall method)
        {
            bool retryRequest = false;
            do
            {
                retryRequest = false;
                try
                {
                    // Perform some action
                    method.Invoke();
                }
                catch (MarketplaceWebServiceOrdersException ordersErr)
                {
                    // If the request is throttled, wait and try again.
                    if (ordersErr.ErrorCode == "RequestThrottled")
                    {
                        Console.WriteLine("Request is throttled; waiting...");
                        retryRequest = true;
                        System.Threading.Thread.Sleep(throttledWaitTime);
                    }
                    else
                    {
                        // On any other error, re-throw the exception to be handled by the caller
                        throw;
                    }
                }
            } while (retryRequest);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:58:33.480

我认为这可能与您导入（我假设）Web 服务对象的方式有关。如果它是 WCF 服务，请确保您的“模型”在不同的项目中被引用，并且在添加服务引用时，请确保选中“重用现有类型”选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:53:38.437

您`MarketplaceWebServiceOrders`在当前`FetchNewOrdersJob`和`MarketplaceWebServiceOrders`命名空间中都有类（最后一个命名空间也与您的类同名）。看起来你的`OrderFetcher`类是在`MarketplaceWebServiceOrders`命名空间中声明的。并且它期望作为`MarketplaceWebServiceOrders`也在该命名空间中声明的参数。但是您正在尝试传递`MarketplaceWebServiceOrders`在当前`FetchNewOrdersJob`命名空间中声明的类。

重命名您的`FetchNewOrdersJob.MarketplaceWebServiceOrders`类以避免这些冲突。

# django - 带有 Google App Engine 部署的 Django 1.4

> ID：14484935
> 
> 赞同：1
> 
> 时间：2013-01-23T16:48:00.277
> 
> 标签：django, google-app-engine

我正在尝试将我的 django-app 部署到 Google App Engine，但是当我运行 manage.py syncdb 时不断收到此错误。

```
Traceback (most recent call last):

File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Program Files\Google\google_appengine\lib\django_1_4\django\core\mana
gement\__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "C:\Program Files\Google\google_appengine\lib\django_1_4\django\core\mana
gement\__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Program Files\Google\google_appengine\lib\django_1_4\django\core\mana
gement\__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "C:\Program Files\Google\google_appengine\lib\django_1_4\django\core\mana
gement\__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "C:\Program Files\Google\google_appengine\lib\django_1_4\django\utils\imp
ortlib.py", line 35, in import_module
    __import__(name)
  File "C:\Program Files\Google\google_appengine\lib\django_1_4\django\core\mana
gement\commands\syncdb.py", line 8, in <module>
    from django.core.management.sql import custom_sql_for_model, emit_post_sync_
signal
  File "C:\Program Files\Google\google_appengine\lib\django_1_4\django\core\mana
gement\sql.py", line 6, in <module>
    from django.db import models
  File "C:\Program Files\Google\google_appengine\lib\django_1_4\django\db\__init
__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "C:\Program Files\Google\google_appengine\lib\django_1_4\django\db\__init
__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "C:\Program Files\Google\google_appengine\lib\django_1_4\django\db\utils.
py", line 92, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "C:\Program Files\Google\google_appengine\lib\django_1_4\django\db\utils.
py", line 44, in load_backend
    raise ImproperlyConfigured(error_msg)
django.core.exceptions.ImproperlyConfigured: 'google.appengine.ext.django.backen
ds.rdbms' isn't an available database backend.
Try using django.db.backends.XXX, where XXX is one of:
    'dummy', 'mysql', 'oracle', 'postgresql_psycopg2', 'rdbms', 'sqlite3'
Error was: No module named django.backends.rdbms.base 
```

我确保这些都包含在我的 pythonpath 中：-

C:\ProgramFiles\Google\google_appengine;C:\ProgramFiles\Google\google_appengine\lib\django_1_4

但我仍然得到名为 django.backends.rdbms.base 的 No modules。

这是我的settings.py

```
# Django settings for firstproject project.

import os
BASE_DIR = os.path.abspath(os.path.dirname(__file__)) + os.sep

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

#production =  True

import os

SETTINGS_MODE='prod'

if (os.getenv('SERVER_SOFTWARE', '').startswith('Google App Engine') or
    os.getenv('SETTINGS_MODE') == 'prod'):

    DATABASES = {
    'default': {
        'ENGINE': 'google.appengine.ext.django.backends.rdbms',
        'INSTANCE': 'd73292536:instance1',
        'NAME': 'example',
    }
}

else:

        DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
            'NAME': 'third',                      # Or path to database file if using sqlite3.
            'USER': 'root',                      # Not used with sqlite3.
            'PASSWORD': '',                  # Not used with sqlite3.
            'HOST': '127.0.0.1',                      # Set to empty string for localhost. Not used with sqlite3.
            'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
        }
    }

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'America/Eastern'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = '' 

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative path
    "C:\Users\sheila\Desktop\Templates\static",
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '+iiq+84-xm_pmxsbwz18#*n2hht$5f9o_m6d8spt2buhxxl0m='

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'google.appengine.ext.ndb.django_middleware.NdbDjangoMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'firstproject.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.

    "C:\\Users\\sheila\\Desktop\\Templates\\polls"
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    #'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'polls',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.

LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:27:58.517

一个问题是，您的设置文件错误。似乎在您的设置文件中，您设置了
`'ENGINE': 'google.appengine.ext.django.backends.rdbms'` . 导入 os if (os.getenv('SERVER_SOFTWARE', '').startswith('Google App Engine') 或 os.getenv('SETTINGS_MODE') == 'prod'):

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:34:30.367

在您的问题中，您提到您将以下内容添加到您的 PYTHONPATH

```
C:\ProgramFiles\Google\google_appengine;C:\ProgramFiles\Google\google_appengine\lib\django_1_4 
```

该路径是错误的，因为“程序文件”中有一个空格。因此，您的运行时没有找到`google.appengine.ext.django.backends.rdbms`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T17:08:49.987

我相信这是为您提供的，您不必添加文件，请参见此处：[3rd party library](https://developers.google.com/appengine/docs/python/tools/libraries27)

你的 app.yaml 中有这个吗？

```
libraries:
- name: django
  version: "1.4" 
```

这也可能是相关的：

> 要将 Django 与 NDB 存储 API 一起使用，请将“google.appengine.ext.ndb.django_middleware.NdbDjangoMiddleware”添加到 Django settings.py 文件的 MIDDLEWARE_CLASSES 条目中。

与上面相同的链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T00:53:07.643

[我的问题](https://stackoverflow.com/questions/14137404/google-app-engine-and-django-support)可能重复。有关部署的更多信息，请参阅接受的答案和链接的后续问题。

我最终通过使用数据库定义中的建议`if: else:`子句对部署进行了排序。`SETTINGS.PY`

# ios - 成功上传到服务器，objective-c，ios后显示图像的好方法是什么

> ID：14484940
> 
> 赞同：-1
> 
> 时间：2013-01-23T16:48:10.800
> 
> 标签：ios, objective-c, uitableview, core-data

给定：

1.  *视图 A ( uitableView ) 用于在您通过名为getAllImages*的请求从服务器成功拉取图像后显示所有图像

**   您还可以通过右上角的按钮在视图 A 中上传新照片* 

 *我的目标 ：

*   在桌子上显示一组新图像（包括新图像）

我正在做的是：

1.  将请求发送到服务器以上传图像（我正在使用 afnetworking 来执行此操作）

2.  因为服务器端只返回“成功”或“失败”给我而没有其他信息。假设它是成功的，我将通过*getAllImages发出请求以获取新的图像集*

3.  将调用*reloadData*在表上显示一组新数据

我不确定这是不是一个好方法，我仍在寻找完成这项任务的最佳方法。我不知道我应该在这个任务中使用核心数据以及如何使用它。

如果您遇到此任务，请给我任何建议。任何意见表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:44:08.187

这是我要做的：

1 - 调用 getAllImages 显示所有 N 个图像

2 - 拍摄新照片

3 - 显示之前从 getAllImages 获得的 N 个图像，以及来自步骤 2 的 1 个本地图像

4 - 触发异步请求（不记得我们如何使用 AFNetworking 做到这一点）从第 2 步上传图像

5 - 如果成功代码，保留 N+1 图像。如果失败代码，只显示 N 张图像并删除最后一张。

您可以使用 reloadrowatindexpath 专门重新加载单行，而不会对性能造成太大影响。*

# ios - 手势识别器和块

> ID：14484941
> 
> 赞同：0
> 
> 时间：2013-01-23T16:48:14.897
> 
> 标签：ios, uigesturerecognizer

我们可以将块与手势识别器一起使用吗？看起来并非如此。例如，这不起作用：

```
UITapGestureRecognizer *tapped = [[UITapGestureRecognizer alloc] initWithTarget: self
     action:^(id sender) {
     }
]; 
```

我错过了什么，还是 UIGestureRecognizer 类不支持块？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T16:50:55.003

但是，这应该：

```
UITapGestureRecognizer *tapped = [[UITapGestureRecognizer alloc] initWithTarget:[^{
    // do stuff
} copy] action:@selector(invoke)]; 
```

但是，您可能不应该这样做，因为它是一种私有方法。

# xml - Magento XML 使用 before/after 放置块几乎不工作

> ID：14484955
> 
> 赞同：43
> 
> 时间：2013-01-23T16:48:39.853
> 
> 标签：xml, magento

我是一个前端 Magento 开发人员，已经构建了很多自己的主题，我想更好地理解 Magento 的 XML 块定位...

我通常使用`local.xml`文件来操作所有内容，我可以如下定义一个块：

```
<cms_index_index>
   <reference name="root">
      <block type="core/template" name="example_block" as="exampleBlock" template="page/html/example-block.phtml"/>
   </reference>
</cms_index_index> 
```

这会`cms_index_index`在主页（`root`

```
<?php echo $this->getChildHtml('exampleBlock') ?> 
```

...到`1column.phtml`（或`2columns-left`/`right.phtml`等`3columns.phtml`）。`cms_index_index`通过替换适当的页面标签，可以将块放置在任何页面上。

我在核心 XML 文件和教程中看到如下内容：

```
<reference name="root">
   <block type="core/template" name="example_block" before="content" template="page/html/example-block.phtml"/>
</reference> 
```

`content`是一个块，它是magento的一般页面结构的一部分，据我了解，`before="content"`应该将它放在你期望的地方，而不需要使用`getChildHtml('exampleBlock')`，到目前为止这么好......但是，之前/之后似乎几乎没有工作我，而且我经常发现自己求助于 getChildHtml 方法作为备份，这并不总是理想的，并且意味着编辑更多的 .phtml 文件而不是必要的。

我试过了：

```
<reference name="root">
   <block type="core/template" name="example_block" before="content" template="page/html/example-block.phtml"/>
</reference> 
```

什么都没有出现...

```
<reference name="root">
   <block type="core/template" name="example_block" after="header" template="page/html/example-block.phtml"/>
</reference> 
```

仍然没有....我也知道在它的父块内的所有内容之前使用`before="-"`或`after="-"`放置一些东西。我偶尔会有一些运气，但通常只是感到困惑和沮丧。

我已经到处搜索“magento xml before/after not working”，并开始怀疑是否只是我发生了这种情况……谁能解释我什么时候可以和不能使用 before/after 来定位块？上面的例子有什么问题？

我在 magento 1.7.0.2 （发布时最新可用）

这样做的主要动机是减少我需要编辑的核心 .phtml 文件的数量`getChildHtml()`，所以如果有另一种（XML）方法来解决这个问题，我很想知道......

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-01-23T18:38:33.330

`before`and属性仅适用于以下`after`两种情况之一：

1.  当你插入一个`core/text_list`块
2.  当您的模板块调用`getChildHtml`不带任何参数时

当你说

```
<reference name="root">
   <block type="core/template" name="example_block" before="content" template="page/html/example-block.phtml"/>
</reference> 
```

你在告诉 Magento

> 嘿，Magento，把块放在`example_block`里面`root`。

当您将许多不同的块放入父级中时，这些块具有隐式顺序。对于模板块，这个顺序无关紧要，因为这些块是显式渲染的。

```
<?php echo $this->getChildHtml('example_block') ?> 
```

但是，有两种情况下顺序很重要。首先，如果你打电话

```
<?php echo $this->getChildHtml() ?> 
```

从模板中，然后 Magento 将按顺序渲染**所有**子块。

其次，有一种特殊类型的块，称为“文本列表”（`core/text_list`/ `Mage_Core_Block_Text_List`）。这些块再次按顺序自动渲染所有子块。该`content`块就是一个例子

```
<block type="core/text_list" name="content"/> 
```

这就是为什么您可以将块插入`content`并自动渲染的原因。

因此，在上面的示例中，您将块插入`root`块中。该`root`块是一个模板块，其 phtml 模板使用`getChildHtml`带有显式参数的调用。因此，`before`and`after`属性不会像您（以及包括我在内的许多其他人）希望他们做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-29T12:17:00.503

我想知道，但似乎`Mage_Core_Block_Abstract`：

```
public function getChildHtml($name = '', $useCache = true, $sorted = false) 
```

由于`$sorted = false`.

所以最后块的顺序/排序默认情况下只考虑在`Core/Block/Text/List`- 块中。

如果要确保以正确的顺序输出子块，则必须使用：

```
<?php echo $this->getChildHtml('', true, true) ?> 
```

# commonsware - 教程 #9 中的 getWebView() 错误

> ID：14484957
> 
> 赞同：0
> 
> 时间：2013-01-23T16:48:40.747
> 
> 标签：commonsware

我按照教程 #9 的说明创建了 AbstractContentFragment 对象。从书中复制代码后，我收到错误“方法 getWebView() 未定义为 AbstractContentFragment 类型”

我检查了代码——这正是书中的内容。我在项目中包含了 actionbarsherlock 库 - 教程 #8 没有问题。我可以在 webviewfragment 类中看到 getWebview() 方法。

指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:53:51.917

> 我已经检查了代码 - 这正是书中的内容

几乎，根据定义，它不是。

> 我可以在 webviewfragment 类中看到 getWebview() 方法。

大概，你`AbstractContentFragment`没有扩展`WebViewFragment`. 这在教程 #9 的步骤 #3 中有所介绍（至少在本书的 4.5 版中——不同的书籍版本可能会有稍微不同的教程版本）。

# java - 无法访问导入的类方法

> ID：14484958
> 
> 赞同：1
> 
> 时间：2013-01-23T16:48:41.493
> 
> 标签：java, eclipse, methods

我正在尝试使用以下方法创建一个新路径：

```
Path path = new Paths.get(path_name); 
```

我已经导入了*Path*和*Paths*并且我已经确认方法*get*存在于 Paths 中，但是 Eclipse 告诉我该方法不存在。它说：**Paths.get 无法解析为类型** 我该怎么办？我重新启动了 Eclipse 和我的电脑，但仍然没有运气。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:51:28.090

`get(..)`是一种静态方法。像这样称呼它：

```
Path path = Paths.get(path_name); 
```

引用：“此类仅由静态方法组成” [API](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:51:07.467

您的代码片段不正确：调用静态方法不需要`new`

```
Path path = Paths.get(path_name); // get(...) is a static method 
```

# django - 将 matplotlib 与 apache 和 django 一起使用的 setugid() 错误

> ID：14484962
> 
> 赞同：5
> 
> 时间：2013-01-23T16:48:51.563
> 
> 标签：django, macos, apache, matplotlib

我在通过 Mac OS X 10.7.5 上的 apache 提供的 Django 应用程序中使用 matplotlib，但我无法让它为我绘制图形。我已经导入了 import `matplotlib.pyplot as plt`，在我看来这行，

```
plt.plot(x, y) 
```

（`x`并且`y`是numpy数组）导致错误

```
2013-01-23 16:39:16.731 httpd[381:203] The application with bundle ID (null) is running setugid(), which is not allowed. 
```

在我的 apache 错误日志中。恐怕我不知道是什么`setugid()`，或者如何让我的应用程序允许运行它。我`$MPLCONFIGDIR`的设置为`/tmp/.mplconfig`apache 作为用户 _www 已向其写入了几个空目录，因此这似乎工作正常。谁能给我一个线索？

更新：如果我

```
from matplotlib.backends.backend_agg import FigureCanvasAgg as FigureCanvas
from matplotlib.figure import Figure 
```

并设置一个图形、子图和轴（整个 caboodle），我可以 savefig() 没有错误...... pyplot 需要什么额外的权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-31T05:40:43.587

导入后使用 agg 后端`matplotlib`消除了运行中的`setugid()`错误`Flask app``OS X Server``Sierra`

```
import matplotlib as mpl

mpl.use('agg') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-26T18:05:11.687

您还可以为您的系统全局添加后端配置，`~/.matplotlib/matplotlibrc`例如：

```
backend: TkAgg 
```

这也将解决您的问题。如果您没有`matplotlibrc`，只需创建一个。

# php - 如何在不使用闭包的情况下调用 array_map()

> ID：14484963
> 
> 赞同：0
> 
> 时间：2013-01-23T16:48:51.847
> 
> 标签：php, array-map

我有这样的事情：

```
public static function lengtOfElements($array){
    return array_map(function($item){return strlen($item);},$array);
} 
```

我想做的是直接在array_map中使用strlen($string)，但是当我尝试它时它不起作用..这是为什么？

像这样的东西：

```
public static function lengtOfElements($array){
    return array_map(strlen($string),$array);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T16:50:05.577

你的语法有点偏离：

```
return array_map('strlen',$array); 
```

# ios - 不使用 ARC 时替换 __weak

> ID：14484964
> 
> 赞同：5
> 
> 时间：2013-01-23T16:48:54.017
> 
> 标签：ios, cocoa-touch, objective-c-blocks, nsoperationqueue, retain-cycle

我有这行代码：

```
__weak NSBlockOperation *weakOperation = operation; 
```

这是触发此编译器错误：

```
__weak attribute cannot be specified on automatic variable. 
```

原因是我没有启用 ARC（还没有准备好进行切换）。所以从另一个 StackOverFlow 问题中，我被推荐使用：

```
__unsafe_unretained NSBlockOperation *weakOperation = operation; 
```

这使错误消失了，但是对于我正在使用它的上下文，它不起作用（如果有兴趣，请参阅此问题：[如何取消 NSOperationQueue](https://stackoverflow.com/questions/14432029/how-to-cancel-nsoperationqueue)）。

所以我的问题是，在这种情况下我可以用什么替换`__weak`关键字来消除这个警告？当我使用 时，一切实际上都正常工作`__weak`，但我担心它不会支持未来版本的 iOS。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T17:02:02.467

您不必担心 iOS 的未来版本，因为`__weak`编译器会在为您生成代码时解释某些内容。

查看您的另一篇文章向我表明，您的目标是避免`weakOperation`被保留，尽管来自块内的引用。在您不使用 ARC 的特定情况下，您可以替换`__weak`为`__block`以指示在捕获期间不应保留您的*变量*。

请注意， ARC 和手动保留计数`__block`对`retain`行为的影响是不同的。

# android - 谷歌地图应用程序上的弹出菜单android

> ID：14484966
> 
> 赞同：0
> 
> 时间：2013-01-23T16:49:02.517
> 
> 标签：android, google-maps, popup

我正在做我的毕业论文，我必须做一个 Android 应用程序，它会在谷歌地图上显示我的位置（我已经做过），当我点击大学中的一些图钉时，会弹出一些建筑物的信息，如果我可以的话我单击它们，它们将重定向到一个 url。我已经用 Toast 完成了它，但它并没有满足我的需求。我已经搜索并发现 NooYawk 弹出。这是我的代码，如果有人可以提供帮助，我将不胜感激。ps 我是业余的

```
public class TGpsActivity extends MapActivity {

 MapView mapView=null;
 MapController mapController=null;
 MyLocationOverlay whereAmI=null;

 @Override
 protected boolean isLocationDisplayed(){
        return whereAmI.isMyLocationEnabled();
 }

 @Override
 protected boolean isRouteDisplayed(){
     return true;
 }

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    Drawable marker=getResources().getDrawable(R.drawable.pushpin);
    marker.setBounds((int) (-marker.getIntrinsicWidth()/2),-marker.getIntrinsicHeight(),(int) (marker.getIntrinsicWidth()/2),0);        
    mapController=mapView.getController();
    mapController.setZoom(15);

    InterestingLocations funPlaces= new InterestingLocations(marker);
    mapView.getOverlays().add(funPlaces);

    GeoPoint pt=funPlaces.getCenterPt();
    int latSpan=funPlaces.getLatSpanE6();
    int lonSpan=funPlaces.getLonSpanE6();
    Log.v("Overlays", "Lat span is " + latSpan);
    Log.v("Overlays", "Lon span is " + lonSpan);

    MapController mc = mapView.getController();
    mc.setCenter(pt);
    mc.zoomToSpan((int) (latSpan*1.5), (int)(lonSpan*1.5));

    whereAmI= new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(whereAmI);
    mapView.postInvalidate();

}
public class InterestingLocations extends ItemizedOverlay{
    private ArrayList<OverlayItem> locations = new ArrayList<OverlayItem>();
    private GeoPoint center=null;

    public InterestingLocations(Drawable marker){
        super(marker);

        GeoPoint headOffice = new GeoPoint((int)(37.97897823618044*1000000) ,(int)(23.6723855137825*1000000));
        GeoPoint computerRoom= new GeoPoint((int)(37.98013047446126*1000000) ,(int)(13.6715030670166*1000000));
        locations.add(new OverlayItem(headOffice,"headOffice","headOffice"));
        locations.add(new OverlayItem(computerRoom,"computerRoom","computerRoom"));

        populate();
    }

    public GeoPoint getCenterPt(){
        if(center==null){
            int northEdge= -90000000;
            int southEdge=  90000000;
            int eastEdge=  -180000000;
            int westEdge=   180000000;
            Iterator<OverlayItem> iter=locations.iterator();
            while(iter.hasNext()){
                GeoPoint pt=iter.next().getPoint();
                if(pt.getLatitudeE6() > northEdge)
                    northEdge=pt.getLatitudeE6();
                if(pt.getLatitudeE6() < southEdge)
                    southEdge=pt.getLatitudeE6();
                if(pt.getLongitudeE6() > eastEdge)
                    eastEdge=pt.getLongitudeE6();
                if(pt.getLongitudeE6() < westEdge)
                    westEdge=pt.getLongitudeE6();
            }
            center=new GeoPoint((int)((northEdge+southEdge)/2),(int)((westEdge+eastEdge)/2));

        }
        return center;
    }

@Override

public void draw(Canvas canvas, MapView mapView,boolean shadow)
{
        super.draw(canvas, mapView, shadow);
}
@Override
protected OverlayItem createItem(int i){
    return locations.get(i);
}
@Override
public int size() {

    return locations.size();

}

 @Override
    protected boolean onTap(int i) {
      Toast.makeText(TGpsActivity.this,
                      locations.get(i).getSnippet(),
                      Toast.LENGTH_LONG).show();

      return(true);
    }

}
@Override
public void onResume(){
    super.onResume();
    whereAmI.enableMyLocation();
    whereAmI.runOnFirstFix(new Runnable(){
            public void run(){
                    mapController.setCenter(whereAmI.getMyLocation());
            }
    });
}
@Override
public void onPause(){
        super.onPause();
        whereAmI.disableMyLocation();

}
public void myClickHandler(View target){
    switch(target.getId()){
    case R.id.sat:
        mapView.setSatellite(true);
        break;
    case R.id.traffic:
        mapView.setTraffic(true);
        break;
    case R.id.normal:
        mapView.setSatellite(false);
        mapView.setTraffic(false);
        break;
    }
    }
} 
```

[更新]

弹出菜单的代码更多，但我不想显示 l

```
@Override
protected boolean onTap(int i) {
  OverlayItem item=getItem(i);
  GeoPoint geo=item.getPoint();
  Point pt=map.getProjection().toPixels(geo, null);

  View view=panel.getView();

  ((TextView)view.findViewById(R.id.latitude))
    .setText(String.valueOf(geo.getLatitudeE6()/1000000.0));
  ((TextView)view.findViewById(R.id.longitude))
    .setText(String.valueOf(geo.getLongitudeE6()/1000000.0));
  ((TextView)view.findViewById(R.id.x))
                          .setText(String.valueOf(pt.x));
  ((TextView)view.findViewById(R.id.y))
                          .setText(String.valueOf(pt.y));

  panel.show(pt.y*2>map.getHeight());

  return(true);
}

@Override
public int size() {
  return(items.size());}}
class PopupPanel {
View popup;
boolean isVisible=false;

PopupPanel(int layout) {
  ViewGroup parent=(ViewGroup)map.getParent();

  popup=getLayoutInflater().inflate(layout, parent, false);

  popup.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
      hide();
    }
  });
}

View getView() {
  return(popup);
}

void show(boolean alignTop) {
  RelativeLayout.LayoutParams lp=new RelativeLayout.LayoutParams(
        RelativeLayout.LayoutParams.WRAP_CONTENT,
        RelativeLayout.LayoutParams.WRAP_CONTENT
  );

  if (alignTop) {
    lp.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    lp.setMargins(0, 20, 0, 0);
  }
  else {
    lp.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    lp.setMargins(0, 0, 0, 60);
  }

  hide();

  ((ViewGroup)map.getParent()).addView(popup, lp);
  isVisible=true;
}

void hide() {
  if (isVisible) {
    isVisible=false;
    ((ViewGroup)popup.getParent()).removeView(popup);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:02:40.660

尝试在您的位置上添加一个 OnTouchListener 并使用 Layout Inflator 显示带有您想要显示的信息的自定义布局。

# javascript - 具有特定值的正则表达式的长度

> ID：14484974
> 
> 赞同：1
> 
> 时间：2013-01-23T16:49:27.170
> 
> 标签：javascript, regex

我有一个针对 html 表单中的文本区域的 javascript 正则表达式。这是正则表达式：

```
 regex = /[EePp]+/ 
```

我还想使用正则表达式来检查文本区域中字符串的长度，并将其限制为单个字符。

我试过了

```
 regex = /[EePp]{1}/ 
```

它只验证那些字符的正则表达式，但仍然允许文本区域中包含多个字符的字符串：

```
 <input type='text' onkeypress='validate(event)'> 
```

是否可以通过正则表达式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:50:34.453

如果您在正则表达式的开头和结尾添加锚点，`^`这`$`将限制它仅匹配模式，而不匹配正在搜索的全部范围。

所以，`/^[EePp]{1}$/` - 这表示 [EePP] 在正在搜索的内容的开头，`^`，在它和结尾之间没有任何东西，`$`，正在搜索的内容。

事实证明，在这种情况下，您不需要`{1}`，因为锚准确地告诉它匹配延伸多远。所以：

`/^[EePp]$/`

应该这样做。

# ios - 内存泄漏 iOS (UIImageView,UIImage,CGImage) 未在 ARC 上释放

> ID：14484978
> 
> 赞同：4
> 
> 时间：2013-01-23T16:49:34.440
> 
> 标签：ios, memory-leaks, uiimageview, uiimage, automatic-ref-counting

我试图实现一个简单的视频流，但由于某种原因我的内存不会被释放：

```
(void)updateImage:(UIImage *)image{
  self.indicator.hidden = TRUE;
  //CGImageRelease([self.imageView.image CGImage]);
  self.imageView.image = nil;
  self.imageView.image = image;
  [self.imageView setNeedsDisplay];
} 
```

如果我使用

```
CGImageRelease([self.imageView.image CGImage]); 
```

内存将被释放。但是当我返回到以前的视图控制器时，应用程序会崩溃，因为它试图释放为该图像分配的内存，我已经释放了。此方法是从异步任务中调用的，该任务使用以下方法创建图像：

```
UIImage *image = [UIImage imageWithCGImage:cgImage];
CGImageRelease(cgImage);
CGDataProviderRelease(provider);
CFRelease(data); 
```

据我了解，UIImage 现在拥有 CGImage，我不应该释放它。那么，当我用新图像更新 UIImageView 时，是否有确保 UIImage 被释放？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T08:26:21.990

好的，所以我终于找到了问题所在。

正如我所说，我正在使用一些后台线程来执行图像更新，解决方案是将其添加为自动释放池，如下所示：

```
 @autoreleasepool {
        [self.delegate performSelectorOnMainThread:@selector(updateImage:) withObject:[self fetchImage] waitUntilDone:NO];
    } 
```

# iphone - 推送通知对象

> ID：14484980
> 
> 赞同：0
> 
> 时间：2013-01-23T16:49:40.617
> 
> 标签：iphone, ios, ipad, push-notification, apple-push-notifications

我的应用程序接收推送通知，有时这些通知附带一个必须存储在核心数据上的对象。

如果这些带有对象的通知之一在应用程序未运行时到达应用程序，会发生什么情况？

我该如何处理？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:56:16.300

如果你已经实现了方法

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo{} 
```

当应用程序处于活动状态时，它将在睡眠期间的每个通知中触发。

# css - 从子文件夹中获取 .css 文件

> ID：14484985
> 
> 赞同：1
> 
> 时间：2013-01-23T16:50:19.680
> 
> 标签：css, jsf, facelets

在 Netbeans 中，我有一个名为的子文件夹`css`和一个名为`testcss.css`.

如何从 root 获取 Facelets 文件以访问该`testcss.css`文件？

```
<meta http-equiv="content-type" content="text/html; charset=windows-1252" />
<link rel="stylesheet" type="text/css" href="/testcss.css" title="style" /> 
```

我的目录结构是：

```
Root (not a folder)
    css (folder)
      testcss.css 
```

该结构的屏幕截图可[在此处](http://i1081.photobucket.com/albums/j348/west-wot/Directory_zps2ce00b84.png)获得。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T18:29:23.500

您应该将 CSS（以及 JS 和图像）资源放在`/resources`文件夹中（如果不存在，则创建一个）。

```
Web Pages
 |-- META-INF
 |-- WEB-INF
 |-- resources
 |    |-- css
 |    |    `-- style.css
 |    |-- js
 |    |    `-- script.js
 |    `-- img
 |         `-- logo.png
 |-- index.xhtml
 : 
```

完成此操作后，您应该能够使用适当的 JSF 组件[`<h:outputStylesheet>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/outputStylesheet.html)（和[`<h:outputScript>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/outputScript.html)和[`<h:graphicImage>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/graphicImage.html)）引用 CSS（以及 JS 和图像）资源，如下所示：

```
<h:outputStylesheet name="css/style.css" />
<h:outputScript name="js/script.js" />
<h:graphicImage name="img/logo.png" /> 
```

无需摆弄相对路径。JSF 将自动生成正确的 URL。

### 也可以看看：

*   [如何在 Facelets 模板中引用 CSS / JS / 图片资源？](https://stackoverflow.com/questions/8367421/how-to-reference-resource-in-facelets-template/)
*   [JSF 资源库有什么用途，应该如何使用？](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)
*   [具有共享代码的多个 JSF 项目的结构](https://stackoverflow.com/questions/8320486/structure-for-multiple-jsf-projects-with-shared-code/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:52:11.007

您需要调用正确的路径。

例如，如果您的文件是有组织的：

```
ROOT
   CSS(FOLDER)
      styles.css 
   UPLOADED(FOLDER)
      index.html 
```

如果您尝试从 index.html 访问样式文件，您需要：

```
href="../css/styles.css" 
```

# css - 在 css 中创建笔高亮效果的更清洁方法？

> ID：14484986
> 
> 赞同：0
> 
> 时间：2013-01-23T16:50:22.907
> 
> 标签：css

这是一个显示我希望创建的效果[的小提琴](http://jsfiddle.net/JurKS/)

2个强制性要求：

1.  我需要每个突出显示的行之间的小间距（填充/边距）
2.  绿色突出显示应仅覆盖每行文本的长度

我尝试了`<div><span>text</span></div>`组合的混合，只能达到 1\. 或 2\. 但从来没有两者兼而有之，除非有一张桌子。

虽然我很高兴这个内容在表格中，因为它是表格的，但我对最终结果不满意，因为我在表格行中拆分了一个段落，而不是板球。

如何仅使用 div 和 spans 来获得效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:17:10.480

试试这个...

```
display: block;
float: left;
clear: both; 
```

这是我做的一个例子：http: [//jsfiddle.net/Gxhsq/](http://jsfiddle.net/Gxhsq/)

# iphone - 强制移动 Safari 表单助手仅循环浏览一个表单

> ID：14484988
> 
> 赞同：4
> 
> 时间：2013-01-23T16:50:27.227
> 
> 标签：iphone, ios, mobile-safari

在移动 Safari 中，当使用 html 表单时，会出现“表单助手”，允许用户使用“下一个”和“上一个”按钮循环浏览表单元素。

这给我们带来了一个问题，页面上有两个表单：

一旦用户到达第一个表单的最后一个文本字段，如果他们按“下一步”，它就会跳转到第二个表单。

有没有办法让表单助手只在单个表单中的元素之间循环？

# javascript - mongo native 不创建数据

> ID：14484995
> 
> 赞同：0
> 
> 时间：2013-01-23T16:50:50.427
> 
> 标签：javascript, node.js, mongodb, express, node-mongodb-native

如果数据库中存在 facebook id，我尝试创建数据，否则创建新数据，但是第一个条件工作正常，但是当它创建数据时没有任何反应，`connot read property 'provider' of null`即使我硬编码提供程序值也只能得到。

```
db.collection('accounts', function(err, collection){
    collection.findOne({'email': fbEmail}, function(err, item){
        var providerId = item.provider.facebook.id;
        console.log("facebook id should be: "+providerId);
        if(providerId == ""){
            collection.update({email:fbEmail, 'provider.facebook.id':""}, {$set: {"provider.facebook.id": fbId}}, {safe:true}, function(err){
                if(err){
                    console.log(err);
                }else{
                    console.log("id updated!");
                };
            });
        }else{ //creates a new user
            console.log("creating a new account...");
            collection.update({'email': fbEmail}, {
                'email': fbEmail,
                'provider':
                    {
                        'facebook': {'id': fbId},                            
                        'twitter': {'id': ""}                                
                    }                    
            }, {upsert:true}, function(err, doc){
                if(err){
                    console.log("Error finding email "+err);
                }                
            });             
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:55:21.943

一个（第一个）`accounts`集合文件有`provider=null`. `findOne`您可以通过以下方式修改条件以避免它：

```
collection.findOne({'email': fbEmail, 'provider': {$exists: true}}, ... 
```

请注意，此修改将跳过所有未`provider`设置字段（或设置为`null`）的帐户。