# StackOverflow 问答 15061000-15061999

# node.js - “#!/bin/env”是什么意思（在 node.js 脚本的顶部）？

> ID：15061001
> 
> 赞同：54
> 
> 时间：2013-02-25T06:01:35.907
> 
> 标签：node.js, openshift, declare

我发现薮 node.js 项目在他们的顶部有这个`app.js`（如在这个[openshift 程序](https://github.com/openshift/openshift-mongo-node-express-example/blob/master/server.js)中）：

```
#!/bin/env node 
```

这是什么意思？这是如何运作的？它在哪里有用？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-25T06:11:02.240

您的示例的完整行是：

```
#!/bin/env node 
```

这仅仅意味着脚本应该使用在当前 PATH 中找到的第一个名为“node”的可执行文件执行。

开头的 shebang (#!) 表示执行以下脚本。/bin/env 是一个标准的 unix 程序，它查看您当前的环境。任何不是“名称=值”格式的参数都是要执行的命令。有关更多详细信息，请参见您的 env 手册页。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T06:06:50.240

`env`是用于指定解释器的 shell 命令。

# selenium - 如何从在新窗口中打开的 WebDriver 实例中获取页面的 URL

> ID：15061002
> 
> 赞同：2
> 
> 时间：2013-02-25T06:01:42.350
> 
> 标签：selenium, webdriver, ubuntu-12.04

我正在使用硒进行自动化。在一个场景中，当我单击 Page ABC 中的链接时，它会在新窗口中打开页面 DEF。现在，当我使用该方法时`driver.getCurrentUrl()`，它会为我提供 ABC 页面的 URL。

但我需要检查页面 DEF 的 URL。请帮助我该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:05:38.067

首先将控件切换到新打开的窗口，然后使用`driver.getCurrentUrl()`. 它会给你新打开的窗口的 URL

第一次使用这个开关控制

```
driver.switchTO().window("windowName/id"); 
```

然后执行此操作以获取 URL

```
driver.getCurrentUrl(); 
```

**开关控制弹出的逻辑**

```
Set<String> beforePopup = driver.getWindowHandles(); 
//click which causes to open new window
driver.fineElement(<By>).click();
// get all the window handles after the popup window appears 
Set<String> afterPopup = driver.getWindowHandles(); 
// remove all the handles from before the popup window appears afterPopup.removeAll(beforePopup); 
// there should be only one window handle left 
if(afterPopup.size() == 1) 
{ 
        driver.switchTo().window((String)afterPopup.toArray()[0]); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T06:10:01.360

尝试使用切换到新窗口 DEF

```
 driver.switchto().window(DEF) 
```

然后使用

```
 driver.getCurrentUrl(). 
```

# android - 如何旋转相机预览以在纵向模式下拍摄风景照片？

> ID：15061003
> 
> 赞同：4
> 
> 时间：2013-02-25T06:01:42.630
> 
> 标签：android, camera

我从想要拍摄肖像照片的人那里看到很多建议，告诉他们将相机旋转 90 度。但是，无论我尝试什么，唯一真正“旋转”的是相机拍摄的图像，但是它保留了它的宽度和高度比例，所以发生的情况是，如果 SurfaceView 很窄，图片不会失真并且高。

我想要实现的是拍摄一张在 3x4 布局中不变形的 4x3 照片。我知道它会相当窄，但目标是将预览视图旋转 -90 度，同时保持相机的正常纵横比。就目前而言，如果我想在我的肖像布局中定位照片，我所做的一切都会导致图像被挤压。

我开始怀疑我需要将一个矩阵应用于将其旋转-90 度的预览，但我不确定如何去做，或者这是否真的是正确的方法。会喜欢一些建议。

编辑：为了清楚起见，这里是 javadocs 的相关摘录： setPreviewSize() “如果显示方向设置为 0 或 180，则预览尺寸应设置为 480x320。如果显示方向设置为 90 或 270，则预览尺寸应设置为 320x480。”

这完全无法解决您希望将设备保持在纵向模式但让相机预览出现在一个小的横向窗口中的情况（这是我想要实现的）。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:12:27.140

如果您使用 SurfaceView 显示相机预览输出，并且您想确保预览不失真，无论是在预览中还是在横向中，您必须确保 SurfaceView 的纵横比与相机的纵横比相匹配预览大小。SurfaceView 将简单地缩放预览以适应其自身，因此如果预览大小为 640x480 时它是 500x500，则预览看起来会垂直拉伸。

[概念上最简单的方法是简单地手动设置 SurfaceView 的宽度和高度，通过使用LayoutParams](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#ViewGroup.LayoutParams%28int,%20int%29)和[setLayoutParams](http://developer.android.com/reference/android/view/View.html#setLayoutParams%28android.view.ViewGroup.LayoutParams%29)将 SurfaceView 的布局更新为固定大小的布局。这种方法的问题在于它可能会因不同的屏幕尺寸而变得脆弱，因为您需要弄清楚您真正想要的像素尺寸是多少，并且对于 Android 上的直接跨设备布局，您真的想在 dp 中思考而不是像素。但是对于测试，您可以强制 SurfaceView 具有测试设备屏幕的宽度和设置的高度

```
surface height = preview height / preview width * surface width 
```

更好的方法是创建一个继承自 SurfaceView 的新类，该类在 View 的[onMeasure](http://developer.android.com/reference/android/view/View.html#onMeasure%28int,%20int%29)方法中进行必要的纵横比调整。详细解释这一点很长，但请查看Android 开发者网站上的[自定义组件文档以了解详细信息。](http://developer.android.com/guide/topics/ui/custom-components.html)但粗略地说，您需要设置的宽度/高度值始终与您配置的相机预览大小具有相同的纵横比。

一旦你有了合适大小的surfaceView，你通常还需要使用[setDisplayOrientation](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29)旋转相机预览输出；计算方向数学可能会令人困惑，因此请使用上面文档链接中提供的代码示例来计算它。

基本上，世界有一个坐标系，相机传感器有另一个（固定在设备上），而 UI 系统有第三个（固定在您当前的方向上），并且所有这三个都可能相对于彼此发生变化。虽然正确的预览方向不取决于设备相对于世界的位置，但相机拍摄的图片的方向却取决于（由[setRotation](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setRotation%28int%29)设置）。

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2013-02-25T06:09:04.240

我的建议是，

不要在 Android 中尝试更多的 Layout，这非常困难而且如果你想实现，你必须阅读 Android 的开源代码并且应该改变它本身。

所以，我建议你使用 Canvas(Import Graphics package) 并利用这些类。

# jsf-2 - Primefaces动态高度条形图

> ID：15061008
> 
> 赞同：1
> 
> 时间：2013-02-25T06:02:26.847
> 
> 标签：jsf-2, primefaces

我有一个 primefaces p:barChart 组件，我想根据图表中的数据量动态设置 style="height: #{backingBean.chartHeight}" 。此处的示例不起作用，那么还有其他方法可以动态设置图表高度吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-02T09:46:29.017

另一个解决方案对我有用：您可以将所有样式选项作为字符串注入，而不是在样式中注入高度。您的代码将如下所示：

```
<p:barChart id="basic" value="#{backingBean.categoryModel}"
                    legendPosition="ne" title="Comparaison"
                    min="0" max="200"
                    style= "#{backingBean.chartStyle}" orientation="horizontal" /> 
```

以及支持 bean 中的高度字符串：

```
private String chartStyle ="height:500px"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:16:37.457

我想你可以做这样的事情

```
 <h:inputHidden value="#{backingBean.chartHeight}" id="chartheight"> // will be set if you set in the construtor.
  <p:barChart id="basicchart"  legendPosition="ne" /> 
```

并在页面加载时使用 JavaScript 或 Jquery

```
 $(document).ready(function(){
      var val=$('#formId\\:chartheight').val();
      $('#formId\\:basicchart').css('height',val);
}); 
```

# javascript - 如何在文本框上显示日历单击html

> ID：15061011
> 
> 赞同：14
> 
> 时间：2013-02-25T06:02:32.320
> 
> 标签：javascript, jquery, html

在 html 中，我想在**单击文本框时显示****日历**以选择日期。 然后我们从该日历中选择一个日期，然后**所选**日期将显示在**该**文本框中。

 ******* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-05-08T11:35:20.213

从 HTML5 开始，`<input type="date" />`就可以了。

演示：http: [//jsfiddle.net/8N6KH/](http://jsfiddle.net/8N6KH/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T06:06:33.440

您应该阅读[jQueryUI Datepicker](http://jqueryui.com/datepicker/)

一旦你包含了相关的 jQuery UI 库，它就很简单，

**脚本：**

```
$(function() {
    $( "#datepicker" ).datepicker();
}); 
```

**HTML：**

```
<input type="text" id="datepicker" /> 
```

优点：

*   它已针对 x 浏览器的兼容性进行了彻底测试，因此您不会有任何问题。
*   单独的 css 文件，因此您可以根据自己的喜好对其进行自定义

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T06:07:15.747

尝试使用 jquery-ui

```
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

<script>   
    $(function() {
         $( "#calendar" ).datepicker();   
    }); 
</script>

<p>Calendar: <input type="text" id="calendar" /></p> 
```

[更多的](http://jqueryui.com/datepicker/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-09T03:56:07.673

是的，你会在使用 HTML5 日期选择器时遇到各种问题，它可能适用于某些问题，也可能不适用。我遇到了同样的问题。请检查这个[DatePicker Demo](http://dev.jtsage.com/jQM-DateBox/)，我用这个插件解决了我的问题。它非常优秀且灵活的日期选择器插件，带有完整的演示。它也完全兼容移动浏览器，也可以与 jquery mobile 集成。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T06:04:42.897

你需要的是一个[jQuery UI Datepicker](http://jqueryui.com/datepicker/)

查看[演示](http://jqueryui.com/datepicker/)和源代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-25T06:05:24.047

您将需要使用任何 javascript html 日历小部件。

试试这个[日历视图小部件](http://calendarview.org/)，只需复制粘贴示例中显示的一些代码，这就是你想要的。

这是 Jquery Mobile 日期框的链接 - [JQM datebox](http://dev.jtsage.com/jQM-DateBox/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-25T06:10:18.927

HTML 日期选择器你可以参考[这个](http://www.java2s.com/Code/JavaScript/GUI-Components/HTMLDatePicker.htm)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-25T06:13:54.467

jQuery Mobile 也有一个日期选择器。[资源](http://jquerymobile.com/demos/1.0a4.1/experiments/ui-datepicker/)

只需包含以下文件，

```
 <script src="jQuery.ui.datepicker.js"></script>
  <script src="jquery.ui.datepicker.mobile.js"></script> 
```******

# linux - shell脚本没有在其中运行其他脚本

> ID：15061012
> 
> 赞同：0
> 
> 时间：2013-02-25T06:02:37.050
> 
> 标签：linux, shell, ubuntu, crontab

```
#!/bin/bash
value=$(</var/www/sym_monitor/man.txt)

if [ "$value" == "true" ]; then

     ps -ef|grep sym |grep -v grep |awk '{ print $2 }'|sudo  xargs kill -9;
cd /var/www/symmetric-ds-3.1.6/bin;
sleep 30;

(sudo ./sym --port 8082 --server);

fi 
```

我正在尝试使用 cron 每 10 分钟运行一次上述脚本。在 root 下手动运行脚本时，脚本运行良好，但是当我尝试在 cron 中运行脚本时，它正在执行 (ps -ef|grep sym |grep -v grep |awk '{ print $2 }'|sudo xargs kill - 9;）并且它没有执行脚本（sudo ./sym --port 8082 --server）并且它没有给出任何错误。任何人都可以建议我任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:22:34.957

请检查 crontab 是否也在 Bash 中运行。如果没有，那么您可能必须更改您的外壳。

此外，当您手动运行脚本时， ./sym 是与您的 shell 相关的位置。它可能与 cron 不同。请使用完整路径执行./sym。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:11:29.393

sudo 可能需要密码，从而阻止此命令。

我想删除 sudo 可以解决问题。

# wpf - 如何在 WPF Datagrid 的第一列中显示行号

> ID：15061013
> 
> 赞同：10
> 
> 时间：2013-02-25T06:02:44.887
> 
> 标签：wpf, wpf-controls, wpfdatagrid

在搜索时我发现，行号可以很容易地设置为 RowHeader：

```
void datagrid_LoadingRow(object sender, DataGridRowEventArgs e) 
{ 
     e.Row.Header = e.Row.GetIndex(); 
} 
```

它在 RowHeader 中设置行号。但我想在第一列显示行号

任何人都可以帮助我如何实现这一目标？谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-25T07:01:20.783

可能有更简单的方法可以做到这一点，但我通过使用 DataGridRow 类上的 GetIndex() 方法让它工作。这会将索引返回到数据源，因此可能不完全是您所追求的。

![在此处输入图像描述](../Images/037d2573f00f7ba9c9b931791ec08deb.png)

xml

```
 <Window x:Class="WpfApplication1.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:sys="clr-namespace:System;assembly=mscorlib"
            xmlns:local="clr-namespace:WpfApplication1"
            Title="MainWindow" Height="350" Width="525">
        <DataGrid>
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Converter={local:RowToIndexConverter}}" />
            </DataGrid.Columns>
            <DataGrid.Items>
                <sys:String>a</sys:String>
                <sys:String>b</sys:String>
                <sys:String>c</sys:String>
                <sys:String>d</sys:String>
                <sys:String>e</sys:String>
            </DataGrid.Items>
        </DataGrid>
    </Window> 
```

和转换器。

```
public class RowToIndexConverter : MarkupExtension, IValueConverter
{
    static RowToIndexConverter converter;

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        DataGridRow row = value as DataGridRow;
        if (row != null)
            return row.GetIndex();
        else
            return -1;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        if (converter == null) converter = new RowToIndexConverter();
        return converter;
    }

    public RowToIndexConverter()
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-18T10:05:23.680

我使用了 Andys 的例子，但我需要从后面的代码中使用它，所以他是我的代码，以防万一有人想做同样的事情，因为谷歌搜索有点贫瘠。

C#

```
 DataGrid dataGrid = new DataGrid();

    DataGridTextColumn column0 = new DataGridTextColumn();
    column0.Header = "#";

    Binding bindingColumn0 = new Binding();
    bindingColumn0.RelativeSource = new RelativeSource(RelativeSourceMode.FindAncestor, typeof(DataGridRow), 1);
    bindingColumn0.Converter = new RowToIndexConvertor();

    column0.Binding = bindingColumn0;

    dataGrid.Columns.Add(column0); 
```

Andy 的转换器，刚刚添加`return row.GetIndex() - 1;`以从 1 开始计数，而不是 0。

```
public class RowToIndexConvertor : MarkupExtension, IValueConverter
{
    static RowToIndexConvertor convertor;

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        DataGridRow row = value as DataGridRow;

        if (row != null)
        {
            return row.GetIndex() + 1;
        }
        else
        {
            return -1;
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        if (convertor == null)
        {
            convertor = new RowToIndexConvertor();
        }

        return convertor;
    }

    public RowToIndexConvertor()
    {

    }
} 
```

也不要忘记使用的

```
using System;
using System.Windows.Data;
using System.Windows.Controls;
using System.Windows.Markup; 
```

# python - 代码不显示任何内容

> ID：15061017
> 
> 赞同：1
> 
> 时间：2013-02-25T06:03:05.610
> 
> 标签：python, automation, paramiko

有人可以帮忙找出这段代码有什么问题吗？它不显示任何东西

```
import paramiko

ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(
paramiko.AutoAddPolicy())

ssh.connect('135.279.151.56', username='raft',  password='raft01')
stdin, stdout, stderr = ssh.exec_command('top')

print stdout.readlines()

ssh.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:48:54.263

试试 'top -b -n1' 它应该适合你。

-b 用于在批处理模式下工作。不接受任何输入，并且在 -n 次迭代（此处为 1）后退出顶部

# primefaces - primefaces 消息未显示

> ID：15061019
> 
> 赞同：3
> 
> 时间：2013-02-25T06:03:12.453
> 
> 标签：primefaces, messages

我得到了一个带有 single_selection 数据表和一个命令按钮的页面。命令按钮调用一个 bean 方法来验证是否做出了选择。如果不是，它应该显示一条消息警告用户。如果进行了选择，它将导航到另一个页面。

问题是没有选择时不会显示任何消息。如果进行了选择，则可以正常工作。

这是页面的代码：

```
<h:body>
<h:form id="form">
<p:dataTable id="TablaSociedades" var="soc" value="#{Sesion.tablaSociedades}" emptyMessage="No hay Registros que Mostrar" selection="#{Sesion.sociedadUsuario}">  
  <f:facet name="header">Sociedades asociadas al Usuario</f:facet> 
     <p:column selectionMode="single" style="width:18px" />  
     <p:column>
        <f:facet name="header">
           <h:outputText value="Sociedad" />
        </f:facet>
           <h:outputText value="#{soc.nombreSociedad}" />
     </p:column>
  <f:facet name="footer">  
     <p:commandButton action="#{Sesion.mostrarMenu()}" value="Continuar" process=":form" />  
   </f:facet> 
</p:dataTable>
<br/>
<div>
  <p:messages id="messages2" showDetail="true" autoUpdate="false" closable="true" /> 
</div>
</h:form>
</h:body> 
```

以及 bean 方法的代码：

```
 public boolean mostrarMenu()
{
    boolean resp = true;

    if (sociedadUsuario.getNombreSociedad().equals("")) //no selection
    {
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage  (FacesMessage.SEVERITY_WARN,"Seleccione una Sociedad", "No puede Continuar"));  
        resp = false;
    }

    return resp;
} 
```

我必须提到命令按钮必须单击两次，但我会针对该问题发布另一个问题。

我做了另一个带有 bean 验证的页面，其中消息正确显示，与此页面的唯一区别是另一个页面仅包含 inputText、commandbutton 和消息。

谢谢你的时间

2013 年 2 月 25 日 faces-config.xml 文件的代码。

```
<navigation-rule>
   <from-view-id>/elegirSociedad.xhtml</from-view-id>
   <navigation-case>
    <from-action>#{Sesion.mostrarMenu()}</from-action>
    <from-outcome>true</from-outcome>
    <to-view-id>/principal.xhtml</to-view-id>
    <redirect />
   </navigation-case> 
</navigation-rule> 
```

我使用重定向来避免我之前评论但无济于事的“点击两次”问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T04:35:45.517

底线是，如果您对两个或更多页面使用相同的托管 bean，请使用`for`属性标识您的消息，并在 bean 方法中创建消息时使用相同的 id。例如：

```
<p:messages for="MessageId" showDetail="true" autoUpdate="true" closable="true"> 
```

当您在托管 bean 中创建消息时：

```
FacesContext.getCurrentInstance().addMessage("MessageId", new FacesMessage  (FacesMessage.SEVERITY_WARN,"Be Warned!", "You did something wrong!")); 
```

因此，Managed Bean 中的每条消息在页面中都有其对应的组件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T07:55:43.457

消息未显示，因为您没有更新它。将`update`属性添加到您的`p:commandButton`：

```
<p:commandButton action="#{Sesion.mostrarMenu()}" value="Continuar" process=":form" update=":form:messages2"/> 
```

此外，我看不到您如何在此处导航？

# c++ - C++ 中的 Realloc 等价物

> ID：15061021
> 
> 赞同：6
> 
> 时间：2013-02-25T06:03:15.843
> 
> 标签：c++, dynamic-memory-allocation

是的，另一个`realloc`与`std::vector`问题。我知道你要说什么，我同意，忘记手动内存分配，只需使用`std::vector`. 不幸的是，我的教授禁止我使用 STL 中的任何东西来完成这项任务。

所以是的，我有一个动态数组，`T`我需要它可以调整大小，但我不能使用`std::vector`. 我可以回到黑暗时代，`malloc`和家人一起做所有的事情，但如果我能用`new`那将是非常棒的。

我读过很多帖子，每个人都说“不，你不能这样做，使用`std::vector`”，但它们都是在 2011 年 8 月之前发布的，我希望自 C+ 出现以来可能会发生一些变化+11。所以告诉我，我是幸运的，还是我必须恢复到 C 风格的内存分配？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T06:29:07.383

无论如何，你应该完全避免`realloc`，因为你不能像那样移动 C++ 对象。

*   用于`buf = new unsigned char[sizeof(T) * capacity]`创建新缓冲区
*   从现在开始将分配的指针转换`unsigned char *`为`T *`并使用这些指针`T`
*   通过“放置”构造新元素`new`，如`new (&buf[i]) T(original_copy)`
*   要将缓冲区复制到更大的缓冲区，请先分配新缓冲区，使用`std::uninitialized_copy`( *not* `std::copy` )，然后使用销毁旧缓冲区中的元素并使用`buf[i].~T()`释放旧缓冲区`delete [] buf`。

所有这一切都假设您不必担心异常安全，这对于分配来说可能是可以的。
请注意，在现实世界的代码中，您必须保证异常安全，这*比*这要乏味得多。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T06:26:18.060

问题`realloc`在于可能会将现有数据移动到不同范围的连续地址。如果它需要这样做，鉴于它是一个 C 函数，数据被复制而没有任何对 C++ 对象生命周期的点头：

*   不使用复制/移动构造函数
*   之后不会为源对象调用析构函数

这可能会导致致命的后果 - 例如，当被移动的对象包含仍然指向正在腾出的内存区域中的地址的指针/引用时。

遗憾的是，正常`malloc`的实现不允许回调钩子允许您用自己的 C++ 安全实现替换内存内容复制代码。如果你确定你可以尝试找到一个更灵活的“malloc”库，但这不太可能值得麻烦和冒险。

因此，在一般情况下，您应该使用`new`更改容量、复制/移动每个对象以及`delete`之后的原件。

如果您确定您的数据足够简单，以至于`memcpy`-style 重定位不会造成不良后果，那么您可以使用`realloc`（风险自负）。

# php - PHP 在 html 中获取 html

> ID：15061028
> 
> 赞同：0
> 
> 时间：2013-02-25T06:04:09.573
> 
> 标签：php, regex

我正在尝试获取 html 文本的一部分。我试图让每个单独的列表包含在 h3 标签和底部的图像下。这是示例文本：

任何帮助都会很棒。

谢谢

```
<h3>Item Summary</h3>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam dictum adipiscing nulla. Aenean id leo non urna sollicitudin lobortis. Sed malesuada diam ut elit accumsan auctor. Proin nisl orci, tempor sed pulvinar ut, semper id nisl. Quisque pellentesque porta facilisis. Duis vestibulum pellentesque commodo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nulla facilisi. Etiam eget lacus mauris, non accumsan erat. Etiam gravida posuere sollicitudin. Cras id sodales diam. </p>
<h3>Item Features</h3>
<ul>
<li>Feature 1.</li>
<li>Feature 2.</li>
<li>Feature 3.</li>
<li>Feature 4\.  </li>
<li>Feature 5.</li>
</ul>
<h3>Item Details</h3>
<ul>
<li>Detail 1</li>
<li>Detail 2</li>
<li>Detail 3</li>
<li>Detail 4</li>
<li>Detail 5</li>
</ul>
<h3>Contact Information</h3>
<ul>
<li>Contact 1</li>
<li>Contact 2</li>
<li>Contact 3</li>
<li>Contact 4</li>

</ul>
<p >
   <img height="100px" src="http://www.mydomain.com/Images/123456.jpg" width="200px"/>
</p>
<p >
   <img height="100px" src="http://www.mydomain.com/Images/123456.jpg" width="200px"/>
</p>
<p >
   <img height="100px" src="http://www.mydomain.com/Images/123456.jpg" width="200px"/>
</p>
<p >
   <img height="100px" src="http://www.mydomain.com/Images/123456.jpg" width="200px"/>
</p>
<p >
   <img height="100px" src="http://www.mydomain.com/Images/123456.jpg" width="200px"/>
</p>

      <img alt="img1" src="000.jpg"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T06:07:39.157

不要使用正则表达式，使用 DOM 解析器，如 DOMDocument 或 SimpleXMLElement。

```
$dom = new DOMDocument();
$dom->loadHTML($yourHTML);

$finder = new DOMXPath($dom);

//Get all lists:
$lists = $finder->query('//ul');

// get all lists immediately AFTER h3's
$listsAfterHeader = $finder->query('//h3/following-sibling::ul[position()=1]'); 
```

# blackberry - 在黑莓中无需任何数据计划即可获取 wifi 位置

> ID：15061030
> 
> 赞同：0
> 
> 时间：2013-02-25T06:04:27.467
> 
> 标签：blackberry, geolocation

当我连接到蜂窝站点时，我的应用程序能够获取当前位置，如果我的蜂窝站点关闭，则无法通过 wifi 获取当前位置。但是根据位置文档，我们也可以通过 wifi 找到当前位置。所以我无法理解为什么我无法通过 wifi 获取当前位置（手机站点关闭）。

这是否可以在手机站点关闭的情况下获取当前位置？

```
try { 
    BlackBerryLocationProvider provider = 
        (BlackBerryLocationProvider)LocationProvider.getInstance(new 
             BlackBerryCriteria(LocationInfo.GEOLOCATION_MODE_CELL));
} catch (LocationException) { } 
```

是的，我正在使用上面的代码进行定位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:24:42.427

如果你想使用基于 WLAN 的地理位置，你可以使用这个标准，前提是你的操作系统 >= 6.0：

```
 new BlackBerryCriteria(LocationInfo.GEOLOCATION_MODE_WLAN); 
```

有用的链接：
[Location APIs – 从头到尾](http://supportforums.blackberry.com/t5/Java-Development/Location-APIs-Start-to-finish/ta-p/571949)
[Simple Location API](http://supportforums.blackberry.com/t5/Java-Development/Simple-Location-API/ta-p/1145951)

# c# - Autopostback 第一次在 ASP.NET 中不起作用？

> ID：15061040
> 
> 赞同：0
> 
> 时间：2013-02-25T06:05:05.833
> 
> 标签：c#, asp.net, asp.net-ajax

我在更新面板中使用了 5 个单选按钮，但是当我第一次检查单选按钮时，它不会被选中更改。之后意味着第二次检查它的工作正常，所以请告诉应该是什么问题。这是我的代码

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
   <ContentTemplate>
       <asp:RadioButton ID="rbtn_A" runat="server" GroupName="rbt" 
            AutoPostBack="true" OnCheckedChanged="rbtn_A_CheckedChanged" />
       <asp:RadioButton ID="rbtn_B" runat="server" GroupName="rbt" AutoPostBack="true"
            OnCheckedChanged="rbtn_B_CheckedChanged" />
       <asp:RadioButton ID="rbtn_C" runat="server" GroupName="rbt" AutoPostBack="true" 
            OnCheckedChanged="rbtn_C_CheckedChanged" />
       <asp:RadioButton ID="rbtn_D" runat="server" GroupName="rbt" AutoPostBack="true" 
            OnCheckedChanged="rbtn_D_CheckedChanged" />
   </ContentTemplate> 
```

这是我的第一个单选按钮 c# 函数：protected void rbtn_A_CheckedChanged(object sender, EventArgs e) {

```
 foreach (GridViewRow gv in dl_ques.Rows)
        {
            Label lblTest = (Label)gv.FindControl("lbltest");
            Label lbl = (Label)gv.FindControl("lbl_qno");
            RadioButton rbtn_A = (RadioButton)gv.FindControl("rbtn_A");
            DataSet ds = new DataSet();
            ds = getAnswer();
            SqlCommand cmd1 = DataManager.getCommandSp("spGetIBPSTestQues");
            cmd1.Parameters.AddWithValue("@Test_id", Convert.ToInt32(lblTest.Text));
            DataSet dsorg = DataManager.getDataSet(cmd1);
            if (ds.Tables[0].Rows.Count > 0)
            {
                SqlCommand cmd = new SqlCommand();
                cmd = DataManager.getCommandSp("SpUpdateIBPSTestSolved");
                cmd.Parameters.AddWithValue("@user_id", Convert.ToInt32(ht["UId"]));

                cmd.Parameters.AddWithValue("@Ans", "A");
                foreach (DataRow dr in dsorg.Tables[0].Rows)
                {
                    if (Convert.ToInt32(lbl.Text) == Convert.ToInt32(dr["actual_que"]))
                    {
                        if (dr["actual_ans"].ToString() == "A")
                        {
                            cmd.Parameters.AddWithValue("@Ans_correct", "Yes");
                        }
                        else
                        {
                            cmd.Parameters.AddWithValue("@Ans_correct", "No");
                        }
                    }
                }
                cmd.Parameters.AddWithValue("@test_id", Convert.ToInt32(lblTest.Text));
                cmd.Parameters.AddWithValue("@Test_dt", DateTime.Now);
                cmd.Parameters.AddWithValue("@Ques_id", lbl.Text);
                cmd.Parameters.AddWithValue("@LastTimeMin", timehdnmin.Value);
                cmd.Parameters.AddWithValue("@LastTimeSec", timehdnsec.Value);

                DataManager.WriteToDb(cmd);

            }
            else
            {
                SqlCommand cmd = new SqlCommand();
                cmd = DataManager.getCommandSp("SpInsertIBPSTestSolved");
                cmd.Parameters.AddWithValue("@user_id", Convert.ToInt32(ht["UId"]));

                cmd.Parameters.AddWithValue("@Ans", "A");
                foreach (DataRow dr in dsorg.Tables[0].Rows)
                {
                    if (Convert.ToInt32(lbl.Text) == Convert.ToInt32(dr["actual_que"]))
                    {
                        if (dr["actual_ans"].ToString() == "A")
                        {
                            cmd.Parameters.AddWithValue("@Ans_correct", "Yes");
                        }
                        else
                        {
                            cmd.Parameters.AddWithValue("@Ans_correct", "No");
                        }
                    }
                }

                cmd.Parameters.AddWithValue("@test_id", Convert.ToInt32(lblTest.Text));
                cmd.Parameters.AddWithValue("@Test_dt", DateTime.Now);
                cmd.Parameters.AddWithValue("@Ques_id", lbl.Text);
                cmd.Parameters.AddWithValue("@LastTimeMin", timehdnmin.Value);
                cmd.Parameters.AddWithValue("@LastTimeSec", timehdnsec.Value);

                DataManager.WriteToDb(cmd);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:20:51.320

默认情况下，您需要`checked`在页面加载时将单选按钮之一设为 true

```
<asp:RadioButton ID="rbtn_A" runat="server" AutoPostBack="True" GroupName="rbt"
OnCheckedChanged="rbtn_A_CheckedChanged" Checked="True" /> 
```

根据你所说的尝试这个

```
if(!Page.IsPostback)
{
  rbtn_A.Checked = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-23T19:04:17.463

我知道这是一个旧帖子，但希望这对其他人有帮助。

对我来说，这不是页面上发生的事情，而是我进入页面的方式。

我正在使用 导航到页面`Server.Transfer("~/MyPage.aspx");`。

更改以`Response.Redirect("~/MyPage.aspx");`解决我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:06:27.237

将所有单选按钮设置为`Checked=False;`可能会对您有所帮助

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
 <ContentTemplate>
   <asp:RadioButton ID="rbtn_A" runat="server" GroupName="rbt" 
        AutoPostBack="true" OnCheckedChanged="rbtn_A_CheckedChanged" Checked="False" />
   <asp:RadioButton ID="rbtn_B" runat="server" GroupName="rbt" AutoPostBack="true"
        OnCheckedChanged="rbtn_B_CheckedChanged" Checked="False"/>
   <asp:RadioButton ID="rbtn_C" runat="server" GroupName="rbt" AutoPostBack="true" 
        OnCheckedChanged="rbtn_C_CheckedChanged" Checked="False"/>
   <asp:RadioButton ID="rbtn_D" runat="server" GroupName="rbt" AutoPostBack="true" 
        OnCheckedChanged="rbtn_D_CheckedChanged" Checked="False"/>
 </ContentTemplate> 
```

# d3.js - 如何使用 sql 查询在 NV D3 中绘制动态图表？

> ID：15061047
> 
> 赞同：0
> 
> 时间：2013-02-25T06:05:40.400
> 
> 标签：d3.js, nvd3.js

下面的水平条形图代码效果很好，但现在我需要从 sql 数据库中检索数据，因此图表应该动态变化，所以我在哪里可以在这段代码中插入 sql 查询以及格式是什么，请帮助我。

```
<!DOCTYPE html>
<meta charset="utf-8">
<head>
<link href="Scripts/nv.d3.css" rel="stylesheet" type="text/css">
<script src="Scripts/d3.v3.js"></script>
<script src="Scripts/nv.d3.js"></script>
<script src="Scripts/utils.js"></script>
<script src="Scripts/tooltip.js"></script>
<script src="Scripts/models/axis.js"></script>
<script src="Scripts/models/multiBarHorizontal.js"></script>
<script src="Scripts/models/multiBarHorizontalChart.js"></script>
<script src="Scripts/bar.js"></script>

</head>

<body>

<div id="chart" style="height:700px">
<svg>
</svg>
</div>

<script>

d3.json("data.json",function(error,data){
var chart;
nv.addGraph(function() {
chart = nv.models.multiBarHorizontalChart()
  .x(function(d) { return d.label })
  .y(function(d) { return d.value })
  .margin({top: 30, right: 20, bottom: 50, left: 175})
  .showValues(true)
  .tooltips(false)
  .showControls(false);

  chart.yAxis
  .tickFormat(d3.format(',.0f'));

  d3.select('#chart svg')
  .datum(data)
  .transition().duration(500)
  .call(chart);

 nv.utils.windowResize(chart.update);

 chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

 return chart;
 });
 });

</script>
</body>
</html> 
```

这是我的 data.json

```
{"values":[
{"label":"Alaska","value":3},
{"label":"Alabama","value":4},
{"label":"Arkansas","value":5},
{"label":"Arizona","value":7},
{"label":"California","value":8},
{"label":"Colorado","value":9},
{"label":"Missouri","value":31}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:30:22.727

好的，我所做的是回到 nvd3 下载的 zip 文件中包含的原始示例文件。从`multiBarHorizontalChart.html`示例文件夹的文件开始。我能够编辑该文件，使其看起来像这样；

```
<!DOCTYPE html>
<meta charset="utf-8">

<link href="../src/nv.d3.css" rel="stylesheet" type="text/css">

<style>

body {
  overflow-y:scroll;
}

text {
  font: 12px sans-serif;
}

#chart1 {
  margin: 10px;
  min-width: 100px;
  min-height: 100px;
}

#chart1 svg {
  height: 500px;
}

</style>
<body>

  <div id="chart1">
    <svg></svg>
  </div>

<script src="../lib/d3.v2.js"></script>
<script src="../nv.d3.js"></script>
<script src="../src/utils.js"></script>
<script src="../src/tooltip.js"></script>
<script src="../src/models/legend.js"></script>
<script src="../src/models/axis.js"></script>
<script src="../src/models/multiBarHorizontal.js"></script>
<script src="../src/models/multiBarHorizontalChart.js"></script>
<script src="stream_layers.js"></script>
<script>

d3.json('data.json', function(data) {

var chart;
nv.addGraph(function() {
chart = nv.models.multiBarHorizontalChart()
      .x(function(d) { return d.label })
      .y(function(d) { return d.value })
      .margin({top: 30, right: 20, bottom: 50, left: 175})
      .showValues(true)
      .tooltips(false)
      .barColor(d3.scale.category20().range())
      .showControls(true);

  chart.yAxis
      .tickFormat(d3.format(',.2f'));

  d3.select('#chart1 svg')
      .datum(data)
    .transition().duration(500)
      .call(chart);

  nv.utils.windowResize(chart.update);

  return chart;
});
});

</script> 
```

您应该能够注意到`d3.json('data.json', function(data) {`其中将加载名为 data.json 的 JSON 文件的行。

```
[
  {"values":
    [
      {"label":"Alaska","value":3},
      {"label":"Alabama","value":4},
      {"label":"Arkansas","value":5},
      {"label":"Arizona","value":7},
      {"label":"California","value":8},
      {"label":"Colorado","value":9},
      {"label":"Missouri","value":31}
    ]
  }
] 
```

这可能是您遇到问题的地方，因为您会看到`[]`数据之外还有一组额外的方括号。如果您查看示例中包含的示例数据，它们也在其中（否则我也不知道）。

![在此处输入图像描述](../Images/117caf3027d2b95e4b78edaed098ef2e.png)

希望那一套能让你走得更远。

您现在需要了解如何使用 php 脚本来查询数据库，以正确格式的 JSON 返回数据，然后从最初调用 data.json 文件的位置调用该脚本。

祝你好运。

# c# - Unity3D 有什么好的全局异常处理策略？

> ID：15061050
> 
> 赞同：30
> 
> 时间：2013-02-25T06:06:08.070
> 
> 标签：c#, unity3d

我正在研究做一些 Unity3D 脚本的东西，我想建立全局异常处理系统。这不是为了在游戏的发布版本中运行，其目的是在用户脚本和编辑器脚本中捕获异常，并确保将它们转发到数据库进行分析（以及向相关开发人员发送电子邮件，以便他们可以解决他们的问题）。

在一个普通的 C# 应用程序中，我会尝试使用 Main 方法。在 WPF 中，我会挂钩一个或多个[未处理的异常事件](https://stackoverflow.com/questions/1472498/wpf-global-exception-handler)。在统一...？

到目前为止，我能想到的最好的是这样的：

```
using UnityEngine;
using System.Collections;

public abstract class BehaviourBase : MonoBehaviour {

    // Use this for initialization
    void Start () {

    }

    // Update is called once per frame
    void Update () {
        try
        {
            performUpdate();
            print("hello");
        }
        catch (System.Exception e)
        {
            print(e.ToString());
        }

    }

    public abstract void performUpdate();

} 
```

在其他脚本中，我派生 BehaviourBase 而不是 MonoBehavior，并实现 performUpdate() 而不是 Update()。我还没有为编辑器类实现并行版本，但我认为我必须在那里做同样的事情。

但是，我不喜欢这种策略，因为我必须将它反向移植到我们从社区获取的任何脚本中（并且我必须在团队中强制执行它）。编辑器脚本也没有可与 MonoBehavior 相媲美的单一入口点，因此我假设我必须实现向导、编辑器等的异常安全版本。

[我已经看到有关使用Application.RegisterLogCallback](http://docs.unity3d.com/Documentation/ScriptReference/Application.RegisterLogCallback.html)捕获日志消息（而不是异常）的建议 ，但这让我感到不舒服，因为我需要解析调试日志字符串而不是访问实际的异常和堆栈跟踪。

那么......正确的做法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-01-10T08:10:58.697

在场景中创建一个空的 GameObject 并将此脚本附加到它：

```
using UnityEngine;
public class ExceptionManager : MonoBehaviour
{
    void Awake()
    {
        Application.logMessageReceived += HandleException;
        DontDestroyOnLoad(gameObject);
    }

    void HandleException(string logString, string stackTrace, LogType type)
    {
        if (type == LogType.Exception)
        {
             //handle here
        }
    }
} 
```

确保有**一个实例**。

剩下的就看你了。您还可以将日志存储在*文件系统*、*Web 服务器*或*云存储*中。

* * *

请注意`DontDestroyOnLoad(gameObject)`，通过防止它在场景变化的情况下被破坏，使这个 GameObject 持久化。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-03T16:37:54.857

我在这里找到了 RegisterLogCallback 的有效实现：http: [//answers.unity3d.com/questions/47659/callback-for-unhandled-exceptions.html](http://answers.unity3d.com/questions/47659/callback-for-unhandled-exceptions.html)

在我自己的实现中，我使用它来调用我自己的 MessageBox.Show 而不是写入日志文件。我只是从我的每个场景中调用 SetupExceptionHandling。

```
 static bool isExceptionHandlingSetup;
    public static void SetupExceptionHandling()
    {
        if (!isExceptionHandlingSetup)
        {
            isExceptionHandlingSetup = true;
            Application.RegisterLogCallback(HandleException);
        }
    }

    static void HandleException(string condition, string stackTrace, LogType type)
    {
        if (type == LogType.Exception)
        {
            MessageBox.Show(condition + "\n" + stackTrace);
        }
    } 
```

我现在也有错误处理程序通过这个例程给我发电子邮件，所以我总是知道我的应用程序何时崩溃并获得尽可能多的细节。

```
 internal static void ReportCrash(string message, string stack)
    {
        //Debug.Log("Report Crash");
        var errorMessage = new StringBuilder();

        errorMessage.AppendLine("FreeCell Quest " + Application.platform);

        errorMessage.AppendLine();
        errorMessage.AppendLine(message);
        errorMessage.AppendLine(stack);

        //if (exception.InnerException != null) {
        //    errorMessage.Append("\n\n ***INNER EXCEPTION*** \n");
        //    errorMessage.Append(exception.InnerException.ToString());
        //}

        errorMessage.AppendFormat
        (
            "{0} {1} {2} {3}\n{4}, {5}, {6}, {7}x {8}\n{9}x{10} {11}dpi FullScreen {12}, {13}, {14} vmem: {15} Fill: {16} Max Texture: {17}\n\nScene {18}, Unity Version {19}, Ads Disabled {18}",
            SystemInfo.deviceModel,
            SystemInfo.deviceName,
            SystemInfo.deviceType,
            SystemInfo.deviceUniqueIdentifier,

            SystemInfo.operatingSystem,
            Localization.language,
            SystemInfo.systemMemorySize,
            SystemInfo.processorCount,
            SystemInfo.processorType,

            Screen.currentResolution.width,
            Screen.currentResolution.height,
            Screen.dpi,
            Screen.fullScreen,
            SystemInfo.graphicsDeviceName,
            SystemInfo.graphicsDeviceVendor,
            SystemInfo.graphicsMemorySize,
            SystemInfo.graphicsPixelFillrate,
            SystemInfo.maxTextureSize,

            Application.loadedLevelName,
            Application.unityVersion,
            GameSettings.AdsDisabled
        );

        //if (Main.Player != null) {
        //    errorMessage.Append("\n\n ***PLAYER*** \n");
        //    errorMessage.Append(XamlServices.Save(Main.Player));
        //}

        try {
            using (var client = new WebClient()) {
                var arguments = new NameValueCollection();
                //if (loginResult != null)
                //    arguments.Add("SessionId", loginResult.SessionId.ToString());
                arguments.Add("report", errorMessage.ToString());
                var result = Encoding.ASCII.GetString(client.UploadValues(serviceAddress + "/ReportCrash", arguments));
                //Debug.Log(result);
            }
        } catch (WebException e) {
            Debug.Log("Report Crash: " + e.ToString());
        }
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-06T14:42:48.053

Unity 开发人员只是没有为我们提供这样的工具。他们在这里和那里在框架内部捕获异常并将它们记录为字符串，从而为我们提供 Application.logMessageReceived[Threaded]。因此，如果您需要发生异常或使用您自己的处理（不是统一的）记录异常，我可以想到：

1.  不要使用框架机制，而是使用你自己的，所以异常不会被框架捕获

2.  让你自己的类实现`UnityEngine.ILogHandler`：

    ```
    public interface ILogHandler
    {
        void LogFormat(LogType logType, Object context, string format, params object[] args);
        void LogException(Exception exception, Object context);
    } 
    ```

并按照[官方文档](https://docs.unity3d.com/ScriptReference/Logger-ctor.html)中的说明使用它来记录您的异常。但是这样你就不会收到未处理的异常和从插件记录的异常（是的，有人在框架中记录异常而不是抛出它们）

3.  或者您可以向统一提出建议/请求`Debug.unityLogger`（`Debug.logger`在 Unity 2017 中已弃用）具有设置器或其他机制，以便我们可以通过我们自己的。

4.  只需用反射设置它。但它是临时破解，当统一更改代码时将不起作用。

    ```
    var field = typeof(UnityEngine.Debug)
        .GetField("s_Logger", BindingFlags.Static | BindingFlags.NonPublic);
    field.SetValue(null, your_debug_logger); 
    ```

注意：要获得正确的堆栈跟踪，您需要将编辑器设置/代码中的[StackTraceLogType](https://docs.unity3d.com/ScriptReference/StackTraceLogType.html)设置为 ScriptOnly（大多数情况下这是您需要的，我写了[一篇](http://deepscorn.blogspot.ru/2017/05/unitys-player-setting-logging.html)关于它如何工作的文章）而且，在为 iOS 构建时，据说[脚本调用优化必须设置为缓慢而安全](https://support.apteligent.com/articles/knowledge_base/Unity-support-FAQ)

如果有兴趣，您可以阅读流行的崩溃分析工具的工作原理。如果您查看 crashlytics（适用于 android/ios 的崩溃报告工具），您会发现它在内部使用`Application.logMessageReceived`和`AppDomain.CurrentDomain.UnhandledException`事件来记录托管 C# 异常。

如果对统一框架捕获异常的示例感兴趣，您可以查看[ExecuteEvents.Update](https://bitbucket.org/Unity-Technologies/ui/src/0155c39e05ca5d7dcc97d9974256ef83bc122586/UnityEngine.UI/EventSystem/ExecuteEvents.cs?at=5.2&fileviewer=file-view-default#ExecuteEvents.cs-273)我的另一篇测试它在按钮单击侦听器中捕获异常的文章可以在[这里](http://deepscorn.blogspot.ru/2017/05/why-unity-may-lose-frames-in-stacktrace.html)找到。

关于记录未处理异常的官方方法的一些总结：

I. Application.logMessageReceived 在主线程发生异常时被触发。有几种方法可以实现：

1.  在 C# 代码中捕获并记录的异常`Debug.LogException`
2.  本机代码中捕获的异常（使用 il2cpp 时可能是 c++ 代码）。在这种情况下，本机代码调用`Application.CallLogCallback`会导致触发`Application.logMessageReceived`

注意：当原始异常有内部异常时，StackTrace 字符串将包含“rethrow”

二、`Application.logMessageReceivedThreaded`当任何线程（包括主线程）发生异常时触发（在[文档](https://docs.unity3d.com/ScriptReference/Application-logMessageReceivedThreaded.html)中说）注意：它必须是线程安全的

三、`AppDomain.CurrentDomain.UnhandledException`例如在以下情况下被解雇：

您在编辑器中调用以下代码：

```
 new Thread(() =>
    {
        Thread.Sleep(10000);
        object o = null;
        o.ToString();
    }).Start(); 
```

但是在使用 Unity 5.5.1f1 时会导致 android 4.4.2 版本的崩溃

注意：我在记录异常和断言时重现了一些缺少统一堆栈帧的错误。我提交了其中[之一](https://issuetracker.unity3d.com/issues/assertion-logs-in-release-build-with-forceenableassertions-are-missing-some-stack-frames)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T15:13:23.643

您提到了 Application.RegisterLogCallback，您是否尝试过实现它？因为[日志回调](http://docs.unity3d.com/Documentation/ScriptReference/Application.LogCallback.html)会传回堆栈跟踪、错误和错误类型（警告、错误等）。

您在上面概述的策略将很难实施，因为 MonoBehaviours 不只有一个[入口点](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.html)。您必须处理 OnTriggerEvent、OnCollisionEvent、OnGUI 等。每一个都将其逻辑包装在一个异常处理程序中。

恕我直言，异常处理在这里是个坏主意。如果你不立即重新抛出异常，你最终会以奇怪的方式传播这些错误。也许 Foo 依赖于 Bar，而 Bar 依赖于 Baz。说 Baz 抛出一个被捕获并记录的异常。然后 Bar 抛出异常，因为它需要来自 Baz 的值不正确。最后 Foo 抛出一个异常，因为它从 Bar 获得的值是无效的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-08T10:54:59.123

您可以使用名为[Reporter](https://www.assetstore.unity3d.com/en/#!/content/36556)的插件在未处理的错误时接收调试日志、堆栈跟踪和屏幕截图的电子邮件。屏幕截图和堆栈跟踪通常足以找出错误的原因。对于顽固的偷偷摸摸的错误，您应该记录更多可疑数据，构建并再次等待错误。我希望这会有所帮助。

# c#-4.0 - 策略模式还是接口？

> ID：15061053
> 
> 赞同：5
> 
> 时间：2013-02-25T06:06:31.280
> 
> 标签：c#-4.0, design-patterns, strategy-pattern

我正在寻找抽象一个辅助方法。该方法需要能够接收一个对象，根据对象的类型对其进行处理，并返回一个值。做这样的事情会更好：

```
interface ICanDo
{
 string DoSomething();
}

string DoThings(ICanDo mything)
{
 return mything.DoSomething();
} 
```

还是做这样的事情更好：

```
interface IStrategy
{
 string DoSomething(object o);
}

string DoThings(object mything, IStrategy strategy)
{
 return strategy.DoSomething(mything);
} 
```

后者甚至使用策略模式，因为策略没有内置到类中？

有没有更好的方法来做到这一点我没有想到？将策略构建到类中，为任何需要在其上运行 DoThings 的类使用包装器会更好吗？

抱歉——我是这种模式的新手，并试图弄清楚在哪里以及如何最好地使用它。

这就是我最终放在一起的东西。我不确定这是否遵循良好的开发原则。

```
class IndexWrapper
{
    public interface IDocumentable
    {
        Document BuildDocument();
    }

    public interface IDocumentBuilder
    {
        Type SupportedType { get; }

        Document BuildDocument(object o);
    }

    public class StringDocumentBuilder : IDocumentBuilder
    {
        public Type SupportedType { get { return typeof(string); } }

        public Document BuildDocument(object o)
        {
            Document doc = new Document();
            doc.Add(new Field("string", o as string, Field.Store.YES, Field.Index.ANALYZED));
            return doc;
        }
    }

    public static class IndexableFactory
    {
        public static IDocumentable GetIndexableObject(object o)
        {
            return GetIndexableObject(o, DocumentBuilderFactory.GetBuilder(o));
        }

        public static IDocumentable GetIndexableObject(object o, IDocumentBuilder builder)
        {
            return new IndexableObject(o, builder);
        }
    }

    public static class DocumentBuilderFactory
    {
        private static List<IDocumentBuilder> _builders = new List<IDocumentBuilder>();

        public static IDocumentBuilder GetBuilder(object o)
        {
            if (_builders.Count == 0)
            {
                _builders = Assembly.GetExecutingAssembly()
                                   .GetTypes()
                                   .Where(type => typeof(IDocumentBuilder).IsAssignableFrom(type) && type.IsClass)
                                   .Select(type => Activator.CreateInstance(type))
                                   .Cast<IDocumentBuilder>()
                                   .ToList();
            }

            return _builders.Where(builder => builder.SupportedType.IsAssignableFrom(o.GetType())).FirstOrDefault();
        }
    }

    private class IndexableObject : IDocumentable
    {
        object _o;
        IDocumentBuilder _builder;

        public IndexableObject(object o) : this(o, DocumentBuilderFactory.GetBuilder(o)) { }
        public IndexableObject(object o, IDocumentBuilder builder)
        {
            _o = o;
            _builder = builder;
        }

        virtual public Document BuildDocument()
        {
            return _builder.BuildDocument(_o);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-26T07:47:09.170

如有疑问，请牢记 KISS 口头禅——保持简短和简单。模式可能非常有用，但通常它们只在特定情况下有用，否则会增加**不必要的复杂性**。

**以我的经验，当你有多个不同的后端**可供选择一个类时，策略模式很有用。例如，假设您有一个日志记录类，您的程序使用它来打印调试信息。也许在某些情况下，您想登录到文件。也许您想登录到控制台。也许您甚至想使用您公司制定的专有协议登录到远程服务器！

因此，您的日志记录类可能如下所示：

```
interface IOutputWriter
{
    void WriteLn(string message);
}

class ConsoleWriter : IOutputWriter
{
    public ConsoleWriter()
    {

    }

    public void WriteLn(string message)
    {
        Console.WriteLine(message);
    }
}

class NetworkWriter : IOutputWriter
{
    public NetworkWriter()
    {

    }

    public void WriteLn(string message)
    {
        //Crazy propietary server protocol action
    }
}

class Logger
{
    IOutputWriter writer;
    public Logger(IOutputWriter writer)
    {
        this.writer = writer;
    }

    public void Log(string message)
    {
        writer.WriteLn(message + "Date");
    }
} 
```

最终结果是您的程序代码如下所示：

```
class Program
{
    static void Main(string[] args)
    {
        Logger logger = new Logger(new ConsoleWriter());
        logger.Log("Test");
    }
} 
```

好处是，如果你想使用你疯狂的网络协议，你甚至可以在不查看日志类的情况下做到这一点。您只需要使用您的 IOutputWriter 接口创建一个新类并告诉您的记录器使用您的自定义后端。策略模式本质上是定义**可重用接口**，然后使用这些接口将算法彼此**分离。**

# r - 在 R 中使用融化的数据框引用带有 ggplot 的元素

> ID：15061069
> 
> 赞同：1
> 
> 时间：2013-02-25T06:07:24.780
> 
> 标签：r, ggplot2, dataframe

假设我`iris`使用 ggplot2 将数据框熔化如下：

```
meltediris <- melt(iris) 
```

我现在可以`Petal.Width`通过从`variable`列中选择它们来绘制值：

```
ggplot(meltediris) + geom_density(aes(x=meltediris[meltediris$variable == 
                                                          "Petal.Width",]$value)) 
```

然后我想通过 绘制`Petal.Width`值`Species`，所以我做了：

```
ggplot(meltediris) + geom_density(aes(x=meltediris[meltediris$variable ==
                                          "Petal.Width",]$value, colour=Species)) 
```

它似乎有效，但我很惊讶它确实有效！数据框的选定子集与`meltediris[meltediris$variable == "Petal.Width",]$value`整个融化的数据框的索引不同（它只是一个子集），那么 ggplot 如何知道选择正确的`Species`值？似乎它应该要求我这样做：

```
ggplot(meltediris) + geom_density(aes(x=meltediris[meltediris$variable == 
                                  "Petal.Width",]$value, 
                     colour=meltediris[meltediris$variable == "Petal.Width",]$Species)) 
```

它选择`Species`熔化数据帧的选定子集的值。再举一个例子，如果我这样做：

```
ggplot(meltediris) + geom_density(aes(x=meltediris[meltediris[meltediris$variable == "Petal.Width",]$Species == "virginica",]$value, colour=Species)) 
```

似乎 ggplot 应该只知道一个物种，因为我选择了非处女。当我这样做时，它只正确绘制了一个物种，但仍然在图例中显示其他两个`Species`值。它怎么知道这样做？我确信当我通过它时`x=`它无法读取剩余的数据帧值。有人可以解释 ggplot 如何从融化的数据框中挑选这些变量吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:40:19.423

就像评论中所说的那样，当我尝试这个时：

```
ggplot(meltediris) + geom_density(
                         aes(x=meltediris[meltediris$variable ==
                                              "Petal.Width",]$value, colour=Species)) 
```

我收到此错误：

```
Error:  Aesthetics must either be length one, 
        or the same length as the dataProblems:
                    meltediris[meltediris$variable == "Petal.Width", ]$value 
```

正如错误所暗示的，您必须提供具有相同长度的*aes 。*这里不需要给出`data`参数，因为你给出了 aes 中的所有值（你的*aes*是向量）

例如，

```
 X <-   meltediris[meltediris$variable =="Petal.Width",]$value
 Col <- meltediris[meltediris$variable == "Petal.Width",]$Species
ggplot() + geom_density(aes(x=X,colour=Col)) 
```

但在这种情况下，我最好将所有 data.frame 都设置为子集。

```
ggplot(meltediris) + geom_density(aes(x=variable,colour=Species),
               subset=.(variable=="Petal.Width")) 
```

# linux - 在星号 sip 上接收短信

> ID：15061073
> 
> 赞同：5
> 
> 时间：2013-02-25T06:07:43.097
> 
> 标签：linux, sms, sip, asterisk

我通过我的星号版本 1.4.11 上的 sip 在星号服务器上收到了短信，但无法从 agi 路由它或将其发送到我可以在控制台上看到的一些 url 波纹管行。

```
[Feb 24 23:50:29] WARNING[23972]: chan_sip.c:9496 receive_message: Received message to <sip:13214375437576@16.151.18.14> from <sip:131231233214@164.36.74.30>;tag=sansay1824778355rdb15870, dropped it...
Content-Type:text/plain
Message: Test SMS 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:30:42.717

在 1.4 上无法处理短信。*

您需要星号版本 10 或 11

配置如下：

sip.conf

```
textsupport=yes                                                                                                                                                                               
accept_outofcall_message = yes                                                                                                                                  
outofcall_message_context = messages 
```

extensions.conf

```
[messages]                                                                                                                                                                                    
exten => _X.,1,Set(ACTUALTO=${CUT(MESSAGE(to),@,1)})                                                                                                                                          
exten => _X.,n,MessageSend(${ACTUALTO},${MESSAGE(from)})                                                                                                                                      
exten => _X.,n,NoOp(Send status is ${MESSAGE_SEND_STATUS})                                                                                                                                    
exten => _X.,n,GotoIf($["${MESSAGE_SEND_STATUS}" != "SUCCESS"]?sendfailedmsg)                                                                                                                 
exten => _X.,n,Hangup()                                                                                                                                                                       
;                                                                                                                                                                                             
; Handle failed messaging                                                                                                                                                                     
exten => _X.,n(sendfailedmsg),Set(MESSAGE(body)="[${STRFTIME(${EPOCH},,%d%m%Y-%H:%M:%S)}] 
Your message to ${EXTEN} has failed. Retry later.")                                                 
exten => _X.,n,Set(ME_1=${CUT(MESSAGE(from),<,2)})                                                                                                                                            
exten => _X.,n,Set(ACTUALFROM=${CUT(ME_1,@,1)})                                                                                                                                               
exten => _X.,n,MessageSend(${ACTUALFROM},ServiceCenter)                                                                                                                                       
exten => _X.,n,Hangup() 
```

# jquery - 如何链接到使用 jQuery 淡入/淡出从我网站上的单独页面显示和隐藏的 div？

> ID：15061074
> 
> 赞同：0
> 
> 时间：2013-02-25T06:07:48.493
> 
> 标签：jquery, hyperlink, fadein, fadeout

我正在创建一个个人网站，其中包括一个投资组合页面，其中包含多个可以使用 jQuery 淡入/淡出功能打开和关闭的画廊。我的主索引页面上也有链接，我想链接到包含画廊的每个单独的 div。有没有办法做到这一点？我在网页设计和 jQuery 方面相当陌生。div 分配了一个类，将它们绝对定位，以便它们重叠，并且每个 div 都有一个唯一的 id，并在 jQuery 代码中使用。这是我用来显示和隐藏 div 的代码...

```
<script type="text/javascript"> 
 $(function() {
    $('#show_advertisement').click(function() {
        $('#gallery_logos').fadeOut('slow');
        $('#gallery_illustrations').fadeOut('slow');
        $('#gallery_webdesign').fadeOut('slow');
        $('#gallery_advertisments').fadeIn('slow');
    });
    $('#show_logo').click(function() {
        $('#gallery_advertisments').fadeOut('slow');
        $('#gallery_illustrations').fadeOut('slow');
        $('#gallery_webdesign').fadeOut('slow');
        $('#gallery_logos').fadeIn('slow');
    });
       $('#show_illustration').click(function() {
        $('#gallery_advertisments').fadeOut('slow');
        $('#gallery_webdesign').fadeOut('slow');
        $('#gallery_logos').fadeOut('slow');
        $('#gallery_illustrations').fadeIn('slow');
    });
       $('#show_web').click(function() {
        $('#gallery_advertisments').fadeOut('slow');
         $('#gallery_illustrations').fadeOut('slow');
          $('#gallery_logos').fadeOut('slow');
        $('#gallery_webdesign').fadeIn('slow');
    });
    $('#show_advertisement').trigger('click');

             });
</script> 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:19:38.110

我的猜测是，您从带有哈希的主页索引导航链接到要显示的 div ..ala

您的链接：/gallery.html#show_illustration

然后在gallery.html页面上，设置一些代码，然后触发您想要点击的项目..ala

```
$(document).ready(function() {
    var url = window.location.hash;
    $(url).trigger('click');

}); 
```

# android - 从名称中获取地址的地理编码器在三星 Galaxy Tab 2 中不起作用？

> ID：15061075
> 
> 赞同：2
> 
> 时间：2013-02-25T06:08:02.153
> 
> 标签：android, google-geocoder, galaxy-tab, android-backup-service

我正在使用地理编码器来获取我的应用程序中的纬度和经度。`geocoder.getFromLocationName(address, maxResults)`是我为此使用的方法。除了三星 Galaxy Tab 2 设备外，它在所有设备上都能正常工作

代码 ：

```
 @Override
        protected List<Address> doInBackground(String... params) {
            address = params[0];
            Geocoder geocoder = new Geocoder(context, Locale.getDefault());
            try {
                return geocoder.getFromLocationName(params[0], 5);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                return null;
            }
        } 
```

日志猫：

```
02-24 21:23:27.568 D/BackupManagerService(  189): Received broadcast Intent { act=android.intent.action.PACKAGE_ADDED dat=package:com.myapp flg=0x10000010 (has extras) }
02-24 21:23:27.568 V/BackupManagerService(  189): addPackageParticipantsLocked: com.myapp 
```

我认为问题是**addPackageParticipantsLocked**任何建议都会非常有帮助，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T06:30:57.047

根据[这个链接](http://code.google.com/p/android/issues/detail?id=38009)我想给你建议重新启动你的设备。 **许多人通过重新启动设备解决了这个问题。** 您也可以尝试相同的方法。试试看。它可能会解决您的问题。

希望它会有所帮助。

# javascript - 在样式表中指定多 CSS 类

> ID：15061081
> 
> 赞同：2
> 
> 时间：2013-02-25T06:08:12.987
> 
> 标签：javascript, jquery, css

再会。

我有一个分配了两个三个类的元素。两个在 html 中分配，一个由 jQuery 分配为活动类。

现在我想在 CSS 中指定一个悬停效果，但只针对一个特定元素：“menuItem first”类...

HTML：

```
<ul>     
  <li class="menuItem first"><a href=""><img src="img/sample_slides/1.png" alt="thumbnail" /></a></li>
  <li class="menuItem"><a href=""><img src="img/sample_slides/1.png" alt="thumbnail" /></a></li>
  <li class="menuItem"><a href=""><img src="img/sample_slides/1.png" alt="thumbnail" /></a></li>
  <li class="menuItem"><a href=""><img src="img/sample_slides/1.png" alt="thumbnail" /></a></li>
</ul> 
```

CSS：

```
li.act,li.act:hover{
    /* The active state of the thumb */
    background:url(img/active_bg2.png) no-repeat;
}

li.act .first, li.act .first:hover{
    /* The active state of the thumb - first class only! */
    background:url(img/active_bg1.png) no-repeat;
} 
```

我知道上面的css是错误的。什么是正确的注释？
请记住，`.act`该类是由 jQuery 分配给活动元素的...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T06:12:37.933

当你说

```
li.act .first 
```

您真正要说的是“带有类的元素中带有类`first`的`<li>`元素`act`”。

如果你想说“同时具有`first`和`act`类的元素，你会想把它们写成不带空格的：

```
li.act.first 
```

之后，要为所述选择器实现悬停规则集，您可以`:hover`像往常一样附加伪：

```
li.act.first:hover 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T06:11:57.880

你的选择器中有一个额外的空间

利用

```
li.act.first, li.act.first:hover{
    /* The active state of the thumb - first class only! */
    background:url(img/active_bg1.png) no-repeat;
} 
```

选择器`li.act.first`表示该`li`元素同时具有`act`和`first`在类属性中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T06:31:06.187

您目前拥有的是为两种状态设置相同的背景颜色。所以你会使用,,

```
.first{background-color:#faa;}
.first:hover{background-color:#afa;} 
```

我在这里使用背景颜色作为一个工作示例， [http://jsfiddle.net/mshtT/](http://jsfiddle.net/mshtT/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T07:12:35.097

When you write `li class="menuItem first` like the way you did in your first `li` element in HTML, `menuItem` and `first` become two separate classes. To apply the hover effect in just one element you can just use the following CSS

```
.first:hover {
    /*the effect you want*/ (eg. Background: #444;)
} 
```

It would only apply to the element that has the `first` class in it, that is your first element.

# magento - 在 magento 中找不到 catalog_product_save_after 和 catalog_product_save_before

> ID：15061083
> 
> 赞同：1
> 
> 时间：2013-02-25T06:08:30.923
> 
> 标签：magento, events, magento-1.7, observers

嗨，我想写一个钩子。我创建了一个名为 BEST SELLER 的类别和一个名为 BESTSELLER(YES/NO) 的属性（默认为 NO）（一般情况下）。当我将 BEST SELLER 类别分配给任何产品时，我想写一个钩子，它必须将属性 BESTSELLER 更改为 YES，当我们从 BEST SELLER 类别中删除产品时，它必须将 BESTSELLER 属性值更改为 NO。但我发现在 magento v-1.7.0.2 中不存在像 catalog_product_save_before 和 catalog_product_save_after 这样的事件。任何帮助请快速回复。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T09:49:09.973

## 简答

`catalog_product_save_before`并且`catalog_product_save_after`可用并且您不会直接找到它。

## 长答案

如果您尝试在核心文件中进行搜索，那么您将找不到它。因为 Magento 对所有模型`save_before`和`save_after`. 查看文件`Mage_Core_Model_Abstract`，您会发现以下行：

```
Mage::dispatchEvent($this->_eventPrefix.'_save_before', $this->_getEventData());
Mage::dispatchEvent($this->_eventPrefix.'_save_after', $this->_getEventData()); 
```

现在查看`Mage_Catalog_Model_Product`文件。您将找到带有值的受保护方法 eventPrefix`catalog_product`

```
protected $_eventPrefix      = 'catalog_product'; 
```

因此，对于`$this->_eventPrefix`Catalog Product 将在 Model 的 dispatch 事件中。`catalog_product_save_before``catalog_product_save_after`

这适用于所有正在扩展的模型保存操作`Mage_Core_Model_Abstract`

# bash - Shell 脚本打印出错误的 for 循环

> ID：15061088
> 
> 赞同：0
> 
> 时间：2013-02-25T06:09:12.867
> 
> 标签：bash, shell, for-loop

我必须创建一个钻石，但我一直得到错误的输出。

我写了3个循环，第一个是高度，第二个是空格，第三个是星号

第二部分是钻石的后半部分

### 输出

```
enter shape
diamond
width
5
 *  *  *  * 
 * *  * *  * * 
 * * *  * * * 
 * * * * 

 * * * * 
 * * *  * * * 
 * *  * *  * * 
 *  *  *  * 
```

### 脚本

```
"diamond")
echo "width"
read width

for ((h = 1; h <= $width; h++))
do

        for ((s = $width; s > h; s--))
        do
        printf ' '
                for ((a = 1; a <= h; a++))
                do
                printf '* '
                done
        done

echo ""
done

for ((h = $width; h > 0; h--))
do
        for ((s = $width; s > h; s--))
        do
        printf ' '
                for ((a=1 ; a <= h; a++))
                do
                printf '* '
                done
        done

echo ""
done
;; 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:19:21.180

for your " `done`space" `for`-loop 在钻石的顶部和底部都位于错误的位置：

```
for ((h = 1; h <= $width; h++))
do
    for ((s = $width; s > h; s--))
    do
        printf ' '
    done # <-- This should be here!
    for ((a = 1; a <= h; a++))
    do
        printf '* '
    done
    echo ""
done 
```

我建议运行您的脚本`bash -x`以查看发生了什么。

# r - 分离和比较向量中的完整案例和 NA 元素

> ID：15061102
> 
> 赞同：0
> 
> 时间：2013-02-25T06:10:56.883
> 
> 标签：r, nan

我有一个带有数字和 NA 元素的向量。例如，

```
data<-c(.4, -1, 1, NA, 8, NA, -.4)
data[complete.cases(data), ] 
```

但是有什么功能可以将它们分成不同的向量，以便我可以使用箱线图和 ECDF 等图表来比较它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T06:23:02.270

目前尚不清楚您要解决什么问题。`complete.cases`为选择创建一个逻辑向量（如果您正确使用它。）您可以否定它以获取其他向量。您无法像尝试那样处理向量，`[ , ]`但如果“数据”是可以工作的数据框（或矩阵）。

```
data<-c(.4, -1, 1, NA, 8, NA, -.4)
data[complete.cases(data) ]
#[1]  0.4 -1.0  1.0  8.0 -0.4
data[!complete.cases(data) ]
#[1] NA NA 
```

如果尝试选择非 NA 项目，则可能更容易将其`!is.na(data)`用作选择向量。这是一个测试用例，显示它适用于矩阵以及 data.frames：

```
> dat <- matrix( sample(c(1,2,NA), 12, rep=TRUE), 3)
> dat
     [,1] [,2] [,3] [,4]
[1,]    1    1    1    1
[2,]   NA   NA    2    2
[3,]    1   NA    2    1
> dat[ complete.cases(dat), ]
[1] 1 1 1 1
> dat[ ! complete.cases(dat), ]
     [,1] [,2] [,3] [,4]
[1,]   NA   NA    2    2
[2,]    1   NA    2    1 
```

# sap-basis - SAP 管理控制台变黄；无法再登录 SAP 系统

> ID：15061105
> 
> 赞同：0
> 
> 时间：2013-02-25T06:11:05.430
> 
> 标签：sap-basis

我从 scn.sap.com 安装了 SAP netweaver 7.02 trail。使用 youtube 教程安装它。工作了几个小时。后来当我打开管理控制台时，它会变成绿色，然后在几秒钟内又变回黄色。我无法在几个小时前使用其他用户的 sapGUI 访问。GUI 的错误消息是“未达到合作伙伴 '127.0.0.1:sapdp00'”。

# java - 如何使用 jdk 1.6 的 javax.script API/Rhino Api 调用具有 Jqueries 的 javascript

> ID：15061107
> 
> 赞同：1
> 
> 时间：2013-02-25T06:11:10.653
> 
> 标签：java, javascript, jquery, rhino, javax.script

我有一个像下面这样的Javascript..

```
 <!DOCTYPE html>
    <html>
    <head>
    <script src="C:\User\Sample\src\jquery-1.8.2.min.js" type="text/javascript"></script>

    <script>
    $(document).ready(function(){
    var sessiontoken;
    var supportCors = $.support.cors;
    var sessiontoken ;
    $.support.cors = true;

    $.ajax({
               type: 'POST',
               url: "https://sessionmanagerg.abc.com/xyz/obj/Session",
               dataType: "json",
               data: {
                   UserId: "TestUser" + "101818",
                   CSK1: "csk1",
                   CustId: "custid1"
               },
        success: function (data) {
                   $.support.cors = supportCors;
                 sessiontoken=data.Token;
        alert(sessiontoken);
               },
               error: function (xhr, textStatus, error) {
                   $.support.cors = supportCors;
                   alert("responseText: " + xhr.responseText);
                   alert("XHR statusText: " + xhr.statusText);
                   alert("textStatus: " + textStatus);
                   alert("error: " + error.message);
               }

    });
    });

    </script>
    </head>
    <body>

    </body>
    </html> 
```

它在 IE、chrome 中运行后生成会话令牌（但不知何故不在 mozilla 中）。我想通过 Rhino 的 ScriptEngine 或 Javax.script (jdk 1.6) Api 运行这个脚本。我使用 Javax.script 尝试了上述方法，但是即使我使用 engine.eval("..");

或者

如果我可以生成一个全新的 java 代码，它与上面的 javascript 具有相同的功能，那就太好了。谁能提供一些关于这个的指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:43:36.290

实现这样的脚本的挑战之一是*javax.script*或 Java/Rhino 运行时不包含浏览器的 DOM 结构（包括 ajax XMLHttpRequest 构造）。但是，可以使用服务器端脚本环境重新创建它。其中之一称为**env.js**，它在[此处](http://ejohn.org/blog/bringing-the-browser-to-the-server/)介绍并已在[此处](https://github.com/thatcher/env-js)维护。我已经使用这个包来实现在类似浏览器的模拟中执行的 js 测试，所以我可以证明它对像你这样的脚本的有效性。

我也听说过，虽然没有亲自使用过，但[phantomjs](http://phantomjs.org/)也适用于同样的事情，所以你可能也想看看。

# ruby-on-rails - update_all 不工作

> ID：15061112
> 
> 赞同：3
> 
> 时间：2013-02-25T06:11:35.470
> 
> 标签：ruby-on-rails, ruby

我正在使用`update_all`直接在数据库上更新特定记录。我在解析 csv 文件的脚本中执行此操作。我知道这会`update_all`返回一个关于更改了多少行的整数。有些行返回 1，有些行返回 0，这意味着没有行受到影响。

```
attrs = list of user attributes
User.update_all(attrs, { id: user.id }) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T06:14:06.247

这通常发生在数据库找不到特定行时，在这种情况下，该行基于`user.id`. 我敢打赌，您有一个`default_scope`on 用户，该特定用户被过滤掉了。尝试使用`User.unscoped.update_all(attrs, { id: user.id })`

# php - 获取用户的纬度和经度并从两个不同的纬度和经度值计算距离

> ID：15061113
> 
> 赞同：0
> 
> 时间：2013-02-25T06:11:44.737
> 
> 标签：php, javascript, distance, latitude-longitude

我有一个很长的问题，我希望一个或多个人可以提供帮助。我在网上找到的一个函数有问题，给定两个纬度和经度坐标，可以找到两者之间的距离。功能如下：

```
 <script>
         function handler(location) {
              var latitude = location.coords.latitude;
              var longitude = location.coords.longitude;
              document.getElementById('lat').value = latitude;
              document.getElementById('long').value = longitude;
         }
         navigator.geolocation.getCurrentPosition(handler);
   </script> 
```

然后我在底部有一个按钮以及隐藏字段：

```
<input type="submit" id="button" name='submit' value="Bounce" onClick="handler(location)">
<input type='hidden' name='latitude'id="lat">
<input type='hidden' name='longitude'  id="long"> 
```

因此，当我单击提交按钮时，它会调用该函数，然后将隐藏字段的值设置为提交到 PHP 的帖子的纬度和经度。然而，这个函数（连同 php 和 mysql 代码）每次从手机运行网页时都会插入稍微不同的坐标……即使手机根本没有移动。

1.有没有人知道另一个 javascript/jquery/whatever 可以在客户端获得用户的经纬度并且实际上是准确和一致的？

我还试图找到两个纬度和经度值之间的距离，即 lat1、long1、lat2、long2。我发现了许多 php 计算，这些计算应该只是通过一个函数简单地通过 lat1,long1,lat2,long2 并返回以米为单位的距离，但是每次，当两个设备几乎相同时，它都会返回一个超级大的数字调用网页时，纬度和经度坐标并排在一起。以下是一些我发现只是没有返回正确值的 php 代码：

```
function distanceGeoPoints ($lat1, $lng1, $lat2, $lng2) {
    $earthRadius = 3958.75;
    $dLat = deg2rad($lat2-$lat1);
    $dLng = deg2rad($lng2-$lng1);
    $a = sin($dLat/2) * sin($dLat/2) + cos(deg2rad($lat1)) * cos(deg2rad($lat2)) *sin($dLng/2) *    sin($dLng/2);
    $c = 2 * atan2(sqrt($a), sqrt(1-$a));
    $dist = $earthRadius * $c;
   // from miles
    $geopointDistance = $dist;
    return $geopointDistance;
}

function vincentyGreatCircleDistance($latitudeFrom, $longitudeFrom, $latitudeTo, $longitudeTo){
    // convert from degrees to radians
    $earthRadius = 6371000;
    $latFrom = deg2rad($latitudeFrom);
    $lonFrom = deg2rad($longitudeFrom);
    $latTo = deg2rad($latitudeTo);
    $lonTo = deg2rad($longitudeTo);
    $lonDelta = $lonTo - $lonFrom;
    $a = pow(cos($latTo) * sin($lonDelta), 2) + pow(cos($latFrom) * sin($latTo) - sin($latFrom) * cos($latTo) * cos($lonDelta), 2);
     $b = sin($latFrom) * sin($latTo) + cos($latFrom) * cos($latTo) * cos($lonDelta);
     $angle = atan2(sqrt($a), $b);
     return $angle * $earthRadius;
} 
```

2.有没有其他人遇到过这个问题和/或可能知道我做错了什么？这些计算不接受负纬度或经度值吗？3.有没有人知道一个我还没有听说过的 php 函数？

这是一篇很长的帖子，但对我有疑问的任何部分的任何帮助将不胜感激。

谢谢！

# perl - 无法生成错误并将其重定向到 perl 中的文件

> ID：15061117
> 
> 赞同：0
> 
> 时间：2013-02-25T06:12:00.080
> 
> 标签：perl, stderr

我正在尝试将我的 STDOUT 和 STDERR 重定向到某个文件。我在某种程度上是成功的。但我无法理解以下代码中的一件事。

```
#!/usr/bin/perl
open (STDOUT,">/var/tmp/outfile") or die "problem : $!";
open (STDERR,">>/var/tmp/outfile") or die "problem : $!";
print "$_\n" foreach (1..10);
sdsdf;  # buggy line inserted wantedly 
```

我插入了最后一行，假设 perl 会抛出一个错误，并且会被重定向到文件但它没有发生。我的程序不会在屏幕上或输出文件中出现任何错误。请帮助我理解这种行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:22:17.010

sdsdf 没有产生任何错误（如果你`use strict`会看到一些编译时错误），这就是你没有看到任何消息的原因。试试这个：

```
use warnings;
use strict;
open (STDOUT,">outfile1") or die "problem : $!";
open STDERR, ">&STDOUT";
print "$_\n" foreach (1..10);
die("aaaa");  # buggy line inserted wantedly 
```

同样在您的代码中，您打开同一个文件两次，这可能会导致一些问题。在上面我们首先将stdout重定向到一个文件，然后将stderr重定向到stdout。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:59:41.303

没有`use strict;`，

```
 sdsdf; 
```

是相同的

```
 "sdsdf"; 
```

这就是您一直想使用的原因之一`use strict; use warnings;`。让我们从添加它开始。

* * *

因此，您希望将所有输​​出（包括编译时错误）记录到文件中。好吧，在编译代码后重定向 STDERR 不会发生这种情况。最好的方法是从你的程序之外。

```
script.pl >/var/tmp/outfile 2>&1 
```

但它可以在你的程序中完成。

```
#!/usr/bin/perl
use strict;
use warnings;

BEGIN {
   open(STDOUT, '>', '/var/tmp/outfile')
      or die("Can't redirect STDOUT: $!\n");
   open(STDERR, '>&', \*STDOUT)
      or die("Can't redirect STDERR: $!\n");
}

print "$_\n" foreach (1..10);
sdsdf;  # Syntax error 
```

# javascript - 检测浏览器对窗口间通信的支持

> ID：15061119
> 
> 赞同：-4
> 
> 时间：2013-02-25T06:12:03.680
> 
> 标签：javascript, browser-feature-detection

我有一些 javascript 依赖于 window.open 和窗口间通信的使用（新的“子”窗口[将成功/失败传达给“父”窗口](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)）。

这种（窗口间通信）在大多数情况下都可以正常工作，但不适用于某些不支持窗口间通信的浏览器。示例包括[Windows Phone](https://stackoverflow.com/questions/12201436/how-to-open-a-new-window-or-tab-via-javascript-in-windows-phone-7-browser)和[iPhone 的 UIWebView](http://undefinedvalue.com/2011/07/25/beware-lure-ios-uiwebview)。

我目前进行客户端（基于 JavaScript）[用户代理嗅探](https://stackoverflow.com/questions/4460205/detect-ipad-iphone-webview-via-javascript)以检测这些场景 - 并回退到不同的代码路径以解决该问题。

我可以使用用户代理嗅探的替代方法吗？

*需要明确的是，window.open 有效（其中有效的意思是“它打开请求的 url”）。**不**可靠的是使用 window.opener 和 postMessage 进行从“孩子”到“父母”的窗口间通信。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:14:29.690

在您的开启窗口消息回调中，您可以像这样向子窗口发送回复：

```
function yourMessageCallback(event) {
  // your other handler stuff here...
  event.source.postMessage('Yeah I got it', event.origin);
} 
```

然后你可以在发送端做一个计时器，当回复到达时你可以清除它：

```
// do your postmessage here

function notReceived() {
  // do stuff if the message didn't go through
}

var messageTimer = setTimeout(notReceived, 500); // 500ms should be enough for everyone?

window.addEventListener('message', function(event) {
  // do necessary origin checks first etc... (not shown here)

  if (event.data == 'Yeah I got it') {
    clearTimeout(messageTimer);
    // do stuff if the message went through
  }
}, false); 
```

我知道这可能是一个有点骇人听闻的解决方案，但可能不如用户代理嗅探那么简单？

# batch-file - 按文件夹移动文件

> ID：15061124
> 
> 赞同：0
> 
> 时间：2013-02-25T06:13:10.127
> 
> 标签：batch-file, cmd, move

我有

> D:\folder\1.jpg,
> D:\folder\2.jpg,
> D:\folder\3.jpg
> .... 以此类推

我需要

> D:\文件夹\1\1.jpg,
> D:\文件夹\2\1.jpg,
> D:\文件夹\3\1.jpg
> ....

这段代码

```
 FOR /R %I IN (*.jpg) DO (md %~nI; move %I %~dI%~pI%~nI\1.jpg) 
```

创建文件夹，如`D:\folder\1\1.jpg\`

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:15:17.300

用这个

```
FOR %I IN (*.jpg) DO (
  MD %~nI & copy %I %~nI\1.jpg & del %I) 
```

用于`&`管道连续命令。同样在[`move`](http://ss64.com/nt/move.html)你不能重命名所以我只是使用`copy`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:39:54.317

您的命令创建文件夹，例如`D:\folder\1\1.jpg\`因为`;`是参数分隔符，不能用于菊花链命令。对于后者，您必须使用`&`.

您的命令还有其他几个问题。

*   您在当前工作目录 ( `md %I`) 中创建目标文件夹，然后使用完整路径 ( `%~dI%~pI%~nI\1.jpg`) 移动文件。只要当前工作目录中有包含 .jpg 文件的子文件夹，这将失败。
*   您不引用变量，因此当路径或文件名包含空格时，该命令也会失败。
*   将文件移动到子文件夹会使用递归文件夹遍历 ( `for /r`) 创建一个无限循环。

我建议运行两个单独的循环，一个用于创建目标文件夹，第二个用于移动文件：

```
for /r %I in (*.jpg) do @mkdir "%~dpnI"
for /r %I in (*.jpg) do @move "%~fI" "%~dpnI\1%~xI" 
```

# oracle - 在数据库中保存金额范围值的最佳实践

> ID：15061132
> 
> 赞同：0
> 
> 时间：2013-02-25T06:14:05.380
> 
> 标签：oracle, hibernate, jakarta-ee, database-design

我在该表中有一个帐户表，我需要保存金额范围我有一个下拉列表，其中包含以下值`$25k-$30k`，`$30k-$35k`它需要增加 5 至`$250k`.

我计划将所有值放在一个表（货币范围）中，并将 ID 映射到帐户。但是我的伙伴建议将值直接保存到帐户表中会更好。

哪个是最佳实践？

这个问题可能被某人关闭。我只需要最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:41:28.223

首先，它错误的设计方法来管理 varchar 列中的范围。

我不确定您将范围保持在 varchar 中的目的。如果这只是为了显示而不需要任何操作，那么最好直接更改帐户表。

但是，如果您要进行进一步的操作，那么这里我们有两种方法来实现它 1\. 最好有两个单独的列销售“MinValue”和“MaxValue”用于限制范围 2。如果您不打算更改帐户表，那么最好保留一个单独的表 accountLimit 并将有两列用于范围。现在您可以将 ID 与帐户表相关联。并且可以从表 accountLimit 中选择值。

# python - 与 ubuntu 服务器一起使用的 Python Tkinter 问题

> ID：15061135
> 
> 赞同：1
> 
> 时间：2013-02-25T06:14:19.320
> 
> 标签：python, tkinter, openerp

我在使用 tkinter 插件时遇到问题。我在本地系统中使用 ubuntu 12.10 桌面并安装了 python 2.7 和 3.2 我在 OpenERP 中使用了 tkinter 插件，它在我的本地电脑上运行良好。但问题是在服务器（Ubuntu 12.04 服务器）中使用相同的代码时它不起作用

表明

```
self.tk = _tkinter.create(screenName, baseName, className, interactive, wantobjects, useTk,sync, use) 
TclError: no display name and no $DISPLAY environment variable 
```

我在终端中用 python 检查它也说错误，这意味着 tkinter 在我不知道的地方有问题。我还检查了 tkinter 和 python 版本都很好。但是我在终端中定位 tkinter 时发现了一些不寻常的事情。在本地它显示位于 python3.2 中的 tkinter 插件，但在服务器中它不显示 tkinter

我检查了许可也很好。如何使 tkinter 在 Ubuntu 服务器 12.04 中工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:25:02.813

包含完整的回溯和更大的代码提取会很好。错误消息意味着 Tkinter 无法找到您的 X 图形环境，这可能意味着您正在无头服务器上运行代码，正如 Dominic 指出的那样。您可以尝试在服务器上安装 X，但如果机器真的是没有用户界面的服务器，则不需要 GUI。

如果您确实需要在执行该代码时显示 GUI，那么它不应该在服务器端运行，或者您需要设置 X11 转发到客户端计算机。不过，这在 OpenERP 环境中似乎没有多大意义——因为它很难以通用的方式为所有用户工作。

现在您可能正在使用 matplotlib 来生成图形（您的代码提取没有显示）？如果是，您可以简单地强制它使用无头后端来生成图像，如this [question](https://stackoverflow.com/questions/2443702/problem-running-python-matplotlib-in-background-after-ending-ssh-session)或this [other question](https://stackoverflow.com/questions/2801882/generating-a-png-with-matplotlib-when-display-is-undefined)中所述。

尝试在调用渲染代码之前执行以下代码：

```
import matplotlib
import matplotlib.pyplot

# force headless backend, or set 'backend' to 'Agg'
# in your ~/.matplotlib/matplotlibrc
matplotlib.use('Agg')

# force non-interactive mode, or set 'interactive' to False
# in your ~/.matplotlib/matplotlibrc
matplotlib.pyplot.ioff() 
```

另请参阅以下参考资料：

*   [什么是 matplotlib 后端](http://matplotlib.org/faq/usage_faq.html#what-is-a-backend)
*   [使用 matplotlibrc 文件自定义 matplotlib](http://matplotlib.org/users/customizing.html#customizing-matplotlib)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T17:30:12.650

对于那些仍然感兴趣的人，我只是遇到了同样的问题：现有答案几乎是正确的，但顺序很重要：您需要在 pyplot*之前*调用 matplotlib.use 。

这对我有用：

```
import matplotlib
# force headless backend, or set 'backend' to 'Agg'
# in your ~/.matplotlib/matplotlibrc
matplotlib.use('Agg')

import matplotlib.pyplot
# force non-interactive mode, or set 'interactive' to False
# in your ~/.matplotlib/matplotlibrc
matplotlib.pyplot.ioff() 
```

# gcc - 检查 librt 链接

> ID：15061141
> 
> 赞同：0
> 
> 时间：2013-02-25T06:14:52.660
> 
> 标签：gcc, conditional-compilation, librt

是否有一个宏可以`#ifdef`用来检查 librt 是否已链接到，即通过`-lrt`gcc？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:51:53.743

不，gcc 没有这样的宏（我已经转储了预处理器宏来检查）。在带有 Microsoft 编译器的 Windows 上，您可以使用`_VC_NODEFAULTLIB`宏来检测构建而无需`libc`参考。

# bookmarks - jsf1.2如何实现书签？

> ID：15061143
> 
> 赞同：0
> 
> 时间：2013-02-25T06:15:09.983
> 
> 标签：bookmarks, jsf-1.2

在我使用的应用程序中，`JSF1.2`我有两个 jsp 页面，其中一个是`allemployee.jsp`我放置了一个`<h:dataTable>`with `100 rows`。每个都包含员工的`name`, `phone No`,`experience`等等......第二页是 `detail.jsp`我显示单个员工的详细信息的地方。在每一行中`allemployee.jsp`都有一个`<h:commandLink>`with value `employee's name`。单击此按钮后`<h:commandLink>`，将在 中显示相应员工的详细信息`detail.jsp`。现在`detail.jsp`我有一个`<h:commandButton>`名为`Go Back`. 我希望单击此`button`用户后，将进入`allemployee.jsp`他/她跳到的上一个位置`detail.jsp`。

我的`allemployee.jsp`样子：

```
<h:form>
    <h:dataTable id="employeeList" value="#{employeelist.employees}" var="employee" cellspacing="60">
        <f:facet name="header"><h:outputText value="#{msg.list}" /></f:facet>

        <h:column>
            <f:facet name="header"><h:outputText value="#{msg.name}"/></f:facet>
            <h:commandLink value="#{employee.name}" action="#{employeelist.getaction}" actionListener="#{employeelist.sendToDetail}">
                <f:param id="NamE" value="#{employee.name}" name="NamE"/>
            </h:commandLink>
        </h:column>

        <h:column>
            <f:facet name="header"><h:outputText value="#{msg.phn}" /></f:facet>
            <h:outputText value="#{employee.phNo}" />
        </h:column>

        <h:column>
                <f:facet name="header"><h:outputText value="#{msg.experience}" /></f:facet>
                <h:outputText value="#{employee.experiance}" />
        </h:column>
    </h:dataTable>
</h:form> 
```

我的`detail.jsp`样子：

```
<h:form>
<h:panelGrid columns="2">
    <h:outputLabel value="#{msg.name}" />
    <h:outputText value="#{detail.employee.name}" />

    <h:outputLabel value="#{msg.phn}" />
    <h:outputText value="#{detail.employee.phNo}" />

    <h:outputLabel value="#{msg.experience}" />
    <h:outputText value="#{detail.employee.experiance}" />
</h:panelGrid>
    <h:outputLink value="/allemployee.jsp#paramName">
        <f:param name="paramName" value="#{detail.employee.name}"/>
        <h:outputText value="Go Back" />
    </h:outputLink> 
```

`employeelist`豆看起来像：

```
public class EmployeeListController implements Serializable {

private static final long serialVersionUID = 6930161072142091260L;

private List<EmployeeModel> employees;

@PostConstruct
public void init() {
    Service service = new Service();
    this.employees = service.getAll();
}

public void sendToDetail(ActionEvent ev) {
    String name = (String)FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("NamE");
    for (EmployeeModel employee : employees) {
        if (employee.getName().equals(name)) {
            HttpServletRequest req = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
            req.setAttribute("employe", employee);
        }
    }
}

public String goback(){
    return "allemployee";
}

public String getaction() {
    return "detail";
}
//getter & setter of  employees. 
```

类中`EmployeeModel`有变量`name`、、getter 和setter。在课堂上，我设置了所有员工的详细信息。`phNo``experience``Service`

我的`detail`Bean 看起来像：

```
public class DetailController implements Serializable {
private static final long serialVersionUID = 8632585974603579268L;

private EmployeeModel employee = new EmployeeModel();
private String paramName;
public DetailController() {

}

@PostConstruct
public void init() {
    HttpServletRequest req = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
    this.employee = (EmployeeModel) req.getAttribute("employe");
    this.paramName = employee.getName();
    }

// getter & setter employee and paramName. 
```

}

`faces-config`就好像 ：

```
<managed-bean>
<managed-bean-name>detail</managed-bean-name>
<managed-bean-class>com.edfx.controller.DetailController</managed-bean-class>
<managed-bean-scope>request</managed-bean-scope>
 <managed-property>
    <property-name>paramName</property-name>
    <value>#{param.paramName}</value>
 </managed-property>
</managed-bean>

<managed-bean>
<managed-bean-name>employeelist</managed-bean-name>
<managed-bean-class>com.edfx.controller.EmployeeListController</managed-bean-class>
<managed-bean-scope>request</managed-bean-scope>
</managed-bean>

<navigation-rule>
<display-name>allemployee.jsp</display-name>
<from-view-id>/allemployee.jsp</from-view-id>
<navigation-case>
    <from-outcome>detail</from-outcome>
    <to-view-id>/detail.jsp</to-view-id>
</navigation-case>
</navigation-rule> 
```

我怎样才能满足我的要求？任何指针都会对我很有帮助。谢谢，

# ruby - 注释字符串以修复 emacs ruby 模式突出显示

> ID：15061144
> 
> 赞同：0
> 
> 时间：2013-02-25T06:15:18.000
> 
> 标签：ruby, emacs, comments, syntax-highlighting

有时，文本编辑器为语法高亮所做的解析是不准确的。经常发生在 ruby​​ 模式中引入 heredoc 会混淆 emacs 上的语法突出显示，就像在[这个问题](https://stackoverflow.com/questions/5165132/emacs-syntax-highlight-under-ruby-mode-wont-work-with-operator)中一样。我对这种情况有疑问：

```
<<_
  some here doc content
  ...
  last line of the intended heredoc
_
this_ruby_code_line_and_any_line_after_it_is_highlightened_as_part_of_heredoc 
```

我不希望为此修复 emacs ruby​​-mode，但是为了重置突出显示问题，我通常可以在 heredoc 和以下 Ruby 代码之间放置某种注释字符串吗？当我遇到的问题不是heredoc而是时髦的字符串文字（尤其是那些包括引号的文字）时，有时会放置一个注释字符串，例如

```
#"'` 
```

在行尾解决了这个问题。有没有这样的东西可以解决heredoc的问题，此外，是否有一个可以更普遍使用的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:46:33.683

在 Emacs 主干构建中对我来说效果很好。

尝试更新的 Emacs 版本（我很确定这适用于即将发布的 24.3 版本，但也可能适用于当前版本）和/或确保您使用的是`ruby-mode`与 Emacs 捆绑在一起的，而不是通过 ELPA 安装等：

```
ELISP> (require 'which-func)
which-func
ELISP> (find-library-name "ruby-mode")
"/home/gutov/emacs-bzr/trunk/lisp/progmodes/ruby-mode.el" 
```

# linux - linux 文件名（完整路径）编码

> ID：15061148
> 
> 赞同：0
> 
> 时间：2013-02-25T06:15:36.207
> 
> 标签：linux, file, encoding, filenames

我想编码linux文件名（完整路径），有什么方法吗？例如：输入：（这样的目录结构：）

```
/root/
/root/fileA.txt
/root/dir/
/root/dir/fileB.txt 
```

编码后：（就像这样，人类可读不是必需的）

```
%root%
%root%fileA.txt
%root%dir%
%root%dir%fileB.txt 
```

并使用这些新名称作为新文件名，我可以将这些文件放入一个目录中。像这样之后：

```
/root1/%root%
/root1/%root%fileA.txt
/root1/%root%dir%
/root1/%root%dir%fileB.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:48:07.507

这是一个诡计的方式。我使用 mktemp 函数来生成新的文件名。

# java - 客户端消费者未收到 JMS 回复

> ID：15061149
> 
> 赞同：1
> 
> 时间：2013-02-25T06:15:36.830
> 
> 标签：java, jms, glassfish-3

我有一个向 JMS MDB 发送请求的客户端。它可以很好地向 MDB 发送消息*，*但我无法终生弄清楚如何让客户端接收 MDB 发回给它的响应。

编辑：客户端代码是同一实例上的 Web 服务，使用`@WebService`. 我不知道这是否会有所不同（例如交易），但除了这个问题之外，它似乎有效。

MDB 代码：

```
private void sendReply(String replyData, javax.jms.Message requestMessage)
{
    try
    {
        logger.info("sendReply message received had ID: " + requestMessage.getJMSMessageID());
        logger.info("sendReply message getJMSReplyTo: " + requestMessage.getJMSReplyTo());

        Session session = connection.createSession(false, javax.jms.Session.AUTO_ACKNOWLEDGE);

        final Queue replyQueue = (Queue) requestMessage.getJMSReplyTo();
        MessageProducer producer = session.createProducer(replyQueue);
        producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);

        TextMessage message = session.createTextMessage();
        message.setText(replyData);
        message.setJMSCorrelationID(requestMessage.getJMSMessageID());

        producer.send(message, DeliveryMode.PERSISTENT, 9, 60000);
        producer.close();

        logger.info("sendReply message returned had ID: " + message.getJMSMessageID());

        session.close();

        logger.debug("sendReply sent reply containing:\n" + replyData);
    }
    catch (Throwable e)
    {
        logger.warn("Exception in sendReply(): " + stackToString(e));
    }
} 
```

客户代码：

```
connection = connectionFactory.createConnection();
session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
MessageProducer producer = session.createProducer(requestQueue);

Message message = null;

// Snip creation of message

producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
final Queue replyQueue = session.createTemporaryQueue();
message.setJMSReplyTo(replyQueue);
consumer = session.createConsumer(replyQueue);  
producer.send(message);
producer.close();

log.info("call message transmitted had  Message ID: " + message.getJMSMessageID());

TextMessage replyMessage = (TextMessage)consumer.receive(JMS_REPLY_TIMEOUT); // 30 seconds

log.info("call message returned had Correlation ID: " + replyMessage.getJMSCorrelationID());
log.info("call message returned had     Message ID: " + replyMessage.getJMSMessageID()); 
```

每次我运行它时，该行`TextMessage replyMessage = (TextMessage)consumer.receive(JMS_REPLY_TIMEOUT);`都会返回 null。每一次。我究竟做错了什么？MDB代码运行成功——日志消息全部输出相关数据，MDB收到的消息内容符合预期。只是这条回复消息让我无法上班。

我已经使用以下代码浏览了临时队列，并且看到了消息！检查消息 ID，我发送的回复消息*肯定*在队列中，但调用`consumer.receive(JMS_REPLY_TIMEOUT)`仍然返回 null ......我根本无法弄清楚发生了什么。

```
log.info("Browsing Queue");
QueueBrowser browser = session.createBrowser(replyQueue);
final Enumeration<?> en = browser.getEnumeration();
while (en.hasMoreElements()) {
    Message m = (Message) en.nextElement();
    log.info("Found message in Queue with Browser with ID [{}] and CorrelID [{}]", m.getJMSMessageID(), m.getJMSCorrelationID());
}
browser.close(); 
```

我正在使用 Java 1.7.0_04 64 位的 Ubuntu 10.04 上运行 Glassfish 3.1.2.2。

编辑：我也尝试将发送和接收拆分为单独的事务，如下所示：

```
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
private void sendMessage(final Session session, final Message message) throws JMSException {
    // Create a MessageProducer from the Session to the Topic or Queue
    final MessageProducer producer = session.createProducer(requestQueue);

    try {
        producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);

        producer.send(message);
    }
    finally {
        producer.close();
    }
}

@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
private TextMessage receiveMessage(Session session, Destination replyQueue) throws JMSException {
    final MessageConsumer consumer = session.createConsumer(replyQueue);
    try {
        final TextMessage m = (TextMessage)consumer.receive(JMS_REPLY_TIMEOUT);
        return m;
    }
    finally {
        consumer.close();
    }
} 
```

这并没有解决我的问题，尽管我承认我不确定这是否是我需要做的所有事情来确保这些方法中有新的交易。

编辑：修改接收方法：

```
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
private TextMessage receiveMessage(Session session, Destination replyQueue) throws JMSException {
    final MessageConsumer consumer = session.createConsumer(replyQueue);
    try {
        log.info("Receiving message on Queue [{}]", replyQueue);
        final TextMessage m = (TextMessage)consumer.receive(JMS_REPLY_TIMEOUT);
        log.info("Received message [{}]", m);
        log.info("Browsing Queue");
        QueueBrowser browser = session.createBrowser((Queue) replyQueue);
        final Enumeration<?> en = browser.getEnumeration();
        while (en.hasMoreElements()) {
            Message mess = (Message) en.nextElement();
            log.info("Found message in Queue with Browser with ID [{}] and CorrelID [{}]", mess.getJMSMessageID(), mess.getJMSCorrelationID());
        }
        browser.close();
        return m;
    }
    finally {
        consumer.close();
    }
} 
```

我得到的日志输出是：

```
20130225200939808 CLIENT heartBeat Called.
20130225200939808 CLIENT heartBeat Sending Message...
20130225200940020 CLIENT callMAPSWebServiceMDB building TextMessage
20130225200940057 CLIENT Sending message
20130225200940064 CLIENT Sent message
20130225200940067 CLIENT message transmitted had  Message ID: ID:1-192.168.2.105(b5:49:dd:bf:5b:a6)-1-1361776180058
20130225200940077 CLIENT Receiving message on Queue [Oracle GlassFish(tm) Server MQ Destination
getName():      temporary_destination://queue/192.168.2.105/3170601277394174976/1
Class:          com.sun.messaging.jms.ra.TemporaryQueue
getVERSION():       3.0
isReadonly():       false
getProperties():    {imqDestinationName=temporary_destination://queue/192.168.2.105/3170601277394174976/1, imqDestinationDescription=A Description for the Destination Object}]
20130225200940183 SERVER Message Received
20130225200940757 SERVER Function called is: [heartBeat]
20130225200950759 SERVER sendReply message received had ID: ID:1-192.168.2.105(b5:49:dd:bf:5b:a6)-1-1361776180058
20130225200950760 SERVER sendReply message getJMSReplyTo: Oracle GlassFish(tm) Server MQ Destination
getName():      temporary_destination://queue/192.168.2.105/3170601277394174976/1
Class:          com.sun.messaging.jms.ra.TemporaryQueue
getVERSION():       3.0
isReadonly():       false
getProperties():    {imqDestinationName=temporary_destination://queue/192.168.2.105/3170601277394174976/1, imqDestinationDescription=A Description for the Destination Object}
20130225200950777 SERVER Sending reply message
20130225200950779 SERVER Sent reply message
20130225200950780 SERVER sendReply message returned had ID: ID:2-192.168.2.105(b5:49:dd:bf:5b:a6)-1-1361776190777
20130225200950781 SERVER MAPSWebServiceMDB Message Done
20130225201010078 CLIENT Received message [null]
20130225201010080 CLIENT Browsing Queue
20130225201010092 CLIENT Found message in Queue with Browser with ID [ID:2-192.168.2.105(b5:49:dd:bf:5b:a6)-1-1361776190777] and CorrelID [ID:1-192.168.2.105(b5:49:dd:bf:5b:a6)-1-1361776180058] 
```

因此，尽管在队列中等待了 30 秒，但我并没有收到一直在队列中的消息。所以*出了点*问题。这是我正在做的事情吗？还是 Glassfish 的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T13:03:16.093

你必须添加

> 连接.start();

能够收到响应。

# android - air/android/device/runtime.apk 处的错误 SDK 组件已过期

> ID：15061151
> 
> 赞同：2
> 
> 时间：2013-02-25T06:15:49.577
> 
> 标签：android, air, flash-builder

打包 AIR 应用程序时出现以下错误。

```
Error occurred while packaging the application:

SDK component at air/android/device/Runtime.apk is out of date. 
```

![在此处输入图像描述](../Images/01dc9f70247c14ddd58f3e8985bc569e.png)

这发生在创建发布版本的最后一步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:29:47.750

我不确定问题是什么，但它只是有时会发生，但如果我等待或再试一次，它会起作用。也许 Flash Builder 会在一个周期内刷新并且我运行它过于频繁，或者如果我在它即将到期的步骤之间等待太久？当我知道更多时，我会回复。

**更新**
如果你创建一个发布版本然后你去喝杯咖啡然后回来它就行不通了。如果您在编译步骤完成后留下并且没有喝咖啡并点击下一步按钮，那么它可以工作。它与咖啡不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T09:51:37.237

我找不到这个问题的根本原因，但是将我的 AIRSDK 更新到 3.8 beta 有所帮助。

[http://labs.adobe.com/technologies/flashruntimes/air/](http://labs.adobe.com/technologies/flashruntimes/air/)

# c# - 如何使 TXT 文件与列表保持同步

> ID：15061152
> 
> 赞同：0
> 
> 时间：2013-02-25T06:15:53.243
> 
> 标签：c#, io

所以，我正在用 C# 制作一个基于文本的游戏，并且我正在创建一个配置文件功能。它在第一次执行时已经创建了一个新的 TXT 文件并将其存储在 appdata 文件夹中。现在，这是该 TXT 文件中的内容；

```
NAME=[$]
REP=[0] 
```

'NAME' 运算符用于个人别名，是我目前正在处理的。我需要它做的是输入命令；

```
alias Example 
```

它将修改一个列表，其中包含与 TXT 文件同步的内容。我尝试了很多很多不同的方法，包括；

```
case "alias":
    string joined = string.Join(",", profileList.ToArray());
    string[] joineone = joined.Split(',');

    profileList.Clear();
    foreach (string var in joineone)
    {
        if (var.StartsWith("NAME"))
        {
            var.Replace(getStringBetween(var, "[", "]"), preCut[1]);
        }
        profileList.Add(var);
    }
    Invoke(new _rewriteProfile(rewriteProfile));
    break; 
```

和一个更短的版本；

```
profileList[0].Replace(getStringBetween(profileList[0],"=[", "]"), preCut[1]); 
```

`profileList`与 TXT 文件同步的文件在哪里，并`getStringBetween`在两个字符之间获取一个字符串。它还连接到替换，用第一个“剪切”替换它，在这种情况下是“示例”。问题是，它永远不会改变。文本在列表中只是没有改变。我不知道为什么。顺便说一句，我正在使用 .NET 2.0。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:22:30.167

检查 txt 文件是否为只读……或者您的方法 (getStringBetween) 没有返回任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:23:34.003

var = var.Replace(getStringBetween(var, "[", "]"), preCut[1]);

# php - 这个乌龟 svn 存储库的 URL 是什么？

> ID：15061153
> 
> 赞同：2
> 
> 时间：2013-02-25T06:16:06.860
> 
> 标签：php, tortoisesvn

使用 TortoiseSVN，我在 htdocs 目录（Apache Web 服务器和 PHP）中创建了一个“存储库”文件夹。打开的 repo-browser 在其中包含了一些文件。本地网址是：

```
http://127.0.0.1:8080/repository/project 
```

现在我想将文件检出到工作文件夹中。当我尝试提供 URL`http://127.0.0.1:8080/repository/project`时，它不起作用？

这是我第一次使用 URL (http://)。以前我一直在成功使用 file:// 。也使用了 VisualSVN（用于 http://），但直接使用 Tortoise 进行，对我来说似乎是一个更好的主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:05:52.193

试试这个链接老兄[Work with Visual SVN Server & Tortoise SVN](http://rajibmahmud.wordpress.com/2009/01/09/work-with-visual-svn-server-tortoise-svn/)。这是如何安装 Visual SVN Server + Tortoise SVN 客户端应用程序以及如何配置它们的分步过程。

对于我的 Tortoise Url，我正在使用`https://fullcomputername/svn/NameofYourRepository`或者可以在您的 Visual SVN 服务器管理器中找到它。我提供给您的链接将指导您如何找到它。:)

强烈建议将 TortoiseSVN 与 VisualSVN 一起使用，因为它们可以很好地协同工作，请参阅[此处](http://www.visualsvn.com/visualsvn/testimonials/)的 VisualSVN 推荐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T13:12:25.283

1.  在 web 空间内创建存储库**不会自动将此存储库转换**为由 Apache 提供的 http 服务
2.  单个 Apache 实例**可以同时是**普通的 Web 服务器和 SVN|WebDAV 的后端

您必须阅读[SVN Book](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.httpd.html)并配置您的 Apache 才能拥有 http-repositories

# javascript - 无法将参数添加到 url

> ID：15061154
> 
> 赞同：0
> 
> 时间：2013-02-25T06:16:07.487
> 
> 标签：javascript

我想向 url 添加参数，因为我有 2 个文本框和一个按钮，我无法弄清楚我卡在哪里并且无法向 url 添加参数
这是我的代码：

HTML：

```
Param Name: <input id="tbAddParam" type="text" /><br>
Param Value: <input id="tbAddParamValue" type="text" /><br>
<input onclick="javascript:AddParamter();" value="Add" type="button" /> 
```

JavaScript：

```
function AddParamter() {
    var new_url = AddUrlParameter(window.location.href, document.getElementById('tbAddParam').value, document.getElementById('tbAddParamValue').value);
    window.location.href = new_url;
}

function AddUrlParameter(a, b, c) {
    if (b.trim() == "") {
        alert("Parameter name should not be empty.");
        return a;
    }
    if (c.trim() == "") {
        alert("Parameter value should not be empty.");
        return a;
    }
    if (a.indexOf("?") == -1) {
        return a + "?" + b + "=" + c;
    }
    var d = a.split("?");
    if (d.length >= 2) {
        if (d[1].trim() == "") {
            return d[0] + "?" + b + "=" + c;
        }
        var e = d[1].split(/[&;]/g);
        for (var f = 0; f < e.length; f++) {
            var g = e[f]; var h = g.split("=");
            if (h.length >= 2) {
                if (h[0] == b) {
                    alert("Url Parameter with provided name already exists! Try Updating that Url Parameter.");
                    return a;
                }
            }
        }
        return a + "&" + b + "=" + c;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:38:16.833

在 IE 中运行时（我在 IE 10 中对此进行了测试），您需要允许被阻止的内容才能运行 JavaScript。否则将不允许 JavaScript 运行。Luiggi Mendoza 对 IE 9 提出了同样的建议。

值得注意的是，这在 Chrome 和 FireFox 中运行良好，无需任何用户确认允许 JavaScript 运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:40:35.203

IE 不喜欢“.trim()”。我在 IE8 中使用 IE8 兼容模式进行了测试，您的代码由于修剪而无法正常工作。虽然我认为 IE9 很好（正如 Luigi 的确认所指出的那样）。

改用这样的东西：

```
strReplace=str.replace(/^\s+/,'').replace(/\s+$/,''); 
```

您可以通过以下方式解决它：

```
function stripWhiteSpace(arg){
   if(arg.replace(/^\s+/,'').replace(/\s+$/,'') == ""){
      return true;
   }
} 
```

然后只需调用它并传递您的参数

```
if (stripWhiteSpace(b)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T06:45:33.157

从上面的评论：

我已经测试了您的代码并为我工作（如果页面以 html、jsp 或 .something 结尾）。这是使用 Chrome v25 测试的。

后来，我在 IE9 上进行了测试，它在为本地执行页面启用脚本执行后工作。进入 IE 时会弹出一条消息。在 IE9 中，底部显示*Internet Explorer 限制此网页运行脚本或 ActiveX 控件。*在右边有这个选项*允许被阻止的内容。*.

对于 IE 向后兼容性，您似乎应该替换[james emanon's answer](https://stackoverflow.com/a/15061414/1065197)`d[1].trim()`中所述的内容。

作为建议，至少使用两个浏览器来测试您的网页。是的，我强烈建议在 IE 上进行测试，因为它会给你一个*很好*的（？）反馈，因为它对脚本错误如此敏感（它会出现很多错误，Chrome 和 Firefox 会为你覆盖）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T07:25:08.327

我支持@rhughes 的回答。但是，如果您在 IE8 中测试此代码（我正在使用此代码，但您的代码无法正常工作）及以下，HTML trim() 将无法正常工作。由于您在 3 个地方有 trim()，因此您必须使用以下内容。

```
if(typeof String.prototype.trim !== 'function') {
  String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g, ''); 
  }
} 
```

或者您可以更轻松地使用 jQuery trim()

```
$.trim() 
```

[参考 1](https://stackoverflow.com/questions/2308134/trim-in-javascript-not-working-in-ie)

[参考2](http://api.jquery.com/jQuery.trim/)

# jakarta-ee - 如何降级 Java EE 站点的 JDK 版本

> ID：15061157
> 
> 赞同：0
> 
> 时间：2013-02-25T06:16:39.497
> 
> 标签：jakarta-ee, tomcat, servlets, java, jdk1.5

我试图托管我的 java 应用程序。但是服务器只有Tomcat 5.5.4 和JDK 1.5 版本。我构建的 Java EE 应用程序有 Tomcat 7.0.34 和 JDK 1.7。现在我被告知要降级 JDK 和 Tomcat 版本。有没有人知道降级相同。我也想知道JDK 5.5.4支持的Java EE和Servlet版本是什么

如果我只将JDK版本更改为1.5并保持Tomcat版本为7.0.34就足够了吗？它会在Tomcat版本为5.5.4的服务器上运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:56:37.360

我必须将代码降级以与 Tomcat 5 和 JDK 1.5 兼容，然后你不能只将代码降级到 JDK 1.5。您还需要降级到 Tomcat 5。

不过，我建议您寻找另一位主持人。JDK 1.6 ((Java SE 6) 已经停产了。1.5 据说是*古老*的。永远不要相信一个将古老技术强加给你的主机！

# node.js - 如何在 NodeJS/Express/Jade 中正确使用 dev 和 prod 资产

> ID：15061158
> 
> 赞同：4
> 
> 时间：2013-02-25T06:16:40.687
> 
> 标签：node.js, express, pug

我有一个 NodeJS 应用程序，它具有基于 Express 的结构和用于视图的 Jade 模块。我需要在开发机器上使用我的资产的完整版本，在生产机器上使用最小版本。

你能解释一下我应该如何正确地做到这一点的最佳实践吗？

**编辑：**如果你减号，请描述原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:34:13.167

不知道为什么没有“官方”的方式来做到这一点（与 Ruby on Rails 相比）。

这里有一些建议：

## DIY

到目前为止，这是我一直在做的事情：

在服务器启动时，我对所有 js 文件（在 .../js 下，并在 .../min 下创建缩小版本）运行 uglify-js，如下所示（省略文件的读/写）：

```
 var jsp = require('uglify-js').parser;
    var pro = require('uglify-js').uglify;
    var ast = jsp.parse(code.toString('utf8'));  // parse code and get the initial AST
    ast = pro.ast_mangle(ast);  // get a new AST with mangled names
    ast = pro.ast_squeeze(ast);  // get an AST with compression optimizations
    var final_code = pro.gen_code(ast); // compressed code here 
```

然后在 html 模板中，基于一些环境变量来触发生产环境，我生成`<script>`标签的路径以指向 .../js 或 .../min。

这遗漏了很多内容（您可以将所有 js 文件组合成一个最小化的文件以减少浏览器查询等的数量），但希望这可以帮助您制定自己的策略。

## 打桩机

也就是说，我一直想尝试piler（[https://github.com/epeli/piler](https://github.com/epeli/piler)），这似乎是DYI方式的更好替代方案。

## 使用咕噜声

Grunt.js ( [http://gruntjs.com/](http://gruntjs.com/) ) 也非常适合帮助预处理文件 (html, js, css, ...)

这里有几个指针：

*   grunt-recess：[https](https://github.com/sindresorhus/grunt-recess) ://github.com/sindresorhus/grunt-recess （如果你少用的话特别有趣）
*   [如何配置 grunt.js 以分别缩小文件](https://stackoverflow.com/questions/13358680/how-to-config-grunt-js-to-minify-files-separately)
*   处理 HTML 文件并生成优化文件部署目录的 Grunt 任务 ( [https://gist.github.com/necolas/3024891](https://gist.github.com/necolas/3024891) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:32:41.683

我将缩小视为构建步骤，并且不希望在运行时给应用程序带来负担。因此，我会设置我的 HTML 文件以引用从构建工具生成的文件路径，然后使用构建工具来确定是否要缩小。

我实际上不需要自己设置条件，因为我不需要在浏览器中有未压缩的代码。使用 grunt setup 来监视源文件并自动重新编译，我可以编辑 JavaScript 源文件，它会自动重新构建并放置到适当的运行时位置。但是，我可以看到这对于单步执行代码很有用。IE 9 在其开发控制台中有一个格式化程序，可用于调试压缩代码，但我不确定这在浏览器中有多普遍。

如果我要在开发中跳过缩小，我会首先检查是否可以让 grunt uglify 任务使用环境变量或 npm 设置等配置设置来决定是否实际进行 uglify。如果那是不可能的，我会做一个名为“devBuild”的单独的咕噜任务，它会做除 uglify 之外的所有事情。

# jquery - 如何添加图像上传以及ajax jquery表单提交

> ID：15061162
> 
> 赞同：1
> 
> 时间：2013-02-25T06:16:46.407
> 
> 标签：jquery, ajax, codeigniter, image-upload

我正在使用 ajax jquery 提交表单。我想上传一张图片和其他字段。

是否可以更改我目前的脚本来完成它，或者我需要重做所有事情：-

我的jQuery是： -

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>

<script type="text/javascript">
    $(function () {
        $(".submit").click(function () {
            var article_title = $("#article_title").val();
            var article_body = $("#article_body").val();

            var dataString = 'article_title=' + article_title + '&article_body=' + article_body;

            if (article_title == '' || article_body == '') {
                $('.success').fadeOut(200).hide();
                $('.error').fadeOut(200).show();
            } else {
                $.ajax({
                    type: "POST",
                    url: "<?php echo site_url().'/main/submit_article'?>",
                    data: dataString,
                    success: function () {
                        //$('.success').fadeIn(200).show();
                        $('#article_form')[0].reset();
                        $('.error').fadeOut(200).hide();
                    }

                });
            }

            return false;
        });
    });
</script> 
```

我的 HTML 表单：-

```
<form name="article_form" id="article_form" class="article_form" method="POST" action="">
    <input type="text" name="article_title" id="article_title" placeholder="Title for your article" /> <!--<input type="file" name="pic" />-->
    <br>
    <textarea rows="12" name="article_body" id="article_body" placeholder="Tell your story"></textarea>
    <br>
    <input type="submit" name="submit" id="submit" value="Post" class="submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:27:11.580

为什么不使用`jQuery.form`插件。

这个插件允许有效地处理文件上传[**检查这里**](http://malsup.com/jquery/form/#file-upload)。

**用于清除字段**

```
$(':input','#myform').not(':button, :submit, :reset, :hidden')
.val('')
.removeAttr('checked')
.removeAttr('selected'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:01:53.033

将**enctype="multipart/form-data"**添加到您的表单元素中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:48:36.307

让我在这里为您节省时间，尝试：

上传[http://www.uploadify.com/](http://www.uploadify.com/)

或者你可以尝试：

Jquery 表单[malsup.com/jquery/form/](http://malsup.com/jquery/form/)

如果您需要进度条，多次上传，拖放 [https://github.com/valums/file-uploader](https://github.com/valums/file-uploader)

使用这些工具和插件并减轻压力。除非你有更好的主意，否则不要重新发明轮子。

# objective-c - connectiondidFinishLoading 调用了两次

> ID：15061164
> 
> 赞同：0
> 
> 时间：2013-02-25T06:16:54.803
> 
> 标签：objective-c, ipad, xcode4.5

我是 iphone 开发的新手。我可以在方法中使用数据。但`connectiondidFinishLoading`我看到“连接完成加载”方法被调用了两次。我不知道，我哪里出错了。这是我的代码

编辑代码：

再次调用了两次 connectionDidFinishLoading

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{

       if(textField==CompanyName)
    {

        autocompleteTableView.hidden = NO;

        NSString *substring = [NSString stringWithString:textField.text];
        substring = [substring stringByReplacingCharactersInRange:range withString:string];
        [self searchAutocompleteEntriesWithSubstring:substring];
        return YES;
        if([CompanyName.text length]==0)
        {
            autocompleteTableView.hidden = YES;
            [popoverController dismissPopoverAnimated:YES];

        }
    }
    return YES;
}

- (void)searchAutocompleteEntriesWithSubstring:(NSString *)substring
{
     data = [[NSMutableData alloc] init];
    self.receivedData = data;
    [data release];

    NSURL *jsonUrl =[NSURL URLWithString:[NSString stringWithFormat:@"http://xxxx=%@",substring]];
 NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:jsonUrl];

   connection = [[NSURLConnection alloc] initWithRequest:request                                                                 delegate:self ];
    //self.connection = connection;a
   }

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response

{

    [receivedData setLength:0];

}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data

{

     [receivedData appendData:data];

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection

{

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {

        parser = [[NSXMLParser alloc] initWithData:receivedData];
        currentHtmlElement=@"5";
        [parser setDelegate:self];
        [parser setShouldProcessNamespaces:NO];
        [parser setShouldReportNamespacePrefixes:NO];
        [parser setShouldResolveExternalEntities:NO];
        [parser parse];
        [parser release];

        if([arr4 count]!=0)
        {
            self.autocompleteUrls = [[[NSMutableArray alloc] init]autorelease];

            UIViewController* popoverContent = [[UIViewController alloc] init]; //ViewController

            self.autocompleteUrls = [[NSMutableArray alloc] init];

            viewForautoCompleteTableView = [[UIView alloc]initWithFrame:CGRectMake (410, 120,270, 250)];

            autocompleteTableView = [[UITableView alloc] initWithFrame:CGRectMake(0,0,270,250) style:UITableViewStyleGrouped];
            autocompleteTableView.delegate = self;
            autocompleteTableView.dataSource = self;
            autocompleteTableView.scrollEnabled = YES;
            autocompleteTableView.backgroundColor = [UIColor lightTextColor];
            autocompleteTableView.rowHeight=28;

            autocompleteTableView.backgroundView = nil;
            autocompleteTableView.backgroundColor = [UIColor whiteColor];

            autocompleteTableView.separatorStyle = UITableViewCellSeparatorStyleNone;
            [autocompleteTableView setSeparatorColor:[UIColor orangeColor]];
            [viewForautoCompleteTableView setFrame:CGRectMake(210,380 ,autocompleteTableView.frame
                                                              .size.width
                                                              ,autocompleteTableView.frame.size.height)];

                   [viewForautoCompleteTableView addSubview:autocompleteTableView];

            [viewForautoCompleteTableView setBackgroundColor:[UIColor whiteColor]];
            CGRect popoverFrame = viewForautoCompleteTableView.frame;
            popoverContent.view = viewForautoCompleteTableView;

            popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
            popoverController.delegate=self;
           [popoverContent release];        
            [popoverController setPopoverContentSize:CGSizeMake(viewForautoCompleteTableView.frame.size.width, viewForautoCompleteTableView.frame.size.height) animated:NO];

                       [popoverController presentPopoverFromRect:popoverFrame inView:testscroll permittedArrowDirections:0 animated:YES];

            [autocompleteUrls removeAllObjects];
            for(int i=0;i<[arr4 count];i++)
            {
                NSString *curString = [[arr4 objectAtIndex:i] valueForKey:@"Name"];
                [autocompleteUrls addObject:curString];
                           }

        }
    [autocompleteTableView reloadData];
        [connection cancel];

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:51:26.970

您应该删除 `[connection start];`，因为连接将在之后自动启动`NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:selfstartImmediately:NO];`

**编辑** 有效的`NSURLConnection`初始化

```
 NSURLRequest *request =[[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@""]];

        [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

# django - django startapp 管理文件丢失

> ID：15061166
> 
> 赞同：3
> 
> 时间：2013-02-25T06:17:07.077
> 
> 标签：django

我一直在关注 DjangoProject 教程。当我 `python manage.py startapp newapp` 在与`manage.py`. 在 newapp 目录中，我看到`init.py`、`models.py`、`tests.py`，`views.py`但没有看到`admin.py`文件。在哪里`admin.py`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T06:19:10.060

您必须自己创建它。

编辑：

`admin.py`目前只有 Django 的开发版本会在新应用程序中创建文件。

# java - 使用 setText 方法时出错

> ID：15061176
> 
> 赞同：1
> 
> 时间：2013-02-25T06:18:14.070
> 
> 标签：java, android, macos, macros, android-logcat

这是我的代码：

```
public class NoteView extends FragmentActivity implements CustomDialogFragment.CustomDialogListener {
private Uri mUri;
private String[] projection = { NotepadContract.Notes.COLUMN_NAME_NOTE,
        NotepadContract.Notes.COLUMN_NAME_TITLE };
private TextView mTextView;

private String content;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.note_view);
    mTextView = (TextView) findViewById(R.id.text_body);
    // Show the Up button in the action bar.
    getActionBar().setDisplayHomeAsUpEnabled(true);
    Intent intent = getIntent();
    mUri = intent.getData();
    // String action=intent.getAction();
    // if ("com.yuyizhao.NoteView".equals(action)) System.out.println(mUri);
    Cursor mCursor = getContentResolver().query(mUri, projection, null,
            null, null);
    int index_note = mCursor
            .getColumnIndexOrThrow(NotepadContract.Notes.COLUMN_NAME_NOTE);
    System.out.println(index_note);

    int index_title = mCursor
            .getColumnIndexOrThrow(NotepadContract.Notes.COLUMN_NAME_TITLE);
    System.out.println(index_title);
    if (mCursor != null) {
        while (mCursor.moveToNext()) {
            content = mCursor.getString(index_note);
            setTitle(mCursor.getString(index_title));
            System.out.println(mCursor.getString(index_title));
            System.out.println(mCursor.getString(index_note));

        }
    }
    mTextView.setText(content);

} 
```

布局 xml 文件：（note_view xml）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/view_body"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:scrollbars="vertical"
        android:textIsSelectable="true"
        android:textSize="@dimen/font_medium" />

</LinearLayout> 
```

这些是我在 logcat 中收到的错误消息。我已经尝试了很多次，但仍然遇到同样的错误。首先我打印笔记的索引和内容。这些是正确的。但是当我使用 setText() 将内容放入 TextView 小部件时会出现错误。

```
02-25 06:25:48.132: I/ActivityManager(289): START u0 {act=com.yuyizhao.NoteView dat=content://com.yuyizhao.notepad_yuyizhao.provider/notes/1 cmp=com.yuyizhao.notepad_yuyizhao/.NoteView} from pid 2243
02-25 06:25:48.482: D/dalvikvm(289): GC_FOR_ALLOC freed 1176K, 31% free 12125K/17420K, paused 92ms, total 104ms
02-25 06:25:48.522: I/Choreographer(2243): Skipped 30 frames!  The application may be doing too much work on its main thread.
02-25 06:25:48.803: I/System.out(2243): 0
02-25 06:25:48.803: I/System.out(2243): 1
02-25 06:25:48.803: I/System.out(2243): wqdwqdqwdqwd
02-25 06:25:48.813: I/System.out(2243): wdqwdqwdqwdqwdwqdwddwq
02-25 06:25:48.823: D/AndroidRuntime(2243): Shutting down VM
02-25 06:25:48.823: W/dalvikvm(2243): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
02-25 06:25:48.863: E/AndroidRuntime(2243): FATAL EXCEPTION: main
02-25 06:25:48.863: E/AndroidRuntime(2243): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.yuyizhao.notepad_yuyizhao/com.yuyizhao.notepad_yuyizhao.NoteView}: java.lang.NullPointerException
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.os.Looper.loop(Looper.java:137)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at java.lang.reflect.Method.invokeNative(Native Method)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at java.lang.reflect.Method.invoke(Method.java:511)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at dalvik.system.NativeStart.main(Native Method)
02-25 06:25:48.863: E/AndroidRuntime(2243): Caused by: java.lang.NullPointerException
02-25 06:25:48.863: E/AndroidRuntime(2243):     at com.yuyizhao.notepad_yuyizhao.NoteView.onCreate(NoteView.java:53)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.Activity.performCreate(Activity.java:5104)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-25 06:25:48.863: E/AndroidRuntime(2243):     ... 11 more
02-25 06:25:48.913: W/ActivityManager(289):   Force finishing activity com.yuyizhao.notepad_yuyizhao/.NoteView
02-25 06:25:48.932: W/ActivityManager(289):   Force finishing activity com.yuyizhao.notepad_yuyizhao/.Notepad
02-25 06:25:49.252: E/SurfaceFlinger(37): ro.sf.lcd_density must be defined as a build property
02-25 06:25:49.442: W/ActivityManager(289): Activity pause timeout for ActivityRecord{40eed718 u0 com.yuyizhao.notepad_yuyizhao/.NoteView}
02-25 06:25:49.823: E/SurfaceFlinger(37): ro.sf.lcd_density must be defined as a build property
02-25 06:25:49.833: W/EGL_emulation(403): eglSurfaceAttrib not implemented
-25 06:25:48.132: I/ActivityManager(289): START u0 {act=com.yuyizhao.NoteView dat=content://com.yuyizhao.notepad_yuyizhao.provider/notes/1 cmp=com.yuyizhao.notepad_yuyizhao/.NoteView} from pid 2243
02-25 06:25:48.482: D/dalvikvm(289): GC_FOR_ALLOC freed 1176K, 31% free 12125K/17420K, paused 92ms, total 104ms
02-25 06:25:48.522: I/Choreographer(2243): Skipped 30 frames!  The application may be doing too much work on its main thread.
02-25 06:25:48.803: I/System.out(2243): 0
02-25 06:25:48.803: I/System.out(2243): 1
02-25 06:25:48.803: I/System.out(2243): wqdwqdqwdqwd
02-25 06:25:48.813: I/System.out(2243): wdqwdqwdqwdqwdwqdwddwq
02-25 06:25:48.823: D/AndroidRuntime(2243): Shutting down VM
02-25 06:25:48.823: W/dalvikvm(2243): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
02-25 06:25:48.863: E/AndroidRuntime(2243): FATAL EXCEPTION: main
02-25 06:25:48.863: E/AndroidRuntime(2243): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.yuyizhao.notepad_yuyizhao/com.yuyizhao.notepad_yuyizhao.NoteView}: java.lang.NullPointerException
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.os.Looper.loop(Looper.java:137)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at java.lang.reflect.Method.invokeNative(Native Method)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at java.lang.reflect.Method.invoke(Method.java:511)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at dalvik.system.NativeStart.main(Native Method)
02-25 06:25:48.863: E/AndroidRuntime(2243): Caused by: java.lang.NullPointerException
02-25 06:25:48.863: E/AndroidRuntime(2243):     at com.yuyizhao.notepad_yuyizhao.NoteView.onCreate(NoteView.java:53)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.Activity.performCreate(Activity.java:5104)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-25 06:25:48.863: E/AndroidRuntime(2243):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-25 06:25:48.863: E/AndroidRuntime(2243):     ... 11 more
02-25 06:25:48.913: W/ActivityManager(289):   Force finishing activity com.yuyizhao.notepad_yuyizhao/.NoteView
02-25 06:25:48.932: W/ActivityManager(289):   Force finishing activity com.yuyizhao.notepad_yuyizhao/.Notepad
02-25 06:25:49.252: E/SurfaceFlinger(37): ro.sf.lcd_density must be defined as a build property
02-25 06:25:49.442: W/ActivityManager(289): Activity pause timeout for ActivityRecord{40eed718 u0 com.yuyizhao.notepad_yuyizhao/.NoteView}
02-25 06:25:49.823: E/SurfaceFlinger(37): ro.sf.lcd_density must be defined as a build property
02-25 06:25:49.833: W/EGL_emulation(403): eglSurfaceAttrib not implemented 
```

有谁知道为什么我在使用`setText()`方法时会出现这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:21:42.147

没有足够的堆栈跟踪或错误报告，所以只是假设（发布完整的 statcktrace）

程序失败的许多可能性，无论`mTextView`是**NULL**。

或者可能是您的`String content`is **NULL**。

所以在做之前`mTextView.setText(content);`检查

```
if(content != null)
{
 mTextView.setText(content);
} 
```

**更新：**你`TextView mTextView` 是`NULL`因为，在 xml 中，id 名称是**view_body**而不是**text_body**

从改变

```
mTextView = (TextView) findViewById(R.id.text_body); 
```

到

```
mTextView = (TextView) findViewById(R.id.view_body); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:36:23.917

可能`TextView`是`null`。您的文本视图是否在`R.layout.note_view`.?

# php - 跨域文件夹使用

> ID：15061178
> 
> 赞同：1
> 
> 时间：2013-02-25T06:18:29.853
> 
> 标签：php, mysql, cross-domain

所以我正在用php和mysql开发一些软件。客户端 Web 应用程序托管在他们的服务器上，但基本上我想要一种简单的方法来关闭他们的网站，如果他们不付款的话。我希望能够在我的服务器上托管一个说配置文件，该文件可能包含一组数据，说明他们的订阅有多长时间，他们可以访问什么等等。我显然不想直接保存这些信息他们的服务器，因为他们可以操纵配置以获得他们想要的任何东西。它们是我会使用它的许多其他东西，但在大多数情况下，这些是最重要的部分。此外，如果有更好的方法，我总是愿意接受任何建议。

提前致谢！

# iphone - HTML按钮到本机桥iOS

> ID：15061181
> 
> 赞同：-1
> 
> 时间：2013-02-25T06:18:59.933
> 
> 标签：iphone, ios, native

我有一个包含多个按钮的 index.html 页面。我希望能够单击一个按钮，然后它会转到手机的本机端。调用它并在 HTML 页面上执行一些操作。我不知道该怎么做？

换句话说，我想从 HTML 转到 ios 原生动作和功能，例如调用相机、陀螺仪等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:58:57.700

您必须在您的 html 页面中进行一些更改。使用图像而不是按钮。然后在图像标签周围使用锚标签。

将 href 设置为“btn://btn1”或您想要识别按钮的内容。

前任。

```
<a href="btn://btn1"> <img src="test.png" ></a> 
```

在ios端：

1.将委托分配给您的 UIWebview。

2.实现以下方法

```
 //Method when bookmark button  pressed
    - (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType

    {

        if ([request.URL.scheme isEqualToString:@"btn"])
        {
             //Enter your Code here
        }
        return YES;

    } 
```

使用上述方法，您可以识别女巫按钮被点击，并据此您可以执行任何您想要的操作。

# android - 使用lazyloader滚动视图不能平滑滚动

> ID：15061183
> 
> 赞同：1
> 
> 时间：2013-02-25T06:19:12.133
> 
> 标签：android, android-listview, lazy-loading

嗨，我有来自 Web 服务的数据和图像。使用 AsynTask 获取所有数据，还使用惰性加载器类获取图像，并在列表视图中显示该数据。在初始屏幕之后，主屏幕数据显示在列表视图中。
但是在列表视图中滚动时出现了一些问题，它运行不顺畅是口吃。

我的适配器 java 文件

```
public class NewsScreenAdapter extends BaseAdapter implements OnTouchListener,Handler.Callback {

    LayoutInflater inflater;
   // public GifDecoderView webview1;
    public static  viewholder holder;
    View view = null;
    public Context context;
    public ImageLoader IL;
    public String imgUrl;
    public static String addurl;    
    public Activity activity;
    String image;
    public static String str;
    public static Date parsed;
    public static String ac, cat_id;

    private WebViewClient client;

    public NewsScreenAdapter(NewsScreenActivity a) {
        // TODO Auto-generated constructor stub

        this.context = a.getApplicationContext();
        this.activity = a;       
        inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        IL = new ImageLoader(activity.getApplicationContext());   
     }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        // return NewsScreenActivity.arrayList_header.size();

        return NewsScreenActivity.TotalDataArray.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public int getItemViewType(int position) {
        // TODO Auto-generated method stub
        return position;
    }
    @Override
    public int getViewTypeCount() {
        // TODO Auto-generated method stub
        return NewsScreenActivity.TotalDataArray.size();
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        View vi = convertView;

            holder = new viewholder();

            vi = inflater.inflate(R.layout.newsscren_row, null);
            holder.news_header_title = (TextView) vi.findViewById(R.id.header_title);
            holder.ll_data = (LinearLayout) vi.findViewById(R.id.data);

            vi.setTag(holder);

            // ------- set custom Font----- 
            Typeface typefont=Typeface.createFromAsset(context.getAssets(),"Times New Roman.ttf");
            holder.news_header_title.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                cat_id = NewsScreenActivity.arrayList_header.get(position);
                ac = ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray.get(position)).catId;

                activity.startActivity(new Intent(activity,CategoryActivity.class).putExtra("id", ac));

            }
        });

        holder.ll_data.removeAllViews();
      //  try {

              int  storyLenght = ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray.get(position)).storyArr.size();

       /* } catch (Exception e) {
            // TODO: handle exception
        }*/

        for (int i = 0; i < storyLenght; i++) {

            view = LayoutInflater.from(activity).inflate(R.layout.sub_row, null);

            holder.short_text = (TextView) view.findViewById(R.id.short_text);
            holder.image = (ImageView) view.findViewById(R.id.image);
            holder.des = (TextView) view.findViewById(R.id.des);
            holder.date_time = (TextView) view.findViewById(R.id.date_time);
            holder.llAdd = (LinearLayout) view.findViewById(R.id.sub_llAdd);
            holder.imgAdd = (WebView) view.findViewById(R.id.imgAdd);
            holder.imgAdd.setVerticalScrollBarEnabled(false);

            holder.short_text.setTypeface(typefont);
            holder.des.setTypeface(typefont);
            holder.date_time.setTypeface(typefont);
            holder.news_header_title.setTypeface(typefont);

        try{
             holder.image.setTag(NewsScreenActivity.arrayList_image.get(i));

                IL.DisplayImage(
                        ((NewsScreenActivity.ImagesData) ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                                .get(position)).storyArr.get(i)).imageArr.get(0)).smallurl, holder.image);

                notifyDataSetChanged();

            } catch (Exception e) {
                // TODO: handle exception
            }

        try {

        holder.short_text.setText(((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray.get(position)).storyArr.get(i)).title);
        holder.des.setText(((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray.get(position)).storyArr.get(i)).description);

            String st = ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                    .get(position)).storyArr.get(i)).date;
            parsed = new Date(Long.parseLong(st.substring(6, st.length() - 2)));

            SimpleDateFormat sdf = new SimpleDateFormat("MMM dd,yyyy hh:mmaa");

            String concat = sdf.format(parsed);
            String data = concat;
            String half1 = data.substring(0, 11);

            SimpleDateFormat display_date = new SimpleDateFormat("dd.MM.yyyy");

            String dis_date = display_date.format(parsed);

            String half2 = data.substring(11, 19);

            SimpleDateFormat currentdate = new SimpleDateFormat("MMM dd,yyyy");
            Date currunt = new Date();
            String day = currentdate.format(currunt);

            if (half1.equalsIgnoreCase(day) == true) {
                holder.date_time.setText(half2);

            } else {
                half1 = dis_date;
                holder.date_time.setText(half1);

            }     

            holder.news_header_title.setText(((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                            .get(position)).catDisplay);

            if (!((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                    .get(position)).storyArr.get(i)).advertising
                    .equalsIgnoreCase("null")) {

                 holder.short_text.setVisibility(view.GONE);
                 holder.date_time.setVisibility(view.GONE);
                 holder.des.setVisibility(view.GONE);

                imgUrl = ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                        .get(position)).storyArr.get(i)).adData.imageurl;

                // TODO Auto-generated method stub
                addurl = ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                        .get(position)).storyArr.get(i)).adData.targeturl;

                //-----------------GIF Image view ------------

                holder.imgAdd.setOnTouchListener(NewsScreenAdapter.this);

                    client = new WebViewClient(){ 
                        @Override public boolean shouldOverrideUrlLoading(WebView view, String url) { 
                            handler.sendEmptyMessage(CLICK_ON_URL);

                            return false;
                        } 
                    }; 

                    holder.imgAdd.setWebViewClient(client);
                    holder.imgAdd.setVerticalScrollBarEnabled(false);

                //    view.setVerticalScrollBarEnabled(false);

                holder.imgAdd.getSettings().setJavaScriptEnabled(true);

                holder.imgAdd.setWebChromeClient(new WebChromeClient() {
                        public void onProgressChanged(WebView view, int progress)
                        {

                            activity.setProgress(progress * 100);

                            if(progress == 100){}

                        }
                    });

                holder.imgAdd.setWebViewClient(new WebViewClient() {
                        @Override
                        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
                        {
                            // Handle the error
                        }

                        @Override
                        public boolean shouldOverrideUrlLoading(WebView view, String url)
                        {
                            view.loadUrl(url);
                            return true;
                        }
                    });

                holder.imgAdd.loadUrl(imgUrl);

            //  holder.imgAdd.setPadding(30, 20, 0, 20);

                holder.llAdd.setVisibility(View.VISIBLE);
              }

            holder.ll_data.addView(view);      

            view.setTag(position+"OK"+i);

            view.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    String tag = (String) v.getTag();
                    String[] arr = tag.split("OK");
                    int p = Integer.parseInt(arr[0]);
                    int i = Integer.parseInt(arr[1]);

                    str = ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray .get(p)).storyArr.get(i)).storyid;

                    Intent intent = new Intent(context,ShowFullDescriprion.class);
                    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                    intent.putExtra("id", str);
                    intent.putExtra("cat", p);
                    intent.putExtra("pos",i);
                    activity.startActivity(intent);
                }
            });
 } catch (Exception e) {
        // TODO: handle exception
                }
        }
        return vi;

    }

    public static String getDate(long milliSeconds, String dateFormat) {
        // Create a DateFormatter object for displaying date in specified
        // format.
        DateFormat formatter = new SimpleDateFormat(dateFormat);

        // Create a calendar object that will convert the date and time value in
        // milliseconds to date.
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(milliSeconds);
        return formatter.format(calendar.getTime());         
    }    
    public static class viewholder {

        TextView news_header_title, short_text, des, date_time;
        LinearLayout ll_data, llAdd;
        public ImageView image;
        WebView imgAdd;

    }
    private static final int CLICK_ON_WEBVIEW = 1;
    private static final int CLICK_ON_URL = 2;

    private Handler handler = new Handler(NewsScreenAdapter.this);

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
          if (v.getId() == R.id.imgAdd && event.getAction() == MotionEvent.ACTION_DOWN){
                handler.sendEmptyMessageDelayed(CLICK_ON_WEBVIEW, 500);
            }
            return false;
    }
    public boolean handleMessage(Message msg) {
        if (msg.what == CLICK_ON_URL){
            handler.removeMessages(CLICK_ON_WEBVIEW);

            return true;
        }
        if (msg.what == CLICK_ON_WEBVIEW){

            activity.startActivity(new Intent(activity, AdvertismentActivity.class).putExtra("id", addurl));

            return true;
        }
        return false;
    }

    /* public void clearAllResources() {

            // Set related variables null

            System.gc();
            Runtime.getRuntime().gc();
           }*/
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:28:34.443

ListView 滚动的核心是 getView() 方法。
优化 getView() 方法将导致更快/更流畅的滚动。[本视频](https://www.youtube.com/watch?v=wDBM6wVEO70)中介绍了一些技术。你有一个视频，如果你没有时间看它，你有一个**pdf 供下载**。

简而言之，它教您如何避免在不需要时在每次调用 getView() 时创建对象。
您的 getView()**始终**创建一个 TextView、一个 LinearLayout 和一个字体。只有当 convertview 为空时，您才应该创建所有这些，如果不是，则视图已经存在并且可以重用。
在链接的 pdf 中查找推荐的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:49:46.140

建议一：

从`getView`方法中删除此行`notifyDataSetChanged();`

在它的 getView 方法中更新适配器的编码真的很差。

建议二：

不要在每次访问 get View 时重新创建所有内容。

如果视图已经创建，那么就使用它。

检查此代码：[更新适配器代码](http://pastebin.com/rysAS2rA)

# jquery - Jquery 只工作一次

> ID：15061189
> 
> 赞同：0
> 
> 时间：2013-02-25T06:20:07.100
> 
> 标签：jquery

jquery 代码通过一个嵌套列表。一旦加载，它就可以很好地工作一次（切换类），但完全单击它不会重复。该课程将三角形子弹从左面切换为向下。我不知道如何让它重复。非常感谢任何帮助。

```
jQuery(document).ready(function() {
  jQuery(".list-year").click(function() {        
    jQuery(this).removeClass('list-year li');
    jQuery(this).addClass('list-year-down li');  
    jQuery('.list-month').toggle( function() {
        jQuery(".list-year-down").click(function() {
            jQuery(this).removeClass('list-year-down li');
            jQuery(this).addClass('list-year li'); 
        });
    });        
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:26:54.037

[使用.on()](http://api.jquery.com/on/)将事件处理程序附加到父元素，并将选择器作为参数传递。

尝试：

```
jQuery(document).ready(function() {
  jQuery(document).on('click, '.list-year', function() {        
    jQuery(this).removeClass('list-year li');
    jQuery(this).addClass('list-year-down li');  
    jQuery('.list-month').toggle( function() {
        jQuery(".list-year-down").click(function() {
            jQuery(this).removeClass('list-year-down li');
            jQuery(this).addClass('list-year li'); 
        });
    });        
  });
}); 
```

另请注意，对于 jQuery 1.9.1 +，toggle() 不会像以前那样工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:23:11.143

尝试

```
jQuery(".list-year").on('click',(function() { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T06:26:55.230

因为您删除了放置单击处理程序的 .class ，所以您将其删除 - 您松开了该绑定。执行上述 Dipesh 建议的操作，对 jQuery 1.7 或更高版本使用“.on”，否则您可以使用“.live”（已弃用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T06:28:02.110

尝试切换课程`.toggleClass()`：

```
jQuery(document).ready(function() {
  jQuery(".list-year").click(function() {        
    jQuery(this).toggleClass('list-year-down');
    jQuery('.list-month').toggle( function(e) {
      e.stopPropagation();
      jQuery(".list-year-down").click(function() {
        jQuery(this).toggleClass('list-year-down'); 
      });
    });        
  });
}); 
```

在默认情况下，将此类放到 lis 中：`list-year li`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T06:31:43.587

试试 :D

```
jQuery(document).ready(function() {
  jQuery(".list-year").click(function() {        

    jQuery(this).toggleClass('list-year list-year-down');

  });
}); 
```

# c# - 如何在 C# Winforms 中正确实现具有被动功能的模型视图演示器？

> ID：15061190
> 
> 赞同：0
> 
> 时间：2013-02-25T06:20:12.820
> 
> 标签：c#, design-patterns, mvp, passive-view

我现在正在研究设计模式，我对这个模型视图演示器相当陌生，虽然我已经在 asp.net mvc 方面有经验，但我正在尝试在 winforms 中实现 mvp。

文本框中的字符串将使用基于组合框的算法进行排序。现在，当我单击按钮时，它会引发空引用异常

这是用户界面：![在此处输入图像描述](../Images/d4b56e328d0b421bd282b16ace0cdb8d.png)

这是我的课程和代码：

```
 class FormPresenter
        {
            private ISortingView _view;
            private string _algorithm;
            private StringToSortModel sortMe = new StringToSortModel();

            public FormPresenter(ISortingView view)
            {
                _view = view;
                _view.sortTheString += view_sortString;
                sortMe.sortThis = view.stringToSort;
                _algorithm = _view.algorithm;
                //Algorithm = view.stringToSort;
                //sortingform.sortTheString += (obj
            }

            private void view_sortString(object sender, EventArgs e)
            {

                SortContext context = new SortContext();
                _view.sortedText = context.Sort(sortMe.sortThis.ToCharArray());

            }

        }

 interface ISortingView
    {
        event EventHandler sortTheString;
        string stringToSort { get; }
        string algorithm { get; }
        string sortedText { get; set; }

    }

     public partial class SortingForm : Form, ISortingView
        {
            public SortingForm()
            {
                InitializeComponent();
                comboBox1.Items.Add("Bubble Sort");
                comboBox1.Items.Add("Insertion Sort");
                comboBox1.SelectedItem = "Bubble Sort";
                textBox1.Text = "Emiri";
            }

            public event EventHandler sortTheString;
            public string algorithm { get { return comboBox1.SelectedItem.ToString(); } }
            public string stringToSort { get { return textBox1.Text; } }
            public string sortedText { get { return label2.Text; } set { label2.Text = value; } }

            private void Form1_Load(object sender, EventArgs e)
            {

            }

            private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
            {

            }

            private void button1_Click(object sender, EventArgs e)
            {
                //char[] x = textBox1.Text.ToCharArray();
                //SortContext con = new SortContext();
                //con.SetSortStrategy(new InsertionSort());
                //label2.Text = con.Sort(x);
                //if(sortString != null)
                //{

                //this prodcues a null exception error
                sortTheString(sender, e);

                //}

            }

    static class Program
        {
            /// <summary>
            /// The main entry point for the application.
            /// </summary>
            [STAThread]
            static void Main()
            {
                Application.EnableVisualStyles();
                Application.SetCompatibleTextRenderingDefault(false);
                var mainForm = new SortingForm();
                var presenter = new FormPresenter(mainForm);
                Application.Run(new SortingForm());

            }
        } 
```

我没有包含模型的代码和包含排序函数的类以保持这篇文章的简短。我遇到的问题是，单击按钮时会引发空引用异常错误，这是我已经坚持了几个小时的问题。

先生/女士，您的回答会很有帮助。谢谢++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:27:42.937

您的 null 来自此行

```
sortTheString(sender, e); 
```

因为您没有在 Presenter 中使用相同的表单实例。在您的主要内容中更改为...

```
Application.Run(mainForm); 
```

事件处理程序没有任何订阅者（因为`Application.Run(new SortingForm());`C# 会将其视为 null 而不是空的订阅者列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T06:02:52.293

```
ISortingView mainForm = new SortingForm();
var presenter = new FormPresenter(mainForm);
Application.Run(mainForm as Form); 
```

# asp.net - Asp.Net Mvc 4 和 Entity framework 5 代码优先数据库迁移

> ID：15061191
> 
> 赞同：1
> 
> 时间：2013-02-25T06:20:18.080
> 
> 标签：asp.net, asp.net-mvc, entity-framework, asp.net-mvc-4, entity-framework-5

我创建了一个互联网 asp.net Mvc 4 应用程序。它首先使用 EF5 代码，默认使用 LocalDB。我有以下问题。我将所有表都放在数据上下文类中`MyContext`，并在其上启用了数据库迁移。

1.  用户上下文。我`email`在表中添加了一个字段`UserProfile`。但是，我无法在默认情况下启用数据库迁移，`UsersContext`因为我已经在`MyContext`. 我不得不删除数据库并让它重新创建`UserProfile`表（我必须先打开用户注册页面，否则它将创建`UserProfile`没有字段`email`。）

2.  我将项目发布到带有 IIS/Sql Server 的服务器并继续处理该项目。但是，有时它显示模型`UsersContext`已更改（不是真的），我不得不删除实时服务器上的数据库并让它重新创建数据库。

3.  有时它会在表中创建两次相同的索引`MyContext`，但迁移失败。而且我不得不再次删除数据库以重新创建。

如何预防以上问题？上线后是否应该禁用数据库迁移？如何应用模型/数据库更改？

# javascript - Nodejs v0.8.20 with mongoosejs for nodejs for fetch query error without no response

> ID：15061192
> 
> 赞同：0
> 
> 时间：2013-02-25T06:20:37.770
> 
> 标签：javascript, node.js, mongodb, mongoose

我使用 nodejs 0.8.20 和 mongoosejs 进行 nodejs 获取查询。第一次它将获取带有数据结果的查询。但是下次使用相同的查询不会得到任何响应或错误消息。它将始终显示为空白。

如果我对这段代码做错了什么，请告诉我。

这是代码。

```
var schema_reviews =  {
"approved"      :"Number",
"comment"       :"String",
"item_id"       :"Number",
"timestamp"     :"Number",
"user_id"       :"Number",
"user_type"     :"String",
"username"      :"String"}

var reviews_schema      = new mongoose.Schema(schema_reviews);
var itemid = 54;
var reviews_model = db.model('reviews',reviews_schema);
reviews_model
.find({ 'item_id': itemid },function(err,review_lists){
    socket.emit('reponse_reviews',review_lists);
}); 
```

# wordpress - 主机服务器上的父画布 woo 主题出现 500 内部服务器错误

> ID：15061193
> 
> 赞同：0
> 
> 时间：2013-02-25T06:20:49.543
> 
> 标签：wordpress, wordpress-theming, woocommerce, woothemes

我正在使用 Canvas WordPress 主题（由 WooThemes.com 提供）并成功制作了一个子主题来覆盖我的 CSS。现在从几天开始，我的托管服务器为从画布主题访问任何 php 文件提供了 500 个内部服务器错误。简码和 css generator.php 文件以及所有其他 php 文件都不起作用。我坚持使用任何画布主题功能。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:38:55.617

问题在于linux 主机中其 777的**父文件夹**的权限。将其更改为 755 可解决该错误。

# javascript - 有没有办法在 SVG 中应用 9-patch / scale-9 原则？

> ID：15061205
> 
> 赞同：4
> 
> 时间：2013-02-25T06:21:52.630
> 
> 标签：javascript, html, svg

我想知道是否有一种方法可以制作一个 svg 图形，它可以根据与Android 上的[9-patch](http://developer.android.com/tools/help/draw9patch.html)相同的原理进行缩放（或者类似于 Flash 中的缩放 9）。

基本上，svg 中的部分内容应该根据视口的正常扩展规则进行缩放，但某些元素将保持未缩放并按照 svg 文件中的定义进行锚定。

（想法是使用 SVG 为某些按钮制作一些复杂的背景，但允许它们根据按钮的内部内容相应地缩放）

我认为使用普通的 svg 声明是不可能的，但可能有一些嵌入式脚本，尽管我找不到任何示例或库这样做..

**编辑：**我知道[今年的 SO 问题](https://stackoverflow.com/questions/9547993/svg-nine-slice-scaling)，但我希望有人可以有一个替代的、更可重用的选项/库

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-30T15:03:22.353

我在我的博客上写过它，当你愿意牺牲 IE 时，有可能以一种“完美”的方式和一种在 IE 中工作的“几乎”方式，只要你能接受一个不太完美的解决方案：[http： //w3.eleqtriq.com/2014/03/the-holy-grail-of-image-scaling/](http://w3.eleqtriq.com/2014/03/the-holy-grail-of-image-scaling/)

# iphone - 如何使用 MKmapkit 在 iOS 地图上绘制直线而不移动地图

> ID：15061207
> 
> 赞同：1
> 
> 时间：2013-02-25T06:21:54.110
> 
> 标签：iphone, cocoa-touch, ios6, mapkit

我想在没有地图移动的情况下使用 MKmapkit 在 iOS 地图上绘制一条直线。

例如，如果用户在地图上的两个地方之间绘制一条直线，而手指没有从地图上移开，我不希望地图视图在用户绘制这条线时四处移动。

我在谷歌上搜索过，但没有找到答案/解决方案。
请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:50:50.007

禁用 mapkit 滚动

```
_mapView.scrollEnabled=NO; 
```

然后在核心图形的帮助下画线

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];

    if (drawImage==nil) {
        drawImage=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
        [self.view addSubview:drawImage];
    }

    lastPoint = [touch locationInView:self.view];
    lastPoint.y -= 20;
    }

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:drawImage];
    currentPoint.y -= 20;

    UIGraphicsBeginImageContext(drawImage.frame.size);
    [drawImage.image drawInRect:CGRectMake(0, 0, drawImage.frame.size.width,drawImage.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 0.5, 0.6, 1.0);
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    lastPoint = currentPoint;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:47:25.290

您可以在两个或多个点/坐标之间绘制折线。

这是一个已回答的问题。来源：[在 Xcode 中的两个坐标之间画一条折线](https://stackoverflow.com/questions/11824426/draw-a-polyline-between-two-coordinates-in-xcode)

您必须使用 MKOverlayView 如下：

在接口文件中

```
MKPolyline* _routeLine;
MKPolylineView* _routeLineView; 
```

在实施文件中

将所有坐标存储在

```
NSMutablrArray *routeLatitudes 
```

然后

```
MKMapPoint* pointArr = malloc(sizeof(CLLocationCoordinate2D) * [routeLatitudes count]); 
for(int idx = 0; idx < [routeLatitudes count]; idx++)
{
    CLLocationCoordinate2D workingCoordinate;       
    workingCoordinate.latitude=[[routeLatitudes objectAtIndex:idx] doubleValue];
    workingCoordinate.longitude=[[routeLongitudes objectAtIndex:idx] doubleValue];  
    MKMapPoint point = MKMapPointForCoordinate(workingCoordinate);
    pointArr[idx] = point;      
}   
// create the polyline based on the array of points. 
routeLine = [MKPolyline polylineWithPoints:pointArr count:[routeLatitudes count]];
[mapViewHome addOverlay:self.routeLine];
free(pointArr); 
```

和覆盖委托

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
  {
   MKOverlayView* overlayView = nil;

 if(overlay == routeLine)
{
    routeLineView = [[[MKPolylineView alloc] initWithPolyline:self.routeLine]  autorelease];
    routeLineView.fillColor = [UIColor colorWithRed:0.945 green:0.027 blue:0.957  alpha:1];
    routeLineView.strokeColor = [UIColor colorWithRed:0.945 green:0.027 blue:0.957 alpha:1];
    routeLineView.lineWidth = 4;

    overlayView = routeLineView;
}
return overlayView;
} 
```

# content-management-system - 如何在 drupal 内容列表中添加列？

> ID：15061209
> 
> 赞同：2
> 
> 时间：2013-02-25T06:22:02.147
> 
> 标签：content-management-system, drupal-6

在我的 drupal 站点中，我想根据发布日期对内容进行排序，有什么办法吗？

![在此处输入图像描述](../Images/685abe6b0e400e44a4a9587e1bd764ea.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:44:34.260

使用核心是不可能的，但如果您愿意在您的站点上安装新模块（或者如果您已经拥有它们），[视图](http://drupal.org/project/views)和[视图批量操作 (VBO)](http://drupal.org/project/views_bulk_operations)将使您走得更远。VBO 甚至带有旨在替换标准管理员列表的默认视图。

# javascript - 如何在 node.js 的验证器中纠正错误，因为没有方法“onValidationError”？

> ID：15061210
> 
> 赞同：1
> 
> 时间：2013-02-25T06:22:04.563
> 
> 标签：javascript, node.js, validation, express

我有注册表并将值发布到注册函数，它将使用[node-validator](https://github.com/chriso/node-validator)验证表单值。

但是，当我尝试使用节点验证器时，它不断收到错误，因为 **TypeError: Object # has no method 'onValidationError'**。验证器已安装在我的应用程序中。

在**app.js中**

```
app.post('/register', test.register); 
```

在**test.js 中**

```
var check = require('validator').check,
sanitize = require('validator').sanitize;

exports.register = function(req, res){

    var errors = [];
    req.onValidationError(function(msg) {
        //res.render('signup', { error: msg });
        errors.push(msg);
    });
    req.check(req.body.email, 'Please enter a valid email').len(6,64).isEmail();
    req.check(req.body.username, "Username can't be empty!").isNull();

    if (errors.length) 
         return res.render(
            'register', { regErr: errors.join('\n') }
         );
} 
```

如何纠正这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:42:30.953

您正在使用`node-validator`. 你应该`express-validator`使用`onValidationError`

从[节点验证器](https://github.com/chriso/node-validator)页面您可以看到它：

> 如果您使用的是 express.js 框架，您可以使用 express-validator 中间件来无缝集成 node-validator。

```
Example http://localhost:8080/?zip=12345&foo=1&textarea=large_string

get('/', function (req, res) {
    req.onValidationError(function (msg) {
        //Redirect the user with error 'msg'
    }); 
```

**附加说明：** 的顺序`app.use`也很重要。尝试`app.use(expressValidator);`向上移动`app.use(app.router);`。`app.use`您可以在[https://github.com/justin-john/node-user-management/blob/master/app.js#L17-L18](https://github.com/justin-john/node-user-management/blob/master/app.js#L17-L18)查看顺序。

# three.js - 用变形目标细分模型，可能吗？

> ID：15061213
> 
> 赞同：1
> 
> 时间：2013-02-25T06:22:25.550
> 
> 标签：three.js, webgl

我试图弄清楚这是否可能。如果是这样，它将降低具有变形目标的详细模型的文件大小。到目前为止，我的测试失败了，我找不到这样的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:17:27.390

`THREE.SubdivisionModifier`从的[来源](https://github.com/mrdoob/three.js/blob/master/examples/js/modifiers/SubdivisionModifier.js)可以确定，它不支持变形目标。因此，您需要对其进行修补以使其正常工作。要降低动画对象的文件大小，可以考虑使用骨骼动画。

# java - 存储和检索城市之间距离的最佳方法？

> ID：15061218
> 
> 赞同：-1
> 
> 时间：2013-02-25T06:22:57.773
> 
> 标签：java, arrays, multidimensional-array, arraylist

嗨，我是 Java 新手，所以请使用基本和简单的 Java 方法，这将有助于我快速理解您的想法。

**问题**：我有*n*个城市（每个城市都有一个唯一的名称）并且它们都相互连接，因此任何 2 个城市之间都有距离。

存储这些距离的最佳方法是什么，以便以后如果我使用 2 个城市的名称（因为名称是唯一的）我可以检索它们之间的距离？

我正在考虑使用二维数组，但这似乎不是一个好主意（A - B 和 B - A 之间可能存在重复距离，也不能使用城市名称）是吗？

**为什么有人对这个问题不屑一顾？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:27:08.893

添加到您自己的想法的两种可能性

**HashMap 的 HashMap** - 比 2D 数组更重，但提供易用性，直接按城市名称。

或者，使用**`enum`城市的名称**创建一个，并使用`enum`来索引到二维数组。

**可变维度（非矩形）的 2DArray** - 每行可以有不同的大小，仅存储完整矩阵的一半并根据需要导出另一半。[例如创建一个非矩形阵列](https://stackoverflow.com/a/7367237/1520364)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:26:09.470

如果两个城市之间的距离只是几何距离，则只需要存储每个城市的坐标即可。

否则，将距离存储在 N*N 矩阵中，并`String[N]`与名称保持一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T06:27:22.963

查看java中集合的概念。这应该可以帮助您实现您正在寻找的内容：

[http://docs.oracle.com/javase/tutorial/collections/index.html](http://docs.oracle.com/javase/tutorial/collections/index.html)

# php - php文件没有上传到文件夹

> ID：15061220
> 
> 赞同：1
> 
> 时间：2013-02-25T06:23:07.087
> 
> 标签：php

我有一个 html 上传表单。它在我的本地主机中工作。但它不适用于实时服务器。它将信息插入数据库，但不将文件上传到名为**“photos”**的文件夹。

**php代码：**

```
$upload_path = "photos/";
$upload = mysql_query("INSERT INTO photos (photo_cap, photo_name, photo, date) 
VALUES('$title','$filenameuniq', '$file', '$uploadate')");

        if($upload)
        {                       
            if(!empty($file))
            {
                if(!move_uploaded_file($_FILES['file']['tmp_name'], $upload_path . $filenameuniq))
                {
                echo '<pre>Your file was not uploaded please try again here are your debug informations:'.print_r($_FILES) .'</pre>';                   
                }                   
            }//// upload to folder  

            echo "<font color=green>Successfully Updated.</font>";
            header("Refresh:2; url=allphotos.php");
            exit(); 
        } 
```

**调试：**

```
Array ( [file] => Array ( [name] => Blue hills.jpg [type] => image/jpeg [tmp_name] => 
C:\Windows\Temp\php95FB.tmp [error] => 0 [size] => 28521 ) )

Your file was not uploaded please try again here are your debug informations:1 
```

为什么它不上传到**“照片”**文件夹？在服务器上如何显示 C:\Windows ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:26:31.160

我认为问题在于最大文件大小

```
Value: 1; The uploaded file exceeds the upload_max_filesize directive in php.ini. 
```

在 php.ini.safer 中将值更改为更高的值是将最大上传大小限制为 2mb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:19:52.727

验证大小和类型。然后检查它..

# java - 没有 main 方法的类中的 JPanel 代码

> ID：15061221
> 
> 赞同：0
> 
> 时间：2013-02-25T06:23:09.297
> 
> 标签：java, swing, variables, methods, initialization

我正在尝试在类（classA）中编写 JPanel 并尝试从类（classB）（主要方法所在的位置）实例化它。

但是当我尝试对 classA 进行编码时，内容辅助不支持。它不解决面板相关代码，显示语法错误。

问题可能是什么？

```
import javax.swing.*;
import java.awt.*;

public class gui1 {
    JFrame j = new JFrame("MY Menu");
    j.setSize(900, 700);
    j.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    j.setResizable(false);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:27:39.397

您不能在方法/静态初始化块之外调用方法。尝试在构造函数中初始化它：

```
public class Gui1 {
    JFrame my_frame;
    public Gui1()
    {
        my_frame = new JFrame("MY Menu");
        my_frame.setSize(900, 700);
        my_frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        my_frame.setResizable(false);
    }
} 
```

# jquery - 在使用 jquery 解析 xml 时从他们的 url 检索图像并将它们存储在一个文件夹中

> ID：15061223
> 
> 赞同：0
> 
> 时间：2013-02-25T06:23:12.963
> 
> 标签：jquery, html

我正在尝试使用 jquery 解析 xml。我的项目的目的是通过获取标签的数量来动态创建按钮。例如：如果我有两个 Scenario 标签，我需要在运行时创建 2 个按钮。

问题是我不知道如何从他们的 url 中检索图像并将它们存储在一个文件夹中。

此外，如果有一种方法可以在本地存储 xml，因为我有 xml 的链接，这样即使我没有互联网连接，我的应用程序也可以获取本地可用的数据

**PS我正在使用html和jquery。**

我的 XML 如下：

```
 <root>
<home src="images/pic1.jpg"/>
<Scenario value="Supply Chain Management">
<Scene value="Supply Chain Info Center">
<valProps src="http://10.52.49.152:8080/visiondemo/sample.jpg">Supply Chain Info Center Content1</valProps>
<valProps src="http://10.52.49.152:8080/visiondemo/sample.jpg">SPIC - Content2</valProps>
<valProps src="http://10.52.49.152:8080/visiondemo/sample.jpg">SPIC - COntent3</valProps>
</Scene>
<Scene value="SCPM">
<valProps src="http://10.52.49.152:8080/visiondemo/sample.jpg">SCPM_Content1</valProps>
<valProps src="http://10.52.49.152:8080/visiondemo/sample.jpg">SCPM_Content2</valProps>
</Scene>
</Scenario>
<Scenario value="Supply Chain Management2">
<Scene value = "Supply Chain"></Scene>
</Scenario>
</root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:30:53.167

为此使用`file_get_content`和`file_put_content`php 函数。

```
<?php
   $file = 'url_image_file';
   // Open the file to get existing content
   $current = file_get_contents($file);
   // Append image to the file
   $current .= "new_file_name";
   // Write the contents back to the file
   file_put_contents($file, $current);
?> 
```

# c# - 不存在从对象类型 System.Data.Spatial.DbGeography 到已知托管提供程序本机类型的映射

> ID：15061227
> 
> 赞同：1
> 
> 时间：2013-02-25T06:23:43.390
> 
> 标签：c#, asp.net, geolocation, asp.net-web-api, sqlgeography

我正在使用 DotNetNuke 7 平台构建一个应用程序，并尝试将地理数据写入数据库。这是该项目的一些背景。我在 VS 2012 中构建，刚刚从 2008 R2 升级到 Server 2012。DotNetNuke 7 为数据层和 WebAPI 实现了 PetaPoco。

我希望我提供的信息足以理解问题。我的代码在“rep.Insert(location);”行失败

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Net;
using System.Web;
using System.Net.Http;
using System.Web.Http;
using System.Data.Spatial;
using DotNetNuke.Web.Api;
using DotNetNuke.Data;

namespace DotNetNuke.Modules.GeoLocations
{
    public class LocationController: DnnApiController
    {
        [AllowAnonymous]
        [HttpPost]
        [ValidateAntiForgeryToken]
        public HttpResponseMessage addLocation(CP_Location submitted)
        {

            submitted.GeoCode = DbGeography.PointFromText(string.Format("POINT({0} {1})", submitted.Long, submitted.Lat), 4326);
            createLocation(submitted);

            return Request.CreateResponse(HttpStatusCode.OK, "Success");
        }

        //------------------------------CRUD------------------------------//

        public void createLocation(CP_Location location)
        {
            using (IDataContext ctx = DataContext.Instance())
            {
                var rep = ctx.GetRepository<CP_Location>();
                rep.Insert(location);
            }
        }
    }
} 
```

这是我的对象

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Spatial;
using System.Data.Entity;

using DotNetNuke.ComponentModel.DataAnnotations;
using DotNetNuke.Data;
using DotNetNuke.Data.PetaPoco;

namespace DotNetNuke.Modules.GeoLocations
{
    [TableName("CP_Locations")]
    [PrimaryKey("LocationId", AutoIncrement = true)]
    public class CP_Location
    {
        public int LocationId { get; set; }
        public string LocationType { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        public float Long { get; set; }
        public float Lat { get; set; }
        public DbGeography GeoCode { get; set; }
    }

} 
```

我从客户端从谷歌地图传入经纬度，该地图通过鼠标点击获取坐标

在我的数据库中，如果我要使用以下内容直接编写插入或更新，它将起作用。

```
geography:: STGeomFromText('POINT(-121.527200 45.712113)' , 4326); 
```

可能是什么原因？

- 虽然我会包括对象的屏幕截图 ![在此处输入图像描述](../Images/6f3f86ff8c98db5161c54f7fe1e53c91.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T14:12:47.913

I am not certain on this, but going by how ORMs work, I would say it is because PetaPoco does not know how to map the DbGeography object to the database. You will have to use the string value to try and represent DBGeography. Try something like this:

```
[TableName("CP_Locations")]
[PrimaryKey("LocationId", AutoIncrement = true)]
public class CP_Location
{
    public int LocationId { get; set; }
    public string LocationType { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public float Long { get; set; }
    public float Lat { get; set; }
    [IgnoreColumn]
    public DbGeography GeoCodeObj { 
        get { return DbGeography.FromText(GeoCode); }
        set { GeoCode = value.AsText(); }
    }

    public string GeoCode { get; protected set; }
} 
```

In your database, the GeoCode datatype should be the sql geography type.The string will correctly save to this type. You can then use the GeoCodeObj freely in your classes. I have left the getter public and put the setter as protected, but I am not sure of any constraints DAL2 has with mapping classes.

**Edit** Updated answer after further research and feedback

# android - 我在 Android 模拟器中看不到 Google 地图的视图

> ID：15061228
> 
> 赞同：0
> 
> 时间：2013-02-25T06:23:44.970
> 
> 标签：android, android-emulator

我已经编写了要在 Android 模拟器中查看的 Google 地图。**但是，除了带有放大和缩小的网格**之外，我什么也做不了。

这是我的清单代码：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.ggl_maps"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name="com.example.ggl_maps.MainActivity"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="HelloItemizedOverlay" >
        </activity>
    </application>

</manifest> 
```

Java代码：

```
import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.view.Menu;
import android.widget.Toast;

public class MainActivity extends MapActivity {

  MapView mapView;
  MapController mc;
  GeoPoint p;

  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    try {
      setContentView(R.layout.activity_main);
      mapView = (MapView) findViewById(R.id.mapView);
      mapView.setBuiltInZoomControls(true);
      mapView.setBuiltInZoomControls(true);

      List<Overlay> mapOverlays = mapView.getOverlays();
      Drawable drawable = this.getResources().getDrawable(R.drawable.ic_launcher);
      HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, this);

      GeoPoint point2 = new GeoPoint(17385812, 78480667);
      OverlayItem overlayitem = new OverlayItem(point2, "Namashkaar!",
          "I'm in Hyderabad, India!");

      itemizedoverlay.addOverlay(overlayitem);
      mapOverlays.add(itemizedoverlay);

      List<Overlay> mapOverlay = mapView.getOverlays();
    } catch (Exception e) {
      // TODO Auto-generated catch block
      Toast.makeText(getApplicationContext(), e.toString(), 5000).show();
    }
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
  }

  @Override
  protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
  }
} 
```

覆盖.java

```
import java.util.ArrayList;

import android.app.AlertDialog;
import android.content.Context;
import android.graphics.drawable.Drawable;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class HelloItemizedOverlay extends ItemizedOverlay {

    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    private Context mContext;

    public HelloItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    @Override
    protected OverlayItem createItem(int arg0) {
        // TODO Auto-generated method stub
        return mOverlays.get(arg0);
    }

    @Override
    public int size() {
        // TODO Auto-generated method stub
        return mOverlays.size();
    }
    public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
        super(boundCenterBottom(defaultMarker));
        mContext = context;
    }

    @Override
    protected boolean onTap(int index) {
        OverlayItem item = mOverlays.get(index);
        AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        dialog.show();
        return true;
    }
} 
```

我的日志猫不断地运行并发出相同的警告。

这是我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="AIzaSyB3XULMdQSsa**************************"
/>
</LinearLayout> 
```

这是半日志猫的详细信息。同样继续运行几分钟。

```
 02-25 07:37:48.441: D/dalvikvm(650): GC_CONCURRENT freed 418K, 6% free 8563K/9095K, paused 10ms+5ms, total 86ms
02-25 07:38:12.761: E/ThrottleService(562): problem during onPollAlarm: java.lang.IllegalStateException: problem parsing stats: java.io.FileNotFoundException: /proc/net/xt_qtaguid/iface_stat_all: open failed: ENOENT (No such file or directory)
02-25 07:40:17.871: W/System.err(1249): IOException processing: 26
02-25 07:40:17.871: W/System.err(1249): java.io.IOException: Server returned: 3
02-25 07:40:17.891: W/System.err(1249):     at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
02-25 07:40:17.891: W/System.err(1249):     at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
02-25 07:40:17.945: W/System.err(1249):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
02-25 07:40:17.945: W/System.err(1249):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
02-25 07:40:17.945: W/System.err(1249):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
02-25 07:40:17.945: W/System.err(1249):     at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:02:59.860

```
// Please check this runnig code..

public class MapViewActivity extends MapActivity  {

    private MapView mapView;
    private MapController mapController;
    private List<Overlay> mapOverlays;
    private MapOverlay itemizedOverlay;
    private GeoPoint geoPoint;
    private static double latitude;
    private static double longitude;
    private Button flashLightButton;
    private ImageView cloudImageView, networkImageView;
    private Context mContext;
    private Intent intent;

    protected void onCreate(Bundle icicle) {
        // TODO Auto-generated method stub
        super.onCreate(icicle);
        mContext = this;
        setContentView(R.layout.activity_app_map);

        mapView = (MapView) findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);
        mapController = mapView.getController();
        mapController.setZoom(13);
        try {
            LocationListenerClass.getInstance(this).getCurrentLocation();
        } catch (Exception e) {
            e.printStackTrace();
        }
        try {
            if (!GetPanelStatusEntityBean.getInstance().getLongitude().equals("")
                    && GetPanelStatusEntityBean.getInstance().getLongitude() != null) {
                longitude = Double.parseDouble(GetPanelStatusEntityBean
                    .getInstance().getCurrentLongitude());
                Log.v(ConstantLib.LOG, "PANEL LONGITUDE"
                    + GetPanelStatusEntityBean.getInstance()
                        .getCurrentLongitude());
            } else {
                longitude = Data.LONGITUDE;
            }
            if (!GetPanelStatusEntityBean.getInstance().getLatitude().equals("")
                    && GetPanelStatusEntityBean.getInstance().getLatitude() != null) {
                latitude = Double.parseDouble(GetPanelStatusEntityBean
                    .getInstance().getCurrentLatitude());
                Log.v(ConstantLib.LOG, "PANEL LATITUDE"
                    + GetPanelStatusEntityBean.getInstance()
                        .getCurrentLatitude());
            } else {
                latitude = Data.LATITUDE;
            }
        } catch (Exception e) {

        }

        geoPoint = new GeoPoint((int) (latitude * 1E6), (int) (longitude * 1E6));
        mapController.animateTo(geoPoint);

        mapView.invalidate();
        mapOverlays = mapView.getOverlays();
        Drawable drawable = this.getResources().getDrawable(R.drawable.pin);

        itemizedOverlay = new MapOverlay(drawable, this);
        OverlayItem overlayItem = new OverlayItem(geoPoint, null, null);

        itemizedOverlay.addOverlay(overlayItem);

        mapOverlays.add(itemizedOverlay);
    }

    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

# ios - 如何使用 setKeepAliveTimeout:handler - IOS？

> ID：15061232
> 
> 赞同：5
> 
> 时间：2013-02-25T06:23:56.813
> 
> 标签：ios, objective-c, cocoa-touch, timeout, voip

我们正在开发一个 VoIP 应用程序，当我的应用程序进入后台时，我一直在尝试使用 setKeepAliveTimeout:handler: 来保持连接处于活动状态。根据苹果文档，他们要求提供至少 600 秒的超时时间。实际上我们保持的超时值更少，是否可以用更少的超时来处理？

如果超时，如何使用处理程序重置计时器或请求更多时间，以便我可以保持连接始终有效（接收来电）？

这就是我正在做的...

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{

    BOOL backgroundAccepted = [[UIApplication sharedApplication] setKeepAliveTimeout:600 handler:^{ [self backgroundHandler]; }];
    if (backgroundAccepted)
    {
        NSLog(@"VOIP backgrounding accepted");
    }
}

- (void)backgroundHandler {

    NSLog(@"### -->VOIP backgrounding callback"); // What to do here to extend timeout?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:59:30.137

来自[Apple](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)的文档：

```
The minimum acceptable timeout value is 600 seconds. 
```

**编辑**关于您的评论

VoIP 连接是（几乎）正常的连接。即，如果您有传入数据，您的应用程序将在后台恢复执行。超时处理程序适用于**您**想要 ping 另一方以避免那里超时的情况。更多信息给出了 TN [2277](http://developer.apple.com/library/ios/#technotes/tn2277/_index.html)。

# c# - 从一个到另一个c#获取字符串

> ID：15061233
> 
> 赞同：1
> 
> 时间：2013-02-25T06:23:57.813
> 
> 标签：c#, forms, get

我已经看了一段时间了，我似乎无法理解。我必须将字符串从一种形式获取到另一种形式，但它不起作用，我尝试使用 get 但它只是抛出“get”在这种情况下不存在。这是我的代码。这是在主窗体上：

```
 public string SavePoint()
  {     
        string settings = "";
        string archive = "";
        if (rb_Backup.Checked)
        {
            settings = "backup";
        }
        else if (rb_Restore.Checked)
        {
            settings = "restore";
        }
        else if (rb_Sync.Checked)
        {
            settings = "sync";
        }
        if (cb_Archive.Checked)
        {
            archive = "true";
        }
        else
        {
            archive = "false";
        }

        string savePoint = txt_From.Text + "\r\n" + txt_To.Text + "\r\n" + settings + "\r\n" + archive;
        return savePoint;
  } 
```

这是在试图访问数据的表单上：

```
 private void btn_Save_Click(object sender, EventArgs e)
    {
        frm_Main mainForm = new frm_Main();
        string saveData = mainForm.SavePoint();
        string savePath = AppDomain.CurrentDomain.BaseDirectory + "\\Profiles";
        if (!Directory.Exists(savePath))
        {
            Directory.CreateDirectory(savePath);
        }
        StreamWriter saveFile = new StreamWriter(savePath + "\\" + txt_Save.Text + ".txt");
        saveFile.WriteLine(saveData);
        saveFile.Close();
        this.Close();
    } 
```

我正在学习这是我制作这个软件的原因之一。

最亲切的问候，

斯科博

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:54:56.053

而不是等到`btn_Save_Click`方法尝试从父表单获取信息；让父表单在首次创建子表单时传递信息。

只需在子窗体上创建一个像这样的简单属性：

```
public string SavePath {get;set;} 
```

然后在第一次创建主窗体时设置它：

```
SaveDialog child = new SaveDialog();
child.SavePath = SavePoint();
child.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:53:59.007

您可以在第二个表单上设置所有者，然后再从主表单中显示它。然后您可以从第二个表单访问主表单。

示例是 - 将打开第二个表单的主表单按钮：

```
private void button1_Click(object sender, EventArgs e)
        {
            Form2 frm = new Form2();
            frm.Owner = this;
            frm.ShowDialog();
        } 
```

然后我们有第二种形式——我们想从主窗体中提取数据：

```
private void button1_Click(object sender, EventArgs e)
        {
            //Get our owner form i.e: Form1.cs

            Form1 frm = (Form1)this.Owner;  // Here we cast the owner form as Form1
            MessageBox.Show(frm.teststr()); // You can access the functions/procedure from the main form here
        } 
```

您不想继续创建主窗体的新实例，因为新实例意味着在当前主窗体上完成的所有数据/处理都设置为默认值。所以你想将当前的 Main Form 对象传递给 Second Form。这就是我们在这里所做的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-25T06:29:10.717

要明白这一点，您应该使用属性而不是方法。这应该看起来像

```
public string SavePoint
{
   get
   {
       string settings = "";
       string archive = "";
       if (rb_Backup.Checked)
       {
           settings = "backup";
       }
       else if (rb_Restore.Checked)
       {
           settings = "restore";
       }
       else if (rb_Sync.Checked)
       {
           settings = "sync";
       }
       if (cb_Archive.Checked)
       {
           archive = "true";
       }
       else
       {
           archive = "false";
       }

       string savePoint = txt_From.Text + "\r\n" + txt_To.Text + "\r\n" + settings + "\r\n" + archive;
       return savePoint;
   }
} 
```

# sql-server - 仅适用于我的应用程序的 SQL Server 数据库访问

> ID：15061235
> 
> 赞同：1
> 
> 时间：2013-02-25T06:24:21.050
> 
> 标签：sql-server, security, access-control

我被指派开发一个应用程序，该应用程序将部署在 1000 多个位置。我对我正在使用的数据库有一些安全问题。我只想确保数据库对我的应用程序的可访问性。数据库包含有关数据库的一些非常敏感的信息（要转移资金的冻结银行账户编号），这些信息将保持只读状态，直到远程服务器允许（仅由我访问）。

我实现上述的想法如下，

1.  在安装应用程序的过程中，sa 密码会被应用程序更改并且密码会被应用程序知道。
2.  应用程序将禁用 Windows 身份验证，没有 Windows 用户将能够访问 sql management studio。

虽然我的担忧如下，

1.  任何人在不同的安装中取消附加数据库并附加，数据库的访问权限将由用户获得。
2.  我必须提供备份数据库的选项，用户可以在不同的安装中恢复数据库。
3.  我想会有一些方法可以替换 ldf-mdf 文件，因为用户拥有完整的文件系统 Windows 访问权限。

我不介意用户是否获得对数据库的只读访问权限，但我会强烈坚持不允许对数据库进行写操作。

任何建议如何实现这一点。

**示例：** .net 的 SQLite 具有数据库加密等功能，可确保数据库对应用程序的访问，同时对文件系统具有完全访问权限，但不建议将 sqlite 用于大型应用程序，因为 SQLite 一次只支持单个写入器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:40:19.707

我同意 Shivan Raptor 的观点，即您的整体设计存在问题。

部署这样的应用程序很好，但您需要集中 SQL 数据库。如果需要将此类数据库部署在远程位置，则需要对拥有此类数据库的每台计算机进行防弹（即，没有人，即使是本地人，也可以访问它；包括管理员）。SQL Server 部署是以服务器为中心的。预计它们将是集中的。只要有人拥有计算机的管理员 ID，您的数据就不安全。

1.  最好开发应用程序，可以部署到 1000 个位置；但是所有这些应用程序都会从​​数据中心的集中式 SQL 服务器中提取所需的数据。

2.  或者，在您的数据中心的 SQL 数据库中部署数据，并为您的 1000 位置和中央 SQL 数据库之间的安全发布者/订阅者关系进行配置——除非您有一个非常特定的场景/环境，否则这是昂贵且不必要的不知道。

3.  或者为此使用其他平台，例如 IBM Lotus Domino（与上面的 #2 相同）。

最好做#1。请记住，要完全防止写访问；服务器不能位于远程办公室——例如：本地人可以将硬盘从该计算机上拔下，插入另一台计算机，进行所有更改并将其重新插入您的计算机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:50:50.383

这里有几件事与我有关。为数据库设置访问级别是您最不关心的问题。您的网络和服务器管理员在哪里，他们如何控制对服务器的访问？您是否受到防火墙、正确的端口路由和保护的保护？

在存储银行帐号时，**永远不要**将它们存储在任何未加密的数据库中。构建用于加密存储和解密数据以供查看的功能。根据当今的隐私法，金融机构也开始对客户姓名、地址和电话号码进行加密。

已经提出了另一个担忧。根据我上面的隐私观点，数据永远不应该在一个以上的系统上可用，例如 1-2 个生产服务器。任何远程、QA 和开发数据库都必须使用清理过的数据……没有银行或抄送帐号，没有电话号码，也没有地址或姓名。

我会尝试为您挖掘一些链接，但是在处理帐号等敏感数据时需要涵盖很多内容。

# android - 如何在android中取消按钮onclick时取消下载文件？

> ID：15061237
> 
> 赞同：2
> 
> 时间：2013-02-25T06:24:37.823
> 
> 标签：android, download, android-asynctask

下载文件时，我向用户显示此进度条，右侧单击取消按钮，然后下载文件取消和 sdcard 删除下载文件。如何在 android 中实现？我的代码如下：

```
public class MyListAdapter extends BaseAdapter {
    private LayoutInflater mInflater;
    //DownloadFileFromURL ddl = new DownloadFileFromURL();
     DownloadFileFromURL ddl;

    public MyListAdapter(Context context) {
        mInflater = LayoutInflater.from(context);
         ddl =  new DownloadFileFromURL();

    }

    public int getCount() {
        return list.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView,
            ViewGroup parent) {

        convertView = mInflater.inflate(R.layout.custome_list_view, null);

        final Button cl = (Button) convertView
                .findViewById(R.id.cancle_sedual);
        final Button dl = (Button) convertView
                .findViewById(R.id.download_sedual);
        final ProgressBar pr = (ProgressBar) convertView
                .findViewById(R.id.listprogressbar);
        final ImageView im = (ImageView) convertView
                .findViewById(R.id.list_image);
        im.setImageResource(list.get(position).images[position]);
        getProgress(pr, position, cl, dl);
        // pr.setProgress(getItem(position));
        cl.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                dl.setVisibility(View.VISIBLE);
                cl.setVisibility(View.GONE);
                //ddl.cancel(true);
                //new DownloadFileFromURL().cancel(true);
                 ddl.downloadFile();

            }
        });

        dl.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                str_start = list.get(position).url_video;
                dl.setVisibility(View.GONE);
                cl.setVisibility(View.VISIBLE);
                Log.v("log_tag", "str_start  " + str_start);

                //
                // new DownloadFileFromURL().execute(str_start);
                // new DownloadFileFromURL().execute(pr, str_start,
                // position);
                //ddl.execute(pr, str_start, position);
                 ddl.execute(pr, str_start, position);

            }
        });

        return convertView;
    }
}

class DownloadFileFromURL extends AsyncTask<Object, String, Integer> {

    int count = 0;
    ProgressDialog dialog;
    ProgressBar progressBar;
    int myProgress;
    int position;
     boolean download1 = false;

    /**
     * Before starting background thread Show Progress Bar Dialog
     * */

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        ProgressBar progressBar;
        download1 = true;

    }

    /**
     * Downloading file in background thread
     * */
    @Override
    protected Integer doInBackground(Object... params) {
        Log.v("log_tag", "params  :::; " + params);
        int count;
        progressBar = (ProgressBar) params[0];
        position = (Integer) params[2];
        try {
            // URL url = new URL(f_url[0]);
            URL url = new URL((String) params[1]);
            Log.v("log_tag", "name  ::: " + url);
            name = ((String) params[1]).substring(((String) params[1])
                    .lastIndexOf("/") + 1);
            Log.v("log_tag", "name Substring ::: " + name);
            URLConnection conection = url.openConnection();
            conection.connect();
            // getting file length
            int lenghtOfFile = conection.getContentLength();

            // input stream to read file - with 8k buffer
            InputStream input = new BufferedInputStream(url.openStream(),
                    8192);
            download = new File(Environment.getExternalStorageDirectory()
                    + "/download/");
            if (!download.exists()) {
                download.mkdir();
            }

            String strDownloaDuRL = download + "/" + name;
            Log.v("log_tag", " down url   " + strDownloaDuRL);
            FileOutputStream output = new FileOutputStream(strDownloaDuRL);

            byte data[] = new byte[1024];

            long total = 0;

            while ((count = input.read(data)) != -1) {
                 if(this.download1){
                // if(!DownloadFileFromURL.isCancelled())
                // {
                total += count;
                // publishing the progress....
                // After this onProgressUpdate will be called
                // publishProgress("" + (int) ((total * 100) /
                // lenghtOfFile));

                // writing data to file
                progressBar
                        .setProgress((int) ((total * 100) / lenghtOfFile));
                output.write(data, 0, count);
                setProgress(progressBar, position);
                 }

                 else {
                    break;
                }
            }
            // flushing output
            output.flush();
            if(!this.download1){
                File delete = new File(strDownloaDuRL);
                delete.delete();
                }              
            // closing streams
            output.close();
            input.close();

        } catch (Exception e) {
            Log.e("Error: ", e.getMessage());
        }
        return 0;

    }
    public void downloadFile(){
           this.download1 = false;
     }

    /**
     * Updating progress bar
     * */
    protected void onProgressUpdate(String... values) {

        super.onProgressUpdate(values);
        Log.v("log_tag", "progress :: " + values);
        // setting progress percentage
        // pDialog.setProgress(Integer.parseInt(progress[0]));
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {

        Log.v("log", "login  ::: 4::: " + download);
        String videoPath = download + "/" + name;
        String chpName = name;
        Log.v("log_tag", "chpName  ::::" + chpName + "  videoPath "
                + videoPath);
        db.execSQL("insert into videoStatus (chapterNo,videoPath) values(\""
                + chpName + "\",\"" + videoPath + "\" )");

    }

}

private void setProgress(ProgressBar pr, int position) {
    ProgressBarSeek pbarSeek = new ProgressBarSeek();
    pbarSeek.setPosition(position);
    pbarSeek.setProgressValue(pr.getProgress());
    Log.v("log_tag", position + "  progress  " + pr.getProgress());
    progreeSeekList.add(pbarSeek);
}

private void getProgress(ProgressBar pr, int position, Button cl, Button dl) {
    if (progreeSeekList.size() > 0) {
        for (int j = 0; j < progreeSeekList.size(); j++) {
            if (position == progreeSeekList.get(j).getPosition()) {
                pr.setProgress(progreeSeekList.get(j).getProgressValue());
                dl.setVisibility(View.GONE);
                cl.setVisibility(View.VISIBLE);
            }
        }
    }
} 
```

然后我点击取消按钮然后我得到下面的错误：

```
02-25 12:49:31.109: ERROR/AndroidRuntime(25082): FATAL EXCEPTION: main
02-25 12:49:31.109: ERROR/AndroidRuntime(25082): java.lang.IllegalStateException: Cannot execute task: the task is already running.
02-25 12:49:31.109: ERROR/AndroidRuntime(25082):     at android.os.AsyncTask.execute(AsyncTask.java:380)
02-25 12:49:31.109: ERROR/AndroidRuntime(25082):     at com.example.testhopelistnew.TestHopeListNew$MyListAdapter$2.onClick(TestHopeListNew.java:144)
02-25 12:49:31.109: ERROR/AndroidRuntime(25082):     at android.view.View.performClick(View.java:2485)
02-25 12:49:31.109: ERROR/AndroidRuntime(25082):     at android.view.View$PerformClick.run(View.java:9080)
02-25 12:49:31.109: ERROR/AndroidRuntime(25082):     at android.os.Handler.handleCallback(Handler.java:587)
02-25 12:49:31.109: ERROR/AndroidRuntime(25082):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-25 12:49:31.109: ERROR/AndroidRuntime(25082):     at android.os.Looper.loop(Looper.java:130)
02-25 12:49:31.109: ERROR/AndroidRuntime(25082):     at android.app.ActivityThread.main(ActivityThread.java:3687)
02-25 12:49:31.109: ERROR/AndroidRuntime(25082):     at java.lang.reflect.Method.invokeNative(Native Method)
02-25 12:49:31.109: ERROR/AndroidRuntime(25082):     at java.lang.reflect.Method.invoke(Method.java:507)
02-25 12:49:31.109: ERROR/AndroidRuntime(25082):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
02-25 12:49:31.109: ERROR/AndroidRuntime(25082):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
02-25 12:49:31.109: ERROR/AndroidRuntime(25082):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:41:05.020

试试这个代码，我`boolean download`在`true`他下载文件时添加到你的代码中，否则他停止工作

```
public class MyListAdapter extends BaseAdapter {
        private LayoutInflater mInflater;
        DownloadFileFromURL ddl;

        public MyListAdapter(Context context) {
            mInflater = LayoutInflater.from(context);
            ddl = = new DownloadFileFromURL();
        }

        public int getCount() {
            return list.size();
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {

            convertView = mInflater.inflate(R.layout.custome_list_view, null);

            final Button cl = (Button) convertView
                    .findViewById(R.id.cancle_sedual);
            final Button dl = (Button) convertView
                    .findViewById(R.id.download_sedual);
            final ProgressBar pr = (ProgressBar) convertView
                    .findViewById(R.id.listprogressbar);
            final ImageView im = (ImageView) convertView
                    .findViewById(R.id.list_image);
            im.setImageResource(list.get(position).images[position]);
            getProgress(pr, position, cl, dl);
            // pr.setProgress(getItem(position));
            cl.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    dl.setVisibility(View.VISIBLE);
                    cl.setVisibility(View.GONE);
                    ddl.downloadFile();

                }
            });

            dl.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    str_start = list.get(position).url_video;
                    dl.setVisibility(View.GONE);
                    cl.setVisibility(View.VISIBLE);
                    Log.v("log_tag", "str_start  " + str_start);

                    //
                    // new DownloadFileFromURL().execute(str_start);
                    // position);
                     ddl.execute(pr, str_start, position);

                }
            });

            return convertView;
        }
    }

    class DownloadFileFromURL extends AsyncTask<Object, String, Integer> {

        int count = 0;
        ProgressDialog dialog;
        ProgressBar progressBar;
        int myProgress;
        int position;
        // Boolean
        boolean download = false;

        /**
         * Before starting background thread Show Progress Bar Dialog
         * */

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            ProgressBar progressBar;
            download = true;

        }

        /**
         * Downloading file in background thread
         * */
        @Override
        protected Integer doInBackground(Object... params) {
            Log.v("log_tag", "params  :::; " + params);
            int count;
            progressBar = (ProgressBar) params[0];
            position = (Integer) params[2];
            try {
                // URL url = new URL(f_url[0]);
                URL url = new URL((String) params[1]);
                Log.v("log_tag", "name  ::: " + url);
                name = ((String) params[1]).substring(((String) params[1])
                        .lastIndexOf("/") + 1);
                Log.v("log_tag", "name Substring ::: " + name);
                URLConnection conection = url.openConnection();
                conection.connect();
                // getting file length
                int lenghtOfFile = conection.getContentLength();

                // input stream to read file - with 8k buffer
                InputStream input = new BufferedInputStream(url.openStream(),
                        8192);
                download = new File(Environment.getExternalStorageDirectory()
                        + "/download/");
                if (!download.exists()) {
                    download.mkdir();
                }
                String strDownloaDuRL = download + "/" + name;
                Log.v("log_tag", " down url   " + strDownloaDuRL);
                FileOutputStream output = new FileOutputStream(strDownloaDuRL);

                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    if(this.download){
                    total += count;
                    // publishing the progress....
                    // After this onProgressUpdate will be called
                    // publishProgress("" + (int) ((total * 100) /
                    // lenghtOfFile));

                    // writing data to file
                    progressBar
                            .setProgress((int) ((total * 100) / lenghtOfFile));
                    output.write(data, 0, count);
                    setProgress(progressBar, position);
                    }
                }
                // flushing output
                output.flush();

                if(!this.download){
                File delete = new File(strDownloaDuRL);
                delete.delete();
                }                     

                // closing streams
                output.close();
                input.close();

            } catch (Exception e) {
                Log.e("Error: ", e.getMessage());
            }
            return 0;

        }

        /**
         * Updating progress bar
         * */
        protected void onProgressUpdate(String... values) {

            super.onProgressUpdate(values);
            Log.v("log_tag", "progress :: " + values);
            // setting progress percentage
            // pDialog.setProgress(Integer.parseInt(progress[0]));
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {

            Log.v("log", "login  ::: 4::: " + download);
            String videoPath = download + "/" + name;
            String chpName = name;
            Log.v("log_tag", "chpName  ::::" + chpName + "  videoPath "
                    + videoPath);
            db.execSQL("insert into videoStatus (chapterNo,videoPath) values(\""
                    + chpName + "\",\"" + videoPath + "\" )");

        }

    }

    // to stop your downloading
    public void downloadFile(){
       this.download = false;
    }

    private void setProgress(ProgressBar pr, int position) {
        ProgressBarSeek pbarSeek = new ProgressBarSeek();
        pbarSeek.setPosition(position);
        pbarSeek.setProgressValue(pr.getProgress());
        Log.v("log_tag", position + "  progress  " + pr.getProgress());
        progreeSeekList.add(pbarSeek);
    }

    private void getProgress(ProgressBar pr, int position, Button cl, Button dl) {
        if (progreeSeekList.size() > 0) {
            for (int j = 0; j < progreeSeekList.size(); j++) {
                if (position == progreeSeekList.get(j).getPosition()) {
                    pr.setProgress(progreeSeekList.get(j).getProgressValue());
                    dl.setVisibility(View.GONE);
                    cl.setVisibility(View.VISIBLE);
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:43:05.530

在 cancel onClick 方法中插入以下代码。

DownloadFileFromURL lmib = new DownloadFileFromURL ();

if(lmib.getStatus() == AsyncTask.Status.RUNNING){

lmib.取消（真）；}

# android - 如何查找设备为 LDPI MDPI HDPI 或 XHDPI

> ID：15061238
> 
> 赞同：23
> 
> 时间：2013-02-25T06:24:44.250
> 
> 标签：android, android-screen

没有应用程序的任何代码片段，如何获取屏幕分辨率和屏幕长度。我怎样才能找到设备是 ldpi、mdpi、hdpi 还是 xhdpi？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-25T06:27:55.160

**编辑：** 用于`DisplayMetrics`获取屏幕的密度

```
getResources().getDisplayMetrics().densityDpi; 
```

这将返回表示以下常量的 int 值。 `DisplayMetrics.DENSITY_LOW ,DisplayMetrics.DENSITY_MEDIUM, DisplayMetrics.DENSITY_HIGH, DisplayMetrics.DENSITY_XHIGH`

```
 int density= getResources().getDisplayMetrics().densityDpi;

switch(density)
{
case DisplayMetrics.DENSITY_LOW:
   Toast.makeText(context, "LDPI", Toast.LENGTH_SHORT).show();
    break;
case DisplayMetrics.DENSITY_MEDIUM:
     Toast.makeText(context, "MDPI", Toast.LENGTH_SHORT).show();
    break;
case DisplayMetrics.DENSITY_HIGH:
    Toast.makeText(context, "HDPI", Toast.LENGTH_SHORT).show();
    break;
case DisplayMetrics.DENSITY_XHIGH:
     Toast.makeText(context, "XHDPI", Toast.LENGTH_SHORT).show();
    break;
} 
```

这将根据您可以识别设备的 thsi 返回以下常量

* * *

尝试这个

```
int screenSize = getResources().getConfiguration().screenLayout &
        Configuration.SCREENLAYOUT_SIZE_MASK;

switch(screenSize) {
    case Configuration.SCREENLAYOUT_SIZE_LARGE:
        Toast.makeText(this, "Large screen",Toast.LENGTH_LONG).show();
        break;
    case Configuration.SCREENLAYOUT_SIZE_NORMAL:
        Toast.makeText(this, "Normal screen",Toast.LENGTH_LONG).show();
        break;
    case Configuration.SCREENLAYOUT_SIZE_SMALL:
        Toast.makeText(this, "Small screen",Toast.LENGTH_LONG).show();
        break;
    default:
        Toast.makeText(this, "Screen size is neither large, normal or small" , Toast.LENGTH_LONG).show();
} 
```

来源[识别屏幕分辨率](https://stackoverflow.com/a/11252278/450534)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T06:33:14.633

```
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);
int density = dm.densityDpi; 
```

密度变量是DisplayMetrics中定义的常数，对应不同的dpi。

# forms - web2py SQLFORM.factory no_table

> ID：15061240
> 
> 赞同：0
> 
> 时间：2013-02-25T06:25:07.530
> 
> 标签：forms, web2py

我想知道为什么我在 web2py SQLFORM.factory 中的变量有一个 no_table_[name] 而不是实际的表名？有没有什么遗漏的代码。

例如

```
form = SQLFORM.factory(db.event, db.event_permissions, record=record, fields=fields, submit_button='Edit Event Master') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:57:35.333

`SQLFORM.factory`通过创建一个虚拟`DAL`实例和一个虚拟`DAL`表来工作。默认情况下，虚拟表名称为“no_table”，但您可以通过`table_name`参数更改它。

当您将整个表传递给 时`SQLFORM.factory`，它只是从这些表中提取字段，但在构造 HTML 小部件 id 时它不会保留表名（相反，它只是使用虚拟表名来构造 id）。在[关于多表的一种形式](http://web2py.com/books/default/chapter/29/07#One-form-for-multiple-tables)的书籍部分中，这就是它说的原因：

> *这仅在表没有共同的字段名称时才有效。*

如果您在两个表中都有相同名称的字段，则它们最终将具有相同的 id。

# android - 使用 XmlPullParser 解析复杂的 XML

> ID：15061242
> 
> 赞同：2
> 
> 时间：2013-02-25T06:25:15.243
> 
> 标签：android, parsing, xml-parsing, xmlpullparser

我需要使用 XmlPuppParser 解析这个 XML

```
<lfm status="ok">
    <events xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" artist="Armin van Buuren" festivalsonly="0" page="1" perPage="50" totalPages="1" total="17">
        <event xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#">
            <id>3353053</id>
            <title>ULTRA Buenos Aires 2013 - Dia 2</title>
            <artists>
                <artist>Armin van Buuren</artist>
                ...
                <artist>Adrian de Bernardi</artist>
                <artist>Manu Desrets</artist>
                <headliner>Armin van Buuren</headliner>
            </artists>
            <venue>
                <id>8778836</id>
                <name>Costanera Sur</name>
                <location>
                    <city>Ciudad de Buenos Aires</city>
                    <country>Argentina</country>
                    <street>Av. Espana 2230</street>
                    <postalcode/>
                    <geo:point>
                        <geo:lat>-34.61135</geo:lat>
                        <geo:long>-58.35838</geo:long>
                    </geo:point>
                </location>
                <url>http://www.last.fm/venue/8778836+Costanera+Sur</url>
                <website/>
                <phonenumber/>
                <image size="small">http://userserve-ak.last.fm/serve/34/54798997.jpg</image>
                ....
                <image size="extralarge">http://userserve-ak.last.fm/serve/252/54798997.jpg</image>
            </venue>
            <startDate>Sat, 23 Feb 2013 17:58:01</startDate>
            <description/>
            <image size="small">http://userserve-ak.last.fm/serve/34/83063099.jpg</image>
            ....
            <image size="extralarge">http://userserve-ak.last.fm/serve/252/83063099.jpg</image>
            <attendance>45</attendance>
            <reviews>0</reviews>
            <tag>lastfm:event=3353053</tag>
            <url>http://www.last.fm/festival/3353053+ULTRA+Buenos+Aires+2013+-+D%C3%ADa+2</url>
            <website>http://ultrabuenosaires.com/</website>
            <tickets></tickets>
            <cancelled>0</cancelled>
            <tags>
                <tag>electronic</tag>
            </tags>
        </event>
        <event xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#">
            ....
        </event>
    </events>
</lfm> 
```

我需要解析这些信息：标题、艺术家、城市、国家、地理、日期和描述

```
while (parser.next() != XmlPullParser.END_TAG) {
            if (parser.getEventType() != XmlPullParser.START_TAG) {
                continue;
            }
            String tag = parser.getName();
            MyLog.d(TAG, "tag == " + tag);
            if (tag.equals("title")) {
                title = readTitle(parser);
                MyLog.d(TAG, "tag == " + tag + ": " + title);
            } else if (tag.equals("artists")) {
                MyLog.d(TAG, "tag == " + tag);
            } else if (tag.equals("artist")) {
                if (artists == null) {
                    artists = readArtist(parser);
                } else {
                    artists += ", " + readArtist(parser);
                }
                MyLog.d(TAG, "tag == " + tag + ": " + artists);
            } else if (tag.equals("headliner")) {
                artists += ", " + readHeadliner(parser);
                MyLog.d(TAG, "tag == " + tag + ": " + artists);
                parser.nextTag();
            } else if (tag.equals("venue")) {
                MyLog.d(TAG, "tag == " + tag);
            } else if (tag.equals("location")) {
                MyLog.d(TAG, "tag == " + tag);
            } else if (tag.equals("city")) {
                city = readCity(parser);
                MyLog.d(TAG, "tag == " + tag + ": " + city);
            } else if (tag.equals("country")) {
                country = readCountry(parser);
                MyLog.d(TAG, "tag == " + tag + ": " + country);
            } else if (tag.equals("geo:point")) {
                MyLog.d(TAG, "tag == " + tag);
            } else if (tag.equals("geo:lat")) {
                geoLat = readGeoLat(parser);
                MyLog.d(TAG, "tag == " + tag + ": " + geoLat);
            } else if (tag.equals("geo:long")) {
                geoLong = readGeoLong(parser);
                MyLog.d(TAG, "tag == " + tag + ": " + geoLong);
            } else if (tag.equals("startDate")) {
                date = readDate(parser);
                MyLog.d(TAG, "tag == " + tag + ": " + date);
            } else if (tag.equals("description")) {
                description = readDescription(parser);
                MyLog.d(TAG, "tag == " + tag + ": " + description);
            } else {
                skip(parser);
            }

        }

private String readTitle(XmlPullParser parser) throws IOException,
            XmlPullParserException {
        MyLog.d(TAG, "readTitle");
        parser.require(XmlPullParser.START_TAG, ns, "title");
        String name = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "title");
        return name;
    }

private String readText(XmlPullParser parser) throws IOException,
            XmlPullParserException {
        MyLog.d(TAG, "readText");
        String result = "";
        if (parser.next() == XmlPullParser.TEXT) {
            result = parser.getText();
            parser.nextTag();
        }
        return result;
    }

private void skip(XmlPullParser parser) throws XmlPullParserException,
            IOException {

        MyLog.d(TAG, "skip");

        if (parser.getEventType() != XmlPullParser.START_TAG) {
            throw new IllegalStateException();
        }
        int depth = 1;
        while (depth != 0) {
            switch (parser.next()) {
            case XmlPullParser.END_TAG:
                depth--;
                break;
            case XmlPullParser.START_TAG:
                depth++;
                break;
            }
        }
    } 
```

我解析所有信息，日期和描述除外。我认为我的错误是解析位置后没有找到下一个标签。您能否更改我的代码或给我教程如何使用 XmlPullParser 解析复杂的 XML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:05:22.443

我使用此代码运行良好.. 使用此代码例如..

在解析START_TAG时，当你解析标签时，取一个计数器变量并将其赋值为1，然后每当你得到标签时，将它加1。现在，在解析标签时，只需检查标签是否第一次出现，如果是然后解析所需的值。

```
 <spaces>
 <space>
 <name></name>
 <desc></desc>
<songs>
  <song>
    <name></name>
    <thumb></thumb>
  </song>
  <song>
    <name></name>
    <thumb></thumb>
  </song>
</songs>
</space>
</spaces>

 case XmlPullParser.START_TAG:
                name = parser.getName();
                if (name.equalsIgnoreCase("space")) {
                    cnt=1;
                    currentSpace = new Space();
                    System.out.println("space");

                } else if (currentSpace != null) {

                    if (name.equalsIgnoreCase("name")) 
                     {
                        currentSpace.setName(parser.nextText());
                        if(cnt==1)
                        {
                            // you have <name> from <space>
                        }
                        System.out.println(":::"+currentSpace.getName());
                        cnt++;
                    } else if (name.equalsIgnoreCase("id")) {
                        if (currentSpace.getId() == null) {
                            currentSpace.setId(parser.nextText());
                        }

                    }

                }

                break; 
```

# python - 使用 Paramiko 连接网络设备

> ID：15061255
> 
> 赞同：0
> 
> 时间：2013-02-25T06:26:25.190
> 
> 标签：python, ssh

我正在使用 Paramiko 脚本连接类似 Cisco 的设备，但失败了。但是，我可以通过普通 ssh 连接设备，这是 Python 脚本：

```
#!/usr/bin/env python
import paramiko,os
ssh = paramiko.SSHClient()
paramiko.common.logging.basicConfig(level=paramiko.common.DEBUG)
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect('10.3.207.22',username='admin',password='')
stdin,stdout,stderr=ssh.exec_command("help")
print stdout.read()
ssh.close() 
```

调试信息显示

```
DEBUG:paramiko.transport:starting thread (client mode): 0x2839510L
INFO:paramiko.transport:Connected (version 1.99, client OpenSSH_4.3)
DEBUG:paramiko.transport:kex algos:['diffie-hellman-group-exchange-sha1', 'diffie-hellman-group14-sha1', 'diffie-hellman-group1-sha1'] server key:['ssh-rsa', 'ssh-dss'] client encrypt:['aes128-cbc', '3des-cbc', 'blowfish-cbc', 'cast128-cbc', 'arcfour128', 'arcfour256', 'arcfour', 'aes192-cbc', 'aes256-cbc', 'rijndael-cbc@lysator.liu.se', 'aes128-ctr', 'aes192-ctr', 'aes256-ctr'] server encrypt:['aes128-cbc', '3des-cbc', 'blowfish-cbc', 'cast128-cbc', 'arcfour128', 'arcfour256', 'arcfour', 'aes192-cbc', 'aes256-cbc', 'rijndael-cbc@lysator.liu.se', 'aes128-ctr', 'aes192-ctr', 'aes256-ctr'] client mac:['hmac-md5', 'hmac-sha1', 'hmac-ripemd160', 'hmac-ripemd160@openssh.com', 'hmac-sha1-96', 'hmac-md5-96'] server mac:['hmac-md5', 'hmac-sha1', 'hmac-ripemd160', 'hmac-ripemd160@openssh.com', 'hmac-sha1-96', 'hmac-md5-96'] client compress:['none', 'zlib@openssh.com'] server compress:['none', 'zlib@openssh.com'] client lang:[''] server lang:[''] kex follows?False
DEBUG:paramiko.transport:Ciphers agreed: local=aes128-ctr, remote=aes128-ctr
DEBUG:paramiko.transport:using kex diffie-hellman-group1-sha1; server key type ssh-rsa; cipher: local aes128-ctr, remote aes128-ctr; mac: local hmac-sha1, remote hmac-sha1; compression: local none, remote none
DEBUG:paramiko.transport:Switch to new keys ...
DEBUG:paramiko.transport:Adding ssh-rsa host key for 10.3.207.22: d2fb806d119eebe874ed2b9be3e7e7f7
DEBUG:paramiko.transport:Trying discovered key e4ddbd54b29d935363ad027da9f28a1d in /home/chainwu/.ssh/id_rsa
DEBUG:paramiko.transport:userauth is OK
INFO:paramiko.transport:Authentication (publickey) failed.
DEBUG:paramiko.transport:userauth is OK
INFO:paramiko.transport:Authentication (password) successful!
DEBUG:paramiko.transport:[chan 1] Max packet in: 34816 bytes
DEBUG:paramiko.transport:[chan 1] Max packet out: 32768 bytes
INFO:paramiko.transport:Secsh channel 1 opened.
INFO:paramiko.transport:Disconnect (code 2): Packet integrity error.
Traceback (most recent call last):
File "icos-ssh.py", line 12, in <module>
stdin,stdout,stderr=ssh.exec_command("help")
File "/usr/local/lib/python2.7/dist-packages/paramiko/client.py", line 370, in exec_command
chan.exec_command(command)
File "/usr/local/lib/python2.7/dist-packages/paramiko/channel.py", line 213, in exec_command
self._wait_for_event()
File "/usr/local/lib/python2.7/dist-packages/paramiko/channel.py", line 1114, in _wait_for_event
raise e
paramiko.SSHException: Channel closed. 
```

这是 ssh 日志

```
chainwu@saturn paramico-example $ ssh -v  admin@10.3.207.22
OpenSSH_5.9p1 Debian-5ubuntu1, OpenSSL 1.0.1 14 Mar 2012
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config line 19: Applying options for *
debug2: ssh_connect: needpriv 0
debug1: Connecting to 10.3.207.22 [10.3.207.22] port 22.
debug1: Connection established.
debug1: identity file /home/chainwu/.ssh/id_rsa type 1
debug1: Checking blacklist file /usr/share/ssh/blacklist.RSA-2048
debug1: Checking blacklist file /etc/ssh/blacklist.RSA-2048
debug1: identity file /home/chainwu/.ssh/id_rsa-cert type -1
debug1: identity file /home/chainwu/.ssh/id_dsa type -1
debug1: identity file /home/chainwu/.ssh/id_dsa-cert type -1
debug1: identity file /home/chainwu/.ssh/id_ecdsa type -1
debug1: identity file /home/chainwu/.ssh/id_ecdsa-cert type -1
debug1: Remote protocol version 1.99, remote software version OpenSSH_4.3
debug1: match: OpenSSH_4.3 pat OpenSSH_4*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9p1 Debian-5ubuntu1
debug2: fd 3 setting O_NONBLOCK
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug2: kex_parse_kexinit: ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ssh-rsa-cert-v01@openssh.com,ssh-rsa-cert-v00@openssh.com,ssh-rsa,ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ssh-dss-cert-v01@openssh.com,ssh-dss-cert-v00@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-dss
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-sha2-256,hmac-sha2-256-96,hmac-sha2-512,hmac-sha2-512-96,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-sha2-256,hmac-sha2-256-96,hmac-sha2-512,hmac-sha2-512-96,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib
debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib
debug2: kex_parse_kexinit:
debug2: kex_parse_kexinit:
debug2: kex_parse_kexinit: first_kex_follows 0
debug2: kex_parse_kexinit: reserved 0
debug2: kex_parse_kexinit: diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ssh-rsa,ssh-dss
debug2: kex_parse_kexinit: aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour128,arcfour256,arcfour,aes192-cbc,aes256-cbc,rijndael-cbc@lysator.liu.se,aes128-ctr,aes192-ctr,aes256-ctr
debug2: kex_parse_kexinit: aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour128,arcfour256,arcfour,aes192-cbc,aes256-cbc,rijndael-cbc@lysator.liu.se,aes128-ctr,aes192-ctr,aes256-ctr
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib@openssh.com
debug2: kex_parse_kexinit: none,zlib@openssh.com
debug2: kex_parse_kexinit:
debug2: kex_parse_kexinit:
debug2: kex_parse_kexinit: first_kex_follows 0
debug2: kex_parse_kexinit: reserved 0
debug2: mac_setup: found hmac-md5
debug1: kex: server->client aes128-ctr hmac-md5 none
debug2: mac_setup: found hmac-md5
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug2: dh_gen_key: priv key bits set: 140/256
debug2: bits set: 1006/2048
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA d2:fb:80:6d:11:9e:eb:e8:74:ed:2b:9b:e3:e7:e7:f7
debug1: Host '10.3.207.22' is known and matches the RSA host key.
debug1: Found key in /home/chainwu/.ssh/known_hosts:10
debug2: bits set: 1006/2048
debug1: ssh_rsa_verify: signature correct
debug2: kex_derive_keys
debug2: set_newkeys: mode 1
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug2: set_newkeys: mode 0
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug2: service_accept: ssh-userauth
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug2: key: /home/chainwu/.ssh/id_rsa (0x7f9530e33950)
debug2: key: /home/chainwu/.ssh/id_dsa ((nil))
debug2: key: /home/chainwu/.ssh/id_ecdsa ((nil))
debug1: Authentications that can continue: publickey,password,keyboard-interactive
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/chainwu/.ssh/id_rsa
debug2: we sent a publickey packet, wait for reply
debug1: Authentications that can continue: publickey,password,keyboard-interactive
debug1: Trying private key: /home/chainwu/.ssh/id_dsa
debug1: Trying private key: /home/chainwu/.ssh/id_ecdsa
debug2: we did not send a packet, disable method
debug1: Next authentication method: keyboard-interactive
debug2: userauth_kbdint
debug2: we sent a keyboard-interactive packet, wait for reply
debug1: Authentications that can continue: publickey,password,keyboard-interactive
debug2: we did not send a packet, disable method
debug1: Next authentication method: password
admin@10.3.207.22's password:
debug2: we sent a password packet, wait for reply
debug1: Authentication succeeded (password).
Authenticated to 10.3.207.22 ([10.3.207.22]:22).
debug1: channel 0: new [client-session]
debug2: channel 0: send open
debug1: Entering interactive session.
debug2: callback start
debug2: client_session2_setup: id 0
debug2: fd 3 setting TCP_NODELAY
debug2: channel 0: request pty-req confirm 1
debug1: Sending environment.
debug1: Sending env LANG = en_US.UTF-8
debug2: channel 0: request env confirm 0
debug2: channel 0: request shell confirm 1
debug2: callback done
debug2: channel 0: open confirm rwindow 0 rmax 32768
debug2: channel_input_status_confirm: type 99 id 0
debug2: PTY allocation request accepted on channel 0
debug2: channel 0: rcvd adjust 131072
debug2: channel_input_status_confirm: type 99 id 0
debug2: shell request accepted on channel 0

(BCM-EVAL) >help

HELP:
Special keys:
  DEL, BS .... delete previous character
  Ctrl-A  .... go to beginning of line
  Ctrl-E  .... go to end of line
  Ctrl-F  .... go forward one character
  Ctrl-B  .... go backward one character
  Ctrl-D  .... delete current character
  Ctrl-U, X .. delete to beginning of line
  Ctrl-K  .... delete to end of line
  Ctrl-W  .... delete previous word
  Ctrl-T  .... transpose previous character
  Ctrl-P  .... go to previous line in history buffer
  Ctrl-R  .... rewrites or pastes the line
  Ctrl-N  .... go to next line in history buffer
  Ctrl-Y  .... print last deleted character
  Ctrl-Q  .... enables serial flow
  Ctrl-S  .... disables serial flow
  Ctrl-Z  .... return to root command prompt
  Tab, <SPACE> command-line completion
  Exit    .... go to next lower command prompt
  ?       .... list choices 
```

我想知道如何让 Paramiko 像 ssh 一样工作？我错过了一些配置设置吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T22:37:05.993

你试过加载`system_host_keys`吗？

```
ssh_client = paramiko.SSHClient()
ssh_client.load_system_host_keys()
ssh_client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh_client.connect(host, username=username, password=password, timeout=3)
ssh_stdin, ssh_stdout, ssh_stderr = ssh_client.exec_command(commands)
ssh_client.close() 
```

也尝试利用异常：

```
except paramiko.AuthenticationException:
      log.debug("Authentication problem to -- Server: %s"%host)
      output = 'Authentication Error'
except socket.error:
      log.debug("Comunication problem to -- Server: %s"%host)
      output = 'Communication Error' 
```

# grails - Grails 卡在 Running Grails 应用程序上

> ID：15061256
> 
> 赞同：2
> 
> 时间：2013-02-25T06:26:26.413
> 
> 标签：grails, grails-2.0

当我跑步时`grails run-app`

它到达`Running Grails application`并坐在那里。

我该如何调试？我可以打开更多日志吗？它在做什么？grails 在“运行”应用程序时是否会查看方法或配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:30:36.937

在`Config.groovy`中，有一个用于记录的哈希。默认情况下，我的看起来像：

```
log4j = {
    // Example of changing the log pattern for the default console appender:
    //
    appenders {
        console name:'stdout', layout:pattern(conversionPattern: '%c{2} %m%n')
    }

    error  'org.codehaus.groovy.grails.web.servlet',        // controllers
           'org.codehaus.groovy.grails.web.pages',          // GSP
           'org.codehaus.groovy.grails.web.sitemesh',       // layouts
           'org.codehaus.groovy.grails.commons',            // core / classloading
           'org.codehaus.groovy.grails.plugins',            // plugins
           'org.codehaus.groovy.grails.orm.hibernate',      // hibernate integration
           'org.springframework',
           'org.hibernate',
           'net.sf.ehcache.hibernate'
} 
```

只需将“错误”更改为“全部”即可。

或者，您可能希望默认为所有记录器打开“信息”日志记录：

```
log4j = {
    root {
        info()
    }
    …
} 
```

# jquery - $.ajax() 导致解析器错误

> ID：15061262
> 
> 赞同：0
> 
> 时间：2013-02-25T06:26:43.907
> 
> 标签：jquery, parse-error

我有下面的 jquery，它获取 Web 服务返回的 JSON 对象，但大多数时候我得到一个解析器错误。

```
$.ajax({
    type: "GET",
    url: 'scripts/php/fetchProbableDrivers.php',
    dataType: 'json',
    data: {'tripId' : tripId },
    error: function(e)
    {       

        alert(JSON.stringify(e, null, 4));                                 
            },
    success: function(drivers){
            } 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:44:47.960

我认为您的 json 格式存在格式问题。
您可以通过将数据类型更改为“html”并成功发出警报来检查您的响应......类似这样的事情。

```
$.ajax({
type: "GET",
url: 'scripts/php/fetchProbableDrivers.php',
dataType: 'html',
data: {'tripId' : tripId },
error: function(e)
{       

    alert(JSON.stringify(e, null, 4));                                 
        },
success: function(strDrivers){
        alert( strDrivers );
        } 
```

然后复制您的回复并从网站[http://jsonformatter.curiousconcept.com/验证您的回复](http://jsonformatter.curiousconcept.com/)

我希望通过这种方式，您可以轻松找出格式问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:31:16.387

检查返回的 JSON 对象，返回的 JSON`fetchProbableDrivers.php`
可能存在格式问题。[使用http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)
验证返回 JSON 的格式

# c++ - make_pair 如何隐式推断类型？

> ID：15061271
> 
> 赞同：3
> 
> 时间：2013-02-25T06:27:23.627
> 
> 标签：c++, stl, std-pair, template-argument-deduction

`make_pair`推导类型是众所周知的。这就是它存在并且方便的原因。现在看这个[例子](http://www.cplusplus.com/reference/utility/make_pair/)：

```
std::pair <int,int> foo;
std::pair <int,int> bar;

foo = std::make_pair (10,20);
bar = std::make_pair (10.5,'A'); //ok: implicit conversion from pair<double,char> 
```

现在我想了解在上面的行中究竟何时进行扣除：

```
bar = std::make_pair (10.5,'A'); 
```

它是否会创建一对然后将其隐式强制转换`double`为`int`和？`char``int`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T06:32:03.233

它首先创建了一个`std::pair<double, char>`感谢帮助函数的类型推导，该函数`std::make_pair`创建了一对与您传递给它的类型**完全相同的**类型，无论您稍后将此对分配给哪种类型。

然后这个对象被分配给一个`std::pair<int,int>`可以工作的模板，这要归功于一个[模板化的赋值运算符](http://en.cppreference.com/w/cpp/utility/pair/operator=)。该运算符基本上允许可分配类型（`U1`to `T1`，`U2`to `T2`），它们在内部分配（在您的情况下） a`double`到 an`int`和 a`char`到 an `int`。

该语言没有“预测”将在其中使用表达式的变量类型的功能，这需要`pair<int,int>`立即进行，而中间没有这一步。

如果您想**避免**该步骤，则必须*在构造*对时显式，这意味着您不应该使用类型扣除`std::make_pair`，而是使用`std::pair`要求您放置显式类型的构造函数。但是，我怀疑这会由于优化而提高性能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T06:32:55.420

要详细说明克里斯的评论，请查看此

```
bar = std::make_pair (10.5,'A'); 
```

是相同的

```
std::pair <double,char> myPair = std::make_pair (10.5,'A'); 
bar = myPair; 
```

最后一行现在使用下面的赋值运算符

```
template< class U1, class U2 >
pair& operator=( const pair<U1,U2>& other ); 
```

> 将 other.first 分配给 first 并将 other.second 分配给 second

因此，只要底层类型是可分配的，任何类型的对都可以相互分配。

# git - 如何在 gradle 中获取当前的 git 分支？

> ID：15061277
> 
> 赞同：23
> 
> 时间：2013-02-25T06:27:58.670
> 
> 标签：git, gradle

我正在编写一个将我的应用程序部署到服务器的任务。但是，我希望仅当我当前的 git 分支是主分支时才运行此任务。如何获取当前的 git 分支？

### `gradle-git`方法：

我知道有一个[gradle-git 插件](https://github.com/ajoberstar/gradle-git)`getWorkingBranch()`在任务下有一个方法`GitBranchList`，但是任何时候我尝试执行

```
task getBranchName(type: GitBranchList) {
   print getWorkingBranch().name
} 
```

我收到“任务尚未执行”错误。我查看了[源代码](https://github.com/ajoberstar/gradle-git/blob/master/src/main/groovy/org/ajoberstar/gradle/git/tasks/GitBranchList.java)，当没有设置分支时它会抛出该错误。这是否意味着这种方法并不像我认为的那样做？我需要在某个地方设置分支吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2016-04-21T05:05:06.663

您也可以在`git branch name`没有插件的情况下获得。

```
def gitBranch() {
    def branch = ""
    def proc = "git rev-parse --abbrev-ref HEAD".execute()
    proc.in.eachLine { line -> branch = line }
    proc.err.eachLine { line -> println line }
    proc.waitFor()
    branch
} 
```

参考：[Gradle & GIT : How to map your branch to a deployment profile](http://coders-kitchen.com/2013/11/01/gradle-git-how-to-map-your-branch-to-a-deployment-profile/)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-25T08:21:53.150

不，这并不意味着没有设置分支。这意味着该任务还没有真正执行。您要做的是在配置闭包中调用一个方法，而您可能希望在任务执行后调用它。尝试将您的任务更改为：

```
task getBranchName(type: GitBranchList) << {
    print getWorkingBranch().name
} 
```

随着`<<`您添加一个 doLast，它将在任务执行后执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-11T13:59:41.783

[这基本上是@Song Bi 的答案，但在kotlin](https://discuss.gradle.org/t/how-to-run-execute-string-as-a-shell-command-in-kotlin-dsl/32235/9) DSL 中（受此线程启发）：

```
import org.jetbrains.kotlin.gradle.tasks.KotlinCompile
import java.io.ByteArrayOutputStream

/**
 * Utility function to retrieve the name of the current git branch.
 * Will not work if build tool detaches head after checkout, which some do!
 */
fun gitBranch(): String {
    return try {
        val byteOut = ByteArrayOutputStream()
        project.exec {
            commandLine = "git rev-parse --abbrev-ref HEAD".split(" ")
            standardOutput = byteOut
        }
        String(byteOut.toByteArray()).trim().also {
            if (it == "HEAD")
                logger.warn("Unable to determine current branch: Project is checked out with detached head!")
        }
    } catch (e: Exception) {
        logger.warn("Unable to determine current branch: ${e.message}")
        "Unknown Branch"
    }
} 
```

# node.js - node-bcrypt 编译错误

> ID：15061283
> 
> 赞同：0
> 
> 时间：2013-02-25T06:29:06.983
> 
> 标签：node.js, bcrypt

我完全知道这可能是我的错（主要是因为使用 Gentoo），但我被卡住了，所以如果有什么我没有看到或我发现的缺点，请发出声音。

```
make: Entering directory /home/* * */sites/disc/node_modules/bcrypt/build'
CXX(target) Release/obj.target/bcrypt_lib/src/blowfish.o
CXX(target) Release/obj.target/bcrypt_lib/src/bcrypt.o
CXX(target) Release/obj.target/bcrypt_lib/src/bcrypt_node.o
../src/bcrypt_node.cc: In function ‘v8::Handle<v8::Value> {anonymous}::GenerateSalt(const v8::Arguments&)’:
../src/bcrypt_node.cc:257:74: error: invalid conversion from ‘void (*)(uv_work_t*) {aka void (*)(uv_work_s*)}’ to ‘uv_after_work_cb {aka void (*)(uv_work_s*, int)}’ [-fpermissive]
/home/* * */.node-gyp/0.9.9/deps/uv/include/uv.h:1393:15: error: initializing argument 4 of ‘int uv_queue_work(uv_loop_t*, uv_work_t*, uv_work_cb, uv_after_work_cb)’ [-fpermissive]
../src/bcrypt_node.cc: In function ‘v8::Handle<v8::Value> {anonymous}::Encrypt(const v8::Arguments&)’:
../src/bcrypt_node.cc:337:74: error: invalid conversion from ‘void (*)(uv_work_t*) {aka void (*)(uv_work_s*)}’ to ‘uv_after_work_cb {aka void (*)(uv_work_s*, int)}’ [-fpermissive]
/home/* * */.node-gyp/0.9.9/deps/uv/include/uv.h:1393:15: error: initializing argument 4 of ‘int uv_queue_work(uv_loop_t*, uv_work_t*, uv_work_cb, uv_after_work_cb)’ [-fpermissive]
../src/bcrypt_node.cc: In function ‘v8::Handle<v8::Value> {anonymous}::Compare(const v8::Arguments&)’:
../src/bcrypt_node.cc:431:74: error: invalid conversion from ‘void (*)(uv_work_t*) {aka void (*)(uv_work_s*)}’ to ‘uv_after_work_cb {aka void (*)(uv_work_s*, int)}’ [-fpermissive]
/home/* * */.node-gyp/0.9.9/deps/uv/include/uv.h:1393:15: error: initializing argument 4 of ‘int uv_queue_work(uv_loop_t*, uv_work_t*, uv_work_cb, uv_after_work_cb)’ [-fpermissive]
make: * * * [Release/obj.target/bcrypt_lib/src/bcrypt_node.o] Error 1
make: Leaving directory/home/***/sites/disc/node_modules/bcrypt/build' 
```

关于为什么失败的任何建议？我缺少一些配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:22:18.857

这个问题的答案在节点版本中。我使用的是 0.9.9，一旦我恢复到 0.9.3，它就编译得很好。

# c++ - c++11线程的分段错误（核心转储）

> ID：15061288
> 
> 赞同：1
> 
> 时间：2013-02-25T06:29:27.660
> 
> 标签：c++, multithreading, gcc, c++11

我是 c++ 的新手，在玩 c++11 的线程时出现“分段错误（核心转储）”。我修改了一段我以前写的好代码并得到了错误。我修改的部分是

```
mutex m;
auto thread_f=[&](int i)
{
    for(int j=i; j<interval.size(); j+=Threads_Number)
    {
        vector<Permutation >::iterator it1=(interval.begin()+j);
        for(vector<Permutation >::iterator it2=it1; it2!=interval.end(); it2++)
        {
            if(!(*it1<*it2)) continue;
            IntervalToCheck x(*it1,*it2);
            m.lock();
            cout<<x;
            f<<x;
            m.unlock();
        }
    }
};

vector<thread> threads;
threads.clear();
for(int i=0; i<Threads_Number; i++)
    threads.push_back(thread(thread_f,i));
for(auto& th:threads)
    th.join(); 
```

其中变体“f”是 ofstream 的一个对象。奇怪的是，当我将“Threads_Number”设置为 1 时，程序运行良好，而当我将“Threads_Number”设置为 1 以外时，程序有时运行良好，有时运行不正常——就像我以前不初始化 int 时一样并使用它。

这是我的 g++ 版本：

```
aalen@CFC:multiThreads> g++ --version                                            13-02-25 14:24
g++ (GCC) 4.7.2
Copyright (C) 2012 Free Software Foundation, Inc. 
```

我用：

```
g++ -c main.cpp --std=c++11

g++ *.o -o work -lcln -lginac -pthread 
```

编译我的代码。并感谢您的关注，对不起我糟糕的英语。

似乎是因为我在 IntervalToCheck 类中使用 GiNaC 并且它不是线程安全的（因为我在 Google 上搜索了 GiNac 和线程安全），因为我收到的消息是

```
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7ffff5340700 (LWP 3125)]
0x00000000004097cf in GiNaC::ptr<GiNaC::basic>::operator= (this=0x7fffec000cd0,   other=...) at /usr/include/ginac/ptr.h:88
88              delete p; 
```

正如 nm 所建议的，来自 gdb。也许 GiNaC 是问题所在。如果有人能提供一个处理表达的开放工具，那就太好了。谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-07T12:35:16.257

如果您查看分段错误来自何处的源代码，您可以看到它来自 GiNaC 的[引用计数指针](http://www.ginac.de/reference/ptr_8h_source.html)实现。据我了解，问题是指针可能在另一个线程仍在使用它时被过早删除。这是因为计数器上的递增和递减操作在线程访问方面不是原子的。因此，您正在尝试访问已删除的内存，这是未定义的行为（因此可以进行段错误）。

实际上，过去似乎已经出现过这个问题，[并且在他们的邮件列表中表达了担忧](http://www.ginac.de/pipermail/ginac-list/2010-June/001665.html)。

[据其维护者称，GiNaC 不是线程安全的。](http://www.ginac.de/pipermail/ginac-list/2010-June/001657.html)

因此，您根本不能按照维护者的意图从多个线程中使用 GiNaC。

从理论上讲，也许您可​​以`ginac::ptr`用类似的东西代替`std::shared_ptr`，这样可以保证在其引用计数机制方面没有竞争条件。因此，如果您可以将内部计数器类型替换为`std::atomic<int>`或类似的东西，或者您可以使用另一个具有原子引用计数的实现，那么该程序可能会工作。

至于您编写的实际代码，它似乎应该可以正常工作。`std::scoped_lock`尽管 print 语句可以按顺序执行和交错，但它们似乎正确地锁定在一个关键块中，尽管使用C++ 中更惯用的 RAII 增强型可能更好。

# javascript - jQuery 可排序 portlet + 创建动态新 portlet

> ID：15061289
> 
> 赞同：1
> 
> 时间：2013-02-25T06:29:41.183
> 
> 标签：javascript, jquery, portlet

为了简化问题，假设我们使用的代码与 jquery ui portlets 小部件完全相同：

[http://jqueryui.com/sortable/#portlets](http://jqueryui.com/sortable/#portlets)

我已经阅读了关于stackoverflow中主题的另一个线程，但它真的没有给我关于如何处理解决方案的线索，因为原始代码不再可用

[jQuery 如何添加一个 portlet](https://stackoverflow.com/questions/3391496/jquery-how-to-add-a-portlet)

让我们想象一下向现有列添加新 portlet 的最简单方法：

```
$( "#col0" ).append($('<div class="portlet ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" id="p5">' +
                '<div class="portlet-header ui-widget-header ui-corner-all">' +
                '<span class="ui-icon ui-icon-minusthick"></span>' + "my title" + '</div>' +
                '<div class="portlet-content">' + "my content" + '</div></div>')) 
```

使用这种方法，我必须解决重要问题：

1.  右上角的“+”按钮不适用于新的 portlet。

2.  标题和内容文本不会保留在 div 内。当文本到达 div 的边缘时，它会继续向外。

3.  我尝试使用在 stackoverflow 中获得的这种方法来获取 portlet 的顺序。当您使用默认的 jquery portlet 加载应用程序时，它就可以工作。

    ```
    $( ".column" ).sortable({

    connectWith: ".column",
    delay: 150,

    start: function(event, ui) {
            ui.item.startPos = ui.item.index();
            item = ui.item;
            newList = oldList = ui.item.parent();
    },
    stop: function(event, ui) {
            /*saveOrder();*/        
            console.log("Start position: " + ui.item.startPos);
            console.log("New position: " + ui.item.index());
    },
    change: function(event,ui) {
            if(ui.sender) newList = ui.placeholder.parent(); 
    ```

    },

在我添加一个新的 portlet 之前和之后，当我尝试获取可排序的列元素时：

```
 $("#obtain").button().click(function() {
         console.log($("#col0").sortable('toArray').toString());}); 
```

它为我提供了每列正确数量的元素（添加了新元素），但是当我尝试在列之间移动新元素时，当您动态地创建新元素时，列中的位置毫无意义。我认为每次创建新的 portlet 时我都应该再次执行 start() 函数，这样我才能获得正确的索引。但我不知道如何处理它。

非常感谢您的时间，我希望我能得到一些建议，

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-06T22:48:08.300

对于＃1，我认为您缺少 portlet-toggle 类

```
<span class="ui-icon ui-icon-minusthick"> 
```

应该

```
<span class='ui-icon ui-icon-minusthick portlet-toggle'> 
```

# c# - 字符串线性搜索c#

> ID：15061291
> 
> 赞同：0
> 
> 时间：2013-02-25T06:30:09.173
> 
> 标签：c#, search, text-files

我目前正在做一个小型 C# 练习，处理在文本文件中搜索相关术语/单词，程序将写出文本文件中包含搜索单词的所有句子。例如，我输入单词：“example”，程序将遍历文本文件中的所有句子，并提取其中包含“example”一词的句子。

```
The text file is structured as so: <sentenceDesignator> <text>
sentence 1: bla bla bla bla example of a sentence  //each line contains a sentence
sentence 2: this is not a good example of grammar
sentence 3: bla is not a real word, use better terms 
```

我想做的是使用线性搜索来遍历文本文件中的所有行并写出包含搜索字符串术语的所有句子。

到目前为止我的代码：

```
 String filename = @"sentences.txt";

        if (!File.Exists(filename))
        {
            // Since we just created the file, this shouldn't happen.
            Console.WriteLine("{0} not found", filename);
            return;
        }
        else
        {
            Console.WriteLine("Successfully found {0}.", filename);
        }
        //making a listof type "Sentence" to hold all the sentences
        List<Sentence> sentences = new List<Sentence>();

        //the next lines of code...
        StreamReader reader = File.OpenText(filename);

        //first, write out all of the sentences in the text file

        //read a line(sentence) from a line in the text file
        string line = reader.ReadLine();

        while (line != null)
        {
            Sentence s = new Sentence();

            //we need something to split data...
            string[] lineArray = line.Split(':');

            s.sentenceDesignator = lineArray[0];
            s.Text = lineArray[1];

            Console.Write("\n{0}", line);

            line = reader.ReadLine();
        }

        //so far, we can write out all of the sentences in the text file. 
        Console.Write("\n\nOK!, search a term to diplay all their occurences: ");
        string searchTerm = Console.ReadLine();

       if(!line.Contains(searchterm))
       {
          Console.Write("\nThat term does not exist in any sentence.");
       }
       else
        {
            foreach (Sentence ss in sentences)
            {
                if (ss.sentenceDesignator.Contains(queryName))
                {
                    //I need help here
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:05:30.570

如果您构建文件的索引然后搜索索引会快得多，就像线性搜索每个搜索操作一样，`O(n)`而索引搜索它`O(n)`用于构建索引，但`O(log n)`或`near-O(1)`用于查找（取决于您如何构建你的索引）。成本是增加了索引的内存消耗，但我会这样做：

```
private Dictionary<String,List<Int32>> _index = new Dictionary<String,List<Int32>>();

/// <summary>Populates an index of words in a text file. Takes O(n) where n is the size of the input text file.</summary>
public void BuildIndex(String fileName) {

    using(Stream inputTextFile = OpenFile(...)) {

        int currentPosition = 0;
        foreach(String word in GetWords(inputTextFile)) {

            word = word.ToUpperInvariant();
            if( !_index.ContainsKey( word ) ) _index.Add( word, new List<Int32>() );
            _index[word].Add( currentPosition );

            currentPosition = inputTextFile.Position;
        }
    }
}

/// <summary>Searches the text file (via its index) if the specified string (in its entirety) exists in the document. If so, it returns the position in the document where the string starts. Otherwise it returns -1\. Lookup time is O(1) on the size of the input text file, and O(n) for the length of the query string.</summary>
public Int32 SearchIndex(String query) {

    String[] terms = query.Split(' ');

    Int32 startingPosition = -1;
    Int32 currentPosition = -1;
    Boolean first = true;
    foreach(String term in terms) {
        term = term.ToUpperInvariant();

        if( first ) {
            if( !_index.Contains( term ) ) return -1;
            startingPosition = _index[term][0];
        } else {

            if( !ContainsTerm( term, ++currentPosition ) ) return -1;
        }

        first = false;
    }

    return startingPosition;
}

/// <summary>Indicates if the specified term exists at the specified position.</summary>
private Boolean ContainsTerm(String term, Int32 expectedPosition) {

    if( !_index.ContainsKey(term) ) return false;
    List<Int32> positions = _index[term];
    foreach(Int32 pos in positions) {

        if( pos == expectedPosition ) return true;
    }
    return false;
} 
```

和应该是微不足道`OpenFile`的。`GetWords`请注意，`GetWords`用于在文件`yield return`中构建一个`IEnumerable<String>`以空格分隔的单词，以及处理您的自定义文件格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:25:04.080

我对最后一个 if/else 有点困惑。似乎您只是将文件的最后一行与搜索词进行比较。另外，“queryName”从何而来？你想打印整个句子（“bla bla bla bla example of a sentence”）还是只打印“sentence 1”？另外，您检查 sentenceDesignator 是否包含查询名称，我想您想检查实际的 Text 是否包含搜索词。

也许这会帮助你：

```
var lines = File.ReadAllLines(fileName);    
var sentences = new List<Sentence>(lines.Count());

foreach (var line in lines)
{
    var lineArray = line.Split(':');
    sentences.Add(new Sentence { sentenceDesignator = lineArray[0], Text = lineArray[1]});
}

foreach (var sentence in sentences)
{
    if (sentence.Text.Contains(searchTerm))
    {
        Console.WriteLine(sentence.sentenceDesignator);
        //Console.WriteLine(sentence.Text);
    }
} 
```

# actionscript-3 - 将共享对象保存在数据库中

> ID：15061292
> 
> 赞同：2
> 
> 时间：2013-02-25T06:30:17.487
> 
> 标签：actionscript-3, flex4, flex4.6

如果可以，我们可以保存`SharedObject`在数据库中，那么如何保存？我想`SharedObject's` 在数据库中保存多个，当我从其中一个中选择时，我将能够选择...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:53:57.087

如果您正在谈论`SharedObject`在客户端存储多个 '，您的应用程序可以简单地创建多个`SharedObjects`'，然后使用索引对它们进行后缀。当您启动您的应用程序时，您只需选择`SharedObject`要加载的内容。例子：

```
function getSharedObjectFromIndex(index:int):SharedObject {
    return SharedObject.getLocal("foobar"+index.toString());
}

var so:SharedObject;
if ( /*some condition*/ ) {
    so = getSharedObjectFromIndex(0);
}
else {
    so = getSharedObjectFromIndex(1);
} 
```

这不是我会采用的方法，我宁愿保存一个包含不同信息的数组，然后简单地将其保存在一个`SharedObject`.

* * *

如果您正在谈论将 a 存储`SharedObject`在服务器上的数据库中，那么您应该在问题中澄清这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T07:03:30.490

你想存储什么类型的对象？是的，您可以存储任何类型的共享对象，例如图像文件，并且可以随时选择。

# php - 循环遍历先前检测到的重复项并将它们合并到组中（PHP）

> ID：15061293
> 
> 赞同：0
> 
> 时间：2013-02-25T06:30:24.417
> 
> 标签：php

我有超过 1,000,000 行，其中包含一些需要检测并分组在一起的重复项。

分组看起来像这样（在数组中）：

```
0 -> 4123
3 -> 344,98222
10 -> 12,333423
12 -> 756
15 -> 1,10,30400 
```

我需要做的是浏览此列表并为每组重复项分配一个组号。这里的问题是一个键可能被分组到另一个，但是这个不是分组，而是再次向前分组到另一个。所有这些都必须在同一个组中。

使用我上面的例子，你可以看到 10 被分组到 12，12 被分组到 756，15 被分组到 1,10 和 30400。这意味着 10,12,333423,756,15,1,30400 全部必须在同一组！

所以我需要一种有效的方法来对所有这些分组应用一个数字。即`$group[10]=1; $group[12]=1; $group[333423]=1;`所有这些，以及每个分组。

我必须找到一种有效的方法来做到这一点，因为有这么多行。它们只能真正循环一次。我尝试过使用蛮力检查所有内容，但如果我必须遍历 1,000,0000 * 1,000,0000，那么脚本将永远不会结束，因为它的计算量太多。

这全是 PHP，一切都在数组中。此时它不在 MySQL 数据库中，因为我不需要它。

想法？

**更新**

我自己想通了，看看我的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:07:39.577

我想到了：

```
$test[0]=array(4123);
$test[3]=array(344,98222);
$test[10]=array(12,333423);
$test[12]=array(756);
$test[15]=array(1,10,30400);

$ongroup=1;
$assigned=array();
$group=array();
$idlist=array_keys($test);
foreach($idlist as $id)
    {
    if (!isset($group[$id]))
        {
        $group[$id]=$ongroup;
        $assigned[$ongroup][0]=$id;
        $ongroup++;
        }
    foreach($test[$id] as $val)
        {
        if (!isset($group[$val])) {$group[$val]=$group[$id]; $assigned[$group[$id]][]=$val;}
        else
            {
            foreach($assigned[$group[$val]] as $val2)
                {
                $group[$val2]=$group[$id];
                $assigned[$group[$id]][]=$val2;
                }
            unset($assigned[$group[$val]]);
            $group[$val]=$group[$id];
            $assigned[$group[$id]][]=$val;
            }
        }
    }

foreach($group as $id => $val)
echo $id." = $val \n"; 
```

结果：

```
0 = 1
4123 = 1
3 = 2
344 = 2
98222 = 2
10 = 4
12 = 4
333423 = 4
756 = 4
15 = 4
1 = 4
30400 = 4 
```

# php - 使用 cakePHP 的票务系统

> ID：15061294
> 
> 赞同：0
> 
> 时间：2013-02-25T06:30:32.940
> 
> 标签：php, cakephp, cakephp-2.2

我正在尝试为我们公司的 IT 相关问题创建票证类型的系统。

该票务系统应按以下方式工作：

*   用户登录并提交和“IT 查询”
*   查询使用唯一 ID 保存，并通过邮件发送给用户。
*   查询将邮寄给 IT 部门。
*   记录对查询的响应，当用户查看查询时，可以看到所有这些响应。

我对最后一个子弹有一些问题。

由于我正在使用两个数据库（具有唯一 ID 的 it_queries 和具有外来 ID 的 it_responses 票据 ID），因此我必须彼此拥有 3 个视图才能使其正常工作。

我有以下几点： ![我的想法](../Images/b7067bd3f54e97ff38ac3760f1750fa6.png)

我将如何实现这一点，或者有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:21:24.780

正如 Dipesh 所说，您应该正确关联表格，以使事情变得更容易和更快。另外，我建议您使用[CakePHP 命名约定](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html)，不仅适用于控制器、模型和视图，还适用于数据库设计。它将为您节省大量工作和头痛。您可以使用[蛋糕烘焙功能](http://book.cakephp.org/2.0/en/console-and-shells/code-generation-with-bake.html)。

除此之外，我看不到使用不同视图的意义。您可以改用元素（view/eElements/），但我会做得更简单。

您应该考虑到一个控制器可以（并且可能会）使用多个模型。这么说，您的`view`操作`ticketController`也可以调用`it_responses`表并检索另一个数组中的数据。

例如：

```
class TicketsController extends AppController {
    //using the It_response model
    var $uses = array('Ticket' , 'It_response');

    public function view($id){
        $ticketData = $this->Ticket->find('all', array('conditions' => array('Ticket.id' => $id));

        $responsesData = $this->It_response->find('all', array('conditions' => array('It_response.ticket_id' => $id));

        //setting the variables in the ticket view.
        $this->set('ticket', $ticketData);
        $this->set('responses', $responsesData);

    } 
```

无论如何，如果您的工单正确链接到响应模型，您只需要执行一个包含一组响应的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:41:42.750

要归档它，您需要在模型中定义所有正确的关联。

根据您的问题，我猜您的 ItRequest 模型与具有 hasMany 关系的 ItResponse 相关，因此您的 Response 表直接与 Request Table 具有一对一的关系。

所以定义它，然后在控制器中查询它并根据需要在视图文件中显示它。

[cakephp 模型关联（查看）](https://stackoverflow.com/questions/15054493/cakephp-model-association-view/15059884#15059884)

[CakePHP 模型 JOINS，缺少字段](https://stackoverflow.com/questions/14494861/cakephp-model-joins-missing-fields/14495492#14495492)

[从与 CakePhp 中的外键关联的两个表中检索数据](https://stackoverflow.com/questions/14517134/retrieving-data-from-two-tables-that-are-associated-with-a-forign-key-in-cakephp/14517503#14517503)

# c - newNode 内存泄漏/分段故障

> ID：15061298
> 
> 赞同：0
> 
> 时间：2013-02-25T06:30:45.187
> 
> 标签：c, struct

我不确定我做错了什么。根据 valgrind，我的程序看起来是正确的，但显然我的 newNode 函数中存在内存泄漏。我想知道我在 newNode 函数中做错了什么以及为什么它是错误的。

代码是：

```
#include<stdlib.h>
#include<stdio.h>
#include<string.h>
#include "list.h"
typedef struct lnode {
   char *term;
   int count;
   int last;
   struct lnode *next;
}lnode,*lnodePtr;
/**
 * Returns a new linked list node filled in with the given word and line, and
 * sets the count to be 1\. Make sure to duplicate the word, as the original word
 * may be modified by the calling function.
 */
 struct lnode *newNode (char* word, int line) {
    lnode *add=malloc(sizeof(lnode));
    add->term=(char *)malloc(strlen(word) + 1);
    strcpy((add -> term), word);
    add->count=1;
    add->last=line;
    add->next=NULL;
    return add;         
  }
  int main(int argc, char *argv[])
  {
    lnodePtr head=NULL; 
    char example[1000]="Name";
    char *ex=example;
    lnode *amc=newNode(ex,2);
    return(0);
  } 
```

那么问题只是我的 main 函数而不是我的 newNode 函数吗？我是链表的新手，所以你能帮我写 freeNode 吗？我认为 freeNode 会类似于我的 deleteNode （显然它不能修复内存泄漏）。我的 deleteNode 的代码是：

```
void deleteNode (struct lnode** head, struct lnode* node) {
    if(*head == NULL)
        return;

    if((node == *head)&&(((*head) -> next) != NULL)) 
    {
        *head = (*head) -> next;
    }
    else if((node == *head)&&(((*head) -> next) == NULL)) 
    {
        void *p = NULL;
        *head = (lnodePtr)p;
    }
    else
    {
        lnode *temp;
        temp=node;
        node=node->next;
        free(temp);
    }
    free(node);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:10:20.447

> ...我的 newNode 函数中存在内存泄漏...

好吧，您分配了一些内存（使用`malloc`）并且从未释放它（使用`free`）。这就是内存泄漏的定义。

您的 main 应该看起来像这样没有泄漏：

```
int main(int argc, char *argv[])
{
  lnodePtr head=NULL; 
  char example[1000]="Name";
  char *ex=example;
  lnode *amc=newNode(ex,2);
  // actual work?
  freeNode(amc);
} 
```

现在，你也需要写作`freeNode`方面的帮助吗？

# php - utf-8 字符集，7bit 编码，PHP 添加奇怪字符

> ID：15061302
> 
> 赞同：2
> 
> 时间：2013-02-25T06:31:12.410
> 
> 标签：php, encoding, utf-8, 7-bit

对不起，我的标题不是更好，但我什至不确定如何对这个问题进行分类。我知道这与编码有关，但我不确定如何。

我正在为 ESP 做一个项目。他们的电子邮件是 7 位编码的，带有 utf-8 字符集（这对我来说真的没有意义）。

展品 A：

![编码设置](../Images/658097326400ef40ead54a4ac850d085.png)

我通过 API 获取 html 电子邮件文本。然后我使用 PHP 修改一些文本（通过 str_replace），然后通过 API 发布新的 html。

一切都很好，除了每次我发帖时，我都会得到一些奇怪的字符，即每次我运行代码时它都会添加另一个时髦的字符。

这是在我进行任何更改之前电子邮件的受影响部分（这是在“查看”模式下，即浏览器将如何看到它）：

![开始](../Images/462b1bede1376be606d77eb9b0735f18.png)

这是产生版权符号和上面带有“acute”符号的 A 的代码：

```
 © 2012 H 
```

奇怪的是，摆脱上面带有“尖锐”符号的 A 的唯一方法是删除版权符号......不知何故它们是相关的。

每次我通过 PHP 发布到 API 时，我都会得到一些新的时髦字符，因此：

第一篇文章：

![在此处输入图像描述](../Images/4c01314f3c06d5fc54851afcbcb80380.png)

第二个帖子：

![在此处输入图像描述](../Images/0eeda7e599dbc35010a661cccf07db1d.png)

第三个帖子：

![在此处输入图像描述](../Images/cb076b54b415f98a3497910c1fd06828.png)

太奇怪了……这是唯一不工作的部分！请帮助......这让我发疯了！:-)

**编辑：**

这是相关的PHP：

1.  从 xml 响应中获取 html：

    $html = (string)$data;

2.  替换一些东西：

    $newHTML = str_replace($oldExpiresString, $newExpiresString, $html);

3.  将新的 HTML 放入 xml post 变量中：

    $input = ''.$newHTML.'';

4.  URL对其进行编码：

    $formatted = urlencode($input);

5.  通过 curl 发布：

    $postVariables = array( 'type' => urlencode($type), 'activity' => urlencode($activity), 'input' => urlencode($input) );

    $rawResponseString = post_url($urlBase, $postVariables); 打印 $rawResponseString;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:04:59.727

详细说明[我的评论](https://stackoverflow.com/questions/15061302/utf-8-character-set-7bit-encoding-php-adding-strange-characters/15062524#comment21178475_15061302)：

```
$screwed = '&#194;&#169;';

echo html_entity_decode($screwed, ENT_COMPAT, 'ISO-8859-1'); 
```

这将返回“©”，将搞砸的多单字节 HTML 编码解码回**UTF-8 编码**文本。因此，从这里您只需将文本视为 UTF-8 编码（现在就是这样）。

# python - 访问在while循环中获取的用户输入（Python）

> ID：15061305
> 
> 赞同：0
> 
> 时间：2013-02-25T06:31:18.963
> 
> 标签：python

我希望用户输入随机数。我运行一个while循环，直到用户输入0。

```
while input()!=0:
    print "Your number is:...??" 
```

我的问题是：是否有任何特殊变量（如 Perl 中的 $_）可以访问用户输入？例如（在上述情况下）我想打印用户输入的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:34:21.237

您需要将结果分配给一个变量：

```
s = None
while s != 0:
  s = int(input("Enter number: "))
  print("Your number is: {}".format(s)) 
```

这是一个 python3 示例。对于 python 2.x，你应该使用它`raw_input`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:36:03.727

另一种方法是使用`iter`并提供一个可调用的：

```
for num in iter(lambda: int(raw_input('Your number is: ')), 0):
    print 'You entered', num 
```

# android - 如何从 sqlite 获取值并将其存储在数组中，然后如何将该数组提供给 android 中的列表视图

> ID：15061319
> 
> 赞同：1
> 
> 时间：2013-02-25T06:32:26.933
> 
> 标签：android

伙计们，当我运行这个时，我得到错误作为事实异常和空指针异常我如何修复它
如何从 sqlite 获取值并将其存储在数组中然后如何将该数组提供给 android 中的列表视图

公共类 FindByLocation 扩展 ListActivity{

```
AutoCompleteTextView t1;
Button b1;
ListView l1;
SQLiteDatabase sqldb;
Cursor cur;
String[] loc;
String[] locat={"//some values i given "};  

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.location);
    t1=(AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
    b1=(Button)findViewById(R.id.locationSearchbtn);

    l1=getListView();
    l1.setChoiceMode(2);
    l1.setTextFilterEnabled(true);
    ArrayAdapter<String> aa=new ArrayAdapter<String>(FindByLocation.this, android.R.layout.simple_dropdown_item_1line, locat);
    t1.setAdapter(aa);

    b1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String getloc=t1.getText().toString();
            sqldb=FindByLocation.this.openOrCreateDatabase("madrasmtcinfo", MODE_PRIVATE, null);
            try{
                cur=sqldb.rawQuery("select * from mtcbusroute where route Like '%"+getloc+"%';", null);

                if(cur.moveToFirst()){  
                    int i=0;
                    do{

                        loc[i]="" + cur.getString(cur.getColumnIndexOrThrow("routeno")).toString() + ", " + cur.getString(cur.getColumnIndexOrThrow("source")).toString()+", "+ cur.getString(cur.getColumnIndexOrThrow("Destination")).toString();
                        i++;
                        cur.moveToNext();   
                    }while(cur.isLast()!=true);
                }
            }

            catch(Exception e){
                Toast.makeText(getBaseContext(), "Error"+e, Toast.LENGTH_SHORT).show();
            }
            setListAdapter(new ArrayAdapter<String>(FindByLocation.this, android.R.layout.simple_list_item_1, loc));

        }
    });
}
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    Toast.makeText(getBaseContext(), ""+loc[position], Toast.LENGTH_SHORT).show();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:56:55.457

看看这些链接

[SQLite 和填充列表视图，android](https://stackoverflow.com/questions/2982948/sqlite-and-populating-list-view-android)

[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)。

我想它会对你有很大帮助。让我知道你对此的状态。

# iphone - UITableView 分组背景图片

> ID：15061321
> 
> 赞同：0
> 
> 时间：2013-02-25T06:32:33.780
> 
> 标签：iphone, ios, objective-c, uitableview

我正在设置`UITableView`分组图像，但它显示整个表格我希望它应该像下面的第二个表格它应该只作为背景图像的单元格和表格区域而不是第二个表格中的灰色边框谢谢。

![在此处输入图像描述](../Images/cc8635dfb82ac6f79b670b321b116ba4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T06:35:32.650

使用以下代码。

```
self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"Background.png"]]; 
```

有关为分组设置背景图像的另一种方法，`UITableView`请阅读[本文档。](http://howtomakeiphoneapps.com/how-to-add-a-nice-background-image-to-your-grouped-table-view/40/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:39:27.973

```
UIImageView *tempImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"TableViewBackground.png"]];
[tempImageView setFrame:self.tableView.frame]; 
self.tableView.backgroundView = tempImageView;
[tempImageView release]; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-25T07:21:30.257

> 而不是将背景图像提供给表格。为单元格提供背景图像/颜色。

```
cell.backgroundColor=[UIColor colorWithPatternImage:[UIImage  imageNamed:@"Background.png"]];

since colorWithPattern is very expensive which causes memory leak,avoid using colorWithPatternImage

instead you can use 
cell.backgroundColor=[UIColor initWithRed:0.25 green:0.25 blue:0.25 alpha:1];

//change the RGB as per the image 
```

# ios6 - ios 如何在地图视图中移动图钉？

> ID：15061322
> 
> 赞同：0
> 
> 时间：2013-02-25T06:32:49.163
> 
> 标签：ios6, mapkit

最近我开始研究一个与地图相关的项目。我的应用程序的流程是，我想在地图上显示我朋友的时刻。我有一个后端服务器，它有关于这些人当前位置的准确信息。所以，我可以从我的服务器上获取他们的经纬度信息。但唯一的问题是我怎样才能像我的当前位置针指针一样在地图上显示他们的时刻？当我用更新的位置刷新地图时，大头针应该移动到新位置。你们能帮我如何将不同的别针同时移动到不同的位置吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:42:16.367

试试这个代码，它非常有用：

```
// Map view view annotation delegate method
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:
(id <MKAnnotation>)annotation
{
    MKPinAnnotationView *pinView = nil;
    if(annotation != mapView.userLocation)
    {
        static NSString *defaultPinID = @"com.invasivecode.pin";
        pinView = (MKPinAnnotationView *)[_ex_map_view dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
        if ( pinView == nil ) pinView = [[MKPinAnnotationView alloc]
                                          initWithAnnotation:annotation reuseIdentifier:defaultPinID];
        [pinView setDraggable:YES];
        pinView.pinColor = MKPinAnnotationColorRed;
        pinView.canShowCallout = YES;
        pinView.animatesDrop = YES;
    }
    else
    {
        [mapView.userLocation setTitle:@"I am here"];
    }
    return pinView;
} 
```

# php - 为什么 smtp 服务器不再发送电子邮件了？

> ID：15061324
> 
> 赞同：2
> 
> 时间：2013-02-25T06:32:50.357
> 
> 标签：php, symfony, smtp, symfony-forms

我遇到了一个非常奇怪的问题。我正在通过我的网站向其他收件人发送电子邮件。它在 symfony 中，我对此非常陌生。这是我的代码

配置文件

```
swiftmailer:
transport:  smtp
host:       smtp.gmail.com
encryption: ssl
username:   "myusername"
password:   "mypassword"
spool:     { type: memory } 
```

这是我的表单功能

```
 public function formemailAction(Request $request)
 {
 // create a task and give it some dummy data for this example
        $newtask = new Task();
        $newtask->setsubject('add subject here');
        $newtask->setdescription("write your feed back here");
        $form = $this->createFormBuilder($newtask)
            ->add('subject', 'text')
            ->add('description', 'textarea')
            ->getForm();

 return $this->render('ServiceRequestBundle:Desk:shownotification.html.twig', array('form' => $form->createView(),
 ));
 } 
```

在单击提交的表单中，我正在调用一个函数，我正在其中发送电子邮件

```
public function sendemailAction()
  {
      $messages = \Swift_Message::newInstance()
          ->setSubject('again Notification Email')
          ->setFrom('myusername@gmail.com')
          ->setTo('username@gmail.com')
          ->setBody("we know that you dont know whats happening" )
      ;
      $this->get('mailer')->send($messages);

      return $this->render('ServiceRequestBundle:Desk:shownotification.html.twig');
  } 
```

现在的问题是它工作正常。但在发送 4 到 5 封电子邮件后，它停止工作，我的电子邮件不再发送。我的第一个猜测是因为我一次又一次地调试我的应用程序，并且可能只是因为一次又一次地发送相同的电子邮件而发生这种情况。如果是这样，我会按照本[教程](http://symfony.com/doc/current/cookbook/email/email.html)进行操作，那么我该如何解决这个问题，如果还有其他问题，请帮助我。

我检查了我的 php 错误日志，我发现了这个

```
#0 [internal function]: Symfony\Component\HttpKernel\Debug\ErrorHandler->handle(2, 'SessionHandler:...', 'C:\xampp\htdocs...', 558, Array)
#1 C:\xampp\htdocs\jts\app\cache\dev\classes.php(558): SessionHandler->write('tatrpm617uplo16...', '_sf2_attributes...')
#2 [internal function]: Symfony\Component\HttpFoundation\Session\Storage\Proxy\SessionHandlerProxy->write('tatrpm617uplo16...', '_sf2_attributes...')
#3 [internal function]: session_write_close()
#4 {main}
  thrown in C:\xampp\htdocs\jts\app\cache\dev\classes.php on line 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:23:56.160

我认为您需要中继，因为 Gmail 会认为它是垃圾邮件并可能会阻止您的地址。

您可以在 CentOS 上使用 PostFix 或在 Windows 中安装 SMTP 服务器

**CentOS** [http://www.postfix.org/](http://www.postfix.org/)

**WINDOWS：** 可以下载 SMTP 服务器

[http://www.microsoft.com/en-us/download/details.aspx?id=7887](http://www.microsoft.com/en-us/download/details.aspx?id=7887)

并使用这些步骤进行配置

[http://technet.microsoft.com/en-us/library/cc772058(WS.10).aspx](http://technet.microsoft.com/en-us/library/cc772058(WS.10).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:23:50.563

如果是 smtp 传输，请检查您的 php 日志，gmail 的身份验证可能存在问题。您是否尝试过**tls**而不是**ssl**？

您可以尝试通过您自己的 smtp 服务器发送邮件：

首先，您应该检查您的服务器上是否正在运行 smtp 服务器：

```
netstat -tulpen | grep :25 
```

这应该返回类似这样的内容：

```
tcp  0  0 0.0.0.0:25  0.0.0.0:* LISTEN  0  8485 1213/master 
```

如果没有，您可以尝试启动服务器。在后缀的情况下，这是：

```
/etc/init.d/postfix start 
```

如果您仍然没有收到邮件，请检查

```
/var/log/maillog 
```

可能是邮件无法投递，您应该在邮件日志中看到更多信息

# c# - 如何检测点击在面板上绘制的不规则图像

> ID：15061330
> 
> 赞同：1
> 
> 时间：2013-02-25T06:33:10.950
> 
> 标签：c#, winforms, graphics

实际上我正在面板上绘制图像。图像的形状不规则。对于鼠标单击，我想显示一条消息，无论单击是在图像上还是在面板上完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:12:09.447

以下是在面板上仅绘制图像的场景：

声明字段：

```
private readonly Bitmap _image;
private readonly Graphics _panelGraphics; 
```

初始化字段：

```
_image = new Bitmap(100, 100); // Image and panel have same size.
var imageGraphics = Graphics.FromImage(_image);
imageGraphics.FillEllipse(Brushes.Red, 10, 10, 50, 50); // Some irregular image.

panel2.Size = new Size(100, 100);
panel2.BackColor = Color.Transparent; // Panel's background color is transparent.
_panelGraphics = panel2.CreateGraphics(); 
```

面板绘制事件句柄：

```
private void panel_Paint(object sender, PaintEventArgs e)
{
    _panelGraphics.DrawImageUnscaled(_image, 0, 0);
} 
```

面板鼠标按下事件句柄：

```
private void panel_MouseDown(object sender, MouseEventArgs e)
{
    Debug.WriteLine(_image.GetPixel(e.Location.X, e.Location.Y).A != 0 ? "In" : "Miss");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:35:44.857

您可以使用[Region Class](http://msdn.microsoft.com/en-us/library/system.drawing.region.aspx)及其[Intersect 方法](http://msdn.microsoft.com/en-us/library/7wysx694.aspx)来实现您的目标，但可能存在更好的解决方案。但是，在找到它们之前，请尝试以下基于在面板上绘制的椭圆中捕获鼠标点的示例。

声明字段：

```
private readonly GraphicsPath _graphicsPath;
private readonly Region _region;
private readonly Graphics _panelGraphics; 
```

初始化以上字段：

```
_graphicsPath = new GraphicsPath();
_graphicsPath.AddEllipse(100, 100, 100, 100); // Path that contains simple ellipse. You can add here more shapes and combine them in similar manner as you draw them.
_region = new Region(_graphicsPath); // Create region, that contains Intersect method.
_panelGraphics = panel1.CreateGraphics(); // Graphics for the panel. 
```

面板绘制事件句柄：

```
private void panel_Paint(object sender, PaintEventArgs e)
{
    _panelGraphics.FillEllipse(Brushes.Red, 100, 100, 100, 100); // Draw your structure.
} 
```

面板鼠标按下事件句柄：

```
private void panel_MouseDown(object sender, MouseEventArgs e)
{
    var cursorRectangle = new Rectangle(e.Location, new Size(1, 1)); // We need rectangle for Intersect method.
    var copyOfRegion = _region.Clone(); // Don't break original region.
    copyOfRegion.Intersect(cursorRectangle); // Check whether cursor is in complex shape.

    Debug.WriteLine(copyOfRegion.IsEmpty(_panelGraphics) ? "Miss" : "In");
} 
```

# ios - iOS背景精灵不显示

> ID：15061332
> 
> 赞同：0
> 
> 时间：2013-02-25T06:33:21.807
> 
> 标签：ios, css, responsive-design, background-image

我手上有一个棘手的小虫子。

考虑[这个页面](http://tinycouchbigconcepts.com/our-process/)。[伴随段落](http://imgur.com/3Hts3cr)的图像都是从精灵中调用的，并且随着视口的缩小，会调用不同的背景位置来适应响应式设计中的各种布局。

在浏览器测试中，所有视图/设备都没有为所有设备/浏览器提供严重的错误，除了 IE<9...和[​​iOS](http://imgur.com/NE6LNKS)（[随附的检查器视图](http://imgur.com/6jHqmtJ)）。似乎不知何故 iOS*设备*（相同的视图/宽度在桌面上正确显示）出于某种原因，没有在这些 div 中显示任何内容。Inspector 没有抛出任何错误，并且网络计时器显示精灵确实加载了。

为了加深情节，如果我调用直接 URL，我可以在 iOS Safari 中加载精灵。所有图像资产的 Perms 设置为 755，我尝试使用各种 dom 元素（div、span、p、i）和背景技术（即包括 a `&nbsp;`in the `<div>`、declaring`content: '';`和 conversely `content: ' ';`）；

我已经在 Mac/Win Chrome/Firefox/Safari、Android 设备、iPhone4/5 和 iPad (iOS6) 上对此进行了测试。不显示（至少在我的硬件上）背景 div 的设备是 iPhone 和 iPad。

有人对此有见识吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:23:14.307

可爱的网站。

问题是你的 Tiny Couch 里有一个异常巨大的精灵。虽然它只有 300kb 多一点（仍然很大），但可能是尺寸意味着它无法处理 - 我以前从未见过这个，所以我可能会弄错。

我喜欢尝试使用 sprite 来提供服务的想法，这意味着只有一个 http 请求，但在这种情况下，你的 sprite 的底部部分只会在移动设备上查看时被调用。可能值得将其拆分为桌面精灵和移动精灵，然后使用适当的媒体查询加载它们。

原因

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T01:57:09.500

移动版 Safari 中存在一个错误，导致总分辨率大于 2,000,000 像素的 CSS 背景图像根本不显示。2010 年的一篇[博](http://www.defusion.org.uk/archives/2010/02/19/shrinking-large-background-image-bug-in-iphone-safari/)文对此进行了深入探讨。据我所知，它从未被纠正过。要显示背景图像，您需要将其缩小（就总像素而言）或将其分成两个或多个精灵。我以前肯定见过这种情况；唯一的解决方法是使图像更小。不是文件大小，以像素为单位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T09:12:07.377

在不同的情况下，限制似乎是不同的。我正在使用 iOS 5.1.1 的 iPhone 4 设备上进行测试，文件本身的限制似乎不如背景大小重要。如果我使用 1100 像素 X 1000 像素的背景，它将无法工作。但是如果我将 background-size 设置为 1000px X 1000px 它将起作用。

因此，如果我使用高 DPI(2x) 版本，2000px X 2000px 并将图像大小设置为 1000px X 1000px，它仍然可以工作，即使背景本身更大。

因此，建议您使用 1000px X 1000px 作为默认精灵，然后您至少可以拥有 2xDPI。没试过3x。

# c - 将 Arduino Motor Shield 与蓝牙 Shield 结合使用

> ID：15061334
> 
> 赞同：1
> 
> 时间：2013-02-25T06:33:26.043
> 
> 标签：c, bluetooth, arduino, microcontroller, robotics

希望这不会太具体而无法保证问题结束。

我正在与校园里的一个研究小组合作，学习机器人和自动化。我目前的任务是了解 Arduino 电机屏蔽的内部和外部，并将其与蓝牙屏蔽结合起来。

我们正在使用[这个蓝牙屏蔽](http://www.seeedstudio.com/depot/bluetooth-shield-p-866.html?cPath=132_134)和[这个电机屏蔽](http://arduino.cc/en/Main/ArduinoMotorShieldR3)。如有必要，我们还可以使用[此电机护罩](http://playground.arduino.cc/Main/AdafruitMotorShield)。

在大多数情况下，我当前的代码分别适用于每个板，但是当我将它们组合起来时，突然没有任何效果。电机部分仅在蓝牙特定代码被注释掉时才起作用。这使我得出结论，即存在引脚冲突。话虽这么说，有什么办法可以让它工作吗？任何解决方法等。

这是我正在使用的代码，以防我的代码出现问题。

```
#include <SoftwareSerial.h>   // Necessary to use the bluetooth Software Serial Port
#define RxD 7
#define TxD 6

#define DEBUG_ENABLED  1

SoftwareSerial bts(RxD,TxD);

int drive = 12;                    // Pin definitions
int brake = 9;
int power = 3;

const int DRIVE_F = 1;            // Command options returned from parseCommand
const int DRIVE_B = 2;
const int LEFT = 3;
const int RIGHT = 4;
const int STOP = 5;
const int NONE = 0;

void setup() 
{ 
  pinMode(RxD, INPUT);            // Set up pin modes
  pinMode(TxD, OUTPUT);
  pinMode(drive, OUTPUT);
  pinMode(brake, OUTPUT);
  analogWrite(power, 80);

  digitalWrite(drive, LOW);
  digitalWrite(brake, HIGH);
  setupBlueToothConnection();
} 

void loop() 
{ 
    switch(parseCommand())
    {
        case DRIVE_F:                            // Switch through command returns.
              forward();
              bts.println("Driving forward");
              delay(1000);
              fullStop();                        // Go ahead and stop. Don't want
              break;                             // the car to run infinitely yet.

        case DRIVE_B:
              backward();
              bts.println("Driving backward");
              delay(1000);
              fullStop();
              break;

         case LEFT:
              turnLeft();                        // These do nothing for now. Just here for later.
              break;

         case RIGHT:
              turnRight();
              break;

         case STOP:
             fullStop();
             bts.println("Stopping");            // Stop the car. Will be needed later.
             break;

         default:
             turnLeft();                        // If invalid command returned,
             delay(250);                        // wiggle wheels for an error message.
             turnRight();
             delay(250);
             turnStraight();
             break;
    }
} 

void setupBlueToothConnection()                // Not exactly sure why all this is needed. It was in the sample code, so I kept it all
{
  bts.begin(38400); //Set BluetoothBee BaudRate to default baud rate 38400
  bts.print("\r\n+STWMOD=0\r\n"); //set the bluetooth work in slave mode
  bts.print("\r\n+STNA=SeeedBTSlave\r\n"); //set the bluetooth name as "SeeedBTSlave"
  bts.print("\r\n+STOAUT=1\r\n"); // Permit Paired device to connect me
  bts.print("\r\n+STAUTO=0\r\n"); // Auto-connection should be forbidden here
  delay(2000); // This delay is required.
  bts.print("\r\n+INQ=1\r\n"); //make the slave bluetooth inquirable 
  Serial.println("The slave bluetooth is inquirable!");
  delay(2000); // This delay is required.
  bts.flush();
}

void forward()
{
    digitalWrite(drive, HIGH);
    digitalWrite(brake, LOW);
}

void backward()
{
    digitalWrite(drive, LOW);
    digitalWrite(brake, LOW);
}

void fullStop()
{
    digitalWrite(brake, HIGH);
}

void turnRight()
{

}

void turnLeft()
{

}

void turnStraight()
{

}

int parseCommand()
{
    String command = "";                        // String to hold the command
    char recvChar;                              // Char to hold each character.
    while(true)
    {
        if(bts.available())
        {
            recvChar = bts.read();
            if(recvChar == 13)
                bts.println();                // If char received is an ASCII 13, carriage-return/enter key
            else                              // print new line.
                bts.print(recvChar);          // Else, print received char to serial so user can see his/her input.

            if(recvChar != -1 && recvChar != 13)
                command += recvChar;        // If not -1 (no input received from read()) or 13, concat it with command

            if(recvChar == 13)
            {                               // If enter pressed, check the command variable.
                if( command == "forward" )
                    return DRIVE_F;
                else if( command == "back" || command == "backward")
                    return DRIVE_B;
                else if( command == "stop" )
                    return STOP;
                else
                {
                    bts.println("'" + command + "' is an invalid command.");
                    return NONE;           // If invalid, return NONE and print error.
                }
            }
        }

    }

} 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T03:16:02.250

查看两个屏蔽，我怀疑引脚 6 上的引脚冲突。Arduino 电机屏蔽显示“2 个 TinkerKit 连接器，用于两个 Aanlog 输出（中间为橙色），连接到引脚 D5 和 D6 上的 PWM 输出。” 他们可能在 D6 上有一个下拉或上拉电阻，这会干扰您的蓝牙 UART 通信。

有没有办法通过引脚 0 和 1 路由您的蓝牙通信？如果你这样做，你必须使用蓝牙而不是 USB。

也许更简单的方法是切换到一个电机护罩，它*只是*一个电机护罩并且需要更少的引脚。像[Sparkfun 的 Ardumotor 一样](https://www.sparkfun.com/products/9815)，它只使用引脚3、11、12[和 13](http://www.sparkfun.com/datasheets/DevTools/Arduino/Ardumoto_v13.pdf)。

现在有一个[专门的机器人小组](https://robotics.stackexchange.com/)。

# c# - 如何使用 Javascript 找到动态生成的控件？

> ID：15061341
> 
> 赞同：2
> 
> 时间：2013-02-25T06:34:16.390
> 
> 标签：c#, javascript, tablesorter

我在后面的代码中创建了一个 HTML 表，并将其添加到 ASPX 页面的面板控件中。

现在我想在 javascript 中使用它的 id 来获取表格来实现表格排序器。

```
 $(document).ready(function () {
        $("myTable").tablesorter();
    }); 
```

它没有识别我在 Codebehind 中创建的 mytable 控件：

```
 HtmlTable Table= new HtmlTable();        
       Table.ID = "NavTable"; 
```

请帮助我尝试多种方法，但没有任何效果。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:42:26.663

你有几个选择。基本思想是将感兴趣的控件的 ClientID 输出到您可以找到的地方。

例如：

```
$(document).ready(function () {
    $("#<%=this.TableControl.ClientID%>").tablesorter();
}); 
```

或者：如果您在 ASP.NET 4.5 环境中，您可以设置 ClientIDMode="Static" 并直接在脚本中对其进行硬编码。但请注意，如果您引入了 ID 冲突，ASP.NET 会打击您的手腕。

```
<asp:Grid ClientIDMode="Static" ID="my_static_table_id" />
$(document).ready(function () {
    $("#my_static_table_id").tablesorter();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:41:37.653

您的示例包含不同的 id`myTable`和`NavTable`. 如果您想按 id 选择，您使用的选择器不正确。您的选择器必须看起来像：

```
$("#NavTable").tablesorter(); 
```

所以你忘记了选择器值的尖锐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T06:43:28.053

这里有几个问题。

1.  您尝试从 javascript 中引用“myTable”，并将其命名为“NavTable”。

2.  在 jQuery 中通过 id 引用 html 元素需要 a`#`在开头告诉 jQuery 选择器是一个 ID 而不是一个 html 标记名称。

3.  为确保 ASP.NET 在 HTML 输出中不使用另一个 id，您应该`ClientID`从您在 C# 中创建的 ASP.NET 服务器端对象获取值（如果在 ASP.NET 用户控件中声明，则可能会发生这种情况）。

代码将如下所示：

```
$(document).ready(function () {
    $("#<%=Table.ClientID%>").tablesorter();
}); 
```

为此，您还需要将`Table`变量声明为类中的成员，以便设计代码在范围内看到它。否则，这只能在您创建它的方法中访问。

如果您知道这将始终生成您为其分配的实际 ID，您可以在 javascript 中对其进行硬编码，如下所示：

```
$(document).ready(function () {
    $("#NavTable").tablesorter();
}); 
```

# linux - 如何在 Unix shell 脚本中为任何目录结构构建文件夹路径

> ID：15061344
> 
> 赞同：0
> 
> 时间：2013-02-25T06:34:26.807
> 
> 标签：linux, shell, unix, scripting

我的应用程序有一个文件夹结构，如

```
/PNRPHD1/ex1/11.txt

/PNRPHD1/ex1/ex2/11.txt

/PNRPHD1/ex1/ex2/ex3/23.txt

/PNRPHD1/ex1/ex2/34.txt

/PNRPHD1/ex1/ex3/sp4/sp3/4334.txt, 
```

但是**/PNRPHD1 是主文件夹**，在该文件夹中我需要每次迭代并转到最后一级并检查该文件是否存在，是否在该目录中，如果 File 是目录的内容，那么我需要构建那条路，走出那个循环。我应该将上述路径作为变量的输出。

注意：**在上面的目录结构中，每个目录可以包含另一个子目录或文件，它不会同时包含**

任何人都可以建议我在 IF 循环中尝试这样做，但是代码太多了，我想用最少的代码来实现

```
DIR_REG = /PNRPHD1;
    ls -p $DIR_REG | while read -r dir
    do
        echo "directory under is  -- " ${dir} >>${DEBUG_LOG_FILE}
        BUP="/cygdrive/d/psoft/${PSFT_SID}/${dir}";

        ls -p $BUP | while read -r dir1
        do 
            if [ -f "${BUP}/${dir1}" ]; then 
                mkdir -p "${BUP}backup"
                echo "level of directory  -- " ${BUP}/${dir1} >>${DEBUG_LOG_FILE}
            else
                echo "level of directory  -- " ${BUP}/${dir1} >>${DEBUG_LOG_FILE}
            fi

        done

    done 
```

我正在寻找一个更好的 shell 脚本和简洁的脚本，它可以完成所需的任务..

更新：
我希望循环的输出在每次迭代中都应该有一个变量输出。第一种情况：/ex1/ 第两种情况：/ex1/ex2 第三种情况：ex1/ex2/ex3/ 第四种情况：/ex1/ex2/ex3/ 第三种情况：/ex1/ex3/sp4/sp3/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:38:24.583

为什么不创建一次您需要的目录树。然后使用`tar`创建一个 tar 文件。任何需要相同目录结构的机器只需解压`tar`文件即可。

可以从[这里找到 tar 的手册页](http://linux.die.net/man/1/tar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:54:52.487

我尝试使用 find 命令 find 。-type f -打印；列出所有类型的文件

和

寻找 。-type d -打印；列出所有类型的目录

一旦我们得到文件或目录的列表，使用 DirName 命令来获取路径

# c# - 通过一种形式 C# 或 vb.net 在表中插入数据

> ID：15061345
> 
> 赞同：0
> 
> 时间：2013-02-25T06:34:27.913
> 
> 标签：c#, vb.net, visual-studio-2010, sql-server-2008

![家基地图书馆馆藏数据库][1]

[http://img715.imageshack.us/img715/1159/finallibrary.jpg](http://img715.imageshack.us/img715/1159/finallibrary.jpg)

我正在为我的家庭图书馆开发一个小型图书数据库应用程序。我可以通过此命令在 sql server 2008 的多个相关表中插入记录 我不知道如何从 Visual Studio 2008 C# 或 vb、net 插入它 我想为书籍信息创建一个表单，我想从一种形式到数据库是可能的吗？请为我提供任何教程提前谢谢

```
DECLARE @bookid INT
DECLARE @authoridId INT
DECLARE @classid INT
DECLARE @catagaryid INT
DECLARE @publisherid INT
DECLARE @paddressid INT

BEGIN TRANSACTION

INSERT  INTO dbo.author
        ( aname )
VALUES  ( 'visnu priya singh'  -- author_name - varchar(50)
          ) 
SET @authoridId = @@IDENTITY

INSERT  INTO dbo.class
        ( classname )
VALUES  ( '12'  -- classname - nvarchar(255)
          ) 
SET @classid = @@IDENTITY  
INSERT  INTO dbo.catagary_main
        ( catagaryname )
VALUES  ( 'networking'  -- catagaryname - nvarchar(255)
          )
SET @catagaryid = @@IDENTITY    
INSERT  INTO dbo.catagary_sub
        ( subcatagaryname ,
          catagaryid 
        )
VALUES  ( 'computer networking' , -- subcatagaryname - nvarchar(255)
          @catagaryid  -- catagaryid - int

        )          
INSERT  INTO dbo.publisher
        ( pname ,
          pconnumer 
        )
VALUES  ( 'asian computek book' , -- pname - nvarchar(255)
          '011232' -- pconnumer - nvarchar(255)               
        )
SET @publisherid = @@IDENTITY
INSERT INTO dbo.paadress
        ( p_house_no ,
          parea ,
          pstate ,
          ppin_code 
        )
VALUES  ( '7/001,first floor,'   , -- p_house_no - nvarchar(255)
          'ans road, ganj' , -- parea - nvarchar(255)
          'delhi' , -- pstate - nvarchar(255)
          '110002'  -- ppin_code - nvarchar(255)
        )
        SET  @paddressid=@@IDENTITY
INSERT INTO dbo.Publisher_aadresss
        ( publisherid, paddressid )
VALUES  ( @publisherid, -- publisherid - int
          @paddressid  -- paddressid - int
          )         
INSERT INTO dbo.books
        ( book_name ,
          authorid ,
          yop ,
          edition ,
          price ,
          isbn_number ,
          classid ,
          catagaryid ,
          publisherid ,
          Pages
        )
VALUES  ( 'computer networking course' , -- book_name - nvarchar(255)
          @authoridId , -- authorid - int
          2006 , -- yop - int
          'first edition' , -- edition - nvarchar(255)
          187.50 , -- price - int
          '81-7317-9-7' , -- isbn_number - nvarchar(255)
          @classid , -- classid - int
          @catagaryid , -- catagaryid - int
          @publisherid , -- publisherid - int
          368  -- Pages - int
        ) 
        SET @bookid=@@IDENTITY 
        INSERT  INTO dbo.book_written_by_author
        ( bookid, authorid )
VALUES  ( @bookid, -- bookid - int
          @authoridId  -- authorid - int
          )

COMMIT TRANSACTION 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:38:23.537

是的，它可能............你可以使用[ADO.NET](http://csharp-station.com/Tutorial/AdoDotNet)。

参考：

[使用 Visual c# 向 SQL Server DB 添加行](http://social.msdn.microsoft.com/forums/en-US/Vsexpressvcs/thread/e0fef04a-4815-4d8a-be1d-a636f5447619/)

[如何使用 C#.net 将数据插入 Ms SQL server 2008](http://www.codeproject.com/Questions/340852/How-to-insert-Data-to-Ms-SQL-server-2008-using-Csh)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:38:48.347

将其保存为存储过程，然后从后面的代码中调用它

# java - 在不同的jcombobox中选择后如何设置jcombobox的不同字符串数组？

> ID：15061346
> 
> 赞同：2
> 
> 时间：2013-02-25T06:34:36.417
> 
> 标签：java, swing, jcombobox

我用这样的东西做了一个gui：

```
String[] days29 = {"1",....."29"};
String[] days30 = {"1",....."30"};
String[] days31 = {"1",....."31"};
String[] mths = {"January",..."December"};

JComboBox months = new JComboBox(mths);
JComboBox days = new JComboBox();

public daysAdjuster(){
    if(months.getSelectedItem().equals.("January")){
        days = new JComboBox(days31);
    }else if(months.getSelectedItem().equals.("February")){
        days = new JComboBox(days29);
    }else if(months.getSelectedItem().equals.("April")){
        days = new JComboBox(days30);
    }

public static void main(String[] args){
// JFrame codes here
daysAdjuster();
} 
```

我想要做的是，如果我在 JComboBox "months" 中选择 31 天的月份，JComboBox "days" 将使用 "days31" 字符串数组输出项目，如果我选择只有 30 天的月份，它将输出字符串我的日子 JComboBox 中的数组“days30”。

但我得到的唯一结果是 [[ days = new JComboBox(days31) ]] 即使我选择了不同的月份。例如，如果我选择 Febraury，它仍然会显示一个带有“days31”字符串数组的“days”JComboBox。显然，我在我的日子里弄错了Adjuster或者只是弄错了，请纠正我的错误，无法弄清楚。提前致谢！

笔记：

1.  一月是jcombobox“月”中的默认选择项

2.  从未在 if-else 语句和字符串数组声明中犯过拼写错误（以防您在我的示例中发现拼写错误）

3.  “月”和“天” jcombobox 在 jframe 中可见，我现在正在制作的 gui 中的 jcombobox 从未出错

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T06:52:41.290

我可以在这里提出几点：

1.  你有一个额外`.`的条件`equals`。`if`
2.  始终尽可能使用预定义的数组。在这里，您应该使用几个月的预定义数组，如下所示：

    `String[] mths = (new DateFormatSymbols()).getMonths();`

3.  不要每次都重新初始化 days 组合框，而是使用模型并更改其值。

4.  参考：
    *   [如何使用组合框？](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)
    *   [JComboBox 中的自定义模型](http://www.java2s.com/Tutorial/Java/0240__Swing/JComboBoxUsingtheCustomModel.htm)
    *   看看这个答案：[JComboBox Action listener](https://stackoverflow.com/questions/6539001/jcombobox-action-listener/6540003#6540003)
    *   [如何通过使用另一个组合框摆动来控制组合框](https://stackoverflow.com/questions/10367834/how-to-control-a-combo-box-by-using-another-combo-box-swing)

# ruby-on-rails - Ruby on Rails：RVM 和 Rubygems 错误

> ID：15061347
> 
> 赞同：3
> 
> 时间：2013-02-25T06:34:37.073
> 
> 标签：ruby-on-rails, ruby, rubygems

我刚刚完成了“rvm ruby​​gems 1.3.5”和“gem install rails -v 2.2.2”，它们都工作正常，我可以使用 rails 一段时间。

现在好像rails和rubygem突然消失了，所以我重新安装了rubygem，但现在尝试重新安装rails，我得到了

```
ERROR:  While executing gem (NameError) uninitialized constant gem::Installer::ENV_PATHS 
```

我尝试做时遇到同样的错误

```
gem update --system 
```

将不胜感激任何帮助。

和我的

```
gem list shows rails(2.2.2) 
```

我正在尝试寻找其他有类似问题的人，看起来它可能与 GEM PATH 有关，但我不确定从那里去哪里。在“宝石环境”中，我得到了 GEM PATHS：

```
~/.rvm/gems/ruby-1.8.7-p371 <br />
~/.rvm/gems/ruby-1.8.7-p371@global <br /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-31T11:17:58.343

在控制台中键入以下命令。这对我有用。

```
 rvm @global do gem uninstall -ax rubygems-bundler 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T14:02:27.300

我在 1.3.5 中遇到了同样的问题，请将您的 ruby​​gems 版本升级到 1.3.7 或 1.4.2

如果您使用的是 RVM

> rvm 安装 ruby​​gems 1.4.2

否则尝试

> 须藤宝石更新--系统1.4.2

# php - 使用 CodeIgniter 基于第一个下拉列表填充第二个下拉列表

> ID：15061348
> 
> 赞同：-1
> 
> 时间：2013-02-25T06:34:54.100
> 
> 标签：php, jquery, ajax, codeigniter

我需要先选择`source_type`，然后它会`location`根据`source_type`

查看文件

```
 <select name="source_type" id="source_type">
       <option value="">Source Type</option>
       <option value="Internal">Internal</option>
       <option value="External">External</option>
    </select>

    <select name="location" id="location">
       <option value="">Select</option>
    </select>

    $('#source_type').change(function(){
        $.ajax({
            type: 'post',
            data: 'source_type'+$(this).val(),
            url: 'get_sources_location',
            success: function(data) {
                $('#source_location').val(data);
            }
        });
    }); 
```

..控制器

```
 public function get_sources_location()
    {
        $source_type = $this->input->post('source_type');

        $this->load->model('documents_model');
        $results = $this->documents_model->get_locations();
        echo $results;
    } 
```

..模型

```
 public function get_locations()
    {
     $query = $this
                ->db
                ->select('location')
                ->where('classification', $source_type = $this->input->post('source_type'))
                ->get('sources_location');

     $data = array();

     foreach ($query->result() as $row)
     {
         $data = $row->location;
     }
     return $data;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:52:13.337

尝试这样的事情

**代码**

```
<select name="source_type" id="source_type" onchange="populateLocation(this.value)">
   <option value="">Source Type</option>
   <option value="Internal">Internal</option>
   <option value="External">External</option>
</select>

<select name="location" id="location">
   <option value="">Select</option>
</select> 
```

**使用 JQUERY 的 JAVASCRIPT 代码**

```
function populateLocation(source_type_value){
            if(source_type_value !=''){
                /*
                    Pass your source type value to controller function which will return you json for your
                    loaction dropdown
                */
                var url = 'controller/function/'+ source_type_value; // 
                $.get(url, function(data) {
                 var $select = $('location');
                 // removing all previously filled option
                 $select.empty();
                 for (var propt in data) {
                        $select.append($('<option />', {
                            value: propt,
                            text: data[propt]
                        }));
                 }

            }
        } 
```

**从控制器返回的**JSON 格式****

 **```
{"":"Select","1":"New york","2":"London","3":"Mumbai"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:46:24.180

像这样放置一个 AJAX 函数，

```
$("#source_type").change(function(){

  $.ajax({
     type : 'POST',
     data : 'source_id='+ $(this).val(),
     url : 'controller/method',
     success : function(data){
                 $('#location').val(data);
     }
 });
}); 
```

在控制器中，放置一个获取值的方法，

```
public function getLocations() {

     $source_id = $this->input->post('source_id');

     // Call the model function and get all the locations based on the source type id

     // Populate the dropdown options here

     echo $result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T06:42:55.487

将`change`事件处理程序附加到您的第一个 DD 并向服务器发送 ajax 调用以获取数据。在 ajax 调用的成功回调中填充第二个 DD。下面是一个简单的概念证明

```
$("#source_type").change(function(e)
{
    $.ajax({
        url:'/echo/json',
        success:function(data){
            console.log("success");
            $("<option/>",{text:'google',value:'google'}).appendTo("#location");
        }
    }); 
```

[演示](http://jsfiddle.net/W2Tjt/)**

# javascript - 功能未运行

> ID：15061349
> 
> 赞同：0
> 
> 时间：2013-02-25T06:35:17.113
> 
> 标签：javascript, html

因此，我将问题归结为该功能`chargeBmAttk()`无法正常工作，因此我添加了警报以创建更轻松的调试指示；但是不会弹出警报。函数`chargeBmAttk()` 的语法或 HTML 代码中的按钮有问题吗？

```
var playerHp = 45; // Player's health
var enemyHp = 35; // Enemy's health

// Player attack options

function missleAttk()
{ 
var playerDmgs = [5, 10, 15]; // Array of possible damages
var playerRndDmg = playerDmgs[Math.floor(Math.random() * playerDmgs.length]; //          Randomly select integer from array and apply as playerRndDmg
enemyHp = enemyHp - playerRndDmg;
}

function chargeBmAttk()
{
alert("hello world");
//  enemyHp = enemyHp - 5;
}

function waveBmAttk()
{
enemyHp = enemyHp - 7;
}

function iceBmAttk()
{
enemeyHp = enemeyHp - 10;
}

// Enemy attack options

function enemyAttk()
{
var enemyDmgs = [10, 7, 5, 4]; // Array of possible enemy damages
var enemyrRndDmg = enemyDmgs[Math.floor(Math.random() * enemyDmgs.length]; // Randomly select integer from array and apply as enemyRndDmg
playerHp = playerHp - enemeyRndDmg;
}

// Change txt outputs

function changePlayerHp()
{
var oldHp = document.getElementById("disPlayerHp").innerHTML;
var newHp = "Samus" + playerHp + "/ 45";
document.getElementById("disPlayerHp").innerHTML = newHp;

}

function changeEnemyHp()
{
var oldHp = document.getElementById("disEnemyHp").innerHTML;
var newHp = "Metroid" + enemyHp + "/ 35";
document.getElementById("disEnemyHp").innerHTML = newHp;
}

// Game end functions
function win()
{
if (enemyHp <= 0){
alert ("You win!");
}
}

function lose()
{
if (playerHp <= 0){
alert ("You Lose!");
}
}

// Game flow
function flow()
{
changeEnemyHp();
enemyAttk();
changePlayerHp();
win();
lose();
}

</script>
</head>
<body>
<div class="actions">
</br>
 <input type="button" onclick = "chargeBmAttk()" value = "Charge Beam">
 </button>
</div>  
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:00:26.700

```
this one is correct.you missed two ')' and closing input tag.

<!DOCTYPE html>
<html>
<script>
var playerHp = 45; // Player's health
var enemyHp = 35; // Enemy's health

// Player attack options

function missleAttk()
{ 
var playerDmgs = [5, 10, 15]; // Array of possible damages
var playerRndDmg = playerDmgs[Math.floor(Math.random() * playerDmgs.length)]; //          Randomly select integer from array and apply as playerRndDmg
enemyHp = enemyHp - playerRndDmg;
}

function chargeBmAttk()
{
alert("hello world");
//  enemyHp = enemyHp - 5;
}

function waveBmAttk()
{
enemyHp = enemyHp - 7;
}

function iceBmAttk()
{
enemeyHp = enemeyHp - 10;
}

// Enemy attack options

function enemyAttk()
{
var enemyDmgs = [10, 7, 5, 4]; // Array of possible enemy damages
var enemyrRndDmg = enemyDmgs[Math.floor(Math.random() * enemyDmgs.length)]; // Randomly select integer from array and apply as enemyRndDmg
playerHp = playerHp - enemeyRndDmg;
}

// Change txt outputs

function changePlayerHp()
{
var oldHp = document.getElementById("disPlayerHp").innerHTML;
var newHp = "Samus" + playerHp + "/ 45";
document.getElementById("disPlayerHp").innerHTML = newHp;

}

function changeEnemyHp()
{
var oldHp = document.getElementById("disEnemyHp").innerHTML;
var newHp = "Metroid" + enemyHp + "/ 35";
document.getElementById("disEnemyHp").innerHTML = newHp;
}

// Game end functions
function win()
{
if (enemyHp <= 0){
alert ("You win!");
}
}

function lose()
{
if (playerHp <= 0){
alert ("You Lose!");
}
}

// Game flow
function flow()
{
changeEnemyHp();
enemyAttk();
changePlayerHp();
win();
lose();
}

</script>
</head>
<body>
<div class="actions">
 <input type="button" onclick = "chargeBmAttk();" value = "Charge Beam" />
</div>  
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:43:42.577

`var playerRndDmg = playerDmgs[Math.floor(Math.random() * playerDmgs.length)];`

`var enemyrRndDmg = enemyDmgs[Math.floor(Math.random() * enemyDmgs.length)];`

这 2 行中缺少大括号`)`，在更正您的函数后将被调用并发出警报`Hello World`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:04:45.267

问题出在你的`enemyAttk()`功能和 `missleAttk()`功能上。

```
function enemyAttk()
{
var enemyDmgs = [10, 7, 5, 4]; // Array of possible enemy damages
var enemyrRndDmg = enemyDmgs[Math.floor(Math.random() * enemyDmgs.length)];//bracket missing here
playerHp = playerHp - enemeyRndDmg;
} 
```

该函数中缺少一个括号。您需要关闭 HTML 代码中的输入标记。`</button>`并从您的代码中删除标签。

# highcharts - 设置图表宽度，highcharts

> ID：15061350
> 
> 赞同：8
> 
> 时间：2013-02-25T06:35:19.737
> 
> 标签：highcharts, highstock

是否可以使用百分比设置高图的宽度？每当调整页面大小时，图表应该足够响应以适应页面大小？

[一种解决方案](http://jsbin.com/anuqav/1/edit)

这里的问题是我有 3 个图表需要并排显示，每次重新调整页面大小时，3 个图表都应该按比例放大并相应地使用屏幕大小。可以使用highcharts吗？

[这个问题的解决方案？](http://www.highcharts.com/jsbin/opuyav/2/edit)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-25T07:33:21.903

将您的图表包装在一个容器中，这将使您可以在屏幕更改时灵活地调整图表大小。

还为您的包装器提供宽度并使其浮动到左侧，以便图表并排放置。

这是一个例子：http: [//jsfiddle.net/ZrTux/9/](http://jsfiddle.net/ZrTux/9/)

```
.chart-wrapper {
    float: left;
    padding-bottom: 40%;
    position: relative;
    width: 45%;
} 
```

# c++ - STL 容器上的指针

> ID：15061357
> 
> 赞同：0
> 
> 时间：2013-02-25T06:35:40.033
> 
> 标签：c++, pointers

我是 C++ 新手，发现它对 stl 容器上的处理指针感到困惑。stl容器如何处理指针？

```
Point *p1 = new Point(10, 10);
std::vector<Point*> points;
points.push_back(p1);

delete p1; // or delete points[0]

std::cout << points[0]->getID() << "\n"; //why does this still display 10, 10 after deleting above?
std::cout << p1->getID(); //ofcourse, this one will output garbage

//getID method displays xy coordinates given as parameters when object is created
//The result displayed
10, 10
-1, 12337 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:38:13.437

容器，如果声明为`std::vector<Point*> points;`将其视为声明，这意味着您将需要在此上下文中`Point* point(new Point(blah));`进行一些匹配。`delete`当然，您应该使用 a) 该向量中的值`std::vector<Point> points;`，或 b) 智能指针。在大多数情况下，前者（a）。

在这种情况下，您将编写`delete p1;`，并且对已删除对象的访问是未定义的行为——删除后对该对象的任何访问/使用都是无用的。如果程序崩溃并向您指出错误，您会很幸运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:39:56.640

在 delete 语句之后，由编译器决定何时重用释放的内存。所以这是未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T06:39:02.607

标准库容器对指针没有什么特别的作用。如果指针指向动态分配的对象，则必须在某个时候将其删除。谁，何时以及如何真正取决于应用程序的细节，但通常通过使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)来自动化这个过程。

```
std::cout << points[0]->getID() << "\n"; //why does this still display 10, 10 after deleting above? 
```

`points[0]`已被删除，并且取消引用已删除的指针是**未定义的行为**。这意味着任何事情都可能发生。可能发生的情况是您通过调用释放的内存`delete`没有被任何东西回收，因此数据仍然存在。你不能依赖这种行为。

# php - php多语言文件名上传

> ID：15061359
> 
> 赞同：0
> 
> 时间：2013-02-25T06:36:08.373
> 
> 标签：php, html, utf-8, filenames, multilingual

我试图让用户将他们的图片上传到网站并按原始文件名显示。在英语中，一切都按计划进行，但是当我尝试上传带有空格的不同语言的文件时，它会将文件上传为：“.jpg”，仅没有文件名，只有文件类型。或一些无法从网站上读取为链接 (src="") 的丑陋文本。起初我使用 windows(xampp)，但后来我理解了 utf-8 问题，我买了一台 linux 服务器，情况有所好转，但仍然不是 100% 成功。

（顺便说一句，我知道数据库文件名存储和真实文件名作为唯一编号的选项，但我不确定它对我来说是最佳解决方案，因为它会减慢服务器从数据库中读取大量文件的速度。）

有人能指出我的错误吗？

索引.html：

```
<script>
    $('#transFrame').load(function () {
    alert("file uploaded");
    ...fix the file into the img src="..";
    });
</script>
    <form target="transFrame" enctype="multipart/form-data" action="upload.php" method="POST">
    <input type="hidden" name="MAX_FILE_SIZE"      value="200000" /> Choose image to upload:  
    <input  id = "imagefile" name="uploadedfile" type="file" onchange="submit();" /><br />
                </form>
<iframe style="display:none;" name="transFrame" id="transFrame"></iframe> 
```

* * *

上传.php：

```
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

    if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
        echo "success" . $_FILES['uploadedfile']['name'] ;
    } else{
        echo "failed" . $_FILES['uploadedfile']['name'] ;
    } 
```

# javascript - Function.toString() 不尊重闭包范围

> ID：15061363
> 
> 赞同：1
> 
> 时间：2013-02-25T06:36:41.563
> 
> 标签：javascript, node.js

```
var foo = (function(){
  var x = "bar";
  return function(){
    console.log(x);
  };
})();

console.log(foo.toString()); // function() {console.log(x);}

(foo)(); // 'bar'
eval('(' + foo.toString()+')()')); // error: x is undefined 
```

**为什么 var 不`x`记录为`"bar"`in `foo.toString()`？**

`foo`具有与其 toString() 值不匹配的行为。`foo`总是打印“bar”，但看着`foo.toString()`不会告诉你这一点。

与[此](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/toString#See_also)有关吗？如果决定不反编译一个函数来获取它的 toString() 值，为什么不包括依赖于外部函数作用域的对象的解析呢？

有没有办法使用旧的反编译方法来获取给定函数背后的实际代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:07:03.457

您正在执行匿名函数，因此返回值被分配给`foo`. 如果你使用

```
var foo = function(){
  var x = "bar";
  return function(){
    console.log(x);
  };
}; 
```

`foo.toString()`显示匿名函数
`foo().toString()`和*返回*函数

您从^(**1**)`eval`创建一个新函数，与[创建的匿名函数的]*初始范围的范围没有任何关系*，并执行该函数，因此它会产生一个相关的. 这没什么好奇怪的。`foo.toString()`***`foo``ReferenceError``x`***

 ***^(**1**) `eval("function (){console.log(x);})()")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-09T16:28:48.907

由于 javascript 是函数范围的，因此在转换为字符串时会丢失其范围信息。因此，从此字符串中新创建的函数与原始函数无关。

我有两种解决方法：

首先，而不是让 foo 成为 IIFE，你可以拥有它：

```
var foo = function(){
  var x = "bar";
  return function(){
    console.log(x);
  };
};
```

然后调用 eval('(' + foo.toString() + ')()()')，当你执行函数并向下传递时，范围就会被创建。

或者您可以保留 IIFE，当您调用 eval('(' + foo.toString() + ')') 时，使用 apply 或 call 方法调用它并将 x 放入上下文对象或作为参数传入。***

# java - 在 Eclipse 中增加 Java 堆大小 - 使用虚拟内存

> ID：15061364
> 
> 赞同：1
> 
> 时间：2013-02-25T06:36:43.327
> 
> 标签：java, eclipse, virtual-memory

我在 Eclipse(Windows) 中运行一个程序，需要相对较大的内存。将 传递`-Xmx1500m`给程序似乎还不够，而 Eclipse 不允许我分配更大的值。有了这个配置，我得到了内存不足的异常。我将虚拟内存大小增加到`40GB`. 有没有办法让我的程序可以使用这个内存？我在 C# 中轻松完成了这项工作，几乎完成了同样的工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T06:51:17.020

您需要运行**64 位 vm**才能允许超过 -Xmx1500m

**您可以在程序的运行设置中**指定它，并且不需要在 eclipse.ini 中应用它，它是用于 eclipse 本身的。

但是：给 java-vm 提供比系统上实际（物理、空闲）内存更多的内存并不是一个好主意，因为 GC 在运行时会遍历内存的许多区域，这将导致读取/从/向磁盘写入内存 - 意味着交换。而这又会导致非常糟糕的表现。在这种情况下，您应该考虑是什么在消耗内存，以及是否有办法在外部管理这些数据 - 在磁盘或一些 MemoryBuffers 上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T06:45:22.187

ru 使用 32 位 JVM 还是 64 位？使用 64 位 JVM。我不确定 64 位的大小限制，但肯定超过 32 位。

试试这个：java -d64 -Xms512m -Xmx60g YourProgram

它将 60gb 设置为最大堆大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T06:53:33.787

您可以在“运行配置对话框”中配置堆大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-19T05:38:51.940

转到留下 eclipse.exe 文件的 eclipse 根文件夹，您会发现 eclipse 配置文件 ( eclipse.ini ) 打开该文件，您需要进行以下更改![在此处输入图像描述](../Images/419a027149cb40b0b983689639267cea.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T06:42:39.957

我认为您需要增加可供日食使用的内存。

修改文件中的`-Xmx`选项`eclipse.ini`（在 Windows 机器中）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-25T06:49:40.600

在您解压缩 Eclipse 的地方，`eclipse.ini`在其中查找修改它 ![在此处输入图像描述](../Images/8057d783945c02de388b9f0659510872.png)

# objective-c - 在滑动手势识别器上禁用“在突出显示时显示触摸”

> ID：15061367
> 
> 赞同：1
> 
> 时间：2013-02-25T06:36:54.287
> 
> 标签：objective-c, xcode, uibutton, uigesturerecognizer, uiswipegesturerecognizer

我有一个酒吧，上面有 8 种不同的酒吧`UIButton`。每个`UIButton`都选中了“在突出显示时显示触摸”属性。并非所有 8 个按钮都同时显示。

我将它们分成两组，每组 4 个`UIButton`，并使用`UISwipeGestureRecognizer`来在两个视图之间切换。

这很好用。

所以，这是我的问题：

当我滑动并触摸其中一个按钮时，我仍然会看到触摸突出显示动画，即使按钮功能没有触发（因为我滑动了）。

在这种情况下（滑动）我不想看到触摸突出显示。我怎样才能禁用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-14T15:52:42.933

为了解决这个问题，我用 UILabel 替换了 UIButton 并附加了一个点击处理程序。由于 UILabel 没有高亮触摸，因此不会干扰滑动。

这是一个代码示例：

```
UITapGestureRecognizer *tapLabel = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tap:)];
[tapLabel setNumberOfTouchesRequired:1];
[tapLabel setNumberOfTapsRequired:1];
[titleLabel addGestureRecognizer:tapLabel];
titleLabel.userInteractionEnabled = TRUE; 
```

这更像是一种解决方法而不是解决方案，但它可能很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:56:37.920

使用 UIButton 的属性`showsTouchWhenHighlighted`。

例子 ：`self.btn.showsTouchWhenHighlighted = NO`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:03:55.873

我建议你使用 UIImageView 替换按钮

这是示例：

```
UISwipeGestureRecognizer *swiper = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwip:)] autorelease];
[swiperTopL setDirection:UISwipeGestureRecognizerDirectionLeft];
[imageView addGestureRecognizer:swiper];

UITapGestureRecognizer *tapButton = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(buttonTap:)] autorelease];
[imageView addGestureRecognizer:tapButton]; 
```

希望对你有帮助，谢谢！

韦恩

# java - 我们可以使用小程序在客户端机器中搜索文件吗？

> ID：15061372
> 
> 赞同：5
> 
> 时间：2013-02-25T06:37:26.030
> 
> 标签：java, php, codeigniter, applet

我是一名 PHP 开发人员。我要求客户端机器中有一个特定的文件，如果这个文件存在，那么用户就可以登录网站。我可以通过使用下面给出的代码来获取文件存在：

```
import java.io.File;
class FileSearchFirstOrder{
    public static void main(String args[])
    {
        boolean isExistP = false;
        File volumes = new File("/Volumes");
        File files[] = volumes.listFiles();
        for(File f: files)
        {
            //System.out.println("Current File -> " + f.getPath()); 
            isExistP = parseAllFiles(f.getPath());
            if(isExistP ==  true)
                break;
        }
        if(isExistP ==  true)
            System.out.println("I got the desire file Please continue.");
        else
            System.out.println("Sorry! I can not find the desire file Please try again leter:(");

    }

    public static boolean parseAllFiles(String parentDirectory)
    { 
        boolean isExistPC = false;
        try
        {
            File[] filesInDirectory = new File(parentDirectory).listFiles(); 
                for(File f : filesInDirectory)
            {  
                if (f.getName().toString().equals("key.txt"))
                {
                        //System.out.println("Current File ->" + f.getName()); 
                    isExistPC = true;
                }
                }  
        }
        catch(Exception e)
        {
        }
        return isExistPC;
    }  
} 
```

但是我如何在我的项目中实现这一点并将这个响应发送到服务器，以便最终用户能够登录或不登录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T06:37:40.357

The applet of my Question is in below:

```
import java.io.*;
import java.awt.*;
import java.awt.event.*;
import java.applet.*;
import javax.swing.*;
import javax.swing.border.*;

public class AppletFileSearch extends JApplet implements ActionListener
{
 private JPanel pane = null;
 public void init() 
 {
    try{
        jbInit();
    }
    catch(Exception e) {
        e.printStackTrace();
    }
}
public boolean parseAllFiles(String parentDirectory)
{ 
    boolean isExistPC = false;
    try
    {
        File[] filesInDirectory = new File(parentDirectory).listFiles(); 
            for(File f : filesInDirectory)
        {  
            if (f.getName().toString().equals("key.txt"))
            {
                isExistPC = true;
            }
        }  
    }
    catch(Exception e){}
    return isExistPC;
}  
 private void jbInit() throws Exception
 {  
    boolean isExistP = false;
    File files[] = File.listRoots();
    for(File f: files)
    {
        isExistP = parseAllFiles(f.getPath());
        if(isExistP ==  true)
            break;
    }
    if(isExistP ==  true)
    {
    pane = new JPanel();
        pane.setBounds(new Rectangle(0, 0, 500, 35));
        pane.setLayout(null);
        pane.setBorder(BorderFactory.createEtchedBorder(EtchedBorder.LOWERED));
        pane.setBackground(new Color(0, 255,0));
        setContentPane(pane);
    }
    else
    {
        pane = new JPanel();
        pane.setBounds(new Rectangle(0, 0, 500, 35));
        pane.setLayout(null);
        pane.setBorder(BorderFactory.createEtchedBorder(EtchedBorder.LOWERED));
        pane.setBackground(new Color(255, 0, 0));
        setContentPane(pane);
    }
 }
 public void actionPerformed(ActionEvent e) {
}
} 
```

Now compile this source using **javac AppletFileSearch.java** in command prompt then make it jar file using the command **jar cvf AppletFileSearch.jar AppletFileSearch.class** After that you have to make key certificate by using the command **keytool -genkey -alias AppletFileSearch -validity 365** There will 10 or 11 steps (that will take password, first name, last name example is given in the url: [http://www.developer.com/java/other/article.php/3303561/Creating-a-Trusted-Applet-with-Local-File-System-Access-Rights.htm).Again](http://www.developer.com/java/other/article.php/3303561/Creating-a-Trusted-Applet-with-Local-File-System-Access-Rights.htm).Again) use the command for final signature **jarsigner AppletFileSearch.jar AppletFileSearch** There will be a prompt for asking password which you gave previous. If you give correct password the there will be a message the signer certificate will expire within six months.

After making this steps you have make a html page and the code will be like that:

```
<html>
<title>Run Applet</title>
</head>
<body>
<applet code="AppletFileSearch.class" archive="AppletFileSearch.jar"
       width=325 height=325></applet>
</body>
</html 
```

and save this html file as AppletFileSearch.html and keep both the files AppletFileSearch.html and AppletFileSearch.jar in the server(like apache). And run from the browser and lets enjoy.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:44:01.813

你*应该能够通过一个小程序，更具体地说，一个*[签名的小](http://www-personal.umich.edu/~lsiden/tutorials/signed-applet/signed-applet.html)程序来做你需要的事情。[本](http://www.developer.com/java/other/article.php/3303561/Creating-a-Trusted-Applet-with-Local-File-System-Access-Rights.htm)教程应该为您指明正确的方向，以便您可以让您的小程序访问用户的本地文件系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T06:47:02.730

[未签名的小程序](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)访问客户端资源，例如本地文件系统等。为了打开该文件，您需要部署一个签名的小程序（我认为用户被警告该小程序将以不受限制的权限运行）。作为替代方法，您可以改为实现[TSL/SSL 客户端身份验证。](http://www.ibm.com/developerworks/lotus/library/ls-SSL_client_authentication/)

# visual-studio - 将 makefile 转换为 VS 项目

> ID：15061381
> 
> 赞同：22
> 
> 时间：2013-02-25T06:38:11.313
> 
> 标签：visual-studio, makefile

我有一些 makefile 可以为我构建某些库。为了方便起见，我现在需要将它们转换为 VS 项目。我只是在 VS 提供的 makefile 向导的帮助下找到将 VS 项目转换为 makefile 的方法。此外，我确实发现 VS6 中包含此功能，可将 makefile 转换为 VS 项目。但是这个功能在以后的版本中已经被删除了。另外，我意识到 msdn 站点上不再提供 VS6 下载。

有没有其他方法可以将 makefile 转换为 Visual Studio 项目？或者我可以从某个地方获得 VS6 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-10T07:42:27.510

您在这里唯一真正的选择是手动进行转换（或使用 Makefile 项目向导）。你说你有“几个”makefile，不知道有多少，但除非你谈论> 10个左右，否则为这些手动创建一个Visual Studio项目并不是很多工作。毕竟，您所做的只是创建一个新的 dll 项目并向其中添加源文件。默认的编译器/链接器标志几乎不需要任何调整。哦，是的，如果您确实对其进行了调整，请确保在属性表中而不是在项目本身中进行这些更改：属性表可以被其他项目重用，这是 DRY 原则的简单问题。

为什么这是唯一真正的选择？首先，没有任何工具可以可靠地将任意 makefile 转换为 VS 项目，这很简单，因为 makefile 可以是您想要的任何格式，并且它们的许多功能在 VS 项目中根本没有对应物。其次，VS6 在这个日期大约有 15 年的历史，所以即使你让它在你的机器上运行，它产生的输出仍然是古老的，绝对不是你想要用于项目的输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-05T19:45:49.173

这篇 CodeProject 文章： [Automatically Translate makefile C/C++ Project for Visual Studio](http://www.codeproject.com/Tips/870845/Automatically-Translate-makefile-C-Cplusplus-Proje) 提供了针对 VS 2013 C/C++ 项目的基本解决方案。

[ PS：不是我的文章，但它至少解决了您的 VS6 问题的主要部分。]

这是一个简单的脚本，因此充满了假设和失败的机会。但是，如果您的项目符合其意图范围，它*可能会*为您提供一个可行的起点。

您仍然需要：

*   包含明显不是 C/C++ 文件的文件
*   调整任何项目选项
*   调整任何编译器选项
*   添加链接时间依赖项
*   等等

万一那篇文章消失了……它是一个 VBS 脚本：

*   扫描目录以查找具有属于已知 VS 组的扩展名的文件
*   重复到子目录中寻找更多文件。
*   创建 .vcxproj 和 .vcxproj.filters 文件
*   将找到的文件添加到 .vcxproj 和 .vcxproj.filters 文件中

因此，如果您有**嵌套项目**（可能），您将需要调整脚本在其递归步骤中的工作方式。

祝你好运。

# java - 如何在 Java 中对齐表格

> ID：15061388
> 
> 赞同：0
> 
> 时间：2013-02-25T06:38:34.367
> 
> 标签：java, arrays, alignment

如何对齐我的阵列，使其看起来不那么糟糕？

换句话说，我如何格式化一个可读的表格？

这`System.out.print(" ");`是一种非常低效的表格间距方式......

```
public class TaylorSin {
   public static void main(String[] args ) {
   double[][] ArrayX = new double[201][4];
   for (int i = 0; i < ArrayX.length; i++) { 
      System.out.print(ArrayX[i][0] = - 1 + (i * 0.01));
        System.out.print(" ");
        System.out.print(ArrayX[i][1] = Math.sin(- 1 + (i * 0.01)));
        System.out.print(" ");
        System.out.print(ArrayX[i][2] = taylorSin(- 1 + (i * 0.01)));
        System.out.print(" ");
        System.out.print(ArrayX[i][3] = Math.abs(Math.sin(- 1 + (i * 0.01)) - taylorSin(- 1 + (i * 0.01))));

            System.out.println();
        }       
    }

        public static int calculateFactorial(int n)             
        {       
            int facto = 1;      
            for (int i = 1; i <= n; i++)        
            {facto = facto * i;}        
            return facto;           
        }

        public static double calculateExponent(double base, int exponent)           
        {   
            if(exponent == 0){return 1;}   
            else {return base * calculateExponent(base, exponent - 1);}                     
        }       

        public static double calculateTerm(double base, int exponent, int n)            
        {           
            double term = 0.0;          
            term = (calculateExponent(base, exponent)/calculateFactorial(n));               
            return term;            
        }

        public static double sumOfTerms(double base, int exponent, int n)           
        {               
            double summation = 0;               
            for (int i = 1; i <= 21; i = i +2)          
            {               
                if (i == 3 || i == 7 || i == 11 || i == 15 || i == 19)              
                {                   
                summation = summation - calculateTerm(base, i, i);                                      
                }                   
                else                    
                {                   
                summation = summation + calculateTerm(base, i, i);                  
                }               
            }           
        return summation;           
        }

        public static double taylorSin(double base)         
        {           
        double result = 0;          
        int exponent = 1;
        int n = 1;          
        result = sumOfTerms(base, exponent, n);                     
        return result;          
        }           
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:52:50.387

您可以使用[System.out.printf](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#printf%28java.util.Locale,%20java.lang.String,%20java.lang.Object...%29)来格式化您的输出，如下所示：

```
public class TaylorSin {
    public static void main(String[] args)
    {
        // How to align my Array so it does not look that awful?
        // In other words, How do I format a table that is readable?
        // The System.out.print(" "); is a pretty inefficient manner for spacing
        // for a table...
        double[][] ArrayX = new double[201][4];

        for (int i = 0; i < ArrayX.length; i++)

        {
            System.out.printf("%-15f", ArrayX[i][0] = -1 + (i * 0.01));
            System.out.print(" ");

            System.out
                    .printf("%-15f", ArrayX[i][1] = Math.sin(-1 + (i * 0.01)));
            System.out.print(" ");

            System.out.printf("%-15f",
                    ArrayX[i][2] = taylorSin(-1 + (i * 0.01)));
            System.out.print(" ");

            System.out.printf(
                    "%-15f",
                    ArrayX[i][3] = Math.abs(Math.sin(-1 + (i * 0.01))
                            - taylorSin(-1 + (i * 0.01))));

            System.out.println();
        }

    }

    public static int calculateFactorial(int n)

    {

        int facto = 1;

        for (int i = 1; i <= n; i++)

        {
            facto = facto * i;
        }

        return facto;

    }

    public static double calculateExponent(double base, int exponent)

    {

        if (exponent == 0) {
            return 1;
        }

        else {
            return base * calculateExponent(base, exponent - 1);
        }

    }

    public static double calculateTerm(double base, int exponent, int n)

    {

        double term = 0.0;

        term = (calculateExponent(base, exponent) / calculateFactorial(n));

        return term;

    }

    public static double sumOfTerms(double base, int exponent, int n)

    {

        double summation = 0;

        for (int i = 1; i <= 21; i = i + 2)

        {

            if (i == 3 || i == 7 || i == 11 || i == 15 || i == 19)

            {

                summation = summation - calculateTerm(base, i, i);

            }

            else

            {

                summation = summation + calculateTerm(base, i, i);

            }

        }

        return summation;

    }

    public static double taylorSin(double base)

    {

        double result = 0;

        int exponent = 1;
        int n = 1;

        result = sumOfTerms(base, exponent, n);

        return result;

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:51:48.663

使用[java.io.PrintStream.printf( format , data... )](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29)格式化打印

格式字符串在[格式字符串语法中描述](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)

您可以使用的标志格式是`width`：`%-20s`或`%12.4f`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T06:53:45.623

尝试这个。此外，如果可以的话，您可能需要格式化数字。

```
 { 
        System.out.print(ArrayX[i][0] = - 1 + (i * 0.01));
        System.out.print("\t");

        System.out.print(ArrayX[i][1] = Math.sin(- 1 + (i * 0.01)));
        System.out.print("\t");

        System.out.print(ArrayX[i][2] = taylorSin(- 1 + (i * 0.01)));
        System.out.print("\t");

        System.out.print(ArrayX[i][3] = Math.abs(Math.sin(- 1 + (i * 0.01)) -   taylorSin(- 1 + (i * 0.01))));
        System.out.print("\t");
        System.out.println("\n");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T06:56:25.813

您可以使用 Java 的内置 System.out.printf() 并查看[Formatter](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)类。你可以做这样的事情。

```
System.out.printf("%f %f %f %f\n", ArrayX[i][0], ArrayX[i][1], ArrayX[i][1], ArrayX[i][2], ArrayX[i][3]); 
```

# ruby-on-rails - Rails 路由不适用于区分大小写的 URL

> ID：15061391
> 
> 赞同：1
> 
> 时间：2013-02-25T06:38:45.827
> 
> 标签：ruby-on-rails, rubygems, ruby-on-rails-3.2, rails-routing

使用此命令生成页面控制器后 -

```
>rails g controller Pages Home About Contact 
```

并取消注释文件中的行`match ':controller(/:action(/:id))(.:format)'`。`routes.rb`

当我访问我的网址时 -

```
http://localhost:3000/pages/home 
```

它抛出错误

> 未知动作
> 
> 找不到 PagesController 的操作“家”

但是，如果像这样访问，这是可行的 -

```
http://localhost:3000/pages/Home 
```

Small/Up case 是我的第一个想法，所以我按照[这里](https://stackoverflow.com/questions/11827233/rails-url-case-sensitive)`route_downcaser`的建议安装了

现在的问题是两个 URL 都抛出相同的错误 -

```
http://localhost:3000/pages/home
http://localhost:3000/pages/Home 
```

**错误**

> 未知动作
> 
> 找不到 PagesController 的操作“家”

让我知道如何解决此错误。

我在 Github 的项目 - [Github URL](https://github.com/swapnesh/Add_twitter_bootstrap)

使用`Windows 7`

导轨版本 -`3.2.9`

**编辑**

```
routes.rb file - 

Addbootstrap::Application.routes.draw do
  get "pages/Home"

  get "pages/About"

  get "pages/Contact"

  get "pages/Drop_Down"

  match ':controller(/:action(/:id))(.:format)'
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T06:45:59.300

在 ruby​​ 中，您不想使用大写的方法名称。以大写字母开头的名称保留给常量（类/模块）。

除此之外，如果你正在使用一个 gem 来降低你从 Home 到 home 的路线，并且该方法被命名为 Home，那么这就是它会失败的原因。确保方法名称是小写的。

* * *

如果有人要指出这一点，我会先发制人。CapsCase 方法名称在 ruby​​ 中是有效的，它们只是不常规，并且可能会造成混淆。因此被认为是一个坏主意。CapsCase 名称唯一真正特别的地方是当它们被赋值时，如果你再次尝试赋值，ruby 会发出警告。

# gdb - 在核心文件中找不到通用寄存器

> ID：15061392
> 
> 赞同：2
> 
> 时间：2013-02-25T06:38:47.567
> 
> 标签：gdb, arm, shared-libraries

当我尝试调试核心文件时出现以下错误。如何解决这个问题。就在几天前，它工作正常。我尝试使用 root 权限运行“/sbin/ldconfig”。代码编译为：

```
g++ -fPIC -ggdb 
```

我的可执行文件是 32 位二进制文​​件：

```
$ file appl

ELF 32-bit LSB executable, ARM, version 1 (SYSV), dynamically linked 
(uses shared libs), not stripped.

user@ubu:/mnt/hgfs/share$ gdb appl  core.11_416

GNU gdb (Ubuntu/Linaro 7.4-2012.04-0ubuntu2.1) 7.4-2012.04
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i686-linux-gnu".
For bug reporting instructions, please see:
<http://bugs.launchpad.net/gdb-linaro/>...
Reading symbols from /mnt/hgfs/share/appl...done.

warning: Couldn't find general-purpose registers in core file.

warning: Could not load shared library symbols for 9 libraries, e.g. /lib/libdl.so.2.
Use the "info sharedlibrary" command to see the complete listing.
Do you need "set solib-search-path" or "set sysroot"?
Core was generated by `appl'.

warning: Couldn't find general-purpose registers in core file.
#0  <unavailable> in ?? ()
(gdb) i shared
From        To          Syms Read   Shared Object Library
                    No          /lib/libdl.so.2
                    No          /opt/lib/libappl.so
                    No          /lib/librt.so.1
                    No          /usr/lib/libstdc++.so.6
                    No          /lib/libm.so.6
                    No          /lib/libgcc_s.so.1
                    No          /lib/libc.so.6
                    No          /lib/libpthread.so.0
                    No          /lib/ld-linux.so.3
(gdb) 
(gdb) show solib-search-path
The search path for loading non-absolute shared library symbol files is .
(gdb) show sysroot
The current system root is "".
(gdb) 
(gdb) show archi
The target architecture is set automatically (currently i386) 
```

我正在使用运行 ubuntu 12.04 的 VMware

```
user@ubu:~$ uname -a
Linux ubu 3.2.0-36-generic #57-Ubuntu SMP Tue Jan 8 21:41:24 UTC 2013 i686 i686 i386 GNU/Linux
user@ubu:~$ 
```

## **编辑：2013 年 3 月 20 日**

@SCOTT：感谢您的回复。我会试试这个。相同的设置早些时候工作正常，我能够使用 GDB 进行调试。一旦我做了“apt-get update”，从那以后GDB就抱怨上述错误。我可以看出的一个区别是在 GDB 工作时版本显示的早期：

```
This GDB was configured as "i486-linux-gnu". 
```

现在更新后的版本显示：

```
This GDB was configured as "i686-linux-gnu" 
```

这就是我能看到或理解的所有差异。

我使用的 ARM 工具链没有提供 GDB。g++ 是为 Intel 编译的。我现在也使用相同的 g++ 来构建可执行文件。

```
$ file g++
g++: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.2.5, stripped 
```

我使用的提供的交叉编译器可执行文件如下。但是当我收到这个错误时，我只使用了位于“/usr/bin/gdb”的普通 gdb（安装在 Ubuntu 上）命令：

```
user@ubu:/opt/cs/bin$ ls
arm-none-linux-gnueabi-g++
arm-none-linux-gnueabi-gdb

... etc ... 
```

我在这里使用了错误的 GDB。如果它是错误的 GDB，为什么它现在可以更早地工作，为什么不呢？我是否应该使用这个 arm-none-linux-gnueabi-GDB 来调试 ARM 交叉编译的应用程序，该应用程序是使用以下代码编译的：

```
arm-none-linux-gnueabi-g++  appl.cpp  -o appl

user@ubu:~$ which gdb
/usr/bin/gdb 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:51:25.020

您使用了错误的 gdb。获取[Linaro ARM 工具链](https://launchpad.net/linaro-toolchain-binaries/trunk/2013.02/+download/gcc-linaro-arm-linux-gnueabihf-4.7-2013.02-01-20130221_linux.tar.xz)压缩包，解压并运行：

```
$ gcc-linaro-arm-linux-gnueabihf-4.7-2013.02-01-20130221_linux/bin/arm-linux-gnueabihf-gdb appl  core.11_416
<...>
This GDB was configured as "--host=i686-build_pc-linux-gnu --target=arm-linux-gnueabihf".
<...> 
```

请注意，您使用的 gdb 显示“此 GDB 配置为“ **i686-linux-gnu** ”。您想要一个显示**“--host=i686-build_pc-linux-gnu --target=arm-linux-gnueabihf”**（或目标中类似的 ARM Linux 三元组）的设备。

通常人们不会将针对**arm-linux-gnueabihf的 gcc 与针对****i686-linux-gnu**的 gdb混为一谈，因为编译器、链接器和调试器命令都以相同的前缀开头，即**arm-linux-gnueabihf-{gcc, gdb,ld,gas}**等。你是如何得到你的特定 gcc 和 gdb 组合的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-22T08:33:35.493

我已经在我的交叉编译器工具链中编译了 GDB。它存在于构建目录的 bin 目录之一中。您可以检查类似的 gdb

# ios - Xcode 4.5 项目警告 - “将编译器配置升级到 LLVM”

> ID：15061401
> 
> 赞同：1
> 
> 时间：2013-02-25T06:39:35.010
> 
> 标签：ios, xcode4.2, xcode4.5, compiler-warnings, llvm-gcc

我将最初用 XCode 4.2 编码的项目移动到 XCode 4.5，现在我在构建时收到以下警告 -

> 编译器配置设置为“com.apple.compilers.llvmgcc42”。这将升级到“Apple LLVM 编译器 4.1”，这是 iOS 目标的推荐设置

我无法理解所引用的编译器版本。我搜索了编译器版本，但我仍然对“Apple LLVM”和“LLVM GCC”这两个术语感到困惑。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:50:04.440

以下是克服此警告的步骤

1.  只需单击项目目标。
2.  构建设置 > 构建选项。
3.  GCC_VERSION:< 选择“默认编译器（Apple LLVM 编译器 4.1）”或首选一个 >
4.  清理和构建您的应用程序

**编辑**

对于您对差异的疑问，我希望您查看以下链接。

1.  [链接 1](https://stackoverflow.com/questions/4589335/llvm-vs-gcc-for-ios-development)
2.  [链接 2](https://stackoverflow.com/questions/12020349/difference-between-llvm-gcc-4-2-and-apple-llvm-compiler-3-1)
3.  [链接 3](https://stackoverflow.com/questions/3739783/iphone-gcc-llvm-gcc-or-llvm)

希望这可以帮助。

# git - 从一个分支合并到另一个分支会引发冲突

> ID：15061410
> 
> 赞同：2
> 
> 时间：2013-02-25T06:40:23.577
> 
> 标签：git

我有主（HEAD）分支和一个开发分支。当我在 dev 分支上进行更改时，我想基本上将这些更改合并到 HEAD 中。

`git checkout master` `git merge develop`

这是错误：

```
Auto-merging addons/shared_addons/themes/beaver/views/partials/footer.html
CONFLICT (content): Merge conflict in addons/shared_addons/themes/beaver/views/partials/footer.html
Automatic merge failed; fix conflicts and then commit the result. 
```

那么我做错了什么？为了让您了解我的工作流程：

我有一个 post-commit 来检测我是否在 master 上，然后它会执行一个命令。但如果我正在开发，它不会。因此，当我在 dev 中进行更改时，我基本上只想将所有更改从 Dev 拉到 Master。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T06:51:40.770

您没有做错任何事情，有时合并会产生冲突。这通常发生在同一文件中的同一行在开发和主分支上都发生更改时。

您需要做的是解决这些冲突，然后提交结果。如果您查看 addons/shared_addons/themes/beaver/views/partials/footer.html 您应该标记有冲突的区域。标记的区域以 <<<<<<< 开头并以 >>>>>>> 结尾，两个冲突的块本身被 ======= 划分。

例如：

```
<html>
  <head>
<<<<<<< HEAD
    <link type="text/css" rel="stylesheet" media="all" href="style.css" />
=======
    <!-- no style -->
>>>>>>> master
  </head>
  <body>
    <h1>Hello,World! Life is great!</h1>
  </body>
</html> 
```

手动解决冲突

```
<html>
  <head>
    <link type="text/css" rel="stylesheet" media="all" href="style.css" />
  </head>
  <body>
    <h1>Hello,World! Life is great!</h1>
  </body>
</html> 
```

然后添加文件并提交合并

```
git add addons/shared_addons/themes/beaver/views/partials/footer.html
git commit -m "Merged develop into master fixed conflict." 
```

这些页面包含有关解决合并冲突的更详细指南：

*   [http://githowto.com/resolving_conflicts](http://githowto.com/resolving_conflicts)
*   [http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging#Basic-Merge-Conflicts](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging#Basic-Merge-Conflicts)

# excel - Displaytag 导出 Excel 未导出所有行

> ID：15061416
> 
> 赞同：3
> 
> 时间：2013-02-25T06:40:43.223
> 
> 标签：excel, jsp, export, displaytag

我想使用 Displaytag 将表格数据导出到 Excel 中。

最初它将所有数据导出到 Excel，但默认情况下 displaytag 使用 CSV 格式导出到 Excel。

此解决方案解决了[Displaytag 将 CSV 导出到 .xls 文件的问题](https://stackoverflow.com/questions/2366570/displaytag-is-exporting-csv-into-a-xls-file)

但是，现在新生成的 Excel 工作表只有选定的页面数据，而不是整个表格/列表。它正在导出第二页数据是我在第二页等等。

但我想导出所有页面数据。

我完整的 displaytag.properties

```
export.types=csv excel xml rtf pdf  
export.excel=true
export.xml=true 
export.csv=true
export.rtf=false
export.pdf=false
export.excel.class=org.displaytag.export.excel.DefaultHssfExportView
export.pdf.class=org.displaytag.export.DefaultPdfExportView
export.rtf.class=org.displaytag.export.DefaultRtfExportView 
```

在 Jsp 中为表

```
<displaytag:setProperty name="export.csv.filename" value="test.csv" />
<displaytag:setProperty name="export.excel.filename" value="test.xls" />
<displaytag:setProperty name="export.xml.filename" value="test.xml" /> 
```

顺便说一句，其他导出格式（csv、xml）正在生成除 excel 之外的完整数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-21T08:16:53.077

由以下属性配置控制的导出量

```
export.amount=page  //only current page will be exported
export.amount=list //whole list will be exported 
```

并尝试

```
export.excel.class=org.displaytag.export.excel.ExcelHssfView 
```

[ExcelHssf查看](http://www.displaytag.org/1.2/displaytag-export-poi/apidocs/org/displaytag/export/excel/ExcelHssfView.html "ExcelHssf查看")

代替

```
export.excel.class=org.displaytag.export.excel.DefaultHssfExportView 
```

或者不要在 .property 文件中添加此属性 (export.excel.class)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:36:30.920

这似乎是 Displaytag [http://jira.codehaus.org/browse/DISPL-361中的错误和已知问题](http://jira.codehaus.org/browse/DISPL-361)

我找到了一种解决方法，可能对其他人有用！

```
if(this.request.getParameter(TableTagParameters.PARAMETER_EXPORTING) != null)){
  return complete List;
}else {
  return based on user inputs
} 
```

# wpf - 来自后面代码的 WPF 格式化货币列

> ID：15061429
> 
> 赞同：0
> 
> 时间：2013-02-25T06:41:54.190
> 
> 标签：wpf, datagrid

我正在使用 xceed datagridcontrol，我认为它与 DataGrid 非常相似。我使用业务对象类的 ObservableCollection 加载了网格行和列。到目前为止一切顺利，BO 中的所有属性都自动转换为网格列，行都显示得很好。

我想格式化一些列以货币格式显示。我已经阅读了一些与此相关的问题和答案，它们都使用绑定到列及其 stringFormat 属性。由于我没有在 XAML 中声明列，而是从我的 BO 中自动读取网格，因此我正在寻找一种方法来从后面的代码中更改格式。Winforms 中的 DataGridView1.DefaultCellStyle.Format 之类的东西。

谢谢

编辑：

好的...如果不可能，也欢迎 XAML 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:41:46.563

另一个未回答的问题。啜泣啜泣。无论如何......经过几天的搜索和试验，我创建了一个数据模板并定义了一个 CurrencyConverter : IValueConverter 类：

```
 <local:CurrencyConverter x:Key="CC"/>
    <DataTemplate x:Key="CurrencyCellTemplate">
        <TextBlock Text="{Binding Converter={StaticResource CC}}"/>
    </DataTemplate> 
```

并用这个设置样式：

```
 foreach (int idx in moneyColumns) {
            var col = TheGrid.Columns[idx];
            col.CellHorizontalContentAlignment = HorizontalAlignment.Right;
            DataTemplate DT = FindResource("CurrencyCellTemplate") as DataTemplate;
            col.CellContentTemplate = DT;
        } 
```

也许这个自我答案可以在未来帮助某人。

# sinatra - 分页数据映射器

> ID：15061430
> 
> 赞同：1
> 
> 时间：2013-02-25T06:42:05.513
> 
> 标签：sinatra, datamapper, ruby-datamapper

我有一个非常基本的模型，称为 Review（基本上只是一个 ID 序列和一些文本列），我正在为它制作一个简单的分页系统。以下代码：

```
Review.all(:limit => per_page, :offset => offset, :order => [ :id.asc ]) 
```

如果偏移量为 0，则返回正确的对象，但如果偏移量为其他值，则会出现问题。偏移量 > 0 时，代码：

```
reviews = Review.all(:offset => offset, :limit => per_page);
p reviews
p reviews.count 
```

返回

```
[#<Review @id=11 @created_at=<not loaded> @rating=<not loaded> @title=<not loaded> @text=    <not loaded> @name=<not loaded> @from=<not loaded> @stay_date=<not loaded> @helpful=0 @not_helpful=0 @response=<not loaded>>, #<Review @id=12 @created_at=<not loaded> @rating=<not loaded> @title=<not loaded> @text=<not loaded> @name=<not loaded> @from=<not loaded> @stay_date=<not loaded> @helpful=0 @not_helpful=0 @response=<not loaded>>, #<Review @id=13 @created_at=<not loaded> @rating=<not loaded> @title=<not loaded> @text=<not loaded> @name=<not loaded> @from=<not loaded> @stay_date=<not loaded> @helpful=0 @not_helpful=0 @response=<not loaded>>, #<Review @id=14 @created_at=<not loaded> @rating=<not loaded> @title=<not loaded> @text=<not loaded> @name=<not loaded> @from=<not loaded> @stay_date=<not loaded> @helpful=0 @not_helpful=0 @response=<not loaded>>, #<Review @id=15 @created_at=<not loaded> @rating=<not loaded> @title=<not loaded> @text=<not loaded> @name=<not loaded> @from=<not loaded> @stay_date=<not loaded> @helpful=0 @not_helpful=0 @response=<not loaded>>]
0 
```

这怎么样？它正在寻找对象，但无法计算它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:48:36.207

`#to_a`您可以将惰性列表转换为带有和的数组`#count`（例如，`Review.all(:limit => 10, :offset => 10).to_a.count`）。

顺便说一句，本着`Array`:的精神，limit 和 offset 有相当不错的语法糖`Review[offset,limit]`。

完整示例：

```
require 'rubygems'
require 'dm-core'
require 'dm-migrations'
require 'dm-sweatshop' # just to load some fixtures

DataMapper::Logger.new($stdout, :debug)
DataMapper.setup(:default, "sqlite::memory:")

class Review
  include DataMapper::Resource
  property :id,         Serial
  property :title,      String,   :required => true
  property :rating,     Integer,  :min => 1, :max => 10
  property :created_at, DateTime, :default => lambda {Time.now}
end

DataMapper.finalize.auto_migrate!

class FixtureHelpers # Just to cache for sweatshop, avoid polluting top-level
  @@date_range = (Date.new(2003)..Date.today).to_a
  def self.rand_date; @@date_range.choice end
end

Review.fix {{
  :title => /\w+/.gen.capitalize,
  :rating => (1..10).to_a.choice,
  :created_at => FixtureHelpers.rand_date
}}

100.of {Review.gen}

p Review[95,10].to_a.count
#  ~ (0.000105) SELECT "id", "title", "rating", "created_at" FROM "reviews" ORDER BY "id" LIMIT 10 OFFSET 95
#  => 5 
```

# xml - 在 XML Excel 中 - ss:ArrayRange="RC" 何时发挥作用？

> ID：15061431
> 
> 赞同：0
> 
> 时间：2013-02-25T06:42:10.553
> 
> 标签：xml, excel

```
<Cell ss:StyleID="s27"
 ss:ArrayRange="RC"
 ss:Formula="=SUM(IF(MOD(COLUMN(RC[1]:RC[9]),3)&lt;&gt;MOD(COLUMN(),3),0,RC
    [1]:RC[9]))">
<Data  ss:Type="Number">3</Data></Cell> 
```

您好，我有一个创建 Excel XML 文件的系统。现在我们有了这个公式，我们不能只在公式上按 Enter，必须按 CTRL + SHIFT + ENTER 才能成功“提交”它。

现在，当我手动添加公式并保存它，然后在记事本中打开 XML Excel 文件时，我看到 `ss:ArrayRange="RC"` 已添加。我需要将其添加到我的代码中，但我不知道何时需要使用`ss:ArrayRange="RC"`它以及它的含义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:28:09.420

`ss:ArrayRange`指定数组公式和范围

请参阅[MSDN 文章](http://msdn.microsoft.com/en-us/library/office/aa140066%28v=office.10%29.aspx)

## 文章摘录

**属性：** ss:ArrayRange

**说明：** 指定我们应用数组公式的单元格范围。指定数组公式时，只有左上角的单元格包含 ArrayRange 和 Formula 属性。该区域中的其他单元格不包含 ArrayRange 或公式。只要 ss:ArrayRange 属性出现在数组的左上角，该引用就可以是任何有效的引用。例如，这意味着如果我在单元格 A1:B2 中有一个数组，则 A1 必须具有 ArrayRange 属性，但指定的范围引用可能是 B1:A2。

**例子：**

```
<ss:Table>
    <ss:Row ss:Height="3">
        <ss:Cell ss:ArrayRange="R1C1:R2C2" 
                      ss:Formula="={1,2;3,4}">
            <ss:Data ss:Type="Number">1</ss:Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:Type="Number">2</ss:Data>
        </ss:Cell>
    </ss:Row>
    ...
</ss:Table> 
```

# mysql - 如何防止表中的重复条目？

> ID：15061437
> 
> 赞同：1
> 
> 时间：2013-02-25T06:42:37.913
> 
> 标签：mysql, sql, database, unique-constraint

我有 1 张桌子：

表格1：

`used_tag_id | post_id | tag_id`

`user_tag_id`是主键。

`post_id`和有多个条目`tag_id`。

如果我添加`post_id`=1 和`tag_id`=1 它应该添加一次然后如果我再次添加`post_id`=1 和`tag_id`=1 那么它不应该再次添加到表中。
怎么做？
我应该用查询来做到这一点，还是在设计表格时也有什么办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T06:43:45.183

在表上创建复合列`UNIQUE`约束，例如

```
ALTER TABLE tableName ADD CONSTRAINT tb_uq UNIQUE (post_id, tag_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:48:37.833

1.  您可以创建组合 used_tag_id | 的主键。post_id | tag_id
2.  您可以在插入数据之前通过代码检查数据。

# python - 返回一个布尔数据框

> ID：15061442
> 
> 赞同：3
> 
> 时间：2013-02-25T06:43:21.097
> 
> 标签：python, pandas, where

我想创建一个带有布尔值的 DataFrame，其中 np.nan == False 和任何正实值 == True。

```
import numpy as np
import pandas as pd
DF = pd.DataFrame({'a':[1,2,3,4,np.nan],'b':[np.nan,np.nan,np.nan,5,np.nan]})

DF.apply(bool) # Does not work
DF.where(DF.isnull() == False) # Does not work
DF[DF.isnull() == False] # Does not work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:55:52.350

`- np.isnan(df)`很奇怪，但它的表现似乎`pd.notnull(df)`是压倒性的：

```
In [1]: import pandas as pd

In [2]: import numpy as np

In [3]: df = pd.DataFrame({'a':[1,2,3,4,np.nan],'b':[np.nan,np.nan,np.nan,5,np.nan]})

In [4]: - np.isnan(df)
Out[4]: 
       a      b
0   True  False
1   True  False
2   True  False
3   True   True
4  False  False

In [5]: %timeit - np.isnan(df)
10000 loops, best of 3: 159 us per loop

In [6]: %timeit pd.notnull(df)
1000 loops, best of 3: 1.22 ms per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T10:29:33.630

not 有一个方便的函数[`isnull`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.isnull.html)，称为[`notnull`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.notnull.html)：

```
In [11]: pd.notnull(df)
Out[11]: 
       a      b
0   True  False
1   True  False
2   True  False
3   True   True
4  False  False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:32:48.800

将 df 上的 notnull() 和 isnan() 与一些格式错误进行比较：

```
df = pd.DataFrame({'a':[1,2,3,4,np.nan],'b':[np.nan,np.nan,np.nan,5,np.nan],'c':['fish','bear','cat','dog',np.nan]})

%%timeit
legit_dexes =  np.isnan(df[df<=""].astype(float)) == False 
```

1000 个循环，最好的 3 个：每个循环 632 us

```
%%timeit
legit_dexes = pd.notnull(df) 
```

1000 个循环，最好的 3 个：每个循环 751 us

这种忽略格式错误列的变体也类似：

```
%%timeit
legit_dexes = np.isnan(df[df.columns[df.apply(lambda x: not np.any(x.values>=""))]]) == False 
```

1000 个循环，最好的 3 个：每个循环 681 us

# php - 使用 PHP 从图像中获取简化的调色板？

> ID：15061443
> 
> 赞同：1
> 
> 时间：2013-02-25T06:43:26.860
> 
> 标签：php, image

到目前为止，我已经找到了有关如何获取图像中每个像素的所有 RGB 值的示例，但我想要一些可以分解图像并给我一个简化的调色板的东西。

有没有办法使用 imagetruecolortopalette 以某种方式吐出减少的调色板颜色，或者将图像分成 25 x 25 块然后获取该块的平均值？

也许我缺少另一种选择？我基本上只是希望能够在图像中找到最常见的颜色。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:52:32.907

嗯，我已经为客户创造了这样的东西。截图如下

![在此处输入图像描述](../Images/4e31d930e8d2eabbba8814682d23f9c0.png)

完整代码如下

```
$microTime = microtime(true);

function textColor($R1, $G1, $B1) {

    $a = (($R1 * 299) + ($G1 * 587 ) + ($B1 * 114 )) / 1000;
    if ($a < 128)
        return 'white';
    else
        return 'black';
}

function rgb2html($r, $g = -1, $b = -1) {
    $hex = "#";
    $hex.= str_pad(dechex($r), 2, "0", STR_PAD_LEFT);
    $hex.= str_pad(dechex($g), 2, "0", STR_PAD_LEFT);
    $hex.= str_pad(dechex($b), 2, "0", STR_PAD_LEFT);

    return $hex;

    if (is_array($r) && sizeof($r) == 3)
        list($r, $g, $b) = $r;

    $r = intval($r);
    $g = intval($g);
    $b = intval($b);

    $r = dechex($r < 0 ? 0 : ($r > 255 ? 255 : $r));
    $g = dechex($g < 0 ? 0 : ($g > 255 ? 255 : $g));
    $b = dechex($b < 0 ? 0 : ($b > 255 ? 255 : $b));

    $color = (strlen($r) < 2 ? '0' : '') . $r;
    $color .= (strlen($g) < 2 ? '0' : '') . $g;
    $color .= (strlen($b) < 2 ? '0' : '') . $b;
    return '#' . $color;
}

function colorPalette($imageFile, $colorJump, $granularity = 5) {

    $granularity = max(1, abs((int) $granularity));
    $colors = array();
    $ratio = array();
    $wastageCount = array();
    $occurrenceSCount = array();
    $occurrenceMCount = array();

    $size = @getimagesize($imageFile);

    if ($size === false) {
        return false;
    }
    $img = @imagecreatefromstring(file_get_contents($imageFile));

    if (!$img) {
        user_error("Unable to open image file");
        return false;
    }
    for ($y = 0; $y < $size[1]; $y += $granularity) {
        $lastColor = NULL;
        $lastX = -1;

        for ($x = 0; $x < $size[0]; $x += $granularity) {
            $thisColor = imagecolorat($img, $x, $y);
            $rgb = imagecolorsforindex($img, $thisColor);

            $red = round(round(($rgb['red'] / $colorJump)) * $colorJump);
            $green = round(round(($rgb['green'] / $colorJump)) * $colorJump);
            $blue = round(round(($rgb['blue'] / $colorJump)) * $colorJump);

            $thisRGB = $red . ',' . $green . ',' . $blue;

            if ($lastColor != $thisRGB) {

                if (array_key_exists($thisRGB, $wastageCount)) {
                    $wastageCount[$thisRGB]++;
                } else {
                    $wastageCount[$thisRGB] = 1;
                }

                if ($lastX + 1 == $x) {
                    if (array_key_exists($lastColor, $occurrenceSCount)) {
                        $occurrenceSCount[$lastColor]++;
                    } else {
                        $occurrenceSCount[$lastColor] = 1;
                    }
                }

                if ($lastX + 1 != $x) {
                    if (array_key_exists($lastColor, $occurrenceMCount)) {
                        $occurrenceMCount[$lastColor]++;
                    } else {
                        $occurrenceMCount[$lastColor] = 1;
                    }
                }

                $lastColor = $thisRGB;
                $lastX = $x;
            }

            if (array_key_exists($thisRGB, $colors)) {
                $colors[$thisRGB]++;
            } else {
                $colors[$thisRGB] = 1;
            }
        }
    }

    $totalPixels = array_sum($colors);
    foreach ($colors as $k => $v) {
        $ratio[$k] = round(($v / $totalPixels ) * 100, 2);
    }

    return array($ratio, $wastageCount, $colors, $occurrenceSCount, $occurrenceMCount);
} 
```

用法

```
 $colorJump = 1;
    $pixelJump = 1;
    $paletteR = colorPalette($dbImgFile_dir, $colorJump, $pixelJump);
    $palette = $paletteR[0];
    $wastage = $paletteR[1];
    $colorsFound = $paletteR[2];
    $occSArray = $paletteR[3];
    $occMArray = $paletteR[4];
    $totalPixels = array_sum($colorsFound);

    $totalTime = abs(microtime(true) - $microTime); 
```

循环更加复杂，因为我必须从数据库中获取托盘并将颜色与它们匹配，并且还使用了模板解析器，它是完整的自定义代码，不会帮助你。

从这里忽略Required Weight列，计算单次出现和多次出现，如果有单个像素，例如`RED, RED, BLUE, RED, RED`它将是1次出现和2次多次出现

# php - 工资率计算器

> ID：15061449
> 
> 赞同：0
> 
> 时间：2013-02-25T06:43:39.083
> 
> 标签：php, forms, get

我在网上查看过，但所有 $_POST 和 $_GET 示例都是针对文本而不是数字。这不是连接到数据库。它不需要表单验证。它只是在我的系统上本地运行的一个单页项目。我想让它尽可能简单。

目标是有一个输入，您可以在其中输入您的小时工资。例如 15。然后，当您按下提交时，它会返回到同一页面，其中包含您每天、每周、每月和每年赚多少钱的漂亮列表。

任何帮助将不胜感激。

```
<p>Input your Hourly Pay</p>
<form method="GET" action="" >
<input name="num1" type="text" >
<input type="submit" name="submit" value="Submit">
</form>

<?php

if ($_GET['num1']) {
    $rate = $_GET['num1'];
    return $rate;
}    

$result_day= $rate * 8;
$result_week = $rate * 8 * 5;
$result_month = $rate * 8 * 5  * 4;
$result_year = $rate * 8 * 5  * 4  * 12;

echo "Rate: " . $rate . "<br>";
echo "Daily: " . $result_day . "<br>";
echo "Weekly: " . $result_week . "<br>";
echo "Monthly: " . $result_month . "<br>";
echo "Yearly: " . $result_year . "<br>";

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:47:42.807

我做了一些更正，但计算仍然是你原来的：

```
<?php

if (isset($_GET['num1'])) {
    $rate = $_GET['num1'];   

$result_day= $rate * 8;
$result_week = $result_day * 5;
$result_month = $result_week  * 4;
$result_year = $result_month  * 12;

echo "Rate: " . $rate . "<br>";
echo "Daily: " . $result_day . "<br>";
echo "Weekly: " . $result_week . "<br>";
echo "Monthly: " . $result_month . "<br>";
echo "Yearly: " . $result_year . "<br>";

}else{
 echo  "Please enter your rate!";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:13:55.920

Use the `onchange` event with Javascript on any of the fields. You can then use Javascript to calculate the rest of the values and update those fields.

No PHP required. No time lag with a new page required. Users will love it.

# c# - 设置基本游戏和调试基本问题

> ID：15061453
> 
> 赞同：0
> 
> 时间：2013-02-25T06:44:01.437
> 
> 标签：c#, .net, winforms, debugging

我在尝试在基本的瓷砖引擎中创建一个简单的蛇游戏时遇到了一点问题。我从未使用过 C# 或 Windows 窗体，目前处于学习阶段。我很感激我从这里得到的任何帮助。

```
 int[,] level = {
                               { 0, 0, 0, 0, 0 ,0 },
                               { 0, 0, 0, 0, 0 ,0 },
                               { 0, 0, 0, 0, 0 ,0 },
                               { 0, 0, 0, 0, 0 ,0 },
                               { 0, 0, 0, 0, 0 ,0 },
                               { 0, 0, 0, 0, 0 ,0 },
                           }; 
```

目前，所有的瓷砖都是空的，因此关闭。如果我想说添加图像，我所要做的就是将 0 转为 1。我的目标是使用键盘上的箭头键将 0 转为 1。

```
private void tmrMov_Tick(object sender, EventArgs e)
    {

        if (_objPosition == Position.Right) 
        {

            if(_x<6 && _x>=0)
            _x += 1;

         }
        .
        .
        .
         //and so on
        .
        .
        .

        Invalidate();
    } 
```

有了这个，我试图通过箭头键将 0 变为 1，但它目前不起作用。

```
 public Form1()
    {
            InitializeComponent();
            _x = rand.Next(0,5 + 1);
            _y = rand.Next(0, 5 + 1);
            _k = 1;
            level[_x, _y] = _k;
            _objPosition = Position.Right;
    } 
```

这就是我调用上述数组的方式......

请让我知道我做错了什么。我知道我最终必须重新开始或选择另一个项目来工作，但我至少想知道我并没有完全错。

我附上了完整的项目，因为它的阅读时间不长...... [http://www.mediafire.com/?hz3h2job28y9lfb](http://www.mediafire.com/?hz3h2job28y9lfb)

编辑：这个问题也在这里发布，因为 stackexchange 上的一个答案建议在这里发布调试问题：[https ://softwareengineering.stackexchange.com/questions/188285/simple-gameproblem-with-key-mapping](https://softwareengineering.stackexchange.com/questions/188285/simple-gameproblem-with-key-mapping)

随意删除其中一个，但不能同时删除两个！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:22:02.430

要移动你的蛇，你应该把它放在`0`它以前的位置（因为现在它只在单元格上），计算新的位置，然后放入`1`新的位置。因此，您的计时器的刻度处理程序可能如下所示：

```
private void tmrMov_Tick(object sender, EventArgs e)
{
    level[_x, _y] = 0;
    //...
    // other stuff to calculate new location based on Position

    level[_x, _y] = 1;

    Invalidate();
} 
```

在`Paint`事件中添加 PictureBoxes 也是完全错误的。您应该使用类的各种方法绘制板[`Graphics`](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)。看起来你很想这么做，但你为什么放弃了呢？

关于您的代码有很多话要说。这里有几个：

1.  不要在任何地方使用幻数`6`来表示板的宽度或高度，而是将板的大小放在变量中并在任何地方使用它们。通过这种方式，您可以轻松更改电路板尺寸，而不会影响整个源代码（或者只是忘记更新单板`6`并引入难以发现的错误）。

2.  不是每次都从文件中加载图像（注释中的代码`panel1_Paint`），而是加载一次图像，如果需要，调整它的大小，并将其保存在一个字段中。每次需要时使用它。这极大地提高了性能。

3.  用于[`Image.FromFile`](http://msdn.microsoft.com/en-us/library/system.drawing.image.fromfile.aspx)加载图像格式文件。

4.  你永远不希望你的蛇离开棋盘，所以当你想把蛇向右移动时（例如），你可以增加`_x`only when `_x < _boardWidth-1`。你知道我说的是什么意思`_boardWidth`，不是吗？:-)

5.  您应该在活动中绘制整个董事会`Paint`。不只是一个细胞。`Paint`每当您需要绘制表单时都会调用事件，而不仅仅是在您调用该`Invalidate`方法时。

6.  您有一个名为`Position`. 实际上应该是`Direction`。

快乐学习。

# python - 为什么描述符（在 Python 中）不能插入（放置）在已经初始化的对象中？

> ID：15061455
> 
> 赞同：1
> 
> 时间：2013-02-25T06:44:06.550
> 
> 标签：python, oop, class, object, descriptor

在编码过程中，我面临着改变对象属性（但不是类属性）行为的需要。而且我发现已经初始化的对象不能用描述符修补。所以为什么？

代码示例

```
class A(object):
    pass

class D(object):
    def __init__(self, fget=None, fset=None, fdel=None, doc=None):
        pass
    def __get__(self, obj, objtype=None):
        return 5

A.x = D()
A.x
Out[12]: 5 # work!
a = A()
a.y = D()
a.y
Out[14]: <__main__.D at 0x13a8d90> # not work! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:16:35.820

从[文档](http://docs.python.org/2/howto/descriptor.html#invoking-descriptors)中。

> 对于物体来说，机器在`object.__getattribute__()`其中转化`b.x`为`type(b).__dict__['x'].__get__(b, type(b))`。

也就是说，对*实例*( `b`) 的属性查找转换为对*类*( `type(b)`) 的描述符调用。描述符在类级别上运行。

至于为什么会这样，这是因为描述符基本上是一种在属性查找上进行类似方法的工作（即调用方法）的方法。方法本质上是类级别的行为：您通常在类上定义您想要的方法，并且您不会向单个实例添加额外的方法。在实例上进行描述符查找就像在实例上定义方法一样。

现在，可以为实例分配新方法，也可以让描述符作用于特定类的实例。你只需要做额外的工作。正如上面的文档引用所说，机器位于 中`object.__getattribute__`，因此您可以通过在类上定义自定义来覆盖它`__getattribute__`：

```
class Foo(object):
    def __getattribute__(self, attr):
        myDict = object.__getattribute__(self, '__dict__')
        if attr in myDict and hasattr(myDict[attr], '__get__'):
            return myDict[attr].__get__(self, type(self))
        else:
            return super(Foo, self).__getattribute__(attr)

class D(object):
    def __init__(self, fget=None, fset=None, fdel=None, doc=None):
        pass
    def __get__(self, obj, objtype=None):
        return 5 
```

进而：

```
>>> f = Foo()
>>> f.x = D()
>>> f.x
5 
```

因此，如果您觉得有必要这样做，您可以实现它。这不是默认行为，仅仅是因为它不是描述符的设计目的。

# android - 如何冻结有根安卓设备上的应用程序

> ID：15061458
> 
> 赞同：0
> 
> 时间：2013-02-25T06:44:32.483
> 
> 标签：android, root, android-package-managers

如何**冻结/解冻**root 设备上的应用程序，如**Titanium Backup**应用程序，以便我无法从 root 设备访问我的应用程序。有什么方法可以追踪设备是否已root？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:47:18.723

***我正在使用 RootTools 库来执行禁用/启用命令***

```
CommandCapture command_enable = new CommandCapture(0,"pm enable "+ Package_Name);                           
RootTools.getShell(true).add(command_enable).waitForFinish();

CommandCapture command_disable = new CommandCapture(0,"pm disable "+ Package_Name);
RootTools.getShell(true).add(command_disable).waitForFinish(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:25:41.677

您实际上可以尝试运行 root 命令并捕获响应并确定设备是否已植根。

从[这里](http://muzikant-android.blogspot.mx/2011/02/how-to-get-root-access-and-execute.html)获取代码并对其进行一些修改以满足您的需要，我认为它可以是这样的：

```
public static boolean canRunRootCommands()
       {
          boolean retval = false;
          Process suProcess;

          try
          {
             suProcess = Runtime.getRuntime().exec("su");

             DataOutputStream os = new DataOutputStream(suProcess.getOutputStream());
             DataInputStream osRes = new DataInputStream(suProcess.getInputStream());

             if (null != os && null != osRes)
             {
                retval = true;

                /*
                 *if got to this point, its safe to assume the 
                 *device is rooted and here you can do something 
                 *to tell your app that su is present. Or you could 
                 *use the bool return of this function to know that the 
                 *device is rooted and make the app act different.
                 */

             }
          }
          catch (Exception e)
          {
             // Can't get root !
             // [...] meaning that the device is not rooted

             retval = false;
          }

          return retval;
       } 
```

我没有对此进行测试，但我相信它会对您有所帮助。或者至少它会为你指明正确的方向。

# ios - 从对象数组中检索元素时出现问题 - 目标 C

> ID：15061459
> 
> 赞同：0
> 
> 时间：2013-02-25T06:44:38.583
> 
> 标签：ios, nsmutablearray, nsarray

我有一个 Person 类，其中包含变量 name、age、local 和 about，我将 person 对象的值添加到可变数组中，如下所示：

```
Person *myPerson=[[Person alloc]init];
NSMutableArray *personArray=[[NSMutableArray alloc]init];

myPerson.name=namefield;    //'namefield' retrieved from db
myPerson.age=agefield;      //'agefield' retrieved from db
myPerson.local=locfield;    //'locfield' retrieved from db
myPerson.about=aboutfield;  //'aboutfield' retrieved from db

[personArray addObject:myPerson]; 
```

我在尝试使用下面的代码打印出元素时遇到问题；重复显示最后一个元素，

```
for (int i = 0; i < [personArray count]; i++){
    Person * p = [personArray objectAtIndex:i];
    NSLog(@"name %@",p.name);
    NSLog(@"age %@",p.age);      
} 
```

希望你能善待我，因为我是 iPhone 开发的新手。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T06:52:19.933

你可以写这样的代码

```
NSMutableArray *personArray=[[NSMutableArray alloc]init];
for(int i=o;i<noOfRecords;i++)
{
    Person *myPerson=[[Person alloc]init];
    myPerson.name=namefield;    //'namefield' retrieved from db
    myPerson.age=agefield;      //'agefield' retrieved from db
    myPerson.local=locfield;    //'locfield' retrieved from db
    myPerson.about=aboutfield;  //'aboutfield' retrieved from db

    [personArray addObject:myPerson];
    [myPerson release];
} 
```

然后检索数组，这可能会有所帮助，因为您只获取最后一行

如果 ARC 未启用则释放，否则无需释放

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T06:49:20.013

看起来您正在重新使用`myPerson`. 当您将对象添加到数组时，它不会创建它的副本。相反，它只存储对对象的引用，因此当您稍后更改它时，它会更改指向它的所有引用。

更改此行：

```
[personArray addObject:myPerson]; 
```

到这一行：

```
[[personArray addObject:myPerson] copy]; 
```

为了将您的人的**副本**添加到数组中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T06:52:04.967

`Person *myPerson=[[Person alloc]init];`这一行，您似乎已经`for`在添加对象的循环之外编写了这一行。因此，`person class`数组的所有对象只代表一个存在的实例。将该行放入`for`循环中，以便在每次迭代时将一个新`person`对象添加到数组中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T06:59:27.807

```
Person *myPerson=[[Person alloc]init];
NSMutableArray *personArray=[[NSMutableArray alloc]init];

myPerson.name=namefield;    //'namefield' retrieved from db
myPerson.age=agefield;      //'agefield' retrieved from db
myPerson.local=locfield;    //'locfield' retrieved from db
myPerson.about=aboutfield;  //'aboutfield' retrieved from db

for (int i = 0; i < [personArray count]; i++) 
{
    [personArray addObject:myPerson];
    NSLog(@"name %@",p.name);
} 
```

试试这个...

# c# - sql查询经纬度

> ID：15061462
> 
> 赞同：-1
> 
> 时间：2013-02-25T06:44:45.210
> 
> 标签：c#, asp.net, sql, sql-server, tsql

我有这张桌子

```
CREATE TABLE [dbo].[EnquiryMaster](
    [EnquiryId] [int] IDENTITY(1,1) NOT NULL,
    [orgid] [int] NULL,
    [uid] [int] NULL,
    [Company] [varchar](160) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [HeadOfficeAddress] [varchar](460) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [ZipCode] [varchar](6) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Latitude] [float] NOT NULL,
    [Longitude] [float] NOT NULL,   

    CONSTRAINT [PK_EnquiryMaster] PRIMARY KEY CLUSTERED 
    (
        [EnquiryId] ASC
    )WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] 
```

我想写一个查询，这样它将显示我将从下拉列表中选择的公司的 100 度纬度和经度内的所有公司。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:52:44.703

试试这个

```
select * 
from [dbo].[EnquiryMaster] 
where (Latitude <= @lat and Longitude <= @long 
      and Latitude + 100 >= @lat and  Longitude +100 >= @long)
OR (Latitude >= @lat and Longitude >= @long 
      and Latitude - 100 <= @lat and  Longitude -100 <= @long)
OR (Latitude >= @lat and Longitude <= @long 
      and Latitude - 100 <= @lat and  Longitude + 100 >= @long)
OR (Latitude <= @lat and Longitude >= @long 
      and Latitude + 100 >= @lat and  Longitude - 100 <= @long) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:21:05.987

```
where Latitude  between @lat  - 100 and @lat  + 100
and   Longitude between @long - 100 and @long + 100 
```

# sql - oracle中的全外连接

> ID：15061464
> 
> 赞同：1
> 
> 时间：2013-02-25T06:45:00.330
> 
> 标签：sql, oracle, join

我刚刚注意到`FULL OUTER JOIN`不在**Oracle**中工作。

其他查询工作正常，但是当我使用完全外连接触发查询时，它需要时间并且断开连接并抛出错误。

**ORA-03113: 通信通道上的文件结尾**

*RIGHT OUTER JOIN*和*LEFT OUTER JOIN*工作正常。

对于下面我使用完全外连接获取所有记录的查询，有什么替代方法？

```
select * from 
(
    select 
    FTM_OFFICE_ID,
    NVL(SUM(FTD_NRS_AMOUNT),0) as TOTAL 
    from FMS_TRANS_DTL 
    inner join FMS_TRANS_MST ON FMS_TRANS_MST.FTM_TRANS_MST_ID = FMS_TRANS_DTL.FTD_TRANS_MST_ID 
    inner join FMS_FC_VOUCHER_CONFIG ON FMS_FC_VOUCHER_CONFIG.FFVC_VOUCHER_ID = FMS_TRANS_MST.FTM_VOUCHER_ID 
    where FFVC_ACCOUNT_TYPE = 3 and FTM_FISCAL_YEAR='2066/67'
    and FTD_ACC_ID in (select distinct FDP_DHARAUTI_C_ACC_ID from FMS_DHARAUTI_PARAMETER where FDP_FISCAL_YEAR='2066/67' )
    /*and FTD_ACC_ID in (591)*/
    group by FTM_OFFICE_ID 
) T1
full outer join
(
    select 
    FTM_OFFICE_ID,
    NVL(SUM(FTD_NRS_AMOUNT),0) as TOTAL 
    from FMS_TRANS_DTL 
    inner join FMS_TRANS_MST ON FMS_TRANS_MST.FTM_TRANS_MST_ID = FMS_TRANS_DTL.FTD_TRANS_MST_ID 
    inner join FMS_FC_VOUCHER_CONFIG ON FMS_FC_VOUCHER_CONFIG.FFVC_VOUCHER_ID = FMS_TRANS_MST.FTM_VOUCHER_ID 
    where FFVC_ACCOUNT_TYPE = 3 and FTM_FISCAL_YEAR='2066/67'
    /*and FTD_ACC_ID in (592)*/
    and FTD_ACC_ID in 
    (select distinct FDP_DHARAUTI_L_ACC_ID from FMS_DHARAUTI_PARAMETER where FDP_FISCAL_YEAR='2066/67' )
    group by FTM_OFFICE_ID 
) T2
on T1.FTM_OFFICE_ID=T2.FTM_OFFICE_ID
/*
 The no. of rows that T1 can have can be different that no. of rows T2 can have. 
 Its not necessary any OFFICE_ID must have amount under any FTD_ACC_ID.
*/ 
```

刚刚注意到，如果我删除条件 for 中的子查询`FTD_ACC_ID`，查询运行完美。为什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:21:40.720

`FULL OUTER JOIN`在 Oracle 中得到很好的支持。

您遇到的错误听起来像是 Oracle 错误，或者可能是某种形式的损坏。`alert.log`每当发生 ORA-03113 时，您应该会发现记录在其中的错误。

通常，如果您收到此错误，是因为该会话的后台 oracle 系统进程已死亡（这几乎总是由于 Oracle 内部错误）。

这对您友好的本地 DBA 来说是个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T14:45:45.997

基于您的查询+后续评论的解决方法是：

```
alter session set "_optimizer_cost_based_transformation"=off; 
```

例如：

```
SQL> alter session set "_optimizer_cost_based_transformation"=off;

Session altered. 
```

或在 sql 中作为提示

```
/*+ opt_param('_optimizer_cost_based_transformation', 'off') 
```

例如

```
select /*+ opt_param('_optimizer_cost_based_transformation', 'off') */ * from 
(
    select FTM_OFFICE_ID, 
```

你可能会遇到错误：

```
BUG 4204383: ORA-7445[KKQTNLOCBK] USING QUERY WITH SUBQUERY AND FULL OUTER JOIN 
```

仅在 10.2.0.2 及更高版本上可用的补丁（在 10.2.0.4 中完全修复）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T07:13:35.747

如果确实（无论出于何种原因）完全外部连接对您不起作用，请使用

```
-- all rows present in both t1 and t2
select * from t1 inner join t2
union all
-- all rows present in t1 but not in t2
select * from t1 left outer join t2 where t2.pk is null
union all
-- all rows present in t2 but not in t1
select * from t1 right outer join t2 where t1.pk is null 
```

代替

```
select * from t1 full outer join t2 
```

这将返回相同的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T06:56:39.090

你可以试试这个查询：

```
 SELECT 
    FTM_OFFICE_ID,
    NVL(SUM(FTD_NRS_AMOUNT),0) AS TOTAL 
    FROM FMS_TRANS_DTL 
    INNER JOIN FMS_TRANS_MST ON FMS_TRANS_MST.FTM_TRANS_MST_ID = FMS_TRANS_DTL.FTD_TRANS_MST_ID 
    INNER JOIN FMS_FC_VOUCHER_CONFIG ON FMS_FC_VOUCHER_CONFIG.FFVC_VOUCHER_ID = FMS_TRANS_MST.FTM_VOUCHER_ID 
    WHERE FFVC_ACCOUNT_TYPE = 3 AND FTM_FISCAL_YEAR='2066/67'
    AND FTD_ACC_ID IN (
            SELECT DISTINCT FDP_DHARAUTI_C_ACC_ID FROM FMS_DHARAUTI_PARAMETER WHERE FDP_FISCAL_YEAR='2066/67'
            UNION
            SELECT DISTINCT FDP_DHARAUTI_L_ACC_ID FROM FMS_DHARAUTI_PARAMETER WHERE FDP_FISCAL_YEAR='2066/67'   
            )
    GROUP BY FTM_OFFICE_ID 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T07:51:43.870

看起来唯一不同的是 FTD_ACC_ID 值 105 和 110 的单独总计。一种方法是使用 CASE 语句分别总计。

```
select 
FTM_OFFICE_ID,
NVL(SUM(CASE FTD_ACC_ID WHEN 105 THEN FTD_NRS_AMOUNT ELSE 0 END),0) as TOTAL_105,
NVL(SUM(CASE FTD_ACC_ID WHEN 110 THEN FTD_NRS_AMOUNT ELSE 0 END),0) as TOTAL_110,
 from FMS_TRANS_DTL 
inner join FMS_TRANS_MST ON FMS_TRANS_MST.FTM_TRANS_MST_ID = FMS_TRANS_DTL.FTD_TRANS_MST_ID 
inner join FMS_FC_VOUCHER_CONFIG ON FMS_FC_VOUCHER_CONFIG.FFVC_VOUCHER_ID = FMS_TRANS_MST.FTM_VOUCHER_ID 
where FFVC_ACCOUNT_TYPE = 3 and FTM_FISCAL_YEAR='2066/67'
and FTD_ACC_ID in (105,110)
group by FTM_OFFICE_ID 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T07:02:33.373

像这样在查询中使用`UNION`而不是`FULL OUTER JOIN`

```
select * from 
(

select 
FTM_OFFICE_ID,
NVL(SUM(FTD_NRS_AMOUNT),0) as TOTAL 
from FMS_TRANS_DTL 
inner join FMS_TRANS_MST ON FMS_TRANS_MST.FTM_TRANS_MST_ID = FMS_TRANS_DTL.FTD_TRANS_MST_ID 
inner join FMS_FC_VOUCHER_CONFIG ON FMS_FC_VOUCHER_CONFIG.FFVC_VOUCHER_ID = FMS_TRANS_MST.FTM_VOUCHER_ID 
where FFVC_ACCOUNT_TYPE = 3 and FTM_FISCAL_YEAR='2066/67'
and FTD_ACC_ID = 105
group by FTM_OFFICE_ID ) T1 union (select FTM_OFFICE_ID,
NVL(SUM(FTD_NRS_AMOUNT),0) as TOTAL 
from FMS_TRANS_DTL 
inner join FMS_TRANS_MST ON FMS_TRANS_MST.FTM_TRANS_MST_ID = FMS_TRANS_DTL.FTD_TRANS_MST_ID 
inner join FMS_FC_VOUCHER_CONFIG ON FMS_FC_VOUCHER_CONFIG.FFVC_VOUCHER_ID = FMS_TRANS_MST.FTM_VOUCHER_ID 
where FFVC_ACCOUNT_TYPE = 3 and FTM_FISCAL_YEAR='2066/67'
and FTD_ACC_ID = 110
group by FTM_OFFICE_ID )T2 
```

# jquery - jquery表单高级表单克隆

> ID：15061473
> 
> 赞同：0
> 
> 时间：2013-02-25T06:45:45.090
> 
> 标签：jquery, forms, clone

如何制作一个可以在单击添加行链接时添加行并可以在单击删除时删除的表单。我的表单中还有一个下拉列表，其中包含以下选项 1\. ---Select--- 默认情况下 2\. 资产 3\. 无资产

现在，当用户选择资产时，会在当前行的正下方显示一个动态表单。动态框应该有这个字段 1.资产类型：一个下拉列表（其值应该用ajax填充） 2.名称：一个简单的输入文本字段 3.序列号：文本字段 4.描述：文本字段

这个表单应该有添加和删除的选项，甚至应该为那些添加的行生成动态表单框。

```
 <table id="expense_table" class="">
            <thead>
                <tr>
                <th>Sl. No</th>
                <th>Particulars</th>
                <th>Type</th>
                <th>Qty</th>
                <th>Rate</th>
                <th>Amount</th>
                <th>Action</th>
            </tr>
           </thead>
    <tbody>
            <tr id="row_1">
                <td>1</td>
                <td><input type="text" name="particulars" /></td>
                <td>
                    <select id="expense_type" name="expense_type" class="exp_type span2">
                        <option value="">---Select---</option>
                        <option value="asset">Asset</option><!---when Asset is selected a dynamic box with some fields should appear---->
                        <option value="non_asset">Non Asset</option>
                    </select>
                </td>
                <td><input type="text" name="qty" class="input-small" /></td>
                <td><input type="text" name="rate" class="input-small"  /></td>
                <td><input type="text" name="amount" class="input-small"  /></td>
                <td>X</td>
            </tr>
            <tr id="asset_details_1"><td colspan="7"> <!----- here should be the dynamic box with the fields---->
</td></tr>
    </tbody>
</table> 
```

我使用过表单克隆，当我没有下拉列表但使用下拉列表和动态框时我无法使用它，我无法这样做我如何在 php 中接收服务器中的数据。请帮帮我。我不希望为我编写整个代码，但我想要的是正确方向的指导。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:55:00.807

那么jQuery.addRow 插件将帮助您克隆选择框。

看看[这里](http://www.examplet.buss.hk/jquery/table.addrow.php)

它允许动态添加和删除行。

```
$(".addRow").btnAddRow();
$(".delRow").btnDelRow(); 
```

以上两个也有回调函数。

您也有`expense_type`选择框的 id 及其克隆，并且多个 dom 不能有相同的 id。

现在您动态添加的选择框没有分配给它的事件，所以使用`.on`

```
$('select[name="name="expense_type""]').on('change',function(){
   //write code
}); 
```

# php - 使用贝宝接收付款

> ID：15061478
> 
> 赞同：0
> 
> 时间：2013-02-25T06:46:07.913
> 
> 标签：php, api, cakephp, paypal, payment

我正在创建一个非常小的网站，我将在其中销售一些产品。我需要这个网站显示可用的产品，用户可以添加到购物车，最后付款，然后我会自己发送产品给他们。这真是一个小生意。

我正在查看贝宝选项，但我不太了解它是如何工作的。据我了解，使用免费帐户，我只能使用他们的按钮，但我无法在我的网站上管理我的产品的动态解决方案（看起来我需要在他们的产品上添加名称和价格等产品信息网站 ）。

我想做的只是使用我自己的网站来处理这个非常简单的商店/产品，最后，用户点击一个 CheckOut 按钮，然后我将用户重定向到一个 paypal 页面，他们可以在那里支付全部费用值，然后贝宝将它们重定向回我（作为免费帐户或至少使用 5 美元帐户）。

那可能吗？

顺便说一句，我正在使用 CakePHP 来构建它，并且我已经用这个框架构建了网站，并且构建我需要的东西已经绰绰有余，我真的不需要任何像 magento 或其他电子商务平台这样的解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:57:04.930

如果您使用 Paypal 的免费帐户，那么您的访问者将离开您的网站，前往 Paypal 的网站进行付款，然后返回您的网站。Paypals 付费版本允许您将访问者留在您的页面上，但您必须对您的网站进行编程以使用他们的 API。加上成本可以加起来。除了按钮之外，Paypal 还有其他服务。例如，他们也有一个购物车，但在这里，您的访客将再次离开您的网站，前往 Paypals 网站，将商品添加到购物车中。

您可能想要查看的另一家公司是[https://stripe.com/](https://stripe.com/) 在这里您可以将访问者保留在您的网站上，并且只需为每笔交易付费，而不是像 Paypal 那样按月付费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:34:50.780

如果您想从您的网站管理您的项目和库存，而不是在 PayPal.com 的按钮中输入所有内容，我建议您使用 Express Checkout。Express Checkout 也是一项免费服务，允许您通过 API 将所有付款详细信息发送到 PayPal，PayPal 将进行身份验证并允许您的买家选择运输详细信息。然后可以将用户重定向回您的网站以完成他们的订单。

您可以在此处找到更多信息：[https ://www.x.com/developers/paypal/documentation-tools/express-checkout/gs_expresscheckout](https://www.x.com/developers/paypal/documentation-tools/express-checkout/gs_expresscheckout)

谢谢，

# c# - 在框架中启动的应用程序标志

> ID：15061479
> 
> 赞同：0
> 
> 时间：2013-02-25T06:46:10.563
> 
> 标签：c#, html, asp.net, .net, httphandler

我正在尝试在 HTML 模块的应用程序启动中执行一些代码。由于 Init() 被多次触发，是否有可靠的标志告诉我应用程序是否启动？

```
public class Module : IHttpModule
{
    #region IHttpModule Members

    public void Dispose()
    {
        //clean-up code here.
    }

    public void Init(HttpApplication context)
    {
        //PROCESS ON APPLICATION START EVENT
        this.OnApplicationStart(context);
    }

    #endregion

    public void OnApplicationStart(HttpApplication context)
    {
        if (!application started??) //FRAMEWORK FLAG?
            //DO SOMETHING
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:08:43.463

你可以使用一个标志：

```
public class Module : IHttpModule
{
    private static bool isStarted = false;
    private static object syncRoot = new object();

    public void Dispose()
    {
        //clean-up code here.
    }

    public void Init(HttpApplication context)
    {
        if (!isStarted)
        {
            lock (syncRoot)
            {
                if (!isStarted) 
                {
                    //PROCESS ON APPLICATION START EVENT
                    this.OnApplicationStart(context);
                    isStarted = true;
                }
            }
        }
    }

    public void OnApplicationStart(HttpApplication context)
    {
        //DO SOMETHING
    }
} 
```

如果您的目标是 .NET 4.0 或更高版本，作为使用 HttpModules 执行此任务的更好替代方案，我建议您使用[`WebActivator`](https://github.com/davidebbo/WebActivator)它是一个非常方便的包，它[`Microsoft.Web.Infrastructure`](http://nuget.org/packages/Microsoft.Web.Infrastructure/)允许您订阅诸如`Application_Start`单独库中的事件。

例如，只需将以下代码放入类库中：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(WebAppInitializer), "Start")]
namespace FooBar
{
    public static class WebAppInitializer
    {
        public static void Start()
        {
            // PROCESS ON APPLICATION START EVENT
        }
    }
} 
```

然后在您的 ASP.NET 应用程序中引用类库就可以了。

您还可以使用这个方便的 WebActivator 对您的 HttpModules 执行依赖注入并自行注册它们，而无需将它们添加到 web.config。[`nice blog post`](http://haacked.com/archive/2011/06/02/dependency-injection-with-asp-net-httpmodules.aspx)如果你有兴趣，Phil Haack 写了一篇关于这个主题的文章。

# bash - 如何重定向标准输入或阻止键盘输入？

> ID：15061481
> 
> 赞同：2
> 
> 时间：2013-02-25T06:46:16.397
> 
> 标签：bash

我在 bash 中打印一个进度条，但是当用户按下任何键时它会“中断”。我想重定向标准输入或阻止键盘输入，但我无法做到。这是我的代码（整个代码的一小部分）

```
#!/usr/bin/env bash
while [[ true ]]; do
echo -n "#" && 0> /dev/null
sleep 1
done 
```

任何帮助将不胜感激:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:55:02.290

安斯加尔是正确的。您可以搞乱重定向标准输入，但我不确定这是否会根据您的定义对您的脚本编写工作有所帮助。以下是一些朝着您认为正确的方向进行的尝试：

雷蒂：

```
http://pasky.or.cz/dev/retty/ 
```

复制人：

```
http://blog.nelhage.com/2011/01/reptyr-attach-a-running-process-to-a-new-terminal/ 
```

玩一会儿，然后看看为什么 Ansgar 有它的权利，IMO。或者你可能认为这没问题。

# .net - windows微秒计算精度

> ID：15061484
> 
> 赞同：1
> 
> 时间：2013-02-25T06:46:25.147
> 
> 标签：.net, windows, datetime

我正在尝试将 DateTime 转换为 Julian 日期并在 Windows 7 下反转它。

```
 public static double ToJulianDate(this DateTime dt) {
        return dt.ToOADate() + 2415018.5;
    }
    public static DateTime Julian2DT(this double julian) {
        return DateTime.FromOADate(julian - 2415018.5);
    } 
```

当我测试这两个功能时，如下所示

```
var dt = DateTime.Now;
dt.ToString("yyyy-MM-dd HH:mm:ss.ffffff").Dump();
dt.ToJulianDate().Julian2DT().ToString("yyyy-MM-dd HH:mm:ss.ffffff").Dump(); 
```

反转的儒略日期总是与原始 DateTime 值略有不同，相差数百微秒。

是我写了错误的代码还是 Windows 时间系统中存在一些微秒的误差？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:51:27.307

这是儒略日期表示为 的事实的自然结果`double`，其准确性总是有限的。例如，当前值约为 2456348.78370906。这在小数点前给出了 7 个有效数字 - 而 a`double`仅精确到“大约”15 个小数位。所以我们在小数部分内有大约 8 位小数的精度......这意味着代表一天。

现在 1 天 / 100000000 = 0.000864 秒。所以我只希望准确度不到一毫秒。

如果您*不*为 Julian 日期添加常数，事情看起来会更加乐观 - 此时当前值仅为 41330 左右，因此在一天中的时间方面的精度值中有更多“空间”。基本上，浮点值越大，绝对精度越差。（相邻值之间的差距变大。）

# mysql - MYSQL：仅更新非空字段的最充分方法？

> ID：15061486
> 
> 赞同：2
> 
> 时间：2013-02-25T06:46:46.303
> 
> 标签：mysql, sql, sql-update

假设我有这张桌子：

```
ID | col1 | col2 | col3 | col4
1  |  val |      |  val | 
```

有没有办法修改这个查询：

```
UPDATE table set col1 = "bla", col2 = "bla", col3 = "bla", col4 = "bla where id = 1 
```

所以我最终得到：

```
ID | col1 | col2 | col3 | col4
1  |  val |  bla |  val |  bla 
```

换句话说，查询必须只更新不为空的字段。你是怎样做的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T06:48:42.990

最简单的答案是使用`COALESCE`

```
UPDATE table 
set     col1 = COALESCE(col1,"bla"), 
        col2 = COALESCE(col2,"bla"), 
        col3 = COALESCE(col3,"bla"), 
        col4 = COALESCE(col4,"bla")
where   id = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/15562/1)

其他链接。

*   [MySQL 合并](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T05:58:22.337

除了 Coalesce，您还可以使用 IsNUll，coalesce 和 isnull 在许多方面是等价的

```
Update Table
set col1 = Isnull(col1,'bla'),... 
```

当然，如果 RD 也希望它也适用于空字符串，JW 已经给出了解决方案

# html - 除中心的圆形区域外，模糊网络摄像头流

> ID：15061487
> 
> 赞同：1
> 
> 时间：2013-02-25T06:46:53.307
> 
> 标签：html, video, webcam, blur

我在我的 MVC 应用程序中使用[photobooth 。](http://wolframhempel.github.com/photobooth-js/)

在我的页面上，我显示了实时网络摄像头屏幕，并在网络摄像头屏幕上放置了一个画布元素，代码如下所示：

```
<canvas id="myCanvas" height="500" width="700"></canvas>
<div id="videoStreamDiv" ></div> 
```

我要完成的是：我在画布上画了一个圆圈，我希望圆圈外的网络摄像头流区域模糊。

**我已经在这个问题上工作了几天，任何帮助将不胜感激！**

# php - 如何使用 preg_match php 从字符串中获取整数值

> ID：15061490
> 
> 赞同：2
> 
> 时间：2013-02-25T06:47:12.280
> 
> 标签：php, preg-match

我想使用[preg_match](http://php.net/manual/en/function.preg-match.php) (PHP) 从以下字符串值中找到整数值。我正在使用以下代码来查找整数值，它适用于正整数，但我需要正整数和负整数。谁能帮我？？

字符串值：提示：**状态：-1**响应：再见消息：感谢所有的鱼。

到目前为止的 preg_match 代码：

```
preg_match('/Status: (\d+)/', $queueinfo, $status1 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:25:25.547

您的代码几乎就在那里：

```
preg_match('/Status: (\d+)/', $queueinfo, $status1 ); 
```

您唯一需要添加的是可选的破折号前缀：

```
preg_match('/Status: (-?\d+)/', $queueinfo, $status1 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:52:42.320

```
$queueinfo  = 'Hint: Status: -1 Response: Goodbye Message: Thanks for all the fish.';
preg_match('/Status:\s*(?P<status>\-?\d+)/', $queueinfo, $match );  

echo $match['status']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T06:51:48.697

试试看：

```
preg_match('/Status\:\s(\-?)(\d+)/', $queueinfo, $m);
$status1 = (int)($m[1].$m[2]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T07:20:13.180

```
<?php
preg_match_all('/-\d+|(?!-)\d+/', 'String Value: Hint: Status: -1 Response: 12588 Goodbye Message: Thanks for all the fish.', $status1 );
print_r($status1);
?> 
```

数组（[0] => 数组（[0] => -1 [1] => 12588））

# c# - 生成空对象 - 具有空属性/子类的空类 C#

> ID：15061493
> 
> 赞同：8
> 
> 时间：2013-02-25T06:47:24.857
> 
> 标签：c#, empty-class

我有两节课：

```
public class HumanProperties { int prop1; int prop2; string name;}

public class Human{int age; HumanProperties properties;} 
```

现在，如果我想创建 Human 的新实例，我必须这样做`Human person = new Human();` 但是当我尝试访问时，我`person.properties.prop1=1;`在属性上有 nullRefrence，因为我也必须创建新属性。我必须这样做：

```
Human person = new Human();
person.properties = new HumanProperties(); 
```

现在我可以访问这个`person.properties.prop1=1;`

这是一个小例子，但我有从 xsd 生成的巨大类，我没有太多时间手动生成这个“人”类及其所有子类。有没有办法以编程方式完成它，或者是否有一些生成器？

或者我可以遍历类并为每个属性创建新类 typeof 属性并将其加入父类吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T07:13:15.703

我不认为有一种传统的方式来做你所要求的，因为类的默认类型是`null`. 但是，您可以使用反射以递归方式遍历属性，使用无参数构造函数查找公共属性并对其进行初始化。像这样的东西应该可以工作（未经测试）：

```
void InitProperties(object obj)
{
    foreach (var prop in obj.GetType()
        .GetProperties(BindingFlags.Public | BindingFlags.Instance)
        .Where(p => p.CanWrite))
    {
        var type = prop.PropertyType;
        var constr = type.GetConstructor(Type.EmptyTypes); //find paramless const
        if (type.IsClass && constr != null)
        {
            var propInst = Activator.CreateInstance(type);
            prop.SetValue(obj, propInst, null);
            InitProperties(propInst);
        }
    }
} 
```

然后你可以像这样使用它：

```
var human = new Human();
InitProperties(human); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T06:54:49.387

我建议你使用构造函数：

```
public class Human
{
  public Human()
  {
     Properties = new HumanProperties();
  }

  public int Age {get; set;} 
  public HumanProperties Properties {get; set;}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T06:48:59.100

您可以将您的类声明更改为：

```
public class Human
{
    int age;
    HumanProperties properties = new HumanProperties();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T07:01:31.577

.NET 利用属性。

您可以使用 Visual Studio 键盘快捷键：Ctrl+r、Ctrl+e 自动生成属性。

试试这个：

```
public class HumanProperties
{
    public int Prop1
    {
        get { return _prop1; }
        set { _prop1 = value; }
    }
    private int _prop1 = 0;

    public int Prop2
    {
        get { return _prop2; }
        set { _prop2 = value; }
    }
    private int _prop2;

    public string Name
    {
        get { return _name; }
        set { _name = value; }
    }
    private string _name = String.Empty;
}

public class Human
{
    public int Age
    {
        get { return _age; }
        set { _age = value; }
    }
    private int _age = 0;

    public HumanProperties Properties
    {
        get { return _properties; }
        set { _properties = value; }
    }
    private HumanProperties _properties = new HumanProperties();
} 
```

# spring - 处理多个验证注释错误消息

> ID：15061498
> 
> 赞同：4
> 
> 时间：2013-02-25T06:47:42.407
> 
> 标签：spring, validation, spring-mvc, hibernate-annotations, spring-annotations

我正在使用注释在 SpringMVC 中尝试验证...

我为一个字段使用了 2 个注释来验证

**@NotEmpty(message="*需要")***

***@Size(min="3" max="8" message="超出范围")***

***私人字符串密码；***

我面临的问题是，当该字段留空时，它会显示两个错误消息（*必需以及超出范围）。但我想显示这些错误消息中的任何一个，而不是同时显示...

是否可以通过一条消息进行限制？如果是这样，这种情况的可能性是什么？

任何建议和指导表示赞赏..在此先感谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T20:45:58.647

我遇到了同样的问题，所以我创建了只显示第一个错误的自定义错误标签 - 随意使用它：

a] 创建自定义标签类

```
package cz.devmint.springext.web.tags.form;

import javax.servlet.jsp.JspException;

import org.apache.commons.lang.StringUtils;
import org.springframework.util.ObjectUtils;
import org.springframework.web.servlet.tags.form.ErrorsTag;
import org.springframework.web.servlet.tags.form.TagWriter;

public class ErrorsTagExt extends ErrorsTag {

private boolean firstErrorOnly = true;

public boolean isFirstErrorOnly() {
    return firstErrorOnly;
}

public void setFirstErrorOnly(boolean firstErrorOnly) {
    this.firstErrorOnly = firstErrorOnly;
}

@Override
protected void renderDefaultContent(TagWriter tagWriter) throws JspException {
    tagWriter.startTag(getElement());
    writeDefaultAttributes(tagWriter);
    String delimiter = ObjectUtils.getDisplayString(evaluate("delimiter", getDelimiter()));
    String[] errorMessages = getBindStatus().getErrorMessages();
    for(int i = 0; i < errorMessages.length; i++) {
        String errorMessage = errorMessages[i];
        if (i > 0) {
            tagWriter.appendValue(delimiter);
        }
        tagWriter.appendValue(getDisplayString(errorMessage));
        if (firstErrorOnly) break;
    }
    tagWriter.endTag();
} 
```

b] 要使用自定义标签，您必须创建标签库描述符 - 您可以简单地从 spring 的标签库描述符中复制 ErrorsTag 声明（在 META-INF 目录中的 spring-webmvc-3.2.1.RELEASE.jar 下 name `spring-form.tld`）并添加您自己的属性 `firstErrorOnly`。下面是从我的库中提取的完整示例 - 请参阅代码中可以更改和自定义的注释：

```
<?xml version="1.0" encoding="UTF-8"?>
<taglib xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_0.xsd"
    version="2.0">

<description>Custom extension to Spring Framework JSP Tag Library</description>
<tlib-version>3.0</tlib-version>
<short-name>tags</short-name>
<!-- use your own uri -->
<uri>http://cz.devmint.spring-ext/tags</uri>
<tag>
    <description>Renders field errors in an HTML 'span' tag.</description>
    <name>errors</name>
    <!-- use your own package - fully qualified name of your tag class  -->
    <tag-class>cz.devmint.springext.web.tags.form.ErrorsTagExt</tag-class>
    <body-content>JSP</body-content>
    <variable>
        <name-given>messages</name-given>
        <variable-class>java.util.List</variable-class>
    </variable>
    <!-- this attribute declaration is the only change when compare with spring's original tag definition -->   
    <attribute>
        <description>Whether to render the first error for given field only</description>
        <name>firstErrorOnly</name>
        <required>false</required>
        <rtexprvalue>false</rtexprvalue>
    </attribute>
    <attribute>
        <description>Path to errors object for data binding</description>
        <name>path</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Standard Attribute</description>
        <name>id</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>Enable/disable HTML escaping of rendered values.</description>
        <name>htmlEscape</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>Delimiter for displaying multiple error messages. Defaults to the br tag.</description>
        <name>delimiter</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>Equivalent to "class" - HTML Optional Attribute</description>
        <name>cssClass</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>Equivalent to "style" - HTML Optional Attribute</description>
        <name>cssStyle</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Standard Attribute</description>
        <name>lang</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Standard Attribute</description>
        <name>title</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Standard Attribute</description>
        <name>dir</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Standard Attribute</description>
        <name>tabindex</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Event Attribute</description>
        <name>onclick</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Event Attribute</description>
        <name>ondblclick</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Event Attribute</description>
        <name>onmousedown</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Event Attribute</description>
        <name>onmouseup</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Event Attribute</description>
        <name>onmouseover</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Event Attribute</description>
        <name>onmousemove</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Event Attribute</description>
        <name>onmouseout</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Event Attribute</description>
        <name>onkeypress</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Event Attribute</description>
        <name>onkeyup</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>HTML Event Attribute</description>
        <name>onkeydown</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <description>Specifies the HTML element that is used to render the enclosing errors.</description>
        <name>element</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <dynamic-attributes>true</dynamic-attributes>
</tag>
</taglib> 
```

将此xml文件放入`WEB-INF/tld/spring-ext.tld`

在 jsp 页面上添加声明：

```
<%@taglib prefix="spring-ext" uri="http://cz.devmint.spring-ext/tags" %> 
```

代替 spring 的 ErrorsTag 使用自定义标签：

```
<spring-ext:errors path="dummy" firstErrorOnly="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:44:22.943

有一个关于那个的问题。您可以查看以下链接：

[在 Spring MVC 验证中，是否可以一次只显示每个字段的一条错误消息？](https://stackoverflow.com/questions/7555201/in-spring-mvc-validation-is-it-possible-to-show-only-one-error-message-per-fiel)

# javascript - KendoUI 网格自定义过滤器 UI

> ID：15061501
> 
> 赞同：3
> 
> 时间：2013-02-25T06:47:56.523
> 
> 标签：javascript, jquery, kendo-ui, kendo-grid

我现在正在尝试使用带有一些虚拟数据的下拉框来实现自定义过滤器 UI。我已经按照剑道网站（[http:](http://demos.kendoui.com/web/grid/filter-menu-customization.html) //demos.kendoui.c​​om/web/grid/filter-menu-customization.html ）上的教程进行操作，但它对我不起作用:(。

这是自定义 UI 的功能：

```
function relStatFilter(element)
  {
    element.kendoDropDownList({
      dataSource: ["Prospect", "Customer"],
      optionLabel: 'Select status'
    })
  } 
```

这是它被应用于的列参数：

```
...
{
            field: 'relStat', 
            filterable: 
            {
                ui: relStatFilter, 
                extra: false
            }, 
            title: '<abbr title=\'Relationship status\'>Rel stat</abbr>', 
            template: '#= ratio == 0 ? "<span class=text-info>Prospect</span>" : relStat == "Active" ? "<span class=text-success>Active</span>" : relStat == "At risk" ? "<span class=text-warning>At risk</span>" : "" #', 
        }, 
... 
```

当我单击过滤器时，我得到的只是标准的“开头”和文本输入。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T15:12:57.537

自定义过滤 UI 自 2012.3.1315 起可用。确保您没有使用旧版本。使用 2012.3.1315 以下代码按预期工作：

```
$("#grid").kendoGrid({
  dataSource: [ { name: "Foo" }, { name: "Bar" }],
  filterable: {
    extra: false,
    operators: {
      string: {
        eq: "Is equal to",
        neq: "Is not equal to"
      }
    }
  },
  columns: [
    {
      field: "name",
      filterable: {
        ui: function(element) {
          element.kendoDropDownList({
            dataSource: [ "Foo", "Bar"]
          });
        }
      }
    }
  ]
}); 
```

这是一个现场演示：http: [//jsbin.com/uwiqow/1/edit](http://jsbin.com/uwiqow/1/edit)

# c++ - C++：[class] 未在此范围内声明

> ID：15061502
> 
> 赞同：0
> 
> 时间：2013-02-25T06:47:57.040
> 
> 标签：c++, templates, overloading, operator-keyword

---------------------队列.h--------

```
#ifndef QUEUE_H
#define QUEUE_H

#include <iostream>
#include "MyException.h"

using namespace std;

template<class T>
class Queue;

template<class T>
ostream& operator<<(ostream&,Queue<T>&);

template<class T>
class Queue
{
    public:
        friend ostream& operator<< <T>(ostream&,Queue<T>&);
        Queue();
        Queue(const Queue<T>& other);
        Queue<T>& operator=(const Queue<T>& other);
        ~Queue();
    void enqueue(const T& el);
        T dequeue();
        void increasePriority(const T& el);
        bool isEmpty();

    private:
        class Node
        {
            public:
                Node(const T& data, Node* n = 0)
                {
                    element = data;
                    next = n;
                }

                T element;
                Node* next;
        };
        Node* head;

};

#include "Queue.C"

#endif 
```

我们根本不允许更改 .h（上图）文件。

---------------------队列.C--------

```
 #include "Queue.h"

    template<class T>
    ostream& operator << (ostream &strm, Queue<T> &obj)
    {
        if (obj.isEmpty())
        {
            strm << "[]";
            return strm;
        }
        else
        {
            strm << '[';
 //line 28
    Node* tmp = new Node();
            tmp = obj.head;
            strm << tmp.element + ',';
            while (tmp->next != 0)
            {
                tmp = tmp->next;
                if (tmp-next != 0)
                {
                    strm << tmp.element + ',';
                }
                else
                {
                    strm << tmp.element;
                }
            }
            strm << ']';
            delete [] tmp;
            tmp = 0;
            return strm;
        }
        return strm;
    }
    //...more code
    Queue::Queue()
    {
//line 54
    head = new Node();
        } 
```

因此，从该代码中，我收到的一些错误如下：

```
Queue.C: In function ‘std::ostream& operator<<(std::ostream&, Queue<T>&)’:
Queue.C:28: error: ‘Node’ was not declared in this scope
Queue.C:28: error: ‘tmp’ was not declared in this scope
Queue.C:28: error: expected type-specifier before ‘Node’
Queue.C:28: error: expected ‘;’ before ‘Node’
Queue.C:34: error: ‘next’ was not declared in this scope
Queue.C: At global scope:

Queue.C:54: error: ‘head’ was not declared in this scope
Queue.C:54: error: expected type-specifier before ‘Node’
Queue.C:54: error: expected ‘;’ before ‘Node’ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:52:33.460

您包括`Queue.h`in `Queue.C`，反之亦然。您不应该包含`Queue.h`in `Queue.C`，因为您希望整个实现都可以从标题中访问。

接下来，`Node`在里面声明`Queue`，所以在实现中它必须以`Queue`类模板的范围为前缀：

```
Queue<T>::Node ...; // instead of Node 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:57:49.570

您必须为其定义的范围添加前缀`Node`，即`Queue`

```
Queue<T>::Node* tmp = new Queue<T>::Node(); 
```

否则编译器不知道`Node`你的意思是哪种类型。

但是在下一行中，您用`tmp`指针覆盖`obj.head`并丢失了新创建的`Node`. 这将导致内存泄漏。在任何情况下，您都不需要`Node`在仅输出队列的运算符中创建 new s。

再往下，你

```
delete [] tmp; 
```

这会删除队列中的最后一个元素。我想，您不应该在此输出运算符中以任何方式修改队列。

这导致了下一点，应该声明这个运算符

```
friend ostream& operator<< <T>(ostream&, const Queue<T>&); 
```

避免意外修改 Queue 对象。

# actionscript-3 - 当我在其中保存数据时如何更改共享对象路径

> ID：15061509
> 
> 赞同：2
> 
> 时间：2013-02-25T06:48:53.773
> 
> 标签：actionscript-3, apache-flex, flex4.6

如何更改`sharedObject`保存位置，我想为特定用户在服务器上保存共享对象，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:10:33.970

不好的方式，但它的工作原理

```
var src:ByteArray = your byteArray;

var arr:Array = new Array();
for (var i:int = 0; i < src.length; i++)
{
    arr.push(src.readByte());
}
var jsonStr:String = arr.join("|"); 
```

反之...

```
var retArr:Array = jsonStr.split("|");
var ba:ByteArray = new ByteArray();
for (var j:int = 0; j < retArr.length; j++)
{
    ba.writeByte(retArr[j]);
}

var ldr:Loader = new Loader();
ldr.loadBytes(ba);
addChild(ldr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:44:46.800

您可以查看[`SharedObject.getRemote()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html#getRemote%28%29)是否有 Flash Media 服务器。或者，您可以将与您关联的数据编码`SharedObject`为 JSON 并将其存储在数据库中。

# c# - Novacode docx 创建的文档很大，似乎没有压缩

> ID：15061515
> 
> 赞同：1
> 
> 时间：2013-02-25T06:49:18.063
> 
> 标签：c#, visual-studio-2012, docx

我用[novacode docx](http://docx.codeplex.com)创建了一个新文档。

文档由插入到主文档中的大约 30 个文档组成。

每个子文档都被压缩并且非常小（大约 10 KB）；

除了结果文件很大（大约 5 MB）外，一切都很好。

它似乎根本没有被压缩。

我正在使用 VS 2012 和 Novacode DocX 版本 1.0.0.12

有什么建议么 ？

# c# - 检索下拉列表中发布的值

> ID：15061517
> 
> 赞同：0
> 
> 时间：2013-02-25T06:49:33.647
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我有一个下拉列表包含

```
{
   Select a title,
   Mr,
   Ms,
   Mrs
} 
```

像这样初始化的

```
//in model file
Mymodel mm=new Mymodel();
mm.Titles=new []
{
   new SelectListItem{....}
}

.....
//in view file and was set up inside a form

@Html.DropDownListFor(m=>m.Title, Model.Titles,"Select a title"); 
```

单击提交按钮后，我想在下拉列表中获取选定的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:01:53.177

您可以让`[HttpPost]`提交表单的控制器操作采用与参数相同的视图模型：

```
[HttpPost]
public ActionResult SomeAction(Mymodel model)
{
    // the model.Title property will contain the selected value here
} 
```

此外，`Titles`集合不会发送到您的 HttpPost 操作。这就是 HTML 的工作原理。`<select>`提交表单时仅发送元素的选定值。因此，`Titles`如果您打算重新显示相同的视图，则需要重新填充该属性。

例如：

```
[HttpPost]
public ActionResult SomeAction(Mymodel model)
{
    if (!ModelState.IsValid)
    {
        // there was a validation error, for example the user didn't select any title
        // and the Title property was decorated with the [Required] attribute =>
        // repopulate the Titles property and show the view
        model.Titles = .... same thing you did in your GET action
        return View(model);
    }

    // at this stage the model is valid => you could use the model.Title
    // property to do some processing and redirect
    return RedirectToAction("Success");
} 
```

# css - 仅在移动设备上的响应式 CSS 样式

> ID：15061520
> 
> 赞同：36
> 
> 时间：2013-02-25T06:49:36.350
> 
> 标签：css, responsive-design, media-queries

我试图让我的响应式 CSS 样式**仅适用**于平板电脑和智能手机。基本上我有桌面风格，移动风格：纵向和移动风格：横向。我根本不希望移动样式干扰桌面演示。我玩过无数媒体查询，但结果要么移动样式显示在桌面上，要么移动样式仅显示在移动设备上但只有一组规则（无响应）。有没有办法让两者完全分开？

我现在的代码是这样的：

```
/* regular desktop styles */

@media only screen 
and (max-device-width: 600px)
 { ... }

/* mobile only styles when the device is 0-600px in maximum width */

@media only screen 
and (max-device-width: 1000px)
{ ... }

/* mobile only styles when the device is up to 1000px in maximum width */ 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-12-05T14:16:41.330

为什么不使用媒体查询范围。

我目前正在为我的雇主设计一个响应式布局，我使用的范围如下：

您在 CSS 文件（1024 像素及以上）的正文中拥有您的主要桌面样式，然后对于我正在使用的特定屏幕尺寸：

```
@media all and (min-width:960px) and (max-width: 1024px) {
  /* put your css styles in here */
}

@media all and (min-width:801px) and (max-width: 959px) {
  /* put your css styles in here */
}

@media all and (min-width:769px) and (max-width: 800px) {
  /* put your css styles in here */
}

@media all and (min-width:569px) and (max-width: 768px) {
  /* put your css styles in here */
}

@media all and (min-width:481px) and (max-width: 568px) {
  /* put your css styles in here */
}

@media all and (min-width:321px) and (max-width: 480px) {
  /* put your css styles in here */
}

@media all and (min-width:0px) and (max-width: 320px) {
  /* put your css styles in here */
} 
```

这将涵盖几乎所有正在使用的设备 - 我将专注于为范围末端的尺寸（即 320、480、568、768、800、1024）设置正确的样式，而对于所有其他设备，它们只是响应可用的大小。

另外，不要在任何地方使用 px - 使用 em 或 %。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-25T07:00:09.320

你有什么应该可以正常工作，但是没有实际的“是移动/平板电脑”媒体查询，所以你总是会被卡住。

有[针对常见断点的媒体查询](http://responsivedesign.is/develop/browser-feature-support/media-queries-for-common-device-breakpoints)，但随着设备范围的不断变化，它们不能保证继续工作。

这个想法是您的网站在所有尺寸上都保持相同的品牌，因此您应该希望样式在断点之间层叠，并且只更新宽度和位置以最适合该视口。

为了进一步回答上述问题，将 Modernizr 与无触摸测试一起使用将允许您定位最有可能是平板电脑和智能手机的触摸设备，但是对于基于触摸屏的新版本，它不像以前那样是一个好的选择.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-20T15:57:38.720

我必须解决一个类似的问题——我希望某些样式仅适用于横向模式的移动设备。本质上，字体和行距在其他所有上下文中看起来都很好，所以我只需要一个移动横向的例外。此媒体查询完美运行：

```
@media all and (max-width: 600px) and (orientation:landscape) 
{
    /* styles here */
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-25T06:51:32.307

是的，这可以通过 javascript 功能检测（或浏览器检测，例如[Modernizr](http://modernizr.com)）来完成。然后，使用[yepnope.js](http://yepnopejs.com/)加载所需的资源（ JS 和/或 CSS ）

# android - 进度条错误

> ID：15061525
> 
> 赞同：2
> 
> 时间：2013-02-25T06:50:01.707
> 
> 标签：android, progressdialog

我想在云上获取数据时放置一个进度条

这是我的代码：

```
public void progressBar() {
        progress = ProgressDialog.show(this, "dialog title",
                  "dialog message", true);

                new Thread(new Runnable() {
                  public void run()
                  {
                    // do the thing that takes a long time
                      displayView();
                    runOnUiThread(new Runnable() {
                      public void run()
                      {
                        progress.dismiss();
                      }
                    });
                  }
                }).start();
    } 
```

和我的 displayView(); 方法

这是代码：

```
public void displayView() {

        listAdapter = new ArrayAdapter<String>(this, R.layout.listview_format, 
                R.id.item_list,handler.getRetrieveData());
        listView = (ListView)findViewById(R.id.listView2);
        listView.setAdapter(listAdapter);

        listView.setOnItemClickListener( new OnItemClickListener() {
            public void onItemClick(AdapterView<?> arg0, View v, int position ,
                    long id) {

                intent = new Intent(TechiesActivity.this,ItemInfoActivity.class);
                startActivity(intent);              
            }
        });

    } 
```

我收到这种错误

来自 logcat 的错误：

```
02-25 14:39:49.980: E/AndroidRuntime(1654): FATAL EXCEPTION: Thread-10
02-25 14:39:49.980: E/AndroidRuntime(1654): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
02-25 14:39:49.980: E/AndroidRuntime(1654):     at android.view.ViewRoot.checkThread(ViewRoot.java:2802)
02-25 14:39:49.980: E/AndroidRuntime(1654):     at android.view.ViewRoot.invalidateChild(ViewRoot.java:607)
02-25 14:39:49.980: E/AndroidRuntime(1654):     at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:633)
02-25 14:39:49.980: E/AndroidRuntime(1654):     at android.view.ViewGroup.invalidateChild(ViewGroup.java:2505)
02-25 14:39:49.980: E/AndroidRuntime(1654):     at android.view.View.invalidate(View.java:5139)
02-25 14:39:49.980: E/AndroidRuntime(1654):     at android.widget.AbsListView.resetList(AbsListView.java:1011)
02-25 14:39:49.980: E/AndroidRuntime(1654):     at android.widget.ListView.resetList(ListView.java:493)
02-25 14:39:49.980: E/AndroidRuntime(1654):     at android.widget.ListView.setAdapter(ListView.java:422)
02-25 14:39:49.980: E/AndroidRuntime(1654):     at com.shop.browser.TechiesActivity.displayView(TechiesActivity.java:111)
02-25 14:39:49.980: E/AndroidRuntime(1654):     at com.shop.browser.TechiesActivity$1.run(TechiesActivity.java:75)
02-25 14:39:49.980: E/AndroidRuntime(1654):     at java.lang.Thread.run(Thread.java:1096)
02-25 14:39:51.629: E/WindowManager(1654): Activity com.shop.browser.TechiesActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f30660 that was originally added here
02-25 14:39:51.629: E/WindowManager(1654): android.view.WindowLeaked: Activity com.shop.browser.TechiesActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f30660 that was originally added here
02-25 14:39:51.629: E/WindowManager(1654):  at android.view.ViewRoot.<init>(ViewRoot.java:247)
02-25 14:39:51.629: E/WindowManager(1654):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
02-25 14:39:51.629: E/WindowManager(1654):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
02-25 14:39:51.629: E/WindowManager(1654):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
02-25 14:39:51.629: E/WindowManager(1654):  at android.app.Dialog.show(Dialog.java:241)
02-25 14:39:51.629: E/WindowManager(1654):  at android.app.ProgressDialog.show(ProgressDialog.java:107)
02-25 14:39:51.629: E/WindowManager(1654):  at android.app.ProgressDialog.show(ProgressDialog.java:90)
02-25 14:39:51.629: E/WindowManager(1654):  at com.shop.browser.TechiesActivity.progressBar(TechiesActivity.java:68)
02-25 14:39:51.629: E/WindowManager(1654):  at com.shop.browser.TechiesActivity.onClick(TechiesActivity.java:198)
02-25 14:39:51.629: E/WindowManager(1654):  at java.lang.reflect.Method.invokeNative(Native Method)
02-25 14:39:51.629: E/WindowManager(1654):  at java.lang.reflect.Method.invoke(Method.java:521)
02-25 14:39:51.629: E/WindowManager(1654):  at android.view.View$1.onClick(View.java:2067)
02-25 14:39:51.629: E/WindowManager(1654):  at android.view.View.performClick(View.java:2408)
02-25 14:39:51.629: E/WindowManager(1654):  at android.view.View$PerformClick.run(View.java:8816)
02-25 14:39:51.629: E/WindowManager(1654):  at android.os.Handler.handleCallback(Handler.java:587)
02-25 14:39:51.629: E/WindowManager(1654):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-25 14:39:51.629: E/WindowManager(1654):  at android.os.Looper.loop(Looper.java:123)
02-25 14:39:51.629: E/WindowManager(1654):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-25 14:39:51.629: E/WindowManager(1654):  at java.lang.reflect.Method.invokeNative(Native Method)
02-25 14:39:51.629: E/WindowManager(1654):  at java.lang.reflect.Method.invoke(Method.java:521)
02-25 14:39:51.629: E/WindowManager(1654):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-25 14:39:51.629: E/WindowManager(1654):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-25 14:39:51.629: E/WindowManager(1654):  at dalvik.system.NativeStart.main(Native Method) 
```

我不知道为什么会出错，我是android编程的新手，请帮助我并提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:52:32.257

只需在`DisplayView`方法内部调用方法`runOnUiThread`就可以了

```
public void progressBar() {
        progress = ProgressDialog.show(this, "dialog title",
                  "dialog message", true);

                new Thread(new Runnable() {
                  public void run()
                  {
                    // do the thing that takes a long time
                      runOnUiThread(new Runnable() {
                      public void run()
                      {
                        displayView();                      
                        progress.dismiss();
                      }
                    });
                  }
                }).start();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T06:52:49.870

您无法`UI`从工作/后台线程执行任何更新。所以你的方法

```
displayView(); 
```

你需要调用它`runOnUiThread()`。

```
runOnUiThread(new Runnable() {
   public void run() {
      displayView();
      progress.dismiss();
   }
}); 
```

# java - 在路径中找不到 Firefox 二进制文件

> ID：15061527
> 
> 赞同：1
> 
> 时间：2013-02-25T06:50:05.570
> 
> 标签：java, firefox, selenium, windows-8

我收到错误：

```
Failed: org.openqa.selenium.WebDriverException Cannot find firefox binary in PATH, make sure firefox is installed. OS appears to be WIN8 
```

我正在使用`Selenium v 2.30`并`Firefox v.19`开启`windows 8 64bit`

相同的代码在 windows7/SP1 上运行良好。

```
if(browser == SupportedBrowser.FIREFOX) {           
           //firefox driver is built into selenium standalone server
           return new FirefoxDriver();
       } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:13:30.807

1.  打开命令行（开始 -> 运行 -> 键入“cmd”）
2.  类型`PATH`
3.  验证您是否可以在此处看到写在`firefox.exe`某处

它没有帮助然后像这样更改构造函数：

```
if(browser == SupportedBrowser.FIREFOX) { 
  File pathToBinary = new File("path/to/firefox.exe");
  FirefoxBinary ffBinary = new FirefoxBinary(pathToBinary);
  FirefoxProfile firefoxProfile = new FirefoxProfile();
  FirefoxDriver _driver = new FirefoxDriver(ffBinary,firefoxProfile);
  return _driver;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T12:31:26.000

你可以做

```
System.setProperty("webdriver.firefox.bin","PATH_TO_BINARY"); 
```

# android - 使用 arrayadapter 填充列表视图

> ID：15061529
> 
> 赞同：0
> 
> 时间：2013-02-25T06:50:19.313
> 
> 标签：android, listview, android-arrayadapter

我想在另一个下方显示两个字符串，就好像它是一个列表一样。我尝试使用 simple_list_item_1 填充列表视图，但屏幕上什么都看不到。

```
((ListView)view).setAdapter(new ArrayAdapter<String> 
(RealScreen.getAndroidBaseContext(),android.R.layout.simple_list_item_1, label)); 
```

其中 label 是一个数组，其中包含要显示的两个项目。我只能看到一个白色的屏幕。我也希望这个列表是不可点击的。

我希望输出是这样的：

```
String 1
String 2 
```

我没有使用 Activity，而是使用 View。这是创建视图的方法

```
public void createView(JSONObject definition) {
    // TODO Auto-generated method stub
    super.createView(definition);
     final JSONArray rowArray = definition.optJSONArray(KeyConstants.KEY_ROWS);
     final JSONArray columnArray = definition.optJSONArray(KeyConstants.KEY_COLUMNS);
     if (rowArray != null) {
            label = new String[rowArray.length()];
            for (int i = 0; i < rowArray.length(); i++) {
                final JSONObject candidate = rowArray.optJSONObject(i);
                if(candidate!=null){
                    label[i]=candidate.optString(KeyConstants.KEY_LABEL_TEXT, null);
                }
            }
     }
    ((ListView)view).setAdapter(new ArrayAdapter<String>(RealScreen.getAndroidBaseContext(),android.R.layout.simple_list_item_1, label));
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:10:02.097

首先创建一个自定义适配器类，如下所示

类 MyAdapter 扩展 ArrayAdapter {

```
 private Context context;

    private ArrayList<String> list;

    public MyAdapter(Context context,
            ArrayList<String> list) 
            { 
        super(context, R.layout.layout_list);
        this.context = context;
        this.list = list;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {

        ViewHolder holder = null;

        if (convertView == null) {
            holder = new ViewHolder();

            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            convertView = inflater.inflate(R.layout.layout_list,
                    null);

            convertView.setTag(holder);
            holder.string1  = (TextView) convertView
                    .findViewById(R.id.stringgID1);

            holder.string2  = (TextView) convertView
                    .findViewById(R.id.stringID2);

        }
                    else
                     {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.string1 .setText(list.get(postion));
        holder.string2 .setText(list.get(position));

        return convertView;
    }

    @Override
    public int getCount() {

        return list.size();
    }

    class ViewHolder {
        TextView string1 = null;
        TextView string2 = null;

    }

} 
```

然后让您的活动扩展 Activity 而**不是 ListActivity**

listView.setAdapter(new MyAdapter(youtactivityame.this,label);

这样做可以显示带有任意数量列表项的标签。

# java - 如何确定哈希码值？

> ID：15061530
> 
> 赞同：0
> 
> 时间：2013-02-25T06:50:21.280
> 
> 标签：java, collections, hashcode

如何确定哈希码值？最近我遇到了一个面试问题，“17 是一个有效的哈希码吗？”。是否有任何机制来定义哈希码值？或者我们可以为哈希码值提供任何数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T06:54:19.393

Hashcode 应该具有良好的分散性，以便将不同的对象保存在哈希表的不同位置（否则会降低性能）。

从那时起，虽然 17 us 是一个“有效的”哈希码（从某种意义上说，它是一个 32 位有符号整数），但如何定义哈希函数是值得怀疑的。

例如，一种简单的散列字符串的方法就是将每个字符的值相加。这会导致简单字符串的类似哈希值（例如“tar”和“rat”的总和相同）。

一个常见的技巧是将每个值乘以一个小素数，这样简单的输入就会返回不同的值，例如；

```
int result = 1;
result = 31 * result + a;
result = 31 * result + b; 
```

或者

```
int h=0;
for (int i = 0; i < len; i++) {
    h = 31*h + val[off++];
} 
```

（后者，来自 JRE 的实现`String.hashCode`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:54:02.487

是的，`17`是一个完全有效的哈希码。

无论您选择何种方法来派生哈希码，它都应始终为对象返回相同的整数（只要其状态保持不变）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T06:59:03.383

雅 17 有效。通常使用链接中显示的素数，您可以使用作为主键的实体的 id 来实现哈希码

```
public int hashCode()
{
    int result = 17;
    result = 37 * result + (getId() == null ? 0 : this.getId().hashCode());
    return result;
} 
```

这[为实现hascode提供了不同的方法](http://isagoksu.com/2009/development/java/what-is-hash-code/)

# javascript - element.selectedItem 没有按预期工作

> ID：15061532
> 
> 赞同：1
> 
> 时间：2013-02-25T06:50:38.050
> 
> 标签：javascript, xul, thunderbird, thunderbird-addon

我有以下代码，它动态构建 XUL 接口，然后它应该将单选按钮 radio3 设置为活动单选按钮：

```
 addTab: function () {
        try {
            var tabpanels = document.getElementById("folderPropTabPanel");
            if (!tabpanels) {   // TB v2.0 beta
                var tabbox = document.getElementById("folderPropTabBox");   // This is the parent of tabpanels
                tabpanels = tabbox.childNodes[1];
            }
            var vbox1 = document.createElement('vbox');
            tabpanels.firstChild.nextSibling.appendChild(vbox1);
            var radiogroup1 = document.createElement('radiogroup');
            radiogroup1.setAttribute('id', 'radiogroup1');
            vbox1.appendChild(radiogroup1);
            var radio1 = document.createElement('radio');
            radio1.setAttribute('id', 'radio1');
            radio1.setAttribute('label', 'radio1');
            radiogroup1.appendChild(radio1);
            var radio2 = document.createElement('radio');
            radio2.setAttribute('id', 'radio2');
            radio2.setAttribute('label', 'radio2');
            radiogroup1.appendChild(radio2);
            var radio3 = document.createElement('radio');
            radio3.setAttribute('id', 'radio3');
            radio3.setAttribute('label', 'radio3');
            radiogroup1.appendChild(radio3);
            document.getElementById('radiogroup1').selectedItem = document.getElementById('radio3');
            Application.console.log(document.getElementById('radiogroup1').selectedItem.tagName);
            Application.console.log(document.getElementById('radiogroup1').selectedItem.id);
        } catch (e) {
            Application.console.log(e);
        }
    } 
```

在我的扩展中运行此代码后，我看到了三个单选按钮，但是我在第三个单选按钮内看不到点。此外，我无法使用鼠标选择任何其他单选按钮。我在控制台中没有看到任何错误，只有两个词：'radio'、'radio3'，所以我的代码似乎工作正常。是 Thunderbird 中的错误，还是什么？

# c# - 如何将单选按钮列表与 jquery 绑定

> ID：15061534
> 
> 赞同：0
> 
> 时间：2013-02-25T06:50:54.793
> 
> 标签：c#, asp.net, jquery

我已添加`radiobuttonlist`到 asp中`updatepanel`，`radiobuttonlist`在代码隐藏中使用 C# 绑定表单表。但是`updatepanel`在`postback`.can 任何人都可以帮助我绑定`radiobuttonlist`到`Jquery`on 时出现错误`page load`。

```
<asp:UpdatePanel ID="UpdPanel_Questions" runat="server" UpdateMode="Conditional">        
    <ContentTemplate>             
        <div>
            <asp:Label ID="Lbl_QuestionTitle" runat="server" Font-Bold="False" 
                Font-Size="Medium" Height="45px" ></asp:Label>
        </div>
        <div> <p></p>      
            <asp:RadioButtonList ID="RadBut_Answer" runat="server" onselectedindexchanged="RadBut_Answer_SelectedIndexChanged" 
            CellSpacing="5" AutoPostBack="True" CellPadding="0">            
            </asp:RadioButtonList>
        </div>            
        <div class="SelectedAnsMsg alpha">
        <asp:Literal runat="server" EnableViewState="False" ID="Lbl_SelectedAnsMsg"></asp:Literal>
        </div>
        <div class="Butskipnext">
            <div class="Butskip">
            <asp:Button ID="But_Skip" runat="server" Text="Skip" SkinID="AltButton"  />      
            </div> 
         <div class="Butnext">
            <asp:Button ID="But_Next" runat="server" Text="Next" SkinID="Button" 
                 onclick="But_Next_Click"  />
        </div>                           
        </div>                                                  
    </ContentTemplate>
    <Triggers>

            <asp:AsyncPostBackTrigger ControlID="RadBut_Answer" EventName="SelectedIndexChanged" />
</Triggers>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:14:38.333

为什么要在Page_Load处使用jQuery绑定RadioButtonList？如果您想使用 jQuery 在 Page_Load 上绑定 RadioButtonList，则需要在 Javascript 中执行（即在 .aspx 页面或单独的 Javascript 文件中），而不是后面的代码。

我没有使用 jQuery，但是代码隐藏中的以下代码可以很好地将表数据绑定到 RadioButtonList。

出于示例目的，我使用了 DEPT(DEPTNO, DNAME) 表。

现在，我希望您能理解代码，因为它非常简单。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            SqlCommand objCmd = new SqlCommand("SELECT DEPTNO, DNAME FROM DEPT", objConn);
            objConn.Open();
            RadBut_Answer.DataSource = objCmd.ExecuteReader();
            RadBut_Answer.DataTextField = "DNAME";
            RadBut_Answer.DataValueField = "DEPTNO";
            RadBut_Answer.DataBind();
            objConn.Close();
        }
    } 
```

# django - Django - 在应用程序正常工作时无法运行测试

> ID：15061546
> 
> 赞同：0
> 
> 时间：2013-02-25T06:51:42.273
> 
> 标签：django, django-models, automated-tests

**问题：**

问题是我有一个可以正常工作的应用程序，但是当我尝试使用以下命令运行测试时：

```
 coverage run manage.py test --settings=crm.settings.test 
```

一开始就发生错误：

```
Creating test database for alias 'default'...
IntegrityError: profiles_usermodel.current_project_id may not be NULL 
```

以前我进行了测试，一切都运行良好。然后我显着改变了模型和应用程序并尝试运行测试——结果我遇到了上面提到的问题。我做错了什么？

**我的设置：**

我有单独的测试设置：

```
My_application
|___My_application
    |___urls.py
    |___ __init__.py
    |___wsgi.py
    |___settings
        |___base.py
        |___test.py
        |___local.py
|___profiles
    |___models.py
    |___views.py
    |___tests
        |___ __init__.py
        |___models.py 
```

测试设置如下：

```
"""Local test settings and globals which allows us to run our
test suite locally."""
from .base import *

########## TEST SETTINGS
TEST_RUNNER = 'discover_runner.DiscoverRunner'
TEST_DISCOVER_TOP_LEVEL = PROJECT_ROOT
TEST_DISCOVER_ROOT = PROJECT_ROOT
TEST_DISCOVER_PATTERN = "*"

########## IN-MEMORY TEST DATABASE
DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": ":memory:",
        "USER": "",
        "PASSWORD": "",
        "HOST": "",
        "PORT": "",
    },
}

INSTALLED_APPS += ('coverage',) 
```

还有来自`My_application/profiles/models.py`（省略了几个领域和方法）的模型：

```
from django.db import models
from django.contrib.auth.models import (
        BaseUserManager, AbstractBaseUser, PermissionsMixin )
from django.contrib.auth.models import Group

class Project(models.Model):
    name = models.CharField(max_length=255)

class UserModel(AbstractBaseUser, PermissionsMixin):
    email = models.EmailField(max_length=255, unique=True, db_index=True,)
    current_project = models.ForeignKey(Group, related_name='usermodel_current')

    USERNAME_FIELD = 'email' 
```

我还使用 South 进行数据库迁移和 django 1.5c2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:59:05.073

该错误非常明确。

测试运行程序正在尝试创建数据库，并将记录插入“profiles_usermodel”。此插入失败，因为字段“current_project”不能为空，但创建过程未在该字段中设置任何内容。

我们必须查看您的测试以缩小发生这种情况的确切范围。

如果您不关心让它“正常”工作而只是希望它工作，请更新您的用户模型，并添加`null=True`到`UserModel.current_project`.

# php - 使用 Adob e 插件的 Phonegap Android 推送通知

> ID：15061547
> 
> 赞同：0
> 
> 时间：2013-02-25T06:51:44.017
> 
> 标签：php, android, cordova, adobe, push-notification

我正在使用 Adob​​e phonegap 插件进行推送通知和开发 android 应用程序。

[http://www.adobe.com/devnet/phonegap/articles/android-push-notifications-with-phonegap.html](http://www.adobe.com/devnet/phonegap/articles/android-push-notifications-with-phonegap.html)

发送推送通知的服务器是 PHP 作为

```
<?php
// Replace with real BROWSER API key from Google APIs
$apiKey = "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX";
// Replace with real client registration IDs 
$registrationIDs = array( "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX");
// Message to be sent
$message = "there is an update, waiting for you to install...";
// Set POST variables
$url = 'https://android.googleapis.com/gcm/send';

$fields = array(
            'registration_ids'  => $registrationIDs,
            'data'              => array( "message" => $message ),
            );

$headers = array( 
                'Authorization: key=' . $apiKey,
                'Content-Type: application/json'
            );

// Open connection
$ch = curl_init();

// Set the url, number of POST vars, POST data
curl_setopt( $ch, CURLOPT_URL, $url );

curl_setopt( $ch, CURLOPT_POST, true );
curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );

curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );

// Execute post
$result = curl_exec($ch);

// Close connection
curl_close($ch);

echo $result; 
```

编译android代码后，我用regid注册成功。

发送通知后响应成功为

```
{
multicast_id: 5022434288122138000,
success: 1,
failure: 0,
canonical_ids: 0,
results: [
    {
    message_id: "0:1361774232591520%8eab850df9fd7ecd"
    }
]
} 
```

但我仍然无法在手机上收到通知。

不知道我在做什么错。

编辑：

抱歉，我收到了推送通知消息，但没有显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:47:38.233

我在这里找到了答案：http:
[//www.adobe.com/devnet/phonegap/articles/android-push-notifications-with-phonegap.html#articlecontentAdobe_numberedheader_4](http://www.adobe.com/devnet/phonegap/articles/android-push-notifications-with-phonegap.html#articlecontentAdobe_numberedheader_4)

现在按预期为我工作！

状态栏通知

由于插件只是接收消息（无论您的应用程序是否正在运行），但不会从那里对其进行任何处理，因此您可以选择如何处理它。一个常见的要求是在本机状态栏中显示一条消息。在 iOS 上，流程不同，通知会自动显示。但在 Android 上，您必须为它显式编码。

一种选择是使用 Cordova StatusBarNotification 插件和这个插件。如果您想要更快的解决方案，只需将本机 Java 代码添加到您的 GCMIntentService.java onMessage() 函数中，如以下代码所示：

```
String message = extras.getString("message");
String title = extras.getString("title");
Notification notif = new Notification(android.R.drawable.btn_star_big_on, message, System.currentTimeMillis() );
notif.flags = Notification.FLAG_AUTO_CANCEL;
notif.defaults |= Notification.DEFAULT_SOUND;
notif.defaults |= Notification.DEFAULT_VIBRATE;

Intent notificationIntent = new Intent(context, TestSampleApp.class);
notificationIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

notif.setLatestEventInfo(context, title, message, contentIntent);
String ns = Context.NOTIFICATION_SERVICE;
NotificationManager mNotificationManager = (NotificationManager)
context.getSystemService(ns);
mNotificationManager.notify(1, notif); 
```

此外，在文件顶部添加以下导入以支持上述代码：

```
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent; 
```

请务必将 YourActivityClassName.class 替换为扩展 DroidGap 的存根类的名称。例如，在示例项目中，它被称为 MainActivity。

# javascript - 通过插件获取每个网页的 JavaScript 函数参数

> ID：15061563
> 
> 赞同：0
> 
> 时间：2013-02-25T06:52:49.723
> 
> 标签：javascript, firefox-addon, hook, ieaddon

我想通过我的插件显示每个网页的javascript函数参数。下面的 javascript 代码是我的插件代码。我正在使用内部函数挂钩机制。

```
hookEval = eval;
eval = function (str)
{
   console.log("evals "+str);
   return hookEval(str);
}

hookWrite = document.write;
document.write = function (str)
{
   console.log("write"+str);
   return hookWrite(str);
} 
```

上面的代码是在firefox和opera控制台中显示java脚本函数的参数，但是在IE中，有时会显示，大部分时候什么都不显示。

为什么上面的代码在 IE 中不起作用？

编辑：console.log 在 ie9 中运行良好。这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:01:38.953

我会说[这](https://stackoverflow.com/questions/690251/what-happened-to-console-log-in-ie8 "这个")提供了一些信息。Console.log 在 IE 中存在问题。还有覆盖内置 javascript 函数的问题。不确定 IE 是否喜欢这样。这只是一个猜测。我没有研究过。

# php - wordpress php 发布新博客，如何获得响应？

> ID：15061566
> 
> 赞同：1
> 
> 时间：2013-02-25T06:52:59.763
> 
> 标签：php, wordpress

我正在通过 php 帖子创建一个新的 wp 博客帖子。我怎样才能得到博客帖子 ID 的回复？我能想到的一种方法是获取最新的博客文章 ID，但我想要一种更万无一失的方法。

```
<?php 
require_once("IXR_Library.php.inc");

$client->debug = true; //Set it to false in Production Environment

$title="Blog Title"; // $title variable will insert your blog title 
$body="Blog Content"; // $body will insert your blog content (article content)

$category="category1, category2"; // Comma seperated pre existing categories. Ensure that these categories exists in your blog.
$keywords="keyword1, keyword2, keyword3";

$customfields=array('key'=>'Author-bio', 'value'=>'Autor Bio Here'); // Insert your custom values like this in Key, Value format

    $title = htmlentities($title,ENT_NOQUOTES,$encoding);
    $keywords = htmlentities($keywords,ENT_NOQUOTES,$encoding);

    $content = array(
        'title'=>$title,
        'description'=>$body,
        'mt_allow_comments'=>0,  // 1 to allow comments
        'mt_allow_pings'=>0,  // 1 to allow trackbacks
        'post_type'=>'post',
        'mt_keywords'=>$keywords,
        'categories'=>array($category),
        'custom_fields' =>  array($customfields)
    );

// Create the client object
$client = new IXR_Client('Your Blog Path/xmlrpc.php');

 $username = "USERNAME"; 
 $password = "PASSWORD"; 
 $params = array(0,$username,$password,$content,true); // Last parameter is 'true' which means post immideately, to save as draft set it as 'false'

// Run a query for PHP
if (!$client->query('metaWeblog.newPost', $params)) {
    die('Something went wrong - '.$client->getErrorCode().' : '.$client->getErrorMessage());
}
else
    echo "Article Posted Successfully";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:29:17.887

而不是以

```
else
    echo "Article Posted Successfully"; 
```

采用：

```
$ID =  $client->getResponse();
if ($ID)
    echo 'Article Posted Successfully. ID = '.$ID; 
```

# makefile - “Makefile”无事可做

> ID：15061570
> 
> 赞同：3
> 
> 时间：2013-02-25T06:53:17.307
> 
> 标签：makefile

我应该为我需要做的项目编写一个 Makefile。我已经完成了这一切，但是当我尝试这样做时，我得到以下输出：

> make: `Makefile' 无事可做

这可能是什么原因？

这是我的 Makefile 文件：

```
###########################################################
# Makefile for XXXXX
# name1, name2
# account1, account2
###########################################################
EXEC = a1
CC = /opt/SUNWspro/bin/cc
$(EXEC):
    $(CC) -o $(EXEC) a1.cpp a1.h a1.sic
    rm -f *.o
clean:
    rm -f *.o core diss $(EXEC)
#######################[ EOF: Makefile ]################### 
```

编辑：感谢一位好心的用户，我现在知道发生了什么。

现在我有以下输出

```
/opt/SUNWspro/bin/cc -o a1 a1.cpp a1.h a1.sic
ld: fatal: file a1.cpp: unknown file type
ld: fatal: file processing errors. No output written to a1
make: *** [a1] Error 2 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T06:58:09.193

你打字`make Makefile`是出于某种原因吗？不。只需键入`make`. `make a1`或者`make -f Makefile`也适用于您的情况，但是为什么还要麻烦额外的打字呢？

顺便说一句，在编译行中包含头文件有点奇怪。此外，您的 makefile 没有指定任何依赖项，这是首先拥有一个依赖项的全部原因......

编辑：要回答您的新问题，请不要使用 C 编译器编译 C++ 代码。也就是说，我不确定您收到的链接错误。是`a1.cpp`不是一个正常的源文件（键入`file a1.cpp`查找）？

看来您遇到了非常根本的问题。也许从一本好的初学者书开始会有用？

# javascript - 有没有一种可靠的方法可以让 1 个月的自动生成高图表的刻度间隔？

> ID：15061574
> 
> 赞同：2
> 
> 时间：2013-02-25T06:53:30.863
> 
> 标签：javascript, highcharts

高图表有一种非常好的方法来为图表生成日期。

但是，由于您需要指定一个 tickInterval 来为每个点生成日期，因此间隔 1 个月非常困难，因为它们是不规则的。

推荐的方法是使用等于 31 天的滴答间隔，但有许多用例会跳过 2 月。

有没有一种可靠的方法可以让 1 个月的自动生成高图表的刻度间隔？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:13:19.950

Seems like the example provided for irregular interval data would solve your problem: [Highcharts Demo - Irregular Time Interval](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/spline-irregular-time/)

The relevant code, from that example, for x-axis labeling is:

```
xAxis: {
   type: 'datetime',
   dateTimeLabelFormats: { // don't display the dummy year
      month: '%e. %b',
      year: '%b'
   }
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T18:44:29.193

```
xAxis: {
    type: 'datetime',
    tickPositioner: function(min, max) {
        var ticks = [];
        var maxDate = new Date(max);
        var tickDate = new Date(min);
        while (tickDate <= maxDate) {
            ticks.push(tickDate.getTime());
            tickDate.setMonth(tickDate.getMonth() + 1);
        }
        ticks.info = {
            unitName: "month",
            higherRanks: {}
        };
        return ticks;
    },
    labels: {
        rotation: -45,
        align: 'right',
        x: 5
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T07:14:42.857

这很粗略，但它应该给你基本的想法。[相关小提琴在这里](http://jsfiddle.net/philfreo/b44Sz/4/)。

```
xAxis: {
    minPadding: 0,
    // Ticks in binary positions
    tickPositioner: function(min, max) {

        var pos,
            tickPositions = [],
            tickStart = 0;

        var tick = 0;
        for (pos = 1; pos <= 12; pos++) {
            tick += new Date(2013, pos, 0).getDate();
            tickPositions.push(tick);
        }
        return tickPositions;

    },
    // Only show labels where there is room for them
    labels: {
        formatter: function() {
            var tick = 0;
            for (pos = 1; pos <= 12; pos++) {
                 if (tick == this.value) 
                     return monthNames[pos - 1];
                 tick += new Date(2013, pos, 0).getDate();
            }
        }
    } 
```

属性 'tickPositioner' 允许您设置生成刻度的自定义函数，标签下的属性 'formatter' 让您决定哪些刻度应该生成标签，以及应该是什么。在这两者之间，您将能够生成几个月。

需要注意的几点：

*   我对 2013 年进行了硬编码，因为我不确定您的确切用例是什么；您必须考虑具有不同天数的不同年份以及数据属于哪一年。
*   我的代码中可能很容易出现与标签设置日期相关的一个错误，我很快将它们放在一起只是为了演示一般概念。
*   可以删除大量重复项以使此示例更加干燥。

# opencv - 在 openCV 中找不到 opencv_traincascade

> ID：15061577
> 
> 赞同：0
> 
> 时间：2013-02-25T06:53:37.840
> 
> 标签：opencv, opencvdotnet

我安装了[openCV 2.4.3](https://sourceforge.net/projects/opencvlibrary/files/opencv-win/2.4.3/)并试图找到 opencv_traincascade.exe 来训练分类器。但是，我只能找到带有一些 C++ 文件的 C:\opencv\apps\traincascade。我需要做些什么来获取 opencv_traincascade.exe 吗？我正在使用 Visual Studio 2012 和 Windows 8。

# c# - 在 ASCX 中运行带有 Ektron 参数的 exe

> ID：15061588
> 
> 赞同：1
> 
> 时间：2013-02-25T06:54:23.203
> 
> 标签：c#, cmd, ascx, ektron, windows-task-scheduler

我想借助 system32 文件夹中的 schtasks.exe 将计划任务添加到 Windows 任务计划程序。

我在 aspx.cs 页面中按以下方式进行操作：

```
 Process proc = new Process();
        proc.StartInfo.UseShellExecute = false;
        proc.StartInfo.FileName = @"C:\Windows\System32\schtasks.exe";
        proc.StartInfo.Arguments = "/create /tn mylbat /tr MYLExe.exe /sc daily /st " + txthh.Text + ":" + txtmm.Text;
        proc.StartInfo.RedirectStandardError = true;
        proc.StartInfo.RedirectStandardOutput = true;
        proc.StartInfo.CreateNoWindow = false;
        proc.StartInfo.WindowStyle = ProcessWindowStyle.Maximized;
        proc.Start();
        proc.WaitForExit(); 
```

但是在 ascx.cs 文件中同样不起作用。我需要在 Process 对象中设置任何参数吗？

**编辑我：**

相同的 ascx 在正常的 asp 站点中工作，但在 Ektron 站点中不工作。我也想将它作为小部件添加到 Ektron 8.0 的智能桌面中。

**该站点托管在 IIS 中。**

站点在IIS上运行时进程和exe SCHTASKS.exe的参数应该是什么

# java - 如何解决摇摆和实用计时器冲突？

> ID：15061592
> 
> 赞同：4
> 
> 时间：2013-02-25T06:54:33.647
> 
> 标签：java, swing

我一直在做游戏任务，从未使用过 util 类。现在我需要使用 File IO，所以我需要使用 java.util 中的 Scanner。但是现在每次我运行程序时，它都会显示“错误：对 Timer 的引用不明确，java.util 中的 java.util.Timer 类和 javax.swing 中的 javax.swing.Timer 类都与 Timer myTimer 匹配；”

我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T06:59:38.217

您可能还导入`java.util.*`了`javax.swing.*`. 两者都包含一个`Timer`类，因此编译器不知道您想要哪个。

`javax.swing.Timer`最简单的解决方案是在导入结束时添加一个额外的导入。更好的是删除 * 导入之一，然后从该包中导入您需要的各个类。

顺便说一句，您可能应该首先将加载代码分离到一个单独的类中。

# php - 正则表达式与 PDO Mysql

> ID：15061593
> 
> 赞同：2
> 
> 时间：2013-02-25T06:54:47.327
> 
> 标签：php, mysql, regex, pdo

我正在尝试在 PDO Mydql 中使用 REGEXP 但有问题

```
function artist_list($artist){
            global $DBH;
$STH = $DBH->prepare("SELECT songs ,image ,artist,album,r_year
            FROM english_fm
            WHERE artist REGEXP \"^[:artist]\" 
             GROUP BY artist order by slno");
            $STH->bindValue(":artist" , "$artist", PDO::PARAM_STR); 
            $STH->execute();
            $STH->setFetchMode(PDO::FETCH_ASSOC);
            return $STH;
            $DBH = Null;
        } 
```

这在我使用时不起作用，`REGEXP \"^[:artist]\"` 但如果我使用

```
REGEXP \"^[$artist]\" 
```

有用

```
function artist_list($artist){
                global $DBH;
    $STH = $DBH->prepare("SELECT songs ,image ,artist,album,r_year
                FROM english_fm
                WHERE artist REGEXP \"^[$artist]\" 
                 GROUP BY artist order by slno");
                $STH->bindValue(":artist" , "$artist", PDO::PARAM_STR); 
                $STH->execute();
                $STH->setFetchMode(PDO::FETCH_ASSOC);
                return $STH;
                $DBH = Null;
            } 
```

请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T07:10:18.317

您不能使用这样的准备好的语句。当你声明一个占位符时，你[避免](http://php.net/manual/en/pdo.prepared-statements.php#example-977)对它们做任何相关的事情，把它留给占位符**值**定义。因此，例如，您可以这样使用它：

```
$STH = $DBH->prepare("SELECT songs ,image ,artist,album,r_year
            FROM english_fm
            WHERE artist REGEXP :artist
            GROUP BY artist order by slno");
            $STH->bindValue(":artist" , "^[$artist]", PDO::PARAM_STR); 
```

# vb.net - 设置绘制的动态文本框的位置

> ID：15061597
> 
> 赞同：0
> 
> 时间：2013-02-25T06:55:16.993
> 
> 标签：vb.net

我有一个主表单，允许用户为问卷创建问题。当表单打开时，表单将是空白的，带有一个“添加问题和答案”按钮。此按钮将打开一个新表单，用户可以在其中设置问题和答案。一旦用户输入第一个问题和答案，他们将被带回主屏幕，第一个问题和答案将填充在该主屏幕上。这正是我需要的方式。问题是，当我想输入第二个问题和答案时，我需要将该问题和答案放在第一个问题和答案的下方，但它会覆盖第一个问题和答案。我需要以某种方式在我的“添加问题和答案”按钮中添加一个计数器，以便在打开新表单后，我可以在新位置设置动态创建的文本框。

有什么建议么？

这是我将结果动态显示到主屏幕的功能：

```
 Public Function SaveInfo()
    Me.DialogResult = DialogResult.OK
    Dim frmQuest As New frmAddCSIQuestions()
    Dim values() As String = lstAnswers.Items.Cast(Of String).ToArray
    txtList.Name = "txt"
    txtQuest.Name = "txtQuest"
    txtType.Name = "txtType"
    txtList.Size = New Point(300, 20)
    txtQuest.Size = New Point(300, 20)
    txtType.Size = New Point(100, 20)
    txtQuest.Text = txtQuestion.Text
    If rdbFreeText.Checked = True Then
        txtType.Text = rdbFreeText.Text
    ElseIf rdbDropDown.Checked = True Then
        txtType.Text = rdbDropDown.Text
    End If

    If bFirstRowAdded Then
        frmQuest.TableLayoutPanel1.RowCount += 1
    End If
    bFirstRowAdded = True
    frmQuest.TableLayoutPanel1.Controls.Add(txtQuest)
    frmQuest.TableLayoutPanel1.Controls.Add(txtType)
    frmQuest.TableLayoutPanel1.Controls.Add(txtList)
    txtList.Text = String.Join(",", values)
    Me.Hide()
    frmQuest.ShowDialog()
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:31:22.567

您必须在主窗体上创建计数器：

```
Public iCount As Integer 
```

然后使用以下任何属性修改位置：

```
question.Top = iCount
iCount += question.Height + 10 
```

--

```
question.Location = New Point(xVal, iCount)
iCount += question.Height + 10 
```

另一种可能性是检测最后添加的问题：

```
Dim lastQ As Control = Form1.Controls(Form1.Controls.Count - 1)
question.Top = lastQ.Top + lastQ.Height + iMargin 
```

# multithreading - 测量访问远程缓存所花费的周期

> ID：15061600
> 
> 赞同：0
> 
> 时间：2013-02-25T06:55:26.560
> 
> 标签：multithreading, shared-memory, computer-architecture, cpu-cache

如何测量访问共享远程缓存所花费的周期，比如 L3。我需要获取系统范围和每个线程的缓存访问信息。是否有任何特定的工具/硬件要求。或者我可以使用任何公式来获得一个时间间隔内花费的周期的近似值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T06:59:10.777

要获得计算机上存在的各种缓存的**平均** 延迟（当单个线程运行时），您可以使用内存分析器工具，例如 Windows 的 RMMA ( [http://cpu.rightmark.org/products/rmma.shtml](http://cpu.rightmark.org/products/rmma.shtml) ) 和用于 Linux 的 Lmbench。

您还可以根据这些工具使用的想法编写自己的基准测试。请参阅此 StackOverflow 问题上发布的答案： [测量内存延迟](https://stackoverflow.com/questions/13603995/measuring-latencies-of-memory) 或 Google 以了解 Lmbench 基准测试的工作原理。

如果您想找到特定内存访问模式的确切延迟，您将需要使用模拟器。通过这种方式，您可以在内存访问流经内存系统时对其进行跟踪。然而，模拟器不会模拟现代处理器或内存系统中存在的所有效果。

如果您想了解多线程如何影响 L3 的平均延迟，我认为最好的选择是编写您自己的基准测试。

# antlr - 是否可以为其他语言扩展 checkstyle 架构？

> ID：15061601
> 
> 赞同：1
> 
> 时间：2013-02-25T06:55:35.387
> 
> 标签：antlr, extend, checkstyle

我正在为一些编写的 SQL 脚本寻找静态代码分析器。我对拥有一个可以使用我自己的规则集进行扩展的工具很感兴趣。

对于静态代码分析，我看到了很多 Java 工具，例如 checkstyle、PMD 等，它们可以使用自定义规则进行扩展。

基于[新语言的静态代码分析中的一些输入。从哪儿开始？](https://stackoverflow.com/questions/2869935/static-code-analysis-for-new-language-where-to-start)我决定使用ANTLR。使用 ANTLR 看起来我必须创建大量代码才能实现我正在寻找的东西。所以看看使用 ANTLR 的工具（Checkstyle 就是其中之一）

我正在尝试查看 Checkstyle 已经创建的代码是否可以扩展以解析我的新语法文件并使用它允许添加的所有 Check 规则

请让我知道是否有其他更好的工具可以实现相同的目标

# iis - 如何伪造 IIS 中的目录列表？VirtualPathProvider 适用于文件，但

> ID：15061602
> 
> 赞同：0
> 
> 时间：2013-02-25T06:55:37.367
> 
> 标签：iis, appfabric, virtualpathprovider

我们使用 AppFabric 1.1 和 IIS 8.0 来运行我们基于 xamlx 的工作流。为了使静态 xamlx 文件消失，我们使用 Ron Jacobs 完美的示例代码将它们存储在数据库中，并通过`VirtualPathProvider`.

[http://blogs.msdn.com/b/rjacobs/archive/2011/06/15/how-to-load-wf4-workflow-services-from-a-database-with-iis-appfabric.aspx](http://blogs.msdn.com/b/rjacobs/archive/2011/06/15/how-to-load-wf4-workflow-services-from-a-database-with-iis-appfabric.aspx)

到目前为止一切顺利，如果有人点击了正确的 uri，则会提供 xamlx 文件。

但是现在 AppFabric 仪表板没有机会收集和登记 xamlx 文件作为服务，因为它们不再对 AppFabric 可见。

目标必须是伪造一个目录列表并从 db 读取所有 xamlx 工作流名称。

我试图通过`VirtualPathProvider`以这种方式覆盖基于目录的方法来扩展

```
 public override bool DirectoryExists(string virtualDir)
    {
        return base.DirectoryExists(virtualDir);
    }

    public override VirtualDirectory GetDirectory(string virtualDir)
    {
        if (IsPathVirtual(virtualDir))
        {
            return new VirtualDirectoryDecorator(base.GetDirectory(virtualDir));
        }
        else
        {
            return Previous.GetDirectory(virtualDir);
        }

    } 
```

但是这些方法并没有像我猜测的那样被调用。这是因为 Uri 没有扩展名并且 asp.net 没有被调用。

感谢任何帮助以使这个虚假目录列表发生！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:38:12.433

您需要修改`web.config`文件以指示 IIS 必须为每个请求调用 ASP.NET，这是通过`<modules runAllManagedModulesForAllRequests="true" />`应用程序根目录中的属性完成的。

我认为您应该重命名您的问题，因为乍一看我以为您在内部使用 VirtualPathProvider 并且想要隐藏 IIS 的自动生成的目录内容列表页面。

# android - 为 ImageButton 添加边框

> ID：15061603
> 
> 赞同：2
> 
> 时间：2013-02-25T06:55:50.287
> 
> 标签：android, border, adt, imagebutton

我有一个使用 ImageButtons 的简单 Android 应用程序。每当用户单击/选择按钮时，我想在图像周围放置一个边框。我怎样才能以编程方式做到这一点？

![在此处输入图像描述](../Images/155b4575f74cce1e5751e652156381cb.png)

我考虑过制作单独的图像（每个都有边框），然后在用户单击时更改图像，但是我有很多图像，如果可能的话，我想避免对它们进行 Photoshop 处理。

更新 - 这是我在 Eclipse IDE 中的布局快照

![在此处输入图像描述](../Images/0added7fd46c83bb2160e3632d83d590.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T07:09:10.007

您可以将 a[`RelativeLayout`](http://developer.android.com/reference/android/widget/RelativeLayout.html)与两个子视图一起使用：

*   一种是带有[选择器](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)的背景。
*   一个是`ImageView`/`ImageButton`来显示图像。
*   默认情况下，如果你不处理前台视图的点击事件，系统会将它们转移到后台选择器，你在那里处理它们。

* * *

*已编辑*

当用户打开您的活动时，您应该使用[`GridView`](http://developer.android.com/reference/android/widget/GridView.html)然后以编程方式加载所有图像，不要对其进行硬编码。对于 的每个项目`GridView`，您可以使用我建议的上述布局……如果您需要，这个视频值得一看：[Google I/O 2010 - ListView 的世界](http://youtu.be/wDBM6wVEO70)（`ListView`的用法与 相同`GridView`）。

# php - 如果电子邮件存在并使用 php [重复电子邮件] 发出警报，则验证电子邮件可用性

> ID：15061606
> 
> 赞同：0
> 
> 时间：2013-02-25T06:56:00.817
> 
> 标签：php, javascript

我通过使用 php 验证可用性为电子邮件检查编写了一些 ajax 验证，ajax 脚本只显示电子邮件是否可用？

```
<script type="text/javascript">

$(document).ready(function()
{
$("#email_id").change(function(){

var email = $("#email_id").val();
    var regdata = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
     if(!(regdata).test($("#email_id").val()))
     {

     $("#email_id").css('border','1px solid red');
     $("#email_id").focus();
     $("#status").html("enter the valid emailid!");
      return false;
     }
    else{
       $("#email").css('border','1px solid #7F9DB9');
      $("#email_id").html('Checking Email Availability...');

     $.ajax({ 
     type: "POST", 
     url: "fresherreg_email_avail.php", 
     data:"q="+ email, 
     success: function(server_response){
    $("#status").ajaxComplete(function(event,request){

    if(server_response == '0')
    {
    $("#status").html('Email Available');

    } 
    else  if(server_response == '1')
    { 

    $("#status").html('Email Not Available');

    } 
     });
   }
  });
 }
});
});
</script> 
```

我的 php 可用性检查代码是

```
<?php
     include_once("include_dao.php");

    $q = $_REQUEST['q'];
    if($q != "")
    {
        $row=DAOFactory::getTblFreshersRegistrationDAO()->queryByEmailId($q);

        $num = count($row);
        if($num > 0)
        {
          echo "1";
        }
        else
        {
            echo "0";
        }
    }
    else
    {
        echo "Email Id should not be empty";
    }
?> 
```

**我需要的是什么？它应该使用脚本显示警报，直到他选择新的邮件 ID**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:35:17.240

可以这样做。我将编辑您的代码并添加所需的东西。

在 javascript/jquery 部分：

```
<script type="text/javascript">

$(document).ready(function()
{
$("#email_id").change(function(){

var email = $("#email_id").val();
    var regdata = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
     if(!(regdata).test($("#email_id").val()))
     {

     $("#email_id").css('border','1px solid red');
     $("#email_id").focus();
     $("#status").html("enter the valid emailid!");
      return false;
     }
    else{
       $("#email").css('border','1px solid #7F9DB9');
      $("#email_id").html('Checking Email Availability...');

     $.ajax({ 
     type: "POST", 
     url: "fresherreg_email_avail.php", 
     data:"q="+ email, 
     success: function(server_response){
             if(server_response == '0')
             {
                $("#status").append("<font color='green'>email available</font>");

             } 
             else  if(server_response == '1')
             { 

               $("#status").append("<font color='red'>email already exits</font>");
             }
             else
             { 
               $("#status").append("<font color='red'>"+server_response+"</font>");
             }

     }

     });
 }
});

});
</script> 
```

现在在你的 php 脚本中。

```
<?php
     include_once("include_dao.php");

    $q = $_REQUEST['q'];
    if($q != "")
    {
        $row=DAOFactory::getTblFreshersRegistrationDAO()->queryByEmailId($q);

        $num = count($row);
        if($num > 0)
        {

        echo "1";
        }
        else
        {

             echo "0";
        }
    }
    else
    {
        echo "Email Id should not be empty";
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:15:16.380

```
<script type="text/javascript">

$(document).ready(function(){
        $('#submit');
        var emaildone = false;

        var myRegForm = $("#registration"),email = $("#email_id"), status = $("#status");
         myRegForm.submit(function(){
                if(!emaildone)
                {
                        alert("Email Id Already Exists!!! So Please Try Another Email Id");
                        email.attr("value","");
                        email.focus();
                        return false;
                }
        });

        email.blur(function(){
                $.ajax({
                        type: "POST",
                        data: "q="+$(this).attr("value"),
                        url: "fresherreg_email_avail.php",
                        beforeSend: function(){
                                status.html('<img src="images/loader.gif" align="absmiddle"><font color="blue">Checking Email Availability...</font>');
                        },
                        success: function(data){
                                if(data == "invalid")
                                {
                                        emaildone = false;
                                        status.html("<font color='red'>Inavlid Email!! Please Select a Vaild Email</font>");
                                }
                                else if(data != "0")
                                {
                                        emaildone = false;
                                        status.html('<img src="images/not_available.png" align="absmiddle"><font color="red">Email Already Exist</font>');
                                }
                                else
                                {
                                        emaildone = true;
                                        status.html('<img src="images/available.png" align="absmiddle"> <font color="green">Email Available</font>');
                                }
                        }
                });
        });
});

</script> 
```

将脚本更改为此。

# opencv - 使用轮廓重绘对象的有效方法

> ID：15061610
> 
> 赞同：1
> 
> 时间：2013-02-25T06:56:27.840
> 
> 标签：opencv

**问题**

具有许多斑点的图像。我需要删除不符合要求的 blob。然而，符合要求的斑点内部确实有一个洞。我需要重新绘制成功的 blob。这是我使用的一些代码。希望有人能指出如何处理它。

```
/// Find contours
vector<vector<Point> > contours;
vector<Vec4i> hierarchy;
cv::findContours( srcImg, contours, hierarchy, CV_RETR_CCOMP, CV_CHAIN_APPROX_NONE, Point(0,0) ); 
```

更多信息（[http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=moments#findcontours](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=moments#findcontours)）

```
/// Start to iterate to each contour found

vector<vector<Point> >::iterator itc = contours.begin();
vector<Rect> rects;

Mat dstImg = Mat::zeros( srcImg.size(), CV_8UC1 );

    //Remove patch that are no inside limits.    
    while( itc != contours.end() ) {
    /// eliminating blobs here
    }

/// To redraw the contours. Error here since some blobs already been removed
int idx = 0;
for( ; idx >= 0; idx = hierarchy[idx][0] )
{
Scalar color( 255, 255, 255 );
drawContours( dstImg, contours, idx, color, CV_FILLED, 8, hierarchy );
}

/// To redraw the contours but the holes also filled
for(unsigned int i = 0; i < rects.size(); i++) {
Scalar color = Scalar(255,255,255);
drawContours( dstImg, contours, i, color, CV_FILLED, 8, noArray(), 0, Point() );
} 
```

我必须再次使用 findContours 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:50:44.230

我想这里可能有两个问题。首先，您想删除在轮廓中找到的轮廓吗？为此，请使用 CV_RETR_EXTERNAL 而不是 CV_RETR_CCOMP。其次，您只想绘制未删除的轮廓？这更多地取决于您如何删除其他轮廓。解决此问题的一种简单快捷的方法是创建一个新的向量 > 和 push_back 轮廓，它们不会在您的 while 循环中被丢弃。

# php - APC 通过 localhost 启用到 www.localhost

> ID：15061613
> 
> 赞同：0
> 
> 时间：2013-02-25T06:56:47.637
> 
> 标签：php, wamp, apc

我正在使用带有 php 5.2.9 的 WAMP，并且在我的本地主机中遇到了奇怪的问题，我最近在 wamp 服务器中启用了 apc。

但是，当我尝试通过 localhost 打开我的 CMS（如 wordpress、joomla）到 www.localhost.com 并且我的 wamp 服务器脱机但没有核心文件时意味着我在 CORE PHP 中有一个网站并且它可以在没有和 www 的情况下正常打开重定向，任何人都可以帮我检测确切的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:02:40.943

www.localhost.com 不在您的主机文件中（很可能）。本地主机是。如果您打算通过该 URL 访问您的站点，则需要编辑“主机”文件并将 www.localhost.com 附加到 127.0.0.1

# content-management-system - 模拟标记和描述 cms 系统

> ID：15061616
> 
> 赞同：0
> 
> 时间：2013-02-25T06:56:55.780
> 
> 标签：content-management-system, mockups

我正在寻找一个 cms 系统来： - 上传像样机这样的图像，并在图像上添加和定位标签（标记） - 为每个标记（多语言）编写描述 - 在前端，当我们点击每个标签时，它会显示标签的描述！

基本上我想用这个系统来管理图像模型或设计的内容。

提前 Tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:33:40.413

为此，您可以使用[invision](http://invisionapp.com)或[concept.ly](http://concept.ly)等 UI 原型设计工具。我不确定它们中的哪一个是多语言的，但它们都提供了图像的标记和导航。

# java - 在 LibGdx 中以越来越快的速度移动纹理

> ID：15061619
> 
> 赞同：0
> 
> 时间：2013-02-25T06:57:10.803
> 
> 标签：java, libgdx

我让我的纹理移动，就像减少它的 X 轴一样。但问题是当我以越来越快的速度移动它时，它没有正确添加。我的示例代码如下。

```
picx = 0;
newpicx = 1024;
if(speed<20) speed+=.05f;

picx -=speed;
newpicx -= speed;

if ((picx + 1024 - speed-4) <0) {
    picx = 1024;
}

if ((newpicx + 1024 - speed-4) <0) {
    newpicx = 1024;     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T07:08:34.553

您的代码没有多大意义，但这是我的尝试：

```
picx = 0;
newpicx = 1024;
if(speed<20) speed+=.05f;

picx -=speed;
newpicx -= speed;

if ((picx + 1024 - speed-4) <0) {
    picx = 1024;
}

if ((newpicx + 1024 - speed-4) <0) {
    newpicx = 1024;     
} 
```

您正在制作两个“图片”，它们的 x 位置从 1st=0、2nd=1024 开始。然后，您使用稳定在 20 的递增速度将它们向左移动（负 x），当它们在 x 轴上低于 0 的 1024 个单位时，它们传送到正 1024。

然后，当您开始增加它们的 x 而不是减少时，您就会遇到问题。那是因为当它们是 +1024 个正 x 单位时，您没有处理。

```
picx +=speed*delta; //use delta for FrameIndependant Movement
newpicx += speed*delta;

if (picx > 1024){
    picx = -1024;
}

if (newpicx > 1024){
    newpicx = -1024;     
} 
```

# android - 如何在不生根的情况下禁用android设备的hdmi端口？

> ID：15061621
> 
> 赞同：4
> 
> 时间：2013-02-25T06:57:19.650
> 
> 标签：android, hdmi

我想知道是否有办法在不root的情况下禁用android设备的hdmi端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T19:06:16.960

从 Android 4.2（SDK 级别 17）开始，DisplayManager API ( [http://developer.android.com/reference/android/hardware/display/DisplayManager.html](http://developer.android.com/reference/android/hardware/display/DisplayManager.html) ) 允许您检测外部显示器和 Presentation 类 ( [http:// developer.android.com/reference/android/app/Presentation.html](http://developer.android.com/reference/android/app/Presentation.html)）允许您为外部显示器定义替代 UI。但是，在该 SDK 级别之前（例如，在运行 4.0.3 SDK 级别 15 且具有 HDMI 端口的 Kindle Fire 设备上），不支持检测或禁用外部显示器的方法。

# iphone - 在 iPhone 5 横向模式下启动闪屏

> ID：15061622
> 
> 赞同：5
> 
> 时间：2013-02-25T06:57:23.520
> 
> 标签：iphone, ios, objective-c, ios6

我们的通用应用程序仅在横向模式下。我们需要为 iPhone 4 和 iPhone 5 添加启动画面。

对于纵向的 iPhone 5，我们使用`Default-568h@2x.png`. 如何在 iPhone 5 的横向设置启动屏幕？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T07:39:58.007

根据**Apple 的文档**：[提供不同方向的启动图像](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12) ，

每个特定方向的启动图像都必须在其文件名中包含一个特殊的修饰符字符串。**特定方向的启动图像**文件名的格式如下：

```
<basename><orientation_modifier><scale_modifier><device_modifier>.png 
```

**例如：**

```
1)    Default-Portrait.png
2)    Default-PortraitUpsideDown.png
3)    Default-Landscape.png
4)    Default-LandscapeLeft.png
5)    Default-LandscapeRight.png 
```

**注意：** *这些修饰符仅支持在 iPad 应用程序中使用的启动图像。*

因此，您必须根据**iPhone 5**的**方向**更改您的**图像**。

 ******有两种方法可以做到这一点：**

> **1)**将启动画面旋转 90 度。
> 
> **2）**反转尺寸（320 * 480 -> 480 * 320）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:48:19.637

要提供横向启动图像，您必须创建图像.. 并在外部图像编辑器中将其旋转 90 度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:04:32.577

在横向模式下的初始屏幕上进行非常简单的设计。并像在纵向中一样制作启动画面。当他/她看到屏幕处于横向时，用户会自动制作手机横向:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T15:07:57.810

在[Apple doc](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12)中，仅 iPad 支持横向启动屏幕。

对于 iPhone 和 iPod Touch，您需要创建一个纵向启动屏幕，该屏幕可以是您的 90° 横向启动屏幕。我会应用顺时针旋转而不是逆时针旋转（即，在桌面上，您需要向右弯曲头部才能看到正确方向的图像）。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-25T07:07:33.210

在 pch 文件中使用这些宏

```
#if IS_iPAD
LaunchImage=iPad.png
else
LaunchImage=iPhone.png 
```****

# mysql - MySQL+PHP+Flash+as3 如何在离线编程中将Flash AS3 2d RPG 游戏中的数据保存到mySql 中。？

> ID：15061630
> 
> 赞同：0
> 
> 时间：2013-02-25T06:58:19.570
> 
> 标签：mysql, actionscript-3, flash, localhost, offline

这是我第一次在网上询问我的编程问题，我希望我能尽快得到反馈。我和我的伙伴正在做一个使用 FLASH CS5.5、AS3、PHP(Dreamweaver cs5.5) 和 Mysql(xampp) 的 2D RPG 游戏项目。我想知道 wwe 是否有任何方法可以创建游戏并将其连接到 mysql，我们可以在玩游戏后保存和检索数据并将其保存在玩家状态中，以便玩家再次玩时，他可以拥有他的比赛最后状态继续。我们希望它是一款离线游戏，我在网上搜索的任何地方，所有提示都是针对在线游戏的。请帮助我们。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-25T19:52:32.480

# 假设游戏大部分是用 ActionScript 3 编写的

为了在 SQL 服务器上保存数据，您需要将数据从 AS3 传递到 PHP 并将其插入服务器。

为此，您需要熟悉 AS3 的[JSON 库](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/JSON.html)。有很多方法可以做到这一点，包括流行的[as3codelib](https://github.com/mikechambers/as3corelib)，但 JSON 库是内置的，并且比最初出现的要简单得多。

我会解释这一切，但本[教程](http://code.tutsplus.com/tutorials/create-a-flash-login-system-using-php-and-mysql-part-1--active-5147)会让你熟悉它。

PS：正如其他人所说，您将希望在本地进行测试，因此请确保您知道如何执行基本的 SQL 查询并使用 XAMPP 运行 PHP 脚本。如果你不这样做，[这](https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=running%20php%20in%20xamp%20tutorial)应该会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:00:29.190

如果您只希望它在本地运行（即用户拥有自己的数据集），您为什么不只使用[`SharedObject`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)?

这使您可以非常轻松且更有效地将数据保存到用户机器。

# sql - 如何找到上一行和当前行的差异

> ID：15061635
> 
> 赞同：2
> 
> 时间：2013-02-25T06:58:45.497
> 
> 标签：sql, sql-server, sql-server-2005

这个表每个id有2行，id不超过2行

```
id  date       amt
-------------------    
001 01/01/2012 100
001 01/12/2011 200
002 01/01/2013 100
002 01/12/2012 200
003 12/08/2012 500
003 31/12/2011 200
... 
```

我想`max(date)`用当前行和上一行显示每个 id 的行 amt 差异

预期产出

```
id  date       amt
------------------    
001 01/01/2012 100
002 01/01/2013 100
003 12/08/2012 300
... 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:28:52.403

你可以试试这个：

```
DECLARE @tbl TABLE (id VARCHAR(10), date DATE, amt INT)
INSERT @tbl VALUES
('001', CONVERT(DATE, '01/01/2012', 103), 100),
('001', CONVERT(DATE, '01/12/2011', 103), 200),
('002', CONVERT(DATE, '01/01/2013', 103), 100),
('002', CONVERT(DATE, '01/12/2012', 103), 200),
('003', CONVERT(DATE, '12/08/2012', 103), 500),
('003', CONVERT(DATE, '31/12/2011', 103), 200),
-- Added to display the one id - one row situation
('004', CONVERT(DATE, '14/02/2011', 103), 999),
('000', CONVERT(DATE, '02/02/2012', 103), 100),
('100', CONVERT(DATE, '09/09/2011', 103), 999)

;WITH a AS
(
    SELECT  id
            , amt
            , date      
            , ROW_NUMBER() OVER (PARTITION BY id ORDER BY date ASC) num
            , COUNT(*) OVER (PARTITION BY id) cnt
    FROM    @tbl
)

SELECT  t1.id
        , t1.date
        , ABS(t1.amt - t2.amt)
FROM    a t1
JOIN    a t2 ON (t1.id = t2.id AND t1.num = t2.num + 1)
OR      (t1.id = t2.id AND t2.cnt = 1) 
```

id 1 和 2 的第一行和第二行之差为 -100，因此我添加了`ABS`返回绝对值的函数。

我还添加了示例数据，以显示每个 id 只有一条记录时如何处理这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:01:18.007

试试这个：

```
WITH CTE
AS
(
   SELECT *,
     ROW_NUMBER() OVER(PARTITION BY Id ORDER BY Date DESC) AS Rownum
   FROM Table1
), CTE2
AS
(
  SELECT 
    id, 
    date, 
    amt, ROW_NUMBER() OVER(ORDER BY Id) AS rank
  FROM CTE c1
  WHERE rownum = 1
)
SELECT 
  id, 
  date, 
  amt - ISNULL((SELECT c2.amt
                FROM CTE2 c2
                WHERE c1.rank - c2.rank = 1), 0)
FROM CTE2 c1; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/e29f7/10)

# linux - grub 在 Win7 中看不到 linux\no 启动菜单

> ID：15061642
> 
> 赞同：0
> 
> 时间：2013-02-25T06:59:07.260
> 
> 标签：linux, boot, restart

我安装了windows和linux。

我创建了一个新分区但`Grub error:UNKNOWN FILESYSTEM`重新启动。然后我使用 Windows 恢复 CD 并`Bootrec/fixmbr command`返回 Grub 菜单。

但是现在我看不到启动菜单。笔记本电脑只是启动到 Windows，我也无法从任何其他 CD 或 USB 启动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:07:30.023

您需要在引导扇区重新安装 grub。如果您使用 Ubuntu，有一种非常简单的方法可以通过 Ubuntu 的 live CD 使用[引导修复](https://help.ubuntu.com/community/Boot-Repair)工具来修复它。我不确定这是否适用于其他 Linux 发行版，但值得一试。

如果您无法从 CD 或 USB 启动，您应该在 BIOS 中检查您的启动优先级。或者尝试进入启动选择菜单（通常按 F12）并在那里选择 CD\USB，无论如何，这里的答案在 BIOS 中，与 grub 无关

# android - 检查日历但不起作用

> ID：15061643
> 
> 赞同：0
> 
> 时间：2013-02-25T06:59:10.773
> 
> 标签：android

我尝试在每个月的第一天自动发送数据但问题代码不起作用时检查日历。

```
Calendar c = Calendar.getInstance();
if (Calendar.DAY_OF_MONTH == 25){
sendMessage("L100000000");} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T07:00:34.547

我想你需要这个

```
Calendar cal = Calendar.getInstance();
int dayOfMonth = cal.get(Calendar.DAY_OF_MONTH);

if (dayOfMonth == 25){
    sendMessage("L100000000");
} 
```

# ios - 带有 N/A 选项的 UIDatePicker

> ID：15061645
> 
> 赞同：3
> 
> 时间：2013-02-25T06:59:17.040
> 
> 标签：ios, uidatepicker

`DatePicker`目前在我的应用程序中，如果我从后端获得空值，我需要在其中显示 N/A 。是否有显示 N/A 的选项`UIDatePicker`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:12:44.533

If your recieve empty data from server add one object in

```
 - (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view 
```

Method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-19T15:42:17.543

不，没有办法用`UIDatePicker`.

`UIDatePicker`不是 的子类`UIPickerView`。

你可以

1.  禁用`UIDatePicker`
2.  没有数据时，用单个“N/A”行替换`UIDatePicker`a 。`UIPickerView`
3.  替换`UIDatePicker`按钮“未设置日期：单击以添加日期”并弹出`UIAlertController`一个嵌入的`UIDatePicker`. 添加“设置日期”或“取消”选项以恢复为未设置状态。
4.  [实现您自己的日期选择器（在Cocoa Controls](http://cocoacontrols.com)上查找起点）

# r - 试图让图形在 R 中粘在一起

> ID：15061648
> 
> 赞同：1
> 
> 时间：2013-02-25T06:59:28.167
> 
> 标签：r

我一直试图让我在底行的 12 个 R 图相互粘连（0 边距）

```
layout(matrix(c(rep(1,10),2:11),nrow=2,byrow=T),width=c(1,2,1,1,1,1,1,1,1,1,1)
plot(1:10, xaxt='n',yaxt='n', ann=FALSE, mar=c(0,0,0,0))
plot(1:10, xaxt='n',yaxt='n', ann=FALSE, mar=c(0,0,0,0))
.
.
. 
```

据我所知，对于 mar=c(0,0,0,0)，所有边距都应该为零。但正如你所见，地块之间有很大的空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T07:03:56.827

边距应该在函数内部设置，`par()`而`layout()`不是在`plot()`调用内部。

```
layout(matrix(c(rep(1,10),2:11),nrow=2,byrow=T),width=c(1,2,1,1,1,1,1,1,1,1,1))
par(mar=c(0,0,0,0))      
plot(1:10, xaxt='n',yaxt='n', ann=FALSE)
...... 
```

# android - 安装应用程序时只运行一次代码

> ID：15061653
> 
> 赞同：29
> 
> 时间：2013-02-25T07:00:23.933
> 
> 标签：android, sharedpreferences, android-preferences

我只想在我的应用程序中运行一段代码，并且是在我第一次运行它时（新安装的应用程序）。我怎么能这样做，任何人都可以解释给出一段代码。

实际上，在我的 android 项目中，我只想在第一次运行时创建数据库并插入一些值。之后，该特定代码不应再次运行。我如何通过**SharedPreferences**或**Preferences**实现这种机制。

示例代码会更有帮助。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-25T07:31:41.363

首先你可以使用[SQLiteOpenHelper](http://developer.android.com/intl/ru/reference/android/database/sqlite/SQLiteOpenHelper.html)。它是使用数据库做事的首选方式。这个类有一个`onCreate(SQLiteDatabase)`方法，在第一次创建数据库时调用。我觉得很适合你。

如果您想要更大的灵活性并且您的第一次逻辑不仅仅与数据库绑定，您可以使用之前提供的示例。你只需要把它放在启动点。

有2个启动点。如果你只有一个活动，你可以把你的代码放在`onCreate`方法中，所以它会是这样的：

```
public void onCreate(Bundle savedInstanceState) {
  // don't forget to call super method.
  super.onCreate(savedInstanceState);

  SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
  if (!prefs.getBoolean("firstTime", false)) {
    // <---- run your one time code here
    databaseSetup();

    // mark first time has ran.
    SharedPreferences.Editor editor = prefs.edit();
    editor.putBoolean("firstTime", true);
    editor.commit();
  }
} 
```

不要忘记将[活动声明](http://developer.android.com/intl/ru/guide/topics/manifest/activity-element.html)以及它的[意图过滤器](http://developer.android.com/intl/ru/guide/topics/manifest/intent-filter-element.html)（action = `MAIN`， category = `LAUNCHER`）放在 manifest 中。

如果您有多个活动并且不想重复启动逻辑，则可以将初始化逻辑放在应用程序实例中，该实例在所有活动（以及其他组件，例如服务、广播接收器、内容提供者）之前创建.

只需创建这样的类：

```
public class App extends Application {

  @Override
  public void onCreate() {
    super.onCreate();

    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    if (!prefs.getBoolean("firstTime", false)) {
      // <---- run your one time code here
      databaseSetup();

      // mark first time has ran.
      SharedPreferences.Editor editor = prefs.edit();
      editor.putBoolean("firstTime", true);
      editor.commit();
    }
} 
```

为此，您只需将其放入`application`AndroidManifest.xml 属性 android:name=".App" 的标记中。

```
<!-- other xml stuff -->

<application ... android:name=".App">

   <!-- yet another stuff like nextline -->
   <activity ... />
</application> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-25T07:04:00.493

你可以试试：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    SharedPreferences wmbPreference = PreferenceManager.getDefaultSharedPreferences(this);
    boolean isFirstRun = wmbPreference.getBoolean("FIRSTRUN", true);
    SharedPreferences.Editor editor = wmbPreference.edit();

    if (isFirstRun){
       // Code to run once
       editor.putBoolean("FIRSTRUN", false);
       editor.apply();
} 
```

在你的第一个创建活动中写下这个。那么之后的代码就不会再执行了。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-26T14:23:00.747

这就是我在这些情况下所做的：

```
 wmbPreference = PreferenceManager.getDefaultSharedPreferences(this);

    isFirstRun = wmbPreference.getBoolean("FIRSTRUN", true);

    if (isFirstRun)
    {

        // Do your magic here

        SharedPreferences.Editor editor = wmbPreference.edit();
        editor.putBoolean("FIRSTRUN", false);
        editor.commit();
    }else{
        //what you do everytime goes here 
    } 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-25T07:04:49.430

无论您需要在应用程序中的何处运行此代码：

1.  `firstTime`检查共享首选项中的布尔值是否为 True
2.  如果不

    *   运行一次性代码
    *   在共享首选项中另存`firstTime`为 true

像这样的东西：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
if(!prefs.getBoolean("firstTime", false)) {
    // run your one time code here
    SharedPreferences.Editor editor = prefs.edit();
    editor.putBoolean("firstTime", true);
    editor.commit();
} 
```

# sqlite - 如何使用数据库和phonegap向jquery mobile中的选择菜单添加选项

> ID：15061657
> 
> 赞同：1
> 
> 时间：2013-02-25T07:00:43.137
> 
> 标签：sqlite, cordova, jquery-mobile

我正在尝试向 jqueryMobile 中的选择菜单添加选项。我从 sqlite 数据库中读取了我想添加的值。从数据库中读取有效（控制台日志输出告诉我它找到了 16 行），并且保存新选项的变量也被正确填充。但是，如果我想将选项添加到选择菜单，我会收到错误“无法在初始化之前调用选择菜单上的方法：尝试调用方法'刷新'。我尝试在刷新之前运行 selectmenu() 方法，但它确实也不行。这是我的代码：

HTML：

```
<select name="subject" class="subjectDropdown" data-native-menu="false">
    <option>%tx_subject%</option>
</select> 
```

Javascript：

```
 //  Read all subjects from the database
    fillSubjectsDropdown: function(){
        sz.db.container.transaction(function(tx){
            tx.executeSql("SELECT * FROM SUBJECTS ORDER BY sj_name", [], sz.db.selectSubjectsSuccess, sz.db.errorCB);
        }, sz.db.errorCB, sz.db.successCB);
    },

//  Read subjects Callback
    selectSubjectsSuccess: function(tx, results){
        var len = results.rows.length;
        console.log('### szlog: Subjects found: ' + len);
        var subjects = '<option value="">' + sz.langdata['subject'] + '</option>';
        for (var i = 0; i < len; i++){
            subjects += '<option value="' + results.rows.item(i).sj_id + '">' + results.rows.item(i).sj_name + '</option>';
        }
        $(".subjectDropdown").html(subjects).selectmenu('refresh', true);
    }, 
```

我搜索并找到了一些文章，但没有一篇能真正帮助我。任何帮助将非常感激。

我使用 jqueryMobile 1.2.0、jquery 1.8.3 和 phonegap 2.3.0

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:12:07.473

如果出现此错误：

> 在初始化之前无法调用选择菜单上的方法：试图调用方法“刷新”。

无论是按钮、选择框还是列表视图，都必须先初始化该元素，然后才能开始使用刷新功能进行 Merkup 增强。

像这样更改您的代码：

```
$(".subjectDropdown").html(subjects).selectmenu().selectmenu('refresh', true); 
```

第一个**.selectmenu()**将初始化它，第二个**.selectmenu('refresh', true);** 将样式它。

# c# - 无法在 Windows 运行时组件库的 UserControl 中创建依赖项属性

> ID：15061659
> 
> 赞同：4
> 
> 时间：2013-02-25T07:00:45.397
> 
> 标签：c#, data-binding, windows-runtime, winrt-xaml

我想在用户控件中创建数据可绑定属性。此用户控件包含在**“Windows 运行时组件”**项目中。我使用下面的代码来创建属性。

```
public MyItem CurrentItem
{
    get { return (MyItem)GetValue(CurrentItemProperty); }
    set { SetValue(CurrentItemProperty, value); }
}

// Using a DependencyProperty as the backing store for CurrentItem. 
// This enables animation, styling, binding, etc...
public static readonly DependencyProperty CurrentItemProperty =
    DependencyProperty.Register("CurrentItem", typeof(MyItem), typeof(CollapseUserControl), new PropertyMetadata(null)); 
```

当我编译项目时，出现以下错误。

```
Type 'HierachyLib.CollapseUserControl' contains externally visible field 'HierachyLib.CollapseUserControl.CurrentItemProperty'.  Fields can be exposed only by structures. 
```

**更新 1 - 整个班级的源代码**

```
public sealed partial class CollapseUserControl : UserControl, IHierarchyHeightFix
{
    public MyItem CurrentItem
    {
        get { return (MyItem)GetValue(CurrentItemProperty); }
        set { SetValue(CurrentItemProperty, value); }
    }

    // Using a DependencyProperty as the backing store for CurrentItem.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty CurrentItemProperty =
        DependencyProperty.Register("CurrentItem", typeof(MyItem), typeof(CollapseUserControl), new PropertyMetadata(null));

    Boolean viewState = true;

    public CollapseUserControl()
    {
        this.DataContext = CurrentItem;
        this.InitializeComponent();
        this.Loaded += CollapseUserControl_Loaded;
    }

    void CollapseUserControl_Loaded(object sender, RoutedEventArgs e)
    {
        LoadData();
        if (this.Height.Equals(double.NaN))
        {
            this.Height = 50;
        }
        //this.Height = 50;
        //this.Width = double.NaN;
    }

    private void LoadData()
    {
        if (CurrentItem != null)
        {
            if (CurrentItem.IsValueControl)
            {
                ChildItemContainer.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
                ValueItem.Visibility = Windows.UI.Xaml.Visibility.Visible;

                ValueItem.Text = CurrentItem.Value;
            }
            else
            {
                ChildItemContainer.Visibility = Windows.UI.Xaml.Visibility.Visible;
                ValueItem.Visibility = Windows.UI.Xaml.Visibility.Collapsed;

                ChildItems.ItemsSource = CurrentItem.Childs;
                //foreach (MyItem item in CurrentItem.Childs)
                //{
                //    CollapseUserControl control = new CollapseUserControl();
                //    control.CurrentItem = item;
                //    ChildItems.Items.Add(control);
                //}
                ChildItems.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
            }
        }

    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        if (viewState)
        {
            ChildItems.Visibility = Windows.UI.Xaml.Visibility.Visible;
            //show.Begin();
        }
        else
        {
            //hide.Begin();
            ChildItems.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
        }
        viewState = !viewState;
    }

    private void hide_Completed_1(object sender, object e)
    {
        ChildItems.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
    }

    private void show_Completed_1(object sender, object e)
    {
    }
} 
```

**更新 2：XAML 代码**

```
<UserControl
x:Class="HierachyLib.CollapseUserControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:HierachyLib"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300"
d:DesignWidth="400">
<UserControl.Resources>

    <DataTemplate x:Key="ReviewsItemsTemplate">
        <StackPanel Margin="0,0,0,20">
            <TextBlock Text="TEST" />
            <TextBlock Text="TEST"/>
        </StackPanel>
    </DataTemplate>
    <ItemsPanelTemplate x:Key="ReviewsItemsPanelTemplate">
        <StackPanel Margin="0,0,0,0" Width="Auto"/>
    </ItemsPanelTemplate>
</UserControl.Resources>
<!--xmlns:my="clr-namespace:HierarchyCollapse"-->
<Grid>
    <Grid Name="ChildItemContainer">
        <Grid.RowDefinitions>
            <RowDefinition Height="40" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Rectangle Grid.Row="0" Margin="0,0,70,0" Fill="Transparent" Canvas.ZIndex="4"/>
        <ListView HorizontalContentAlignment="Stretch" Background="#FF6599CD" CanDragItems="False" CanReorderItems="False" Grid.Row="0"
                  ScrollViewer.VerticalScrollBarVisibility="Hidden" ScrollViewer.VerticalScrollMode="Disabled" 
                  ScrollViewer.HorizontalScrollBarVisibility="Hidden" ScrollViewer.HorizontalScrollMode="Disabled">
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ListViewItem">
                                <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Height="40">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="50" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Sample Text" FontSize="17" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0" Canvas.ZIndex="10"/>
                                        <Image PointerPressed="Button_Click_1" Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Center" Source="Assets/arrw_right.png" Stretch="None" Margin="0,0,10,0"/>
                                    </Grid>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </ListView.ItemContainerStyle>
            <ListViewItem />
        </ListView>
        <ListView Grid.Row="1"
            IsHitTestVisible="True"
            CanDragItems="True" 
            CanReorderItems="True" 
            AllowDrop="True" 
            Name="ChildItems" 
            SelectionMode="None"
            IsItemClickEnabled="False">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <local:CollapseUserControl CurrentItem="{Binding RelativeSource={RelativeSource Self}}" />
                </DataTemplate>
            </ListView.ItemTemplate>
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="Padding" Value="0"/>
                    <Setter Property="Margin" Value="0"/>
                </Style>
            </ListView.ItemContainerStyle>
        </ListView>
    </Grid>
    <TextBlock Name="ValueItem" Margin="0,0,0,0" Height="40" FontSize="36"></TextBlock>
</Grid> 
```

我得到的新错误：

```
Failed to create a 'Windows.UI.Xaml.PropertyPath' from the text ''. 
```

错误来自`<local:CollapseUserControl CurrentItem="{Binding RelativeSource={RelativeSource Self}}" />`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T09:05:48.187

似乎您可以将您的财产标记为内部，然后它开始工作......

```
internal static readonly DependencyProperty CurrentItemProperty... 
```

编辑*

似乎是平台控件所做的更好的方法是拥有一个公开`DependencyProperty`对象的实际 CLR 属性 - 如下所示：

```
private static readonly DependencyProperty CurrentItemPropertyField =
    DependencyProperty.Register/RegisterAttached(...);

internal static DependencyProperty CurrentItemProperty
{
    get
    {
        return CurrentItemPropertyField;
    }
} 
```

这允许诸如 Blend 之类的工具发现属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-25T21:38:31.913

您可以使用自动属性设置默认值（来自 c# 5），如下所示：

```
public static DependencyProperty CurrentItemPropertyField { get; } = 
        DependencyProperty.Register("Value", typeof(string), typeof(MyControl), new PropertyMetadata("{No Value}")); 
```

也适用于 UWP 应用程序

# excel - Excel VBA – 如何创建和转储数组复杂结构的哈希？

> ID：15061660
> 
> 赞同：3
> 
> 时间：2013-02-25T07:00:55.730
> 
> 标签：excel, vba, macos, perl

我来自 perl 背景并学习 Excel-VBA。在 perl 中，我们可以使用 Data::Dumper 来获取数据结构的转储。

下面是 perl 的例子：

```
use strict;
use Data::Dumper;

my $hash={};
$hash->{key1} = [ 1, "b", "c" ]; # the value stored against key1 here is an array
$hash->{key2} = [ 4.56, "g", "2008-12-16 19:10 -08:00" ]; # the value stored against key2 here is an array
my $hash2={1=>['one','ONE']}; # this is a hash
$hash->{key3}=$hash2; # the value stored against key3 here is a hash

print Dumper($hash)."\n"; 
```

它产生以下输出：

```
$VAR1 = {
         'key2' => [
                     '4.56',
                     'g',
                     '2008-12-16 19:10 -08:00'
                   ],
         'key1' => [
                     1,
                     'b',
                     'c'
                   ],
         'key3' => {
                     '1' => [
                              'one',
                              'ONE'
                            ]
                   }
        }; 
```

正如我之前提到的，我是 Excel-VBA 的新手并且正在学习它，所以请耐心等待我帮助我找到以下问题的答案：

1.  Excel-VBA 中是否有类似于 perl 的 Data::Dumper 的东西？
2.  如何使用 Scripting.Dictionary 对象在 Excel-VBA 中创建与上述完全相同的结构（即 $hash）？如何遍历该结构并检索存储在键上的值？这种结构是否支持“存在”、“删除”、“添加”等方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:07:47.683

我不知道有内置机制可以满足您的要求。您必须创建一个“keyedArray”类来实现您想要的方法。弄清楚这一点会让你在 VBA 学习曲线上更上一层楼。

一个好的起点是[http://www.cpearson.com/excel/classes.aspx](http://www.cpearson.com/excel/classes.aspx)

如果这对您没有帮助，请在评论中说出来 - 我可能有一段时间再整理一个简短的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:12:34.770

您可能有以下三种需求之一：

1.  Interactive Debug——然后在调试器中添加断点，使用vba中的Add Watch，迭代展开结构
2.  将数据获取到文本文件以进行一些后期处理 - 尝试查找 xml 或 json 导出器
3.  完全按照您显示的方式获取数据，例如使用 Safe 导入 Perl。- 那么你需要自己编写一个递归过程。

后者将非常困难，因为大多数 vba 结构（除非您自己制作）都有循环。（像孩子 => [ ... ]，父母 => FIX）。

VBA Collections 没有给你足够的支持，所以 Dictionary 是你需要的。（记住工具->“Miscrosoft Scripting Runtime”的参考）

以下内容并不完美，但可能会给你一个开始

```
Option Explicit ' aka use strict
Option Base 0 ' to be close to perl

Sub test()
    Dim c As New Dictionary
    Dim c2 As New Dictionary
    Dim a(10) As Variant, b() As Variant
    a(1) = 1.1
    a(2) = "array item 1"

    ReDim b(0)
    b(0) = 41.9
    ReDim Preserve b(UBound(b) + 1) ' aka push
    b(UBound(b)) = 41.95

    ReDim Preserve b(UBound(b) + 1)
    b(UBound(b)) = 41.96

    '#build a structure
    c.Add item:="val1.2", Key:="key1.2"
    c.Add item:="val1.1", Key:="key1"
    c2.Add item:="val2.1", Key:="key2.1"
    c2.Add item:=42, Key:="key2.2"
    c2.Add item:=42.1, Key:="key2.3"
    c2.Add item:=a, Key:="key2.4"
    c2.Add item:=b, Key:="key2.5"

    'add c2 to c to make it hierarchical
    c.Add item:=c2, Key:="key1.3"""

    Debug.Print vba2perl(c)

End Sub

Function vba2perl(item, Optional indent = 0)
    Dim txt
    Dim Key, I

    Select Case TypeName(item)

    Case "Dictionary"
        indent = indent + 1
        txt = txt _
            & vbCrLf & Space(indent * 4 - 2) & "{"
        For Each Key In item
            txt = txt _
                & vbCrLf & Space(indent * 4) & Key & " => " & vba2perl(item(Key), indent) & ","
        Next Key
        txt = txt _
            & vbCrLf & Space(indent * 4 - 2) & "}"
    Case "String"
            txt = item
            txt = Replace(txt, """", "\""") ' more escaping needed
            txt = """" & txt & """"
    Case "Integer"
            txt = item
    Case "Double"
            txt = item
            txt = Replace(txt, ",", ".") ' if regional, then fix . vs , tbd
    Case "Empty"
            txt = "undef"
    Case "Variant()"
        indent = indent + 1
        txt = txt _
            & vbCrLf & Space(indent * 4 - 2) & "["

        For I = LBound(item) To UBound(item)
            txt = txt _
                & vbCrLf & Space(indent * 4) & vba2perl(item(I)) & ","
        Next I
        txt = txt _
            & vbCrLf & Space(indent * 4 - 2) & "]"
    Case Else
        Debug.Print "No Handler for type: " & TypeName(item)
    End Select

    vba2perl = txt
End Function 
```

# python - 从 django 的数据库中及时添加一天

> ID：15061666
> 
> 赞同：1
> 
> 时间：2013-02-25T07:01:15.583
> 
> 标签：python, django, time

你好，

我需要在时基上添加一些条件，现在我从数据库中获取的时间值就像**2012-09-05 05:05:05**一样，我需要在其中添加 24 小时。

我需要在时基上显示**不同的**内容，比如原始时间我需要显示“hi”，24 小时后我需要在模板文件中显示“hello”。

我怎样才能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:17:04.597

自定义模板标签可能是一个不错的方法：[https](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters) ://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters 。您可以使用参数实现自己的`deltaDays`标签，即`{{ date|deltaDays:1 }}`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T07:29:47.110

您也可以将其用作便宜的过滤器。

```
from django import template
register = template.Library()
@register.filter()
def is_at_least_24_hours_ago(value):
    import datetime
    original_date_plus_24 = value + datetime.timedelta(hours=24)
    right_now = datetime.datetime.now()
    if right_now >= original_date_plus_24:
        return True
    return False 
```

然后在您的模板中：

```
{% if object_date|is_at_least_24_hours_ago %}
    // It's 24 hours later
{% else %}
    // It's not
{% endif %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T07:07:41.833

这是有关如何添加日期的示例，

```
import datetime
b = var_name + datetime.timedelta(0,3) # days, seconds

or 

datetime.timedelta(days=1) 
```

通过视图传递值，然后在模板中使用 if 语句

# asp.net - Devexpress 在源代码中生成垃圾

> ID：15061671
> 
> 赞同：-1
> 
> 时间：2013-02-25T07:01:33.627
> 
> 标签：asp.net, devexpress

我正在使用VS10。我正在编辑 aspx 页面上的代码，没有任何意外事件，但如果我在 Constructor 选项卡上执行任何操作，则 DevExpress 会创建许多代码。我很绝望。它是如何关闭的？

**选项卡源代码**

```
<dx:ASPxButton ID="btnFindServer" runat="server" Text="Find" Width="100%" /> 
```

**我在构造函数选项卡上做了一些事情**

```
<dx:ASPxButton ID="btnFindServer" runat="server" Text="Find">
<Image Align="NotSet">
</Image>
<CheckedStyle>
    <BackgroundImage Repeat="Repeat" />
    <Border BorderStyle="NotSet" />
    <BorderLeft BorderStyle="NotSet" />
    <BorderTop BorderStyle="NotSet" />
    <BorderRight BorderStyle="NotSet" />
    <BorderBottom BorderStyle="NotSet" />
</CheckedStyle>
<PressedStyle>
    <BackgroundImage Repeat="Repeat" />
    <Border BorderStyle="NotSet" />
    <BorderLeft BorderStyle="NotSet" />
    <BorderTop BorderStyle="NotSet" />
    <BorderRight BorderStyle="NotSet" />
    <BorderBottom BorderStyle="NotSet" />
</PressedStyle>
<HoverStyle>
    <BackgroundImage Repeat="Repeat" />
    <Border BorderStyle="NotSet" />
    <BorderLeft BorderStyle="NotSet" />
    <BorderTop BorderStyle="NotSet" />
    <BorderRight BorderStyle="NotSet" />
    <BorderBottom BorderStyle="NotSet" />
</HoverStyle>
<FocusRectBorder BorderStyle="NotSet" />
<BackgroundImage Repeat="Repeat" />
<Border BorderStyle="NotSet" />
<BorderLeft BorderStyle="NotSet" />
<BorderTop BorderStyle="NotSet" />
<BorderRight BorderStyle="NotSet" />
<BorderBottom BorderStyle="NotSet" />
<DisabledStyle>
    <BackgroundImage Repeat="Repeat" />
    <Border BorderStyle="NotSet" />
    <BorderLeft BorderStyle="NotSet" />
    <BorderTop BorderStyle="NotSet" />
    <BorderRight BorderStyle="NotSet" />
    <BorderBottom BorderStyle="NotSet" />
</DisabledStyle> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:32:08.013

如果您在设计视图中进行了这些修改，那么它就不是 HTML。

这是设计器修改序列化到源视图的方式：

[Web 表单设计器](http://msdn.microsoft.com/en-US/library/zzhfb89h%28v=vs.100%29.aspx)

# mysql - MySql：在一个表/视图上使用 GROUP BY 子句获取有限的结果

> ID：15061675
> 
> 赞同：0
> 
> 时间：2013-02-25T07:01:52.283
> 
> 标签：mysql, group-by

我有一个视图'view_type'，例如：

```
type------name------fid

type_a----name1-----12
type_a----name2-----27
type_a----name3-----45
type_a----name4-----43
type_a----name5-----25
type_a----name7-----75
type_a----name6-----15

type_b----bame1-----12
type_b----bame2-----27
type_b----bame3-----45
type_b----bame4-----43
type_b----bame5-----25

type_c----came7-----55
type_c----came6-----25 
```

现在我想获取名称字段中具有“ame”的结果，但只能来自“type_a”和“type_b”，而且每个结果只有 4 个。

```
type------name------fid

type_a----name1-----12
type_a----name2-----27
type_a----name3-----45
type_a----name4-----43
type_b----bame1-----12
type_b----bame2-----27
type_b----bame3-----45
type_b----bame4-----43 
```

简而言之，我想限制“分组依据”结果集的结果。

不想使用“复杂子查询”或“存储过程”。有什么简单的查询可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:13:34.647

试试这个查询

```
select * from view_type where type = 'type_a' and name regexp 'ame' LIMIT 4
UNION
select * from view_type where type = 'type_b' and name regexp 'ame' LIMIT 4 
```

# python - time.sleep 挂了

> ID：15061676
> 
> 赞同：2
> 
> 时间：2013-02-25T07:01:52.723
> 
> 标签：python, timer, gevent, python-requests

这是一些奇怪的回归，我只能在我们拥有的更强大的生产机器上重现。

```
def test_foo(self):
    res = self._run_job( ....)
    self.assertTrue("Hello Input!" in res.json()["stdout"], res.text)
    .........

def _run_job(self, cbid, auth, d):    
    .........
    while True:
        res = requests.get(URL+"/status/"+status_id, auth=auth)   <--- hangs here
        if res.json()["status"] != "Running":
            break
        else:
            time.sleep(2)
    .......... 
```

我必须打破这个过程，这是回溯：

```
Traceback (most recent call last):
  File "test_full.py", line 231, in <module>
    unittest.main()
  File "/opt/graphyte/vens/gcs/local/lib/python2.7/site-packages/unittest2/main.py", line 98, in __init__
    self.runTests()
  File "/opt/graphyte/vens/gcs/local/lib/python2.7/site-packages/unittest2/main.py", line 232, in runTests
    self.result = testRunner.run(self.test)
  File "/opt/graphyte/vens/gcs/local/lib/python2.7/site-packages/unittest2/runner.py", line 162, in run
    test(result)
  File "/opt/graphyte/vens/gcs/local/lib/python2.7/site-packages/unittest2/suite.py", line 64, in __call__
    return self.run(*args, **kwds)
  File "/opt/graphyte/vens/gcs/local/lib/python2.7/site-packages/unittest2/suite.py", line 84, in run
    self._wrapped_run(result)
  File "/opt/graphyte/vens/gcs/local/lib/python2.7/site-packages/unittest2/suite.py", line 114, in _wrapped_run
    test._wrapped_run(result, debug)
  File "/opt/graphyte/vens/gcs/local/lib/python2.7/site-packages/unittest2/suite.py", line 116, in _wrapped_run
    test(result)
  File "/opt/graphyte/vens/gcs/local/lib/python2.7/site-packages/unittest2/case.py", line 398, in __call__
    return self.run(*args, **kwds)
  File "/opt/graphyte/vens/gcs/local/lib/python2.7/site-packages/unittest2/case.py", line 340, in run
    testMethod()
  File "test_full.py", line 59, in test_session
    "cmd": "python helloworld.py"
  File "test_full.py", line 129, in _run_job
    time.sleep(2)
  File "/opt/graphyte/vens/gcs/local/lib/python2.7/site-packages/gevent/hub.py", line 79, in sleep
    switch_result = get_hub().switch()
  File "/opt/graphyte/vens/gcs/local/lib/python2.7/site-packages/gevent/hub.py", line 164, in switch
    return greenlet.switch(self)
KeyboardInterrupt
Exception KeyError: KeyError(155453036,) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored 
```

为什么`gevent`参与？这是一个功能测试。它只通过`requests`库发出 HTTP 请求，所以可能是`switch`指`requests`.

但是作为一个简单的循环，这怎么可能失败呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:21:22.237

> 为什么`gevent`参与？

库`gevent`猴子修补了一些标准模块以使它们协作。替换`time.sleep`为`gevent.sleep`更改之一。

[http://www.gevent.org/gevent.monkey.html#gevent.monkey.patch_time](http://www.gevent.org/gevent.monkey.html#gevent.monkey.patch_time)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:51:39.743

你在gevent中打补丁吗？

它可能正在打开网络请求并且由于某种原因永远不会回来。我会说现在停止猴子修补，并把它放在你需要的地方。

可能现在请求是异步的，它立即返回，然后休眠（再次异步）和请求，然后冲洗/重复......

# c# - 通过c#向cmd发送命令

> ID：15061678
> 
> 赞同：-1
> 
> 时间：2013-02-25T07:01:53.657
> 
> 标签：c#, .net, cmd

单击按钮时，我想*执行命令以通过位锁定器锁定驱动器。*这个怎么做？我是 C# 的新手

命令是：

```
manage-bde -lock x: 
```

它将如何发送到控制台？这是代码

```
private void btnlock_Click(object sender, EventArgs e)
{
    System.Diagnostics.Process process = new System.Diagnostics.Process();
    System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
    startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
    startInfo.FileName = "cmd.exe";
    startInfo.Arguments = "/C manage-bde -lock "+textBox1.Text+":";
    process.StartInfo = startInfo;
    process.Start();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T07:11:31.737

您可以使用命名空间中的`Process`类`System.Diagnostics`。它应该是这样的：

```
System.Diagnostics.Process.Start("manage-bde", "-lock x:"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T05:11:05.037

该命令没有被执行，因为您的命令行不知道在哪里可以找到该`manage-bde`程序。

您需要做的就是添加文件的完整路径，如下所示：

`startInfo.Arguments = @"/C C:\Program Files\Foo\manage-bde.exe -lock "+textBox1.Text+":";`

注意：我不确定该`.exe`部分是否必要，但添加它并没有什么坏处。另外，请确保您使用 2 个反斜杠 ( `\\`) 或`@`在开头的引号之前使用。

# javascript - 来自多个视图实例的代码导致冲突

> ID：15061680
> 
> 赞同：0
> 
> 时间：2013-02-25T07:01:59.927
> 
> 标签：javascript, backbone.js

我正在使用 Backbone 将 Web 服务移植到单页 Web 应用程序中。有一个基本布局，由页眉组成，`div#content`我在其中附加视图和页脚的空白。

每条路由都会创建相应的视图并将其附加到`div#content`用新视图替换之前渲染的视图。

我`require.js`用来加载主干应用程序及其依赖项。所有 Backbone 代码都很小，只有一个文件，因为我只使用路由器和视图。此 AMD 模块依赖于`util.js`视图中使用的文件导出函数。创建并呈现视图后，它会从`util.js`.

问题是，当我渲染一个视图时，它的实用程序被调用，当我导航到另一条路线并创建一个新视图时，现在调用新视图的实用程序，但旧视图的实用程序仍在运行。

在某些时候，我有来自五个视图的实用程序一起运行，有时会导致冲突。

很明显，我的方法不够好，因为我应该有办法将`stop/start`实用程序功能作为某种服务。

我将粘贴显示我当前方法的相关代码：

```
require(["utilities"], function(util) {
...
Application.view.template = Backbone.View.extend({
  el: "div#content",
  initialize: function(){
    this.render();
  }, 
  render: function(){
    var that = this;
    // ajax request to html
    getTemplate(this.options.template, {
      success: function(template) {
        var parsedTemplate = _.template( template, that.options.templateOptions || {});
        that.$el.html(parsedTemplate);
        // execute corresponding utilities
        if(that.options.onReady) {
          that.options.onReady();
        }
      },
      error: function(template) {
        that.$el.html(template);
      }
    })
  }
});
...
Application.router.on('route:requestPayment', function(actions) {  
  var params = { template: 'request-payment', onReady: util.requestPayment };
  var view = new Application.view.template(params);
});       
...

}); 
```

`util.requestPayment`由一个函数组成，该函数具有使模板工作所需的所有东西。

我很困惑我应该如何处理这个问题。我希望我很清楚，任何建议或帮助将不胜感激。

**编辑：** `utilities.js`片段：

...

```
var textareaCounter = function() {
  $('#requestMessage').bind('input propertychange', function() {
    var textarea_length = 40 - $(this).val().length;
    if(textarea_length === 40 || textarea_length < 0) {
      $('#message-counter').addClass('error').removeClass('valid');
      $("#submitForm").attr('disabled', 'disabled');
    }
    else if(textarea_length < 40 && textarea_length > 0) {
      $('#message-counter').removeClass('error');
      $("#submitForm").removeAttr('disabled');
    }
    $('#message-counter').text(textarea_length);
  });
}
...    
var utilities = utilities || {};
...
utilities.requestPayment = function() {      
  textareaCounter();
  initForm();
  preventCatching();
  requestPaymentCalcFallback();
};
...
return utilities;
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:33:17.980

我建议您应该在应用程序的某处存储对当前活动视图的引用。

您在这里创建一个新视图：

`var view = new Application.view.template(params);`

但是之后您将无法访问此变量。所以它存在，但你不能停止/删除/摆脱它。

我们通常做的是有一个 Parent App 类来初始化整个应用程序并管理所有内容。你在 requirejs 中的每个模块都会依赖它。当导航一条新路线时，您要求父应用程序类更改视图。它将删除旧视图，创建一个新视图，填充 div#content 然后存储它的引用。

我认为当您删除旧视图时，所有实用程序都将停止响应它。

如果您仍然遇到调用事件的问题，那么您可能需要`stopListening`在删除视图引用之前使用事件绑定器。

# c# - 列出函数

> ID：15061682
> 
> 赞同：0
> 
> 时间：2013-02-25T07:02:26.740
> 
> 标签：c#, wpf, list, mvvm

在我的视图模型中，我有一些数学函数，如加法、减法。在我的用户界面中，我有两个文本框，其中包含一个输入，然后是一个组合框。该组合框将包含所有数学函数的名称（加、减）。在确定按钮上，我希望执行选定的功能。我怎么能做到这一点。我的意思是如何在组合框中显示函数名称列表？我可以在那里显示字符串，但函数名称如何。并选择功能。

```
<ComboBox ItemsSource="{Binding Actions}" SelectedItem="{Binding SelectedAction}" /> 
```

查看模型

```
public IEnumerable<string> Actions
{
    get
    {
        var list = new List<string>();
        list.Add("Add");      // Instead of adding strings, I want to add functions.
        list.Add("Subtract"); 
        return list;
    }
}

public int AddFunction()
{
    return numberA + numberB;
}

public int SubtractFunction()
{
    return numberA - numberB;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:35:49.650

所以你想要的是有一个委托列表，然后是一个将委托转换为方法名称的转换器。

在您的 ViewModel 中，让 Actions 属性返回一个委托列表。使用预定义的 Func，这是一个不带参数并返回 int 的方法：

```
public IEnumerable<Func<int>> Actions
{
    get
    {
        List<Func<int>> list = new List<Func<int>>();
        list.Add( AddFunction );
        list.Add( SubstractFunction );
        return list;
    }
} 
```

接下来，实现一个转换器。通常，转换器是“视图”的一部分，因此将其放在 cs 文件后面的代码中。此转换转换`Func<int>`为字符串，它使用反射来做到这一点：

```
[ValueConversion( typeof( Func<int> ), typeof( string ) )]
public class FnConverter : IValueConverter
{
    public object Convert( object value, Type targetType, object parameter, CultureInfo culture )
    {
        Func<int> fn = value as Func<int>;
        return fn.Method.Name;
    }

    public object ConvertBack( object value, Type targetType, object parameter, CultureInfo culture )
    {
        return null;
    }
} 
```

最后，您需要在 XAML 中使用转换器。但为了做到这一点，您需要指定组合框的项目模板，其中应用了转换器。

```
<!-- earlier in code define the converter as a resource -->
<Window.Resources>
    <src:FnConverter x:Key="conv" />
</Window.Resources>

...

<!-- now the combo box -->
<ComboBox Margin="4" ItemsSource="{Binding Path=Actions}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=., Converter={StaticResource conv}}"  />
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

话虽如此，我认为更优雅的解决方案是在视图模型中保留 MethodInfo 列表。使用自定义属性生成此列表。下面是一些代码。请注意以下几点：

1.  PresentingAttribute 是一个自定义属性。它派生自 System.Reflection.Attribute。它什么都没有。如果您想添加“标签”、“描述”等参数，您可以。
2.  使用 `[Presenting]` 在组合框中装饰您想要的方法
3.  现在，Actions 使用反射。注意过滤谓词的“Where”和 lambda，它只返回具有我们自定义属性的方法。
4.  您必须修改转换器以采用 MethodInfo。

```
namespace SO
{
    class PresentingAttribute : Attribute
    {
    }

    class FnVM
    {
        public int numA { get; set; }
        public int numB { get; set; }

        public IEnumerable<MethodInfo> Actions
        {
            get
            {
                return typeof( FnVM ).GetMethods().Where( minfo => 
                    minfo.GetCustomAttribute( typeof( PresentingAttribute ) ) != null
                );
            }
        }

        [Presenting]
        public int AddFunction( )
        {
            return numA + numB;
        }

        [Presenting]
        public int MulFunction( )
        {
            return numA * numB;
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:10:32.823

下面是一个可能有帮助的例子：

TODO: 1\. 结果应该绑定到 UI 中的另一个文本块 2\. ComboBox_SelectionChanged 应该通过 ICommand 完成。参考：[mvvm-binding-treeview-item-changed-to-icommand](http://jacobaloysious.wordpress.com/2012/02/19/mvvm-binding-treeview-item-changed-to-icommand/)

```
 public IList<MyComboboxItem> Actions
    {
        get
        {
            var list = new List<MyComboboxItem> { new MyComboboxItem(AddFunction), new MyComboboxItem(SubtractFunction) };
            return list;
        }
    }

    public int numberA { get;  set; }
    public int numberB { get; set; }

    public int Result { get; private set; }

    public void AddFunction()
    {
        Result = numberA + numberB;
    }

    public void SubtractFunction()
    {
        Result = numberA - numberB;
    }

    private void ComboBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        var comboboxItem = e.AddedItems[0] as MyComboboxItem;
        if (comboboxItem != null)
            comboboxItem.Action.Invoke();
    }

    public event PropertyChangedEventHandler PropertyChanged;

  public class MyComboboxItem 
  {
    public Action Action { get; private set; } 

    public MyComboboxItem(Action action)
    {
        this.Action = action;
    }

    public override string ToString()
    {
        return Action.Method.Name;
    }
} 
```

# iphone - 标签之间的自动间距

> ID：15061686
> 
> 赞同：0
> 
> 时间：2013-02-25T07:02:49.260
> 
> 标签：iphone, whitespace

我们如何设置标签之间的自动间距。动态文本被提供给标签，第二个标签应该自动框架本身，这样两者都不会被覆盖。我怎样才能做到这一点。我需要当第一个标签文本完成然后第二个标签开始与前一个标签保持距离。请指导以上。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:08:44.557

试试这个

```
CGSize size = [firstLabel.text sizeWithFont:[UIFont boldSystemFontOfSize:14.0]];
secondLabel.frame=CGRectMake(size.width+20,4, 9, 14); 
```

有关更多信息，[请根据不同长度的字符串检查此获取 UIlable 的长度](http://programmingjugaad.com/get-length-of-a-uilable-according-to-a-string-of-diffrent-length/)

用于获取图像大小

```
UIImage *tempimage= [UIImage imageWithContentsOfFile:fullImgNm];
Float width =   tempimage.size.width; 
```

所以你的图像视图框架将是

```
yourImageView.frame=CGRectMake(size.width+20,4,width, 14); 
```

你的第二个标签框架将是

```
secondLabel.frame=CGRectMake(size.width+width+20,4, 9, 14); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:08:26.113

使用适当的调整`UILabel`框架`constrainedToSize`。

```
CGRect infoRect = self.conditionLabel.frame;
NSString *fileName = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"txt"]; 

NSString *textString = [[NSString alloc] initWithContentsOfFile:fileName encoding:NSUTF8StringEncoding error:nil];
[self.conditionLabel setText:textString];
[textString release];

CGSize defaultSize = CGSizeMake(sectionWidth, 9999.0);
UIFont *defaultFont = kCCOpenSansFont(font, 14.0);

CGSize infoSize = [[self.conditionLabel text] sizeWithFont:defaultFont constrainedToSize:defaultSize lineBreakMode:UILineBreakModeWordWrap];

infoRect.size.height = infoSize.height;
[self.conditionLabel setFrame:infoRect]; 
```

# html - CSS：防止一个div包裹在另一个div下面

> ID：15061689
> 
> 赞同：7
> 
> 时间：2013-02-25T07:03:03.943
> 
> 标签：html, css

如何防止一个 div 包裹在另一个 div 之下？具体来说，我希望第 2 个 div 始终位于第 1 个 div 的右侧，即使调整浏览器宽度以使第 2 个 div 的内容必须换行。

我总是希望 div 并排放置： ![我希望这个 div 总是并排](../Images/c4dbee226df575f62a2a131b2af93cef.png)

并且永远不要看起来像这样，即使调整了浏览器窗口的大小使得第二个 div 的内容必须换行：
![并且永远不要让第二个 div 包裹在第一个 div 之下](../Images/7a7dccae18c2242493581c5015eee126.png)

```
<!DOCTYPE html>
<html lang="en">
  <body>
    <div class="columns">
      <div style="background-color: #990000; width:70px; float: left">
        Pic
      </div>
      <div style="background-color: #00FF00; float: left; " >
      body some interesting large amount of content. some interesting large amount of content.
      </div>    
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T07:07:47.193

```
<div class="columns">
  <div style="background-color: #990000; width:70px; float: left">
      Pic
  </div>
  <div style="background-color: #00FF00; margin-left: 70px;" >
      body some interesting large amount of content. some interesting large amount of content.
  </div>    
</div> 
```

一个例子：http: [//jsfiddle.net/arPzt/](http://jsfiddle.net/arPzt/)

# django - 给锚标记一个 id 不会在 django 中执行视图

> ID：15061690
> 
> 赞同：0
> 
> 时间：2013-02-25T07:03:09.157
> 
> 标签：django

这是我的模板中的一些代码。

```
 <li ><a id="b" href="{% url graph1 "pf_daywise" %}">POWERFACTOR</a>
      <ul>
        <li><a id="c" href="{% url graph1 "pf_daywise" %}" >DAYWISE</a></li>
        <li><a id="d" href="{% url graph1 "pf_monthwise" %}">MONTHWISE</a></li>

     </ul>
  </li> 
```

如果我给锚标签一个 id 它不会执行 href 部分。可以帮助。我实际上是在调用一个视图，其中 graph1 是 url 的名称。

这是我的 url.conf 中的相关行

```
url(r'^graphs/(?P<param>[A-za-z]*)/$','display_graph',name="graph1"), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:04:07.143

As Catherine mentions in the comments, your URL pattern does not match underscores, so "pf_daywise" is not a valid value for `param`. Maybe you meant this:

```
url(r'^graphs/(?P<param>\w*)/$','display_graph',name="graph1"), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:16:36.583

尝试这个：

```
<li><a id="b" href="{% url graph1 'pf_daywise' %}">POWERFACTOR</a>
    <ul>
        <li><a id="c" href="{% url graph1 'pf_daywise' %}">DAYWISE</a></li>
        <li><a id="d" href="{% url graph1 'pf_monthwise' %}">MONTHWISE</a></li>
    </ul>
</li> 
```

在黑暗中拍摄（我必须测试），但我假设“不执行”意味着，当您查看源代码时，您看不到 href 属性，或者它是空白的，同样奇怪.

我敢打赌，其他双引号内的双引号会导致 Django 的标签解析器失效。

如果属实，那将是 Django 解析器中的一个错误。但这完全有可能。

只是添加一个`id`不会导致问题，否则。

# sql - 如何将主值 (PK) 插入相关表 (FK)

> ID：15061696
> 
> 赞同：0
> 
> 时间：2013-02-25T07:03:37.713
> 
> 标签：sql, vb.net, sql-server-2008-r2

我在将 TABLE 的 1 个主值（增量）插入另一个 TABLE（外键）时遇到问题

表1有学号的主键；如果我从表 1 中输入姓氏和名字的值，那么由于增量，学号将自动给出它自己的值，否则如果我从表 2 中输入，我想要表中的学号的值，我将增加甚至增加值如果表 1 为 NULL，则为姓氏和名字

# 表格1

* * *

## (PK)学生_# | 姓氏 | 名

……1…………|…………………………|…… ....b.......

……2…………|…………c…………|…… ....b.......

# 表 2

* * *

## (FK)学生_# | 年级 | 部分

......空......|.......第2年......|...... ...C1 ....

......空......|.......第3年......|...... ...D1 ....

# 需要

* * *

## (FK)学生_# | 年级 | 部分

....................1........|........第 2 年...... ...|.....C1 ..........

..................2........|........第 3 年...... ...|.....D1 ..........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:26:39.910

在我看来，您需要一个在 table2 上具有标识种子的主键以及学生表的外键：

```
(PK/Identity) Table2ID | (FK)Student_# | Year_Level | Section 
```

这样，您可以在将记录插入表 2 时插入 student_#，并且还可以为表 2 中的每一行提供唯一标识符

```
CREATE TABLE Table2
(
 Table2ID INT IDENTITY(1,1) PRIMARY KEY
,Student_# INT NOT NULL FOREIGN KEY REFERENCES Table1(Student_#)
,Year_Level NVARCHAR(255) --Use whatever data type you need
,Section NVARCHAR(255) --Use whatever data type you need
) 
```

我假设您使用的是 sql server，因为您没有在问题中指定。您可能需要针对不同的 RDBMS 更改此查询。

# ios - 限制向设备发送推送通知

> ID：15061701
> 
> 赞同：1
> 
> 时间：2013-02-25T07:04:02.367
> 
> 标签：ios, push-notification

我正在我的应用程序中实现**推送通知**。它工作正常。现在我正在我的开发配置文件上对此进行测试。几次后，我向我的设备发送**推送通知**，服务器停止发送更多**推送通知**。我尝试搜索，但找不到有关限制的任何信息。**我们可以向开发**中的特定设备令牌以及**分发**配置文件发送多少次推送通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:08:25.063

推送通知消息大小为 256 字节或以下您可以发送通知的次数。

# python - Scrapy - 抓取和抓取网站

> ID：15061702
> 
> 赞同：2
> 
> 时间：2013-02-25T07:04:04.390
> 
> 标签：python, scrapy, web-crawler

作为学习使用 Scrapy 的一部分，我曾尝试爬取亚马逊，但在抓取数据时出现问题，

我的代码输出如下：

```
2013-02-25 12:47:21+0530 [scanon] DEBUG: Scraped from <200 http://www.amazon.com/s/ref=sr_pg_2?ie=UTF8&page=2&qid=1361774681&rh=n%3A283155>
    {'link': [u'http://www.amazon.com/ObamaCare-Survival-Guide-Nick-Tate/dp/0893348627/ref=sr_1_13?s=books&ie=UTF8&qid=1361774694&sr=1-13',
              u'http://www.amazon.com/MELT-Method-Breakthrough-Self-Treatment-Eliminate/dp/0062065351/ref=sr_1_14?s=books&ie=UTF8&qid=1361774694&sr=1-14',
              u'http://www.amazon.com/Official-SAT-Study-Guide-2nd/dp/0874478529/ref=sr_1_15?s=books&ie=UTF8&qid=1361774694&sr=1-15',
              u'http://www.amazon.com/Inferno-Robert-Langdon-Dan-Brown/dp/0385537859/ref=sr_1_16?s=books&ie=UTF8&qid=1361774694&sr=1-16',
              u'http://www.amazon.com/Memory-Light-Wheel-Time/dp/0765325950/ref=sr_1_17?s=books&ie=UTF8&qid=1361774694&sr=1-17',
              u'http://www.amazon.com/Jesus-Calling-Enjoying-Peace-Presence/dp/1591451884/ref=sr_1_18?s=books&ie=UTF8&qid=1361774694&sr=1-18',
              u'http://www.amazon.com/Fifty-Shades-Grey-Book-Trilogy/dp/0345803485/ref=sr_1_19?s=books&ie=UTF8&qid=1361774694&sr=1-19',
              u'http://www.amazon.com/Fifty-Shades-Trilogy-Darker-3-/dp/034580404X/ref=sr_1_20?s=books&ie=UTF8&qid=1361774694&sr=1-20',
              u'http://www.amazon.com/Wheat-Belly-Lose-Weight-Health/dp/1609611543/ref=sr_1_21?s=books&ie=UTF8&qid=1361774694&sr=1-21',
              u'http://www.amazon.com/Publication-Manual-American-Psychological-Association/dp/1433805618/ref=sr_1_22?s=books&ie=UTF8&qid=1361774694&sr=1-22',
              u'http://www.amazon.com/One-Only-Ivan-Katherine-Applegate/dp/0061992259/ref=sr_1_23?s=books&ie=UTF8&qid=1361774694&sr=1-23',
              u'http://www.amazon.com/Inquebrantable-Spanish-Jenni-Rivera/dp/1476745420/ref=sr_1_24?s=books&ie=UTF8&qid=1361774694&sr=1-24'],
     'title': [u'ObamaCare Survival Guide',
               u'The Official SAT Study Guide, 2nd edition',
               u'Inferno: A Novel (Robert Langdon)',
               u'A Memory of Light (Wheel of Time)',
               u'Jesus Calling: Enjoying Peace in His Presence',
               u'Fifty Shades of Grey: Book One of the Fifty Shades Trilogy',
               u'Fifty Shades Trilogy: Fifty Shades of Grey, Fifty Shades Darker, Fifty Shades Freed 3-volume Boxed Set',
               u'Wheat Belly: Lose the Wheat, Lose the Weight, and Find Your Path Back to Health',
               u'Publication Manual of the American Psychological Association, 6th Edition',
               u'The One and Only Ivan',
               u'Inquebrantable (Spanish Edition)'],
     'visit_id': '2f4d045a9d6013ef4a7cbc6ed62dc111f6111633',
     'visit_status': 'new'} 
```

但是，我希望像这样捕获输出，

```
2013-02-25 12:47:21+0530 [scanon] DEBUG: Scraped from <200 http://www.amazon.com/s/ref=sr_pg_2?ie=UTF8&page=2&qid=1361774681&rh=n%3A283155>
    {'link': [u'http://www.amazon.com/ObamaCare-Survival-Guide-Nick-Tate/dp/0893348627/ref=sr_1_13?s=books&ie=UTF8&qid=1361774694&sr=1-13'],
     'title': [u'ObamaCare Survival Guide']}

2013-02-25 12:47:21+0530 [scanon] DEBUG: Scraped from <200 http://www.amazon.com/s/ref=sr_pg_2?ie=UTF8&page=2&qid=1361774681&rh=n%3A283155>
    {'link': [u'http://www.amazon.com/Official-SAT-Study-Guide-2nd/dp/0874478529/ref=sr_1_15?s=books&ie=UTF8&qid=1361774694&sr=1-15'],
     'title': [u'The Official SAT Study Guide, 2nd edition']} 
```

我认为这不是scrapy或爬虫的问题，而是编写了FOR循环。

以下是代码，

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from Amaze.items import AmazeItem

class AmazeSpider2(CrawlSpider):
    name = "scanon"
    allowed_domains = ["www.amazon.com"]
    start_urls = ["http://www.amazon.com/s/ref=nb_sb_noss?url=search-alias%3Daps&field-keywords=books"]

    rules = (
        Rule(SgmlLinkExtractor(allow=("ref=sr_pg_*")), callback="parse_items_1", follow= True),
        )

    def parse_items_1(self, response):
        items = []
        print ('*** response:', response.url)
        hxs = HtmlXPathSelector(response)
        titles = hxs.select('//h3')
        for title in titles:
            item = AmazeItem()
            item["title"] = title.select('//a[@class="title"]/text()').extract()
            item["link"] = title.select('//a[@class="title"]/@href').extract()
            print ('**parse-items_1:', item["title"], item["link"])
            items.append(item)
        return items 
```

任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T07:12:19.263

问题出在您的 Xpath 中

```
def parse_items_1(self, response):
        items = []
        print ('*** response:', response.url)
        hxs = HtmlXPathSelector(response)
        titles = hxs.select('//h3')
        for title in titles:
            item = AmazeItem()
            item["title"] = title.select('.//a[@class="title"]/text()').extract()
            item["link"] = title.select('.//a[@class="title"]/@href').extract()
            print ('**parse-items_1:', item["title"], item["link"])
            items.append(item)
        return items 
```

在上面的 Xpaths 中，您需要**`.`**在 xpath 中使用以查看**`title`**其他方式，否则您的 xpath 将查看**整个页面**，因此它将获得匹配项并返回它们，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:41:08.457

顺便说一句 - 你可以在 Scrapy Shell 中测试我们的 Xpath 表达式 - [http://doc.scrapy.org/en/latest/topics/shell.html](http://doc.scrapy.org/en/latest/topics/shell.html)

做得对，它将为您节省数小时的工作和头痛。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:08:01.113

用于`yield`制作生成器并修复您的 xpath 选择器：

```
def parse_items_1(self, response):
    hxs = HtmlXPathSelector(response)
    titles = hxs.select('//h3')

    for title in titles:
        item = AmazeItem()
        item["title"] = title.select('.//a[@class="title"]/text()').extract()
        item["link"] = title.select('.//a[@class="title"]/@href').extract()

        yield item 
```

# python - python 几何序列

> ID：15061704
> 
> 赞同：1
> 
> 时间：2013-02-25T07:04:07.357
> 
> 标签：python

我试图在我的书中做一个问题，但我不知道如何做。问题是，编写函数 geometry() ，它将整数列表作为输入，如果列表中的整数形成几何序列，则返回 True。一个序列 a0,a1,a2,a3,a4,...,an-2,an-1 是一个几何序列，如果比率 a1/a0,a2/a1,a3/a2,a4/a3,..., an-1/an-2 都相等。

```
def geometric(l):
for i in l:
    if i*1==i*0:
        return True
else:
    return False 
```

老实说，我不知道如何开始，而且我完全是空白。任何帮助，将不胜感激。

谢谢！

例如：

```
geometric([2,4,8,16,32,64,128,256])
>>> True

geometric([2,4,6,8])`
>>> False 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T07:31:36.923

这应该有效地处理所有可迭代对象。

```
from itertools import izip, islice, tee

def geometric(obj):
    obj1, obj2 = tee(obj)
    it1, it2 = tee(float(x) / y for x, y in izip(obj1, islice(obj2, 1, None)))
    return all(x == y for x, y in izip(it1, islice(it2, 1, None)))

assert geometric([2,4,8,16,32,64,128,256])
assert not geometric([2,4,6,8]) 
```

查看 itertools - [http://docs.python.org/2/library/itertools.html](http://docs.python.org/2/library/itertools.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:53:02.313

这是我的解决方案。它本质上与 pyrospade 的 itertools 代码相同，但生成器被反汇编。作为奖励，我可以通过避免进行任何除法来坚持纯整数数学（理论上这可能会导致浮点舍入问题）：

```
def geometric(iterable):
    it = iter(iterable)
    try:
        a = next(it)
        b = next(it)
        if a == 0 or b == 0:
            return False
        c = next(it)
        while True:
            if a*c != b*b: # <=> a/b != b/c, but uses only int values
                return False
            a, b, c = b, c, next(it)
    except StopIteration:
        return True 
```

部分测试结果：

```
>>> geometric([2,4,8,16,32])
True
>>> geometric([2,4,6,8,10])
False
>>> geometric([3,6,12,24])
True
>>> geometric(range(1, 1000000000)) # only iterates up to 3 before exiting
False
>>> geometric(1000**n for n in range(1000)) # very big numbers are supported
True
>>> geometric([0,0,0]) # this one will probably break every other code
False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T07:31:25.250

一种简单的方法是这样的：

```
def is_geometric(a):
    r = a[1]/float(a[0])
    return all(a[i]/float(a[i-1]) == r for i in xrange(2,len(a)))

```

基本上，它计算前两者之间的比率，并用于`all`确定生成器的所有成员是否为真。生成器的每个成员都是一个布尔值，表示两个数字之间的比率是否等于前两个数字之间的比率。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T07:14:07.807

Like this

```
def is_geometric(l):
    if len(l) <= 1: # Edge case for small lists
        return True
    ratio = l[1]/float(l[0]) # Calculate ratio
    for i in range(1, len(l)): # Check that all remaining have the same ratio
        if l[i]/float(l[i-1]) != ratio: # Return False if not
            return False
    return True # Return True if all did 
```

And for the more adventurous

```
def is_geometric(l):
    if len(l) <= 1:
        return True
    r = l[1]/float(l[0])
    # Check if all the following ratios for each
    # element divided the previous are equal to r
    # Note that i is 0 to n-1 while e is l[1] to l[n-1]
    return all(True if e/float(l[i]) == r else False for (i, e) in enumerate(l[1:])) 
```

# php - MySQL While 循环不每次都执行插入子句

> ID：15061705
> 
> 赞同：0
> 
> 时间：2013-02-25T07:04:07.880
> 
> 标签：php, mysql, insert, mysqli

我现在遇到的一个简单问题是使用 MySQL 函数。我正在尝试运行一个 MySQL 表并将数据从该表移动到另一个表。一个表是'users'，列是'user_id'。我正在尝试运行一个while循环来遍历表用户中的所有行并在表'new_users'中创建新行。这是我的代码：

```
$sql = "SELECT * FROM users";
$result = $mysqli->query($sql);

while($row = mysqli_fetch_array($result)){
$sql_create_new = "INSERT INTO new_users (user_id) VALUES ('$row[user_id]')";
$result_create_new = $mysqli->query($sql_create_new);
echo $row['user_id']."<br />";
} 
```

它正确地回显了表用户中 user_id 的所有值，所以我知道循环正在运行。但是，当我检查表 new_users 时，它只有一行（第一行）并且实际上并没有添加其他值。我确定我错过了一些简单的东西。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:30:40.923

评论中也提到了这一点，但不能强调简单性的重要性：

```
$mysqli->query('INSERT INTO new_users (user_id) SELECT user_id FROM users'); 
```

要防止与目标表中已有的任何记录发生冲突，请使用`INSERT IGNORE INTO`或`REPLACE INTO`。

否则，您应该正确使用准备好的语句：

```
$create_new_stmt = $mysqli->prepare('INSERT INTO new_users (user_id) VALUES (?)');

while ($row = $result->fetch_array()) {
    $create_new_stmt->bind_param('i', $row['user_id']);
    $create_new_stmt->execute();
    echo $row['user_id']."<br />";
} 
```

# android - 无法实例化以下类

> ID：15061706
> 
> 赞同：2
> 
> 时间：2013-02-25T07:04:23.923
> 
> 标签：android, android-layout, android-widget, android-xml

我是android开发的新手，我正在尝试导入一个lib。但我的 XML 文件中出现以下错误：

无法实例化以下类：

```
- com.squareup.timessquare.CalendarPickerView 
```

这是我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.squareup.timessquare.CalendarPickerView
    android:id="@+id/calendar_view"
    android:layout_width="280dp"
    android:layout_height="75dp"
    />
</LinearLayout> 
```

有人可以帮忙吗？

# sql - 如何导出 SQL Server 2008 数据库？

> ID：15061712
> 
> 赞同：4
> 
> 时间：2013-02-25T07:04:51.930
> 
> 标签：sql, sql-server-2008-express

是否可以导出我在 SQL Server 2008 Express 中创建的数据库？

我问这个是因为我需要我的队友能够在同一个上工作。我知道你可以为数据库生成一个脚本，但是当我们尝试运行它时它会给出一堆错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T07:08:53.347

您可以右键单击 dbase 然后 Task->Backup
这将生成一个 .bak 文件，您可以 Task->Restore to a new database

您可以参考这里 [http://msdn.microsoft.com/en-us//library/ms187048.aspx](http://msdn.microsoft.com/en-us//library/ms187048.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T20:47:10.660

是的。您可以使用这些步骤导出 sqlserver 数据库。

1.  右键单击您的数据库并将鼠标悬停在任务上，您会看到另一个下拉列表，选择备份。

2.  你有一个这样的弹出窗口。 ![在此处输入图像描述](../Images/72f3a6ff3c64f9631a6e24d4990353f1.png)

3.  单击确定按钮。

4.  导航到本地 PC 上的路径（C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\Backup\your database）

5.  你得到了导出的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:07:06.433

将其备份到磁盘上，将文件副本提供给您的朋友并告诉他从该副本恢复数据库。

有关更多帮助，请参阅[本文](http://msdn.microsoft.com/en-us/library/ms190436.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T07:08:47.310

是的，可以从 sql server 2008 express 导出数据库。创建备份文件并将其导出。

# android - for循环在异步任务中的Doinbackground中不递增

> ID：15061715
> 
> 赞同：1
> 
> 时间：2013-02-25T07:05:13.423
> 
> 标签：android, android-asynctask, android-implicit-intent

我使用 for 循环从 doInBackground 中的数组列表中读取图像 url，但循环不会增加只有第一个 url 正在加载和保存图像。这是代码：

```
class DownloadImageTask extends AsyncTask<Void, Void, Bitmap> {
    // This class definition states that DownloadImageTask will take String
    // parameters, publish Integer progress updates, and return a Bitmap
    @SuppressWarnings("unused")
    protected Bitmap doInBackground(Void... paths) {
        //URL url;
        try {
              for(int j=0; j<List.size();j++)
            {
                     reviewImageLink =List.get(j).get(TAG_Image);
                     URL     url = new URL(reviewImageLink);
                    // URL reviewImageURL;
                    String name = reviewImageLink.substring(reviewImageLink .lastIndexOf("/") + 1,reviewImageLink.length());
                        //try {

                            if (!hasExternalStoragePublicPicture(name)) {
                                isImage = false;
                                //new DownloadImageTask().execute();
                                Log.v("log_tag", "if");
                                isImage = true;
                                File sdImageMainDirectory = new File(Environment.getExternalStorageDirectory(), getResources().getString(R.string.directory));
                            //if(!sdImageMainDirectory.exists()){
                                sdImageMainDirectory.mkdirs();
                                File file = new File(sdImageMainDirectory, name);
                                Log.v("log_tag", "Directory created");}
                    //}
                    //  catch (MalformedURLException e) {
                        //  Log.v(TAG, e.toString());   }
              //  }

           // }//try 
           // catch (Exception e) {
               //     e.printStackTrace();}
            //url = new URL(List.get(j).get(TAG_Image));
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            int length = connection.getContentLength();
            InputStream is = (InputStream) url.getContent();
            byte[] imageData = new byte[length];
            int buffersize = (int) Math.ceil(length / (double) 100);
            int downloaded = 0;
            int read;
            while (downloaded < length) {
                if (length < buffersize) {
                    read = is.read(imageData, downloaded, length);
                } else if ((length - downloaded) <= buffersize) {
                    read = is.read(imageData, downloaded, length- downloaded);
                } else {
                    read = is.read(imageData, downloaded, buffersize);
                }
                downloaded += read;
                setProgress((downloaded * 100) / length);
            }
            Bitmap bitmap = BitmapFactory.decodeByteArray(imageData, 0,length);
            if (bitmap != null) {
                Log.i(TAG, "Bitmap created");
            } else {
                Log.i(TAG, "Bitmap not created");
            }
            is.close();
            return bitmap;

        }
        }catch (MalformedURLException e) {
            Log.e(TAG, "Malformed exception: " + e.toString());
        } catch (IOException e) {
            Log.e(TAG, "IOException: " + e.toString());
        } catch (Exception e) {
            Log.e(TAG, "Exception: " + e.toString());
        }
        return null;

    }

    protected void onPostExecute(Bitmap result) {
        String name = reviewImageLink.substring(reviewImageLink.lastIndexOf("/") + 1,reviewImageLink.length());
        if (result != null) {
            hasExternalStoragePublicPicture(name);
            saveToSDCard(result, name);
            isImage = true;

        } else {
            isImage = false;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:11:06.690

`List`是一个接口，你不能像这样使用`List.size()`。定义一个List子类型，比如ArrayList之类的。for循环没有错。例如：

```
List<Integer> li = new ArrayList<Integer>();
li.add(10);
li.add(20)';
for(int i = 0; i <= li.size(); ++i) {
//your stuff
} 
```

# php - 并行 HTML 行

> ID：15061718
> 
> 赞同：0
> 
> 时间：2013-02-25T07:05:25.567
> 
> 标签：php, html

我有一个超过 1000 行的 HTML 表。现在我想以并行方式显示这些记录。左侧30行，右侧30行

```
1  xyz        120          00:10:01  31  xyz        120          00:10:01
1  xyz        120          00:10:01  32  mxy        20           00:10:01
2  mxy        20           00:10:01  .   .          .            ........ 
.   .         .            ........  .   .          .            ........ 
.   .         .            ........  .   .          .            .........   
.   .         .            ........  .   .          .            .........
30  mld       2            00:05:01  60  mld        2            00:05:01 
```

我要生成 PDF，所以我想每页显示 60 条记录。30 左和 30 右。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:15:52.810

并排显示两个表格可能是最简单的（将每个表格的宽度设置为页面的一半左右，并将一个向左或向右浮动）。

然后你的循环可以很简单：

```
$i = -1;
$totalRows = count($rows);
$halfRows = round($numRows / 2);

//construct $headerRow HTML here

foreach ($rows as $row) {
    $i++;
    if ($i == 0 || $i == $halfRows) {
        echo '<table class="'. ($i==0 ? 'floatLeft': '').'">';
        echo $headerRow;
    }

    //Code to output column values here

    if ($i == ($halfRows - 1)) {
        echo '</table>';
    }
}
echo '</table>'; 
```

# python - 复数和分形

> ID：15061721
> 
> 赞同：2
> 
> 时间：2013-02-25T07:05:42.043
> 
> 标签：python, c, complex-numbers, complextype, fractals

我正在尝试将此处的代码：[http](http://code.activestate.com/recipes/577166-newton-fractals/) ://code.activestate.com/recipes/577166-newton-fractals/ 调整为 C 并且遇到了一些麻烦。我正在使用 C99 的复杂类型。

我基本上已经尝试了一些没有奏效的不同方法。在每个像素上，它每次都会一直达到最大迭代，因此图像以纯色出现。

关于类型在 C 中的工作方式，我有什么根本上的错误吗，看起来它应该可以工作，我非常准确地重建了算法。

```
 //newt.c

#include <stdio.h>
#include <stdlib.h> 
#include <complex.h>
#include <float.h>
#include <math.h> 

complex f(complex z); 

const int WIDTH = 512, HEIGHT = 512; 

const double SCALED_X_MAX = 1.0;
const double SCALED_X_MIN = -1.0;
const double SCALED_Y_MAX = 1.0;
const double SCALED_Y_MIN = -1.0;

const int MAX_ITERATIONS = 20;
const int EPSILON = 1e-3;

int main(int argc, char **argv) { 
    const double SCALED_WIDTH = SCALED_X_MAX - SCALED_X_MIN ;
    const double SCALED_HEIGHT = SCALED_Y_MAX - SCALED_Y_MIN ; 

    FILE * image = fopen("newton.ppm", "w") ; 
    fprintf(image, "P3\n");
    fprintf(image, "%d %d\n" , WIDTH , HEIGHT ) ; 
    fprintf(image, "%d\n", 255) ; 
    for ( int y = 0 ; y < HEIGHT ; ++y) { 
        double zy = y * (SCALED_HEIGHT)/(HEIGHT-1) + SCALED_Y_MIN;
        for ( int x = 0 ; x < WIDTH ; ++x ) { 
            double zx = x * (SCALED_WIDTH)/(WIDTH-1) + SCALED_X_MIN; 
            complex z = zx + zy*I;
            int iteration = 0;
            while(iteration < MAX_ITERATIONS ) { 
//                complex h=sqrt(DBL_EPSILON) + sqrt(DBL_EPSILON)*I;
                double h=1e-6;
/*
                complex zph = z + h;
                complex dz = zph - z;
                complex slope = (f(zph) - f(z))/dz; 
*/              
                complex volatile dz = (f(z + (h+h*I))  - f(z)) / (h+I*h) ;
                complex z0 = z - f(z) / dz; 
                //fprintf(stdout,"%f \n", cabs(z0 - z ));
                if ( cabs(z0 - z) < EPSILON){
                    break; 
                }
                z = z0;
                iteration++;
            }
            if (iteration != MAX_ITERATIONS) fprintf(stdout, "%d " , iteration ); 
            fprintf(image,"%3d %3d %3d ", iteration % 4 * 64 , 
                                       iteration % 8 * 32 , 
                                       iteration % 16 * 16);
        }
       fprintf(image, "\n") ; 
    }
    fclose(image) ; 

    exit(0); 

}
complex f(complex z ) { 
    return cpow(z,3)-1.0 ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:33:33.917

在检查了复杂的数学并没有看到任何问题后，我注意到您的错误仅仅是由于行中的整数除法

```
zy = y * (SCALED_HEIGHT)/(HEIGHT-1) + SCALED_Y_MIN; 
```

对于 zx 也是如此。因为 (SCALED_HEIGHT) 和 (HEIGHT-1) 都是整数，所以这不会为您提供所需的浮点结果。尝试使用：

```
zy = y * SCALED_HEIGHT * 1.0/(HEIGHT-1) + SCALED_Y_MIN; 
```

对于 zx 也是如此。

**编辑：**对不起，上面是错误的。您的 SCALED_HEIGHT 实际上是双倍的，因此上述内容实际上还可以。真正的问题就在这条线上

```
const int EPSILON = 1e-3; 
```

这实际上总是返回零，因为它是一个整数。您需要将 EPSILON 设为浮点类型。

# postgresql - 将 sql 转储导入 postgres

> ID：15061726
> 
> 赞同：0
> 
> 时间：2013-02-25T07:06:08.440
> 
> 标签：postgresql

当我在 ubuntu 终端上运行这个命令时：

```
psql -h localhost -U arwinder --password -f sh_cake_db_14_02_13.sql -d new_db 
```

其中“arwinder”是用户名，“sh_cake_db_14_02_13.sql”是 sql 转储，“new_db”是数据库。然后在导入时显示以下错误，并且在 postgresql 数据库中我没有所有表。这些是错误：

```
invalid command \N
invalid command \
invalid command \
ERROR:  syntax error at or near "27"
LINE 1: 27 Balaji Angan 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:20:49.610

有一个转换工具[https://github.com/lanyrd/mysql-postgresql-converter](https://github.com/lanyrd/mysql-postgresql-converter)，或者您可以参考 postgressql 的 wiki [http://wiki.postgresql.org/wiki/Converting_from_other_Databases_to_PostgreSQL](http://wiki.postgresql.org/wiki/Converting_from_other_Databases_to_PostgreSQL)，请参阅 MySQL 部分并检查您的数据类型.

# zend-framework - 为什么我在 Zend Framework 中使用 PHPUnit 时 require_once() 会失败？

> ID：15061730
> 
> 赞同：0
> 
> 时间：2013-02-25T07:06:32.350
> 
> 标签：zend-framework, phpunit

我成功安装了 PHPUnit，现在我正试图让它与 Zend Framework 1.x 一起工作。我到处检查了不同的方法，但它们都不适合我，因为每次我在“测试”文件夹中执行 PHPUnit 命令时，都会收到以下错误：

> 警告：require_once(Zend/xxxxxxxxx.php)：打开流失败：第 12 行的 C:\wamp\www\square\tests\TestHelper.php 中没有这样的文件或目录"

其中 xxxxxxx.php 是 Application.php、Autoloader.php 等。

所以我得出的结论是，PHPUnit 或 Bootstrap 没有找到我的 Zend 库。很奇怪，因为我在生产|开发人员环境中运行项目时没有任何问题（在 php.ini 中添加了 Zend 的路由）。

**phpunit.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit bootstrap="./TestHelper.php">
    <testsuite>
        <directory>./</directory>
    </testsuite>

    <filter>
        <whitelist>
            <directory suffix=".php">../application/</directory>
            <exclude>
                <directory suffix=".phtml">../application/</directory>
            </exclude>
        </whitelist>
    </filter>
    <logging>
        <log type="coverage-html" target="./log/report" charset="UTF-8"
            yui="true" highlight="true"
            lowUpperBound="50" highLowerBound="80"/>
        <log type="testdox-html" target="./log/testdox.html" />
    </logging>
</phpunit> 
```

**测试助手.php**

```
<?php

// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'testing'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

/**
 * Register autoloader
 */
require_once 'Zend/Loader/Autoloader.php';
$autoloader = Zend_Loader_Autoloader::getInstance();

require_once APPLICATION_PATH . '/../tests/application/ControllerTestCase.php'; 
```

# sql - 排除连接中的重复字段

> ID：15061733
> 
> 赞同：7
> 
> 时间：2013-02-25T07:06:37.433
> 
> 标签：sql, postgresql, join, left-join

我有一个正在分析的数据集。事实证明，它可以很容易地通过人口统计和社区数据来丰富，从而极大地改进分析结果。

为了做到这一点，我在进行分析之前加入了人口统计和社区数据。我需要从我的核心样本集中排除一些字段，所以我的联接看起来像这样：

```
select sampledata.c1, 
       sampledata.c2, 
       demographics.*, 
       community.* 
from sample data 
    join demographics using (zip) 
    join community using (fips) 
```

这使我的分析引擎无法处理输出中的多个 zip 或 fips 列。我无法手动指定每个字段 - 扩充表最终会产生数百列。

我可以选择 *，但是我会从我的样本数据中获得我不想要的所有列。

如何在不复制字段的情况下加入我的扩充数据，同时仍然从我的示例表中选择我想要的列？

我的一个想法是，如果 postgres（我的数据库）可以完全限定输出中的每一列（如 sample.c1、人口统计.c1 等），我会对此非常满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:36:51.853

SQL 中没有列排除语法，只有列包含语法（通过所有列的 * 运算符，或显式列出列名）。

## 仅生成您想要的列的列表

但是，您可以使用模式表和数据库的一些内置函数生成具有数百个列名的 SQL 语句，减去您不想要的少数重复列。

```
SELECT
    'SELECT sampledata.c1, sampledata.c2, ' || ARRAY_TO_STRING(ARRAY(
        SELECT 'demographics' || '.' || column_name
        FROM information_schema.columns
        WHERE table_name = 'demographics' 
        AND column_name NOT IN ('zip')
        UNION ALL
        SELECT 'community' || '.' || column_name
        FROM information_schema.columns
        WHERE table_name = 'community' 
        AND column_name NOT IN ('fips')
    ), ',') || ' FROM sampledata JOIN demographics USING (zip) JOIN community USING (fips)'
AS statement 
```

这只会打印出语句，不会执行它。然后你只需复制结果并运行它。

如果您想一次性动态生成和运行语句，那么您可以阅读[PostgreSQL 文档](http://www.postgresql.org/docs/9.2/static/ecpg-dynamic.html)中的如何运行动态 SQL 。

## 在列名前加上表名

或者，这会生成一个包含所有列的选择列表，包括具有重复数据的列，然后将它们别名为包括每列的表名。

```
SELECT
    'SELECT ' || ARRAY_TO_STRING(ARRAY(
        SELECT table_name || '.' || column_name || ' AS ' || table_name || '_' || column_name
        FROM information_schema.columns
        WHERE table_name in ('sampledata', 'demographics', 'community')
    ), ',') || ' FROM sampledata JOIN demographics USING (zip) JOIN community USING (fips)'
AS statement 
```

同样，这只会生成语句。如果你想动态生成和运行语句，那么你需要为你的数据库复习动态 SQL 执行，否则只需复制并运行结果。

如果您真的想在列别名中使用点分隔符，那么您必须使用双引号别名，例如`SELECT table_name || '.' || column_name || ' AS "' || table_name || '.' || column_name || '"'`. 但是，双引号别名可能会导致额外的复杂性（区分大小写等）；因此，我使用下划线字符将表名与别名中的列名分开，然后可以将别名视为常规列名。

# javascript - 突出显示图像和文本

> ID：15061734
> 
> 赞同：0
> 
> 时间：2013-02-25T07:06:38.107
> 
> 标签：javascript, jquery, html, css, web-applications

在下面的示例中，我需要显示，当鼠标悬停在图像或文本上时，图像和文本会悬停。我已经完成了第一个产品的开发，但我也需要它来开发其他产品。我如何实现这一目标？

悬停应该是单独的，而不是为每个元素提供单独的 id。

这是示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 4.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>

    <link rel="stylesheet" href="Slider.css">
    <link rel="stylesheet" href="a.css">
        <script type="text/javascript" language="javascript" src="jquery-1.8.2.min.js"></script>
        <script type="text/javascript" language="javascript" src="jquery.carouFredSel-6.2.0-packed.js"></script>
        <script type="text/javascript" language="javascript" src="helper-plugins/jquery.mousewheel.min.js"></script>
        <script type="text/javascript" language="javascript" src="helper-plugins/jquery.touchSwipe.min.js"></script>
        <script type="text/javascript" language="javascript" src="helper-plugins/jquery.transit.min.js"></script>
        <script type="text/javascript" language="javascript" src="helper-plugins/jquery.ba-throttle-debounce.min.js"></script>

        <script type="text/javascript" language="javascript">
            $(function() {

                //  Basic carousel, no options
                $('#foo0').carouFredSel();

                //  Basic carousel + timer, using CSS-transitions
                $('#foo1').carouFredSel({
                    auto: {
                        pauseOnHover: 'resume',
                        progress: '#timer1'
                    }
                }, {
                    transition: true
                });

                //  Scrolled by user interaction
                $('#foo2').carouFredSel({
                    auto: false,
                    prev: '#prev2',
                    next: '#next2',
                    pagination: "#pager2",
                    mousewheel: true,
                    swipe: {
                        onMouse: true,
                        onTouch: true
                    }
                });

                //  Variable number of visible items with variable sizes
                $('#foo3').carouFredSel({
                    width: 360,
                    height: 'auto',
                    prev: '#prev3',
                    next: '#next3',
                    auto: false
                });

                //  Responsive layout, resizing the items
                $('#foo4').carouFredSel({
                    responsive: true,
                    width: '100%',
                    scroll: 2,
                    items: {
                        width: 400,
                    //  height: '30%',  //  optionally resize item-height
                        visible: {
                            min: 2,
                            max: 6
                        }
                    }
                });

                //  Fuild layout, centering the items
                $('#foo5').carouFredSel({
                    width: '100%',
                    scroll: 2
                });

            });
        </script>
<script language="javascript">
function hightlight() 
{

    document.getElementById("textspan").style.color = "blue";
    document.getElementById("ul").style.border = "1.5px solid black";
    //document.getElementById("textspan").setStyle("color","blue");
    //document.getElementById("ul").setStyle("border","1px solid blue");
}
function removehightlight() 
{
    document.getElementById("textspan").style.color = "black";
    document.getElementById("ul").style.border = "1px solid #999";
}
</script>

<style type="text/css">
<!--
.style3 {color: #000000}
-->
</style>
</head>
    <body>

                <table id="Main" >
  <tr>
<td class="tb 1 clearfix"><a id="prev2" class="button" href="a.css"></a></td>

<td id="tb2" class="list_carousel">
                <div id="foo2">
                    <table id="product"><tr><td id="picbox"><div id="ul" onmouseover="hightlight()" onmouseout="removehightlight()"> <img src="Images/Laptop.JPG" alt="picture"></div></td></tr><tr><td onmouseover="hightlight()" onmouseout="removehightlight()"><a class="style1" href="http://etrege.com/ebay_new/index.php"><span class="style3" id="textspan" >This is a product</span></a></td>
                    </tr><tr><td>&nbsp;</td></tr><tr><td>&nbsp;</td></tr><tr><td>&nbsp;</td></tr><tr>
  <td>&nbsp;</td>
</tr></table>
<table id="product"><tr><td id="picbox"><div id="ul" onmouseover="hightlight()" onmouseout="removehightlight()"> <img src="Images/Handbags1.jpg" alt="picture"></div></td></tr><tr><td onmouseover="hightlight()" onmouseout="removehightlight()"><a class="style1" href="http://etrege.com/ebay_new/index.php"><span class="style3" id="textspan" >This is a product</span></a></td>
                    </tr><tr><td>&nbsp;</td></tr><tr><td>&nbsp;</td></tr><tr><td>&nbsp;</td></tr><tr>
  <td>&nbsp;</td>
</tr></table>
<table id="product"><tr><td id="picbox"><div id="ul" onmouseover="hightlight()" onmouseout="removehightlight()"> <img src="Images/Wafflemaker.jpg" alt="picture"></div></td></tr><tr><td onmouseover="hightlight()" onmouseout="removehightlight()"><a class="style1" href="http://etrege.com/ebay_new/index.php"><span class="style3" id="textspan" >This is a product</span></a></td>
                    </tr><tr><td>&nbsp;</td></tr><tr><td>&nbsp;</td></tr><tr><td>&nbsp;</td></tr><tr>
  <td>&nbsp;</td>
</tr></table>
<table id="product"><tr><td id="picbox"><div id="ul" onmouseover="hightlight()" onmouseout="removehightlight()"> <img src="Images/camera.jpg" alt="picture"></div></td></tr><tr><td onmouseover="hightlight()" onmouseout="removehightlight()"><a class="style1" href="http://etrege.com/ebay_new/index.php"><span class="style3" id="textspan" >This is a product</span></a></td>
                    </tr><tr><td>&nbsp;</td></tr><tr><td>&nbsp;</td></tr><tr><td>&nbsp;</td></tr><tr>
  <td>&nbsp;</td>
</tr></table>
<table id="product"><tr><td id="picbox"><div id="ul" onmouseover="hightlight()" onmouseout="removehightlight()"> <img src="Images/Laptop.JPG" alt="picture"></div></td></tr><tr><td onmouseover="hightlight()" onmouseout="removehightlight()"><a class="style1" href="http://etrege.com/ebay_new/index.php"><span class="style3" id="textspan" >This is a product</span></a></td>
                    </tr><tr><td>&nbsp;</td></tr><tr><td>&nbsp;</td></tr><tr><td>&nbsp;</td></tr><tr>
  <td>&nbsp;</td>
</tr></table>
                </div></td>
<td id="tb3" class="clearfix"><a id="next2" class="button" href="a.css"></a></td>
  </tr>
</table>

        <br />
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:21:00.890

只是一个建议...尝试将图像放在超链接`a`标签内。然后，您可以为链接设置一些 CSS 类名称，`class="imageLink"`例如 '。

之后，如果您为链接和图像编写悬停效果，则在该类中，您可以过滤掉该类中的图像。这是示例...

```
.imageLink a:hover
{
   ... link hover effect ...
}
.imageLink img:hover
{
   ... image hover effect ....
} 
```

我对此并不完全确定。但是，我在其他地方用这种技术也达到了类似的效果。

# wireshark - wireshark - tcp_dissect_pdus() 有时不起作用

> ID：15061737
> 
> 赞同：0
> 
> 时间：2013-02-25T07:06:43.857
> 
> 标签：wireshark, wireshark-dissector

我写了一个名为 PLUGIN 的 wireshark 解剖器。

现在，当我测试它时，由于某种原因，可以在 Wireshark 上看到一个 X 类型的数据包作为 PLUGIN（就像它应该的那样），然后其他一些相同类型的 X 数据包不能被视为 PLUGIN。

其他数据包可以在 .pcap 中找到`[TCP segment of a reassembled PDU]`

问题是：为什么 WireShark 不像 X 类型的第一个数据包那样剖析 X 类型的其他数据包并将其显示为 PLUGIN ？

为什么解剖只在第一次起作用？

我使用函数来组装切碎的数据包片段：

```
tcp_dissect_pdus()
get_PLUGIN_message_len() 
```

如“9.4.2\. 如何重新组装拆分的 TCP 数据包”中所述

在“ `http://www.wireshark.org/docs/wsdg_html_chunked/ChDissectReassemble.html#TcpDissectPdus`”

**这是解剖的功能：** （FRAME_HEADER_LEN = 8）

```
static void
dissect_PROTOC(tvbuff_t *tvb, packet_info *pinfo, proto_tree *tree)
{
    //Reassembling TCP fragments
    tcp_dissect_pdus(tvb, pinfo, tree, TRUE, FRAME_HEADER_LEN,
                     get_PROTOC_message_len, dissect_PROTOC_message);

}

static guint get_PROTOC_message_len(packet_info *pinfo, tvbuff_t *tvb, int offset)
{
    /* the packet's size is "length" + 4bytes of TYPESIZE + 4bytes of LENGTHSIZE + 256bytes of CONTEXTIDSIZE */
    return (guint)(tvb_get_ntohl(tvb, offset + 4) + CONTEXT_ID_SIZE + TYPE_SIZE + LENGTH_SIZE); /* e.g. length is at offset 4 */
}

static void dissect_PROTOC_message(tvbuff_t *tvb, packet_info *pinfo, proto_tree *tree)
{
    /* my dissecting code */
    guint32 packet_type = tvb_get_ntohl(tvb, 0);

    col_set_str(pinfo->cinfo, COL_PROTOCOL, "PROTOC");
    /* Clear out stuff in the info column */
    col_clear(pinfo->cinfo,COL_INFO);
    col_add_fstr(pinfo->cinfo, COL_INFO, "%d > %d [%s]",pinfo->srcport, pinfo->destport,
             val_to_str(packet_type, packettypenames, "Unknown (0x%02x)"));

    if (tree) { /* we are being asked for details */
        proto_item *ti              = NULL;
        proto_tree *PROTOC_tree         = NULL;
        proto_item *PROTOC_data         = NULL;
        proto_tree *PROTOC_data_tree    = NULL;
        guint32 type    = 0;
        guint32 length  = 0;
        gint offset     = 0;

        ti = proto_tree_add_item(tree, proto_PROTOC, tvb, 0, -1, ENC_NA);
        proto_item_append_text(ti, ", Type: %s",
            val_to_str(packet_type, packettypenames, "Unknown (0x%02x)"));
        PROTOC_tree = proto_item_add_subtree(ti, ett_PROTOC);

        //getting type
        type = tvb_get_ntohl(tvb, offset);
        proto_tree_add_item(PROTOC_tree, hf_PROTOC_pdu_type, tvb, 0, TYPE_SIZE, ENC_BIG_ENDIAN);
        offset += TYPE_SIZE;

        //getting length for the data length
        length = tvb_get_ntohl(tvb, offset);
        proto_tree_add_item(PROTOC_tree, hf_PROTOC_len, tvb, offset, LENGTH_SIZE, ENC_BIG_ENDIAN);
        offset += LENGTH_SIZE;
        proto_tree_add_item(PROTOC_tree, hf_PROTOC_contextid, tvb, offset, CONTEXT_ID_SIZE, ENC_BIG_ENDIAN);
        offset += CONTEXT_ID_SIZE;
        PROTOC_data = proto_tree_add_item(PROTOC_tree, hf_PROTOC_data, tvb, offset, length, FALSE);
        PROTOC_data_tree = proto_item_add_subtree(PROTOC_data, ett_PROTOC_data);
        offset += length;

    }
} 
```

更多信息：

1.  我在一些十六进制编辑器上打开了file.pcap，我可以看到wireshark没有解析我的数据包......

2.  在wireshark里面我可以找到一个wireshark没有解析的数据包，信息是：“[TCP segment of a reassembled PDU]”，但它没有说它属于哪个重组数据包，我找不到它任何地方...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:53:30.097

我推测您计算的长度与现实不符。如果wireshark认为它没有完成PDU所需的所有帧，那么我猜它可能不会调用`dissect_PROTOC_message()`

您可以尝试打印计算出的长度，然后验证 pcap 文件是否包含这么多帧：

```
static guint get_PROTOC_message_len(packet_info *pinfo, tvbuff_t *tvb, int offset)
{
    /* the packet's size is "length" + 4bytes of TYPESIZE + 4bytes of LENGTHSIZE + 256bytes of CONTEXTIDSIZE */
    guint len = (guint)(tvb_get_ntohl(tvb, offset + 4) + CONTEXT_ID_SIZE + TYPE_SIZE + LENGTH_SIZE); /* e.g. length is at offset 4 */
    g_warning("frame=%d PDU len=%d", pinfo->fd->num, len);
    return len;
} 
```

# java - 在 NetBeans 中向我的项目添加新的类文件

> ID：15061748
> 
> 赞同：0
> 
> 时间：2013-02-25T07:07:43.413
> 
> 标签：java, netbeans

我创建了一个用于绘制报告的 GUI：

图形用户界面：

```
package aatmPackage;

import java.awt.Color;
import java.awt.Shape;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYItemRenderer;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.chart.title.TextTitle;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

import org.jfree.util.ShapeUtilities;

public class GuiAATM extends javax.swing.JFrame {

...
private void reportButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             

report Report =  new report();

setReportLog("Report Generated Successfully\n");
}    
} 
```

我创建了另一个项目并对其进行了测试，它可以很好地生成报告。现在，当我将该类添加到我的 GuiAATM 项目时，（用户单击报告按钮时应该生成报告）我收到以下错误：

```
log4j:WARN Parsing warning 2 and column 38
log4j:WARN URI was not reported to parser for entity [dtd]
log4j:WARN Parsing warning 2 and column 38
log4j:WARN missing system ID, using log4j.dtd
log4j:ERROR Could not parse url [jar:file:/D:/Glaswegian/Java/DynamicCharts/dynamicreports-3.1.0-project-with-dependencies%20(1)/dynamicreports-3.1.0/dist/dynamicreports-examples-3.1.0-sources.jar!/log4j.xml].
gnu.xml.dom.DomEx: The operation violates XML Namespaces.
More Information: xmlns is reserved
Node Name: #document
    at gnu.xml.dom.DomDocument.createAttributeNS(DomDocument.java:589)
    at gnu.xml.dom.DomDocument.createAttribute(DomDocument.java:561)
    at gnu.xml.dom.DomDocument.defaultAttributes(DomDocument.java:456)
    at gnu.xml.dom.DomDocument.createElementNS(DomDocument.java:440)
    at gnu.xml.pipeline.DomConsumer$Handler.startElement(DomConsumer.java:602)
    at gnu.xml.dom.Consumer$Backdoor.startElement(Consumer.java:203)
    at gnu.xml.pipeline.EventFilter.startElement(EventFilter.java:570)
    at gnu.xml.pipeline.ValidationConsumer.startElement(ValidationConsumer.java:1177)
    at gnu.xml.aelfred2.SAXDriver.startElement(SAXDriver.java:836)
    at gnu.xml.aelfred2.XmlParser.parseElement(XmlParser.java:1037)
    at gnu.xml.aelfred2.XmlParser.parseDocument(XmlParser.java:416)
    at gnu.xml.aelfred2.XmlParser.doParse(XmlParser.java:167)
    at gnu.xml.aelfred2.SAXDriver.parse(SAXDriver.java:320)
    at gnu.xml.aelfred2.XmlReader.parse(XmlReader.java:294)
    at gnu.xml.dom.JAXPFactory$JAXPBuilder.parse(JAXPFactory.java:186)
    at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:177)
    at org.apache.log4j.xml.DOMConfigurator$2.parse(DOMConfigurator.java:612)
    at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:711)
    at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:618)
    at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:470)
    at org.apache.log4j.LogManager.<clinit>(LogManager.java:122)
    at org.apache.log4j.Logger.getLogger(Logger.java:104)
    at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:289)
    at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:109)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.apache.commons.logging.impl.LogFactoryImpl.createLogFromClass(LogFactoryImpl.java:1116)
    at org.apache.commons.logging.impl.LogFactoryImpl.discoverLogImplementation(LogFactoryImpl.java:914)
    at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:604)
    at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:336)
    at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:310)
    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:685)
    at net.sf.dynamicreports.report.defaults.Defaults.<clinit>(Defaults.java:42)
    at net.sf.dynamicreports.design.transformation.TemplateTransform.getPageHeight(TemplateTransform.java:663)
    at net.sf.dynamicreports.design.transformation.PageTransform.transform(PageTransform.java:44)
    at net.sf.dynamicreports.design.base.DRDesignReport.transform(DRDesignReport.java:132)
    at net.sf.dynamicreports.design.base.DRDesignReport.<init>(DRDesignReport.java:107)
    at net.sf.dynamicreports.design.base.DRDesignReport.<init>(DRDesignReport.java:99)
    at net.sf.dynamicreports.jasper.builder.JasperReportBuilder.toJasperReportDesign(JasperReportBuilder.java:260)
    at net.sf.dynamicreports.jasper.builder.JasperReportBuilder.getJasperParameters(JasperReportBuilder.java:287)
    at net.sf.dynamicreports.jasper.builder.JasperReportBuilder.toJasperPrint(JasperReportBuilder.java:298)
    at net.sf.dynamicreports.jasper.builder.JasperReportBuilder.show(JasperReportBuilder.java:327)
    at aatmPackage.report.build(report.java:70)
    at aatmPackage.report.<init>(report.java:26)
    at aatmPackage.GuiAATM.reportButtonActionPerformed(GuiAATM.java:1214)
    at aatmPackage.GuiAATM.access$400(GuiAATM.java:34)
    at aatmPackage.GuiAATM$5.actionPerformed(GuiAATM.java:968)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
log4j:WARN No appenders could be found for logger (net.sf.jasperreports.extensions.ExtensionsEnvironment).
log4j:WARN Please initialize the log4j system properly.
Exception in thread "AWT-EventQueue-0" java.lang.AbstractMethodError: gnu.xml.dom.DomElement.getTextContent()Ljava/lang/String;
    at net.sf.jasperreports.engine.fonts.SimpleFontExtensionHelper.parseExportFonts(SimpleFontExtensionHelper.java:317)
    at net.sf.jasperreports.engine.fonts.SimpleFontExtensionHelper.parseFontFamily(SimpleFontExtensionHelper.java:285)
    at net.sf.jasperreports.engine.fonts.SimpleFontExtensionHelper.parseFontFamilies(SimpleFontExtensionHelper.java:232)
    at net.sf.jasperreports.engine.fonts.SimpleFontExtensionHelper.loadFontFamilies(SimpleFontExtensionHelper.java:193)
    at net.sf.jasperreports.engine.fonts.SimpleFontExtensionHelper.loadFontFamilies(SimpleFontExtensionHelper.java:162)
    at net.sf.jasperreports.engine.fonts.FontExtensionsRegistry.getExtensions(FontExtensionsRegistry.java:56)
    at net.sf.jasperreports.extensions.DefaultExtensionsRegistry.getExtensions(DefaultExtensionsRegistry.java:110)
    at net.sf.jasperreports.engine.util.JRStyledTextParser.<clinit>(JRStyledTextParser.java:83)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.<init>(JRBaseFiller.java:121)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:88)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:103)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:61)
    at net.sf.jasperreports.engine.fill.JRFiller.createFiller(JRFiller.java:153)
    at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:82)
    at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:653)
    at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:969)
    at net.sf.dynamicreports.jasper.builder.JasperReportBuilder.toJasperPrint(JasperReportBuilder.java:308)
    at net.sf.dynamicreports.jasper.builder.JasperReportBuilder.show(JasperReportBuilder.java:327)
    at aatmPackage.report.build(report.java:70)
    at aatmPackage.report.<init>(report.java:26)
    at aatmPackage.GuiAATM.reportButtonActionPerformed(GuiAATM.java:1214)
    at aatmPackage.GuiAATM.access$400(GuiAATM.java:34)
    at aatmPackage.GuiAATM$5.actionPerformed(GuiAATM.java:968)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
BUILD SUCCESSFUL (total time: 6 seconds) 
```

我的 report.java 文件是：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package aatmPackage;

import static net.sf.dynamicreports.report.builder.DynamicReports.*;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import java.awt.Color;

import net.sf.dynamicreports.examples.Templates;
import net.sf.dynamicreports.report.builder.style.StyleBuilder;
import net.sf.dynamicreports.report.constant.HorizontalAlignment;
import net.sf.dynamicreports.report.datasource.DRDataSource;
import net.sf.dynamicreports.report.exception.DRException;
import net.sf.jasperreports.engine.JRDataSource;
import net.sf.dynamicreports.report.builder.style.FontBuilder;

public class report {
  public report() {
        build();

    }

    private void build() {  
            StyleBuilder boldStyle         = stl.style().bold();
           // FontBuilder  boldFont = stl.fontArialBold().setFontSize(12);
            Color MAROON = new Color(122, 5, 5);
            StyleBuilder titleLineOne = stl.style(boldStyle).setHorizontalAlignment
                    (HorizontalAlignment.RIGHT).setFontSize(15).setForegroundColor
                    (MAROON);
            StyleBuilder titleNextLine = stl.style(boldStyle).setHorizontalAlignment
                    (HorizontalAlignment.RIGHT).setFontSize(12).setForegroundColor
                    (MAROON);

            StyleBuilder bodyTitleStyle = stl.style(boldStyle).setHorizontalAlignment
                    (HorizontalAlignment.LEFT).setFontSize(12);

            StyleBuilder bodyStyle = stl.style().setFontSize(11);

            StyleBuilder signatureStyle = stl.style(boldStyle).setHorizontalAlignment
                    (HorizontalAlignment.RIGHT);

            StyleBuilder footerLeft         = stl.style(boldStyle).setHorizontalAlignment
                   (HorizontalAlignment.LEFT).setForegroundColor
                    (MAROON) ;
             StyleBuilder footerRight         = stl.style(boldStyle).setHorizontalAlignment
                   (HorizontalAlignment.RIGHT).setForegroundColor
                    (MAROON) ;

            //BufferedImage img = new BufferedImage(1200,1200,BufferedImage.TYPE_INT_RGB);
           BufferedImage img = null;
try {
   // img = ImageIO.read(new File("D:/Hysteresis.png"));
    img = ImageIO.read(new File("D:/Hysteresis.png"));
} catch (IOException e) {
}
       BufferedImage logo = null;
try {
   // img = ImageIO.read(new File("D:/Hysteresis.png"));
    logo = ImageIO.read(new File("D:/Logo.jpg"));
} catch (IOException e) {
}
        try {
            report()//create new report design
                         // .setColumnTitleStyle(boldStyle)
                         // .setColumnStyle(boldStyle)
                          .highlightDetailEvenRows()
              .columns(//add columns

                col.column(null,"Col_1",  type.stringType())
                                .setStyle(bodyStyle),
                col.column(null,"Col_2",  type.stringType())
                                .setStyle(bodyStyle)
                                )
                           .summary(

        cmp.verticalList()
          //  .add(cmp.filler().setStyle(stl.style().setTopBorder(stl.pen2Point())).setFixedHeight(10))                    
            .add(
             cmp.text("\n"),                   
             cmp.filler().setStyle(stl.style().setTopBorder(stl.pen1Point())),
             cmp.text("\nHYSTERISIS PLOT\n").setStyle(bodyTitleStyle),
            cmp.text(" 1.\n").setStyle(
                                bodyStyle),

           // .add(cmp.image(getClass().getResourceAsStream
             //     ("D:/Hysteresis.png")).setFixedDimension(300, 300))

            cmp.horizontalList()             
            .add(cmp.image(img).setFixedDimension(350, 250),
            //cmp.text("ANALYSIS\n").setStyle(bodyTitleStyle),
            cmp.text("Right Lobe Change:160.04%\n").setStyle(bodyStyle),
            cmp.text("Left Lobe Change: 35.38%\n").setStyle(bodyStyle),
            cmp.text("Hysteresis Change: 81.50%\n").setStyle(bodyStyle)), 
            //cmp.filler().setStyle(stl.style().setTopBorder(stl.pen1Point())),
            cmp.text("REMARKS\n\n\n\n\n\n\n\n").setStyle(bodyTitleStyle),
            cmp.text("Doctor Signature").setStyle(signatureStyle))
    )
              .title(

                                cmp.horizontalList()
                                .add(
                                cmp.image(logo).setFixedDimension(70, 70),
                                cmp.verticalList()
                                .add(
                                cmp.text(" Ltd").setStyle(titleLineOne),
                                cmp.text(", ").setStyle(titleNextLine),
                                cmp.text("Mobile +").setStyle(titleNextLine))
                                )
                               /* cmp.horizontalList()
                                .add( cmp.text("Allahabad Bypass Varanasi").setStyle(boldCenteredStyle))
                              */
                                .newRow()
 .add(cmp.filler().setStyle(stl.style().setTopBorder(stl.pen2Point())).setFixedHeight(10))

                                )//shows report title

                              //  .pageFooter(cmp.pageXofY())//shows number of page at page footer
                                .pageFooter(
                                Templates.footerComponent,
                                 //cmp.text(" \t\t\t\t\t\t\t\t"
                               // + " ")
                                cmp.horizontalList()
                                .add(cmp.text("Emsol Software Solution").setStyle(footerLeft),
                                cmp.text("copyright: gauravbvelex@gmail.com").setStyle(footerRight))
                                )

              .setDataSource(createDataSource())//set datasource
              .show();//create and show report
        } catch (DRException e) {
            e.printStackTrace();
        }
    }
    private JRDataSource createDataSource() {
        DRDataSource dataSource = new DRDataSource("Col_1", "Col_2");

        dataSource.add("Name","Sample");
                dataSource.add("Age","26");
                dataSource.add("Sex","Female");
                dataSource.add("Weight","53 Kg");
                dataSource.add("BMI","20");
                dataSource.add("Massage Duration (Mins)","4.5");
                dataSource.add("RPM","26");
                dataSource.add("Doctor Attended","Doctor");
                dataSource.add("Date","24-Feb-2013");

        return dataSource;
    }  
} 
```

此报告在作为单独项目运行时运行良好，然后我尝试创建示例 jFrame，然后添加此 .java 文件并运行它。当我单击按钮时，它创建了报告。但是实际项目（我在 20 天内开发的 GUI 和功能）会引发显示的错误。我什至尝试将报告代码放入 gui 文件本身，但得到了同样的错误。我无法解决问题。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T19:53:11.867

Looks like you have multiple implementations .jar files for XML parsing (maybe multiples versions of xerces in classpath ?).

gnujaxp.jar also could be the source of the problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:49:36.040

好的，我得到了解决方案...

动态图表似乎使用 jFreeChart 库。我正在为动态图表和 jFreeChart 手动导入库。

解决方案是：删除所有库，然后仅导入动态图表。

我猜这两个库的 .xml 是冲突的。

# android - ListView 仅显示一项或最后一项

> ID：15061752
> 
> 赞同：0
> 
> 时间：2013-02-25T07:07:53.713
> 
> 标签：android, listview, adapter

这个问题的标题相同，但技术问题不同。

您好我正在尝试从 SQLite 获取数据，但我只能显示列表视图中的最后一项。我尝试了不同的解决方案，但没有成功。问题不是从 SQLite 获取项目（我能够获取所有项目），而是在列表视图中使用适配器显示项目。

这是我的代码。
**ListActivity.java**

```
 db=new DBHelper(getBaseContext());
 db.getWritableDatabase();
try {
final DBHelper m = new DBHelper(getBaseContext());
final List<GetSet> NotesWiseProfile = m.getBabyDetails();
for (final GetSet cn : NotesWiseProfile) {
    counter++;              
    String babyName = cn.getBabyName();
    String babyImage = cn.getBabyImage();               
    int babyId = cn.getBabyId();
    BabyData baby_data[]  = new BabyData[]
    {                       
         new BabyData(R.drawable.ic_launcher, babyName,babyId),
            };
        adapter = new MobileArrayAdapter(this, 
                R.layout.list_row, baby_data);
        listView1.invalidateViews();
        listView1.setAdapter(adapter);
  }
}
catch (Exception e) {
} 
```

**BabyData.java**

```
public class BabyData {
public int icon;
public String title;
public int babyid;
public BabyData(){
    super();
}    
public BabyData(int icon, String title,int babyId) {
    super();
    this.icon = icon;
    this.title = title;
    babyid = babyId;
} 
```

}

**MobileArrayAdapter.java**

```
public class MobileArrayAdapter extends ArrayAdapter<BabyData>{

Context context; 
int layoutResourceId;    
BabyData data[] = null;

public MobileArrayAdapter(Context context, int layoutResourceId, BabyData[] data) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    DataHolder holder = null;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new DataHolder ();
        holder.imgIcon = (ImageView)row.findViewById(R.id.imvBabyFace);
        holder.txtTitle = (TextView)row.findViewById(R.id.tvbabyNameList);
        holder.txtBabyId = (TextView)row.findViewById(R.id.tvBabyId);

        row.setTag(holder);
    }
    else
    {
        holder = (DataHolder )row.getTag();
    }

    BabyData weather = data[position];
    holder.txtTitle.setText(weather.title);
    holder.txtBabyId.setText(String.valueOf(weather.babyid));
    holder.imgIcon.setImageResource(weather.icon);

    return row;
}

static class DataHolder 
{
    ImageView imgIcon;
    TextView txtTitle;
    TextView txtBabyId;
}
} 
```

我不明白我的代码有什么问题。请给我任何提示或参考。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T07:11:32.487

将 listview 声明置于 for 循环之外，例如：

```
BabyData baby_data[]  = new BabyData[NotesWiseProfile.size()];

for (final GetSet cn : NotesWiseProfile) {

  String babyName = cn.getBabyName();
  String babyImage = cn.getBabyImage();               
  int babyId = cn.getBabyId();
  baby_data[counter] = new BabyData(R.drawable.ic_launcher, babyName,babyId);
  counter++;    
}
adapter = new MobileArrayAdapter(this, 
            R.layout.list_row, baby_data);
    listView1.invalidateViews();
    listView1.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:16:43.090

我认为您应该使用一个字段来存放婴儿。目前，您正在为此使用本地 Baby 数组。据我所知，ListView 总是从您传递给它的数组中获取其数据（使其无效会导致 ListView 再次查找该数据。

回顾一下：将数组存储为字段 - 如果数据发生更改，请更新数组并在适配器上调用 notifyDatasetChanged()，这将导致 ListView 重新加载数据。

# javascript - 无法在 innerHTML 语句中创建 href 链接

> ID：15061756
> 
> 赞同：0
> 
> 时间：2013-02-25T07:08:05.947
> 
> 标签：javascript, html, wordpress

我有一个带有 if 语句流的函数。如果语句为真，它会使用 innerHTML 写回文档。在 innerHTML 中，我可以添加 p 标签和文本，但只要我添加`<a href>`一行，它就会给我一个“未捕获的语法错误：意外的标识符”错误。我究竟做错了什么？错误在`calage()`具有以下代码段的函数内：

```
if((calyear == 2010 && calmon > 10) || (calyear == 2011 && calmon < 11)) {
        console.log("They should be in the 2YO");
        document.getElementById("demo").innerHTML="<p>Your student would more than likely enter the 2YO class. The 2YO students will have class at the Nanshan campus. To apply, please fill out the following application.</p> <a href="http://qsishekou.org" target="_blank">QSI Shekou!</a>";
        } 
```

完整的 HTML 文件如下。感谢您的帮助！

```
 <!DOCTYPE HTML>

<html>
    <head> </head>
    <body>
<table cellpadding=0 cellspacing=0 style="width:95%;" align="center">
<tr><td align="center" class="abouttabletext"><br>
<script type="text/javascript">
var startyear = "1995";
var endyear = "2013";
var dat = new Date();
var curday = dat.getDate();
var curmon = dat.getMonth()+1;
var curyear = dat.getFullYear();
function checkleapyear(datea)
{
    if(datea.getYear()%4 == 0)
    {
        if(datea.getYear()% 10 != 0)
        {
            return true;
        }
        else
        {
            if(datea.getYear()% 400 == 0)
                return true;
            else
                return false;
        }
    }
return false;
}
function DaysInMonth(Y, M) {
    with (new Date(Y, M, 1, 12)) {
        setDate(0);
        return getDate();
    }
}
function datediff(date1, date2) {
    var y1 = date1.getFullYear(), m1 = date1.getMonth(), d1 = date1.getDate(),
     y2 = date2.getFullYear(), m2 = date2.getMonth(), d2 = date2.getDate();
    if (d1 < d2) {
        m1--;
        d1 += DaysInMonth(y2, m2);
    }
    if (m1 < m2) {
        y1--;
        m1 += 12;
    }
    return [y1 - y2, m1 - m2, d1 - d2];
}

function calage()
{
  var calday = document.birthday.day.options[document.birthday.day.selectedIndex].value;
  var calmon = document.birthday.month.options[document.birthday.month.selectedIndex].value;
  var calyear = document.birthday.year.options[document.birthday.year.selectedIndex].value;
    if(curday =="" || curmon=="" || curyear=="" || calday=="" || calmon=="" || calyear=="")
    {
        alert("please fill all the values and click go -");
    }   
    else
    {
        var curd = new Date(curyear,curmon-1,curday);
        var cald = new Date(calyear,calmon-1,calday);
        var diff =  Date.UTC(curyear,curmon,curday,0,0,0) - Date.UTC(calyear,calmon,calday,0,0,0);
        var dife = datediff(curd,cald);
        var monleft = (dife[0]*12)+dife[1];
        var secleft = diff/1000/60;
        var hrsleft = secleft/60;
        var daysleft = hrsleft/24;
        var as = parseInt(calyear)+dife[0]+1;
        var datee = diff/1000/60/60/24;
    }
    if((calyear == 2010 && calmon > 10) || (calyear == 2011 && calmon < 11)) {
        console.log("They should be in the 2YO");
        document.getElementById("demo").innerHTML="<p>Your student would more than likely enter the 2YO class. The 2YO students will have class at the Nanshan campus. To apply, please fill out the following application.</p> <a href="http://www.w3schools.com/" target="_blank">Visit W3Schools!</a>";
        }
        if((calyear == 2009 && calmon > 10) || (calyear == 2010 && calmon < 11)) {
        console.log("They should be in the 3YO");
        return 3;
    }
    if((calyear == 2008 && calmon > 10) || (calyear == 2009 && calmon < 11)) {
        console.log("They should be in the 4YO");
    }
    if((calyear == 2007 && calmon > 10) || (calyear == 2008 && calmon < 11)) {
        console.log("They should be in the 5YO");
    }
    if((calyear == 2006 && calmon > 10) || (calyear == 2007 && calmon < 11)) {
        console.log("They should be in the 6YO");
    }
    if((calyear == 2005 && calmon > 10) || (calyear == 2006 && calmon < 11)) {
        console.log("They should be in the 7YO");
    }
    if((calyear == 2004 && calmon > 10) || (calyear == 2005 && calmon < 11)) {
        console.log("They should be in the 8YO");
    }
    if((calyear == 2003 && calmon > 10) || (calyear == 2004 && calmon < 11)) {
        console.log("They should be in the 9YO");
    }
    if((calyear == 2002 && calmon > 10) || (calyear == 2003 && calmon < 11)) {
        console.log("They should be in the 10YO");
    }
    if((calyear == 2001 && calmon > 10) || (calyear == 2002 && calmon < 11)) {
        console.log("They should be in the 11YO");
    }
    if((calyear == 2000 && calmon > 10) || (calyear == 2001 && calmon < 11)) {
        console.log("They should be in the 12YO");
    }
    if((calyear == 1999 && calmon > 10) || (calyear == 2000 && calmon < 11)) {
        console.log("They should be in the 13YO");
    }
    if((calyear == 1998 && calmon > 10) || (calyear == 1999 && calmon < 11)) {
        console.log("They should be in the 14YO");
    }
    if((calyear == 1997 && calmon > 10) || (calyear == 1998 && calmon < 11)) {
        console.log("They should be in the 15YO");
    }
    if((calyear == 1996 && calmon > 10) || (calyear == 1997 && calmon < 11)) {
        console.log("They should be in the 16YO");
    }
    if((calyear == 1995 && calmon > 10) || (calyear == 1996 && calmon < 11)) {
        console.log("They should be in the 17YO");
    }
    if(calyear == 1995 && calmon < 11) {
        console.log("Your child is too old to attend QSI");
    }
}
</script>
<form name="birthday" action="">
Date<select name="day" size="1">
<script type="text/javascript">
 for(var j=1;j<32;j++)
   document.write("<option value="+j+">"+j+"</option>");
</script></select>&nbsp;
Month<select name="month" size="1">
<script type="text/javascript">
 for(var i=1;i<13;i++)
 document.write("<option value="+i+">"+i+"</option>");
</script></select>&nbsp;
Year
<select name="year" size="1">
<script type="text/javascript">
 for(var k=startyear;k<endyear;k++)
 document.write("<option value="+k+">"+k+"</option>");
</script></select> 
<br><br>
<input name="start" onclick="calage()" value="Calculate" type="button">
</form>
</td></tr></table>
<div id="demo">

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:14:44.593

试试这个：

```
 document.getElementById("demo").innerHTML="<p>Your student would more than likely enter the 2YO class. The 2YO students will have class at the Nanshan campus. To apply, please fill out the following application.</p> <a href='http://qsishekou.org' target='_blank'>QSI Shekou!</a>"; 
```

用“”将字符串括起来，就像您所做的那样 - 所以使用 ' 来包围属性。

例如：

```
var str = "hello, I am" gonna go" here"; 
```

这将产生一个错误，因为您关闭字符串然后您不连接，因此异常。

所以，

```
var str = "hello, I am' gonna go' here"; 
```

将是适当的。

或者

```
var str = "hello, I am" + "gonna go here"; 
```

或者如果您必须使用双引号，则使用反斜杠。

```
var str = "hello, I am\" gonna go\" here"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-12T13:28:25.737

就我而言，我已经按照@jamesemanon 的建议使用了简单的引号，但它仍然不起作用。在Android设备上没问题，IOS模拟器没问题，但是IOS设备失败了。
我的解决方案只是删除`target="_blank"`attr，然后在设备上链接工作。

# java - Java Applet 允许 Javac 或其他 jar 访问？

> ID：15061757
> 
> 赞同：0
> 
> 时间：2013-02-25T07:08:07.270
> 
> 标签：java, javafx, compiler-construction, applet, client

我参与了一个需要通过 web 运行并可以访问 java 的编译器工具和/或 javacc api 的项目。我的团队正在考虑使用 Java 小程序使其基于 Web。我想知道在这种情况下小程序可以做什么和不能做什么有某些限制。我会假设因为对编译器的访问将在服务器上完成，而不是在客户端的机器上，所以这不会是一个问题。小程序是否允许我们按照描述将两者分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:22:04.193

是的，applet 可以访问它们，这可能是一个不错的选择。但它的外观和感觉非常有限/沉闷。在此使用 JavaFx，您可以定义自己的 StyleSheet，这样它会给您一个非常好的外观和感觉，是的，它肯定也会将两层分开。

[JavaFx Oracle 文档](http://docs.oracle.com/javafx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:14:26.187

如果 applet 已[签名](http://docs.oracle.com/javafx/2/deployment/packaging.htm#BABJGFBH)，则 applet（甚至 JavaFX applet）可以在这种情况下工作。小程序存在许多微妙的陷阱，因此我建议在使用该技术之前进行原型设计。按照[JavaFX 部署指南](http://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm)了解如何部署基于 JavaFX 的小程序。

我曾认为要编译 Java，您需要安装完整的 Java 开发工具包（这在小程序部署情况下很难确保）。但似乎编译 API 包含在标准 Java 运行时环境中包含的[javax.tools API 中。](http://docs.oracle.com/javase/7/docs/api/javax/tools/package-summary.html)因此，这可能意味着您可以开发您的解决方案，包括基于客户端的 Java 代码部署和编译，而无需用户安装完整的 Java 开发工具包。

您可能还希望考虑一个客户端/服务器解决方案，其中可以在服务器上执行编译。[TopCoder Algorithm Competition Application](http://apps.topcoder.com/wiki/display/tc/The+Algorithm+Competition+Arena)就是这种方法的一个示例（使用基于 Java WebStart 的解决方案）。这是运行此应用程序的 jnlp 文件 ( [http://apps.topcoder.com/wiki/display/tc/The+Algorithm+Competition+Arena )。](http://apps.topcoder.com/wiki/display/tc/The+Algorithm+Competition+Arena)我建议您使用该应用程序在 TopCoder 注册一个 ID，并尝试使用它编写和编译一些代码。TopCoder 实现使用在 JavaFX 存在之前编写的普通 Swing，但如果您愿意，您同样可以使用 JavaFX 来实现。

如果您还需要一个编辑器（具有语法感知文本样式）来编译您将要编译的代码，您可以使用嵌入在 JavaFX 中的基于[CodeMirror的编辑器。](http://jewelsea.wordpress.com/2011/12/11/codemirror-based-code-editor-for-javafx/)基于 CodeMirror 的解决方案将编辑器包装在基于 html 的`WebView`控件中。对于 JavaFX 8，您可能可以将新`TextFlow`控件用于[语法高亮文本编辑器](http://tomsondev.bestsolution.at/2013/02/14/experimenting-with-textflow-from-javafx8/)，但该 API 还不是受支持的公共版本的一部分。

* * *

**更新**

我使用此答案中概述的策略完成了这项工作。

![javaappletusingjavac](../Images/db427e17f9929aba3c201ddfb226a109.png)

该图像是一个 html 页面，允许作为 applet 或 webstart 应用程序访问客户端代码编辑器。图像的顶部区域是代码编辑区域，该区域基于 WebEngine，具有嵌入式语法高亮 CodeMirror JavaScript 编辑器，支持 Java 编辑。图像的底部区域是在客户端计算机上本地编译编辑器中的代码并随后运行它的输出。输出包括任何编译错误、到 sysout 的任何程序输出以及打印到 syserr 的任何运行时异常。解决方案的棘手部分是：

1.  研究如何捕获 sysout 和 syserr 并将它们重定向到 JavaFX 控件。
2.  查找 Java 编译器。

默认的 Oracle Java 运行时环境提供程序仅提供 Java 编译器实现的通用接口，但它本身不提供 Java 编译器实现 - 该实现仅包含在 jdk 随附的 tools.jar 中。所以当我打包我的applet 时，我在applet 的打包中包含了tools.jar。我在获取服务提供者接口以获取 javac 编译器的实例时遇到了一些困难，所以最后，我只是使用以下行对其进行了实例化：

```
JavaCompiler compiler = new com.sun.tools.javac.api.JavacTool(); 
```

以上内容有些脆弱，因为 sun 可能随时更改其私有 com.sun 类 - 但至少它在这种情况下有效。

要注意的另一件事是，如果您使用 javac 编译器发布 tools.jar，该编译器早于您的系统可用的运行时环境，那么您可能会收到一些警告，如下所示：

```
warning: C:\Program Files\Java\jre8\lib\rt.jar(java/lang/Object.class): major version 52 is newer than 51, the highest major version supported by this compiler.
  It is recommended that the compiler be upgraded. 
```

出现上述警告是因为我使用 java 7 tools.jar 发布了 applet，并使用 java 8 运行时运行了 applet（请注意，无论这些警告如何，applet 都可以正常工作）。

**更新**

我将此解决方案的代码放在[github 存储库中（项目名称概念）](https://github.com/jewelsea/conception)。更新后的解决方案使用[Eclipse Compiler for Java](http://www.eclipse.org/jdt/core/index.php)而不是 Oracle Java Compiler。主要是因为，对于 Eclipse 编译器，它是一个单独的 jar（只有 1.8meg 而不是 oracle 发行版的 14meg 工具 jar）并且许可更清晰一些。因为 Java 编译器接口是可插入的，所以如果将 tools.jar 放在类路径中，Oracle 编译器仍然可以使用。

# java - 使用 GetEnv() 获取环境失败

> ID：15061763
> 
> 赞同：2
> 
> 时间：2013-02-25T07:08:36.863
> 
> 标签：java, c++, java-native-interface, cocos2d-x

我正在尝试从 jni 类中为 cocos2dx 项目调用一些非常简单的 java 函数。但是我不断收到错误**无法**在某些重要调用中使用 GetEnv() 获取环境，这会改变整个操作流程。

我正在通过以下方式进行 JNI 调用

```
void SaveStringJni(const char *key, const char *value)
{
    cocos2d::JniMethodInfo methodInfo;
    if (! JniHelper::getStaticMethodInfo(methodInfo, CLASS_NAME, "SaveString", "(Ljava/lang/String;Ljava/lang/String;)V"))
    {
        return;
    }
    jstring stringArg = methodInfo.env->NewStringUTF(key);
    jstring stringArg2 = methodInfo.env->NewStringUTF(value);
    methodInfo.env->CallStaticVoidMethod(methodInfo.classID, methodInfo.methodID, stringArg, stringArg2);
    methodInfo.env->DeleteLocalRef(stringArg);
    methodInfo.env->DeleteLocalRef(stringArg2);
    methodInfo.env->DeleteLocalRef(methodInfo.classID);
} 
```

我正在使用下面给出的 cocos2d-x 中的 JniHelper 类。

```
 #include "JniHelper.h"
#include <android/log.h>
#include <string.h>

#if 1
#define LOG_TAG "JniHelper"
#define LOGD(...) __android_log_print(ANDROID_LOG_DEBUG,LOG_TAG,__VA_ARGS__)
#else
#define LOGD(...)
#endif

#define JAVAVM cocos2d::JniHelper::getJavaVM()

using namespace std;

extern "C"
{

//////////////////////////////////////////////////////////////////////////
// java vm helper function
//////////////////////////////////////////////////////////////////////////

static bool getEnv(JNIEnv **env)
{
    bool bRet = false;

    do
    {
        if (JAVAVM->GetEnv((void**)env, JNI_VERSION_1_4) != JNI_OK)
        {
            LOGD("Failed to get the environment using GetEnv()");
            break;
        }

        if (JAVAVM->AttachCurrentThread(env, 0) < 0)
        {
            LOGD("Failed to get the environment using AttachCurrentThread()");
            break;
        }

        bRet = true;
    } while (0);

    return bRet;
}

static jclass getClassID_(const char *className, JNIEnv *env)
{
    JNIEnv *pEnv = env;
    jclass ret = 0;

    do
    {
        if (! pEnv)
        {
            if (! getEnv(&pEnv))
            {
                break;
            }
        }

        ret = pEnv->FindClass(className);
        if (! ret)
        {
             LOGD("Failed to find class of %s", className);
            break;
        }
    } while (0);

    return ret;
}

static bool getStaticMethodInfo_(cocos2d::JniMethodInfo &methodinfo, const char *className, const char *methodName, const char *paramCode)
{
    jmethodID methodID = 0;
    JNIEnv *pEnv = 0;
    bool bRet = false;

    do
    {
        if (! getEnv(&pEnv))
        {
            break;
        }

        jclass classID = getClassID_(className, pEnv);

        methodID = pEnv->GetStaticMethodID(classID, methodName, paramCode);
        if (! methodID)
        {
            LOGD("Failed to find static method id of %s", methodName);
            break;
        }

        methodinfo.classID = classID;
        methodinfo.env = pEnv;
        methodinfo.methodID = methodID;

        bRet = true;
    } while (0);

    return bRet;
}

    static bool getMethodInfo_(cocos2d::JniMethodInfo &methodinfo, const char *className, const char *methodName, const char *paramCode)
    {
        jmethodID methodID = 0;
        JNIEnv *pEnv = 0;
        bool bRet = false;

        do
        {
            if (! getEnv(&pEnv))
            {
                break;
            }

            jclass classID = getClassID_(className, pEnv);

            methodID = pEnv->GetMethodID(classID, methodName, paramCode);
            if (! methodID)
            {
                LOGD("Failed to find method id of %s", methodName);
                break;
            }

            methodinfo.classID = classID;
            methodinfo.env = pEnv;
            methodinfo.methodID = methodID;

            bRet = true;
        } while (0);

        return bRet;
    }

    static string jstring2string_(jstring jstr)
    {
        if (jstr == NULL)
        {
            return "";
        }

        JNIEnv *env = 0;

        if (! getEnv(&env))
        {
            return 0;
        }

        const char* chars = env->GetStringUTFChars(jstr, NULL);
        string ret(chars);
        env->ReleaseStringUTFChars(jstr, chars);

        return ret;
    }
}

NS_CC_BEGIN

JavaVM* JniHelper::m_psJavaVM = NULL;

JavaVM* JniHelper::getJavaVM()
{
    return m_psJavaVM;
}

void JniHelper::setJavaVM(JavaVM *javaVM)
{
    m_psJavaVM = javaVM;
}

string JniHelper::m_externalAssetPath;

const char* JniHelper::getExternalAssetPath() {
    return m_externalAssetPath.c_str();
}

void JniHelper::setExternalAssetPath(const char * externalAssetPath) {
    m_externalAssetPath = externalAssetPath;
}

jclass JniHelper::getClassID(const char *className, JNIEnv *env)
{
    return getClassID_(className, env);
}

bool JniHelper::getStaticMethodInfo(JniMethodInfo &methodinfo, const char *className, const char *methodName, const char *paramCode)
{
    return getStaticMethodInfo_(methodinfo, className, methodName, paramCode);
}

bool JniHelper::getMethodInfo(JniMethodInfo &methodinfo, const char *className, const char *methodName, const char *paramCode)
{
    return getMethodInfo_(methodinfo, className, methodName, paramCode);
}

string JniHelper::jstring2string(jstring str)
{
    return jstring2string_(str);
}

NS_CC_END 
```

这有时有效，但我有时也会遇到上述错误。谁能告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:59:33.817

错误是由于我没有从主线程调用函数引起的

# c# - C# GetForegroundWindow() 为多个窗口返回相同的结果，EnumWindows 根本不返回那个#

> ID：15061766
> 
> 赞同：3
> 
> 时间：2013-02-25T07:08:45.117
> 
> 标签：c#, step-into, reversing

C#`GetForegroundWindow()`为多个窗口返回相同的结果，`EnumWindows`根本不返回那个窗口。每个过程实际上都有自己的层次。

我也浏览了这两个`GetWindowThreadProcessId()`函数并用 枚举了它们`GetChildWindows()`，但它们仍然没有返回与 相同的窗口`GetForegroundWindow()`。

你如何正确地开始`GetForegroundWindow()`并把它变成你从适当的地方检索到的东西`EnumWindows`？

目标：`GetForegroundWindow`+ 正确枚举以检索适当的顶级句柄（chrome 中的所有选项卡，您的项目表单），但不必筛选`GetAllWindows()`给您带来的混乱。谢谢。

```
private ArrayList GetAllWindows()
{
    var windowHandles = new ArrayList();
    EnumedWindow callBackPtr = GetWindowHandle;
    EnumWindows(callBackPtr, windowHandles);

    foreach (IntPtr windowHandle in windowHandles.ToArray())
    {
        EnumChildWindows(windowHandle, callBackPtr, windowHandles);
    }

    return windowHandles;
}

private delegate bool EnumedWindow(IntPtr handleWindow, ArrayList handles);

[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
private static extern bool EnumWindows(EnumedWindow lpEnumFunc, ArrayList lParam);

[DllImport("user32")]
[return: MarshalAs(UnmanagedType.Bool)]
private static extern bool EnumChildWindows(IntPtr window, EnumedWindow callback, ArrayList lParam);

List<IntPtr> ids = new List<IntPtr>();

private bool GetWindowHandle(IntPtr windowHandle, ArrayList windowHandles)
{
    windowHandles.Add(windowHandle);
    listBox1.Items.Add(windowHandle);
    //ids.Add(GetWindowThreadProcessId(windowHandle, IntPtr.Zero));
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:13:52.133

这是我在 Windows 中用于 C++ 的内容：

```
TCHAR buf[255];    
HWND foregroundWindow = GetForegroundWindow();
DWORD* processID = new DWORD;
GetWindowText(foregroundWindow, buf, 255);
GetWindowThreadProcessId(foregroundWindow, processID);
DWORD p = *processID;
HANDLE hProcess = OpenProcess(PROCESS_QUERY_INFORMATION |
                              PROCESS_VM_READ,
                              FALSE, p);
TCHAR szProcessName[MAX_PATH];

if (NULL != hProcess )
{
    HMODULE hMod;
    DWORD cbNeeded;

    if ( EnumProcessModules( hProcess, &hMod, sizeof(hMod),
                             &cbNeeded) )
    {
        GetModuleBaseName( hProcess, hMod, szProcessName,
                           sizeof(szProcessName)/sizeof(TCHAR) );
    }
}
CloseHandle(hProcess);
long pid = (long)p; 
```

我了解您的应用程序是 C#，但您也许可以使用其中一些 Windows API 调用来获取您需要的信息。让我知道是否可以做任何事情来进一步解释代码。

# java - jqgrid解析器错误

> ID：15061769
> 
> 赞同：0
> 
> 时间：2013-02-25T07:08:53.243
> 
> 标签：java, jquery, jqgrid, xml-parsing

我正在使用 JSP 和 Servlet（IDE：Eclipse，数据库：Oracle10）开发一个 Web 应用程序。我正在使用 jqGrid 以表格格式显示记录。

我正在`datatype: "xml"`使用`jqgrid`.

我在数据库中有一个用于存储的字段`address`，该字段包含特殊字符等`,` `;` `&`。如果`Address`来自数据库中的任何一个包含`&`然后`jqgrid`给我消息`response 200 ok, type: parsererror`并且网格中没有显示任何数据，如果我`&`从数据库中删除它则不是向我显示此消息并在网格中显示数据。

```
 {name:'ADDRESS',index:'ADDRESS', width:80,sortable:true,editable:true} 
```

所以我的问题是我应该如何发送数据，其中包含`&`

**更新1：**

我知道有些字符`XML reserved characters`类似于 `&` `<`and `>`，但是在这种情况下，我必须编写`loop`以检查服务器端的地址，如果该地址包含此保留字符，那么我必须将它们写为`hexadecimal`，那么有没有更好的方法来做到这一点？

**Update2：** 我正在使用 Servlet。以下是我的代码片段。

```
out.print("<cell>" +ADDRESS +"A&BC"+"</cell>");//will show parsererror

out.print("<cell>" +ADDRESS +"A"+"</cell>");//will not show error, and data is diplayed 
```

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:18:52.490

要放置具有 XML 保留字符的信息，您必须使用 XML 保留字符`<![CDATA[...]]>`（例如，参见[此处](http://www.w3schools.com/xml/xml_cdata.asp)和[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3afirst_grid#php_and_mysql_example_file)）构造来生成正确的 XML 数据。

在客户端，您应该另外使用`autoencode: true`jqGrid 选项。

# c++ - 调用“localtime_s”时日历功能崩溃

> ID：15061771
> 
> 赞同：1
> 
> 时间：2013-02-25T07:09:03.867
> 
> 标签：c++, debugging, ctime, localtime

我正在尝试制作一个 callendar，因此我使用 time_t 和 localtime_s 来存储时间和日期信息，然后将其存储在 Calendar 类的各个成员中：

```
void Callendar::Initialize()
{
    time_t now = time(0);
    tm *localTime = null;
    localtime_s(localTime, &now);

    LocalSeconds = localTime->tm_sec;
    LocalMinutes = localTime->tm_min;
    LocalHours = localTime->tm_hour;
    LocalDays = localTime->tm_mday;
    LocalMonths = localTime->tm_mon;
    LocalYears = localTime->tm_year;
    DaysSinceSunday = localTime->tm_wday;
    DaysSinceJanuaryFirst = localTime->tm_yday;
    HoursDaylightSavings = localTime->tm_isdst;
} 
```

所有编译都很好，但是在运行时我得到：

> 调试断言失败！
> 
> 程序：C:\Users\MyPC\Desktop\Framework\Framework\Debug\Framework.exe 文件：f:\dd\vctools\crt_bld\self_x86\crt\src\loctim64.c 行：69
> 
> 表达式：( ptm != NULL )

关闭失败的断言消息后，我在此行收到标准调试错误：

```
static __inline errno_t __CRTDECL localtime_s(struct tm * _Tm, const time_t * _Time)
{
    return _localtime64_s(_Tm, _Time);
} 
```

这基本上是在*Calendar:Initialize()*中调用 *localtime_s(localTime, &now);* 的结果 我可以使用此功能的弃用版本吗？我知道还有其他函数可以获取本地时间，但我不知道哪个是“正确的”。其他人向我建议我不应该使用“本地时间”，但似乎 localtime_s 也不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T07:10:36.497

请参阅[文档](http://msdn.microsoft.com/en-sg/library/a442x3ye(v=vs.80).aspx)

**参数**

> _Tm值
> 
> > 指向要填写的时间结构的指针。

这意味着该函数**期望第一个参数是指向有效`tm`实例**的非空指针。

改变

```
tm *localTime = null;
localtime_s(localTime, &now); 
```

到

```
tm localTime;
localtime_s(&localTime, &now); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T07:11:08.637

该`localtime_s`函数需要一个分配的`struct tm`指针，而您向它传递一个空指针。

使用例如

```
tm localTime:
localtime_s(&localTime, &now); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-05T00:21:58.530

哈！

```
#include <iostream>
#include <fstream>
#include <ctime>
//#include <string>
//#include <cstring>
//#include <sstream>
using namespace std;

int main ()
{

    int LocalSeconds, LocalMinutes,  LocalHours, LocalDays, LocalMonths, LocalYears,
        DaysSinceSunday, DaysSinceJanuaryFirst, HoursDaylightSavings;

    time_t now = time(0);
        tm localTime;
    now = time(NULL); 
    localtime_s(&localTime, &now);

    LocalSeconds = (&localTime)->tm_sec;
    LocalMinutes = (&localTime)->tm_min;
    LocalHours = (&localTime)->tm_hour;
    LocalDays = (&localTime)->tm_mday;
    LocalMonths = (&localTime)->tm_mon;
    LocalYears = (&localTime)->tm_year;
    DaysSinceSunday = (&localTime)->tm_wday;
    DaysSinceJanuaryFirst = (&localTime)->tm_yday;
    HoursDaylightSavings = (&localTime)->tm_isdst;

    cout << LocalSeconds << " " << LocalMinutes<< " " <<  LocalHours<< " " << LocalDays
        << " " << LocalMonths<< " " << LocalYears<< " " <<endl;

    return 0;

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-30T19:44:13.397

最近碰巧在处理同样的问题。为了避免编译器错误/警告，我建议如下：

```
tm *localTime = new tm();
localtime_s(localTime, &now); 
```

如果您不初始化`localTime`，您将收到“错误 C4700：使用未初始化的局部变量 'localTime'”

# c++ - 没有在标题中声明的模板类成员特化

> ID：15061774
> 
> 赞同：13
> 
> 时间：2013-02-25T07:09:30.627
> 
> 标签：c++, templates, declaration, template-specialization

我有一个模板类，我在标头中声明了一个方法，并且在标头中没有定义该方法。在 .cc 文件中，我定义了该方法的特化，*而从未在 header 中声明它们*。在不同的 .cc 文件中，我为存在特化的不同模板参数调用该方法。它看起来像这样：

富.h：

```
template<typename T>
class Foo {
public:
  static int bar();
}; 
```

foo.cc：

```
#include "foo.h"

template<>
int Foo<int>::bar() {
  return 1;
}

template<>
int Foo<double>::bar() {
  return 2;
} 
```

主.cc：

```
#include <iostream>
#include "foo.h"

int main(int argc, char **argv) {
  std::cout << Foo<int>::bar() << std::endl;
  std::cout << Foo<double>::bar() << std::endl;
  return 0;
} 
```

对于所有 C++ 标准（c++98、gnu++98、c++11 和 gnu++11），该程序可以成功地与 gcc 4.7.2 进行编译和链接。输出是：

```
1
2 
```

这对我来说很有意义。因为 main.cc 翻译单元看不到它的定义`bar()`或任何特化，它期望调用使用在某些其他翻译单元`bar()`中的非特化定义的显式实例化。`bar()`但是由于名称修改是可预测的，因此 foo.cc 中的特化具有与非特化定义的显式实例化相同的符号名称，因此 main.cc 能够使用这些特化而无需在该翻译单元中声明它们。

我的问题是：这是一个意外，还是 C++ 标准规定的这种行为？换句话说，这段代码是否可移植？

我能找到的最相关的先前问题是[Declaration of template class member specialization](https://stackoverflow.com/questions/2498435/declaration-of-template-class-member-specialization)，但它不包括这种特殊情况。

（如果你想知道为什么这对我很重要，那是因为我使用这样的代码作为一种编译时查找表，如果我不声明专业化，它会短得多。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T07:21:29.857

标准 (C++11) 要求在首次使用之前声明（但不一定定义）显式特化：

> (14.7.3/6) 如果模板、成员模板或类模板的成员被显式特化，则应在第一次使用该特化之前声明该特化，这将导致在每次翻译中发生隐式实例化发生此类使用的单位；不需要诊断。如果程序没有为显式特化提供定义，并且该特化的使用方式会导致发生隐式实例化，或者该成员是虚拟成员函数，则该程序是非良构的，不需要诊断。永远不会为已声明但未定义的显式特化生成隐式实例化。[...]

我相信这实际上只有在您的主模板定义包含成员函数之一的非专业版本的定义时才会生效。因为在这种情况下，当未声明显式特化时，现有的主定义可用于将函数内联编译到代码中，并且特化最终不会在链接时使用。

换句话说，如果主模板定义中没有包含成员函数的定义，那么您的链接器技巧可能会在实践中起作用，但它不符合标准所说的，它可以让您进入一旦您将内联函数定义添加到主模板，就会遇到真正的麻烦。

# android - Java中的多个if条件

> ID：15061777
> 
> 赞同：1
> 
> 时间：2013-02-25T07:09:54.963
> 
> 标签：android, if-statement, multiple-instances

我想知道如何在 Java 中编写多个条件。

```
for (int i = 1; i <= pqrst; i++) {
    P = P + "{" + Pxcoor[i] + "," + Pycoor[i] + "} ; ";
    Q = Q + "{" + Qxcoor[i] + "," + Qycoor[i] + "} ; ";
    R1 = R1 + "{" + Rxcoor[i] + "," + Rycoor[i] + "} ; ";
    S = S + "{" + Sxcoor[i] + "," + Sycoor[i] + "} ; ";
    T = T + "{" + Txcoor[i] + "," + Tycoor[i] + "} ; ";

    if (i >= 2) {
        rrdistance += (((Rxcoor[i] - Rxcoor[i - 1]) / FINALBOXWIDTH(bitmap_Source)) * 0.04);//durations in seconds
        printerval += (((Rxcoor[i] - Pxcoor[i]) / FINALBOXWIDTH(bitmap_Source)) * 0.04);
        qsdistance += (((Sxcoor[i] - Qxcoor[i]) / FINALBOXWIDTH(bitmap_Source)) * 0.04);
        heartrate += (1500 / (rrdistance / 0.04)); 

    //amplitude in mV
        pamp = (( (trial[1] - Pycoor[i]) / (double)FINALBOXWIDTH(bitmap_Source))  * 0.1);
        qamp = (( (Qycoor[i] - trial[i]) / (double)FINALBOXWIDTH(bitmap_Source)) *0.1);
        ramp = (( (trial[1] - Rycoor[i]) / (double)FINALBOXWIDTH(bitmap_Source)) *0.1);
        samp = (( (Sycoor[i] - trial[i]) / (double)FINALBOXWIDTH(bitmap_Source)) *0.1);
        tamp = (( (trial[1] - Tycoor[i]) / (double)FINALBOXWIDTH(bitmap_Source)) *0.1);

                        }
                    }
DecimalFormat df = new DecimalFormat("#.##");
rrdistance = rrdistance / (pqrst - 1);
RRdistance = RRdistance + " " + rrdistance + " " + "seconds";
PRinterval = PRinterval + " " + printerval + " " + "seconds";
QSdistance = QSdistance + " " + qsdistance + " " + "seconds";
HeartRate = HeartRate + " " + heartrate + " " + "bpm";

Pamp = Pamp + " " + df.format(pamp) + " " + "mV";
Qamp = Qamp + " " + df.format(qamp) + " " + "mV";
Ramp = Ramp + " " + df.format(ramp) + " " + "mV";
Samp = Samp + " " + df.format(samp) + " " + "mV";
Tamp = Tamp + " " + df.format(tamp) + " " + "mV";

coordinate.setText("Peak coordinates:" + "\n" + P + "\n" + Q + "\n" + R1 + "\n" + S
+ "\n" + T + "\n" + RRdistance + "\n" + PRinterval + "\n" + QSdistance + "\n"
+ HeartRate + " "+ "\n" + "Amplitude of peaks:" + "\n" + Pamp + ";"  + " " + Qamp + ";"     + " "  + Ramp + ";" + " "  + Samp + ";" + " "  + Tamp + ";"); 
```

我将使用 heartrate、pamp、printerval 和 qsdistance。如何将所有这些条件写在一个 if 语句中？

```
if (60 <= heartrate <= 100) && (0 <= pamp <= 0.25) && (0.12 <= printerval <= 0.20) && (0.04 <= qsdistance < 0.12) 
```

如果所有这些条件都满足，那么它将显示 NORMAL。否则，异常。

我尝试将所有这些都放在一个 if 语句中，但它显示错误。我希望你能帮助我弄清楚如何做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:13:23.427

```
if (60 <= heartrate <= 100) 
```

wont work because you compare a boolean to 100 The `60 <= hearrate` returns True or False., use :

```
if (heartrate >=60 && heartrate <=100) 
```

like so

```
if ((heartrate >= 60 && heartrate <= 100) && (pamp >= 0 && pamp <= 0.25) && (printerval >= 0.12  &&printerval <= 0.20) && (qdistance >= 0.04 && qsdistance < 0.12)){
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T07:14:07.257

It would be like this:

```
 if ((heartrate >= 60) && (heartrate <= 100) && (pamp >=0) && (pamp <= 0.25) && (printerval >= 0.12) && (printerval <= 0.20) && (qsdistance >= 0.04) && (qsdistance < 0.12)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:14:28.137

Try it if it helps:

```
if ((60 <= heartrate) && (heartrate <= 100) && (0 <= pamp) && (pamp <= 0.25) && (0.12 <= printerval) 
&& (printerval <= 0.20) && (0.04 <= qsdistance) && (qsdistance < 0.12)) {

  //Display NORMAL Here(use textview or Log whatever you want)
 } else {
 //Abnormal
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T07:25:07.470

我实际上有点害怕看到三个答案不遵循`if`声明的 Java 语法，所以让我们澄清一下。

```
if( [boolean expresison] ){
  [then block]
} 
```

一个布尔表达式可以是一个简单的测试，比如`5 > b`，`someArray.isEmpty()`或者只是`true`。另外，您可以使用 AND `&&`、 OR`||`或 NOT等逻辑运算符`!`链接多个布尔值并将其计算为一个表达式。例如

```
if( foo && bar || !quix){
  return true;
} 
```

你看到不断变化的`()`保持**不变**！

[If-then 语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T07:25:17.727

```
if ((heartrate >=60 && heartrate <=100) && 
                (pamp >= 0 && pamp <= 0.25) && 
                (printerval >= 0.12 && printerval <= 0.20) &&
                (qsdistance >= 0.04 && qsdistance <= 0.04)) {
            System.out.println("NORMAL");

        } else { System.out.println("ABNORMAL"); } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T07:14:34.103

你试过这个吗？

```
if ((60 <= heartrate && heartrate <= 100) && (0 <= pamp && pamp <= 0.25) && (0.12 <= printerval && printerval <= 0.20) && (0.04 <= qsdistance && qsdistance < 0.12)) 
```

# drupal-7 - 如何在 drupal 7 中的自定义模块函数 hook_entity_info() 中查看数组

> ID：15061778
> 
> 赞同：0
> 
> 时间：2013-02-25T07:09:57.467
> 
> 标签：drupal-7, entity, drupal-modules, associative-array

如何在 drupal/sites/all/module/mymodule 的自定义模块文件夹中的 .module 文件中查看函数 mymodule_entity_info() 返回的整个数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:54:08.800

在 Drupal 7 中有一个名为 debug() 的函数，您可以将数组传递给该函数。见[http://api.drupal.org/api/drupal/includes%21common.inc/function/debug/7](http://api.drupal.org/api/drupal/includes%21common.inc/function/debug/7)

# .net - Visual Basic .net 正则表达式匹配不起作用 - 尽管正在使用测试工具？

> ID：15061780
> 
> 赞同：2
> 
> 时间：2013-02-25T07:10:10.930
> 
> 标签：.net, regex, vb.net

我对某人有一个愚蠢的简单问题 - 但我自己无法回答。我有一个正则表达式模式，适用于两个不同的在线测试器，其中一个是基于 .net 的。

然而在这里它找不到匹配项。任何人都可以帮忙吗？目的是过滤一个可爱的 F# 秘籍页面，使其可打印:)。

我正在指导我最小的弟弟，他正在学习编程的第 4 周——这是他的职责，我承认这让我很困惑！任何帮助我都会非常感激！！

```
 Public Function FindCode(input As String)
    Dim pattern As String = "(?m)(<pre>)(.+)(<\/pre>)\B"
    Dim output As New Dictionary(Of Integer, String)
    Dim count As Integer

    For Each match As Match In Regex.Matches(input, pattern)
        output.Add(count, match.Value)
        count += 1
    Next
Return output.count
End Function 
```

我没有得到执行，我没有得到匹配。

一个例子是

```
Some random markup <pre> and this stuff in the middle is what I'm after </pre> and there </pre> lots of these in one file </pre> which when I use Regexhero <pre> finds all the tags  </pre> 
```

这样，我们可能会使用组来列出 pre /pre 标记之间的所有项目。

感谢您的快速回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:18:11.003

我认为问题是`(.+)`- 默认情况下是贪婪的，所以它尽可能匹配 - 包括中间`</pre>`部分。

如果你把它改成`(.+?)`你应该得到多个条目。然后要在`<pre>`标签中查找文本，您需要获取 的值`match.Groups[2]`。这`?`让人`.+` *不情愿*——它匹配尽可能少的字符。

此外，顺便说一下，目前还不清楚`(?m)`这里要实现什么。

（哦，当然，使用正则表达式解析 HTML 通常是个坏主意……）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:14:16.127

首先，我尝试了您使用[Expresso](http://www.ultrapico.com/Expresso.htm)提供的表达式，然后在[LinqPad](http://www.linqpad.net/)中尝试了- 两者都返回了整个字符串，这不是您想要匹配的。我看到 2 个问题，为什么它没有显示预期的结果：

1.  正则表达式本身
2.  示例字符串中的问题（标签不是成对的，即每个标签都`<pre>`必须由 关闭`</pre>`）

除此之外，我建议对代码进行一些改进：

1.  更改匹配方式（下面的示例使用正则表达式选项，并允许分组）
2.  添加 tagName 作为参数，添加参数以允许包含或排除标签
3.  返回集合而不是计数值

[看一下代码，它运行良好（我为LinqPad](http://www.linqpad.net/)添加了一些可选的、注释掉的`.Dump()`语句，以防您想打印出用于调试的值）：

```
Public Function FindCode(input As String, tagName as string, includeTags as boolean)
    Const grpName as string = "pregroup"
    Dim pattern As String = "(<"+tagName+">)(?<"+grpName+">(\s|\w|')+)(</"+tagName+">)"  
    Dim output As New Dictionary(Of Integer, String)
    Dim count As Integer

    Dim options as RegexOptions = RegexOptions.IgnoreCase _
          or RegexOptions.IgnorePatternWhitespace _
          or RegexOptions.MultiLine or RegexOptions.ExplicitCapture
    ' options.Dump("options")
    Dim rx as Regex = new Regex(pattern, options)
    For Each m As Match In rx.Matches(input)
        Dim val as string=nothing
        if (includeTags) 
            val = m.Value
        else
            if(m.Groups(grpName).Success)
                val = m.Groups(grpName).Value 
            end if
        end if
        if not (val is nothing)
            ' val.Dump("Found #" & count+1)
            output.Add(count, val)
            count += 1
        end if
    Next    
    Return output
End Function 
```

关于表达：

*   我使用`(\s|\w)+`而不是`.+`，因为它只包含空格和字母数字字符，而不是括号，因此不包含标签
*   通过使用（其中 nn 是字符的十六进制代码）转义与正则表达式语法的特殊字符冲突`\xnn`的字符 - 注意：这在这里不适用
*   使用组名轻松访问标签的内容

关于`Regex`代码：我添加了参数`includeTags`，以便您可以看到差异（`false`不包括它们，`true`包括它们）。请注意，您应该始终正确设置 RegexOptions，因为它会影响表达式的匹配方式。

最后，这是主要代码：

```
Sub Main
    dim input as string = "Some random markup <pre> and this stuff in the middle is what I'm after </pre> and there <pre> lots of these in one file </pre> which when I use Regexhero <pre> finds all the tags  </pre>"
    dim result = FindCode(input, "pre", false)
    dim count as integer = result.Count()
    Console.WriteLine(string.Format("Found string {0} times.", count))
    Console.WriteLine("Findings:")
    for each s in result
        Console.WriteLine(string.format("'{0}'", s.Value))
    next
End Sub 
```

这将输出：

> 找到字符串 2 次。
> 
> 发现：
> 
> '很多这些在一个文件中'
> 
> ' 找到所有标签 '

但是，还有一个问题：为什么第一个不`<pre>...</pre>`匹配？看一下子字符串`I'm after`- 它包含`'`不匹配的内容，因为它既不是空格也不是字母数字。您可以通过在正则表达式中指定来添加它`(\s|\w|')`，然后它将显示所有 3 个字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T08:19:43.077

我得到了正确的输出（*对于给定的正则表达式*），一个匹配包含：

`<pre> and this stuff in the middle is what I'm after </pre> and there </pre> lots of these in one file </pre> which when I use Regexhero <pre> finds all the tags </pre>`

除了我想你的意思是`<pre>`（不是`</pre>`）之后`and there`......

可能您想使用`(.+?)`，因为 + 默认情况下是贪婪的。

* * *

此外，目前尚不清楚为什么`(?m)`和`/B`（以及为什么最后但不是开始）。

# javascript - 使用 jquery 和 ajax 时对话框出错

> ID：15061781
> 
> 赞同：0
> 
> 时间：2013-02-25T07:10:11.110
> 
> 标签：javascript, jquery, razor

我收到一个警报：对象 XMLHttpRequest。当我在我的对话框中单击添加收件人时会发生这种情况。下面的代码将新值发布到数据库。它打开一个对话框或表单，表单的操作是向数据库添加或插入新值。我粘贴了下面的代码，因为我认为这可能是错误的根源。下面是我的代码的javascript：

```
 $(function () {
              $('#dialog-form-add').dialog({
                  autoOpen: false,
                  modal: true,
                  height: 425,
                  width: 475,
                  buttons: {
                      'Add Recipient': function () {
                          $.ajax({
                              type: "POST",
                              url: $("#add-recipient-form").attr('action'),
                              data: $("#add-recipient-form").serialize(),
                              dataType: "text/plain",
                              success: function (response) {
                                  $('#dialog-form-add').dialog('close');
                                  $("#grid").load('/Default/ #grid', function () {
                                      $('tbody > tr:first')
                                  .effect("highlight", {}, 2000);
                                  });
                              },
                              error: function (response) {
                                  alert(response);
                                  $('#dialog-form').dialog('close');
                              }
                          });
                      },
                      Cancel: function () {
                          $('#dialog-form-add').dialog('close');
                      }
                  }
              });
              $('#requestdate').datepicker({ dateFormat: 'yy-mm-dd' });

              $('#add-recipient')
              .button().click(function () {
                  $('#dialog-form-add').dialog('open');
              });

          }); 
```

# wpf - WPF：等待动画窗口块

> ID：15061787
> 
> 赞同：0
> 
> 时间：2013-02-25T07:10:46.947
> 
> 标签：wpf, vb.net, multithreading, animation

我在 SO 和其他地方看到了几个类似的问题，但似乎没有一个对我有用。

我的项目中有一个小`Window`项目，其中包含一个[LoadingAnimation](http://elegantcode.com/2009/08/21/a-simple-wpf-loading-animation/)，我在应用程序启动时显示它并希望保持实际处理运行。这是我的启动代码：

```
Dim WaitWindow As New WaitWindow("Loading application...")
WaitWindow.Show()
LongRunningLoading()
WaitWindow.Close() 
```

这`LongRunningLoading()`是我尝试在单独的线程上运行以避免阻塞我的动画的函数：

```
Private Function LongRunningLoading() As Boolean
    Dim resetEvent As New System.Threading.ManualResetEvent(False)

    Dim RetVal As Boolean = False
    ThreadPool.QueueUserWorkItem(Sub(state)
                                    'DO SOMETHING AND RETURN RESULTS
                                    resetEvent.Set()
                                 End Sub,
                                 RetVal)

    resetEvent.WaitOne()
    Return RetVal
End Function 
```

除了加载动画没有播放外，一切都按预期工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:14:55.257

> 我究竟做错了什么？

你这样做：

```
resetEvent.WaitOne() 
```

这会阻塞 UI 线程。不要那样做。相反，请记住 UI 基本上是基于事件的 - 除非您使用 VB 11 中的异步功能，否则您必须以基于事件的方式编写代码。所以基本上当你的长时间运行的任务完成时，你需要回发到 UI 线程来执行该`WaitWindow.Close()`部分。

如果您*可以*使用 .NET 4.5 和 VB 11，则可以使用`Task.Run`为您的长时间运行的工作启动一个新任务，然后`Await`从异步方法执行该任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:14:05.380

它们都在 UI Thread 上运行，这就是加载动画等待的原因。尝试将 BackgroundWorker 用于您的 LongRunningLoading 过程，然后在需要时返回 UI 线程以获得结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T14:47:32.307

这种方法对我有用：

```
 Dim waitwindow As New WaitWindow("Loading application...")

   ThreadPool.QueueUserWorkItem( _
        Sub()
            LongRunningLoading()
            Dispatcher.Invoke(New Action(AddressOf waitwindow.Close))
        End Sub)

    waitwindow.ShowDialog() 
```

可以帮助别人。

# cocoa - 如何将 NSImage 上传到 Facebook-Graph Api（通过 HTTP POST）

> ID：15061789
> 
> 赞同：0
> 
> 时间：2013-02-25T07:11:05.760
> 
> 标签：cocoa, http, facebook-graph-api, post, nsurlrequest

这里的第一个问题......我正在拼命尝试使用 HTTP POST 请求从我的 Mac OS 应用程序（可可）将照片上传到 Facebook。使用“ [https](https://graph.facebook.com/me/photos?access_token=) ://graph.facebook.com/me/photos?access_token=.....”后跟“source=MyURLOnline.jpg”，效果很好，但我需要上传数据，而不是链接已经在网络上的图像...

所以我将“feed”切换为“photos”，并将 URL 切换为我的 NSImage 的 RAW 数据（也许“source=”到“image=”？）。但是：我将请求的标头设置为“multipart/form-data，boundary=%AaB03x”并添加一些“\r\n”和“Content-Type: image/jpeg\r\n\r\n”等到正文，但我唯一得到的是错误“（＃324）需要上传文件”......

我在 Cocoa 上有几年的经验，但对 HTTP 请求一无所知，尤其是 Graph API 的期望是什么，所以我已经阅读了我找到的所有 Facebook 帮助，我很想找到一个例子当然我犯了几个错误，但我想知道这是否可能。

任何帮助表示赞赏！

更新：非常感谢 Anvesh。如果您知道我应该发布一个 JSON，那么我花了一天时间试图弄清楚如何做到这一点，但还没有成功。这是我的代码，如果我将“source=URLOnline.jpg”发布到“提要”（并删除 HTTPHeader 和正文），我的图像就会显示在我的墙上。将我的图像数据添加到“照片”中，我收到的唯一提示是 #324 错误...想知道在哪里可以找到我应该在 HTTPBody 中准确写入的内容。

// 将 NSImage 转换为数据

```
NSImage * MyIm = [[NSImage alloc] initWithContentsOfURL:[MyLogoPath URL]];
NSData *imageData = [MyIm TIFFRepresentation];
NSBitmapImageRep *imageRep = [NSBitmapImageRep imageRepWithData:imageData];
imageData = [imageRep representationUsingType:NSPNGFileType properties:nil];

// HTTP Request with access token
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
NSString * MyStr = [@"https://graph.facebook.com/me/photos?access_token=" stringByAppendingString:FacebookToken]; // feed?access_token

[request setURL:[NSURL URLWithString:MyStr]];

[request setHTTPMethod:@"POST"];

const char *bytes = [[NSString stringWithFormat:@"&image="] UTF8String];

// const char *bytes = [[NSString stringWithFormat:@"&source=http://www.google.ca/intl/en_ALL/images/logos/images_logo_lg.gif"] UTF8String];
NSMutableData * MyData = [NSMutableData dataWithBytes:bytes length:strlen(bytes)];

// HTTP Header
NSString * boundary = [NSString stringWithFormat:@"AaB03x"];
NSString * contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];

[request addValue:contentType forHTTPHeaderField:@"Content-Type"];

// HTTP Body
NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: attachment; name=\"image\"; filename=\".jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[MyData appendData:body];
[request setHTTPBody:MyData];

[[FacebookView mainFrame] loadRequest:request];

//   NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:MyURLRequest delegate:self]; 
```

// [连接开始];

// [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

// }];

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:44:44.860

谢谢 Anvesh，在您的帮助和关于 HTTP POST 的 Cocoa 帖子中，我终于设法创建了我的 NSURLRequest 以将我的 NSImage 上传到 Facebook。我希望它将为人们将他们的 Mac App 连接到 Facebook 省去很多麻烦，因为没有 SDK。

```
// Convert the NSImage to NSData
NSData *imageData = [MyIm TIFFRepresentation];
NSBitmapImageRep *imageRep = [NSBitmapImageRep imageRepWithData:imageData];
imageData = [imageRep representationUsingType:NSPNGFileType properties:nil];

// Create the URL request with the access token
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
NSString * MyStr = [@"https://graph.facebook.com/me/photos?access_token=" stringByAppendingString:FacebookToken];

[request setURL:[NSURL URLWithString:MyStr]];

[request setHTTPMethod:@"POST"];

// Create the header and body of the request with all those settings
NSMutableData *body = [NSMutableData data];
NSString * boundary = [NSString stringWithFormat:@"Random_Boundary_Chars"];

NSString *contentType2 = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[request addValue:contentType2 forHTTPHeaderField:@"Content-Type"];

[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: attachment; name=\"image\"; filename=\".tiff\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:body];

//  [[FacebookView mainFrame] loadRequest:request];

// Send the request, not showing in the webview
NSData * returnData = [ NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil ];
NSString * returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

NSLog(@"Returned Json: %@", returnString);

//NSImage is now on Facebook's wall and we got the ID returned. 
```

# java - 检查引用库中的过滤器是否成功调用

> ID：15061792
> 
> 赞同：0
> 
> 时间：2013-02-25T07:11:10.307
> 
> 标签：java, servlets, servlet-filters

我在其中一个引用的库中有一个过滤器。我已经在我的应用程序的 web.xml 中配置了这个过滤器。

考虑我有过滤器`abcd.jar`。

我将其配置为我的 web.xml

```
<filter> 
    <filter-name>message</filter-name>
    <filter-class>com.test.myfilter</filter-class>
    <init-param> 
      <param-name>message</param-name>
      <param-value>A message for you!</param-value> 
    </init-param> 
  </filter> 
  <filter-mapping> 
    <filter-name>message</filter-name>
    <url-pattern>/test/filter2*</url-pattern> 
    <dispatcher>REQUEST</dispatcher>   
  </filter-mapping> 
```

浏览包含匹配项的 url 时`localhost:8080/test/filter2.jsp`。我可以正确访问它。但不确定我的过滤器是否被成功调用。

我无法通过在过滤器类中添加打印语句来测试它，因为它来自引用的库。

有没有其他方法可以测试它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:25:56.067

在第三方 jar 文件中创建方法断点。然后等着看断点是否被触发。

要[在 eclipse 中的第三方库中创建断点](https://stackoverflow.com/questions/370814/how-to-set-a-breakpoint-in-eclipse-in-a-third-party-library)，请在项目资源管理器中打开 jar 中的类文件，然后打开大纲，右键单击并添加断点。

# ios - 在桌子外敲击时关闭键盘

> ID：15061795
> 
> 赞同：0
> 
> 时间：2013-02-25T07:11:15.910
> 
> 标签：ios, uitableview, uikeyboard

在您将我的问题视为与此问题的重复之前：[iphone，在触摸 UITextField 之外时关闭键盘](https://stackoverflow.com/questions/5306240/iphone-dismiss-keyboard-when-touching-outside-of-textfield) 对我来说，问题是我的文本字段是我的原型单元格的一部分，它有自己的 uitableview 单元格子类，所以我不是确定尝试辞职第一响应者时如何引用文本字段。所以，我不能这样做：

```
 -(void)dismissKeyboard {
   [aTextField resignFirstResponder];
} 
```

我将如何克服这种情况？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:18:34.443

试试这个代码，它非常有用：

```
-(void)touchesBegan :(NSSet *)touches withEvent:(UIEvent *)event

{

    [aTextField resignFirstResponder];

    [super touchesBegan:touches withEvent:event];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:41:39.667

如果我猜对了，您想通过点击 outSide of 来退出键盘，`textfield`但您没有`textfield`.

尝试这个;

*   取全局文本字段，我们称之为`reftextField`
*   现在`textFieldDidBeginEditing`将引用的文本字段设置为

    ```
    - (void) textFieldDidBeginEditing:(UITextField *)textField{
        reftextField = textField;
    } 
    ```

*   现在您可以愉快地在任何按钮时钟上使用，（建议在开始编辑时添加一个透明按钮）

    ```
    - (void)dismissKeyboard {
          [reftextField resignFirstResponder];
    } 
    ```

*   或者对于辞职完成按钮试试这个。

    ```
    //for resigning on done button    
    - (BOOL) textFieldShouldReturn:(UITextField *)textField{
        [textField resignFirstResponder];
        return YES;
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:19:25.877

我认为在表格视图单元外点击时关闭键盘并不好。用户可能会不小心触摸到外面，或者他可以在输入文本时滚动，对吗？您可以使用`UITextFieldDelegate` 关闭键盘

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
 {
   [textField resignFirstResponder]
 } 
```

# php - 在php中使用ul，li格式的树结构

> ID：15061799
> 
> 赞同：0
> 
> 时间：2013-02-25T07:11:32.367
> 
> 标签：php, html

**在 php 中使用 ul、li 的树结构代码...** **在输出中我缺少 ul 或在某个地方。** 当我们单击父复选框时，我想要这个复选框，他们的孩子必须被选中，子孩子也必须被选中。

```
 <?php
        $groups = array(
                array('depth'=>0,'value'=>'DEF'),
                array('depth'=>1,'value'=>'DEF 1'),
                array('depth'=>2,'value'=>'DEF_1'),
                array('depth'=>1,'value'=>'DEF2'),
                array('depth'=>0,'value'=>'GROUP'),
                array('depth'=>1,'value'=>'GROUP1'),
                array('depth'=>1,'value'=>'GROUP2'),
                array('depth'=>2,'value'=>'GROUP2_1'),
                array('depth'=>2,'value'=>'TELUGU'),
                array('depth'=>3,'value'=>'RAM'),
                array('depth'=>0,'value'=>'GROUP3'),
                array('depth'=>1,'value'=>'GROUP3_1'),
                array('depth'=>1,'value'=>'GROUP3_2'),
                array('depth'=>1,'value'=>'GROUP3_3'),
                array('depth'=>1,'value'=>'DEF2_1'),
                array('depth'=>0,'value'=>'GROUP4'),
                array('depth'=>0,'value'=>'T8')
        );
        $count = count($groups);
        $old_depth = 0;
        echo '<ul>'.chr(13).chr(10);
        for($i = 0; $i<$count; $i++)
        {       
                if($old_depth==$groups[$i]['depth'])
                {
                    echo '<li>';
                    echo $groups[$i]['value'];
                    if(isset($groups[$i+1]))
                    {
                        if($old_depth!=$groups[$i+1]['depth']){ 
                            echo '<ul>';
                        }
                        else
                        {
                            echo '</li>';
                        }
                    }   
                }
                if($old_depth<$groups[$i]['depth'])
                {
                    echo '<li>';
                    echo  $groups[$i]['value'];
                    if(isset($groups[$i+1]))
                    {
                        if(($groups[$i]['depth'])+1==$groups[$i+1]['depth']){   
                            echo '<ul>';
                        }   
                        else
                        {
                            echo '</li>';
                            if(!($groups[$i]['depth']==$groups[$i+1]['depth']))
                            {
                                echo '</ul></li>';  
                            }
                            if($groups[$i+1]['depth']==0)
                            {
                                echo '</ul></li>';  
                            }
                        }
                    }
                    else
                    {
                        echo '</ul>';
                    }
                }   
    }
        echo '</li></ul>';
    ?> 
```

**我想要这种格式的输出。**

```
 <ul>
        <li>DEF
            <ul>
                <li>DEF1 
                    <ul>
                        <li>DEF_1</li>
                    </ul>
                </li>
                        <li>DEF2</li>
            </ul>
        </li>

        <li>GROUP
            <ul>
                <li>GROUP1</li>
                <li>GROUP2
                    <ul>
                        <li>GROUP2_1</li>
                        <li>TELUGU
                            <ul>
                                <li>RAM</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>

        <li>GROUP3
            <ul>
                <li>GROUP3_1</li>
                <li>GROUP3_2</li>
                <li>GROUP3_3</li>
                <li>DEF2_1</li>
            </ul>
        </li>

        <li>GROUP4</li>
        <li>T8</li>

    </ul> 
```

# c# - 如果使用asp.net c#驻留，如何删除子文件夹和文件

> ID：15061802
> 
> 赞同：-1
> 
> 时间：2013-02-25T07:11:44.457
> 
> 标签：c#, asp.net

我想删除位于指定路径的子文件夹中的所有子文件夹和文件。

我是 C# 编码的新手，请帮助我。

假设我有路径：“C:\Files\aaa-426962\15-02-2013\index.html”

如果我指定“C:\Files\aaa-426962”，则应删除位于“C:\Files\aaa-426962”下的所有子文件夹和文件。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T07:13:19.420

`global::System.IO.Directory.Delete(@"C:\Files\aaa-426962", true);`

# php - PHP 301 重定向 - 超过 3,000 个动态 URL

> ID：15061803
> 
> 赞同：2
> 
> 时间：2013-02-25T07:11:51.313
> 
> 标签：php, dynamic, http-status-code-301

我必须访问 3,000 多个 URL `301 redirect`。我不小心在很多 URL 中重复了城市/州的使用，这使得它们重复且太长。`if statements`我可以以编程方式为需要的 URL生成 3,000多个`301 redirected`. 但是，这将是每一页顶部的数千行代码。这是 3,000 多个 URL 中使用这种方法的 3 个示例`redirects`。

```
if($_SERVER['REQUEST_URI'] == 'central-alabama-community-college-alexander-city-alabama') {
    header("HTTP/1.1 301 Moved Permanently");
    header("Location: http://www.website.com/colleges/central-alabama-community-college-alexander-city");
    exit;
    }

if($_SERVER['REQUEST_URI'] == 'athens-state-university-athens-alabama') {
    header("HTTP/1.1 301 Moved Permanently");
    header("Location: http://www.website.com/colleges/athens-state-university-alabama");
    exit;
    }

if($_SERVER['REQUEST_URI'] == 'auburn-university-auburn-alabama') {
    header("HTTP/1.1 301 Moved Permanently");
    header("Location: http://www.website.com/colleges/auburn-university-alabama");
    exit;
    } 
```

这种方法很有效，但我担心这是不好的做法。还有另一种方法可以使用关联数组。就像这样：

```
$redirects = array('central-alabama-community-college-alexander-city-alabama' => 'central-alabama-community-college-alexander-city','athens-state-university-athens-alabama' => 'athens-state-university-alabama','auburn-university-auburn-alabama' => 'auburn-university-alabama');

if(array_key_exists($_SERVER["REQUEST_URI"], $redirects)) {
    header("HTTP/1.1 301 Moved Permanently"); 
    header("Location: http://www.website.com/colleges/$redirects[1]");
    exit;
    } 
```

我可能有一点错误，但你可以看到它应该做什么。解决这个问题的最佳方法是什么？`.htaccess`由于每个重定向的独特性，我认为我不能有效地使用。每个 URL 没有一致的变量。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:16:26.377

我会使用关联数组，但您可以使用换行符来保持它的可读性，如下所示：

```
$redirects = array(
    'central-alabama-community-college-alexander-city-alabama' => 'central-alabama-community-college-alexander-city',
    'athens-state-university-athens-alabama' => 'athens-state-university-alabama',
    'auburn-university-auburn-alabama' => 'auburn-university-alabama',
    'etc...', 'etc...'
); 
```

另一种选择是将其存储在数据库中并以这种方式查找，这样您就不需要维护 PHP 文件本身，因为安全原因可能会被锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:39:29.607

我认为您应该将重定向放在数据库中，

然后使用 .htaccess 重定向到单个 php 脚本，该脚本执行 301 重定向到正确的 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:17:13.163

我认为把它放在你的`.htaccess`文件中将是最好的解决方案。它可以很容易地实现。我也觉得这是一个比将所有逻辑都放入 PHP 文件更好的解决方案。

```
RewriteEngine On
Redirect 301 /old-page.html http://www.mysite.com/new-page.html 
```

# jruby - 拒绝连接：JRuby 1.7.3 上的 Thrift 客户端

> ID：15061805
> 
> 赞同：0
> 
> 时间：2013-02-25T07:11:58.723
> 
> 标签：jruby, thrift

我正在尝试在 JRuby 1.7.3 上使用 Thrift 客户端。错误信息总是

```
Could not connect to ::1:55674: Connection refused - Connection refused 
```

我总是可以在 ruby​​-1.9.3 上成功连接。经过多次谷歌搜索，Thrift 客户端似乎遇到了 JRuby 问题，但它应该[在 1.6.7 中得到修复](http://jira.codehaus.org/browse/JRUBY-5165)。

我应该如何解决这个问题？这是一个已知的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:53:19.700

找到了！

我正在创建我的`Thrift::ServerSocket`using `::1`. MRI 客户端将使用此功能（无论 host 是否设置为`localhost`、`::1`或`127.0.0.1`. JRuby 客户端都不会，并且会抱怨连接被拒绝。

接下来，我正在创建我的`Thrift::Client`using `::1`. 同样，JRuby 不喜欢它。

改变每一件事来`localhost`修复它。我不太明白发生了什么，但 java 显然使用的是 IPv6。

```
>lsof -i :56990
COMMAND  PID  USER   FD   TYPE SIZE/OFF NODE NAME
java    4441 codex   31u  IPv6 0t0  TCP localhost:56990 (LISTEN)
java    4441 codex   36u  IPv6 0t0  TCP localhost:56990->localhost:50439 (ESTABLISHED)
java    4875 codex   31u  IPv6 0t0  TCP localhost:50439->localhost:56990 (ESTABLISHED) 
```

# scheme - 从给定列表中找到 Collat z 序列的最大值

> ID：15061809
> 
> 赞同：0
> 
> 时间：2013-02-25T07:12:29.183
> 
> 标签：scheme, sequence, collatz

我是方案语法的新手。这是我一直在做的项目的最后一部分。我能够从给定的 Collat​​z 序列中找到最大值，但是项目的这一部分需要从多个 Collat​​z 序列列表中找到最大长度。因此，例如给出这个列表：'（（1 10）（10 200）（201 210）（900 1000），输出应该是这样的：'（20 125 89 174）我需要找到数字之间的最大长度1 到 10 然后从 10 到 200 ets 这是我的代码：

```
#lang racket
; Part I
(define (sequence n)
  (cond  [(= n 1)
      (list n)]
  [(even? n)
   ( cons n(sequence( / n 2)))]
  [(odd? n) 
   ( cons n(sequence (+(* n 3) 1))) ] ))

(sequence 10)

; Part II
(define (find-length items)
  (if (null? items)          
  (list )                   
  (cons                  
   (length (sequence(car items)))        
   (find-length (rest items))))
   )
 (find-length (list 10 16 22 90 123 169))

;Part III
(define max-in-list (lambda (ls)
(let ( (head (car ls)) (tail (cdr ls)))
  (if (null? tail)
    ; list contains only one item, return it
    head
    ; else find largest item in tail
    (let ((max-in-tail (max-in-list tail)))
      ; return the larger of 'head' and 'max-in-tail'
      (if (> head max-in-tail)
        head
        max-in-tail
      )
    )
  )
)
  ))

(define (find-max i j)
 ( if (= i j)
   (list)
  (cons
  (max-in-list (find-length(sequence i)))
  (find-max (+ 1 i ) j)
  )) 
)
(max-in-list(find-max 1 10))

(define (max-length-list items )
  (if (null? items)
  (list)

  (cons
  (find-max ? ?) ) ; how i can call this function ?
  (max-length-list (?) ) ; how i can call this function ?
  )))

(max-length-list  '((1 10) (10 200) (201 210) (900 1000) )) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:58:29.403

您传递给`max-length-list`的列表中的每个项目都是一个包含两个数字和一个的列表`nil`，例如`(cons 1 (cons 2 '()))`。
第一个数字是`(car (car items))`。
第二个是`(car (cdr (car items)))`。

或者，如果您`let ((head (car items))`是 ，那么它们是`(car head)`和`(car (cdr head))`。

递归调用是微不足道的；你已经用 处理了第一个元素`find-max`，现在你只需要处理其余的元素。你显然已经知道如何做到这一点，因为你已经做到了。

# google-chrome - Sticky footer, with Concrete5 and Google Chrome?

> ID：15061811
> 
> 赞同：0
> 
> 时间：2013-02-25T07:12:34.610
> 
> 标签：google-chrome, footer, sticky, concrete5

I'm making a website for a friend of mine, and he wanted it set up in a CMS. So i decided to make it in Concrete5 which is a CMS i know how to use. But i've encountered a website breaking error! The sticky footer isn't working on Google Chrome?

[http://test.gamersnation.dk/](http://test.gamersnation.dk/) <-- This is the website, and i just CAN'T seem to figure out whats wrong. I will link the CSS in a pastebin for you guys.

Pastebin - [http://pastebin.com/RHjCaVGw](http://pastebin.com/RHjCaVGw)

I hope for some help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:12:40.653

需要注意的几件事...看起来您正在加载外部脚本，就好像它们本地安装在您的主题文件夹中一样。这会在控制台中引发一些错误。此外，一旦您清除了这一点，您将加载多个 jquery 实例（加载的版本 Concrete5 加上您在页脚中指定的版本）。

否则，请尝试添加：

```
overflow: auto; 
```

到 .content-wrapper 选择器。

# php - php cannot load pecl http extension

> ID：15061813
> 
> 赞同：0
> 
> 时间：2013-02-25T07:12:40.190
> 
> 标签：php, apache, http, plesk, pecl

I have installed pecl_http on a PLESK server (which seems to be successful) but for some reason, the http extension will not load into PHP.

```
var_dump(extension_loaded("http")); 
```

gives me bool(false).

`pecl info pecl_http` gives me a lot of info and if I run `php -me` http is also listed.

php -i | grep "http_request" gives me:

```
http_request => N/A => 0 => 0
http_request_datashare => GLOBAL => 1 => 0
http_request_pool => N/A  => 0 => 0 
```

and if I run `pecl run-tests -p pecl_http` I get a lot of FAILs

and I am also getting

```
Fatal error: Call to undefined function http_get() 
```

http.so is located inside /usr/lib/php/modules/ which is also defined as the extension dir in php.ini - all other extensions loads fine.

What have I missed?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:38:08.483

如果改变会发生什么

```
enable_dl = Off 
```

至

```
enable_dl = On 
```

在 php.ini 中运行

```
php -r "dl('http.so');" 
```

?

# php - Class method naming issues - conflicts with extended class?

> ID：15061816
> 
> 赞同：2
> 
> 时间：2013-02-25T07:12:44.950
> 
> 标签：php, class

This is less of an issue, and more of a best practice question - I know these are subject to opinion, but I'm sure there must be a standard convention for this particular problem.

Let's say I've got two classes, `Account` and `Associate`.

`Account` contains several methods which are useful to `Associate`, and so naturally I'd extend the `Account` class to `Associate`.

However, an issue of course arises when I have two methods with the same name e.g. `create()`.

So far to counteract this instead of extending the parent class, I've been instantiating it as a variable in the child classes `__construct()` method, and then calling methods through that, e.g. `$this->Account->create();`.

Is there another way, e.g. a norm for using an extended classes methods while still having a method of the same name in the child class?

Any answers would be greatly appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:05:51.203

> Account 包含几个对 Associate 有用的方法，因此我很自然地将 Account 类扩展为 Associate。

不，这不是自然的，你在滥用继承。或者你会说一个同事**是一个**帐户？如果它**有**帐户，请使用组合。如果不是，但帐户类具有对关联类有用的方法，它们可能根本不应该在帐户类中。将它们提取到一个或多个其他类，Account 和 Associate 都可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:25:38.327

`$this`如果您在子类方法中，则将调用子类方法。但是，如果您想要父方法，则可以`parent::create();`从子方法中调用。

但那是如果您绝对需要扩展 Account 类，这听起来没有必要。如果“Account”类有公共方法，那么你不需要扩展它，你可以在实例化类之后调用它们：

```
$account = new Account();
$account->create(); 
```

或者，如果它是一个公共静态方法：

```
$creation = Account::create(); 
```

# animation - How to relocate face points in opencv / face distortion

> ID：15061821
> 
> 赞同：6
> 
> 时间：2013-02-25T07:13:10.033
> 
> 标签：animation, opencv, image-processing, computer-vision, face-recognition

I have to simulate facial expressions on a face image ( say open mouth ). For this I first extracted the facial feature points and found the corners of the lips. Now I need to deform the image by moving the points down.

![enter image description here](../Images/fae33dee8f17bfa515c90a801b65e964.png)

In the above image I need to move the points ( 2 ) and ( 3 ) to some distance left and right respectively. And point ( 18 ) and ( 19 ) littele bit down. So that I will get an expression like opened mouth.

**My Questions:**

1) Is this the above way right to proceed to simulate facial expression?

**2) If it is right how to move the points and create a new image in opencv?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:37:52.993

人们在该领域使用的一项近期调查和技术课程如下：http: [//old.siggraph.org/publications/2006cn/course30.pdf](http://old.siggraph.org/publications/2006cn/course30.pdf)

TL：博士。在任何绝对意义上，没有“正确”的方式来做到这一点。您需要以可计算的方式定义您的目标。然后找出除了图像数据本身之外，您还需要哪些附加（先验）信息。在你决定你需要做什么之前摆弄“纹理扭曲”或其他插值方案是浪费时间。

您提到“像张开嘴一样的表情”，我将其解释为您希望生成一张与真实面部相似的图像，如果拍摄对象张着嘴拍摄的话。您发现的标记显然没有提供足够的信息 - 特别是，它们没有表达任何“嘴”的概念。事实上，这个概念在图像中无处可寻。因此，严格来说，除非您向其中投入更多信息，否则您的任务是无法解决的。

我建议你看看上面指出的论文，然后重新考虑你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:10:56.957

所以，我们又来了..

我已经看到很多人从这些点使用 delauny 三角剖分，然后在 opengl 甚至 opencv 中使用纹理翘曲或扭曲。

[https://github.com/MasteringOpenCV/code/tree/master/Chapter7_HeadPoseEstimation](https://github.com/MasteringOpenCV/code/tree/master/Chapter7_HeadPoseEstimation)

看起来很相关，“MasteringOpencv”书的部分内容在 google.books

# php - PHP - 标题 404 未触发 htaccess ErrorDocument

> ID：15061822
> 
> 赞同：1
> 
> 时间：2013-02-25T07:13:10.897
> 
> 标签：php, apache, .htaccess, http-status-code-404, errordocument

这不是我的确切 PHP，因为它相当复杂，但它是相同的一般想法。

```
if($_GET['page'] == ".htaccess"){
    header("HTTP/1.0 404 Not Found");
} 
```

发生这种情况时，Apache 不会加载 .htaccess 文件中设置的 404 页面。我知道 404 有效，因为当我转到一个不存在的页面时，我得到了指定的 404 页面。

有什么方法可以让指定的 404 页面加载而无需手动转储 404 页面文件的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:28:11.530

由于 Apache 已经确定该文件确实存在，它不会再次查找 404。

一种解决方法可能是实际上将`Location`-header 发送到实际不存在的页面并让 Apache 处理它。另一个可能是通过 PHP 获取 404 页面内容并将其与`Status: 404`-header一起输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:39:22.060

这可能有效

```
if (strstr($_SERVER['REQUEST_URI'],'.htaccess')){
    header('HTTP/1.0 404 Not Found');   
    exit();
} 
```

# hadoop - Secure Oozie Web Console not working from my Windows machine

> ID：15061823
> 
> 赞同：3
> 
> 时间：2013-02-25T07:13:13.730
> 
> 标签：hadoop, kerberos, oozie

I have setup a secure(Kerberos) Oozie environment in CentOS 6.3 using CDH 4.1.2\. I am able to view the Oozie web console from CentOS machine which is hosted in server. But is there a way to view the webconsole from my local Windows machine.

I have tried creating a HTTP principal with my windows machine as hostname. I am able to get a valid ticket for HTTP principal. But when I open the Oozie Web Console, I get the following error

**org.apache.hadoop.security.authentication.client.AuthenticationException: GSSException: Defective token detected (Mechanism level: GSSHeader did not find the right tag)**

Am I missing something. Help me guys.

Thanks,

Vishnu Ganth

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-11T07:27:11.747

发生此错误是因为您的浏览器发送 NTLM 身份验证请求而不是 kerberos。

在 Internet Explorer 中执行以下步骤，

1.  转到**Internet 选项**
2.  在**安全**选项卡中，选择**Local Intranet**。
3.  单击下面的**自定义级别**，确保仅在**用户身份验证**部分下的**Intranet 区域中自动登录。**
***   在**Internet 选项**中，选择**高级**选项卡并确保启用在安全部分下选择的**集成 Windows 身份验证。****

 **完成上述步骤后，它将在 Internet Explorer 和 google chrome 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-12T16:08:21.167

如果您从 Cross 领域访问它，您的基于寡妇的客户端应该知道 KDC 位置以创建正确的 SPNEGO 令牌。您需要在 AD 中为该类型的用户创建单独的策略，或者您可以从命令行手动在客户端机器的注册表中添加映射，以便他们了解您的 Hadoop 领域 KDC：

ksetup /addkdc HADOOP.DOMAIN.COM hadoop.nodewithkdc.com

ksetup /addhosttorealmmap hadoop.nodewithkdc.com HADOOP.DOMAIN.COM**

# flash-cs6 - 如何在 Flash Pro CS6 中定位文本字段？

> ID：15061830
> 
> 赞同：0
> 
> 时间：2013-02-25T07:13:28.300
> 
> 标签：flash-cs6

我正在将一个大的 .fla 文件从 AS2.0 更新到 AS3.0 并收到以下警告：

> 警告：ActionScript 3.0 不支持文本字段变量名称。用于文本字段“_textField”的变量“_text”将不会被导出。字体应该嵌入任何可以在运行时编辑的文本，而不是具有“使用设备字体”设置的文本。使用文本 > 字体嵌入命令嵌入字体。

有没有**快速**定位违规符号的方法？Flash Pro“查找”功能似乎对此没有帮助（或其他任何事情，至少在我的 Windows 7 计算机上）。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:32:04.707

电影资源管理器面板将在字段内的文本后面的括号中列出文本字段的变量名称。例如：

这是我的字段中的一些文本， (myTextVariable) , (TimesNewRoman, 12 pts)

# cocos2d-android - 如何在 Cocos2d android 中的移动精灵上制作一个矩形？

> ID：15061834
> 
> 赞同：1
> 
> 时间：2013-02-25T07:13:38.147
> 
> 标签：cocos2d-android

```
CGRect targetRect = CGRect.make(target.getPosition().x - (target.getContentSize().width),
            target.getPosition().y - (target.getContentSize().height),
            target.getContentSize().width,
            target.getContentSize().height); 
```

目标是一个精灵......我在精灵的边界上创建了一个矩形。我试图通过 draw(GL10 gl) 来完成这项工作，但我没有办法调用它。所以，如果有人知道如何做到这一点。请帮我解决这个问题...在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T13:37:04.420

```
public void draw(GL10 gl){
        gl.glColor4f(0.0f, 0.0f, 1.0f, 1.0f);
        gl.glLineWidth(4);
        CCDrawingPrimitives.ccDrawCircle(gl, centerAnchor, 20*scaleX, ccMacros.CC_DEGREES_TO_RADIANS(90), 50, true);

            CCDrawingPrimitives.ccDrawCircle(gl, CGPoint.make((handposition.x-40f)*scaleX,(handposition.y+10f)*scaleY), 45*scaleX, ccMacros.CC_DEGREES_TO_RADIANS(90), 50, true);

            CCDrawingPrimitives.ccDrawPoint(gl, centerAnchor);

        gl.glLineWidth(1);
        gl.glColor4f(1.0f, 1.0f, 1.0f, 1.0f);
        gl.glPointSize(1);
    } 
```

同样，您可以使用 ccDrawRect() 方法绘制矩形

# c# - Cannot open database "" requested by the login. The login failed. Login failed for user 'sa'

> ID：15061836
> 
> 赞同：9
> 
> 时间：2013-02-25T07:13:42.943
> 
> 标签：c#, sql-server

**UPDATE** 3:
Since no one answered my first problem as suggested by @Timen i tried using the SQL SERVER Authentication.
I Enabled the `SQL Authentication`through `SQL SERVER MANAGEMENT STUDIO` and enabled `sa` and set a simple password for it.(under .\sqlexpress). I can Successfully log in to the database by `sa` and its password from `SQL SERVER MANAGEMENT STUDIO` but when i try to do so from my application it fails with this error message :

> Cannot open database "dbNegin" requested by the login. The login failed. Login failed for user 'sa'.

I need to say that i changed the database owner to sa as well , yet i get this error!! How can i solve this now? :( By the way this is the connection string used in my application to connect to the database :

> string sqlconstring = @"Data Source=.\sqlexpress;User ID=sa;Password=123456;Initial Catalog=dbNegin";

My data base is attached by the way (its located in the address below )

> D:\TestDb\Debug\dbNegin.mdf

This is the SQL Error log:

```
2013-02-25 21:51:20.80 spid51      Starting up database 'C:\USERS\FRIEND\DESKTOP\RELEASE\DBNEGIN.MDF'.
2013-02-25 21:51:21.33 spid51      Starting up database 'mytestdb'.
2013-02-25 21:51:21.60 spid51      Starting up database 'C:\USERS\FRIEND\DESKTOP\RELEASE\DBNEGIN.MDF'.
2013-02-25 21:51:35.60 Logon       Error: 18456, Severity: 14, State: 38.
2013-02-25 21:51:35.60 Logon       Login failed for user 'sa'. Reason: Failed to open the explicitly specified database. [CLIENT: <local machine>]
2013-02-25 22:11:00.79 Server      Server resumed execution after being idle 246 seconds: user activity awakened the server. This is an informational message only. No user action is required.
2013-02-25 22:11:00.97 spid51      Attempting to load library 'xplog70.dll' into memory. This is an informational message only. No user action is required.
2013-02-25 22:11:01.04 spid51      Using 'xplog70.dll' version '2007.100.1600' to execute extended stored procedure 'xp_msver'. This is an informational message only; no user action is required.
2013-02-25 22:57:29.06 spid53      Starting up database 'C:\USERS\FRIEND\DESKTOP\RELEASE\DBNEGIN.MDF'.
2013-02-25 22:58:40.51 Logon       Error: 18456, Severity: 14, State: 38.
2013-02-25 22:58:40.51 Logon       Login failed for user 'sa'. Reason: Failed to open the explicitly specified database. [CLIENT: <local machine>]
2013-02-25 23:07:09.86 Logon       Error: 18456, Severity: 14, State: 38.
2013-02-25 23:07:09.86 Logon       Login failed for user 'sa'. Reason: Failed to open the explicitly specified database. [CLIENT: <local machine>]
2013-02-25 23:07:16.37 Logon       Error: 18456, Severity: 14, State: 38.
2013-02-25 23:07:16.37 Logon       Login failed for user 'sa'. Reason: Failed to open the explicitly specified database. [CLIENT: <local machine>] 
```

* * *

**Old Question** I am trying to connect to a database in two modes ( on my system the database is located under the SQLSERVER Data subfolder whereas in my customer system i want it to be next to my executable.For this i have two connection strings one for my own system which is :

> "Data Source=.\SQLExpress;Initial Catalog=dbNegin;Integrated Security=True"

And one for the customer machine:

> "Data Source=.\SQLExpress;AttachDbFilename=C:\Users\Master\Documents\Visual Studio 2010\Projects\ProjectNegin\ProjectNegin\bin\Debug\dbNegin.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True"

, The problem is i tried to test the second scenario on my system, I placed the latest Database next to my executable and changed the connection string and tried to run the application,For some sections of the application it connects to the database and retrieves information , but on some others it failes with this error:

> Cannot open database "dbNegin" requested by the login. The login failed. Login failed for user 'Master-PC\Master'.

`Master-PC\Master` is the name of my computer! I don't remember using it in my connection string and have no idea where it came from and how i can get rid of it.To be even worst, now my former connection string fails as well with this error !!.
I need to say this that before i try the my second connection string (the one next to executable file) i renamed the database inside `SQLSERVER` `DATA` sub folder so that i don't miss anything and i can only connect to the database through atatchfile method (to avoid the possible probable connection to the to my default database connection string) When i tried to use my former connection string, i renamed back my database to its original name (i mean the one inside DATA sub folder ) . but i am still getting this error . How can i solve this problem ?

* * *

`UPDATE`: When i tried using `SQL SEVER MANAGEMENT STUDIO` to see my database the database reads as:

> (Recovery Pending...)

and I cant do anything about it ( since it says it must be either repaired or dropped! and i cant find a repair menu !)

`UPDATE 2:` I tried deleting the database form Management Studio and re attaching it ! After deleting it form the database lists in Management studio.
Now I can't re attach it again i get the error :

> ## TITLE: Microsoft SQL Server Management Studio
> 
> Failed to retrieve data for this request. (Microsoft.SqlServer.Management.Sdk.Sfc)
> 
> For help, click: [http://go.microsoft.com/fwlink?ProdName=Microsoft%20SQL%20Server&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft%20SQL%20Server&LinkId=20476)
> 
> ------------------------------ ADDITIONAL INFORMATION:
> 
> An exception occurred while executing a Transact-SQL statement or batch. (Microsoft.SqlServer.ConnectionInfo)
> 
> * * *
> 
> CREATE FILE encountered operating system error 5(failed to retrieve text for this error. Reason: 15105) while attempting to open or create the physical file 'C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\New folder\dbNegin.mdf'. (Microsoft SQL Server, Error: 5123)
> 
> For help, click: [http://go.microsoft.com/fwlink?ProdName=Microsoft%20SQL%20Server&ProdVer=10.00.2531&EvtSrc=MSSQLServer&EvtID=5123&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft%20SQL%20Server&ProdVer=10.00.2531&EvtSrc=MSSQLServer&EvtID=5123&LinkId=20476)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:29:53.973

这个话题回答了我的问题：你可以在那里找到很好的信息：
[这个问题的原因以及如何解决它](http://www.sqlservercentral.com/Forums/Topic1423758-391-1.aspx?Update=1)。
这是页面截图：

![在此处输入图像描述](../Images/51045fa957aee6076dda7d988f5ed96f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:28:39.870

如果您在您和您的客户之间使用 LAN 连接，请使用此连接字符串。

```
"Data Source=Master-PC\Master;;Initial Catalog=dbNegin;Integrated Security=True;Connect Timeout=30;User Instance=True" 
```

或者

```
"Data Source=Master-PC\Master\SQLExpress;Initial Catalog=dbNegin;Integrated Security=True;Connect Timeout=30;User Instance=True" 
```

对于数据源，您还可以使用 PC 的 IP 地址。这会帮助你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T08:03:58.060

而不是Windows身份验证尝试sqlserver身份验证模式..这可能对你有用..

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-12-02T00:08:21.767

仅更改您的连接字符串！

不

1.  删除旅游连接字符串
2.  为 SQL Server 身份验证创建密码
3.  创建新表格
4.  添加数据网格查看器
5.  通过您创建的密码将您的datagrid viwer与数据库连接起来

现在通过密码游览 app.config 生成新的连接字符串和数据库标识符

如果您更改连接字符串仅不起作用

# jquery - jPlayer playlist for streaming media

> ID：15061838
> 
> 赞同：1
> 
> 时间：2013-02-25T07:13:52.390
> 
> 标签：jquery, stream, jplayer

Trying to find a way to get a playlist for [jPlayer](http://www.jplayer.org) to stream audio or video.

[This page](http://www.jplayer.org/latest/demo-02-jPlayerPlaylist/) showed the way to have a playlist for jPlayer but that is not for streaming purpose while [this page](http://www.jplayer.org/latest/demo-08/) showed the way to stream an audio.

Just cannot find a way.. and I think there is no code to paste here as a playlist for non-streaming media and a way to stream media can't go together.

Any way out there?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T12:33:27.190

[我在这里遇到了和大卫](https://groups.google.com/forum/#!msg/jplayer/X-6JdjWun8Y/Nw1aKM-sLJsJ)一样的问题：昨天它没有工作（当我点击播放或点击播放列表中的标题时没有发生任何事情），但今天它奇迹般地按预期工作。在此过程中，我尝试了无数不同的参数组合，但这几乎是最简单的方法，我昨天一定首先尝试过。

这是现在对我有用的完整代码。我希望你能发现你的方法有什么不同，这可能会导致你观察到的任何错误。

```
<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
<meta charset="UTF-8" />
<title>Your Siblings – Left Embed on Event Page</title>
<link rel="stylesheet" type="text/css" media="all" href="style.css" />
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js'></script>
<link href="jPlayer/skin/jplayer.blue.monday.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jPlayer/jquery.jplayer.min.js"></script>
<script type="text/javascript" src="jPlayer/add-on/jplayer.playlist.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    var playlist = [
        {
            "title": "Fractured Frequencies",
            "mp3": "http://radio.ponyvillelive.com:8032/stream?sid=1;stream.nsv"
        },
        {
            "title": "Brony Radio",
            "mp3": "http://dj.bronyradio.com:8000/stream?sid=1;stream.nsv"
        },
        {
            "title": "Alicorn Radio",
            "mp3": "http://radio.ponyvillelive.com:8008/stream?sid=1;stream.nsv"
        },
        {
            "title": "Fillydelphia Radio",
            "mp3": "http://listen.fillyradio.com:8000/;stream.nsv"
        },
        {
            "title": "Luna Radio",
            "mp3": "http://radio.ponyvillelive.com:8002/stream?sid=1;stream.nsv"
        },
        {
            "title": "Everypony Radio",
            "mp3": "http://denver5.yourstreamnow.com:8071/;stream.nsv"
        },
        {
            "title": "Ponyville FM",
            "mp3": "http://radio.ponyvillelive.com:8014/stream?sid=1;stream.nsv"
        },
        {
            "title": "Sonic RadioBoom",
            "mp3": "http://radio.ponyvillelive.com:8020/stream?sid=1;stream.nsv"
        }
    ];
    new jPlayerPlaylist({
        jPlayer: "#jquery_jplayer_1",
        cssSelectorAncestor: "#jp_container_1"
    }, playlist, {
        swfPath: "jPlayer",
        supplied: "mp3",
        wmode: "window",
        preload: "none",
        keyEnabled: true
    });
});
</script>
</head>
<body>
<div id="viewer">

<div id="jquery_jplayer_1" class="jp-jplayer"></div>

<div id="jp_container_1" class="jp-audio">
    <div class="jp-type-playlist">
        <div class="jp-gui jp-interface">
            <ul class="jp-controls">
                <li><a href="javascript:;" class="jp-previous" tabindex="1">previous</a></li>
                <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
                <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
                <li><a href="javascript:;" class="jp-next" tabindex="1">next</a></li>
                <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
                <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
                <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
                <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
            </ul>
            <div class="jp-progress">
                <div class="jp-seek-bar">
                    <div class="jp-play-bar"></div>

                </div>
            </div>
            <div class="jp-volume-bar">
                <div class="jp-volume-bar-value"></div>
            </div>
            <div class="jp-current-time"></div>
            <div class="jp-duration"></div>
            <ul class="jp-toggles">
                <li><a href="javascript:;" class="jp-shuffle" tabindex="1" title="shuffle">shuffle</a></li>
                <li><a href="javascript:;" class="jp-shuffle-off" tabindex="1" title="shuffle off">shuffle off</a></li>
                <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
                <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
            </ul>
        </div>
        <div class="jp-playlist">
            <ul>
                <li></li>
            </ul>
        </div>
        <div class="jp-no-solution">
            <span>Update Required</span>
            To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
        </div>
    </div>
</div>

</div>
</body>
</html> 
```

# google-chrome - Twitter Bootstrap zooms text differently on Webkit (Chrome, Safari)

> ID：15061841
> 
> 赞同：5
> 
> 时间：2013-02-25T07:14:07.033
> 
> 标签：google-chrome, twitter-bootstrap, safari, webkit, zooming

I'm looking into using Twitter Bootstrap (with some customisations) for a site rebuild.

One problem is with page/text zooming on Webkit browsers like Chrome and Safari. These don't rewrap the text to the screen when zooming. Instead the text continues off the page requiring horizontal scrolling.

For an example, compare zooming the text on the Bootstrap home page on Chrome/Safari and Firefox - on Firefox even the responsive menubar works properly when there's not enough room for the menu text due to zooming.

This seems to be a known Webkit "feature" with pixel-based layouts, which can be solved by using em-based widths, which looks impractical with the standard Bootstrap (way too much to change and maintain).

So, is there any Bootstrap derivative around which uses em-based widths, or is there any way to add a snippet of css etc to work around the problem? It's the only thing so far stopping me from using Bootstrap on this project. I want the site to be accessible for lower vision users, who often zoom.

Would be nice if Webkit fixed the bug/feature to behave like other browser engines but I don't see that happening anytime soon unfortunately.

[update] Just to be clear, it's the full similar action to Firefox I'm after: zooming text stays constrained within columns, AND media queries realise the space on the screen is limited when text is zoomed and adjust the menu and number of columns accordingly. Fluid layouts help with constraining main article text, but the menus and sidebars are still a mess on Chrome/Safari when zooming.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:47:53.653

您可以将滑块设置为您网站的低视力访问者的*可访问性* 选项。只需使用 jquery 调整文本大小。无需缩放页面。看这个例子：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('a').click(function() {
            var os = $('p').css('font-size');
            var num = parseFloat(os, 10);
            var px = os.slice(-2);

            $('p').css('font-size', num / 1.4 + px);
            if (this.id == 'larger') {
                $('p').css('font-size', num * 1.4 + px);
            }
        });
    });
</script>

<a href="#" id ="larger">Larger [+]</a>
<br>
<a href="#" id="smaller">Smaller [-]</a>
<p>
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T01:40:01.983

抢，

您可以通过在引导程序中使用流体容器，然后将其 max-width 属性设置为百分比宽度来完成您想要的操作，例如：

```
[class*="container-"] {
margin: auto;
padding: 0 20px;
max-width: 90%;
} 
```

html 看起来像：

```
<div class="content">
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span12">
                 put your contents in here
            </div>
        </div>
    </div>
</div> 
```

类内容的 div 不在容器内，可以作为背景。这就是我设置引导站点的方式，并且刚刚在 safari 和 firefox 中尝试了您正在寻找的结果。正如您所提到的，渲染必须执行浏览器的渲染引擎（在 Firefox 的情况下是壁虎，在 safari 的情况下是 webkit）。希望这可以为您解决问题。

# javascript - JQuery Ajax + Dropdown Menu function only runs once

> ID：15061844
> 
> 赞同：0
> 
> 时间：2013-02-25T07:14:17.223
> 
> 标签：javascript, jquery, ajax

**This function only runs once. How can I get it to run multiple times?**

I have tried using live() as was suggested in another SO question, but that made no difference to the program.

```
$(function() {
  $('#chooseTeam').live('change', (function() {
      $.getJSON($SCRIPT_ROOT + '/_get_info', {
            selectedDeck: $('#chooseTeam').val()
          }, function(data) {
                 /* Do something */
          });
      }
    return false;
 }));
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T07:15:45.053

您是否尝试过准备好文档而不是 $function()

```
$(document).ready(function() {
  $('#chooseTeam').live('change', (function() {
      $.getJSON($SCRIPT_ROOT + '/_get_info', {
            selectedDeck: $('#chooseTeam').val()
          }, function(data) {
                 /* Do something */
          });
      }
    return false;
 }));
}); 
```

问候

# android - getWritableDatabase() 中的空指针异常；

> ID：15061845
> 
> 赞同：0
> 
> 时间：2013-02-25T07:14:27.263
> 
> 标签：android, exception, android-context

在我的应用程序中，我正在使用 dbhelper 类，插入到 db 工作正常，我可以访问表内容，问题是当我第二次从另一个活动调用插入方法时，在`getWritableDatabase()`. 有人可以帮我修复这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:12:54.353

可能是第二次，您将数据库打开为可读而不是关闭。我过去犯了这个错误并得到了上述错误。

# file - 在 Jtree 中显示远程目录/所有文件

> ID：15061852
> 
> 赞同：0
> 
> 时间：2013-02-25T07:15:11.967
> 
> 标签：file, sftp, jtree, jsch

我在使用 JSCH 检索文件/文件夹并将它们填充到 JTree 时遇到了一些问题。在 JSCH 中使用以下命令列出文件：

向量列表 = channelSftp.ls(path);

但我需要该列表为 java.io.File 类型。所以我可以得到 absolutePath 和 fileName，而且我不知道如何检索为 java.io.File 类型。

这是我的代码，我尝试将它用于本地目录。

```
public void renderTreeData(String directory, DefaultMutableTreeNode parent, Boolean recursive) {
        File [] children = new File(directory).listFiles(); // list all the files in the directory
        for (int i = 0; i < children.length; i++) { // loop through each
            DefaultMutableTreeNode node = new DefaultMutableTreeNode(children[i].getName());
            // only display the node if it isn't a folder, and if this is a recursive call
            if (children[i].isDirectory() && recursive) {
                parent.add(node); // add as a child node
                renderTreeData(children[i].getPath(), node, recursive); // call again for the subdirectory
            } else if (!children[i].isDirectory()){ // otherwise, if it isn't a directory
                parent.add(node); // add it as a node and do nothing else
            }
        }
    } 
```

请帮助我，谢谢之前:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T07:05:38.940

试试这个（远程服务器中的 linux）：

```
public static void cargarRTree(String remotePath, DefaultMutableTreeNode parent) throws SftpException { 
    //todo: change "/" por remote file.separator
    Vector<ChannelSftp.LsEntry> list = sftpChannel.ls(remotePath); // List source directory structure.
    for (ChannelSftp.LsEntry oListItem : list) { // Iterate objects in the list to get file/folder names.       
        DefaultMutableTreeNode node = new DefaultMutableTreeNode(oListItem.getFilename());
        if (!oListItem.getAttrs().isDir()) { // If it is a file (not a directory).
            parent.add(node); // add as a child node
        } else{
            if (!".".equals(oListItem.getFilename()) && !"..".equals(oListItem.getFilename())) {
                parent.add(node); // add as a child node
                cargarRTree(remotePath + "/" + oListItem.getFilename(), node); // call again for the subdirectory
            }
        }
    }
} 
```

在您可以调用此方法后：

```
DefaultMutableTreeNode nroot = new DefaultMutableTreeNode(sshremotedir);                
try {
    cargarRTree(sshremotedir, nroot);
} catch (SftpException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
yourJTree = new JTree(nroot); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:04:18.943

你可以在你的java bean中定义一些变量，比如

```
 Vector<String> listfiles=new Vector<String>(); // getters and setters

   Vector list = channelSftp.ls(path);
   setListFiles(list);  // This will list the files same as new File(dir).listFiles 
```

在 JSCH 中，您可以使用[ChannelSftp#realpath](http://epaul.github.com/jsch-documentation/javadoc/)绝对路径， 但不幸的是，没有办法获得带有扩展名的精确文件。但是您可以使用类似的东西来检查目标目录中是否存在该文件名。

```
 SftpATTRS sftpATTRS = null;
  Boolean fileExists = true;
    try {
    sftpATTRS = channelSftp.lstat(path+"/"+"filename.*");
        } catch (Exception ex) {
        fileExists = false;
    } 
```

# c# - 如何在 processStartInfo 中传递多个参数？

> ID：15061854
> 
> 赞同：37
> 
> 时间：2013-02-25T07:15:33.213
> 
> 标签：c#, cmd, netsh, makecert

我想从代码中运行一些`cmd`命令。`c#`我关注了一些博客和教程并得到了答案，但我有点困惑，即我应该如何传递多个参数？

我使用以下代码：

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Normal;
startInfo.FileName = "cmd.exe";
startInfo.Arguments = 
... 
```

`startInfo.Arguments`以下命令行代码的值是多少？

*   `makecert -sk server -sky exchange -pe -n CN=localhost -ir LocalMachine -is Root -ic MyCA.cer -sr LocalMachine -ss My MyAdHocTestCert.cer`

*   `netsh http add sslcert ipport=127.0.0.1:8085 certhash=0000000000003ed9cd0c315bbb6dc1c08da5e6 appid={00112233-4455-6677-8899-AABBCCDDEEFF} clientcertnegotiation=enable`

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-25T07:26:52.290

它纯粹是一个字符串：

```
startInfo.Arguments = "-sk server -sky exchange -pe -n CN=localhost -ir LocalMachine -is Root -ic MyCA.cer -sr LocalMachine -ss My MyAdHocTestCert.cer" 
```

当然，当参数包含空格时，您必须使用 \" \" 对它们进行转义，例如：

```
"... -ss \"My MyAdHocTestCert.cer\"" 
```

请参阅[MSDN](https://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.arguments(v=vs.110).aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T07:29:47.743

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Normal;
startInfo.FileName = "cmd.exe";
startInfo.Arguments = @"/c -sk server -sky exchange -pe -n CN=localhost -ir LocalMachine -is Root -ic MyCA.cer -sr LocalMachine -ss My MyAdHocTestCert.cer" 
```

使用 /c 作为 cmd 参数以在 cmd.exe 完成处理您的命令后关闭它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T07:32:49.420

```
startInfo.Arguments = "/c \"netsh http add sslcert ipport=127.0.0.1:8085 certhash=0000000000003ed9cd0c315bbb6dc1c08da5e6 appid={00112233-4455-6677-8899-AABBCCDDEEFF} clientcertnegotiation=enable\""; 
```

和...

```
startInfo.Arguments = "/c \"makecert -sk server -sky exchange -pe -n CN=localhost -ir LocalMachine -is Root -ic MyCA.cer -sr LocalMachine -ss My MyAdHocTestCert.cer\""; 
```

`/c`告诉 cmd 一旦命令完成就退出。之后的所有内容都是`/c`您要运行的命令（在 内`cmd`），包括所有参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-09T03:52:13.003

记得包括 System.Diagnostics

```
ProcessStartInfo startInfo = new ProcessStartInfo("myfile.exe");        // exe file
startInfo.WorkingDirectory = @"C:\..\MyFile\bin\Debug\netcoreapp3.1\"; // exe folder

//here you add your arguments
startInfo.ArgumentList.Add("arg0");       // First argument          
startInfo.ArgumentList.Add("arg2");       // second argument
startInfo.ArgumentList.Add("arg3");       // third argument
Process.Start(startInfo); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T07:28:02.003

对于 makecert，你`startInfo.FileName`应该是 makecert 的完整路径（或者如果它在标准路径中，则只是 makecert.exe）然后`Arguments`现在`-sk server -sky exchange -pe -n CN=localhost -ir LocalMachine -is Root -ic MyCA.cer -sr LocalMachine -ss My MyAdHocTestCert.cer`我对证书存储的工作方式有点不熟悉，但`startInfo.WorkingDirectory`如果你可能需要设置重新引用证书存储之外的 .cer 文件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-04T12:30:35.433

## 只需在命令行中使用“&&”。

```
 StartInfo.Arguments = @"/C cd C:\Users\yoooo\Desktop && echo This is a sample text file > sample.txt" 
```

# node.js - 我只需要使用带有快速渲染的模板语言吗？

> ID：15061860
> 
> 赞同：1
> 
> 时间：2013-02-25T07:16:02.510
> 
> 标签：node.js, express

我从最简单的学习节点和表达，当使用它渲染视图时`res.render('view',{data:data})`，它只是一个适合视图的模板引擎，如玉。我可以不使用普通的html吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:29:16.350

可以，但这是我在学习 Node.js 时遇到的问题。如果您不想使用模板引擎，您仍然可以让 Node 以静态方式吐出 HTML 文件的内容。例如（非常基本的例子）：

```
var base = '/path/to/your/public_html',
  fs = require('fs'),
  http = require('http'),
  sys = requrie('sys');

http.createServer(function (req,res) {
  path = base + req.url;
  console.log(path);

  path.exists(path, function(exists) {
    if(!exists) {
      res.writeHead(404);
      res.write('Bad request: 404\n');
      res.end();
    } else {
      res.setHeader('Content-Type','text/html');
      res.statusCode = 200;
      var file = fs.createReadStream(path);
      file.on("open",function() {
        file.pipe(res);
      });
      file.on("error",function(err) {
        console.log(err);
      });
    }
  });
}).listen(80);

console.log('server on tcp/80'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:32:02.147

Node 的伟大之处在于它迫使您将模板与逻辑分开（在一定程度上，您无论如何都可以将大量逻辑压缩到模板中）。

我不喜欢 Jade 并使用 EJS，直到发现客户端 EJS 与服务器端不同，并且您无法真正在浏览器中重用模板（当您开始渲染页面时，您在某些时候肯定会想要）在浏览器中）。您可以重复使用简单的 EJS 模板，但不能重复使用带有部分的模板（因为您的大多数模板都是如此）。

经过大量搜索和反复试验，我最终使用了非常快（实际上是最快的）、轻量级（只有 140 行 JavaScript）、可以轻松集成到 Express 中的 doT 模板（通过以下consolidate 的模式——你还不能直接用 doT 使用 consolidate），可以在浏览器中使用（加载部分的功能必须不同，但又很容易）。

doT 似乎具有我在其他模板引擎中没有看到的功能，具有非常优雅的语法，最接近把手（我最喜欢的），但仍然允许内部使用普通的 JavaScript（这就是我首先选择 EJS 的原因）。

# jquery - jQuery 单击和中间按钮行为

> ID：15061862
> 
> 赞同：0
> 
> 时间：2013-02-25T07:16:16.753
> 
> 标签：jquery, onclick, anchor

我有这样的html代码：

```
<ul>
  <li>
    <a href="#foo">foo</a>
  </li>
</ul>
```

当用户单击该项目时，将调用单击处理程序。

我想要的是：

*   更改处理程序方法中的哈希（使用`window.location.hash`）
*   当用户通过鼠标左键单击时，应调用处理程序
*   当用户通过鼠标中键点击时（例如在 Chrome 中），链接应该在新标签中打开，但不应在当前页面上调用处理程序
*   支持与链接的其他交互：当用户在活动链接上按下回车键（他可以使用`tab`键激活它）或者如果他使用 vimperator 或 vimium 等浏览器扩展

如果我在处理程序中间按钮中更改哈希而不打开新选项卡（但已在当前页面上调用处理程序），但如果不调用处理程序，例如中间按钮单击或按 ctrl 或按下时单击，则已解决

如果我从处理程序代码中删除哈希更改，中间按钮会打开新选项卡，但处理程序会在当前页面上调用。

请给我一些建议如何实现我的目标：我应该`mousedown`与点击处理程序一起实现处理程序还是可能有更方便的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:40:51.343

我写了一篇关于左键单击与其他鼠标按钮的文章，应该会有所帮助：[http ://www.jacklmoore.com/notes/click-events](http://www.jacklmoore.com/notes/click-events)

它假设您使用的是 jQuery。特定的按钮按下在属性下的事件对象中指示`which`。

# symfony - Symfony2 单元测试编译器通过

> ID：15061866
> 
> 赞同：7
> 
> 时间：2013-02-25T07:16:31.327
> 
> 标签：symfony, phpunit

有人对如何对 Symfony2`CompilerPassInterface::process()`实例进行单元测试有任何建议吗？

特别是，我要测试的通常处理标记项目，将方法调用添加到“管理器”服务。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T13:13:32.523

如果您想单独测试它，则必须模拟`ContainerBuilder`, 并模拟它返回的任何服务定义。

不过，这通常很烦人。所以我倾向于写一个集成测试。事实上，这也是 symfony 内核的大多数编译器通过测试所做的。

你会：

*   创建一个实例`ContainerBuilder`
*   注册一些存根服务
*   创建编译器通道
*   称呼`$pass->process($container);`
*   断言通行证正确地完成了它的事情

例如，请查看[RemoveUnusedDefinitionsPassTest](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/DependencyInjection/Tests/Compiler/RemoveUnusedDefinitionsPassTest.php)。

# entity-framework - EF Code First：主键与外键相同

> ID：15061867
> 
> 赞同：3
> 
> 时间：2013-02-25T07:16:31.447
> 
> 标签：entity-framework, ef-code-first, fluent-interface

我有两节课

```
public class Product
{
    public Guid Id { get; set; }
    public string ProductDetails { get; set; }
}

public class SpecialProductDetails
{
    public Guid Product_Id { get; set; } // PK and FK to Product class
    public string SpecialName { get; set; }
    public string SpecialDescription { get; set; }

    public virtual Product Product { get; set; }
} 
```

`SpecialProductDetails`与`Product`类 1-1 映射并且是可选的。它共享相同的 PrimaryKey 和 ForeignKey。

在 Fluent API 中，我正在像这样映射这种关系（内部`SpecialProductDetails`）

```
public SpecialProductDetails()
{
    HasKey(p => p.Product_Id);
    HasRequired(p => p.Product).WithMany().HasForeignKey(p => p.Product_Id).WillCascadeDelete(true);
} 
```

尝试生成数据库时，这给了我这个错误

\tSystem.Data.Entity.Edm.EdmAssociationEnd：：多重性在关系“SpecialProductDetails_Product_Source”中的角色“SpecialProductDetails_Product_Source”中无效。因为从属角色指的是关键属性，所以从属角色的多重性的上限必须是“1”。

如何在 EF Code First 上将列设置为 PK 和 FK？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-07T22:20:21.357

我很确定你已经解决了这个问题，但是我遇到了同样的问题，我找到的解决方案是：

```
 public SpecialProductDetails()
    {
        HasKey(p => p.Product_Id);
        HasRequired(p => p.Product).WithOptional();
    } 
```

“值得注意的是，当我们使用 fluent API 映射一对一关联时，我们不需要像使用 HasForeignKey 方法映射一对多关联时那样指定外键。因为只有 EF支持主键上的一对一关联，它会自动在数据库中创建主键上的关系。”

在[http://weblogs.asp.net/manavi/associations-in-ef-4-1-code-first-part-3-shared-primary-key-associations之后](http://weblogs.asp.net/manavi/associations-in-ef-4-1-code-first-part-3-shared-primary-key-associations)

# ruby - 使 YAJL 在格式错误的 JSON 上抛出异常

> ID：15061868
> 
> 赞同：0
> 
> 时间：2013-02-25T07:16:32.573
> 
> 标签：ruby, json, strict, yajl

Yajl.load 并不总是抛出解析错误。例如：

```
irb(main):004:0>     Yajl.load('[[],"NOOOOOOOOOOOoooooooooooo!')

=> [[]] 
```

它只是忽略了最后那个微小的细节，并继续它到那一点。如果整个字符串都不好，我希望它抛出，就像原生 JSON.parse 方法一样：

```
irb(main):005:0> JSON.parse('[[],"NOOOOOOOOOOOoooooooooooo!')

JSON::ParserError: 399: unexpected token at '"NOOOOOOOOOOOoooooooooooo!'
from /home/me/.rvm/gems/ruby-1.9.3-p392/gems/json-1.7.5/lib/json/common.rb:155:in `parse'
from /home/me/.rvm/gems/ruby-1.9.3-p392/gems/json-1.7.5/lib/json/common.rb:155:in `parse'
from (irb):5 
```

...

有没有办法在 YAJL 中强制执行“严格”模式？或者，如果我希望确保我在合法的 JSON 字符串上进行操作，是否每次都需要通过本机 JSON.parse 调用来验证它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:24:23.880

这是[yajl 项目中已经存在的问题](https://github.com/brianmario/yajl-ruby/issues/95)。不幸的是，它还没有被修复。

也许给这个问题+1，或者问为什么这个问题没有得到处理或回应。

# ios - 在 iOS 中以编程方式的 ADInterstitialAd 屏幕截图给出黑色图像

> ID：15061874
> 
> 赞同：0
> 
> 时间：2013-02-25T07:16:48.230
> 
> 标签：ios, objective-c, xcode, ipad, iad

当我展示 iAd`_parentView(UIView)`并创建此图像时`_parentView`。

我在 a 上显示此图像（resultingImage）`UIImageView`，然后此图像为空白（全黑）。

如何以`iAd`编程方式获取屏幕截图？

```
- (id)initWithView:(UIView *)currentView
{
    self = [super init];
    if (self) {
        _parentView = currentView;
        self.interstitial = [[ADInterstitialAd alloc] init];
        self.interstitial.delegate = self;
    }
    return self;
}

- (void)interstitialAdDidLoad:(ADInterstitialAd *)interstitialAd
{
   [interstitialAd presentInView:_parentView];
   [self takeScreenshot];
}

- (void)takeScreenshot
{
    CGRect      rect = CGRectMake(0, 0, _parentView.frame.size.width, _parentView.frame.size.height);

    UIGraphicsBeginImageContext(rect.size);
    [_parentView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T11:22:38.457

您是否检查了该设备是否是 iPad？
基于[Apple 官方文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/iAd_Guide/Full-ScreenAdvertisements/Full-ScreenAdvertisements.html)。

看起来你做对了。你可能想检查一下

```
 [interstitialAd presentInView:_parentView]; 
```

在继续之前返回 true 或 false。

如果这没有帮助，请尝试使用委托功能：

```
- (void)interstitialAd:(ADInterstitialAd *)interstitialAd didFailWithError:(NSError *)error; 
```

如果它返回任何错误。

编辑：尝试使用键窗口中的根视图控制器。这个对我有用。

```
if([self.interstitial presentInView:_view])
{ NSLog(@"Able to present in view"); }
else
{ [self.interstitial presentFromViewController:[UIApplication sharedApplication].keyWindow.rootViewController]; } 
```

# c++ - 在 for 循环中定义一个大数组会影响性能吗？

> ID：15061883
> 
> 赞同：1
> 
> 时间：2013-02-25T07:17:58.743
> 
> 标签：c++, performance, for-loop

代码如下所示：

```
for (int i = 0; i <= LARGE_NUMBER; ++i) {
    int x[LARGE_NUMBER] = {0};
    // do something with x
} 
```

我认为`x`每次`for-loop`wades thru时都会创建数组`0~LARGE_NUMBER`，所以这会影响性能吗？会`-O2`有所帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:21:11.057

您的数组将在每次迭代中归零，所以肯定会。

这段代码是线性时间，数组的每个元素都将被初始化为零：

```
int x[LARGE_NUMBER] = {0}; 
```

这是一个常数时间，只是堆栈指针的增量：

```
int x[LARGE_NUMBER]; 
```

性能将取决于 LARGE_NUMBER 是否真的很大。如果 LARGE_NUMBER 的大小为一个或两个缓存行，那么您不会注意到第一个版本和第二个版本之间的差异。但如果 LARGE_NUMBER 真的很大 - 你会的。但是，如果您的数组比性能差异大得多，那么您肯定需要将其移动到堆中。堆栈空间很昂贵，并且在其中分配兆字节的数据是错误的。

如果您的数组真的很大，您可以在堆上分配一次并`memset`在迭代之间调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T07:35:30.193

LARGE_NUMBER 的预期值是多少？

考虑到宽对象的堆栈分配可能导致比系统可以分配给线程的堆栈空间更宽，并且您可能甚至在性能开始之前就面临“内存不足”问题。（堆栈需要快速，因此不超过几兆字节：理想情况下它必须适合处理器缓存）

如果是这种情况，则 std::vector （留在堆栈中，但管理堆中的分配）会更好。

但是在内部定义它，使它在每次迭代时都被创建/销毁。现在：这些创建/销毁是否有意义（我的意思是：他们是否采取了一些有意义的每次重复的操作）或者您的问题只是在每次迭代时初始化为零？如果是这样的话，我可能会做类似的事情：

```
{ //just begin a scope block
    std::vector<int> v(LARGE_NUMBER); //allocates LARGE_NUMBER int-s on heap
    for (int i = 0; i <= LARGE_NUMBER; ++i)
    {
        std::fill(v.begin(), v.end(), 0); //reset at every iteration
        // other stuff with v
    }
} //here the vector and associated memory is finally eliminated 
```

请注意，std:fill 的性能就像数组的初始化一样是线性的，但是您避免了在每个周期分配/取消分配的这种方式。

无论如何，根据定义，您的问题具有 O ²复杂性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T07:58:12.147

取决于您的应用程序...我假设您有固定的数组大小？它将使用：[http ://www.cplusplus.com/reference/cstring/memset/](http://www.cplusplus.com/reference/cstring/memset/)

```
#include <stdio.h>
#include <string.h>

int* x = new int[LARGE_NUMBER];
    for (int i = 0; i <= LARGE_NUMBER; ++i) {
        memset(x,0,LARGE_NUMBER);
        // do something with x
    }
    //some more stuff that needs x 
    delete[] x; 
```

顺便说一句：我手头没有 C/C++ 来测试代码。

# sql - 计算 SQL Server 数据库中的列

> ID：15061884
> 
> 赞同：1
> 
> 时间：2013-02-25T07:18:03.553
> 
> 标签：sql, sql-server, tsql, sql-update

我有这样的桌子

```
 id buildingId order  title
 --------------------------
  1      2      null  test1
  2      2      null  test2
  3      2      null  test3
  4      3      null  test4
  5      3      null  test5
  6      5      null  test6 
```

我需要计算每一行的订单价值。我需要在执行 sql 查询后得到这个表

```
 id buildingId order  title
  1      2      0     test1
  2      2      1     test2
  3      2      2     test3
  4      3      0     test4
  5      3      1     test5
  6      5      0     test6 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:19:56.793

```
WITH recordList
AS
(
    SELECT  ID, buildingID, [order], title,
            ROW_NUMBER() OVER (PARTITION BY buildingID
                                ORDER BY ID) rn
    FROM    tableName
)
UPDATE recordList
SET [order] = rn - 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/7323a/1)

# mysql - 如何使用 vb.net 备份 mysql 数据库？

> ID：15061885
> 
> 赞同：1
> 
> 时间：2013-02-25T07:18:28.250
> 
> 标签：mysql, vb.net

所有这些代码都在工作......这是我备份中的代码......

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Process.Start("C:\xampplite\mysql\bin\mysqldump.exe", " -u root -p db_hrm -r ""C:\Users\Rodmar\Desktop\Desktop.sql""")

End Sub 
```

这是我的恢复代码

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click

    Dim myProcess As New Process()
    myProcess.StartInfo.FileName = "cmd.exe"
    myProcess.StartInfo.UseShellExecute = False
    myProcess.StartInfo.WorkingDirectory = "C:\xampplite\mysql\bin"
    myProcess.StartInfo.RedirectStandardInput = True
    myProcess.StartInfo.RedirectStandardOutput = True
    myProcess.Start()
    Dim myStreamWriter As StreamWriter = myProcess.StandardInput
    Dim mystreamreader As StreamReader = myProcess.StandardOutput
    myStreamWriter.WriteLine("mysql.exe -u root -p db_hrm < C:\Users\Rodmar\Desktop\Desktop.sql")
    myStreamWriter.Close()
    myProcess.WaitForExit()
    myProcess.Close()
    'Process.Start("C:\porgram files\mysql\bin\mysql.exe", "-u username -p password --database=dbname > -r ""C:\back.sql""")

End Sub 
```

问题是。如何备份数据库并选择要保存的文件位置。以及如何将其还原到我保存数据库的位置。

# iphone - 在 iPad 表格视图中更新进度条时卡住

> ID：15061888
> 
> 赞同：1
> 
> 时间：2013-02-25T07:18:34.283
> 
> 标签：iphone, ipad, ios6, ios-simulator

嗨，我在更新到 UI 时通过在每次迭代中调用以下方法来更新 ProgressBar，同时进度条卡住了，同时我得到了正确的传播值。

```
-(void)updateProgressForTestApple:(OSVersion)version withValue:(float)val{
switch (module) {
    case myModule:
    {
        [self.myCustomCell.progressView setProgress:val animated:YES];
        NSLog(@"Updating Progress Bar");
    }
        break; 
```

提前致谢 ...

# javascript - 单击按钮时，Javascript会隐藏某些表格行

> ID：15061891
> 
> 赞同：1
> 
> 时间：2013-02-25T07:18:39.350
> 
> 标签：javascript, html-table, hide, rows, show

当我单击按钮并保留某些行时，我想隐藏表格中的某些行。例如，我单击了“显示基于火焰的冠军”按钮。它只会显示具有火属性的英雄，并将隐藏其余的（来自同一张表）。我单击了另一个名为“显示基于水的英雄”的按钮，该按钮将仅显示具有水属性的英雄并隐藏其余的等，并且对于其他按钮也是相同的。任何人都可以为它制作代码吗？我对JS没有经验。

这是主表的样子（只是一个示例，还有更多的表行）。

```
<table border="1" width="800">
<thead><tr>
    <th>Hero</th>
    <th>Class</th>
    <th>Offensive Skill</th>
    <th>Passive Skill</th>
    <th>Ultimate</th>
</tr></thead>
<tbody>
    <tr><td><a class="holy">Arcana</a></td>
    <td>the Arcane Manipulator</td>
    <td> - </td>
    <td> - </td>
    <td>Arcane Destroyer</td></tr>

    <tr><td><a class="fire">Azakiel</a></td>
    <td>the Blood Mage</td>
    <td> - </td>
    <td>Elf Blood</td>
    <td>Call of the Phoenix</td></tr>

    <tr><td><a class="wind">Bahamut</a></td>
    <td>the King of the Skies</td>
    <td> - </td>
    <td> - </td>
    <td>Mega Flare</td></tr>

    <tr><td><a class="dark">Carinblack</a></td>
    <td>the Dark Assailant</td>
    <td>Sword Bash</td>
    <td> - </td>
    <td>Blade of the Dark</td></tr>

    <tr><td><a class="earth">Dran</a></td>
    <td>the Steel Beast</td>
    <td>Rushing Tackle</td>
    <td> - </td>
    <td>Rolling Thunder</td></tr>

    <tr><td><a class="water">Fenrir</a></td>
    <td>the Water Emperor</td>
    <td>Water Barrage</td>
    <td> - </td>
    <td>Waterfall</td></tr>

    <tr><td><a class="thunder">Larza</a></td>
    <td>the Lightning Heroine</td>
    <td>Staff of Lightning</td>
    <td> - </td>
    <td>Storm Surge</td></tr>

    <tr><td><a class="thunder">Razor</a></td>
    <td>the Thunder Emperor</td>
    <td>Thunder Strike</td>
    <td> - </td>
    <td>Thunderstorm</td></tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:22:03.583

使用[`show()`](http://api.jquery.com/show/)和[`hide()`](http://api.jquery.com/hide)

例如，当单击“显示基于火焰的英雄”时，请执行以下操作：

```
$('tbody tr').hide() //Hide all rows
$('tbody tr:has(a.fire)').show() //Show all fire rows 
```

[这是一个包含所有代码的jsfiddle](http://jsfiddle.net/MChfU/)

HTML 代码：

```
<html><head>
<script type="text/javascript" src="http://code.jquery.com/jquery-2.0.0b1.js"></script>
<script type="text/javascript">

 function show(champ){
  $('tbody tr').hide()   
  $('tbody tr:has(a.'+champ+')').show()
 }

</script>

</head>
<body>
  <table border="1" width="800">
<thead><tr>
    <th>Hero</th>
    <th>Class</th>
    <th>Offensive Skill</th>
    <th>Passive Skill</th>
    <th>Ultimate</th>
</tr></thead>
<tbody>
    <tr><td><a class="holy">Arcana</a></td>
    <td>the Arcane Manipulator</td>
    <td> - </td>
    <td> - </td>
    <td>Arcane Destroyer</td></tr>

    <tr><td><a class="fire">Azakiel</a></td>
    <td>the Blood Mage</td>
    <td> - </td>
    <td>Elf Blood</td>
    <td>Call of the Phoenix</td></tr>

    <tr><td><a class="wind">Bahamut</a></td>
    <td>the King of the Skies</td>
    <td> - </td>
    <td> - </td>
    <td>Mega Flare</td></tr>

    <tr><td><a class="dark">Carinblack</a></td>
    <td>the Dark Assailant</td>
    <td>Sword Bash</td>
    <td> - </td>
    <td>Blade of the Dark</td></tr>

    <tr><td><a class="earth">Dran</a></td>
    <td>the Steel Beast</td>
    <td>Rushing Tackle</td>
    <td> - </td>
    <td>Rolling Thunder</td></tr>

    <tr><td><a class="water">Fenrir</a></td>
    <td>the Water Emperor</td>
    <td>Water Barrage</td>
    <td> - </td>
    <td>Waterfall</td></tr>

    <tr><td><a class="thunder">Larza</a></td>
    <td>the Lightning Heroine</td>
    <td>Staff of Lightning</td>
    <td> - </td>
    <td>Storm Surge</td></tr>

    <tr><td><a class="thunder">Razor</a></td>
    <td>the Thunder Emperor</td>
    <td>Thunder Strike</td>
    <td> - </td>
    <td>Thunderstorm</td></tr>
    </tbody>
</table>
<button onclick="show(&quot;fire&quot;)">Show fire</button>
<button onclick="show(&quot;water&quot;)">Show water</button>
<button onclick="show(&quot;thunder&quot;)">Show thunder</button>
<button onclick="show(&quot;dark&quot;)">Show dark</button>
<button onclick="show(&quot;earth&quot;)">Show earth</button>
<button onclick="show(&quot;holy&quot;)">Show holy</button>
<button onclick="show(&quot;wind&quot;)">Show wind</button>
<button onclick="$('tbody tr').show()  ">Show all</button>
</body></html> 
```

# apache - 使用 apache HTMLEmail 发送电子邮件附件时，邮件正文中出现额外的行

> ID：15061892
> 
> 赞同：0
> 
> 时间：2013-02-25T07:18:43.053
> 
> 标签：apache, apache-commons

```
I am using following java code to send email ticket which is Html code in a mail body and also sending same  ticket as attachment a html file. but  some extra lines coming in the body for email clients other than Microsoft outlook like g mail etc,Here is the code,

HtmlEmail service = new HtmlEmail();
//getting body as Html content    
String `strBodyText` = getSpotTicketContent(bobTicketVO,strBhLogoCid);      
FileWriter fw = new FileWriter(file.getAbsoluteFile());      
BufferedWriter bw = new BufferedWriter(fw);   
bw.write(strBodyText);    
bw.close();     
URL filePath = new URL("file:///"+file.getPath());      
service.attach(filePath, ""+orderType+""+dealID+".html""Baydonhill Order Ticket");     
service.send(); 
```

每一件事似乎都是很好的附件和身体正常出现，除了一个额外的线来身体，比如 ------=_Part_8_20713850.1361775519720--

我正在使用 Apache common emails 1.2 和 java 1.4`enter code here`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T08:31:20.130

你能更详细地描述一下吗？因为我认为问题出在您使用以下代码读取文件时：

```
FileWriter fw = new FileWriter(file.getAbsoluteFile());      
BufferedWriter bw = new BufferedWriter(fw);   
bw.write(strBodyText);    
bw.close(); 
```

也许当您阅读文件时，使用该脚本时包含了一些字符串？具体我不知道...

# php - PHP：警告：session_start() [function.session-start]：无法发送会话缓存限制器

> ID：15061893
> 
> 赞同：0
> 
> 时间：2013-02-25T07:18:45.847
> 
> 标签：php, logging, web

编辑：我能够找到我的答案并解决问题。然而，它给我带来了一个新的问题。

编辑2：我也能够解决这个问题。如果允许，我将在 5 小时后发布解决方案。再次感谢。

我不断收到以下错误：

> 警告：session_start() [function.session-start]：无法在第 18 行发送会话缓存限制器...
> 
> 警告：无法修改标头信息 - 第 145 行的 ... 已发送标头

代码可以在这里找到

```
<?php $page = 'home'; ?>

<?php

define('INCLUDE_CHECK',true);

require 'connect.php';
require 'functions.php';
// Those two files can be included only if INCLUDE_CHECK is defined

session_name('tzLogin');
// Starting the session

session_set_cookie_params(2*7*24*60*60);
// Making the cookie live for 2 weeks

session_start();    <------LINE 18

if($_SESSION['id'] && !isset($_COOKIE['tzRemember']) && !$_SESSION['rememberMe'])
{ 
```

还有更多的代码，所有这些都在左括号之前。我已经在上面显示了第 18 行。

140 - 147 行

```
if(count($err))
{
$_SESSION['msg']['reg-err'] = implode('<br />',$err);
}   
header("Location: index.php");      <------ LINE 145
exit;
} 
```

我在这里搜索了论坛，并在这个问题上看到了很多答案，但没有一个专门适用于此。我也知道使用'@'只会隐藏错误而不解决它。

再次提前感谢。

# eclipse - JDK 和 Eclipse 无法正常工作

> ID：15061894
> 
> 赞同：0
> 
> 时间：2013-02-25T07:18:48.547
> 
> 标签：eclipse, environment-variables, adt, java

好的，所以我今天把我的电脑擦干净了。在尝试安装 Eclipse 和 JDK 时，我遇到了障碍。

*   我从安卓开发者那里安装了“ADT Bundle”。
*   我将JDK安装到默认路径

当我尝试打开 Eclipse 时，它​​找不到我的 JRE（据我所知，它来自我从 oracle 网站下载的 JDK）。我知道它已正确安装，因为我可以导航到安装路径并使用 exe 运行 java 程序。

iv 听说过一些关于修改环境变量以使其找到它但没有任何效果...我没有列出“PATH”变量...。我确实有一个“路径”...但是更改任何一个都无济于事解决问题...我已经多次完成此安装，它应该可以工作...

对此主题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:45:13.337

“路径”环境变量需要定义或更新。如果您在 Windows 8 中工作，则可以按照以下步骤进行导航：

1.  打开 > 文件资源管理器
2.  右键单击“计算机”
3.  选择“属性”
4.  在左侧选择“高级系统设置”
5.  在“高级”选项卡下，选择“环境变量”
6.  在 System 下的列表中找到 Path 目录
7.  通过在最后一个条目后输入分号然后手动键入 Java 目录的位置来编辑目录。
8.  输入完整地址后，（应类似于 --> C:\Program File\Java\JDK1.7\bin）单击屏幕上的“确定”以保存更改。

更新路径时要记住的事情。确保将路径指向兼容版本。如果您下载了 64 位 eclipse，请选择 64 位 Java。如果您不记得您下载的 Eclipse 版本，请根据 Eclipse 网站上提供的文件检查您的下载文件名。如果您按照这些步骤操作，Eclipse 应该可以毫无问题地打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:21:51.177

既然你把它擦干净了，你有没有尝试再次下载 Java 运行时环境（也许你也擦了它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T21:23:47.910

这个问题的解决方案是这样的：

“Path”环境变量需要在-user variables- NOT系统变量下创建一个名为“Path”的新用户变量并将值设置为java编译器的绝对路径

对我来说，它类似于 C:\Program File\Java\JDK1.7\bin

那应该可以解决eclipse找不到JDK / JRE的问题...

如果它抱怨“JNI”，那么您需要确保您正在运行 JDK 和 Eclipse 作为相同的架构（64 位 Java 不能与 32 位 Eclipse 一起使用）

# perl - 无法在 gmail.pl 第 9 行通过包“www::Mechanize”（也许您忘记加载“www::Mechanize”？）找到对象方法“new”， 2号线

> ID：15061898
> 
> 赞同：2
> 
> 时间：2013-02-25T07:19:17.533
> 
> 标签：perl, www-mechanize

我对 Perl 很陌生，但是我在使用 perl 模块方面有点专业知识，我曾在 HTML::table extract 上工作，但是当我处理 Mechanize 模块时，它一直说我在运行时无法通过包定位对象方法“新”下面的程序

```
 #!user/Perl/bin;
                 use strict;
                 use warnings;
                 use WWW::Mechanize;
                 my $URL ="https://accounts.google.com"   
                 my $username = <>;
                 my $password = <>;
                 my $mech =new  www::Mechanize();
                 $mech -> get($url);
$mech -> form_name('formname');
$mech -> field ('username' =>$username);
$mech -> field ('password' =>$password);
$mech -> click('signin'); 
```

我也看过堆栈溢出成员给出的一些指南，并按照以下步骤安装了 Mechanize::Firefox

```
cpan WWW::Mechanize::Firefox
cpan MozRepl
cpan MozRepl::RemoteObject 
```

但是我在运行我的代码时不断收到同样的错误

请在这里帮我..

谢谢 N@veen

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T07:53:17.283

Perl 区分大小写。`www::Mechanize`不一样`WWW::Mechanize`（后者有大写W）。

您正在加载（大写）`WWW::Mechanize`，然后尝试创建一个`www::Mechanize`不存在的 class (lower-case) 对象。

此外，通常认为最好避免使用间接对象语法。也就是说，使用

```
my $mech = WWW::Mechanize->new(); 
```

代替

```
my $mech = new WWW::Mechanize(); 
```

（但这不是你的问题的原因。）

# sql - 选择独特的组合加一列

> ID：15061899
> 
> 赞同：0
> 
> 时间：2013-02-25T07:19:17.270
> 
> 标签：sql, distinct, inner-join

有人可以告诉我如何从表格中选择一个独特的城市/州组合吗？我知道您可以选择不同的值

```
SELECT DISTINCT city, state
FROM table 
```

但我需要选择独特的组合。换句话说，我需要选择与另一个条目不具有相同城市/州值的组合。据我所知，这些是不同的。

我要做的是获取这些唯一值并列出带有供应商名称的城市/州组合。这是我到目前为止所拥有的：

```
SELECT v.vendor_name, v2.vendor_state, v2.vendor_city
FROM vendors v JOIN (SELECT DISTINCT vendor_state, vendor_city
                FROM vendors) v2
ON v.vendor_state = v2.vendor_state and v.vendor_city = v2.vendor_city 
```

这导致

```
VENDOR_NAME                    VENDOR_STATE VENDOR_STATE
--------------------------------------------------------
Reiter's Scientific & Pro Books DC  Washington
Register of Copyrights          DC  Washington
National Information Data Ctr   DC  Washington
Zee Medical Service Co          IA  Washington
Small Press                     MI  Traverse City
Vision Envelope & Printing      CA  Gardena
Enterprise Communications Inc   VA  Mclean
Publishers Weekly               OH  Marion
.
.
. 
```

如您所见，组合不是唯一的（华盛顿特区有不止一个列表）我只需要显示出现一次的城市/州组合

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:25:22.463

我相信您正在寻找：

```
SELECT vendor_name, vendor_state, vendor_city
FROM vendors v
WHERE NOT EXISTS
(
    SELECT 1
    FROM vendors v2
    WHERE v2.vendor_id <> v.vendor_id
    AND v2.vendor_state = v.vendor_state
    AND v2.vendor_city = v.vendor_city
) 
```

这将列出具有唯一 {state, city} 的供应商。也就是说，没有其他供应商共享相同 {state, city} 的供应商。

* * *

你也可以这样做：

```
SELECT v.vendor_name, v.vendor_state, v.vendor_city
FROM vendors v
INNER JOIN
(
    SELECT vendor_state, vendor_id
    FROM vendors
    GROUP BY vendor_state, vendor_id
    HAVING COUNT(1) = 1
) u ON v.vendor_state = u.vendor_state AND v.vendor_city = u.vendor_city 
```

# java - 我想在我的 android 应用程序中访问 twitter api，我的代码表现不佳，也没有显示任何错误

> ID：15061902
> 
> 赞同：-1
> 
> 时间：2013-02-25T07:19:36.720
> 
> 标签：java, android, twitter

我完全按照本教程在我的 android 应用程序中访问 twitter api，[http: //www.androidhive.info/2012/09/android-twitter-oauth-connect-tutorial/](http://www.androidhive.info/2012/09/android-twitter-oauth-connect-tutorial/)

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        cd = new ConnectionDetector(getApplicationContext());

        // Check if Internet present
        if (!cd.isConnectingToInternet()) {
            // Internet Connection is not present
            alert.showAlertDialog(MainActivity.this, "Internet Connection Error",
                    "Please connect to working Internet connection", false);
            // stop executing code by return
            return;
        }

        // Check if twitter keys are set
        if(TWITTER_CONSUMER_KEY.trim().length() == 0 || TWITTER_CONSUMER_SECRET.trim().length() == 0){
            // Internet Connection is not present
            alert.showAlertDialog(MainActivity.this, "Twitter oAuth tokens", "Please set your twitter oauth tokens first!", false);
            // stop executing code by return
            return;
        }

        // All UI elements
        btnLoginTwitter = (Button) findViewById(R.id.btnLoginTwitter);
        btnUpdateStatus = (Button) findViewById(R.id.btnUpdateStatus);
        btnLogoutTwitter = (Button) findViewById(R.id.btnLogoutTwitter);
        txtUpdate = (EditText) findViewById(R.id.txtUpdateStatus);
        lblUpdate = (TextView) findViewById(R.id.lblUpdate);
        lblUserName = (TextView) findViewById(R.id.lblUserName);

        // Shared Preferences
        mSharedPreferences = getApplicationContext().getSharedPreferences(
                "MyPref", 0);

        /**
         * Twitter login button click event will call loginToTwitter() function
         * */
        btnLoginTwitter.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

            String tweet = txtUpdate.getText().toString();
                new LoginTask().execute(tweet);
            }
        });

        /**
         * Button click event to Update Status, will call updateTwitterStatus()
         * function
         * */
        btnUpdateStatus.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // Call update status function
                // Get the status from EditText
                String status = txtUpdate.getText().toString();

                // Check for blank text
                if (status.trim().length() > 0) {
                    // update status
                    new updateTwitterStatus().execute(status);
                } else {
                    // EditText is empty
                    Toast.makeText(getApplicationContext(),
                            "Please enter status message", Toast.LENGTH_SHORT)
                            .show();
                }
            }
        });

        /**
         * Button click event for logout from twitter
         * */
        btnLogoutTwitter.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // Call logout twitter function
                logoutFromTwitter();
            }
        });

        /** This if conditions is tested once is
         * redirected from twitter page. Parse the uri to get oAuth
         * Verifier
         * */
        if (!isTwitterLoggedInAlready()) {
            Uri uri = getIntent().getData();
            if (uri != null && uri.toString().startsWith(TWITTER_CALLBACK_URL)) {
                // oAuth verifier
                String verifier = uri
                        .getQueryParameter(URL_TWITTER_OAUTH_VERIFIER);

                try {
                    // Get the access token
                    AccessToken accessToken = twitter.getOAuthAccessToken(
                            requestToken, verifier);

                    // Shared Preferences
                    Editor e = mSharedPreferences.edit();

                    // After getting access token, access token secret
                    // store them in application preferences
                    e.putString(PREF_KEY_OAUTH_TOKEN, accessToken.getToken());
                    e.putString(PREF_KEY_OAUTH_SECRET,
                            accessToken.getTokenSecret());
                    // Store login status - true
                    e.putBoolean(PREF_KEY_TWITTER_LOGIN, true);
                    e.commit(); // save changes

                    Log.e("Twitter OAuth Token", "> " + accessToken.getToken());

                    // Hide login button
                    btnLoginTwitter.setVisibility(View.GONE);

                    // Show Update Twitter
                    lblUpdate.setVisibility(View.VISIBLE);
                    txtUpdate.setVisibility(View.VISIBLE);
                    btnUpdateStatus.setVisibility(View.VISIBLE);
                    btnLogoutTwitter.setVisibility(View.VISIBLE);

                    // Getting user details from twitter
                    // For now i am getting his name only
                    long userID = accessToken.getUserId();
                    User user = twitter.showUser(userID);
                    String username = user.getName();

                    // Displaying in xml ui
                    lblUserName.setText(Html.fromHtml("<b>Welcome " + username + "</b>"));
                } catch (Exception e) {
                    // Check log for login errors
                    Log.e("Twitter Login Error", "> " + e.getMessage());
                }
            }
        }

    }

    /**
     * Function to login twitter
     * */

   public class LoginTask extends AsyncTask<String, String, String> {
        protected void onPostExecute(Bitmap result) {
            boolean everythingGood = false;
            if (everythingGood) {
                showToast("Success!");
                startActivity(new Intent());
            } else {
                showAlert("Error!");
            }
        }        

        private void showToast(String string) {
            // TODO Auto-generated method stub

        }

        private void showAlert(String string) {
            // TODO Auto-generated method stub

        }

        @Override
        protected String doInBackground(String... args) {
            String tweet = args[0];
            loginToTwitter();

            return null;

        }

        private void startActivity(Intent intent) {
            // TODO Auto-generated method stub

        }
    }

   private void loginToTwitter() {
        // Check if already logged in
        if (!isTwitterLoggedInAlready()) {
            ConfigurationBuilder builder = new ConfigurationBuilder();
            builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
            builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
            twitter4j.conf.Configuration configuration = builder.build();

            TwitterFactory factory = new TwitterFactory(configuration);
            twitter = factory.getInstance();

            try {
                requestToken = twitter
                        .getOAuthRequestToken(TWITTER_CALLBACK_URL);
                this.startActivity(new Intent(Intent.ACTION_VIEW, Uri
                        .parse(requestToken.getAuthenticationURL())));
            } catch (TwitterException e) {
                e.printStackTrace();
            }
        } else {
            // user already logged into twitter
            Toast.makeText(getApplicationContext(),
                    "Already Logged into twitter", Toast.LENGTH_LONG).show();
        }
    }

   public void showToast(String string) {
        // TODO Auto-generated method stub

    }

    /**
     * Function to update status
     * */
    class updateTwitterStatus extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MainActivity.this);
            pDialog.setMessage("Updating to twitter...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting Places JSON
         * */
        protected String doInBackground(String... args) {
            Log.d("Tweet Text", "> " + args[0]);
            String status = args[0];
            try {
                ConfigurationBuilder builder = new ConfigurationBuilder();
                builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
                builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);

                // Access Token
                String access_token = mSharedPreferences.getString(PREF_KEY_OAUTH_TOKEN, "");
                // Access Token Secret
                String access_token_secret = mSharedPreferences.getString(PREF_KEY_OAUTH_SECRET, "");

                AccessToken accessToken = new AccessToken(access_token, access_token_secret);
                Twitter twitter = new TwitterFactory(builder.build()).getInstance(accessToken);

                // Update status
                twitter4j.Status response = twitter.updateStatus(status);

                Log.d("Status", "> " + response.getText());
            } catch (TwitterException e) {
                // Error in updating status
                Log.d("Twitter Update Error", e.getMessage());
            }
            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog and show
         * the data in UI Always use runOnUiThread(new Runnable()) to update UI
         * from background thread, otherwise you will get error
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    Toast.makeText(getApplicationContext(),
                            "Status tweeted successfully", Toast.LENGTH_SHORT)
                            .show();
                    // Clearing EditText field
                    txtUpdate.setText("");
                }
            });
        }

    }

    /**
     * Function to logout from twitter
     * It will just clear the application shared preferences
     * */
    private void logoutFromTwitter() {
        // Clear the shared preferences
        Editor e = mSharedPreferences.edit();
        e.remove(PREF_KEY_OAUTH_TOKEN);
        e.remove(PREF_KEY_OAUTH_SECRET);
        e.remove(PREF_KEY_TWITTER_LOGIN);
        e.commit();

        // After this take the appropriate action
        // I am showing the hiding/showing buttons again
        // You might not needed this code
        btnLogoutTwitter.setVisibility(View.GONE);
        btnUpdateStatus.setVisibility(View.GONE);
        txtUpdate.setVisibility(View.GONE);
        lblUpdate.setVisibility(View.GONE);
        lblUserName.setText("");
        lblUserName.setVisibility(View.GONE);

        btnLoginTwitter.setVisibility(View.VISIBLE);
    }

    /**
     * Check user already logged in your application using twitter Login flag is
     * fetched from Shared Preferences
     * */
    private boolean isTwitterLoggedInAlready() {
        // return twitter login status from Shared Preferences
        return mSharedPreferences.getBoolean(PREF_KEY_TWITTER_LOGIN, false);
    }

    protected void onResume() {
        super.onResume();
    }

} 
```

**此代码是否正确？登录后它必须显示我的推文列，如更新状态，就像那样，但它不会进入下一阶段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:40:12.373

当您在主线程中进行网络操作时，Android 4 会抛出这样的异常。考虑使用 AsyncTasks 或 Handlers 或任何其他线程方式。你可以从这里开始： [http ://android-developers.blogspot.com/2009/05/painless-threading.html](http://android-developers.blogspot.com/2009/05/painless-threading.html)

样本：

```
@Override
public void onClick(View arg0) {
    new LoginTask.execute();
});

class LoginTask extends AsyncTask<Void, Void, Void> {
    @Override
    protected void onPostExecute(Bitmap result) {
        if (everythingGood) {
            showToast("Success!");
            startActivity(new Intent());
        } else {
            showAlert("Error!");
        }
    }        

    @Override
    protected Void doInBackground(Void... params) {
        loginToTwitter();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:51:09.347

使用异步任务在单独的线程中执行此操作。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

您可以定义另一个扩展异步任务的类并在该类中完成您的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:00:40.130

找到下面的工作代码

```
public class LoginTask extends AsyncTask<Void, Void, RequestToken> {

    private ProgressDialog progressDialog;

    public LoginTask() {
        progressDialog = ProgressDialog.show(MainActivity.this, "", "Loading. Please wait...", false);
    }
    @Override
    protected RequestToken doInBackground(Void... params) {
        // TODO Auto-generated method stub
        ConfigurationBuilder builder = new ConfigurationBuilder();
        builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
        builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
        Configuration configuration = builder.build();

        TwitterFactory factory = new TwitterFactory(configuration);
        twitter = factory.getInstance();

        try {
            return requestToken = twitter
                    .getOAuthRequestToken(TWITTER_CALLBACK_URL);
        } catch (TwitterException e) {
            e.printStackTrace();
            return null;
        }
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        MainActivity.this.setProgressBarIndeterminateVisibility(true);
    }

    @Override
    protected void onPostExecute(RequestToken result) {
        // TODO Auto-generated method stub
        MainActivity.this.setProgressBarIndeterminateVisibility(false);
        progressDialog.dismiss();           
        try {
            requestToken = result;              
            MainActivity.this.startActivity(new Intent(Intent.ACTION_VIEW, Uri
                    .parse(requestToken.getAuthenticationURL())));
        } catch(Exception e) {
            e.printStackTrace();
            alert.showAlertDialog(MainActivity.this, "Internet Connection Timeout Error",
                    "Please try later.", false);
        }
    }

} 
```

你能把你的logcat错误。这样就很容易找到为什么会出现空指针异常。

# string - 谷歌采访：寻找字符串之间的疯狂距离

> ID：15061908
> 
> 赞同：10
> 
> 时间：2013-02-25T07:20:12.290
> 
> 标签：string, algorithm

这个问题是在谷歌面试时问我的。我可以做到 O(n*n) ... 我可以在更好的时间做到这一点。字符串只能由 1 和 0 组成。

定义：

X & Y 是由 0 或 1 组成的字符串

`D(X,Y)`= 从 X 和 Y 中删除开头共同的东西。然后从两个字符串中添加剩余的长度。

例如

`D(1111, 1000)`= 只有第一个字母是常见的。所以剩下的字符串是`111`& `000`。因此结果`length("111")`& `length("000")`= 3 + 3 = 6

`D(101, 1100)`= 只有前两个字母是常见的。所以剩下的字符串是`01`& `100`。因此结果`length("01")`& `length("100")`= 2 + 3 = 5

很明显，确实发现如此疯狂的距离将是线性的。（米）。

现在的问题是

给定 n 个输入，比如说

```
1111
1000
101
1100 
```

找出可能的最大疯狂距离。

n 是输入字符串的数量。m 是任何输入字符串的最大长度。

O(n ² * m) 的解决方案非常简单。可以以更好的方式完成吗？假设 m 是固定的。我们能比 O(n^2) 做得更好吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-25T08:14:03.383

将字符串放入树中，其中 0 表示向左，1 表示向右。所以例如

```
1111
1000
101
1100 
```

会产生一棵树

```
 Root
             1
          0     1
         0 1*  0  1
        0*    0*    1* 
```

其中 * 表示一个元素在那里结束。建造这棵树显然需要`O(n m)`.

现在我们必须找到[树的直径](http://www.geeksforgeeks.org/diameter-of-a-binary-tree/)（两个节点之间的最长路径，这与“疯狂距离”相同）。那里提出的优化算法会命中树中的每个节点一次。最多有`min(n m, 2^m)`这样的节点。

所以如果`n m < 2^m`，那么算法就是`O(n m)`。

如果`n m > 2^m`（并且我们必须有重复的输入），那么算法仍然是`O(n m)`从第一步开始的。

这也适用于具有通用字母的字符串；对于带有字母的字母表，`k`构建一棵`k`-ary 树，在这种情况下，运行时间仍然是 O(nm)，出于同样的原因，尽管它需要`k`多倍的内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T08:14:13.787

我认为这可以通过创建一个二叉树在 O(nm) 时间内实现，其中字符串中的每个位都对路径进行编码（0 左，1 右）。[然后找到可以在 O(n) 时间内完成](http://www.geeksforgeeks.org/diameter-of-a-binary-tree/)的树节点之间的最大距离。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T08:21:25.727

这是我的解决方案，我认为它有效：

1.  从所有字符串创建二叉树。树将以这种方式构建：在每一轮中，选择一个字符串并将其添加到树中。因此，对于您的示例，树将是：

    ```
     <root>
              <1>            <empty>
     <1>            <0> 
    ```

    <1> <0> <1> <0> <1> <0> <0>

因此，从根到叶的每条路径都将代表一个字符串。

1.  现在每两片叶子之间的距离就是两根弦之间的距离。要找到疯狂的距离，您必须找到该图的直径，您可以通过 dfs 或 bfs 轻松完成。

该算法的总复杂度为：O(n*m) + O(n*m) = O(n*m)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-05T07:16:12.863

要在 O(nm) 中得到答案，只需遍历所有字符串的字符（这是一个 O(n) 操作）。我们将最多比较 m 个字符，所以这将完成 O(m)。这给出了总共 O(nm)。这是一个 C++ 解决方案：

```
int max_distance(char** strings, int numstrings, int &distance) {
    distance = 0;
    // loop O(n) for initialization
    for (int i=0; i<numstrings; i++) 
        distance += strlen(strings[i]);

    int max_prefix = 0;
    bool done = false;
    // loop max O(m)
    while (!done) {
        int c = -1;
        // loop O(n)
        for (int i=0; i<numstrings; i++) {
            if (strings[i][max_prefix] == 0) {
                done = true; // it is enough to reach the end of one string to be done
                break;  
            }

            int new_element = strings[i][max_prefix] - '0';
            if (-1 == c)
                c = new_element;
            else {
                if (c != new_element) {
                    done = true;    // mismatch
                     break;
                }
            }
        }
        if (!done) {
            max_prefix++;
            distance -= numstrings;
        }
    }

    return max_prefix;
}

void test_misc() {
    char* strings[] = { 
        "10100",
        "10101110",
        "101011",
        "101"
    };

    std::cout << std::endl;
    int distance = 0;
    std::cout << "max_prefix = " << max_distance(strings, sizeof(strings)/sizeof(strings[0]), distance) << std::endl;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-05T07:40:53.097

我认为这个问题类似于“查找两个字符串的前缀”，您可以使用 trie( [http://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie) ) 来加速搜索

三天前我有一个谷歌电话面试，但也许我失败了......

祝你好运

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-19T05:38:40.443

不知道为什么在迭代时使用树给你同样大的 O 计算复杂度而没有代码复杂度。无论如何，这是我在 javascript O(mn) 中的版本

```
var len = process.argv.length -2; // in node first 2 arguments are node and program file
var input = process.argv.splice(2);
var current;
var currentCount = 0;
var currentCharLoc = 0;
var totalCount = 0;
var totalComplete = 0;
var same = true;
while ( totalComplete < len ) {
        current = null;
        currentCount = 0;
        for ( var loc = 0 ; loc < len ; loc++) {
                if ( input[loc].length === currentCharLoc) {
                        totalComplete++;
                        same = false;
                } else if (input[loc].length > currentCharLoc) {
                        currentCount++;
                        if (same) {
                                if ( current === null ) {
                                        current = input[loc][currentCharLoc];
                                } else {
                                        if (current !== input[loc][currentCharLoc]) {
                                                same = false;
                                        }
                                }
                        }
                }
        }
        if (!same) {
                totalCount += currentCount;
        }
        currentCharLoc++;
}

console.log(totalCount); 
```

# ios - NSXMLParser：基于另一个元素解析特定元素

> ID：15061910
> 
> 赞同：1
> 
> 时间：2013-02-25T07:20:17.110
> 
> 标签：ios, objective-c, xml-parsing, nsxmlparser

我正在解析以下 XML，`NSXMLParser`但只想根据 XML 中的唯一元素解析某些元素和属性，然后中止解析。

例如，我的 XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<systems>
<system id="system1">
    <game title="game1">
        <checksums>
            <checksum value="checksumvalue1" />
        </checksums>
        <players>
            <player name="name1" description="description1" />
            <player name="name2" description="description2" />
        </players>
    </game>
</system> 
```

我希望能够仅根据 的值返回所有内容，`players`因此 如果我传递给我的方法，我只想返回在该节点中找到的具有唯一校验和的值。在 XML 中，会有其他带有校验和的游戏，但校验和始终是唯一的。`game``checksum``checksumvalue1``players``game`

到目前为止，我有一些基本的解析器代码可以从校验和值中读取元素和属性，但我不知道从那里去哪里。我还想知道`NSXMLNode`使用 XPath 是否更有意义来实现这一点。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict{

if ([elementName isEqualToString:@"checksum"] && [[attributeDict valueForKey:@"value"] isEqualToString:@"checksumvalue1"]) {
    NSString *checksumValue = [attributeDict valueForKey:@"value"];
    NSLog(@"value: %@", checksumValue);

// print players in only one game node that contains the unique checksum value
   }
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:52:05.957

您必须跟踪您是否已找到校验和以及您遇到的所有玩家。你需要一个布尔值`foundGameChecksum`和一个`NSMutableArray* players`. 不要忘记`players = [[NSMutableArray alloc] init];`

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict{

    if ([elementName isEqualToString:@"checksum"] && [[attributeDict valueForKey:@"value"] isEqualToString:@"checksumvalue1"]) {
        NSString *checksumValue = [attributeDict valueForKey:@"value"];
        NSLog(@"value: %@", checksumValue);

        foundGameChecksum = YES;
        // print players in only one game node that contains the unique checksum value
    } else if(foundGameChecksum && [elementName isEqualToString:@"player"]) {
        [players addObject:[attributeDict valueForKey:@"name"]];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if(foundGameChecksum && [elementName isEqualToString:@"players"]) {
        [parser abortParsing]; // Stop parsing
    }
} 
```

然后在`[parser parse];`执行后你将让玩家进入`players`

IE：

```
<?xml version="1.0" encoding="UTF-8"?>
<systems>
    <system id="system1">
        <game title="game1">
            <checksums>
                <checksum value="checksumvalue1" /> <!-- Found. Start adding -->
            </checksums>
            <players>
                <player name="name1" description="description1" /> <!-- Add -->
                <player name="name2" description="description2" /> <!-- Add -->
            </players> <!-- Stop adding -->
        </game>
    </system>
</systems> 
```

# java - 如何通过最大 jquery ajax http 请求实现更高的性能

> ID：15061911
> 
> 赞同：0
> 
> 时间：2013-02-25T07:20:19.263
> 
> 标签：java, jquery, ajax, jakarta-ee

我对单个事件至少有 5 到 6 个 jquery ajax 调用。我发现我的网站运行缓慢。

我认为这是加载页面需要很长时间的原因，因为页面正在加载所有 http 请求。

我在每个 ajax 调用中都放置了 async: true 和 noCache:true 。

我有办法解决这个问题吗？

```
function loadData(){    

 jQuery.ajax({
    async: true,
    type: 'POST',
    url: urlPath,
    noCache:true,
    data:{
    },
    success: function(data, textStatus, jqXHR) {
        jQuery("#idDivResult").html(data); // result.jsp include here
        },
    error : function(jqXHR, textStatus, errorThrown)
    {

    }
});

loadFooter();
loadCriteria();
loadNavigation();
}

loadFooter(){
     jQuery.ajax({
     .....
     success: function(data, textStatus, jqXHR) {
        jQuery("#idDivFooter").html(data); // footer.jsp include here

     }
     ....
}

loadCriteria(){
     jQuery.ajax({
     .....
     success: function(data, textStatus, jqXHR) {
        jQuery("#idDivCriteria").html(data); // criteria.jsp include here

     }
     ....
}

loadNavigation(){
     jQuery.ajax({
     .....
     success: function(data, textStatus, jqXHR) {
        jQuery("#idDivNavigation").html(data); // navigation.jsp include here
     }
     ....
} 
```

# ms-access - 检查工作表是否已存在 Access

> ID：15061913
> 
> 赞同：1
> 
> 时间：2013-02-25T07:20:39.807
> 
> 标签：ms-access, ms-access-2007, vba

我正在尝试使用 vba 脚本自动将一些 Excel 工作表导入访问。但是，如果有人执行脚本两次，则数据将添加到已经存在的表中。

我正在使用的代码是这样的：

```
DoCmd.TransferSpreadsheet _
acImport, _
acSpreadsheetTypeExcel9, _
"DB_AlarmTest", _
"C:\Data\PLC_MOBZ\Test\Import\DB_AlarmTest.xlsx", _
True 
```

有没有办法检查这个表是否已经存在，如果存在，删除或覆盖现有表并用新表替换它，而不是只添加值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:14:34.343

您可以在运行导入之前删除表：

```
On Error Resume Next
CurrentDb.Execute "DROP TABLE DB_AlarmTest"
On Error GoTo 0

DoCmd.TransferSpreadsheet _
    acImport, _
    acSpreadsheetTypeExcel9, _
    "DB_AlarmTest", _
    "C:\Data\PLC_MOBZ\Test\Import\DB_AlarmTest.xlsx", _
    True 
```

# java - java中的二进制编辑

> ID：15061916
> 
> 赞同：0
> 
> 时间：2013-02-25T07:20:51.380
> 
> 标签：java, file, byte

我有一个文件，我试图对其进行二进制编辑以切断标题。

我已经确定了要保留在文件中的实际数据的起始地址，但是我试图在 Java 中找到一种方法，在该方法中我可以指定要从文件中删除的字节范围。

目前我正在（缓冲）FileInputStream中读取文件，我能看到切断该文件标题的唯一方法是将我的起始地址保存到内存中的文件末尾，然后将其写出来覆盖原始文件。

是否有任何功能可以删除文件中的位而无需经历创建全新文件的过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:45:33.017

有一种截断文件的方法（[setLength](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html#setLength%28long%29)），但没有 API 可以从内部删除任意序列。

如果文件太大以至于重写时存在性能问题，我建议将其拆分为多个文件。通过使用 RandomAccessFile 寻找删除点，​​从那里重写然后截断，可能可以获得一些性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:10:31.607

试试这个，它使用 RandomAccessFile 清除文件中不需要的部分，首先查找起始索引，然后再清除不需要的字符。

```
import java.io.File;
import java.io.IOException;
import java.io.RandomAccessFile;

public class Main {
    public static void main(String[] args) {
        int startIndex = 21;
        int numberOfCharsToRemove = 20;

        // Using a RandomAccessFile, overwirte the part you want to wipe
        // out using the NUL character
        try (RandomAccessFile raf = new RandomAccessFile(new File("/Users/waleedmadanat/Desktop/sample.txt"), "rw")) {
            raf.seek(startIndex);

            for (int i = 1; i <= numberOfCharsToRemove; i++) {
                raf.write('\u0000');
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:22:26.537

我找不到任何 API 方法来执行我想要的（与上面的答案一起）

我解决了这个问题，只需将文件重新写入一个新文件，然后用新文件替换旧文件。

我使用以下代码执行替换：

```
FileOutputStream fout = new FileOutputStream(inFile.getAbsolutePath() + ".tmp");
FileChannel chanOut = fout.getChannel();
FileChannel chanIn = fin.getChannel();

chanIn.transferTo(pos, chanIn.size(), chanOut); 
```

其中 pos 是我开始文件传输的起始地址，它直接出现在我从这个文件中剪切出来的标题下。

我也注意到使用这种方法没有减速

# ios - 如何在添加 endIgnoringInteractionEvents 之前匹配 beginIgnoringInteractionEvents

> ID：15061917
> 
> 赞同：7
> 
> 时间：2013-02-25T07:20:55.837
> 
> 标签：ios

我正在使用这两个功能`[[UIApplication sharedApplication] beginIgnoringInteractionEvents];`，`[[UIApplication sharedApplication] endIgnoringInteractionEvents];`同时我正在从服务器下载数据。

我的日志中出现以下错误。

```
-[UIApplication endIgnoringInteractionEvents] called without matching -beginIgnoringInteractionEvents. Ignoring. 
```

我试图搜索几个链接，但找不到合适的解决方案。

[如何在不使用 beginIgnoringInteractionEvents 的情况下禁用触摸屏？](https://stackoverflow.com/questions/7379842/how-do-you-disable-touch-to-screen-without-using-beginignoringinteractionevents)

[什么是“-[UIApplication beginIgnoringInteractionEvents] 溢出。无视。”？](https://stackoverflow.com/questions/3784971/what-is-uiapplication-beginignoringinteractionevents-overflow-ignoring)

[忽略 AppKit 中的 UI 事件](https://stackoverflow.com/questions/1697029/ignoring-ui-events-in-appkit)

[beginIgnoringInteractionEvents 或 userInteractionEnabled = NO 未按预期工作](https://stackoverflow.com/questions/8707633/beginignoringinteractionevents-or-userinteractionenabled-no-not-working-as-exp)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T07:22:19.757

你可以随时检查。

```
if ([[UIApplication sharedApplication] isIgnoringInteractionEvents])... 
```

# php - 将一对附加到 PHP 数组的最简单方法

> ID：15061918
> 
> 赞同：2
> 
> 时间：2013-02-25T07:20:55.943
> 
> 标签：php, arrays, append

我想用 PHP 将对附加到数组中，这就是我目前拥有的；

```
pairs[0]['key1'] = 'something1';
pairs[0]['key2'] = 'something2';
pairs[1]['key1'] = 'other1';
pairs[1]['key2'] = 'other2';
pairs[2]['key1'] = 'thing1';
pairs[2]['key2'] = 'thing2'; 
```

有没有办法不必指定索引？即伪代码；

```
pairs[] = [key1=something1,key2=something2] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:24:32.693

```
for ($i=0;$i<=10;$i++){
    $arr[] = array("key"=>$i,"info"=>"something" . $i);
}
print_r($arr);
// output => Array ( [0] => Array ( [key] => 0 [info] => something0 ) [1] => Array ( [key] => 1 [info] => something1 ) [2] => Array ( [key] => 2 [info] => something2 ) ) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:24:03.500

[array_push()](http://php.net/manual/es/function.array-push.php)做你想要的

```
array_push($pairs, array('key1' => 'something1', 'key2' => 'something2')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:29:51.260

也许尝试：

```
$pairs[]=array(key1 => "something1", key2 => "something2") 
```

或者

```
$pairs[]=array_combine(array("key1","key2"),array("something1","something2")); 
```

（未测试）

# java - JAVAFX + MVC + 加载掩码

> ID：15061919
> 
> 赞同：1
> 
> 时间：2013-02-25T07:20:58.820
> 
> 标签：java, model-view-controller, javafx-2

![在此处输入图像描述](../Images/73dfd950803c43f48c2b9f08deabd6b2.png)

我正在尝试`onclick`在验证 MVC 架构时在事件上加载掩码图像。我无法设置加载图像，但能够在验证后设置加载图像，其中调解器正在返回视图。

我们可以从操作页面返回视图吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:03:52.617

做一件事，在控制器中加载您的掩码并在新线程中启动其余流程。一旦您获得登录响应，然后调用相应的方法进行进一步处理。意味着将以下内容放在新线程中并运行。然后您将获得对这些的访问权限，并且您的负载掩码将完成。

# sql - SQL Server：安全用户登录

> ID：15061923
> 
> 赞同：0
> 
> 时间：2013-02-25T07:21:07.243
> 
> 标签：sql, sql-server

我们的 WMS 使用数据库`TSECURE`来处理来自 WMS 的所有登录。我正在考虑创建自己的新软件仅用于上传目的。在这个 tsecure 中，我们为不同的用户维护/添加不同的安全用户登录。例如，我必须为 建立一个 WMS 访问`Alex`，我将首先为 建立一个 SQL Server 登录`alex`，然后将他的 [wms_user + wms_pass] 添加到`[TSECURE]`下面的数据库凭据中`[sql_server_user_alex / pass]`。

**我的问题：**

*   是否需要为不同的用户使用不同的安全登录？
*   只为所有用户使用一个用户可以吗？前任。`userS: [alex1] / [joseph2] / [jdoe] / [aron] ...`都在`[sa]`安全登录下吗？这会有什么缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-05T14:54:56.753

正如 marc_s 指出的那样。

> 通常的方法是：(1) 创建一个 Windows 组，(2) 将三个用户放入该组，(3) 为该组创建一个 SQL Server 登录名，以及 (4) 为该组登录名提供必要的权限在您的数据库中。这样，您可以向该 Windows 组添加新成员，他们将自动拥有访问该数据库所需的所有权限。不要--永远-- 在生产系统中使用 sa 帐户！没有例外！

[Windows 身份验证比 SQL 身份验证安全得多。](https://msdn.microsoft.com/en-us/library/ms144284.aspx)

“将所有用户置于 SA 之下”- 在任何情况下都不要这样做。

[请查看 CIS SQL Server 基线以获得进一步的指导。](https://benchmarks.cisecurity.org/tools2/sqlserver/CIS_Microsoft_SQL_Server_2014_Benchmark_v1.0.0.pdf)

# android - 在 Phonegap Android 中添加蓝牙插件

> ID：15061932
> 
> 赞同：1
> 
> 时间：2013-02-25T07:21:43.923
> 
> 标签：android, bluetooth, phonegap-plugins

我正在尝试使用 Phonegap 的 Android 蓝牙插件。[我从那里](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Bluetooth)下载了插件文件并按照以下步骤操作：

*   创建了一个名为 com.phonegap.plugin.bluetooth 的包
*   将 Bluetooth.java 和 BluetoothPlugin.java 文件复制到此。
*   `<plugin name="BluetoothPlugin" value="com.phonegap.plugin.bluetooth.BluetoothPlugin"/>`在 plugins.xml 中添加

执行此操作后，我在 this.ctx 中的 BluetoothPlugin.java 中收到错误：

> “类型不匹配：无法从 LegacyContext 转换为 Context”。

我该如何解决这个问题？同样在插件中给出了蓝牙和蓝牙插件文件夹，使用哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:44:17.130

我认为这取决于您使用的科尔多瓦版本。对于最新版本，我发现了这个我即将使用的[https://github.com/Viras-/phonegap-plugins/tree/master/Android/BluetoothPlugin 。](https://github.com/Viras-/phonegap-plugins/tree/master/Android/BluetoothPlugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T13:15:01.327

您还应该看看这个插件： [phonegap-bluetooth-plugin](https://github.com/tanelih/phonegap-bluetooth-plugin)

经过测试，它适用于版本 2.6 到 3.0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T15:59:35.903

替代插件蓝牙聊天， [https://github.com/furini/BlueGap](https://github.com/furini/BlueGap)

# java - 在 Android 和 iPhone 中使用 Jingle 的语音聊天应用程序

> ID：15061938
> 
> 赞同：2
> 
> 时间：2013-02-25T07:22:20.017
> 
> 标签：java, android, objective-c, ios6

我已经从以下链接下载了 webrtc-jingle-client-master 应用程序：[https](https://github.com/lukeweber/webrtc-jingle-client) ://github.com/lukeweber/webrtc-jingle-client 。但是，我找不到相同的 lib 文件。是一款支持Jingle、XMPP协议扩展的语音聊天应用。任何人都可以建议一些库与它集成或如何进一步使用应用程序？

# silverlight-5.0 - 哪个版本的液体 dll 适合 silverlight 5

> ID：15061948
> 
> 赞同：0
> 
> 时间：2013-02-25T07:23:13.173
> 
> 标签：silverlight-5.0

我是 Silverlight 技术的新手，并开始使用液体菜单项示例。但无法在我的 Silverlight 应用程序中引用液体 DLL。请告诉我如何执行此操作以及哪个版本的液体 DLL 最适合 Siverlight 5。任何帮助都非常感谢。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:14:57.433

*Liquid*库是为*Silverlight 4*开发的，应该或多或少完全适用于*Silverlight 5*。

您应该能够参考最新的*Liquid*版本，即 5.3.3，其二进制文件和源代码都可以从[Vectorlight 网站](http://www.vectorlight.net/silverlight/downloads.aspx)下载（需要注册）。如果要使用菜单功能，`Liquid.Menu`请在应用程序中引用 DLL。

# php - 登录不工作 404 错误

> ID：15061950
> 
> 赞同：0
> 
> 时间：2013-02-25T07:23:19.217
> 
> 标签：php, codeigniter, login

看看这段代码，我一直收到错误 404 **The requested URL not found The requested URL /Surway_Test/verifylogin was not found on this server**。不知道有什么问题。

谁能帮忙？这是我的代码

**控制器：验证登录.php**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Verifylogin extends CI_Controller {

 function index()
 {
   //This method will have the credentials validation
   $this->load->model('user','',TRUE);  
   $this->load->library('form_validation');

   $this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean');
   $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database');

   if($this->form_validation->run() == FALSE)
   {
     //Field validation failed.  User redirected to login page
     $this->load->view('login_view');
   }
   else
   {
     //Go to private area
     redirect('home', 'refresh');
   }

 }

 function check_database($password)
 {
   //Field validation succeeded.  Validate against database
   $username = $this->input->post('username');

   //query the database
   $result = $this->user->login($username, $password);

   if($result)
   {
     $sess_array = array();
     foreach($result as $row)
     {
       $sess_array = array(
         'id' => $row->id,
         'username' => $row->username
       );
       $this->session->set_userdata('logged_in', $sess_array);
     }
     return TRUE;
   }
   else
   {
     $this->form_validation->set_message('check_database', 'Invalid username or password');
     return false;
   }
 }
}
?> 
```

**主页.php**

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
session_start(); //we need to call PHP's session object to access it through CI

class Home extends CI_Controller {

 function index()
 {
   if($this->session->userdata('logged_in'))
   {
     $session_data = $this->session->userdata('logged_in');
     $data['username'] = $session_data['username'];
     $this->load->view('home_view', $data);
   }
   else
   {
     //If no session, redirect to login page
     redirect('login', 'refresh');
   }
 }

 function logout()
 {
   $this->session->unset_userdata('logged_in');
   session_destroy();
   //redirect('home', 'refresh');
 }

}

?> 
```

**型号：user.php**

```
<?php
Class User extends CI_Model
{
 function login($username, $password)
 {
   $data['main_content'] = 'login_view';
   $this->load->view('includes/template', $data);
   $this->db->select('id, username, password');
   $this->db->from('membership');
   $this->db->where('username', $username);
   $this->db->where('password', md5($password));
   $this->db->limit(1);

   $query = $this->db->get();

   if($query->num_rows() == 1)
   {
     return $query->result();
   }
   else
   {
     return false;
   }
 }
}
?> 
```

**查看：login_view.php**

```
<html>
 <head>
   <title>Login</title>
 </head>
 <body>
   <h1>Login</h1>
   <?php echo validation_errors(); ?>
   <?php echo form_open('verifylogin'); ?>
     <label for="username">Username:</label>
     <input type="text" size="20" id="username" name="username"/>
     <br/>
     <label for="password">Password:</label>
     <input type="password" size="20" id="passowrd" name="password"/>
     <br/>
     <input type="submit" value="Login"/>
   </form>
 </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:59:50.947

小修复，您必须像这样以小写字母开头控制器名称...

```
<?php echo form_open('verifyLogin'); ?>
    <label for="username">Username:</label>
    <input type="text" size="20" id="username" name="username" />
    <br/>
    <label for="password">Password:</label>
    <input type="password" size="20" id="passowrd" name="password" />
    <br/>
    <input type="submit" value="Login" />
</form> 
```

# javascript - 如何在 JSON 中使用 if 语句？

> ID：15061952
> 
> 赞同：14
> 
> 时间：2013-02-25T07:24:00.520
> 
> 标签：javascript, jquery, json

如何在 JSON 中使用 if 语句代码如下： ................................................ ..................................................................

```
var config =
             [
                {
                    "name"      : "SiteTitle",
                    "bgcolor"   : "",
                    "color"     : "",
                    "position"  : "TL",
                    "text"      : "step1",
                    "time"      : 5000
                },
                {
                    "name"      : "Jawal",
                    "bgcolor"   : "",
                    "color"     : "",
                    "text"      : "step2",
                    "position"  : "BL",
                    "time"      : 5000
                },
                {
                    "name"      : "Password",
                    "bgcolor"   : "",
                    "color"     : "",
                    "text"      : "step3",
                    "position"  : "TL",
                    "time"      : 5000
                }
            ],

            //define if steps should change automatically
            autoplay    = false,
            //timeout for the step
            showtime,
            //current step of the tour
            step        = 0,
            //total number of steps
            total_steps = config.length; 
```

这是所需的结果，如下所示：

```
 var config =
         [

    if(page==true)  {               
            {
                "name"      : "SiteTitle",
                "bgcolor"   : "",
                "color"     : "",
                "position"  : "TL",
                "text"      : "step1",
                "time"      : 5000
            },
            {
                "name"      : "Jawal",
                "bgcolor"   : "",
                "color"     : "",
                "text"      : "step2",
                "position"  : "BL",
                "time"      : 5000
            }
    } else {
            {
                "name"      : "Password",
                "bgcolor"   : "",
                "color"     : "",
                "text"      : "step3",
                "position"  : "TL",
                "time"      : 5000
            }
    }
        ],

            //define if steps should change automatically
            autoplay    = false,
            //timeout for the step
            showtime,
            //current step of the tour
            step        = 0,
            //total number of steps
            total_steps = config.length; 
```

实际上这种方式是错误的并且会导致 JavaScript 语法错误。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-09-07T08:01:41.573

验证[JSON Schema Draft-07](https://json-schema.org/draft-07/json-schema-release-notes.html)后，JSON 现在支持`if...then...else`条件数据表示的关键字。

这是一个简单的例子：

```
{
    "type": "integer",
    "minimum": 1,
    "maximum": 1000,
    "if": { "minimum": 100 },
    "then": { "multipleOf": 100 },
    "else": {
        "if": { "minimum": 10 },
        "then": { "multipleOf": 10 }
    }
} 
```

## 编辑

在上下文中使用 OP 的示例，它可以这样写：

```
{
    "if": {
        "page": true
    },
    "then": [
        {
            "name": "SiteTitle",
            "bgcolor": "",
            "color": "",
            "position": "TL",
            "text": "step1",
            "time": 5000
        },
        {
            "name": "Jawal",
            "bgcolor": "",
            "color": "",
            "text": "step2",
            "position": "BL",
            "time": 5000
        }
    ],
    "else": [
        {
            "name": "Password",
            "bgcolor": "",
            "color": "",
            "text": "step3",
            "position": "TL",
            "time": 5000
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T07:28:20.630

那是常规的 JavaScript，而不是 JSON。将`if`语句移到外面：

```
if (page) {
    var config = [
        {
            "name"      : "SiteTitle",
            "bgcolor"   : "",
            "color"     : "",
            "position"  : "TL",
            "text"      : "step1",
            "time"      : 5000
        }, {
            "name"      : "Jawal",
            "bgcolor"   : "",
            "color"     : "",
            "text"      : "step2",
            "position"  : "BL",
            "time"      : 5000
        }
    ];
} else {
    var config = [
        {
            "name"      : "Password",
            "bgcolor"   : "",
            "color"     : "",
            "text"      : "step3",
            "position"  : "TL",
            "time"      : 5000
        }
    ];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:32:24.630

或者这个：

```
 var config =
  (page == true) ?
     [             
        {
            "name"      : "SiteTitle",
            "bgcolor"   : "",
            "color"     : "",
            "position"  : "TL",
            "text"      : "step1",
            "time"      : 5000
        },
        {
            "name"      : "Jawal",
            "bgcolor"   : "",
            "color"     : "",
            "text"      : "step2",
            "position"  : "BL",
            "time"      : 5000
        }
  :
        {
            "name"      : "Password",
            "bgcolor"   : "",
            "color"     : "",
            "text"      : "step3",
            "position"  : "TL",
            "time"      : 5000
        }
    ]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-14T14:31:51.493

您也可以这样做（不是说这是最好的方法，而是另一种方法，在某些情况下可能有用）

```
let config = [];
if (page) {
   config.push({
        "name"      : "SiteTitle",
        "bgcolor"   : "",
        "color"     : "",
        "position"  : "TL",
        "text"      : "step1",
        "time"      : 5000
    });
   config.push({
        "name"      : "Jawal",
        "bgcolor"   : "",
        "color"     : "",
        "text"      : "step2",
        "position"  : "BL",
        "time"      : 5000
    });
} else {
    config.push({
        "name"      : "Password",
        "bgcolor"   : "",
        "color"     : "",
        "text"      : "step3",
        "position"  : "TL",
        "time"      : 5000
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-31T12:36:55.340

您可以在 JSON 中添加 if 。

```
const config = [
...(page ? [
     {
        "name"      : "SiteTitle",
        "bgcolor"   : "",
        "color"     : "",
        "position"  : "TL",
        "text"      : "step1",
        "time"      : 5000
    },
    {
        "name"      : "Jawal",
        "bgcolor"   : "",
        "color"     : "",
        "text"      : "step2",
        "position"  : "BL",
        "time"      : 5000
    }] : [{
        "name"      : "Password",
        "bgcolor"   : "",
        "color"     : "",
        "text"      : "step3",
        "position"  : "TL",
        "time"      : 5000
    }]),
]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-16T11:49:06.633

您可以使用一个库[jsoncode](https://www.npmjs.com/package/jsoncode)，它允许您将逻辑表达式直接应用到 JSON 中，并根据传输的模型获得必要的结果：

```
import jsoncode from './jsoncode.lib.mjs';

const json_src = {
    "configs [AS ARRAY]": {
        "[...IF page]": [
            {
                "name": "SiteTitle",
                "bgcolor": "",
                "color": "",
                "position": "TL",
                "text": "step1",
                "time": 5000
            }, {
                "name": "Jawal",
                "bgcolor": "",
                "color": "",
                "text": "step2",
                "position": "BL",
                "time": 5000
            }
        ],
        "[IF !page]": {
            "name": "Password",
            "bgcolor": "",
            "color": "",
            "text": "step3",
            "position": "TL",
            "time": 5000
        }
    }
};

const configsA = jsoncode(json_src, { page: true  }).configs;
const configsB = jsoncode(json_src, { page: false }).configs;

console.log('configsA:', configsA);
console.log('configsB:', configsB); 
```

[https://www.npmjs.com/package/jsoncode](https://www.npmjs.com/package/jsoncode)

# java - 需要帮助修复 ComboBox 编程错误

> ID：15061954
> 
> 赞同：0
> 
> 时间：2013-02-25T07:24:05.460
> 
> 标签：java

我实际上是一个新手，只是自学。我真的很想学习如何正确使用 JComboBox。我创建了一个简单的程序，但我花了很长时间才修复它。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class SampleButtonKo {
    JComboBox combo;

    public void ComboBox1() {
        String course[] = {
            "PM1", "PM2", "PM3", "PM4"
        };
        JFrame frame = new JFrame("Mang Inasal Ordering System");
        JPanel panel = new JPanel();
        combo = new JComboBox(course);
        combo.setBackground(Color.gray);
        combo.setForeground(Color.red);
        panel.add(combo);
        frame.add(panel);

        combo.addItemListener(new ItemListener() {
            public void itemStateChanged(ItemEvent ie) {
                String str = (String) combo.getSelectedItem();
                System.out.print("You have chosen " + str);
            }
        });
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 400);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        JComboBox = new JComboBox();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:28:02.537

您忘记了变量的名称

代替

```
JComboBox = new JComboBox(); 
```

尝试

```
JComboBox j = new JComboBox();
          ^ 
```

但也许，正如 iTech 建议的那样，您想要创建您的类的一个实例。

```
new SampleButtonKo(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:28:14.850

您的代码中明显很少有错误，您需要将`constructor`名称与您的类完全相同，并且没有返回类型。其次，在你的`main`你应该创建你的类的一个实例而*不是*`JComboBox`

```
public class SampleButtonKo{
  JComboBox combo;

  public SampleButtonKo(){
     // Copy your code from "ComboBox1" here
  }

public static void main(String[] args) {
   new SampleButtonKo();
  }
} 
```

# php - 在主布局中不工作 CJuiAutoComplete

> ID：15061957
> 
> 赞同：2
> 
> 时间：2013-02-25T07:24:12.647
> 
> 标签：php, yii

**我将在主布局**中显示搜索表单。我应该将自动完成设置为该字段。我使用 CJuiAutoComplete 。当站点加载主页时，此小部件不起作用，但我转到其他页面一切正常，此小部件工作正常。

```
<form action="" method="post">
                    <h2>search place</h2>
                    <label for="city">city 
                            <?php                            
$city=array('kam','lid','bojnood','joka','hemri');
                            $this->widget('zii.widgets.jui.CJuiAutoComplete',array(
                               'name' =>'city',
                                'source'=>array_values($city),
                                'htmlOptions'=>array(
                                    'style'=>'direction:rtl,width:100%,text-align:right'
                                )
                            ));
</label>
<input type="submit" value="جستجو" class="search"/>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:33:38.933

我找到了解决方案，但这并不感兴趣。我在主页中添加了 jquery ui 和命令。

```
<html>
<head>
<?php
Yii::app()->getClientScript()->registerCoreScript('jquery.ui');
?>
</head>
<body>
<script>
jQuery('#city').autocomplete({'source':['kam','lid','bojnood','joka','hemri']});
</script>
</body>
</html> 
```

# javascript - 从仪表板小部件记录错误

> ID：15061959
> 
> 赞同：0
> 
> 时间：2013-02-25T07:24:39.593
> 
> 标签：javascript, macos, widget, dashboard

我最近接管了 OSX Dashboard 小部件的维护工作。用户抱怨我无法重现的错误。尽管 Dashcode 显示了一个信息丰富的“运行日志”，其中包含异常和对 alert() 的 javascript 调用，但我一直无法找到 Dashboard Widgets 的任何错误日志。有什么办法可以向用户发送一个版本，将这些信息记录到一个文件中，让我对错误所在的位置有所了解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T17:19:11.093

一种可能性是在整个代码中调用类似这样的东西：

```
widget.system("echo `date` 'My custom log line' >> /tmp/mydashboardwidget.log"); 
```

# jquery - 在backbonejs中检查集合是否为空

> ID：15061965
> 
> 赞同：4
> 
> 时间：2013-02-25T07:24:49.653
> 
> 标签：jquery, backbone.js, underscore.js

我正在使用requirejs 和backbonejs 开发一个单页应用程序，其中涉及从数据库表中获取记录并显示它们。我正在点击一个按钮。我想我在单击按钮时不必要地反复从服务器获取模型。

我想要的是，一旦我在其上获取集合模型，不应在第二次单击按钮时再次获取。我在收集时所做的任何修改/添加都带有服务器验证，因此我将能够保留最新列表，而无需在单击该按钮时再次从服务器获取所有模型。

所以我需要在获取模型之前检查集合是否为空。像这样的东西：

```
if(window.invoices.isEmpty())
            {
                window.invoices.fetch({success:function(model){
                model.each(self.addOne,self);
                }});
            }
            else
            {
                window.invoices.each(self.addOne,self);
            } 
```

如果我在这里出现根本性错误，请说明一下。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T08:27:27.283

您可以使用该`length`方法。

`window.invoices.length == 0`

* * *

但是我有点不确定你要做什么`model.each(self.addOne, self)`。当您获取集合时，Backbone 将从返回的 JSON 中创建模型并为您填充集合。

# javascript - 根据 div 显示隐藏不起作用

> ID：15061966
> 
> 赞同：0
> 
> 时间：2013-02-25T07:24:53.663
> 
> 标签：javascript, html, css

```
<div id="tabs">
    <div id="nav">
      <p>Show Div 1:<input type="radio" name="tab" value="pkfrom" class="div1" /></p>
      <p>Show Div 2:<input type="radio" name="tab" value="pkfrom" class="div2" /></p>
    </div>

    <div id="div1" class="tab">
     <? echo form_open('email/send');?>

      <table width="100%">
      <tr><td>

Username:</td><td><? echo form_input('username', 'your username');?></td></tr>
<tr><td> Name:</td><td> <? echo form_input('Name', '');?></td></tr>
<tr><td> Address:</td><td> <? echo form_textarea('address', '');?></td></tr>
<tr><td> Degree:</td><td> <? echo form_input('specialist', '');?></td></tr>
<tr><td> Degree:</td><td> <? echo form_input('specialist', '');?></td></tr>

<? echo form_close();?>
      </table>

    </div>

    <div id="div2" class="tab">
      <p>this is div 2</p>
    </div>
  </div>

  <script type="text/javascript" charset="utf-8">
    (function(){
      var tabs =document.getElementById('tabs');
      var nav = tabs.getElementsByTagName('input');

      /* 
      * Hide all tabs
      */
      function hideTabs(){
        var tab = tabs.getElementsByTagName('div');
        for(var i=0;i<=nav.length;i++){
          if(tab[i].className == 'tab'){
            tab[i].className = tab[i].className + ' hide';
          }
        }
      }

      /*
      * Show the clicked tab
      */
      function showTab(tab){
        document.getElementById(tab).className = 'tab'
      }

      hideTabs(); /* hide tabs on load */

      /* 
      * Add click events
      */
      for(var i=0;i<nav.length;i++){
        nav[i].onclick = function(){
          hideTabs();
          showTab(this.className);
        }
      }
    })();
  </script>
</div> 
```

这是基于div的显示和隐藏的编码。但它只有在我只是在 div 中输入普通文本时才有效。但是，如果我添加 php 或任何 html 元素，它就不起作用。

任何想法如何纠正它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:51:59.123

我对其进行了一些修改，它似乎对我有用：我修改了以下内容-

```
 if(tab[i].className == 'tab'){
       document.getElementById('div' + i).style.display = 'none';
      } 
```

和

```
 function showTab(tab){
    document.getElementById(tab).style.display = 'block';
  } 
```

# python - python xml编写器

> ID：15061969
> 
> 赞同：0
> 
> 时间：2013-02-25T07:25:04.163
> 
> 标签：python, xml, ironpython

我试着这样做

```
import xml.etree.ElementTree as ET

root = ET.Element('xml')
projects = ["a", "e", "u"]
for i in projects:
    project = ET.SubElement(root,'project')
    project.set('name', i)
    designs = ["a", "e", "u"]
    for u in designs:
        design = ET.SubElement(project,'design')
        design.set('name', u)
        vars = ["a", "e", "u"]
        for z in vars:
            param = ET.SubElement(design,'param')
            param.set('name', z)
            value = ET.SubElement(param,'value')
            value.text = "var"
tree = ET.ElementTree(root)
tree.write('projects.xml') 
```

如果我用 ipy.exe 执行它，它的工作原理完全可以，但我需要从另一个程序的脚本接口执行它。脚本接口在 .NET 2.0.50727.5466 上使用 IronPython 2.6.10920.0 它运行没有错误，但它创建的文件始终为空。如果我尝试删除所述文件，它说它仍然在程序中打开。是否有释放 xml 文件的命令或者我忽略了什么？

更新：如果我在运行脚本后关闭有问题的程序，则正常创建 xml 文件

更新：像这样的简单文件编写器可以完美运行

```
f = open("pythontest.txt", "w")
projects = ["a", "e", "u"]
for i in projects:
    f.write("Name: " + i)
f.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:59:08.263

也可以将文件对象传递给 ElementTree 构造函数。也许，尝试用它创建文件，然后在最后关闭文件？

# asp.net - 使用内部ip时强制IE兼容模式

> ID：15061970
> 
> 赞同：0
> 
> 时间：2013-02-25T07:25:06.280
> 
> 标签：asp.net, internet-explorer-9, iis-7.5

我在 asp.net 中工作一个 web 应用程序，使用 ajax 和 jQuery，以及 C# 作为 VS2010 上的编程语言。prod 服务器是 2008 R2，用户在 Win7 PC 上使用 Internet Explorer 9（不能使用 Chrome 或其他）。

我的问题是用户在 IE 中以兼容模式查看我的网页，导致更新面板停止工作，不显示插入，不更新级联下拉菜单，不显示 CSS 圆角。

如果用户通过外部域访问该站点，一切正常，但大多数用户无法访问互联网并使用内部 IP，那么当问题出现时就会出现。

当用户使用内部 IP 时，如何使站点以正常模式打开？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:29:56.340

在 html 文档的 head 部分添加这一行：

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge" /> 
```

# ruby - 避免镜像安装新发布的 gem

> ID：15061975
> 
> 赞同：4
> 
> 时间：2013-02-25T07:25:12.723
> 
> 标签：ruby, rubygems

Bundler 1.3.0 刚刚发布（[目前只有 10 人](https://rubygems.org/gems/bundler)安装），但我只能安装一个 pre 版本，或者以前的版本。

```
$ gem install bundler --version 1.3.0 --verbose
HEAD http://rubygems.org/specs.4.8.gz
302 Moved Temporarily
HEAD http://production.s3.rubygems.org/specs.4.8.gz
304 Not Modified
ERROR:  Could not find a valid gem 'bundler' (= 1.3.0) in any repository
HEAD http://rubygems.org/prerelease_specs.4.8.gz
302 Moved Temporarily
HEAD http://production.s3.rubygems.org/prerelease_specs.4.8.gz
304 Not Modified
ERROR:  Possible alternatives: bundler

$ gem install bundler --version 1.3.0 --clear-sources --source http://rubygems.org --verbose
HEAD http://rubygems.org/specs.4.8.gz
302 Moved Temporarily
HEAD http://production.s3.rubygems.org/specs.4.8.gz
304 Not Modified
ERROR:  Could not find a valid gem 'bundler' (= 1.3.0) in any repository
HEAD http://rubygems.org/prerelease_specs.4.8.gz
302 Moved Temporarily
HEAD http://production.s3.rubygems.org/prerelease_specs.4.8.gz
304 Not Modified
ERROR:  Possible alternatives: bundler

$ gem install bundler --verbose
HEAD http://rubygems.org/latest_specs.4.8.gz
302 Moved Temporarily
HEAD http://production.s3.rubygems.org/latest_specs.4.8.gz
304 Not Modified
Installing gem bundler-1.2.4
/Users/agrimm/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/bundler-1.2.4/.gitignore
<snip>
/Users/agrimm/.rbenv/versions/2.0.0-p0/bin/bundle
Successfully installed bundler-1.2.4
Parsing documentation for bundler-1.2.4
Parsing sources...
100% [100/100]  lib/bundler/vlad.rb                                             
Done installing documentation for bundler (2 sec).
1 gem installed 
```

我如何告诉 ruby​​gems 查看规范的存储库，而不是过时的镜像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:05:32.383

我从[ruby​​gems.org](http://rubygems.org/gems/bundler/versions/1.3.0)下载了[gem 文件](http://rubygems.org/downloads/bundler-1.3.0.gem)，并使用.`gem install path/to/gem/file`

有人说他们是通过 安装的`gem install bundler --pre`，但我没有尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:06:18.163

在你的 Gemfile 中试试这个：

```
gem "nokogiri", :git => "git://github.com/tenderlove/nokogiri.git", :branch => "1.4"

git "git://github.com/wycats/thor.git", :tag => "v0.13.4"
gem "thor" 
```

[http://gembundler.com/git.html](http://gembundler.com/git.html)

或者试试这个 gem：
[https ://github.com/rdp/specific_install](https://github.com/rdp/specific_install)

# c# - mscorlib 代表什么？

> ID：15061977
> 
> 赞同：82
> 
> 时间：2013-02-25T07:25:18.823
> 
> 标签：c#, .net

mscorlib 绝对是 .net 基类库之一，C# 中的每个程序都依赖于它，但它代表什么？

在[C# 语言规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf)的 ECMA 标准中，这个词被提到了 4 次，但没有一个是指它的含义。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-02-25T07:30:13.990

**Micro **s** oft **C** **ommon** Object **R** **untime****库**。_ _**

 ******请参阅[http://www.danielmoth.com/Blog/mscorlibdll.aspx](http://www.danielmoth.com/Blog/mscorlibdll.aspx)和[“Cor”代表什么？](https://stackoverflow.com/questions/1123345/what-does-cor-stand-for)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-02-25T07:26:49.077

Microsoft Core Library，即它们是一切的核心。

您可能更喜欢“按摩”的解释：

“当微软刚开始开发 .NET Framework 时，MSCorLib.dll 是 Microsoft Common Object Runtime Library 的首字母缩写词。一旦 ECMA 开始标准化 CLR 和 FCL 的部分内容，MSCorLib.dll 正式成为 Multilanguage Standard Common Object 的首字母缩写词运行时库。”

来自[http://weblogs.asp.net/mreynolds/archive/2004/01/31/65551.aspx](http://weblogs.asp.net/mreynolds/archive/2004/01/31/65551.aspx)

1999 年左右，在我个人的记忆中，.Net 被称为“COOL”，所以我对这个派生有点怀疑。我从来没有听说过它叫做“COR”，对于一个以英语为母语的人来说，这是一个听起来很傻的名字。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-02-25T07:39:37.527

它代表

> Microsoft 的通用对象运行时库

它是框架公共库的主要程序集。

它包含以下命名空间：

```
 System
 System.Collections
 System.Configuration.Assemblies
 System.Diagnostics
 System.Diagnostics.SymbolStore
 System.Globalization
 System.IO
 System.IO.IsolatedStorage
 System.Reflection
 System.Reflection.Emit
 System.Resources
 System.Runtime.CompilerServices
 System.Runtime.InteropServices
 System.Runtime.InteropServices.Expando
 System.Runtime.Remoting
 System.Runtime.Remoting.Activation
 System.Runtime.Remoting.Channels
 System.Runtime.Remoting.Contexts
 System.Runtime.Remoting.Lifetime
 System.Runtime.Remoting.Messaging
 System.Runtime.Remoting.Metadata
 System.Runtime.Remoting.Metadata.W3cXsd2001
 System.Runtime.Remoting.Proxies
 System.Runtime.Remoting.Services
 System.Runtime.Serialization
 System.Runtime.Serialization.Formatters
 System.Runtime.Serialization.Formatters.Binary
 System.Security
 System.Security.Cryptography
 System.Security.Cryptography.X509Certificates
 System.Security.Permissions
 System.Security.Policy
 System.Security.Principal
 System.Text
 System.Threading
 Microsoft.Win32 
```

**有关 MSCorlib 的有趣信息：**

*   .NET 2.0 程序集将引用并使用 2.0 mscorlib。 `.NET 1.1`程序集将引用`1.1 mscorlib`但将在运行时使用 2.0 mscorlib（由于运行时本身的硬编​​码版本重定向）
*   在 GAC 中只有一个版本的 mscorlib，即使您的机器上安装了 1.1 框架，您也不会在 GAC 上找到 1.1 版本。如果有人能解释为什么`MSCorlib 2.0` 单独在 GAC 中而 1.x 版本位于框架文件夹中，那就太好了
*   是否可以通过在 app/web.config 中进行配置设置来强制应用程序加载不同的运行时？您将无法通过 ConfigurationFile 中的设置来选择 CLR 版本——此时，一个 CLR 已经在运行，并且每个进程只能有一个。选择 CLR 后，将立即加载适合该 CLR 的 MSCorlib。******

# regex - 我如何在不使用 DBD::DB2 驱动程序或 DBI cpan 模块的情况下做到这一点

> ID：15061979
> 
> 赞同：0
> 
> 时间：2013-02-25T07:25:23.087
> 
> 标签：regex, perl, hash

我已经使用 DBI 模块编写了这段代码，这是代码

```
#!/usr/local/bin/perl -w
  use DBI;
  use strict;
# Open a connection
  my $dbh = DBI->connect("dbi:DB2:awdrt", "db2inst1", "db2inst1", {RaiseError => 1});
# use VALUES to retrieve value from special register
  my $stmt = "select RTRIM(substr(A.TBSP_NAME,1,30)),A.TBSP_TYPE as TYPE,A.TBSP_FREE_PAGES as FREE,B.CONTAINER_NAME as CON_PATH from SYSIBMADM.TBSP_UTILIZATION A ,SYSIBMADM.CONTAINER_UTILIZATION B where A.TBSP_ID=B.TBSP_ID and A.TBSP_AUTO_RESIZE_ENABLED=0 with UR";
  my $sth = $dbh->prepare($stmt);
  $sth->execute();
# associate variables with output columns...
  my ($col1,$col,$col3,$col4);
  $sth->bind_col(1,\$col1);
  $sth->bind_col(3,\$col3);
  $sth->bind_col(4,\$col4);
  while ($sth->fetch) { if ($col3 <= 2000){
  print "$col1 has $col3 pages with container $col4\n";}
        }
  $sth->finish();
  $dbh->disconnect(); 
```

这是 O/p ：

```
TRANS_DATA has 1616 pages with container /adrst/bdts/trans_data_container
MASTER_INDEX has 1872 pages with container /adrst/bdts/master_index_container
TRANSACTION_INDEX has 1856 pages with container /adrst/bdts/transaction_index_container 
```

执行查询时的表数据为：

```
1                              TYPE       FREE                 CON_PATH                                                                                                                                                                                   
------------------------------ ---------- -------------------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
USERSPACE1                     DMS                       15056 /adrst/bdts/userspc_container                                                                                                                                                              
USERSPACE1                     DMS                       15056 /adrst/bdts/userspc_container1                                                                                                                                                             
MASTER                         DMS                        3584 /adrst/bdts/master_container                                                                                                                                                               
TRANS_DATA                     DMS                        1616 /adrst/bdts/trans_data_container                                                                                                                                                           
MASTER_INDEX                   DMS                        1872 /adrst/bdts/master_index_container                                                                                                                                                         
TRANSACTION_INDEX              DMS                        1856 /adrst/bdts/transaction_index_container                                                                                                                                                    
TEMP_SYS                       DMS                        2192 /adrst/bdts/temp_sys_container                                                                                                                                                             
AUDIT_DATA                     DMS                        3360 /adrst/bdts/audit_data_container                                                                                                                                                           
TEMP_USR                       DMS                        2672 /adrst/bdts/temp_usr_container                                                                                                                                                             
TSASNCA                        DMS                        2840 /home/db2inst1/db2inst1/NODE0000/SQL00002/TSASNCA                                                                                                                                          
TSASNUOW                       DMS                        2880 /home/db2inst1/db2inst1/NODE0000/SQL00002/TSASNUOW                                                                                                                                         
TSASNAA                        DMS                        3712 /home/db2inst1/db2inst1/NODE0000/SQL00002/TSASNAA                                                                                                                                          
TSCDADDRESSMASTER              DMS                        2048 /home/db2inst1/db2inst1/NODE0000/SQL00002/CDADDRESSMASTER                                                                                                                                  

  13 record(s) selected. 
```

我在这里尝试的基本上是报告少于 2000 页的表空间，现在我的问题是没有这个模块我该怎么做，什么是更好的选择，哈希、正则表达式、grep？如果是这样，我需要将三列报告为 o/p ，我该如何使用这些或任何可能使用的东西来做到这一点？

帮助表示赞赏......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:02:04.140

如果您的客户要求您连接到数据库，那么他们必须允许您使用适当的驱动程序来连接到数据库。其他任何事情都是疯狂的。简而言之：使用`DBI`.

如果是获取 root 访问权限的问题，您可以将模块本地安装到您的脚本中，而无需更改系统的 Perl 安装。请参阅：[如何在没有 root 权限的情况下安装 Perl 模块？](https://stackoverflow.com/a/3736710/1919238)

当然，您*可以*创建一些使用反引号获取 shell 命令输出的内容，然后使用正则表达式对其进行处理。但是，我建议不要这样做——除非连接到数据库不是您程序的主要目的，并且您只需要执行一次精确查询。在这种情况下，也许安装模块会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:10:54.067

使用 mysql 客户端以 csv 格式（制表符分隔）检索数据并将其通过管道传输到 perl oneliner 就可以了。如果你愿意，你可以格式化输出。

```
db2...| perl -lne '@t=split(/\t/);print $_ if $t[2] >= 2000;' 
```

# math - 如何知道一个点的位置？

> ID：15061982
> 
> 赞同：1
> 
> 时间：2013-02-25T07:25:35.567
> 
> 标签：math, geometry, computational-geometry

我有一个由三个给定点组成的圆圈。我怎么知道另一个给定点是否在前三个点形成的圆圈内。它是我需要计算的决定因素吗？那么我需要处理哪些情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:51:57.773

似乎您想知道答案而不计算圆参数（半径，中心）。因此，您可以[将方程用于三角形的外接圆](http://mathworld.wolfram.com/Circumcircle.html)（公式 2），将 (x,y) 替换为给定的点坐标并计算行列式 (Det) 符号。

重要提示：点 x1、x2、x3 应按逆时针顺序排列。否则 - 更改标志

```
| x^2+y^2    x    y   1 |
| x1^2+y1^2  x1  y1   1 | = Det
| x2^2+y2^2  x2  y2   1 |
| x3^2+y3^2  x3  y3   1 |

To take mutual orientation of points into account:
Det = Det * ((x1-x3)*(y2-y3)-(y1-y3)*(x2-x3))

If Det = 0 then all four points are concyclic (given point lies at the circle border)
if Det < 0 then point is inside
otherwise it is outside the circle 
```

但我怀疑这种方法可能需要更多的数学运算，然后计算半径和中心点并估计`(x-x0)^2+(y-y0)^2 <= R^2`

补充：似乎计算四阶行列式的一般方法在这里不是很有效：而是使用第四列的小数（[拉普拉斯公式在这里）或](http://en.wikipedia.org/wiki/Determinant)[WolphramAlpha 输出](http://www.wolframalpha.com/input/?i=determinant%7B%7Bx%5E2%2by%5E2,x,y,1%7D,%7Bx1%5E2%2by1%5E2,x1,y1,1%7D,%7Bx2%5E2%2by2%5E2,x2,y2,1%7D,%7Bx3%5E2%2by3%5E2,x3,y3,1%7D%7D)的“替代形式”之一

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:39:20.067

如果内圆的半径小于外圆的半径，则表示内圆在外圆内（以防万一您需要测试另一个圆是否在外圆内）。

这是圆的公式：

```
x = (Math.cos(angle * Math.PI / 180) * radius) + this.centerX;
y = (Math.sin(angle * Math.PI / 180) * radius) + this.centerY; // in radians 
```

您可以应用此公式来测试点是否在圆内。

要测试两个圆是否相交，您必须查看它们的中心之间的距离是否在它们半径的总和和差之间。

# c++ - 使用 C++ 元编程模板重载运算符

> ID：15061993
> 
> 赞同：0
> 
> 时间：2013-02-25T07:26:42.887
> 
> 标签：c++, performance, template-meta-programming

我正在使用一些模板元编程来解决一个小问题，但是语法有点烦人——所以我想知道，在下面的示例中，在具有空构造函数的元类上重载运算符会导致 (运行时）性能损失？是否会实际构建所有临时对象，或者是否可以假设它们将被优化？

```
template<int value_>
struct Int {
    static const int value = value_;

    template<typename B>
    struct Add : public Int<value + B::value> {  };

    template<typename B>
    Int<value + B::value> operator+(B const&) { return Int<value + B::value>(); }
};

int main()
{
    // Is doing this:
    int sum = Int<1>::Add<Int<2> >().value;

    // any more efficient (at runtime) than this:
    int sum = (Int<1>() + Int<2>()).value;

    return sum;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:05:51.887

好的，我在 GCC 下尝试了我的示例。

对于`Add`没有优化的版本 ( `-O0`)，生成的程序集只是将一个常量加载到 sum 中，然后返回它。

对于`operator+`没有优化的版本 ( `-O0`)，生成的程序集会做更多的事情（它似乎在调用`operator+`）。

但是，`-O3`两个版本都生成相同的程序集，只是`3`直接加载到返回寄存器中；在这两种情况下，临时变量、函数调用和`sum`已完全优化。

因此，**它们**与一个体面的编译器同样快（只要打开了优化）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:05:40.280

比较两种解决方案的 g++ -O3 -S 生成的汇编代码。它为两种解决方案提供了相同的代码。它实际上优化了代码以简单地返回 3。